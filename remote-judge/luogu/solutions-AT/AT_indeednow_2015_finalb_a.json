[
    {
        "content": "\u524d\u7f6e\u77e5\u8bc6\uff1a\n\n$1^3+2^3+...+n^3=\\dfrac{n^2\\times (n+1)^2}{4}$\n\n$1^2+2^2+...+n^2=\\dfrac{n\\times (n+1) \\times (2\\times n + 1)}{6}$\n\n---\n\n\u7531\u9898\u610f\u53ef\u5f97\uff0c\u7b2c $n$ \u884c\u7684\u5f62\u6001\u4e3a $(n,1)(n,2)(n,3)....(n,n)$\n\n\u5219\u7b2c $n$ \u884c\u503c\u4e3a : $n\\times 1 + n \\times 2+....+n \\times n=\\dfrac{n^3+n^2}{2}$ \n\n\u90a3\u4e48\u524d $n$ \u884c\u7684\u503c\u4e3a\uff1a\n\n$$f(n)=$$\n\n$$\\frac{(1^2+2^2+...+n^2)+(1^2+2^3+...+n^3)}{2}$$\n\n$$=\\frac{3\\times n^2 \\times (n+1)^2+2\\times n\\times(n+1)\\times(2n+1)}{24}$$\n\n\u6c42 $a\\sim b$ \u7684\u603b\u548c\u53ea\u9700\u8981\u6c42\u51fa $f(b)-f(a-1)$ \u5373\u53ef\u3002\n\n\u7531\u4e8e $f(n)$ \u7684\u8868\u8fbe\u5f0f\u4e2d\u542b\u6709\u9664\u6cd5\uff0c\u6240\u4ee5\u53d6\u6a21\u65f6\u8981\u7528\u9006\u5143\u3002\n\n---\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(\\log p)$\uff0c$p$ \u4e3a\u53d6\u6a21\u7684\u503c\u3002\uff08\u8fd9\u5c82\u4e0d\u6bd4\u5927\u90e8\u5206\u9898\u89e3\u901f\u5ea6 $O(n)$ \u5feb\u591a\u4e86 \uff0c\u518d\u6539\u4e00\u4e0b\u5c31\u5b8c\u5168 $O(1)$ \u4e86\uff09\n\n\n\n$O(\\log p)$\u4ee3\u7801\uff1a\n```c++\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int mod = 1e9 + 7;\nint qpow(int a, int k, int p) {\n\tint res = 1;\n\twhile (k) {\n\t\tif (k & 1) res = res * a % p;\n\t\ta = a * a % p;\n\t\tk >>= 1;\n\t}\n\treturn res;\n}\nint a, b;\nint query(int n) {   //\u524d n \u884c\u7684\u503c \n\treturn (3 * n * n % mod * (n + 1) % mod * (n + 1) % mod + 2 * n * (n + 1)  % mod * (2 * n + 1) % mod) * qpow(24, mod - 2, mod) % mod;\n}\nsigned main() {\n\tcin >> a >> b;\n\tcout << (query(b) - query(a - 1) + mod) % mod << endl;\n\t\n}\n```\n$O(1)$ \u4ee3\u7801:\n```c++\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int mod = 1e9 + 7;\nint a, b;\nint query(int n) {   //\u524d n \u884c\u7684\u503c \n\treturn (3 * n * n % mod * (n + 1) % mod * (n + 1) % mod + 2 * n * (n + 1)  % mod * (2 * n + 1) % mod) * 41666667 % mod;   \n    //\u76f4\u63a5\u628a24\u5173\u4e8emod\u7684\u9006\u5143\u66ff\u6362\u4e3a41666667,\u8fd9\u4e0d\u5c31O(1)\u4e86\uff1f\uff1f\n}\nsigned main() {\n\tcin >> a >> b;\n\tcout << (query(b) - query(a - 1) + mod) % mod << endl;\n}\n```",
        "postTime": 1644553203,
        "uid": 411727,
        "name": "stOtue",
        "ccfLevel": 0,
        "title": "AT1278 Counting on a Triangle"
    },
    {
        "content": "### \u9898\u610f\u7b80\u8ff0\n\u6709\u4e00\u5e45\u56fe\uff0c\u5b83\u7684\u7b2c $n$ \u884c\u6709 $n$ \u4e2a\u70b9\u3002\n\n\u6bcf\u4e2a\u70b9\u7684\u503c\u4e3a\u6bcf\u4e2a\u70b9\u6a2a\u5750\u6807\u4e0e\u7eb5\u5750\u6807\u7684\u4e58\u79ef\uff0c\u5373($x,y$)=$x*y$\u3002\n\n\u6709\u4e24\u4e2a\u6b63\u6574\u6570 $A$ \u548c $B$\uff0c\u6c42\u51fa\u4ece $A$ \u884c\u5230 $B$ \u884c\u4e4b\u95f4\uff0c\u6240\u6709\u7684\u70b9\u7684\u503c\u7684\u603b\u548c\uff0c\u8f93\u51fa\u5bf9\u7ed3\u679c\u9664\u4ee5$1000000007$\u7684\u4f59\u6570\n### \u601d\u8def\n\u6211\u4eec\u53ef\u4ee5\u624b\u6253\u51fa\u8fd9\u5e45\u56fe\uff0c\u627e\u4e00\u627e\u89c4\u5f8b\uff1a\n\n$(1,1)$\n\n$(2,1)(2,2)$\n\n$(3,1)(3,2)(3,3)$\n\n$(4,1)(4,2)(4,3)(4,4)$\n\n$(5,1)(5,2)(5,3)(5,4)(5,5)$\n\n$(6,1)(6,2)(6,3)(6,4)(6,5)(6,6)\\cdot \\cdot \\cdot \\cdot \\cdot \\cdot$\n\n\u901a\u8fc7\u8ba1\u7b97\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u7b2c $n$ \u884c\u7684\u503c\u7684\u603b\u548c\u7b49\u4e8e\n\n### $(n*(n*(n+1)/2))$\n\u8bc1\u660e\u5982\u4e0b\uff1a\n\n$\\because n$ \u884c\u6709 $n$ \u4e2a\u70b9\uff0c\n\n$\\therefore$ \u6bcf\u884c\u70b9\u7684\u5750\u6807\u4e3a $(n,1)(n,2)(n,3)\\cdot \\cdot \\cdot \\cdot \\cdot \\cdot(n,n)$\uff0c\n\n$\\therefore$ \u6bcf\u884c\u70b9\u7684\u6c42\u548c\u516c\u5f0f\u4e3a$(n*1)+(n*2)+(n*3)+\\cdot \\cdot \\cdot \\cdot \\cdot \\cdot(n*n)$\n\n$=n*(1+2+3+\\cdot \\cdot \\cdot \\cdot \\cdot \\cdot n)$\n   \n   \u4e0d\u96be\u770b\u51fa\u7b49\u5f0f\u4e3a\u4e00\u4e2a\u4ece$1$\u5230 $n$ \u7684\u7b49\u5dee\u6570\u5217\u4e0e $n$ \u7684\u4e58\u79ef\uff0c\n   \n   \u800c\u7b49\u5dee\u6570\u5217\u7684\u6c42\u548c\u516c\u5f0f\u5927\u5bb6\u90fd\u77e5\u9053\uff0c\u5c31\u662f\n   \n## $\\frac{n*(n+1)}{2}$\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u5982\u4e0a\u516c\u5f0f\u3002\n\n\u73b0\u5728\uff0c\u8fd9\u9053\u9898\u7684\u601d\u8def\u5c31\u5341\u5206\u6e05\u6670\uff0c\u53ea\u9700\u8981\u679a\u4e3e $A$ \u5230 $B$ \u4e4b\u95f4\u7684\u6bcf\u4e00\u884c\uff0c\u6c42\u51fa\u8be5\u884c\u7684\u503c\u7684\u603b\u548c\u5c31\u884c\u4e86\u3002\u4e0d\u8fc7\u8fd8\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\uff1a\n\n\u7531\u4e8e $A$ \u548c $B$ \u7684\u53d6\u503c\u5728$1$\u5230$1000000$\u4e4b\u95f4\uff0c\u6240\u4ee5\u6700\u597d\u6bcf\u7b97\u4e00\u6b21\u5c31\u6c42\u4e00\u6b21\u4f59\u6570\u3002\n\n\u73b0\u5728\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u5199\u51fa\u4ee3\u7801\u4e86\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long ans,a,b,i;\nint main(){\n\tcin>>a>>b;\n\tfor(i=a;i<=b;i++){\n\t\tans+=(i*((i*(i+1)/2)%1000000007))%1000000007;//\u6267\u884c\u4e0a\u9762\u63a8\u5bfc\u51fa\u6765\u7684\u516c\u5f0f\n\t\tans%=1000000007;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\u666e\u53ca-\u96be\u5ea6\u5de6\u53f3\uff0c\u611f\u8c22\u4f60\u4eec\u7684\u89c2\u770b\uff0c\u8bf7\u7ed9\u6211\u70b9\u4e00\u4e2a\u8d5e\uff0c\u4f60\u4eec\u7684\u652f\u6301\u5c31\u662f\u5bf9\u6211\u6700\u5927\u7684\u9f13\u52b1\uff01",
        "postTime": 1611835810,
        "uid": 374318,
        "name": "hswfwkj",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT1278 \u3010Counting on a Triangle\u3011"
    },
    {
        "content": "[\u53ef\u80fd\u4f1a\u6709\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/sunskydp/p/solution-at1278.html)\n\n### \u9898\u610f\n\n\u4e00\u4e2a\u7b2c $n$ \u884c\u6709 $n$ \u4e2a\u70b9\u7684\u77e9\u9635\uff0c\u5176\u89c4\u5f8b\u4e3a**\u6bcf\u4e2a\u70b9\u7684\u503c\u4e3a\u6bcf\u4e2a\u70b9\u6a2a\u5750\u6807\u4e0e\u7eb5\u5750\u6807\u7684\u4e58\u79ef**\uff0c\u6c42\u7b2c $A$ \u884c\u5230\u7b2c $B$ \u884c\u6240\u6709\u70b9\u7684\u503c\u7684\u548c\uff08\u5305\u62ec $A$\uff0c$B$ \u4e24\u884c\uff09\uff0c\u7ed3\u679c $\\mod1000000007$\u3002\n\n### \u66b4\u529b\u505a\u6cd5\n\n\u679a\u4e3e\u6bcf\u4e2a\u6570\u5e76\u7d2f\u52a0\u53d6\u6a21\u5373\u53ef\uff0c\u663e\u7136\uff0c\u590d\u6742\u5ea6 $\\Theta(n^2)$ \u7684\u66b4\u529b\u4f1a TLE\uff0c\u56e0\u4e3a\u6570\u636e\u8303\u56f4\u662f $10^6$\u3002\n\n### \u4f18\u5316\n\n\u4ed4\u7ec6\u89c2\u5bdf\u8fd9\u4e2a\u77e9\u9635\uff0c\u6211\u4eec\u53ef\u4ee5\u4e00\u884c\u4e00\u884c\u8003\u8651\uff0c\n\n\u5bf9\u4e8e\u7b2c $n$ \u884c\uff0c\u6bcf\u4e2a\u70b9\u7684\u5750\u6807\u5206\u522b\u4e3a $(1,n),(2,n),(3,n)\\cdots(n-1,n),(n,n)$\uff0c\n\n\u8fd9\u4e9b\u70b9\u7684\u503c\u7684\u548c\u4e3a $n + 2n + 3n + \\cdots + (n-1)n + n^2$\uff0c\n\n\u63d0\u53d6\u516c\u56e0\u6570\u540e\u5f97 $n(1 + 2 + 3 + \\cdots + n-1 + n)$\uff0c\n\n\u56e0\u6b64\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e86\u6c42\u8fd9\u4e2a\u7b49\u5dee\u6570\u5217\u7684\u548c\u3002\n\n\u8fd0\u7528\u6211\u4eec\u6570\u5b66\u8bfe\u7684\u77e5\u8bc6\uff0c\u5bf9\u4e00\u4e2a\u7b49\u5dee\u6570\u5217\u6c42\u548c\uff0c\u5176\u516c\u5f0f\u4e3a $\\frac{n(n+1)}{2}$\u3002\n\n\u518d\u56de\u5230\u66b4\u529b\u89e3\u6cd5\uff0c\u539f\u6765\u7684\u7b2c\u4e8c\u5c42\u5faa\u73af\u5c31\u53ef\u4ee5\u66ff\u6362\u4e3a\u7b49\u5dee\u6570\u5217\u6c42\u548c\uff0c\u8fd9\u65f6\u5c31\u53ea\u6709\u4e00\u91cd\u5faa\u73af\u4e86\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(n)$\u3002\n\n### \u4ee3\u7801\n\n\u5206\u6790\u4e4b\u540e\u4ee3\u7801\u5c31\u5f88\u597d\u5199\u4e86\uff0c\u6ce8\u610f\u53d6\u6a21\uff0c\u867d\u7136\u7b54\u6848\u518d int \u8303\u56f4\u5185\uff0c\u4f46\u662f\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u8d85\u51fa int \u8303\u56f4\uff0c\u6240\u4ee5\u5f00 long long \u4f1a\u66f4\u4fdd\u9669\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nconst int mod = 1000000007;\nll a, b, ans;\nint main() {\n\tscanf(\"%lld%lld\", &a, &b);\n\tfor(ll i = a; i <= b; i++) {\n\t\tans += (i * (i * (i + 1) / 2) % mod) % mod;\n\t\tans %= mod;\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1644573844,
        "uid": 375241,
        "name": "SunSkydp",
        "ccfLevel": 5,
        "title": "AT1278 Counting on a Triangle \u9898\u89e3"
    },
    {
        "content": "## \u601d\u8def\r\n\r\n\u53ef\u4ee5\u5148\u627e\u4e00\u4e0b\u89c4\u5f8b\u3002\r\n\r\n\u7b2c\u4e00\u884c\u7684\u503c\u7684\u603b\u548c\u4e3a $ 1 \\times 1 = 1 $\u3002\r\n\r\n\u7b2c\u4e8c\u884c\u7684\u503c\u7684\u603b\u548c\u4e3a $ 2 \\times 1 + 2 \\times 2 = 2 \\times ( 1 + 2 ) = 6 $\u3002\r\n\r\n\u7b2c\u4e09\u884c\u7684\u503c\u7684\u603b\u548c\u4e3a $ 3 \\times 1 + 3 \\times 2 + 3 \\times 3 = 3 \\times ( 1 + 2 + 3 ) = 18 $\u3002\r\n\r\n\u901a\u8fc7\u8ba1\u7b97\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u7b2c $ n $ \u884c\u7684\u603b\u548c\u4e3a $ n \\times ( 1 + 2 + \\cdots + n ) = n \\times \\dfrac{n \\times ( n + 1 )}{2}$\u3002\r\n\r\n\u6309\u7167\u516c\u5f0f\u7d2f\u52a0\u6bcf\u884c\u7684\u548c\u5373\u53ef\u3002\r\n\r\n\u6ce8\u610f\u6bcf\u6b21\u4e58\u6cd5\u540e\u90fd\u9700\u8981\u53d6\u6a21\uff0c\u7d2f\u52a0\u540e\u4e5f\u8981\u53d6\u6a21\u3002\r\n\r\n## \u4ee3\u7801\r\n\r\n```cpp\r\n#include<iostream>\r\nusing namespace std;\r\n#define mod 1000000007\r\ntypedef long long ll;\r\nint main()\r\n{\r\n\tll n,m,sum=0;\r\n\tcin>>n>>m;\r\n\tfor(ll i=n;i<=m;++i)\r\n    {\r\n    \tsum+=(i*(i*(i+1)/2)%mod)%mod;\r\n    \tsum%=mod;\r\n\t}\r\n\tcout<<sum<<endl;\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1644557891,
        "uid": 304211,
        "name": "\u7cbe\u795e\u5c0f\u4f19\uff01",
        "ccfLevel": 4,
        "title": "AT1278 Counting on a Triangle"
    },
    {
        "content": "[\u539f\u9898\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/AT1278)\n\n## $\\texttt{Description}$\n\n\u5728\u4e00\u5e45\u56fe\u4e2d\uff0c\u7b2c $n$ \u884c\u6709 $n$ \u4e2a\u70b9\u3002\n\n\u6bcf\u4e2a\u70b9\u7684\u5750\u6807\u4e3a $(x,y)$\uff0c\u5219\u5176\u503c\u4e3a $x\\times y$\u3002\n\n\u7ed9\u5b9a $a$ \u548c $b$\uff0c\u6c42\u4ece\u7b2c $a$ \u884c\u81f3\u7b2c $b$ \u884c\uff0c\u6240\u6709\u6570\u7684\u503c\u5f97\u548c\u3002\u7ed3\u679c $\\mod1000000007$\u3002\n\n## $\\texttt{Solution}$\n\n\u89c2\u5bdf\u6570\u5217\uff1a\n\n$$(1,1)$$\n\n$$(2,1),(2,2)$$\n\n$$(3,1),(3,2),(3,3)$$\n\n$$(n,1),(n,2),(n,3),\\cdots,(n,n-1),(n,n)$$\n\n\u53d1\u73b0\u7b2c $n$ \u884c\u7684\u503c\u4e3a $n\\times(1+2+3+\\cdots+n)$\u3002\n\n\u89c2\u5bdf\u5f0f\u5b50\uff0c\u53d1\u73b0 $1+2+3+\\cdots+n=\\dfrac{n\\times(n+1)}{2}$\u3002\uff08\u7b49\u5dee\u6570\u5217\uff09\n\n\u6574\u7406\uff0c\u5f97 $n\\times \\dfrac{n\\times(n+1)}{2}$\u3002\n\n\u7531\u6b64\uff0c\u53ef\u5199\u51fa\u4ee3\u7801\u3002\n\n\u6ce8\u610f\uff1a\n\n- \u51e0\u4e4e\u5728\u6bcf\u5904\u4e58\u6cd5\u540e\u90fd\u9700\u8981\u53d6\u6a21\u3002\n\n- \u7d2f\u52a0\u7b54\u6848\u540e\uff0c\u8bb0\u5f97\u518d\u6b21\u53d6\u6a21\u3002\n\n## $\\texttt{Code}$\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define mod 1000000007\nusing namespace std;\nint main(){\n\tll n,m;\n\tscanf(\"%lld%lld\",&n,&m);\n\tll ans=0;\n\tfor(ll i=n;i<=m;i++){\n\t\tans+=(i*(i*(i+1)/2)%mod)%mod;\n\t\tans%=mod;\n\t}\n\tprintf(\"%lld\\n\",ans);\n    return 0;\n}\n```\n\u611f\u8c22\u89c2\u770b\u3002",
        "postTime": 1641614416,
        "uid": 307603,
        "name": "_cmh",
        "ccfLevel": 5,
        "title": "\u3010New\u9898\u89e3\u3011AT1278 Counting on a Triangle"
    },
    {
        "content": "\u6bd4\u8f83\u7b80\u5355\u7684\u6c34\u9898\uff0c\u4e0d\u8fc7mod\u51e0\u4e4e\u5728\u54ea\u513f\u90fd\u8981\u4f7f\u7528\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nlong long a,b,ans;\nint main()\n{\n\tcin>>a>>b;\n\tfor(long long s=a;s<=b;s++)\n\t{\n\t\tans+=(s*((s+1)*s/2)%1000000007)%1000000007;//\u6069\uff0c\u5341\u5206\u8270\u8f9b\u7684mod\n        ans%=1000000007;//\u8fd8\u9700\u4e00\u6b21mod\n\t}\n\tcout<<ans<<endl;\n}\n```",
        "postTime": 1535802559,
        "uid": 58543,
        "name": "RioBlu",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT1278 \u3010Counting on a Triangle\u3011"
    },
    {
        "content": "# \u601d\u8def\n\u5bb9\u6613\u770b\u51fa\u7b54\u6848\u4e3a $\\sum\\limits_{i=A}^B\\sum\\limits_{j=1}^i(i\\times j)$\n\n\u6211\u4eec\u518d\u628a\u5f0f\u5b50\u5316\u7b80\u4e00\u4e0b\u3002\n\n$$\\begin{aligned} \\sum\\limits_{i=A}^B\\sum\\limits_{j=1}^ii\\times j &=\\sum\\limits_{i=A}^B(i\\times \\sum\\limits_{j=1}^i)\\\\&=\\sum\\limits_{i=A}^B(i\\times \\dfrac{i\\times(i+1)}{2})\\\\&=\\sum\\limits_{i=A}^B\\dfrac{i\\times i\\times(i+1)}{2}\\end{aligned}$$\n\n\u6240\u4ee5\u6309\u516c\u5f0f\u8ba1\u7b97\u5373\u53ef\u3002\n# \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define mod 1000000007\nusing namespace std;\nint main(){\n    long long a,b,ans=0;\n    cin>>a>>b;\n    for(long long i=a;i<=b;i++)\n        ans=(ans+(i*i*(i+1)/2)%mod)%mod;\n    cout<<ans<<endl;\n}\n```",
        "postTime": 1644810204,
        "uid": 357900,
        "name": "\u731c\u4e00\u731c\u6211\u662f\u8c01",
        "ccfLevel": 4,
        "title": "AT1278\u9898\u89e3"
    }
]
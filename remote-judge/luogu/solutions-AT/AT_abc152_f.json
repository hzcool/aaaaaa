[
    {
        "content": "\u600e\u4e48\u6ca1\u4eba\u505a\u8fd9\u9898...\n\n\u5f88\u5178\u578b\u7684\u5bb9\u65a5\uff0c\u4ee4 $f(S)$ \u8868\u793a $S$ \u4e2d\u6240\u6709\u8def\u5f84\u4e0a\u7684\u6240\u6709\u8fb9\u5747\u4e3a\u767d\u8272\u7684\u65b9\u6848\u6570\uff0c\u4ee4\u8f93\u5165\u7684\u8def\u5f84\u96c6\u5408\u4e3a $P$\uff0c\u90a3\u4e48\uff1a\n\n$$Ans=\\sum\\limits_{S\\in P} (-1)^{|S|}f(S)$$\n\n\u7136\u540e\u679a\u4e3e\u5b50\u96c6\uff0c\u8ba1\u7b97 $f(S)$ \u5373\u53ef\uff0c\u8bbe $S$ \u4e2d\u6240\u6709\u8def\u5f84\u7684\u5e76\u6240\u5360\u8fb9\u6570\u4e3a $x$\uff0c\u5219 $f(S)=2^{n-1-x}$\uff0c\u5373\u9664\u4e86\u8fd9 $x$ \u6761\u8fb9\u4ee5\u5916\u90fd\u662f\u4efb\u610f\u67d3\u8272\u7684\u3002\n\n\u4e8e\u662f\u8ba1\u7b97\u8def\u5f84\u5e76\u7684\u8fb9\u6570 $x$ \u5373\u53ef\uff0c\u6bcf\u4e2a\u5b50\u96c6\u90fd\u66b4\u529b\u505a\u592a\u6162\u4e86\uff0c\u603b\u590d\u6742\u5ea6\u662f $O(2^m\\times nm)$\uff0c\u53ef\u4ee5\u91c7\u7528\u9012\u63a8\u7684\u601d\u60f3\uff0c\u8003\u8651\u4e00\u4e2a $p\\in S$\uff0c$S$ \u7684 $x$ \u503c\u53ef\u4ee5\u7531 $S/\\{p\\}$ \u7684 $x$ \u503c\u5e76\u4e0a $p$ \u7684\u8fb9\u5f97\u5230\uff0c\u8fd9\u6837\u53ef\u4ee5 $O(2^m\\times n)$\u3002\n\n\u6700\u540e\uff0c\u8fd8\u53ef\u4ee5\u518d\u7528 bitset \u4f18\u5316\u4e00\u4e0b\u5e38\u6570\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int MAXN=60;\nint n,m,x,y,eg,u[MAXN],v[MAXN],hd[MAXN],ver[2*MAXN],nx[2*MAXN],f[MAXN];\nbitset <51> q[21],t[1<<20];\nll ans;\nll qpow (ll a,ll b) {\n\tll res=1;\n\twhile (b) {\n\t\tif (b&1) {res*=a;}\n\t\ta*=a,b>>=1;\n\t}\n\treturn res;\n}\nvoid add_edge (int x,int y) {\n\tver[++eg]=y;\n\tnx[eg]=hd[x];\n\thd[x]=eg;\n\treturn;\n}\nvoid dfs (int x,int fa) {\n\tf[x]=fa;\n\tfor (int i=hd[x];i;i=nx[i]) {\n\t\tif (ver[i]==fa) {continue;}\n\t\tdfs(ver[i],x);\n\t}\n\treturn;\n}\nvoid mk (int x,int y,int p) {\n\tfor (int i=x;i!=1;i=f[i]) {q[p].set(i,1);}\n\tint cur=y;\n\tfor (;cur!=1&&!q[p][cur];cur=f[cur]) {q[p].set(cur,1);}\n\tfor (;cur!=1;cur=f[cur]) {q[p].set(cur,0);}\n\treturn;\n}\nint main () {\n\teg=1;\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n-1;i++) {\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tadd_edge(x,y),add_edge(y,x);\n\t}\n\tdfs(1,0);\n\tscanf(\"%d\",&m);\n\tfor (int i=1;i<=m;i++) {\n\t\tscanf(\"%d%d\",&u[i],&v[i]);\n\t\tmk(u[i],v[i],i);\n\t}\n\tfor (int i=0;i<(1<<m);i++) {\n\t\tint cnt=0,cur=0;\n\t\tfor (int j=0;j<m;j++) {\n\t\t\tif (i&(1<<j)) {cnt++,cur=j+1;}\n\t\t}\n\t\tif (cnt) {t[i]=t[i^(1<<(cur-1))]|q[cur];}\n\t\tif (cnt&1) {\n\t\t\tans-=qpow(2,n-1-t[i].count());\n\t\t} else {\n\t\t\tans+=qpow(2,n-1-t[i].count());\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1581513458,
        "uid": 113546,
        "name": "ix35",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 AT4832 \u3010[ABC152F] Tree and Constraints\u3011"
    },
    {
        "content": "\u4e3a\u5565\u9898\u89e3\u533a\u90fd\u662f\u5bb9\u65a5\u554aqwq\n\n\u770b\u5230 $m\\le20$\uff0c\u8003\u8651\u76f4\u63a5\u72b6\u538b\u3002\n\n\u9884\u5904\u7406\u4e00\u4e2a\u72b6\u6001\u6570\u7ec4 $sta$ \u8868\u793a\u5bf9\u4e8e\u4e00\u6761\u8fb9\uff0c\u5c06\u5176\u67d3\u4e3a\u9ed1\u8272\u80fd\u6ee1\u8db3\u6761\u4ef6\u7684\u9650\u5236\u72b6\u6001\u3002\u5bf9\u4e8e\u7b2c $i$ \u4e2a\u9650\u5236 $(u,v)$\uff0c\u6211\u4eec\u76f4\u63a5\u628a\u8def\u5f84\u4e0a\u6240\u6709\u8fb9\u62c9\u51fa\u6765\uff0c\u5e76\u628a $i$ \u5e76\u7ed9\u8fd9\u4e9b\u8fb9\u7684\u72b6\u6001\u3002\n\n\u7136\u540e\u4f60\u53d1\u73b0\u8fd9\u4e2a\u95ee\u9898\u5df2\u7ecf\u548c\u6811\u7684\u5f62\u6001\u65e0\u5173\u4e86\uff0c\u76f4\u63a5\u8bbe $f_s$ \u8868\u793a\u5904\u7406\u5230\u5f53\u524d\u8fb9\uff0c\u5df2\u7ecf\u6ee1\u8db3\u7684\u9650\u5236\u72b6\u6001\u4e3a $s$ \u7684\u65b9\u6848\u6570\u3002\u5bf9\u4e8e\u5f53\u524d\u8fb9 $i$ \u800c\u8a00\uff0c\u8f6c\u79fb\u5c31\u662f\uff1a\n\n$f_{s \\space \\cup \\space sta_i} = f_{s \\space \\cup \\space sta_i}+ f_s$\n\n\u76f4\u63a5\u8f6c\u79fb\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\times 2^m)$\u3002\n\n```cpp\ninline void dfs3(int u){\n    for(int i=head[u];i;i=e[i].nxt){\n        int v=e[i].to;\n        if(v==fa[u]) continue;\n        dfs3(v);\n        for(int j=(1<<m)-1;~j;j--)\n            f[sta[v]|j]+=f[j];\n    }\n}\nint main(){\n    n=read();\n    for(int i=1;i<n;i++){\n        int u=read(),v=read();\n        add(u,v); add(v,u);\n    }\n    dfs1(1); dfs2(1,1);\n    m=read();\n    for(int i=1;i<=m;i++){\n        int u=read(),v=read(),g=lca(u,v);\n        while(u!=g) sta[u]|=1<<i-1,u=fa[u];\n        while(v!=g) sta[v]|=1<<i-1,v=fa[v];\n    }\n    f[0]=1; dfs3(1); printf(\"%lld\\n\",f[(1<<m)-1]);\n    return 0;\n}\n```\n",
        "postTime": 1670636116,
        "uid": 236862,
        "name": "DitaMirika",
        "ccfLevel": 7,
        "title": "ABC152F"
    },
    {
        "content": "# ABC-F - Tree and Constraints\n\n## Description\n\n\u5bf9\u4e8e\u4e00\u68f5 $n$ \u4e2a\u8282\u70b9\u7684\u6811\uff0c\u6bcf\u4e2a\u8fb9\u67d3\u6210\u9ed1\u8272\u6216\u767d\u8272\u3002\u7ed9\u51fa $m$ \u6761\u9650\u5236\uff1b\u6bcf\u4e2a\u9650\u5236 $(u,v)$ \u8981\u6c42\u4ece $u$ \u5230 $v$ \u7684\u8def\u5f84\u81f3\u5c11\u6709\u4e00\u6761\u9ed1\u8fb9\uff0c\u6c42\u540c\u65f6\u6ee1\u8db3\u6240\u6709\u9650\u5236\u7684\u67d3\u8272\u603b\u65b9\u6848\u6570\u3002\n\n## Solution\n\n\u8bbe\u7b2c $i$ \u4e2a\u9650\u5236\u4e3a $A_i$\uff0c\u5219\u7b54\u6848\u4e3a\uff1a\n$$\n\\Big|\\bigcap_{i=1}^nA_i\\Big|\n$$\n\u8fd9\u5e76\u4e0d\u597d\u6c42\uff0c\u4f46\u90fd\u80fd\u8f6c\u5316\u5230\u8fd9\u4e2a\u5f62\u5f0f\u4e86\uff0c\u4e30\u5bcc\u7684\u7ecf\u9a8c\u544a\u8bc9\u6211\u4eec\u8fd9\u662f\u4e00\u9053\u5bb9\u65a5\u9898\u3002\n\n\u8f6c\u5316\uff1a\n$$\nU-\\Big|\\bigcup_{i=1}^n \\overline{A_i}\\Big|\n$$\n\u540e\u534a\u6bb5\u5f0f\u5b50\u6839\u636e\u5bb9\u65a5\u516c\u5f0f\u8f6c\u5316\u4e3a\uff1a\n$$\n\\Big|\\bigcup_{i=1}^n \\overline{A_i}\\Big|=\\sum\\limits_{T\\subset U}(-1)^{|T|+1}\\Big|\\bigcap_{j=1}^{|T|}\\overline{A_{T_j}}\\Big|\n$$\n\u4e3a\u4e86\u4f7f\u95ee\u9898\u66f4\u76f4\u89c2\uff0c\u5c06\u9650\u5236\u6761\u4ef6\u72b6\u6001\u538b\u7f29\uff0c\u82e5\u7b2c $i$ \u4e2a\u4e0d\u6ee1\u8db3\uff0c\u5219 $S_i=1$\uff0c\u5426\u5219\u4e3a $0$\u3002\n\n\u8bbe $f(S)$ \u4e3a\u72b6\u6001 $S$ \u7684\u65b9\u6848\u6570\uff0c\u5219\uff1a\n$$\n\\Big|\\bigcup_{i=1}^n \\overline{A_i}\\Big|=\\sum\\limits_{T\\subset U}(-1)^{|T|+1}f(T)\n$$\n\u4e8e\u662f\u6211\u4eec\u6c42\u51fa\u6240\u6709 $f(S)$ \u7684\u503c\u5957\u5165\u8fd9\u4e2a\u516c\u5f0f\u5373\u53ef\u3002\n\n\u73b0\u5728\u601d\u8003\u5982\u4f55\u6c42\u6bcf\u4e2a $f(S)$\u3002\n\n\u53d1\u73b0 $f(S)$ \u4ee3\u8868\u5c5e\u4e8e $S$ \u7684\u9650\u5236\u6761\u4ef6\u7684\u8def\u5f84\u4e0a\uff0c\u8fb9\u7684\u989c\u8272\u5168\u4e3a\u767d\u8272\uff0c\u5176\u5b83\u8fb9\u653e\u98de\u81ea\u6211\u7684\u65b9\u6848\u6570\u3002\n\n\u5219\u6211\u4eec\u53ea\u9700\u8981\u76f4\u5230\u591a\u5c11\u8fb9\u5fc5\u987b\u662f\u767d\u8272\u5373\u53ef\uff0c\u8fd9\u76f8\u5f53\u4e8e\u6c42\u51fa\u8fd9\u4e9b\u8def\u5f84\u7684\u5e76\u96c6\u6709\u591a\u5c11\u8fb9\u3002\n\n\u53d1\u73b0 $N\\le50$\uff0c\u6240\u4ee5\u6240\u6709\u7684\u8fb9\u6211\u4eec\u540c\u6837\u53ef\u4ee5\u72b6\u538b\u8d77\u6765\u3002\n\n\u8bbe $path_x$ \u8868\u793a\u4ece\u6839\u8282\u70b9\u5230 $x$ \u7ecf\u8fc7\u7684\u8fb9\u7684\u72b6\u538b\u6570\u503c\uff1b\n\n\u8bbe $info_{x,y}$ \u8868\u793a $x$ \u548c $y$ \u7684\u8def\u5f84\u4e0a\u7684\u8fb9\u7684\u72b6\u538b\u6570\u503c\u3002\n\n\u5219\u6839\u636e\u7ecf\u5178\u7684\u6811\u4e0a\u5f02\u6216\u6027\u8d28\uff1a $info_{x,y}=path_x \\oplus path_y$\u3002\n\n\u6c42\u51fa $S$ \u7684\u6240\u6709\u9650\u5236\u6761\u4ef6\u7684 $info$ \u7684\u5e76\u96c6\uff0c\u5373\u4e3a $S$ \u5df2\u7ecf\u786e\u5b9a\u7684\u767d\u8fb9\u4e2a\u6570\uff1b\n\n\u8bbe\u8fd9\u4e2a\u6570\u4e3a $cnt$\uff0c\u5219 $f(S)=2^{n-1-cnt}$\u3002\n\n\u6700\u7ec8\u7b54\u6848\u4e3a $2^{n-1}-\\sum\\limits_{S=1}^{2^m-1} f(S)$\u3002\n\n**\u6ce8\u610f\u7ec6\u8282\uff01\uff01\uff01**\n\n- 64\u4f4d\u4f7f\u7528 `__builtin_popcountll`\u3002\n- \u679a\u4e3e\u72b6\u538b\u65f6\uff0c$S\\in[1,2^m-1]$\uff0c\u4e4b\u6240\u4ee5\u4e0d\u4ece $0$ \u5f00\u59cb\uff0c\u662f\u56e0\u4e3a $0$ \u7684\u72b6\u6001\u662f\u5168\u96c6\uff0c\u800c\u6211\u4eec\u679a\u4e3e\u65f6\u8981\u7b97\u7684\u662f\u975e\u6cd5\u7b54\u6848\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,n) for(int i=a;i<=n;++i)\n#define int long long\nusing namespace std;\nconst int N = 51,M = 21;\nint n,m,path[N],info[M];\nstruct EDGE{int to,nxt;}e[N<<1];\nint h[N],qcnt;\nvoid adedge(int x,int y){e[++qcnt] = (EDGE){y,h[x]},h[x]=qcnt;}\nvoid dfs(int x,int fa)\n{\n\tfor(int i=h[x];i;i=e[i].nxt)\n\t{\n\t\tint v = e[i].to;\n\t\tif(v==fa) continue;\n\t\tpath[v] = path[x] | (1ll<<v);\n\t\tdfs(v,x);\n\t}\n}\n// 64 \u4f4d\u4f7f\u7528 __builtin_popcountll() !!! \nint f(int S)\n{\n\tint edge=0ll,num = __builtin_popcountll(S);\n\trep(i,0,m-1) if(S&(1ll<<i)) \n\t    edge |= info[i+1];\n\treturn (1ll<<(n - 1 - __builtin_popcountll(edge)))*(num&1 ? 1ll : -1ll);\n} \nsigned main()\n{\n\tios::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n\tcin>>n;\n\trep(i,1,n-1) {\n\t\tint x,y; cin>>x>>y;\n\t\tadedge(x,y),adedge(y,x);\n\t}\n\tdfs(1,0);\n\tcin>>m;\n\tint U = (1ll<<m)-1;\n\trep(i,1,m) \n\t{\n\t\tint x,y; cin>>x>>y;\n\t\tinfo[i] = path[x]^path[y];\n\t}\n\tint ans=0ll;\n\trep(S,1,U) // S = 0 \u7684\u60c5\u51b5\u5c31\u662f\u5168\u96c6\u672c\u8eab \n\t{\n\t\tans += f(S);\n\t}\n\tint uans = (1ll<<(n-1));\n\tcout<<uans-ans;\n\treturn 0;\n}\n```",
        "postTime": 1667993128,
        "uid": 566396,
        "name": "Magic_World",
        "ccfLevel": 0,
        "title": "ABC-F - Tree and Constraints"
    },
    {
        "content": "# ABC 152 F\n\n\u5bb9\u65a5\u7ecf\u5178\u9898\u3002[\u9898\u76ee\u94fe\u63a5](https://atcoder.jp/contests/abc152/tasks/abc152_f)\u3002\n\n## \u9898\u76ee\u53d9\u8ff0\n\n\u7ed9\u4f60\u4e00\u9897\u6811\uff0c\u4f60\u8981\u7ed9\u6811\u9ed1\u767d\u67d3\u8272\uff0c\u5e76\u7ed9\u4f60$m$\u4e2a\u9650\u5236\uff0c\u6bcf\u4e2a\u9650\u5236\u7ed9\u4e00\u6761\u8def\u5f84$(u,v)$\uff0c\u9650\u5236\u662f\u8fd9\u6761\u8def\u5f84\u4e0a\u81f3\u5c11\u6709\u4e00\u4e2a\u9ed1\u8272\u8fb9\uff0c\u95ee\u6709\u591a\u5c11\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u67d3\u8272\u65b9\u6cd5\u3002\n\n## \u9898\u89e3\n\n+ \u8003\u8651\u5bb9\u65a5\u3002\u8003\u8651\u8ba1\u7b97$f(s)$\u4e3a$s$\uff08\u4e00\u4e2a\u9009\u4e0d\u9009\u67d0\u4e2a\u9650\u5236\u7684\u72b6\u538b\uff09\u6ee1\u8db3\u8fd9\u4e2a\u96c6\u5408\u91cc\u7684\u6240\u6709\u9650\u5236\u90fd\u4e0d\u6ee1\u8db3\u7684\u67d3\u8272\u65b9\u6cd5\u6570\u3002\n+ \u7136\u540e\u5bb9\u65a5\u5373\u53ef\u3002$\\text{\u6240\u6709\u4e0d\u6ee1\u8db3\u7684}=-\\sum_{i=1}^{2^n-1}(-1)^{|s|}f(i)$\u3002\u90a3\u4e48\u53ea\u9700\u8981\u8ba1\u7b97\u4e0d\u6ee1\u8db3\u67d0\u4e9b\u9650\u5236\u7684\u4e00\u5171\u6709\u591a\u5c11\u79cd\u5373\u53ef\u3002\n+ \u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0d\u88ab\u8fd9\u4e9b\u4e0d\u6ee1\u8db3\u7684\u8def\u5f84\u8986\u76d6\u7684\u8fb9\u53ef\u4ee5\u4efb\u610f\u9009\uff0c\u5176\u4ed6\u7684\u8fb9\u5fc5\u987b\u4e3a\u767d\u8272\u3002\n+ \u5982\u4f55\u8ba1\u7b97\u67d0\u4e9b\u8def\u5f84\u7684\u5e76\uff1f\u53ef\u4ee5\u901a\u8fc7\u72b6\u538b$dp$\u641e\uff0c\u7528$\\operatorname{lowbit}$\u8f6c\u79fb\u3002\n\n## \u77e5\u8bc6\u70b9\n\n+ \u6b63\u96be\u5219\u53cd\uff08\u6682\u65f6\u6ca1\u627e\u5230\u5bb9\u65a5\u9898\u7684\u7c7b\u578b\u7279\u5f81\uff1f\u8ba1\u6570\u9898\u5c31\u5148\u60f3\u60f3\u5bb9\u65a5\u5427\n+ \u5bb9\u65a5\n\n## \u4ee3\u7801\n\n\u6ce8\u610f\uff1a\n\n+ \u6ce8\u610f`1ll<<a`\uff01\u6709\u4e9b\u5730\u65b9\u4e0d\u80fd\u5199`1<<a`\uff01\n+ \u6b38\uff0c\u6ce8\u610f`count`\uff08\u6570\u4f4d`1`\u7684\u4f4d\u6570\uff09\u7684\u51fd\u6570\u8981\u5199\u4e00\u4e2a\u5bf9\u4e8e`long long`\u7684\u548c\u4e00\u4e2a\u5bf9\u4e8e`int`\u7684\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\nusing namespace std;\ntypedef long long ll;\nconst int maxNode = 55, maxLim = 25;\ntemplate<const int nbNode, const int nbEdge> struct Graph {\n\tint tot, head[nbNode], to[nbEdge << 1], next[nbEdge << 1];\n\tGraph() { memset(head, -1, sizeof(head)); }\n\tvoid AddEdge(int u, int v) {\n\t\tto[++tot] = v;\n\t\tnext[tot] = head[u];\n\t\thead[u] = tot;\n\t}\n};\nGraph<maxNode, maxNode> Tree;\nint nbNode, limNum, fa[maxNode], dep[maxNode];\nll setCover[1 << 20];\nvoid dfs(int now, int from) {\n\tdep[now] = dep[from] + 1;\n\tfa[now] = from;\n\tfor (int pt = Tree.head[now]; ~pt; pt = Tree.next[pt])\n\t\tif (Tree.to[pt] != from)\n\t\t\tdfs(Tree.to[pt], now);\n}\nint count1_(int num) {\n\tint ret = 0;\n\tfor (int wei = 0; wei < limNum; ++wei)\n\t\tif ((1 << wei) & num)\n\t\t\t++ret;\n\treturn ret;\n}\nint count2_(ll num) {\n\tint ret = 0;\n\tfor (int wei = 0; wei < nbNode - 1; ++wei)\n\t\tif ((1ll << wei) & num)\n\t\t\t++ret;\n\treturn ret;\n}\nsigned main() {\n\tscanf(\"%d\", &nbNode);\n\tfor (int i = 1; i < nbNode; ++i) {\n\t\tint uNode, vNode;\n\t\tscanf(\"%d%d\", &uNode, &vNode);\n\t\tTree.AddEdge(uNode, vNode);\n\t\tTree.AddEdge(vNode, uNode);\n\t}\n\tscanf(\"%d\", &limNum);\n\tdfs(1, 0);\n\tfor (int i = 1; i <= limNum; ++i) {\n\t\tint uNode, vNode;\n\t\tscanf(\"%d%d\", &uNode, &vNode);\n\t\tif (dep[uNode] < dep[vNode])\n\t\t\tswap(uNode, vNode);\n\t\twhile (dep[uNode] > dep[vNode]) {\n\t\t\tsetCover[1 << (i - 1)] |= 1ll << (uNode - 2);\n\t\t\tuNode = fa[uNode];\n\t\t}\n\t\twhile (uNode != vNode) {\n\t\t\tsetCover[1 << (i - 1)] |= 1ll << (uNode - 2);\n\t\t\tsetCover[1 << (i - 1)] |= 1ll << (vNode - 2);\n\t\t\tuNode = fa[uNode];\n\t\t\tvNode = fa[vNode];\n\t\t}\n\t}\n\t//\u8fb9\u7684\u7f16\u53f7\uff0c\u5b9a\u4e49\u4e3a\u8fd9\u4e2a\u8fb9\u6df1\u5ea6\u8f83\u4f4e\u7684\u70b9\u7684\u7f16\u53f7 - 2 \n\tsetCover[0] = 0;\n\tfor (int state = 1; state < (1 << limNum); ++state) {\n\t\tint last = state & (-state);\n\t\tif (last == state) continue ;\n\t\tsetCover[state] = setCover[state ^ last] | setCover[last];\n\t}\n\tll ans = 0;\n\tfor (int state = 1; state < (1 << limNum); ++state) {\n\t\tint notCover = nbNode - count2_(setCover[state]) - 1;\n\t\tll fu = ((count1_(state)) & 1) ? 1 : -1;\n\t\tans += fu * (1ll << notCover);\n\t}\n\tprintf(\"%lld\\n\", (1ll << (nbNode - 1)) - ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1581947486,
        "uid": 75715,
        "name": "KokiNiwa",
        "ccfLevel": 0,
        "title": "ABC 152 F\uff08\u5bb9\u65a5\uff0c\u4e8c\u8fdb\u5236\uff0c\u8ba1\u6570\uff0c\u601d\u7ef4\uff0c\u6b63\u96be\u5219\u53cd\uff09"
    },
    {
        "content": "\u8003\u8651\u5bb9\u65a5\uff1a\u5047\u8bbe $f(i)$ \u662f\u4e0d\u7b26\u5408\u81f3\u5c11i\u6761\u89c4\u5b9a\u7684\u65b9\u6848\u6570\uff1b\u4ece\u5bb9\u65a5\u539f\u7406\u53ef\u4ee5\u63a8\u5230\u7b54\u6848\u5f0f\u5b50\uff1a\n$$\\sum^m_{i=0}(-1)^if(i)$$\n\u5e94\u4e3a\u4e0d\u77e5\u9053 $f(i)$ \u7684\u4e00\u4e2a\u5177\u4f53\u5f0f\u5b50\uff0c\u7528\u4e00\u4e2a\u96c6\u5408$S\\subseteq[1,n]$\u8868\u793a\u4e0d\u7b26\u5408\u4ec0\u4e48\u6761\u4ef6\uff1a\u5982\u679c\u7b2c $i$ \u4f4d\u662f1\uff0c\u90a3\u4e48\u80af\u5b9a\u4e0d\u7b26\u5408\u7b2c $i$ \u6761\u4ef6\u3002  \n\u53d1\u73b0\u5982\u679c\u5fc5\u987b\u4e0d\u7b26\u5408\u4e00\u4e2a\u6761\u4ef6 $(u,v)$ \u7684\u8bdd\uff0c\u7b49\u4ef7\u4e8e\u628a $u$ \u548c $v$ \u7684\u8def\u5f84\u4e0a\u8fb9\u5168\u67d3\u767d\u8272\uff0c\u6ca1\u6709\u7136\u7684\u8fb9\u53ef\u4ee5\u4efb\u610f\u67d3\u8272\u3002\u6240\u4ee5\uff0c\u5982\u679c\u4e00\u4e2a\u96c6\u5408\u8ba9 $i$ \u4e2a\u8fb9\u5fc5\u67d3\u767d\u8272\uff0c\u90a3\u4e48\u8fd9\u4e2a\u96c6\u5408\u7684\u67d3\u8272\u65b9\u6848\u6570\u4e3a $2^{n-1-i}$.  \n\u6765\u4f18\u5316\uff0c\u53ef\u4ee5\u628a\u6bcf\u4e00\u4e2a\u6761\u4ef6\u8868\u793a\u4e3a\u4e00\u4e2a\u96c6\u5408\uff0c\u5982\u679c\u4e0d\u7b26\u5408\u6761\u4ef6 $j$ \u7684\u65f6\u5019\u7b2c $i$ \u8fb9\u5fc5\u67d3\u767d\u8272\uff0c\u90a3\u4e48 $i$ \u5c31\u5728 $T_j$ \u96c6\u5408\u91cc\u3002  \n\u4e00\u4e2a\u96c6\u5408 $S$ \u7684\u53ef\u4ee5\u4efb\u610f\u67d3\u8fb9\u4e3a \n\n$$n-1-|\\bigcup_{j\\in S} T_j|$$\n\n\u6240\u4ee5\uff0c\u7b54\u6848\u4e3a\n\n$$\\sum_{s\\in \\mathbb{P}([1,n])}[(-1)^{|s|}2^{n-1-|\\bigcup_{j\\in S} T_j|}]$$\n\n\u91c7\u7528\u4e8c\u8fdb\u5236\u6570\u8868\u8fbe\u96c6\u5408\u4f1a\u5927\u5927\u63d0\u5347\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4\u3002\n\n**\u5fc5\u987b\u5f00LL**\n\n```cpp\n// writer: w33z8kqrqk8zzzx33\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define iter(i, a, b) for(int i=(a); i<(b); i++)\n#define rep(i, a) iter(i, 0, a)\n#define rep1(i, a) iter(i, 1, (a)+1)\n#define log(a) cerr<<\"\\033[32m[DEBUG] \"<<#a<<'='<<(a)<<\" @ line \"<<__LINE__<<\"\\033[0m\"<<endl\n#define all(a) a.begin(), a.end()\n#define fi first\n#define se second\n#define pb push_back\n#define mp make_pair\n\nusing ll=long long;\nusing pii=pair<int, int>;\n#define int ll\nconst int MOD = 1000000007;\n\nvector<int> elist[55];\nint fa[55][8], dep[55];\n\nvoid dfs(int node, int par) {\n\tint v = 0;\n\tfa[node][v] = par;\n\twhile(fa[node][v] != -1) {\n\t\tfa[node][v+1] = fa[fa[node][v]][v];\n\t\tv++;\n\t}\n\twhile(v != 8) fa[node][v++] = -1;\n\tif(par == -1) dep[node] = 0;\n\telse dep[node] = dep[par]+1;\n\tfor(int i:elist[node]) if(i != par) dfs(i, node);\n}\n\nint lca(int a, int b) {\n\tif(dep[a] < dep[b]) swap(a, b);\n\tfor(int i=7; i>=0; i--)\n\t\tif(fa[a][i] != -1 && dep[a] - (1<<i) >= dep[b]) a = fa[a][i];\n\tfor(int i=7; i>=0; i--)\n\t\tif(fa[a][i] != -1 && fa[b][i] != -1 && fa[a][i] != fa[b][i]) {\n\t\t\ta = fa[a][i];\n\t\t\tb = fa[b][i];\n\t\t}\n\tif(a != b) return fa[a][0];\n\treturn a;\n}\n\nuint64_t mask[25];\n\nsigned main() {\n\tios_base::sync_with_stdio(false); cin.tie(0);\n\tint n; cin >> n;\n\trep(i, n-1) {\n\t\tint u, v; cin >> u >> v;\n\t\telist[u].pb(v);\n\t\telist[v].pb(u);\n\t}\n\tdfs(1, -1);\n\tint m; cin >> m;\n\trep(i, m) {\n\t\tint a, b; cin >> a >> b;\n\t\tint lc = lca(a, b);\n\t\twhile(b != lc) {\n\t\t\tmask[i] |= (1ull<<b);\n\t\t\tb = fa[b][0];\n\t\t}\n\t\twhile(a != lc) {\n\t\t\tmask[i] |= (1ull<<a);\n\t\t\ta = fa[a][0];\n\t\t}\n\t}\n\tuint64_t ans = 0;\n\trep(bm, 1ull<<m) {\n\t\tuint64_t tree = 0;\n\t\tint cnt = 0, free = 0;\n\t\trep(i, m) {\n\t\t\tif(bm & (1ull<<i)) {\n\t\t\t\ttree |= mask[i];\n\t\t\t\tcnt++;\n\t\t\t}\n\t\t}\n\t\titer(i, 2, n+1) if(!(tree & (1ull<<i))) free++;\n\t\tif(cnt%2) ans -= (1ull<<free);\n\t\telse ans += (1ull<<free);\n\t}\n\tcout << ans << endl;\n}\n```",
        "postTime": 1581834507,
        "uid": 220037,
        "name": "w33z8kqrqk8zzzx33",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT4832"
    },
    {
        "content": "\u6b63\u96be\u5219\u53cd\uff0c\u6211\u4eec\u8003\u8651\u5bb9\u65a5\u539f\u7406\u3002\n\n\u8bbe\u6240\u6709\u7ed9\u5b9a\u8981\u6c42\u7684\u8def\u5f84\u96c6\u5408\u4e3a $P$\uff0c\u6700\u540e\u7684\u7b54\u6848\u5373\u4e3a $P$ \u4e2d\u6240\u6709\u8def\u5f84\u968f\u4fbf\u67d3\u7684\u60c5\u51b5\u51cf\u53bb\u6240\u6709\u8fb9\u7eaf\u767d\u7684\u60c5\u51b5\u3002\n\n\u5b9a\u4e49 $f(S)$ \u4e3a\u8def\u5f84\u96c6\u5408 $S$ \u67d3\u6210\u7eaf\u767d\u7684\u65b9\u6848\u6570\uff0c\u8bbe $E \\in P$ \u4e14 $|E| = 1$\uff0c\u5f53 $S = \\varnothing$ \u65f6\uff0c\u5c31\u662f\u6240\u6709\u70b9\u968f\u4fbf\u9009\u7684\u60c5\u51b5\u3002\u90a3\u4e48\n\n$ans = f(\\varnothing) - f(E_1) - f(E_2) - f(E_3) - ... + f(E_1 \\cap E_2) + f(E_2 \\cap E_3) - f(E_1 \\cap E_2 \\cap E_3) - ...$\n\n\u6574\u7406\u4e00\u4e0b\uff0c\u5f97\u5230\n\n$$ans = \\sum_{S \\in P}(-1)^{|S|}f(S)$$\n\n\u62d3\u5c55\u5230\u6bcf\u4e00\u7ec4\u9650\u5236\uff0c\u90a3\u4e48\u5f53\u9650\u5236\u7684\u4e2a\u6570\u4e3a\u5076\u6570\u7684\u65f6\u5019\u52a0\uff0c\u5f53\u9650\u5236\u4e2a\u6570\u4e3a\u5947\u6570\u7684\u65f6\u5019\u51cf\u3002\n\n\u5982\u4f55\u6c42 $f(S)$ \u5462\uff1f\u8003\u8651\u5df2\u7ecf\u786e\u5b9a\u6709 $|S|$ \u6761\u8fb9\u4e00\u5b9a\u8981\u67d3\u6210\u767d\u8272\uff0c\u5176\u4f59\u8fb9\u4efb\u9009\u67d3\u6210\u9ed1\uff0c\u767d\u4e24\u79cd\u60c5\u51b5\uff0c\u90a3\u4e48 $f(S) = 2^{n - 1 - |S|}$\u3002\n\n\u7528 bitset \u7ef4\u62a4\u4e00\u4e0b\u8fb9\u96c6\uff0c\u679a\u4e3e\u4e00\u4e0b\u6240\u6709\u7684 $2^m$ \u4e2d\u60c5\u51b5\u5373\u53ef\u3002\n\n```\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<bitset>\n#define rep(a, b, c) for(int (a) = (b); (a) <= (c); ++ (a))\n#define per(a, b, c) for(int (a) = (b); (a) >= (c); -- (a))\n#define Rep(a, b, c) for(int (a) = (b); (a) < (c); ++ (a))\n#define Per(a, b, c) for(int (a) = (b); (a) > (c); -- (a))\n#define il inline\n#define inf 0x3f3f3f3f\nusing namespace std;\n\nil int read() {\n   int x = 0, f = 1; char ch = getchar();\n   while(ch < '0' || ch > '9') {if(ch == '-') f = -1; ch = getchar();}\n   while(ch >= '0' && ch <= '9') x = (x << 1) + (x << 3) + (ch ^ 48),  ch = getchar();\n   return x * f;\n}\n\ntypedef long long LL;\nconst int N = 55;\n\nint n, m;\nint hd[N], to[N << 1], nt[N << 1], idx;\nint fa[N][7], dep[N];\nint q[N];\nLL ans;\nbitset<51> bits[N], t[1 << N];\n\nil void add(int u, int v) {\n\tto[ ++ idx] = v, nt[idx] = hd[u], hd[u] = idx;\n}\n\nil void bfs(int root) {\n\tmemset(dep, inf, sizeof dep);\n\tdep[0] = 0, dep[root] = 1;\n\tfa[root][0] = 0;\n\tint hh = 0, tt = 0;\n\tq[tt ++ ] = root;\n\twhile(hh != tt) {\n\t\tint u = q[hh ++ ];\n\t\tfor(int i = hd[u]; i; i = nt[i]) {\n\t\t\tint v = to[i];\n\t\t\tif(dep[v] > dep[u] + 1) {\n\t\t\t\tdep[v] = dep[u] + 1;\n\t\t\t\tfa[v][0] = u;\n\t\t\t\tq[tt ++ ] = v;\n\t\t\t\trep(j, 1, 6) fa[v][j] = fa[fa[v][j - 1]][j - 1];\n\t\t\t}\n\t\t}\n\t}\n}\n\nint lca(int a, int b) {\n\tif(dep[a] < dep[b]) swap(a, b);\n\tper(k, 6, 0) {\n\t\tif(dep[fa[a][k]] >= dep[b]) a = fa[a][k];\n\t} \n\tif(a == b) return a;\n\tper(k, 6, 0) {\n\t\tif(fa[a][k] != fa[b][k]) a = fa[a][k], b = fa[b][k];\n\t}\n\treturn fa[a][0];\n}\n\nLL qpow(LL a, int b) {\n\tLL res = 1;\n\tfor( ; b; b >>= 1) {\n\t\tif(b & 1) res = (LL)res * a;\n\t\ta *= a;\n\t}\n\treturn res;\n}\n\nint main() {\n\tn = read();\n\trep(i, 1, n - 1) {\n\t\tint u = read(), v = read();\n\t\tadd(u, v), add(v, u);\n\t}\n\tbfs(1);\n\tm = read();\n\trep(i, 1, m) {\n\t\tint u = read(), v = read();\n\t\tint LCA = lca(u, v);\n\t\twhile(u != LCA) {\n\t\t\tbits[i].set(u, 1);\n\t\t\tu = fa[u][0];\n\t\t}\n\t\twhile(v != LCA) {\n\t\t\tbits[i].set(v, 1);\n\t\t\tv = fa[v][0];\n\t\t}\n\t}\n\trep(i, 0, (1 << m) - 1) {\n\t\tint cnt = 0, cur = 0;\n\t\trep(j, 0, m - 1) {\n\t\t\tif(i >> j & 1) {\n\t\t\t\t++ cnt, cur = j + 1;\n\t\t\t}\n\t\t} //  cur \u8868\u793a\u5305\u542b\u7684\u6700\u540e\u4e00\u7ec4\u8def\u5f84 \n\t\tif(cnt) t[i] = t[i ^ (1 << (cur - 1))] | bits[cur];\n\t\tif(cnt & 1) ans -= qpow(2ll, n - 1 - t[i].count());\n\t\telse ans += qpow(2ll, n - 1 - t[i].count());\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1669344912,
        "uid": 477674,
        "name": "Lagerent",
        "ccfLevel": 0,
        "title": "[ABC152F] Tree and Constraints"
    },
    {
        "content": "## \u601d\u8def\uff1a\n\u7ecf\u5178\u7684\u72b6\u538b\u5bb9\u65a5\u3002\u76f4\u63a5\u8003\u8651\u6709\u591a\u5c11\u6ee1\u8db3\u6761\u4ef6\u7684\u592a\u56f0\u96be\u4e86\uff0c\u6b63\u96be\u5219\u53cd\uff0c\u8003\u8651\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u60c5\u51b5\uff0c\u6709\u591a\u5c11\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u6700\u540e\u7528\u5168\u96c6 $2^{n-1}$ \u51cf\u53bb\u5bb9\u65a5\u540e\u7684\u7ed3\u679c\u3002\n\n\u4ee4 $f(S)$ \u8868\u793a\u4e0d\u6ee1\u8db3\u96c6\u5408 $S$ \u5185\u6240\u6709\u6761\u4ef6\u7684\u65b9\u6848\u6570\uff0c\u56e0\u4e3a\u6709\u4e00\u6761\u9ed1\u8fb9\u5c31\u6ee1\u8db3\u6761\u4ef6\uff0c\u6240\u4ee5 $S$ \u4e2d\u6240\u6709\u6761\u4ef6\u6240\u5360\u8fb9\u7684\u5e76\u90fd\u8981\u6d82\u767d\u3002\u8bbe\u9700\u8981\u6d82\u767d\u7684\u8fb9\u6570\u4e3a $C$\uff0c\u5219\u5269\u4f59 $n-1-C$ \u6761\u8fb9\u67d3\u8272\u60c5\u51b5\u4efb\u610f\uff0c\u6545 $f(S) = 2^{n-1-C}$\u3002\n\n\u8bbe\u8f93\u5165\u7684\u6761\u4ef6\u96c6\u5408\u4e3a $T$\uff0c\u6839\u636e\u5bb9\u65a5\u539f\u7406\uff0c\u6700\u7ec8\u7b54\u6848 $ans = \\sum_{S\\in T}(-1)^{|S|}f(S)$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n+m\\times 2^m)$\u3002\n## Code\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nlong long n, m, son[56], status[26];\nvector <int> e[106];\nvoid dfs(int now, int fa)\n{\n\tfor (int i = 0; i < e[now].size(); i++)\n\t{\n\t\tint to = e[now][i];\n\t\tif (to == fa) continue;\n\t\tson[to] = son[now] | (1ll << (to - 1));\n\t\tdfs(to, now);\n\t}\n}\nlong long f(long long S)\n{\n\tlong long cur = 0, cnt = __builtin_popcountll(S);\n\tfor (int i = 1; i <= m; i++)\n\t\tif (S & (1ll << (i - 1)))\n\t\t\tcur |= status[i];\n\tlong long res = 1ll << (n - 1 - __builtin_popcountll(cur));\n\tif (cnt % 2 == 0) res = res * -1ll; //\u5bb9\u65a5 \n\treturn res;\n}\nint main()\n{\n\tcin >> n;\n\tfor (int i = 1; i <= n - 1; i++)\n\t{\n\t\tint u, v;\n\t\tcin >> u >> v;\n\t\te[u].push_back(v);\n\t\te[v].push_back(u);\n\t}\n\tdfs(1, 0);\n\tcin >> m;\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tint u, v;\n\t\tcin >> u >> v;\n\t\tstatus[i] = son[u] ^ son[v]; //\u5f02\u6216\uff0c\u6c42\u51fa\u4e24\u70b9\u95f4\u7684\u8def\u5f84 \n\t}\n\tlong long ans = 0;\n\tfor (int S = 1; S <= (1 << m) - 1; S++)\n\t\tans += f(S); //\u72b6\u538b\u5bb9\u65a5 \n\tcout << ((1ll << (n - 1)) - ans) << endl; //\u7528\u5168\u96c6\u51cf\u53bb\u7b54\u6848 \n\treturn 0;\n}\n```",
        "postTime": 1678883669,
        "uid": 756135,
        "name": "StevenLiTheOIer",
        "ccfLevel": 0,
        "title": "ABC152F"
    }
]
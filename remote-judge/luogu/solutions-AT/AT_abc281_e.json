[
    {
        "content": "\u6253\u5b8c\u53bb\u8ba8\u8bba\u533a\u770b\u4e86\u4e00\u4e0b\uff0c\u5927\u5bb6\u8fd9\u9898\u90fd\u6253\u7684\u5e73\u8861\u6811\u6709\u5173\u7b97\u6cd5\u3002\n\n\u5b9e\u9645\u4e0a\uff0c\u672c\u9898\u66b4\u529b `vector` \u63d2\u5165\u53ef\u8fc7\u3002\n\n**\u4ee5\u4e0b\u505a\u6cd5\u53ef\u901a\u8fc7\u8d5b\u65f6\u6570\u636e\uff0c\u4e0d\u4fdd\u8bc1\u4f1a\u88ab hack \u6389**\u3002\n\n## \u601d\u8def\n\n\u66b4\u529b\u4e5f\u4e0d\u662f\u7eaf\u66b4\u529b\uff0c\u60f3\u5230\u7c7b\u4f3c\u4e00\u4e2a\u6ed1\u52a8\u7a97\u53e3\u7684\u65b9\u6cd5\uff1a\n\n\u5bf9\u4e8e $i \\le m$ \u7684\u60c5\u51b5\uff0c\u7531\u4e8e\u4e0d\u9700\u8981\u5220\u9664\u5143\u7d20\uff08\u540e\u9762\u4f1a\u8bb2\uff09\uff0c\u6240\u4ee5\u76f4\u63a5\u66b4\u529b `insert` \u5373\u53ef\u3002\n\n$i = m$ \u65f6\uff0c\u7edf\u8ba1\u4e00\u4e0b\u524d $k$ \u4e2a\u6570\u7684\u548c\uff08$sum$\uff09\u3002\n\n\u5bf9\u4e8e $i > m$ \u7684\u60c5\u51b5\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tzxd8syv.png)\n\n\u73b0\u5728\u6211\u4eec\u8981\u52a0\u5165\u65b0\u7684\u5143\u7d20 $val_i$\uff08\u76f8\u5f53\u4e8e\u533a\u95f4\u6ed1\u52a8\u4e86\u4e00\u683c\uff09\u3002\n\n\u8fd9\u91cc\u4f1a\u6709\u4e24\u79cd\u60c5\u51b5\u3002\u60c5\u51b5\u4e00\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9e94naqy.png)\n\n\u8fd9\u79cd\u60c5\u51b5\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u4e8b\uff0c\u53ea\u7528\u66b4\u529b\u63d2\u5165\u3002\n\n\u60c5\u51b5\u4e8c\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9nnc05qv.png)\n\n\u8fd9\u79cd\u60c5\u51b5\uff0c$sum$ \u53d8\u4e3a $sum + val_i - a_k$\u3002\n\n---\n\n\u90a3\u4e48\u9664\u4e86\u63d2\u5165\uff0c\u8fd8\u6709\u5220\u9664\u5462\uff01\u6211\u4eec\u8981\u5220\u9664 $val_{i - m}$\u3002\n\n\u8fd9\u4e2a\u662f\u540c\u7406\u7684\uff0c\u5c31\u4e0d\u753b\u56fe\u4e86\uff1a\n\n+ \u5982\u679c\u5bf9\u7b54\u6848\u6ca1\u6709\u5f71\u54cd\uff0c\u76f4\u63a5\u5220\u9664\u5373\u53ef\u3002\n+ \u5982\u679c\u6709\u5f71\u54cd\uff0c$sum$ \u53d8\u4e3a $sum - a_{pos} + a_{k + 1}$\uff0c\u5373\u5220\u9664\u5143\u7d20\u5e76\u5bb9\u4e0b\u5907\u9009\u7684\u5143\u7d20\u3002\n\n## \u4ee3\u7801\n\n\u4e3a\u4f55\u66b4\u529b `vector` \u63d2\u5165\u8dd1\u5f97\u98de\u5feb\u5462\uff1f\n\n+ \u6570\u636e\u8303\u56f4\u8f83\u5c0f\uff0c\u53ea\u6709 $2\\times 10^5$\u3002\n+ \u4e0d\u662f Ynoi \u9898\uff0c\u6570\u636e\u4e5f\u6ca1\u6709\u5361\u5230\u6781\u9650\u6570\u636e\uff08\uff1f\uff09\u3002\n+ `vector` \u63d2\u5165\u3001\u5220\u9664\uff0c**\u5e38\u6570\u5f88\u5c0f\u5f88\u5c0f**\u3002\n\n\u6709\u4e0d\u5c11\u9898\uff08\u5982 [P1627](https://www.luogu.com.cn/problem/P1627)\uff09\u90fd\u662f\u53ef\u4ee5\u66b4\u529b `vector` \u8fc7\u6389\u7684\u3002\n\n```cpp\nint val[200005];\nvoid solve()\n{\n\tvector <int> a; a.pb(-1); //vector \u4e0b\u6807\u4ece 0 \u5f00\u59cb\uff0c\u4f46\u662f\u6211\u4e60\u60ef\u4e0b\u6807\u4ece 1 \u5f00\u59cb\n\tint n, m, k;\n    ll sum = 0; //\u6ce8\u610f long long\n\tscanf(\"%d%d%d\", &n, &m, &k);\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tscanf(\"%d\", &val[i]);\n\t\tif (i <= m) //\u8fd8\u4e0d\u9700\u8981\u5220\u9664\uff0c\u76f4\u63a5\u66b4\u529b insert\n\t\t{\n\t\t\ta.insert(lower_bound(a.begin(), a.end(), val[i]), val[i]);\n\t\t\tif (i == m) {for (int j = 1; j <= k; j++) sum += a[j];} //\u8ba1\u7b97\u4e00\u4e0b sum\uff0c\u65b9\u4fbf\u6ed1\u52a8\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint pos = lower_bound(a.begin(), a.end(), val[i]) - a.begin(); //\u63d2\u5165\u7684\u4f4d\u7f6e\n\t\t\tif (pos <= k) sum += val[i] - a[k]; //\u5982\u679c\u5bf9\u7b54\u6848\u6709\u5f71\u54cd\uff0c\u52a0\u4e0a val[i] \u5e76\u6324\u6389\u5f53\u524d\u7684 a[k]\n\t\t\ta.insert(a.begin() + pos, val[i]); //\u66b4\u529b\u63d2\u5165\n\n\t\t\tpos = lower_bound(a.begin(), a.end(), val[i - m]) - a.begin(); //\u5220\u9664\u7684\u4f4d\u7f6e\n\t\t\tif (pos <= k) sum += - a[pos] + a[k + 1]; //\u5982\u679c\u5bf9\u7b54\u6848\u6709\u5f71\u54cd\uff0c\u51cf\u53bb a[pos] \u5e76\u5bb9\u4e0b\u5f53\u524d\u7684 a[k+1]\n\t\t\ta.erase(a.begin() + pos); //\u66b4\u529b\u5220\u9664\n\t\t}\n\t\tif (i >= m) printf(\"%lld \", sum); //\u8f93\u51fa\u7b54\u6848\u5373\u53ef\n\t}\n\tputs(\"\");\n}\n```",
        "postTime": 1670721916,
        "uid": 687698,
        "name": "_dijkstra_",
        "ccfLevel": 0,
        "title": "ABC281E \u9898\u89e3"
    },
    {
        "content": "## \u524d\u8a00\n\n\u8d5b\u65f6\u505a\u51fa\u4e86 E \u5374\u6ca1\u505a\u51fa D\u3002\n\n## \u89e3\u6cd5\n\n\u9996\u5148\u7528\u4e00\u4e2a `std::vector`\uff08\u8bb0\u4e3a $b$\uff09 \u5b58\u50a8\u524d $M$ \u4e2a\u6570\uff0c\u6392\u5e8f\u540e\u53d6\u524d $k$ \u5927\uff0c\u8fd9\u5c31\u662f\u7b2c\u4e00\u4e2a\u8be2\u95ee\u7684\u7b54\u6848\uff0c\u8bb0\u4e3a $c$\u3002\n\n\u5bf9\u4e8e\u63a5\u4e0b\u6765\u6bcf\u4e00\u4e2a\u8be2\u95ee\uff0c\u6211\u4eec\u53ea\u9700\u7528 `lower_bound` \u51fd\u6570\u4e8c\u5206\u51fa\u9700\u8981\u5220\u9664\u7684\u90a3\u4e2a\u6570\uff08\u8bbe\u4e3a $r$\uff09\u7684\u4f4d\u7f6e\uff0c\u5e76\u5224\u65ad\u5220\u6389\u5b83\u4f1a\u4e0d\u4f1a\u5bf9\u7b54\u6848\u6709\u5f71\u54cd\u3002\u5982\u679c\u6709\u5f71\u54cd\uff0c\u90a3\u4e48 $c\\leftarrow c+b_{K+1}-r$ \u5e76\u5220\u9664\u5b83\u3002\n\n\u7136\u540e\u8003\u8651\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u6570\uff0c\u8bbe\u4e3a $p$\u3002\u540c\u6837\u5730\uff0c\u7528 `insert` \u7ed3\u5408 `upper_bound` \u63d2\u5165\u540e\u518d\u6b21\u67e5\u8be2\u6392\u540d\uff08\u6709\u4e00\u5927\u4f6c\u6307\u51fa\uff0c`insert` \u51fd\u6570\u63d2\u5165\u5e38\u6570\u6781\u5c0f\uff09\uff0c\u8003\u8651\u5bf9\u7b54\u6848\u6709\u6ca1\u6709\u5f71\u54cd\uff0c\u5982\u679c\u6709\u5f71\u54cd\uff0c\u90a3\u4e48 $c\\leftarrow c+p-b_{K+1}$\u3002\n\n\u6bcf\u6b21\u8be2\u95ee\u8f93\u51fa\u5904\u7406\u8fc7\u7684 $c$ \u5373\u53ef\u3002\n\n\u653e\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nmain(){\n  ios::sync_with_stdio(false);\n  int n,m,k,c=0; cin>>n>>m>>k;\n  vector<int> a(n),b;\n  for(auto &i:a)cin>>i;\n  for(int i=0;i<m;i++)b.emplace_back(a[i]);\n  sort(b.begin(),b.end());\n  for(int i=0;i<k;i++)c+=b[i]; // \u5148\u5904\u7406\u51fa\u7b2c\u4e00\u4e2a\u7b54\u6848\n  cout<<c<<' ';\n  for(int i=1;i<=n-m;i++){\n    auto l=lower_bound(b.begin(),b.end(),a[i-1]); // \u67e5\u8be2\u9700\u8981\u5220\u9664\u7684\u6570\u7684 rank\n    if(l-b.begin()<k)c+=b[k]-*l; b.erase(l); // \u6709\u5f71\u54cd\n    b.insert(upper_bound(b.begin(),b.end(),a[i+m-1]),a[i+m-1]); // \u63d2\u5165\n    auto r=lower_bound(b.begin(),b.end(),a[i+m-1]); // \u63d2\u5165\u540e\u67e5\u8be2 rank\n    if(r-b.begin()<k)c+=a[i+m-1]-b[k]; // \u6709\u5f71\u54cd\n    cout<<c<<' ';\n  }\n  cout<<endl;\n  return 0;\n}\n```",
        "postTime": 1670734341,
        "uid": 556366,
        "name": "zyc212303",
        "ccfLevel": 5,
        "title": "[ABC281E] Least Elements \u9898\u89e3"
    },
    {
        "content": "## $\\mathcal Solution$\n\n\u672c\u9898\u7684\u601d\u8def\u7c7b\u4f3c\u4e8e\u5bf9\u9876\u5806\u3002\n\n\u7528\u4e24\u4e2a multiset \u6765\u7ef4\u62a4\u3002\n\n$S_1$ \u4e3a\u7b2c\u4e00\u4e2a multiset\uff1b\n\n$S_2$ \u4e3a\u7b2c\u4e8c\u4e2a multiset\u3002\n\n$S_1$ \u7ef4\u62a4\u524d $K$ \u4e2a\u503c\uff0c$S_2$ \u7ef4\u62a4\u9884\u9009\u7684\u503c\u3002\n\n\u5f53\u8fdb\u5165\u4e00\u4e2a\u6570 $x$\uff0c\u5219\u5c06 $x \\in S_2$\u3002\n\n1. \u5982\u679c $\\mathrm{length}(S_1) < K$\uff0c\u5219\u5c06 $S_2$ \u7684\u6700\u5c0f\u503c\u52a0\u5165 $S_1$\u3002\n\n2. \u5224\u65ad $S_2$ \u7684\u6700\u5c0f\u503c\uff0c\u5373 $S_2$ \u7684\u5f00\u5934\uff0c\u4e0e $S_1$ \u7684\u6700\u5927\u503c\uff0c\u5373 $S_1$ \u7684\u7ed3\u5c3e\uff0c\u5224\u65ad\u5927\u5c0f\u5173\u7cfb\uff0c\u5982\u679c\u5c0f\u4e8e\uff0c\u5219\u66ff\u6362\u3002\n\n3. \u8f93\u51fa $\\mathrm{ans}_i$\u3002\n\n4. \u5728\u8fd0\u884c\u5b8c\u4ee5\u4e0a\u64cd\u4f5c\u540e\uff0c\u5982\u679c $i \\ge m$ \u65f6\uff0c\u5c06 $A_{i - M + 1}$ \u5220\u9664\uff0c\u5373\u5224\u65ad $A_{i - M + 1}$ \u6240\u5728\u7684\u96c6\u5408\u5c06\u4ed6\u5220\u9664\u3002\n\n5. \u91cd\u590d $\\mathit{1} \\sim \\mathit{4}$ \u64cd\u4f5c\u3002\n\n### $\\mathcal Code$\n\n```cpp\n#include <iostream>\n#include <cstring>\n#include <algorithm>\n#include <queue>\n#include <vector>\n#include <stack>\n#include <cmath>\n#include <sstream>\n#include <set>\n#include <unordered_set>\n#include <map>\n#include <unordered_map>\n\n#define x first\n#define y second\n#define IOS ios::sync_with_stdio(false)\n#define cit cin.tie(0)\n#define cot cout.tie(0)\n\nusing namespace std;\n\ntypedef long long LL;\ntypedef unsigned long long ULL;\ntypedef pair<int, int> PII;\n\nconst int N = 200010, M = 100010, MOD = 1e9 + 7;\nconst int INF = 0x3f3f3f3f;\nconst LL LLINF = 0x3f3f3f3f3f3f3f3f;\nconst double eps = 1e-8;\n\nint n, m, k;\nint w[N];\n\nvoid solve()\n{\n\tcin >> n >> m >> k;\n\t\n\tmultiset<int> S;\n\tmultiset<int> S2;\n\tfor (int i = 1; i <= n; i ++ ) cin >> w[i];\n\t\n\tLL res = 0;\n\tfor (int i = 1; i <= n; i ++ )\n\t{\n\t\tS2.insert(w[i]);\n\t\twhile (S.size() < k && S2.size()) res += *S2.begin(), S.insert(*S2.begin()), S2.erase(S2.begin());\n\t\twhile (S2.size() && (*S2.begin()) < (*S.rbegin())) // \u7ef4\u62a4\u5e8f\u5217\n\t\t{\n\t\t\tres -= *S.rbegin();\n\t\t\tres += *S2.begin();\n\t\t\tS2.insert(*S.rbegin());\n\t\t\tS.erase(S.find(*S.rbegin()));\n\t\t\tS.insert(*S2.begin());\n\t\t\tS2.erase(S2.begin());\n\t\t}\n\t\tif (i >= m)\n\t\t{\n\t\t\tcout << res << ' ';\n\t\t\tint x = w[i - m + 1];\n\t\t\tif (S.find(x) != S.end()) res -= x, S.erase(S.find(x)); // \u53ea\u6709\u5728 S \u96c6\u5408\u4e2d\u624d\u9700\u8981\u51cf\u3002\n\t\t\telse S2.erase(S2.find(x));\n\t\t}\n\t}\n}\n\nint main()\n{\n\tIOS;\n\tcit, cot;\n\tint T = 1;\n//\tcin >> T;\n\twhile (T -- ) solve();\n\treturn 0;\n}\n```",
        "postTime": 1670723708,
        "uid": 353330,
        "name": "hcywoi",
        "ccfLevel": 5,
        "title": "ABC281E \u9898\u89e3"
    },
    {
        "content": "\u8d5b\u65f6\u601d\u8def\u662f\u5e73\u8861\u6811\u3002\n\n\u8fd9\u662f\u4e00\u4e2a\u6ed1\u52a8\u7a97\u53e3\u95ee\u9898\uff0c\u6bcf\u4e00\u6b21\u6ed1\u52a8\u65f6\uff0c\u6709\u4e00\u4e2a\u6570\u5b57\u8d70\uff0c\u6709\u4e00\u4e2a\u6570\u5b57\u52a0\u5165\u3002\n\n\u5bf9\u4e8e\u79bb\u5f00\u7684\u6570\u5b57\uff0c\u548c\u52a0\u5165\u7684\u6570\u5b57\uff0c\u6211\u4eec\u9700\u8981\u8003\u8651\u5b83\u5bf9\u7b54\u6848\u662f\u5426\u6709\u8d21\u732e\uff0c\u4ee5\u5bf9\u7b54\u6848\u8fdb\u884c\u66f4\u65b0\u3002\n\n\u6211\u4eec\u6839\u636e\u9898\u610f\u5f97\u6709\u8d21\u732e\u7684\u6570\u5b57\u5c31\u662f\u6392\u540d\u662f\u524d $k$ \u7684\u3002\n\n\u56e0\u6b64\u6211\u4eec\u603b\u7ed3\uff0c\u6211\u4eec\u9700\u8981\u5220\u9664\uff0c\u52a0\u5165\uff0c\u67e5\u8be2\u6392\u540d\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u5229\u7528\u5e73\u8861\u6811\u7ef4\u62a4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\log n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline long long read() {//\u5feb\u8bfb\n    char c = getchar();\n    long long f = 1;\n    long long sum = 0;\n    while (c != '-' && (c < '0' || c > '9')) c = getchar();\n    if (c == '-') {\n        f = -1;\n        c = getchar();\n    }\n    do {\n        sum = (sum << 3) + (sum << 1) + c - '0';\n        c = getchar();\n    } while (c >= '0' && c <= '9');\n    return sum * f;\n}\nstruct node;//AVL\u5e73\u8861\u6811\ntypedef node *tree;\nstruct node {\n    long long num, sz, h, liv, cnt;\n    tree lc, rc;\n    node() : num(0), h(1), sz(1), cnt(1), lc(NULL), rc(NULL){};\n    node(long long x) : num(x), h(1), sz(1), cnt(1), lc(NULL), rc(NULL){};\n};\n \ntree t(NULL);\n \ninline long long siz(tree &x) {\n    if (x == NULL)\n        return 0;\n    return x->sz;\n}\ninline long long hig(tree &x) {\n    if (x == NULL)\n        return 0;\n    return x->h;\n}\ninline void update(tree &x) {\n    x->sz = siz(x->lc) + siz(x->rc) + x->cnt;\n    x->h = max(hig(x->lc), hig(x->rc)) + 1;\n}\n \ninline void zig(tree &x) {\n    tree k;\n    k = x->rc;\n    x->rc = k->lc;\n    k->lc = x;\n    update(k),update(x);\n    x = k;\n}\ninline void zag(tree &x) {\n    tree k;\n    k = x->lc;\n    x->lc = k->rc;\n    k->rc = x;\n    update(k),update(x);\n    x = k;\n} \ninline void zagzig(tree &x) {\n    zig(x->lc);\n    zag(x);\n}\ninline void zigzag(tree &x) {\n    zag(x->rc);\n    zig(x);\n}\nvoid ins(tree &x, long long t) {\n    if (x == NULL) {\n        x = new node(t);\n        return;\n    }\n    if (x->num == t) {\n        (x->cnt)++;\n        update(x);\n        return;\n    }\n    if (x->num < t) {\n        ins(x->rc, t);\n        update(x);\n        if (hig(x->rc) - hig(x->lc) == 2) {\n            if (t > (x->rc->num))\n                zig(x);\n            else\n                zigzag(x);\n        }\n    } else {\n        ins(x->lc, t);\n        update(x);\n        if (hig(x->lc) - hig(x->rc) == 2) {\n            if (t < (x->lc->num))\n                zag(x);\n            else\n                zagzig(x);\n        }\n    }\n    update(x);\n}\nvoid del(tree &x, long long t) {\n    if (x == NULL)\n        return;\n    if (x->num < t) {\n        del(x->rc, t);\n        update(x);\n        if (hig(x->lc) - hig(x->rc) == 2) {\n            if (hig(x->lc->lc) >= hig(x->lc->rc))\n                zag(x);\n            else\n                zagzig(x);\n        }\n    } else if (x->num > t) {\n        del(x->lc, t);\n        update(x);\n        if (hig(x->rc) - hig(x->lc) == 2) {\n            if (hig(x->rc->rc) >= hig(x->rc->lc))\n                zig(x);\n            else\n                zigzag(x);\n        }\n    } else {\n        if (x->cnt > 1) {\n            x->cnt--;\n            update(x);\n        } else if (x->lc && x->rc ) {\n            tree k = x->rc;\n            while (k->lc) k = k->lc;\n            x->cnt = k->cnt, x->num = k->num;\n            k->cnt = 1;\n            del(x->rc, k->num);\n            update(x);\n            if (hig(x->lc) - hig(x->rc) == 2) {\n                if (hig(x->lc->lc) >= hig(x->lc->rc))\n                    zag(x);\n                else\n                    zagzig(x);\n            }\n        } else {\n            if (x->lc != NULL)\n                x = x->lc,x->lc=NULL;\n            else if (x->rc != NULL)\n                x = x->rc,x->rc=NULL;\n            else\n                x = NULL;\n            return;\n        }\n    }\n    update(x);\n}\nlong long rk(tree &x, long long t) {\n\tif(x==NULL)return 1;\n    if (x->num == t)\n        return siz(x->lc) + 1;\n    if (x->num < t)\n        return siz(x->lc) + x->cnt + rk(x->rc, t);\n    return rk(x->lc, t);\n}\nlong long val(tree &x, long long t) {\n    if(x==NULL)return -1;\n    if (siz(x->lc) >= t)\n        return val(x->lc, t);\n    if (siz(x->lc) + (x->cnt) >= t)\n        return x->num;\n    return val(x->rc, t - (x->cnt) - siz(x->lc));\n}\nlong long n,m,k,a[1000005],sum;\nint main()\n{\n    n=read(),m=read(),k=read();\n    for(int i=1;i<=n;i++)\n    {\n        a[i]=read();\n    }\n    for(int i=1;i<=m;i++)\n    {\n        long long kth=val(t,k);\n        if(kth==-1)sum+=a[i];//\u4e0d\u8db3k\u4e2a\uff0c\u76f4\u63a5\u4e0a\n        else if(kth>a[i])sum=sum-kth+a[i];//\u66ff\u6362\n        ins(t,a[i]);\n    }\n    cout<<sum<<' ';\n    for(int i=m+1;i<=n;i++)\n    {\n        long long lrk=rk(t,a[i-m]);//\u5f97\u5230\u6392\u540d\n        del(t,a[i-m]);\n        if(lrk<=k)\n        {\n            sum-=a[i-m];\n            if(val(t,k)!=-1)sum+=val(t,k);\n            else//\u4e0d\u5b58\u5728kth\uff0c\u6b64\u65f6\u5fc5\u987b\u6dfb\u52a0ai\n            {\n                sum+=a[i];\n                ins(t,a[i]);\n                cout<<sum<<' ';\n                continue;\n            }\n        }\n        \n        long long kth=val(t,k);\n        if(kth>a[i])sum=sum-kth+a[i];//\u540c\u4e0a\n        ins(t,a[i]);\n        cout<<sum<<' ';\n    }\n}\n```",
        "postTime": 1670936079,
        "uid": 501947,
        "name": "DengDuck",
        "ccfLevel": 6,
        "title": "ABC281E Least Elements \u9898\u89e3"
    },
    {
        "content": "\u5177\u9898\u610f\u53ef\u77e5\uff0c\u6211\u4eec\u9700\u8981\u52a8\u6001\u7ef4\u62a4\u4e00\u4e2a\u533a\u95f4 \uff08\u8fd9\u91cc\u770b\u6210\u4e00\u4e2a\u96c6\u5408\uff09 \u5185\u7684\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n\n1. \u5220\u9664\u4e00\u4e2a\u6570\n2. \u52a0\u5165\u4e00\u4e2a\u6570\n3. \u524d $k$ \u4e2a\u6570\u4e4b\u548c\u3002\n\n\u663e\u7136\u53ef\u4ee5\u4f7f\u7528\u5e73\u8861\u6811\u3002\n\n\u4f46\u662f\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\u6811\u72b6\u6570\u7ec4\u4e0a\u500d\u589e\u3002\n\n\u5f00\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\uff0c\u4e00\u4e2a\u7528\u6765\u6c42\u6392\u540d\uff0c\u53e6\u4e00\u4e2a\u6c42\u5c0f\u4e8e $x$ \u7684\u6240\u6709\u6570\u3002\n\n\u6240\u4ee5\uff0c\u53ea\u8981\u79bb\u6563\u5316\u540e\u5373\u53ef\u901a\u8fc7\uff0c\u590d\u6742\u5ea6 $O(n \\log n)$ \u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int maxn=4e5+100;\nconst int cnt = 1e6;\nint tree[2][1000000];\ninline int lowbit(int x)\n{\n    return x&-x;\n}\ninline void add(int x,int val,int type)\n{\n\tif(x==0){\n\t\treturn ;\n\t}\n    while(x<=cnt)\n    {\n        tree[type][x]+=val;\n        x+=lowbit(x);\n    }\n}\ninline int pre(int x,int type)\n{\n    int res=0;\n    while(x!=0)\n    {\n        res+=tree[type][x];\n        x-=lowbit(x);\n    }\n    return res;\n}\nint ask(int l,int r,int type)\n{\n\tif(l>r||l==0) return 0;\n    return pre(r,type)-pre(l-1,type);\n}\ninline int kth(int k,int type)\n{\n    int r=0,t=0;\n    for(int i=20,x,y;i>=0;i--)\n    {\n        if((x=r+(1<<i))>cnt) continue;\n        if((y=t+tree[type][x])<k) r=x,t=y;\n    }\n    return r+1;\n}\nint a[maxn];\nint op[maxn];\nint y[maxn];\nint p[maxn];\nint n,m,k;\nsigned main()\n{\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cout.tie(0);\n    cin>>n>>m>>k;\n    for(int i=1;i<=n;i++){\n    \tcin>>a[i];\n    \top[i]=a[i];\n    \ty[i]=a[i];\n    }\n    sort(op+1,op+n+1);\n    for(int i=1;i<=n;i++){\n    \ta[i]=lower_bound(op+1,op+n+1,a[i])-(op+1)+1;\n    \tp[a[i]]=y[i];\n    }\n    for(int i=1;i<=m;i++){\n    \tadd(a[i],1,0);\n    \tadd(a[i],y[i],1);\n    }\n    for(int i=0;i+m<=n;i++){\n    \tint sum=kth(k,0);\n    \tint res=ask(1,sum-1,1);\n    \tint cnt=ask(1,sum-1,0);\n    \tres+=(k-cnt)*p[sum];\n    \tcout<<res<<'\\n';\n    \tadd(a[1+i],-1,0);\n    \tadd(a[1+i],-y[1+i],1);\n    \tadd(a[i+m+1],1,0);\n    \tadd(a[i+m+1],y[i+m+1],1);\n    }\n    return 0;\n}\n```\n",
        "postTime": 1670679504,
        "uid": 520748,
        "name": "_ChiFAN_",
        "ccfLevel": 4,
        "title": "ATCoder_abc_281 E \u9898\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\u6709\u5f88\u591a\u79cd\u89e3\u6cd5\u3002\n\n\u7b2c\u4e00\u79cd\uff0c\u770b\u5230\u6c42\u524d $k$ \u5927\u503c\u4e4b\u548c\uff0c\u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00\u76f4\u63a5\u4e0a\u4e3b\u5e2d\u6811\u3002\u4e0d\u4f1a\u53ef\u4ee5\u89c1 [P3834 \u3010\u6a21\u677f\u3011\u53ef\u6301\u4e45\u5316\u7ebf\u6bb5\u6811 2](https://www.luogu.com.cn/problem/P3834)\u3002\u7ef4\u62a4\u4e24\u4e2a tag\uff1a\u5b50\u6811\u5185\u6709\u591a\u5c11\u4e2a\u6570\uff0c\u5b50\u6811\u5185\u6240\u6709\u6570\u5b57\u4e4b\u548c\uff0c\u67e5\u8be2\u7684\u65f6\u5019\u76f4\u63a5\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u5373\u53ef\u3002\u8fd9\u79cd\u505a\u6cd5\u7684\u597d\u5904\u662f\u4e0d\u7528\u52a8\u8111\u5b50\uff0c\u5e76\u4e14\u5728\u8d5b\u65f6\u53ef\u4ee5\u76f4\u63a5\u590d\u5236\u6a21\u677f\u3002\n\n\u7b2c\u4e8c\u79cd\uff0c\u89c2\u5bdf\u5230\u533a\u95f4\u957f\u5ea6\u4e00\u5b9a\uff0c\u90a3\u4e48\u4e3b\u5e2d\u6811\u5176\u5b9e\u662f\u6bd4\u8f83\u591a\u4f59\u7684\u3002\u5176\u5b9e\u53ea\u7528\u7ef4\u62a4\u4e00\u68f5\u7ebf\u6bb5\u6811\uff0c\u5c31\u662f\u5f53\u524d\u533a\u95f4\u7684\u6743\u503c\u7ebf\u6bb5\u6811\u3002\u540c\u6837\u7684\uff0c\u6743\u503c\u7ebf\u6bb5\u6811\u4e0a\u7ef4\u62a4\u4e24\u4e2a tag\uff1a\u5b50\u6811\u5185\u6709\u591a\u5c11\u4e2a\u6570\uff0c\u5b50\u6811\u5185\u6240\u6709\u6570\u5b57\u4e4b\u548c\u3002\u8003\u8651\u4ece $[l,r]$ \u8f6c\u79fb\u5230 $[l+1,r+1]$\uff0c\u5b9e\u9645\u4e0a\u53ea\u7528\u5728\u6743\u503c\u7ebf\u6bb5\u6811\u4e0a\u628a $a_l$ \u5220\u53bb\uff0c\u52a0\u4e0a $a_r$ \u5373\u53ef\u3002\u67e5\u8be2\u7684\u65f6\u5019\u540c\u6837\u5728\u8fd9\u68f5\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u5373\u53ef\u3002\n\n\u9664\u6b64\u4e4b\u5916\u597d\u50cf\u8fd8\u6709\u522b\u7684\u89e3\u6cd5\uff0c\u4e5f\u8bb8\u8fd8\u53ef\u4ee5\u7ef4\u62a4\u7b2c $k$ \u5927\u6570\u4ece\u800c\u907f\u514d\u4f7f\u7528\u7ebf\u6bb5\u6811\uff08\uff1f\u8fd9\u91cc\u5c31\u5148\u4ecb\u7ecd\u7ebf\u6bb5\u6811\u7684\u4e24\u79cd\u89e3\u6cd5\u3002",
        "postTime": 1670898557,
        "uid": 552376,
        "name": "sixrc",
        "ccfLevel": 0,
        "title": "[\u9898\u89e3] [ABC281E] Least Elements"
    },
    {
        "content": "[\u53ef\u80fd\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/Fy5-FyFive/articles/16976501.html)\n#### \u7b80\u8981\u9898\u610f\n> \u6c42\u4e00\u4e2a\u5e8f\u5217 $A$ \u4e2d\u6bcf\u4e00\u4e2a\u957f\u4e3a $M$ \u7684\u8fde\u7eed\u6bb5\u5185\u524d $K$ \u5c0f\u7684\u6570\u4e4b\u548c\u3002\n>\n> \u6309\u987a\u5e8f\u8f93\u51fa\u6bcf\u4e00\u4e2a\u548c\u3002\n>\n> $1\\leq K \\leq M \\leq N \\leq 2 \\times 10^5$\uff0c$1 \\leq A_i \\leq 10^9$\u3002\n#### Step 1\n\u9996\u5148\u8003\u8651 $K=M$ \u65f6\u600e\u4e48\u505a\uff1a\n\n\u8fd9\u4e2a\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u628a $M$ \u4e2a\u6570\u52a0\u8d77\u6765\u5c31\u884c\u4e86\u3002\n\n\u7136\u540e\u662f $M=N$ \u65f6\uff1a\n\n\u540c\u6837\u4e5f\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u6392\u5e8f\u53d6\u524d $K$ \u5c0f\u7684 $K$ \u4e2a\u6570\u52a0\u8d77\u6765\u8f93\u51fa\u3002\n#### Step 2\n\u5f53 $K \\neq M \\neq N$ \u65f6\uff0c\u76f4\u63a5\u6392\u5e8f\u662f $O(n^2\\log n)$ \u7684\uff0c\u663e\u7136\u4e0d\u53ef\u80fd\u8fc7\u3002\n\n\u4e8e\u662f\u8003\u8651\u4ece\u4e0a\u4e00\u4e2a\u8fde\u7eed\u6bb5\u8f6c\u79fb\u5230\u4e0b\u4e00\u4e2a\u8fde\u7eed\u6bb5\u3002\n\n\u73b0\u5728\u5904\u7406\u5b8c\u4e86\u4e0a\u4e00\u4e2a\u8fde\u7eed\u6bb5\u4e4b\u540e\uff0c\u8bbe\u5f53\u524d\u6bb5\u5de6\u7aef\u70b9\u4e3a $i$ $(1<i\\leq N-M+1)$\u3002\n\n\u4e0d\u96be\u770b\u51fa\uff0c\u76f8\u5bf9\u4e8e\u4e0a\u4e00\u4e2a\u6bb5\uff0c\u53ea\u9700\u8981\u5220\u6389\u7b2c $i-1$ \u4e2a\u6570\u5e76\u52a0\u5165\u7b2c $i+1$ \u4e2a\u6bb5\u5c31\u662f\u5f53\u524d\u6bb5\u4e86\u3002\n\n\u8003\u8651\u8fd9\u4e00\u5220\u4e00\u589e\u5bf9\u7b54\u6848\u7684\u5f71\u54cd\uff1a\n\n\u9996\u5148\uff0c\u5982\u679c\u5220/\u589e\u7684\u6570\u5b57\u4e0d\u5728\u524d $K$ \u4e2a\u7684\u8303\u56f4\u5185\uff0c\u663e\u7136\u662f\u4e0d\u4f1a\u4ea7\u751f\u4efb\u4f55\u5f71\u54cd\u7684\u3002\n\n\u5bf9\u4e8e\u5728\u524d $K$ \u4e2a\u4ee5\u5185\u7684\u60c5\u51b5\uff0c\u76f4\u63a5\u5220\u9664\u5e76\u52a0\u4e0a\u539f\u6765\u7684 $K+1$ \u4f4d\u7f6e\u4e0a\u7684\u6570\u3001\u76f4\u63a5\u63d2\u5165\u5e76\u51cf\u53bb\u73b0\u5728\u7684 $K+1$ \u4f4d\u7f6e\u4e0a\u7684\u6570\u662f\u53ef\u884c\u7684\u3002\u5728\u5220\u3001\u63d2 $O(1)$ \u7684\u524d\u63d0\u4e0b\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n\u8fd9\u91cc\u6211\u76f4\u63a5\u7528\u7684 vector \u81ea\u5e26\u7684 insert() \u548c erase()\uff0c\u6700\u6162\u70b9 1.28s \u8fd8\u662f\u51b2\u8fc7\u53bb\u4e86\u3002\n\n\u4f18\u5316\u7684\u8bdd\u53ef\u4ee5\u8003\u8651\u7528\u5757\u72b6\u94fe\u8868\u66ff\u4ee3 vector\uff0c\u7136\u540e $O(\\sqrt{n})$ \u5220\u63d2\uff0c\u5e94\u8be5\u662f\u53ef\u4ee5\u7a33\u8fc7\u7684\u3002\n#### more\n\u6b63\u89e3\u8c8c\u4f3c\u662f\u7ebf\u6bb5\u6811\uff0c\u4e0d\u8fc7\u6211\u6ca1\u6253\u3002(\u5176\u5b9e\u5c31\u662f\u61d2\u2026\u2026)\n#### Code\n\uff08vector\uff0c\u65e0\u4f18\u5316\uff09\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint n,m,k,a[200005];\nvector<int>s;\nint fid(int x)\n{\n    int l=0,r=s.size()-1;\n    while(l<r)\n    {\n        int mid=(l+r)>>1;\n        if(s[mid]>=x) r=mid;\n        else l=mid+1;\n    }\n    return l;\n}//\u627e\u5230x\u6240\u5728\u7684\u4f4d\u7f6e\nint fidl(int x)\n{\n    if(x>s[s.size()-1]) return s.size();\n    int l=0,r=s.size()-1;\n    while(l<r)\n    {\n        int mid=(l+r)>>1;\n        if(s[mid]>=x) r=mid;\n        else l=mid+1;\n    }\n    return l;\n}//\u627e\u5230x\u5e94\u8be5\u63d2\u5165\u7684\u4f4d\u7f6e\nsigned main()\n{\n    int sum=0;\n    scanf(\"%lld%lld%lld\",&n,&m,&k);\n    for(int i=1;i<=n;i++) scanf(\"%lld\",&a[i]);\n    for(int i=1;i<=m;i++) s.push_back(a[i]);\n    sort(s.begin(),s.begin()+m);\n    for(int i=0;i<k;i++) sum+=s[i];\n    printf(\"%lld\\n\",sum);\n    if(k==m)\n    {\n        for(int i=2;i<=n-m+1;i++)\n        {\n            sum-=a[i-1];\n            sum+=a[i+m-1];\n            printf(\"%lld\\n\",sum);\n        }\n    }\n    else\n    {\n        for(int i=2;i<=n-m+1;i++)\n        {\n            int zt1,zt2;\n            zt1=fid(a[i-1]);\n            s.erase(s.begin()+zt1);\n            if(zt1<k) sum-=a[i-1],sum+=s[k-1];\n            zt2=fidl(a[i+m-1]);\n            if(zt2<k) sum-=s[k-1],sum+=a[i+m-1];\n            s.insert(s.begin()+zt2,a[i+m-1]);\n            printf(\"%lld\\n\",sum);\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1670835571,
        "uid": 532102,
        "name": "_FyFive_",
        "ccfLevel": 6,
        "title": "ABC281E-Least Elements-\u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\u7b80\u8ff0\n\u7ed9\u5b9a $n\\ (n\\leq2\\times10^5)$ \u4e2a\u6570\u7684\u6570\u5217\uff0c\u6c42\u51fa\u5bf9\u4e8e\u6bcf\u4e2a $i\\ (i<=n-m+1,m\\leq n)$\uff0c\u533a\u95f4 $[i,i+m-1]$ \u524d $k\\ (k\\leq m)$ \u5c0f\u7684\u548c\u3002\n\n## \u9898\u76ee\u5206\u6790\n\u6b63\u89e3\u5e94\u8be5\u662f\u7528\u4e24\u4e2a multiset \u7ef4\u62a4\u5f53\u524d\u533a\u95f4\u7684\u524d $k$ \u5c0f\u548c\u5269\u4e0b\u7684\u6570\uff0c\u4ece $i=1$ \u5411\u540e\u9012\u63a8\uff0c\u6211\u662f\u590d\u5236\u4e86\u4e00\u4efd\u5212\u5206\u6811\u677f\u5b50\uff0c\u539f\u7406\u76f8\u540c\u3002\n\n\u6ce8\u610f\u5230\u4ece $i$ \u63a8\u5230 $i+1$ \u65f6\uff0c\u533a\u95f4\u5185\u4ec5\u6709 $a_i,a_{i+m}$ \u8fd9\u4e24\u4e2a\u6570\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u5bf9\u5176\u5206\u7c7b\u8ba8\u8bba\u3002\n\n\u5982\u679c $a_i$ \u5728\u539f\u6765\u7684\u524d $k$ \u5c0f\u4e2d\uff0c\u5219\u53ea\u9700\u8981\u6bd4\u8f83 $a_{i+m}$ \u4e0e $[i,i+m-1]$ \u7684\u7b2c $k+1$ \u5c0f\u7684\u5927\u5c0f\uff0c\u8ba9\u7b54\u6848\u51cf\u6389 $a_i$ \u52a0\u4e0a\u8f83\u5c0f\u7684\u6570\u3002\n\n\u5982\u679c $a_i$ \u4e0d\u5728\u539f\u6765\u7684\u524d $k$ \u5c0f\u4e2d\uff0c\u5c31\u6bd4\u8f83 $a_{i+m}$ \u4e0e $[i,i+m-1]$ \u7684\u7b2c $k$ \u5c0f\u7684\u5927\u5c0f\uff0c\u5982\u679c\u524d\u8005\u66f4\u5c0f\u5c31\u8ba9\u7b54\u6848\u51cf\u6389\u540e\u8005\u52a0\u4e0a\u524d\u8005\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm> \n#define int long long\n \nusing namespace std;\n \nconst int maxn = 200010;\nint tree[20][maxn],sorted[maxn],nleft[20][maxn],cc[maxn];\n\nvoid build(int l,int r,int dep){if(l==r)return;int mid=(l+r)>>1;int same=mid-l+1;int smid=sorted[mid];for(int i=l;i<=r;i++){if(tree[dep][i]<smid){same--;}}int lpos=l,rpos=mid+1;for(int i=l;i<=r;i++){nleft[dep][i]=(i==l)?0:nleft[dep][i-1];if(tree[dep][i]<smid||tree[dep][i]==smid&&same>0){tree[dep+1][lpos++]=tree[dep][i];nleft[dep][i]++;if(tree[dep][i]==smid){same--;}}else{tree[dep+1][rpos++]=tree[dep][i];}}build(l,mid,dep+1);build(mid+1,r,dep+1);}int search(int L,int R,int l,int r,int dep,int k){if(L==R){return tree[dep][R];}int mid=(L+R)>>1;int ly=(l==L)?0:nleft[dep][l-1];int cnt=nleft[dep][r]-ly;if(k<=cnt){int newl=L+ly;int newr=L+nleft[dep][r]-1;return search(L,mid,newl,newr,dep+1,k);}else{int newl=mid+1+(l-L-ly);int newr=newl+r-l-cnt;return search(mid+1,R,newl,newr,dep+1,k-cnt);}}\n//\u4e0a\u9762\u662f\u538b\u8fc7\u884c\u7684\u5212\u5206\u6811\u677f\u5b50\nsigned main()\n{\n\tint n,m,k;\n\tcin>>n>>m>>k;\n    for(int i=1;i<=n;i++)\n    {\n    \tcin>>tree[0][i];\n       \tsorted[i]=tree[0][i];\n    }\n    sort(sorted+1,sorted+n+1);\n    int nowsum=0;\n    for(int i=1;i<=m;i++)\n    {\n    \tcc[i]=tree[0][i];\n    }\n    sort(cc+1,cc+m+1);\n    for(int i=1;i<=k;i++)\n    {\n    \tnowsum+=cc[i];\n    }\n    cout<<nowsum<<endl;\n    build(1,n,0);\n    for(int i=2;i<=n-m+1;i++)//\u9012\u63a8\uff0c\u5206\u7c7b\u8ba8\u8bba\n    {\n     \tint lastk=search(1,n,i-1,i+m-2,0,k);\n     \tif(tree[0][i-1]<=lastk)\n     \t{\n     \t\tnowsum-=tree[0][i-1];\n     \t\tif(m==k)\n     \t\t{\n     \t\t\tnowsum+=tree[0][i+m-1];\n     \t\t}\n     \t\telse\n     \t\t{\n     \t\t\tint lastqq=search(1,n,i-1,i+m-2,0,k+1);\n     \t\t\tif(tree[0][i+m-1]<lastqq)\n     \t\t\t{\n     \t\t\t\tnowsum+=tree[0][i+m-1];\n     \t\t\t}\n     \t\t\telse\n     \t\t\t{\n     \t\t\t\tnowsum+=lastqq;\n     \t\t\t}\n     \t\t}\n     \t}\n     \telse\n     \t{\n     \t\tif(tree[0][i+m-1]<=lastk)\n     \t\t{\n     \t\t\tnowsum-=lastk;\n     \t\t\tnowsum+=tree[0][i+m-1];\n     \t\t}\n     \t}\n       \tcout<<nowsum<<endl;\n    }\n\treturn 0;\n}\n```\n",
        "postTime": 1670814434,
        "uid": 529697,
        "name": "PEKKA_l",
        "ccfLevel": 6,
        "title": "ABC281E\u9898\u89e3"
    },
    {
        "content": "$\\large start$\n\n[\u535a\u5ba2\u98df\u7528\u6548\u679c\u66f4\u4f73](https://www.luogu.com.cn/blog/wizardMarshall/solution-at-abc281-e)\n\n------\n\n### \u601d\u8def\n\n\u6570\u636e\u8303\u56f4\uff1a\n\n$1 \\le K \\le M \\le N \\le 2 \\times 10^5$\n\n\u6240\u4ee5\u8bf4\uff0c\u6211\u4eec\u53ea\u80fd\u5199\u5728\u7ebf\u6027\u65f6\u95f4\u6216 $O(nlogn)$ \u5185\u7684\u7b97\u6cd5\u3002\n\n\u4e00\u4e2a\u533a\u95f4\u4e00\u4e2a\u533a\u95f4\u6765\u5751\u5b9a\u662f\u6765\u4e0d\u53ca\u6ef4\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u8fd9\u4e2a\u533a\u95f4\u548c\u4e0a\u4e00\u4e2a\u533a\u95f4\u7684\u6700\u5c0f\u503c\u5e8f\u5217\u5176\u5b9e\u6ca1\u6709\u591a\u5927\u5dee\u522b\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u7b97\u51fa\u7b2c\u4e00\u4e2a\uff0c\u7136\u540e\u4e00\u4e2a\u4e00\u4e2a\u63a8\u3002\n\n\u8fd9\u9053\u9898\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u4e24\u4e2a `set`\uff08\u9119\u4eba\u4e0d\u624d\uff0c\u4e0d\u4f1a\u5199\u7ebf\u6bb5\u6811smd\uff0c\u5c31\u732e\u4e0a\u849f\u84bb\u795e\u5668 STL \u5427\uff09\uff0c\u4e00\u4e2a `st` \u5b58\u50a8\u5f53\u524d\u533a\u95f4\u4e2d\u524d `k` \u5c0f\u7684\u6570\uff0c\u53e6\u4e00\u4e2a `ss` \u5b58\u50a8\u5176\u4ed6\u7684\u6570\u3002\n\n\u6211\u4eec\u4e00\u5f00\u59cb\u53ef\u4ee5\u5148\u6c42\u51fa\u7b2c\u4e00\u4e2a\u533a\u95f4\u7684\u524d `k` \u5927\u503c\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u679a\u4e3e\u5de6\u7aef\u70b9\u4e3a $[2,n-m+1]$\u3002\u6211\u4eec\u5148\u5904\u7406\u88ab\u6dd8\u6c70\u7684\u5143\u7d20\uff0c\u5982\u679c\u5728 `st` \u91cc\u6709\u5c31\u628a `st` \u91cc\u7684\u8e22\u51fa\u53bb\uff08\u7531\u4e8e\u6709\u91cd\u590d\u5143\u7d20**\u53ea\u8e22\u4e00\u4e2a**\uff09\uff0c\u5426\u5219 `ss` \u91cc\u7684\u8e22\u51fa\u53bb\u3002\n\n\u7136\u540e\u5904\u7406\u65b0\u5143\u7d20\uff0c\u5982\u679c\u5c0f\u4e8e `st` \u4e2d\u7684\u6700\u5927\u503c\u5c31\u52a0\u5165 `st`\uff0c\u5426\u5219\u52a0\u5165 `ss`\u3002\u6ce8\u610f\uff1a**\u8fd9\u91cc\u4e0d\u7528\u7ba1 `st` \u5143\u7d20\u7684\u6570\u91cf**\u3002\n\n\u968f\u540e\uff0c\u6211\u4eec\u5f00\u59cb\u5904\u7406\u6570\u91cf\u3002\u7531\u4e8e\u6700\u591a\u76f8\u5dee2\u4e2a\u5143\u7d20\uff0c\u6240\u4ee5\u5c31\u53ef\u4ee5\u5224\u65ad\u628a `st` \u7684\u5143\u7d20\u79fb\u5230 `ss` \uff0c\u6216\u8005\u662f\u628a `ss` \u7684\u79fb\u5230 `st`\u3002\u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u95ee\u9898\u3002\n\n\u6bcf\u6b21 `st` \u51fa\u73b0\u53d8\u52a8\u90fd\u8981\u66f4\u65b0\u7b54\u6848\u603b\u548c\u3002\n\n-----\n\n### CODE\uff1a\n\n```c\n//\u9632\u6284\u88ad\u5220\u5f00\u5934\uff0c\u4f46\u662f\u5173\u952e\u90e8\u5206\u8fd8\u662f\u5728\u7684\n#define int long long\nsigned main() {\n    int n, m, k;\n    cin >> n >> m >> k;\n    int tot = 0;\n    for (int i = 1; i <= n; i++) {\n        scanf(\"%lld\", &a[i]);\n    }for (int i = 1; i <= m; i++) {\n        t[i] = a[i];\n    }sort(t + 1, t + m + 1);\n    int nowsum = 0;\n    for (int i = 1; i <= k; i++) {\n        nowsum += t[i];\n        st.insert(t[i]);\n    }for (int i = k + 1; i <= m; i++) {\n        ss.insert(t[i]);\n    }cout << nowsum << \" \";\n    for (int i = 2; i <= n - m + 1; i++){\n        if (!st.empty() && a[i - 1] <= *(--st.end())) {\n            st.erase(st.lower_bound(a[i - 1]));\n            nowsum -= a[i - 1];\n        }else if(!ss.empty()){\n            ss.erase(ss.lower_bound(a[i - 1]));\n        }if (!st.empty() && a[i + m - 1] < *(--st.end())) {\n            st.insert(a[i + m - 1]);\n            nowsum += a[i + m - 1];\n        }else {\n            ss.insert(a[i + m - 1]);\n        }if (st.size() > k) {\n            nowsum -= *(--st.end());\n            ss.insert(*(--st.end()));\n            st.erase((--st.end()));\n        }else if (!ss.empty() && st.size() < k) {\n            nowsum += *ss.begin();\n            st.insert(*ss.begin());\n            ss.erase(ss.begin());\n        }printf(\"%lld \", nowsum);\n    }return 0;\n}\n\n```\n\n-----\n\n### PS:\n\n\u5728\u6bcf\u6b21\u5220\u9664\u5143\u7d20\u6216\u8005\u662f\u5224\u65ad\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u5148\u5224\u65ad\u8fd9\u4e2a `set` \u6216\u8005\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u662f\u5426\u975e\u7a7a\u3002\u5426\u5219\u4f1a $\\textcolor{purple}{RE}$\u3002\u672c\u4eba\u4eb2\u6d4b$\\textcolor{purple}{RE}$\u4e00\u4e2a\u70b9\u8c03\u4e86\u4e00\u5929\uff0c\u6700\u540e\u8fd8\u662f\u6c42\u52a9\u4e07\u80fd\u8c37\u6c11\u624dA\u4e86\u8fd9\u9053\u9898\u3002\n\n-----\n\n\n$\\large end$\n",
        "postTime": 1670763168,
        "uid": 474470,
        "name": "wizardMarshall62442",
        "ccfLevel": 0,
        "title": "ABC281E"
    },
    {
        "content": "vector \u53ef\u8fc7\u8d5b\u65f6\u6570\u636e\u3002\n\n\u7528 vector \u5b58\u957f\u5ea6\u4e3a$M$\u7684\u5e8f\u5217\uff0c\u6bcf\u6b21\u8f93\u51fa\u628a\u540e\u4e00\u4e2a\u6570\u63d2\u5165\u8fdb\u53bb\uff0c\u5220\u9664\u7b2c\u4e00\u4e2a\u6570\u3002\n\n\u5148\u628a\u7b2c\u4e00\u4e2a\u957f\u5ea6\u4e3a$M$\u7684\u5e8f\u5217\u653e\u5230 vector \u91cc\uff0c\u7136\u540e\u6392\u5e8f\uff0c\u628a\u7b2c\u4e00\u4e2a\u8f93\u51fa\u7b97\u51fa\u6765\u3002\u4e4b\u540e\u6bcf\u4e2a\u8f93\u51fa\u524d\u628a\u524d\u4e00\u4e2a\u5220\u6389\uff0c\u540e\u4e00\u4e2a\u63d2\u5165\u5230\u6392\u5e8f\u597d\u7684\u4f4d\u7f6e\uff08\u53ef\u4ee5\u7528 lower_bound\uff09\uff0c\u5224\u65ad\u4ee5\u4e0b\u60c5\u51b5\uff1a\n\n\u5982\u679c\u65b0\u52a0\u8fdb\u53bb\u7684\u6570\u5728$K$\u4e2a\u91cc\u9762\uff0c\u628a\u4e0a\u4e00\u4e2a\u7684\u7b54\u6848\u52a0\u4e0a\u90a3\u4e2a\u6570\u3002\u7136\u540e\u518d\u5224\u65ad\u5982\n\n\u5426\u5219\u5c31\u5224\u65ad\u5982\u679c\u53bb\u6389\u7684\u6570\u5728$K$\u91cc\u9762\uff0c\u7b54\u6848\u51cf\u53bb\u53bb\u6389\u7684\u6570\uff0c\u52a0\u4e0a vector \u7684\u7b2c$K$\u4e2a\u6570\u3002\n\n\u628a\u6bcf\u4e2a\u7b54\u6848\u8f93\u51fa\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n```\n#include<iostream>\n#include<cmath>\n#include<math.h>\n#include<stdio.h>\n#include<cstdlib>\n#include<cstdio>\n#include<string.h>\n#include<queue>\n#include<algorithm>\n#include<vector>\nusing namespace std;\nlong long n,m,k,a[200002],ans,ddd,bbb;\nvector<long long> v;\nint main()\n{\n\tcin>>n>>m>>k;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tcin>>a[i];\n\t}\n\tfor(int i=0;i<m;i++)\n\t{\n\t\tv.push_back(a[i]);\n\t}\n\tsort(v.begin(),v.end());\n\tfor(int i=0;i<k;i++)\n\t{\n\t\tans+=v[i];\n\t}\n\tcout<<ans<<' ';\n\tfor(int i=1;i+m-1<n;i++)\n\t{\n\t\tbbb=lower_bound(v.begin(),v.end(),a[i-1])-v.begin();\n\t\tv.erase(lower_bound(v.begin(),v.end(),a[i-1]));\n\t\tddd=lower_bound(v.begin(),v.end(),a[i+m-1])-v.begin();\n\t\tv.insert(lower_bound(v.begin(),v.end(),a[i+m-1]),a[i+m-1]);\n\t\tif(ddd<k)\n\t\t{\n\t\t\tans+=a[i+m-1];\n\t\t\tif(bbb>=k)\n\t\t\t{\n\t\t\t\tans-=v[k];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tans-=a[i-1];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(bbb<k)\n\t\t\t{\n\t\t\t\tans-=a[i-1];\n\t\t\t\tans+=v[k-1];\n\t\t\t}\n\t\t}\n\t\tcout<<ans<<' ';\n\t}\n}\n```\n\u5bc4",
        "postTime": 1670722855,
        "uid": 676874,
        "name": "celll",
        "ccfLevel": 0,
        "title": "AT_abc281_e\u9898\u89e3"
    }
]
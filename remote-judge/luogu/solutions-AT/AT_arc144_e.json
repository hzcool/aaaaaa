[
    {
        "content": "\u633a trivial \u53c8 OI \u5316\u7684\u4e00\u4e2a\u60f3\u6cd5\uff0c\u4f46\u662f\u6ca1\u60f3\u51fa\u6765\u3002\n\n\u9996\u5148\u8003\u8651\u786e\u5b9a\u4e86\u6240\u6709 $a_i$\u3001\u5982\u4f55\u5224\u65ad\u662f\u5426\u6240\u6709 $1\\sim n$ \u7684\u8def\u5f84\u7684\u70b9\u6743\u548c\u90fd\u662f\u4e00\u4e2a\u7ed9\u5b9a\u7684\u6570 $x$ \u7684\u500d\u6570\u3002\u9996\u5148\u70b9\u6743\u8f6c\u8fb9\u6743\u548c\u3002\u7c7b\u6bd4\u7f51\u7edc\u6d41\u5efa\u56fe\u4e2d\u7684\u62c6\u70b9\u5904\u7406\u5373\u53ef\uff0c\u8fd9\u6837\u95ee\u9898\u8f6c\u5316\u4e3a\u5224\u65ad\u662f\u5426\u6240\u6709 $1\\sim n$ \u7684\u8fb9\u6743\u548c\u662f\u5426\u90fd\u662f $x$ \u7684\u500d\u6570\u3002\n\n\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u6709\u5982\u4e0b\u7ed3\u8bba\uff1a\n\n> \u5bf9\u4e8e\u4e00\u5f20\u5e26\u6743 DAG\uff0c\u6240\u6709 $1\\sim n$ \u7684\u8def\u5f84\u7684\u8fb9\u6743\u548c\u90fd\u662f $x$ \u7684\u500d\u6570\uff0c\u5f53\u4e14\u4ec5\u5f53\u6211\u4eec\u6263\u6389\u5230\u8fbe\u4e0d\u4e86 $n$ \u548c\u4e0d\u80fd\u4ece $1$ \u5230\u8fbe\u7684\u70b9\u540e\uff0c\u5b58\u5728\u4e00\u7ec4\u5e8f\u5217 $\\{p_i\\}$\uff0c\u4f7f\u5f97\u5bf9\u4e8e\u4efb\u610f\u4e00\u6761\u8fb9 $(u,v,w)$\uff0c\u5747\u6709 $p_v-p_u\\equiv w\\pmod{x}$\u3002\n\n\u8fd9\u4e2a\u601d\u60f3\u6700\u65e9\u5728 CF241E \u4e2d\u51fa\u73b0\u3002\u5e38\u5e94\u7528\u4e8e\u5dee\u5206\u7ea6\u675f\u3002\n\n\u56de\u5230\u6b64\u9898\u6765\uff0c\u6211\u4eec\u8003\u8651\u6709 $-1$ \u7684\u60c5\u51b5\uff0c\u5148\u8003\u8651\u5982\u4f55\u5224\u65ad $x$ \u662f\u5426\u53ef\u80fd\u6210\u4e3a\u7b54\u6848\uff0c\u663e\u7136\u5bf9\u4e8e\u6240\u6709\u6743\u503c\u5df2\u7ecf\u786e\u5b9a\u7684\u8fb9 $(u,v,w)$\uff0c\u90fd\u8981\u6709 $p_v\\equiv p_u+w\\pmod{x}$\uff0c\u4f7f\u7528\u5e26\u6743\u5e76\u67e5\u96c6\u7ef4\u62a4\uff0c\u9047\u5230\u73af\u5c31\u5224\u4e00\u4e0b\u8d77\u70b9\u548c\u7ec8\u70b9\u662f\u5426\u52bf\u80fd\u76f8\u7b49\u5373\u53ef\u3002\u81f3\u4e8e\u6c42\u6700\u5927\u7684 $x$\uff0c\u663e\u7136\u6211\u4eec check \u4e00\u4e2a $x$ \u662f\u5426\u5408\u6cd5\u7684\u65f6\u5019\uff0c\u7b49\u4ef7\u4e8e check $x$ \u662f\u5426\u662f\u4e00\u5806\u6570\u4e2d\u6240\u6709\u6570\u7684\u56e0\u6570\uff0c\u8fd9\u6837\u4f60\u53ea\u7528\u5bf9\u8fd9\u4e9b\u6570\u6c42 $\\gcd$ \u5373\u53ef\uff0c\u8fd8\u662f\u4f7f\u7528\u53ef\u6301\u4e45\u5316\u5e76\u67e5\u96c6\u7ef4\u62a4\u3002",
        "postTime": 1671607103,
        "uid": 115194,
        "name": "lTgMFePRoeZ",
        "ccfLevel": 9,
        "title": "arc144E"
    },
    {
        "content": "\u6b22\u8fce\u6765\u5eb7\u5eb7\u849f\u84bb\u7684\u535a\u5ba2\uff0c\u83b7\u5f97\u66f4\u4f73\u9605\u8bfb\u4f53\u9a8cQAQ\n\nhttps://juejin.cn/post/7189800442858045495\n# \u9898\u76ee\u5927\u610f\n\u7ed9\u5b9a\u6709 $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u6709\u5411\u65e0\u73af\u56fe\uff0c\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u6574\u6570\u6570\u7ec4 $a_1,a_2,...,a_n$\u3002\u82e5 $a_i(1\\le i\\le n)$ \u4e3a $-1$\uff0c\u8bf4\u660e\u56fe\u4e2d\u7b2c $i$ \u4e2a\u8282\u70b9\u7684\u70b9\u6743\u672a\u77e5\uff0c\u5426\u5219\u8bf4\u660e\u8be5\u70b9\u7684\u70b9\u6743\u4e3a $i$\u3002\u4e3a\u70b9\u6743\u672a\u77e5\u7684\u8282\u70b9\u8d4b\u503c\uff0c\u6700\u5927\u5316\u4ece\u8282\u70b9 $1$ \u5230\u8282\u70b9 $n$ \u4e4b\u95f4\u6240\u6709\u8def\u5f84\u70b9\u6743\u548c\u7684\u6700\u5927\u516c\u7ea6\u6570\u3002\n\n\u82e5\u4e0d\u5b58\u5728\u6700\u5927\u7684\u7b54\u6848\uff0c\u8f93\u51fa `-1`\u3002\n# \u601d\u8def\n\u5bb9\u6613\u53d1\u73b0\u56fe\u4e2d $1$ \u65e0\u6cd5\u5230\u8fbe\u3001\u6216\u8005\u65e0\u6cd5\u5230\u8fbe $n$ \u7684\u8282\u70b9\u5bf9\u7b54\u6848\u6ca1\u6709\u5f71\u54cd\uff0c\u53ef\u4ee5\u76f4\u63a5\u5220\u53bb\u3002\u7136\u540e\u6211\u4eec\u8fdb\u884c\u4e00\u6b65\u8f6c\u5316\uff0c\u8def\u5f84\u70b9\u6743\u548c\u8ba9\u4eba\u65e0\u4ece\u4e0b\u624b\uff0c\u6211\u4eec\u5148\u628a\u6bcf\u4e2a\u8282\u70b9\u62c6\u6210\u4e24\u4e2a\u8282\u70b9\uff0c\u5219\u70b9\u6743\u8f6c\u53d8\u4e3a\u8fb9\u6743\u3002\u6bd4\u5982\u6837\u4f8b $1$:\n```in\n4 4\n1 2\n1 3\n2 4\n3 4\n-1 3 7 -1\n```\n\u6211\u4eec\u8f6c\u5316\u540e\u5efa\u51fa\u7684\u56fe\u4e3a\uff1a\n\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/291775a5965443bea41e203534ab4400~tplv-k3u1fbpfcp-watermark.image?)\n\n\u5047\u8bbe\u4ece\u8282\u70b9 $1$ \u5230\u8282\u70b9 $n$ \u4e4b\u95f4\u6240\u6709\u8def\u5f84\u8fb9\u6743\u548c\u90fd\u662f\u00a0$x$\u00a0\u7684\u500d\u6570\uff0c\u90a3\u4e48\u4e00\u5b9a\u53ef\u4ee5\u7ed9\u6bcf\u4e2a\u70b9\u5206\u914d\u4e00\u4e2a\u6743\u503c $p_1,p_2,,...,p_n$\uff0c\u4f7f\u5f97\u5bf9\u6bcf\u6761\u6709\u6743\u503c\u7684\u6709\u5411\u8fb9\u00a0$(u,v,w)$\uff0c\u90fd\u6ee1\u8db3\u00a0$p_v\\equiv p_u+w\\pmod x$\u3002\u56e0\u4e3a\u6211\u4eec\u53ea\u5173\u5fc3\u6709\u5411\u8fb9\u4e24\u7aef\u70b9\u6743\u503c\u7684\u76f8\u5bf9\u5927\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u52a0\u6743\u5e76\u67e5\u96c6\u8fdb\u884c\u7ef4\u62a4\uff1a\\\n\u8bb0 $f[x]$ \u8868\u793a $x$ \u5728\u52a0\u6743\u5e76\u67e5\u96c6\u4e2d\u7684\u7236\u8282\u70b9\uff0c$dt[x]$ \u8868\u793a $p_x+dt[x]\\equiv p_{f[x]}\\pmod x$\u3002\\\n\u8def\u5f84\u538b\u7f29\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u76f4\u63a5\u4ee4 $dt$ \u76f8\u52a0\u5373\u53ef\uff1a\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/51f2c943ea7047b696e9eba91548aea3~tplv-k3u1fbpfcp-watermark.image?)\n------\n\u6240\u4ee5\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u4e24\u70b9\u4e4b\u95f4\u7684\u5dee\u6709\u4ec0\u4e48\u7528\u5904\u5462\uff1f\u4e0b\u9762\u6211\u4eec\u6765\u8bf4\u660e\u6c42\u89e3\u8be5\u95ee\u9898\u7684\u5177\u4f53\u6d41\u7a0b\u3002\n\n\u9996\u5148\u6211\u4eec\u5148\u5c06\u539f\u56fe\u4e2d\u7684\u8fb9\u52a0\u5165\u5230\u52a0\u6743\u5e76\u67e5\u96c6\u4e2d\uff0c\u8fd9\u4e9b\u8fb9\u7684\u8fb9\u6743\u5747\u4e3a $0$\u3002\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d038e9fdb5c4df8923e37a4f5bce4f3~tplv-k3u1fbpfcp-watermark.image?)\n\n\u7136\u540e\u5bf9\u4e8e\u8f93\u5165\u7684\u65e7\u56fe\u4e0a\u7b2c $i$ \u4e2a\u70b9\u7684\u70b9\u6743 $a_i$\uff0c\u4e5f\u5c31\u662f\u8f6c\u5316\u540e\u70b9 $i.1$ \u548c $i.2$ \u4e4b\u95f4\u7684\u8fb9\u6743\uff0c\u5148\u67e5\u8be2\u4e24\u79cd\u662f\u5426\u5728\u540c\u4e00\u4e2a\u5e76\u67e5\u96c6\u4e2d\uff1a\n- \u5982\u679c\u4e0d\u5728\uff0c\u9700\u8981\u8fdb\u884c\u5408\u5e76\u3002\n\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e17304d9c3d4b39913a607cb51bf185~tplv-k3u1fbpfcp-watermark.image?)\n- \u5982\u679c\u5728\uff0c\u8bf4\u660e $dt[i.1]\\equiv dt[i.2]+a[i]\\mod x$\uff0c\u6240\u4ee5\u6700\u540e\u7684\u7b54\u6848\u662f $|dt[i.2]+a[i]-dt[i.1]|$ \u7684\u56e0\u6570\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u627e\u5230\u6240\u6709\u7ed9\u5b9a\u70b9\u6743\u5bf9\u7b54\u6848\u8fdb\u884c\u7684\u9650\u5236\u4e86\uff0c\u663e\u7136\u6211\u4eec\u81ea\u5df1\u4e71\u586b\u7684\u70b9\u6743\u4e0d\u4f1a\u7ed9\u7b54\u6848\u66f4\u591a\u9650\u5236\uff0c\u6240\u4ee5\u5bf9\u6240\u6709\u9650\u5236\u53d6\u6700\u5927\u516c\u7ea6\u6570\u5373\u53ef\u3002\u6ce8\u610f\u5982\u679c\u4ece\u8282\u70b9 $1$ \u80fd\u76f4\u63a5\u901a\u8fc7\u786e\u5b9a\u8fb9\u6743\u7684\u8def\u5f84\u5230\u8fbe\u8282\u70b9 $n$\uff0c\u90a3\u4e48\u6700\u7ec8\u7684\u7b54\u6848\u8fd8\u9700\u8981\u4e0e\u4efb\u4e00\u4ece\u8282\u70b9 $1$ \u5230\u8282\u70b9 $n$ \u7684\u8def\u5f84\u957f\u5ea6\u53d6\u6700\u5927\u516c\u7ea6\u6570\uff08\u89c1\u6837\u4f8b $4$\uff09\u3002\n\n# \u4ee3\u7801\n```cpp\n#include <stdio.h>\n#include <algorithm>\n#include <string.h>\n#include <iostream>\n#include <math.h>\n#include <map>\n#include <queue>\n#include <vector>\n#include <stdlib.h>\n#include <time.h>\nusing namespace std;\nusing LL=long long;\nconst int N=1e6+5;\n//const LL mod=998244353;\nconst LL mod=1e9+7;\nint n,m,k,x[N],y[N];\nLL a[N],dt[N];\nint f[N],vis[N],vv[N];\nvector<int> e[N];\nint find(int x)\n{\n\tif (f[x]==x) return x;\n\tfind(f[x]);\n\tdt[x]=dt[x]+dt[f[x]];\n\treturn f[x]=f[f[x]];\n}\nvoid dfs(int u)\n{\n\tvv[u]=1;\n\tif (u==n) vis[u]=1;\n\tfor (auto v:e[u])\n\t{\n\t\tif (!vv[v]) dfs(v);\n\t\tif (vis[v]) vis[u]=1;\n\t}\n}\nLL gcd(LL a,LL b)\n{\n\tif (b) return gcd(b,a%b);\n\treturn a;\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n*2;++i) f[i]=i;\n\tfor (int i=1;i<=m;++i)\n\t{\n\t\tscanf(\"%d%d\",&x[i],&y[i]);\n\t\te[x[i]].push_back(y[i]);\n\t}\n\tdfs(1);\n\tif (!vis[n]) return printf(\"-1\\n\"),0;\n\tfor (int i=1;i<=m;++i)\n\t\tif (vis[x[i]]&&vis[y[i]]) f[find(x[i]*2)]=find(y[i]*2-1);\n\tLL ans=0;\n\tfor (int i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%lld\",&a[i]);\n\t\tif (!vis[i]) continue;\n\t\tif (a[i]==-1) continue;\n\t\tif (find(i*2-1)!=find(i*2))\n\t\t{\n\t\t\tdt[f[i*2-1]]=a[i]-dt[i*2-1];\n\t\t\tf[f[i*2-1]]=i*2;\n\t\t}\n\t\telse ans=gcd(ans,abs(dt[i*2]+a[i]-dt[i*2-1]));\n\t}\n\tif (find(1)==(n*2)) ans=gcd(ans,dt[1]);\n\tif (ans==0) ans--;\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1674006261,
        "uid": 23035,
        "name": "Ice_teapoy",
        "ccfLevel": 6,
        "title": "\u3010Atcoder\u3011AtCoder Regular Contest 144 E - GCD of Path Weights | \u56fe\u8bba\u3001\u6784\u9020"
    }
]
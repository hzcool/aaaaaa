[
    {
        "content": "$\\ \\ \\ \\ \\ \\ $\u91cd\u9898\u540cP3615\n\n$\\ \\ \\ \\ \\ \\ $[\u539f\u9898\u9762\u6233\u6211](https://www.ioi-jp.org/camp/2016/2016-sp-tasks/2016-sp-d2.pdf)\n\n---\n\n$\\ \\ \\ \\ \\ \\ $\u56e0\u4e3a\u8fd9\u9053\u9898\u6211\u4eec\u7684\u5e8f\u5217\u662f\u590d\u8bfb\u7ed9\u51fa\u6765\u7684\uff0c\u6240\u4ee5\u5f88\u957f\uff0c\u4e0d\u4f1a\u60f3\u5230\u628a\u5e8f\u5217\u8fd8\u539f\u3002\n\n$\\ \\ \\ \\ \\ \\ $\u8003\u8651\u6211\u4eec\u7684\u65f6\u95f4\u548c\u6211\u4eec\u7684\u4eba\uff0c\u56e0\u4e3a\u6709$2n$\u4e2a\u4eba\u53ea\u6709$n$\u5206\u949f\uff0c\u6240\u4ee5\u6bcf\u65f6\u6bcf\u523b\u5395\u6240\u5fc5\u987b\u6709\u4eba\u8e72\u5751\u3002\n\n$\\ \\ \\ \\ \\ \\ $\u4e8e\u662f\u4e4e\uff0c\u6211\u4eec\u53ef\u4ee5\u5012\u63a8\u56de\u53bb\uff0c\u6211\u4eec\u5c31\u80fd\u591f\u60f3\u5230\u540e\u7f00\u548c\uff0c\u628a\u7537\u751f\u8bbe\u4e3a$1$\uff0c\u5973\u751f\u8bbe\u4e3a$-1$\uff0c\u8fdb\u884c\u4e00\u6b21\u540e\u7f00\u548c\u3002   \n$\\ \\ \\ \\ \\ \\ $\u6211\u4eec\u60ca\u5947\u5730\u53d1\u73b0\u5982\u679c\u6211\u4eec\u7684\u540e\u7f00\u548c\u5728\u67d0\u4e00\u65f6\u523b\u53d1\u751f\u4e86\u503c\u662f\u5927\u4e8e\u7b49\u4e8e$2$\uff0c\u90a3\u4e48\u53ea\u6709\u4e24\u4e2a\u7537\u751f\u8003\u8651\u4e00\u8d77\u4e0a\u4e86\uff0c\u8fd9\u65f6\u76f4\u63a5\u8f93\u51fa$-1$\u3002\n\n$\\ \\ \\ \\ \\ \\ $\u8fd9\u4e48\u8bf4\uff0c\u6211\u4eec\u80fd\u591f\u53d1\u73b0\u6211\u4eec\u8981\u8ba9\u961f\u5217\u5408\u6cd5\uff0c\u5f53\u4e14\u4ec5\u5f53$i \\in [1,n]$\uff0c\u4ece\u540e\u5f80\u524d\u7684\u7b2c$i$\u4e2a\u5973\u751f\u5728\u4ece\u540e\u5f80\u524d\u7684$2i$\u4e2a\u4f4d\u7f6e\u53ca\u4ee5\u5916\u3002\n\n$\\ \\ \\ \\ \\ \\ $\u7136\u540e\u8003\u8651\u8ba1\u7b97\u6211\u4eec\u7684\u7b54\u6848\u3002\u6211\u4eec\u8fd8\u662f\u9009\u62e9\u5012\u63a8\u3002\u5f53\u524d\u5982\u679c\u6211\u4eec\u9047\u5230\u4e00\u4e2a\u5973\u751f\u5728\u4ece\u540e\u5f80\u524d\u7684\u7b2c$i$\u4e2a\u4f4d\u7f6e\uff0c\u6211\u4eec\u53d1\u73b0\u628a\u5979\u79fb\u5230\u4ece\u540e\u5f80\u524d\u7b2c$2i$\u4e2a\u4f4d\u7f6e\u662f\u6700\u4f18\u7684\uff08\u56e0\u4e3a\u6ca1\u4eba\u7ad9\u5979\u7684\u4f4d\u7f6e\uff0c\u5e76\u4e14\u5982\u679c\u66f4\u8fdc\uff0c\u7b54\u6848\u8d8a\u5927\uff09\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5$\\Theta(n)$\u8ba1\u7b97\u7b54\u6848\n\n$\\ \\ \\ \\ \\ \\ $\u6b63\u5982kkk\u6240\u8bf4\u7684\n\n>\u6211\u4eec\u53ef\u4ee5\u753b\u4e00\u4e2a\u6298\u7ebf\u56fe\uff0c\u8bb0\u5f55\u540e\u7f00\u548c\u66f2\u7ebf\uff08\u8bf7\u8bfb\u8005\u81ea\u5907\u7eb8\u7b14\uff09\uff0c\u4ece\u540e\u5f80\u524d\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6bcf\u5c06\u4e00\u4e2a\u7537\u7684\u79fb\u52a8\u5230\u524d\u9762\u53bb\uff0c\u6298\u7ebf\u56fe\u5c31\u4f1a\u6574\u4f53\u5f80\u4e0a\u9762\u79fb\u52a81\u3002\u6240\u4ee5\u8bf4\uff0c\u6211\u4eec\u53ea\u8981\u8ba1\u7b97\u6574\u4e2a\u5e8f\u5217\u4e2d\u540e\u7f00\u548c\u6700\u5c0f\u503c\u662f\u591a\u5c11\u3002\u6bcf\u4e00\u4e2a\u5c0f\u6bb5\u90fd\u53ef\u4ee5\u7b97\u51fa\u540e\u7f00\u548c\u7684\u8d21\u732e\uff0c\u7136\u540e\u6211\u4eec\u5c31$\\Theta(M+\\sum^n_{i=1} (S_i))$\u53ef\u4ee5\u6c42\u51fa\u8fd9\u4e2a\u503c\uff0c\u5047\u8bbe\u662f$-k$\u3002\u90a3\u4e48\u6700\u7ec8\u7b54\u6848\u5c31\u662f$k-1$\u3002\n\n$\\ \\ \\ \\ \\ \\ $\u4e8e\u6b64\uff0c\u6211\u4eec\u5c06\u4ece\u540e\u5f80\u524d\u6570\u7684\u7b2c$i$\u4e2a\u5973\u751f\u5339\u914d\u5728\u7b2c$2i$\u4e2a\u4f4d\u7f6e\uff0c\u5f53\u524d\u5904\u7406\u7684\u957f\u5ea6\u4e3a$a$\u7684\uff0c\u5176\u4e2d\u5973\u751f\u6709$b$\u4e2a\u7684\u8bdd\uff0c\u5bf9\u4e8e\u6bcf\u6b21$repeat$\uff0c\u6211\u4eec\u5339\u914d\u7684\u4f4d\u7f6e\u4e5f\u4f1a\u76f8\u5bf9\u79fb\u52a8$2b-a$\n\n$\\ \\ \\ \\ \\ \\ $\u6211\u4eec\u53ea\u9700\u8981\u8ba1\u7b97\u6700\u5927\u4e0d\u6ee1\u503c\uff0c\u5982\u679c$2b-a>0$\u8003\u8651\u7b2c\u4e00\u6b21$repeat$\uff0c\u5426\u5219\u8003\u8651\u6700\u540e\u4e00\u6b21\n\n$\\ \\ \\ \\ \\ \\ $\u65f6\u95f4\u590d\u6742\u5ea6$\\Theta(m+\\sum_{i=1}^n)$\uff0c\u81f3\u6b64\u6211\u4eec\u7684\u9898\u76ee\u5b8c\u7f8e\u89e3\u51b3\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<string>\n#include<iostream>\n#include<cstring>\nusing namespace std;\nstring p;\nlong long bak[100005],mbak[100005],cnt=1,k[100005];\nint main(){\n\tlong long n,m;\n\tcin>>n>>m;\n\tlong long check=0;\n\tfor(long long i=1;i<=m;++i)\n\t{\n\t\tcin>>p>>k[i];\n\t\tfor(long long j=p.length()-1;~j;--j)\n\t\t{\n\t\t\tif(p[j]=='F')\t--bak[i];\n\t\t\telse\t++bak[i];\n\t\t\tmbak[i]=max(mbak[i],bak[i]);\n\t\t}\n\t\tcheck+=bak[i]*k[i];\n\t}\n\tif(check>0)\n\t{\n\t\tcout<<-1<<endl;\n\t\treturn 0;\n\t}\n\tlong long ans=1,calc=0;\n\tfor(long long i=m;i>=1;--i)\n\t{\n\t\tif(bak[i]>0)\tans=max(ans,calc+(k[i]-1)*bak[i]+mbak[i]);\n\t\telse\tans=max(ans,calc+mbak[i]);\n\t\tcalc+=bak[i]*k[i];\n\t}\n\tcout<<ans-1<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1575719166,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AT1830 \u3010\u30c8\u30a4\u30ec\u3011"
    }
]
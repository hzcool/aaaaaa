[
    {
        "content": "### ARC043C \u8ee2\u5012\u8ddd\u96e2\n\n> \u5b9a\u4e49\u4e24\u4e2a\u6392\u5217 $A, B$ \u7684\u8ddd\u79bb\u4e3a\u6ee1\u8db3 $(i, j)$ \u5728 $A, B$ \u4e2d\u987a\u5e8f\u76f8\u53cd\u7684\u65e0\u5e8f\u5bf9\u6570\u3002\u73b0\u5728\u7ed9\u5b9a\u6392\u5217 $A$ \u548c $B$\uff0c\u6784\u9020\u4e00\u4e2a\u6392\u5217 $C$ \u4f7f\u5f97 $dis(A, C) = dis(B, C)$\u3002\n\n\u82e5 $(i, j)$ \u5728 $A,B$ \u4e2d\u7684\u76f8\u5bf9\u4f4d\u7f6e\u76f8\u540c\uff0c\u5219\u5bf9 $dis(A, C)$ \u548c $dis(B, C)$ \u6709\u76f8\u540c\u7684\u8d21\u732e\u3002\u82e5\u4e0d\u540c\uff0c\u5219\u5bf9\u5176\u4e2d\u4e00\u4e2a\u6709 $1$ \u7684\u8d21\u732e\u3002\u5bb9\u6613\u53d1\u73b0\u6709\u89e3\u5f53\u4e14\u4ec5\u5f53 $dis(A, B)$ \u4e3a\u5076\u6570\u3002\u5c06 $A$ \u6620\u5c04\u4e3a $1, 2\\dots n$\u3002\u5219 $dis(A, B)$ \u7b49\u4e8e $B$ \u7684\u9006\u5e8f\u5bf9\u6570\uff0c\u8bbe\u4e3a $s$\u3002\n\n\u73b0\u5728\u6211\u4eec\u8981\u6784\u9020\u4e00\u4e2a $C$ \u4f7f\u5f97 $B$ \u4e2d\u4e00\u534a\u7684\u9006\u5e8f\u5bf9\u53d8\u6210\u6b63\u5e8f\u5bf9\u3002\u8bbe $p$ \u4e3a\u6700\u65e9\u6ee1\u8db3 $[1, p]$ \u4e2d\u9006\u5e8f\u5bf9\u6570\u5927\u4e8e $\\frac s2$ \u7684\u4f4d\u7f6e\u3002\u5c06 $1$ \u5230 $p - 1$ \u6392\u5e8f\uff0c\u518d\u5c06 $p$ \u63d2\u5165\u5230\u4e2d\u95f4\u5373\u53ef\u3002\n\n\u770b\u4ee3\u7801\u5e94\u8be5\u597d\u61c2\u4e00\u4e9b\u5427\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\nconst int N = 1e5 + 10;\n\ntemplate<typename T = int> inline T read()\n{\n    T x = 0, f = 0; char ch = getchar();\n    while (!isdigit(ch)) f |= ch == '-', ch = getchar();\n    while ( isdigit(ch)) x = x * 10 + ch - '0', ch = getchar();\n    return f ? -x : x;\n}\n\nstruct BIT\n{\n    int f[N];\n    #define lowbit(x) (x & -x)\n\n    inline void Add(int x, int dat = 1)\n    {\n        for (; x < N; x += lowbit(x)) f[x] += dat;\n    }\n\n    inline int Ask(int x)\n    {\n        int res = 0;\n        for (; x; x -= lowbit(x)) res += f[x];\n        return res;\n    }\n}T;\n\nint a[N], A[N], b[N], s[N];\n\nint main()\n{\n    int n = read(), p = 0; int64_t sum = 0;\n    for (int i = 1; i <= n; ++i) a[A[i] = read()] = i;\n    for (int i = 1; i <= n; ++i) b[i] = a[read()];\n    for (int i = 1; i <= n; ++i) s[i] = T.Ask(N - 1) - T.Ask(b[i]), T.Add(b[i]);\n    for (int i = 1; i <= n; ++i) sum += s[i];\n    if (sum & 1) return puts(\"-1\"), 0; sum >>= 1;\n    for (int i = 1; i <= n; ++i)\n    {\n        if (sum < s[i]) {p = i; break;}\n        sum -= s[i];\n    }\n    std::sort(b + 1, b + p);\n    for (int i = 1; i <= sum; ++i) std::swap(b[p], b[p - 1]), --p;\n    for (int i = 1; i <= n; ++i) printf(\"%d \", A[b[i]]); puts(\"\");\n    return 0;\n}\n\n```\n",
        "postTime": 1606962078,
        "uid": 68387,
        "name": "lamboo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT1440 \u3010\u8ee2\u5012\u8ddd\u96e2\u3011"
    },
    {
        "content": "\u4e00\u9053\u6bd4\u8f83\u6709\u8da3\u7684\u6784\u9020.\n\n\u9898\u610f\n\n\u5b9a\u4e49\u4e24\u4e2a\u6392\u5217\u7684\u98a0\u5012\u503c\u4e3a$(i,j)(i\\in[1,n],j\\in[1,n] $&&$ i<j)$ \u4e14$i ,j$\u6ee1\u8db3\n\n$i,j$\u5728$A$\u7684\u524d\u540e\u987a\u5e8f\u4e0e$i,j$\u5728$B$\u7684\u524d\u540e\u987a\u5e8f\u76f8\u53cd\n\n\u7136\u540e\u6c42\u6784\u9020\u4e00\u4e2a\u6392\u5217$C$\u6ee1\u8db3 $A,C$\u7684\u98a0\u5012\u503c= $B,C$\u7684\u98a0\u5012\u503c\n\n\u9996\u5148\u6211\u4eec\u8981\u77e5\u9053\u5982\u4f55\u5feb\u901f\u7684\u6c42\u4e24\u4e2a\u5e8f\u5217\u4e4b\u95f4\u7684\u8ee2\u5012\u8ddd\u96e2,\u6211\u4eec\u5c06$a[i],b[i]$\u5148\u79bb\u6563\u5230\u5bf9\u5e94$c[i]$\u4e2d($c[i]$\u8868\u793a$b[i]$\u5728$a[i]$\u7684\u6876\u7684\u51fa\u73b0\u4f4d\u7f6e),\u7136\u540e\u518d\u6c42\u4e00\u4e2a\u9006\u5e8f\u5bf9,\u5c31\u53ef\u4ee5\u77e5\u9053\u4e24\u4e2a\u5e8f\u5217\u7684\u8ee2\u5012\u8ddd\u96e2.\n\n\u5177\u4f53\u7684\u6211\u4e0d\u662f\u5f88\u4f1a\u63cf\u8ff0,\u4e0d\u8fc7\u5927\u5bb6\u770b\u4ee3\u7801\u5e94\u8be5\u53ef\u4ee5\u660e\u767d()\n\n```cpp\n\trep(i,1,n)a[rd()]=i;\n\trep(i,1,n)b[i]=rd(),c[i]=a[b[i]];\n    //\u5c06b[i]\u79bb\u6563\u5230a[i]\u7684\u6876\u4e2d. \n \n```\n\n\u4e00\u4e2a\u6bd4\u8f83\u660e\u663e\u7684\u7ed3\u8bba\u5c31\u662f\u5982\u679c\u5bf9\u4e8e\u4e00\u4e2a\u65e0\u5e8f\u5bf9(i,j),\u5b83\u5728A\u4e2d\u4e0e\u5728B\u4e2d\u7684\u5148\u540e\u987a\u5e8f\u76f8\u540c\u7684\u8bdd,\u90a3\u4e48\u5bf9\u4e8e$A,C$\u4e0e$B,C$\u7684$(i,j)$\u5b83\u7684\u8d21\u732e\u4e00\u5b9a\u662f\u76f8\u540c\u7684,\u6211\u4eec\u5c06\u5176\u5bf9\u5e94\u5230\u6211\u4eec\u7684\u79bb\u6563\u6570\u7ec4\u4e2d,\u4e5f\u5c31\u662f $c[i]<c[j]$\u4e14$i<j$\u65f6$(b[i],b[j])$\u8fd9\u4e2a\u65e0\u5e8f\u5bf9\u4e0d\u4f1a\u6709\u8d21\u732e.\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u6c42\u51fa$A,B$\u4e4b\u95f4\u7684\u8ee2\u5012\u8ddd\u96e2,\u7136\u540e\u8003\u8651\u5982\u4f55\u6784\u9020\u4e00\u4e2a\u5408\u6cd5\u7684$C$.\n\n\n\u6211\u4eec\u53d1\u73b0\u5982\u679c$A$,$B$\u4e4b\u95f4\u7684\u98a0\u5012\u8ddd\u79bb($c$\u4e2d\u9006\u5e8f\u5bf9\u4e2a\u6570)\u4e3a\u5947\u6570\u7684\u8bdd,\u5b83\u4e00\u5b9a\u662f\u4e0d\u5408\u6cd5\u7684,\u8f93\u51fa$-1$.\n\n\u6211\u4eec\u8003\u8651\u5bf9\u4e8e$c$\u4e2d\u7684\u9006\u5e8f\u5bf9,\u5982\u679c\u5b83\u5728\u65b0\u7684$C$\u4e2d\u53d8\u4e3a\u987a\u5e8f\u5bf9\u90a3\u4e48\u4f1a\u5bf9$B$\u4ea7\u751f$1$\u7684\u8d21\u732e,\u5426\u5219\u4f1a\u5bf9$A$\u4ea7\u751f$1$\u7684\u8d21\u732e.\n\n\u4e00\u4e2a\u5408\u6cd5\u7684\u6784\u9020\u5c31\u662f\u539f$c$\u4e2d\u9006\u5e8f\u5bf9,\u5bf9$A$\u4e0e$B$\u8d21\u732e\u76f8\u540c\u65f6\u7684\u60c5\u51b5.\n\n\u5047\u8bbec\u4e2d\u9006\u5e8f\u5bf9\u4e2a\u6570\u4e3a$sum$\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06$sum/2$,\u7136\u540e\u5c06$sum/2$\u4e2a\u9006\u5e8f\u5bf9\u53d8\u4e3a\u987a\u5e8f\u5bf9.\n\n\u8bbe\u5bf9\u4e8e\u6bcf\u4e2a$i,j<i(j,i)$\u4e3a\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\u4e3a$s[i]$\n\n\u5982\u4f55\u8fdb\u884c\u64cd\u4f5c\u5462,\u6211\u4eec\u5982\u679c\u5c06$1$~$mx$\u53cd\u8f6c\u90a3\u4e48\u4f1a\u5c06\u539f\u6765\u7684$\\sum_{i=1}^{mx}s[i]$\u9006\u5e8f\u5bf9\u53d8\u4e3a\u987a\u5e8f\u5bf9,\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u679a\u4e3e$mx$\u5728\u54ea\u91cc\u5373\u53ef\n\n\u5982\u679c\u6700\u540e\u4e2a\u6570\u4e0d\u591f\u4e86,\u518d$for$\u5faa\u73af\u5bfb\u627e\u6700\u540e\u4e00\u4e2a\u6570\u9700\u8981\u63d2\u5165\u7684\u4f4d\u7f6e\u5373\u53ef\n\n\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=114514;\n#define rep(i,j,k) for(int i=(j);i<=(k);i++)\nint rd(){\n\tint x=0,f=1;char c=getchar();\n\twhile(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\n\twhile(isdigit(c)){x=x*10+c-'0';c=getchar();}\n\treturn x*f;\n}\nint ans[N],a[N],b[N],c[N],tr[N];\nint n,mx,cnt,sp;long long sum,s[N];\nint lb(int x){return x&(-x);}\nvoid add(int x){while(x)tr[x]++,x-=lb(x);}\nint ask(int x){int k=0;while(x<=n)k+=tr[x],x+=lb(x);return k;}\n//\u6811\u72b6\u6570\u7ec4\u7edf\u8ba1\u9006\u5e8f\u5bf9 \nint main(){n=rd();\n\trep(i,1,n)a[rd()]=i;\n\trep(i,1,n)b[i]=rd(),c[i]=a[b[i]];//\u5c06b[i]\u79bb\u6563\u5230a[i]\u7684\u6876\u4e2d. \n\trep(i,1,n)add(c[i]),s[i]=ask(c[i]+1),sum+=s[i];\n\tif(sum&1){puts(\"-1\");return 0;}sum/=2;\n\trep(i,1,n)if(s[i]){\n\t\tif(s[i]<sum)sum-=s[i];\n\t\telse{if(s[i]==sum)mx=i,sum=0;\n\t\t\telse mx=i-1;break;\n\t\t} \n\t}//\u5bfb\u627e\u9700\u8981\u7ffb\u8f6c\u7684\u4f4d\u7f6e \n\trep(i,1,mx/2)swap(b[i],b[mx-i+1]),swap(c[i],c[mx-i+1]);\n\tif(sum){sum=s[mx+1]-sum;//\u5982\u679csum\u591a\u4f59\u4f46\u6bd4s[mx+1]\u5c0f,\u66b4\u529b\u5bfb\u627e\u63d2\u5165\u7684\u4f4d\u7f6e \n\t\trep(i,1,mx){if(c[i]>c[mx+1])cnt++;\n\t\t\tif(cnt==sum){sp=i;break;}\n\t\t}\n\t}rep(i,1,n){if(sp&&i==mx+1)continue;\n\t\tprintf(\"%d \",b[i]);if(sp==i)printf(\"%d \",b[mx+1]);\n\t}\n}\n```\n\n",
        "postTime": 1606481923,
        "uid": 53852,
        "name": "\u5f26\u5dfb\u3053\u3053\u308d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT1440 \u3010\u8ee2\u5012\u8ddd\u96e2\u3011"
    }
]
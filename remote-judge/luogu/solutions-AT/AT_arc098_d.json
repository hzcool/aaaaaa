[
    {
        "content": "**\u9898\u610f** \uff1a \u7ed9\u51fa\u4e00\u5f20 $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u65e0\u5411\u8fde\u901a\u56fe\u3002\n\n\u70b9 $u$ \u6709\u4e24\u53c2\u6570 $A_u,B_u$\u3002\u5f53\u4f60\u7ecf\u8fc7\u8be5\u70b9\u65f6\uff0c\u5fc5\u987b\u81f3\u5c11\u62e5\u6709 $A_u$ \u5143\uff0c\u5728\u8be5\u70b9\u6253\u5361\u9700\u8981\u82b1\u8d39 $B_u$ \u5143\u3002\n\n\u4f60\u53ef\u4ee5\u4ece\u4efb\u610f\u70b9\u5f00\u59cb\u65c5\u7a0b\u3002\u4f60\u9700\u8981\u5728\u6240\u6709\u70b9\u6253\u5361\u4e00\u6b21\uff0c\u95ee\u521d\u59cb\u65f6\u6700\u5c11\u9700\u8981\u643a\u5e26\u591a\u5c11\u5143\u3002\n\n$n\\leq 10^5$ \uff0c\u65f6\u9650$\\texttt{2s}$\u3002\n\n------------\n\n\u5f88\u6709\u610f\u601d\u7684\u4e00\u4e2a\u9898\u3002\n\n- **\u6027\u8d28** \uff1a \u5728\u67d0\u70b9\u6253\u5361\u540e\u5fc5\u4e0d\u4f1a\u518d\u6b21\u8bbf\u95ee\u67d0\u70b9\u3002\n\n  **\u89e3\u91ca** \uff1a\u4e0d\u96be\u53d1\u73b0\uff0c\u65c5\u884c\u4e2d\u7684\u94b1\u6570\u662f\u5355\u8c03\u4e0d\u589e\u7684\u3002\n  \n  \u82e5\u4e24\u6b21\u8bbf\u95ee\u67d0\u70b9\uff0c\u7b2c\u4e00\u6b21\u4e0d\u6253\u5361\uff0c\u7b2c\u4e8c\u6b21\u6253\u5361\u8981\u6bd4\u7b2c\u4e00\u6b21\u5c31\u6253\u5361\u4f18\uff0c\u56e0\u4e3a\u4e2d\u95f4\u7684\u4e00\u6bb5\u8def\u7a0b\u4f59\u94b1\u66f4\u591a\u3002\n  \n\u82e5\u9075\u5b88\u4e0a\u8ff0\u7b56\u7565\uff0c\u4ee4 $C_u=\\max(A_u-B_u,0)$ \uff0c\u7ea6\u675f\u53ef\u4ee5\u7b49\u4ef7\u4e8e \uff1a \u5728 $u$ \u70b9\u7684\u6240\u6709\u65f6\u523b\u94b1\u6570\u90fd $\\geq C_u$\u3002\n\n\u4e00\u79cd\u76f4\u89c2\u7684\u60f3\u6cd5\u662f \uff1a \u6309\u7167 $C$ \u6392\u5e8f\uff0c\u5e76\u6309\u987a\u5e8f\u6253\u5361\u3002\n\n\u53ef\u60dc\u7684\u662f\uff0c\u5728\u70b9\u4e4b\u95f4\u79fb\u52a8\u65f6\uff0c\u53d7\u5230\u56fe\u7684\u9650\u5236\uff0c\u9014\u4e2d\u53ef\u80fd\u7ecf\u8fc7 $C$ \u66f4\u5927\u7684\u8282\u70b9\u3002\n\n\u6211\u4eec\u5c06 $u\\rightarrow v$ \u7684\u8fb9\u6743\u8bbe\u4e3a $\\max(C_u,C_v)$ \uff0c\u6c42\u6700\u5c0f\u751f\u6210\u6811\uff0c\u4e0d\u96be\u53d1\u73b0\u6700\u4f18\u7684\u79fb\u52a8\u8def\u5f84\u53ea\u4f1a\u5728\u6700\u5c0f\u751f\u6210\u6811\u4e0a\uff0c\u8fd9\u6837\u5c31\u628a\u56fe\u7b80\u5316\u6210\u4e86\u6811\u3002\n\n\u6700\u5c0f\u751f\u6210\u6811\u7684\u6027\u8d28\u4ecd\u7136\u4e0d\u591f\u597d\uff08\u8fb9\u4e0a\u7684 $C$ \u662f\u4e71\u5e8f\u7684\uff09\uff0c\u8003\u8651\u5efa\u7acb\u91cd\u6784\u6811\u3002\n\n\u89c2\u5bdf\u8fb9\u6743\u7684\u6027\u8d28\uff0c\u6839\u636e $\\rm Kruskal$ \uff0c\u5efa\u6811\u7684\u8fc7\u7a0b\u7b49\u4ef7\u4e8e\u6309\u7167 $C$ \u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u70b9 $u$ \uff0c\u7136\u540e\u5c3d\u91cf\u52a0\u5165\u548c $C$ \u66f4\u5c0f\u7684\u70b9 $v$ \u8fde\u63a5\u7684\u8fb9\u3002\n\n\u6211\u4eec\u8fde\u8fb9 \uff08$u\\rightarrow v$ \u76ee\u524d\u7684\u6700\u6d45\u7956\u5148\uff09\u3002\u8fd9\u6837\u5c31\u5efa\u7acb\u4e86\u7c7b\u4f3c\u91cd\u6784\u6811\u7684\u7ed3\u6784\uff0c\u6ee1\u8db3\u4e0b\u9762\u4e24\u6761\u5173\u952e\u6027\u8d28 \uff1a\n\n- \u6df1\u5ea6\u8d8a\u6df1\uff0c $C$ \u8d8a\u5c0f\u3002\n\n- \u4e24\u70b9\u95f4\u8def\u5f84\u7684 $\\max C$ \u53d6\u5f97\u6700\u5c0f\u503c\u3002\n\n\u63a5\u4e0b\u6765\u5728\u6811\u4e0a $\\rm DP$\u3002\n\n\u8bbe $dp[u]$ \u4e3a\u5904\u7406\u5b8c $u$ \u5b50\u6811\uff08\u4e0d\u5fc5\u56de\u5230 $u$\uff09\u6240\u9700\u7684\u521d\u59cb\u94b1\u6570\uff0c$s[u]$ \u4e3a\u5b50\u6811\u5185 $B$ \u7684\u548c\u3002\n\n\u5bf9\u4e8e\u53f6\u8282\u70b9\uff0c\u663e\u7136\u6709 $dp[u]=B_u+C_u$\u3002\n\n\u5bf9\u4e8e\u975e\u53f6\u8282\u70b9\uff0c\u82e5\u6709 $k$ \u4e2a\u5b50\u6811\uff0c\u8981\u5148\u5904\u7406 $k-1$ \u4e2a\uff0c\u7136\u540e\u5728 $u$ \u6253\u5361\uff0c\u7136\u540e\u5904\u7406\u6700\u540e\u4e00\u4e2a\u3002\n\n\u5728\u5904\u7406\u524d\u9762 $k-1$ \u4e2a\u65f6\uff0c\u7531\u4e8e\u6811\u4e2d\u7684 $C$ \u4e0a\u5927\u4e0b\u5c0f\uff0c\u800c\u94b1\u5355\u8c03\u4e0d\u589e\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u8003\u8651\u5728 $u$ \u6253\u5361\u7684\u4e00\u6b21\u7ea6\u675f\u3002\n\n\u679a\u4e3e\u6700\u540e\u8fdb\u5165\u7684\u5b50\u6811 $v$ \uff0c\u5219\u6709 $dp[u]=\\min\\limits_{u\\rightarrow v}(s[u]-s[v]+\\max(C_u,dp[v]))$\n\n\u5176\u4e2d\uff0c$s[u]-s[v]$ \u662f\u5904\u7406\u524d\u9762 $k-1$ \u4e2a\u5b50\u6811\u7684\u82b1\u8d39\uff0c$\\max(C_u,dp[v])$ \u662f\u540e\u9762\u7684\u9650\u5236\u3002\n\n```cpp\n#include<algorithm>\n#include<cstdio>\n#include<vector>\n#define pb push_back\n#define ll long long\n#define MaxN 105000\nusing namespace std;\nstruct UFS{\n  int f[MaxN];\n  void Init(int n)\n  {for (int i=1;i<=n;i++)f[i]=i;}\n  int find(int u)\n  {return f[u]==u ? u : f[u]=find(f[u]);}\n  bool merge(int u,int v){\n    u=find(u);v=find(v);\n    if (u==v)return 0;\n    f[u]=v;return 1;\n  }\n}F;\nvector<int> g[MaxN],org[MaxN];\nll dp[MaxN],s[MaxN];\nint c[MaxN],b[MaxN];\nvoid pfs(int u)\n{\n  s[u]=b[u];\n  for (int i=0;i<g[u].size();i++){\n    pfs(g[u][i]);\n    s[u]+=s[g[u][i]];\n  }\n}\nvoid dfs(int u)\n{\n  if (!g[u].size())dp[u]=b[u]+c[u];\n  else dp[u]=1ll<<60;\n  for (int i=0,v;i<g[u].size();i++){\n    dfs(v=g[u][i]);\n    dp[u]=min(dp[u],s[u]-s[v]+max((ll)c[u],dp[v]));\n  }\n}\nbool cmp(int A,int B)\n{return c[A]<c[B];}\nint n,m,p[MaxN];bool vis[MaxN];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n;i++){\n\t  scanf(\"%d%d\",&c[i],&b[i]);\n\t  c[p[i]=i]=max(c[i]-b[i],0);\n\t}for (int i=1,u,v;i<=m;i++){\n\t  scanf(\"%d%d\",&u,&v);\n\t  org[u].pb(v);org[v].pb(u);\n\t}\n  sort(p+1,p+n+1,cmp);\n  F.Init(n);\n  for (int t=1;t<=n;t++){\n    int u=p[t];\n    for (int i=0,v;i<org[u].size();i++)\n      if (vis[v=org[u][i]]){\n        v=F.find(v);\n        if (F.merge(v,u))g[u].pb(v);\n      }\n    vis[u]=1;\n  }\n  pfs(p[n]);dfs(p[n]);\n  printf(\"%lld\",dp[p[n]]);\n\treturn 0;\n}\n```\n  \n\n\n",
        "postTime": 1610448896,
        "uid": 58705,
        "name": "command_block",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 AT4144 \u3010[ARC098D] Donation\u3011"
    },
    {
        "content": "- [AT4144 [ARC098D] Donation](https://www.luogu.com.cn/problem/AT4144)\n\n---\n\n\u53d1\u4e00\u4e2a\u4e0d\u4e00\u6837\u7684 dp \u505a\u6cd5\u3002\n\n\u9996\u5148\u8003\u8651\u5012\u7740\u6765\uff0c\u8bbe $c_u = \\max(a_u - b_u ,0)$ \uff0c\u770b\u4f5c\u5230\u8fbe\u4e00\u4e2a\u70b9 $u$ \u65f6\u624b\u4e2d\u81f3\u5c11\u8981\u6709 $c_u$ \u7684\u94b1\uff0c\u4e00\u5230\u8fbe\u540e\u624b\u4e2d\u94b1\u5c31\u591a\u4e86 $b_u$ \uff08\u76f8\u5f53\u4e8e\u6350\u732e\u8fc7\u7a0b\u53cd\u7740\u6765\uff09\u3002\n\n\u5982\u679c\u5c06 $c$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5efa\u51fa Kruskal \u91cd\u6784\u6811\uff0c\u4f7f\u4e0a\u9762\u7684\u70b9 $c$ \u66f4\u5927\uff0c\u4e0b\u9762\u7684\u70b9 $c$ \u66f4\u5c0f\uff0c\u90a3\u4e48\u4e00\u5b9a\u4ece\u67d0\u4e2a\u53f6\u5b50\u51fa\u53d1\u5411\u4e0a\u8d70\uff0c\u5411\u4e0a\u8d70\u5230 $u$ \u65f6\u4e00\u5b9a\u4f1a\u53bb\u8d70 $u$ \u7684\u6574\u4e2a\u5b50\u6811\uff08\u56e0\u4e3a $u$ \u5b50\u6811\u4e2d $c$ \u90fd\u66f4\u5c0f\uff0c\u66f4\u5bb9\u6613\u8d70\uff09\u3002\n\n\u8bbe $f_u$ \u8868\u793a\u4ece $u$ \u5b50\u6811\u4e2d\u67d0\u4e2a\u70b9\u5f00\u59cb\u8d70\uff0c\u80fd\u8d70\u5230 $u$ \uff0c\u9700\u8981\u7684**\u6700\u5c11\u521d\u59cb\u94b1\u6570**\uff0c $sum_u$ \u8868\u793a $u$ \u5b50\u6811\u4e2d $b$ \u7684\u548c\u3002\u6700\u7ec8\u7b54\u6848\u4e3a $f_{rt}+sum_{rt}$ \u3002\n\n\u82e5 $u$ \u4e3a\u53f6\u5b50\uff0c\u5219 $f_u=c_u,sum_u=b_u$ \u3002\n\n\u5426\u5219\u5982\u679c\u4ece\u513f\u5b50 $v$ \u8d70\u6765\uff0c\u7b54\u6848\u4e3a $\\max(f_v,c_u-sum_v)$ \uff08 $f_v$ \u8868\u793a\u8981\u80fd\u8d70\u5230 $v$ \u7684\u81f3\u5c11\uff0c$c_u-sum_v$ \u8868\u793a\u4e00\u5f00\u59cb\u6709\u8fd9\u4e48\u591a\u94b1\u624d\u80fd\u5230 $u$ \uff09\n\n\u6240\u4ee5 $f_u=\\min \\{ \\max(f_v,c_u-sum_v) \\}$ \u3002\n\nCode:\n\n```cpp\n#include<bits/stdc++.h>\n#define For(i,a,b) for(register int i=(a);i<=(b);++i)\n#define Rep(i,a,b) for(register int i=(a);i>=(b);--i)\n#define int long long\nusing namespace std;\ninline int read()\n{\n    char c=getchar();int x=0;bool f=0;\n    for(;!isdigit(c);c=getchar())f^=!(c^45);\n    for(;isdigit(c);c=getchar())x=(x<<1)+(x<<3)+(c^48);\n    if(f)x=-x;return x;\n}\n#define maxn 100005\n#define inf 0x3f3f3f3f3f3f3f3f\nint n,m,a[maxn],b[maxn],c[maxn];\nvector<int>e[maxn],G[maxn];\nint p[maxn];\nbool cmp(int x,int y){return c[x]<c[y];}\n#define pb push_back\nint ff[maxn];bool vis[maxn];\ninline int getf(int x){while(x!=ff[x])x=ff[x]=ff[ff[x]];return x;}\n\nint sum[maxn],f[maxn];\nvoid dfs(int u)\n{\n\tif(!e[u].size())return sum[u]=b[u],f[u]=c[u],void();\n\tsum[u]=b[u],f[u]=inf;\n\tfor(auto v:e[u]){\n\t\tdfs(v);\n\t\tf[u]=min(f[u],max(f[v],c[u]-sum[v]));\n\t\tsum[u]+=sum[v];\n\t}\n}\n\nsigned main()\n{\n\tn=read();m=read();\n\tFor(i,1,n)a[i]=read(),b[i]=read(),c[i]=max(0ll,a[i]-b[i]),ff[i]=p[i]=i;\n\tFor(i,1,m){\n\t\tint u=read(),v=read();\n\t\tG[u].pb(v),G[v].pb(u);\n\t}\n\tsort(p+1,p+n+1,cmp);\n\tFor(i,1,n){\n\t\tint u=p[i];\n\t\tfor(auto v:G[u])\n\t\t\tif(vis[v]){\n\t\t\t\tv=getf(v);\n\t\t\t\tif(getf(u)!=getf(v))\n\t\t\t\t\tff[getf(v)]=getf(u),e[u].pb(v);\n\t\t\t}\n\t\tvis[u]=1;\t\n\t}\n\tint rt=p[n];\n\tdfs(rt);\n\tcout<<f[rt]+sum[rt];\n    return 0;\n}\n```",
        "postTime": 1612277834,
        "uid": 151935,
        "name": "Rainbow_qwq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT4144 \u3010[ARC098D] Donation\u3011"
    },
    {
        "content": ">**\u9898\u610f**\uff1a\u7ed9\u51fa\u4e00\u4e2a $N$ \u4e2a\u70b9 $M$ \u6761\u8fb9\u7684\u65e0\u5411\u8fde\u901a\u56fe\uff0c\u6bcf\u4e2a\u70b9\u6709\u4e24\u4e2a\u6743\u503c $a_i,b_i$\u3002\n>\n>\u6700\u5f00\u59cb\u65f6\u4f60\u62e5\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u94b1\uff0c\u5e76\u4e14\u53ef\u4ee5\u9009\u62e9\u8fd9\u5f20\u56fe\u4e0a\u7684\u4efb\u610f\u4e00\u4e2a\u70b9\u4f5c\u4e3a\u8d77\u59cb\u70b9\uff0c\u4e4b\u540e\u4f60\u4ece\u8fd9\u4e2a\u70b9\u5f00\u59cb\u6cbf\u7740\u7ed9\u5b9a\u7684\u8fb9\u904d\u5386\u8fd9\u5f20\u56fe\u3002\u6bcf\u5f53\u4f60\u5230\u8fbe\u4e00\u4e2a\u70b9 $v$ \u65f6\uff0c\u4f60\u5fc5\u987b\u62e5\u6709\u81f3\u5c11 $a_v$ \u5143\u3002\u800c\u5f53\u4f60\u5230\u8fbe\u4e86\u8fd9\u4e2a\u70b9\u540e\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5411\u5b83\u6350\u732e $b_v$ \u5143\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u9009\u62e9\u4e0d\u6350\u732e\uff09\uff0c\u5f53\u7136\uff0c\u4f60\u9700\u8981\u4fdd\u8bc1\u5728\u6bcf\u6b21\u6350\u732e\u4e4b\u540e\u81ea\u5df1\u5269\u4f59\u7684\u94b1 $\\geq 0$\u3002\n>\n>\u4f60\u9700\u8981\u5bf9\u6240\u6709\u7684 $N$ \u4e2a\u70b9\u90fd\u6350\u732e\u4e00\u6b21\uff0c\u6c42\u4f60\u4e00\u5f00\u59cb\u81f3\u5c11\u9700\u8981\u643a\u5e26\u591a\u5c11\u94b1\u3002\n>\n>\u6570\u636e\u8303\u56f4\uff1a$1\\le N,M\\le 10^5,1\\le a_i,b_i\\le 10^9$\u3002\n\n\u6ce8\u610f\u5230\u4ee5\u4e0b\u7684\u6027\u8d28\uff1a\n\n- \u5b58\u5728\u4e00\u79cd\u6700\u4f18\u7684\u65b9\u6848\uff0c\u4f7f\u5f97\u6211\u4eec\u53ea\u5728\u6700\u540e\u4e00\u6b21\u7ecf\u8fc7\u67d0\u4e2a\u70b9\u65f6\u8fdb\u884c\u6350\u8d60\u3002\n\n\u8fd9\u4e2a\u662f\u6bd4\u8f83\u663e\u7136\u7684\u3002\u5982\u679c\u6211\u4eec\u5728\u6350\u8d60\u5b8c\u4e00\u4e2a\u70b9\u4e4b\u540e\u53c8\u7ecf\u8fc7\u4e86\u8fd9\u4e2a\u70b9\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u540e\u9762\u90a3\u6b21\u7ecf\u8fc7\u7684\u65f6\u5019\u518d\u8fdb\u884c\u6350\u8d60\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u4e24\u6b21\u6350\u8d60\u4e4b\u95f4\u6211\u4eec\u62e5\u6709\u7684\u94b1\u6570\u53d8\u591a\u4e86\uff0c\u9650\u5236\u4e5f\u5c31\u53d8\u5bbd\u4e86\uff0c\u56e0\u6b64\u4e00\u5b9a\u4e0d\u4f1a\u53d8\u5dee\u3002\n\n\u6709\u4e86\u8fd9\u4e2a\u6027\u8d28\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5012\u8fc7\u6765\u505a\uff1a\u5047\u8bbe\u786e\u5b9a\u4e86\u7ec8\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u76f8\u5f53\u4e8e\u5728\u7b2c\u4e00\u6b21\u7ecf\u8fc7\u67d0\u4e2a\u70b9 $i$ \u7684\u65f6\u5019\u9700\u8981\u6ee1\u8db3\u6b64\u65f6\u7684\u94b1\u6570 $x\\ge a_i-b_i$\uff0c\u5230\u8fbe\u540e\u6211\u4eec\u7684\u94b1\u6570\u4f1a\u52a0\u4e0a $b_i$\u3002\u4e00\u65e6\u7ecf\u8fc7\u4e86\u4e00\u6b21\u67d0\u4e2a\u70b9\uff0c\u4ee5\u540e\u90fd\u53ef\u4ee5\u968f\u610f\u514d\u8d39\u7ecf\u8fc7\u8fd9\u4e2a\u70b9\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u6b64\u65f6\u5c3d\u53ef\u80fd\u5148\u8d70 $a_i-b_i$ \u66f4\u5c0f\u7684\u70b9\u4e00\u5b9a\u4e0d\u4f1a\u66f4\u5dee\u3002\n\n\u5982\u679c\u6211\u4eec\u786e\u5b9a\u4e86\u7ec8\u70b9\uff08\u4e5f\u662f\u6211\u4eec\u73b0\u5728\u5012\u8fc7\u6765\u4e4b\u540e\u7684\u8d77\u70b9\uff09$u$\uff0c\u90a3\u4e48\u6700\u4f18\u65b9\u6848\u4e00\u5b9a\u662f\u5148\u627e\u5230 $u$ \u6b64\u65f6\u80fd\u8d70\u5230\u7684\u8282\u70b9\u4e2d $a_v-b_v$ \u6700\u5c0f\u7684\u8282\u70b9 $v$\uff0c\u5e76\u5c06 $v$ \u7684\u76f8\u90bb\u8282\u70b9\u540c\u65f6\u7b97\u5165\u300c\u80fd\u591f\u514d\u8d39\u8d70\u5230\u7684\u8282\u70b9\u300d\u3002\u6362\u8a00\u4e4b\uff0c\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a\u96c6\u5408 $S$ \u4e0e\u94b1\u6570 $x$\uff0c\u4e00\u5f00\u59cb $S=\\{u\\},x=0$\uff0c\u7136\u540e\u91cd\u590d\u6267\u884c\u4ee5\u4e0b\u7684\u6b65\u9aa4\uff1a\n\n- \u627e\u5230 $S$ \u4e2d\u6ee1\u8db3 $a_v-b_v$ \u6700\u5c0f\u7684\u8282\u70b9 $v$\u3002\n- \u82e5 $a_v-b_v\\le x$\uff0c\u76f4\u63a5\u5c06 $x$ \u52a0\u4e0a $b_v$\uff1b\u5426\u5219\uff0c\u82e5 $a_v-b_v>x$\uff0c\u6211\u4eec\u5c06\u7b54\u6848\u52a0\u4e0a $(a_v-b_v)-x$\uff0c\u540c\u65f6\u4ee4 $x=a_v$\u3002\n- \u5c06 $v$ \u7684\u76f8\u90bb\u8282\u70b9\u4e2d\u8fd8\u4e0d\u5728 $S$ \u5185\u7684\u8282\u70b9\u52a0\u5165\u96c6\u5408 $S$\u3002\n\n\u5982\u679c\u76f4\u63a5\u505a\u7684\u8bdd\u9700\u8981\u679a\u4e3e\u7ec8\u70b9 $u$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u81f3\u5c11\u4e3a $O(N^2)$\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u4e0a\u9762\u7684\u8fc7\u7a0b\u5176\u5b9e\u4e0e $\\text{Prim}$ \u7b97\u6cd5\u6c42\u6700\u5c0f\u751f\u6210\u6811\u975e\u5e38\u76f8\u4f3c\u3002\n\n\u8fd9\u542f\u53d1\u6211\u4eec\u5efa\u51fa $\\text{Kruskal}$ \u91cd\u6784\u6811\u8fdb\u884c\u6c42\u89e3\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u8bbe $C_i=\\max(a_i-b_i,0)$\uff0c\u5bf9\u4e8e\u56fe\u4e2d\u7684\u4e00\u6761\u8fb9 $(u,v)$\uff0c\u4ee4\u5176\u8fb9\u6743\u4e3a $\\max(C_u,C_v)$\uff0c\u5728\u8fd9\u5f20\u56fe\u4e0a\u5efa\u51fa $\\text{Kruskal}$ \u91cd\u6784\u6811\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u786e\u5b9a\u7684\u7ec8\u70b9 $u$\uff0c\u6211\u4eec\u8003\u8651 $u$ \u5728 $\\text{Kruskal}$ \u91cd\u6784\u6811\u4e0a\u7684\u6240\u6709\u7956\u5148\u3002\u8fd9\u4e9b\u7956\u5148\u7684\u6743\u503c\u4e00\u5b9a\u662f\u968f\u7740\u6df1\u5ea6\u7684\u9012\u51cf\u800c\u9012\u589e\u7684\u3002\u4ece $u$ \u5f00\u59cb\u8d70\u7684\u65f6\u5019\uff0c\u5982\u679c\u8d70\u5230\u4e86\u67d0\u4e2a\u7956\u5148 $r$\uff0c\u90a3\u4e48\u6700\u4f18\u65b9\u6848\u4e00\u5b9a\u662f\u5148\u628a $r$ \u5b50\u6811\u5185\u7684\u6240\u6709\u8282\u70b9\u5148\u8d70\u5b8c\uff0c\u7136\u540e\u518d\u7ee7\u7eed\u5f80\u4e0a\u8d70\u3002\n\n\u56e0\u6b64\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u8282\u70b9 $u$\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4ee5\u4e0b\u7684\u65b9\u5f0f\u8ba1\u7b97\u4ee5 $u$ \u4e3a\u7ec8\u70b9\u65f6\u7684\u7b54\u6848\uff1a\n\u5728 $\\text{Kruskal}$ \u91cd\u6784\u6811\u4e0a\u4ece\u4e0b\u5230\u4e0a\u904d\u5386 $u$ \u7684\u6bcf\u4e2a\u7956\u5148\uff0c\u5e76\u7ef4\u62a4\u5f53\u524d\u7684\u94b1\u6570 $x$\u3002\u5bf9\u4e8e\u4e00\u4e2a\u7956\u5148 $r$\uff0c\u82e5 $x\\ge C_r$ \u5c31\u76f4\u63a5\u4ee4 $x$ \u52a0\u4e0a $r$ \u7684\u53e6\u4e00\u4e2a\u5b50\u6811\uff08\u6ce8\u610f $\\text{Kruskal}$ \u91cd\u6784\u6811\u662f\u4e8c\u53c9\u6811\uff09\u5185\u53f6\u8282\u70b9 $v$ \u7684 $b_v$ \u4e4b\u548c\uff1b\u5426\u5219\uff0c\u5c06\u7b54\u6848\u52a0\u4e0a $C_r-x$\uff0c\u4ee4 $x=C_r$ \u540e\u518d\u52a0\u4e0a $r$ \u7684\u53e6\u4e00\u4e2a\u5b50\u6811\u5185\u53f6\u8282\u70b9\u7684\u70b9\u6743\u548c\u3002\n\n\u8003\u8651\u5982\u4f55\u4f18\u5316\u4e0a\u8ff0\u8fc7\u7a0b\u3002\u5bf9\u4e8e $\\text{Kruskal}$ \u91cd\u6784\u6811\u4e0a\u7684\u4e00\u4e2a\u70b9 $u$\uff0c\u8bbe $\\text{sum}(u)$ \u4e3a $u$ \u5b50\u6811\u5185\u53f6\u8282\u70b9 $v$ \u7684 $b_v$ \u4e4b\u548c\uff0c\u90a3\u4e48\u5bf9\u4e8e\u53f6\u8282\u70b9 $i$\uff0c\u5982\u679c\u521d\u59cb\u6709 $x$ \u5757\u94b1\uff0c\u90a3\u4e48\u9700\u8981\u6ee1\u8db3\uff1a\n\n- \u5bf9\u4e8e $i$ \u7684\u6bcf\u4e2a\u7956\u5148 $r$\uff0c\u6709 $\\text{sum}(r)+x\\ge C_{\\text{father}(r)}$\u3002\n\n\u53ef\u4ee5\u53d1\u73b0 $x$ \u4e0d\u80fd\u5c0f\u4e8e\u6240\u6709 $C_{\\text{father}(r)}-\\text{sum}(r)$ \u4e2d\u7684\u6700\u5927\u503c\u3002\u90a3\u4e48\u6211\u4eec\u5728 $\\text{Kruskal}$ \u91cd\u6784\u6811\u4e0a\u505a\u4e00\u4e2a $\\text{DFS}$\uff0c\u9012\u5f52\u5230\u53f6\u8282\u70b9\u65f6\u8ba1\u7b97\u7b54\u6848\uff0c\u6700\u7ec8\u53d6\u6240\u6709\u53f6\u8282\u70b9\u7b54\u6848\u7684\u6700\u5c0f\u503c\u52a0\u4e0a $\\sum b_i$ \u5c31\u884c\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(N+M\\log M)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n\n#define int long long\n\nusing namespace std;\n\nint read(){\n\tint x=0,f=1;char c=getchar();\n\tfor(;(!(c>='0'&&c<='9'));c=getchar())if(c=='-')f=-1;\n\tfor(;(c>='0'&&c<='9');c=getchar())x=x*10+c-'0';\n\treturn x*f;\n}\n\nconst int MN=2e5+5;\n\nint A[MN],B[MN],C[MN],n,m;\nint fa[MN],son[MN][2];\n\nnamespace dsu{\n\tint fa[MN];\n\tvoid clear(){for(int i=1;i<=n+n;i++)fa[i]=i;}\n\tint find(int x){return (x==fa[x])?x:fa[x]=find(fa[x]);}\n};\n\npair<int,pair<int,int> >E[MN];\n\n#define fi first\n#define se second\n#define mk make_pair\n\nvoid build(){\n\tsort(E+1,E+m+1);dsu::clear();int tot=n;\n\tfor(int i=1;i<=m;i++){\n\t\tint u=E[i].se.fi,v=E[i].se.se,w=E[i].fi;\n\t\tint fu=dsu::find(u),fv=dsu::find(v);\n\t\tif(fu==fv)continue;int nw=++tot;\n\t\tdsu::fa[fu]=dsu::fa[fv]=fa[fu]=fa[fv]=nw;\n\t\tson[nw][0]=fu,son[nw][1]=fv,C[nw]=w;\n\t}\n\tfor(int i=1;i<=n+n;i++)B[fa[i]]+=B[i];\n}\n\nconst int INF=1e14;\n\nint ans=INF;\nvoid dfs(int u,int now){\n//\tcout<<\"dfs \"<<u<<\" \"<<now<<endl;\n\tif(u<=n){ans=min(ans,max(now,C[u]));return ;}\n\tfor(int i=0;i<=1;i++){\n\t\tint v=son[u][i];\n\t\tif(!v)continue;\n\t\tdfs(v,max(now,C[u]-B[v]));\n\t}\n}\n\nsigned main(void){\n\n#ifndef ONLINE_JUDGE\n\tfreopen(\"in.in\",\"r\",stdin);\n#endif\n\n\tn=read(),m=read();int sum=0;\n\tfor(int i=1;i<=n;i++)A[i]=read(),B[i]=read(),sum+=B[i],C[i]=max(0ll,A[i]-B[i]);\n\tfor(int i=1;i<=m;i++)E[i].se.fi=read(),E[i].se.se=read(),E[i].fi=max(C[E[i].se.fi],C[E[i].se.se]);\n\tbuild();dfs(n*2-1,0);cout<<ans+sum<<endl;\n\n\treturn 0;\n}\n```\n\n--------------------\n\n\u611f\u89c9\u8fd9\u9898\u597d\u96be\u554a\uff0c\u80fd\u4e0d\u80fd\u8bc4\u4e2a\u9ed1\u554a",
        "postTime": 1660809736,
        "uid": 307453,
        "name": "\u4e91\u6d45\u77e5\u5904",
        "ccfLevel": 6,
        "title": "ARC098F Donation"
    },
    {
        "content": "\u6c42\u7ba1\u7406\u5458\u6dfb\u52a0\u7b80\u8981\u9898\u610f(\u88ab\u7981\u8a00\u4e86)\n\n\u53c8\u662f\u4e00\u9053\u6ca1\u4ec0\u4e48\u4eba\u505a\u7684\u9898\u76ee\n\n### \u7b80\u8981\u9898\u610f\n\n\u7ed9\u4f60\u4e00\u4e2a $n$ \u4e2a\u70b9, $m$ \u6761\u8fb9\u7684\u8fde\u901a\u65e0\u5411\u56fe,\u6bcf\u4e2a\u70b9\u6709 $a_i$ \u548c $b_i$ , \u53ea\u6709\u4f60\u8eab\u4e0a\u7684\u94b1\u6570\u5927\u4e8e $a_i$ \u65f6,\u4f60\u624d\u80fd\u591f\u5230\u8fbe $i$ \u70b9,\u540c\u65f6\u5230\u8fbe $i$ \u70b9\u4e4b\u540e\u4f60\u53ef\u4ee5\u9009\u62e9\u6350\u8d60 $b_i$ \u94b1,\u6bcf\u4e2a\u70b9\u8981\u6c42\u81f3\u5c11\u6350\u8d60\u4e00\u6b21,\u6c42\u521d\u59cb\u65f6\u4f60\u8eab\u4e0a\u7684\u6700\u5c0f\u94b1\u6570\n\n### sol\n\n\u9996\u5148\u663e\u7136\u5bf9\u4e8e\u4e00\u4e2a\u70b9 $i$,\u53ea\u6709\u5f53\u6700\u540e\u4e00\u6b21\u7ecf\u8fc7 $i$ \u65f6\u624d\u9009\u62e9\u6350\u8d60\u662f\u6700\u4f18\u7684,\u90a3\u4e48\u5c31\u76f8\u5f53\u4e8e\u662f\u9009\u62e9\u4e00\u79cd\u5220\u70b9\u7684\u987a\u5e8f,\u4f7f\u5f97\u6240\u9700\u94b1\u6570\u6700\u5c11\n\n\u5148\u53ef\u4ee5\u63a8\u4e00\u4e0b\u5f0f\u5b50,\u8bbe\u5f53\u524d\u94b1\u6570\u4e3a $x$ ,\u5bf9\u4e8e\u5148\u9009 $i$ \u6350\u8d60\u5728\u5230 $j$ \u53bb\u6350\u8d60\u548c\u5148\u9009 $j$ \u518d\u5230 $i$ ,\u6709\u4e24\u79cd\u9650\u5236\n\n* \u5148\u9009 $i$ ,\u5219\u6709 $x\\ge a_i+b_j$\n* \u5148\u9009 $j$ ,\u5219\u6709 $x\\ge a_j+b_i$\n\n\u90a3\u4e48\u56e0\u4e3a\u662f\u8981\u6c42\u6700\u5c0f,\u6240\u4ee5\u5148\u9009 $i$ \u5f53\u4e14\u4ec5\u5f53 $a_i+bj \\le a_j+b_i$ ,\u4e5f\u5c31\u662f $a_i-b_j \\le a_j-b_j$\n\n\u4e8e\u662f\u5c31\u5927\u6982\u63a8\u51fa\u6765\u4e86\u4e00\u4e2a\u8fd9\u6837\u7684\u7ed3\u8bba,\u53d1\u73b0\u7136\u800c\u8fd9\u4e2a\u7ed3\u8bba\u8fd9\u4e48\u505a\u7684\u8bdd\u8fd8\u662f\u4f1a\u6709\u4e00\u70b9\u95ee\u9898,\u8003\u8651\u9006\u5411\u601d\u8003\n\n\u5047\u8bbe\u73b0\u5728\u53ea\u6709\u4e00\u4e2a\u70b9 $i$ ,\u5269\u4f59 $x$ \u94b1,\u90a3\u4e48\u8981\u6ee1\u8db3 $x+b_i\\ge a_i$ \u4e5f\u5c31\u662f $x\\ge a_i-b_i$ \u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8bbe $c_i = a_i-b_i$ ,\u4e5f\u5c31\u662f\u8bf4 $i$ \u70b9\u7684\u5269\u4f59\u94b1\u6570\u81f3\u5c11\u4e3a $c_i$ ,\u90a3\u4e48\u6211\u4eec\u8981\u4ece $i$ \u56de\u6eaf\u5230 $j$ (\u5176\u5b9e\u662f\u5bf9\u5e94\u4ece $j$ \u5230 $i$), \u94b1\u6570\u4f1a\u53d8\u6210 $\\max(x+b_i,c_j)$ ,\u90a3\u4e48\u53d1\u73b0 $x$ \u662f\u9010\u6e10\u589e\u52a0\u7684,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6309\u7167 $c_i$ \u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u56de\u6eaf,\u8fd9\u6837\u80af\u5b9a\u662f\u6700\u4f18\u7684,\u4e5f\u5c31\u662f\u76f8\u5f53\u4e8e\u6309 $c_i$ \u4ece\u5927\u5230\u5c0f\u7684\u987a\u5e8f\u53bb\u5220\u70b9\n\n\u4f46\u662f\u8fd9\u6837\u7684\u8bdd,\u6211\u4eec\u4f1a\u53d1\u73b0\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56fe\u4e0d\u8fde\u901a,\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e2a\u8fde\u901a\u5757\u4e2d\u7684 $c_i$ \u6700\u5927\u7684\u70b9\u5411 $x$ (\u5f53\u524d $c_i$ \u6700\u5927\u7684\u70b9) \u8fde\u8fb9,\u90a3\u4e48\u8fd9\u6837\u4f1a\u8fde\u6210\u4e00\u68f5\u6811,\u95ee\u9898\u5c31\u8f6c\u6362\u6210,\u627e\u5230\u4e00\u6761\u56de\u6eaf\u7684\u8def\u5f84\u4f7f\u5f97\u94b1\u6570\u6700\u5c11,\u8bbe $f_i$ \u8868\u793a\u4ece $i$ \u7684\u5b50\u6811\u4e2d\u56de\u6eaf\u51fa\u6765,\u4f1a\u53d8\u6210\u591a\u5c11\u94b1, $s_i$ \u8868\u793a $i$ \u7684\u5b50\u6811\u5185\u7684 $b_i$ \u4e4b\u548c,\u90a3\u4e48\u6bcf\u6b21\u9009\u62e9\u4ece\u4e00\u4e2a\u5b50\u6811\u4e2d\u56de\u6eaf,\u5c31\u6709\u8f6c\u79fb\n\n$f_i=min(s_i-s_j+max(c_i,f_j))$\n\n\u56e0\u4e3a\u6ee1\u8db3 $c_i\\ge c_j$ \u6240\u4ee5\u4ece\u4e00\u9897\u5b50\u6811\u4e2d\u56de\u6eaf\u51fa\u6765\u4e4b\u540e,\u5176\u4ed6\u5b50\u6811\u7684\u589e\u52a0\u503c\u5c31\u662f $b_j$ \u4e4b\u548c\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tregister int x=0;\n\tregister char ch=getchar();\n\twhile(ch<'0'||ch>'9')\tch=getchar();\n\twhile(ch>='0'&&ch<='9')\tx=x*10+(ch^48),ch=getchar();\n\treturn x;\n}\nconst int N=2e5+5;\nint n,m,now,a[N],b[N],v[N],fa[N],id[N],vi[N],nex[N],head[N];\nvoid addedges(int x,int y){\n\tnex[++now]=head[x];\n\thead[x]=now,v[now]=y;\n}\nvector<int>d[N];\nlong long f[N],s[N];\nbool com(int x,int y){\n\treturn a[x]<a[y];\n}\nint find(int x){\n\treturn fa[x]?fa[x]=find(fa[x]):x;\n}\nvoid dfs(int x){\n\tint si=d[x].size();\n\tfor(int i=0;i<si;i++){\n\t\tint v=d[x][i];\n\t\tdfs(v),s[x]+=s[v];\n\t}\n\ts[x]+=b[x],f[x]=s[x]+a[x];\n\tfor(int i=0;i<si;i++){\n\t\tint v=d[x][i];\n\t\tf[x]=min(f[x],s[x]-s[v]+max(f[v],1LL*a[x]));\n\t}\n}\nint main(){\n\t//freopen(\"1.out\",\"w\",stdout);\n\t//freopen(\"1.in\",\"r\",stdin);\n\tn=read(),m=read();\n\tfor(int i=1;i<=n;i++)\ta[i]=read(),b[i]=read(),a[i]=max(a[i]-b[i],0);\n\tfor(int i=1;i<=m;i++){\n\t\tint x=read(),y=read();\n\t\taddedges(x,y),addedges(y,x);\n\t}\n\tfor(int i=1;i<=n;i++)\tid[i]=i;\n\tsort(id+1,id+n+1,com);\n\tfor(int i=1;i<=n;i++){\n\t\tint x=id[i];\tvi[x]=1;\n\t\tfor(int j=head[x];j;j=nex[j])\n\t\t\tif(vi[v[j]]){\n\t\t\t\tint y=find(v[j]);\n\t\t\t\tif(y==x)\tcontinue;\n\t\t\t\td[x].push_back(y),fa[y]=x;\n\t\t\t}\n\t}\n\tdfs(id[n]);\n\tprintf(\"%lld\\n\",f[id[n]]);\n\treturn 0;\n}\n\n```\n\n\n\n",
        "postTime": 1582725393,
        "uid": 88567,
        "name": "lzk5627",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT4144 \u3010[ARC098D] Donation\u3011"
    },
    {
        "content": "\u6350\u94b1\u592a\u4e8f\u4e86\uff0c\u6211\u4eec\u5012\u5e8f\u8003\u8651\uff0c\u4e8e\u662f\u5c31\u53d8\u6210\u4e86\u62a2\u94b1\u3002\n\n\u4e8e\u662f\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u7684\u9650\u5236 $(a_u,b_u)$\uff0c\u4ee4 $c_u=\\max\\{0,a_u-b_u\\}$\uff0c\u8868\u793a\u5230\u8fd9\u4e2a\u70b9\u4e4b\u524d\u4f60\u81f3\u5c11\u62e5\u6709\u7684\u94b1\u6570\uff0c\u5e76\u4e14\u5230\u4e86\u8fd9\u4e2a\u70b9\u4e4b\u540e\u4f1a\u62a2\u5230 $b_u$ \u7684\u94b1\u3002\n\n\u8003\u8651\u5efa\u7acb $\\text{Kruskal}$ \u91cd\u6784\u6811\u4f7f\u5f97\u6811\u4e0a\u6bcf\u6761\u8fb9 $fa_u\\to u$ \u6709 $c_{fa_u}\\ge c_u$\uff0c\u8d2a\u5fc3\u5730\u4ece\u67d0\u4e2a\u53f6\u5b50\u5f00\u59cb\u8d70\uff0c\u6700\u4f18\u79fb\u52a8\u5c31\u4e00\u5b9a\u5728\u8fd9\u68f5\u6811\u4e0a\u3002\n\n\u8fd9\u68f5\u91cd\u6784\u6811\u53ef\u4ee5\u7528\u8d4b\u503c\u7684\u65b9\u6cd5\u641e\u51fa\u6765\uff0c\u7ed9\u539f\u56fe\u6bcf\u6761\u65e0\u5411\u8fb9 $(u,v)$ \u8d4b\u4e00\u4e2a\u6743\u503c $\\operatorname{max}(c_u,c_v)$ \u5373\u53ef\u3002\u8fd9\u7b49\u4ef7\u4e8e\u6309\u7167 $c_u$ \u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u70b9 $u$\uff0c\u5e76\u627e\u4e00\u4e2a\u6700\u6d45\u7684 $v$ \u4f7f\u5f97 $c_v\\le c_u$ \u5e76\u8fde\u8fb9\u3002\n\n\u5efa\u51fa\u6811\u540e\u5c31\u53ef\u4ee5 $\\text{dp}$ \u4e86\uff0c\u4ee4 $f_u$ \u4e3a\u4ece $u$ \u5b50\u6811\u5185\u62a2\u5230 $u$ \u6240\u9700\u7684\u6700\u5c0f\u521d\u59cb\u94b1\u6570\u3002\n\n- \u5982\u679c $u$ \u662f\u53f6\u5b50\uff0c$f_u=c_u$\u3002\n- \u5426\u5219 $u$ \u80fd\u4ece $v\\in \\operatorname{son}(u)$ \u8d70\u8fc7\u6765\uff0c\u524d\u63d0\u662f\u81f3\u5c11\u6709 $f_v$ \u7684\u94b1\uff0c\u5e76\u4e14\u8d70\u5230 $u$ \u524d\u81f3\u5c11\u6709 $c_u$ \u7684\u94b1\u3002\u7531\u4e8e\u662f\u4ece $v$ \u8d70\u8fc7\u6765\u7684\uff0c\u6240\u4ee5\u4f1a\u62a2\u5230 $\\sum\\limits_{k\\in \\operatorname{subtree}(v)}b_k$ \u7684\u94b1\u3002\u6240\u4ee5 $f_u=\\min\\limits_{v\\in \\operatorname{son}(u)}\\{\\max\\{f_v,c_u-\\sum\\limits_{k\\in \\operatorname{subtree}(v)}b_k\\}\\}$\u3002\n\n\u5904\u7406\u51fa $s_u=\\sum\\limits_{k\\in \\operatorname{subtree}(u)}b_k$ \u5373\u53ef\u3002\u7b54\u6848\u4e3a $f_{rt}+s_{rt}$\uff0c$rt$ \u4e3a $c$ \u7684\u503c\u6700\u5927\u7684\u70b9\uff08\u5373\u6574\u68f5\u6811\u7684\u6839\uff09\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nnamespace mystd {\n\tinline int read() {\n\t    char c = getchar();\n\t    int x = 0, f = 1;\n\t    while (c < '0' || c > '9') f = (c == '-') ? -1 : f, c = getchar();\n\t    while (c >= '0' && c <= '9') x = (x << 1) + (x << 3) + c - '0', c = getchar();\n\t    return x * f;\n\t}\n\tinline void write(int x) {\n\t    if (x < 0) x = ~(x - 1), putchar('-');\n\t    if (x > 9) write(x / 10);\n\t    putchar(x % 10 + '0');\n\t}\n}\nusing namespace std;\nusing namespace mystd;\n\nconst int maxn = 1e5 + 100;\nstruct edge { int u, v, cl; } e[maxn];\nint n, m, a[maxn], b[maxn], c[maxn], f[maxn], s[maxn], fa[maxn], id[maxn], vis[maxn];\nvector<int> g[maxn], gr[maxn];\n\nint getf(int x) { return x == fa[x] ? x : fa[x] = getf(fa[x]); }\nvoid dfs(int u) {\n\ts[u] = b[u], f[u] = 1e18;\n\tif (!g[u].size()) return f[u] = c[u], void();\n\tfor (int v : g[u]) {\n\t\tdfs(v);\n\t\tf[u] = min(f[u], max(f[v], c[u] - s[v]));\n\t\ts[u] += s[v];\n\t}\n}\n\nsigned main() {\n\tn = read(), m = read();\n\tfor (int i = 1; i <= n; i++) a[i] = read(), b[i] = read(), c[i] = max(0ll, a[i] - b[i]), id[i] = i;\n\tfor (int i = 1, u, v; i <= m; i++) gr[u = read()].push_back(v = read()), gr[v].push_back(u);\n\tsort(id + 1, id + n + 1, [](const int &x, const int &y) { return c[x] < c[y]; });\n\tfor (int i = 1; i <= n; i++) fa[i] = i;\n\tfor (int i = 1; i <= n; i++) {\n\t\tint u = id[i];\n\t\tfor (int v : gr[u]) {\n\t\t\tif (!vis[v]) continue;\n\t\t\tint ru = getf(u), rv = getf(v);\n\t\t\tif (ru != rv) \n\t\t\t\tfa[rv] = ru, g[u].push_back(rv);\n\t\t}\n\t\tvis[u] = 1;\n\t}\n\tint rt = id[n];\n\tdfs(rt);\n\twrite(f[rt] + s[rt]);\n\treturn 0;\n}\n\n```",
        "postTime": 1673789371,
        "uid": 306573,
        "name": "Ender32k",
        "ccfLevel": 0,
        "title": "ARC098D Donation \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u5bb9\u6613\u53d1\u73b0\u4e00\u4e2a\u57fa\u672c\u4e8b\u5b9e\uff0c\u5c06\u6700\u4f18\u884c\u8d70\u5e8f\u5217\u5217\u51fa\u6765\uff0c\u5bf9\u6bcf\u4e2a\u70b9\u63d0\u53d6\u5b50\u5e8f\u5217\u90fd\u5f62\u5982\u82e5\u5e72\u6b21\u65e0\u610f\u4e49\u7ecf\u8fc7\u548c\u6700\u540e\u4e00\u6b21\u6350\u732e\u3002\n\n\u8bc1\u660e\u57fa\u4e8e\u8c03\u6574\uff0c\u628a\u4e00\u6b21\u65e0\u610f\u4e49\u7684\u7ecf\u8fc7\u6362\u5230\u6350\u732e\u524d\u4e0d\u4f1a\u53d8\u52a3\u3002\n\n\u4e4b\u524d\u8fc7\u7a0b\u4e2d\u5f00\u62d3\u8fde\u901a\u6027\u7684\u662f\u65e0\u610f\u4e49\u7684\u7ecf\u8fc7\uff0c\u8fd9\u4e0d\u5229\u4e8e\u5bf9\u6350\u732e\u8fc7\u7a0b\u7684\u5206\u6790\uff0c\u628a\u884c\u8d70\u8fc7\u7a0b\u53cd\u8fc7\u6765\uff0c\u95ee\u9898\u53d8\u4e3a\u6211\u4eec\u8981\u521d\u6b21\u5230\u8fbe\u4e00\u4e2a\u70b9\uff0c\u8981\u4e48\u76f4\u63a5\u4ece\u8fd9\u4e2a\u70b9\u8fdb\u5165\uff0c\u8981\u4e48\u8fd9\u4e2a\u70b9\u5728\u6211\u4eec\u5df2\u7ecf\u5230\u8fbe\u8fc7\u7684\u70b9\u7684\u90bb\u57df\u4e2d\u5e76\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u70b9\u53cd\u6350\u732e(xiao\u3002\u8fd9\u6837\u7684\u8bdd\u53cd\u6350\u732e\u6210\u4e3a\u4e86\u8fde\u901a\u6027\u7684\u5f00\u62d3\u65b9\u6cd5\uff0c\u5176\u4e2d\u5bf9 $x$ \u7684\u53cd\u6350\u732e\u5b9a\u4e49\u4e3a\u6301\u6709 $v\\geqslant d_x=\\max\\{a_x-b_x,0\\}$, \u53cd\u6350\u732e\u540e\u53d8\u4e3a $v+b_x$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u523b\u753b\u8fd9\u4e2a\u8fc7\u7a0b(\u7565\u53bb\u53cd\u6350\u732e\u7684\u5408\u6cd5\u6027\u5224\u5b9a\u548c\u6536\u76ca)\uff0c\u88ab\u7ecf\u8fc7\u7684\u70b9\u96c6\u8bbe\u4e3a $S$ ,\u521d\u59cb\u4e3a $\\{x\\}$,\u6bcf\u6b21\u53ef\u4ee5\u9009\u62e9 $\\forall y\\in I(S)/S,v\\geqslant d_x=\\max\\{a_x-b_x,0\\}$ \u6765\u6350\u732e\uff0c\u7136\u540e$S\\to S\\cup \\{y\\}$\u3002\n\n\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6709\u4e00\u4e2a\u5b9a\u7684\u521d\u503c\u8981\u5224\u5b9a\u5408\u6cd5\u6027\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6bcf\u6b21\u9009\u62e9\u90bb\u57df\u4e2d $d_x$ \u6700\u5c0f\u7684\u6765\u8d70\uff0c\u8fd9\u76f4\u63a5\u63a8\u5bfc\u51fa\u4e86\u7b2c\u4e00\u6b21\u6211\u4eec\u53ea\u4f1a\u9009\u62e9\u76f8\u90bb\u70b9\u90fd $\\geqslant $ \u5176 $d_x$ \u7684\u8d70\u3002\n\n\u56e0\u800c\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u4e00\u4e2a\u719f\u6089\u7684\u7ed3\u6784 (\u70b9)Kruskal\u91cd\u6784\u6811 \u4e0a\u63cf\u8ff0\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u603b\u662f\u4ece\u53f6\u5b50\u51fa\u53d1\u6bcf\u6b21\u8d70\u5b8c\u4e00\u68f5\u5b50\u6811\uff0c\u5230\u6839\u7684\u7236\u4eb2\uff0c\u518d\u7528\u540c\u6837\u7684\u65b9\u6cd5\u8d70\u5b8c\u6839\u5176\u4ed6\u5144\u5f1f\u7684\u5b50\u6811\u3002\u8fdb\u4e00\u6b65\u7684\u601d\u8003\u53ef\u77e5\u9650\u5236\u6700\u7d27\u7684\u513f\u5b50\u548c\u7236\u4eb2\u5171\u540c\u8d4b\u4e88\u4e86\u6574\u4e2a\u6d41\u7a0b\u65b0\u7684\u9650\u5236\u3002\n\n\u5177\u4f53\u8bbe $\\sup_{x}$ \u8868\u793a $x$ \u4e3a\u6839\u5b50\u6811\u7684\u9650\u5236\uff0c$\\Delta_x$ \u4e3a\u5176\u589e\u91cf(\u5b9a\u503c$\\sum b_i$)\u6211\u4eec\u6709 $\\sup_x=\\min_{y\\in son_x}\\{\\sup_y,d_x-\\Delta_y\\}$ \u3002",
        "postTime": 1635679991,
        "uid": 40629,
        "name": "zzw4257",
        "ccfLevel": 0,
        "title": "AT4144 [ARC098D] Donation"
    },
    {
        "content": "### [[ARC098F] Donation](https://www.luogu.com.cn/problem/AT_arc098_d)\n\n\u7b2c\u4e8c\u6b21\u9047\u89c1\u5728 $\\text{Kruskal}$ \u91cd\u6784\u6811\u4e0a\u8dd1 $\\text{dp}$ \u3002\n\n\u5f88\u70e6\uff0c\u9898\u76ee\u548c [Labyrinth](https://www.luogu.com.cn/problem/CF1578L)\u5341\u5206\u76f8\u4f3c\uff0c\u4f46\u662f\u4e0d\u5728\u662f\u8fb9\u6743\uff0c\u800c\u662f\u70b9\u6743\u3002\n\n\u8003\u8651\u4e24\u4e2a\u70b9\u7684\u5148\u540e\u987a\u5e8f \uff0c\u4e24\u70b9\u4e3a $u,v$ \u3002 $sum$ \u8868\u793a\u5f53\u524d\u7684\u94b1\u6570\u3002$s$ \u4e3a\u9650\u5236\uff0c $c$ \u4e3a\u82b1\u8d39\u3002\uff08\u4fdd\u8bc1 $sum>c_u+c_v$ \uff09\n\n\u4e24\u4e2a\u6761\u4ef6\uff1a\n\n\u2460 $sum-c_u\\ge s_v$ \u53ef\u4ee5\u5148\u53bb $u$ \u518d\u53bb $v$\u3002\n\n\u2461 $sum-c_v\\ge s_u$ \u53ef\u4ee5\u5148\u53bb $v$ \u518d\u53bb $u$\u3002\n\n\u5927\u529b\u5206\u8ba8\uff1a\n\n1. \u2460 $\\&$ \u2461 \u4e24\u8005\u4e0d\u9700\u8981\u8003\u8651\u987a\u5e8f\u3002\n\n2. \u2460 $\\&$ $!$\u2461 \u5fc5\u987b\u5148\u53bb $u$ \u624d\u80fd\u518d\u53bb $v$\u3002\n\n3. $!$\u2460 $\\&$ \u2461 \u5fc5\u987b\u5148\u53bb $v$ \u624d\u80fd\u518d\u53bb $u$\u3002\n\n\u5bf9\u4e8e\u60c5\u51b5 2. \u6211\u4eec\u6ee1\u8db3\n\n- $sum-c_u\\ge s_v \\ \\ \\ \\& \\ \\ \\ \\ sum-c_v<s_u$\n\n- $sum\\ge s_v+c_u \\ \\ \\ \\& \\ \\ \\ \\ sum<s_u+c_v$\n\n- \u5c06\u4e24\u8005\u5408\u5e76, $s_u+c_v >sum\\ge s_v+c_u$\n\n- $s_u+c_v > s_v+c_u$\n\n- \u79fb\u9879 $s_u-c_u > s_v-c_v$\n\n\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u54ce\uff01\u8fd9\u6837\u7684\u8bdd\u6bcf\u4e2a\u6570\u4e4b\u548c\u81ea\u5df1\u6709\u5173\u7cfb\u4e86\uff0c\u592a\u597d\u4e86\u3002\n\n\u90a3\u4e48\u8bbe $t_i=s_i-c_i$\n\n\u6211\u4eec\u7b2c\u4e00\u65f6\u95f4\u60f3\u5230\u7684\u662f\u6309 $t_i$ \u6392\u5e8f\uff0c\u7136\u540e\u5c31\u505a\u5b8c\u4e86\uff0c\u597d\u7684\uff0c~~\u4f60\u5c31\u9519\u5b8c\u4e86~~\u3002\n\n\u5bf9\u4e8e\u6bcf\u6761\u8fb9\uff0c\u6211\u4eec\u5c06\u5b83\u7684\u8fb9\u6743\u8bbe\u7f6e\u4e3a $\\max(t_u,t_v)$ \u3002\n\n\u6211\u4eec\u4ece\u53f6\u5b50\u8282\u70b9\u5f00\u59cb\u5408\u5e76\u3002\n\n\u5177\u4f53\u53ef\u4ee5\u770b\u4ee3\u7801\u3002\n### $\\text{CODE}$\n\n```cpp\n#include<bits/stdc++.h>\n#define N 5000005\n#define int long long\nusing namespace std;\nint read()\n{\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\treturn x*f;\n}\nint n,m,a[N],cnt,f[N],sum[N],ans[N],b[N];\nstruct edge \n{\n\tint u,v,w;\n}e[N*2];\nint find(int now)\n{\n\tif(f[now]==now)return now;\n\treturn f[now]=find(f[now]);\n}\nbool cmp(edge a,edge b){return a.w<b.w;}\nsigned main()\n{\n\tn=read(),m=read();cnt=n;\n\tfor(int i=1;i<=n;i++)a[i]=read(),b[i]=read(),a[i]=max(a[i]-b[i],0ll);\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\te[i].u=read();\n\t\te[i].v=read();\n\t\te[i].w=max(a[e[i].u],a[e[i].v]);\n\t}\n\tsort(e+1,e+1+m,cmp);\n\tfor(int i=1;i<=2*n;i++)f[i]=i,ans[i]=a[i]+b[i],sum[i]=b[i];\n\tfor(int i=1,u,v;i<=m;i++)\n\t{\n\t\tu=find(e[i].u);v=find(e[i].v);\n\t\tif(u!=v)\n\t\t{\n\t\t\t++cnt;\n\t\t\tf[u]=f[v]=cnt;\n\t\t\tans[cnt]=min(max(e[i].w,ans[v])+sum[u],max(e[i].w,ans[u])+sum[v]);\n\t\t\tsum[cnt]=sum[u]+sum[v];\n\t\t}\n\t}\n\tcout<<ans[cnt]<<\"\\n\";\n\treturn 0;\n}\n```\n\n\u5f53\u7136\uff0c\u4f60\u505a\u5b8c\u8fd9\u9053\u9898\u4e5f\u53ef\u4ee5\u53bb\u770b\u770b[Labyrinth](https://www.luogu.com.cn/problem/CF1578L)\u3002",
        "postTime": 1673268437,
        "uid": 331947,
        "name": "hegm",
        "ccfLevel": 0,
        "title": "[ARC098F] Donation \u9898\u89e3"
    },
    {
        "content": "\u667a\u6167\u9898\u3002\n\n\u9996\u5148\u53d1\u73b0\u5982\u679c\u6211\u4eec\u591a\u6b21\u7ecf\u8fc7\u4e00\u4e2a\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u6700\u540e\u4e00\u6b21\u7ecf\u8fc7\u65f6\u518d\u8fdb\u884c\u6350\u8d60\u662f\u4e0d\u52a3\u7684\u3002\u4e8e\u662f\u8fdb\u884c\u6350\u8d60\u53ef\u4ee5\u89c6\u4e3a\u5220\u6389\u8fd9\u4e2a\u70b9\uff0c\u800c\u4e0d\u8fdb\u884c\u6350\u8d60\u65f6\u6211\u4eec\u9700\u8981\u53ef\u4ee5\u5728\u5269\u4e0b\u7684\u70b9\u4efb\u610f\u8d70\u6765\u8d70\u53bb\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6539\u5199\u95ee\u9898\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u70b9 $u$\uff0c\u628a\u94b1\u6570\u51cf\u5c11 $b_u$ \u5e76\u5220\u6389 $u$ \u8fd9\u4e2a\u70b9\u3002\u6b64\u65f6\u6211\u4eec\u9700\u8981\u6ee1\u8db3\u5269\u4e0b\u7684\u70b9\u4f9d\u7136\u8fde\u901a\u4e14\u5269\u4e0b\u7684\u94b1\u6570\u4e0d\u5c0f\u4e8e $c_u=\\max\\{a_u-b_u,0\\}$\u3002\u76ee\u6807\u662f\u628a\u6574\u4e2a\u56fe\u5220\u5b8c\uff0c\u95ee\u6700\u5f00\u59cb\u9700\u8981\u591a\u5c11\u94b1\u3002\n\n\u5269\u4e0b\u7684\u70b9\u4f9d\u7136\u8fde\u901a\u8fd9\u4e2a\u9650\u5236\u6bd4\u8f83\u96be\u9876\uff0c\u8003\u8651\u5982\u679c\u6ca1\u6709\u5b83\u8be5\u600e\u4e48\u505a\u3002\u53d1\u73b0\u53ea\u9700\u8981\u6bcf\u6b21\u9009\u62e9 $c_u$ \u6700\u5927\u7684\u70b9\u5373\u53ef\uff0c\u8bc1\u660e\u8003\u8651\u8c03\u6574\u3002\n\n\uff08\u4e3a\u4e86\u540e\u7eed\u8ba8\u8bba\u7684\u65b9\u4fbf\u6211\u4eec\u5bf9 $c$ \u503c\u76f8\u540c\u7684\u70b9\u4ee5\u67d0\u79cd\u65b9\u5f0f\u5f3a\u884c\u89c4\u5b9a\u987a\u5e8f\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5047\u5b9a\u6240\u6709 $c$ \u4e0d\u540c\uff09\n\n\u4f46\u5b9e\u9645\u4e0a\u6211\u4eec\u4e0d\u4e00\u5b9a\u80fd\u9009\u62e9\u8fd9\u4e2a\u70b9\u3002\u53e6\u5916\uff0c\u56fe\u7684\u8fde\u901a\u6027\u8fd9\u4e2a\u4e1c\u897f\u6bd4\u8f83\u96be\u4ee5\u523b\u753b\uff0c\u6211\u4eec\u5e0c\u671b\u6709\u4e00\u4e2a\u5de5\u5177\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u7ee7\u7eed\u7b80\u5316\u95ee\u9898\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff08\u8fd9\u4ed6\u5988\u62ff\u5934\u53d1\u73b0\uff09\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u5de5\u5177\uff1akruskal \u91cd\u6784\u6811\u3002\u5982\u679c\u6211\u4eec\u5c06\u70b9\u6743\u8bbe\u4e3a $c$\uff0c\u6548\u4eff [P4899](https://www.luogu.com.cn/problem/P4899) \u5efa\u7acb\u5173\u4e8e\u70b9\u7684 kruskal \u91cd\u6784\u6811\uff08\u5177\u4f53\u5efa\u6811\u8fc7\u7a0b\u4e0d\u518d\u8d58\u8ff0\uff09\uff0c\u5b83\u6ee1\u8db3\u4ee5\u4e0b\u6027\u8d28\uff1a\n- \u6bcf\u4e2a\u5b50\u6811\u5bf9\u5e94\u539f\u56fe\u7684\u4e00\u4e2a\u8fde\u901a\u5757\uff1b\n- \u7236\u4eb2\u7684\u6743\u503c\u6bd4\u513f\u5b50\u5927\uff1b\n- \u4e24\u70b9 lca \u7684\u6743\u503c\u5373\u4ee3\u8868\u4e86\u8fd9\u4e24\u4e2a\u70b9\u95f4\u7684\u6700\u5c0f\u74f6\u9888\u3002\n\n\u90a3\u4e48 $c_u$ \u6700\u5927\u7684\u70b9\u4e00\u5b9a\u662f\u91cd\u6784\u6811\u7684\u6839\u3002\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u5b83\uff0c\u7b49\u4ef7\u4e8e\uff0c\u5b83\u53ea\u6709\u4e00\u4e2a\uff08\u6216\u8005\u6ca1\u6709\uff09\u513f\u5b50\u3002\u56e0\u4e3a\u5982\u679c\u5b83\u6709\u4e24\u4e2a\u513f\u5b50\uff0c\u90a3\u4e48\u67d0\u4e24\u4e2a\u4e0d\u540c\u513f\u5b50\u7684\u5b50\u6811\u91cc\u7684\u70b9\u4e4b\u95f4\u7684\u8def\u5f84\u5fc5\u7136\u7ecf\u8fc7\u5b83\uff0c\u5426\u5219\u5c31\u6709\u66f4\u5c0f\u7684\u74f6\u9888\u8def\u4e86\u3002\n\n\u62d3\u5c55\u4e00\u4e0b\u8fd9\u4e2a\u60f3\u6cd5\uff0c\u6211\u4eec\u8bbe $f_u$ \u4e3a\u53ea\u8003\u8651 $u$ \u5b50\u6811\u5185\u7684\u8282\u70b9\u65f6\u7684\u7b54\u6848\u3002\u8003\u8651 $u$ \u662f\u4f55\u65f6\u88ab\u5220\u6389\u7684\uff0c\u5b83\u4e00\u5b9a\u662f\u5728\u88ab\u5220\u5230\u53ea\u5269\u4e00\u4e2a\u513f\u5b50\u4ee5\u540e\u518d\u88ab\u5220\u6389\u3002\n\n\u5e76\u4e14\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u8fd9\u4e2a\u6700\u540e\u7684\u513f\u5b50\u91cc\u7684\u5b50\u6811\u91cc\u7684\u67d0\u4e9b\u70b9\u5728 $u$ \u4e4b\u524d\u5c31\u88ab\u5220\u6389\u4e86\uff0c\u90a3\u4e48\u628a\u5b83\u4eec\u62ff\u5230 $u$ \u88ab\u5220\u6389\u4e4b\u540e\uff0c\u518d\u6309\u539f\u6765\u7684\u987a\u5e8f\u5220\u6389\uff0c\u4e5f\u662f\u5408\u6cd5\u7684\u3002\u6240\u4ee5\u6211\u4eec\u7684\u5220\u70b9\u987a\u5e8f\u662f\uff1a\n1. \u9009\u5b9a $u$ \u7684\u67d0\u4e2a\u513f\u5b50 $v$\uff0c\u5220\u6389\u9664\u4e86 $v$ \u7684\u5b50\u6811\u548c $u$ \u4ee5\u5916\u7684\u6240\u6709\u70b9\uff1b\n2. \u5220\u6389 $u$\uff1b\n3. \u5220\u6389 $v$ \u7684\u5b50\u6811\u3002\n\n\u7531\u4e8e $u$ \u7684 $c$ \u662f\u5b50\u6811\u91cc\u6700\u5927\u7684\uff0c\u6240\u4ee5 $u$ \u7684\u9650\u5236\u4e5f\u662f\u6700\u4e25\u7684\u3002\u6240\u4ee5\u53ea\u8981\u5220\u5b8c $u$ \u4e4b\u540e\u7684\u94b1\u6570\u6ee1\u8db3\u9650\u5236\uff0c\u7b2c\u4e00\u6b65\u91cc\u6bcf\u4e00\u6b65\u7684\u94b1\u6570\u90fd\u4e0d\u4f1a\u8d85\u51fa\u9650\u5236\u3002\u53c8\u56e0\u4e3a\u6211\u4eec\u6bcf\u6b21\u81f3\u5c11\u53ef\u4ee5\u627e\u5230\u4e00\u4e2a\u5220\u6389\u4e4b\u540e\u80fd\u4fdd\u6301\u8fde\u901a\u6027\u7684\u70b9\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b65\u603b\u662f\u53ef\u4ee5\u5b8c\u6210\uff0c\u53ea\u662f\u9700\u8981\u94b1\u800c\u5df2\u3002\n\n\u7136\u540e\uff0c\u5220\u5b8c $u$ \u9700\u8981\u7559 $c_u$ \u7684\u94b1\uff0c\u540c\u65f6\u6211\u4eec\u63a5\u7740\u8981\u5220 $v$ \u7684\u5b50\u6811\uff0c\u9700\u8981 $f_v$ \u7684\u94b1\u3002\u90a3\u4e48\u8bb0 $s_u$ \u4e3a $u$ \u5b50\u6811\u5185\u7684 $b$ \u4e4b\u548c\uff0c\u53ef\u4ee5\u5f97\u5230\n$$f_u=\\max_vs_u-s_v+\\max\\{c_u,f_v\\}$$\n\u8fb9\u754c\u662f\u53f6\u5b50\u76f4\u63a5\u5220\u3002\u8fd9\u6837\u53ef\u4ee5\u5b8c\u6574\u89e3\u51b3\u95ee\u9898\uff0c\u65f6\u95f4\u74f6\u9888\u662f\u6392\u5e8f\u548c\u5e76\u67e5\u96c6\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nusing ll=long long;\ninline ll read(){\n\tll x=0;\n\tbool f=0;\n\tchar c=getchar();\n\twhile(!isdigit(c)){\n\t\tif(c=='-') f=1;\n\t\tc=getchar();\n\t}\n\twhile(isdigit(c)){\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn f?-x:x;\n}\nconst int maxn=1e5+5;\nint n,m,a[maxn],b[maxn],ord[maxn];\nbool cmp(int x,int y){\n\tif(a[x]!=a[y]) return a[x]<a[y];\n\treturn x<y;\n}\nvector<int> g[maxn],g2[maxn];\nint fa[maxn];\nint find(int u){\n\treturn u==fa[u]?u:fa[u]=find(fa[u]);\n};\nll s[maxn],f[maxn];\nvoid dfs(int u){\n\ts[u]=b[u];\n\tfor(int v:g2[u]){\n\t\tdfs(v);\n\t\ts[u]+=s[v];\n\t}\n\tf[u]=s[u]+a[u];\n\tfor(int v:g2[u])\n\t\tf[u]=min(f[u],s[u]-s[v]+max(1ll*a[u],f[v]));\n}\nint main(){\n#ifdef LOCAL\n\tfreopen(\"in.txt\",\"r\",stdin);\n\tfreopen(\"out.txt\",\"w\",stdout);\n#endif\n\tn=read();\n\tm=read();\n\tfor(int i=1;i<=n;i++){\n\t\ta[i]=read();\n\t\tb[i]=read();\n\t\ta[i]=max(a[i]-b[i],0);\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tint u,v;\n\t\tu=read();\n\t\tv=read();\n\t\tif(cmp(u,v)) swap(u,v);\n\t\tg[u].push_back(v);\n\t}\n\tfor(int i=1;i<=n;i++) ord[i]=i;\n\tsort(ord+1,ord+n+1,cmp);\n\tfor(int i=1;i<=n;i++) fa[i]=i;\n\tfor(int i=1;i<=n;i++){\n\t\tint u=ord[i];\n\t\tfor(int v:g[u]) if(find(v)!=u){\n\t\t\tg2[u].push_back(fa[v]);\n\t\t\tfa[fa[v]]=u;\n\t\t}\n\t}\n\tdfs(ord[n]);\n\tprintf(\"%lld\\n\",f[ord[n]]);\n#ifdef LOCAL\n\tfprintf(stderr,\"%f\\n\",1.0*clock()/CLOCKS_PER_SEC);\n#endif\n\treturn 0;\n}\n```\n\u53ef\u4ee5\u53d1\u73b0\u8fd9\u7bc7\u9898\u89e3\u4e3b\u8981\u5e72\u4e86\u4e24\u4ef6\u4e8b\uff0c\u4e00\u662f\u6bd4\u8f83\u4ed4\u7ec6\u5730\u8bf4\u660e\u4e86\u5404\u4e2a\u6b65\u9aa4\u7684\u5408\u6cd5\u6027\u3002\n\n\u4e8c\u662f\uff0c\u6211\u5c1d\u8bd5\u63e3\u6469\u4e86\u505a\u51fa\u8fd9\u9898\u7684\u601d\u8003\u8fc7\u7a0b\u3002\u867d\u7136\u4f46\u662f\uff0c\u6211\u65e0\u8bba\u5982\u4f55\u90fd\u89c9\u5f97\u60f3\u5230 kruskal \u91cd\u6784\u6811\u662f\u6781\u5176\u532a\u5937\u6240\u601d\u7684\uff0c\u6211\u89c9\u5f97\u6b63\u5e38\u4eba\u7c7b\u57fa\u672c\u4e0d\u53ef\u80fd\u5f80\u8fd9\u65b9\u9762\u60f3\u3002\n\n\u4e0d\u8fc7\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6211\u6700\u7ec8\u8fd8\u662f\u53d1\u73b0\u8fd9\u4e00\u6b65\u5176\u5b9e\u4e5f\u7b97\u662f\u6709\u8ff9\u53ef\u5faa\u7684\uff0c\u5982\u4e0a\u6240\u5199\u7684\u3002\u6bd4\u5982\uff0c\u5904\u7406\u56fe\u7684\u5de5\u5177\u4e5f\u4e0d\u662f\u5f88\u591a\uff0c\u6839\u636e\u9700\u6c42\u628a\u81ea\u5df1\u4f1a\u7684\u6328\u4e2a\u5957\u4e00\u904d\u53ef\u80fd\u5c31\u60f3\u5230\u91cd\u6784\u6811\u4e86\u3002\u8fd9\u4e5f\u8bb8\u542f\u53d1\u6211\u4eec\u8bd5\u9519\u7684\u8fc7\u7a0b\u6709\u65f6\u662f\u4e0d\u53ef\u907f\u514d\u7684\u3002\n\n\u603b\u4e4b\u8fd8\u662f\u90a3\u53e5\u8bdd\uff0c\u6709\u6ca1\u6709\u8001\u54e5\u6559\u6559\u6211\u554a\u3002",
        "postTime": 1654593791,
        "uid": 174045,
        "name": "FZzzz",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT4144 [ARC098D] Donation"
    },
    {
        "content": "\u9996\u5148\u5176\u5b9e\u4e0d\u96be\u60f3\u5230 $c_u = \\max\\{a_u - b_u, 0\\}$\n\n\u8fd9 $c_u $ \u7684\u5b9e\u9645\u610f\u4e49\u8868\u793a\u7684\u662f**\u4efb\u610f\u65f6\u523b**\u5728 $u$ \u70b9\u7684\u94b1\u6570\u90fd\u4f1a\u5927\u4e8e $c_u$\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u5176\u5b9e\u8fd9\u4e2a\u94b1\u6570\u662f\u4e00\u5b9a\u9012\u51cf\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u6309\u7167 $c$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5efa\u4e00\u68f5\u91cd\u6784\u6811\u3002\n\n\u7136\u540e\u5c31\u662f\u5728\u91cd\u6784\u6811\u4e0a $dp$ \u4e86\u3002\n\n\u8bbe $dp_u$ \u8868\u793a\u904d\u5386\u5b8c\u4e86 $u$ \u7684\u5b50\u6811\uff08\u4e0d\u5fc5\u56de\u5230 u\uff09 \u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u7136\u540e\u6211\u4eec\u6709\u4e00\u79cd\u51b3\u7b56\u3002\n\n\u5982\u679c\u8fd9\u4e2a\u8282\u70b9\u5206\u51fa\u53bb\u4e86\uff0c\u4f1a\u4ea7\u751f $k$ \u4e2a\u8fde\u901a\u5757\u3002\n\n\u90a3\u4e48\u6211\u4eec\u7684\u9009\u62e9\u4e00\u5b9a\u662f\uff0c\u5148\u8d70\u6389 $k-1$ \u4e2a\u8fde\u901a\u5757\uff0c\u7136\u540e\u56de\u5230 $u$\uff0c\u5e76\u652f\u4ed8 $u$\uff0c\u7136\u540e\u518d\u8d70\u90a3\u4e2a\u6ca1\u6709\u8d70\u7684\u5b50\u6811\uff0c\u8fd9\u6837\u662f\u6700\u4f18\u7684\u3002\n\n\u6240\u4ee5 code...\n\n```cpp\n#include <bits/stdc++.h>\nusing i64 = long long;\nusing u64 = unsigned long long;\nusing u32 = unsigned;\n\nint main() {\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(nullptr);\n\tint n, m;\n\tstd::cin >> n >> m;\n\tstd::vector<int> a(n);\n\tstd::vector<int> b(n);\n\tfor (int i = 0; i < n; i++) {\n\t\tint x, y;\n\t\tstd::cin >> x >> y;\n\t\tstd::tie(a[i], b[i]) = {x, y};\n\t}\n\tstd::vector<int> c(n);\n\tfor (int i = 0; i < n; i++) {\n\t\tc[i] = a[i] - b[i];\n\t\tif (c[i] < 0) {\n\t\t\tc[i] = 0;\n\t\t}\n\t}\n\tstd::vector<int> ord(n, 0);\n\tstd::iota(ord.begin(), ord.end(), 0);\n\tstd::sort(ord.begin(), ord.end(), [&](int x, int y) {\n\t\treturn c[x] < c[y];\n\t});\n\tstd::vector<std::vector<int>> g0(n);\n\tfor (int i = 0; i < m; i++) {\n\t\tint x, y;\n\t\tstd::cin >> x >> y;\n\t\t--x;\n\t\t--y;\n\t\tg0[x].emplace_back(y);\n\t\tg0[y].emplace_back(x);\n\t}\n\tstd::vector<std::vector<int>> g(n);\n\tstd::vector<int> p(n, 0);\n\tstd::iota(p.begin(), p.end(), 0);\n\tauto find = [&](int x) {\n\t\twhile (x != p[x]) {\n\t\t\tx = p[x] = p[p[x]];\n\t\t}\n\t\treturn x;\n\t};\n\tstd::vector<bool> vis(n, false);\n\tfor (auto u : ord) {\n\t\tfor (auto v : g0[u]) {\n\t\t\tif (vis[v] && find(v) != u) {\n\t\t\t\tg[u].emplace_back(find(v));\n\t\t\t\tp[find(v)] = u;\n\t\t\t}\n\t\t}\n\t\tvis[u] = true;\n\t}\n\tstd::vector<i64> s(n, 0);\n\tstd::vector<i64> dp(n, 1e18);\n\tstd::function<void(int)> dfs = [&](int u) {\n\t\ts[u] = b[u];\n\t\tif (g[u].empty()) {\n\t\t\tdp[u] = std::max(a[u], b[u]);\n\t\t} else {\n\t\t\tfor (auto v : g[u]) {\n\t\t\t\tdfs(v);\n\t\t\t\ts[u] += s[v];\n\t\t\t}\n\t\t\tfor (auto v : g[u]) {\n\t\t\t\tdp[u] = std::min(dp[u], s[u] - s[v] + std::max(dp[v], (i64)c[u]));\n\t\t\t}\n\t\t}\n\t};\n\tdfs((int)ord.back());\n\tstd::cout << dp[(int)ord.back()] << \"\\n\";\n\treturn 0;\n}\n```",
        "postTime": 1612272679,
        "uid": 96580,
        "name": "SXNhdW5veWE",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT4144 \u3010[ARC098D] Donation\u3011"
    },
    {
        "content": "### ARC 098F\n#### Solution\n\u6839\u636e\u89c2\u5bdf\u4e0d\u96be\u53d1\u73b0\u4ee5\u4e0b\u4e09\u4e2a\u7ed3\u8bba\uff1a\n1. \u6bcf\u4e2a\u8282\u70b9\u6700\u591a\u6350\u8d60\u4e00\u6b21\uff0c\u56e0\u4e3a\u6350\u8d60\u66f4\u591a\u4e00\u5b9a\u4e0d\u4f18\n2. \u6350\u8d60\u4e86\u67d0\u4e2a\u70b9\u4e4b\u540e\u4e0d\u4f1a\u518d\u8bbf\u95ee\u8fd9\u4e2a\u70b9\uff0c\u56e0\u4e3a\u5982\u679c\u4f1a\u518d\u6b21\u8bbf\u95ee\uff0c\u5148\u6350\u8d60\u4e86\u4e00\u5b9a\u4e0d\u4f18\n3. \u6bcf\u6b21\u5230\u8fbe\u4e00\u4e2a\u70b9$i$\u4e4b\u540e\uff0c\u65e0\u8bba\u662f\u5426\u6350\u8d60\uff0c\u5269\u4f59\u94b1\u6570\u5e94\u8be5\u4e0d\u5c0f\u4e8e$max(a_i-b_i,0)$\n\n\u90a3\u4e48\u4e0d\u96be\u5f97\u51fa\u4e00\u79cd\u8d2a\u5fc3\u7b56\u7565\uff1a\u9996\u5148\u9009\u62e9\u4e00\u4e2a\u70b9$u$\uff0c\u5047\u8bbe\u5220\u6389$u$\u540e\u5f62\u6210\u4e86$k$\u4e2a\u8fde\u901a\u5757\uff0c\u5219\u5148\u6350\u8d60\u6389$k-1$\u4e2a\uff0c\u7136\u540e\u6350\u8d60$u$\uff0c\u6700\u540e\u6350\u8d60\u5269\u4e0b\u7684\u4e00\u4e2a\u8fde\u901a\u5757\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u786e\u5b9a\u70b9$u$\uff0c\u8003\u8651\u4e24\u4e2a\u70b9$x,y$\uff0c\u5148\u6350\u8d60$x$\u518d\u6350\u8d60$y$\u7684\u9650\u5236\u662f$a_x+b_y$\uff0c\u5148\u6350\u8d60$y$\u518d\u6350\u8d60$x$\u7684\u9650\u5236\u662f$a_y+b_x$\uff0c\u56e0\u4e3a\u8981\u6c42\u9650\u5236\u6700\u5c0f\uff0c\u90a3\u4e48\u5148\u9009$x$\u7684\u6761\u4ef6\u662f$a_x+b_y\\leq a_y+b_x$\uff0c\u5373$a_i-b_i\\leq a_j-b_j$\uff0c\u4e5f\u5c31\u662f$c_i\\leq c_j$\uff0c\u4e8e\u662f\u6211\u4eec\u9009\u62e9$c_i$\u6700\u5927\u7684\u70b9\u4f5c\u4e3a$u$\u5373\u53ef\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u6bcf\u6b21\u9009\u62e9\u7684$u$\u6784\u6210\u4e86\u4e00\u4e2a\u6811\u5f62\u7ed3\u6784\uff0c\u4e14\u6ee1\u8db3$c_i\\leq c_{fa_i}$\uff0c\u8fd9\u68f5\u6811\u53ef\u4ee5\u901a\u8fc7\u5c06\u6240\u6709\u70b9\u6309$c_i$\u4ece\u5c0f\u5230\u8fbe\u6392\u5e8f\u540e\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u6bcf\u4e2a\u70b9\u6240\u5c5e\u7684\u8fde\u901a\u5757\u6c42\u51fa\u3002\n\n\u4e8e\u662f\u4fbf\u53ef\u4ee5\u6811\u5f62dp\u4e86\uff0c\u8bb0$dp_i$\u4e3a\u6350\u8d60\u70b9$i$\u548c\u5b83\u7684\u6240\u6709\u5b50\u6811\u81f3\u5c11\u9700\u8981\u591a\u5c11\u94b1\uff0c$sum_i$\u8868\u793a$i$\u5b50\u6811\u4e2d\u7684\u6240\u6709\u70b9\u7684$b_i$\u4e4b\u548c\uff0c\u90a3\u4e48\u53ef\u4ee5\u679a\u4e3e\u6700\u540e\u6350\u8d60\u7684\u5b50\u6811\u8fdb\u884c\u8f6c\u79fb\n$$\ndp_u=min_{v \\in son_u}\\{sum_u-sum_v+max(dp_v,c_v)\\}\n$$\n\n\u5f53$u$\u4e3a\u53f6\u5b50\u7684\u65f6\u5019\u6709$dp_u=max(a_i,b_i)$\n#### Code\n```cpp\nint n,m,len;\nint head[MAXN],f[MAXN],a[MAXN],b[MAXN],ord[MAXN],vis[MAXN];\nll sum[MAXN],dp[MAXN],c[MAXN];\nvector<int> G[MAXN];\n\nstruct Edge{\n    int to,next;\n} e[MAXN << 1];\n\nvoid add_edge(int u,int v){\n    e[++len] = (Edge){v,head[u]};\n    head[u] = len;\n}\n\nint Find(int x){\n    if(x == f[x]) return x;\n    return f[x] = Find(f[x]);\n}\n\nvoid dfs(int u){\n    sum[u] = b[u];\n    if(G[u].empty()){\n        dp[u] = max(a[u],b[u]);\n        return;\n    }\n    for(int v : G[u]){\n        dfs(v);\n        sum[u] += sum[v];\n    }\n    dp[u] = llINF;\n    for(int v : G[u])\n        dp[u] = min(dp[u],sum[u] - sum[v] + max(dp[v],c[u]));\n}\n\nbool cmp(const int &x,const int &y){\n    return c[x] < c[y];\n}\n\nint main(){\n    memset(head,-1,sizeof(head));\n    scanf(\"%d%d\",&n,&m);\n    for(int i = 1;i <= n;i++){\n        scanf(\"%d%d\",&a[i],&b[i]);\n        ord[i] = f[i] = i;\n        c[i] = max(0,a[i] - b[i]);\n    }\n    sort(ord + 1,ord + 1 + n,cmp);\n    for(int i = 1,u,v;i <= m;i++){\n        scanf(\"%d%d\",&u,&v);\n        add_edge(u,v); add_edge(v,u);\n    }\n    for(int i = 1;i <= n;i++){\n        int u = ord[i];\n        for(int i = head[u];i != -1;i = e[i].next){\n            int v = e[i].to;\n            if(vis[v] && Find(v) != u){\n                G[u].push_back(Find(v));\n                f[Find(v)] = u;\n            }\n        }\n        vis[u] = 1;\n    }\n    dfs(ord[n]);\n    printf(\"%lld\\n\",dp[ord[n]]);\n    return 0;\n}\n```",
        "postTime": 1607521646,
        "uid": 108894,
        "name": "\u5173\u6000\u4ed6\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT4144 \u3010[ARC098D] Donation\u3011"
    }
]
[
    {
        "content": "\u9898\u610f\u662f\u7ed9\u5b9a\u4e00\u68f5\u6811\uff0c\u8981\u6c42\u65ad\u5f00\u4e00\u4e9b\u8fb9\uff0c\u4f7f\u5f97\u8fde\u901a\u5757\u8981\u4e48\u662f\u5168\u6b63\u6570\uff0c\u8981\u4e48\u662f\u603b\u548c\u4e3a\u8d1f\u6570\u3002\r\n\r\n\u6570\u636e\u8303\u56f4 $n \\le 5000$\uff0c\u6697\u793a\u6709 $O(n^2)$ \u7684\u505a\u6cd5\uff0c\u6811\u4e0a\u7684\u8bdd\u4e00\u822c\u90fd\u662f\u8003\u8651\u6811\u5f62 DP\u3002\r\n\r\n\u633a\u7b80\u5355\u7684\u4e00\u4e2a\u60f3\u6cd5\u662f\u628a\u6743\u503c\u548c\u7b54\u6848\u4e92\u6362\uff0c\u72b6\u6001\u8bbe\u4e3a $f_{i,j}$ \u8868\u793a\u4ee5 $i$ \u4e3a\u6839\uff0c\u7136\u540e\u65ad\u5f00\u4e86 $j$ \u6b21\u3002\r\n\r\n\u6211\u4eec\u601d\u8003\u5982\u4f55\u52a0\u5165\u4e00\u4e2a\u5b50\u6811\uff0c\u4f1a\u53d1\u73b0\u8fd9\u4e1c\u897f\u597d\u50cf\u4e0d\u592a\u597d\u8f6c\u79fb\u5462\uff0c\u7531\u4e8e\u9898\u76ee\u4e2d\u8fde\u901a\u5757\u548c\u5168\u6b63\u6709\u5173\uff0c\u4e0d\u59a8\u8bbe $f_{i,j,0/1}$ \u8868\u793a\u4ee5 $i$ \u4e3a\u6839\uff0c\u7136\u540e\u65ad\u5f00\u4e86 $j$ \u6b21\u4e4b\u540e\u662f\u5426\u5168\u6b63\u3002\r\n\r\n\u7136\u540e\u8003\u8651 $f_{i,j,1}$ \u5982\u4f55\u8f6c\u79fb\uff0c\u53d1\u73b0\u52a0\u5165\u4e00\u4e2a\u5b50\u6811 $f_{v,k,1}$ \u5c31\u4f1a\u53d8\u6210 $f_{i,j+k,1}$\uff0c\u6211\u4eec\u4e0d\u80fd\u52a0\u5165\u4e00\u4e2a\u5b50\u6811 $f_{v,k,0}$\uff0c\u56e0\u4e3a\u8fd9\u6837\u4f1a\u5bfc\u81f4\u8fd9\u4e2a\u72b6\u6001\u53d8\u6210 $f_{i,j+k,0}$\u3002\r\n\r\n\u7136\u540e\u8003\u8651 $f_{i,j,0}$ \u5982\u4f55\u8f6c\u79fb\uff0c\u8fd9\u4e1c\u897f\u5c31\u6bd4\u8f83\u5bbd\u677e\u4e86\uff0c$f_{v,k,0/1}$ \u90fd\u53ef\u4ee5\u8f6c\u79fb\u5230\u8fd9\u91cc\u3002\r\n\r\n\u4ee5\u4e0a\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u6811\u5f62 DP\uff0c\u7136\u540e\u6211\u4eec\u8003\u8651\u65ad\u5f00\u4e00\u4e2a\u5b50\u6811\uff0c\u53d1\u73b0\u9700\u8981\u65ad\u5f00\u4e00\u4e2a\u5b50\u6811\uff0c\u5fc5\u987b\u6ee1\u8db3\u603b\u548c\u5c0f\u4e8e $0$ \u6216\u8005\u5b83\u662f\u5168\u662f\u6b63\u6570\uff0c\u4e24\u79cd\u60c5\u51b5\u7a0d\u5fae\u5224\u65ad\u4e00\u4e0b\u5c31\u53ef\u4ee5\u4e86\u3002\r\n\r\n\u5bf9\u4e8e dp \u6570\u7ec4\u521d\u503c\u8bbe\u4e3a\u6b63\u65e0\u7a77\uff0c\u540c\u65f6\u8f6c\u79fb\u7684\u65f6\u5019\u7528\u53e6\u5916\u4e00\u4e2a\u8f85\u52a9\u6570\u7ec4\u6765\u505a\u4f1a\u6bd4\u8f83\u65b9\u4fbf\u3002\r\n\r\n\u611f\u8c22 @Loser_king \u5b66\u957f\u5e2e\u52a9\u3002\r\n\r\n```cpp\r\n#include <bits/stdc++.h>\r\n#define int long long \r\nusing namespace std;\r\nconst int INF=5e3+5;\r\nstruct _node_edge{\r\n\tint to_,next_;\r\n}edge[INF<<1];\r\n// f[x][y][0/1] \u8868\u793a x \u4e3a\u6839\u7684\u5b50\u6811\u5185\uff0c\u65ad\u5f00\u4e86 y \u6b21\uff0c\u5f53\u524d\u662f\u5426\u662f\u5168\u6b63  1/0 \u7684\u603b\u548c\u6700\u5c0f\u503c \r\nint a[INF],sz[INF],tot,head[INF],f[INF][INF][3],f1[INF][3],n;\r\nvoid add_edge(int x,int y) {\r\n\tedge[++tot]=(_node_edge){y,head[x]};\r\n\thead[x]=tot;return ; \r\n}\r\nvoid DFS(int x,int fa) {\r\n\tif (a[x]>0) {\r\n\t\tf[x][0][1]=a[x];\r\n\t\tf[x][0][0]=a[x];\r\n\t}\r\n\telse f[x][0][0]=a[x];\r\n\tsz[x]=1;\r\n\tfor (int i=head[x];i;i=edge[i].next_) {\r\n\t\tint v=edge[i].to_;\r\n\t\tif (v==fa) continue;\r\n\t\tDFS(v,x);\r\n\t\tfor (int k=0;k<=sz[x]+sz[v];k++) f1[k][0]=f1[k][1]=1e18;\r\n\t\tfor (int j=sz[x];~j;j--)\r\n\t\t\tfor (int k=sz[v];~k;k--) {\r\n\t\t\t\tf1[j+k][1]=min(f1[j+k][1],f[x][j][1]+f[v][k][1]);\r\n\t\t\t\tf1[j+k][0]=min(f1[j+k][0],min(f[x][j][0],f[x][j][1])+min(f[v][k][0],f[v][k][1]));\r\n\t\t\t\tif (f[v][k][0]<0 || f[v][k][1]<1e17) {\r\n\t\t\t\t\tf1[j+k+1][0]=min(f1[j+k+1][0],f[x][j][0]);\r\n\t\t\t\t\tf1[j+k+1][1]=min(f1[j+k+1][1],f[x][j][1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\tfor (int j=0;j<=sz[x]+sz[v];j++) \r\n\t\t\tf[x][j][0]=f1[j][0],f[x][j][1]=f1[j][1];\r\n\t\tsz[x]+=sz[v];\r\n\t}\r\n\treturn ;\r\n}\r\nsigned main()\r\n{\r\n\tmemset(f,63,sizeof f);\r\n\tios::sync_with_stdio(false);\r\n\tcin>>n;\r\n\tfor (int i=1;i<=n;i++) {\r\n\t\tcin>>a[i];\r\n\t\tif (!a[i]) return 1;\r\n\t}\r\n\tfor (int i=1;i<n;i++) {\r\n\t\tint x=0,y=0;cin>>x>>y;\r\n\t\tadd_edge(x,y);add_edge(y,x);\r\n\t}\r\n\tDFS(1,0);\r\n//\tcout<<f[1][0][0]<<\" \"<<f[1][0][1]<<\" endl\\n\";\r\n\tfor (int i=0;i<=n;i++)\r\n\t\tif (f[1][i][0]<0 || f[1][i][1]<1e17) {cout<<i<<\"\\n\";return 0;}\r\n\treturn 0;\r\n}\r\n```\r\n",
        "postTime": 1669038500,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "AT_aising2019_e"
    }
]
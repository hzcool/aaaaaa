[
    {
        "content": "## \u9898\u610f\n\n[\u9898\u76ee\u94fe\u63a5](https://agc016.contest.atcoder.jp/tasks/agc016_d)\n\n\u7ed9\u51fa\u4e24\u4e2a\u957f\u5ea6\u4e3a$n$\u7684\u6570\u7ec4$a, b$\n\n\u6bcf\u6b21\u53ef\u4ee5\u5c06$a$\u4e2d\u7684\u67d0\u4e2a\u6570\u66ff\u6362\u4e3a\u6240\u6709\u6570$xor$\u4e4b\u548c\u3002\n\n\u82e5$a$\u6570\u7ec4\u53ef\u4ee5\u8f6c\u6362\u4e3a$b$\u6570\u7ec4\uff0c\u8f93\u51fa\u6700\u5c11\u64cd\u4f5c\u6b21\u6570\n\n\u5426\u5219\u8f93\u51fa$-1$\n\n## Sol\n\n\u4e00\u822c\u90a3\u770b\u5230\u8fd9\u79cd$N \\leqslant 10^5$\u800c\u4e14\u4e0d\u53ef\u505a\u7684\u9898\u80af\u5b9a\u662f\u5148\u627e\u7ed3\u8bba\u5566\n\n\u4e0d\u96be\u770b\u51fa\uff0c\u6211\u4eec\u628a\u6240\u6709\u6570$xor$\u8d77\u6765\u7684\u6570\u66ff\u6362\u6389\u4e4b\u540e\u518d\u6b21$xor$\uff0c\u5f97\u5230\u7684\u4e00\u5b9a\u662f\u88ab\u66ff\u6362\u6389\u7684\u6570\u3002\n\n\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u628axor\u51fa\u6765\u7684\u6570\u653e\u5230\u4e00\u4e2a\u65b0\u7684\u4f4d\u7f6e$N+1$\uff0c\u8fd9\u6837\u6bcf\u6b21\u64cd\u4f5c\u5c31\u53d8\u6210\u4e86\u4ea4\u6362\u7b2c$N+1$\u4e2a\u4f4d\u7f6e\u7684\u6570\u548c\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e$x$\u7684\u6570\n\n\u603b\u7684\u95ee\u9898\u5c31\u53d8\u6210\u4e86\n\n>\u7ed9\u51fa\u4e24\u4e2a\u957f\u5ea6\u4e3a$N+1$\u7684\u6570\u7ec4$a, b$\uff0c\u6bcf\u6b21\u53ef\u4ee5\u5728$a$\u4e2d\u4ea4\u6362$\\forall i \\in [1, n]$\u4f4d\u7f6e\u548c$N+1$\u4f4d\u7f6e\u7684\u6570\uff0c\u95ee\u6700\u5c11\u4ea4\u6362\u51e0\u6b21\u53d8\u4e3a$b$\u6570\u7ec4\n\n\u9996\u5148\u628a$-1$\u7684\u60c5\u51b5\u5224\u6389\uff0c\u5f88\u663e\u7136\uff0c\u628a\u4e24\u4e2a\u6570\u7ec4\u6392\u5e8f\u540e\uff0c\u82e5\u5b58\u5728\u4e00\u4e2a\u4f4d\u7f6e\u4e0d\u76f8\u540c\uff0c\u5219\u4e00\u5b9a\u65e0\u89e3\n\n\u5426\u5219\u4e00\u5b9a\u6709\u89e3\u3002\n\n\u5230\u8fd9\u91cc\u6211\u5c31\u4e0d\u4f1a\u4e86\u3002\u3002\u3002\u3002\n\n\u5b98\u65b9\u9898\u89e3\u975e\u5e38\u795e\u4ed9\u3002\n\n\u5bf9\u4e8e$i$\u4f4d\u7f6e\uff0c\u82e5$a_i \\not = b_i$\uff0c\u5219\u5411$a_i$\u5230$b_i$\u8fde\u4e00\u6761\u8fb9\n\n\u6700\u7ec8\u7b54\u6848 = \u603b\u8fb9\u6570 + \u8054\u901a\u5757\u6570 - 1\n\n\u60f3\u4e00\u60f3\u4e3a\u4ec0\u4e48\uff0c\u5bf9\u4e8e\u8054\u901a\u5757\u5185\u7684\u70b9\uff0c\u5047\u8bbe\u5176\u5927\u5c0f\u4e3a$x$\uff0c\u6211\u4eec\u4e00\u5b9a\u53ef\u4ee5\u901a\u8fc7$x-1$\u6b21\u64cd\u4f5c\u628a\u4ed6\u4eec\u5bf9\u5e94\u7684$a$\u548c$b$\u53d8\u7684\u76f8\u540c\n\n\u5bf9\u4e8e\u4e0d\u540c\u8054\u901a\u5757\u4e4b\u95f4\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u6b65\u64cd\u4f5c\u4f7f\u5f97\u7b2c$N+1$\u4e2a\u4f4d\u7f6e\u7684\u6570\u5728\u4e24\u4e2a\u8054\u901a\u5757\u4e4b\u95f4\u8f6c\u5316(\u7b2c\u4e00\u4e2a\u9664\u5916)\n\n\u5bf9\u4e8e\u7b2c$N+1$\u4e2a\u4f4d\u7f6e\u9700\u8981\u5355\u72ec\u8003\u8651\uff1a\u5982\u679c\u5b83\u5df2\u7ecf\u5728\u8054\u901a\u5757\u91cc\u5219\u4e0d\u9700\u8981\u8003\u8651\uff0c\u5426\u5219\u628a\u5b83\u770b\u505a\u5355\u72ec\u8054\u901a\u5757\n\n\u5426\u5219\n\n\t2\n\t1 3\n\t3 1\n\n\u53ef\u4ee5\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u8054\u901a\u5757\u4e2a\u6570\n```cpp\n#include<bits/stdc++.h>\nconst int MAXN = 4e5 + 10;\nusing namespace std;\ninline int read() {\n\tchar c = getchar(); int x = 0, f = 1;\n\twhile(c < '0' || c > '9') {if(c == '-') f = -1; c = getchar();}\n\twhile(c >= '0' && c <= '9') x = x * 10 + c - '0', c = getchar();\n\treturn x * f;\n}\nint N;\nint a[MAXN], b[MAXN], ta[MAXN], tb[MAXN], sa, sb, tot = 0, date[MAXN], fa[MAXN];\nmap<int, bool> ti;\nint find(int x) {\n\treturn fa[x] == x ? fa[x] : fa[x] = find(fa[x]);\n}\nint unionn(int x, int y) {\n\tfa[x] = y;\n}\nint main() {\n\tN = read();\n\tfor(int i = 1; i <= N; i++) a[i] = read(), sa ^= a[i]; a[N + 1] = sa;\n\tfor(int i = 1; i <= N; i++) b[i] = read(), sb ^= b[i]; b[N + 1] = sb;\n\tN++;\n\tmemcpy(ta, a, sizeof(a)); memcpy(tb, b, sizeof(b));\n\tsort(ta + 1, ta + N + 1); sort(tb + 1, tb + N + 1);\n\tfor(int i = 1; i <= N - 1; i++) if(ta[i] != tb[i]) return puts(\"-1\"), 0;\n \n\tint ans = 0, num = 0;\n\tfor(int i = 1; i <= N; i++) \n\t\tif(a[i] != b[i] || (i == N)) {\n\t\t\tdate[++num] = a[i]; date[++num] = b[i];\n\t\t\tif(i < N)ans++;//\u6700\u540e\u4e00\u5757\u5355\u72ec\u8003\u8651\n\t\t}\n\tif(ans == 0) return puts(\"0\"), 0;\n \n\tsort(date + 1, date + num + 1);\n\tnum = unique(date + 1, date + num + 1) - date - 1;\n\tfor(int i = 1; i <= num; i++) fa[i] = i;\n\tfor(int i = 1; i <= N; i++)\n\t\tif(a[i] != b[i]) {\n\t\t\ta[i] = lower_bound(date + 1, date + num + 1, a[i]) - date,\n\t\t\tb[i] = lower_bound(date + 1, date + num + 1, b[i]) - date;\n\t\t\tif(!ti[a[i]]) ti[a[i]] = 1;\n\t\t\tif(!ti[b[i]]) ti[b[i]] = 1;\n\t\t\tunionn(find(a[i]), find(b[i]));\n\t\t}\n\t\t\n\tfor(int i = 1; i <= num; i++)\n\t\tif(fa[i] == i) ans++;\n\tprintf(\"%d\", ans - 1);\n \n\treturn 0;\n}\n```",
        "postTime": 1538051602,
        "uid": 36984,
        "name": "attack",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT2388 \u3010XOR Replace\u3011"
    },
    {
        "content": "\u5728\u535a\u5ba2\u56ed\u98df\u7528\u66f4\u4f73\uff1a[https://www.cnblogs.com/PinkRabbit/p/AGC016.html](https://www.cnblogs.com/PinkRabbit/p/AGC016.html)\u3002\n\n\u4ee4\u521d\u59cb\u7684\u5f02\u6216\u548c\u4e3a $x$\uff0c\u62ff\u5728\u624b\u4e2d\uff0c\u76f8\u5f53\u4e8e\u6bcf\u6b21\u7528\u624b\u4e2d\u7684\u6570\u628a $a$ \u4e2d\u7684\u4e00\u4e2a\u503c\u9876\u6389\uff0c\u7136\u540e\u628a\u539f\u6765\u7684\u503c\u62ff\u5728\u624b\u91cc\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u5148\u5224\u4e00\u4e0b $b$ \u662f\u5426\u4e00\u5b9a\u80fd\u88ab\u5f97\u5230\uff1a\u53ea\u9700\u5224 $b$ \u7684\u53ef\u91cd\u96c6\u662f\u5426\u5305\u542b\u4e8e $a \\cup \\{x\\}$ \u5373\u53ef\u3002\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u8fc7\u7a0b\uff0c\u7528 $x$ \u66ff\u6362\u4e86 $a_p$\uff0c\u7136\u540e\u7528 $a_p$ \u66ff\u6362\u4e86 $a_q$\uff0c\u5faa\u73af\u4e0b\u53bb\u3002\n\n\u5176\u5b9e\u6700\u7ec8\u4e00\u5b9a\u662f\u8981\u7528 $b_i$ \u66ff\u6362 $a_i$ \u7684\uff0c\u800c\u4e0a\u9762\u7684\u8fc7\u7a0b\u53c8\u662f\u4ece $x$ \u51fa\u53d1\u8d70\u4e86\u4e00\u6761\u8def\u3002\n\n\u8fd9\u542f\u53d1\u6211\u4eec\u4ece $b_i$ \u5411 $a_i$ \u8fde\u8fb9\uff08\u4e0d\u540c\u4f4d\u7f6e\u4e0a\u76f8\u540c\u7684\u6570\u503c\u5bf9\u5e94\u540c\u4e00\u4e2a\u70b9\uff09\uff0c\u7136\u540e\u5c1d\u8bd5\u4ece $x$ \u51fa\u53d1\u904d\u5386\u6bcf\u6761\u8fb9\u3002\n\n\u6ce8\u610f\u5982\u679c\u56fe\u662f\u4e00\u4e2a\u5305\u542b $x$ \u7684\u8fde\u901a\u5757\uff0c\u5219\u4e00\u5b9a\u53ef\u4ee5\u627e\u5230\u4e00\u6761\u6b27\u62c9\u8def\u5f84\uff08\u4e0d\u4e00\u5b9a\u662f\u56de\u8def\uff09\u8986\u76d6\u6240\u6709\u8fb9\u3002\n\n\u5982\u679c\u56fe\u4e0d\u8fde\u901a\uff0c\u6216 $x$ \u4e0d\u5728\u8fde\u901a\u5757\u5185\uff08$x$ \u662f\u5b64\u7acb\u70b9\uff09\uff0c\u5219\u7b54\u6848\u5c31\u662f\u8fb9\u6570\u518d\u52a0\u4e0a\u8fde\u901a\u5757\u6570\u518d\u51cf\u53bb $1$\uff08\u5982\u679c $x$ \u662f\u5b64\u7acb\u70b9\u5c31\u4e0d\u7528\u51cf $1$\uff09\u3002\n\n```cpp\n#include <cstdio>\n#include <vector>\n#include <map>\n\nconst int MN = 100005;\n\nint N, A[MN], B[MN], X, cnt, M, Ans;\nstd::map<int, int> mp;\n\nint vis[MN];\nstd::vector<int> G[MN];\nvoid DFS(int u) {\n\tvis[u] = 1;\n\tfor (int v : G[u]) if (!vis[v]) DFS(v);\n}\n\nint main() {\n\tscanf(\"%d\", &N);\n\tfor (int i = 1; i <= N; ++i) scanf(\"%d\", &A[i]), ++mp[A[i]], X ^= A[i];\n\tfor (int i = 1; i <= N; ++i) scanf(\"%d\", &B[i]), --mp[B[i]];\n\t++mp[X];\n\tfor (auto p : mp) if (p.second < 0) return puts(\"-1\"), 0;\n\tfor (auto &p : mp) p.second = ++cnt;\n\tfor (int i = 1; i <= N; ++i) if (A[i] != B[i]) {\n\t\tint u = mp[B[i]], v = mp[A[i]];\n\t\tG[u].push_back(v);\n\t\tG[v].push_back(u);\n\t\t++M;\n\t}\n\tfor (int i = 1; i <= cnt; ++i) if (!G[i].empty())\n\t\tif (!vis[i]) ++Ans, DFS(i);\n\tif (!G[mp[X]].empty()) --Ans;\n\tprintf(\"%d\\n\", M + Ans);\n\treturn 0;\n}\n```",
        "postTime": 1596638407,
        "uid": 10703,
        "name": "\u5c0f\u7c89\u5154",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 AT2388 \u3010[AGC016D] XOR Replace\u3011"
    },
    {
        "content": "\u611f\u89c9\u8fd9\u4e2a\u5efa\u8fb9\u5f88\u795e\u554a\uff0c\u6309\u6211\u7684\u7406\u89e3\u7ed9\u51fa\u4e00\u4e2a\u8bc1\u660e\u3002\n\n\u4ee4 k \u4e3a a \u7684\u5f02\u6216\u548c\u3002  \n\u4e0d\u96be\u53d1\u73b0\u6bcf\u6b21\u64cd\u4f5c a[x] \u7b49\u4ef7\u4e8e\u4ea4\u6362 a[x] \u4e0e k \uff0c  \n\u90a3\u4e48\u5c06 a, b, k \u79bb\u6563\u5316\u540e\uff0c\u5224\u65e0\u89e3\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u63a5\u4e0b\u6765\u5047\u8bbe\u4e00\u5b9a\u6709\u89e3\u3002\n\n\u5bf9\u4e8e a[i] \u548c b[i] \uff0c\u5982\u679c a[i] != b[i] \uff0c\u8fde\u8fb9 b[i] -> a[i] \uff0c  \n\u8fd9\u6837\u5efa\u51fa\u6765\u4e00\u4e2a\u56fe\uff0c\u628a k \u4f5c\u4e3a\u5f53\u524d\u4f4d\u7f6e\uff0c\u8003\u8651\u73b0\u5728\u64cd\u4f5c a[x] \u5728\u56fe\u4e0a\u7684\u610f\u4e49\uff0c\n\n1. k \u5411 a[x] \u6709\u8fb9\uff0c\u90a3\u4e48\u64cd\u4f5c a[x] \u7b49\u4ef7\u4e8e\u5220\u6389\u8fd9\u6761\u8fb9\u5e76\u79fb\u52a8 k \u5230 a[x]  \n2. k \u5411 a[x] \u65e0\u8fb9\uff0c\u4f46\u5b58\u5728 y \u5411 a[x] \u6709\u8fb9\uff0c\u90a3\u4e48\u64cd\u4f5c a[x] \u7b49\u4ef7\u4e8e\u628a y -> a[x] \u7684\u4e00\u6761\u8fb9\u6539\u4e3a y -> k \uff0c\u5e76\u79fb\u52a8 k \u5230 a[x] \u3002\n\n1 \u64cd\u4f5c\u540e\u8fb9\u6570\u51cf\u4e00\uff0c2 \u64cd\u4f5c\u540e\u8fb9\u6570\u4e0d\u53d8\uff0c\u6700\u7ec8\u9700\u8981\u7684\u72b6\u6001\u662f\u6ca1\u6709\u8fb9\uff0c\u53ef\u4ee5\u77e5\u9053\u7b54\u6848\u7684\u4e00\u4e2a\u4e0b\u754c\u5c31\u662f\u8fb9\u6570\uff0c  \n\u73b0\u5728\u7684\u76ee\u6807\u5c31\u662f\u6700\u5c0f\u5316 2 \u64cd\u4f5c\u7684\u6b21\u6570\u4f7f\u5f97\u56fe\u6ca1\u6709\u8fb9\u3002\n\n\u5728\u6709\u89e3\u7684\u60c5\u51b5\u4e0b\uff0c\u8bbe K \u4e3a b \u7684\u5f02\u6216\u548c\uff0c\u4efb\u610f\u65f6\u523b k \u7684\u8fde\u8fb9\u6709\u4e24\u79cd\u60c5\u51b5\uff1a  \n\n- k != K \uff0ck \u7684\u51fa\u5ea6\u4e00\u5b9a\u6bd4\u5165\u5ea6\u591a 1  \n- k == K \uff0ck \u7684\u51fa\u5ea6\u6070\u597d\u7b49\u4e8e\u5165\u5ea6\n\n\u539f\u56e0\uff1a\u8fde\u8fb9 (K, k) \u540e\u6574\u5f20\u56fe\u6240\u6709\u70b9\u9700\u8981\u6ee1\u8db3\u5165\u5ea6\u7b49\u4e8e\u51fa\u5ea6\u3002\n\n\u90a3\u4e48 k \u6ca1\u6709\u51fa\u8fb9\u5f53\u4e14\u4ec5\u5f53 k \u662f\u4e00\u4e2a\u5b64\u7acb\u7684\u70b9\u4e14 k = K\uff0c  \n\u4e5f\u5c31\u662f\u8bf4\u5bf9\u4e8e\u4e00\u4e2a\u6709 x \u6761\u8fb9\u7684\u8054\u901a\u5757\uff0c\u4e00\u5b9a\u53ef\u4ee5\u901a\u8fc7 x \u6b21 1 \u64cd\u4f5c\u5c06\u8fb9\u5220\u5e72\u51c0\u4e14 k \u505c\u7559\u5728 K \u3002  \n\u5f53 k = K \u4e14\u88ab\u5b64\u7acb\u7684\u65f6\u5019\uff0c\u5c31\u9700\u8981\u901a\u8fc7 2 \u64cd\u4f5c\u8df3\u5230\u53e6\u4e00\u4e2a\u8054\u901a\u5757\uff0c\u5e76\u4e14\u8ba9\u8be5\u8054\u901a\u5757\u4e0e K \u8054\u901a\u3002\n\n\u7531\u6b64\u5c31\u53ef\u4ee5\u5f97\u5230\u6700\u5c11\u9700\u8981\u7684 2 \u64cd\u4f5c\u6b21\u6570\u4e86\u3002\n\n\u53c2\u8003\u5b9e\u73b0\uff1a\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n#define debug(...) fprintf(stderr, __VA_ARGS__)\n\ntypedef long long ll;\n\nstruct {\n\tinline operator int () { int x; return scanf(\"%d\", &x), x; }\n\tinline operator ll () { ll x; return scanf(\"%lld\", &x), x; }\n\ttemplate<class T> inline void operator () (T &x) { x = *this; }\n\ttemplate<class T, class ...A> inline void operator () (T &x, A &...a)\n\t{ x = *this; this -> operator ()(a...); }\n} read;\n\nconst int maxn = 100005;\nint a[maxn], b[maxn];\nint tmp[maxn];\nint tot[maxn];\nint fa[maxn], size[maxn];\n\nint find(int x) {\n\tif(fa[x] == x) return x;\n\treturn fa[x] = find(fa[x]);\n}\n\nint main() {\n\tint n = read;\n\n\tfor(int i = 1; i <= n; i ++) {\n\t\ta[i] = read;\n\t\ta[n + 1] ^= a[i];\n\t}\n\n\tfor(int i = 1; i <= n + 1; i ++)\n\t\ttmp[i] = a[i];\n\tstd::sort(tmp + 1, tmp + n + 2);\n\n\tfor(int i = 1; i <= n + 1; i ++) {\n\t\ta[i] = int(std::lower_bound(tmp + 1, tmp + n + 2, a[i]) - tmp);\n\t\t++ tot[a[i]];\n\t}\n\n\tfor(int i = 1; i <= n; i ++) {\n\t\tb[i] = read;\n\t\tint x = int(std::lower_bound(tmp + 1, tmp + n + 2, b[i]) - tmp);\n\t\tif(tmp[x] != b[i] or !tot[x]) return puts(\"-1\"), 0;\n\t\tb[i] = x;\n\t\t-- tot[x];\n\t}\n\n\tfor(int i = 1; i <= n + 1; i ++) {\n\t\tfa[i] = i;\n\t\tsize[i] = 1;\n\t}\n\n\tint ans = -1;\n\tfor(int i = 1; i <= n; i ++) {\n\t\tint x = find(a[i]), y = find(b[i]);\n\t\tif(a[i] != b[i]) {\n\t\t\t/* debug(\"%d - %d\\n\", tmp[a[i]], tmp[b[i]]); */\n\t\t\tfa[x] = y;\n\t\t\tif(x != y)\n\t\t\t\tsize[y] += size[x];\n\t\t\t++ ans;\n\t\t}\n\t}\n\n\tfor(int i = 1; i <= n + 1; i ++)\n\t\tif(fa[i] == i and size[i] > 1)\n\t\t\t++ ans;\n\n\tif(fa[a[n + 1]] == a[n + 1] and size[a[n + 1]] == 1)\n\t\t++ ans;\n\n\tprintf(\"%d\\n\", ans);\n}\n```",
        "postTime": 1576568491,
        "uid": 52232,
        "name": "Kewth",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 AT2388 \u3010XOR Replace\u3011"
    },
    {
        "content": "\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u663e\u800c\u6613\u89c1\u7684\u6027\u8d28\uff1a\u6bcf\u53d6\u51fa\u4e00\u4e2a\u6570\u662f\u6240\u6709\u6570\u5f02\u6216\u548c\uff0c\u518d\u6b21\u53d6\u51fa\u7684\u65f6\u5019\u7684\u503c\u5c31\u662f\u521a\u624d\u88ab\u66ff\u6362\u6389\u7684\u90a3\u4e2a\u503c\u3002\n\n\u6240\u4ee5\u9898\u610f\u8f6c\u5316\u5982\u4e0b\uff1a$A$\u6570\u7ec4\u6709$n+1$\u4e2a\u6570\uff0c$B$\u6570\u7ec4\u6709$n$\u4e2a\u6570\uff0c\u4ece$A$\u4e2d\u7684\u6307\u5b9a\u7684\u4e00\u4e2a\u503c\u5f00\u59cb\uff0c\u6bcf\u6b21\u9009\u62e9\u548c\u4e00\u4e2a\u503c\u4ea4\u6362\uff0c\u76f4\u81f3AB\u4e24\u4e32\u76f8\u7b49\u3002\n\n\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\u5f88\u663e\u7136\uff1aB\u4e2d\u6709\u7684\u6570\u5728A\u4e2d\u6ca1\u6709\u51fa\u73b0\u8fc7\u3002\n\n\u7136\u540e\u6700\u5c0f\u5316\u65b9\u6848\uff0c\u8003\u8651\u5efa\u56fe\uff0c\u5982\u679c$A$\u4e2d\u7684$X$\u8981\u53d8\u6210$B$\u4e2d\u7684$Y$\uff0c\u76f8\u5f53\u4e8e\u4ece$Y$\u5411$X$\u8fde\u4e00\u6761\u8fb9\uff0c\u8d70\u8fc7\u8fd9\u6761\u8fb9\u76f8\u5f53\u4e8e\u628a$Y$\u53d8\u6210$X$\uff0c\u7136\u540e\u73b0\u5728\u624b\u4e0a\u7684\u662f$X$\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u8fb9\u6570\u5c31\u662f$AB$\u524d$n$\u4e2a\u5143\u7d20\u4e0d\u540c\u7684\u503c\u7684\u4e2a\u6570\uff0c\u8981\u628a\u6240\u6709\u8fb9\u5168\u90e8\u8d70\u8fc7\uff0c\u6700\u597d\u60c5\u51b5\u5c31\u662f\u76f4\u63a5\u6709\u6b27\u62c9\u8def\uff0c\u90a3\u4e48\u4ea4\u6362\u6b21\u6570\u5c31\u662f\u8fb9\u6570\u3002\n\n\u4f46\u662f\u901a\u8fc7\u4e0d\u5408\u6cd5\u7684\u6027\u8d28\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e2a\u503c\u7684\u5165\u5ea6\u548c\u51fa\u5ea6\u5dee\u81f3\u591a\u4e3a1\uff0c\u56e0\u4e3a\u524d$n$\u4e2a\u5143\u7d20\u81f3\u591a\u6709\u4e00\u4e2a\u4e0d\u76f8\u540c\uff0c\u6545\u5bf9\u4e8e\u6bcf\u4e2a\u8054\u901a\u5757\u4e00\u5b9a\u90fd\u6709\u6b27\u62c9\u8def\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u5bf9\u4e0d\u540c\u8054\u901a\u5757\u4e4b\u95f4\u52a0\u4e00\u6761\u8fb9\u5c31\u53ef\u4ee5\u6ee1\u8db3\u8981\u6c42\u4e86\uff0c\u7b54\u6848\u662f**\u8fb9\u6570+\u8054\u901a\u5757\u6570-1**\n\n\u6ce8\u610f\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\uff1a\u5982\u679c$A$\u4e2d\u521a\u5f00\u59cb\u6307\u5b9a\u7684\u503c\u5728\u6240\u6709\u8054\u901a\u5757\u4e2d\u90fd\u6ca1\u6709\u51fa\u73b0\u8fc7\uff0c\u9700\u8981\u591a\u82b1\u8d39\u4e00\u6b65\u8fdb\u5165\u8054\u901a\u5757\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n    int x=0,f=1; char c=getchar();\n    while(c>'9'||c<'0'){if(c=='-') f=-1; c=getchar();}\n    while(c>='0'&&c<='9') x=(x<<1)+(x<<3)+(c^48),c=getchar();\n    return x*f;\n}\nconst int N=200005;\nint n,a[N],sum=0,b[N],val[N],t[N],m,vis[N],ans=0;\nint cnt=0;\nnamespace DSU{\n    int fa[N];\n    void init(){for(int i=1;i<=m;i++) fa[i]=i;}\n    int getfather(int x){\n        if(x==fa[x]) return x;\n        return fa[x]=getfather(fa[x]);\n    }\n    void unite(int x,int y){\n        x=getfather(x),y=getfather(y);\n        if(x==y) return;\n        fa[x]=y; cnt--;\n    }\n}\n\nint main()\n{\n    n=read();\n    for(int i=1;i<=n;i++) a[i]=read(),sum^=a[i];\n    for(int i=1;i<=n;i++) b[i]=read();\n    for(int i=1;i<=n;i++) val[i]=a[i];\n    val[n+1]=sum; a[n+1]=sum;\n    sort(val+1,val+n+2);\n    m=unique(val+1,val+n+2)-val-1;\n    for(int i=1;i<=n+1;i++){\n        int pos=lower_bound(val+1,val+m+1,a[i])-val;\n        t[pos]++;\n    }\n    for(int i=1;i<=n;i++){\n        int pos=lower_bound(val+1,val+m+1,b[i])-val;\n        if(b[i]!=val[pos]||!t[pos]){\n            puts(\"-1\");\n            exit(0);\n        }\n        t[pos]--; \n    }\n    int pos;\n    for(int i=1;i<=m;i++) if(t[i]) pos=i,t[i]=0;\n    for(int i=1;i<=n+1;i++){\n        int pos=lower_bound(val+1,val+m+1,a[i])-val;\n        if(i==n+1||b[i]!=a[i]) t[pos]++;\n    }\n    if(t[pos]==1&&val[pos]==sum) ans++;\n    for(int i=1;i<=n;i++){\n        a[i]=lower_bound(val+1,val+m+1,a[i])-val;\n        b[i]=lower_bound(val+1,val+m+1,b[i])-val;\n    }\n    DSU::init();\n    for(int i=1;i<=n;i++){\n        if(a[i]==b[i]) continue;\n        if(!vis[a[i]]) vis[a[i]]=1,cnt++;\n        if(!vis[b[i]]) vis[b[i]]=1,cnt++;\n        ans++; DSU::unite(a[i],b[i]);\n    }\n    if(ans==0) puts(\"0\");\n    else printf(\"%d\\n\",ans+cnt-1);\n    return 0;\n}\n```",
        "postTime": 1606865992,
        "uid": 69107,
        "name": "_tourist_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT2388 \u3010[AGC016D] XOR Replace\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/AT2388)\n\n[AT \u7684\u4f20\u9001\u95e8](https://atcoder.jp/contests/agc016/tasks/agc016_d)\n\n\u4e00\u9053\u5f88\u795e\u4ed9\u7684\u601d\u7ef4\u9898\u3002\n\n\u6211\u4eec\u5148\u89c2\u5bdf\u4e00\u4e0b\u8fd9\u4e2a\u64cd\u4f5c\uff1a\n\n\u5047\u8bbe\u5f53\u524d\u5e8f\u5217\u4e3a $\\{a_i\\}$ \uff0c\u5f02\u6216\u548c\u4e3a $A$\uff0c\n\n\u5c06\u7b2c $j$ \u4f4d\u8fdb\u884c\u4ea4\u6362\u5f97\uff1a\n\n$a_1,a_2,\\dots,a_{k-1},A,a_{k+1},\\dots$\uff0c\n\n\u6b64\u65f6\u5f02\u6216\u548c\u6070\u597d\u4e3a\uff1a $a_k$\u3002\n\n\u56e0\u6b64\uff0c\u4e00\u6b21\u64cd\u4f5c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5c06\u4f4d\u7f6e $k$ \u4e0a\u7684\u6570\u548c\u4f4d\u7f6e $n+1$ \u4e0a\u7684\u6570\u4ea4\u6362\u3002\n\n\u6211\u4eec\u628a\u5f02\u6216\u548c\u653e\u5728\u4f4d\u7f6e $n+1$\uff0c\n\n\u90a3\u4e48\u5224\u65e0\u89e3\u7684\u65b9\u6cd5\u5c31\u662f\u770b\u770b\u4e24\u4e2a\u6570\u7ec4\u662f\u5426\u80fd\u4e00\u4e00\u5bf9\u5e94\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u6c42\u65b9\u6848\u6570\u4e86\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5047\u8bbe\uff1a\n\n$A:a_1,a_2,a_3,\\dots,a_k$ \u4e0e\n\n$B:a_k,a_1,a_2,\\dots,a_{k-1}$ \u5bf9\u5e94\uff0c\u8fd9\u6837\u64cd\u4f5c\u591a\u5c11\u6b21\u3002\n\n\u663e\u7136\u6211\u4eec\u53ef\u4ee5\u628a\u7b2c\u4e00\u4e2a\u6570\u548c $n+1$ \u4ea4\u6362\uff0c\u518d\u628a\u7b2c\u4e8c\u4e2a\u6570\u548c $n+1$ \u4ea4\u6362\uff0c\u4e00\u6b21\u7c7b\u63a8\uff0c\u6700\u540e\u518d\u628a\u7b2c\u4e00\u4e2a\u6570\u548c $n+1$ \u6362\u56de\u6765\uff0c\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u73af\u7684\u4ea4\u6362\u3002\n\n\u8fd9\u4e2a\u4ea4\u6362\u4e00\u5171\u82b1\u4e86 $k+1$ \u6b21\u64cd\u4f5c\u3002\n\n\u4f46\u662f\u8003\u8651\u4e00\u4e2a\u7279\u4f8b\uff1a\n\n$A:a_1,a_2,a_3,\\dots,A,\\dots,a_k$ \u4e0e\n\n$B:a_k,a_1,a_2,\\dots,a_1$\uff0c\n\n\u4e5f\u5c31\u662f\u5982\u679c\u7b2c $n+1$ \u4e2a\u6570\u5728\u8fd9\u4e2a\u6362\u91cc\u9762\uff0c\n\n\u663e\u7136\u6211\u4eec\u53ef\u4ee5\u4ece\u7b2c $n+1$ \u4e2a\u6570\u90a3\u4e2a\u5730\u65b9\u5f00\u59cb\u4ea4\u6362\uff0c\u8fd9\u6837\u5c31\u5c11\u4e86\u4e00\u6b21\u64cd\u4f5c\u3002\n\n\u6240\u4ee5\u5982\u679c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $a,b$ \u4e0d\u5bf9\u7b49\u7684\u4f4d\u7f6e\uff0c\u4ece $a_i$ \u5f80 $b_i$ \u8fde\u8fb9\uff0c\n\n\u8fd9\u6837\u4f1a\u5f62\u6210\u82e5\u5e72\u4e2a\u73af\uff0c\u4e5f\u5c31\u662f\u8fde\u901a\u5757\u3002\n\n\u6839\u636e\u521a\u624d\u7684\u7ed3\u8bba\uff0c\u7b54\u6848\u4e3a `\u603b\u8fb9\u6570+\u8fde\u901a\u5757\u6570-1`\uff0c\n\n\u4f46\u662f\u50cf\u6837\u4f8b 2\u30014\uff0c\u5c31\u80fd\u628a\u8fd9\u4e2a\u65b9\u6cd5\u5361\u6b7b\uff0c\n\n\u539f\u56e0\u662f\u7b2c $n+1$ \u4e2a\u6570\u4e0d\u5904\u4e8e\u4efb\u4f55\u73af\u4e0a\uff0c\u5bfc\u81f4\u591a\u51cf\u53bb\u4e86 $1$\uff0c\n\n\u6240\u4ee5\u6211\u4eec\u5c31\u7b97 $a_{n+1}$ \u548c $b_{n+1}$ \u76f8\u540c\uff0c\u4e5f\u5f3a\u5236\u8fde\u8fb9\uff0c\u4f46\u4e0d\u7edf\u8ba1\u5165\u603b\u8fb9\u4e66\uff0c\u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528\u5176\u5b83\u7684\u7279\u5224\u65b9\u6cd5\u3002\n\n## code\n\n\u5904\u7406\u8fde\u901a\u5757\uff08\u4e5f\u5c31\u662f\u73af\uff09\u7684\u60c5\u51b5\u6211\u662f\u7528\u5e76\u67e5\u96c6\u6765\u7ef4\u62a4\u7684\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=1e6+10;\nint n,a[N],b[N],fa[N],t1[N],t2[N],t3[N],tot;\nint find(int x){\n\treturn fa[x]?fa[x]=find(fa[x]):x;\n}\nsigned main(){\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%lld\",&a[i]),a[n+1]^=a[i],t1[i]=a[i];t1[n+1]=a[n+1];\n\tfor(int i=1;i<=n;i++)scanf(\"%lld\",&b[i]),b[n+1]^=b[i],t2[i]=b[i];t2[n+1]=b[n+1];\n\t++n;\n\tsort(t1+1,t1+n+1);\n\tsort(t2+1,t2+n+1);\n\tfor(int i=1;i<=n;i++)\n\t\tif(t1[i]^t2[i]){puts(\"-1\");return 0;}\n\tint ans=0;\n\tfor(int i=1;i<=n;i++)\n\t\tif((a[i]^b[i])||i==n)\n\t\t\tt3[++tot]=a[i],t3[++tot]=b[i],ans+=(i<n);\n\tif(!ans){puts(\"0\");return 0;}\n\tsort(t3+1,t3+tot+1);\n\tint low=unique(t3+1,t3+tot+1)-t3-1;\n\tfor(int i=1;i<=n;i++){\n\t\tif(a[i]^b[i]){\n\t\t\ta[i]=lower_bound(t3+1,t3+low+1,a[i])-t3;\n\t\t\tb[i]=lower_bound(t3+1,t3+low+1,b[i])-t3;\n\t\t\tint x=find(a[i]),y=find(b[i]);\n\t\t\tif(x!=y)fa[x]=y;\n\t\t}\n\t}\n\tt1[0]=t1[1]-1;\n\tfor(int i=1;i<=low;i++)if(!fa[i])ans++;\n\tprintf(\"%lld\\n\",ans-1);\n}\n```",
        "postTime": 1637481761,
        "uid": 310802,
        "name": "_Diu_",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT2388 XOR Replace"
    }
]
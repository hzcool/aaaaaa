[
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u6709 $n$ \u4e2a\u676f\u5b50\uff0c\u7b2c $i$ \u4e2a\u676f\u5b50\u91cc\u88c5\u6709 $W_i$ \u5347\u6c34\uff0c\u4e14\u6709 $n$ \u5bf9\u6b63\u6574\u6570 $l_i,r_i$\u3002Yuri \u548c Muri \u4e24\u4eba\u5728\u73a9\u4e00\u4e2a\u6e38\u620f\uff1a\u4e24\u4eba\u8f6e\u6d41\u8fdb\u884c\u64cd\u4f5c\uff0c\u6700\u5148\u4e0d\u80fd\u8fdb\u884c\u64cd\u4f5c\u8005\u8f93\u3002\n\n\u4e00\u6b21\u64cd\u4f5c\u5b9a\u4e49\u4e3a\uff1a\u64cd\u4f5c\u8005\u9009\u62e9\u4e00\u4e2a\u676f\u5b50 $i$\uff0c\u4ece\u4e2d\u559d\u6389 $x_i$ \u5347\u6c34\u3002\u5bf9\u4e8e\u4e24\u4e2a\u4eba\uff0c\u90fd\u8981\u6ee1\u8db3 $x_i\\in[l_i,\\min(r_i,W_i)]$\uff0c\u4e14\u5bf9\u4e8e Yuri \u8981\u6ee1\u8db3 $x_i$ \u662f**\u6709\u7406\u6570**\u3001\u5bf9\u4e8e Muri \u8981\u6ee1\u8db3 $x_i$ \u662f**\u65e0\u7406\u6570**\u3002\n\n\u73b0\u5728\uff0c**Muri \u53ef\u4ee5\u9009\u62e9\u5148\u540e\u624b**\uff0c\u82e5\u4e24\u4eba\u4ee5\u6700\u4f18\u7b56\u7565\u884c\u52a8\uff0c\u95ee\u8c01\u4f1a\u83b7\u80dc\u3002\n\n## \u601d\u8def\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u4e00\u5b9a\u7684\u7cbe\u5ea6\u5185\uff0c\u76f8\u8ddd\u5f88\u8fd1\u7684\u6709\u7406\u6570\u4e0e\u65e0\u7406\u6570\u4e4b\u95f4\u5bf9\u80dc\u8d1f\u6027\u7684\u5f71\u54cd\u5e76\u4e0d\u5927\uff0c\u80dc\u8d1f\u72b6\u6001\u95f4\u7684\u8f6c\u6298\u70b9\u53ea\u662f\u4e00\u4e9b\u6574\u6570\u70b9\uff0c\u4e8e\u662f\u53ef\u4ee5\u628a Yuri \u548c Muri \u7684\u53d6\u6570\u503c\u57df\u5206\u522b\u770b\u505a\u662f $[l_i,r_i]$ \u548c $(l_i,r_i)$\u3002\u5982\u4e0b\u56fe\uff08\u8868\u793a\u8fdb\u884c\u4e00\u6b21\u64cd\u4f5c\u4e4b\u540e\u80fd\u5f97\u5230\u7684 $W^\\prime_i$\u3002\u4e0a\u9762\u4e3a Yuri \u7684\uff0c\u4e0b\u9762\u4e3a Muri \u7684\uff0c\u4e0b\u540c\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/j1xy3jhr.png)\n\n---\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u5c1d\u8bd5\u6253\u8868\u8fd9\u4e2a\u535a\u5f08\u7684 SG \u51fd\u6570\u3002\n\n\u4ee5 Yuri \u4e3a\u4f8b\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5f53 $r_i$ \u8db3\u591f\u5927\u65f6\uff0c\u524d\u4e00\u90e8\u5206\u7684 SG \u5177\u6709\u4e00\u5b9a\u7684\u89c4\u5f8b\u6027\uff1a\n\n- \u82e5 $W_i\\in [0,l_i)$\uff0c\u6b64\u65f6\u65e0\u6cd5\u8fdb\u884c\u64cd\u4f5c\uff0cSG \u4e3a $0$\uff1b\n- \u82e5 $W_i\\in [l_i,2l_i)$\uff0c\u6b64\u65f6\u53ef\u4ee5\u8f6c\u79fb\u5230 SG \u4e3a $0$ \u7684\u90e8\u5206\uff0c\u6545 SG \u4e3a $1$\uff1b\n- \u82e5 $W_i\\in [2l_i,3l_i)$\uff0c\u6b64\u65f6\u53ef\u4ee5\u8f6c\u79fb\u5230 SG \u4e3a $0$ \u548c $1$ \u7684\u90e8\u5206\uff0c\u6545 SG \u4e3a $2$\uff1b\n- \u2026\u2026\n\n\u6240\u4ee5\uff0c\u5728 $W_i$ \u8f83\u5c0f\u7684\u65f6\u5019\uff0cSG \u5448\u73b0\u8fd9\u6837\u4e00\u4e2a\u201c\u9636\u68af\u201d\u5f62\u3002\u7b49\u5230\u9047\u5230\u4e86 $r_i$\uff0cSG \u53c8\u4f1a\u6709\u76f8\u5e94\u7684\u6539\u53d8\u3002\u53d6\u6574\u6570 $t$\uff0c\u6ee1\u8db3 $tl_i < l_i+r_i\\le (t+1)l_i$\uff0c\u90a3\u4e48\uff0c\u7ee7\u7eed\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- \u82e5 $W_i\\in[tl_i,l_i+r_i)$\uff0c\u6839\u636e\u4e0a\u9762\uff0cSG \u4e3a $t$\uff1b\n- \u82e5 $W_i\\in[l_i+r_i,2l_i,r_i)$\uff0c\u6b64\u65f6\uff0c\u5982\u4e0b\u56fe\uff0c\u65e0\u6cd5\u8f6c\u79fb\u5230 SG \u4e3a $0$ \u7684\u90e8\u5206\uff0c\u6545 SG \u4e3a $0$\uff1b\n![](https://cdn.luogu.com.cn/upload/image_hosting/g8q29roa.png)\n- \u82e5 $W_i\\in[2l_i+r_i,3l_i,r_i)$\uff0c\u6b64\u65f6\u65e0\u6cd5\u8f6c\u79fb\u5230 SG \u4e3a $1$ \u7684\u90e8\u5206\uff0c\u6545 SG \u4e3a $1$\uff1b\n- \u2026\u2026\n\n\u5982\u6b64\u4e0b\u53bb\uff0c\u5f97\u5230 Yuri \u7684\u6700\u7ec8\u7684 SG \u5982\u4e0b\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qzfnalo2.png)\n\n\u540c\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230 Muri \u7684 SG\uff0c\u603b\u4f53\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5b83\u4e0e Yuri \u7684\u53ea\u5728\u67d0\u4e9b\u6574\u70b9\u5904\u7684\u53d6\u503c\u7565\u6709\u4e0d\u540c\uff0c\u5927\u4f53\u4e0a\u662f\u4e00\u6837\u7684\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u53ef\u4ee5\u628a\u53d6\u6570\u503c\u57df\u8fdb\u884c\u8fd1\u4f3c\u7684\u539f\u56e0\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1r9vrcb1.png)\n\n\u4e0b\u79f0 SG \u7a81\u53d8\u7684\u70b9\u4e3a\u8f6c\u6298\u70b9\uff0c\u5373\u6ee1\u8db3 $l_i\\ |\\ W_i\\bmod(l_i+r_i)$ \u7684\u70b9\u3002\n\n---\n\n\u90a3\u4e48\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u975e\u516c\u5e73\u7684\u535a\u5f08\uff0cSG \u662f\u5426\u4ecd\u7136\u6709\u7528\u5462\uff1f\u663e\u7136\u662f\u6709\u7684\u3002\u5728\u975e\u8f6c\u6298\u70b9\u4e0a\uff0cSG \u4ecd\u7136\u53ef\u4ee5\u5224\u65ad\u80dc\u8d1f\u6027\uff0c\u82e5 SG \u4e3a $0$ \u5219\u5148\u624b\u5fc5\u8d25\uff0c\u5426\u5219\u5148\u624b\u5fc5\u80dc\u3002\u5728\u8f6c\u6298\u70b9\u4e0a\u7684\u60c5\u51b5\u4e0b\u9762\u4f1a\u8bb2\u3002\n\n\u6ce8\u610f\u5230\u5728\u672c\u9898\u4e2d\uff0cMuri \u53d6\u6570\u503c\u57df\u4e3a Yuri \u53d6\u6570\u503c\u57df\u7684\u771f\u5b50\u96c6\uff0c\u6240\u4ee5\u82e5**\u5728 Muri \u7684\u89c6\u89d2\u4e0b**\u5176\u662f\u5fc5\u8d25\u7684\uff08\u6545\u4e0b\u9762\u4e24\u79cd\u60c5\u51b5\u4e0b\u7684\u201cSG\u201d\u6307\u7684\u662f Muri \u7684\uff09\uff0cYuri \u53ef\u4ee5\u53ea\u7528 Muri \u7684\u53d6\u6570\u503c\u57df\u8ba9\u5176\u5fc5\u8d25\u3002\u6545\uff0c\u5728\u300cSG \u4e3a $0$ \u4e14 Muri \u5148\u624b\u300d\u6216\u300cSG \u4e0d\u4e3a $0$ \u4e14 Yuri \u5148\u624b\u300d\u65f6 Yuri \u5fc5\u80dc\u3002\n\n---\n\n\u4e0a\u9762\u63d0\u5230\u5728\u8f6c\u6298\u70b9\u4e0a\uff0cSG \u53ef\u80fd\u4e0d\u594f\u6548\u3002\u5728\u5b98\u65b9\u9898\u89e3\u4e2d\uff0c\u5b9a\u4e49\u4e86\u5305\u62ec\u8fd9\u4e9b\u8f6c\u6298\u70b9\u5728\u5185\u7684\u4e00\u7c7b\u70b9\uff0c\u79f0\u4e3a\u201c\u300c\u4e0d\u6b63\u300d\u70b9\u201d\uff0c\u6839\u636e std\uff0c\u672c\u6587\u4e2d\u5c06\u5176\u7ffb\u8bd1\u4e3a\u201c\u4f5c\u5f0a\u70b9\u201d\u3002\u82e5\u6b64\u65f6\u6c34\u91cf\u5728\u4f5c\u5f0a\u70b9\uff0c\u90a3\u4e48 Yuri \u53ef\u4ee5\u901a\u8fc7\u64cd\u4f5c\u6539\u53d8 SG \u5bf9\u81ea\u5df1\u7684\u4e0d\u5229\u3002\u4f5c\u5f0a\u70b9\u6709\u4ee5\u4e0b\u4e24\u7c7b\uff1a\n\n1. \u6240\u6709\u8f6c\u6298\u70b9\uff0c\u5373\u6ee1\u8db3 $l_i\\ |\\ W_i\\bmod(l_i+r_i)$ \u7684\u70b9\u3002  \n![](https://cdn.luogu.com.cn/upload/image_hosting/t25u8cfl.png)  \n\u6b64\u65f6\u82e5 Yuri \u5148\u624b\uff0c\u5047\u8bbe\u6b64\u65f6\u6709 $p(l_i+r_i)+ql_i$ \u7684\u6c34\uff0cSG \u4e3a $q$\uff0c\u5176\u53ef\u4ee5\u9009\u62e9\u559d $l_i$ \u7684\u6c34\uff0c\u6b64\u65f6\u6c34\u91cf $W=p(l_i+r_i)+(q-1)l_i$\uff0cSG \u4e3a $q-1$\uff0c\u4f46\u662f\uff0c\u6b64\u65f6 Muri \u64cd\u4f5c\u540e\u80fd\u591f\u5230\u8fbe\u7684 $W\\in((p-1)(l_i+r_i)+ql_i,p(l_i+r_i)+(q-2)l_i)$\uff0c\u6ca1\u6709 SG \u4e3a $q$ \u7684\u70b9\uff0c\u6240\u4ee5\u5c31\u65e0\u6cd5\u4fdd\u8bc1\u5fc5\u80dc\u3002\n\n2. $W\\in[2l_i,l_i+r_i]\\cap\\mathbb{Q}$ \u4e2d\u7684\u70b9\u3002  \n\u6b64\u65f6 Yuri \u53ef\u4ee5\u628a\u6c34\u91cf\u8f6c\u79fb\u5230 $l_i$ \u4ece\u800c\u4fdd\u8bc1\u5fc5\u80dc\uff0c\u56e0\u4e3a\u6b64\u65f6\u53ea\u6709\u5176\u53ef\u4ee5\u64cd\u4f5c\u8fd9\u676f\u6c34\u3002\u6ce8\u610f\u4e00\u5b9a\u5f97\u662f**\u6709\u7406**\u7684\uff0c~~\u6709\u4eba\u5fd8\u4e86\u8fd9\u4e2a\u524d\u63d0\u4ee5\u4e3a\u81ea\u5df1 hack \u4e86 std\u3002~~\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5224\u65ad\uff0c\u82e5\u4e3a\u300cSG \u4e3a $0$ \u4e14 Yuri \u5148\u624b\u300d\u7684\u60c5\u51b5\uff0c\u82e5\u5176\u4e2d\u6709\u4f5c\u5f0a\u70b9\uff0c\u5219 Yuri \u5fc5\u80dc\uff0c\u5426\u5219 Muri \u5fc5\u80dc\u3002\u82e5\u4e3a \u300cSG \u4e0d\u4e3a $0$ \u4e14 Muri \u5148\u624b\u300d\u7684\u60c5\u51b5\uff0c\u5219\u82e5 Muri \u7b2c\u4e00\u6b65\u80fd\u4fdd\u8bc1\u53bb\u9664\u6240\u6709\u4f5c\u5f0a\u70b9\uff0c\u5219 Muri \u5fc5\u80dc\uff0c\u5426\u5219 Yuri \u5fc5\u80dc\u3002\u6ce8\u610f\u8fd9\u91cc\u7684 SG \u4e5f\u5e94\u8be5**\u5728 Muri \u7684\u89c6\u89d2\u4e0b**\uff0c\u56e0\u4e3a\u4f5c\u5f0a\u70b9\u662f\u5bf9\u4e8e Yuri \u800c\u8a00\u7684\u3002\n\n---\n\n\u6240\u4ee5\uff0c\u6574\u4e2a\u8fc7\u7a0b\u6211\u4eec\u53ea\u9700\u8981\u7edf\u8ba1\u521d\u59cb Muri \u89c6\u89d2\u4e0b\u7684 SG \u548c\uff0c\u7136\u540e\u5224\u65ad\u662f\u5426\u6709 Muri \u5fc5\u80dc\u7684\u60c5\u51b5\uff0c\u82e5\u6709\u5219 Muri \u5fc5\u80dc\uff0c\u5426\u5219 Yuri \u5fc5\u80dc\u3002\n\n---\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#define maxn 200005\nusing namespace std;\nint n,w[maxn],l[maxn],r[maxn],sg[maxn],sgsum=0;\nint main(){\n      scanf(\"%d\",&n); for(int i=1;i<=n;i++) scanf(\"%d%d%d\",&w[i],&l[i],&r[i]);\n      for(int i=1;i<=n;i++){int res=w[i]%(l[i]+r[i]); sgsum^=(sg[i]=max(0,((res-1)/l[i])));} // calculate sgsum\n      if(sgsum==0){ // Muri can win if and only if there's no \"cheating point\"\n            bool flag=0; for(int i=1;i<=n&&!flag;i++){\n                  int res=w[i]%(l[i]+r[i]);\n                  flag|=((res%l[i]==0)||(w[i]<l[i]+r[i]&&w[i]>=2*l[i])); // determine if there's \"cheating point\"\n            } if(flag) printf(\"Yuri\"); else printf(\"Muri\");\n      }else{ // Muri can win if and only if there's one way to make sgsum==0 and there's no \"cheating point\"\n            int num=0,pos=0; for(int i=1;i<=n;i++)\n                  {int res=w[i]%(l[i]+r[i]); if((res%l[i]==0)||(w[i]<l[i]+r[i]&&w[i]>=2*l[i])){num++; pos=i;}}\n            if(num>1){printf(\"Yuri\"); return 0;} // Muri will never win since the number of \"cheating point\" > 1\n            if(num==0){printf(\"Muri\"); return 0;}// if there's no \"cheating point\", Muri can always win\n            // otherwise, if there's exactly one \"cheating point\"\n            int res=sgsum^sg[pos],mmax=(l[pos]+r[pos]-1)/l[pos]; // new grundy number and maximum grundy number\n            if(res>mmax){printf(\"Yuri\"); return 0;} // new grundy number won't exist\n            int left=res*l[pos],right=min(res*l[pos]+l[pos],l[pos]+r[pos]);\n            int T=max(0,w[pos]/(l[pos]+r[pos])-(sg[pos]<res));\n            if(w[pos]<=l[pos]+r[pos]){if((res==0||res==1)&&res<sg[pos]) printf(\"Muri\"); else printf(\"Yuri\"); return 0;}\n            // determine if (left+T*(l+r) , right+T*(l+r)) \u2229 (w-r , w-l)  \n            if(!(right+T*(l[pos]+r[pos])<=w[pos]-r[pos]||left+T*(l[pos]+r[pos])>=w[pos]-l[pos]))\n                  printf(\"Muri\"); else printf(\"Yuri\");\n      }\n      return 0;\n}\n/*\n2\n16 3 5\n7 5 6\n\n2\n17 3 7\n10 3 7\n*/\n```\n",
        "postTime": 1682231216,
        "uid": 294382,
        "name": "qzhwlzy",
        "ccfLevel": 5,
        "title": "AT_ttpc2019_n \u74dc\u4e8c\u3064 \u9898\u89e3"
    }
]
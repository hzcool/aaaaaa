[
    {
        "content": "\u8003\u573a\u4e0a\u70b9\u5206\u6cbb\u5199\u5047\u4e86\u4e00\u4e2a\u5730\u65b9\uff0c\u9057\u61be\u79bb\u573a\u3002\n\n------\n\n\u8003\u8651\u82e5\u96c6\u5408 $S$ \u56fa\u5b9a\u600e\u4e48\u505a\u3002\n\n\u5982\u679c\u6811\u662f\u4e00\u6761\u94fe\uff0c\u6839\u636e\u5c0f\u5b66\u5965\u6570\u7684\u77e5\u8bc6\uff0c\u82e5 $|S| \\bmod 2=1$\uff0c\u6700\u5c0f\u5316\u8ddd\u79bb\u603b\u548c\u7684\u70b9\u5373\u4e3a\u4e2d\u5fc3\u70b9\uff0c\u5426\u5219\u4e3a\u4e24\u4e2a\u4e2d\u5fc3\u70b9\u95f4\u7684\u4efb\u610f\u70b9\uff08\u5305\u62ec\u7aef\u70b9\uff09\u3002\n\n\u8003\u8651\u8fd9\u4e2a\u7ed3\u8bba\u7684\u8bc1\u660e\u3002\u82e5\u5c06\u70b9\u5de6\u79fb\u4e00\u6b65\uff0c\u5219\u5de6\u4fa7\u7684\u70b9\u4ee3\u4ef7\u5168\u90e8\u52a0 $-1$\uff0c\u53f3\u4fa7\u70b9\u4ee3\u4ef7\u5168\u90e8 $+1$\uff0c\u6240\u4ee5\u5728\u4e2d\u5fc3\u5904\u6700\u4f18\u3002\n\n\u6839\u636e\u8bc1\u660e\uff0c\u53d1\u73b0\u53ef\u4ee5\u5c06\u8be5\u7ed3\u8bba\u6269\u5c55\u5230\u6811\u4e0a\uff0c\u800c\u201c\u4e2d\u5fc3\u70b9\u201d\u7684\u5b9a\u4e49\u6539\u4e3a\u5220\u6389\u8be5\u70b9\u540e\u7684\uff0c\u5269\u4f59\u4e24\u4e2a\u8fde\u901a\u5757\u4e2d\u5173\u952e\u70b9\u4e2a\u6570\u4e4b\u5dee $\\le 1$\u3002\n\n\u5bb9\u6613\u53d1\u73b0\u5f53 $|S|\\bmod 2=1$ \u65f6\uff0c\u4e2d\u5fc3\u70b9\u53ea\u6709\u4e00\u4e2a\uff0c\u5426\u5219\u6709\u4e24\u4e2a\uff0c\u8bc1\u660e\u7c7b\u4f3c\u4e8e\u91cd\u5fc3\u4e2a\u6570\u7684\u8bc1\u660e\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u82e5 $|S|\\bmod 2=1$\uff0c\u5219\u4ef7\u503c\u4e3a $1$\uff0c\u5426\u5219\u4ef7\u503c\u4e3a\u4e24\u4e2a\u4e2d\u5fc3\u70b9\u95f4\u7684\u8def\u7ecf\u957f\u3002\n\n-------\n\n\u89c2\u5bdf\u5230\u4ef7\u503c\u4e00\u5b9a\u662f\u4e00\u6761\u8def\u5f84\uff0c\u6240\u4ee5\u8003\u8651\u70b9\u5206\u6cbb\u8ba1\u7b97\u6bcf\u6761\u8def\u5f84\u7684\u8d21\u732e\u3002\n\n\u5bf9\u4e8e\u8def\u5f84 $u,v$\uff0c\u82e5\u53ef\u4ee5\u5bf9 $|S|=k$ \u4ea7\u751f\u8d21\u732e\uff0c\u90a3\u4e48\u6709 $sz_u \\ge k,sz_v\\ge k$\uff08\u6ce8\u610f\u5f53 $u,v$ \u6709\u7956\u5148\u5173\u7cfb\u65f6\uff0c\u8981\u53bb\u9664\u6389\u53e6\u4e00\u4e2a\u8282\u70b9\u6240\u5728\u7684\u5b50\u6811\u5927\u5c0f\uff09\u3002\u7528BIT\u7ef4\u62a4\u540e\u7f00 $\\max$ \uff0c\u6253\u4e2a\u5dee\u5206\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log^2 n)$\uff0c\u8fd8\u662f\u6bd4\u8f83\u5957\u8def\u7684\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define il inline\nusing namespace std;\nconst int maxn=200010;\nconst int inf=1<<30;\nil int read(){\n\tint x=0;\n\tchar c=getchar();\n\tfor(;!(c>='0'&&c<='9');c=getchar());\n\tfor(;c>='0'&&c<='9';c=getchar())\n\t\tx=(x<<1)+(x<<3)+c-'0';\n\treturn x;\n}\nil void chkmax(int &x,int y){if(y>x)x=y;}\nstruct edge{\n\tint v,to;\n}e[maxn<<1];\nint head[maxn],ecnt;\nvoid addedge(int u,int v){\n\te[++ecnt].v=v,e[ecnt].to=head[u],head[u]=ecnt;\n}\nbool vis[maxn];\nint rt,n;\nint sz[maxn],maxp[maxn];\nint siz[maxn],c[maxn];\nvoid getrt(int fa,int x,int tot){\n\tsz[x]=1,maxp[x]=0;\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(e[i].v!=fa&&!vis[e[i].v]){\n\t\t\tgetrt(x,e[i].v,tot),sz[x]+=sz[e[i].v];\n\t\t\tchkmax(maxp[x],sz[e[i].v]);\n\t\t}\n\tchkmax(maxp[x],tot-sz[x]);\n\tif(!rt||maxp[x]<maxp[rt]) rt=x;\n}\nvoid init(int fa,int x){\n\tsiz[x]=1;\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(e[i].v!=fa&&!vis[e[i].v]) \n\t\t\tinit(x,e[i].v),siz[x]+=siz[e[i].v];\n}\nint Tree[maxn];\nil void A(int k,int x){\n\tk=n-k+1;\n\tfor(;k>0&&k<=n;k+=k&-k) chkmax(Tree[k],x);\n}\nil int Q(int k){\n\tk=n-k+1;int Mx=-inf;\n\tfor(;k>0;k-=k&-k) chkmax(Mx,Tree[k]);\n\treturn Mx;\n}\nil void cl(int k){\n\tk=n-k+1;\n\tfor(;k>0&&k<=n;k+=k&-k) Tree[k]=-inf;\n}\nvoid calc1(int fa,int x,int s,int D=2){\n\tchkmax(c[siz[x]],Q(siz[x])+D-1);\n\tchkmax(c[min(siz[x],s)],D);\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(e[i].v!=fa&&!vis[e[i].v])\n\t\t \tcalc1(x,e[i].v,s,D+1);\n}\nvoid calc2(int fa,int x,int D=2){\n\tA(siz[x],D);\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(e[i].v!=fa&&!vis[e[i].v])\n\t\t\tcalc2(x,e[i].v,D+1);\n}\nvoid clear(int fa,int x){\n\tcl(siz[x]);\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(e[i].v!=fa&&!vis[e[i].v])\n\t\t\tclear(x,e[i].v);\n}\nint st[maxn],top;\nil void Solve(int x){\n\tinit(0,x),top=0;\n//\tprintf(\"!!!%d(%d)\\n\",x,siz[x]);\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(!vis[e[i].v]){\n\t\t\tcalc1(x,e[i].v,siz[x]-siz[e[i].v]);\n\t\t\tcalc2(x,e[i].v),st[++top]=e[i].v;\n\t\t}\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(!vis[e[i].v]) clear(x,e[i].v);\n\tfor(int i=top;i;i--){\n\t\tcalc1(x,st[i],siz[x]-siz[st[i]]);\n\t\tcalc2(x,st[i]);\n\t}\n\tfor(int i=top;i;i--) clear(x,st[i]);\n}\nvoid dfs(int x){\n\tSolve(x),vis[x]=1;\n\tfor(int i=head[x];i;i=e[i].to)\n\t\tif(!vis[e[i].v])\n\t\t\trt=0,getrt(x,e[i].v,sz[e[i].v]),dfs(rt);\n}\nint main(){\n//\tfreopen(\"island.in\",\"r\",stdin);\n//\tfreopen(\"island.out\",\"w\",stdout);\n\tn=read();\n\tfor(int i=1;i<n;i++){\n\t\tint x=read(),y=read();\n\t\taddedge(x,y),addedge(y,x);\n\t}\n\tfor(int i=1;i<=n;i++) \n\t\tTree[i]=-inf,c[i]=1;\n\trt=0,getrt(0,1,n),dfs(rt);\n\tfor(int i=n;i;i--) chkmax(c[i],c[i+1]);\n\tfor(int i=1;i<=n;i++)\n\t\tprintf(\"%d\\n\",(i&1)?1:c[i>>1]);\n\treturn 0;\n}\n/*\n5\n1 2\n2 3\n4 2\n3 5\n\n7\n1 2\n2 3\n3 4\n4 5\n2 6\n3 7\n\n*/\n\n```",
        "postTime": 1677660027,
        "uid": 288716,
        "name": "lzqy_",
        "ccfLevel": 7,
        "title": "AT_joisc2021_j \u30d3\u30fc\u30d0\u30fc\u306e\u4f1a\u5408 2 (Meetings 2) \u9898\u89e3"
    }
]
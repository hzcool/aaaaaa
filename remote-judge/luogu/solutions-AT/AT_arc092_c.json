[
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/dd-d/p/16269670.html)  \n### Sol  \n\u9996\u5148\uff0c\u7b54\u6848\u80af\u5b9a\u662f\u539f\u5e8f\u5217\u7684\u4e00\u4e2a\u5b50\u5e8f\u5217\u4e4b\u548c\u3002  \n\u7136\u540e\u89c2\u5bdf\u8fd9\u4e2a\u5408\u5e76\u64cd\u4f5c\uff0c\u5f88\u5bb9\u6613\u53d1\u73b0\u5947\u6570\u4f4d\u7f6e\u53ea\u80fd\u4e0e\u5947\u6570\u4f4d\u7f6e\u5408\u5e76\uff0c\u5076\u6570\u4f4d\u7f6e\u53ea\u80fd\u4e0e\u5076\u6570\u4f4d\u7f6e\u5408\u5e76\u3002  \n\u90a3\u4e48\u95ee\u9898\u8f6c\u5316\u4e3a\u8981\u5728\u5947\u6570\u4f4d\u7f6e\u4e0a\u9009\u4e00\u4e9b\u6570\u6216\u8005\u5076\u6570\u4f4d\u7f6e\u4e0a\u9009\u4e00\u4e9b\u6570\u4f7f\u4ed6\u4eec\u548c\u6700\u5927\u3002  \n\u76f4\u63a5 dp \u5c31\u884c\u3002  \n\u6784\u9020\u65b9\u6848\u7684\u8bdd\u5148\u5220\u4e24\u7aef\u7684\uff0c\u7136\u540e\u6bcf\u6b21\u53d6\u4e2d\u70b9\u4e00\u4e2a\u4e00\u4e2a\u5408\u5e76\u5373\u53ef\u3002  \n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2)$\n### Code  \n```cpp\n//LYC_music yyds!\n#include<bits/stdc++.h>\n#define IOS ios::sync_with_stdio(0)\n#define lowbit(x) (x&(-x))\n#define int long long\nusing namespace std;\ninline char gc()\n{\n\tstatic char buf[1000000],*p1=buf,*p2=buf;\n\treturn p1==p2&&(p2=(p1=buf)+fread(buf,1,1000000,stdin),p1==p2)?EOF:*p1++;\n}\nint read()\n{\n\tint pos=1,num=0;\n\tchar ch=getchar();\n\twhile (!isdigit(ch))\n\t{\n\t\tif (ch=='-') pos=-1;\n\t\tch=getchar();\n\t}\n\twhile (isdigit(ch))\n\t{\n\t\tnum=num*10+(int)(ch-'0');\n\t\tch=getchar();\n\t}\n\treturn pos*num;\n}\nvoid write(int x)\n{\n\tif (x<0)\n\t{\n\t\tputchar('-');\n\t\twrite(-x);\n\t\treturn;\n\t}\n\tif (x>=10) write(x/10);\n\tputchar(x%10+'0');\n}\nvoid writesp(int x)\n{\n\twrite(x);\n\tputchar(' ');\n}\nvoid writeln(int x)\n{\n\twrite(x);\n\tputchar('\\n');\n}\nconst int N=5e3+10;\nvector<int> G,Ans;\nint n,a[N],dp[N],pre[N],ans,now,ff;\nsigned main()\n{\n//\tfreopen(\"1.in\",\"r\",stdin);\n//\tfreopen(\"1.out\",\"w\",stdout);\n\tn=read();\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\ta[i]=read();\n\t\tif (a[i]>0) ff=1;\n\t}\n\tif (!ff)\n\t{\n\t\tint j=1;\n\t\tfor (int i=1;i<=n;i++)\n\t\t\tif (a[i]>a[j]) j=i;\n\t\twriteln(a[j]); writeln(n-1);\n\t\tfor (int i=1;i<j;i++)\n\t\t\twriteln(1);\n\t\tfor (int i=n;i>j;i--)\n\t\t\twriteln(i-j+1);\n\t\treturn 0;\n\t}\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tdp[i]=a[i];\n\t\tfor (int j=i-2;j>=1;j-=2)\n\t\t\tif (dp[j]+a[i]>dp[i]) dp[i]=dp[j]+a[i],pre[i]=j;\n\t}\n\tfor (int i=1;i<=n;i++)\n\t\tif (ans<dp[i]) ans=dp[i],now=i;\n\twriteln(ans);\n\twhile (pre[now])\n\t{\n\t\tG.push_back(now);\n\t\tnow=pre[now];\n\t}\n\tG.push_back(now);\n\treverse(G.begin(),G.end());\n\tfor (int i=1;i<G[0];i++)\n\t\tAns.emplace_back(1);\n\tint tot=G[0]-1;\n\tfor (int i=n;i>=G[G.size()-1]+1;i--)\n\t\tAns.emplace_back(i-tot);\n\tfor (int i=0;i<(int)G.size()-1;i++)\n\t{\n\t\tint X=G[i+1]-G[i]+1-1;\n\t\tif (G[i+1]-G[i]==2)\n\t\t{\n\t\t\tAns.emplace_back(2);\n\t\t\tcontinue;\n\t\t}\n\t\tfor (int j=G[i]+1;j<G[i+1]-1;j+=2)\n\t\t\tAns.emplace_back(3);\n\t\tAns.emplace_back(2);\n\t\ttot+=X;\n\t}\n\twriteln(Ans.size());\n\tfor (auto x:Ans)\n\t\twriteln(x);\n}\n\n\n\n\n\n```",
        "postTime": 1652503167,
        "uid": 167999,
        "name": "dd_d",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011AT3944 [ARC092C] Both Sides Merger"
    }
]
[
    {
        "content": "### $\\texttt{Solution}$\n\n\u9ed8\u8ba4\u4e00\u5bf9 $a_i,b_i$ \u4e2d $a_i<b_i$\uff0c\u6240\u6709\u5bf9\u6309 $b_i$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\n\n\u6ce8\u610f\u5230 $n-1$ \u4e2a\u5cf0\u503c\u7684\u6392\u5217\u4e00\u5b9a\u5f62\u5982\uff1a\n$$\n\\cdots(a,b)(b,a)\\cdots\n$$\n\u7684\u5f62\u5f0f\uff0c\u5de6\u534a\u8fb9\u7684\u5e94\u5f53\u6ee1\u8db3\u6240\u6709 $b_i$ \u4e3a\u5cf0\u503c\uff0c\u5373 $b_i>a_i+1$\uff0c\u53f3\u534a\u8fb9\u7c7b\u4f3c\uff0c\u6240\u6709 $a_i$ \u4e3a\u5cf0\u503c\uff0c\u6ee1\u8db3 $a_i>b_{i+1}$\u3002\n\n\u6211\u4eec\u8bd5\u56fe\u9009\u53d6\u4e00\u4e2a\u4ee3\u8868\u5143\u8ba1\u6570\u3002\n\n\u8003\u8651\u5728\u540c\u4e00\u79cd\u4e8c\u5143\u7ec4\u6392\u5217\u987a\u5e8f\u4e2d\u7684 $(a,b)$ \u6700\u957f\u5ef6\u4f38\u5904\u8ba1\u6570\uff0c\u5373\u6392\u5217\u786e\u5b9a\u540e\u4e00\u4e2a\u4f4d\u7f6e $p$ \u6ee1\u8db3\uff1a\n\n$$b_i\\gt a_{i+1},\\forall i\\in [1,p-1]$$\n$$b_p\\lt a_{p+1}$$\n$$a_i>b_{i+1}\\forall[p+1,n)$$\n\n\n---\n\n\u8003\u8651\u4e00\u79cd\u9700\u8981\u7279\u6b8a\u5904\u7406\u7684\u60c5\u51b5\uff1a\u6240\u6709\u5bf9\u4e3a $(a,b)$\u3002\n\n\u6211\u4eec\u8003\u8651\u6309 $b$ \u4ece\u5927\u5230\u5c0f**\u63d2\u5165**\u6392\u5217\u4e2d\uff0c\u7531\u4e8e\u76ee\u524d\u63d2\u5165\u7684\u4e8c\u5143\u7ec4\u7684 $b$ \u503c\u662f\u5df2\u5728\u6392\u5217\u4e2d\u7684\u6700\u5c0f\u503c\uff0c\u5176\u63d2\u5728\u4efb\u4f55\u4e00\u4e2a\u4f4d\u7f6e\u7684\u540e\u9762\u90fd\u6ee1\u8db3\u8be5\u4f4d\u7f6e\u7684 $b>a$ \u9650\u5236\u3002\n\n\u8003\u8651 $(a_i,b_i)$ \u80fd\u63d2\u5728\u54ea\u4e2a\u4f4d\u7f6e\u7684\u524d\u9762\uff0c\u4e00\u5b9a\u6709 $a_j<b_i$\uff0c\u8bb0 $b_j>b_i\\And a_j<b_i$ \u7684 $j$ \u7684\u6570\u91cf\u4e3a $v_i$\u3002\n\n\u90a3\u4e48\u8fd9\u90e8\u5206\u7684\u7b54\u6848\u4e3a $\\prod (v_i+1)$\uff0c$+1$ \u7684\u539f\u56e0\u662f\u4e00\u5b9a\u80fd\u63d2\u5728\u672b\u5c3e\u3002\n\n\u8003\u8651\u66f4\u4e3a\u4e00\u822c\u7684\u5b58\u5728 $p$ \u4f4d\u7f6e\u7684\u60c5\u51b5\uff0c\u8003\u8651\u786e\u5b9a\u4e86 $p,p+1$ \u4e24\u4e2a\u4f4d\u7f6e\u7684\u4e8c\u5143\u7ec4\u540e\u7684\u8d21\u732e\u3002\n\n\u8bb0 $p$ \u4f4d\u7f6e\u586b\u5165\u7684\u4e8c\u5143\u7ec4\u7684 $b$ \u503c\u4e3a $B_1$\uff0c$p+1$ \u4f4d\u7f6e\u4e3a $B_2$\u3002\n\n\u7c7b\u4f3c\u7684\uff0c\u5bb9\u6613\u8ba8\u8bba\u51fa\u8d21\u732e\u4e3a $\\prod_{b_i<B_1}v_i\\prod_{B_1<b_i<B_2}(v_i+1)\\prod_{b_i>B_2}(v_i+2)$\u3002\n\n\u4f7f\u7528\u524d\u7f00\u548c\u4f18\u5316\uff0c\u5bb9\u6613\u505a\u5230 $\\widetilde O(n)$\u3002\n\n[code](https://atcoder.jp/contests/agc053/submissions/31786096)",
        "postTime": 1666312585,
        "uid": 98527,
        "name": "juju527",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AGC053E"
    }
]
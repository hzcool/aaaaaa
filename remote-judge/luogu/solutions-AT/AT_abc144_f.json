[
    {
        "content": "[ABF144F](https://atcoder.jp/contests/abc144/tasks/abc144_f)\n$\\text{Difficulty : 2189}$ \uff1a$n$ \u4e2a\u70b9\uff0c$m$ \u6761\u5355\u5411\u8def\u5f84\uff0c\u7531\u7f16\u53f7\u5c0f\u7684\u70b9\u6307\u5411\u7f16\u53f7\u5927\u7684\u70b9\uff0c\u6bcf\u6b21\u4f1a\u4ece\u5f53\u524d\u70b9\u7684\u901a\u9053\u4e2d\u7b49\u6982\u7387\u968f\u673a\u9009\u62e9\u4e00\u4e2a\u901a\u9053\u884c\u8d70\u3002\u53ef\u4ee5\u81f3\u591a\u5220\u53bb\u4e00\u6761\u8fb9\uff0c\u6c42 $1$ \u5230 $n$ \u7684\u671f\u671b\u6b65\u6570\u6700\u5c0f\u503c\u3002\n\n------------\n\n\n\u8bb0 $f_u$ \u4e3a $u$ \u5230 $n$ \u7684\u671f\u671b\u6b65\u6570\u3002\n\n\u6709 $f_u = \\sum\\limits_{v}\\dfrac{f_v+1}{d_u}$\uff0c\u5176\u4e2d $d_u$ \u4e3a $u$ \u7684\u51fa\u5ea6\u3002\n\n\u66b4\u529b\u662f\u679a\u4e3e\u5220\u53bb\u7684\u8fb9\u7136\u540e\u505a\u671f\u671b dp\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(m^2)$\u3002\n\n\u8003\u8651\u4f18\u5316\u3002\n\n\u4e3a\u4e86\u4f7f\u671f\u671b\u6b65\u6570\u6700\u5c0f\uff0c\u89c2\u5bdf\u67ff\u5b50\u53ef\u4ee5\u53d1\u73b0\u6700\u5c0f\u503c\u53d6\u65f6\uff0c\u5fc5\u7136\u662f\u5220\u53bb $g_v$ \u6700\u5927\u7684\u8fb9\u3002\n\n\u679a\u4e3e\u5220\u53bb\u54ea\u4e00\u4e2a\u70b9\u7684\u51fa\u8fb9\u3002\n\n\u7136\u540e\u505a\u671f\u671b dp\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(mn)$\u3002\n\n## code:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn = 606; \nint n,m,u,v,de[maxn];\ndouble g[maxn],f[maxn],ans;\nvector <int> G[maxn];\ninline int read()\n{\n\tint x = 0,f = 1;\n\tchar ch = getchar();\n\twhile(ch < '0'||ch > '9'){if(ch == '-'){f = -1;}ch = getchar();}\n\twhile(ch <= '9'&&ch >= '0'){x = (x << 1) + (x << 3) + ch - '0',ch = getchar();}\n\treturn f * x;\n}\nvoid input()\n{\n\tn = read(),m = read();\n\tfor(int i = 1;i <= m;i++)\n\t\tu = read(),v = read(),G[u].push_back(v),de[u]++;\n}\nvoid prefix()\n{\n\tfor(int i = n - 1;i;i--)\n\t\tfor(int j = 0;j < (int) G[i].size();j++)\n\t\t\tg[i] += 1.0 * (g[G[i][j]] + 1) / de[i];\n\tans = g[1];\n}\nvoid solve(int u)\n{\n\tif(G[u].size() == 0)\n\t\treturn ;\n\tv = G[u][0];\n\tfor(int j = 1;j < (int) G[u].size();j++)\n\t\tif(g[G[u][j]] > g[v])\n\t\t\tv = G[u][j];\n\tde[u]--;\n\tfor(int i = 1;i <= n;i++)\n\t\tf[i] = -1;\n\tf[n] = 0;\n\tfor(int i = n - 1;i;i--)\n\t\tfor(int j = 0;j < (int) G[i].size();j++)\n\t\t\tif(i != u||G[i][j] != v)\n\t\t\t{\n\t\t\t\tif(f[G[i][j]] == -1)\n\t\t\t\t{\n\t\t\t\t\tf[i] = -1;break;\n\t\t\t\t}\n\t\t\t\tif(f[i] == -1)\n\t\t\t\t\tf[i] = 0;\n\t\t\t\tf[i] += 1.0 * (f[G[i][j]] + 1) / de[i];\n\t\t\t}\n\tif(f[1] != -1)\n\t\tans = min(ans,f[1]);\n\tde[u]++;\n}\nint main()\n{\n\tinput();\n\tprefix();\n\tfor(int i = 1;i <= n;i++)\n\t\tsolve(i);\n\tprintf(\"%.11lf\",ans);\n\treturn 0 ;\n}\n/*\nCSP-S2022 RP++\n*/\n```",
        "postTime": 1666614806,
        "uid": 302636,
        "name": "zhaoyp",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT_abc144_f\u3010[ABC144F] Fork in the Road\u3011"
    }
]
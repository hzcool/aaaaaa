[
    {
        "content": "\u4e0d\u59a8\u5047\u8bbe $B_X \\le B_Y$\u3002\u8bbe $f(x) = A_X + \\frac{x}{B_X}, g(x) = A_Y + \\frac{x}{B_Y}, F(x) = \\left\\lfloor{f(x)}\\right\\rfloor, G(x) = \\left\\lfloor{g(x)}\\right\\rfloor$\uff0c\u9898\u76ee\u5373\u6c42 $\\sum\\limits_{x=1}^n [F(x) = G(x)]$\u3002\n\n\u6211\u4e00\u5f00\u59cb\u5c1d\u8bd5\u5316\u7b80\u5f0f\u5b50\uff0c\u7136\u540e\u53d1\u73b0\u4e0d\u80fd\u5408\u5e76\u4e24\u4e2a\u4e0b\u53d6\u6574\u7684\u5206\u6570\u3002\n\n\u7136\u540e\u5c1d\u8bd5\u4e8c\u5206 $F(x) - G(x) = 0$ \u7684\u533a\u95f4\uff0c\u5f88\u5feb\u4e5f\u53d1\u73b0\u4e0d\u884c\uff0c\u56e0\u4e3a $F(x) - G(x)$ \u4e0d\u5355\u8c03\uff0c\u6709\u53ef\u80fd\u51fa\u73b0 $0,1,0,1$ \u53cd\u590d\u6a2a\u8df3\u7684\u60c5\u51b5\u3002\n\n\u5176\u5b9e\u4e0e\u5176\u8003\u8651 $F(x) - G(x)$\uff0c\u4e0d\u5982\u5148\u8003\u8651 $f(x) - g(x)$\uff0c\u5b83\u662f\u659c\u7387 $\\ge 0$ \u7684\u76f4\u7ebf\u3002\u6211\u4eec\u53d1\u73b0\uff1a\n\n- $f(x) - g(x) \\in (-1,0], F(x) - G(x) \\in \\{-1,0\\}$\uff1b\n- $f(x) - g(x) \\in (0,1], F(x) - G(x) \\in \\{0,1\\}$\u3002\n\n\u800c\u6ee1\u8db3 $f(x) - g(x) \\in (-1,0]$ \u548c $f(x) - g(x) \\in (0,1]$ \u7684\u533a\u95f4\u53ef\u4ee5\u4e8c\u5206\u5f97\u5230\u3002\u63a5\u4e0b\u6765\u4ee5\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e3a\u4f8b\uff08\u7b2c\u4e8c\u79cd\u60c5\u51b5\u662f\u5bf9\u79f0\u7684\uff09\uff0c\u8003\u8651\u5982\u4f55\u8ba1\u7b97\u3002\n\n\u73b0\u5728\u95ee\u9898\u4ecd\u7136\u662f\u6c42 $\\sum\\limits_{x=l}^r [F(x) - G(x) = 0]$\uff0c\u4f46\u662f $F(x) - G(x) \\in \\{-1,0\\}$\u3002\u8003\u8651\u8ba1\u7b97 $\\sum\\limits_{x=l}^r F(x) - G(x)$\uff0c\u8bbe\u7ed3\u679c\u4e3a $k$\uff0c\u53d1\u73b0 $\\sum\\limits_{x=l}^r [F(x) - G(x) = -1] = -k$\uff0c\u8fd9\u6837 $\\sum\\limits_{x=l}^r [F(x) - G(x) = 0] = r - l + 1 + k$\uff0c**\u5c31\u628a\u533a\u95f4\u91cc\u6c42\u591a\u5c11\u6570\u7684\u503c\u7b49\u4e8e\u67d0\u4e2a\u6570\u7684\u95ee\u9898\u8f6c\u5316\u6210\u4e86\u533a\u95f4\u6c42\u548c**\u3002\n\n\u63a5\u4e0b\u6765\u95ee\u9898\u53d8\u6210\u4e86\u6c42 $\\sum\\limits_{x=l}^r F(x) - G(x) = (\\sum\\limits_{x=l}^r A_X + \\left\\lfloor\\frac{i}{B_X}\\right\\rfloor) - (\\sum\\limits_{x=l}^r A_Y + \\left\\lfloor\\frac{i}{B_Y}\\right\\rfloor)$\u3002\u8fd9\u4e2a\u5c31\u7231\u600e\u4e48\u505a\u600e\u4e48\u505a\u4e86\uff0c~~\u867d\u7136\u4f60\u95f2\u5f97\u86cb\u75bc\u4e5f\u53ef\u4ee5\u7c7b\u6b27\uff08~~\n\n[code](https://atcoder.jp/contests/arc123/submissions/40996641)",
        "postTime": 1682674173,
        "uid": 275273,
        "name": "zltqwq",
        "ccfLevel": 0,
        "title": "ARC123E \u9898\u89e3"
    },
    {
        "content": "\u9898\u610f\u65e0\u975e\u5c31\u662f\u8981\u4f60\u6c42 $i \\in [1, n]$\uff0c\u6709\u591a\u5c11\u6ee1\u8db3 $a + \\lfloor\\frac{i}{b} \\rfloor = c + \\lfloor\\frac{i}{d}\\rfloor$\u3002\n\n\u9996\u5148\u79fb\u9879\uff0c\u5f97 $a - c = \\lfloor\\frac{i}{d}\\rfloor - \\lfloor\\frac{i}{b} \\rfloor$\u3002\n\n\u5e95\u51fd\u6570\u6ca1\u5565\u597d\u5206\u6790\u7684\u529e\u6cd5\uff0c\u5c31\u76f4\u63a5\u62c6\u6210\u4e0d\u7b49\u5f0f\u3002\n\n\u6211\u4eec\u6709 $\\alpha - 1 < \\lfloor\\alpha\\rfloor \\le \\alpha$\uff0c\u4e8e\u662f\u4e0a\u9762\u7684\u5f0f\u5b50\u63a8\u4e00\u63a8\u5c31\u53ef\u4ee5\u5f97\u5230 $a - c = \\lfloor\\frac{i}{d}\\rfloor - \\lfloor\\frac{i}{b} \\rfloor \\in (\\frac{i}{d} - \\frac{i}{b} - 1, \\frac{i}{d} - \\frac{i}{b} + 1)$\u3002\n\n\u6b64\u65f6\u6211\u4eec\u53d1\u73b0\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5c31\u662f\u8fd9\u4e2a\u533a\u95f4\u662f\u5f88\u7d27\u7684\uff0c\u8fd9\u4e2a\u533a\u95f4\u5185\u6700\u591a\u6709\u4e24\u4e2a\u6574\u6570\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u627e\u51fa $i$ \u7684\u4e00\u4e2a\u53ef\u80fd\u7684\u533a\u95f4\uff0c\u90a3\u4e48\u5e94\u5f53\u4f1a\u66f4\u597d\u7edf\u8ba1\u7b54\u6848\u3002\n\n\u518d\u53d8\u6362\u4e00\u4e0b\uff0c\u628a\u4e0d\u7b49\u53f7\u53cd\u8fc7\u6765\uff0c\u5c31\u80fd\u5f97\u5230 $\\frac{i}{d} - \\frac{i}{b} \\in (a-c-1, a-c+1), i \\in (\\frac{bd(a-c-1)}{b-d}, \\frac{bd(a-c+1)}{b - d})$\u3002\n\n\u6b64\u65f6\u8003\u8651\u5c06 $i$ \u5206\u4e3a\u82e5\u5e72\u4e2a\u533a\u95f4\u6765\u8003\u8651\u3002\u5047\u5982 $\\frac{i}{d} - \\frac{i}{b} \\in (a-c, a-c+1)$ \u65f6\uff0c\u90a3\u4e48\u539f\u4e0d\u7b49\u5f0f\u4e2d\u6ee1\u8db3\u6761\u4ef6\u7684\u6574\u6570\u6709 $a-c, a-c+1$ \u4e24\u79cd\u3002\u540c\u7406\uff0c$\\frac{i}{d} - \\frac{i}{b} \\in (a-c - 1, a-c)$ \u4e2d\u6709 $a-c-1, a-c$\uff0c$\\frac{i}{d} - \\frac{i}{b} = a-c$ \u4e2d\u6709 $a-c$\u3002\n\n\u6700\u540e\u4e00\u4e2a\u60c5\u51b5\u5148\u5224\u6389\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u6bcf\u4e2a\u533a\u95f4\u4e2d\u4ec5\u6709\u4e24\u4e2a\u53ef\u80fd\u7684\u6574\u6570\uff0c\u800c\u6211\u4eec\u53d1\u73b0\uff0c$\\lfloor\\frac{i}{a}\\rfloor$ \u8fd9\u4e2a\u51fd\u6570\u662f\u5bb9\u6613\u8ba1\u7b97\u524d\u7f00\u548c\u7684\u3002\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u8fd9\u4e2a\u533a\u95f4\u7684\u548c\uff0c\u7136\u540e\u89e3\u65b9\u7a0b\u5373\u53ef\u5f97\u77e5\u6709\u591a\u5c11\u4e2a $a-c$\uff0c\u8fd9\u4fbf\u662f\u6211\u4eec\u8981\u627e\u7684\u7b54\u6848\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint T, n, a, b, c, d;\nlong long sum(int n, int a) {\n    if (n < 0) return 0;\n    int b = n / a - 1, c = n % a + 1;\n    return 1ll * a * b * (b + 1) / 2 + 1ll * c * (b + 1);\n}\nint main() {\n    scanf(\"%d\", &T);\n    while (T--) {\n        scanf(\"%d%d%d%d%d\", &n, &a, &b, &c, &d);\n        if (b == d) {\n            printf(\"%d\\n\", a == c ? n : 0);\n            continue;\n        }\n        if (1ll * (a - c) * (b - d) < 0) {\n            printf(\"0\\n\");\n            continue;\n        }\n        if (b < d) swap(a, c), swap(b, d);\n        int ans = 0;\n        // case 1: i(1/d-1/b) = a-c\n        if (1ll * b * d * (a - c) % (b - d) == 0) {\n            if (1ll * b * d * (a - c) / (b - d) <= n\n                && 1ll * b * d * (a - c) / (b - d) >= 1)\n                ans++;\n        }\n        // case 2: i(1/d-1/b) \\in (a-c, a-c+1)\n        {\n            long long l = min(1ll * b * d * (a - c) / (b - d) + 1, n + 1ll);\n            long long r = min((1ll * b * d * (a - c + 1) - 1) / (b - d), n + 0ll);\n            int m = r - l + 1;\n            int s = sum(r, d) - sum(l - 1, d) - sum(r, b) + sum(l - 1, b) - 1ll * m * (a - c);\n            ans += m - s;\n        }\n        // case 3: i(1/d-1/b) \\in (a-c-1, a-c)\n        {\n            long long l = min(max(1ll * b * d * (a - c - 1) / (b - d) + 1, 1ll), n + 1ll);\n            long long r = min(max((1ll * b * d * (a - c) - 1) / (b - d), 0ll), n + 0ll);\n            int m = r - l + 1;\n            int s = sum(r, d) - sum(l - 1, d) - sum(r, b) + sum(l - 1, b) - 1ll * m * (a - c - 1);\n            ans += s;\n        }\n        printf(\"%d\\n\", ans);\n    }\n    return 0;\n}\n```",
        "postTime": 1684843804,
        "uid": 279652,
        "name": "APJifengc",
        "ccfLevel": 9,
        "title": "\u300c\u89e3\u9898\u62a5\u544a\u300dARC123E Training"
    }
]
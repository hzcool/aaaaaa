[
    {
        "content": "\u96be\u5ea6\u5efa\u8bae\u7eff\u6216\u84dd\n\n# \u9898\u610f\u7b80\u8ff0\n\n\u628a $\\left[ 1,n \\times m \\right]$ \u4e2d\u7684\u6240\u6709\u6574\u6570**\u4e0d\u91cd\u590d**\u5730\u5199\u5728\u4e00\u4e2a $n \\times  m$ \u7684\u7f51\u683c\u4e2d\uff0c\u9700\u8981\u9075\u5faa\u4ee5\u4e0b\u89c4\u5219\uff1a\n\n- \u7b2c $i(1 \\leq i \\leq n)$ \u884c\u4e2d\u7684\u6700\u5927\u503c\u662f $a_i$\n\n- \u7b2c $j(1 \\leq j \\leq m)$ \u5217\u4e2d\u7684\u6700\u5927\u503c\u662f $b_j$\n\n\u7ed9\u5b9a\u6570\u5217 $\\left\\{ a_n \\right\\}$\uff0c$\\left\\{ b_m \\right\\}$\uff0c\u6c42\u586b\u6570\u7684\u65b9\u6848\u6570\uff0c\u7ed3\u679c\u5bf9 $10^9+7$ \u53d6\u6a21\u3002\n\n### \u6570\u636e\u8303\u56f4\n\n$1 \\leq n,m \\leq 1000$\uff0c$1 \\leq a_i,b_j \\leq 1000$\uff0c\u4fdd\u8bc1 $a_i,b_j$ \u662f\u6574\u6570\u3002\n\n------------\n~~\u53ef\u4ee5\u76f4\u63a5\u628a\u9898\u610f\u7b80\u8ff0\u4f5c\u4e3a\u7ffb\u8bd1~~\n\n# Solution\n\n## \u5206\u6790\n\n\u8ba1\u6570\u9898\uff0c\u6bd4\u8f83\u8003\u67e5\u601d\u7ef4\u3002\n\n\u53d1\u73b0\u5982\u679c\u4ece\u5927\u5230\u5c0f\u586b\u6570\uff0c\u7531\u4e8e\u540e\u9762\u8981\u586b\u7684\u6570\u90fd\u6bd4\u524d\u9762\u5df2\u7ecf\u586b\u597d\u7684\u6570\u5c0f\uff0c\u6240\u4ee5\u4e4b\u540e\u4e0d\u7ba1\u600e\u4e48\u586b\u90fd\u4e0d\u4f1a\u5f71\u54cd\u6bcf\u4e00\u884c\u548c\u6bcf\u4e00\u5217\u7684\u6700\u5927\u503c\u3002\n\n\u4e0b\u9762\u4e3a\u65b9\u4fbf\u63cf\u8ff0\uff0c\u79f0\u4e00\u884c\u6216\u4e00\u5217**\u88ab\u8986\u76d6**\uff0c\u5f53\u8fd9\u4e00\u884c\u6216\u5217\u5df2\u7ecf\u586b\u4e86\u81f3\u5c11\u4e00\u4e2a\u6570\u3002\n\n\u8bbe\u5f53\u524d\u5df2\u7ecf\u88ab\u8986\u76d6\u7684\u884c\u6570\u548c\u5217\u6570\u5206\u522b\u4e3a $nn$ \u548c $mm$\uff0c\u8bb0\u7b54\u6848\u4e3a $ans$\uff0c\u5bf9\u5f53\u524d\u8981\u586b\u7684\u6bcf\u4e2a\u6570\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- \u6709\u4e00\u884c**\u548c**\u4e00\u5217\u4ee5\u5b83\u4e3a\u6700\u5927\u503c\uff0c\u6b64\u65f6\u586b\u7684\u4f4d\u7f6e\u56fa\u5b9a\uff1b\n\n- \u6709\u4e00\u884c**\u6216**\u4e00\u5217\u4ee5\u5b83\u4e3a\u6700\u5927\u503c\uff0c\u6b64\u65f6\u5b83\u53ea\u80fd\u586b\u5728\u90a3\u4e00\u884c\u6216\u4e00\u5217\u4e00\u4e2a\u88ab\u8986\u76d6\u7684\u4f4d\u7f6e\u4e0a\uff0c$ans \\gets ans \\times nn$ \u6216 $ans \\gets ans \\times mm$\uff1b\n\n- **\u6ca1\u6709**\u884c\u548c\u5217\u4ee5\u5b83\u4e3a\u6700\u5927\u503c\uff0c\u6b64\u65f6\u5b83\u53ea\u80fd\u586b\u5728\u4e00\u4e2a\u884c\u5217\u90fd\u88ab\u8986\u76d6\u7684\u4f4d\u7f6e\u4e0a\uff0c\u5373\u4e00\u4e2a\u4ea4\u70b9\u4e0a\uff0c$ans \\gets ans \\times (nn \\times mm - al)$\uff0c\u5176\u4e2d $al$ \u8868\u793a\u5f53\u524d**\u5df2\u7ecf**\u586b\u4e86\u591a\u5c11\u6570\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O(nm)}$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n## \u4ee3\u7801\n\n\u5199\u51fa\u6765\u5927\u6982 $\\text{1.35KB}$\uff0c\u7801\u91cf\u4e0d\u5927\u3002\n\n\u522b\u5fd8\u4e86 $\\bmod 10^9+7$\uff0c\u6709\u7684\u5730\u65b9\u8981\u5f00 ```long long```\u3002~~\u8bf4\u5b9e\u8bdd\u53d8\u91cf\u540d\u6709\u70b9\u5947\u602a\uff0c\u4f46\u6ca1\u6709\u5173\u7cfb~~\n\n```cpp\n#include<cstdio>\n#include<cstring>\nusing namespace std;\ntypedef long long ll;\ninline ll read(){\n\tll f=1,x=0;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9') {\n\t\tif(c=='-')f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9') {\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn f*x;\n}\ninline void write(ll x){\n\tif(x<0)x=-x,putchar('-');\n\tif(x>9)write(x/10);\n\tputchar(x%10+'0');\n}\nconst int N=1010,M=1010;\nconst ll mod=1e9+7;\nint n,m,a[N],b[M];\nint cn[N*M],cm[N*M],pn[N*M],pm[N*M];//N*M\u76f8\u5f53\u4e8e\u503c\u57df \nll ans=1,al,nn,mm,val;\nint main(){\n\tmemset(pn,-1,sizeof(pn));\n\tmemset(pm,-1,sizeof(pm));\n\tn=read(),m=read();\n\tfor(int i=1;i<=n;i++){\n\t\ta[i]=read();\n\t\tcn[a[i]]++;\n\t\tpn[a[i]]=i;\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tb[i]=read();\n\t\tcm[b[i]]++;\n\t\tpm[b[i]]=i;\n\t}\n\tfor(int i=n;i>=1;i--)\n\t\tfor(int j=m;j>=1;j--){\n\t\t\tval=1ll*((i-1)*m+j);//\u5f53\u524d\u8981\u586b\u7684\u6570 \n\t\t\tif(pn[val]!=-1&&pm[val]!=-1){\n\t\t\t\tnn++;\n\t\t\t\tmm++;\n\t\t\t}\n\t\t\telse if(pn[val]!=-1){\n\t\t\t\tif(mm==0){\n\t\t\t\t\tprintf(\"0\");\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\t(ans*=mm)%=mod;\n\t\t\t\tnn++;\n\t\t\t}\n\t\t\telse if(pm[val]!=-1){\n\t\t\t\tif(nn==0){\n\t\t\t\t\tprintf(\"0\");\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\t(ans*=nn)%=mod;\n\t\t\t\tmm++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(nn*mm-al==0){\n\t\t\t\t\tprintf(\"0\");\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\t(ans*=(nn*mm-al))%=mod;\n\t\t\t}\n\t\t\tal++;\n\t\t} \n\twrite(ans);\n\treturn 0;\n}\n/*\n2022.7.28 11:05 started considering\n2022.7.28 11:27 started coding\n2022.7.28 11:49 finished debugging\n*/\n```",
        "postTime": 1658834528,
        "uid": 545529,
        "name": "Sherlock_Chen",
        "ccfLevel": 5,
        "title": "AT4568 Double Landscape \u9898\u89e3"
    }
]
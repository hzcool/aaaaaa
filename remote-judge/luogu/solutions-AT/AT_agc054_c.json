[
    {
        "content": "\u8003\u8651\u4e00\u4e2a\u5408\u6cd5\u7684 $P$\uff0c\u8bb0 $a_i = \\sum\\limits_{j=1}^{i-1} [P_j > P_i]$\uff0c\u5219\u901a\u8fc7\u7b80\u5355\u63a8\u7406\u53ef\u5f97 $a_i < a_{i+1} \\Leftrightarrow P_i > P_{i+1}$\u3002\u6613\u77e5\u4e00\u6b21\u5408\u6cd5\u4ea4\u6362\u64cd\u4f5c $(i,i+1)$ \u5f53\u4e14\u4ec5\u5f53 $a_i < a_{i+1} \\land a_{i+1} > K$\uff0c\u5426\u5219\u5c31\u4e0d\u80fd\u4f7f\u5f97\u4ea4\u6362\u6b21\u6570\u6700\u5c0f\uff0c\u5e76\u4e14\u4ea4\u6362\u540e $a_i \\gets a_i - 1$\u3002\n\n\u73b0\u5728\u5df2\u77e5 $P'$\uff0c\u8003\u8651\u6c42 $b_i = \\sum\\limits_{j=1}^{i-1}[P'_j > P'_i]$\uff0c\u5e76\u4e14\u8fdb\u884c\u9006\u64cd\u4f5c\u3002\u56e0\u6b64\u4e00\u6b21\u4ea4\u6362\u64cd\u4f5c $(i,i+1)$ \u5408\u6cd5\u5f53\u4e14\u4ec5\u5f53 $b_i \\ge b_{i+1} \\land b_i \\ge K$\uff0c\u4e14\u4ea4\u6362\u540e $b_{i+1} \\gets b_{i+1} + 1$\u3002\u9006\u5e8f\u8003\u8651\u6240\u6709\u6ee1\u8db3 $b_i = K$ \u7684 $i$\uff0c\u5219 $P'_i$ \u6700\u591a\u53ef\u4ee5\u5f80\u53f3\u79fb $n-i$ \u6b21\uff0c\u6709 $n-i+1$ \u79cd\u9009\u62e9\u3002\u6839\u636e\u4e58\u6cd5\u539f\u7406\u6613\u5f97\u7b54\u6848\u4e3a $\\prod\\limits_{b_i=K} (n-i+1)$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u82e5\u4f7f\u7528\u6811\u72b6\u6570\u7ec4\u6c42 $b$ \u5219\u590d\u6742\u5ea6\u964d\u4e3a $O(n \\log n)$\u3002\n\n[code](https://atcoder.jp/contests/agc054/submissions/39147786)",
        "postTime": 1677230461,
        "uid": 275273,
        "name": "zltqwq",
        "ccfLevel": 0,
        "title": "AGC054C \u9898\u89e3"
    }
]
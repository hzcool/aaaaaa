[
    {
        "content": "- [AT5256 [ABC142F] Pure](https://www.luogu.com.cn/problem/AT5256)\n\n### \u9898\u76ee\u63cf\u8ff0\n\n\u7ed9\u5b9a\u4e00\u4e2a $n$ \u4e2a\u70b9\uff0c$m$ \u6761\u8fb9\u7684\u6709\u5411\u56fe $(n \\le 1000, m \\le 2000)$\u3002\n\n\u627e\u5230\u4e00\u4e2a\u5b50\u56fe\uff0c\u4f7f\u5f97\u5b50\u56fe\u91cc\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u548c\u51fa\u5ea6\u90fd\u7b49\u4e8e 1\u3002\n\n\u8f93\u51fa\u65b9\u6848\u3002\n\n### \u6b63\u89e3\n\n\u9898\u76ee\u8981\u6c42\u5373\u627e\u5230\u4e00\u4e2a\u73af\uff0c\u73af\u5185\u7684\u70b9\u90fd\u53ea\u5411\u5916\u8fde\u4e00\u6761\u8fb9\u3002\n\n\u624b\u73a9\u53d1\u73b0\u53ef\u4ee5\u5148\u627e\u5230\u4efb\u610f\u4e00\u4e2a\u73af\uff0c\u5047\u5982\u73af\u5185\u6709\u8fde\u8fb9\uff0c\u5c31\u628a\u73af\u7f29\u5c0f\uff0c\u4e00\u76f4\u7f29\u5230\u73af\u5185\u6bcf\u4e2a\u70b9\u51fa\u5ea6\u90fd\u4e3a 1\u3002\n\n\u6a21\u62df\u7f29\u73af\u7684\u8fc7\u7a0b\uff0c\u53d1\u73b0\u53ea\u8981\u627e\u5230\u4e00\u4e2a\u73af\u5185\u7684**\u6700\u5c0f\u73af**\u5373\u53ef\u3002\n\n\u90a3\u4e48\u5c31\u7528 $bfs$ \u641c\u51fa\u4e00\u9897\u6709\u5411\u6811\uff0c**\u7b2c\u4e00\u6761\u8fd4\u7956\u8fb9**\u6240\u8fde\u7684\u4e24\u4e2a\u70b9\u6240\u5728\u7684\u90a3\u4e2a\u6700\u5c0f\u73af\u5373\u4e3a\u7b54\u6848\u3002\n\n\u627e\u65b9\u6848\u7684\u8bdd\u53ef\u4ee5\u8bb0\u4e00\u4e0b\u8def\u5f84\u4e0a\u7684 preNode (\u524d\u9a71)\u3002\n\n\u73b0\u573a\u7528 $dfs$ \u4e5f\u8fc7\u4e86\uff0c\u4e0d\u8fc7\u540e\u9762\u88ab dqk hack \u6389\u4e86\u3002\n\n$\\color{DeepSkyBlue} Code :$\n\n```cpp\n/*\n\tbfs \u627e\u73af\n*/\n#include <bits/stdc++.h>\n#define N 1005\n#define M 2005\n\nusing namespace std;\n\nint n, m;\nint dep[N];\nint head[N], nex[M], to[M], e;\nint stk[N], top;\nbool instack[N], vis[N], G[N][N];\nvector<int> res;\n\ninline int Rd() {\n\tint x = 0; char ch = getchar();\n\twhile(!isdigit(ch)) ch = getchar();\n\twhile(isdigit(ch)) x = x * 10 + ch - '0', ch = getchar();\n\treturn x;\n}\ninline void Ae(int u, int v) {\n\tnex[++e] = head[u], head[u] = e;\n\tto[e] = v;\n}\n\nvoid calc(int u, int v) {\n\tdo {\n\t\tres.push_back(stk[top]);\n\t} while(stk[top--] != v);\n\tint ans = res.size();\n\tprintf(\"%d\\n\", ans);\n\tfor(int i = 0; i < ans; ++i) printf(\"%d\\n\", res[i]);\n\texit(0);\n}\nvoid dfs(int u) {\n\tstk[++top] = u;\n\tinstack[u] = vis[u] = true;\n\tfor(int i = head[u]; i; i = nex[i]) {\n\t\tint v = to[i];\n\t\tif(vis[v]) {\n\t\t\tif(instack[v]) calc(u, v);\n\t\t} else {\n\t\t\tdfs(v);\n\t\t}\n\t}\n\tinstack[u] = false, --top;\n\treturn;\n}\n\nint main() {\n\tn = Rd(), m = Rd();\n\tfor(int i = 1; i <= m; ++i) {\n\t\tint u = Rd(), v = Rd();\n\t\tG[u][v] = true;\n\t\tAe(u, v);\n\t}\n\t\n\tfor(int i = 1; i <= n; ++i) {\n\t\tfor(int j = 1; j <= n; ++j) {\n\t\t\tif(G[i][j] && G[j][i]) {\n\t\t\t\tputs(\"2\");\n\t\t\t\tprintf(\"%d\\n%d\\n\", i, j);\n\t\t\t\treturn 0;\n\t\t\t}\t\n\t\t}\n\t}\n\tfor(int i = 1; i <= n; ++i)\n\t\tif(!vis[i])\n\t\t\tdfs(i);\n\tputs(\"-1\");\n\treturn 0;\t\n}\n```",
        "postTime": 1585052664,
        "uid": 88471,
        "name": "Lskkkno1",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 [ABC142F] Pure"
    }
]
[
    {
        "content": " - [$\\color{lightgreen}\\text{[AT5300 \u539f\u9898\u94fe\u63a5]}$](https://www.luogu.com.cn/problem/AT5300)                               \n\n - \u9898\u76ee\u63cf\u8ff0                 \n   \u7ed9\u51fa `N` \u4e2a\u9ab0\u5b50\uff0c \u540c\u65f6\u6295\u63b7 `K` \u4e2a\u8fde\u7eed\u9ab0\u5b50, \u8981\u6c42\u51fa\u53ef\u80fd\u7684\u6700\u5927\u6570\u5b66\u671f\u671b\u503c\u3002 \n   \n - \u8f93\u5165\u683c\u5f0f            \n   \u7b2c\u4e00\u884c\u4e24\u4e2a\u6570\uff0c `N` \u548c `K` .\n   \u7b2c\u4e8c\u884c `N` \u4e2a\u6570, \u4ee3\u8868\u6bcf\u4e00\u4e2a\u9ab0\u5b50\u7684\u9762\u6570\u3002\n   \n - \u8f93\u51fa\u683c\u5f0f               \n   \u4e00\u4e2a `12` \u4f4d\u7684\u5c0f\u6570\uff0c \u8868\u793a\u6700\u5927\u6570\u5b66\u671f\u671b\u503c\u3002\n  \n - \u601d\u8def         \n   \u9996\u5148\uff0c \u6211\u4eec\u8981\u5148\u77e5\u9053\uff0c \u6570\u5b66\u671f\u671b\u503c\u662f\u4ec0\u4e48\uff1f\n   \n   \u6570\u5b66\u671f\u671b\u503c\u662f\u8bd5\u9a8c\u4e2d\u6bcf\u6b21\u53ef\u80fd\u7684\u7ed3\u679c\u4e58\u4ee5\u5176\u7ed3\u679c\u6982\u7387\u7684\u603b\u548c\u3002 \n   \n   \u4e5f\u5c31\u662f\u8bf4\u5728\u9ab0\u5b50\u91cc\u7684\u6570\u5b66\u671f\u671b\u503c\u5c31\u662f\u5b83\u7684\u6240\u6709\u9762\u7684\u70b9\u6570\u4e4b\u548c\u9664\u4ee5\u5b83\u7684\u9762\u6570\u3002\n   \u6211\u4eec\u5047\u8bbe\u8fd9\u662f\u4e00\u4e2a\u6709 `n` \u9762\u7684\u9ab0\u5b50\uff0c \u90a3\u4e48\u5b83\u7684\u6570\u5b66\u671f\u671b\u503c\u5c31\u662f\uff1a\n   \n   $$\\frac{1+2+3+...+(n-2)+(n-1)+n}{n}$$\n   \n   \u6839\u636e\u6211\u4eec\u7684\u89c2\u5bdf\uff0c \u53ef\u4ee5\u53d1\u73b0\uff0c $(1+2+3+...+(n-2)+(n-1)+n)$ \u662f\u4e00\u4e2a\u7b49\u5dee\u6570\u5217\u6c42\u548c\u7684\u5f0f\u5b50\u3002\n   \n   \u6211\u4eec\u77e5\u9053\uff0c \u7b49\u5dee\u6570\u5217\u6c42\u548c\u516c\u5f0f\u662f $\\frac{(1+n)n}{2}$ .\n   \n   \u6240\u4ee5\uff0c \u628a\u4e0a\u9762\u7684\u5f0f\u5b50\u5316\u7b80\u4e00\u4e0b\u5c31\u6210\u4e86\u8fd9\u6837\uff1a\n   \n   $$\\frac{\\frac{(1+n)n}{2}}{n}$$\n   \n   \u6211\u4eec\u518d\u628a `n`  \u7ea6\u5206\u6389\uff0c \u6700\u7ec8\u5c31\u6210\u4e86\u8fd9\u6837\uff1a\n   \n   $$\\frac{1+n}{2}$$\n   \n   \u77e5\u9053\u4e86\u8fd9\u4e2a\u5f0f\u5b50\uff0c \u90a3\u8fd9\u9898\u5c31\u7b80\u5355\u4e86\u3002\n   \n   \u56e0\u4e3a\u662f\u8fde\u7eed\u7684\u9ab0\u5b50\uff0c \u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u7528\u4e00\u4e2a\u524d\u7f00\u548c\u6570\u7ec4\u628a\u7b54\u6848\u5b58\u8d77\u6765\u5c31\u884c\u4e86\uff0c \u6700\u540e\u5728\u7528 `for` \u5faa\u73af\u548c\u524d\u7f00\u5dee\u6c42\u51fa\u6700\u5927\u503c\u5c31\u884c\u4e86\u3002\n\n - \u4ee3\u7801\u5b9e\u73b0\n ```cpp\n #include <bits/stdc++.h>\n #define N 200001\n #define int long long\n using namespace std;\n int n, k;\n double prefix[N], p[N], maxn;\n signed main() {\n \tcin >> n >> k;\n \tfor(int i = 1; i <= n; i++) {\n \t\tcin >> p[i];\n \t\tp[i] = (1 + p[i]) / 2;\n \t\tprefix[i] = prefix[i - 1] + p[i];\n \t}\n \tfor(int i = k; i <= n; i++) {\n \t\tmaxn = max(maxn, prefix[i] - prefix[i - k]);\n \t}\n \tprintf(\"%0.12lf\\n\", maxn);\n \treturn 0;\n }\n ```\n \n - \u6b64\u9898\u89e3\u4ec5\u4f9b\u53c2\u8003\uff0c \u8c22\u8c22 \uff01",
        "postTime": 1652581359,
        "uid": 532992,
        "name": "Scorpio_Limit",
        "ccfLevel": 0,
        "title": "AT5300\u9898\u89e3"
    },
    {
        "content": "## [\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/AT5300)\n\n\u4e0d\u77e5\u4e3a\u4f55\u8bc4\u7eff\uff1f\n\n### \u89e3\u51b3\u601d\u8def\n\n\u9996\u5148\uff0c\u4e00\u9897\u9762\u6570\u5df2\u77e5\u7684\u9ab0\u5b50\u63b7\u51fa\u7684\u70b9\u6570\u671f\u671b\u503c\u662f\u56fa\u5b9a\u7684\uff0c\u5047\u8bbe\u5b83\u6709 $k$ \u9762\uff0c\u5219\u671f\u671b\u4e3a $\\frac {\\sum_{i = 1}^{k} i} k$ \u3002\u7136\u540e\u770b\u6570\u636e\u8303\u56f4\uff0c\u6700\u591a\u53ea\u6709 $10^3$ \u9762\uff0c\u6240\u4ee5\u5b8c\u5168\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u9ab0\u5b50\u7684\u671f\u671b\u70b9\u6570\u9884\u5904\u7406\u51fa\u6765\uff0c\u7136\u540e\u539f\u9898\u5c31\u53d8\u6210\u4e86\u6c42\u6700\u5927\u5b9a\u957f\u5b50\u6bb5\u548c\uff0c\u7528\u524d\u7f00\u548c\u53ef\u4ee5\u8f7b\u677e\u89e3\u51b3\u3002\n\n\n### AC Code\n\n```cpp\n#include<bits/stdc++.h>\n#define IOS ios::sync_with_stdio(false)\n#define TIE cin.tie(0),cout.tie(0)\nusing namespace std;\ndouble f[1005],s[200005],now,ans;\nint n,k,a;\nsigned main(){\n\tIOS;TIE;\n\tcin>>n>>k;\n\tfor(int i=1;i<=1000;i++) now+=(double)i,f[i]=now/(double)i;\n\tfor(int i=1;i<=n;i++) cin>>a,s[i]=s[i-1]+f[a];\n\tfor(int i=k;i<=n;i++) ans=max(ans,s[i]-s[i-k]);\n\tcout<<fixed<<setprecision(16)<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1665970682,
        "uid": 241485,
        "name": "Binary_1110011_",
        "ccfLevel": 6,
        "title": "AT5300 [ABC154D] \u9898\u89e3"
    },
    {
        "content": "\u672c\u9898\u8981\u6c42\u8fde\u7eed $k$ \u4e2a\u9ab0\u5b50\u70b9\u6570\u7684\u671f\u671b\u503c\u6700\u5927\u3002\n\n\u5bf9\u4e8e\u67d0\u4e2a\u9ab0\u5b50\uff0c\u5b83\u7684\u70b9\u6570\u7684\u671f\u671b\u503c\u5c31\u662f\u5b83\u6240\u6709\u9762\u7684\u70b9\u6570\u4e4b\u548c\u9664\u4ee5\u5b83\u7684\u9762\u6570\u3002\n\n\u5982\u679c\u5b83\u6709 $x$ \u9762\uff0c\u90a3\u4e48\u5b83\u7684\u671f\u671b\u503c\u5c31\u662f:\n\n$$\\frac{1+2+...+ \\left( x-1 \\right)+x}{x}$$\n\n\u7136\u540e\u8fd9\u4e2a\u5f0f\u5b50\u53d8\u5f62\u4e00\u4e0b\u5c31\u662f:\n\n$$\\frac{\\frac{\\left( 1+x \\right) \\times x}{2}}{x}$$\n\n\u5316\u7b80\u4e4b\u540e\u5c31\u5f97\u5230\uff1a\n\n$$\\frac{1+x}{2}$$\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u8f93\u5165\u7684\u65f6\u5019\u5904\u7406\u51fa\u6bcf\u4e2a\u9ab0\u5b50\u7684\u70b9\u6570\u7684\u671f\u671b\u503c\uff0c\u524d\u7f00\u548c\u4e00\u4e0b\u5c31\u80fd\u5feb\u901f\u6c42\u533a\u95f4\u6700\u5927\u503c\u4e86\u3002\n\n\n\u6838\u5fc3\u4ee3\u7801\uff1a\n```cpp\nconst int N=2e5+10;\nint n,k;\ndouble s[N],p[N],ans;//s\u4e3a\u524d\u7f00\u548c\u6570\u7ec4\nsigned main()\n{\n\tn=read();k=read();\n\tfor(ri int i=1;i<=n;++i)\n\t\tp[i]=read(),p[i]=(p[i]+1)/2,s[i]=s[i-1]+p[i];\n\tfor(ri int i=k;i<=n;++i)\n\t\tans=fmax(ans,s[i]-s[i-k]);\n\tcout<<fixed<<setprecision(12)<<ans;\n\treturn 0;\n}",
        "postTime": 1622004134,
        "uid": 329672,
        "name": "Ninelife_Cat",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 AT5300 [ABC154D] Dice in Line"
    },
    {
        "content": "\u6ce8\u610f\u5230\u6bcf\u4e2a\u9ab0\u5b50\u51fa\u73b0\u67d0\u4e2a\u6570\u5b57\u7684\u6982\u7387\u662f\u72ec\u7acb\u7684\uff0c\u6240\u4ee5\u671f\u671b\u53ef\u4ee5\u5f88\u597d\u7684\u52a0\u8d77\u6765\u3002\n\n\u5bf9\u4e0e\u4e00\u4e2a\u5305\u542b $1$ \u5230 $m$ \u7684\u9ab0\u5b50\uff0c\u5b83\u671f\u671b\u51fa\u73b0\u6570\u5b57\u662f\n\n$$\\frac{1+2+\\dots+m}{m}=\\frac{\\frac{m(m+1)}{2}}{m}=\\frac{m(m+1)}{2m}=\\frac{m+1}{2}$$\n\n\u6240\u4ee5\uff0c\u53ef\u4ee5\u628a\u4e00\u4e2a $1$ \u5230 $m$ \u7684\u9ab0\u5b50\u7684\u6743\u503c\u8bbe\u4e3a $m+1$\uff1b\u7528\u4e00\u4e2a\u6eda\u52a8\u533a\u95f4\u7ef4\u62a4\u533a\u95f4\u6743\u503c\u548c\u4e0e\u6240\u9047\u5230\u7684\u533a\u95f4\u6743\u503c\u548c\u7684\u6700\u5927\u503c\u3002\n\n\u7b54\u6848\u662f\u8fd9\u4e2a\u6700\u5927\u533a\u95f4\u6743\u503c\u548c\u9664\u4ee5\u4e8c\u3002\n\n\u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528`double`\u8f93\u51fa\uff0c\u5e94\u4e3a\u53ef\u80fd\u7b54\u6848\u7279\u522b\u5927\u7684\u65f6\u5019\u4e0d\u8f93\u51fa\u6574\u4e2a\u6570\u5b57\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n// writer: w33z8kqrqk8zzzx33\n#include <bits/stdc++.h>\nusing namespace std;\n \n#define iter(i, a, b) for(int i=(a); i<(b); i++)\n#define rep(i, a) iter(i, 0, a)\n#define rep1(i, a) iter(i, 1, (a)+1)\n#define log(a) cerr<<\"\\033[32m[DEBUG] \"<<#a<<'='<<(a)<<\" @ line \"<<__LINE__<<\"\\033[0m\"<<endl\n#define all(a) a.begin(), a.end()\n#define fi first\n#define se second\n#define pb push_back\n#define mp make_pair\n \nusing ll=long long;\nusing pii=pair<int, int>;\n//#define int ll\nconst int MOD = 1000000007;\n\nint aray[200005];\n\nsigned main() {\n    ios_base::sync_with_stdio(false); cin.tie(0);\n    int N, K; cin >> N >> K;\n    ll v = 0, bes = 0; int cnt = 0;\n    rep(i, N) {\n        cin >> aray[i]; aray[i]++;\n        v += aray[i];\n        bes = max(bes, v);\n        cnt++;\n        if(cnt == K) {\n            v -= aray[i-K+1];\n            cnt--;\n        }\n    }\n    cout << bes/2;\n    if(bes%2) cout << \".5\";\n    cout << endl;\n}\n\n```",
        "postTime": 1581908064,
        "uid": 220037,
        "name": "w33z8kqrqk8zzzx33",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT5300"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u4e3b\u8981\u6c42\u7684\u662f$k$\u4e2a\u8fde\u7eed\u9ab0\u5b50\u6570\u5b66\u671f\u671b\u6700\u5927\u7684\u60c5\u51b5\u3002\n\n\n------------\n\n\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u6570\u5b66\u671f\u671b\u662f\u4ec0\u4e48\uff0c\u4f60\u53ef\u4ee5\u53bb\u770b[\u6d1b\u8c37\u65e5\u62a5#211](https://45475.blog.luogu.org/mathematical-expectation)\u3002\u5728\u8fd9\u91cc\u6211\u53ea\u7b80\u8981\u8bb2\u89e3\u4e00\u4e0b\u3002\n\n\n------------\n\n\u6c42\u5355\u4e2a\u9ab0\u5b50\u7684\u6570\u5b66\u671f\u671b\uff1a\u5c31\u662f\u5c06\u9ab0\u5b50\u7684\u5168\u90e8\u70b9\u6570\u52a0\u8d77\u6765\u518d\u9664\u4ee5\u9ab0\u5b50\u7684\u9762\u6570\u3002  \n\u8fd9\u91cc\u8981\u6c42\u7684\u662f$k$\u4e2a\u8fde\u7eed\u9ab0\u5b50\u7684\u6570\u5b66\u671f\u671b\u548c\u6700\u5927\uff0c\u53ea\u9700\u5c06$k$\u4e2a\u9ab0\u5b50\u7684\u6570\u5b66\u671f\u671b\u52a0\u8d77\u6765\u5c31\u884c\u4e86\u3002\n\n\n------------\n\n\n\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,k,p[200010];\ndouble each[200010],now,ans=0;\nint main() {\n\tscanf(\"%d%d\",&n,&k);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&p[i]);\n\tfor(int i=1;i<k;i++) { //\u5148\u6c42\u51fa\u524dk-1\u4e2a\n\t\teach[i]=(double)(1+p[i])*p[i]/2.0/p[i]; //\u6bcf\u4e2a\u9ab0\u5b50\u7684\u6570\u5b66\u671f\u671b\n\t\tnow+=each[i]; //\u52a0\u4e0a\u524dk-1\u7684\u6570\u5b66\u671f\u671b\n\t}\n\tfor(int i=k;i<=n;i++) {\n\t\teach[i]=(double)(1+p[i])*p[i]/2.0/p[i]; //\u6bcf\u4e2a\u9ab0\u5b50\u7684\u6570\u5b66\u671f\u671b\n\t\tans=max(ans,now); //\u83b7\u53d6\u6bcf\u524dk\u4e2a\u6570\u5b66\u671f\u671b\u7684\u503c\n\t\tnow+=each[i];   //\u7edf\u8ba1\u7b2ci\u4e2a\u5e76\u5220\u9664\u7b2ci-k\u4e2a\n\t\tnow-=each[i-k];\n\t}\n\tans=max(ans,now);\n\tcout<<fixed<<setprecision(9)<<ans;\n\treturn 0;\n}\n\n```",
        "postTime": 1581467215,
        "uid": 119065,
        "name": "Kizuna_AI",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 AT5300 \u3010[ABC154D] Dice in Line\u3011"
    },
    {
        "content": "\u8bb0\u5f97\u6a21\u62df\u8d5b\u7684\u65f6\u5019\u77aa\u4e86\u597d\u4e00\u4f1a\u624d\u505a\u51fa\u6765\u3002\n## Solution\n\u5bf9\u4e8e\u5355\u4e2a $x$ \u9762\u7684\u9ab0\u5b50\uff0c\u6295\u51fa\u7684\u671f\u671b\u6570\u5b57\u662f:\n\n$$ \\dfrac{1+2+\\cdots +x}{x}=\\dfrac{\\dfrac1 2x(1+x)}{x}=\\dfrac{1+x} 2$$\n\n\u7136\u540e\u7531\u4e8e\u662f\u8981 $k$ \u4e2a**\u8fde\u7eed**\u7684\u9ab0\u5b50\u7684\u548c\uff0c\u6240\u4ee5\u505a\u4e00\u4e0b\u524d\u7f00\u548c\uff0c\u76f4\u63a5\u6c42:\n\n$$\\overset{\\underset{\\normalsize\\max}{\\scriptsize  n}}{\\scriptsize {i=k}} \\overset{\\normalsize s_i-s_{i-k}}{}$$\n\n## Code\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define ri register\n#define all(x) (x).begin(),(x).end()\nusing namespace std;\ntemplate<typename T_>void operator+=(vector<T_>&x,T_ y){x.emplace_back(y);}\nint n,k;\ndouble ans;\nvector<double>s(1);\nvector<int>a(1);\nint main(){\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n\tcin>>n>>k;\n\tfor(int i=1,x;i<=n;i++)cin>>x,a+=x;\n\tfor(int i=1;i<=n;i++)s+=s.back()+(a[i]+1)/2.;\n\tfor(int i=k;i<=n;i++)ans=max(ans,s[i]-s[i-k]);\n\tcout<<fixed<<setprecision(10)<<ans<<'\\n';\n\treturn 0;\n}\n\n```",
        "postTime": 1666178983,
        "uid": 262322,
        "name": "panyanppyy",
        "ccfLevel": 5,
        "title": "ABC154D"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/AT5300)\n\n$update\\ 2022.01.04$ \u4fee\u6539\u4e86\u4e00\u4e9b\u6ca1\u6ce8\u610f\u5230\u7684\u9519\u8bef\u3002\n\n\u601d\u8def\uff1a\n\n\u9996\u5148\u6211\u4eec\u8981\u77e5\u9053\u4ec0\u4e48\u53eb\u6570\u5b66\u671f\u671b\u503c\u3002\u6570\u5b66\u671f\u671b\u503c\u5c31\u662f\u8bd5\u9a8c\u4e2d\u6bcf\u6b21\u53ef\u80fd\u7684\u7ed3\u679c\u4e58\u4ee5\u5176\u7ed3\u679c\u6982\u7387\u7684\u603b\u548c\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u63a8\u4e00\u4e0b n \u9762\u9ab0\u5b50\u7684\u516c\u5f0f\u3002\n\n$$\\frac{1+2+3+...+n}{n}=\\frac{\\frac{(n+1)n}{2}}{n}=\\frac{\\frac{n^2+n}{2}}{n}=\\frac{n+1}{2}$$\n\n\u7531\u4e8e\u6c42\u7684\u662f**\u8fde\u7eed**\u7684\u9ab0\u5b50\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u524d\u7f00\u548c\u6570\u7ec4\u5b58\u4e0b\u6765\uff0c\u6c42\u6700\u5927\u671f\u671b\u503c\u53ef\u4ee5\u7528 01 \u80cc\u5305\u7684\u601d\u60f3\uff1a\u6211\u8981\u4e48\u4e0d\u5b58\u8fd9\u4e2a\u533a\u95f4\uff0c\u8981\u4e48\u5b58\u4e0b\u6765\uff0c\u4e8e\u662f\u5c31\u6709\u4e86\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$$maxx=\\max(maxx,sum[i]-sum[i-k])$$\n\n\u8fd9\u4f3c\u4e4e\u5c31\u662f 01 \u80cc\u5305\u3002\u90a3\u4e48\u5b58\u50a8\u548c dp \u90fd\u662f $\\Theta(n)$\uff0c\u52a0\u8d77\u6765\u4ecd\u7136\u662f $\\Theta(n)$\uff0c\u6570\u636e\u8303\u56f4 $1 \\leq K \\leq N \\leq 200000$\uff0c\u4e0d\u4f1a\u8d85\u65f6\uff08\u4f46\u662f 1000.00MB \u662f\u771f\u7684\u5413\u4eba\uff09\n\nAC Code\uff1a\n\n```\n#include<bits/stdc++.h>\n#define int long long \nusing namespace std;\ndouble a[200005];\ndouble sum[200005];//\u524d\u7f00\u548c\u6570\u7ec4\ninline double maxx(double x,double y)\n{\n  if(x>y)\n    {\n      return x;\n    }\n  return y;\n}\nsigned main()\n{\n  ios::sync_with_stdio(0);\n  cin.tie(0);\n  cout.tie(0);//\u52a0\u901f\n  int n,k;\n  cin>>n>>k;\n  double max=0;\n  for(int i=1;i<=n;i++)\n    {\n      cin>>a[i];\n      a[i]=(a[i]+1)/2;//\u5957\u671f\u671b\u503c\u516c\u5f0f\n      sum[i]=sum[i-1]+a[i];//\u524d\u7f00\u548c\u5b58\u50a8\n    }\n    for(int i=k;i<=n;i++)//\u76f4\u63a5\u4ece\u7b2c k \u4e2a\u5f00\u59cb\n    {\n    \tmax=maxx(max,sum[i]-sum[i-k]);\n\t}\n\tprintf(\"%.12lf\\n\",max);\n  return 0;\n}\n\n```\n\n\u5199\u9898\u89e3\u4e0d\u5bb9\u6613\uff0c\u6240\u4ee5\u70b9\u4e2a\u8d5e\u5427\uff01",
        "postTime": 1638192619,
        "uid": 466525,
        "name": "olkieler",
        "ccfLevel": 0,
        "title": "AT5300 [ABC154D] Dice in Line \u9898\u89e3"
    }
]
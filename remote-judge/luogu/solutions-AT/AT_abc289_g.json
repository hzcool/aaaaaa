[
    {
        "content": "### Part1 \u9898\u610f\u7b80\u8ff0\n\n$n$ \u4e2a\u5ba2\u4eba\uff0c\u6bcf\u4e2a\u4eba\u6709\u671f\u671b\u503c $B_i$\uff0c$m$ \u4ef6\u5546\u54c1\uff0c\u6709\u6743\u503c $C_i$\uff0c\u4f60\u9700\u8981**\u5206\u522b**\u7ed9\u6bcf\u4e00\u4ef6\u5546\u54c1\u5b9a\u4e00\u4e2a\u4ef7\u683c $P_i$\uff0c\u5982\u679c\u5ba2\u4eba $x$ \u6ee1\u8db3 $B_x+C_i\\ge P_i$\uff0c\u4ed6\u5c31\u4f1a\u4e70\u8fd9\u4ef6\u5546\u54c1\uff0c\u6700\u5927\u5316\u6bcf\u4ef6\u5546\u54c1\u7684\u9500\u552e\u989d\uff0c\u5373\u4e70\u7684\u4eba\u6570\u4e0e\u4ef7\u503c\u4e4b\u79ef\uff0c$n,m\\le2\\times10^5$\u3002\n\n### Part2 \u95ee\u9898\u8f6c\u5316\n\n\u5c06\u5ba2\u4eba\u6309 $B_i$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u82e5\u4e00\u4e2a\u5ba2\u4eba\u4f1a\u4e70\uff0c\u90a3\u4e48\u671f\u671b\u503c\u6bd4\u4ed6\u5927\uff08\u6bd4\u4ed6\u9760\u524d\uff09\u7684\u90fd\u4f1a\u8d2d\u4e70\uff0c\u8003\u8651\u4e00\u4ef6\u5546\u54c1 $y$\uff0c\u6070\u597d\u8ba9\u7b2c $x$ \u4f4d\u5ba2\u4eba\u8d2d\u4e70\uff0c\u90a3\u4e48\u9500\u552e\u989d\u5c31\u4e3a\uff08\u4e0d\u8003\u8651 $x$ \u540e\u9762\u4e0e $x$ \u671f\u671b\u503c\u76f8\u7b49\u7684\u4eba\uff0c\u56e0\u4e3a\u4ed6\u4eec\u66f4\u4f18\uff0c\u4f1a\u7b97\u5230\uff09$w(x,y)=x(B_x+C_y)$\u3002\n\n### Part3 \u89e3\u51b3\u95ee\u9898\n\n\u4ee5\u4e0a\u662f\u4e00\u4e2a\u4e00\u6b21\u51fd\u6570\uff0c\u4f60\u5df2\u7ecf\u53ef\u4ee5\u7528 Li-Chao Tree \u89e3\u51b3\u4e86\uff0c\u4e0d\u8fc7\u6211\u89c9\u5f97\u63a8\u51fa\u56db\u8fb9\u5f62\u4e0d\u7b49\u5f0f\u7528\u5206\u6cbb\u66f4\u597d\u5199\u4e00\u4e9b\uff0c\u6240\u4ee5\uff1a\n\n\u5c06\u5546\u54c1\u6309 $C_i$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5bf9\u4e8e\u4efb\u610f\u7684 $a<b,c<d$\uff0c\u90fd\u6709 $w(a,c)+w(b,d)-w(a,d)-w(b,c)$\n\n$=a(B_a+C_c)+b(B_b+C_d)-a(B_a+C_d)-b(B_b+C_c)$\n\n$=(a-b)(C_c-C_d)\\ge 0$\n\n\u5373 $w(a,c)+w(b,d)\\ge w(a,d)+w(b,c)$\uff0c\u76f8\u4ea4\u4f18\u4e8e\u5305\u542b\uff0c\u6ee1\u8db3\u56db\u8fb9\u5f62\u4e0d\u7b49\u5f0f\uff0c\u5177\u6709\u51b3\u7b56\u5355\u8c03\u6027\uff0c\u7136\u540e\u5206\u6cbb\u89e3\u51b3\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O((n+m)\\log(n+m))$\uff0c\u7a7a\u95f4 $O(n+m)$\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1e6+6;\nusing ll=long long;\nint T,n,m,c[N],b[N],p[N];\nll ans[N];\nll W(int l,int r){\n    return ll(b[l]+c[p[r]])*l;\n}\nvoid solve(int l,int r,int L,int R){\n    if(l>r||L>R)return;\n    int md=L+R>>1,i,nl=l;ll mx=W(l,md),nw;\n    for(i=r;i>l;--i)if((nw=W(i,md))>mx)mx=nw,nl=i;\n    ans[p[md]]=mx;\n    if(L<md)solve(l,nl,L,md-1);\n    if(md<R)solve(nl,r,md+1,R);\n}\nint main(){\n    ios::sync_with_stdio(false);\n    int i,x,y,l,r;\n    cin>>m>>n;\n    for(i=1;i<=m;++i)cin>>b[i];\n    for(i=1;i<=n;++i)cin>>c[i],p[i]=i;\n    sort(b+1,b+m+1,greater<int>());\n    sort(p+1,p+n+1,[&](int x,int y){return c[x]<c[y];});\n    solve(1,m,1,n);\n    for(i=1;i<=n;++i)printf(\"%lld%c\",ans[i],\" \\n\"[i==n]);\n    return 0;\n}\n```",
        "postTime": 1676334408,
        "uid": 502410,
        "name": "EnofTaiPeople",
        "ccfLevel": 0,
        "title": "\u5c0f\u6e05\u65b0\u51b3\u7b56\u5355\u8c03\u6027 [ABC289G]"
    },
    {
        "content": "AT \u597d\u4e45\u6ca1\u51fa\u6a21\u677f\u9898\u4e86\uff0c\u52a8\u6001\u5f00\u70b9\u674e\u8d85\u6811\u4e07\u5c81\u3002\n\n## Problem\n\n\u7ed9\u5b9a $B_1\\dots B_n$\uff0c\u6709 $m$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee $C$\uff0c\u8981\u6c42\u56de\u7b54 $\\max (k\\times P)$\uff0c\u5176\u4e2d $P$ \u662f\u81ea\u5df1\u9009\u5b9a\u7684\uff0c$k$ \u662f\u6ee1\u8db3 $B_i+C\\ge P$ \u7684 $i$ \u7684\u4e2a\u6570\u3002\n\n## Solution\n\n\u663e\u7136\uff0c$B_i$ \u8d8a\u5927\uff0c\u8d8a\u5bb9\u6613\u6ee1\u8db3\u3002\n\n\u663e\u7136\uff0c$P$ \u6700\u7ec8\u4e00\u5b9a\u4f1a\u53d6\u67d0\u4e00\u4e2a $B_i+C$\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u628a $B_i$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u3002\n\n\u8fd9\u65f6\uff0c\u5982\u679c\u9009\u62e9\u4e86 $B_k$\uff08\u8fd9\u91cc\u5148\u4e0d\u8003\u8651 $B_i$ \u6709\u76f8\u540c\u7684\u60c5\u51b5\uff0c\u5176\u5b9e\u5982\u679c\u8fd9\u6837\u7684\u8bdd\u4e00\u5b9a\u662f\u9009\u66f4\u9760\u540e\u7684 $B_i$ \u66f4\u4f18\uff09\uff0c\u5c31\u6070\u597d\u5bf9\u5e94 $k\\times (B_k+C)$\uff0c\u5373 $kC+kB_k$\u3002\n\n\u770b\u5230\u4e86\u5417\uff1f\u6bcf\u4e00\u4e2a $B_k$ \u5bf9\u5e94\u4e00\u6761\u76f4\u7ebf $y=kx+kB_k$\uff0c\u67e5\u8be2 $C$ \u5c31\u662f\u6240\u6709\u76f4\u7ebf\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u6700\u5927\u503c\u3002\n\n\u6700\u540e\u5957\u4e00\u4e2a\u52a8\u6001\u5f00\u70b9\u674e\u8d85\u6811\u6a21\u677f\u5c31\u5b8c\u4e8b\u4e86\u3002\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nconst ll inf=0x3f3f3f3f3f3f3f3f;\nconst int N=200005;\nstruct lcs{\n\tint ls,rs;\n\tll k,b;\n\tlcs(){}\n\tlcs(ll K,ll B){ls=rs=0,k=K,b=B;}\n}t[N<<2];\nint tot=1;\nvoid add(int x,ll l,ll r,ll k,ll b)\n{\n\tif(x==0) return;\n\tll tk=t[x].k,tb=t[x].b;\n\tll mid=(l+r)>>1;\n\tif(l*k+b>=l*tk+tb && r*k+b>=r*tk+tb)\n\t{\n\t\tt[x].k=k; t[x].b=b;\n\t\treturn;\n\t}\n\telse if(l*k+b<l*tk+tb && r*k+b<r*tk+tb) return;\n\telse\n\t{\n\t\tif(!t[x].ls) t[x].ls=++tot,t[tot]=lcs(tk,tb);\n\t\telse add(t[x].ls,l,mid,tk,tb);\n\t\tif(!t[x].rs) t[x].rs=++tot,t[tot]=lcs(tk,tb);\n\t\telse add(t[x].rs,mid+1,r,tk,tb);\n\t\tt[x].k=k,t[x].b=b;\n\t} \n}\nll query(int x,ll l,ll r,ll g)\n{\n\tif(x==0) return -inf;\n\tll mid=(l+r)>>1;\n\tll ret=g*t[x].k+t[x].b;\n\tif(g<=mid) ret=max(ret,query(t[x].ls,l,mid,g));\n\telse ret=max(ret,query(t[x].rs,mid+1,r,g));\n\treturn ret;\n}\nint n,m;\nll b[N],c[N];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++) scanf(\"%lld\",&b[i]);\n\tsort(b+1,b+n+1,greater<ll>());\n\tfor(int i=1;i<=n;i++) add(1,-1,1e9,1ll*i,1ll*i*b[i]);\n\tfor(int i=1;i<=m;i++) \n\t{\n\t\tscanf(\"%lld\",&c[i]);\n\t\tprintf(\"%lld \",query(1,-1,1e9,c[i]));\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1676280483,
        "uid": 148507,
        "name": "_Imaginary_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT_abc289G\u3010Shopping in AtCoder store\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a\u4e0d\u7528\u8111\u5b50\u7684\u505a\u6cd5\u3002\n\n\u5c06\u987e\u5ba2\u6309\u7167 $B_i$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u663e\u7136\u4e00\u4e2a\u5546\u54c1 $i$ \u53d6\u7684\u662f\u4e00\u4e2a\u524d\u7f00\u987e\u5ba2\u3002\n\n\u7565\u52a0\u8f6c\u6362\uff0c\u5bf9\u6bcf\u4e2a\u5546\u54c1 $j$\uff0c\u8003\u8651\u679a\u4e3e\u4e70\u5b83\u7684\u987e\u5ba2\u4eba\u6570\uff0c\u663e\u7136\u6709 $h_j=\\max\\{i(B_i+C_j)\\}$\u3002\n\n\u90a3\u4e48 $h_j=iC_j+iB_i$\uff0c\u662f $y=kx+b$ \u7684\u5f62\u5f0f\u3002\n\n\u674e\u8d85\u6811\u7ef4\u62a4\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nnamespace vbzIO {\n\tchar ibuf[(1 << 20) + 1], *iS, *iT;\n\t#if ONLINE_JUDGE\n\t#define gh() (iS == iT ? iT = (iS = ibuf) + fread(ibuf, 1, (1 << 20) + 1, stdin), (iS == iT ? EOF : *iS++) : *iS++)\n\t#else\n\t#define gh() getchar()\n\t#endif\n\t#define pc putchar\n\t#define ps puts\n\t#define pi pair<int, int>\n\t#define tu3 tuple<int, int, int>\n\t#define tu4 tuple<int, int, int, int>\n\t#define mp make_pair\n\t#define mt make_tuple\n\t#define fi first\n\t#define se second\n\t#define pb push_back\n\t#define ins insert\n\t#define era erase\n\tinline int read () {\n\t\tchar ch = gh();\n\t\tint x = 0;\n\t\tbool t = 0;\n\t\twhile (ch < '0' || ch > '9') t |= ch == '-', ch = gh();\n\t\twhile (ch >= '0' && ch <= '9') x = (x << 1) + (x << 3) + (ch ^ 48), ch = gh();\n\t\treturn t ? ~(x - 1) : x;\n\t}\n\tinline void write(int x) {\n\t\tif (x < 0) {\n\t\t\tx = ~(x - 1);\n\t\t\tputchar('-');\n\t\t}\n\t\tif (x > 9)\n\t\t\twrite(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n}\nusing vbzIO::read;\nusing vbzIO::write;\n\nconst int maxn = 2e5 + 200;\nconst int w = 1e9;\nstruct lct { int lc, rc, id; } tr[maxn << 2];\nint n, m, rt, tot, a[maxn], b[maxn];\npi p[maxn];\n\n#define ls tr[x].lc\n#define rs tr[x].rc\n#define mid ((l + r) >> 1)\nint cmp(int x, int y) { return x == y ? 0 : (x > y ? 1 : -1); }\nint gety(int id, int x) { return p[id].fi * x + p[id].se; }\nvoid push(int l, int r, int s, int &x) {\n    if (!x) x = ++tot;\n    int &t = tr[x].id;\n    if (cmp(gety(s, mid), gety(t, mid)) == 1) swap(s, t);\n    int fl = cmp(gety(s, l), gety(t, l)), fr = cmp(gety(s, r), gety(t, r));\n    if (fl == 1 || (!fl && s < t)) push(l, mid, s, ls);\n    if (fr == 1 || (!fr && s < t)) push(mid + 1, r, s, rs);\n}\n\nint qry(int l, int r, int p, int x) {\n    if (!x) return 0;\n    if (l == r) return gety(tr[x].id, p);\n    int res = gety(tr[x].id, p);\n    if (p <= mid) return max(res, qry(l, mid, p, ls));\n    else return max(res, qry(mid + 1, r, p, rs));\n}\n\nsigned main() {\n\tn = read(), m = read(), p[0] = mp(0, -w * w);\n    for (int i = 1; i <= n; i++) a[i] = read();\n    sort(a + 1, a + n + 1, greater<int> ());\n    for (int i = 1; i <= m; i++) b[i] = read();\n    for (int i = 1; i <= n; i++) {\n        p[i] = mp(i, i * a[i]);\n        push(0, w, i, rt);\n    }\n    for (int i = 1; i <= m; i++) \n        write(qry(0, w, b[i], rt)), pc(' ');\n\treturn 0;\n}\n```",
        "postTime": 1676606839,
        "uid": 306573,
        "name": "Ender32k",
        "ccfLevel": 0,
        "title": "ABC289G Shopping in AtCoder store"
    },
    {
        "content": "~~VP \u4e0a\u5927\u5206\uff0c\u4f46\u6211\u6ca1\u6253\uff0c\u54ed~~\n\n- \u9898\u610f\n\n\u6709 $n$ \u4e2a\u987e\u5ba2\uff0c$m$ \u4e2a\u7269\u54c1\uff0c\u6bcf\u4e2a\u987e\u5ba2\u6709\u4e00\u4e2a\u503e\u5411\u6027 $B$\uff0c\u6bcf\u4e2a\u7269\u54c1\u6709\u4e00\u4e2a\u4ef7\u503c $C$\u3002\u7b2c $i$ \u4e2a\u987e\u5ba2\u4f1a\u4e70\u7b2c $j$ \u4e2a\u7269\u54c1\u5f53\u4e14\u4ec5\u5f53 $P_j\\le B_i+C_j$\uff0c$P$ \u4e3a\u552e\u4ef7\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u7269\u54c1\u6c42\u5927\u5316 $P_j\\sum [P_j\\le B_i+C_j]$\u3002\n\n- \u5206\u6790\n\n\u8003\u8651\u5c06\u987e\u5ba2\u6309\u503e\u5411\u6027\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u90a3\u4e48\u4f1a\u4e70\u4e00\u4e2a\u7269\u54c1\u7684\u987e\u5ba2\u663e\u7136\u662f\u4e00\u4e2a\u524d\u7f00\uff0c\u82e5\u8981\u5b81\u987e\u5ba2 $i$ \u4e70\u7269\u54c1 $j$\uff0c\u5219\u6700\u5927\u6536\u76ca\u4e3a $i(B_i+C_j)$\uff0c\u95ee\u9898\u8f6c\u5316\u6210\u5bf9\u4e8e\u6bcf\u4e2a $j$\uff0c\u6c42\uff1a\n$$\\max\\limits_{i=1}^n\\{i(B_i+C_j)\\}$$\n\u4e5f\u5c31\u662f\uff1a\n$$\\max\\limits_{i=1}^n\\{iB_i-i(-C_j))\\}$$\n\u770b\u5230\u8fd9\u4e00\u6b65\u505a\u6cd5\u5c31\u5df2\u7ecf\u547c\u4e4b\u6b32\u51fa\u4e86\uff0c\u8fd9\u663e\u793a\u4e00\u4e2a\u659c\u7387\u4f18\u5316\u7684\u5f62\u5f0f\uff0c\u8bbe $y_i=iB_i,x_i=i,k_j=-C_j$\uff0c\u90a3\u663e\u7136\u53ef\u4ee5\u6784\u9020\u51fa\u6765\u4e00\u4e2a\u659c\u7387\u5355\u8c03\u9012\u51cf\u7684\u51f8\u5305\uff0c\u6c42\u5176\u5207\u7ebf\u7684\u622a\u8ddd\uff0c\u518d\u5c06 $C$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n\\log n)$\uff0c\u74f6\u9888\u5728\u6392\u5e8f\u3002\n\n- code\n\n```cpp\n#include <bits/stdc++.h>\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,avx2\")\n#define int long long\nusing namespace std;\n\nnamespace IO {\n    char ibuf[(1 << 20) + 1], *iS, *iT;\n#if ONLINE_JUDGE\n#define gh() (iS == iT ? iT = (iS = ibuf) + fread(ibuf, 1, (1 << 20) + 1, stdin), (iS == iT ? EOF : *iS++) : *iS++)\n#else\n#define gh() getchar()\n#endif\n    inline long long read () {\n        char ch = gh();\n        long long x = 0;\n        bool t = 0;\n        while (ch < '0' || ch > '9') t |= ch == '-', ch = gh();\n        while (ch >= '0' && ch <= '9') x = (x << 1) + (x << 3) + (ch ^ 48), ch = gh();\n        return t ? ~(x - 1) : x;\n    }\n    inline void write(long long x) {\n        if (x < 0) {\n            x = ~(x - 1);\n            putchar('-');\n        }\n        if (x > 9)\n            write(x / 10);\n        putchar(x % 10 + '0');\n    }\n}\n\nusing IO::read;\nusing IO::write;\n\nconst int maxn(2e5 + 7);\nint n, m, b[maxn], c[maxn], stk[maxn], top, ans[maxn];\n\nstruct pNode {\n    int x, y;\n    inline pNode operator - (const pNode &rhs) const {\n        return {x - rhs.x, y - rhs.y};\n    }\n    inline int operator * (const pNode &rhs) const {\n        return x * rhs.y - y * rhs.x;\n    }\n} p[maxn], q[maxn];\n\ninline double slp (int i, int j) {\n    return double(p[i].y - p[j].y) / (p[i].x - p[j].x);\n}\n\nsigned main() {\n    n = read(), m = read();\n    for (int i = 1; i <= n; i++) b[i] = read();\n    sort(b + 1, b + n + 1, [] (const int &x, const int &y) -> bool { return x > y; });\n    for (int i = 1; i <= n; i++) p[i].x = i, p[i].y = b[i] * i;\n    for (int i = 1; i <= m; i++) c[i] = read(), q[i].x = i, q[i].y = -c[i];\n    for (int i = 1; i <= n; i++) {\n        while (top > 1 && (p[stk[top - 1]] - p[stk[top]]) * (p[stk[top]] - p[i]) > 0) --top;\n        stk[++top] = i;\n    }\n    sort(q + 1, q + m + 1, [] (const pNode &u, const pNode &v) -> bool { return u.y > v.y; });\n    for (int i = 1, j = 1; i <= m; i++) {\n        for (; j < top && slp(stk[j], stk[j + 1]) > q[i].y; j++);\n        ans[q[i].x] = p[stk[j]].y - p[stk[j]].x * q[i].y;\n    }\n    for (int i = 1; i <= m; i++) write(ans[i]), putchar(' ');\n}\n// I love WHQ!\n```",
        "postTime": 1676604742,
        "uid": 317495,
        "name": "JWRuixi",
        "ccfLevel": 7,
        "title": "[ABC289G] Shopping in AtCoder store"
    },
    {
        "content": "# [ABC289G] Shopping in AtCoder store\n\n## \u9898\u76ee\u7ffb\u8bd1\n\n\u6709 $n$ \u4e2a\u4eba\u4e70 $m$ \u4ef6\u5546\u54c1\uff0c\u5982\u679c $P_j\\le B_i+C_j$ \u5219\u7b2c $i$ \u4e2a\u4eba\u4f1a\u4e70\u7b2c $j$ \u4ef6\u5546\u54c1\uff0c\u95ee\u6bcf\u4e2a\u5546\u54c1\u7684\u6700\u5927\u603b\u5229\u6da6\u5206\u522b\u662f\u591a\u5c11\u3002\n\n$1\\le n,m\\le2\\times10^5$\n\n## \u505a\u6cd5\n\n\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u5546\u54c1\uff0c\u90a3\u5f88\u7b80\u5355\uff0c\u6309\u7167 $B_i$ \u6392\u5e8f\uff0c\u6bcf\u6b21\u679a\u4e3e\u6709 $k$ \u4e2a\u4eba\u4e70\u7684\u5229\u6da6\u662f\u591a\u5c11\uff0c\u53d6 $n$ \u6b21\u7684\u6700\u5927\u503c\u3002\n\n\u4f46\u662f\u7531\u4e8e\u6709 $m$ \u4e2a\u7269\u54c1\uff0c\u8fd9\u6837\u505a\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(nm)$ \u7684\u3002\n\n\u6211\u4eec\u8003\u8651 \uff1a\n\n$$ans_i=\\max_{j=1}^n f_j+j\\times C_i$$\n\n\u76f8\u5f53\u4e8e\u5bf9\u4e00\u4e2a\u6570\u7ec4\u8fdb\u884c\u5168\u5c40\u52a0\u7b49\u5dee\u6570\u5217\u548c\u6c42\u5168\u5c40\u6700\u5927\u503c\u3002\n\n\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a\u4e0a\u51f8\u5305\uff0c\u4e0e $y=C_i x$ \u76f8\u5207\u7684\u70b9\u5c31\u662f $ans_i$ \u53d6\u5230\u6700\u5927\u503c\u7684\u70b9\u3002\n\n\u53c8\u53d1\u73b0\u968f\u7740 $C_i$ \u589e\u5927\uff0c\u5207\u70b9\u7684\u4f4d\u7f6e\u662f\u5355\u8c03\u53d8\u5316\u7684\uff0c\u7531\u6b64\u53ef\u4ee5 $O(n)$ \u6c42\u89e3\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\uff0c\u74f6\u9888\u5728\u4e8e\u5c06 $B_i$ \u548c $C_i$ \u6392\u5e8f\u3002\n\n## \u4ee3\u7801\n\n```cpp\ninline ll read(){\n\tll x=0,f=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9'){\n\t\tx=x*10+c-48;\n\t\tc=getchar();\n\t}\n\treturn x*f;\n}\nconst ll N=2e5+5;\nll n,m,maxn;\nvector<ll> v;\nvector<pii> g;\nll a[N],b[N],ans[N];\nll f[N],s[N],t;\ninline ll get_val(ll val,ll id){\n//\tcout<<id<<\" \"<<val<<endl;\n\treturn f[n-id+1]+id*val;\n}\ninline void get_ans(){\n\tll cnt=0;\n\tF(i,1,m) g.emplace_back(b[i],i);\n\tsort(g.begin(),g.end());\n\tF(i,0,(ll)v.size()-1){\n\t\twhile(cnt<m&&i!=(ll)v.size()-1&&get_val(g[cnt].fi,v[i])>get_val(g[cnt].fi,v[i+1])){\n\t\t\tans[g[cnt].se]=get_val(g[cnt].fi,v[i]);\n\t\t\tcnt++;\n\t\t}\n\t}\n\twhile(cnt<m){\n\t\tans[g[cnt].se]=get_val(g[cnt].fi,v[(ll)v.size()-1]);\n\t\tcnt++;\n\t}\n}\nint main(){\n\tn=read();m=read();\n\tF(i,1,n) a[i]=read();\n\tF(i,1,m) b[i]=read();\n\tF(i,1,n) v.push_back(a[i]);\n\tsort(v.begin(),v.end());\n\tF(i,0,n-1) f[i+1]=(n-i)*v[i];\n//\tF(i,1,n) cout<<f[i]<<\" \";\n//\tputs(\"\");\n\tv.clear();\n\tF(i,1,n){\n\t\twhile(t>1&&(f[s[t]]-f[s[t-1]])*(i-s[t-1])<(f[i]-f[s[t-1]])*(s[t]-s[t-1])) t--;\n\t\ts[++t]=i;\n\t}\n//\tUF(i,t,1) cout<<n-s[i]+1<<\" \";\n//\tputs(\"\");\n\tUF(i,t,1) v.push_back(n-s[i]+1);\n\tget_ans();\n\tF(i,1,m) printf(\"%lld \",ans[i]);\n\treturn 0;\n}\n```\n",
        "postTime": 1676192699,
        "uid": 406832,
        "name": "Mikefeng",
        "ccfLevel": 7,
        "title": "AT_abc289_g"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](http://cmsblog.top/archives/abc289gshoppinginatcoderstore)\n\n## \u9898\u76ee\u63cf\u8ff0\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/remoteJudgeRedirect/atcoder/abc289_g)\n\n## \u601d\u8def\n\n\u5148\u5c06 $B$ \u548c $C$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\u663e\u7136\u7684\uff0c\u6bcf\u4e00\u4e2a $P_i$ \u90fd\u53ef\u4ee5\u8868\u793a\u4e3a $B_j + C_i$\u3002\u79f0 $B_j$ \u4e3a $C_i$ \u7684\u6700\u4f18\u51b3\u7b56\u3002\n\n\u7136\u540e\u8fd8\u53ef\u4ee5\u53d1\u73b0\u7b54\u6848\u5177\u6709\u5355\u8c03\u6027\uff0c\u5982\u679c $B_j$ \u662f $C_i$ \u7684\u6700\u4f18\u51b3\u7b56\uff0c\u90a3\u4e48 $B_k(B_k < B_j)$ \u4e0d\u53ef\u80fd\u662f $C_{l} < C_i$ \u7684\u6700\u4f18\u51b3\u7b56\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u5206\u6cbb\u3002\n\n\u5177\u4f53\u7684\uff0c\u5c31\u662f\u53ef\u4ee5\u5728\u5206\u6cbb\u7684\u5b50\u4efb\u52a1\u4e2d\u6765\u9009\u62e9\u6700\u6392\u5b8c\u5e8f\u4e2d\u95f4\u7684\u4e00\u4e2a\u5ba2\u4eba\u4f5c\u4e3a\u8d2d\u4e70\u7684\u6700\u540e\u4e00\u4e2a\u4eba\uff0c\u7136\u540e\u679a\u4e3e\u5546\u54c1\u8ba1\u7b97\u8d21\u732e\uff0c\u6700\u540e\u9012\u5f52\u8fdb\u53bb\u5c31\u597d\u4e86\u3002\n\n\u5177\u4f53\u770b\u4ee3\u7801\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int MAXN = 2e5 + 10;\n\nll Ans[MAXN], B[MAXN];\npair<ll, int> C[MAXN];\nint N, M;\n\nvoid solve(int l1, int r1, int l2, int r2) {\n\tif (l1 > r1) return;\n\tint mid = l1 + r1 >> 1;\n\tll ans = 0, pos = 0;\n\tfor (int i = r2; i >= l2; i--) {\n\t\tif ((B[i] + C[mid].first) * (N - i + 1) > ans) {\n\t\t\tans = (B[i] + C[mid].first) * (N - i + 1);\n\t\t\tpos = i;\n\t\t}\n\t}\n\tAns[C[mid].second] = ans;\n\tsolve(l1, mid - 1, pos, r2);\n\tsolve(mid + 1, r1, l2, pos);\n}\n\nint main() {\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\t\n\tcin >> N >> M;\n\tfor (int i = 1; i <= N; i++) cin >> B[i];\n\tfor (int i = 1; i <= M; i++) {\n\t\tcin >> C[i].first;\n\t\tC[i].second = i;\n\t}\n\tsort(B + 1, B + 1 + N);\n\tsort(C + 1, C + 1 + M);\n\tsolve(1, M, 1, N);\n\tfor (int i = 1; i <= M; i++) cout << Ans[i] << \" \";\n\treturn 0;\n} \n```",
        "postTime": 1677323754,
        "uid": 461426,
        "name": "CmsMartin",
        "ccfLevel": 6,
        "title": "[ABC289G] Shopping in AtCoder store"
    },
    {
        "content": "# [ABC289G-Shopping in AtCoder store](https://atcoder.jp/contests/abc289/tasks/abc289_g)\n\n\u9898\u610f\uff1a\u6709 $n$ \u4f4d\u987e\u5ba2\uff0c\u6709 $m$ \u79cd\u5546\u54c1\uff0c\u521d\u59cb\u4ef7\u503c\u4e3a $c_i$\uff0c\u987e\u5ba2 $i$ \u9009\u62e9\u7b2c $j$ \u79cd\u5546\u54c1\u5f53\u4e14\u4ec5\u5f53 $b_i+c_j\\ge p_j$\u3002\u5176\u4e2d $b,c$ \u5df2\u7ed9\u5b9a\uff0c\u6c42\u7ed9\u6bcf\u79cd\u5546\u54c1\u5b9a\u4ef7 $p$ \u4f7f\u5f97\u9500\u552e\u989d\u6700\u5927\u5316\u3002\n\n\u601d\u8def\uff1a\u53ef\u4ee5\u6309\u7167 $b$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5546\u54c1 $i$ \u679a\u4e3e\u8d2d\u4e70\u5b83\u7684\u4eba\u6570 $j$\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f $j(b_j+c_i)$\u3002\n\n\u6bd4\u8d5b\u65f6\u88ab\u5751\u4e86\u4e00\u4f1a\u662f\u56e0\u4e3a\u8fd9\u4e2a\u7b54\u6848\u5e76\u4e0d\u6ee1\u8db3\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u8003\u8651\u53e6\u5916\u7684\u601d\u8def\u3002\n\n\u62c6\u5f00\u8fd9\u4e2a\u4ef7\u503c\uff0c\u539f\u5f0f\u5c31\u662f $j\\cdot c_i+j\\cdot b_j$\uff0c\u8fd9\u4e2a\u65f6\u5019\u5047\u8bbe $j$ \u662f\u53ef\u4ee5\u5df2\u77e5\u7684\u6570\u636e\uff0c\u800c\u628a $c_i$ \u8bbe\u6210 $x$ \u5373\u672a\u77e5\u7684\u6570\u636e\uff0c\u90a3\u4e48\u5f0f\u5b50\u5c31\u8f6c\u5316\u6210\u4e86 $K_jx+B_j$ \u7684\u5f62\u5f0f\uff08\u4ee4 $K_j=j,B_j=j\\cdot b_j$\uff09\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684 $c_i$ \u6211\u4eec\u9700\u8981\u6c42\u5f97\u5bf9\u4e8e\u6240\u6709\u4e00\u6b21\u51fd\u6570\u7684\u6700\u5927\u503c\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u4f7f\u7528\u534a\u5e73\u9762\u4ea4\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u58f3\u3002\n\n\u4e0b\u51f8\u58f3\u7684\u7ef4\u62a4\uff0c\u53ea\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u659c\u7387\u9012\u589e\u7684\u76f4\u7ebf\u96c6\u5408\u5373\u53ef\uff0c\u5bf9\u4e8e\u4e00\u6761\u659c\u7387\u66f4\u5927\u7684\u76f4\u7ebf\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u5355\u8c03\u6027\u5224\u6389\u4ea4\u70b9\u5728\u5176\u53f3\u8fb9\u7684\u6240\u6709\u7ebf\u6bb5\u3002\n\n\u53ef\u4ee5\u53bb\u505a\u8fd9\u4e2a\u9898\u76ee\uff0c[P3194 [HNOI2008]\u6c34\u5e73\u53ef\u89c1\u76f4\u7ebf](https://www.luogu.com.cn/problem/P3194)\u3002\n\n\u5bf9\u4e8e\u672c\u9898\u53ea\u9700\u8981\u5148\u7b97\u51fa\u51f8\u58f3\u4e0a\u76f8\u90bb\u4e24\u6761\u76f4\u7ebf\u7684\u4ea4\u70b9\uff0c\u7136\u540e\u6309\u7167\u4ea4\u70b9\u96c6\u4e8c\u5206\u8fd9\u4e2a $c_i$ \u5bf9\u5e94\u7684\u662f\u7b2c\u51e0\u6761\u7ebf\u6bb5\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n+m\\log n)$\u3002\n\n```cpp\nconst I N=2e5+10;\nI b[N],n,m,q[N],t;\nLL k[N];\ndouble jdx(I i,I j){\n\treturn -1.0*(k[i]-k[j])/(i-j);\n}double lb[N];\nint main(){\n\tin(n,m);\n\tfor(I i=1;i<=n;++i)in(b[i]);\n\tsort(b+1,b+n+1,greater<I>());\n\tfor(I i=1;i<=n;++i){\n\t\tk[i]=1ll*b[i]*i;\n\t\twhile(t>1&&jdx(q[t-1],i)<=jdx(q[t-1],q[t]))--t;\n\t\tq[++t]=i;\n\t}for(I i=2;i<=t;++i){\n\t\tlb[i]=jdx(q[i-1],q[i]);\n\t}lb[t+1]=inf;\n\tfor(I i=1,c,id;i<=m;++i){\n\t\tin(c);\n\t\tid=upper_bound(lb+1,lb+t+2,c)-lb-1;\n\t\tprintf(\"%lld \",1ll*(c+b[q[id]])*q[id]);\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1676289653,
        "uid": 121995,
        "name": "SmallTualatin",
        "ccfLevel": 0,
        "title": "ABC289G \u9898\u89e3"
    }
]
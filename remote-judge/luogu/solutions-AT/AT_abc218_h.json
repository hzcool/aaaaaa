[
    {
        "content": "\u79bb 2023 NOI \u6625\u5b63\u6d4b\u8bd5 \u8fd8\u6709 $4$ \u5929\uff0c\u968f\u673a\u62f7\u6253 ABC \u953b\u70bc\u624b\u611f\u3002\n\n\u611f\u89c9\u4e00\u4e0b $O(nk)$ \u7684 dp\uff0c$f_{0/1,i,j}$ \u8868\u793a\u9009\u6216\u4e0d\u9009\u7b2c $i$ \u4e2a\u706f\uff0c\u524d $i$ \u4e2a\u706f\uff0c\u6709 $j$ \u4e2a\u662f\u7ea2\u8272\u65f6\u7684\u6700\u5927\u4ef7\u503c\u3002\n\n\u5bc4\u4e86\uff0c\u65e0\u6cd5\u4e0a\u6570\u636e\u7ed3\u6784\u4f18\u5316\u8f6c\u79fb\uff0c\u6240\u4ee5\u5b83\u5fc5\u987b\u5e26\u70b9\u6027\u8d28\uff0c\n\n\u6070\u597d\u9009 $R$ \u4e2a\uff0c\u7ed9\u6211\u4e00\u79cd wqs \u4e8c\u5206\u7684\u611f\u89c9\uff0c\u51fd\u6570 $g(x)$ \u8868\u793a\u9009 $x$ \u4e2a\u7ea2\u8272\u70b9\u7684\u6700\u5927\u4ef7\u503c\uff0c$g(x)-g(x-1) \\le g(x+1)-g(x)$\uff0c\u5728 $x \\le \\lfloor \\frac{n}{2} \\rfloor$ \u65f6\u6210\u7acb\uff0c\u5927\u4e8e\u7684\u65f6\u5019\u53cd\u8fc7\u6765\uff0c\u4eba\u8bdd\u8bf4\u5c31\u662f\u8fd9\u4e2a\u51fd\u6570\u662f\u4e0a\u51f8\u7684\u3002\n\n\u5957\u8def\u629b\u5f03\u9009 $R$ \u4e2a\u7684\u9650\u5236\uff0c\u53d8\u6210\u4efb\u610f\u9009\u7684\u65f6\u5019\u6700\u5927\u4ef7\u503c\uff0c\u4e8c\u5206\u659c\u7387\u5207\u8fd9\u4e2a\u51f8\u5305\uff0c\u8f6c\u79fb\u7684\u65f6\u5019\u989d\u5916\u52a0\u4e0a\u6743\u503c\uff0c\u6700\u540e\u51cf\u53bb $R \\times \\text{mid}$\uff0c\u5185\u5c42\u662f\u4e2a\u5f88\u5178\u7684 $O(n)$ dp\uff0c\u505a\u5b8c\u4e86\u3002\n\n\u6211\u770b\u5b98\u65b9\u9898\u89e3\u7ed9\u7684\u662f\u5199\u6210\u533a\u95f4 dp \u7684\u5f62\u5f0f\uff0c\u901a\u8fc7\u51f8\u6027\u505a\u5206\u6cbb\uff0c\u4e5f\u633a\u597d\u7684\u3002\n\n### Code.\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nint read()\n{\n\tint x=0; bool f=0; char ch=getchar();\n\twhile(ch < '0' || ch > '9') f|=(ch == '-'),ch=getchar();\n\twhile(ch >= '0' && ch <= '9') x=x*10+(ch^48),ch=getchar();\n\treturn f ? -x : x;\n}\nusing namespace std;\nconst int N=2e5+10;\nint a[N],n,k,cnt[2][N]; ll f[2][N];\nbool check(ll mid)\n{\n\tf[1][1]=mid; cnt[1][1]=1;\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\t(f[0][i-1] < f[1][i-1] + a[i]) ? (f[0][i]=f[1][i-1]+a[i],cnt[0][i]=cnt[1][i-1]) : (f[0][i]=f[0][i-1],cnt[0][i]=cnt[0][i-1]);\n\t\t(f[0][i-1] + a[i] < f[1][i-1]) ? (f[1][i]=mid+f[1][i-1],cnt[1][i]=cnt[1][i-1]+1) : (f[1][i]=mid+f[0][i-1]+a[i],cnt[1][i]=cnt[0][i-1]+1);\n\t}\n\treturn (f[1][n] > f[0][n]) ? (cnt[1][n] <= k) : (cnt[0][n] <= k);\n}\nint main()\n{\n\tn=read(); k=read(); for(int i=2;i<=n;i++) a[i]=read();\n\tll l=-2e9,r=2e9,res=0;\n\twhile(l <= r)\n\t{\n\t\tll mid = (l + r) >> 1ll;\n\t\tif(check(mid)) l=mid+1,res=max(f[1][n],f[0][n])-k*mid;\n\t\telse r=mid-1;\n\t}\n\tprintf(\"%lld\\n\",res);\n\treturn 0;\n}\n```",
        "postTime": 1677557527,
        "uid": 230865,
        "name": "EastPorridge",
        "ccfLevel": 0,
        "title": "[ABC218H] Red and Blue Lamps \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u6709\u8fd9\u6837\u4e24\u4e2a\u6027\u8d28\uff1a\n\n- \u5047\u8bbe\u521d\u59cb\u706f\u7684\u989c\u8272\u90fd\u76f8\u540c\u548c\u53d8\u8272\u65b9\u6848\u76f8\u540c\uff0c\u5c06 $R$ \u76cf\u84dd\u706f\u53d8\u6210\u7ea2\u8272\u548c\u5c06 $N - R$ \u76cf\u7ea2\u706f\u53d8\u6210\u84dd\u8272\u7684\u7ed3\u679c\u90fd\u662f\u4e00\u6837\u7684\u3002\n\n- \u6700\u4f18\u65b9\u6848\u53d8\u8272\u7684\u706f\u4e00\u5b9a\u662f\u4e0d\u8fde\u7eed\u7684\u3002\n\n\u4e8e\u662f\u539f\u9898\u5c31\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5c06 $R \\left( R \\le \\frac{N}{2} \\right)$ \u76cf\u706f\u53d8\u8272\uff0c\u5c06\u7b2c $i$ \u76cf\u706f\u53d8\u8272\u53ef\u4ee5\u83b7\u5f97 $A_{i - 1} + A_i$ \u7684\u6536\u76ca\uff0c\u5176\u4e2d\u53d8\u8272\u7684\u706f**\u4e0d\u8fde\u7eed**\uff0c\u6c42\u6700\u5927\u6536\u76ca\u3002\n\n\u53ef\u4ee5\u4f7f\u7528\u53cd\u6094\u8d2a\u5fc3\u6216 WQS \u4e8c\u5206\u89e3\u51b3\uff0c\u8fd9\u91cc\u4f7f\u7528\u53cd\u6094\u8d2a\u5fc3\u3002\n\n~~~cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int maxn = 200005;\n\nint n, r;\n\nint a[maxn], pre[maxn], nxt[maxn];\n\nlong long val[maxn], ans;\n\nbool vis[maxn];\n\npriority_queue<pair<long long, int> > hep;\n\nint main()\n{\n    scanf(\"%d%d\", &n, &r);\n    r = min(r, n - r);\n    for (int i = 1; i < n; ++i)\n        scanf(\"%d\", a + i);\n    for (int i = 1; i <= n; ++i)\n    {\n        pre[i] = i - 1, nxt[i] = i + 1;\n        hep.push(make_pair(val[i] = a[i - 1] + a[i], i));\n    }\n    for (int i = 1; i <= r; ++i)\n    {\n        while (vis[hep.top().second])\n            hep.pop();\n        int u = hep.top().second, l = pre[u], r = nxt[u];\n        hep.pop();\n        ans += val[u];\n        vis[l] = vis[r] = true;\n        nxt[pre[u] = pre[l]] = pre[nxt[u] = nxt[r]] = u;\n        val[u] = val[l] + val[r] - val[u];\n        hep.push(make_pair(val[u], u));\n    }\n    printf(\"%lld\\n\", ans);\n    return 0;\n}\n~~~",
        "postTime": 1672621040,
        "uid": 441693,
        "name": "Isuki",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 [ABC218H] Red and Blue Lamps"
    }
]
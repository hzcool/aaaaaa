[
    {
        "content": "# \u9898\u610f\u7b80\u8ff0\n\n\u9ad8\u6865\u541b\u6709 $n$ \u74f6\u7cd6\u6c34\uff0c\u7f16\u53f7\u4e3a $1$ \u5230 $n$\uff0c\u5176\u4e2d\u7b2c $i$ \u74f6\u7cd6\u6c34\u4e2d\u542b\u6709 $a_i$ \u514b\u7cd6\u548c $b_i$ \u514b\u6c34\u3002\u9752\u6728\u541b\u6709 $m$ \u74f6\u7cd6\u6c34\uff0c\u7f16\u53f7\u4e3a $1$ \u5230 $m$\uff0c\u5176\u4e2d\u7b2c $i$ \u74f6\u7cd6\u6c34\u4e2d\u542b\u6709 $c_i$ \u514b\u7cd6\u548c $d_i$ \u514b\u6c34\u3002\n\n\u73b0\u5728\u9ad8\u6865\u541b\u968f\u610f\u9009\u51fa\u4e00\u74f6\u6c34\uff0c\u9752\u6728\u541b\u4e5f\u968f\u610f\u9009\u51fa\u4e00\u74f6\u6c34\uff0c\u6df7\u5408\u5728\u4e00\u8d77\uff0c\u8fd9\u6837\u603b\u5171\u6709 $n \\times m$ \u79cd\u4e0d\u540c\u7684\u6df7\u5408\u65b9\u5f0f\u3002\u6240\u6709\u6df7\u5408\u65b9\u5f0f\u4e2d\uff0c\u6309\u7167\u6d53\u5ea6\u4ece\u9ad8\u5230\u4f4e\u6392\u5e8f\uff0c\u95ee\u6392\u7b2c $k$ \u7684\u6df7\u5408\u65b9\u5f0f\u7684\u6d53\u5ea6\u662f\u591a\u5c11\u3002\u6d53\u5ea6\u8ba1\u7b97\u65b9\u5f0f\u4e3a\uff0c\u5982\u679c\u4e00\u74f6\u6c34\u4e2d\u6709 $x$ \u514b\u7cd6\uff0c\u6709 $y$ \u514b\u6c34\uff0c\u6d53\u5ea6\u4e3a $\\frac{100 \\times x}{x+y}$\u3002\n\n# \u89e3\u9898\u601d\u8def\n\n\u672c\u9898\u6570\u636e\u8303\u56f4 $n,m \\le 5 \\times 10^4$\uff0c\u603b\u7684\u65b9\u6848\u592a\u591a\u4e86\uff0c\u5982\u679c\u5168\u679a\u4e3e\u51fa\u6765\uff0c\u518d\u6392\u5e8f\u4e00\u904d\uff0c\u590d\u6742\u5ea6\u662f $n \\times m \\log(n \\times m) $\uff0c\u8fd9\u6837\u80af\u5b9a\u8981\u8d85\u65f6\u3002\n\n\u9898\u76ee\u4e2d\u95ee\u6211\u4eec\u6d53\u5ea6\u7b2c $k$ \u5927\u7684\u65b9\u6848\u7684\u6d53\u5ea6\uff0c\u4e0d\u59a8\u8bbe\u4e3a $cc$\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\u8fd9\u4e2a\u6d53\u5ea6 $cc$\uff0c\u7136\u540e\u8ba1\u7b97\u6240\u6709\u6df7\u5408\u6db2\u5f53\u4e2d\uff0c\u6d53\u5ea6\u6bd4 $cc$ \u5927\u7684\u65b9\u6848\u6570 $cnt$\u3002\u5982\u679c\u53d1\u73b0 $cnt \\lt k$\uff0c\u8bf4\u660e\u6211\u4eec\u9009\u62e9\u7684 $cc$ \u662f\u53ef\u884c\u7684\uff0c\u7ee7\u7eed\u53bb\u5c0f\u7684\u90a3\u8fb9\u4e8c\u5206\u3002\u5426\u5219\u8bf4\u660e\u6211\u4eec\u9009\u62e9\u7684 $cc$ \u592a\u5c0f\u4e86\uff0c\u5b83\u80af\u5b9a\u4e0d\u662f\u76ee\u6807\u6d53\u5ea6\uff0c\u5c31\u53bb\u5927\u7684\u90a3\u8fb9\u4e8c\u5206\u3002\n\n\u4e0b\u9762\u95ee\u9898\u5c31\u662f\uff0c\u5f53\u7ed9\u5b9a\u6d53\u5ea6\u7684\u65f6\u5019\uff0c\u5982\u679c\u6c42\u51fa\u6d53\u5ea6\u6bd4\u5b83\u5927\u7684\u65b9\u6848\u6570\u5462\uff1f\n\n\u9996\u5148\u5bf9\u4e8e\u9752\u6728\u541b\u7684 $m$ \u74f6\u7cd6\u6c34\uff0c\u5047\u8bbe\u6bcf\u74f6\u6c34\u4e2d\u7cd6\u6709 $x$ \u514b\uff0c\u6c34\u6709 $y$ \u514b\u3002\u6211\u4eec\u5047\u8bbe\u8981\u628a\u5b83\u8c03\u6574\u4e3a\u6d53\u5ea6\u4e3a $cc$ \u7684\uff0c\u5219\u5728\u6c34\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u7cd6\u9700\u8981 $cc \\times y / (1 - cc)$ \u514b\uff0c\u800c\u73b0\u6709\u7684\u7cd6\u4e3a $x$ \u514b\uff0c\u90a3\u4e48\u8fd9\u74f6\u6c34\u5f53\u4e2d\u591a\u4f59\u7684\u7cd6\u4e3a $x - cc \\times y / (1 - cc)$ \u514b\u3002\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa\u6bcf\u4e00\u74f6\u91cc\u9762\u591a\u4f59\u7684\u7cd6\uff0c\u7136\u540e\u6309\u7167\u8fd9\u4e2a\u6570\u5b57\u5bf9\u9752\u6728\u541b\u7684 $m$ \u74f6\u7cd6\u6c34\u6392\u5e8f\u3002\u8bf7\u6ce8\u610f\uff0c\u8fd9\u91cc\u591a\u4f59\u7684\u7cd6\u53ef\u80fd\u4e3a\u8d1f\u6570\uff0c\u8868\u793a\u7684\u662f\u7f3a\u5c11\u591a\u5c11\u7cd6\u3002\u8d1f\u6570\u4e5f\u6ca1\u5173\u7cfb\u7684\uff0c\u6b63\u5e38\u653e\u5230\u6570\u7ec4\u91cc\u6392\u5e8f\u3002\n\n\u63a5\u4e0b\u6765\u679a\u4e3e\u9ad8\u6865\u541b\u7684 $n$ \u74f6\u7cd6\u6c34\uff0c\u5bf9\u4e8e\u5f53\u524d\u8fd9\u4e00\u74f6\uff0c\u8fd8\u662f\u7528\u4e00\u6837\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa\u8fd9\u4e00\u74f6\u7cd6\u6c34\u4e2d\uff0c\u591a\u4f59\u7684\u7cd6\u662f\u591a\u5c11\uff0c\u7136\u540e\u53d6\u4e2a\u8d1f\uff0c\u53d8\u6210\u7f3a\u591a\u5c11\u7cd6\uff0c\u8bb0\u4e3a $less$\u3002\u5219\u6211\u4eec\u53ef\u4ee5\u5230\u521a\u624d\u6392\u597d\u5e8f\u7684\u6570\u7ec4\u91cc\u9762\u4e8c\u5206\u67e5\u627e\uff0c\u627e\u5230\u6709\u591a\u5c11\u4e2a\u6570\u5b57\u662f\u5927\u4e8e $less$ \u7684\uff0c\u90a3\u4e48\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u548c\u5f53\u524d\u8fd9\u74f6\u7ec4\u5408\u51fa\u6d53\u5ea6\u8d85\u8fc7 $cc$ \u7684\u6df7\u5408\u6db2\u3002\n\n\u8fd9\u6837\u6392\u5e8f\u590d\u6742\u5ea6 $O(m\\log(m))$\uff0c\u679a\u4e3e\u548c\u4e8c\u5206\u67e5\u627e\u7684\u590d\u6742\u5ea6 $O(n\\log(m))$\uff0c\u5916\u9762\u518d\u5957 $100$ \u5c42\u4e8c\u5206\u6d53\u5ea6 $cc$ \u5c31\u884c\u4e86\u3002\u9898\u76ee\u4e2d\u8981\u6c42\u7cbe\u5ea6\u662f $10^{-9}$\uff0c\u6211\u4eec\u4e8c\u5206 $100$ \u6b21\uff0c\u7cbe\u5ea6\u662f $2^{-100}$\uff0c\u80af\u5b9a\u591f\u4e86\u3002\u8fd9\u6837\u603b\u7684\u590d\u6742\u5ea6\u662f $O(100 \\times ((m+n)\\log(m)))$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n# \u4ee3\u7801\u793a\u4f8b\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\ntypedef long long ll;\nconst ll MAXN = 1e5 + 5;\nconst ll MOD = 1e9 + 7;\n\nll n, m, k;\ndouble a[MAXN], b[MAXN], c[MAXN], d[MAXN], more[MAXN];\n\n//\u8ba1\u7b97\u6d53\u5ea6\u5927\u4e8emid\u7684\u65b9\u6848\u6570\nll check(double cc) {\n    //\u6d53\u5ea6\u662fcc,\u5bf9\u4e8em\u4e2a\u74f6\u5b50\uff0c\u6c34\u662fy\uff0c\u5219\u7cd6\u9700\u8981cc * y / (1 - cc)\n    //\u591a\u4f59\u7684\u7cd6\u662fx - cc * y / (1 - cc)\uff0c\u628a\u6bcf\u4e2a\u74f6\u5b50\u4e2d\u591a\u4f59\u7684\u7cd6\u653e\u5230more\u6570\u7ec4\u91cc\n    for (int i = 0; i < m; ++i) {\n        more[i] = c[i] - cc * d[i] / (1 - cc);\n    }\n    //\u6309\u7167\u591a\u4f59\u7684\u7cd6\u6392\u5e8f\n    sort(more, more + m);\n    ll cnt = 0;\n    //\u904d\u5386n\u4e2a\u74f6\u5b50\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u74f6\u5b50\uff0c\u8ba1\u7b97\u5b83\u7f3a\u5c11\u7684\u7cd6\n    for (int i = 0; i < n; ++i) {\n        double less = -(a[i] - cc * b[i] / (1 - cc));\n        //\u4e8c\u5206\u67e5\u627e\uff0c\u627e\u5230\u6240\u6709\u591a\u4f59\u7684\u7cd6\u6bd4less\u591a\u7684\u4e2a\u6570\n        ll t = more + m - upper_bound(more, more + m, less);\n        cnt += t;\n    }\n    return cnt;\n}\n\nint main() {\n    cin >> n >> m >> k;\n    for (int i = 0; i < n; ++i) {\n        cin >> a[i] >> b[i];\n    }\n    for (int i = 0; i < m; ++i) {\n        cin >> c[i] >> d[i];\n    }\n    //\u4e8c\u5206\u6392\u540d\u7b2ck\u7684\u6d53\u5ea6\n    double low = 0, high = 1, mid;\n    for (int i = 0; i < 100; ++i) {\n        mid = (low + high) / 2;\n        if (check(mid) < k) {\n            high = mid;\n        } else {\n            low = mid;\n        }\n    }\n    printf(\"%.15lf\\n\", high*100);\n    return 0;\n}\n```\n",
        "postTime": 1679294708,
        "uid": 43206,
        "name": "\u6ce5\u571f\u7b28\u7b28",
        "ccfLevel": 0,
        "title": "[ABC294F] Sugar Water 2\u9898\u89e3"
    },
    {
        "content": "[\u4e0d\u4e00\u5b9a\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://rainlycoris.github.io/#/post/18)\n\n## \u9898\u610f\n\n\u9ad8\u6a4b\u541b\u6709 $N$ \u74f6\u7cd6\u6c34\uff0c\u9752\u6728\u541b\u6709 $M$ \u74f6\u7cd6\u6c34\u3002\n\n\u9ad8\u6a4b\u541b\u7684\u7b2c $i$ \u74f6\u7cd6\u6c34\u6709 $A_i$ \u4efd\u7cd6 $B_i$ \u4efd\u6c34\u3002\n\n\u9752\u6728\u541b\u7684\u7b2c $i$ \u74f6\u7cd6\u6c34\u6709 $C_i$ \u4efd\u7cd6 $D_i$ \u4efd\u6c34\u3002\n\n\u5c06\u4e24\u4eba\u7684\u7cd6\u6c34\u5404\u9009\u4e00\u74f6\u6df7\u5408\u6709 $NM$ \u79cd\u53ef\u80fd\uff0c\u6c42\u5176\u4e2d\u6d53\u5ea6\u7b2c $k$ \u5927\u7684\u7cd6\u6c34\u6d53\u5ea6\u662f\u591a\u5c11\u3002\n\n\u6709 $x$ \u4efd\u7cd6\u548c $y$ \u4efd\u6c34\u7684\u7cd6\u6c34\u6d53\u5ea6\u662f $\\dfrac{100x}{x+y}\\%$\u3002\n\n## \u5206\u6790\n\n\u4e8c\u5206\u6d53\u5ea6 $c$ \u540e\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5f97\u5230\u6df7\u5408\u540e\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e $c$ \u7684\u4e2a\u6570\u3002\n\n\u6709 $a$ \u4efd\u7cd6 $b$ \u4efd\u6c34\u7684\u7cd6\u6c34\uff0c\u518d\u52a0 $(a+b)c-a$ \u4efd\u7cd6\u5c31\u80fd\u53d8\u6210\u6d53\u5ea6 $c$\uff0c\u4e5f\u53ef\u80fd\u662f\u51cf\u6389\u7cd6\u3002\n\n\u4ee4 $(a+b)c-a$ \u4e3a $s$\uff0c$s$ \u7684\u6b63\u8d1f\u53ef\u4ee5\u5224\u65ad\u6d53\u5ea6\u548c $c$ \u7684\u5173\u7cfb\u3002\n\n\u90a3\u4e48\u4e24\u74f6\u7cd6\u6c34 $x,y$ \u6df7\u5408\u540e\uff0c\u5224\u65ad $s_x+s_y$ \u7684\u6b63\u8d1f\u5373\u53ef\u3002\n\n\u56e0\u4e3a $(A_x+B_x+C_y+D_y)c-A_x-C_y=(A_x+B_x)c-A_x+(C_y+D_y)c-C_y=s_x+s_y$\uff0c\u6240\u4ee5 $s$ \u662f\u53ef\u52a0\u7684\u3002\n\n\u4e8c\u5206\u6d53\u5ea6\uff0c\u5c06\u9752\u6728\u541b\u7cd6\u6c34\u7684 $s$ \u6392\u5e8f\uff0c\u679a\u4e3e\u9ad8\u6a4b\u541b\u7684\u7cd6\u6c34\uff0c\u4e8c\u5206\u8ba1\u7b97\u6df7\u5408\u540e\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e $c$ \u7684\u4e2a\u6570\u3002\n\n\u590d\u6742\u5ea6 $O(n \\log n \\log v)$\u3002\n\n## \u4ee3\u7801\n```cpp\nconst int N = 50005;\nconst double eps = 1e-12;\nvector<pair<int,int>> a,b;\nint n,m,K;\n\ninline int check(double c){\n    vector<double> w1,w2;\n    for(auto [x,y]:a)\n        w1.push_back(x-(x+y)*c);\n    for(auto [x,y]:b)\n        w2.push_back(x-(x+y)*c);\n    sort(w2.begin(),w2.end());\n    int ans = 0;\n    for(auto c:w1)\n        ans += lower_bound(w2.begin(),w2.end(),-c+eps)-w2.begin();\n    return ans;\n}\n\nsigned main(){\n    cin >> n >> m >> K;\n    a.resize(n);\n    b.resize(m);\n    for(auto &[x,y]:a)\n        cin >> x >> y;\n    for(auto &[x,y]:b)\n        cin >> x >> y;\n    double l = 0,r = 1;\n    K = n*m-K+1;\n    while(abs(r-l)>eps){\n        double mid = (l+r)/2;\n        if(check(mid)>=K)\n            r = mid;\n        else\n            l = mid;\n    }\n    printf(\"%.10lf\",r*100);\n    return 0;\n}\n```",
        "postTime": 1679305035,
        "uid": 407214,
        "name": "liudonglin",
        "ccfLevel": 7,
        "title": "AT_abc294_f \u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n\n\u6709 $2$ \u6392\u7cd6\u548c\u6c34\u3002\n\n\u7b2c $1$ \u6392\u6709 $N$ \u74f6\u7cd6\u548c $N$ \u74f6\u6c34\u3002\u7cd6\u5206\u522b\u6709 $A_i$ \u514b\uff0c\u6c34\u5206\u522b\u6709 $B_i$ \u514b\u3002\n\n\u7b2c $2$ \u6392\u6709 $M$ \u74f6\u7cd6\u548c $M$ \u74f6\u6c34\uff0c\u7cd6\u5206\u522b\u6709 $C_i$ \u514b\uff0c\u6c34\u5206\u522b\u6709 $D_i$ \u514b\u3002\n\n\u82e5\u8981\u4ece\u7b2c $1$ \u6392\u7cd6\u6c34\u4e2d\u627e\u5230 $A_i$ \u514b\u7cd6\u548c $B_i$ \u514b\u6c34\uff0c\u7b2c $2$ \u6392\u4e2d\u627e\u5230 $C_i$ \u514b\u7cd6\u548c $D_i$ \u514b\u6c34\u8fdb\u884c\u6df7\u5408\uff0c\u95ee\u6392\u540d\u7b2c $K$ \u751c\u7684\u7cd6\u6c34\u7684\u542b\u7cd6\u91cf\u662f\u591a\u5c11\u3002\n\n## \u7b97\u6cd5\n\n\u4e8c\u5206\u67e5\u627e + \u4e8c\u5206\u7b54\u6848\n\n## \u5b9e\u73b0\n\n### \u4e3b\u51fd\u6570\n\n\u4ee4 $x$ \u4e3a\u7cd6\u7684\u8d28\u91cf\uff0c$y$ \u4e3a\u6c34\u7684\u8d28\u91cf\uff0c$t$ \u4e3a\u542b\u7cd6\u91cf\u3002\n\n\u9996\u5148\u4e8c\u5206\u7b54\u6848 $t$\u3002\n\n\u5982\u679c\u77e5\u9053\u6bd4 \u5927\u4e8e $t$ \u7684 \u548c \u5c0f\u4e8e $t$ \u7684 \u548c \u7b49\u4e8e $t$ \u7684 \u5404\u6709\u591a\u5c11\u79cd\u65b9\u6848\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u77e5\u9053 $t$ \u7684\u6392\u540d\uff0c\u7136\u540e\u6839\u636e $t$ \u7684\u6392\u540d\u8c03\u6574 $l$ \u548c $r$ \u7684\u8303\u56f4\u3002\n\n```cpp\ndouble l = 0, r = 1;\n\nwhile(r - l > 1e-14){\n\tdouble mid = (l + r) / 2;\n\tint x = check(mid);\t// \u5982\u679c\u4ee5\u6d53\u5ea6 mid \u4e3a\u6807\u51c6\uff0c\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e mid \u7684\u6709\u591a\u5c11\u79cd\u3002 \n\tif(x >= k){\n\t\tans = mid;\n\t\tl = mid;\t// \u8bd5\u7740\u5bfb\u627e\u66f4\u5927\u503c \n\t}\n\telse{\n\t\tr = mid;\t// \u5bfb\u627e\u66f4\u5c0f\u503c \n\t}\n}\n```\n\n### check(t) \u51fd\u6570\n\n`check(t)` \u51fd\u6570\u8981\u6c42\u7684\u662f\u5982\u679c\u4ee5\u6d53\u5ea6 $t$ \u4e3a\u6807\u51c6\uff0c\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e $t$ \u7684\u6709\u591a\u5c11\u79cd\u3002\n\n\u56e0\u4e3a $t = \\dfrac{x}{x+y}$\uff0c\u6240\u4ee5\u5982\u679c\u77e5\u9053 $t$ \u548c $y$\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053 $x = \\dfrac{t}{1-t} \\times y$\u3002\n\n```cpp\nint check(double t){\t// \u5982\u679c\u4ee5\u6d53\u5ea6 t \u4e3a\u6807\u51c6\uff0c\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e t \u7684\u6709\u591a\u5c11\u79cd\u3002\n\tint res = 0;\n\tdouble r = t / (1 - t);\n\t\n\tfor(int i=1; i<=m; i++){\n\t\t// v[i] \u5b58\u50a8\u7684\u662f\u7b2c 2 \u6392\u8fd8\u9700\u8981\u591a\u5c11\u7cd6\u624d\u80fd\u8fbe\u5230 t \u6d53\u5ea6 \n\t\tv[i] = c[i] - d[i] * r;\n//\u76f8\u5f53\u4e8ev[i] = c[i] - t / (1 - t) * d[i]; \n\t}\n\t\n\tsort(v+1, v+m+1);\n\t\n\tfor(int i=1; i<=n; i++){\n\t\tdouble w = a[i] - b[i] * r;\n//\t\t\u76f8\u5f53\u4e8e w = a[i] - t / (1 - t) * b[i]; \n\t\tres += find(-w);\t\t// \u4e8c\u5206\u627e v \u6570\u7ec4\u79cd\u5927\u4e8e\u7b49\u4e8e -w \u7684\u6709\u591a\u5c11\u9879 \n\t}\n\t\n\treturn res;\n}\n```\n\n### find(x) \u51fd\u6570\n\n`find(x)` \u51fd\u6570\u662f\u5bfb\u627e $v$ \u6570\u7ec4\u4e2d\u5927\u4e8e\u7b49\u4e8e $x$ \u7684\u6709\u591a\u5c11\u9879\u3002\n\n\u9996\u5148\u4e8c\u5206\u67e5\u627e\u7b2c $1$ \u4e2a\u5927\u4e8e\u7b49\u4e8e $x$ \u7684\u503c\u5728\u7b2c\u51e0\u4e2a\u4f4d\u7f6e\uff0c\u8bbe\u4e3a $res$ \u3002\n\n\u6709\u4e86 $res$ \u540e\uff0c\u4e0d\u96be\u53d1\u73b0\u5c0f\u4e8e $x$ \u7684\u6709 $x-1$ \u9879\uff0c\u90a3\u4e48\u5927\u4e8e\u7b49\u4e8e $x$ \u7684\u5c31\u6709 $m - (res - 1)$ \u9879\u3002\n\n```cpp\nint find(double x){\t\t// \u5bfb\u627e v \u6570\u7ec4\u4e2d\u5927\u4e8e\u7b49\u4e8e x \u7684\u6709\u591a\u5c11\u9879 \n\tint l = 1, r = m;\n/*\n\t\u5982\u679c\u6700\u7ec8\u53d1\u73b0\u6ca1\u6709\u5927\u4e8e\u7b49\u4e8e x \u7684\u503c\uff0c\u90a3\u4e48 res \u5982\u679c\u4e00\u5f00\u59cb\u8bbe\u4e3a 0 \u5c31\u4f1a\u5f97\u5230\n\t\u8fd4\u56de\u503c\u4e3a m - 0 + 1\u7684\u60c5\u51b5\u3002\u56e0\u6b64\u5c06 res \u7684\u521d\u59cb\u503c\u8bbe\u4e3a m + 1\uff0c\u90a3\u4e48\u6700\u7ec8\u5982\n\t\u679c\u6ca1\u6709\u5bfb\u627e\u5230\u5c06\u4f1a\u8fd4\u56de m - (m + 1) + 1\uff0c\u4e5f\u5c31\u662f 0\uff0c\u8fd9\u6837\u624d\u6b63\u786e\u3002 \n*/ \n\tint res = m + 1;\n\twhile(l <= r){\n\t\tint mid = (l + r) / 2;\n\t\tdouble pivot = v[mid];\n\t\tif(pivot >= x){\n\t\t\tres = mid;\n\t\t\tr = mid - 1;\n\t\t}\n\t\telse{\n\t\t\tl = mid + 1;\n\t\t}\n\t}\n\treturn m - res + 1;\n//\treturn m -(res - 1);\n}\n```\n\n## \u5b8c\u6574\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define int long long\n\nconst int N = 5e4 + 10;\n\nint n, m, k, a[N], b[N], c[N], d[N]; \n\ndouble ans, l = 0, r = 1, v[N];\n\nint find(double x){\t\t// \u5bfb\u627e v \u6570\u7ec4\u4e2d\u5927\u4e8e\u7b49\u4e8e x \u7684\u6709\u591a\u5c11\u9879 \n\tint l = 1, r = m;\n/*\n\t\u5982\u679c\u6700\u7ec8\u53d1\u73b0\u6ca1\u6709\u5927\u4e8e\u7b49\u4e8e x \u7684\u503c\uff0c\u90a3\u4e48 res \u5982\u679c\u4e00\u5f00\u59cb\u8bbe\u4e3a 0 \u5c31\u4f1a\u5f97\u5230\n\t\u8fd4\u56de\u503c\u4e3a m - 0 + 1\u7684\u60c5\u51b5\u3002\u56e0\u6b64\u5c06 res \u7684\u521d\u59cb\u503c\u8bbe\u4e3a m + 1\uff0c\u90a3\u4e48\u6700\u7ec8\u5982\n\t\u679c\u6ca1\u6709\u5bfb\u627e\u5230\u5c06\u4f1a\u8fd4\u56de m - (m + 1) + 1\uff0c\u4e5f\u5c31\u662f 0\uff0c\u8fd9\u6837\u624d\u6b63\u786e\u3002 \n*/ \n\tint res = m + 1;\n\twhile(l <= r){\n\t\tint mid = (l + r) / 2;\n\t\tdouble pivot = v[mid];\n\t\tif(pivot >= x){\n\t\t\tres = mid;\n\t\t\tr = mid - 1;\n\t\t}\n\t\telse{\n\t\t\tl = mid + 1;\n\t\t}\n\t}\n\treturn m - res + 1;\n//\treturn m -(res - 1);\n}\n\nint check(double t){\t// \u5982\u679c\u4ee5\u6d53\u5ea6 t \u4e3a\u6807\u51c6\uff0c\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e t \u7684\u6709\u591a\u5c11\u79cd\u3002\n\tint res = 0;\n\tdouble r = t / (1 - t);\n\t\n\tfor(int i=1; i<=m; i++){\n\t\t// v[i] \u5b58\u50a8\u7684\u662f\u7b2c 2 \u6392\u8fd8\u9700\u8981\u591a\u5c11\u7cd6\u624d\u80fd\u8fbe\u5230 t \u6d53\u5ea6 \n\t\tv[i] = c[i] - d[i] * r;\n//\u76f8\u5f53\u4e8ev[i] = c[i] - t / (1 - t) * d[i]; \n\t}\n\t\n\tsort(v+1, v+m+1);\n\t\n\tfor(int i=1; i<=n; i++){\n\t\tdouble w = a[i] - b[i] * r;\n//\t\t\u76f8\u5f53\u4e8e w = a[i] - t / (1 - t) * b[i]; \n\t\tres += find(-w);\t\t// \u4e8c\u5206\u627e v \u6570\u7ec4\u79cd\u5927\u4e8e\u7b49\u4e8e -w \u7684\u6709\u591a\u5c11\u9879 \n\t}\n\t\n\treturn res;\n}\n\nsigned main(){\n\t// \u8bfb\u5165 \n\tscanf(\"%lld %lld %lld\", &n, &m, &k);\n\t\n\tfor(int i=1; i<=n; i++){\n\t\tscanf(\"%lld %lld\", a+i, b+i);\n\t}\n\t\n\tfor(int i=1; i<=m; i++){\n\t\tscanf(\"%lld %lld\", c+i, d+i); \n\t}\n\t\n\twhile(r - l > 1e-14){\n\t\tdouble mid = (l + r) / 2;\n\t\tint x = check(mid);\t// \u5982\u679c\u4ee5\u6d53\u5ea6 mid \u4e3a\u6807\u51c6\uff0c\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e mid \u7684\u6709\u591a\u5c11\u79cd\u3002 \n\t\tif(x >= k){\n\t\t\tans = mid;\n\t\t\tl = mid;\t// \u8bd5\u7740\u5bfb\u627e\u66f4\u5927\u503c \n\t\t}\n\t\telse{\n\t\t\tr = mid;\t// \u5bfb\u627e\u66f4\u5c0f\u503c \n\t\t}\n\t}\n\t\n\t// \u8f93\u51fa \n\tprintf(\"%.10lf\", ans * 100);\n\treturn 0;\n}\n```\n",
        "postTime": 1680156377,
        "uid": 748509,
        "name": "2huk",
        "ccfLevel": 0,
        "title": "AtCoder ABC294 F - Sugar Water 2"
    },
    {
        "content": "# \u9898\u89e3 [ABC294F] Sugar Water 2\n\n### Part1 \u9898\u610f\n\n[\u4f20\u9001\u95e8\uff08\u6d1b\u8c37\uff09](https://www.luogu.com.cn/problem/AT_abc294_f)\n\n[\u4f20\u9001\u95e8\uff08\u539f\u9898\uff09](https://atcoder.jp/contests/abc294/tasks/abc294_f)\n\n- \u7ed9\u5b9a $n+m$ \u676f\u7cd6\u6c34\uff0c\u524d $n$ \u676f\u4e2d\u7b2c $i$ \u676f\u6709 $a_i$ \u514b\u6c34\u548c $b_i$ \u514b\u7cd6\uff0c\u540e $m$ \u676f\u4e2d\u7b2c $i$ \u676f\u6709 $c_i$ \u514b\u6c34\u548c $d_i$ \u514b\u7cd6\u3002\n\n- \u6c42\u4ece\u524d $n$ \u676f\u548c\u540e $m$ \u676f\u7cd6\u6c34\u4e2d\u5404\u4efb\u53d6\u4e00\u676f\u6df7\u5408\u8d77\u6765\uff0c\u6df7\u5408\u540e\u7684\u7cd6\u6c34\u6d53\u5ea6\u7b2c $k$ \u5927\u7684\u6df7\u5408\u65b9\u6cd5\u6d53\u5ea6\u662f\u591a\u5c11\uff1f\n\n- $1 \\le n,m \\le 5 \\times 10^4$\uff0c$1 \\le k \\le nm$\n\n### Part2 \u601d\u8def\n\n~~\u5947\u602a\u7684~~\u4e8c\u5206\u9898\u3002\n\n\u8bbe\u6d53\u5ea6\u4e3a $x$\uff0c\u5219 $\\dfrac{\\text{\u7cd6}}{\\text{\u7cd6\u6c34}}=\\dfrac{x}{1}$\uff0c\u4e8e\u662f $\\dfrac{\\text{\u7cd6}}{\\text{\u6c34}}=\\dfrac{x}{1-x}$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6c42\u51fa\u4f7f\u4e00\u676f\u6709 $a$ \u514b\u7cd6\uff0c$b$ \u514b\u6c34\u7684\u7cd6\u6c34\u6d53\u5ea6\u53d8\u6210 $x$ \u6240\u9700\u8981\u7684\u7cd6\u6570 $s=a-\\dfrac{x}{1-x}b$\u3002\n\n**\u4e8c\u5206**\uff1a\n- \u4e8c\u5206\u4e00\u4e2a\u6d53\u5ea6 $x$\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u6d53\u5ea6\u6c42\u6709\u591a\u5c11\u79cd\u6df7\u5408\u7cd6\u6c34\u7684\u6d53\u5ea6\u4e0d\u5c0f\u4e8e\u5b83\uff1b\n- \u5982\u679c\u4e0d\u8db3 $k$ \u676f\u5219\u6d53\u5ea6\u592a\u5927\uff0c\u4f7f $r=mid$\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\n- \u4e8c\u5206\u4e00\u5b9a\u6b21\u6570\uff08$100$ \u6b21\u8db3\u77e3\uff09\u540e\u8f93\u51fa $l$ \u7684\u503c\u3002\n\n\u63a5\u7740\u8003\u8651\u5982\u4f55\u5199 `check` \u51fd\u6570\u3002\n\n\u65e2\u7136\u53ef\u4ee5\u6c42\u51fa\u6bcf\u4e00\u676f\u7cd6\u6c34\u5230\u8fbe\u76ee\u6807\u6d53\u5ea6\u6240\u9700\u8981\u7684\u7cd6\u6570 $s$\uff0c\u90a3\u53ef\u4ee5\u628a\u524d $n$ \u676f\u6216\u540e $m$ \u676f\u7684 $s$ \u503c\u9884\u5904\u7406\u51fa\u6765\u5e76\u6392\u5e8f\uff0c\u53e6\u5916\u7684\u90e8\u5206\u679a\u4e3e\u6bcf\u4e00\u676f\uff0c\u6c42\u51fa\u5176 $s$ \u503c\uff0c\u5e76\u7528\u4e8c\u5206\u67e5\u627e\u6c42\u51fa\u9009\u8fd9\u676f\u65f6\u6709\u591a\u5c11\u79cd\u65b9\u6cd5\u80fd\u4f7f\u6df7\u5408\u540e\u6d53\u5ea6\u5927\u4e8e $x$\uff08\u5373\u4e24\u4e2a $s$ \u52a0\u8d77\u6765\u4e0d\u8d85\u8fc7 $0$\uff09\u3002\n\n\u8fd9\u6837\u4e8c\u5206\u7684\u590d\u6742\u5ea6\u662f $\\text{O}(100)$\uff0c`check` \u7684\u590d\u6742\u5ea6\u662f $\\text{O}(n \\log n + m \\log n)$ \u6216\u8005\u662f $\\text{O}(m \\log m + n \\log m)$ \u7684\uff0c\u603b\u5171\u5c31\u662f $\\text{O}(100 n \\log m)$\uff08\u4e00\u79cd\u60c5\u51b5\uff09\u7684\u3002\n\n### Part3 \u4ee3\u7801\n\n\u6ce8\u91ca\u5728\u4ee3\u7801\u91cc\u5566\uff01\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>//\u4e8c\u5206\u67e5\u627e \n#include<queue>\n#include<vector>\n#include<map>\n#include<set>\n#include<cstring>\n#include<iomanip>//\u4f5c\u7528\u89c1\u8f93\u51fa \n#include<string>\n#define ll long long\n#define ull unsigned long long\n#define lf double\n#define ld long double\nusing namespace std;\nll n,m,k,a[50010],b[50010],c[50010],d[50010];\nld l=0,r=1;\nld v[50010];\nbool check(ld t){\n\tld x=t/(1-t);//\u7cd6\u4e0e\u6c34\u4e4b\u6bd4 \n\tll tsum=0;//\u7edf\u8ba1\u6570\u91cf \n\tfor(int i=0;i<n;i++){\n\t\tv[i]=a[i]-b[i]*x;//\u6c42\u51fa\u8fd8\u9700\u8981\u7684\u7cd6\u6570 \n\t}\n\tsort(v,v+n);//\u522b\u5fd8\u4e86\u6392\u5e8f\uff0c\u8981\u4e0d\u6ca1\u6cd5\u4e8c\u5206\u67e5\u627e\uff08\u4e8c\u5206\u67e5\u627e\u53ea\u652f\u6301\u6709\u5e8f\u6570\u7ec4\uff09 \n\tfor(int i=0;i<m;i++){\n\t\tld tmp=c[i]-d[i]*x;//\u8fd9\u4e00\u676f\u7f3a\u7684\u7cd6 \n\t\tll p=lower_bound(v,v+n,-tmp)-v;//\u770b\u770b\u6709\u591a\u5c11\u80fd\u8865\u56de\u6765\uff0c\u6ce8\u610f\u7b26\u53f7 \n\t\ttsum+=n-p;//\u7edf\u8ba1\u7ed3\u679c \n\t}\n\treturn tsum<k;//\u6ce8\u610f\u8fd9\u91cc\u662f\u5c0f\u4e8e \n}\nint main(){\n\t//\u8bfb\u5165 \n\tcin>>n>>m>>k;\n\tfor(int i=0;i<n;i++){\n\t\tcin>>a[i]>>b[i];\n\t}\n\tfor(int i=0;i<m;i++){\n\t\tcin>>c[i]>>d[i];\n\t}\n\tfor(int i=0;i<100;i++){//100 \u6b21\u7cbe\u5ea6\u8db3\u591f \n\t\tld mid=(l+r)/2;\n\t\tif(check(mid))r=mid;\n\t\telse l=mid;\n\t}\n\tcout<<fixed<<setprecision(12)<<l*100;\n\t//\u6211\u8fd9\u91cc\u4f7f\u7528\u4e86 long double \u6240\u4ee5\u53ea\u80fd\u7528\u8fd9\u79cd\u65b9\u6cd5\u8f93\u51fa\uff0c\u7528 double \u53ef\u4ee5\u7528 printf \u8f93\u51fa\u3002\n\treturn 0;\n}\n```",
        "postTime": 1679668569,
        "uid": 476093,
        "name": "JuRuoOIer",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 [ABC294F] Sugar Water 2"
    },
    {
        "content": "[\u53ef\u80fd\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/jiangtaizhe001/p/17241125.html)\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://atcoder.jp/contests/abc294/tasks/abc294_f)\n\n### \u9898\u76ee\u5927\u610f\n\u9ad8\u6865\u541b\u6709 $N$ \u74f6\u7cd6\u6c34\uff0c\u7b2c $i$ \u74f6\u6709 $A_i$ \u514b\u7cd6\u548c $B_i$ \u514b\u6c34\u3002\u9752\u6728\u541b\u6709 $M$ \u74f6\u7cd6\u6c34\uff0c\u7b2c $i$ \u74f6\u6709 $C_i$ \u514b\u7cd6\u548c $D_i$ \u514b\u6c34\u3002\u7136\u540e\u4e24\u4eba\u5404\u62ff\u51fa\u4e00\u74f6\u6df7\u5728\u4e00\u8d77\uff0c\u6c42\u53ef\u80fd\u4ea7\u751f\u7684\u7b2c $K$ \u5927\u7684\u6d53\u5ea6\u767e\u5206\u6bd4\u662f\u591a\u5c11\uff0c\u8bef\u5dee\u5728 $10^{-9}$ \u5185\u5747\u4e3a\u6b63\u786e\u3002  \n\u5b9a\u4e49\u4e00\u74f6 $x$ \u514b\u7cd6 $y$ \u514b\u6c34\u7684\u7cd6\u6c34\u6d53\u5ea6\u4e3a $\\dfrac{100x}{x+y}\\%$\u3002  \n$1\\le N,M\\le 5\\cdot 10^4$\uff0c$1\\le K \\le NM$\uff0c$1\\le A_i,B_i,C_i,D_i\\le 10^5$\uff0c\u8f93\u5165\u5747\u4e3a\u6574\u6570\u3002\n### \u9898\u76ee\u89e3\u6790\n\u8003\u8651\u76f4\u63a5\u6c42\u7b2c $K$ \u5927\u4e0d\u597d\u7b97\uff0c\u6240\u4ee5\u8003\u8651\u4e8c\u5206\u7b54\u6848\uff0c\u7136\u540e\u6c42\u4e00\u4e2a\u6d53\u5ea6\u6bd4\u4ed6\u5927\u7684\u6570\u91cf\u3002  \n\u8003\u8651\u4e24\u4e2a\u74f6\u7cd6\u6c34\u6df7\u5408\u5728\u4e00\u8d77\uff0c\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e $t$\u3002\n$$\\dfrac{A_i+C_j}{A_i+B_i+C_j+D_j}\\ge t$$\n\u8003\u8651\u5316\u7b80\uff0c\u5c06 $A_i,B_i$ \u548c $C_j,D_j$ \u5206\u5230\u4e0d\u7b49\u5f0f\u4e24\u8fb9\uff0c\u5f97\u5230\n$$A_i-(A_i+B_i)t\\ge-C_j+(C_j+D_j)t$$\n\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u6309\u7167 $-C_j+(C_j+D_j)t$ \u6392\u5e8f\uff0c\u679a\u4e3e $i$ \u4e8c\u5206 $j$ \u5373\u53ef\u505a\u5230 $\\Theta(N\\log N)$ \u8ba1\u7b97\u3002  \n\u52a0\u4e0a\u524d\u9762\u4e8c\u5206\u7b54\u6848\uff0c\u590d\u6742\u5ea6\u5c31\u662f $\\Theta(N\\log M\\log W)$\uff0c\u5176\u4e2d $W=10^{12}$\u3002\n\n\u5751\u70b9\uff1a\n\n- `long double` \u9632\u6b62\u5361\u7cbe\u5ea6\n- $K$ \u7684\u8303\u56f4\u662f $NM=2.5\\cdot10^9$\uff0c\u9700\u8981 `long long`\n\n```cpp\nint n,m; ll k; ld l,r,mid,p[maxn],q[maxn];\nstruct JTZ{\n\tld x,y;\n}a[maxn],b[maxn];\n#define mg(i,j) ((a[i].x+b[j].x)*1.0/(a[i].x+a[i].y+b[j].x+b[j].y))\nll js(){\n\tint i,le,ri,midd; ll cnt=0;\n\tfor(i=1;i<=n;i++) p[i]=a[i].x-(a[i].x+a[i].y)*mid;\n\tfor(i=1;i<=m;i++) q[i]=-b[i].x+(b[i].x+b[i].y)*mid;\n\tsort(q+1,q+m+1);\n\tfor(i=1;i<=n;i++){\n\t\tle=0,ri=m+1;\n\t\twhile(le+1<ri){\n\t\t\tmidd=(le+ri)>>1;\n\t\t\tif(q[midd]<p[i]+1e-12) le=midd; else ri=midd;\n\t\t}\n\t\tcnt+=le;\n\t} return cnt;\n}\nint main(){\n\tn=read(); m=read(); k=read(); int i;\n\tfor(i=1;i<=n;i++) a[i].x=read(),a[i].y=read();\n\tfor(i=1;i<=m;i++) b[i].x=read(),b[i].y=read();\n\tl=0,r=1;\n\twhile(l+EPS<=r){\n\t\tmid=(l+r)/2;\n\t\tif(js()<k) r=mid; else l=mid;\n\t}\n\tprintf(\"%.10Lf\",l*100.0);\n\treturn 0;\n}\n```",
        "postTime": 1679397267,
        "uid": 215042,
        "name": "jiangtaizhe001",
        "ccfLevel": 7,
        "title": "[ABC294F] Sugar Water 2 \u9898\u89e3"
    },
    {
        "content": "\u9898\u610f\u8981\u6c42\u6df7\u5408 $A,B$ \u4e24\u4e2a\u96c6\u5408\u4e2d\u5404\u4e00\u74f6\u7cd6\u6c34\uff0c\u4f7f\u5176\u6d53\u5ea6\u6700\u5927\uff0c\u4e0d\u8003\u8651\u9971\u548c\u3002\n\n\u5f53\u65f6\u4e00\u770b\u5230\u8fd9\u9053\u9898\u5c31\u60f3\u5230\u4e86\u4e4b\u524d\u7684\u4e00\u9053[\u7701\u9009\u9898](https://www.luogu.com.cn/problem/P5319)\uff0c\u4e0d\u8fc7\u4f3c\u4e4e\u7b80\u5355\u5f88\u591a\u3002\n\n\u4e8e\u662f\u53ef\u4ee5\u5957\u8def\u5730\u4e8c\u5206\u4e00\u4e2a $\\Delta$\uff0c\u68c0\u9a8c\u662f\u5426\u5b58\u5728 $\\dfrac{a+c}{a+b+c+d}>\\Delta$\uff0c\u53ef\u4ee5\u5c06\u4e0d\u7b49\u5f0f\u62c6\u5f00\uff0c\u5f97\u5230\uff1a$(1-\\Delta)a-\\Delta b>(\\Delta-1)c+\\Delta d$\uff0c\u53d1\u73b0\u5de6\u5f0f\u53ea\u4e0e $a,b$ \u6709\u5173\uff0c\u53f3\u5f0f\u53ea\u4e8e $c,d$ \u6709\u5173\u3002\n\n\u4e8e\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $(a,b)$ \u6211\u4eec\u90fd\u53ef\u4ee5\u4e8c\u5206\u6c42\u51fa $(c,d)$ \u4f7f\u5176\u6d53\u5ea6\u5927\u4e8e $\\Delta$ \u7684\u65b9\u6848\u6570\u3002\n\n\u5176\u5b9e\u90fd\u662f\u5e73\u51e1\u7684\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n\\log V)$\uff0c\u5176\u4e2d $V$ \u4e0e\u7cbe\u5ea6\u6709\u5173\u3002\n\n\u5f53\u7136\u53ef\u4ee5\u5361\u4e8c\u5206\u6b21\u6570\uff08\u6211\u7528\u7684 $200$\uff09\uff0c\u7531\u4e8e\u662f\u5206\u6570\u57df\u4e8c\u5206\uff0c\u6240\u4ee5\u4e5f\u88ab\u6210\u4e3a $0/1$ \u5206\u6570\u89c4\u5212\uff0c[\u8d5b\u65f6 AC \u8bb0\u5f55](https://atcoder.jp/contests/abc294/submissions/39860977)\u3002",
        "postTime": 1679359727,
        "uid": 502410,
        "name": "EnofTaiPeople",
        "ccfLevel": 0,
        "title": "\u5c0f\u6e05\u65b0\u5206\u6570\u89c4\u5212"
    },
    {
        "content": "# [ABC294F Sugar Water 2](https://www.luogu.com.cn/problem/AT_abc294_f) \u9898\u89e3\r\n*1891\u3002\r\n\r\n~~\u5dee\u70b9\u5c31\u84dd\u4e86~~\r\n## \u9898\u76ee\u5927\u610f\r\n\u4e24\u7ec4\u7cd6\u6c34\uff1a\u7b2c\u4e00\u7ec4\u6709 $n$ \u676f\uff0c\u7b2c $i$ \u79cd\u6709 $a_i$ \u514b\u7cd6\u548c $b_i$ \u514b\u6c34\uff1b\u7b2c\u4e8c\u7ec4\u6709 $m$ \u676f\uff0c\u7b2c $i$ \u79cd\u6709 $c_i$ \u514b\u7cd6\u548c $d_i$ \u514b\u6c34\u3002\u6df7\u5408\u540e\u6709 $n\\cdot m$ \u79cd\u7cd6\u6c34\uff0c\u6c42\u51fa\u5176\u4e2d\u6d53\u5ea6\u7b2c $k$ \u5927\u7684\u7cd6\u6c34\u7684\u6d53\u5ea6\uff0c\u7528\u767e\u5206\u6570\uff0c\u4e0d\u8f93\u51fa `%`\u3002\r\n## \u89e3\u9898\u601d\u8def\r\n\u6211\u4eec\u6c42\u51fa\u6240\u6709\u7cd6\u6c34\u7684\u6d53\u5ea6\u663e\u7136\u4e0d\u53ef\u4ee5\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u7528\u4e8c\u5206\u3002\r\n\r\n\u4e8c\u5206\u7b54\u6848\uff1a\u7ed9\u5b9a $0\\leq p\\leq 100$\uff0c\u5224\u65ad\u662f\u5426\u6709\u81f3\u5c11 $k$ \u79cd\u642d\u914d\u6d53\u5ea6 $\\geq p\\%$\u3002\u6211\u4eec\u627e\u51fa\u6ee1\u8db3\u4ee5\u4e0a\u6761\u4ef6\u7684\u6700\u5927 $p$ \u5373\u53ef\u3002\u56e0\u4e3a\u663e\u7136\u6ee1\u8db3\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e8c\u5206\u3002\r\n\r\n\u63a5\u7740\u6211\u4eec\u601d\u8003\uff1a\u5982\u4f55\u5224\u65ad\u4e0a\u9762\u7684\u6761\u4ef6\u662f\u5426\u6210\u7acb\uff1f\r\n\r\n\u7528\u539f\u9898\u7ed9\u7684\u5f0f\u5b50\uff1a\u5047\u8bbe\u4e24\u676f\u7cd6\u6c34\u7684\u7cd6\u4e3a $a_1,a_2$\uff0c\u6c34\u4e3a $b_1,b_2$\u3002\u6240\u4ee5\u6df7\u5408\u540e\u7cd6\u4e3a $a_1+a_2$\uff0c\u7cd6\u6c34\u91cd\u91cf\u4e3a $a_1+a_2+b_1+b_2$\u3002\u6211\u4eec\u5e0c\u671b\u628a $a_1,b_1$ \u653e\u5728\u4e00\u8d77\uff0c\u53e6\u5916\u4e24\u4e2a\u653e\u5728\u4e00\u8d77\u3002\r\n\r\n\u4f9d\u9898\u610f\u53ef\u5f97\uff1a$\\frac{100(a_1+a_2)}{a_1+b_1+a_2+b_2}\\geq p$\r\n\r\n\u5316\u7b80\u540e\u5f97\uff1a$100a_1-a_1-pa_2\\leq pa_2+pb_2-100a_2$\r\n\r\n\u7b97\u51fa\u5de6\u53f3\u4e24\u8fb9\uff0c\u518d\u7528\u4e8c\u5206\u5373\u53ef\u3002\r\n\r\n## Code\r\n```cpp\r\n#include<bits/stdc++.h>\r\n#define ll long long\r\n#define ld long double\r\n#define ull unsigned long long\r\n#define rep(i,l,r) for(register ll i=(l);i<=(r);++i)\r\n#define Rep(i,l,r) for(register ll i=(r);i>=(l);--i)\r\n#define repD(i,u,E) for(register ll i=hd[u];i;i=E[i].nxt)\r\n#define all(x) x.begin(),x.end()\r\nusing namespace std;\r\nvoid upd_s(ll&x,ll v){x=min(x,v);}\r\nvoid upd_b(ll&x,ll v){x=max(x,v);}\r\nconst ll N=50009;\r\nconst double ERR=1e-12;\r\nll n,m,k;\r\nll a[N],b[N],c[N],d[N];\r\ndouble e[N],f[N]; \r\nbool OK(double p){\r\n\tll ans=0;\r\n\t/*\r\n\t100(x1+x2)/(x1+x2+y1+y2) <= p\r\n\t100x1+100x2 <= px1+px2+py1+py2\r\n\t100x1-px1-py1 <= px2+py2-100x2\r\n\t*/\r\n\trep(i,1,n)e[i]=100*a[i]-p*a[i]-p*b[i];\r\n\trep(i,1,m)f[i]=p*c[i]+p*d[i]-100*c[i];\r\n\tsort(f+1,f+1+m);\r\n\trep(i,1,n)ans+=(upper_bound(f+1,f+m+1,e[i])-f-1);\r\n\treturn ans>=k;\r\n}\r\nint main(){\r\n\tcin>>n>>m>>k;\r\n\trep(i,1,n)cin>>a[i]>>b[i];\r\n\trep(i,1,m)cin>>c[i]>>d[i];\r\n\tdouble l=0,r=100,ans;\r\n\twhile(r-l>=ERR){\r\n\t\tdouble mid=(l+r)/2;\r\n\t\tif(OK(mid))l=ans=mid;\r\n\t\telse r=mid;\r\n\t}\r\n\tcout<<fixed<<setprecision(12)<<ans<<endl;\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1679314016,
        "uid": 555345,
        "name": "xionglangqi",
        "ccfLevel": 0,
        "title": "ABC294F Sugar Water 2"
    },
    {
        "content": "~~\u53cc\u6307\u9488\u5199\u53cd\u65b9\u5411\u4e86\uff0c/fn\u3002~~\n\n- \u9898\u610f\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n,m$ \u7684\u4e24\u4e2a\u6570\u7ec4 $a,b$\uff0c\u5305\u542b\u4e24\u4e2a\u5c5e\u6027 $x,y$\uff0c\u6c42 ${a_i.x+b_j.x}\\over{a_i.x+a_i.y+b_j.x+b_j.y}$ \u7684\u7b2c $k$ \u503c\u3002\n\n- \u5206\u6790\n\n\u8003\u8651\u4e8c\u5206\u7b54\u6848\uff0c\u5373\u7edf\u8ba1 $\\frac{a_i.x+b_j.x}{a_i.x+a_i.y+b_j.x+b_j.y}\\ge mid$ \u7684\u65b9\u6848\u6570\uff0c\u5316\u7b80\u4e00\u4e0b\u5f0f\u5b50\u5c31\u662f $(a_i.x+b_j.x)\\times(1-mid)+(a_i.y+b_j.y)\\times mid \\le 0$ \u7684\u65b9\u6848\u6570\u3002\u6211\u4eec\u5c06\u7b2c $i$ \u4e2a\u70b9\u7684\u6743\u503c\u8bbe\u4e3a $w=a_i.x\\times(1-mid)+a_i.y\\times mid$\uff0c\u5c31\u662f\u7edf\u8ba1 $a_i.w+b_j.w\\le0$ \u7684\u65b9\u6848\u6570\uff0c\u76f4\u63a5\u6392\u5e8f\u52a0\u53cc\u6307\u9488\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6 $\\mathcal O(n\\log n\\log V)$\u3002\n\n- code\n\n```cpp\n#include <bits/stdc++.h>\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,avx2\")\n#define LL long long\n#define int long long\n#define writesp(x) write(x), putchar(' ')\n#define writeln(x) write(x), putchar('\\n')\n#define FileIO(ch) freopen(ch\".in\", \"r\", stdin), freopen(ch\".out\", \"w\", stdout)\nusing namespace std;\n\nnamespace IO {\n    char ibuf[(1 << 20) + 1], *iS, *iT;\n#if ONLINE_JUDGE\n#define gh() (iS == iT ? iT = (iS = ibuf) + fread(ibuf, 1, (1 << 20) + 1, stdin), (iS == iT ? EOF : *iS++) : *iS++)\n#else\n#define gh() getchar()\n#endif\n    inline long long read() {\n        char ch = gh();\n        long long x = 0;\n        bool t = 0;\n        while (ch < '0' || ch > '9') t |= ch == '-', ch = gh();\n        while (ch >= '0' && ch <= '9') x = (x << 1) + (x << 3) + (ch ^ 48), ch = gh();\n        return t ? ~(x - 1) : x;\n    }\n    template <typename _Tp>\n    inline void write(_Tp x) {\n    \tstatic char stk[64], *top = stk;\n        if (x < 0) {\n            x = ~(x - 1);\n            putchar('-');\n        }\n        do *top++ = x % 10, x /= 10;\n        while (x);\n        while (top != stk) putchar((*--top) | 48);  \n    }\n}\n\nusing IO::read;\nusing IO::write;\n\nconst int maxn(1e5 + 500);\nconst long double eps(1e-12);\nint n, m, k;\nstruct Node {\n\tint x, y;\n\tlong double w;\n\tinline bool operator < (const Node &rhs) const { return w < rhs.w; }\n} a[maxn], b[maxn];\n\ninline bool chk (long double mid) {\n\tfor (int i = 1; i <= n; i++) a[i].w = a[i].x * (mid - 1) + a[i].y * mid;\n\tfor (int i = 1; i <= m; i++) b[i].w = b[i].x * (mid - 1) + b[i].y * mid;\n\tsort(a + 1, a + n + 1), sort(b + 1, b + m + 1);\n\tint res = 0;\n\tfor (int i = n, j = 1; i; i--) {\n\t\twhile (j <= m && a[i].w + b[j].w <= 0) ++j;\n\t\tres += j - 1;\n\t}\n\treturn res >= k;\n}\n\nsigned main() {\n\tn = read(), m = read(), k = read();\n\tfor (int i = 1; i <= n; i++) a[i].x = read(), a[i].y = read();\n\tfor (int i = 1; i <= m; i++) b[i] = {read(), read()};\n\tlong double l = 0, r = 1, mid;\n\twhile (r - l > eps) {\n\t\tmid = (l + r) / 2;\n\t\tif (chk(mid)) l = mid;\n\t\telse r = mid;\n\t}\n\tprintf(\"%.12Lf\", l * 100);\n}\n// I love WHQ!\n```",
        "postTime": 1679307145,
        "uid": 317495,
        "name": "JWRuixi",
        "ccfLevel": 7,
        "title": "[ABC294F] Sugar Water 2"
    },
    {
        "content": "[\u6216\u8bb8\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff1f](https://zhuanlan.zhihu.com/p/615414755)\n\n### \u9898\u610f\u63cf\u8ff0\n\n\u7ed9\u4f60\u4e24\u6392\u7cd6\u6c34\uff0c\u6bcf\u4e2a\u7cd6\u6c34\u6709\u4e00\u4e9b\u8d28\u91cf\u7684\u7cd6\u4e0e\u4e00\u4e9b\u4e00\u4e9b\u8d28\u91cf\u7684\u6c34\u7ec4\u6210\u3002\n\n\u4ece\u4e24\u6392\u4e2d\u5404\u53d6\u4e00\u4e2a\u7cd6\u6c34\u6df7\u5408\uff0c\u5f97\u7cd6\u6d53\u5ea6 $\\frac{x_i + x_j} {x_i + y _ i + x _ j + y _j}$\u3002\n\n\u5728\u6240\u6709\u6df7\u5408\u65b9\u6848\u4e2d\uff0c\u6c42\u7b2c $k$ \u5927\u6d53\u5ea6\u3002\n\n### \u7b80\u8981\u5206\u6790\n\n\u8003\u8651\u4e8c\u5206\u7b54\u6848\u3002\n\n\u5bf9\u4e8e\u4e8c\u5206\u7684\u6bcf\u4e2a\u6d53\u5ea6 $C$ \u6211\u4eec\u8981\u6c42\u51fa\u4ed6\u7684\u6392\u540d\u3002\n\n\u6c42\u6392\u540d\u7684\u8fc7\u7a0b\u4e3a\u5c31\u662f\u8981\u6bd4\u8f83 $\\frac{x_i + x_j}{x_i + y_i+ x_j + y_j}$ \u4e0e $C$ \u7684\u5927\u5c0f\u3002\n\n\u5373\u8981\u6ee1\u8db3:\n$$\n\\frac{x_i + x_j}{x_i + y_i+ x_j + y_j} > C\n$$\n\u624d\u4f1a\u589e\u52a0 $C$ \u7684\u6392\u540d\u3002\n\n\u53d1\u73b0\u8fd9\u91cc\u7684\u9664\u6cd5\u662f\u4e0d\u597d\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u5c06\u9664\u6cd5\u53bb\u6389\u3002\n\n\u4e8e\u662f\u8981\u6ee1\u8db3: \n$$\n{x_i + x_j} > C \\times (x_i + y_i+ x_j + y_j)\n$$\n\n\n\u8fd9\u91cc\u628a $i,j$ \u5206\u5f00\u6765\u5c31\u53d8\u6210\uff1a\n$$\n(1 - C) \\times x_i - C \\times y_i >(C - 1)\\times x_j + C \\times y_j\n$$\n\u53e6 $T_{ai} = (1 - C) \\times x_i - C \\times y_i$\uff0c$T_{bj} = (C - 1)\\times x_j + C \\times y_j$\u3002\n$$\nT_{ai} > T_{bi}\n$$\n\u4e5f\u5c31\u662f\u8bf4\u6ee1\u8db3\u539f\u5f0f $i,j$ \u7684\u6570\u91cf\u5c31\u8f6c\u5316\u6210\u6c42\u51fa\u4e0a\u5f0f $i,j$ \u7684\u6570\u91cf\u3002\n\n\u5c06 $T_{ai},T_{bi}$ \u6392\u5e8f\u540e\u4f7f\u7528\u53cc\u6307\u9488\u6216\u4e8c\u5206\u6c42\u89e3\uff08\u8fd9\u91cc\u7c7b\u6bd4\u672c\u573a C \u9898\uff09\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\log n)$\u3002\n\n### \u4ee3\u7801\u5b9e\u73b0\n\n```cpp\nbool check(ldb C) {\n    vector<ldb> aa(n), bb(m);\n    for (ll i = 0; i < n; i++)aa[i] = (1.0 - C) * a[i][0] - C * a[i][1];\n    for (ll j = 0; j < m; j++)bb[j] = (C - 1.0) * b[j][0] + C * b[j][1];\n    sort(aa.begin(), aa.end()), sort(bb.begin(), bb.end());\n    ll cur = 0, cnt = 0;\n    for (ll i = 0; i < n; ++i) {\n        while (cur < m && bb[cur] < aa[i])\n            ++cur;\n        cnt += cur;\n    }\n    return cnt <= k;\n}\n\nsigned main() {\n//    freopen(\"code.in\", \"r\", stdin);\n//    freopen(\"code.out\", \"w\", stdout);\n    ccin >> n >> m >> k;\n    for (ll i = 0; i < n; i++)ccin >> a[i][0] >> a[i][1];\n    for (ll i = 0; i < m; i++)ccin >> b[i][0] >> b[i][1];\n    ldb l = 0, r = 1;\n    k--;\n    while (r - l > EPS) {\n        ldb mid = (l + r) / 2.0;\n        if (check(mid))\n            r = mid;\n        else l = mid;\n    }\n    printf(\"%.10lf\\n\", r * 100);\n    return 0;\n}\n```\n\n## ",
        "postTime": 1679284918,
        "uid": 378222,
        "name": "fakestd",
        "ccfLevel": 0,
        "title": "[ABC294F] Sugar Water 2 \u9898\u89e3"
    },
    {
        "content": "# [ABC294F](https://www.luogu.com.cn/problem/AT_abc294_f)  \n\n\u8003\u573a\u4e0a\u591a\u6253\u4e86\u4e00\u4e2a\u7b49\u53f7\u5bfc\u81f4\u6302 $5$ \u53d1\u90fd\u6ca1\u8c03\u51fa\u6765\uff0c\u75db\u5931\u4e0a\u5206\u597d\u673a\u4f1a\u3002   \n\n\u56e0\u4e3a\u5bf9\u4e8e\u4e00\u4e2a\u6d53\u5ea6\uff0c\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e\u5b83\u7684\u6df7\u5408\u6eb6\u6db2\u6570\u91cf\u5177\u6709\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u8003\u8651\u4e8c\u5206\u7b54\u6848\u3002    \n\n\u8fd9\u91cc\u4ee4 $T_i$ \u8868\u793a\u6eb6\u6db2\u8d28\u91cf\uff0c$P_i$ \u8868\u793a\u6eb6\u6db2\u6d53\u5ea6\u3002\n\n\u8003\u8651 check \u51fd\u6570\u3002\u5bf9\u4e8e\u4e00\u4e2a\u6d53\u5ea6 $w$\uff0c\u5982\u679c\u6eb6\u6db2 $i$ \u4e0e\u6eb6\u6db2 $j$ \u7684\u6df7\u5408\u6eb6\u6db2\u6d53\u5ea6\u5927\u4e8e\u7b49\u4e8e $w$\uff0c\u5219\u6709\uff1a  \n\n$$\\frac{T_i\\times P_i+T_j\\times P_j}{T_i+T_j}\\ge w$$   \n$$T_i\\times P_i+T_j\\times P_j\\ge w\\times T_i+w\\times T_j$$   \n$$T_i\\times(P_i-w)\\ge T_j\\times(w-P_j)$$    \n\n\u5bf9\u4e8e\u6bcf\u4e00\u6b21 check\uff0c\u6211\u4eec\u53ef\u4ee5 $\\Theta(n+m)$ \u628a $T_i\\times(P_i-w)$ \u4e0e $T_j\\times(w-P_j)$ \u8dd1\u51fa\u6765\uff08\u4e00\u4e2a\u5e8f\u5217\u4e00\u79cd\u5f0f\u5b50\uff09\uff0c\u6392\u5e8f\u540e\u4f7f\u7528\u5c3a\u53d6\u6cd5\u79fb\u52a8\u6307\u9488\u7b97\u51fa\u6ee1\u8db3\u4e0a\u8ff0\u4e0d\u7b49\u5f0f\u7684\u5339\u914d\u6570\uff0c\u5982\u679c\u5927\u4e8e\u7b49\u4e8e $w$\uff0c\u5219\u5408\u6cd5\uff0c\u5426\u5219\u4e0d\u5408\u6cd5\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u8db3\u4ee5\u901a\u8fc7\u672c\u9898\u3002   \n\nCode\uff1a  \n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint n,m,k;\nint T1[500003],nd1[500003],T2[500003],nd2[500003],k1,k2;\nlong double F1[500003],F2[500003];\nlong double l,r,mid;\nint zc,sum;\nbool jud(long double X){\n\tfor(int i=1;i<=n;i++){\n\t\tF1[i]=nd1[i]-(long double)(T1[i])*X;\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tF2[i]=(long double)(T2[i])*X-nd2[i];\n\t}\n\tsort(F1+1,F1+n+1);\n\tsort(F2+1,F2+m+1);\n\tzc=0;\n\tsum=0;\n\tfor(int i=1;i<=n;i++){\n\t\twhile(zc<m&&F2[zc+1]<=F1[i])zc++;\n\t\tsum+=zc;\n\t}\n\treturn sum>=k;\n}\nsigned main(){\n\tscanf(\"%lld%lld%lld\",&n,&m,&k);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld%lld\",&k1,&k2);\n\t\tif(k2==0){\n\t\t\tn--;\n\t\t\ti--;\n\t\t\tcontinue;\n\t\t}\n\t\tT1[i]=k1+k2;\n\t\tnd1[i]=k1*100;\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tscanf(\"%lld%lld\",&k1,&k2);\n\t\tif(k2==0){\n\t\t\tm--;\n\t\t\ti--;\n\t\t\tcontinue;\n\t\t}\n\t\tT2[i]=k1+k2;\n\t\tnd2[i]=k1*100;\n\t}\n\tl=0.00;\n\tr=100.00;\n\twhile(r-l>=10e-16){\n\t\tmid=(l+r)*0.5;\n\t\tif(jud(mid))l=mid;\n\t\telse r=mid;\n\t}\n\tprintf(\"%.15Lf\",l);\n\treturn 0;\n}\n```\n",
        "postTime": 1679273033,
        "uid": 340819,
        "name": "cwfxlh",
        "ccfLevel": 5,
        "title": "AT_abc294_f"
    },
    {
        "content": "## \u9898\u610f\n\n\u4e24\u4e2a\u4eba\u5206\u522b\u6709 $n,m$ \u74f6\u7cd6\u6c34\uff0c\u8981\u6c42\u4ece\u4e24\u4eba\u4e2d\u5404\u9009\u4e00\u74f6\u6df7\u5408\u540e\u6d53\u5ea6\u7b2c $k$ \u5927\u7684\u7cd6\u6c34\u7684\u6d53\u5ea6\u3002\n\n## \u505a\u6cd5\n\n\u5178\u578b\u7684\u5206\u6570\u89c4\u5212\u95ee\u9898\uff0c\u81f3\u4e8e\u5206\u6570\u89c4\u5212\u95ee\u9898\u662f\u4ec0\u4e48\uff0c\u8be6\u60c5\u8bf7\u89c1 OI-wiki\u3002\n\n\u8981\u6c42\u8f93\u51fa\u5c0f\u6570\uff0c\u60f3\u5230\u4e8c\u5206\u7b54\u6848\uff0c\u7b80\u5355\u5730\u5316\u7b80\u4e00\u4e0b\u67ff\u5b50\u3002\n\n$\\begin{alignedat}{3}\\frac{a+c}{a+b+c+d}&\\ge x\n\\\\a+c&\\ge x\\times(a+b+c+d)\n\\\\(1-x)\\times a-x\\times b+(1-x)\\times c-x\\times d&\\ge 0\n\\\\A-B&\\ge0\n\\end{alignedat}$\n\n\u5176\u4e2d $A=(1-x)\\times a-x\\times b,B=(1-x)\\times c-x\\times d$\u3002\n\n\u5904\u7406\u51fa $A,B$ \u6570\u7ec4\u540e\u6392\u5e8f\uff0c\u8d2a\u5fc3\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n\\log V)$\u3002\n\n## \u4ee3\u7801\n\n\u7531\u4e8e double \u795e\u79d8\u7684\u7cbe\u5ea6\u95ee\u9898\uff0c\u5efa\u8bae\u4f7f\u7528\u8f83\u5927\u7684 int\uff0c\u6700\u540e\u518d\u51cf\u53bb\u3002\n\n```cpp\nconst ll N=5e4+5;\nconst ll V=1e13;\nll n,m,k,ans;\nll a[N],b[N],c[N],d[N];\nLD A[N],B[N];\ninline bool check(ll x){\n\tF(i,1,n) A[i]=(V-x)*a[i]-x*b[i];\n\tF(i,1,m) B[i]=(V-x)*c[i]-x*d[i];\n\tsort(A+1,A+n+1);\n\tsort(B+1,B+m+1);\n\tll res=0;\n\tll l=m;\n\tF(i,1,n){\n\t\twhile(l&&A[i]+B[l]>=0) --l;\n\t\tres+=m-l;\n\t}\n\treturn res>=k;\n}\nint main(){\n\tn=read();m=read();k=read();\n\tF(i,1,n) a[i]=read(),b[i]=read();\n\tF(i,1,m) c[i]=read(),d[i]=read();\n\tll l=0,r=V;\n\twhile(l<=r){\n\t\tll mid=(l+r)>>1;\n\t\tif(check(mid)) ans=mid,l=mid+1;\n\t\telse r=mid-1;\n\t}\n\tprintf(\"%.12f\\n\",ans*100.0/V);\n\treturn 0;\n}\n```\n",
        "postTime": 1679233559,
        "uid": 406832,
        "name": "Mikefeng",
        "ccfLevel": 7,
        "title": "AT_abc294_f"
    },
    {
        "content": "## Problem\n\n\u6709\u4e24\u7ec4\u7cd6\u6c34\uff0c\u5206\u522b\u6709 $n$ \u676f\uff08\u6709 $x1_i$ \u5428\u7cd6\u548c $y1_i$ \u5428\u6c34\uff09\u548c $m$ \u676f\uff08\u6709 $x2_i$ \u5428\u7cd6\u548c $y2_i$ \u5428\u6c34\uff09\uff0c\u6c42\u5c06\u5b83\u4eec\u4e24\u4e24\u6df7\u5408\u540e\u6d53\u5ea6\u7b2c $k$ \u5927\u7684\u6df7\u5408\u6d53\u5ea6\u662f\u591a\u5c11\u3002\n\n## Solution\n\n\u6211\u4eec\u5148\u5bf9 $\\frac{100x}{x+y}$ \u8fdb\u884c\u53d8\u5f62\u3002\n\n$$\n\\frac{100x}{x+y}=\\frac{100}{1+\\frac y x}\n$$\n\n\u8981\u6c42\u6d53\u5ea6\u7b2c $k$ \u5927\uff0c\u4e5f\u5c31\u662f\u6c42 $\\frac{y1+y2}{x1+x2}$ \u7b2c $k$ \u5c0f\u3002\n\n\u89c2\u5bdf\u5230\u6570\u636e\u8303\u56f4\u662f $5\\times 10^4$\uff0c\u4e0d\u96be\u60f3\u5230\u5e94\u8be5\u662f\u4e00\u4e2a\u591a $\\log$ \u7684\u505a\u6cd5\u3002\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5916\u9762\u5957\u4e00\u4e2a\u4e8c\u5206\uff0c\u8f6c\u5316\u6c42 $\\frac{y1+y2}{x1+x2}\\ge t$ \u7684\u6df7\u5408\u7cd6\u6c34\u79cd\u7c7b\u6570\u3002\n\n\u518d\u8fdb\u884c\u53d8\u5f62\uff0c\u9996\u5148\u8fdb\u884c\u901a\u5206\uff0c\u5f97\u5230\n\n$$\ny1+y2\\ge tx1+tx2 \\leftrightarrow y1-tx1\\ge tx2-y2\n$$\n\n\u8fd9\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u7528 $O(m+n)$ \u7684\u4ee3\u4ef7\u628a\u6240\u6709\u7684 $y1-tx1$ \u548c $tx2-y2$ \u6c42\u51fa\u6765\uff0c\u8fd9\u6837\u95ee\u9898\u8fdb\u884c\u4e86\u8f6c\u5316\uff1a\n\n\u6709\u4e24\u4e2a\u6570\u7ec4 $a,b$\uff0c\u6c42\u6709\u591a\u5c11\u5bf9 $i,j$ \u6ee1\u8db3 $a_i\\ge b_j$\u3002\n\n\u9996\u5148\u7528 $O(m\\log m)$ \u5bf9 $b$ \u6570\u7ec4\u6392\u5e8f\uff0c\u7136\u540e\u679a\u4e3e\u6bcf\u4e2a $a_i$\uff0c\u7528 $O(n\\log m)$ \u7684\u65f6\u95f4\u4e8c\u5206\u67e5\u627e\u6709\u591a\u5c11\u4e2a $b_i$ \u6bd4\u5b83\u5c0f\u3002\n\n\u8fd9\u6837\uff0c\u7531\u4e8e $n$ \u548c $m$ \u540c\u9636\uff0c\u6574\u4e2a\u95ee\u9898\u5c31\u7528 $O(n\\log^2 n)$ \u89e3\u51b3\u4e86\u3002\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define ld long double\n#define y1 y11\nconst int N=500005;\nint n,m;\nll k;\nll x1[N],y1[N],x2[N],y2[N];\nld a[N];\nint get(ld x)\n{\n\tint L=1,R=m,mid;\n\twhile(L<=R)\n\t{\n\t\tmid=(L+R)>>1;\n\t\tif(x>a[mid]) L=mid+1;\n\t\telse R=mid-1;\n\t}\n\treturn R;\n}\nll check(ld k)\n{\n\tfor(int i=1;i<=m;i++) a[i]=(ld)x2[i]*k-(ld)y2[i];\n\tsort(a+1,a+m+1);\n\tll ans=0;\n\tfor(int i=1;i<=n;i++)\n\t\tans+=get((ld)y1[i]-k*(ld)x1[i]);\n\treturn ans;\n}\nint main()\n{\n\tscanf(\"%d%d%lld\",&n,&m,&k);\n\tfor(int i=1;i<=n;i++) scanf(\"%lld%lld\",&x1[i],&y1[i]);\n\tfor(int i=1;i<=m;i++) scanf(\"%lld%lld\",&x2[i],&y2[i]);\n\tld L=0.0,R=1e20,mid;\n\twhile(R-L>1e-14)\n\t{\n\t\tmid=(L+R)/2.0;\n\t\tif(check(mid)>=1ll*n*m-k+1) L=mid;\n\t\telse R=mid; \n\t}\n\tprintf(\"%.11Lf\",100.0/(1.0+L));\n\treturn 0;\n}\n```\n\n## \u540e\u8bb0\n\n\u4e2a\u4eba\u89c2\u70b9\uff1a\n\n| \u6570\u636e\u8303\u56f4|\u4e00\u822c\u7684\u590d\u6742\u5ea6 |AtCoder \u4e0a\u5e38\u89c1\u7684\u590d\u6742\u5ea6 |\n|:-:|:-:|:-:|\n| $5\\times 10^4$ | $O(n\\log^3 n)$ | $O(n\\log^2 n)$ |\n| $2\\times 10^5$| $O(n\\sqrt n)$ \u6216 $O(n\\log^2 n)$ | $O(n\\sqrt n)$ \u6216 $O(n\\log n)$ |\n|$10^6$ | $O(n\\log n)$ \u6216 $O(n)$| $O(n)$|",
        "postTime": 1679232327,
        "uid": 148507,
        "name": "_Imaginary_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT_abc294F\u3010Sugar Water 2\u3011"
    },
    {
        "content": "# \u4e00\u4e2a\u5bb9\u6613\u9519\u8bef\u7684\u8d2a\u5fc3(\u4ec5\u7528\u4e8e\u8b66\u793a)\n\u4e00\u676f\u6d53\u5ea6\u5927\u7684\u7cd6\u6c34\u4e0e\u53e6\u4e00\u676f\u7cd6\u6c34\u6df7\u5408\uff0c\u53e6\u4e00\u676f\u7cd6\u6c34\u7684\u6d53\u5ea6\u5927\u4e0d\u4ee3\u8868\u6df7\u5408\u540e\u7684\u6d53\u5ea6\u5927\n\n\u5982: $7g$ \u7cd6, $14g$ \u6c34\u4e3a\u786e\u5b9a\u7684\u4e00\u676f\uff0c\u79f0\u4f5c $W$ \u676f\n\n\u7136\u540e\u8fd8\u6709\u4e24\u676f\n\n $A$ \u676f\u4e3a $7g$ \u7cd6, $4g$ \u6c34, $B$ \u676f\u4e3a $3g$ \u7cd6, $0g$ \u6c34(\u6d53\u5ea6 $100$% \uff0c\u5927\u4e0d\u5927)\n\n\u7136\u540e $W$ \u4e0e $A$ \u6df7\u5408\u540e\u7684\u6d53\u5ea6\u4e3a $43.75$%\n\n $W$ \u4e0e $B$ \u6df7\u5408\u540e\u7684\u6d53\u5ea6\u4e3a $41.66666.....$%\n\n\u521d\u59cb\u601d\u8def\uff1a \u5148\u60f3\u5230\u4e8c\u5206\u6d53\u5ea6\uff0c\u7136\u540e\u60f3\u5230 (\u5047) \u5355\u8c03\u6027\uff0c\u5373\u524d\u9762\u63d0\u5230\u7684\uff0c\u7136\u540e\u679a\u4e3e $n$ \u676f\u7cd6\u6c34,\u4e0e\u5269\u4e0b $m$ \u676f\u7cd6\u6c34\u6df7\u5408\u662f\u6709(\u5047\u7684)\u5355\u8c03\u6027\u7684\uff0c\u518d\u8fdb\u884c\u4e8c\u5206\u770b\u6709\u591a\u5c11\u6df7\u5408\u540e\u7684\u7cd6\u6c34\u6bd4\u5f53\u524d $x$ \u6d53\u5ea6\u5927\uff0c\u4e0d\u65ad\u4e8c\u5206\uff0c\u8c03\u4e86\u597d\u4e45\uff0c\u6700\u540e\u7ec8\u4e8e\u53d1\u73b0\u4e86\u8fd9\u8d2a\u5fc3\u5047\u4e86(\u4f30\u8ba1\u662f\u56e0\u4e3a\u6211\u592a\u83dc\u4e86)\n\n\u4e0b\u9762\u653e\u9020\u7684\u6570\u636e:\n\n```\n4 3 10\n9 1\n7 14\n13 15\n13 5\n6 15\n3 0\n7 4\n```\n\n# \u6b63\u786e\u601d\u8def\n$1.$\u4f9d\u65e7\u662f\u4e8c\u5206\u6d53\u5ea6, \u6d53\u5ea6\u8bbe\u4e3a$x$\n\n$2.$\u8ba1\u7b97\u6709 $res$ \u676f(\u6df7\u5408\u540e\u7684)\u6d53\u5ea6\u5927\u4e8e $x$\n\n$3.$**(\u53ef\u4ee5\u7075\u6d3b\u53d8\u901a)**,\u5047\u8bbe\u4e00\u676f\u7cd6\u6c34\u6709 $a$ g\u7cd6, $b$ g\u6c34\n\n\u5728\u6c34\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\u82e5\u6d53\u5ea6\u4e3a $x$ \uff0c\u5219\u5e94\u6709 $ x\\times\\frac{b}{(1-x)} g$ \u7cd6,\n\n\u90a3\u4e48\u539f\u6765\u7684\u7cd6\u6c34\u591a\u4f59 $s_x=$($a- x\\times\\frac{b}{(1-x)}$)$ g$ (\u5316\u7b80\u4e3a$\\frac{a-(a+b)x}{1-x}$,\u7136\u540e\u9ad8\u6865\u541b\u548c\u9752\u6728\u541b\u7684\u7cd6\u6c34\u90fd $\\times (1-x)$\uff0c\u4e0d\u5f71\u54cd\u6392\u5e8f ) \u7cd6(\u53ef\u4ee5\u662f\u8d1f\u6570\uff0c\u8868\u793a\u7f3a\u5c11)\n\n\u4e8e\u662f\u9ad8\u6865\u541b($s_x$)\u548c\u9752\u6728\u541b($s_y$)\u7684\u6bcf\u676f\u7cd6\u6c34\u90fd\u5982\u6b64\u5904\u7406,\u6ee1\u8db3$s_x+s_y>0$ \u7684\u4e2a\u6570\u5373\u4e3a $res$ \uff0c\u5c06\u5176\u4e2d\u4e00\u65b9\u53d6\u8d1f\u5c31\u53ef\u4ee5\u5728\u53e6\u4e00\u65b9\u7684\u7cd6\u6c34\u4e2d\u4e8c\u5206\u67e5\u627e\uff08\u591a\u4f59\u6216\u7f3a\u5c11\u7684\u7cd6\uff09\n\n## \u6b63\u786e\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define mid ((l+r)/2)\nconst int N=5e4+5;\ntypedef long long ll;\nint n,m;\nll k;\nstruct node{\n\tint sug,tot;\n}a[N],b[N];\ndouble c[N];\n\nbool check(double w){//\u6d53\u5ea6 \n\tvector<double>vec;\n\tfor(int i=1;i<=n;i++)\n\t\tvec.push_back(a[i].tot*w-a[i].sug);//\u53d6\u8d1f \u5224\u65ads[x]+s[y]\u6b63\u8d1f \n\tfor(int i=1;i<=m;i++)\n\t\tc[i]=b[i].sug-b[i].tot*w;\n\tsort(c+1,c+m+1);\n\tll res=0;\n\n\tfor(int i=0;i<n;i++){\n\t\tint j=lower_bound(c+1,c+m+1,vec[i])-c;\n\t\tres+=(m-j+1);\n\t}\n\tif(res>=k)\treturn false;\n\treturn true;\n}\nint main() {\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\t\n\tcin>>n>>m>>k;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i].sug>>a[i].tot;\n\t\ta[i].tot+=a[i].sug;//\u603b\u8d28\u91cf \n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tcin>>b[i].sug>>b[i].tot;\n\t\tb[i].tot+=b[i].sug;\n\t}\n\t\n\tdouble l=0,r=1;\n\tfor(int iter=1;iter<=100;iter++){//\u4e8c\u5206\u6d53\u5ea6\n\t\t if(check(mid))\tr=mid;\n\t\t else\tl=mid;\n\t}\n\tcout<<fixed<<setprecision(12)<<l*100;\n\treturn 0;\n}\n```\n\n",
        "postTime": 1679967417,
        "uid": 699110,
        "name": "kelanjie",
        "ccfLevel": 0,
        "title": "[ABC294F] Sugar Water 2"
    }
]
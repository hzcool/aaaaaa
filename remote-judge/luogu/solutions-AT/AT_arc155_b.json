[
    {
        "content": "# \u9898\u89e3\u2014\u2014[[ARC155B] Abs Abs Function](https://www.luogu.com.cn/problem/AT_arc155_b)\n\n## \u9898\u610f\n\n\u4f60\u6709\u4e00\u4e2a\u96c6\u5408 $S$\uff0c\u8981\u6c42\u652f\u6301\u4e24\u79cd\u64cd\u4f5c\n\n1. \u63d2\u5165\u4e00\u4e2a\u4e8c\u5143\u7ec4 $(a,b)$\n2. \u7ed9\u5b9a\u4e00\u4e2a $c$ \u4e00\u4e2a $d$\uff0c\u67e5\u8be2\n\n$$\n\\min_{c\\le x\\le d}^{(a,b)\\in S}||x-a|-b|\n$$\n\n## \u505a\u6cd5\n\n\u8003\u8651\u8fd9\u4e2a\u5f0f\u5b50\u53d8\u5f62\n\n\u663e\u7136\uff0c\u8fd9\u662f\u4e2a\u5e26\u6709\u7edd\u5bf9\u503c\u7684\u5f0f\u5b50\uff0c\u8003\u8651\u628a\u5b83\u62c6\u5f00\n\n\u5f53 $x\\ge a$ \u65f6\uff1a\n$$\n\\begin{array}{c}\n||x-a|-b|\\\\ = |x-a-b|\\\\ = |x-(a+b)|\\\\ = |a+b-x|\n\\end{array}\n$$\n\n\u5f53 $x<a$ \u65f6\uff1a\n$$\n\\begin{array}{c}\n||x-a|-b|\\\\ = |a-x-b|\\\\ = |a-b-x|\n\\end{array}\n$$\n\n\u6240\u4ee5\u6211\u4eec\u628a\u95ee\u9898\u8f6c\u6362\u6210\u4e86\u6c42\n$$\n\\min_{c\\le x\\le d}^{(a,b)\\in S}\\min\\{|a-b-x|,|a+b-x|\\}\n$$\n\n\u7684\u503c\u3002\n\n\u5f53\u7136\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u770b\u8d77\u6765\u5f88\u4e11\u3002\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u65b0\u7684\u96c6\u5408 $T$\uff1a\n$$\nT=\\{a-b|(a,b)\\in S\\}\\cup\\{a+b|(a,b)\\in S\\}\n$$\n\n\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\u6c42\n$$\n\\min_{c\\le x\\le d}^{y\\in T}|x-y|\n$$\n\n\u7684\u503c\u3002\n\n\u7136\u540e\u5927\u529b\u5206\u8ba8\u3002\n\n\u5982\u679c $\\exists x,c\\le x\\le d\u4e14 x\\in T$\uff0c\u663e\u7136\u7b54\u6848\u4e3a $0$\u3002\n\n\u5426\u5219\uff0c\u8003\u8651\u627e\u5230\n$$\n\\max_{y<c}^{y\\in T}y\n$$\n\u548c\n$$\n\\min_{z>d}^{z\\in T}z\n$$\n\u7136\u540e\u6c42\u51fa\n$$\n\\min\\{c-y,z-d\\}\n$$\n\u5373\u53ef\uff0c\u663e\u7136 $\\min\\{c-y,z-d\\}$ \u5c31\u662f\u6211\u4eec\u8981\u6c42\u7684\u7b54\u6848\u3002\n\n\u8fd9\u4e2a\u5f0f\u5b50\u7684\u503c\u53ef\u4ee5\u65b9\u4fbf\u5730\u7528 $\\text{set}$ \u7ef4\u62a4\u3002\n\n\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int inf=0x3f3f3f3f3f3f3f3f;\nint n,t,a,b;\nset<int>st;\nsigned main(){\n\tscanf(\"%lld\",&n);\n\tst.insert(inf);\n\tst.insert(-inf);\n\tscanf(\"%lld%lld\",&a,&b);\n\tst.insert(a-b);//\u63d2\u5165\u503c\n\tst.insert(a+b);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld%lld%lld\",&t,&a,&b);\n\t\tif(t==1){\n\t\t\tst.insert(a-b);\n\t\t\tst.insert(a+b);\n\t\t}\n\t\telse{\n\t\t\tif((*st.lower_bound(a))<=b)puts(\"0\");\n\t\t\telse{\n\t\t\t\tauto it1=st.upper_bound(a);//\u6c42\u51faT\u4e2d\u5c0f\u4e8ea\u7684\u6700\u5927\u7684\u503c\n\t\t\t\tit1--;\n\t\t\t\tauto it2=st.upper_bound(b);//\u6c42\u51faT\u4e2d\u5927\u4e8eb\u7684\u6700\u5c0f\u7684\u503c\n\t\t\t\tint ans=min(a-*it1,*it2-b);\n\t\t\t\tcout<<ans<<'\\n';\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1678953623,
        "uid": 401461,
        "name": "Augury",
        "ccfLevel": 5,
        "title": "\u9898\u89e3[ARC155B] Abs Abs Function"
    },
    {
        "content": "# \u9898\u610f\n\n\u6709\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\u5bf9\u7684\u96c6\u5408 $T$\uff0c\u521d\u59cb\u65f6 $T={A,B}$\u3002\u6bcf\u6b21\u64cd\u4f5c\uff0c\u8981\u4e48\u5411 $T$ \u4e2d\u52a0\u5165\u4e00\u4e2a\u5143\u7d20\uff0c\u8981\u4e48\u7ed9\u5b9a\u533a\u95f4 $[l,r]$\uff0c\u67e5\u8be2 $\\min\\limits_{x\\in [l,r],(a,b)\\in T} \\lvert\\lvert x-a \\rvert -b \\rvert$\u3002\n$q \\le 2\\cdot 10^5,A,B,l,r \\le 10^9$\n\n# \u9898\u89e3\n\n\u67e5\u8be2\u7684\u4e1c\u897f\u51fd\u6570\u56fe\u50cf\u753b\u51fa\u6765\u662f\u4e00\u4e2a W\u3002\u5176\u5b9e\u53ef\u4ee5\u8f6c\u5316\u6210 $\\min\\{\\lvert a+b-x\\rvert,\\lvert a-b-x\\rvert\\}$\u3002\u521a\u597d\u5b83\u8981\u6c42\u7684\u4e5f\u662f min\uff0c\u6240\u4ee5\u5c31\u62c6\u6210\u4e24\u4e2a\u6570 $a+b$ \u548c  $a-b$\uff0c\u67e5\u8be2\u6539\u4e3a $\\min\\limits_{x\\in [l,r],y\\in T} \\lvert x-y\\rvert$\u3002\n\u8fd9\u4e2a\u4e1c\u897f\u7528 set \u7ef4\u62a4\u4e00\u4e0b\u5c31\u884c\u4e86\u3002\n\n# Code\n\n```cpp\nll q, t, a, b;\nset<ll>s;\nvoid solve() {\n    cin >> q >> a >> b;\n    s.insert(a + b), s.insert(a - b);\n    while (q--) {\n        cin >> t >> a >> b;\n        if (t == 1)s.insert(a + b), s.insert(a - b);\n        else {\n            auto p = s.lower_bound(a);\n            ll ans = MAXN;\n            if (p != s.end()) {\n                int x = *p;\n                if (x <= b)ans = 0;\n                else ans = x - b;\n            }\n            if (p != s.begin()) {\n                p--;\n                int x = *p;\n                ans = min(ans, a - x);\n            }\n            cout << ans << endl;\n        }\n    }\n}\n```",
        "postTime": 1675517662,
        "uid": 407564,
        "name": "Rushroom",
        "ccfLevel": 7,
        "title": "Abs Abs Function"
    }
]
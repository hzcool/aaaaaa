[
    {
        "content": "## \u601d\u8def\n\n\u8003\u8651\u5982\u4e0b\u7684\u4e00\u4e2a\u5e8f\u5217\uff1a\n\n$$1,2,3,4,5$$\n\n\u6211\u4eec\u628a $l=1,r=2\\sim5$ \u7684\u64cd\u4f5c\u90fd\u6267\u884c\u4e00\u904d\uff0c\u5219\u539f\u5e8f\u5217\u53d8\u4e3a\uff1a\n\n$$5,1,2,3,4$$\n\n\u53ef\u4ee5\u53d1\u73b0 $1\\sim4$ \u6bcf\u4e2a\u6570\u90fd\u5411\u540e\u79fb\u4e86\u4e00\u4f4d\uff0c\u7b2c $5$ \u4e2a\u6570\u79fb\u5230\u4e86\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u3002\n\n\u518d\u8bd5\u7740\u628a $l=2,r=3\\sim5$ \u7684\u64cd\u4f5c\u90fd\u6267\u884c\u4e00\u904d\uff0c\u539f\u5e8f\u5217\u53d8\u4e3a\uff1a\n\n$$5,4,1,2,3$$\n\n\u53d1\u73b0\u540c\u6837\u6ee1\u8db3\u521a\u624d\u7684\u6027\u8d28\uff0c\u628a $2\\sim3$ \u6bcf\u4e2a\u6570\u5411\u540e\u79fb\u4e00\u4f4d\uff0c$4$ \u79fb\u5230\u7b2c $2$ \u4e2a\u4f4d\u7f6e\u3002\n\n\u6211\u4eec\u5206\u6790\u4e00\u4e0b\u5bf9\u4e8e $n=5,l=3,r=8$ \u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff1a\n\n$$(1,4),(1,5),(2,3),(2,4),(2,5),(3,4)$$\n\n\u53d1\u73b0 $l=2$ \u7684\u64cd\u4f5c\u662f\u5b8c\u6574\u7684\uff0c\u5373 $r$ \u53d6\u904d\u6240\u6709\u5408\u6cd5\u7684\u6570\u3002\u6240\u4ee5\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a\u7b80\u5355\u7684\u601d\u8def\uff1a\u628a\u5b8c\u6574\u7684\u64cd\u4f5c\u4e00\u8d77\u5904\u7406\uff0c\u518d\u8fdb\u884c\u4e0d\u5b8c\u6574\u7684\u64cd\u4f5c\u5373\u53ef\u3002\n\n## \u5b9e\u73b0\n\n\u9996\u5148\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a $l$\uff0c\u5408\u6cd5\u7684 $r$ \u662f $l+1\\sim n$\uff0c\u6240\u4ee5\u6bcf\u4e00\u4e2a $l$\uff0c\u5171\u6709 $n-l$ \u4e2a\u5408\u6cd5\u7684 $r$\u3002\n\n```cpp\n//\u8bb0\u5f55\u5b8c\u6574\u64cd\u4f5c\u7684\u524d\u7f00\u548c\uff0c\u7528\u6765\u540e\u7eed\u4e8c\u5206\u67e5\u627e\nfor(int i=1;i<=n;i++) sum[i]=sum[i-1]+n-i;\n```\n- \u627e\u5230\u5b8c\u6574\u64cd\u4f5c\u4e4b\u524d\u4e0e\u4e4b\u540e\u7684\u4f4d\u7f6e\n\n```cpp\nint lpos=lower_bound(sum+1,sum+n+1,l)-sum;\nint rpos=lower_bound(sum+1,sum+n+1,r)-sum;\n```\n- \u5904\u7406\u4e0d\u5b8c\u6574\u7684\u64cd\u4f5c\n\n\u65e2\u7136\u6211\u4eec\u5df2\u7ecf\u627e\u5230\u4e24\u6bb5\u7684 $l$ \u4e86\uff0c\u800c\u6bcf\u6bb5\u7684\u4e2a\u6570\u662f $\\Theta(n)$ \u7ea7\u522b\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u66b4\u529b\u4ea4\u6362\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n//\u524d\nfor(int i=1;i<=sum[lpos]-l+1;i++) swap(a[lpos],a[lpos+l-sum[lpos-1]+i-1]);\n//\u540e\nfor(int i=1;i<=r-sum[rpos-1];i++) swap(a[rpos],a[rpos+i]);\n```\n\u4f46\u662f\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0c\u5982\u679c\u9898\u76ee\u7ed9\u51fa\u7684 $l$ \u548c $r$ \u6240\u5bf9\u5e94\u7684\u64cd\u4f5c\u7684 $l$ \u662f\u76f8\u540c\u7684\uff0c\u5373\u5728\u4e00\u4e2a\u5757\u91cc\uff0c\u4e24\u6bb5\u5c31\u4f1a\u51fa\u73b0\u91cd\u53e0\uff0c\u6240\u4ee5\u9700\u8981\u7279\u6b8a\u5904\u7406\u3002\n\n```cpp\n//\u5176\u5b9e\u6bd4\u8f83\u7c7b\u4f3c\u4e8e\u5206\u5757\u7b97\u6cd5\u7684\u5904\u7406\nif(sum[lpos]>=r){\n\t//\u66b4\u529b\u4ea4\u6362\n\tfor(int i=l;i<=r;i++) swap(a[lpos],a[lpos+i-sum[lpos-1]]);\n\tfor(int i=1;i<=n;i++) cout<<a[i]<<' '; cout<<endl;\n\treturn 0;\n}\n```\n\n\n- \u5904\u7406\u5b8c\u6574\u7684\u64cd\u4f5c\n\n\u8fd9\u91cc\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u5355\u4e2a\u5b8c\u6574\u64cd\u4f5c\u4e5f\u662f $\\Theta(n)$\uff0c\u603b\u5171 $\\Theta(n^2)$\uff0c\u4e0d\u80fd\u63a5\u53d7\u3002\n\n\u6240\u4ee5\u8003\u8651\u628a\u591a\u4e2a\u5b8c\u6574\u64cd\u4f5c\u4e00\u8d77\u5904\u7406\u3002\n\n\u56de\u5230\u521a\u624d\u7684\u5e8f\u5217 $1\\sim5$\uff0c\u628a $l=1\\sim3$ \u7684\u5b8c\u6574\u64cd\u4f5c\u90fd\u6267\u884c\u4e00\u904d\uff1a\n\n$$1,2,3,4,5 \\longrightarrow 5,1,2,3,4 \\longrightarrow 5,4,1,2,3 \\longrightarrow 5,4,3,1,2$$\n\n\u53ef\u4ee5\u53d1\u73b0\u8fdb\u884c $l=p\\sim q$ \u7684\u5b8c\u6574\u64cd\u4f5c\u5c31\u662f\u628a\u539f\u5e8f\u5217 $p\\sim q-1$ \u6bcf\u4e2a\u6570\u5411\u540e\u79fb\u52a8 $n-q+1$ \u4f4d\uff0c\u7136\u540e\u5c06 $q\\sim n$ \u6bcf\u4e2a\u6570\u5012\u5e8f\u653e\u8fdb $p\\sim p+(n-q)$ \u6bcf\u4e2a\u4f4d\u7f6e\u91cc\u3002\n\n$$1,2,3,4,5$$\n\n$$?,?,?,?,? \\longrightarrow ?,?,?,1,2 \\longrightarrow 5,4,3,1,2$$\n\n```cpp\n//p=x,q=x+tot-1\nint x=lpos+1,tot=rpos-1-lpos;\nfor(int i=x;i+tot<=n;i++) b[i+tot]=a[i];\nfor(int i=x;i<=x+tot-1;i++) b[i]=a[n-(i-x+1)+1];\nfor(int i=x;i<=n;i++) a[i]=b[i];\n```\n## \u4ee3\u7801\n\n\u6ce8\u610f $l$ \u548c $r$ \u90fd\u662f $\\Theta (n^2)$ \u7ea7\u522b\u7684\uff0c\u6709\u53ef\u80fd\u7206 `int`\uff0c\u6240\u4ee5\u8981\u5f00 `long long`\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define endl '\\n'\n#define int long long\nusing namespace std;\nint n,l,r;\nint a[200005],b[200005],sum[200005];\nsigned main(){\n\tios::sync_with_stdio(false),cin.tie(0),cout.tie(0);\n\tcin>>n>>l>>r;\n    for(int i=1;i<=n;i++) a[i]=i;\n    for(int i=1;i<=n;i++) sum[i]=sum[i-1]+n-i;\n    int lpos=lower_bound(sum+1,sum+n+1,l)-sum;\n    int rpos=lower_bound(sum+1,sum+n+1,r)-sum;\n    if(sum[lpos]>=r){\n        for(int i=l;i<=r;i++) swap(a[lpos],a[lpos+i-sum[lpos-1]]);\n        for(int i=1;i<=n;i++) cout<<a[i]<<' '; cout<<endl;\n        return 0;\n    }\n    for(int i=1;i<=sum[lpos]-l+1;i++) swap(a[lpos],a[lpos+l-sum[lpos-1]+i-1]);\n    int x=lpos+1,tot=rpos-1-lpos;\n    for(int i=x;i+tot<=n;i++) b[i+tot]=a[i];\n    for(int i=x;i<=x+tot-1;i++) b[i]=a[n-(i-x+1)+1];\n    for(int i=x;i<=n;i++) a[i]=b[i];\n    for(int i=1;i<=r-sum[rpos-1];i++) swap(a[rpos],a[rpos+i]);\n    for(int i=1;i<=n;i++) cout<<a[i]<<' '; cout<<endl;\n    return 0;\n}\n```\n",
        "postTime": 1667559064,
        "uid": 444235,
        "name": "Erinyes",
        "ccfLevel": 0,
        "title": "[ABC253G] Swap Many Times \u9898\u89e3"
    }
]
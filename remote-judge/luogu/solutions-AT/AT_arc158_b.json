[
    {
        "content": "[\u8fd9\u7bc7\u535a\u5ba2\u6458\u8981\u597d\u6709\u610f\u601d](https://www.cnblogs.com/LittleTwoawa/p/17211385.html)\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/AT_arc158_b)\n\n\u5148\u5316\u4e00\u4e0b\uff1a\n$$\n\\mathcal F(x_i,x_j,x_k) = \\frac{x_i + x_j + x_k}{x_i x_j x_k} = \\frac{1}{x_i x_j} + \\frac{1}{x_i x_k} + \\frac{1}{x_j x_k}\n$$\n\n\u8bb0 $t = \\frac{1}{x}$\uff0c$\\mathcal G$ \u662f\u5173\u4e8e $t$ \u7684\u51fd\u6570\uff0c\u4e3a $\\mathcal G(t_i,t_j,t_k) = t_i t_j + t_i t_k + t_j t_k$\uff0c\u6709\uff1a\n$$\n\\mathcal G(t_i,t_j,t_k) = \\mathcal F(x_i,x_j,x_k) = (t_i + t_j) t_k + t_i t_j\n$$\n\n\u5bb9\u6613\u5f97\u5230\u5f53\u56fa\u5b9a $t_i$ \u548c $t_j$ \u7684\u65f6\u5019\uff0c$\\mathcal g$ \u662f\u5173\u4e8e $t_k$ \u7684\u4e00\u6b21\u51fd\u6570\u3002\u6240\u4ee5\u5982\u679c\u60f3\u8981\u5f97\u5230\u7b54\u6848\uff0c$t_k$ \u7684\u53d6\u503c\u5fc5\u7136\u662f\u6240\u6709\u6570\u53bb\u6389 $t_i$ \u548c $t_j$ \u540e\u53d6\u6700\u5927\u503c\u548c\u6700\u5c0f\u503c\u3002\n\n\u7c7b\u4f3c\u7684\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230 $t_i$ \u548c $t_j$ \u4e5f\u4e00\u5b9a\u8981\u53d6\u6781\u503c\u3002\u7efc\u4e0a\u6211\u4eec\u5c06 $x$ \u6309\u7167 $\\frac{1}{x}$ \u7684\u5927\u5c0f\u6392\u5e8f\uff0c\u53d6\u4e09\u4e2a\u6700\u5927\u503c\u548c\u4e09\u4e2a\u6700\u5c0f\u503c\uff0c\u8bbe\u4ed6\u4eec\u4ece\u5927\u5230\u5c0f\u4f9d\u6b21\u5206\u522b\u4e3a $a_1,a_2,a_3$ \u548c $b_1,b_2,b_3$\uff0c\u6700\u540e\u7684\u7b54\u6848\u4e00\u5b9a\u5728 $\\mathcal F(a_1,a_2,a_3)$\uff0c$\\mathcal F(a_1,a_2,b_3)$\uff0c$\\mathcal F(a_1,b_2,b_3)$\uff0c$\\mathcal F(b_1,b_2,b_3)$ \u4e2d\u3002\u590d\u6742\u5ea6\u74f6\u9888\u5728\u4e8e\u6392\u5e8f\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\n \nnamespace LgxTpre\n{\n\tstatic const int MAX=200010;\n\tstatic const int INF=4557430888798830399;\n\tstatic const double inf=2147483647.0;\n\tstatic const int mod=998244353;\n\t\n\tint n,x;\n\tdouble num[MAX];\n\tdouble maxx,minx;\n\t\n\tinline double func(double a,double b,double c) {return (a+b+c)/(a*b*c);}\n\tinline void cmin(double &a,double b) {a=a<b?a:b;}\n\tinline void cmax(double &a,double b) {a=a>b?a:b;}\n\t\n\tinline void lmy_forever()\n\t{\n\t\tcin>>n;\n\t\tfor(int i=1;i<=n;++i) cin>>num[i];\n\t\tsort(num+1,num+1+n,[](double x,double y)\n\t\t{\n\t\t\treturn 1/x<1/y;\n\t\t});\n\t\tminx=inf,maxx=-inf;\n\t\tcmin(minx,func(num[1],num[2],num[3])),cmin(minx,func(num[1],num[2],num[n])),\n\t\tcmin(minx,func(num[1],num[n-1],num[n])),cmin(minx,func(num[n-2],num[n-1],num[n]));\n\t\tcmax(maxx,func(num[1],num[2],num[3])),cmax(maxx,func(num[1],num[2],num[n])),\n\t\tcmax(maxx,func(num[1],num[n-1],num[n])),cmax(maxx,func(num[n-2],num[n-1],num[n]));\n\t\tcout<<fixed<<setprecision(15)<<minx<<endl;\n\t\tcout<<fixed<<setprecision(15)<<maxx<<endl;\n\t\treturn;\n\t}\n}\n \nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tLgxTpre::lmy_forever();\n\treturn (0-0);\n}\n```",
        "postTime": 1678690606,
        "uid": 739297,
        "name": "forqprever",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\uff1a\u3010ARC158B\u3011 Sum-Product Ratio"
    },
    {
        "content": "## \u601d\u8def\n\n\u6211\u4eec\u5145\u5206\u53d1\u626c\u4eba\u7c7b\u667a\u6167\uff1a\n\n\u5148\u628a\u6240\u6709\u6570\u6392\u4e2a\u5e8f\u3002\n\n\u6839\u636e\u6570\u5b66\u76f4\u89c9\uff0c\u6211\u4eec\u53d6\u5230\u7684\u503c\u80af\u5b9a\u6bd4\u8f83\u201c\u6781\u201d\uff0c\u8981\u4e48\u6781\u5927\u6781\u5c0f\uff0c\u8981\u4e48\u6781\u9760\u8fd1\u96f6\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u53d6\u9171\u7d2b\u7684 12 \u4e2a\u6570\u6765\u8ba1\u7b97\u7b54\u6848\u3002\n\n\u8fd9\u6837\u901f\u5ea6\u5feb\u5f97\u98de\u8d77\uff0c\u5728 $n=200000$ \u65f6\u90fd\u53ef\u4ee5\u5728 25ms \u5185\u8279\u8fc7\u3002\n\n\uff08\u5176\u5b9e\u53ef\u4ee5\u5206\u8ba8\uff0c\u4f46\u662f\u5bb9\u6613\u5c11\u60c5\u51b5\uff0c\u8d5b\u65f6\u6328\u7f5a\u4e86\uff09\n\n## code\n\n```cpp\n#include<stdio.h>\n#include<algorithm>\n#include<vector>\nusing namespace std;\ninline char nc()\n{\n\tstatic char buf[99999],*l,*r;\n\treturn l==r&&(r=(l=buf)+fread(buf,1,99999,stdin),l==r)?EOF:*l++;\n}\ninline void read(int&x)\n{\n\tbool t=0;char c=nc();for(;c<'0'||'9'<c;t|=c=='-',c=nc());\n\tfor(x=0;'0'<=c&&c<='9';x=(x<<3)+(x<<1)+(c^48),c=nc());if(t)x=-x;\n}\nint n,x[200009];double minn(1e12),maxn(-1e12);vector<int>a;\ninline void upd(const double&x){minn=min(minn,x);maxn=max(maxn,x);}\ninline void upd(const int&i,const int&j,const int&k)\n\t{upd((double)(i+j+k)/i/j/k);}\nmain()\n{\n\tread(n);for(int i=0;i<n;read(x[i++]));sort(x,x+n);\n\tint i=lower_bound(x,x+n,0)-x;\n\tif(i<=6)for(int j=0;j<i;a.emplace_back(x[j++]));\n\telse a.emplace_back(x[0]),a.emplace_back(x[1]),a.emplace_back(x[2]),\n\t\ta.emplace_back(x[i-3]),a.emplace_back(x[i-2]),a.emplace_back(x[i-1]);\n\tif(n-i<=6)for(int j=i;j<n;a.emplace_back(x[j++]));\n\telse a.emplace_back(x[i]),a.emplace_back(x[i+1]),a.emplace_back(x[i+2]),\n\t\ta.emplace_back(x[n-3]),a.emplace_back(x[n-2]),a.emplace_back(x[n-1]);\n\tfor(int i=0;i<a.size();++i)for(int j=i+1;j<a.size();++j)\n\t\tfor(int k=j+1;k<a.size();++k)upd(a[i],a[j],a[k]);\n\tprintf(\"%.16lf\\n%.16lf\",minn,maxn);\n}\n```\n\n",
        "postTime": 1678714520,
        "uid": 90693,
        "name": "_\u2022\u0301\u3078\u2022\u0301\u256c_",
        "ccfLevel": 7,
        "title": "AT_arc158_b [ARC158B] Sum-Product Ratio \u9898\u89e3"
    },
    {
        "content": "**\u7f29\u5c0f\u8303\u56f4**\uff1a\u8003\u8651\u73b0\u5728\u5df2\u77e5 $x_i, x_j$\uff0c\u6211\u4eec\u5e0c\u671b\u77e5\u9053\u600e\u6837\u7684 $x_k$ \u53ef\u4ee5\u6210\u4e3a\u4e00\u4e2a\u8f83\u4f18\u7684\u89e3\u3002\n\n\u8003\u8651\u5c06\u539f\u5f0f\u6539\u5199\u4e3a $\\frac{\\frac{1}{x_i} + \\frac{1}{x_j}}{x_k} + \\frac{1}{x_i x_j}$\uff0c\u5219\u968f\u7740 $\\frac{1}{x_i} + \\frac{1}{x_j}$ \u7684\u53d8\u5316\uff0c$x_k$ \u53ef\u80fd\u4f1a\u53d6\u5230\u6b63 / \u8d1f\u6570\u4e2d\u7edd\u5bf9\u503c\u6700\u5c0f / \u5927\u4e14\u8fd8\u53ef\u4ee5\u9009\u7684\u503c\u3002\n\n\u5c06\u8be5\u7ed3\u8bba\u63a8\u800c\u5e7f\u4e4b\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\uff1a\n\n- $x_i, x_j, x_k$ \u53ea\u4f1a\u5728\u6b63 / \u8d1f\u6570\u4e2d\u7edd\u5bf9\u503c\u6700\u5c0f / \u5927\u7684 $3$ \u4e2a\u503c\u4e2d\u4ea7\u751f\uff08\u56e0\u4e3a\u4f60\u6700\u591a\u53ef\u80fd\u4e09\u4e2a\u6570\u5168\u6b63 / \u8d1f\uff09\u3002\n\n\u4e8e\u662f\u6211\u4eec\u628a\u8fd9 $\\leq 12$ \u4e2a\u503c\u6293\u51fa\u6765\u6c42 $\\min/\\max$ \u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$\u3002~~\u4e0d\u8fc7\u6211\u5077\u61d2\u5199\u4e86\u4e2a $O(n \\log n)$ \u7684\u6392\u5e8f\uff08~~\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <cstdio>\n\nusing namespace std;\n\nint x[200007], pos[17];\n\ninline double calc(int i, int j, int k){\n\treturn 1.0 * (i + j + k) / i / j / k;\n}\n\nint main(){\n\tint n, m = 0, up1, up2, k = 0;\n\tdouble ans1 = 1e9, ans2 = -1e9;\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++){\n\t\tcin >> x[i];\n\t}\n\tsort(x + 1, x + n + 1);\n\twhile (m < n && x[m + 1] < 0) m++;\n\tup1 = min(m, 3);\n\tfor (int i = 1; i <= up1; i++){\n\t\tpos[++k] = i;\n\t\tpos[++k] = m - i + 1;\n\t}\n\tup2 = min(n - m, 3);\n\tfor (int i = 1; i <= up2; i++){\n\t\tpos[++k] = i + m;\n\t\tpos[++k] = n - i + 1;\n\t}\n\tfor (int i = 1; i <= k; i++){\n\t\tfor (int j = i + 1; j <= k; j++){\n\t\t\tif (pos[i] != pos[j]){\n\t\t\t\tfor (int y = j + 1; y <= k; y++){\n\t\t\t\t\tif (pos[i] != pos[y] && pos[j] != pos[y]){\n\t\t\t\t\t\tdouble val = calc(x[pos[i]], x[pos[j]], x[pos[y]]);\n\t\t\t\t\t\tif (ans1 > val) ans1 = val;\n\t\t\t\t\t\tif (ans2 < val) ans2 = val;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%.15lf\\n\", ans1);\n\tprintf(\"%.15lf\", ans2);\n\treturn 0;\n}\n```",
        "postTime": 1678789542,
        "uid": 201007,
        "name": "Leasier",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 [ARC158B] Sum-Product Ratio"
    },
    {
        "content": "\u6211\u4eec\u53d1\u73b0\uff0c\u7b54\u6848\u7684\u5927\u5c0f\u53ea\u4e0e\u4ee5\u4e0b\u4e24\u4e2a\u56e0\u7d20\u6709\u5173\uff1a\n\n- \u7b54\u6848\u7684\u6b63\u8d1f\u6027\n- \u7b54\u6848\u7684\u7edd\u5bf9\u503c\n\n\u56e0\u6b64\u6211\u4eec\u5f97\u51fa\u7ed3\u8bba\uff1a$x_i,x_j,x_k$ \u53ea\u4f1a\u53d6\u5230\u8d1f\u6570\u7684\u524d\u4e09\u5927\u3001\u8d1f\u6570\u7684\u524d\u4e09\u5c0f\u3001\u6b63\u6570\u7684\u524d\u4e09\u5927\u3001\u6b63\u6570\u7684\u524d\u4e09\u5c0f\u3002\u4e8e\u662f\u76f4\u63a5\u6392\u5b8c\u5e8f\u627e\u5230\u8fd9\u4e9b\u6570\u4e4b\u540e\u66b4\u529b\u679a\u4e3e\u5c31\u884c\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<vector>\nusing namespace std;\ndouble x[200005];\nvector<double> a;\nbool cmp(double a,double b){\n\treturn a>b;\n}\nint main(){\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%lf\",&x[i]);\n\tdouble mx=-1e15,mn=1e15;\n\tsort(x+1,x+n+1);\n\tint id=0;\n\tfor(int i=1;i<n;i++)\n\t\tif(x[i]*x[i+1]<0){\n\t\t\tid=i;\n\t\t\tbreak;\n\t\t}\n\tif(!id){\n\t\ta.push_back(x[1]);\n\t\ta.push_back(x[2]);\n\t\ta.push_back(x[3]);\n\t\tif(n>3) a.push_back(x[n]);\n\t\tif(n-1>3) a.push_back(x[n-1]);\n\t\tif(n-2>3) a.push_back(x[n-2]);\n\t}\n\telse{\n\t\ta.push_back(x[1]);\n\t\ta.push_back(x[2]);\n\t\ta.push_back(x[3]);\n\t\tif(id>3) a.push_back(x[id]);\n\t\tif(id-1>3) a.push_back(x[id-1]);\n\t\tif(id-2>3) a.push_back(x[id-2]);\n\t\tif(id+1<=n&&id+1>3) a.push_back(x[id+1]);\n\t\tif(id+2<=n&&id+2>3) a.push_back(x[id+2]);\n\t\tif(id+3<=n&&id+3>3) a.push_back(x[id+3]);\n\t\tif(id+3<n) a.push_back(x[n]);\n\t\tif(id+3<n-1) a.push_back(x[n-1]);\n\t\tif(id+3<n-2) a.push_back(x[n-2]);\n\t}\n\tint lst=a.size()-1;\n\tfor(int i=0;i<=lst;i++)\n\t\tfor(int j=0;j<=lst;j++)\n\t\t\tfor(int k=0;k<=lst;k++){\n\t\t\t\tif(i==j||j==k||i==k) continue;\n\t\t\t\tmx=max((a[i]+a[j]+a[k])/(a[i]*a[j]*a[k]),mx);\n\t\t\t\tmn=min((a[i]+a[j]+a[k])/(a[i]*a[j]*a[k]),mn);\n\t\t\t}\n\tprintf(\"%.15lf\\n%.15lf\",mn,mx);\n\treturn 0;\n}\n```\n",
        "postTime": 1678683308,
        "uid": 449457,
        "name": "IYSY2009I",
        "ccfLevel": 0,
        "title": "solution-at-arc158-b"
    },
    {
        "content": "\u9898\u76ee\u9898\u9762\u548c\u9898\u610f\u90fd\u5341\u5206\u7b80\u5355\u3002\n\n\u9996\u5148\uff0c\u4e0d\u96be\u60f3\u5230\uff0c\u6c42\u6700\u5927\u548c\u6700\u5c0f\u503c\uff0c\u90a3\u4e48\u5927\u6982\u7387\u662f\u53d6\u6781\u503c\u3002\n\n\u6240\u4ee5\uff0c\u5c1d\u8bd5\u53d6\u51fa\n- \u8d1f\u6570\u4e2d\u6700\u5c0f\u7684\u4e09\u4e2a\uff0c\u6700\u5927\u7684\u4e09\u4e2a\u3002\n- \u6b63\u6570\u4e2d\u6700\u5c0f\u7684\u4e09\u4e2a\uff0c\u6700\u5927\u7684\u4e09\u4e2a\u3002\n\n\u8fd9\u65f6\u679a\u4e3e\u7684\u6570\u636e\u91cf\u5df2\u7ecf\u5f88\u5c0f\u4e86\u3002\u518d\u66b4\u529b\u679a\u4e3e\u5373\u53ef\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a(~~\u8d5b\u65f6\u4e11\u964b\u7684\u4ee3\u7801~~)\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define open(x) freopen(x \".in\", \"r\", stdin);freopen(x \".out\", \"w\", stdout);\n#define db double\ninline int read(){int f=1;int x=0;char c=getchar();while(c<'0'||c>'9'){if(c=='-'){f=-f;}c=getchar();}while(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+(c^48);c=getchar();}return x*f;}\ninline void wr(int x){if(x<0){putchar('-');x=-x;}if(x>9){wr(x/10);}putchar(x%10+'0');}\n\nint T;\nint n;\ndb a[1000050];\ndb f[1000050];\ndb z[1000050];\n\ninline void ok(){\n\tcin >> n; \n\tint cnt1 = 0;\n\tint cnt2 = 0;\n\tfor(int i = 1 ; i <= n ;++i){\n\t\tcin >> a[i];\n\t\tif(a[i] < 0) f[++cnt1] = a[i];\n\t\telse z[++cnt2] = a[i];\n\t} \n\tdb ans = -1e9 - 7;\n\tdb minans = 1e9 + 7;  \n\tsort(f + 1 , f + cnt1 + 1);           \n\tsort(z + 1 , z + cnt2 + 1 , greater<int>());\n\tif(cnt1 >= 3)ans = max({ans, (f[1] + f[2] + f[3]) / (f[1] * f[2] * f[3]) , (f[cnt1] + f[cnt1 - 1] + f[cnt1 - 2]) / (f[cnt1] * f[cnt1 - 1] * f[cnt1 -2])});\n\tif(cnt2 >= 1 && cnt1 >= 2) ans = max({ans , (z[1] + f[1] + f[2]) / (z[1] * f[1] * f[2]) , (z[1] + f[cnt1] + f[cnt1 - 1]) / (z[1] * f[cnt1] * f[cnt1-1]) , (z[cnt2] + f[1] + f[2]) / (z[cnt2] * f[1] * f[2]) , (z[cnt2] + f[cnt1] + f[cnt1 - 1]) / (z[cnt2] * f[cnt1] * f[cnt1-1])});\n\tif(cnt2 >= 2 && cnt1 >= 1) ans = max({ans , (z[cnt2] + z[cnt2 - 1] + f[1]) / (z[cnt2] * z[cnt2 - 1] * f[1]) , (z[cnt2] + z[cnt2 - 1] + f[cnt1]) / (z[cnt2] * z[cnt2 - 1] * f[cnt1]) , (z[1] + z[2] + f[1]) / (z[1] * z[2] * f[1]) , (z[1] + z[2] + f[cnt1]) / (z[1] * z[2] * f[cnt1])}); \n\tif(cnt2 >= 3) ans = max({ans , (z[cnt2] + z[cnt2 - 1] + z[cnt2 - 2]) / (z[cnt2 - 1] * z[cnt2] * z[cnt2 - 2]) , (z[1] + z[2] + z[3]) / (z[1] * z[2] * z[3])});\n\t\n\tif(cnt2 >= 3)minans = min({minans, (z[1] + z[2] + z[3]) / (z[1] * z[2] * z[3]) , (z[cnt2] + z[cnt2 - 1] + z[cnt2 -2]) / (z[cnt2] * z[cnt2 - 1] * z[cnt2 -2]) });\n\tif(cnt1 >= 1 && cnt2 >= 2) minans = min({minans , (f[1] + z[1] + z[2]) / (f[1] * z[1] * z[2]) , (f[cnt1] + z[1] + z[2]) / (f[cnt1] * z[1] * z[2]) , (f[1] + z[cnt2] + z[cnt2 - 1]) / (f[1] * z[cnt2] * z[cnt2 - 1]) , (f[cnt1] + z[cnt2] + z[cnt2 - 1]) / (f[cnt1] * z[cnt2] * z[cnt2 - 1])});\n\tif(cnt1 >= 2 && cnt2) minans = min({minans , (f[1] + f[2] + z[1]) / (f[1] * f[2] * z[1]) , (f[1] + f[2] + z[cnt2]) / (f[1] * f[2] * z[cnt2]) , (f[cnt1] + f[cnt1 - 1] + z[1]) / (f[cnt1] * f[cnt1 - 1] * z[1]) , (f[cnt1] + f[cnt1 - 1] + z[cnt2]) / (f[cnt1] * f[cnt1 - 1] * z[cnt2])}); \n\tif(cnt1 >= 3) minans = min({minans , (f[1] + f[2] + f[3]) / (f[1] * f[2] * f[3]) , (f[cnt1] + f[cnt1 - 1] + f[cnt1 - 2]) / (f[cnt1] * f[cnt1 - 1] * f[cnt1 - 2])});\n\tif(cnt1 && cnt2) minans = min({minans , (z[1] + f[1] + z[cnt2]) / (z[1] * f[1] * z[cnt2])});\n\tif(cnt1 >= 2 && cnt2) minans = min(minans , (f[1] + f[cnt1] + z[1]) / (f[1] * f[cnt1] * z[1]));\n\tcout << fixed << setprecision(12) << minans << \"\\n\";\n\tcout << fixed << setprecision(12) << ans << \"\\n\";\n\treturn;\n}\n\nsigned main(){\n\t//open(\"1\");\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tok();\n\treturn 0;\n}\n```\n",
        "postTime": 1678670367,
        "uid": 147761,
        "name": "qmh20061363",
        "ccfLevel": 0,
        "title": "AT_arc158_b"
    }
]
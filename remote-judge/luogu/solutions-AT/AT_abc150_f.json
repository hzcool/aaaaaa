[
    {
        "content": "\u5148\u8003\u8651 $k=0$ \u65f6\u600e\u4e48\u505a\u3002\n\n\u8003\u8651\u5bf9\u539f\u5e8f\u5217\u8fdb\u884c\u201c\u5dee\u5206\u201d\uff08\u5373\u53d6\u76f8\u90bb\u4e24\u4e2a\u6570\u7684\u5f02\u6216\u503c\uff09\uff0c\u6211\u4eec\u5f97\u5230\u4e24\u4e2a\u65b0\u7684\u5e8f\u5217 $a1,b1$\u3002\n\n\u601d\u8003\u5e8f\u5217 $a1$ \u7684\u6027\u8d28\uff1a\u6211\u4eec\u53d1\u73b0\uff0c\u5c06\u5e8f\u5217 $a$ \u6574\u4f53\u5f02\u6216\u4e0a\u4e00\u4e2a\u6570\uff0c\u5e8f\u5217 $a1$ \u59cb\u7ec8\u4e0d\u53d8\uff01\n\n\u56e0\u6b64\u5f53 $k=0$ \u65f6\uff0c\u6709\u89e3\u7684\u60c5\u51b5**\u5f53\u4e14\u4ec5\u5f53**\u5e8f\u5217 $a1$ \u548c $b1$ \u662f\u76f8\u540c\u7684\uff0c\u6b64\u65f6\u6211\u4eec\u53d6\u7684 $x$ \u4e3a $a_0\\operatorname{xor} b_0$\u3002\n\n\u63a8\u5e7f\u5230 $0\\leq k<n$ \u7684\u60c5\u51b5\u3002\n\n\u8003\u8651\u500d\u957f $a$ \u6570\u7ec4\uff0c\u65ad\u73af\u6210\u94fe\uff0c\u7ee7\u7eed\u53d6 $a1$ \u4e3a\u5e8f\u5217 $a$ \u76f8\u90bb\u4e24\u4e2a\u6570\u7684\u5f02\u6216\u503c\uff0c\u53d6 $b1$ \u4e3a\u5e8f\u5217 $b$ \u76f8\u90bb\u4e24\u4e2a\u6570\u7684\u5f02\u6216\u503c\u3002\u5982\u679c\u5b58\u5728\u4e00\u4e2a $i$ \u4f7f\u5f97 $k=i$ \u6709\u89e3\uff0c**\u5f53\u4e14\u4ec5\u5f53** $b1$ \u662f $a1$ \u4ece\u4e0b\u6807 $i$ \u5f00\u59cb\u7684\u4e00\u6bb5**\u8fde\u7eed\u5b50\u4e32**\uff0c\u540c\u6837\u7684\uff0c\u6b64\u65f6\u6211\u4eec\u53d6\u7684 $x$ \u4e3a $a_i\\operatorname{xor} b_0$\u3002\n\n\u90a3\u4e48\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u5b57\u7b26\u4e32\u5339\u914d\u95ee\u9898\uff0c\u666e\u901a $\\rm KMP$ \u5339\u914d\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff08\u6ce8\u610f\u4ee3\u7801\u91cc\u7684\u4e0b\u6807\u4ece $1$ \u5f00\u59cb\uff09\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,a[400005],a1[400005],b[400005],b1[400005],kmp[400005];\nvector<int> ans;\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t\ta[i+n]=a[i];\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>b[i];\n\t}\n\tfor(int i=1;i<2*n;i++)\n\t{\n\t\ta1[i]=a[i]^a[i+1];\n\t\tb1[i]=b[i]^b[i+1];\n\t}\n\tint j=0;\n\tb1[n]=-2;\n\tfor(int i=2;i<n;i++)\n\t{\n\t\twhile(j&&b1[i]!=b1[j+1]) j=kmp[j],cerr<<j<<\"\\n\";\n\t\tif(b1[i]==b1[j+1]) j++;\n\t\tkmp[i]=j;\n\t}\n\tj=0;\n\ta1[2*n]=-1;\n\tfor(int i=1;i<2*n;i++)\n\t{\n\t\twhile(j&&b1[j+1]!=a1[i]) j=kmp[j];\n\t\tif(b1[j+1]==a1[i]) j++;\n\t\tif(j==n-1) ans.emplace_back(i-j+1);\n\t}\n\tfor(auto i:ans)\n\t{\n\t\tif(i==n+1) break;\n\t\tcout<<i-1<<\" \"<<(a[i]^b[1])<<\"\\n\";\n\t}\n}\n```",
        "postTime": 1670226352,
        "uid": 122836,
        "name": "World_Creater",
        "ccfLevel": 0,
        "title": "[ABC150F] Xor Shift"
    },
    {
        "content": "\u6765\u8fd9\u91cc\u4ecb\u7ecd\u4e71\u641e\u505a\u6cd5\u3002\n\n\u6211\u4e0d\u4f1a\u5b57\u7b26\u4e32\u5440\uff0c\u6211\u4e0d\u4f1a Z \u51fd\u6570\u5440\uff0c\u4f46\u662f\u6211\u4f1a\u66b4\u529b\uff01\uff01\uff01\uff01\n\n\u6211\u4eec\u53ef\u4ee5\u628a $k$ \u89c6\u4e3a\u5411\u53f3\u5faa\u73af\u4f4d\u79fb $k$ \u4f4d\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u628a $a$ \u6570\u7ec4\u590d\u5236\u4e00\u4efd\uff0c\u7136\u540e\u5bfb\u627e\u4ed6\u7684\u5934\uff0c\u8fdb\u884c\u5339\u914d\u3002\n\n\u90a3\u4e48\u600e\u4e48\u5339\u914d\u624d\u6bd4\u8f83\u4f18\u79c0\u5462\uff1f\n\n\u8fd9\u4e2a\u65f6\u5019\u4f1a\u6709\u5404\u79cd\u5404\u6837\u795e\u5947\u7684\u505a\u6cd5\uff0c\u4f46\u662f\u6211\u559c\u6b22\u4e71\u641e\u3002\n\n\u4e8e\u662f\u6211\u4eec\u628a\u5934\u540e\u9762\u7684 $1000$ \u4f4d\u7ed9\u53d6\u51fa\u6765\uff0c\u5c3e\u5df4\u524d\u9762\u7684 $1000$ \u4f4d\u7ed9\u62ff\u51fa\u6765\uff0c\u7136\u540e\u66b4\u529b\u6c42\u4e00\u4e0b\u5f02\u6216\u503c\uff0c\u8fd9\u6837\u5bf9\u7684\u6982\u7387\u975e\u5e38\u7684\u9ad8\uff0c\u53ea\u6709\u4e00\u4e2a\u70b9 WA \u4e86\u3002\n\n\u8003\u8651\u4f18\u5316\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec\u60f3\u5bfb\u627e\u7684\u5c31\u662f\u4e00\u4e32\u5b50\u4e32\u5f02\u6216\u67d0\u4e2a $x$ \u4e4b\u540e\u548c\u53e6\u4e00\u6bb5\u5b50\u4e32\u7684\u5dee\u522b\uff0c\u8fd9\u79cd\u53ef\u4ee5\u76f4\u63a5\u4e0a\u5f02\u6216\u524d\u7f00\u548c\u3002\n\n\u5177\u4f53\u7684\u6211\u4eec\u53ef\u4ee5\u53d8\u6210 $a_l \\oplus a_{l+1} \\oplus a_{l+2} \\oplus \\cdots \\oplus a_r=b_1 \\oplus x \\oplus b_2 \\oplus x \\oplus \\cdots \\oplus b_n$\uff0c\u7136\u540e\u8fd9\u4e1c\u897f\u5f02\u6216\u524d\u7f00\u548c\u4e00\u4e0b\u5c31\u53ef\u4ee5\u4e86\uff01\n\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\nconst int INF=5e5+5;\nint a[INF],b[INF],n,sum1[INF],sum[INF];\nsigned main()\n{\n\tsrand(time(0));\n\tios::sync_with_stdio(false);\n\tcin>>n;\n\tfor (int i=1;i<=n;i++) cin>>a[i];\n\tfor (int i=n+1;i<=n*2;i++) a[i]=a[i-n];\n\tfor (int i=1;i<=n;i++) cin>>b[i];\n\t\n\tfor (int i=1;i<=n*2;i++) sum[i]=sum[i-1]^a[i];\n\tfor (int i=1;i<=n;i++) sum1[i]=sum1[i-1]^b[i];\n\t\n\tfor (int l=1;l<=n;l++) {\n\t\tint fl=0,la=-1;\n\t\tfor (int r=l;r<=min(l+n-1,l+1);r++) {\n\t\t\tif (la==-1) la=b[r-l+1]^a[r];\n\t\t\telse if (la!=(b[r-l+1]^a[r])) fl=1;\n\t\t\tif (fl) break;\n\t\t}\n\t\t\n//\t\tcout<<(la^sum1[n])<<\" \"<<(sum[l+n-1]^sum[l-1])<<\" fad?\\n\"; \n\t\tint K=la;\n\t\tif (n&1) ;\n\t\telse K=0;\n\t\tif ((K^sum1[n])!=(sum[l+n-1]^sum[l-1])) continue;\n\t\t\n\t\tfor (int r=l+n-1;r>=max(l+n-1-1,l);r--) {\n\t\t\tif (la==-1) la=b[r-l+1]^a[r];\n\t\t\telse if (la!=(b[r-l+1]^a[r])) fl=1;\n\t\t\tif (fl) break;\n\t\t}\n\t\t\n\t\tif ((K^sum1[n])!=(sum[l+n-1]^sum[l-1])) continue;\n\t\tfor (int T=1;T<=1;T++) {\n\t\t\tint r=rand()%n+l;\n\t\t\tif (la==-1) la=b[r-l+1]^a[r];\n\t\t\telse if (la!=(b[r-l+1]^a[r])) fl=1;\n\t\t\tif (fl) break;\n\t\t}\n\t\tif ((K^sum1[n])!=(sum[l+n-1]^sum[l-1])) continue;\n\t\tif (!fl) cout<<l-1<<\" \"<<la<<\"\\n\";\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1667177174,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "AT_abc150_f"
    },
    {
        "content": "\u7a0d\u5fae\u6709\u4e00\u70b9\u70b9\u6539\u52a8\u7684 **Z \u51fd\u6570**\u3002\n\n\uff08KMP \u5e94\u8be5\u4e5f\u53ef\u4ee5\u505a\uff0c\u4f46\u662f\u4e2a\u4eba\u611f\u89c9 Z \u51fd\u6570\u597d\u7406\u89e3\u3002\n\n## \u505a\u6cd5\n\n### \u524d\u7f6e\u829d\u58eb\n\n[Z \u51fd\u6570](https://oi-wiki.org/string/z-func/)\n\n### \u601d\u8def\n\n\u770b\u5230 **Shift**\uff0c\u9996\u5148\u60f3\u5230\u628a $a$ \u590d\u5236\u4e00\u904d\u3002\n\n\u603b\u6240\u5468\u77e5\uff0c\u505a Z \u51fd\u6570\u65f6\uff0c\u9700\u8981\u628a\u6587\u672c\u4e32\u548c\u5339\u914d\u4e32\u62fc\u5728\u4e00\u8d77\uff0c\u4e2d\u95f4\u52a0\u4e00\u4e2a\u5947\u602a\u7684\u5b57\u7b26\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u62fc\u6210\u4e86\u8fd9\u6837\u4e00\u4e2a\u4e32\uff1a\n\n$b+(-1)+a+a$\uff08 $+$ \u8868\u793a\u62fc\u63a5\uff09\n\n\u5728\u8fd9\u4e2a\u9898\u76ee\u4e2d\uff0c\u662f\u5426\u4e5f\u6ee1\u8db3 Z \u51fd\u6570\u7684\u6027\u8d28\u5462\uff1f\n\n\u6211\u4eec\u518d\u56de\u987e\u4e00\u904d Z \u51fd\u6570\u7684\u6269\u5c55\u8fc7\u7a0b\u3002\n\n\u5982\u679c\u5df2\u77e5\uff1a\u5bf9\u4e8e\u4efb\u4f55 $l \\le i \\le r$\uff0c$a_i \\oplus b_i=x$\u3002\n\n- \u6269\u5c55\u5230 $i=r+1$\uff1a\u5982\u679c $a_{r+1} \\oplus b_{r+1}$\uff0c\u90a3\u4e48\u663e\u7136\uff0c$z_i$ \u53ef\u4ee5 $+1$\u3002\n\n- \u6269\u5c55\u5230 $j(j\\le r)$\uff1a\u540c\u7406\uff0c\u4e5f\u662f\u53ef\u4ee5\u62d3\u5c55\u7684\u3002\u4e0d\u61c2\u5f97\u5de6\u8f6c[\u8fd9\u91cc](https://oi-wiki.org/string/z-func/#_3)\u3002\n\n\u6240\u4ee5\uff0c\u8fd9\u9053\u9898\u91cc $XOR$ \u7684\u6027\u8d28\u662f\u5b8c\u5168\u6ee1\u8db3 Z \u51fd\u6570\u7684\u3002 \n\n\u7136\u540e\u5c31\u53ef\u4ee5\u6109\u5feb\u5730\u8dd1\u4e00\u904d Z \u51fd\u6570\u4e86\u3002\n\n### Code\n\n```cpp\n/*\n * @Description: I want to be the weakest vegetable in the world!\n * @Author: CGBoy\n * @Date: 2022-03-06 09:52:33\n */\n#include <bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define forr(i,a,n) for(int i=a;i<=n;i++)\n#define rep(i,n) forr(i,0,n-1)\n#define repp(i,n) forr(i,1,n)\n#define pb push_back\n#define mp make_pair\n#define init(a,i) memset(a,i,sizeof(a))\n#define fi first\n#define se second\n#define mod 1000000007\n#define MOD 998244353\n#define MAXN 0x3f3f3f3f\nint T_, case_;\nint n, a[200005], b[200005], s[700005];\nint z[700005];\nvoid Z() {\n    int l = 0, r = -1;\n    int siz = n + n + n + 1;\n    forr(i, 1, siz - 1) {\n        if (i <= r) {\n            if (i + z[i - l] - 1 < r)z[i] = z[i - l];\n            else {\n                z[i] = r - i + 1;\n                while (i + z[i] < siz && (s[i + z[i]] ^ s[z[i]]) == (s[i + z[i] - 1] ^ s[z[i] - 1]))z[i]++;\n            }\n        }\n        else {\n            z[i] = 1;\n            while (i + z[i] < siz && (s[i + z[i]] ^ s[z[i]]) == (s[i + z[i] - 1] ^ s[z[i] - 1]))z[i]++;\n        }\n        if (i + z[i] - 1 > r)l = i, r = i + z[i] - 1;\n    }\n}\nvoid solve() {\n    cin >> n;\n    rep(i, n)cin >> a[i];\n    rep(i, n)cin >> b[i];\n    rep(i, n)s[i] = b[i];\n    s[n] = -1;\n    rep(i, n)s[n + 1 + i] = s[n + n + 1 + i] = a[i];\n    Z();\n    forr(i, n + 1, n + n) {\n        if (z[i] == n) {\n            cout << i - n - 1 << ' ' << (a[i - n - 1] ^ b[0]) << endl;\n        }\n    }\n}\nint main() {\n    T_ = 1;\n\n    for (case_ = 1;case_ <= T_;case_++)solve();\n    return 0;\n}\n```\n",
        "postTime": 1646533190,
        "uid": 407564,
        "name": "Rushroom",
        "ccfLevel": 7,
        "title": "AT4833 [ABC150F] Xor Shift"
    },
    {
        "content": "\u7531\u5f02\u6216\u7684\u6027\u8d28\u53ef\u4ee5\u5f97\u5230 $x=a_{(k+i)\\%n}\\  \\text{xor} \\ b_i$\n\n\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\u90a3\u4e48\u5fc5\u7136\u6709 $a_{k\\% n}\\  \\text{xor} \\ b_0=a_{(k+1)\\% n}\\  \\text{xor} \\ b_1=...=a_{(k+n-1)\\% n}\\  \\text{xor} \\ b_{n-1}$\n\n\u4e5f\u5c31\u662f $a_{k\\% n}\\  \\text{xor} \\ a_{(k+1)\\% n}=b_0\\  \\text{xor} \\ b_1...$\n\n\u4e8e\u662f\u8bb0 $c_i=a_{i\\%n}\\  \\text{xor} \\ a_{(i+1)\\% n},d_i=b_i\\  \\text{xor} \\ b_{i+1}$\n\n\u82e5\u5bf9\u4e8e\u4e00\u4e2a $k$ \u6709 $\u2200 i\\in[0,n-1],c_{(i+k)\\% n}=d_i$\uff0c\u5219\u8fd9\u4e2a $k$ \u662f\u5408\u6cd5\u7b54\u6848\uff0c\u5e76\u4e14 $x=a_k\\ \\text{xor}\\ b_0$\u3002\n\n\u95ee\u9898\u8f6c\u5316\u4e3a\u5bf9\u4e8e\u4e00\u4e2a $k$ \u5982\u679c $c[k...k+n-1]$ \u4e0e $d[0...n-1]$ \u76f8\u5339\u914d\uff0c\u5219 $k$ \u53ef\u884c\u3002\u90a3\u4e48\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u54c8\u5e0c\u7b97\u6cd5\u3002\n\n\u9996\u5148\u5c06 $c,d$ \u79bb\u6563\u5316\uff0c\u6620\u5c04\u5230 $4e5$ \u7ea7\u522b\u7684\u6570\uff0c\u968f\u540e\u9009\u53d6\u4e00\u4e2a\u5927\u4e8e $4e5$ \u7684\u6574\u6570\u4f5c\u4e3a $bas$\uff0c\u518d\u9009\u53d6\u4e00\u4e2a\u8f83\u5927\u8d28\u6570\u4f5c\u4e3a\u6a21\u6570\u3002\n\n\u6211\u7684 $bas=1333331,mod=1000000000091$\u3002\n\ncode\uff1a\n\n```cpp\n#include\"bits/stdc++.h\"\nusing namespace std;\n#define ll long long\n#define ul unsigned long long\n#define ui unsigned int\n#define ri register int\n#define pb push_back\n#define mp make_pair\ninline ll rd(){\n\tll x=0,flag=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-') flag=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+(ch^48);ch=getchar();}\n\treturn x*flag;\n}\n#define N 200010\n#define mod 1000000000091\nint n,a[N],b[N],buc[N<<1],top;\nll c[N<<1],d[N];\nll bas=1333331;\ninline int lowbit(int x){return x & ( - x ) ;}\nint main()\n{\n\tn=rd();\n\tfor(ri i=0;i<n;++i) a[i]=rd();a[n]=a[0];\n\tfor(ri i=0;i<n;++i) b[i]=rd();b[n]=b[0];\n\tfor(ri i=0;i<n;++i) c[i]=a[i]^a[i+1],buc[++top]=c[i];\n\tfor(ri i=0;i<n;++i) d[i]=b[i]^b[i+1],buc[++top]=d[i];\n\tsort(buc+1,buc+1+top);\n\tint len=unique(buc+1,buc+1+top)-buc-1;\n\tfor(ri i=n;i<2*n;++i) c[i]=c[i-n];\n\tfor(ri i=0;i<2*n;++i) c[i]=lower_bound(buc+1,buc+1+len,c[i])-buc;\n\tfor(ri i=0;i<n;++i) d[i]=lower_bound(buc+1,buc+1+len,d[i])-buc;\n\t//for(ri i=0;i<2*n;++i) cout<<c[i]<<\" \";cout<<endl;\n\t//for(ri i=0;i<n;++i) cout<<d[i]<<\" \";cout<<endl;\n\tll sta=0;\n\tint ans=0;\n\tfor(ri i=0;i<n;++i) sta=(sta*bas+d[i])%mod;//cout<<sta<<endl;\n\tll tmp=1,now=0;for(ri j=1;j<n;++j) tmp=tmp*bas%mod;\n\tfor(ri i=0;i<n;++i) {now=(now*bas+c[i])%mod;if(now==sta) cout<<0<<\" \"<<(a[0]^b[0])<<endl;}\n\tfor(ri i=n;i<2*n-1;++i) {now=((now-(c[i-n]*tmp%mod)+mod)*bas+c[i])%mod;if(now==sta) cout<<i+1-n<<\" \"<<(a[i+1-n]^b[0])<<endl;}\n    return 0;\n}\n\n```\n",
        "postTime": 1617161957,
        "uid": 135839,
        "name": "Fairicle",
        "ccfLevel": 6,
        "title": "AT4833"
    },
    {
        "content": "\u9996\u5148\u662f\u4e00\u4e2a\u5f88\u663e\u7136\u7684\u89c2\u5bdf\uff1a\n\n\u5982\u679c$b_i=a_{(i+k)\\bmod n}\\ \\text{xor}\\ x$\uff0c\u90a3\u4e48$a_{(i+k)\\bmod n}\\ \\text{xor}\\ b_i=x$\u3002\n\n\u6240\u4ee5\uff0c\u5982\u679c\u4e24\u4e2a\u5e8f\u5217\u5bf9\u5e94\u7684\u6bcf\u4e00\u4f4d\u7684\u5f02\u6216\u503c\u90fd\u76f8\u7b49\uff0c\u90a3\u4e48\u5b83\u5c31\u7b26\u5408\u9898\u610f\u3002\n\n\u73b0\u5728\u6211\u4eec\u8003\u8651\u5982\u4f55\u5224\u65ad\u4e24\u4e2a\u5e8f\u5217\u6bcf\u4e00\u4f4d\u7684\u5f02\u6216\u503c\u90fd\u76f8\u7b49\u3002\n\n\u56e0\u4e3a\u8fd9\u4e2a$a_{(i+k)\\bmod n}$\u5c31\u76f8\u5f53\u4e8e\u628a$a$\u5e8f\u5217\u201c\u8f6e\u6362\u201d\u7740\u53d8\u5316\uff0c\u6240\u4ee5\u8003\u8651\u5e8f\u5217\u4e0a\u76f8\u90bb\u4e24\u4f4d\u7684\u67d0\u79cd\u5173\u7cfb\u662f\u5426\u80fd\u5feb\u901f\u5224\u65ad\u4e24\u4e2a\u5e8f\u5217\u7684\u6bcf\u4e00\u4f4d\u7684\u5f02\u6216\u503c\u90fd\u76f8\u7b49\u3002\n\n\u601d\u8003\u4e00\u4e0b\uff0c\u5f53\u6211\u4eec\u628a$a_i$\u53d8\u6210$a_{(i+1)\\bmod n}$\u65f6\uff0c\u5bf9\u5e94\u7684$b_i$\u8981\u600e\u4e48\u6837\u53d8\u624d\u80fd\u4f7f\u5f97\u5b83\u4e0e$a_{(i+1)\\bmod n}$\u7684\u5f02\u6216\u503c\u7b49\u4e8e$a_i$\u4e0e$b_i$\u7684\u5f02\u6216\u503c\uff1f\n\n\u5f53$a_i$\u53d8\u6210$a_{(i+1)\\bmod n}$\u65f6\uff0c\u5982\u679c$a_i$\u7684\u67d0\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u6539\u53d8\u4e86\uff0c\u90a3\u4e48$b_i$\u7684\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u4e5f\u8981\u6539\u53d8\u3002\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u82e5$a_1=3,a_2=5$\uff0c\u4ed6\u4eec\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u5206\u522b\u4e3a\uff1a$011$\uff0c$101$\u3002\u5728$a_1$\u53d8\u4e3a$a_2$\u7684\u8fc7\u7a0b\u4e2d\uff0c\u7b2c$1$\u4f4d\uff0c\u7b2c$2$\u4f4d\uff08\u4ece\u7b2c$0$\u4f4d\u5f00\u59cb\u6570\uff09\u4e8c\u8fdb\u5236\u4f4d\u6539\u53d8\u4e86\u3002\n\n\u90a3\u5982\u679c$b_1=1$\uff0c\u90a3\u4e48$b_1$\u5c06\u8981\u53d8\u6210\u7684$b_2$\u5c31\u662f$b_1$\u7684\u4e8c\u8fdb\u5236\u4f4d\u4e2d\u7684\u7b2c$1$\u4f4d\uff0c\u7b2c$2$\u4f4d\u6539\u53d8\u7684\u7ed3\u679c\uff0c\u90a3\u4e48$(b_1)_2=001\\rightarrow(b_2)_2=111$\uff0c$b_2$\u5fc5\u987b\u4e3a$7$\u3002\n\n$a_1$\u53d8\u4e3a$a_2$\uff0c$b_1$\u53d8\u4e3a$b_2$\u6240\u9700\u8981\u53d8\u7684\u4e8c\u8fdb\u5236\u4f4d\u662f\u5bf9\u5e94\u76f8\u540c\u7684\uff0c\u5176\u5b9e\u5c31\u610f\u5473\u7740\uff0c$a_1\\ \\text{xor}\\ a_2=b_1\\ \\text{xor}\\  b_2$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u6709$a_1\\ \\text{xor}\\ a_2=b_1\\ \\text{xor}\\ b_2\\Rightarrow a_1\\ \\text{xor}\\ b_1=a_2\\ \\text{xor}\\ b_2$\u3002\n\n\u4e0a\u9762\u90a3\u4e2a\u5f0f\u5b50\u7528\u5f02\u6216\u7684\u6027\u8d28\u4e5f\u53ef\u4ee5\u663e\u7136\u5f97\u5230\u3002\n\n\u800c\u5982\u679c\u5bf9\u5e94\u591a\u4e2a\u6570\uff0c\u6839\u636e\u7b49\u5f0f\u7684\u4f20\u9012\u6027\uff0c\u6211\u4eec\u663e\u7136\u53ef\u4ee5\u63a8\u5e7f\u5f97\uff1a\n\n$$\n\\forall i\\in[0,n-1],a_i\\ \\text{xor} \\ a_{(i+1)\\bmod n}=b_i\\ \\text{xor} \\ b_{(i+1)\\bmod n}\\Rightarrow a_1\\ \\text{xor}\\ b_1=a_2\\ \\text{xor}\\ b_2=...=a_{n-1}\\ \\text{xor}\\ b_{n-1}\n$$\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8bb0$c_i=a_i\\ \\text{xor}\\ a_{(i+1)\\bmod n},d_i=b_i\\ \\text{xor}\\ b_{(i+1)\\bmod n}$\u3002\n\n\u7136\u540e\u5982\u679c\u5b58\u5728\u67d0\u4e2a$k,0\\le k <n $\uff0c\u4f7f\u5f97$c_{(i+k)\\bmod n}=d_i$\uff0c\u90a3\u4e48\u8fd9\u4e2a$k$\u5c31\u662f\u5408\u6cd5\u7684\u3002\u5982\u4f55\u5feb\u901f\u7684\u6c42\u89e3\u5462\uff1f\n\n\u8fd9\u73a9\u610f\u5176\u5b9e\u5c31\u6bd4\u8f83\u5957\u8def\u4e86\u3002\u9996\u5148$c_{(i+k)\\bmod n}$\u8fd9\u79cd\u6709\u70b9\u50cf\u73af\u7684\u4e1c\u897f\u628a\u5b83\u590d\u5236\u4e00\u4e0b\u5c31\u884c\u4e86\u3002\u7136\u540e\u628a$d$\u5e8f\u5217\u653e\u524d\u9762\uff0c\u590d\u5236\u4e4b\u540e\u7684$c$\u653e\u540e\u9762\uff0c\u8dd1\u4e00\u4e0b Z \u7b97\u6cd5\uff08\u6269\u5c55 KMP \uff09\u3002\u7136\u540e\u901a\u8fc7 lcp \u662f\u5426\u7b49\u4e8e$n$\u6765\u5224\u65ad\u5bf9\u5e94\u7684$k$\u662f\u5426\u53ef\u4ee5\u5c31\u884c\u4e86\u3002\n\n\u6ca1\u6709\u5b66\u8fc7 Z \u7b97\u6cd5\u53ef\u4ee5\u53bb[OI-wiki](https://oi-wiki.org/string/z-func/)\uff0c\u6216\u8005[\u6211\u7684\u535a\u6587](https://www.luogu.com.cn/blog/mcqueen/z-algorithm)\u3002\u4e2a\u4eba\u5efa\u8bae\u521d\u5b66\u8005\u53bb\u770b OI-wiki \u4e0a\u7684\uff0cOI-wiki \u5199\u7684\u6bd4\u8f83\u8be6\u7ec6\uff0c\u6211\u7684\u5199\u7684\u76f8\u5bf9\u7b80\u7565\u4e00\u70b9\u3002\uff08\u4e0d\u8fc7\u6211\u7684\u535a\u5ba2\u91cc\u6709\u6211\u5728CF\u4e0a\u770b\u5230\u7684\u5e76\u6574\u7406\u4e0b\u6765\u7684\u6bd4\u8f83\u4f18\u7f8e\u7684 Z \u7b97\u6cd5\u7684\u5199\u6cd5\uff0c\u503c\u5f97\u5b66\u4e60\uff09\u3002\n\n**\u9898\u5916\u8bdd\uff1a**\n\u5f53\u7136\u8fd9\u73a9\u610f\u5e94\u8be5\u4e5f\u53ef\u4ee5\u76f4\u63a5 KMP ~~\uff08\u4f46\u5176\u5b9e\u6211\u4e0d\u4f1a\uff08\u662f\u7684\u6ca1\u9519\u6211\u4e0d\u4f1a KMP \u4f46\u6211\u4f1a\u6269\u5c55 KMP \uff09\uff09~~\uff0c\u5e94\u8be5\u4e5f\u53ef\u4ee5\u54c8\u5e0c\uff0c~~\uff08\u4f46\u6211**\u4e2a\u4eba**\u603b\u611f\u89c9\u8fd9\u79cd\u4e0d\u662f\u771f\u6b63\u7684\u5b57\u7b26\u4e32\u5339\u914d\u53ef\u80fd\u4f1a\u88ab\u5361\uff08\u4e0d\u8fc7\u6211\u597d\u50cf\u770b\u5230\u6709\u4eba\u7528\u5355\u54c8\u5e0c\u8fc7\u4e86\uff09\uff0c\u800c\u4e14Z\u7b97\u6cd5\u6bd4\u8d77\u54c8\u5e0c\u6765\u7801\u91cf\u5c0f\u4e0d\u5c11\uff09\uff08\u8fd9\u4e0d\u662f\u8bf4\u6211\u4e0d\u559c\u6b22\u54c8\u5e0c\uff0c\u54c8\u5e0c\u5927\u53d1\u597d\uff09~~\u3002\n\n**code\uff1a**\n```cpp\n#include<bits/stdc++.h>\n#define N 200005\nusing namespace std;\ntemplate<typename T>\ninline void in(T &x)\n{\n\tx=0;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9')c=getchar();\n\twhile(c>='0'&&c<='9')x=(x<<1)+(x<<3)+(c^48),c=getchar();\n}\nint n,A[N],B[N],a[N],b[N],Z[N*3],s[N*3];\nvoid calc_z(int n)\n{\n\tZ[0]=n;\n\tint l=0,r=0;\n\tfor(int i=1;i<n;++i)\n\t{\n\t\tif(i>r)l=r=i;\n\t\tZ[i]=min(r-i,Z[i-l]);\n\t\twhile(s[Z[i]]==s[i+Z[i]])++Z[i];\n\t\tif(i+Z[i]>r)r=i+Z[i],l=i;\n\t}\n}\nint main()\n{\n\tin(n);\n\tfor(int i=0;i<n;++i)in(A[i]);\n\tfor(int i=0;i<n;++i)in(B[i]);\n\tfor(int i=0;i<n;++i)\n\ta[i]=(A[i]^A[(i+1)%n]),b[i]=B[i]^B[(i+1)%n];\n\tfor(int i=0;i<n;++i)\n\ts[i]=b[i];\n\ts[n]=-1;\n\tfor(int i=n+1;i-n-1<n;++i)\n\ts[i]=a[i-n-1];\n\tfor(int i=n+n+1;i-n-n-1<n;++i)\n\ts[i]=a[i-n-n-1];\n\tcalc_z(n+n+n+1);\n\tfor(int i=n+1;i-n-1<n;++i)\n\tif(Z[i]==n)\n\t\tprintf(\"%d %d\\n\",i-n-1,A[i-n-1]^B[0]);\n\treturn 0;\n}\n```\n\n\n",
        "postTime": 1606742108,
        "uid": 50010,
        "name": "mcqueen",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT4833 \u3010[ABC150F] Xor Shift\u3011"
    },
    {
        "content": "\u597d\u9898\uff01\n\n\u9996\u5148\u662f\u6309\u4f4d\u786e\u5b9a\uff0c\u4ee4 $t(i,j)$ \u8868\u793a $A$ \u5e8f\u5217\u5411\u53f3\u79fb\u52a8 $j$ \u4f4d\u540e\u5f02\u6216\u67d0\u4e00\u4e2a\u6570\u80fd\u5426\u7b49\u4e8e $B$ \u5e8f\u5217\uff0c\u5219\u5982\u679c\u6240\u6709 $t(i,q)\\ \\ (i\\in [1,30])$ \u90fd\u662f $1$\uff0c\u79fb\u52a8 $q$ \u4f4d\u624d\u662f\u4e00\u4e2a\u53ef\u884c\u7684\u7b54\u6848\u3002\n\n\u7136\u540e\u5c31\u5c06\u539f\u95ee\u9898\u8f6c\u5316\u6210\u4e86\u4e00\u4e2a\u5168\u662f $0,1$ \u7684\u95ee\u9898\uff0c\u8fd9\u6837\u5f02\u6216\u5904\u7406\u8d77\u6765\u5c31\u7b80\u5355\u5f97\u591a\uff0c\u5f02\u6216\u4e00\u4e0b\u5c31\u76f8\u5f53\u4e8e\u662f\u5168\u4f53\u53d6\u53cd\uff0c\u6240\u4ee5\u8bbe $cntA,cntB$ \u5206\u522b\u662f $A,B$ \u4e2d $1$ \u7684\u4e2a\u6570\uff0c\u5982\u679c $cntA=cntB$\uff0c\u90a3\u4e48\u53ef\u4ee5\u4e0d\u5f02\u6216\u4efb\u4f55\u6570\uff0c\u5982\u679c\u6070\u597d $cntA+cntB=n$\uff0c\u90a3\u4e48\u53ef\u4ee5 $A$ \u5e8f\u5217\u5168\u90e8\u53d6\u53cd\u518d\u4e0e $B$ \u5339\u914d\u3002\n\n\u7136\u540e\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u5b57\u7b26\u4e32\u5339\u914d\u95ee\u9898\uff0c\u5c06 $A$ \u505a\u5faa\u73af\u4f4d\u79fb\u4f7f\u5f97\u548c $B$ \u5b8c\u5168\u76f8\u7b49\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06 $B$ \u590d\u5236\u4e24\u500d\uff08\u6216\u8005\u590d\u5236 $A$ \u4e5f\u662f\u4e00\u6837\u7684\uff09\uff0c\u505a\u4e00\u6b21 KMP \u5373\u53ef\u63d0\u53d6\u51fa\u6240\u6709\u5339\u914d\u4f4d\u7f6e\uff0c\u4e8e\u662f $t(i,j)$ \u5c31\u8ba1\u7b97\u51fa\u6765\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN=200010;\nint n,m,a[2*MAXN],b[MAXN],c[2*MAXN],d[MAXN],nx[MAXN],bl[MAXN],ans[MAXN];\nint main () {\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++) {scanf(\"%d\",&a[i]);}\n\tfor (int i=1;i<=n;i++) {scanf(\"%d\",&b[i]);}\n\tfor (int i=n+1;i<=n+n;i++) {a[i]=a[i-n];}\n\tm=n;\n\tn=m+m; \n\tfor (int ii=0;ii<30;ii++) {\n\t\tmemset(bl,0,sizeof(bl));\n\t\tint tmp1=0,tmp2=0,flg=0;\n\t\tfor (int j=1;j<=n;j++) {c[j]=((a[j]>>ii)&1);tmp1+=c[j]*(j<=m);}\n\t\tfor (int j=1;j<=m;j++) {d[j]=((b[j]>>ii)&1);tmp2+=d[j];}\n\t\tif (tmp1==tmp2) {\n\t\t\tnx[1]=0;\n\t\t    for (int i=2,j=0;i<=m;i++) {\n    \t\t    while (j>0&&d[i]!=d[j+1]) {j=nx[j];}\n        \t\tif (d[i]==d[j+1]) {j++;}\n        \t\tnx[i]=j;\n    \t\t}\n    \t\tfor (int i=1,j=0;i<=n;i++) {\n\t        \tif (j==m) {j=nx[j];}\n\t\t        while (j>0&&c[i]!=d[j+1]) {j=nx[j];}\n    \t\t    if (c[i]==d[j+1]) {j++;}\n        \t\tif (i>=m&&j!=m) {bl[i-m]++;}\n    \t\t}\n    \t\tflg=1;\n\t\t}\n\t\tif (m-tmp1==tmp2) {\n\t\t\tfor (int j=1;j<=m;j++) {d[j]^=1;}\n\t\t\tnx[1]=0;\n\t\t    for (int i=2,j=0;i<=m;i++) {\n    \t\t    while (j>0&&d[i]!=d[j+1]) {j=nx[j];}\n        \t\tif (d[i]==d[j+1]) {j++;}\n        \t\tnx[i]=j;\n    \t\t}\n    \t\tfor (int i=1,j=0;i<=n;i++) {\n\t        \tif (j==m) {j=nx[j];}\n\t\t        while (j>0&&c[i]!=d[j+1]) {j=nx[j];}\n    \t\t    if (c[i]==d[j+1]) {j++;}\n        \t\tif (i>=m&&j!=m) {bl[i-m]++;}\n    \t\t}\n    \t\tflg=1;\n\t\t}\n\t\tif (!flg) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (tmp1==tmp2&&m-tmp1==tmp2) {\n\t\t\tfor (int j=0;j<=m;j++) {\n\t\t\t\tif (bl[j]==2) {ans[j]=1;}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (int j=0;j<=m;j++) {\n\t\t\t\tif (bl[j]==1) {ans[j]=1;}\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i=0;i<m;i++) {\n\t\tif (!ans[i]) {printf(\"%d %d\\n\",i,a[i+1]^b[1]);}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1581514203,
        "uid": 113546,
        "name": "ix35",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 AT4833 \u3010[ABC150F] Xor Shift\u3011"
    }
]
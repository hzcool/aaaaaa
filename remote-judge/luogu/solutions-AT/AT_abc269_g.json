[
    {
        "content": "### \u9898\u610f\n\u6709 $n$ \u5f20\u5361\u7247\uff0c\u7b2c $i$ \u5f20\u5361\u7247\u6b63\u9762\u6709\u6570\u5b57 $a_i$\uff0c\u80cc\u9762\u6709\u6570\u5b57 $b_i$\uff0c\u540c\u65f6 $\\sum_{i=1}^n (a_i+b_i)=m$\u3002\u6240\u6709\u5361\u7247\u8d77\u521d\u5747\u88ab\u6b63\u9762\u671d\u4e0a\u5730\u653e\u7f6e\u3002\n\n\u5bf9\u4e8e $\\forall k\\in[0,m]$\uff0c\u8f93\u51fa\u4f7f\u5f97\u6240\u6709\u5361\u7247\u671d\u4e0a\u7684\u6570\u5b57\u4e4b\u548c\u4e3a $k$ \u65f6\uff0c\u9700\u8981\u7ffb\u9762\u81f3\u5c11\u591a\u5c11\u5f20\u5361\u7247\uff1b\u5982\u679c\u4e0d\u80fd\u901a\u8fc7\u7ffb\u9762\u5361\u7247\u4f7f\u5f97\u6240\u6709\u5361\u7247\u671d\u4e0a\u7684\u6570\u5b57\u4e4b\u548c\u4e3a $k$ \u5219\u8f93\u51fa $-1$\u3002\n\n$1\\le n\\le 2\\times 10^5,0\\le m\\le 2\\times 10^5,0\\le a_i,b_i\\le m$\u3002\n### \u89e3\u6cd5\n\u8003\u8651\u6bcf\u5f20\u5361\u7247\u7ffb\u8fc7\u6765\u540e\uff0c\u5bf9\u671d\u4e0a\u7684\u6570\u5b57\u548c\u9020\u6210\u7684\u8d21\u732e\u4e3a $b_i-a_i$\u3002\u5c06 $b_i-a_i$ \u76f8\u540c\u8005\u5408\u5e76\u4e4b\u540e\uff0c\u95ee\u9898\u5373\u8f6c\u5316\u4e3a\u4e00\u4e2a\u591a\u91cd\u80cc\u5305\u95ee\u9898\u3002\u540c\u65f6 $\\sum_{i=1}^n (a_i+b_i)=m$ \u610f\u5473\u7740 $\\sum_{i=1}^n (\\max(a_i,b_i)-\\min(a_i,b_i))\\le m$\u3002\u6b64\u65f6\u663e\u7136 $\\max(a_i,b_i)-\\min(a_i,b_i)$ \u7684\u53d6\u503c\u53ea\u4f1a\u6709 $O(\\sqrt m)$ \u79cd\uff0c\u4e5f\u5c31\u610f\u5473\u7740 $b_i-a_i$ \u4e5f\u53ea\u6709 $O(\\sqrt m)$ \u79cd\uff08$b_i-a_i$ \u53ef\u80fd\u4e3a $\\pm(\\max(a_i,b_i)-\\min(a_i,b_i))$\uff09\u3002\u5355\u8c03\u961f\u5217\u4f18\u5316\u591a\u91cd\u80cc\u5305\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(m\\sqrt m)$\u3002\uff08\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u3010\u3011\u7684\u9898\u6211\u4e00\u76f4\u6ca1\u60f3\u51fa\u6765\n### \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int maxn=200010;\nint n,m,l,r,i,j,k,p,w,t,b;\nint v[maxn],c[maxn],q[maxn],dp[2][maxn];\nbool x,y=1;\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<=n;++i){\n\t\tscanf(\"%d%d\",&l,&r);\n\t\tw+=l; c[i]=r-l; \n\t}\n\tmemset(dp,0x3f,sizeof(dp));\n\tdp[0][w]=0; w=0;\n\tsort(c+1,c+n+1); \n\tc[n+1]=1145141919;\n\tfor(i=t=1;i<=n;++i){\n\t\tif(c[i+1]!=c[i]){\n\t\t\tif(c[i]<0){\n\t\t\t\tw=-c[i];\n\t\t\t\tfor(j=0;j<w;++j){\n\t\t\t\t\tfor(p=m-j,k=0;p>=0;p-=w) v[p]=dp[x][p]-(k++);\n\t\t\t\t\tl=1; r=k=0; b=m-j+w*t;\n\t\t\t\t\tfor(p=m-j;p>=0;p-=w){\n\t\t\t\t\t\tif(q[l]>b) ++l;\n\t\t\t\t\t\twhile(l<=r&&v[q[r]]>=v[p]) --r;\n\t\t\t\t\t\tq[++r]=p; b-=w;\n\t\t\t\t\t\tdp[y][p]=v[q[l]]+(k++);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(c[i]>0){\n\t\t\t\tw=c[i];\n\t\t\t\tfor(j=0;j<w;++j){\n\t\t\t\t\tfor(p=j,k=0;p<=m;p+=w) v[p]=dp[x][p]-(k++);\n\t\t\t\t\tl=1; r=k=0; b=j-w*t;\n\t\t\t\t\tfor(p=j;p<=m;p+=w){\n\t\t\t\t\t\tif(q[l]<b) ++l;\n\t\t\t\t\t\twhile(l<=r&&v[q[r]]>=v[p]) --r;\n\t\t\t\t\t\tq[++r]=p; b+=w;\n\t\t\t\t\t\tdp[y][p]=v[q[l]]+(k++);\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t}\n\t\t\tif(c[i]) swap(x,y); t=1;\n\t\t}\n\t\telse ++t;\n\t}\n\tfor(i=0;i<=m;++i){\n\t\tif(dp[x][i]>=0x3f3f3f3f) dp[x][i]=-1;\n\t\tprintf(\"%d\\n\",dp[x][i]);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1668572776,
        "uid": 546086,
        "name": "Francais_Drake",
        "ccfLevel": 7,
        "title": "[ABC269G] Reversible Cards 2 \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\uff0c\u5c06\u6240\u6709\u5361\u7247\u671d\u4e0a\u653e\u7f6e\uff0c\u53cd\u8f6c\u4e00\u4e2a\u5361\u7247 $i$ \u83b7\u5f97\u7684\u503c\u4e3a $a_i-b_i$\uff0c\u90a3\u4e48\u5c31\u8f6c\u5316\u6210\u4e86 0/1 \u80cc\u5305\u95ee\u9898\u3002\u5e26\u8d1f\u6743\u53ea\u8981\u6b63\u53cd\u90fd\u505a\u4e00\u904d\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u6b64\u65f6\u7684\u590d\u6742\u5ea6\u975e\u5e38\u4f18\u79c0\uff0c\u6240\u4ee5\u9700\u8981\u4f18\u5316\u3002\u53ef\u4ee5\u53d1\u73b0\u9898\u76ee\u4e2d\u7ed9\u7684\u4e00\u4e2a\u5f88\u6709\u7528\u7684\u9650\u5236\u6761\u4ef6\uff1a$\\sum(a_i+b_i)=m$\uff0c\u8fd9\u610f\u5473\u7740 $a_i+b_i$ \u7684\u53d6\u503c\u4e0d\u8d85\u8fc7 $\\sqrt m$ \u79cd\uff0c\u4e5f\u5c31\u662f $a_i-b_i$ \u7684\u53d6\u503c\u4e0d\u8d85\u8fc7 $2\\sqrt m$ \u79cd\u3002\u76f4\u63a5\u628a\u76f8\u540c\u7684\u6309\u4e00\u8d77\u505a\u591a\u91cd\u80cc\u5305\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u4f1a\u7b97\uff0c\u5927\u81f4\u662f $O(n\\sqrt{m})\\sim O(n\\sqrt{m\\log m})$\u3002\n\n# AC \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MAXN = 2e5 + 10;\n\nmap<int, int> mp;\n\nint n, m, sum;\n\nint v[MAXN], w[MAXN], tot;\n\nint dp[MAXN];\n\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tfor (int i = 1, a, b; i <= n; i++) scanf(\"%d%d\", &a, &b), mp[b - a]++, sum += a;\n\tmemset(dp, 0x3f, sizeof dp), dp[sum] = 0;\n\tfor (auto x : mp) {\n\t\tint tv = x.first, s = x.second, k = 1;\n\t\twhile (k <= s) v[++tot] = k * tv, w[tot] = k, s -= k, k <<= 1;\n\t\tif (s > 0) v[++tot] = s * tv, w[tot] = s;\n\t}\n\tn = tot;\n\tfor (int i = 1; i <= n; i++) {\n\t\tif (v[i] > 0) for (int j = m; j >= v[i]; j--) dp[j] = min(dp[j], dp[j - v[i]] + w[i]);\n\t\telse for (int j = 0; j <= m + v[i]; j++) dp[j] = min(dp[j], dp[j - v[i]] + w[i]);\n\t}\n\tfor (int i = 0; i <= m; i++) printf(\"%d\\n\", dp[i] == 0x3f3f3f3f ? -1 : dp[i]);\n}\n```",
        "postTime": 1672878191,
        "uid": 406941,
        "name": "Register_int",
        "ccfLevel": 6,
        "title": "ABC269G \u9898\u89e3"
    }
]
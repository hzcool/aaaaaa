[
    {
        "content": "## \u8fd9\u9053\u9898\u5c31\u662f\u6c42\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\n\n### \u4ec0\u4e48\u662f\u9006\u5e8f\u5bf9\uff1f\n\n\u9006\u5e8f\u5bf9\u5c31\u662f\u5728\u6570\u5217\u4e2d\u6ee1\u8db3`i<j` \u4e14`a[i]>a[j] `\u7684\u4e00\u5bf9\u6570\n\n\u6211\u4eec\u90fd\u4f1a\u5192\u6ce1\u6392\u5e8f\uff0c\u4e8b\u5b9e\u4e0a\u5728\u5192\u6ce1\u6392\u5e8f\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c31\u662f\u4e0d\u65ad\u627e\u9006\u5e8f\u5bf9\uff0c\u4ea4\u6362\u4ed6\u4eec\n\n\u6240\u4ee5\u53ea\u8981\u6a21\u62df\u4e00\u904d\u5192\u6ce1\u6392\u5e8f\u5c31\u53ef\u4ee5\u7edf\u8ba1\u51fa\u6765\u9006\u5e8f\u5bf9\u7684\u6570\u91cf\n\n\u6839\u636e\u9006\u5e8f\u5bf9\u7684\u5b9a\u4e49\uff0c\u5f88\u5bb9\u6613\u5199\u51fa$O(n^2)$\u7b97\u6cd5\n\n```cpp\nfor(int i=1;i<=n;i++)\n{\n\tfor(int j=i+1;j<=n;j++)\n\t{\n\t\tif(a[i]>a[j])\n\t\t{\n\t\t\tans++;\n\t\t}\n\t}\n}\n```\n\u4f46\u4e00\u5b9a\u4f1a\u8d85\u65f6\u7684\uff0c\u8003\u8651\u66f4\u4f18\u65b9\u6cd5\n\n\u5e38\u7528\u7684\u6c42\u9006\u5e8f\u5bf9\u7684\u65b9\u6cd5\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u5f52\u5e76\u6392\u5e8f\uff0c\u4e00\u79cd\u662f\u5229\u7528\u6811\u72b6\u6570\u7ec4\n\n\u6211\u770b\u4e86\u4e0b\u73b0\u6709\u7684\u9898\u89e3\uff0c\u5927\u90e8\u5206\u90fd\u662f\u5f52\u5e76\u6392\u5e8f\uff0c\u6709\u4e00\u4e2a\u6811\u72b6\u6570\u7ec4\u7684\u9898\u89e3\u4e0d\u597d\u7406\u89e3\uff0c\u6240\u4ee5\u6211\u5199\u4e00\u4e2a\u9898\u89e3\n\n### \u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9\n\n#### \u6ce8\u610f\uff0c\u6b64\u9898\u89e3\u9002\u5408\u5df2\u6709\u6811\u72b6\u6570\u7ec4\u57fa\u7840\u7684\u670b\u53cb\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u5f00\u4e00\u4e2a\u5927\u5c0f\u4e3a$a$\u7684\u6700\u5927\u503c\u7684\u6811\u72b6\u6570\u7ec4$c$\n\n\u6bcf\u5f53\u8bfb\u5165\u4e00\u4e2a\u6570\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u6876\u6392\u5e8f\u7684\u601d\u60f3\uff0c\u5c06`c[a[i]]`\u52a0\u4e0a$1$\n\n\u7136\u540e\u6211\u4eec\u7edf\u8ba1`c[1]-c[a[i]]` \u7684\u548cans\n\n$ans - 1$\uff08\u9664\u6389\u8fd9\u4e2a\u6570\u672c\u8eab\uff09\u5c31\u662f\u5728\u8fd9\u4e2a\u6570\u524d\u9762\u6709\u591a\u5c11\u4e2a\u6570\u6bd4\u5b83\u5c0f\n\n\u904d\u5386 $i$ \u4ece $1$ \u5230 $n$ \u6211\u4eec\u53ea\u8981\u7528 `i-ans` \u5c31\u53ef\u4ee5\u5f97\u51fa\u524d\u9762\u6709\u591a\u5c11\u6570\u6bd4\u5b83\u5927\uff0c\u4e5f\u5c31\u662f\u9006\u5e8f\u5bf9\u7684\u6570\u91cf\n\n#### \u4f46\u662f\uff01\n\n#### \u6709\u65f6\u5019\uff0ca\u7684\u6700\u5927\u503c\u53ef\u80fd\u5230\u8fbe\u4f60\u5f00c\u6570\u7ec4\u4f1a\u76f4\u63a5\u70b8\u6389\u7684\u5730\u6b65\n\n\u90a3\u6211\u4eec\u5c31\u8981\u5f15\u5165\u4e00\u4e2a\u5947\u6280\u6deb\u5de7\u2014\u2014\u79bb\u6563\u5316\n\n\uff08\u5728\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u4ecb\u7ecd\u79bb\u6563\u5316\uff0c\u53ea\u662f\u4f5c\u4e3a\u4e00\u4e2a\u6280\u5de7\u6765\u4f7f\u7528\uff0c\u5982\u679c\u60f3\u5b66\u4e60\u7684\u5efa\u8bae\u53bb\u767e\u5ea6\uff09\n\n\u6211\u4eec\u53ef\u4ee5\u5728\u8bfb\u5b8c\u6570\u6570\u636e\u540e\u5bf9\u4ed6\u8fdb\u884c\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\n\n\u6211\u4eec\u7528\u6392\u5b8c\u5e8f\u7684\u6570\u7ec4\u7684\u4e0b\u6807\u6765\u8fdb\u884c\u8fd0\u7b97\n\n\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u5c0f\u7684\u6570\u4f9d\u65e7\u5c0f\uff0c\u5927\u7684\u6570\u4f9d\u65e7\u5927\n\n\u8bdd\u4e0d\u591a\u8bf4\uff0c\u4e0a\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<string>\nusing namespace std;\nstruct Number\n{\n\tint order;//\u5e8f\u53f7\n\tint value;//\u503c\n}a[100005];\nint lsh[100005];//\u79bb\u6563\u5316\u540e\u7684\u6570\u7ec4\nint c[100005];\nint n;\nint lowbit(int x)//\u719f\u6089\u7684lowbit\n{\n\treturn x&-x;\n}\nvoid update(int x,int k)//\u719f\u6089\u7684\u589e\u503c\u51fd\u6570\n{\n\tfor(int i=x;i<=n;i+=lowbit(i))\n\t{\n\t\tc[i]+=k;\n\t}\n}\nint getSum(int x)//\u719f\u6089\u7684\u6c42\u548c\u51fd\u6570,\u6c42\u524d\u9762\u548c\u591a\u5c11\u5c31\u662f\u5c0f\u4e8e\u5b83\u6570\u7684\u4e2a\u6570\n{\n\tint res=0;\n\tfor(int i=x;i>0;i-=lowbit(i))\n\t{\n\t\tres+=c[i];\n\t}\n\treturn res;\n}\n\n/*\n\u4ee5\u4e0a\u6211\u76f8\u4fe1\u4e0d\u7528\u591a\u8bf4\uff0c\u53ea\u8981\u6709\u6811\u72b6\u6570\u7ec4\u7684\u57fa\u7840\u5c31\u53ef\u4ee5\u660e\u767d\n\u5982\u679c\u4e0d\u719f\u6089\u7684\uff0c\u5176\u5b9e\u6ca1\u5fc5\u8981\u770b\u8fd9\u7bc7\u9898\u89e3\n*/\nbool cmp(Number x,Number y)\n{\n\treturn x.value<y.value;\n}\n//\u6392\u5e8f\u51fd\u6570\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i].value;\n\t\ta[i].order=i;//\u8bb0\u5f55\u539f\u5e8f\n\t}\n\tsort(a+1,a+n+1,cmp);//\u5feb\u6392\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tlsh[a[i].order]=i;//\u79bb\u6563\u5316\u7684\u8fc7\u7a0b\n\t}\n\tlong long ans=0;//\u4e0d\u5f00longlong\u89c1\u7956\u5b97\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tupdate(lsh[i],1);\n\t\tans+=i-getSum(lsh[i]);//\u51cf\u53bb\u5c0f\u4e8e\u7684\u6570\u5373\u4e3a\u5927\u4e8e\u7684\u6570\u5373\u4e3a\u9006\u5e8f\u6570\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\u4e0d\u8fc7\uff0c\u636e\u8bf4\u8fd9\u9898\u4e0d\u7528\u79bb\u6563\u5316\u4e5f\u80fd\u8fc7\uff0c\u6211\u6ca1\u8bd5\n### \u6e29\u99a8\u63d0\u793a\uff1a\u4e0d\u5f00$long long$\u89c1\u7956\u5b97\n\u5199\u9898\u89e3\u4e0d\u6613\uff0c\u6c42\u591a\u652f\u6301\uff0c\u8c22\u8c22\u5404\u4f4d",
        "postTime": 1584410710,
        "uid": 203102,
        "name": "Diamiko",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "\u6211\u4eec\u7528\u6811\u72b6\u6570\u7ec4\u5b8c\u6210\u6b64\u9898\u3002\u56e0\u4e3a\u5192\u6ce1\u6b21\u6570\u4e3a\u6bcf\u4e2a\u6570\u524d\u9762\u6bd4\u4ed6\u5927\u7684\u6570\u4e4b\u548c\u3002\n```\n#include<cstdio>\nint n,m,ans;\nint a[10005];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&m);\n\t\tfor(int j=m;j;j-=(j&(-j)))ans-=a[j];ans+=i-1;\n\t\tfor(int j=m;j<=n;j+=(j&(-j)))a[j]++;\n\t}\n\tprintf(\"%d\\n\",ans);\n}\n```",
        "postTime": 1531910099,
        "uid": 50092,
        "name": "da32s1da",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u5b9e\u8d28\u4e0a\u662f\u8ba9\u4f60\u6c42\u9006\u5e8f\u5bf9\n\n\u697c\u4e0b\u7528\u7684\u6811\u72b6\u6570\u7ec4\u6c42\n\n\u90a3\u6211\u5c31\u6765\u4e00\u624b\u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\n\n~~\u53cc\u500d\u7ecf\u9a8c\uff08P1908\uff09~~\n```\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<string>\n#include<cmath>\nusing namespace std;\nlong long n,ans=0,rank[100001],a[100001];\nvoid guibing(long long l,long long r){\n\tif(l==r)\n\t\treturn ;\n\tlong long mid=(l+r)/2;\n\tguibing(l,mid);\n\tguibing(mid+1,r);\n\tint i=l,j=mid+1,k=l;\n\twhile(i<=mid&&j<=r){\n\t\tif(a[i]<=a[j])\n\t\t\trank[k++]=a[i++];\n\t\telse{\n\t\t\tans=ans+mid-i+1;//\u7075\u9b42\u8bed\u53e5\n\t\t\trank[k++]=a[j++];\n\t\t}\n\t}\n\twhile(i<=mid){\n\t\trank[k++]=a[i++];\n\t}\n\twhile(j<=r){\n\t\trank[k++]=a[j++];\n\t}\n\tfor(int p=l;p<=r;p++)\n\t\ta[p]=rank[p];\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>a[i];\n\tguibing(1,n);\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1532396544,
        "uid": 50208,
        "name": "\u51bd\u9152\u706c\u5fc4",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "## \u6b63\u6587\n\n\u5192\u6ce1\u6392\u5e8f\u7684\u539f\u7406\u662f\u5224\u65ad\u76f8\u90bb\u4e24\u4e2a\u6570\u5927\u5c0f\uff0c\u5982\u679c\u524d\u4e00\u4e2a\u6570\u6bd4\u540e\u4e00\u4e2a\u6570\u5927\u5c31\u4ea4\u6362\u4f4d\u7f6e\uff0c\u5982\u6b64\u5faa\u73af$N$\u6b21\u3002\n\n\u7531\u4e8e\u603b\u662f\u548c\u524d\u4e00\u4e2a\u5927\u7684\u6570\u4ea4\u6362\uff0c\u6240\u4ee5\u5c31\u662f\u6c42\u540e\u9762\u6709\u591a\u5c11\u6570\u6bd4\u524d\u9762\u7684\u5927\uff0c\u4e5f\u5c31\u662f\u5e38\u8bf4\u7684**\u9006\u5e8f\u5bf9**\u3002\n\n~~\u53cc\u500d\u7ecf\u9a8c[P1908](https://www.luogu.com.cn/problem/P1908)\u3002~~\n\n\u5173\u4e8e\u9006\u5e8f\u5bf9\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u6811\u72b6\u6570\u7ec4\uff0c\u4e3a\u4e86\u9632\u6b62\u8d85\u5185\u5b58\uff0c\u53ef\u4ee5\u4f7f\u7528\u674e\u4e09\u82b1\uff08\u79bb\u6563\u5316\uff09\u3002\u7528\u6811\u72b6\u6570\u7ec4\u8bb0\u5f55\u5728\u7b2c$i$\u4e2a\u6570\u4e4b\u524d\u6309\u6709\u51e0\u4e2a\u6570\u6bd4\u5b83\u5c0f\u6216\u7b49\u4e8e\u4ed6\u5373\u53ef\u3002\u5177\u4f53\u89e3\u89c1\u4ee3\u7801\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nll n,m;\nll s[500005],c[500005],Max,ans;\nint lowbit(ll x){\n\treturn x&-x;\n}\nint get(ll x){\n\tll res=0;\n\twhile(x){\n\t\tres+=c[x];\n\t\tx-=lowbit(x);\n\t}\n\treturn res;\n}//\u53d6\u503c \nvoid change(ll x,ll y){\n\twhile(x<=n){\n\t\tc[x]+=y;\n\t\tx+=lowbit(x);\n\t}\n}//\u52a0\u503c \nll x,y,k;\nstruct data{\n\tll x,p,z;\n}a[500005],b[500005];\nbool cmp(data x,data y){\n\treturn x.x<y.x;\n}\nint main(){\n\tscanf(\"%lld\",&n);\n\tfor(ll i=1;i<=n;i++){\n        scanf(\"%lld\",&a[i].x);\n        a[i].p=i;\n    }\n   \tfor(ll i=1;i<=n;i++)b[i]=a[i];\n   \tsort(b+1,b+n+1,cmp);\n   \tb[1].z=1;\n   \tfor(ll i=2;i<=n;i++){\n   \t\tif(b[i].x==b[i-1].x)b[i].z=b[i-1].z;\n   \t\telse b[i].z=b[i-1].z+1;\n\t}\n\tfor(ll i=1;i<=n;i++)s[b[i].p]=b[i].z;\n\t//\u79bb\u6563\u5316\uff08\u9632\u7206\u5185\u5b58\uff09 \n\tfor(ll i=1;i<=n;i++){\n\t\tans+=i-1-get(s[i]);//\u53d6\u6709\u591a\u5c11\u4e2a\u503c\u6bd4\u4ed6\u5c0f \n\t\tchange(s[i],1);//\u5c06\u503c\u8bbe\u7f6e\u4e3a1\uff0c\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u5df2\u8ba1\u7b97\u7684\u503c\u518d\u6b21\u88ab\u8ba1\u7b97 \n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1622968215,
        "uid": 401088,
        "name": "xs_siqi",
        "ccfLevel": 6,
        "title": "AT2829\u9898\u89e3"
    },
    {
        "content": "### \u5178\u578b\u7684\u6c42\u9006\u5e8f\u5bf9\u3002\n\n\u62ff\u5230\u8fd9\u9898\uff0c\u6211\u60f3\u5230\u7528\u5192\u6ce1\u6392\u5e8f\u6a21\u62df\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint a[100001];\nint main()\n{\n\tint n,sum=0;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++) cin>>a[i];\n\tfor(int i=1;i<=n-1;i++)\n\t  for(int j=i+1;j<=n;j++)\n\t\tif(a[i]>a[j]) {\n\t\t\tswap(a[i],a[j]);\n\t\t\tsum++;\n\t\t}\n\tcout<<sum<<endl;\n\treturn 0;\n}\n```\n\n\u7ed3\u679c\u3002\u3002\u3002\u53ea\u6709\u56db\u4e2a\u70b9AC\n\n\u6b63\u89e3\u662f**\u6c42\u9006\u5e8f\u5bf9**\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long a[999999],r[999999],ans=0;\nvoid mer(int s,int t)\n{\n\tif(s==t) return ;\n\tint mid=(s+t)/2;\n\tmer(s,mid);\n\tmer(mid+1,t);\n\tint k=s,i=s,j=mid+1;\n\twhile(i<=mid&&j<=t) {\n\t\tif(a[i]>a[j]) {\n\t\t\tr[k]=a[j];\n\t\t\tk++;\n\t\t\tj++;\n\t\t\tans+=mid-i+1;\n\t\t} else {\n\t\t\tr[k]=a[i];\n\t\t\tk++;\n\t\t\ti++;\n\t\t}\n\t}\n\twhile(i<=mid) {\n\t\tr[k]=a[i];\n\t\ti++;\n\t\tk++;\n\t}\n\twhile(j<=t) {\n\t\tr[k]=a[j];\n\t\tk++;\n\t\tj++;\n\t}\n\tfor(int q=s; q<=t; ++q)\n\t\ta[q]=r[q];\n\n}\nint main() {\n\tlong long n;\n\tcin>>n;\n\tfor(int i=1; i<=n; i++) cin>>a[i];\n\tmer(1,n);\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\n\u522b\u5fd8\u5f00\u6c27\u54e6\uff08\u9003",
        "postTime": 1566183757,
        "uid": 186034,
        "name": "Callous_Murder",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "\u849f\u84bb\u521a\u521a\u5b66\u5b8c\u6811\u72b6\u6570\u7ec4\uff0c\u8d76\u7d27\u6765\u505a~~\u6c34~~\u9898\u3002\n\n\u601d\u8def\uff1a\u7528\u6811\u72b6\u6570\u7ec4\uff0c\u7b54\u6848\u5373\u4e3a\u5e8f\u53f7\u51cf\u6bcf\u4e00\u9879\u524d\u7684\u6570\u4e2a\u6570\u7684\u548c\u3002\n\ncode:\n```\n#include<bits/stdc++.h>\nconst int N=1e6+20;\nlong long tree[N],s,n,ans;\nlong long lowbit(long long x){\n\treturn x&(-x);\n}\nvoid update(long long i,long long x){\n\tfor(;i<=n;i+=lowbit(i)) tree[i]+=x;\n}\nlong long query(long long n){\n\tlong long sum=0;\n\tfor(;n>0;n-=lowbit(n)) sum+=tree[n];\n\treturn sum;\n}\n\nint main(){\n\tscanf(\"%lld\",&n);\n\tfor(long long i=1;i<=n;++i){\n\t\tscanf(\"%lld\",&s);\n\t\tupdate(s,1);\n\t\tans+=(i-query(s));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n\u8bf4\u53e5\u95f2\u8bdd\uff0c\u8fd9\u662f\u6211\u89c1\u8fc7\u6570\u636e\u70b9\u6700\u5c11\u7684AT\u7684\u9898\u3002",
        "postTime": 1612938083,
        "uid": 250123,
        "name": "Lycoris_Walnut",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "\u53cc\u500d\u7ecf\u9a8c\uff01([P1908](https://www.luogu.com.cn/problem/P1908))\n### \u9898\u9762\n\u7ed9\u5b9a\u4e00\u4e2a\u6570\u5217a\uff0c\u8fdb\u884c\u5192\u6ce1\u6392\u5e8f\uff0c\u6c42\u603b\u5171\u8fdb\u884c\u591a\u5c11\u8f6e\u64cd\u4f5c\u3002\n### \u601d\u8def\n\u4e4b\u6240\u4ee5\u8981\u8fdb\u884c\u5192\u6ce1\u6392\u5e8f\uff0c\u662f\u56e0\u4e3a\u540e\u9762\u4e00\u4e2a\u6570\u6bd4\u524d\u9762\u4e00\u4e2a\u6570\u5c0f\u3002\u8fd9\u65f6\u6211\u4eec\u5c31\u77e5\u9053\u5f53$a_i$ $\\gt$ $a_j$ \u4e14$i$ $\\lt$ $j$\u65f6\uff0c\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u5192\u6ce1\u6392\u5e8f\u3002\n\n\u8fd9\u662f\u6211\u4eec\u5c31\u4f1a\u53d1\u73b0\uff1a\u4e0a\u9762\u7684\u4e00\u5768~~\u67ff\u5b50~~\u4e0d\u6b63\u597d\u5c31\u662f\u9006\u5e8f\u5bf9\u4e48\uff01\n\n\u7531\u6b64,\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u9898\u76ee\u8f6c\u5316\u6210\uff1a\u6c42\u7ed9\u5b9a\u6570\u5217\u4e2d\uff0c\u6709\u591a\u5c11\u5bf9\u9006\u5e8f\u5bf9\u3002\n\n\u53d1\u73b0\u4e86\u8fd9\u4e2a\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u9006\u5e8f\u5bf9\u505a\u9898\u4e86\u3002\n### \u4ee3\u7801\n\u8fd9\u91cc\u7ed9\u51fa\u4e24\u79cd\u65b9\u6cd5\u3002\n\n\u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9\uff1a\n```cpp\n#include<bits/stdc++.h>\n#include<algorithm>\n#define int long long\nusing namespace std;\nint n;\nint t[500010],r[500050];\nstruct node{\n\tint num,val;\n}a[500010];\nint cmp(node a,node b){\n\tif(a.val==b.val)return a.num<b.num;\n\treturn a.val<b.val; \n}\nint ask(int x){\n\tint ans=0;\n\tfor(;x;x-=(x&-x)){\n\t\tans+=t[x];\n\t}\n\treturn ans;\n}\nvoid add(int x,int y){\n\tfor(;x<=n;x+=(x&-x))t[x]+=y;\n}\nsigned main(){\n\n\tint sum=0;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i].val;\n\t\ta[i].num=i;\n\t}\n\tsort(a+1,a+n+1,cmp);\n\tfor(int i=1;i<=n;i++){\n\t\tr[a[i].num]=i;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tadd(r[i],1);\n\t\tsum+=i-ask(r[i]);\n\t}\n\tcout<<sum<<endl;\n\treturn 0;//\u5b8c\u7ed3\u6492\u82b1\uff01\u273f\u273f\u30fd(\u00b0\u25bd\u00b0)\u30ce\u273f\n}\n```\n\u5408\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\uff1a\n```cpp\n#include<bits/stdc++.h>\n#include<algorithm>\n#define int long long\nusing namespace std;\nconst int maxn=5e5+5;\nint a[maxn],b[maxn],n;\nint sum=0;\nvoid msort(int s,int t){\n\tif(s==t){\n\t\treturn;\n\t}\n\tint mid=(s+t)/2;\n\tmsort(s,mid);\n\tmsort(mid+1,t);\n\tint i=s;\n\tint j=mid+1;\n\tint k=s;\n\twhile(i<=mid&&j<=t){\n\t\tif(a[i]<=a[j]){\n\t\t\tb[k++]=a[i++];\n\t\t}else{\n\t\t\tb[k++]=a[j++];\n\t\t\tsum+=(long long)mid-i+1;\n\t\t}\n\t}\n\twhile(i<=mid){\n\t\tb[k]=a[i];\n\t\tk++;\n\t\ti++;\n\t}\n\twhile(j<=t){\n\t\tb[k]=a[j];\n\t\tk++,j++;\n\t}\n\tfor(int i=s;i<=t;i++){\n\t\ta[i]=b[i];\t\n\t}\n}\nsigned main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i];\n\t}\n\tmsort(1,n);\n\tcout<<sum<<endl;\n\treturn 0;//\u5b8c\u7ed3\u6492\u82b1\uff01\u273f\u273f\u30fd(\u00b0\u25bd\u00b0)\u30ce\u273f\n}\n```\n",
        "postTime": 1610282552,
        "uid": 175922,
        "name": "tommychen",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "\u5206\u6790\u4e00\u4e0b\u9898\u610f\u5427\uff1a\n\n\u5728\u5192\u6ce1\u6392\u5e8f\u4e2d\uff0c\u6bcf\u5f53\u4e00\u4e2a\u6570\u7684\u524d\u9762\u67d0\u4e00\u4e2a\u6570\u6bd4\u5b83\u5927\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u8fdb\u884c\u4e00\u6b21\u4ea4\u6362\u3002\u6240\u4ee5\uff0c\u6c42\u5192\u6ce1\u6392\u5e8f\u7684\u603b\u4ea4\u6362\u6b21\u6570\uff0c\u5c31\u662f\u6c42\u8fd9\u4e2a\u6570\u5217\u7684**\u9006\u5e8f\u5bf9**\u4e2a\u6570\u3002\n\n\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\u53ef\u4ee5\u4f7f\u7528\u6811\u72b6\u6570\u7ec4\u6765\u6c42\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log_2n)$ \u3002\n\n\u4e0d\u8fc7\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\n\n- \u6b64\u9898\u4e2d\u6570\u5b57\u7684\u8303\u56f4\u8f83\u5927\uff0c\u9700\u8981\u5f00 long long \u3002\n- \u4e3a\u4e86\u907f\u514d\u4f7f\u7528\u8fc7\u591a\u7684\u7a7a\u95f4\uff0c\u8bf7\u5148**\u79bb\u6563\u5316**\u3002\n- AtCoder \u7684\u7279\u6027\uff1a\u8f93\u51fa\u540e\u9762\u4e00\u5b9a\u8981\u7a7a\u884c\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define Maxn int(1e5)\n#define lowbit(x) (x&-x)\nusing namespace std;\n\nll n,ans;\nll t[Maxn+5];\n\ninline void Update(ll x,ll y)//\u66f4\u65b0\n{\n\tll now=x;\n\twhile(now<=Maxn)\n\t{\n\t\tt[now]+=y;\n\t\tnow+=lowbit(now);\n\t}\n}\ninline ll Count(ll x)//\u67e5\u8be2\n{\n\tll now=x,cnt=0;\n\twhile(now>0)\n\t{\n\t\tcnt+=t[now];\n\t\tnow-=lowbit(now);\n\t}\n\treturn cnt;\n}\n\nstruct Number\n{\n\tll k,id,rank;\n} num[Maxn+5];\n\nnamespace Discrete//\u79bb\u6563\u5316\uff08\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u80fd\u6709\u70b9\u4e0d\u4e00\u6837\uff09\n{\n\tinline bool cmp1(Number x,Number y)\n\t{\n\t\treturn x.k<y.k;\n\t}\n\tinline bool cmp2(Number x,Number y)\n\t{\n\t\treturn x.id<y.id;\n\t}\n\t\n\tvoid Run()\n\t{\n\t\tll nowrank=0;\n\t\tsort(num+1,num+n+1,cmp1);\n\t\tfor(register ll i=1;i<=n;++i)\n\t\t{\n\t\t\tif(i==1 || num[i].k>num[i-1].k)\n\t\t\t\t++nowrank;\n\t\t\tnum[i].rank=nowrank;\n\t\t}\n\t\tsort(num+1,num+n+1,cmp2);\n\t}\n} \n\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(register ll i=1;i<=n;++i)\n\t{\n\t\tll a;\n\t\tscanf(\"%lld\",&a);\n\t\tnum[i].k=a;\n\t\tnum[i].id=i;\n\t}\n\tDiscrete::Run();\n\tfor(register ll i=1;i<=n;++i)\n\t{\n\t\tll a=num[i].rank;\n\t\tans+=(Count(Maxn)-Count(a));\n\t\tUpdate(a,1);\n\t}\n\tprintf(\"%lld\\n\",ans);\n    return 0;\n}\n\n```\n",
        "postTime": 1587901930,
        "uid": 148913,
        "name": "Graphcity",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "\u8fd9\u4e00\u9898\u8ddf[P1908](https://www.luogu.org/problemnew/show/P1908)\u662f\u53cc\u500d\u7ecf\u9a8c  \n\u53ef\u4ee5\u770b\u51fa\u9898\u9762\u4e2d\u7684\u201c\u8fdb\u884c\u5192\u6ce1\u6392\u5e8f\u3002 \u8f93\u51fa\u603b\u5171\u8fdb\u884c\u591a\u5c11\u6b21\u4ea4\u6362\u201d\u662f\u4e00\u4e2a\u5f88\u660e\u663e\u7684\u9006\u5e8f\u5bf9\u6a21\u578b  \n\u56e0\u4e3a\u9006\u5e8f\u5bf9\u7684\u5b9a\u4e49\u662f\uff1a\u5e8f\u5217\u4e2d$a_i>a_j$\u4e14$i<j$\u7684\u6709\u5e8f\u5bf9  \n\u663e\u7136\uff0c\u8fd9\u6837\u7684\u4e00\u7ec4\u9006\u5e8f\u5bf9\u6211\u4eec\u5c31\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u5192\u6ce1\u6392\u5e8f  \n\u6240\u4ee5\u6700\u540e\u7684\u6b21\u6570\u5c31\u662f\u5192\u6ce1\u6392\u5e8f\u7684\u6b21\u6570  \n\u4f7f\u7528\u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint a[1000001],r[1000001],n;\nlong long ans;\nvoid msort(int s,int t)\n{\n    if(s==t) \n        return ;\n    int mid=(s+t)/2;\n    msort(s,mid);\n    msort(mid+1,t);\n    int i=s,j=mid+1,k=s;\n    while(i<=mid&&j<=t){\n        if(a[i]<=a[j])\n            r[k]=a[i],k++,i++;\n        else{\n            r[k]=a[j],k++,j++;\n            ans += mid-i+1;\n        }\n    }\n    while(i<=mid)\n        r[k]=a[i],k++,i++;\n    while(j<=t)\n        r[k]=a[j],k++,j++;\n    for(int i=s;i<=t;i++)\n        a[i]=r[i];\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++) \n        scanf(\"%d\",&a[i]);\n    msort(1,n);\n    cout << ans;\n    return 0;\n}\n```",
        "postTime": 1557137170,
        "uid": 105230,
        "name": "Retired_Doubeecat",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 AT2829 \u3010\u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "## 0x01 \u601d\u8def\n\u7ecf\u5178\u7684[**\u6c42\u9006\u5e8f\u5bf9**](https://baike.baidu.com/item/%E9%80%86%E5%BA%8F%E5%AF%B9/11035554?fr=aladdin)\u95ee\u9898\u3002  \n\u6211\u4eec\u90fd\u77e5\u9053\u5f52\u5e76\u6392\u5e8f\uff0c\u53ef\u4ee5\u8003\u8651\u600e\u4e48\u628a\u5f52\u5e76\u6392\u5e8f\u7684\u601d\u8def\u5e94\u7528\u5230\u6c42\u9006\u5e8f\u5bf9\u4e0a\u3002  \n\u5728\u5f52\u5e76\u6392\u5e8f\u4e2d\uff0c\u5148\u5c06\u5de6\u5b50\u5e8f\u5217\u6392\u5e8f\uff0c\u518d\u5c06\u53f3\u5b50\u5e8f\u5217\u6392\u5e8f\uff0c\u6700\u540e\u5408\u5e76\u3002  \n\u90a3\u4e48\uff0c\u5047\u8bbe\u5f52\u5e76\u6392\u5e8f\u65f6\u5df2\u7ecf\u6c42\u51fa\u5de6\u5b50\u5e8f\u5217\u548c\u53f3\u5b50\u5e8f\u5217\u7684\u9006\u5e8f\u5bf9\u4e2a\u6570\u4e4b\u548c\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u7edf\u8ba1 **\u6a2a\u8de8** \u5de6\u53f3\u5b50\u5e8f\u5217\u7684\u9006\u5e8f\u5bf9\u4e2a\u6570\u5373\u53ef\u3002  \n\u5f88\u7b80\u5355\uff1a\u6bcf\u5f53\u6709\u4e00\u4e2a\u53f3\u5b50\u5e8f\u5217\u7684\u6570\u88ab\u653e\u5230\u8f85\u52a9\u6570\u7ec4\u4e2d\u65f6\uff0c\u5de6\u5b50\u5e8f\u5217\u7684\u5269\u4e0b\u6240\u6709\u6570 **\u90fd\u6bd4\u8fd9\u4e2a\u6570\u5927** \uff0c\u76f4\u63a5\u7edf\u8ba1\u5373\u53ef\u3002  \n\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\uff1a\n- \u4e0d\u91cd  \n\u6bcf\u4e2a\u9006\u5e8f\u5bf9 $(a_i,a_j)$ \u53ea\u4f1a\u88ab $a_j$ \u7edf\u8ba1\u4e00\u6b21\u3002\n- \u4e0d\u6f0f  \n\u6bcf\u4e2a\u9006\u5e8f\u5bf9 $(a_i,a_j)$ \u80af\u5b9a\u88ab $a_j$ \u7edf\u8ba1\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\Theta(n\\log n)$\uff0c\u548c\u5f52\u5e76\u6392\u5e8f\u7684\u590d\u6742\u5ea6\u76f8\u540c\u3002\n\n## 0x02 \u4ee3\u7801\n```cpp\n#include <cstdio>\n#define _rep(i_,a_,b_) for(int i_ = a_;i_ <= b_;++i_)\ntypedef long long ll;\nusing namespace std;\nconst int kN = 1005000;\nint a[kN],b[kN];\nll cnt;\nvoid mergeSort(int L,int R){\n\tif(L == R)return;\n\tint mid = L+R>>1;\n\tmergeSort(L,mid);\n\tmergeSort(mid+1,R);\n\tint pL = L,pR = mid + 1;\n\t_rep(i,L,R){\n\t\tif(pL <= mid && (pR > R || a[pR] >= a[pL]))b[i] = a[pL++];\n\t\telse b[i] = a[pR++],cnt += mid - pL + 1;\n\t}\n\t_rep(i,L,R)a[i] = b[i]; \n}\nint main(){\n\tint n;\n\twhile(~scanf(\"%d\",&n)){\n\t\t_rep(i,1,n)\n\t\t\tscanf(\"%d\",a+i);\n\t\tcnt = 0;\n\t\tmergeSort(1,n);\n\t\tprintf(\"%lld\\n\",cnt);\n\t}\n    return 0;\n}\n```",
        "postTime": 1628748640,
        "uid": 366338,
        "name": "fjy666",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u3010AT2829 \u8ee2\u5012\u6570\u3011"
    },
    {
        "content": "## \u6811\u72b6\u6570\u7ec4\u7684\u7ec3\u624b\u9898\n\u7531\u4e8e\u662f\u5192\u6ce1\u6392\u5e8f\uff0c\u6211\u4eec\u8fd9\u91cc\u8003\u8651\u4ee5\u4e0b\u65b9\u6cd5\u7684\u5192\u6ce1\uff1a\n```cpp\nfor(int i = 1; i < n; i++){\n\tfor(int j = n - i; j >= 1; j--){\n\t\tif(b[j] > b[j + 1]) b[0] = b[j], b[j] = b[j + 1], b[j + 1] = b[0];\n\t}\n}\n```\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u53ea\u6709\u5b83\u540e\u9762\u4e14\u6bd4\u5b83\u5c0f\u7684\u4f4d\u7f6e\u5f80\u524d\u79fb\u624d\u4f1a\u4e0e\u5b83\u4ea7\u751f\u4ea4\u6362\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4ece\u540e\u5f80\u524d\u679a\u4e3e\u6bcf\u4e00\u4e2a\u6570\u5b57\uff0c\u7528\u4ee5\u503c\u4e3a\u5173\u952e\u5b57\u7684\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\uff0c\u6bcf\u679a\u4e3e\u5230\u4e00\u4e2a\u4f4d\u7f6e\u5c31\u653e\u8fdb\u6811\u72b6\u6570\u7ec4\uff0c\u7136\u540e\u6c42\u51fa\u6811\u72b6\u6570\u7ec4\u4e2d\u6bd4\u5b83\u5c0f\u7684\u4f4d\u7f6e\u7684\u603b\u548c\uff0c\u7d2f\u52a0\u8fdbsum\u91cc\u3002\n\n## AC Code\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n, sum;\nint a[100005], tree[100005];\ninline int read(){\n\tint x = 0, m = 1;\n\tchar ch = getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch == '-') m = -1;\n\t\tch = getchar();\n\t}\n\twhile(isdigit(ch)){\n\t\tx = x * 10 + ch - 48;\n\t\tch = getchar();\n\t}\n\treturn x * m;\n}\ninline void write(int x){\n\tif(x < 0){\n\t\tputchar('-');\n\t\twrite(-x);\n\t\treturn;\n\t}\n\tif(x >= 10) write(x / 10);\n\tputchar(x % 10 + '0');\n}\nint lowbit(int x){\n\treturn x & -x;\n}\nvoid add(int x){\n\twhile(x <= n){\n\t\ttree[x]++;\n\t\tx += lowbit(x);\n\t}\n}\nint query(int x){\n\tint y = 0;\n\twhile(x){\n\t\ty += tree[x];\n\t\tx -= lowbit(x);\n\t}\n\treturn y;\n}\nsigned main(){\n\tn = read();\n\tfor(int i = 1; i <= n; i++) a[i] = read();\n\tfor(int i = n; i >= 1; i--){\n\t\tadd(a[i]);\n\t\tsum += query(a[i] - 1);\n\t}\n\twrite(sum);\n}\n```\n",
        "postTime": 1619175473,
        "uid": 188286,
        "name": "cjZYZtcl",
        "ccfLevel": 6,
        "title": "AT2829 \u8ee2\u5012\u6570 \u9898\u89e3"
    },
    {
        "content": "\u8f93\u5165\u5e8f\u5217a\uff0c\u8fdb\u884c\u5192\u6ce1\u6392\u5e8f\u3002 \u8f93\u51fa\u603b\u5171\u8fdb\u884c\u591a\u5c11\u6b21\u4ea4\u6362\u3002\u7531\u9898\u610f\u53ef\u77e5~~\u672c\u9898\u53ef\u5c06\u6570\u7ec4\u8fdb\u884c\u5192\u6ce1\u6392\u5e8f\uff0c\u8bbe\u53d8\u91cfcnt\u7528\u4e8e\u8ba1\u6570\uff0c\u6bcf\u6b21\u4ea4\u6362cnt++~~\u3002(TLE\u8b66\u544a)\n\n\n\u6211\u4eec\u77e5\u9053\u5192\u6ce1\u6392\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a ```O(n^2)``` \u663e\u7136\u5728\u8fd9\u9898\u4f1a\u8d85\u65f6\u3002\u3002\u3002\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5229\u7528**\u5f52\u5e76\u6392\u5e8f**\u7684\u6027\u8d28\u53bb\u6c42\u9006\u5e8f\u5bf9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u88ab\u4f18\u5316\u5230\u4e86 ```O(nlogn)```\uff0c\u672c\u9898\u53ef\u8fc7\u3002\n\n\u5199\u6cd5\u548c\u5f52\u5e76\u6392\u5e8f\u5927\u540c\u5c0f\u5f02\uff0c\u6ca1\u5b66\u5f52\u5e76\u6392\u5e8f\u7684\u540c\u5b66\u53ef\u4ee5\u5148\u53bb\u5b66\u4e60\u4e0b\u518d\u56de\u6765\u770b\u8fd9\u9898\uff0c\u53ea\u4e0d\u8fc7\u6709\u4e9b\u5c0f\u7ec6\u8282\u8981\u6ce8\u610f\u4e0b\u3002(\u8bb0\u5f97\u5f00long long\uff0c~~\u4e0d\u7136\u6574\u9898\u767d\u7ed9~~)\n\nac\u7a0b\u5e8f\n------------\n \n\n```\n#include <iostream>\n#include <cstdio>\nusing namespace std;\nconst int N=100010;\nint a[N],tmp[N],n;\n\nlong long merge_find(int l,int r)//\n{\n    if (l>=r) return 0;\n\n    int mid = l+r >> 1;\n    long long cnt=merge_find(l,mid)+merge_find(mid+1,r);//\u9012\u5f52\u7684\u624b\u6cd5\u53bb\u62c6\u5206\u533a\u95f4\uff0c\u603b\u7684\u9006\u5e8f\u5bf9\u6570\u7b49\u4e8e\u5de6\u534a\u533a\u95f4\u7684\u9006\u5e8f\u5bf9\u6570\u4e0e\u53f3\u534a\u533a\u95f4\u7684\u9006\u5e8f\u5bf9\u6570\u4e4b\u548c\n    int k=0,i=l,j=mid+1;//i\u6307\u5411\u5de6\u534a\u533a\u95f4\u7684\u5934\u90e8\uff0cj\u6307\u5411\u53f3\u534a\u533a\u95f4\u7684\u5934\u90e8\n    while (i<=mid&&j<=r)\n    {\n        if (a[i]<=a[j])\n        {\n            tmp[k++]=a[i++];\n        }\n        else\n        {\n            tmp[k++]=a[j++];\n        cnt+=mid-i+1;//\u82e5\u53f3\u534a\u533a\u95f4\u7684a[j]\u5927\u4e8e\u5de6\u534a\u533a\u95f4\u7684a[i]\uff0c\u663e\u7136\u4e24\u4e2a\u6570\u662f\u9006\u5e8f\u5bf9\uff0c\u6570\u91cf\u4e3amid-i+1\n        }\n    }\n    while (i<=mid) tmp[k++]=a[i++];\n    while (j<=r) tmp[k++]=a[j++];\n    for (int i=l,j=0;i<=r;i++,j++)\n    {\n        a[i]=tmp[j];\n    }\n    return cnt;\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for (int i=0;i<n;i++)//\u8bfb\u5165\u6570\u636e\n    {\n        scanf(\"%d\",&a[i]);\n    }\n    printf(\"%lld\",merge_find(0,n-1));//\u8bb0\u5f97long long\u6570\u8f93\u51fa\u8981%lld\n    return 0;\n}\n```",
        "postTime": 1613667189,
        "uid": 428310,
        "name": "thhxxx",
        "ccfLevel": 0,
        "title": "AT2829\u9898\u89e3"
    }
]
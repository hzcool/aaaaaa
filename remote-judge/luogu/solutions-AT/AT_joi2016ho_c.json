[
    {
        "content": "\u8fd9\u662f\u6211\u4eec\u7684\u6a21\u62df\u8d5b\u9898\uff0c\u6211\u6210\u529f\u5207\u6389\u6b64\u9898\u6210\u4e3a\u5168\u573a\u552f\u4e00\u4e00\u4e2a$AC$\uff08\u6709\u4e00\u4e2a\u5de8\u4f6c\u6570\u7ec4\u5f00\u5c0f\u4e86\uff09\n\n\u800c\u4e14\u5c31\u6211\u662f\u5728\u7ebf\u7684\uff01\u5176\u4ed6\u4eba\u90fd\u662f\u79bb\u7ebf\u3002\u3002\u3002\n\n\u9996\u5148\u4e00\u6761\u8fb9\u6539\u53d8\u4e86\u6743\u503c\u53ef\u4ee5\u5f53\u6210\u65ad\u8fb9\u5904\u7406\u3002\n\n\u8003\u8651\u5efa\u51fa\u6700\u77ed\u8def\u6811\u3002\u4f46\u662f\u4e00\u68f5\u6811\u8fb9\u65ad\u6389\u4e86\uff0c\u53ef\u80fd\u8fd8\u6709\u53e6\u4e00\u6761\u6700\u77ed\u8def\u600e\u4e48\u529e\u5462\uff1f\n\n\u90a3\u5c31\u5efa\u51fa\u201c\u6700\u77ed\u8def\u56fe\u201d\uff0c\u6ee1\u8db3$1$\u53f7\u8282\u70b9\u5230\u6bcf\u4e00\u4e2a\u8282\u70b9\u7684\u4efb\u610f\u4e00\u6761\u8def\u5f84\u90fd\u662f\u4e00\u6761\u6700\u77ed\u8def\uff01\u7531\u4e8e\u8fb9\u6743\u90fd\u662f$1$\uff0c\u8fd9\u4e2a\u662f\u53ef\u4ee5\u76f4\u63a5\u5efa\u51fa\u6765\u7684\u3002\n\n\u800c\u4e14\u8fd9\u4e2a\u201c\u6700\u77ed\u8def\u56fe\u201d\u662f\u4e00\u4e2a$DAG!!!$\n\n\u65ad\u6389\u4e00\u6761\u8fb9\uff0c\u5c31\u5728\u6700\u77ed\u8def\u56fe\u4e0a\u5bf9\u5e94\u7ec8\u70b9\u7684\u5165\u5ea6\u51cf\u4e00\uff0c\u5982\u679c\u5165\u5ea6\u51cf\u4e3a$0$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u5c31\u4e0d\u80fd\u5230\u8fbe\u4e86\uff0c\u518d\u628a\u8fd9\u4e2a\u70b9\u7684\u51fa\u8fb9\u5168\u90e8\u7ed9\u5220\u6389\uff0c\u7ee7\u7eed\u5224\u65ad\u8fd9\u4e2a\u70b9\u51cf\u540e\u5165\u5ea6\u662f\u5426\u4e3a$0$\uff0c\u7ee7\u7eed\u6267\u884c\u3002\u8fd9\u6837\u53ef\u4ee5\u7528\u7c7b\u4f3c\u4e8e\u62d3\u6251\u6392\u5e8f\u7684\u65b9\u6cd5\u5b9e\u73b0\u3002\n\n\u590d\u6742\u5ea6\u4e3a$O(N+M+Q)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define ljc 998244353\nusing namespace std;\n#ifdef Fading\n#define gc getchar\n#endif\n#ifndef Fading\ninline char gc(){\n\tstatic char now[1<<16],*S,*T;\n\tif (T==S){T=(S=now)+fread(now,1,1<<16,stdin);if (T==S) return EOF;}\n\treturn *S++;\n}\n#endif\ninline ll read(){\n    register ll x=0,f=1;char ch=gc();\n    while (!isdigit(ch)){if(ch=='-')f=-1;ch=gc();}\n    while (isdigit(ch)){x=(x<<3)+(x<<1)+ch-'0';ch=gc();}\n    return (f==1)?x:-x;\n}\nint dep[1000001],Q,n,m,head[1000001],tot,heade[1000001],tote;\nstruct edge{\n\tint from,to,nxt,ID;\n}g[1000001],e[1000001];\ninline void made(int from,int to){\n\tg[++tot].to=to;g[tot].nxt=head[from];head[from]=tot;\n\tg[tot].from=from;\n}\nint indo[1000001];\ninline void maded(int from,int to){\n\te[++tote].to=to;e[tote].nxt=heade[from];heade[from]=tote;\n\te[tote].from=from;indo[to]++;\n}\nint vis[1000001];\ninline void bfs(){\n\tfor (int i=1;i<=n;i++) dep[i]=999999999;\n\tdep[1]=0;\n\tqueue<int> dl;\n\twhile (!dl.empty()) dl.pop();\n\tdl.push(1);\n\twhile (!dl.empty()){\n\t\tint u=dl.front();dl.pop();\n\t\tfor (int i=head[u];i;i=g[i].nxt){\n\t\t\tint v=g[i].to;\n\t\t\tif (dep[v]==999999999)\n\t\t\t\tdep[v]=dep[u]+1,dl.push(v);\n\t\t}\n\t}\n\tfor (int i=1;i<=tot;i++){\n\t\tint u=g[i].from,v=g[i].to;\n\t\tif (dep[u]+1==dep[v]) maded(u,v),g[i].ID=tote;\n\t}\n}\nsigned main(){\n\tn=read(),m=read(),Q=read();\n\tfor (int i=1;i<=m;i++){\n\t\tint x=read(),y=read();made(x,y);made(y,x);\n\t}\n\tbfs();\n\tint ANS=0;\n\tqueue<int> dl;\n\twhile (Q--){\n\t\tint x=read();\n\t\tint ed=0;\n\t\tif (g[2*x].ID) ed=g[2*x].ID;\n\t\telse if (g[2*x-1].ID) ed=g[2*x-1].ID;\n\t\tif (ed&&!vis[ed]){\n\t\t\tindo[e[ed].to]--;vis[ed]=1;\n\t\t\tif (indo[e[ed].to]<=0){\n\t\t\t\twhile (!dl.empty()) dl.pop();\n\t\t\t\tdl.push(e[ed].to);\n\t\t\t\twhile (!dl.empty()){\n\t\t\t\t\tint u=dl.front();dl.pop();\n\t\t\t\t\tANS++;\n\t\t\t\t\tfor (int i=heade[u];i;i=e[i].nxt){\n\t\t\t\t\t\tif (vis[i]) continue;\n\t\t\t\t\t\tvis[i]=1;\n\t\t\t\t\t\tif ((--indo[e[i].to])<=0){\n\t\t\t\t\t\t\tdl.push(e[i].to);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tprintf(\"%d\\n\",ANS);\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1559368624,
        "uid": 20309,
        "name": "Fading",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AT2439 \u3010\u300cJOI 2015/2016 \u51b3\u8d5b\u300d\u94c1\u8def\u7968\u4ef7\uff08\u9244\u9053\u904b\u8cc3\uff09\u3011"
    }
]
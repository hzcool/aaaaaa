[
    {
        "content": "\u9996\u5148\u611f\u89c9\u65e0\u4ece\u4e0b\u624b\uff1f\u8003\u8651\u6362\u4e00\u4e2a\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u4f53\uff08\u8fd9\u662f\u4e2a\u60ef\u7528\u5957\u8def\uff09\uff08\u4e00\u5f00\u59cb\u662f\u70b9\u7684\u96c6\u5408\uff0c\u540e\u6765\u6211\u53c8\u60f3\u6362\u6210\u77e9\u5f62\uff0c\u53d1\u73b0\u4ecd\u7136\u4e0d\u53ef\u505a\uff0c\u5c31\u504f\u504f\u6ca1\u6709\u60f3\u5230\u6362\u6210\u70b9\uff09\u3002\n\n\u663e\u7136\uff0c\u70b9\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662f\u6709\u591a\u5c11\u4e2a\u96c6\u5408\u751f\u6210\u7684\u77e9\u5f62\u5305\u542b\u8fd9\u4e2a\u70b9\u3002\u77e5\u9053\u4e86\u8fd9\u4e2a\u5c31\u5e76\u4e0d\u662f\u5f88\u96be\u4e86\u3002\u6211\u4eec\u8003\u8651\u4ee5\u8be5\u70b9\u4e3a\u539f\u70b9\u5efa\u7acb\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\uff0c\u7136\u540e\u96c6\u5408\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n1. \u5305\u542b\u8be5\u70b9\uff0c\u6b64\u65f6\u77e9\u5f62\u663e\u7136\u4e00\u5b9a\u5305\u542b\u8be5\u70b9\uff0c\u5219\u8d21\u732e\u662f $2^{n-1}$\uff1b\n1. \u4e0d\u5305\u542b\u8be5\u70b9\u3002\u90a3\u4e48\u663e\u7136\uff0c\u8be5\u70b9\u88ab\u77e9\u5f62\u5305\u542b\u5f53\u4e14\u4ec5\u5f53\u4e00\u3001\u4e09\u8c61\u9650\u90fd\u6709\u70b9\u6216\u4e8c\u3001\u56db\u8c61\u9650\u90fd\u6709\u70b9\u3002\u7136\u540e\u56db\u4e2a\u8c61\u9650\u7684\u70b9\u6570\u662f\u4e2a\u4e8c\u7ef4\u6570\u70b9\u95ee\u9898\uff0c\u8fd9\u662f\u4e2a\u9759\u6001\u7684\uff0c\u4e8e\u662f\u53ef\u4ee5\u5bf9\u4e00\u7ef4\u6392\u5e8f\u6765\u964d\u7ef4\uff0c\u4ece\u800c\u4f7f\u7528 BIT 1log \u89e3\u51b3\u3002\u7136\u540e\u4f60\u5982\u679c\u628a\u4e24\u79cd\u90fd\u7b97\u4e0a\u53bb\u7684\u8bdd\uff0c\u90a3\u4f1a\u6709\u4e00\u4e8c\u4e09\u56db\u8c61\u9650\u90fd\u6709\u70b9\u7684\u91cd\u590d\u60c5\u51b5\uff0c\u90a3\u8fd9\u662f\u4e2a\u7b80\u5355\u5bb9\u65a5\uff0c\u51cf\u4e00\u4e0b\u5373\u53ef\u3002\n\n\u4e5f\u5c31\u662f\uff0c\u8bbe\u56db\u4e2a\u8c61\u9650\u7684\u70b9\u6570\u5206\u522b\u4e3a $I,II,III,IV$ \u7684\u8bdd\uff0c\u90a3\u4e48\u8d21\u732e\u662f\uff1a\n\n$$\\begin{aligned}&2^{n-1}+\\\\&\\!\\left(2^{II}-1\\right)\\!\\left(2^{IV}-1\\right)\\!2^{I}2^{III}+\\\\&\\!\\left(2^{I}-1\\right)\\!\\left(2^{III}-1\\right)\\!2^{II}2^{IV}-\\\\&\\!\\left(2^{II}-1\\right)\\!\\left(2^{IV}-1\\right)\\!\\left(2^{I}-1\\right)\\!\\left(2^{III}-1\\right)\\end{aligned}$$\n\n\u7136\u540e\u5c31\u505a\u5b8c\u4e86\uff0c\u590d\u6742\u5ea6\u7ebf\u6027\u5bf9\u6570\u3002\n\n**_[code](https://www.luogu.com.cn/paste/wl0p4qw3)_**",
        "postTime": 1606487928,
        "uid": 138400,
        "name": "chenxia25",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AT4851 \u3010[ABC136F] Enclosed Points\u3011"
    },
    {
        "content": "\u5bb9\u65a5\u4e00\u822c\u9898\u3002\n\n\u6211\u4eec\u8003\u8651\u5bf9\u4e8e\u4e00\u4e2a\u70b9\uff0c\u5b83\u4f55\u65f6\u80fd\u591f\u88ab\u5305\u542b\u5728\u4e00\u4e2a\u77e9\u5f62\u4e2d\uff1a\n\n\u6211\u4eec\u4ee5\u8be5\u70b9\u4e3a\u539f\u70b9\uff0c\u5efa\u7acb\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u3002\u5219\u663e\u7136\uff0c\u6ca1\u6709\u5728\u5750\u6807\u8f74\u4e0a\u7684\u70b9\uff08\u56e0\u4e3a\u9898\u76ee\u4fdd\u8bc1\u4e86 $x,y$ \u5750\u6807\u4e92\u4e0d\u76f8\u540c\uff09\u3002\u5219\uff0c\u53ea\u8981 $\\text{I},\\text{III}$ \u8c61\u9650\u4e2d\u5404\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\uff0c\u8be5\u70b9\u5c31\u4f1a\u88ab\u5305\u542b\u5728\u77e9\u5f62\u5f53\u4e2d\uff1b\u540c\u7406\uff0c\u53ea\u8981 $\\text{II},\\text{IV}$ \u8c61\u9650\u4e2d\u5404\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\uff0c\u8be5\u70b9\u4ecd\u4f1a\u88ab\u5305\u542b\u5728\u77e9\u5f62\u5f53\u4e2d\u3002\u540c\u65f6\uff0c\u6211\u4eec\u9700\u8981\u5bb9\u65a5\u4e00\u4e0b\uff0c\u51cf\u6389\u56db\u4e2a\u8c61\u9650\u4e2d\u90fd\u6709\u70b9\u7684\u60c5\u5f62\u3002\n\n\u540c\u65f6\uff0c\u4ee5\u4e0a\u6240\u6709\u60c5\u5f62\u90fd\u662f\u5728\u8be5\u70b9\u672a\u51fa\u73b0\u5728\u96c6\u5408\u5185\u7684\u60c5\u51b5\u4e0b\u624d\u80fd\u88ab\u8003\u8651\u7684\uff1b\u5f53\u8be5\u70b9\u672c\u8eab\u5c31\u5728\u96c6\u5408\u5185\u65f6\uff0c\u5b83\u5fc5\u5b9a\u5b58\u5728\u4e8e\u77e9\u5f62\u5185\u3002\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u8bbe $\\text{I},\\text{II},\\text{III},\\text{IV}$ \u5206\u522b\u8868\u793a $2^{\\text{\u5404\u8c61\u9650\u5185\u7684\u8282\u70b9\u6570}}$\uff0c\u5219\u6709\u8be5\u8282\u70b9\u5171\u5728\n\n$$(\\text{I}-1)\\text{II}(\\text{III}-1)\\text{IV}+\\text{I}(\\text{II}-1)\\text{III}(\\text{IV}-1)-(\\text{I}-1)(\\text{II}-1)(\\text{III}-1)(\\text{IV}-1)+2^{n-1}$$\n\n\u4e2a\u96c6\u5408\u5185\u51fa\u73b0\u4e86\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5c31\u4e8c\u7ef4\u6570\u70b9\u4e00\u4e0b\u6c42\u51fa\u6bcf\u4e2a\u8282\u70b9\u56db\u4e2a\u8c61\u9650\u5185\u7684\u8282\u70b9\u6570\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mod=998244353;\nint n,a[200100][4],s[200100],t[200100],ord[200100],bin[200100],res;\npair<int,int>p[200100];\nvoid ADD(int x){\n\tfor(int i=x;i;i-=i&-i)s[i]++;\n\tfor(int i=x;i<=n;i+=i&-i)t[i]++;\n}\nint SS(int x){int ret=0;while(x<=n)ret+=s[x],x+=x&-x;return ret;}\nint TT(int x){int ret=0;while(x)ret+=t[x],x-=x&-x;return ret;}\nint main(){\n\tscanf(\"%d\",&n),bin[0]=1;\n\tfor(int i=1;i<=n;i++)scanf(\"%d%d\",&p[i].first,&p[i].second),ord[i]=i,bin[i]=(bin[i-1]<<1)%mod;\n\tsort(ord+1,ord+n+1,[](int u,int v){return p[u].first<p[v].first;});\n\tfor(int i=1;i<=n;i++)p[ord[i]].first=i;\n\tsort(ord+1,ord+n+1,[](int u,int v){return p[u].second<p[v].second;});\n//\tfor(int i=1;i<=n;i++)printf(\"%d %d\\n\",p[i].first,p[i].second);\n\tmemset(s,0,sizeof(s)),memset(t,0,sizeof(t));\n\tfor(int i=1;i<=n;i++)a[ord[i]][0]=SS(p[ord[i]].first),a[ord[i]][1]=TT(p[ord[i]].first),ADD(p[ord[i]].first);\n\tmemset(s,0,sizeof(s)),memset(t,0,sizeof(t));\n\tfor(int i=n;i>=1;i--)a[ord[i]][2]=SS(p[ord[i]].first),a[ord[i]][3]=TT(p[ord[i]].first),ADD(p[ord[i]].first);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=0;j<4;j++)a[i][j]=bin[a[i][j]];\n\t\t(res+=1ll*(a[i][0]-1)%mod*(a[i][3]-1)%mod*a[i][1]%mod*a[i][2]%mod)%=mod;\n\t\t(res+=1ll*(a[i][1]-1)%mod*(a[i][2]-1)%mod*a[i][0]%mod*a[i][3]%mod)%=mod;\n\t\t(res+=mod-1ll*(a[i][0]-1)%mod*(a[i][1]-1)%mod*(a[i][2]-1)%mod*(a[i][3]-1)%mod)%=mod;\n\t\t(res+=bin[n-1])%=mod;\n\t}\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}\n```",
        "postTime": 1606477385,
        "uid": 123369,
        "name": "xtx1092515503",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT4851 \u3010[ABC136F] Enclosed Points\u3011"
    }
]
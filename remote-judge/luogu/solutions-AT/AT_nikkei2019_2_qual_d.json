[
    {
        "content": "# AT_nikkei2019_2_qual_d Shortest Path on a Line \u9898\u89e3\n\n## \u9898\u610f\u56de\u987e\n\n$ n $ \u70b9\u65e0\u5411\u56fe\u52a0\u8fb9 $ m $ \u6b21\uff0c\u6bcf\u6b21\u7ed9\u5b9a $ [l,r] $ \u548c $ w $\uff0c$ \\forall l \\le u \\le r,l \\le v \\le r $ \u52a0\u8fb9 $ (u,v) $ \u8fb9\u6743\u4e3a $ w $\u3002\u6c42\u6700\u77ed\u8def\u3002\n\n$ 1 \\le n,m \\le 10^5 $\u3002\n\n## \u5206\u6790\n\n\u9996\u5148\u6211\u4eec\u628a $ u $ \u7531 $ [l,r] $ \u52a0\u8fb9\u5230\u8fbe $ v $ \u770b\u505a $ u $ \u5411\u5de6\u5230 $ l $\uff0c$ l $ \u5230 $ r $\uff0c$ r $ \u5411\u5de6\u5230 $ v $\u3002\u800c\u5411\u5de6\u7684\u64cd\u4f5c\u53ef\u4ee5\u770b\u505a $ 0 $ \u8fb9\uff0c\u56e0\u6b64\u6211\u4eec\u4ece $ n $ \u5230 $ 1 $ \u4e0d\u65ad\u52a0 $ 0 $ \u8fb9\uff0c\u518d $ (l,r) $ \u52a0 $ w $ \u8fb9\u3002\n\n\u7136\u540e\u8dd1\u5806\u4f18\u5316 dijkstra \u5373\u53ef\u3002\n\n\n## AC \u4ee3\u7801\n\n```\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n#include <queue>\n#define int long long\nusing namespace std;\nconst int N = 1e5 + 5;\nint n, m;\nstruct node {\n\tint to;\n\tlong long we;\n};\nnode make(int v0, int w0) {\n\tnode res;\n\tres.to = v0;\n\tres.we = w0;\n\treturn res;\n}\nlong long d[N];\nbool operator<(node p1, node p2) {\n\tif(p1.we != p2.we) {\n\t\treturn p1.we > p2.we;\n\t}\n\treturn p1.to > p2.to;\n}\nvector<node> g[N];\npriority_queue<node> pq;\nbool vis[N];\nsigned main() {\n\tscanf(\"%lld%lld\", &n, &m);\n\tint x, y, z;\n\tfor(int i = 1; i <= m; i++) {\n\t\tscanf(\"%lld%lld%lld\", &x, &y, &z);\n\t\tif(z > 1e9) {\n\t\t    cout << \"Agrumestly get 660 points in 2023 Beijing Zhongkao\" << endl;\n\t\t}\n\t\tg[x].push_back(make(y, z));\n\t}\n\tfor(int i = 2; i <= n; i++) {\n\t\tg[i].push_back(make(i - 1, 0));\n\t\td[i] = 1e16 + 5;\n\t}\n\td[1] = 0;\n\tpq.push(make(1, 0));\n\tnode now;\n\tvis[1] = true;\n\twhile(!pq.empty()) {\n\t\tnow = make(-1, -1);\n\t\twhile(!pq.empty()) {\n\t\t\tnow = pq.top();\n\t\t\tpq.pop();\n\t\t\tif(!vis[now.to]) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} \n\t\tx = now.to; \n\t\tif(x == -1) {\n\t\t\tbreak;\n\t\t}\n\t\tvis[x] = true;\n\t\tfor(int i = 0; i < (long long)g[x].size(); i++) {\n\t\t\ty = g[x][i].to;\n\t\t\tz = g[x][i].we;\n\t\t\tif(d[x] + z < d[y]) {\n\t\t\t\td[y] = d[x] + z;\n\t\t\t\tpq.push(make(y, d[y]));\n\t\t\t}\n\t\t}\n\t}\n\tif(d[n] == 1e16 + 5) {\n\t\tprintf(\"-1\\n\");\n\t} else {\n\t\tprintf(\"%lld\\n\", d[n]);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1685782772,
        "uid": 420998,
        "name": "Kevin0501",
        "ccfLevel": 7,
        "title": "AT_nikkei2019_2_qual_d \u9898\u89e3"
    },
    {
        "content": "\n\u5982\u679c\u76f4\u63a5\u66b4\u529b\u6309\u9898\u610f\u8fde\u8fb9\uff0c\u7136\u540e\u8dd1\u6700\u77ed\u8def\uff0c\u590d\u6742\u5ea6 $O((n+n^2m)\\log n)$\u3002\u663e\u7136\u8fc7\u4e0d\u4e86\u3002\n\n\u56e0\u4e3a $n,m \\leq 10^5$\uff0c\u663e\u7136\u4e0d\u80fd\u66b4\u529b\u52a0\u8fb9\uff0c\u8003\u8651\u5982\u4f55\u51cf\u5c11\u8fde\u8fb9\u3002\n\n\u56e0\u4e3a\u662f\u533a\u95f4\u5185\u6240\u6709\u70b9\u8fde\u8fb9\uff0c\u4e8b\u5b9e\u4e0a\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u662f\u5148\u4ece\u533a\u95f4\u5de6\u8fb9\u754c $l$ \u70b9\uff0c\u518d\u5230\u8fbe\u53f3\u8fb9\u754c $r$ \u70b9\uff0c\u518d\u5230\u8fbe\u533a\u95f4\u5185\u4e00\u70b9\uff0c\u518d\u5230\u4e0e\u5176\u6240\u8fde\u70b9\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5728 $l$ \u4e0e $r$ \u4e4b\u95f4\u8fde\u4e00\u6761\u957f\u4e3a $c$ \u7684 **\u5355\u5411\u8fb9**\uff0c\u4e3a\u4e86\u4f7f\u80fd\u4ece\u53f3\u8fb9\u754c\u5230\u533a\u95f4\u5185\u4efb\u610f\u4e00\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728 $i \u2192 i-1$ \u4e4b\u95f4\u8fde\u4e00\u6761\u957f\u4e3a $0$ \u7684 **\u5355\u5411\u8fb9**\u3002\n\n\u4e8e\u662f\u8fd9\u6837\u5bf9\u4e8e\u533a\u95f4\u7684\u5de6\u53f3\u7aef\u70b9\uff0c\u90fd\u88ab\u8f6c\u79fb\u5230\u4e86\u533a\u95f4\u5185\u4efb\u610f\u4e00\u70b9\uff0c\u4e8e\u662f\u6700\u540e\u8dd1\u4e00\u8fb9\u6700\u77ed\u8def\uff0c\u6c42 $1$ \u5230 $n$ \u7684\u6700\u77ed\u8def\u5373\u53ef\u3002\n\n\u6ce8\u610f\uff1a\u56e0\u4e3a $1 \\leq c \\leq 10^9$\uff0c\u6240\u4ee5\u6781\u7aef\u60c5\u51b5\u4e0b\u6709\u4e14\u4ec5\u6709\u6bcf\u76f8\u90bb\u4e24\u4e2a\u70b9\u6709\u8fb9\uff0c\u6700\u77ed\u8def\u957f\u5ea6\u4e3a $(n-1)c$\uff0c\u8fdc\u8d85 int\uff0c\u6240\u4ee5\u8bb0\u5f97\u5f00 long long\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int NR = 1e5 + 5;\nint n, m;\nvector< int > e[NR], g[NR];\nint dis[NR];\nstruct node { int p, d; };\nbool operator > (node x, node y) {\n\treturn x.d > y.d;\n}\npriority_queue< node, vector< node >, greater< node > > q;\nbool vis[NR];\nbool dijkstra(int s) {\n\tmemset(dis, 0x3f3f3f3f, sizeof(dis));\n\tdis[s] = 0, q.push({s, 0});\n\twhile(!q.empty()) {\n\t\tint u = q.top().p; q.pop();\n\t\tif(vis[u]) continue;\n\t\tvis[u] = true;\n\t\tfor(int i = 0; i < e[u].size(); ++i) {\n\t\t\tint v = e[u][i];\n\t\t\tif(dis[v] > dis[u] + g[u][i]) {\n\t\t\t\tdis[v] = dis[u] + g[u][i];\n\t\t\t\tif(!vis[v]) q.push({v, dis[v]});\n\t\t\t}\n\t\t}\n\t}\n\treturn dis[n] == dis[0];\n}\nsigned main() {\n\tcin >> n >> m;\n\tfor(int i = 1, u, v, w; i <= m; ++i)\n\t\tcin >> u >> v >> w, e[u].push_back(v), g[u].push_back(w);\n\tfor(int i = 2; i <= n; ++i)\n\t\te[i].push_back(i - 1), g[i].push_back(0);\n\tif(dijkstra(1)) cout << \"-1\" << endl;\n\telse cout << dis[n] << endl;\n\treturn 0;\n}\n```",
        "postTime": 1685782250,
        "uid": 128369,
        "name": "AgrumeStly",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011[AtCoder]Shortest Path on a Line"
    },
    {
        "content": "# \u9898\u89e3 AT5635 Shortest Path on a Line\n\n#### [\u6216\u8bb8\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/sysong2006/p/16641279.html)\n\nupd on 2022.9.3\uff1a\u589e\u52a0\u4e86\u5bf9\u89e3\u6cd5\u7684\u63cf\u8ff0\u3002\n\n## Description\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/AT5635)\n\n#### \u9898\u9762\u7ffb\u8bd1\n\n\u6709\u4e00\u5f20\u6709 $N$ \u4e2a\u70b9\uff0c\u7f16\u53f7\u4e3a $1 - N$ \u7684\u65e0\u5411\u56fe\u3002\n\n\u505a $M$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u7ed9\u51fa\u4e09\u4e2a\u6b63\u6574\u6570 $L,R,C$\uff0c\u5bf9\u4e8e\u6bcf\u5bf9 $\u2265L$ \u4e14 $\u2264R$ \u7684\u6574\u6570\u5bf9 $(S,T)$\uff0c\u5728 $(S,T)$ \u4e4b\u95f4\u6dfb\u52a0\u4e00\u6761\u957f\u5ea6\u4e3a $C$ \u7684\u8fb9\u3002\n\n\u5b8c\u6210\u64cd\u4f5c\u540e\uff0c\u627e\u51fa\u64cd\u4f5c\u540e\u65e0\u5411\u56fe\u7684\u6700\u77ed\u8def\u3002\n\n#### \u6570\u636e\u8303\u56f4\n\n- $ N,M\\ \\leq\\ 10^5 $\n\n## Solution\n\n\u7ebf\u6bb5\u6811\u4f18\u5316\u5efa\u56fe\u88f8\u9898\u3002\n\n\u5efa\u8bae\u5148\u5b8c\u6210\u7ebf\u6bb5\u6811\u4f18\u5316\u5efa\u56fe\u6a21\u677f\u9898 [CF786B](https://www.luogu.com.cn/problem/CF786B)\u3002\n\n\u770b\u5230\u533a\u95f4\u5411\u533a\u95f4\u8fde\u8fb9\uff0c\u663e\u7136\u66b4\u529b\u5904\u7406\u662f $O(MN)$ \u7684\uff0c\u4f1a\u65f6\u95f4\u8d85\u9650\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u60f3\u5230\u5904\u7406\u533a\u95f4\u95ee\u9898\u7684\u5e38\u7528\u5de5\u5177\uff1a\u7ebf\u6bb5\u6811\u3002\n\n\u6211\u4eec\u5bf9\u6574\u4e2a\u533a\u95f4\u5efa\u7acb\u7ebf\u6bb5\u6811\uff0c\u628a\u6bcf\u4e2a\u70b9\u5206\u4e3a\u5165\u70b9\u548c\u51fa\u70b9\uff0c\u6784\u5efa\u51fa\u5165\u6811\u548c\u51fa\u6811\u3002\n\n\u5bf9\u4e8e\u5165\u6811\uff0c\u4ece\u7236\u8282\u70b9\u5411\u5b50\u8282\u70b9\u8fde\u957f\u5ea6\u4e3a $0$ \u7684\u8fb9\uff0c\u5bf9\u4e8e\u51fa\u6811\uff0c\u4ece\u5b50\u8282\u70b9\u5411\u7236\u8282\u70b9\u8fde\u957f\u5ea6\u4e3a $0$ \u7684\u8fb9\uff0c\u5e76\u4e14\u4e24\u68f5\u6811\u7684\u5bf9\u5e94\u53f6\u5b50\u7ed3\u70b9\u8fde\u957f\u5ea6\u4e3a $0$ \u7684\u8fb9\u3002\n\n\u5728\u5b9e\u73b0\u4e0a\u8ff0\u8fc7\u7a0b\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5176\u5b9e\u53ea\u8981\u5efa\u4e00\u904d\u7ebf\u6bb5\u6811\u3002\u5bf9\u4e8e\u53f6\u5b50\u7ed3\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba9\u4e24\u68f5\u6811\u5171\u7528\uff0c\u5c31\u4e0d\u5fc5\u518d\u8fde\u8fb9\u4e86\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u5411\u4e00\u4e2a\u533a\u95f4\u8fde\u8fb9\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u8f6c\u5316\u4e3a\u8fd9\u4e2a\u70b9\u548c\u533a\u95f4\u5728\u5165\u6811\u4e0a\u5206\u6210\u7684\u82e5\u5e72\u5b50\u533a\u95f4\u5bf9\u5e94\u7684\u8282\u70b9\u8fde\u8fb9\u3002\n\n\u533a\u95f4\u5411\u70b9\u8fde\u8fb9\u540c\u7406\uff0c\u5c06\u51fa\u6811\u4e0a\u8be5\u533a\u95f4\u5206\u6210\u7684\u5b50\u533a\u95f4\u5206\u522b\u5411\u8fd9\u4e2a\u70b9\u8fde\u8fb9\u3002\n\n\u9898\u76ee\u8981\u6c42\u6211\u4eec\u533a\u95f4\u5411\u533a\u95f4\u8fde\u8fb9\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u8282\u70b9\uff0c\u5c06\u51fa\u6811\u533a\u95f4\u5411\u8fd9\u4e2a\u8282\u70b9\u8fde\u8fb9\uff0c\u8fd9\u4e2a\u70b9\u518d\u5411\u5165\u6811\u533a\u95f4\u8fde\u8fb9\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u7136\u540e\u5269\u4e0b\u7684\u5c31\u662f\u5728\u5efa\u597d\u7684\u56fe\u4e0a\u8dd1\u6700\u77ed\u8def\u677f\u5b50\uff0c\u6211\u7528\u7684\u5806\u4f18\u5316\u7684 Dijkstra\uff0c\u5c31\u4e0d\u8d58\u8ff0\u4e86\u3002\n\n\u7ec6\u8282\u53ef\u4ee5\u770b\u4ee3\u7801\u6ce8\u91ca\u3002\n\n## Code\n\n```c++\n#include <bits/stdc++.h>\n#define gc() getchar()\nusing namespace std;\ntypedef long long ll;\n\ntemplate <typename T> void rd(T &x){\n\tT f=1;x=0;char c=gc();\n\tfor(;!isdigit(c);c=gc())if(c=='-')f=-1;\n\tfor(;isdigit(c);c=gc())x=(x<<1)+(x<<3)+(c^48);\n\tx*=f;\n}\n\nconst int MAXN=2e6+5;// \u6570\u7ec4\u5927\u5c0f\uff0c\u5f00\u592a\u5c0f\u4f1a RE\n// \u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe \nint n,m,cnt,hd[MAXN];\nstruct nd{\n\tint nxt,v,w;\n}g[MAXN<<1];\ninline void add(int u,int v,int w){\n\tg[++cnt].nxt=hd[u],g[cnt].v=v,g[cnt].w=w,hd[u]=cnt;\n}\n// \u7ebf\u6bb5\u6811\nint tot,in[MAXN],out[MAXN];// tot \u4ece n \u5f00\u59cb\uff0cin \u5b58\u7684\u662f\u5165\u6811\u8282\u70b9\u5bf9\u5e94\u7684\u56fe\u4e2d\u8282\u70b9\u7f16\u53f7\uff0cout \u540c\u7406\nstruct sgt{\n\tint l,r;\n}t[MAXN];\n// \u5efa\u6811\ninline void build(int o,int l,int r){\n\tt[o].l=l,t[o].r=r;\n\tif(l==r){\n\t\tin[o]=out[o]=l;// \u5982\u679c\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u5bf9\u5e94\u56fe\u4e2d\u8282\u70b9\u7f16\u53f7\u5c31\u662f\u5176\u4e0b\u6807\uff0c\u5165\u6811\u51fa\u6811\u5171\u7528\n\t\treturn;\n\t}\n\tint mid=l+r>>1;\n\tin[o]=++tot,out[o]=++tot;// \u5b58\u50a8 o \u4ee3\u8868\u7684\u533a\u95f4\u5bf9\u5e94\u7684\u56fe\u4e2d\u8282\u70b9\n\tbuild(o<<1,l,mid);\n\tbuild(o<<1|1,mid+1,r);// \u9012\u5f52\u5efa\u6811\n\tadd(out[o<<1],out[o],0);\n\tadd(out[o<<1|1],out[o],0);// \u5c06\u51fa\u6811\u4ece\u5b50\u8282\u70b9\u5411\u7236\u8282\u70b9\u8fde\u96f6\u8fb9\n\tadd(in[o],in[o<<1],0);\n\tadd(in[o],in[o<<1|1],0);// \u5c06\u5165\u6811\u4ece\u7236\u8282\u70b9\u5411\u5b50\u8282\u70b9\u8fde\u96f6\u8fb9\n}\n// \u52a0\u8fb9\ninline void addedge(int o,int l,int r,int u,int w){\n\tif(t[o].l>=l&&t[o].r<=r){\n\t\tadd(out[o],u,0);// \u4ece\u51fa\u6811\u533a\u95f4\u5411\u65b0\u5efa\u8282\u70b9\u8fde\u96f6\u8fb9\n\t\tadd(u,in[o],w);// \u4ece\u65b0\u5efa\u8282\u70b9\u5411\u5165\u6811\u533a\u95f4\u8fde\u957f\u5ea6\u4e3a w \u7684\u8fb9\n\t\treturn;\n\t}\n\tint mid=t[o].l+t[o].r>>1;\n    // \u9012\u5f52\u52a0\u8fb9\n\tif(l<=mid)addedge(o<<1,l,r,u,w);\n\tif(r>mid)addedge(o<<1|1,l,r,u,w);\n}\n// Dijkstra\nconst ll inf=0x3f3f3f3f3f3f3f3f;\nll d[MAXN];\nint vis[MAXN];\n// \u5806\u4f18\u5316\nstruct pq{\n\tint v;ll w;\n\tpq(){}\n\tpq(int _v,ll _w){v=_v,w=_w;}\n\tbool operator<(const pq &a)const{return w>a.w;}\n};\npriority_queue<pq>q;\ninline void dij(){\n\tmemset(d,0x3f,sizeof(d));\n\td[1]=0;q.push(pq(1,0));\n\twhile(!q.empty()){\n\t\tpq x=q.top();q.pop();\n\t\tint u=x.v;if(vis[u])continue;\n\t\tvis[u]=1;\n\t\tfor(int i=hd[u];i;i=g[i].nxt){\n\t\t\tint v=g[i].v,w=g[i].w;\n\t\t\tif(d[v]>d[u]+w)d[v]=d[u]+w,q.push(pq(v,d[v]));\n\t\t}\n\t}\n}\n\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\trd(n),rd(m);tot=n;// tot \u4ece n \u5f00\u59cb\uff0c\u907f\u514d\u4e0e\u53f6\u5b50\u8282\u70b9\u91cd\u590d\n\tbuild(1,1,n);// \u522b\u5fd8\u4e86\u5efa\u6811\n\tfor(int i=1;i<=m;++i){\n\t\tint l,r,w;\n\t\trd(l),rd(r),rd(w);\n\t\taddedge(1,l,r,++tot,w);// ++tot \u65b0\u5efa\u8282\u70b9\n\t}\n\tdij();\n\tprintf(\"%lld\\n\",d[n]==inf?-1:d[n]);// \u8bb0\u5f97\u5f00 long long\n\treturn 0;\n}\n```\n\n-----\n\n$by\\ sysong$\n\n$2022.8.30$\n\n",
        "postTime": 1661871318,
        "uid": 373948,
        "name": "sysong",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 AT5635 Shortest Path on a Line"
    },
    {
        "content": "# AT5635 Shortest Path on a Line \u9898\u89e3\n\n\u8fd9\u662f\u4e00\u7bc7\u8fd0\u7528**\u6700\u77ed\u8def**\u7684\u9898\u89e3\u3002\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/AT5635)\u4ee5\u53ca[\u4e0d\u4fdd\u8bc1\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.luogu.com.cn/blog/545529/at5635-solution)\n\n\u9898\u610f\u7ffb\u8bd1\u4e00\u76f4\u90fd\u5f88\u7b80\u6d01\uff0c\u4f46\u672c\u9898\u4e2d\u9700\u8981\u6ce8\u610f\u7684\u662f\u8981**\u6c42 $1$ \u5230 $n$ \u7684\u6700\u77ed\u8def**\uff0c\u7ffb\u8bd1\u4e2d\u5e76\u6ca1\u6709\u8bf4\u660e\u3002\n\n# Part 1 \u66b4\u529b\n\n\u8bfb\u5b8c\u9898\u53d1\u73b0\u8981\u6c42\u6700\u77ed\u8def\uff0c\u6240\u4ee5\u5148\u6253\u4e2a\u66b4\u529b\u8bd5\u8bd5\u6c34\u3002\u7531\u4e8e\u662f\u6c42\u5355\u6e90\u6700\u77ed\u8def\u5f84\uff0c\u6240\u4ee5\u8003\u8651\u4f7f\u7528\u5806\u4f18\u5316\u7684 $\\text{Dijkstra}$ \u7b97\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O((n+n^2m) \\log_2 n)$\uff0c\u540c\u65f6\u8fd8\u8981\u8003\u8651\u66b4\u529b\u52a0\u8fb9\u7684\u590d\u6742\u5ea6\u662f $O(n^2m)$\u3002\u5b9e\u73b0\u65f6\u6ce8\u610f ```std::pair``` \u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u5e94\u662f\u8fb9\u6743\uff0c\u7b2c\u4e8c\u4e2a\u624d\u662f\u70b9\u7684\u7f16\u53f7\u3002\n\n\u6570\u636e\u8303\u56f4 $n,m \\leq 10^5$\uff0c\u663e\u7136\u8d85\u65f6\u3002\n\n\u4ee3\u7801\u8fd8\u662f\u653e\u4e00\u4e0b\uff1a\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<queue> \n#include<vector>\nusing namespace std;\ntypedef long long ll;\ninline ll read(){\n\tll f=1,x=0;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-')f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9'){\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn f*x;\n}\ninline void write(ll x){\n\tif(x<0)x=-x,putchar('-');\n\tif(x>9)write(x/10);\n\tputchar(x%10+'0');\n}\nll oo;\ntypedef pair<ll,ll> pll;\nconst int N=1e5+10;\npriority_queue<pll,vector<pll>,greater<pll>> Q;//\u5c0f\u6839\u5806 \nint n,m;\nll dis[N];\nvector<pll>e[N];\nbool vis[N];\nint main(){\n\tmemset(dis,0x3f,sizeof(dis));\n\too=dis[0];//\u6b63\u65e0\u9650 \n\tn=read(),m=read();\n\t//\u66b4\u529b\u52a0\u8fb9 \n\tfor(int i=1,l,r,w;i<=m;i++){\n\t\tl=read(),r=read(),w=read();\n\t\tfor(int u=l;u<=r;u++)\n\t\t\tfor(int v=l;v<=r;v++)\n\t\t\t\te[u].push_back(make_pair(w,v));\n\t}\n\t//\u5806\u4f18\u5316Dijkstra\u6c42\u6700\u77ed\u8def \n\tdis[1]=0;\n\tQ.push(make_pair(0,1));\n\twhile(!Q.empty()){\n\t\tpll fr=Q.top();\n\t\tQ.pop();\n\t\tll w=fr.first,u=fr.second;\n\t\tif(vis[u])\n\t\t\tcontinue;\n\t\tvis[u]=1;\n\t\tfor(int i=0;i<e[u].size();i++){\n\t\t\tpll now=e[u][i];\n\t\t\tll ww=now.first,v=now.second;\n\t\t\tif(dis[u]+ww<dis[v]){\n\t\t\t\tdis[v]=dis[u]+ww;\n\t\t\t\tif(!vis[v])\n\t\t\t\t\tQ.push(make_pair(dis[v],v));\n\t\t\t}\n\t\t}\n\t}\n\tif(dis[n]==oo)\n\t\tprintf(\"-1\");\n\telse\n\t\twrite(dis[n]);\n\treturn 0;\n}\n```\n[\u63d0\u4ea4\u8bb0\u5f55](https://www.luogu.com.cn/record/76316855)\uff0c$7$ \u53f7\u70b9 $\\text{TLE}$~~\u8dd1\u4e86 53.98s \u5c31\u79bb\u8c31~~\n\n# Part 2 \u4f18\u5316\n\n~~\u6b63\u7247\u5f00\u59cb~~\n\n$\\text{Part 1}$ \u7b97\u6cd5\u8d85\u65f6\u7684\u539f\u56e0\u4e3b\u8981\u5728\u4e8e $O(n^2m)$ \u7684\u66b4\u529b\u52a0\u8fb9\uff0c\u800c\u8fd9\u4e5f\u4f1a\u5bfc\u81f4\u540e\u9762 $\\text{Dijkstra}$ \u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u53d8\u5f97\u5f88\u9ad8\uff0c\u6240\u4ee5\u4e0d\u80fd\u8fd9\u6837\u505a\u3002\n\n\u56e0\u4e3a\u539f\u9898\u662f\u5355\u6e90\u6700\u77ed\u8def\u5f84\u95ee\u9898\uff0c\u6240\u4ee5\u4e0d\u7ba1\u91c7\u7528\u54ea\u79cd\u7b97\u6cd5\uff0c\u6211\u4eec\u7684\u76ee\u7684\u90fd\u662f**\u6c42\u51fa $dis$ \u6570\u7ec4**\uff0c\u4e5f\u5c31\u662f\u6bcf\u4e2a\u70b9\u5230\u6e90\u70b9 $1$ \u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\u3002\n\n\u5176\u5b9e\u6c42 $dis$ \u6570\u7ec4\u5c31\u662f $\\text{Dijkstra}$ \u7b97\u6cd5\u8981\u5e72\u7684\u4e8b\uff0c\u90a3\u4e48\u8003\u8651\u628a\u8fd9\u4e2a\u7b97\u6cd5\u7a0d\u7a0d\u6539\u4e00\u4e0b\u3002\n\n\u6211\u4eec\u5c1d\u8bd5**\u628a $dis$ \u6570\u7ec4\u7684\u5df2\u77e5\u503c\u201c\u4f20\u9012\u201d\u5230\u672a\u77e5\u7684\u4f4d\u7f6e**\uff0c\u5373\u628a\u8f93\u5165\u7684\u6570\u636e\u5148\u5b58\u5165 $dis$ \u6570\u7ec4\uff0c\u901a\u8fc7 $\\text{Dijkstra}$ \u7b97\u6cd5\u7684\u6267\u884c\u6c42 $dis$ \u6570\u7ec4\u7684\u5176\u4ed6\u672a\u77e5\u4f4d\u7f6e\u3002\n\n\u90a3\u4e48\u91cd\u96be\u70b9\u6765\u4e86\uff1a\u600e\u4e48\u5b9e\u73b0\u5b83\u5462\uff1f\n\n~~\u7a81\u7136\u7075\u5149\u4e00\u73b0~~\u60f3\u5230\u53ef\u4ee5\u591a\u8fde\u51e0\u6761\u8fb9\u3002~~\u5176\u5b9e\u4e0d\u80fd\u53eb\u6539\u7b97\u6cd5~~\n\n\u753b\u4e2a\u56fe\u89e3\u91ca\u4e00\u4e0b\u600e\u4e48\u8fde\uff08\u56fe\u4e2d\u70b9\u7684\u7f16\u53f7\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u9012\u589e\uff09\u3002\n\n\u5982\u679c\u628a\u4ece\u7b2c $2$ \u884c\u5f00\u59cb\u7684\u6bcf\u884c\u8f93\u5165\u6570\u636e\u770b\u4f5c\u4e00\u6761\u6709\u5411\u8fb9\uff0c\u90a3\u4e48\u6837\u4f8b $1$ \u5bf9\u5e94\u7684\u60c5\u5f62\u662f\u8fd9\u6837\u7684\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/b05r9916.png)\n\n\u628a\u7ed3\u70b9 $n$ \u5230 $1$ \u987a\u6b21\u8fde\u63a5\uff0c\u8fb9\u6743\u8bbe\u4e3a $0$\uff0c\u5c31\u53d8\u6210\u8fd9\u4e2a\u6837\u5b50\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/omqof9kn.png)\n\n\u90a3\u4e48\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u8fde\u5462\uff1f\n\n\u5728\u56fe $2$ \u4e0a\u6a21\u62df\u4e00\u4e0b $\\text{Dijkstra}$ \u7b97\u6cd5\u7684\u8fd0\u884c\u8fc7\u7a0b\uff0c\u5e2e\u52a9\u7406\u89e3\uff1a\n\n- \u4ece $1$ \u5f00\u59cb\n\n- \u5230\u8fbe $3$\u3001$4$ \u53f7\u7ed3\u70b9\uff0c$dis_3=2,dis_4=6$\n\n- \u4ece $3$ \u8d70\u5230 $2$\uff0c$dis_2=2$\n\n- \u4ece $2$ \u8d70\u5230 $4$\uff0c$dis_4=5$\n\n- \u7b54\u6848\u4e3a $5$\u3002\n\n\u53d1\u73b0\u8fd9\u6837\u80fd\u5728 $\\text{Dijstra}$ \u7b97\u6cd5\u7684\u6267\u884c\u4e2d\u5f97\u5230 $dis_2$ \u7684\u503c\uff0c\u8fd9\u6837\u5c31\u5b9e\u73b0\u4e86\u4e4b\u524d\u6240\u8bf4\u7684**\u628a $dis$ \u6570\u7ec4\u7684\u5df2\u77e5\u503c\u201c\u4f20\u9012\u201d\u5230\u672a\u77e5\u7684\u4f4d\u7f6e**\u3002\n\n\u8fd9\u6837\u505a\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u4f1a\u663e\u8457\u964d\u4f4e\uff0c\u56e0\u4e3a\u8fb9\u6570\u964d\u4f4e\u5230\u4e86 $O(n+m)$ \u7ea7\u522b\uff0c\u6240\u4ee5 $\\text{Dijkstra}$ \u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u5c31\u964d\u5230\u4e86 $O((2n+m) \\log_2 n)$\uff0c\u8db3\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n\u8fd9\u91cc\u5c31\u653e\u4e00\u4e0b\u8fde\u8fb9\u90e8\u5206\u7684\u4ee3\u7801\uff1a\n```cpp\nfor(int i=1,l,r,w;i<=m;i++){\n\tl=read(),r=read(),w=read();\n\te[l].push_back(make_pair(w,r));\n}\nfor(int i=1;i<=n;i++)\n\te[i].push_back(make_pair(0,i-1));\n```\n\u63a5\u4e0b\u6765\u8dd1\u4e00\u904d\u5806\u4f18\u5316 $\\text{Dijkstra}$ \u7684\u677f\u5373\u53ef\uff0c\u5b8c\u6574\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86\u3002\n\n# Part 3 \u540e\u8bb0\n\n\u505a\u5b8c\u4e4b\u540e\u7ffb\u4e86\u4e00\u4e0b\u5176\u4ed6\u4eba\u7684\u63d0\u4ea4\uff0c\u53d1\u73b0\u6709\u4eba\u7528\u4e86\u4e0d\u4e00\u6837\u7684\u65b9\u6cd5\uff0c\u4e3b\u8981\u662f\u6570\u636e\u7ed3\u6784\u3002\n\n\u5176\u5b9e\u8fd9\u9053\u9898\u7684\u52a0\u8fb9\u65b9\u5f0f\u662f\u533a\u95f4\u52a0\u8fb9\uff0c\u6240\u4ee5\u6570\u636e\u7ed3\u6784\u7684\u505a\u6cd5\u4e5f\u662f\u53ef\u884c\u7684\u3002\n\n\u5177\u4f53\u7684\u53ef\u4ee5\u53bb\u770b\u770b\u522b\u4eba\u7684\u63d0\u4ea4\u8bb0\u5f55\u3002\n\n## $\\text{update on 2022.5.27}$\n\n\u611f\u89c9\u8fde\u8fb9\u90a3\u90e8\u5206\u6ca1\u592a\u8bb2\u6e05\u695a\uff0c\u8fd9\u91cc\u8865\u5145\u4e00\u4e0b\u3002\n\n\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u60f3\u6cd5\u7684\u6765\u6e90\u5c31\u662f\u90a3\u4e2a\u201c\u533a\u95f4\u52a0\u8fb9\u201d\u64cd\u4f5c\u3002\n\n\u5047\u8bbe\u6709 $3$ \u4e2a\u70b9\uff0c\u7ed9\u533a\u95f4 $\\left[1,3\\right]$ \u8fde\u4e0a\u8fb9\u6743\u4e3a $w$ \u7684\u8fb9\u3002\u7531\u4e8e\u8fde\u7684\u8fb9**\u8fb9\u6743\u76f8\u7b49**\uff0c\u6240\u4ee5\u4ece\u70b9 $1$ \u8d70\u5230\u70b9 $2$ \u548c\u4ece\u70b9 $3$ \u8d70\u5230\u70b9 $2$ \u7684\u4ee3\u4ef7\u662f\u76f8\u540c\u7684\uff0c\u90fd\u662f $w$\u3002\n\n\u800c\u53c8\u53d1\u73b0\u4ece\u70b9 $1$ \u5230\u70b9 $3$ \u7684\u4ee3\u4ef7\u4e5f\u662f $w$\uff0c\u4e0e\u70b9 $1$ \u5230\u70b9 $2$ \u7684\u4ee3\u4ef7\u76f8\u540c\uff0c\u6240\u4ee5\u5c31\u60f3\u5230\u4ece\u70b9 $3$ \u5411\u70b9 $2$ \u8fde\u4e00\u6761\u8fb9\u6743\u4e3a $0$ \u7684\u6709\u5411\u8fb9\uff0c\u6765\u901a\u8fc7 $dis_3$ \u6c42 $dis_2$\u3002\n\n\u8fd8\u662f\u5efa\u8bae\u81ea\u5df1\u5728\u7eb8\u4e0a\u753b\u4e2a\u56fe\u7406\u89e3\u4e00\u4e0b\u3002",
        "postTime": 1653456500,
        "uid": 545529,
        "name": "Sherlock_Chen",
        "ccfLevel": 5,
        "title": "AT5635 Solution"
    },
    {
        "content": "\u9898\u76ee\u5927\u610f\uff1a\n\n\u4e00\u4e2a\u56fe $N$ \u4e2a\u70b9\uff0c$M$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u8f93\u5165\u4e09\u4e2a\u6574\u6570 $L,R,C$\uff0c\u5bf9\u4e8e\u6240\u6709 $x,y(L \\leqslant x,y \\leqslant R)$\uff0c\u8fde\u4e00\u6761\u957f\u5ea6\u4e3a $C$ \u7684\u8fb9\u3002\u6c42 $1$ \u5230 $N$ \u7684\u6700\u77ed\u8def\u3002\n\n$2 \\leqslant N \\leqslant 10^5$\n\n$1 \\leqslant M \\leqslant 10^5$\n\n$1 \\leqslant L < R \\leqslant 10^5$\n\n$1 \\leqslant C \\leqslant 10^9$\n\n**\u601d\u8def\uff1a**\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u6309\u7167\u9898\u76ee\u610f\u601d\u8fde\u8fb9\uff0c\u518d\u8dd1\u6700\u77ed\u8def\uff0c\u80af\u5b9a\u4f1a\u8d85\u65f6\u3002\u90a3\u4e48\u5c31\u9700\u8981\u6362\u4e00\u79cd\u65b9\u6cd5\u5efa\u8fb9\u3002\n\n\u6709\u4e00\u4e2a\u5de7\u5999\u7684\u65b9\u6cd5\uff1a\n\n\u5148\u5c06\u7b2c $i(1 < i \\leqslant N)$ \u4e2a\u70b9\u5411\u7b2c $i-1$ \u4e2a\u70b9\u8fde\u4e00\u6761\u957f\u5ea6\u4e3a $0$ \u7684\u8fb9\u3002\n\n\u5982\u679c\u5728 $L$ \u548c $R$ \u4e4b\u95f4\uff0c\u5c31\u4f1a\u901a\u8fc7\u957f\u5ea6\u4e3a $0$ \u7684\u8fb9\u5230\u8fbe $L$\uff0c\u5e76\u8df3\u5230 $R$\u3002\n\n\u6240\u4ee5\u8f93\u5165\u65f6\u53ea\u9700\u8981\u5efa $L$ \u5230 $R$ \u8fd9\u4e00\u6761\u8fb9\uff0c\u65e2\u6ee1\u8db3\u9898\u610f\uff0c\u53c8\u53ea\u6709 $N+M$ \u6761\u8fb9\uff0c\u4e0d\u4f1a\u8d85\u65f6\u3002\n\n\u6ce8\u610f\u6700\u597d\u8dd1\u5806\u4f18\u5316\u7684\u8fea\u6770\u65af\u7279\u62c9\u7b97\u6cd5\uff0c\u5176\u4ed6\u6700\u77ed\u8def\u7b97\u6cd5\u53ef\u80fd\u4f1a\u8d85\u65f6\u3002\n\n**CODE**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 200010\n#define int long long//\u4e00\u5b9a\u8981\u5f00long long\ninline char gc(){\n\tstatic char buf[1000010],*p1=buf,*p2=buf;\n\treturn p1==p2&&(p2=(p1=buf)+fread(buf,1,1000010,stdin),p1==p2)?EOF:*p1++;\n}\ninline int read(){\n\tint x=0;\n\tchar s=gc();\n\twhile(s<'0'||s>'9') s=gc();\n\twhile(s>='0'&&s<='9'){\n\t\tx=(x<<3)+(x<<1)+(s^48);s=gc();\n\t}return x;\n}\ntypedef pair<int,int> pii;\nbool st[N];\nint n,m,x,y,z,v,tot;\nint head[N],e[N],ne[N],l[N],dis[N];\nvoid add(int x,int y,int z){\n    e[++tot]=y;\n    l[tot]=z;\n    ne[tot]=head[x];\n    head[x]=tot;\n}\nint Dijkstra(){\n    memset(dis,0x3f,sizeof(dis));\n    dis[1]=0;\n    priority_queue<pii, vector<pii>, greater<pii> >q;\n    q.push({0,1});\n    while(q.size()){\n        auto t=q.top();\n        int a=t.first,b=t.second;\n        q.pop();\n        if(st[b]) continue;\n        st[b]=true;\n        for(int i=head[b];i;i=ne[i]){\n            v=e[i];\n            if(a+l[i]<dis[v]) {\n                dis[v]=a+l[i];\n                q.push({dis[v],v});\n            }\n        }\n    }\n    if(dis[n]==dis[0]) return -1;\n    return dis[n];\n}\nsigned main(){\n\tn=read();\n\tm=read();\n    for(int i=1;i<=m;i++) {\n\t\tx=read();\n\t\ty=read();\n\t\tz=read();\n\t\tadd(x,y,z);\n    }\n\tfor(int i=n;i>1;i--)\n\t\tadd(i,i-1,0);\n    int t=Dijkstra();\n    printf(\"%lld\",t);\n    return 0;\n}\n```",
        "postTime": 1670079270,
        "uid": 671258,
        "name": "zhoujingchen",
        "ccfLevel": 0,
        "title": "Shortest Path on a Line"
    }
]
[
    {
        "content": "# \u9898\u610f\n\n\u4f60\u5728\u4e00\u4e2a $ h \\times w $ \u7684\u77e9\u9635\u4e2d\uff0c\u77e9\u9635\u4e2d\u6709 $N$ \u4e2a\u969c\u788d\u7269\u3002\u73b0\u5728\u7ed9\u4f60 $Q$ \u6b21\u8be2\u95ee\uff0c\u5bf9\u4e8e\u6bcf\u6b21\u8be2\u95ee\uff0c\u4f60\u9700\u8981\u56de\u7b54\u51fa\u95ee\u5411**\u524d/\u540e/\u5de6/\u53f3**\u8d70\uff0c\u4f1a\u5230\u8fbe\u54ea\u91cc\uff08\u5177\u4f53\u662f\u524d\u540e\u5de6\u53f3\u4f1a\u8f93\u5165\uff09 \u3002\n\n# Solution\n\n\u89c2\u5bdf\u9898\u76ee\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u65e0\u8bba\u95ee\u7684\u662f\u524d/\u540e/\u5de6/\u53f3\uff0c\u4f60\u90fd\u53ea\u4f1a\u5728**\u4e00\u6761\u76f4\u7ebf**\u4e0a\u8d70\uff0c\u90a3\u5bf9\u4e8e\u8fd9\u6761\u76f4\u7ebf\uff0c\u6211\u4eec\u53ef\u4ee5\u8bb0\u5f55\u6240\u6709\u8fd9\u6761\u76f4\u7ebf\u4e0a\u7684\u969c\u788d\u7269\uff0c\u7136\u540e\u627e\u5230\u8ddd\u79bb\u5f53\u524d\u70b9\u6700\u8fd1\u7684\u969c\u788d\u7269\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u53ea\u80fd\u8d70\u5230\u90a3\u4e2a\u969c\u788d\u7269\u90a3\u5757\u3002\u3002\u8bf4\u7684\u6709\u70b9\u62bd\u8c61\uff0c\u753b\u4e2a\u56fe\u5427\uff01\n\n![qwq](https://cdn.luogu.com.cn/upload/image_hosting/zkwfrwgv.png)\n\n\u5f88\u663e\u7136\uff0c\u53ea\u8981\u6211\u4eec\u627e\u5230\u79bb\u6211\u4eec\u6700\u8fd1\u7684\u969c\u788d\u7269\uff0c\u5c31\u80fd\u77e5\u9053\u6211\u4eec\u6700\u591a\u4f1a\u5230\u54ea\u91cc\u4e86\u3002\n\n\u4f46\u662f\u8fd8\u6709\u95ee\u9898\u554a\uff0c\u6211\u4eec\u7684\u6570\u636e\u8303\u56f4\u4f1a\u8fbe\u5230 $10^9$ \u554a\uff0c\u600e\u4e48\u529e\uff1fSTL \u5927\u6cd5\u543c\u554a\uff01\u76f4\u63a5\u7528 ```map``` \u5957 ```set``` \u5c31\u53ef\u4ee5\u5566\uff01\u4e3a\u4ec0\u4e48\u9009\u7528 ```set``` \u5462\uff1f\u662f\u56e0\u4e3a\u5b83\u53ef\u4ee5\u81ea\u52a8\u6392\u5e8f\u5440\uff01\n\n\u8fd8\u6709\u4e0d\u61c2\uff0c\u770b\u770b\u4ee3\u7801\u5427\uff01\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint hh , ww;\nint sx , sy;\nint n;\nint q;\nmap<int , set<int> >h; // \u7edf\u8ba1\u884c\u5185\u969c\u788d\u7269\nmap<int , set<int> >l; // \u7edf\u8ba1\u5217\u5185\u969c\u788d\u7269\nint main()\n{\n    scanf(\"%d%d\" , &hh , &ww);\n    scanf(\"%d%d\" , &sx , &sy);\n    scanf(\"%d\" , &n);\n    for(int i = 1 ; i <= n ; i ++)\n    {\n        int x , y;\n        scanf(\"%d%d\" , &x , &y);\n        h[x].insert(y); // \u653e\u5165\u6570\u7ec4\n        l[y].insert(x);\n        // \u8fd9\u91cc\u6d89\u53ca\u4e86map\u7684insert\uff0c\u4e0d\u61c2\u5c31bdfs\u5427qwq\n    }\n    scanf(\"%d\" , &q);\n    while(q --)\n    {\n        string op;\n        int d;\n        h[sx].insert(0);\n        h[sx].insert(ww + 1);\n\t\tl[sy].insert(0);\n\t\tl[sy].insert(hh + 1);\n        // \u53ef\u4ee5\u628a\u8fb9\u754c\u4e5f\u7b97\u4f5c\u969c\u788d\uff0c\u56e0\u4e3a\u5230\u4e86\u8fb9\u754c\u4e5f\u548c\u969c\u788d\u4e00\u6837\u4e0d\u80fd\u8d70\u4e86qwq\n        cin >> op;\n\t\tscanf(\"%d\" , &d);\n\t\tif(op == \"L\")\n\t\t{\n\t\t\tint zhangai = *(-- h[sx].lower_bound(sy));\n\t\t\t// 0_______\u969c\u788d_______\u80fd\u8d70\u7684_______sx\n\t\t\t// 0_______\u80fd\u8d70\u7684_____\u969c\u788d________sx\n\t\t\t// <-----  \u8d8a\u5f80\u5de6\u8d8a\u597d\n\t\t\tsy = max(0 , max(zhangai + 1 , sy - d));\n\t\t}\n\t\tif(op == \"R\")\n\t\t{\n\t\t\tint zhangai = *h[sx].upper_bound(sy);\n\t\t\t// 0_______\u969c\u788d_______\u80fd\u8d70\u7684_______sx\n\t\t\t// 0_______\u80fd\u8d70\u7684_____\u969c\u788d________sx\n\t\t\t//   \u8d8a\u5f80\u53f3\u8d8a\u597d ------->\n            sy = min(ww , min(zhangai - 1 , sy + d));\n\t\t}\n\t\tif(op == \"U\")\n\t\t{\n\t\t\tint zhangai = *(-- l[sy].lower_bound(sx));\n\t\t\tsx = max(0 , max(zhangai + 1 , sx - d));\n\t\t}\n\t\tif(op == \"D\")\n\t\t{\n\t\t\tint zhangai = *l[sy].upper_bound(sx);\n\t\t\tsx = min(hh , min(zhangai - 1 , sx + d));\n\t\t}\n        // \u540c\u7406\n\t\tprintf(\"%d %d\\n\" , sx , sy);\n    }\n    return 0;\n}\n```",
        "postTime": 1676966611,
        "uid": 719978,
        "name": "DYYqwq",
        "ccfLevel": 4,
        "title": "[ABC273D] LRUD Instructions \u9898\u89e3"
    },
    {
        "content": "### \u601d\u8def\n\n\u89c2\u5bdf\u5230\u6bcf\u6b21\u64cd\u4f5c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6ce8\u610f\u5230\u8fd9\u4e2a\u65b9\u5411\u7684\u7b2c\u4e00\u4e2a\u969c\u788d\u7269\u3002\n\n\u663e\u7136\u662f\uff0c\u6211\u4eec\u628a\u969c\u788d\u7269\u7684\u4f4d\u7f6e\u6254\u5230 $\\texttt{map}$ \u91cc\u9762\u53bb\u3002\u5bf9\u4e8e\u6bcf\u6b21\u79fb\u52a8\uff0c\u770b\u90a3\u4e2a\u65b9\u5411\u6700\u8fd1\u7684\u969c\u788d\u7269\u662f\u4ec0\u4e48\u3002\u8fd9\u4e00\u6b65\u6211\u4eec\u663e\u7136\u53ef\u4ee5\u7528 $\\texttt{lower\\_bound}$ \u6765\u5b9e\u73b0\u3002\n\n\u56e0\u4e3a\u884c\u548c\u5217\u4e0a\uff0c\u540c\u4e00\u4e2a\u969c\u788d\u7269\u90fd\u6709\u53ef\u80fd\u8d77\u4f5c\u7528\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e24\u4e2a $\\texttt{map}$\u3002\n\n\u8fd9\u9898\u601d\u7ef4\u96be\u5ea6\u6bd4\u8f83\u4f4e\uff0c\u4e3b\u8981\u8fd8\u662f\u5728\u4e8e $\\texttt{stl}$ \u7684\u8fd0\u7528\u4e0a\u9762\u3002\u5728 $\\texttt{ABC}$\uff0c\u5199\u4ee3\u7801\u7684\u901f\u5ea6\u8fd8\u662f\u5f88\u91cd\u8981\u7684\u3002\n\n### \u5b9e\u73b0\n\n\u6bcf\u4e00\u79cd\u64cd\u4f5c\u90fd\u662f\u7c7b\u4f3c\u7684\uff0c\u6240\u4ee5\u4f60\u5728\u590d\u5236\u7684\u65f6\u5019\u8981\u770b\u770b\u6709\u6ca1\u6709\u6539\u5168\u4e86\u3002\n\n\u8bb0\u5f97\u5728\u8fb9\u754c\u4e5f\u653e\u4e0a\u969c\u788d\u7269\u3002\n\n```cpp\nint r[200005], c[200005];\nmap<int, set<int>>mr, mc;\nint Solve() {\n    int h = getInt(), w = getInt(), x = getInt(), y = getInt();\n    int n = getInt();\n\n    for (int i = 1; i <= n; i++)\n        r[i] = getInt(), c[i] = getInt();\n\n    int q = getInt();\n\n    for (int i = 1; i <= n; i++) {\n        mr[r[i]].insert(c[i]);\n        mc[c[i]].insert(r[i]);\n    }\n\n    while (q--) {\n        char opt;\n        cin >> opt;\n        int l = getInt();\n        mr[x].insert(w + 1);\n        mc[y].insert(h + 1);\n        mr[x].insert(0);\n        mc[y].insert(0);\n\n        if (opt == 'L') {\n            auto it = mr[x].lower_bound(y);\n            it--;\n            int d = *it;\n            int dist = min(l, y - d - 1);\n            y -= dist;\n        } else if (opt == 'R') {\n            auto it = mr[x].lower_bound(y);\n            int d = *it;\n            int dist = min(l, d - y - 1);\n            y += dist;\n        } else if (opt == 'U') {\n            auto it = mc[y].lower_bound(x);\n            it--;\n            int d = *it;\n            int dist = min(l, x - d - 1);\n            x -= dist;\n        } else {\n            auto it = mc[y].lower_bound(x);\n            int d = *it;\n            int dist = min(l, d - x - 1);\n            x += dist;\n        }\n\n        putInt(x, ' ');\n        putInt(y, '\\n');\n    }\n\n    return 0;\n}\n```",
        "postTime": 1667697479,
        "uid": 482112,
        "name": "Black_destiny",
        "ccfLevel": 5,
        "title": "[ABC273D] LRUD Instructions"
    },
    {
        "content": "~~\u606d\u795d\u672c\u849f\u84bb\u5728\u6bd4\u8d5b\u65f6 AC \u6b64\u9898~~\n\n\u6839\u636e\u9898\u610f\uff0c\u6bcf\u6b21\u64cd\u4f5c\u6211\u4eec\u53ea\u9700\u8981\u627e\u51fa\u6307\u5b9a\u65b9\u5411\u4e0a\u79bb\u5f53\u524d\u70b9\u6700\u8fd1\u7684\u969c\u788d\u7269\u5373\u53ef\u3002\n\n\u4e0d\u59a8\u5c06\u6bcf\u884c\u548c\u6bcf\u5217\u969c\u788d\u7684\u4f4d\u7f6e\u5148\u5b58\u4e0b\u6765\uff0c\u63a5\u7740\u6392\u5e8f\uff0c\u8fd9\u6837\u8bbf\u95ee\u7684\u65f6\u5019\u53ef\u4ee5\u76f4\u63a5\u4e8c\u5206\u67e5\u627e\u3002\n\n\u53e6\u5916\u8bb0\u5f97\u8981\u5c06\u8fb9\u754c\u6761\u4ef6\u52a0\u4e0a\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint H, W, N, Q, l, rs, cs;\nchar d[3];\nunordered_map<int, vector<int>> wallR, wallC;\n \nint main()\n{\n    scanf(\"%d %d %d %d %d\", &H, &W, &rs, &cs, &N);\n    for (int i = 1; i <= N; i++)\n    {\n        int r, c;\n        scanf(\"%d %d\", &r, &c);\n        wallR[r].push_back(c);\n        wallC[c].push_back(r);\n    }\n    for (auto &&v : wallR)\n    \tsort(v.second.begin(), v.second.end());\n    for (auto &&v : wallC)\n    \tsort(v.second.begin(), v.second.end());\n    scanf(\"%d\", &Q);\n    while (Q--)\n    {\n        scanf(\"%s %d\", d, &l);\n        if (d[0] == 'L')\n        {\n            vector<int> &v = wallR[rs];\n            int pos = lower_bound(v.begin(), v.end(), cs) - v.begin();\n            if (pos == 0)\n                cs = max(1, cs - l);\n            else\n                cs = max(v[pos - 1] + 1, cs - l);\n        }\n        else if (d[0] == 'R')\n        {\n            vector<int> &v = wallR[rs];\n            int pos = lower_bound(v.begin(), v.end(), cs) - v.begin();\n            if (pos == v.size())\n                cs = min(W, cs + l);\n            else\n                cs = min(v[pos] - 1, cs + l);\n        }\n        else if (d[0] == 'U')\n        {\n            vector<int> &v = wallC[cs];\n            int pos = lower_bound(v.begin(), v.end(), rs) - v.begin();\n            if (pos == 0)\n                rs = max(1, rs - l);\n            else\n                rs = max(v[pos - 1] + 1, rs - l);\n        }\n        else\n        {\n            vector<int> &v = wallC[cs];\n            int pos = lower_bound(v.begin(), v.end(), rs) - v.begin();\n            if (pos == v.size())\n                rs = min(H, rs + l);\n            else\n                rs = min(v[pos] - 1, rs + l);\n        }\n        printf(\"%d %d\\n\", rs, cs);\n    }\n    return 0;\n}\n```",
        "postTime": 1666872760,
        "uid": 533854,
        "name": "CodingShark",
        "ccfLevel": 5,
        "title": "ABC273D\u9898\u89e3"
    },
    {
        "content": "ABC273 A-F\u9898\u89e3\u5168\u90e8\u53ef\u89c1\uff1a[link](https://www.cnblogs.com/LAK666/p/16795179.html)\n\n## D\n\u6709 `L` `R` `U` `D`\u56db\u79cd\u64cd\u4f5c\uff0c\u6bcf\u6b21\u8be2\u95ee\u64cd\u4f5c $l_i$ \u6b21\uff0c\u9047\u5230\u5899\u5219\u505c\u4e0b\uff0c\u95ee\u4f1a\u5230\u8fbe\u54ea\u4e2a\u4f4d\u7f6e\u3002\n### Solution\n\u5f88\u660e\u663e\u9700\u8981\u5bf9\u4e8e\u6bcf\u4e00\u884c\u5217\u8bb0\u5f55\u5899\u7684\u4f4d\u7f6e\uff0c\u5e76\u4e14\u9700\u8981\u6392\u597d\u5e8f\u65b9\u4fbf\u4e8c\u5206\u67e5\u627e\uff0c\u7528 map \u5957 set \u5373\u53ef\u3002\n\n\u6bcf\u6b21\u4e8c\u5206\u627e\u5230\u5f53\u524d\u65b9\u5411\u79bb\u5f53\u524d\u4f4d\u7f6e\u6700\u8fd1\u7684\u5899\uff0c\u770b\u8d70 $l_i$ \u6b65\u4f1a\u4e0d\u4f1a\u88ab\u62e6\u4e0b\u6765\u3002\n\n\u56e0\u4e3a\u4e0d\u80fd\u8d70\u51fa\u8303\u56f4\uff0c\u8fd9\u5c31\u5f88\u6076\u5fc3\uff0c\u4e3a\u4e86\u907f\u514d\u5927\u91cf\u7684\u7279\u5224\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u4e8e\u884c\uff0c\u5c06 $0$ \u548c $m+1$ \u8bbe\u4e3a\u5899\uff0c\u5bf9\u4e8e\u5217\uff0c\u5c06 $0$ \u548c $n+1$ \u8bbe\u4e3a\u5899\uff0c\u8fd9\u6837\u4ee3\u7801\u4f1a\u597d\u5199\u5f88\u591a\u3002\n### Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nvoid read(int &x)\n{\n\tchar ch=getchar();\n\tint r=0,w=1;\n\twhile(!isdigit(ch))w=ch=='-'?-1:1,ch=getchar();\n\twhile(isdigit(ch))r=(r<<3)+(r<<1)+(ch^48),ch=getchar();\n\tx=r*w;\n}\nmap<int,set<int> >f1;\nmap<int,set<int> >f2;\nsigned main()\n{\n\tint n,m,sx,sy,t,q;\n\tread(n),read(m),read(sx),read(sy);\n\tread(t);\n\twhile(t--)\n\t{\n\t\tint x,y;\n\t\tread(x),read(y);\n\t\tf1[x].insert(y);\n\t\tf2[y].insert(x);\n\t}\n\tread(q);\n\twhile(q--)\n\t{\n\t\tf1[sx].insert(0);f1[sx].insert(m+1);\n\t\tf2[sy].insert(0);f2[sy].insert(n+1);//\u5c06\u8fb9\u754c\u8bbe\u4e3a\u5899\n\t\tchar op;\n\t\tint d,tx,ty;\n\t\tcin>>op;read(d);\n\t\tif(op=='L')\n\t\t{\n\t\t\tty=*--f1[sx].lower_bound(sy);\n\t\t\tif(sy-ty-1>=d)sy-=d;\n\t\t\telse sy=ty+1;\n\t\t}\n\t\tif(op=='R')\n\t\t{\n\t\t\tty=*f1[sx].upper_bound(sy);\n\t\t\tif(ty-sy-1>=d)sy+=d;\n\t\t\telse sy=ty-1;\n\t\t}\n\t\tif(op=='U')\n\t\t{\n\t\t\ttx=*--f2[sy].lower_bound(sx);\n\t\t\tif(sx-tx-1>=d)sx-=d;\n\t\t\telse sx=tx+1;\n\t\t}\n\t\tif(op=='D')\n\t\t{\n\t\t\ttx=*f2[sy].upper_bound(sx);\n\t\t\tif(tx-sx-1>=d)sx+=d;\n\t\t\telse sx=tx-1;\n\t\t}\n\t\tprintf(\"%lld %lld\\n\",sx,sy);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1666335487,
        "uid": 415256,
        "name": "Epoch_L",
        "ccfLevel": 5,
        "title": "ABC273D"
    },
    {
        "content": "\u4e8c\u5206\u9898\u3002\n\n\u67e5\u627e\u5411\u524d\u8fdb\u65b9\u5411\u8d70\u51e0\u6b65\u4f1a\u78b0\u5230\u8ddd\u79bb\u5f53\u524d\u70b9**\u6700\u8fd1**\u7684\u5899\u58c1\uff0c\u5982\u679c\u6ca1\u6709\u5899\u58c1\u7684\u8bdd\u5c31**\u4e00\u76f4\u524d\u8fdb**\uff0c\u5982\u679c\u78b0\u5230\u5899\u58c1\u7684\u8bdd\u5c31**\u505c\u5728\u5899\u58c1\u4e4b\u524d**\uff0c\u8fd9\u6837\u5c31\u80fd\u8fc5\u901f\u5b8c\u6210\u4e00\u6761\u6307\u4ee4\u3002\n\n\u53ef\u4ee5\u7528 `std::map<int, std::vector<int>>` \u6765\u7ef4\u62a4\u6bcf\u4e00\u884c\u548c\u6bcf\u4e00\u5217\u7684\u5899\u58c1\uff0c\u7136\u540e\u4e8c\u5206\u627e\u5230\u524d\u8fdb\u65b9\u5411\u4e0a\u8ddd\u79bb\u5f53\u524d\u70b9**\u6700\u8fd1\u7684\u5899\u58c1\u7684\u4f4d\u7f6e**\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O((N+Q) \\log N)$\u3002\n\n#### \u4ee3\u7801\uff1a\n```\n# include <bits/stdc++.h>\n# define rep(i, n) for (int i = 0; i < (n); ++i)\nusing namespace std;\nusing MP = map<int, vector<int>>;\nint main() {\n    int h, w, si, sj, n;\n    cin >> h >> w >> si >> sj >> n;\n    MP mpL, mpR, mpU, mpD;\n    rep(ni, n) {\n        int i, j;\n        cin >> i >> j;\n        mpR[i].push_back(j);\n        mpL[i].push_back(-j);\n        mpD[j].push_back(i);\n        mpU[j].push_back(-i);\n    }\n    auto init = [&](MP& mp, int r) {\n        for (auto& p : mp) {\n            sort(p.second.begin(), p.second.end());\n            p.second.push_back(r);\n        }\n    };\n    init(mpR, w+1);\n    init(mpL, 0);\n    init(mpD, h+1);\n    init(mpU, 0);\n    auto f = [&](MP& mp, int i, int j, int l, int r) {\n        auto it = mp.find(i);\n        if (it == mp.end()) return min(j+l, r-1);\n        auto& is = it->second;\n        int wj = *lower_bound(is.begin(), is.end(), j); \n        return min(j+l, wj-1);\n    };\n    int q;\n    cin >> q;\n    rep(qi, q) {\n        char d; int l;\n        cin >> d >> l;\n        if (d == 'R') sj = f(mpR, si, sj, l, w+1);\n        if (d == 'L') sj = -f(mpL, si, -sj, l, 0);\n        if (d == 'D') si = f(mpD, sj, si, l, h+1);\n        if (d == 'U') si = -f(mpU, sj, -si, l, 0);\n        cout << si << ' ' << sj << '\\n';\n    }\n    return 0;\n}\n```",
        "postTime": 1671673490,
        "uid": 775296,
        "name": "sbz_ysc",
        "ccfLevel": 0,
        "title": "[ABC273D] LRUD Instructions \u9898\u89e3"
    },
    {
        "content": "\u601d\u8def\u975e\u5e38\u66b4\u529b\u3002\u65e2\u7136\u6a21\u62df\u4f1a\u8d85\u65f6\uff0c\u6211\u4eec\u5c31\u4f18\u5316\u6a21\u62df\u7684\u8fc7\u7a0b\u3002\u5c06\u6240\u6709\u969c\u788d\u6309\u884c\u548c\u5217\u5206\u522b\u5b58\u5165 `map` \u5957 `set` \u4e2d\uff0c\u90a3\u4e48\u5c31\u80fd\u5feb\u901f\u627e\u5230\u4f4d\u4e8e\u9ad8\u6865\u4e0a\u4e0b\u5de6\u53f3\u7684\u6700\u8fd1\u969c\u788d\u3002\u5224\u65ad\u8d70\u5b8c $L$ \u6b65\u540e\u7684\u5bf9\u5e94\u5173\u7cfb\u5c31\u53ef\u4ee5\u505a\u5230\u5355\u6b21 $O(\\log n)$ \u4e86\u3002\n# AC \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\nmap<int, set<int>> row;\nmap<int, set<int>> col;\n\nint h, w, n, q, x, y;\n\nint r, c, l;\n\nchar opt[2];\n\nint main() {\n\tscanf(\"%d%d%d%d\", &h, &w, &x, &y);\n\tfor (scanf(\"%d\", &n); n--;) scanf(\"%d%d\", &r, &c), row[r].insert(c), col[c].insert(r);\n\tfor (scanf(\"%d\", &q); q--;) {\n\t\tscanf(\"%s%d\", opt, &l);\n\t\tswitch (*opt) {\n\t\tcase 'L': {\n\t\t\tauto it = row[x].lower_bound(y);\n\t\t\tif (it == row[x].begin()) y = max(y - l, 1);\n\t\t\telse y = max(y - l, *--it + 1);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'R': {\n\t\t\tauto it = row[x].lower_bound(y);\n\t\t\tif (it == row[x].end()) y = min(y + l, w);\n\t\t\telse y = min(y + l, *it - 1);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'U': {\n\t\t\tauto it = col[y].lower_bound(x);\n\t\t\tif (it == col[y].begin()) x = max(x - l, 1);\n\t\t\telse x = max(x - l, *--it + 1);\n\t\t\tbreak;\n\t\t}\n\t\tcase 'D': {\n\t\t\tauto it = col[y].lower_bound(x);\n\t\t\tif (it == col[y].end()) x = min(x + l, h);\n\t\t\telse x = min(x + l, *it - 1);\n\t\t\tbreak;\n\t\t}\n\t\t}\n\t\tprintf(\"%d %d\\n\", x, y);\n\t}\n}\n```",
        "postTime": 1670150153,
        "uid": 406941,
        "name": "Register_int",
        "ccfLevel": 6,
        "title": "ABC273D \u9898\u89e3"
    },
    {
        "content": "## \u4e00 \u89e3\u9898\u601d\u8def\n- \u9898\u76ee\u8bc4\u4ef7\uff1a\u5f88\u597d\u7684\u4e00\u9053\u6a21\u62df\u9898\uff0c\u6709\u8f83\u591a\u7684\u7ec6\u8282\uff0c\u5728 ABC D \u9898\u4e2d\u96be\u5ea6\u8f83\u9ad8 \uff08AT \u8bc4\u5206 1119\uff09\u3002\n### \u601d\u8def\n\u6bd4\u8f83\u5bb9\u6613\u60f3\u5230\uff0c\u8bb0\u5f55\u4e0b\u6bcf\u4e00\u884c\u548c\u6bcf\u4e00\u5217\u7684\u5899\uff0c\u5728\u79fb\u52a8\u7684\u65f6\u5019\u4f7f\u7528\u4e8c\u5206\u6cd5\u5224\u65ad\u6700\u591a\u53ef\u4ee5\u79fb\u52a8\u51e0\u6b65\uff0c\u7136\u540e\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u5177\u4f53\u6765\u8bf4\u5c31\u662f\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u79fb\u52a8\uff0c\u6211\u4eec\u4f7f\u7528\u4e8c\u5206\u6cd5\u4ee5 $O(\\log n)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u627e\u5230\u5b83\u524d\u9762\u7684\u7b2c\u4e00\u4e2a\u201c\u5899\u201d\uff0c\u5982\u679c\u5728\u5b83\u7684\u8ddd\u79bb\u5927\u4e8e $k$ \u90a3\u4e48\u76f4\u63a5\u8d70\u5373\u53ef\uff08\u80af\u5b9a\u649e\u4e0d\u5230\uff09\uff0c\u5426\u5219\u80fd\u8d70\u51e0\u6b65\u8d70\u51e0\u6b65\u3002\n### \u5751\u70b9\n1. \u5730\u56fe\u5f88\u5927\uff0c\u5b58\u4e0d\u4e0b\n- \u89e3\u51b3\u529e\u6cd5\uff1a\u7528 map \u8bb0\u5f55\n2. \u9047\u5230\u5730\u56fe\u8fb9\u754c\n- \u89e3\u51b3\u529e\u6cd5\uff1a\u7ed9\u6bcf\u884c\u6bcf\u5217\u5f3a\u5236\u52a0\u4e0a\u5934\u548c\u5c3e\n\n## \u4e8c \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nvoid fastInp()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n}\nint n, m, x, y, p, q;\nmap <int, vector <int> > wall_x, wall_y;\nset <int> vx, vy;\nint main()\n{\n//\tfreopen(\"input.txt\", \"r\", stdin);\n\tfastInp();\n\tcin >> n >> m >> x >> y;\n\tcin >> p;\n\tfor (int i = 1; i <= p; ++i)\n\t{\n\t\tint u, v; cin >> u >> v;\n\t\tvx.insert(u); vy.insert(v);\n\t\twall_x[u].push_back(v);\n\t\twall_y[v].push_back(u);\t\n\t}\n\tfor (set <int> :: iterator it = vx.begin(); it != vx.end(); ++it)\n\t{\n\t\tint i = (*it);\n\t\twall_x[i].push_back(0);\t\n\t\twall_x[i].push_back(m + 1);\n\t\tsort(wall_x[i].begin(), wall_x[i].end());\n\t}\n\tfor (set <int> :: iterator it = vy.begin(); it != vy.end(); ++it)\n\t{\n\t\tint i = (*it);\n\t\twall_y[i].push_back(0);\t\n\t\twall_y[i].push_back(n + 1);\n\t\tsort(wall_y[i].begin(), wall_y[i].end());\n\t}\n\tcin >> q;\n\tfor (int i = 1; i <= q; ++i)\n\t{\n\t\tif (wall_x[x].size() == 0)\n\t\t{\n\t\t\twall_x[x].push_back(0);\t\n\t\t\twall_x[x].push_back(m + 1);\n\t\t}\n\t\tif (wall_y[y].size() == 0)\n\t\t{\n\t\t\twall_y[y].push_back(0);\t\n\t\t\twall_y[y].push_back(n + 1);\n\t\t}\n\t\tint l; char c;\n\t\tcin >> c >> l;\n\t\tif (c == 'U')\n\t\t{\n\t\t\tint pos = lower_bound(wall_y[y].begin(), wall_y[y].end(), x) - wall_y[y].begin() - 1;\n\t\t\tpos = wall_y[y][pos];\n\t\t\tif (pos < x - l) x -= l;\n\t\t\telse x = pos + 1;\n\t\t}\n\t\telse if (c == 'D')\n\t\t{\n\t\t\tint pos = lower_bound(wall_y[y].begin(), wall_y[y].end(), x) - wall_y[y].begin();\n\t\t\tpos = wall_y[y][pos];\n\t\t\tif (pos > x + l) x += l;\n\t\t\telse x = pos - 1;\n\t\t}\n\t\telse if (c == 'L')\n\t\t{\n\t\t\tint pos = lower_bound(wall_x[x].begin(), wall_x[x].end(), y) - wall_x[x].begin() - 1;\n\t\t\tpos = wall_x[x][pos];\n\t\t\tif (pos < y - l) y -= l;\n\t\t\telse y = pos + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint pos = lower_bound(wall_x[x].begin(), wall_x[x].end(), y) - wall_x[x].begin();\n\t\t\tpos = wall_x[x][pos];\n\t\t\tif (pos > y + l) y += l;\n\t\t\telse y = pos - 1;\n\t\t}\n\t\tcout << x << \" \" << y << endl;\n\t}\n    return 0;\n}\n```\n",
        "postTime": 1666360195,
        "uid": 425694,
        "name": "\u90d1\u671d\u66e6zzx",
        "ccfLevel": 6,
        "title": "LRUD Instructions \u9898\u89e3"
    }
]
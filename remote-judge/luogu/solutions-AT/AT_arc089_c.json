[
    {
        "content": "\u65e0\u803b\u5730\u5b89\u5229\u4e00\u53d1\u81ea\u5df1\u7684\u535a\u5ba2\uff1a[Atcoder Regular Contest 089E - GraphXY\u9898\u89e3](https://www.cnblogs.com/withhope/p/11740792.html)\n\n\u9898\u89e3\uff1a\u4ee4$f[i][j]$\u8868\u793a\u4eceS\u5230T\u7684\u8def\u5f84\u4e0a\u6709i\u4e2ax\u548cj\u4e2ay\u65f6\u5176\u4f59\u8fb9\u7684\u6700\u5c0f\u53ef\u80fd\u957f\u5ea6\uff0c\u82e5\u6211\u4eec\u5df2\u77e5$f[i][j]$\uff0c\u5219\u53ef\u4ee5\u63a8\u51fa$d[x][y]=min\\{f[i][j]+i*x+j*y\\}$\uff0c\u90a3\u4e48\u5bf9\u8be5\u5f0f\u8fdb\u884c\u79fb\u9879\uff0c\u5f97\u51fa$f[i][j]=max\\{d[x][y]-i*x-j*y\\}$\uff0c\u4f46\u8be5$f[i][j]$\u4e0d\u4e00\u5b9a\u7b26\u5408\u6761\u4ef6\uff0c\u91cd\u65b0\u5224\u65ad\uff0c\u82e5\u4e0d\u7b26\u5408\u5219\u8be5\u60c5\u51b5\u4e00\u5b9a\u65e0\u89e3\uff0c\u5426\u5219\u4e00\u5b9a\u53ef\u4ee5\u6784\u9020\u51fa\u4e00\u89e3\u3002\n\u8003\u8651\u5982\u4f55\u6784\u9020\uff1a\u8fde\u4e24\u6761\u957f\u5ea6\u4e3a100\u7684\u94fe\uff08\u663e\u7136\uff0c\u957f\u5ea6\u66f4\u957f\u6beb\u65e0\u610f\u4e49\uff09\uff0c\u4e00\u6761\u94fe\u6240\u6709\u8fb9\u6743\u4e3aX\uff0c\u53e6\u4e00\u6761\u94fe\u6240\u6709\u8fb9\u6743\u4e3aY\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$f[i][j]$\uff0c\u53ef\u4ee5\u5728X\u94fe\u4e0a\u7684\u7b2c$i$\u4e2a\u8282\u70b9\u548cY\u94fe\u4e0a\u7684\u5012\u6570\u7b2c$j$\u4e2a\u8282\u70b9\u95f4\u8fde\u4e00\u6761\u957f\u5ea6\u4e3a$f[i][j]$\u7684\u8fb9\u3002\u5373\u53ef\u6784\u9020\u65b9\u6848\u3002\ncode:\n```cpp\n#include <cstdio>\n#include <cstring>\n#define Maxn 300\n#define Maxk 10\n#define Inf 0x3f3f3f3f\nint f[Maxn+5][Maxn+5];\nint d[Maxk+5][Maxk+5];\n//f[i][j]\u8868\u793a\u4eceS\u5230T\u7684\u8def\u5f84\u4e0a\u6709i\u4e2ax\u548cj\u4e2ay\u65f6\u5176\u4f59\u8fb9\u7684\u6700\u5c0f\u53ef\u80fd\u957f\u5ea6 \n//d[x][y]=min{f[i][j]+i*x+j*y}\n//f[i][j]=max{d[x][y]-i*x-j*y}\nint mx(int a,int b){\n\treturn a>b?a:b;\n}\nint mn(int a,int b){\n\treturn a<b?a:b;\n}\nstruct Edge{\n\tint u,v,w;\n}edge[Maxn*Maxn+5];\nint n,m;\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tscanf(\"%d\",&d[i][j]);\n\t\t}\n\t}\n\tfor(int i=0;i<=100;i++){\n\t\tfor(int j=0;j<=100;j++){\n\t\t\tfor(int x=1;x<=n;x++){\n\t\t\t\tfor(int y=1;y<=m;y++){\n\t\t\t\t\tf[i][j]=mx(f[i][j],d[x][y]-i*x-j*y);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint now;\n\tfor(int x=1;x<=n;x++){\n\t\tfor(int y=1;y<=m;y++){\n\t\t\tnow=Inf;\n\t\t\tfor(int i=0;i<=100;i++){\n\t\t\t\tfor(int j=0;j<=100;j++){\n\t\t\t\t\tnow=mn(now,f[i][j]+i*x+j*y);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(now!=d[x][y]){\n\t\t\t\tputs(\"Impossible\");\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\tputs(\"Possible\");\n\tputs(\"202 10401\");\n\tfor(int i=1;i<=100;i++){\n\t\tprintf(\"%d %d X\\n\",i,i+1);\n\t}\n\tfor(int i=102;i<202;i++){\n\t\tprintf(\"%d %d Y\\n\",i,i+1);\n\t}\n\tfor(int i=0;i<=100;i++){\n\t\tfor(int j=0;j<=100;j++){\n\t\t\tprintf(\"%d %d %d\\n\",i+1,202-j,f[i][j]);\n\t\t}\n\t}\n\tputs(\"1 202\");\n\treturn 0;\n}\n```",
        "postTime": 1572271976,
        "uid": 33362,
        "name": "Suiseiseki",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AT3877 \u3010GraphXY\u3011"
    },
    {
        "content": "\u4e3a\u4e86\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff0c\u4f60\u53ef\u4ee5\u524d\u5f80[\u6211\u7684\u535a\u5ba2](http://zhylj.cc/index.php/archives/13/)\u3002\n\n## \u5206\u6790\n\n\u9996\u5148\uff0c\u6ce8\u610f\u5230\u6211\u4eec\u53ef\u4ee5\u4ece $S$ \u5f00\u59cb\u62c9\u4e00\u6761\u94fe\uff0c\u4e0a\u9762\u6743\u503c\u5747\u4e3a ``X``\uff0c\u518d\u62c9\u4e00\u6761\u94fe\u5230 $T$\uff0c\u5176\u4e0a\u6743\u503c\u5747\u4e3a ``Y``\u3002\u7136\u540e\u6211\u4eec\u5982\u679c\u8fde\u4e00\u6761\u4ece\u524d\u8005\u8ddd\u79bb $S$ \u7b2c $k_1$ \u4e2a ``X`` \u540e\u5230\u540e\u8005\u8ddd\u79bb $T$ \u7b2c $k_2$ \u4e2a ``Y`` \u540e\uff0c\u8bbe\u5176\u6743\u503c\u4e3a $c$\uff0c\u5219\u8fd9\u6761\u8def\u5f84\u5bf9\u6700\u77ed\u8def\u7684\u8d21\u732e\u4e3a $k_1x+k_2y+c$\uff08\u663e\u7136\uff0c\u6700\u77ed\u8def\u662f\u6240\u6709\u8def\u5f84\u8d21\u732e\u7684 $\\min$\uff09.\n\n\u8fd9\u65f6\uff0c\u806a\u660e\u7684\u9009\u624b\u53ef\u80fd\u4f1a\u60f3\u5230\uff0c\u8bbe $k_1,k_2$ \u4e4b\u95f4\u8fde\u4e86 $f_{k_1,k_2}$\uff0c\u5219 $f_{k_1,k_2} + k_1x+k_2y \\ge d_{x,y} \\Rightarrow f_{k_1,k_2} \\ge d_{x,y} - k_1x - k_2y$\uff0c\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u8981\u53d6 $f_{k_1,k_2} = \\max \\{d_{x,y} + k_1x + k_2y\\}$ \u7136\u540e\u518d Check \u4e00\u4e0b\u5c31\u597d\u4e86\u3002\n\n\u4f46\u662f\uff0c\u50cf\u6211\u8fd9\u6837\u4e0d\u806a\u660e\u7684\u9009\u624b\u8981\u600e\u4e48\u529e\u5462\uff1f\u6211\u4eec\u8003\u8651\u6570\u636e\u8303\u56f4\u8d85\u5c0f\uff0c\u4e8e\u662f\u5bf9\u6bcf\u4e2a $d_{x,y}$ \u6211\u4eec\u679a\u4e3e\u53ef\u80fd\u8ba9\u5b83\u53d6\u5230\u6700\u5c0f\u503c\u7684\u8def\u5f84\u7684 $k_1,k_2$\uff0c\u7136\u540e\u66b4\u529b\u5bf9\u5176\u5b83 $A\\times B$ \u4e2a\u70b9 Check \u4e00\u4e0b\u8fd9\u4e2a\u8def\u5f84\u662f\u5426\u5408\u6cd5\uff08\u4e5f\u5373\u4e0a\u9762\u7684\u4e0d\u7b49\u5f0f\u662f\u5426\u6210\u7acb\uff09\u3002\n\n\u7136\u540e\u5c31\u505a\u5b8c\u4e86\u3002\n\n## \u4ee3\u7801\n\n```cpp\nconst int kN = 3e2 + 5;\n\nstruct Edge {\n\tint u, v, w;\n} E[kN];\nint A, B, D[kN][kN], cnt = 0;\nstd::set <pii> S;\nvoid Add(int k1, int k2, int b) {\n\tif(S.count(mkp(k1, k2))) return;\n\tS.insert(mkp(k1, k2));\n\tE[++cnt] = (Edge) { k1 + 1, k2 + 102, b };\n}\nbool Check(int k1, int k2, int b, int x, int y) {\n\treturn b + x * k1 + y * k2 >= D[x][y];\n}\nint main() { \n\tint T = 1; //rd(T);\n\twhile(T--) {\n\t\tbool flag = true;\n\t\trd(A, B);\n\t\tfor(int i = 1; i <= A; ++i)\n\t\t\tfor(int j = 1; j <= B; ++j) {\n\t\t\t\trd(D[i][j]);\n\t\t\t\tif(D[i][j] < D[i - 1][j]) flag = false;\n\t\t\t\tif(D[i][j] < D[i][j - 1]) flag = false;\n\t\t\t}\n\t\tfor(int i = 1; i <= A; ++i) D[i][B + 1] = D[i][B];\n\t\tfor(int i = 1; i <= B; ++i) D[A + 1][i] = D[A][i];\n\t\tD[A + 1][B + 1] = std::max(D[A + 1][B], D[A][B + 1]);\n\t\tfor(int i = 1; i <= A; ++i)\n\t\t\tfor(int j = 1; j <= B; ++j) {\n\t\t\t\tint d = D[i][j]; bool found = false;\n\t\t\t\tfor(int k1 = 0; !found && k1 <= 100; ++k1)\n\t\t\t\t\tfor(int k2 = 0; d - k1 * i - k2 * j >= 0; ++k2) {\n\t\t\t\t\t\tint b = d - k1 * i - k2 * j; bool able = true;\n\t\t\t\t\t\tfor(int x = 1; able && x <= A; ++x)\n\t\t\t\t\t\t\tfor(int y = 1; able && y <= B; ++y)\n\t\t\t\t\t\t\t\tif(!Check(k1, k2, b, x, y)) able = false;\n\t\t\t\t\t\tif(able) {\n\t\t\t\t\t\t\tAdd(k1, k2, b);\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tif(!found) flag = false;\n\t\t\t}\n\t\tif(!flag) {\n\t\t\tprintf(\"Impossible\\n\");\n\t\t} else if(flag) {\n\t\t\tprintf(\"Possible\\n\");\n\t\t\tprintf(\"300 %d\\n\", cnt + 201);\n\t\t\tfor(int i = 1; i <= cnt; ++i)\n\t\t\t\tprintf(\"%d %d %d\\n\", E[i].u, E[i].v, E[i].w);\n\t\t\tfor(int i = 1; i <= 100; ++i)\n\t\t\t\tprintf(\"%d %d X\\n\", i, i + 1);\n\t\t\tfor(int i = 103; i <= 203; ++i)\n\t\t\t\tprintf(\"%d %d Y\\n\", i, i - 1);\n\t\t\tprintf(\"1 102\\n\");\n\t\t}\n\t} return 0;\n}\n```",
        "postTime": 1612357169,
        "uid": 34238,
        "name": "zhylj",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AT3877 \u3010[ARC089C] GraphXY\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u4e2a\u4e0e\u5176\u4ed6\u9898\u89e3\u4e0d\u592a\u4e00\u6837\u7684\u601d\u8def\u3002\n\n\u4ee4 $X_{x,y}$ \u4e3a $d_{x,y}$ \u7ecf\u8fc7\u7684 $X$ \u8fb9\u7684\u6570\u91cf\uff0c$Y_{x,y}$ \u540c\u7406\u3002\n\n\u90a3\u4e48 $d_{x,y}=x\\times X_{x,y}+y\\times Y_{x,y}+w_{x,y}$\u3002\n\n$d_{x,y}$ \u8fd9\u6761\u8def\u5f84\u5728 $(x',y')$ \u65f6\u523b\u7684\u957f\u5ea6\u4e3a $d_{x,y}+(x'-x)X_{x,y}+(y'-y)Y_{x,y}$\u3002\u663e\u7136\u8fd9\u4e2a\u503c\u5fc5\u987b $\\ge d_{x',y'}$\u3002\n\n\u540c\u65f6\u8fd8\u9700\u8981\u6ee1\u8db3 $X_{x,y},Y_{x,y},w_{x,y}\\ge 0$\u3002\n\n\u5229\u7528\u8fd9\u4e9b\u5173\u7cfb\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u5173\u4e8e $X_{x,y},Y_{x,y}$ \u7684\u4e00\u4e2a\u4e0d\u7b49\u5f0f\u7ec4\u3002\u5bb9\u6613\u53d1\u73b0\u8fd9\u4e2a\u4e0d\u7b49\u5f0f\u7ec4\u7684\u4efb\u4f55\u4e00\u7ec4\u89e3\u90fd\u662f\u5408\u6cd5\u7684\u3002\n\n\u679a\u4e3e $X_{x,y}$\uff0c\u518d\u5229\u7528\u4e0d\u7b49\u5f0f\u7ec4\u8ba1\u7b97 $Y_{x,y}$ \u53ef\u4ee5\u53d6\u5230\u7684\u533a\u95f4\u3002\u56e0\u4e3a $X_{x,y}\\le \\dfrac{d_{x,y}}{x}$\uff0c\u6240\u4ee5\u53ef\u4ee5\u66b4\u529b\u5b8c\u6210\u8fd9\u4e2a\u8fc7\u7a0b\u3002\u8fd9\u6837\u6211\u4eec\u4e00\u5b9a\u80fd\u5f97\u5230\u4e00\u7ec4\u89e3\u6216\u5224\u5b9a\u4e0d\u7b49\u5f0f\u7ec4\u65e0\u89e3\u3002\n\n\u5229\u7528\u4e0a\u9762\u7684\u65b9\u6cd5\u89e3\u51fa\u6240\u6709\u7684 $X_{x,y},Y_{x,y}$ \u6216\u5224\u5b9a\u65e0\u89e3\uff0c\u5e76\u8ba1\u7b97\u51fa $w_{x,y}$\u3002\u6b64\u65f6\u518d\u8003\u8651\u5982\u4f55\u8fde\u8fb9\u3002\n\n\u7528 $X$ \u8fb9\u8fde\u4e00\u6761\u8d77\u70b9\u4e3a $S$\uff0c\u957f\u5ea6\u4e3a $100$ \u7684\u6709\u5411\u94fe $L_1$\u3002\n\n\u7528 $Y$ \u8fb9\u8fde\u4e00\u6761\u7ec8\u70b9\u4e3a $T$\uff0c\u957f\u5ea6\u4e3a $100$ \u7684\u6709\u5411\u94fe $L_2$\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u7ec4 $(x,y)$\uff0c\u7528\u4e00\u6761\u6743\u503c\u4e3a $w_{x,y}$ \u7684\u8fb9\u8fde\u63a5 $L_1$ \u4e0a\u4ece $S$ \u5f00\u59cb\uff08\u5305\u62ec $S$\uff09\u7b2c $X_{x,y}+1$ \u4e2a\u70b9\u4ee5\u53ca $L_2$ \u4e0a\u4ece $T$ \u5f00\u59cb\uff08\u5305\u62ec $T$\uff09\u7b2c $Y_{x,y}+1$ \u4e2a\u70b9\u3002\n\n\u6ce8\u610f\u5982\u679c\u51fa\u73b0\u91cd\u8fb9\u53d6\u5176\u4e2d\u4e00\u6761\u5373\u53ef\uff0c\u8fd9\u79cd\u6784\u9020\u65b9\u6cd5\u4fdd\u8bc1\u4e86\u91cd\u8fb9\u7684\u8fb9\u6743\u5168\u90e8\u76f8\u7b49\u3002\n\n\u7efc\u4e0a\uff0c\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u6ee1\u8db3\u8981\u6c42\u7684\u6784\u9020\u3002\u4ee3\u7801\u96be\u5ea6\u4e0d\u9ad8\uff0c\u4f46\u6709\u4e00\u4e9b\u7ec6\u8282\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 105\n#define M 1000005\nint n,m,cntE,a[N][N];bool vs[N][N];struct Edge {int u,v,w;}e[M];\nvoid f(int u,int v,int w)\n{if(!vs[u][v]) vs[u][v]=1,e[++cntE]=(Edge) {u+1,202-v,w};} \nint main()\n{\n\tscanf(\"%d %d\",&n,&m);\n\tfor(int i=1;i<=n;++i) for(int j=1;j<=m;++j) scanf(\"%d\",&a[i][j]);\n\tfor(int i=1,L1,R1,L2,R2,t;i<=n;++i) for(int j=1;j<=m;++j)\n\t{\n\t\tbool fl=0;L1=0;R1=a[i][j]/i;\n\t\tfor(int i1=1;i1<=n;++i1)\n\t\t{\n\t\t\tt=a[i][j]-a[i1][j];\n\t\t\tif(i<i1) L1=max(L1,t/(i-i1)+(t<0 && t%(i-i1)));\n\t\t\telse if(i>i1) R1=min(R1,t/(i-i1)-(t<0 && t%(i-i1)));\n\t\t}\n\t\tfor(int k=L1;k<=R1;++k)\n\t\t{\n\t\t\tL2=0;R2=(a[i][j]-i*k)/j;\n\t\t\tfor(int i1=1;i1<=n;++i1) for(int j1=1;j1<=m;++j1)\n\t\t\t{\n\t\t\t\tt=a[i][j]-a[i1][j1]+(i1-i)*k;\n\t\t\t\tif(j<j1) L2=max(L2,t/(j-j1)+(t<0 && t%(j-j1)));\n\t\t\t\telse if(j>j1) R2=min(R2,t/(j-j1)-(t<0 && t%(j-j1)));\n\t\t\t}if(L2<=R2) {fl=1;f(k,L2,a[i][j]-i*k-j*L2);break;}\n\t\t}if(!fl) {puts(\"Impossible\");return 0;}\n\t}printf(\"Possible\\n202 %d\\n\",cntE+200);\n\tfor(int i=1;i<101;++i) printf(\"%d %d X\\n\",i,i+1);\n\tfor(int i=102;i<202;++i) printf(\"%d %d Y\\n\",i,i+1);\n\tfor(int i=1;i<=cntE;++i) printf(\"%d %d %d\\n\",e[i].u,e[i].v,e[i].w);\n\tputs(\"1 202\");return 0;\n}\n```",
        "postTime": 1625059836,
        "uid": 119621,
        "name": "Kubic",
        "ccfLevel": 10,
        "title": "[ARC089C] GraphXY"
    }
]
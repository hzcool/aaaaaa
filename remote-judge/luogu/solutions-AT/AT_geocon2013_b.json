[
    {
        "content": "\u8fd9\u9053\u9898\u662f\u4e00\u9053\u5178\u578b\u7684\u8d39\u7528\u6d41\n\n\u9996\u5148\uff0c\u4e0d\u5b58\u5728\u628a\u5bb6\u5177\u79fb\u52a8\u5230y\u8f74\u53e6\u4e00\u9762\u7684\u60c5\u51b5\n\n\u5176\u6b21\uff0c\u6bcf\u4e2a\u5bb6\u5177\u79fb\u52a8\u540e\u8981\u4e48\u4e0e\u53e6\u4e00\u4e2a\u5bb6\u5177\u5bf9\u79f0\uff0c\u8981\u4e48\u5728y\u8f74\u4e0a~~\uff08\u5e9f\u8bdd\uff09~~\n\n\u90a3\u4e48\u62c6\u70b9\u9650\u6d41\n\n\u5c06\u6bcf\u4e2a\u5bb6\u5177\u62c6\u6210 2 * n \u4e2a\u70b9\uff0c\u5206\u522b\u4e3a i\u548ci+n\n\n\u9996\u5148\u5bf9\u4e8e\u6bcf\u4e2ai\uff0c\u5efa\u7acb\u4e00\u6761S\u5230i\u7684\u8fb9\uff0c\u6d41\u91cf\u4e3a1\uff0c\u8d39\u7528\u4e3a0\uff0c\u8868\u793a\u4e00\u4e2a\u5bb6\u5177\u53ea\u80fd\u79fb\u5230Y\u8f74\u6216\u4e0e\u53e6\u5916\u4e00\u4e2a\u5bb6\u5177\u5bf9\u79f0\u3002\u5efa\u4e00\u6761i+n\u5230T\u7684\u8fb9\uff0c\u4e0e\u4e0a\u4e00\u6761\u8fb9\u540c\u7406\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5bb6\u5177\u79fb\u52a8\u540e\u5728X\u8f74\u4e0a\u7684\u60c5\u51b5\uff0ci\u548ci+n\u4e4b\u95f4\u5efa\u4e00\u6761\u8d39\u7528\u4e3aabs(x[i]),\u6d41\u91cf\u4e3a1\u7684\u8fb9\uff0c\u8868\u793a\u5982\u679c\u8fd9\u4e2a\u5bb6\u5177\u79fb\u52a8\u5230y\u8f74\u4e0a\uff0c\u9700\u8981\u79fb\u52a8\u81f3\u5c11abs(x[i])\u7684\u8ddd\u79bb\n\n\u7136 \u540e \u5bf9 \u4e8e i \u5bb6 \u5177 \u4e0e j \u5bb6 \u5177 \uff0c \u5efa \u7acb \u4e00 \u6761 ( i , j + n )  \u8d39\u7528\u4e3a i \u5173 \u4e8e Y \u8f74 \u5bf9 \u79f0 \u70b9 \u4e0e j \u7684 \u8ddd \u79bb \uff0c \u6d41 \u91cf \u4e3a 1 \u7684 \u8fb9 \uff0c\u8868 \u793a \u4f7f \u79fb \u52a8 \u540e \u8fd9 \u4e24 \u4e2a \u5bb6 \u5177 \u5173 \u4e8e y \u8f74 \u5bf9 \u79f0\n\n\u5373( \u8d39 \u7528 \u4e3a dis ( -x[i] , y[y] , x[j] , y[j] ) )\n\n\u8fd9\u6837\uff0c\u80fd\u591f\u5904\u7406\u7684\u6240\u6709\u60c5\u51b5\u7684\u8fb9\u5c31\u5efa\u597d\u4e86\u3002\n\u6700\u540e\u8dd1\u4e00\u904d\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\uff0c\u6700\u5c0f\u8d39\u7528\u5c31\u662f\u7b54\u6848\u4e86\n\n# \u6700\u540e\u4e0a\u4ee3\u7801\n\n------------\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<queue>\n#include<cstdlib>\n#include<iostream>\n#include<cmath>\n#define MAXM 30000010\n#define MAXN 51000\n#define INF 0x3f3f3f3f\nusing namespace std;\nstruct int_Edge\n{\n\tint u,v;\n\tint w;\n\tdouble cost;\n\tint next;\n}Edge[MAXM];\nint dis[MAXN],head[MAXN],pre[MAXN],cnt_Edge=1,Maxf_S,Maxf_T;\ninline void Insert_Edge(int u,int v,int w,double cost)\n{\n\t++cnt_Edge;Edge[cnt_Edge].u=u;Edge[cnt_Edge].v=v;Edge[cnt_Edge].w=w;Edge[cnt_Edge].cost= cost;Edge[cnt_Edge].next=head[u];head[u]=cnt_Edge;\n\t++cnt_Edge;Edge[cnt_Edge].u=v;Edge[cnt_Edge].v=u;Edge[cnt_Edge].w=0;Edge[cnt_Edge].cost=-cost;Edge[cnt_Edge].next=head[v];head[v]=cnt_Edge;\n}\nbool vis[MAXN];\ndouble h[MAXN];\ninline bool MCMFSPFA()\n{\n\tstatic int v;\n\tfor(int i=1;i<MAXN;i++)\n\t\th[i]=1e9+7;\n\tmemset(pre,-1,sizeof(pre));\n\th[Maxf_S]=0;\n\tqueue<int>q;\n\tq.push(Maxf_S);\n\twhile(!q.empty())\n\t{\n\t\tint u=q.front();q.pop();\n\t\tvis[u]=false;\n\t\tfor(register int i=head[u];i;i=Edge[i].next)\n\t\t{\n\t\t\tv=Edge[i].v;\n\t\t\tif((h[v]>h[u]+Edge[i].cost)&&Edge[i].w>0)\n\t\t\t{\n\t\t\t\th[v]=h[u]+Edge[i].cost;\n\t\t\t\tpre[v]=i;\n\t\t\t\tif(!vis[v])\n\t\t\t\t{\n\t\t\t\t\tvis[v]=true;\n\t\t\t\t\tq.push(v);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn pre[Maxf_T]!=-1;\n}\nint MAX_FLOW=0;\ndouble MIN_COST=0.0000000;\ninline void MCMF()\n{\n\twhile(MCMFSPFA())\n\t{\n\t\tint delt=0x3f3f3f3f;\n\t\tdouble coss=0;\n\t\tfor(register int i=Maxf_T;i!=Maxf_S;i=Edge[pre[i]].u)\n\t\t\tdelt=min(delt,Edge[pre[i]].w);\n\t\tfor(register int i=Maxf_T;i!=Maxf_S;i=Edge[pre[i]].u)\n\t\t{\n\t\t\tEdge[pre[i]].w-=delt;\n\t\t\tEdge[pre[i]^1].w+=delt;\n\t\t\tcoss+=Edge[pre[i]].cost;\n\t\t}\n\t\t\n\t\tMAX_FLOW+=delt;\n\t\tMIN_COST+=(coss*delt);\n\t}\n}//\u4e0a\u9762\u7684\u4e3a\u8d39\u7528\u6d41\u7684\u6a21\u677f\ndouble x[MAXN],y[MAXN];\nint main()\n{\n\tint n;\n\tscanf(\"%d\",&n);\n\tint SS=n*2+2,TT=n*2+3,TTT=n*3+4;\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%lf%lf\",&x[i],&y[i]);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tInsert_Edge(SS,i,1,0.0000000);\n\t\tInsert_Edge(i+n,TT,1,0);\n\t\tInsert_Edge(i,i+n,1,abs(x[i]));\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tif(i==j)\n\t\t\t\tcontinue;\n\t\t\tInsert_Edge(i,j+n,1,sqrt((x[i]+x[j])*(x[i]+x[j])+(y[i]-y[j])*(y[i]-y[j]))/2);\n\t\t}\n\t}\n\tInsert_Edge(TT,TTT,n,0.0000000);\n\tMaxf_S=SS;\n\tMaxf_T=TTT;\n\tMCMF();\n\tprintf(\"%.7f\",MIN_COST);\n\treturn 0;\n}\n```\n",
        "postTime": 1522728557,
        "uid": 17771,
        "name": "heheheheehhejie",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 AT655 \u3010\u7389\u5ea7\u306e\u9593\u3011"
    },
    {
        "content": "\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/AT655)\n\n[\u901a\u8fc7\u8bb0\u5f55](https://www.luogu.com.cn/record/89697881)\n\n# \u524d\u8a00\n\n//\u524d\u7f6e\u77e5\u8bc6\u5b66\u4e60 [\u7f51\u7edc\u6d41](https://www.luogu.com.cn/problem/P3376)\u2192[\u8d39\u7528\u6d41](https://www.luogu.com.cn/problem/P3381)\u2192[\uff08\u53ef\u9009\uff09\u5982\u4f55\u5c1d\u8bd5\u5efa\u7acb\u7f51\u7edc\u56fe](https://www.luogu.com.cn/problem/P4048)\n\n# \u9898\u76ee\u63cf\u8ff0\n&emsp;&emsp;\u7531\u4e8e\u662f\u5916\u9762 OJ \u7684\u9898\uff0c\u7a0d\u5fae\u7b80\u660e\u5730\u7ffb\u8bd1\u4e00\u4e0b\u3002\n\n&emsp;&emsp;\u5728\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u4e2d\uff0c\u7ed9\u4f60 $n$ \u4e2a\u70b9\u4ee5\u53ca\u5176\u6a2a\u7eb5\u5750\u6807\uff08\u90fd\u662f\u6574\u6570\uff09\uff0c\u4f60\u7684\u4efb\u52a1\u662f\u628a\u8fd9\u4e9b\u70b9\u79fb\u52a8\u51e0\u4e0b\uff0c\u4f7f\u5f97\u8fd9\u4e9b\u70b9\u6cbf\u7740 $y$ \u8f74\u201c\u5bf9\u79f0\u201d\u3002\u4f46\u662f\u79fb\u52a8\u8ddd\u79bb\u8981\u6700\u5c11\u3002\n\n&emsp;&emsp;\u53e6\u5916\uff0c\u591a\u4e2a\u70b9\u53ef\u4ee5\u653e\u5728\u4e00\u4e2a\u4f4d\u7f6e\u3002\u4f46\u201c\u5bf9\u79f0\u201d\u7684\u8981\u6c42\u662f\u5de6\u53f3\u5bf9\u5e94\u4f4d\u7f6e\u7684\u70b9\u6570\u91cf\u4e5f\u8981\u4e00\u81f4\u3002\u7279\u6b8a\u8bf4\u660e\uff0c\u653e\u5728 $y$ \u8f74\u4e0a\u7684\u70b9\u4e5f\u7b97\u662f\u201c\u5bf9\u79f0\u201d\u7684\u3002\n\n# \u7b97\u6cd5\u601d\u8def\n&emsp;&emsp;\u5148\u8bf4\u7ed3\u8bba\uff1a\u8d39\u7528\u6d41\u3002\n\n```\nif\uff08\u4f60\u53ea\u60f3\u542c\u8d39\u7528\u6d41\u600e\u4e48\u5b9e\u73b0\uff09 \n\n\tgoto \u5177\u4f53\u64cd\u4f5c\n\nelse \n\n\tgoto \u601d\u8def\u5f15\u5165\n```\n\n## \u601d\u8def\u5f15\u5165\n\n&emsp;&emsp;\uff08\u5148\u8bf4\u597d\u5965\uff0c\u4f60\u8981\u662f\u90fd\u4e0d\u77e5\u9053\uff0c\u6216\u8005\u8bf4\u662f\u6ca1\u542c\u8bf4\u8fc7\u7f51\u7edc\u6d41\uff0c\u5f88\u96be\u8bb2\u4e86\u3002\u867d\u7136\u4f5c\u4e3a\u9ed1\u9898\u6c34\u4e86\u70b9\uff0c\u4f46\u591a\u5c11\u7d2b\u4ee5\u4e0a\uff0c\u80af\u5b9a\u8981\u70b9\u524d\u7f6e\u77e5\u8bc6\u3002\u8fd9\u91cc\u4e3b\u8981\u662f\u5f15\u5165\u5982\u4f55\u60f3\u5230\u8d39\u7528\u6d41\uff09\u3002\n\n&emsp;&emsp;\u9996\u5148\u6211\u4eec\u60f3\u8c61\u6700\u7b80\u5355\u7684\u60c5\u51b5\uff0c\u4e24\u4e2a\u70b9\u600e\u4e48\u5bf9\u79f0\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vmpx6xjg.png)\n\n&emsp;&emsp;\u8fd9\u4e2a\u95ee\u9898\u5176\u5b9e\u5f88\u597d\u60f3\u3002\u9996\u5148\u6211\u4eec\u4e0d\u53ef\u80fd\u50bb\u5230\u628a $A$ \u70b9\u79fb\u52a8\u5230\u53f3\u8fb9\uff0c\u518d\u628a $B$ \u79fb\u5230\u5de6\u8fb9\u3002\u6211\u4eec\u73b0\u5728\u6709\u4e24\u4e2a\u60f3\u6cd5\uff0c\u4e00\u4e2a\u662f\u6211\u4eec\u4f20\u7edf\u7406\u89e3\u7684\u5de6\u53f3\u5bf9\u79f0\uff0c\u4e00\u4e2a\u662f\u628a $A$ \u548c $B$ \u90fd\u79fb\u5230 $y$ \u8f74\u4e0a\u3002\u90fd\u79fb\u5230 $y$ \u7684\u4ee3\u4ef7\u662f $|X_A|+|X_B|$ \u3002\u8fd9\u91cc\u4e5f\u5f88\u660e\u663e\u3002\u5982\u679c\u6211\u4eec\u91c7\u53d6\u4e86\u8fd9\u79cd\u7b56\u7565\uff0c\u90a3\u4e48\u4e24\u4e2a\u70b9\u4e00\u8d77\u548c\u4e24\u4e2a\u70b9\u5206\u5f00\u60f3\uff0c\u4e24\u8005\u662f\u6ca1\u6709\u4ec0\u4e48\u533a\u522b\u7684\u3002\u8fd9\u79cd\u7b56\u7565\u4e0b\uff0c $A$ \u548c $B$ \u662f\u8fd9\u6837\uff0c$A$ \u548c $C$ \u4e5f\u8fd9\u6837\u3002\u6240\u4ee5\u6211\u4eec\u8bb0\u5f55\u65f6\uff0c\u76f4\u63a5\u8bb0\u5f55\u5728\u5355\u4e2a\u70b9\u4e0a\u5373\u53ef\uff0c\u4ee3\u4ef7\u5373\u4e3a $|X_A|$ \u3002\n\n&emsp;&emsp;\u90a3\u4e48\u5de6\u53f3\u5bf9\u79f0\u5462\u3002\u753b\u4e00\u4e2a\u56fe\uff0c\u6613\u77e5\uff0c\u5982\u4e0b\u662f\u6700\u4f18\u7684\uff08\u663e\u7136\uff0c\u5373\u4f7f $AB$ \u5728\u540c\u4fa7\u4e5f\u662f\u8fd9\u6837\u7684\u54e6\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qrjhjme5.png)\n\n&emsp;&emsp;\u6211\u4eec\u628a\u4e00\u4e2a\u70b9\u4f5c\u5bf9\u79f0\uff0c\u4e0e\u53e6\u4e00\u4e2a\u70b9\u53d6\u4e2d\u70b9\uff0c\u90a3\u8fd9\u4e2a\u70b9\u5c31\u662f\u54b1\u4eec\u8981\u79fb\u52a8\u7684\u4e2d\u70b9\uff08\u5f53\u7136\uff0c\u8fd9\u4e2a\u70b9\u5206\u5e03\u5728\u4e24\u4fa7\uff09\u3002\u8fd9\u4e2a\u4ee3\u4ef7\u4e5f\u662f\u597d\u8ba1\u7b97\u7684\uff0c\u76f4\u63a5\u4e24\u70b9\u95f4\u8ddd\u79bb\u516c\u5f0f\u5373\u53ef\u3002\u603b\u4ee3\u4ef7\u4e3a $ \\sqrt{(X_A-X_B)^2+(Y_A-Y_B)^2} $ \u3002\u8fd9\u4e2a\u5012\u662f\u4e0d\u50cf\u521a\u624d\u53ef\u4ee5\u8bb0\u5728\u5355\u4e2a\u70b9\u4e0a\uff0c\u53ea\u80fd\u5b58\u4e2a\u8868\uff08\u65af\u2026\u2026\u5b58\u8868\uff1f\u5b58\u8fb9\uff1f\uff09\u3002\n\n&emsp;&emsp;\u4ece\u4e09\u4e2a\u70b9\u5f00\u59cb\uff0c\u5176\u5b9e\u6211\u4eec\u4e5f\u53ea\u80fd\u628a\u4ed6\u4eec\u5206\u6210\u4e00\u4e2a\u4e2a\u7684\u201c\u4e24\u4e2a\u70b9\u201d\u201c\u4e00\u4e2a\u70b9\u201d\u7684\u60c5\u51b5\u53bb\u8003\u8651\u3002\u90a3\u5c31\u6d89\u53ca\u5230\u4e00\u4e2a\u5206\u7ec4\u7684\u95ee\u9898\u3002\n\n&emsp;&emsp;\u5982\u679c\u6211\u4eec\u786e\u5b9a\u4e86 $A-B$ \u8fd9\u6837\u7684\u5bf9\u5e94\u5173\u7cfb\u7684\u5206\u7ec4\uff0c\u90a3\u4e48\u5c31\u4e0d\u518d\u53ef\u80fd\u51fa\u73b0 $A-C$ \u3001 $B-C$ \u8fd9\u6837\u7684\u5bf9\u5e94\u5173\u7cfb\u3002\u90a3\u4e48\u6211\u4eec\u8981\u4e0d\u65ad\u5c1d\u8bd5\u7684\uff0c\u5c31\u662f\u90a3\u4e9b\u80fd\u4f7f\u5f97\u6240\u6709\u70b9\u90fd\u53ef\u4ee5\u5206\u5230\u7684\u7ec4\u3002\u5bf9\u4e8e\u90a3\u79cd\u76f4\u63a5\u79fb\u5230 $y$ \u7684\u5229\u5df1\u4e3b\u4e49\u6216\u8005\u8bf4\u662f\u4e2a\u4eba\u82f1\u96c4\u4e3b\u4e49\u8005\uff0c\u6211\u4eec\u5c31\u8ba9\u4ed6\u53d8\u6210\u81ea\u5df1\u548c\u81ea\u5df1\u5206\u7ec4\u5c31\u597d\uff0c\u65b9\u4fbf\u54b1\u4eec\u5f52\u7eb3\u3002\n\n&emsp;&emsp;\u6211\u600e\u4e48\u603b\u542c\u7740\u6ca1\u5bf9\u554a\u3002\u53c8\u662f\u201c\u5efa\u56fe\u201d\u201c\u5efa\u8fb9\u201d\uff0c\u53c8\u662f\u201c\u5206\u914d\u201d\u7684\u3002\u6211\u4eec\u6700\u8fd1\u505a\u8fc7\u7684\u7f51\u7edc\u6d41\u91cc\uff0c\u4f3c\u4e4e\u5c31\u6709\u8fd9\u4e9b\u7279\u6027\u3002\uff08\u8fd9\u91cc\u63a8\u8350\u4e00\u624b [\u6211\u4e4b\u524d\u7684blog](https://www.luogu.com.cn/blog/Elysian-Realm/p4048-jsoi2010-leng-dong-bo)\uff0c\u5206\u6790\u4e86\u5982\u4f55\u53bb\u4ece\u9898\u76ee\u5206\u6790\u60f3\u5230\u91c7\u7528\u7f51\u7edc\u6d41\u505a\u6cd5\uff09\u3002\u54e6\u54e6\u54e6\uff0c\u8fd9\u7c7b\u9898\u5e94\u8be5\u53bb\u5c1d\u8bd5\u7f51\u7edc\u6d41\u7684\u76f8\u5173\u505a\u6cd5\u3002\n\n## \u5177\u4f53\u64cd\u4f5c\n\n&emsp;&emsp;\u6211\u4eec\u5f88\u5f3a\uff0c\u60f3\u5230\u4e86\u8fd9\u9898\u5e94\u8be5\u5c1d\u8bd5\u7528\u7f51\u7edc\u6d41\u7684\u76f8\u5173\u505a\u6cd5\u3002\u9996\u5148\u5148\u60f3\u6e05\u695a\u7f51\u7edc\u6d41\u5fc5\u5907\u7684\u51e0\u4e2a\u8981\u7d20\uff1a\u6e90\u70b9\u3001\u6c47\u70b9\u7684\u8bbe\u7acb\u610f\u4e49\uff0c\u5efa\u8fb9\u7684\u51c6\u5219\uff0c\u8dd1\u7f51\u7edc\u6d41\u7684\u7b97\u6cd5\u3002\n\n&emsp;&emsp;\u6211\u4eec\u91c7\u53d6\u7f51\u7edc\u6d41\u5c31\u662f\u56e0\u4e3a\u53ef\u4ee5\u68c0\u6d4b\u4e00\u7c7b\u201c\u5206\u7ec4\u201d\u95ee\u9898\u662f\u5426\u201c\u5206\u7ec4\u201d\u5b8c\u5168\u3002\u6e90\u70b9\u5728\u8fd9\u91cc\u8fd8\u771f\u4e0d\u91cd\u8981\uff0c\u5c31\u662f\u8ba9\u5927\u5bb6\u201c\u6709\u6c34\u53ef\u6d41\u201d\u5c31\u884c\u3002\u6c47\u70b9\u4f7f\u6211\u4eec\u7528\u6765\u68c0\u6d4b\u662f\u5426\u5206\u5b8c\u7ec4\u7684\uff0c\u4e0d\u80fd\u5927\u610f\u3002\u90a3\u6211\u4eec\u6bcf\u6b21\u5206\u7ec4\u6210\u529f\u540e\uff0c\u5c31\u628a\u5206\u597d\u4e86\u7684\u70b9\u7684\u6c34\u6d41\u5411\u6c47\u70b9\uff0c\u8bbe\u7f6e\u6d41\u91cf\u4e3a $1$ \u3002\u8fd9\u6837\u6c47\u70b9\u6700\u540e\u6d41\u91cf\u603b\u548c\u5c31\u662f\u6211\u4eec\u5206\u4e86\u591a\u5c11\u4e2a\u70b9\u3002\u662f $n$ \u5c31\u8bf4\u660e\u5168\u90e8\u5f73\u4e8d\u4e86\u3002\u5f53\u7136\uff0c\u8fd9\u4e5f\u5c31\u662f\u8be5\u7f51\u7edc\u56fe\u7684\u6700\u5927\u6d41\u4e86\u3002\u6240\u4ee5\u54b1\u4eec\u8981\u6c42\u7684\u5c31\u662f\u201c\u8d39\u7528\u6700\u5c0f\u6700\u5927\u6d41\u201d\uff0c\u5373\u201c\u8d39\u7528\u6d41\u201d\u3002\uff08\u5728\u6d41\u91cf\u6700\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u5f97\u603b\u8d39\u7528\u6700\u5c0f\uff09\n\n&emsp;&emsp;\u4e4b\u540e\u662f\u5efa\u8fb9\u3002\u6211\u4eec\u77e5\u9053 $A-B$ $B-A$ \u8fd9\u4e24\u4e2a\u5206\u7ec4\u610f\u4e49\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u7f51\u7edc\u56fe\u662f\u4e0d\u5141\u8bb8\u6709\u73af\u51fa\u73b0\u7684\u3002\u90a3\u4e48\u6211\u4eec\u8003\u8651\u7528\u624b\u634f\u4e00\u4e9b\u70b9\u51fa\u6765\uff0c\u5efa\u7acb\u4e3a $B-A'$ \u548c $A-B'$ \u8fd9\u4e24\u6761\u8fb9\u3002\u6211\u4eec\u80af\u5b9a\u8ba9\u8fd9\u79cd\u8fb9\u7684\u6d41\u91cf\u4e3a $1$ \uff0c\u56e0\u4e3a\u4e00\u4e2a\u6570\u5206\u4e86\u7ec4\u4e4b\u540e\uff0c\u600e\u4e48\u80fd\u8fd8\u8ba9\u4f60\u548c\u522b\u7684\u6570\u5206\u7ec4\u5462\u3002\u540c\u65f6\uff0c\u6211\u4eec\u601d\u8003\u8d39\u7528\u3002\u521a\u624d\u8bf4\u5230\u8fd9\u79cd\u5206\u7ec4\u7684\u603b\u4ee3\u4ef7\u662f $ \\sqrt{(X_A-X_B)^2+(Y_A-Y_B)^2} $ \uff0c\u4f46\u73b0\u5728\u5206\u6210\u4e86\u4e24\u6761\u8fb9\uff0c\u6240\u4ee5\u6bcf\u6761\u8fb9\u7684\u503c\u8981\u9664\u4ee5 $2$ \u3002\u81f3\u4e8e\u81ea\u5df1\u548c\u81ea\u5df1\u5206\u7ec4\u8fd9\u79cd\uff0c\u6211\u4eec\u4ecd\u7136\u8bb0\u5f55\u4e3a $A-A'$ \u3002\u4f46\u662f\u8fd9\u79cd\u8fb9\u53c8\u53ea\u6709\u4e00\u6761\uff0c\u6240\u4ee5\u4e0d\u505a\u53d8\u5316\uff0c\u8d39\u7528\u5c31\u662f $|X_A|$ \u3002\n\n&emsp;&emsp;\u8fd9\u91cc\u6211\u4eec\u9ed8\u8ba4\u4e86\u4e00\u4ef6\u4e8b\u3002\u90a3\u5c31\u662f\u53ea\u51c6\u771f\u7684\u70b9\u8fde\u5411\u6211\u4eec\u624b\u6413\u7684\u70b9\uff0c\u90a3\u6211\u4eec\u6d41\u5411\u6c47\u70b9\u7684\u65f6\u5019\uff0c\u5176\u5b9e\u5c31\u53ea\u5efa\u7acb\u8fd9\u4e9b\u624b\u6413\u7684\u70b9\u6d41\u5411\u6c47\u70b9\u3002\n\n&emsp;&emsp;\u90a3\u6211\u4eec\u5c31\u5904\u7406\u5b8c\u4e86\uff0c\u4ece\u5934\u7406\u4e00\u904d\u6d41\u7a0b\uff0c\u987a\u4fbf\u601d\u8003\u8d39\u7528\u6d41\u7684\u53ef\u884c\u6027\u4e0e\u7ec6\u8282\u3002\n\n## \u6d41\u7a0b\n\n&emsp;&emsp;\u9996\u5148\uff0c\u4f9d\u6b21\u8bfb\u5165\u5750\u6807\u3002\u8bfb\u7684\u65f6\u5019\u53ef\u4ee5\u540c\u65f6\u5efa\u7acb\u4ee5\u4e0b\u7684\u8fb9\uff1a\uff08\u5f55\u5165\u51fd\u6570 `lr()` \u5185\u4f9d\u6b21\u662f\u5efa\u8fb9\u7684\u8d77\u70b9\uff0c\u7ec8\u70b9\uff0c\u6d41\u91cf\uff0c\u8d39\u7528\uff0c\u5e76\u540c\u65f6\u5efa\u7acb\u53cd\u5411\u8fb9\uff0c\u5177\u4f53\u5199\u6cd5\u89c1\u4ee3\u7801\uff09\n\n>1.\u4ece\u6e90\u70b9\u5230\u8fd9\u4e2a\u70b9\u7684\u3002`lr(0,i,1,0.0)`\n>\n>2.\u81ea\u5df1\u4e0e\u81ea\u5df1\u5206\u7ec4\u7684\u3002`lr(i,i+n,1,abs(x[i]))`\n>\n>3.\u624b\u6413\u70b9\u5230\u6c47\u70b9\u7684\u3002`lr(i+n,t,1,0.0)`\n\n&emsp;&emsp;\u7136\u540e\uff0c\u4f9d\u636e\u6bcf\u4e24\u4e2a\u70b9\u7684\u8ddd\u79bb\u3001\u5750\u6807\uff0c\u5efa\u7acb\u4e24\u4e24\u5206\u7ec4\u7684\u8fb9\uff1a\n> `lr(i,j+n,1,calc(i,j))` \uff08`calc` \u7528\u6765\u8ba1\u7b97\u8ddd\u79bb\uff09\n\n&emsp;&emsp;\u7136\u540e\uff0c\u62ff\u7740\u8fd9\u4e2a\u56fe\u7ed9\u4ed6\u8dd1\u4e2a\u8d39\u7528\u6d41\u3002\u6700\u540e\u7684\u8d39\u7528\u5c31\u662f\u6211\u4eec\u7684\u7b54\u6848\u4e86\u3002\n\n&emsp;&emsp;\u6ca1\u4ec0\u4e48\u95ee\u9898\uff1f\u662f\u7684\uff0c\u90a3\u5c31\u662f\u8fd9\u6837\u505a\u7684\u4e86\u3002\n\n# \u7279\u6b8a\u5904\u7406\n\n&emsp;&emsp;\u76f8\u5bf9\u4e8e\u4e00\u9053\u5efa\u56fe\u7684\u9898\uff0c\u53ea\u662f\u5957\u4e86\u4e00\u4e2a\u8d39\u7528\u6d41\u7684\u7248\u5b50\u3002\u53ea\u9700\u8981\u6ce8\u610f\u5c31\u662f\u8d39\u7528\u662f\u7528 `double` \u5b58\uff0c\u7a0d\u5fae\u6539\u6539\uff0c\u5176\u5b9e\u548c [\u51b7\u51bb\u6ce2](https://www.luogu.com.cn/problem/P4048) \u8fd9\u9053\u9898\u771f\u7684\u5f88\u50cf\uff0c\u90fd\u662f\u8ba1\u7b97\u51e0\u4f55\u5efa\u8fb9\u540e\u8dd1\u7f51\u7edc\u56fe\uff0c\u53ea\u4e0d\u8fc7\u4e00\u4e2a\u662f\u7f51\u7edc\u6700\u5927\u6d41\uff0c\u4e00\u4e2a\u662f\u8d39\u7528\u6700\u5c0f\u6700\u5927\u6d41\u3002\u4f46\u662f\u90a3\u9053\u9898\u5b9e\u9645\u96be\u70b9\u5728\u4e8e\u8ba1\u7b97\u51e0\u4f55\u548c\u4e8c\u5206\u8dd1\u7f51\u7edc\u6d41\u7684\u60f3\u6cd5\uff0c\u8fd9\u9053\u9898\u96be\u70b9\u5728\u4e8e\u60f3\u5230\u8d39\u7528\u6d41\u53bb\u5904\u7406\u5e76\u60f3\u5230\u5982\u4f55\u5b58\u8fb9\u3002\u6216\u8bb8\u771f\u7684\u662f\u4e2a\u6c34\u9ed1\u9898\uff0c\u4f46\u662f\u7edd\u5bf9\u7d2b\u9898\u4ee5\u4e0a\u662f\u6709\u7684\u3002\n\n&emsp;&emsp;\u53e6\u5916\uff0c\u8d39\u7528\u6d41\u51e0\u4e4e\u5c31\u628a\u6700\u5f14\u7684 Dinic \u7ed9\u7981\u4e86\uff0c\u8001\u8001\u5b9e\u5b9e\u8dd1 SPFA \u5427\u3002\n\n# \u4ee3\u7801\u5b9e\u73b0\n```cpp\n//#pragma GCC optimize(2)\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n#define ri register int//\u5c0f\u4e60\u60ef\n\nint n,m,s,t;\nint maxflow;\ndouble mincost;\n\nstruct side{//\u5b58\u8fb9\u6240\u7528\u7ed3\u6784\u4f53\n\tint v,w;//\u7ec8\u70b9\uff0c\u6d41\u91cf\n\tdouble cos;//\u8d39\u7528\n\tint dmbh;//\u53cd\u5411\u8fb9\u7684\u7f16\u53f7\n};\nvector<side>edge[500];//vector\u5355\u63a8\u4eba\u634f\n//\u50cf\u8fd9\u6837\u5b58\u56fe\uff0c\u771f\u662f\u597d\u5feb\u6d3b\u5440\n\nint zbx[500],zby[500];//\u5750\u6807x\u4e0e\u5750\u6807y\n\ninline int rd()//\u8bfb\u5165\u4f18\u5316\uff0c\u5c0f\u5c0f\u5730\u5361\u4e2a\u5e38\n{\n\tint a=0,f=1;\n\tchar c=getchar();\n\tfor(;c<'0'||c>'9';c=getchar()) if(c=='-') f=-1;\n\tfor(;c>='0'&&c<='9';c=getchar()) a=(a<<1)+(a<<3)+c-'0';\n\treturn a*f;\n}\n\ninline double ABS(double x){if(x<0) return -x;else return x;}\n//\u636e\u8bf4\u81ea\u5e26\u7684min,max,abs\u90fd\u5de8\u6162\uff0c\u54b1\u4eec\u624b\u5199\u5427\n\ninline double calc(int i,int j)//\u8ba1\u7b97\u8ddd\u79bb\uff0c\u5355\u72ec\u5199\u56e0\u4e3a\u5199\u5728\u91cc\u9762\u592a\u6324\u4e86\n{\n\tdouble x_2=(zbx[i]+zbx[j])*(zbx[i]+zbx[j]);\n\tdouble y_2=(zby[i]-zby[j])*(zby[i]-zby[j]);\n\treturn sqrt((double)x_2+y_2)/2;\n}\n\ninline void lr(int u,int v,int w,double cos)//\u5f55\u5165\u5b58\u8fb9\n{\n\tside x;\n\t\n\tx.cos=cos, x.dmbh=edge[v].size(),x.v=v,x.w=w;\n    //\u8bf4\u660e\u4e00\u4e0b\uff0cvector\u5b58\u53cd\u5411\u8fb9\u7f16\u53f7\u65f6\u8981\u6ce8\u610f\n    //\u8fd9\u91cc\u76f4\u63a5size()\uff0c\u4e0b\u9762\u5b58\u56de\u6765\u65f6\u56e0\u4e3a\u5b58\u4e86\u672c\u6761\u8fb9\uff0c\u6240\u4ee5\u8981size()-1\n    \n\tedge[u].push_back(x);\n\t\n\tx.dmbh=edge[u].size()-1;\n\tx.v=u, x.cos=-cos, x.w=0.0;//\u53cd\u5411\u8fb9\u6d41\u91cf\u4e3a0\n\t\n\tedge[v].push_back(x);\n\t\n\treturn ;\n}\n\nint flow[500];//SPFA\u6240\u7528\u5230\u7684\u6b64\u65f6\u7684\u6d41\u91cf\ndouble cost[500];//\u6b64\u65f6\u7684\u8d39\u7528\nbool bj[500];//\u677e\u5f1b\u6807\u8bb0\nqueue<int>que;//\u7528\u4e8e\u4f18\u5316\u7684\u961f\u5217\nint last[500];//\u6bcf\u4e2a\u70b9\u524d\u9a71\u8fde\u5411\u4ed6\u65f6\uff0c\u8fb9\u7684\u7f16\u53f7\nint qq[500];//\u6bcf\u4e2a\u70b9\u7684\u524d\u9a71\n\ninline int minof(int a,int b){if(a>b)return b;else return a;}\n//\u624b\u5199min\n\ninline bool spfa()\n{\n\tmemset(flow,127,sizeof(flow));\n\tmemset(cost,127,sizeof(cost));\n\tmemset(bj,0,sizeof(bj));//\u91cd\u8981\u7684\u521d\u59cb\u5316\n\t\n\tque.push(s),bj[s]=1,cost[s]=0.0,qq[t]=-1;//\u538b\u5165\u6e90\u70b9\n\t\n\twhile(!que.empty())\n\t{\n\t\tint u=que.front();\n\t\tbj[u]=0;\n\t\tque.pop();\n\t\tint S=edge[u].size();\n\t\tfor(ri i=0;i<S;i++)//\u904d\u5386\u677e\u5f1b\u6bcf\u6761\u8fb9\n\t\t{\n\t\t\tint v=edge[u][i].v;\n\t\t\tif(edge[u][i].w>0 && cost[v]>cost[u]+edge[u][i].cos) \n\t\t\t{//\u5728\u7f51\u7edc\u6d41\u4e2d\uff0c\u6211\u4eec\u53ea\u677e\u5f1b\u6b63\u8fb9\n\t\t\t\tcost[v]=cost[u]+edge[u][i].cos;\n\t\t\t\tqq[v]=u;\n\t\t\t\tlast[v]=i;\n\t\t\t\tflow[v]=minof(flow[u],edge[u][i].w);\n\t\t\t\tif(!bj[v])\n\t\t\t\t{\n\t\t\t\t\tbj[v]=1;\n\t\t\t\t\tque.push(v);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn qq[t]!=-1;\n\t\n}\n\nsigned main()\n{\n\tint n=rd();\n\ts=0,t=n*2+2;//\u7ed9\u6e90\u70b9\u548c\u6c47\u70b9\u4ee5\u7f16\u53f7\n\t\n\tfor(ri i=1;i<=n;i++)\n\t{\n\t\tint x=rd(),y=rd();\n\t\tzbx[i]=x,zby[i]=y;\n\t\t\n\t\tlr(0,i,1,0.0);\n\t\tlr(i,n+i,1,ABS((double)x));\n\t\tlr(n+i,t,1,0.0);//\u8bfb\u5165\u987a\u4fbf\u5b58\u8fb9\uff0c\u8be6\u89c1\u4e0a\u6587\n\t}\n\t\n\tfor(ri i=1;i<=n;i++)//\u6328\u4e2a\u6bcf\u5c40\u6bcf\u4e24\u4e2a\u70b9\uff0c\u5efa\u7acb\u8fb9\n\t\tfor(ri j=i+1;j<=n;j++)\n\t\t{\n\t\t\tlr(i,j+n,1,calc(i,j));\n\t\t\tlr(j,i+n,1,calc(i,j));\n\t\t}\n\t\t\n\t\n\twhile(spfa())//\u8dd1\u8d39\u7528\u6d41\u6a21\u677f\n\t{\n\t\tint x=t;\n\t\tmaxflow+=flow[t];\n\t\tmincost+=flow[t]*cost[t];\n\t\twhile(x!=s)\n\t\t{\n\t\t\tint u=qq[x],i=last[x];\n\t\t\tedge[u][i].w-=flow[t];\n\t\t\tedge[x][edge[u][i].dmbh].w+=flow[t];\n\t\t\tx=qq[x];\n\t\t}\n\t}\n\t\n\tprintf(\"%.7f\\n\",mincost);//\u641e\u5b9a\uff01\n\t\n\treturn 0;\n\t\n} \n```\n\n\n\n\n\n\n\n\n\n",
        "postTime": 1665656566,
        "uid": 85962,
        "name": "pure__Elysia",
        "ccfLevel": 0,
        "title": "AT655 \u7389\u5ea7\u306e\u9593"
    },
    {
        "content": "\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\uff0c\u9996\u5148\u8003\u8651\u5efa\u6a21\u3002\n\n\u8003\u8651\u62c6\u70b9\uff0c\u5c06\u6bcf\u4e2a\u5bb6\u5177 $i$ \u62c6\u6210 $i$ \u548c $i'$\u3002\u5efa\u4ee5\u4e0b\u51e0\u79cd\u8fb9\uff1a\n\n- \u4ece \u6e90\u70b9 $S$ \u5411 $i$ \u8fde\u5bb9\u91cf\u4e3a $1$\uff0c \u8d39\u7528\u4e3a $0$ \u7684\u8fb9\uff0c\u8868\u793a\u521d\u59cb\u7684 $n$ \u4e2a\u5bb6\u5177\u3002\n\n- \u4ece $i'$ \u5411\u6c47\u70b9 $T$ \u8fde\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $0$ \u7684\u8fb9\uff0c\u8868\u793a $n$ \u4e2a\u5bb6\u5177\u90fd\u5df2\u7ecf\u5bf9\u79f0\u4e86\u3002\n\n- \u4ece $i$ \u5411 $i'$ \u8fde\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $|x_i|$ \u7684\u8fb9\uff0c\u8868\u793a\u5c06\u5bb6\u5177 $i$ \u79fb\u5230 $y$ \u8f74\u4e0a\u4f7f\u5176\u4e0e\u81ea\u5df1\u5bf9\u79f0\u3002\n\n- \u5bf9\u4e8e\u4efb\u610f\u4e24\u4e2a\u5bb6\u5177 $i,j(i\\ne j)$\uff0c\u4ece $i$ \u5411 $j'$ \u8fde\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $\\dfrac{\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}}{2}$ \u7684\u8fb9\uff0c\u8868\u793a\u5c06\u5bb6\u5177 $i$ \u79fb\u5230\u4e0e\u5bb6\u5177 $j$ \u5173\u4e8e $y$ \u8f74\u5bf9\u79f0\u7684\u70b9\u3002\n\n\u8fd9\u6837\u7684\u5efa\u6a21\u80fd\u4fdd\u8bc1\u6700\u5927\u6d41\u4e3a $n$\uff0c\u5373\u6bcf\u4e2a\u5bb6\u5177\u90fd\u80fd\u5bf9\u79f0\uff0c\u540c\u65f6\u7528\u8d39\u7528\u6d41\u6c42\u51fa\u6700\u5c0f\u8d39\u7528\uff0c\u5373\u4e3a\u7b54\u6848\u3002\n\n\u5173\u4e8e\u7b2c\u56db\u79cd\u8fb9\u7684\u8d39\u7528\uff0c\u4f5c\u8005\u505a\u4e00\u4e9b\u89e3\u91ca\uff1a\n\n#### \u4e3a\u4ec0\u4e48\u8981\u9664\u4ee5 $2$\uff1f\n\n\u9996\u5148\u660e\u786e\u4e00\u70b9\uff0c\u79fb\u52a8 $i$ \u4f7f $i,j$ \u4e24\u70b9\u5bf9\u79f0\u7684\u6700\u5c11\u8d39\u7528\uff08\u6bcf\u6211\u4eec\u8981\u7684\u80af\u5b9a\u662f\u6700\u5c11\u8d39\u7528\uff0c\u56e0\u4e3a\u53ea\u6709\u6bcf\u6b21\u79fb\u52a8\u7684\u8d39\u7528\u90fd\u5c0f\u5230\u4e0d\u80fd\u518d\u5c0f\u4e86\uff0c\u6700\u7ec8\u7684\u603b\u8d39\u7528\u624d\u4f1a\u6700\u5c0f\uff09\u4e3a $\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}$\uff0c\u5373\u5bb6\u5177 $i$ \u548c\u4e0e\u5bb6\u5177 $j$ \u5173\u4e8e $y$ \u8f74\u5bf9\u79f0\u7684\u70b9\u4e4b\u95f4\u7684\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\uff08\u5c31\u662f\u6700\u77ed\u8ddd\u79bb\uff09\u3002\n\n\u56e0\u4e3a\u4e0e $j$ \u5173\u4e8e $y$ \u8f74\u5bf9\u79f0\u7684\u70b9\u5750\u6807\u4e3a $P(-x_j,y_j)$\uff0c\u4e24\u70b9\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\u4e3a $\\sqrt{[x_i-(-x_j)]^2+(y_i-y_j)^2}=\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}$\u3002\n\n\u8bf4\u660e\u5b8c\u4e0a\u9762\u7684\u4e8b\u5b9e\u540e\uff0c\u6211\u4eec\u9700\u8981\u5c06\u5176\u4e0e\u5177\u4f53\u7684\u7b97\u6cd5\u6d41\u7a0b\u7ed3\u5408\u8d77\u6765\u7406\u89e3\u4e3a\u4ec0\u4e48\u8981\u9664\u4ee5 $2$ \u7684\u95ee\u9898\u3002\n\n\u56e0\u4e3a\u5728\u4f7f\u7528 `EK+SPFA` \u505a\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\u7684\u65f6\u5019\uff0c`SPFA` \u6bcf\u6b21\u627e\u7684\u662f\u6700\u77ed\u7684\u589e\u5e7f\u8def\u3002\n\n\u7136\u800c\u5bf9\u4e8e\u6211\u4eec\u521a\u624d\u7684\u5efa\u8fb9\u65b9\u5f0f\uff0c\u53ef\u4ee5\u770b\u51fa $i\\rightarrow j'$ \u7684\u8d39\u7528\u7b49\u4e8e $j\\rightarrow i'$ \u7684\u8d39\u7528\uff0c\u56e0\u6b64\u82e5\u5c06\u4e00\u6b21 `SPFA` \u6c42\u51fa\u7684\u6700\u77ed\u589e\u5e7f\u8def\u4e2d\u7684\u6240\u6709\u8fb9 $i\\rightarrow j'$ \u6362\u6210 $j\\rightarrow i'$\uff08\u6e90\u70b9 $S$\uff0c\u6c47\u70b9 $T$ \u9664\u5916\uff09\uff0c\u8fd9\u6761\u8def\u4ecd\u7136\u662f\u6700\u77ed\u7684\u3002\n\n\u56e0\u6b64\u5bf9\u4e8e\u4efb\u610f\u4e24\u70b9 $i,j$\uff0c\u53ea\u8981\u589e\u5e7f\u4e86 $i\\rightarrow j'$\uff0c\u6211\u4eec\u5c31\u4f1a\u53bb\u589e\u5e7f $j\\rightarrow i'$\u3002\n\n\u7136\u800c\u589e\u5e7f\u4e00\u6761\u8fb9\u7684\u610f\u4e49\u662f\u4f7f $i,j$ \u5173\u4e8e $y$ \u8f74\u5bf9\u79f0\u3002\u4e5f\u5c31\u662f\u8bf4\u5728\u589e\u5e7f\u7b2c\u4e00\u6761\u8fb9\u65f6\uff0c$i,j$ \u5df2\u7ecf\u5bf9\u79f0\u4e86\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u8ba1\u7b97\u589e\u5e7f\u7b2c\u4e8c\u6761\u8fb9\u7684\u8d39\u7528\u3002\n\n\u4f46\u662f\u8fd9\u6837\u5728\u7b97\u6cd5\u5b9e\u73b0\u4e2d\u662f\u4e0d\u5207\u5b9e\u9645\u7684\u3002\n\n\u56e0\u6b64\u6211\u4eec\u5c06\u8d39\u7528\u9664\u4ee5 $2$\uff0c\u8fd9\u6837\u4e24\u6761\u8fb9\u90fd\u88ab\u589e\u5e7f\u540e\uff0c\u7531\u4e8e\u4e24\u6761\u8fb9\u8d39\u7528\u76f8\u540c\uff0c\u9664\u4ee5 $2$ \u88ab\u62b5\u6d88\u6389\uff0c\u56e0\u6b64\u5c31\u7b97\u589e\u5e7f\u4e86\u8fd9\u4e24\u6761\u8fb9\uff0c\u4f7f $i,j$ \u4e24\u70b9\u5bf9\u79f0\u5b9e\u9645\u4ed8\u51fa\u7684\u8d39\u7528\u4ecd\u7136\u662f $\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}$\uff0c\u7b26\u5408\u4e8b\u5b9e\u3002\n\n\u53e6\u5916\u4e00\u79cd\u7406\u89e3\u5c31\u662f\uff0c\u5c06 $i,j$ \u5411\u53e6\u4e00\u70b9\u5173\u4e8e $y$ \u8f74\u7684\u5bf9\u79f0\u70b9\u8fde\u6210\u7ebf\u6bb5\uff0c\u5c06 $i,j$ \u79fb\u5230\u7ebf\u6bb5\u7684\u4e2d\u70b9\u3002\u8fd9\u79cd\u89e3\u91ca\u770b\u4e0a\u53bb\u8c8c\u4f3c\u66f4\u7b80\u77ed\uff0c\u4f46\u5b9e\u9645\u4e0a\u8fd9\u79cd\u79fb\u52a8\u65b9\u5f0f\u8ba9\u4eba\u4e00\u5934\u96fe\u6c34\uff0c\u4e14\u8bc1\u660e\u8d77\u6765\u66f4\u4e3a\u9ebb\u70e6\u3002\n\n\u89e3\u51b3\u5b8c\u5efa\u6a21\u95ee\u9898\u540e\uff0c\u4e0a\u677f\u5b50\u5c31\u884c\u4e86\u3002\u6ce8\u610f\u5c0f\u6570\u70b9\u4ee5\u53ca\u7cbe\u5ea6\u95ee\u9898\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n//\u5728\u4ee3\u7801\u4e2d\uff0c\u6e90\u70b9 S \u7528 0 \u8868\u793a\uff0ci \u5c31\u7528 i \u8868\u793a\uff0ci' \u7528 i + n \u8868\u793a\uff0c\u6c47\u70b9 T \u7528 2 * n + 1 \u8868\u793a\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int N = 1e5;\nint n, hd[N], q[N], h, t, T, cnt = 1, la[N];\nbool vis[N];\ndouble d[N], ans;\nstruct point {\n    int x, y;\n}a[N];\nstruct edge {\n    int v, w;\n    double c;\n    int nxt;\n}g[N];\ninline double dis(int x, int y, int _x, int _y) {\n    return sqrt(1.0 * (x - _x) * (x - _x) + 1.0 * (y - _y) * (y - _y));\n}\ninline void add(int u, int v, int w, double c) {\n    g[++cnt] = edge{v, w, c, hd[u]};\n    hd[u] = cnt;\n}\ninline bool spfa() {\n    for (int i = 0; i <= T; ++i) {\n        d[i] = 1e18;\n        vis[i] = 0;\n    }\n    d[q[h = t = 1] = 0] = 0;\n    while (h <= t) {\n        int x = q[h++];\n        vis[x] = 0;\n        for (int i = hd[x]; i; i = g[i].nxt) {\n            if (g[i].w && d[x] + g[i].c < d[g[i].v]) {\n                la[g[i].v] = i;\n                d[g[i].v] = d[x] + g[i].c;\n                if (!vis[g[i].v]) {\n                    vis[q[++t] = g[i].v] = 1;\n                }\n            }\n        }\n    }\n    return d[T] < 1e18;\n}\nsigned main() {\n    scanf(\"%lld\", &n);\n    T = (n << 1) + 1;\n    for (int i = 1; i <= n; ++i) {\n        scanf(\"%lld%lld\", &a[i].x, &a[i].y);\n        add(0, i, 1, 0);\n        add(i, 0, 0, 0);\n        add(i + n, T, 1, 0);\n        add(T, i + n, 0, 0);\n        add(i, i + n, 1, 1.0 * abs(a[i].x));\n        add(i + n, i, 0, -1.0 * abs(a[i].x));\n    }\n    for (int i = 1; i <= n; ++i) {\n        for (int j = 1; j <= n; ++j) {\n            if (i != j) {\n                add(i, j + n, 1, dis(a[i].x, a[i].y, -a[j].x, a[j].y) / 2);\n                add(j + n, i, 0, -dis(a[i].x, a[i].y, -a[j].x, a[j].y) / 2);\n            }\n        }\n    }\n    while (spfa()) {\n        ans += d[T];\n        //\u589e\u5e7f\u8def\u6d41\u91cf\u53ea\u80fd\u4e3a 1\uff0c\u4e0d\u9700\u8981\u518d\u4e58\u4ee5\u6d41\u91cf\u4e86\uff0c\n        //\u9996\u5148\uff0c\u6bcf\u6761\u589e\u5e7f\u8def\u4e0a\u4e0d\u53ef\u80fd\u51fa\u73b0\u6d41\u91cf\u4e3a 0 \u7684\u74f6\u9888\u8fb9\uff08\u5373\u51b3\u5b9a\u8fd9\u6761\u589e\u5e7f\u8def\u6d41\u91cf\u7684\u8fb9\uff09\uff0c\n        //\u56e0\u4e3a\u53ea\u6709\u4e00\u6761\u8fb9\u5728\u6b8b\u91cf\u7f51\u7edc\u4e2d\u8fd8\u6709\u6d41\u91cf\u624d\u4f1a\u53bb\u589e\u5e7f\u8fd9\u6761\u8fb9\uff0c\n        //\u5176\u6b21\uff0c\u74f6\u9888\u8fb9\u4e5f\u4e0d\u53ef\u80fd\u6bd4 1 \u5927\uff0c\u56e0\u4e3a\u5168\u56fe\u7684\u975e 0 \u8fb9\u6d41\u91cf\u90fd\u4e3a 1\n        for (int i = T; i; i = g[la[i] ^ 1].v) {\n            --g[la[i]].w;//\u589e\u5e7f\u8def\u6d41\u91cf\u53ea\u80fd\u4e3a 1\uff0c\u76f4\u63a5\u51cf\u6389\u3001\u53cd\u5411\u8fb9\u52a0\u4e0a\u5c31\u884c\u4e86\n            ++g[la[i] ^ 1].w;\n        }\n    }\n    printf(\"%.7lf\\n\", ans);\n    return 0;\n}\n```",
        "postTime": 1660637515,
        "uid": 539211,
        "name": "\u849f\u84bb\u00b7\u5ed6\u5b50\u9633",
        "ccfLevel": 5,
        "title": "AT655"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u8981\u5b66\u4e60\u4e00\u4e0b\u8d39\u7528\u6d41\u3002\n\n\u8d39\u7528\u6d41\u662f\u4ec0\u4e48\u5462\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fb9\u5e26\u6743\u503c\u7684\u7f51\u7edc\u6d41\u3002\n\n\u90a3\u4e48\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\uff0c\u662f\u6307\u5728\u6ee1\u8db3\u6700\u5927\u6d41\u7684\u60c5\u51b5\u4e0b\u7684\u6700\u5c0f\u8d39\u7528\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u8981\u5b9e\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u3002\n\n\u9996\u5148\u5bf9\u4e8e\u4e00\u6761\u6709\u5411\u8fb9\uff0c\u5efa\u7acb\u7684\u53cd\u5411\u8fb9\u7684\u6743\u503c\u4e3a\u539f\u6743\u503c\u7684\u76f8\u53cd\u6570\u3002\n\n\u6240\u4ee5\u660e\u663e\u56fe\u5e26\u8d1f\u6570\uff0c\u53ea\u80fd\u7528 SPFA\uff0c~~\u6cea\u76ee~~\u3002\n\n\u6bcf\u4e00\u6b21\u8dd1\u4e00\u6b21 SPFA \u627e\u5230\u6700\u77ed\u8def\uff0c\u5f53\u7136\u8ba1\u7b97\u6700\u77ed\u8def\u65f6\u6ca1\u6709\u6d41\u91cf\u7684\u8fb9\u662f\u4e0d\u80fd\u8d70\u7684\uff0c\u671f\u95f4\u8bb0\u5f55\u6d41\u91cf\u3002\n\n\u5982\u679c\u53d1\u73b0\u6c47\u70b9\u6700\u77ed\u8def\u53d1\u751f\u4e86\u66f4\u65b0\uff0c\u90a3\u4e48\u53ef\u4ee5\u4ece\u6c47\u70b9\u51fa\u53d1\uff0c\u5f80\u56de\u8dd1\u6700\u77ed\u8def\uff0c\u7136\u540e\u5c31\u662f\u51cf\u53bb\u6d41\u91cf\uff0c\u5bf9\u53cd\u5411\u8fb9\u589e\u52a0\u6d41\u91cf\u7684\u64cd\u4f5c\u4e86\u3002\n\n\u5f80\u56de\u8dd1\u6700\u77ed\u8def\u53ef\u4ee5\u7531\u6bcf\u6b21\u66f4\u65b0\u4e00\u4e2a\u70b9\u7684\u6700\u77ed\u8def\u503c\u65f6\u8bb0\u5f55\u4ece\u54ea\u4e00\u4e2a\u70b9\u8f6c\u79fb\u8fc7\u6765\u7684\u5373\u53ef\u3002\n\n\u672c\u9898\u4e5f\u662f\u4e00\u4e2a\u8d39\u7528\u6d41\u3002\n\n\u9996\u5148\u53ef\u4ee5\u4fdd\u8bc1\uff0c\u5728 $y$ \u8f74\u540c\u4fa7\u7684\u4e24\u70b9\u4e0d\u4f1a\u51fa\u73b0\u4e00\u4e2a\u70b9\u8dd1\u5230\u53e6\u4e00\u4e2a\u5750\u6807\u8f74\u4e0e\u53e6\u5916\u4e00\u70b9\u8fdb\u884c\u5339\u914d\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u5e94\u8be5\u5f88\u597d\u8bc1\u3002\n\n\u6240\u4ee5\u5bf9\u4e8e\u5750\u6807\u8f74\u4e24\u8fb9\u7684\u70b9\uff0c\u53ef\u80fd\u90fd\u662f\u80fd\u5339\u914d\u7684\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8fde\u8fb9\uff0c\u800c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u4e5f\u53ef\u4ee5\u8fde $y$ \u8f74\uff0c\u6240\u4ee5\u4e5f\u4e0e $y$ \u8f74\u8fde\u8fb9\u3002\n\n\u7efc\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5efa\u51fa\u8fd9\u4e2a\u56fe\u3002\n\n\u9996\u5148\uff0c\u5c06\u6bcf\u4e2a\u70b9\u590d\u5236\u6210\u4e24\u4efd\uff0c\u4ece $1$ \u5230 $n$\uff0c\u4e0e\u4ece $n+1$ \u5230 $2\\times n$\u3002\n\n\u7b2c\u4e8c\u6b65\uff0c\u5c06\u6e90\u70b9 $S$ \u4e0e $1$ \u5230 $n$ \u8fde\u8fb9\uff0c\u6d41\u91cf\u4e3a $1$\uff0c\u8fb9\u6743\u4e3a $0$\u3002\n\n\u7b2c\u4e09\u6b65\uff0c\u8d70 $y$ \u8f74\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u81ea\u5df1\u4e0e\u81ea\u5df1\u5339\u914d\uff0c\u8fde\u63a5 $i$ \u4e0e $i+n$\uff0c\u6d41\u91cf\u4e3a $1$\uff0c\u8fb9\u6743\u4e3a $\\left|x_i\\right|$\u3002\n\n\u7b2c\u56db\u6b65\uff0c\u8fde\u63a5\u5750\u6807\u8f74\u4e24\u8fb9\u7684\u70b9\uff0c\u5f53 $x_i\\times x_j<0$ \u65f6\uff0c\u8bf4\u660e\u5728\u5750\u6807\u8f74\u4e24\u7aef\uff0c\u8fde\u63a5 $i$ \u4e0e $j+n$\uff0c\u6d41\u91cf\u4e3a $1$\uff0c\u8fb9\u6743\u4e3a $\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}\\div 2$\u3002\u56e0\u4e3a\u5982\u679c\u8981\u5339\u914d\u4f1a\u5339\u914d\u4e24\u6b21\uff0c\u6240\u4ee5\u8981\u6bcf\u6b21\u9664\u4ee5 $2$\uff0c\u800c\u8fde\u5411 $y$ \u8f74\u53ea\u6709\u4e00\u6b21\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u9664\u4ee5 $2$\u3002\n\n\u7b2c\u4e94\u6b65\uff0c\u8fde\u63a5 $n+1$ \u5230 $2\\times n$ \u4e0e\u6c47\u70b9 $T$\uff0c\u6d41\u91cf\u4e3a $1$\uff0c\u8fb9\u6743\u4e3a $0$\u3002\n\n\u6700\u540e\u8dd1\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\u5373\u53ef\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#include<deque>\n#include<vector>\nusing namespace std;\nconst int N=205;\nint n;\ninline double tabs(int x)\n{\n\treturn x>0?x:-x;\n}\nstruct node2\n{\n\tint x,y;\n}t[N];\nstruct node\n{\n\tint to,v;\n\tdouble w;\n};\nvector<node>a[N];\nvector<int>b[N];\ndeque<int>q;\ndouble dis[N],ans;\nbool vis[N];\nint incf[N],pre[N];\nbool spfa()\n{\n\tfor(int i=1;i<=2*n+3;i++)dis[i]=1e9;\n\tmemset(vis,0,sizeof(vis));\n\tq.push_back(2*n+1);\n\tdis[2*n+1]=0;\n\tincf[2*n+1]=1e9;\n\twhile(!q.empty())\n\t{\n\t\tint x=q.front();\n\t\tq.pop_front();\n\t\tvis[x]=0;\n\t\tint len=a[x].size();\n\t\tfor(int i=0;i<len;i++)\n\t\t{\n\t\t\tif(!a[x][i].v)continue;\n\t\t\tif(dis[x]+a[x][i].w<dis[a[x][i].to])\n\t\t\t{\n\t\t\t\tdis[a[x][i].to]=dis[x]+a[x][i].w;\n\t\t\t\tincf[a[x][i].to]=min(incf[x],a[x][i].v);\n\t\t\t\tpre[a[x][i].to]=b[x][i];\n\t\t\t\tif(!vis[a[x][i].to])\n\t\t\t\t{\n\t\t\t\t\tif(!q.empty()&&dis[a[x][i].to]<dis[q.front()])q.push_front(a[x][i].to);\n\t\t\t\t\telse q.push_back(a[x][i].to);\n\t\t\t\t\tvis[a[x][i].to]=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(dis[2*n+3]<1e9-1e-9)return true;\n\treturn false;\n}\nvoid dinic()\n{\n\twhile(spfa())\n\t{\n\t\tint x=2*n+3;\n\t\tans+=dis[2*n+3]*incf[2*n+3];\n\t\twhile(x!=2*n+1)\n\t\t{\n\t\t\tint t=pre[x];\n\t\t\tint p=a[x][t].to;\n\t\t\ta[x][t].v+=incf[2*n+3];\n\t\t\ta[p][b[x][t]].v-=incf[2*n+3];\n\t\t\tx=p;\n\t\t}\n\t}\n}\nint main()\n{\n\t//freopen(\"aichemy.in\",\"r\",stdin);\n\t//freopen(\"aichemy.out\",\"w\",stdout);\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%d%d\",&t[i].x,&t[i].y);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\ta[2*n+1].push_back({i,1,0});\n\t\ta[i].push_back({2*n+1,0,0});\n\t\tb[2*n+1].push_back(a[i].size()-1);\n\t\tb[i].push_back(a[2*n+1].size()-1);\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tif(t[j].x*t[i].x<0)\n\t\t\t{\n\t\t\t\ta[i].push_back({j+n,1,sqrt((t[i].x+t[j].x)*(t[i].x+t[j].x)+(t[i].y-t[j].y)*(t[i].y-t[j].y))/2});\n\t\t\t\ta[j+n].push_back({i,0,-sqrt((t[i].x+t[j].x)*(t[i].x+t[j].x)+(t[i].y-t[j].y)*(t[i].y-t[j].y))/2});\n\t\t\t\tb[i].push_back(a[j+n].size()-1);\n\t\t\t\tb[j+n].push_back(a[i].size()-1);\n\t\t\t}\n\t\t}\n\t\ta[i+n].push_back({2*n+3,1,0});\n\t\ta[2*n+3].push_back({i+n,0,0});\n\t\tb[i+n].push_back(a[2*n+3].size()-1);\n\t\tb[2*n+3].push_back(a[i+n].size()-1);\n\t\ta[i].push_back({i+n,1,tabs(t[i].x)});\n\t\ta[i+n].push_back({i,0,-tabs(t[i].x)});\n\t\tb[i].push_back(a[i+n].size()-1);\n\t\tb[i+n].push_back(a[i].size()-1);\n\t}\n\tdinic();\n\tprintf(\"%.7lf\",ans);\n\treturn 0;\n}\n/*\n3\n1 2\n-1 3\n-2 0\n*/\n```\n",
        "postTime": 1665068061,
        "uid": 275793,
        "name": "Gmt\u4e36FFF",
        "ccfLevel": 5,
        "title": "AT655 \u7389\u5ea7\u306e\u9593 \u9898\u89e3"
    },
    {
        "content": "## [AT655 \u7389\u5ea7\u306e\u9593](https://www.luogu.com.cn/problem/AT655)\n\n**\u3010\u9898\u610f\u7b80\u8ff0\u3011**\n\n\u7ed9\u5b9a $n$ \u4e2a\u70b9\uff0c\u7b2c $i$ \u4e2a\u70b9\u7684\u4f4d\u7f6e\u5750\u6807\u4e3a $(x_i,y_i)$\u3002\u73b0\u53ef\u4ee5\u82b1\u8d39 $\\sqrt{(x_i-x_j)^2+(y_i-y_j)^2}$  \u5c06\u5176\u79fb\u52a8\u5230 $(y_i,y_j)$\u3002\u73b0\u8981\u6c42\u6700\u5c0f\u5316\u82b1\u8d39 $C$\uff0c\u4f7f\u5f97\u8be5\u5e73\u9762\u4e0a\u6240\u4ee5\u7684\u70b9\u7ec4\u6210\u7684\u56fe\u6848\u5173\u4e8e $y$ \u8f74\u5bf9\u79f0\u3002\n\n**\u3010\u89e3\u9898\u601d\u8def\u3011**\n\n\u53d1\u73b0\u70b9\u7684\u79fb\u52a8\u53ea\u6709\u4e24\u79cd\u65b9\u6848\uff0c\u8981\u4e48\u79fb\u52a8\u5230 $y$ \u8f74\uff0c\u8981\u4e48\u4e0e $y$ \u8f74\u53e6\u4e00\u8fb9\u7684\u70b9\u5339\u914d\u3002~~\u6709\u70b9\u50cf\u4e8c\u5206\u56fe\u5339\u914d~~\n\n\u4e8e\u662f\u8003\u8651\u7f51\u7edc\u6d41\uff0c\u5efa\u7acb\u8d85\u7ea7\u6e90\u70b9 $S$\uff0c\u8d85\u7ea7\u6c47\u70b9 $T$\uff0c\u5e76\u4e14\u5c06\u7b2c $i$ \u4e2a\u70b9\u62c6\u6210 $i$ \u548c $i +n$ \u4e24\u4e2a\u70b9\u3002\n\n\u9996\u5148\u4ece $S$ \u5411 $i$ \u5efa\u4e00\u6761\u6d41\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $0$ \u7684\u8fb9\u3002\n\n\u7136\u540e\u5bf9\u4e8e\u6240\u6709 $i$ \u548c $i +n$ \u7684\u70b9\u5efa\u4e00\u6761\u6d41\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $|x_i|$  \u7684\u8fb9\uff0c\u8868\u793a\u5c06 $i$ \u79fb\u5230 $y$ \u8f74\u3002\n\n\u800c\u5bf9\u4e8e\u6240\u6709 $i\\neq j$ \u7684\u70b9\uff0c\u5efa\u4e00\u6761\u6d41\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $\\dfrac{\\sqrt{(x_i+x_j)^2+(y_i-y_j)}}{2}$ \u7684\u8fb9\uff08\u9664\u4ee5 $2$ \u662f\u56e0\u4e3a\u5982\u679c\u5339\u914d $i$ \u548c $j$\uff0c\u53ef\u4ee5\u770b\u505a\u540c\u65f6\u589e\u5e7f\u4e86 $E(i,j)$ \u548c $E(j,i)$\uff09\u3002\n\n\u6700\u540e\u5bf9\u4e8e\u6240\u6709 $n+i$ \u7684\u70b9\uff0c\u5411 $T$ \u8fde\u4e00\u6761\u6d41\u91cf\u4e3a $1$ \u8d39\u7528\u4e3a $0$ \u7684\u8fb9\u7528\u4e8e\u7edf\u8ba1\u7b54\u6848\u3002\n\n\u6b64\u65f6\u7684\u7b54\u6848\u5373\u662f\u6784\u9020\u7684\u7f51\u7edc\u4e2d\u7684\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\u3002\n\n\u6211\u7528\u7684\u662f $\\texttt{Dinic}$ \u7248\u672c\u7684 $\\texttt{MCMF}$ \u3002\n\n**\u3010AC\u4ee3\u7801\u3011**\n\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 250\n#define MAXM 15050\n#define INF (int)(1e9)\nusing namespace std;\n\nstruct Edge{\n\tint v, nex, w; double c;\n} edge[MAXM << 1];\n\nint x[MAXN], y[MAXN], head[MAXN], ecnt = 1, S = 0, T, maxflow, n;\ndouble dis[MAXN], mincost;\nbool inq[MAXN];\n\ninline void addEdge(int u, int v, int w, double c) {\n\tedge[++ecnt].v = v;\n\tedge[ecnt].nex = head[u];\n\tedge[ecnt].w = w;\n\tedge[ecnt].c = c;\n\thead[u] = ecnt;\n\tedge[++ecnt].v = u;\n\tedge[ecnt].nex = head[v];\n\tedge[ecnt].w = 0;\n\tedge[ecnt].c = -c;\n\thead[v] = ecnt;\n}\n\ninline bool SPFA() {\n    for (int i = 1; i <= n * 2 + 5; ++i) dis[i] = INF, inq[i] = 0;\n    queue<int> q; q.push(S); dis[S] = 0; inq[S] = 1;\n    while (!q.empty()) {\n        int u = q.front(); q.pop(); inq[u] = 0;\n        for (int i = head[u]; i; i = edge[i].nex) {\n        \tint v = edge[i].v;\n\t\t\tif (edge[i].w > 0 && dis[v] > dis[u] + edge[i].c) {\n\t\t\t\tdis[v] = dis[u] + edge[i].c;\n\t\t\t\tif (!inq[v]) {\n\t\t\t\t\tq.push(v);\n\t\t\t\t\tinq[v] = 1;\n\t\t\t\t}\n\t\t\t}\n        }\n    }\n    if (dis[T] == (double)INF) return 0;\n    return 1;\n}\n\ninline int DFS(int u, int sum) {\n\tif (u == T) return sum;\n\tint res = 0, k;\n\tfor (int i = head[u]; i && sum; i = edge[i].nex) {\n\t\tint v = edge[i].v;\n\t\tif (inq[v]) continue;\n\t\tif (edge[i].w > 0 && dis[v] == dis[u] + edge[i].c) {\n\t\t\tinq[v] = 1;\n\t\t\tk = DFS(v, min(sum, edge[i].w));\n\t\t\tinq[v] = 0;\n\t\t\tedge[i].w -= k;\n\t\t\tedge[i ^ 1].w += k;\n\t\t\tres += k;\n\t\t\tsum -= k;\n\t\t}\n\t}\n\treturn res;\n}\n\n\ninline void MCMF() {\n\twhile (SPFA()) {\n\t\tint d = DFS(S, INF);\n\t\tmincost += d * dis[T];\n\t}\n}\n\nint main() {\n\tscanf(\"%d\", &n);\n\tS = n * 2 + 2, T = n * 2 + 3;\n\tfor (int i = 1; i <= n; ++i) scanf(\"%d %d\", x + i, y + i);\n\tfor (int i = 1; i <= n; ++i) {\n\t\taddEdge(S, i, 1, 0);\n\t\taddEdge(n + i, T, 1, 0);\n\t\tfor (int j = 1; j <= n; ++j) {\n\t\t\tif (i == j) continue; \n\t\t\taddEdge(i, n + j, 1, sqrt(1.0 * (x[i] + x[j]) * (x[i] + x[j]) + 1.0 * (y[i] - y[j]) * (y[i] - y[j])) / 2);\n\t\t}\n\t\taddEdge(i, i + n, 1, abs(x[i]));\n\t}\n\tMCMF();\n\tprintf(\"%.7lf\\n\", mincost);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1665391478,
        "uid": 675237,
        "name": "DiruiXiao",
        "ccfLevel": 6,
        "title": "AT655 \u7389\u5ea7\u306e\u9593"
    },
    {
        "content": "# AT655 \u7389\u5ea7\u306e\u9593\n\n## \u5206\u6790\n\n#### \u5982\u4f55\u6784\u9020\u5bf9\u79f0\n\n- \u9996\u5148\uff0c\u4e00\u4e2a\u7269\u4f53\u4e0d\u53ef\u80fd\u4ece y \u8f74\u7684\u4e00\u8fb9\u79fb\u52a8\u5230\u53e6\u4e00\u8fb9\u3002\u4e3a\u4ec0\u4e48\uff1f\u8003\u8651\u51e0\u79cd\u60c5\u51b5\n  - \u5750\u6807\u8f74\u4e24\u8fb9\u7684\u7269\u4f53\u76f8\u5339\u914d\u3002\u6b64\u65f6\u4e24\u4e2a\u7269\u4f53\u53ea\u9700\u5728\u5404\u81ea\u7684\u534a\u8f74\u79fb\u52a8\u5c31\u53ef\u4ee5\u5bf9\u79f0\uff0c\u6700\u4f18\u89e3\u5c31\u662f $\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}$\n  - \u5750\u6807\u8f74\u540c\u4fa7\u7684\u7269\u4f53\u76f8\u5339\u914d\u3002\u5c06\u4e00\u4e2a\u7269\u4f53\u79fb\u5230\u53e6\u4e00\u4fa7\u7684\u4ee3\u4ef7\u662f $\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}$\uff0c\u800c\u5c06\u4e24\u4e2a\u7269\u4f53\u90fd\u79fb\u5230 y \u8f74\u7684\u4ee3\u4ef7\u4e3a $\\lvert x_i+x_j \\rvert$ \n- \u6240\u4ee5\u95ee\u9898\u5b9e\u9645\u4e0a\u5c31\u662f\u6c42 y \u8f74\u4e24\u4fa7\u7684\u7269\u4f53\u7684\u4e00\u79cd\u5339\u914d\u65b9\u6848\uff0c\u4f7f\u5f97\u82b1\u8d39\u6700\u5c0f\uff0c\u5f53\u7136\u6240\u6709\u7269\u4f53\u90fd\u53ef\u4ee5\u4e0e y \u8f74\u5339\u914d\u3002\n- \u4e8e\u662f\u5c31\u53ef\u4ee5\u5c06\u5176\u8f6c\u5316\u4e3a\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\u6a21\u578b\n  - \u5c06\u6240\u6709\u70b9\u5206\u4e3a $i,i+n$\uff0c\u4ee3\u8868\u4e3b\u52a8\u5339\u914d\u548c\u88ab\u52a8\u5339\u914d\n  - \u5efa\u7acb\u4e00\u4e2a\u6e90\u70b9 $s$ \u548c\u4e00\u4e2a\u6c47\u70b9 $t$\uff0c\u5c06 $s$ \u5411 $i$ \u8fde\u8fb9\uff0c\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $0$\uff0c\u5c06 $i+n$ \u5411 $t$ \u8fde\u8fb9\uff0c\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $0$\n  - \u5c06 $i$ \u5411 $i+n$ \u8fde\u8fb9\uff0c\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $\\lvert x_i \\rvert$\uff0c\u4ee3\u8868\u5339\u914d\u81ea\u5df1\uff0c\u4e5f\u5c31\u662f\u79fb\u5230 y \u8f74\n  - \u5c06 $i$ \u5411 $j+n$ \u8fde\u8fb9\uff0c\u5bb9\u91cf\u4e3a $1$\uff0c\u8d39\u7528\u4e3a $\\sqrt{(x_i+x_j)^2+(y_i-y_j)^2}$\uff0c\u4ee3\u8868\u5c06 $i$ \u548c $j$ \u5339\u914d\uff08\u6ce8\u610f\u8fde\u8fb9\u65f6\u4e0d\u5fc5\u5224\u65ad $i,j$ \u662f\u5426\u5904\u4e8e\u5750\u6807\u8f74\u4e24\u4fa7\uff0c\u5982\u679c\u5904\u4e8e\u540c\u4fa7\uff0c\u5219\u5c06\u5176\u5339\u914d\u4e0d\u662f\u6700\u4f18\u65b9\u6848\uff0c\u6545\u4e0d\u4f1a\u4ea7\u751f\u8d21\u732e\uff09\n\n#### \u5173\u4e8e\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\n\n- \u53ef\u4ee5\u4f7f\u7528\u6700\u5927\u6d41\u7684 dinic \u7b97\u6cd5\uff0c\u5c06\u5176\u4f7f\u7528 bfs \u5206\u5c42\u7684\u8fc7\u7a0b\u6539\u4e3a\u7528 SPFA \u6c42\u6700\u77ed\u8def\uff0c\u5c06\u5176 dfs \u65f6\u7684\u5224\u65ad\u662f\u5426\u4f4d\u4e8e\u4e0b\u4e00\u5c42\u6539\u4e3a\u5224\u65ad\u5176 $dis$ \u662f\u5426\u7531\u5f53\u524d\u70b9\u5f97\u5230\u3002\u6ce8\u610f\u8981\u4f7f\u7528 $vis$ \u6570\u7ec4\u5224\u65ad\u5f53\u524d\u70b9\u662f\u5426\u5df2\u5728\u589e\u5e7f\u8def\u4e2d\uff0c\u56e0\u4e3a $u\\rightarrow v$ \u548c $v\\rightarrow u$ \u7684\u8def\u5f84\u90fd\u53ef\u884c\n\n## \u6ce8\u610f\n\n- \u56e0\u4e3a\u5728\u8fde\u8fb9\u65f6\uff0c$i$ \u4f1a\u5411 $j+n$ \u8fde\u8fb9\uff0c$j$ \u4e5f\u4f1a\u5411 $i+n$ \u8fde\u8fb9\uff0c\u6240\u4ee5 $i,j$ \u7684\u5339\u914d\u4f1a\u8ba1\u7b97 $2$ \u6b21\u8d21\u732e\uff0c\u6240\u4ee5\u8981\u5c06\u8fd9\u79cd\u8fde\u8fb9\u7684\u8d39\u7528\u7f6e\u4e3a\u539f\u6765\u7684\u4e00\u534a\n\n## \u4ee3\u7801\n\n```c++\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\nusing namespace std;\n\nconst int N=210;\nint n,s,t,tot=1,head[N],q[N],front,tail,first[N],ax[N],ay[N];\ndouble anscost,dis[N];\nbool vis[N];\n\ntemplate<typename T>inline T mabs(T x)\n{\n\treturn x>0?x:-x;\n}\n\nstruct Edge\n{\n\tint v,flow,nex;\n\tdouble cost; \n}E[N*N*3];\n\nvoid AddEdge(int u,int v,int flow,double cost)\n{\n\t++tot;\n\tE[tot].v=v;\n\tE[tot].flow=flow;\n\tE[tot].cost=cost;\n\tE[tot].nex=head[u];\n\thead[u]=tot;\n}\n\nbool equ(double x,double y)\t\t\t\t\t//\u5224\u65addouble\u578b\u6570\u636e\u662f\u5426\u76f8\u7b49\n{\n\tdouble tmp=x-y;\n\tif(tmp>-1e-12&&tmp<1e-12)\n\t\treturn 1;\n\treturn 0;\n}\n\nbool SPFA()\n{\n\tmemset(vis,0,sizeof(vis));\n\tfor(int i=1;i<=n*2+2;++i)\n\t\tdis[i]=1e12;\n\tdis[s]=0;\n\tvis[s]=1;\t\t\t\t\t\t\t\t//\u6b64\u5904\u7684vis\u548cdfs\u4e2d\u7684vis\u662f\u4e92\u4e0d\u5e72\u6270\u7684\uff0c\u56e0\u4e3a\u6bcf\u6b21SPFA\u8fc7\u540evis\u90fd\u4f1a\u53d8\u4e3a0\n\tfront=tail=1;\n\ttail=(tail+1)%N;\n\tq[tail]=s;\n\tint now;\n\twhile(front!=tail)\n\t{\n\t\tfront=(front+1)%N;\n\t\tnow=q[front];\n\t\tvis[now]=0;\n\t\tfor(int i=head[now];i;i=E[i].nex)\n\t\t{\n\t\t\tif(!E[i].flow) continue;\n\t\t\tint v=E[i].v;\n\t\t\tif(dis[v]>dis[now]+E[i].cost)\n\t\t\t{\n\t\t\t\tdis[v]=dis[now]+E[i].cost;\n\t\t\t\tif(!vis[v])\n\t\t\t\t{\n\t\t\t\t\ttail=(tail+1)%N;\n\t\t\t\t\tq[tail]=v;\n\t\t\t\t\tvis[v]=1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(dis[t]!=1e12) return 1;\n\treturn 0;\n}\n\nint dfs(int x,int mxf)\t\t\t\t\t\t//x\u662f\u5f53\u524d\u70b9\uff0cmxf\u662f\u627e\u5230\u7684\u6700\u5927\u6d41\u91cf\n{\n\tif(!mxf||x==t) return mxf;\n\tint ret=0;\n\tvis[x]=1;\n\tfor(int &i=first[x];i;i=E[i].nex)\n\t{\n\t\tint v=E[i].v;\n\t\tif(!E[i].flow||vis[v]) continue;\n\t\tif(equ(dis[v],dis[x]+E[i].cost))\n\t\t{\n\t\t\tint f=dfs(v,min(mxf,E[i].flow));\n\t\t\tif(f)\n\t\t\t{\n\t\t\t\tE[i].flow-=f;\n\t\t\t\tE[i^1].flow+=f;\n\t\t\t\tanscost+=E[i].cost*f;\n\t\t\t\tret+=f;\n\t\t\t\tmxf-=f;\n\t\t\t}\n\t\t}\n\t}\n\tvis[x]=0;\n\treturn ret;\n}\n\nvoid dinic()\n{\n\twhile(SPFA())\n\t{\n\t\tmemcpy(first,head,sizeof(head));\n\t\twhile(dfs(s,0x7f7f7f7f));\n\t}\n}\n\ndouble GetDis(int x,int y)\n{\n\tint x1=-ax[x];\n\treturn sqrt((ay[x]-ay[y])*(ay[x]-ay[y])+(x1-ax[y])*(x1-ax[y]));\n}\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\ts=n*2+1,t=n*2+2;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%d%d\",&ax[i],&ay[i]);\n\t\tAddEdge(s,i,1,0);\n\t\tAddEdge(i,s,0,0);\n\t\tAddEdge(i+n,t,1,0);\n\t\tAddEdge(t,i+n,0,0);\n\t\tAddEdge(i,i+n,1,mabs(ax[i]));\n\t\tAddEdge(i+n,i,0,-mabs(ax[i]));\n\t}\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=n;++j)\n\t\t\tif(i!=j)\n\t\t\t{\n\t\t\t\tAddEdge(i,j+n,1,GetDis(i,j)/2.0);\n\t\t\t\tAddEdge(j+n,i,0,-GetDis(i,j)/2.0);\n\t\t\t}\n\tdinic();\n\tprintf(\"%.7lf\",anscost);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1665391821,
        "uid": 578358,
        "name": "SuBtitle",
        "ccfLevel": 6,
        "title": "AT655 \u7389\u5ea7\u306e\u9593"
    }
]
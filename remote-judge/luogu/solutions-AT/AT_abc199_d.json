[
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a $N$ \u4e2a\u70b9 $M$ \u6761\u8fb9\u7684\u7b80\u5355\u65e0\u5411\u56fe\uff0c\u8981\u6c42\u7ed9\u6bcf\u4e2a\u70b9\u67d3\u8272\uff0c\u5171\u6709\u4e09\u79cd\u989c\u8272\uff0c\u95ee\u6700\u7ec8\u6ee1\u8db3\u5bf9\u4e8e\u4efb\u610f\u4e00\u6761\u8fb9\uff0c\u5176\u4e24\u7aef\u8282\u70b9\u989c\u8272\u4e0d\u540c\u7684\u67d3\u8272\u65b9\u6848\u6570\u3002\n\n## \u601d\u8def\n\n\u8003\u8651 dfs \u66b4\u529b\u67d3\u8272\u3002\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u6570\u4e3a $x$ \u7684\u8054\u901a\u5757\uff0c\u4ece\u67d0\u4e00\u4e2a\u70b9\u5f00\u59cb\uff0c\u8fd9\u4e2a\u70b9\u4ee5\u5916\u7684\u6bcf\u4e2a\u70b9\u6700\u591a\u4e24\u79cd\u67d3\u8272\u65b9\u5f0f\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal O(3\\times 2^{x-1})$\u3002\n\n\u90a3\u5982\u679c\u4ed6\u7ed9\u4f60 $0$ \u6761\u8fb9\u7684\u56fe\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u70b8\u6210\u4e86 $\\mathcal O(3^n)$\u3002\u6240\u4ee5\u81ea\u7136\u60f3\u5230\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u72ec\u7acb\u7684\u70b9\uff0c\u65e0\u9700 dfs\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u4ee5\u4efb\u610f\u67d3\u8272\u3002\u82e5\u6709 $p$ \u4e2a\u72ec\u7acb\u7684\u70b9\uff0c\u7b54\u6848\u5c31\u662f\u5176\u4f59\u7684\u70b9\u7684\u67d3\u8272\u65b9\u6848\u4e58\u4e0a $3^p$\u3002\n\n\u56e0\u6b64\uff0c\u53ea\u9700\u8981\u7cbe\u7f8e\u5730\u5b9e\u73b0\u4e00\u4e0b\uff0c\u4ec5\u679a\u4e3e\u6709\u5fc5\u8981\u7684\u70b9\u548c\u6709\u5fc5\u8981\u7684\u989c\u8272\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u52a3\u5e94\u8be5\u662f $\\mathcal O(2^{\\frac{n}{2}}\\times 3^{\\frac{n}{2}})=\\mathcal O(6^{\\frac{n}{2}})$\u3002\u8fd9\u6837\u7684\u6570\u636e\u662f $N$ \u4e2a\u70b9 $\\frac{N}{2}$ \u6761\u8fb9\uff0c\u6bcf\u4e2a\u8054\u901a\u5757\u5927\u5c0f\u5747\u4e3a $2$\u3002\n\n[AC record](https://atcoder.jp/contests/abc199/submissions/41531632)\n\n```cpp\nint n, m, vis[MAXN], col[MAXN], ord[MAXN], wt[MAXN], idx; vector <int> lnk[MAXN];\nll ans, tms = 1;\n\nil void add(const int &x, const int &y) {\n\tlnk[x].eb(y); lnk[y].eb(x);\n}\n\nil bool check() {\n\trep1(i, 1, n) {\n\t\tfor (auto v : lnk[i]) if (!vis[v] && !vis[i] && col[v] == col[i]) return false;\n\t} return true;\n}\n\nil bool clt() {\n\trep1(i, 1, n) if (!col[i] && !vis[i]) return false;\n\treturn true;\n}\n\nil void dfs(int step) {\n\tif (step > idx) return ans += check(), void();\n\tint p = ord[step];\n\tif (vis[p]) return dfs(step + 1);\n\tfor (auto v : lnk[p]) if (col[v]) {\n\t\trep1(i, 1, 3) if (i ^ col[v]) col[p] = i, dfs(step + 1), col[p] = 0;\n\t\treturn;\n\t}\n\trep1(i, 1, 3) col[p] = i, dfs(step + 1), col[p] = 0;\n}\n\nil void pre(int x) {\n\twt[x] = 1; ord[++idx] = x;\n\tfor (auto v : lnk[x]) if (!vis[v] && !wt[v]) pre(v);\n}\n \nint main() {\n\tread(n, m);\n\trep1(i, 1, m) add(read(), read());\n\trep1(i, 1, n) if (!lnk[i].size()) tms *= 3, vis[i] = 1;\n\trep1(i, 1, n) if (!wt[i] && !vis[i]) pre(i);\n\tdfs(1); printf(\"%lld\\n\", tms * ans);\n\trout;\n}\n```",
        "postTime": 1684571105,
        "uid": 409236,
        "name": "StayAlone",
        "ccfLevel": 6,
        "title": "[ABC199D] RGB Coloring 2 \u9898\u89e3"
    },
    {
        "content": "\u89c2\u5bdf\u5230 $ n $ \u5f88\u5c0f\uff0c\u8003\u8651\u66b4\u529b\u6d82\u8272\u3002\n\n\u9996\u5148\u5982\u679c\u66b4\u529b\u679a\u4e3e $ 3^n $ \u79cd\u989c\u8272\u663e\u7136\u662f\u96be\u4ee5\u901a\u8fc7\u7684\u3002\n\n\u4f46\u89c2\u5bdf\u5230\u5982\u679c\u67d0\u4e2a\u70b9\u7684\u989c\u8272\u786e\u5b9a\u4e86\uff0c\u90a3\u4e48\u548c\u8fd9\u4e2a\u70b9\u76f8\u8fde\u7684\u5206\u91cf\u7684\u6240\u6709\u70b9\u90fd\u6700\u591a\u53ea\u6709\u4e24\u79cd\u989c\u8272\u7684\u53d6\u503c\u3002\n\n\u56e0\u6b64\u53ef\u4ee5\u627e\u51fa\u56fe\u7684\u6240\u6709\u8fde\u901a\u5206\u91cf\uff0c\u7136\u540e\u5206\u522b\u5904\u7406\u6240\u6709\u8fde\u901a\u5757\uff0c\u968f\u4fbf\u9009\u4e00\u4e2a\u70b9\u4f5c\u4e3a\u8d77\u70b9\uff0c\u679a\u4e3e\u8fd9\u4e2a\u70b9\u7684\u989c\u8272\uff0c\u7136\u540e\u679a\u4e3e\u6240\u6709\u65b9\u6848\u5373\u53ef\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u901a\u5757\u8fd9\u4e48\u505a\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $ 3 \\times 2^{n-1} $\uff0c\u53ef\u4ee5\u63a5\u53d7\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $ \\mathcal{O}(3 \\times 2^{n-1}) $\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#import <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,m,s,l;\nint ans[30];\nvector<int>q[30];\nint ts[30][30];\nint v[30];\nint c[30];\nint doing(int x,int fa)\n{\n    if(c[x])\n    {\n        ts[x][fa]=1;\n        return c[x]!=c[fa];\n    }\n    v[x]=1;\n    int ans=0,now;\n    for(int i=1;i<=3;i++)\n    if(i!=c[fa])\n    {\n        c[x]=i;\n        now=1;\n        memset(ts[x],0,sizeof(ts[x]));\n        for(int j=0;j<q[x].size();j++)\n        if(!ts[x][q[x][j]])\n        now*=doing(q[x][j],x);\n        ans+=now;\n    }\n    c[x]=0;\n    return ans;\n}\nmain()\n{\n    cin>>n>>m;\n    while(m--)\n    {\n        scanf(\"%d %d\",&s,&l);\n        q[s].push_back(l);\n        q[l].push_back(s);\n    }\n    s=0;\n    for(int i=1;i<=n;i++)\n    if(!v[i])\n    ans[++s]=doing(i,0);\n    for(int i=2;i<=n;i++)\n    ans[i]*=ans[i-1];\n    cout<<ans[s];\n}\n```\n",
        "postTime": 1670850176,
        "uid": 714821,
        "name": "loser_seele",
        "ccfLevel": 4,
        "title": "ABC199D\u9898\u89e3"
    }
]
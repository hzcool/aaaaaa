[
    {
        "content": "\u7b2c\u4e00\u9053\u81ea\u5df1\u505a\u51fa\u6765\u7684 2000-2400 \u7684 AT \u9898\uff08\u987a\u4fbf\u5efa\u8bae\u6b64\u9898\u8bc4\u7eff\uff09\uff0c~~\u8fd8\u662f\u505a\u6838\u9178\u65f6\u60f3\u5230\u7684\uff0c\u4e0e\u672c\u9898\u53e6\u4e00\u9898\u89e3\u4e0d\u540c~~\uff0c\u6240\u4ee5\u6765\u53d1\u4e2a\u9898\u89e3\u3002\n\n\u5982\u679c\u6b63\u7740\u505a\uff0c\u9700\u8981\u7ef4\u62a4\u4e24\u6761\u8fb9\u7684\u4fe1\u606f\uff0c\u8f83\u4e3a\u9ebb\u70e6\u3002\u6240\u4ee5\u6b63\u96be\u5219\u53cd\u3002\u8003\u8651\u5230\u503c\u57df\u8f83\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u503c\u57df\u4e0b\u624b\u3002\n\n\u8bb0\u6240\u6709\u6570\u5b57\u7684\u603b\u548c\u4e3a $S$\uff0c\u8003\u8651\u5230\u5f53\u4e14\u4ec5\u5f53\u6709\u4e00\u8fb9\u7684\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e\u53e6\u4e24\u8fb9\u4e4b\u548c\uff0c\u5373\u6709\u4e00\u8fb9\u7684\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e $\\lceil \\dfrac{S}{2} \\rceil$ \u65f6\uff0c\u4e0d\u80fd\u7ec4\u6210\u4e09\u89d2\u5f62\uff0c\u6211\u4eec\u53ef\u4ee5**\u679a\u4e3e\u8fd9\u4e2a\u6700\u957f\u8fb9\u7684\u957f\u5ea6\u548c\u8fd9\u6761\u6700\u957f\u8fb9\u7531\u51e0\u4e2a\u6570\u5b57\u62fc\u6210**\u3002\u4e0d\u59a8\u8ba9\u8fd9\u6761\u8fb9\u67d3\u6210\u7ea2\u8272\uff0c\u8fd9\u65f6\u5269\u4e0b\u7684\u6570\u5b57\u53ef\u4ee5\u968f\u4fbf\u9009\u62e9\u4e00\u4e2a\u6ca1\u6709\u7528\u8fc7\u7684\u989c\u8272\u3002\n\n\u5f53 $S$ \u662f\u5947\u6570\u65f6\uff0c\u8fd9\u4e2a\u4e09\u89d2\u5f62\u6700\u591a\u6709\u4e00\u6761\u8fb9 $\\geq \\lceil \\dfrac{S}{2} \\rceil$\uff0c\u6b64\u65f6\u6bcf\u4e2a\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u4e09\u89d2\u5f62\u4ec5\u4f1a\u5728\u7edf\u8ba1\u6700\u957f\u8fb9\u65f6\u88ab\u7edf\u8ba1\u4e00\u6b21\u3002\u4f46\u662f\uff0c\u5f53 $S$ \u4e3a\u5076\u6570\u65f6\uff0c\u4e09\u8fb9\u4e3a $\\left\\{\\dfrac{S}{2},\\dfrac{S}{2},0 \\right\\}$ \u7684\u4e09\u89d2\u5f62\u4f1a\u88ab\u7edf\u8ba1\u4e24\u6b21\u3002\u89e3\u51b3\u65b9\u6848\u662f\u7edf\u8ba1\u4f1a\u5bfc\u81f4\u8fd9\u79cd\u60c5\u51b5\u7684\u65b9\u6848\u6570\uff0c\u5728\u6700\u540e\u7edf\u8ba1\u51fa\u6765\u4e0d\u5408\u6cd5\u7684\u65b9\u6848\u6570\u4e2d\u53bb\u9664\u6389\u8fd9\u4e48\u591a\u3002\n\n\u8bbe $f_{i,j}$ \u8868\u793a\u7528 $i$ \u4e2a\u6570\u5b57\u62fc\u6210 $j$ \u7684\u65b9\u6848\u6570\u3002\u8f6c\u79fb\u65b9\u7a0b\uff1a$f_{j+1,k+a_i} \\gets f_{j,k}$\uff0c\u56e0\u4e3a\u7528 $f_j$ \u66f4\u65b0 $f_{j+1}$\uff0c\u6211\u4eec\u9700\u8981\u4ece\u5927\u5230\u5c0f\u679a\u4e3e $f_j$\uff0c\u4e0d\u8ba9\u4e00\u4e2a\u51b3\u7b56\u88ab\u591a\u6b21\u4f7f\u7528\u3002\n\n\u627e\u5230\u4e00\u4e2a $f_{i,j}$\uff0c\u5176\u4e2d $j \\geq \\lceil \\dfrac{S}{2} \\rceil$ \u540e\uff0c\u8fd8\u6709 $n-i$ \u4e2a\u6570\u5b57\u53ef\u4ee5\u88ab\u67d3\u4e0a\u5269\u4e0b\u7684\u4e24\u4e2a\u989c\u8272\u4e2d\u7684\u4e00\u4e2a\uff0c\u4e5f\u5c31\u662f\u4e00\u5171\u627e\u5230\u4e86 $f_{i,j} \\cdot 2^{n-i}$ \u4e2a\u4e0d\u5408\u6cd5\u7684\u65b9\u6848\u3002\n\n```cpp\n#include <cstdio>\nusing namespace std;\nconst int M = 305, N = 90005, mod = 998244353;\nint f[M][N], n, a[M], S, t[M], ans, ans1;\nint add(int a, int b) {return (a += b) > mod ? a-mod : a;}\nint qpow(int a, int b, int p){\n\tlong long ans = 1ll;\n\tfor(; b; b >>= 1) {if(b & 1) ans = 1ll * ans * a % p; a = 1ll * a * a % p;}\n\treturn ans;\n}\nsigned main(){\n\tscanf(\"%lld\", &n);\n\tt[0] = 1;\n\tfor(int i = 1; i <= n; i++) t[i] = add(t[i-1], t[i-1]);\n\tfor(int i = 1; i <= n; i++)\n\t\tscanf(\"%lld\", &a[i]), S += a[i];\n\tf[0][0] = 1;\n\tfor(int i = 1; i <= n; i++)\n\t\tfor(int j = i; j >= 0; j--)\n\t\t\tfor(int k = 0; k <= S; k++)\n\t\t\t\tf[j+1][k+a[i]] = add(f[j+1][k+a[i]], f[j][k]);\n\tint minn = (S >> 1) + (S & 1);\n\tfor(int i = 0; i <= n; i++){\n\t\tfor(int j = minn; j <= S; j++){\n\t\t\tans = add(ans, 1ll * f[i][j] * t[n-i] % mod);\n\t\t}\n\t\tif(S % 2 == 0) ans1 = add(ans1, f[i][S >> 1]);\n\t}\n\tans -= ans1;\n\tprintf(\"%lld\\n\", (qpow(3, n, mod) - 1ll * ans * 3 % mod + mod) % mod);\n    //3^n \u662f\u5168\u90e8\uff0cans\u8fd8\u8981*3\u662f\u56e0\u4e3a\u5047\u5b9a\u4e86\u6700\u957f\u8fb9\u6d82\u7ea2\u8272\u3002\n} \n```",
        "postTime": 1649758654,
        "uid": 443664,
        "name": "Missa",
        "ccfLevel": 0,
        "title": "AT4921 Three Colors"
    },
    {
        "content": "## \\# \u89e3\u6790\n\n\u663e\u7136\u8981DP\u2026\u2026\n\n\u8981\u6c42\u6784\u6210\u4e09\u89d2\u5f62\uff0c\u5219\u6709\u6700\u957f\u8fb9\u5c0f\u4e8e\u4e24\u77ed\u8fb9\u4e4b\u548c\uff0c\u4f46\u662f\u5728\u8fd9\u4e2a\u9650\u5236\u4e0b\uff0c\u5f88\u96be\u8bbe\u8ba1\u51fa\u72b6\u6001\u80fd\u591f\u8868\u793a\u6700\u957f\u8fb9\u3002**\u6b63\u96be\u5219\u53cd**\uff0c\u6c42\u201c\u6700\u957f\u8fb9\u5927\u4e8e\u7b49\u4e8e\u4e24\u77ed\u8fb9\u4e4b\u548c\u201d\u7684\u65b9\u6848\u6570\u3002\n\n\u56e0\u4e3a\u4e09\u8fb9\u4e4b\u548c $S$ \u56fa\u5b9a\uff0c\u4e24\u77ed\u8fb9\u4e4b\u548c\u4e0d\u8d85\u8fc7 $\\lfloor\\frac S2\\rfloor$\u3002\u4e8e\u662f\u8bbe\u8ba1\u72b6\u6001 $f_{i,j}$ \u8868\u793a\u524d $i$ \u4e2a\u6570\u5b57\u4e2d\u9009\u51fa\u4e00\u4e9b\u5206\u4e3a\u4e24\u7ec4\uff08\u4e24\u4e2a\u8f83\u77ed\u8fb9\uff09\u7684\u65b9\u6848\u6570\uff0c\u8f6c\u79fb\u4e5f\u6bd4\u8f83\u7b80\u5355\uff0c\u8981\u4e48\u4e0d\u9009\uff08$f_{i-1,j}$\uff09\u8981\u4e48\u5206\u5230\u4e24\u7ec4\u4e2d\u7684\u4e00\u4e2a\uff08$2\\times f_{i-1,j-a_i}$\uff09\u3002\n\n\u4f46\u662f\u8fd9\u6837\u8ba1\u7b97\u6709\u4e9b\u95ee\u9898\uff0c\u4f1a\u5206\u51fa\u67d0\u4e00\u4e2a\u96c6\u5408\u662f\u7a7a\u96c6\u7684\u60c5\u51b5\uff0c\u53ea\u8981\u6709\u4e00\u79cd $sum(C)=j$ \u7684\u65b9\u6848\uff0c\u5c31\u4f1a\u5bf9\u5e94\u4e24\u79cd\uff08$A=C,B=\\varnothing$ \u548c $A=\\varnothing,B=C$\uff09\u975e\u6cd5\u60c5\u51b5\u3002\u4e8e\u662f\u518d\u505a\u4e00\u4e2aDP\uff0c$g_{i,j}$ \u8868\u793a\u524d $i$ \u4e2a\u6570\u9009\u4e00\u4e9b\u6570\u4f7f\u5f97\u548c\u4e3a $j$ \u7684\u65b9\u6848\u6570\u3002\n\n$f_{n,i}-2\\times g_{n,i}$ \u5219\u662f\u4e24\u77ed\u8fb9\u4e4b\u548c\u4e3a $i$ \u7684\u65b9\u6848\u6570\uff0c\u518d\u4ece\u4e09\u4e2a\u96c6\u5408\u4e2d\u9009\u51fa\u4e00\u4e2a\u4f5c\u4e3a\u6700\u957f\u8fb9\uff0c\u5373 $3\\times(f_{n,i}-2\\times g_{n,i})$\uff1b\u4e8e\u662f\u53ef\u4ee5\u8ba1\u7b97\u5f97\u5230**\u5728\u6240\u6709\u96c6\u5408\u975e\u7a7a\u7684\u65b9\u6848\u4e2d**\u975e\u6cd5\u65b9\u6848\u6570\u7684\u6570\u91cf $d$\uff1a\n$$\nd=\\sum_{j=1}^{\\lfloor\\frac S2\\rfloor}3\\times(f_{n,i}-2\\times g_{n,i})\n$$\n\u6700\u540e\u5c31\u5269\u6c42\u603b\u65b9\u6848\u6570\u4e86\u3002\u6ce8\u610f\u5230\u7531\u4e8e\u201c\u975e\u6cd5\u65b9\u6848\u6570\u201d\u6c42\u7684\u662f\u5728\u6240\u6709\u96c6\u5408\u975e\u7a7a\u7684\u524d\u63d0\u4e0b\u7684\u975e\u6cd5\u65b9\u6848\uff0c\u603b\u65b9\u6848\u4e5f\u5e94\u4fdd\u8bc1\u96c6\u5408\u975e\u7a7a\u3002\n\n\u76f8\u5f53\u4e8e\u628a $n$ \u4e2a\u6709\u533a\u522b\u7684\u6570\u5206\u5230 $3$ \u4e2a\u6709\u533a\u522b\u7684\u96c6\u5408\u4e2d\u4f7f\u5f97\u96c6\u5408\u975e\u7a7a\u7684\u65b9\u6848\u6570\u3002\u53ef\u4ee5\u7528\u7b2c\u4e8c\u7c7b\u65af\u7279\u6797\u6570\uff08\u628a $n$ \u4e2a\u6709\u6807\u53f7\u7403\u653e\u5165 $m$ \u4e2a\u65e0\u6807\u53f7\u76d2\u5b50\u91cc\u4e14\u76d2\u5b50\u4e0d\u7a7a\uff09\u3002\u6700\u540e\u7b54\u6848\u4e3a $3!\\times S(n,3)-d$\u3002\n\n---\n\n## \\# \u6e90\u4ee3\u7801\n\n```cpp\n/*Lucky_Glass*/\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\n#define ci const int &\nconst int N=305,MOD=998244353;\ninline int Add(ci a,ci b){return a+b>=MOD? a+b-MOD:a+b;}\ninline int Sub(ci a,ci b){return a-b<0? a-b+MOD:a-b;}\ninline int Mul(ci a,ci b){return int(1ll*a*b%MOD);}\ninline int Pow(ci a,ci b){return b? Mul(Pow(Mul(a,a),b>>1),(b&1)? a:1):1;}\nconst int INV2=Pow(2,MOD-2);\n\nint n;\nint num[N],f[2][N*N],g[2][N*N],w[N][4];\n\ninline int Read(int &r){\n\tint b=1,c=getchar();r=0;\n\twhile(c<'0' || '9'<c) b=c=='-'? -1:b,c=getchar();\n\twhile('0'<=c && c<='9') r=(r<<1)+(r<<3)+(c^'0'),c=getchar();\n\treturn r*=b;\n}\nint main(){\n\tRead(n);\n\tw[0][0]=1;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=3;j++)\n\t\t\tw[i][j]=Add(w[i-1][j-1],Mul(j,w[i-1][j]));\n\tint S=0;\n\tfor(int i=1;i<=n;i++) S+=Read(num[i]);\n\tS>>=1;\n\tf[0][0]=g[0][0]=1;\n\tfor(int i=1;i<=n;i++){\n\t\tint I=i&1,J=!I;\n\t\tfor(int j=0;j<=S;j++) f[I][j]=f[J][j],g[I][j]=g[J][j];\n\t\tfor(int j=num[i];j<=S;j++){\n\t\t\tf[I][j]=Add(f[I][j],Mul(2,f[J][j-num[i]]));\n\t\t\tg[I][j]=Add(g[I][j],g[J][j-num[i]]);\n\t\t}\n\t}\n\tint del=0;\n\tfor(int i=1;i<=S;i++){\n\t\tint thi=Mul(f[n&1][i],INV2);\n\t\tthi=Sub(thi,g[n&1][i]);\n\t\tdel=Add(del,Mul(thi,6));\n\t}\n\tint ans=Mul(w[n][3],6);\n\tprintf(\"%d\\n\",Sub(ans,del));\n\treturn 0;\n}\n```\n\n---\n\n## THE END\n\n### Thanks for reading!",
        "postTime": 1605447894,
        "uid": 41243,
        "name": "Lucky_Glass",
        "ccfLevel": 9,
        "title": "(AtCoder)Three Colors \u89e3\u6790"
    }
]
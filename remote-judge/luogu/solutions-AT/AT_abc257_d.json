[
    {
        "content": "# [[ABC257D] Jumping Takahashi 2](https://www.luogu.com.cn/problem/AT_abc257_d) Solution\n\n[TOC]\n\n## [\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\u6233\u6b64\u8fdb\u5165](http://blog.tsawke.com?t=ABC257D)\n\n## \u9898\u9762\n\n\u7ed9\u5b9a $ n $ \u4e2a\u4e0d\u5171\u70b9\u7684\u8e66\u5e8a\uff0c\u7b2c $ i $ \u4e2a\u8e66\u5e8a\u7684\u4f4d\u7f6e\u4e3a $ (x_i, y_i) $\uff0c\u53cd\u5f39\u529b\u4e3a $ p_i $\u3002\u5b58\u5728\u6574\u6570 $ S $\u3002\u5b9a\u4e49\u80fd\u4ece\u7b2c $ i $ \u4e2a\u8e66\u5e8a\u8df3\u5230\u7b2c $ j $ \u4e2a\u8e66\u5e8a\u5f53\u4e14\u4ec5\u5f53 $ p_i \\times S \\ge \\lvert x_i - x_j \\rvert + \\lvert y_i - y_j \\rvert $\u3002\u4f60\u9700\u8981\u94a6\u5b9a\u4e00\u4e2a\u8d77\u70b9\uff0c\u4f7f\u5f97\u53ef\u4ee5\u4ece\u8be5\u8e66\u5e8a\u62b5\u8fbe\u6240\u6709\u8e66\u5e8a\uff08\u53ef\u4ee5\u591a\u6b65\uff09\uff0c\u5e76\u6700\u5c0f\u5316 $ S $\uff0c\u8f93\u51fa\u6700\u5c0f\u503c\u3002\n\n## Solution\n\n\u4e0d\u96be\u53d1\u73b0\u95ee\u9898\u53ef\u4ee5\u8f6c\u5316\u4e3a\uff0c\u6211\u4eec\u8981\u9009\u62e9\u4e00\u4e2a\u70b9\uff0c\u6c42\u4f7f\u5f97\u8fd9\u4e2a\u70b9\u80fd\u591f\u5230\u8fbe\u5176\u5b83\u6240\u6709\u70b9\u7684\u6700\u5927\u4ee3\u4ef7\uff0c\u7136\u540e\u6c42\u6240\u6709\u8d77\u70b9\u6700\u5927\u4ee3\u4ef7\u7684\u6700\u5c0f\u503c\uff0c\u8fd9\u4e1c\u897f\u6709\u70b9\u50cf\u5168\u6e90\u6700\u77ed\u8def\uff0c\u4e14\u6570\u636e\u8303\u56f4\u5f88\u5c0f\u3002\u4e8e\u662f\u4e0d\u96be\u60f3\u5230\u4e00\u6b65\u8f6c\u5316\uff0c\u53ef\u4ee5\u5c06\u539f\u4e0d\u7b49\u5f0f\u8f6c\u5316\u4e3a $ S \\ge \\dfrac{\\lvert x_i - x_j \\rvert + \\lvert y_i - y_j \\rvert}{p_i} $\uff0c\u663e\u7136 $ S $ \u5b58\u5728\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u81ea\u7136\u53ef\u4ee5\u4ee4 $ S = \\left\\lceil \\dfrac{\\lvert x_i - x_j \\rvert + \\lvert y_i - y_j \\rvert}{p_i} \\right\\rceil $\u3002\u4e8e\u662f\u53ef\u4ee5\u8ba4\u4e3a $ i \\rightarrow j $ \u7684\u8fb9\u6743\u5373\u4e3a\u8fd9\u4e2a\uff0c\u7136\u540e\u8dd1\u4e00\u904d FLoyd\uff0c\u7ef4\u62a4\u6bcf\u4e2a\u6e90\u70b9\u7684\u6700\u5927\u503c\uff0c\u6700\u540e\u53d6\u4e2a\u6700\u5c0f\u503c\u5373\u53ef\uff0c\u590d\u6742\u5ea6 $ O(n^3) $\u3002\u5f53\u7136\u4e0d\u7528 Floyd\uff0c\u6216\u8005\u6539\u7528 bfs + \u4e8c\u5206\u7b54\u6848\uff0c\u90fd\u662f\u53ef\u4ee5\u505a\u5230 $ O(n^2 \\log n) $ \u7684\uff0c\u4e0d\u8fc7\u610f\u4e49\u4e0d\u5927\u3002\n\n## Code\n\n```cpp\n#define _USE_MATH_DEFINES\n#include <bits/stdc++.h>\n\n#define PI M_PI\n#define E M_E\n#define npt nullptr\n#define SON i->to\n#define OPNEW void* operator new(size_t)\n#define ROPNEW(arr) void* Edge::operator new(size_t){static Edge* P = arr; return P++;}\n\nusing namespace std;\n\nmt19937 rnd(random_device{}());\nint rndd(int l, int r){return rnd() % (r - l + 1) + l;}\nbool rnddd(int x){return rndd(1, 100) <= x;}\n\ntypedef unsigned int uint;\ntypedef unsigned long long unll;\ntypedef long long ll;\ntypedef long double ld;\n\ntemplate < typename T = int >\ninline T read(void);\n\nint N;\nstruct Node{ll x, y, p;}nod[300];\nll dis[300][300];\nll ans(LONG_LONG_MAX);\n\nint main(){\n    N = read();\n    for(int i = 1; i <= N; ++i)nod[i].x = read(), nod[i].y = read(), nod[i].p = read();\n    for(int i = 1; i <= N; ++i)\n        for(int j = 1; j <= N; ++j)\n            if(i == j)dis[i][j] = 0;\n            else\n                dis[i][j] = (ll)ceil((ld)(abs(nod[i].x - nod[j].x) + abs(nod[i].y - nod[j].y)) / (ld)nod[i].p),\n                dis[j][i] = (ll)ceil((ld)(abs(nod[i].x - nod[j].x) + abs(nod[i].y - nod[j].y)) / (ld)nod[j].p);\n    for(int k = 1; k <= N; ++k)\n        for(int i = 1; i <= N; ++i)\n            for(int j = 1; j <= N; ++j)\n                dis[i][j] = min(dis[i][j], max(dis[i][k], dis[k][j]));\n    for(int s = 1; s <= N; ++s){\n        ll mx(-1);\n        for(int t = 1; t <= N; ++t)mx = max(mx, dis[s][t]);\n        ans = min(ans, mx);\n    }printf(\"%lld\\n\", ans);\n    fprintf(stderr, \"Time: %.6lf\\n\", (double)clock() / CLOCKS_PER_SEC);\n    return 0;\n}\n\ntemplate < typename T >\ninline T read(void){\n    T ret(0);\n    int flag(1);\n    char c = getchar();\n    while(c != '-' && !isdigit(c))c = getchar();\n    if(c == '-')flag = -1, c = getchar();\n    while(isdigit(c)){\n        ret *= 10;\n        ret += int(c - '0');\n        c = getchar();\n    }\n    ret *= flag;\n    return ret;\n}\n```\n\n## UPD\n\nupdate-2022_12_09 \u521d\u7a3f",
        "postTime": 1670566142,
        "uid": 362938,
        "name": "Tsawke",
        "ccfLevel": 6,
        "title": "[ABC257D] Jumping Takahashi 2 \u9898\u89e3"
    }
]
[
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$\uff0c\u73b0\u8981\u56de\u7b54 $Q$ \u7ec4\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u5982\u4e0b\uff1a\u7ed9\u5b9a $l,r$\uff0c\u6c42\u6ee1\u8db3 $l\\le i<j<k\\le r$ \u4e14 $a_i = a_j = a_k$ \u7684\u6709\u5e8f\u6570\u5bf9 $(i,j,k)$ \u7684\u5bf9\u6570\u3002\n\n## \u601d\u8def\n\n\u6ce8\u610f\u5230 $Q$ \u7ec4\u8be2\u95ee\u90fd\u662f\u533a\u95f4\u67e5\u8be2\uff0c\u4e14\u53ef\u4ee5\u79bb\u7ebf\u5904\u7406\uff0c\u4e8e\u662f\u4e0d\u96be\u60f3\u5230\u7528\u83ab\u961f\u5904\u7406\u3002\u8f6c\u79fb\u65f6\uff0c\u7528\u4e00\u4e2a\u6876 $b$ \u7ef4\u62a4\u533a\u95f4 $[l,r]$ \u4e2d\u6bcf\u4e2a\u6570\u51fa\u73b0\u7684\u4e2a\u6570\uff0c\u5047\u8bbe $r+1$ \u8981\u52a0\u5165\u533a\u95f4\uff0c\u90a3\u4e48\u5e26\u6765\u7684\u8d21\u732e\u5c31\u662f $C_{b_{a[r+1]}}^2$\uff0c\u4e8e\u662f\u53ef\u4ee5 $\\mathcal{O}(1)$ \u8f6c\u79fb\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n\\sqrt n)$\uff0c~~\u6570\u636e\u6bd4\u8f83\u6c34~~\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#define maxn 200005\n#define ll long long\nusing namespace std;\nint n,T,len,a[maxn],b[maxn],l,r; struct ques{int l,r,id; ll ans;}q[maxn]; ll res;\nbool cmp(ques aa,ques bb){if((aa.l-1)/len==(bb.l-1)/len) return aa.r<bb.r; return aa.l<bb.l;}\nbool cmp2(ques aa,ques bb){return aa.id<bb.id;}\nint main(){\n\tscanf(\"%d%d\",&n,&T); len=sqrt(n); for(int i=1;i<=n;i++) scanf(\"%d\",&a[i]);\n\tfor(int i=1;i<=T;i++){scanf(\"%d%d\",&q[i].l,&q[i].r); q[i].id=i;} sort(q+1,q+1+T,cmp);\n\tfor(int i=1;i<=T;i++){\n\t\twhile(l>q[i].l){b[a[--l]]++; res+=(b[a[l]]>2)*(1LL*(b[a[l]]-1)*(b[a[l]]-2)/2);}\n\t\twhile(r<q[i].r){b[a[++r]]++; res+=(b[a[r]]>2)*(1LL*(b[a[r]]-1)*(b[a[r]]-2)/2);}\n\t\twhile(l<q[i].l){res-=(b[a[l]]>2)*(1LL*(b[a[l]]-1)*(b[a[l]]-2)/2); b[a[l++]]--;}\n\t\twhile(r>q[i].r){res-=(b[a[r]]>2)*(1LL*(b[a[r]]-1)*(b[a[r]]-2)/2); b[a[r--]]--;}\n\t\tq[i].ans=res;\n\t} sort(q+1,q+1+T,cmp2); for(int i=1;i<=T;i++) printf(\"%lld\\n\",q[i].ans); return 0;\n}\n\n```",
        "postTime": 1684417281,
        "uid": 294382,
        "name": "qzhwlzy",
        "ccfLevel": 5,
        "title": "AT_abc293_g [ABC293G] Triple Index \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u770b\u5230\u67e5\u8be2\u662f\u79bb\u7ebf\u7684\uff0c\u800c\u4e14\u6bcf\u4e00\u4e2a\u6570\u7684\u5f71\u54cd\u53ef\u4ee5\u786e\u5b9a\uff0c\u8003\u8651\u83ab\u961f\u3002\n\n\u800c\u4e0d\u96be\u60f3\u5230\uff0c\u6bcf\u6b21\u52a0\u4e0a\u4e00\u4e2a\u6570 $a_i$ \u65f6\uff0c\u53ea\u9700\u8981\u8bb0\u5f55\u533a\u95f4\u5185\u6709\u591a\u5c11\u4e2a $a_j = a_i$ \u5373\u53ef\u3002\u7531\u4e8e $1 \\le a_i \\le 2 \\times 10^5$\uff0c\u56e0\u6b64\u76f4\u63a5\u5f00\u6570\u7ec4\u5c31\u53ef\u4ee5\u5b58\u50a8\u3002\u82e5\u533a\u95f4\u5185\u6709 $x$ \u4e2a\u6570\u7b49\u4e8e $a_i$\uff0c\u82e5 $x \\lt 2$ \u5219\u6ca1\u6709\u8d21\u732e\uff0c\u5426\u5219\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662f $\\frac{x(x-1)}{2}$\u3002\u5220\u9664\u7684\u60c5\u51b5\u7c7b\u4f3c\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\sqrt{n})$\u3002\n\ncode:\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint k;\nstruct node\n{\n\tint l,r,id;\n\tbool operator<(node B)const\n\t{\n\t\tif((l-1)/k==(B.l-1)/k)return r<B.r;\n\t\treturn l/k<B.l/k;\n\t}\n}c[200010];\nint a[200010],b[200010],ans[200010],n,m,cnt;\nvoid add(int x)\n{\n\tb[x]++;\n\tif(b[x]>=3)cnt+=(b[x]-1)*(b[x]-2)/2;\n}\nvoid del(int x)\n{\n\tif(b[x]>=3)cnt-=(b[x]-1)*(b[x]-2)/2;\n\tb[x]--;\n}\nsigned main()\n{\n\tint l,r,ll=1,rr=0;\n\tcin>>n>>m;\n\tk=sqrt(n);\n\tfor(int i=1;i<=n;i++)cin>>a[i];\n\tfor(int i=1;i<=m;i++)cin>>c[i].l>>c[i].r,c[i].id=i;\n\tsort(c+1,c+m+1);\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tl=c[i].l,r=c[i].r;\n\t\twhile(ll>l)add(a[--ll]);\n\t\twhile(rr<r)add(a[++rr]);\n\t\twhile(ll<l)del(a[ll++]);\n\t\twhile(rr>r)del(a[rr--]);\n\t\tans[c[i].id]=cnt;\n\t}\n\tfor(int i=1;i<=m;i++)cout<<ans[i]<<endl;\n\treturn 0;\n}",
        "postTime": 1683621061,
        "uid": 317622,
        "name": "Lehe",
        "ccfLevel": 0,
        "title": "[ABC293G] Triple Index \u9898\u89e3"
    },
    {
        "content": "# [ABC293G] Triple Index \u9898\u89e3\n\n\u7ed9\u5b9a $n$ \u4e2a\u6570\uff0c\u6709\u4e00\u4e9b\u8be2\u95ee\uff0c\u8be2\u95ee\u533a\u95f4 $[l,r]$ \u6709\u591a\u5c11\u4e2a\u503c\u76f8\u540c\u65e0\u5e8f\u7684\u4e09\u5143\u7ec4\u3002\u53ef\u4ee5\u79bb\u7ebf\u3002\n\n\u6ce8\u610f\u5230\u9898\u76ee\u53ef\u4ee5\u79bb\u7ebf\uff0c\u5e76\u4e14\u6839\u636e\u6bcf\u4e2a\u6570\u7684\u4e2a\u6570\u5c31\u53ef\u4ee5\u8ba1\u7b97\u7b54\u6848\uff0c\u53ef\u4ee5\u8003\u8651\u83ab\u961f\u3002\n\n\u6211\u4eec\u8003\u8651\u4e00\u4e0b\u83ab\u961f\u8f6c\u79fb\u5373\u53ef\uff08\u5176\u5b83\u6a21\u677f\u53ef\u53c2\u89c1\u5c0fZ\u7684\u889c\u5b50\uff09\uff0c\u800c\u4e14\u4e0d\u5e26\u4fee\u3002\u8bbe $i$ \u51fa\u73b0\u4e86 $cnt_i$ \u6b21\u3002\u4ece $[L,R]$ \u8f6c\u79fb\u5230 $[L-1,R]$\uff0c\u5bf9\u4e8e\u65b0\u589e\u7684\u4e00\u4e2a $a_{L-1}$\uff0c\u53ef\u4ee5\u548c\u4efb\u610f\u4e24\u4e2a\u548c\u5b83\u503c\u76f8\u540c\u7684\u7ec4\u6210\u4e09\u5143\u7ec4\uff0c\u56e0\u6b64\u7b54\u6848\u52a0\u4e0a $cnt_{a_{L-1}}\\times (cnt_{a_{L-1}}-1)\\times \\frac{1}{2}$\u3002\u5176\u5b83\u540c\u7406\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u540c\u83ab\u961f\uff0c $O(n\\times \\sqrt{n})$\uff0c\u53ef\u80fd\u9700\u8981\u7565\u5fae\u5361\u5e38\u5373\u53ef\u901a\u8fc7\u3002\n\n\u987a\u4fbf\u5ef6\u7533\u4e00\u53e5\uff0c\u5982\u679c $a_i\\le 10^9$\uff0c\u53ef\u4ee5\u7528\u6620\u5c04\uff0c\u4f46\u66f4\u597d\u7684\u65b9\u6cd5\u662f\u79bb\u6563\u5316\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u8fd8\u662f $O(n\\times \\sqrt{n})$\u3002\n\n\u4ee3\u7801\uff08\u6709\u4e00\u70b9\u5361\u5e38\uff09\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;typedef long long ll;const ll N=4e5+2;\nll h,n,q,S,a[N],cnt[N],L=1,R,ans,p[N],pt[18],sz;char c;//\u53d8\u91cf\nstruct Node{\n\tll l,r,id,w;\n\tbool operator <(const Node& b){//\u6bd4cmp\u51fd\u6570\u5feb\n\t\tif(w!=b.w)return w<b.w;\n\t\telse return ((w&1)?r<b.r:r>b.r);\n\t}\n}x[N];\ninline ll calc(const ll x){return (x>=2?((x*(x-1))>>1):0);}//\u8ba1\u7b97\u548c\u5176\u5b83\u76f8\u540c\u5143\u7d20\u7684\u503c\ninline ll read(){//\u5feb\u8bfb\u5feb\u5199\n\th=0,c=getchar();\n\twhile(!(c>='0'&&c<='9'))c=getchar();\n\twhile(c>='0'&&c<='9')h=(h<<1)+(h<<3)+(c^48),c=getchar();\n\treturn h;\n}\ninline void write(ll x){\n\tif(x==0){putchar('0');return;}\n\tsz=0;\n\twhile(x)pt[++sz]=x%10,x/=10;\n\tfor(register int i=sz;i>=1;i--)putchar(pt[i]^48);\n}\nint main(){\n\tn=read(),q=read(),S=sqrt(n);\n\tfor(register int i=1;i<=n;i++)a[i]=read();\n   //\u83ab\u961f\u8ba1\u7b97\u6743\u503c\n\tfor(register int i=1;i<=q;i++)x[i].l=read(),x[i].r=read(),\n\t\tx[i].id=i,x[i].w=(x[i].l-1)/S+1;\n\tsort(x+1,x+q+1);//\u6392\u5e8f\n\tfor(register int i=1;i<=q;i++){//\u56de\u7b54\u95ee\u9898\n     //\u83ab\u961f\u7edf\u8ba1\u65b0\u589e/\u51cf\u5c11\u7b54\u6848\uff0c\u6ce8\u610f\u987a\u5e8f\n\t\twhile(L>x[i].l)ans+=calc(cnt[a[--L]]),++cnt[a[L]];\n\t\twhile(R<x[i].r)ans+=calc(cnt[a[++R]]),++cnt[a[R]];\n\t\twhile(L<x[i].l)--cnt[a[L]],ans-=calc(cnt[a[L++]]);\n\t\twhile(R>x[i].r)--cnt[a[R]],ans-=calc(cnt[a[R--]]);\n\t\tp[x[i].id]=ans;//\u8bb0\u5f55\n\t}\n\tfor(register int i=1;i<=q;i++)write(p[i]),putchar('\\n');//\u8f93\u51fa\n\treturn 0;\n}\n```",
        "postTime": 1679137796,
        "uid": 367359,
        "name": "Neil_Qian",
        "ccfLevel": 6,
        "title": "[ABC293G] Triple Index \u9898\u89e3"
    },
    {
        "content": "## \u89e3\u9898\u601d\u8def\n\n\u9996\u5148\u89c2\u5bdf\u6b64\u9898\u7684\u7279\u70b9\uff0c\u8fd9\u9053\u9898\u53ea\u6709\u533a\u95f4\u67e5\u8be2\u64cd\u4f5c\uff0c\u800c\u4e14\u7ed9\u5b9a\u7684 $n$ \u548c $V$ \u90fd\u5728 $2 \\times 10^5$ \u4ee5\u5185\uff0c\u4e0d\u96be\u60f3\u5230\u7528\u83ab\u961f $O(n\\sqrt{n})$ \u6c42\u89e3\u3002\n\n\u968f\u540e\u6765\u5199\u83ab\u961f\u4e24\u6838\u5fc3\u51fd\u6570\uff1aadd \u548c del\u3002\n\n\u4ee5 add \u51fd\u6570\u4e3a\u4f8b\uff0c\u6bcf\u6b21\u9700\u7edf\u8ba1\u5f53\u524d\u7684\u5757\u4e2d\u6bcf\u4e2a\u6570\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u5176\u4e2d $i$ \u51fa\u73b0\u6b21\u6570\u4e3a $s_i$\uff0c   \n\u90a3\u4e48\u5982\u679c\u65b0\u589e\u7684\u6570\u5b57\u662f $x$\uff0c\u6839\u636e\u9898\u610f\uff0c\u7b54\u6848\u5c31\u8981\u52a0\u4e0a\u65e7\u533a\u95f4\u91cc\u4e24\u6570\u90fd\u4e3a $x$ \u7684\u4e8c\u5143\u7ec4\u7684\u4e2a\u6570\uff0c\u5c31\u7b49\u4e8e $\\frac{s_x(s_x-1)}{2}$\uff0c\u5e76\u66f4\u65b0 $s_x$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\sqrt{n})$\u3002\n\n## \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst ll N = 2e5+5;\nint n,q,a[N],s[N];\nint maxn;\nll g[N];\nstruct node{\n    int l,r,n;\n}f[N];\nbool cmp(node x,node y) {\n    if(x.l/maxn == y.l/maxn) return x.r < y.r;\n    return x.l/maxn < y.l/maxn;\n}\nll ans;\nint l,r;\nvoid add(int u) {\n    ll res = s[a[u]];\n    ans += res * (res - 1) / 2;\n    s[a[u]]++;\n}\nvoid del(int u){\n    ll res = s[a[u]] - 1;\n    ans -= res * (res - 1) / 2;\n    s[a[u]]--;\n}\nvoid solve() {\n    cin >> n >> q;\n    maxn = sqrt(n);\n    for(int i=1;i<=n;i++) cin >> a[i];\n    for(int i=1;i<=q;i++){\n        cin >> f[i].l >> f[i].r;\n        f[i].n = i;\n    }\n    sort(f + 1,f + 1 + q, cmp);\n    l = 1, r = 0;\n    for(int i=1;i<=q;i++) {\n        int pl = f[i].l;\n        int pr = f[i].r;\n        while (l > pl) add(--l);\n        while (r < pr) add(++r);\n            while (l < pl) del(l++);\n        while (r > pr) del(r--);\n        g[f[i].n] = ans;\n    }\n    for(int i=1;i<=q;i++) cout << g[i] << endl;\n}\nint main(){\n    ios :: sync_with_stdio(0);\n    cin.tie(0); cout.tie(0);\n    solve();\n    return 0;\n}\n```\n\n",
        "postTime": 1679115961,
        "uid": 511639,
        "name": "KevinLikesCoding",
        "ccfLevel": 5,
        "title": "[ABC293G] Triple Index \u9898\u89e3"
    },
    {
        "content": "\u677f\u5b50\u9898\u3002\n\n\u95f2\u8bdd\uff1a\u6bd4\u8d5b\u7ed3\u675f\u524d 10min \u770b\u5230\u4e86\u8fd9\u9898\uff0c\u6bd4\u8d5b\u7ed3\u675f\u524d 15s \u5207\u6389\u4e86\u3002\n\n\u9996\u5148\uff0c\u770b\u5230\u8fd9\u79cd\u6ca1\u6709\u4fee\u6539\u7684\u95ee\u9898\uff0c\u800c\u4e14\u8fd8\u5141\u8bb8\u79bb\u7ebf\uff0c\u5e76\u4e14\u9898\u76ee\u7ed9\u7684\u4e1c\u897f\u597d\u50cf\u4e0d\u592a\u597d\u7ef4\u62a4\u7684\u6837\u5b50\uff0c\u5c31\u53ef\u4ee5\u5148\u5c1d\u8bd5\u4e00\u4e0b\u83ab\u961f\u3002\n\n\u83ab\u961f\u7ef4\u62a4\u4e00\u4e2a $sum_i$ \u8868\u793a\u5f53\u524d\u533a\u95f4\u5185\u503c\u4e3a $i$ \u7684\u6570\u7684\u51fa\u73b0\u6b21\u6570\u3002\n\n\u90a3\u4e48\u6bcf\u6b21\u5de6\u53f3\u7aef\u70b9\u62d3\u5c55\u7684\u65f6\u5019\u66f4\u65b0 $sum_i$ \u540c\u65f6\u66f4\u65b0\u7b54\u6848\u3002\n\n\u73b0\u5728\u8003\u8651\u5982\u4f55\u66f4\u65b0\u7b54\u6848\uff0c\u8bbe\u7b54\u6848\u4e3a $ans$\uff1a\n\n\u663e\u7136\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$\uff0c\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u4e3a $C_{sum_i}^{3}$\uff0c\u5373 $\\frac{sum_i \\times (sum_i-1) \\times (sum_i-2)}{6}$\u3002\n\n\u90a3\u4e48\u6bcf\u4e00\u6b21\u66f4\u6539 $sum_i$ \u7684\u65f6\u5019\u5148\u51cf\u53bb\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c\u7136\u540e\u6539\u5b8c\u518d\u52a0\u4e0a\u66f4\u6539\u540e\u7684\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5373\u53ef\u3002\n\n\u4e0b\u9644\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,q,a[1000005],sum[1000005],ans,pt[1000005];\nstruct node{\n\tint lt,rt,id,zuo,you,kuai;\n}qu[1000005];\nbool cmp(node x,node y){\n\tif(x.kuai!=y.kuai)\n\t    return x.kuai<y.kuai;\n\treturn x.rt<y.rt;\n}//\u83ab\u961f\u6392\u5e8f\nint qr(int x){\n\treturn sum[a[x]]*(sum[a[x]]-1)*(sum[a[x]]-2)/6;\n}//\u5e8f\u5217\u4e2d\u7b2c x \u4e2a\u6570\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c\u6ce8\u610f\u6211\u7684\u4ee3\u7801\u91cc\u5199\u7684\u662f\u7b2c x \u4e2a\u6570\nvoid add(int x){\n\tans-=qr(x);\n\tsum[a[x]]++;\n\tans+=qr(x);\n}//\u52a0\u5165\nvoid delet(int x){\n\tans-=qr(x);\n\tsum[a[x]]--;\n\tans+=qr(x);\n\treturn;\n}//\u5220\u9664\nsigned main(){\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tcout.tie(0);\n\tcin>>n>>q;\n\tint len=sqrt(q);\n\tfor(int i=1; i<=n; i++)\n\t\tcin>>a[i];\n\tfor(int i=1; i<=q; i++){\n\t\tcin>>qu[i].lt>>qu[i].rt;\n\t\tqu[i].id=i;\n\t\tqu[i].kuai=(qu[i].lt-1)/len+1;\n\t}\n\tsort(qu+1,qu+q+1,cmp);\n\tint nw_lt=1,nw_rt=1;\n\tans=0;\n\tsum[a[1]]=1;\n\tfor(int i=1; i<=q; i++){\n\t\twhile(nw_lt>qu[i].lt)\n\t\t\tadd(--nw_lt);\n\t\twhile(nw_rt<qu[i].rt)\n\t\t\tadd(++nw_rt);\n\t\twhile(nw_lt<qu[i].lt)\n\t\t\tdelet(nw_lt++);\n\t\twhile(nw_rt>qu[i].rt)\n\t\t\tdelet(nw_rt--);\n\t\tpt[qu[i].id]=ans;\n\t}\n\tfor(int i=1; i<=q; i++)\n\t\tcout<<pt[i]<<'\\n';\n\treturn 0;\n}\n```",
        "postTime": 1678847373,
        "uid": 400783,
        "name": "_Chtholly_Nephren_",
        "ccfLevel": 6,
        "title": "AT_abc293_g \u9898\u89e3"
    },
    {
        "content": "\u672c\u9898\u89e3\u4f5c\u8005\u8d5b\u65f6\u7531\u4e8e\u7b54\u6848\u8f93\u51fa\u90e8\u5206\u5199\u6302\uff0c\u5220\u70b9\u5199\u6302\uff0c\u6ca1\u80fd\u7edd\u6740\u3002  \n## \u9898\u89e3  \n\u6ca1\u6709\u4fee\u6539\uff0c\u4e14\u4e0d\u5f3a\u5236\u5728\u7ebf\uff0c\u800c\u4e14\u53ef\u4ee5\u5feb\u901f\u5904\u7406\u52a0\u70b9\u5220\u70b9\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c\u663e\u7136\u662f\u83ab\u961f\u677f\u5b50\u3002  \n[oiwiki \u666e\u901a\u83ab\u961f\u7b97\u6cd5](https://oiwiki.org/misc/mo-algo/)  \n\u8bf4\u4e00\u4e0b\u5177\u4f53\u5b9e\u73b0\u3002  \n\n\u8003\u8651\u52a0\u4e0a\u6216\u5220\u9664\u67d0\u4e2a\u70b9\u540e\uff0c\u600e\u4e48\u8ba1\u7b97\u8d21\u732e\u3002  \n\n\u53ef\u4ee5\u5f00\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u503c\u5728\u539f\u6570\u7ec4\u51fa\u73b0\u6b21\u6570\u3002  \n\n\u8bbe\u52a0\u6216\u5220\u7684\u70b9\u503c\u4e3a $val$\u3002  \n\n- \u52a0\u70b9  \n\u8bbe $val$ \u5728**\u539f\u6765\u7684**\u6570\u7ec4\u4e2d\u51fa\u73b0\u4e86 $cnt_{val}$ \u6b21\u3002  \n\u7b54\u6848\u5c06\u589e\u52a0 $C_{cnt_{val}+1}^3 -C_{cnt_{val}}^3 = \\frac{cnt_{val}(cnt_{val}-1)}{2}$\u3002  \n\u7136\u540e\u66f4\u65b0 $cnt_{val}$ \u5373\u53ef\u3002  \n- \u5220\u70b9  \n\u82e5 $cnt_{val} \\le 2$\uff0c\u663e\u7136\u4e0d\u9700\u8981\u8ba1\u7b97\u3002  \n\u5426\u5219\u5c06\u7b54\u6848\u51cf\u5c11 $C_{cnt_{val}}^{3} - C_{cnt_{val}-1}^{3}$\uff0c~~\u6211\u624b\u61d2\u5c31\u4e0d\u628a\u5316\u7b80\u540e\u7684\u5f0f\u5b50\u5199\u4e0a\u4e86~~\u3002  \n\u7136\u540e\u66f4\u65b0 $cnt_{val}$ \u5373\u53ef\u3002  \n\n[Atcoder \u63d0\u4ea4\u8bb0\u5f55](https://atcoder.jp/contests/abc293/submissions/39645868)  \n",
        "postTime": 1678688223,
        "uid": 507348,
        "name": "__vector__",
        "ccfLevel": 0,
        "title": "ABC293G \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\u7ed9\u4f60 $n$ \u4e2a\u6570 $a_i$\uff0c$q$ \u6b21\u8be2\u95ee\u4e24\u4e2a\u6574\u6570 $l,r$\uff0c\u6c42\u533a\u95f4 $[l,r]$ \u5185\u6709\u591a\u5c11\u6ee1\u8db3 $l\\le i<j<k\\le r$ \u4e14 $a_i=a_j=a_k$ \u7684\u4e09\u5143\u7ec4 $(i,j,k)$\u3002\n\n$n,q\\le 2\\times10^5$\uff0c**\u5141\u8bb8\u79bb\u7ebf**\u3002\n### \u601d\u8def\n\u5bf9\u4e8e\u4e00\u4e2a\u6570 $k$\uff0c\u9009\u62e9\u7684 $a_i=a_j=a_k$ \u7684\u503c\u4e3a $k$ \u7684\u65b9\u6848\u6570\u4e3a $C^3_{cnt_k}$\uff0c\u5176\u4e2d $cnt_k$ \u4e3a\u533a\u95f4 $[l,r]$ \u4e2d\u6570\u5b57 $k$ \u51fa\u73b0\u7684\u6b21\u6570\u3002\n\n\u6211\u4eec\u60f3\u8981\u5feb\u901f\u8ba1\u7b97\u533a\u95f4\u5185\u6240\u6709\u6570\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c\u518d\u770b\u5230 $n\\le 2\\times10^5$\uff0c\u5141\u8bb8\u79bb\u7ebf\u7b49\u4fe1\u606f\uff0c\u6211\u4eec\u4e0d\u96be\u60f3\u5230**\u83ab\u961f**\u3002\n\n\u9996\u5148\uff0c\u9884\u5904\u7406\u6240\u6709 $C^3_i$ \u7684\u503c\uff0c\u8fd9\u53ef\u4ee5\u7528\u7ec4\u5408\u6570\u9012\u63a8\u5f0f\u5b9e\u73b0\u3002\n\n\u5176\u6b21\uff0c\u6211\u4eec\u6bcf\u6b21\u79fb\u52a8\u6307\u9488\u65f6\uff0c\u5148\u51cf\u53bb\u8fd9\u4e2a\u6570\u539f\u5148\u7684\u8d21\u732e\uff0c\u518d\u52a0\u4e0a\u5f53\u524d\u7684\u8d21\u732e\uff0c\u5b8c\u6210\u79fb\u52a8\u64cd\u4f5c\u3002\n\n\u7136\u540e\u8fd9\u9053\u9898\u5c31\u53d8\u6210\u4e00\u9053\u677f\u5b50\u4e86\u3002\n\n~~\u5176\u5b9e\u8fd9\u9898\u672c\u8eab\u5c31\u662f\u4e00\u9053\u677f\u5b50\u5427~~\n### \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define rep(a,b,c) for(int a=b;a<=c;a++)\n#define int long long\nusing namespace std;\ninline int R(){\n\tint x=0,f=1;int ch=getchar();\n\twhile(!isdigit(ch)){if(ch=='-')f=-1;ch=getchar();}\n\twhile(isdigit(ch)){x=x*10+ch-48;ch=getchar();}return x*f;\n}\ninline void write(int x){\n\tif(x<0){x=-x;putchar('-');}\n\tint y=0;char z[70];\n\twhile(x||!y){z[y++]=x%10+48;x/=10;}\n\twhile(y--)putchar(z[y]);\n}\ninline void writeln(int x){\n\twrite(x);putchar(10);\n}\nconst int maxn=2e5+5;\nint n,m,a[maxn],ans;\nint pos[maxn];\nint c[maxn][4];\nstruct query{\n\tint l,r,num,ans;\n\tbool operator<(query &x)const{\n\t\tif(pos[l]!=pos[x.l]) return l<x.l;\n\t\telse return r<x.r;\n\t}\n}q[maxn];\nint cnt[maxn];\nvoid add(int x){\n\tx=a[x];\n\tif(cnt[x]>=3) ans-=c[cnt[x]][3];\n\tcnt[x]++;\n\tif(cnt[x]>=3) ans+=c[cnt[x]][3];\n}\nvoid del(int x){\n\tx=a[x];\n\tif(cnt[x]>=3) ans-=c[cnt[x]][3];\n\tcnt[x]--;\n\tif(cnt[x]>=3) ans+=c[cnt[x]][3];\n}\n//cnt[x]>=3\u8fd9\u4e2a\u6761\u4ef6\u662f\u8d5b\u65f6\u52a0\u7684\uff0c\u4e0d\u52a0\u4e5f\u53ef\u4ee5\nbool cmp(query x,query y){\n\treturn x.num<y.num;\n}\nsigned main(){\n\tn=R(),m=R();rep(i,1,n)a[i]=R();\n\trep(i,1,m)q[i]=(query){R(),R(),i,0};\n\tc[1][0]=c[1][1]=1;\n\trep(i,2,n){\n\t\tc[i][0]=1;\n\t\trep(j,1,3) c[i][j]=c[i-1][j]+c[i-1][j-1];\n\t}\n\tint bz=sqrt(n);\n\trep(i,1,n)pos[i]=(i-1)/bz+1;\n\tsort(q+1,q+m+1);\n\tint l=1,r=0;\n\trep(i,1,m){\n\t\twhile(l>q[i].l) add(--l);\n\t\twhile(r<q[i].r) add(++r);\n\t\twhile(l<q[i].l) del(l++);\n\t\twhile(r>q[i].r) del(r--);\n\t\tq[i].ans=ans;\n\t}\n\tsort(q+1,q+m+1,cmp);\n\trep(i,1,m) writeln(q[i].ans);\n}\n\n```\n",
        "postTime": 1678683801,
        "uid": 448884,
        "name": "\u5feb\u4e50\u7684\u5927\u7ae5",
        "ccfLevel": 4,
        "title": "ABC293G"
    },
    {
        "content": "\u83ab\u961f\u677f\u5b50\u3002\n\n\u5047\u8bbe\u4e00\u4e2a\u6570\u4e3a $x$\uff0c\u8fd9\u4e2a\u6570\u5728\u8fd9\u4e2a\u533a\u95f4\u7684\u51fa\u73b0\u6b21\u6570\u662f $cntx$\uff0c\u663e\u800c\u6613\u89c1\uff0c\u6b64\u65f6\u8fd9\u4e2a\u6570\u5bf9\u8fd9\u4e2a\u533a\u95f4\u7b54\u6848\u7684\u8d21\u732e\u662f $cntx \\times (cntx-1) \\times (cntx-2)/6$\u3002\n\n\u4ece\u800c\u53ef\u4ee5\u7528\u83ab\u961f\u7ef4\u62a4\u3002\n\n\u5206\u522b\u7ef4\u62a4\u5f53\u524d\u7b54\u6848\uff0c\u7528\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u5f53\u524d\u533a\u95f4\u6bcf\u4e2a\u6570\u51fa\u73b0\u7684\u4e2a\u6570\u5373\u53ef\u3002\n\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read()\n{\n\tint s=0,w=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9')\n\t{\n\t\tif(c=='-')w=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9')s=(s<<3)+(s<<1)+(c^48),c=getchar();\n\treturn s*w;\n}\ninline void print(int x)\n{\n\tif(x<0)x=-x,putchar('-');\n\tif(x>=10)print(x/10);\n\tputchar(x%10+48);\n}\nint n=read(),q=read(),a[1000010],bl[1000010],S=sqrt(n),ans[1000010],res,cnt[1000010];\nstruct node{\n\tint id,l,r;\n}Q[1000010];\ninline bool cmp(node a,node b)\n{\n\tif(bl[a.l]==bl[b.l])return a.r<b.r;\n\treturn bl[a.l]<bl[b.l];\n}\ninline void update(int x,int v)\n{\n\tif(v==1)\n\t{\n\t\tres-=((cnt[a[x]]*(cnt[a[x]]-1)*(cnt[a[x]]-2))/6);\n\t\tcnt[a[x]]++;\n\t\tres+=((cnt[a[x]]*(cnt[a[x]]-1)*(cnt[a[x]]-2))/6);\n\t}\n\telse\n\t{\n\t\tres-=((cnt[a[x]]*(cnt[a[x]]-1)*(cnt[a[x]]-2))/6);\n\t\tcnt[a[x]]--;\n\t\tres+=((cnt[a[x]]*(cnt[a[x]]-1)*(cnt[a[x]]-2))/6);\n\t}\n}\nsigned main()\n{\n\tfor(int i=1;i<=n;i++)a[i]=read();\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tbl[i]=(i-1)/S+1;\n\t}\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tQ[i]={i,read(),read()};\n\t}\n\tsort(Q+1,Q+q+1,cmp);\n\tfor(int i=1,l=1,r=0;i<=q;i++)\n\t{\n\t\twhile(l>Q[i].l)update(--l,1);\n\t\twhile(r<Q[i].r)update(++r,1);\n\t\twhile(l<Q[i].l)update(l++,-1);\n\t\twhile(r>Q[i].r)update(r--,-1);\n\t\tans[Q[i].id]=res;\n\t}\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tprint(ans[i]);\n\t\tputs(\"\");\n\t}\n}\n```",
        "postTime": 1678605145,
        "uid": 378346,
        "name": "small_rubbish",
        "ccfLevel": 6,
        "title": "\u9898\u89e3"
    },
    {
        "content": "# [ABC293G] Triple Index \u9898\u89e3\n\n## \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6570\u7ec4 $a$\uff0c\u7ed9\u5b9a $q$ \u4e2a\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u95ee $l,r$\uff0c\u4e4b\u95f4\u6709\u591a\u5c11\u4e2a\u5143\u7d20\u76f8\u7b49\u7684\u4e09\u5143\u7ec4\uff08\u5373\u6c42 $\\sum\\limits_{i=l}^{r}\\sum\\limits_{j=i+1}^{r}\\sum\\limits_{k=j+1}^{r}[a_i=a_i=a_k]$\uff09\u3002\n\n## \u5206\u6790\n\n\u663e\u7136\uff0c\u6bcf\u4e2a\u8be2\u95ee\u76f8\u4e92\u72ec\u7acb\uff0c\u53c8 $1\\leq n,q\\leq 2\\times10^5$\uff0c\u663e\u7136\u53ef\u4ee5 $O(n\\sqrt{n})$ \u83ab\u961f\u3002\n\n\u83ab\u961f\u5c31\u662f\u6b63\u5e38\u7684\u83ab\u961f\uff0c\u4e3b\u8981\u662f\u5728\u5904\u7406\u4ef7\u503c\u65f6\u4e0d\u540c\u3002\n\n\u6211\u4eec\u53bb\u7edf\u8ba1\u6bcf\u4e2a\u6570\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u5148\u8981\u5bf9\u6574\u4e2a $a$ \u8fdb\u884c\u79bb\u6563\u5316\u3002\u7136\u540e\uff0c\u53bb\u5f00\u4e00\u4e2a\u6876 $book$\uff0c\u7528\u6765\u50a8\u5b58\u51fa\u73b0\u7684\u6b21\u6570\u3002\n\n\u7136\u540e\uff0c\u5728\u7edf\u8ba1\u4ef7\u503c\u7684\u65f6\u5019\uff0c\u663e\u7136\u5f53 $book_i\\geq 2$ \u65f6\uff0c\u6bcf\u52a0\u4e00\u4e2a\u6570\uff0c\u4ef7\u503c\u4e3a \n\n$$ C_{book_i}^2 $$\n\n```cpp\ninline int solve(int n){return n>=2?n*(n-1)>>1:0;}\n```\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read(){\n    char ch=getchar();int x=0;bool f=1;\n    while(ch<'0'||'9'<ch){if(ch=='-')f=0;ch=getchar();}\n    while('0'<=ch&&ch<='9'){x=(x<<1)+(x<<3)+ch-'0';ch=getchar();}\n    return f?x:-x;\n}\nconst int N=2e5+5;\nint n,q,k,sum,a[N],pos[N],ans[N],book[N];\nvector<int>v;\nstruct qwq{\n\tint l,r,id;\n}b[N];\ninline int getid(int x){return lower_bound(v.begin(),v.end(),x)-v.begin()+1;}\nbool cmp(qwq x,qwq y){return pos[x.l]==pos[y.l]?x.r<y.r:pos[x.l]<pos[y.l];}\ninline int solve(int n){return n>=2?n*(n-1)>>1:0;}\nvoid sub(int x){\n\tbook[a[x]]--;\n\tsum-=solve(book[a[x]]);\n\treturn;\n}\nvoid add(int x){\n\tsum+=solve(book[a[x]]);\n\tbook[a[x]]++;\n\treturn;\n}\nsigned main(){\n    // freopen(\".in\",\"r\",stdin);\n    // freopen(\"a.out\",\"w\",stdout);\n    n=read();q=read();k=sqrt(n);\n    for(int i=1;i<=n;i++)a[i]=read(),pos[i]=(i-1)/k+1,v.push_back(a[i]);\n    sort(v.begin(),v.end());\n\tv.erase(unique(v.begin(),v.end()),v.end());\n\tfor(int i=1;i<=n;i++)a[i]=getid(a[i]);\n\tfor(int i=1;i<=q;i++)b[i]={read(),read(),i};\n\tsort(b+1,b+q+1,cmp);\n\tint l=1,r=0;\n\tfor(int i=1;i<=q;i++){\n\t\twhile(l<b[i].l)sub(l++);\n\t\twhile(l>b[i].l)add(--l);\n\t\twhile(r>b[i].r)sub(r--);\n\t\twhile(r<b[i].r)add(++r);\n\t\tans[b[i].id]=sum;\n\t}\n\tfor(int i=1;i<=q;i++)printf(\"%lld\\n\",ans[i]);\n    return 0;\n}\n```\n",
        "postTime": 1678601987,
        "uid": 171868,
        "name": "sunzz3183",
        "ccfLevel": 4,
        "title": "[ABC293G] Triple Index \u9898\u89e3"
    },
    {
        "content": "\u672c\u9898\u9700\u8981\u4f7f\u7528**\u83ab\u961f**\u601d\u60f3\u3002\n\n\u8003\u8651\u52a0\u5165\u4e00\u4e2a\u6570\u4f1a\u5bf9\u7b54\u6848\u9020\u6210\u4ec0\u4e48\u5f71\u54cd\uff1a\n\n\u8bb0 $x$ \u5728\u76ee\u524d\u626b\u63cf\u7684\u533a\u95f4\u4e2d\u51fa\u73b0\u4e86 $c_x$ \u6b21\uff0c\u518d\u52a0\u5165\u4e00\u4e2a $x$\uff0c\u56e0\u4e3a\u53ef\u4ee5\u4ece\u539f\u6765\u7684 $c_x$\uff08\u8fd9\u91cc $c_x$ \u6307\u8fd8\u672a\u52a0\u5165\u65b0\u7684 $x$ \u65f6\u7684 $x$ \u7684\u6570\u91cf\uff09\u4e2d\u9009\u62e9 $2$ \u4e2a\u548c $x$ \u7ec4\u6210\u4e00\u4e2a\u4e09\u5143\u7ec4\uff0c\u6240\u4ee5\u80fd\u5f62\u6210\u7684\u4e09\u5143\u7ec4\u6570\u91cf\u5e94\u8be5\u589e\u52a0 $\\dfrac{c_x(c_x-1)}{2}$\uff0c\u800c\u540e $c_x\\leftarrow c_x+1$\u3002\u5220\u9664\u4e5f\u662f\u7c7b\u4f3c\u7684\u601d\u60f3\u3002\n\n\u7136\u540e\u5c31\u662f\u83ab\u961f\u677f\u5b50\u4e86\uff0c\u5148\u628a\u6240\u6709\u8be2\u95ee\u79bb\u7ebf\u4e0b\u6765\uff0c\u53ef\u4ee5\u4f7f\u7528\u5947\u5076\u6027\u6392\u5e8f\u4f18\u5316\u3002\n\n\u653e\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ntypedef tuple<int,int,int> tpi;\nint t,c[200001];\nvoid add(int p){\n  if(++c[p]==3)t++;\n  if(c[p]==4)t+=3;\n  if(c[p]>4)t+=(c[p]-1)*(c[p]-2)>>1;\n} // \u52a0\u5165\u4e00\u4e2a\u6570\nvoid del(int p){\n  if(--c[p]==2)t--;\n  if(c[p]==3)t-=3;\n  if(c[p]>3)t-=c[p]*(c[p]-1)>>1;\n} // \u5220\u9664\u4e00\u4e2a\u6570\nmain(){\n  ios::sync_with_stdio(false);\n  cin.tie(0); cout.tie(0);\n  int n,q,L=0,R=-1,sq; cin>>n>>q; sq=sqrt(n);\n  vector<int> a(n),s(q);\n  vector<tpi> w(q);\n  for(auto &i:a)cin>>i;\n  for(int i=0;i<q;i++)\n    cin>>get<0>(w[i])>>get<1>(w[i]),get<2>(w[i])=i;\n  sort(w.begin(),w.end(),[&](tpi x,tpi y){\n    if(get<0>(x)/sq!=get<0>(y)/sq)return get<0>(x)<get<0>(y);\n    return get<0>(x)/sq&1?get<1>(x)<get<1>(y):get<1>(x)>get<1>(y);\n    }); // \u5947\u5076\u6027\u6392\u5e8f\n  for(auto &[l,r,x]:w){\n    l--,r--;\n    while(L<l)del(a[L++]);\n    while(L>l)add(a[--L]);\n    while(R<r)add(a[++R]);\n    while(R>r)del(a[R--]);\n    s[x]=t;\n  } // L \u548c R \u626b\u63cf\n  for(int i:s)cout<<i<<endl;\n  return 0;\n}\n```",
        "postTime": 1678593442,
        "uid": 556366,
        "name": "zyc212303",
        "ccfLevel": 5,
        "title": "[ABC293G] Triple Index \u9898\u89e3"
    },
    {
        "content": "\u83ab\u961f\u677f\u5b50\u3002\n\n\u7c7b\u4f3c\u4e8e [\u5c0f B \u7684\u8be2\u95ee](https://www.luogu.com.cn/problem/P2709)\uff0c\u5728\u79fb\u52a8\u6307\u9488\u8fc7\u7a0b\u4e2d\uff0c\u7ef4\u62a4\u6bcf\u4e2a\u6570\u51fa\u73b0\u6b21\u6570 $cnt_i$\uff0c\u540c\u65f6\u7ef4\u62a4 $\\sum\\binom{cnt_i}{3}$ \u5373\u53ef\u3002\n\n\u53d6\u5e8f\u5217\u5206\u5757\u5757\u957f $B=\\frac{n}{\\sqrt{m}}$\uff0c\u6709\u6700\u4f18\u590d\u6742\u5ea6 $\\mathcal O(n\\sqrt{m})$\u3002\n\n\u5728 ABC G \u770b\u5230\u8fc7\u597d\u51e0\u6b21\u83ab\u961f\u677f\u5b50\uff0cABC \u600e\u4e48\u8fd9\u4e48\u559c\u6b22\u83ab\u961f\u677f\u5b50\u3002\n\n```cpp\n// Problem: G - Triple Index\n// Contest: AtCoder - AtCoder Beginner Contest 293\n// URL: https://atcoder.jp/contests/abc293/tasks/abc293_g\n// Memory Limit: 1024 MB\n// Time Limit: 3000 ms\n// \n// Powered by CP Editor (https://cpeditor.org)\n\n//By: OIer rui_er\n#include <bits/stdc++.h>\n#define rep(x,y,z) for(ll x=(y);x<=(z);x++)\n#define per(x,y,z) for(ll x=(y);x>=(z);x--)\n#define debug(format...) fprintf(stderr, format)\n#define fileIO(s) do{freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout);}while(false)\n#define likely(exp) __builtin_expect(!!(exp), 1)\n#define unlikely(exp) __builtin_expect(!!(exp), 0)\nusing namespace std;\ntypedef long long ll;\n\nmt19937 rnd(std::chrono::duration_cast<std::chrono::nanoseconds>(std::chrono::system_clock::now().time_since_epoch()).count());\nll randint(ll L, ll R) {\n\tuniform_int_distribution<ll> dist(L, R);\n\treturn dist(rnd);\n}\n\ntemplate<typename T> void chkmin(T& x, T y) {if(x > y) x = y;}\ntemplate<typename T> void chkmax(T& x, T y) {if(x < y) x = y;}\n\nconst ll N = 2e5+5;\n\nll n, m, a[N], L[N], R[N], pos[N], sz, tot, buc[N], now, ans[N];\n\nstruct Query {\n\tll l, r, id;\n\tQuery(ll a=0, ll b=0, ll c=0) : l(a), r(b), id(c) {}\n\tfriend bool operator<(const Query& a, const Query& b) {\n\t\tif(pos[a.l] != pos[b.l]) return a.l < b.l;\n\t\treturn (pos[a.l] & 1) ? (a.r < b.r) : (a.r > b.r);\n\t}\n}q[N];\n\nvoid initBlock() {\n\tsz = n / sqrt(m);\n\tchkmax(sz, 1LL);\n\tchkmin(sz, n);\n\twhile(++tot) {\n\t\tL[tot] = R[tot-1] + 1;\n\t\tR[tot] = min(sz*tot, n);\n\t\trep(i, L[tot], R[tot]) pos[i] = tot;\n\t\tif(R[tot] == n) break;\n\t}\n}\n\nvoid ins(ll x) {\n\tnow -= buc[x] * (buc[x] - 1) / 2 * (buc[x] - 2) / 3;\n\t++buc[x];\n\tnow += buc[x] * (buc[x] - 1) / 2 * (buc[x] - 2) / 3;\n}\n\nvoid del(ll x) {\n\tnow -= buc[x] * (buc[x] - 1) / 2 * (buc[x] - 2) / 3;\n\t--buc[x];\n\tnow += buc[x] * (buc[x] - 1) / 2 * (buc[x] - 2) / 3;\n}\n\nint main() {\n\tscanf(\"%lld%lld\", &n, &m);\n\trep(i, 1, n) scanf(\"%lld\", &a[i]);\n\tinitBlock();\n\trep(i, 1, m) scanf(\"%lld%lld\", &q[i].l, &q[i].r), q[i].id = i;\n\tsort(q+1, q+1+m);\n\tll l = 1, r = 0;\n\trep(i, 1, m) {\n\t\twhile(l > q[i].l) ins(a[--l]);\n\t\twhile(r < q[i].r) ins(a[++r]);\n\t\twhile(l < q[i].l) del(a[l++]);\n\t\twhile(r > q[i].r) del(a[r--]);\n\t\tans[q[i].id] = now;\n\t}\n\trep(i, 1, m) printf(\"%lld\\n\", ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1678582062,
        "uid": 122461,
        "name": "rui_er",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 ABC293G\u3010Triple Index\u3011"
    }
]
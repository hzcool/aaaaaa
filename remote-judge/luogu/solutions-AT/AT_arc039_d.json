[
    {
        "content": "\u8fd9\u5c31\u662f\u8fdc\u53e4 ARC \u7684\u56fe\u56fe\u9898\u3002\n\n\u770b\u5230\u9898\u76ee\u4e2d\u8fb9\u4e0d\u91cd\u590d\u7684\u9650\u5236\uff0c\u8003\u8651\u5f80\u5272\u8fb9\u4e0a\u60f3\u3002\n\n\u8003\u8651\u8fb9\u53cc\u7f29\u70b9\u3002\u8fd9\u6837\u4e00\u4e2a\u8fb9\u53cc\u5185\u7684\u70b9\u53ef\u4ee5\u5728\u6ee1\u8db3\u9650\u5236\u7684\u60c5\u51b5\u4e0b\u4e92\u76f8\u5230\u8fbe\u3002\n\n\u56e0\u4e3a\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\u5185\u6ca1\u6709\u5272\u70b9\uff0c\u6240\u4ee5\u5b83\u7c7b\u4f3c\u4e8e\u5f88\u591a\u4e2a\u73af\u5957\u8d77\u6765\u5728\u591a\u4e00\u4e9b\u65e0\u7528\u8fb9\uff0c\u90a3\u6211\u4eec\u628a\u591a\u51fa\u6765\u7684\u8fb9\u6254\u6389\u53ea\u7559\u4e0b\u73af\u5957\u73af\u7684\u8bdd\u5b83\u4e00\u5b9a\u662f\u4e00\u4e2a\u6b27\u62c9\u56fe\uff0c\u8fd9\u6837\u5c31\u4e00\u5b9a\u6ee1\u8db3\u9650\u5236\u4e86\u3002\n\n\u8fb9\u53cc\u7f29\u70b9\u5b8c\u540e\u662f\u4e00\u68f5\u6811\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u8fd9\u68f5\u6811\uff0c\u6211\u4eec\u60f3\u8981\u77e5\u5230\uff1a\u4ece\u8d77\u70b9\u51fa\u53d1\u80fd\u4e0d\u80fd\u5728\u8fb9\u4e0d\u91cd\u590d\u7684\u60c5\u51b5\u4e0b\uff0c\u5148\u7ecf\u8fc7\u4e2d\u8f6c\u70b9\uff0c\u518d\u5230\u8fbe\u7ec8\u70b9\u3002\n\n\u7531\u4e8e\u6811\u4e0a\u4e24\u70b9\u53ea\u6709\u4e00\u6761\u7b80\u5355\u8def\u5f84\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u5224\u5b9a\u8fd9\u4e2a\u4e2d\u8f6c\u70b9\u662f\u4e0d\u662f\u5728\u8d77\u70b9\u548c\u7ec8\u70b9\u95f4\u7684\u552f\u4e00\u7b80\u5355\u8def\u5f84\u5373\u53ef\uff0c\u53ef\u4ee5\u901a\u8fc7\u62c6 LCA \u6765\u8f7b\u677e\u505a\u5230\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct graph{\n\tint nxt[400005],head[100005],go[400005],k=1;\n\tvoid add(int u,int v)\n\t{\n\t\tnxt[++k]=head[u];\n\t\thead[u]=k;\n\t\tgo[k]=v;\n\t}\n}G1;\nvector<int> G2[100005];\nstack<int> sta;\nint n,m;\nint low[200005],dfn[200005],idx,sd[200005],cnt,vis[200005],f[100005][18],dep[100005],t;\nvoid tarjan(int x,int fa)\n{\n\tsta.emplace(x);\n\tt++;\n\tdfn[x]=low[x]=++idx;\n\tfor(int i=G1.head[x];i;i=G1.nxt[i])\n\t{\n\t\tif(i==fa||(i^1)==fa) continue ;\n\t\tint g=G1.go[i];\n\t\tif(!dfn[g])\n\t\t{\n\t\t\ttarjan(g,i);\n\t\t\tlow[x]=min(low[x],low[g]);\n\t\t\tif(low[g]>dfn[x])\n\t\t\t{\n\t\t\t\tint p;\n\t\t\t\tcnt++;\n\t\t\t\tdo{\n\t\t\t\t\tassert(!sta.empty());\n\t\t\t\t\tp=sta.top();\n\t\t\t\t\tsta.pop();\n\t\t\t\t\tsd[p]=cnt;\n\t\t\t\t}while(p!=g);\n\t\t\t}\n\t\t}\n\t\telse low[x]=min(low[x],dfn[g]);\n\t}\n}\nvoid dfs(int x,int fa)\n{\n\tdep[x]=dep[fa]+1;\n\tf[x][0]=fa;\n\tfor(int i=1;(1<<i)<=dep[x];i++)\n\t{\n\t\tf[x][i]=f[f[x][i-1]][i-1];\n\t}\n\tfor(auto g:G2[x])\n\t{\n\t\tif(g!=fa) dfs(g,x);\n\t}\n}\nint lca(int x,int y)\n{\n\tif(dep[x]<dep[y]) swap(x,y);\n\tassert(dep[x]!=0);\n\tassert(dep[y]!=0);\n\tfor(int i=__lg(dep[x]);dep[x]>dep[y];i--)\n\t{\n\t\tif(dep[x]-(1<<i)>=dep[y]) x=f[x][i];\n\t}\n\tif(x==y) return x;\n\tfor(int i=__lg(dep[x]);i>=0;i--)\n\t{\n\t\tif(f[x][i]!=f[y][i]) x=f[x][i],y=f[y][i];\n\t}\n\treturn f[x][0];\n}\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint u,v;\n\t\tcin>>u>>v;\n\t\tG1.add(u,v);\n\t\tG1.add(v,u);\n\t}\n\tG1.add(0,1);\n\tG1.add(1,0);\n\ttarjan(0,0);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=G1.head[i];j;j=G1.nxt[j])\n\t\t{\n\t\t\tint g=G1.go[j];\n\t\t\tif(sd[i]!=sd[g])\n\t\t\t{\n\t\t\t\tG2[sd[i]].emplace_back(sd[g]);\n\t\t\t\tG2[sd[g]].emplace_back(sd[i]);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=cnt;i++)\n\t{\n\t\tsort(G2[i].begin(),G2[i].end());\n\t\tG2[i].erase(unique(G2[i].begin(),G2[i].end()),G2[i].end());\n\t}\n\n\tdfs(1,0);\n\tint q;\n\tcin>>q;\n\twhile(q--)\n\t{\n\t\tint u,v,w;\n\t\tcin>>u>>v>>w;\n\t\tu=sd[u];\n\t\tv=sd[v];\n\t\tw=sd[w];\n\t\tint p=lca(u,w);\n\t\tif(lca(v,p)==p&&(lca(u,v)==v||lca(v,w)==v)) puts(\"OK\");\n\t\telse puts(\"NG\");\n\t}\n}\n```",
        "postTime": 1684999157,
        "uid": 122836,
        "name": "World_Creater",
        "ccfLevel": 0,
        "title": "[ARC039D] \u65c5\u884c\u4f1a\u793e\u9ad8\u6a4b\u541b"
    }
]
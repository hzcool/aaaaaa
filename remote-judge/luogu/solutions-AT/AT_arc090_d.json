[
    {
        "content": "\u76ee\u524d\u6700\u5feb\u505a\u6cd5\uff0c\u6700\u6162\u4e00\u4e2a\u70b9\u53ea\u8981 24ms \u3002\n\n\u5bf9\u4e8e\u6ee1\u8db3\u6761\u4ef6\u7684 $(l,r)$ \u5206\u7c7b\uff1a\n- $f(r)-f(l)=0$\n- $f(r)-f(l)=1$\n- $f(r)-f(l)>1$\n\n\u7b2c\u4e00\u79cd\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\uff1a$ans=9 \\times 10^{f(r)-1}-n \\div f(r)+1$ \u6ce8\u610f\u6b64\u65f6 $n  \\bmod f(r)=0$\n\n\u5bf9\u4e8e\u7b2c\u4e09\u79cd \uff0c \u7ecf\u8fc7\u8ba1\u7b97\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0 $k<=10^8$ \u65f6 $f(l)<=7$ \u3002 \u56e0\u6b64\u53ef\u4ee5\u7528\u5c3a\u53d6\u6cd5\u76f4\u63a5\u505a \u3002 \n\n\u5bf9\u4e8e\u7b2c\u4e8c\u79cd , \u6211\u4eec\u5217\u4e00\u4e2a\u65b9\u7a0b\uff1a\n$$f(l) \\times a + (f(l)+1) \\times b=k$$\n$$f(l) \\times (a+b) + b=k$$\n\n\u4e3a\u907f\u514d\u4e0e\u7b2c\u4e00\u79cd\u91cd\u590d \uff0c $a>0$ \u4e14 $b>0$ \u3002\u5bf9\u4e8e\u6b63\u6574\u6570 $a,b$ \u89e3\u65b9\u7a0b\u5f97 $a+b$ \u4e3a $\\left\\lfloor\\dfrac{k}{f(l)}\\right\\rfloor+1$ \u5230 $\\left\\lfloor\\dfrac{k-1}{f(l)}\\right\\rfloor$ \u7684\u6b63\u6574\u6570 \u3002\n\n\u4e8e\u662f\u636e\u6b64\u6211\u4eec\u6709\u4e86\u7b2c\u4e00\u4efd\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst long long mod=1000000007;\nlong long ans,n;\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tlong long l=1,r=1,t=1,len1=1,p=10,len2=1,q=10;\n\tdo\n\t{\n\t\twhile(t<n)\n\t\t{\n\t\t\t++r;\n\t\t\tif(r==p) p*=10,++len1;\n\t\t\tt+=len1;\n\t\t}\n\t\tif(t==n) ++ans;\n\t\t++l;\n\t\tt-=len2;\n\t\tif(l==q) q*=10,++len2;\n\t}while(l<10000000);//\u60c5\u51b5\u4e09\n\tfor(long long i=8,p=90000000;i<=n;i++,p=p*10%mod)\n\t{\n\t\tif(n%i==0) ans=(ans+p-n/i+1+mod)%mod;//\u60c5\u51b5\u4e00\n\t\tans=(ans+(n-1)/i-n/(i+1))%mod;//\u60c5\u51b5\u4e8c\n\t}\n\tprintf(\"%lld\",ans);\n}\n```\n\u5f88\u53ef\u60dc \uff0c [\u5b83](https://www.luogu.com.cn/record/42678900) T \u4e86 \uff0c\u6781\u9650\u6570\u636e\u5927\u6982\u8dd1\u4e86 2.5 s \u3002\n\n\u672c\u5730\u6d4b\u4e86\u4e0b \uff0c \u6211\u53d1\u73b0\u60c5\u51b5\u4e09\u6700\u5feb \uff0c \u5e38\u6570\u6781\u5c0f \uff0c \u53ea\u7528\u4e86\u4e8c\u5341\u591a\u6beb\u79d2 \u3002\u4e8e\u662f\u8003\u8651\u4f18\u5316\u4e0b\u9762\u7684 for \u5faa\u73af \u3002 \u6211\u4eec\u53d1\u73b0\u60c5\u51b5\u4e00\u53ef\u4ee5\u76f4\u63a5\u72ec\u7acb\u51fa\u6765 \uff0c \u679a\u4e3e $n$ \u7684\u56e0\u6570 \u3002 $p$ \u76f4\u63a5 \u5feb\u901f\u5e42 \u3002 \n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst long long mod=1000000007;\nlong long ans,n;\nlong long kp(long long a,long long b)\n{\n\tlong long c=1;\n\tdo\n\t{\n\t\tif(b&1) c=c*a%mod;\n\t\ta=a*a%mod;\n\t\tb>>=1;\n\t}while(b);\n\treturn c;\n}\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tregister long long l=1,r=1,t=1,len1=1,p=10,len2=1,q=10;\n\tdo\n\t{\n\t\twhile(t<n)\n\t\t{\n\t\t\t++r;\n\t\t\tif(r==p) p*=10,++len1;\n\t\t\tt+=len1;\n\t\t}\n\t\tif(t==n) ++ans;\n\t\t++l;\n\t\tt-=len2;\n\t\tif(l==q) q*=10,++len2;\n\t}while(l<10000000);//\u60c5\u51b5\u4e00\n\tfor(register long long i=8;i<=n;++i) ans+=(n-1)/i-n/(i+1);//\u60c5\u51b5\u4e8c\n\tfor(register long long i=1;i*i<=n;++i)\n\t\tif(n%i==0)\n\t\t{\n\t\t\tif(i>7) ans+=(9ll*kp(10,i-1)-n/i+1)%mod;\n\t\t\tif(i*i!=n&&n/i>7) ans+=(9ll*kp(10,n/i-1)-i+1)%mod;\n\t\t}//\u60c5\u51b5\u4e09\n\tprintf(\"%lld\",(ans+mod)%mod);\n}\n```\n\n\n[\u8fd9\u6837\u5b50](https://www.luogu.com.cn/record/42679759)\u5c31\u8fc7\u4e86\u6b64\u9898 \uff0c \u4f46\u8dd1\u5f97\u8d3c\u6162 \uff0c \u57ab\u5e95\u4e86 \u3002\n\n\u4ed4\u7ec6\u4e00\u770b \uff0c \u60c5\u51b5\u4e8c\u53ef\u4ee5\u6574\u9664\u5206\u5757 \uff01 \u6539\u597d\u4ee5\u540e\u5c31\u8dd1\u5f97\u98de\u5feb\u4e86 \u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst long long mod=1000000007;\nlong long ans,n;\nlong long kp(long long a,long long b)\n{\n\tlong long c=1;\n\tdo\n\t{\n\t\tif(b&1) c=c*a%mod;\n\t\ta=a*a%mod;\n\t\tb>>=1;\n\t}while(b);\n\treturn c;\n}\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tregister long long l=1,r=1,t=1,len1=1,p=10,len2=1,q=10;\n\tdo\n\t{\n\t\twhile(t<n)\n\t\t{\n\t\t\t++r;\n\t\t\tif(r==p) p*=10,++len1;\n\t\t\tt+=len1;\n\t\t}\n\t\tif(t==n) ++ans;\n\t\t++l;\n\t\tt-=len2;\n\t\tif(l==q) q*=10,++len2;\n\t}while(l<10000000);\n\tfor(register long long l=1,r;l<=n-1;l=r+1)\n\t{\n\t\tr=(n-1)/((n-1)/l);\n\t\tans=(ans+(r-l+1)*((n-1)/l))%mod;\n\t}\n\tfor(register long long l=1,r;l<=n;l=r+1)\n\t{\n\t\tr=n/(n/l);\n\t\tans=(ans-(r-l+1)*(n/l)%mod+mod)%mod;\n\t}\n\tfor(int i=1;i<=7;i++) ans=(ans-(n-1)/i+n/i)%mod;\n\tans=(ans+n/8)%mod;\n\tfor(register long long i=1;i*i<=n;++i)\n\t\tif(n%i==0)\n\t\t{\n\t\t\tif(i>7) ans+=(9ll*kp(10,i-1)-n/i+1)%mod;\n\t\t\tif(i*i!=n&&n/i>7) ans+=(9ll*kp(10,n/i-1)-i+1)%mod;\n\t\t}\n\tprintf(\"%lld\",(ans+mod)%mod);\n}\n```\n\n\u5176\u5b9e\u6b64\u9898\u6570\u636e\u53ef\u4ee5\u52a0\u5f3a \uff0c $k$ \u53ef\u4ee5\u51fa\u5230 $5 \\times 10^9$ \u3002",
        "postTime": 1606689621,
        "uid": 112921,
        "name": "zhimao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT3884 \u3010[ARC090D] Number of Digits\u3011"
    },
    {
        "content": "## Description\n\n[\u9898\u5e93\u94fe\u63a5](https://arc090.contest.atcoder.jp/tasks/arc090_d)\n\n\u8bb0 $d$ \u5728\u5341\u8fdb\u5236\u4e0b\u7684\u4f4d\u6570\u4e3a $f(d)$ \u3002\u7ed9\u51fa\u8be2\u95ee $S$ \uff0c\u6c42\u6709\u591a\u5c11\u5bf9 $(l,r)$ \u4f7f\u5f97 $$\\sum_{i=l}^r f(i)=S$$\n\n$1\\leq S\\leq 10^8$\n\n## Solution\n\n\u6ce8\u610f\u5230\u5f53\u6570\u5b57\u8d8a\u5927\u65f6 $f(r)-f(l)$ \u4f1a\u8d8a\u5c0f\u3002\n\n\u5206\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba\uff1a\n\n1. $f(l)\\leq 7$ \uff0c\u8fd9\u65f6\u53ef\u4ee5\u7528\u5c3a\u53d6\u6cd5\u6765\u505a\uff0c\u53ef\u4ee5\u53d1\u73b0\u5b83\u7684\u53f3\u754c\u4e3a $10^7+\\frac{10^8}{8}=25500000$ \uff1b\n\n2. $f(l)\\geq 8$ \uff0c\u6211\u4eec\u4f9d\u65e7\u53ef\u4ee5\u5206\u4e24\u79cd\u60c5\u51b5\u6765\u8003\u8651\uff1a\n\n    1. $f(r)-f(l)=0$ \uff0c\u6b64\u65f6\u663e\u7136\u9009\u7684\u6570\u90fd\u662f\u4f4d\u6570\u76f8\u540c\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u7edf\u8ba1\u8fd9\u79cd\u4f4d\u6570\u7684\u4e2a\u6570 $sum$ \uff0c\u8be5\u79cd\u60c5\u51b5\u7684\u7b54\u6848 $sum-f(l)+1$ \uff1b\n\n    2. $f(r)-f(l)=1$ \u3002\u5047\u8bbe\u53d6\u7684\u6570\u4e2a\u6570\u4e3a $t$ \uff0c\u5373 $r-l+1=t$ \uff0c\u53d6\u957f\u5ea6\u4e3a $f(l)$ \u7684\u4e2a\u6570\u4e3a $x$ \uff0c\u957f\u5ea6\u4e3a $f(r)$ \u7684\u4e2a\u6570\u4e3a $y$ \uff1a $$\\begin{cases}x+y=t\\\\x\\cdot f(l)+y\\cdot f(r)=S\\end{cases}$$\n\u90a3\u4e48 $f(l)\\cdot t+y=S$ \u6211\u4eec\u53ef\u4ee5\u679a\u4e3e $t$ \uff0c\u5bb9\u6613\u53d1\u73b0 $\\begin{cases}y=S~mod~t\\\\x=t-S~mod~t\\end{cases}$ \uff0c\u5373\u5bf9\u4e8e\u6bcf\u4e2a $t$ \uff0c\u90fd\u53ef\u4ee5\u89e3\u51fa\u552f\u4e00\u89e3\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u8fd9\u65b9\u9762\u7684\u89e3\u4f1a\u548c\u4e0a\u9762\u7684\u89e3\u91cd\u590d\uff0c\u5373\u5f53 $f(l)\\mid S$ \u8fd9\u91cc\u4f1a\u8ba1\u7b97\u4e00\u6b21\u3002\n\n\u7efc\u4e0a\u53ef\u4ee5\u5206\u60c5\u51b5\u5904\u7406\u3002\n\n## Code\n\n```cpp\n//It is made by Awson on 2018.2.3\n#include <bits/stdc++.h>\n#define LL long long\n#define dob complex<double>\n#define Abs(a) ((a) < 0 ? (-(a)) : (a))\n#define Max(a, b) ((a) > (b) ? (a) : (b))\n#define Min(a, b) ((a) < (b) ? (a) : (b))\n#define Swap(a, b) ((a) ^= (b), (b) ^= (a), (a) ^= (b))\n#define writeln(x) (write(x), putchar('\\n'))\n#define lowbit(x) ((x)&(-(x)))\nusing namespace std;\nconst int l1 = 10000000;\nconst int l2 = 25500000;\nconst int yzh = 1e9+7;\nvoid read(int &x) {\n    char ch; bool flag = 0;\n    for (ch = getchar(); !isdigit(ch) && ((flag |= (ch == '-')) || 1); ch = getchar());\n    for (x = 0; isdigit(ch); x = (x<<1)+(x<<3)+ch-48, ch = getchar());\n    x *= 1-2*flag;\n}\nvoid print(int x) {if (x > 9) print(x/10); putchar(x%10+48); }\nvoid write(int x) {if (x < 0) putchar('-'); print(Abs(x)); }\n\nint s, f[l2+5];\n\nint quick_pow(int a, int b) {\n    int ans = 1;\n    while (b) {\n\tif (b&1) ans = 1ll*ans*a%yzh;\n\ta = 1ll*a*a%yzh, b >>= 1;\n    }\n    return ans;\n}\nint count1(int n) {\n    int ans = 0, r = 0, cnt = 0;\n    for (int i = 1; i < l1; i++) {\n\tcnt -= f[i-1];\n\twhile (cnt+f[r+1] <= s && r < l2) cnt += f[++r];\n\tif (cnt == s) ++ans;\n\tif (r == l2) break;\n    }\n    return ans;\n}\nint count2(int n) {\n    int lim = n/8, ans = lim;\n    for (int t = 1; t <= lim; t++)\n\tif (n%t == 0) {\n\t    int len = n/t;\n\t    (ans += (1ll*quick_pow(10, len-1)*9%yzh-t)%yzh) %= yzh;\n\t}\n    return ans;\n}\nvoid work() {\n    for (int i = 1, r = 10, cnt = 1; i < l1; i++, i = r, r = r*10, cnt++)\n\tfor (int j = i; j < r; j++) f[j] = cnt;\n    for (int i = l1; i <= l2; i++) f[i] = 8;\n    read(s);\n    writeln(((count1(s)+count2(s))%yzh+yzh)%yzh);\n}\nint main() {\n    work();\n    return 0;\n}\n```",
        "postTime": 1523520951,
        "uid": 11773,
        "name": "NaVi_Awson",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AT3884 \u3010Number of Digits\u3011"
    },
    {
        "content": "\u4e00\u9053\u6709\u8da3\u7684\u6570\u5b66+\u601d\u7ef4\u9898\u3002\n\n## \u601d\u8def\n\n\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- \u5982\u679c $f(r) - f(l) \\ge 2$\uff0c\u90a3\u4e48\u6613\u5f97 $f(l) \\le 7$\uff0c\u8fd9\u90e8\u5206\u53ef\u4ee5\u7528\u5c3a\u53d6\u6cd5\u8ba1\u7b97\u3002\n\n- \u5982\u679c $f(r) - f(l) \\le 1$\uff0c\u679a\u4e3e\u533a\u95f4\u7684\u957f\u5ea6 $i$\uff08$i$ \u663e\u7136\u8981 $\\le$ $\\left\\lfloor\\dfrac{n}{8}\\right\\rfloor$\uff09\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$ \u90fd\u5b58\u5728\u4e14\u4ec5\u5b58\u5728\u4e00\u5bf9 $(l,r)$ \u6ee1\u8db3 $\\sum\\limits_{i=l}^r{f(i)} = S$\u3002\u611f\u6027\u7406\u89e3\u4e00\u4e0b\uff0c\u5148\u4ee4 $f(l)$ \u5230 $f(r)$ \u90fd\u4e3a $\\left\\lfloor\\dfrac{n}{i}\\right\\rfloor$\uff0c\u4e4b\u540e\u5c06 $r - n \\bmod i + 1$ \u5230 $r$ \u7684 $f$ \u503c\u5168\u90e8 $+1$\uff0c\u5c31\u51d1\u51fa\u4e86 $S$\u3002\n\n- \u8981\u6ce8\u610f $f(r) - f(l) = 0$ \u7684\u60c5\u51b5\uff0c\u5373 $f(l) = f(r)$\uff0c\u540c\u6837\u679a\u4e3e\u533a\u95f4\u957f\u5ea6 $i$\uff0c\u90a3\u4e48 $i$ \u5fc5\u987b\u662f $S$ \u7684\u56e0\u6570\u3002\u6b64\u65f6\u6709 $f(l) = \\dfrac{n}{i}$\u3002\u56e0\u4e3a\u6709 $10^{f(l)} - 10^{f(l) - 1}$ \u4e2a \u4f4d\u6570\u4e3a $f(l)$ \u7684\u6570\uff0c\u56e0\u6b64\u4ed6\u4eec\u5f62\u6210\u4e86 $10^{f(l)} - 10^{f(l) - 1} - i + 1$ \u4e2a\u8fde\u7eed\u7684\u533a\u95f4\uff0c\u5c06 $10^{f(l)} - 10^{f(l) - 1} - i$ \u76f4\u63a5\u7d2f\u52a0\u81f3\u7b54\u6848\u5373\u53ef\u3002\uff08\u4e0d\u7528 $+1$ \u662f\u56e0\u4e3a\u8fd9\u4e2a\u5728\u4e0a\u9762 $f(r) - f(l) \\le 1$ \u7684\u60c5\u51b5\u5df2\u7ecf\u52a0\u8fc7\u4e86\uff09\n\n## \u4ee3\u7801\n\n```cpp\nconst int maxn = 40000000;\nconst ll mod = 1000000007;\n\nint f[maxn];\nll n;\n\nll qpow(ll b, ll p) {\n\tll res = 1;\n\twhile (p) {\n\t\tif (p & 1) {\n\t\t\tres = res * b % mod;\n\t\t}\n\t\tb = b * b % mod;\n\t\tp >>= 1;\n\t}\n\treturn res;\n}\n\nvoid prepare() {\n\tfor (int i = 0; i <= 7; ++i) {\n\t\tll l = qpow(10, i), r = qpow(10, i + 1) - 1;\n\t\tfor (int j = l; j <= min(r, 39999900LL); ++j) {\n\t\t\tf[j] = i + 1;\n\t\t}\n\t}\n}\n\nvoid solve() {\n\tscanf(\"%lld\", &n);\n\tll ans = 0, sum = 0;\n\tfor (int i = 1, j = 0; i < 10000000; ++i) {\n\t\twhile (sum + f[j + 1] <= n) {\n\t\t\tsum += f[++j];\n\t\t}\n\t\tif (sum == n) {\n\t\t\t++ans;\n\t\t}\n\t\tsum -= f[i];\n\t}\n\tans = (ans + n / 8) % mod;\n\tll tmp = n / 8;\n\tfor (ll i = 1; i <= tmp; ++i) {\n\t\tif (n % i == 0) {\n\t\t\tll t = n / i;\n\t\t\tans = ((ans + qpow(10, t) - qpow(10, t - 1) - i) % mod + mod) % mod;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans);\n}\n```\n",
        "postTime": 1641200890,
        "uid": 275273,
        "name": "zltqwq",
        "ccfLevel": 0,
        "title": "AT3884 \u9898\u89e3"
    }
]
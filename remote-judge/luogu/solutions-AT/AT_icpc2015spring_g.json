[
    {
        "content": "\u6709\u8da3\u7684\u662f $k\\ge n-3$ \u554a\uff0c\u6240\u4ee5\u6211\u4eec\u66b4\u529b\u679a\u4e3e\u7b2c\u4e00\u4e2a\u6267\u884c\u64cd\u4f5c\u7684\u4eba\uff0c\u7136\u540e\u6b64\u65f6\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u6700\u591a\u53ea\u6709 $6$ \u79cd\u53ef\u80fd\u554a\u3002\n\n\u6240\u4ee5\u8fd9\u542f\u793a\u6211\u4eec\u8bbe $f(mask,S)$ \u8868\u793a $mask$ \u96c6\u5408\u91cc\u7684\u4eba\u5df2\u7ecf\u9009\u62e9\uff0c\u5f53\u524d\u7684\u5b57\u7b26\u4e32 $S$\uff0c\u4e14\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u64cd\u4f5c\u5e8f\u5217\u3002\n\n\u8f6c\u79fb\u7684\u65f6\u5019\u9996\u5148\u8fdb\u884c\u4e00\u4e2a\u5b50\u5e8f\u5217\u662f\u5426\u5b58\u5728\u7684 check\uff0c\u8fd9\u4e2a\u76f4\u63a5 $O(nk)$ \u7684\u505a\u7b80\u5355\u7684 dp \u5c31\u53ef\u4ee5\u3002\n\n\u4e00\u4e2a\u7ec6\u8282\u662f\u786e\u5b9a\u521d\u59cb\u7684 6 \u4e2a\u4e32\u53ef\u4ee5\u7528 ```std::next_permutation``` \u6765\u7b80\u5316\u4ee3\u7801\u554a\u3002\n\n\u611f\u89c9\u6ca1\u4ec0\u4e48\u610f\u601d\u7684\u9898\uff0c\u5f88\u6c34...\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define op(x) ((x&1)?x+1:x-1)\n#define odd(x) (x&1)\n#define even(x) (!odd(x))\n#define lc(x) (x<<1)\n#define rc(x) (lc(x)|1)\n#define lowbit(x) (x&-x)\n#define mp(x,y) make_pair(x,y)\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\nusing namespace std;\nconst int MAXN=16;\nmap<string,string>f[1<<MAXN];\nint n,k;\nstring s[MAXN+10];\nint dp[MAXN+10][MAXN+10];\nint occ[MAXN+10];\nstring ans=\"a\";\nstring calc(string a,int idx){\n    memset(occ,0,sizeof occ);\n    memset(dp,0,sizeof dp);\n    dp[0][0]=1;\n    rep(i,1,n){\n        dp[i][0]=1;\n        rep(j,1,k){\n            dp[i][j]=dp[i-1][j];\n            if(a[i-1]==s[idx][j-1])dp[i][j]|=dp[i-1][j-1];\n        }\n    }\n    if(!dp[n][k])return \"-1\";\n    string ret=s[idx];reverse(ret.begin(),ret.end());\n    rep(i,0,k-1)occ[s[idx][i]-'A']=1;\n    rep(i,0,n-1)if(!occ[a[i]-'A'])ret+=a[i];\n    return ret;\n}   \nchar tmp[MAXN+10];\nint tot,arr[MAXN+10];\nint main(){\n    cin>>n>>k;\n    rep(i,0,n-1)cin>>s[i];\n    rep(i,0,n-1){\n        string qwq=s[i];\n        reverse(qwq.begin(),qwq.end());\n        memset(occ,0,sizeof occ);\n        rep(j,0,k-1)occ[s[i][j]-'A']=1;\n        tot=0;\n        rep(j,0,n-1)if(!occ[j])tmp[++tot]='A'+j;\n        rep(j,1,tot)arr[j]=j;\n        while(1){\n            string res;res.clear();\n            rep(j,1,tot)res+=(tmp[arr[j]]);\n            string tmpB;tmpB.clear();tmpB+=('A'+i);\n            f[1<<i][(qwq+res)]=tmpB;\n            int flag=0; \n            rep(j,1,tot)if(arr[j]!=tot-j+1)flag=1;\n            if(!flag)break;\n            next_permutation(arr+1,arr+1+tot);\n        }\n    }\n    rep(i,1,(1<<n)-2){\n        for(auto p:f[i]){\n            rep(j,0,n-1)if(i>>j&1)continue;else{\n                string v=calc(p.first,j);\n                if(v==\"-1\")continue;\n                string tmp;tmp.clear();tmp+=('A'+j);\n                tmp=p.second+tmp;\n                if(f[i|(1<<j)].find(v)==f[i|(1<<j)].end())f[i|(1<<j)][v]=tmp;\n                else f[i|(1<<j)][v]=min(f[i|(1<<j)][v],tmp);\n            }\n        }\n    }\n    for(auto p:f[(1<<n)-1])if(ans==\"a\")ans=p.second;else ans=min(ans,p.second);\n    cout<<ans<<endl;\n    return 0;\n}\n```",
        "postTime": 1657893916,
        "uid": 340632,
        "name": "Cry_For_theMoon",
        "ccfLevel": 8,
        "title": "JAG-channel II"
    }
]
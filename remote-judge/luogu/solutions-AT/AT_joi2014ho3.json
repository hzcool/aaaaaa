[
    {
        "content": "~~\u4e8c\u5206\u67e5\u627e\u80dc\u5229~~\uff0c\u83b7\u5f97 Um_nik \u7684\u4fdd\u4f51\u3002\n\n$\\large\\text{Solution:}$\n\n\u9996\u5148\u770b\u5230\u4e86 \u201c\u6700\u77ed\u7684\u4e00\u6bb5\u957f\u5ea6\u5c3d\u53ef\u80fd\u7684\u957f\u201d\uff0c\u5c31\u60f3\u5230\u4e86\u4e8c\u5206\u7b54\u6848\u3002\n\n\u8003\u8651\u4e8c\u5206\u6700\u77ed\u4e00\u6bb5\u7684\u503c\u3002\u5f53\u524d\u6700\u77ed\u4e00\u6bb5\u7684\u503c\u4e3a $x$ \u7684\u65f6\u5019\u6211\u4eec\u5148\u679a\u4e3e\u4e00\u4e2a\u65ad\u70b9\uff0c\u8d2a\u5fc3\u5730\u627e\u51fa\u524d\u4e24\u6bb5\uff08\u4f7f\u8fd9\u4e24\u6bb5\u7684\u548c\u5206\u522b\u5927\u4e8e $x$\uff0c\u4e14\u6700\u5c0f\uff0c\u8fd9\u6837\u80fd\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u4f7f\u7b2c\u4e09\u6bb5\u6700\u5927\uff09\uff0c\u518d\u6bd4\u8f83\u7b2c\u4e09\u6bb5\uff08\u7531\u4e8e\u524d\u4e24\u6bb5\u503c\u786e\u5b9a\uff0c\u7b2c\u4e09\u6bb5\u968f\u4e4b\u786e\u5b9a\uff09\u662f\u5426\u5927\u4e8e $x$\u3002\n\n\u8003\u8651\u5982\u4f55\u627e\u4ece\u4e00\u70b9\u5f00\u59cb $>x$ \u7684\u6700\u5c0f\u7684\u6bb5\uff1a\u7531\u4e8e\u4ece\u4e00\u4e2a\u70b9\u5f00\u59cb\u7684\u6570\u4e4b\u548c\u6709\u5355\u8c03\u6027\uff0c\u53ef\u4ee5\u4e8c\u5206\u3002\n\n\u8fd9\u6837\u4e00\u6765\uff0c\u590d\u6742\u5ea6\u4e3a $O(n\\log \\sum{A_i}\\log n)$\uff0c\u7531\u4e8e $n\\le10^5$ \u53ef\u4ee5\u901a\u8fc7\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n//\u8bb0\u5f97\u5f00long long\nint n,a[100005],s[100005];\nint Gem(int l,int r){\n\tif(l<=r)return (l+r)>>1;\n\tint pp=(l+r+n)>>1;\n\tif(pp<=n)return pp;\n\treturn pp%n;\n}\nint Q(int l,int r){//\u8ba1\u7b97\u73af\u4e0a\u4e00\u6bb5\u533a\u95f4\u548c\n\tif(l<=r)return s[r]-s[l-1];\n\treturn s[n]-s[l-1]+s[r]; \n}\nint D(int x){\n\tif(x==1)return n;\n\treturn x-1;\n}\nbool check(int x){\n\tfor(int i=1;i<=n;i++){\n\t\tint l=i,r=D(i);//D(i)\u6c42\u51fa\u6bd4 i \u5c0f1\u7684\u4f4d\u7f6e\uff08\u7531\u4e8e\u662f\u4e2a\u73af\uff0c\u9700\u8981\u7279\u5224\u4e00\u4e0b\uff09\n\t\twhile(l!=r){//\u4e8c\u5206\u4e0b\u4e00\u4e2a\u65ad\u70b9\n\t\t\tint mid=Gem(l,r);//\u5728\u73af\u4e0a\u627e\u4e8c\u5206\u4e2d\u70b9\n\t\t\tif(Q(i,mid)>=x)r=mid;//\u5982\u679c\u5f53\u524d\u4e00\u6bb5\u533a\u95f4\u548c\u6ee1\u8db3\u6761\u4ef6\uff0c\u53f3\u7aef\u70b9\u7f29\u8fdb\n\t\t\telse l=mid%n+1;\n\t\t}\n\t\tint ll=l%n+1,rr=D(i);\n\t\twhile(ll!=rr){//\u540c\u7406\u627e\u4e0b\u4e00\u4e2a\u65ad\u70b9\n\t\t\tint mid=Gem(ll,rr);\n\t\t\tif(Q(l%n+1,mid)>=x)rr=mid;\n\t\t\telse ll=mid%n+1;\n\t\t}\n\t\tif(Q(i,l)<x)continue;\n\t\tif(Q(l%n+1,ll)<x)continue;//\u5982\u679c\u6709\u4efb\u610f\u4e00\u4e2a\u627e\u51fa\u6765\u7684\u7b54\u6848\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff08\u65e0\u6cd5\u627e\u5230\uff09\uff0c\u5219\u5931\u8d25\uff0c\u627e\u4e0b\u4e00\u4e2a\u65ad\u70b9\n\t\tif(ll%n+1==i)continue;//\u5982\u679c\u7b2c 3 \u6bb5\u957f\u5ea6\u4e3a 0\uff0c\u5931\u8d25\n\t\tint u=Q(ll%n+1,D(i));\n\t\tif(u>=x)return 1;//\u5982\u679c\u7b2c 3 \u6bb5\u957f\u5ea6\u7b26\u5408\u6761\u4ef6\uff0c\u5219\u6210\u529f\u3002\n\t}\n\treturn 0;\n}\nsigned main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++)a[i]=read(),s[i]=s[i-1]+a[i];//\u524d\u7f00\u548c\u65b9\u4fbf\u8ba1\u7b97\u533a\u95f4\u548c\n\tint l=0,r=s[n],ans=0;\n\twhile(l<=r){//\u4e8c\u5206\u6700\u77ed\u4e00\u6bb5\u7684\u957f\u5ea6\n\t\tint mid=(l+r)>>1;\n\t\tif(check(mid))l=mid+1,ans=mid;\n\t\telse r=mid-1;\n\t}\n\tcout<<ans<<'\\n';\n}\n\n```",
        "postTime": 1637915534,
        "uid": 185864,
        "name": "TOBapNw",
        "ccfLevel": 7,
        "title": "\u9898\u89e3\u3010AT924 \u30d0\u30fc\u30e0\u30af\u30fc\u30d8\u30f3\u3011"
    },
    {
        "content": "\u574f\u4e86\uff0c\u6839\u672c\u4e0d\u4f1a\u8d2a\u5fc3\u3002\n\n\u4e8c\u5206\u5957\u4e09\u5206\u5927\u6cd5\u597d\u8036\uff01\n\n\u7531\u4e8e\u8981\u6700\u5927\u5316\u6700\u5c0f\u503c\uff0c\u6240\u4ee5\u4e8c\u5206\u6700\u5c0f\u957f\u5ea6 $mid$\u3002\n\n\u7136\u540e\u5224\u65ad\u53e6\u5916\u4e24\u6bb5\u7684\u957f\u5ea6\u662f\u5426\u53ef\u4ee5\u90fd $\\geq mid$ \u5373\u53ef\u3002\n\n\u95ee\u9898\u5c31\u53d8\u6210\u4e86\uff1a\u7ed9\u5b9a\u4e00\u6bb5\u533a\u95f4\uff0c\u6c42\u628a\u533a\u95f4\u5288\u6210\u4e24\u534a\u540e\uff0c\u957f\u5ea6\u5c0f\u7684\u90a3\u4e00\u6bb5\u7684\u6700\u5927\u957f\u5ea6\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u8fd9\u662f\u4e2a\u51f8\u51fd\u6570\u3002\n\n\u4e09\u5206\u5373\u53ef\u3002\n\n\u603b\u4f53\u590d\u6742\u5ea6 $O(\\log\\sum A\\cdot n\\cdot \\log n)$\u3002\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n\n#define N 200010\n#define int long long\n\nint n,m;\nint a[N];\nint pre[N];\n\nint checkcheck(int L,int R)\n{\n\tint l = L,r = R - 1,res = 0;\n\twhile(l <= r)\n\t{\n\t\tint mid1 = l + (r - l) / 3;\n\t\tint mid2 = r - (r - l) / 3;\n\t\tint t1 = std::min(pre[mid1] - pre[L - 1],pre[R] - pre[mid1]);\n\t\tint t2 = std::min(pre[mid2] - pre[L - 1],pre[R] - pre[mid2]);\n\t\tif(t1 <= t2)\n\t\t{\n\t\t\tres = std::max(res,t2);\n\t\t\tl = mid1 + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tres = std::max(res,t1);\n\t\t\tr = mid2 - 1;\n\t\t}\n\t}\n\treturn res;\n}\n\nbool check(int mid)\n{\n//\tprintf(\"mid = %lld\\n\",mid);\n\tint r = 0,now = 0;\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\twhile(r < m && now < mid)\n\t\t\tnow += a[++r];\n\t\tif(now >= mid && i + n - 1 - r >= 2)\n\t\t{\n\t\t\tif(checkcheck(r + 1,i + n - 1) >= mid)\n\t\t\t\treturn 1;\n\t\t}\n\t\tnow -= a[i];\n\t}\n\treturn 0;\n}\n\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tm = n << 1;\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tscanf(\"%lld\",&a[i]);\n\t\ta[i + n] = a[i];\n\t}\n\tfor(int i = 1;i <= m;i++)\n\t\tpre[i] = pre[i - 1] + a[i];\n\tint l = 0,r = 1e14,ans = 0;\n\twhile(l <= r)\n\t{\n\t\tint mid = (l + r) >> 1;\n\t\tif(check(mid))\n\t\t{\n\t\t\tans = mid;\n\t\t\tl = mid + 1;\n\t\t}\n\t\telse\n\t\t\tr = mid - 1;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1677637482,
        "uid": 371968,
        "name": "ningago",
        "ccfLevel": 4,
        "title": "JOI2014 ho3"
    },
    {
        "content": "[\u5148\u5ba3\u4f20\u4e00\u6ce2\u535a\u5ba2\uff08\u9003](https://waautomaton.tk/2018/08/12/loj-2758-%E9%A2%98%E8%A7%A3/)\n\n#### \u9898\u89e3\n\n&emsp;&emsp;\u5957\u8def\u9898\uff0c\u9996\u5148\u5148\u4e8c\u5206\u7b54\u6848\uff0c\u7136\u540e\u679a\u4e3e\u7b2c\u4e00\u5200\u5207\u53e3\uff0c\u8d2a\u5fc3\u627e\u51fa\u7b2c\u4e8c\u5200\u548c\u7b2c\u4e09\u5200\u7684\u4f4d\u7f6e\uff0c\u5224\u662f\u5426\u5408\u6cd5\u5373\u53ef\uff0c\u7531\u4e8e\u540e\u4e24\u5200\u4f4d\u7f6e\u662f\u5355\u8c03\u53d8\u5316\u7684\u6240\u4ee5\u5355\u6b21check\u590d\u6742\u5ea6$O(n)$\uff0c\u603b\u590d\u6742\u5ea6$O(n \\log n)$\n\n#### \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\ntypedef unsigned long long ULL;\n\ntemplate <size_t _I_Buffer_Size = 1 << 23, size_t _O_Buffer_Size = 1 << 23>\nstruct IO_Tp\n{\n    //\u8fd9\u662f\u8bfb\u5165\u4f18\u5316\u677f\u5b50\uff0c\u4e3a\u4e86\u9605\u8bfb\u4f53\u9a8c\u6b64\u90e8\u5206\u5185\u5bb9\u7701\u7565\u3002\n};\n IO_Tp<> IO;\nconst int maxn=3*100000;\nint a[maxn+10];\nLL sum[maxn+10];\n\tint n;\nLL calc(int l,int r)\n{\n\tif (l<=r) return sum[r]-sum[l];\n\telse return 0;\n}\nbool check(LL mid)\n{\n\tint p1=0,p2=0,p3=0;\n\tfor(p1=0; p1<2*n; ++p1) {\n\t\twhile(p2<=3*n && calc(p1,p2)<mid) ++p2;\n\t\twhile(p3<=3*n && calc(p2,p3)<mid) ++p3;\n\t\tif (p3>3*n) return false;\n\t\tif (calc(p3,p1+n)>=mid) return true;\n\t}\n\treturn false;\n}\nint main()\n{\n\tiopen();\n\tIO>>n;\n\tfor(int i=1; i<=n; ++i) {\n\t\tIO>>a[i];\n\t\tsum[i]=sum[i-1]+a[i];\n\t}\n\tfor(int i=1; i<=n; ++i) {\n\t\ta[n+i]=a[i];\n\t\tsum[n+i]=sum[n+i-1]+a[n+i];\n\t}\n\tfor(int i=n+1; i<=2*n; ++i) {\n\t\ta[n+i]=a[i];\n\t\tsum[n+i]=sum[n+i-1]+a[n+i];\n\t}\n\tLL l=0,r=sum[n];\n\twhile(l<r) {\n\t\tLL mid=(l+r+1)/2;\n\t\tif (check(mid)) l=mid;\n\t\telse r=mid-1;\n\t}\n\tIO<<r<<'\\n';\n    return 0;\n}\n\n\n\n\n```\n\n",
        "postTime": 1542973820,
        "uid": 39219,
        "name": "WAAutoMaton",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT924 \u3010\u30d0\u30fc\u30e0\u30af\u30fc\u30d8\u30f3\uff08Baumkuchen\uff09\u3011"
    }
]
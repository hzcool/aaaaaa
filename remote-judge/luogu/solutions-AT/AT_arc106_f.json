[
    {
        "content": "## $\\text{Solution 1}$ \u751f\u6210\u6cd5\u8ba1\u6570\n\n\u5b98\u65b9\u9898\u89e3\u91c7\u7528\u7684\u65b9\u6cd5\u3002\n\n\u9996\u5148\u53ef\u4ee5\u53d1\u73b0\u53ea\u6709\u5f53 $\\sum d_i \\ge 2(n - 1)$ \u65f6\u6709\u89e3\u3002\n\n\u968f\u540e\u8003\u8651\u5982\u4f55\u751f\u6210\u6240\u6709\u53ef\u80fd\u7684\u65b9\u6848\u3002\u6211\u4eec\u79f0\u4e00\u4e2a\u8054\u901a\u7684\u5b50\u56fe\u4e3a\u4e00\u4e2a\u5206\u91cf\uff0c\u6700\u5f00\u59cb\u6709 $n$ \u4e2a\u5206\u91cf\u3002\n\u6700\u5f00\u59cb\u5728\u6bcf\u4e2a\u5206\u91cf\u4e0a\u9009\u53d6\u4e00\u4e2a\u7279\u6b8a\u70b9\u3002\u968f\u540e\u6309\u5982\u4e0b\u65b9\u5f0f\u64cd\u4f5c\uff1a\n\n- \u5c06\u5206\u91cf\u6570\u91cf\u51cf\u5c0f\u5230 $2$\u3002\n 1. \u9009\u62e9\u4e00\u4e2a\u975e\u7279\u6b8a\u70b9 $a$\u3002\n 2. \u9009\u62e9\u4e00\u4e2a\u4e0d\u4e0e\u70b9 $a$ \u4f4d\u4e8e\u540c\u4e00\u5206\u91cf\u4e2d\u7684\u7279\u6b8a\u70b9 $b$\u3002\n 3. \u8fde\u63a5 $a,b$\u3002\u65b0\u5206\u91cf\u7684\u7279\u6b8a\u70b9\u662f\u5176\u4e2d\u4e00\u4e2a\u8ddd\u79bb $a,b$ \u6700\u8fd1\u7684\u53ef\u8fde\u8fb9\u7684\u70b9\u3002\n- \u8fde\u63a5\u6700\u540e\u7684\u4e24\u4e2a\u5206\u91cf\u4e0a\u7684\u7279\u6b8a\u70b9\u3002\n\n\u6700\u5f00\u59cb\u9009\u62e9\u7279\u6b8a\u70b9\u7684\u65b9\u6848\u6570\u662f $\\prod_{i=1}^n d_i$\u3002\u8bb0 $S = \\sum_{i=1}^n d_i$\uff0c\u7b2c $i$ \u6b21\u9009\u62e9\u65f6\u975e\u7279\u6b8a\u70b9\u6570\u91cf\u4e3a $(S - n - (i-1))$ \u4e2a\uff0c\u80fd\u8fde\u63a5\u7684\u8054\u901a\u5757\u6570\u662f $(n - i)$ \u4e2a\uff0c\u81ea\u7136\u5bfc\u51fa\u4e86\u65b9\u6848\u6570\n$$\\prod_{i=1}^n d_i\\times \\prod_{i=1}^{n-2} (n - i) (S - n - (i - 1)) = \\prod_{i=1}^n d_i\\times  (n - 1)!\\times \\prod_{i=0}^{n-3} (S - n - i) $$\n\n\u8003\u8651\u751f\u6210\u65b9\u5f0f\uff0c\u6211\u4eec\u53d1\u73b0\u540c\u4e00\u68f5\u6811\u4f1a\u4ee5\u4e0d\u540c\u7684\u52a0\u8fb9\u987a\u5e8f\u5728\u7b54\u6848\u4e2d\u88ab\u7edf\u8ba1 $(n-1)!$ \u6b21\uff0c\u56e0\u6b64\u6700\u7ec8\u7b54\u6848\u4e3a\n$$\\prod_{i=1}^n d_i\\times \\prod_{i=0}^{n-3} (S - n - i) $$\n\n## $\\text{Solution 2}$ \u751f\u6210\u51fd\u6570\n\n\u9996\u5148\u56fa\u5b9a\u6bcf\u4e2a\u70b9 $i$ \u5728\u6700\u7ec8\u751f\u6210\u7684\u6811\u4e2d\u7684\u5ea6\u6570 $r_i$\u3002\n\n\u7531 prufer \u5e8f\u5217\u5bfc\u51fa\u7ed3\u8bba\uff0c\u4e00\u68f5\u6ee1\u8db3\u4e0a\u8ff0\u5ea6\u6570\u6761\u4ef6\u7684\u6811\u7684\u8ba1\u6570\u662f\n$$\\frac{(n - 2)!}{ \\prod_{i=1}^n (r_i - 1)! }$$\n\n\u8bc1\u660e\u8003\u8651\u8ba1\u6570 prufer \u5e8f\u5217\uff0c\u5143\u7d20 $i$ \u5728\u5176\u4e2d\u51fa\u73b0\u4e86 $r_i - 1$ \u6b21\u3002\n\n\u6bcf\u4e2a\u70b9\u5728\u8fde\u63a5\u65f6\u662f\u6709\u5e8f\u7684\uff0c\u56e0\u6b64\u5728\u5ea6\u6570\u56fa\u5b9a\u4e3a $r$ \u7684\u60c5\u51b5\u4e0b\uff0c\u8d21\u732e\u662f\n$$\\frac{(n - 2)!}{ \\prod_{i=1}^n (r_i - 1)! }\\times \\prod_{i=1}^n A_{d_i}^{r_i} $$\n\n\u53ef\u4ee5\u53d1\u73b0 $\\sum r_i = 2(n - 1)$\u3002\u56e0\u6b64\u4e0d\u59a8\u4ece\u5377\u79ef\u7684\u89d2\u5ea6\u5165\u624b\uff0c\u679a\u4e3e $r_i$ \u7684\u53d6\u503c\u3002\n\n\u53d1\u73b0 $(n - 2)!$ \u662f\u6240\u6709\u53ef\u80fd\u90fd\u4f1a\u8d21\u732e\u7684\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u751f\u6210\u5269\u4f59\u90e8\u5206\u5373\u53ef\u3002\n\n\u8bbe $F_i(x)$ \u4e3a\u70b9 $i$ \u5bf9\u7b54\u6848\u7684\u8d21\u732e\u7684\u751f\u6210\u51fd\u6570\uff0c\u6709\n\n$$\\begin{aligned}\n\nF_i(x) &= \\sum_{k=0}^{\\infty} \\frac{A_{d_i}^k}{(k - 1)!}x^k\n\\\\ & = \\sum_{k=0}^{\\infty} \\binom{d_i} k k \\ x^k\n\\\\ & =  d_i \\sum_{k=1}^{\\infty} \\binom{d_i - 1} {k - 1}\\ x^k\n\\\\ & = d_i x \\sum_{k=0}^{\\infty} \\binom{d_i - 1} {k} \\ x^k\n\\\\ & = d_i x (1 + x)^{d_i - 1}\n\\end{aligned}$$\n\n\u53ef\u4ee5\u5199\u51fa\u7b54\u6848\n$$\\begin{aligned}\n& (n - 2)!\\times [x^{2(n-1)}] \\prod_{i=1}^nF_i(x)\n\\\\ = \\ & (n - 2)!\\times [x^{2(n-1)}] \\prod_{i=1}^n d_i x (1 + x)^{d_i - 1}\n\\\\ = \\ & (n - 2)!\\times\\prod_{i=1}^n d_i  \\times [x^{n - 2}] \\prod_{i=1}^n  (1 + x)^{d_i - 1}\n\\end{aligned}$$\n\n\u8bb0 $S = \\sum_{i=1}^n d_i$\uff0c\u6709\n\n$$\\begin{aligned}\n& (n - 2)!\\times\\prod_{i=1}^n d_i  \\times [x^{n - 2}] \\prod_{i=1}^n  (1 + x)^{d_i - 1}\n\\\\ = \\ & (n - 2)!\\times\\prod_{i=1}^n d_i  \\times [x^{n - 2}] (1 + x)^{S - n}\n\\\\ = \\ & (n - 2)!\\times\\prod_{i=1}^n d_i  \\times \\binom{S - n}{n-2}\n\\\\ = \\ & \\prod_{i=1}^n d_i \\times (S - n)^{\\underline{n - 2}}\n\\\\ = \\ & \\prod_{i=1}^n d_i\\times \\prod_{i=0}^{n-3} (S - n - i)\n\\end{aligned}$$\n\n\u4e24\u79cd\u505a\u6cd5\u5f97\u5230\u4e86\u76f8\u540c\u7684\u7b54\u6848\u3002\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$\u3002\n\n\u4e2a\u4eba\u8ba4\u4e3a $\\text{Solution 2}$ \u66f4\u7b80\u5355\u6613\u61c2\u4e00\u4e9b\u3002\n\n$\\text{code : }$\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std; \n#define rep(i,s,t) for (register int i = (s), i##_ = (t) + 1; i < i##_; ++ i)\nconst int mod = 998244353;\nint n, prod = 1, sum, tmp;\nsigned main() {\n    ios::sync_with_stdio(false), cin.tie(0), cout.tie(0);\n    cin >> n; \n    rep(i,1,n) {\n        cin >> tmp; \n        prod = 1ll * prod * tmp % mod, sum += tmp;\n        if (sum >= mod) sum -= mod;\n    }\n    rep(i,0,n-3) prod = 1ll * prod * (sum - n - i) % mod;\n    cout << prod << '\\n';\n}\n```",
        "postTime": 1670756493,
        "uid": 631791,
        "name": "joke3579",
        "ccfLevel": 0,
        "title": "ARC106F \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u4f20\u9001\u95e8\uff1a[[ARC106F] Figures](https://www.luogu.com.cn/problem/AT_arc106_f)\n\n> \u7ec4\u5408\u610f\u4e49\u5929\u5730\u706d\uff0c\u4ee3\u6570\u63a8\u5bfc\u4fdd\u5e73\u5b89\u3002\u2014\u2014tiger0133\n\n## \u601d\u8def\n\n\u8003\u8651 prufer \u5e8f\u5217\uff0c\u6211\u4eec\u5047\u8bbe\u7b2c $i$ \u4e2a\u70b9\u7684\u5728 prufer \u5e8f\u5217\u4e0a\u51fa\u73b0\u7684\u6b21\u6570\u4e3a $d_i$\uff0c\u5219\u53ef\u4ee5\u5199\u51fa\u7b54\u6848\uff1a\n\n$$\\sum_{\\sum d_i = n - 2} {n - 2 \\choose d_1, d_2, \\cdots, d_n} \\times \\prod_{i = 1} ^ n {a_i} ^ {\\underline{d_i + 1}}$$\n\n\u7531\u4e8e\u6bcf\u4e2a\u70b9\u4e2d\u7684 $a_i$ \u4e2a\u5b54\u4e92\u4e0d\u76f8\u540c\uff0c\u6211\u4eec\u8003\u8651\u4f7f\u7528 EGF \u6765\u8ba1\u6570\uff0c\u6240\u4ee5\u7b54\u6848\u53ef\u4ee5\u5199\u4f5c\uff1a\n\n$$\\left[ \\dfrac{x ^ {n - 2}}{(n - 2)!} \\right] \\prod_{i = 1} ^ n \\sum_{j = 0} ^ {\\infty} {a_i} ^ {\\underline{j + 1}} \\times \\dfrac{x ^ j}{j!}$$\n\n$$= \\left[ \\dfrac{x ^ {n - 2}}{(n - 2)!} \\right] \\prod_{i = 1} ^ n \\sum_{j = 0} ^ {\\infty} \\dfrac{a_i ! \\times x ^ j}{(a_i - j - 1)! \\times j!}$$\n\n$$= \\left[ \\dfrac{x ^ {n - 2}}{(n - 2)!} \\right] \\prod_{i = 1} ^ n a_i \\times \\sum_{j = 0} ^ {\\infty} \\dfrac{(a_i - 1)! \\times x ^ j}{(a_i - j - 1)! \\times j!}$$\n\n$$= \\left[ \\dfrac{x ^ {n - 2}}{(n - 2)!} \\right] \\prod_{i = 1} ^ n a_i \\times \\sum_{j = 0} ^ {\\infty} {a_i - 1 \\choose j} x ^ j$$\n\n\u6839\u636e\u4e8c\u9879\u5f0f\u5b9a\u7406\uff1a\n\n$$\\left[ \\dfrac{x ^ {n - 2}}{(n - 2)!} \\right] \\prod_{i = 1} ^ n a_i \\times \\sum_{j = 0} ^ {\\infty} {a_i - 1 \\choose j} x ^ j$$\n\n$$= \\left[ \\dfrac{x ^ {n - 2}}{(n - 2)!} \\right] \\prod_{i = 1} ^ n a_i \\times {(x + 1)} ^ {a_i - 1}$$\n\n$$= \\left[ \\dfrac{x ^ {n - 2}}{(n - 2)!} \\right] {(x + 1)} ^ {\\sum (a_i - 1)} \\times \\prod_{i = 1} ^ n a_i$$\n\n\u6839\u636e\u4e8c\u9879\u5f0f\u5b9a\u7406\uff0c\u751f\u6210\u51fd\u6570\u7b2c $n - 2$ \u9879\u7684\u7cfb\u6570\u4e3a\uff1a\n\n$${\\sum_{i = 1}^n (a_i - 1) \\choose n - 2}$$\n\n\u6240\u4ee5\u7b54\u6848\u4e3a\uff1a\n\n$${\\sum_{i = 1}^n (a_i - 1) \\choose n - 2} \\times (n - 2)! \\times \\prod_{i = 1}^n a_i$$\n\n$$= {\\left(\\sum_{i = 1}^n (a_i - 1)\\right)} ^ {\\underline{n - 2}} \\times \\prod_{i = 1} ^ n a_i$$",
        "postTime": 1675162601,
        "uid": 355448,
        "name": "Fido_Puppy",
        "ccfLevel": 0,
        "title": "[ARC106F] Figures"
    },
    {
        "content": "# ARC106F \u9898\u89e3\n\n\n\n## \u9898\u76ee\u5927\u610f\n\n> \u6709 $n$ \u4e2a\u70b9\uff0c\u6bcf\u4e2a\u70b9\u6709 $a_i$ \u4e2a\u5b54\uff0c\u6bcf\u6b21\u53ef\u4ee5\u9009\u62e9\u4e24\u4e2a\u4e0d\u540c\u70b9\uff0c\u8fde\u63a5\u4e24\u4e2a\u672a\u88ab\u8fde\u63a5\u8fc7\u7684\u5b54\uff0c\u6709\u591a\u5c11\u4e2d\u65b9\u6848\u4f7f\u5f97\u6700\u540e\u5f62\u6210\u4e00\u68f5\u6811\uff0c\u7b54\u6848\u5bf9 $998244353$ \u53d6\u6a21\u3002\n>\n> \u6570\u636e\u8303\u56f4\uff1a$n\\le 2\\times 10^5$\u3002\n\n\n\n## \u601d\u8def\u5206\u6790\n\n\u9996\u5148\uff0c\u6839\u636e Prufer \u5e8f\u5217\u7684\u7ed3\u8bba\uff0c\u6211\u4eec\u679a\u4e3e\u6bcf\u4e2a\u70b9\u7684\u5ea6\u6570 $d_i$\uff0c\u5bf9\u5e94\u7684\u751f\u6210\u6811\u5e94\u8be5\u6709 $\\dfrac{(n-2)!}{\\prod(d_i-1)!}$ \u4e2a\uff0c\u800c\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\uff0c\u628a\u8fb9\u8fde\u5230\u5b54\u4e0a\u7684\u65b9\u6848\u6570\u6709 $a_i^{\\underline{d_i}}=\\dfrac{a_i!}{(a_i-d_i)!}$ \u79cd\uff0c\u90a3\u4e48\u6211\u4eec\u5f97\u5230\u7b54\u6848\u7684\u8868\u8fbe\u5f0f\uff1a\n$$\n\\begin{aligned}\n\\mathrm{Answer}\n&=\\sum_{\\sum d_i=2n-2}\\dfrac{(n-2)!}{\\prod(d_i-1)!}\\times \\prod\\dfrac{a_i!}{(a_i-d_i)!}\\\\\n&=\\sum_{\\sum d_i=2n-2}\\dfrac{(n-2)!}{\\prod(d_i-1)!}\\times \\dfrac{\\prod a_i!}{\\prod(a_i-d_i)!}\n\\end{aligned}\n$$\n\u6ce8\u610f\u5230\u5206\u5b50\u975e\u5e38\u6709\u6f5c\u529b\u5199\u6210\u7ec4\u5408\u6570\u7684\u5f62\u5f0f\uff0c\u4e8e\u662f\u7a0d\u4f5c\u53d8\u5f62\u5f97\u5230\uff1a\n$$\n\\begin{aligned}\n\\mathrm{Answer}\n&=\\sum_{\\sum d_i=2n-2}\\dfrac{(n-2)!}{\\prod(d_i-1)!}\\times \\dfrac{\\prod a_i!}{\\prod(a_i-d_i)!}\\\\\n&=(n-2)!\\times\\dfrac{\\prod a_i!}{\\prod(a_i-1)!}\\times\\sum_{\\sum d_i=2n-2} \\prod \\dfrac{(a_i-1)!}{(d_i-1)!(a_i-d_i)!}\\\\\n&=(n-2)!\\times\\prod a_i\\times\\sum_{\\sum d_i=2n-2} \\prod \\binom{a_i-1}{d_i-1}\n\\end{aligned}\n$$\n\u6ce8\u610f\u5230 $d_i-1\\in[0,a_i-1]$\uff0c\u56e0\u6b64\u6700\u540e\u90a3\u4e2a\u6c42\u548c\u53f7\u91cc\u7684\u4e1c\u897f\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u591a\u5143\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\uff0c\u8bb0 $\\sum a_i=S$\uff0c\u90a3\u4e48\u5f97\u5230\uff1a\n$$\n\\begin{aligned}\n\\mathrm{Answer}\n&=(n-2)!\\times\\prod a_i\\times\\sum_{\\sum d_i=2n-2} \\prod \\binom{a_i-1}{d_i-1}\\\\\n&=(n-2)!\\times\\prod a_i\\times\\binom{S-n}{n-2}\\\\\n&=\\prod a_i\\times(S-n)^{\\underline{n-2}}\n\\end{aligned}\n$$\n\u5224\u65ad $S\\ge 2n-2$ \u540e\u66b4\u529b\u8ba1\u7b97\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n)$\u3002\n\n\n\n## \u4ee3\u7801\u5448\u73b0\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int MAXN=2e5+1,MOD=998244353;\nint a[MAXN];\nsigned main() {\n\tint n,sum=0,ans=1;\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;++i) scanf(\"%lld\",&a[i]),sum+=a[i];\n\tif(sum<2*n-2) { puts(\"0\"); return 0; }\n\tfor(int i=0;i<n-2;++i) ans=(sum-n-i)%MOD*ans%MOD;\n\tfor(int i=1;i<=n;++i) ans=ans*a[i]%MOD;\n\tprintf(\"%lld\\n\",ans);\n}\n```\n\n",
        "postTime": 1684889190,
        "uid": 539618,
        "name": "DaiRuiChen007",
        "ccfLevel": 6,
        "title": "ARC106F \u9898\u89e3"
    },
    {
        "content": "\u5199\u5728\u524d\u9762\u7684\u8bdd\uff1a\u7531\u4e8e\u672c\u4eba\u975e\u5e38\u83dc\uff0c\u672c\u7bc7\u9898\u89e3\u53ef\u80fd\u6709\u758f\u6f0f\u751a\u81f3\u8c2c\u8bef\u4e4b\u5904\uff0c\u8bf7\u5927\u4f6c\u8f7b\u55b7\u3002\n\n\u9898\u610f\uff1a\u6709 $m$ \u4e2a\u70b9\uff0c\u6bcf\u4e2a\u70b9\u6709 $d_i$ \u4e2a\u63a5\u53e3\uff0c\u6bcf\u4e2a\u63a5\u53e3\u4e24\u4e24\u4e0d\u540c\uff0c\u4e00\u4e2a\u63a5\u53e3\u53ea\u80fd\u8fde\u4e00\u6761\u8fb9\u3002\u6c42\u751f\u6210\u6811\u7684\u65b9\u6848\u6570\u3002\n\n\u9996\u5148\u6839\u636e prufer \u5e8f\u5217\u7684\u7ecf\u5178\u7ed3\u8bba\u4f1a\u53d1\u73b0\u6811\u7684\u5f62\u6001\u5e94\u8be5\u662f $\\sum\\limits_{r}\\dfrac{(m-2)!}{\\prod(r_i-1)!}$\uff0c\u5176\u4e2d $r$ \u662f\u6bcf\u4e2a\u70b9\u5728\u751f\u6210\u6811\u4e0a\u7684\u5ea6\u6570\u3002\u7136\u540e\u4e58\u4e0a\u63a5\u53e3\u7684\u65b9\u6848\u4f1a\u5f97\u5230\uff1a\n$$\n\\begin{aligned}\n&\\sum\\limits_{r}\\dfrac{(m-2)!}{\\prod(r_i-1)!}\\prod\\limits_{i}A_{d_i}^{r_i}\\\\\n=&\\sum\\limits_{r}(m-2)!\\prod\\limits_{i}\\frac{A_{d_i}^{r_i}}{(r_i-1)!}\n\\end{aligned}\n$$\n\u53d1\u73b0\u524d\u534a\u90e8\u5206\u662f\u5b9a\u7684\uff0c\u6c42\u540e\u9762\u90a3\u4e00\u5806\u7684\u751f\u6210\u51fd\u6570\u5982\u4e0b\uff1a\n$$\n\\begin{aligned}\nF_i(x)=&\\sum\\limits_{k=1}\\frac{A_{d_i}^{k}}{(k-1)!}x^k\\\\\n=&\\sum\\limits_{k=1}\\frac{d_i!}{(d_i-k)!(k-1)!}x^k\\\\\n=&d_i\\sum\\limits_{k=1}\\frac{(d_i-1)!}{(d_i-k)!(k-1)!}x^k\\\\\n=&d_i\\sum\\limits_{k=1}\\binom{d_i-1}{k-1}x^k\\\\\n=&d_ix\\sum\\limits_{k=0}\\binom{d_i-1}{k}x^{k}\\\\\n=&d_ix(1+x)^{d_i-1}\n\\end{aligned}\n$$\n\u7136\u540e\u7b54\u6848\u5c31\u662f\uff1a\n$$\n\\begin{aligned}\n&(m-2)!\\prod\\limits_{i=1}F_{i}(x)\\\\\n=&(m-2)!\\prod\\limits_{i=1}d_ix(1+x)^{d_i-1}\\\\\n=&((m-2)!x^{m}\\prod\\limits_{i}d_i)(1+x)^{\\sum d_i-m}\n\\end{aligned}\n$$\n\u4e2d $2(m-1)$ \u6b21\u9879\u7684\u7cfb\u6570\u3002\u5206\u6790\u4e00\u4e0b\uff0c\u524d\u9762\u4e00\u5806\u5df2\u7ecf\u5b9a\u4e0b\u6765\u4e86\uff0c\u800c\u4e14\u7531\u4e8e\u6709\u4e2a $x^m$\uff0c\u95ee\u9898\u8f6c\u5316\u6210\u6c42 $(1+x)^{\\sum d_i-m}$ \u7684 $m-2$ \u6b21\u9879\u7cfb\u6570\u3002\u663e\u7136\u7b54\u6848\u7b49\u4e8e $\\binom{-m+\\sum d_i}{m-2}$\uff0c\u66b4\u529b\u8ba1\u7b97\u5373\u53ef\u3002\u6700\u540e\u518d\u4e58\u4e0a\u524d\u9762\u7684 $(m-2)!\\prod\\limits_{i}d_i$ \u5373\u53ef\u5f97\u5230\u7b54\u6848\uff0c\u590d\u6742\u5ea6\u663e\u7136\u7ebf\u6027\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n//#define feyn\n#define int long long\nusing namespace std;\nconst int mod=998244353;\ninline void read(int &wh){\n\twh=0;char w=getchar();int f=1;\n\twhile(w<'0'||w>'9'){if(w=='-')f=-1;w=getchar();}\n\twhile(w<='9'&&w>='0'){wh=wh*10+w-'0';w=getchar();}\n\twh*=f;return;\n}\n\nint m,sum,in,ans=1;\n\nsigned main(){\n\t\n\t#ifdef feyn\n\tfreopen(\"in.txt\",\"r\",stdin);\n\t#endif\n\t\n\tread(m);\n\tfor(int i=1;i<=m;i++)read(in),sum+=in,ans=ans*in%mod;\n\tif(sum<(m-1)*2)return puts(\"0\"),0;sum%=mod;\n\tfor(int i=0;i<=m-3;i++)ans=ans*(sum-m-i)%mod;\n\tprintf(\"%lld\\n\",ans);\n\t\n\treturn 0;\n}\n```",
        "postTime": 1673183385,
        "uid": 302383,
        "name": "Feyn",
        "ccfLevel": 0,
        "title": "AT_arc106_f"
    },
    {
        "content": "\u665a\u81ea\u4e60\u7684\u65f6\u5019\u80e1\u51fa\u6765\u7684\u505a\u6cd5\uff08\uff08\uff08\n\n\u9996\u5148\u4f60\u4f1a\u53d1\u73b0\u9898\u76ee\u7b49\u4ef7\u4e8e\u6c42 $\\sum\\limits_{(\\sum\\limits_{i=1}^n a_i) = 2(n-1) \\land \\forall i \\in [1,n], 1 \\le a_i \\le d_i} \\prod\\limits_{i=1}^n \\dfrac{d_i!}{(d_i - a_i)!}$\u3002\u7ffb\u8bd1\u4e00\u4e0b\u5c31\u662f\u679a\u4e3e\u6bcf\u4e2a\u70b9\u7684\u5ea6\u6570 $a_i$\uff08\u4e00\u4e2a\u7ed3\u8bba\u662f\u5f53\u5ea6\u6570\u603b\u548c $= 2(n-1)$ \u5e76\u4e14\u6bcf\u4e2a\u70b9\u7684\u5ea6\u6570\u90fd\u4e3a\u6b63\u6574\u6570\u65f6\u4e00\u5b9a\u80fd\u6784\u9020\u51fa\u5408\u6cd5\u7684\u6811\uff09\uff0c\u7136\u540e\u4e58\u4e0a\u5bf9\u5e94\u7684\u6709\u5e8f\u9009\u62e9\u70b9\u5185\u7684\u6d1e\u7684\u65b9\u6848\u3002\n\n\u4f60\u4f1a\u53d1\u73b0\u5982\u679c\u56fa\u5b9a $a_i$\uff0c\u8fd9\u4e2a\u4e1c\u897f\u7684\u7ec4\u5408\u610f\u4e49\u662f\u628a $\\sum\\limits_{i=1}^n d_i$ \u4e2a\u6570\u5206\u6210 $n$ \u7ec4\u6bcf\u7ec4 $d_i$ \u4e2a\u6570\uff0c\u518d\u5728\u6bcf\u7ec4\u6709\u5e8f\u9009\u51fa $a_i$ \u4e2a\u6570\u3002$a_i \\ge 1$ \u6bd4\u8f83\u70e6\uff0c\u4e0d\u59a8\u6574\u4f53\u51cf $1$\uff0c\u4e5f\u5c31\u662f\u4e00\u5f00\u59cb\u6bcf\u7ec4\u5148\u9009\u4e00\u4e2a\u6570\uff0c\u8fd9\u6837\u5c31\u53d8\u6210\u4e86 $a_i \\ge 0$\u3002\u7136\u540e\u5c31\u53d1\u73b0\u53ef\u4ee5\u628a\u7ec4\u5408\u5e76\u8d77\u6765\u8003\u8651\uff0c\u5373\u7b54\u6848\u4e3a\u5148\u5728\u6bcf\u7ec4\u4e2d\u9009\u4e00\u4e2a\u6570\u518d\u5728 $\\sum\\limits_{i=1}^n (d_i - 1)$ \u4e2a\u6570\u5185\u6709\u5e8f\u9009\u62e9 $\\sum\\limits_{i=1}^n (a_i - 1) = n - 2$ \u4e2a\u6570\u7684\u65b9\u6848\u6570\uff0c\u5373 $(\\prod\\limits_{i=1}^n d_i) \\dfrac{(\\sum\\limits_{i=1}^n (d_i - 1))!}{(n-2)!}$\uff0c\u8fd9\u4e2a\u4e1c\u897f\u53ef\u4ee5 $O(n)$ \u8ba1\u7b97\u3002\n\n[code](https://atcoder.jp/contests/arc106/submissions/40727091)",
        "postTime": 1681734951,
        "uid": 275273,
        "name": "zltqwq",
        "ccfLevel": 0,
        "title": "ARC106F \u9898\u89e3"
    }
]
[
    {
        "content": "\u4f5c\u4e3a\u4e00\u9053\u9ec4\u9898\uff0c\u9898\u76ee\u672c\u8eab\u5e76\u4e0d\u96be\u3002\n\n### \u9898\u76ee\u5927\u610f\n\n\u7ed9\u4f60\u4e00\u5806\u7b26\u53f7\uff0c\u6bcf\u4e2a\u7b26\u53f7\u90fd\u6709\u7279\u6b8a\u542b\u4e49\uff0c\u6309\u89c4\u5219\u8fdb\u884c\u4e00\u987f\u64cd\u4f5c\u3002\n\n\u7406\u89e3\u9898\u610f\u540e\uff0c\u8fd8\u8981\u60f3\u5417\uff0c\u8fd9\u5c31\u662f\u6a21\u62df\u554a\uff01\u6253\u5224\u65ad\u8bed\u53e5\u5c31\u5b8c\u4e8b\u4e86\uff01\u7136\u540e\u96f6\u5206\u4e86\u3002\n\n### \u8fdb\u4e00\u6b65\u5206\u6790\n\n\u770b\u9898\u76ee\u7ffb\u8bd1\uff1a**\u628a\u6267\u884c\u65b9\u5411\u8bbe\u7f6e\u4e3a\"\u4e0a\u4e0b\u5de6\u53f3\"\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\uff08\u7c7b\u4f3c\u4e8e\u6df1\u641c\u628a\u56db\u4e2a\u65b9\u5411\uff09\u5168\u641c\u4e00\u904d\u3002**\u73b0\u5728\u660e\u767d\u4e86\uff0c\u8fd9\u9898\u53ef\u80fd\u662f\u641c\u7d22\u6a21\u62df\u7684\u7ed3\u5408\uff01\n\n\u5f53\u7b26\u53f7\u662f $?$ \u65f6\u6700\u590d\u6742\uff0c\u8981\u5411\u56db\u4e2a\u65b9\u5411\u641c\u7d22\u3002\u72b6\u6001 $x,y$ \u6539\u53d8\u3002\u6545\u641c\u7d22 $(y+dy_i,x+dx_i,z,d)$ \u5373\u53ef\u3002\n\n\u591a\u63d0\u4e00\u5634\uff0c\u4e3a\u4e86\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u9ebb\u70e6\uff0c\u5728\u5c06\u6570\u503c\u51cf $1$ \u7684\u65f6\u5019\uff0c\u5148\u589e\u52a0 $15$ \u7684\u6570\u503c\uff0c\u518d\u6a21 $16$ \u66f4\u597d\u3002\n\n### \u4ee3\u7801\u5b9e\u73b0\n\n\u6ca1\u4ec0\u4e48\u590d\u6742\u7684\u601d\u8def\uff0c\u6df1\u641c\u52a0\u6a21\u62df\u3002\u76f4\u63a5\u5c55\u793a\u4ee3\u7801\u3002\u81ea\u8ba4\u4e3a\u4ee3\u7801\u662f\u6bd4\u8f83\u6613\u61c2\u7684\u3002\n\n```cpp\n// At28 Stop\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 55\nconst int dx[5] = {0,1,-1,0,0};\nconst int dy[5] = {0,0,0,1,-1};\nint n, m;\nchar ch[N][N];\nbool vis[N][N][N][N];\n\nbool dfs(int y, int x, int z, int d)\n{\n\ty = (y + n) % n;\n\tx = (x + m) % m;\n\tif(vis[y][x][z][d]) return false;\n\tvis[y][x][z][d] = true;\n\t// \u75af\u72c2\u6253if \n\tif(ch[y][x] == '>') d = 1;\n\telse if(ch[y][x] == '<') d = 2;\n\telse if(ch[y][x] == '^') d = 4;\n\telse if(ch[y][x] == 'v') d = 3;\n\telse if(ch[y][x] == '_') {\n\t\t// \u5206\u7c7b\u8ba8\u8bba \n\t\tif(!z) d = 1;\n\t\telse d = 2;\n\t} else if(ch[y][x] == '|') {\n\t\tif(!z) d = 3;\n\t\telse d = 4;\n\t} else if(ch[y][x] == '?') {\n\t\t// \u8fd9\u91cc\u5c31\u8981\u54114\u4e2a\u65b9\u5411\u641c\u7d22\u4e86\n\t\tfor(int i = 1; i < 4; i++) {\n\t\t\tif(dfs(y + dy[i], x + dx[i], z, i)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} else if(ch[y][x] == '@') return true; // \u4e0d\u7528\u8bf4 \n\telse if(ch[y][x] == '+') {\n\t\tz++;\n\t\tz %= 16;\n\t} else if(ch[y][x] == '-') {\n\t\tz += 15;\n\t\tz %= 16;\n\t\t// \u7b49\u4ef7\u4e8e\u51cf\u4e00 \n\t} else {\n\t\tz = ch[y][x] - '0';\n\t\t// numbers\n\t}\n   // \u7d2f\u6b7b\u4e86\n}\n\nint main()\n{\n\tscanf(\"%d%d\", &n, &m);\n\tfor(int i = 0; i < n; i++)\n\t\tscanf(\"%s\", ch[i]);\n\tputs(dfs(0,0,0,1) ? \"YES\": \"NO\");\n\treturn 0;\n}\n```\n\u8bb0\u4f4f\uff1a\u641c\u7d22\u5f00\u59cb\u65f6\u72b6\u6001\u5e94\u8be5\u4e3a $(0,0,0,1)$\uff0c\u56e0\u4e3a\u5728\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u3002\n\n\u7ba1\u7406\u5458\u5927\u5927\uff0c\u6c42\u8fc7~",
        "postTime": 1627889043,
        "uid": 401929,
        "name": "CuSerCl",
        "ccfLevel": 0,
        "title": "AT28 \u505c\u6b62\u554f\u984c"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u6df1\u641c&\u6a21\u62df\u9898\u3002  \n\u9996\u5148\uff0c\u5bf9\u4e8e\u8fd9\u4e2a\u5b57\u7b26\u65b9\u9635\uff0c\u6211\u4eec\u8981\u660e\u786e\u65b9\u5411\uff1a\n```cpp\nconst int X[]={0,-1,1,0,0};\nconst int Y[]={0,0,0,-1,1};\n//               ^ v < >\n```\n\u4ee5\u53ca `dfs()` \u51fd\u6570\u7684\u53c2\u6570\uff1a`\u884c x`\u3001`\u5217 y`\u3001`\u5b58\u50a8\u5668\u503c s` \u548c`\u65b9\u5411 fx`\u3002  \n\u63a5\u7740\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u7b26\u53f7\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u4ee5\u4e0b\u4ee3\u7801\uff1a\n```cpp\nswitch(a[x][y])\n{\n\tcase '>':\n\t\tdfs(x+X[4],y+Y[4],s,4);\n\t\tbreak;\n\tcase '<':\n\t\tdfs(x+X[3],y+Y[3],s,3);\n\t\tbreak;\n\tcase '^':\n\t\tdfs(x+X[1],y+Y[1],s,1);\n\t\tbreak;\n\tcase 'v':\n\t\tdfs(x+X[2],y+Y[2],s,2);\n\t\tbreak;\n\tcase '_':\n\t\tif(s) dfs(x+X[3],y+Y[3],s,3);\n\t\telse dfs(x+X[4],y+Y[4],s,4);\n\t\tbreak;\n\tcase '|':\n\t\tif(s) dfs(x+X[1],y+Y[1],s,1);\n\t\telse dfs(x+X[2],y+Y[2],s,2);\n\t\tbreak;\n\tcase '?':\n\t\tfor(int i=1;i<=4;i++)\n\t\t{\n\t\t\tdfs(x+X[i],y+Y[i],s,i);\n\t\t}\n\t\tbreak;\n   case '@':\n      cout<<\"Yes\"<<endl;\n      exit(0);//\u5f3a\u5236\u9000\u51fa\u7a0b\u5e8f\n\tcase '.':\n\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n\t\tbreak;\n\tcase '+':\n\t\ts++;\n\t\tif(s>15) s=0;\n\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n\t\tbreak;\n\tcase '-':\n\t\ts--;\n\t\tif(s<0) s=15;\n\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n\t\tbreak;\n\tdefault://\u5269\u4e0b\u7684\u60c5\u51b5\u5c31\u662f\u6570\u5b57\n\t\ts=a[x][y]-48;\n\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n}\n```\n\u7ecf\u8fc7\u89c2\u5bdf\u548c\u8ba1\u7b97\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5b57\u7b26\u65b9\u9635\u5c31\u50cf**\u6eda\u52a8\u6761**\uff0c\u56e0\u6b64\u5728\u6bcf\u6b21\u51fd\u6570\u5f00\u5934\uff0c\u5e94\u9644\u4e0a\u5982\u4e0b\u4ee3\u7801\uff1a\n```cpp\nwhile(x<1) x+=r;\nwhile(r<x) x-=r;\nwhile(y<1) y+=c;\nwhile(c<y) y-=c;\n```\n\u5bf9\u4e8e\u53ef\u7ed3\u675f\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5224\u5b9a\u5230 `@`\uff1b\u90a3\u5bf9\u4e8e\u4e0d\u53ef\u7ed3\u675f\u7684\u5462\uff1f  \n\u5bf9\u4e8e\u4e0d\u53ef\u7ed3\u675f\uff0c\u4f60\u9700\u8981\u77e5\u9053\u4ee5\u4e0b\u51e0\u70b9\uff1a\n\n- \u90a3\u4e00\u5b9a\u662f\u4e2a\u6b7b\u5faa\u73af\uff1b\n- \u4e24\u6b21\u5728\u4f4d\u7f6e $[x,y]$ \u65f6\uff0c\u5176 $fx$ \u548c $s$ \u7684\u503c**\u4e24\u6b21\u90fd\u4e0d\u53d8**\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u8981\u5f00\u4e2a\u201c\u56db\u7ef4 `bool` \u6570\u7ec4\u201d\u6765\u5b58\u50a8\uff0c\u6bcf\u4e00\u201c\u7ef4\u201d\uff0c\u90fd\u5206\u522b\u8868\u793a\u4e00\u4e2a\u53c2\u6570\u3002\n```cpp\nbool b[25][25][20][5];//\u6bcf\u4e00\u7ef4\u5206\u522b\u4e3a\uff1ax\u3001y\u3001s \u548c fx\n```\n\u90a3\u4e48\uff0c\u6bcf\u5230\u4e00\u6b21\u51fd\u6570\uff0c\u82e5\u76ee\u524d\u8be5\u503c\u5df2\u51fa\u73b0\u8fc7\uff0c\u5219 `return`\uff1b\u5426\u5219\uff0c\u5c06\u8be5\u503c\u53d8\u4e3a `true`\u3002  \n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int X[5]={0,-1,1,0,0};\nconst int Y[5]={0,0,0,-1,1};\nint r,c;\nchar a[25][25];\nbool b[25][25][20][5];\n\nvoid dfs(int x,int y,int s,int fx)\n{\n\twhile(x<1) x+=r;\n   while(r<x) x-=r;\n   while(y<1) y+=c;\n   while(c<y) y-=c;\n   //cout<<x<<' '<<y<<' '<<s<<' '<<fx<<endl;\n\tif(b[x][y][s][fx]) return;\n\tif(a[x][y]=='@')//@ \u4e5f\u53ef\u4ee5\u7279\u5224\n\t{\n\t\tcout<<\"YES\"<<endl;\n\t\texit(0);\n\t}\n\tb[x][y][s][fx]=true;//\u6807\u8bb0\n\tswitch(a[x][y])\n\t{\n\t\tcase '>':\n\t\t\tdfs(x+X[4],y+Y[4],s,4);\n\t\t\tbreak;\n\t\tcase '<':\n\t\t\tdfs(x+X[3],y+Y[3],s,3);\n\t\t\tbreak;\n\t\tcase '^':\n\t\t\tdfs(x+X[1],y+Y[1],s,1);\n\t\t\tbreak;\n\t\tcase 'v':\n\t\t\tdfs(x+X[2],y+Y[2],s,2);\n\t\t\tbreak;\n\t\tcase '_':\n\t\t\tif(s) dfs(x+X[3],y+Y[3],s,3);\n\t\t\telse dfs(x+X[4],y+Y[4],s,4);\n\t\t\tbreak;\n\t\tcase '|':\n\t\t\tif(s) dfs(x+X[1],y+Y[1],s,1);\n\t\t\telse dfs(x+X[2],y+Y[2],s,2);\n\t\t\tbreak;\n\t\tcase '?':\n\t\t\tfor(int i=1;i<=4;i++)\n\t\t\t{\n\t\t\t\tdfs(x+X[i],y+Y[i],s,i);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '.':\n\t\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n\t\t\tbreak;\n\t\tcase '+':\n\t\t\ts++;\n\t\t\tif(s>15) s=0;\n\t\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n\t\t\tbreak;\n\t\tcase '-':\n\t\t\ts--;\n\t\t\tif(s<0) s=15;\n\t\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\ts=a[x][y]-48;\n\t\t\tdfs(x+X[fx],y+Y[fx],s,fx);\n\t}\n   //\u4e0d\u53ef\u4ee5\u56de\u6eaf\n}\n\nint main()\n{\n\tcin>>r>>c;\n\tfor(int i=1;i<=r;i++)\n\t{\n\t\tfor(int j=1;j<=c;j++)\n\t\t{\n\t\t\tcin>>a[i][j];\n\t\t}\n\t}\n\tdfs(1,1,0,4);//\u6df1\u641c\u5f00\u59cb\uff01\n\tcout<<\"NO\"<<endl;//\u6ca1\u8f93\u51fa'YES'\u5219\u8f93\u51fa'NO'\n\treturn 0;\n}\n```\n\u6700\u540e\u6709\u4e00\u70b9\u8981\u63d0\u9192\u4e00\u4e0b\uff1a**\u672b\u5c3e\u4e00\u5b9a\u8981\u6362\u884c\uff01**",
        "postTime": 1624750080,
        "uid": 400269,
        "name": "_JYqwq_",
        "ccfLevel": 0,
        "title": "AT28 \u505c\u6b62\u554f\u984c\u3000\u9898\u89e3"
    },
    {
        "content": "\u672c\u9898\u4f7f\u7528 dfs \u5c31\u884c\u4e86\u3002\n\n_upd on 2021/2/12\uff1a\u4fee\u6539\u4e86\u6392\u7248\u548c\u9a6c\u8702\u3002_\n\n### \u505a\u9898\u601d\u8def\n1. \u6253\u56db\u4e2a\u65b9\u5411\u7684\u8868\u3002\n2. \u5b9a\u4e49\u51fd\u6570 dfs \uff0c\u4f20\u5165\u56db\u4e2a\u53c2\u6570 $x,y,dir,cnt$\uff0c\u5206\u522b\u8868\u793a\u73b0\u5728\u5728\u54ea\u91cc\u3001\u54ea\u4e2a\u65b9\u5411\u3001\u5b58\u50a8\u5668\u91cc\u7684\u503c.\n3. \u5148\u7ed9 $x$ \u548c $y$ \u53d6\u6a21\uff0c\u6ce8\u610f\u53d6\u6a21\u7684\u65b9\u6cd5\u3002\u4e3a\u4e86\u9632\u6b62\u8d1f\u6570\u53d6\u6a21\uff0c\u5982\u679c\u4f60\u7684\u4e0b\u6807\u4ece $0$ \u5f00\u59cb\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 $x=(x+n)\\mod n$\uff0c\u53cd\u4e4b\u4f7f\u7528 while \u5faa\u73af\u6a21\u62df\u3002\n4. \u518d\u5224\u65ad\u4e00\u4e0b\u8fd9\u4e2a\u4f4d\u7f6e\u662f\u4e0d\u662f\u641c\u8fc7\u4e86\u3002\n5. \u7136\u540e\u5224\u4e00\u4e0b\u8fd9\u4e2a\u683c\u5b50\u662f\u4e0d\u662f $\\texttt{\"@\"}$\uff0c\u5982\u679c\u662f\uff0c\u5c31\u8f93\u51fa $\\texttt{\"YES\"}$\uff0c\u5e76`exit(0)`\u3002\n6. \u6700\u540e\u66b4\u529b\u5224\u65ad\u6bcf\u4e00\u79cd\u547d\u4ee4\uff0c\u7ee7\u7eed\u641c\u4e0b\u53bb\u3002\n7. \u4e3b\u51fd\u6570\u91cc\u8f93\u5165\u5e76\u8c03\u7528 dfs\uff0c\u5982\u679c dfs \u641c\u5b8c\u4e86\u7a0b\u5e8f\u8fd8\u6ca1\u7ed3\u675f\uff0c\u8bf4\u660e\u4e0d\u80fd\u505c\u6b62\uff08\u5982\u679c\u80fd\u505c\u4e0b\u6765\u5c31\u4f1a\u7ed3\u675f\u7a0b\u5e8f\uff09\uff0c\u8f93\u51fa $\\texttt{\"NO\"}$\uff0c\u6ce8\u610f\u6362\u884c\u3002\n\n### \u4ee3\u7801\u5b9e\u73b0\n```cpp\n#include <cstdio>\n#include <cstdlib>//\u8fd9\u91cc\u6709exit(0)\nusing namespace std;\n//                > v < ^ \u8fd9\u91cc\u548c\u9898\u76ee\u65b9\u5411\u987a\u5e8f\u4e0d\u592a\u4e00\u6837\uff0c\u4f46\u5bf9\u5e94\u597d\u5c31\u884c\u4e86\nconst int dx[]={0,0,1,0,-1},\n          dy[]={0,1,0,-1,0};\nint n,m;\nchar a[110][110];\nbool vis[110][110][110][110];//vis[x][y][dir][cnt]\u8868\u793a\u8fd9\u4e2a\u60c5\u51b5\u662f\u5426\u641c\u8fc7\nvoid dfs(int x,int y,int dir,int cnt){//\u65b9\u5411\u548c\u5b58\u50a8\u5668\u5f53\u53c2\u6570\u4f20\uff0c\u5c31\u4e0d\u7528\u56de\u6eaf\u4e86\n    while(x<1) x+=n;\n    while(n<x) x-=n;\n    while(y<1) y+=m;\n    while(m<y) y-=m;//\u7528while\u4ee3\u66ff\u53d6\u6a21\n  \tif(vis[x][y][dir][cnt]) return ;//\u5982\u679c\u8fd9\u79cd\u60c5\u51b5\u641c\u8fc7\u4e86\u76f4\u63a5return\n    if(a[x][y]=='@') puts(\"YES\"),exit(0);//\u641c\u5230\u505c\u6b62\u5c31\u7ed3\u675f\u7a0b\u5e8f\n    vis[x][y][dir][cnt]=1;//\u6807\u8bb0\u641c\u8fc7\u4e86\n    switch(a[x][y]){//\u5f00\u59cb\u66b4\u529b\u5224\u65ad\n        case '>':dfs(x+dx[1],y+dy[1],1,cnt);break;\n        case 'v':dfs(x+dx[2],y+dy[2],2,cnt);break;\n        case '<':dfs(x+dx[3],y+dy[3],3,cnt);break;\n        case '^':dfs(x+dx[4],y+dy[4],4,cnt);break;\n\t\t//\u56db\u79cd\u65b9\u5411\n        case '+':dfs(x+dx[dir],y+dy[dir],dir,(cnt+1)%16);break;\n        case '-':dfs(x+dx[dir],y+dy[dir],dir,(cnt-1+16)%16);break;\n\t\t//\u52a0\u548c\u51cf\uff0c\u5176\u4e2d\u51cf\u6cd5\u8981+16\u7684\u539f\u56e0\u662f\u9632\u6b62\u51fa\u73b0-1%16\u7684\u60c5\u51b5\n        case '|':if(cnt==0) dfs(x+dx[2],y+dy[2],2,cnt);\n                 else dfs(x+dx[4],y+dy[4],4,cnt);\n        \t\t break;\n        case '_':if(cnt==0) dfs(x+dx[1],y+dy[1],1,cnt);\n                 else dfs(x+dx[3],y+dy[3],3,cnt);\n        \t\t break;\n\t\t//\u6839\u636e\u5b58\u50a8\u7684\u503c\u786e\u5b9a\u65b9\u5411\n        case '.':dfs(x+dx[dir],y+dy[dir],dir,cnt);break;\n        case '?':for(int i=1;i<=4;i++) \n          \t\t\tdfs(x+dx[i],y+dy[i],i,cnt);\n        \t\t break;\n\t\t//?\u76f4\u63a5\u679a\u4e3e4\u79cd\u65b9\u5411\n        default:dfs(x+dx[dir],y+dy[dir],dir,a[x][y]-'0');break;\n        //\u90fd\u5bf9\u4e0d\u4e0a\u5c31\u662f\u6570\u5b57\u4e86\n    }\n    //vis[x][y][dir][cnt]=0;//\u548cAT1350\u4e00\u6837\uff0c\u4e0d\u80fd\u56de\u6eaf\uff0c\u4e0d\u7136\u4f1aTLE\n  \t//\u539f\u56e0\uff1a\u8fd9\u79cd\u72b6\u6001\u4e0d\u80fd\u505c\u6b62\u7684\u8bdd\uff0c\u540e\u9762\u518d\u641c\u5230\u8fd9\u91cc\u5c31\u4f1a\u518d\u641c\u4e00\u6b21\uff0c\u6d6a\u8d39\u5f88\u591a\u8ba1\u7b97\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u526a\u6389\u8fd9\u90e8\u5206\u7684\u679d\n}\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++) scanf(\"%s\",a[i]+1);\n    dfs(1,1,1,0);\n    puts(\"NO\");//puts\u81ea\u5e26\u6362\u884c\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5printf(\"NO\\n\")\n    return 0;\n}\n```\n### \u540e\u8bb0\n```cpp\nexit(0);\n```\n\u8fd9\u4e2a\u51fd\u6570\u5728`cstdlib`\u4e2d\uff0c\u4f5c\u7528\u662f\u76f4\u63a5\u7ed3\u675f\u7a0b\u5e8f\u3002\u5728\u8fd9\u9898\u91cc\uff0c\u5982\u679c\u641c\u5230\u80fd\u505c\u6b62\uff0c\u5c31\u4f1a\u76f4\u63a5\u7ed3\u675f\u7a0b\u5e8f\uff0c\u6839\u672c\u6ca1\u6709\u540e\u9762`puts(\"NO\")`\u7684\u4e8b\u3002",
        "postTime": 1613121751,
        "uid": 390033,
        "name": "_caiji_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT28 \u3010\u505c\u6b62\u554f\u984c\u3011"
    },
    {
        "content": "#### ~~\u6211\u53c8\u6765\u5199\u9898\u89e3\u4e86~~\n\n[\u9898\u76ee\u4f20\u9001](https://www.luogu.com.cn/problem/AT28)\n\n[\u535a\u5ba2\u98df\u7528](https://www.luogu.com.cn/blog/XJK/solution-at28)\n\n---\n### \u505a\u9898\u601d\u8def\n\u9996\u5148\u5206\u6790\u9898\u76ee\uff0c\u8fd9\u662f\u4e00\u9053\u7b80\u5355\u7684\u6a21\u62df\u9898\uff0c$R,C\u226420$\uff0c\u53ea\u6709$21$\u79cd\u60c5\u51b5\u548c$4$\u4e2a\u65b9\u5411\uff0c\u53ef\u4ee5\u4f7f\u7528dfs(\u6df1\u641c)\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528bfs(\u5e7f\u641c)\u3002\n\n**\u6ce8\u610f\uff1a\u6807\u8bb0\u70b9\u65f6\u9700\u8981\u8bb0\u5f55\u70b9\u7684\u4f4d\u7f6e\u3001\u5f53\u524d\u5b58\u50a8\u5668\u5185\u7684\u6570\u503c\u548c\u65b9\u5411** \n***\n### \u90a3\u5c31\u770b\u4ee3\u7801\u5427\n~~xjk\u51fa\u54c1\uff0c\u5fc5\u5c5e\u7cbe\u54c1~~\n\ndfs\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint dx[5]={0,-1,0,1,0};\nint dy[5]={0,0,-1,0,1};//\u56db\u4e2a\u65b9\u5411:1:\u4e0a\uff0c2:\u5de6\uff0c3:\u4e0b\uff0c4:\u53f3\nint f[25][25][20][5],n,m;//f\u6570\u7ec4\u7528\u6765\u6807\u8bb0\u5f53\u524d\u72b6\u6001\u662f\u5426\u5230\u8fbe\u8fc7\nchar a[25][25];//a\u6570\u7ec4\u7528\u6765\u8bb0\u5f55Defunge\u7a0b\u5e8f\u5b57\u7b26\n\nbool dfs(int x,int y,int z,int c)//x,y\u8868\u793a\u4f4d\u7f6e\uff0cz\u8868\u793a\u6570\u503c\uff0cc\u8868\u793a\u65b9\u5411\n{\n\tif(x==0)//\u9632\u6b62\u8d8a\u754c\n\t\tx=n;\n\tif(x>n)//\u9632\u6b62\u8d8a\u754c\n\t\tx=1;\n\tif(y==0)//\u9632\u6b62\u8d8a\u754c\n\t\ty=m;\n\tif(y>m)//\u9632\u6b62\u8d8a\u754c\n\t\ty=1;\n\tif(z==-1)//\u9632\u6b62\u8d8a\u754c\n\t\tz=15;\n\tif(z==16)//\u9632\u6b62\u8d8a\u754c\n\t\tz=0;\n\tif(f[x][y][z][c])//\u5982\u679c\u4e4b\u524d\u6709\u8fc7\u8fd9\u79cd\u72b6\u6001\u5c31\u8bf4\u660e\u6709\u6b7b\u5faa\u73af\n\t\treturn false;\n\tf[x][y][z][c]=1;//\u6807\u8bb0\n\tswitch(a[x][y])//\u5224\u65ad21\u79cd\u547d\u4ee4\n\t{\n\t\tcase '<':\n\t\t\treturn dfs(x+dx[2],y+dy[2],z,2);//\u5411\u5de6\n\t\tcase '>':\n\t\t\treturn dfs(x+dx[4],y+dy[4],z,4);//\u5411\u53f3\n\t\tcase '^':\n\t\t\treturn dfs(x+dx[1],y+dy[1],z,1);//\u5411\u4e0a\n\t\tcase 'v':\n\t\t\treturn dfs(x+dx[3],y+dy[3],z,3);//\u5411\u4e0b\n\t\tcase '_':\n\t\t\tif(z)//\u5982\u679c\u5b58\u50a8\u5668\u5b58\u50a8\u7684\u6570\u5b57\u4e0d\u662f0\n\t\t\t\treturn dfs(x+dx[2],y+dy[2],z,2);//\u5411\u5de6\n\t\t\telse\n\t\t\t\treturn dfs(x+dx[4],y+dy[4],z,4);//\u5411\u53f3\n\t\tcase '|':\n\t\t\tif(z)//\u5982\u679c\u5b58\u50a8\u5668\u5b58\u50a8\u7684\u6570\u5b57\u4e0d\u662f0\n\t\t\t\treturn dfs(x+dx[1],y+dy[1],z,1);//\u5411\u4e0a\n\t\t\telse\n\t\t\t\treturn dfs(x+dx[3],y+dy[3],z,3);//\u5411\u4e0b\n\t\tcase '?':\n\t\t\treturn (dfs(x+dx[1],y+dy[1],z,1)||dfs(x+dx[2],y+dy[2],z,2)||dfs(x+dx[3],y+dy[3],z,3)||dfs(x+dx[4],y+dy[4],z,4));//\u56db\u4e2a\u65b9\u5411\n\t\tcase '.':\n\t\t\treturn dfs(x+dx[c],y+dy[c],z,c);//\u72b6\u6001\u4e0d\u53d8\n\t\tcase '@':\n\t\t\treturn true;//\u7a0b\u5e8f\u7ed3\u675f\n\t\tcase '0':\n\t\tcase '1':\n\t\tcase '2':\n\t\tcase '3':\n\t\tcase '4':\n\t\tcase '5':\n\t\tcase '6':\n\t\tcase '7':\n\t\tcase '8':\n\t\tcase '9':\n\t\t\treturn dfs(x+dx[c],y+dy[c],a[x][y]-48,c);//\u6570\u5b57\n\t\tcase '+':\n\t\t\treturn dfs(x+dx[c],y+dy[c],z+1,c);//\u6570\u503c\u52a0\u4e00\n\t\tcase '-':\n\t\t\treturn dfs(x+dx[c],y+dy[c],z-1,c);//\u6570\u503c\u51cf\u4e00\n\t}\n}\n\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tcin>>a[i][j];\n\tcout<<((dfs(1,1,0,4))?\"YES\":\"NO\")<<endl;//dfs\u8fd4\u56de\u503c\u4e3atrue\u8bf4\u660e\u53ef\u4ee5\u7ed3\u675f\u7a0b\u5e8f\uff0c\u8f93\u51faYES\uff0c\u5426\u5219\u8bf4\u660e\u4e0d\u80fd\u7ed3\u675f\u7a0b\u5e8f\uff0c\u8f93\u51faNO\n\treturn 0;\n}\n```\nbfs\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint dx[5]={0,-1,0,1,0};\nint dy[5]={0,0,-1,0,1};//\u56db\u4e2a\u65b9\u5411:1:\u4e0a\uff0c2:\u5de6\uff0c3:\u4e0b\uff0c4:\u53f3\nint f[25][25][20][5],n,m,h,t;//f\u6570\u7ec4\u7528\u6765\u6807\u8bb0\u5f53\u524d\u72b6\u6001\u662f\u5426\u5230\u8fbe\u8fc7\nchar a[25][25];//a\u6570\u7ec4\u7528\u6765\u8bb0\u5f55Defunge\u7a0b\u5e8f\u5b57\u7b26\nint x[100005],y[100005],s[100005],c[100005];//x,y\u8868\u793a\u4f4d\u7f6e\uff0cs\u8868\u793a\u6570\u503c\uff0cc\u8868\u793a\u65b9\u5411\n\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tcin>>a[i][j];\n\th=1,t=2;//\u5e7f\u641c\u9884\u5904\u7406\n\tx[h]=1,y[h]=1,s[h]=0,c[h]=4;//\u5e7f\u641c\u9884\u5904\u7406\n\twhile(h<t)\n\t{\n\t\tif(x[h]==0)//\u9632\u6b62\u8d8a\u754c\n\t\t\tx[h]=n;\n\t\tif(x[h]>n)//\u9632\u6b62\u8d8a\u754c\n\t\t\tx[h]=1;\n\t\tif(y[h]==0)//\u9632\u6b62\u8d8a\u754c\n\t\t\ty[h]=m;\n\t\tif(y[h]>m)//\u9632\u6b62\u8d8a\u754c\n\t\t\ty[h]=1;\n\t\tif(s[h]==-1)//\u9632\u6b62\u8d8a\u754c\n\t\t\ts[h]=15;\n\t\tif(s[h]==16)//\u9632\u6b62\u8d8a\u754c\n\t\t\ts[h]=0;\n\t\tif(a[x[h]][y[h]]=='@')//\u53ef\u4ee5\u7ed3\u675fDefunge\u7a0b\u5e8f\n\t\t{\n\t\t\tcout<<\"YES\"<<endl;\n\t\t\treturn 0;\n\t\t}\n\t\tif(!f[x[h]][y[h]][s[h]][c[h]])\u5982\u679c\u5f53\u524d\u72b6\u6001\u6ca1\u6709\u51fa\u73b0\u8fc7\n\t\t\tswitch(a[x[h]][y[h]])//\u5224\u65ad21\u79cd\u547d\u4ee4\n\t\t\t{\n\t\t\t\tcase '<':\n\t\t\t\t\tx[t]=x[h]+dx[2],y[t]=y[h]+dy[2],s[t]=s[h],c[t++]=2;//\u5411\u5de6\n\t\t\t\t\tbreak;\n\t\t\t\tcase '>':\n\t\t\t\t\tx[t]=x[h]+dx[4],y[t]=y[h]+dy[4],s[t]=s[h],c[t++]=4;//\u5411\u53f3\n\t\t\t\t\tbreak;\n\t\t\t\tcase '^':\n\t\t\t\t\tx[t]=x[h]+dx[1],y[t]=y[h]+dy[1],s[t]=s[h],c[t++]=1;//\u5411\u4e0a\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'v':\n\t\t\t\t\tx[t]=x[h]+dx[3],y[t]=y[h]+dy[3],s[t]=s[h],c[t++]=3;//\u5411\u4e0b\n\t\t\t\t\tbreak;\n\t\t\t\tcase '_':\n\t\t\t\t\tif(s[h])//\u5982\u679c\u5b58\u50a8\u5668\u5b58\u50a8\u7684\u6570\u5b57\u4e0d\u662f0\n\t\t\t\t\t\tx[t]=x[h]+dx[2],y[t]=y[h]+dy[2],s[t]=s[h],c[t++]=2;//\u5411\u5de6\n\t\t\t\t\telse\n\t\t\t\t\t\tx[t]=x[h]+dx[4],y[t]=y[h]+dy[4],s[t]=s[h],c[t++]=4;//\u5411\u53f3\n\t\t\t\t\tbreak;\n\t\t\t\tcase '|':\n\t\t\t\t\tif(s[h])//\u5982\u679c\u5b58\u50a8\u5668\u5b58\u50a8\u7684\u6570\u5b57\u4e0d\u662f0\n\t\t\t\t\t\tx[t]=x[h]+dx[1],y[t]=y[h]+dy[1],s[t]=s[h],c[t++]=1;//\u5411\u4e0a\n\t\t\t\t\telse\n\t\t\t\t\t\tx[t]=x[h]+dx[3],y[t]=y[h]+dy[3],s[t]=s[h],c[t++]=3;//\u5411\u4e0b\n\t\t\t\t\tbreak;\n\t\t\t\tcase '?':\n\t\t\t\t\tx[t]=x[h]+dx[1],y[t]=y[h]+dy[1],s[t]=s[h],c[t++]=1;\n\t\t\t\t\tx[t]=x[h]+dx[2],y[t]=y[h]+dy[2],s[t]=s[h],c[t++]=2;\n\t\t\t\t\tx[t]=x[h]+dx[3],y[t]=y[h]+dy[3],s[t]=s[h],c[t++]=3;\n\t\t\t\t\tx[t]=x[h]+dx[4],y[t]=y[h]+dy[4],s[t]=s[h],c[t++]=4;//\u56db\u4e2a\u65b9\u5411\n\t\t\t\t\tbreak;\n\t\t\t\tcase '.':\n\t\t\t\t\tx[t]=x[h]+dx[c[h]],y[t]=y[h]+dy[c[h]],s[t]=s[h],c[t++]=c[h];//\u72b6\u6001\u4e0d\u53d8\n\t\t\t\t\tbreak;\n\t\t\t\tcase '0':\n\t\t\t\tcase '1':\n\t\t\t\tcase '2':\n\t\t\t\tcase '3':\n\t\t\t\tcase '4':\n\t\t\t\tcase '5':\n\t\t\t\tcase '6':\n\t\t\t\tcase '7':\n\t\t\t\tcase '8':\n\t\t\t\tcase '9':\n\t\t\t\t\tx[t]=x[h]+dx[c[h]],y[t]=y[h]+dy[c[h]],s[t]=a[x[h]][y[h]]-48,c[t++]=c[h];//\u6570\u5b57\n\t\t\t\t\tbreak;\n\t\t\t\tcase '+':\n\t\t\t\t\tx[t]=x[h]+dx[c[h]],y[t]=y[h]+dy[c[h]],s[t]=s[h]+1,c[t++]=c[h];//\u6570\u503c\u52a0\u4e00\n\t\t\t\t\tbreak;\n\t\t\t\tcase '-':\n\t\t\t\t\tx[t]=x[h]+dx[c[h]],y[t]=y[h]+dy[c[h]],s[t]=s[h]-1,c[t++]=c[h];//\u6570\u503c\u51cf\u4e00\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\tf[x[h]][y[h]][s[h]][c[h]]=1;//\u6807\u8bb0\n\t\th++;\n\t}\n\tcout<<\"NO\"<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1627909219,
        "uid": 287276,
        "name": "ChikHid",
        "ccfLevel": 5,
        "title": "AT28\u9898\u89e3"
    },
    {
        "content": "\u6b64\u9898\u5c31\u662f\u9053\u6a21\u62df\uff0c\u5982\u679c\u6ca1\u6709 ```?``` \u5219\u53ef\u4ee5\u76f4\u63a5 ```while``` \u5faa\u73af\u6a21\u62df\uff0c\u4f46\u662f\u6709 ```?```\uff0c\u5c31\u8981\u7528\u6df1\u641c\u4e86\uff08\u8bdd\u8bf4\u9898\u4e2d\u4e0d\u662f\u8bf4\u4e86\u5417\uff09\u3002\n\n\u628a\u4f4d\u7f6e\u3001\u65b9\u5411\u3001\u5b58\u50a8\u5668\u7684\u503c\u90fd\u4f5c\u4e3a\u53c2\u6570\uff0c\u7136\u540e\u5f00\u59cb\u641c\u7d22\uff0c\u4e00\u65e6\u627e\u5230\u4e86 ```@``` \u5c31\u8f93\u51fa YES \u5e76\u505c\u6b62\u3002\u5982\u679c\u641c\u5230\u4e86\u4e00\u4e2a**\u5df2\u7ecf\u5230\u8fc7\u7684\u70b9\u4e14\u5f53\u524d\u65b9\u5411\u4e0e\u5b58\u50a8\u5668\u7684\u503c\u90fd\u5df2\u7ecf\u6709\u8fc7**\uff0c\u5219\u8bf4\u660e\u4f1a\u6b7b\u5faa\u73af\uff0c```return```\u3002\n\n\u4ee3\u7801\uff1a\n\n```\n#include <bits/stdc++.h>\nconst int N = 1e2 + 10;\nusing namespace std;\nconst int dx[5] = {0, 1, 0, -1}, dy[5]= {1, 0, -1, 0};\nint n, m;\nchar s[N][N];\nbool vis[N][N][N][N];\nvoid dfs(int x, int y, int dir, int rec) {\n\tif (x < 1) x += n;\n\tif (x > n) x -= n;\n\tif (y < 1) y += m;\n\tif (y > m) y -= m;\n\tif (vis[x][y][dir][rec]) return;\n\tif (s[x][y] == '@') {\n\t\tputs(\"YES\");\n\t\texit(0);\n\t}\n\tvis[x][y][dir][rec] = 1;\n\tswitch (s[x][y]) {\n\t\tcase '>':\n\t\t\tdfs(x+dx[0], y+dy[0], 0, rec);\n\t\t\tbreak;\n\t\tcase 'v':\n\t\t\tdfs(x+dx[1], y+dy[1], 1, rec);\n\t\t\tbreak;\n\t\tcase '<':\n\t\t\tdfs(x+dx[2], y+dy[2], 2, rec);\n\t\t\tbreak;\n\t\tcase '^':\n\t\t\tdfs(x+dx[3], y+dy[3], 3, rec);\n\t\t\tbreak;\n\t\tcase '+':\n\t\t\tdfs(x+dx[dir], y+dy[dir], dir, (rec + 1) % 16);\n\t\t\tbreak;\n\t\tcase '-':\n\t\t\tdfs(x+dx[dir], y+dy[dir], dir, (rec - 1 + 16) % 16);\n\t\t\tbreak;\n\t\tcase '|':\n\t\t\tif (rec) dfs(x+dx[3], y+dy[3], 3, rec);\n\t\t\telse dfs(x+dx[1], y+dy[1], 1, rec);\n\t\t\tbreak;\n\t\tcase '_':\n\t\t\tif(rec) dfs(x+dx[2], y+dy[2], 2, rec);\n\t\t\telse dfs(x+dx[0], y+dy[0], 0, rec);\n\t\t\tbreak;\n\t\tcase '.':\n\t\t\tdfs(x+dx[dir], y+dy[dir], dir, rec);\n\t\t\tbreak;\n\t\tcase '?':\n\t\t\tfor(int i = 0; i < 4; i++) dfs(x+dx[i], y+dy[i], i, rec);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tdfs(x+dx[dir], y+dy[dir], dir, s[x][y]-'0');\n\t\t\tbreak;\n\t}\n}\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tfor (int i = 1; i <= n; i++) {\n\t\tscanf(\"%s\", s[i] + 1);\n\t}\n\tdfs(1, 1, 0, 0);\n\tputs(\"NO\");\n\treturn 0;\n}\n```\n\n\u9644\uff1a\u6240\u4ee5\u4e3a\u5565\u5b58\u50a8\u5668\u7684\u51cf 1 \u5199\u6210\u8fd9\u6837\u4e5f\u53ef\u4ee5\u8fc7\u554a\uff0c\u6570\u636e\u592a\u6c34\u4e86\u5427\uff08\n\n```\ndfs(x+dx[dir], y+dy[dir], dir, (rec - 1) % 16);\n```",
        "postTime": 1619830411,
        "uid": 341650,
        "name": "_504",
        "ccfLevel": 6,
        "title": "AT28 \u505c\u6b62\u554f\u984c \u9898\u89e3"
    },
    {
        "content": "# **\u6b63\u6587**\n## \u9898\u610f\uff1a\n\u672c\u9898\u7b97\u662f\u4e00\u9053\u6bd4\u8f83\u7b80\u5355\u7684\u7d2b\u9898\u4e86\uff0c\u53ef\u4ee5\u7b97\u4e00\u9053\u6a21\u62df\u4e0e\u641c\u7d22\u7684\u7ed3\u5408\uff0c\u5c31\u6309\u7167\u539f\u9898\u4e2d\u7684\u65b9\u6cd5\u641c\u7d22\u5373\u53ef\u3002\u8fd9\u4e2a\u7ffb\u8bd1\u5fc5\u987b\u8981\u5410\u69fd\u4e00\u4e0b\uff0c\u5176\u4e2d```\u4ec0\u4e48\u90fd\u4e0d\u505a```\u4ee3\u8868\u6309\u7167\u539f\u6765\u7684\u65b9\u5411\u548c\u539f\u6765\u7684\u6570\u503c\u7ee7\u7eed\u884c\u8d70\u3002\n## \u7a0b\u5e8f\uff1a\n\u672c\u9898\u7684\u4ee3\u7801\u6bd4\u8f83\u6e05\u65b0\uff0c\u4ee3\u7801\u89e3\u91ca\u8be6\u89c1\u6ce8\u91ca\uff1a\n```cpp\n#include<cstdio>\nint n,m;\nconst int dx[]={0,0,1,-1};//\u5b9a\u4e49\u65b9\u5411\uff08\u6ce8\u610f\u8fd9\u91cc\u5f88\u5bb9\u6613\u758f\u5ffd\u5927\u610f\uff0c\u5efa\u8bae\u7528\u8349\u7a3f\u7eb8\u4ed4\u7ec6\u7b97\u4e00\u904d\uff0c\u672c\u849f\u84bb\u5c31\u5728\u8fd9\u91cc\u5361\u4e86\u534a\u4e2a\u5c0f\u65f6\uff09\nconst int dy[]={1,-1,0,0};\nchar a[50][50];\nbool vis[50][50][4][16];//\u8868\u793a\u5750\u6807\u5df2\u8bbf\u95ee\u7684\u6570\u7ec4\uff0c\u6ce8\u610f\u4e00\u4e2a\u5750\u6807\u53ef\u4ee5\u88ab\u591a\u6b21\u8bbf\u95ee\uff0c\u4f46\u662f\u5982\u679c\u4e24\u6b21\u8bbf\u95ee\u7684\u65b9\u5411\u548c\u201c\u503c\u201d\u90fd\u4e00\u6837\u5c31\u4ee3\u8868\u6b7b\u5faa\u73af\nbool run(int x,int y,int d,int num){\n    x=(x+n)%n,y=(y+m)%m;//\u8fd9\u91cc\u4e5f\u5f88\u5bb9\u6613\u51fa\u9519\uff0c\u56e0\u4e3a\u5982\u679cx\u6216\u8005y\u641c\u5230\u8d1f\u6570\u5c31\u5fc5\u987b\u5148\u52a0\u4e0an\u6216\u8005m\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u5199x%=n,y%=n;\n    if(vis[x][y][d][num])return 0;\n    vis[x][y][d][num]=true;//\u5728\u8fd9\u4e2a\u72b6\u6001\u4e0b\u5df2\u7ecf\u7ecf\u8fc7\u4e86\u8fd9\u4e2a\u5750\u6807\n    if     (a[x][y]=='>')d=0;\n    else if(a[x][y]=='<')d=1;\n    else if(a[x][y]=='v')d=2;\n    else if(a[x][y]=='^')d=3;\n    else if(a[x][y]=='_')d=num?1:0;\n    else if(a[x][y]=='|')d=num?3:2;//\u6539\u53d8\u65b9\u5411\n    else if(a[x][y]=='?'){//\u5982\u679c\u662f?\u5c31\u5411\u56db\u4e2a\u65b9\u5411\u641c\u7d22\n\t\tfor(int i=0;i<4;i++)\n\t\t\tif(run(x+dx[i],y+dy[i],i,num))\n\t\t\t\treturn 1;\n\t\treturn 0;\n\t}\n    else if(a[x][y]=='@')return 1;//\u89c1\u5230@\u76f4\u63a5\u8f93\u51fa\n    else if(a[x][y]>='0'&&a[x][y]<='9')num=a[x][y]-'0';//\u89c1\u5230\u6570\u5b57\u5c31\u5c06\u5176\u8d4b\u503c\u7ed9num\n    else if(a[x][y]=='-')num=(num+15)%16;//\u4e3a\u4e86\u4fdd\u8bc1\u7b26\u53f7\u6052\u6b63\uff0c\u8fd9\u91cc\u4f7f\u7528+15\u518d%16\u7684\u65b9\u5f0f\u7ed9\u8fd9\u4e2a\u503c-1\n    else if(a[x][y]=='+')num=(num+ 1)%16;//\u540c\u7406\uff0c\u7528+1\u518d%16\u7684\u65b9\u6cd5\u7ed9\u6b64\u503c+1\n\treturn run(x+dx[d],y+dy[d],d,num);//\u7ee7\u7eed\u5f80\u4e0b\u641c\u7d22\n}\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i=0;i<n;i++)scanf(\"%s\",a[i]);//\u5c06\u5b57\u7b26\u6570\u7ec4\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u8bfb\u5165\n    printf(run(0,0,0,0)?\"YES\\n\":\"NO\\n\");\n    return 0;\n}\n\n```\n## P.S.\n\u672c\u7bc7\u4ee3\u7801\u903b\u8f91\u4e0a\u4e0e\u697c\u4e0a\u4ee3\u7801\u903b\u8f91\u975e\u5e38\u63a5\u8fd1\uff0c\u672c\u849f\u84bb\u53ea\u662f\u7a0d\u5fae\u4f18\u5316\u4e86\u4e00\u4e0b\u7801\u98ce\u548c\u903b\u8f91\u4e0a\u7684\u5c0f\u7ec6\u8282\uff0c\u5e0c\u671b\u8fd9\u80fd\u591f\u7ed9\u60a8\u5e26\u6765\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\u3002\n# **THE END**\n-UPGRADE 2021.1.25\uff1a\u5220\u53bb\u4e86\u4ee3\u7801\u7684\u4e0d\u5fc5\u8981\u90e8\u5206",
        "postTime": 1611502720,
        "uid": 299883,
        "name": "HYdroKomide",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 AT28 \u3010\u505c\u6b62\u554f\u984c\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/AT28)\n\n\u5361\u4e86\u6211 6 \u5929...\uff08\u545c\u545c\u545c\n\n### 0x01 \u601d\u8def\n\n\u5176\u5b9e\u6b64\u9898\u66f4\u50cf\u6a21\u62df\uff0c\u6a21\u62df\u8fd9\u4e2a\u7a0b\u5e8f\u6267\u884c\u8fc7\u7a0b\u3002\n\n\u4e0d\u80fd\u7ed3\u675f\u662f\u56e0\u4e3a\u4ec0\u4e48\uff1f\u6b7b\u5faa\u73af\u5457\uff01\n\n\u5565\u662f\u6b7b\u5faa\u73af\uff1f\u5728\u540c\u4e00\u4e2a\u5730\u65b9\u7528\u4e86\u4e24\u904d\u540c\u6837\u7684\u503c\u4e0e\u671d\u5411\u5457\uff01\n\n\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2a\u4e0b\u6807\u5206\u522b\u4e3a\u6a2a\u5750\u6807\u3001\u7eb5\u5750\u6807\u3001\u503c\u4e0e\u671d\u5411\u7684\u56db\u7ef4\u6570\u7ec4\u6807\u8bb0\u3002\u82e5\u53d1\u73b0\u4e3a\u771f\uff0c\u5373\u4e3a\u6b7b\u5faa\u73af\uff0c\u7136\u540e\u6309\u9898\u610f\u4e00\u4e2a\u4e00\u4e2a\u6267\u884c\u64cd\u4f5c\u5373\u53ef\u3002\n\n### 0x02 AC Code\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m;\nint fx[5]={0,0,0,-1,1};\nint fy[5]={0,-1,1,0,0};\nchar a[25][25];\nbool v[25][25][17][5];\ninline bool dfs(int x,int y,int num,int cx)\n{\n\tx=(x+n)%n;\n\ty=(y+m)%m;//\u9632\u6b62\u8d8a\u754c\n\tif(v[x][y][num][cx])return 0;//\u6b7b\u5faa\u73af\n\tv[x][y][num][cx]=1;//\u6807\u8bb0\n\tif(a[x][y]=='<')//\u5de6\n\t{\n\t\tcx=1;\n\t}\n\telse if(a[x][y]=='>')//\u53f3\n\t{\n\t\tcx=2;\n\t}\n\telse if(a[x][y]=='^')//\u4e0a\n\t{\n\t\tcx=3;\n\t}\n\telse if(a[x][y]=='v')//\u4e0b\n\t{\n\t\tcx=4;\n\t}\n\telse if(a[x][y]=='_')\n\t{\n\t\tif(!num)\n\t\t{\n\t\t\tcx=2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcx=1;\n\t\t}\n\t}\n\telse if(a[x][y]=='|')\n\t{\n\t\tif(!num)\n\t\t{\n\t\t\tcx=4;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcx=3;\n\t\t}\n\t}\n\telse if(a[x][y]=='?')\n\t{\n\t\tfor(int i=1;i<=4;i++)\n\t\t{\n\t\t\tif(dfs(x+fx[i],y+fy[i],num,i))\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\t\treturn 0;\n\t}\n\telse if(a[x][y]=='.');\n\telse if(a[x][y]=='@')\n\t{\n\t\treturn 1;\n\t}\n\telse if(a[x][y]=='+')\n\t{\n\t\tnum++;\n\t\tnum%=16;\n\t}\n\telse if(a[x][y]=='-')\n\t{\n\t\tnum+=15;\n\t\tnum%=16;\n\t}\n\telse\n\t{\n\t\tnum=a[x][y]-'0';\n\t}\n\treturn dfs(x+fx[cx],y+fy[cx],num,cx);\n}\nint main()\n{\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tcout.tie(0);\n\tcin>>n>>m;\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tcin>>a[i];\n\t}\n\tif(dfs(0,0,0,2))\n\t{\n\t\tcout<<\"YES\\n\";\n\t}\n\telse\n\t{\n\t\tcout<<\"NO\\n\";\n\t}\n\treturn 0;\n}\n```\n\n\u5b8c\u7ed3~\uff08\u6697\u793a",
        "postTime": 1644303282,
        "uid": 466525,
        "name": "olkieler",
        "ccfLevel": 0,
        "title": "AT28 \u505c\u6b62\u554f\u984c"
    },
    {
        "content": "\u6a21\u62df + DFS\u3002\n\n\u5173\u4e8e `\u4ec0\u4e48\u90fd\u4e0d\u505a` \uff1a\u6307\u7684\u662f\u4fdd\u6301**\u73b0\u5728\u7684\u65b9\u5411\u548c\u5b58\u50a8\u5668\u7684\u503c\u4e0d\u53d8**\u3002\n\n\u5173\u4e8e `+` \u548c `-`\uff1a\u610f\u601d\u662f**\u5bf9 $16$ \u53d6\u6a21**\u3002\n\n\u8fd8\u6709\uff0c\u5982\u679c**\u8d70\u51fa\u754c**\u4e86\uff0c\u8981**\u8df3\u5230\u53e6\u4e00\u8fb9**\u3002\n\n\u8fd8\u6709\uff0cDFS \u72b6\u6001\u4e0d\u4ec5\u8981\u5b58\u50a8\u4f4d\u7f6e\uff0c**\u8fd8\u8981\u5b58\u50a8\u5f53\u65f6\u7684\u65b9\u5411\u548c\u5f53\u65f6\u5b58\u50a8\u5668\u7684\u503c\u3002($vis$ \u6570\u7ec4\u4e5f\u8981\u591a\u5f00\u4e24\u7ef4\u5b58\u50a8\uff01)**\n\n\u6700\u540e\uff0c\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u5728\u6211\u7684\u4ee3\u7801\u4e2d\uff0c\u4e00\u65e6\u641c\u5230\u4e86 `@`\uff0c\u5c31**\u76f4\u63a5\u4f7f\u7528 `exit(0)` \u6765\u9000\u51fa\u7a0b\u5e8f\u3002**\n\n\u6ca1\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define UP 0\n#define DOWN 1\n#define LEFT 2\n#define RIGHT 3\n#define ALL 4\nusing namespace std;\nint r, c;\nchar arr[22][22];\nbool vis[22][22][16][4];\n\ninline void dfs(int x, int y, int val, int dir) {\n\tif (vis[x][y][val][dir]) return;\n\tvis[x][y][val][dir] = 1;\n\tswitch (arr[x][y]) {\n\t\tcase '<': {\n\t\t\tdir = LEFT;\n\t\t\tbreak;\n\t\t}\n\t\tcase '>': {\n\t\t\tdir = RIGHT;\n\t\t\tbreak;\n\t\t}\n\t\tcase '^': {\n\t\t\tdir = UP;\n\t\t\tbreak;\n\t\t}\n\t\tcase 'v': {\n\t\t\tdir = DOWN;\n\t\t\tbreak;\n\t\t}\n\t\tcase '_': {\n\t\t\tif (val) dir = LEFT;\n\t\t\telse dir = RIGHT;\n\t\t\tbreak;\n\t\t}\n\t\tcase '|': {\n\t\t\tif (val) dir = UP;\n\t\t\telse dir = DOWN;\n\t\t\tbreak;\n\t\t}\n\t\tcase '.': {\n\t\t\tbreak;\n\t\t}\n\t\tcase '@': {\n\t\t\tcout << \"YES\" << endl;\n\t\t\texit(0);\n\t\t\tbreak;\n\t\t}\n\t\tcase '+': {\n\t\t\tif (val == 15) val = 0;\n\t\t\telse val++;\n\t\t\tbreak;\n\t\t}\n\t\tcase '-': {\n\t\t\tif (val == 0) val = 15;\n\t\t\telse val--;\n\t\t\tbreak;\n\t\t}\n\t\tcase '?': {\n\t\t\tdir = ALL;\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tval = arr[x][y] - 48;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (dir == ALL) {\n\t\tx--;\n\t\tif (x == 0) x = r;\n\t\tdfs(x, y, val, UP);\n\t\tx++;\n\t\tif (x == r+1) x = 1;\n\t\t\n\t\tx++;\n\t\tif (x == r+1) x = 1;\n\t\tdfs(x, y, val, DOWN);\n\t\tx--;\n\t\tif (x == 0) x = r;\n\t\t\n\t\ty--;\n\t\tif (y == 0) y = c;\n\t\tdfs(x, y, val, LEFT);\n\t\ty++;\n\t\tif (y == c+1) y = 1;\n\t\t\n\t\ty++;\n\t\tif (y == c+1) y = 1;\n\t\tdfs(x, y, val, RIGHT);\n\t\ty--;\n\t\tif (y == 0) y = c;\n\t} else {\n\t\tswitch (dir) {\n\t\t\tcase UP: {\n\t\t\t\tx--;\n\t\t\t\tif (x == 0) x = r;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase DOWN: {\n\t\t\t\tx++;\n\t\t\t\tif (x == r+1) x = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase LEFT: {\n\t\t\t\ty--;\n\t\t\t\tif (y == 0) y = c;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase RIGHT: {\n\t\t\t\ty++;\n\t\t\t\tif (y == c+1) y = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tdfs(x, y, val, dir);\n\t}\n}\nint main() {\n\tcin >> r >> c;\n\tfor (int i = 1; i <= r; i++) {\n\t\tfor (int j = 1; j <= c; j++) {\n\t\t\tcin >> arr[i][j];\n\t\t}\n\t}\n\tdfs(1, 1, 0, RIGHT);\n\tcout << \"NO\" << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1615822706,
        "uid": 153422,
        "name": "0x3F",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT28 \u3010\u505c\u6b62\u554f\u984c\u3011"
    },
    {
        "content": "## \u601d\u8def\n\n\u641c\u7d22 + \u6a21\u62df\u3002\n\n\u4e00\u5f00\u59cb\u4ece\u8d77\u59cb\u70b9\u5f00\u59cb\u641c\uff0c\u7136\u540e\u6839\u636e\u5f53\u524d\u70b9\u7684\u5b57\u7b26\u548c\u9898\u610f\u53d8\u6362\u65b9\u5411\u548c\u5b58\u50a8\u5668\u7684\u6570\u503c\u3002\n\n\u4e00\u641c\u5230 `@` \u5c31\u8fd4\u56de `true`\u3002\n\n\u5982\u679c\u904d\u5386\u5b8c\u6240\u6709\u60c5\u51b5\u90fd\u6ca1\u6709\u641c\u5230 `@`\uff0c\u8fd4\u56de `false`\u3002\n\n\u5176\u4ed6\u7ec6\u8282\u89c1\u4ee3\u7801\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int dx[] = {0, 1, -1, 0};\nconst int dy[] = {-1, 0, 0, 1};\nint n, m;\nchar mp[25][25];\nbool vis[25][25][5][18];\n\n// 0 \u662f\u5f80\u5de6\uff0c1 \u662f\u5f80\u4e0b\uff0c2 \u662f\u5f80\u4e0a\uff0c3 \u662f\u5f80\u53f3\nbool dfs(int x, int y, int d, int num) {\n    // \u8d70\u5230\u53e6\u4e00\u8fb9\n    x = (x - 1 + n) % n + 1;\n    y = (y - 1 + m) % m + 1;\n    if (vis[x][y][d][num]) {\n        return 0;\n    }\n    vis[x][y][d][num] = 1;\n    if (mp[x][y] == '@') {\n        return 1;\n    } else if (mp[x][y] == '<') {\n        d = 0;\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else if (mp[x][y] == '>') {\n        d = 3;\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else if (mp[x][y] == '^') {\n        d = 2;\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else if (mp[x][y] == 'v') {\n        d = 1;\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else if (mp[x][y] == '_') {\n        if (!num) {\n            d = 3;\n        } else {\n            d = 0;\n        }\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else if (mp[x][y] == '|') {\n        if (!num) {\n            d = 1;\n        } else {\n            d = 2;\n        }\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else if (mp[x][y] == '?') {\n        // \u904d\u5386\u56db\u4e2a\u65b9\u5411\n        for (int i = 0; i < 4; ++i) {\n            if (dfs(x + dx[i], y + dy[i], i, num)) {\n                return 1;\n            }\n        }\n        return 0;\n    } else if (mp[x][y] == '.') {\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else if (isdigit(mp[x][y])) {\n        // isdigit(x) \u5c31\u662f\u5224\u65ad\u5b57\u7b26 x \u662f\u5426\u4e3a\u6570\u5b57\n        // x - '0' \u7684\u4f5c\u7528\u662f\u5c06\u5b57\u7b26\u8f6c\u4e3a\u6570\u5b57\n        return dfs(x + dx[d], y + dy[d], d, mp[x][y] - '0');\n    } else if (mp[x][y] == '+') {\n        ++num;\n        if (num == 16) {\n            num = 0;\n        }\n        return dfs(x + dx[d], y + dy[d], d, num);\n    } else {\n        --num;\n        if (num == -1) {\n            num = 15;\n        }\n        return dfs(x + dx[d], y + dy[d], d, num);\n    }\n}\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; ++i) {\n        // \u4ece\u7d22\u5f15 1 \u5f00\u59cb\u8f93\u5165\n        scanf(\"%s\", mp[i] + 1);\n    }\n    puts(dfs(1, 1, 3, 0) ? \"YES\" : \"NO\");\n    return 0;\n}\n```\n",
        "postTime": 1615094806,
        "uid": 485611,
        "name": "Iron_Heart",
        "ccfLevel": 0,
        "title": "AT28 \u9898\u89e3"
    },
    {
        "content": "### \u601d\u8def\u662f\u6df1\u641c\u52a0\u6a21\u62df\u3002\n\u6309\u9898\u610f\u6a21\u62df 12 \u4e2a\u64cd\u4f5c\u3002\n\n**\u7279\u522b\u8981\u6ce8\u610f\u7684\u662f**\uff0c\u6570\u503c\u7684\u5904\u7406\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a\n\n\u52a0\u4e00\uff1a\n```cpp\nnum++;\nnum %= 16;\n```\n\u51cf\u4e00\uff1a\n```cpp\nnum += 15;\nnum %= 16;\n```\n\u672c\u9898\u7684\u6700\u5927\u5751\u70b9\u5c31\u5728\u8fd9\u91cc\uff0c\u6309\u5e38\u89c4\u7684\u4e0d\u884c\uff0c~~\u6211\u5c31\u56e0\u4e3a\u8fd9 WA \u4e86\u597d\u591a\u6b21\u3002~~\n\n\u4e14\u672c\u9898\u89e3\u7684\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e**\u66b4\u529b\u4e94\u7ef4\u6570\u7ec4**\uff0c\u52a0\u4e0a\u4e00\u4e2a\u6570\u503c\u7684\u4e0b\u6807\uff0c\u6bd4\u8f83\u7701\u65f6\u3002\n\n## Code\n```\n#include <bits/stdc++.h>\nusing namespace std;\n\nchar g[25][25];\nbool vis[25][25][20][4][4];\nint m, n, num, dx = 0, dy = 1;\n\nvoid move(int x, int y) {\n\tif (x > m) x = 1;\n\tif (y > n) y = 1;\n\tif (x < 1) x = m;\n\tif (y < 1) y = n;\n\tif (vis[x][y][num][dx + 1][dy + 1]) return;\n\tchar c = g[x][y];\n\tvis[x][y][num][dx + 1][dy + 1] = true;\n\tif (c == '>') {\n\t\tdx = 0;\n\t\tdy = 1;\n\t\tmove(x, y + 1);\n\t}\n\tif (c == '<') {\n\t\tdx = 0;\n\t\tdy = -1;\n\t\tmove(x, y - 1);\n\t}\n\tif (c == '^') {\n\t\tdx = -1;\n\t\tdy = 0;\n\t\tmove(x - 1, y);\n\t}\n\tif (c == 'v') {\n\t\tdx = 1;\n\t\tdy = 0;\n\t\tmove(x + 1, y);\n\t}\n\tif (c == '_') {\n\t\tif (num == 0) {\n\t\t\tdx = 0;\n\t\t\tdy = 1;\n\t\t\tmove(x, y + 1);\n\t\t}\n\t\telse {\n\t\t\tdx = 0;\n\t\t\tdy = -1;\n\t\t\tmove(x, y - 1);\n\t\t}\n\t}\n\tif (c == '|') {\n\t\tif (num == 0) {\n\t\t\tdx = 1;\n\t\t\tdy = 0;\n\t\t\tmove(x + 1, y);\n\t\t}\n\t\telse {\n\t\t\tdx = -1;\n\t\t\tdy = 0;\n\t\t\tmove(x - 1, y);\n\t\t}\n\t}\n\tif (c == '?') {\n\t\tdx = 0;\n\t\tdy = 1;\n\t\tmove(x, y + 1);\n\t\tdx = 0;\n\t\tdy = -1;\n\t\tmove(x, y - 1);\n\t\tdx = -1;\n\t\tdy = 0;\n\t\tmove(x - 1, y);\n\t\tdx = 1;\n\t\tdy = 0;\n\t\tmove(x + 1, y);\n\t}\n\tif (c == '.') move(x + dx, y + dy);\n\tif (c == '@') {\n\t\tputs(\"Yes\");\n\t\texit(0);\n\t}\n\tif (isdigit(c)) {\n\t\tnum = c - '0';\n\t\tmove(x + dx, y + dy);\n\t}\n\tif (c == '+') {\n\t\tnum++;\n\t\tnum %= 16;\n\t\tmove(x + dx, y + dy);\n\t}\n\tif (c == '-') {\n\t\tnum += 15;\n\t\tnum %= 16;\n\t\tmove(x + dx, y + dy);\n\t}\n}\n\nint main()\n{\n\tcin >> m >> n;\n\tfor (int i = 1; i <= m; i++)\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tcin >> g[i][j];\n\tmove(1, 1);\n\tputs(\"No\");\n\treturn 0;\n}\n\n```\n",
        "postTime": 1634122082,
        "uid": 351392,
        "name": "a1029",
        "ccfLevel": 0,
        "title": "AT28 \u505c\u6b62\u554f\u984c"
    }
]
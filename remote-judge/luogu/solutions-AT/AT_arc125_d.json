[
    {
        "content": "## \u9898\u610f\u7b80\u8ff0\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217\uff0c\u6c42\u5176\u4e2d\u53ea\u51fa\u73b0\u8fc7\u4e00\u6b21\u7684\u975e\u7a7a\u5b50\u5e8f\u5217\u7684\u4e2a\u6570\u3002\n\n## \u9898\u76ee\u5206\u6790\n\n\u901a\u8fc7\u4e3e\u4f8b\u601d\u8003\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e00\u4e2a\u975e\u7a7a\u5b50\u5e8f\u5217\u5408\u6cd5\u7684\u5145\u5206\u5fc5\u8981\u6761\u4ef6\u662f\uff1a\n\n1. \u5934\u90e8\u5143\u7d20 $a_i$ \u662f\u539f\u5e8f\u5217\u4e2d\u4e0b\u6807\u6700\u5c0f\u7684\uff08\u5373\u6700\u5de6\u8fb9\u7684\uff09\u503c\u4e3a $a_i$ \u7684\u5143\u7d20\uff1b\n1. \u7531\u5bf9\u79f0\u6027\uff0c\u8be5\u5b50\u5e8f\u5217\u6700\u540e\u4e00\u4e2a\u5143\u7d20 $a_i$ \u662f\u539f\u5e8f\u5217\u4e2d\u6700\u540e\u4e00\u4e2a\u51fa\u73b0\u7684\u503c\u4e3a $a_i$ \u7684\u5143\u7d20\uff1b\n1. \u5b50\u5e8f\u5217\u4e2d\u4efb\u610f\u76f8\u90bb\u4e24\u5143\u7d20\u5728\u539f\u5e8f\u5217\u4e2d\uff0c\u4e0d\u59a8\u8bbe\u5b83\u4eec\u7684\u4e0b\u6807\u5206\u522b\u662f $l,r$\uff0c\u5219 $\\forall a_i,l<i<r$\uff0c$a_i\\neq a_l$ \u4e14 $a_i\\neq a_r$\u3002\n\n\u6211\u4eec\u53ea\u9700\u7edf\u8ba1\u8fd9\u6837\u7684\u975e\u7a7a\u5b50\u5e8f\u5217\u7684\u4e2a\u6570\u5373\u53ef\u3002\n\n\u4e3a\u4e86\u7b80\u5316\u7a0b\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u539f\u5e8f\u5217\u8bbe\u9996\u5c3e\u4e24\u4e2a\u54e8\u5175\u3002\u5177\u4f53\u5730\uff0c\u4ee4\n\n- $a_0\\gets\\max\\{a_i\\}+1$\n\n- $a_{n+1}\\gets\\max\\{a_i\\}+2$\n\n\n\u8fd9\u6837 $a_0$ \u4e0e $a_{n+1}$ \u5c31\u548c\u539f\u5e8f\u5217\u4efb\u610f\u5143\u7d20\u4e0d\u76f8\u540c\u4e86\u3002\u63a5\u7740\uff0c\u6211\u4eec\u6c42\u4ee5 $a_0$ \u4e3a\u5934\uff0c$a_{n+1}$ \u4e3a\u5c3e\u7684\u5408\u6cd5\u5b50\u5e8f\u5217\u4e2a\u6570\uff0c\u6211\u4eec\u5c31\u4e0d\u5fc5\u8003\u8651\u6761\u4ef6 1 \u548c\u6761\u4ef6 2 \u4e86\u3002\n\n\u8bb0 $f_i$ \u4e3a\u4ee5 $a_i$ \u7ed3\u5c3e\u7684\u5408\u6cd5\u5b50\u5e8f\u5217\u4e2a\u6570\uff0c$lst_i$ \u4e3a\u503c\u4e3a $i$ \u7684\u5143\u7d20\u76ee\u524d\u4e3a\u6b62\u6700\u540e\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u5219\n\n- $f_0\\gets 1$\n\n- $f_i\\gets \\sum\\limits_{j=lst_{a_i}}^{i-1} f_j \\times [j=lst_{a_j}] (i\\neq 0)$\n\n\u5b9e\u9645\u6211\u4eec\u9700\u8981\u4e0d\u65ad\u7ef4\u62a4 $lst_{a_i}$\uff0c\u6bcf\u6b21\u987a\u5e26\u628a $f_{lst_{a_i}}$(\u66f4\u65b0\u524d\u7684)\u7f6e\u4e3a 0\uff0c\u8fd9\u6837\u8f6c\u79fb\u65f6\u7684\u6c42\u548c\u5c31\u662f\u533a\u95f4\u6c42\u548c\u4e86\u3002\u518d\u52a0\u4e0a\u5355\u70b9\u4fee\u6539\uff0c\u53ef\u4ee5\u76f4\u63a5\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u3002\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=200010;\ntypedef long long ll;\nconst int mod=998244353;\nint a[N],n,c[N],f[N],lst[N],m;\ninline int lowbit(int x){return x&-x;}\nvoid add(int x,int val){\n\tx++; //\u7531\u4e8e\u8981\u7528\u52300\u8fd9\u4e2a\u4e0b\u6807\uff0c\u6811\u72b6\u6570\u7ec4\u4e2d\u628a\u6240\u6709\u4e0b\u6807\u504f\u79fb1 \n\tfor(;x<=n+1;x+=lowbit(x)) c[x]=((c[x]+val)%mod+mod)%mod;\n}\nint ask(int x){\n\tx++; //\u540c\u4e0a \n\tint ret=0;\n\tfor(;x;x-=lowbit(x)) ret=((ret+c[x])%mod+mod)%mod;\n\treturn ret;\n}\n\nint main(){\n\t\n\tcin>>n;\n\tfor(int i=1; i<=n; i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\tm=max(m,a[i]);\n\t}\n\ta[0]=m+1,a[n+1]=m+2; //\u8bbe\u54e8\u5175 \n\t\n\tf[0]=1; add(0,1);\n\tfor(int i=1; i<=n+1; i++){\n\t\tf[i]=(ask(i-1)-ask(lst[a[i]]-1)+mod)%mod;\n\t\tif(lst[a[i]]) add(lst[a[i]],-f[lst[a[i]]]);\n\t\tadd(i,f[i]);\n\t\tlst[a[i]]=i;\n\t}\n\t\n\tcout<<(f[n+1]-1+mod)%mod; //\u5b50\u5e8f\u5217\u4e0d\u80fd\u7a7a\uff0c\u6240\u4ee5\u7b54\u6848\u51cf1 \n\t\n\treturn 0;\n}\n```",
        "postTime": 1679736431,
        "uid": 592152,
        "name": "zzafanti",
        "ccfLevel": 0,
        "title": "ARC125D \u9898\u89e3"
    },
    {
        "content": "## Description\n\n\u7ed9\u51fa\u4e00\u4e2a\u957f\u5ea6\u4e3a $N$ \u7684\u5e8f\u5217 $A$\uff0c\u6c42\u53ea\u51fa\u73b0\u8fc7\u4e00\u6b21\u7684\u5b50\u5e8f\u5217\u7684\u6570\u91cf\uff0c\u7ed3\u679c\u5bf9\u8d28\u6570\u53d6\u6a21\u3002\uff08$1 \\leq N \\leq 2 \\times 10^5$\uff0c$1 \\leq A_i \\leq N$\uff09\n\n## Solution\n\n\u6211\u4eec\u901a\u8fc7\u89c2\u5bdf\u53ef\u77e5\uff0c\u5bf9\u4e8e\u7b2c $x$ \u4f4d\u800c\u8a00\uff0c\u5408\u6cd5\u7684\u4ee5\u5b83\u4e3a\u7ed3\u5c3e\u7684\u5b50\u5e8f\u5217\u90fd\u53ef\u4ee5\u4ece\u5148\u524d\u67d0\u4e9b\u5408\u6cd5\u5e8f\u5217\u63a8\u51fa\u3002\n\n\u6240\u4ee5\u8003\u8651DP\uff0c\u8bbe $f_x$ \u8868\u793a\u5230\u4e86\u7b2c $x$ \u4f4d\u65f6\u4ee5 $A_x$ \u7ed3\u5c3e\u7684\u5b50\u5e8f\u5217\u7684\u6570\u91cf\u3002\n\n\u901a\u8fc7\u5206\u6790\u6027\u8d28\uff0c\u53ef\u4ee5\u53d1\u73b0\u5bf9\u4e8e\u7b2c $i$ \u4f4d\u800c\u8a00\uff0c\u82e5\u5728\u5b83\u4e4b\u524d $A_i$ \u5df2\u7ecf\u91cd\u590d\u51fa\u73b0\u8fc7\uff0c\u4e0d\u59a8\u4ee4\u5176\u4f4d\u7f6e\u4e3a $lst$\uff0c\u90a3\u4e48\u4e4b\u524d\u4ee5 $A_{lst}$ \u7ed3\u5c3e\u7684\u6240\u6709\u5b50\u5e8f\u5217\u5747\u4e0d\u5408\u6cd5\u3002\n\n\u56e0\u6b64\u53ef\u4ee5\u5f97\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff1a $f_x = \\sum\\limits^{x-1}_{i=lst}f_i$\uff0c\u56e0\u6b64\u8bb0\u5f55\u4e0b\u6240\u6709\u6570\u6700\u8fd1\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u4f7f\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4 $f$ \u7684\u533a\u95f4\u548c\uff0c\u540c\u65f6\u5355\u70b9\u4fee\u6539\u6e05\u9664 $f_{lst}$ \u7684\u6570\u636e\u5373\u53ef\u3002\n\n## [Code](https://www.luogu.com.cn/paste/bi6jzyut)",
        "postTime": 1667100160,
        "uid": 112661,
        "name": "NKL\u4e36",
        "ccfLevel": 0,
        "title": "\u3010\u505a\u9898\u8bb0\u5f55\u3011[ARC125D] Unique Subsequence"
    }
]
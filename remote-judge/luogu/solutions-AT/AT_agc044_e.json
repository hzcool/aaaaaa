[
    {
        "content": "\u9996\u5148\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u5f53\u524d\u6240\u4f4d\u4e8e\u7684\u70b9\u662f $a$ \u7684\u6700\u5927\u503c\uff0c\u90a3\u4e48\u7ee7\u7eed\u8d70\u4e0b\u53bb\u53ea\u4f1a\u5f92\u8017 $b$ \u4ef7\u503c\u800c\u4e0d\u4f1a\u589e\u5927 $a$ \u4ef7\u503c\uff0c\u90a3\u4e00\u5b9a\u5c31\u662f~~\u7eaf\u7eaf\u6028\u79cd~~\u4e0d\u4f18\u7684\u3002\u8003\u8651\u5230\u5706\u73af\u672c\u8eab\u662f\u5bf9\u79f0\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u4e0d\u59a8\u5047\u5b9a $a_n$ \u5c31\u662f\u6700\u5927\u503c\u3002\u5982\u6b64\u4e00\u6765\uff0c\u4e0d\u7ba1\u662f $n-1$ \u5230 $n$ \u8fd8\u662f $1$ \u5230 $n$\uff0c\u90fd\u5e94\u5f53\u7acb\u523b\u505c\u4e0b\uff0c\u800c\u4e0d\u4f1a\u8de8\u8d8a\u5230\u53e6\u4e00\u8fb9\u3002\u4e8e\u662f\u6211\u4eec\u610f\u8bc6\u5230\u53ef\u4ee5\u8ffd\u52a0\u5b9a\u4e49 $a_0=a_n$\uff0c\u4fbf\u80fd\u628a\u73af\u4e0a\u7684\u95ee\u9898\u8f6c\u5230\u94fe\u4e0a\u3002\n\n\u90a3\u4e48\u6211\u4eec\u8003\u8651\u8bb0\u5f55 $e_i$ ~~\u771f\u662f\u5929\u624d~~ \u8868\u793a\u5f53\u524d\u4f4d\u7f6e\u662f $i$ \u7684\u65f6\u5019\u6700\u4f18\u51b3\u7b56\u4e0b\u7684\u671f\u671b\u6536\u76ca\u3002\u6211\u4eec\u8003\u8651\u6bcf\u4e00\u6b65\uff0c\u6216\u8005\u5728\u5f53\u524d\u5c31\u505c\u4e0b\uff0c\u6216\u8005\u968f\u673a\u5f80\u5de6\u53f3\u4e00\u6b65\u3002\u4e8e\u662f\u6211\u4eec\u5f97\u5230\u65b9\u7a0b\uff1a\n\n$$e_i=\\max(a_i,\\frac{e_{i-1}+e_{i+1}}2-b_i)$$\n\n\uff08\u5bf9\u4e8e\u5de6\u53f3\u8fb9\u754c\uff0c\u540e\u534a\u90e8\u5206\u65e0\u610f\u4e49\u3002\uff09\n\n\u73b0\u5728\u6211\u4eec\u6784\u9020\u5e8f\u5217 $c$ \u6ee1\u8db3 $c_{i+1}=2(b_i+c_i)-c_{i-1}$\uff08$c_0$ \u548c $c_1$ \u7231\u548b\u53d6\u548b\u53d6\uff09\uff0c\u53d1\u73b0 $c$ \u5e8f\u5217\u5177\u6709\u6027\u8d28 $\\frac{c_{i-1}+c_{i+1}}2-b_i-c_i=0$\u3002\uff08\u5b9e\u9645\u4e0a\uff0c\u5728\u505a\u9898\u7684\u65f6\u5019\uff0c\u6211\u4eec\u6b63\u662f\u7784\u51c6\u4e86\u8fd9\u6761\u6027\u8d28\u624d\u6784\u9020\u51fa\u7684 $c$\u3002\uff09\n\n\u4e8e\u662f\u6211\u4eec\u8003\u5bdf $f_i=e_i-c_i$\uff1a\n\n$$f_i=\\max(a_i-c_i,\\frac{f_{i-1}+f_{i+1}}2+\\frac{c_{i-1}+c_{i+1}}2-b_i-c_i)=\\max(a_i-c_i,\\frac{f_{i-1}+f_{i+1}}2)$$\n\n\u8fd9\u4e2a\u5f62\u5f0f\u662f\u975e\u5e38\u597d\u770b\u7684\u3002\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u6211\u4eec\u628a $(i,f_i)$ \u770b\u6210\u5e73\u9762\u4e0a\u7684\u4e00\u4e2a\u70b9 $p_i$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5f0f\u5b50\u5b9e\u9645\u4e0a\u7ed9\u4e86\u6211\u4eec\u8fd9\u4e24\u6761\u6027\u8d28\uff1a\n\n+ $p_i$ \u5728 $(i,a_i-c_i)$ \u4e0a\u65b9\u3002\n\n+ $p_i$ \u5728 $p_{i-1}p_{i+1}$ \u8fde\u7ebf\u4e0a\u65b9\u3002\n\n+ \u4ee5\u4e0a\u4e24\u6761\u81f3\u5c11\u53d6\u7b49\u4e00\u6761\u3002\n\n\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\uff0c\u8fd9\u662f\u4e00\u4e2a\u51f8\u5305\u7684\u6a21\u578b\u3002\u8003\u5bdf\u6240\u6709 $(i,a_i-c_i)$ \u6784\u6210\u7684\u4e0a\u51f8\u58f3\uff0c\u5219 $p_i$ \u7684\u51e0\u4f55\u542b\u4e49\u5c31\u662f\u51f8\u58f3\u8f6e\u5ed3\u7ebf\u4e0a\u6a2a\u5750\u6807 $i$ \u7684\u4f4d\u7f6e\u4e0a\u6240\u5bf9\u5e94\u7684\u70b9\u3002\u8bc1\u660e\u53ef\u4ee5\u5206\u4e24\u6b65\uff1a\u5148\u8bf4\u660e $p_i$ \u5728\u6b64\u70b9\u4e0a\u65b9\uff0c\u518d\u8bf4\u660e\u7531\u4e8e\u4e24\u7aef\u53ea\u80fd\u53d6\u7b49\u7b2c\u4e00\u6761\u800c\u5361\u4f4f\u6240\u6709\u70b9\u90fd\u53d6\u5230\u7b49\u3002\u5f53\u7136\uff0c\u5982\u679c\u4f60\u8db3\u591f\u719f\u7ec3\uff1a\n\n![image.png](https://s2.loli.net/2023/01/29/FCuxmb56c2KRfHA.png)\n\n\u603b\u7ed3\u4e00\u4e0b\uff0c\u6211\u4eec\u89e3\u51b3\u6574\u4e2a\u9898\u76ee\u82b1\u4e86\u4e09\u6b65\uff1a\n\n1. \u627e\u5230 $a$ \u6700\u5927\u503c\u7684\u4f4d\u7f6e\uff0c\u91cd\u6784\u5e8f\u5217\uff08\u5176\u5b9e\u5c31\u662f\u65cb\u8f6c\u4e00\u904d\u7136\u540e\u590d\u5236\u4e00\u4e0b\u9996\u5c3e\u5143\u7d20\uff09\u3002\n\n2. \u8ba1\u7b97 $c$\uff0c\u6784\u5efa\u51f8\u5305\u3002\n\n3. \u63a8\u51fa\u6240\u6709 $e_i$\uff0c\u53d6\u5e73\u5747\u503c\u4f5c\u4e3a\u7b54\u6848\u8f93\u51fa\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\u4e2d\u4e0b\u6807\u4ece\u96f6\u5f00\u59cb\uff0c\u7565\u6709\u5dee\u5f02\uff0c\u9886\u4f1a\u7cbe\u795e\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nsigned main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  int n, ans = 0;\n  cin >> n;\n  vector<pair<int, int>> v(n);\n  for (auto& [a, b] : v) cin >> a;\n  for (auto& [a, b] : v) cin >> b;\n  rotate(v.begin(), max_element(v.begin(), v.end()), v.end());\n  v.push_back(v.front());\n  vector<int> c(n + 1);\n  c[0] = c[1] = 0;\n  for (int i = 1; i < n; ++i)\n    ans += c[i + 1] = ((c[i] + v[i].second) << 1) - c[i - 1];\n  ans <<= 1;\n  stack<pair<int, int>> h;\n  for (int i = 0; i <= n; ++i) {\n    int x = i, y = v[i].first - c[i];\n    while (h.size() >= 2u) {\n      auto [x1, y1] = h.top();\n      h.pop();\n      auto [x0, y0] = h.top();\n      if ((x1 - x0) * (y - y0) < (y1 - y0) * (x - x0)) {\n        h.emplace(x1, y1);\n        break;\n      }\n    }\n    h.emplace(x, y);\n  }\n  while (h.size() >= 2u) {\n    auto [x1, y1] = h.top();\n    h.pop();\n    auto [x0, y0] = h.top();\n    ans += (y1 + y0) * (x1 - x0) + (y1 - y0);\n  }\n  return cout << fixed << setprecision(16) << ans * .5 / n << endl, 0;\n}\n```",
        "postTime": 1674994336,
        "uid": 250637,
        "name": "UnyieldingTrilobite",
        "ccfLevel": 9,
        "title": "\u9006\u5929"
    },
    {
        "content": "\u8fd9\u4ed6\u5988\u662f\u600e\u4e48\u60f3\u5230\u7684\uff1f\n\n\u8003\u8651\u8bbe $f_x$ \u4e3a $x$ \u7684\u671f\u671b\uff0c\u5219 $f_x=\\max(\\frac{f_{x-1}+f_{x+1}}{2}-b_x,a_x)$\u3002\n\n\u5982\u679c $b_x=0$ \u6211\u4eec\u5c31\u76f4\u63a5\u6c42\u4e00\u4e2a\u51f8\u58f3\u5c31\u505a\u5b8c\u4e86\uff0c\u4e2d\u95f4\u7684\u671f\u671b\u53ef\u4ee5\u8bc1\u660e\u662f\u4e00\u6bb5\u7b49\u5dee\u5e8f\u5217\u3002\n\n\u6240\u4ee5\u6211\u4eec\u8bbe $g_x=f_x-c_x$\uff0c\u4f7f\u5f97 $g_x=\\max(\\frac{g_{x-1}+g_{x+1}}{2},a_x-c_x)$\u3002\n\n\u90a3 $c_x$ \u53ea\u9700\u8981\u6ee1\u8db3 $c_{x-1}+c_{x+1}=2c_x+2b_x$ \u5373\u53ef\uff0c\u968f\u4fbf\u7b97\u3002",
        "postTime": 1684912629,
        "uid": 427683,
        "name": "\u5411\u665a\u5927\u9b54\u738b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AGC044E"
    }
]
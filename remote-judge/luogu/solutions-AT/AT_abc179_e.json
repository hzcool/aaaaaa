[
    {
        "content": "### \u9898\u610f\n\n\u5b9a\u4e49 $f(x,m)= x \\bmod m$\u3002\n\n\u6709\u4e00\u4e2a\u5e8f\u5217 $a$\uff0c\u6ee1\u8db3 $a_1=1$\uff0c$a_i=f(a_{i-1}^2,m)$\u3002\n\n\u6c42 \n\t\n$$\\sum_{i=1}^na_i$$\n\n### \u601d\u8def\n\n\u8fd9\u9053\u9898 $n$ \u7684\u6570\u636e\u8303\u56f4\u5f88\u5927\uff0c\u4f46 $m$ \u6700\u591a\u53ea\u6709 $10^5$\uff0c\u56e0\u6b64\u8003\u8651\u4ee5\u6b64\u4e3a\u7a81\u7834\u53e3\u3002\n\n\u9700\u8981\u7528\u5230\u5982\u4e0b\u7684\u540c\u4f59\u6027\u8d28\uff1a\n\n$$(a \\times b) \\bmod m = (a \\bmod m \\times b \\bmod m) \\bmod m$$\n\n\u8bc1\u660e\u8fc7\u7a0b\u4e0d\u8be6\u89e3\u3002\n\n\u6709\u4e86\u8fd9\u6761\u6027\u8d28\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u77e5\uff0c\u5f53\u67d0\u4e2a\u4f59\u6570\u7b2c\u4e8c\u6b21\u51fa\u73b0\u65f6\uff0c\u5219\u610f\u5473\u7740\u51fa\u73b0\u4e86\u201c\u5faa\u73af\u8282\u201d\uff08\u56e0\u4e3a\u5176\u518d\u7ee7\u7eed\u8fd0\u7b97\u4e0b\u53bb\u7684\u7ed3\u679c\u4e5f\u4e0e\u5148\u524d\u4e00\u6837\uff09\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u66b4\u529b\u8ba1\u7b97\u524d\u9762\u7684 $a_i$\uff0c\u540c\u65f6\u627e\u51fa\u201c\u5faa\u73af\u8282\u201d\uff0c\u627e\u5230\u5373\u53ef\u7ec8\u6b62\u5faa\u73af\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8981\u5c06\u5e8f\u5217\u5206\u5272\u4e3a\u4e09\u90e8\u5206\u8ba1\u7b97\u3002\n\n1. \u201c\u5faa\u73af\u8282\u201d\u524d\u975e\u5faa\u73af\u8282\u90e8\u5206\n\n2. \u5b8c\u6574\u7684\u4e00\u6bb5\u4e00\u6bb5\u7684\u201c\u5faa\u73af\u8282\u201d\n\n3. \u5c3e\u90e8\u4e0d\u5b8c\u6574\u7684\u201c\u5faa\u73af\u8282\u201d\n\n\u5177\u4f53\u5b9e\u73b0\u8be6\u89c1\u4ee3\u7801\u3002\n\n### Code\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#define int long long\n\nusing namespace std;\n\nint pd[1000001],sum[1000001];\n\nint ans,x,n,m,len,w,s;\n\nsigned main()\n{\n\tcin >> n >> x >> m;\n\tfor( int i = 1 ; true ; i++,x = x * x % m)\n\t{\n\t\tif(pd[x]) \n\t\t{\n\t\t\tlen = i - pd[x];\n\t\t\tw = pd[x];\n\t\t\tbreak;\n\t\t}\n\t\telse pd[x] = i;\n\t\tsum[i] = sum[i-1] + x;\n\t}\n\tans = min ( n , w - 1 );\n\tans = sum[ans]; //\u975e\u5faa\u73af\u8282\u90e8\u5206\n\tif( w < n ) \n\t{\n\t\ts = n - w + 1;\n\t\tans += ( sum[w + len - 1] - sum[w - 1] ) * (s / len );//\u5b8c\u6574\u7684\u4e00\u6bb5\u4e00\u6bb5\u7684\u201c\u5faa\u73af\u8282\u201d\n\t\tans += sum[w - 1 + s % len] - sum[w - 1];//\u5c3e\u90e8\u4e0d\u5b8c\u6574\u7684\u201c\u5faa\u73af\u8282\u201d\n\t}\n\tcout << ans;\n\treturn 0;\t\n} \n```\n",
        "postTime": 1677311178,
        "uid": 180406,
        "name": "lilong",
        "ccfLevel": 5,
        "title": "ABC179E\u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u4e0d\u96be\u89c2\u5bdf\u5230\u6709\u6a21\u6570\u7684\u5b58\u5728\uff0c\u6240\u4ee5 $ a_i $ \u7684\u53d6\u503c\u4e0d\u8d85\u8fc7 $ \\bmod $ \u79cd\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u5e8f\u5217\u4f1a\u4ee5\u81f3\u591a $ \\bmod $ \u4e2a\u6570\u4e3a\u5faa\u73af\u8282\u5faa\u73af\u3002\n\n\u56e0\u4e3a $ \\bmod $ \u5f88\u5c0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u66b4\u529b\u9884\u5904\u7406\u627e\u5230\u5468\u671f\uff0c\u7136\u540e\u7b54\u6848\u5373\u4e3a\u5faa\u73af\u5468\u671f\u524d\u9762\u7684\u6570\u4e4b\u548c\u52a0\u4e0a\u82e5\u5e72\u4e2a\u5faa\u73af\u8282\u4ee5\u53ca\u4e00\u4e2a\u5c0f\u8282\uff0c\u524d\u540e\u4e24\u90e8\u5206\u7684\u7b54\u6848\u53ef\u4ee5\u66b4\u529b\u7b97\uff0c\u5468\u671f\u5185\u7684\u548c\u9884\u5904\u7406\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $ \\mathcal{O}(\\bmod) $\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#import <bits/stdc++.h>\nusing namespace std;\nlong long n;\nlong long x,m;\nint sa[100100];\nlong long add[100010];\nint main()\n{\n\tcin>>n>>x>>m;\n\tint Bit=1;\n\tlong long l,r;\n\tfor(long long a=x;;a=(a*a)%m,Bit++)\n\t{\n\t\tif(!sa[a]) \n\t\tsa[a]=Bit;\n\t\telse\n\t\t{\n\t\t\tl=sa[a],r=Bit-1;\n\t\t\tbreak;\n\t\t}\n\t\tadd[Bit]=add[Bit-1]+a;\n\t}\n\tlong long len=r-l+1;\n\tlong long ans=add[min(n,l-1)];\n\tn=max(0ll,n-l+1);\n\tif(n) \n\tans+=(add[r]-add[l-1])*(n/len)+(add[n%len+l-1]-add[l-1]);\n\tcout<<ans;\n}\n```\n",
        "postTime": 1671230957,
        "uid": 714821,
        "name": "loser_seele",
        "ccfLevel": 4,
        "title": "ABC179E\u9898\u89e3"
    }
]
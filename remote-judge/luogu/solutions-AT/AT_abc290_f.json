[
    {
        "content": "\u597d\u9898\uff0c\u597d\u9898\u3002\u8d5b\u65f6\u5361\u70b9\u5207\u4e86\u3002\n\n\u9996\u5148\u8003\u8651\u5df2\u77e5\u5ea6\u6570\u96c6\u5408\u6784\u9020\u6700\u957f\u94fe\u3002\u5c06\u6240\u6709\u5ea6\u6570 $>1$ \u7684\u8282\u70b9\u4e0e\u4e24\u4e2a\u5ea6\u6570 $=1$ \u7684\u8282\u70b9\u6784\u6210\u4e00\u6761\u94fe\uff0c\u5176\u4f59\u7684\u53f6\u5b50\u8282\u70b9\u6302\u63a5\u5728\u4e2d\u6bb5\u5269\u4f59\u5ea6\u6570\u4e0a\u5373\u53ef\u3002\u53ef\u4ee5\u8bc1\u660e\u6784\u9020\u7684\u5408\u6cd5\u6027\u4e0e\u6700\u4f18\u6027\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u8ba1\u6570\u90e8\u5206\u3002\u603b\u5ea6\u6570\u663e\u7136\u4e3a\u8fb9\u6570 $\\times2$\uff0c\u5373 $2n-2$\u3002\u5bb9\u6613\u53d1\u73b0\u5f71\u54cd\u6700\u7ec8\u957f\u5ea6\u7684\u4ec5\u6709\u53f6\u5b50\u8282\u70b9\u4e2a\u6570\uff0c\u56e0\u6b64\u94a6\u5b9a $k$ \u4e2a\u8282\u70b9\u4e00\u5b9a\u4e3a\u53f6\u5b50\u8282\u70b9\uff08\u5ea6\u6570\u4e3a $1$\uff09\uff0c\u5176\u4f59\u53ef\u4ee5\u76f4\u63a5\u5212\u5206\u3002\u53ef\u5206\u914d\u7684\u603b\u5ea6\u6570\u4e3a $(2n-2)-k$ \u4e2a\uff0c\u800c\u6211\u4eec\u9700\u8981\u5f3a\u5236\u8ba9\u6bcf\u4e2a\u8282\u70b9\u90fd\u4e0d\u662f\u53f6\u5b50\u8282\u70b9\uff08\u5ea6\u6570 $>1$\uff09\uff0c\u56e0\u6b64\u9700\u8981\u5728\u6bcf\u4e2a\u8282\u70b9\u7684\u5ea6\u6570\u4e0a\u51cf\u53bb $1$\uff0c\u603b\u5171\u5373\u51cf\u53bb $n-k$\uff0c\u603b\u5ea6\u6570\u4e3a $(2n-2)-k-(n-k)=n-2$\u3002\u518d\u6839\u636e\u63d2\u677f\u6cd5\uff0c\u5f97\u5230\u603b\u65b9\u6848\u6570\u4e3a $\\dbinom nk\\dbinom{n-3}{n-k-1}$\uff0c\u76f4\u5f84\u5219\u4e3a $n-k+1$\u3002\n\n\u6b63\u5f0f\u63a8\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u4e24\u4e2a\u524d\u7f6e\u77e5\u8bc6\uff1a\n\n- \u6052\u7b49\u5f0f $k\\dbinom nk=n\\dbinom{n-1}{k-1}$\u3002\n- \u8303\u5fb7\u8499\u5fb7\u5377\u79ef $\\sum^k_i\\dbinom ni\\dbinom m{k-i}=\\dbinom{n+m}k$\u3002\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u5f00\u59cb\u3002\n\n$$\n\\begin{aligned}\n&\\sum^n_{k=1}\\dbinom nk\\dbinom{n-3}{n-k-1}(n-k+1)\\\\\n=&\\sum^n_{k=1}\\dbinom nk\\dbinom{n-3}{n-k-1}(n-k-1+2)\\\\\n=\n&\\left(\\sum^n_{k=1}\\dbinom nk\\dbinom{n-3}{n-k-1}(n-k-1)\\right)+2\\sum^n_{k=1}\\dbinom nk\\dbinom{n-3}{n-k-1}\\\\\n=&\\left(\\sum^n_{k=1}\\dbinom nk\\dbinom{n-4}{n-k-2}(n-3)\\right)+2\\dbinom{2n-3}{n-1}\\\\\n=&\\left((n-3)\\sum^n_{k=1}\\dbinom nk\\dbinom{n-4}{n-k-2}\\right)+2\\dbinom{2n-3}{n-1}\\\\\n=&\\ (n-3)\\dbinom{2n-4}{n-2}+2\\dbinom{2n-3}{n-1}\n\\end{aligned}\n$$\n\n\u9884\u5904\u7406\u7ec4\u5408\u6570\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n+T)$\u3002\n\n# AC \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n\ntypedef long long ll;\n\nusing namespace std;\n\nconst int MAXN = 2e6 + 10;\nconst int mod = 998244353;\n\ninline \nll qpow(ll b, ll p) {\n    ll res = 1;\n    while (p) {\n        if (p & 1) res = res * b % mod;\n        b = b * b % mod, p >>= 1;\n    }\n    return res;\n}\n\nll fac[MAXN], ifac[MAXN];\n\ninline \nvoid init(int n) {\n\tfac[0] = 1;\n\tfor (int i = 1; i <= n; i++) fac[i] = fac[i - 1] * i % mod;\n\tifac[n] = qpow(fac[n], mod - 2);\n\tfor (int i = n; i; i--) ifac[i - 1] = ifac[i] * i % mod;\n}\n\ninline \nll c(ll n, ll m) {\n\tif (n < 0 || m < 0 || n < m) return 0;\n\treturn fac[n] * ifac[m] % mod * ifac[n - m] % mod;\n}\n\nint t, n; ll f[MAXN], ans;\n\nint main() {\n\tfor (init(2e6), scanf(\"%d\", &t); t--;) {\n\t\tscanf(\"%d\", &n);\n\t\tprintf(\"%lld\\n\", ((n - 3) * c(2 * n - 4, n - 2) + 2 * c(2 * n - 3, n - 1)) % mod);\n\t}\n}\n```",
        "postTime": 1676815124,
        "uid": 406941,
        "name": "Register_int",
        "ccfLevel": 6,
        "title": "ABC290F \u9898\u89e3"
    },
    {
        "content": "\u6ca1\u52a8\u8111\u5b50\u5c31 gf \u4e00\u8def\u5199\u4e0b\u6765\u4e86......\u5b9e\u9645\u4e0a\u5c31\u662f\u628a\u63d2\u677f\u6cd5\u7684 gf \u5199\u4e86\u4e00\u4e0b/zk\n\n---\n\n\u9996\u5148\u8003\u8651\u4e00\u4e0b\u4e00\u4e2a $X$ \u5408\u6cd5\u662f\u4ec0\u4e48\u60c5\u51b5\uff0c\u90a3\u5c31\u662f\u603b\u548c\u662f $2n-2$ \u5e76\u4e14\u4fdd\u8bc1 $0<X_i<n$\u3002\n\n\u8bc1\u660e\u5c31\u8003\u8651\u8d2a\u5fc3\u6784\u9020\u4e00\u4e0b\uff0c\u6bcf\u4e2a $1$ \u6302\u5728\u4e00\u4e2a $\\geq 2$ \u7684\u4e0a\u9762\uff0c\u4e0d\u65ad\u6302\u4f7f\u5f97\u6700\u540e\u53ea\u5269\u4e0b\u4e24\u4e2a $1$ \u548c\u4e00\u5806 $2$\uff0c\u518d\u628a\u5b83\u4eec\u4e32\u8d77\u6765\u5c31\u884c\u3002\n\n\u7136\u540e\u5c31\u80fd\u53d1\u73b0\uff0c\u8fd9\u6837\u4e5f\u540c\u65f6\u6784\u9020\u51fa\u4e86\u6700\u5927\u7684\u76f4\u5f84\uff08\u5bb9\u6613\u53d1\u73b0\u8fd9\u662f\u4e0a\u754c\uff09\uff0c\u90a3\u5c31\u662f \u5ea6\u6570 $\\geq 2$ \u7684\u4e2a\u6570 + 1\uff0e\n\n\u7136\u540e\u679a\u4e3e\u5ea6\u6570\u4e3a 1 \u7684\u6709 $k$ \u4e2a\uff0c\u6b64\u65f6\u7b54\u6848\u4e3a $n-k+1$\uff0c\u5148\u4ec5\u8003\u8651\u5ea6\u6570 $\\geq 2$ \u5185\u90e8\u7684\u987a\u5e8f\uff0c\u6700\u540e\u4e58\u4e0a $\\binom{n}{k}$ \u4ee5\u63d2\u5165\u5ea6\u6570\u4e3a 1 \u7684\u3002\u8fd9\u6837\u8981\u7b97\u7684\u65b9\u6848\u6570\u5c31\u662f\uff1a\n\n$$\n\\begin{aligned}\n&[z^{2n-2-k}](z^2+z^3+\\cdots+z^{n-1})^{n-k}\n\\\\\n=&[z^{2n-2-k-2(n-k)}](1+z+z^2+\\cdots+z^{n-3})^{n-k}\n\\\\\n=&[z^{k-2}](1+z+z^2+\\cdots+z^{n-3})^{n-k}\n\\end{aligned}\n$$\n\n\u7531\u4e8e $k\\leq n-1$\uff0c\u90a3\u4e48 $n-3\\geq k-2$\uff0c\u6240\u4ee5\uff1a\n\n$$\n\\begin{aligned}\n=&[z^{k-2}](1+z+z^2+z^3+\\cdots)^{n-k}\n\\\\\n=&[z^{k-2}]\\left(\\frac{1}{1-z}\\right)^{n-k}\n\\end{aligned}\n$$\n\n\u5df2\u7ecf\u5316\u5230\u6211\u4eec\u719f\u6089\u7684\u5f62\u5f0f\u4e86\uff0c\u6839\u636e\u5e7f\u4e49\u4e8c\u9879\u5f0f\u5b9a\u7406\u5b83\u7684\u7cfb\u6570\u5c31\u662f $\\binom{n-k+k-2-1}{k-2}=\\binom{n-3}{k-2}$\uff0c\u6700\u540e\u7b54\u6848\u7684\u63a8\u5bfc\u4e5f\u662f\u5e73\u51e1\u7684\u3002\n\n$$\n\\begin{aligned}\n&\\sum_{k=2}^{n-1}\\binom{n}{k}\\binom{n-3}{k-2}(n-k+1)\n\\\\\n=&(n-1)\\sum_{k=2}^{n-1}\\binom{n}{k}\\binom{n-3}{k-2}-\\sum_{k=2}^{n-1}\\binom{n}{k}\\binom{n-3}{k-2}(k-2)\n\\\\\n=&(n-1)\\sum_{k=2}^{n-1}\\binom{n}{n-k}\\binom{n-3}{k-2}-(n-3)\\sum_{k=3}^{n-1}\\binom{n}{n-k}\\binom{n-4}{k-3}\n\\\\\n=&(n-1)\\binom{2n-3}{n-2}-(n-3)\\binom{2n-4}{n-3}\n\\end{aligned}\n$$\n\n\u5012\u6570\u7b2c\u4e8c\u6b65\u540c\u65f6\u7528\u4e86\u5bf9\u79f0\u6052\u7b49\u5f0f\u548c\u5438\u6536\u6052\u7b49\u5f0f\uff0c\u6700\u540e\u4e00\u6b65\u5219\u662f\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\u3002\n\nCode\uff1ahttps://atcoder.jp/contests/abc290/submissions/39046485",
        "postTime": 1679901202,
        "uid": 223298,
        "name": "do_while_true",
        "ccfLevel": 8,
        "title": "\u300c\u9898\u89e3\u300dABC290F Maximum Diameter"
    },
    {
        "content": "## \u601d\u8def\n\n\u9996\u5148\u6709\u4e00\u4e2a\u91cd\u8981\u7ed3\u8bba\uff1a\u82e5\u7ed9\u5b9a\u4e00\u68f5\u6811\u6bcf\u4e2a\u8282\u70b9\u7684\u5ea6\u6570 $d$\uff0c\u5219\u6811\u7684\u6700\u957f\u76f4\u5f84\u4e3a $n-1-\\sum\\limits_{i=1}^n \\max(d_i-2,0)$\u3002\n\n\u8bc1\u660e\uff1a\n\n\u9996\u5148\u8bc1\u660e\u6700\u957f\u76f4\u5f84\u4e0d\u4f1a\u66f4\u5927\u3002\u6700\u957f\u76f4\u5f84\u5373\u4e3a $n-1$ \u51cf\u53bb\u4e0d\u5728\u76f4\u5f84\u4e0a\u7684\u8fb9\u3002\u5c06\u70b9\u5206\u6210\u4e24\u90e8\u5206\uff1a\u5728\u76f4\u5f84\u4e0a\u7684\u70b9\u548c\u4e0d\u5728\u76f4\u5f84\u4e0a\u7684\u70b9\u3002\u82e5\u6709\u4e00\u4e2a\u5728\u76f4\u5f84\u7684\u70b9 $d_i\\ge 2$\uff0c\u5219\u4e00\u5b9a\u6709 $d_i-2$ \u6761\u4e0d\u5728\u76f4\u5f84\u4e0a\u7684\u8fb9\u3002\u82e5\u6709\u4e00\u4e2a\u4e0d\u5728\u76f4\u5f84\u4e0a\u7684\u70b9 $d_i\\ge2$\uff0c\u5219\u4e00\u5b9a\u6709 $d_i-1$ \u6761\uff08\u6ce8\u610f\uff0c\u8fd9\u91cc\u4e0d\u662f $d_i$\uff0c\u56e0\u4e3a\u4e0d\u80fd\u7b97\u4e0a\u6765\u81ea\u76f4\u5f84\u90a3\u91cc\u7684\u8fb9\uff0c\u90a3\u6761\u8fb9\u5df2\u7ecf\u7b97\u8fc7\u4e86\uff09\u4e0d\u5728\u76f4\u5f84\u4e0a\u7684\u70b9\u3002\u56e0\u6b64\u81f3\u5c11\u6709 $\\sum\\limits_{i=1}^n \\max(d_i-2,0)$ \u6761\u4e0d\u5728\u76f4\u5f84\u4e0a\u7684\u70b9\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u6784\u9020\u4e00\u4e2a\u76f4\u5f84\u4e3a $n-1-\\sum\\limits_{i=1}^n \\max(d_i-2,0)$ \u7684\u6811\u3002\u7531\u4e0a\u6587\u53ef\u77e5\uff0c\u60f3\u8981\u8fbe\u5230\u8fd9\u4e2a\u6570\uff0c\u5c31\u5f97\u8ba9 $d_i\\ge 2$ \u7684\u70b9\u90fd\u5728\u76f4\u5f84\u4e0a\u3002\u90a3\u4e48\u5b83\u4eec\u4f38\u51fa\u6765\u7684\u8fb9\u5c31\u5f97\u8ba9 $d_i=1$ \u7684\u70b9\u586b\u4e0a\u3002\u8bbe $d_i=1$ \u7684\u70b9\u4e2a\u6570\u4e3a $cnt$\uff0c\u5219\u7531\u5ea6\u6570\u603b\u548c\u4e3a $2n-2$\uff08\u6bcf\u4e2a\u8fb9\u8d21\u732e\u4e24\u4e2a\u5ea6\u6570\uff09\u53ef\u5f97 $\\sum\\limits_{i=1}^n \\max(d_i-2,0)=2n-2-cnt-2(n-cnt)=cnt-2$\u3002\u5c06 $d_i=1$ \u4e2d\u7684\u4e24\u4e2a\u70b9\u653e\u5230\u76f4\u5f84\u4e24\u8fb9\u5835\u4f4f\uff0c\u5269\u4e0b\u7684\u53bb\u586b\u76f4\u5f84\u4e0a $d_i \\ge 2$ \u4f38\u51fa\u6765\u7684\u8fb9\uff0c\u6b63\u597d\u7528\u5b8c\uff0c\u6240\u4ee5\u8fd9\u6837\u6784\u9020\u662f\u53ef\u884c\u7684\u3002\u800c\u4e14\u4e5f\u8fbe\u5230\u4e86\u6700\u5927\u503c\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u53ef\u4ee5\u53d1\u73b0\u4e0a\u9762\u5f0f\u5b50\u7684\u503c\u53ea\u4e0e $d_i=1$ \u7684\u4e2a\u6570\u6709\u5173\uff0c\u56e0\u6b64\u679a\u4e3e $d_i=1$ \u7684\u4e2a\u6570 $cnt$\u3002\u90a3\u4e48 $n-1-\\sum\\limits_{i=1}^n \\max(d_i-2,0)=n-1-(cnt-2)=n+1-cnt$\u3002\u90a3\u8fd9\u6837\u7684\u5e8f\u5217\u6709\u591a\u5c11\u4e2a\u5462\uff1f\u9996\u5148 $d_i=1$ \u7684\u4f4d\u7f6e\u4e00\u5171\u6709 $C_n^i$ \u4e2a\u3002\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u662f\uff1a\u5c06\u5269\u4e0b\u7684\u5ea6\u6570\u603b\u548c $2n-2-cnt$ \u62c6\u6210 $n-cnt$ \u4e2a\u5728 $[2,n-1]$ \u4e4b\u95f4\u7684\u6570\uff0c\u6c42\u65b9\u6848\u6570\u3002\n\n\u5148\u5c06\u6bcf\u4e00\u4e2a\u6570\u51cf\u53bb $1$\uff0c\u5219\u603b\u548c\u51cf\u53bb\u4e86 $n-cnt$\uff0c\u95ee\u9898\u8f6c\u5316\u4e3a\uff1a\u5c06\u603b\u548c $n-2$ \u62c6\u6210 $n-cnt$ \u4e2a\u5728 $[1,n-2]$ \u4e4b\u95f4\u7684\u6570\uff0c\u6c42\u65b9\u6848\u6570\u3002\u6b64\u65f6\u53ef\u4ee5\u53d1\u73b0\u503c\u57df\u7684\u4e0a\u754c\u5df2\u7ecf\u6ca1\u6709\u7528\u4e86\u3002\u90a3\u4e48\u8fd9\u4e2a\u95ee\u9898\u53ef\u4ee5\u7528\u63d2\u677f\u6cd5\u89e3\u51b3\u3002\u4e00\u5171\u6709 $n-3$ \u4e2a\u7a7a\uff0c\u8981\u63d2 $n-cnt-1$ \u4e2a\u677f\u5b50\uff0c\u65b9\u6848\u6570\u5373\u4e3a $C_{n-3}^{n-cnt-1}$\u3002\n\n\u7efc\u4e0a\uff0c\u7b54\u6848\u5373\u4e3a\n\n$$\\sum_{i=2}^{n-1} (n+1-i)C_n^iC_{n-3}^{n-i-1}$$\n\n\u4e0a\u9762\u5c06 $cnt$ \u66ff\u6362\u6210 $i$ \u4e86\u3002\n\n\u6ce8\u610f\u5230\u540e\u9762\u7684\u4e1c\u897f\u4f3c\u4e4e\u53ef\u4ee5\u7528\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\u505a\uff0c\u4f46\u662f\u56e0\u4e3a\u4e58\u4e86\u4e00\u4e2a $n+1-i$ \u6240\u4ee5\u65e0\u6cd5\u76f4\u63a5\u505a\u3002\u8003\u8651\u62c6\u5f00\uff1a\n\n$$(n+1)\\sum_{i=2}^{n-1} C_n^i C_{n-3}^{n-i-1}-\\sum_{i=2}^{n-1} i C_n^i C_{n-3}^{n-i-1}$$\n\n$$=(n+1)C_{2n-3}^{n-1}-\\sum_{i=2}^{n-1} i \\dfrac{n!}{(n-i)!i!} \\cdot C_{n-3}^{n-i-1}$$\n\n$$=(n+1)C_{2n-3}^{n-1}-n \\sum_{i=2}^{n-1} \\dfrac{(n-1)!}{(n-i)!(i-1)!} \\cdot C_{n-3}^{n-i-1}$$\n\n$$=(n+1)C_{2n-3}^{n-1}-n\\sum_{i=2}^{n-1} C_{n-1}^{i-1} C_{n-3}^{n-i-1}$$\n\n$$=(n+1)C_{2n-3}^{n-1} - nC_{2n-4}^{n-2}$$\n\n\u76f4\u63a5\u6c42\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define mod 998244353\nint qpow(int a,int b)\n{\n\tint ans=1;\n\twhile(b)\n\t{\n\t\tif(b&1) ans=ans*a%mod;\n\t\ta=a*a%mod;\n\t\tb>>=1;\n\t}\n\treturn ans;\n}\nint jc[2000010],invjc[2000010];\nint C(int n,int m)\n{\n\tif(n<m || n<0 || m<0) return 0;\n\treturn jc[n]*invjc[n-m]%mod*invjc[m]%mod;\n}\nint n;\nsigned main()\n{\n\tjc[0]=1; for(int i=1; i<=2e6; ++i) jc[i]=jc[i-1]*i%mod;\n\tinvjc[(int)2e6]=qpow(jc[(int)2e6],mod-2); for(int i=2e6-1; i>=0; --i) invjc[i]=invjc[i+1]*(i+1)%mod;\n\tint t; cin>>t; while(t--)\n\t{\n\t\tcin>>n; cout<<((n+1)*C(2*n-3,n-1)%mod-n*C(2*n-4,n-2)%mod+mod)%mod<<'\\n';\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1676893369,
        "uid": 353688,
        "name": "\u738b\u7199\u6587",
        "ccfLevel": 0,
        "title": "AT_abc290_f \u9898\u89e3"
    },
    {
        "content": "\u597d\u9898\u529b\u8350\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01111\n\n\u8003\u8651\u6570\u5217\u4e2d $1$ \u7684\u6570\u91cf\u5373\u4e3a\u53f6\u5b50\u4e2a\u6570 $k$\uff0c\u800c\u8003\u8651\u4e00\u6761\u94fe\uff0c\u4e24\u7aef\u4e00\u5b9a\u662f\u53f6\u5b50\uff0c\u5269\u4e0b\u7684\u53f6\u5b50\u76f4\u63a5\u6302\u5728\u94fe\u4e0a\uff0c\u7c7b\u4f3c\u4e00\u6761\u8708\u86a3\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5728\u76f4\u5f84\u4e0a\u7684\u70b9\u7684\u6700\u5927\u6570\u91cf\u662f $n-k+2$\uff0c\u4e8e\u662f\u76f4\u5f84\u5c31\u662f $n-k+1$\u3002\n\n\u56e0\u4e3a\u6811\u6709 $n-1$ \u6761\u8fb9\uff0c\u6bcf\u6761\u8fb9 $2$ \u4e2a\u7aef\u70b9\uff0c\u6240\u4ee5\u80fd\u6784\u9020\u51fa\u6811\u7684\u5ea6\u6570\u5e8f\u5217\u4e00\u5b9a\u6ee1\u8db3 $\\sum X_i=2n-2$\u3002\u4e8e\u662f\u6211\u4eec\u4f7f\u7528\u63d2\u677f\u6cd5\u53ef\u4ee5\u5f97\u5230\u8fd9\u6837\u4e00\u4e2a\u5f0f\u5b50\uff1a\n\n$$ans=\\sum_{k=1}^n\\binom{n}{k}\\binom{n-3}{n-k-1}(n-k+1)$$\n\n\u8003\u8651\u628a\u540e\u9762\u90a3\u4e2a\u4e1c\u897f\u62c6\u51fa\u6765\uff0c\u5f97\u5230\n\n$$\\sum_{k=1}^n\\binom{n}{k}\\binom{n-3}{n-k-1}(n-k-1)+2\\sum_{k=1}^n\\binom{n}{k}\\binom{n-3}{n-k-1}$$\n\n\u4e5f\u5c31\u662f\n\n$$(n-3)\\sum_{k=1}^n\\binom{n}{k}\\binom{n-4}{n-k-2}+2\\sum_{k=1}^n\\binom{n}{k}\\binom{n-3}{n-k-1}$$\n\n\u663e\u7136\u7684\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\uff0c\u4e8e\u662f\u5f97\u5230\u6700\u7ec8\u7b54\u6848\n\n$$(n-3)\\binom{2n-4}{n-2}+2\\binom{2n-3}{n-1}$$\n\n\u9884\u5904\u7406\u9636\u4e58\u53ca\u9006\u5143\uff0c\u590d\u6742\u5ea6 $\\Theta(n+q)$\u3002",
        "postTime": 1676815046,
        "uid": 362750,
        "name": "TernaryTree",
        "ccfLevel": 0,
        "title": "[ABC290F] Maximum Diameter"
    },
    {
        "content": "### \u7b97\u6cd5\u5206\u6790\n\n\n\u7ec4\u5408\u8ba1\u6570\uff0c\u8003\u8651\u6811\u7684\u5ea6\u6570\u5e8f\u5217\u7684\u6027\u8d28\u3002\n\n\u53ea\u6709\u5f53  $\\sum X_{i}=2 n-2$  \u4e14  $\\min (X)=1$  \u65f6\uff0c  $f(X) \\neq 0 $\n\n\u6b64\u65f6\uff0c\u5c06  $X_{i} \\geqslant 2$  \u7684\u70b9\u653e\u4e00\u8d77\u6392\u6210\u4e00\u5217\u5c31\u80fd\u5f97\u5230\u6700\u5927\u7684\u76f4\u5f84\u3002\n\n\u7406\u7531\u662f\u5ea6\u6570\u4e3a $1$ \u7684\u70b9\u53ea\u80fd\u662f\u53f6\u5b50\u8282\u70b9\uff0c\u4e8c\u76f4\u5f84\u53ea\u80fd\u6709\u4e24\u4e2a\u53f6\u5b50\u8282\u70b9\u3002\n\n\u6240\u4ee5  $F(X)=\\sum\\left[X_{i} \\geqslant 2\\right]+1 $\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u5f97\u5230\u603b\u65b9\u6848\u6570\u4e3a  $\\sum_{X}\\left(\\sum_{i=1}^{N}\\left[X_{i} \\geqslant 2\\right]+1\\right) $\u3002\n\n$\n\\begin{aligned}\n& \\sum_{X \\in S}\\left(\\sum_{i=1}^{N}\\left[X_{i} \\geqslant 2\\right]+1\\right) \\\\\n= & \\sum_{X \\in S}\\left(N-\\sum_{i=1}^{N}\\left[X_{i}=1\\right]+1\\right) \\\\\n= & \\sum_{X \\in S}(N+1)-\\sum_{X \\in S}\\left(\\sum_{i=1}^{N}\\left[X_{i}=1\\right]\\right) \\\\\n= & (N+1)|S|-\\sum_{i=1}^{N}\\left(\\sum_{X \\in S}\\left[X_{i}=1\\right]\\right) \\\\\n= & (N+1)\\left(\\begin{array}{c}\n2 N-3 \\\\\nN-1\n\\end{array}\\right)-N\\left(\\begin{array}{l}\n\\sum_{X \\in S}\\left[X_{1}=1\\right]\n\\end{array}\\right) \\\\\n= & (N+1)\\left(\\begin{array}{c}\n2 N-3 \\\\\nN-1\n\\end{array}\\right)-N\\left(\\begin{array}{c}\n2 N-4 \\\\\nN-2\n\\end{array}\\right)\n\\end{aligned}$\n\n\n\u5176\u4e2d  $S$  \u8868\u793a\u6240\u6709\u53ef\u80fd\u7684 $ X $ \u7684\u96c6\u5408\u3002\n\n $|S|$  \u53ef\u4ee5\u901a\u8fc7\u9694\u677f\u6cd5\u6c42\u5f97\uff0c  $\\left(\\begin{array}{c}2 N-3 \\\\ N-1\\end{array}\\right) $\u3002\n \n### \u6700\u7ec8\u4ee3\u7801\n```\n#include <bits/stdc++.h>\n#if __has_include(<atcoder/all>)\n#include <atcoder/all>\nusing namespace atcoder;\n#endif\n#define rep(i, n) for (int i = 0; i < (n); ++i)\n\nusing namespace std;\nusing mint = modint998244353;\n\nstruct modinv {\n  int n; vector<mint> d;\n  modinv(): n(2), d({0,1}) {}\n  mint operator()(int i) {\n    while (n <= i) d.push_back(-d[mint::mod()%n]*(mint::mod()/n)), ++n;\n    return d[i];\n  }\n  mint operator[](int i) const { return d[i];}\n} invs;\nstruct modfact {\n  int n; vector<mint> d;\n  modfact(): n(2), d({1,1}) {}\n  mint operator()(int i) {\n    while (n <= i) d.push_back(d.back()*n), ++n;\n    return d[i];\n  }\n  mint operator[](int i) const { return d[i];}\n} facts;\nstruct modfactinv {\n  int n; vector<mint> d;\n  modfactinv(): n(2), d({1,1}) {}\n  mint operator()(int i) {\n    while (n <= i) d.push_back(d.back()*invs(n)), ++n;\n    return d[i];\n  }\n  mint operator[](int i) const { return d[i];}\n} ifacts;\nmint comb(int n, int k) {\n  if (n < k || k < 0) return 0;\n  return facts(n)*ifacts(k)*ifacts(n-k);\n}\n\nvoid solve() {\n    int n;\n    cin >> n;\n    mint ans = comb(n*2-3, n-1)*(n+1);\n    ans -= comb(n*2-4, n-2)*n;\n    cout << ans.val() << '\\n';\n}\n\nint main() {\n    int t;\n    cin >> t;\n\n    while (t--) solve();\n\n    return 0;\n}\n\n```",
        "postTime": 1677941069,
        "uid": 893703,
        "name": "yscQwQ_",
        "ccfLevel": 0,
        "title": "[ABC290F] Maximum Diameter \u9898\u89e3"
    },
    {
        "content": "**\u3010\u7f6e\u9876\u3011\u672c\u9898\u89e3\u4e2d\u6709\u4e00\u4e9b\u4e71\u641e\u5185\u5bb9\uff0c\u5982\u679c\u60f3\u8981\u7eaf\u7cb9\u7684\u6b63\u89e3\u8bf7\u53f3\u8f6c\u5176\u4ed6\u5927\u4f6c\u7684\u9898\u89e3\u3002**\n\n## ABC290F Maximum diameter\n\n### 1. \u9898\u610f\n\n\u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $P$\uff0c\u5b9a\u4e49 $f(P)$ \u4e3a\uff1a\n\n- \u5982\u679c\u5b58\u5728\u4e00\u68f5 $n$ \u4e2a\u7ed3\u70b9\u7684\u6811\uff0c\u4f7f\u5f97\u7b2c $i$ \u4e2a\u8282\u70b9\u7684\u5ea6\u6570\u4e3a $P_i$\uff0c\u5219 $f(P)$ \u4e3a\u8fd9\u68f5\u6811\u7684\u76f4\u5f84\u957f\u5ea6\u7684\u6700\u5927\u503c\u3002\n- \u5426\u5219 $f(P)=0$\u3002\n\n\u73b0\u5728\u7ed9\u4f60\u4e00\u4e2a $n$\uff0c\u6c42\u6240\u6709\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217\u7684 $f$ \u503c\u7684\u548c\u3002\n\n\u591a\u6d4b\uff0c$T\\le2\\times10^5,n\\le10^6$\u3002\n\n### 2. \u9898\u89e3\n\n#### (1) \u628a $f(P)$ \u5177\u8c61\u5316\n\n\u9996\u5148\u4f60\u4f1a\u53d1\u73b0\u201c\u6240\u6709\u5e8f\u5217\u201d\u6839\u672c\u5c31\u662f\u626f\u6de1\uff0c\u53ea\u6709\u6ee1\u8db3 $\\sum\\limits_{i=1}^nP_i=2n-2$ \u7684 $P$ \u624d\u6709\u6811\u7b26\u5408\u6761\u4ef6\u3002\n\n\u7136\u540e\uff0c\u201c\u76f4\u5f84\u957f\u5ea6\u7684\u6700\u5927\u503c\u201d\u8fd8\u662f\u4e00\u4e2a\u95ee\u9898\u3002\n\n\u4e0d\u8fc7\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6811\u4e2d\u6240\u6709\u975e\u53f6\u8282\u70b9\u662f\u8054\u901a\u7684\u3002\u6211\u4eec\u4e0d\u59a8\u8ba9\u4ed6\u4eec\u8fde\u6210\u4e00\u6761\u94fe\uff0c\u7136\u540e\u4e24\u8fb9\u5404\u8fde\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\uff0c\u76f4\u5f84\u7684\u957f\u5ea6\u5c31\u662f\u6700\u957f\u7684\u3002\n\n\u6240\u4ee5\u6709 $f(P)=(P$ \u4e2d\u6240\u6709\u6ee1\u8db3 $P_i\\ge2$ \u7684 $i$ \u7684\u4e2a\u6570 $)+1$\u3002\n\n\u7136\u540e\u6211\u4eec\u5c31\u5b8c\u5168\u628a\u6811\u629b\u5f00\u4e86\u3002\n\n\u63a5\u4e0b\u6765\u600e\u4e48\u8ba1\u7b97\u5462\uff1f\n\n#### (2) \u7edf\u8ba1\u7b54\u6848\n\n\u8bbe $ans_n$ \u4e3a $n$ \u7684\u6700\u7ec8\u7b54\u6848\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u6709 $k(2\\le k<n)$ \u4e2a\u53f6\u5b50\u7684\u65f6\u5019\uff0c\u5bf9\u7b54\u6848\u4ea7\u751f\u591a\u5c11\u8d21\u732e\u3002\n\n\u9996\u5148\uff0c\u8981\u5728 $n$ \u4e2a\u70b9\u4e2d\u9009\u62e9 $k$ \u4e2a\u4f5c\u4e3a\u53f6\u5b50\uff0c\u5373 $\\dbinom{n}{k}$\u3002\n\n\u5176\u6b21\uff0c\u8981\u628a\u5269\u4e0b\u7684\u5ea6\u6570\u5206\u7ed9 $(n-k)$ \u4e2a\u70b9\uff0c\u4e00\u5171\u6709 $2n-2-k$ \u4e2a\u5ea6\u6570\uff0c\u6bcf\u4e2a\u70b9\u7684\u5ea6\u6570\u81f3\u5c11\u4e3a $2$\uff0c\u6839\u636e\u5c0f\u5b66\u5965\u6570\u7684\u77e5\u8bc6\uff0c\u8d21\u732e\u8981\u4e58\u4e0a $\\dbinom{(2n-2-k)-(n-k)-1}{(n-k)-1}=\\dbinom{n-3}{n-k-1}=\\dbinom{n-3}{k-2}$\u3002\n\n\u6700\u540e\u5728\u4e58\u4e0a\u76f4\u5f84\u957f\u5ea6 $(n-k+1)$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5f97\u5230\u4e86\u7b54\u6848\uff1a\n\n$$ans_n=\\sum\\limits_{k=2}^{n-1}\\dbinom{n}{k}\\cdot\\dbinom{n-3}{k-2}\\cdot(n-k+1)$$\n\n\uff08\u6ce8\u610f\u8fd9\u91cc\u8981\u7279\u5224 $n=2$\uff09\n\n\u505a\u5b8c\u4e86\u3002\n\n\u4f46\u8fd8\u6ca1\u6709\u5b8c\u5168\u505a\u5b8c\u3002\n\n### (3) \u4f18\u5316\n\n\u4e0a\u9762\u7684\u505a\u6cd5\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(Tn)$\uff0c\u4f1a TLE\u3002\uff08\u60b2\n\n\u5bf9\u7740\u5f0f\u5b50\u60f3\u4e86\u534a\u5929\uff0c\u6ca1\u60f3\u5230\u4ec0\u4e48\u4f18\u5316\u7684\u601d\u8def\u3002\n\n\u4e8e\u662f\u5f00\u59cb\u4e71\u641e\u3002\n\n\u9996\u5148\uff0c\u6253\u8868\u3002\n\n$$ans_2=1,ans_3=6,ans_4=26,ans_5=110,ans_6=462,ans_7=1932,ans_8=8052,ans_9=33462,\\ldots$$\n\n\u2026\u2026\u770b\u4e0d\u51fa\u4efb\u4f55\u89c4\u5f8b\u3002\n\n\u4e8e\u662f\u4e0a [OEIS](https://oeis.org) \u641c\u3002\n\n\u2026\u2026\u641c\u4e0d\u5230\u3002\n\n\u4e8e\u662f\u5f00\u59cb\u77aa\u773c\u5927\u6cd5\u3002\n\n\u7a81\u7136\u53d1\u73b0\u76f8\u90bb\u4e24\u9879\u7684\u5546\u63a5\u8fd1 $4$\u3002\n\n\u4e8e\u662f\uff0c\u641e\u51fa $g_x=ans_{x+1}-4\\cdot ans_x$\u3002\n\n$$g_2=2,g_3=2,g_4=6,g_5=22,g_6=84,g_7=324,g_8=1254,\\ldots$$\n\n\u53d1\u73b0\u5168\u662f\u5076\u6570\u3002\u4e8e\u662f\uff0c\u4ee4 $h_x=\\dfrac{g_x}{2}$\uff1a\n\n$$h_2=1,h_3=1,h_4=3,h_5=11,h_6=42,h_7=162,h_8=627,\\ldots$$\n\n\u53d1\u73b0 $h$ \u53ef\u4ee5\u5728 OEIS \u4e0a[\u641c\u5230](https://oeis.org/search?q=1%2C1%2C3%2C11%2C42%2C162%2C627&language=english&go=Search)\u3002\n\n$$h_{n+2}=\\dfrac{cat_n\\cdot(n^2+2)}{n+2}$$\n\n\uff08\u5176\u4e2d $cat$ \u662f [$\\text{Catalan}$ \u6570](https://baike.baidu.com/item/%E5%8D%A1%E7%89%B9%E5%85%B0%E6%95%B0/6125746?fromtitle=catalan%E6%95%B0%E5%88%97&fromid=10814050&fr=aladdin)\uff09\n\n$h$ \u53ef\u4ee5\u7ebf\u6027\u8ba1\u7b97\u3002\n\n$$ans_{x+1}=4\\cdot ans_x+2\\cdot h_x\\ (x\\ge2),ans_2=1$$\n\n\u7136\u540e\u8fd9\u9898\u5c31\u771f\u7684\u505a\u5b8c\u4e86\u3002\n\n### 3. \u4ee3\u7801\n\n\u8fd9\u91cc\u5c31\u4e0d\u653e\u4e86\uff0c\u4ee3\u7801\u6233[\u8fd9\u91cc](https://atcoder.jp/contests/abc290/submissions/39046485)\u3002",
        "postTime": 1677043542,
        "uid": 549499,
        "name": "Donotplaygame",
        "ccfLevel": 5,
        "title": "ABC290F \u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\u7b80\u8ff0\n\u5b9a\u4e49\u6570\u5217 $x_i\\ (x_i\u2208N^+)$ \u7684\u6743\u503c\u4e3a \u6ee1\u8db3\u5bf9\u4e8e $\u2200i\u2208N^+,i\\leq n$ \u90fd\u6709\u70b9 $i$ \u7684\u5ea6\u6570\u7b49\u4e8e $x_i$ \u7684 $n$ \u4e2a\u8282\u70b9\u7684\u6811\u7684\u6700\u5927\u76f4\u5f84\uff08\u5982\u4e0d\u5b58\u5728\u5219\u4e3a $0$\uff09\u3002\u5171 $T\\ (T\\leq 2\\times 10^5)$ \u7ec4\u6570\u636e\uff0c\u6bcf\u7ec4\u6570\u636e\u7ed9\u51fa\u6b63\u6574\u6570 $n\\ (n\\leq 10^6)$, \u6c42\u51fa\u6240\u6709\u957f\u4e3a $n$ \u7684\u6570\u5217\u7684\u6743\u503c\u548c\u3002\n\n## \u9898\u76ee\u5206\u6790\n\u9898\u610f\u6bd4\u8f83\u8ff7\u60d1\uff0c\u9996\u5148\u5bb9\u6613\u77e5\u9053 $n$ \u4e2a\u70b9\u7684\u6811\u5404\u70b9\u5ea6\u6570\u4e4b\u548c\u4e3a $2\\times n-2$, \u56e0\u4e3a\u6811\u6709 $n-1$ \u6761\u8fb9\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u6211\u4eec\u5c1d\u8bd5\u5bf9\u4e8e\u4e00\u4e2a\u5408\u6cd5\u7684 $x_i$ \u6c42\u6700\u5927\u76f4\u5f84\u3002\n\n\u6ce8\u610f\u5230\u6709\u4e00\u4e2a\u76f4\u5f84\u7684\u6c42\u6cd5\u662f\u6bcf\u6b21\u5220\u6389\u53f6\u8282\u70b9\uff0c\u76f4\u5230\u6811\u88ab\u5220\u7a7a\uff0c\u90a3\u4e48\u8981\u6c42\u76f4\u5f84\u6700\u5927\u5373\u8981\u6c42\u5220\u70b9\u7684\u8f6e\u6570\u6700\u591a\u3002\u7b2c\u4e00\u8f6e\u5220\u70b9\u7684\u6570\u91cf\u663e\u7136\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u4e4b\u540e\u7684\u6bcf\u8f6e\u5fc5\u81f3\u5c11\u5220\u6389\u4e24\u4e2a\u70b9\uff08\u5426\u5219\u5ea6\u6570\u548c $\\leq 2\\times n'-2$, \u77db\u76fe\uff09\uff0c\u800c\u53c8\u80fd\u8d2a\u5fc3\u5730\u53d1\u73b0\u4e4b\u540e\u5fc5\u53ef\u4ee5\u6784\u9020\u51fa\u6bcf\u8f6e\u53ea\u5220\u4e24\u4e2a\u70b9\u7684\u65b9\u6848\uff08\u5269\u4e0b\u4e00\u6761\u94fe\uff09\u3002\u4e8e\u662f\u5bf9\u4e8e\u4e00\u4e2a\u542b $i$ \u4e2a $1$ \u7684\u6570\u5217 $x_i$, \u5176\u5bf9\u5e94\u7684\u6700\u5927\u76f4\u5f84\u662f $2+(n-i-1)=n-i+1$, \u6784\u9020\u662f\u4e00\u6761\u957f\u4e3a $n-i-1$ \u7684\u94fe\u4e0a\u6302\u4e86 $i$ \u4e2a\u70b9\u3002\n\n\u4e8e\u662f\u7528\u4e0a\u8ff0\u60f3\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5 $O(Tn)$ \u5730\u505a\u672c\u9898\uff0c\u5373 \n\n$$ans(n)=\\sum_{i=2}^{n-1}((n-i+1)\\times C_n^i\\times C_{n-3}^{n-i-1})$$\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u4f18\u5316\u3002\n\n$$\n\\begin{aligned}\nans(n)&=\\sum_{i=2}^{n-1}((n-i+1)\\times C_n^i\\times C_{n-3}^{n-i-1}) \\\\\n&=\\sum_{i=2}^{n-1}((n-i)\\times C_n^{n-i}\\times C_{n-3}^{i-2}+C_n^{n-i}\\times C_{n-3}^{i-2}) \\\\\n&=\\sum_{i=2}^{n-1}(n\\times C_{n-1}^{n-i-1}\\times C_{n-3}^{i-2}+C_n^{n-i}\\times C_{n-3}^{i-2}) \\\\\n&=n\\times C_{2n-4}^{n-3}+C_{2n-3}^{n-2}\n\\end{aligned}\n$$\n\n\u5230\u6b64\u6211\u4eec\u53ef\u4ee5\u9884\u5904\u7406\u540e $O(1)$ \u8ba1\u7b97\u4e86\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u6b65\u662f\u56e0\u4e3a $C_n^i=\\sum_{j=0}^{i}(C_m^j\\times C_{n-m}^{i-j})$\uff0c\u5373\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\uff0c\u7ec4\u5408\u610f\u4e49\u663e\u7136\u3002\u4f46\u53ef\u60dc\u6211\u8d5b\u65f6\u4e0d\u4f1a\u8fd9\u4e2a\u4e1c\u897f\uff0c\u4e8e\u662f\u6302\u6389\u4e86\uff0c\u4e0d\u4f1a\u505a\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\n#define mod 998244353\n#define int long long\n\nint t,n,dp[2000005],jc[2000005],ny[2000005];\n\nint ksm(int x,int k)\n{\n\tint na=1,nx=x;\n\tfor(int i=1;i<=k;i<<=1)\n\t{\n\t\tif(i&k) {na*=nx; na%=mod;}\n\t\tnx*=nx; nx%=mod;\n\t}\n\treturn na;\n}\nvoid init()\n{\n\tjc[0]=1;\n\tfor(int i=1;i<=2000000;i++) jc[i]=(jc[i-1]*i)%mod;\n\tny[2000000]=ksm(jc[2000000],mod-2);\n\tfor(int i=1999999;i>=0;i--) ny[i]=(ny[i+1]*(i+1))%mod;\n}\nint c(int x,int y) {return (jc[x]*ny[y])%mod*ny[x-y]%mod;}\n\nvoid ans(int i) {dp[i]=(i*c(2*i-4,i-3)%mod+c(2*i-3,i-2))%mod;}\n\nsigned main()\n{\n\tcin>>t; init();\n\twhile(t--)\n\t{\n\t\tcin>>n; if(n==2) {cout<<\"1\"<<endl; continue;}\n\t\tans(n); cout<<dp[n]<<endl;\n\t}\n}\n```\n",
        "postTime": 1676897489,
        "uid": 529697,
        "name": "PEKKA_l",
        "ccfLevel": 6,
        "title": "ABC290F \u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\u5206\u6790\uff1a\r\n\r\n\u591a\u7ec4\u8be2\u95ee\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u6b63\u6574\u6570 $n$\uff0c\u8868\u793a\u6811\u7684 $n$ \u4e2a\u8282\u70b9\u3002\u5b9a\u4e49\u96c6\u5408 $S$ \u4e3a\u8fd9 $n$ \u4e2a\u8282\u70b9\u7684\u5ea6\u6570\u3002\u5b9a\u4e49 $f(S)$ \u4e3a\u5f53\u524d\u5728 $S$ \u7684\u9650\u5236\u4e0b\u6811\u7684\u6700\u5927\u76f4\u5f84\u3002\u6c42\u6240\u6709 $f(S)$ \u7684\u548c\u3002\r\n\r\n### \u9898\u76ee\u5206\u6790\uff1a\r\n\r\n\u5b9a\u4e49\u5927\u5c0f\u4e3a $n$ \u7684\u53ef\u91cd\u6b63\u6574\u6570\u96c6\u5408 $S$\uff0c$S_i$ \u8868\u793a\u7b2c $i$ \u4e2a\u8282\u70b9\u7684\u5ea6\u6570\u3002\r\n\r\n\u7ed3\u8bba $1$\uff1a\u5bf9\u4e8e\u4efb\u4f55\u4e00\u68f5\u6709 $n$ \u4e2a\u8282\u70b9\u7684\u6811\uff0c\u5ea6\u6570\u548c\u4e3a $2n-2$\u3002\u5373 $\\sum_{x\\in S}x=2n-2$\u3002\u7ed3\u8bba\u663e\u7136\u3002\r\n\r\n\u7ed3\u8bba $2$\uff1a\u5bf9\u4e8e\u4e00\u68f5\u6811\u7684\u76f4\u5f84\uff0c\u76f4\u5f84\u662f\u96c6\u5408 $S$ \u5185\u5927\u4e8e\u7b49\u4e8e $2$ \u7684\u6574\u6570\u7684\u4e2a\u6570\u3002\u5f53\u7136\uff0c\u4e5f\u6709\u4f8b\u5916\uff0c\u5c31\u662f\u6811\u53d8\u6210\u4e00\u4e2a\u83ca\u82b1\u56fe\u7684\u65f6\u5019\uff0c\u6700\u5927\u76f4\u5f84\u4e3a $2$\u3002\u7ed3\u8bba\u663e\u7136\u3002\r\n\r\n\u7ed3\u8bba $3$\uff1a\r\n\r\n$\\begin{aligned}\\sum f(S)&=\\sum(\\text{S \u4e2d\u5927\u4e8e\u7b49\u4e8e 2 \u7684\u6b63\u6574\u6570\u4e2a\u6570+1})\\\\&\r\n=(\\sum_{x\\in S}x=2n-2\\text{ \u7684\u4e2a\u6570})+\\sum(\\text{\u6240\u6709 S \u4e2d\u5927\u4e8e\u7b49\u4e8e 2 \u7684\u6b63\u6574\u6570\u4e2a\u6570})\\\\&=\r\n(\\sum_{x\\in S}x=2n-2\\text{ \u7684\u4e2a\u6570})+n\\times(\\sum_{x\\in S}x=2n-2 \\text{\u5e76\u4e14 }x_1\\ge2\\text{ \u7684\u4e2a\u6570})\r\n\\end{aligned}$\r\n\r\n\u8003\u8651\u63d2\u677f\u6cd5\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5f80\u4e0b\u63a8\uff1a\r\n\r\n$\\begin{aligned}\\text{\u539f\u5f0f}=&\\binom{2n-3}{n-1}+\\binom{2n-4}{n-1}\\times n\\end{aligned}$\u3002\r\n\r\n\u53ef\u4ee5\u9884\u5904\u7406\uff0c\u7136\u540e $O(1)$ \u8be2\u95ee\u3002\r\n\r\n\u4ee3\u7801\u5982\u4e0b\uff1a\r\n\r\n```\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\ntypedef long long ll;\r\nconst int mod=998244353;\r\nconst int N=3e6+10;\r\nll QP(ll x,ll y){ll ans=1;for(;y;y>>=1,x=x*x%mod)if(y&1) ans=ans*x%mod;return ans;}\r\nll fac[N],nfac[N];\r\nvoid init(){\r\n\tfac[0]=1;for(int i=1;i<=N-10;i++) fac[i]=fac[i-1]*i%mod;\r\n\tnfac[N-10]=QP(fac[N-10],mod-2);for(int i=N-11;i>=0;i--) nfac[i]=nfac[i+1]*(i+1)%mod;\r\n} \r\nll C(ll x,ll y){if(x<y||x<0||y<0) return 0;return nfac[y]*nfac[x-y]%mod*fac[x]%mod;}\r\nint main(){\r\n\tinit();\r\n\tll T,n;\r\n\tscanf(\"%d\",&T);\r\n\twhile(T--){\r\n\t\tscanf(\"%lld\",&n);\r\n\t\tprintf(\"%lld\\n\",(C(2*n-3,n-1)+C(2*n-4,n-1)*n)%mod);\r\n\t}return 0;\r\n}\r\n```\r\n\r\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n+T)$\u3002\r\n",
        "postTime": 1676872131,
        "uid": 511271,
        "name": "\u30c0\u6708",
        "ccfLevel": 5,
        "title": "Maximum Diameter"
    },
    {
        "content": "\u5438\u6536\u6052\u7b49\u5f0f\u3001\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\u3002\n\n\u4e3a\u4ec0\u4e48\u6211\u80fd\u5207\u9ec4\u9898\u7684\u573a\u6211\u90fd\u6ca1\u6253\u554a /ll\n\n------------------------\n\n\u5148\u8003\u8651\u786e\u5b9a\u5ea6\u6570\u6570\u7ec4\u65f6\u600e\u4e48\u505a\u3002\u663e\u7136 $\\sum x_i = 2n-2$\u3002\n\n\u624b\u73a9\u4e00\u4e0b\u53d1\u73b0\u7b54\u6848\u662f $\\sum [x_i > 1] + 1$\u3002\n\n\u8bc1\u660e\uff1f$x_i=1$ \u5c31\u662f\u53f6\u5b50\uff0c\u8003\u8651\u5230\u6700\u591a\u4e24\u7247\u53f6\u5b50\u53c2\u4e0e\u6784\u9020\u76f4\u5f84\uff0c\u5c31\u505a\u5b8c\u4e86\u3002\u628a\u5176\u5b83\u70b9\u4e0a\u4e0b\u4e32\u8d77\u6765\uff0c\u524d\u540e\u5404\u653e\u4e00\u7247\u53f6\u5b50\uff0c\u5982\u679c\u4ecd\u7f3a\u5c11\u5ea6\u6570\u5219\u5f80\u4e0b\u6302\u513f\u5b50\u3002\u56e0\u4e3a $\\sum x_i=2n-2$\uff0c\u70b9\u4e00\u5b9a\u521a\u597d\u7528\u5b8c\u3002\n\n\u679a\u4e3e $\\sum [x_i>1]$\uff0c\u7136\u540e\u679a\u4e3e\u5177\u4f53\u5206\u914d\u65b9\u6848\uff0c\u6700\u540e\u5728\u603b\u6570\u4e2d\u9009\u51fa\u6709\u503c\u7684\u6570\u5b57\u3002\n\n\u8bbe\u5171 $k$ \u6570\uff0c\u5177\u4f53\u5206\u914d\u65b9\u6848\uff1a\u9884\u5148\u6bcf\u6570\u51cf\u4e00 $n-2$ \u5206\u4e3a $k$ \u4efd\u975e\u96f6\u3002\n\n$$\n=\\sum_{k=1}^{n-2} \\binom{n-3}{k-1} \\binom{n}{k} (k+1) \n$$\n\n\u5b83\u5f88\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\u554a\uff0c\u4f46\u662f\u6709\u4e2a $k+1$\uff0c\u8981\u628a\u5b83\u5438\u6536\u6389\u3002\n\n\u719f\u77e5\u7684\u5438\u6536\u6052\u7b49\u5f0f\uff1a$\\displaystyle \\binom{n}{k} = \\dfrac{n}{k} \\binom{n-1}{k-1}$\u3002\u5316\u4e00\u4e0b\u5373 $\\displaystyle  k\\binom{n}{k} = n\\binom{n-1}{k-1}$\u3002\n\n$$\n=\\sum_{k=1}^{n-2} n\\binom{n-3}{k-1} \\binom{n-1}{k-1} + \\sum_{k=1}^{n-2} \\binom{n-3}{k-1} \\binom{n}{k}\n$$\n\n\u5b83\u7684\u4e0a\u6307\u6807\u662f\u5b9a\u503c\uff0c\u4e0b\u6307\u6807\u5dee\u4e5f\u662f\u5b9a\u503c\uff0c\u8fd9\u4e0d\u53cd\u8f6c\u4e0b\u6307\u6807\u505a\u8303\u5fb7\u8499\u5fb7\u5377\u79ef\uff1a\n\n$$\n= n \\sum_{k=1}^{n-2} \\binom{n-3}{k-1} \\binom{n-1}{n-k} + \\sum_{k=1}^{n-2} \\binom{n-3}{k-1} \\binom{n}{n-k} \n$$\n\n$$\n= n \\binom{2n-4}{n-1} + \\binom{2n-3}{n-1}\n$$\n\n$\\square$.\n\n\u518d\u7ed9\u6211\u4e00\u6b21\u673a\u4f1a\uff0c\u6211\u7edd\u5bf9\u4e0d\u4f1a\u9519\u8fc7\u8fd9\u573a\u5728\u5468\u65e5\u7684 abc\u3002",
        "postTime": 1676871529,
        "uid": 443664,
        "name": "Missa",
        "ccfLevel": 0,
        "title": "\u4e3a\u4ec0\u4e48\u6211\u80fd\u5207\u9ec4\u9898\u7684\u573a\u6211\u90fd\u6ca1\u6253\u554a"
    },
    {
        "content": "\u542c\u540c\u5b66\u8bf4\u8fd9\u6b21 ABC \u7684 F \u6bd4 G \u96be\uff0c\u6240\u4ee5\u5199\u5b8c G \u540e\u53c8\u7834\u683c\u770b\u4e86\u770b F\u3002\n\n\u6211\u5b9e\u5728\u60f3\u4e0d\u660e\u767d G \u90a3\u4e48\u6c34\u662f\u600e\u4e48\u5728 kenkoooo \u4e0a\u8bc4\u51fa 2400 \u7684\u96be\u5ea6\u7684\uff0c\u4f60\u4e0a ARCAGC \u968f\u4fbf\u62ff\u4e2a 2400 \u7684\u9898\u90fd\u8ddf\u8fd9\u4e2a\u6ca1\u6cd5\u6bd4\u554a\u3002\n\nF \u5b98\u65b9\u9898\u89e3\u7684\u90a3\u4e2a\u63a8\u5bfc\u633a\u795e\u5947\u7684\uff0c\u6839\u672c\u6ca1\u5f80\u90a3\u8fb9\u60f3\uff0c\u6240\u4ee5\u53c8\u641e\u51fa\u4e86\u4e00\u4e2a\u5947\u602a\u7684\u505a\u6cd5\uff0c\u6240\u4ee5\u5c31\u53d1\u7bc7\u9898\u89e3\u3002\n\n\u7b2c\u4e00\u6b65\u7684\u63a8\u5bfc\u633a\u663e\u7136\u7684\uff0c\u6211\u8bb0\u5f97\u662f\u4e4b\u524d\u6709\u4e00\u6b21\u725b\u5ba2\u7ec3\u4e60\u8d5b\u7684 B\uff0c\u4f46\u4e0d\u540c\u7684\u662f\u90a3\u4e2a\u53ea\u9700\u8981\u5904\u7406\u4e00\u6b21\u8be2\u95ee\u3002\u4e0d\u96be\u53d1\u73b0\u5408\u6cd5\u7684 $X$ \u5176\u5b9e\u5c31\u662f\u8981\u6ee1\u8db3\u6bcf\u4e2a\u6570\u90fd\u662f\u6b63\u6574\u6570\u4e14\u548c\u4e3a $2(n-1)$\uff0c\u800c\u9898\u9762\u4e2d\u6240\u8c13\u7684 $f(X)$ \u5176\u5b9e\u5c31\u662f $X$ \u4e2d\u4e0d\u4e3a 1 \u7684\u4f4d\u7f6e\u7684\u4e2a\u6570\u52a0\u4e00\u3002\n\n\u90a3\u4e48\u5148\u7279\u5224\u6389 $n=2$\uff0c\u5bf9\u4e8e\u5269\u4e0b\u7684\u60c5\u51b5\u4e00\u5b9a\u4f1a\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u4e0d\u4e3a 1 \u7684\u4f4d\u7f6e\u3002\n\n\u7136\u540e\u6211\u5c31\u5f00\u59cb\u548c\u5b98\u65b9\u505a\u6cd5\u8d8a\u8d70\u8d8a\u8fdc\u4e86\uff0c\u548c\u5b98\u65b9\u505a\u6cd5\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u6211\u76f4\u63a5\u8f6c\u800c\u8003\u8651\u679a\u4e3e $i$ \u5e76\u6c42\u51fa $f(X)=i$ \u7684 $X$ \u7684\u6570\u91cf~~\u4e3b\u8981\u662f\u6253\u725b\u5ba2\u7684\u65f6\u5019\u5c31\u662f\u8fd9\u4e48\u63a8\u7684~~\u3002\n\n\u90a3\u4e48\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u6570\u91cf\u5176\u5b9e\u5c31\u662f\u5148\u4e00\u4e2a\u7ec4\u5408\u6570\u679a\u4e3e\u51fa\u54ea\u4e9b\u4f4d\u7f6e\u4e0d\u4e3a 1\uff0c\u7136\u540e\u9694\u677f\u6cd5\u6c42\u51fa\u5206\u914d\u65b9\u6848\u7684\u6570\u91cf\u3002\n\n\u90a3\u4e48\u7b54\u6848\u5176\u5b9e\u5c31\u662f\n\n$$\n\\sum\\limits_{i=1}^{n-2}iC_n^iC_{n-3}^{i-1}\n$$\n\n\u90a3\u4e48\u628a\u7ec4\u5408\u6570\u62c6\u5f00\u5e76\u5c06 $i$ \u51cf\u53bb 1\uff0c\u5f97\u5230\n\n$$\n\\sum\\limits_{i=0}^{n-3}(i+1)\\dfrac{(n-3)!n!}{(i-1)!i!(n-i-2)!(n-i)!}\n$$\n\n\u90a3\u4e48\u6211\u4eec\u8bbe $a_i = \\dfrac{i+1}{(i-1)!i!}$\uff0c$b_i = \\dfrac 1{(n-i-2)!(n-i)!}$\u3002\n\n\u90a3\u4e48\u7b54\u6848\u5176\u5b9e\u5c31\u662f $(n-3)!n!\\sum\\limits_{i=0}^{n-3}a_ib_{n-i}$\u3002\n\n\u7136\u540e\u4f60\u4f1a\u53d1\u73b0\u8fd9\u662f\u4e2a\u7ecf\u5178\u7684 NTT\uff0c\u76f4\u63a5\u505a\u5c31\u884c\u4e86\uff0c\u8be2\u95ee\u65f6\u76f4\u63a5\u53d6\u51fa\u7b2c $n$ \u9879\u7684\u503c\u5373\u53ef\u3002\n\n\u867d\u7136\u4e00\u822c\u7684 NTT \u9898\u90fd\u5f88\u4e0d\u597d\u5199\uff0c\u4f46\u8fd9\u4e2a\u5176\u5b9e\u8fd8\u53ef\u4ee5\uff0c\u56e0\u4e3a\u4f60\u53ea\u9700\u8981\u5728\u56de\u7b54\u8fd9\u4e9b\u95ee\u9898\u524d\u505a\u4e00\u6b21\u5c31\u884c\u4e86\uff0c\u800c\u4e14\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\uff0c\u76f4\u63a5\u4e0a\u677f\u5b50\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\u96be\u5ea6\u548c\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u88ab\u6807\u7b97\u540a\u6253\uff0c\u4f46\u6211\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u8fd9\u6837\u90fd\u8fd8\u4f1a\u6709\u4eba\u6bd4\u6211\u8dd1\u5f97\u6162\uff0c\u800c\u4e14\u8fd8\u6709\u4e0d\u5c11\u3002\n\n\u4ee3\u7801\uff08\u611f\u89c9\u8bb2\u7684\u6bd4\u8f83\u6e05\u695a\u4e86~~\u83ab\u540d\u81ea\u4fe1~~\uff0c\u6240\u4ee5\u5c31\u4e0d\u5199\u6ce8\u91ca\u4e86\uff09\uff1a\n```\n#include<cstdio>\n#define TY ll\n#define MAXN 2097152\n#define MAXM 1000002\n#define debug if( 1 &&putchar('>'))\n#define FOR(i,a,b) for(TY i=(a);i<=(b);i=-~i)\n#define fOR(i,a,b) for(TY i=(a);i<(b);i=-~i)\n#define ROF(i,a,b) for(TY i=(a);i>=(b);i=~-i)\n#define rOF(i,a,b) for(TY i=(a);i>(b);i=~-i)\nusing namespace std;\ntypedef long long ll;\nconst TY M=998244353,dvn=998243877;\ntypedef unsigned long long ull;\nTY _abs(TY a){return a<0?-a:a;}\nTY maxn(TY a,TY b){return a>b?a:b;}\nTY minn(TY a,TY b){return a<b?a:b;}\ninline void updmx(TY &x,TY y){if(x<y)x=y;}\ninline void updmn(TY &x,TY y){if(x>y)x=y;}\ninline void add(TY &x,TY y){if((x+=y)>=M)x-=M;}\nTY gcd(TY a,TY b){return b?gcd(b,a%b):a;}\nTY qp(TY a,TY b){TY ans=1;do{if(1&b)ans=ans*a%M;a=a*a%M;}while(b>>=1);return ans;}\nchar getc(){char ch=getchar();while(ch==' '||ch=='\\n'||ch=='\\r')ch=getchar();return ch;}\nTY qr(){\n\tchar ch=getchar();TY s=0,x=1;\n\tfor(;ch<'0'||ch>'9';ch=getchar())if(ch=='-')x=-1;\n\tfor(;ch>='0'&&ch<='9';ch=getchar())s=s*10+ch-'0';return x*s;\n}void qw(TY a){if(a>9)qw(a/10);putchar(a%10+'0');}\nvoid qw(TY a,char ch){\n\tif(a<0){a=-a;putchar('-');}\n\tif(a>9)qw(a/10);putchar(a%10+'0');\n\tif(ch)putchar(ch);\n}TY T=qr(),fc[MAXM],dv[MAXM],r[MAXN],a[MAXN],b[MAXN],pw,w,tmp=M-1,p,q,n;\nint main(){\n\tfOR(i,fc[0]=dv[0]=dv[1]=1,MAXM)fc[i]=fc[i-1]*i%M;\n\tfOR(i,2,MAXM)dv[i]=M-M/i*dv[M%i]%M;\n\tfOR(i,2,MAXM)dv[i]=dv[i]*dv[i-1]%M;\n\tfor(TY i=1;i<MAXN;i<<=1)fOR(j,0,i)r[j|i]=(r[j]<<=1)|1;\n\tfOR(i,1,MAXM){\n\t\tif(i>1)b[r[i]]=dv[i-2]*dv[i]%M;\n\t\ta[r[i]]=(i+1)*dv[i-1]%M*dv[i]%M;\n\t}for(TY i=1;i<MAXN;i<<=1){\n\t\tw=qp(3,tmp>>=1);\n\t\tfor(TY j=0;j<MAXN;j+=(i<<1)){\n\t\t\tpw=1;fOR(k,0,i){\n\t\t\t\tp=a[j|k];q=a[j|k|i]*pw%M;\n\t\t\t\tif((a[j|k]=p+q)>=M)a[j|k]-=M;\n\t\t\t\tif((a[j|k|i]=p-q)<0)a[j|k|i]+=M;\n\t\t\t\tp=b[j|k];q=b[j|k|i]*pw%M;\n\t\t\t\tif((b[j|k]=p+q)>=M)b[j|k]-=M;\n\t\t\t\tif((b[j|k|i]=p-q)<0)b[j|k|i]+=M;pw=pw*w%M;\n\t\t\t}\n\t\t}\n\t}fOR(i,0,MAXN)a[i]=a[i]*b[i]%M;tmp=M-1;\n\tfOR(i,1,MAXN)if(r[i]>i)a[i]^=a[r[i]]^=a[i]^=a[r[i]];\n\tfor(TY i=1;i<MAXN;i<<=1){\n\t\tw=qp(3,M-1-(tmp>>=1));\n\t\tfor(TY j=0;j<MAXN;j+=(i<<1)){\n\t\t\tpw=1;fOR(k,0,i){\n\t\t\t\tp=a[j|k];q=a[j|k|i]*pw%M;\n\t\t\t\tif((a[j|k]=p+q)>=M)a[j|k]-=M;\n\t\t\t\tif((a[j|k|i]=p-q)<0)a[j|k|i]+=M;pw=pw*w%M;\n\t\t\t}\n\t\t}\n\t}fOR(i,0,MAXN)a[i]=a[i]*dvn%M;\n\twhile(T--){\n\t\tif((n=qr())==2){printf(\"1\\n\");continue;}\n\t\tqw(a[n]*fc[n]%M*fc[n-3]%M,'\\n');\n\t}return 0;\n}\n```",
        "postTime": 1676987928,
        "uid": 184168,
        "name": "xuanxuan001",
        "ccfLevel": 8,
        "title": "\u9898\u89e3AT_abc290_f\u3010Maximum Diameter\u3011"
    }
]
[
    {
        "content": "### \u7b80\u5355\u72b6\u6001\u538b\u7f29DP\u3002\n\n\u8bb0 $ F[i][S] $ \u4e3a\u4ece $i$ \u51fa\u53d1\uff0c\u6070\u597d\u80fd\u901a\u8fc7 $S$ \u96c6\u5408\u5185\u6240\u6709\u70b9\u7684\u65b9\u6848\u6570\n\n\u5982 $F[1][12]$\u8868\u793a\u4ece $1$ \u53f7\u70b9\u51fa\u53d1\uff0c\u80fd\u5230\u8fbe $1,3,4$ \u53f7\u70b9\u7684\u7ed9\u8fb9\u5b9a\u5411\u7684\u65b9\u6848\u6570$(12 = 1101)$\n\n\u8bb0 $ fully[S] $ \u4e3a \u4e24\u7aef\u70b9**\u90fd\u5728** $S$ \u96c6\u5408\u5185\u7684\u8fb9\u7684\u6570\u91cf\n\n\u8bb0 $ partly[S] $ \u4e3a \u4e24\u7aef\u70b9**\u81f3\u5c11\u6709\u4e00\u4e2a\u5728** $S$ \u96c6\u5408\u5185\u7684\u8fb9\u7684\u6570\u91cf\n\n### \u8003\u8651\u5bb9\u65a5\u7b97\u51fa$F$\n\n\u521d\u503c\u4e3a$F[i][S] = 2^{fully[sub]}$ \uff0c\u5373 $S$ \u5185\u7684\u8fb9\u65b9\u5411\u4efb\u610f\n\n\u63a5\u7740\uff0c$F[i][s] -= F[i][S-subset] * 2^{fully[subset]})$\uff0c\u5373\u51cf\u53bb $i$ \u53ea\u80fd\u5230\u8fbe $S$ \u7684\u4e00\u4e2a\u5b50\u96c6\u5185\u7684\u70b9\u7684\u65b9\u6848\uff0c\u6b64\u65f6 $S$ \u5185\u9664\u8be5\u5b50\u96c6\u5916\u5269\u4f59\u7684\u8fb9\u65b9\u5411\u4efb\u610f\u3002\n\n### \u8003\u8651\u5bb9\u65a5\u7b97\u51fa$ans$\n\n\u521d\u503c\u4e3a $ ans = 2^m $\uff0c\u5373\u6240\u6709\u8fb9\u65b9\u5411\u4efb\u610f\n\n\u7136\u540e\u51cf\u53bb$1$\u80fd\u5230\u8fbe\u7684\u70b9\u548c $2$ \u80fd\u5230\u8fbe\u7684\u70b9\u6ca1\u6709\u4ea4\u96c6\u7684\u60c5\u51b5\u3002\n\n\u63a5\u4e0b\u6765\u679a\u4e3e\u4e24\u4e2a\u5b50\u96c6 $sub1$ \u548c $sub2$ \uff0c\u8981\u6c42\u4e3a $(sub1 ~ \\& ~ sub2)$ $ = 0$\uff0c\u4e14 $sub1$ \u548c $sub2$ \u4e4b\u95f4\u6ca1\u6709\u8fb9\u76f8\u8fde\u3002\n\n\u4fdd\u8bc1\u540e\u8005\u6210\u7acb\u7684\u539f\u56e0\u662f\uff0c\u5982\u679c\u5b50\u96c6\u4e4b\u95f4\u6709\u8fb9\u76f8\u8fde\uff0c\u90a3\u4e48\u4e0d\u7ba1\u65b9\u5411\u5982\u4f55\uff0c\u4e24\u4e2a\u5b50\u96c6\u90fd\u4f1a\u8054\u901a\u3002\n\n$ans -= f[1][sub1] * f[2][sub2] * 2^{m-partly[sub1|sub2]}$\uff0c\u5373\uff0c\u4fdd\u8bc1\u6761\u4ef6\uff08 $1$ \u53ea\u80fd\u5230\u8fbe $sub1$\uff0c$2$ \u53ea\u80fd\u5230\u8fbe $sub2$ \uff09\u6210\u7acb\u540e\uff0c\u5269\u4f59\u7684\u4e0e $sub1,sub2$ \u6ca1\u6709\u5173\u7cfb\u7684\u8fb9\u65b9\u5411\u4efb\u610f\u3002\n\n\u4e8e\u662f\u5c31\u505a\u5b8c\u4e86\u3002\n\n$code$\n\n\u4f7f\u7528 $pw$ \u9884\u5904\u7406 $2$ \u7684\u6574\u6570\u6b21\u5e42\u3002\n\n\n```cpp\n#include <iostream>\n\nusing namespace std;\n\n#define M 405\n#define ll long long\n#define MOD 1000000007\n\nint n, m, all;\nint u[M], v[M], fully[(1<<16)], partly[(1<<16)];\nll ilegal, pw[M], f[3][(1<<16)];\n\ninline int read()\n{\n\tint x = 0, f = 1; char ch = getchar();\n\twhile (!isdigit(ch)) { if (ch == '-') f = -1; ch = getchar(); }\n\twhile (isdigit(ch)) { (x *= 10) += ch - '0'; ch = getchar(); }\n\treturn x * f;\n}\n\nint main()\n{\n\tn = read(), m = read(); all = (1 << n);\n\tfor (int i = 1; i <= m; i++)\n\t\tu[i] = read(), v[i] = read();\n\n\tpw[0] = 1;\n\tfor (int i = 1; i <= m; i++)\n\t\tpw[i] = pw[i-1] * 2 % MOD;\n\n\tfor (int sta = 0; sta < all; sta++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t{\n\t\t\tif ( ((sta >> (u[j]-1)) & 1) & ((sta >> (v[j]-1)) & 1) ) fully[sta]++;\n\t\t\tif ( ((sta >> (u[j]-1)) & 1) | ((sta >> (v[j]-1)) & 1) ) partly[sta]++;\n\t\t}\n\t\t\n\tfor (int i = 1; i <= 2; i++)\n\t\tfor (int sta = 0; sta < all; sta++)\n\t\t{\n\t\t\tif ( !((sta >> (i-1)) & 1) ) continue;\n\t\t\tf[i][sta] = pw[fully[sta]];\n\t\t\tfor (int sub = sta; sub; sub = (sub-1) & sta)\n\t\t\t\tf[i][sta] = ((f[i][sta] - f[i][sta-sub] * pw[fully[sub]] % MOD) % MOD + MOD) % MOD;\n\t\t}\n\t\t\n\tfor (int sub1 = 0; sub1 < all; sub1++)\n\t\tfor (int sub2 = 0; sub2 < all; sub2++)\n\t\t\tif ( !(sub1 & sub2) && fully[sub1] + fully[sub2] == fully[sub1|sub2])\n\t\t\t\tilegal = (ilegal + f[1][sub1] * f[2][sub2] % MOD * pw[m - partly[sub1|sub2]] % MOD) % MOD; \n \n\tcout << ((pw[m] - ilegal) % MOD + MOD) % MOD;\n\n\treturn 0;\n}\n```",
        "postTime": 1599658379,
        "uid": 150218,
        "name": "MikeDuke",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 AT3634 \u3010Nice to Meet You\u3011"
    }
]
[
    {
        "content": "## [AT1227] \u4e8c\u4eba\u306e\u661f\u5ea7\n\n[\u4f20\u9001\u95e8](https://joisc2014.contest.atcoder.jp/tasks/joisc2014_k)\n\n### \u9898\u610f\n\n\u7ed9\u5b9a`n`\u4e2a\u70b9\uff0c\u6bcf\u4e2a\u70b9\u7684\u989c\u8272\u4e3a\u4e09\u79cd\u4e2d\u7684\u4e00\u79cd\uff0c\u6c42\u51fa\u6709\u591a\u5c11\u5bf9\u4e0d\u76f8\u4ea4\u7684\u4e09\u89d2\u5f62\uff08\u4e09\u89d2\u5f62\u7684\u4e09\u4e2a\u9876\u70b9\u5fc5\u987b\u6ee1\u8db3\u989c\u8272\u4e0d\u540c\uff09\n\n\u4fdd\u8bc1\u6ca1\u6709\u4e09\u70b9\u5171\u7ebf\n\n$6 \\leqslant n \\leqslant 2000$\n\n### \u9898\u89e3\n\n\u53ea\u6709\u5f53\u5b58\u5728\u4e00\u6761\u76f4\u7ebf\u80fd\u591f\u5c06\u4e24\u4e2a\u4e09\u89d2\u5f62\u5206\u5728\u4e24\u4e2a\u5e73\u9762\u5185\u65f6\u8fd9\u4e24\u4e2a\u4e09\u89d2\u5f62\u4e0d\u76f8\u4ea4\u3002\n\n\u8003\u8651\u4e09\u89d2\u5f62\u7684\u5185\u516c\u5207\u7ebf\uff0c\u4e24\u4e2a\u4e09\u89d2\u5f62\u7684\u5185\u516c\u5207\u7ebf\u4e00\u5b9a\u53ef\u4ee5\u5c06\u4e24\u4e2a\u4e09\u89d2\u5f62\u5206\u5272\u5f00\uff0c\u5e76\u4e14\u4efb\u610f\u4e00\u5bf9\u4e09\u89d2\u5f62\u90fd\u5b58\u5728\u4e24\u6761\u5185\u516c\u5207\u7ebf\u3002\n\n\u6839\u636e\u8fd9\u4e2a\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a $n^3$ \u7684\u505a\u6cd5\uff1a\u679a\u4e3e\u4e24\u4e2a\u70b9\uff0c\u5206\u522b\u4f5c\u4e3a\u4e24\u4e2a\u4e09\u89d2\u5f62\u7684\u4e24\u4e2a\u9876\u70b9\uff0c\u8ba1\u7b97\u51fa\u8fd9\u4e24\u4e2a\u70b9\u6240\u5728\u7684\u76f4\u7ebf\uff0c\u5373\u4e24\u4e2a\u4e09\u89d2\u5f62\u7684\u5185\u516c\u5207\u7ebf\u3002\u6570\u51fa\u5728\u8fd9\u6761\u76f4\u7ebf\u4e0a\u65b9\u548c\u4e0b\u65b9\u6bcf\u79cd\u989c\u8272\u7684\u70b9\u7684\u6570\u91cf\uff0c\u7136\u540e\u76f4\u63a5\u8ba1\u7b97\u7b54\u6848\u5373\u53ef\uff08\u5982\u4f55\u8ba1\u7b97\u7b54\u6848\u53ef\u4ee5\u53c2\u8003\u4ee3\u7801\u4e0d\u8fc7\u76f8\u4fe1\u5927\u5bb6\u90fd\u4f1a\uff09\u3002\u7531\u4e8e\u4e00\u5bf9\u4e09\u89d2\u5f62\u6709\u4e24\u6761\u516c\u5207\u7ebf\uff0c\u6240\u4ee5\u6700\u7ec8\u7b54\u6848\u6839\u636e\u5199\u6cd5\u9664\u4ee5`2`\u6216\u8005`4`\u3002\n\n\u8003\u8651\u4f18\u5316\u6570\u5728\u76f4\u7ebf\u4e0a\u3001\u4e0b\u65b9\u7684\u70b9\u7684\u6570\u91cf\u7684\u8fc7\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u4e00\u4e2a\u70b9\uff0c\u7136\u540e\u65cb\u8f6c\u76f4\u7ebf\uff0c\u6bcf\u6b21\u78b0\u5230\u4e00\u4e2a\u70b9\u5c31\u5c06\u8fd9\u4e2a\u70b9\u4ece\u539f\u6765\u7684\u5e73\u9762\u4e2d\u5220\u9664\u3001\u8ba1\u7b97\u7b54\u6848\u5e76\u52a0\u5165\u53e6\u4e00\u4e2a\u5e73\u9762\u3002\n\n\u6211\u4eec\u5c06\u6240\u6709\u70b9\u6309\u7167\u4e0e\u88ab\u786e\u5b9a\u7684\u70b9\u7684\u76f4\u7ebf\u7684\u659c\u7387\u6392\u5e8f\uff0c\u76f4\u7ebf\u659c\u7387\u4ece\u8d1f\u65e0\u7a77\u5927\u7684\u5f00\u59cb\u65cb\u8f6c\uff0c\u9047\u5230\u70b9\u7684\u987a\u5e8f\u5373\u4e3a\u6392\u5e8f\u540e\u70b9\u7684\u987a\u5e8f\u3002\n\n\u6b64\u65f6\u6bcf\u5bf9\u4e09\u89d2\u5f62\u5728\u4e24\u6761\u516c\u5207\u7ebf\u7684\u6bcf\u4e2a\u7aef\u70b9\u90fd\u88ab\u8ba1\u7b97\u4e86\u4e00\u6b21\uff0c\u4e00\u7ea2\u8ba1\u7b97\u4e86`4`\u6b21\uff0c\u6700\u7ec8\u7b54\u6848\u8981\u9664\u4ee5`4`\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2logn)$\n\n### \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int gi() {\n\tregister int x; register char c, op = 0;\n\twhile(c = getchar(), c < '0' || c > '9') if(c == '-') op = !op;\n\tx = c ^ 48;\n\twhile(c = getchar(), c >= '0' && c <= '9') x = (x << 3) + (x << 1) + (c ^ 48);\n\treturn op ? -x : x;\n}\nint n;\nstruct node {\n\tint x, y, c;\n\tlong long a, b;\n\tbool operator < (const node& t)const {\n\t\tif(a * t.b - b * t.a == 0) return x < t.x;\n\t\treturn (a * t.b - b * t.a > 0) ^ (t.a < 0) ^ (a < 0);\n\t}\n} t[3001], g[3001];\nlong long ans = 0;\nint t1[3], t2[3];\nint bl[3001];\nvoid work(int p) {\n\tt1[0] = t1[1] = t1[2] = t2[0] = t2[1] = t2[2] = 0;\n\tmemcpy(g, t, sizeof(t));\n\tswap(g[p], g[n]);\n\tfor(int i = 1; i < n; i ++)\n\t\tg[i].a = g[i].x - g[n].x, g[i].b = g[i].y - g[n].y;\n\tsort(g + 1, g + n);\n\tfor(int i = 1; i < n; i ++)\n\t\tif(g[i].a >= 0) bl[i] = 0, t1[g[i].c] ++;\n\t\telse bl[i] = 1, t2[g[i].c] ++;\n\tfor(int i = 1; i < n; i ++) {\n\t\tif(bl[i]) t2[g[i].c] --;\n\t\telse t1[g[i].c] --;\n\t\tlong long tmp = 1;\n\t\tfor(int j = 0; j <= 2; j ++) if(j != g[n].c) tmp *= t1[j];\n\t\tfor(int j = 0; j <= 2; j ++) if(j != g[i].c) tmp *= t2[j];\n\t\tans += tmp;\n\t\ttmp = 1;\n\t\tfor(int j = 0; j <= 2; j ++) if(j != g[n].c) tmp *= t2[j];\n\t\tfor(int j = 0; j <= 2; j ++) if(j != g[i].c) tmp *= t1[j];\n\t\tans += tmp;\n\t\tbl[i] ^= 1;\n\t\tif(bl[i]) t2[g[i].c] ++;\n\t\telse t1[g[i].c] ++;\n\t}\n}\nint main() {\n\tn = gi();\n\tfor(int i = 1; i <= n; i ++)\n\t\tt[i].x = gi(), t[i].y = gi(), t[i].c = gi();\n\tfor(int i = 1; i <= n; i ++) work(i);\n\tprintf(\"%lld\\n\", ans / 4);\n\treturn 0;\n}\n```",
        "postTime": 1572505511,
        "uid": 70310,
        "name": "wuzhaoxin",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 AT1227 \u3010\u4e8c\u4eba\u306e\u661f\u5ea7\u3011"
    }
]
[
    {
        "content": "\u53ef\u4ee5\u79f0 $D$ \u7684\u500d\u6570\u4e3a\u89e3\u3002\n\n\u533a\u95f4 $[A+Bi,A+Ci]$ \u7684\u957f\u5ea6\u4e3a $(C-B)i$\uff0c\u60f3\u8981\u4e0d\u5b58\u5728\u89e3\u9996\u5148\u5f97\u6ee1\u8db3 $(C-B)i<D$\uff0c\u8fd9\u91cc\u8bbe $n=\\lfloor \\frac{D-1}{C-B} \\rfloor$\uff0c\u90a3\u4e48 $i\\leq n$\u3002\n\n\u5269\u4e0b\u6765\u7684\u60c5\u51b5\u4e2d\uff0c\u6bcf\u4e2a\u533a\u95f4\u5c31\u6700\u591a\u53ea\u5305\u542b\u4e00\u4e2a\u89e3\u3002\u6211\u4eec\u4e0d\u59a8\u628a\u6240\u6709\u533a\u95f4\u7684\u89e3\u7684\u4e2a\u6570\u4e4b\u548c\u6c42\u51fa\u6765\uff0c\u7136\u540e\u51cf\u6389\u5c31\u662f\u6ca1\u6709\u89e3\u7684\u533a\u95f4\u4e2a\u6570\u3002\n\n\u53ef\u4ee5\u524d\u7f00\u548c\u8ba1\u7b97\uff0c$[0,A+Ci]$ \u7684\u89e3\u7684\u4e2a\u6570\u4e3a $\\lfloor \\frac{Ci+A}{D} \\rfloor$\uff0c$[0,A+Bi]$ \u7684\u89e3\u7684\u4e2a\u6570\u4e3a $\\lfloor \n\\frac{Bi+A-1}{D} \\rfloor$\uff0c\u4ea4\u6362\u4e00\u4e0b\u6c42\u548c\u987a\u5e8f\u53ef\u4ee5\u5199\u6210\n\n$$ \\sum_{i=0}^n \\lfloor \\frac{Ci+A}{D} \\rfloor -\\sum_{i=0}^n \\lfloor \n\\frac{Bi+A-1}{D} \\rfloor $$\n\n\u5957\u4e0a\u7c7b\u6b27\u6a21\u677f\u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(\\log D)$\u3002\u6ce8\u610f\u5230 $A<D$\uff0c\u6240\u4ee5 $i=0$ \u7684\u65f6\u5019\u80af\u5b9a\u65e0\u89e3\uff0c\u56e0\u6b64\u4e0a\u9762\u7684\u548c\u5f0f\u80fd\u4ece $i=0$ \u5f00\u59cb\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MAXT=1e4;\n\nint A,B,C,D;\n\ninline ll squ(ll x) {return x*x;}\ninline ll LIN(ll x) {return (x*(x+1))>>1;}\n\nll euclike(ll a,ll b,ll c,ll n)\n{\n\tif(!a) return (n+1)*(b/c);\n\tif(a<c && b<c)\n\t{\n\t\tll n_=(a*n+b)/c;\n\t\treturn n_*n-euclike(c,c-b-1,a,n_-1);\n\t}\n\treturn LIN(n)*(a/c)+(n+1)*(b/c)+euclike(a%c,b%c,c,n);\n}\n\nint main()\n{\n\tint T;scanf(\"%d\",&T);\n\tfor(int n;T--;)\n\t{\n\t\tscanf(\"%d %d %d %d\",&A,&B,&C,&D);\n\t\tn=(D-1)/(C-B);\n\t\tprintf(\"%lld\\n\",n-euclike(C,A,D,n)+euclike(B,A-1,D,n));\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1671507747,
        "uid": 54591,
        "name": "Seauy",
        "ccfLevel": 9,
        "title": "[ARC111E] Simple Math 3 \u7684\u9898\u89e3"
    }
]
[
    {
        "content": "### \u9898\u76ee\u7ffb\u8bd1\n\n\u6709\u4e00\u4e2a $H\\times W$ \u7684\u56fd\u9645\u8c61\u68cb\u68cb\u76d8\uff0c\u6c42\u4e00\u4e2a**\u8f66**\u4ece $(x_1,y_1)$ \u8d70\u5230 $(x_2,y_2)$ \u6b63\u597d\u7528 $K$ \u6b65\u7684\u65b9\u6848\u6570\u3002\n\n### \u9898\u76ee\u601d\u8def\n\n\u9996\u5148\u770b\u5230\u9898\uff0c\u5f88\u663e\u7136\u662f\u52a8\u6001\u89c4\u5212\u3002$f_{k,i,j}$ \u8868\u793a\u8d70\u5230 $(i,j)$ \u6b63\u597d $k$ \u6b65\u7684\u65b9\u6848\u3002\u4f46\u65f6\u95f4\u590d\u6742\u5ea6\u8fc7\u9ad8\uff0c\u8003\u8651\u8fdb\u884c\u4f18\u5316\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4e0d\u8bb0\u5f55\u5177\u4f53\u8d70\u5230\u54ea\u4e2a\u70b9\u4f4d\uff0c\u6211\u4eec\u53ea\u9700\u77e5\u9053\u5f53\u524d\u5728\u4e0d\u5728\u8d77\u70b9\u5373\u53ef\u3002\u4e8e\u662f\u5c31\u6709 $f_{k,0/1/2/3}$ \u8868\u793a\u7b2c $k$ \u6b65\u65f6\uff0c\u5f53\u524d\u4f4d\u7f6e\u4e3a $(x_1,y_1),(x_1,\u975ey_1),(\u975ex_1,y_1),(\u975ex_1,\u975ey_1)$\u3002\n\n\u6211\u4eec\u5728\u8fd0\u7528\u4e00\u4e9b\u6392\u5217\u7ec4\u5408\u7684\u57fa\u672c\u77e5\u8bc6\uff0c\u4fbf\u80fd\u5f97\u5230\u4ee5\u4e0b\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$f_{k,0} = f_{k,1} \\times (W-1) + f_{k,2} \\times (H-1)$\n\n$f_{k,1} = f_{k,1} \\times (W-2) + f_{k,0} + f_{k,3} \\times (H-1)$\n\n$f_{k,2} = f_{k,2} \\times (H-2) + f_{k,0} + f_{k,3} \\times (W-1)$\n\n$f_{k,3} = f_{k,3} \\times (H+W-4) + f_{k,2} + f_{k,1}$\n\n\n\u63a5\u7740\uff0c\u6211\u4eec\u518d\u5faa\u73af\u8fc7\u7a0b\u4e2d\u662f\u53ef\u4ee5\u538b\u6389\u7b2c\u4e00\u7ef4 $k$ \u7684\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8bb0\u5f55 $4$ \u4e2a\u53d8\u91cf\u5373\u53ef\u3002\n\n### \u5b8c\u6574\u4ee3\u7801\n\n\u8fdc\u53e4\u65f6\u671f\u4ee3\u7801\uff0c\u7801\u98ce\u6709\u70b9\u4e0d\u597d\u8bf7\u89c1\u8c05\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define p 998244353\nusing namespace std;\nlong long a,b,c,d;\nint main()\n{\n\tll h,w,k,xx1,xx2,yy1,yy2;\n\tcin>>h>>w>>k>>xx1>>yy1>>xx2>>yy2;\n\ta=1;\n\tfor(int i=0;i<k;i++)\n\t{\n\t\tll a1,b1,c1,d1;\n\t\ta1=b*(w-1)+c*(h-1);\n\t\tb1=b*(w-2)+a+d*(h-1);\n\t\tc1=c*(h-2)+a+d*(w-1);\n\t\td1=d*(h+w-4)+b+c;\n\t\ta1%=p;\n\t\tb1%=p;\n\t\tc1%=p;\n\t\td1%=p;\n\t\ta=a1;\n\t\tb=b1;\n\t\tc=c1;\n\t\td=d1;\n\t}\n\tif(xx2==xx1&&yy2==yy1)cout<<a%p;\n\telse if(xx2==xx1)cout<<b%p;\n\telse if(yy2==yy1)cout<<c%p;\n\telse cout<<d%p;\n\treturn 0;\n}\n```\n\n",
        "postTime": 1673248907,
        "uid": 516346,
        "name": "_YXJS_",
        "ccfLevel": 4,
        "title": "abc232_e"
    },
    {
        "content": "### \u9898\u610f\u7b80\u8ff0\n- \u7ed9\u5b9a\u4e00\u4e2a $H \\times W$ \u7684\u68cb\u76d8\uff0c\u4e00\u4e2a\u8f66\u5728\u4f4d\u7f6e $(x_1,y_1)$\uff0c\u6bcf\u6b21\u5b83\u53ef\u4ee5\u79fb\u52a8\u5230\u540c\u884c\u7684\u4e00\u4e2a\u4f4d\u7f6e\u6216\u540c\u5217\u7684\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u4e0d\u80fd\u79fb\u52a8\u5230\u5b83\u539f\u6765\u7684\u4f4d\u7f6e\u3002\u6c42\u6b63\u597d\u79fb\u52a8 $K$ \u6b65\u5230 $(x_2,y_2)$ \u7684\u65b9\u6848\u6570\u3002\n\n- $2 \\le H,W \\le 10^9$\uff0c\u7b54\u6848\u5bf9 $998244353$ \u53d6\u6a21\u3002\n\n### \u5bfc\u5165\n\u7531\u4e8e\u8fd9\u9053\u9898\u8f6c\u79fb\u6bd4\u8f83\u590d\u6742\uff0c\u56e0\u6b64\u8003\u8651\u5148\u7528\u52a8\u6001\u89c4\u5212\u6765\u505a\u3002\u8bbe\u72b6\u6001\u4e3a $\\{i,j,k\\}$\uff0c\u8868\u793a\u8f66\u79fb\u52a8\u5230 $(i,j)$ \u7528\u4e86 $k$ \u6b65\u7684\u65b9\u6848\u6570\uff0c\u56e0\u6b64\u8f6c\u79fb\u5c31\u662f\uff1a\n\n$$dp_{i,j,k} = \\sum_{x=1 \\ x \\not=j}^{W}dp_{i,x,k-1}+\\sum_{y=1 \\  y \\not=i}^{H}dp_{y,j,k-1}$$\n\n\u8f6c\u79fb\u8868\u793a**\u540c\u884c**\u4e0e**\u540c\u5217**\u8f6c\u79fb\u8fc7\u6765\u4f46\u4f4d\u7f6e\u4e0d\u540c\uff0c\u521d\u59cb\u72b6\u6001 $dp_{x_1,y_1,0}=1$\uff0c\u6700\u7ec8\u72b6\u6001\u662f $dp_{x_2,y_2,k}$\u3002\n\n[\u4ee3\u7801](https://www.luogu.com.cn/paste/ub6iltmj)\n\n\u7531\u4e8e\u65f6\u7a7a\u590d\u6742\u5ea6\u975e\u5e38\u9ad8\uff0c\u56e0\u6b64\u6839\u672c\u4e0d\u53ef\u80fd\u8fc7\u6b64\u9898\uff0c\u63a5\u7740\u5c31\u8981\u4f18\u5316\u4e86\u3002\n\n### \u5206\u6790 / \u601d\u8def\n\u4f9d\u7136\u662f\u52a8\u6001\u89c4\u5212\uff0c\u4e0d\u8fc7\u9700\u8981\u4f18\u5316\u72b6\u6001\u4e0e\u8f6c\u79fb\u3002\n\n```\n1  | .     #     .     .\n   |\n2  | *     N     *     *\n   |\n3  | .     #     .     .\n   |\n4  |_._____#_____._____.___ \n\n     4     3     2     1\n```\n\n\u9996\u5148\u8003\u8651\u72b6\u6001\u3002\u4e0a\u56fe\u628a\u68cb\u76d8\u5206\u6210\u4e86\u56db\u90e8\u5206\uff0c\u4f4d\u4e8e `#` \u548c `*` \u7684\u90e8\u5206\u53ea\u9700\u8981\u4e00\u6b65\u5c31\u53ef\u4ee5\u8f6c\u79fb\u5230 `N`\uff0c\u800c `.` \u5219\u9700\u8981\u4e24\u6b65\u3002\u5b9e\u9645\u4e0a\u5728\u8f6c\u79fb\u8fc7\u7a0b\u4e2d\u5355\u4e2a\u7b26\u53f7\u7684\u503c\u4e0e\u53d8\u5316\u662f\u4e00\u6837\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u5c06\u72b6\u6001\u5206\u6210\u56db\u4efd\u5c31\u884c\u4e86\u3002\u5206\u522b\u662f $dp_{i,0 \\sim 3}$\u3002\u56e0\u4e3a\u9898\u76ee\u6700\u7ec8\u7b54\u6848\u662f\u5728\u4f4d\u7f6e $(x_2,y_2)$\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u5173\u6ce8\u8fd9\u4e2a\u4f4d\u7f6e\u5c31\u884c\u4e86\u3002\n\n\u5728\u8fd9\u91cc\uff0c\u5b83\u4eec\u5206\u522b\u8868\u793a\uff1a\n\n1. \u7ec8\u70b9\n\n2. \u7ec8\u70b9\u540c\u884c\u4e0d\u540c\u5217\u7684\u70b9\n\n3. \u7ec8\u70b9\u540c\u5217\u4e0d\u540c\u884c\u7684\u70b9\n\n4. \u7ec8\u70b9\u4e0d\u540c\u5217\u4e0d\u540c\u884c\u7684\u70b9\n\n\n\u63a5\u7740\u8003\u8651\u4f18\u5316\u8f6c\u79fb\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8fd0\u7528\u6392\u5217\u7ec4\u5408\u7684\u601d\u60f3\u8f6c\u79fb\u5c31\u884c\u4e86\uff08\u5177\u4f53\u64cd\u4f5c\u770b\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff09\u3002\n\n$$(1 \\le i \\le k)$$\n$$dp_{i,0} = dp_{i-1,1}+dp_{i-1,2}$$\n$$dp_{i,1} = dp_{i-1,0} \\times (W-1) + dp_{i-1,1} \\times (W-2) + dp_{i-1,3}$$\n$$dp_{i,2} = dp_{i-1,0} \\times (H-1) + dp_{i-1,2} \\times (H-2) + dp_{i,3}$$\n$$dp_{i,3} = dp_{i-1,1} \\times (H-1) + dp_{i-1,2} \\times (W-1) + dp_{i-1,3} \\times (H+W-4)$$\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u770b\u6765\u8bf4\uff0c\u90fd\u8981\u8bb0\u5f97\u53d6\u6a21\u3002\u521d\u59cb\u72b6\u6001\u5c31\u662f $(x_1,y_1)$ \u6240\u5728\u7684\u533a\u57df\u4e3a $1$\uff0c\u6700\u7ec8\u72b6\u6001\u5c31\u662f $a$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\operatorname{O}(K)$\u3002\n\n#### \u4ee3\u7801\n\n```cpp\n#include <iostream>\n#define int long long\n#define debug(a) cout << #a << ' ' << a << '\\n'\nusing namespace std;\nconst int mod = 998244353, MAXN = 1e6 + 5;\nint n, m, k, x1, y1, x2, y2, dp[MAXN][4]; \nsigned main() {\n  ios::sync_with_stdio(0);\n  cin >> n >> m >> k >> x1 >> y1 >> x2 >> y2;\n  (x1 == x2 && y1 == y2) && (dp[0][0] = 1);\n  (x1 == x2 && y1 != y2) && (dp[0][1] = 1);\n  (x1 != x2 && y1 == y2) && (dp[0][2] = 1);\n  (x1 != x2 && y1 != y2) && (dp[0][3] = 1); //\u4ee5\u4e0a\u4e3a\u521d\u59cb\u72b6\u6001\n  for (int i = 1; i <= k; i++) { \n    dp[i][0] = (dp[i - 1][1] + dp[i - 1][2]) % mod;\n    dp[i][1] = (dp[i - 1][0] * (m - 1) % mod + dp[i - 1][1] * (m - 2) % mod + dp[i - 1][3]) % mod;\n    dp[i][2] = (dp[i - 1][0] * (n - 1) % mod + dp[i - 1][2] * (n - 2) % mod + dp[i - 1][3]) % mod;\n    dp[i][3] = (dp[i - 1][1] * (n - 1) % mod + dp[i - 1][2] * (m - 1) % mod + dp[i - 1][3] * (n - 2 + m - 2) % mod) % mod; //\u8f6c\u79fb\n  }\n  cout << dp[k][0];\n  return 0;\n}\n```",
        "postTime": 1682422113,
        "uid": 713285,
        "name": "guanyf",
        "ccfLevel": 3,
        "title": "[ABC232E] Rook Path"
    },
    {
        "content": "# abc 232 e\n\n## \u9898\u610f\n\n\u6709\u4e00\u4e2a $n \\times m$ \u7684\u77e9\u9635\uff0c\u4e00\u5f00\u59cb\u6709\u4e2a\u7269\u54c1\u653e\u5728 $(x_1, y_1)$ \u4e0a\u3002\n\n\u6709 $k$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u7269\u54c1\u79fb\u52a8\u5230\u540c\u4e00\u884c\u6216\u8005\u540c\u4e00\u5217\u7684\u53e6\u4e00\u4e2a\u683c\u5b50\u4e0a\u3002\n\n\u8bf7\u4f60\u6c42\u51fa\u5728 $k$ \u6b21\u64cd\u4f5c\u540e\uff0c\u4f7f\u5f97\u8fd9\u4e2a\u7269\u54c1\u5230\u8fbe $(x_2, y_2)$ \u7684\u65b9\u6cd5\u6709\u591a\u5c11\u79cd\uff0c\u5bf9 `998244353` \u53d6\u6a21\u3002\n\n## \u601d\u8def\n\n\u9996\u5148\uff0c\u8fd9\u9053\u9898\u6211\u4eec\u5148\u8003\u8651\u66b4\u529b\u3002\n\n$dp_{x, y, k}$ \u8868\u793a\u8d70 $k$ \u6b65\u5230\u683c\u5b50 $(x, y)$ \u7684\u65b9\u6848\u6570\u3002\n\n\u90a3\u4e48\u5c31\u6709\u8f6c\u79fb\uff1a\n$$dp_{x, y, k} = \\sum _ {x' = x, y' \\ne y} dp_{x', y', k - 1} + \\sum _ {x' \\ne x, y' = y} dp_{x', y', k - 1}$$\n\n\u6240\u4ee5\uff0c\u72b6\u6001\u603b\u6570\u4e3a $n \\times m \\times k$\uff0c\u6bcf\u6b21\u6709 $n + m$ \u79cd\u8f6c\u79fb\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\times m \\times k \\times (n + m))$\uff0c\u4e5f\u5c31\u662f $10 ^ {33}$\uff0c\u5f88\u660e\u663e\u4f1a\u8d85\u65f6\u3002\n\n\u901a\u8fc7\u6253\u8868\u8f93\u51fa `dp` \u6570\u7ec4\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6574\u4e2a\u77e9\u9635\u6700\u540e\u7684\u7ed3\u679c\u4e00\u5171\u53ef\u4ee5\u5206\u4e3a\u56db\u79cd\uff1a\n\n1. \u8d77\u70b9\n\n2. \u548c\u8d77\u70b9\u540c\u884c\u7684\u70b9\n\n3. \u548c\u8d77\u70b9\u540c\u5217\u7684\u70b9\n\n4. \u548c\u8d77\u70b9\u4e0d\u540c\u884c\u4e5f\u4e0d\u540c\u5217\u7684\u70b9\n\n\u6240\u4ee5\uff0c$dp_{k, 0}$ \u8868\u793a\u7528 $k$ \u6b65\u8d70\u5230\u8d77\u70b9\u7684\u65b9\u6848\u6570\uff0c$dp_{k, 1}$ \u8868\u793a\u7528 $k$ \u6b65\u8d70\u5230\u4e0e\u8d77\u70b9\u540c\u884c\u7684\u5176\u4ed6\u7684\u70b9\u7684\u65b9\u6848\u6570\uff0c$dp_{k, 2}$ \u8868\u793a\u7528 $k$ \u6b65\u8d70\u5230\u4e0e\u8d77\u70b9\u540c\u5217\u7684\u5176\u4ed6\u7684\u70b9\u7684\u65b9\u6848\u6570\uff0c$dp_{k, 3}$ \u8868\u8ff0\u7528 $k$ \u6b65\u8d70\u5230\u548c\u8d77\u70b9\u4e0d\u540c\u884c\u4e5f\u4e0d\u540c\u5217\u7684\u70b9\u7684\u65b9\u6848\u6570\u3002\n\n\u90a3\u4e48\uff0c\u8f6c\u79fb\u662f\u4ec0\u4e48\u5462\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u753b\u4e00\u4e2a\u56fe\u6765\u770b\u4e00\u770b\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/94rfmk0o.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vqkey8lu.png)\n\n$$dp_{k, 0} = dp_{k - 1, 1} \\times (m - 1) + dp_{k - 1, 2} \\times (n - 1)$$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/trft6zgp.png)\n\n$$dp_{k, 1} = dp_{k - 1, 0} + dp_{k - 1, 1} \\times (m - 2) + dp_{k - 1, 3} \\times (n - 1)$$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/70n0bo3l.png)\n\n$$dp_{k, 2} = dp_{k - 1, 0} + dp_{k - 1, 2} \\times (n - 2) + dp_{k - 1, 3} \\times (m - 1)$$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/59kwedyp.png)\n\n$$dp_{k, 3} = dp_{k - 1, 1} + dp_{k - 1, 2} + dp_{k - 1, 3} \\times (n + m - 4)$$\n\n\u6240\u4ee5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(k)$\u3002",
        "postTime": 1682403611,
        "uid": 658291,
        "name": "chengning0909",
        "ccfLevel": 4,
        "title": "abc 232 e \u9898\u89e3"
    }
]
[
    {
        "content": "### [[ABC223D] Restricted Permutation](https://www.luogu.com.cn/problem/AT_abc223_d)\n#### \u9898\u610f\u7b80\u8ff0\n- \u6c42\u4e00\u4e2a\u56fe\u7684\u62d3\u6251\u5e8f\n- \u5c0f\u7684\u7f16\u53f7\u5728\u524d\n\n#### \u9898\u76ee\u5206\u6790\n\u8fd9\u4e00\u9898\u662f\u62d3\u6251\u6392\u5e8f\u677f\u5b50\u9898\uff0c\u9700\u8981\u7528\u4f18\u5148\u961f\u5217\u6765\u89e3\u51b3\u5b57\u5178\u5e8f\u7684\u95ee\u9898\uff0c\u5177\u4f53\u505a\u6cd5\u662f\u91cd\u8f7d\u5c0f\u4e8e\u53f7\uff0c\u53d8\u6210\u5927\u4e8e\u53f7\u3002\u56e0\u4e3a STL \u7684 ```priority_queue``` \u662f\u5927\u6839\u5806\uff0c\u800c\u6211\u4eec\u9700\u8981\u7684\u662f\u5c0f\u6839\u5806\u3002\u91cd\u8f7d\u5b8c\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5957\u7528\u62d3\u6251\u6392\u5e8f\u6a21\u677f\u4e86\uff0c\u5177\u4f53\u770b\u4ee3\u7801\u3002\n\n#### \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5+5, M = 4e5+5;\nstruct edge {\n\tint to, next;\n} e[M];\nstruct node {\n\tint num;\n} ;\nint n, m, tot, cnt, a[N], in[N], head[N];\nvoid add(int x, int y) {\n\te[++tot] = (edge){y, head[x]};\n\thead[x] = tot;\n}\nbool operator < (node x, node y) {//\u91cd\u8f7d\u5c0f\u6839\u5806 \n\treturn x.num > y.num;\n}\nvoid topsort() {\n\tpriority_queue <node> q;//\u4f18\u5148\u961f\u5217 \n\tfor (int i = 1; i <= n; ++i) if (!in[i]) q.push((node){i});\n\twhile (!q.empty()) {\n\t\tint x = q.top().num; q.pop();\n\t\ta[++cnt] = x;\n\t\tfor (int i = head[x]; i; i = e[i].next) {\n\t\t\tint y = e[i].to;\n\t\t\tif (--in[y] == 0) q.push((node){y});\n\t\t}\n\t}\n}\nint main() {\n\tcin >> n >> m;\n\tint u, v;\n\twhile (m--) {\n\t\tcin >> u >> v;\n\t\tadd(u, v), ++in[v];\n\t}\n\ttopsort();\n\tif (cnt < n) cout << -1;\n\telse for (int i = 1; i <= n; ++i) cout << a[i] << ' ';\n\treturn 0;\n}\n```",
        "postTime": 1685339156,
        "uid": 670046,
        "name": "123wwm",
        "ccfLevel": 0,
        "title": "AT_abc223_d Restricted Permutation"
    },
    {
        "content": "\u7ecf\u5178\u7684\u4f9d\u8d56\u6027\u95ee\u9898\uff0c\u8f6c\u5316\u4e3a\u62d3\u6251\u6392\u5e8f\u95ee\u9898\u3002\u5bf9\u4e8e\u4e00\u4e2a\u9650\u5236 $ (A,B) $\uff0c\u5efa\u6709\u5411\u8fb9 $ (A,B) $\u3002\u4e4b\u540e\u4f7f\u7528\u62d3\u6251\u6392\u5e8f\u628a\u6240\u6709\u5165\u5ea6\u4e3a $ 0 $ \u7684\u70b9\u585e\u5165\u961f\u5217\uff0c\u6bcf\u6b21\u5220\u9664\u8fd9\u4e9b\u70b9\u5e76\u4e14\u66f4\u65b0\u4e0e\u5176\u76f8\u8fde\u7684\u70b9\u7684\u5165\u5ea6\uff0c\u5c06\u65b0\u7684\u70b9\u585e\u5165\u961f\u5217\u5373\u53ef\u3002\n\n\u8fd9\u6837\u5373\u53ef\u5224\u65ad\u65e0\u89e3\u7684\u60c5\u51b5\uff1a\u56fe\u4e2d\u5b58\u5728\u73af\u3002\u56fe\u4e2d\u5b58\u5728\u73af\u5219\u5fc5\u5b9a\u5b58\u5728\u67d0\u4e9b\u70b9\u4ece\u6765\u6ca1\u5165\u961f\uff0c\u4e8e\u662f\u8bb0\u5f55\u4e0b\u5165\u961f\u7684\u70b9\u7684\u4e2a\u6570\u5373\u53ef\u3002\n\n\u73b0\u5728\u9057\u7559\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a\u6784\u9020\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u89e3\u3002\u628a\u961f\u5217\u6362\u4e3a\u4f18\u5148\u961f\u5217\uff0c\u6bcf\u6b21\u4f18\u5148\u53d6\u7f16\u53f7\u6700\u5c0f\u7684\u70b9\u5373\u53ef\u3002\n\n\u56e0\u4e3a\u6bcf\u4e2a\u70b9\u6700\u591a\u5165\u961f\u4e00\u6b21\uff0c\u51fa\u961f\u4e00\u6b21\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $ \\mathcal{O}(n\\log{n}) $\uff0c\u56e0\u4e3a\u8981\u4f7f\u7528\u4f18\u5148\u961f\u5217\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#import <bits/stdc++.h>\nusing namespace std;\nconst int maxn=2e6+10;\nvector<int>out[maxn];\nint in[maxn];\nint main()\n{\n    int n,m; \n    cin >> n >> m;\n    while(m--)\n    {\n        int u,v;\n    \tcin>>u>>v;\n    \tout[u].push_back(v);\n    \t++in[v];\n    }\n    priority_queue<int,vector<int>,greater<int> >que;\n    for(int i=1;i<=n;i++)\n    if(!in[i])\n    que.push(i);\n    vector<int>res; \n    res.reserve(n);\n    while(!que.empty())\n    {\n    \tint node=que.top();\n    \tque.pop(); \n        res.push_back(node);\n    \tfor (auto x:out[node])\n    \t{\n    \t\t--in[x];\n    \t\tif(!in[x])\n    \t\tque.push(x);\n    \t}\n    }\n    if(res.size()!=n)\n    cout<<-1;\n    else \n    for(auto x:res)\n    cout<<x<<' ';\n}\n```\n",
        "postTime": 1667273337,
        "uid": 714821,
        "name": "loser_seele",
        "ccfLevel": 4,
        "title": "ABC223D\u9898\u89e3"
    },
    {
        "content": "# \u601d\u8def\n\u8fd9\u9898\u6839\u636e\u9898\u610f\u6211\u4eec\u663e\u7136\u80fd\u770b\u51fa\u6bcf\u4e00\u6b21\u7ea6\u675f\u662f\u5148\u9009 $u$ \u624d\u80fd\u9009 $v$\uff0c\u6839\u636e\u8fd9\u4e2a\u6761\u4ef6\u53ef\u4ee5\u60f3\u5230\u7528\u62d3\u6251\u6392\u5e8f\u6765\u505a\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u770b\u600e\u4e48\u4fdd\u8bc1\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u5982\u679c\u6211\u4eec\u6bcf\u4e00\u9009\u70b9\u7684\u65f6\u5019\u53ef\u4ee5\u5728\u70b9\u7684\u961f\u5217\u91cc\u9762\u9009\u6700\u5c0f\u7684\u4e00\u4e2a\uff0c\u53ef\u4ee5\u76f4\u63a5\u628a\u961f\u5217\u6362\u6210\u4f18\u5148\u961f\u5217\u3002\n\n\u5f53\u6211\u4eec\u7684\u7ea6\u675f\u6761\u4ef6\u51fa\u73b0\u73af\u65f6\u5c31\u662f\u65e0\u89e3\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u8f93\u51fa $-1$ \u4e86\u3002\n# \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=200050;\nvector<int>e[maxn];\nint in[maxn];\nsigned main(){\n\tint n,m;\n\tcin>>n>>m;\n\tfor(int i=1;i<=m;i++){\n\t\tint u,v;\n\t\tcin>>u>>v;\n\t\te[u].push_back(v);\n\t\tin[v]++;\n\t}\n\tpriority_queue<int,vector<int>,greater<int>>Q;\n\tfor(int i=1;i<=n;i++){\n\t\tif(in[i]==0){\n\t\t\tQ.push(i);\n\t\t}\n\t}\n\tvector<int>ans;\n\twhile(Q.size()){\n\t\tint u=Q.top();\n\t\tQ.pop();\n\t\tans.push_back(u);\n\t\tfor(int v:e[u]){\n\t\t\tin[v]--;\n\t\t\tif(in[v]==0){\n\t\t\t\tQ.push(v);\n\t\t\t}\n\t\t}\n\t}\n\tif(ans.size()!=n)cout<<-1;\n\telse for(int x:ans)cout<<x<<\" \";\n\treturn 0;\n}\n```",
        "postTime": 1679117976,
        "uid": 715244,
        "name": "zhangzhengyan0831",
        "ccfLevel": 0,
        "title": "AT_abc223_d [ABC223D] Restricted Permutation \u9898\u89e3"
    }
]
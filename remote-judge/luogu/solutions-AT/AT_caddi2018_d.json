[
    {
        "content": "\u7b80\u5355\u8ba1\u6570\u9898\u3002\n\n\u6ce8\u610f\u5230\u4e00\u4ef6\u4e8b\uff0c\u6211\u4eec\u9009\u53d6\u4e00\u4e2a\u5728\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\u8fb9\u957f\u5927\u4e8e\u7b49\u4e8e $4$ \u7684\u6b63\u65b9\u5f62\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6b63\u65b9\u5f62\u7684\u5de6\u4e0b\u89d2\u548c\u53f3\u4e0a\u89d2\u7684\u989c\u8272\u5fc5\u987b\u4e00\u6837\uff0c\u8bc1\u660e\u8003\u8651\u4e24\u4e2a\u8fb9\u957f\u4e3a $3$ \u7684\u6b63\u65b9\u5f62\u4e2d\u95f4\u91cd\u53e0\u7740\u4e00\u4e2a\u8fb9\u957f\u4e3a $2$ \u7684\uff0c\u5076\u6570+\u5076\u6570-\u5076\u6570=\u5076\u6570\u3002\u56e0\u6b64\u5982\u679c\u4e00\u4e2a\u70b9\u4e0e\u6cbf\u4e3b\u5bf9\u89d2\u7ebf\u5bf9\u79f0\u7684\u70b9\u7ec4\u6210\u7684\u6b63\u65b9\u5f62\u8fb9\u957f\u5927\u4e8e\u7b49\u4e8e $4$\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u70b9\u5c31\u9501\u6b7b\u4e86\u3002\u5148\u7edf\u8ba1\u8fd9\u4e9b\u70b9\u7684\u67d3\u8272\u65b9\u6848\u6570\uff0c\u7edf\u8ba1\u662f\u5bb9\u6613\u7684\u3002\n\n\u63a5\u4e0b\u6765\u518d\u770b\u8fb9\u957f\u4e3a $2$ \u7684\u3002\u6ce8\u610f\u5230\u56db\u4e2a\u70b9\u5f02\u6216\u503c\u8981\u4e3a\u5076\u6570\uff0c\u6240\u4ee5\u9650\u5236\u76f8\u5f53\u4e8e\u8981\u4e48\u6ca1\u6709\u9650\u5236\uff0c\u8981\u4e48\u7528\u5bf9\u89d2\u7ebf\u9650\u5236\u5de6\u4e0b\u89d2\u6216\u53f3\u4e0a\u89d2\uff0c\u8981\u4e48\u7528\u5de6\u4e0b\u89d2\u548c\u53f3\u4e0a\u89d2\u4e24\u4e2a\u7684\u503c\u9650\u5236\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\u76f8\u90bb\u989c\u8272\u7684\u5f02\u6216\u503c\u3002\u5148\u8bb0\u5f55\u4e0b\u6765\u5bf9\u4e3b\u5bf9\u89d2\u7ebf\u7684\u9650\u5236\u3002\n\n\u6700\u540e\u5904\u7406\u8fb9\u957f\u4e3a $3$ \u7684\uff0c\u6211\u4eec\u76f4\u63a5\u679a\u4e3e\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\u7684\u70b9\u518d\u679a\u4e3e\u5408\u6cd5\u7684\u989c\u8272\uff0c\u7136\u540e\u53bb\u8003\u8651 $(i-1,i+1)$ \u548c $(i+1,i-1)$ \u5bf9\u8fd9\u4e09\u4e2a\u70b9\u67d3\u8272\u7684\u9650\u5236\u3002\u7528 $f_{i,j}$ \u8bb0\u5f55\u4e0b\u4e3b\u5bf9\u89d2\u7ebf\u4e0a\u524d $i$ \u4e2a\u70b9\uff0c\u7b2c $i$ \u4e2a\u70b9\u67d3 $j$ \u7684\u65b9\u6848\u6570\uff0c\u7136\u540e\u8f6c\u79fb\u4e00\u4e0b\u5c31\u6ca1\u4e86\u3002\n\n```c++\n//\u6211\u8033\u6735\u778e\u6389\u62c9~~\n#include<bits/stdc++.h>\n#define poly vector<int>\n#define IOS ios::sync_with_stdio(false)\n#define ll long long\n#define mp make_pair\n#define mt make_tuple\n#define pa pair < int,int >\n#define fi first\n#define se second\n#define inf 1e18\n#define mod 998244353\n#define int ll\n#define N 100005\nusing namespace std;\nint n,m,x,y,z;\nmap<int,int>Mp[N];\nint f[N][2];\nint g[N];\nint vis[N];\nint quickPower(int x,int y)\n{\n\tint res=1;\n\twhile (y)\n\t{\n\t\tif(y&1)res=res*x%mod;\n\t\tx=x*x%mod;\n\t\ty>>=1;\n\t}\n\treturn res;\n}\nvoid BellaKira()\n{\n\tcin>>n>>m;\n\tfor (int i=1;i<=m;i++)\n\t{\n\t\tcin>>x>>y>>z;\n\t\tMp[x][y]=z;\n\t}\n\tint tot=n*(n-1)/2;\n\ttot-=n-2;\n\tfor (int i=1;i<=n;i++)\n\t\tfor (auto u:Mp[i])\n\t\t{\n\t\t\tif (abs(u.fi-i)<=2) continue;\n\t\t\tif (!Mp[u.fi].count(i)||(Mp[u.fi][i]==u.se)) \n\t\t\t{\n\t\t\t\tMp[u.fi][i]=u.se;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tcout<<0<<endl;\n\t\t\treturn;\n\t\t}\n\tfor (int i=1;i<=n;i++)\n\t\tfor (auto u:Mp[i])\n\t\t{\n\t\t\tif (abs(u.fi-i)<=2) continue;\n\t\t\tif (i<u.fi) tot--;\n\t\t}\n\tf[1][0]=1;\n\tf[1][1]=1;\n\tif (Mp[1].count(1)) f[1][Mp[1][1]^1]=0;\n\tf[n][0]=1;\n\tf[n][1]=1;\n\tif (Mp[n].count(n)) f[n][Mp[n][n]^1]=0;\n\tfor (int i=1;i<=n;i++)\n\t\tfor (auto u:Mp[i])\n\t\t{\n\t\t\tif (abs(u.fi-i)!=1) continue;\n\t\t\tif (!Mp[u.fi].count(i)) \n\t\t\t{\n\t\t\t\ttot--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tint x=min(u.fi,i);\n\t\t\tif (i>u.fi) continue;\n\t\t\tif (Mp[u.fi].count(i))\n\t\t\t{\n\t\t\t\ttot--;\n\t\t\t\tg[x]=Mp[u.fi][i]^u.se;\n\t\t\t\tvis[x]=1;\n\t\t\t}\n\t\t}\n\tfor (int i=2;i<=n;i++)\n\t{\n\t\tif (i!=n)\n\t\t{\n\t\t\tfor (int j=0;j<=1;j++)\n\t\t\t{\n\t\t\t\tif (Mp[i].count(i)&&Mp[i][i]!=j) continue;\n\t\t\t\tint x=0;\n\t\t\t\tif (!Mp[i+1].count(i-1)) x++;\n\t\t\t\tif (!Mp[i-1].count(i+1)) x++;\n\t\t\t\tif (x!=0)\n\t\t\t\t{\n\t\t\t\t\tf[i][j]=quickPower(2,x-1);\n\t\t\t\t} else\n\t\t\t\t{\n\t\t\t\t\tif ((j^Mp[i+1][i-1]^Mp[i-1][i+1])==0) f[i][j]=1;\n\t\t\t\t\telse f[i][j]=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (vis[i-1])\n\t\t{\n\t\t\tfor (int j=0;j<=1;j++)\n\t\t\t{\n\t\t\t\tf[i][j]=f[i][j]*f[i-1][j^g[i-1]]%mod;\n\t\t\t}\n\t\t} else\n\t\t{\n\t\t\tfor (int j=0;j<=1;j++)\n\t\t\t{\n\t\t\t\tf[i][j]=f[i][j]*(f[i-1][0]+f[i-1][1])%mod;\n\t\t\t}\n\t\t}\n\t}\n\tcout<<(f[n][0]+f[n][1])%mod*quickPower(2,tot)%mod<<endl;\n}\nsigned main()\n{\n\tint T=1;\n\twhile (T--)\n\t{\n\t\tBellaKira();\n\t}\n}",
        "postTime": 1652483001,
        "uid": 120911,
        "name": "Lynkcat",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 AT4561 Square"
    }
]
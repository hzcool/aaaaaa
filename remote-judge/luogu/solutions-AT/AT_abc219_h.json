[
    {
        "content": "\u5bf9\u4e8e\u5728 $0$ \u540c\u4fa7\u7684\u70b9\uff0c\u9760\u8fd1\u539f\u70b9\u7684\u90a3\u4e2a\u4e00\u5b9a\u5148\u88ab\u7184\u706d\uff0c\u8fd9\u542f\u53d1\u6211\u4eec\u5f80\u533a\u95f4 $\\text{dp}$ \u7684\u65b9\u5411\u4e0a\u60f3\u3002\n\n\u4e00\u4e2a\u6734\u7d20\u7684\u60f3\u6cd5\u5c31\u662f\u8bb0 $f_{i,j,k,l}$ \u4e3a\u5f53\u524d\u5df2\u7ecf\u53d6\u4e86 $[l,r]$ \u4e4b\u5185\u7684\u8721\u70db\uff0c\u82b1\u8d39\u4e86 $k$ \u7684\u65f6\u95f4\uff0c\u5e76\u4e14\u6700\u7ec8\u5446\u5728\u6700\u5de6\u8fb9/\u6700\u53f3\u8fb9\u53d6\u5230\u8721\u70db\u957f\u5ea6\u7684\u6700\u5927\u503c\u3002\uff08\u6211\u4eec\u5047\u5b9a\u8721\u70db\u7684 $x_i$ \u662f\u5355\u8c03\u4e0d\u964d\u7684\uff0c\u8fd9\u91cc\u7684\u533a\u95f4 $[l,r]$ \u6307\u4e0b\u6807\u3002\uff09\n\n\u8f6c\u79fb\u7684\u65f6\u5019\u76f4\u63a5\u679a\u4e3e\u65f6\u95f4\uff0c\u53d6\u5230\u7684\u4e0b\u4e00\u4e2a\u8721\u70db\u7684\u8d21\u732e\u5c31\u662f $\\max(0,l_i-(k+d))$\uff0c\u5176\u4e2d $d$ \u6307\u4ece\u5f53\u524d\u8282\u70b9\u8d70\u5230 $i$ \u7684\u8ddd\u79bb\u3002\n\n\u4f46\u662f\u8fd9\u4e2a $k$ \u7684\u503c\u57df\u5b9e\u5728\u592a\u5927\u4e86\uff0c\u8003\u8651\u80fd\u4e0d\u80fd\u6539\u53d8\u4e00\u4e0b\u8fd9\u4e2a\u8d21\u732e\u3002\n\n\u6211\u4eec\u79f0\u4e00\u4e2a\u8721\u70db\u6709\u6548\u5f53\u4e14\u4ec5\u5f53\u6211\u4eec\u53d6\u5230\u5b83\u65f6\u5b83\u7684\u957f\u5ea6\u4ecd $>0$\u3002\n\n\u5047\u8bbe\u6211\u4eec\u53d6\u67d0\u4e00\u4e2a\u533a\u95f4\u5185\u7684\u6709\u6548\u8721\u70db\u7684\u987a\u5e8f\u662f $p_1,p_2,\\dots,p_n$\uff0c\u90a3\u4e48\u603b\u8d21\u732e\u5c31\u662f\n$\\sum\\limits_{i=1}^n l_{p_i} - (n-i+1) \\times \\left| x_{p_i} - x_{p_{i-1}}\\right|$\u3002\u611f\u6027\u7406\u89e3\u4e00\u4e0b\u5c31\u662f\u4f60\u6bcf\u8d70\u4e00\u6b65\u540e\u9762\u4f60\u8981\u53d6\u7684\u6240\u6709\u8721\u70db\u957f\u5ea6\u5c31\u4f1a\u51cf\u5c11 $1$\uff0c\u6211\u4eec\u60f3\u53d6\u7b2c $i$ \u4e2a\u8721\u70db\u65f6\u8d70\u4e86 $\\left| x_{p_i} - x_{p_{i-1}}\\right|$ \u6b65\uff0c\u800c\u540e\u9762\u8fd8\u6709 $n-i+1$ \u4e2a\u8721\u70db\u51c6\u5907\u53d6\uff0c\u6240\u4ee5\u8d21\u732e\u5c31\u662f $- (n-i+1) \\times \\left| x_{p_i} - x_{p_{i-1}}\\right|$\u3002\n\n\u7136\u540e\u6211\u4eec\u53ea\u9700\u8981\u5012\u7740 $\\text{dp}$ \u5c31\u53ef\u4ee5\u53bb\u6389 $n-i+1$ \u8fd9\u4e00\u9879\u4e86\u3002\n\n\u5177\u4f53\u7684\uff0c\u6211\u4eec\u8bb0 $f_{i,j,k,l}$ \u8868\u793a\u533a\u95f4 $[i,j]$ \u5185\uff0c\u5f53\u524d\u8fd9\u4e2a\u8721\u70db\u88ab**\u5012\u6570**\u7b2c $k$ \u4e2a\u53d6\u5230\uff0c\u5e76\u4e14\u5f53\u524d\u5728\u5de6\u7aef\u70b9/\u53f3\u7aef\u70b9\u7684\u6700\u5927\u503c\u3002\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u5728\u8fd9\u4e2a\u8721\u70db\u4e4b\u540e\u8fd8\u8981\u53d6\u591a\u5c11\u4e2a\uff0c\u90a3\u4e48 $\\left| x_{p_i} - x_{p_{i-1}}\\right|$ \u7684\u8d21\u732e\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa\u6765\u3002\u5269\u4f59\u90e8\u5206\u7684 $\\text{dp}$ \u4e5f\u662f\u7b80\u5355\u7684\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n^3)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define int long long\n#define vi vector<int>\n#define pb(x) push_back(x)\n#define pii pair<int,int>\n#define lowbit(x) x&-x\nusing namespace std;\nconst int N=3e2+10;\nstruct node{\n\tint x,c;\n}a[N];\nll ans;\nint n,m,T,f[N][N][N][2];\ninline int read(){\n\tint s=0,f=0;\n\tchar ch=getchar();\n\twhile(ch>'9'||ch<'0') f|=(ch=='-'),ch=getchar();\n\twhile(ch<='9'&&ch>='0') s=(s<<3)+(s<<1)+(ch^48),ch=getchar();\n\treturn f?-s:s;\n}\ninline void chmax(int& x,int y){if(x<y) x=y;}\nsigned main(){\n\tn=read();\n\tfor(register int i=1;i<=n;++i) a[i]=(node){read(),read()};\n\ta[++n]=(node){0,0};\n\tsort(a+1,a+n+1,[](node a,node b){return a.x<b.x;});\n\tmemset(f,-0x3f,sizeof(f));\n\tfor(register int i=1;i<=n;++i){\n\t\tif(a[i].c==0&&a[i].x==0){\n\t\t\tfor(register int j=0;j<=n;++j) f[i][i][j][0]=f[i][i][j][1]=0;\n\t\t}\n\t}\n\tfor(register int len=1;len<n;++len){\n\t\tfor(register int l=1;l+len-1<=n;++l){\n\t\t\tint r=l+len-1;\n\t\t\tfor(register int k=0;k<=n;++k){\n\t\t\t\tif(l!=1){\n\t\t\t\t\tchmax(f[l-1][r][k][0],max(f[l][r][k][0]-(a[l].x-a[l-1].x)*k,f[l][r][k][1]-(a[r].x-a[l-1].x)*k));\n\t\t\t\t\tif(k) chmax(f[l-1][r][k-1][0],max(f[l][r][k][0]-(a[l].x-a[l-1].x)*k+a[l-1].c,f[l][r][k][1]-(a[r].x-a[l-1].x)*k+a[l-1].c));\n\t\t\t\t}\n\t\t\t\tif(r!=n){\n\t\t\t\t\tchmax(f[l][r+1][k][1],max(f[l][r][k][0]-(a[r+1].x-a[l].x)*k,f[l][r][k][1]-(a[r+1].x-a[r].x)*k));\n\t\t\t\t\tif(k) chmax(f[l][r+1][k-1][1],max(f[l][r][k][0]-(a[r+1].x-a[l].x)*k+a[r+1].c,f[l][r][k][1]-(a[r+1].x-a[r].x)*k+a[r+1].c));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<max(f[1][n][0][0],f[1][n][0][1]);\n\treturn 0;\n}\n```",
        "postTime": 1681711538,
        "uid": 428089,
        "name": "HMZHMZHMZ",
        "ccfLevel": 7,
        "title": "ABC219H"
    },
    {
        "content": "\u8d2a\u5fc3\u5206\u6790\u53ef\u77e5\u4efb\u610f\u65f6\u523b\u88ab\u7184\u706d\u7684\u8721\u70db\u4e00\u5b9a\u662f\u8fde\u7eed\u7684\u533a\u95f4\uff0c\u4e14\u5305\u62ec\u539f\u70b9\u3002\u8bbe\u7184\u706d\u7684\u533a\u95f4\u4e3a $[l,r]$\uff0c\u5219\u4e0b\u4e00\u6b65\u64cd\u4f5c\u53ef\u4ee5\u5c06\u8be5\u533a\u95f4\u6269\u5c55\u5230 $[l',r]$ \u6216 $[l,r']$\uff08$l'<l,r<r'$\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5bf9\u4e8e\u539f\u70b9\u540c\u4e00\u4fa7\u7684\u70b9\uff0c\u79bb\u539f\u70b9\u8fd1\u7684\u70b9\u4e00\u5b9a\u6bd4\u79bb\u539f\u70b9\u8fdc\u7684\u70b9\u65e9\u7184\u706d\u3002\n\n\u7ecf\u8fc7 $t$ \u65f6\u95f4\u540e\uff0c\u8721\u70db $i$ \u7684\u957f\u5ea6\u662f $\\max(0,a_i-t)$\uff0c\u8003\u8651\u53bb\u9664\u6700\u5927\u503c\u64cd\u4f5c\u3002\n\n\u8bbe $d$ \u652f\u8721\u70db\u5728\u70e7\u5c3d\u524d\u88ab\u7184\u706d\u4e86\uff0c\u90a3\u4e48\u5269\u4e0b\u7684 $n-d$ \u652f\u8721\u70db\u6700\u7ec8\u957f\u5ea6\u4e3a $0$\uff0c\u5bf9\u7b54\u6848\u6ca1\u6709\u8d21\u732e\uff0c\u53ef\u5ffd\u7565\u3002\n\n\u5bf9\u4e8e\u6211\u4eec\u5173\u5fc3\u7684 $d$ \u652f\u8721\u70db\uff0c\u8bbe\u6309\u7184\u706d\u7684\u987a\u5e8f\u6392\u5e8f\uff0c\u5b83\u4eec\u4f4d\u7f6e\u4e3a $p_1,\\dots p_d$\u3001\u521d\u59cb\u957f\u5ea6\u4e3a $l_1,\\dots l_d$\uff0c\u4e3a\u65b9\u4fbf\u53e6\u8bbe $p_0=0$\u3002\u56e0\u4e3a\u9009\u4e2d\u7684\u8721\u70db\u4e0d\u4f1a\u88ab\u71c3\u5c3d\uff0c\u56e0\u6b64\u5269\u4f59\u7684\u957f\u5ea6\u4e3a $\\sum_{i=1}^d(l_i-(d-i+1)(|p_i-p_{i-1}|))$\uff0c\u611f\u6027\u7406\u89e3\u5373\u4e3a\uff1a\n\n- \u4ece\u8d77\u70b9\u5230\u7b2c $1$ \u652f\u8721\u70db\u7684\u8def\u7a0b\uff0c\u6bcf\u8dd1\u4e00\u5355\u4f4d\u957f\u5ea6\uff0c\u6240\u6709 $d$ \u652f\u8721\u70db\u957f\u5ea6\u90fd\u51cf\u5c11\u4e86 $1$\u3002\n\n- \u4ece\u7b2c $1$ \u652f\u8721\u70db\u5230\u7b2c $2$ \u652f\u8721\u70db\u7684\u8def\u7a0b\uff0c\u6bcf\u8dd1\u4e00\u5355\u4f4d\u957f\u5ea6\uff0c$d-1$ \u652f\u672a\u7184\u706d\u7684\u8721\u70db\u957f\u5ea6\u90fd\u51cf\u5c11\u4e86 $1$......\n\n- \u4ece\u7b2c $d-1$ \u652f\u8721\u70db\u5230\u7b2c $d$ \u652f\u8721\u70db\u7684\u8def\u7a0b\uff0c\u6bcf\u8dd1\u4e00\u5355\u4f4d\u957f\u5ea6\uff0c\u6700\u540e $1$ \u652f\u672a\u7184\u706d\u7684\u8721\u70db\u957f\u5ea6\u51cf\u5c11\u4e86 $1$\u3002\n\n\u679a\u4e3e $d$\uff0c\u7ed3\u5408\u4e0a\u8ff0\u533a\u95f4\u7684\u8d2a\u5fc3\u7ed3\u8bba\uff0c\u8bbe $f_{l,r,k,0/1}$ \u8868\u793a\u5f53\u524d\u7184\u706d\u4e86 $[l,r]$ \u533a\u95f4\u7684 $k$ \u652f\u8721\u70db\uff08\u5e76\u4e14\u4e0d\u4f1a\u518d\u7184\u706d\u8be5\u533a\u95f4\u5176\u5b83\u8721\u70db\uff09\uff0c\u5f53\u524d\u5728 $l/r$ \u4f4d\u7f6e\u65f6\uff0c\u8fd9 $k$ \u652f\u8721\u70db\u5269\u4f59\u957f\u5ea6\u603b\u548c\u7684\u6700\u5927\u53ef\u80fd\u503c\u3002\u5b9e\u9645\u4e0a\u9009\u4e2d\u7684\u8721\u70db\u662f\u5426\u771f\u672a\u71c3\u5c3d\u65e0\u9700\u8003\u8651\uff0c\u56e0\u4e3a\u4e0d\u518d\u9009\u4e2d\u71c3\u5c3d\u7684\u8721\u70db\u540e\u7b54\u6848\u4e00\u5b9a\u66f4\u4f18\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(n^4)$\uff0c\u4e0d\u8db3\u4ee5\u901a\u8fc7\u3002\u8003\u8651\u5c06\u7184\u706d\u7684\u8fc7\u7a0b\u53cd\u8f6c\u5904\u7406\u3002\n\n- \u5012\u6570\u7b2c $1$ \u6bb5\u8def\u7a0b\uff0c\u6bcf\u8dd1\u4e00\u5355\u4f4d\u957f\u5ea6\uff0c$1$ \u652f\u8721\u70db\u957f\u5ea6\u51cf\u5c11\u4e86 $1$\u3002\n\n- \u5012\u6570\u7b2c $2$ \u6bb5\u8def\u7a0b\uff0c\u6bcf\u8dd1\u4e00\u5355\u4f4d\u957f\u5ea6\uff0c$2$ \u652f\u8721\u70db\u957f\u5ea6\u51cf\u5c11\u4e86 $1$......\n\n- \u5012\u6570\u7b2c $d$ \u6bb5\u8def\u7a0b\uff0c\u6bcf\u8dd1\u4e00\u5355\u4f4d\u957f\u5ea6\uff0c$d$ \u652f\u8721\u70db\u957f\u5ea6\u51cf\u5c11\u4e86 $1$\u3002\n\n\u53cd\u8f6c\u540e\u7684\u8f6c\u79fb\u65b9\u7a0b\u53ea\u548c $k$ \u6709\u5173\uff0c\u65e0\u9700\u679a\u4e3e $d$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u81f3 $\\Theta(n^3)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <algorithm>\n\nusing namespace std;\ntypedef long long ll;\nconst int MAXN = 310;\nconst ll INF = 1000000000000000000LL;\n\nstruct node {\n\tint p; ll l;\n} pa[MAXN], pb[MAXN];\nll dp[MAXN][MAXN][MAXN][2];\n\nbool comp1(node a, node b) {\n\treturn a.p<b.p;\n}\nbool comp2(node a, node b) {\n\treturn a.p>b.p;\n}\nint main() {\n\tint n, na=0, nb=0; scanf(\"%d\",&n);\n\tll mv = 0LL;\n\twhile (n--) {\n\t\tint x; ll l; scanf(\"%d%lld\",&x,&l);\n\t\tif (ll(abs(x))>l) continue;\n\t\tif (x>0) pa[++na]=(node){x,l};\n\t\telse if (x<0) pb[++nb]=(node){x,l};\n\t\telse mv+=l; // \u7279\u5224\u539f\u70b9\u7684\u8721\u70db\n\t}\n\tsort(pa+1,pa+na+1,comp1); sort(pb+1,pb+nb+1,comp2); n=na+nb;\n\tpa[++na]=(node){1000000001,0LL}; pb[++nb]=(node){-1000000001,0LL}; // \u9576\u8fb9\uff0c\u9632\u6b62\u8fb9\u7f18\u7684\u8721\u70db\u88ab\u5ffd\u7565\n\tfor (int i=0; i<=na; ++i) {\n\t\tfor (int j=0; j<=nb; ++j) {\n\t\t\tdp[1][i][j][0]=pa[i].l; dp[1][i][j][1]=pb[j].l;\n\t\t}\n\t}\n\tll res = 0LL;\n\tfor (int d=1; d<=n; ++d) { // \u8003\u8651\u5012\u6570\u7b2c d \u652f\u7184\u706d\u7684\u8721\u70db\n\t\tfor (int i=0; i<=na; ++i) {\n\t\t\tfor (int j=0; j<=nb; ++j) dp[d+1][i][j][0]=dp[d+1][i][j][1]=-INF;\n\t\t}\n\t\tfor (int i=na; i>=0; --i) {\n\t\t\tfor (int j=nb; j>=0; --j) {\n\t\t\t\tif (i) {\n\t\t\t\t\tll tmp = dp[d][i][j][0]-ll(d)*ll(pa[i].p-pa[i-1].p);\n\t\t\t\t\tdp[d][i-1][j][0] = max(dp[d][i-1][j][0],tmp); // \u4e0d\u9009\u8721\u70db i-1\uff0c\u603b\u548c\u4e0d\u53d8\n\t\t\t\t\tdp[d+1][i-1][j][0] = max(dp[d+1][i-1][j][0],tmp+pa[i-1].l); // \u9009\u8721\u70db i-1\uff0c\u603b\u548c\u52a0\u4e0a\u8be5\u8721\u70db\u539f\u957f\u51cf\u8def\u7a0b\u4e0a\u7684\u635f\u5931\n\t\t\t\t\tdp[d+1][i-1][j][0] = max(dp[d+1][i-1][j][0],dp[d][i][j][1]-ll(d)*ll(pa[i-1].p-pb[j].p)+pa[i-1].l);\n\t\t\t\t}\n\t\t\t\tif (j) {\n\t\t\t\t\tll tmp = dp[d][i][j][1]-ll(d)*ll(pb[j-1].p-pb[j].p);\n\t\t\t\t\tdp[d][i][j-1][1] = max(dp[d][i][j-1][1],tmp);\n\t\t\t\t\tdp[d+1][i][j-1][1] = max(dp[d+1][i][j-1][1],tmp+pb[j-1].l);\n\t\t\t\t\tdp[d+1][i][j-1][1] = max(dp[d+1][i][j-1][1],dp[d][i][j][0]-ll(d)*ll(pa[i].p-pb[j-1].p)+pb[j-1].l);\n\t\t\t\t}\n\t\t\t\tres = max(res,max(dp[d][i][j][0]-ll(d)*ll(pa[i].p),dp[d][i][j][1]+ll(d)*ll(pb[j].p))); // \u8ba1\u7b97\u539f\u70b9\u5230\u7b2c\u4e00\u652f\u8721\u70db\u8def\u7a0b\u4e0a\u7684\u635f\u5931\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\", res+mv);\n\treturn 0;\n}\n```",
        "postTime": 1676468519,
        "uid": 120250,
        "name": "2017gdgzoi999",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 abc219h"
    }
]
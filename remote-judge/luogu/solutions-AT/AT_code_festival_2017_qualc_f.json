[
    {
        "content": "\u9996\u5148\u5148\u5c06 $n$ \u9664\u4ee5 $3$\uff0c\u5f97\u5230\u6bcf\u4e2a\u4eba\u5403\u7684\u5bff\u53f8\u6570\u3002\n\n\u8003\u8651\u5012\u5e8f\u601d\u8003\u3002\u8bbe\u4e09\u4e2a\u4eba\u6700\u540e\u4e00\u4e2a\u5206\u522b\u5403\u4e86 $x,y,z$ \u4e09\u4e2a\u5bff\u53f8\uff0c\u5219\u5176\u5bf9\u4e8e C \u7684\u6392\u5217\u6709\u4f55\u9650\u5236\uff1f\n\n\u663e\u7136\uff0c\u5728 C \u7684\u6392\u5217\u4e2d\uff0c$x,y$ \u987b\u5728 $z$ \u4e4b\u540e\uff0c\u4e0d\u7136 C \u5c31\u4e0d\u4f1a\u53bb\u5403 $z$ \u4e86\uff08\u6211\u4eec\u4e0d\u9700\u8981\u7ba1 AB \u4e24\u4eba\u7684\u5e8f\u5217\u4e2d $z$ \u4e0e $x,y$ \u7684\u5173\u7cfb\uff0c\u56e0\u4e3a\u6211\u4eec\u73b0\u5728\u505a\u7684\u662f\u4ece\u4e09\u4e2a\u4eba\u5403\u4e1c\u897f\u7684\u5e8f\u5217\u53cd\u63a8\u51fa C \u7684\u559c\u597d\u5e8f\u5217\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u5230\u7684 $x,y,z$ \u4e00\u5b9a\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a C \u7684\u6392\u5217\u6ee1\u8db3\u8fd9\u79cd\u60c5\u51b5\uff0c\u4e0d\u7136\u6211\u4eec\u4e5f\u4e0d\u4f1a\u8003\u8651\u5b83\uff09\u3002\u987a\u5e8f\u8981\u4e48\u662f $zxy$ \u8981\u4e48\u662f $zyx$\uff0c\u5171 $2$ \u79cd\u3002\n\n\u73b0\u5728\uff0c\u6211\u4eec\u8ba9\u65f6\u95f4\u56de\u6eaf\u4e00\u683c\u3002\u5728\u5403\u5012\u6570\u7b2c\u4e8c\u4e2a\u5bff\u53f8\u65f6\uff0c\u9650\u5236\u4ecd\u662f\u552f\u4e00\u7684\uff0c\u5373 C \u5403\u7684\u5bff\u53f8\u5728\u672c\u56de\u5408\u4e2d\u662f\u4ed6\u6700\u559c\u6b22\u7684\u3002\u4e0d\u9700\u8981\u8003\u8651 AB \u8fd9\u56de\u5408\u5403\u7684\u5bff\u53f8\u4e0e\u4e0b\u56de\u5408\u7684 $x,y$ \u95f4\u7684\u5173\u7cfb\uff0c\u56e0\u4e3a\u53cd\u6b63\u8fd9\u56de\u5408\u4e2d\u90fd\u88ab\u5403\u6389\u4e86\uff0c\u5373\u4f7f C \u6bd4\u8d77 $x,y$ \u66f4\u559c\u6b22\u5b83\u4eec\u4e5f\u6ca1\u673a\u4f1a\u4e86\u3002\u4e8e\u662f\uff0c\u7b2c\u4e00\u4e2a\u5bff\u53f8\u5171\u6709 $4$ \u4e2a\u4f4d\u7f6e\u53ef\u4ee5\u653e\uff0c\u5373\u9664\u4e86\u5f00\u5934\u5916\u7684\u4efb\u4f55\u4f4d\u7f6e\u3002\u7b2c\u4e8c\u4e2a\u5bff\u53f8\u5171\u6709 $5$ \u4e2a\u4f4d\u7f6e\u53ef\u4ee5\u653e\u3002\n\n\u7ee7\u7eed\u56de\u6eaf\u7684\u8bdd\uff0c\u4f1a\u53d1\u73b0\u5012\u6570\u7b2c $i$ \u6b21\u7684\u4e24\u4e2a\u5bff\u53f8\u7684\u65b9\u6848\u6570\u5206\u522b\u662f $3i-2,3i-1$\u3002\u4e8e\u662f\u5bf9\u4e8e\u4efb\u4e00\u5408\u6cd5\u7684 ABC \u5403\u5bff\u53f8\u7684\u5e8f\u5217\uff0c\u603b\u5bf9\u5e94\u7740 $\\prod\\limits_{i=1}^n(3i-2)(3i-1)$ \u79cd\u5408\u6cd5\u7684\u5e8f\u5217\uff0c\u4e14\u6b64\u65b9\u6848\u6570\u4e0e\u5177\u4f53\u7684\u5bff\u53f8\u5e8f\u5217\u5e76\u65e0\u5173\u7cfb\uff0c\u53ef\u4ee5\u6700\u540e\u4e00\u5e76\u4e58\u4e0a\u3002\u4e8e\u662f\u95ee\u9898\u8f6c\u6362\u4e3a\u6c42\u5408\u6cd5\u7684 ABC \u5403\u5bff\u53f8\u7684\u5e8f\u5217\u6570\u3002\n\n\u73b0\u5728\u8003\u8651\u5f53 ABC \u559c\u597d\u5e8f\u5217\u56fa\u5b9a\u65f6\u5982\u4f55\u5224\u65ad\u5176\u4f1a\u4e0d\u4f1a\u51b2\u7a81\u3002\u6211\u4eec\u8003\u8651\u4ee4 $a_{i_1},a_{i_2},a_{i_3},\\dots,a_{i_n}$ \u8868\u793a A \u5403\u7684\u5bff\u53f8\u3002\u540c\u7406\uff0c\u6211\u4eec\u5f97\u5230\u4e86 $\\{b_j\\}$ \u4e0e $\\{c_k\\}$ \u6570\u7ec4\u3002\u5219\uff0c\u8be5\u5403\u5bff\u53f8\u65b9\u6848\u5408\u6cd5\uff08\u4e5f\u5373\u559c\u597d\u5e8f\u5217\u5408\u6cd5\uff09\uff0c\u5f53\u4e14\u4ec5\u5f53\uff1a\n\n- $\\{a_i\\},\\{b_j\\},\\{c_k\\}$ \u6570\u7ec4\u4e2d\u65e0\u76f8\u540c\u5143\u7d20\u3002\n\n- \u5bf9\u4e8e\u6bcf\u4e2a $t$\uff0c$a_{i_t}$ \u4ec5\u5728 $\\{a_1\\sim a_{i_t}\\}\\cup\\{b_1\\sim b_{j_t}\\}\\cup\\{c_1\\sim c_{k_t}\\}$ \u5e8f\u5217\u4e2d\u51fa\u73b0\u4e00\u6b21\u3002$b_{j_t},c_{k_t}$ \u540c\u7406\u987b\u6ee1\u8db3\u6b64\u6761\u4ef6\u3002\uff08\u56e0\u4e3a\u4e0d\u7136\u8981\u4e48\u4ed6\u4eec\u4f1a\u6709\u77db\u76fe\uff0c\u8981\u4e48\u5c31\u4f1a\u66f4\u65e9\u88ab\u62a2\u5148\u5403\u6389\uff09\n\n\u73b0\u5728\u8003\u8651\u4e0d\u77e5\u9053 C \u7684\u559c\u597d\u5e8f\u5217\u3002\u5219\u6b64\u65f6 $\\{c_k\\}$ \u4fbf\u9000\u5316\u4e86\uff08\u56e0\u4e3a\u6211\u4eec\u4e0d\u77e5\u9053 $c$ \u6570\u7ec4\uff0c\u8fdb\u800c\u4e0d\u77e5\u9053\u5176\u5403\u6389\u7684\u6bcf\u4e2a\u5bff\u53f8\u5728 $c$ \u4e2d\u7684\u4f4d\u7f6e\uff09\uff0c\u9000\u5316\u6210\u5176\u4f9d\u6b21\u5403\u4e86\u54ea\u4e2a\u5bff\u53f8\u7684\u6570\u7ec4 $\\{x\\}$\u3002\u5982\u679c\u80fd\u4ece $\\{x\\}$ \u53cd\u63a8\u51fa\u4efb\u4e00 $c$\uff0c\u4f9d\u7167\u6211\u4eec\u4e00\u5f00\u59cb\u7684\u63a8\u65ad\uff0c\u5176\u5fc5\u5b58\u5728\u4e14\u4ec5\u5b58\u5728 $\\prod\\limits_{i=1}^n(3i-2)(3i-1)$ \u79cd\u4e0d\u540c\u7684 $c$\u3002\u4e8e\u662f\u6211\u4eec\u73b0\u5728\u8003\u8651\u5224\u65ad\u6709\u65e0\u4e0e $x$ \u5bf9\u5e94\u7684 $c$\u3002\n\n\u5176\u6709\uff0c\u5f53\u4e14\u4ec5\u5f53\uff1a\n\n- \u65e0\u76f8\u540c\u5143\u7d20\u3002\n- $a_{i_t}$ \u4ec5\u5728 $\\{a_1\\sim a_{i_t}\\}\\cup\\{b_1\\sim b_{j_t}\\}$ \u4e2d\u51fa\u73b0\u4e00\u6b21\uff0c$b_{j_t}$ \u540c\u7406\u3002\n- $x_t$ \u672a\u5728 $\\{a_1\\sim a_{i_t}\\}\\cup\\{b_1\\sim b_{j_t}\\}$ \u4e2d\u51fa\u73b0\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u7528\u4e0a\u8ff0\u6761\u4ef6\u6765\u9a8c\u8bc1\u4e00\u4e2a\u5bff\u53f8\u5e8f\u5217\u662f\u5426\u5408\u6cd5\u3002\n\n\u8003\u8651\u5f53\u524d\u586b\u5230\u4e86 $x$ \u5e8f\u5217\u7684\u7b2c $t$ \u4e2a\u4f4d\u7f6e\u3002\u5219\uff0c\u5982\u4e0b\u6570\u4e0d\u80fd\u586b\u5165 $x_t$\uff1a\n\n- $t'\\in[t+1,n]$ \u65f6\u7684 $a_{i_{t'}},b_{j_{t'}},x_{t'}$\u3002\n- $\\{a_1\\sim a_{i_t}\\}\\cup\\{b_1\\sim b_{j_t}\\}$\u3002\n\n\u4e8c\u8005\u65e0\u4ea4\uff0c\u5219\u5176\u4f59 $3t-|\\{a_1\\sim a_{i_t}\\}\\cup\\{b_1\\sim b_{j_t}\\}|$ \u4e2a\u6570\u5747\u53ef\u3002\n\n\u4e8e\u662f\u6211\u4eec\u8bbe $f_{i,j,t}$ \u8868\u793a $i_t=i,j_t=j$ \u65f6\u7684\u65b9\u6848\u6570\u3002\u76f4\u63a5 DP \u5373\u53ef\u3002DP \u7684\u65f6\u5019\u9700\u8981\u7528\u524d\u7f00\u548c\u8bb0\u5f55\u6240\u6709 $i_t\\leq i,j_t\\leq j$ \u7684 DP \u72b6\u6001\u4e4b\u548c\uff0c\u8fd9\u6837\u5c31\u80fd\u505a\u5230 $O(1)$ \u8f6c\u79fb\u3002\n\nDP\u7684\u65f6\u5019\u8981\u6ce8\u610f\u5224\u5b9a\u9650\u5236\u7684\u7b2c\u4e8c\u6761\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mod=1e9+7;\nint n,a[410],b[410],f[410][410][410],g[410][410],res;\nbool occ[410],oa[410][410],ob[410][410];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&a[i]);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&b[i]);\n\tfor(int i=1;i<=n;i++){\n\t\tocc[a[i]]=true;\n\t\tg[i][0]=i;\n\t\tfor(int j=1;j<=n;j++)g[i][j]=g[i][j-1]+!occ[b[j]];\n\t}\n\tfor(int i=1;i<=n;i++)for(int j=1;j<=i;j++)oa[i][a[j]]=true,ob[i][b[j]]=true;\n//\tfor(int i=1;i<=n;i++){for(int j=1;j<=n;j++)printf(\"%d \",g[i][j]);puts(\"\");}\n\tn/=3;\n\tfor(int i=0;i<=3*n;i++)for(int j=0;j<=3*n;j++)f[0][i][j]=1;\n\tfor(int t=1;t<=n;t++)for(int i=t;i<=3*n;i++)for(int j=t;j<=3*n;j++){\n\t\tif(!ob[j][a[i]]&&!oa[i][b[j]])f[t][i][j]=1ll*f[t-1][i-1][j-1]*(3*t-g[i][j])%mod;\n\t\tf[t][i][j]=(0ll+f[t][i][j]+f[t][i-1][j]+f[t][i][j-1]+mod-f[t][i-1][j-1])%mod;\n\t}\n\tres=f[n][3*n][3*n];\n\tfor(int i=1;i<=n;i++)res=1ll*res*(3*i-2)*(3*i-1)%mod;\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1616749810,
        "uid": 123369,
        "name": "xtx1092515503",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT3593 \u3010Three Gluttons\u3011"
    },
    {
        "content": "**\u96f6\u00b7**\n\t\u770b\u5230\u8fd9\u9053\u9898\uff0c\u8303\u56f4\u544a\u8bc9\u6211\u4eec\u8fd9\u662f\u4e00\u4e2a\u8ba1\u6570DP\uff0c\u8ba9\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u6761\u4ef6\uff1a\n   \n\t  1.A\u4e0eB\u5403\u7684\u5bff\u53f8\u4e0d\u80fd\u51b2\u7a81\uff0c\u5373\u5f53\u4e00\u4e2a\u65f6\u523bA\u7684\u524di\u4e2a\u88ab\u5403\u5b8c\uff0cB\u7684\u524dk\u4e2a\u88ab\u5403\u5b8c\uff0c\u5219A\n      \u7684\u671f\u671b\u5e8f\u5217\u7b2ci+1\u4e2a\u4e0eB\u7684\u671f\u671b\u5e8f\u5217\u7b2ck+1\u4e2a\u4e0d\u80fd\u76f8\u7b49\u3002\n\t  \n      2.C\u4e0eA/B\u4e0d\u80fd\u51b2\u7a81\uff0c\u540c1\u6761\u4ef6\u3002\n    \n      \n   \u90a3\u6211\u4eec\u8981\u6c42\u4ec0\u4e48\u5462\uff0c\u5148\u601d\u8003\u5982\u679c\u77e5\u9053\u4e86\u4e00\u4e2aC\u5403\u7684\u987a\u5e8f\uff08\u8bf7\u6ce8\u610f\u8fd9\u91cc\u5403\u7684\u987a\u5e8f\u4e0e\u671f\u671b\u5e8f\u5217\u7684\u533a\u522b\uff09\u5219\u5b83\u7684\u671f\u671b\u5e8f\u5217\u6709\u591a\u5c11\u79cd\u60c5\u51b5\u3002\n\n------------\n**\u58f9\u00b7**\n\t\n \u8fd9\u4e2a\u600e\u4e48\u6765\u6c42\uff0c\u6211\u4eec\u5148\u5012\u7740\u63a8\u4e00\u6ce2\uff1a\n\t\t\u8bbe\u7532\u6700\u540e\u4e00\u4e2a\u5403\u7684X\uff0c\u4e59\u6700\u540e\u4e00\u4e2a\u5403\u7684Y\uff0c\u4e19\u6700\u540e\u4e00\u4e2a\u5403\u7684Z\uff0c\u8bbeA/B/C\u4e3a\u7532\n        \u4e59\u4e19\u5403\u7684\u987a\u5e8f\uff0c\u8bbePA/PB/PC\u4e3a\u7532\u4e59\u4e19\u671f\u671b\u5e8f\u5217\u3002\n        \n   \u65e2\u7136\u6b64\u65f6A/B\u53ef\u4ee5\u5403\u5230X/Y\uff0c\u5219\u8bc1\u660e\u8fd9\u4e24\u4e2a\u5bff\u53f8\u8fd8\u5728\uff0c\u6240\u4ee5C\u6ca1\u6709\u4e0e\u4ed6\u4eec\u6253\u67b6\u7684\u524d\u9898\n      \u662f\u8fd9\u4e24\u4e2a\u5bff\u53f8\u5728C\u7684\u671f\u671b\u5e8f\u5217\u91cc\u6bd4Z\u9760\u540e\uff0c\u56e0\u4e3a\u5982\u679c\u6bd4Z\u9760\u524d\uff0c\u5219C\u5c31\u4f1a\u5148\u9009\u62e9X/Y\u4ece\n      \u800c\u5bfc\u81f4\u6253\u67b6\u3002\n      \n   \u6240\u4ee5\u6b64\u65f6X/Y\u5728C\u7684\u671f\u671b\u5e8f\u5217\u91cc\u67091 * 2=2\u79cd\u6392\u5217\u65b9\u5f0f\uff0c\u76f8\u5f53\u4e8eX\u5148\u63d2\u5230C\n      \u540e\u9762\uff0c\u7136\u540eY\u518d\u63d2\u5230X\u4e0eC\u4e4b\u524d\u6216X\u540e\u9762\uff0c\u540c\u6837\u7684\uff0c\u5012\u6570\u7b2c\u4e8c\u6b21\u7684\u65f6\u5019\u6211\u4eec\u63d2\u5165X/Y\u7684\n      \u65b9\u5f0f\u5c31\u67094 * 5=20\u79cd\uff08\u56e0\u4e3aX'/Y'\u53ea\u9700\u8981\u6ee1\u8db3\u5728C\u671f\u671b\u5e8f\u5217\u4e2d\u6bd4Z'\u9760\u540e\u5373\u53ef\uff0c\u5373\u4f7fX/Y\n      \u5728C\u7684\u671f\u671b\u5e8f\u5217\u4e2d\u6bd4C\u6700\u540e\u5403\u7684\u9760\u524d\uff0c\u4f46\u5b83\u4eec\u5df2\u7ecf\u88ab\u5403\u8fc7\u4e86\uff0c\u6240\u4ee5\u4e0d\u4f1a\u6253\u67b6\uff09\n  \n  \u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e00\u6b21\u4e58\u7684\u4e24\u4e2a\u6570\u90fd\u6bd4\u4e0a\u6b21+3\uff0c\u56e0\u4e3a\u7a7a\u9699\u591a\u4e86\u4e09\u4e2a\u3002\n  \n \u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u5176\u5b9e\u4e00\u4e2a\u5403\u7684\u5e8f\u5217\u4ec0\u4e48\u6837\u5bf9\u4e8e\u671f\u671b\u5e8f\u5217\u7684\u4e2a\u6570\u662f\u6ca1\u6709\u5f71\u54cd\u7684\uff0c\u56e0\n      \u4e3a\u6211\u4eec\u672c\u8d28\u4e0a\u662f\u6784\u9020\u671f\u671b\u5e8f\u5217.\n      \n   \u6240\u4ee5\u4e00\u4e2a\u5403\u7684\u987a\u5e8f\u5bf9\u5e94\u7684\u671f\u671b\u5e8f\u5217\u4e00\u5171\u6709$\\prod_{0}^{i-1}(3i+1)(3i+2)$\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7b97\u51fa\u6765\u5403\u7684\u987a\u5e8f\u4e2a\u6570\u7136\u540e\u518d\u4e58\u4e0a\u8fd9\u4e2a\u6570\u5373\u53ef\u3002\n\n\n------------\n**\u8d30\u00b7**\n      \n   \u56e0\u6b64\u73b0\u5728\u6211\u4eec\u53ea\u9700\u8981\u7b97\u51fa\u5403\u7684\u987a\u5e8f\u6709\u591a\u5c11\u79cd\uff0c\u8003\u8651\u7528DP\u6765\u505a\n   \n \uff08\u6ce8\u610f\u8fd9\u91ccDP\u7684\u662f\u5403\u7684\u987a\u5e8f\uff09\uff08\u4ee5\u4e0b\u6240\u6709\u7684A/B/C\u5747\u4e3a\u5403\u7684\u987a\u5e8f\uff09\u3002\n        \n   \u9996\u5148\u6211\u4eec\u770b\u5bf9\u4e8e\u4e00\u4e2a\u4f4d\u7f6e\u7684C,\u5982\u679c\u60f3\u6ee1\u8db3\u6761\u4ef6\uff0c\u5b83\u7684\u53d6\u503c\u6709\u591a\u5c11\u79cd.\n \n \u8003\u8651\u7528\u6240\n      \u6709\u60c5\u51b5\u6570\u51cf\u4e00\u4e0b\u4e0d\u5408\u6cd5\u60c5\u51b5\u6570\uff0c\u6240\u6709\u60c5\u51b5\u6570\u5373\u4e3an,\u6211\u4eec\u8bbek=n/3,\u5373k\u4e3a\u6bcf\u4e2a\u4eba\u5403\u7684\n      \u5e8f\u5217\u957f\u5ea6\u3002\n  \n 1.\u5bf9\u4e8e\u4e00\u4e2a\u4f4d\u7f6e\u7684Ci\uff0c\u663e\u7136\u5b83\u4e0d\u80fd\u548c\u4e09\u4e2a\u5e8f\u5217\u4e0b\u6807\u5728\u5b83\u540e\u9762\u7684\u4efb\u4f55\u4e00\u4e2aA/B/C\u4e00\u6837\uff0c\n  \u8fd9\u79cd\u4e0d\u5408\u6cd5\u6761\u4ef6\u6570\u4e3a$3* (k-i)$,\u5373\u4e3a\u4ed6\u540e\u9762\u6240\u6709\u7684A/B/C\u4e4b\u548c\n     \n  \n  2.\u5bf9\u4e8e\u4e00\u4e2a\u4f4d\u7f6e\u7684Ci\uff0c\u4ed6\u4e0e\u6b64\u65f6\u7532/\u4e59\u5403\u5230\u7684\u5bff\u53f8\u5728\u7532/\u4e59\u7684\u671f\u671b\u5e8f\u5217\u91cc\u4e0d\u80fd\u9760\u524d\uff0c\n      \u56e0\u4e3a\u5982\u679c\u7532/\u4e59\u671f\u671b\u5e8f\u5217\u5728\u524d\u9762\u51fa\u73b0\u8fc7Ci\uff0c\u5219A/B\u4e00\u5b9a\u4f1a\u548c\u4ed6\u6253\u67b6\uff0c\u8bbe\u8fd9\u4e2a\u65f6\u5019\u7532\n      \u5403\u5230PA\u7684\u7b2cX\u4e2a\uff0c\u4e59\u5403\u5230PB\u7684\u7b2cY\u4e2a\uff08\u56e0\u4e3a\u7532\u4e59\u5403\u7684\u8fdb\u5ea6\u53ef\u80fd\u4e0d\u540c\uff0c\u4f46\u603b\u4e2a\u6570\u662f\u76f8\u540c\n      \u7684\uff09\u3002\n      \n   \u56e0\u4e3a\u7532/\u4e59\u671f\u671b\u5e8f\u5217\u4f1a\u6709\u91cd\u590d\uff0c\u6240\u4ee5\u4e3a\uff08PA1-PAX\uff09\u222a\uff08PB1-PBY\uff09\uff0c\u8bbe\u8fd9\u4e2a\n      \u4e3a$V_{x,y}$\u3002\n          \u8fd9\u65f6\u5019\u6211\u4eec\u53d1\u73b0\uff0c\u56e0\u4e3a1\u8003\u8651\u7684\u662f\u540e\u9762\uff0c2\u8003\u8651\u7684\u662f\u524d\u9762\uff0c\u53c8\u56e0\u4e3a\u671f\u671b\u5e8f\u5217\u548c\n      \u5403\u7684\u987a\u5e8f\u5185\u90e8\u4e0d\u80fd\u91cd\u590d\uff0c\u6240\u4ee51.2\u4e4b\u95f4\u6ca1\u6709\u91cd\u590d\u60c5\u51b5.\n    \n \u5373\u5bf9\u4e8e\u4e00\u4e2aCi\u5b83\u7684\u53d6\u503c\n      \n$\\sum C_{t}=n-3*(k-i)-V_{x,y}=n-3*k+3*i-V_{x,y}=3*i+V_{x,y}$\n\n\u6211\u4eec\u8fd9\u65f6\u5019\u53d1\u73b0\u60c5\u51b5\u53ea\u4e0e\u7532\u4e59\u5403\u7684\u671f\u671b\u5e8f\u5217\u8fdb\u5ea6\u4e0eC\u5403\u7684\u8fdb\u5ea6\u6709\u5173\u7cfb\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\n\u8bbe\tf[i][k][j]\u8868\u793aC\u5728\u5f53\u524d\u8fdb\u5ea6\u4e0b\u6709\u51e0\u4e2a\u5bff\u53f8\u6ca1\u5403(\u5373\u7532\u4e59\u5403\u5230x=y\uff0c\u4e19\u5403\u5230z, i=x-z),\u7532\u5403\u5230\u81ea\u5df1\u671f\u671b\u5e8f\u5217\u7684\u7b2ck\u4e2a\uff0c\u4e59\u5403\u5230\u81ea\u5df1\u671f\u671b\u5e8f\u5217\u7684\u7b2cj\u4e2a\u65f6\uff0c\u6709\u591a\u5c11\u79cd\u60c5\u51b5\u3002\n\n\n------------\n\n**\u53c1\u00b7**\n     \t\u901a\u8fc7\u8f6c\u79fb\u65b9\u7a0b\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u7532\u4e59\u5f53\u524d**\u5403\u7684**\u4e00\u5b9a\u662fPk\uff0cPj\uff0c\u6240\u4ee5\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u8f6c\u79fb\u3002\n\t\n \u8f6c\u79fb\u65b9\u7a0b\uff1a\n\t   \n   \u2460\u5f53P_{k}==P_{j}\u65f6\uff0c\u5373\u7532\u4e59\u5403\u4e00\u4e2a\u5bff\u53f8\uff0c\u4e0d\u7b26\u5408\u6761\u4ef6\uff0c\u4f46\u662fC\u53ef\u4ee5\u63d0\u524d\u628a\u8fd9\u4e2a\u5bff\n       \u53f8\u5403\u4e86\uff0c\u8ba9\u7532\u4e59\u5403\u81ea\u5df1\u671f\u671b\u5e8f\u5217\u7684\u4e0b\u4e00\u4e2a\u3002\n      \t\t   \n$f[i-1][k+1][j+1] + = f[i][k][j]*i$\t\n   \n   (\u968f\u4fbf\u9009\u4e00\u4e2aC\u8fd8\u6ca1\u6709\u5403\u7684\u7a7a\u4f4d\u8ba9C\u628a\u8fd9\u4e2a\u5bff\u53f8\u5403\u6389)\n\t   \n  \u2461\u5f53Pk\u5728Pj\u524d\u9762\u51fa\u73b0\u8fc7\uff0c\u5373Pk\u5df2\u7ecf\u88ab\u4e59\u5403\u6389\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u5148\u4e0d\u7528C\u5403\uff0c\u6240\u4ee5\u6b64\u65f6\u76f4\n       \u63a5\u8f6c\u79fb\u5230\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002\n       \t\t\t\n$f[i][k+1][j] + = f[i][k][j]$\n\t   \n  \u2462\u5f53Pj\u5728Pk\u524d\u9762\u51fa\u73b0\u8fc7\uff0c\u540c\u2461 \n      \t\t        \n$f[i][k][j+1] + = f[i][k][j]$\n\t  \t\n  \u2463   \u2460~\u2462\u90fd\u4e0d\u7b26\u5408\u65f6\u8ba9\u7532\u4e59\u5403\uff0c\u8ba9\u4e19\u518d\u7b49\u7b49 \n                          \n$f[i+1][k+1][j+1] + = f[i][k][j]$\n\t   \n   \u2464   \u2460~\u2462\u90fd\u4e0d\u7b26\u5408\u65f6\u8ba9\u4e19\u5403\uff0c\u7532\u4e59\u5148\u4e0d\u5403\u3002\n                         \n$f[i-1][k+1][j] + = f[i][k][j] * i $\n\n$ f[i-1][k][j+1] + = f[i][k][j] * i $\n       \n   \u6b64\u65f6\u6211\u4eec\u4f1a\u53d1\u73b0\u591a\u52a0\u4e86\u4e00\u5757,\n        \u6bd4\u5982f[i-1][k+1][j]\u518d\u8f6c\u79fb\u5230f[i-2][k+1][j+1]\u540c\u65f6f[i-1][k][j+1]\u4e5f\u4f1a\u518d\u8f6c\n        \u79fb\u5230f[i-2][k+1][j+1]\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u51cf\u53bb\u5b83\u3002\n        \n$f[i-2][k+1][j+1] - = f[i][k][j] * i * (i-1)$\n\t\n   PS:\u53ef\u80fd\u4f60\u4f1a\u5947\u602a\u2464\u4e3a\u4ec0\u4e48\u4f1a\u8ba9C\u7b49\u4e8eP_{k}\u6216P_{j}\n  \u800c\u4e19\u5176\u5b9e\u53ef\u4ee5\u5403\u6389\u540e\u9762\u968f\u4fbf\u4e00\u4e2a\u5bff\u53f8\uff0c\u8bf7\u4f60\u770b\u7b2c\u2463\u4e2a\u5f0f\u5b50\uff0c\u5b83\u5b9e\u9645\u4e0a\u628a\u8fd9\u91cc\u7684\u673a\u4f1a\u4ecd\u7136\u7559\u7ed9\u4e86\u8ba9C\u5403\u6389\u540e\u9762\u968f\u4fbf\u4e00\u4e2a\u5bff\n    \u53f8\uff08\u5f53k\uff0cj\u5f80\u540e\u626b\u7684\u65f6\u5019\uff0c\u6267\u884c\u2464\u8f6c\u79fb\uff0c\u7a7a\u4f4d\u8fd8\u662f\u7ed9\u4e19\u7559\u7740\uff0c\u7b49\u4ef7\u4e8e\u8ba9\u4e19\u7a0d\u540e\u518d\u5403\uff09\u3002\n\t\n   \u6700\u540e\u6211\u4eec\u7edf\u8ba1\u4e0b$f[0][\\frac{3}{n}~n][n]$\u4e0e$f[0][n][\\frac{3}{n}~n]$\u5373\u53ef\n    (\u56e0\u4e3a\u80af\u5b9a\u6709\u4e00\u4e2a\u671f\u671b\u5e8f\u5217\u4e2d\u5168\u90e8\u88ab\u5403\u5b8c\uff0c\u56e0\u4e3a\u6240\u6709\u7684\u5e8f\u5217\u90fd\u8868\u793a1~n,\u800c\u6839\u636e\u8f6c\u79fb\u6709\n    \u53ef\u80fd\u4e00\u4e2a\u5e8f\u5217\u53ea\u5403\u5230\u4e86$\\frac{3}{n}$,\u56e0\u4e3a\u6b64\u65f6C\u5168\u5403\u7684\u53e6\u4e00\u4e2a\u671f\u671b\u5e8f\u5217\uff0c\u800c\u5b83\u6bd4\u53e6\n   \u4e00\u4e2a\u671f\u671b\u5e8f\u5217\u4e00\u76f4\u65e9\u5403)\n\n\n------------\n**\u8086\u00b7**\n     \u9898\u76ee\u5230\u8fd9\u91cc\u5c31\u5dee\u4e0d\u591a\u505a\u5b8c\u4e86\uff0c\u6ce8\u610f\u4e0b\u53d6\u6a21\u548c\u8fb9\u754c\u95ee\u9898\u5373\u53ef\uff0c\u8d34\u4e00\u4e0b\u6211\u7684\u4ee3\u7801\uff08\u7801\u98ce\u52ff\u55b7\uff09\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<string.h>\nusing namespace std;\nconst int mod=1e9+7;\nint n;\nint a[410],b[410];\nint v[410][410];\nint js[410],cnt;\nint kuai[410],wz=1,zs=2;\nint f[410][410][410];\nint ya[410];\nint yb[410];\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%lld\",&a[i]);\n\t\tya[a[i]]=i;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%lld\",&b[i]);\n\t\tyb[b[i]]=i;\n\t}\n\tkuai[0]=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tkuai[i]=1ll*wz*1ll*zs%mod*1ll*kuai[i-1]%mod;\n\t\twz+=3;\n\t\tzs+=3;\n\t} \n\tf[0][1][1]=1;\n\tfor(int j=1;j<=n;j++)\n\t{\n\t\tfor(int k=1;k<=n;k++)\n\t\t{\n\t\t\tfor(int i=0;i<=n/3;i++)\n\t\t\t{\n\t\t\t\tif(!f[i][k][j])continue;\n\t\t\t\tif(yb[a[k]]<=j||ya[b[j]]<=k){\n\t\t\t\t\tif(a[k]==b[j]){\n\t\t\t\t\t\tif(i==0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tf[i-1][k+1][j+1]=(1ll*f[i-1][k+1][j+1]+1ll*f[i][k][j]*1ll*i%mod)%mod;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif(yb[a[k]]<=j)\n\t\t\t\t\t{\n\t\t\t\t\t\tf[i][k+1][j]=(1ll*f[i][k+1][j]+1ll*f[i][k][j])%mod;continue;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tf[i][k][j+1]=(1ll*f[i][k][j+1]+1ll*f[i][k][j])%mod;continue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tf[i+1][k+1][j+1]=(1ll*f[i+1][k+1][j+1]+1ll*f[i][k][j])%mod;\n\t\t\t\tif(i>0)\n\t\t\t\t{\n\t\t\t\t\tf[i-1][k+1][j]=(1ll*f[i][k][j]*i%mod+1ll*f[i-1][k+1][j])%mod;\n\t\t\t\t\tf[i-1][k][j+1]=(1ll*f[i][k][j]*i%mod+1ll*f[i-1][k][j+1])%mod;\n\t\t\t\t\tif(i>1)f[i-2][k+1][j+1]=(1ll*f[i-2][k+1][j+1]-1ll*f[i][k][j]*(1ll*i*(i-1)%mod)%mod+mod)%mod;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint summ=0;\n\tint uu =0;\n\tfor(int i=n/3;i<=n;i++){\n\t\tfor(int k=n/3;k<=n;k++){\n\t\t\tuu+=f[0][i][k];\n\t\t\tuu%=mod;\n\t\t}\n\t}\n\tfor(int i=n/3;i<=n;i++)\n\t{\n\t\tsumm+=f[0][i][n+1];\n\t\tsumm%=mod;\n\t}\n\tfor(int i=n/3;i<=n;i++)\n\t{\n\t\tsumm+=f[0][n+1][i];\n\t\tsumm%=mod;\n\t}\n\tprintf(\"%lld\",1ll*summ*1ll*kuai[n/3]%mod);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1585784465,
        "uid": 222675,
        "name": "wzs_",
        "ccfLevel": 0,
        "title": "atcoder code festival 2017qualC  F\u9898\u89e3"
    }
]
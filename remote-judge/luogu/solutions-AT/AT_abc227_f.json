[
    {
        "content": "\u7b80\u5355 DP\uff0c\u5f53\u65f6\u8d5b\u65f6\u6ca1\u505a\u51fa\u6765\uff0c\u600e\u4e48\u56de\u4e8b\u5462\u3002\n\n\u5728 DP \u8fc7\u7a0b\u4e2d\u5e76\u4e0d\u597d\u7ef4\u62a4\u524d $k$ \u5927\u90fd\u662f\u4ec0\u4e48\uff0c\u6ca1\u6709\u529e\u6cd5\u628a\u5b83\u653e\u5230\u72b6\u6001\u91cc\uff0c\u56e0\u6b64\u6211\u4eec\u679a\u4e3e\u7b2c $k$ \u5927\u6570\u7684\u4e0b\u6807 $a_{x,y}$\u3002\n\n\u7136\u540e\u5c31\u597d\u529e\u4e86\uff0c\u8bbe $dp_{i,j,t}$ \u8868\u793a\u4ece $(1,1)$ \u8d70\u5230 $(i,j)$\uff0c\u4e14\u8def\u5f84\u4e0a\u6709 $t$ \u4e2a\u6570\u5728\u524d $k$ \u5927\u4e2d\u65f6\u7684\u7b54\u6848\u3002\n\n\u6709\u4e24\u79cd\u8f6c\u79fb\uff1a\n\n- \u5f53 $a_{i,j}\\ge a_{x,y}$ \u65f6\uff0c$a_{i,j}$ \u53ef\u4ee5\u5728\u524d $k$ \u5927\u4e2d\uff0c\u8f6c\u79fb\u4e3a $dp_{i,j,t}=\\min\\{dp_{i-1,j,t-1},dp_{i,j-1,t-1}\\}+a_{i,j}$\u3002\n- \u5f53 $a_{i,j}\\le a_{x,y}$ \u65f6\uff0c$a_{i,j}$ \u53ef\u4ee5\u4e0d\u5728\u524d $k$ \u5927\u4e2d\uff0c\u8f6c\u79fb\u4e3a $dp_{i,j,t}=\\min\\{dp_{i-1,j,t},dp_{i,j-1,t}\\}$\u3002\n\n\u53d6\u6bcf\u4e00\u4e2a $a_{x,y}$ \u65f6\u7684 $dp_{n,m,k}$ \u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n```cpp\n// Problem: F - Treasure Hunting\n// Contest: AtCoder - KEYENCE Programming Contest 2021 (AtCoder Beginner Contest 227)\n// URL: https://atcoder.jp/contests/abc227/tasks/abc227_f\n// Memory Limit: 1024 MB\n// Time Limit: 3000 ms\n// \n// Powered by CP Editor (https://cpeditor.org)\n\n//By: OIer rui_er\n#include <bits/stdc++.h>\n#define rep(x,y,z) for(ll x=(y);x<=(z);x++)\n#define per(x,y,z) for(ll x=(y);x>=(z);x--)\n#define debug(format...) fprintf(stderr, format)\n#define fileIO(s) do{freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout);}while(false)\nusing namespace std;\ntypedef long long ll;\nconst ll N = 35, inf = 0x3f3f3f3f3f3f3f3fll;\n\nll n, m, k, a[N][N], dp[N][N][2*N], ans = inf;\ntemplate<typename T> void chkmin(T& x, T y) {if(x > y) x = y;}\ntemplate<typename T> void chkmax(T& x, T y) {if(x < y) x = y;}\n\nint main() {\n\tscanf(\"%lld%lld%lld\", &n, &m, &k);\n\trep(i, 1, n) rep(j, 1, m) scanf(\"%lld\", &a[i][j]);\n\trep(x, 1, n) {\n\t\trep(y, 1, m) {\n\t\t\tmemset(dp, 0x3f, sizeof(dp));\n\t\t\tdp[0][1][0] = 0;\n\t\t\trep(i, 1, n) {\n\t\t\t\trep(j, 1, m) {\n\t\t\t\t\tif(a[i][j] >= a[x][y]) {\n\t\t\t\t\t\trep(t, 1, k) {\n\t\t\t\t\t\t\tchkmin(dp[i][j][t], dp[i-1][j][t-1] + a[i][j]);\n\t\t\t\t\t\t\tchkmin(dp[i][j][t], dp[i][j-1][t-1] + a[i][j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(a[i][j] <= a[x][y]) {\n\t\t\t\t\t\trep(t, 0, k) {\n\t\t\t\t\t\t\tchkmin(dp[i][j][t], dp[i-1][j][t]);\n\t\t\t\t\t\t\tchkmin(dp[i][j][t], dp[i][j-1][t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tchkmin(ans, dp[n][m][k]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1668174816,
        "uid": 122461,
        "name": "rui_er",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 [ABC227F] Treasure Hunting"
    },
    {
        "content": "\u663e\u7136\u8fd9\u4e2a\u9898\u662f dp\u3002\n\n\u4f46\u662f\u6211\u4eec\u53d1\u73b0\uff0c\u524d $K$ \u5927\u8fd9\u4e2a\u73a9\u610f\u662f\u5f88\u96be\u7528 dp \u5904\u7406\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u8003\u8651\u679a\u4e3e\u6240\u6709 $a_{x,y}$\uff0c\u5e76\u4ee4 $a_{x,y}$ \u4e3a \u7b2c $K$ \u5927\u7684\u6570\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8bbe $f_{i,j,k}$ \u4e3a\u8d70\u5230 $(i,j)$\uff0c\u4e14\u6070\u6709 $k$ \u4e2a\u6570\u5927\u4e8e\u7b49\u4e8e $a_{x,y}$\uff0c\u90a3\u4e48\u6b64\u65f6\u7684\u7b54\u6848\u5373\u4e3a $f_{n,m,K}$\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$$\nf_{i,j,k}=\n\\begin{cases}\n\\min(f_{i,j-1,k-1}+f_{i-1,j,k-1})+a_{i,j},&a_{i,j}\\gt a_{x,y}\\\\\n\\min(f_{i,j-1,k},f_{i-1,j,k},f_{i,j-1,k-1}+a_{i,j},f_{i-1,j,k-1}+a_{i,j}),&a_{i,j}=a_{x,y}\\\\\n\\min(f_{i,j-1,k},f_{i-1,j,k}),&a_{i,j}\\lt a_{x,y}\n\\end{cases}\n$$\n\n\uff08\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c$a_{i,j}$ \u53ef\u4ee5\u5728\u524d $K$ \u5927\u91cc\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u5728\uff0c\u4e24\u79cd\u60c5\u51b5\u90fd\u8981\u8003\u8651\uff09\n\n\u6700\u7ec8\u7b54\u6848\u5373\u4e3a\u6240\u6709 $x,y$ \u5bf9\u5e94\u7684 $f_{n,m,K}$ \u7684\u6700\u5c0f\u503c\u3002\n\n```cpp\n#include <algorithm>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n\ntypedef long long ll;\n\nconst int N = 30;\n\nint n, m, p, a[N + 10][N + 10];\nll f[N + 10][N + 10][N * 2 + 10];\n\nint main() {\n  scanf(\"%d%d%d\", &n, &m, &p);\n  for (int i = 1; i <= n; i++)\n    for (int j = 1; j <= m; j++)\n      scanf(\"%d\", a[i] + j);\n  ll ans = 0x3f3f3f3f3f3f3f3f;\n  for (int x = 1; x <= n; x++)\n    for (int y = 1; y <= m; y++) {\n      int now = a[x][y];\n      memset(f, 0x3f, sizeof(f));\n      f[0][0][0] = f[0][1][0] = f[1][0][0] = 0;\n      for (int i = 1; i <= n; i++)\n        for (int j = 1; j <= m; j++) {\n          if (a[i][j] < now) f[i][j][0] = min(f[i][j - 1][0], f[i - 1][j][0]);\n          for (int k = 0; k <= p; k++) {\n            if (a[i][j] > now) f[i][j][k] = min(f[i][j - 1][k - 1], f[i - 1][j][k - 1]) + a[i][j];\n            else if (a[i][j] == now)\n              f[i][j][k] = min({f[i][j - 1][k], f[i - 1][j][k], f[i][j - 1][k - 1] + a[i][j], f[i - 1][j][k - 1] + a[i][j]});\n            else f[i][j][k] = min(f[i][j - 1][k], f[i - 1][j][k]);\n          }\n        }\n      ans = min(ans, f[n][m][p]);\n    }\n  printf(\"%lld\\n\", ans);\n  return 0;\n}\n```",
        "postTime": 1666757652,
        "uid": 242702,
        "name": "registerGen",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT_abc227_f \u3010[ABC227F] Treasure Hunting\u3011"
    }
]
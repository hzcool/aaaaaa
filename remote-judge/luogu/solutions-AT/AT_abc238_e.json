[
    {
        "content": "\u89c2\u5bdf\u5230\u539f\u6570\u7ec4\u7684\u5177\u4f53\u53d6\u503c\u5e76\u4e0d\u91cd\u8981\uff0c\u6211\u4eec\u9700\u8981\u7684\u4fe1\u606f\u53ea\u662f\u533a\u95f4 $ [l,r] $ \u7684\u548c\u4e3a $ sum_r-sum_{l-1} $\uff0c\u5176\u4e2d $ sum $ \u4ee3\u8868\u524d\u7f00\u548c\u3002\n\n\u4e8e\u662f\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a\u601d\u8def\uff1a\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u4e00\u4e2a\u533a\u95f4 $ [l,r] $\uff0c\u5efa\u65e0\u5411\u8fb9 $ (l-1,r) $\uff0c\u4ee3\u8868\u7531 $ sum_r $ \u7684\u4fe1\u606f\u80fd\u63a8\u51fa $ sum_{l-1} $ \u7684\u4fe1\u606f\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5df2\u77e5 $ sum_0=0 $\uff0c\u95ee\u9898\u8f6c\u5316\u4e3a\u80fd\u5426\u77e5\u9053 $ sum_n $\uff0c\u4e5f\u5c31\u662f\u4ece\u56fe\u4e0a\u7684 $ 0 $ \u8282\u70b9\u80fd\u5426\u5230\u8fbe $ n $\u3002\n\n\u8fd9\u4e2a\u53ef\u4ee5\u76f4\u63a5\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $ \\mathcal{O}(q\\log{n}) $\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#import <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int maxn=2e5+10;\nconst int mod=1e18;\nint n,q,u,v,c;\nchar op;\nstruct Splay\n{\n    int ch[maxn][2],fa[maxn],siz[maxn],val[maxn],sum[maxn],add[maxn],mul[maxn],rev[maxn];\n    void clear(int x)\n    {\n        ch[x][0]=ch[x][1]=fa[x]=siz[x]=val[x]=sum[x]=add[x]=rev[x]=0;\n        mul[x]=1;\n    }\n    int getch(int x)\n    {\n        return (ch[fa[x]][1]==x);\n    }\n    int isroot(int x)\n    {\n        clear(0);\n        return ch[fa[x]][0]!=x&&ch[fa[x]][1]!=x;\n    }\n    void maintain(int x)\n    {\n        clear(0);\n        siz[x]=(siz[ch[x][0]]+1+siz[ch[x][1]])%mod;\n        sum[x]=(sum[ch[x][0]]+val[x]+sum[ch[x][1]])%mod;\n    }\n    void pushdown(int x)\n    {\n        clear(0);\n        if(mul[x]!=1)\n        {\n            if(ch[x][0])\n            mul[ch[x][0]]=(mul[x]*mul[ch[x][0]])%mod,val[ch[x][0]]=(val[ch[x][0]]*mul[x])%mod,sum[ch[x][0]]=(sum[ch[x][0]]*mul[x])%mod,add[ch[x][0]]=(add[ch[x][0]]*mul[x])%mod;\n            if(ch[x][1])\n            mul[ch[x][1]]=(mul[x]*mul[ch[x][1]])%mod,val[ch[x][1]]=(val[ch[x][1]]*mul[x])%mod,sum[ch[x][1]]=(sum[ch[x][1]]*mul[x])%mod,add[ch[x][1]]=(add[ch[x][1]]*mul[x])%mod;\n            mul[x]=1;\n        }\n        if(add[x])\n        {\n            if(ch[x][0])\n            add[ch[x][0]]=(add[ch[x][0]]+add[x])%mod,val[ch[x][0]]=(val[ch[x][0]]+add[x])%mod,sum[ch[x][0]]=(sum[ch[x][0]]+add[x]*siz[ch[x][0]])%mod;\n            if(ch[x][1])\n            add[ch[x][1]]=(add[ch[x][1]]+add[x])%mod,val[ch[x][1]]=(val[ch[x][1]]+add[x])%mod,sum[ch[x][1]]=(sum[ch[x][1]]+add[x]*siz[ch[x][1]])%mod;\n            add[x]=0;\n        }\n        if(rev[x])\n        {\n            if(ch[x][0])\n            rev[ch[x][0]]^=1,swap(ch[ch[x][0]][0],ch[ch[x][0]][1]);\n            if(ch[x][1])\n            rev[ch[x][1]]^=1,swap(ch[ch[x][1]][0],ch[ch[x][1]][1]);\n            rev[x]=0;\n        }\n    }\n    void update(int x)\n    {\n        if(!isroot(x))\n        update(fa[x]);\n        pushdown(x);\n    }\n    void rotate(int x)\n    {\n        int y=fa[x],z=fa[y],chx=getch(x),chy=getch(y);\n        fa[x]=z;\n        if(!isroot(y))\n        ch[z][chy]=x;\n        ch[y][chx]=ch[x][chx^1];\n        fa[ch[x][chx^1]]=y;\n        ch[x][chx^1]=y;\n        fa[y]=x;\n        maintain(y);\n        maintain(x);\n        maintain(z);\n    }\n    void splay(int x)\n    {\n        update(x);\n        for(int f=fa[x];f=fa[x],!isroot(x);rotate(x))\n        if(!isroot(f))\n        rotate(getch(x)==getch(f)?f:x);\n    }\n    void access(int x)\n    {\n        for(int f=0;x;f=x,x=fa[x])\n        splay(x),ch[x][1]=f,maintain(x);\n    }\n    void makeroot(int x)\n    {\n        access(x);\n        splay(x);\n        swap(ch[x][0],ch[x][1]);\n        rev[x]^=1;\n    }\n    int find(int x)\n    {\n        access(x);\n        splay(x);\n        while(ch[x][0])\n        x=ch[x][0];\n        splay(x);\n        return x;\n    }\n    void final_mul(int u,int v,int c)\n    {\n    makeroot(u), access(v), splay(v);\n      val[v] = val[v] * c % mod;\n      sum[v] = sum[v] * c % mod;\n      mul[v] = mul[v] * c % mod;\n    }\n    void final_add(int u,int v,int c)\n    {\n    makeroot(u), access(v), splay(v);\n      val[v] = (val[v] + c) % mod;\n      sum[v] = (sum[v] + siz[v] * c % mod) % mod;\n      add[v] = (add[v] + c) % mod;\n    }\n    int query1(int u,int v)\n    {\n    makeroot(u), access(v), splay(v);\n    return sum[v];\n    }\n    void link(int u,int v)\n    {\n    if (find(u) != find(v)) \n    makeroot(u), fa[u] = v;\n    }\n    void cut(int u,int v)\n    {\n    makeroot(u);\n      access(v);\n      splay(v);\n      if (ch[v][0] == u && !ch[u][1]) \n      ch[v][0] = fa[u] = 0;\n    }\n    bool query2(int u,int v)\n    {\n    return find(u) == find(v);\n    }\n}st;\nint find(int x)\n{\nreturn st.find(x);\n}\nvoid merge(int u,int v)\n{\nst.link(u,v);\n}//LCT-\u5e76\u67e5\u96c6\nsigned main()\n{\n\tios::sync_with_stdio(0);\n\tint n,q;\n\tcin>>n>>q;\n\tfor(int i=1;i<=n+1;i++)\n\t\tst.clear(i),st.maintain(i),st.splay(i);\n\twhile(q--)\n\t{\n\t\tint l,r;\n\t\tcin>>l>>r;\n\t\tst.link(r+1,l);//\u56e0\u4e3aLCT\u4e0d\u652f\u6301\u5bf90\u8282\u70b9\u64cd\u4f5c\uff08\u5426\u5219\u4f1a\u8d85\u65f6\uff09\u6240\u4ee5\u5750\u6807\u96c6\u4f53\u5e73\u79fb1\n\t}\n\tif(st.find(1)==st.find(n+1))\n\t\tcout<<\"Yes\";\n\telse\n\t\tcout<<\"No\";\n}\n```\n",
        "postTime": 1667290114,
        "uid": 714821,
        "name": "loser_seele",
        "ccfLevel": 4,
        "title": "ABC238E\u9898\u89e3"
    },
    {
        "content": "$l$ \u5230 $r$ \u7684\u533a\u95f4\u548c\uff0c\u5f88\u5bb9\u6613\u8ba9\u4eba\u60f3\u5230\u524d\u7f00\u548c\u3002\n\n\u800c\u6b63\u5411\u6c42\u533a\u95f4\u548c\u7684\u516c\u5f0f\u662f\uff1a$ans=s_r-s_{l-1}$\uff0c\u5176\u4e2d $s$ \u4e3a\u524d\u7f00\u548c\u6570\u7ec4\u3002\n\n\u5728\u5f80\u53cd\u65b9\u5411\u60f3\uff0c$s_{l-1}=s_r-ans$\uff0c\u6240\u4ee5\u5bf9\u4e8e\u9898\u76ee\u7ed9\u5b9a\u7684 $ans$\uff0c\u7528 $s_r$ \u53ef\u4ee5\u6c42\u51fa $s_{l-1}$\u3002\n\n\u8fd9\u4e2a\u7279\u70b9\u5c31\u5f88\u719f\u6089\u4e86\uff0c\u8fde\u4e00\u6761\u8fb9\uff0c\u7136\u540e\u5224\u65ad $0$ \u548c $n$ \u662f\u5426\u5728\u540c\u4e00\u4e2a\u8054\u901a\u5757\u4e2d\uff0c\u5982\u679c\u5728\uff0c\u90a3\u4e48\u5c31\u6c42\u7684\u51fa $s_n-s_0$\uff0c\u4e5f\u5c31\u662f\u6240\u6709\u6570\u7684\u548c\u3002\u8054\u901a\u5757\u76f4\u63a5\u7528\u5e76\u67e5\u96c6\u5373\u53ef\u3002\n\nCode:\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n,q,l,r,fa[2000005];\nint find(int x)\n{\n  return fa[x]==x?x:fa[x]=find(fa[x]); //\u5e76\u67e5\u96c6\u538b\u7f29\u8def\u5f84\n}\nint main()\n{\n  cin>>n>>q;\n  for(int i=0;i<=n+3;i++)\n    fa[i]=i;\n  for(int i=1;i<=q;i++)\n  {\n    cin>>l>>r;\n    fa[find(r)]=find(l-1); //\u8fde\u8fb9\n  }\n  cout<<(find(0)==find(n)?\"Yes\":\"No\")<<'\\n'; //\u5224\u65ad\n  return 0;\n}\n```\n",
        "postTime": 1679649809,
        "uid": 701302,
        "name": "BLuemoon_",
        "ccfLevel": 3,
        "title": "ABC238E"
    },
    {
        "content": "[\u4e5f\u8bb8\u6709\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/zheyuanxie/p/abc238e.html)\n\n## \u7b80\u8981\u9898\u610f\n\n\u6709\u4e00\u4e2a\u957f\u5ea6\u4e3a $N$ \u7684\u5e8f\u5217 $a$\uff0c\u4f60\u77e5\u9053 $Q$ \u4e2a\u533a\u95f4\u7684\u548c\u3002\u6c42\u662f\u5426\u53ef\u4ee5\u77e5\u9053 $[1,n]$ \u7684\u548c\u3002\n\n$1 \\leq N,Q \\leq 2 \\times 10^5$\n\n## \u601d\u8def\n\n\u8fd9\u662f\u4e00\u9053\u5e76\u67e5\u96c6\u9898\u3002\n\n\u9996\u5148\u8003\u8651\uff0c\u6211\u4eec\u662f\u5982\u4f55\u5feb\u901f\u6c42\u533a\u95f4\u548c\u7684\uff1a\u524d\u7f00\u548c\uff01\n\n\u9996\u5148\u8003\u8651\u4ee5\u4e0b\u524d\u7f00\u548c\uff0c\u4ee4 $P$ \u4e3a $a$ \u7684\u524d\u7f00\u548c\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053 $P_r$ \u548c $P_{l-1}$ \u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u6240\u4ee5\u6211\u4eec\u81ea\u7136\u60f3\u5230\u5bf9\u4e8e\u77e5\u9053\u7684\u533a\u95f4 $[l,r]$\uff0c\u8fde\u8fb9 $(l-1,r)$\u3002\u6700\u540e\u67e5 $0$ \u548c $N$ \u662f\u5426\u8fde\u901a\u5373\u53ef\u3002\n\n\u4f7f\u7528\u5e76\u67e5\u96c6\u5b9e\u73b0\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(Q\\log N)$\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\n#pragma GCC optimize(\"Ofast\", \"inline\", \"-ffast-math\")\n#pragma GCC target(\"avx,sse2,sse3,sse4,mmx\")\nusing namespace std;\n\nint n,q;\nint fa[2000005];\n\nint find(int x){\n\tif(fa[x]==x)return x;\n\telse {\n\t\tint parent=find(fa[x]);\n\t\tfa[x]=parent;\n\t\treturn parent;\n\t}\n}\nvoid merge(int x,int y){\n\tint fx=find(x),fy=find(y);\n\tif(fx==fy)return;\n\telse{\n\t\tfa[fy]=fx;\n\t}\n}\nbool same(int x,int y){\n\treturn find(x)==find(y);\n}\n\nsigned main(){\n\tios::sync_with_stdio(false);cin.tie(NULL);cout.tie(NULL);\n\tcin>>n>>q;\n\tfor(int i=1;i<=n;i++){\n\t\tfa[i]=i;\n\t}\n\tfor(int i=1;i<=q;i++){\n\t\tint l,r;\n\t\tcin>>l>>r;\n\t\tmerge(l-1,r);\n\t}\n\tcout<<(same(0,n)?\"Yes\":\"No\")<<'\\n';\n\treturn 0;\n}\n```\n\n[AC Record](https://atcoder.jp/contests/abc238/submissions/36770950)",
        "postTime": 1669367382,
        "uid": 413065,
        "name": "xiezheyuan",
        "ccfLevel": 5,
        "title": "ABC238E Range Sums"
    }
]
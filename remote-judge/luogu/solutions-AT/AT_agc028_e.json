[
    {
        "content": "[\u5e7f\u544a](https://m-sea-blog.com/archives/agc028e/)\n\n\u56e0\u4e3a\u8981\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u8d2a\u5fc3\uff0c\u4ece\u524d\u5f80\u540e\u786e\u5b9a\u6240\u6709\u4f4d\uff0c\u6bcf\u4f4d\u5c3d\u91cf\u586b $0$\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u628a\u662f $p$ \u4e2d\u7684\u524d\u7f00\u6700\u5927\u503c\u7684\u524d\u7f00\u6700\u5927\u503c\u79f0\u4f5c\u201c\u65e7\u7684\u201c\uff0c\u4e0d\u662f $p$ \u4e2d\u524d\u7f00\u6700\u5927\u503c\u7684\u524d\u7f00\u6700\u5927\u503c\u79f0\u4f5c\u201d\u65b0\u7684\u201c\u3002\n\n\u9996\u5148\u6709\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5982\u679c\u4e00\u4e2a $s$ \u5408\u6cd5\uff0c\u90a3\u4e48 $x,y$ \u4e24\u4e2a\u5e8f\u5217\u4e2d\u4e00\u5b9a\u6709\u4e00\u4e2a\u5e8f\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u5168\u90fd\u662f\u65e7\u7684\u3002\n\n\u8bc1\u660e\u53ef\u4ee5\u8fd9\u6837\u8003\u8651\uff1a\u5982\u679c $x,y$ \u4e2d\u90fd\u6709\u4e00\u4e2a\u65b0\u7684\u524d\u7f00\u6700\u5927\u503c\uff0c\u90a3\u4e48\u6211\u4eec\u4ea4\u6362\u8fd9\u4e24\u4e2a\u6570\uff0c\u8fd9\u6837\u5b50\u4e24\u4e2a\u5e8f\u5217\u4e2d\u5c31\u90fd\u5c11\u4e86\u4e00\u4e2a\u65b0\u7684\u3002\n\n\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u5047\u8bbe $x$ \u7684\u524d\u7f00\u6700\u5927\u503c\u5168\u662f\u65e7\u7684\u3002\n\n\u6211\u4eec\u5047\u8bbe\u524d $i-1$ \u4f4d\u5df2\u7ecf\u586b\u5b8c\u4e86\uff0c\u73b0\u5728\u9700\u8981\u5224\u5b9a\u7b2c $i$ \u4f4d\u80fd\u5426\u586b $0$\u3002\n\n\u8bbe $x$ \u5df2\u7ecf\u586b\u7684\u6570\u4e2d\u7684\u524d\u7f00\u6700\u5927\u503c\u6709 $cx$ \u4e2a\uff0c$y$ \u5df2\u7ecf\u586b\u7684\u6570\u4e2d\u524d\u7f00\u6700\u5927\u503c\u6709 $cy$ \u4e2a\uff0c$p_{i..n}$ \u4e2d\u6709 $c$ \u4e2a\u65e7\u524d\u7f00\u6700\u5927\u503c\uff0c$y$ \u540e\u9762\u586b\u7684\u6570\u4e2d\u4f1a\u6709 $k$ \u4e2a\u65e7\u524d\u7f00\u6700\u5927\u503c\u3001$m$ \u4e2a\u65b0\u524d\u7f00\u6700\u5927\u503c\uff0c\u90a3\u4e48\u5e94\u8be5\u8981\u6709\n\n$$cx+c-k=cy+k+m$$\n\n\u5373\n\n$$2k+m=cx+c-cy$$\n\n\u53ef\u4ee5\u53d1\u73b0\u53f3\u8fb9\u662f\u5e38\u6570\uff0c\u6211\u4eec\u53ea\u8981\u5224\u65ad\u5de6\u8fb9\u80fd\u5426\u6ee1\u8db3\u5373\u53ef\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u5de6\u8fb9\u7684\u610f\u601d\u5176\u5b9e\u662f\u628a\u65e7\u524d\u7f00\u6700\u5927\u503c\u770b\u6210 $2$\u3001\u65b0\u524d\u7f00\u6700\u5927\u503c\u770b\u6210 $1$\uff0c\u6c42\u80fd\u5426\u5728\u540e\u9762\u627e\u5230\u4e00\u4e2a\u524d\u7f00\u6700\u5927\u503c\u7684\u548c\u662f\u53f3\u8fb9\u7684\u5e38\u6570\u7684\u4e00\u4e2a\u5b50\u5e8f\u5217\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u80fd\u627e\u5230\u4e00\u4e2a\u524d\u7f00\u6700\u5927\u503c\u7684\u548c\u662f $x$ \u7684\u5b50\u5e8f\u5217\uff0c\u90a3\u4e48\u4e00\u5b9a\u80fd\u627e\u5230\u4e00\u4e2a\u548c\u662f $x-2$ \u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u6c42\u51fa\u5947\u5076\u6700\u5927\u503c\u5373\u53ef\u3002\n\n\u8003\u8651 DP\u3002\u8bbe $dp_{i,0/1}$ \u8868\u793a\u4ee5 $i$ \u5f00\u5934\u3001\u548c\u662f\u5076\u6570/\u5947\u6570\u7684\u6700\u5927\u548c\uff0c\u8f6c\u79fb\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u4f18\u5316\u3002\n\n\u4e0a\u9762\u8fd9\u4e2a\u662f $x$ \u4e0d\u653e\u7684\u60c5\u51b5\uff0c$y$ \u4e0d\u653e\u7684\u60c5\u51b5\u7c7b\u4f3c\uff0c\u81ea\u5df1\u63a8\u4e00\u4e0b\u5f0f\u5b50\u5373\u53ef\u3002\n\n```cpp\n// ====================================\n//   author: M_sea\n//   website: https://m-sea-blog.com/\n// ====================================\n#include <bits/stdc++.h>\n#define file(x) freopen(#x\".in\",\"r\",stdin); freopen(#x\".out\",\"w\",stdout)\n#define debug(...) fprintf(stderr,__VA_ARGS__)\nusing namespace std;\ntypedef long long ll;\n\nint read() {\n\tint X=0,w=1; char c=getchar();\n\twhile (c<'0'||c>'9') { if (c=='-') w=-1; c=getchar(); }\n\twhile (c>='0'&&c<='9') X=X*10+c-'0',c=getchar();\n\treturn X*w;\n}\n\nconst int N=200000+10;\nconst int inf=0x3f3f3f40;\n\nint n,a[N],w[N],cnt[N]; char s[N];\n\n#define ls (o<<1)\n#define rs (o<<1|1)\nstruct sgt {\n\tint maxv[N<<2];\n\tvoid pushup(int o) { maxv[o]=max(maxv[ls],maxv[rs]); }\n\tvoid modify(int o,int l,int r,int p,int w) {\n\t\tif (l==r) { maxv[o]=w; return; }\n\t\tint mid=(l+r)>>1;\n\t\tif (p<=mid) modify(ls,l,mid,p,w);\n\t\telse modify(rs,mid+1,r,p,w);\n\t\tpushup(o);\n\t}\n\tint query(int o,int l,int r,int ql,int qr) {\n\t\tif (ql<=l&&r<=qr) return maxv[o];\n\t\tint mid=(l+r)>>1,res=-inf;\n\t\tif (ql<=mid) res=max(res,query(ls,l,mid,ql,qr));\n\t\tif (qr>mid) res=max(res,query(rs,mid+1,r,ql,qr));\n\t\treturn res;\n\t}\n} odd,even;\n#undef ls\n#undef rs\n\nbool check(int p,int w) {\n\tif (w<0) return 0;\n\tif (w&1) return odd.query(1,1,n,p,n)>=w;\n\telse return even.query(1,1,n,p,n)>=w;\n}\n\nint main() {\n\tn=read();\n\tfor (int i=1;i<=n;++i) a[i]=read();\n\tfor (int i=1,mx=0;i<=n;++i) {\n\t\tif (a[i]>mx) w[i]=2,mx=a[i];\n\t\telse w[i]=1;\n\t}\n\tmemset(odd.maxv,0xc0,sizeof(odd.maxv));\n\tfor (int i=n;i;--i) {\n\t\tint mxo=odd.query(1,1,n,a[i],n),mxe=even.query(1,1,n,a[i],n);\n\t\tif (w[i]&1) odd.modify(1,1,n,a[i],mxe+w[i]),even.modify(1,1,n,a[i],mxo+w[i]);\n\t\telse odd.modify(1,1,n,a[i],mxo+w[i]),even.modify(1,1,n,a[i],mxe+w[i]);\n\t}\n\tfor (int i=n;i;--i) cnt[i]=cnt[i+1]+w[i]-1;\n\tint cx=0,cy=0,mxx=0,mxy=0;\n\tfor (int i=1;i<=n;++i) {\n\t\todd.modify(1,1,n,a[i],-inf),even.modify(1,1,n,a[i],0);\n\t\tif (check(mxy,cx+(a[i]>mxx)+cnt[i+1]-cy)\n\t\t  ||check(max(mxx,a[i]),cy+cnt[i+1]-cx-(a[i]>mxx)))\n\t\t\ts[i]='0',cx+=(a[i]>mxx),mxx=max(mxx,a[i]);\n\t\telse s[i]='1',cy+=(a[i]>mxy),mxy=max(mxy,a[i]);\n\t}\n\tif (cx!=cy) puts(\"-1\");\n\telse for (int i=1;i<=n;++i) putchar(s[i]);\n\treturn 0;\n}\n```",
        "postTime": 1600939170,
        "uid": 38370,
        "name": "M_sea",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT4439 \u3010[AGC028E] High Elements\u3011"
    },
    {
        "content": "### AGC 028E\n#### Upd : \u611f\u8c22@Binary_Search_Tree\u6307\u51fa\u4e86\u6211\u4ee3\u7801\u4e2d\u7684\u95ee\u9898\uff0c\u73b0\u5728\u9505\u5df2\u4fee\u590d\u3002\n#### Solution\n\u9996\u5148\u80af\u5b9a\u8981\u6309\u4f4d\u8d2a\u5fc3\uff0c\u90a3\u4e48\u6211\u4eec\u5047\u8bbe\u73b0\u5728\u5df2\u7ecf\u786e\u5b9a\u4e86\u67d0\u4e2a\u524d\u7f00\uff0c\u5224\u65ad\u5bf9\u4e8e\u540e\u9762\u7684\u6240\u6709\u5143\u7d20\u662f\u5426\u5b58\u5728\u67d0\u79cd\u65b9\u6848\u4f7f\u5176\u5408\u6cd5\u3002\n\n\u8bbe\u5f53\u524d$X$\u548c$Y$\u4e2d high \u5143\u7d20\u7684\u4e2a\u6570\u5206\u522b\u4e3a$C_X,C_Y$\uff0c\u6700\u5927\u503c\u5206\u522b\u4e3a$H_X,H_Y$\uff0c\u6211\u4eec\u60f3\u8981\u5224\u65ad\u662f\u5426\u80fd\u5c06\u5269\u4e0b\u7684\u5143\u7d20\u5206\u914d\u7ed9$X$\u6216\u8005$Y$\u4f7f\u5f97 high \u5143\u7d20\u4e2a\u6570\u76f8\u7b49\u3002\n\n\u5047\u8bbe\u5728\u5206\u914d\u4e4b\u540e\uff0c$X$\u4e2d\u65b0\u589e\u7684 high \u5143\u7d20\u4e3a$a_1,a_2,\\cdots,a_{|a|}$\uff0c$Y$\u4e2d\u65b0\u589e\u7684 high \u5143\u7d20\u4e3a$b_1,b_2,\\cdots,b_{|b|}$\uff0c\u90a3\u4e48\u4ed6\u4eec\u5fc5\u987b\u6ee1\u8db3\n\n+ $H_X<a_1<a_2<\\cdots<a_{|a|},H_Y<b_1<b_2<\\cdots<b_{|b|}$\n+ $C_X+|a|=C_Y+|b|$\n+ \u5269\u4e0b\u7684$P$\u4e2d\u6240\u6709\u7684 high \u5143\u7d20\u8981\u4e48\u5728$a$\u4e2d\uff0c\u8981\u4e48\u5728$b$\u4e2d\uff0c\u56e0\u4e3a$P$\u4e2d\u7684 high \u5143\u7d20\u5728\u65b0\u5e8f\u5217\u4e2d\u4ecd\u7136\u4f1a\u662f high \u5143\u7d20\u3002\n\n\u7136\u540e\u6709\u4e00\u4e2a\u7ed3\u8bba\uff0c\u90a3\u5c31\u662f$a$\u548c$b$**\u4e2d\u5fc5\u6709\u4e00\u4e2a\u6ee1\u8db3\u5176\u4e2d\u6240\u6709\u5143\u7d20\u90fd\u662f$P$\u4e2d\u7684 high \u5143\u7d20**\u3002\n\n\u5bf9\u4e8e\u5fc5\u8981\u6027\uff0c\u56e0\u4e3a$P$\u4e2d\u7684 high \u5143\u7d20\u5728\u5206\u5b8c\u4e4b\u540e\u4e00\u5b9a\u4ecd\u7136\u662f high \u5143\u7d20\u3002\n\n\u5bf9\u4e8e\u5145\u5206\u6027\uff0c\u5982\u679c$a,b$\u4e2d\u90fd\u5b58\u5728high\u5143\u7d20\u6ee1\u8db3\u5b83\u4eec\u4e0d\u662f$P$\u4e2d\u7684 high \u5143\u7d20\uff0c\u90a3\u4e48\u6211\u4eec\u4ea4\u6362\u5b83\u4eec\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u503c\u6765\u8bf4\uff0c\u5bfc\u81f4\u5b83\u4e0d\u662f$P$\u4e2d high \u5143\u7d20\u7684\u4f4d\u7f6e\u4e00\u5b9a\u6070\u597d\u5728\u53e6\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u8fd9\u6837\u6211\u4eec\u4f7f\u4e24\u4e2a\u96c6\u5408\u7684 high \u5143\u7d20\u4e2a\u6570\u540c\u65f6\u51cf\u4e00\uff0c\u4e14\u4ecd\u7136\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u6211\u4eec\u5148\u5047\u8bbe$a$\u6ee1\u8db3\u8fd9\u4e2a\u6761\u4ef6\uff08$b$\u6ee1\u8db3\u7684\u60c5\u51b5\u540c\u7406\uff09\n\n\u8bbe$Q$\u4e3a$P$\u4e2d\u5269\u4e0b\u7684 high \u5143\u7d20\u6784\u6210\u7684\u4e2a\u6570\uff0c$b$\u4e2d\u7684 high \u5143\u7d20\u6709$k$\u4e2a\u662f$P$\u4e2d\u7684 high \u5143\u7d20\uff0c$m=|b|-k$\uff0c\u5982\u679c\u6211\u4eec\u786e\u5b9a\u4e86$b$\uff0c\u90a3\u4e48$a$\u4e5f\u5c31\u968f\u4e4b\u786e\u5b9a\u4e86\uff0c\u56e0\u4e3a$a$\u5fc5\u987b\u7531$P$\u4e2d\u4e0d\u5728$b$\u4e2d\u7684\u6240\u6709 high \u5143\u7d20\u7ec4\u6210\u3002\u90a3\u4e48$b$\u8981\u6ee1\u8db3\u4e00\u4e0b\u6761\u4ef6\n\n+ $H_Y<b_1<b_2<\\cdots<b_{|b|}$\n+ $C_X+Q-k=C_Y+|b|$\uff0c\u5316\u7b80\u4e00\u4e0b\u53ef\u5f97$2k+m=C_X-C_Y+Q$\n\n\u8003\u8651\u8bbe\u6240\u6709 high \u5143\u7d20\u6743\u503c\u4e3a$2$\uff0c\u975e high \u5143\u7d20\u6743\u503c\u4e3a$1$\uff0c\u90a3\u4e48\u5c31\u76f8\u5f53\u4e8e**\u627e\u4e00\u4e2a\u4e0a\u5347\u5b50\u5e8f\u5217\u4f7f\u5f97\u6743\u503c\u548c\u4e3a**$C_X-C_Y+Q$\u3002\n\n\u6211\u4eec\u53d1\u73b0\u5982\u679c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u6743\u503c$x$\uff0c\u90a3\u4e48\u4e5f\u4e00\u5b9a\u53ef\u4ee5\u5f97\u5230$x\u22122$\uff0c\u6240\u4ee5\u6211\u4eec\u5206\u522b\u7ef4\u62a4$x$\u4e3a\u5947\u6570\u548c\u5076\u6570\u65f6\u7684\u6700\u5927\u503c\u5373\u53ef\u3002\n\n\u6700\u540e\u7528$f[i][0/1]$\u8868\u793a\u4ee5$i$\u5f00\u5934\u7684\uff0c\u6743\u503c\u548c\u4e3a\u5947\u6570/\u5076\u6570\u7684\u6700\u5927\u6743\u503c\uff0c\u7c7b\u4f3c\u4e0eLIS\u90a3\u6837\u7528\u7ebf\u6bb5\u6811\u4f18\u5316\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$\\mathcal O(n\\log n)$\n#### Code\n```cpp\nint n;\nint a[MAXN],cnt[MAXN],val[MAXN],ans[MAXN];\n\nstruct SegmentTree{\n    struct Tree{\n        int l,r;\n        int max;\n    } tree[MAXN << 2];\n\n    #define lson k << 1\n    #define rson k << 1 | 1\n    \n    void update(int k){\n        tree[k].max = max(tree[lson].max,tree[rson].max);\n    }\n\n    void build(int k,int l,int r,int v = 0){\n        tree[k].l = l;\n        tree[k].r = r;\n        if(l == r){\n            tree[k].max = v;\n            return;\n        }\n        int mid = (l + r) >> 1;\n        build(lson,l,mid,v);\n        build(rson,mid + 1,r,v);\n        update(k);\n    }\n\n    void modify(int k,int x,int v){\n        if(tree[k].l == tree[k].r){\n            tree[k].max = v;\n            return;\n        }\n        int mid = (tree[k].l + tree[k].r) >> 1;\n        if(x <= mid)\n            modify(lson,x,v);\n        else\n            modify(rson,x,v);\n        update(k);\n    }\n\n    int query(int k,int l,int r){\n        if(tree[k].l >= l && tree[k].r <= r)\n            return tree[k].max;\n        int mid = (tree[k].l + tree[k].r) >> 1;\n        int res = -INF;\n        if(l <= mid)\n            res = max(res,query(lson,l,r));\n        if(r > mid)\n            res = max(res,query(rson,l,r));\n        return res;\n    }\n\n    #undef lson\n    #undef rson\n} odd,even;\n\nbool Check(int H,int Q){\n    if(Q < 0) return false;\n    if(Q & 1) return odd.query(1,H,n) >= Q;\n    else return even.query(1,H,n) >= Q;\n}\n\nint main(){\n    scanf(\"%d\",&n);\n    for(int i = 1,maxx = 0;i <= n;i++){\n        scanf(\"%d\",&a[i]);\n        if(a[i] > maxx) val[i] = 2, maxx = a[i];\n        else val[i] = 1;\n    }\n    odd.build(1,1,n,-INF);\n    even.build(1,1,n);\n    for(int i = n;i >= 1;i--){\n        int maxo = odd.query(1,a[i],n), maxe = even.query(1,a[i],n);\n        if(val[i] & 1){\n            odd.modify(1,a[i],maxe + val[i]);\n            even.modify(1,a[i],maxo + val[i]);\n        }else{\n            odd.modify(1,a[i],maxo + val[i]);\n            even.modify(1,a[i],maxe + val[i]);\n        }\n    }\n    for(int i = n;i >= 1;i--)\n        cnt[i] = cnt[i + 1] + val[i] - 1;\n    int CX = 0,CY = 0,HX = 0,HY = 0;\n    for(int i = 1;i <= n;i++){\n        odd.modify(1,a[i],-INF); even.modify(1,a[i],0);\n        if(Check(HY,CX - CY + cnt[i + 1] + (a[i] > HX)) || Check(HX,CY - CX + cnt[i + 1] - (a[i] > HX))){\n            ans[i] = 0;\n            CX += (a[i] > HX);\n            HX = max(HX,a[i]);\n        }else{\n            ans[i] = 1;\n            CY += (a[i] > HY);\n            HY = max(HY,a[i]);\n        }\n    }\n    if(CX != CY) puts(\"-1\");\n    else for(int i = 1;i <= n;i++) putchar(ans[i] + '0');\n    return 0;\n}\n```",
        "postTime": 1608002092,
        "uid": 108894,
        "name": "\u5173\u6000\u4ed6\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT4439 \u3010[AGC028E] High Elements\u3011"
    },
    {
        "content": "\u8ba9\u6211\u4eec\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u5b57\u7b26\u4e32\uff0c\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\u65e0\u975e\u4e24\u79cd\u65b9\u5f0f\uff0c\u7b2c\u4e00\u79cd\u662fDP\u8bb0\u5f55\u65b9\u6848\u6570\uff0c\u7b2c\u4e8c\u79cd\u5c31\u662f\u6309\u4f4d\u8d2a\u5fc3\uff0c\u8fd9\u91cc\u6211\u4eec\u8003\u8651\u6309\u4f4d\u8d2a\u5fc3\u7684\u505a\u6cd5\u3002\u4f46\u5728\u8003\u8651\u8d2a\u5fc3\u7684\u65b9\u5f0f\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6709\u51e0\u4e2a\u7ed3\u8bba\u3002\u4e0b\u6587\u7528 $num$ \u4ee3\u8868\u524d\u7f00\u6700\u5927\u503c\u3002\n\n\u7ed3\u8bba1\uff1a\u5bf9\u4e8e\u539f\u5e8f\u5217\u7684 $num$ \u5fc5\u7136\u4f1a\u5168\u90e8\u51fa\u73b0\u5728 $A$ \u6216 $B$ \u7684\u524d\u7f00\u6700\u5927\u503c\u4e2d\u3002\u5bf9\u4e8e\u5728\u539f\u5e8f\u5217\u51fa\u73b0\u7684 $num$ \u6211\u4eec\u79f0\u4e4b\u4e3a $onum$ \uff0c\u5bf9\u4e8e\u540e\u9762\u51fa\u73b0\u7684\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a $nnum$ \u3002\n\n\u7ed3\u8bba2\uff1a\u6211\u4eec\u53d1\u73b0\uff0c\u4e00\u5b9a\u5b58\u5728\u4e00\u79cd\u5408\u6cd5\u6027\u7684\u6784\u9020\uff0c\u4f7f\u5f97\u67d0\u4e00\u4e2a\u5e8f\u5217\u91cc\u7684 $num$ \u5168\u90e8\u90fd\u662f $onum$ \u3002\n\n\u8bc1\u660e\uff1a\u5982\u679c $A$ \u548c $B$ \u540c\u65f6\u6709 $nnum$ \uff0c\u6211\u4eec\u4ece $A$ \u548c $B$ \u4e2d\u4efb\u53d6\u4e00\u4e2a\uff0c\u4ea4\u6362\u8fd9\u4e24\u4e2a\u6570\uff0c\u8fd9\u4e24\u4e2a\u6570\u5fc5\u7136\u540c\u65f6\u6d88\u5931\uff0c\u7531\u4e8e\u4ed6\u4e0d\u662f $onum$ \uff0c\u6240\u4ee5\u5728\u8fd9\u4e24\u4e2a\u6570\u4e4b\u524d\u5fc5\u7136\u5b58\u5728\u4e00\u4e2a\u6570\u6bd4\u4ed6\u4eec\u5927\uff0c\u4f46\u662f\u73b0\u5728\u4ed6\u4eec\u6210\u4e3a\u4e86\u67d0\u4e2a\u5e8f\u5217\u7684 $num$\uff0c\u90a3\u4e48\u8fdb\u4e00\u6b65\u8bf4\u660e\u5f71\u54cd\u4ed6\u4eec\u6210\u4e3a $num$ \u7684\u6570\u5728\u5bf9\u9762\u90a3\u4e2a\u5e8f\u5217\u91cc\u3002\u6211\u4eec\u73b0\u5728\u628a\u8fd9\u4e24\u4e2a\u6570\u4ea4\u6362\u4e4b\u540e\u5c31\u76f8\u5f53\u4e8e\u540c\u65f6\u6d88\u53bb\u4e86\u8fd9\u4e24\u4e2a\u6570\u7684\u5f71\u54cd\u3002\u6211\u4eec\u4e00\u76f4\u6309\u8fd9\u79cd\u65b9\u5f0f\u8c03\u6574\uff0c\u6700\u540e\u5fc5\u7136\u5b58\u5728\u4e00\u4e2a\u5e8f\u5217\u7684 $num$ \u5168\u662f $onum$ \u3002\n\n\u56e0\u4e3a\u8981\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u6bcf\u6b21\u65e0\u8111\u586b0\uff0c\u6765\u5224\u65ad\u662f\u5426\u5408\u6cd5\uff0c\u4f46\u662f\u8fd9\u4e2a\u4e1c\u897f\u4e0d\u662f\u7279\u522b\u597d\u5224\u65ad\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u4e0d\u597d\u5224\u65ad\u7684\u4e1c\u897f\uff0c\u6211\u4eec\u5f97\u5148\u628a\u5b83\u62bd\u8c61\u51fa\u6765\u3002\u8bbe $A$ \u5e8f\u5217\u5f53\u524d\u5df2\u7ecf\u586b\u4e86 $cnt_1$ \u4e2a $num$ ,\u5f53\u524d\u7684 $num$ \u4e3a $mx_1$ \u3002\u8bbe $B$ \u5e8f\u5217\u5f53\u524d\u5df2\u7ecf\u586b\u4e86 $cnt_2$ \u4e2a $num$ ,\u5f53\u524d\u7684 $num$ \u4e3a $mx_2$ \u3002 \u6211\u4eec\u73b0\u5728\u94a6\u5b9a $A$ \u5e8f\u5217\u91cc\u7684 $num$ \u5168\u662f $onum$ \u3002\u90a3\u4e48\u5047\u8bbe\u540e\u9762\u8fd8\u5269 $Q$ \u4e2a $onum$ \uff0c $B$ \u5e8f\u5217\u540e\u9762\u8fd8\u9700\u8981 $k$ \u4e2a $nnum$ , $m$ \u4e2a $onum$ \u3002\u6211\u4eec\u5fc5\u987b\u8981\u6ee1\u8db3\uff1a\n\n$$cnt_1+Q-m=cnt_2+m+k$$\n\n\u6574\u7406\u5f97\uff1a\n\n$$cnt_1-cnt_2+Q=2m+k$$\n\n\u56e0\u4e3a\u5de6\u8fb9\u7684\u5f0f\u5b50\u5168\u90e8\u90fd\u662f\u5e38\u6570\uff0c\u6240\u4ee5\u672c\u8d28\u662f $2m+k=K$ \u5176\u4e2d $K$ \u5f53\u524d\u662f\u4e00\u4e2a\u5e38\u6570\u3002\u6211\u4eec\u53d1\u73b0\u73b0\u5728\u8fd8\u662f\u4e0d\u592a\u597d\u505a\uff0c\u4f46\u662f\u6211\u4eec\u73b0\u5728\u662f\u8981\u6ee1\u8db3\u67d0\u4e2a\u7b49\u5f0f\uff0c\u800c\u4e14 $m,k$ \u524d\u9762\u7684\u5e38\u7cfb\u6570\u90fd\u662f $1,2$ \u3002\u6240\u4ee5\u5c31\u53ef\u4ee5\u5927\u80c6\u731c\u6d4b\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5173\u5fc3\u6700\u5927\u503c\u662f\u4ec0\u4e48\uff0c\u5982\u679c\u6700\u5927\u503c $>K$ \u3002\u5fc5\u7136\u53ef\u4ee5\u901a\u8fc7\u67d0\u79cd\u8c03\u6574\u4f7f\u5f97\u7b49\u5f0f\u6210\u7acb\u3002\u5176\u5b9e\u6211\u4eec\u7ec6\u60f3\u4e00\u4e0b\uff0c\u53ef\u4ee5\u5206\u5947\u5076\u6c42\u4e00\u4e2a\u52a0\u6743\u7684 $LIS$ \u5c31\u662f\u5bf9\u7684\u3002\u7136\u540e\u5c31\u5b8c\u5566\n\n\n\n",
        "postTime": 1670146160,
        "uid": 295543,
        "name": "beauty_son_whm",
        "ccfLevel": 6,
        "title": "AGC028E"
    },
    {
        "content": "# Description\n\n\u7ed9\u5b9a\u4e00\u4e2a $1 \\sim n$ \u7684\u6392\u5217 $P$\u3002\u8bbe\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684 $01$ \u5b57\u7b26\u4e32 $S$ \u5408\u6cd5\uff0c\u5f53\u4e14\u4ec5\u5f53\uff0c\u5148\u8bbe\u4e24\u4e2a\u7a7a\u5e8f\u5217 $A,B$\uff0c\u6211\u4eec\u6309\u7167 $1$ \u5230 $n$ \u7684\u987a\u5e8f\uff0c\u82e5 $S$ \u5f53\u524d\u4f4d\u4e3a $1$ \u5219\u628a\u5f53\u524d\u4f4d\u7684 $P$ \u6dfb\u52a0\u5230\u5e8f\u5217 $A$ \u7684\u672b\u5c3e\uff0c\u5426\u5219\u6dfb\u52a0\u5230\u5e8f\u5217 $B$ \u7684\u672b\u5c3e\uff0c\u4f7f\u5f97 $A,B$ \u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570\u76f8\u7b49\u3002\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u5408\u6cd5\u5b57\u7b26\u4e32 $S$\uff0c\u82e5\u4e0d\u5b58\u5728\u5408\u6cd5\u65b9\u6848\u5219\u8f93\u51fa ```-1```\u3002\n\n$n \\le 2\\times 10^5$\uff0c\u65f6\u9650 2s\u3002\n\n# Solution\n\n**\u8bc4\u4ef7**\uff1a\n\n- **AT Difficulty**: $4123$ \u91d1\u724c\u9898\n\n- **\u601d\u7ef4 Fineness**: $(9)$ \u667a\u6167\n\n- **\u5b9e\u73b0 Mass**: $(5)$ \u901f\u63a8\n\n- **\u8d28\u91cf Quality**: $(9)$\n\n- **\u98ce\u683c Style**: \u4e2d\u80af\n\n\u4e0d\u59a8\u8003\u8651\u6309\u4f4d\u8d2a\u5fc3\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\u65b9\u6848\u3002\u4ece\u524d\u5f80\u540e\u626b\u63cf\uff0c\u67e5\u770b\u5f53\u524d\u4f4d\u586b $0$ \u540e\u662f\u5426\u5b58\u5728\u5408\u6cd5\u65b9\u6848\uff0c\u5b58\u5728\u5219\u586b $0$\uff0c\u5426\u5219\u586b $1$\u3002\n\n\u8f6c\u5316\u4e3a\u5224\u5b9a\u6027\u95ee\u9898\u3002\u8bbe $s(P)$ \u8868\u793a\u5e8f\u5217 $P$ \u7684\u524d\u7f00\u6700\u5927\u503c\u96c6\u5408\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u5bf9\u4e8e $v \\in s(P)$\uff0c$v$ \u8f6c\u79fb\u5230 $A,B$ \u540e\u4e5f\u5fc5\u7136\u6210\u4e3a\u524d\u7f00\u6700\u5927\u503c\u3002\n\n\u76f4\u63a5\u6316\u6398\u7b54\u6848\u7684\u6027\u8d28\u663e\u5f97\u5f88\u56f0\u96be\uff0c\u4e0d\u59a8\u4ece\u95ee\u9898\u5177\u6709\u5224\u5b9a\u6027\u7684\u89d2\u5ea6\u51fa\u53d1\u5bfb\u627e\u7279\u6b8a\u6027\u8d28\u3002\n\n\u6211\u4eec\u65ad\u8a00\uff1a\u82e5 $P_{[i+1,n]}$ \u4e3a\u5f53\u524d\u672a\u786e\u5b9a\u7684\u540e\u7f00\uff0c\u4e14\u5b58\u5728\u5408\u6cd5\u7684\u8865\u5168\u65b9\u6848\uff0c\u5219\u5fc5\u7136\u5b58\u5728\u4e00\u79cd\u65b9\u6848\u4f7f\u5f97 ${s}_{\\rm new}(A) \\subseteq s(P_{[i+1,n]})$ \u6216 ${s}_{\\rm new}(B) \\subseteq s(P_{[i+1,n]})$\uff0c\u5176\u4e2d $s_{\\rm new}(A)$ \u8868\u793a $A$ \u65b0\u589e\u7684\u524d\u7f00\u6700\u5927\u503c\u3002\n\n\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff0c\u4f60\u53ef\u4ee5\u8003\u8651\u82e5 $A,B$ \u4e2d\u5b58\u5728\u5143\u7d20 $u \\in s(A), v \\in s(B)$\uff0c\u4e14 $u,v \\not \\in s(P)$\uff0c\u5219\u5c06\u4e24\u8005\u4ea4\u6362\uff0c\u6b64\u65f6\u53e6\u4e00\u5e8f\u5217\u4e2d\u5fc5\u7136\u5b58\u5728\u80fd\u4f7f\u4e24\u8005\u4e0d\u518d\u6210\u4e3a\u524d\u7f00\u6700\u5927\u503c\u7684\u5143\u7d20\uff0c\u6240\u4ee5\u4ea4\u6362\u540e\u4e24\u8005\u90fd\u4e0d\u4f1a\u518d\u6210\u4e3a\u524d\u7f00\u6700\u5927\u503c\uff0c\u5e8f\u5217 $A,B$ \u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570\u540c\u65f6\u51cf\u53bb\u4e00\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u5047\u8bbe ${s}_{\\rm new}(A) \\subseteq s(P_{[i+1,n]})$\uff0c\u8bbe\u5f53\u524d $A$ \u4e2d\u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570\u4e3a ${\\rm cnt}_A$\uff0c\u6700\u5927\u503c\u4e3a ${\\rm mx}_A$\uff0c$B$ \u540c\u7406\u3002\u53c8\u8bbe ${s}_{\\rm new}(B)$ \u4e2d\u975e $s(P_{[i+1,n]})$ \u7684\u5143\u7d20\u4e2a\u6570\u4e3a $x$\uff0c\u5176\u4f59\u4e3a $y$\u3002\u5219\u6709\n\n\n$${\\rm cnt}_A+|s(P_{[i+1,n]})|-{\\rm cnt}_B=x+2y$$\n\n\u5de6\u4fa7\u662f\u5e38\u6570\u3002\u89c2\u5bdf\u53f3\u4fa7\u7cfb\u6570\uff0c\u53ef\u4ee5\u53d1\u73b0\u5c31\u662f\u8ba9 $s(P_{[i+1,n]})$ \u4e2d\u5143\u7d20\u6743\u503c\u4e3a $2$\uff0c\u5176\u4f59\u4e3a $1$\uff0c\u5224\u5b9a\u80fd\u5426\u9009\u51fa\u6ee1\u8db3\u9996\u9879 $>{\\rm mx}_B$ \u7684\u6743\u503c\u548c\u4e3a\u7ed9\u5b9a\u503c\u7684\u4e0a\u5347\u5b50\u5e8f\u5217\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u901a\u8fc7\u53bb\u9664\u6700\u5c0f\u503c\u5fc5\u7136\u53ef\u4ee5\u5f97\u5230\u540c\u5947\u5076\u7684\u5176\u4ed6\u7b54\u6848\u3002\u6240\u4ee5\u53ea\u9700\u5206\u522b\u8bb0\u5f55\u5947\u5076\u6700\u5927\u503c\u3002\n\n\u5927\u529b DP\uff0c\u8bbe $f_{i,0/1}$ \u8868\u793a\u4ee5 $P_i$ \u5f00\u5934\u7684\u4e0a\u5347\u5b50\u5e8f\u5217\u7684\u548c\u4e3a\u5947/\u5076\u7684\u6700\u5927\u503c\u3002\n\n\u6709\u8f6c\u79fb\n\n$$f_{i,j}=P_i+\\max_{k=i+1,P_k>P_i}^n f_{k,(j+P_i) \\bmod 2}$$\n\n\u4e0d\u96be\u60f3\u5230\u7528\u7ebf\u6bb5\u6811\u4f18\u5316\u8f6c\u79fb\u548c\u67e5\u8be2\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n \\log n)$\u3002\n\n# Code\n\n```cpp\nconst int N=2e5+5,inf=1e9;\nint n,x0,c0,x1,c1,p[N],sf[N];\nbool e[N];\nstruct sgt {\n\tint v[N*4];\n\t#define ls (x<<1)\n\t#define rs (x<<1|1)\n\tvoid up(int x) {\n\t\tv[x]=max(v[ls],v[rs]);\n\t}\n\tvoid bd(int x,int l,int r) {\n\t\tv[x]=-inf;\n\t\tif (l==r) return;\n\t\tint mid=(l+r)>>1;\n\t\tbd(ls,l,mid),bd(rs,mid+1,r);\n\t}\n\tvoid upd(int x,int l,int r,int p,int k) {\n\t\tif (l==r) {\n\t\t\tv[x]=k;\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tif (p<=mid) upd(ls,l,mid,p,k);\n\t\telse upd(rs,mid+1,r,p,k);\n\t\tup(x);\n\t}\n\tint qry(int x,int l,int r,int L,int R) {\n\t\tif (r<L || l>R || L>R) return -inf;\n\t\tif (L<=l && r<=R) return v[x];\n\t\tint mid=(l+r)>>1,mx=-inf;\n\t\tif (L<=mid) mx=qry(ls,l,mid,L,R);\n\t\tif (R>mid) mx=max(mx,qry(rs,mid+1,r,L,R));\n\t\treturn mx;\n\t}\n}T[2];\nbool chk(int x) {\n\tint c=c0+sf[x]-c1;\n\tif (c>=0 && T[c&1].qry(1,1,n+1,x1+1,n+1)>=c) return 1;\n\tc=c1+sf[x]-c0;\n\tif (c>=0 && T[c&1].qry(1,1,n+1,x0+1,n+1)>=c) return 1;\n\treturn 0;\n}\nint main() {\n\tscanf(\"%d\",&n);\n\tint lst=0;\n\tfor (int i=1;i<=n;i++) {\n\t\tscanf(\"%d\",&p[i]);\n\t\tif (p[i]>lst) e[i]=1,lst=p[i];\n\t}\n\tfor (int i=0;i<2;i++) T[i].bd(1,1,n+1);\n\tT[0].upd(1,1,n+1,n+1,0);\n\tfor (int i=n;i>=1;i--) {\n\t\tint v=(e[i]?2:1),f0,f1;\n\t\tf0=v+T[v&1].qry(1,1,n+1,p[i],n+1);\n\t\tf1=v+T[(v+1)&1].qry(1,1,n+1,p[i],n+1);\n\t\tT[0].upd(1,1,n+1,p[i],f0);\n\t\tT[1].upd(1,1,n+1,p[i],f1); \n\t}\n\tfor (int i=n;i>=1;i--) sf[i]=sf[i+1]+e[i];\n\tif (!chk(1)) {\n\t\tprintf(\"-1\");\n\t\treturn 0;\n\t}\n\tfor (int i=1;i<=n;i++) {\n\t\tfor (int j=0;j<2;j++) T[j].upd(1,1,n+1,p[i],-inf);\n\t\tint _x0=x0,_c0=c0;\n\t\tif (p[i]>x0) x0=p[i],c0++;\n\t\tif (chk(i+1)) printf(\"0\");\n\t\telse {\n\t\t\tprintf(\"1\");\n\t\t\tx0=_x0,c0=_c0;\n\t\t\tif (p[i]>x1) x1=p[i],c1++;\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1664241963,
        "uid": 283913,
        "name": "ZillionX",
        "ccfLevel": 6,
        "title": "\u3010\u89c2\u5bdf\uff0c\u7ebf\u6bb5\u6811\uff0cDP\u3011AT4439 [AGC028E] High Elements"
    },
    {
        "content": "\n\u56e0\u4e3a\u8981\u6c42\u8f93\u51fa\u7684\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u6240\u4ee50\u4f18\u5148\n\n\u60f3\u5230**\u9010\u4f4d\u786e\u5b9a**\u7684\u8d2a\u5fc3\u601d\u60f3\uff1a\u4ece\u7b2c1\u4f4d\u5f00\u59cb\uff0c\u5148\u5047\u8bbe\u8fd9\u4e00\u4f4d\u662f0\uff0c\u5c31\u628a\u8fd9\u4e2a\u6570\u653e\u5230$x$\u5e8f\u5217\u4e2d\uff0c\u9a8c\u8bc1\u4e00\u4e0b\u4e4b\u540e\u7684\u6570\u80fd\u5426\u518d\u5408\u6cd5\uff0c\u5982\u679c\u53ef\u4ee5\uff0c\u5c31\u628a\u8fd9\u4e2a\u6570\u653e\u5230$x$\u5e8f\u5217\uff0c\u5426\u5219\u5c31\u53ea\u80fd\u653e\u5230$y$\u5e8f\u5217\n\n\u9010\u4f4d\u786e\u5b9a\u7684\u590d\u6742\u5ea6\u662f$O(n)$\n\u6240\u4ee5\u8981\u6c42\u6211\u4eec\u5728$O(logn)$\u65f6\u95f4\u5185\u89e3\u51b3$check$\u95ee\u9898\n\n**\u5148\u5b9a\u4e49\u539f\u5e8f\u5217\u4e2d\u7684\u4e0a\u5347\u4f4d\u4e3a\u201c\u539f\u4e0a\u5347\u4f4d\u201d\uff0c\u5230\u65b0\u5e8f\u5217\u65b0\u4ea7\u751f\u7684\u4e0a\u5347\u4f4d\uff08\u5373\u672c\u6765\u4e0d\u662f\u4e0a\u5347\u4f4d\u53d8\u6210\u4e86\u4e0a\u5347\u4f4d\uff09\u4e3a\u201c\u65b0\u4e0a\u5347\u4f4d\u201d**\n\n**\u7ed3\u8bba1\uff1a\u539f\u4e0a\u5347\u4f4d\u5230\u65b0\u7684\u5e8f\u5217\u4e4b\u540e\u4f9d\u7136\u662f\u4e0a\u5347\u4f4d\uff08\u663e\u7136\uff09**\n\n**\u7ed3\u8bba2\uff1a\u5bf9\u4e8e\u67d0\u65f6\u523b\u7684\u4e24\u4e2a\u5e8f\u5217\uff0c\u5df2\u6709\u7684\u4e0a\u5347\u4f4d\u6570\u5206\u522b\u4e3a$cx,cy$,\u4e0d\u6539\u53d8$cx,cy$\u7684\u503c\uff0c\u4e00\u5b9a\u5b58\u5728\u53e6\u4e00\u79cd\u91cd\u65b0\u5206\u914d\u8fc7\u7684\u4e24\u4e2a\u5e8f\u5217\uff0c$x$\u5e8f\u5217\u6216$y$\u5e8f\u5217\u5176\u4e00\u4e2d\u6240\u6709\u4e0a\u5347\u4f4d\u90fd\u662f\u539f\u4e0a\u5347\u4f4d**\n\n\u7ed3\u8bba2\u7684\u8bc1\u660e\uff1a\u5982\u679c\u4e24\u4e2a\u5e8f\u5217\u4e2a\u5b58\u5728\u4e00\u4e2a\u65b0\u4e0a\u5347\u4f4d\uff0c\u5c31\u4ea4\u6362\u5b83\u4eec\uff0c\u4e24\u4e2a\u5e8f\u5217\u7684\u65b0\u4e0a\u5347\u4f4d\u7684\u8d21\u732e\u90fd\u6ca1\u4e86\uff0c\u53d8\u6210\u4e86\u539f\u4e0a\u5347\u4f4d\u7684\u8d21\u732e\u3002\n\n\u56e0\u4e3a\u4e00\u4e2a\u6570\u4f5c\u4e3a\u65b0\u4e0a\u5347\u4f4d\u4e00\u5b9a\u662f\u56e0\u4e3a\u6bd4\u5b83\u5927\u7684\u6570\u5728\u53e6\u4e00\u4e2a\u5e8f\u5217\u91cc\u9762\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5224\u65ad\u5408\u6cd5\u6027\n\n\u73b0\u5728\u662f\u5728\u505a\u7b2c$i$\u4f4d\uff0c\u4e24\u4e2a\u5e8f\u5217\u5df2\u6709$cx,cy$\u4e2a\u4e0a\u5347\u4f4d\uff0c$[i+1,n]$\u4e2d\u8fd8\u6709$c$\u4e2a\u4e0a\u5347\u4f4d\uff0c\u5047\u5b9a$x$\u5e8f\u5217\u4e2d\u7684\u4e0a\u5347\u4f4d\u5168\u90e8\u662f\u539f\u4e0a\u5347\u4f4d\uff0c\u90a3\u4e48$y$\u5e8f\u5217\u4e2d\u8fd8\u5c06\u4f1a\u6709$k$\u4e2a\u539f\u4e0a\u5347\u4f4d\uff0c$m$\u4e2a\u65b0\u4e0a\u5347\u4f4d\n\n\u6709$cx+c-k=cy+k+m$\n\n\u5373$2k+m=c+cx-cy$\n\n\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e2a$i$\uff0c$c+cx-cy$\u5c31\u662f\u5b9a\u503c\u4e86\n\n\u76f8\u5f53\u4e8e\u80fd\u4e0d\u80fd\u5728$[i+1,n]$\u4e2d\u627e\u5bfb\u4e00\u4e2a\u9012\u589e\u7684\u5e8f\u5217\uff0c\u5e8f\u5217\u4e2d\u539f\u4e0a\u5347\u4f4d\u7684**\u6743\u503c\u662f2**\uff0c\u975e\u539f\u4e0a\u5347\u4f4d\u7684**\u6743\u503c\u662f1**\uff0c\u4f7f\u5f97\u6743\u503c\u548c\u4e3a$c+cx-cy$\n\n\u5f88\u663e\u7136\uff0c\u5047\u5982\u6211\u4eec\u80fd\u51d1\u51fa\u6743\u503c\u662f$x$\u7684\uff0c\u4e0d\u4e00\u5b9a\u5c31\u80fd\u51d1\u51fa$x-1$,\u4f46\u662f\u4e00\u5b9a\u80fd\u51d1\u51fa$x-2$\n\n\u6240\u4ee5\u7528\u4e24\u9897\u7ebf\u6bb5\u6811\u7ef4\u62a4\u5947\u5076\u533a\u95f4\u6700\u5927\u503c\uff0c\u5728$O(logn)$\u65f6\u95f4\u5185\u89e3\u51b3\u4e86\n\n\u4e0a\u8ff0\u8fc7\u7a0b\u8fd8\u6709\u53e6\u4e00\u4e2a\u60c5\u51b5\uff0c\u5c31\u662f$y$\u5e8f\u5217\u4e2d\u7684\u4e0a\u5347\u4f4d\u90fd\u662f\u539f\u4e0a\u5347\u4f4d\uff0c\u90a3\u5c31\u53cd\u4e00\u4e0b\n\nCode\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define maxn 1000010\n#define ls rt << 1\n#define rs rt << 1 | 1\nusing namespace std;\nconst int inf = 1e9;\nstruct Seg{\n\tint l, r, sum;\n}odd[maxn << 2], even[maxn << 2];\nint n, a[maxn], ans[maxn], cnt[maxn], w[maxn];\n\ninline int read(){\n\tint s = 0, w = 1;\n\tchar c = getchar();\n\tfor (; !isdigit(c); c = getchar()) if (c == '-') w = -1;\n\tfor (; isdigit(c); c = getchar()) s = (s << 1) + (s << 3) + (c ^ 48);\n\treturn s * w;\n}\n\nvoid pushup1(int rt){ odd[rt].sum = max(odd[ls].sum, odd[rs].sum); }\n\nvoid build1(int rt, int l, int r){\n\todd[rt].l = l, odd[rt].r = r, odd[rt].sum = -inf;\n\tif (l == r) return;\n\tint mid = (l + r) >> 1;\n\tbuild1(ls, l, mid), build1(rs, mid + 1, r);\n}\n\nint query1(int rt, int x){\n\tif (odd[rt].r < x) return -inf;\n\tif (odd[rt].l >= x) return odd[rt].sum;\n\treturn max(query1(ls, x), query1(rs, x));\n}\n\nvoid update1(int rt, int x, int y){\n\tif (odd[rt].l == odd[rt].r){\n\t\todd[rt].sum = y;\n\t\treturn;\n\t}\n\tif (odd[ls].r >= x) update1(ls, x, y); else update1(rs, x, y);\n\tpushup1(rt);\n}\n\nvoid pushup2(int rt){ even[rt].sum = max(even[ls].sum, even[rs].sum); }\n\nvoid build2(int rt, int l, int r){\n\teven[rt].l = l, even[rt].r = r;\n\tif (l == r) return;\n\tint mid = (l + r) >> 1;\n\tbuild2(ls, l, mid), build2(rs, mid + 1, r);\n}\n\nint query2(int rt, int x){\n\tif (even[rt].r < x) return 0;\n\tif (even[rt].l >= x) return even[rt].sum;\n\treturn max(query2(ls, x), query2(rs, x));\n}\n\nvoid update2(int rt, int x, int y){\n\tif (even[rt].l == even[rt].r){\n\t\teven[rt].sum = y;\n\t\treturn;\n\t}\n\tif (even[ls].r >= x) update2(ls, x, y); else update2(rs, x, y);\n\tpushup2(rt);\n}\n\nbool check(int x, int y){\n\tif (y < 0) return 0;\n\tif (y & 1) return query1(1, x) >= y;\n\telse return query2(1, x) >= y;\n}\n\nint main(){\n\tn = read();\n\tint mx = 0;\n\tfor (int i = 1; i <= n; ++i){\n\t\ta[i] = read();\n\t\tw[i] = a[i] > mx ? 2 : 1;\n\t\tmx = max(mx, a[i]);\n\t}\n\n\tfor (int i = n; i; --i) cnt[i] = cnt[i + 1] + w[i] - 1;\t\n\tbuild1(1, 1, n); build2(1, 1, n);\n\tfor (int i = n; i; --i){\n\t\tint mxo = query1(1, a[i]), mxe = query2(1, a[i]);\n\t\tif (w[i] & 1) update1(1, a[i], mxe + w[i]), update2(1, a[i], mxo + w[i]);\n\t\telse update1(1, a[i], mxo + w[i]), update2(1, a[i], mxe + w[i]);\n\t}\n\tint cx = 0, cy = 0, mxx = 0, mxy = 0;\n\tfor (int i = 1; i <= n; ++i){\n\t\tupdate1(1, a[i], -inf), update2(1, a[i], 0);\n\t\tif ( check(mxy, cx + (a[i] > mxx) + cnt[i + 1] - cy) || check(mxx, cy + cnt[i + 1] - cx - (a[i] > mxx)) )\n\t\t\tcx += (a[i] > mxx), mxx = max(mxx, a[i]);\n\t\telse ans[i] = 1, cy += (a[i] > mxy), mxy = max(mxy, a[i]);\n\t}\n\tif (cx != cy) puts(\"-1\");\n\telse for (int i = 1; i <= n; ++i) printf(\"%d\", ans[i]);\n\treturn 0;\n}\n```\n",
        "postTime": 1604199707,
        "uid": 51719,
        "name": "ModestCoder_",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 AT4439 \u3010[AGC028E] High Elements\u3011"
    },
    {
        "content": "\u56e0\u4e3a\u662f\u4e00\u4e2a\u6392\u5217,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u628a\u6392\u5217\u5212\u5206\u6210\u4e24\u4e2a\u90e8\u5206:\n\n1:\u5c5e\u4e8e\u6392\u5217p\u7684\u524d\u7f00\u6700\u5927\u503c\u96c6\u5408\u7684\u5143\u7d20;\n\n2:\u4e0d\u5c5e\u4e8e\u6392\u5217p\u7684\u524d\u7f00\u6700\u5927\u503c\u96c6\u5408\u7684\u5143\u7d20;\n\n\u6ce8\u610f\u5230,\u5bf9\u4e8e\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u768401\u4e32s,\u6309\u7167\u9898\u76ee\u7ed9\u51fa\u7684\u5206\u914d\u89c4\u5219\u5212\u5206\u6210\u6392\u5217x,y\u4e4b\u540e,x,y\u4e2d\u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570\u4e00\u5b9a\u662f\u5c0f\u4e8e\u7b49\u4e8e\u6392\u5217p\u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570\u7684;\n\n\u8bc1\u660e:\n\n\u6211\u4eec\u8003\u8651\u539f\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u96c6\u5408\u4e2d\u5143\u7d20\u7684\u53bb\u5411\n\n\u5047\u5982\u5168\u90e8\u653e\u5165\u5176\u4e2d\u4e00\u4e2a\u6392\u5217\u4e2d,\u90a3\u4e48\u5bf9\u4e8e\u6240\u6709\u6ee1\u8db3\u60c5\u51b5\u7684s\u4e32,\n\u53e6\u4e00\u4e2a\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570\u4e00\u5b9a\u7b49\u4e8e\u539f\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570.\n\n\u5047\u5982\u5c06\u5b83\u4eec\u5206\u5f00\u653e\u5165\u4e24\u4e2a\u5e8f\u5217\u4e2d,\u8bbe\u5f53\u524d\u53d6\u51fa\u7684\u5143\u7d20\u4e3ak\n\n\u65e0\u8bba\u6211\u4eec\u628a\u5b83\u653e\u5165\u54ea\u4e00\u4e2a\u6392\u5217,\u540e\u9762\u80fd\u66f4\u65b0\u8be5\u96c6\u5408\u524d\u7f00\u6700\u5927\u503c\u7684\u5143\u7d20\u4e00\u5b9a\u5c5e\u4e8e[k+1,n];\n\n\u800c\u540e\u9762\u80fd\u66f4\u65b0\u8fd9\u4e2a\u6700\u5927\u503c\u7684\u5143\u7d20,\u5047\u5982\u5168\u90e8\u52a0\u5165\u5f53\u524d\u6392\u5217,\u8fd9\u4e2a\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570\u4e5f\u5fc5\u7136\u5c0f\u4e8e\u7b49\u4e8e\u539f\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570.\n\n\u8fd9\u542f\u53d1\u7740\u6211\u4eec\u5982\u679c\u6392\u5217\u6ee1\u8db3s\u4e32,\u90a3\u4e48\u5176\u4e2d\u4e00\u4e2a\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u4e00\u5b9a\u53ef\u4ee5\u7531\u539f\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u96c6\u5408\u7684\u5143\u7d20\u66ff\u6362\u800c\u5f97\u5230.\n\n\u6362\u53e5\u8bdd\u8bf4,\u5c31\u662f\u5176\u4e2d\u4e00\u4e2a\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u96c6\u5408\u4e00\u5b9a\u53ef\u4ee5\u662f\u539f\u6392\u5217\u7684\u524d\u7f00\u6700\u5927\u503c\u96c6\u5408\u7684\u4e00\u4e2a\u5b50\u96c6.\n\n\u6709\u4e86\u8fd9\u4e2a\u6027\u8d28,\u6211\u4eec\u5c31\u53ef\u4ee5\u8003\u8651\u53bb\u7528\u8d2a\u5fc3\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898.\n\n\u81ea\u7136,\u4e3a\u4e86\u6ee1\u8db3\u5b57\u5178\u5e8f\u6700\u5c0f,\u6211\u4eec\u5e94\u5f53\u5c3d\u53ef\u80fd\u7684\u8ba9s\u524d\u9762\u7684\u5143\u7d20\u4e3a0\n\n\u5047\u8bbe\u5f53\u524d\u5904\u7406\u5230\u4e86\u7b2ci\u4f4d,\u524di-1\u4f4d\u5df2\u7ecf\u5904\u7406\u5b8c\u6bd5,\n \n \u5bf9\u4e8e\u7b2ci\u4f4d,\u6211\u4eec\u4ee4 cx  \u8868\u793a\u5e8f\u5217x\u4e2d\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570,cy\u8868\u793a\u5e8f\u5217y\u4e2d\u524d\u7f00\u6700\u5927\u503c\u7684\u4e2a\u6570,c\u8868\u793a\u539f\u6392\u5217\u4e2d\u524d\u7f00\u6700\u5927\u503c\u4e2a\u6570,\n  \u540e\u9762\u586b\u7684\u6570\u4e2d\u4f1a\u6709 k\u4e2a\u65e7\u524d\u7f00\u6700\u5927\u503c\u3001m\u4e2a\u65b0\u524d\u7f00\u6700\u5927\u503c,\n  \n \u90a3\u4e48\u5bf9\u4e8e\u6ee1\u8db3\u6761\u4ef6\u7684\u6392\u5217,\u6211\u4eec\u6709\u7b49\u5f0f:\n \n cx+c-k=cy+m+k\n \n \u4e5f\u5c31\u662f\u8bf4\n \n 2k+m=cx-cy+c\n \n \u7b49\u53f7\u53f3\u8fb9\u662f\u4e00\u4e2a\u5e38\u6570,\u56e0\u6b64\u6211\u4eec\u8003\u8651\u5982\u4f55\u5904\u7406\u5de6\u8fb9\u5c31\u597d\u5566.\n \n \u5de6\u8fb9\u7684\u5904\u7406\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5904\u7406\u5947\u5076\u6027\u6765\u5904\u7406..\n \n \u7136\u540e\u5c31\u662f\u6bd4\u8f83\u7b80\u5355\u7684dp\u8fc7\u7a0b\u4e86,\u65b9\u7a0b\u4e5f\u6bd4\u8f83\u663e\u7136,\u8fd9\u91cc\u4e0d\u518d\u7ed9\u51fa\u4e86.\n \n \u76f4\u63a5dp\u8f6c\u79fb\u590d\u6742\u5ea6\u4f1a\u70b8,\u53ef\u4ee5\u8003\u8651\u901a\u8fc7\u7ebf\u6bb5\u6811\u6c42\u533a\u95f4\u6700\u5927\u503c\u6765\u4f18\u5316\u8f6c\u79fb\u7b56\u7565\u5c31\u597d\u4e86.\n \n \u590d\u6742\u5ea6:O(nlogn)\n \n \n //\u8bdd\u8bf4\u4e3a\u4ec0\u4e48\u6d1b\u8c37\u4e0d\u80fd\u9898\u4ea4AT\u7684\u9898\u4e86.\n \u6c42\u8fc7,\u8c22\u8c22.\n",
        "postTime": 1601252623,
        "uid": 231136,
        "name": "\u51e0\u4f55\u4e4b\u821e\u4e36",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 AT4439 \u3010[AGC028E] High Elements\u3011"
    }
]
[
    {
        "content": "## \u9898\u610f\n\u56db\u4e2a\u70b9\u7684\u65e0\u5411\u56fe\uff0c$1-2,2-3,3-4,4-1$ \u4e4b\u95f4\u5206\u522b\u6709\u65e0\u5411\u8fb9\u3002\n\n\u73b0\u5728\u7ed9\u51fa\u6bcf\u6761\u8fb9\u7ecf\u8fc7\u6570\u91cf\u5206\u522b\u662f $A,B,C,D$\uff0c\u6c42\u4ece $1$ \u5f00\u59cb\u7684\u56de\u8def\u6570\u91cf\u3002\n\n$A,B,C,D\\le 5\\times10^5$\n\n## \u9898\u89e3\n\n\u6b27\u62c9\u56de\u8def\u8ba1\u6570\u561b\uff0c\u5ea6\u6570\u4e0d\u662f\u5076\u6570\u5c31\u53ef\u4ee5\u8f93\u51fa $0$ \u4e86\u3002\n\n\u7136\u540e\u65e0\u5411\u56fe\u6211\u4e0d\u4f1a\u4f46\u662f\u6709\u5411\u56fe\u6211\u4f1a\u554a\u3002\u6709 BEST \u5b9a\u7406\uff1a\n\n>\u5bf9\u4e8e\u6709\u5411\u56fe $G=(V,E)$\uff0c\u56fe\u7684\u6b27\u62c9\u56de\u8def\u6570\u91cf $ec(G)$ \u4e3a\uff1a\n>$$ec(G)=t_s(G)\\prod_{v\\in V}(\\deg_v-1)!$$\n>\u5176\u4e2d $t_s(G)$ \u8868\u793a\u4ee5\u4efb\u610f\u4e00\u70b9\u4e3a\u6839\u7684\u5916\u5411\u6811\u6570\u91cf\u3002\n\n\u56e0\u6b64\u5982\u679c\u6211\u4eec\u53d8\u6210\u6709\u5411\u8fb9\u5c31\u80fd\u505a\u4e86\u3002\n\n\u4e0d\u59a8\u8bbe $1\\to 2,2\\to 3,3\\to 4,4\\to 1$ \u7684\u6b21\u6570\u5206\u522b\u4e3a $a,b,c,d$\uff0c\u90a3\u4e48 $2\\to 1,3\\to2,4\\to3,1\\to4$ \u5c31\u5206\u522b\u4e3a $A-a,B-b,C-c,D-d$\u3002\u56e0\u4e3a\u51fa\u5ea6\u548c\u5165\u5ea6\u76f8\u7b49\u6240\u4ee5 $a$ \u56fa\u5b9a\u540e $b,c,d$ \u4e5f\u56fa\u5b9a\u4e86\uff0c\u53ea\u9700\u8981\u679a\u4e3e $a$ \u5373\u53ef\u3002\n\n\u7136\u540e\u6709\u5411\u8fb9\uff0c\u6211\u4eec\u53ef\u4ee5 $\\mathcal O(1)$ \u5f97\u5230 $ec(G)$\uff0c\u4f46\u662f\u8fd8\u4e0d\u80fd\u7edf\u8ba1\u8fdb\u7b54\u6848\u3002\u8003\u8651\u4e24\u70b9\n\n- BEST\u5b9a\u7406\u7ed9\u51fa\u7684\u662f\u65e0\u8d77\u70b9\u6b27\u62c9\u56de\u8def\u6761\u6570\uff0c\u6211\u4eec\u8981\u6c42\u5f97\u662f\u6709\u8d77\u70b9\uff0c\u6240\u4ee5\u8981\u4e58\u4e0a $deg_1$ \u8868\u793a\u4ece $1$ \u51fa\u6765\u7b2c\u4e00\u6b65\u8d70\u4e86\u54ea\u6761\u8fb9\n- \u6bcf\u79cd\u8fb9\u5b9e\u9645\u4e0a\u662f\u4e0d\u4f5c\u533a\u5206\u7684\uff0c\u6240\u4ee5\u8981\u4e58\u4e0a $1/(a!b!c!d!(A-a)!(B-b)!(C-c)!(D-d)!)$\n\n\u7136\u540e\u7d2f\u52a0\u8fdb\u7b54\u6848\u5373\u53ef\u3002\u590d\u6742\u5ea6 $\\mathcal O(A)$\u3002\n\n## \u4ee3\u7801\n```cpp\nconst int N=1e6+10;\nint A,B,C,D;mint fac[N],ifac[N],ans;\ninline mint calc(mint _12,mint _23,mint _34,mint _14){\n\tmint _43=C-_34,_32=B-_23;\n\treturn _12*_23*_34+_14*_12*_23+_14*_43*_12+_14*_43*_32;\n}\nsigned main(){\n\tfac[0]=1;for(int i=1;i<N;i++)fac[i]=fac[i-1]*i;\n\tifac[N-1]=1/fac[N-1];for(int i=N-1;i;i--)ifac[i-1]=ifac[i]*i;\n\tread(A,B,C,D);\n\tif((A&1)!=(B&1)||(B&1)!=(C&1)||(C&1)!=(D&1))return writeln(0),0;\n\tfor(int a=0;a<=A;a++){\n\t\tint b=(B-A+2*a)/2,c=(C-B+2*b)/2,d=(D-C+2*c)/2;\n\t\tif(!(0<=b&&b<=B&&0<=c&&c<=C&&0<=d&&d<=D))continue;\n\t\tint deg1=a+D-d,deg2=b+A-a,deg3=c+B-b,deg4=d+C-c;\n\t\tans+=calc(a,b,c,D-d)*fac[deg1-1]*fac[deg2-1]*fac[deg3-1]*fac[deg4-1]\n\t\t\t*ifac[a]*ifac[A-a]*ifac[b]*ifac[B-b]*ifac[c]*ifac[C-c]*ifac[d]*ifac[D-d]*deg1;\n\t}\n\twriteln(ans.x);\n}\n```",
        "postTime": 1675222349,
        "uid": 174304,
        "name": "jun\u5934\u5409\u5409",
        "ccfLevel": 10,
        "title": "\u597d\u7d2f\u554a\u4e0d\u60f3\u5b66OI\u60f3\u6253\u539f\u795e"
    },
    {
        "content": "\uff08\u5b98\u65b9\u9898\u89e3\u642c\u8fd0\u5de5\u3002\uff09\n\n\u9996\u5148\u6ce8\u610f\u5230\u539f\u56fe\u662f\u4e00\u4e2a\u4e8c\u5206\u56fe\uff0c\u4ece S \u8d70\u5230 S \u4e00\u5b9a\u662f\u5076\u6570\u6b65\u3002\u51fa\u4e8e\u7b80\u5316\u60c5\u51b5\u7684\u8003\u8651\uff0c\u6211\u4eec\u4e0d\u59a8\u5bf9\u76f8\u90bb\u4e24\u6b65\u538b\u7f29\u8d77\u6765\u8003\u8651\uff08\u7c7b\u4f3c\u4e8e SVU \u8fd9\u6837\uff0c\u4e00\u6b21\u8d70\u4e24\u6b65\uff09\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u6bcf\u4e00\u4e2a\u538b\u7f29\u7684\u8d77\u70b9\u548c\u7ec8\u70b9\u90fd\u53ea\u80fd\u662f S \u6216 U\uff0c\u800c\u4e2d\u95f4\u53ea\u80fd\u662f T \u6216 V\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u6211\u4eec\u672c\u8d28\u53ea\u6709\u4e09\u5927\u7c7b\uff1a\n\n1. \u7a7f\u8fc7 T\n\nSTU\uff0cUTS\u3002\n\n2. \u7a7f\u8fc7 V\n\nSVU\uff0cUVS\u3002\n\n3. \u539f\u5730\u8fd4\u56de\n\nSTS\uff0cSVS\uff08\u8fd9\u4e24\u4e2a\u662f S \u652f\u7c7b\uff09\uff0cUTU\uff0cUVU\uff08\u8fd9\u4e24\u4e2a\u662f U \u652f\u7c7b\uff09\u3002\n\n\u8ba9\u6211\u4eec\u4e0d\u59a8\u679a\u4e3e\u7b2c\u4e00\u79cd\u60c5\u51b5\u51fa\u73b0\u7684\u6b21\u6570 $i$ \u548c\u7b2c\u4e8c\u79cd\u60c5\u51b5\u51fa\u73b0\u7684\u6b21\u6570 $j$\uff0c\u6765\u770b\u770b\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u6709\u591a\u5c11\u3002\n\n\uff08\u8fd9\u91cc\u6211\u4eec\u8bb0 $C(x,y)=\\binom{x+y}{x}=\\frac{(x+y)!}{x!y!}$\uff0c**\u6ce8\u610f\u8fd9\u4e0d\u662f\u5e38\u89c1\u7684\u7ec4\u5408\u6570\u8bb0\u53f7**\u3002\u540c\u7406\u8bb0 $C(x,y,z)$\u3002\u5bf9\u4e8e\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\uff0c\u5047\u5b9a\u8fd9\u4e2a $C$ \u8bb0\u53f7\u4e00\u5f8b\u8fd4\u56de\u96f6\u3002\uff09\n\n\u6211\u4eec\u53d1\u73b0\uff1a\u7b2c\u4e09\u79cd\u60c5\u51b5\u5e76\u4e0d\u4f1a\u6539\u53d8\u5f53\u524d\u4f4d\u7f6e\uff0c\u6240\u4ee5\u53ef\u4ee5\u5148\u884c\u56fa\u5b9a\u524d\u4e24\u79cd\u64cd\u4f5c\u7684\u987a\u5e8f\uff0c\u7136\u540e\u628a\u7b2c\u4e09\u79cd\u64cd\u4f5c\u585e\u8fdb\u53bb\u3002\u6211\u4eec\u53c8\u53d1\u73b0\uff0c\u7b2c\u4e00\u79cd\u60c5\u51b5\u548c\u7b2c\u4e8c\u79cd\u60c5\u51b5\u672c\u8d28\u4e0a\u4f4d\u79fb\u662f\u4e00\u6837\u7684\uff0c\u800c\u4e14\u5f53\u4e24\u4e2a\u7b2c\u4e00/\u4e8c\u7c7b\u64cd\u4f5c\u76f8\u90bb\u65f6\uff0c\u5b83\u4eec\u7684\u578b\u53f7\uff08\u6307 STU \u8fd8\u662f UTS\uff09\u662f\u552f\u4e00\u7684\u3002\u6211\u4eec\u8fd8\u53d1\u73b0\uff0c\u7b2c\u4e09\u79cd\u60c5\u51b5\uff08\u7684\u4e24\u5927\u652f\u7c7b\uff09\u7684\u51fa\u73b0\u6b21\u6570\u662f\u53ef\u4ee5\u901a\u8fc7 $i$ \u548c $j$ \u7b97\u51fa\u6765\u7684\u3002\n\n\u5982\u6b64\u4e00\u6765\uff0c\u6211\u4eec\u4fbf\u53ef\u4ee5\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u8fd9\u4e00\u7ec4 $i$ \u548c $j$ \u8ba1\u7b97\u51fa\u5bf9\u4e8e\u7b54\u6848\u7684\u8d21\u732e\uff1a\n\n$$C(i,j)C(\\frac{i+j}2,\\frac{a-i}2,\\frac{d-j}2)C(\\frac{i+j}2-1,\\frac{b-i}2,\\frac{c-j}2)$$\n\n\u5bf9 $i,j$ \u6c42\u548c\u5e76\u7b80\u5355\u5c55\u5f00\u4ebf\u4e0b\uff08\u5b98\u89e3\u8fd9\u4e00\u6b65\u6709\u9505\uff0c\u6211\u8fd9\u91cc\u4fee\u6389\u4e86\uff09\uff1a\n\n$$(\\frac{a+d}2)!(\\frac{b+c}2-1)!\\sum_{i,j}\\frac{(i+j)!}{(\\frac{i+j}2)!(\\frac{i+j}2-1)!}\\times\\frac1{i!(\\frac{a-i}2)!(\\frac{b-i}2)!}\\times\\frac1{j!(\\frac{c-j}2)!(\\frac{d-j}2)!}$$\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u5377\u79ef\u5904\u7406\u4e86\u3002\u6ce8\u610f\u5982\u679c $a,b,c,d$ \u4e0d\u5168\u540c\u5947\u5076\u90a3\u4e48\u7b54\u6848\u4e00\u5b9a\u662f\u96f6\u3002\n\n\u4ee3\u7801\u975e\u5e38\u77ed\u3002\u5176\u4e2d\u7528\u5230\u4e86 atcoder lib\u3002\n\n```cpp\n#include <atcoder/all>\nusing namespace std;\nusing namespace atcoder;\ntypedef modint998244353 mint;\nconstexpr int N = 1e6 + 9;\nint a, b, c, d;\nmint fac[N], ifc[N], ans;\nvoid init_fac() {\n  fac[0] = 1;\n  for (int i = 1; i < N; ++i) fac[i] = fac[i - 1] * i;\n  ifc[N - 1] = fac[N - 1].inv();\n  for (int i = N - 1; i; --i) ifc[i - 1] = ifc[i] * i;\n}\nsigned main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  cin >> a >> b >> c >> d;\n  if (((a ^ b) | (b ^ c) | (c ^ d)) & 1) return cout << 0 << endl, 0;\n  init_fac();\n  int fn = min(a, b) + 1, gn = min(c, d) + 1;\n  vector<mint> f(fn), g(gn);\n  for (int i = (a & 1); i < fn; i += 2)\n    f[i] = ifc[i] * ifc[(a - i) >> 1] * ifc[(b - i) >> 1];\n  for (int i = (c & 1); i < gn; i += 2)\n    g[i] = ifc[i] * ifc[(c - i) >> 1] * ifc[(d - i) >> 1];\n  vector<mint> h = convolution(f, g);\n  for (int i = 2; i < fn + gn - 1; i += 2)\n    ans += fac[i] * ifc[i >> 1] * ifc[(i >> 1) - 1] * h[i];\n  ans *= fac[(a + d) >> 1] * fac[((b + c) >> 1) - 1];\n  return cout << ans.val() << endl, 0;\n}\n```",
        "postTime": 1674213824,
        "uid": 250637,
        "name": "UnyieldingTrilobite",
        "ccfLevel": 9,
        "title": "\u8fd9\u4e5f\u80fd\u6570\uff1f\uff1f\uff1f"
    }
]
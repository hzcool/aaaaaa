[
    {
        "content": "\u66f4\u65b0\uff1a\u6dfb\u52a0\u53e5\u672b\u53e5\u53f7\u3002\n\n## \u601d\u8def\uff1a\n\n\u6211\u4eec\u5c06\u6240\u6709\u8fb9\u53d6\u53cd\uff0c\u6700\u957f\u8def\u5c31\u53d8\u6210\u4e86\u6700\u77ed\u8def\u3002\n\nSPFA \u867d\u7136\u53ef\u4ee5\u5361\u8fc7\u53bb\uff0c\u4f46\u51fa\u9898\u4eba\u53ea\u8981\u6709\u5fc3\u90fd\u662f\u80fd\u5e72\u6389 SPFA \u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u4e0d\u4f1a\u88ab\u5e72\u6389\u7684 dijkstra\u3002\n\ndijkstra \u7684\u95ee\u9898\u5c31\u5728\u4e8e\u8dd1\u4e0d\u4e86\u8d1f\u6743\u8fb9\u7684\u6700\u77ed\u8def\u3002\u6211\u4eec\u8003\u8651\u7ed9\u6bcf\u4e2a\u8fb9\u52a0\u4e0a $h_x-h_y$\uff0c\u5982\u679c $h_x>h_y$\uff0c\u8fb9\u6743\u53d8\u4e3a $0$\uff0c\u5426\u5219\u53d8\u4e3a $-(h_x-h_y)$\uff0c\u6d88\u9664\u4e86\u8d1f\u6743\u8fb9\u3002\u8bbe $-dis_{v}$ \u8868\u793a $1$ \u5230 $v$ \u7684\u5b9e\u9645\u8ddd\u79bb\uff0c$a_i$ \u8868\u793a\u8def\u4e0a\u7ecf\u8fc7\u7684\u70b9\uff0c\u5219\u6700\u540e\u7b97\u51fa\u7684\u8ddd\u79bb\u4e3a $-dis_{v}+(h_1-h_{a_1}+h_{a_1}-h_{a_2}\\cdots-h_{a_k}+h_{a_k}-h_v)=-dis_{v}+h_1-h_v$\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u6109\u5feb\u5730 AC \u5566\u3002\n\n## \u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5 + 10;\nint read() {\n\tint f = 1, x = 0;\n\tchar c = getchar();\n\twhile (c < '0' || c > '9') {\n\t\tif (c == '-')f = -1;\n\t\tc = getchar();\n\t}\n\twhile (c >= '0' && c <= '9') {\n\t\tx = x * 10 + c - '0';\n\t\tc = getchar();\n\t}\n\treturn f * x;\n}\nvoid write(long long x) {\n\tif (x < 0) {\n\t\tputchar('-');\n\t\tx = -x;\n\t}\n\tif (x > 9)write(x / 10);\n\tputchar(x % 10 + '0');\n}\nint n = read(), m = read(),  tot, head[N], h[N], sum;\nlong long dis[N], ans;\nstruct Node {\n\tint to, nxt, w;\n} a[N << 1];\nvoid add(int u, int v, int w) {\n\ta[++tot].to = v;\n\ta[tot].w = -w;\n\ta[tot].nxt = head[u];\n\thead[u] = tot;\n}\nstruct node {\n\tint pos;\n\tlong long w;\n\tbool operator <(const node& c)const {\n\t\treturn c.w < w;\n\t}\n};\nvoid dijkstra() {\n\tdis[1] = 0;\n\tpriority_queue<node>q;\n\tq.push({1, 0});\n\twhile (!q.empty()) {\n\t\tnode now = q.top();\n\t\tq.pop();\n\t\tint u = now.pos;\n\t\tif (now.w != dis[u])continue;\n\t\tfor (int i = head[u]; i; i = a[i].nxt) {\n\t\t\tint v = a[i].to, w = a[i].w;\n\t\t\tif (dis[v] > dis[u] + w) {\n\t\t\t\tdis[v] = dis[u] + w;\n\t\t\t\tq.push({v, dis[v]});\n\t\t\t}\n\t\t}\n\t}\n}\nsigned main() {\n\tfor (int i = 1; i <= n; i++)h[i] = read();\n\tfor (int i = 1; i <= m; i++) {\n\t\tint u = read(), v = read();\n\t\tadd(u, v, h[u] >= h[v] ? 0 : h[u] - h[v]);\n\t\tadd(v, u, h[v] >= h[u] ? 0 : h[v] - h[u]);\n\t}\n\tmemset(dis, 0x3f3f3f3f, sizeof(dis));\n\tdijkstra();\n\tfor (int i = 1; i <= n; i++)ans = max(ans, -dis[i] - h[i] + h[1]);\n\twrite(ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1679799604,
        "uid": 142969,
        "name": "GI\u5f55\u50cf\u673a",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 ABC237E Skiing"
    },
    {
        "content": "spfa \u88f8\u9898\u3002\n\n\u7531\u4e8e\u8981\u6c42\u7684\u662f\u6700\u957f\u8def\uff0c\u6240\u4ee5\u6bcf\u4e00\u6761\u8fb9\u7684\u8fb9\u6743\u53d6\u53cd\uff0c\u8dd1\u6700\u77ed\u8def\uff0c\u7136\u540e\u628a\u7ed3\u679c\u53d6\u53cd\u5373\u53ef\u3002\n\n\u8fd9\u91cc\u53d6\u53cd\u6307\u7684\u662f $x$ \u53d8\u6210 $-x$\u3002\n\n\u5efa\u8fb9\u7684\u65f6\u5019\u5982\u679c $d_u<d_v$ \u90a3\u4e48\u5c31\u5efa\u4e00\u6761\u8fb9\u6743\u662f $2\\times (d_v-d_u)$ \u7684\u8fb9\uff0c\u5426\u5219\u5c31\u5efa\u4e00\u6761 $d_v-d_u$ \u7684\u8fb9\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=2e5+10;\nint h[N],dis[N];\nvector<int>z[N];\nbool vis[N];\nint gd(int x,int y){\n  if(h[x]<h[y])\n    return 2*(h[y]-h[x]);\n  return h[y]-h[x];\n}\nvoid spfa(){\n  deque<int>q;\n  q.push_back(1);\n  memset(dis,0x3f,sizeof dis);\n  vis[1]=true;\n  dis[1]=0;\n  while(q.size()){\n    int f=q.front();\n    q.pop_front();\n    vis[f]=false;\n    for(auto &i:z[f])\n      if(dis[i]>dis[f]+gd(f,i)){\n        dis[i]=dis[f]+gd(f,i);\n        if(!vis[i]){\n          vis[i]=true;\n          if(q.size()&&dis[i]>dis[q.front()])\n            q.push_back(i);\n          else\n            q.push_front(i);\n        }\n      }\n  }\n}\nsigned main(){\n  int n,m;\n  cin>>n>>m;\n  for(int i=1;i<=n;i++)\n    cin>>h[i];\n  while(m--){\n    int u,v;\n    cin>>u>>v;\n    z[u].push_back(v);\n    z[v].push_back(u);\n  }\n  spfa();\n  cout<<-*min_element(dis+1,dis+n+1)<<'\\n';\n  return 0;\n}\n```\n\n",
        "postTime": 1677719976,
        "uid": 378467,
        "name": "willem248",
        "ccfLevel": 5,
        "title": "ABC237E"
    }
]
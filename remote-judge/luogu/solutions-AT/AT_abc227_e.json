[
    {
        "content": "\u6bd4\u8f83\u795e\u5947\u7684 DP \u9898\u3002\n\n\u9996\u5148\u8981\u7a0d\u5fae\u6536\u7f29\u4e00\u4e0b\u9898\u9762\u7684 $k$ \u7684\u8303\u56f4\u3002\n\n\u5982\u679c $k>n^2$ \u90a3\u4e48\u5fc5\u7136\u4ed6\u53ef\u4ee5\u968f\u4fbf\u6362\u6210\u5168\u6392\u5217\u7684\u5f62\u5f0f\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u7528\u4e00\u70b9\u5c0f\u7684\u7ec4\u5408\u6570\u5b66\u5c31\u77e5\u9053\u7b54\u6848\u3002\n\n\u8bbe $k1$ \u4e3a $s$ \u91cc $k$ \u7684\u4e2a\u6570\uff0c$e1$ \u4e3a $s$ \u91cc $e$ \u7684\u4e2a\u6570\uff0c$y1$ \u4e3a $s$ \u91cc $y$ \u7684\u4e2a\u6570\uff0c$len$ \u4e3a $s$ \u7684\u957f\u5ea6\u3002 \n\n\u5fc5\u7136\u662f $\\dfrac{len!}{k1!e1!y1!}$\u3002\n\n\u5426\u5219\u7684\u8bdd\u6211\u4eec\u53ef\u4ee5\u5bf9\u4ed6\u8fdb\u884c DP\u3002\n\n\u6211\u4eec\u8bbe $f_{i,j,k,l,u}$ \u653e\u5230\u7b2c $i$ \u4e2a\uff0c\u5df2\u7ecf\u7528\u4e86 $j$ \u4e2a `K`\uff0c\u7528\u4e86 $k$ \u4e2a `E`\uff0c\u7528\u4e86 $l$ \u4e2a `Y`\uff0c\u4ea4\u6362\u6b21\u6570\u5269 $u$ \u6b21\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u6765\u63cf\u8ff0\u4ea4\u6362\u6b21\u6570\u5462\uff1f\u4e00\u79cd\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u6c42\u9006\u5e8f\u5bf9\uff0c\u9006\u5e8f\u5bf9\u5373\u4e3a\u4ea4\u6362\u6b21\u6570\u3002\n\n\u7136\u540e\u6211\u4eec\u679a\u4e3e\u5f53\u524d\u72b6\u6001\u9009\u54ea\u4e00\u4e2a\uff0c\u5229\u7528\u5b58\u4e0b\u6765\u7684\u5e8f\u5217\u6765\u8ba1\u7b97\u9006\u5e8f\u5bf9\u4e2a\u6570\u3002\n\n\u8fd9\u91cc\uff0c\u6211\u4eec\u5f3a\u884c\u628a\u6700\u524d\u7684\uff0c\u6ca1\u6709\u5339\u914d\u7684\uff0c\u4f5c\u4e3a\u8fd9\u4e2a\u70b9\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u5176\u4ed6\u7684\u4f5c\u4e3a\u8fd9\u4e2a\u70b9\u7684\u8d21\u732e\u663e\u7136\u6ca1\u6709\u6700\u524d\u7684\u4f5c\u4e3a\u8d21\u732e\u4f18\u79c0\u3002\n\n\u7136\u540e\u8fd9\u91cc\u9700\u8981\u7528 vector \u5d4c\u5957\u7684\u65b9\u6cd5\u6765\u907f\u514d\u5185\u5b58\u7206\u70b8\uff0c\u540c\u65f6\u7531\u4e8e $k1+y1+e1=len$ \u6240\u4ee5\u4e09\u7ef4\u72b6\u6001\u8f83\u5c0f\uff0c\u662f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u9898\u7684\u3002\n\n```cpp\n#include <bits/stdc++.h> \n#define int long long \n#define pb push_back\nusing namespace std;\nconst int INF=1e5+5;\nconst int INFN=35;\nconst int INFK=905;\nconst int INFF=35;\nstring s1;\nint k,lenk,lene,leny;\nvector <int> vk,ve,vy;\nvector <vector <vector <vector <vector <int> > > > > f;\nint check(int lk,int ly,int le,int z) {\n    if (z==1) {\n        int it1=lower_bound(ve.begin(),ve.end(),lk)-ve.begin()-1;\n        int it2=lower_bound(vy.begin(),vy.end(),lk)-vy.begin()-1;\n        // cout<<it1<<\" \"<<it2<<\" \"<<le<<\" \"<<ly<<\" ?\\n\";\n        return max(0ll,it1-le)+max(0ll,it2-ly);\n    }\n    else if (z==2) {\n        int it1=lower_bound(vk.begin(),vk.end(),ly)-vk.begin()-1;\n        int it2=lower_bound(ve.begin(),ve.end(),ly)-ve.begin()-1;\n        // cout<<it1<<\" \"<<it2<<\" \"<<lk<<\" \"<<ly<<\" \"<<le<<\" fad? this 2?\\n\";\n        return max(0ll,it1-lk)+max(0ll,it2-le);\n    }\n    else {\n\t\tint it1=lower_bound(vk.begin(),vk.end(),le)-vk.begin()-1;\n        int it2=lower_bound(vy.begin(),vy.end(),le)-vy.begin()-1;\n\t\t// cout<<it1<<\" \"<<it2<<\" \"<<lk<<\" \"<<le<<\" \"<<ly<<\" fad?\\n\";\n        return max(0ll,it1-lk)+max(0ll,it2-ly);\n    }\n}\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>s1;\n\tcin>>k;\n\tif (k>900) {\n\t\tint kk=0,ee=0,yy=0;\n\t\tfor (char x:s1)\n\t\t\tif (x=='K') kk++;\n\t\t\telse if (x=='E') ee++;\n\t\t\telse yy++;\n\t\t__int128 res=1;\n\t\tfor (int i=1;i<=kk+yy+ee;i++) res*=i;\n\t\tfor (int i=1;i<=kk;i++) res/=i;\n\t\tfor (int i=1;i<=yy;i++) res/=i;\n\t\tfor (int i=1;i<=ee;i++) res/=i;\n\t\tlong long res1=res;\n\t\tcout<<res1<<\"\\n\";\n\t}\n\telse {\n\t\tint kk=0,ee=0,yy=0;\n\t\tfor (char x:s1)\n\t\t\tif (x=='K') kk++;\n\t\t\telse if (x=='E') ee++;\n\t\t\telse yy++;\n\t\tint K=k;\n\t\tint len=s1.size();\n\t\tfor (int i=1;i<=len+2;i++) {\n\t\t\tvector <vector <vector <vector <int> > > > v1;\n\t\t\tfor (int j=1;j<=kk+2;j++) {\n\t\t\t\tvector <vector <vector <int> > > v2;\n\t\t\t\tfor (int k=1;k<=yy+2;k++) {\n\t\t\t\t\tvector <vector <int> > v3;\n\t\t\t\t\tfor (int l=1;l<=ee+2;l++) {\n\t\t\t\t\t\tvector <int> v4;\n\t\t\t\t\t\tfor (int p=1;p<=K+2;p++)\n\t\t\t\t\t\t\tv4.pb(0);\n\t\t\t\t\t\tv3.pb(v4);\n\t\t\t\t\t}\n\t\t\t\t\tv2.pb(v3);\n\t\t\t\t}\n\t\t\t\tv1.pb(v2);\n\t\t\t}\n\t\t\tf.pb(v1);\n\t\t}\n\t\t// f[i][j][l][p][u] \u7b2c\u51e0\u4f4d\uff0c\u5f53\u524d\u7b2c j \u4e2a K \uff0c\u7b2c k \u4e2a Y \uff0c\u7b2c l \u4e2a E\uff0cp \u6b21\u4ea4\u6362\u3002\n\t\ts1=\" \"+s1;vk.pb(0);ve.pb(0);vy.pb(0);\n\t\tfor (int i=1;i<=len;i++)\n\t\t\tif (s1[i]=='K') vk.pb(i);\n\t\t\telse if (s1[i]=='E') ve.pb(i);\n\t\t\telse vy.pb(i);\n\t\tlenk=vk.size();lene=ve.size();leny=vy.size();\n//\t\tcout<<f[0][0][0][0][1]<<\" ?\\n\";\n\t\t\n\t\tf[0][0][0][0][0]=1;\n\t\tfor (int i=1;i<=len;i++) {\n\t\t\tfor (int j=0;j<=kk;j++) {\n\t\t\t\tfor (int l=0;l<=yy;l++) {\n\t\t\t\t\tfor (int p=0;p<=ee;p++) {\n\t\t\t\t\t\tfor (int u=0;u<=k;u++) {\n                            int X=check(vk[j],l,p,1),Y=check(j,vy[l],p,2),Z=check(j,l,ve[p],3);\n                            // cout<<X<<\" \"<<Y<<\" \"<<Z<<\" \"<<i<<\" \"<<j<<\" \"<<l<<\" \"<<p<<\" ?\\n\";\n\t\t\t\t\t\t\tif (j && u-X>=0) \n                                f[i][j][l][p][u]+=f[i-1][j-1][l][p][u-X];\n\t\t\t\t\t\t\tif (l && u-Y>=0)\n\t\t\t\t\t\t\t\tf[i][j][l][p][u]+=f[i-1][j][l-1][p][u-Y];\n\t\t\t\t\t\t\tif (p && u-Z>=0)\n\t\t\t\t\t\t\t\tf[i][j][l][p][u]+=f[i-1][j][l][p-1][u-Z];\n                            // if (f[i][j][l][p][u])\n                            //     cout<<f[i][j][l][p][u]<<\" \"<<i<<\" \"<<j<<\" \"<<l<<\" \"<<p<<\" \"<<u<<\" ?\\n\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n//\t\tcout<<f[1][0][1][0][1]<<\" ?\\n\";\n\t\tint ans=0;\n\t\tfor (int u=0;u<=k;u++) {\n\t\t\tans+=f[len][kk][yy][ee][u];\n\t\t}\n\t\tcout<<ans<<\"\\n\";\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1667888357,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "[ABC227E] Swap"
    }
]
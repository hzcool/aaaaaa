[
    {
        "content": "\u9898\u610f\uff1a\n\n\u6c42\u6784\u9020\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u800c\u6bcf\u4e2a\u6570\u53d6 $[1,m]$ \u4e4b\u95f4\u7684\u201c\u5b8c\u7f8e\u5e8f\u5217\u201d$A$ \uff0c\u4f7f\u5f97\u5176\u4e2d\u6240\u6709\u6570\u4e4b\u548c\u6700\u5c0f\u5316\u3002\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u8f93\u51fa $-1$ \u3002\n\n\u5b8c\u7f8e\u5e8f\u5217\u7684\u5b9a\u4e49\uff1a\u5bf9\u4e8e\u6240\u6709 $K$ \u4e2a\u7ea6\u675f\u6761\u4ef6\uff0c\u5bf9\u4e8e\u7b2c $i$ \u4e2a\u7ea6\u675f\u6761\u4ef6\uff0c\u6ee1\u8db3\u4ee5\u4e0b\u4e09\u8005\u4e4b\u4e00\uff1a\n\n+ $A_{p_i}<x_i$ \u4e14 $A_{q_i}<y_i$ \uff1b\n+ $A_{p_i}=x_i$ \u4e14 $A_{q_i}=y_i$ \uff1b\n+ $A_{p_i}>x_i$ \u4e14 $A_{q_i}>y_i$ \u3002\n\n$1\\le n,m,k\\le 2\\times 10^5$ \u3002\u6570\u636e\u5408\u6cd5\u3002\n\n---\n\n\u60f3\u5230\u4e00\u4e2a\u589e\u91cf\u6cd5\u65b9\u6848\u3002\n\n\u56e0\u4e3a\u6bcf\u4e2a\u6570\u4e00\u5f00\u59cb\u90fd\u662f\u4e00\u4e2a $[1,m]$ \u7684\u533a\u95f4\u5f62\u5f0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u4ece\u4e0a\u5230\u4e0b\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9**\u5206\u88c2\u533a\u95f4**\u3002\n\n\u4f46\u662f\u78b0\u5230\u4e86\u56f0\u96be\uff08\u56e0\u4e3a\u4e0d\u77e5\u9053\u5982\u4f55\u5b58\u50a8\uff09\u6545\u5f03\u3002\n\n---\n\n\u4e0b\u9762\u662f\u5b98\u65b9\u9898\u89e3\u7684\u601d\u8def\uff1a\n\n\u78b0\u5230\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u5bf9\u4e8e\u6761\u4ef6 $i$ \uff0c\u7b49\u4ef7\u4e8e $A_{P_i}\\le X-1$ \u5f53\u4e14\u4ec5\u5f53 $A_{Q_i}\\le Y-1$ \u800c\u4e14 $A_{P_i}\\le X$ \u5f53\u4e14\u4ec5\u5f53 $A_{Q_i}\\le Y$ \u3002\u53ef\u4ee5\u628a\u5b83\u62c6\u6210\u4e24\u4e2a\u7ea6\u675f\u6761\u4ef6\u770b\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u8ba9 $A_{P_i}$ \u548c $A_{Q_i}$ \u8981\u4e48\u90fd\u7b26\u5408\u6761\u4ef6\uff08\u6307\u5206\u522b\u5c0f\u4e8e\u7b49\u4e8e $X,Y$\uff09\u8981\u4e48\u90fd\u4e0d\u7b26\u5408\u6761\u4ef6\u5373\u53ef\u3002\n\n\u9996\u5148\u521d\u59cb $A$ \u6240\u6709\u5143\u7d20\u4e3a $1$ \u3002\u4e0d\u65ad\u7ea6\u675f\u4f7f\u5f97 $A$ \u7b26\u5408\u6761\u4ef6\u3002\n\n\u7136\u540e\u5bf9\u4e8e\u4e00\u4e2a\u4e2a\u6761\u4ef6\u4e0d\u65ad\u66f4\u65b0\uff1a\u5982\u679c $A_{P_i}$ \u5927\u4e8e $X_i$ \uff0c\u90a3\u4e48 $A_{Q_i}$ \u5c31\u66f4\u65b0\u4e3a $\\max(A_{Q_i},Y_i+1)$ \u3002\u540c\u7406 $A_{Q_i}$ \u5927\u4e8e $Y_i$ \u4e5f\u5bf9 $A_{P_i}$ \u505a\u7c7b\u4f3c\u5904\u7406\u3002\n\n\u6700\u540e\u5224\u65ad\u4e00\u4e0b\u5728 $M$ \u7684\u503c\u57df\u4e4b\u5185\u5373\u53ef\u3002\n\n\u8fd9\u6837\u505a\u7684\u6b63\u786e\u6027\u663e\u7136\uff1a\u589e\u91cf\u6cd5\uff0c\u5047\u8bbe\u4e4b\u524d\u5df2\u7ecf\u6784\u9020\u51fa\u4e86\u6700\u4f18\u89e3\uff0c\u8fd9\u4e24\u4e2a\u5143\u7d20\u65e0\u7591\u662f\u6700\u5c0f\u7684\u3002\u5982\u679c\u7b26\u5408\u6761\u4ef6\u5c31\u65e0\u9700\u53d8\u52a8\uff0c\u5426\u5219\u5c31\u53d6\u4e00\u4e2a\u5bf9\u4e8e\u4e24\u8005\u90fd\u6700\u5c0f\u7684\u4e0d\u7b26\u5408\u503c\u57df\u7684\u503c\u3002\n\n\u6240\u4ee5\u5c31\u53ef\u4ee5 $O(n+k)$ \u505a\u4e86\u3002",
        "postTime": 1668070312,
        "uid": 121995,
        "name": "SmallTualatin",
        "ccfLevel": 0,
        "title": "ARC146D \u9898\u89e3"
    },
    {
        "content": "## \u9898\u89e3\n\n\u56e0\u4e3a\u9650\u5236\u662f\u53cc\u5411\u7684\uff0c\u6240\u4ee5\u5148\u628a\u6bcf\u4e2a\u9650\u5236\u90fd\u62c6\u6210\u4e24\u4e2a\u3002\n\n\u5982\u679c\u4e0d\u5b58\u5728 $X_i=1$ \u548c $Y_i=1$\uff0c\u90a3\u4e48\u6240\u6709\u6570\u90fd\u53d6 $1$ \u5373\u53ef\u3002\n\n\u4e8e\u662f\u8003\u8651\u4e00\u4e2a\u5f62\u5982 $i\\ 1\\ j\\ y$ \u7684\u9650\u5236\u3002\u5b83\u5176\u5b9e\u76f8\u5f53\u4e8e\u9650\u5236\u4e86 $A_j$ \u9700\u8981 $\\ge y$\u3002\u800c $A_j\\ge y$ \u53c8\u4f1a\u9650\u5236\uff1a\n\n- \u5bf9\u4e8e\u90a3\u4e9b\u6ee1\u8db3 $P_x=j\\land X_x<y$ \u7684\u9650\u5236 $x$\uff0c\u6211\u4eec\u9700\u8981\u9650\u5236 $A_{Q_x}>Y_x$\uff1b\n- \u5bf9\u4e8e\u90a3\u4e9b\u6ee1\u8db3 $P_x=j\\land X_x=y$ \u7684\u9650\u5236 $x$\uff0c\u6211\u4eec\u9700\u8981\u9650\u5236 $A_{Q_x}\\ge Y_x$\uff1b\n\n\u7ee7\u7eed\u9012\u5f52\u8003\u8651\u8fd9\u4e9b\u9650\u5236\uff0c\u76f4\u5230\u6240\u6709\u9650\u5236\u90fd\u5904\u7406\u5b8c\u3002\u6b64\u65f6\uff0c\u5982\u679c\u67d0\u4e2a $A_i$ \u5fc5\u987b $>m$\uff0c\u90a3\u4e48\u65e0\u89e3\uff1b\u5426\u5219\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u4e00\u5b9a\u53ef\u4ee5\u53d6\u5b83\u80fd\u53d6\u7684\u6700\u5c0f\u503c\u3002\n\n\u56e0\u4e3a\u6bcf\u6761\u9650\u5236\u90fd\u53ea\u4f1a\u88ab\u8003\u8651 $O(1)$ \u6b21\uff0c\u6240\u4ee5\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O((N+M)\\log N)$\uff0c\u74f6\u9888\u5728\u4e8e\u6392\u5e8f\u3002\n\n## \u4ee3\u7801\n\n\u5176\u5b9e\u53ef\u4ee5\u4e0d\u7528 deque\uff0c\u4f46\u61d2\u5f97\u6539\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define For(Ti,Ta,Tb) for(int Ti=(Ta);Ti<=(Tb);++Ti)\n#define Dec(Ti,Ta,Tb) for(int Ti=(Ta);Ti>=(Tb);--Ti)\n#define Debug(...) fprintf(stderr,__VA_ARGS__)\n#define range(Tx) begin(Tx),end(Tx)\nusing ll = long long;\nconst int N = 2e5 + 5;\nint n, m, k, ans[N];\ndeque<tuple<int, int, int>> g[N], g2[N];\nvoid DFS(int i, int x) {\n\tans[i] = max(ans[i], x);\n\twhile (g[i].size()) {\n\t\tauto [x_, j, y] = g[i].front();\n\t\tif (x_ > x) break;\n\t\tg[i].pop_front();\n\t\tif (x_ == x) {\n\t\t\tg2[i].emplace_back(x_, j, y);\n\t\t\tDFS(j, y);\n\t\t} else DFS(j, y + 1);\n\t}\n\twhile (g2[i].size()) {\n\t\tauto [x_, j, y] = g2[i].front();\n\t\tif (x_ >= x) break;\n\t\tg2[i].pop_front();\n\t\tDFS(j, y + 1);\n\t}\n}\nint main() {\n\tios::sync_with_stdio(false), cin.tie(nullptr);\n\tcin >> n >> m >> k;\n\tFor(_, 1, k) {\n\t\tint i, j, x, y; cin >> i >> x >> j >> y;\n\t\tg[i].emplace_back(x, j, y), g[j].emplace_back(y, i, x);\n\t}\n\tFor(i, 1, n) sort(range(g[i]));\n\tFor(i, 1, n) DFS(i, 1);\n\tFor(i, 1, n) if (ans[i] > m) { cout << \"-1\\n\"; return 0; }\n\tcout << accumulate(ans + 1, ans + n + 1, 0LL) << '\\n';\n\treturn 0;\n}\n```",
        "postTime": 1681306381,
        "uid": 225625,
        "name": "Alan_Zhao",
        "ccfLevel": 8,
        "title": "ARC146D >=< \u9898\u89e3"
    }
]
[
    {
        "content": "\u9898\u76ee\uff1a\u7ed9\u4f60\u4e00\u4e9b\u5b50\u4e32\u6392\u5e8f\u7684\u64cd\u4f5c\uff0c\u6700\u540e\u6c42\u503c\u4e3a $X$ \u7684\u6570\u7684\u4f4d\u7f6e\u3002\n\n\u6211\u4e0d\u4f1a\u76f4\u63a5\u6392\u5e8f\u7684\u7ebf\u6bb5\u6811\u505a\u6cd5\uff0c\u6240\u4ee5\u8003\u8651\u8f6c\u5316\u3002\n\n\u628a\u503c\u4e0e $X$ \u7684\u5927\u5c0f\u5173\u7cfb\u8bb0\u5f55\u4e0b\u6765\uff0c\u8bb0\u4e3a $\\{b_i\\}$ \u8fd9\u4e2a\u5e8f\u5217\u3002\u6bd4\u5982\u628a\u5927\u4e8e\u8bb0\u4e3a $2$ \uff0c\u628a\u5c0f\u4e8e\u8bb0\u4e3a $0$ \uff0c\u76f8\u7b49\u8bb0\u4e3a $1$ \u3002\n\n\u90a3\u4e48\u6392\u5e8f\u76f8\u5f53\u4e8e\u76f4\u63a5\u6392\u8fd9\u4e2a\u5e8f\u5217\u3002\u53cd\u6b63\u6240\u6709\u5c0f\u4e8e $X$ \u7684\u6570\u4e4b\u95f4\u7684\u5927\u5c0f\u5173\u7cfb\u4e0d\u91cd\u8981\uff0c\u5927\u4e8e\u540c\u7406\u3002\u8fd9\u4e2a\u505a\u6cd5\u663e\u7136\u662f\u6b63\u786e\u7684\u3002\n\n\u5148\u628a $[l,r]$ \u95f4\u7684\u6570\u503c\u548c\u67e5\u8be2\uff0c\u628a\u7ed3\u679c\u6574\u9664 $2$ \u5f97\u5230\u533a\u95f4\u5185\u5927\u4e8e $X$ \u7684\u6570\u7684\u6570\u91cf\u3002\u63a8\u5bfc\u518d\u5f97\u5230\u5c0f\u4e8e $X$ \u7684\u6570\u7684\u6570\u91cf\u3002\n\n\u968f\u540e\u53ea\u9700\u8981\u533a\u95f4\u8d4b\u503c\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\n\nstruct stu{\n\tint data;\n\tint tag;\n}tr[4*1000007];\nint n,q,x,o,l,r,pos,d[1000007],c[1000007];\nvoid build(int lb,int ub,int k){\n\ttr[k].tag=-1; \n\tif(lb==ub){\n\t\ttr[k].data=c[lb];\n\t\treturn;\n\t}\n\tint mid=lb+ub>>1;\n\tbuild(lb   ,mid,k<<1  );\n\tbuild(mid+1 ,ub ,k<<1|1);\n\ttr[k].data=tr[k<<1].data+tr[k<<1|1].data;\n}\nvoid dtag(int k,int lb,int ub){\n\tif(tr[k].tag>-1){\n\t\ttr[k<<1].tag=tr[k].tag;\n\t   tr[k<<1|1].tag=tr[k].tag;\n\t   int mid=lb+ub>>1;\n\t   tr[k<<1].data  =tr[k].tag*(mid-lb+1);\n\t   tr[k<<1|1].data=tr[k].tag*(ub-mid  );\n\t   tr[k].tag=-1;\n\t} \n}\nint query(int a,int b,int lb,int ub,int k){\n\tif(k<=0) return 0;\n\tif(a<=lb&&ub<=b){\n\t\treturn tr[k].data;\n\t}\n\tdtag(k,lb,ub);\n\tint mid=lb+ub>>1;\n\tint ans=0;\n\tif(a<=mid) ans=ans+query(a,b,lb   ,mid,k<<1  );\n\tif(b>mid)  ans=ans+query(a,b,mid+1 ,ub ,k<<1|1);\n\treturn ans;\n}\nvoid upd(int a,int b,int x,int lb,int ub,int k){\n\tif(k<=0) return;\n\tif(a<=lb&&ub<=b){\n\t\ttr[k].tag=x;\n\t\ttr[k].data=x*(ub-lb+1);\n\t\treturn ;\n\t}\n\tdtag(k,lb,ub);\n\tint mid=lb+ub>>1;\n\tif(a<=mid) upd(a,b,x,lb   ,mid,k<<1  );\n\tif(b>mid)  upd(a,b,x,mid+1 ,ub ,k<<1|1);\n\ttr[k].data=tr[k<<1].data+tr[k<<1|1].data;\n}\nint main(){\n\tscanf(\"%d%d%d\",&n,&q,&x);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&d[i]);\n\t\tif(d[i]<x)  c[i]=0;\n\t\tif(d[i]==x) c[i]=1;\n\t\tif(d[i]>x)  c[i]=2;\n\t}\n\tbuild(1,1000000,1);\n\tfor(int i=1;i<=q;i++){\n\t\tscanf(\"%d%d%d\",&o,&l,&r);\n\t\tif(l<0||r<0||l>n||r>n){\n\t\t\tprintf(\"%d\",0);\n\t\t}\n\t\tif(l>r) swap(l,r);\n\t\tint aa=query(l,r,1,1000000,1);\n\t\tint z=r-l+1-((aa+1)/2),t=(aa)/2;\n\t\tif(o==1){\n\t\t\tif(aa&1){\n\t\t\t\tif(z!=0) upd(l    ,l+z-1,0,1,1000000,1);\n\t\t\t\tupd(l+z  ,l+z  ,1,1,1000000,1);\n\t\t\t\tupd(l+z+1,r   ,2,1,1000000,1);\n\t\t\t}else{\n\t\t\t\tif(z!=0) upd(l    ,l+z-1,0,1,1000000,1);\n\t\t\t\tupd(l+z  ,r   ,2,1,1000000,1);\n\t\t\t}\n\t\t}else{\n\t\t\tif(aa&1){\n\t\t\t\tif(t!=0) upd(l    ,l+t-1,2,1,1000000,1);\n\t\t\t\tupd(l+t  ,l+t  ,1,1,1000000,1);\n\t\t\t\tupd(l+t+1,r   ,0,1,1000000,1);\n\t\t\t}else{\n\t\t\t\tif(t!=0) upd(l    ,l+t-1,2,1,1000000,1);\n\t\t\t\tupd(l+t  ,r   ,0,1,1000000,1);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(query(i,i,1,1000000,1)==1){\n\t\t\tprintf(\"%d\\n\",i);\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\u5947\u602a\u7684\u7801\u98ce\u4e3b\u8981\u662f\u4e3a\u4e86\u65b9\u4fbf\u524d\u540e\u5bf9\u6bd4\uff0c\u4e0d\u559c\u52ff\u55b7\u3002\n\n",
        "postTime": 1674304572,
        "uid": 768195,
        "name": "2021tyoi_ma",
        "ccfLevel": 0,
        "title": "\u9898\u89e3"
    },
    {
        "content": "\u770b\u5230\u8fd9\u9053\u9898\u7684\u7b2c\u4e00\u773c\uff0c\u6211\u5c31\u60f3\u8d77\u4e86 [P2824](/problem/P2824)\u3002\u4e0d\u8fc7\uff0c\u8fd9\u63d0\u793a\u8981\u6839\u636e\u6570\u6765\u6c42\u4f4d\u7f6e\uff0c\u6839\u672c\u5c31\u6ca1\u4ec0\u4e48\u4e1c\u897f\u53ef\u4ee5\u4e8c\u5206\u3002~~\u6240\u4ee5\u6211\u9009\u62e9\u6446\u70c2~~\n\n\u8003\u8651\u548c\u90a3\u9053\u5178\u9898\u4e00\u6837\u7684\u5957\u8def\uff0c\u5c06\u6bcf\u4e2a\u6570\u91cd\u65b0\u8d4b\u503c\u6210 $0,1,2$ \u4e2d\u7684\u4e00\u4e2a\uff0c\u5206\u522b\u4ee3\u8868\uff1a\u5c0f\u4e8e $x$\uff0c\u7b49\u4e8e $x$\uff0c\u5927\u4e8e $x$\u3002\u90a3\u4e48\u4fee\u6539\u8fc7\u540e\u679a\u4e3e\u627e\u5230 $1$ \u5c31\u80fd\u786e\u5b9a $x$ \u7684\u4f4d\u7f6e\u4e86\u3002\n\n\u7136\u800c\u8fd8\u4e0d\u662f\u5f88\u597d\u7ef4\u62a4\u3002\u80fd\u5426\u5316\u6210 $0/1$ \u4e32\u7684\u64cd\u4f5c\u5462\uff1f\u53ef\u4ee5\uff01\u4e00\u4e2a\u4e32\u641e\u4e0d\u5b9a\uff0c\u628a\u4ed6\u62c6\u6210\u4e24\u4e32\uff0c$0,1,2$ \u5206\u522b\u62c6\u6210 $0/0,0/1,1/1$\u3002\u90a3\u4e48\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u5c06\u6392\u5e8f\u8f6c\u5316\u4e3a\u533a\u95f4\u8d4b\u503c\uff0c\u76f4\u63a5\u6309\u7167\u539f\u6765\u7684\u65b9\u6cd5\u505a\u5c31\u53ef\u4ee5\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n# AC \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MAXN = 2e5 + 10;\n\nint a[MAXN];\n\nstruct segtree {\n\t\n\tstruct node {\n\t\tint l, r, sum, tag;\n\t} t[MAXN << 2];\n\t\n\tinline \n\tint len(int p) {\n\t\treturn t[p].r - t[p].l + 1;\n\t}\n\t\n\tinline \n\tvoid pushup(int p) {\n\t\tt[p].sum = t[p << 1].sum + t[p << 1 | 1].sum;\n\t}\n\t\n\tinline \n\tvoid pushdown(int p) {\n\t\tif (!~t[p].tag) return ;\n\t\tt[p << 1].sum = t[p].tag * len(p << 1);\n\t\tt[p << 1 | 1].sum = t[p].tag * len(p << 1 | 1);\n\t\tt[p << 1].tag = t[p].tag, t[p << 1 | 1].tag = t[p].tag;\n\t\tt[p].tag = -1;\n\t}\n\t\n\tvoid build(int l, int r, int k, int p) {\n\t\tt[p].l = l, t[p].r = r, t[p].tag = -1;\n\t\tif (l == r) return t[p].sum = (a[l] >= k), void();\n\t\tint mid = l + r >> 1;\n\t\tbuild(l, mid, k, p << 1), build(mid + 1, r, k, p << 1 | 1);\n\t\tpushup(p);\n\t}\n\t\n\tvoid update(int l, int r, int k, int p) {\n\t\tif (l > r) return ;\n\t\tif (l <= t[p].l && t[p].r <= r) return t[p].sum = k * len(p), t[p].tag = k, void();\n\t\tpushdown(p);\n\t\tint mid = t[p].l + t[p].r >> 1;\n\t\tif (l <= mid) update(l, r, k, p << 1);\n\t\tif (r > mid) update(l, r, k, p << 1 | 1);\n\t\tpushup(p);\n\t}\n\t\n\tint query(int l, int r, int p) {\n\t\tif (l <= t[p].l && t[p].r <= r) return t[p].sum;\n\t\tpushdown(p);\n\t\tint mid = t[p].l + t[p].r >> 1, res = 0;\n\t\tif (l <= mid) res += query(l, r, p << 1);\n\t\tif (r > mid) res += query(l, r, p << 1 | 1);\n\t\treturn res;\n\t}\n\t\n\tint get(int k, int p) {\n\t\tif (k == t[p].l && t[p].r == k) return t[p].sum;\n\t\tpushdown(p);\n\t\tint mid = t[p].l + t[p].r >> 1;\n\t\treturn get(k, p << 1 | k > mid);\n\t}\n} t1, t2;\n\nint n, m, q;\n\nint main() {\n\tscanf(\"%d%d%d\", &n, &m, &q);\n\tfor (int i = 1; i <= n; i++) scanf(\"%d\", &a[i]);\n\tt1.build(1, n, q, 1), t2.build(1, n, q + 1, 1);\n\tfor (int opt, l, r, t; m--;) {\n\t\tscanf(\"%d%d%d\", &opt, &l, &r);\n\t\tt = t1.query(l, r, 1);\n\t\tif (opt == 1) t1.update(l, r - t, 0, 1), t1.update(r - t + 1, r, 1, 1);\n\t\telse t1.update(l, l + t - 1, 1, 1), t1.update(l + t, r, 0, 1);\n\t\tt = t2.query(l, r, 1);\n\t\tif (opt == 1) t2.update(l, r - t, 0, 1), t2.update(r - t + 1, r, 1, 1);\n\t\telse t2.update(l, l + t - 1, 1, 1), t2.update(l + t, r, 0, 1);\n\t}\n\tfor (int i = 1; i <= n; i++) if (t1.get(i, 1) != t2.get(i, 1)) return printf(\"%d\", i), 0;\n}\n```",
        "postTime": 1673147740,
        "uid": 406941,
        "name": "Register_int",
        "ccfLevel": 6,
        "title": "ABC237G \u9898\u89e3"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u4e00\u4e2a $1$ \u5230 $N$ \u7684\u6392\u5217 $\\{ P_i \\}$ \u548c\u4e00\u4e2a\u6570 $X$\uff0c\u7ef4\u62a4\u4e24\u79cd\u64cd\u4f5c\uff1a\n\n- $1 \\ L_i \\ R_i$ \u8868\u793a\u5c06 $P_{L_i},P_{L_i+1},\\dots P_{R_i}$ \u5347\u5e8f\u6392\u5e8f\uff1b\n\n- $2 \\ L_i \\ R_i$ \u8868\u793a\u5c06 $P_{L_i},P_{L_i+1},\\dots P_{R_i}$ \u964d\u5e8f\u6392\u5e8f\uff1b\n\n\u95ee $Q$ \u6b21\u64cd\u4f5c\u540e $X$\u6240\u5728\u4f4d\u7f6e\u7684\u4e0b\u6807\uff0c$ x \\leqslant n,q,n \\leqslant 2 \\times 10^5$\u3002\n\n## \u601d\u8def\n\n\u5eb7\u5eb7\u8fd9\u9053\u5178\u9898\uff1a[\u6392\u5e8f](https://www.luogu.com.cn/problem/P2824)\u3002\n\n\u7531\u4e8e\u6211\u4eec\u53ea\u5173\u5fc3 $X$ \u7684\u4f4d\u7f6e\uff0c\u5176\u4ed6\u6570\u662f\u591a\u5c11\u5e76\u4e0d\u91cd\u8981\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u4fe1\u606f\u538b\u7f29\uff1a\n\n\u6211\u4eec\u5c06\u6240\u6709\u6ee1\u8db3 $P_i < X$ \u7684 $P_i$ \u90fd\u6539\u4e3a $0$\uff0c\u6240\u6709\u6ee1\u8db3 $P_i \\geqslant X$ \u7684 $P_i$ \u90fd\u6539\u4e3a $1$\u3002\n\n\u4f46\u662f\u8fd9\u6837 $X$ \u4e5f\u4f1a\u88ab\u6539\u4e3a $1$\uff0c\u968f\u4fbf\u4e00\u6392\u5e8f\u5c31\u627e\u4e0d\u5230 $X$\u7684\u4f4d\u7f6e\u4e86\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u590d\u5236\u51fa\u53e6\u4e00\u4e2a\u6570\u7ec4 $\\{ P_i \\}$\uff0c\u7136\u540e\u5c06\u6240\u6709\u6ee1\u8db3 $P_i \\leqslant X$ \u7684 $P_i$ \u90fd\u6539\u4e3a $0$\uff0c\u6240\u6709\u6ee1\u8db3 $P_i > X$ \u7684 $P_i$ \u90fd\u6539\u4e3a $1$\uff0c\u8fd9\u6837\u6bcf\u6b21\u64cd\u4f5c\u540e\u4e24\u4e2a\u6570\u7ec4\u4e00\u5b9a\u4f1a\u6709\u4e00\u4e2a\u4f4d\u7f6e\u4e0d\u4e00\u6837\uff0c\u8fd9\u4e2a\u4f4d\u7f6e\u5c31\u662f $X$ \u6240\u5728\u4f4d\u7f6e\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u7ef4\u62a4\u6392\u5e8f\uff0c\u5176\u5b9e\u5c31\u662f\u5c06\u533a\u95f4\u6240\u6709 $0$ \u653e\u4e00\u8fb9\uff0c\u6240\u6709 $1$ \u653e\u53e6\u4e00\u8fb9\u3002\n\n\u5347\u5e8f\u6392\u5e8f\u65f6\u76f4\u63a5\u7edf\u8ba1\u533a\u95f4\u5185 $1$ \u7684\u6570\u91cf\uff0c\u7136\u540e\u5168\u90e8\u8d4b\u503c\u4e3a $0$\uff0c\u518d\u5c06\u672b\u5c3e\u4e00\u6bb5\u4e0e $1$ \u4e2a\u6570\u76f8\u540c\u7684\u533a\u95f4\u90fd\u8d4b\u503c\u4e3a $1$\uff0c\u61d2\u6807\u8bb0\u4e0b\u4f20\u65f6\u6ce8\u610f\u4e00\u70b9\u5c31\u884c\u3002\u964d\u5e8f\u6392\u5e8f\u540c\u7406\u3002\n\n\u64cd\u4f5c\u5b8c\u540e\u76f4\u63a5\u904d\u5386\u7ebf\u6bb5\u6811\u53f6\u5b50\u7ed3\u70b9\uff0c\u627e\u4e0d\u540c\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(q \\log n)$\n\n## \u4ee3\u7801\n\n```cpp\nstruct tree\n{\n\tint l,r,l1,l0,o;\n} t[2][1600005];\nvoid build(int ,int ,int );\nint a1(int ,int ,int ,int );\nvoid c1(int ,int ,int ,int );\nvoid c0(int ,int ,int ,int );\nvoid pushdown(int ,int );\nvoid dfs(int );\nll n,a[200005],q,x;\nint main()\n{\n\tn=read(),q=read(),x=read();\n\tfor (int i=1;i<=n;++i)\n\t\ta[i]=read();\n\tbuild(1,1,n);\n\twhile (q--)\n\t{\n\t\tint l,r;\n\t\tif (read()==1)\n\t\t{\n\t\t\tl=read(),r=read();\n\t\t\tint tmp=a1(1,l,r,0);\n\t\t\tc0(1,l,r,0);\n\t\t\tc1(1,r-tmp+1,r,0);\n\t\t\ttmp=a1(1,l,r,1);\n\t\t\tc0(1,l,r,1);\n\t\t\tc1(1,r-tmp+1,r,1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tl=read(),r=read();\n\t\t\tint tmp=a1(1,l,r,0);\n\t\t\tc0(1,l,r,0);\n\t\t\tc1(1,l,l+tmp-1,0);\n\t\t\ttmp=a1(1,l,r,1);\n\t\t\tc0(1,l,r,1);\n\t\t\tc1(1,l,l+tmp-1,1);\n\t\t}\n\t}\n\tdfs(1);\n\treturn 0;\n}\nvoid build(int no,int l,int r)\n{\n\tt[0][no].l=t[1][no].l=l,t[0][no].r=t[1][no].r=r;\n\tif (l==r)\n\t{\n\t\tt[0][no].o=(a[l]>x);\n\t\tt[1][no].o=(a[l]>=x);\n\t\treturn;\n\t}\n\tint mid=l+r>>1;\n\tbuild(no<<1,l,mid);\n\tbuild(no<<1|1,mid+1,r);\n\tt[0][no].o=t[0][no<<1].o+t[0][no<<1|1].o;\n\tt[1][no].o=t[1][no<<1].o+t[1][no<<1|1].o;\n}\nint a1(int no,int l,int r,int rt)\n{\n\tif (t[rt][no].l>r || t[rt][no].r<l || l>r)\n\t\treturn 0;\n\tif (t[rt][no].l>=l && t[rt][no].r<=r)\n\t\treturn t[rt][no].o;\n\tpushdown(no,rt);\n\treturn a1(no<<1,l,r,rt)+a1(no<<1|1,l,r,rt);\n}\nvoid c1(int no,int l,int r,int rt)\n{\n\tif (t[rt][no].l>r || t[rt][no].r<l || l>r)\n\t\treturn;\n\tpushdown(no,rt);\n\tif (t[rt][no].l>=l && t[rt][no].r<=r)\n\t{\n\t\tt[rt][no].o=t[rt][no].r-t[rt][no].l+1;\n\t\tt[rt][no].l1=1;\n\t\treturn;\n\t}\n\tc1(no<<1,l,r,rt);\n\tc1(no<<1|1,l,r,rt);\n\tt[rt][no].o=t[rt][no<<1].o+t[rt][no<<1|1].o;\n}\nvoid c0(int no,int l,int r,int rt)\n{\n\tif (t[rt][no].l>r || t[rt][no].r<l || l>r)\n\t\treturn;\n\tpushdown(no,rt);\n\tif (t[rt][no].l>=l && t[rt][no].r<=r)\n\t{\n\t\tt[rt][no].o=0;\n\t\tt[rt][no].l0=1;\n\t\treturn;\n\t}\n\tc0(no<<1,l,r,rt);\n\tc0(no<<1|1,l,r,rt);\n\tt[rt][no].o=t[rt][no<<1].o+t[rt][no<<1|1].o;\n}\nvoid pushdown(int x,int y)\n{\n\tint l=x<<1,r=x<<1|1;\n\tif (t[y][x].l0)\n\t{\n\t\tt[y][l].l0=t[y][r].l0=1;\n\t\tt[y][l].l1=t[y][r].l1=t[y][x].l0=0;\n\t\tt[y][l].o=t[y][r].o=0;\n\t}\n\telse if (t[y][x].l1)\n\t{\n\t\tt[y][l].l1=t[y][r].l1=1;\n\t\tt[y][l].l0=t[y][r].l0=t[y][x].l1=0;\n\t\tt[y][l].o=t[y][l].r-t[y][l].l+1;\n\t\tt[y][r].o=t[y][r].r-t[y][r].l+1;\n\t}\n}\nvoid dfs(int no)\n{\n\tif (t[0][no].l==t[0][no].r)\n\t{\n//\t\twrite(t[0][no].l,' ');\n//\t\twrite(t[0][no].o,' '),write(t[1][no].o,'\\n');\n\t\tif (t[0][no].o!=t[1][no].o)\n\t\t{\n\t\t\twrite(t[0][no].l);\n\t\t\texit(0);\n\t\t}\n\t\treturn;\n\t}\n\tpushdown(no,0);\n\tpushdown(no,1);\n\tdfs(no<<1);\n\tdfs(no<<1|1);\n}\n```\n",
        "postTime": 1666323569,
        "uid": 128433,
        "name": "C6H14",
        "ccfLevel": 7,
        "title": "\u3010\u9898\u89e3\u3011ABC237G"
    },
    {
        "content": "\u8fd9\u9053\u9898\u6709\u4e00\u4e2a\u7ecf\u5178\u7684\u4f18\u5316\u3002\n\n\u9996\u5148\u5c31\u662f\u6211\u4eec\u53d1\u73b0\u76f4\u63a5\u6392\u5e8f\u975e\u5e38\u611a\u8822\uff0c\u56e0\u4e3a\u4f1a\u65f6\u95f4\u7206\u70b8\u3002\n\n\u4f46\u662f\u5462\uff0c\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u53ea\u5173\u6ce8\u4e00\u4e2a\u6570\u5b57\u7684\u76f8\u5bf9\u4f4d\u7f6e\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8f6c\u6362\uff0c\u5c06\u5c0f\u4e8e\u5b83\u7684\u6570\u5b57\u8bb0\u4f5c $0$\uff0c\u5b83\u672c\u8eab\u8bb0\u4f5c $1$\uff0c\u5927\u4e8e\u5b83\u7684\u6570\u5b57\u8bb0\u4f5c $2$\u3002\n\n\u7ef4\u62a4\u4e09\u4e2a\u6570\u5b57\u7684\u6392\u5e8f\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u7528\u4e00\u4e2a\u7ebf\u6bb5\u6811\u7ef4\u62a4\u8fd9\u4e00\u8fc7\u7a0b\u5373\u53ef\u3002\n```cpp\n#include<bits/stdc++.h>\n#define LL long long\nusing namespace std;\nconst LL N=1e6+5;\nstruct node\n{\n\tLL l,r,lz=-1,a[3]; \n}t[N];\nLL n,q,x,a[N],op,l,r;\nvoid tobe(LL pos,LL k)\n{\n\tt[pos].lz=k;\n\tt[pos].a[0]=t[pos].a[1]=t[pos].a[2]=0;\n\tt[pos].a[k]=t[pos].r-t[pos].l+1;\n}\nvoid pushup(LL pos)\n{\n\tLL lc=pos*2,rc=pos*2+1;\n\tif(t[lc].l==0)return; \n\tt[pos].a[0]=t[lc].a[0]+t[rc].a[0];\n\tt[pos].a[1]=t[lc].a[1]+t[rc].a[1];\n\tt[pos].a[2]=t[lc].a[2]+t[rc].a[2];\n} \nvoid down(LL pos)\n{\n\tif(t[pos].lz==-1)return;\n\tLL lc=pos*2,rc=pos*2+1,k=t[pos].lz;\n\ttobe(lc,k),tobe(rc,k);\n\tt[pos].lz=-1;\n}\nvoid build(LL pos,LL l,LL r)\n{\n\tt[pos].l=l;\n\tt[pos].r=r;\n\tif(l==r)\n\t{\n\t\tt[pos].a[a[l]]++;\n\t\treturn;\n\t}\n\tLL mid=(l+r)/2;\n\tbuild(pos*2,l,mid);\n\tbuild(pos*2+1,mid+1,r);\n\tpushup(pos);\n}\nvoid change(LL pos,LL l,LL r,LL k)\n{\n\tif(t[pos].r<l||r<t[pos].l)return;\n\tif(l<=t[pos].l&&t[pos].r<=r)\n\t{\n\t\ttobe(pos,k);\n\t\treturn;\n\t}\n\tdown(pos);\n\tchange(pos*2,l,r,k);\n\tchange(pos*2+1,l,r,k);\n\tpushup(pos);\n}\nLL query(LL pos,LL l,LL r,LL k)\n{\n\tif(t[pos].r<l||r<t[pos].l)return 0;\n\tif(l<=t[pos].l&&t[pos].r<=r)return t[pos].a[k];\n\tdown(pos);\n\treturn query(pos*2,l,r,k)+query(pos*2+1,l,r,k);\n}\nint main()\n{\n\tcin>>n>>q>>x;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t\tif(a[i]>x)a[i]=2;\n\t\telse if(a[i]==x)a[i]=1;\n\t\telse a[i]=0;\n\t}\n\tbuild(1,1,n);\n\twhile(q--)\n\t{\n\t\tcin>>op>>l>>r;\n\t\tLL cnt0=query(1,l,r,0),cnt1=query(1,l,r,1),cnt2=query(1,l,r,2); \n\t\tif(op==1)\n\t\t{\n\t\t\tchange(1,l,l+cnt0-1,0);\n\t\t\tchange(1,l+cnt0,l+cnt0+cnt1-1,1);\n\t\t\tchange(1,l+cnt0+cnt1,r,2);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tchange(1,l,l+cnt2-1,2);\n\t\t\tchange(1,l+cnt2,l+cnt2+cnt1-1,1);\n\t\t\tchange(1,l+cnt2+cnt1,r,0);\t\t\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(query(1,i,i,1))\n\t\t{\n\t\t\tcout<<i<<endl;\n\t\t\treturn 0; \n\t\t}\n\t}\n}\n```",
        "postTime": 1683936329,
        "uid": 501947,
        "name": "DengDuck",
        "ccfLevel": 6,
        "title": "[ABC237G] Range Sort Query \u9898\u89e3"
    }
]
[
    {
        "content": "\u591a\u5e74\u524d\u6bd4\u8d5b\u65f6\u4e00\u8138\u61f5\u903c\u7684\u9898\u76ee\u4eca\u5929\u5207\u51fa\u6765\u4e86\uff0c\u5199\u4e2a\u9898\u89e3\u7eaa\u5ff5\u4e00\u4e0b\u5f80\u4e8b\u5427\uff08\uff09\n\n\u9898\u76ee\u95ee $a[1,x_i]$ \u53bb\u91cd\u540e\u548c $b[1,y_i]$ \u53bb\u91cd\u540e\u662f\u5426\u76f8\u7b49\u3002\n\n\u8fd9\u79cd\u770b\u8d77\u6765\u5f88\u96be\u7ef4\u62a4\u7684\u4e1c\u897f\u5f88\u5bb9\u6613\u60f3\u5230\u83ab\u961f\uff0c\u4f46\u8fd9\u662f E \u9898\uff0c\u800c\u4e14\u8be2\u95ee\u7684\u5de6\u7aef\u70b9\u90fd\u662f $1$\uff0c\u8fd9\u6837\u83ab\u961f\u5c31\u9000\u5316\u6210\u5355\u6307\u9488\u4e86\u3002\u56e0\u6b64\u4e0d\u96be\u60f3\u5230\u7528\u4e00\u4e2a\u6307\u9488\u53bb\u7ef4\u62a4\u8fd9\u4e2a\u4e1c\u897f\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $x_i$\uff0c\u5408\u6cd5\u7684 $y_i$ \u8981\u4e48\u4e0d\u5b58\u5728\uff0c\u8981\u4e48\u662f\u4e00\u4e2a\u8fde\u7eed\u6bb5\u3002\u540c\u65f6\u8fd9\u4e2a\u4e1c\u897f\u5177\u6709\u5355\u8c03\u6027\uff0c\u4e5f\u5c31\u662f\u65b0\u52a0\u5165\u4e00\u4e2a\u6570\u4e00\u5b9a\u4e0d\u4f1a\u4f7f\u5f97\u96c6\u5408\u7684\u5927\u5c0f\u53d8\u5c0f\u3002\n\n\u6240\u4ee5\u8bf4\u53ef\u4ee5\u679a\u4e3e $i \\in [1,n]$\uff0c\u7b97\u4e00\u4e0b $a[1,i]$ \u6709\u591a\u5c11\u4e2a\u4e0d\u540c\u7684\u6570\u5e76\u4e14\u653e\u5230\u6876\u91cc\u3002\u4e00\u4e2a\u6307\u9488 $j$ \u8bb0\u5f55\u5f53\u524d\u679a\u4e3e\u5230 $b$ \u7684\u54ea\u91cc\u3002\u6bcf\u6b21 $a$ \u65b0\u589e\u4e86\u4e00\u4e2a\u6ca1\u51fa\u73b0\u8fc7\u7684\u6570\u7684\u65f6\u5019\uff0c\u8ba9 $j$ \u4e0d\u65ad\u589e\u52a0\u76f4\u5230 $a[1,i]$ \u53bb\u91cd\u540e\u548c $b[1,j]$ \u53bb\u91cd\u540e\u76f8\u7b49\u4e3a\u6b62\u3002\u8fd9\u662f\u8fd9\u4e2a $i$ \u5bf9\u5e94\u7684\u6700\u5c0f\u7684 $j$\u3002\u5982\u679c\u662f\u6700\u5927\u7684 $j$ \u7684\u8bdd\u5c31\u5728\u4e0d\u5f71\u54cd\u7b54\u6848\u7684\u60c5\u51b5\u4e0b\u8ba9 $j$ \u7ee7\u7eed\u589e\u52a0\u5c31\u597d\u4e86\u3002\n\n\u6ce8\u610f\u8981\u5148\u79bb\u6563\u5316\u3002\n\n### Code\uff1a\n\n```c++\n#include <bits/stdc++.h>\nusing namespace std;\nint n, q, x, y, cnt, tot, totb, r, a[200010], b[200010], p[400010], pb[400010], ansl[200010], ansr[200010];\nmap <int, int> mp;\nmap <int, int> :: iterator it;\nint main(){\n\tscanf (\"%d\", &n);\n\tfor (int i=1; i<=n; i++){\n\t\tscanf (\"%d\", &a[i]);\n\t\tmp[a[i]] = 1;\n\t}\n\tfor (int i=1; i<=n; i++){\n\t\tscanf (\"%d\", &b[i]);\n\t\tmp[b[i]] = 1;\n\t}\n\tfor (it=mp.begin(); it!=mp.end(); it++){\n\t\tmp[it->first] = ++cnt;\n\t}\n\tfor (int i=1; i<=n; i++){\n\t\ta[i] = mp[a[i]], b[i] = mp[b[i]];\n\t}\n\tr = 0;\n\tfor (int i=1; i<=n; i++){\n\t\tif (!p[a[i]]) p[a[i]] = 1, tot ++;\n\t\telse{\n\t\t\tansl[i] = ansl[i-1], ansr[i] = ansr[i-1];\n\t\t\tcontinue;\n\t\t}\n\t\twhile (r < n && totb < tot && p[b[r+1]]){\n\t\t\tif (!pb[b[r+1]]) pb[b[r+1]] = 1, totb ++;\n\t\t\tr ++;\n\t\t}\n\t\tif (totb == tot){\n\t\t\tansl[i] = r;\n\t\t\twhile (r < n && pb[b[r+1]]) r ++;\n\t\t\tansr[i] = r;\n\t\t}\n\t}\n\tscanf (\"%d\", &q);\n\tfor (int i=1; i<=q; i++){\n\t\tscanf (\"%d%d\", &x, &y);\n\t\tif (y >= ansl[x] && y <= ansr[x]) puts (\"Yes\");\n\t\telse puts (\"No\");\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1666628367,
        "uid": 399286,
        "name": "\u82cf\u8054\u5c0f\u6e23",
        "ccfLevel": 0,
        "title": "[\u9898\u89e3] [ABC250E] Prefix Equality"
    },
    {
        "content": "# [ABC250E] Prefix Equality\n\n[Luogu ABC250E](https://www.luogu.com.cn/problem/AT_abc250_e)\n\n## Solution\n\n\u770b\u5230\u8981\u5224\u65ad\u4e24\u4e2a\u6570\u5217\u7684\u524d\u7f00\u7ec4\u6210\u7684\u96c6\u5408\u662f\u5426\u76f8\u7b49\uff0c\u4e00\u4e2a\u5f88\u57fa\u7840\u7684\u60f3\u6cd5\u5c31\u662f\u5c06\u4e24\u4e2a\u6570\u5217\u7684\u524d\u7f00\u96c6\u5408\u9884\u5904\u7406\u51fa\u6765\u3002\u4f46\u662f\u5982\u679c\u8981\u5b58\u50a8\u4e0b\u96c6\u5408\uff0c\u5e76\u4e14\u8fd8\u8981\u5224\u65ad\u96c6\u5408\u662f\u5426\u76f8\u7b49\u663e\u7136\u65f6\u95f4\u548c\u7a7a\u95f4\u53cc\u91cd\u7206\u70b8\uff0c\u56e0\u6b64\u8003\u8651\u7528 Hash \u6765\u552f\u4e00\u8868\u793a\u4e00\u4e2a\u96c6\u5408\u3002\u8be2\u95ee\u5c31\u53ef\u4ee5 $\\mathcal O(1)$ \u67e5\u8be2\u4e86\u3002\n\n\u7136\u540e\u601d\u8def\u4e0a\u5c31\u6ca1\u4e1c\u897f\u4e86\u3002\n\n\u8003\u8651\u4ee3\u7801\u600e\u4e48\u5b9e\u73b0\u3002\u53ef\u4ee5\u5f00\u4e00\u4e2a\u6876\u5b58\u50a8\u5f53\u524d\u6709\u54ea\u4e9b\u6570\u5b57\uff0c\u5982\u679c\u4e4b\u524d\u6ca1\u51fa\u73b0\u8fc7\u8fd9\u4e2a\u6570\u5b57\uff0c\u5c31\u628a\u8fd9\u4e2a\u6570\u5b57\u8d21\u732e\u8fdb Hash \u503c\u5185\uff0c\u5426\u5219\u4e0d\u9700\u8981\u8fdb\u884c\u64cd\u4f5c\u3002\u7531\u4e8e\u6570\u636e\u7684\u503c\u57df\u662f $10^9$ \u8fd9\u4e00\u7ea7\u522b\uff0c\u56e0\u6b64\u8981\u4e48\u8fdb\u884c\u79bb\u6563\u5316\uff0c\u8981\u4e48\u7528 `map` \u4ee3\u66ff\u6876\uff0c\u7528\u5feb\u901f\u5e42\u8ba1\u7b97\u5f53\u524d\u7684 Hash \u503c\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n\\log n + q)$\n\n### Code\n\n\u4f7f\u7528 `map` \u4ee3\u66ff\u4e86\u6876\uff0c\u6ca1\u6709\u8fdb\u884c\u79bb\u6563\u5316\u64cd\u4f5c\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconstexpr int _SIZE = 2e5 + 5;\nint n, q, a[_SIZE], b[_SIZE];\nusing ui64 = unsigned long long;\nconst int P = 13331;\nui64 h1[_SIZE], h2[_SIZE];\nui64 Qpow(int x, int y) {\n\tui64 res = 1, base = x;\n\tfor (; y; y >>= 1, base *= base) if (y & 1) res *= base;\n\treturn res;\n}\nmap<int, bool> cnt;\nvoid Calc(int *a, ui64 *h) {\n\tcnt.clear();\n\tfor (int i = 1; i <= n; ++i) {\n\t\th[i] = h[i - 1];\n\t\tif (!cnt.count(a[i]))\n\t\t\tcnt[a[i]] = 1, h[i] += Qpow(P, a[i]);\n\t}\n}\nvoid Solve() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; ++i) cin >> a[i];\n\tfor (int i = 1; i <= n; ++i) cin >> b[i];\n\tCalc(a, h1), Calc(b, h2); cin >> q;\n\twhile (q--) {\n\t\tstatic int x, y; cin >> x >> y;\n\t\tcout << (h1[x] == h2[y] ? \"Yes\" : \"No\") << '\\n';\n\t}\n}\nsigned main() {\n\tios::sync_with_stdio(0);\n\tcin.tie(0); cout.tie(0);\n\tSolve();\n}\n```",
        "postTime": 1676986994,
        "uid": 345225,
        "name": "Hanx16QwQ",
        "ccfLevel": 0,
        "title": "[ABC250E] Prefix Equality"
    },
    {
        "content": "## Solution\n\u8003\u8651\u5982\u4f55\u5224\u65ad $a[1]\\sim a[x]$ \u53bb\u91cd\u540e \u4e0e $b[1]\\sim b[y]$ \u53bb\u91cd\u540e\u76f8\u540c\u3002\n\n1. \u6211\u4eec\u9700\u8981\u4fdd\u8bc1 $a[1]\\sim a[x]$ \u4e0e $b[1]\\sim b[y]$ \u4e2d\u53bb\u91cd\u540e\u5143\u6570\u7684\u4e2a\u6570\u76f8\u7b49\u3002\n2. \u4f46\u8fd9\u662f\u4e0d\u591f\u7684\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4fdd\u8bc1 $a[1]\\sim a[x]$ \u4e2d\u7684\u6bcf\u4e00\u4e2a\u6570\u90fd\u5728 $b[1]\\sim b[y]$ \u4e2d\u51fa\u73b0\u3002\n \n\u8003\u8651\u5982\u4f55\u5b9e\u73b0\u3002\n\n1. \u7b2c\u4e00\u4e2a\u8981\u6c42\u6bd4\u8f83\u597d\u6ee1\u8db3\uff0c\u53ea\u9700\u8981\u7528\u4e00\u4e2a\u6876\u548c\u4e00\u4e2a\u524d\u7f00\u548c\u6570\u7ec4\u8bb0\u5f55\u4e00\u4e0b\u5373\u53ef\u3002(\u524d\u7f00\u548c\u6570\u7ec4\u8bb0\u4e3a $numa$ \u548c $numb$)\n2. \u8003\u8651\u7b2c\u4e8c\u4e2a\u8981\u6c42\uff0c\u6211\u4eec\u5148\u5c06\u4e24\u4e2a\u6570\u7ec4\u79bb\u6563\u5316\u4e00\u4e0b\uff0c\u7528\u4e00\u4e2a $pos$ \u6570\u7ec4\u8bb0\u5f55\u4e00\u4e0b\u6bcf\u4e2a\u6570\u5728 $b$ \u6570\u7ec4\u4e2d\u51fa\u73b0\u7684\u6700\u65e9\u4f4d\u7f6e\u3002\n\n**\u5b9a\u4e49 $f[i]$ \u8868\u793a $a[1]\\sim a[i]$ \u4e2d\u7684\u6bcf\u4e00\u4e2a\u6570\u5728 $b$ \u6570\u7ec4\u4e2d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u6700\u665a\u4f4d\u7f6e\u3002** \n$$f[i]=\\max\\{f[i-1],pos[a[i]]\\}$$\n \n\u8f93\u51fa\u7684\u65f6\u5019\u53ea\u9700\u8981\u5224\u65ad $f[x]\\le y$ \u5373\u53ef\u3002 \n\n## Code\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=4e5+5;\nint n,q,a[N],b[N],c[N],pos[N],f[N];\nint numa[N],numb[N],ta[N],tb[N];\nsigned main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;++i)\n\t\tcin>>a[i],c[i]=a[i];\n\tfor(int i=1;i<=n;++i)\n\t\tcin>>b[i],c[n+i]=b[i];\n\tsort(c+1,c+n+n+1);\n\tint cntl=unique(c+1,c+n+n+1)-c-1;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\ta[i]=lower_bound(c+1,c+cntl+1,a[i])-c;\n\t\tta[a[i]]++;numa[i]=numa[i-1]+(ta[a[i]]==1);\n\t}\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tb[i]=lower_bound(c+1,c+cntl+1,b[i])-c;\n\t\ttb[b[i]]++;numb[i]=numb[i-1]+(tb[b[i]]==1);\n\t\tif(!pos[b[i]])pos[b[i]]=i;\n\t}\n\tfor(int i=1;i<=n;++i)\n\t\tif(!pos[a[i]])f[i]=5e5;\n\t\telse f[i]=max(f[i-1],pos[a[i]]);\t\n\tcin>>q;\t\n\twhile(q--)\n\t{\n\t\tint x,y;cin>>x>>y;\n\t\tif(numa[x]==numb[y]&&f[x]<=y)cout<<\"Yes\\n\";\n\t\telse cout<<\"No\\n\";\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1670730071,
        "uid": 451328,
        "name": "lnwhl",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011[ABC250E] Prefix Equality"
    },
    {
        "content": "\u8003\u8651\u5c06 $A_{1..i}$ \u548c $B_{1..i}$ \u8fdb\u884c\u54c8\u5e0c\u3002  \n\u7531\u4e8e\u96c6\u5408\u7684\u76f8\u7b49\u4e0e\u6570\u7684\u987a\u5e8f\u65e0\u5173\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u4e2a\u4ea4\u6362\u5f8b\u8fd0\u7b97\uff0c\u8003\u8651\u4f7f\u7528\u5f02\u6216\u8fd0\u7b97\u3002  \n\u6784\u9020\u51fa\u7684\u54c8\u5e0c\u51fd\u6570\u4e3a\uff1a\n$$H(S) = \\bigoplus_{s \\in S} f(x)$$\n\uff0c\u5176\u4e2d $f(x)$ \u662f\u4e00\u4e2a\u6570\u5b57\u4ea7\u751f\u6570\u5b57\u7684\u54c8\u5e0c\u51fd\u6570\uff0c\u4e8e\u662f\u6709\n$$H(S \\cup \\{x\\}) = \\left\\{\\begin{matrix}H(S) & x \\in S \\\\ H(S) \\oplus f(x) & x \\notin S\\end{matrix}\\right.$$\n\uff0c\u8003\u8651\u7528 `set` \u7ef4\u62a4\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define F(i, j, k) for (int i = j; i <= k; ++i)\n#define Fi F(i, 1, n)\n#define Fj F(j, 1, n)\n#define int long long\nconst int N = 2e5 + 5;\nconst int M = 1e18 + 3;\nset<int> s, t;\nint a[N], b[N], as[N], bs[N], n, q, x, y;\nint seed = 114514;\nint rand(int MGC)\n{\n    return ((seed << 15) * MGC % M + M) % M;\n}\nsigned main()\n{\n    cin >> n;\n    Fi cin >> a[i];\n    Fi cin >> b[i];\n    Fi if (s.find(a[i]) == s.end())\n    {\n        s.insert(a[i]);\n        as[i] = as[i - 1] ^ rand(a[i]);\n    }\n    else as[i] = as[i - 1];\n    seed = 114514;\n\n    Fi if (t.find(b[i]) == t.end())\n    {\n        t.insert(b[i]);\n        bs[i] = bs[i - 1] ^ rand(b[i]);\n    }\n    else bs[i] = bs[i - 1];\n    cin >> q;\n    F(i, 1, q)\n    {\n        cin >> x >> y;\n        if (as[x] == bs[y])\n            cout << \"Yes\" << endl;\n        else\n            cout << \"No\" << endl;\n    }\n    getchar();\n    getchar();\n}\n```\n",
        "postTime": 1668819094,
        "uid": 360265,
        "name": "lhx1048576",
        "ccfLevel": 6,
        "title": "hash"
    },
    {
        "content": "\u5c3a\u53d6\u6cd5\u3002\n\n\u5047\u8bbe\u76ee\u524d\u9009\u62e9\u4e86 $a$ \u6570\u7ec4\u4e2d\u524d $i$ \u4e2a\u6570\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u5c3a\u53d6\u5f97\u5230\u6ee1\u8db3\u6761\u4ef6\u7684\u533a\u95f4 $[L_i,R_i]$\uff0c\u6ee1\u8db3\u5728 $1$ \u5230\u8fd9\u4e2a\u8fd9\u4e2a\u533a\u95f4\u7684\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e\u4e2d $a_1\\sim a_i$ \u548c $b_1\\sim b_j$\uff0c$j\\in [L_i,R_i]$ \u91cc\u9762\u7684\u6570\u76f8\u7b49\u3002\n\n\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $a_i$ \u76f4\u63a5\u8fdb\u884c\u5224\u65ad\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002",
        "postTime": 1667171496,
        "uid": 674901,
        "name": "liuxuanxi",
        "ccfLevel": 0,
        "title": "ATABC250E"
    },
    {
        "content": "# abc 250 e\n\n[AT \u94fe\u63a5](https://atcoder.jp/contests/abc250/tasks/abc250_e)\n\n[\u6d1b\u8c37\u94fe\u63a5](https://www.luogu.com.cn/problem/AT_abc250_e)\n\n## \u9898\u610f\n\n\u7ed9\u5b9a\u4e24\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a, b$\uff0c\u6709 $q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u7ed9\u51fa $x_i, y_i$\uff0c\u8bf7\u4f60\u56de\u7b54 $a$ \u7684\u524d $x_i$ \u9879\u6240\u6784\u6210\u7684\u96c6\u5408\u4e0e $b$ \u7684\u524d $y_i$ \u9879\u6240\u6784\u6210\u7684\u96c6\u5408\u662f\u5426\u76f8\u540c\u3002\n\n## \u601d\u8def\n\n### \u66b4\u529b\n\n\u6bcf\u6b21\u679a\u4e3e $a$ \u7684\u524d $x_i$ \u4e2a\u5143\u7d20\u548c $b$ \u7684\u524d $y_i$ \u4e2a\u5143\u7d20\uff0c\u7528\u4e24\u4e2a `set` \u7ef4\u62a4\u96c6\u5408\uff0c\u6700\u540e\u6bd4\u8f83\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n ^ 2 \\times \\log n)$\u3002\n\n### \u6b63\u89e3\n\n\u6211\u4eec\u53ef\u4ee5\u5c06\u5148\u9884\u5904\u7406\u51fa $n$ \u4e2a\u533a\u95f4\uff1a\u5bf9\u4e8e $a$ \u7684\u524d $i$ \u9879\u6784\u6210\u7684\u96c6\u5408\uff0c\u5728\u7b2c $i$ \u4e2a\u533a\u95f4\u5185\u7684\u6240\u6709 $j$\uff0c$b$ \u7684\u524d $j$ \u9879\u6240\u6784\u6210\u7684\u96c6\u5408\u90fd\u548c $a$ \u7684\u524d $i$ \u9879\u6784\u6210\u7684\u96c6\u5408\u76f8\u540c\u3002\n\n\u90a3\u4e48\uff0c\u6bcf\u6b21\u8be2\u95ee\u53ea\u9700\u8981\u5224\u65ad $y_i$ \u662f\u5426\u5728\u7b2c $x_i$ \u4e2a\u533a\u95f4\u5185\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u4f46\u662f\uff0c\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u5904\u7406\u51fa\u8fd9\u4e9b\u533a\u95f4\u5462\uff1f\n\n\u53ef\u4ee5\u76f4\u63a5\u53cc\u6307\u9488\u3002\n\n\u4ee4 $a$ \u5e8f\u5217\u4e2d\u7684\u67d0\u4e2a\u524d\u7f00\u6240\u6784\u6210\u7684\u96c6\u5408\u4e3a $S1$\uff0c$b$ \u5e8f\u5217\u4e2d\u7684\u67d0\u4e2a\u524d\u7f00\u6240\u6784\u6210\u7684\u96c6\u5408\u4e3a $S2$\u3002\n\n\u5f88\u660e\u663e\uff0c\u6bcf\u6b21\u904d\u5386\u5230\u4e00\u4e2a $i$\uff0c\u90fd\u9700\u8981\u5c06 $a_i$ \u52a0\u5165 $S1$\uff0c\u800c\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u53ef\u80fd\u4f1a\u6539\u53d8 $S1$\uff0c\u5c31\u5c06 $b$ \u7684\u6307\u9488\u5f80\u540e\u632a\uff0c\u5e76\u4e14\u5c06 $b_j$ \u653e\u8fdb $S2$\uff0c\u524d\u63d0\u662f\uff0c$b_j$ \u5728 $S1$ \u4e2d\u3002\u5f53 $S1$ \u7684\u5927\u5c0f\u4e0e $S2$ \u7684\u5927\u5c0f\u76f8\u7b49\u65f6\uff0c\u4fbf\u53ef\u4ee5\u66f4\u65b0\u533a\u95f4\u4e86\u3002\n\n\u4f46\u662f\uff0c\u5982\u679c\u6ca1\u6709\u6539\u53d8 $S1$\uff0c\u4fbf\u4e0e\u7b2c $i - 1$ \u4e2a\u533a\u95f4\u662f\u4e00\u6837\u7684\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\times \\log n)$\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int N = 2e5 + 10;\n\nint n, q, a[N], b[N], l[N], r[N];\nset<int> s1, s2;\n\nint main() {\n  ios::sync_with_stdio(0), cin.tie(0);\n  cin >> n;\n  for (int i = 1; i <= n; i++) {\n    cin >> a[i];\n  }\n  for (int i = 1; i <= n; i++) {\n    cin >> b[i];\n  }\n  for (int i = 1, j = 1; i <= n; i++) {\n    if (s1.find(a[i]) != s1.end() && s1.size() == s2.size()) {  // \u6ca1\u6709\u6539\u53d8 s1\n      l[i] = l[i - 1], r[i] = r[i - 1];\n    }\n    s1.insert(a[i]);\n    for (; j <= n && s1.find(b[j]) != s1.end(); j++) {\n      s2.insert(b[j]);\n      if (s1.size() == s2.size()) {  // \u66f4\u65b0\u533a\u95f4\n        if (!l[i]) {\n          l[i] = j;\n        }\n        r[i] = j;\n      }\n    }\n  }\n  cin >> q;\n  while (q--) {\n    int x, y;\n    cin >> x >> y;\n    cout << (l[x] <= y && y <= r[x] ? \"Yes\\n\" : \"No\\n\");\n  }\n  return 0;\n}\n```",
        "postTime": 1682092613,
        "uid": 658291,
        "name": "chengning0909",
        "ccfLevel": 4,
        "title": "abc 250 e \u9898\u89e3"
    },
    {
        "content": "# \u601d\u8def\n\n\u5bf9\u4e8e\u8fd9\u79cd\u9898\u76ee\uff0c\u901a\u5e38\u4f1a\u60f3\u5230\u7528\u54c8\u5e0c\u7ef4\u62a4\u3002\n\n\u7531\u4e8e\u96c6\u5408\u76f8\u540c\u4e0e $a_{1 \\sim x}$\uff0c$b_{1 \\sim y}$ \u7684\u987a\u5e8f\u65e0\u5173\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6211\u4eec\u7684\u54c8\u5e0c\u51fd\u6570 $h(x)$ \u5fc5\u5b9a\u9700\u8981\u7528\u4e00\u79cd\u6709\u4ea4\u6362\u5f8b\u7684\u7b26\u53f7\u3002\n\n\u9996\u5148\u60f3\u5230\u7684\u5f53\u7136\u662f\u52a0\u6cd5\uff0c\u4f46\u662f\u4e0d\u592a\u597d\u5b9e\u73b0\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u6570\u592a\u5927\u4e86\uff0c\u4e0d\u56e0\u4f1a\u7206 `unsigned long long`\uff0c\u8fd8\u4f1a\u7206 `__int128`\uff0c\u6240\u4ee5\u4e0d\u597d\u5b9e\u73b0\uff0c\u8003\u8651\u5f02\u6216\u3002\n\n\u6211\u4eec\u9884\u5904\u7406\u51fa\u6211\u4eec\u9700\u8981\u7684 $h(x)$\uff0c\u7136\u540e\u7b97\u51fa $h(x)$ \u7684\u524d\u7f00\u5f02\u6216\u503c $A_i$\uff0c$B_i$\uff0c\u6700\u540e\u5224\u65ad $A_x$ \u662f\u5426\u4e0e $B_y$ \u76f8\u7b49\u5373\u53ef\u3002\n\n# code\n\n```cpp\n#include <bits/stdc++.h>\n#define int unsigned long long\n#define re register\n\nusing namespace std;\n\nconst int N = 2e5 + 10;\nint n,q;\nint arr[N],brr[N],A[N],B[N];\nmap<int,int> hs;\nmap<int,bool> mp;\n\ninline int read(){\n\tint r = 0,w = 1;\n\tchar c = getchar();\n\twhile (c < '0' || c > '9'){\n\t\tif (c == '-') w = -1;\n\t\tc = getchar();\n\t}\n\twhile (c >= '0' && c <= '9'){\n\t\tr = (r << 1) + (r << 3) + (c ^ 48);\n\t\tc = getchar();\n\t}\n\treturn r * w;\n}\n\nsigned main(){\n\tmt19937 rnd(114514);//\u6885\u68ee\u65cb\u8f6c\u7b97\u6cd5 \n\tn = read();\n\tfor (re int i = 1;i <= n;i++){\n\t\tarr[i] = read();\n\t\tif (mp.count(arr[i])) A[i] = A[i - 1];//\u5982\u679c\u51fa\u73b0\u8fc7\uff0c\u5c31\u4e0d\u7ba1 \n\t\telse{//\u5426\u5219\u5904\u7406\u51fa A[i] \n\t\t\tmp[arr[i]] = true;\n\t\t\ths[arr[i]] = rnd();\n\t\t\tA[i] = A[i - 1] ^ hs[arr[i]];\n\t\t}\n\t}\n\tmp.clear();//\u5faa\u73af\u5229\u7528 \n\tfor (re int i = 1;i <= n;i++){\n\t\tbrr[i] = read();\n\t\tif (mp.count(brr[i])) B[i] = B[i - 1];//\u540c\u7406 \n\t\telse{\n\t\t\tmp[brr[i]] = true;\n\t\t\tif (!hs.count(brr[i])) hs[brr[i]] = rnd();//\u907f\u514d\u91cd\u590d\u6c42 hs \n\t\t\tB[i] = B[i - 1] ^ hs[brr[i]];\n\t\t}\n\t}\n\tq = read();\n\twhile (q--){\n\t\tint x,y;\n\t\tx = read();\n\t\ty = read();\n\t\tif (A[x] == B[y]) puts(\"Yes\");\n\t\telse puts(\"No\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1681548779,
        "uid": 383395,
        "name": "WaterSun",
        "ccfLevel": 5,
        "title": "[\u9898\u89e3]AT_abc250_e [ABC250E] Prefix Equality"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/AT_abc250_e)\n\n\u7ed9\u51fa\u4e00\u4e2a\u4e71\u641e\u7684\u65b9\u6cd5\u3002\n\n\u5224\u65ad\u4e24\u4e2a\u6570\u5217\u53bb\u91cd\u540e\u662f\u5426\u76f8\u540c\uff0c\u53ef\u4ee5\u5c06\u4e24\u4e2a\u6570\u5217\u53bb\u91cd\u540e\u7684\u6570\u5b57\u63c9\u6210\u4e00\u56e2\uff0c\u8fd9\u53ef\u4ee5\u7528 hash \u5b9e\u73b0\u3002\n\n\u4ee4 $f(i)$ \u8868\u793a $a$ \u6570\u7ec4\u7b2c $i$ \u4e2a\u6570\u7684 hash \u503c\uff0c\u5219\u6709:\n\n$$\nf(i)=\\begin{cases}\nf(i-1)+a_i^3&v_i=1\\\\\nf(i-1)&v_i=0\n\\end{cases}\n$$\n\n\u5176\u4e2d\uff0c$v_i$ \u8868\u793a\u7684\u662f $a_i$ \u662f\u5426\u662f\u7b2c\u4e00\u6b21\u51fa\u73b0\u5728 $a$ \u6570\u7ec4\u5f53\u4e2d\uff0c\u662f\u5219\u4e3a $1$\uff0c\u5426\u5219\u4e3a $0$\u3002\n\n\u540c\u7406\uff0c$b$ \u6570\u7ec4\u7684 hash \u503c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u540c\u6837\u7684\u65b9\u6cd5\u8ba1\u7b97\u51fa\u6765\u3002\n\n\u7136\u540e\uff0c\u5224\u65ad\u5176 hash \u503c\u662f\u5426\u76f8\u7b49\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define MOD 1000000007\nusing namespace std;\n#define int long long\n#define MAXN 200005\nint n,Q,a[MAXN],b[MAXN],h1[MAXN],h2[MAXN];\nmap<int,bool>mp1,mp2;\nsigned main(){\n    cin>>n;\n    for(int i=1;i<=n;i++){\n        cin>>a[i];\n        if(!mp1[a[i]])\n        \th1[i]=(h1[i-1]+a[i]*a[i]%MOD*a[i]%MOD)%MOD;\n        else h1[i]=h1[i-1];//\u7167\u7740\u516c\u5f0f\u6765\n        mp1[a[i]]=1;//\u6253\u4e0a\u6807\u8bb0\n    }\n    for(int i=1;i<=n;i++){\n        cin>>b[i];\n        if(!mp2[b[i]])\n        \th2[i]=(h2[i-1]+b[i]*b[i]%MOD*b[i]%MOD)%MOD;\n        else h2[i]=h2[i-1];\n        mp2[b[i]]=1;\n    }\n    cin>>Q;\n    while(Q--){\n        int l,r;\n        cin>>l>>r;\n        puts(h1[l]==h2[r]?\"Yes\":\"No\");//\u5224\u65adhash\u503c\u662f\u5426\u76f8\u7b49\n    }\n    return 0;\n}\n```",
        "postTime": 1677995102,
        "uid": 557463,
        "name": "yinpeichu2021",
        "ccfLevel": 5,
        "title": "[ABC250E] Prefix Equality \u9898\u89e3"
    }
]
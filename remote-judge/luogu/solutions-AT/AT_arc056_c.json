[
    {
        "content": "# AT1919\u90e8\u9580\u5206\u3051\n## \u63a8\u9500\u6211\u7684\u535a\u5ba2\n[\u56db\u53f6\u8349&#127808;koala](https://www.cnblogs.com/Shiina-Rikka/p/11574974.html)\n\n\n#### \u5f02\u4e16\u754c\u4f20\u9001\u95e8\uff1a\n[\u6d1b\u8c37AT1919](https://www.luogu.org/problem/AT1919)\n\n[ATcoder056C](https://arc056.contest.atcoder.jp/tasks/arc056_c)\n\n[\u5b98\u65b9\u9898\u89e3](http://arc056.contest.atcoder.jp/data/arc/056/editorial.pdf)\n\n[\u672c\u9898\u89e3\u6765\u81ea](http://mayokoex.hatenablog.com/entry/2016/06/26/004935)\n\n\n## \u9898\u9762\n\n\u9ad8\u6a4b\u304f\u3093\u306e\u3044\u308b\u4f1a\u793e\u306f $N$ \u4eba\u306e\u793e\u54e1\u304b\u3089\u306a\u308b\u3002\u793e\u54e1 $i$ \u3068\u793e\u54e1 $j$ \u306e\u9593\u306b\u306f\u3001\u4fe1\u983c\u5ea6 $w_{i, j}$ \n\u200b\u304c\u5b9a\u307e\u3063\u3066\u3044\u308b\u3002 \u304a\u304b\u3052\u69d8\u3067\u4f1a\u793e\u306f\u3050\u3093\u3050\u3093\u6210\u9577\u3057\u305f\u305f\u3081\u3001 $N$ \u4eba\u3092\u3044\u304f\u3064\u304b\u306e\u90e8\u9580\u306b\u5206\u3051\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u3002\u3053\u3053\u3067\u3001\u90e8\u9580\u5206\u3051\u306e\u30b9\u30b3\u30a2\u3092\u3001(\u90e8\u9580\u306e\u6570)* $K$ - (\u7570\u306a\u308b\u90e8\u9580\u306b\u5c5e\u3059\u308b 2 \u4eba\u306e\u9593\u306e\u4fe1\u983c\u5ea6\u306e\u7dcf\u548c)\u3068\u5b9a\u3081\u308b\u3002 \u30b9\u30b3\u30a2\u306e\u6700\u5927\u5024\u3092\u6c42\u3081\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n$(n \\leq 17)$\n\n##### \u4e00\u53e5\u8bdd\u9898\u610f\n\n$n$\u4e2a\u4eba\u5206\u7ec4\uff0c\u4e0d\u540c\u7ec4\u7684\u4eba\u4e4b\u95f4\u4f1a\u4ea7\u751f\u4ee3\u4ef7\uff0c\u4f7f **$\u7ec4\u6570 * K - \u603b\u4ee3\u4ef7$** \u6700\u5927\u5316\u3002\n\n## \u8fd9\u9898\u548b\u505a\n\n\u8003\u8651\u5230\u8fd9\u4e2a\u9898\u4eba\u6570\u5f88\u5c11\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u72b6\u538b\u3002\n\u72b6\u6001$f[S]$\u8868\u793a\u9009\u62e9\u4e86 $S$\u96c6\u5408\u65f6 \u7684\u72b6\u6001\u6700\u5927\u503c\uff0c\u4ece\u5b83\u7684\u5b50\u96c6\u8fdb\u884c\u8f6c\u79fb\uff0c\u5219\n\n$ f[S] = max(f[S], K + f[S'] + $ \u65b0\u52a0\u5165\u7684\u4eba\u4e0e\u5b50\u96c6\u4e2d\u7684\u4eba\u4ea7\u751f\u7684\u4ee3\u4ef7$)$\n\n\u4f46\u662f\u5982\u679c\u6bcf\u6b21\u8f6c\u79fb\u7684\u65f6\u5019$n^2$\u8ba1\u7b97\u65b0\u52a0\u5165\u7684\u4eba\u4e0e\u5b50\u96c6\u4e2d\u7684\u4eba\u4ea7\u751f\u7684\u4ee3\u4ef7\uff0c\u590d\u6742\u5ea6\u662f\u4e0d\u5141\u8bb8\u7684\u3002\n\n\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u8be5\u96c6\u5408\u5185\u90e8\u6bcf\u4e2a\u4eba\u4e92\u76f8\u7684\u4ee3\u4ef7\uff0c\u800c\u4ed6\u4e0e\u53e6\u4e00\u4e2a\u96c6\u5408\u4eba\u4ea7\u751f\u7684\u4ee3\u4ef7\u5373\u4e3a\u4e24\u4e2a\u96c6\u5408\u5e76\u96c6\u7684\u4ee3\u4ef7\u51cf\u53bb\u4e24\u4e2a\u96c6\u5408\u5185\u90e8\u7684\u4ee3\u4ef7\u3002\n\n> \u8bbe\u96c6\u5408$A, B, C = A \\cup B $ \n\n>$ f[A, B$\u4e4b\u95f4$] = f[C] - f[A] - f[B] $\n\n\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7$O(2^n)$\u9884\u5904\u7406\u5404\u5b50\u96c6\u5185\u90e8\u4ee3\u4ef7\uff0c\u8f6c\u79fb\u65f6O(1)\u8ba1\u7b97\u3002\u7531\u4e8e\u679a\u4e3e\u5b50\u96c6$O(3^n)$, \u6545\u6574\u4f53\u590d\u6742\u5ea6$O(3^n)$, $3^{17} = 129, 140, 163$, \u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u3002\n\n## \u653e\u4ee3\u7801\n\n``` cpp\n#include <bits/stdc++.h>\nnamespace fdata\n{\ninline char nextchar()\n{\n    static const int BS = 1 << 21;\n    static char buf[BS], *st, *ed;\n    if (st == ed)\n        ed = buf + fread(st = buf, 1, BS, stdin);\n    return st == ed ? -1 : *st++;\n}\n#ifdef lky233\n#define nextchar getchar\n#endif\ntemplate <typename T>\ninline T poread()\n{\n    T ret = 0;\n    char ch;\n    while (!isdigit(ch = nextchar()))\n        ;\n\n    do\n        ret = ret * 10 + ch - '0';\n    while (isdigit(ch = nextchar()));\n    return ret;\n}\ntemplate <typename Y>\ninline void poread(Y &ret)\n{\n    ret = 0;\n    char ch;\n    while (!isdigit(ch = nextchar()))\n        ;\n\n    do\n        ret = ret * 10 + ch - '0';\n    while (isdigit(ch = nextchar()));\n}\n#undef nextcar\n} // namespace fdata\nusing fdata::poread;\nusing namespace std;\nconst int MAXN = 18;\nconst long long INF = 1ll << 55;\nlong long w[MAXN][MAXN];\nlong long memo[1 << MAXN];\nlong long f[1 << MAXN];\nint n;\nlong long k;\nint main()\n{\n#ifdef lky233\n    freopen(\"testdata.in\", \"r\", stdin);\n    freopen(\"testdata.out\", \"w\", stdout);\n#endif\n    poread(n);\n    poread(k);\n    for (register int i = 0; i < n; ++i)\n        for (register int j = 0; j < n; ++j)\n            poread(w[i][j]);\n    for (register int s = 0; s < (1 << n); ++s)\n    {\n        for (register int i = 0; i < n; ++i)\n        {\n            for (register int j = i + 1; j < n; ++j)\n            {\n                register int si = ((s >> i) & 1);\n                register int sj = ((s >> j) & 1);\n                if (si & sj)\n                    memo[s] += w[i][j];\n            }\n        }\n    }\n    for (register int i = 0; i <= (1 << n); ++i)\n    {\n        for (register int j = i; j; j = (j - 1) & i)\n        {\n            f[i] = max(f[i], k + f[i ^ j] - memo[i] + memo[j] + memo[i ^ j]);\n        }\n    }\n    cout << f[(1 << n) - 1] << endl;\n}\n```\n\n#### \u8fd8\u6709\u4e00\u4e2a\u5c0f\u63d2\u66f2\n\n\u539f\u9898\u89e3\u679a\u4e3e\u5b50\u96c6\u662f\u8fd9\u4e48\u5199\u7684\n\n``` cpp\nfor (register int i = 0; i <= (1 << n); ++i)\n    {\n        register int j = i;\n        do\n        {\n        } while (j != i);\n    }\n```\n\n\n\u81f3\u4e8e$j$ $!=$ $i$ \u4e3a\u5565\u80fd\u591f\u6210\u529f\u7ed3\u675f\u5faa\u73af\uff0c\u5f53$i = -1 $\u65f6\uff0c\u5b83\u7684~~\u4e8c\u6b21\u5143~~\u4e8c\u8fdb\u5236\u8868\u793a\u662f$11111111...$\uff0c$j$&$i$ \u6070\u597d\u4e3a $j$, \u56e0\u6b64\u6210\u529f\u7ed3\u675f\u5faa\u73af\u3002\n\n\n###### \u672c\u7bc7\u9898\u89e3\u5230\u6b64\u7ed3\u675f\uff0c\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n",
        "postTime": 1569246051,
        "uid": 143186,
        "name": "lky1433223",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 AT1919 \u3010\u90e8\u9580\u5206\u3051\u3011"
    }
]
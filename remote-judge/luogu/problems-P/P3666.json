{
    "description": "Bessie has invented a new programming language, but since there is no compiler yet, she needs your help to actually run her programs.\n\n\nCOWBASIC is a simple, elegant language. It has two key features: addition and MOO loops. Bessie has devised a clever solution to overflow: all addition is done modulo $10^9+7$. But Bessie's real achievement is the MOO loop, which runs a block of code a fixed number of times. MOO loops and addition can, of course, be nested.\n\n\nGiven a COWBASIC program, please help Bessie determine what number it returns.\n\nBessie\u7814\u5236\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u4f46\u662f\u56e0\u4e3a\u8fd8\u6ca1\u6709\u8bbe\u8ba1\u7f16\u8bd1\u5668\u7684\u7f18\u6545\uff0c\u5979\u9700\u8981\u4f60\u7684\u5e2e\u52a9\u6765\u8fd0\u884c\u5979\u7f16\u7684\u7a0b\u5e8f\u3002\n\nCOWBASIC\u8bed\u8a00\u662f\u4e00\u79cd\u7b80\u5355\u7684\u3001\u4f18\u7f8e\u7684\u8bed\u8a00\u3002\u5b83\u6709\u4e24\u4e2a\u5173\u952e\u529f\u80fd\uff1a\u53d8\u91cf\u76f8\u52a0\u548cMOO\u5faa\u73af\u3002\u5bf9\u4e8e\u53ef\u80fd\u7684\u6ea2\u51fa\u95ee\u9898\uff0cBessie\u60f3\u51fa\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\uff0c**\u6240\u6709\u7684\u53d8\u91cf\u52a0\u6cd5\u90fd\u8981\u4ee510^9+7\u4e3a\u6a21**\u3002\u4f46\u662fBessie\u8bbe\u8ba1\u7684COWBASIC\u8bed\u8a00\u4e2d\u771f\u6b63\u6210\u529f\u4e4b\u5904\u662f\u53ef\u4ee5\u8fd0\u884c\u4e00\u6bb5\u56fa\u5b9a\u6570\u91cf\u7684\u4ee3\u7801\u7684MOO\u5faa\u73af\u3002**MOO\u5faa\u73af\u548c\u52a0\u6cd5\u662f\u53ef\u4ee5\u5d4c\u5957\u7684**\u3002\n\n\u7ed9\u4f60\u4e00\u6bb5COWBASIC\u7a0b\u5e8f\uff0c\u8bf7\u4f60\u5e2e\u52a9Bessie\u786e\u5b9a\u8fd9\u4e2a\u7a0b\u5e8f\u6bb5\u5c06\u4f1a\u8fd4\u56de\u4ec0\u4e48\u6570\u503c\u3002\n",
    "inputFormat": "You are given a COWBASIC program at most 100 lines long, with each line being at most 350 characters long. A COWBASIC program is a list of statements.\n\n\n```cpp\n<variable> = <expression>\n\n<literal> MOO {\n<list of statements>\n}\n\nRETURN <variable>\n```\n\n```cpp\n<literal>\n\n<variable>\n\n( <expression> ) + ( <expression> )\n```\n\nThere are three types of statements:\n\nThere are three types of expressions:\n\nA literal is a positive integer at most 100,000.\n\n\nA variable is a string of at most 10 lowercase English letters.\n\n\nIt is guaranteed that no variable will be used or RETURNed before it is defined. It is guaranteed that RETURN will happen exactly once, on the last line of the program.\n\n\n\n\u4f60\u5c06\u4f1a\u5f97\u5230\u4e00\u6bb5**\u6700\u957f\u4e3a100\u884c\u7684COWBASIC\u7a0b\u5e8f\uff0c\u6bcf\u884c\u7684\u957f\u5ea6\u6700\u957f\u4e3a350\u4e2a\u5b57\u7b26**\u3002COWBASIC\u8bed\u8a00\u7684\u7ed3\u6784\u548c\u7c7b\u578b\u5982\u4e0b\u6240\u8ff0\uff1a\n\n\n\u8fd9\u662fCOWBASIC\u8bed\u8a00\u7684\u4e09\u79cd\u4e3b\u8981\u7ed3\u6784\uff1a\n\n\n<\u53d8\u91cf>=<\u8868\u8fbe\u5f0f>          //\u8d4b\u503c\u7ed3\u6784\n\n\n<\u6570\u5b57\uff08\u5faa\u73af\u6b21\u6570\uff09>MOO{          //\u5faa\u73af\u7ed3\u6784\n\n<\u4e00\u7cfb\u5217\u7684\u8868\u8fbe\u5f0f\uff08\u4e5f\u5c31\u662f\u5faa\u73af\u90e8\u5206\uff09>\n\n\n\n}\nRETURN <\u53d8\u91cf>           //\u8f93\u51fa\u7ed3\u6784 \u628areturn\u7684\u53d8\u91cf\u8f93\u51fa\u5c31\u884c\u4e86\n\n\u8fd9\u662fCOWBASIC\u8bed\u8a00\u7684\u4e09\u79cd\u7c7b\u578b\uff08\u6211\u662f\u8fd9\u4e48\u7406\u89e3\u7684\uff09\n\n<\u6570\u5b57> \u8fd9\u4e9b\u6570\u5b57\u662f**\u5c0f\u4e8e100,000\u6b63\u6574\u6570**\n\n<\u53d8\u91cf> \u8fd9\u4e9b\u53d8\u91cf\u540d\u5b57\u662f**\u4e00\u4e3210\u4e2a\u4ee5\u5185\u7684\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd**\n\n(<\u8868\u8fbe\u5f0f>)+(<\u8868\u8fbe\u5f0f>) //**\u6ce8\u610f\uff1a\u8fd9\u662fCOWBASIC\u4e2d\u53d8\u91cf\u52a0\u6cd5\u7684\u8868\u8fbe\u65b9\u6cd5\uff0c\u8be6\u89c1\u6837\u4f8b**\n\n\u6211\u4eec\u4fdd\u8bc1\u8fd4\u56de\u7684\u53d8\u91cf\u662f\u5df2\u5b9a\u4e49\u7684\uff0c**RETURN\uff08\u8f93\u51fa\u7ed3\u6784\uff09\u5c06\u53ea\u4f1a\u51fa\u73b0\u4e00\u6b21\u4e14\u5728\u7a0b\u5e8f\u7684\u6700\u540e\u4e00\u884c**\u3002\n",
    "outputFormat": "Output a single positive integer, giving the value of the RETURNed variable.\n\n\u8f93\u51fa\u8fd4\u56de\u7684\u53d8\u91cf\u503c\uff08\u6709\u7b26\u53f7\u7684\u6574\u5f62\u6570\u5b57\uff09\n\n\u8bf4\u660e\uff1a\n",
    "samples": [
        [
            "x = 1\n10 MOO {\nx = ( x ) + ( x )\n}\nRETURN x",
            "1024"
        ],
        [
            "n = 1\nnsq = 1\n100000 MOO {\n100000 MOO {\nnsq = ( nsq ) + ( ( n ) + ( ( n ) + ( 1 ) ) )\nn = ( n ) + ( 1 )\n}\n}\nRETURN nsq",
            "4761"
        ]
    ],
    "hint": "Scoring\n\n\n\n\nIn 20 percent of all test cases - MOO loops are not nested.\n\nIn another 20 percent of all test cases - The program only has 1 variable. MOO loops can be nested.\n\nIn the remaining test cases, there are no further restrictions.\n\n\u8bc4\u5206\u6807\u51c6\n\n20%\u6570\u636e\uff1aMOO\u5faa\u73af\u4e0d\u5d4c\u5957\n\n\u53e6\u591620%\u6570\u636e\uff1a\u7a0b\u5e8f\u53ea\u6709\u4e00\u4e2a\u53d8\u91cf\uff0cMOO\u5faa\u73af\u53ef\u5d4c\u5957\n\n\u5176\u4ed6\u6570\u636e\u6ca1\u6709\u591a\u4f59\u9650\u5236\uff08\u5373\u6700\u957f100\u884c\uff0c\u6bcf\u884c\u6700\u957f350\u5b57\u7b26\uff09\n\n\n\u611f\u8c22@psk2016  \u63d0\u4f9b\u7684\u7ffb\u8bd1\n"
}
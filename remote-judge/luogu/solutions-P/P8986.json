[
    {
        "content": "\u8bfb\u9898\u9898\uff0c\u5efa\u8bae\u8bc4\u9ec4/\u7eff\u3002\n\n\u9996\u5148\u7b80\u5316\u4e00\u4e0b\u9898\u610f\uff1a\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$\uff0c\u4e24\u4e2a\u6574\u6570 $l,r$\uff0c\u4f60\u9700\u8981\u627e\u5230\u4e00\u5bf9 $(x,y)$ \u6ee1\u8db3 $x <l,y>r$ \u4e14\u4e0d\u5b58\u5728 $(x',y') \\ne (x,y),a_{x'}=a_x,a_{y'}=a_y$ \u4e14 $y-x+1$ \u6700\u5c0f\u3002\u8f93\u51fa\u6700\u5c0f\u7684 $y-x+1$\u3002\n\n\u8003\u8651\u627e\u5230\u4e00\u4e2a\u66f4\u597d\u7684\u5145\u8981\u6761\u4ef6\u3002\u4e0d\u96be\u53d1\u73b0 $(x,y)$ \u5408\u6cd5\u5f53\u4e14\u4ec5\u5f53\u6ee1\u8db3\u5982\u4e0b\u6240\u6709\u6761\u4ef6\uff1a\n\n- $\\forall i <x.a_i \\ne a_x$\u3002\n\n- $\\forall j>y,a_j \\ne a_y$\u3002\n\n- \u5982\u679c\u5b58\u5728\u4e00\u4e2a\u6700\u5c0f\u7684 $x'>x$ \u4e14 $a_{x'}=a_x$\uff0c\u90a3\u4e48 $x'>y$\u3002\n\n- \u5982\u679c\u5b58\u5728\u4e00\u4e2a\u6700\u5927\u7684 $y'<y$ \u4e14 $a_{y'}=a_y$\uff0c\u90a3\u4e48 $y'<x$\u3002\n\n\u8bc1\u660e\uff1a\u53ef\u4ee5\u901a\u8fc7\u53cd\u8bc1\u6cd5\u8bc1\u660e\uff0c\u4efb\u610f\u4e00\u4e2a\u4e0d\u6ee1\u8db3\u90a3\u8fd9\u4e2a\u6570\u5bf9\u90fd\u4e0d\u5408\u6cd5\u3002\n\n\u8003\u8651\u679a\u4e3e $x$\u3002\u8bb0\u5f55 $nxt_i$ \u8868\u793a $a_i$ \u5728 $i$ \u540e\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u6ca1\u6709\u5219\u8bb0\u4e3a $n+1$\uff1b$lst_i$ \u8bb0\u5f55 $a_i$ \u5728 $i$ \u4e4b\u524d\u7b2c\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u6ca1\u6709\u5219\u8bb0\u4e3a $0$\u3002\u524d\u4e24\u4e2a\u6761\u4ef6\u53ef\u4ee5\u7528\u8fd9\u4e24\u4e2a\u6570\u7ec4\u6765\u5224\u65ad\u3002\u5bf9\u4e8e\u4e00\u4e2a $x$\uff0c\u6211\u4eec\u628a\u6240\u6709\u6ee1\u8db3 $y>r,lst_y<x$ \u7684 $y$ \u653e\u8fdb\u4e00\u4e2a set \u91cc\u9762\uff0c\u67e5\u8be2\u7684\u65f6\u5019\u4e8c\u5206 set \u91cc\u9762\u7b2c\u4e00\u4e2a $>r$ \u7684\u503c\uff0c\u5224\u65ad\u5b83\u662f\u5426 $<nxt_x$ \u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\log n)$\u3002\n\n### Code\uff1a\n\n```c++\n#include <bits/stdc++.h>\nusing namespace std;\nint n, l, r, mn=1e9, a[1000010], nxt[1000010], lst[1000010], p[1000010], b[1000010];\nset <int> s;\nset <int> :: iterator it;\nint main(){\n\tscanf (\"%d%d%d\", &n, &l, &r);\n\tfor (int i=1; i<=n; i++){\n\t\tscanf (\"%d\", &a[i]);\n\t}\n\tfor (int i=1; i<=n; i++){\n\t\tlst[i] = p[a[i]];\n\t\tp[a[i]] = i;\n\t}\n\tfor (int i=1; i<=n; i++) p[a[i]] = n+1;\n\tfor (int i=n; i>=1; i--){\n\t\tnxt[i] = p[a[i]];\n\t\tp[a[i]] = i;\n\t\tif (i > r && nxt[i] == n+1 && lst[i] < l){\n\t\t\tif (lst[i] == 0) s.insert(i);\n\t\t\telse b[lst[i]] = i;\n\t\t}\n\t}\n\tfor (int i=1; i<l; i++){\n\t\tif (lst[i] == 0 && nxt[i] > r){\n\t\t\tit = s.lower_bound(r);\n\t\t\tif (it != s.end() && *it <= nxt[i]) mn = min(mn, *it - i + 1);\n\t\t}\n\t\tif (b[i]) s.insert(b[i]);\n\t}\n\tprintf (\"%d\\n\", mn == 1e9 ? -1 : mn);\n\treturn 0;\n}\n```",
        "postTime": 1675441375,
        "uid": 399286,
        "name": "\u82cf\u8054\u5c0f\u6e23",
        "ccfLevel": 0,
        "title": "[\u9898\u89e3] P8986 [\u5317\u5927\u96c6\u8bad 2021] \u57fa\u56e0\u7f16\u8f91"
    },
    {
        "content": "\u96be\u70b9\u5728\u8bfb\u9898\u3002\n\n\u8003\u8651\u5bf9\u4e8e\u4e00\u4e2a\u4e0d\u5408\u6cd5\u7684\u70b9\u5bf9 $(i,j)$\uff0c\u6839\u636e\u9898\u610f\uff0c\u4e00\u5b9a\u5b58\u5728 $(i',j')$ \u6ee1\u8db3 $a_i=a_{i'},a_j=a_{j'}$\u3002\u5bb9\u6613\u53d1\u73b0\uff0c\u5982\u679c\u94a6\u5b9a $i'=i$ **\u6216** $j'=j$\uff0c\u548c\u539f\u6761\u4ef6\u662f\u7b49\u4ef7\u7684\u3002\n\n\u56e0\u6b64\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u5bf9 $(i,j)$\uff0c\u7ea6\u675f\u5c31\u53ef\u4ee5\u5199\u6210\u8fd9\u4e2a\u6837\u5b50\uff1a\n\n- \u94a6\u5b9a $i=i':$ \u4e0d\u5b58\u5728 $k>i$ \u6ee1\u8db3 $a_k=a_j$\u3002\n\n- \u94a6\u5b9a $j=j':$ \u4e0d\u5b58\u5728 $k<j$ \u6ee1\u8db3 $a_k=a_i$\u3002\n\n\u53d1\u73b0\u5982\u679c\u4ece\u5927\u5230\u5c0f\u679a\u4e3e $i$\uff0c\u90a3\u4e48\u53ef\u80fd\u7684 $j$ \u7684\u6570\u91cf\u662f\u53ea\u589e\u4e0d\u51cf\u7684\u3002\u53c8\u56e0\u4e3a\u53ea\u5173\u5fc3\u6700\u5c0f\u7684 $j$\uff0c\u6240\u4ee5\u76f4\u63a5\u5f00\u4e2a\u53cc\u7aef\u961f\u5217\u5c31\u884c\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define il inline\nusing namespace std;\nconst int maxn=1000010;\nconst int inf=1<<30;\nil int read(){\n\tint x=0;\n\tchar c=getchar();\n\tfor(;!(c>='0'&&c<='9');c=getchar());\n\tfor(;c>='0'&&c<='9';c=getchar())\n\t\tx=(x<<1)+(x<<3)+c-'0';\n\treturn x;\n}\nil void chkmin(int &x,int y){if(y<x)x=y;}\ndeque<int>q;\nint L,R,n,ans,Mn;\nint a[maxn],tap1[maxn],tap2[maxn];\nint nxt[maxn],lst[maxn];\nbool vis[maxn];\nint main(){\n//\tfreopen(\"a.txt\",\"r\",stdin);\n\tn=read(),L=read(),R=read();\n\tfor(int i=1;i<=n;i++) a[i]=read();\n\tfor(int i=1;i<=n;i++)\n\t\tlst[i]=tap1[a[i]],tap1[a[i]]=i;\n\tfor(int i=n;i;i--)\n\t\tnxt[i]=tap2[a[i]],tap2[a[i]]=i;\n\tfor(int i=R+1;i<=n;i++)\n\t\tif(!nxt[i]&&(!lst[i]||lst[i]<L)) q.push_back(i);\n\tint Mn=inf;\n\tfor(int i=L-1;i;i--){\n\t\tvis[nxt[i]]=1;\n\t\twhile(!q.empty()&&vis[q.front()]) q.pop_front();\n\t\tif(!q.empty()&&(!nxt[i]||q.front()<nxt[i])&&!lst[i])\n\t\t\tchkmin(Mn,q.front()-i+1);\n\t}printf(\"%d\\n\",Mn==inf?-1:Mn);\n\treturn 0;\n}\n```",
        "postTime": 1679453495,
        "uid": 288716,
        "name": "lzqy_",
        "ccfLevel": 7,
        "title": "P8986 [\u5317\u5927\u96c6\u8bad 2021] \u57fa\u56e0\u7f16\u8f91 \u9898\u89e3"
    }
]
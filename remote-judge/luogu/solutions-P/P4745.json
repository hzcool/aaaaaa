[
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u5f20 $n$ \u4e2a\u70b9\uff0c $m$ \u6761\u8fb9\u7684\u65e0\u8fb9\u6743\u7684\u65e0\u5411\u56fe\u3002\u6709\u4e00\u4eba\u4ece $1$ \u53f7\u70b9\u51fa\u53d1\uff0c\u53ef\u4ee5\u968f\u673a\u5411\u4e00\u4e2a\u548c\u5f53\u524d\u76f4\u63a5\u76f8\u8fde\u7684\u70b9\u8d70\u53bb\uff0c\u82b1\u8d39 $1$ \u7684\u4ee3\u4ef7\uff1b\u4e5f\u53ef\u4ee5\u4e0d\u52a8\uff0c\u91cd\u65b0\u968f\u673a\u4e00\u4e2a\u70b9\uff0c\u4e5f\u82b1\u8d39 $1$ \u7684\u4ee3\u4ef7\u3002\u6c42\u5230\u8fbe $n$ \u70b9\u65f6\u7684\u6700\u5c0f\u603b\u82b1\u8d39\u3002\u7b54\u6848\u56db\u820d\u4e94\u5165\u4fdd\u7559 $6$ \u4f4d\u5c0f\u6570\u3002\n\n## \u89e3\u6cd5\n\n\u6839\u636e\u671f\u671b $dp$ \u7684\u4e00\u822c\u8bbe\u8ba1\u65b9\u6cd5\uff0c\u56e0\u4e3a\u53ea\u6709\u4e00\u4e2a\u7ec8\u70b9\uff0c\u4e14\u72b6\u6001\u5df2\u77e5\uff08\u671f\u671b\u82b1\u8d39\u4e3a $0$ \uff09\uff0c\u56e0\u6b64\u8003\u8651\u9006\u63a8\u3002\n\n\u81ea\u7136\u5730\uff0c\u8bbe $f_x$ \u8868\u793a\u70b9 $x$ \u5230\u7ec8\u70b9\u7684\u671f\u671b\u82b1\u8d39\u3002\u7528 $E$ \u8868\u793a\u8fb9\u96c6\uff0c $deg_x$ \u8868\u793a $x$ \u70b9\u7684\u5ea6\u6570\uff0c\u5219\u6709 $f_x=\\frac{ \\sum \\min \\{ f_x,f_y \\} }{deg_x}+1$ \uff08\u8fb9 $(x,y)$ \u5728 $E$ \u5185\uff09\u3002\n\n\u90a3\u4e48\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u70b9 $x$ \u6765\u8bf4\uff0c\u80fd\u5bf9\u5b83\u7684\u671f\u671b\u4ea7\u751f\u8d21\u732e\u7684\u76f8\u90bb\u7684\u70b9 $y$ \u5fc5\u7136\u6709 $f_y<f_x$ \u3002\n\n\u4e00\u5f00\u59cb\u4e0d\u59a8\u4ee4\u6240\u6709\u7684 $x$ \u70b9\u5728\u8ba1\u7b97 $ \\min \\{ f_x,f_y \\}$ \u65f6\u90fd\u4e3a $f_x$ \uff08\u4e0b\u6587\u4f1a\u8bc1\u660e\u786e\u5b9e\u53ea\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff09\u3002\n\n\u5047\u8bbe\u8fd9\u6837\u7684 $y$ \u70b9\u6709 $cnt_x$ \u4e2a\uff0c\u5219\u6709 $f_x=\\frac{ \\sum f_y}{deg_x}+ \\frac{(deg_x-cnt_x) \\times f_x}{deg_x}+1=\\frac{ \\sum f_y}{deg_x}+(1- \\frac{cnt_x}{deg_x} ) \\times f_x+1$ \uff08\u8fb9 $(x,y)$ \u5728 $E$ \u5185\u4e14 $f_y<f_x$ \uff09\u3002\n\n\u56e0\u6b64\uff0c\u679c\u65ad\u6c42\u51fa $ \\sum f_y $ \uff08\u8fb9 $(x,y)$ \u5728 $E$ \u5185\u4e14 $f_y<f_x$ \uff09\uff0c\u8bb0\u4e3a $sum_x$ \uff0c\u5219 $f_x=\\frac{sum_x}{deg_x}+(1- \\frac{cnt_x}{deg_x} ) \\times f_x+1$ \uff0c\u5316\u7b80\u5f97 $f_x= \\frac{deg_x+sum_x}{cnt_x}$ \u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u76f8\u8fde\u7684 $x,y$ \u4e24\u70b9\u6ee1\u8db3 $f_y<f_x$ \uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528 $f_y$ \u6765\u66f4\u65b0 $f_x$ \u7684\u503c\u3002\n\n\u662f\u4e0d\u662f\u5f88\u50cf\u5806\u4f18\u5316\u7684 $dijkstra$ \u7684\u677e\u5f1b\u64cd\u4f5c\u5462\uff1f\u65f6\u95f4\u590d\u6742\u5ea6\u4e0e\u5806\u4f18\u5316\u7684 $dijkstra$ \u76f8\u540c\uff0c\u4e3a $O((m+n)logn)$ \u3002\n\n##  $trick$ \n\n$1.$ \u5229\u7528 $f_y$ \u6765\u66f4\u65b0 $f_x$ \u7684\u503c\u7684\u7b97\u6cd5\u6b63\u786e\u6027\u8bc1\u660e\uff1a\n\u8bbe\u66f4\u65b0\u540e\u7684 $x$ \u70b9\u7684 $f$ \u503c\u4e3a $f_x'$ \uff0c $f_x-f_y=\\Delta$ \uff08\u663e\u7136 $\\Delta>0$ \uff09\u3002\n\n\u7531\u4e0a\u6587\u63a8\u51fa\u7684\u5f0f\u5b50\u5f97 $f_x= \\frac{deg_x+sum_x}{cnt_x}$ \uff0c\u66f4\u65b0\u540e\u6709 $f_x'= \\frac{deg_x+sum_x+f_y}{cnt_x+1}$ \uff0c\u4e24\u8005\u76f8\u51cf\u5e76\u5316\u7b80\u5f97 $f_x-f_x'=\\frac{\\Delta}{cnt_x+1}$ \uff0c\u5219 $f_x-f_x'=\\frac{f_x-f_y}{cnt_x+1}$ \uff0c\u5373 $0<f_x-f_x'<f_x-f_y$ \uff0c\u4e5f\u5373 $f_x>f_x'>f_y$ \u3002\n\n\u56e0\u6b64\u6bcf\u4e00\u6b21\u677e\u5f1b\u64cd\u4f5c\u4e0d\u4f1a\u4f7f\u5f97 $f_x$ \u53d8\u5927\uff0c\u4e5f\u4e0d\u4f1a\u4f7f\u5f97\u5176\u5c0f\u4e8e $f_y$ \u3002\u8bc1\u6bd5\u3002\n\n$2.$ \u4e00\u4e2a\u975e\u5e38\u7528\u4e0d\u7ecf\u5178\u5957\u8def\uff1a\u5bf9\u4e8e\u786e\u5b9a\u7684\u521d\u59cb\u72b6\u6001\u4ec5\u6709\u6781\u5c11\u6570\uff08\u5927\u591a\u6570\u65f6\u5019\u4ec5\u6709\u4e00\u4e2a\uff09\uff0c\u5176\u4f59\u7684\u72b6\u6001\u4e0e\u76f8\u90bb\u7684\u90e8\u5206\uff08\u5927\u591a\u6570\u65f6\u5019\u662f\u76f8\u90bb\u7684\u70b9\uff09\u6709\u5173\u7684dp\uff0c\u8003\u8651\uff08\u653e\u5230\u56fe\u4e0a\uff09\u4ee5\u6700\u77ed\u8def\u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u79fb\u3002\n\n## \u7ec6\u8282\n\n$1.$ \u8bf7\u6ce8\u610f\u5806\u7684\u7b2c\u4e00\u7ef4\u6570\u636e\u7c7b\u578b\u662f $double$ \u3002\n\n$2.$ \u8bf7\u6ce8\u610f\u672c\u9898\u662f\u65e0\u5411\u56fe\uff0c\u8981\u53cc\u5411\u5efa\u8fb9\u3001\u53cc\u5411\u8bb0\u5ea6\u6570\u3002\n\n$3.$ \u8bf7\u7279\u522b\u6ce8\u610f\u6807\u8bb0\u6570\u7ec4\u7684\u4f7f\u7528\u548c\u5224\u65ad\uff1a\u6bcf\u4e2a\u70b9\u5728\u81ea\u5df1\u66f4\u65b0\u5b8c\u6240\u6709\u7684\u70b9\u540e\u5c31\u4e0d\u80fd\u518d\u88ab\u66f4\u65b0\uff08\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f\u80fd\u8fbe\u5230\u7684\u6700\u5c0f\u7684\u503c\u4e86\uff09\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read()\n{\n\tint ret=0,f=1;\n\tchar ch=getchar();\n\twhile(ch>'9'||ch<'0')\n\t{\n\t\tif(ch=='-')\n\t\t\tf=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tret=(ret<<1)+(ret<<3)+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn ret*f;\n}\nint n,m,u,v,w;\nint num,head[600005],deg[300005],cnt[300005];\ndouble f[300005],sum[300005];\nbool vis[300005];\npriority_queue<pair<double,int> > q;\nstruct edge\n{\n\tint ver,nxt;\n}e[600005];\ninline void adde(int u,int v)\n{\n\te[++num].ver=v;\n\te[num].nxt=head[u];\n\thead[u]=num;\n}\ninline void dijkstra()\n{\n\tq.push(make_pair(0,n));\n\twhile(!q.empty())\n\t{\n\t\tint x=q.top().second;\n\t\tq.pop();\n\t\tif(vis[x])\n\t\t\tcontinue;\n\t\tvis[x]=1;\n\t\tfor(register int i=head[x];i;i=e[i].nxt)\n\t\t{\n\t\t\tint y=e[i].ver;\n\t\t\tif(vis[y])\n\t\t\t\tcontinue;\n\t\t\tcnt[y]++;\n\t\t\tsum[y]+=f[x];\n\t\t\tf[y]=(deg[y]+sum[y])/cnt[y];\n\t\t\tq.push(make_pair(-f[y],y));\n\t\t}\n\t}\n}\nint main()\n{\n\tn=read();\n\tm=read();\n\tfor(register int i=1;i<=m;i++)\n\t{\n\t\tu=read();\n\t\tv=read();\n\t\tadde(u,v);\n\t\tadde(v,u);\n\t\tdeg[u]++;\n\t\tdeg[v]++;\n\t}\n\tdijkstra();\n\tprintf(\"%0.7lf\\n\",f[1]);\n\treturn 0;\n}\n```",
        "postTime": 1572270174,
        "uid": 108560,
        "name": "Peter0701",
        "ccfLevel": 6,
        "title": "P4745 \u9898\u89e3"
    },
    {
        "content": "Dijkstra+\u671f\u671bDP\u3002\n\n\u8bbe$d_u$\u4e3a\u8282\u70b9$u$\u7684\u5ea6\u6570\uff0c$f_u$\u4e3a\u4ece$u$\u5230$n$\u7684\u671f\u671b\u6700\u5c0f\u65f6\u95f4\uff08\u6ce8\u610f\uff1a\u662f\u5012\u5e8f\u8fdb\u884c\u8f6c\u79fb\uff09\uff0c\u663e\u7136\u6709\uff1a\n\n$$f_u=1+\\frac{1}{d_u}\\sum_{(u,v)\\in E}min(f_u,f_v)$$\n\n\u5e94\u6309$f$\u4ece\u5c0f\u5230\u5927\u4f9d\u6b21\u786e\u5b9a\u3002\n\n\u8bb0$c_u$\u4e3a\u4e0e$u$\u76f8\u90bb\u7684\u5df2\u7ecf\u786e\u5b9a\u7684\u70b9\u7684\u4e2a\u6570\uff0c\u5219\u6709\uff1a\n\n$$f_u=1+(1-\\frac{c_u}{d_u})f_u+\\frac{1}{d_u}\\sum_{(u,v)\\in E,f_v<f_u}f_v$$\n\n\u5373\uff1a\n\n$$f_u=\\frac{d_u+\\sum_{(u,v)\\in E,f_v<f_u}f_v}{c_u}$$\n\n\u56fe\u4e0a\u6c42\u6700\u5c0f\u503c\uff0c\u8003\u8651Dijstra\u6765\u5b9e\u73b0\u8f6c\u79fb\u3002\n\n\u5373\u6211\u4eec\u6bcf\u6b21\u4ece\u8fd8\u672a\u786e\u5b9a$f$\u7684\u70b9\u4e2d\u9009\u53d6\u62e5\u6709\u6700\u5c0f$f$\u7684\u70b9$u$\uff0c$f_u$\u786e\u5b9a\uff0c\u518d\u7528$f_u$\u6765\u66f4\u65b0\u4e0e$u$\u76f8\u90bb\u7684\u70b9\u3002\n\n\u4e0b\u9762\u7ed9\u51fa\u4e86\u4e0a\u9762\u7684\u8f6c\u79fb\u53ef\u4ee5\u901a\u8fc7Dijkstra\u6765\u5b9e\u73b0\u8f6c\u79fb\u7684\u8bc1\u660e\uff1a\n\n\u8bbe\u66f4\u65b0\u4e4b\u540e\u5f97\u5230$f_{v^{'}}$\uff0c\u5c06$f_v$\u548c$f_{v^{'}}$\u4ee3\u5165\u4e0a\u9762\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u53ef\u4ee5\u5f97\u5230$f_v-f_{v^{'}}=\\frac{f_v-f_u}{c_v+1}$\uff0c\u6240\u4ee5$0<f_v-f_{v^{'}}<f_v-f_u$\uff0c\u5373$f_v>f_{v^{'}}>f_u$\u3002\n\n\u56e0\u4e3aDijkstra\u662f\u6309\u4ece\u5c0f\u5230\u5927\u4f9d\u6b21\u786e\u5b9a\u7684\uff0c\u6240\u4ee5\u8fd9\u79cd\u8f6c\u79fb\u662f\u6309$f$\u4ece\u5c0f\u5230\u5927\u4f9d\u6b21\u786e\u5b9a\u7684\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(mlogm)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=3e5+5;\nint fr[N],ne[N+N],t[N+N],c,b[N],n;\ndouble f[N];\nbool v[N];\npriority_queue<pair<double,int> >q;\nvoid add(int a,int b)\n{\n\tne[++c]=fr[a];\n\tfr[a]=c;\n\tt[c]=b;\n}\nvoid dj()\n{\n\tint u;\n\tf[n]=0;\n\tb[n]=1;\n\tq.push(pair<double,int>(0,n));\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tdo\n\t\t{\n\t\t\tif(q.empty())\n\t\t\t\treturn;\n\t\t\tu=q.top().second;\n\t\t\tq.pop();\n\t\t}while(v[u]);\n\t\tv[u]=1;\n\t\tfor(int j=fr[u];j;j=ne[j])\n\t\t\tif(!v[t[j]])\n\t\t\t{\n\t\t\t\tb[t[j]]++;\n\t\t\t\tf[t[j]]+=f[u]/(double)b[u];\n\t\t\t\tq.push(pair<double,int>(-f[t[j]]/(double)b[t[j]],t[j]));\n\t\t\t}\n\t}\n}\nint main()\n{\n\tint m,a,h;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%d%d\",&a,&h);\n\t\tadd(a,h);\n\t\tadd(h,a);\n\t\tf[a]++;\n\t\tf[h]++;\n\t}\n\tdj();\n\tprintf(\"%.10lf\",f[1]/(double)b[1]);\n}\n```",
        "postTime": 1565795115,
        "uid": 138349,
        "name": "\u94f6\u7ffc\u7684\u9b54\u672f\u5e08",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4745 \u3010[CERC2017]Gambling Guide\u3011"
    },
    {
        "content": "## Start\n\u975e\u5e38\u663e\u7136\u7684\uff0c\u6700\u77ed\u8def + \u671f\u671b\u3002\n\n\u671f\u671b\u4e00\u822c\u7528\u671f\u671b $\\text{dp}$ \u6c42\u89e3\uff0c\u8fd9\u91cc\u653e\u5230\u56fe\u4e0a\u5904\u7406\u4e5f\u662f\u76f8\u4f3c\u7684\uff0c\u4ece\u7ec8\u70b9\uff08$n$\uff09\u5411\u8d77\u70b9\uff08$1$\uff09\u5904\u7406\u3002  \n&nbsp;\n## \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n\n\u5047\u8bbe\u5f53\u524d\u5904\u7406\u5230\u70b9 $p$\uff0c$p$ \u7684\u671f\u671b\u4e3a $f_p$\u3002\n\n\u8003\u8651\u4e0e $p$ \u6709\u8fb9\u76f8\u8fde\u7684\u4efb\u610f\u4e00\u70b9 $q$\uff0c\u5982\u679c $f_q<f_p$\n\uff0c\u90a3\u4e48\u70b9 $q$ \u80af\u5b9a\u4f1a\u5f71\u54cd\u70b9 $p$ \u7684\u7b54\u6848\u3002\n\n\u5982\u4f55\u5f71\u54cd\uff1f\u5728\u8d70\u5230\u70b9 $p$ \u65f6\u4e0b\u4e00\u6b65\u8d70\u70b9 $q$\u3002\n\n\u5f53\u4ece\u70b9 $n$ \u5f00\u59cb\u7684\u904d\u5386\u904d\u5386\u5230\u70b9 $p$ \u65f6\uff0c\u5df2\u7ecf\u904d\u5386\u8fc7\u7684\u70b9\u7684 $f$ \u4e00\u5b9a\u5c0f\u4e8e $f_p$\uff0c\u672a\u904d\u5386\u7684\u70b9 $f$ \u4e00\u5b9a\u5927\u4e8e $f_p$\u3002\n\n\u4e3a\u4ec0\u4e48\u6211\u4eec\u53ef\u4ee5\u4fdd\u8bc1\u8fd9\u4e2a\u6027\u8d28\uff1f\u56e0\u4e3a\u6211\u4eec\u8bd5\u7740\u8003\u8651\u6700\u77ed\u8def\uff08$\\text{Dijkstra}$\uff09\uff0c\u4f1a\u53d1\u73b0\u6bcf\u4e00\u4e2a\u5df2\u7ecf\u904d\u5386\u8fc7\u7684\u70b9\u4e0e\u6839\u7684\u8ddd\u79bb\u4e00\u5b9a\u5c0f\u4e8e\u4e00\u4e2a\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u70b9\uff0c\u8fd9\u662f\u5b83\u7684\u6b63\u786e\u6027\u3002\n\n\u5047\u8bbe\u6240\u6709 $f_i<f_p(1\\leqslant i\\leqslant n)$ \u4e2d $i$ \u6784\u6210\u7684\u70b9\u96c6\u79f0\u4e3a $S$\uff0c\u70b9\u96c6\u5927\u5c0f\u4e3a $c$\u3002\n\n\u90a3\u4e48\u8d70\u5230\u70b9 $p$ \u65f6\u80af\u5b9a\u8d70 $S$ \u4e2d\u7684\u70b9\u662f\u6700\u4f18\u7684\u3002\n\n\u82e5\u6709 $k$ \u4e2a\u70b9\u4e0e $p$ \u76f8\u8fde\uff0c\u90a3\u4e48\u62bd\u5230 $S$ \u4e2d\u7684\u70b9\u7684\u6982\u7387\u662f $\\frac{c}{k}$\u3002\u5176\u4e2d\u6bcf\u4e00\u4e2a\u70b9\u7684\u671f\u671b\u4e3a $\\sum_{i\\in S}f_i\\div c$\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u5f0f\u5b50\uff1a\n$$\n\\begin{aligned}\nf_p&=\\frac{c}{k}\\sum_{i\\in S}\\frac{f_i}{c}+\\frac{k-c}{k}\\times f_p+1\\\\\nkf_p&=\\sum_{i\\in S}f_i+(k-c)f_p+k\\\\\ncf_p&=\\sum_{i\\in S}f_i+k\\\\\nf_p&=\\frac{\\sum_{i\\in S}f_i+k}{c}\n\\end{aligned}\n$$\n\n\u5176\u4e2d $1$ \u662f\u5230\u4e86\u70b9 $p$ \u4e70\u7684\u7968\u7b2c\u4e00\u5f20\u7968\uff08\u5fc5\u4e70\u7684\uff09\uff0c$\\frac{c}{k}\\sum_{i\\in S}\\frac{f_i}{c}$ \u662f\u8d70\u5230 $S$ \u4e2d\u7684\u70b9\u7684\u671f\u671b\uff0c$\\frac{k-c}{k}\\times f_p$ \u662f\u91cd\u65b0\u4e70\u7968\u7684\u671f\u671b\u3002\u4e09\u4e2a\u671f\u671b\u7d2f\u52a0\u5c31\u662f $f_p$ \u3002  \n&nbsp;\n## \u6700\u77ed\u8def\n\u8003\u8651\u6211\u4eec\u8981\u6c42\u7684\u662f $\\min f_1$\u3002\u4f17\u591a\u6700\u77ed\u8def\u4e2d\uff0c$\\text{Dijkstra}$ \u5806\u4f18\u5316\u662f\u6bd4\u8f83\u5408\u9002\u7684\u3002\u5199\u4e00\u4e2a\u5927\u6839\u5806\u7ef4\u62a4\u6bcf\u4e00\u4e2a\u5df2\u5904\u7406\u70b9\u7684 $f$ \u503c\u3002\n\n\u5c06\u5806\u4f18\u5316 $\\text{Dijkstra}$ \u62ff\u6765\u8fdb\u884c\u4e00\u4e9b\u4fee\u6539\uff0c\u7528 $f$ \u4ee3\u66ff\u6700\u77ed\u8def\u5efa\u5927\u6839\u5806\u3002\u5b9e\u8d28\u4e0a $f$ \u4e0e\u6700\u77ed\u8def\u662f\u4e00\u6837\u7684\u3002  \n&nbsp;\n## \u4ee3\u7801\n```cpp\n#include <queue>\n#include <stdio.h>\nusing namespace std;\npriority_queue<pair<double, int>> q; // <fp, point>\nconst int _(300005); vector<int> E[_];\nbool v[_]; int n, m, a, b, c[_]; double sum[_], f[_];\ninline void Dijkstra()\n{\n    q.push(make_pair(0, n));\n    while (!q.empty()) {\n        int p(q.top().second); q.pop();\n        if (v[p]) continue; v[p] = true;\n        for (int i : E[p]) if (!v[i]) {\n            ++c[i]; sum[i] += f[p];\n            f[i] = (E[i].size() + sum[i]) / c[i];\n            q.push(make_pair(-f[i], i));\n}   }   }\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    while (m--) {\n        scanf(\"%d%d\", &a, &b);\n        E[a].emplace_back(b);\n        E[b].emplace_back(a);\n    } Dijkstra();\n    printf(\"%.10f\\n\", f[1]);\n    return 0;\n}\n``` \n## End\n~~\u8fd9\u9898\u6ca1\u6709\u7d2b\u5427\uff1f~~",
        "postTime": 1657872948,
        "uid": 282929,
        "name": "\u67f3\u6613\u8fb0",
        "ccfLevel": 0,
        "title": "P4745 \u9898\u89e3"
    },
    {
        "content": "## \u5206\u6790\n\n\u6309\u7167\u671f\u671b\u9898\u4e00\u822c\u7684\u505a\u6cd5\uff0c\u6211\u4eec\u8bbe $f[u]$ \u4e3a\u4ece $u$ \u8d70\u5230\u7ec8\u70b9 $n$ \u7684\u671f\u671b\u82b1\u8d39\n\n\u8bbe $du[u]$ \u4e3a\u8282\u70b9 $u$ \u7684\u51fa\u5ea6\n\n\u90a3\u4e48 $f[u]= \\frac{\\sum_{u->v} min(f[u],f[v])}{du[u]}+1$\n\n\u6211\u4eec\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u5f0f\u5b50\u65e2\u5305\u542b $f[u]$ \u672c\u8eab\u53c8\u5305\u542b\u4e0e $f[u]$ \u76f8\u90bb\u7684\u70b9 $f[v]$\n\n\u4e0d\u597d\u76f4\u63a5\u8f6c\u79fb\n\n\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\uff0c\u5982\u679c $f[v]<f[u]$ \uff0c\u90a3\u4e48 $f[v]$ \u4e00\u5b9a\u4f1a\u5bf9 $f[u]$ \u505a\u51fa\u8d21\u732e\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528 $Dij$ \u7684\u601d\u60f3\u5f00\u4e00\u4e2a\u5c0f\u6839\u5806\uff0c\u6bcf\u6b21\u53d6\u51fa\u6700\u5c0f\u7684\u6765\u66f4\u65b0\u5176\u5b83\u7684\n\n\u56e0\u4e3a\u5f53\u524d\u7684\u503c\u662f\u6700\u5c0f\u7684\uff0c\u6240\u4ee5\u4e00\u5b9a\u4e0d\u4f1a\u6709\u5176\u5b83\u7684\u70b9\u53ef\u4ee5\u5f71\u54cd\u5b83\n\n\u6211\u4eec\u8bbe $u$ \u88ab\u4e0e\u5b83\u76f8\u90bb\u7684\u70b9\u7684 $f$ \u503c\u66f4\u65b0\u4e86 $cnt$ \u6b21\uff0c\u8fd9\u4e9b\u503c\u7684\u548c\u4e3a $sum$\n\n\u5219 $f[u]=\\frac{sum+(du[u]-cnt[u]) \\times f[u]}{du[u]}+1$\n\n\u6574\u7406\u53ef\u5f97 $f[u]=\\frac{sum+du[u]}{cnt}$\n\n## \u4ee3\u7801\n``` cpp\n#include<cstdio>\n#include<cstring>\n#include<queue>\nconst int maxn=6e5+5;\ninline int read(){\n\tint x=0,fh=1;\n\tchar ch=getchar();\n\twhile(ch<'0' || ch>'9'){\n\t\tif(ch=='-') fh=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0' && ch<='9'){\n\t\tx=(x<<1)+(x<<3)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn x*fh;\n}\nint head[maxn],tot=1;\nstruct asd{\n\tint to,next;\n}b[maxn];\nvoid ad(int aa,int bb){\n\tb[tot].to=bb;\n\tb[tot].next=head[aa];\n\thead[aa]=tot++;\n}\nstruct jie{\n\tint num;\n\tdouble jl;\n\tjie(){}\n\tjie(int aa,double bb){\n\t\tnum=aa,jl=bb;\n\t}\n\tbool operator < (const jie &A) const{\n\t\treturn jl>A.jl;\n\t}\n};\nint n,m,du[maxn],cnt[maxn];\ndouble sum[maxn],f[maxn];\nbool vis[maxn];\nstd::priority_queue<jie> q;\nvoid dij(){\n\tq.push(jie(n,0));\n\twhile(!q.empty()){\n\t\tint now=q.top().num;\n\t\tq.pop();\n\t\tif(vis[now]) continue;\n\t\tvis[now]=1;\n\t\tfor(int i=head[now];i!=-1;i=b[i].next){\n\t\t\tint u=b[i].to;\n\t\t\tif(vis[u]) continue;\n\t\t\tcnt[u]++;\n\t\t\tsum[u]+=f[now];\n\t\t\tf[u]=(du[u]+sum[u])/cnt[u];\n\t\t\tq.push(jie(u,f[u]));\n\t\t}\n\t}\n}\nint main(){\n\tmemset(head,-1,sizeof(head));\n\tn=read(),m=read();\n\tfor(int i=1;i<=m;i++){\n\t\tint aa,bb;\n\t\taa=read(),bb=read();\n\t\tad(aa,bb);\n\t\tad(bb,aa);\n\t\tdu[aa]++,du[bb]++;\n\t}\n\tdij();\n\tprintf(\"%.10f\\n\",f[1]);\n\treturn 0;\n}\n\n```",
        "postTime": 1601295067,
        "uid": 316322,
        "name": "hzoi_liuchang",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4745 \u3010[CERC2017]Gambling Guide\u3011"
    },
    {
        "content": "## \u300cCERC2017\u300dGambling Guide\n\n\u7ed9\u5b9a\u4e00\u5f20 $n$ \u4e2a\u70b9\uff0c$m$ \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u5728\u6bcf\u4e2a\u65f6\u523b\u6bcf\u4e2a\u70b9\u4f1a\u968f\u673a\u5f00\u653e\u4e00\u6761\u51fa\u8fb9\uff0c\u4f60\u53ef\u4ee5\u4e0d\u52a8\u6216\u6cbf\u7740\u5f00\u653e\u7684\u8fb9\u8d70\uff08\u5747\u82b1\u8d39 $1$ \u7684\u65f6\u95f4\uff09\uff0c\u6c42**\u6700\u4f18\u7b56\u7565**\u4e0b\u4ece $1$ \u5230\u8fbe $n$ \u7684\u671f\u671b\u65f6\u95f4\u3002\n\n---\n\n\u56fe\u4e0a\u95ee\u9898\u8003\u8651\u9006\u63a8\uff0c\u8bbe\u8282\u70b9 $i$ \u5230\u8fbe $n$ \u7684\u671f\u671b\u65f6\u95f4\u4e3a $dp_i$\uff0c\u8282\u70b9 $i$ \u7684\u51fa\u5ea6\u4e3a $deg_i$\u3002\n\n\u5219\u6709 $dp_i=\\frac{\\sum min(dp_i,dp_j)}{deg_i}+1$\uff08$i$ \u4e0e $j$ \u4e4b\u95f4\u6709\u8fb9\u76f8\u8fde\uff09\u3002\n\n\u4ee4 $cnt_i$ \u4e3a\u6ee1\u8db3 $dp_j < dp_i$ \u4e14 $i$ \u4e0e $j$ \u4e4b\u95f4\u6709\u8fb9\u76f8\u8fde\u7684 $j$ \u7684\u6570\u91cf\uff0c$sum_i$ \u4e3a\u6ee1\u8db3 $dp_j < dp_i$ \u4e14 $i$ \u4e0e $j$ \u4e4b\u95f4\u6709\u8fb9\u76f8\u8fde\u7684 $j$ \u7684 $\\sum dp_j$\u3002\n\n\u5219\u6709 $dp_i=\\frac{sum_i}{deg_i}+\\frac{(deg_i-cnt_i) \\times dp_i}{deg_i}+1$\u3002\n\n\u79fb\u9879\u5f97 $(1-\\frac{deg_i-cnt_i}{deg_i}) \\times dp_i=\\frac{sum_i}{deg_i}+1$\u3002\n\n\u90a3\u4e48 $\\frac{cnt_i}{deg_i} \\times dp_i=\\frac{sum_i+deg_i}{deg_i}$\u3002\n\n\u5316\u7b80\u5f97 $dp_i=\\frac{sum_i+deg_i}{cnt_i}$\u3002\n\n\u8003\u8651\u7528 dijkstra\uff0c\u53ea\u662f\u6211\u4eec\u6bcf\u6b21\u8f6c\u79fb\u7684\u65f6\u5019\u53bb\u4ee5\u5f53\u524d\u8282\u70b9\u66f4\u65b0\u4e0e\u5b83\u76f8\u8fde\u7684\u8282\u70b9\u5e94\u8be5\u4e3a\u672a\u8bbf\u95ee\u8fc7\u7684\u8282\u70b9\uff0c\u56e0\u4e3a\u5982\u679c\u5df2\u7ecf\u8bbf\u95ee\u8fc7\u4e86\uff0c\u800c\u4e14\u8fb9\u6743\u90fd\u4e3a $1$\uff08$>0$\uff09\uff0c\u90a3\u4e48\u53ea\u4f1a\u589e\u52a0\u5b83\u7684 $dp$ \u503c\uff0c\u4e0d\u5c5e\u4e8e\u6700\u4f18\u7b56\u7565\u3002\n\n### \u793a\u4f8b\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,a,b,vis[300001];\ndouble dp[300001],sum[300001],cnt[300001];\nvector <int> G[300001];\npriority_queue <pair<double,int>,vector<pair<double,int> >,greater<pair<double,int> > > Q;\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=m;i++){\n\t\tscanf(\"%d%d\",&a,&b);\n\t\tG[a].push_back(b);\n\t\tG[b].push_back(a);\n\t}\n\tQ.push({0,n});\n\twhile(!Q.empty()){\n\t\tint rt=Q.top().second;\n\t\tQ.pop();\n\t\tif(vis[rt]) continue;\n\t\tvis[rt]=1;\n\t\tfor(int i=0;i<G[rt].size();i++){\n\t\t\tint to=G[rt][i];\n\t\t\tif(!vis[to]){\n\t\t\t\tcnt[to]++;\n\t\t\t\tsum[to]+=dp[rt];\n\t\t\t\tdp[to]=(1.0*G[to].size()+sum[to])/cnt[to];\n\t\t\t\tQ.push({dp[to],to});\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%.10lf\",dp[1]);\n\treturn 0;\n}\n```",
        "postTime": 1670693697,
        "uid": 673294,
        "name": "zyxawa",
        "ccfLevel": 6,
        "title": "[CERC2017]Gambling Guide \u9898\u89e3"
    }
]
[
    {
        "content": "\u8003\u8651\u5230 $N\\le 10^4$ \uff0c\u663e\u7136\u662f $\\mathcal{O}(N^2)$ \u53ef\u8fc7\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u4e24\u4e2a\u533a\u95f4\u8ba1\u7b97\u8d21\u732e\u3002\n\n\u663e\u7136\u5982\u679c\u6211\u4eec\u77e5\u9053\u4e24\u4e24\u533a\u95f4\u7684\u8ddd\u79bb\uff0c\u53ef\u4ee5\u76f4\u63a5\u524d\u7f00\u548c $\\mathcal{O}(NQ)$ \u6c42\u51fa\u6700\u7ec8\u7b54\u6848\u3002\n\n\u73b0\u5728\u6211\u4eec\u8ba1\u7b97\u4e24\u4e24\u533a\u95f4\u7684\u8ddd\u79bb\uff0c\u76f4\u63a5\u679a\u4e3e\u5e76\u5339\u914d\u662f $\\mathcal{O}(N^3)$ \uff0c\u4f46\u662f\u4e0d\u96be\u53d1\u73b0 $([l_1, r_1], [l_2, r_2])$ \u548c $([l_1+1, r_1+1], [l_2 + 1, r_2 + 1])$ \u53ea\u6709\u5934\u5c3e\u4e24\u4f4d\u4e0d\u540c\uff0c\u6211\u4eec\u679a\u4e3e $l_1$\uff0c\u548c\u5dee $l_2 - l_1$\uff0c\u7136\u540e\u53ef\u4ee5\u9012\u63a8\u51fa\u6240\u6709\u7ed3\u679c\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(N^2+NQ)$\u3002\n\n```cpp\n/*\n    Author : SharpnessV\n    Right Output ! & Accepted !\n*/\n#include<bits/stdc++.h>\n//#define int long long\n\n#define rep(i, a, b) for(int i = (a);i <= (b);i++)\n#define pre(i, a, b) for(int i = (a);i >= (b);i--)\n#define rp(i, a) for(int i = 1; i <= (a); i++)\n#define pr(i, a) for(int i = (a); i >= 1; i--)\n#define go(i, x) for(auto i : x)\n\n#define mp make_pair\n#define pb push_back\n#define pf push_front\n#define fi first\n#define se second\n#define ze(p) memset(p, 0, sizeof(p))\n#define mem(p, x) memset(p, x, sizeof(p))\n#define YES puts(\"YES\")\n#define NO puts(\"NO\")\n#define si(x) (int)(x).size()\n#define db cerr\n#define pc putchar\n#define el putchar('\\n')\n\nusing namespace std;\nconst double eps = 1e-15, pi = 3.1415926535897932385;\ntypedef long long LL;\ntypedef pair<int,int> Pr;\nconst int dx[4] = {1,0,-1,0}, dy[4] = {0,1,0,-1}, inf = 0x7fffffff;\n\n//char buf[1<<22],*p1=buf,*p2=buf;\n//#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\ninline int read(){\n    int x = 0;bool f = 1;char ch = getchar();\n    while(!isdigit(ch))f = ('-' == ch ? 0 : 1), ch = getchar();\n    while(isdigit(ch))x = (x << 1) + (x << 3) + (ch ^ 48), ch = getchar();\n    if(f)return x;return -x;\n}\ninline LL Read(){\n    LL x = 0;bool f = 1;char ch = getchar();\n    while(!isdigit(ch))f = ('-' == ch ? 0 : 1), ch = getchar();\n    while(isdigit(ch))x = (x << 1) + (x << 3) + (ch ^ 48), ch = getchar();\n    if(f)return x;return -x;\n}\nint gcd(int x,int y){return y ? gcd(y, x % y) : x;}\nint lcm(int x,int y){return x / gcd(x, y) * y;}\n#define P 1000000007\n//#define P 998244353\n#define bas 229\ninline void ad(int &x, int y){x += y; if(x >= P) x -= P;}\ninline void su(int &x, int y){x -= y; if(x < 0) x += P;}\ninline void cmn(int &x,int y){if(y < x) x = y;}\ninline void cmx(int &x,int y){if(y > x) x = y;}\n\nint Pow(int x, int y){\n\tif(y < 0)return Pow(Pow(x, P - 2), -y);\n\tint now = 1 ;\n\tfor(;y;y >>= 1, x = 1LL * x * x % P)if(y & 1) now = 1LL * now * x % P;\n\treturn now;\n}\n#define N 10005\nint n, m, l, a[N], ans[102][N], k[N], mat[N], w[N];\nint main(){\n\t//int T = read();while(T--)solve();\n\t//freopen(\"INPUT\",\"r\",stdin);\n\tn = read(), l = read();\n\trp(i, n)a[i] = read();\n\tm = read();\n\trp(i, m)w[i] = k[i] = read();\n\tsort(k + 1, k + m + 1);\n\trp(i, m)mat[k[i]] = i;\n\tmat[l + 1] = m + 1;pre(i, l, 0)if(!mat[i])mat[i] = mat[i + 1];\n\t//rep(i, 0, l)printf(\"%d \",mat[i]);el;\n\trep(i, 1, n - l){\n\t\tint sum = 0;\n\t\trep(j, 0, l - 1)sum += a[1 + j + i] != a[1 + j];\n\t\t//cout<<\"ss \"<<i + 1<<\" \"<<sum<<endl;\n\t\trep(j, 0, n - l - i){\n\t\t\tans[mat[sum]][1 + j]++, ans[mat[sum]][i + j + 1] ++;\n\t\t\tsum -= a[1 + j] != a[1 + i + j];\n\t\t\tsum += a[j + l + 1] != a[i + j + l + 1];\n\t\t} \n\t}\n\trp(i, m)rp(j, n - l + 1)ans[i][j] += ans[i - 1][j];\n\trp(i, m){rp(j, n - l + 1)printf(\"%d \",ans[mat[w[i]]][j]);el;}\n\treturn 0;\n}\n\n```",
        "postTime": 1626774037,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011[CEOI2018]Lottery"
    }
]
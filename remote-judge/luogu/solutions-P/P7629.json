[
    {
        "content": "## \u524d\u8a00\n\n\u8fd9\u9898\u7684\u9898\u9762\u592a\u96be\u8bfb\u61c2\u4e86\uff0c\u4f46\u662f\u8bfb\u61c2\u4e86\u4ee5\u540e\u5c31\u4f1a\u53d1\u73b0\u5f88\u7b80\u5355\u3002\n\n## \u9898\u610f\u7406\u89e3\n\n\u628a *English* \u7ffb\u8bd1\u6210\u4e2d\u6587\u5c31\u662f\n\n```\n\u7ed9\u5b9a\u4e00\u4e2a\u9700\u8981\u6392\u5e8f\u7684\u6570\u7ec4a[]\nwhile(a\u4e0d\u662f\u4e00\u4e2a\u6392\u5e8f\u597d\u7684\u5e8f\u5217){\n\t\u5c06a\u5212\u5206\u6210\u591a\u4e2a\u8fde\u7eed\u7684\u4e0b\u964d\u533a\u95f4\n\t\u5c06\u6240\u6709\u8fd9\u4e9b\u533a\u95f4(\u7ffb\u8f6c)\n}\n```\n\n\u8981\u6c42\u7edf\u8ba1\u7ffb\u8f6c\u64cd\u4f5c\u7684\u6b21\u6570\u3002\n\n**\u4f8b\u5982\uff1a**\n\n```\n1 2 6 5 4 3 8 7\n```\n\n\u5212\u5206\u5b8c\u4ee5\u540e\u5c31\u662f `1 2|6 5 4 3|8 7`\n\n\u6bcf\u4e2a\"|\"\u4e4b\u95f4\u7684\u533a\u95f4\u5c31\u662f\u4e0b\u964d\u7684\uff0c\u4e00\u5171\u6709 $3$ \u4e2a\u533a\u95f4\n\n\u7136\u540e\u7528 $3$ \u6b21\u7ffb\u8f6c\u64cd\u4f5c\u5c31\u53d8\u6210\u4e86 `1 2 3 4 5 6 7 8`\n\n## \u5206\u6790\n\n\u4e3a\u4ec0\u4e48\u8fd9\u6837\u4e00\u76f4\u8fdb\u884c\u4e0b\u53bb\u662f\u53ef\u4ee5\u5b8c\u6210\u6392\u5e8f\u7684\uff1f\n\n\u5bf9\u4e8e `8 7 6 5 1 2 3 4` \uff0c\u53d8\u6210 `5 6 7 8 1 2 3 4` \uff0c\u90a3\u4e48\u5728\u533a\u95f4 $[1,4]$ \u548c\u533a\u95f4 $[5,8]$ \u5c31\u662f\u6709\u5e8f\u7684\u4e86\uff0c\u540c\u6837\u53ef\u4ee5\u60f3\u5230\u5bf9\u6574\u4e2a\u5e8f\u5217\u8fd9\u6837\u8f6c\u4e4b\u540e\u5e8f\u5217\u5c31\u5728\u4e00\u4e9b\u8303\u56f4\u4e0a\u6709\u5e8f\u4e86\u3002\n\n\u7531\u4e8e\u9898\u76ee\u8981\u6c42\u5212\u5206\u540e\u7684\u5e8f\u5217**\u957f\u5ea6\u5fc5\u987b\u4e3a\u5076\u6570**\uff0c\u6240\u4ee5\u5728\u6709\u5e8f\u533a\u95f4 $[1,4]$ \u5185\u7684\u6570\u5c31\u4e0d\u80fd\u5212\u5206\uff0c\u5426\u5219\u4f1a\u5212\u5206\u6210 `5|6|7|8` \u3001\u957f\u5ea6\u4e0d\u4e3a\u5076\u6570\n\n\u8fd9\u6837\u5c31\u4f1a\u5f97\u5230\u8fd9\u6837\u4e00\u4e2a\u5212\u5206 `5 6 7|8 1|2 3 4`\uff0c**\u6070\u597d\u5728\u4e24\u4e2a\u6709\u5e8f\u533a\u95f4\u7684\u4ea4\u754c\u5904\u4e14\u8fd9\u4e2a\u65b0\u7684\u5212\u5206\u533a\u95f4\u957f\u5ea6\u4e3a $2$**\n\n\u5373\u4f7f\u662f\u7ffb\u8f6c\u4ee5\u540e `5 6 7 1 8 2 3 4`\uff0c\u4e5f\u7531\u4e8e\u533a\u95f4\u5185\u5143\u7d20\u7684**\u6709\u5e8f\u6027**\u53ea\u80fd\u5212\u5206\u4e3a\u957f\u5ea6\u4e3a2\u7684\u65b0\u533a\u95f4 `5 6|7 1|8 2|3 4`\u3002\n\n\u7ee7\u7eed\u7ffb\u8f6c\u4e4b\u540e\u4e5f\u662f\u8fd9\u6837\u7684 `5 6 1 7 2 8 3 4`\uff0c\u4e5f\u53ea\u80fd\u5212\u5206\u4e3a\u957f\u5ea6\u4e3a2\u7684\u65b0\u533a\u95f4\u3002\n\n\u8fd9\u6837\u5c31\u7b49\u4ef7\u4e8e\u53ea\u80fd\u9009\u62e9\u76f8\u90bb\u7684\u5143\u7d20\u4ea4\u6362\u4e86\u3002\u4e5f\u5c31\u7b49\u4ef7\u53bb\u7ecf\u5178\u7684\u6c42\u9006\u5e8f\u5bf9\u95ee\u9898\u4e86\u3002\n\n## \u9898\u89e3\n\n\u6839\u636e\u4ee5\u4e0a\u7684\u5206\u6790\u53ef\u4ee5\u5f97\u5230\u8fd9\u6837\u7684\u601d\u8def\uff1a\u5148\u6309\u7167\u9898\u610f\u5206\u7ec4\u7ffb\u8f6c\u4e00\u6b21\u3002\u7136\u540e\u7528\u6811\u72b6\u6570\u7ec4\u6216\u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\u5c31\u53ef\u4ee5\u4e86\u3002\n\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\nusing namespace std;\nconst int N=100005;\nint n,a[N],c[N];long long ans;\nvoid swap(int& x,int& y){x^=y;y^=x;x^=y;}//\u4ea4\u6362\u4e24\u4e2a\u5143\u7d20\nvoid reverse(int l,int r){//\u7ffb\u8f6c\u533a\u95f4[l,r]\u5185\u7684\u5143\u7d20\n\tfor(int i=l;i<=r&&(i<<1)<l+r;++i)swap(a[i],a[r+l-i]);\n\t++ans;//\u987a\u4fbf\u7edf\u8ba1\u7b54\u6848\n}\nint lowbit(int x){return x&-x;}//\u4e0b\u9762\u4e09\u884c\u662f\u7ecf\u5178\u7684\u6811\u72b6\u6570\u7ec4\nvoid update(int i,int v){for(;i<=n;i+=lowbit(i))c[i]+=v;}\nint getsum(int i){int ans=0;for(;i;i-=lowbit(i))ans+=c[i];return ans;}\nint main(){\n\tscanf(\"%d\",&n);\n\tint las=1;scanf(\"%d\",&a[1]);//\u5148\u5c06\u5e8f\u5217\u6309\u8981\u6c42\u7ffb\u8f6c\u4e00\u6b21\n\tfor(int i=2;i<=n;++i){\n\t\tscanf(\"%d\",&a[i]);\n\t\tif(a[i]>a[i-1]){\n\t\t\treverse(las,i-1);\n\t\t\tlas=i;\n\t\t}\n\t}reverse(las,n);\n\tfor(int i=n;i>=1;--i){//\u7136\u540e\u76f4\u63a5\u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9\u6b63\u786e\u6027\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u4e86\n\t\tans+=getsum(a[i]);\n\t\tupdate(a[i],1);\n\t}printf(\"%lld\\n\",ans);\n\treturn 0;\n}//\t 94ms /  1.37MB /  705B C++98\n```",
        "postTime": 1633317722,
        "uid": 360491,
        "name": "BigSmall_En",
        "ccfLevel": 6,
        "title": "P7629 [COCI2011-2012#1] SORT--\u9898\u89e3"
    },
    {
        "content": "## sort\n\n\u8fd9\u9898\u9898\u610f\u5c31\u662f\u7ed9\u5b9a\u6709 $n$ \u4e2a\u6570\u7684\u6570\u7ec4 $a$\uff0c\u6bcf\u6b21\u5c06 $a$ \u5212\u5206\u4e3a\u591a\u4e2a\u8fde\u7eed\u7684\u4e0b\u964d\u533a\u95f4\uff0c\u5c06\u6bcf\u4e2a\u6709\u81f3\u5c11\u4e24\u4e2a\u6570\u7684\u533a\u95f4\u7ffb\u8f6c\u3002\u95ee\u8ba9 $a$ \u6392\u597d\u5e8f\u9700\u8981\u81f3\u5c11\u591a\u5c11\u6b21\u7ffb\u8f6c\u3002\n\n$O(n^2)$ \u7684\u505a\u6cd5\u5f88\u663e\u7136\uff0c\u5c31\u6309\u9898\u610f\u6a21\u62df\u5373\u53ef\uff0c\u8003\u8651\u4f18\u5316\u3002\n\n\u5047\u8bbe\u7b2c\u4e00\u6b21\u6570\u7ec4 $a$ \u5212\u5206\u6210\u4e86 $[1,2,\\dots,p_1],[p_1+1,p_1+2,\\dots,p2],\\dots,[p_{s-1}+1,p_{s-2}+1,...,p_s](p_s=n)$\uff0c\u90a3\u4e48\u505a\u5b8c\u7b2c\u4e00\u6b21\u8f6e\u53cd\u8f6c\u64cd\u4f5c\u540e\uff0c\u6bcf\u4e00\u4e2a\u533a\u95f4\u90fd\u662f\u6309\u4ece\u5c0f\u5230\u5927\u6392\u597d\u5e8f\u7684\u3002\u90a3\u4e48\u505a\u7b2c\u4e8c\u8f6e\u64cd\u4f5c\u65f6\uff0c\u4e0b\u964d\u533a\u95f4\u5c31\u53ea\u80fd\u8de8\u8d8a\u7b2c\u4e00\u8f6e\u7684\u76f8\u90bb\u533a\u95f4\u3002\u6bd4\u5982\u8bf4\uff1a```4 2 3 1```\uff0c\u7b2c\u4e00\u8f6e\u4e3a ```4 2 | 3 1```\uff0c\u7ffb\u8f6c\u4e4b\u540e\u53d8\u6210\u4e86 ```2 4 | 1 3```\uff0c\u7b2c\u4e8c\u6b21\u4e0b\u964d\u533a\u95f4\u53ea\u6709 ```4 1```\u3002\u7136\u540e\u6709\u4e2a\u663e\u800c\u6613\u89c1\u7684\u7ed3\u8bba\u5c31\u662f\u7b2c\u4e8c\u6b21\u4ee5\u540e\u7684\u4e0b\u964d\u533a\u95f4\u957f\u5ea6\u53ea\u80fd\u4e3a $2$\u3002\n\n\u90a3\u4e48\u95ee\u9898\u5c31\u8f6c\u6362\u4e3a\u4e86\u6bcf\u6b21\u4ea4\u6362\u76f8\u90bb\u7684\u6570\uff0c\u95ee\u6392\u597d\u5e8f\u4e4b\u540e\u7684\u6700\u5c0f\u4ea4\u6362\u6b21\u6570\u3002\u7136\u540e\u9006\u5e8f\u5bf9\u505a\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N = 1e5 + 5;\n\nint n;\nLL ans;\nint a[N], cut[N];\n\nclass BIT {\n  public:\n    void upd (int x, int v) {\n      for (; x <= n; x += x & -x)\n        c[x] += v;\n    }\n    LL qry (int x) {\n      LL ret = 0;\n      for (; x; x -= x & -x)\n        ret += c[x];\n      return ret; \n    }\n  private:\n    LL c[N];\n} t ;\n\nbool check () {\n  for (int i = 1; i <= n; ++i)\n    if (a[i] != i) return false;\n  return true;\n}\n\nvoid solve () {\n  int cnt = 0;\n  for (int i = 1; i <= n; ++i)\n    if (a[i] < a[i + 1])\n      cut[++cnt] = i;\n  for (int i = 1; i <= cnt; ++i)\n    if (cut[i] - cut[i - 1] != 1) {\n      reverse(a + cut[i - 1] + 1, a + cut[i] + 1);\n      ++ans;\n    }\n  for (int i = 1; i <= n; ++i) {\n    ans += i - 1 - t.qry(a[i]);\n    t.upd(a[i], 1);\n  }\n  cout << ans << endl;\n}\n\nint main() {\n  // freopen(\"sort.in\", \"r\", stdin);\n  // freopen(\"sort.out\", \"w\", stdout);\n  cin >> n;\n  for (int i = 1; i <= n; ++i)\n    cin >> a[i];\n  a[n + 1] = n + 1;\n  solve();\n  cerr << clock() * 1.0 / CLOCKS_PER_SEC << 's' << endl;\n  return 0;\n}\n```",
        "postTime": 1633936082,
        "uid": 176843,
        "name": "Scarab",
        "ccfLevel": 0,
        "title": "P7629 [COCI2011-2012#1] SORT \u9898\u89e3"
    },
    {
        "content": "\u6570\u636e\u8303\u56f4 $n \\leq 10^5$, \u76f4\u63a5\u6309\u9898\u610f\u6a21\u62df\u7684\u8bdd\u5fc5\u6b7b\u65e0\u7591\uff0c\u770b\u7740\u5f88\u96be\u641e\u554a\u3002\n\n\u518d\u8bfb\u4e00\u904d\u9898\uff0c\u5ffd\u7136\u53d1\u73b0\u4e86\u8fd9\u53e5\u8bdd\uff1a \u4fdd\u8bc1\u5728\u7b2c\u4e00\u6b21\u5212\u5206\u65f6\u6bcf\u4e2a\nslope \u7684\u957f\u5ea6\u90fd\u4e3a\u5076\u6570\u3002slope \u5373\u4e3a \u8fde\u7eed\u9012\u51cf\u5b50\u5e8f\u5217\u3002\n\n\u4e8e\u662f\u5c31\u5f88\u5bb9\u6613\u53d1\u73b0\uff0c\u6a21\u62df\u4e00\u6b21\u4e4b\u540e\uff0c**\u6240\u6709\u8fde\u7eed\u7684\u9012\u51cf\u5b50\u5e8f\u5217\u957f\u5ea6\u5747\u4e3a $2$**\u3002\u6240\u4ee5\u6bcf\u4e2a\u6570\u4e4b\u540e\u53ea\u7528\u8ddf\u540e\u9762\u6bd4\u81ea\u5df1\u5c0f\u7684\u6570\u4ea4\u6362\u5c31\u597d\u4e86\u3002\u8fd9\u4e0d\u5c31\u662f\u6c42\u9006\u5e8f\u5bf9\u5417\uff1f\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u6a21\u62df\u4e00\u904d\u7edf\u8ba1 reverse \u8c03\u7528\u7684\u6b21\u6570\uff0c\u518d\u52a0\u4e0a\u7b2c\u4e00\u6b21\u64cd\u4f5c\u540e\u603b\u7684\u9006\u5e8f\u5bf9\u6570\u5373\u4e3a\u7b54\u6848\u3002\u6c42\u9006\u5e8f\u5bf9\u53ef\u4ee5\u7528[\u6811\u72b6\u6570\u7ec4](https://blog.csdn.net/bestsort/article/details/80796531)\uff0c\u590d\u6742\u5ea6\u662f $O(nlogn)$ \u7684\u3002\n\n\u6700\u540e\uff0c\u4e00\u5b9a\u8981\u5f00 `long long` \u554a\uff01\n\n\u4e0a\u4ee3\u7801\uff0c\u6709\u7565\u5fae\u5361\u5e38\u3002\n```cpp\n#include<cstdio>\n#include<cctype>\n#define R register\nusing namespace std;\nint n;\nlong long ans;//\u4e07\u6076\u4e4b\u6e90 \nint tree[100005],a[100005];\ninline int read()\n{\n\tR int x=0;R char c=getchar();\n\tfor(;!isdigit(c);c=getchar()); \n\tfor(;isdigit(c);c=getchar()) x=(x<<1)+(x<<3)+c-48;\n\treturn x;\n}\ninline void swap(int& a,int& b){int t=a;a=b;b=t;}\ninline void add(int x){for(;x<=n;x+=(x&-x)) tree[x]++;}\ninline int query(int x){int res=0;for(;x;x-=(x&-x)) res+=tree[x]; return res;}//\u6811\u72b6\u6570\u7ec4\u57fa\u672c\u64cd\u4f5c \ninline void rev(int l,int r)\n{\n\tfor(R int i=l;i<=r&&(i<<1)<l+r;i++)\n        swap(a[i],a[l+r-i]);\n\tans++;//\u5728\u8fd9\u91cc\u4ea4\u6362\u7684\u540c\u65f6\u628a\u7b54\u6848\u4e5f\u7ed9\u7edf\u8ba1\u4e86 \n}\nint main()\n{\n\tn=read();\n\tfor(R int i=1;i<=n;i++) a[i]=read();\n\tint last=1;\n\tfor(R int i=2;i<=n;i++)\n\t\tif(a[i]>a[i-1]){rev(last,i-1);last=i;}\n\trev(last,n);//\u8bb0\u5f97\u5904\u7406\u5269\u4e0b\u7684 \n\tfor(R int i=n;i;i--)\n\t{\n\t\tans+=query(a[i]);\n\t\tadd(a[i]);//\u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9 \n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1629962339,
        "uid": 280473,
        "name": "404Not_Found",
        "ccfLevel": 5,
        "title": "P7629 [COCI2011-2012#1] SORT\u9898\u89e3"
    }
]
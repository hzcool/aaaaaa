[
    {
        "content": "# [\u8bed\u8a00\u6708\u8d5b202303] Carrot Harvest G \u9898\u89e3\r\n\r\n## Source & Knowledge\r\n\r\n2023 \u5e74 3 \u6708\u8bed\u8a00\u6708\u8d5b\uff0c\u7531\u6d1b\u8c37\u7f51\u6821\u5165\u95e8\u8ba1\u5212/\u57fa\u7840\u8ba1\u5212\u63d0\u4f9b\u3002\r\n\r\n\u672c\u9898\u8003\u5bdf\u51fd\u6570\u4e0e\u9012\u5f52\u3002\r\n\r\n## \u6587\u5b57\u9898\u89e3\r\n\r\n### \u9898\u76ee\u5927\u610f\r\n\r\n\u7ed9\u5b9a\u51fd\u6570\r\n\r\n\r\n$$\r\nM(l, r) = \\begin{cases}\r\n\\left(M(l, \\left \\lfloor \\dfrac{l + r}{2} \\right \\rfloor) \\bmod \\max(M(\\left \\lfloor \\dfrac{l + r}{2} \\right \\rfloor + 1, r), 7)\\right ) + \\left(a _ {\\left \\lfloor \\frac{l + r}{2} \\right \\rfloor} - 1 \\right ) & |r - l| > 5 \\\\\r\n\\max \\limits _ {l \\leq i \\leq r}{a _ i} & |r - l| \\leq 5\r\n\\end{cases}\r\n$$\r\n\r\n\u548c\u6570\u7ec4 $a$\uff0c\u6c42 $M(1, n)$\u3002\r\n\r\n### \u89e3\u6790\r\n\r\n\u672c\u9898\u9700\u8981\u4f9d\u7167\u9898\u610f\u5b9a\u4e49\u51fa\u6240\u9700\u7684\u51fd\u6570\u3002\u5b9a\u4e49\u51fd\u6570\u7684\u8bed\u6cd5\u662f `\u8fd4\u56de\u7c7b\u578b \u51fd\u6570\u540d(\u53c2\u6570\u5217\u8868) {\u51fd\u6570\u4f53}`\u3002\r\n\r\n\u672c\u51fd\u6570\u5e94\u8be5\u8fd4\u56de\u4e00\u4e2a\u6574\u6570\uff0c\u7ecf\u8fc7\u7b80\u5355\u7684\u8ba1\u7b97\u53ef\u4ee5\u53d1\u73b0\u5b83\u53ef\u80fd\u8d85\u8fc7 $2 \\times 10^9$\uff0c\u4e8e\u662f\u8fd4\u56de\u7c7b\u578b\u5e94\u8be5\u8bbe\u8ba1\u4e3a `long long`\u3002\u51fd\u6570\u540d\u4e3a `M`\uff0c\u9700\u8981\u4e24\u4e2a\u53c2\u6570 $l, r$\u3002\u4e8e\u662f\u6309\u5982\u4e0b\u683c\u5f0f\u5b9a\u4e49\u8fd9\u4e2a\u51fd\u6570\uff1a\r\n\r\n```cpp\r\nlong long M(int l, int r) {\r\n  // to do\r\n}\r\n```\r\n\r\n\u6211\u4eec\u6765\u5c1d\u8bd5\u586b\u5199\u51fd\u6570\u4f53\u90e8\u5206\uff1a\u9898\u76ee\u7ed9\u51fa\u7684\u5f0f\u5b50\u5171\u5206\u4e24\u79cd\u60c5\u51b5\uff0c\u7b2c\u4e00\u79cd\u662f $|r - l | \\leq 5$\u3002\u6b64\u65f6\u8fd4\u56de\u7684\u662f\u533a\u95f4\u6700\u5927\u503c\u3002\u6211\u4eec\u904d\u5386\u4e00\u904d\u8fd9\u6bb5\u533a\u95f4\u5c31\u80fd\u627e\u5230\uff1a\r\n\r\n```cpp\r\nif (abs(r - l) <= 5) {\r\n  int ret = 0;\r\n  for (int i = l; i <= r; ++i) ret = max(ret, a[i]);\r\n  return ret;\r\n}\r\n```\r\n\r\n\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4f9d\u636e\u9898\u8bbe\u8fdb\u884c\u9012\u5f52\u5904\u7406\u5373\u53ef\u3002\u8bbe `mid = (l + r) / 2` \u53ef\u4ee5\u66f4\u65b9\u4fbf\u7684\u5b8c\u6210\uff0c$mid$ \u7684\u503c\u5c31\u662f $\\left \\lfloor \\dfrac{l + r}{2} \\right \\rfloor$\u3002\r\n\r\n```cpp\r\nelse {\r\n  int mid = (l + r) / 2;\r\n  return M(l, mid) % max(M(mid + 1, r), 7ll) + a[mid] - 1;\r\n}\r\n```\r\n\r\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u7ec6\u8282\u662f\uff0c\u5728 `max` \u51fd\u6570\u91cc\uff0c\u56e0\u4e3a M \u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f long long\uff0c\u800c STL \u63d0\u4f9b\u7684 max \u51fd\u6570\u4e0d\u80fd\u628a\u4e24\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u53d8\u91cf\u4f5c\u6bd4\u8f83\uff0c\u6240\u4ee5\u9700\u8981\u628a\u5e38\u6570 $7$ \u4e5f\u6539\u4e3a long long \u7c7b\u578b\u7684\uff0c\u5373\u5199\u4f5c `7ll`\u3002\u6ce8\u610f\u540e\u9762\u4e24\u4e2a `l` \u662f `L` \u7684\u5c0f\u5199\u5f62\u5f0f\uff0c\u4e0d\u662f\u6570\u5b57\u3002\r\n\r\n\u628a `if` \u548c `else` \u7684\u4ee3\u7801\u586b\u5145\u5230\u524d\u9762\u5b9a\u4e49\u7684\u51fd\u6570 `M` \u7684\u5927\u62ec\u53f7\u5185\uff0c\u5728\u4e3b\u51fd\u6570\u4e2d\u8c03\u7528 `M(1, n)` \u5373\u53ef\u3002\r\n\r\n## \u89c6\u9891\u9898\u89e3\r\n\r\n**\u5b8c\u6574\u4ee3\u7801\u8bf7\u5728\u89c6\u9891\u4e2d\u89c2\u770b**\u3002\r\n\r\n![](bilibili:BV1Vv4y1L7Vc?page=7)",
        "postTime": 1538013783,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "[\u8bed\u8a00\u6708\u8d5b202303] Carrot Harvest G \u9898\u89e3"
    }
]
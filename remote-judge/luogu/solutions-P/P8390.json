[
    {
        "content": "\u6709\u8da3\u7684\u6784\u9020\u9898\u3002\u524d\u6bb5\u65f6\u95f4\u7814\u7a76\u8fc7\u6392\u5e8f\u7f51\u7edc\uff0c\u7136\u540e\u968f\u673a\u8df3\u9898\u8df3\u5230\u4e86\u8fd9\u9898\uff0c\u5c31\u6765\u5199\u4e86\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u672c\u9898\u5373\u8981\u6c42\u6784\u9020\u4e00\u4e2a\u8db3\u591f\u4f18\u79c0\u7684\u6392\u5e8f\u7f51\u7edc\u3002\n\n\u4e0d\u59a8\u8bbe $n=2^k$\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4efb\u610f\u7684 $n$ \u90fd\u53ef\u4ee5\u5728\u540e\u9762\u6dfb\u52a0\u82e5\u5e72\u4e2a $+\\infty$ \u8f6c\u5316\u4e3a\u8fd9\u79cd\u60c5\u5f62\u3002\n\n\u4e0b\u6587\u4e2d\u89c4\u5b9a\u533a\u95f4 $[l,r]$ \u8868\u793a $\\{x\\in\\mathbb{Z}\\mid l\\le x\\le r\\}$\uff0c\u89c4\u5b9a\u5e8f\u5217 $a$ \u7684\u5012\u5e8f\u4e3a $\\overline{a}$\uff0c\u89c4\u5b9a\u4e24\u4e2a\u5e8f\u5217 $a,b$ \u6309\u987a\u5e8f\u62fc\u63a5\u4e3a $a+b$\uff0c\u79f0\u9898\u9762\u4e2d\u4e00\u884c\u4ee3\u7801\u4e3a\u4e00\u6b21\u64cd\u4f5c\u3002\n\n\u5b9a\u4e49\u4e00\u4e2a\u5e8f\u5217\u662f **\u53cc\u8c03** \u7684\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b83\u5148\u589e\u540e\u51cf\u6216\u8005\u5148\u51cf\u540e\u589e\u3002\n\nBatcher \u66fe\u63d0\u51fa\u4e00\u4e2a\u6bd4\u8f83\u7f51\u7edc\uff0c\u7528\u4e8e\u5c06\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u53cc\u8c03\u5e8f\u5217 $a$ \u5206\u4e3a\u4e24\u4e2a\u957f\u5ea6\u4e3a $\\frac{n}{2}$ \u7684\u53cc\u8c03\u5e8f\u5217 $a_{\\min},a_{\\max}$\uff0c\u5e76\u4e14 $a_{\\min}$ \u7684\u6700\u5927\u503c\u4e0d\u8d85\u8fc7 $a_{\\max}$ \u7684\u6700\u5c0f\u503c\u3002\u8fd9\u79cd\u6bd4\u8f83\u7f51\u7edc\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e3a\uff1a\u5bf9\u4e8e\u6bcf\u4e2a $i\\in[1,\\frac{n}{2}]$\uff0c\u5c06 $a_i$ \u548c $a_{i+\\frac{n}{2}}$ \u4e2d\u66f4\u5c0f\u7684\u90a3\u4e2a\u52a0\u5165 $a_{\\min}$\uff0c\u66f4\u5927\u7684\u90a3\u4e2a\u52a0\u5165 $a_{\\max}$\u3002\u79f0\u8fd9\u4e2a\u7f51\u7edc\u4e3a **\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc** \uff0c\u663e\u7136\u8fd9\u4e2a\u7f51\u7edc\u6240\u9700\u64cd\u4f5c\u6b21\u6570 $1$\u3002\u501f\u52a9\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 $\\log_2 n$ \u6b21\u9012\u5f52\u5bf9\u4efb\u610f\u957f\u5ea6\u4e3a $n$ \u7684\u53cc\u8c03\u5e8f\u5217\u8fdb\u884c\u6392\u5e8f\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5229\u7528\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc\u8fdb\u884c\u6392\u5e8f\uff0c\u6211\u4eec\u9700\u8981\u89e3\u51b3\u8f93\u5165\u4e0d\u662f\u53cc\u8c03\u5e8f\u5217\u7684\u60c5\u5f62\u3002\u663e\u7136\u957f\u5ea6\u4e3a $2$ \u7684\u5e8f\u5217\u90fd\u662f\u53cc\u8c03\u5e8f\u5217\uff08\u751a\u81f3\u662f\u5355\u8c03\u5e8f\u5217\uff09\u3002\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u89e3\u51b3\u89c4\u6a21\u4e3a $\\frac{n}{2}$ \u7684\u5b50\u95ee\u9898\uff0c\u73b0\u5728\u5c1d\u8bd5\u89e3\u51b3\u89c4\u6a21\u4e3a $n$ \u7684\u95ee\u9898\u3002\u5c06\u5e8f\u5217 $a$ \u4ece\u4e2d\u95f4\u5288\u5f00\u5f97\u5230\u4e24\u4e2a\u5e8f\u5217 $b,c$\uff0c\u5e76\u4e14\u6211\u4eec\u5df2\u7ecf\u5bf9 $b,c$ \u8fdb\u884c\u6392\u5e8f\u3002\u663e\u7136 $b+\\overline{c}$ \u662f\u53cc\u8c03\u5e8f\u5217\uff0c\u5c06 $b+\\overline{c}$ \u8f93\u5165\u8fdb\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc\u5373\u53ef\u5c06 $a$ \u6392\u5e8f\u3002\u8fd9\u79cd\u6bd4\u8f83\u7f51\u7edc\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e3a\uff1a\u5c06\u4e0a\u6587\u63d0\u5230\u7684 $\\log_2 n$ \u5c42\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc\u7684\u6700\u5916\u5c42\u6539\u4e3a $a_i$ \u548c $a_{n+1-i}$ \u914d\u5bf9\uff0c\u5269\u4f59\u4e0d\u53d8\u3002\u79f0\u8fd9\u4e2a\u7f51\u7edc\u4e3a **\u53cc\u8c03\u6392\u5e8f\u7f51\u7edc** \uff0c\u4f8b\u5982 $n=8$ \u65f6\u7684\u53cc\u8c03\u6392\u5e8f\u7f51\u7edc\u5982\u4e0b\u56fe\uff1a\uff08\u5176\u4e2d\u76f8\u90bb\u7684\u540c\u79cd\u989c\u8272\u4e3a\u540c\u4e00\u6b21\u64cd\u4f5c\uff0c\u6bcf\u4e2a\u84dd\u8272\u77e9\u5f62\u6846\u4f4f\u7684\u8303\u56f4\u4e3a\u4e00\u4e2a\u6539\u9020\u540e\u7684\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc\uff09\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x3j2o6pz.png)\n\n\u5bf9\u5e8f\u5217 `4 6 2 7 5 1 3 8` \u7684\u6bcf\u4e00\u6b21\u64cd\u4f5c\u540e\u7ed3\u679c\u5982\u4e0b\uff1a\n\n```text\nINIT | 4 6 2 7 5 1 3 8\nOP 1 | 4 6 2 7 1 5 3 8\nOP 2 | 4 2 6 7 1 3 5 8\nOP 3 | 2 4 6 7 1 3 5 8\nOP 4 | 2 4 3 1 7 6 5 8\nOP 5 | 2 1 3 4 5 6 7 8\nOP 6 | 1 2 3 4 5 6 7 8\n```\n\n\u6bcf\u4e00\u4e2a\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc\u7684\u64cd\u4f5c\u6570\u4e3a $\\Theta(\\log n)$\uff0c\u4e00\u4e2a\u53cc\u8c03\u6392\u5e8f\u7f51\u7edc\u7531 $\\Theta(\\log n)$ \u4e2a\u53cc\u8c03\u5f52\u5e76\u7f51\u7edc\u7ec4\u6210\uff0c\u56e0\u6b64\u603b\u64cd\u4f5c\u6570\u4e3a $\\Theta(\\log^2n)$\u3002\u5728\u672c\u9898\u4e2d\u6bcf\u4e2a\u6d4b\u8bd5\u70b9\u7684\u64cd\u4f5c\u6b21\u6570\u4f9d\u6b21\u4e3a $6,10,10,15,21,21,28,28,28,28$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n//By: OIer rui_er\n#include <bits/stdc++.h>\n#define rep(x,y,z) for(int x=(y);x<=(z);x++)\n#define per(x,y,z) for(int x=(y);x>=(z);x--)\n#define debug(format...) fprintf(stderr, format)\n#define fileIO(s) do{freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout);}while(false)\nusing namespace std;\ntypedef long long ll;\n\nint n;\nvector<vector<tuple<int, int>>> ans;\ntemplate<typename T> void chkmin(T& x, T y) {if(x > y) x = y;}\ntemplate<typename T> void chkmax(T& x, T y) {if(x < y) x = y;}\n\nint main() {\n\tscanf(\"%d\", &n);\n\tint m = 1;\n\tfor(; m < n; m <<= 1);\n\tfor(int l = 2; l <= m; l <<= 1) {\n\t\tint k = ans.size();\n\t\tans.push_back({});\n\t\tfor(int p = 1; p <= m; p += l) {\n\t\t\tfor(int i = p, j = p + l - 1; i < j; i++, j--) {\n\t\t\t\tans[k].emplace_back(i, j);\n\t\t\t}\n\t\t}\n\t\tfor(int o = l >> 1; o >= 2; o >>= 1) {\n\t\t\tint k = ans.size();\n\t\t\tans.push_back({});\n\t\t\tfor(int p = 1; p <= m; p += o) {\n\t\t\t\tfor(int i = p, j = p + (o >> 1); i < p + (o >> 1) && j < p + o; i++, j++) {\n\t\t\t\t\tans[k].emplace_back(i, j);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\", (int)ans.size());\n\tfor(auto& i : ans) {\n\t\tfor(auto& j : i) {\n\t\t\tint x = get<0>(j), y = get<1>(j);\n\t\t\tif(x > n || y > n) continue;\n\t\t\tprintf(\"CMPSWP R%d R%d \", get<0>(j), get<1>(j));\n\t\t}\n\t\tputs(\"\");\n\t}\n\treturn 0;\n}\n```\n\n\u53c2\u8003\u6587\u732e\uff1a2002 \u5e74\u56fd\u5bb6\u5019\u9009\u961f\u8bba\u6587 \u7b26\u6587\u6770\u300a\u6392\u5e8f\u7f51\u7edc\u300b\u3002",
        "postTime": 1669901859,
        "uid": 122461,
        "name": "rui_er",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P8390\u3010[COI2021] MalnaRISC\u3011"
    }
]
[
    {
        "content": "## [\u9898\u610f](https://blog.csdn.net/BeNoble_/article/details/79855890)\n\n\u7ed9\u5b9a\u5e73\u9762\u4e0a\u7684$N$\u4e2a\u70b9$,$\u5176\u4e2d\u6709\u4e00\u4e9b\u662f\u7ea2\u7684$,$\u5176\u4ed6\u662f\u84dd\u7684\n\n\u73b0\u5728\u8ba9\u4f60\u627e\u4e00\u5bf9\u5e73\u884c\u7ebf$,$\u5728\u6ee1\u8db3\u5728\u5e73\u884c\u7ebf\u4e4b\u95f4\u6ca1\u6709\u84dd\u70b9$,$\u5e76\u4e14\u5e73\u884c\u7ebf\u4e0d\u7ecf\u8fc7\u4efb\u4f55\u4e00\u4e2a\u70b9\u7684\u60c5\u51b5\u4e0b$,$\u4f7f\u5f97\u88ab\u5939\u5728\u5e73\u884c\u7ebf\u4e4b\u95f4\u7684\u7ea2\u8272\u70b9\u4e2a\u6570\u6700\u591a\n\n\u7ed9\u51fa\u7684\u70b9\u6ca1\u6709\u4e09\u70b9\u5171\u7ebf\u7684\u60c5\u51b5$,$\u5e73\u884c\u7ebf\u53ef\u4ee5\u4e0d\u5e73\u884c\u5750\u6807\u8f74\n\n---\n\n## \u9898\u89e3\n\n\u505a\u4e00\u6761\u5782\u76f4\u4e8e\u5e73\u884c\u7ebf\u7684\u7ebf$,$\u7136\u540e\u628a\u6240\u6709\u70b9\u6392\u5e8f\u540e\u90fd\u6295\u5f71\u5230\u8fd9\u6761\u7ebf\u4e0a\u5f62\u6210\u4e00\u4e2a\u5e8f\u5217\n\n\u90a3\u4e48\u8003\u8651\u5728\u5e8f\u5217\u4e0a\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f\u6700\u957f\u5168\u7ea2\u5b50\u4e32\u4e86\n\n\u8fd9\u4e2a\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u76f4\u63a5\u7ef4\u62a4$;$\u8003\u8651\u5230\u5e73\u884c\u7ebf\u7684\u89d2\u5ea6\u4f1a\u53d8\n\n\u90a3\u4e48\u7b54\u6848\u5c31\u662f\u6211\u4eec\u628a\u8fd9\u6761\u5782\u7ebf\u5728\u65cb\u8f6c$180^\\circ$\u7684\u8fc7\u7a0b\u4e2d\u6240\u6709\u6295\u5f71\u5e8f\u5217\u7684\u7b54\u6848\u7684\u6700\u5927\u503c\n\n\u6211\u4eec\u663e\u7136\u4e0d\u80fd\u76f4\u63a5\u53bb\u65cb\u8f6c$,$\u8003\u8651\u8981\u600e\u4e48\u6837\u6295\u5f71\u5e8f\u5217\u624d\u4f1a\u53d1\u751f\u53d8\u5316\n\n![\u8fd9\u91cc\u5199\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdn.net/20180408173509394?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JlTm9ibGVf/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\n\u6295\u5f71\u5e8f\u5217\u662f$\\{1,2,3,4\\}$,\u90a3\u4e48\u989c\u8272\u5e8f\u5217\u5c31\u662f$1001,$\u7b54\u6848\u662f$1$\n\n![\u8fd9\u91cc\u5199\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdn.net/20180408174445827?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JlTm9ibGVf/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)\n\n\u5f53\u6295\u5f71\u7ebf\u662f$L1$\u65f6\u6295\u5f71\u5e8f\u5217\u662f$\\{1,2,3,4\\}$\n\n\u5f53\u6295\u5f71\u7ebf\u662f$L2$\u65f6\u6295\u5f71\u5e8f\u5217\u662f$\\{1,2,4,3\\}$\n\n\u4e5f\u5c31\u662f\u8bf4\u5f53\u6295\u5f71\u7ebf\u7684\u659c\u7387\u4ece\u5c0f\u4e8e\u4e24\u70b9\u8fde\u7ebf\u5782\u7ebf$(Lx)$\u659c\u7387\u5230\u5927\u4e8e\u4ed6\u7684\u8fc7\u7a0b\u4e2d\u8fd9\u4e24\u4e2a\u70b9\u5728\u6295\u5f71\u5e8f\u5217\u4e0a\u7684\u4f4d\u7f6e\u4f1a\u4e92\u6362\n\n\u56e0\u4e3a\u5782\u7ebf\u7684\u659c\u7387\u548c\u539f\u76f4\u7ebf\u7684\u659c\u7387\u662f\u4e00\u4e00\u5bf9\u5e94\u7684$,$\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6309\u7167\u4e24\u70b9\u4e4b\u95f4\u7684\u8fde\u7ebf\u7684\u659c\u7387\u6392\u5e8f\n\n\u90a3\u4e48\u65cb\u8f6c\u6295\u5f71\u7ebf\u6bcf\u6b21\u5c31\u53ef\u4ee5\u76f4\u63a5\u65cb\u8f6c\u5230\u4e0b\u4e00\u4e2a\u5782\u7ebf\u7684\u4f4d\u7f6e\n\n\u5373\u4f7f\u6709\u4e24\u70b9\u6295\u5f71\u4f4d\u7f6e\u76f8\u540c\u4e5f\u6ca1\u5173\u7cfb$,$\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u5fae\u8c03\u4e00\u4e0b\n\n\u6ce8\u610f\u5bf9\u4e8e\u6240\u6709\u659c\u7387\u76f8\u540c\u7684\u76f4\u7ebf\u6211\u4eec\u9700\u8981\u4e00\u6b21\u6027\u5728\u7ebf\u6bb5\u6811\u4e0a\u5904\u7406\u5b8c\n\n\u56e0\u4e3a\u603b\u5171\u6709$n^2$\u6761\u7ebf$,$\u6240\u4ee5\u4f1a\u53d1\u751f$n^2$\u6b21\u4ea4\u6362$,$\u6240\u4ee5\u590d\u6742\u5ea6\u662f$O(n^2\\log n)$\u7684\n\n>$Hint:$\n\n>\u8fde\u7ebf\u7684\u65b9\u5411\u548c\u8f6c\u52a8\u7684\u65b9\u5411\u8981\u4e00\u81f4(\u9700\u8981\u8111\u8865\u4e00\u4e0b)\n\n>\u659c\u7387\u5224\u7b49\u7684\u7cbe\u5ea6\u8981\u9ad8\u4e00\u70b9",
        "postTime": 1523183067,
        "uid": 20156,
        "name": "Kelin",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4385 \u3010[COCI2009]Dvapravca\u3011"
    },
    {
        "content": "# P4385 Dvapravca \u9898\u89e3\n\n[\u6211\u7684Blog](https://juruo999.blog.luogu.org/solution-p4385)  \n[\u6837\u4f8b\u6f14\u793a1](https://www.geogebra.org/m/j4sh5mbv)  \n[\u6837\u4f8b\u6f14\u793a2](https://www.geogebra.org/m/ryqzkt3b)\n\n\u7ed9\u5b9a $n$ \u4e2a\u7ea2\u8272\u6216\u84dd\u8272\u7684\u70b9\uff0c**\u4e09\u70b9\u4e0d\u5171\u7ebf**\uff0c\u6c42\u4e2d\u95f4\u6ca1\u6709\u84dd\u70b9\u7684\u4e24\u6761\u5e73\u884c\u7ebf\u95f4\u6700\u591a\u80fd\u6709\u51e0\u4e2a\u7ea2\u70b9\u3002\n\n\u663e\u7136\uff0c\u4e24\u6761\u5e73\u884c\u7ebf\u4e00\u5b9a\u4e0d\u4f1a\u662f\u4e24\u70b9\u95f4\u7684\u8fde\u7ebf\uff0c\u5426\u5219\u5c06\u5e73\u884c\u7ebf\u65cb\u8f6c**\u8db3\u591f\u5c0f\u7684**\u89d2\u5ea6 $\\delta$ \u540e\u53ef\u4ee5\u5f97\u5230\u53e6\u4e00\u4e2a\u66f4\u4f18\u7684\u89e3\u3002\n\n\u5047\u8bbe\u4e24\u6761\u5e73\u884c\u7ebf\u90fd\u5782\u76f4\u4e8e\u76f4\u7ebf $l$\uff0c\u8fc7\u6bcf\u4e2a\u70b9\u4f5c $l$ \u7684\u5782\u7ebf\uff0c\u5f97\u5230 $n$ \u4e2a\u70b9\uff0c\u90a3\u4e48\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a**\u6c42\u6295\u5f71\u5e8f\u5217\u4e0a\u7684\u6700\u957f\u8fde\u7eed\u7ea2\u8272\u5b50\u6bb5**\u3002[\u6837\u4f8b\u6f14\u793a1](https://www.geogebra.org/m/j4sh5mbv) \u53ef\u4ee5\u5f88\u76f4\u89c2\u7684\u89e3\u91ca\u8fd9\u4e2a\u601d\u8def\u3002\n\n\u8003\u8651\u52a8\u6001\u7ef4\u62a4\u8fd9\u4e2a\u5e8f\u5217\u3002\u627e\u51fa\u8fd9 $n$ \u4e2a\u70b9\u95f4\u7684\u6240\u6709\u8fde\u7ebf\uff0c\u5f53 $l$ \u5782\u76f4\u4e8e\u8fde\u7ebf\u65f6\uff0c\u5c31\u4ea4\u6362\u8fde\u7ebf\u4e24\u7aef\u7684\u70b9\u5bf9\u5e94\u7684\u989c\u8272\u3002\u770b\u4e0b\u9762\u8fd9\u5f20\u56fe\u5c31\u53ef\u7406\u89e3\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uahs62n6.png)\n\n\u5f53\u4f60\u7406\u89e3\u8fd9\u4e00\u6b65\u65f6\uff0c\u4f60\u5df2\u7ecf\u80fd\u505a\u51fa\u8fd9\u9053\u9898\u4e86\u3002\n\n\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u6700\u957f\u8fde\u7eed\u96f6\u4e2a\u6570\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2\\log n)$\u3002\n\n _P.S. \u4e0d\u7528\u7ebf\u6bb5\u6811\uff0c\u66b4\u529b\u7ef4\u62a4\u8fde\u7eed\u96f6\u52a0\u4e0a `O2` \u4e5f\u80fd AC\u2026\u2026\u4e3b\u8981\u662f\u6211\u7ebf\u6bb5\u6811\u5199\u6302\u4e86\uff01_ \n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#include<vector>\n#include<queue>\n\nusing namespace std;\n\n#define il inline\ntypedef long long ll;\n\nll gcd(ll a,ll b){\n\treturn b==0?a:gcd(b,a%b);\n}\n\ntypedef double Grad;\n\nint n;\nstruct Node{\n\tint x,y;\n\tint p;\n\tchar c;\n}a[1005];\nbool cmp(Node a,Node b){\n\treturn a.x!=b.x?a.x<b.x:a.y>b.y;\n}\n\nint s[1005];\n\nstruct Line{\n\tint i1,i2;\t// id\n\tGrad G;\n\tLine(){} Line(int a_,int b_){i1=a_,i2=b_;G=1.0*(a[i2].y-a[i1].y)/(a[i2].x-a[i1].x);}\n\tbool operator<(Line b){\n\t\treturn G<b.G;\n\t}\n}ls[1000006];\nint ms=0;\n\nvector<pair<int,int> > sw[1000006];int st;\n\nint did[1006],id[1006];\n\nint main(){\n\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d\",&a[i].x,&a[i].y);\n\t\ta[i].c=getchar(); while(a[i].c!='R' && a[i].c!='B'){ a[i].c=getchar(); }\n\t}\n\tsort(a+1,a+n+1,cmp);\n\t\n\tfor(int i=1;i<=n;i++){\n\t\ts[i]=((a[i].c=='R')?0:1);\n\t}\n\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=i+1;j<=n;j++){\n\t\t\tls[++ms]=Line(i,j);\n\t\t}\n\t}\n\tsort(ls+1,ls+ms+1);\n\tst=1;sw[1].push_back(make_pair(ls[1].i1,ls[1].i2));\n\tfor(int i=2;i<=ms;i++){\n\t\tif(ls[i].G!=ls[i-1].G){\n\t\t\tst++;\n\t\t}\n\t\tsw[st].push_back(make_pair(ls[i].i1,ls[i].i2));\n\t}\n   \n\tint ans=0;\n\tint l=1;\t\t// \u6c38\u8fdc\u7115\u53d1\u5149\u8292\u7684\u66b4\u529b\u7ef4\u62a4\u533a\u95f4\n\tfor(int j=1;j<=n;j++){\n\t\tif(s[j]==1){\n\t\t\tl=j+1;\n\t\t}\n\t\tif(s[l]==0 && s[j]==0){ans=max(ans,j-l+1);}\n\t}\n\n\tfor(int i=1;i<=n;i++){id[i]=did[i]=i;}\n\n\tfor(int i=1;i<=st;i++){\n\t\tfor(int j=0;j<sw[i].size();j++){\n\t\t\tint x=sw[i][j].first,y=sw[i][j].second,u,v;\n\n\t\t\tswap(did[x],did[y]);\n\t\t\tswap(id[did[x]],id[did[y]]);\n\t\t\tu=s[did[x]],v=s[did[y]];\n\t\t\ts[did[x]]=v,s[did[y]]=u;\t// \u5b8c\u5168\u6ca1\u7528\u7684\u8c03\u8bd5\u4fe1\u606f\n\t\t}\n\t\t\n\t\tint l=1;\t// \u8fd0\u7528\u53cd\u590d\u7684\u4fee\u8f9e\u624b\u6cd5\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tif(s[j]==1){\n\t\t\t\tl=j+1;\n\t\t\t}\n\t\t\tif(s[l]==0 && s[j]==0){ans=max(ans,j-l+1);}\n\t\t}\n\t\t\n\t}\n\n\tprintf(\"%d\\n\",ans);\n\n\treturn 0;\n}\n```",
        "postTime": 1638589131,
        "uid": 371818,
        "name": "juruo999",
        "ccfLevel": 7,
        "title": "P4385 Dvapravca \u9898\u89e3"
    },
    {
        "content": "# [COCI2009]Dvapravca\n\n[LG\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/P4385)\n\n[\u849f\u84bb\u7684Blog](https://www.cnblogs.com/cj-chd/p/10235775.html)\n\n\u5148\u7ed9\u51fa\u8003\u573a\u4e0a\u7684$O(n^3)$\u4e71\u641e\u65b9\u6cd5\uff1a\u679a\u4e3e\u4e00\u4e2a\u84dd\u70b9\u548c\u4e00\u4e2a\u7ea2\u70b9\uff0c\u627e\u51fa\u8fc7\u7740\u4e24\u4e2a\u70b9\u7684\u76f4\u7ebf\uff0c\u518d\u679a\u4e3e\u84dd\u70b9\u627e\u51fa\u8fd9\u6761\u76f4\u7ebf\u6700\u591a\u80fd\u5f80\u4e24\u8fb9\u6269\u5c55\u591a\u5bbd\uff0c\u6700\u540e\u679a\u4e3e\u7ea2\u70b9\u8ba1\u7b97\u8d21\u732e\u3002\n\n\u6ce8\u610f\u5728\u786e\u5b9a\u4e00\u6761\u76f4\u7ebf\u80fd\u5f80\u4e24\u8fb9\u6269\u5c55\u591a\u5bbd\u65f6\u4e0d\u8981\u6c42\u70b9\u5230\u76f4\u7ebf\u7684\u8ddd\u79bb\uff0c\u5426\u5219\u5e38\u6570\u4f1a\u592a\u5927\uff0c\u53ea\u8981\u6c42\u7ad6\u76f4\u65b9\u5411\u7684\u8ddd\u79bb\u5c31\u53ef\u4ee5\u4e86\u3002\u6b63\u786e\u6027\u663e\u7136\uff0c\u5177\u4f53\u770b\u4ee3\u7801\u3002\n\n\u73b0\u5728\u6709\u4e2a\u91cd\u8981\u7684\u95ee\u9898\uff0c\u6c42\u5927\u4f6c\u6765\u89e3\u51b3\uff1a\u5982\u679c\u76f4\u63a5\u8fd9\u6837\u5199\u4f1a\u88ab\u5361\u523065\u523070\u5206\uff0c\u4f46\u662f\u5982\u679c\u628a\u84dd\u70b9\u548c\u7ea2\u70b9\u6309$x$\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57$y$\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u4ece\u5c0f\u5230\u5927\u6392\u4e2a\u5e8f\uff0c\u5c31\u80fd\u5f97\u523090\u81f3100\u5206\uff08\u8003\u8bd5\u65f6\u7528\u7684\u8bc4\u6d4b\u673a\u80fd\u8dd1\u523090\u5206\uff0c\u6d1b\u8c37\u795e\u673a\u4e0a\u80fd\u5207\uff09\u3002\u7136\u800c\u6211\u4e0d\u4f1a\u8bc1\u660e\u8fd9\u6837\u7a76\u7adf\u4f18\u5316\u5728\u54ea\u91cc\uff0c\u6c42\u5927\u4f6c\u8bc1\u660e\u3002\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define R register\n#define I inline\n#define D double\nusing namespace std;\nconst int N=1003,inf=0x3f3f3f3f;\nstruct V{int x,y;}r[N],b[N];\nstruct L{D k,b;}f;\nI int operator<(V a,V b){return a.x^b.x?a.x<b.x:a.y<b.y;}\nI D min(D x,D y){return x<y?x:y;}\nI int max(int x,int y){return x>y?x:y;}\nI L lin(V a,V b){\n    if(a.x==b.x)\n        return (L){inf,0};\n    D k=(D)(b.y-a.y)/(b.x-a.x);\n    return (L){k,(D)a.y-k*a.x};\n}\nI D dst(V a){return f.k*a.x+f.b-a.y;}\nint main(){\n    R int n,x,y,i,j,t,p=0,q=0,g,h,o=0;\n    R char c[2];\n    D d,u,v;\n    scanf(\"%d\",&n);\n    for(i=1;i<=n;++i){\n        scanf(\"%d%d%s\",&x,&y,c);\n        if(c[0]=='R')\n            r[++p]=(V){x,y};\n        else\n            b[++q]=(V){x,y};\n    }\n    sort(b+1,b+q+1),sort(r+1,r+p+1);//\u5c31\u662f\u8fd9\u91cc\uff0c\u4e0d\u52a0\u4f1a\u6162\u5f88\u591a\n    for(i=1;i<=q;++i)\n        for(j=1;j<=p;++j){\n            f=lin(b[i],r[j]),u=v=inf,g=h=1;\n            for(t=1;t<=q;++t)\n                if(t^i)\n                    if((d=dst(b[t]))>0)\n                        u=min(u,d);\n                    else\n                        v=min(v,-d);\n            for(t=1;t<=p;++t)\n                if(t^j)\n                    if((d=dst(r[t]))>0)\n                        g+=d<u;\n                    else\n                        h+=-d<v;\n            o=max(o,max(g,h));\n        }\n    printf(\"%d\",o);\n    return 0;\n}\n\n```\n\n\u4eb2\u6d4b\u5982\u679c\u6ca1\u52a0sort\u5e94\u8be5\u662f\u8fc7\u4e0d\u4e86\u7684\uff0cxzz\u5927\u795e\u4ed9\u5c1d\u8bd5\u628a\u5750\u6807\u7cfb\u968f\u673a\u65cb\u8f6c\u4e86\u4e00\u4e0b\uff0c\u53d8\u5f97\u66f4\u5feb\u4e86\u3002\u6240\u4ee5\u8fd9\u9053\u9898\u544a\u8bc9\u6211\u4eec\u4e00\u4e2a\u7ecf\u9a8c\uff1a\u78b0\u89c1\u4e0d\u4f1a\u7684\u8ba1\u7b97\u51e0\u4f55\u9898\uff0c\u5148\u968f\u673a\u65cb\u8f6c\u5750\u6807\u7cfb\uff0c\u518d\u628a\u70b9\u6392\u4e00\u904d\u5e8f\uff0c\u6253\u8d77\u66b4\u529b\u66f4\u6709\u81ea\u4fe1\uff01\n\n\u8fd8\u662f\u653e\u4e00\u4e0b\u6b63\u89e3$O(n^2 log n)$\u7684\u505a\u6cd5\u5427\u3002\u8003\u8651\u5982\u679c\u8981\u6c42\u76f4\u7ebf\u5782\u76f4\u4e8e$x$\u8f74\uff0c\u90a3\u4e48\u5982\u679c\u628a\u70b9\u6309\u521a\u624d\u6240\u8bf4\u7684\u6392\u4e00\u904d\u5e8f\uff0c\u8981\u6c42\u7684\u5c31\u662f\u5e8f\u5217\u4e0a\u8fde\u7eed\u7684\u6700\u957f\u7684$1$\u7684\u4e2a\u6570\uff08\u5982\u679c\u628a\u7ea2\u8272\u89c6\u4f5c$1$\uff09\u3002\u7531\u4e8e\u76f4\u7ebf\u53ef\u4ee5\u503e\u659c\uff0c\u8003\u8651\u65cb\u8f6c\u5750\u6807\u7cfb\uff0c\u5f53\u67d0\u4e24\u4e2a\u70b9\u8fde\u7ebf\u7684\u659c\u7387\u4e0e\u5f53\u524d$y$\u8f74\u5728\u539f\u5750\u6807\u7cfb\u4e2d\u7684\u659c\u7387\u76f8\u7b49\u65f6\uff0c\u8fd9\u4e24\u4e2a\u70b9\u5728\u5e8f\u5217\u4e0a\u7684\u4f4d\u7f6e\u5c31\u4f1a\u4ea4\u6362\uff0c\u8fd9\u4e0b\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u6765\u7ef4\u62a4\uff0c\u7531\u4e8e\u6700\u591a\u4ea4\u6362$O(n^2)$\u6b21\u987a\u5e8f\uff0c\u590d\u6742\u5ea6\u662f$O(n^2 log n)$\u3002\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define R register\n#define I inline\n#define D double\nusing namespace std;\nconst int N=1003,M=1000003,S=4003;\nint f[N],n;\nstruct T{int f,l,r,d;}e[S];\nstruct V{int x,y,c;}p[N];\nstruct L{D k; int x,y;}q[M];\nI int operator<(V a,V b){return a.x^b.x?a.x<b.x:a.y<b.y;}\nI int operator<(L a,L b){return a.k>b.k;}\nI int max(int x,int y){return x>y?x:y;}\nI T operator+(T x,T y){\n\tT z;\n\tz.f=max(x.r+y.l,max(x.f,y.f)),z.d=x.d+y.d;\n\tif(x.l==x.d)\n\t\tz.l=x.d+y.l;\n\telse\n\t\tz.l=x.l;\n\tif(y.r==y.d)\n\t\tz.r=x.r+y.d;\n\telse\n\t\tz.r=y.r;\n\treturn z;\n}\nI void swp(int&x,int&y){x^=y,y^=x,x^=y;}\nI void upd(int k,int v){e[k]=(T){v,v,v,1};}\nI void bld(int k,int l,int r){\n\tif(l==r){\n\t\tupd(k,p[l].c);\n\t\treturn ;\n\t}\n\tR int p=k<<1,q=p|1,m=l+r>>1;\n\tbld(p,l,m),bld(q,m+1,r),e[k]=e[p]+e[q];\n}\nvoid mdf(int k,int l,int r,int x,int v){\n\tif(l==r){\n\t\tupd(k,v);\n\t\treturn ;\n\t}\n\tR int p=k<<1,q=p|1,m=l+r>>1;\n\tif(x<=m)\n\t\tmdf(p,l,m,x,v);\n\telse\n\t\tmdf(q,m+1,r,x,v);\n\te[k]=e[p]+e[q];\n}\nint main(){\n\tR int i,j,x,y,t=0,o;\n\tR char c[2];\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;++i){\n\t\tscanf(\"%d%d%s\",&x,&y,c);\n\t\tif(c[0]=='R')\n\t\t\tp[i]=(V){x,y,1};\n\t\telse\n\t\t\tp[i]=(V){x,y,0};\n\t}\n\tsort(p+1,p+n+1);\n\tfor(i=1;i<=n;++i)\n\t\tf[i]=i;\n\tfor(i=1;i<n;++i)\n\t\tfor(j=i+1;j<=n;++j)\n\t\t\tq[++t]=(L){(D)(p[j].y-p[i].y)/(p[j].x-p[i].x),i,j};\n\tsort(q+1,q+t+1),bld(1,1,n),o=e[1].f;\n\tfor(i=1;i<=t;++i){\n\t\tx=f[q[i].x],y=f[q[i].y],swp(f[q[i].x],f[q[i].y]);\n\t\tif(p[x].c^p[y].c)\n\t\t\tswp(p[x].c,p[y].c),mdf(1,1,n,x,p[x].c),mdf(1,1,n,y,p[y].c),o=max(o,e[1].f);\n\t}\n\tprintf(\"%d\",o);\n\treturn 0;\n}\n\n```\n\n\n\n",
        "postTime": 1546851047,
        "uid": 91933,
        "name": "newbiechd",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4385 \u3010[COCI2009]Dvapravca\u3011"
    },
    {
        "content": "\u9996\u5148\u7279\u5224\u6389\u84dd\u70b9\u6570\u91cf$<2$\u7684\u60c5\u51b5\u3002\u6ca1\u6709\u84dd\u70b9\u7b54\u6848\u5c31\u662f$n$\uff0c\u6709\u4e00\u4e2a\u84dd\u70b9\u53ef\u4ee5\u679a\u4e3e\u4e00\u4e2a\u7ea2\u70b9\uff0c\u9009\u62e9\u8fc7\u8fd9\u4e2a\u84dd\u70b9\u548c\u7ea2\u70b9\u7684\u4e00\u6761\u7ebf\u548c\u5728\u65e0\u7a77\u8fdc\u5904\u7684\u5e73\u884c\u7ebf\uff08\u5373\u8fd9\u6761\u7ebf\u5bf9\u5e94\u7684\u4e24\u4e2a\u534a\u5e73\u9762\uff09\u3002\n\n\u8fd9\u91cc\u8ba4\u4e3a\u8fc7\u4e00\u4e2a\u70b9\u662f\u4e0e\u8fd9\u4e2a\u70b9\u65e0\u9650\u63a5\u8fd1\uff0c\u7ea2\u70b9\u7684\u8bdd\u8ba4\u4e3a\u7ea2\u70b9\u5728\u5e73\u884c\u7ebf\u4e2d\uff0c\u84dd\u70b9\u4e0d\u5728\u5e73\u884c\u7ebf\u4e2d\n\n\u6784\u9020\u65b9\u6848\u7684\u65f6\u5019\u60f3\u8c61\u4e24\u4e2a\u9636\u6bb5\uff1a\n\n- \u5982\u679c\u6709\u4e00\u6761\u7ebf\u4e0d\u8fc7\u84dd\u70b9\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5411\u5916\u6269\u5f20\u76f4\u5230\u8fc7\u84dd\u70b9\u4e3a\u6b62\uff0c\u73b0\u5728\u4e24\u6761\u5e73\u884c\u7ebf\u56fa\u5b9a\u8fc7\u4e24\u4e2a\u84dd\u70b9\n- \u5982\u679c\u6ca1\u6709\u5e73\u884c\u7ebf\u8fc7\u7ea2\u70b9\uff0c\u53ef\u4ee5\u65cb\u8f6c\u8fd9\u4e24\u6761\u5e73\u884c\u7ebf\u77e5\u9053\u4e00\u4e2a\u5e73\u884c\u7ebf\u8fc7\u7ea2\u70b9\u4e3a\u6b62\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e0d\u4f1a\u635f\u5931\u7ea2\u70b9\uff0c\u800c\u4e14\u53ef\u80fd\u52a0\u5165\u65b0\u7684\u7ea2\u70b9\u3002\n\n\u6240\u4ee5\u7ed3\u8bba\u662f\uff1a\u4e24\u6761\u5e73\u884c\u7ebf\u80af\u5b9a\u5206\u522b\u8fc7\u4e24\u4e2a\u84dd\u70b9\uff0c\u800c\u4e14\u8fd8\u6709\u4e00\u6761\u5e73\u884c\u7ebf\u8fc7\u4e00\u4e2a\u7ea2\u70b9\u3002\n\n\u5148\u679a\u4e3e\u4e00\u4e2a\u84dd\u70b9\u548c\u4e00\u4e2a\u7ea2\u70b9\uff0c\u4e00\u6761\u7ebf\u8fc7\u8fd9\u4e24\u4e2a\u70b9\uff1b\u7136\u540e\u627e\u5230\u5728\u4e24\u4e2a\u65b9\u5411\u8ddd\u79bb\u8fd9\u6761\u7ebf\u6700\u8fd1\u7684\u84dd\u70b9\uff0c\u76f4\u63a5\u7b97\u7ea2\u70b9\u6570\u91cf\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6$O(n^3)$\u3002\n\n\u76f4\u63a5\u505a\u80af\u5b9a\u8fc7\u4e0d\u53bb\uff0c\u6240\u4ee5\u5148\u628a\u6574\u5f20\u56fe\u968f\u673a\u65cb\u8f6c\uff0c\u7136\u540e\u6309\u7167x\u5750\u6807\u6392\u5e8f\u3002\n\n\u65f6\u95f4\u7684\u6b63\u786e\u6027\u8bf7\u54a8\u8be2@Leo______ \u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define il inline\n#define vd void\nil int gi(){\n    int x=0,f=0;char ch=getchar();\n    while(!isdigit(ch))f^=ch=='-',ch=getchar();\n    while(isdigit(ch))x=x*10+ch-'0',ch=getchar();\n    return f?-x:x;\n}\nstruct point{double x,y;}r[1010],b[1010];\nil bool operator<(const point&a,const point&b){return a.x<b.x;}\nchar col;\nint main(){\n#ifndef ONLINE_JUDGE\n    freopen(\"in.in\",\"r\",stdin);\n    freopen(\"out.out\",\"w\",stdout);\n#endif\n    int n=gi(),R=0,B=0;\n    srand(time(NULL));\n    double v=rand()%1000*0.1+0.1;\n    for(int i=1;i<=n;++i){\n        int _x=gi(),_y=gi();\n        do col=getchar();while(col!='R'&&col!='B');\n        if(col=='R')r[++R]=(point){sin(v)*_x-cos(v)*_y,sin(v)*_y-cos(v)*_x};\n        else b[++B]=(point){sin(v)*_x-cos(v)*_y,sin(v)*_y-cos(v)*_x};\n    }\n    std::sort(r+1,r+R+1);\n    std::sort(b+1,b+B+1);\n    if(!B)return printf(\"%d\\n\",n),0;\n    int ans=0;\n    double kk,bb,dist,dist_up,dist_dn;\n    int upans,dnans;\n    for(int i=1;i<=B;++i)\n        for(int j=1;j<=R;++j){\n            kk=1.0*(b[i].y-r[j].y)/(b[i].x-r[j].x),bb=b[i].y-kk*b[i].x;\n            dist_up=1e18,dist_dn=1e18;\n            for(int k=1;k<=B;++k)\n                if(k!=i){\n                    dist=kk*b[k].x+bb-b[k].y;\n                    if(dist<0){\n                        if(-dist<dist_up)dist_up=-dist;\n                    }else{\n                        if(dist<dist_dn)dist_dn=dist;\n                    }\n                }\n            upans=1,dnans=1;\n            for(int k=1;k<=R;++k)\n                if(k!=j){\n                    dist=kk*r[k].x+bb-r[k].y;\n                    if(dist<0){\n                        if(-dist<=dist_up+1e-7)++upans;\n                    }else{\n                        if(dist<=dist_dn+1e-7)++dnans;\n                    }\n                }\n            ans=std::max(ans,std::max(upans,dnans));\n        }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1546851641,
        "uid": 23118,
        "name": "\u03bb\u1d09\u028d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4385 \u3010[COCI2009]Dvapravca\u3011"
    }
]
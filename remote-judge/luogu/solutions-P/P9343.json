[
    {
        "content": "\u5bb9\u6613\u60f3\u5230\u5f53\u5bf9\u4e8e $x$ \u53f7\u9152\uff0c\u5047\u5982\u8f93\u5165\u6570\u636e\u51fa\u73b0\u4e86 `1 x` \u548c `2 x`\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u505a\u5230\u6bcf\u676f\u9152\u90fd\u81f3\u5c11\u6709 $1$\u3002\u540c\u65f6\u8fd8\u8981\u8003\u8651\u5230\u5047\u5982\u5230\u6700\u540e\u90fd\u6ca1\u6709\u8fd9\u79cd\u60c5\u51b5\u51fa\u73b0\uff0c\u6709\u4e24\u79cd\u60c5\u51b5\u4e5f\u662f\u53ef\u4ee5\u7684\uff1a$o = 1$ \u65f6 $x$ \u7684\u79cd\u7c7b\u5047\u5982\u7b49\u4e8e $n$ \u6216\u8005 $o = 2$ \u65f6 $x$ \u7684\u79cd\u7c7b\u5927\u4e8e $1$\u3002\n\n\u5b9e\u73b0\u8fd9\u4e2a\u5e76\u4e0d\u96be\uff0c\u5f00\u6876\u5206\u522b\u8bb0\u5f55 $o = 1$ \u548c $o = 2$ \u7684 $x$\uff0c\u7136\u540e\u5904\u7406\u5c31\u5341\u5206\u7b80\u5355\u4e86\uff0c\u66f4\u65b0\u9700\u8981\u7684\u8ba1\u6570\u5668\u5e76\u5224\u65ad\u662f\u5426\u80fd\u6ee1\u8db3\u9898\u610f\u5373\u53ef\u3002\u6ce8\u610f\u8981\u591a\u6d4b\u6e05\u7a7a\u4ee5\u53ca\u5c0f\u5fc3\u4e0d\u8981\u8bfb\u5165\u5230\u4e00\u534a\u5c31\u628a `solve` \u7ed3\u675f\u4e86\u3002\n\n```cpp\nvoid solve() {\n    int cnt1 = 0, cnt2 = 0;\n    memset(vis1, false, sizeof vis1);\n    memset(vis2, false, sizeof vis2);\n    scanf (\"%d%d\", &n, &m);\n    for (int i = 1; i <= m; i++) scanf (\"%d%d\", &o[i], &x[i]);\n    for (int i = 1; i <= m; i++) {\n        if (o[i] == 1) {\n            if (vis2[x[i]]) {\n                cout << i << '\\n';\n                return;\n            }\n            if (!vis1[x[i]]) cnt1++, vis1[x[i]] = true;\n        }\n        if (o[i] == 2) {\n            if (vis1[x[i]]) {\n                cout << i << '\\n';\n                return;\n            }\n            if (!vis2[x[i]]) cnt2++, vis2[x[i]] = true;\n        }\n        if (cnt2 > 1 || cnt1 == n) {\n            cout << i << '\\n';\n            return;\n        }\n    }\n    puts(\"-1\");\n}\n```",
        "postTime": 1684231775,
        "uid": 672333,
        "name": "VT_SODC3DC3BSLF",
        "ccfLevel": 0,
        "title": "P9343 \u9898\u89e3"
    },
    {
        "content": "### \u601d\u8def\n\u5171\u4e09\u79cd\u53ef\u8003\u8651\u7684\u60c5\u51b5\u3002\n\n1. \u5bf9\u4e8e $x$ \u53f7\u9152\uff0c\u8fdb\u884c\u4e00\u6b21 $1$ \u64cd\u4f5c\u8ba9\u81ea\u5df1\u7684\u8d34\u4e0a\u7ea2\u7eb8\uff0c\u518d\u8fdb\u884c\u4e00\u6b21 $2$ \u64cd\u4f5c\u7ed9\u5176\u5b83\u7684\u9152\u8d34\u4e0a\u7ea2\u7eb8\u3002\u987a\u5e8f\u4efb\u610f\uff0c\u5bf9\u5e94\u6b21\u6570\u4e3a $2$\u3002\n    \n2. \u5bf9\u4e8e $x$ \u548c $y$ \u53f7\u9152\uff0c\u82e5 $(x \\neq y)$\uff0c\u5219\u5728\u7ed9 $x$ \u64cd\u4f5c\u540e\u7ed9 $y$ \u64cd\u4f5c\u65f6 $x$ \u53f7\u4e5f\u4f1a\u8d34\u4e0a\u3002\u5bf9\u5e94\u6b21\u6570\u4e3a $2$\u3002\n\n3. \u5bf9\u4e8e\u4e0a\u8ff0\u4e24\u79cd\u5747\u4e0d\u53ef\u7684\u60c5\u51b5\uff0c\u6bcf\u58f6\u9152\u5747\u8fdb\u884c\u4e00\u6b21 $1$ \u64cd\u4f5c\uff0c\u987a\u5e8f\u4efb\u610f\uff0c\u5bf9\u5e94\u6b21\u6570\u4e3a $n$\u3002\n\n### \u4ee3\u7801\u5b9e\u73b0\n\u5148\u7279\u5224\uff08~~\u867d\u7136\u53ef\u80fd\u6ca1\u5565\u7528~~\uff09\u5982\u679c $n=1$\uff0c\u5219\u76f4\u63a5\u5224\u65ad\u662f\u5426\u6709\u5bf9 $1$ \u53f7\u9152\u7684 $1$ \u64cd\u4f5c\u3002\n\n\u5148\u5bf9\u64cd\u4f5c\u53bb\u91cd\u3002\u7edf\u8ba1 $2$ \u64cd\u4f5c\u4e2a\u6570\uff0c\u82e5\u4e2a\u6570 $\\geq 2$\uff0c\u5bf9\u5e94\u65b9\u6848 $2$\uff0c\u7ed3\u679c\u4e3a $2$\uff1b\u82e5\u4e2a\u6570 $=1$\uff0c\u5219\u5224\u65ad\u662f\u5426\u7b26\u5408\u65b9\u6848 $1$\uff0c\u5982\u679c\u662f\uff0c\u7b54\u6848\u4e3a $2$\uff0c\u53cd\u4e4b\u5f00\u4e2a\u6876\u5224\u65ad\u662f\u5426\u6ee1\u8db3\u65b9\u6848 $3$\uff0c\u82e5\u662f\u5219\u7b54\u6848\u4e3a $n$\uff0c\u53cd\u4e4b\u8f93\u51fa $-1$\u3002",
        "postTime": 1684571736,
        "uid": 540363,
        "name": "A_Passing_Creeper",
        "ccfLevel": 3,
        "title": "\u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f"
    },
    {
        "content": "## \u9898\u76ee\u63cf\u8ff0\n\u8fd9\u9053\u9898\u8981\u6c42\u6211\u4eec\u901a\u8fc7 $1$\u3001$2$ \u4e24\u79cd\u64cd\u4f5c\u66f4\u65b0\u53bb\u7ef4\u62a4\u4e00\u4e2a\u521d\u59cb\u5168\u7f6e $0$ \u7684\u5e8f\u5217\uff0c\u95ee\u5728\u7ed9\u5b9a\u8981\u6c42 $m$ \u7684\u8303\u56f4\u5185\u6700\u5c11\u591a\u5c11\u6b21\u53ef\u4ee5\u4f7f\u5f97\u5e8f\u5217\u5747\u975e $0$\uff0c\u5426\u5219\u8f93\u51fa $-1$\u3002\n\n## \u89e3\u9898\u601d\u8def\n\n### \u76f8\u5bf9\u6cd5\u4e0e\u7ebf\u6bb5\u6811\n\n\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\uff0c\u8fd9\u9053\u9898\u5982\u679c\u7528\u66b4\u529b\u6a21\u62df\uff0c\u590d\u6742\u5ea6\u6765\u5230\u4e86\u6211\u4eec\u96be\u4ee5\u63a5\u53d7\u7684 $O(n m)$ \u7ea7\u522b\uff0c\u8fd9\u65f6\u6211\u4eec\u80af\u5b9a\u9700\u8981\u8003\u8651\u5728\u64cd\u4f5c $2$ \u4e0a\u52a8\u52a8\u8111\u7b4b\u3002\n\n\u6211\u4eec\u5bb9\u6613\u5f97\u51fa\uff0c\u4ee5\u76f8\u5bf9\u7684\u89c6\u89d2\u53bb\u770b\u5f85\u64cd\u4f5c $2$\uff0c\u5b83\u66f4\u50cf\u662f\u5c06\u81ea\u5df1\u51cf\u53bb $1$ \u540e\u5f97\u5230\u7684\u7ed3\u679c\uff0c\u4f46\u662f\u8fd9\u6837\u80af\u5b9a\u548c\u9898\u76ee\u4e0d\u7b26\uff0c\u662f\u54ea\u91cc\u9519\u4e86\u5462\uff1f\n\n\u518d\u6b21\u89c2\u5bdf\uff0c\u53ef\u4ee5\u53d1\u73b0\u5176\u5b9e\u6240\u8981\u6c42\u8d34\u7684\u7ea2\u7eb8\u81f3\u5c11\u6240\u9700\u7684\u6570\u91cf\u4e5f\u968f\u4e4b\u66f4\u65b0\u4e86\uff0c\u4e5f\u662f\u51cf\u53bb\u4e86 $1$\u3002\u56e0\u4e3a\u6211\u4eec\u662f\u4ee5\u76f8\u5bf9\u7684\u89c6\u89d2\u66f4\u65b0\u64cd\u4f5c $2$ \u7684\uff0c\u8fd9\u5c31\u5bfc\u81f4\u5982\u679c\u4e0d\u66f4\u65b0\u81f3\u5c11\u6570\u91cf\uff0c\u6211\u4eec\u5176\u4ed6\u7684\u5e8f\u5217\u503c\u76f8\u5f53\u4e8e\u6ca1\u6709\u4e0e\u81f3\u5c11\u6570\u91cf\u62c9\u5f00\u5dee\u8ddd\uff0c\u5373\u6ca1\u6709\u52a0\u4e0a $1$\u3002\n\n\u81f3\u6b64\uff0c\u6211\u4eec\u4fbf\u53ef\u4ee5\u8bf7\u51fa\u4eca\u5929\u7684\u4e3b\u89d2\u4e86\uff1a\u7ebf\u6bb5\u6811\n\n\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u53ef\u4ee5\u4ee5 $O(\\log n)$ \u7684\u590d\u6742\u5ea6\u4fee\u6539\u5355\u70b9\u6570\u503c\u5e76\u67e5\u8be2\u533a\u95f4\u6700\u503c\uff0c\u5b8c\u7f8e\u5951\u5408\u672c\u9898\u8981\u6c42\uff0c\u677f\u5b50\u4e00\u5957\u5373\u53ef\u3002\u603b\u4f53\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n+m \\log n)$\u3002\n\n\u5b8c\u7ed3\u6492\u82b1~\n\n\u732e\u4e0a\u849f\u84bb\u7684 AC \u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=2000010;\n\nint k,n,m,key,x;\nbool flag;//\u8f93\u51fa\u5224\u5b9a\uff0c\u6211\u4e2a\u4eba\u7684\u7528\u6cd5 \n\nstruct node//\u7ecf\u5178\u533a\u95f4\u7ebf\u6bb5\u6811 \n{\n\tint l,r;\n\tint dat;\n}t[N*4];\n\nvoid build(int p,int l,int r)//\u5efa\u6811 \n{\n\tt[p].l=l,t[p].r=r;\n\tif(l==r)\n\t{\n\t\tt[p].dat=0;\n\t\treturn;\n\t}\n\tint mid=(l+r)/2;\n\tbuild(p*2,l,mid);\n\tbuild(p*2+1,mid+1,r);\n\tt[p].dat=min(t[p*2].dat,t[p*2+1].dat);\n}\n\nvoid change(int p,int x,int v)//\u5355\u70b9\u66f4\u6539 \n{\n\tif(t[p].l==t[p].r)\n\t{\n\t\tt[p].dat+=v;\n\t\treturn;\n\t}\n\tint mid=(t[p].l+t[p].r)/2;\n\tif(x<=mid) change(p*2,x,v);\n\telse change(p*2+1,x,v);\n\tt[p].dat=min(t[p*2].dat,t[p*2+1].dat);\n}\n\nint main()\n{\n\tscanf(\"%d\",&k);\n\twhile(k--)\n\t{\n\t\tscanf(\"%d %d\",&n,&m);\n\t\tbuild(1,1,n);\n\t\tflag=false;\n\t\tint line=1;//\u81f3\u5c11\u6570\u91cf\u4e3a1\uff0c\u5373\u6700\u5c0f\u503c\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e\u8fd9\u4e2a\u6570 \n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t\tscanf(\"%d %d\",&key,&x);\n\t\t\tif(flag) continue;\n\t\t\tflag=true;\n\t\t\tswitch(key)\n\t\t\t{\n\t\t\t\tcase 1:\n\t\t\t\t\tchange(1,x,1);//\u81ea\u5df1\u52a01 \n\t\t\t\t\tif(t[1].dat<line) flag=false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tchange(1,x,-1);line--;//\u81ea\u5df1\u548c\u81f3\u5c11\u6240\u9700\u6570\u91cf\u51cf1 \n\t\t\t\t\tif(t[1].dat<line) flag=false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(flag) printf(\"%d\\n\",i);\n\t\t}\n\t\tif(!flag) printf(\"-1\\n\");\n\t}\n\treturn 0;\n}\n//\u6211\u81ea\u5df1\u662f\u7528t[1]\u76f4\u63a5\u67e5\u8be21-n\u6700\u503c\u7684\uff0c\u6ca1\u6709\u5199\u533a\u95f4\u67e5\u8be2\u51fd\u6570\u3002\u60f3\u4e86\u89e3\u7684OIer\u53ef\u4ee5\u81ea\u884c\u67e5\u9605\u76f8\u5173\u8d44\u6599\u3002\n```\n",
        "postTime": 1684059681,
        "uid": 764944,
        "name": "zhzkiller",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P9343 \u3010\u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P9343)\n\n\u7b80\u5355\u5206\u5757\u677f\u5b50\u3002\n\n\u6211\u4eec\u7ef4\u62a4\u6bcf\u4e2a\u5757\u7684\u6743\u503c\u548c\uff0c\u5f53\u4e00\u4e2a\u676f\u5b50\u88ab\u8d34\u4e0a\u7ea2\u7eb8\u65f6\uff0c\u5b83\u7684\u6743\u503c\u4e3a $0$\uff0c\u5426\u5219\u4e3a $1$\uff08\u521d\u59cb\u5168\u4e3a $1$\uff09\u3002\u663e\u7136\u5730\uff0c\u5f53\u6240\u6709\u5757\u7684\u6743\u503c\u603b\u548c\u4e3a $0$ \u65f6\uff0c\u6240\u6709\u7684\u676f\u5b50\u90fd\u88ab\u8d34\u4e0a\u4e86\u7ea2\u7eb8\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u8fd9\u91cc\u7528\u7684\u662f\u51cf\uff0c\u6240\u4ee5\u64cd\u4f5c\u4e4b\u524d\u8981\u989d\u5916\u5224\u65ad\u8be5\u676f\u5b50\u662f\u5426\u5df2\u7ecf\u4e3a $0$\uff08\u5426\u5219\u53d8\u6210\u8d1f\u6570\uff0c\u7edf\u8ba1\u65f6\u4f1a\u51fa\u95ee\u9898\uff09\u3002\n\n\u5355\u70b9\u4fee\u6539 $\\Theta(1)$\uff0c\u533a\u95f4\u4fee\u6539 `1~(x-1)` \u548c `(x+1)~n` \u4e3a $\\Theta(\\sqrt{n})$\uff08\u5f53\u7136\u64cd\u4f5c\u4e4b\u524d\u8981\u5224\u65ad\u662f\u5426\u8d8a\u754c\uff09\uff0c\u6bcf\u6b21\u67e5\u8be2 $\\Theta(\\sqrt{n})$\u3002\n\n\u603b\u590d\u6742\u5ea6 $\\Theta(m\\sqrt{n})$\u3002\n\nCode:\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+10,M=5e2+10;\nint n,m,T,len,cnt,bar[N],st[M],ed[M],sum[M];\nbool a[N];\nvoid modify(int x,int y)\n{\n    int l=bar[x],r=bar[y];\n    if(l==r)\n    {\n        for(int i=x;i<=y;i++)if(a[i]&&sum[l])a[i]=0,sum[l]--;\n        return;\n    }\n    for(int i=l+1;i<=r-1;i++)sum[i]=0;\n    for(int i=x;i<=ed[l];i++)if(a[i]&&sum[l])a[i]=0,sum[l]--;\n    for(int i=y;i>=st[r];i--)if(a[i]&&sum[r])a[i]=0,sum[r]--;\n    return;\n}\nsigned main()\n{\n    scanf(\"%d\",&T);\n    while(T--)\n    {\n        scanf(\"%d%d\",&n,&m);\n        len=sqrt(n);cnt=n/len+bool(n%len);\n        for(int i=1;i<=n;i++)a[i]=1;\n        for(int i=1;i<=cnt;i++)\n        {\n            st[i]=ed[i-1]+1;ed[i]=min(i*len,n);sum[i]=ed[i]-st[i]+1;\n            for(int j=st[i];j<=ed[i];j++)bar[j]=i;\n        }\n        int flag=0;\n        for(int i=1;i<=m;i++)\n        {\n            int op,x,tmp=0;\n            scanf(\"%d%d\",&op,&x);\n            if(flag)continue;\n            if(op==1&&a[x]&&sum[bar[x]])a[x]=0,sum[bar[x]]--;\n            else if(op==2){if(x>1)modify(1,x-1);if(x<n)modify(x+1,n);}\n            for(int i=1;i<=cnt;i++)tmp+=sum[i];\n            if(!tmp)flag=i;\n        }\n        printf(\"%d\\n\",!flag?-1:flag);\n    }\n    return 0;\n}\n```\n\n[record](https://www.luogu.com.cn/record/110370877)",
        "postTime": 1684730937,
        "uid": 736801,
        "name": "ACRUSHj",
        "ccfLevel": 0,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f"
    },
    {
        "content": "\u9664\u4e86\u5e38\u89c4 $O(m)$ \u505a\u6cd5\uff0c\u8fd8\u53ef\u4ee5\u4e8c\u5206\u7b54\u6848\u3002\u8fd9\u6837\uff0c\u5728\u5224\u5b9a\u65f6\u53ef\u4ee5\u904d\u5386\u64cd\u4f5c\uff0c\u518d\u5224\u65ad $n$ \u4e2a\u70b9\u662f\u5426\u90fd\u6709\u7ea2\u7eb8\u3002  \n\n\u5224\u5b9a\u65f6\uff0c\u5bf9\u4e8e $n$ \u4e2a\u70b9\u6bcf\u4e2a\u70b9\u5206\u522b\u5bf9\u662f\u5426\u8fdb\u884c\u8fc7\u4e24\u79cd\u64cd\u4f5c\u8bb0\u5f55\u4e24\u4e2a\u503c\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\uff0c\u8981\u6c42\u5b58\u5728 $1$ \u64cd\u4f5c\u6216\u6709\u975e\u81ea\u5df1\u7684 $2$ \u64cd\u4f5c\u3002  \n\n```cpp\nauto bsearch(auto&& check, auto ok, auto ng) {\n    while (std::abs(ok - ng) > 1) {\n        auto x = (ng + ok) >> 1;\n        if (check(x))\n            ok = x;\n        else\n            ng = x;\n    }\n    return ok;\n}\nint main() {\n    multipleTests([&]() {\n        dR(int, n, m);\n        dRV(int, a, m, 2); // \u64cd\u4f5c\n        auto check = [&](int m) {\n            vi c(n), d(n);\n            for (int i = 0; i < m; i++)\n                if (a[i][0] == 1)\n                    c[a[i][1] - 1] = 1;\n                else\n                    d[a[i][1] - 1] = 1;\n            int t = sum(d);\n            bool ok = true;\n            for (int i = 0; i < n; i++)\n                ok &= c[i] || (d[i] && t > 1) || (!d[i] && t);\n            return ok;\n        };\n        if (!check(m))\n            return writeln(-1);\n        writeln(bsearch(check, m, 0));\n    });\n    return 0;\n}\n```",
        "postTime": 1684602899,
        "uid": 84282,
        "name": "andyli",
        "ccfLevel": 7,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "## Description\n\n\u7ed9\u5b9a\u4e00\u4e2a\u521d\u59cb\u6240\u6709\u5143\u7d20\u4e3a $0$ \u7684\u5e8f\u5217 $\\{a_n\\}$\uff0c\u652f\u6301\u4e0b\u5217\u4e24\u79cd\u64cd\u4f5c\uff1a\n1. \u5355\u70b9\u52a0 $1$\u3002\n1. \u9664\u67d0\u4e00\u5355\u70b9\u5168\u5c40\u52a0 $1$\u3002\n\n\u6c42\u51fa\u6700\u65e9\u7684\u65f6\u95f4\u4f7f\u5f97\u6240\u6709 $a_i>0$\u3002\n\n## Solution\n\n- \u64cd\u4f5c $2$ \u53ef\u4ee5\u62c6\u5206\u4e3a\u5168\u5c40\u52a0\u548c\u5355\u70b9\u51cf\u3002\n- \u5168\u5c40\u52a0\u53ef\u4ee5\u7ef4\u62a4\u53d8\u91cf $\\text{tag}$ \u8868\u793a\u5168\u5c40\u52a0\u4e86\u591a\u5c11\u3002\n- \u5355\u70b9\u52a0\u6216\u51cf\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u7ef4\u62a4\u3002\n- \u540c\u65f6\u7ef4\u62a4 $a_i>0$ \u7684 $i$ \u4e2a\u6570\u5373\u53ef\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nnamespace Milkcat {\n\ttypedef long long LL;\n\tconst int N = 1e6 + 5;\n\tint n, m, opt, x, tag, cnt, ans, a[N];\n\tint main() {\n\t\tcin >> n >> m, ans = -1;\n\t\tfor (int i = 1; i <= m; i ++) {\n\t\t\tcin >> opt >> x;\n\t\t\tif (opt == 1) {\n\t\t\t\tif (tag + a[x] <= 0) cnt ++; // \u82e5\u8be5\u70b9\u539f\u6765 =0 \u5219 cnt++\n \t\t\t\ta[x] ++;\n\t\t\t}\n\t\t\tif (opt == 2) {\n\t\t\t\tcnt = n; // \u9664\u8be5\u70b9\u5916\u6240\u6709\u5143\u7d20 +1 \u540e\u80af\u5b9a >0\n\t\t\t\tif (tag + a[x] <= 0) cnt --; // \u82e5\u8be5\u70b9 <0 \u5219 cnt=n-1\n\t\t\t\ttag ++, a[x] --; // \u7ef4\u62a4\u6570\u7ec4\n\t\t\t}\n\t\t\tif (cnt == n && ans == -1) ans = i; // \u6700\u65e9\u7684\u65f6\u95f4\n\t\t}\n\t\tcout << ans << '\\n';\n\t\tfor (int i = 1; i <= n; i ++) a[i] = 0; // \u6e05\u7a7a\n\t\ttag = cnt = 0;\n\t\treturn 0;\n\t}\n}\nint main() {\n    int T = 1;\n    cin >> T;\n    while (T --) Milkcat::main();\n    return 0;\n}\n\n\n```",
        "postTime": 1684548611,
        "uid": 560516,
        "name": "\u55b5\u4ed4\u725b\u5976",
        "ccfLevel": 0,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee](https://www.luogu.com.cn/problem/P9343)\n\n### \u89e3\u6790\n\u8003\u8651\u64cd\u4f5c\u4e00\uff0c\u7ed9\u4e00\u676f\u9152\u8d34\u4e0a\u4e00\u5f20\u7ea2\u7eb8\uff0c\u8fd9\u4e2a\u5f88\u65b9\u4fbf\u64cd\u4f5c\uff0c$\\mathcal{O}(1)$ \u6807\u8bb0\u5373\u53ef\u3002\n\n\u8003\u8651\u64cd\u4f5c\u4e8c\uff0c\u7ed9\u9664\u4e86\u7ed9\u5b9a\u9152\u7684\u9152\u8d34\u4e0a\u4e00\u5f20\u7ea2\u7eb8\uff0c\u8fd9\u4e2a\u5f88\u5bb9\u6613\u60f3\u5230\u4e00\u79cd $\\mathcal{O}(n)$ \u7684\u66b4\u529b\u6807\u8bb0\u3002\u4f46\u662f\u4f60\u4f1a\u53d1\u73b0\uff0c\u5728\u8fd9\u6b21\u64cd\u4f5c\u4e4b\u540e\uff0c\u81f3\u591a\u53ea\u6709\u4e00\u676f\u9152\uff08\u8fd9\u676f\u9152\uff09\u6ca1\u6709\u88ab\u6807\u8bb0\u3002\u6b64\u65f6\u5982\u679c\u8fd9\u676f\u9152\u5df2\u7ecf\u88ab\u6807\u8bb0\uff0c\u90a3\u4e48\u4efb\u52a1\u5b8c\u6210\u3002\u53cd\u4e4b\u5219\u7ee7\u7eed\u64cd\u4f5c\u3002\n\n\u8fd9\u4e2a\u65f6\u5019\u4e0d\u96be\u60f3\u5230\u4e00\u70b9\uff0c\u64cd\u4f5c\u4e8c\u81f3\u591a\u6267\u884c $2$ \u6b21\u3002\u5bf9\u4e8e\u76f8\u540c\u7684 $x$\uff0c\u64cd\u4f5c\u663e\u7136\u65e0\u6548\uff1b\u5bf9\u4e8e\u4e0d\u540c\u7684 $x$\uff0c\u64cd\u4f5c\u4e4b\u540e\u663e\u7136\u6bcf\u4e00\u676f\u9152\u5c31\u90fd\u6709\u4e86\u7ea2\u7eb8\uff0c\u5b9e\u9645\u4e0a\u64cd\u4f5c\u4e8c\u7684\u603b\u590d\u6742\u5ea6\u53ea\u6709 $\\mathcal{O}(n)$\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u6253\u4e2a\u6807\u8bb0\u770b\u770b\u64cd\u4f5c\u4e8c\u662f\u5426\u88ab\u6267\u884c\u8fc7\u4e86\u5373\u53ef\uff0c\u9664\u4e86\u7b2c\u4e00\u4e2a\uff0c\u5176\u4f59\u7684\u4e0d\u5fc5\u5b9e\u9645\u64cd\u4f5c\u3002\n\n\u8fd9\u6837\u5b50\u6211\u4eec\u5c31\u5199\u51fa\u4e86\u590d\u6742\u5ea6\u7ea6\u4e3a $\\mathcal{O}(\\sum n+\\sum m)$ \u7684\u4ee3\u7801\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\nusing std::cin;using std::cout;\nconstexpr int N=200005;\nint t,n,m,o,x,cnt,now=-1;\nbool vis,p[N]; \nsigned main(){\n// \tfreopen(\".in\",\"r\",stdin);\n// \tfreopen(\".out\",\"w\",stdout);\n\tstd::ios::sync_with_stdio(false);\n\tcin.tie(nullptr);cout.tie(nullptr);\n    for(cin>>t;t--;){\n    \tcin>>n>>m;\n    \tfor(int i=1;i<=m;++i){\n    \t\tcin>>o>>x;\n    \t\tif(o==1){//\u64cd\u4f5c\u4e00\u76f4\u63a5\u6807\u8bb0\n    \t\t\tcnt+=!p[x];\n    \t\t\tp[x]=1;\n\t\t\t}else if(o==2){//\u64cd\u4f5c\u4e8c\u66b4\u529b\u4fee\u6539\u7b2c\u4e00\u7ec4\n\t\t\t\tif(p[x]==1) cnt=n;\n\t\t\t\telse cnt=n-1;\n\t\t\t\tif(!vis){\n\t\t\t\t\tfor(int i=1;i<x;++i) p[i]=1;\n\t\t\t\t\tfor(int i=x+1;i<=n;++i) p[i]=1;\n\t\t\t\t}\n\t\t\t\tvis=1;//\u5269\u4e0b\u7684\u5c31\u4e0d\u7528\u52a8\u624b\u4e86\uff01\n\t\t\t}\n\t\t\tif(cnt==n)\n\t\t\t\tif(now==-1)\n\t\t\t\t\tnow=i;//\u6211\u7684\u76ee\u6807\u8fbe\u6210\u4e86\uff01\n\t\t}\n\t\tcout<<now<<'\\n';\n\t\tnow=-1;vis=cnt=0;\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tp[i]=0;//\u591a\u6d4b\u4e0d\u6e05\u7a7a\uff0c\u7206\u96f6\u4e24\u884c\u6cea\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1684073956,
        "uid": 394167,
        "name": "Dragon_Horse",
        "ccfLevel": 5,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "\u56e0\u4e3a\u8fd9\u9053\u9898\u53ea\u8003\u8651\u8d34\u4e86\u6216\u6ca1\u8d34\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u8d34\u7eb8\u770b\u6210\u628a\u8981\u8d34\u7684\u533a\u95f4\u90fd\u63a8\u5e73\u6210\u201c\u8d34\u4e86\u201d\u7684\u72b6\u6001\u3002\n\n\u90a3\u4e48\uff1a\n\n\u9996\u5148\u5bf9\u4e8e $op=1$\uff0c\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a $[v,v]$ \u7684\u63a8\u5e73\u6210\u201c\u8d34\u4e86\u201d\u7684\u64cd\u4f5c\u3002\n\n\u5176\u6b21\u5bf9\u4e8e $op=2$\uff0c\u53ef\u4ee5\u770b\u4f5c\u4e24\u4e2a\u5206\u522b\u662f $[1,v-1]$ \u548c $[v+1,n]$ \u7684\u63a8\u5e73\u6210\u201c\u8d34\u4e86\u201d\u7684\u64cd\u4f5c\u3002\n\n\u7136\u540e\u53d1\u73b0\u8fd9\u5c31\u662f\u4e2a\u73c2\u6735\u8389\u6811\u677f\u5b50\u9898\u3002\n\n\u7531\u4e8e\u8fd9\u9053\u9898\u53ea\u6709\u63a8\u5e73\u64cd\u4f5c\uff0c\u6240\u4ee5\u4e0d\u7528\u62c5\u5fc3\u88ab\u5361\u3002\n\n------------\n\n\u5173\u4e8e\u73c2\u6735\u8389\u6811\u7684\u5b9e\u73b0\u8fc7\u7a0b\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u51fd\u6570\u5b9e\u73b0\u53ef\u5728\u8fd9\u91cc\u770b\uff1a<https://oi-wiki.org/misc/odt/>\u3002\n\n------------\n\n\u4ee3\u7801\uff1a\n\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint t,n,m,op,v,ans,k;\nstruct CT{\n    int l,r;\n    mutable int v;\n    CT(const int &il,const int &ir,const int &iv) : l(il),r(ir),v(iv){};\n    inline bool operator<(const CT &o) const{return l<o.l;};\n};\nset <CT> ODT;\ninline int read(){\n    int s=0,f=1;\n    char ch=getchar();\n    while(ch>'9'||ch<'0') ch=getchar();\n    while(ch>='0'&&ch<='9') s=s*10+ch-48,ch=getchar();\n    return s*f;\n}\nauto spilt(int x){\n    if(x>n) return ODT.end();\n    auto it=--ODT.upper_bound(CT(x,0,0));\n    if(it->l==x) return it;\n    int l=it->l,r=it->r,v=it->v;\n    ODT.erase(it);\n    ODT.insert(CT(l,x-1,v));\n    return ODT.insert(CT(x,r,v)).first;\n}\nvoid assign(int l,int r,int v){\n    auto itr=spilt(r+1),itl=spilt(l),it=itl;\n    for(;itl!=itr;++itl) ans-=itl->v*(itl->r-itl->l+1);\n    ODT.erase(it,itr);\n    ODT.insert(CT(l,r,v));\n    ans+=v*(r-l+1);\n}\nint main(){\n    t=read();\n    while(t--){\n\t    ODT.insert(CT(1,n,0));\n        n=read();\n        m=read();\n        for(int i=1;i<=m;i++){\n            op=read();\n            v=read();\n            if(ans<n){\n                if(op==1) assign(v,v,1);\n                else if(op==2) assign(1,v-1,1),assign(v+1,n,1);\n                if(ans>=n) k=i;\n            }\n        }\n        if(k==0) --k;\n        cout<<k<<endl;\n        k=0;\n        ans=0;\n        ODT.clear();\n    }\n}\n```",
        "postTime": 1684065025,
        "uid": 578029,
        "name": "ivyjiao",
        "ccfLevel": 3,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "## \u9898\u76ee\u601d\u8def\n\u5b9a\u4e49\u4e24\u4e2a `set` \u5bb9\u5668 `first` \u548c `second` \u5206\u522b\u8868\u793a\u7b2c\u4e00\u548c\u7b2c\u4e8c\u79cd\u64cd\u4f5c\u3002\n\n`set` \u5bb9\u5668\u7684\u597d\u5904\u662f\u53ef\u4ee5\u81ea\u52a8\u53bb\u6389\u91cd\u590d\u7684\u6570\u5b57\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\uff0c\u5728\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\u80fd\u591f\u5168\u90e8\u8d34\u4e0a\u7ea2\u7eb8\uff1a\n- \u5bf9\u4e8e $1$ \u5230 $n$ \u7684\u6570\u90fd\u6709\u4e00\u6b21\u64cd\u4f5c $1$\uff1b\n- \u5bf9\u4e8e\u4e00\u4e2a\u6570 $x$\uff0c\u4e00\u6b21\u64cd\u4f5c $1$ \u548c\u4e00\u6b21\u64cd\u4f5c $2$\uff1b\n- \u4e24\u6b21\u53ca\u4ee5\u4e0a\u4e0d\u76f8\u540c\u7684\u64cd\u4f5c $2$\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u53ef\u4ee5\u5b9e\u73b0\u4ee3\u7801\u4e86\u3002\n\n\u5bf9\u4e8e\u7b2c $i$ \u6b21\u64cd\u4f5c\uff0c\u8bb0\u8f93\u5165\u7684\u6570\u4e3a $x$\u3002\u5982\u679c\u662f\u64cd\u4f5c $1$\uff0c`first` \u63d2\u5165 $x$\uff0c\u5426\u5219 `second` \u63d2\u5165 $x$\u3002\n\n\u63d2\u5165\u540e\uff0c\u6211\u4eec\u5c31\u5224\u65ad\uff0c\u5f53 `first` \u7684\u5927\u5c0f\u4e3a $5$ **\u6216\u8005** `first` \u548c `second` \u91cc\u90fd\u6709 $x$ **\u6216\u8005** `second` \u7684\u5927\u5c0f $\\ge2$\uff0c\u8f93\u51fa $i$\u3002\n\n\u5982\u679c $i$ \u6c38\u8fdc\u6ca1\u6709\u8f93\u51fa\uff0c\u6700\u540e\u8f93\u51fa `-1`\u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint main(){\n\tint T;cin>>T;\n\twhile(T--){\n\t\tint n,m,ans=-1;\n\t\tcin>>n>>m;\n\t\tbool f=false;\n\t\tset<int>first,second;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tshort op;cin>>op;\n\t\t\tint x;cin>>x;\n\t\t\tif(f)continue;\n\t\t\tif(op==1)first.insert(x);\n\t\t\telse second.insert(x);\n\t\t\tif(first.size()==n||(first.find(x)!=first.end()&&second.find(x)!=second.end())||(second.size()>1)){\n\t\t\t\tans=i;\n\t\t\t\tf=true;\n\t\t\t}\n\t\t}\n\t\tcout<<ans<<endl;\n\t}\n}\n```\n",
        "postTime": 1684679005,
        "uid": 592684,
        "name": "Jasoncwx",
        "ccfLevel": 0,
        "title": "P9343 \u9898\u89e3"
    },
    {
        "content": "\u672c\u849f\u84bb\u4e0d\u77e5\u9053\u600e\u4e48\u5c31\u60f3\u5230\u4e86 `set`..\n\n\u4ee4 $S$ \u4e3a\u5f53\u524d\u6ca1\u8d34\u4e0a\u7ea2\u7eb8\u7684\u9152\u7684\u7f16\u53f7\u96c6\u5408\uff0c\u5219\u53ea\u9700\u8981\u7ef4\u62a4\u8fd9\u4e2a\u96c6\u5408\uff0c\u5373\u5728\u6bcf\u6b21\u64cd\u4f5c\u540e\u66f4\u65b0 $S$\u3002\u5982\u679c $S$ \u5728\u67d0\u6b21\u64cd\u4f5c\u540e\u53d8\u6210\u7a7a\u96c6\u5408\uff0c\u5c31\u8bf4\u660e\u5728\u8fd9\u6b21\u64cd\u4f5c\u540e\u6240\u6709\u7684\u9152\u90fd\u8d34\u4e0a\u4e86\u7ea2\u7eb8\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u5f97\u51fa\u7b54\u6848\u4e86\u3002\u53cd\u4e4b\uff0c\u5982\u679c $S$ \u5728\u6240\u6709\u64cd\u4f5c\u540e\u6ca1\u53d8\u6210\u7a7a\u96c6\uff0c\u5c31\u8bf4\u660e\u8fd8\u6709\u9152\u6ca1\u8d34\u4e0a\u7ea2\u7eb8\uff0c\u8f93\u51fa `-1`\u3002\n\n```cpp\nn = read(); m = read();\nset <int> qwq;\nint ans = -1;\nfor(register int i = 1;i <= n;i++) //\u521d\u59cb\u5316\u96c6\u5408\n    qwq.insert(i);\nfor(register int i = 1;i <= m;i++){\n    int op , x;\n    scanf(\"%d%d\" , &op , &x);\n    if(ans != -1)\n        continue;\n    if(op == 1 && qwq.find(x) != qwq.end())\n        qwq.erase(x);\n    if(op == 2){\n        if(qwq.find(x) == qwq.end()){ //\u4e0d\u5305\u62ecx\uff0c\u64cd\u4f5c\u540e\u96c6\u5408\u4e3a\u7a7a\u3002\n            qwq.clear();\n            ans = i;\n            continue;\n        }\n        qwq.clear();\n        qwq.insert(x);\n    }\n    if(qwq.empty()) \n        ans = i; //\u4e3a\u7a7a\u8bb0\u5f55\u7b54\u6848\n}\nprintf(\"%d\\n\" , ans);\n```",
        "postTime": 1684575851,
        "uid": 670766,
        "name": "QWQ_SenLin",
        "ccfLevel": 3,
        "title": "P9343 \u9898\u89e3"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P9343)       \n\u6211\u4eec\u8bbe $a_i$ \u4e3a\u7b2c $i$ \u53f7\u9152\u88ab\u8d34\u4e0a\u7684\u7ea2\u7eb8\u6570\u91cf\uff0c\u8bbe $ans$ \u4e3a\u4e3a\u6240\u6709 $a_i$ \u5728**\u5927\u4e8e $1$**  \u7684\u60c5\u51b5\u4e0b\u5e76\u6ee1\u8db3**\u6240\u6709\u9644\u52a0\u6761\u4ef6**\u7684 $a_i$ \u548c\u3002           \n\u518d\u8bbe $mx$ \u4e3a\u8d85\u8fc7 $1$ \u7684 $a_i$ \u6570\u91cf\u3002               \n\u90a3\u4e48\uff0c\u6211\u4eec\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u64cd\u4f5c\uff0c\u5148\u770b\u4e00\u4e0b $a_x$ \u7684\u503c\u3002\u5982\u679c $a_x\u22651$\uff0c\u90a3\u4e48 $ans$ \u52a0 $1$\uff0c\u5426\u5219 $mx$  \u52a0 $1$\u3002 \u6700\u540e\u8981\u4fee\u6539 $a_x$\u3002         \n\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u64cd\u4f5c\uff0c\u6211\u4eec\u9996\u5148\u8981\u5bf9 $a_1$ \u5230 $a_n$ \u8fdb\u884c\u4fee\u6539\uff0c\u518d\u5bf9 $a_x$ \u8fdb\u884c\u4fee\u6539\u3002             \n\u6211\u4eec\u7ee7\u7eed\u5224\u65ad\uff0c\u5982\u679c $a_x\u22651$\uff0c\u90a3\u4e48 $ans$ \u52a0 $mx-1$\uff0c$mx$ \u4fee\u6539\u4e3a $n$\u3002\u5426\u5219\uff0c$ans$ \u52a0 $mx$\uff0c$mx$ \u4fee\u6539\u4e3a $n-1$\u3002          \n\u5728\u6bcf\u4e2a\u64cd\u4f5c\u4e4b\u540e\uff0c\u6211\u4eec\u8bbe $sum=\\sum\\limits^n_{i=1}a_i$\u3002       \n\u5982\u679c\u5df2\u7ecf\u8fbe\u5230\uff0c\u6211\u4eec\u8bb0\u5f55\u4e0b\u6b65\u6570\uff0c\u8bfb\u5165\u6700\u540e\u51e0\u4e2a\u64cd\u4f5c\u5373\u53ef\u3002           \n\u6700\u540e\u8981\u8f93\u51fa\u6b65\u6570\uff0c\u8bb0\u5f97\u5224 `-1`\u3002        \n\u8003\u8651\u5230\u8fd9\u662f\u533a\u95f4\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\uff0c$O(nm)$ \u8fc7\u4e0d\u53bb\uff0c\u6211\u4eec\u9700\u8981\u4f18\u5316\u3002      \n\u76f4\u63a5\u52a0\u5165\u6811\u72b6\u6570\u7ec4\u5373\u53ef\u3002      \n\u8fd9\u91cc\u6811\u72b6\u6570\u7ec4\u7684\u4e24\u4e2a\u6570\u7ec4\u9700\u8981\u66b4\u529b\u6e05\u7a7a\uff0c\u4e0d\u7136\u4f1a TLE\u3002            \n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log m)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002        \n[CODE](https://www.luogu.com.cn/paste/pmg1s3hq)",
        "postTime": 1684570003,
        "uid": 592238,
        "name": "__dest__ruct__or__",
        "ccfLevel": 0,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "\u7ebf\u6bb5\u6811 & \u73c2\u6735\u8389\u6811\u6a21\u677f  \n\u6211\u7528\u7684\u662f\u73c2\u6735\u8389\u6811\u3002  \n\u5bf9\u4e8e\u64cd\u4f5c $1$\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4fee\u6539\u7b2c $x$ \u4e2a\u6570\u5c31\u884c\u3002  \n\u5bf9\u4e8e\u64cd\u4f5c $2$\uff0c\u6211\u4eec\u53ef\u4ee5\u5408\u5e76\u533a\u95f4 $[1, x - 1]$ \u5e76\u66f4\u6539\u4e3a $1$\uff0c\u518d\u5408\u5e76\u533a\u95f4 $[x + 1, n]$ \u5e76\u66f4\u6539\u4e3a $1$\u3002  \n\u6bcf\u6b21\u626b\u4e00\u904d\u6811\u5373\u53ef\u3002  \nAC code\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5 + 1;\nstruct node {\n    int l, r;\n    mutable int d;\n    node(int a, int b, int c) {\n        l = a;\n        r = b;\n        d = c;\n    }\n    node(int a) {\n        l = a;\n    }\n    bool operator < (node x) const {\n        return l < x.l;\n    }\n};\n#define s_it set<node>::iterator\nset <node> s;\nint n, q;\nint a[N];\nvoid build(int n) { //\u5efa\u6811\n\tfor (int i = 1; i <= n; i++) { s.insert(node(i, i, a[i])); }\n\ts.insert(node(n, n, 0));\n}\ns_it split(int pos) { //\u5206\u88c2\n    s_it it = s.lower_bound(node(pos));\n    if (it != s.end() and it->l == pos) { return it; }\n    it--;\n    int l = it->l, r = it->r;\n    int d = it->d;\n    s.erase(it);\n    s.insert(node(l, pos - 1, d));\n    return s.insert(node(pos, r, d)).first;\n}\nvoid assign(int l, int r, int d) { //\u5408\u5e76\n    s_it it2 = split(r + 1), it1 = split(l);\n    s.erase(it1, it2);\n    s.insert(node(l, r, d));\n}\nvoid update(int l, int r, int d) { //\u4fee\u6539\n    s_it it2 = split(r + 1);\n    for (s_it it1 = split(l); it1 != it2; it1++) { it1 -> d += d; }\n}\nbool check(int l, int r) { //\u5224\u65ad\u662f\u5426\u7b26\u5408\u8981\u6c42\n    s_it it2 = split(r + 1);\n    for (s_it it1 = split(l); it1 != it2; it1++) {\n\t\tif (it1 -> d < 1) { return false; }\n\t}\n\treturn true;\n}\nint t;\nint main() {\n\tscanf(\"%d\", &t);\n\twhile (t--) {\n\t\tint n, m;\n\t\tscanf(\"%d%d\", &n, &m);\n\t\ts.clear();\n\t\tfor (int i = 1; i <= n; i++) { a[i] = 0; }\n\t\tbuild(n);\n\t\tbool flag = false;\n\t\tint pos = 0;\n\t\tfor (int i = 1; i <= m; i++) {\n\t\t\tint op, x;\n\t\t\tscanf(\"%d%d\", &op, &x);\n\t\t\tif (flag) { continue; }\n\t\t\tif (op == 1) { update(x, x, 1); }\n\t\t\tif (op == 2) {\n\t\t\t\tassign(1, x - 1, 1);\n\t\t\t\tif (x + 1 <= n) { assign(x + 1, n, 1); }\n\t\t\t}\n\t\t\tif (check(1, n)) {\n\t\t\t\tpos = i;\n\t\t\t\tflag = true;\n\t\t\t}\n\t\t}\n\t\tprintf(\"%d\\n\", (flag ? pos : -1));\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1684499209,
        "uid": 513303,
        "name": "Nemophery",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f"
    },
    {
        "content": "## \u89e3\u6cd5\n\n\u5982\u679c\u4f60\u5728\u6bd4\u8d5b\u65f6\u61d2\u5f97\u8ba8\u8bba\u90a3\u4e48\u591a\u6ee1\u8db3\u8981\u6c42\u7684\u60c5\u51b5\u600e\u4e48\u529e\u5462\uff1f\u5199\u68f5\u7ebf\u6bb5\u6811\u5c31\u884c\u4e86\u3002\n\n\u7b80\u800c\u8a00\u4e4b\uff0c\u9898\u76ee\u8981\u6c42\u6211\u4eec\u5bf9\u4e8e\u4e00\u4e2a\u96f6\u4e00\u4e32\uff0c\u5904\u7406\u4e09\u79cd\u64cd\u4f5c\uff1a\n\n- \u5355\u70b9\u4fee\u6539\u3002\n- \u9664\u67d0\u70b9\u5916\u5168\u90e8\u4fee\u6539\uff08\u5176\u5b9e\u5c31\u662f\u533a\u95f4\u4fee\u6539\uff09\u3002\n- \u6574\u4f53\u6c42\u548c\uff08\u533a\u95f4\u67e5\u8be2\uff09\u3002\n\n\u53ef\u4ee5\u4f7f\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u6bcf\u4e2a\u533a\u95f4\u6743\u503c\u548c\uff0c\u5982\u679c\u67e5\u8be2\u6574\u4e2a\u5e8f\u5217\u7684\u548c\u7b49\u4e8e\u5e8f\u5217\u957f\u5ea6\uff0c\u90a3\u4e48\u8bf4\u660e\u6ee1\u8db3\u9898\u76ee\u8981\u6c42\uff0c\u8f93\u51fa\u64cd\u4f5c\u6b21\u6570\u5373\u53ef\u3002\n\n**\u6ce8\u610f\u5224\u65ad\u51fa\u6240\u6709\u9152\u4e0a\u90fd\u6709\u7ea2\u7eb8\u540e\uff0c\u4f9d\u7136\u8981\u628a\u5269\u4e0b\u7684\u8f93\u5165\u90fd\u8bfb\u5b8c\u3002**\n\n## \u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstring>\n\nconstexpr int N = 2e5 + 5;\nusing namespace std;\n\nclass SGT {\n    int val[N << 2];\n    bool lazy[N << 2];\n    int L, R;\npublic:\n    inline int ls(const int id) const {\n        return id << 1;\n    }\n    inline int rs(const int id) const {\n        return (id << 1) | 1;\n    }\n    inline void setRange(const int l, const int r) {\n        L = l, R = r;\n    }\n    inline void clear(const int n) {\n        memset(val, 0, (n *sizeof(int)) << 2);\n        memset(lazy, 0, (n * sizeof(bool)) << 2);\n    }\n    inline void pushdown(const int id, const int l, const int r) {\n        if (!lazy[id])\n            return;\n        const int mid = (l + r) >> 1;\n        val[ls(id)] = mid - l + 1;\n        val[rs(id)] = r - mid;\n        lazy[ls(id)] = lazy[rs(id)] = true;\n        lazy[id] = false;\n    }\n    void modify(const int id, const int l, const int r) {\n        if (l >= L && r <= R) {\n            lazy[id] = true;\n            val[id] = r - l + 1;\n            return;\n        }\n        pushdown(id, l, r);\n        const int mid = (l + r) >> 1;\n        if (L <= mid)\n            modify(ls(id), l, mid);\n        if (R > mid)\n            modify(rs(id), mid + 1, r);\n        val[id] = val[ls(id)] + val[rs(id)];\n    }\n    inline int total() const {\n        return val[1];\n    }\n}sgt;\n\nint main() {\n    ios::sync_with_stdio(false);\n    int t;\n    cin >> t;\n    while (t--) {\n        bool success = false;\n        int n, m;\n        cin >> n >> m;\n        sgt.clear(n);\n        for (int i = 1; i <= m; i++) {\n            char opt;\n            int x;\n            cin >> opt >> x;\n            if (opt == '1') {\n                sgt.setRange(x, x);\n                sgt.modify(1, 1, n);\n            } else if (opt == '2') {\n                if (x != 1) {\n                    sgt.setRange(1, x - 1);\n                    sgt.modify(1, 1, n);\n                }\n                if (x != n) {\n                    sgt.setRange(x + 1, n);\n                    sgt.modify(1, 1, n);\n                }\n            }\n            if (sgt.total() == n) {\n                cout << i << '\\n';\n                for (i++; i <= m; i++)\n                    cin >> opt >> x;\n                success = true;\n                break;\n            }\n        }\n        if (!success)\n            cout << \"-1\\n\";\n    }\n    return 0;\n}\n  \n```\n\n",
        "postTime": 1684246120,
        "uid": 402255,
        "name": "Untitled10032",
        "ccfLevel": 4,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "\u849f\u84bb\u53c8\u6765\u8d5b\u540e\u8865\u9898\u4e86\uff01\n\n\u8fd9\u9053\u9898\u4f5c\u4e3a\u7b2c\u4e00\u9898\u8fd8\u662f\u975e\u5e38\u7b80\u5355\u7684\u3002\u6211\u4eec\u5bb9\u6613\u53d1\u73b0\uff0c\u6240\u6709\u70b9\u90fd\u6709\u7ea2\u7eb8\uff0c\u5f53\u4e14\u4ec5\u5f53\u67d0\u4e00\u6b21\u64cd\u4f5c\u540e\uff0c\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u4e4b\u4e00\uff1a\n\n* \u5b58\u5728\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u4f7f\u5f97\u5b83\u540c\u65f6\u88ab $2$ \u64cd\u4f5c\u548c $1$ \u64cd\u4f5c\u9009\u4e2d\u4e86\u4e00\u6b21\u3002\n\n* \u6240\u6709\u70b9\u90fd\u7ecf\u5386\u4e86 $1$ \u64cd\u4f5c\u3002\n\n* \u5b58\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u4f4d\u7f6e\u540c\u65f6\u7ecf\u5386\u4e86 $2$ \u64cd\u4f5c\u3002\n\n\u5f00\u4e2a\u6876\u7b80\u5355\u7ef4\u62a4\u4e00\u4e0b\u8fd9\u4e9b\u4fe1\u606f\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(\\sum n)$\uff0c\u9ed8\u8ba4 $n$\uff0c$m$ \u540c\u9636\u3002\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int maxn=2e5+10;\nint t,n,m;\nint one[maxn],two[maxn];\nint main()\n{\n\tscanf(\"%d\",&t);\n\twhile(t--)\n\t{\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tfor(int i=1;i<=n;i++)one[i]=two[i]=0;\n\t\tint cnt=0;\n\t\tint cnt2=0;\n\t\tint ans=0;\n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t\tint op,x;\n\t\t\tscanf(\"%d%d\",&op,&x);\n\t\t\tif(ans)continue;\n\t\t\tif(op==1)\n\t\t\t{\n\t\t\t\tif(!one[x])one[x]=1,cnt++;\n\t\t\t\tif(two[x] || cnt==n)\n\t\t\t\t{\n\t\t\t\t\tans=i;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(!two[x])two[x]=1,++cnt2;\n\t\t\t\tif(cnt2==2 || one[x])\n\t\t\t\t{\n\t\t\t\t\tans=i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(ans)printf(\"%d\\n\",ans);\n\t\telse puts(\"-1\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1684223307,
        "uid": 614725,
        "name": "masonpop",
        "ccfLevel": 0,
        "title": "P9343 \u9898\u89e3"
    },
    {
        "content": "\u8bbe $f(x)$ \u8868\u793a\u7b2c $x$ \u53f7\u9152\u8d34\u4e0a **\u81f3\u5c11** $1$ \u5f20\u7ea2\u7eb8\u6240\u9700\u8981\u7684\u64cd\u4f5c\u6b21\u6570\uff0c\u5982\u679c\u7b2c $x$ \u53f7\u9152\u6ca1\u6709\u8d34\u4e0a\u7eb8\u5219 $f(x) = 0$\u3002\n\n\u6734\u7d20\u7b97\u6cd5\uff1a\n- \u5bf9\u4e8e\u7b2c $i$ \u6b21\u64cd\u4f5c\uff0c\u5982\u679c\u662f\u64cd\u4f5c $1$\uff0c\u5982\u679c $f(x) \\ne 0$\uff0c\u5219 $f(x)$ \u4fee\u6539\u4e3a $i$\u3002\n- \u5bf9\u4e8e\u7b2c $i$ \u6b21\u64cd\u4f5c\uff0c\u5982\u679c\u662f\u64cd\u4f5c $2$\uff0c\u5219\u5bf9\u4e8e\u6240\u6709 $j(1 \\le j \\le n)$\uff0c\u5982\u679c $f(j) \\ne 0$ \u4e14 $j \\ne x$\uff0c\u5219 $f(x)$ \u4fee\u6539\u4e3a $i$\u3002\n\n\u6700\u540e\uff0c\u5bf9\u4e8e\u6240\u6709 $i(1 \\le i \\le n)$\uff0c\u5982\u679c $f(i) = 0$\uff0c\u5219\u7b54\u6848\u4e3a `-1`\uff0c\u5426\u5219\uff0c\u7b54\u6848\u4e3a $\\max\\{f(1), f(2), \\cdots, f(n)\\}$\u3002\n\n\n```c\nfor (int i = 1; i <= M; ++i) {\n\tint o, x;\n\tscanf (\"%d%d\", &o, &x);\n\tif (o == 2) {\n\t\tfor (int j = 1; j <= N; ++j)\n\t\tif (j != x && f[j] == 0) f[j] = i;\n\t} else {\n\t\tif (f[x] == 0) f[x] = i;\n\t}\n}\n\n```\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(nm)$\uff0c\u53ef\u4ee5\u5f97\u5230 $60$ \u5206\u3002\n\n- - -\n\n\u8003\u8651\u5982\u4f55\u51cf\u5c11\u64cd\u4f5c $2$ \u7684\u6b21\u6570\u6765\u4f18\u5316\u3002\n- \u4f18\u5316 1\uff1a\u8bbe $tag(x)$ \u4ee3\u8868\u7b2c $x$ \u53f7\u9152\u662f\u5426\u8fdb\u884c\u8fc7\u64cd\u4f5c $2$\u3002\u5982\u679c $tag(x) = 1$\uff0c\u7531\u4e8e\u6ca1\u6709\u5220\u9664\u64cd\u4f5c\uff0c\u90a3\u4e48\u663e\u7136\u5bf9 $x$ \u8fdb\u884c\u64cd\u4f5c $2$ \u6ca1\u6709\u610f\u4e49\u4e86\uff0c\u4e0d\u9700\u8981\u8fdb\u884c\u64cd\u4f5c $2$\u3002\n- \u4f18\u5316 2\uff1a\u5bf9 $x$ \u8fdb\u884c\u64cd\u4f5c $2$ \u65f6\uff0c\u5982\u679c $f(x) \\ne 0$\uff0c\u90a3\u4e48\u8be5\u64cd\u4f5c\u7ed3\u675f\u540e\uff0c\u663e\u7136\u6240\u6709\u7684 $f(x)$ \u90fd\u4e0d\u4e3a $0$\uff0c\u90a3\u4e48\u4e5f\u4e0d\u9700\u8981\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u3002\n\n\u4f18\u5316 1 \u53ef\u4ee5\u4fdd\u8bc1\u5bf9\u4e8e\u6240\u6709\u76f8\u540c\u7684 $x$\uff0c\u64cd\u4f5c $2$ \u53ea\u4f1a\u8fdb\u884c $1$ \u6b21\uff0c\u800c\u5982\u679c\u8fdb\u884c\u8fc7\u64cd\u4f5c $2$\uff0c\u518d\u5bf9**\u53e6\u4e00\u4e2a** $x$ \u8fdb\u884c\u64cd\u4f5c $2$\uff0c\u7531\u4e8e\u64cd\u4f5c $2$ \u7684\u6027\u8d28\uff0c$f(x)$ \u5fc5\u7136\u4e0d\u7b49\u4e8e $0$\uff0c\u6b64\u65f6\u901a\u8fc7\u4f18\u5316 2\uff0c\u63a5\u4e0b\u6765\u90fd\u4e0d\u9700\u8981\u64cd\u4f5c\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u7ec4\u6570\u636e\u6700\u591a\u8fdb\u884c\u4e24\u6b21\u64cd\u4f5c $2$\u3002\n\n100 \u5206\uff1a\n\n```c\n#include \"bits/stdc++.h\"\nusing namespace std;\n\nint f[114514];//\u8d34\u4e0a\u7eb8\u7684 \nint tag[114514];//\u8fdb\u884c\u8fc7\u64cd\u4f5c 2 \u7684 \nint N, M;\nbool chk() {\n\tfor (int i = 1; i <= N; ++i)\n\t\tif (f[i] == 0) return 0;\n\treturn 1;\n}\n\nint main() {\n\tint T;\n\tscanf (\"%d\", &T);\n\twhile (T--) {\n\t\t\n\t\tscanf (\"%d%d\", &N, &M);\n\t\tfor (int i = 1; i <= N; ++i) f[i] = tag[i] = 0;\n\t\tint flg = 0;\n\t\tfor (int i = 1; i <= M; ++i) {\n\t\t\tint o, x;\n\t\t\tscanf (\"%d%d\", &o, &x);\n\t\t\tif (flg) continue;\n\t\t\tif (o == 2) {\n\t\t\t\tif (f[x]) {\n\t\t\t\t// \tif (tag[x] == 0)\n\t\t\t\t\t\tfor (int j = 1; j <= N; ++j)\n\t\t\t\t\t\t\tif (f[j] == 0) f[j] = i;\n\t\t\t\t\tflg = 1;\n\t\t\t\t} else if (tag[x] == 0) {\n\t\t\t\t\ttag[x] = 1;\n\t\t\t\t\tfor (int j = 1; j <= N; ++j)\n\t\t\t\t\t\tif (f[j] == 0 && j != x) f[j] = i;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (f[x] == 0) f[x] = i;\n\t\t\t}\n\t\t}\n\t\tif (!chk()) {\n\t\t\tputs(\"-1\");\n\t\t\tcontinue;\n\t\t}\n\t\tint mx = 0;\n\t\tfor (int i = 1; i <= N; ++i) mx = max(mx, f[i]);\n\t\tprintf (\"%d\\n\", mx);\n\t}\n}\n```",
        "postTime": 1684205344,
        "uid": 322620,
        "name": "_SHM_",
        "ccfLevel": 3,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f"
    },
    {
        "content": "~~\u8fd9\u4e48\u5bb9\u6613\u7684\u601d\u8def\u6211\u4e3a\u5565\u8981\u5199\u8fd9\u4e48\u957f\u7684\u9898\u89e3\u554a\u3002~~\n\n\u4e8e\u662f\u5c31\u5220\u4e86\u597d\u591a\u5e9f\u8bdd\u3002\n\n\u9152\u684c\u4e0a\u5171\u6709 $n$ \u676f\u9152\uff0c\u6807\u53f7\u4e3a $1\\sim n$\u3002**\u4f9d\u6b21**\u8fdb\u884c $m$ \u6b21\u64cd\u4f5c\uff0c\u64cd\u4f5c\u6709 $2$ \u79cd\u7c7b\u578b\uff1a\n\n- \u5f62\u5982 `1 x`\uff1a\u7ed9 $x$ \u53f7\u9152\u8d34\u4e0a $1$ \u5f20\u7ea2\u7eb8\u3002\n\n- \u5f62\u5982 `2 x`\uff1a\u7ed9\u9664\u4e86 $x$ \u53f7\u9152\u7684\u5176\u5b83 $n\u22121$ \u676f\u9152\u5206\u522b\u8d34\u4e0a $1$ \u5f20\u7ea2\u7eb8\u3002\n\n\u5728**\u81f3\u5c11**\u51e0\u6b21\u64cd\u4f5c\u540e\uff0c\u6bcf\u676f\u9152\u4e0a\u81f3\u5c11\u6709\u4e00\u5f20\u7ea2\u7eb8\uff08\u521d\u59cb\u65f6\u4e00\u5f20\u7eb8\u90fd\u6ca1\u6709\uff09\uff1f\n\n# subtask 1\n\n**\u8fd9\u4e2a\u90e8\u5206\u53ea\u6709 $1$ \u64cd\u4f5c\u3002**\n\n\u5982\u679c\u5728\u4e00\u6b21\u64cd\u4f5c\u4e2d\uff0c\u4e00\u4e2a\u9152**\u7b2c\u4e00\u6b21**\u8d34\u4e0a\u7eb8\uff0c\u5219\u79f0\u8fd9\u662f\u4e00\u6b21\u7528\u4ef7\u503c\u7684\u64cd\u4f5c\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u5f53\u4e14\u4ec5\u5f53\u6709\u4ef7\u503c\u7684\u64cd\u4f5c\u6570\u4e3a $n$ \u65f6\u6240\u6709\u9152\u90fd\u8d34\u8fc7\u7eb8\u3002\n\n# subtask 2\n\n**\u8fd9\u4e2a\u90e8\u5206\u53ea\u6709 $2$ \u64cd\u4f5c\u3002**\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u5982\u679c\u6709\u4e24\u6b21\u64cd\u4f5c\u7684 $x$ \u4e0d\u540c\uff0c\u90a3\u4e48\u6240\u6709\u9152\u5c31\u90fd\u8d34\u8fc7\u7eb8\u4e86\u3002\n\n\u8bb0\u5f55\u7b2c\u4e00\u6b21\u64cd\u4f5c\u7684 $x$\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a\u4e0e\u5176\u4e0d\u540c\u7684\u64cd\u4f5c\u5373\u53ef\u3002\n\n# subtask 3\n\n**\u8fd9\u4e2a\u90e8\u5206\u6bcf\u4e2a $x$ \u90fd\u4e00\u6837\u3002**\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u5982\u679c\u5bf9\u540c\u4e00\u4e2a\u9152\uff0c $1$ \u548c $2$ \u53f7\u64cd\u4f5c\u90fd\u8fdb\u884c\u8fc7\uff0c\u90a3\u4e48\u6240\u6709\u9152\u5c31\u8d34\u8fc7\u7eb8\u4e86\u3002\n\n\u7528\u4e24\u4e2a\u53d8\u91cf\u8bb0\u5f55\u662f\u5426\u8fdb\u884c\u8fc7 $1$ \u6216 $2$ \u64cd\u4f5c\u5373\u53ef\u3002\n\n\n# subtask 4&5\n\n**\u8fd9\u4e2a\u90e8\u5206\u6ca1\u6709\u7279\u6b8a\u6027\u8d28\u4e86\u3002**\n\n\u5176\u5b9e\u628a\u524d\u51e0\u4e2a\u90fd\u7ed3\u5408\u8d77\u6765\u5c31\u884c\u4e86\u3002\n\ncode\uff1a\n\n```cpp\n//\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1at1 \u548c t2 \u4e00\u5b9a\u8981\u7528 bool \u7c7b\u578b\uff0c\u4e0d\u7136 memset \u4f1a TLE\uff01\n//\u5f53\u7136\u624b\u52a8\u6e05\u96f6\u4e5f\u4e0d\u662f\u4e0d\u884c\nint solve(){\n\tint ret=-1;//\u7b54\u6848\n\tmemset(t1,0,sizeof t1);//\u5b58\u50a8\u6bcf\u4e2a\u9152\u74f6\u662f\u5426\u8fdb\u884c\u8fc7 1 \u64cd\u4f5c\n\tmemset(t2,0,sizeof t2);//\u540c\u4e0a\uff0c\u4f46\u662f 2 \u64cd\u4f5c\n\tcnt=flag=0;//\u6709\u4ef7\u503c\u7684\u64cd\u4f5c\u6570\u3001\u7b2c\u4e00\u6b21 2 \u64cd\u4f5c\u7684\u9152\u6807\u53f7\n\tcin>>n>>m;\n\tfor(int i=1;i<=m;i++){\n\t\tcin>>o>>x;\n\t\tif(ret>0) continue;\n\t\tif(o==1&&!t1[x]) cnt++,t1[x]=1;\n\t\tif(o==2) t2[x]=1,flag=flag==0?x:flag;\n\n\t\tif(cnt==n) ret=i;//subtask 1\n\t\tif(o==2&&flag!=x) ret=i;//subtask 2\n\t\tif(t1[x]&&t2[x]) ret=i;//subtask 3\n\t}\n\treturn ret;\n}\n```\n\n\u5168\u6587\u5b8c\u3002",
        "postTime": 1684159002,
        "uid": 768612,
        "name": "gty314159",
        "ccfLevel": 0,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "[P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f ](https://www.luogu.com.cn/problem/P9343)\r\n\r\n\u9a8c\u9898\u4eba\u9898\u89e3\u3002\r\n\r\n\u53cd\u9762\u8003\u8651\uff0c\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u80fd\u5b8c\u6210\u67d3\u8272\uff1a\r\n\r\n- \u5bf9\u4e8e $x$ \u53f7\uff0c\u4e00\u6b21 $1$ \u64cd\u4f5c\u548c\u4e00\u6b21 $2$ \u64cd\u4f5c\u3002\r\n\r\n- \u4efb\u610f\u4e24\u4e2a\u4e0d\u76f8\u540c\u7684 $x$ \uff0c\u5747\u6709\u4e00\u4e2a $2$ \u64cd\u4f5c\u3002\r\n\r\n- \u5168\u90e8 $x$ \u5747\u6709\u4e00\u6b21 $1$ \u64cd\u4f5c\u3002\r\n\r\n\u6240\u4ee5\u5206\u522b\u5bf9\u4ed6\u7edf\u8ba1\u6700\u65e9\u51fa\u73b0\u7684\u60c5\u51b5\uff0c\u5f00\u51e0\u4e2a\u6876\u5c31\u80fd\u505a\u5b8c\uff0c\u4e09\u79cd\u60c5\u51b5\u51fa\u73b0\u6700\u65e9\u7684\u90a3\u4e2a\u5c31\u662f\u7b54\u6848\u3002\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nconst int N =1e6+10;\r\nstruct node{\r\n\tint fir,sec;\r\n}vis2[N];\r\nint vis[N],vis1[N];\r\nint main(){\r\n\tint t;\r\n\tcin>>t;\r\n\twhile(t--){\r\n\t\tint n,m;\r\n\t\tcin>>n>>m;\r\n\t\tint sum=n,sum1=0;\r\n\t\tbool f=true;\r\n\t\tfor(int i=1;i<=n;i++)\tvis[i]=vis2[i].fir=vis2[i].sec=vis1[i]=0;\t\r\n\t\tfor(int i=1,x,y;i<=m;i++){\r\n\t\t\tcin>>x>>y;\r\n            if(f==false)\tcontinue;\r\n\t\t\tif(x==1&&vis[y]==0&&y<=n&&f!=false)\r\n\t\t\t\tsum--,vis[y]=1,vis2[y].fir=1;\r\n\t\t\tif(sum==0&&f!=false)\t{f=false,cout<<i<<endl;}\r\n\t\t\tif(x==2&&vis1[y]==0&&y<=n)\t\r\n\t\t\t\tsum1++,vis1[y]=1,vis2[y].sec=1;\r\n\t\t\tif(vis2[y].fir==1&&vis2[y].sec==1&&f!=false)\t{f=false,cout<<i<<endl;}\r\n\t\t\tif(sum1==2&&f!=false)\t{f=false,cout<<i<<endl;}\r\n\t\t}\r\n\t\tif(f==true)\tcout<<-1<<endl;\r\n\t}\r\n}\r\n```\r\n",
        "postTime": 1684156067,
        "uid": 361141,
        "name": "_JF_",
        "ccfLevel": 0,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P9343)\n\n#### \u5927\u4f53\u601d\u8def\n\n\u9996\u5148\uff0c\u6211\u4eec\u6709 $4$ \u4e2d\u60c5\u51b5\u80fd\u591f\u5b8c\u6210\u6240\u6709\u9152\u676f\u90fd\u8d34\u4e0a\u4e00\u5f20\u7ea2\u7eb8\uff1a\n\n1. \u505a\u4e86 $n$ \u6b21 $x$ **\u4e0d\u540c** \u7684 $1$ \u64cd\u4f5c\u3002\n\n2. \u505a\u4e86 $1$ \u6b21 $1$ \u64cd\u4f5c\u548c $1$ \u6b21 $2$ \u64cd\u4f5c\uff0c\u4e24\u6b21 $x$ **\u76f8\u540c**\u3002\n\n3. \u505a\u4e86 $1$ \u6b21 $2$ \u64cd\u4f5c\u548c $1$ \u6b21 $1$ \u64cd\u4f5c\uff0c\u4e24\u6b21 $x$ **\u76f8\u540c**\u3002\n\n4. \u505a\u4e86 $2$ \u6b21 $2$ \u64cd\u4f5c\uff0c\u4e24\u6b21 $x$ **\u4e0d\u540c**\n\n\u5982\u4f55\u4fdd\u8bc1\u6bcf\u6b21\u64cd\u4f5c\u90fd\u662f $O(1)$ \u6216\u8005 $O(\\log(n))$ \u5462\uff1f\n\n\u5bf9\u4e8e $1$ \u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a $a$ \u6570\u7ec4\u8bb0\u5f55\u3002\u5bf9\u4e8e $2$ \u64cd\u4f5c\uff0c\u6211\u4eec\u7528\u4e00\u4e2a ```map```\u3002\n\n\u7b2c $1$ \u79cd\u60c5\u5f62\u3002\u521d\u59cb\u4e00\u4e2a $ans=n$\u3002\u6bcf\u6b21\u5230 $1$ \u64cd\u4f5c\uff0c\u5982\u679c $a_x \\not = 1$\uff0c\u5c06 $a_x$ \u53d8\u4e3a $1$\uff0c\u5c06 $ans-1$\uff0c\u5982\u679c $ans=0$ \u5219\u8f93\u51fa\u3002\n\n\u7b2c $2$ \u79cd\u60c5\u5f62\u3002\u6bcf\u6b21\u5c06 $2$ \u64cd\u4f5c\u7684\u4f4d\u7f6e\u8bb0\u5f55\u5230 ```map``` \u5f53\u4e2d\uff0c\u5982\u679c\u8fd9\u6b21 $1$ \u64cd\u4f5c\u6709 $x$\uff0c```map``` \u4e2d\u4e5f\u6709 $x$\uff0c\u5219\u8f93\u51fa\u3002\n\n\u7b2c $3$ \u79cd\u60c5\u5f62\u3002\u5f53\u9047\u5230 $2$ \u64cd\u4f5c\u65f6\uff0c\u5982\u679c $a_x=1$ \u5219\u8f93\u51fa\u3002\n\n\u7b2c $4$ \u79cd\u60c5\u5f62\u3002\u5982\u679c ```map``` \u7684\u5927\u5c0f\u51cf\u53bb ```map``` \u4e2d $x$ \u7684\u6570\u91cf\uff0c\u5982\u679c\u5927\u4e8e $0$\uff0c\u8bf4\u660e\u81f3\u5c11\u6709\u4e24\u6b21 $x$ \u4e0d\u540c\u7684\u64cd\u4f5c\uff0c\u8f93\u51fa\u3002\n\n\u4f5c\u8005\u8fd9\u91cc\u56fe\u7701\u4e8b\u5f00\u4e86 ```map```\uff0c\u6240\u4ee5\u4f1a\u6162\u4e00\u4e9b\uff0c\u770b\u4e86\u6b63\u89e3\u8fc7\u540e\u53d1\u73b0\u518d\u5f00\u4e00\u4e2a\u6876\u4e5f\u662f\u53ef\u4ee5\u7684\u3002\n\n#### \u5b8c\u6574\u4ee3\u7801\n\n\u4e0a\u9762\u5df2\u7ecf\u89e3\u91ca\u5f88\u591a\uff0c\u4ee3\u7801\u5c31\u4e0d\u518d\u591a\u5199\u6ce8\u91ca\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read() {\n    int x = 0, f = 1; char ch = getchar();\n    while (ch > '9' || ch < '0') { if (ch == '-')f = -1; ch = getchar(); }\n    while (ch >= '0' && ch <= '9') { x = x * 10 + ch - '0'; ch = getchar(); }\n    return x * f;\n}\nint a[100001];\nsigned main() {\n    register int t, n, m, o, x, i, j, ans, flag;\n    t = read();\n    while (t--) {\n\t    map<int, int> mp;\n\t    n = read(); m = read();\n\t    ans = n; flag = 1;\n\t    for (i = 1; i <= n; i++)a[i] = 0;//\u521d\u59cb\u5316\n\t    for (i = 1; i <= m; i++) {\n\t\t    o = read(); x = read();\n\t\t    if (flag == 0)continue;\n\t\t    if (o == 1) {\n\t\t\t    if (a[x] == 0) {\n\t\t\t\t    a[x] = 1;\n\t\t\t\t    ans--;\n\t\t\t\t}\n\t\t\t}\n\t\t    else if(o == 2)mp[x]++;\n\t\t    if (ans == 0) {\n\t\t\t\tprintf(\"%d\\n\", i);\n\t\t\t    flag = 0;\n\t\t\t}//\u60c5\u51b5 1\n\t\t    else if(o == 1 && mp.count(x) > 0 ){\n\t\t\t\tprintf(\"%d\\n\", i);\n\t\t\t    flag = 0;\n\t\t\t}//\u60c5\u51b5 2\n\t\t\telse if(o == 2 && a[x] == 1){\n\t\t\t\tprintf(\"%d\\n\", i);\n\t\t\t    flag = 0;\n\t\t\t}//\u60c5\u51b5 3\n\t\t\telse if(o == 2 && mp.size() - mp.count(x) > 0){\n\t\t\t\tprintf(\"%d\\n\", i);\n\t\t\t    flag = 0;\n\t\t\t}//\u60c5\u51b5 4\n\t\t}\n\t    if (flag == 1)printf(\"-1\\n\");\n\t}\n    return 0;\n}\n```\n\n\n\n",
        "postTime": 1684103111,
        "uid": 815796,
        "name": "zzy0618",
        "ccfLevel": 0,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\n\u4e00\u5171\u6709 $n$ \u58f6\u9152\uff0c\u4f60\u53ef\u4ee5\u5c06\u7b2c $x$ \u58f6\u9152\u6216\u8005\u5c06\u9664\u7b2c $x$ \u58f6\u9152\u4ee5\u5916\u7684\u6240\u4ee5\u9152\u6253\u4e0a\u6807\u8bb0\uff0c\u6c42\u5728\u7b2c\u51e0\u8f6e\u540e\u4f1a\u5c06\u6240\u6709\u7684\u9152\u90fd\u6253\u4e0a\u6807\u8bb0\u3002\n\n### \u9898\u76ee\u5206\u6790\n\n\u9996\u5148\u6765\u60f3\u66b4\u529b\uff0c\u5f00\u4e2a\u7b52\u5b50\uff0c\u6bcf\u56de\u5c06\u6240\u6709\u7684\u9152\u6253\u4e0a\u6807\u8bb0\uff0c\u7136\u540e\u6bcf\u56de\u5224\u65ad\u662f\u5426\u5168\u90e8\u6253\u4e0a\u6807\u8bb0\uff0c\u4f46\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u662f $\\mathcal O(T\\times n \\times m)$ \u7684\uff0c\u80af\u5b9a\u8fc7\u4e0d\u4e86\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5f53\u6240\u6709\u7684\u90fd\u88ab\u6253\u8fc7\u6807\u8bb0\uff0c\u53ea\u6709\u5982\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a\n\n1. \u6709\u6709\u4e00\u8f6e\u5c06\u4e00\u58f6\u9152 $x$ \u88ab\u5355\u72ec\u6253\u8fc7\u6807\u8bb0\uff0c\u4e14\u6709\u4e00\u8f6e\u5c06\u9664\u7b2c $x$ \u58f6\u9152\u4ee5\u5916\u7684\u90fd\u6253\u8fc7\u6807\u8bb0\u3002\n\n2. \u6709\u4e00\u8f6e\u5c06\u9664\u7b2c $x$ \u58f6\u9152\u4ee5\u5916\u7684\u90fd\u6253\u4e0a\u6807\u8bb0\uff0c\u6709\u4e00\u8f6e\u5c06\u9664\u7b2c $y$ \u58f6\u9152\u4ee5\u5916\u7684\u90fd\u6253\u4e0a\u6807\u8bb0\uff0c\u4e14 $x \\neq y$\u3002\n\n3. \u6240\u6709\u7684\u9152\u90fd\u88ab\u5355\u72ec\u6253\u4e0a\u8fc7\u6807\u8bb0\u3002\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u8bb0\u4e00\u4e2a $cnt1_i$ \u8868\u793a\u7b2c $i$ \u58f6\u9152\u662f\u5426\u88ab\u5355\u72ec\u6253\u6807\u8bb0\uff0c\u518d\u8bb0\u4e00\u4e2a $cnt2_i$ \u8868\u793a\u662f\u5426\u6709\u4e00\u8f6e\u9664\u7b2c $i$ \u58f6\u9152\u90fd\u88ab\u6253\u8fc7\u6807\u8bb0\uff0c\u5f53 $\\sum\\limits_{i = 1}^{i \\le n} cnt1_i = cnt2_i$ \u65f6\uff0c\u8bf4\u660e\uff0c\u90fd\u88ab\u6253\u8fc7\u6807\u8bb0\uff0c\u5f53 $cnt2$ \u4e2d\u6709\u5927\u4e8e\u7b49\u4e8e $2$ \u4e2a\u4e3a `true`\uff0c\u8bf4\u660e\u90fd\u88ab\u6253\u8fc7\u6807\u8bb0\uff0c\u5f53 $cnt1$ \u4e2d\u90fd\u4e3a `true`\uff0c\u8bf4\u660e\u90fd\u88ab\u6253\u8fc7\u6807\u8bb0\u3002\n\n\u4e8e\u662f\uff0c\u6700\u7ec8\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $\\mathcal O(T \\times m)$ \u7684\u3002\n\n### code\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\nconst int N = 2e5 + 5;\nint T, out, ans, n, m, opt, x, cnt2[N], tmp;\nbool cnt1[N], flag;\nint main()\n{\n\tscanf(\"%d\", &T);\n\twhile(T--)\n\t{\n\t\tmemset(cnt1, false, sizeof(cnt1));\n\t\tmemset(cnt2, 0, sizeof(cnt2));\n\t\ttmp = 0, out = 0, ans = 0;\n\t\tscanf(\"%d %d\", &n, &m);\n\t\tfor(int i = 1;i <= m;i++)\n\t\t{\n\t\t\tscanf(\"%d %d\", &opt, &x);\n\t\t\tif(out || ans == n)\n\t\t\t\tcontinue;\n\t\t\tif(opt == 1)\n\t\t\t{\n\t\t\t\tif(!cnt1[x])\n\t\t\t\t\tans++;\n\t\t\t\tcnt1[x] = true;\n\t\t\t\tif(cnt2[x] || ans == n)\n\t\t\t\t\tout = i;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcnt2[x]++;\n\t\t\t\ttmp++;\n\t\t\t\tif(tmp != cnt2[x])\n\t\t\t\t\tout = i;\n\t\t\t\tif(cnt1[x])\n\t\t\t\t\tout = i;\n\t\t\t}\n\t\t}\n\t\t(out || ans == n) ? printf(\"%d\\n\", out) : printf(\"-1\\n\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1684076084,
        "uid": 551108,
        "name": "Zhang_bingjia",
        "ccfLevel": 3,
        "title": "P9343 \u9898\u89e3"
    },
    {
        "content": "# \u539f\u9898\u94fe\u63a5\n\n[P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f](https://www.luogu.com.cn/problem/P9343)\n\n# \u89e3\u9898\u601d\u8def\n\n1. \u7528\u96c6\u5408\uff08set\uff09\u7ef4\u62a4\uff0c\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u4ee3\u8868\u81f3\u5c11\u6709\u4e00\u5f20\u7ea2\u7eb8\u7684\u9152\u676f\u7f16\u53f7\uff1a\n\n- \u64cd\u4f5c\u4e00\uff1a\u5c06 $x$ \u63d2\u5165\u96c6\u5408\u3002\n\n- \u7b2c $1$ \u6b21\u64cd\u4f5c\u4e8c\uff1a\u5c06 $1\\sim n$ \u9664\u4e86 $x$ \u4ee5\u5916\u7684\u5143\u7d20\u63d2\u5165\u96c6\u5408\u3002\n\n- \u540e\u7eed\u7684\u64cd\u4f5c\u4e8c\uff1a\u5df2\u7ecf\u8fdb\u884c $1$ \u6b21\u64cd\u4f5c\u4e8c\uff0c\u96c6\u5408\u5185\u81f3\u5c11\u6709 $n-1$ \u4e2a\u5143\u7d20\u3002\u6b64\u65f6\u518d\u8fdb\u884c\u64cd\u4f5c\u4e8c\uff0c\u53ea\u8981\u4e24\u6b21\u64cd\u4f5c\u4e0d\u5b8c\u5168\u76f8\u540c\uff0c\u6bcf\u676f\u9152\u4e0a\u4e00\u5b9a\u81f3\u5c11\u6709\u4e00\u5f20\u7ea2\u7eb8\u3002\n\n- \u5224\u65ad\uff1a\u96c6\u5408\u4f1a\u81ea\u52a8\u53bb\u91cd\uff0c\u5f53\u96c6\u5408\u5185\u6709 $n$ \u4e2a\u5143\u7d20\u65f6\uff0c\u4e00\u5b9a\u4e3a $1\\sim n$\uff0c\u5373\u6bcf\u676f\u9152\u4e0a\u90fd\u81f3\u5c11\u6709\u4e00\u5f20\u7ea2\u7eb8\u3002\n\n2. \u5177\u4f53\u7ec6\u8282\u8bf7\u770b\u4ee3\u7801\u6ce8\u91ca\u3002\n\n# \u6ee1\u5206\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint t,n,m;\nint o,x,k,p;\nbool b=0;\nset<int> s;\nint main()\n{\n\tcin>>t;\n\twhile(t--)\n\t{\n\t\tk=-1;\n\t\tb=0;\n\t\ts.clear();\n\t\tcin>>n>>m;\n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t\tcin>>o>>x;\n\t\t\tif(k!=-1)//\u5982\u679c\u5df2\u7ecf\u6709\u7ed3\u679c\uff0c\u76f4\u63a5\u8df3\u8fc7\u540e\u7eed\u64cd\u4f5c \n\t\t\t{\n\t\t\t\tcontinue;//\u4e0d\u80fdbreak\uff0c\u56e0\u4e3a\u8fd8\u8981\u8bfb\u5165\n\t\t\t}\n\t\t\tif(o==1)//\u64cd\u4f5c\u4e00 \n\t\t\t{\n\t\t\t\ts.insert(x);\n\t\t\t}\n\t\t\telse if(b==0)//\u7b2c1\u6b21\u64cd\u4f5c\u4e8c \n\t\t\t{\n\t\t\t\tb=1;\n\t\t\t\tp=x;//\u8bb0\u5f55\u7b2c1\u6b21\u7684x \n\t\t\t\tfor(int j=1;j<=n;j++)\n\t\t\t\t{\n\t\t\t\t\tif(j!=x)\n\t\t\t\t\t{\n\t\t\t\t\t\ts.insert(j);\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t}\n\t\t\telse//\u540e\u7eed\u7684\u64cd\u4f5c\u4e8c \n\t\t\t{\n\t\t\t\tif(x!=p)//\u548c\u7b2c1\u6b21\u64cd\u4f5c\u4e8c\u4e0d\u5b8c\u5168\u76f8\u540c \n\t\t\t\t{\n\t\t\t\t\tk=i;//\u8bb0\u5f55\u6ee1\u8db3\u6761\u4ef6\u65f6\u7528\u7684\u64cd\u4f5c\u6b21\u6570 \n\t\t\t\t}\n\t\t\t}\n\t\t\tif(s.size()==n)\n\t\t\t{\n\t\t\t\tk=i;//\u540c\u4e0a \n\t\t\t}\n\t\t}\n\t\tcout<<k<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1684060249,
        "uid": 455474,
        "name": "lailai0916",
        "ccfLevel": 5,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    },
    {
        "content": "\u7ebf\u6bb5\u6811\u597d\u95ea\uff0c\u62dc\u8c22\u7ebf\u6bb5\u6811\uff01\uff01\uff01\uff01\n\n\u770b\u5230\u8fd9\u9898\uff0c\u90fd\u662f\u533a\u95f4\u95ee\u9898\uff0c\u5f88\u660e\u663e\u53ef\u4ee5\u7ebf\u6bb5\u6811\u505a\u3002\n\n\u9996\u5148\uff0c\u67e5\u8be2\u65f6\u95ee\u7684\u65f6\u6240\u6709\u6570\u662f\u5426\u90fd\u6709\u8d34\u7eb8\uff0c\u90a3\u6211\u4eec\u8bbe\u6709\u8d34\u7eb8\u4e3a $1$\uff0c\u6ca1\u6709\u8d34\u7eb8\u4e3a $0$\uff0c\u90a3\u4e48\u6211\u4eec\u8981\u7ef4\u62a4\u7684\u4fe1\u606f\u5c31\u662f\u533a\u95f4\u6240\u6709\u6570\u7684\u4e0e\u3002\n\n\u81f3\u4e8e\u4fee\u6539\uff0c\u4e0d\u662f\u628a\u533a\u95f4\u52a0\u4e0a\u51e0\uff0c\u800c\u662f\u53d8\u4e3a\u51e0\uff0c\u628a\u6a21\u677f\u7a0d\u5fae\u6539\u4e00\u4e0b\u5c31\u884c\u3002\n\n\u6700\u540e\u6709\u4e00\u4e2a\u5c0f\u6280\u5de7\uff0c\u5355\u70b9\u4fee\u6539\u5176\u5b9e\u4e0d\u9700\u8981\u53e6\u5916\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u53ea\u8981\u628a\u5176\u5f53\u4f5c\u4e00\u4e2a\u957f\u5ea6\u4e3a $1$ \u7684\u533a\u95f4\u5373\u53ef\u3002\uff08\u5373\u628a\u70b9 $x$ \u5f53\u6210\u533a\u95f4 $[x,x]$\uff09\u3002\n\n\u5177\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a\n```\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int kMaxN = 2e5 + 5;\nint T, n, m, cnt, s, ans = -1, t[kMaxN << 2], tag[kMaxN << 2];\n\nvoid push_up(int u) {\n  t[u] = t[u << 1] & t[u << 1 | 1];\n}\n\nvoid add_tag(int u, int l, int r, int x) {\n  t[u] = tag[u] = x;\n}\n\nvoid push_down(int u, int l, int r) {\n  if (tag[u]) {\n    int mid = l + r >> 1;\n    add_tag(u << 1, l, mid, tag[u]);\n    add_tag(u << 1 | 1, mid + 1, r, tag[u]);\n    tag[u] = 0;\n  }\n}\n\nvoid update(int u, int l, int r, int L, int R, int x) {\n  if (l > R || r < L) {\n    return;\n  } else if (L <= l && r <= R) {\n    add_tag(u, l, r, x);\n  } else {\n    int mid = l + r >> 1;\n    push_down(u, l, r);\n    update(u << 1, l, mid, L, R, x);\n    update(u << 1 | 1, mid + 1, r, L, R, x);\n    push_up(u);\n  }\n}\n\nint query() {\n  return t[1];\n}\n\nint main() {\n  ios ::sync_with_stdio(0);\n  cin.tie(0), cout.tie(0);\n  for (cin >> T; T; T--, ans = -1, cnt = 0) {\n    fill(t + 1, t + (n << 2) + 1, 0);\n    fill(tag + 1, tag + (n << 2) + 1, 0);\n    cin >> n >> m;\n    for (int op, x, i = 1; i <= m; i++) {\n      cin >> op >> x;\n      if (op == 1) {\n        update(1, 1, n, x, x, 1);\n      } else {\n        update(1, 1, n, 1, x - 1, 1);\n        update(1, 1, n, x + 1, n, 1);\n      }\n      (ans == -1 && query()) && (ans = i);\n    }\n    cout << ans << \"\\n\";\n  }\n  return 0;\n}\n```\n",
        "postTime": 1684672265,
        "uid": 677234,
        "name": "caoshurui",
        "ccfLevel": 3,
        "title": "P9343\u9898\u89e3"
    },
    {
        "content": "## \u601d\u8def\n\n\u8fd8\u662f\u5206\u7c7b\u8ba8\u8bba\u6bcf\u4e00\u79cd\u60c5\u51b5\uff1a\n\n- \u5168\u662f\u64cd\u4f5c $1$ \u65f6\uff0c\u53ea\u9700\u7edf\u8ba1\u4e00\u5171\u8d34\u4e0a\u7684\u4e0d\u540c\u7684\u676f\u5b50\u6570\u91cf\u662f\u5426\u7b49\u4e8e\u603b\u6570\u5373\u53ef\u3002\n\n- \u5168\u662f\u64cd\u4f5c $2$ \u65f6\uff0c\u7531\u4e8e\u5982\u679c\u6709 $2$ \u79cd\u4e0d\u540c\u7684 $x$ \u7684\u8bdd\uff0c\u90a3\u4e48\u6240\u6709\u7684\u4e00\u5b9a\u4f1a\u81f3\u5c11\u8d34\u4e0a\u4e00\u5f20\u3002\n\n- \u5f53 $x$ \u56fa\u5b9a\u65f6\uff0c\u663e\u7136\u5982\u679c\u64cd\u4f5c $1$ \u4e4b\u540e\u6709\u4e86\u64cd\u4f5c $2$\uff0c\u6216\u64cd\u4f5c $2$ \u4e4b\u540e\u6709\u4e86\u64cd\u4f5c $1$\uff0c\u90a3\u4e48\u4e00\u5b9a\u81f3\u5c11\u80fd\u8d34\u4e0a\u4e00\u5f20\u3002\n\n- \u5f53 $\\sum n, \\sum m \\leq 3 \\times 10^3$ \u65f6\uff0c\u663e\u7136\u53ef\u4ee5\u6bcf\u6b21\u6a21\u62df\u8d34\u7ea2\u7eb8\uff0c\u7136\u540e\u6bcf\u6b21\u90fd\u66b4\u529b\u5224\u5b9a\u662f\u5426\u6709\u7f3a\u7684\u3002\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u6d45\u6d45\u5f97\u5230 $80$ \u5206\u3002\n\n\u5176\u5b9e\u5982\u679c\u63a8\u51fa\u4e86\u4e0a\u8ff0\u60c5\u51b5\u7684\u7b54\u6848\u8ba1\u7b97\u65b9\u5f0f\uff0c\u90a3\u4e48\u7b2c $5$ \u4e2a Subtask \u5c31\u5bb9\u6613\u8bb8\u591a\u4e86\u3002\n\n\u8003\u8651\u5c06\u524d $3$ \u79cd\u60c5\u51b5\u7ed3\u5408\u8d77\u6765\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u9700\u8981\u7edf\u8ba1\u597d\u6bcf\u4e00\u4e2a\u8d34\u4e0a\u7ea2\u7eb8\u7684\u4e0d\u540c\u7684\u676f\u5b50\u6570\u91cf\u662f\u5426\u7b49\u4e8e\u603b\u6570\uff1b\u662f\u5426\u5b58\u5728 $2$ \u79cd\u4e0d\u540c $x$ \u7684\u64cd\u4f5c $2$\uff1b\u8fd8\u6709 $x$ \u76f8\u540c\u65f6\u662f\u5426\u51fa\u73b0\u8fc7\u81f3\u5c11\u4e00\u6b21\u7684\u64cd\u4f5c $1$ \u4e0e $2$\u3002\n\n\u7136\u540e\u5c31 AC \u4e86\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nnamespace fastIO{\n\tinline int read(){\n\t\tint x = 0, s = 1;\n\t\tchar c = getchar();\n\t\twhile(c < '0' || c > '9'){\n\t\t\tif(c == '-') s = -1;\n\t\t\tc = getchar();\n\t\t}\n\t\twhile(c >= '0' && c <= '9'){\n\t\t\tx = (x << 3) + (x << 1) + (c ^ '0');\n\t\t\tc = getchar();\n\t\t}\n\t\treturn x * s;\n\t}\n\tinline void Write(int x){\n\t\tif(x > 9) Write(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n\tinline void write(int x, char c){\n\t\tWrite(x);\n\t\tputchar(c);\n\t}\n}\nusing namespace fastIO;\nint a[1010010];\nint main(){\n\tint T = read();\n\twhile(T--){\n\t\tint n = read(), m = read();\n\t\tfor(register int i = 1; i <= n; ++i) a[i] = 0;\n\t\tint dif = n, ___ = 0;\n\t\tbool flag = 0;\n\t\tint lll = 0;\n\t\tint _ = 1, ans = 0;\n\t\tfor(; _ <= m; _++){\n\t\t\tint x = read(), y = read();\n\t\t\tif(x == 2 && a[y] == 1) {\n\t\t\t    ans = _;\n\t\t\t    break;\n\t\t\t}\n\t\t\tif(x == 2 && lll == 0){\n\t\t\t\tlll = y;\n\t\t\t\tdif = 1;\n\t\t\t}else if(x == 2){\n\t\t\t\tif(y != lll){\n\t\t\t\t\tflag = 1;\n\t\t\t\t\tans = _;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdif = 1;\n\t\t\t}else{\n\t\t\t\tif(y == lll && lll != 0){\n\t\t\t\t\tans = _;\n\t\t\t\t\tbreak;\n\t\t\t\t}else{\n\t\t\t\t\tif(a[y] == 0){\n\t\t\t\t\t\tif(lll == 0) dif--;\n\t\t\t\t\t\ta[y] = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(dif == 0) {\n\t\t\t\tans = _;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor(_ += 1; _ <= m; _++){\n\t\t\tint x = read(), y = read();\n\t\t}\n\t\tif(ans > 0) write(ans, '\\n');\n\t\telse {putchar('-');putchar('1');putchar('\\n');}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1684572559,
        "uid": 852144,
        "name": "Saint_ying_xtf",
        "ccfLevel": 0,
        "title": "\u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\uff1a\n$T$ \u7ec4\u6570\u636e\uff0c\u6bcf\u7ec4\u6570\u636e\u7ed9\u51fa $n$ \u548c $m$\uff0c\u4ee3\u8868\u6709 $n$ \u4e2a\u9152\u676f\u6309 $1\\sim n$ \u6807\u53f7\u3002$m$ \u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u4f1a\u5c06 $x$ \u53f7\u9152\u676f\u8d34\u4e0a\u7eb8\u6216\u5c06\u9664 $x$ \u53f7\u9152\u676f\u7684\u5176\u4ed6\u9152\u676f\u8d34\u4e0a\u7eb8\u3002\u5bf9\u4e8e\u6bcf\u7ec4\u6570\u636e\uff0c\u8f93\u51fa\u5728**\u81f3\u5c11**\u51e0\u6b21\u64cd\u4f5c\u540e\u6240\u6709\u9152\u676f\u90fd\u8d34\u4e0a\u7eb8\u3002\u5982\u6700\u540e\u8fd8\u6709\u9152\u676f\u6ca1\u8d34\u4e0a\u7eb8\uff0c\u8f93\u51fa $-1$\u3002\n\n### \u5206\u6790\uff1a\n\n\u9996\u5148\uff0c\u6211\u4eec\u5206\u6790\u4e00\u4e0b\u6709\u591a\u5c11\u79cd\u53ef\u4ee5\u8d34\u5b8c\u6240\u6709\u9152\u676f\u7684\u65b9\u6cd5\uff1a\n\n1. \u53ea\u8fdb\u884c $1$ \u64cd\u4f5c\uff0c\u90a3\u4e48\u53ef\u4ee5\u5f00\u4e00\u4e2a\u5e03\u5c14\u6570\u7ec4\u548c\u4e00\u4e2a\u8ba1\u6570\u53d8\u91cf $sum$\uff0c\u6bcf\u6b21\u8fdb\u884c**\u6709\u6548\u7684**\u64cd\u4f5c\u540e\u5c06\u8ba1\u6570\u52a0\u4e0a\u4e00\uff0c\u5982\u679c $sum=n$\uff0c\u5219\u8bb0\u4e0b\u5f53\u524d\u64cd\u4f5c\u6b21\u6570\u5e76\u628a\u5269\u4e0b\u7684\u64cd\u4f5c\u8bfb\u5b8c\u540e\u8f93\u51fa\u5373\u53ef\u3002\n\n2. \u53ea\u8fdb\u884c $2$ \u64cd\u4f5c\uff0c\u90a3\u4e48\u53ea\u6709\u5f53\u4e24\u6b21 $2$ \u64cd\u4f5c\u7684\u64cd\u4f5c\u6570\u4e0d\u540c\u65f6\u624d\u80fd\u8d34\u4e0a\u6240\u6709\u9152\u676f\u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f00\u4e00\u4e2a\u53d8\u91cf $k$ \u8bb0\u4e0b\u7b2c\u4e00\u6b21 $2$ \u64cd\u4f5c\u7684\u64cd\u4f5c\u6570\uff0c\u4ee5\u540e\u7684 $2$ \u64cd\u4f5c\u53ea\u9700\u8981\u5224\u65ad\u64cd\u4f5c\u6570\u662f\u5426\u7b49\u4e8e $k$ \u5373\u53ef\u3002\n\n3. \u540c\u65f6\u8fdb\u884c $1$\u3001$2$ \u64cd\u4f5c\u3002\u5982\u679c\u5148\u8fdb\u884c $1$ \u64cd\u4f5c\uff0c\u90a3\u4e48\u540e\u9762\u7684 $2$ \u64cd\u4f5c\u8981\u5224\u65ad\u64cd\u4f5c\u6570\u6240\u5bf9\u5e94\u7684\u9152\u676f\u662f\u5426\u88ab\u8d34\u8fc7\u7eb8\uff1b\u5982\u679c\u5148\u8fdb\u884c $2$ \u64cd\u4f5c\uff0c\u90a3\u4e48\u540e\u9762\u8fdb\u884c $1$ \u64cd\u4f5c\u65f6\u8981\u5224\u65ad\u8d34\u4e0a\u7684\u9152\u676f\u662f\u5426\u662f $2$ \u64cd\u4f5c\u90a3\u4e2a\u552f\u4e00\u6ca1\u6709\u8d34\u8fc7\u7eb8\u7684\u9152\u676f\u3002\n\n\u7efc\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u601d\u8def\u901a\u8fc7\u672c\u9898\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\sum m)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n\u6ce8\u610f\uff1a\u6bcf\u7ec4\u6570\u636e\u8981\u5148\u521d\u59cb\u5316\u5e03\u5c14\u6570\u7ec4\uff0c\u800c\u6700\u574f\u60c5\u51b5\u4e0b `memset` \u4f1a\u6d88\u8017\u5927\u7ea6 `750ms` \u7684\u65f6\u95f4\uff08\u4eb2\u6d4b\uff09\uff0c\u8fd8\u662f\u53ef\u4ee5\u901a\u8fc7\u7684\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std; \nint t,n,m,p,q,k,ans=0,sum=0; \nbool a[200005]={0},f=1;\nint main(){\n\tcin>>t;\n\twhile(t--){\n\t\tcin>>n>>m;\n\t\tmemset(a,0,sizeof(a));\n\t\tk=0;f=1;ans=-1;sum=0;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tcin>>p>>q;\n\t\t\tif(f){\n\t\t\t\tif(p==1){\n\t\t\t\t\tif(!a[q]){\n\t\t\t\t\t\ta[q]=1;\n\t\t\t\t\t\tsum++;\n\t\t\t\t\t}\n\t\t\t\t\tif(sum==n||k==q){\n\t\t\t\t\t\tans=i;\n\t\t\t\t\t\tf=0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(k!=0&&k!=q||a[q]){\n\t\t\t\t\t\tans=i;\n\t\t\t\t\t\tf=0;\n\t\t\t\t\t}\n            \telse k=q;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcout<<ans<<endl;\n\t}\n}\n```",
        "postTime": 1684126143,
        "uid": 858671,
        "name": "GeorgeAAAADHD",
        "ccfLevel": 0,
        "title": "P9343 \u4e00\u66f2\u65b0\u8bcd\u9152\u4e00\u676f \u9898\u89e3"
    }
]
[
    {
        "content": "\u8fd9\u9898\u4e3a\u4ec0\u4e48\u9ed1\u554a\u2026\u2026\u7eff\u9898\u5dee\u4e0d\u591a\u4e86\u5427\u2026\u2026\n\n\u9996\u5148\u8fd9\u9898\u662f\u8981\u9009\u4e00\u4e2a$i$\u548c$H_i$\u4f7f\u5f97\n\n$$\\sum_{j}|X_j-H_i+|i-j||$$\n\n\u6700\u5c0f\u3002\n\n\u7edd\u5bf9\u503c\u662f\u5f88\u9ebb\u70e6\u7684\u4e1c\u897f\uff0c\u8003\u8651\u62c6\u6389\u3002\u91cc\u9762\u7684\u90a3\u4e2a$|i-j|$\u53ef\u4ee5\u901a\u8fc7\u5bf9$i$\u7684\u5de6\u8fb9\u53f3\u8fb9\u5206\u5f00\u8003\u8651\u5b9e\u73b0\u3002\u4e8e\u662f\u548c\u5f0f\u53d8\u6210\uff1a\n\n$$\\sum_{j<i}|(X_j-j+i)-H_i|+\\sum_{j>i}|(X_j+j-i)-H_i|$$\n\n\u8fd9\u5176\u5b9e\u662f\u4e00\u4e2a\u5f88\u7ecf\u5178\u7684\u95ee\u9898\uff1a\u5750\u6807\u8f74\u4e0a\u6709\u4e00\u4e9b\u70b9\uff0c\u6c42\u4e00\u4e2a\u70b9\u5230\u5b83\u4eec\u7684\u8ddd\u79bb\u548c\u6700\u5c0f\u3002\u4f17\u6240\u5468\u77e5\u8fd9\u4e2a\u9009\u51fa\u7684\u70b9\u5c31\u662f\u6240\u6709\u70b9\u7684**\u4e2d\u4f4d\u6570**\u3002\n\n\u4e8e\u662f\u6211\u4eec\u4f7f\u7528**\u6811\u72b6\u6570\u7ec4+\u4e8c\u5206**\u67e5\u8be2\u4e2d\u4f4d\u6570\uff1a\u67e5\u8be2\u5de6\u8fb9\u6ee1\u8db3$X_j-j<H_i-i$\u7684$j$\u7684\u6570\u91cf\uff0c\u53f3\u8fb9$X_j+j<H_i+i$\u7684\u6570\u91cf\uff0c\u5982\u679c\u8fd9\u4e24\u4e2a\u503c\u52a0\u8d77\u6765\u591a\u4e8e\u4e00\u534a\u90a3\u4e48\u8bf4\u660e$H_i$\u4f30\u5927\u4e86\uff0c\u5426\u5219\u4f30\u5c0f\u4e86\uff0c\u4e8e\u662f\u53ef\u4ee5\u4e8c\u5206\u3002\n\n\u67e5\u8be2\u7b54\u6848\u5219\u4e0d\u96be\u3002\u4ee5\u5de6\u8fb9\u4e3a\u4f8b\uff0c\u5bf9\u4e8e$X_j-j<H_i-i$\u7684$j$\u8d21\u732e\u662f$H_i-i-X_j+j$\uff0c\u5426\u5219\u662f\u5176\u76f8\u53cd\u6570\uff0c\u663e\u7136\u53ef\u4ee5**\u6811\u72b6\u6570\u7ec4**\u7ef4\u62a4\u3002\n\n\u5b9e\u73b0\u65f6\u8fd8\u8981\u6ce8\u610f\u4e00\u4e9b\u5c0f\u7ec6\u8282\uff1a\n\n- $H_j$\u5fc5\u987b\u662f\u6b63\u6570\uff0c\u9700\u8981\u8bbe\u597d\u4e8c\u5206\u8303\u56f4\u3002\n\n- \u4e8c\u5206\u4e2d\u4f4d\u6570\u65f6\u7684\u201c\u4e00\u534a\u201d\u5e94\u8be5\u662f$\\lceil\\frac n 2\\rceil$\u3002\n\n\u4ee3\u7801\u5982\u4e0b\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\n\nconst int inf=1000100000;\n\nint N;\nint X[100005],val[200005],n;\nstruct BIT{\n\tint C0[200005];ll C1[200005];\n\tvoid chn(int x,int k0,int k1){for(;x<=n;x+=x&-x) C0[x]+=k0,C1[x]+=k1;}\n\tint qst0(int x){int ans=0;for(;x;x-=x&-x) ans+=C0[x];return ans;}\n\tll qst1(int x){ll ans=0;for(;x;x-=x&-x) ans+=C1[x];return ans;}\n}Lbit,Rbit;\nint Find(int x){\n\tint L=0,R=n,mid;\n\twhile(L<R){\n\t\tmid=(L+R+1)>>1;\n\t\tif(val[mid]<=x) L=mid;\n\t\telse R=mid-1;\n\t}\n\treturn L;\n}\nint main(){\n\tscanf(\"%d\",&N);\n\tfor(int i=1;i<=N;i++)\n\t\tscanf(\"%d\",&X[i]),\n\t\tval[++n]=X[i]-i,val[++n]=X[i]+i;\n\tval[++n]=-inf;\n\tsort(val+1,val+n+1);n=unique(val+1,val+n+1)-val-1;\n\t\n\tfor(int i=1;i<=N;i++) Rbit.chn(Find(X[i]+i),1,X[i]+i);\n\t\n\tll ans=0x3f3f3f3f3f3f3f3f;\n\tfor(int i=1;i<=N;i++){\n\t\tRbit.chn(Find(X[i]+i),-1,-X[i]-i);\n\t\tLbit.chn(Find(X[i]-i),1,X[i]-i);\n\t\t\n\t\tint L=max(i,N-i+1),R=inf,mid;\n\t\twhile(L<R){\n\t\t\tmid=(L+R)>>1;\n\t\t\tif(Lbit.qst0(Find(mid-i))+Rbit.qst0(Find(mid+i))>=(N+1)/2) R=mid;\n\t\t\telse L=mid+1;\n\t\t} \n\t\t\n\t\tint cntLl=Lbit.qst0(Find(R-i)),cntLr=Lbit.qst0(Find(inf))-cntLl,\n\t\t\tcntRl=Rbit.qst0(Find(R+i)),cntRr=Rbit.qst0(Find(inf))-cntRl;\n\t\tll  sumLl=Lbit.qst1(Find(R-i)),sumLr=Lbit.qst1(Find(inf))-sumLl,\n\t\t\tsumRl=Rbit.qst1(Find(R+i)),sumRr=Rbit.qst1(Find(inf))-sumRl;\n\t\tans=min(ans,(sumLr-sumLl+1LL*(cntLl-cntLr)*(R-i))+(sumRr-sumRl+1LL*(cntRl-cntRr)*(R+i)));\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n```\n",
        "postTime": 1573475532,
        "uid": 58567,
        "name": "x\u4e49x",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4523 \u3010[COCI2017-2018 Contest4] Krov \u3011"
    }
]
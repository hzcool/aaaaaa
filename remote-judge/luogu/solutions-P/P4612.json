[
    {
        "content": "[$P4612$](https://www.luogu.org/problem/P4612)\n\n---\n\n\u8fd9\u9898$AC$\u7387\u633a\u9ad8\u7684\u8bf4\uff0c~~\u7a9d~~$wa$~~\u4e86\u4e00\u6b21\uff0c\u4e3a\u7ec4\u7ec7\u8499\u7f9e~~\uff08\u6240\u7528\u4eba\u4ea419\uff0cAC15\uff09\n\n\u90a3\u4e48$Solution:$\n\n\n\n------------\n\n\n### $I$\u5b58\u50a8\n\n\u53ef\u4ee5\u89c2\u5bdf\u5230\uff0c$Mirko$\u7684\u670b\u53cb\u53ef\u4ee5\u63a5\u5230$Mirko$\u7684\u8303\u56f4\u662f\u4e00\u4e2a\u77e9\u5f62,\u5982\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/op0jeh32.png)\n\n\u90a3\u4e48\u4ee5\u4fbf\u65b9\u4fbf\u6211\u4eec\u5c31\u7528\u7ed3\u6784\u4f53\u6765\u5b58\n\n```cpp\nstruct node \n{\n\tint ux,dx,ly,ry;\n}a[400100];\n```\n$ux$\u6307\u77e9\u5f62\u4e0a\u8fb9\uff0c$dx$\u6307\u77e9\u5f62\u4e0b\u8fb9\uff0c$ly$\u77e9\u5f62\u5de6\u8fb9\uff0c$ry$\u77e9\u5f62\u53f3\u8fb9\uff08\u5f85\u4f1a\u8981\u8003\u7684\n\n\n\n\n------------\n\n\n### $II$\u8f6c\u79fb\u8303\u56f4\n\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c$Mirko$\u7684\u51fa\u53d1\u70b9\u4e00\u5b9a\u662f\u5728\u7b2c\u4e00\u4e2a\u670b\u53cb\u53ef\u4ee5\u63a5\u5230\u7684\u8303\u56f4\u5185\uff08\u4e0d\u4e00\u5b9a\u662f\u5728\u8fb9\u7f18\u4e0a\uff0c\u5373$t = a[1]$\n\n\u53ef\u4ee5\u8bb0$t$\u4e3a$Mirko$\u53ef\u4ee5\u5f85\u7684\u8303\u56f4\uff0c\u4ece\u66fe\u7ecf\u8303\u56f4\u5185\u7684\u70b9\u8d70\u76f8\u540c\u7684\u6700\u77ed\u6b65\u6570$d$\u800c\u5f97\u6765\uff0c\u5982\u56fe\n![](https://cdn.luogu.com.cn/upload/image_hosting/ilsycfqn.png)\n\n\u5047\u8bbe\u7ea2\u8272\u7684\u8303\u56f4\u662f\u66fe\u7ecf\u53ef\u4ee5\u5f85\u7684\u8303\u56f4\uff08\u56e0\u4e3a\u6709\u65f6\u5019\u4fdd\u8bc1\u6700\u4f18\u7684\u4e0d\u6b62\u4e00\u4e2a\u70b9\uff09\uff0c\n\n\u90a3\u4e48\u6bcf\u6b21\u66f4\u65b0\u51fa\u4e00\u4e2a\u65b0\u7684\u8303\u56f4\n\n\u800c\u8fd9\u4e2a\u8303\u56f4\u4e00\u5b9a\u662f\u4e2a\u77e9\u5f62\uff0c\u90a3\u4e48\u4e4b\u540e\u5c31\u8bf4\u77e9\u5f62\u5427\uff08\u8bb0\u51e0$yy$\u4e00\u4e0b\n\n\n\n------------\n\n\n### $III$\u5982\u4f55\u8f6c\u79fb\u77e9\u5f62\n\n\u53ef\u4ee5\u89c2\u5bdf\u51fa\uff0c\u4ece\u5f53\u524d\u6240\u5728\u7684\u77e9\u5f62$t$\u8981\u8f6c\u79fb\u5230$a[i](i >= 2)$\n\n\u5171\u6709\u4e24\u79cd\u53ef\u80fd\uff1a\n\n$1$\u3001    $t$ \u4e0e $a[i]$\u3000\u6709\u4ea4\u96c6\uff0c\u90a3\u4e48\u5c31\u4e00\u5b9a\u4e0d\u9700\u8981\u8d70\uff0c```d = 0```\n\n\u7136\u540e\u628at\u66f4\u65b0\u4e3a\u4ea4\u96c6 \n\n\u4ea4\u96c6\u6c42\u6cd5\n```\nnode Get_(node a1,node a2)\n{\n\tnode b = (node){min(a1.ux,a2.ux),max(a1.dx,a2.dx),max(a1.ly,a2.ly),min(a1.ry,a2.ry)};\n\tif(b.ux < b.dx || b.ly > b.ry)return (node){-1,-1,-1,-1};\n\treturn b;\n}\n```\n\u5982\u679c\u65e0\u4ea4\u96c6\uff0c\u5c31\u66f4\u65b0\u4e3a$-1$\uff0c\u4ee5\u4fbf\u4e8e\u63a5\u4e0b\u6765\u5224\u65ad\n\n$2$\u3001$t$ \u4e0e $a[i]$  \u65e0\u4ea4\u96c6\uff0c\u90a3\u4e48\u9700\u8981\u8d70 ```d = max(max(a[i].dx-t.ux,t.dx-a[i].ux),max(a[i].ly-t.ry,t.ly-a[i].ry));``` \n\n$a$.\u5185\u90e8\u7b2c\u4e00\u4e2a$max$\uff1a\u4e00\u4e2a\u77e9\u5f62$a$\u7684\u4e0b\u5e95\u51cf\u53bb\u53e6\u4e00\u4e2a\u77e9\u5f62$b$\u7684\u4e0a\u5e95\uff08\u53cd\u7740\u518d\u6765\u4e00\u6b21\n\n\uff08\u89e3\u91ca\u4e00\u4e0b\u5185\u90e8$max$\uff1a\u6211\u4eec\u8981\u6c42\u7684\u662f\u8ddd\u79bb\u6700\u8fd1\u7684$a$\u4e0e$b$\u7684\u8fb9\u7684\u8ddd\u79bb\n\n\u5373\uff0c\u7ad6\u7740\u8d70\u7684\u6700\u5c0f\u6b65\u6570\uff08\u6ca1\u9519\uff0c\u5c31\u662f\u6700\u5c0f\uff0c\u81ea\u5df1\u501f\u52a9\u4e0b\u56fe$yy$\n\n\n$b$.\u5185\u90e8\u7b2c\u4e8c\u4e2a$max$\uff1a\u4e00\u4e2a\u77e9\u5f62\u7684\u5de6\u8fb9\u51cf\u53bb\u53e6\u4e00\u4e2a\u77e9\u5f62\u7684\u53f3\u8fb9\uff0c\u5373\uff0c\u6a2a\u7740\u8d70\u7684\u6700\u5c0f\u6b65\u6570\n\n$c$.\u5916\u90e8$max$\uff1a\u56e0\u4e3a\u5728\u659c\u7740\u8d70\u7684\u65f6\u5019\u53ef\u4ee5\u5206\u6210\u8d70\u4e24\u6b65\uff0c\u8b6c\u5982\uff0c\u5de6\u4e0a = \u5de6\u8d70$1$+\u4e0a\u8d70$1$\n\n\u90a3\u4e48\u6a2a\u7ad6\u4e24\u65b9\u5411\u8d70\u7684\u5c11\u7684\u5c31\u53ef\u4ee5\u88ab\u62b5\u6d88\uff0c\u6700\u5c0f\u6b65\u6570\u5c31\u662f\u5927\u7684\u90a3\u4e2a\n\n\u5443\uff0c\u4e0d\u597d\u7406\u89e3\u5462\uff0c\u753b\u4e2a\u56fe\u5427\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ig97mtwh.png)\n\n\u6700\u540e\n```cpp\nt = Get_((node){t.ux+d,t.dx-d,t.ly-d,t.ry+d},a[i]);ans += (long long )d;\n```\n$t$\u5f80\u5916\u6269\u5f20$d$ \u4e0e$a[i]$\u6c42\u4ea4\u96c6\u3002\n\n---\n\n$ACcode$\n\n```cpp\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\nint N,x,y,p;\nstruct node \n{\n\tint ux,dx,ly,ry;\n}a[400100]; \nnode Get_(node a1,node a2)\n{\n\tnode b = (node){min(a1.ux,a2.ux),max(a1.dx,a2.dx),max(a1.ly,a2.ly),min(a1.ry,a2.ry)};\n\tif(b.ux < b.dx || b.ly > b.ry)return (node){-1,-1,-1,-1};\n\treturn b;\n}\nint main()\n{\n\tscanf(\"%d\",&N);\n\tfor(int i = 1 ; i <= N ; i ++ )\n\t{\n\t\tscanf(\"%d%d%d\",&x,&y,&p);\n\t\ta[i] = (node){x + p,x - p,y - p,y + p};\n\t}\n\tnode t = a[1];long long ans = 0;\n\tfor(int i = 2 ; i <= N ; i ++ )\n\t{\n\t\tnode b = Get_(a[i],t);\n\t\tif(b.dx != - 1){t = b;continue;}\n\t\tint d = max(max(a[i].dx-t.ux,t.dx-a[i].ux),max(a[i].ly-t.ry,t.ly-a[i].ry));\n\t\tt = Get_((node){t.ux+d,t.dx-d,t.ly-d,t.ry+d},a[i]);ans += (long long )d;\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n\n\n------------\n\n\u5176\u5b9e\u8fd8\u53ef\u4ee5\u5728\u5316\u7b80\u4e0b\n\n\u9996\u5148\u7ed3\u6784\u4f53\u53d8\u91cf\u6709\u4e24\u4e2a\u5373\u53ef\uff08\u8282\u80fd\u4e3b\u4e49\u4e07\u5c81\uff01$!$!\n\n$l$ \u76f8\u5f53\u4e8e$t$\uff0c$now$\u4e3a\u5f53\u524d\u77e9\u5f62\n\n\u6bcf\u6b21\u66f4\u65b0\u4e0b l \n\n\u7ecf\u8fc7\u8ba1\u7b97\u53ef\u4ee5\u53d1\u73b0\n\n\u5728\u6c42\u4ea4\u96c6\u65f6\uff0c\u5982\u679c\u76f8\u4ea4\uff0c\u90a3\u4e48\n\n```\nd = max(max(now.dx-l.ux,l.dx-now.ux),max(now.ly-l.ry,l.ly-now.ry))\n```\n\u4e00\u5b9a$<0$\n\n\u90a3\u4e48\u6211\u4eec\u4f7f$d = 0 $,\u53cd\u6b63\u539f\u6765\u5982\u679c\u6709\u4ea4\u96c6\uff0c$ans$\u4e5f\u4ec0\u4e48\u90fd\u4e0d\u52a0\n\n\u6700\u540e\u66f4\u65b0\u4e0b$t$\n\n```cpp\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\nint N,x,y,p;\nstruct node \n{\n\tint ux,dx,ly,ry;\n}l,now; \nint main()\n{\n\tscanf(\"%d\",&N);scanf(\"%d%d%d\",&x,&y,&p);\n\tl = (node){x + p,x - p,y - p,y + p};\n\tlong long ans = 0;\n\tfor(int i = 2 ; i <= N ; i ++ )\n\t{\n\t\tscanf(\"%d%d%d\",&x,&y,&p);\n\t    now = (node){x + p,x - p,y - p,y + p};\n\t    int d = max(max(now.dx-l.ux,l.dx-now.ux),max(now.ly-l.ry,l.ly-now.ry));\n\t    if(d < 0)d = 0;\n\t    ans += (long long)d;\n\t    l.dx = max(l.dx - d,now.dx);\n\t    l.ux = min(l.ux + d,now.ux);\n\t    l.ly = max(l.ly - d,now.ly);\n\t    l.ry = min(l.ry + d,now.ry);\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1573369382,
        "uid": 116162,
        "name": "\u7fbd\u5107",
        "ccfLevel": 3,
        "title": "\u9898\u89e3 P4612 \u3010[COCI2011-2012#7] SETNJA\u3011"
    },
    {
        "content": "## Solution\n\n\u6ce8\u610f\u5230\u8d77\u70b9\u662f\u6ca1\u6709\u4ec0\u4e48\u610f\u4e49\u7684\uff0c\u6211\u4eec\u53ea\u5173\u6ce8\u5728\u6700\u4f18\u7b54\u6848\u7684\u60c5\u51b5\u4e0b\u7684\u7ec8\u70b9\u96c6\u5408 $S$\u3002\n\n\u6ce8\u610f\u5230\u7ec8\u70b9\u4f1a\u5f62\u6210\u4e00\u4e2a\u77e9\u5f62\uff0c\u56e0\u6b64\u53ea\u7528\u8bb0\u5f55\u5de6\u4e0b\u548c\u53f3\u4e0a\u7684\u5750\u6807\u5373\u53ef\u3002\n\n\u5bf9\u4e8e $i-1$ \u7684\u7ec8\u70b9\u96c6\u5408 $S$ \u548c\u7b2c $i$ \u4e2a\u6b63\u65b9\u5f62\uff0c\u4e8c\u5206 $len$\uff0c\u540c\u65f6\u66f4\u65b0\u7ec8\u70b9\u96c6\u5408 $S$\u3002\n\n\u4e8c\u5206\u5408\u6cd5\u6761\u4ef6\u662f\u5c06\u96c6\u5408\u6269\u5f20 $mid$ \u540e\u4e0e\u7b2c $i$ \u4e2a\u6b63\u65b9\u5f62\u6709\u4ea4\u96c6\uff0c\u540c\u65f6\u66f4\u65b0\u540e\u7684\u7ec8\u70b9\u96c6\u5408\u5c31\u662f\u8fd9\u4e2a\u4ea4\u96c6\u3002\n\n\u590d\u6742\u5ea6 $\\mathcal O(n\\log 200000)$\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u4e0d\u4e8c\u5206\uff0c\u7528\u6570\u5b66\u7684\u65b9\u6cd5\u505a\u5230 $\\mathcal O(n)$\u3002\n\n## Code\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define ll long long\nusing namespace std;\nll n,x,y,z,len,ans;\nstruct node\n{\n    ll x1,y1,x2,y2;\n}a,b;\nnode kuo(node a,ll l)\n{\n    a.x1-=l;a.y1-=l;\n    a.x2+=l;a.y2+=l;\n    return a;\n}\nnode jiao(node x,node y)\n{\n    node s;\n    s.x1=max(x.x1,y.x1);\n    s.y1=max(x.y1,y.y1);\n    s.x2=min(x.x2,y.x2);\n    s.y2=min(x.y2,y.y2);\n    return s;\n}\nbool check(node x) {return x.x1<=x.x2&&x.y1<=x.y2;}\nint erfen(node x,node y)\n{\n    ll l=0,r=200000,mid,res=0;\n    while (l<=r)\n    {\n        mid=(l+r)>>1;\n        if (check(jiao(kuo(x,mid),y))) res=mid,r=mid-1;\n        else l=mid+1;\n    }\n    return res;\n}\nint main()\n{\n    scanf(\"%lld\",&n);\n    scanf(\"%lld%lld%lld\",&x,&y,&z);\n    a.x1=x-z;a.y1=y-z;\n    a.x2=x+z;a.y2=y+z;\n    for (int i=2;i<=n;++i)\n    {\n        scanf(\"%lld%lld%lld\",&x,&y,&z);\n        b.x1=x-z;b.y1=y-z;\n        b.x2=x+z;b.y2=y+z;\n        len=erfen(a,b);\n        a=jiao(kuo(a,len),b);\n        ans+=len;\n    }\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```\n\n",
        "postTime": 1638604668,
        "uid": 166078,
        "name": "Thunder_S",
        "ccfLevel": 6,
        "title": "P4612 [COI2012] SETNJA"
    }
]
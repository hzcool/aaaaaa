[
    {
        "content": "\u697c\u4e0a\u9898\u89e3\u597d\u9b3c\u755c\u3002\n\n\u6570\u4f4ddp\u6a21\u677f\u9898\u554a\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u7b54\u6848\u62c6\u6210query(1,r)-query(1,l-1)\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u6c42\u51fa1~x\u7684\u8fd9\u4e2a\u533a\u95f4\u7684k\u7d27\u51d1\u6570\u7684\u6570\u91cf\u5c31\u884c\u4e86\u3002\n\nf[i][j]\u8868\u793a\u7b2ci\u4f4d\u4e0a\u7684\u6570\u4e3aj\u7684k\u7d27\u51d1\u6570\u7684\u6570\u91cf\u3002\n\n\n$f[i][j]=\\sum_{k=0}^{9}f[i-1][k] (|k-j|<=n)$\n\n\u5bf9\u4e8e\u7edf\u8ba1\u5c31\u662f\u5148\u7edf\u8ba1\u6700\u9ad8\u4f4d\u6bd4x\u5c0f\u7684\u65b9\u6848\u6570\uff0c\u7136\u540e\u518d\u9010\u4f4d\u7edf\u8ba1\u3002\n\n\u4f8b\u5982query(1,432)=query(1,399)+query(400,429)+query(430,432)\n\n\u7136\u540e\u628a\u7b26\u5408\u6761\u4ef6\u7684\u52a0\u4e0a\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<string>\n#include<set>\n#include<vector>\n#include<map>\n#include<cmath>\n#define For(i,x,y) for (int i=(x);i<=(y);i++)\n#define Dow(i,x,y) for (int i=(x);i>=(y);i--)\n#define cross(i,k) for (int i=first[k];i;i=last[i])\n#define il inline\n#define vd void\n#define ll long long\nusing namespace std;\nil ll read(){\n    ll x=0;int ch=getchar(),f=1;\n    while (!isdigit(ch)&&(ch!='-')&&(ch!=EOF)) ch=getchar();\n    if (ch=='-'){f=-1;ch=getchar();}\n    while (isdigit(ch)){x=(x<<1)+(x<<3)+ch-'0';ch=getchar();}\n    return x*f;\n}\nll l,r,n,f[20][10],num[20],len;\n//il int abss(int x){return x?x:-x;}\nil vd dp(){\n    For(i,0,9) f[1][i]=1;\n    For(i,2,20)\n        For(j,0,9)\n            For(k,0,9)\n                if (abs(j-k)<=n) f[i][j]+=f[i-1][k];\n}\nil ll query(ll x){\n    len=0;\n    For(i,0,20) num[i]=0;\n    while (x>0){\n        num[++len]=x%10;\n        x/=10;\n    }\n    ll ans=0;\n    For(i,1,len-1)\n        For(j,1,9)\n            ans+=f[i][j];\n    Dow(i,len,1){\n        For(j,0,num[i]-1){\n            if (i==len&&!j) continue;\n            if (abs(num[i+1]-j)<=n||i==len) ans+=f[i][j];\n        }\n        if (abs(num[i]-num[i+1])>n&&i!=len) break;\n    }\n    return ans;\n}\nint main(){\n    l=read(),r=read(),n=read();\n    dp();\n    return printf(\"%lld\",query(r+1)-query(l)),0;\n}\n```",
        "postTime": 1515812996,
        "uid": 25355,
        "name": "\u590f\u8272\u796d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2188 \u3010\u5c0fZ\u7684 k \u7d27\u51d1\u6570\u3011"
    },
    {
        "content": "# \u9898\u76ee\n[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2188)\n\n\u6628\u5929\u521a\u5b66\u4e86\u6570\u4f4d$DP$\uff0c\u611f\u89c9\u4e0d\u9519\uff0c\u5c31\u6765\u53d1\u7bc7\u9898\u89e3\u4f9b\u5927\u5bb6\u501f\u9274 ~~(shui gu zhi)~~\n\n\u4e0b\u9762\u662f\u6b63\u6587\n\n\u2193 \u2193 \u2193 \u2193 \u2193 \u2193\n# $Sol$\n\n\u4e3b\u8981\u7b97\u6cd5\uff1a**\u6570\u4f4d$DP$**\u3002\n\n\u6211\u4eec\u6c42\u7d27\u51d1\u6570\u4e2a\u6570\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u516c\u5f0f\u6c42$\\sum_{i=l}^{r}{pd}=\\sum_{i=1}^{r}{pd}-\\sum_{i=1}^{l-1}{pd}$\uff0c$pd$\u4e3a\u5224\u65ad\u662f\u5426\u4e3a\u7d27\u51d1\u6570\u3002\n\n\u6211\u8fd9\u91cc\u7528\u7684\u662f\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u6570\u4f4d$DP$\uff0c\u5927\u4f6c\u52ff\u55b7\u3002\n\n```cpp int dfs(int now,int num,bool flag,bool flag1)```\n\n\u6211\u6765\u89e3\u91ca\u4e00\u4e0b\u6bcf\u4e00\u7ef4\u7684\u4f5c\u7528\u6216\u610f\u4e49\uff1a\n+ $now$ \u8868\u793a\u5f53\u524d\u662f\u7b2c\u51e0\u4f4d\u3002\n+ $num$ \u8868\u793a\u524d\u4e00\u4f4d\u7684\u6570\u5b57\u3002\n+ $flag$ \u8868\u793a\u524d $now-1$ \u4f4d\u662f\u5426\u90fd\u4e3a\u4e0a\u754c\u3002\n+ $flag1$ \u8868\u793a\u524d $now-1$ \u4f4d\u662f\u5426\u90fd\u4e3a$0$\u3002\n\n\u4e0b\u9762\u662f\u6574\u4e2a\u8bb0\u5fc6\u5316\u641c\u7d22\uff1a\n```cpp\nint dfs(int now,int num,bool flag,bool flag1)\n{\n\tif (now==0)//\u5230\u4e86\u7b2c0\u4e3a\u8bf4\u660e\u6709\u4e00\u4e2a\u7d27\u51d1\u6570\u4e86\u3002\n\treturn 1;\n\tif (!flag&&!flag1&&dp[now][num]>0)//\u8bb0\u5fc6\u5316\u5173\u952e\uff01\uff01\uff01\n\treturn dp[now][num];\n\tint n=0;\n\tif (flag) n=a[now];\n\telse n=9;\n\tint sum=0;\n\tfor (int i=0;i<=n;i++)\n\tif (abs(i-num)<=k||flag1)//\u5224\u65ad\u662f\u5426\u7d27\u51d1\u6570\u3002\n\t{\n\t\tsum+=dfs(now-1,i,flag&&(i==a[now]),flag1&&(i==0));\n\t}\n\tif (!flag&&!flag1)dp[now][num]=sum;//\u72b6\u6001\u8f6c\u79fb\u3002\n\treturn sum;\n}\n```\n# $Code$\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint ans,x,y,a[20],k,dp[20][20];\n\nint dfs(int now,int num,bool flag,bool flag1)\n{\n\tif (now==0)\n\treturn 1;\n\tif (!flag&&!flag1&&dp[now][num]>0)\n\treturn dp[now][num];\n\tint n=0;\n\tif (flag) n=a[now];\n\telse n=9;\n\tint sum=0;\n\tfor (int i=0;i<=n;i++)\n\tif (abs(i-num)<=k||flag1)\n\t{\n\t\tsum+=dfs(now-1,i,flag&&(i==a[now]),flag1&&(i==0));\n\t}\n\tif (!flag&&!flag1)dp[now][num]=sum;\n\treturn sum;\n}\n\nint awa(int x)//\u76ae\u4e00\u4e0b\u3002\n{\n\tint len=0;\n\tif (x==0)\n\treturn 1;\n\tans=0;\n\twhile (x>0)\n\t{\n\t\ta[++len]=x%10;\n\t\tx/=10;\n\t}//\u628a\u6bcf\u4e00\u4f4d\u62c6\u51fa\u6765\u3002\n\tfor (int i=0;i<=a[len];i++)\n\tans+=dfs(len-1,i,i==a[len],i==0);//\u7b2c1\u4f4d\u81ea\u5df1\u679a\u4e3e\u3002\n\treturn ans;\n}\n\nsigned main()\n{\n\tscanf(\"%lld %lld %lld\",&x,&y,&k);\n\tprintf(\"%lld\",awa(y)-awa(x-1));//\u8fd0\u7528\u516c\u5f0f\u3002\n\treturn 0;\n}\n```\n# \u9898\u89e3\u6ca1\u770b\u61c2\uff1f\n\n\u82e5\u4f60\u4e0d\u61c2\u6570\u4f4d$DP$\u8bf7\u770b\u8fd9\u4e2a[\u89c6\u9891](https://www.bilibili.com/video/BV1Fc411h76q)\uff0c\u5426\u5219\u8bf7\u79c1\u4fe1\u6211\u3002",
        "postTime": 1604158455,
        "uid": 173424,
        "name": "Hovery",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2188 \u3010\u5c0fZ\u7684 k \u7d27\u51d1\u6570\u3011"
    },
    {
        "content": "\u8fd9\u9898\u662f\u4e2a\u6570\u4f4d dp \u6a21\u677f\u9898\uff0c\u96be\u5ea6\u4e0d\u5927\u3002\u8fd9\u9053\u9898\u5f88\u50cf [P2657 \\[SCOI2009\\] windy \u6570](https://www.luogu.com.cn/problem/P2657)\uff0c\u628a\u90a3\u9053\u9898\u7684\u4ee3\u7801\u6539\u4e00\u6539\u5c31 A \u4e86\n\n\u9996\u5148\uff0c\u53ef\u4ee5\u4f7f\u7528 `char*` \u5f62\u5f0f\u8bfb\u5165 $l,r$\uff0c\u6700\u7ec8\u7b54\u6848\u5c31\u662f $solve(r)-solve(l)+check(l)$\uff0c\u5176\u4e2d $solve(x)$ \u8868\u793a $[1,x]$ \u7684 $k$ \u7d27\u51d1\u6570\uff0c$check(x)$ \u8868\u793a\u82e5 $x$ \u7b26\u5408\u6761\u4ef6\u5219\u4e3a $1$\uff0c\u5426\u5219\u4e3a $0$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\u89e3\u51b3\u4e86\u3002\u8fd9\u4e2a Dfs \u8981\u7528\u56db\u4e2a\u53c2\u6570 $t,x,f,g$\uff1b$t$ \u8868\u793a\u5f53\u524d\u5728\u7b2c\u51e0\u4f4d\uff0c$x$ \u8868\u793a\u8fd9\u4e00\u4f4d\u662f\u51e0\uff0c$f$ \u8868\u793a\u5f53\u524d\u662f\u5426\u8fd8\u662f\u524d\u5bfc\u96f6\uff0c$g$ \u8868\u793a\u76ee\u524d\u4e0e\u8fd9\u4e2a\u6570\u524d $t$ \u4f4d\u662f\u5426\u76f8\u7b49\u3002\u6839\u636e\u76f8\u5e94\u7684\u6761\u4ef6\u8bbe\u5b9a\u8bb0\u5fc6\u6570\u7ec4\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u6700\u540e\u5949\u4e0a\u7801\u98ce\u6e05\u5947\u7684\u4ee3\u7801(\u8bf7\u52ff\u6284\u88ad,\u5426\u5219\u540e\u679c\u81ea\u8d1f~)\uff1a\n\n```cpp\n#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\nchar L[20],R[20];\nchar *now;\nint k;\nlong long mem[20][20][2][2];\nlong long Dfs(int t,int x,char f,char g){\n\tif(!now[t])return 1;\n\tif(mem[t][x][f][g]>=0)return mem[t][x][f][g];\n\tlong long ans=0;\n\tif(f){\n\t\tint mx=now[t]-'0';\n\t\tfor(int i=0;i<=|mx;++i)\n\t\t\tif(g){\n\t\t\t\tif(!i)ans+=Dfs(t+1,i,i==mx,1);\n\t\t\t\telse ans+=Dfs(t+1,i,i==mx,0);\n\t\t\t}else if(abs(i-x)<=k)ans+=Dfs(t+1,i,i==mx,0);\n\t}else{\n\t\tfor(int i=0;i<=9;++i)\n\t\t\tif(g){\n\t\t\t\tif(!i)ans+=Dfs(t+1,i,0,1);\n\t\t\t\telse ans+=Dfs(t+1,i,0,0);\n\t\t\t}else if(abs(i-x)<=k)ans+=Dfs(t+1,i,0,0);\n\t}\n\treturn mem[t][x][f][g]=ans/;\n}\nlong long solve(char *t){\n\tnow=/t;\n\tmemset(mem,-1,sizeof(mem));\n\treturn Dfs(0,0,1,1);\n}\nchar check(char *s){\n\tfor(int i=1;s[i];++i)\n\t\tif(abs(s[i]-s[i-1])>?k)return 0;\n\treturn 1;\n}\nint main(){\n\tscanf(\"%s%s%d\",&L,&R,&k);\n\tprintf(\"%lld\\n\",solve(R)-solve(L)+check(L));\n\treturn 0;\n}\n```",
        "postTime": 1623644769,
        "uid": 228486,
        "name": "SunsetSamsara",
        "ccfLevel": 7,
        "title": "P2188 \u5c0fZ\u7684 k \u7d27\u51d1\u6570 \u9898\u89e3"
    },
    {
        "content": "\u8ddf[\u6a21\u677f\u9898](https://www.luogu.com.cn/problem/P2657)\u5dee\u4e0d\u4e86\u591a\u5c11\u3002\n\n\u5b9a\u4e49 $f_{i,j}$ \u4e3a $i$ \u4f4d\u4e14\u7b2c $i$ \u4f4d\u4e0a\u6570\u4f4d $j$ \u7684\u7d27\u51d1\u6570\u4e2a\u6570\uff0c\u90a3\u4e48\u6709 \n$$f_{i,j}=\\sum_{k=0}^{k\\leq9}f_{i-1,k}(|j-k|\\leq K)$$\n\n\u7edf\u8ba1\u65f6\u53ea\u8981\u62c6\u5206\u5373\u53ef\u3002\u4f8b\u5982\uff1a\n\n$$query(2333)=f_{1,1999}+f_{2000,2299}+f_{2300,2329}+f_{2330,2333}$$\n\n\u6ce8\u91ca\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N = 25;\nll f[N][N], a[N], l, r, lmt;\nll query(ll n) {\n\tll sum = 0, ans = 0;\n\twhile (n) a[++ sum] = n % 10, n /= 10; // \u5206\u89e3\u6570\u4f4d\n\tfor (int i = 1; i < sum; i ++)\n\t\tfor (int j = 1; j <= 9; j ++)\n\t\t\tans += f[i][j]; // \u5bf9\u4e8esum - 1\u4f4d\u4e0a\u7684\u7d27\u51d1\u6570\uff0c\u662f\u5fc5\u5b9a\u5305\u542b\u5728\u6c42\u548c\u533a\u95f4\u91cc\u7684 \n\tfor (int i = sum; i >= 1; i --) {\n\t\tfor (int j = 0; j < a[i]; j ++)\n\t\t\tif (!(i == sum && j == 0) && (i == sum || abs(a[i + 1] - j) <= lmt)) // \u5982\u679c\u6700\u9ad8\u4f4d\u662f0\uff0c\u76f4\u63a5\u8df3\u8fc7\n\t\t\t\tans += f[i][j];\n\t\tif (abs(a[i] - a[i + 1]) > lmt && i != sum) break; // \u5982\u679c\u4e0d\u7b26\u5408\u6761\u4ef6\uff0c\u76f4\u63a5\u8df3\u51fa\u5faa\u73af\n\t}\n\treturn ans;\n}\nint main() {\n\tcin >> l >> r >> lmt;\n\tfor (int i = 0; i <= 9; i ++)\n\t\tf[1][i] = 1;\n\tfor (int i = 2; i < N; i ++)\n\t\tfor (int j = 0; j <= 9; j ++)\n\t\t\tfor (int k = 0; k <= 9; k ++)\n\t\t\t\tif (abs(j - k) <= lmt) f[i][j] += f[i - 1][k]; // dp\u90e8\u5206\n\tcout << query(r + 1) - query(l) << '\\n';\n\treturn 0;\n}\n```\n",
        "postTime": 1651562084,
        "uid": 560516,
        "name": "\u55b5\u4ed4\u725b\u5976",
        "ccfLevel": 0,
        "title": "\u5c0fZ\u7684 k \u7d27\u51d1\u6570"
    },
    {
        "content": "### $P2188$ $ $\n[\u5c0f $Z$ \u7684 $k$ \u7d27\u51d1\u6570](https://www.luogu.com.cn/problem/P2188)\n\n\n[blog](https://www.luogu.com.cn/blog/75762/solution-p2188)\u98df\u7528\u6548\u679c\u66f4\u4f73\n\n\u3010\u9898\u610f\u3011\n\n~~\u5b57\u9762\u610f\u601d~~\n\n\u6837\u4f8b\u5c31\u662f$1...12$\u517112\u4e2a\u6570\n\n\u3010\u601d\u8def\u3011\n\n**\u6570\u4f4d$dp$**\n\n\u628a$0$~$r$\u4e0e$0$~$l$-$1$ \u7684\u7d27\u51d1\u6570\u6c42\u51fa\u6765\u540e\u76f8\u51cf\u5373\u4e3a\u7b54\u6848\uff0c\u5373\n\n$$ans = check(r)-check(l-1)$$\n\n\u8bbe\n\n$f[i][j][0/1]$ \u8868\u793a**\u7b2c$i$\u4f4d\u4e0a\u653e\u6570\u5b57$j$,\u524d$i$\u4f4d\u662f$(1)$\u5426$(0)$\u5168\u90e8\u4e0e\u6700\u5927\u503c $($\u5373$r$\u6216$l-1)$\u76f8\u540c\u7684\u72b6\u6001\u4e0b\u7684\u7d27\u51d1\u6570\u4e2a\u6570**\n\n$cnt$ \u4e3a\u6700\u5927\u503c\u7684\u4f4d\u6570\n\n$sum[i]$ \u4e3a\u6700\u5927\u503c\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u7684\u7b2c$i$\u4f4d\uff0c\n\n\u5982\u6700\u5927\u503c\u4e3a$233$, \u5219$sum[1]=2,$ $ $ $sum[2]=sum[3]=3$\n\n\u4e8e\u662f\u5c31\u6709:\n\n$0:$\n\n$$f[i][j][0]=\\sum_{k=max(j-L,0)}^{min(j+L,9)} f[i-1][k][0]$$\n\n\u5982\u679c$j$\u5c0f\u4e8e$num[i]($ \u7b49\u4e8e\u5c31\u662f\u8f6c\u79fb\u5230$f[i][j][1]$ \u4e86 $)$, \u5219\n\n$$f[i][j][0]+=\\sum_{k=max(j-L,0)}^{min(j+L,9)} f[i-1][k][1](j<num[i])$$\n\n$1:$\n\n$$f[i][num[i]][1]=\\sum_{k=max(num[i]-L,0)}^{min(num[i]+L,9)} f[i-1][k][1]$$\n\n**\u6ce8\u610f**\n\n#### \u5f53$j-L>0$\u65f6, $f[i][j][0]++$\n\n\u56e0\u4e3a\u524d\u5bfc\u96f6\u53ef\u80fd\u4f1a\u4f7f\u7d27\u51d1\u6570\u7684\u6700\u9ad8\u4f4d\u4e0e$0$\u76f8\u51cf\u540e$>L$\uff0c\u800c\u88ab\u5224\u4e3a\u975e\u6cd5\n\n\u5982\u6700\u5927\u503c\u4e3a980\uff0c$L=3$\n\n\u5f53\u4f60\u505a\u5230$8$\u65f6,$8-L=5$\u5373\u4e0b\u754c\u53ea\u80fd\u5230$5$\uff0c\u8fd9\u662f\u524d\u9762\u6709\u6570\u7684\u60c5\u51b5\uff0c\n\u800c\u5728\u524d\u9762\u5168$0($\u5373\u65e0\u6570$)$\u7684\u60c5\u51b5\u4e0b\uff0c$8$\u5f00\u5934\u663e\u7136\u662f\u7b26\u5408\u7684\uff0c\u6240\u4ee5\u8981\u52a0\u4e0a\u53bb\n\n\n(\u4e0a\u8ff0\u7684$i\\in[2,cnt])$\n\n$ $\n\n**\u9884\u5904\u7406**\n\n$$f[1][j][0] = 1 (j\\in[0,num[1]))$$\n\n$$f[1][num[1]][1]=1$$\n\n**\u7edf\u8ba1\u7b54\u6848**\n\n$$res = \\sum_{i=0}^9 f[cnt][i][0]+f[cnt][i][1]$$\n\n\u3010\u7406\u89e3\u3011\n\n\u5176\u5b9e\u53ef\u4ee5\u53d1\u73b0$f[i][j][1]$\u7684\u503c\u53ea\u80fd\u662f$0/1($\u5168\u90e8\u4e00\u6837\u4e0d\u5c31\u6700\u591a\u4e00\u79cd\u561b$..)$,\u800c\u5982\u679c\u6700\u5927\u503c\u4e0a\u7b2c$p$\u4f4d\u4e0e\u7b2c$p-1$\u4f4d\u76f8\u5dee$>L$\uff0c\u5219\n$$f[i][num[i]][1]=0(i\\in[p,n])$$\n\n\u3010\u4ee3\u7801\u3011\n```cpp\n#include <bits/stdc++.h>\n#define For(i,l,r) for (register int i=l; i<=r; i++)\nusing namespace std;\ntypedef unsigned long long LL;\ntypedef signed long long ll;\ntemplate <typename T>\ninline void read(T &x) {\n\tchar c = getchar(); int w = 1; x = 0;\n\twhile (!isdigit(c))\n\t\t(c == '-') && (w = -w), c = getchar();\n\twhile (isdigit(c))\n\t\tx = (x << 1) + (x << 3) + (c ^ '0'), c = getchar();\n\tx *= w;\n}\n\nll l, r, L, ncnt, f[20][20][2];\ninline ll check(ll x) {\n\tif (x < 10) return x+1;             //\u9632\u6b62x=-1\u62160\n\tll nx = x, cnt = 0, res = 0;\n\tLL w = 1;                           //\u8981\u5f00unsigned\n\twhile (nx) w *= 10, nx /= 10, ++cnt;//\u5206\u89e3\u6bcf\u4e00\u4f4d\n\tmemset(f, 0, sizeof(f));            //\u6e05\u96f6\n\tw /= 10;\n\tfor (register int i = 0; i <= x/w; ++i)\n\t\tf[1][i][(i == (x/w))] = 1;      //\u9884\u5904\u7406\n\tfor (register int i = 2; i <= cnt; ++i) {\n\t\tw /= 10; ll num = x / w % 10;   //num\u5373\u4e3a\u4e0a\u9762\u6240\u8bf4\u7684num[i]\n\t\tfor (register int j = 0; j < 10; ++j) {\n\t\t\tfor (register int k = max(j-L, 0ll); k <= min(j+L, 9ll); ++k) {\n\t\t\t\tf[i][j][0] += f[i-1][k][0];\n\t\t\t\tif (j < num) f[i][j][0] += f[i-1][k][1];\n\t\t\t\t\telse if (j == num) f[i][j][1] += f[i-1][k][1];\n\t\t\t}\n\t\t\tif (j-L > 0) f[i][j][0] ++; //\u524d\u5bfc\u96f6\u5f71\u54cd\n\t\t}\n\t}\n\tfor (register int i = 0; i < 10; ++i)\n\t\tres += f[cnt][i][0] + f[cnt][i][1]; //\u7edf\u8ba1\n\treturn res;\n}\nint main() {\n\tread(l); read(r); read(L);\n\t/*ll l = 0, r = 1e18, ans = -1, ncnt = check(n);\n\twhile (l <= r) {\n\t\tll mid = ((r-l+1)>>1) + l;\n\t\tif (check(mid)-ncnt >= k) ans = mid, r = mid-1;\n\t\t\telse l = mid+1;\n\t}*/\n\tcout << check(r)-check(l-1);\n\tgetchar();\n\treturn 0;\n}\n\n```\n\n\n\u3010\u62d3\u5c55\u3011\n\n\u6c42\u5927\u4e8e$n$\u7684\u7b2c$k$\u4e2a\u7d27\u51d1\u6570\n\n\u5728\u539f\u6765\u57fa\u7840\u4e0a\u52a0\u4e2a\u4e8c\u5206\u5373\u53ef$($\u7b54\u6848\u5177\u6709\u5355\u8c03\u6027$)$\n\n```cpp\nint main() {\n\tread(n); read(k); read(L);\n\tll l = 0, r = 1e18, ans = -1, ncnt = check(n);\n\twhile (l <= r) {\n\t\tll mid = ((r-l+1)>>1) + l;\n\t\tif (check(mid)-ncnt >= k) ans = mid, r = mid-1;\n\t\t\telse l = mid+1;\n\t}\n\tcout << ans;\n\tgetchar();\n\treturn 0;\n}\n```\n\n$check()$\u90e8\u5206\u4e0e\u4e0a\u76f8\u540c.\n\n\u7a0d\u5fae\u60f3\u4e00\u4e0b\uff0c\u633a\u663e\u7136\u7684\u3002\n\n\u3010\u603b\u7ed3\u3011\n\n\u633a\u597d\u7684\u4e00\u9053\u6570\u4f4d$dp$\uff0c\u5efa\u8bae\u597d\u597d\u7814\u7a76\u540e\u505a\u4e00\u4e0b\u3002\n\n\u6700\u597d\u628a\u62d3\u5c55\u4e5f\u5b9e\u73b0\u4e00\u4e0b\n\n\n\n\n\n\n\n",
        "postTime": 1576898740,
        "uid": 75762,
        "name": "zjh111111",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2188 \u3010\u5c0fZ\u7684 k \u7d27\u51d1\u6570\u3011"
    },
    {
        "content": "\u7b97\u6cd5\uff1a\u8bb0\u5fc6\u5316\u641c\u7d22+\u6570\u4f4ddp\n\n**\u4ee5\u4e0b\u5f15\u7528\u5185\u5bb9\u5f15\u7528\u81ea\u6211\u7684[\u53e6\u4e00\u7bc7\u9898\u89e3](https://www.luogu.org/blog/user38212/solution-cf1036c)\uff0c\u719f\u6089\u6570\u4f4ddp\u7684\u540c\u5b66\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7**\n\n> \u4e00\u822c\u5730\uff0c\u6570\u4f4ddp\u53ef\u4ee5\u7528\u6765\u89e3\u51b3\u4e0b\u9762\u7684\u95ee\u9898\uff1a \u7ed9\u5b9a\u4e00\u4e2a\u7ed3\u679c\u4e3abool\u7c7b\u578b\u7684\u51fd\u6570f(x)\uff0c\u6c42$[L,R]$\u5185\u6709\u591a\u5c11\u4e2a\u6570\u6ee1\u8db3$f(x)$\u662f\u771f\u3002\u5176\u4e2d\u4e00\u822c$L,R<=1e7$\u6216\u66f4\u5927\uff0c\u4e14f(x)\u4e0e\u6570\u4f4d\u76f8\u5173\u3002\n\n\u6ce8\u610f\u5230\uff0c\u5982\u679c\u4ece\u524d\u5230\u540e\u904d\u5386\u6bcf\u4e2a\u6570\u4f4d\u53ef\u80fd\u7684\u53d6\u503c\uff0c\u6bcf\u4f4d\u80fd\u53d6\u54ea\u4e9b\u503c\u53ea\u4e0e\u8fd9\u4e2a\u6570\u4f4d\u7684\u524d\u4e00\u4e2a\u6570\u4f4d\u53d6\u54ea\u4e2a\u503c\u76f8\u5173\u3002\n\n\u56e0\u6b64\uff0c\u672c\u9898\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u7528$dp[i][j]$\u8868\u793a\uff0c\u8ba1\u7b97\u5230\u7b2ci\u4f4d\uff0c\u4e0a\u4e00\u4f4d\u662fj\u7684\u60c5\u51b5\u4e0b\uff0c\u540e\u9762\u7684\u6bcf\u4e00\u4e2a\u6570\u4f4d\u6709$dp[i][j]$\u4e0d\u540c\u79cd\u60c5\u51b5\u3002\n\n> \u8fd9\u6837\u6211\u4eec\u5c31\u5f88\u5bb9\u6613\u5904\u7406[1,pow(10,t)][1,pow(10,t)]\u4e2d\u7684\u7b54\u6848\u3002\n\n> \u73b0\u5728\u5047\u8bbe\u6211\u4eec\u9700\u8981\u6c42[1,3812]\u7684\u7b54\u6848\u3002\u5f53\u6211\u4eec\u4ece\u7b2c\u4e00\u4f4d\u5f00\u59cbdfs\u65f6\uff0c\u4ece0\u904d\u5386\u52303\uff08\u6700\u9ad8\u4f4d\u6700\u5927\u4e3a3\uff09\uff0c\u5982\u679c\u7b2c\u4e00\u4f4d\u662f0\u62161\u62162\uff0c\u5219\u540e\u9762\u7684\u6570\u636e\u65e0\u9700\u8003\u8651\u9650\u5236\uff0c\u90fd\u53ef\u4ee5\u4ece0\u904d\u5386\u52309\u3002\u5982\u679c\u7b2c\u4e00\u4f4d\u662f3\uff0c\u5219\u7b2c\u4e8c\u4f4d\u6700\u5927\u662f8\u3002\u6211\u4eec\u4f7f\u7528\u6570\u7ec4\u4e0a\u754c\u53d8\u91cf\u4ee3\u8868\u8fd9\u4e2a\u9650\u5236\uff0c\u5982\u679c\u53d8\u91cf\u4e3a0\u4ee3\u8868\u8fd9\u4e00\u4f4d\u65e0\u9700\u8003\u8651\u9650\u5236\uff0c\u5426\u5219\u4ee3\u8868\u8fd9\u4e00\u4f4d\u9700\u8981\u8003\u8651\u9650\u5236\u3002\n\n\u6211\u5199\u7684\u662fdfs\u8bb0\u5fc6\u5316\u641c\u7d22+\u6570\u4f4ddp\uff0c\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\u3002\n\n```cpp\n\n#include <iostream>\n#include <cmath>\n#include <cstdio> \n#include <cstring>\nusing namespace std;\n\ntypedef long long ll;\n\nll dp[20][10]; //\u5982\u4e0a\u8ff0\nint tot,a[20]; //tot\u4ee3\u8868\u6570\u4f4d\u7684\u6570\u91cf\uff0ca\u91cc\u9762\u5b58\u5f53\u524d\u8981\u5904\u7406\u7684\u6570\u7684\u6bcf\u4e2a\u6570\u4f4d\u4e0a\u7684\u6570\nint k; \n\nll dfs(int pos/*\u5f53\u524d\u5904\u7406\u5230\u54ea\u4f4d\uff0c\u5728\u6211\u7684\u7a0b\u5e8f\u91cc\u4e2a\u4f4d\u662f\u7b2c0\u4f4d*/, int pre /*\u4e0a\u4e00\u4e2a\u6570\u4f4d\u4e0a\u7684\u503c*/, bool lead/*\u5728\u8fd9\u4e2a\u6570\u4f4d\u4e4b\u524d\uff0c\u662f\u5426\u6bcf\u4e00\u4f4d\u90fd\u662f0\uff08\u524d\u5bfc\u96f6\uff09*/, bool limit/*\u5982\u4e0a\u8ff0\u9650\u5236*/)\n{\n    if(pos==-1) return 1; //\u56e0\u4e3a\u4e2a\u4f4d\u662f\u7b2c\u96f6\u4f4d\uff0c\u82e5pos=-1\uff0c\u8bc1\u660e\u5df2\u7ecf\u904d\u5386\u4e86\u6240\u6709\u6570\u4f4d\n    if(dp[pos][pre]!=-1 && !lead && !limit) return dp[pos][pre]; //\u8bb0\u5fc6\u5316\u641c\u7d22\n    ll res=0; int up=limit?a[pos]:9;\n    for(int i=0;i<=up;i++)\n        if(lead || abs(i-pre)<=k) //\u5982\u679c\u5f53\u524d\u8fd9\u4e00\u4f4d\u662f\u7b2c\u4e00\u4f4d\uff08lead=true\uff09\uff0c\u6216\u5f53\u524d\u8fd9\u4f4d\u548c\u524d\u9762\u4e00\u4f4d\u7edd\u5bf9\u503c\u4e4b\u5dee<=k\uff0c\u8fd9\u4e00\u4f4d\u662f\u5408\u6cd5\u7684\n            res+=dfs(pos-1/*\u5904\u7406\u4e0b\u4e00\u4f4d* /,i/*\u4e0b\u4e00\u4f4d\u7684\u4e0a\u4e00\u4f4d\u5c31\u662f\u8fd9\u4e00\u4f4d*/,lead&&i==0/*\u5982\u679c\u4e4b\u524d\u6240\u6709\u4f4d\u90fd\u662f\u96f6\uff0c\u4e14\u8fd9\u4f4d\u4e5f\u662f\u96f6\uff0c\u90a3\u4e48lead\u7ee7\u7eed\u662ftrue*/,limit&&i==a[pos]/*\u7c7b\u4f3clead*/); //\u7d2f\u52a0\u7b54\u6848\n    if(!lead && !limit) dp[pos][pre]=res; //\u8bb0\u5fc6\u5316\u641c\u7d22\n    return res; \n}\n\nll solve(ll x)\n{\n    for(tot=0;x>0;a[tot++]=x%10,x/=10); //for\u5faa\u73af\u5206\u79bb\u51fax\u7684\u6bcf\u4e2a\u6570\u4f4d\uff0c\u5199\u6210while\u5faa\u73af\u4e5f\u53ef\u4ee5\n    return dfs(tot-1,0,true,true);\n}\n\nint main()\n{\n    memset(dp,-1,sizeof(dp)); //\u52a1\u5fc5\u4e0d\u8981\u5fd8\u4e86\u5199\u521d\u59cb\u5316QwQ\n    ll l,r;\n    cin>>l>>r>>k;\n    cout<<solve(r)-solve(l-1)<<endl; \n    return 0;\n}\n\n```",
        "postTime": 1538036069,
        "uid": 38212,
        "name": "mydiplomacy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2188 \u3010\u5c0fZ\u7684 k \u7d27\u51d1\u6570\u3011"
    },
    {
        "content": "\u5e94\u8be5\u662f\u6570\u4f4dDP\u7684\uff0c\u6211\u6309\u7167\u81ea\u5df1\u601d\u8def\u505a\u4e86\uff08\u6ca1\u5b66\u8fc7\u6570\u4f4dDP\uff09...\n\n\u76f4\u63a5\u6c42l~r\u6bd4\u8f83\u9ebb\u70e6\uff0c\u4e8e\u662f\u53ef\u4ee5\u6c42\u51fa0~r\u7684\u518d\u51cf0~l-1\uff0c\u75280\u800c\u4e0d\u75281\u53ef\u4ee5\u65b9\u4fbf\u5904\u7406\u3002\u3002\n\n\u8bbef[i,j,1]\u8868\u793a\u524di\u4f4d\uff0c\u672b\u4f4d\u662fj\uff0c\u5e76\u4e14\u8be5\u524di\u4f4d\u5df2\u7ecf\u5c0f\u4e8er\u7684\u524di\u4f4d\u7684\u603b\u60c5\u51b5\u6570,f[i,j,2]\u8868\u793a\u8be5\u524di\u4f4d\u7b49\u4e8er\u7684\u524di\u4f4d\u7684\u603b\u60c5\u51b5\u6570\u3002\n\ni\u679a\u4e3e\u7b2c\u51e0\u4f4d\uff0c\u4ece\u9ad8\u4f4d\u5230\u4e2a\u4f4d\uff0c\u6570\u5b57\u521a\u597d\u76f8\u53cd\uff0c\u4e0d\u662fdownto\uff0cj\u679a\u4e3e\u5f53\u524d\u7684\u672b\u4f4d\uff0ct\u679a\u4e3e\u524d\u4e00\u4f4d\u7684\u672b\u4f4d\uff0c\u8303\u56f4\u662fj-k~j+k\u4e14\u5728[0..9]\u4e2d\u3002\n\n\u52063\u79cd\u60c5\u51b5\n\n\u82e5\u5f53\u524d\u4f4dj\u5c0f\u4e8er\u4e2d\u7684\u5bf9\u5e94\u4f4d\u5219\u53ea\u53ef\u80fd\u7528f[i,j,1]\uff0c\u524d\u4e00\u4f4d\u53ef\u4ee5\u662f\u4efb\u610f\u3002\n\n\u82e5\u7b49\u4e8e\uff0c1\uff0c2\u7686\u53ef\uff0c\u53ef\u4ee5\u53d1\u73b01\u624d\u80fd\u52301\uff0c2\u624d\u80fd\u52302\uff0c\n\n\u82e5\u5927\u4e8e\uff0c\u5fc5\u5b9a\u66f4\u9ad8\u4f4d\u5df2\u7ecf\u5c0f\u4e8e\u4e86\uff0c\u5219\u4e5f\u53ea\u67091\u79cd\u60c5\u51b5\u3002\n\nf[len]\u4e4b\u548c\u5373\u4e3a\u7b54\u6848(\u5305\u62ec0).\n\n\u540c\u7406\u518d\u505a\u4e00\u904d0~l-1\uff0c\u51cf\u53bb\uff0c\u4e0d\u8981\u5fd8\u8bb0\u6570\u7ec4\u6e05\u7a7a\u3002\n\n```cpp\nuses math;\nvar\n  i,j,t,k,len:longint;\n  sum,l,r,tt:int64;\n  f:array[-1..22,-1..22,1..2] of int64;\nfunction q(x:int64;i:longint):longint;//\u627e\u51fa\u6570x\u4e2d\uff0c\u4ece\u9ad8\u5230\u4f4e\u7b2ci\u4f4d\u7684\u6570\nbegin\n  for i:=1 to len-i do x:=x div 10;\n  exit(x mod 10);\nend;\nbegin\n  readln(l,r,k);\n  tt:=r;\n  while tt>0 do begin tt:=tt div 10; inc(len); end;//len\u8bb0\u5f55\u957f\u5ea6\n  for i:=0 to q(r,1)-1 do f[1,i,1]:=1;\n  f[1,q(r,1),2]:=1;\n  for i:=2 to len do\n    for j:=0 to 9 do\n      begin\n        if j<q(r,i) then//\u60c5\u51b51\n          for t:=max(j-k,0) to min(j+k,9) do\n            begin\n              f[i,j,1]:=f[i,j,1]+f[i-1,t,1]+f[i-1,t,2];\n            end else\n        if j=q(r,i) then//2\n          for t:=max(j-k,0) to min(j+k,9) do\n            begin\n              f[i,j,1]:=f[i,j,1]+f[i-1,t,1];\n              f[i,j,2]:=f[i,j,2]+f[i-1,t,2];\n            end else//3\n          for t:=max(j-k,0) to min(j+k,9) do\n            begin\n              f[i,j,1]:=f[i,j,1]+f[i-1,t,1];\n            end;\n        if j>k then inc(f[i,j,1]);\n      end;\n  //for i:=1 to len do for j:=0 to 9 do writeln(f[i,j,1],' ',f[i,j,2]);\n  for i:=0 to 9 do\n    sum:=sum+f[len,i,1]+f[len,i,2];\n  dec(l);//\u540c\u7406\uff0cl\u9700-1\n  fillchar(f,sizeof(f),0);\n  tt:=l;\n  len:=0;\n  while tt>0 do begin tt:=tt div 10; inc(len); end;\n  for i:=0 to q(l,1)-1 do f[1,i,1]:=1;\n  f[1,q(l,1),2]:=1;\n  for i:=2 to len do\n    for j:=0 to 9 do\n      begin\n        if j<q(l,i) then\n          for t:=max(j-k,0) to min(j+k,9) do\n            begin\n              f[i,j,1]:=f[i,j,1]+f[i-1,t,1]+f[i-1,t,2];\n            end else\n        if j=q(l,i) then\n          for t:=max(j-k,0) to min(j+k,9) do\n            begin\n              f[i,j,1]:=f[i,j,1]+f[i-1,t,1];\n              f[i,j,2]:=f[i,j,2]+f[i-1,t,2];\n            end else\n          for t:=max(j-k,0) to min(j+k,9) do\n            begin\n              f[i,j,1]:=f[i,j,1]+f[i-1,t,1];\n            end;\n        if j>k then inc(f[i,j,1]);\n      end;\n  for i:=0 to 9 do\n    sum:=sum-f[len,i,1]-f[len,i,2];\n  if l=0 then dec(sum);\n  write(sum);\nend.\n```",
        "postTime": 1482589629,
        "uid": 20505,
        "name": "tututu",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2188 \u3010\u5c0fZ\u7684 k \u7d27\u51d1\u6570\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2188)\n## \u601d\u8def\n\u6570\u4f4d $\\verb!DP!$ \u677f\u5b50\u3002\n\n\u63a5\u4e0b\u6765\u624b\u628a\u624b\u6559\u5404\u4f4d\u8bfb\u8005\u5199\u6570\u4f4d $\\verb!DP!$\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u901a\u5e38\u628a\u6570\u4f4d $\\verb!DP!$ \u5199\u6210 $\\verb!DFS!$ \u7684\u6837\u5b50\uff0c\u8fd9\u6837\u6bd4\u8f83\u6613\u4e8e\u7406\u89e3\uff0c\u5728\u8fd9\u4e2a $\\verb!DFS!$ \u4e2d\u6709 $5$ \u4e2a\u53c2\u6570\uff1a$pos,tag,la,k,zero$\uff0c\u5206\u522b\u8868\u793a\u5f53\u524d\u679a\u4e3e\u5230\u7b2c\u51e0\u4f4d\uff0c\u5f53\u524d\u662f\u5426\u8d34\u7740\u4e0a\u754c\uff0c\u4e0a\u4e00\u4e2a\u586b\u7684\u6570\u662f\u4ec0\u4e48\uff0c\u5f53\u524d\u7684 $k$ \u4ee5\u53ca\u662f\u5426\u4e3a\u524d\u5bfc\u96f6\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u7b2c\u4e00\u90e8\u5206\u4ee3\u7801\uff1a\n\n```cpp\nif (pos<0) return 1;//\u5982\u679c\u679a\u4e3e\u5b8c\u4e86\uff0c\u8bf4\u660e\u5f53\u524d\u6709\u4e00\u4e2a\u6570\u7b26\u5408\u6761\u4ef6\uff0creturn 1\u3002\nif (!tag && !zero && f[pos][la]) return f[pos][la];//\u5982\u679c\u5f53\u524d\u6ca1\u6709\u9650\u5236\u6761\u4ef6\u800c\u4e14\u5f53\u524d\u72b6\u6001\u5df2\u7ecf\u641c\u8fc7\u4e86\uff0c\u90a3\u4e48\u76f4\u63a5 return \u5373\u53ef\u3002\n```\n\n\u7136\u540e\uff0c\u6211\u4eec\u5c31\u8981\u5904\u7406\u4e0a\u754c\u7684\u95ee\u9898\u4e86\uff0c\u7b2c\u4e8c\u90e8\u5206\u4ee3\u7801\uff1a\n\n```cpp\nint end=tag?p[pos]:9;\n```\n\n\u5982\u679c\u6211\u4eec\u5f53\u524d\u8d34\u7740\u4e0a\u754c\uff0c\u6211\u4eec\u6700\u591a\u53ea\u80fd\u586b\u5f53\u524d\u8fd9\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u6570\uff0c\u4e0d\u7136\u53ef\u4ee5\u586b\u5230 $9$\u3002\n\n\u7136\u540e\uff0c\u5c31\u76f4\u63a5\u679a\u4e3e\uff1a\n\n```cpp\nfor (int i=0;i<=end;++i)\nif (zero || abs(la-i)<=k) res+=dfs(pos-1,tag&(i==end),i,k,zero&(i==0));//\u5982\u679c\u5f53\u524d\u662f\u524d\u5bfc\u96f6\uff0c\u8bf4\u660e\u6ca1\u6709\u6570\u586b\u8fc7\uff0c\u81ea\u7136\u662f\u7b26\u5408\u6761\u4ef6\u7684\uff0c\u800c\u5982\u679c\u5f53\u524d\u7684\u6570\u672c\u6765\u7684\u5dee\u5c31\u5c0f\u4e8e\u7b49\u4e8e k\uff0c\u81ea\u7136\u4e5f\u7b26\u5408\u6761\u4ef6\u3002\n```\n\u63a5\u4e0b\u6765\uff0c\u518d\u52a0\u4e00\u4e2a\u8bb0\u5fc6\u5316\u64cd\u4f5c\uff1a\n\n```cpp\nif (!tag && !zero) f[pos][la]=res;\n```\n\n\u8fd9\u6837\uff0c\u4e00\u9053\u6570\u4f4d $\\verb!DP!$ \u6a21\u677f\u9898\u5c31\u505a\u5b8c\u4e86\u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nvector<int>p;int f[2010][2010];\ninline int dfs(int pos,int tag,int la,int k,int zero){\n\tif (pos<0) return 1;\n\tif (!tag && !zero && f[pos][la]) return f[pos][la];\n    int end=tag?p[pos]:9;int res=0;\n    for (int i=0;i<=end;++i)\n        if (zero || abs(la-i)<=k) res+=dfs(pos-1,tag&(i==end),i,k,zero&(i==0));\n\tif (!tag && !zero) f[pos][la]=res;\n\treturn res;\n}\ninline int solve(int x,int k){\n\tmemset(f,0,sizeof(f));\n\tp.clear();\n\twhile (x) p.push_back(x%10),x/=10;\n\treturn dfs(p.size()-1,1,0,k,1);\n}\nsigned main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0),cout.tie(0);\n\tint l,r,k;cin>>l>>r>>k;\n\tcout<<solve(r,k)-solve(l-1,k)<<'\\n';\n\treturn 0;\n}\n```\n",
        "postTime": 1663661580,
        "uid": 253608,
        "name": "Tx_Lcy",
        "ccfLevel": 7,
        "title": "P2188 \u5c0fZ\u7684 k \u7d27\u51d1\u6570"
    }
]
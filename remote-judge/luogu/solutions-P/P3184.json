[
    {
        "content": "#\u6211\u5f88\u53ef\u601cp\u515a\uff0c\u4ed6\u4eec\u7684\u51fd\u6570\u5e93\u6ca1\u6709\u6211\u4eeccpp\u591a\uff0csort\u90fd\u6ca1\u6709\u3002\u8fd9\u9053\u9898\uff0ccpp\u515a\u5f88\u597d\u505a\uff0c\u56e0\u4e3aalgorithm\u5e93\u91cc\u6709\u4e24\u4e2a\u53ebupper\\_bound\u548clower\\_bound\u7684\u51fd\u6570\uff0c\u4ed6\u4eec\u7684\u4f5c\u7528\u5c31\u662f\u4e8c\u5206\u627e\u6bd4\u67d0\u4e2a\u6570\u5c0f\u5e76\u4e0e\u5b83\u6700\u63a5\u8fd1\u7684\u90a3\u4e2a\u6570\u7684\u4e0b\u6807\u548c\u4e8c\u5206\u627e\u6bd4\u67d0\u4e2a\u6570\u5927\u5e76\u4e0e\u5b83\u6700\u63a5\u8fd1\u7684\u90a3\u4e2a\u6570\u7684\u4e0b\u6807\u3002\u77e5\u9053\u8fd9\u4e24\u4e2a\u51fd\u6570\u540e\uff0c\u7279\u522b\u7b80\u5355\u3002\n\n\n##\u4ee3\u7801\u5982\u4e0b\uff1a\n\n\n\n\n```cpp\n#include <ctime>\n#include <cmath>\n#include <cstdio>\n#include <string>\n#include <cstring>\n#include <cstdlib>\n#include <iostream>\n#include <algorithm>//\u5934\u6587\u4ef6\u51c6\u5907\uff0calgorithm\u5fc5\u987b\u52a0\uff0c\u8981\u4e0d\u7136\u7f16\u8bd1\u4e0d\u8fc7\nusing namespace std;\nint n,m,a[100005];\nint main(){\n    scanf (\"%d %d\",&n,&m);//\u8bfb\u5165\n    for (int i=1;i<=n;i++){\n        scanf (\"%d\",&a[i]);\n    }\n    sort (a+1,a+1+n);//\u6ce8\u610f\uff1a\u4e8c\u5206\u67e5\u627e\u8981\u6392\u5e8f\uff0c\u8981\u4e0d\u7136\u5c31\u662f\u5728\u4e71\u627e\n    for (int i=1;i<=m;i++){\n        int x,y;\n        scanf (\"%d %d\",&x,&y);//\u8bfb\u5165\u4e24\u4e2a\u6570\n        printf(\"%d\\n\",upper_bound(a+1,a+n+1,y)-lower_bound(a+1,a+n+1,x));//\u6ce8\u610f\uff1ay\u662f\u540e\u9762\u4e00\u4e2a\u6570\uff0c\u6240\u4ee5\u662f\u5148\u67e5\u540e\u9762\u4e00\u4e2a\u6570\uff0c\u518d\u76f8\u51cf\n    }\n    while (1);//\u53cd\u6284\u88ad\n    return 0;\n}\n\n```",
        "postTime": 1508053540,
        "uid": 28182,
        "name": "Dr_\u6b87",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    },
    {
        "content": "\u53d1\u73b0\u597d\u50cf\u6ca1\u4eba\u7528\u79bb\u7ebf\u7b97\u6cd5\u7684\uff0c\u4e8e\u662f\u6765\u53d1\u4e00\u6ce2\u9898\u89e3\n\n\u8be5\u9898\u5f3a\u5316\u7248\u672c\uff08P2163 [SHOI2007]\u56ed\u4e01\u7684\u70e6\u607c\uff09//\u540c\u6837\u7684\u65b9\u6cd5\n\n**\u5927\u4f53\u601d\u8def\uff1a\u79bb\u6563\u5316+\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u524d\u7f00\u548c**\n\n\u5bf9\u5750\u6807\u79bb\u6563\u5316\u5e76\u6392\u5e8f\u540e\uff0c\u4fbf\u76f4\u63a5\u8fdb\u884c\u524d\u7f00\u548c\u64cd\u4f5c\u3002\uff08\u56e0\u4e3a\u540e\u9762\u7684\u70b9\u7684x\u5750\u6807\u5fc5\u5b9a\u5927\u4e8e\u7b49\u4e8e\u524d\u9762\u7684\u70b9\u7684x\u5750\u6807\uff09\n\n\u5bf9\u4e8e\u4e4b\u540e\u6bcf\u4e00\u4e2a\u6309x\u5750\u6807\u8bfb\u5165\u7684\u70b9\u53ef\u8fdb\u884c\u52a0\u5165\u8349\u579b\u70b9**\u6216**\u67e5\u8be2\u6bd4\u8be5\u70b9x\u5750\u6807\u5c0f\u7684\u70b9\u7684\u6570\u91cf\u4e24\u79cd\u64cd\u4f5c\u3002\n\n\u9274\u4e8e\u7ebf\u6bb5\u6811\u7684\u4ee3\u7801\u91cf\uff0c\u4e3a\u4f55\u4e0d\u7528\u6811\u72b6\u6570\u7ec4\u6765\u7ef4\u62a4\u524d\u7f00\u548c\u5462\uff1f\n\n\u9644\u4e0a\u4ee3\u7801\uff08\u6709\u70b9\u4e11\uff0c\u8bf7\u591a\u5305\u6db5\uff09\n\n\n------------\n\n```cpp\n/**\n*\u3000\u3000\u250f\u2513\u3000\u3000\u3000\u250f\u2513+ +\n*\u3000\u250f\u251b\u253b\u2501\u2501\u2501\u251b\u253b\u2513 + +\n*\u3000\u2503\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u2503\n*\u3000\u2503\u3000\u3000\u3000\u2501\u3000\u3000\u3000\u2503 ++ + + +\n*  \u2588\u2588\u2588\u2588\u2501\u2588\u2588\u2588\u2588+\n*  \u25e5\u2588\u2588\u25e4\u3000\u25e5\u2588\u2588\u25e4 +\n*\u3000\u2503\u3000\u3000\u3000\u253b\u3000\u3000\u3000\u2503\n*\u3000\u2503\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u2503 + +\n*\u3000\u2517\u2501\u2513\u3000\u3000\u3000\u250f\u2501\u251b\n*\u3000\u3000\u3000\u2503\u3000\u3000\u3000\u2503 + + + +Code is far away from \u3000\n*\u3000\u3000\u3000\u2503\u3000\u3000\u3000\u2503 + bug with the animal protecting\n*\u3000\u3000\u3000\u2503\u3000 \u3000 \u2517\u2501\u2501\u2501\u2513 \u795e\u517d\u4fdd\u4f51,\u4ee3\u7801\u65e0bug\u3000\n*\u3000\u3000\u3000\u2503 \u3000\u3000\u3000\u3000\u3000\u3000 \u2523\u2513\n*\u3000\u3000  \u2503 \u3000\u3000\u3000\u3000\u3000 \u3000\u250f\u251b\n*\u3000    \u2517\u2513\u2513\u250f\u2501\u2533\u2513\u250f\u251b + + + +\n*\u3000\u3000\u3000\u3000\u2503\u252b\u252b\u3000\u2503\u252b\u252b\n*\u3000\u3000\u3000\u3000\u2517\u253b\u251b\u3000\u2517\u253b\u251b+ + + +\n*/\n#include<bits/stdc++.h>//\u4e07\u80fd\u5934\u6587\u4ef6\nusing namespace std;\ninline int read()\n{\n    int f=1,num=0;\n    char ch=getchar();\n    while(0==isdigit(ch)){if(ch=='-')f=-1;ch=getchar();}\n    while(0!=isdigit(ch)) num=(num<<1)+(num<<3)+ch-'0',ch=getchar();\n    return num*f;\n}//\u6807\u914d\u5feb\u8bfb\nconst int N=350000;\nint l[N],x[100010],top=0;\nint tot=0;int a[N],b[N];\nint n,m;\nint ans[100050][3];//\u50a8\u5b58\u7b54\u6848\nint t[N];//\u6811\u72b6\u6570\u7ec4\n\nstruct node{\n\tint f,id,x;\n}q[N];\n\ninline int find(int x){\n\tint L=1,R=top;\n\twhile(L<=R){\n\t\tint mid=(L+R)>>1;\n\t\tif(l[mid]>=x){R=mid-1;}\n\t\telse L=mid+1;\n\t}\n\treturn L;\n}//\u7528\u4e8c\u5206\u5bfb\u627e\u79bb\u6563\u5316\u540e\u7684\u70b9\n\nbool cmp(node a,node b){\n\tif(a.x==b.x)return a.f<b.f;\n\treturn a.x<b.x;\n}//\u5148\u8003\u8651\u6240\u5728\u4f4d\u7f6e\uff0c\u518d\u4f18\u5148\u5904\u7406\u6709\u8349\u579b\u7684\u70b9\n\ninline int lowbit(int x){return x&-x;}//\u6811\u72b6\u6570\u7ec4\n\ninline void add(int x)//\u6811\u72b6\u6570\u7ec4\u52a0\u5165\u70b9\n{\n\tfor(register int i=x;i<=tot;i+=lowbit(i)){\n\t\tt[i]+=1;//\u4f9d\u6b21\u5411\u4e0a\u4f20\u9012\u503c\n\t}\n}\ninline int query(int x)\u67e5\u8be2\u7f16\u53f7\u6bd4x\u5c0f\u7684\u70b9\u603b\u6570\n{\n\tint sum=0;\n\tfor(register int i=x;i;i-=lowbit(i)){\n\t\tsum+=t[i];//\u4ece\u7f16\u53f7x\u5411\u4e0b\u67e5\u8be2\n\t}\n\treturn sum;\n}\nint main(){\n\tn=read();m=read();\n\tfor(register int i=1;i<=n;i++){\n\t\tx[i]=read();//\u8bfb\u5165\u8349\u579b\u5750\u6807\n\t\tl[++top]=x[i];\u538b\u5165\u7b2c\u4e00\u4e2a\u961f\u5217\n\t}\n\tfor(register int i=1;i<=m;i++){\n\t\ta[i]=read();//\u8bfb\u5165\u8be2\u95ee\u533a\u95f4\u5de6\u7aef\u70b9\n        l[++top]=a[i];\n\t\tb[i]=read();//\u53f3\u7aef\u70b9\n        l[++top]=b[i];\n\t}\n\tsort(l+1,l+1+top);//\u6ce8\u610f\u5148\u6392\u5e8f\n\tfor(register int i=1;i<=n;i++){\n\t\tx[i]=find(x[i]);//\u79bb\u6563\u5316\n\t\tq[++tot].x=x[i];//\u538b\u5165\u7b2c\u4e8c\u4e2a\u961f\u5217\n\t}\n\tfor(register int i=1;i<=m;i++){\n\t\ta[i]=find(a[i]);b[i]=find(b[i]);//\u79bb\u6563\u5316\n\t\tq[++tot].x=a[i]-1;q[tot].id=i;q[tot].f=1;\n\t\tq[++tot].x=b[i];q[tot].id=i;q[tot].f=2;\n        //\u538b\u5165\u8be2\u95ee\u533a\u95f4\u5de6\u7aef\u70b9\u4e0e\u53f3\u7aef\u70b9\u3001\u8be2\u95ee\u533a\u95f4\u7f16\u53f7\n\t}\n\tsort(q+1,q+1+tot,cmp);//\u518d\u6392\u4e00\u6b21\u5e8f\n\tfor(register int i=1;i<=tot;i++){\n\t\tif(!q[i].f)add(i);//\u5982\u679c\u662f\u8349\u579b\uff0c\u52a0\u70b9\n\t\telse{\n\t\t\tans[q[i].id][q[i].f]=query(i);//\u8ba1\u7b97\u524d\u7f00\u548c\n\t\t}\n\t}\n\tfor(register int i=1;i<=m;i++){\n\t\tcout<<ans[i][2]-ans[i][1]<<endl;//\u8f93\u51fa\u7b54\u6848\n\t}\n\treturn 0;\n}\n```\n\n\u5f00\u5f00\u5fc3\u5fc3\u5199\u5b8c\u7b2c\u4e00\u7bc7\u9898\u89e3\u3002",
        "postTime": 1541144887,
        "uid": 110031,
        "name": "z1431346079",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    },
    {
        "content": "> ### $p3184$\u9898\u89e3\n>\n> # \u6574\u4f53\u601d\u8def\uff1a\u6392\u5e8f\u3001\u4e8c\u5206\u67e5\u627e\n> \n> ### \u6211\u53d1\u4e00\u4e2a\u624b\u5199\u7684\u975e\u9012\u5f52\u4e8c\u5206\u7684\u9898\u89e3\n>\n> ### ```\u4e8c\u5206\u601d\u8def```\n>\n> \u4e8c\u5206\u4e4b\u524d\u5148\u7279\u5224\u4e00\u4e0b\n>\n> \u5982\u679c\u5de6\u53f3\u8fb9\u754c\u90fd\u5c0f\u4e8e\u6700\u5c0f\u4f4d\u7f6e(A<a[1]&&B<a[1])\u6216\u5de6\u53f3\u8fb9\u754c\u90fd\u5927\u4e8e\u6700\u5927\u4f4d\u7f6e(A>a[n]&&B>a[n])\n>\n> \u90a3\u4e48\u8f93\u51fa0\n>\n>\u5982\u679c\u5f53\u524d\u8981\u67e5\u627e\u7684\u5c0f\u4e8e$a[1]$\u6700\u5c0f\u4f4d\u7f6e\u8fd4\u56de**1**,\u5982\u679c\u5f53\u524d\u8981\u67e5\u627e\u7684\u5927\u4e8e$a[n]$\u8fd4\u56de**n**\n>\n\n> \u4ee4$kl = 1, kr = a[n]$\u5373\u5de6\u53f3\u8fb9\u754c\n>\n>```\u6ce8\u610fkr = a[n]```**\u53f3\u8fb9\u754c**\u521d\u59cb\u503c\u4e0d\u80fd\u662f**INF**\u5426\u5219\u6709\u53ef\u80fd**\u70b8int**\u5e76\u4e14\u4f1a\u6d6a\u8d39\u5f88\u591a\u7684\u65f6\u95f4\n>\n> ### \u5f53 $kl$ ```<``` $kr$\u65f6\n>\n> \u4ee4 $mid = (kl + kr + 1) >> 1$(\u7b49\u4ef7\u4e8e$mid = (kl + kr + 1) / 2$)\n>\n> ### $0)$\u5982\u679ca[mid] == \u67e5\u627e\u503c $return$  $mid;$\n>\n> ### $1)$\u5982\u679c$a[mid - 1] <$ \u67e5\u627e\u503c $< a[mid]$ \n> \n> #### $i.$\u5982\u679c\u67e5\u627e\u7684\u662f\u5de6\u533a\u95f4(A) \n>\n> $return$  $mid;$\n>\n> #### $ii.$\u5982\u679c\u67e5\u627e\u7684\u662f\u53f3\u533a\u95f4(B)\n>\n> $return$ $mid-1;$\n>\n> ### $2)$\u5982\u679c$a[mid] <$ \u67e5\u627e\u503c $< a[mid + 1]$\n> \n> #### $i.$\u5982\u679c\u67e5\u627e\u7684\u662f\u5de6\u533a\u95f4(A) \n>\n> $return$  $mid + 1;$\n>\n> #### $ii.$\u5982\u679c\u67e5\u627e\u7684\u662f\u53f3\u533a\u95f4(B)\n>\n> $return$ $mid;$\n>\n> ### $3)$\u5982\u679c\u67e5\u627e\u503c\u4e0d\u5728\u533a\u95f4$[a[mid-1],a[mid+1]]$\n> #### $i.$ \u5982\u679c$a[mid] >$ \u67e5\u627e\u503c \n>\n> \u4ee4$kr = mid$\u5728\u5de6\u534a\u90e8\u5206\u67e5\u627e\n>\n> #### $ii.$ else\n>\n> \u4ee4$kl = mid - 1$ \u5728\u53f3\u534a\u90e8\u5206\u67e5\u627e\n>\n> ### $4)$\u67e5\u627e\u5b8c\u6bd5\n>\n> **\u8f93\u51fa\u53f3\u8fb9\u754c\u4f4d\u7f6e - \u5de6\u8fb9\u754c\u4f4d\u7f6e + 1**\n>\n----\n```\u4ee3\u7801\u5b9e\u73b0```\n\n ```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<cstring>\n#include<queue>\nusing namespace std;\n\nconst int N = 100000 + 10;\n//const long long INF = 1e10;\n\nint a[N], n, m;\n//a\u6570\u7ec4\u8bb0\u5f55\u4f4d\u7f6e n\u4e3a\u6709n\u4e2a\u70b9 m\u8868\u793am\u6b21\u8be2\u95ee\n\nint left_mid_find(long long x) {//\u4e8c\u5206\u67e5\u627e\u5de6\u8fb9\u754c\n\tlong long kl = 1, kr = n;\n\tif(x >= a[n]) return n;\n\tif(x <= a[1]) return 1;\n    //\u7279\u5224\n\twhile(kl < kr) {\n\t\tint mid = (kl + kr + 1) >> 1;\n\t\tif(a[mid] == x) return mid;//\u5f53\u524d\u4f4d\u7f6e\u7b49\u4e8e\u67e5\u627e\u503c\n\t\tif(a[mid - 1] < x && a[mid] > x) return mid;\n        //\u67e5\u627e\u503c\u5728\u5f53\u524d\u4f4d\u7f6e\u4e0e\u5f53\u524d\u4f4d\u7f6e-1\u4e4b\u95f4\n\t\tif(a[mid + 1] > x && a[mid] < x) return mid + 1;\n        //\u67e5\u627e\u503c\u5728\u5f53\u524d\u4f4d\u7f6e\u4e0e\u5f53\u524d\u4f4d\u7f6e+1\u4e4b\u95f4\n\t\tif(a[mid] > x) kr = mid;\n\t\telse kl = mid - 1;\n\t}\n\treturn kl;\n}\n\nint right_mid_find(long long x) {//\u4e8c\u5206\u67e5\u627e\u53f3\u8fb9\u754c\n\tlong long kl = 1, kr = n;\n\tif(x >= a[n]) return n;\n\tif(x <= a[1]) return 1;\n    //\u7279\u5224\n\twhile(kl < kr) {\n\t\tint mid = (kl + kr + 1) >> 1;\n\t\tif(a[mid] == x) return mid;\n        //\u540c\u4e0a\n\t\tif(a[mid - 1] < x && a[mid] > x) return mid - 1;//\u6ce8\u610freturn\u503c\u4e0d\u540c\n\t\tif(a[mid + 1] > x && a[mid] < x) return mid;\n\t\tif(a[mid] > x) kr = mid;\n\t\telse kl = mid - 1;\n\t}\n\treturn kl;\n}\n\n\nint main() {\n\tint k, j, i;\n\tcin >> n >> m;\n\tfor(i = 1; i <= n; i++) cin >> a[i];//\u8bfb\u5165\n\tsort(a + 1, a + n + 1);\n\tfor(i = 1; i <= m; i++) {\n\t\tcin >> j >> k;\n\t\tif((j < a[1] && k < a[1])||(j > a[n] && k > a[n])) {\n        \t//\u7279\u5224\n\t\t\tcout << 0 << endl;\n\t\t\tcontinue;\n\t\t}\n\t\tint l = left_mid_find(j);//\u5de6\u8fb9\u754c\u4f4d\u7f6e\n\t\tint r = right_mid_find(k);//\u53f3\u8fb9\u754c\u4f4d\u7f6e\n\t\tcout << r - l + 1<< endl;//\u7b49\u4ef7\u4e0er - (l - 1)\n\t}\n\treturn 0;\n}\n```\n# $\\color{cyan}\\text{\u6700\u540e\u795dNOIP2018 rp++}$",
        "postTime": 1541208043,
        "uid": 56583,
        "name": "a2920353120",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    },
    {
        "content": "//\u6392\u5e8f\u52a0\u4e8c\u5206 \u4e8c\u5206\uff1a\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e\u548c\u6700\u540e\u4e00\u4e2a\u5c0f\u4e8e\u7b49\u4e8e\n\n\u7b2c\u4e00\u4e2a\n\n```cpp\n  procedure boe(l,r,x:longint);\nbegin\n  if l>=r then\n  begin\n    x2:=r;\n    exit;\n  end;\n  mid:=(l+r) div 2;\n  if a[mid]>=x then\n    boe(l,mid,x) else\n  boe(mid+1,r,x);\nend;\n```\n\u6700\u540e\u4e00\u4e2a\n```cpp\n  procedure boe(l,r,x:longint);\nbegin\n  if l>=r then\n  begin\n    x2:=r;\n    exit;\n  end;\n  mid:=(l+r) div 2;\n  if a[mid]>=x then\n    boe(l,mid,x) else\n  boe(mid+1,r,x);\nend;\n```\nnlogn\u8d85\u65f6\u8d85\u4e0d\u4e86\uff08\u55bd\u55bd\u55bd\uff09\n\u5b8c\u6574\uff1a\n\n\n```cpp\nvar\n  a:array[1..1000000] of longint;\n  n,m,i,j,x,y,x1,x2,mid,c,d:longint;\nprocedure sort(l,r: longint);\n      var\n         i,j,x,y: longint;\n      begin\n         i:=l;\n         j:=r;\n         x:=a[(l+r) div 2];\n         repeat\n           while a[i]<x do\n            inc(i);\n           while x<a[j] do\n            dec(j);\n           if not(i>j) then\n             begin\n                y:=a[i];\n                a[i]:=a[j];\n                a[j]:=y;\n                inc(i);\n                j:=j-1;\n             end;\n         until i>j;\n         if l<j then\n           sort(l,j);\n         if i<r then\n           sort(i,r);\nend;\nprocedure less(l,r,x:longint);\nbegin\n  if l>=r then\n  begin\n    x1:=r;\n    exit;\n  end;\n  mid:=(l+r+1) div 2;\n  if a[mid]<=x then\n    less(mid,r,x) else\n  less(l,mid-1,x);\nend;\nprocedure boe(l,r,x:longint);\nbegin\n  if l>=r then\n  begin\n    x2:=r;\n    exit;\n  end;\n  mid:=(l+r) div 2;\n  if a[mid]>=x then\n    boe(l,mid,x) else\n  boe(mid+1,r,x);\nend;\nbegin\n  readln(n,m);\n  for i:=1 to n do\n    read(a[i]);\n  sort(1,n);\n  for i:=1 to m do\n  begin\n    readln(c,d);\n    boe(1,n,c);\n    less(1,n,d);\n    mid:=0;\n    if x1>=x2 then\n    writeln(x1-x2+1) else\n    writeln(0);\n  end;\nend.\n\n```",
        "postTime": 1506164020,
        "uid": 9262,
        "name": "taoyc",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    },
    {
        "content": "~~STL\u5927\u6cd5\u597d~~\n\n\u9996\u5148\uff0c\u9700\u8981\u77e5\u9053\u4e24\u4e2a\u51fd\u6570\uff0cupper_bound \u548c lower_bound\uff0c\u5173\u4e8e\u4ed6\u4eec\u7684\u7528\u6cd5\uff0c\u63a8\u8350\u4e00\u7bc7\u535a\u5ba2\uff1a[\u8fd9\u4e2a](https://blog.csdn.net/qq_40160605/article/details/80150252)\n\n\u6574\u7406\u4e00\u4e0b\uff1alower_bound\u51fd\u6570\u662f\u4ece\u4e00\u4e2a\u6392\u597d\u5e8f\u7684\u6570\u7ec4\u627e\u5230\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e\u5df2\u77e5\u6570\u7684\u4e0b\u6807\uff0c\u800cupper_bound\u51fd\u6570\u662f\u7b97\u7b2c\u4e00\u4e2a\u5927\u4e8e\u5df2\u77e5\u6570\u7684\u4e0b\u6807\uff0c\u7531\u4e8e\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3a $O(log(n))$ \u3002\n\n\u559c\u95fb\u4e50\u89c1\u7684\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint a[100001],n,q;\nsigned main()\n{\n\tcin>>n>>q;\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>a[i];\n\tsort(a+1,a+1+n);\n\twhile(q--)\n\t{\n\t\tint x,y;\n\t\tcin>>x>>y;\n\t\tint x_p=lower_bound(a+1,a+1+n,x)-a;\n\t\tint y_p=upper_bound(a+1,a+1+n,y)-a;\n\t\tcout<<y_p-x_p<<endl;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1585207696,
        "uid": 321359,
        "name": "OfstAutomataMachine",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales S\u3011"
    },
    {
        "content": "### \u9898\u76ee\u601d\u8def \uff1a\n\u770b\u5230\u8fd9\u9898\u7684\u65f6\u5019\u7b2c\u4e00\u60f3\u6cd5\u662f\u76f4\u63a5\u524d\u7f00\u548c\uff0c\u79bb\u6563\u5316\u7136\u540e $O(1)$ \u67e5\u8be2\n\n\u4f46\u662f\u61d2\u5f97\u5904\u7406\u79bb\u6563\u5316\u4e4b\u540e\u5404\u79cd\u5173\u7cfb\uff0c\u867d\u7136\u7528`map`\u79bb\u6563\u5316\u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u6211\u9009\u62e9\u76f4\u63a5\u4e0a\u4e00\u68f5\u6743\u503c\u7ebf\u6bb5\u6811\n\n\u56e0\u4e3a\u503c\u57df\u592a\u5927\uff0c\u76f4\u63a5\u5f00\u5f00\u4e0d\u4e0b\uff0c\u4f46\u662f\u6bcf\u6b21\u53ea\u4f1a\u7528\u5230\u4e00\u6761\u94fe\uff0c\u6240\u4ee5\u52a8\u6001\u5f00\u70b9\u5373\u53ef\n\n\u53ef\u4ee5\u5f53\u4f5c\u7ebf\u6bb5\u6811\u3001\u5206\u5757\u7b49\u57fa\u7840\u6570\u636e\u7ed3\u6784\u7684\u7ec3\u4e60\u9898\u3002\n\n\u819c\u5404\u4f4d\u697c\u4e0b\u5927\u4f6c\uff0c`lower_bound` \u6211\u662f\u4e0d\u6562\u7528\u7684\uff0c\u6015\u7528\u4e0d\u660e\u767d\uff0c\u81f3\u4e8e\u81ea\u5df1\u5199\u4e8c\u5206 \uff1f \u6211\u89c9\u5f97\u548c\u5199\u4e00\u4e2a\u7ebf\u6bb5\u6811\u5dee\u4e0d\u591a\uff0c\u8fd8\u5f97\u8003\u8651\u8fb9\u754c\u95ee\u9898\n\n\u4e0b\u9762\u662f\u4ee3\u7801\n\n```cpp\n#include <cstdio>\nconst int INF = 1000000000;\nconst int N = 4010000;\nint t[N], ls[N], rs[N];\nvoid fix(int l, int r, int &p, int x) {\n\tstatic int _;\n\tif(!p) p = ++_;\n\tif(l == r) return t[p] ++, void();\n\tint mid = (l+r) >> 1;\n\tif(x <= mid) fix(l, mid, ls[p], x);\n\telse fix(mid+1, r, rs[p], x);\n\tt[p] = t[ls[p]]+t[rs[p]];\n}\nint inq(int l, int r, int p, int x, int y) {\n\tif(!p) return 0;\n\tif(x <= l && y >= r) return t[p];\n\tint mid = (l+r) >> 1;\n\tint ret = 0;\n\tif(x <= mid) ret += inq(l, mid, ls[p], x, y);\n\tif(y > mid) ret += inq(mid+1, r, rs[p], x, y);\n\treturn ret;\n}\nint rot;\nint main() {\n\tint n, q;\n\tscanf(\"%d%d\", &n, &q);\n\twhile(n -- ) {\n\t\tint x;\n\t\tscanf(\"%d\", &x);\n\t\tfix(1, INF, rot, x);\n\t}\n\twhile(q -- ) {\n\t\tint x, y;\n\t\tscanf(\"%d%d\", &x, &y);\n\t\tprintf(\"%d\\n\", inq(1, INF, 1, x, y));\n\t}\n}",
        "postTime": 1537067277,
        "uid": 125342,
        "name": "Yirannn",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    },
    {
        "content": "\u7ed9\u4f60\u4e00\u4e2a\u5e8f\u5217\uff0c\u544a\u8bc9\u4f60\u54ea\u4e9b\u4f4d\u7f6e\u662f1\u3002\n\n\u7136\u540e\u591a\u6b21\u95ee\u533a\u95f4\u548c\u3002\n\n\n\u79bb\u6563\u5316\uff0c\u4e4b\u540e\u5904\u7406\u51fa\u524d\u7f00\u548c\uff0csum:a[l]..a[r]=s[r]-s[l-1]\n\n```cpp\n#include<bits/stdc++.h>\n\nconst int N=1e5+5;\nint a[N*3],s[N*3];\nint n,q,i,t,u;\n\nbool a_xiao(int x,int y)\n{\n    return a[x]<a[y];\n}\nint id[N*3];\nvoid lisan()\n{\n    for(i=1;i<=t;++i)id[i]=i;\n    std::sort(id+1,id+t+1,a_xiao);\n    int now=-1;\n    for(i=1;i<=t;++i)\n    {\n        int x=id[i];\n        if(a[x]!=now){now=a[x];++u;}\n        a[x]=u;\n    }\n}\n\nint main()\n{freopen(\"1.in\",\"r\",stdin);\n    scanf(\"%d%d\",&n,&q);\n    for(i=1;i<=n;++i)scanf(\"%d\",a+i);\n    t=n;\n    for(i=1;i<=q;++i,t+=2)scanf(\"%d%d\",a+t+1,a+t+2);\n    lisan();\n    for(i=1;i<=n;++i)++s[a[i]];\n    for(i=2;i<=u;++i)s[i]+=s[i-1];\n    for(t=n,i=1;i<=q;++i,t+=2) printf(\"%d\\n\",s[a[t+2]]-s[a[t+1]-1]);\n}\n```",
        "postTime": 1496047084,
        "uid": 9168,
        "name": "kczno1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u80af\u5b9a\u5148\u8981\u6392\u5e8f   \n\u7136\u540e\u518d\u770b\uff0c~~\u4f3c\u4e4e\u662f\u7528\u524d\u7f00\u548c\u6765\u641e\u7684~~   \n\u56e0\u4e3a$A,B$\u7684\u8303\u56f4\u662f$0\\sim10^9$\uff0c\u6240\u4ee5\u4f9d\u8d56\u5750\u6807\u7684\u529e\u6cd5\u90fd\u70b8\u6389\u4e86\uff08MLE   \n\n\u6392\u8fc7\u5e8f\u540e\u662f\u4e00\u4e2a\u5355\u8c03\u4e0a\u5347\u7684\u5e8f\u5217\uff0c\u660e\u663e\u53ef\u4ee5\u7528\u4e8c\u5206   \n\u4e0d\u8fc7\u4e3a\u4ec0\u4e48\u4e0d\u7528**\u500d\u589e**\u5462\uff1f~~\uff08\u53cd\u6b63\u6211\u4e5f\u4e0d\u4f1a\u5199\u4e8c\u5206~~   \n\n\u500d\u589e\u7684\u601d\u60f3\u5c31\u662f\u6210\u500d\u5730\u589e\u957f\uff08~~\u6216\u51cf\u5c0f~~\uff0c\u76f4\u81f3\u67e5\u8be2\u5230\u7b54\u6848   \n\u590d\u6742\u5ea6\u540c\u4e8c\u5206\uff0c\u4e3a$O(log\\,n)$   \n\u4ee5\u4e0b\u8d34\u500d\u589e\u4ee3\u7801\n```cpp\nint find(int x){\n\tint p=0,q=1;\n\twhile(q>0){\n\t    while(p+q>n) q>>=1;       // p/=2\n\t    if(x>=a[p+q]) p+=q,q<<=1;  // p+=q,q*=2\n\t    else q>>=1;              // q/=2\n\t}\n    return p;\n}\n```\n\u901a\u8fc7\u500d\u589e\u67e5\u8be2**\u6700\u5927\u7684\u3001\u5c0f\u4e8e\u7b49\u4e8ex\u7684\u5e8f\u5217\u4e2d\u7684\u6570**\uff0c\u8fd4\u56de\u8be5\u6570\u7684\u4e0b\u6807\uff0c\u5373\u53ef\u6c42\u51fa\u533a\u95f4\u5143\u7d20\u6570\u91cf\n\n\u5bf9\u4e8e\u6837\u4f8b\u4e2d\u7684\u7b2c\u4e94\u6b21\u67e5\u8be2\uff0c$A,B$\u90fd\u4e0d\u662f\u5e8f\u5217\u4e2d\u7684\u5143\u7d20\uff0c\u8be5\u600e\u4e48\u529e\u5462\uff1f   \n\u6211\u4eec\u56fa\u5b9a\u53f3\u7aef\u70b9\uff0c\u53ea\u8003\u8651\u5de6\u7aef\u70b9\uff0c\u53ef\u4ee5\u53d1\u73b0\uff1a   \n**\u82e5 `x==a[p]` \u5219\u53ef\u76f4\u63a5\u8fd4\u56de `p` \uff0c\u53cd\u4e4b\u5e94\u8fd4\u56de `p+1`**  \n\uff08\u4e0a\u8ff0\u7ed3\u8bba\u5efa\u8bae\u81ea\u5df1\u624b\u63a8\u9a8c\u8bc1   \n![](https://cdn.luogu.com.cn/upload/pic/60195.png)\n\n\u5206\u6790**\u67e5\u8be2**\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u7ea6\u4e3a$O(Q\\,log\\,n)$   \n\u3010\u4ee3\u7801\u90e8\u5206\u3011\n```cpp\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n#define N 100000+2\nint n,Q,a[N]\uff1b\nint find(int x,int upd){\n    int p=0,q=1;\n    while(q){\n        while(p+q>n) q>>=1;\n        if(x>=a[p+q]) p=p+q,q<<=1;\n        else q>>=1;\n    }\n    return a[p]==x?p:p+upd;\n}\nint main(){\n    cin>>n>>Q;\n    for(int i=1;i<=n;i++)\n        cin>>a[i];\n    sort(a+1,a+n+1);\n    while(Q--){\n        int x,y;\n        cin>>x>>y;\n        cout<<find(y,0)-find(x,1)+1<<endl;\n    }\n    return 0;\n}\n```\n",
        "postTime": 1559710990,
        "uid": 104235,
        "name": "Kano",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    },
    {
        "content": "\u603b\u4f53\u601d\u60f3\u4ecd\u7136\u662f\u6392\u5e8f + \u4e8c\u5206\n\n\u4f46\u6211\u7528\u4e86\u4e00\u4e2a\u5c0f\u5c0f\u7684\u6280\u5de7\uff1a\nupper_bound\u51fd\u6570\u548c lower_bound\u51fd\u6570\n\nupper_bound  \u8bf4\u767d\u4e86\u5c31\u662f\u627e\u7b2c\u4e00\u4e2a\u5927\u4e8e\u67e5\u627e\u503c\u7684\u4e91\u7d20\nlower_bound  \u662f\u627e\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e\u67e5\u627e\u503c\u7684\u5143\u7d20\n\uff08\u8865\u5145\u4e00\u4e0b\uff1a\u8fd9\u4e24\u4e2a\u51fd\u6570\u90fd\u662f\u7528\u4e8c\u5206\u6765\u67e5\u627e\u7684\uff0c\u6240\u4ee5\u624b\u6253\u4e8c\u5206\u67e5\u627e\u4e5f\u53ef\u4ee5\uff09\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#define maxn 100010\nusing namespace std;\n\nint n,m,q,tot,x,y;\nint p[maxn];\n\nint main(){\n    scanf(\"%d%d\",&n,&q);\n    for(int i=1;i<=n;i++)  \n\t  scanf(\"%d\",&p[i]);\n    sort(p+1,p+1+n);\n    for(int i=1;i<=q;i++){\n\t\tscanf(\"%d%d\",&x,&y);\n        cout<<upper_bound(p+1,p+n+1,y) - lower_bound(p+1,p+n+1,x)<<endl;\n    }\n}\n```\n\n\u53e6\u5916\uff0c\u5f53\u7136\u53ef\u4ee5\u7528\u624b\u5199\u7684\u4e8c\u5206\u6765\u5199\u4ee3\u7801\u4e86\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u624b\u5199\u7684\u66f4\u597d\u7406\u89e3\uff0c\u4e5f\u66f4\u5bb9\u6613\u4e0a\u624b\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\nconst int maxn = 100050;\n\nint n,q,x,y,p[maxn];\nint l,r,mid;\nlong long maxx,minn;\n\nvoid erd(int l,int r,int x){\n\tif(l >= r) {\n\t\tmaxx = r;\n\t\treturn;\n\t}\n\tmid = (l + r) / 2;\n\tif(p[mid] >= x)  erd(l , mid , x);\n\telse erd(mid+1 , r , x);\n}\n\nvoid erf(int l,int r,int y){\n\tif(l >= r) {\n\t\tminn = r;\n\t\treturn;\n\t}\n\tmid = (l + r + 1) / 2;\n\tif(p[mid] <= y)  erf(mid , r , y);\n\telse erf(l , mid-1 , y);\n}\n\nint main(){\n\tscanf(\"%d%d\",&n,&q);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&p[i]);\n\t}\n\tsort(p+1,p+1+n);\n\tfor(int i=1;i<=q;i++){\n\t\tmaxx = 0;  minn = 0;\n\t\tscanf(\"%d%d\",&x,&y);\n    \tif(x > p[n] || y < p[1]){\n    \t\tprintf(\"0\\n\");\n    \t\tcontinue;\n\t\t}\n\t\terd(1,n,x);\n\t\terf(1,n,y);\n\t\tprintf(\"%d\\n\",minn - maxx + 1);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1535024082,
        "uid": 54635,
        "name": "Kevin_F",
        "ccfLevel": 0,
        "title": "\u6570\u8349\u579b"
    },
    {
        "content": "\u6392\u5e8f\u540e\u4e8c\u5206\u67e5\u627e\u533a\u95f4\u4e24\u7aef\u7684\u4e0b\u6807\uff0c\u76f8\u51cf\u51fa\u7b54\u6848\n\n\u4e8c\u5206\u7528STL\u7684lower\\_bound\u548cupper\\_bound\u5c31\u597d\u4e86\n\n\u533a\u95f4\u5de6\u7aef\u70b9>=\uff0c\u6240\u4ee5\u7528lower\\_bound\uff0c\u533a\u95f4\u53f3\u7aef\u70b9<=\u6240\u4ee5\u7528upper\\_bound-1\n\n\u6240\u4ee5ans=upper\\_bound-1-lower\\_bound+1=upper\\_bound-lower\\_bound\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n#define fo(a,b,c) for(int a=b;a<=c;a++)\nint read(){\n    int a=0,f=0;char c=getchar();\n    for(;c<'0'||c>'9';c=getchar())if(c=='-')f=1;\n    for(;c>='0'&&c<='9';c=getchar())a=a*10+c-'0';\n    return f?-a:a;\n}\nconst int N=1e5+1;\nint x[N];\nint main(){\n    int n=read(),q=read();\n    fo(i,1,n)x[i]=read();\n    sort(x+1,x+n+1);\n    fo(i,1,q){\n        int l=read(),r=read();\n        printf(\"%d\\n\",upper_bound(x+1,x+n+1,r)-lower_bound(x+1,x+n+1,l));\n    }\n    return 0;\n}\n```",
        "postTime": 1502700598,
        "uid": 12668,
        "name": "Minclxc",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3184 \u3010[USACO16DEC]Counting Haybales\u6570\u8349\u579b\u3011"
    }
]
[
    {
        "content": "\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u5206\u5f0f\u5f88\u50cf\u4e00\u4e2a\u659c\u7387\uff0c\u4f46\u662f\u540e\u9762\u662f\u6b63\u53f7\uff0c\u800c\u659c\u7387\u662f $\\frac{y1-y2}{x1-x2}$ \uff0c\u56e0\u6b64\u6211\u4eec\u5bf9b\u548cq\u6570\u7ec4\u53d6\u5b83\u4eec\u7684\u76f8\u53cd\u6570\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86 $2n$ \u4e2a\u70b9\u3002\n\n\u6211\u4eec\u628a\u4e00\u534a\u67d3\u7ea2\uff0c\u5750\u6807 $(p_i,a_i)$ \uff0c\u53e6\u4e00\u534a\u6211\u4eec\u67d3\u84dd\uff0c \u5750\u6807 $(-q_i,-b_i)$ \uff0c$(i,j)$ \u7684\u503c\u5c31\u53ef\u4ee5\u88ab\u63cf\u8ff0\u4e3a\u7ea2\u70b9 $i$ \u548c \u84dd\u70b9 $j$ \u4e4b\u95f4\u7684\u659c\u7387\u4e86\u3002\u800c $(i,j)$ \u7684\u6392\u540d\u53ef\u4ee5\u6839\u636e $(i,j)$ \u8fd9\u6761\u76f4\u7ebf\u4e0a\u65b9\u7684\u84dd\u70b9\u6570\uff0c\u4e0e\u8fd9\u6761\u76f4\u7ebf\u4e0b\u65b9\u7684\u7ea2\u70b9\u6570\u7b97\u51fa\u3002\n\n\u4e8e\u662f\u6211\u4eec\u627e\u8fd9\u6761\u76f4\u7ebf\u5373\u53ef\uff0c\u6211\u4eec\u8bbe\u5176\u622a\u8ddd\u4e3a $z$ \uff0c\u5982\u679c\u6211\u4eec\u77e5\u9053\u622a\u8ddd\uff0c\u90a3\u4e48\u5c31\u80fd\u627e\u5230\u9006\u65f6\u9488\u65b9\u5411\u7b2c $y$ \u4e2a\u7ea2\u70b9\uff0c\u5b83\u4e00\u5b9a\u662f\u8fd9\u6761\u76f4\u7ebf\u4e0a\u7684\u70b9\uff0c\u4e8e\u662f\u8fd9\u6761\u76f4\u7ebf\u5c31\u786e\u5b9a\u4e0b\u6765\u4e86\u3002\u6211\u4eec\u53d1\u73b0 $(0,z)$ \u4e0e\u7b2c $y$ \u4e2a\u7ea2\u70b9\u7684\u8fde\u7ebf\u4e0a\u65b9\u7684\u84dd\u70b9\u6570\u968f\u7740 $z$ \u7684\u589e\u5927\u662f\u5355\u8c03\u4e0d\u5347\u7684\u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206 $z$ \u8fdb\u884c\u5224\u65ad\u3002\n\n\u627e\u7b2c $y$ \u4e2a\u7ea2\u70b9\u53ef\u4ee5\u4f7f\u7528 nth_element \uff0c\u8fd9\u6837\u590d\u6742\u5ea6\u5c31\u662f $O(n\\log(eps^{-1}))$ \u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1000005,M=998244353,E=262144;\n#define __float128 long double\n__float128 eps=0.000000002;\nint r,i,n,ans,p,j,k,f[N],x,y,t;\n__float128 C;\nstruct str{\n\tint x,y,id;\n}a[N],b[N];\nbool flag;\nbool cmp(str a,str b)\n{\n\treturn a.x*(b.y-C)-(a.y-C)*b.x>0;\n}\n__float128 Fabs(__float128 M)\n{\n\treturn M<0?-M:M;\n}\nint check(__float128 m)\n{\n\tC=m;\n\tnth_element(a+1,a+y,a+1+n,cmp);\n\tint s1=0,s2=0;\n\tfor(i=1;i<=n;++i)\n\t\tif(Fabs(a[y].x*(b[i].y-C)-(a[y].y-C)*b[i].x)/max(a[i].x,a[i].y)<eps)\n\t\t\t++s2;\n\t\telse\n\t\t\tif(a[y].x*(b[i].y-C)-(a[y].y-C)*b[i].x>0)\n\t\t\t\t++s1;\n\tif(s1<x&&s1+s2>=x)\n\t{\n\t\tflag=true;\n\t\tfor(i=1;i<=n;++i)\n\t\t\tif(Fabs(a[y].x*(b[i].y-C)-(a[y].y-C)*b[i].x)/max(a[i].x,a[i].y)<eps)\n\t\t\t{\n\t\t\t\tprintf(\"%d %d\\n\",a[y].id,i);\n\t\t\t\tbreak;\n\t\t\t}\n\t}\n\treturn s1;\n}\nint main()\n{\n\tscanf(\"%d\",&t);\n\twhile(t--)\n\t{\n\t\tscanf(\"%d %d %d\",&n,&x,&y);\n\t\tfor(i=1;i<=n;++i)\n\t\t{\n\t\t\tscanf(\"%d %d %d %d\",&a[i].y,&b[i].y,&a[i].x,&b[i].x);\n\t\t\tb[i].x=-b[i].x,b[i].y=-b[i].y;\n\t\t\ta[i].id=i,b[i].id=i;\n\t\t}\n\t\tflag=false;\n\t\t__float128 l=-1000000000,r=1000000000;\n\t\twhile(r-l>0.0000000002)\n\t\t{\n\t\t\t__float128 mid=(l+r)/2;\n\t\t\tif(check(mid)<x)\n\t\t\t\tr=mid;\n\t\t\telse\n\t\t\t\tl=mid;\n\t\t\tif(flag)\n\t\t\t\tbreak;\n\t\t}\n\t\tif(!flag)\n\t\t\tputs(\"0 0\");\n\t}\n}\n\n```",
        "postTime": 1613191161,
        "uid": 13185,
        "name": "\u53cc\u7ba1\u8367\u5149\u706f",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P7340 \u3010\u300eMdOI R4\u300fBalance\u3011"
    },
    {
        "content": "$n^2$ \u7684\u66b4\u529b\u4e0d\u8bf4\u4e86\u3002\n\n\u6839\u636e\u8ba1\u7b97\u51e0\u4f55\u80fd\u591f\u60f3\u5230\u4e00\u4e2a\u4e71\u641e\uff0c\u4f46\u662f\u4ed6\u7ecf\u8fc7\u4e00\u5929\u7684\u52aa\u529b\u88ab\u5361\u6389\u4e86\u3002\n\n\u5148\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u5982\u4f55\u523b\u753b\u6240\u6709 $f(i,j)\\ge z$ \u7684 $(i,j)$\u3002\n\n\u5206\u6570\u89c4\u5212\u540e\uff0c\u4ee4 $x_i=a_i-zp_i,y_i=b_i-zq_i$\uff0c\u90a3\u4e48\u523b\u753b\u7684\u5c31\u662f\u6240\u6709 $x_i+y_j\\ge 0$ \u7684 $(i,j)$\u3002\n\n\u5982\u679c $x,y$ \u6570\u7ec4\u7ecf\u8fc7\u4e86\u6392\u5e8f\uff0c\u5e76\u4e14\u5728 $n\\times n$ \u7684\u65b9\u683c\u8868\u4e2d\u67d3\u9ed1\u90a3\u4e9b $f(i,j)\\ge z$ \u7684 $(i,j)$\uff0c\u90a3\u4e48\u9ed1\u8272\u7684\u683c\u5b50\u548c\u767d\u8272\u7684\u683c\u5b50\u88ab\u4e00\u6761\u8def\u5f84\u5206\u5272\u3002\n\n\u73b0\u5728\uff0c\u5c06 $z$ \u4ece $\\infty$ \u8fde\u7eed\u53d8\u5316\u5230 $-\\infty$\uff0c\u59cb\u7ec8\u4fdd\u6301 $x,y$ \u6570\u7ec4\u662f\u6392\u597d\u5e8f\u7684\uff0c\u5982\u679c\u6709\u53cd\u8d85\u7684\u60c5\u51b5\u76f4\u63a5\u4ea4\u6362\u8fd9\u4e24\u5217\uff08\u884c\uff09\uff0c\u53cd\u8d85\u7684\u90a3\u4e00\u523b\u90a3\u4e24\u5217\uff08\u884c\uff09\u662f\u5b8c\u5168\u4e00\u6837\u7684\u3002\n\n\u90a3\u4e48\u4f1a\u53d1\u73b0\u65b9\u683c\u8868\u4e2d\u4f9d\u6b21\u6709\u683c\u5b50\u88ab\u67d3\u9ed1\uff0c\u5e76\u4e14\u9ed1\u767d\u683c\u5b50\u88ab\u4e00\u6761\u8def\u5f84\u5206\u5272\u7684\u4e8b\u5b9e\u59cb\u7ec8\u4fdd\u6301\u7740\u3002\n\n\u6211\u4eec\u627e\u5230\u683c\u5b50 $(u,v)$ \u7b2c\u4e00\u6b21\u88ab\u67d3\u9ed1\u7684\u65f6\u523b\uff0c\u90a3\u4e48\u5b83\u5bf9\u5e94\u7684 $f$ \u503c\u662f\u4e00\u884c\u4e2d\u7b2c $u$ \u5927\u7684\uff0c\u4e00\u5217\u4e2d\u7b2c $v$ \u5927\u7684\u3002\n\n\u8fd9\u65f6\u5019\u8bc1\u660e\u4e86\u8fd9\u6837\u7684\u6570\u5bf9\u4e00\u5b9a\u5b58\u5728\u3002\n\n\u8981\u627e\u5230\u8fd9\u4e2a\u6570\u5bf9\u5f53\u7136\u4e0d\u7528\u7ef4\u62a4\u6574\u4e2a\u8fc7\u7a0b\uff0c\u4e8c\u5206 $z$\uff0c\u76f4\u63a5\u5224\u65ad\u5bf9\u5e94\u7684 $(u,v)$ \u662f\u5426\u975e\u8d1f\uff0c\u540c\u65f6\u4e0d\u4f1a\u6709\u4efb\u4f55\u7cbe\u5ea6\u95ee\u9898\u3002\n\n\u4f7f\u7528 `nth_element` \u5c31\u80fd\u505a\u5230 $O(nw)$ \u7684\u590d\u6742\u5ea6\u3002\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\nusing namespace std;\nstruct node{int pl;int a,p;long double curr;}x[500010],y[500010];\nbool cmp(node x,node y){return x.curr<y.curr;}\nint n,s,t;\nint main(){\n\tios::sync_with_stdio(false);cin.tie(0);\n\tint T;cin>>T;while(T--){\n\tcin>>n>>t>>s;rep(i,1,n)cin>>x[i].a>>y[i].a>>x[i].p>>y[i].p,x[i].pl=y[i].pl=i;\n\tlong double l=-2e7,r=2e7,mid=0;\n\trep(i,1,50){\n\t\tmid=(l+r)/2;\n\t\trep(i,1,n)x[i].curr=1.0*x[i].a-mid*x[i].p,y[i].curr=1.0*y[i].a-mid*y[i].p;\n\t\tnth_element(x+1,x+s,x+n+1,cmp),nth_element(y+1,y+t,y+n+1,cmp);\n\t\tif(x[s].curr+y[t].curr>0)l=mid;else r=mid;\n\t}\n\tcout<<x[s].pl<<\" \"<<y[t].pl<<endl;}\n}",
        "postTime": 1613124949,
        "uid": 254752,
        "name": "JohnVictor",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P7340 \u3010\u300eMdOI R4\u300fBalance\u3011"
    },
    {
        "content": "\u4f5c\u4e3a\u9a8c\u9898\u4eba\u611f\u89c9\u8fd9\u662f\u4e00\u9053\u601d\u8def\u975e\u5e38\u5999\u7684\u9898\u3002JV yyds\uff01orzorz\n\n\u9996\u5148\u8fd9\u6837\u7684\u5f62\u5f0f\u5bb9\u6613\u60f3\u5230\u7ef4\u62a4\u5206\u6570\u503c\u6765\u5c06 $i,j$ \u72ec\u7acb\u51fa\u6765\u3002\u4e8e\u662f\u6211\u4eec\u60f3\u5230\u7ef4\u62a4\u503c $z$\uff0c\u901a\u8fc7 $a_i-zp_i$ \u4e0e $b_j-zq_j$ \u4e4b\u548c\u7684\u7b26\u53f7\u6765\u523b\u753b\u5206\u6570\u503c\u4e0e $z$ \u7684\u5927\u5c0f\u5173\u7cfb\u3002\u5bb9\u6613\u53d1\u73b0\u5728 $z$ \u8fde\u7eed\u53d8\u5316\u7684\u8fc7\u7a0b\u4e2d $a_i-zp_i$ \u548c $b_j-zq_j$ \u90fd\u662f\u8fde\u7eed\u53d8\u5316\u7684\u3002\u6240\u4ee5\u6211\u4eec\u5c06\u5b83\u4eec\u5206\u522b\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u6309\u884c\u5217\u5217\u8868\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u8bb0\u5f55\u5bf9\u56fa\u5b9a\u7684 $z$ \u5176\u503c\u662f\u5426\u975e\u8d1f\u3002\u6bcf\u4e00\u7ef4\u7684\u6392\u5e8f\u5206\u522b\u662f\u5728\u76f8\u90bb\u4e24\u9879\u4e4b\u95f4\u8fdb\u884c\u53d8\u6362\u7684\u3002\u56e0\u6b64\u4e00\u5b9a\u6709\u4e00\u4e2a\u4e34\u754c\u70b9\u4f7f $x,y$ \u6070\u597d\u975e\u8d1f\uff0c\u90a3\u4e48\u6211\u4eec\u4e8c\u5206\u627e\u5230\u8fd9\u4e2a\u65f6\u523b\uff0c\u663e\u7136\u5f53\u524d\u7684 $x,y$ \u5bf9\u5e94\u56de\u8f93\u5165\u7684\u7f16\u53f7\u5c31\u662f\u7b54\u6848\u3002\n\n\u540c\u65f6\u8fd9\u9898\u89e3\u662f\u4e00\u5b9a\u5b58\u5728\u7684\uff0c\u6240\u4ee5 `0 0` \u9a97\u4e0d\u5230\u5206\uff08\n\nCode:\n```cpp\n#include<cmath>\n#include<cstdio>\n#include<algorithm>\nusing std::nth_element;\nint t,n,x,y,u,v;\nlong double l,r,m;\nstruct node\n{\n\tint a,p,id;\n\tlong double vl;\n}tx[500003],ty[500003];\ninline bool cmp(node xx,node yy)\n{\n\treturn xx.vl<yy.vl;\n}\nint main()\n{\n    scanf(\" %d\",&t);\n    while(t--)\n    {\n    \tscanf(\" %d %d %d\",&n,&y,&x);l=-1e14;r=1e14;u=v=0;\n    \tfor(int i=1;i<=n;++i)scanf(\" %d %d %d %d\",&tx[i].a,&ty[i].a,&tx[i].p,&ty[i].p),tx[i].id=ty[i].id=i;\n    \twhile(r-l>1e-14)\n    \t{\n    \t\tm=(l+r)/2;\n    \t\tfor(int i=1;i<=n;++i)tx[i].vl=tx[i].a-tx[i].p*m,ty[i].vl=ty[i].a-ty[i].p*m;\n    \t\tnth_element(tx+1,tx+x,tx+n+1,cmp);\n    \t\tnth_element(ty+1,ty+y,ty+n+1,cmp);\n    \t\tif(tx[x].vl+ty[y].vl>=0)l=m,u=tx[x].id,v=ty[y].id;\n    \t\telse r=m;\n    \t}\n    \tprintf(\"%d %d\\n\",u,v);\n    }\n\treturn 0;\n}\n```",
        "postTime": 1612938809,
        "uid": 59388,
        "name": "VinstaG173",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P7340 \u3010\u300eMdOI R4\u300fBalance\u3011"
    }
]
[
    {
        "content": "\u7531\u4e8e\u8fd9\u4e9b\u5706\u90fd\u4e0e $x$ \u8f74\u76f8\u5207\u4e14\u6ca1\u6709\u4e24\u5706\u76f8\u4ea4\uff0c\u6240\u4ee5\u663e\u7136\u6211\u4eec\u5c06\u8fd9\u4e9b\u5706\u5168\u90e8\u6295\u5f71\u5230 $x$ \u8f74\u4e0a\u540e\u4efb\u610f\u4e00\u4e2a\u70b9\u6700\u591a\u4f1a\u88ab $\\mathbf O (\\log n)$ \u4e2a\u533a\u95f4\u8986\u76d6\u3002\u6240\u4ee5\u6211\u4eec\u6bcf\u6b21\u53ea\u9700\u8981\u627e\u5230\u8fd9 $\\mathbf O (\\log n)$ \u4e2a\u5706\u5c31\u597d\u3002   \n\n\u8003\u8651\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u3002\u6bcf\u4e2a\u8282\u70b9\u5f00\u4e00\u4e2a `unordered_set`\uff0c\u6bcf\u6b21\u4fee\u6539\u5411 $[x_i-y_i,x_i+y_i]$ \u5168\u90e8\u52a0\u5165\u7f16\u53f7 $i$\u3002\u67e5\u8be2\u7684\u65f6\u5019\u76f4\u63a5\u904d\u5386\u9014\u5f84\u7684\u6bcf\u4e2a\u8282\u70b9\u7684 `unordered_set` \u5c31\u597d\u3002\u4fee\u6539\u7684\u590d\u6742\u5ea6\u662f $\\mathbf O(\\log n)$ \u7684\uff0c\u67e5\u8be2\u7684\u590d\u6742\u5ea6\u662f $\\mathbf O(\\log n+\\log n)$ \u7684\uff0c\u6240\u4ee5\u603b\u590d\u6742\u5ea6\u4e3a $\\mathbf O(n\\log n)$\u3002   \n\n\u4ee3\u7801\uff1a  \n```cpp\n#include<cstdio>\n#include<unordered_set>\n#include<algorithm>\nconst int N=2e5+10;\nint n,t[N],x[N],y[N],a[N];\nstd::unordered_set<int>st[N<<2];\nvoid update(int rt,int l,int r,int ql,int qr,int x)\n{\n\tif(ql<=l&&r<=qr){x<0?(st[rt].erase(-x),0):(st[rt].insert(x),0);return;}\n\tint m=(l+r)>>1;\n\tif(ql<=m)update(rt<<1,l,m,ql,qr,x);\n\tif(qr>m)update(rt<<1|1,m+1,r,ql,qr,x);\n}\nvoid query(int rt,int l,int r,int p,int &ans)\n{\n\tfor(int i:st[rt])if(1ll*(x[p]-x[i])*(x[p]-x[i])+1ll*(y[p]-y[i])*(y[p]-y[i])<1ll*y[i]*y[i])ans=i;\n\tif(l==r)return; int m=(l+r)>>1;\n\tx[p]<=a[m]?query(rt<<1,l,m,p,ans):query(rt<<1|1,m+1,r,p,ans);\n}\nint main()\n{\n\tint i,p;scanf(\"%d\",&n);\n\tfor(i=1;i<=n;i++)\n\tscanf(\"%d%d%d\",&t[i],&x[i],&y[i]),a[i]=x[i];\n\tstd::sort(a+1,a+1+n);\n\tfor(i=1;i<=n;i++)\n\tt[i]==1?(update(1,1,n,std::lower_bound(a+1,a+1+n,x[i]-y[i])-a,std::upper_bound(a+1,a+1+n,x[i]+y[i])-a-1,i),0):\n\t(p=-1,query(1,1,n,i,p),printf(\"%d\\n\",p),(~p)&&(update(1,1,n,std::lower_bound(a+1,a+1+n,x[p]-y[p])-a,std::upper_bound(a+1,a+1+n,x[p]+y[p])-a-1,-p),0));\n\treturn 0;\n}\n```",
        "postTime": 1613562415,
        "uid": 35137,
        "name": "a___",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 [NEERC2017]Archery Tournament"
    }
]
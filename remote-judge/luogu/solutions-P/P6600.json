[
    {
        "content": "\u849f\u84bb\u4f5c\u4e3a\u51fa\u9898\u4eba$\\colorbox{black}{\\color{black}\u7684\u597d\u57fa\u53cb}$\uff0c\u7279\u5730$\\colorbox{black}{\\color{black}\u597d\u4e0d\u5bb9\u6613\u5f04\u61c2\u4e86}$\u6765\u5199\u4e00\u53d1$\\colorbox{black}{\\color{black}\u975e}$\u5b98\u65b9\u9898\u89e3\uff01\n\n$$\\huge\\color{purple}{\\text {vectorwyx}}\\;\\color{gold}\\text{\u662f\u6211\u4eec\u7684\u738b}\\;\\color{red}\\text!$$\n\n\n\n------------\n\u636e\u6bd4\u8d5b\u5b98\u65b9\u900f\u9732\uff0c\u8fd9\u4e2a\u9898\u662f\u7ecf\u8fc7**\u52a0\u5f3a**\u7684\n\n\u5728\u52a0\u5f3a\u4e4b\u524d\uff0c\u5b57\u6bcdT\u662f\u6ca1\u6709\u9650\u5236\u7684\uff08\u5373$a=b=s=x=0$\uff09\n\n\u6240\u4ee5\u54b1\u4eec\u5c31\u4ece\u8fd9\u79cd\u60c5\u51b5\u5165\u624b\uff0c\u8fd9\u6837\u6709\u5229\u4e8e\u5411\u6b63\u89e3\u8fdb\u53d1\uff01\n\n\u5206\u6790\u4e00\u4e0b\u5b57\u6bcdT\u7684\u7ec4\u6210\u5427\u2026\u2026\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vs0w2i4c.png)\n\n\u53ef\u4ee5\u53d1\u73b0\uff1a\u5bf9\u4e8e\u56fe\u4e2d\u7684\u6bcf\u4e00\u4e2a**\u542b $1$ \u7684\u70b9**\uff0c\u5b57\u6bcdT\u7684\u6570\u91cf\u8ddf\u5b83**\u5de6\uff0c\u53f3\uff0c\u4e0b**\u4e09\u4e2a\u65b9\u5411\u4e0a**\u8fde\u7eed\u7684 $1$ \u7684\u4e2a\u6570**\u6709\u5173\u3002\n\n\u8bbe\u8fd9\u4e2a\u70b9\u5de6\uff0c\u53f3\uff0c\u4e0b\u4e09\u4e2a\u65b9\u5411\u8fde\u7eed$1$\u7684\u4e2a\u6570\u4e3a$l,r,d$\uff0c\u5219\u4ee5\u8fd9\u4e2a\u70b9\u4e3a\u4e2d\u5fc3\u70b9\u7684\u5b57\u6bcdT\u7684\u6570\u91cf\u4e3a$(\\min(l,r)-1)\\times(d-1)$\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u628a\u6bcf\u4e2a\u70b9\u7684$l,r,d$\u5904\u7406\u51fa\u6765\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u89e3\u51b3\u95ee\u9898\u5566\uff01\n\n\u4f46\u662f\u600e\u4e48\u5904\u7406\u5462\uff0c\u4e00\u4e2a\u4e2a\u627e\uff1f\n\n\u4e0d\uff0c\u6211\u4eec\u7528**\u524d\u7f00\u548c**\u3002\n\n\u76f4\u63a5\u4e0a\u4ee3\u7801\u5427\uff01\uff08\u8bdd\u8bf4$r$\u548c$d$\u5b9e\u9645\u4e0a\u662f\u540e\u7f00\u548c\u5462\uff09\n\n```cpp\n\tbool wyx[3005][3005];//\u9898\u76ee\u7ed9\u768401\u77e9\u9635\uff08wyx\u662f\u6211\u4eec\u7684\u7ea2\u592a\u9633\uff01\uff01\uff01\uff09\n\tlong long sl[3005][3005],sr[3005][3005],sd[3005][3005];//l,r,d\uff08\u5f00 long long \u554aawa\uff09\n\t//\u5982\u679c\u8fd9\u91cc\u662f1\uff0c\u90a3\u5c31\u52a0\u4e0a\u524d\u9762\u7684\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++)\n\t\tif(wyx[i][j])sl[i][j]=sl[i][j-1]+1;\n\t}\n\t//\u540e\u9762\u7684\u4ea6\u5982\u6b64\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u4e00\u4e0b\u5faa\u73af\u987a\u5e8f    \n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=m;j>0;j--)\n\t\tif(wyx[i][j])sr[i][j]=sr[i][j+1]+1;\n\t}\n\tfor(int i=n;i>0;i--){\n\t\tfor(int j=1;j<=m;j++)\n\t\tif(wyx[i][j])sd[i][j]=sd[i+1][j]+1;\n\t}\t\n```\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u5b8c\u7f8e\u8fc8\u51fa\u4e86AC\u7684\u7b2c\u4e00\u6b65\uff01\n\n\n\n------------\n\n\u63a5\u4e0b\u6765\uff0c\u54b1\u4eec\u6765\u8003\u8651$w$\u548c$h$\u7684\u9650\u5236\u6761\u4ef6\uff1a\n\n>\u5bf9\u4e8e\u6bcf\u4e2a $w$\uff0c\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa\u6700\u5c0f\u7684\u5408\u6cd5 $h$\u3002\n> \u2014\u2014\u541b\u306eNOIP\u3002\n\n\u90a3\u600e\u4e48\u7b97\u5462\uff1f\u6211\u4eec\u6765\u770b\u770b\u8fd9\u56db\u4e2a\u6761\u4ef6\uff1a\n\n$$\\begin{cases}h\\ge b\\quad (\\text{\u9650\u5236\u6761\u4ef62})\\\\h\\ge \\lceil\\dfrac{s}{w}\\rceil\\quad (\\text{\u9650\u5236\u6761\u4ef63})\\\\h\\ge x-w\\quad (\\text{\u9650\u5236\u6761\u4ef64})\\end{cases}$$\n\n\u56e0\u4e3a**\u90fd\u8981\u6ee1\u8db3**\uff0c\u6240\u4ee5\u6211\u4eec\u4ece\u4e09\u4e2a\u503c\u91cc\u9762\u8981\u53d6\u4e2a**\u6700\u5927\u7684**\uff0c\u5373\uff1a\n```cpp\n\tlong long minh[3005];//minh:\u5bf9\u4e8e\u6bcf\u4e2aw\uff0c\u5b83\u7684\u6700\u5927\u5408\u6cd5h\t\t\n\tfor(int w=a+!(a&1);w<=m;w+=2)//\u56e0\u4e3aw>=a\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u4ecea\u5f00\u59cb\uff0c\u52a0!(a&1)\u662f\u4e3a\u4e86\u4fdd\u8bc1w\u4e3a\u5947\u6570\n```\n\u8fd9\u6837\u7684\u8bdd\uff0c\u5bf9\u4e8e\u4efb\u610f\u60c5\u51b5\u6211\u4eec\u90fd\u53ef\u4ee5\u901a\u8fc7**\u679a\u4e3e\u4e2d\u5fc3\u70b9\u548c$w$** \u7684\u65b9\u5f0f\u5728$O(n^3)$\u7684\u65f6\u95f4\u5185\u7b97\u51fa\u6765\u5566\uff01\n\n\u4f46\u662f\u2026\u2026\u8fd9\u8c8c\u4f3c\u8fd8\u4e0d\u592a\u591f\u2026\u2026\n\n\n\n------------\n\u63a5\u4e0b\u6765\u5c31\u662f\u6700\u540e\u4e00\u6218\u4e86\uff1a\u6211\u4eec\u8981\u628a$O(n^3)$\u4f18\u5316\u6210$O(n^2)$\n\n$\\color{red}{\\text{\u6572\u9ed1\u677f\uff01\uff01\uff01\u91cd\u96be\u70b9\u6765\u5566\uff01\uff01\uff01\uff01\uff01}}$\n\n\u5f80\u6df1\u5165\u91cc\u601d\u8003\u4e00\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u628a$w$\u548c$h$\u7684\u8303\u56f4\u786e\u5b9a\u4e0b\u6765\u3002\n\n\u4e0d\u96be\u770b\u51fa\uff1a$b\\le h\\le d$\n\n\u7136\u540e\u518d\u6765\u8003\u8651 $w$\uff0c$w$ \u7684\u6700\u5927\u503c\u662f$2\\times\\min(l,r)-1$\u2026\u2026\n\n\u4f46\u662f $w$ \u7684\u6700\u5c0f\u503c\u662f\u5565\uff1f\uff1f\uff1f\uff1f\uff1f\n\n\u522b\u6025\u561b\uff0c\u65e2\u7136\u524d\u9762\u6211\u4eec\u5df2\u7ecf\u63a8\u51fa\u4e86\u5bf9\u4e8e\u6bcf\u4e2a $w$ \u6700\u5c0f\u7684\u5408\u6cd5 $h$\uff0c\u90a3\u6211\u4eec\u4e5f\u53ef\u4ee5\u63a8\u51fa**\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $h$ \u7684\u6700\u5c0f\u5408\u6cd5 $w$** \uff01\n\n\u65e2\u7136\u6211\u4eec\u5df2\u7ecf\u63a8\u51fa\u4e86$\\min h$\uff0c\u90a3\u6211\u4eec\u53ef\u4ee5\u597d\u597d\u5229\u7528\u4e00\u4e0b\uff1a\u8981\u6c42\u51fa\u67d0\u4e2a $h$ \u7684 $\\min w$\u503c\uff0c\u5c31\u662f**\u5bfb\u627e\u4e00\u4e2a $w$\uff0c\u4f7f\u8fd9\u4e2a $w$ \u7684 $\\min h\\le h$**\n\n```cpp\n\tint w=a+!(a&1);//w\u8fd8\u662f\u4ecea\u5f00\u59cb\n\tfor(int h=n;h>=b;h--){//\u7531\u4e8ew\u8d8a\u5927\uff0ch\u8d8a\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u8ba9h\u4ece\u5927\u5230\u5c0f\u63a8\n\t\twhile(w<=m&&minh[w]>h)w+=2;//\u589e\u52a0w\u5230minh[w]<=h\u4e3a\u6b62\n\t\tminw[h]=w;//\u8fd9\u5c31\u662fminw\u7684\u503c\u5566\n\t}\n```\n\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u628a$w$\u548c$h$\u7684\u503c\u9650\u5b9a\u5728\u4e00\u4e2a\u8303\u56f4\u5185\u5566\uff01\n\n\u4e0d\u8fc7\uff0c\u8fd9\u91cc\u9762\u8fd8\u6709\u5f88\u591a\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u60c5\u51b5\uff0c\u600e\u4e48\u529e\u5462\uff1f\n\n\u770b\u56fe~\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r2zlbbmb.png)\n\n\n\u84dd\u8272\u9634\u5f71\u7684 $\\color{blue}\\text{answer}$ \u533a\u57df\u2014\u2014\u6211\u4eec\u8981\u6c42\u7684\u7b54\u6848\n\n\u7eff\u8272\u7684 $\\color{green}\\text{all}$ \u533a\u57df\u2014\u2014\u521a\u624d\u9650\u5b9a\u51fa\u7684\u8303\u56f4\n\n\u7ea2\u8272\u5708\u5708\u7684 $\\color{red}\\text{invalid}$ \u533a\u57df\u2014\u2014\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u5730\u65b9\n\n\u4e5f\u5c31\u662f\u8bf4\uff1a$\\color{blue}\\text{answer}\\color{black}=\\color{green}\\text{all}\\color{black}-\\color{red}\\text{invalid}$\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa $\\color{red}\\text{invalid}$ \u533a\u57df\u5c31\u53ef\u4ee5\u5566\uff01\n\n\u90a3\u600e\u4e48\u6c42\u5462\uff1f\u6211\u4eec\u89c2\u5bdf\u4e00\u4e0b $\\color{blue}\\text{answer}$ \u533a\u57df\u548c $\\color{red}\\text{invalid}$ \u533a\u57df\u7684\u90a3\u6761\u9ed1\u8272\u5206\u754c\u7ebf\uff0c\u4f60\u4f1a\u6709\u4e00\u4e2a\u60ca\u5947\u7684\u53d1\u73b0\uff1a\n\n\u8fd9\u4e0d\u5c31\u662f $\\min h$ \u7684\u503c\u561b\uff01\uff01\uff01\uff01\n\n\u6240\u4ee5\uff1a$\\color{red}\\text{invalid}\\large\\color{black}=\\sum\\limits_{i=\\min w(d)}^{2\\times\\min(l,r)-1} \\min h(i) $\n\n\u8c8c\u4f3c\u662f\u4e00\u6bb5\u2026\u2026**\u533a\u95f4\u548c**\uff1f\n\n\u90a3\u5c31\u7b80\u5355\u4e86\uff1a\u8fd8\u662f\u7528**\u524d\u7f00\u548c**\u6765\u89e3\u51b3\u95ee\u9898\uff01\n\n\u5148\u5904\u7406\u51fa$\\min h$\u7684\u524d\u7f00\u548c\uff1a\n```cpp\nsminh[w]=sminh[w-2]+minh[w];//\u56e0\u4e3aw\u53ea\u80fd\u662f\u5947\u6570\u6240\u4ee5\u662f-2\n```\n\u7136\u540e\u518d\u7528\u521a\u624d\u7684\u7ed3\u8bba\u89e3\u51b3\u95ee\u9898\uff1a\n\n```cpp\n\tlong long ans=0;//\u6ce8\u610flong long\n\tfor(int i=1;i<=n;i++){//\u679a\u4e3e\u4e2d\u5fc3\u70b9\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(!wyx[i][j])continue;//\u53ea\u6709\u8fd9\u91cc\u662f1\u7684\u65f6\u5019\u624d\u53c2\u52a0\u7edf\u8ba1\n\t\t\tlong long h=sd[i][j];//h\u7684\u6700\u5927\u8303\u56f4\uff08\u4e3a\u4e86\u540e\u9762\u7684invalid\u533a\u57df\u597d\u7b97\uff0ch\u7684\u4e0b\u754c\u76f4\u63a5\u53d8\u62100\u4e86\uff0c\u53cd\u6b63\u5230\u5934\u6765\u8fd8\u8981\u88ab\u51cf\u6389\uff09\n\t\t\tlong long lw=minw[h],rw=1ll*2*min(sl[i][j],sr[i][j])-1;//w\u7684\u6700\u5c0f\u8303\u56f4\u548c\u6700\u5927\u8303\u56f4\n\t\t\tif(rw>=lw&&h>=b)//\u8981\u4fdd\u8bc1\u6709\u7b54\u6848\u624d\u80fd\u7b97\uff08\u5426\u5219\u4f60\u6574\u51fa\u6765\u4e2a\u8d1f\u6570\u662f\u5565\u60c5\u51b5\uff09\n\t\t\tans+=1ll*(rw-lw+2)/2*(h+1)-(sminh[rw]-sminh[lw-2]);//answer=all-invalid\uff0c\u4e00\u4e9b+1\uff0c-2\u8fd9\u6837\u7684\u7ec6\u8282\u9700\u8981\u6ce8\u610f\u4e0b\n\t\t}\n\t} \n```\n\n\n\n------------\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\nbool wyx[3005][3005];\nlong long sl[3005][3005],sr[3005][3005],sd[3005][3005]; \nlong long minh[3005],sminh[3005],minw[3005];\nint n,m,a,b,s,x;\nlong long ans=0;\nint main(){\n\tios::sync_with_stdio(false);//\u5173\u95ed\u540c\u6b65\u6d41\n\tcin.tie(0);cout.tie(0);\n\tcin>>n>>m>>a>>b>>s>>x;\n\ta=max(a,3),b=max(b,2);//\u8bf4\u597d\u7684w>=3,h>=2\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tchar c;\n\t\t\tcin>>c;\n\t\t\twyx[i][j]=c-'0';//\u8f93\u5165\n\t\t}\n\t}\n  //\u7b97\u51fa\u4e09\u4e2a\u65b9\u5411\u7684\u524d\uff08\u540e\uff09\u7f00\u548c\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++)\n\t\tif(wyx[i][j])sl[i][j]=sl[i][j-1]+1;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=m;j>0;j--)\n\t\tif(wyx[i][j])sr[i][j]=sr[i][j+1]+1;\n\t}\n\tfor(int i=n;i>0;i--){\n\t\tfor(int j=1;j<=m;j++)\n\t\tif(wyx[i][j])sd[i][j]=sd[i+1][j]+1;\n\t}\t\n\tint w;\t\t\n\tfor(w=a+!(a&1);w<=m;w+=2){\n\t\tminh[w]=max(b,max(x-w,(int)(ceil(s*1.0/w))));//\u8fd0\u7528\u9650\u5236\u6761\u4ef6\u7b97\u51faminh\n\t\tsminh[w]=sminh[w-2]+minh[w];\t\t            \n\t}\n\tw=a+!(a&1);\n\tfor(int h=n;h>=b;h--){\n\t\twhile(w<=m&&minh[w]>h)w+=2;//\u8fd0\u7528minh\u7b97\u51faminw\n\t\tminw[h]=w;\n\t}\n\tlong long ans=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(!wyx[i][j])continue;\n\t\t\tlong long h=sd[i][j];\n\t\t\tlong long lw=minw[h],rw=1ll*2*min(sl[i][j],sr[i][j])-1;\n\t\t\tif(rw>=lw&&h>=b)\n\t\t\tans+=1ll*(rw-lw+2)/2*(h+1)-(sminh[rw]-sminh[lw-2]);//\u5206\u6790\u7b97\u51faans\uff08\u5b9e\u9645\u4e0a\u53ef\u4ee5\u8bf4\u662f\u5bb9\u65a5\u539f\u7406\uff09\n\t\t}\n\t} \n\tcout<<ans;\n}\n```\n\u6700\u540e\u7684\u6700\u540e\uff1a\n\n1. \u8fd9\u4e2a\u9898\u7684\u524d\u8eab\uff1a[U95387 TLE](https://www.luogu.com.cn/problem/U95387)\n\n2. [yrz\u6700\u8fd1\u7684\u5fc3\u91cc\u8bdd](https://www.luogu.com.cn/paste/e2x8mjgj)\uff0c\u771f\u7684\u2026\u2026\n\n\n\n\n",
        "postTime": 1591521843,
        "uid": 239405,
        "name": "yangrunze",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6600 \u3010\u300cEZEC-2\u300d\u5b57\u6bcdT\u3011"
    },
    {
        "content": "\u8fd9\u9898\u89e3\u91cc\u7684\u65b9\u6cd5\u597d\u795e\u4ed9\u554a/kk\n\n\u7136\u800c\u6211\u7684\u65b9\u6cd5\u611f\u89c9\u8fd9\u9898\u5e94\u8be5\u4e0d\u5230\u7eff/fad\u3002~~\u6216\u6210\u6b64\u9898\u6700\u77ed\u4ee3\u7801~~\n\n\u8ba1\u7b97 T \u5927\u5c0f\u7684\u65b9\u6cd5\u5176\u4ed6\u9898\u89e3\u5199\u5f97\u5f88\u597d\uff0c\u8fd9\u91cc\u6ce8\u91cd\u8bb2\u89e3\u5bf9\u9650\u5236\u6761\u4ef6\u7684\u5904\u7406\u3002\n\n\u8003\u8651\u5bf9\u4e8e\u6a2a\u957f\u4e3a i, \u7ad6\u957f\u4e3a j \u7684\u5408\u6cd5 T\uff0c\u663e\u7136\u5b58\u5728\u4e00\u4e2a   $i+2\\times C$, $j+D$ \u7684\u5408\u6cd5 T \u5f62\uff0c\u5176\u4e2d $C$\uff0c$D$ \u4e3a\u4efb\u610f\u5e38\u6570\uff08\u53ef\u4ee5\u4e3a 0\uff09\n\n\u4e8e\u662f\u8fd9\u9898\u8f6c\u5316\u4e3a\u6bcf\u4e2a\u4e2d\u5fc3\u70b9\u80fd\u5f97\u5230\u7684\u6700\u5927 T \u5f62\u7684\u5408\u6cd5\u5b50\u96c6\u6570\u91cf\u3002\n\n\u73b0\u5728\u8f6c\u5316\u4e00\u4e0b\u95ee\u9898 \uff1a\u5982\u679c\u628a\u8fd9\u4e2a\u53d8\u6210\u4e00\u7ef4\u5e8f\u5217\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5b50\u96c6\u53ef\u4ee5\u600e\u4e48\u6c42\uff1f\n\n\u53d1\u73b0\u663e\u7136\u53ef\u4ee5\u4f7f\u7528**\u524d\u7f00\u548c**\u8fdb\u884c\u5904\u7406\u3002\n\n\u90a3\u4e48\u8fd9\u4e2a\u95ee\u9898\u53ea\u662f\u5ef6\u4f38\u5230\u4e86\u4e8c\u7ef4\uff0c\u6211\u4eec\u4e8c\u7ef4\u524d\u7f00\u548c\u641e\u641e\u5c31\u597d\u4e86\u3002\n\n\u5047\u8bbe\u5f53\u524d\u6a2a\u957f\u4e3a $i$\uff0c\u7ad6\u957f\u4e3a $j$\uff0c\u5219\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u8f6c\u79fb\u65b9\u7a0b\n\n$val[i][j] = val[i-2][j] + val[i][j-1] - val[i-2][j-1] + valid(i,j);$\n\n\u5176\u4e2d valid \u8868\u793a\u957f\u5bbd\u4e25\u683c\u4e3a $i,j$ \u7684 T \u5f62\u662f\u5426\u5408\u6cd5\u3002\n\n\u4e8e\u662f\u6211\u4eec\u679a\u4e3e\u4e2d\u5fc3\u70b9\u8ba1\u7b97\u5373\u53ef\u3002\n\n\u5177\u4f53\u4e00\u70b9\uff1a\n\n$ans = \\sum\\limits_{i=1}^n \\sum\\limits_{j=1}^m val[min(lx[i][j],rx[i][j])\\times 2-1][yd[i][j]];$\n\n\u4e0d\u52a0\u5934\u6587\u4ef6\u4ee3\u7801 15 \u884c\uff0c\u77ed\u7684\u53ef\u601c\n\n```cpp\nconst int MAXN = 3e3+5;\nconst int MAXM = 1e5+5;\nconst int mod = 1e9+7;\nint dx[4] = {1,0,-1,0}, dy[4] = {0,1,0,-1};\nint n,m,t,pos[MAXN][MAXN],k,a,b,c,lx[MAXN][MAXN],rx[MAXN][MAXN],yd[MAXN][MAXN],val[MAXN][MAXN],s,x,ans;\nsigned main(){\n  n = read(); m =read(); a = read(); b = read(); s = read(); x = read();\n  For(i,1,n) For(j,1,m) pos[i][j] = get()-48;\n  For(i,1,n) For(j,1,m) lx[i][j] = (!pos[i][j]) ? 0 : lx[i][j-1]+1;\n  For(i,1,n) FOR(j,m,1) rx[i][j] = (!pos[i][j]) ? 0 : rx[i][j+1]+1;\n  For(j,1,m) FOR(i,n,1) yd[i][j] = (!pos[i][j]) ? 0 : yd[i+1][j]+1;\n  for (int i=3;i<=m;i+=2)For(j,2,n) val[i][j] = val[i-2][j]+val[i][j-1]-val[i-2][j-1]+(i>=a && j>=b && i*j>=s && i+j>=x);\n  For(i,1,n) For(j,1,m) ans += val[chkmin(lx[i][j],rx[i][j])*2-1][yd[i][j]];\n  writeln(ans);\n}\n```",
        "postTime": 1602195240,
        "uid": 219099,
        "name": "pocafup",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6600 \u3010\u300cEZEC-2\u300d\u5b57\u6bcd\u3011"
    },
    {
        "content": "\u8fd9\u9898\u771f\u7684\u86ee\u4e0d\u9519\u7684\uff0c\u4e3a\u51fa\u9898\u4eba\u70b9\u8d5e\u3002\n\n\u524d\u7f6e\u77e5\u8bc6\uff1a\u524d\u7f00\u548c\u3002\uff08\u4e8c\u7ef4\uff09\n\n\u9996\u5148\u8003\u8651 `T` \u5b57\u5f62\u4e2d\u4e00\u6a2a\u4e0e\u4e00\u7ad6\u7684\u4ea4\u70b9\uff0c\u679a\u4e3e\u90a3\u4e2a\u70b9\u3002\n\n\u90a3\u4e48\uff0c\u5982\u679c\u8981\u4ea7\u751f `T` \u5b57\u5f62\uff0c\u5c31\u8981\u8ba1\u7b97\u51fa\uff1a\n\n$L$\uff0c\u5b83\u5de6\u8fb9\u7684\u8fde\u7eed\u7684 $1$ \u7684\u4e2a\u6570\uff1b$R$\uff0c\u4ed6\u53f3\u8fb9\u8fde\u7eed\u7684 $1$ \u7684\u4e2a\u6570\uff1b$D$\uff0c\u5f80\u4e0b\u7684\u8fde\u7eed\u7684 $1$ \u7684\u4e2a\u6570\u3002\n\n\u90a3\u4e48\u4ea7\u751f\u7684 $T$ \u5b57\u5f62\u7684\u4e2a\u6570\u5c31\u662f $\\min\\{L,R\\}\\times D$\u3002\n\n\u7136\u800c\u51fa\u9898\u4eba\u52a0\u4e86\u9650\u5236\u3002\u8bbe $F(x,y)$ \u4e3a\u6ee1\u8db3 $0 \\le a \\le x,0 \\le b \\le y$ \u7684 $(a,b)$ \u5bf9\u5b50\u6570\uff0c\u5e76\u4e14 $a+b\\ge X,ab \\ge W$\u3002\n\n\u5904\u7406\u51fa\u4e00\u4e2a\u4e0d\u592a\u5bb9\u6613\uff0c\u6240\u4ee5\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6240\u6709\u8fd9\u6837\u7684\u503c\u3002\n\n\u5b9a\u4e49\u4e00\u4e2a `bool` \u7c7b\u578b\u7684\u51fd\u6570 $G(x,y)$ \u8868\u793a $(x,y)$ \u662f\u5426\u6ee1\u8db3 $x+y \\ge X,xy \\ge W$\u3002\u90a3\u4e48 $F$ \u51fd\u6570\u5c31\u662f\u8fd9\u4e2a $G$ \u51fd\u6570\u7684\u524d\u7f00\u548c\u3002\n\n\u6240\u4ee5\uff0c\u6bcf\u4e2a\u4e00\u6a2a\u4e00\u7ad6\u7684\u4ea4\u70b9\u4ea7\u751f\u7684\u7b54\u6848\u5c31\u662f $F(\\min \\{L,R\\},D)$\u3002\u73b0\u5728\u53ea\u7528\u5904\u7406\u51fa $L,R,D$ \u7684\u503c\u5c31\u884c\u4e86\u3002\u8fd9\u4e09\u4e2a\u662f\u7c7b\u4f3c\u7684\uff0c\u8bf4\u4e00\u4e0b $L$\u3002\n\n\u8003\u8651 `dp`\uff0c\u8bb0 $dp_{i,j}$ \u662f $(i,j)$ \u90a3\u4e00\u683c\u5bf9\u5e94\u7684 $L$ \u503c\uff0c\u90a3\u4e48\u663e\u7136\u6709\u8f6c\u79fb\uff1a\n\n$$dp_{i,j}=0((i,j)=0);dp_{i,j}=dp_{i,j-1}((i,j)=1)$$\n\n\u5b8c\u7ed3\u6492\u82b1awa",
        "postTime": 1591508894,
        "uid": 254752,
        "name": "JohnVictor",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6600 \u3010\u300cEZEC-2\u300d\u5b57\u6bcd\u3011"
    },
    {
        "content": "\u8bf4\u70b9\u95f2\u8bdd\uff1a\n\n\u8fd9\u9898\u672c\u6765\u53ea\u6709\u6c42 $w+h$ \u6700\u5927\u7684\u5408\u6cd5 `\u5b57\u6bcdT` \uff0c\u7136\u540e\u88ab\u6211\u4eec\u56e2\u961f\u7684\u4eba\u52a0\u5f3a\u4e86\u53d8\u6210\u6c42\u5408\u6cd5 `\u5b57\u6bcdT` \u7684\u6570\u91cf\uff08\u5373\u73b0\u5728\u7684 $a=b=s=x=0$\uff09\n\n\u7136\u540e\u6211\u60f3\u8fd9\u6709\u5565\u53d8\u5316\uff1f\u5c31\u52a0\u4e0a\u4e86\u9650\u5236\u6761\u4ef6\u3002~~\uff08\u6240\u4ee5\u8fd9\u9898\u5c31\u4ea4\u7ed9\u6211\u8d1f\u8d23\u4e86\uff09~~\n\n------------\n\n\n### 20\u5206\uff1a $O(n^4)$ \u7eaf\u66b4\u529b\u3002\n\n$O(n^2)$\u679a\u4e3e\u4e2d\u5fc3\u70b9\uff0c\u7136\u540e\u6bcf\u4e2a\u4e2d\u5fc3\u70b9 $O(n^2)$ \u679a\u4e3e $w$ \u548c $h$ \u5373\u53ef\u3002\n\n### 40\u5206\uff1a$O(n^3)$ \u9884\u5904\u7406\u3002\n\n\u6211\u4eec\u89c2\u5bdf\u4e0b\u56db\u4e2a\u9650\u5236\u6761\u4ef6\uff0c\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e2a $w$\uff0c\u6211\u4eec\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6700\u5c0f\u7684 $h$ \u4f7f\u5176\u7b26\u5408\u6761\u4ef6\u3002\n\n```\nfor(int w = a + !(a&1); w <= m; w += 2)\tmih[w] = ceil(s*1.0/w), mih[w] = max(b, max(x-w, mih[w]) );\n```\n\n\n\u540c\u65f6\u6211\u4eec\u9884\u5904\u7406\u6bcf\u4e2a\u70b9\u4e0b\u65b9\u8fde\u7eed $1$ \u7684\u6570\u91cf\u3002\n\n```cpp\nfor(int i = n; i >= 1; i--)\n\tfor(int j = 1; j <= m; j++)\t\n\t\tif(mp[i][j]) dw[i][j] = dw[i+1][j] + 1;\n```\n\n\n\u8fd9\u6837\u6211\u4eec\u53ea\u9700 $O(n^2)$ \u679a\u4e3e\u4e2d\u5fc3\u70b9\uff0c\u7136\u540e $O(n)$ \u679a\u4e3e $w$ \u5373\u53ef\u3002\n\n```\nif(mih[w] <= dw[i][j]) ans += dw[i][j] - mih[w] + 1;\n```\n\u5176\u4e2d $dw_{i,j}$ \u8868\u793a\u70b9 $(i,j)$ \u4e0b\u65b9\u8fde\u7eed $1$ \u7684\u6570\u91cf\u3002\uff08\u5305\u62ec\u8fd9\u4e2a\u70b9\uff09\n\n### 50\u5206\uff1a \u8fd8\u662f\u9884\u5904\u7406\u3002\n\n\u8fd9\u6b21\u6211\u4eec\u8fd8\u9700\u8981\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u70b9\u5de6\u8fb9\u548c\u53f3\u8fb9\u8fde\u7eed $1$ \u7684\u4e2a\u6570\u3002\n\n\u5bf9\u4e8e $a=b=s=x=0$\uff0c\u5f88\u660e\u663e\u6211\u4eec\u53ea\u9700\u679a\u4e3e\u4e2d\u5fc3\u70b9\uff0c\u53ea\u8981 $min(l_{i,j},r_{i,j})\\ge 2,dw_{i,j}\\ge 2$ \uff0c\u7b54\u6848\u5c31\u52a0\u4e0a $(min(l_{i,j},r_{i,j}) - 1)\\times (dw_{i,j}-1)$ \u5373\u53ef\u3002\n\n### 65~80\u5206\uff1a~~\u597d\u50cf\u6ca1\u4ec0\u4e48\u7528\u3002~~\n\n### 100\u5206\uff1a $O(n^2)$ \u7b80\u5355\u5bb9\u65a5 + \u524d\u7f00\u548c\u3002\n\n\u6ca1\u6709\u5361 $O(n^2logn)$\uff0c\u56e0\u4e3a\u6ca1\u4ec0\u4e48\u5fc5\u8981\u3002\n\n\u6211\u4eec\u518d\u9884\u5904\u7406\u51fa $mih_i$ \u7684\u524d\u7f00\u548c\uff0c\u8fd8\u6709\u6700\u5927\u7684 $mih_i< h$ \u7684\u4e0b\u6807\u5373\u4e3a $pos_h$\n\n\u6700\u540e\u5c31\u53ea\u9700 $O(n^2)$ \u679a\u4e3e\u4e2d\u5fc3\u70b9\uff0c\u6bcf\u6b21\u628a\u6240\u6709\u65b9\u6848\u6570\u51cf\u53bb\u4e0d\u5408\u6cd5\u7684\u5373\u53ef\u3002\n\n\u5982\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pn5prk3z.png)\n\nCode\uff1a\n\n```cpp\n#include<cmath>\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n#define MAX_N 3005\n#define LL long long\nint n, m;\nLL a, b, s, x;\nLL ans;\nLL dw[MAX_N][MAX_N], l[MAX_N][MAX_N], r[MAX_N][MAX_N], mih[MAX_N], smih[MAX_N], pos[MAX_N];\nbool mp[MAX_N][MAX_N];\nchar cr;\nint main() {\n\tcin >> n >> m >> a >> b >> s >> x;\n\ta = max(a, (LL)3), b = max(b, (LL)2);\n\tfor(int i = 1; i <= n; i++) {\n\t\tcr = getchar();\n\t\twhile(cr != '0' && cr != '1') cr = getchar();\n\t\tmp[i][1] = cr - '0';\n\t\tfor(int j = 2; j <= m; j++) cr = getchar(), mp[i][j] = cr - '0';\n\t}\n\t\n\tfor(int i = 1; i <= n; i++)\tfor(int j = 1; j <= m; j++)\tif(mp[i][j]) l[i][j] = l[i][j-1] + 1;\n\tfor(int i = 1; i <= n; i++)\tfor(int j = m; j >= 1; j--)\tif(mp[i][j]) r[i][j] = r[i][j+1] + 1;\n\tfor(int i = n; i >= 1; i--)\tfor(int j = 1; j <= m; j++)\tif(mp[i][j]) dw[i][j] = dw[i+1][j] + 1;\n\t\n\tfor(int w = a + !(a&1); w <= m; w += 2)\n\t\tmih[w] = ceil(s*1.0/w), mih[w] = max(b, max(x-w, mih[w]) ), smih[w] = smih[w-2] + mih[w];\n\tint tp = a + !(a&1);\n\tfor(int h = n; h >= b; h--) {\n\t\twhile(tp <= m && mih[tp] > h) tp += 2;\n\t\tpos[h] = tp;\n\t}\n\tfor(int i = 1; i <= n; i++)\n\t\tfor(int j = 1; j <= m; j++)\n\t\t\tif(mp[i][j] && dw[i][j] >= b) {\n\t\t\t\tint ma = 2 * min(l[i][j], r[i][j]) - 1, h = dw[i][j];\n\t\t\t\tif(pos[h] <= ma) ans += (ma - pos[h] + 2) / 2 * (h + 1) - smih[ma] + smih[pos[h]-2];\n\t\t\t}\n\t\t\t\n\tcout<<ans;\n}\n```\n\n\n------------",
        "postTime": 1589030876,
        "uid": 250469,
        "name": "\u541b\u306eNOIP\u3002",
        "ccfLevel": 6,
        "title": "\u300cEZEC-2\u300d\u5b57\u6bcd"
    },
    {
        "content": "upd on 2021.9.11 \u6dfb\u52a0\u7684\u4ee3\u7801\uff0c\u5e76\u6dfb\u52a0\u4e86\u90e8\u5206\u7ec6\u8282\u3002\n\n#### Description\n\n> \u7ed9\u5b9a\u4e00\u4e2a $n \\times m$ \u7684 01 \u77e9\u9635\uff0c\u6c42\u6709\u591a\u5c11\u4e2a\u6a2a\u753b $w$ \u7ad6\u753b $h$ \u6ee1\u8db3\uff1a\n>\n> - $w \\ge a$\uff1b\n> - $h \\ge b$\uff1b\n> - $wh \\ge s$\uff1b\n> - $w+h \\ge x$\uff1b\n>\n> \u8fd9\u4e9b\u6761\u4ef6\u7684 T \u5f62\u5757\u3002\n\n#### Solution\n\n\u7b2c\u4e00\u773c\u611f\u89c9\u662f dp\uff0c\u5b9e\u9645\u4e0a\u6574\u4e2a\u601d\u8def\u5f88\u50cf dp\uff0c\u4f46\u5176\u5b9e\u662f\u524d\u7f00\u548c\u3002\n\n\u679a\u4e3e $(i,j)$\uff0c\u8003\u8651\u5bf9\u4e8e\u6bcf\u4e2a\u683c\u5b50\u5411\u5de6\uff0c\u5411\u53f3\uff0c\u5411\u4e0b\u5206\u522b\u80fd\u5ef6\u4f38\u51fa\u591a\u957f\u7684\u5168\u4e3a $1$ \u7684\u6761\u3002\n\n\u8bbe $f^{(1)}_{i,j}$ \u4e3a $(i,j)$ \u5411\u5de6\u6700\u591a\u80fd\u5ef6\u4f38\u591a\u957f\uff0c$f^{(2)}_{i,j}$ \u4e3a $(i,j)$ \u5411\u53f3\u6700\u591a\u80fd\u5ef6\u4f38\u591a\u957f\uff0c$f^{(3)}_{i,j}$ \u4e3a $(i,j)$ \u5411\u4e0b\u6700\u591a\u80fd\u5ef6\u4f38\u591a\u957f\uff0c\u8fd9\u4e2a\u8f6c\u79fb\u8d77\u6765\u5e94\u8be5\u6bd4\u8f83\u5bb9\u6613\uff1a\n\n$$\\begin{aligned}f^{(1)}_{i,j}&=[(i,j)=1](f^{(1)}_{i,j-1}+1)\\\\f^{(2)}_{i,j}&=[(i,j)=1](f^{(2)}_{i,j+1}+1)\\\\f^{(3)}_{i,j}&=[(i,j)=1](f^{(3)}_{i+1,j}+1)\\end{aligned}$$\n\n\u5982\u679c\u6ca1\u6709\u9898\u76ee\u6700\u540e\u7684\u56db\u4e2a\u9650\u5236\uff0c\u90a3\u4e48\u5bf9\u4e8e $(i,j)$ \u6765\u8bf4\uff0c\u7b54\u6848\u5373\u4e3a $\\min\\{f^{(1)}_{i,j},f^{(2)}_{i,j}\\} \\times f^{(3)}_{i,j}$\uff08\u7b80\u5355\u4e58\u6cd5\u539f\u7406\uff09\u3002\n\n\uff08\u5bf9\u4e8e\u9898\u76ee\u65b0\u6dfb\u52a0\u7684\u56db\u4e2a\u9650\u5236\u7684\u5904\u7406\u53c2\u8003 [JohnVictor](https://www.luogu.com.cn/user/254752) \u5de8\u4f6c\u7684\u9898\u89e3\uff09\n\n\u8bbe $g(w,h)$ \u4e3a\u6ee1\u8db3\uff1a\n\n- $3 \\le i \\le w$\uff1b\n- $2 \\le j \\le h$\uff1b\n- $ij \\ge s$\uff1b\n- $i+j \\ge x$\u3002\n\n\u7684\u70b9\u5bf9\u4e2a\u6570\uff0c\u5bf9\u4e8e $(i,j)$ \u6765\u8bf4\u5373\u4e3a $g(\\min\\{f^{(1)}_{i,j},f^{(2)}_{i,j}\\},f^{(3)}_{i,j})$\uff0c\u4e0b\u9762\u7684\u95ee\u9898\u5c31\u662f\u600e\u4e48\u5904\u7406 $g$ \u51fd\u6570\u3002\n\n\u8bbe $g'(w,h)$ \u4e3a $(w,h)$ \u662f\u5426\u6ee1\u8db3 $wh \\ge s$\uff0c$w+h \\ge x$\uff0c\u6211\u4eec\u53d1\u73b0 $g(w,h)$ \u5373\u4e3a $g'(w,h)$ \u7684\u524d\u7f00\u548c\uff0c\u7136\u540e\u6211\u4eec\u5c31\u5904\u7406\u597d\u4e86\u3002\n\n\u6700\u540e\u7684\u7b54\u6848\u5373\u4e3a\uff1a\n\n$$\\sum\\limits_{i=1}^n\\sum\\limits_{j=1}^mg(\\min\\{f^{(1)}_{i,j},f^{(2)}_{i,j}\\} \\times 2-1,f^{(3)}_{i,j})$$\n\n\u603b\u4e4b\u8fd9\u9898\u662f\u4e00\u9053\u975e\u5e38\u4f18\u79c0\u6e05\u65b0\u7684\u9898\u76ee\uff0c\u6574\u4e2a\u9898\u76ee\u4e5f\u505a\u8d77\u6765\u5f88\u8212\u670d\uff0c~~\u4e0d\u50cf\u73b0\u5728 EZEC \u90fd\u51fa\u7684\u4ec0\u4e48\u5927\u6bd2\u7624\u9898~~\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(nm)$\u3002\n\n\u6700\u540e\u6ce8\u610f\u6709\u4e00\u4e9b\u7ec6\u8282\uff0c\u5c31\u662f\u5728\u9884\u5904\u7406 $g'$ \u51fd\u6570\u65f6\u8981\u6ce8\u610f T \u5f62\u5757\u5bbd\u5ea6\u5fc5\u987b\u662f\u5947\u6570\uff0c\u5e76\u4e14\u6700\u77ed\u5bbd\u662f $3$ \u957f\u662f $2$\u3002\n\n#### Code\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\n\nusing namespace std;\n\nint n, m;\nint a, b, s, x;\nint A[3005][3005];\nchar S[3005];\nint f1[3005][3005];\nint f2[3005][3005];\nint f3[3005][3005];\nint g[3005][3005];\n\nint g1 (int w, int h) {\n\tif (w % 2 == 0) return 0;\n\tif (w * h < s) return 0;\n\tif (w + h < x) return 0;\n\treturn 1;\n}\n\nsigned main () {\n\tscanf(\"%lld%lld%lld%lld%lld%lld\", &n, &m, &a, &b, &s, &x);\n\tfor (int i = 1; i <= n; i++) {\n\t\tscanf(\"%s\", S);\n\t\tfor (int j = 0; j < strlen(S); j++) \n\t\t\tA[i][j + 1] = (long long)(S[j] - '0');\n\t}\n//\tfor (int i = 1; i <= n; i++) {\n//\t\tfor (int j = 1; j <= m; j++)\n//\t\t\tprintf(\"%d \", A[i][j]);\n//\t\tputs(\"\");\n//\t}\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tif (A[i][j] == 0) continue;\n\t\t\telse f1[i][j] = f1[i][j - 1] + 1;\n//\tfor (int i = 1; i <= n; i++) {\n//\t\tfor (int j = 1; j <= m; j++)\n//\t\t\tprintf(\"%d \", f1[i][j]);\n//\t\tputs(\"\");\n//\t}\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = m; j >= 1; j--)\n\t\t\tif (A[i][j] == 0) continue;\n\t\t\telse f2[i][j] = f2[i][j + 1] + 1;\n//\tfor (int i = 1; i <= n; i++) {\n//\t\tfor (int j = 1; j <= m; j++)\n//\t\t\tprintf(\"%d \", f2[i][j]);\n//\t\tputs(\"\");\n//\t}\n\tfor (int i = n; i >= 1; i--)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tif (A[i][j] == 0) continue;\n\t\t\telse f3[i][j] = f3[i + 1][j] + 1;\n//\tfor (int i = 1; i <= n; i++) {\n//\t\tfor (int j = 1; j <= m; j++)\n//\t\t\tprintf(\"%d \", f3[i][j]);\n//\t\tputs(\"\");\n//\t}\n\tfor (int w = max(3ll, a); w <= m; w++)\n\t\tfor (int h = max(2ll, b); h <= n; h++)\n\t\t\tg[w][h] = g[w - 1][h] + g[w][h - 1] - g[w - 1][h - 1] + g1(w, h);\n\tint ans = 0;\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tif (A[i][j] == 0) continue;\n\t\t\telse ans += g[(min(f1[i][j], f2[i][j])) * 2 - 1][f3[i][j]];\n//\tfor (int i = 1; i <= n; i++) {\n//\t\tfor (int j = 1; j <= m; j++)\n//\t\t\tif (A[i][j] == 0) printf(\"0 \");\n//\t\t\telse printf(\"%d \", g[(min(f1[i][j], f2[i][j])) * 2 - 1][f3[i][j]]);\n//\t\tputs(\"\");\n//\t}\n//\tfor (int i = 1; i <= m; i++) {\n//\t\tfor (int j = 1; j <= n; j++)\n//\t\t\tprintf(\"%d \", g[i][j]);\n//\t\tputs(\"\");\n//\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1630851882,
        "uid": 114914,
        "name": "\u4e00\u53ea\u4e66\u866b\u4ed4",
        "ccfLevel": 4,
        "title": "P6600 \u9898\u89e3"
    },
    {
        "content": "\u4e00\u9053\u597d\u9898QAQ\u3002\n\n\u5148\u5410\u69fd\u4e00\u53e5\uff0c\u8fd9\u9898\u771f\u7684\u662f\u5361\u5e38/dk\u3002\n\n$n^3$ \u7684\u601d\u8def\u5f88\u597d\u60f3\uff0c\u8fd9\u91cc\u4e0d\u518d\u9610\u8ff0\u3002\n\n\u8fd9\u91cc\u6765\u8bb2\u4e00\u8bb2 $\\mathcal{O(nm\\log nm+n^2)}$ \u7684\u65b9\u6cd5\u3002\n\n\u8bbe $hang_{i,j}$ \u8868\u793a\u4ee5\u7b2c $i$ \u884c\u7b2c $j$ \u5217\u7684\u5b57\u6bcd\u4e3a\u6a2a\u957f\u548c\u7ad6\u957f\u7684\u516c\u5171\u90e8\u5206\u6700\u591a\u80fd\u5411\u4e24\u8fb9\u6700\u591a\u6269\u5c55\u591a\u957f\u3002(\u5f53\u7136\u8be5\u5b57\u6bcd\u4e3a `1` \u65f6\u624d\u80fd\u6269\u5c55\uff0c\u6269\u5c55\u7684\u957f\u5ea6\u4e0d\u5305\u62ec\u81ea\u5df1)\n\n\u8bbe $lie_{i,j}$ \u8868\u793a\u4ee5\u7b2c $i$ \u884c\u7b2c $j$ \u5217\u7684\u5b57\u6bcd\u4e3a\u6a2a\u957f\u548c\u7ad6\u957f\u7684\u516c\u5171\u90e8\u5206\u6700\u591a\u80fd\u5411\u4e0b\u6700\u591a\u6269\u5c55\u591a\u957f\u3002(\u5f53\u7136\u8be5\u5b57\u6bcd\u4e3a `1` \u65f6\u624d\u80fd\u6269\u5c55\uff0c\u6269\u5c55\u7684\u957f\u5ea6\u5305\u62ec\u81ea\u5df1)\n\n$hang,lie$ \u6570\u7ec4\u90fd\u53ef\u4ee5\u5728 $\\mathcal{nm}$ \u7684\u65f6\u95f4\u5185\u7b97\u51fa\u6765\u3002\n\n\u53d1\u73b0\u679a\u4e3e\u6a2a\u957f\u4e0d\u592a\u597d\u8ba1\u7b97\uff0c\u4e8e\u662f\u679a\u4e3e `T` \u5b57\u6bcd\u7684\u7ad6\u957f\u3002\n\n\u5f00\u4e2a `vector` \u6570\u7ec4 `G[3005]`\uff0c\u7528 $G_i$ \u5b58\u4e0b\u7ad6\u957f\u4e3a $i$ \u7684\u6a2a\u957f\u3002\n\n\u679a\u4e3e\u7ad6\u957f $i(b \\le i \\le n)$\uff0c\u7136\u540e\u53ef\u4ee5\u7b97\u51fa\u6a2a\u957f\u7684\u8303\u56f4 $j$ \u4e3a $\\frac {\\max(a,x-i,\\lceil \\frac{s}{i}\\rceil)}{2}$\uff0c\u7136\u540e\u679a\u4e3e `vector` $G_i$ \u5185\u7684\u5143\u7d20\u6bd4\u8fd9\u4e2a $j$ \u5927\u5c31\u52a0\u4e0a\u8d21\u732e\u3002\n \n\u56e0\u4e3a\u7ad6\u957f\u6bd4i\u5927\u7684\u4f4d\u7f6e\u53ef\u4ee5\u9020\u6210\u8d21\u732e\uff0c\u6240\u4ee5\u4e5f\u8981\u679a\u4e3e\u7b97\u8d21\u732e\u3002\n\n\u66b4\u529b\u4ee3\u7801\n```cpp\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tG[lie[i][j]].push_back(hang[i][j]); \n\tfor(int i=b;i<=n;i++){\n\t\tint minn=max(a,max(x-i,(int)ceil(s*1.0/i)));\n\t\tif(minn%2==0)minn++;\n        minn/=2;\n\t\tfor(int j=i;j<=n;j++){\n\t\t\tfor(int k=0;k<G[j].size();k++){\n\t\t\t\tint f=G[j][k];\n\t\t\t\tif(f<minn)continue;\n\t\t\t\tans+=(f-minn)+1;\n\t\t\t}\n\t\t}\n\t}\n```\n\u600e\u4e48\u4f18\u5316\u5462\uff0c\u5c06\u6bcf\u4e2a `vector` \u6570\u7ec4\u6392\u5e8f\u524d\u7f00\u548c\u4e00\u4e0b\uff0c\u7136\u540e\u4e8c\u5206\u3002\u4f46\u662f\u8fd9\u6837\u8fd8\u662f\u4f1a\u8d85\u65f6\uff0c\u771f\u7684\u662f\u592a\u5361\u5e38\u4e86QAQ\u3002\u53d1\u73b0\u6a2a\u957f\u7684\u8303\u56f4 `j` \u662f\u4e0b\u964d\u7684\uff0c\u4e8e\u662f\u5bf9\u4e8e\u6bcf\u4e2a `vector` \u6570\u7ec4\u5f00\u4e2a\u6307\u9488\u7136\u540e\u6bcf\u6b21\u80fd\u5411\u5de6\u79fb\u52a8\u5c31\u79fb\u52a8\u3002\n\n\u732e\u4e0a\u6211\u4e11\u964b\u7684\u4ee3\u7801\u3002\n```cpp\n#include <queue>\n#include <cstdio>\n#include <cmath>\n#include <vector>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define LL long long\nint n,m,a,b,s,x,hang[3005][3005],lie[3005][3005],l[3005],Size[3005];\nbool f[3005][3005];\nLL ans;\nvector<int>G[3005],qzh[3005];\nint main() {\n\tscanf(\"%d %d %d %d %d %d\",&n,&m,&a,&b,&s,&x);\n\ta=max(a,3),b=max(b,2);\n\tchar c;\n\tfor(int i=1;i<=n;i++) {\n        c=getchar();\n        while(c!='0'&&c!='1') c=getchar();\n        f[i][1]=c-'0';\n        for(int j=2;j<=m;j++) c=getchar(),f[i][j]=c-'0';\n    }\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(f[i][j]){\n\t\t\t\tint st=j,ed=j;\n\t\t\t\twhile(f[i][ed+1]&&ed<m)ed++;\n\t\t\t\tfor(int k=st;k<=ed;k++)hang[i][k]=min(ed-k,k-st);\n\t\t\t\tj=ed;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(f[i][j]){\n\t\t\t\tif(lie[i][j])continue;\n\t\t\t\tint st=i,ed=i;\n\t\t\t\twhile(f[ed+1][j]&&ed<n)ed++;\n\t\t\t\tfor(int k=st;k<=ed;k++)lie[k][j]=ed-k+1;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=b;i<=n;i++)G[i].push_back(0),qzh[i].push_back(0);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tif(f[i][j]&&hang[i][j])\n\t\t\t\tG[lie[i][j]].push_back(hang[i][j]); \n\tfor(int i=b;i<=n;i++)sort(G[i].begin(),G[i].end());\n\tfor(int i=b;i<=n;i++){\n\t\tl[i]=G[i].size(),Size[i]=G[i].size()-1;\n\t\tfor(int j=1;j<G[i].size();j++)\n\t\t\tqzh[i].push_back(qzh[i][j-1]+G[i][j]);\n\t}\n\tfor(int i=b;i<=n;i++){\n\t\tint minn=max(a,max(x-i,(int)ceil(s*1.0/i)));\n\t\tif(minn%2==0)minn++;\n\t\tminn/=2;\n\t\tfor(int j=i;j<=n;j++){\n\t\t\tif(minn==1){\n\t\t\t\tans+=qzh[j][Size[j]];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(G[j][Size[j]]<minn)continue;\n\t\t\twhile(l[j]>1&&G[j][l[j]-1]>=minn)l[j]--;\n\t\t\tint Ans=l[j];\n\t\t\tans=ans+(LL)((LL)(qzh[j][Size[j]]-qzh[j][Ans-1]-(LL)minn*(LL)(Size[j]-Ans+1))+Size[j]-Ans+1);\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n    return 0;\n}\n```\n\n~~\u6700\u540e\u8bf7\u5f00\u4e2a\u706b\u8f66\u5934\uff0c\u4e0d\u7136\u4f1a T \u7206\u3002~~",
        "postTime": 1591503785,
        "uid": 154560,
        "name": "Silver187",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P6600 \u3010\u300cEZEC-2\u300d\u5b57\u6bcd\u3011"
    }
]
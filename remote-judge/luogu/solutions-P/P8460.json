[
    {
        "content": "\u9996\u5148\u8003\u8651\u9759\u6001\u65f6\uff0c\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u4ee5\u9ed1\u70b9\u4f5c\u4e3a\u9876\u70b9\u7684\u6240\u6709\u8fb9\u5747\u5e73\u884c\u4e8e\u7f51\u683c\u7684\u591a\u8fb9\u5f62\u5982\u4f55\u5224\u65ad\uff0c\u6ce8\u610f\u5230\uff0c\u6761\u4ef6\u5176\u5b9e\u5c31\u662f\u5b58\u5728\u4e00\u4e2a\u8fb9\u5e73\u884c\u4e8e\u7f51\u683c\u7684\u73af\uff0c\u90a3\u4e48\u6211\u4eec\u5c06\u6bcf\u4e2a\u70b9\u770b\u505a\u8fde\u63a5\u884c $ i $ \u4e0e\u5217 $ j $ \u7684\u8fb9\uff0c\u5f53\u5b58\u5728\u73af\u65f6\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u7136\u540e\u8003\u8651\u52a8\u6001\u7684\uff0c\u6211\u4eec\u53ea\u8981\u5c06\u4fee\u6539\u64cd\u4f5c\u4e22\u5230\u7ebf\u6bb5\u6811\u4e0a\uff0c\u7ebf\u6bb5\u6811\u5206\u6cbb\u4e00\u4e0b\uff0c\u7528\u53ef\u64a4\u9500\u7684\u5e76\u67e5\u96c6\u6765\u5224\u73af\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n#include<bits/stdc++.h>\n# define N (500005)\n# define mid (l+r>>1)\nusing namespace std;\ninline int rd(){\n\tchar c=getchar();int sum=0,f=1;\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n\twhile(c<='9'&&c>='0'){sum=(sum<<3)+(sum<<1)+(c^48);c=getchar();}\n\treturn sum*f;\n}\nint u[N],v[N],n,m,k,f[N],d[N];\nstruct node{\n\tint l,r;\n\tvector<pair<int,int> >v;\n}t[N];\nmap<pair<int,int>,int>mp;\nstack< pair<int,int> >cl;\nint find(int x){\n\twhile(x^f[x])x=f[x];\n\treturn x;\n}\nvoid build(int p,int l,int r){\n\tt[p].l=l;t[p].r=r;\n\tif(l==r)return;\n\tbuild(p<<1,l,mid);build(p<<1|1,mid+1,r);\n\treturn;\n}\nvoid update(int p,int l,int r,pair<int,int> x){\n\tif(t[p].l>r||t[p].r<l)return;\n\tif(t[p].l>=l&&t[p].r<=r){\n\t\tt[p].v.push_back(x);\n\t\treturn;\n\t}\n\tupdate(p<<1,l,r,x);\n\tupdate(p<<1|1,l,r,x);\n\treturn;\n}\nvoid merge(int x,int y){\n\tx=find(x),y=find(y);\n\tif(d[x]>d[y])swap(x,y);\n\tcl.push(make_pair(x,d[x]==d[y]));\n\tf[x]=y;d[y]+=(d[x]==d[y]);\n}\nvoid dfs(int p,int l,int r){\n\tbool flag=1;\n\tint st=cl.size(),x,y;\n\tfor(int i=0;i<t[p].v.size();++i){\n\t\tpair<int,int> s=t[p].v[i];\n\t\tx=find(s.first);y=find(s.second);\n\t\tif(x==y){\n\t\t\tflag=0;\n\t\t\tfor(int j=l;j<=r;++j)\n\t\t\t\tprintf(\"Yes\\n\");\n\t\t\tbreak;\n\t\t}\n\t\tmerge(s.first,s.second);\n\t}\n\tif(flag){\n\t\tif(l==r)printf(\"No\\n\");\n\t\telse {\n\t\t\tdfs(p<<1,l,mid);\n\t\t\tdfs(p<<1|1,mid+1,r);\n\t\t}\n\t}\n\twhile(cl.size()>st){\n\t\tx=cl.top().first;\n\t\ty=cl.top().second;\n\t\tf[x]=x;d[x]-=y;\n\t\tcl.pop();\n\t}\n}\nsigned main(){\n\tint x,y;\n\tn=rd();m=rd();\n\tfor(int i=1;i<=2*n;++i)f[i]=i;\n\tfor(int i=1;i<=m;++i){\n\t\tx=rd();y=rd()+n;\n\t\tmp[make_pair(x,y)]=1;\n\t}\n\tk=rd();\n\tbuild(1,1,k);\n\tfor(int i=1;i<=k;++i){\n\t\tx=rd();y=rd()+n;\n\t\tif(mp[make_pair(x,y)]){\n\t\t\tupdate(1,mp[make_pair(x,y)],i-1,make_pair(x,y));\n\t\t\tmp.erase(make_pair(x,y));\n\t\t}else mp[make_pair(x,y)]=i;\n\t}\n\tfor(auto i=mp.begin();i!=mp.end();++i)\n\t\tupdate(1,i->second,k,i->first);\n\tdfs(1,1,k);\n\treturn 0;\n}\n```\n",
        "postTime": 1659266274,
        "uid": 211086,
        "name": "bsTiat",
        "ccfLevel": 0,
        "title": "P8460 \u6309\u6469 \u9898\u89e3"
    },
    {
        "content": "\u7b80\u7565\u7248\uff1a\r\n\r\n\u5c06\u6bcf\u4e2a\u70b9 $(i,j)$ \u770b\u505a\u8fde\u63a5\u884c $i$ \u4e0e\u5217 $j$ \u7684\u8fb9\uff0c\u5f53\u8fb9\u6784\u6210\u73af\u65f6\u5219\u7b26\u5408\u6761\u4ef6\u3002\r\n\r\n\u5c06\u4fee\u6539\u64cd\u4f5c\u4e22\u5230\u7ebf\u6bb5\u6811\u4e0a\uff0c\u4f7f\u7528\u5e76\u67e5\u96c6\u5224\u65ad\u56fe\u662f\u5426\u6210\u73af\u5373\u53ef\u3002",
        "postTime": 1656507984,
        "uid": 124918,
        "name": "LinkyChristian",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011 \u6309\u6469"
    },
    {
        "content": "### Problem\n\n\u7ed9\u4f60 $n\\times n$ \u7684\u7f51\u683c\u56fe\uff0c\u521d\u59cb\u6709 $m$ \u4e2a\u70b9\uff0c\u5e76\u4e14\u52a8\u6001\u52a0\u70b9\u5220\u70b9\uff0c\u95ee\u4f60 $k$ \u4e2a\u65f6\u523b\u5185\u6bcf\u4e2a\u65f6\u523b\u662f\u4e0d\u662f\u6709\u4e00\u4e2a\u5e73\u884c\u4e8e\u7f51\u683c\u7ebf\u7684\u73af\u3002\n\n$1 \\leq n, m, k \\leq 10^5$\u3002\n\n### Solution\n\n[\u7ebf\u6bb5\u6811\u5206\u6cbb](https://www.luogu.com.cn/problem/P5787) \u677f\u5b50\u9898\u3002\n\n\u7f51\u683c\u56fe\u53ef\u4ee5\u5957\u8def\u5f0f\u7684\u8f6c\u5316\u4e3a\u4e8c\u5206\u56fe\uff0c\u5171\u6709 $n$ \u884c\u548c $n$ \u5217\u3002\u8fd9\u6837\u4e00\u4e2a\u70b9\u7684\u52a0\u5165\u548c\u5220\u9664\u53ef\u4ee5\u7528\u5e26\u4fee\u5e76\u67e5\u96c6\u8f7b\u677e\u5730\u7ef4\u62a4\u3002\n\n\u6ce8\u610f\u5230\u6ca1\u6709\u73af\u8f6c\u5316\u4e3a\u6709\u73af\u662f\u5bb9\u6613\u5224\u5b9a\u7684\uff0c\u6709\u73af\u8f6c\u5316\u4e3a\u65e0\u73af\u611f\u89c9\u4e0d\u5982\u66b4\u529b\u597d\u5199\uff0c\uff0c\uff0c\n\n\u6240\u4ee5\u5c31\u53ef\u4ee5\u53d8\u6210\u7ebf\u6bb5\u6811\u5206\u6cbb\uff0c\u628a\u6bcf\u6761\u8fb9\u7684\u51fa\u73b0\u65f6\u95f4\u6254\u5230\u7ebf\u6bb5\u6811\u4e0a\uff0c\u5728\u8fdb\u5165\u6bcf\u4e2a\u65f6\u95f4\u6bb5\u8282\u70b9\u7684\u65f6\u5019\u53ea\u6709\u52a0\u8fb9\uff0c\u8fd9\u4e2a\u5f88\u597d\u7ef4\u62a4\uff0c\u5982\u679c\u6709\u73af\u5c31\u8f93\u51fa $r - l + 1$ \u4e2a `Yes` \u5373\u53ef\uff0c\u6700\u540e\u53ca\u65f6\u64a4\u9500\uff1b\u5230\u4e86\u53f6\u5b50\u8282\u70b9\u5c31\u8f93\u51fa `No` \u505c\u6b62\u9012\u5f52\u3002\n\n\u6ce8\u610f\uff0cMLE 70 \u7684\u53ef\u80fd\u539f\u56e0\u662f\u7b2c\u4e00\u6b21\u64cd\u4f5c\u4e3a\u5220\u70b9\uff0c\u8fd9\u6837\u4f60\u5c31\u4f1a\u8bd5\u56fe\u63d2\u5165\u4e00\u4e2a\u51fa\u73b0\u65f6\u95f4\u6bb5\u4e3a $[1, 0]$ \u7684\u8fb9\uff0c\u663e\u7136\u9012\u5f52\u4e0b\u53bb\u4f60\u6b7b\u4e86\u3002\n\n### Code\n\n```cpp\n#include <bits/stdc++.h>\n\n#define MAXN 100001\nint det[MAXN << 1], fa[MAXN << 1];\ninline int find(int x) {\n\twhile (x != fa[x]) x = fa[x];\n\treturn x;\n}\n\nstd::stack<std::pair<int, int>> s;\ninline void merge(int x, int y) {\n\tx = find(x), y = find(y);\n\tif (det[x] > det[y]) std::swap(x, y);\n\tfa[x] = y, det[y] += (det[x] == det[y]);\n\ts.push({x, y});\n}\ninline void split(int x, int y) { fa[x] = x, det[y] -= (det[x] == det[y]); }\n\nint N, M, K;\nstd::vector<std::pair<int, int>> e[MAXN << 2];\nvoid add(int x, int y, int l, int r, int ql = 1, int qr = K, int pos = 1) {\n\tif (l > r) return;\n\tif (l <= ql && qr <= r) return (void)(e[pos].push_back({x, y}));\n\tint mid = ql + qr >> 1, lc = pos << 1, rc = lc | 1;\n\tif (l <= mid) add(x, y, l, r, ql, mid, lc);\n\tif (mid < r) add(x, y, l, r, mid + 1, qr, rc);\n}\nvoid dfs(int l = 1, int r = K, int pos = 1) {\n//\tstd::cout << pos << '\\n';\n//\tfor (auto i : e[pos]) std::cout << i.first << ' ' << i.second << '\\n';\n\tbool flag = false;\n\tint o = s.size();\n\tfor (auto i : e[pos]) {\n\t\tif ((flag = find(i.first) == find(i.second))) break;\n\t\tmerge(i.first, i.second);\n\t}\n\tif (flag) {\n\t\tfor (int i = l; i <= r; ++i) puts(\"Yes\");\n\t} else if (l == r) {\n\t\tputs(\"No\");\n\t} else {\n\t\tint mid = l + r >> 1, lc = pos << 1, rc = lc | 1;\n\t\tdfs(l, mid, lc), dfs(mid + 1, r, rc);\n\t}\n\twhile (s.size() > o) split(s.top().first, s.top().second), s.pop();\n}\n\nstd::map<std::pair<int, int>, int> mp;\nint main() {\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(nullptr), std::cout.tie(nullptr);\n\tstd::cin >> N >> M;\n\tfor (int i = 1; i <= N * 2; ++i) fa[i] = i, det[i] = 1;\n\tfor (int i = 1, x, y; i <= M; ++i) \n\t\tstd::cin >> x >> y, mp[{x, y + N}] = 1;\n\tstd::cin >> K;\n\tfor (int i = 1, x, y; i <= K; ++i) {\n\t\tstd::cin >> x >> y;\n\t\tif (mp[{x, y + N}]) {\n\t\t\tadd(x, y + N, mp[{x, y + N}], i - 1), mp.erase({x, y + N});\n\t\t} else mp[{x, y + N}] = i;\n\t}\n\tfor (auto i : mp) add(i.first.first, i.first.second, i.second, K);\n\treturn dfs(), 0;\n}\n```",
        "postTime": 1674526345,
        "uid": 419487,
        "name": "irris",
        "ccfLevel": 7,
        "title": "P8460 Solution"
    },
    {
        "content": "\u548c[\u8fd9\u9053\u9898](https://codeforces.com/problemset/problem/1140/F)\u5dee\u4e0d\u591a\uff0c\u90fd\u662f\u7f51\u683c\u56fe\u8f6c\u4e8c\u5206\u56fe\u7684\u5957\u8def\uff0c\u8fd9\u9898\u66f4\u677f\u4e00\u4e9b\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u4e2a\u70b9 $(x,y)$ \u770b\u6210\u4e8c\u5206\u56fe\u4e2d\u4e00\u6761\u8fde\u63a5\u5de6\u90e8 $L_x$\uff0c\u53f3\u90e8 $R_y$ \u7684\u8fb9\u3002\u7b26\u5408\u6761\u4ef6\u7684\u683c\u70b9\u591a\u8fb9\u5f62\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u73af\u3002\n\n\u5982\u679c\u53ea\u6709\u52a0\u8fb9\u64cd\u4f5c\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5e76\u67e5\u96c6\u5224\u73af\u3002\u4f46\u662f\u73b0\u5728\u6709\u4e86\u5220\u8fb9\u7684\u64cd\u4f5c\u3002\n\n\u7531\u4e8e\u53d6\u53cd\u6b21\u6570\u6709\u9650\uff0c\u6bcf\u6761\u8fb9 $(L_{x},R_{y})$ \u5728\u65f6\u95f4\u8f74\u4e0a\u7684\u51fa\u73b0\u662f\u82e5\u5e72\u4e2a\u533a\u95f4\u7684\u5f62\u5f0f\uff0c\u603b\u7684\u533a\u95f4\u4e2a\u6570\u4e0d\u8d85\u8fc7 $O(k)$\u3002\n\n\u8fd9\u5c31\u76f8\u5f53\u4e8e\u533a\u95f4\u4fee\u6539\uff0c\u53ef\u4ee5\u4f7f\u7528\u6807\u8bb0\u6c38\u4e45\u5316\u7684\u601d\u60f3\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u957f\u5ea6 $O(k)$ \u7684\u533a\u95f4\uff0c\u5728\u7ebf\u6bb5\u6811\u4e0a\u6253 $\\log k$ \u4e2a\u6807\u8bb0\u3002\n\n\u6700\u540e\u904d\u5386\u6574\u68f5\u7ebf\u6bb5\u6811\uff0c\u8de8\u5b50\u6811\u4e4b\u95f4\u6ca1\u6709\u8d21\u732e\uff0c\u76f4\u63a5\u4f7f\u7528\u53ef\u64a4\u9500\u5e76\u67e5\u96c6\u5373\u53ef\u3002\n\n\u8fd9\u79cd\u501f\u52a9\u7ebf\u6bb5\u6811\u7684\u5206\u6cbb\u7ed3\u6784\uff0c\u628a\u5220\u9664\u53d8\u6210\u589e\u52a0\u64a4\u9500\u64cd\u4f5c\u7684\u6280\u5de7\u53eb\u505a\u7ebf\u6bb5\u6811\u5206\u6cbb\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(k\\log k\\log n)$\u3002\n\n```cpp\n#include <bits/stdc++.h>\nnamespace mystd {\n\tinline int read() {\n\t    char c = getchar();\n\t    int x = 0, f = 1;\n\t    while (c < '0' || c > '9') f = (c == '-') ? -1 : f, c = getchar();\n\t    while (c >= '0' && c <= '9') x = (x << 1) + (x << 3) + c - '0', c = getchar();\n\t    return x * f;\n\t}\n\tinline void write(int x) {\n\t    if (x < 0) x = ~(x - 1), putchar('-');\n\t    if (x > 9) write(x / 10);\n\t    putchar(x % 10 + '0');\n\t}\n}\nusing namespace std;\nusing namespace mystd;\n\n#define pi pair<int, int>\n#define mp make_pair\n#define fi first\n#define se second\n\nconst int maxn = 1e5 + 100;\nint n, m, k, pr[maxn << 1], sz[maxn << 1];\nmap<pi, int> lst;\nvector<pi> tr[maxn << 2];\nstack<int> op;\npi q[maxn];\n\nint getf(int x) { return x == pr[x] ? x : getf(pr[x]); }\nvoid merge(int x, int y) {\n\tx = getf(x), y = getf(y);\n\tif (x == y) return;\n\tif (sz[x] < sz[y]) swap(x, y);\n\tpr[y] = x, op.push(y), sz[x] += sz[y];\n}\n\nvoid del(int tp) {\n\twhile (op.size() > tp) {\n\t\tint x = op.top(); op.pop();\n\t\tsz[pr[x]] -= sz[x], pr[x] = x;\n\t}\n}\n\n#define ls x << 1\n#define rs x << 1 | 1\n#define mid ((l + r) >> 1)\n\nvoid update(int l, int r, int s, int t, pi c, int x) {\n\tif (s > t) return;\n\tif (s <= l && r <= t) return tr[x].push_back(c);\n\tif (s <= mid) update(l, mid, s, t, c, ls);\n\tif (t > mid) update(mid + 1, r, s, t, c, rs);\n}\n\nvoid calc(int l, int r, int x) {\n\tint tp = op.size();\n\tint fl = 0;\n\tfor (pi p : tr[x]) {\n\t\tif (getf(p.fi) == getf(p.se + n)) { fl = 1; break; }\n\t\tmerge(p.fi, p.se + n);\n\t}\n\tif (fl) {\n\t\tfor (int i = l; i <= r; i++) puts(\"Yes\");\n\t\treturn del(tp);\n\t}\n\tif (l == r) puts(\"No\");\n\telse calc(l, mid, ls), calc(mid + 1, r, rs);\n\tdel(tp);\n}\n\nint main() {\n\tn = read(), m = read();\n\tfor (int i = 1; i <= (n << 1); i++) pr[i] = i;\n\tfor (int i = 1, x, y; i <= m; i++) {\n\t\tx = read(), y = read();\n\t\tlst[mp(x, y)] = 1;\n\t}\n\tk = read();\n\tfor (int i = 1, x, y; i <= k; i++) {\n\t\tx = read(), y = read();\n\t\tq[i] = mp(x, y);\n\t\tif (lst.count(mp(x, y))) update(1, k, lst[mp(x, y)], i - 1, mp(x, y), 1), lst.erase(mp(x, y));\n\t\telse lst[mp(x, y)] = i;\n\t}\n\tfor (auto p : lst) update(1, k, p.se, k, p.fi, 1); \n\tcalc(1, k, 1);\n\treturn 0;\n}\n\n```",
        "postTime": 1669028176,
        "uid": 306573,
        "name": "Ender32k",
        "ccfLevel": 0,
        "title": "P8460 \u300cREOI-p1\u300d\u6309\u6469 \u9898\u89e3"
    },
    {
        "content": "\u8003\u8651\u5982\u679c\u6ca1\u6709\u4fee\u6539\u64cd\u4f5c\u8be5\u600e\u4e48\u505a\u3002\u5c06\u884c\u548c\u5217\u90fd\u62bd\u8c61\u6210\u70b9\uff0c\u5982\u679c\u4e00\u4e2a\u70b9\u662f\u9ed1\u70b9\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u70b9\u6240\u5728\u7684\u884c\u548c\u5217\u8fde\u5230\u540c\u4e00\u4e2a\u96c6\u5408\u5185\u3002\u5982\u679c\u5728\u52a0\u5165\u4e00\u4e2a\u70b9\u65f6\uff0c\u5b83\u7684\u884c\u548c\u5217\u5df2\u7ecf\u5728\u540c\u4e00\u4e2a\u96c6\u5408\uff0c\u8bf4\u660e\u8fd9\u4e2a\u70b9\u5c31\u662f\u77e9\u5f62\u7684\u6700\u540e\u4e00\u4e2a\u70b9\u3002\n\n\u7528\u53ef\u64a4\u9500\u5e76\u67e5\u96c6\u52a0\u7ebf\u6bb5\u6811\u5206\u6cbb\u79bb\u7ebf\u7ef4\u62a4\u8fd9\u4e2a\u8fc7\u7a0b\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define pii pair<int, int> \n#define fi first\n#define se second\nusing namespace std; \n\nint n, m; \nmap<pii, int> mp; \nvector<pii> T[400005]; \nint fa[200005], siz[200005]; \nstruct item {\n\tint x, y, siz; \n} st[200005];\nint tot; \nint find(int x) { return fa[x] == x ? x : find(fa[x]); }\nvoid merge(int x, int y) {\n\tx = find(x); y = find(y); \n\tif (siz[x] > siz[y]) swap(x, y); \n\tst[++tot] = {x, y, siz[x]}; \n\tfa[x] = y; siz[y] += siz[x]; \n}\n\nvoid update(int o, int l, int r, int x, int y, pii v) {\n\tif (x <= l && r <= y) return T[o].push_back(v), void(); \n\tint mid = l + r >> 1; \n\tif (x <= mid) update(o << 1, l, mid, x, y, v); \n\tif (mid < y) update(o << 1 | 1, mid + 1, r, x, y, v); \n}\nvoid solve(int o, int l, int r) {\n\tbool flag = 1; int lst = tot; \n\tfor (pii it : T[o]) {\n\t\tint x = find(it.fi), y = find(it.se + n); \n\t\tif (x == y) {\n\t\t\tfor (int i = l; i <= r; ++i) puts(\"Yes\"); \n\t\t\tflag = 0; break; \n\t\t}\n\t\tmerge(it.fi, it.se + n); \n\t}\n\tif (flag) {\n\t\tif (l == r) puts(\"No\"); \n\t\telse {\n\t\t\tint mid = l + r >> 1; \n\t\t\tsolve(o << 1, l, mid); solve(o << 1 | 1, mid + 1, r); \n\t\t}\n\t}\n\twhile (tot > lst) {\n\t\tfa[st[tot].x] = st[tot].x; siz[st[tot].y] -= st[tot].siz; \n\t\t--tot; \n\t}\n}\n\nint main(void) {\n\tscanf(\"%d%d\", &n, &m); \n\tfor (int i = 1; i <= n * 2; ++i) fa[i] = i, siz[i] = 1; \n\twhile (m--) {\n\t\tint x, y; scanf(\"%d%d\", &x, &y); \n\t\tmp[{x, y}] = 0; \n\t}\n\tscanf(\"%d\", &m); \n\tfor (int i = 1; i <= m; ++i) {\n\t\tint x, y; scanf(\"%d%d\", &x, &y); \n\t\tif (mp.find({x, y}) == mp.end()) mp[{x, y}] = i; \n\t\telse {\n\t\t\tif (i > 1) update(1, 1, m, mp[{x, y}], i - 1, {x, y}); \n\t\t\tmp.erase({x, y}); \n\t\t}\n\t}\n\tfor (auto it : mp) update(1, 1, m, it.se, m, it.fi); \n\tsolve(1, 1, m); \n\treturn 0; \n}\n```",
        "postTime": 1684584834,
        "uid": 187051,
        "name": "james1BadCreeper",
        "ccfLevel": 6,
        "title": "P8460"
    }
]
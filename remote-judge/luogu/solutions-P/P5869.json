[
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P5869)\n\n## \u9898\u76ee\u5206\u6790\n\n\u8fd9\u9053\u9898\u76ee\u6700\u5927\u7684\u96be\u70b9\u5c31\u662f\u5982\u4f55\u5feb\u901f\u6c42\u4e00\u4e2a\u77e9\u9635\u7684\u4ef7\u503c\u3002\n\n\u4e0d\u59a8\u8ba4\u4e3a\u4e00\u4e2a\u77e9\u9635\u662f\u5408\u6cd5\u77e9\u9635\uff0c\u5f53\u4e14\u4ec5\u5f53\u5728\u7b97\u4ef7\u503c\u65f6\u53ef\u80fd\u4f1a\u9012\u5f52\u5230\u8be5\u77e9\u9635\uff0c\u6bd4\u5982\u4ee5 $(1,1)$ \u548c $(1,1)$ \u4e3a\u4e24\u4e2a\u89d2\u7684\u77e9\u9635\u662f\u5408\u6cd5\u7684\uff0c\u4ee5 $(1,5)$ \u548c $(2,6)$ \u4e3a\u4e24\u4e2a\u89d2\u7684\u77e9\u9635\u662f\u5408\u6cd5\u7684\u3002\n\n\u5728\u539f\u9898\u9762\u4e2d\uff0c\u7531\u4e8e\u5355\u8272\u77e9\u9635\u548c\u591a\u8272\u77e9\u9635\u90fd\u4f1a\u9020\u6210\u8d21\u732e\uff0c\u6240\u4ee5\u4ef7\u503c\u4e0d\u592a\u597d\u6c42\uff0c\u4e0d\u59a8\u8f6c\u5316\u4e00\u4e0b\u9898\u9762\uff1a\n\n1. \u5982\u679c\u77e9\u9635\u662f\u5355\u8272\u7684\uff0c\u5219\u5b83\u7684\u4ef7\u503c\u4e3a $0$ \u91d1\u5e01\uff1b\n2. \u5426\u5219\uff0c\u5c06\u77e9\u9635\u5206\u5272\u6210 $4$ \u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u5b50\u77e9\u9635\uff0c\u77e9\u9635\u7684\u4ef7\u503c\u4e3a\u5b50\u77e9\u9635\u7684\u4ef7\u503c\u4e4b\u548c\u52a0 $4$ \u91d1\u5e01\u3002\n\n**\u6700\u540e\uff0c\u6574\u4e2a\u77e9\u9635\u7684\u4ef7\u503c\u8fd8\u8981\u52a0\u4e00\u3002**\n\n\u8fd9\u79cd\u8f6c\u5316\u76f8\u5f53\u4e8e\u662f\u628a**\u4f20\u9012\u4e0b\u53bb\u7ed9\u6bcf\u4e2a\u77e9\u9635\u9020\u6210\u989d\u5916\u7684 $1$ \u91d1\u5e01\u7684\u8d21\u732e\u63d0\u524d\u7b97\u5230\u5f53\u524d\u77e9\u9635\u5904**\uff0c\u7531\u4e8e\u6574\u4e2a\u77e9\u9635\u4e00\u5f00\u59cb\u989d\u5916\u8d21\u732e\u7684 $1$ \u91d1\u5e01\u6ca1\u6709\u63d0\u524d\u7b97\uff0c\u6240\u4ee5\u8fd8\u8981\u52a0\u4e00\u3002\n\n\u5982\u679c\u4e00\u4e2a\u5408\u6cd5\u77e9\u9635\u662f\u5f02\u8272\u7684\uff0c\u90a3\u4e48\u4e00\u5b9a\u4f1a\u9012\u5f52\u5230\u8be5\u77e9\u9635\u5e76\u9020\u6210\u8d21\u732e\uff0c\u56e0\u4e3a\u5305\u542b\u5b83\u7684\u5408\u6cd5\u77e9\u9635\u80af\u5b9a\u90fd\u662f\u5f02\u8272\u7684\uff0c\u6240\u4ee5\u9898\u76ee\u5c31\u662f\u8981\u6c42**\u6240\u6709\u5f02\u8272\u7684\u5408\u6cd5\u77e9\u9635\u6570\u91cf\u4e58\u56db\u52a0\u4e00**\u3002\n\n\u8fd8\u662f\u4e0d\u597d\u6c42\uff0c\u6b63\u96be\u5219\u53cd\uff0c\u8003\u8651\u6c42\u51fa\u6240\u6709\u5355\u8272\u7684\u5408\u6cd5\u77e9\u9635\u6570\u91cf\uff0c\u4e00\u4e2a\u5408\u6cd5\u77e9\u9635\u5355\u8272\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b83\u6240\u5728\u7684\u884c\u88ab\u6539\u53d8\u6b21\u6570\u5947\u5076\u6027\u76f8\u540c\uff0c\u540c\u65f6\u5b83\u6240\u5728\u7684\u5217\u88ab\u6539\u53d8\u6b21\u6570\u5947\u5076\u6027\u76f8\u540c\uff0c\u8fd9\u4e2a\u6bd4\u8f83\u663e\u7136\uff0c\u9898\u76ee\u4e2d\u7ed9\u51fa\u7684\u7ed3\u6784\u5bf9\u4e8e\u884c\u548c\u5217\u90fd\u662f\u548c\u7ebf\u6bb5\u6811\u5f88\u7c7b\u4f3c\u7684\uff0c\u800c\u4e14\u884c\u548c\u5217\u662f\u53ef\u4ee5\u5206\u5f00\u8003\u8651\u7684\uff0c\u7ef4\u62a4\u4e24\u4e2a\u7ebf\u6bb5\u6811\u540c\u65f6\u7ef4\u62a4\u7ebf\u6bb5\u6811\u6bcf\u4e00\u5c42\u7684\u64cd\u4f5c\u5947\u5076\u6027\u76f8\u540c\u7684\u6570\u91cf\u5373\u53ef\u6c42\u5f97\u7b54\u6848\u3002\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n#define ch() getchar()\n#define pc(x) putchar(x)\ntemplate<typename T>inline void read(T&x){\n\tint f;char c;\n\tfor(f=1,c=ch();c<'0'||c>'9';c=ch())if(c=='-')f=-f;\n\tfor(x=0;c<='9'&&c>='0';c=ch())x=x*10+(c&15);x*=f;\n}\ntemplate<typename T>inline void write(T x){\n\tstatic char q[64];int cnt=0;\n\tif(!x)pc('0');if(x<0)pc('-'),x=-x;\n\twhile(x)q[cnt++]=x%10+'0',x/=10;\n\twhile(cnt--)pc(q[cnt]);\n}\nconst int maxn=25,saxn=(1<<22)+9;\nint c[2][maxn],t[2][saxn];\nlong long ans=0;\nvoid build(int x,int st,int l,int r){\n\t++c[0][st],++c[1][st];\n\tt[0][x]=t[1][x]=0;\n\tif(l==r)return;\n\tint mid=(l+r)>>1;\n\tbuild(x<<1,st+1,l,mid);\n\tbuild(x<<1|1,st+1,mid+1,r);\n}\nint op;\nvoid change(int x,int st,int l,int r,int pos){\n\tans-=1ll*c[op][st]*c[!op][st];if(t[op][x]!=2)--c[op][st];\n\tif(l==r)t[op][x]^=1;else{\n\t\tint mid=(l+r)>>1;\n\t\tif(pos<=mid)change(x<<1,st+1,l,mid,pos);\n\t\telse change(x<<1|1,st+1,mid+1,r,pos);\n\t\tif(t[op][x<<1]!=2&&t[op][x<<1]==t[op][x<<1|1])\n\t\tt[op][x]=t[op][x<<1];else t[op][x]=2;\n\t}\n\tif(t[op][x]!=2)++c[op][st];ans+=1ll*c[op][st]*c[!op][st];\n}\nint main(){\n\tint n,q;read(n),read(q);build(1,0,1,1<<n);\n\tlong long sum=ans=((1ll<<(2*n+2))-1)/3;\n\twhile(q--){\n\t\tint x;\n\t\tread(op),read(x);\n\t\tchange(1,0,1,1<<n,x);\n\t\twrite((sum-ans)*4+1),pc('\\n');\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1594456295,
        "uid": 230249,
        "name": "xiaolilsq",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 [SEERC2018]Matrix Queries"
    }
]
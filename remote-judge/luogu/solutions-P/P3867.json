[
    {
        "content": "\u505a\u4e86\u4e00\u9053OI\u7701\u9009\u9898\uff0c\u9898\u76ee\u5f88\u77ed\uff0c\u9898\u610f\u6c421\u5230N\u7684\u5168\u6392\u5217\uff0c\u6709\u591a\u5c11\u4e2a\u6392\u5217\u6ee1\u8db3\u6240\u6709\u76f8\u90bb\u4e24\u9879\u4e4b\u5dee\u90fd\u4e0d\u8d85\u8fc7K(N\u226450\uff0cK\u22644).\n\n\u8fd9\u9053\u9898\u8ba9\u6211\u60f3\u8d77\u4ee5\u524d\u505a\u8fc7\u7684\u4e00\u9898\uff08URAL1260\uff09\u3002\u90a3\u9898\u8981\u6c42K=2\uff0c\u6392\u5217\u5f00\u5934\u5fc5\u987b\u662f1.\u5f53\u65f6\uff0c\u6211\u4eceN=1\uff0c\u5f00\u59cb\u679a\u4e3e\uff0c\u5e76\u4e14\u7528\u4e86\u9012\u63a8\u7684\u65b9\u6cd5\uff08\u4eceN-1\u7684\u5e8f\u5217\u63a8\u5230N\u7684\u5e8f\u5217\u3002\u5982\u679cN-1\u5e8f\u5217\u4e0d\u662f\u7b26\u5408\u8981\u6c42\u7684\uff0c\u90a3\u4e48\u65e0\u8bba\u628aN\u63d2\u5165N-1\u5e8f\u5217\u7684\u4efb\u610f\u4f4d\u7f6e\uff0cN\u5e8f\u5217\u90fd\u662f\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u3002\u90a3\u4e5f\u5c31\u662f\u8bf4\uff0c\u7b26\u5408\u8981\u6c42\u7684N\u5e8f\u5217\uff0c\u662f\u4ece\u7b26\u5408\u8981\u6c42\u7684N-1\u5e8f\u5217\u63a8\u51fa\u7684\u3002\uff09\uff0c\u89e3\u51b3\u4e86\u90a3\u9053\u9898\uff0c\u9012\u63a8\u516c\u5f0f\u5e76\u4e0d\u590d\u6742\u3002\u8fd9\u9053\u9898\u663e\u7136\u60c5\u51b5\u66f4\u590d\u6742\u3002\u6211\u8fd8\u662f\u5148\u5c1d\u8bd5K=2\u7684\u60c5\u51b5\u3002\n\n\u5bf9\u4e8eK=2\uff0c\u8981\u4eceN-1\u5e8f\u5217\u751f\u6210N\u5e8f\u5217\uff0c\u5176\u5b9e\u53ea\u8981\u8003\u8651N-1\u5e8f\u5217\u4e2dN-1\u548cN-2\u7684\u4f4d\u7f6e\uff0c\u5f53\u5b83\u4eec\u5728\u5e8f\u5217\u7684\u4e24\u7aef\u6216\u8005\u5b83\u4eec\u662f\u76f8\u8fde\u7684\uff0c\u5c31\u53ef\u4ee5\u63d2\u5165N\uff0c\u5f97\u5230\u7b26\u5408\u8981\u6c42\u7684N\u5e8f\u5217\uff0c\u518d\u8bb0\u5f55N\u548cN-1\u7684\u4f4d\u7f6e\u5173\u7cfb\u7684\u79cd\u6570\uff08\u6ce8\u610f\u8fd9\u65f6\u5019N-2\u5df2\u7ecf\u6ca1\u7528\u4e86\uff0c\u8981\u628a\u5b83\u5220\u9664\u6389\uff0c\u53ea\u8bb0\u5f55N\u548cN-1\u7684\u4f4d\u7f6e\u5173\u7cfb\uff09\u3002\u5f53N\u22642\u65f6\uff0c\u6240\u6709\u5e8f\u5217\u90fd\u7b26\u5408\uff0cN\uff1e2\u65f6\uff0c\u53ef\u4ee5\u8bb0\u5f55\u5404\u79cd\u60c5\u51b5\u7684\u79cd\u6570\uff0c\u6700\u540e\u628a\u6240\u6709\u60c5\u51b5\u7d2f\u52a0\u8d77\u6765\u5c31\u662f\u7b54\u6848\u3002\n\n\u5bf9\u4e8eK=3\u548cK=4\u7684\u60c5\u5f62\uff0c\u5176\u5b9e\u4e5f\u662f\u4e00\u6837\u7684\u3002\u5206\u62102^(K+1)\\*(K!)\u79cd\u60c5\u51b5\u3002\u4ee3\u7801\u5f88\u590d\u6742\uff0c\u5199\u4e86\u597d\u4e45\uff0c\u4f9b\u5927\u5bb6\u53c2\u8003\uff1a\n\n\n\n\n\n    \n    \n    \n```cpp\n#include <stdio.h>\n#include <algorithm>\nusing namespace std;\nint m = 1000000007;\nint b2[6] = {1, 2, 4, 8, 16, 32};\nint f[5] = {1, 1, 2, 6, 24};\nint c[32][5] = {0}, p[24][4];\nint s[5][51][24][32] = {0};\nint solve(int n, int k)\n{\n    if(n <= k) return f[n];\n    int i, ic, t, ip, j, d = 4 - k, tm = b2[k + 1] - 1, l, l0, ipp, icc;\n    int tp[4], tc[5], ttp[5], ttc[6], ans = 0;\n    for(i = 0; i < f[k]; i++){\n        s[k][k][i][tm] = 1;\n    }\n    for(i = k + 1; i <= n; i++){\n        for(ip = 0; ip < f[k]; ip++){\n            for(j = 0; j < k; j++) tp[j] = p[ip][j + d] - d;\n            for(ic = 0; ic <= tm; ic++){\n                if(!s[k][i - 1][ip][ic]) continue; \n                for(j = 0; j <= k; j++) tc[j] = c[ic][j];\n                for(j = 0; j <= k; j++){\n                    if(!tc[j]) continue;\n                    for(l = 0; l < j; l++) ttc[l] = tc[l], ttp[l] = tp[l];\n                    for(l = k; l >= j; l--) ttc[l + 1] = tc[l];\n                    for(l = k - 1; l >= j; l--) ttp[l + 1] = tp[l];\n                    ttc[j] = 1, ttp[j] = k;\n                    for(l0 = 0; ttp[l0]; l0++);\n                    for(l = l0; l < k; l++) ttp[l] = ttp[l + 1];\n                    for(l = l0; l <= k; l++) ttc[l] = ttc[l + 1];\n                    ttc[l0] = 0;\n                    for(l = 0; l < k; l++) --ttp[l];\n                    for(l = icc = 0; l <= k; l++) icc += b2[l] * ttc[l];\n                    int h[4] = {0}, ch;\n                    for(l = 0, t = k - 1, ipp = 0; t >= 0; l++, t--){\n                        for(ch = 0, l0 = 0; l0 < ttp[l]; l0++) ch += (h[l0] == 0);\n                        h[ttp[l]] = 1;\n                        ipp += ch * f[t];\n                    }\n                    s[k][i][ipp][icc] += s[k][i - 1][ip][ic];\n                    if(s[k][i][ipp][icc] >= m) s[k][i][ipp][icc] -= m;\n                }\n            }\n        }\n    }\n    for(ip = ans = 0; ip < f[k]; ip++){\n        for(ic = 0; ic <= tm; ic++){\n            ans += s[k][n][ip][ic];\n            if(ans >= m) ans -= m;\n        } \n    }\n    return ans;\n}\nint main() \n{\n    int n, k, i, j, t;\n    int tp[4] = {0, 1, 2, 3};\n    for(i = 1; i < 32; i++){\n        t = i, j = 0;\n        while(t){\n            c[i][j] = t & 1;\n            t >>= 1;\n            j++;\n        }\n    }\n    for(i = 0; i < 24; i++){\n        for(j = 0; j < 4; j++) p[i][j] = tp[j];\n        next_permutation(tp, tp + 4);\n    }\n    scanf(\"%d%d\", &n, &k);\n    printf(\"%d\\n\", solve(n, k));\n    return 0;\n}\n```",
        "postTime": 1507461613,
        "uid": 7419,
        "name": "sheepsun",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3867 \u3010[TJOI2009]\u6392\u5217\u8ba1\u6570\u3011"
    }
]
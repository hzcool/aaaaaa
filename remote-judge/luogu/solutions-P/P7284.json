[
    {
        "content": "\u8f6c\u5316\u4e00\u4e0b\u9898\u9762\uff0c\u628a\u8fd9\u5f20\u5730\u56fe\u89c6\u4e3a\u4e00\u4e2a $n\\times n$ \u7684\u77e9\u9635\uff0c\u56fe\u4e0a\u7684\u6bcf\u4e00\u4e2a\u70b9\u5c31\u662f\u77e9\u9635\u4e0a\u7684\u4e00\u4e2a\u5143\u7d20\u3002\n\n\u8fd9\u5f20\u56fe\u4e0a\uff0c\u6bcf\u4e00\u4e2a\u70b9\u90fd\u53ea\u80fd\u5f80\u5de6\uff0c\u53f3\uff0c\u4e0a\uff0c\u4e0b\u56db\u4e2a\u65b9\u5411\u8d70\u4e00\u4e2a\u683c\u5b50\uff0c\u6240\u4ee5\u6700\u5927\u8fb9\u6570\u5c31\u662f\u70b9\u6570 $\\times 4$\uff0c\u56e0\u4e3a\u6709\u53cc\u5411\u8fb9\uff0c\u6240\u4ee5\u6570\u7ec4\u8981\u518d\u5f00 $2$ \u500d\u7a7a\u95f4\u3002\n\n\u628a\u8fd9\u4e2a $r\\times s$ \u7684\u6570\u7ec4\u8f6c\u5316\u4e3a\u70b9\u65f6\uff0c$(i,j)$ \u53ef\u5316\u4e3a $(i-1)\\times s+j$\uff0c\u628a\u56fe\u4e2d\u5df2\u7ecf\u53ef\u4ee5\u8d70\u7684\u4e24\u4e2a\u70b9\u95f4\u8fde\u8fb9\u6743\u4e3a $0$\uff0c\u9700\u8981\u66ff\u6362\u5730\u56fe\u5b57\u7b26\u624d\u80fd\u8d70\u7684\u4e24\u70b9\u8fde\u8fb9\u6743\u4e3a $1$\uff0c\u7136\u540e\u5728\u56fe\u4e0a\u8dd1\u6700\u77ed\u8def\u5373\u53ef\u6c42\u51fa\u9700\u8981\u8fdb\u884c\u6539\u53d8\u7684\u5b57\u7b26\u7684\u6700\u5c11\u6570\u91cf\u3002\n\n\u8bb0\u5f55 $path[]$ \u627e\u5230\u9e2d\u5b50\u6e38\u6cf3\u8def\u5f84\uff0c\u901a\u8fc7\u8def\u5f84\u4fee\u6539\u56fe\u8f93\u51fa\u5373\u53ef\u3002\u5728\u4fee\u6539\u65f6\u8bb0\u5f97\u70b9\u8f6c\u5316\u4e3a\u6570\u7ec4\u5143\u7d20\u65f6\u7684\u53d6\u6a21\u95ee\u9898\uff0c\u5177\u4f53\u89c1\u4ee3\u7801\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define gc() getchar()\n#define test printf(\"\\nRunZeSAMA_ONTOP\\n\")\nusing namespace std;\nconst int inf=0x3f3f3f3f;\nconst double eps=1e-9;\nconst int N=2005;\nconst int M=N*N*4;\nint r,s,start,posi,p,p1,wrz;\nchar ch[N][N];\nint dis[N*N],path[N*N],u,v,w;\nbool vis[N*N];\nstack<int>st;\nstruct E{\n\tint to,nxt,w;\n}e[M<<1];int star,head[N*N];\nstruct node{\n\tint dis,pos;\n};\nbool operator<(const node &a,const node &b)\n{\n\treturn a.dis>b.dis;\n}\nvoid add(int u,int v,int w)\n{\n\te[++star].w=w;\n\te[star].to=v;\n\te[star].nxt=head[u];\n\thead[u]=star;\n}\npriority_queue<node>q;\nnode now;\nvoid dijkstra()\n{\n\twhile(!q.empty())\n\t{\n\t\tnow=q.top();\n\t\tq.pop();\n\t\tu=now.pos;\n\t\tif(vis[u])continue;\n\t\tvis[u]=true;\n\t\tfor(int i=head[u];i;i=e[i].nxt)\n\t\t{\n\t\t\tv=e[i].to;\n\t\t\tif(dis[v]>dis[u]+e[i].w)\n\t\t\t{\n\t\t\t\tpath[v]=u;\n\t\t\t\tdis[v]=dis[u]+e[i].w;\n\t\t\t\tnow={dis[v],v};\n\t\t\t\tq.push(now);\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tscanf(\"%d%d\",&r,&s);\n\tfor(int i=1;i<=r;++i)\n\t{\n\t\tfor(int j=1;j<=s;++j)\n\t\t{\n\t\t\tcin>>ch[i][j];\n\t\t\tif(ch[i][j]=='o')start=(i-1)*s+j;\n\t\t\tif(ch[i][j]=='x')posi=(i-1)*s+j;\n\t\t}\n\t}\n\tfor(int i=1;i<=r;++i)\n\t{\n\t\tfor(int j=1;j<=s;++j)\n\t\t{\n\t\t\tif(j>1)\n\t\t\t{\n\t\t\t\tif(ch[i][j]=='<'||ch[i][j]=='o')add((i-1)*s+j,(i-1)*s+j-1,0);\n\t\t\t\telse add((i-1)*s+j,(i-1)*s+j-1,1);\n\t\t\t}\n\t\t\tif(j<s)\n\t\t\t{\t\n\t\t\t\tif(ch[i][j]=='>'||ch[i][j]=='o')add((i-1)*s+j,(i-1)*s+j+1,0);\n\t\t\t\telse add((i-1)*s+j,(i-1)*s+j+1,1);\n\t\t\t}\n\t\t\tif(i>1)\n\t\t\t{\n\t\t\t\tif(ch[i][j]=='^'||ch[i][j]=='o')add((i-1)*s+j,(i-1)*s+j-s,0);\n\t\t\t\telse add((i-1)*s+j,(i-1)*s+j-s,1);\n\t\t\t}\n\t\t\tif(i<r)\n\t\t\t{\n\t\t\t\tif(ch[i][j]=='v'||ch[i][j]=='o')add((i-1)*s+j,(i-1)*s+j+s,0);\n\t\t\t\telse add((i-1)*s+j,(i-1)*s+j+s,1);\n\t\t\t}\n\t\t}\t\n\t}\n\tfor(int i=1;i<=r*s;++i)if(i!=start)dis[i]=inf;\n\tq.push({dis[start],start});\n\tdijkstra();\n\tprintf(\"%d\\n\",dis[posi]);\n\t//\n\tp=posi;\n\twhile(path[p])\n\t{\n\t\tst.push(p);\n\t\tp=path[p];\n\t}\n\tp1=start;\n\twhile(!st.empty())\n\t{\n\t\tp=st.top();\n\t\tst.pop();\n\t\tif(p1==start)\n\t\t{\n\t\t\tp1=p;\n\t\t\tcontinue;\n\t\t}\n\t\twrz=p1%s;\n\t\tif(!wrz)wrz=s;\n\t\tif(p==p1+1)ch[(p1-1)/s+1][wrz]='>';\n\t\tif(p==p1-1)ch[(p1-1)/s+1][wrz]='<';\n\t\tif(p==p1+s)ch[(p1-1)/s+1][wrz]='v';\n\t\tif(p==p1-s)ch[(p1-1)/s+1][wrz]='^';\n\t\tp1=p;\n\t}\n\tfor(int i=1;i<=r;++i)\n\t{\n\t\tfor(int j=1;j<=s;++j)\n\t\t{\n\t\t\tcout<<ch[i][j];\n\t\t}\n\t\tcout<<endl;\n\t}\n    return 0;\n}\n//freopen(\".in\",\"r\",stdin);\n//freopen(\".out\",\"w\",stdout);\n\n```\n",
        "postTime": 1664935746,
        "uid": 306610,
        "name": "TryToThink",
        "ccfLevel": 5,
        "title": "\u3010\u9898\u89e3\u3011P7284 [COCI2020-2021#4] Patkice II"
    },
    {
        "content": "\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u8fd9\u662f\u4e00\u9053**\u6781\u4e3a\u7ecf\u5178**\u7684**\u5e7f\u641c\u53d8\u5f62**\u9898\u76ee\uff0c\u505a\u5b8c\u4e4b\u540e\u65e0\u8bba\u662f BFS \u8fd8\u662f pair \u7684\u4f7f\u7528\u90fd\u66f4\u52a0\u5a34\u719f\uff0c\u6536\u83b7\u9887\u4e30\u3002\u674e\u715c\u4e1c\u00b7\u300a\u7b97\u6cd5\u7ade\u8d5b\u8fdb\u9636\u6307\u5357\u300b\u4e2d\u5728\u5e7f\u641c\u53d8\u5f62\u8fd9\u4e00\u7ae0\u5185\u6709\u4e00\u9053\u975e\u5e38\u76f8\u4f3c\u7684\u9898\u76ee\u3002\u5f53\u65f6\u6211\u4ee5\u4e3a\u81ea\u5df1\u4f1a\u4e86\uff0c\u5c31\u6ca1\u6709\u591a\u60f3\u3002\u6ca1\u60f3\u5230\u4eca\u5929\u9047\u5230\u539f\u9898\u7adf\u7136\u8fd8\u5199\u9519\u4e86\u597d\u51e0\u6b21\uff0c\u4f5c\u6587\u4ee5\u8bb0\u4e4b\uff1a\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\u76ee\uff0c\u7b2c\u4e00\u773c\u770b\u51fa\u6765\u662f BFS \u5e94\u8be5\u4e0d\u96be\uff0c\u4f46\u662f\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898\uff1a\u7531\u4e8e\u5404\u4e2a\u72b6\u6001\u88ab\u52a0\u5165\u961f\u5217\u7684\u65f6\u5019\u6240\u9700\u8981\u6539\u53d8\u7684\u6b21\u6570\u662f\u4e0d\u540c\u7684\uff08\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\uff09\uff0c\u800c BFS \u7684\u8981\u6c42\u662f\u5bf9\u4e8e\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\uff0c\u5176\u7b2c\u4e00\u5173\u952e\u5b57\u90fd\u5e94\u8be5\u662f\u4e0d\u9012\u51cf\u7684\u3002\n\n\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u8be5\u600e\u4e48\u529e\u5462\uff1f\n\n- Solution1\n\n\u4f7f\u7528 SPFA,Dijkstra \u7b49\u6700\u77ed\u8def\u7b97\u6cd5\uff0c\u901a\u8fc7\u591a\u6b21\u66f4\u65b0/\u5e8f\u5217\u5185\u6392\u5e8f\u7b49\u65b9\u6cd5\u4fdd\u8bc1\u6b63\u786e\u6027\u3002\u4f46\u8fd9\u4e48\u505a\u6548\u7387\u663e\u7136\u4e0d\u9ad8\uff08\u81f3\u5c11\u589e\u52a0\u4e00\u4e2a   log\uff0c\u5982\u679c\u9898\u76ee\u8981\u6c42\u66f4\u4e25\u683c\u90a3\u4e48\u663e\u7136\u662f\u8fc7\u4e0d\u53bb\u7684\u3002\n\n- Solution2\n\n\u4f7f\u7528**\u53cc\u7aef\u961f\u5217**BFS\uff0c\u5373\u6bcf\u6b21\u52a0\u5165\u65b0\u72b6\u6001\u7684\u65f6\u5019\u5224\u65ad\u4ee3\u4ef7\u662f\u5426\u9700\u8981\u589e\u52a0\uff0c\u5982\u679c\u9700\u8981\uff0c\u5c31\u538b\u8fdb\u961f\u5934\uff0c\u4e0d\u9700\u8981\u5219\u538b\u8fdb\u961f\u5c3e\u3002\u53ef\u4ee5\u8bc1\u660e\uff0c\u8fd9\u6837\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\u6bcf\u6b21\u5f97\u5230\u7684\u6700\u4f18\u72b6\u6001\u4e00\u5b9a\u6bd4\u8f83\u52a3\u72b6\u6001\u66f4\u5148\u53d6\u51fa\u3002\n\n\u81f3\u4e8e\u8f93\u51fa\u4fee\u6539\u540e\u7684\u5730\u56fe\uff0c\u8fd9\u4e2a\u70b9\u4e5f\u96be\u4e86\u6211\u4e00\u4f1a\u513f\u3002\u6700\u540e\u60f3\u5230\u7684\u529e\u6cd5\u662f\u6bcf\u6b21\u4e00\u4e2a\u8282\u70b9\u80fd\u591f\u88ab\u66f4\u65b0\u5c31\u8bf4\u660e\u5b83\u7684\u524d\u9a71\u88ab\u4fee\u6539\u4e00\u5b9a\u66f4\u4f18\uff0c\u6240\u4ee5\u6211\u4eec\u7528 pre \u6570\u7ec4\u6765\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u524d\u9a71\uff0c\u6700\u540e\u4ece\u7ec8\u70b9\u5f80\u8d77\u70b9\u626b\u4e00\u904d\u5373\u53ef\u3002\n\n\u4e0d\u5f97\u4e0d\u8bf4\u601d\u7ef4\u96be\u5ea6\u6bd4\u8f83\u5927\uff0c\u800c\u4e14\u9700\u8981\u62bd\u8c61\u601d\u7ef4\u3002\n\n\u9898\u5916\u8bdd\uff1a\u6211\u771f\u7684\u5f88\u4f69\u670d\u53d1\u660e\u8fd9\u79cd\u7b97\u6cd5\u7684\u4eba\uff0c\u6211\u53ea\u80fd\u7528\u4f18\u7f8e\u8fd9\u4e2a\u8bcd\u5f62\u5bb9\u53cc\u7aef\u961f\u5217\u548c BFS \u7684\u7ed3\u5408\uff0c\u771f\u7684\u592a\u4f18\u7f8e\u4e86\u3002\n\n\u590d\u6742\u5ea6 $O(r*s)$\n\nCode:\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef pair<int,int> pr;\n#define mp make_pair\nint n,m;\ndeque <pr> dq;\nchar sea[2005][2005];\nint sx,sy,ex,ey,dis[2005][2005];\npr pre[2005][2005];\nint dx[4]={1,-1,0,0},dy[4]={0,0,1,-1};\nchar dir[4]={'v','^','>','<'};\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin>>sea[i][j];\n\t\t\tif(sea[i][j]=='x')\n\t\t\t\tex=i,ey=j;\n\t\t\telse if(sea[i][j]=='o')\n\t\t\t\tsx=i,sy=j;\n\t\t}\n\tmemset(dis,0x3f,sizeof(dis));\n\tdq.push_back(mp(sx,sy));\n\tdis[sx][sy]=0;\n\twhile(!dq.empty()){\n\t\tpr temp=dq.front();\n\t\tdq.pop_front();\n\t\tif(temp==mp(ex,ey)||dis[temp.first][temp.second]>=dis[ex][ey])\n\t\t\tcontinue;\n\t\t//cout<<temp.first<<\" \"<<temp.second<<endl;\n\t\tfor(int i=0;i<4;i++){\n\t\t\tint tx=temp.first+dx[i],ty=temp.second+dy[i];\n\t\t\tif(tx<1||tx>n||ty<1||ty>m)\n\t\t\t\tcontinue; \n\t\t\tint w=(sea[temp.first][temp.second]==dir[i]||sea[temp.first][temp.second]=='o')?0:1;\n\t\t\tif(dis[tx][ty]>dis[temp.first][temp.second]+w){\n\t\t\t\tdis[tx][ty]=dis[temp.first][temp.second]+w;\n\t\t\t\tpre[tx][ty]=temp;\n\t\t\t\tif(w==0)\n\t\t\t\t\tdq.push_front(mp(tx,ty));\n\t\t\t\telse\n\t\t\t\t\tdq.push_back(mp(tx,ty));\n\t\t\t}\n\t\t}\n\t}\n\tpr before=pre[ex][ey],now=mp(ex,ey);\n\t//cout<<before.first<<\" \"<<before.second<<\" 114514\"<<endl;\n\twhile(before!=mp(sx,sy)){\n\t\tif(before.first==now.first+1)\n\t\t\tsea[before.first][before.second]='^';\n\t\tif(before.first==now.first-1)\n\t\t\tsea[before.first][before.second]='v';\n\t\tif(before.second==now.second+1)\n\t\t\tsea[before.first][before.second]='<';\n\t\tif(before.second==now.second-1)\n\t\t\tsea[before.first][before.second]='>';\n\t\tnow=before;\n\t\tbefore=mp(pre[before.first][before.second].first,pre[before.first][before.second].second);\n\t}\n\tcout<<dis[ex][ey]<<endl;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tcout<<sea[i][j];\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1638797253,
        "uid": 261262,
        "name": "WaltVBAlston",
        "ccfLevel": 5,
        "title": "[\u9898\u89e3]P7284 [COCI2020-2021#4] Patkice II"
    },
    {
        "content": "\u5e7f\u641c\u597d\u9898\n\n## \u9898\u76ee\u5927\u610f\n\u8d77\u70b9\u662f \"o\" , \u7ec8\u70b9\u662f \"x\" \uff0c\"^ v < >\" \u8868\u793a\u56db\u79cd\u6d0b\u6d41\uff0c\u9e2d\u5b50\u8fdb\u5165\u6d0b\u6d41\u540e\u5c31\u53ef\u4ee5\u6cbf\u7740\u8be5\u65b9\u5411\u79fb\u52a8\u8ddd\u79bb\uff0c \".\" \u662f\u5e73\u9759\u7684\u6d77\u9762\uff0c\u9e2d\u5b50\u8fdb\u5165\u8fd9\u91cc\u5c31\u4f1a\u505c\u6b62\u3002\u95ee\u6211\u4eec\u9700\u8981\u81f3\u5c11\u6539\u53d8\u591a\u5c11\u4e2a\u5b57\u7b26\u624d\u80fd\u4f7f\u9e2d\u5b50\u4ece\u8d77\u70b9\u8d70\u5411\u7ec8\u70b9\uff0c\u5e76\u4e14\u6253\u5370\u51fa\u6539\u53d8\u5b57\u7b26\u540e\u7684\u5730\u56fe\u3002\n\n## \u601d\u8def\n\n\u4e00\u822c\u6c42\u6700\u77ed\u8def\u5f84\u7684\u7b97\u6cd5\u5c31\u662f BFS \uff0c\u6240\u4ee5\u6211\u4eec\u601d\u8003\u5982\u4f55\u53bb\u4f7f\u7528 BFS \uff1a \u56db\u4e2a\u65b9\u5411\u8d70\uff0c\u5982\u679c\u6211\u4eec\u8981\u8d70\u7684\u65b9\u5411\u548c\u6d0b\u6d41\u65b9\u5411\u4e00\u81f4\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u6539\u53d8\u6d0b\u6d41\u65b9\u5411\uff0c\u6743\u503c\u4e3a $0$ \uff1b \u5982\u679c\u6211\u4eec\u8981\u8d70\u7684\u65b9\u5411\u548c\u6d0b\u6d41\u65b9\u5411\u4e0d\u4e00\u81f4\uff0c\u90a3\u4e48\u5728\u8d70\u7684\u8fc7\u7a0b\u4e2d\u6211\u4eec\u9700\u8981\u6539\u53d8\u6d0b\u6d41\u65b9\u5411\uff0c\u6743\u503c\u4e3a $1$\u3002  \n\n\u60f3\u5230\u8fd9\u4e00\u6b65\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8003\u8651\u4f18\u5148\u961f\u5217\u548c\u53cc\u7aef\u961f\u5217\u4e86\uff0c\u56e0\u4e3a\u6743\u503c\u4e3a $0$ \u7684\u60c5\u51b5\u4e00\u5b9a\u662f\u6bd4\u6743\u503c\u4e3a $1$ \u7684\u60c5\u51b5\u66f4\u4f18\u7684\uff08\u8fd9\u91cc\u6211\u7528\u7684\u53cc\u7aef\u961f\u5217\uff09\uff0c\u6240\u4ee5\u628a\u6743\u503c\u4e3a $0$ \u7684\u60c5\u51b5\u4ece\u961f\u5934\u63d2\u5165\uff0c\u628a\u6743\u503c\u4e3a $1$ \u7684\u60c5\u51b5\u4ece\u961f\u5c3e\u63d2\u5165\u3002\u8fd9\u6837\uff0c\u66f4\u597d\u7684\u60c5\u51b5\u4e00\u5b9a\u662f\u5728\u524d\u9762\u7684\u3002\n\n\u8fd9\u4e2a\u9898\u7684\u53e6\u4e00\u4e2a\u95ee\u9898\u5c31\u5728\u4e8e\u5982\u4f55\u6253\u5370\u51fa\u65b0\u7684\u5730\u56fe\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u7ed9\u4e00\u4e2a\u6570\u7ec4\u6765\u8bb0\u5f55\u524d\u9a71\uff0c\u5982\u679c\u4ece\u8fd9\u4e2a\u5730\u65b9\u8d70\u66f4\u4f18\uff0c\u6211\u4eec\u5c31\u8bb0\u5f55\u4ed6\u7684\u524d\u9a71\u3002\u6700\u540e\u6839\u636e\u8fd9\u4e2a\u70b9\u548c\u524d\u9a71\u70b9\u7684\u4f4d\u7f6e\u5173\u7cfb\u6765\u66f4\u6539\u5730\u56fe\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u7a7a\u95f4\u590d\u6742\u5ea6\u90fd\u4e3a $O(r \\times s)$ \u3002\n## \u4ee3\u7801\u5b9e\u73b0\n```\n#include<bits/stdc++.h> \n#define end endd\n#define map mapp\nconst int INF=2147483647;\nusing namespace std;\n\nchar map[2005][2005];\nint r,s;\nint startx,starty,endx,endy;\nstruct node\n{\n\tint x,y;\n}now,end,pre[2005][2005];/*pre\u6570\u7ec4\u8bb0\u5f55\u524d\u9a71*/\nint bu[2005][2005];/*bu\u6570\u7ec4\u8bb0\u5f55\u5230\u8fbe\u67d0\u4e2a\u70b9\u9700\u8981\u66f4\u6539\u5b57\u7b26\u7684\u4e2a\u6570*/\n\nint dx[4]={1,0,-1,0},dy[4]={0,1,0,-1};\nchar direct[4]={'v','>','^','<'};/*\u56db\u4e2a\u65b9\u5411\uff0c\u8981\u6ce8\u610f\u548c\u6d0b\u6d41\u5bf9\u5e94*/\n\ndeque <node> q;/*\u53cc\u7aef\u961f\u5217*/\n\nvoid bfs(int x,int y)\n{\n\tnow.x=x,now.y=y;\n\tbu[x][y]=0;\n\tq.push_back(now);\n\twhile(!q.empty())\n\t{ \n\t\tnow=q.front();\t\n\t\tq.pop_front();\n\t\tif((now.x==endx && now.y == endy) || bu[now.x][now.y] >= bu[endx][endy]) continue;/*\u526a\u679d\uff0c\u5982\u679c\u5230\u8fbe\u7ec8\u70b9\u4e86\u6216\u8005\u5230\u8fbe\u8be5\u70b9\u7684\u6b65\u6570\u5df2\u7ecf\u8d85\u8fc7\u4e86\u6b64\u523b\u5230\u8fbe\u7ec8\u70b9\u7684\u6b65\u6570\u4e86\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u518d\u5f80\u540e\u505a\u4e86*/\n\t\tfor(int i=0;i<4;i++)\n\t\t{\n\t\t\tint xx=now.x+dx[i];\n\t\t\tint yy=now.y+dy[i];\t\n\t\t\tif(xx<1 || xx>r || yy<1 || yy>s) continue;\n\t\t\tint step = (map[now.x][now.y]==direct[i] || map[now.x][now.y] == 'o') ? 0 : 1;/*\u5982\u679c\u662f\u8d77\u70b9\u6216\u8005\u6d0b\u6d41\u65b9\u5411\u4e0e\u6211\u4eec\u8981\u8d70\u7684\u65b9\u5411\u4e00\u81f4\uff0c\u90a3\u4e48\u6743\u503c\u5c31\u662f0\uff0c\u5426\u5219\u662f1*/\n\t\t\tif(bu[xx][yy] > bu[now.x][now.y] + step)\n\t\t\t{\n\t\t\t\tbu[xx][yy] = bu[now.x][now.y] + step;/*\u80fd\u66f4\u65b0\u5c31\u66f4\u65b0*/\n\t\t\t\tpre[xx][yy]=now;/*\u8bb0\u5f55\u524d\u9a71*/\n\t\t\t\tend.x=xx,end.y=yy;\n\t\t\t\tif(step == 0) q.push_front(end);/*\u5982\u679c\u6743\u503c\u662f0\uff0c\u8f83\u4f18\uff0c\u4ece\u961f\u5934\u63d2\u5165\uff0c\u5426\u5219\u4ece\u961f\u5c3e\u63d2\u5165*/\n\t\t\t\telse q.push_back(end);\n\t\t\t}\n\t\t}\n\t}\n}\n\nvoid change(int kx,int ky)\n{\n\tint px=pre[kx][ky].x,py=pre[kx][ky].y;\n\twhile(px!=startx || py!=starty)/*\u8981\u6ce8\u610f\u662f\u524d\u9a71\u4e0d\u4e3a\u8d77\u70b9\uff0c\u5982\u679c\u7528\u9519\u4f1a\u4fee\u6539\u6389\u8d77\u70b9\u7684\u65b9\u5411*/\n\t{\n\t\tif(px==kx+1) map[px][py]='^';/*\u66f4\u65b0\u5730\u56fe*/\n\t\tif(px==kx-1) map[px][py]='v';\n\t\tif(py==ky+1) map[px][py]='<';\n\t\tif(py==ky-1) map[px][py]='>';\n\t\tkx=px,ky=py; \n\t\tpx=pre[kx][ky].x,py=pre[kx][ky].y;\n\t}\n}\n\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin >> r >> s;\n\tfor(int i=1;i<=r;i++)\n\t\tfor(int j=1;j<=s;j++)\n\t\t{\n\t\t\tbu[i][j]=INF;\n\t\t\tcin >> map[i][j];\n\t\t\tif(map[i][j] == 'o') startx=i,starty=j;\n\t\t\tif(map[i][j] == 'x') endx=i,endy=j;\t/*\u8bb0\u5f55\u8d77\u70b9\u7ec8\u70b9\u4f4d\u7f6e*/\n\t\t}\n\tbfs(startx,starty);/*\u5f00\u59cbbfs*/\n\tcout<<bu[endx][endy]<<endl;\n\tchange(endx,endy);/*\u66f4\u6539\u5730\u56fe*/\n\tfor(int i=1;i<=r;i++)\n\t{\n\t\tfor(int j=1;j<=s;j++)\n\t\t\tcout<< map[i][j];\n\t\tcout << endl;/*\u8f93\u51fa*/\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1655774049,
        "uid": 231543,
        "name": "bloodstalk",
        "ccfLevel": 4,
        "title": "P7284 [COCI2020-2021#4] Patkice II \u9898\u89e3"
    },
    {
        "content": "\uff08\u7b2c\u4e8c\u6b21\u53d1\u9898\u89e3\uff0c\u505a\u7684\u4e0d\u597d\u8bf7\u591a\u8c05\u89e3)  \n\n\n\n## \u9898\u76ee\u5927\u610f\n\u7ed9\u4e00\u4e2a\u7531 \" ^ < v > . o x \" 7 \u79cd\u683c\u5b50\u7ec4\u6210\u7684\u56fe\uff0c\u8d77\u70b9\u662f \"o\"\uff0c\u7ec8\u70b9\u662f \"x\"\u3002\n\" ^ < v > \"\u8868\u793a\u6d0b\u6d41\uff0c\".\"\u8868\u793a\u65cb\u6da1\u3002 \n\n\u9e2d\u5b50\u4ece\u8d77\u70b9\u5f00\u59cb\uff0c\u5f80\u4e0a\u4e0b\u5de6\u53f3\u4efb\u610f\u65b9\u5411\u79fb\u52a8\u4e00\u683c\uff0c\u5982\u679c\u79fb\u52a8\u5230\u6d0b\u6d41\u4e0a\uff0c\u5c31\u5f80\u6d0b\u6d41\u6307\u5411\u7684\u65b9\u5411\u8d70\uff0c\u5982\u679c\u79fb\u52a8\u5230\u65cb\u6da1\u4e0a\uff0c\u90a3\u5c31\u4e0d\u518d\u79fb\u52a8\u4e86\u3002 \n\n\u73b0\u5728\u6211\u4eec\u8981\u6539\u53d8\u6700\u5c11\u7684\u683c\u5b50\u6570\uff0c\u8ba9\u9e2d\u5b50\u80fd\u4ece\u8d77\u70b9\u79fb\u52a8\u5230\u7ec8\u70b9.\uff08\u6bd5\u7adf\u6709\u53ef\u80fd\u79fb\u52a8\u5230\u65cb\u6da1\u7136\u540e\u505c\u4f4f\u6216\u8005\u5728\u6d0b\u6d41\u91cc\u65e0\u9650\u5faa\u73af\uff09  \n\n\u6700\u540e\u8f93\u51fa\u6539\u53d8\u7684\u6700\u5c11\u683c\u5b50\u6570\u548c\u6539\u53d8\u540e\u7684\u56fe\u3002\n\n## \u89e3\u9898\u601d\u8def\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u6700\u77ed\u8def\u53bb\u505a\u8fd9\u9053\u9898\u3002  \n\n\u5982\u679c\u4e0d\u6539\u53d8\u56fe\uff0c\u90a3\u4e48\u6bcf\u4e2a\u683c\u5b50\u4f1a\u6709 0/1 \u6761\u8def\u901a\u5f80\u5176\u4ed6\u683c\u5b50\u3002\u6211\u4eec\u4ee4\u8fd9\u4e9b\u8def\u7684\u6743\u503c\u4e3a 0\u3002  \n\n\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u6539\u53d8\u67d0\u4e9b\u683c\u5b50\u7684\u7c7b\u578b\uff0c\u6240\u4ee5\u6bcf\u4e2a\u683c\u5b50\u5c31\u6709 4 \u6761\u8def\u5206\u522b\u901a\u5f80\u4e0e\u5b83\u76f8\u90bb\u7684\u4e0a\u4e0b\u5de6\u53f3\u56db\u4e2a\u683c\u5b50\u4e86\u3002\u6211\u4eec\u4ee4\u65b0\u589e\u7684\u8fd9\u4e9b\u8def\u7684\u6743\u503c\u4e3a 1\u3002  \ne.g:   \n![\u4f8b\u5b50x1](https://cdn.luogu.com.cn/upload/image_hosting/o6kb0u6o.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\n\n\u7136\u540e\u4e00\u904d Dijkstra/SPFA\u3002\n\n## CODE:  \n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define G getchar()\nusing namespace std;\nstruct node{\n\tll x,y,num;\n};\nstruct dui{\n\tll x,y;\n};\nll up[2005][2005];\nchar htu[2005][2005];\nll side[2005][2005][4];\nll mmap[2005][2005],dx[4]={0,-1,0,1},dy[4]={-1,0,1,0};\npriority_queue <node> q; \nll r,ss;\nbool operator <(const node a,const node b)\n{\n\treturn a.num>b.num;\n}\nll gt()\n{\n\tll k=0,t=1;\n\tchar c=G;\n\twhile(c<'0'||'9'<c)\n\t{\n\t\tif(c=='-') t=-1;\n\t\tc=G;\n\t}\n\twhile('0'<=c&&c<='9')\n\t{\n\t\tk=k*10+c-'0';\n\t\tc=G;\n\t}\n\treturn k*t;\n}\nvoid SPFA()\n{\n\twhile(q.size())\n\t{\n\t\tnode t=q.top(); q.pop();\n\t\tfor(int i=0; i<4; i++)\n\t\t{\n\t\t\tif(mmap[t.x+dx[i]][t.y+dy[i]]>mmap[t.x][t.y]+side[t.x][t.y][i]&&1<=t.x+dx[i]&&t.x+dx[i]<=r&&1<=t.y+dy[i]&&t.y+dy[i]<=ss)\n\t\t\t{\n\t\t\t\tup[t.x+dx[i]][t.y+dy[i]]=(i+2)%4;\n\t\t\t\tmmap[t.x+dx[i]][t.y+dy[i]]=mmap[t.x][t.y]+side[t.x][t.y][i];\n\t\t\t\tq.push((node){t.x+dx[i],t.y+dy[i],mmap[t.x+dx[i]][t.y+dy[i]]});\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\tr=gt(),ss=gt();\n\tll stx,sty,enx,eny;\n\tfor(int i=1; i<=r; i++)\n\t{\n\t\tscanf(\"%s\",htu[i]);\n\t\tfor(int j=1; j<=ss; j++)\n\t\t{\n\t\t\tif(htu[i][j-1]=='<')\n\t\t\t{\n\t\t\t\tside[i][j][0]=0;\n\t\t\t\tside[i][j][1]=1;\n\t\t\t\tside[i][j][2]=1;\n\t\t\t\tside[i][j][3]=1;\n\t\t\t}\n\t\t\tif(htu[i][j-1]=='>')\n\t\t\t{\n\t\t\t\tside[i][j][0]=1;\n\t\t\t\tside[i][j][1]=1;\n\t\t\t\tside[i][j][2]=0;\n\t\t\t\tside[i][j][3]=1;\n\t\t\t}\n\t\t\tif(htu[i][j-1]=='^')\n\t\t\t{\n\t\t\t\tside[i][j][0]=1;\n\t\t\t\tside[i][j][1]=0;\n\t\t\t\tside[i][j][2]=1;\n\t\t\t\tside[i][j][3]=1;\n\t\t\t}\n\t\t\tif(htu[i][j-1]=='v')\n\t\t\t{\n\t\t\t\tside[i][j][0]=1;\n\t\t\t\tside[i][j][1]=1;\n\t\t\t\tside[i][j][2]=1;\n\t\t\t\tside[i][j][3]=0;\n\t\t\t}\n\t\t\tif(htu[i][j-1]=='o')\n\t\t\t{\n\t\t\t\tstx=i,sty=j;\n\t\t\t\tside[i][j][0]=0;\n\t\t\t\tside[i][j][1]=0;\n\t\t\t\tside[i][j][2]=0;\n\t\t\t\tside[i][j][3]=0;\n\t\t\t}\n\t\t\tif(htu[i][j-1]=='x')\n\t\t\t{\n\t\t\t\tenx=i,eny=j;\n\t\t\t\tside[i][j][0]=1e9;\n\t\t\t\tside[i][j][1]=1e9;\n\t\t\t\tside[i][j][2]=1e9;\n\t\t\t\tside[i][j][3]=1e9;\n\t\t\t}\n\t\t\tif(htu[i][j-1]=='.')\n\t\t\t{\n\t\t\t\tside[i][j][0]=1;\n\t\t\t\tside[i][j][1]=1;\n\t\t\t\tside[i][j][2]=1;\n\t\t\t\tside[i][j][3]=1;\n\t\t\t}\n\t\t}\n\t} \t\n\tmemset(mmap,0x3f,sizeof(mmap));\n\tmmap[stx][sty]=0;\n\tq.push((node){stx,sty,0});\n\tSPFA();\n\tll lx=enx,ly=eny;\n\twhile(lx!=stx||ly!=sty)\n\t{\n\t\tll llx=lx,lly=ly;\n\t\tlx=llx+dx[up[llx][lly]],ly=lly+dy[up[llx][lly]];\n\t\tif(up[llx][lly]==0) htu[lx][ly-1]='>';\n\t\tif(up[llx][lly]==1) htu[lx][ly-1]='v';\n\t\tif(up[llx][lly]==2) htu[lx][ly-1]='<';\n\t\tif(up[llx][lly]==3) htu[lx][ly-1]='^';\n\t}\n\thtu[stx][sty-1]='o';\n\tprintf(\"%lld\\n\",mmap[enx][eny]);\n\tfor(int i=1; i<=r; i++)\n\t{\n\t\tfor(int j=0; j<ss; j++)\n\t\t{\n\t\t\tprintf(\"%c\",htu[i][j]) ;\n\t\t}\n\t\tprintf(\"\\n\");\n\t} \t\n\treturn 0;\n}\n```",
        "postTime": 1629621769,
        "uid": 208967,
        "name": "Hasinon",
        "ccfLevel": 9,
        "title": "\u840c\u65b0\u5199\u7684\u7b2c\u4e8c\u7bc7\u9898\u89e3"
    },
    {
        "content": "# \u601d\u8def\n\u521d\u770b(~~\u8003\u8bd5\u65f6\u770b~~)\u8fd9\u9053\u9898\uff0c\u8fd8\u4ee5\u4e3a\u662f\u4ec0\u4e48\u9ad8\u7ea7\u7b97\u6cd5\uff0c\u7ed3\u679c\u6559\u7ec3\u8bf4\u662f\u4e2a BFS \u3002\u5206\u6790\u4e00\u4e0b\uff0c\u786e\u5b9e\u5982\u6b64\u3002\n## BFS\n\u53ea\u9700\u8981 BFS + \u6700\u77ed\u8def\u7684 dis \u6bd4\u5927\u5c0f\uff0c\u641c\u7d22\u65f6\u7684\u65b9\u5411\u4e0e\u539f\u5730\u56fe\u4e00\u81f4\u5219\u4ee3\u4ef7\u4e0d\u53d8\uff0c\u5426\u5219\u4ee3\u4ef7 + 1\uff0c\u7528\u6700\u77ed\u8def\u7684\u6bd4\u5927\u5c0f\u65b9\u6cd5\u5373\u53ef\u7b97\u51fa\u9700\u8981\u8fdb\u884c\u6539\u53d8\u7684\u5b57\u7b26\u7684\u6700\u5c11\u6570\u91cf\u3002\n## \u8f93\u51fa\u65b9\u6848\n\u5728\u641c\u7d22\u65f6\u8bb0\u5f55\u4e0b\u6bcf\u4e2a\u7ecf\u8fc7\u7684\u70b9\u7684\u65b9\u5411\uff0c\u4ece\u7ec8\u70b9\u53cd\u65b9\u5411\u5012\u9000\u5230\u8d77\u70b9\u5373\u53ef\u6839\u636e\u4e4b\u524d\u8bb0\u5f55\u7684\u65b9\u5411\u5f97\u5230\u65b9\u6848\u3002\n# \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef pair<int,int> pr;\ninline int read() {\n\tint f=0,x=0;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)) {\n\t\tif(ch=='-')f=1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)) {\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn f?-x:x;\n}\nint const N=2005;\nint a[N][N],r,s,dis[N][N],pre[N][N];\nint dir[4][2]= {{1,0},{-1,0},{0,1},{0,-1}};\nchar c[N];\npr start,end;\ninline bool in(int x,int y) {\n\treturn x>=1&&x<=r&&y>=1&&y<=s;\n}\nvoid bfs() { //BFS + \u6700\u77ed\u8def\n\tmemset(dis,0x3f,sizeof dis);\n\tdeque<pr>q;\n\tq.push_back(start);\n\tdis[start.first][start.second]=0;\n\twhile(!q.empty()) {\n\t\tpr tmp=q.front();\n\t\tq.pop_front();\n\t\tif(tmp==end||dis[tmp.first][tmp.second]>=dis[end.first][end.second])continue;\n\t\tfor(int i=0; i<4; ++i) {\n\t\t\tint x=tmp.first+dir[i][0],y=tmp.second+dir[i][1];\n\t\t\tif(!in(x,y))continue;\n\t\t\tint w=(i==a[tmp.first][tmp.second]||tmp==start)?0:1;\n\t\t\tif(dis[x][y]>dis[tmp.first][tmp.second]+w) {\n\t\t\t\tdis[x][y]=dis[tmp.first][tmp.second]+w;\n\t\t\t\tpre[x][y]=i;\n\t\t\t\tif(!w) q.push_front(make_pair(x,y));\n\t\t\t\telse q.push_back(make_pair(x,y));\n\t\t\t}\n\t\t}\n\t}\n\treturn;\n}\nvoid out() { //\u8f93\u51fa\u65b9\u6848\n\tint x=end.first,y=end.second;\n\twhile(1) {\n\t\tint nxt=pre[x][y]^1;\n\t\tint nx=x+dir[nxt][0],ny=y+dir[nxt][1];\n\t\tif(make_pair(nx,ny)==start) break;\n\t\ta[nx][ny]=pre[x][y];\n\t\tx=nx,y=ny;\n\t}\n\tfor(int i=1; i<=r; ++i) {\n\t\tfor(int j=1; j<=s; ++j) {\n\t\t\tif(make_pair(i,j)==start)putchar('o');\n\t\t\telse if(make_pair(i,j)==end)putchar('x');\n\t\t\telse if(a[i][j]==0)putchar('v');\n\t\t\telse if(a[i][j]==1)putchar('^');\n\t\t\telse if(a[i][j]==2)putchar('>');\n\t\t\telse if(a[i][j]==3)putchar('<');\n\t\t\telse if(a[i][j]==4)putchar('.');\n\t\t}\n\t\tputchar('\\n');\n\t}\n\treturn;\n}\nsigned main() {\n\tr=read(),s=read();\n\tfor(int i=1; i<=r; ++i) {\n\t\tscanf(\"%s\",c+1);\n\t\tfor(int j=1; j<=s; ++j) {\n\t\t\tif(c[j]=='o')start=make_pair(i,j);\n\t\t\tif(c[j]=='x')end=make_pair(i,j);\n\t\t\tif(c[j]=='>')a[i][j]=2;\n\t\t\tif(c[j]=='<')a[i][j]=3;\n\t\t\tif(c[j]=='^')a[i][j]=1;\n\t\t\tif(c[j]=='v')a[i][j]=0;\n\t\t\tif(c[j]=='.')a[i][j]=4;\n\t\t}\n\t}\n\tbfs();\n\tprintf(\"%d\\n\",dis[end.first][end.second]);\n\tout();\n\treturn  0;\n}\n```",
        "postTime": 1630029304,
        "uid": 321568,
        "name": "lmgoat",
        "ccfLevel": 0,
        "title": "Patkice II\u9898\u89e3"
    },
    {
        "content": "## \u5199\u5728\u524d\u8fb9\n\n\u8fd9\u4e2a\u9898\u76ee\u5f88\u953b\u70bc\u56fe\u8bba\u548c BFS \u4ee5\u53ca\u8f6c\u6362\u7684\u80fd\u529b\uff0c\u662f\u4e2a\u597d\u9898\uff01\n\n\u6709\u4e24\u79cd\u601d\u8def\u5199\u8fd9\u4e2a\u9898\u76ee\uff0c\u4e00\u4e2a\u662f\u6700\u77ed\u8def\uff0c\u4e00\u4e2a\u662f\u53cc\u7aef\u961f\u5217 BFS\u3002\n\n\u524d\u8005\u597d\u7406\u89e3\u4e5f\u8981\u5199\u4f46\u662f\u65f6\u95f4\u6162\uff0c\u540e\u8005\u6bd4\u524d\u8005\u5feb\uff0c\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a\u53cc\u7aef\u961f\u5217\u6a21\u677f\u9898\uff0c\u90fd\u662f\u5f88\u7b80\u5355\u7684\u3002\n\n### \u6700\u77ed\u8def\u6a21\u578b\u601d\u8def\n\n\u8fd9\u4e2a\u9898\u76ee\u53ef\u4ee5\u62bd\u8c61\u6210\u4e00\u4e2a\u6700\u77ed\u8def\u6a21\u578b\u3002\n\n\n\u9898\u76ee\u4e2d\u7684\u6d0b\u6d41\u53ef\u4ee5\u7406\u89e3\u6210\u4ece\u5f53\u524d\u8fd9\u4e00\u4e2a\u70b9\u5230\u6d0b\u6d41\u6307\u5411\u7684\u70b9\u7684\u4ef7\u683c\u662f $0$,\u800c\u5230\u5176\u4ed6\u65b9\u5411\u7684\u70b9\u7684\u4ef7\u683c\u5c31\u662f $1$\uff0c\u5bf9\u4e8e `.` \u53ef\u4ee5\u770b\u505a\u4ed6\u5230\u65c1\u8fb9\u4efb\u610f\u4e00\u70b9\u7684\u4ef7\u683c\u90fd\u662f $1$\uff0c\u7136\u540e\u7528\u8fea\u6770\u65af\u7279\u62c9\u6c42\u51fa\u6700\u77ed\u8def\u5c31\u884c\u4e86\uff01\n\n\u5199\u8fd9\u4e2a\u9898\u76ee\u4e00\u5b9a\u8981\u6ce8\u610f\u628a\u6539\u53d8\u5730\u56fe\u8f6c\u6362\u6210**\u8ba9\u4ed6\u5f80\u54ea\u4e2a\u65b9\u5411\u8d70**\uff0c\u8fd9\u4e2a\u6837\u5c31\u6210\u529f\u907f\u5f00\u9898\u76ee\u63cf\u8ff0\u7684\u9677\u9631\u3002\n\n\u7136\u540e\u5c31\u662f\u4e00\u4e2a\u5927\u96be\u9898\uff0c\u600e\u4e48\u628a\u65b0\u7684\u5730\u56fe\u6253\u5370\u51fa\u6765\u3002\n\n\u5176\u5b9e\u65b0\u7684\u9898\u76ee\u7684\u5176\u4ed6\u7b26\u53f7\u4e0d\u53d8\uff0c\u53d8\u5f97\u53ea\u6709\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u8def\u5f84\u4e0a\u7684\u7b26\u53f7\uff0c\u90a3\u6211\u4eec\u53ea\u7528\u7ba1\u6700\u77ed\u8def\u8def\u5f84\u4e0a\u7684\u7b26\u53f7\u5c31\u53ef\u4ee5\u4e86\u3002\u5728\u8def\u5f84\u4e0a\u4e0a\u7684\u6240\u6709\u7684\u70b9\u7684\u65b9\u5411\u4e00\u5b9a\u662f\u6307\u5411\u7ec8\u70b9\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8def\u5f84\u4e0a\u7684\u70b9\u7684\u524d\u9a71\u4e00\u5b9a\u6307\u5411\u5f53\u524d\u70b9\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8bb0\u5f55\u4e00\u4e0b\u6bcf\u4e2a\u70b9\u7684\u524d\u9a71\u7136\u540e\u628a\u524d\u9a71\u7684\u65b9\u5411\u4fee\u6539\u6210\u6307\u5411\u5f53\u524d\u7684\u7684\u65b9\u5411\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u5229\u7528\u9012\u5f52\u5b9e\u73b0\u5c31\u53ef\u4ee5\u3002\n\n\u660e\u767d\u4e86\u601d\u8def\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u8fd8\u4e0d\u4f1a\u7684\u53ef\u4ee5\u770b\u770b\u4ee3\u7801\u3002\n\n\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nconst int N=1e11+111;\n\nint n,m,Map[3002][3002]; \nchar ch;\nint x,y,jx,jy;\n\nstruct wuy{\n\tint xx,yy,qz;\n};\nstruct oo{\n\tbool operator()(wuy A,wuy B){\n\t\treturn A.qz>B.qz;\n\t}\n};\npriority_queue<wuy,vector<wuy>,oo> Q;//\u5efa\u7acb\u5c0f\u6839\u5806 \n\nstruct node{\n\tint x,y;\n}qq[3002][3002];//\u8bb0\u5f55\u524d\u9a71\u7684\u6570\u7ec4 \n\nint vis[3002][3002],dis[3002][3002];\n\nint fx[4]={0,0,-1,1},\n\tfy[4]={1,-1,0,0};//\u65b9\u5411\u6570\u7ec4 \n\nvoid digui(int xx,int yy)//\u9012\u5f52\u4fee\u6539\u524d\u9a71\u65b9\u5411 \n{\n\tif(xx==x && yy==y) return ;//\u5982\u679c\u627e\u5230\u8d77\u70b9\u5c31\u4e0d\u8981\u5728\u4fee\u6539\u4e86 \n\tfor(int i=0;i<=3;i++)\n\t\t{\n\t\t\tint dx=qq[xx][yy].x+fx[i],\n\t\t\t\tdy=qq[xx][yy].y+fy[i];\n\t\t\tif(dx==xx && dy==yy)//\u5982\u679c\u8fd9\u4e2a\u65b9\u5411\u6307\u5411\u5f53\u524d\u70b9 \n\t\t\t{\n\t\t\t\tMap[qq[xx][yy].x][qq[xx][yy].y]=i;//\u4fee\u6539 \n\t\t\t\tbreak ;\n\t\t\t}\n\t\t}\n\tdigui(qq[xx][yy].x,qq[xx][yy].y);//\u9012\u5f52 \n}\n\nsigned main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tcin>>ch;\n\t\t\tif(ch=='<') Map[i][j]=1;\n\t\t\tif(ch=='^') Map[i][j]=2;\n\t\t\tif(ch=='v') Map[i][j]=3;\n\t\t\tif(ch=='o') Map[i][j]=5;\n\t\t\tif(ch=='x') Map[i][j]=6;\n\t\t\tif(ch=='.') Map[i][j]=7;\n\t\t\tif(ch=='x') jx=i,jy=j; \n\t\t\tif(ch=='o') x=i,y=j;//\u8fd9\u91cc\u5176\u5b9e\u53ef\u4ee5\u7528map\u51fd\u6570\uff0c\u4f1a\u597d\u5199\u4e00\u70b9\uff0c\u4f46\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u592a\u9ad8\uff0c\u4e0d\u6562\u7528\u6015\u8d85\u65f6 \n\t\t}\n\t\t\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) dis[i][j]=N;\n\tdis[x][y]=0;\n\tQ.push(wuy{x,y,0});\n\twhile(!Q.empty())//\u5806\u4f18\u5316\u8fea\u6770\u65af\u7279\u62c9 \n\t{\n\t\tint bhx=Q.top().xx,bhy=Q.top().yy;\n\t\tQ.pop();\n\t\tif(vis[bhx][bhy]==1) continue ;/\n\t\tvis[bhx][bhy]=1;\n\t\tfor(int i=0;i<=3;i++)//\u5404\u4e2a\u65b9\u5411\u90fd\u8bd5\u4e00\u8bd5 \n\t\t{\n\t\t\tint dx=bhx+fx[i],\n\t\t\t\tdy=bhy+fy[i];\n\t\t\tint dj=0;//\u5230\u4e0b\u4e2a\u70b9\u7684\u4ef7\u683c \n\t\t\tif(i!=Map[bhx][bhy] && Map[bhx][bhy]!=5) dj++;\n\t\t\tif(dx<1 || dx>n || dy<1 || dy>m) continue ;//\u5982\u679c\u8d85\u51fa\u4e86\u8fb9\u754c\u5c31\u7ed3\u675f \n\t\t\tif(dis[bhx][bhy]+dj<dis[dx][dy] && vis[dx][dy]==0)\n\t\t\t{\n\t\t\t\tdis[dx][dy]=dis[bhx][bhy]+dj;\n\t\t\t\tQ.push(wuy{dx,dy,dis[dx][dy]});\n\t\t\t\tqq[dx][dy].x=bhx,qq[dx][dy].y=bhy;//\u66f4\u65b0\u524d\u9a71 \n\t\t\t}\n\t\t}\n\t}\n\tdigui(jx,jy);//\u4fee\u6539\u5730\u56fe \n\tMap[x][y]=5;//\u56e0\u4e3a\u6211\u7684\u4ee3\u7801\u4f1a\u628a\u8d77\u70b9\u4fee\u6539\u6240\u4ee5\u518d\u6539\u56de\u6765 \n\tcout<<dis[jx][jy]<<endl;//\u8f93\u51fa\u6700\u77ed\u8def \n\tfor(int i=1;i<=n;i++)//\u6253\u5370\u5730\u56fe \n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(Map[i][j]==0) cout<<'>';\n\t\t\tif(Map[i][j]==1) cout<<'<';\n\t\t\tif(Map[i][j]==2) cout<<'^';\n\t\t\tif(Map[i][j]==3) cout<<'v';\n\t\t\tif(Map[i][j]==5) cout<<'o';\n\t\t\tif(Map[i][j]==6) cout<<'x';\n\t\t\tif(Map[i][j]==7) cout<<'.';\n\t\t\t//\u8fd9\u91cc\u5176\u5b9e\u53ef\u4ee5\u7528map\u51fd\u6570\uff0c\u4f1a\u597d\u5199\u4e00\u70b9\uff0c\u4f46\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u592a\u9ad8\uff0c\u4e0d\u6562\u7528\u6015\u8d85\u65f6 \n\t\t}\n\t\tcout<<endl;\n\t}\n}\n/*\u5207\u52ff\u6284\u88ad\uff0c\u601d\u8def\u5f88\u7b80\u5355\u4ee3\u7801\u770b\u7740\u957f\u5176\u5b9e\u8fd8\u662f\u5f88\u7b80\u5355\u7684\u3002*/\n```\n\n### \u53cc\u7aef\u961f\u5217\n\n\u53cc\u7aef\u961f\u5217\u5c31\u662f\u6307\u80fd\u4ece\u961f\u5934\u548c\u961f\u5c3e\u63d2\u5165\u5143\u7d20\u7684\u961f\u5217\uff0c\u5177\u4f53\u64cd\u4f5c\u65b9\u6cd5\u53ef\u4ee5\u770b\u770b\u6d1b\u8c37\u7684\u5355\u8c03\u961f\u5217\u6a21\u677f\u9898\u7684\u9898\u89e3\uff0c\u672c\u6587\u4e0d\u8d58\u8ff0\u3002\n\n\u53cc\u7aef\u961f\u5217\u7684\u5e94\u7528\u573a\u666f\u5c31\u662f\u6709\u4e24\u4e2a\u4e0d\u540c\u7684\u6743\u503c\uff0c\u8fd9\u6837\u666e\u901a\u7684 BFS \u5c31\u65e0\u6cd5\u6ee1\u8db3\u9700\u6c42\uff08\u56e0\u4e3a\u5148\u5230\u7684\u4e0d\u4e00\u5b9a\u662f\u6700\u597d\u7684\uff09\uff0c\u6240\u4ee5\u5c31\u7528\u53cc\u7aef\u961f\u5217\u628a $0$ \u653e\u5728\u524d\u8fb9\uff0c$1$ \u653e\u5728\u540e\u8fb9\uff0c\u7136\u540e\u5c31\u548c\u666e\u901a BFS \u4e00\u6837\u4e86\uff0c\u8fd8\u662f\u5f88\u7b80\u5355\u7684\uff0c\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\u5427\uff01\u8fd9\u4e2a\u601d\u8def\u6bd4\u4e0a\u4e2a\u601d\u8def\u5feb\u5f88\u591a\u3002\n\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nconst int N=1e11+111;\n\nint n,m,Map[3002][3002]; \nchar ch;\nint x,y,jx,jy;\n\ndeque<int> qx,qy,qd;\n \nstruct node{\n\tint x,y;\n}qq[3002][3002];\n\nint vis[3002][3002],dis[3002][3002];\n\nint fx[4]={0,0,-1,1},\n\tfy[4]={1,-1,0,0};\n\nvoid digui(int xx,int yy)\n{\n\tif(xx==x && yy==y) return ;\n\tfor(int i=0;i<=3;i++)\n\t\t{\n\t\t\tint dx=qq[xx][yy].x+fx[i],\n\t\t\t\tdy=qq[xx][yy].y+fy[i];\n\t\t\tif(dx==xx && dy==yy)\n\t\t\t{\n\t\t\t\tMap[qq[xx][yy].x][qq[xx][yy].y]=i;\n\t\t\t\tbreak ;\n\t\t\t}\n\t\t}\n\tdigui(qq[xx][yy].x,qq[xx][yy].y);\n}\n\nsigned main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tdis[i][j]=N;\n\t\t\tcin>>ch;\n\t\t\tif(ch=='<') Map[i][j]=1;\n\t\t\tif(ch=='^') Map[i][j]=2;\n\t\t\tif(ch=='v') Map[i][j]=3;\n\t\t\tif(ch=='o') Map[i][j]=5;\n\t\t\tif(ch=='x') Map[i][j]=6;\n\t\t\tif(ch=='.') Map[i][j]=7;\n\t\t\tif(ch=='x') jx=i,jy=j; \n\t\t\tif(ch=='o') x=i,y=j;\n\t\t}\n\tdis[x][y]=0;\n\tqx.push_back(x);\n\tqy.push_back(y);\n\twhile(!qx.empty())\n\t{\n\t\tint dx=qx.front(),\n\t\t\tdy=qy.front(); \n\t\tqx.pop_front();\n\t\tqy.pop_front();\n\t\tif(dis[dx][dy]>dis[jx][jy]) continue ;\n\t\tfor(int i=0;i<4;i++)\n\t\t{\n\t\t\tint dj=0,\n\t\t\t\tnextx=dx+fx[i],\n\t\t\t\tnexty=dy+fy[i];\n\t\t\tif(nextx<1 || nexty<1 || nextx>n || nexty>m ) continue ;\n\t\t\tif(i!=Map[dx][dy] && Map[dx][dy]!=5) dj++;\n\t\t\tif(dis[nextx][nexty]>dis[dx][dy]+dj)\n\t\t\t{\n\t\t\tif(dj==0) qx.push_front(nextx),qy.push_front(nexty);\n\t\t\telse  qx.push_back(nextx),qy.push_back(nexty);\n\t\t\tqq[nextx][nexty].x=dx;\n\t\t\tqq[nextx][nexty].y=dy;\n\t\t\tdis[nextx][nexty]=dis[dx][dy]+dj;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tdigui(jx,jy);\n\tMap[x][y]=5;\n\tcout<<dis[jx][jy]<<endl;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(Map[i][j]==0) cout<<'>';\n\t\t\tif(Map[i][j]==1) cout<<'<';\n\t\t\tif(Map[i][j]==2) cout<<'^';\n\t\t\tif(Map[i][j]==3) cout<<'v';\n\t\t\tif(Map[i][j]==5) cout<<'o';\n\t\t\tif(Map[i][j]==6) cout<<'x';\n\t\t\tif(Map[i][j]==7) cout<<'.';\n\t\t}\n\t\tcout<<endl;\n\t}\n}\n```\n",
        "postTime": 1655714537,
        "uid": 231946,
        "name": "CuSO4_and_5H2O",
        "ccfLevel": 6,
        "title": "P7284 [COCI2020-2021#4] Patkice II \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u63cf\u8ff0\uff1a[link](https://www.luogu.com.cn/problem/P7284)\n\n\u5f88\u660e\u663e\uff0c\u8fd9\u9898\u5c5e\u4e8e\u4e00\u4e2a bfs\uff0cbfs \u4e2d\u76f8\u90bb\u4e24\u70b9\u7684\u6743\u503c\u8981\u4e48\u662f $0$\uff0c\u8981\u4e48\u662f $1$\uff0c\u5bb9\u6613\u60f3\u5230\u662f\u4e2a\u53cc\u7aef\u961f\u5217 bfs \u6216\u4f18\u5148\u961f\u5217 bfs\u3002\n\n\u6211\u91c7\u7528\u4e86\u53cc\u7aef\u961f\u5217 bfs \u5199\u6cd5\u3002\n\n\u5728\u672c\u9898\u4e2d\uff0c\u5982\u679c\u4ece\u5f53\u524d\u70b9\u5230\u76ee\u6807\u70b9\u7684\u65b9\u5411\u6b63\u597d\u7b49\u4e8e\u5f53\u524d\u70b9\u6d0b\u6d41\u7684\u65b9\u5411\uff0c\u6743\u503c\u4e3a $0$\uff0c\u5c06\u76ee\u6807\u70b9\u4ece\u961f\u5934\u5165\u961f\u3002\n\n\u5426\u5219\u6743\u503c\u4e3a $1$\uff0c\u5c06\u76ee\u6807\u70b9\u4ece\u961f\u5c3e\u5165\u961f\u3002\n\n\u8bb0\u5f55\u8def\u5f84\u7684\u8bdd\uff0c\u4ece\u5f53\u524d\u70b9\u5230\u76ee\u6807\u70b9\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5c06 $pre_{nx,ny}$ \u8bbe\u4e3a $(x,y)$\uff0c\u6700\u540e\u4ece $(ex,ey)$ \u5f80\u524d\u66ff\u6362\u3002\n\n\u6ce8\u610f\uff1a\n\n1. \u63d0\u524d\u8bbe\u7f6e\u65b9\u5411\u3002\n\n1. \u521d\u59cb\u65f6 $dis$ \u6570\u7ec4\u8bbe\u4e3a\u6781\u5927\u503c\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tint x=0,f=1;char ch=getchar();\n\twhile (ch<'0'||ch>'9'){if (ch=='-') f=-1;ch=getchar();}\n\twhile (ch>='0'&&ch<='9'){x=(x<<1)+(x<<3)+ch-48;ch=getchar();}\n\treturn x*f;\n}\ninline void put(int x){\n\tif(x<0){\n\t\tputchar('-');\n\t\tput(-x);\n\t\treturn;\n\t}\n    if (x > 9) put(x / 10);\n    putchar(x % 10 + 48);\n}\nstruct node{\n\tint x,y;\n}pre[2005][2005];\nint n=read(),m=read(),sx,sy,tx,ty,dis[2005][2005];\nint dx[4]={-1,0,1,0};\nint dy[4]={0,1,0,-1};\nchar fangxiang[4]={'^','>','v','<'};//\u8bb0\u5f55\u65b9\u5411\nchar a[2005][2005];\nvoid bfs(int x,int y){\n\tdeque<node> dq;\n\tdis[x][y]=0;\n\tdq.push_back(node{x,y});\n\twhile(dq.empty()==false){\n\t\tnode cur=dq.front();\n\t\tdq.pop_front();\n\t\tif((cur.x==tx&&cur.y==ty)||dis[cur.x][cur.y]>=dis[tx][ty])\n\t\t\tcontinue;\n\t\tfor(int i=0; i<4; i++){\n\t\t\tint nx=cur.x+dx[i],ny=cur.y+dy[i];\n\t\t\t\tint w;\n\t\t\t\tif(a[cur.x][cur.y]==fangxiang[i]||(cur.x==sx&&cur.y==sy))\n\t\t\t\t\tw=0;\n\t\t\t\telse\n\t\t\t\t\tw=1;\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m&&dis[nx][ny]>dis[cur.x][cur.y]+w){\n\t\t\t\tpre[nx][ny].x=cur.x;\n\t\t\t\tpre[nx][ny].y=cur.y;\n\t\t\t\tdis[nx][ny]=min(dis[nx][ny],dis[cur.x][cur.y]+w);\n\t\t\t\tif(w==0)\n\t\t\t\t\tdq.push_front(node{nx,ny});//\u6743\u503c\u4e3a0\uff0c\u4ece\u961f\u5934\u5165\u961f\n\t\t\t\telse\n\t\t\t\t\tdq.push_back(node{nx,ny});//\u6743\u503c\u4e3a1\uff0c\u4ece\u961f\u5c3e\u5165\u961f\n\t\t\t}\n\t\t}\n\t}\n}\nsigned main(){\n\tfor(int i=1; i<=n; i++)\n\t\tfor(int j=1; j<=m; j++){\n\t\t\tdis[i][j]=1e18;//\u521d\u59cb\u5316\u4e3a\u6781\u5927\u503c\n\t\t\tcin>>a[i][j];\n\t\t\tif(a[i][j]=='o')\n\t\t\t\tsx=i,sy=j;\n\t\t\tif(a[i][j]=='x')\n\t\t\t\ttx=i,ty=j;\n\t\t}\n\tbfs(sx,sy);\n\tif(dis[tx][ty]!=1e18)\n\t\tcout<<dis[tx][ty]<<endl;\n\telse\n\t\tcout<<0<<endl;\n\tnode now=node{tx,ty};\n\twhile(now.x!=sx||now.y!=sy){\n\t\tnode cur=pre[now.x][now.y];\n\t\tfor(int i=0; i<4; i++)\n\t\t\tif(cur.x+dx[i]==now.x&&cur.y+dy[i]==now.y&&(cur.x!=sx||cur.y!=sy))\n\t\t\t\ta[cur.x][cur.y]=fangxiang[i];\n\t\tnow=cur;\n\t}//\u4fee\u6539\u5730\u56fe\n\tfor(int i=1; i<=n; i++){\n\t\tfor(int j=1; j<=m; j++)\n\t\t\tcout<<a[i][j];\n\t\tcout<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1654422410,
        "uid": 400783,
        "name": "_Chtholly_Nephren_",
        "ccfLevel": 6,
        "title": "P7284\u9898\u89e3"
    }
]
[
    {
        "content": "\u5f88\u597d\u7684\u4e00\u5230\u8ba1\u7b97\u51e0\u4f55\u9898\u76ee\u554a,\u600e\u4e48\u6ca1\u4eba\u505aqwq?\n\n\u6b64\u5916\u662f\u7528\u6211\u7684\u5199\u6cd5,\u8fd9\u9898\u5e76**\u4e0d**\u5361\u7cbe\u5ea6\u2026\u2026\n\n## \u524d\u7f6e\u829d\u58eb\n\n- \u5224\u65ad\u4e00\u4e2a\u70b9\u662f\u5426\u5728\u7b80\u5355\u591a\u8fb9\u5f62\u5185\n\n\u8fd9\u4e2a\u9898\u8981\u6c42\u5728\u591a\u8fb9\u5f62\u8fb9\u4e0a\u4e5f**\u4e0d\u7b97**,\u90a3\u4e48\u5148\u4e00\u901a\u5224\u5b9a\u8be5\u70b9\u662f\u5426\u5728\u67d0\u6761\u8fb9\u4e0a\u3002\n\n\u7136\u540e\u8fc7\u8fd9\u4e2a\u70b9\u968f\u610f\u505a\u4e00\u6761\u5c04\u7ebf,\u5982\u679c\u4e0e\u591a\u8fb9\u5f62\u6709\u5947\u6570\u4e2a\u4ea4\u70b9\u5219\u5728\u591a\u8fb9\u5f62\u5185,\u5426\u5219\u5728\u5916\u9762\u3002\n\n(\u4e3a\u4e86\u907f\u514d\u6070\u597d\u5728\u591a\u8fb9\u5f62\u9876\u70b9\u5904\u76f8\u4ea4\u7684\u60c5\u51b5,\u6700\u597d\u968f\u673a\u5c04\u7ebf\u65b9\u5411,\u6216\u8005\u8bbe\u4e00\u4e2a\u6bd4\u8f83\u5201\u94bb\u7684\u503c)\n\n- \u6c42\u7ebf\u6bb5\u4e0e\u5706\u7684\u4ea4\u70b9\n\n\u5148\u6c42\u51fa\u76f4\u7ebf\u4e0e\u5706\u7684\u4ea4\u70b9,\u5728\u5224\u65ad\u662f\u5426\u5728\u7ebf\u6bb5\u4e0a\u5373\u53ef\u3002\n\n\u5177\u4f53\u6c42\u6cd5:\u5224\u65ad\u76f4\u7ebf\u5230\u5706\u5fc3$O$\u7684\u8ddd\u79bb,\u5982\u679c\u76f8\u5207\u6216\u8005\u76f8\u79bb\u5219\u820d\u53bb\u3002\n\n\u8bbe\u4e24\u4e2a\u4ea4\u70b9\u662f$A_1,A_2$\u3002\n\n\u8fc7\u5706\u5fc3\u505a\u76f4\u7ebf\u7684\u5782\u7ebf,\u7b97\u51fa\u4ea4\u70b9$M$,\u534a\u5f84$r$\u548c$OM$,$A_1M$\u7ec4\u6210\u76f4\u89d2\u4e09\u89d2\u5f62,\u90a3\u4e48\u52fe\u80a1\u4e00\u4e0b\u5f97\u5230$A_1M$\u548c$A_2M$\u3002\n\n\u5728\u4e4b\u540e,\u628a\u5411\u91cf$\\overrightarrow{MO}$\u7684\u65b9\u5411\u5411\u91cf\u5206\u522b\u5de6\u8f6c\u548c\u53f3\u8f6c$90$\u5ea6,\u7136\u540e\u7f29\u653e$A_1M$\u500d,\u52a0\u4e0a$M$,\u5373\u53ef\u5f97\u5230\u4e24\u4e2a\u4ea4\u70b9\u3002\n\n![](https://cdn.luogu.com.cn/upload/pic/70778.png)\n\n- \u5e73\u5206\u4e00\u6bb5\u5f27\n\n\u5229\u7528\u5782\u5f84\u5b9a\u7406,\u4f5c\u5f26\u7684\u5782\u7ebf,\u6c42\u51fa\u5782\u7ebf\u7684\u65b9\u5411\u5411\u91cf,\u5728\u7f29\u653e$r$\u500d\u5373\u53ef\u6070\u597d\u78b0\u5230\u5706\u5468\u3002\n\n## \u95ee\u9898\u8f6c\u5316\n\n\u8fd9\u91cc\u6bcf\u4e2a\u70b9\u88ab\u8986\u76d6\u5230\u7684\u6982\u7387\u662f\u72ec\u7acb\u7684,\u88ab\u6839\u636e\u671f\u671b\u7684\u7ebf\u6027\u6027,\u6211\u4eec\u53ef\u4ee5\u4e00\u4e2a\u4e00\u4e2a\u6765\u7b97,\u6700\u540e\u518d\u52a0\u8d77\u6765\u3002\n\n\u90a3\u4e48\u95ee\u9898\u5c31\u53d8\u6210\u4e86:\u7ed9\u51fa\u4e00\u4e2a\u70b9\u548c\u4e00\u4e2a\u7b80\u5355\u591a\u8fb9\u5f62,\u95ee\u5728\u7b80\u5355\u591a\u8fb9\u5f62\u968f\u673a\u65cb\u8f6c\u4ee5\u540e\u8fd9\u4e2a\u70b9\u6709\u591a\u5c11\u6982\u7387\u5728\u591a\u8fb9\u5f62\u5185\u3002\n\n\u4e0e\u5176\u8ba9\u591a\u8fb9\u5f62\u8f6c,\u4e0d\u5982\u8ba9\u70b9\u8f6c,\u90a3\u4e48\u95ee\u9898\u53c8\u53d8\u6210\u4e86:\n\n\u7ed9\u51fa\u4e00\u4e2a\u70b9\u548c\u4e00\u4e2a\u7b80\u5355\u591a\u8fb9\u5f62,\u95ee\u5728\u70b9\u968f\u673a\u65cb\u8f6c\u4ee5\u540e\u8fd9\u4e2a\u70b9\u6709\u591a\u5c11\u6982\u7387\u5728\u591a\u8fb9\u5f62\u5185\u3002\n\n\u90a3\u4e48\u6211\u4eec\u4ee5\u539f\u70b9\u4e3a\u5706\u5fc3,\u70b9\u5230\u539f\u70b9\u8ddd\u79bb\u4e3a\u534a\u5f84,\u753b\u4e00\u4e2a\u5706,\u8fd9\u5c31\u662f\u90a3\u4e2a\u70b9\u7684\u8fd0\u52a8\u8f68\u8ff9\u3002\n\n\u8fd9\u4e2a\u5706\u5f27\u5728\u591a\u8fb9\u5f62\u5185\u7684\u957f\u5ea6\u9664\u4ee52Pi\u5c31\u662f\u7b54\u6848\u3002\n\n## \u89e3\u51b3\u65b9\u6848\n\n(\u5047\u5982\u8fd9\u4e2a\u70b9\u5c31\u662f\u539f\u70b9,\u90a3\u4e48\u5f62\u4e0d\u6210\u5706\u5f27,\u76f4\u63a5\u5224\u65ad\u8be5\u70b9\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5185)\n\n\u9996\u5148\u7b97\u51fa\u8fd9\u4e2a\u5706\u5f27\u4e0e\u591a\u8fb9\u5f62\u7684\u6240\u6709\u4ea4\u70b9\u3002\n\n\u5982\u679c\u6ca1\u6709\u4ea4\u70b9,\u8981\u4e48\u6574\u4e2a\u5706\u90fd\u5728\u591a\u8fb9\u5f62\u5916\u9762,\u8981\u4e48\u6574\u4e2a\u5706\u90fd\u5728\u91cc\u9762\u3002\n\n\u968f\u610f\u53d6\u5706\u4e0a\u4efb\u610f\u4e00\u70b9\u5224\u65ad\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5185\u5373\u53ef\u3002\n\n\u5982\u679c\u6709\u4ea4\u70b9,\u5c31\u628a\u8fd9\u4e9b\u4ea4\u70b9\u6781\u89d2\u6392\u5e8f,\u53ef\u4ee5\u5f97\u5230$O(m)$\u6bb5\u5f27,\u6211\u4eec\u8981\u4e00\u4e00\u5224\u65ad\u8fd9\u4e9b\u5f27\u5728\u4e0d\u5728\u5706\u5185\u3002\n\n\u5982\u4f55\u5224\u65ad?\u6c42\u51fa\u5f27\u7684\u91cd\u70b9,\u7136\u540e\u5224\u65ad\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5185\u5373\u53ef\u8fd9\u91cc\u7684\u590d\u6742\u5ea6\u662f$O(m)$\u3002\n\n\u90a3\u4e48\u8fd9\u4e2a\u9898\u5c31\u505a\u5b8c\u4e86,\u603b\u7684\u590d\u6742\u5ea6$O(nm^2)$,\u6709\u70b9\u677e\u3002\n\n```cpp\n#include<algorithm>\n#include<cstdio>\n#include<cmath>\n#define eps 1e-7\n#define MaxN 1050\nusing namespace std;\nconst double Pi=acos(-1);\nint sign(double x)\n{return x>eps ? 1 : (x<-eps ? -1 : 0);}\nstruct Point\n{\n  double x,y,rt;\n  Point operator + (const Point &B) const\n  {return (Point){x+B.x,y+B.y};}\n  Point operator - (const Point &B) const\n  {return (Point){x-B.x,y-B.y};}\n  Point operator * (const double &B) const\n  {return (Point){x*B,y*B};}\n  Point operator / (const double &B) const\n  {return (Point){x/B,y/B};}\n  double operator ^ (const Point &B) const\n  {return x*B.y-y*B.x;}\n  bool operator == (const Point &B) const\n  {return sign(x-B.x)==0&&sign(y-B.y)==0;}\n}p[MaxN];\nbool cmp(Point A,Point B)\n{return sign(A.rt-B.rt)<0;}\ndouble dis(Point A,Point B)\n{return sqrt((A.x-B.x)*(A.x-B.x)+(A.y-B.y)*(A.y-B.y));}\nstruct Line\n{\n  Point a,b;\n  double len(){return dis(a,b);}\n}l[MaxN];\nbool onl2(Point A,Line L)\n{\n  return sign((A-L.a)^(A-L.b))==0&&\n         sign(A.x-min(L.a.x,L.b.x))>=0&&\n         sign(A.y-min(L.a.y,L.b.y))>=0&&\n         sign(A.x-max(L.a.x,L.b.x))<=0&&\n         sign(A.y-max(L.a.y,L.b.y))<=0;\n}\nbool _onl2(Point A,Line L)\n{\n  return sign(A.x-min(L.a.x,L.b.x))>=0&&\n         sign(A.y-min(L.a.y,L.b.y))>=0&&\n         sign(A.x-max(L.a.x,L.b.x))<=0&&\n         sign(A.y-max(L.a.y,L.b.y))<=0;\n}\nPoint inter(Line L1,Line L2)\n{\n  double ls=(L1.b-L1.a)^(L2.a-L1.a),\n         rs=(L1.b-L1.a)^(L2.b-L1.a);\n  return L2.a+(L2.b-L2.a)*ls/(ls-rs);\n}\ndouble disl0(Point A,Line L)\n{return fabs((L.a-A)^(L.b-A))/dis(L.a,L.b);}\nint m;\n//\u5224\u65ad\u70b9\u662f\u5426\u5728\u7b80\u5355\u591a\u8fb9\u5f62\u5185\nbool in(Point A)\n{\n  for (int i=1;i<=m;i++)\n    if (onl2(A,l[i]))return 0;\n  Line L=(Line){A,(Point){A.x+0.2333,A.y+0.6666}};\n  int cnt=0;\n  for (int i=1;i<=m;i++){\n    Point B=inter(L,l[i]);\n    if (sign(B.y-A.y)>0&&_onl2(B,l[i]))cnt++;\n  }return cnt&1;\n}\ndouble _r[MaxN];\nint n;\nvoid input()\n{\n  scanf(\"%d%d\",&n,&m);\n  double x,y;\n  for (int i=1;i<=n;i++){\n    scanf(\"%lf%lf\",&x,&y);\n    _r[i]=sqrt(x*x+y*y);\n  }\n  for (int i=1;i<=m;i++)\n    scanf(\"%lf%lf\",&l[i].a.x,&l[i].a.y);\n  for (int i=1;i<m;i++)\n    l[i].b=l[i+1].a;\n  l[m].b=l[1].a;\n}\ndouble ans;\nPoint bas=(Point){0,0},t[MaxN];\n//\u5224\u65ad\u4e00\u6bb5\u5f27\u662f\u5426\u5728\u5706\u5185\nvoid check(Point A,Point B,double r)\n{\n  Point C=(B-A)/dis(A,B);\n  C=(Point){-C.y,C.x}*r;\n  //\u6ce8\u610f\u9006\u65f6\u9488\u5e8f\n  if (in(C)){\n    if (A.rt>B.rt)ans+=Pi*2;\n    ans+=B.rt-A.rt;\n  }\n}\nvoid solve(double r)\n{\n  if (sign(r)==0){\n    if (in(bas))ans+=Pi*2;\n    return ;\n  }int tot=0;\n  for (int i=1;i<=m;i++){\n    if (disl0(bas,l[i])-r>-1e-3)continue ;\n    Point C=(l[i].a-l[i].b)/dis(l[i].a,l[i].b);\n    //C: l\u7684\u65b9\u5411\u5411\u91cf\n    Line ML=(Line){bas,(Point){-C.y,C.x}};\n    //ML: l\u7684\u5782\u7ebf\n    Point M=inter(ML,l[i]);\n    double rl=sqrt(r*r-M.x*M.x-M.y*M.y);\n    //\u52fe\u80a1(\u5782\u5f84)\u5b9a\u7406\n    C=C*rl;\n    Point P1=M+C,P2=M-C;\n    //\u76f4\u7ebf\u4e0e\u5706\u4ea4\u70b9\u8ba1\u7b97\u5b8c\u6bd5\n    if (_onl2(P1,l[i]))t[++tot]=P1;\n    if (_onl2(P2,l[i]))t[++tot]=P2;\n  }\n  //\u7279\u5224\u6574\u4e2a\u5706\u5728\u591a\u8fb9\u5f62\u5185/\u5916\u7684\u7279\u6b8a\u60c5\u51b5\n  if (tot==0){\n    Point B=(Point){0,r};\n    if (in(B))ans+=2*Pi;\n    return ;\n  }\n  for (int i=1;i<=tot;i++)\n    t[i].rt=atan2(t[i].x,t[i].y);\n  sort(t+1,t+tot+1,cmp);\n  //\u6781\u89d2\u6392\u5e8f\n  for (int i=1;i<=tot;i++)\n    if (!(t[i]==t[i%tot+1]))\n      check(t[i],t[i%tot+1],r);\n}\nint main()\n{\n  input();\n  for (int i=1;i<=n;i++)solve(_r[i]);\n  printf(\"%.5lf\",fabs(ans/Pi/2));\n  return 0;\n}\n```",
        "postTime": 1565351149,
        "uid": 58705,
        "name": "command_block",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P5467 \u3010[PKUSC2018]PKUSC\u3011"
    },
    {
        "content": "# P5467 [PKUSC2018]PKUSC\n\n### [Link](https://www.luogu.com.cn/problem/P5467)\n\n## \u9898\u610f\u7b80\u8ff0\n\n> \u5e73\u9762\u4e0a\u6709 $ n $ \u4e2a\u70b9\uff0c\u4e00\u4e2a $ m $ \u6761\u8fb9\u7684\u7b80\u5355\u591a\u8fb9\u5f62\uff0c\u4e0d\u4e00\u5b9a\u4e3a\u6b63\u591a\u8fb9\u5f62\u3002\n>\n> \u73b0\u968f\u673a\u4e00\u4e2a $ \\alpha \\in [-\\pi,\\pi) $ \uff0c\u5c06\u8fd9\u4e2a\u591a\u8fb9\u5f62\u7ed5\u539f\u70b9\u9006\u65f6\u9488\u65cb\u8f6c $ \\alpha $ \u7684\u89d2\u5ea6\uff0c\u6c42\u88ab**\u4e25\u683c**\u5708\u5728\u591a\u8fb9\u5f62\u5185\u7684\u70b9\u7684\u671f\u671b\u6570\u91cf\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fb9\u754c\u4e0a\u7684\u70b9\u4e0d\u7b97\u3002\n>\n> $ n \\leq 200 , m \\leq 500 $ .\n\n## solution\n\n\u5bb9\u6613\u60f3\u5230\uff1a\n\n+ \u591a\u8fb9\u5f62\u7ed5\u539f\u70b9\u65cb\u8f6c\u4e0e\u5176\u5b83\u70b9\u7ed5\u539f\u70b9\u65cb\u8f6c\u6ca1\u533a\u522b\u3002\n+ \u6839\u636e\u671f\u671b\u7684\u7ebf\u6027\u6027\uff0c\u6211\u4eec\u53ea\u9700\u6c42\u51fa\u6bcf\u4e2a\u70b9\u88ab\u5708\u5728\u591a\u8fb9\u5f62\u5185\u7684\u6982\u7387\u3002\n\n\u6211\u4eec\u53ea\u9700\u6c42\u51fa\u6bcf\u4e2a\u70b9\u7684\u8f68\u8ff9\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u7684\u5706\u5f27\u5bf9\u5e94\u7684\u5706\u5fc3\u89d2\u4e4b\u548c\u5373\u53ef\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mkqv2brn.png)\n\n\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f\n\n\u53ef\u4ee5\u6c42\u51fa\u5706\u4e0e\u591a\u8fb9\u5f62\u7684\u6240\u6709\u4ea4\u70b9\uff0c\u6781\u89d2\u6392\u5e8f\u540e\u6c42\u89e3\u3002\n\n\u8fd9\u91cc\u7ed9\u51fa\u53e6\u4e00\u79cd\u7801\u91cf\u5c0f\u3001\u901f\u5ea6\u8f83\u5feb\u7684\u65b9\u6cd5\u3002\n\n\u5bf9\u4e8e\u4e00\u6761\u8fb9\uff0c\u6211\u4eec\u8003\u8651\u6c42\u51fa\u8fd9\u4e2a\u5706\u6709\u591a\u5c11\u89d2\u5ea6\u5728\u81ea\u5df1\u201c\u5185\u90e8\u201d\uff0c\u5206\u8ba8\u4e00\u6ce2\u3002\n\n1. \u88ab\u5706\u5b8c\u5168\u5305\u542b\u7684\u8fb9\u3002\u8fd9\u6837\u7684\u8fb9\u6ca1\u5565\u7528\uff0c\u4e0d\u505a\u8d21\u732e\u3002\n\n2. \u5c06\u5706\u5b8c\u5168\u201c\u5305\u542b\u201d\u7684\u8fb9\u3002\n\n   \u8fd9\u79cd\u60c5\u51b5\u4e0b\u6240\u6c42\u5373\u4e3a\u7ebf\u6bb5\u4e24\u7aef\u70b9\u7684\u6781\u89d2\u5dee\u3002\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/dqjo61jb.png)\n\n   \u987a\u5e26\u4e00\u63d0\u56fe\u4e2d\u7684 $ h $ \u5982\u4f55\u6c42\uff1a $ h = \\dfrac{2S_{\\Delta AOB}}{AB} = \\dfrac{| \\vec{OA} \\times \\vec{OB} |}{AB} $ .\n\n3. \u6240\u5728\u76f4\u7ebf\u4e0e\u5706\u76f8\u4ea4\u7684\u8fb9\u3002\n\n   ![](https://cdn.luogu.com.cn/upload/image_hosting/zdmarooh.png)\n\n   \u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f $ \\angle{AOC} + \\angle{BOD} $ .\n\n   \u6ce8\u610f\u5230 $ \\angle{AOC} = \\angle{OCD} - \\angle{OAB} = \\arcsin\\dfrac{h}{r} - \\arccos\\dfrac{\\vec{AO} \\cdot \\vec{AB}}{AO \\times AB} $ .\n\n   \u8fd9\u4e0d\u5c31\u5f88\u8212\u670d\u4e86\uff5e\n\n\u8fd8\u6709\u4e00\u4ef6\u4e8b\uff0c\u6211\u4eec\u7ed9\u8fb9\u6309\u8f93\u5165\u987a\u5e8f\u5b9a\u4e2a\u5411\uff0c\u8d77\u70b9\u6781\u89d2\u5c0f\u4e8e\u7ec8\u70b9\u6781\u89d2\u7684\u8fb9\u7684\u8d21\u732e\u4e3a\u6b63\uff0c\u5426\u5219\u4e3a\u8d1f\uff0c\u8fd9\u4e2a\u753b\u4e2a\u56fe\u624b\u6a21\u4e00\u4e0b\u5c31\u5f88\u597d\u7406\u89e3\u3002\n\n\u6700\u540e\u518d\u6765\u7279\u5224\u4e00\u4e0b\u4e0e\u539f\u70b9\u91cd\u5408\u7684\u70b9\uff0c\u9700\u8981\u5224\u65ad\u5176\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5916\u6216\u591a\u8fb9\u5f62\u7684\u8fb9\u754c\u4e0a\u3002\n\n\u8fb9\u754c\u4e0d\u7528\u591a\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5c04\u7ebf\u6cd5\u5224\u65ad\u70b9\u662f\u5426\u5728\u591a\u8fb9\u5f62\u5185\uff0c\u5177\u4f53\u5730\uff0c\u4ece\u8be5\u70b9\u5411 $ x $ \u8f74\u6b63\u65b9\u5411\u5f15\u4e00\u6761\u5c04\u7ebf\uff0c\u5982\u679c\u5b83\u4e0e\u591a\u8fb9\u5f62\u7684\u4ea4\u70b9\u4e2a\u6570\u4e3a\u5947\u6570\uff0c\u5219\u53ef\u5f97\u8be5\u70b9\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u3002\n\n\u53ea\u9700\u8981\u5f3a\u5236\u4e00\u6761\u8fb9\u7eb5\u5750\u6807\u8f83\u5927\u7684\u7aef\u70b9\u4e25\u683c\u5728\u4ea4\u70b9\u4e0a\u65b9\u5c31\u53ef\u4ee5\u5e94\u5bf9\u4e00\u4e9b\u5201\u94bb\u7684\u60c5\u51b5\u3002\n\n\u4e0a\u4ee3\u7801\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\nnamespace code{\n\t#define R register\n\tconst int maxn=500;const double e=1e-10,pi=acos(-1);\n\tinline int read(){\n\t\tint a=0,b=1;char s=getchar();\n\t\twhile(s<48||s>57){if(s=='-'){b=-1;}s=getchar();}\n\t\twhile(s>=48&&s<=57)a=(a<<1)+(a<<3)+s-48,s=getchar();\n\t\treturn a*b;\n\t}\n\tint n,m;\n\tstruct node{\n\t\tdouble x,y;\n\t\tdouble operator * (const node &a)const{return x*a.x+y*a.y;}\n\t\tdouble operator ^ (const node &a)const{return x*a.y-y*a.x;}\n\t\tdouble dis(){return sqrt(x*x+y*y);}\n\t\tnode operator - (const node &a)const{return (node){x-a.x,y-a.y};}\n\t}a[maxn+5],b[maxn+5];\n\tinline void input(){\n\t\tn=read(),m=read();\n\t\tfor(R int i=1;i<=n;i=-~i)a[i]=(node){1.0*read(),1.0*read()};\n\t\tfor(R int i=1;i<=m;i=-~i)b[i]=(node){1.0*read(),1.0*read()};\n\t\tb[m+1]=b[1];\n\t}\n\tinline bool check(node a,node b){\n\t\tif(a.y-b.y<-e)swap(a,b);\n\t\treturn a.y>e&&b.y<e&&(b^a)>e;\n\t}\n\tinline bool check(){\n\t\tfor(R int i=1;i<=m;i=-~i)\n\t\t\tif((b[i]^b[i+1])<e&&(b[i]^b[i+1])>-e&&b[i]*b[i+1]<e)return false;//\u5224\u65ad\u70b9\u662f\u5426\u5728\u8fb9\u754c\u4e0a\n\t\tint num=0;\n\t\tfor(R int i=1;i<=m;i=-~i)num^=check(b[i],b[i+1]);//\u6c42\u4e0e\u591a\u8fb9\u5f62\u7684\u4ea4\u70b9\u4e2a\u6570\u7684\u5947\u5076\u6027\n\t\treturn num&1;\n\t}\n\tinline double calc(node a,node b,double r){\n\t\tif(max(a.dis(),b.dis())-r<-e)return 0;\n\t\tdouble h=fabs((a^b)/(a-b).dis()),alpha=acos(a*b/(a.dis()*b.dis()));//\u6ce8\u610fh\u8981\u53d6abs,alpha\u4e3a\u4e24\u7aef\u70b9\u7684\u6781\u89d2\u5dee\n\t\tdouble opt=(a^b)>e?1:-1;\n\t\tif(h-r>-e)return alpha*opt;\n\t\tdouble beta=asin(h/r),gamma=acos((a*(a-b))/(a.dis()*(a-b).dis()));\n\t\tdouble theta=acos((b*(b-a))/((b-a).dis()*b.dis()));\n\t\treturn opt*min(alpha,((beta-gamma>e?beta-gamma:0)+(beta-theta>e?beta-theta:0)));\n\t}\n\tinline void solve(){\n\t\tdouble ans=0;\n\t\tfor(R int i=1;i<=n;i=-~i)if(a[i].dis()<e)ans+=check()*2.0*pi;\n\t\tfor(R int i=1;i<=m;i=-~i)\n\t\t\tif((b[i]-b[i+1]).dis()>e&&((b[i]^b[i+1])<-e||(b[i]^b[i+1])>e)){\n\t\t\t\tfor(R int j=1;j<=n;j=-~j)\n\t\t\t\t\tif(a[j].dis()>e)ans+=calc(b[i],b[i+1],a[j].dis());\n\t\t\t}\n\t\tans/=2.0*pi;printf(\"%.5lf\\n\",ans);\n\t}\n\tinline void main(){input(),solve();}\n}\nint main(){return code::main(),0;}\n```\n\n",
        "postTime": 1654421720,
        "uid": 190193,
        "name": "\u51a5\u9e9f",
        "ccfLevel": 7,
        "title": "P5467"
    }
]
[
    {
        "content": "\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e2a\u4efb\u52a1\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u5206\u4eba\u65b9\u5f0f\u8bb0\u5f55\u4e0b\u6765\u3002\u7531\u4e8e\u4eba\u6570\u5f88\u5c11\u53ef\u4ee5\u7528\u4f4d\u8fd0\u7b97\u3002\n\n\u6309\u8d77\u59cb\u65f6\u95f4\u6392\u5e8f\uff0c\u7531\u4e8e\u53ea\u662f\u6539\u53d8\u4e86\u539f\u5e8f\u5217\u5bf9\u4efb\u52a1\u5206\u914d\u65f6\u7684\u7f16\u53f7\uff0c\u6240\u4ee5\u7528myp\u6807\u8bb0\u4e00\u4e0b\u5373\u53ef\u3002\n## \u5176\u5b9e\u3002\u3002\u3002\u8fd9\u5b8c\u5168\u53ef\u4ee5\u66b4\u529b\n\u66b4\u529b\u5224\u65ad\u662f\u5426\u53ef\u884c\u3002\n\n\u771f\u66b4\u529b\n# \u4ee3\u7801\u9644\u4e0a\uff1a\n```\n#include <iostream>\n#include <cstring>\n#include <cstdio>\n#include <algorithm>\n#include <queue>\n#include <vector>\nusing namespace std;\n#define pb(a) push_back(a)\nint n,m;\nint task[20][20];\nstruct node\n{\n    int need,val,st,ed,id;\n}save[100];\nlong long ans;\nlong long kind[20][2048];\nint tim[100],myp[100],sum[100];\nvoid dfs(int now,int val)\n{\n    if(val>ans)\n    {\n        ans=val;\n    }\n    if(now>m) return ;\n    dfs(now+1,val);\n    bool flag;\n    int tmp[20];\n    for(int j=1;j<=n;j++) tmp[j]=tim[j];\n    for(int i=1;i<=kind[myp[now]][0];i++)\n    {\n        flag=true;\n        for(int j=1;j<=n;j++)\n        {\n            if( (kind[myp[now]][i]>>(j-1))&1)\n            {\n                if(tim[j]<save[now].st)\n                {\n                    tim[j]=save[now].ed;\n                }\n                else\n                {\n                    flag=false;\n                    break;\n                }\n            }\n        }\n        if(flag)\n        {\n            dfs(now+1,val+save[now].val);\n        }\n        for(int j=1;j<=n;j++) tim[j]=tmp[j];\n    }\n}\nbool cmp(node aa,node bb)\n{\n    return aa.st<bb.st;\n}\n\nbool judge(int num)\n{\n    if(sum[num]==save[num].need) return true;\n    return false;\n}\nint main()\n{\n    \n    int a,b,c;\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d\",&a);\n        for(int j=1;j<=a;j++)\n        {\n            scanf(\"%d\",&b);\n            task[i][b]=1;\n        }\n    }\n    for(int i=1;i<=m;i++)\n    {\n       scanf(\"%d%d%d%d\",&save[i].st,&save[i].ed,&save[i].need,&save[i].val);\n       save[i].id=i;\n    }\n\n    int k;\n    for(int i=1;i<=(1<<n)-1;i++)\n    {\n        k=0;\n        for(int j=1;j<=m;j++)\n            sum[j]=0;\n        for(int j=1;j<=n;j++)\n        {\n            if( (i>>(j-1))&1 )\n            {\n                k++;\n                for(int t=1;t<=m;t++)\n                {\n                    if(task[j][t])\n                    {\n                        sum[t]++;\n                    }\n                }\n            }\n        }\n        for(int j=1;j<=m;j++)\n        {\n            if(judge(j))\n            {\n                if(sum[j]!=k) continue;\n                kind[j][0]++;\n                kind[j][kind[j][0]]=i;\n            }\n        }\n    }\n    sort(save+1,save+1+m,cmp);\n    for(int i=1;i<=m;i++)\n    {\n        myp[i]=save[i].id;\n        //printf(\"%d\\n\",myp[i]);\n    }\n    dfs(1,0);\n    printf(\"%lld\\n\",ans);\n    return 0;\n\n```",
        "postTime": 1525614328,
        "uid": 75446,
        "name": "Unknown_Error\u00a0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4540 \u3010[HNOI2006]\u519b\u673a\u8c03\u5ea6\u3011"
    }
]
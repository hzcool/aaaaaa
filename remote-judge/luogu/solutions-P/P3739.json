[
    {
        "content": "\u4f5c\u4e3a\u4e00\u4e2a\u849f\u84bb\u6211\u627e\u4e86\u4e24\u4e2a\u5c0f\u65f6\u7684\u89c4\u5f8b\u624d\u8c03\u51fa\u6765emmmm\n\n\u597d\u50cf\u6211\u7684\u505a\u6cd5\u4e0d\u662f\u5f88\u4e00\u6837\n\n\u5982\u679c\u77e5\u9053\u4e24\u4e2a\u70b9\uff0c\u53ef\u4ee5\u76f4\u63a5\u6c42\u51fa\u5176\u8ddd\u79bb\n\n\u8bbe$A(x_1,y_1),B(x_2,y_2)$\u4e14$x_1\\leq x_2$\n\n\u5148\u628a$B$\u5e73\u79fb\u5230$A$\u6240\u5728\u5c42\uff0c\u8fd9\u4e00\u6b65\u7528\u4e86$2(x_2-x_1)$\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5e73\u79fb\u540e$B$\u5728\u6c34\u5e73\u65b9\u5411\u5ef6\u4f38\u7684\u6700\u5927\u8ddd\u79bb\n\n\u53ef\u4ee5\u770b\u51fa\u8fd9\u4e2a\u8ddd\u79bb\u662f$x_2-x_1$\n\n\u5982\u679c$A$\u548c$B'$\u7684\u8ddd\u79bb\u4e0d\u5728\u8fd9\u4e2a\u8303\u56f4\u5185\uff0c\u6211\u4eec\u5c31\u8981\u7ed9\u7b54\u6848\u52a0\u4e0a\u8fd9\u4e2a\u5dee\n\n\u6ce8\u610f\u6c34\u5e73\u8ddd\u79bb\u8ba1\u7b97\u65f6\u8981\u8865\u6210\u6b63\u65b9\u5f62\u6765\u7b97\n\n\u4e5f\u5c31\u662f$ans+=max(|y_1-y_2+x_2-x_1|-x_2+x_1,0)$\n\n\u5426\u5219\u7684\u8bdd\uff0c\u8fd8\u8981\u8003\u8651\u5947\u5076\u6027\n\n\u5bb9\u6613~~\u6253\u8868~~\u770b\u51fa\u7b54\u6848\u9700\u8981\u52a0\u4e0a$y_2\\ mod\\ 2\\ -\\ y_1\\ mod\\ 2$\n\n\u8fd9\u6837\u5b50\u5c31\u53ef\u4ee5\u5f97\u5230\u6700\u7ec8\u7b54\u6848\u4e86\n\n\u4f46\u662f\u8ddd\u79bb\u660e\u660e\u5e94\u8be5\u662f\u5bf9\u79f0\u7684\u7b97\u51fa\u6765\u7684\u8fd9\u4e2a\u5f0f\u5b50\u5374\u4e0d\u5bf9\u79f0~~\u597d\u6c14\u554a~~\u6211\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\n\n\u4ee3\u7801\u8fd8\u662f\u633a\u7b80\u5355\u7684\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nint n,m,k,s,x,y,ans=1e9+7;\nint abs1(int x){return x>0?x:-x;}\nint dis(int x1,int y1,int x2,int y2)\n{\n\tif(x1>x2)swap(x1,x2),swap(y1,y2);\n\tint ans=(x2-x1)<<1,t=abs1(y1-y2+x2-x1)+x1-x2;\n\tans+=t>0?t:(y2&1)-(y1&1);\n\treturn k*ans;\n}\nint getin()\n{\n\tint x=0;char ch=getchar();\n\twhile(ch<'0'||ch>'9')ch=getchar();\n\twhile(ch>='0'&&ch<='9')x=x*10+ch-48,ch=getchar();\n\treturn x;\n}\nint main()\n{\n\tn=getin(),m=getin(),k=getin(),s=getin(),x=getin(),y=getin();\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint xx=getin(),yy=getin();\n\t\tans=min(ans,dis(x,y,xx,yy)+1);\n\t}\n\tif(ans<=s)cout<<s-ans<<endl;\n\telse cout<<-1<<endl;\n}\n```\n~~\u627e\u89c4\u5f8b\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u8fd9\u8f88\u5b50\u90fd\u4e0d\u53ef\u80fd\u627e\u89c4\u5f8b\u7684~~",
        "postTime": 1534815675,
        "uid": 22136,
        "name": "qwaszx",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P3739 \u3010[HAOI2014]\u8d70\u51fa\u91d1\u5b57\u5854\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u554a\uff0c\u771f\u662f\u6d41\u5f0a  \n\u6211\u4e00\u5f00\u59cb\u662f\u8499\u5708\u7684  \n\n\u7136\u540e\u5c31\u731c\u6d4b\u4e00\u4e9b\u6027\u8d28\uff0c\u6bd4\u5982\u4ee4(x,y)\u4e3a\u5f53\u524d\u7684\u5750\u6807  \n\u90a3\u6211\u4eec\u4f1a\u53d1\u73b0\u8fd9\u6837\u7684\u6027(gui)\u8d28(lv) :  \n\n**\u9996\u5148\u6240\u6709 y \u4e3a\u5076\u6570\u7684\u4e09\u89d2\u5f62\u662f\u53cd\u7740\u7684(\u9876\u70b9\u5411\u4e0b)\uff0c\u540c\u7406 y \u4e3a\u5947\u6570\u7684\u4e09\u89d2\u662f\u6b63\u7740\u7684  **\n\n**\u7136\u540e\uff0c\u4e24\u4e2a\u4e09\u89d2\u7684\u76f8\u5bf9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u8ddd\u79bb\u5219\u4e0d\u53d8**\n\n**\u518d\u7136\u540e\uff0c\u4efb\u4f55\u4e00\u4e2a\u4e09\u89d2\u90fd\u53ef\u4ee5\u901a\u8fc7\u5bf9\u79f0\u79fb\u52a8\u5230(x,1)  **\n\n**\u6700\u540e\u4efb\u4f55\u4e00\u4e2a(x,1)\u5f62\u5f0f\u7684\u4e09\u89d2\u548c(1,1)\u4e4b\u95f4\u7684\u8ddd\u79bb\u662f(x-1)<<1  **\n  \n\u6839\u636e\u4e0a\u9762\u7684\u6027\u8d28\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u628a\u4efb\u4f55\u4e00\u4e2a\u4e09\u89d2\u7684\u6a2a\u7eb5\u5750\u6807\u505a\u4e00\u4e9b\u5904\u7406\uff0c\u4f7f\u4e4b\u6210\u4e3a(x,1)\u7684\u5f62\u5f0f\uff0c\u5e76\u4e14\u6b64\u65f6\u5c06\u8d77\u59cb\u5750\u6807\u70b9\u8f6c\u5316\u4e3a(1,1),\u8fd9\u6837\u5c31\u597d\u6c42\u4e86\u8bb8\u591a  \n\n\u5728\u6b64\u4e4b\u524d\uff0c\u7531\u4e8e\u53ef\u80fd\u4e09\u89d2\u662f\u5012\u7740\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5c06\u4ed6\u4eec\u6b63\u8fc7\u6765  \n\n\u8fd8\u6709\u53ef\u80fd\u662f\u8d77\u59cb\u70b9\u7684\u5750\u6807\u5728\u8be2\u95ee\u70b9\u7684\u4e0b\u9762\uff0c\u6211\u4eec\u8981\u5c06\u4ed6\u4eec\u4ea4\u6362  \n\n\u800c\u4e14\u7ffb\u8f6c\u65f6\u4f1a\u5bf9 ans \u4ea7\u751f\u4e00\u5b9a\u5f71\u54cd\uff0c\u800c\u4e14\u8981\u5148\u4ea4\u6362\u518d\u7ffb\u8f6c  \n\u81f3\u4e8e\u539f\u56e0\uff0c\u8bf7(wo)\u8bfb(lan)\u8005(de)\u81ea(qu)\u884c(jie)\u8003(shi)\u8651(le)(\u753b\u4e2a\u56fe\u5c31\u597d\u4e86\u7684)  \n\n-------------------\n\n```cpp\n#include <bits/stdc++.h>\n#define II int\n#define IL inline\n#define R register\n#define I 123546\nusing namespace std;\n\ntemplate < typename T > IL void of(R T &a) {\n\tR char c=getchar (); R T w=1, p=0;\n\twhile (!isdigit(c)) { if(c=='-') w=-1; c=getchar (); }\n\twhile (isdigit(c)) { p=p*10+c-'0'; c=getchar (); }\n\ta=w*p;\n}\n\n/* -------------------- Peipei -------------------- */\n\nII n,m,k,s,nx,ny;\t\n\nint main()\n{\n\tof(n); of(m); of(k); of(s); of(nx); of(ny);\n\tR II ans=1e9, now=0;\n\tfor(R II i=1,x,y;i<=m;i++) {\n\t\tR II xx=nx, yy=ny;\n\t\tnow=0;\n\t\tof(x); of(y);\n\t\tif(nx>x) swap(x,nx), swap(y,ny);\n\t\tif(!(ny&1)) nx--, ny--, now--;\n\t\tif(!(y&1)) x--, y--, now++;\n\t\t\n\t\tx-=nx-1; y-=ny-1;\n\t\tif(y>x*2-1) now+=y-(x*2-1);\n\t\tif(y<1) now+=1-y;\n\t\ty=1;\n\t\tnow+=(x-1)*2;\n\t\tans=min(ans,now);\n\t\tnx=xx; ny=yy;\n\t}\n\tans*=k; ans++;\n\t\n\tif(ans>s) ans=-1;\n\telse ans=s-ans;\n\tprintf(\"%d\\n\",ans);\n\texit(0);\n}\n```\n---------------------------",
        "postTime": 1520081323,
        "uid": 36716,
        "name": "wuzhoupei",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3739 \u3010[HAOI2014]\u8d70\u51fa\u91d1\u5b57\u5854\u3011"
    },
    {
        "content": "~~\u840c\u65b0\u4e00\u4e2a\uff0c\u7b2c\u4e00\u6b21\u53d1\u9898\u89e3\uff0cdalao\u52ff\u55b7~~~~\n\n\u4e00\u770b\u5230\u8fd9\u4e2a\u9898\uff0c\u6211\u5c31\u60f3 bfs \uff0c\u4f46\u770b\u4e86\u770b\u6570\u636e\uff0c\u53d1\u73b0bfs\u4f1aGG\u3002\u60f3\u4e86\u534a\u5929\uff0c\u518d\u52a0\u4e0a\u9ad8\u4eba\u6307\u70b9\uff0c\u7ec8\u4e8e\u53d1\u73b0\u8fd9\u4e2a\u91d1\u5b57\u5854\u6bd4\u8f83\u7279\u6b8a\uff0c\u56e0\u4e3a**\u5982\u679c\u77e5\u9053\u4e24\u70b9\u5750\u6807\uff0c\u53ef\u4ee5\u76f4\u63a5\u628a\u4ed6\u4eec\u7684\u6700\u77ed\u8ddd\u79bb\u6c42\u51fa\u6765\u3002**\n\n\u7136\u540e\uff0c\u6211\u4eec\u5c31\u8981\u628a\u89c4\u5f8b\u627e\u51fa\u6765\u3002\n\n### \u9996\u5148\uff0c\u6211\u4eec\u8003\u8651\u4e24\u4e2a\u5750\u6807\u6240\u4ee3\u8868\u7684\u4e09\u89d2\u5f62\u90fd\u4e3a\u9876\u89d2\u671d\u4e0a\u6216\u9876\u89d2\u671d\u4e0b\u7684\u60c5\u51b5\uff08\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u4e09\u89d2\u5f62\u53ea\u6709\u8fd9\u4e24\u79cd\u60c5\u51b5\uff09\u3002\n\n\u4e0d\u59a8\u8bbe\u8d77\u70b9\u5750\u6807\u4e3a(sx, sy), \u51fa\u53e3\u5750\u6807\u4e3a(dx, dy)\uff0c\u5176\u4e2dsx <= dx\uff08\u56e0\u4e3a\u4ece\u7ec8\u70b9\u8d70\u5230\u8d77\u70b9\u7684\u8ddd\u79bb\u4e0e\u4ece\u8d77\u70b9\u8d70\u5230\u7ec8\u70b9\u76f8\u7b49\uff09.\n\n**CASE 1. \u82e5\u4e24\u4e2a\u4e09\u89d2\u5f62\u5728\u540c\u4e00\u5217\uff08\u8fd9\u91cc\u7684\u5217\u662f\u659c\u7740\u7684\uff09**\n\n\u5c31\u50cf\u4e24\u70b9\u4e4b\u95f4\u7ebf\u6bb5\u6700\u77ed\u4e00\u6837\uff0c\u8fd9\u662f\u6211\u4eec\u4e00\u5b9a\u4f1a\u76f4\u63a5\u671d\u7740\u7ec8\u70b9\u8d70\u8fc7\u53bb\uff0c\u4e0d\u96be\u53d1\u73b0\uff0c\u6b64\u65f6\u7684\u6700\u77ed\u8ddd\u79bb\u4e3a ** _2\u00d7(dx-sx)_ **\u3002\n\n**CASE 2. \u82e5\u4e24\u4e2a\u4e09\u89d2\u5f62\u5728\u540c\u4e00\u884c**\n\n\u8d70\u6cd5\u540c\u4e0a\uff0c\u6b64\u65f6\u6700\u77ed\u8ddd\u79bb\u4e3a ** _|dy-sy|_ **\u3002\n\n**CASE 3. \u82e5\u4e24\u4e2a\u4e09\u89d2\u5f62\u4e0d\u6ee1\u8db3\u6761\u4ef61\u548c\u6761\u4ef62**\n\n\u6211\u4eec\u8be5\u600e\u4e48\u529e\u5462\uff1f\u56e0\u4e3a\u8d70\u76f4\u7ebf\u4e00\u5b9a\u662f\u6700\u77ed\u7684\uff0c\u6211\u4eec\u6765\u8003\u8651\u5e73\u79fb\u3002\u82e5\u662f\u80fd\u628a\u5b83\u4eec\u5e73\u79fb\u5230\u540c\u4e00\u884c\u6216\u540c\u4e00\u5217\u4e0a\uff0c\u5c82\u4e0d\u7f8e\u54c9\uff1f\n\n\u540c\u65f6\uff0c\u56e0\u4e3a\u6211\u4eec\u5047\u8bbe\u7ec8\u70b9\u5728\u8d77\u70b9\u4e0b\u65b9\uff0c\u6240\u4ee5\u4e0d\u96be\u8bc1\u660e\uff0c\u5148\u5c06\u5b83\u4eec\u79fb\u5230\u540c\u4e00\u5217\u7684\u8ddd\u79bb\u6700\u77ed\u3002\n\n\u5c06\u5e73\u79fb\u64cd\u4f5c\u5206\u89e3\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5c31\u662f\u5148\u5c06\u7ec8\u70b9\u5904\u4e09\u89d2\u5f62\u5e73\u79fb\u5230\u540c\u4e00\u884c\u7684\u67d0\u4e00\u4e2a\u4e09\u89d2\u5f62(mx, my)\u4e0a\uff0c\u518d\u5e73\u79fb\u5230\u8d77\u70b9\u5904\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51famx\u548cmy\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u8be5\u600e\u4e48\u6c42\u5462\uff1f\u6b64\u65f6\uff0c\u6211\u4eec\u53c8\u53d1\u73b0\u4e24\u4e2a\u7ed3\u8bba:\n\n1.\u5728\u50cf\u201c/\u201d\u8fd9\u6837\u7684\u659c\u5217\u4e0a\uff0c\u4efb\u610f\u4e24\u4e09\u89d2\u5f62\u7684y\u5750\u6807\u76f8\u7b49\n\n2.\u5728\u50cf\u201c\\\u201d\u8fd9\u6837\u7684\u659c\u5217\u4e0a\uff0c\u4efb\u610f\u4e24\u4e09\u89d2\u5f62(x1, y1), (x2, y2)\uff0c\u5176\u4e2dx1 <= x2\uff0c\u5219\u6709 **_y2-y1 = 2\u00d7(x2-x1)_** \n\n\u7136\u540e\uff0c\u6709\u4e0a\u9762\u4e24\u6761\u6027\u8d28\uff0c\u6211\u4eec\u5c31\u4e0d\u96be\u6c42\u51famx\u548cmy\u4e86\u3002\u7531\u4e0a\u5f0f\u53ef\u5f97\uff1a\n\n1.\u82e5dy < sy, \u5219\u6709** _mx = dx\uff0cmy = sy_ **\n\n2.\u82e5dy > sy+2\u00d7(dx-sx)\uff0c\u5219\u6709** _mx = dx\uff0cmy = sy+2\u00d7(dx-sx)_ **\n\n\u4e8e\u662f\u4e2d\u95f4\u70b9(mx, my)\u5c31\u6c42\u51fa\u6765\u4e86\u3002\u63a5\u7740\u6211\u4eec\u5206\u522b\u8fd0\u7528**CASE 2**\u548c**CASE 1**\u7684\u7ed3\u8bba\uff0c\u5c31\u53ef\u4ee5\u628a\u6700\u77ed\u8ddd\u79bb\u6c42\u51fa\u6765\u4e86\u3002\n\n### \u5176\u6b21\uff0c\u6211\u4eec\u8003\u8651\u4e24\u4e2a\u4e09\u89d2\u5f62\u4e00\u4e2a\u9876\u89d2\u671d\u4e0a\uff0c\u4e00\u4e2a\u9876\u89d2\u671d\u4e0b\u7684\u60c5\u51b5\u3002\n\n\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u4eec\u90fd\u7ffb\u8f6c\u5230\u4e00\u4e2a\u65b9\u5411\u3002\u4e0d\u96be\u5f97\u51fa\uff0c\u6bcf\u6b21\u7ffb\u8f6c\u7684\u4ee3\u4ef7\u90fd\u4e3ak\u3002\u7136\u540e\u6211\u4eec\u5c31\u628a\u5b83\u4eec\u53d8\u6210\u540c\u4e00\u4e2a\u65b9\u5411\u4e86\uff0c\u53ef\u4ee5\u8fd0\u7528\u4e0a\u9762\u7684\u7ed3\u8bba\u6c42\u89e3\u3002\n\n**\u6ce8\u610f\uff01**\u7ffb\u8f6c\u4e0a\u65b9\u7684\u4e09\u89d2\u5f62\u548c\u4e0b\u65b9\u7684\u4e09\u89d2\u5f62\u7684\u4ee3\u4ef7\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u4e00\u4e2a\u4e3ak\uff0c\u4e00\u4e2a\u4e3a-k\uff08 _~~\u60f3\u4e00\u60f3\uff0c\u4e3a\u4ec0\u4e48~~_ \uff09\n\n\u4e0a\u4ee3\u7801\uff08\u4e0d\u4f1a\u5feb\u8bfb-__-|\uff09\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint n, m, k, s;\n\nint calc(int sx, int sy, int dx, int dy) {\n    int ans = 0;\n    if(sx > dx) swap(sx, dx), swap(sy, dy); //\u8c03\u6574\u4f4d\u7f6e\n    if(!(sy & 1)) sx--, sy--, ans--;\n    if(!(dy & 1)) dx--, dy--, ans++; //\u7ffb\u8f6c\u64cd\u4f5c\n    if(dy > sy + (dx - sx << 1)) ans += dy - (sy + (dx - sx << 1)); //\u6ce8\u610f\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7!\n    if(dy < sy) ans += sy - dy;\n    ans += dx - sx << 1;\n    return ans * k + 1; //\u522b\u5fd8\u8bb0\u4e58k\u540e\u52a01\n}\n\nint main() {\n    int sx, sy, ans = 0x8f8f8f8f;\n    scanf(\"%d%d%d%d\", &n, &m, &k, &s);\n    scanf(\"%d%d\", &sx, &sy);\n    for(int i = 1, dx, dy; i <= m; i++) {\n        scanf(\"%d%d\", &dx, &dy);\n        int c = calc(sx, sy, dx, dy);\n        if(c <= s) ans = max(ans, s - c);\n    }\n    if(ans == 0x8f8f8f8f) printf(\"-1\");\n    else printf(\"%d\", ans);\n    return 0;\n}\n```",
        "postTime": 1523427141,
        "uid": 55450,
        "name": "dummyummy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3739 \u3010[HAOI2014]\u8d70\u51fa\u91d1\u5b57\u5854\u3011"
    },
    {
        "content": "# \u592a\u957f\u4e0d\u770b\u7248\n\n\u8bbe:\n\n- Dr. Kong \u5f53\u524d\u6240\u5728\u623f\u95f4\u4e3a $(x_1, y_1)$\uff0c\u51fa\u53e3\u623f\u95f4\u4e3a $(x_2, y_2)$;\n\n- Dr. Kong \u4ece $(x_1, y_1)$ \u8d70\u5230 $(x_2, y_2)$ \u7684\u6b21\u6570\u4e3a $f(x_1, y_1, x_2, y_2)$;\n\n- \u4ee4\n$$\ng(x_1, y_1, x_2, y_2) = \\left \\{\n\\begin{aligned}\n& \\lvert x_2 - x_1 + y_2 - y_1 \\rvert + x_1 - x_2 \\quad \\lvert x_2 - x_1 + y_2 - y_1 \\rvert > x_2 - x_1 \\\\\n& y_2 \\bmod 2 - y_1 \\bmod 2\\quad \\lvert x_2 - x_1 + y_2 - y_1 \\rvert \\leq x_2 - x_1 \\\\\n\\end{aligned}\n\\right\n.\n$$\n\n\u5219\uff1a\n\n$$\nf(x_1, y_1, x_2, y_2) = \\left \\{\n\\begin{aligned}\n& 2(x_2 - x_1) + g(x_1, y_1, x_2, y_2) \\quad x_1 \\leq x_2 \\\\\n& f(x_2, y_2, x_1, y_1) \\quad x_1 > x_2\n\\end{aligned}\n\\right\n.\n$$\n\n\u7b54\u6848\u5373\uff1a\n\n$$\nans = \\left \\{\n\\begin{aligned}\n& s - k \\min_{i = 1}^m f(x_a, y_a, x_i, y_i) - 1 \\quad k \\min_{i = 1}^m f(x_a, y_a, x_i, y_i) < s \\\\\n& -1 \\quad k \\min_{i = 1}^m f(x_a, y_a, x_i, y_i) \\geq s\n\\end{aligned}\n\\right\n.\n$$\n\n# \u6b63\u6587\n\n\u6b63\u6587\u90e8\u5206\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u63a8\u51fa\u4ee5\u4e0a\u51fd\u6570\u3002\n\n\u7531\u4e0a\u5b9a\u4e49\uff0c\u5bb9\u6613\u770b\u51fa $f(x_1, y_1, x_2, y_2)$ \u5373 $(x_1, y_1)$ \u4e0e $(x_2, y_2)$ \u4e4b\u95f4\u7684\uff08\u6700\u77ed\uff09\u8ddd\u79bb\u3002\n\n\u6700\u7b80\u5355\u7684\u60f3\u6cd5\u662f\u4e00\u5c42\u4e00\u5c42\u5411\u4e0b\u63a8\u8fdb\uff0c\u5171\u9700\u8d70\u5c42\u6570\u4e58\u4ee5\u4e8c\u6b65\uff0c\u5373 $2 \\lvert x_1 - x_2 \\rvert$.\n\n\u8003\u8651\u5230 $(x_1, y_1)$ \u548c $(x_2, y_2)$ \u4e0d\u4e00\u5b9a\u90fd\u662f\u540c\u6837\u671d\u5411\u7684\u4e09\u89d2\u5f62\uff0c\u4e0d\u59a8\u4f7f $x_1 \\leq x_2$, \u5219\u6b64\u65f6\u9700\u8981\u591a\u8d70\u7684\u6b65\u6570\uff08\u540c\u6837\u671d\u5411\u4e0d\u6539\u53d8\uff0c$(x_1, y_1)$ \u671d\u4e0a\u3001$(x_2, y_2)$ \u671d\u4e0b\u5219\u53ef\u4ee5\u5c11\u8d70\u4e00\u6b65\uff0c$(x_1, y_1)$ \u671d\u4e0b\u3001$(x_2, y_2)$ \u671d\u4e0a\u5219\u9700\u8981\u591a\u8d70\u4e00\u6b65\uff09\u4e3a $y_2 \\bmod 2 - y_1 \\bmod 2$.\n\n\u5bf9\u4e8e\u4e0a\u9762\u8fd9\u4e2a\u60f3\u6cd5\uff0c\u5bb9\u6613\u4e3e\u51fa\u53cd\u4f8b\uff0c\u5982 $(2, 3)$ \u4e0e $(3, 1)$ \u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u624b\u6a21\u51fa\u6765\u662f $4$.\n\n\u4e4b\u6240\u4ee5\u5982\u6b64\uff0c\u662f\u56e0\u4e3a\u5411\u4e0b\u63a8\u8fdb\u6700\u5de6\u8fb9\u53ea\u80fd\u5230 $(x_2, y_1 + y_1 \\bmod 2 - 1)$\uff0c\u6700\u53f3\u8fb9\u53ea\u80fd\u5230 $(x_2, y_1 + 2(x_2 - x_1) + 1 - y_1 \\bmod 2)$.\n\n\u6613\u77e5\u65e0\u8bba\u5728\u54ea\u4e00\u5c42\uff0c\u65e0\u8bba\u600e\u4e48\u5206\u914d\u4ece $(x, y)$ \u5230 $(x, y \\pm 1)$ \u7684\u884c\u52a8\u90fd\u662f\u7b49\u4ef7\u7684\u3002\n\n\u7531\u4e0a\uff0c\u5728\u65e0\u6cd5\u76f4\u63a5\u63a8\u8fdb\u5230 $(x_2, y_2)$ \u7684\u60c5\u51b5\u4e0b\uff0c\u5219\u9700\u8981\u989d\u5916\u5e73\u79fb $\\lvert x_2 - x_1 + y_2 - y_1 \\rvert + x_1 - x_2$ \u6b21\u3002\n\n\u6b64\u65f6\u6211\u4eec\u4ee4\u989d\u5916\u8d70\u7684\u6b21\u6570\u4e3a $g(x_1, y_1, x_2, y_2)$, \u603b\u6b21\u6570\u4e3a $f(x_1, y_1, x_2, y_2)$, \u6211\u4eec\u5c31\u5f97\u5230\u4e86\uff1a\n\n$$\ng(x_1, y_1, x_2, y_2) = \\left \\{\n\\begin{aligned}\n& \\lvert x_2 - x_1 + y_2 - y_1 \\rvert + x_1 - x_2 \\quad \\lvert x_2 - x_1 + y_2 - y_1 \\rvert > x_2 - x_1 \\\\\n& y_2 \\bmod 2 - y_1 \\bmod 2\\quad \\lvert x_2 - x_1 + y_2 - y_1 \\rvert \\leq x_2 - x_1 \\\\\n\\end{aligned}\n\\right\n.\n$$\n\n$$\nf(x_1, y_1, x_2, y_2) = \\left \\{\n\\begin{aligned}\n& 2(x_2 - x_1) + g(x_1, y_1, x_2, y_2) \\quad x_1 \\leq x_2 \\\\\n& f(x_2, y_2, x_1, y_1) \\quad x_1 > x_2\n\\end{aligned}\n\\right\n.\n$$\n\n\u7531\u9898\u5f97\uff0c\u79fb\u52a8\u4e00\u6b21\u7684\u4ee3\u4ef7\u4e3a $k$, \u5219\u603b\u79fb\u52a8\u4ee3\u4ef7\u4e3a $k \\cdot f(x_1, y_1, x_2, y_2)$.\n\n\u7531\u4e8e\u6709\u591a\u4e2a\u51fa\u53e3\uff0c\u627e\u5230\u6700\u5c0f\u4ee3\u4ef7\u5e76\u68c0\u67e5\u662f\u5426\u5408\u6cd5\uff0c\u5f97\u5230\uff1a\n\n$$\nans = \\left \\{\n\\begin{aligned}\n& s - k \\min_{i = 1}^m f(x_a, y_a, x_i, y_i) - 1 \\quad k \\min_{i = 1}^m f(x_a, y_a, x_i, y_i) < s \\\\\n& -1 \\quad k \\min_{i = 1}^m f(x_a, y_a, x_i, y_i) \\geq s\n\\end{aligned}\n\\right\n.\n$$\n\n\u4ee5\u4e0a\u3002\n\n# \u4ee3\u7801\n\n```cpp\n// Problem: P3739 [HAOI2014]\u8d70\u51fa\u91d1\u5b57\u5854\n// Contest: Luogu\n// URL: https://www.luogu.com.cn/problem/P3739\n// Memory Limit: 125 MB\n// Time Limit: 1000 ms\n// Author: Asakawa_Luka (https://www.luogu.com.cn/user/321898)\n// Powered by CP Editor (https://cpeditor.org)\n#include <algorithm>\n#include <iostream>\n#include <limits>\nnamespace Solution {\nconstexpr std::size_t AbsMinus(const std::size_t &lhs,\n                               const std::size_t &rhs) noexcept {\n  return lhs < rhs ? rhs - lhs : lhs - rhs;\n}\nconstexpr std::size_t f(const std::size_t &x1, const std::size_t &y1,\n                        const std::size_t &x2, const std::size_t &y2) noexcept {\n  return x1 <= x2 ? ((x2 - x1) << 1u) +\n                        (AbsMinus(x2 + y1, x1 + y2) <= x2 - x1\n                             ? (y2 & 1u) - (y1 & 1u)\n                             : AbsMinus(x2 + y1, x1 + y2) - (x2 - x1))\n                  : f(x2, y2, x1, y1);\n}\nint main() noexcept {\n  std::size_t n, m, k, s, xa, ya, res = std::numeric_limits<std::size_t>::max();\n  std::cin >> n >> m >> k >> s >> xa >> ya;\n  for (std::size_t x, y; m; --m) {\n    std::cin >> x >> y;\n    res = std::min(res, f(xa, ya, x, y));\n  }\n  if (const std::size_t &c = res * k; c < s)\n    std::cout << s - c - 1u;\n  else\n    std::cout << \"-1\";\n  return 0;\n}\n}  // namespace Solution\nint main() noexcept {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(nullptr);\n  return Solution::main();\n}\n```\n",
        "postTime": 1666269837,
        "uid": 321898,
        "name": "Asakawa_Luka",
        "ccfLevel": 5,
        "title": "P3739 [HAOI2014]\u8d70\u51fa\u91d1\u5b57\u5854 \u9898\u89e3"
    }
]
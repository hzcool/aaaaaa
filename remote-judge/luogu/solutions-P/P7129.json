[
    {
        "content": "## \u524d\u8a00\n\u6211\u662f\u5c51\u6211\u662f\u5c51\u6211\u662f\u5c51\n\n\u6211\u8fde\u591a\u91cd\u80cc\u530501\u62c6\u5206\u90fd\u80fd\u5199\u9519\n\n\u554a\u554a\u554a\u554a\u554a\u554a\u554a\u554a\u554a\u554a\u554a\u554a\u554a\n## \u601d\u8def\n\u4e8c\u5408\u4e00\u9898\u3002\n\n* \u4efb\u52a1 $1$\uff1a\u8ba1\u7b97\u4e00\u5173\u7684\u6700\u5927\u5206\u6570\n\n\u4e00\u4e2a\u5f88\u663e\u7136\u7684 $dp$\uff0c\u6211\u7528\u4e86\u8bb0\u5fc6\u5316\u641c\u7d22\u5b9e\u73b0\u3002\u663e\u7136\u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4 $[l,r]$\uff0c**\u6700\u540e\u9009\u7684\u6570**\u53ea\u80fd\u662f $a_l$ \u6216\u8005 $a_r$\uff0c\u800c\u6700\u540e\u9009\u7684\u6570\u4f1a\u521b\u9020 $r-l+1$ \u7684\u8d21\u732e\u3002\u56e0\u6b64\u5f97\u5230\u4e00\u4e2a\u5f88\u663e\u7136\u7684\u67ff\u5b50\uff1a\n\n$$dp_{i,j}=\\max\\{dp_{i+1,j}+a_i\\times(j-i+1),dp_{i,j-1}+a_j\\times (j-i+1)\\}$$\n\n* \u4efb\u52a1 $2$\uff1a\u8ba1\u7b97\u603b\u5206\u6700\u5927\u503c\n\n\u663e\u7136\u76f4\u63a5\u4e8c\u8fdb\u5236\u5206\u7ec4\u591a\u91cd\u80cc\u5305\u5373\u53ef\u3002\n\n\u4e00\u4e2a\u5c0f\u5751\uff1a\u8fd9\u91cc\u7684\u591a\u91cd\u80cc\u5305\u9700\u8981**\u5c06\u524d\u9762\u6240\u6709\u7684\u90fd\u9009\u81f3\u5c11\u4e00\u6b21**\uff0c\u6240\u4ee5 dp \u7684\u65f6\u5019\u8981\u5148\u5f3a\u5236\u9009\u4e00\u6b21\uff0c\u518d\u81ea\u7531\u9009\u3002\n\n* \u6765\u8bb2\u4e00\u4e0b\u6211\u72af\u7684 nt \u9519\u8bef\uff1a\n\n* \u5927\u5bb6\u90fd\u77e5\u9053\u5b8c\u5168\u80cc\u5305\u5e94\u8be5\u662f \n\n```\nfor(int i=1; i<=mx; mx-=i,i<<=1) \u505a\u4e00\u6b21i\u4e2a\u7269\u54c1\u7684\u5b8c\u5168\u80cc\u5305;\n\u505a\u4e00\u6b21mx\u4e2a\u7269\u54c1\u7684\u5b8c\u5168\u80cc\u5305;\n```\n\n* \u7136\u540e\u6211\u5199\u4e86\u4e2a\n\n```\nfor(int i=1; i<=mx; i<<=1) if(i&mx) \u505a\u4e00\u6b21i\u4e2a\u7269\u54c1\u7684\u5b8c\u5168\u80cc\u5305;\n```\n\n* \u4e00\u5b9a\u8981\u8bb0\u4f4f\u4e8c\u8fdb\u5236\u62c6\u5206\u7684\u539f\u7406\u554a/kel\n## \u4ee3\u7801\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read(){\n   int s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9') s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\nint c,mx,m,sdt,a[503];\nlong long dp[503][503];\nlong long ans[100003][2],Ans=0;\nlong long dfs(int l,int r)\n{\n\tif(l==sdt&&r==sdt) return a[sdt];\n\tif(dp[l][r]) return dp[l][r];\n\tif(l==sdt) return dp[l][r]=dfs(l,r-1)+a[r]*(r-l+1);\n\tif(r==sdt) return dp[l][r]=dfs(l+1,r)+a[l]*(r-l+1);\n\treturn dp[l][r]=max(dfs(l,r-1)+a[r]*(r-l+1),dfs(l+1,r)+a[l]*(r-l+1));\n}\nsigned main()\n{\n\tint n=read(),t=read(),sum=0;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tc=read(),mx=read()-1,m=read(),sdt=read(),sum+=c;\n\t\tfor(int j=1; j<=m; j++) a[j]=read();\n\t\tmemset(dp,0,sizeof(dp));\n\t\tlong long DP=dfs(1,m);\n\t\t//printf(\"> %lld\\n\",dp[1][m]);\n\t\tfor(int j=0; j<min(sum,t+1); j++) ans[j][i&1]=-1000000000000000ll;\n\t\tfor(int j=t; j>=sum; j--) ans[j][i&1]=ans[j-c][(i&1)^1]+DP;\n\t\tfor(int j=1; j<=mx; mx-=j,j<<=1)\n\t\t{\n\t\t\tlong long g=DP*j;\n\t\t\tint h=j*c;\n\t\t\tfor(int k=t; k>=h; k--) ans[k][i&1]=max(ans[k][i&1],ans[k-h][i&1]+g);\n\t\t} \n\t\tlong long g=DP*mx;\n\t\tint h=mx*c;\n\t\tfor(int k=t; k>=h; k--) ans[k][i&1]=max(ans[k][i&1],ans[k-h][i&1]+g); \n\t\tfor(int j=1; j<=t; j++) Ans=max(Ans,ans[j][i&1]);\n\t}\n\tprintf(\"%lld\\n\",Ans);\n\treturn 0;\n}\n```",
        "postTime": 1608431755,
        "uid": 111055,
        "name": "dead_X",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P7129 \u3010\u300cRdOI R1\u300d\u51b0\u6dc7\u6dcb\u6e38\u620f(play)\u3011"
    }
]
[
    {
        "content": "[\u300cRCOI2020 Day 1\u300dRochine Round 2](https://www.luogu.com.cn/contest/25478) F\n\n---\n\u6a21\u62df\u5373\u53ef\u3002  \n\n-------\n\u9996\u5148\uff0c\u5b9a\u4e49\u5f53\u524d\u65b9\u989c\u8272`nowcol`\uff08\u8bb0\u7ea2\u8272\u4e3a1\uff0c\u84dd\u8272\u4e3a-1\uff0c\u7a7a\u767d\u4e3a0\uff09\uff0c\u7ea2\u65b9\u68cb\u5b50\u6570`numred`\uff0c\u84dd\u65b9\u68cb\u5b50\u6570`numblue`\u3002  \n\n---\n> - \u521d\u59cb\u5c40\u9762\u4e3a\uff1a\u5728**\u6700\u5de6\u8fb9\u4e00\u5217\u548c\u6700\u53f3\u8fb9\u4e00\u5217**\u7684\u7f51\u683c\u4e0a\u5206\u522b\u653e\u7f6e\u7740**\u7ea2\u65b9\u548c\u84dd\u65b9**\u7684\u68cb\u5b50\uff0c\u5728\u6700\u4e0a\u9762\u4e00\u884c**\u5de6\u534a\u90e8\u5206**\u548c\u6700\u4e0b\u9762\u4e00\u884c**\u5de6\u534a\u90e8\u5206**\u4e5f\u653e\u7f6e\u7740**\u7ea2\u65b9**\u7684\u68cb\u5b50\uff0c\u5728\u6700\u4e0a\u9762\u4e00\u884c**\u53f3\u534a\u90e8\u5206**\u548c\u6700\u4e0b\u9762\u4e00\u884c**\u53f3\u534a\u90e8\u5206**\u4e5f\u653e\u7f6e\u7740**\u84dd\u65b9**\u7684\u68cb\u5b50\uff1b    \n> - **\u7ea2\u65b9\u5148**\u8d70\uff0c\u84dd\u65b9\u540e\u8d70\uff1b   \n\n\u521d\u59cb\u5316\uff1a   \n\n```cpp\nint nowcol=1,numred,numblue;//\u7ea2\u65b9\u5148\u8d70\ninline void init()\n{\n\tint i,j;\n\tscanf(\"%d\",&n);//\u8bfbn\n\tm=n>>1;numred=numblue=(n<<1)-2;//\u7ea2\u84dd\u68cb\u5b50\u6570\u5404\u4e3a2n-2(\u6613\u8bc1)\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tmap[i][1]=1;map[i][n]=-1;//\u7b2c\u4e00\u5217\u4e3a\u7ea2\u8272\uff0c\u6700\u540e\u4e00\u5217\u4e3a\u84dd\u8272\n\t\tif(i<=m)map[1][i]=map[n][i]=1;//\u7b2c\u4e00\u548c\u6700\u540e\u884c\u5de6\u8fb9n/2\u4e2a\u4e3a\u7ea2\u8272\n\t\telse map[1][i]=map[n][i]=-1;//\u7b2c\u4e00\u548c\u6700\u540e\u884c\u53f3\u8fb9n/2\u4e2a\u4e3a\u84dd\u8272\n\t}\n}\n```  \n\n---\n> - **\u7ea2\u65b9\u5148**\u8d70\uff0c**\u84dd\u65b9\u540e**\u8d70\uff1b   \n> - \u6bcf\u6b21\u8d70\u68cb\u53ef\u4ee5\u8ba9\u4e00\u9897\u68cb\u5b50\u5f80**\u4e0a\u4e0b\u5de6\u53f3**\u65b9\u5411\u79fb\u52a8 **$1$** \u683c\uff0c\u4f46\u76ee\u6807\u683c\u4e0a**\u4e0d\u80fd\u6709\u68cb\u5b50**\uff1b   \n\n\u5224\u65ad\u79fb\u52a8\u662f\u5426\u5408\u6cd5   \n1. $(a,b)$ \u4e0e $(c,d)$ \u4e0d\u662f\u540c\u4e00\u4e2a\u70b9\uff08\u4e0a\u4e0b\u5de6\u53f3\uff09\n2. $(a,b)$ \u4e0e $(c,d)$ \u5728\u540c\u4e00\u884c\u6216\u5728\u540c\u4e00\u5217\uff08\u4e0a\u4e0b\u5de6\u53f3\uff09\n3. $(a,b)$ \u4e0e $(c,d)$ \u8ddd\u79bb\u4e3a $1$ \uff08\u79fb\u52a8 $1$ \u683c\uff09\n4. $(c,d)$ \u5fc5\u987b\u7a7a\u767d\uff08\u4e0d\u80fd\u6709\u68cb\u5b50\uff09\n5. $(a,b)$ \u5fc5\u987b\u4e3a\u5f53\u524d\u65b9\u68cb\u5b50\uff08\u7ea2\u5148\u84dd\u540e\uff09\n```cpp\nif((a!=c&&b!=d)/*2*/||(a==c&&b==d)/*1*/||abs(a-c)>1/*3*/||abs(b-d)>1/*3*/||map[c][d]/*4*/||map[a][b]!=nowcol/*5*/)\n\treturn puts(\"0\"),false;//\u6570\u636e\u4e0d\u5408\u6cd5\uff1a\u8f93\u51fa 0\u3002\n```  \n\n---\n\u79fb\u52a8\uff1a   \n```cpp\nmap[a][b]=0;map[c][d]=nowcol;\n```\n\n---\n> - \u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u65f6\u53ef\u4ee5\u5403\u6389\u5bf9\u65b9\u68cb\u5b50\uff1a\u5728\u4e00\u884c\uff08\u6216\u4e00\u5217\u4e0a\uff09\uff0c**\u6709\u4e14\u4ec5\u6709** $N-1$ \u9897\u68cb\u5b50\uff08**\u5f53 $N>4$ \u65f6**\u4e3a $N-2$ \u9897\u4e5f\u53ef\uff09\uff0c\u5176\u4e2d\u6709 $N-2$ \u9897\u5df1\u65b9\u68cb\u5b50\uff08\u5f53 $N>4$ \u65f6\u4e3a $N-3$ \u9897\u4e5f\u53ef\uff09\uff0c\u53e6\u5916 $1$ \uff08\u5f53 $N>4$ \u65f6\u4e3a $2$ \u9897\u4e5f\u53ef\uff09\u9897\u68cb\u5b50\u4e3a\u654c\u65b9\u7684\uff0c\u6211\u65b9\u7684\u68cb\u5b50**\u5168\u90e8\u76f8\u90bb**\uff0c\u654c\u65b9\u68cb\u5b50**\u5168\u90e8\u76f8\u90bb**\uff0c\u5e76\u4e14\u6211\u65b9\u6709\u4e00\u9897\u68cb\u5b50\u4e0e\u654c\u65b9**\u76f8\u90bb**\uff0c\u800c\u4e14\u6b64\u5c40\u9762\u4e3a\u6211\u65b9**\u4e3b\u52a8**\u8d70\u6210\uff0c\u5219\u6211\u65b9\u53ef\u4ee5\u628a\u8fd9\u4e00\u5217\u4e0a\u654c\u65b9\u7684\u68cb\u5b50**\u5168\u90e8**\u5403\u6389\u3002   \n\n1. \u5f53\u524d\u79fb\u52a8\u7684\u68cb\u5b50\u624d\u80fd\u5403\u5b50\uff08\u4e3b\u52a8\u8d70\u6210\uff09\n2. \u6240\u6709\u68cb\u5b50\u5fc5\u987b\u76f8\u90bb[1]\uff0c\u6240\u6709\u7ea2\u5b50\u5fc5\u987b\u76f8\u90bb[2]\uff0c\u6240\u6709\u84dd\u5b50\u5fc5\u987b\u76f8\u90bb[3]\uff08\u6211\u65b9\u7684\u68cb\u5b50**\u5168\u90e8\u76f8\u90bb**\uff0c\u654c\u65b9\u68cb\u5b50**\u5168\u90e8\u76f8\u90bb**\uff0c\u5e76\u4e14\u6211\u65b9\u6709\u4e00\u9897\u68cb\u5b50\u4e0e\u654c\u65b9**\u76f8\u90bb**\uff09\n3. \u5171\u6709 $n-1$ \u9897\u68cb\u5b50\uff0c\u5176\u4e2d $n-2$ \u9897\u5df1\u65b9\n4. $n>4$ \u65f6\uff0c\u5171\u6709 $t\\in [n-1,n)$ \u9897\u68cb\u5b50\uff0c\u5176\u4e2d $t1 \\in [n-2,t)$ \u9897\u5df1\u65b9\n\n\u5224\u65ad\u5403\u5b50\uff1a\n```cpp\nint i,tot=0,tot1=0;//c\u884c\nfor(i=1;i<=n;i++)\n{\n\tif(map[c][i]&&!map[c][i-1]&&tot){tot=0;break;}//1.1\n\tif(map[c][i]==nowcol&&map[c][i-1]==-nowcol&&tot1){tot1=0;break;}//1.2|1.3\n\tif(map[c][i]==-nowcol&&map[c][i-1]==nowcol&&tot-tot1){tot1=0;break;}//1.2|1.3\n\tif(map[c][i])tot++;\n\tif(map[c][i]==nowcol)tot1++;\n}\nif((tot==n-1&&tot1==n-2)/*3*/||(n>4&&tot>=n-2&&tot<n&&tot1>=n-3&&tot1<tot)/*4*/)\n{\n\tfor(i=1;i<=n;i++)if(map[c][i]==-nowcol)map[c][i]=0;//\u4ece\u56fe\u4e0a\u5220\u5b50\n\tif(nowcol==1)numblue-=tot-tot1;else numred-=tot-tot1;//\u6240\u5220\u7684\u989c\u8272\u7684\u68cb\u5b50\u6570--\n}\ntot=0;tot1=0;//d\u5217\nfor(i=1;i<=n;i++)\n{\n\tif(map[i][d]&&!map[i-1][d]&&tot){tot=0;break;}\n\tif(map[i][d]==nowcol&&map[i-1][d]==-nowcol&&tot1){tot1=0;break;}\n\tif(map[i][d]==-nowcol&&map[i-1][d]==nowcol&&tot-tot1){tot1=0;break;}\n\tif(map[i][d])tot++;\n\tif(map[i][d]==nowcol)tot1++;\n}\nif((tot==n-1&&tot1==n-2)||(n>4&&tot>=n-2&&tot<n&&tot1>=n-3&&tot1<tot))\n{\n\tfor(i=1;i<=n;i++)if(map[i][d]==-nowcol)map[i][d]=0;\n\tif(nowcol==1)numblue-=tot-tot1;else numred-=tot-tot1;\n}\n```   \n\n---\n> - \u7ea2\u65b9**\u5148**\u8d70\uff0c\u84dd\u65b9**\u540e**\u8d70\uff1b\n\n\u8f6e\u6d41\u8d70\uff1a   \n```cpp\nnowcol=-nowcol;\n```\n\n---\n> - \u6709\u4e00\u65b9**\u53ea\u5269\u4e0b $N\u00f72$ \u9897\u68cb\u5b50**\u65f6\uff0c\u6e38\u620f\u7ed3\u675f\uff0c\u53e6\u4e00\u65b9\u83b7\u80dc\uff1b\n> - \u6709\u4e00\u65b9**\u65e0\u68cb\u53ef\u8d70**\u65f6\uff0c\u6e38\u620f\u7ed3\u675f\uff0c\u53e6\u4e00\u65b9\u83b7\u80dc\uff1b\n\n\u5224\u65ad\u8f93\u8d62\uff1a  \n1. \u4e00\u65b9\u68cb\u5b50\u6570\u5c11\u4e8e $n \\div 2$ \u53e6\u4e00\u65b9\u83b7\u80dc\n2. \u4e00\u65b9\u65e0\u68cb\u53ef\u8d70\u53e6\u4e00\u65b9\u83b7\u80dc\n\n```cpp\nif(numred<=m)return -1;//1(\u7ea2\u5c11)\nif(numblue<=m)return 1;//1(\u84dd\u5c11)\nint i,j;\nfor(i=1;i<=n;i++)\nfor(j=1;j<=n;j++)\nif(map[i][j]==nowcol&&((i>1&&!map[i-1][j])||(j>1&&!map[i][j-1])||(i<n&&!map[i+1][j])||(j<m&&!map[i][j+1])))return 0;//2(\u6709\u68cb\u53ef\u8d70)\nreturn -nowcol;\n```\n\n---\n> - \u7528`h`\u8868\u793a\u7ea2\u65b9\u68cb\u5b50\uff0c`l`\u8868\u793a\u84dd\u65b9\u68cb\u5b50\uff0c`.`\u8868\u793a\u6b64\u7f51\u683c\u4e3a\u7a7a\u3002\n\n\u8f93\u51fa\uff1a\n```cpp\ninline void print()\n{\n\tint i,j;\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tfor(j=1;j<=n;j++)\n\t\tif(map[i][j]==1)putchar('h');\n\t\telse if(map[i][j]==-1)putchar('l');\n\t\telse putchar('.');\n\t\tputchar('\\n');\n\t}\n}\n```   \n\n---\n> - \u8fd8\u6ca1\u6709\u7ed3\u675f\uff1a\u7b2c\u4e00\u884c\u8f93\u51fa $1$\n> - \u5df2\u7ecf\u7ed3\u675f\uff1a\u7b2c\u4e00\u884c\u8f93\u51fa $2$\uff0c\u7b2c\u4e8c\u884c\u8f93\u51fa`red`\u6216`blue`\uff0c\u8868\u793a\u54ea\u4e00\u65b9\u83b7\u80dc\u3002  \n> - \u5ffd\u7565\u4f7f\u4f60\u5224\u65ad\u51fa\u80dc\u8d1f\u90a3\u4e00\u884c\u4e4b\u540e\u7684\u6240\u6709\u8f93\u5165\n> - \u8868\u793a\u76ee\u524d\u7684\u5c40\u9762\u72b6\u6001/\u8f93\u51fa\u83b7\u80dc\u65f6\u7684\u5c40\u9762\n\n\u5176\u4ed6\uff1a\uff08\u7565\uff09\n\n---\n$\\green{AC}$\u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\nnamespace game\n{\n\tconst int N=12;\n\tint map[N][N];\n\tint n,a,b,c,d,m;\n\tint nowcol=1,numred,numblue;\n\tinline void init()\n\t{\n\t\tint i,j;\n\t\tscanf(\"%d\",&n);\n\t\tm=n>>1;numred=numblue=(n<<1)-2;\n\t\tfor(i=1;i<=n;i++)\n\t\t{\n\t\t\tmap[i][1]=1;map[i][n]=-1;\n\t\t\tif(i<=m)map[1][i]=map[n][i]=1;\n\t\t\telse map[1][i]=map[n][i]=-1;\n\t\t}\n\t}\n\tinline int abs(int x){return x<0?-x:x;}\n\tinline bool move()//true\uff1a\u5408\u6cd5\uff1bfalse\uff1a\u4e0d\u5408\u6cd5\n\t{\n\t\tscanf(\"%d%d%d%d\",&a,&b,&c,&d);\n\t\ta^=b^=a^=b;c^=d^=c^=d;//\u8f93\u5165\u6570\u636e\u662f\u5148\u5217\u540e\u884c\n\t\tif((a!=c&&b!=d)||(a==c&&b==d)||abs(a-c)>1||abs(b-d)>1||map[c][d]||map[a][b]!=nowcol)\n\t\treturn puts(\"0\"),false;\n\t\tmap[a][b]=0;map[c][d]=nowcol;\n\t\tint i,tot=0,tot1=0;\n\t\tfor(i=1;i<=n;i++)\n\t\t{\n\t\t\tif(map[c][i]&&!map[c][i-1]&&tot){tot=0;break;}\n\t\t\tif(map[c][i]==nowcol&&map[c][i-1]==-nowcol&&tot1){tot1=0;break;}\n\t\t\tif(map[c][i]==-nowcol&&map[c][i-1]==nowcol&&tot-tot1){tot1=0;break;}\n\t\t\tif(map[c][i])tot++;\n\t\t\tif(map[c][i]==nowcol)tot1++;\n\t\t}\n\t\tif((tot==n-1&&tot1==n-2)||(n>4&&tot>=n-2&&tot<n&&tot1>=n-3&&tot1<tot))\n\t\t{\n\t\t\tfor(i=1;i<=n;i++)if(map[c][i]==-nowcol)map[c][i]=0;\n\t\t\tif(nowcol==1)numblue-=tot-tot1;else numred-=tot-tot1;\n\t\t}\n\t\ttot=0;tot1=0;\n\t\tfor(i=1;i<=n;i++)\n\t\t{\n\t\t\tif(map[i][d]&&!map[i-1][d]&&tot){tot=0;break;}\n\t\t\tif(map[i][d]==nowcol&&map[i-1][d]==-nowcol&&tot1){tot1=0;break;}\n\t\t\tif(map[i][d]==-nowcol&&map[i-1][d]==nowcol&&tot-tot1){tot1=0;break;}\n\t\t\tif(map[i][d])tot++;\n\t\t\tif(map[i][d]==nowcol)tot1++;\n\t\t}\n\t\tif((tot==n-1&&tot1==n-2)||(n>4&&tot>=n-2&&tot<n&&tot1>=n-3&&tot1<tot))\n\t\t{\n\t\t\tfor(i=1;i<=n;i++)if(map[i][d]==-nowcol)map[i][d]=0;\n\t\t\tif(nowcol==1)numblue-=tot-tot1;else numred-=tot-tot1;\n\t\t}\n\t\treturn nowcol=-nowcol,true;\n\t}\n\tinline int chkwin()//0\uff1a\u672a\u7ed3\u675f\uff1b\u00b11\uff1a\u80dc\u65b9\n\t{\n\t\tif(numred<=m)return -1;\n\t\tif(numblue<=m)return 1;\n\t\tint i,j;\n\t\tfor(i=1;i<=n;i++)\n\t\tfor(j=1;j<=n;j++)\n\t\tif(map[i][j]==nowcol&&((i>1&&!map[i-1][j])||(j>1&&!map[i][j-1])||(i<n&&!map[i+1][j])||(j<m&&!map[i][j+1])))return 0;\n\t\treturn -nowcol;\n\t}\n\tinline void print()\n\t{\n\t\tint i,j;\n\t\tfor(i=1;i<=n;i++)\n\t\t{\n\t\t\tfor(j=1;j<=n;j++)\n\t\t\tif(map[i][j]==1)putchar('h');\n\t\t\telse if(map[i][j]==-1)putchar('l');\n\t\t\telse putchar('.');\n\t\t\tputchar('\\n');\n\t\t}\n\t}\n\tinline bool go()//true\uff1a\u80dc\u8d1f\u672a\u5206\u4e14\u79fb\u52a8\u5408\u6cd5\n\t{\n\t\tif(!move())return false;//\u79fb\u52a8\u4e0d\u5408\u6cd5\n\t\tint f=chkwin();if(!f)return true;\n\t\tputs(\"2\");//\u80dc\u8d1f\u5df2\u5206\n\t\tif(f==1)puts(\"red\");else puts(\"blue\");\n\t\tprint();return false;\n\t}\n}\nint main()\n{\n\tint k;\n\tgame::init();\n\tscanf(\"%d\",&k);\n\tbool flag=true;\n\twhile(k--&&flag)flag=game::go();//k\u6b21\u79fb\u52a8\n\tif(flag)puts(\"1\"),game::print();//\u82e5\u80dc\u8d1f\u672a\u5206\uff0c\u8f93\u51fa1\n\treturn 0;\n}\n```\n\n\u636e\u8bf4\u8fd9\u662f\u672c\u573a\u6bd4\u8d5b\u9632$\\green{AK}$\u9898\uff08\u96fe",
        "postTime": 1580917301,
        "uid": 35137,
        "name": "a___",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P6071 \u3010[RC-02] \u6e38\u620f\u3011"
    }
]
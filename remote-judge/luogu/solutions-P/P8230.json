[
    {
        "content": "#### update:\n- \u7531\u4e8e\u9898\u610f[\u88ab\u66f4\u6539\u8865\u5145](https://www.luogu.com.cn/discuss/423416)\uff0c\u66f4\u6539\u4e86\u4e00\u4e0b\u505a\u6cd5\uff0c\u5982\u679c\u88ab\u5361\u5e38\u53ef\u4ee5\u4f18\u5316\u5e38\u6570\u3002\u611f\u8c22 @\u661f\u7a7a\u821e\u6db5 \u6307\u51fa\u9519\u8bef\u3002\n- \u53c8\u4fee\u6539\u4e86\u4e00\u4e0b\u5c0f\u9519\u8bef\u3002\n\n### \u6027\u8d28\uff1a\n\n\u9996\u5148\uff0c\u901a\u8fc7\u8bfb\u9898\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u4ee5\u4e0b\u6027\u8d28\uff1a**\u65e0\u8bba\u6309\u600e\u6837\u7684\u987a\u5e8f\u51fb\u8d25\u654c\u4eba\uff0c\u5148\u51fb\u8d25\u80fd\u529b\u503c\u5c0f\u7684\u654c\u4eba\u7684\u65b9\u6848\u603b\u662f\u6700\u4f18\u7684\u3002**\n\n\u56e0\u4e3a\u5728\u51fb\u8d25\u654c\u4eba\u540e\uff0c\u80fd\u529b\u503c\u53ef\u80fd\u4f1a\u5927\u4e8e\u51fb\u8d25\u524d\u4e0d\u80fd\u51fb\u8d25\u7684\u654c\u4eba\u3002\u53c8\u56e0\u4e3a\u53ea\u6709\u5f53\u51fb\u8d25\u654c\u4eba\u540e\u624d\u80fd\u901a\u8fc7\u8be5\u683c\u5b50\uff0c\u6240\u4ee5\u9700\u8981\u5c06\u5f53\u524d\u4e0d\u80fd\u51fb\u8d25\u7684\u8bb0\u5f55\u4e0b\u6765\uff0c\u7b49\u5230\u80fd\u51fb\u8d25\u65f6\u518d\u641c\u7d22\u4e00\u904d\u3002\n\n### \u505a\u6cd5\uff1a\n\n\u6211\u4eec\u5199\u4e00\u4e2a\u51fd\u6570\uff0c\u641c\u7d22\u5728\u8d77\u70b9\u8303\u56f4\u91cc\u9762\u80fd\u5230\u8fbe\u5e76\u51fb\u8d25\u7684\u654c\u4eba\uff0c\u5982\u679c\u53ef\u4ee5\u76f4\u63a5\u51fb\u8d25\u8be5\u654c\u4eba\uff0c\u76f4\u63a5\u51fb\u8d25\u3002\u5982\u679c\u4e0d\u884c\uff0c\u5c31\u5148\u5b58\u50a8\u3002\n\n\u5b58\u50a8\u5b8c\u540e\uff0c\u5728\u4f18\u5148\u961f\u5217\u4e2d\u4ece\u5c0f\u5230\u5927\u51fb\u8d25\uff0c\u987a\u4fbf\u518d\u641c\u7d22\u3002\u5982\u679c\u4e0d\u80fd\u51fb\u8d25\u6b64\u654c\u4eba\uff0c\u8bf4\u660e\u540e\u9762\u66f4\u5927\u7684\u654c\u4eba\u4e5f\u4e0d\u80fd\u51fb\u8d25\uff0c\u76f4\u63a5\u9000\u51fa\u3002\n\n\u6700\u540e\u66f4\u65b0\u8d77\u70b9\u5750\u6807\u3002\n\n### \u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint l,n,m;\nlong long now=1;\nvector<long long>a[1000001]; \nint endx,endy;\nstruct shu {\n    int value;\n    int x;\n    int y;\n    bool operator () (const shu &a,const shu &b) const {\n        return a.value>b.value;\n    }\n};\npriority_queue<shu,vector<shu>,shu >q;\nint tot;\nint find(int x,int y) { //\u641c\u7d22\u5f53\u524d\u80fd\u5230\u8fbe\u7684\u5730\u65b9\u3002\n    if(x<1||x>n||y<1||y>m||a[x][y]==-9||a[x][y]==-1||(endx==x&&endy==y))return 0;\n    if(a[x][y]!=0&&a[x][y]!=-9&&a[x][y]!=-1) {\n        if(now>=a[x][y])now+=a[x][y];//\u5982\u679c\u80fd\u51fb\u8d25\uff0c\u76f4\u63a5\u51fb\u8d25\n        else{\n            q.push({a[x][y],x,y});\n            a[x][y]=-9;\n            return 0;\n        }\n    }\n    a[x][y]=-9;//\u907f\u514d\u91cd\u590d\u641c\u7d22\n    find(x+1,y);\n    find(x,y+1);\n    find(x-1,y);\n    find(x,y-1);\n    return 0;\n}\nint main() {\n    scanf(\"%d%d%d\",&l,&n,&m);\n    int x=1,y=1;\n    while(l--) {\n        if(l==0){\n            endx=-1,endy=-1;\n        }\n        tot=0;\n        for(int i=1; i<=n; i++) {\n        \ta[i].clear();\n        \ta[i].push_back(0);\n            for(int j=1; j<=m; j++) {\n            \tint now;\n            \tcin>>now;\n                a[i].push_back(now);\n                if(a[i][j]==-1) {\n                    endx=i,endy=j;\n                }\n            }\n        }\n        find(x,y);\n        while(!q.empty()) {\n            shu top=q.top();\n            if(top.value<=now) {\n                now+=top.value;\n                a[top.x][top.y]=0;\n                find(top.x,top.y);\n                q.pop();\n            } else {\n                break;\n            }\n        }\n        priority_queue<shu,vector<shu>,shu >qw;\n        q=qw;//\u6ce8\u610f\u6e05\u7a7a\u961f\u5217\n        x=endx,y=endy;//\u66f4\u65b0\u8d77\u70b9\n    }\n    cout<<now<<endl;\n}\n```",
        "postTime": 1648447191,
        "uid": 444066,
        "name": "heruimiao123456",
        "ccfLevel": 5,
        "title": "P8230 \u5730\u7262 \u9898\u89e3"
    },
    {
        "content": "\u601d\u8def\uff1a\u505a $L$ \u6b21\u5bbd\u641c\uff0c\u6bcf\u6b21\u90fd\u5c06\u53ef\u4ee5\u6253\u5230\u7684\u654c\u4eba\u5b58\u5230\u6570\u7ec4\u91cc\uff0c\u7136\u540e\u5c06\u654c\u4eba\u4ece\u5f31\u5230\u5f3a\u6392\u5e8f\uff0c\u518d\u6309\u987a\u5e8f\u6253\u654c\u4eba\u3002\n\n\u8303\u56f4\uff1a$1\\leq L\\times N\\times M\\leq 10^6$\u3002\u7531\u4e8e $N$ \u548c $M$ \u5177\u4f53\u6570\u503c\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u76f4\u63a5\u5f00 $10^6 \\times 10^6$ \u7684\u6570\u7ec4\u4f1a\u70b8\u5185\u5b58\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u8bfb\u5165 $N$ \u548c $M$\uff0c\u518d\u6839\u636e\u8bfb\u5165\u7684\u503c\u5f00\u6570\u7ec4\u3002\n\n\u8d77\u70b9\uff1a\u7b2c $1$ \u5c42\u8d77\u70b9\u4e3a $\\left(1,1\\right)$\uff0c\u7b2c $2 \\sim L$ \u5c42\u8d77\u70b9\u4e3a\u5bf9\u5e94\u7684\u524d\u4e00\u5c42\u7684\u7ec8\u70b9\uff08\u5373\u524d\u4e00\u5c42 $-1$ \u7684\u4f4d\u7f6e\uff09\u3002\n\n\u7ec8\u70b9\uff1a\u7b2c $1 \\sim L-1$ \u5c42\u7ec8\u70b9\u4e3a\u5f53\u524d\u5c42 $-1$ \u7684\u4f4d\u7f6e\uff0c\u7b2c $L$ \u5c42\u6ca1\u6709\u56fa\u5b9a\u7684\u7ec8\u70b9\uff0c\u65e0\u8bba\u5728\u54ea\u7ed3\u675f\u90fd\u884c\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint dx[4]={-1,1,0,0},\n\tdy[4]={0,0,-1,1};\nint T,n,m,i,j,x,sx,sy,ex,ey,cnt,y,xx,yy;\nlong long ans;//\u5341\u5e74OI\u4e00\u573a\u7a7a\uff0c\u4e0d\u5f00LL\u89c1\u7956\u5b97 \nqueue <int> q1,q2;\nvoid read(int &x){\n\tchar c=getchar();\n\tint flag=1;\n\twhile ((c!='-')&&(c<'0'||c>'9')) c=getchar();\n\tif (c=='-') flag=-1,x=0; else x=(c&15);\n\tc=getchar();\n\twhile (c>='0'&&c<='9') x=(x<<1)+(x<<3)+(c&15),c=getchar();\n\tx*=flag;\n}\nvoid write(long long x){\n\tif (x>9) write(x/10);\n\tputchar(x%10+48);\n}\nint main(){\n\tread(T);read(n);read(m);\n    int a[n+1][m+1],b[n*m+1];//\u6839\u636e\u8bfb\u5165\u7684n,m\u5f00\u6570\u7ec4 \n\tans=1;//\u521d\u59cb\u7684\u80fd\u529b\u503c\u4e3a1\n\tsx=1;sy=1;//\u8d77\u70b9 \n\twhile (T--){\n\t\tfor (i=1;i<=n;i++)\n\t\t\tfor (j=1;j<=m;j++){\n\t\t\t\tread(a[i][j]);\n\t\t\t\tif (a[i][j]==-1) ex=i,ey=j;\n\t\t\t}\t\t\t\t\n\t\tq1.push(sx);q2.push(sy);\n\t\ta[sx][sy]=-9;//\u6807\u8bb0\uff0c\u9632\u6b62\u91cd\u590d\u8d70 \n\t\tcnt=0;//\u53ef\u4ee5\u6253\u7684\u654c\u4eba\u6570\u91cf\u6e05\u96f6 \n\t\twhile (!q1.empty()){//\u5bbd\u641c \n\t\t\tx=q1.front();y=q2.front();q1.pop();q2.pop();\n\t\t\tfor (i=0;i<4;i++){\n\t\t\t\txx=x+dx[i],yy=y+dy[i];\n\t\t\t\tif (xx<1||xx>n||yy<1||yy>m) continue;//\u8d8a\u754c \n\t\t\t\tif (a[xx][yy]==-9) continue;//\u8d70\u5230\u8fc7\u6216\u4e0d\u80fd\u8d70 \n\t\t\t\tif (a[xx][yy]==-1) continue;//\u5230\u8fbe\u7ec8\u70b9 \n\t\t\t\tif (a[xx][yy]!=0) b[++cnt]=a[xx][yy];//\u5b58\u653e\u654c\u4eba \n\t\t\t\ta[xx][yy]=-9;//\u6807\u8bb0\uff0c\u9632\u6b62\u91cd\u590d\u8d70 \n\t\t\t\tq1.push(xx);q2.push(yy);\n\t\t\t}\n\t\t}\n\t\tsort (b+1,b+cnt+1);//\u654c\u4eba\u4ece\u5f31\u5230\u5f3a\u6392\u5e8f \n\t\tfor (i=1;i<=cnt;i++)\n\t\t\tif (ans>=b[i]) ans+=b[i];//\u6253\u5f97\u8fc7\u5c31\u6253 \n\t\t\telse break;//\u5f31\u7684\u90fd\u6253\u4e0d\u8fc7\uff0c\u540e\u9762\u5f3a\u7684\u4e5f\u4e00\u5b9a\u6253\u4e0d\u8fc7\uff0c\u76f4\u63a5\u7ed3\u675f \n\t\tsx=ex,sy=ey;//\u66f4\u65b0\u8d77\u70b9 \n\t}\n\treturn write(ans),0;\n}\n```\n",
        "postTime": 1648365917,
        "uid": 562686,
        "name": "yeshubo_qwq",
        "ccfLevel": 5,
        "title": "P8230 \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\n\u5728 $L$ \u4e2a $N\\times M$ \u7684\u533a\u57df\uff0c\u6bcf\u4e2a\u533a\u57df\u6709\u82e5\u5e72\u654c\u4eba\uff0c\u6309\u987a\u5e8f\u7ecf\u8fc7 $L$ \u4e2a\u533a\u57df\uff0c\u6bcf\u4e2a\u533a\u57df\u9664\u4e86\u5899\u548c\u51fa\u53e3\u53ef\u4ee5\u968f\u610f\u8d70\u52a8\uff0c\u9047\u5230\u80fd\u529b\u4e0d\u5927\u4e8e\u81ea\u5df1\u7684\u654c\u4eba\u5c31\u53ef\u4ee5\u51fb\u8d25\uff0c\u5e76\u83b7\u5f97\u6240\u51fb\u8d25\u654c\u4eba\u7684\u80fd\u529b\u589e\u52a0\uff0c\u95ee\u6700\u7ec8\u4f60\u7684\u80fd\u529b\u503c\u6700\u5927\u662f\u591a\u5c11\u3002\n\n\u9898\u76ee\u8981\u6ce8\u610f\u51e0\u70b9\n\n- \u51fa\u53e3\u662f\u5f3a\u5236\u4f20\u9001\u7684\uff0c\u4e0d\u80fd\u7ecf\u8fc7\u51fa\u53e3\u800c\u4e0d\u4f20\u9001\u3002\n\n- \u901a\u8fc7\u51fa\u53e3\u4f20\u9001\u5230\u4e0b\u4e00\u5c42\u540e\u4f60\u6240\u5728\u7684\u4f4d\u7f6e\u662f\u4e0a\u4e00\u5c42\u51fa\u53e3\u7684\u4f4d\u7f6e\uff0c\u800c\u4e0d\u662f $(1,1)$\u3002\n\n- \u6570\u636e\u6bd4\u8f83\u5927\uff0c\u8981\u5f00 long long\u3002\n\n### \u89e3\u9898\u601d\u8def\n\n\u524d\u9762\u7684\u5927\u4f6c\u5df2\u7ecf\u8bb2\u8fc7\u7528\u5bbd\u641c\uff08\u53ea\u4f1a\u666e\u901a\u641c\u7d22\u7684\u6211\u4e5f\u4e0d\u4f1a\u5176\u5b83\u7684\uff09\uff0c\u5224\u65ad\u6bcf\u4e2a\u654c\u4eba\u662f\u5426\u80fd\u63a5\u89e6\u5230\uff0c\u80fd\u7684\u8bdd\u52a0\u5165\u5224\u65ad\u8303\u56f4\u3002\n\n\u5728\u9009\u62e9\u653b\u51fb\u654c\u4eba\u987a\u5e8f\u65f6\uff0c\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u4f9d\u6b21\u653b\u51fb\uff0c\u56e0\u4e3a\u65e0\u8bba\u6309\u600e\u6837\u51fb\u8d25\u654c\u4eba\uff0c\u5148\u51fb\u8d25\u80fd\u529b\u5c0f\u7684\u654c\u4eba\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\n\n\u597d\u50cf\u9898\u76ee\u88ab\u66f4\u6539\u8865\u5145\u540e\u4f1a\u6709\u8d85\u65f6\uff0c\u7ec6\u8282\u5f88\u591a\uff0c\u8981\u6ce8\u610f\u5e38\u6570\uff08\u4e0d\u7ba1\u6709\u6ca1\u6709\u66f4\u6539\uff0c\u65f6\u95f4\u77ed\u4e00\u70b9\u603b\u662f\u597d\u7684\uff09\uff0c\u6240\u4ee5\u8fd8\u8981\u51e0\u70b9**\u4f18\u5316**\u3002\n\n- \u7531\u4e8e\u8f93\u5165\u91cf\u8f83\u5927\uff0c\u4f7f\u7528\u5feb\u8bfb\u8f83\u597d\u3002\n\n- \u56e0\u4e3a $L\\times N \\times M \\le 10^6$\uff0c\u76f4\u63a5\u5f00\u6570\u7ec4\u4f1a\u70b8\u5185\u5b58\uff0c\u6240\u4ee5\u8981\u6839\u636e\u8f93\u5165\u7684 $N,M$ \u6765\u9009\u62e9\u3002\n\n- \u5176\u5b9e\u51fa\u53e3\u53ea\u5bf9\u4e0b\u4e00\u5173\u7684\u8d77\u70b9\u6709\u5f71\u54cd\uff0c\u56e0\u4e3a\u53ef\u4ee5\u968f\u610f\u8d70\u52a8\uff0c\u6211\u4eec\u53ea\u9700\u8981\u628a\u51fa\u53e3\u770b\u505a\u969c\u788d\u7269\uff08\u5bbd\u641c\u5c11\u4e86\u4e00\u70b9\u5224\u65ad\uff09\u3002\n\n- \u653b\u51fb\u7684\u9014\u4e2d\u5982\u679c\u9047\u5230\u654c\u4eba\u6bd4\u81ea\u5df1\u5f3a\uff0c\u76f4\u63a5\u7ec8\u6b62\u8fd9\u4e00\u8f6e\uff0c\u56e0\u4e3a\u540e\u9762\u7684\u80af\u5b9a\u8fd8\u6bd4\u4f60\u5f3a\uff0c\u4e5f\u65e0\u6cd5\u653b\u51fb\u3002\n\n- \u8f93\u5165\u65f6\u7edf\u8ba1\u654c\u4eba\u603b\u6570\uff0c\u5bbd\u641c\u65f6\u5224\u65ad\u5230\u53ef\u8fbe\u5230\u654c\u4eba\u7b49\u4e8e\u654c\u4eba\u603b\u6570\u65f6\u5c31\u53ef\u4ee5\u505c\u6b62\u641c\u7d22\uff08\u8fd9\u4e00\u70b9\u8ba9\u4e4b\u524d\u8d85\u65f6\u7684\u6211\u591a\u901a\u8fc7\u4e86\u4e24\u4e2a\u6d4b\u8bd5\u70b9 \uff09\u3002\n\n### \u5b8c\u6574\u4ee3\u7801\n\n\u7ecf\u8fc7\u4f18\u5316\u7684\u4ee3\u7801\u5f00\u4e0a\u6c27\u6c14 $318$ms\uff0c\u901f\u5ea6\u4e0d\u9519\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint read() {\n    int x = 0, f = 1;\n    char ch = getchar();\n    while (ch < '0' || ch>'9') {\n        if (ch == '-')f = -1;\n        ch = getchar();\n    }\n    while (ch >= '0' && ch <= '9') {\n        x = x * 10 + ch - '0';\n        ch = getchar();\n    }\n    return x * f;\n}\nlong long ans = 1;//\u8981\u5f00long long\nint dx[4] = { 1,-1,0,0 }, dy[4] = { 0,0,-1,1 };\nint l, n, m, sx = 1, sy = 1, ex, ey, nx, ny, x, y, sum, lsum;\nint main() {\n    l = read(), n = read(), m = read();\n    int a[n + 2][m + 2], p[n * m];\n    while (l--) {\n        queue <int>lx, ly;\n        sum = 0, lsum = 0;\n        for (int i = 1; i <= n; i++)\n            for (int j = 1; j <= m; j++) {\n                a[i][j] = read();\n                if (a[i][j] == -1)ex = i, ey = j, a[i][j] = -9;//\u9047\u5230\u51fa\u53e3\u8bb0\u5f55\u4ee5\u540e\u770b\u505a\u5899\n                if (a[i][j] > 0)lsum++;//\u7edf\u8ba1\u654c\u4eba\u603b\u6570\n            }\n        lx.push(sx), ly.push(sy);\n        while (!lx.empty()) {\n            if (sum >= lsum)break;//\u82e5\u53ef\u8fbe\u5230\u654c\u4eba\u5df2\u8fbe\u654c\u4eba\u603b\u6570\uff0c\u76f4\u63a5\u9000\u51fa\u3002\n            x = lx.front(); y = ly.front(); lx.pop(); ly.pop();\n            for (int i = 0; i < 4; i++) {\n                nx = x + dx[i], ny = y + dy[i];\n                if (nx<1 || nx>n || ny<1 || ny>m)continue;\n                if (a[nx][ny] > 0)p[++sum] = a[nx][ny];\n                if (a[nx][ny] != -9) {\n                    a[nx][ny] = -9;\n\t\t\t\t\tlx.push(nx);\n\t\t\t\t\tly.push(ny);\n                }//\u5b9e\u73b0\u5bbd\u641c\u5224\u65ad\u3002\n            }\n        }\n        sort(p + 1, p + sum + 1);\n        for (int i = 1; i <= sum; i++) {\n            if (ans >= p[i])ans += p[i];\n            else break;//\u82e5\u6bd4\u81ea\u5df1\u5f3a\u76f4\u63a5\u9000\u51fa\u3002\n        }\n        sx = ex, sy = ey;//\u66f4\u65b0\u4e0b\u4e00\u8f6e\u8d77\u70b9\u3002\n    }\n    printf(\"%lld\", ans);\n    return 0;\n}\n```\n\n",
        "postTime": 1672999365,
        "uid": 815796,
        "name": "zzy0618",
        "ccfLevel": 0,
        "title": "P8230 [AGM 2022 \u8d44\u683c\u8d5b] \u5730\u7262 \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\uff0c\u672c\u849f\u84bb\u770b\u5230\u8fd9\u4e2a\u9898\u7b2c\u4e00\u53cd\u5e94\u5c31\u662f\u5e76\u67e5\u96c6  \n\u7136\u540e\u770b\u5230\u9898\u89e3\u91cc\u6ca1\u6709\u7528\u5e76\u67e5\u96c6\u505a\u7684\uff0c\u4e8e\u662f\u4e4e\u5c31\u8fc7\u6765 ~~\u6c34~~ \u53d1\u9898\u89e3 \n\n## \u601d\u8def\n\u663e\u7136\uff0c\u6bcf\u6b21\u5403\u6389\u7684\u654c\u4eba\u5e94\u8be5\u662f\u5f53\u524d\u6240\u80fd\u5230\u8fbe\u7684\u654c\u4eba\uff08\u5f53\u524d\u8054\u901a\u5757\uff09\u4e2d\u80fd\u529b\u6700\u5c0f\u7684  \n\u5982\u679c\u88ab\u6700\u5c0f\u7684\u540a\u6253\uff0c\u90a3\u5c31\u53ea\u80fd\u4e0b\u4e00\u5173\u4e86\n\n## \u505a\u6cd5\n\u6211\u4eec\u8fb9\u8bfb\u8fb9\u627e  \n\u5982\u679c\u5f53\u524d\u5355\u5143\u683c\u4e0d\u662f\u5899\uff0c\u5c31\u5f80\u4e0a\u9762\u548c\u5de6\u8fb9\u627e  \n\u5982\u679c ```\u53ef\u4ee5\u5f80\u5de6\u6216\u4e0a\u8d70``` \uff0c\u5c31\u628a\u4ed6\u4eec\u6240\u5728\u7684\u8054\u901a\u5757\u5408\u5e76\u8d77\u6765\u3002  \n\uff08\u6b64\u5904 ```\u53ef\u4ee5\u5f80\u5de6\u6216\u4e0a\u8d70``` \u4ec5\u5f53  $a\\,_{nextx\\ ,\\ nexty}=0$  \uff09\n\n\u7136\u540e\u5c06\u6240\u6709\u5728\u4e3b\u89d2\u6240\u5728\u8054\u901a\u5757\u91cc\u7684\u654c\u4eba\u7528\u5c0f\u6839\u5806\u4fdd\u5b58\u8d77\u6765  \n\u6bcf\u6b21\u53d6\u5806\u9876\uff08\u4e5f\u5c31\u662f\u6700\u5c0f\u7684\u90a3\u4e2a\uff09\u5224\u65ad\u80fd\u5426\u6253\u8fc7  \n\u5982\u679c\u80fd\u6253\u8fc7\uff0c\u5c31\u5c06\u4e3b\u89d2\u7684\u80fd\u529b\u503c\u52a0\u4e0a\u654c\u4eba\u7684\u80fd\u529b\u503c\uff0c\u518d\u5c06\u654c\u4eba\u51fa\u5806\uff0c  \n\u7136\u540e\u62d3\u5c55\u4e3b\u89d2\u6240\u5728\u8054\u901a\u5757\u7684\u8303\u56f4\uff08\u91cd\u70b9\uff09  \n\u5982\u679c\u6253\u4e0d\u8fc7\uff0c\u5c31\u53ea\u80fd ```break``` \u4e0b\u4e00\u5173\u4e86\n\n#### \u4e00\u4e9b\u7ec6\u8282\n\n1.\u6bcf\u6b21\u90fd\u8981\u6e05\u7a7a\u5806\n\n2.\u6bcf\u4e00\u5173\u5f00\u59cb\u7684\u4f4d\u7f6e\u662f\u4e0a\u4e00\u5173\u51fa\u53e3\u7684\u4f4d\u7f6e\uff0c\u800c\u4e0d\u662f ```(1,1)``` \n\n\n## Code\n```\n#include<bits/stdc++.h>\n#define PI pair<int,int>//\u51cf\u5c11\u7801\u91cf\u7684\u5077\u61d2\u5c0f\u6280\u5de7\n#define int long long\n#define fir(x) x.first\n#define sec(x) x.second\nusing namespace std;\n\nint l,n,m,a[1005][1005],stx,sty,edx,edy,abl=1;//\u8bb0\u5f97\u80fd\u529b\u503c\u521d\u503c\u4e3a1\nint f[1000005];\nconst int dx[4]={0,0,1,-1},dy[4]={-1,1,0,0};//\u4e0a\u4e0b\u5de6\u53f3\npriority_queue<pair<int,PI>,vector<pair<int,PI>>,greater<pair<int,PI>>>q;//\u5c0f\u6839\u5806\n//\u7b2c\u4e00\u4e2aint\uff1a\u8be5\u65b9\u683c\u654c\u4eba\u7684\u80fd\u529b\u503c \u7b2c\u4e8c\u4e2aPI\uff1a\u8be5\u65b9\u683c\u7684\u5750\u6807\n\nint code(int x,int y){return x*m+y;}//\u8fd4\u56de\u70b9\u7684\u7ebf\u6027\u4e0b\u6807\n\nint getfa(int x){return (f[x]==x)?x:f[x]=getfa(f[x]);}//\u67e5\nvoid merge(int x,int y){//\u5e76\n    int tx=getfa(x),ty=getfa(y);\n    if(tx!=ty)f[tx]=ty;\n}\n\nvoid push_in(int x,int y);\nvoid expand(int x,int y){//\u9012\u5f52\u5730\u62d3\u5c55\u8054\u901a\u5757\u7684\u8303\u56f4\n    for(int i=0;i<4;i++){\n        const int nx=x+dx[i],ny=y+dy[i];\n        if(nx>=0&&nx<n&&ny>=0&&ny<m){\n            if(a[nx][ny]>0){\n            \tpush_in(nx,ny);\n            }\n            else if(a[nx][ny]==0){\n                a[nx][ny]=-9;\n                expand(nx,ny);\n            }\n        }\n    }\n}\nvoid push_in(int x,int y){\n    if(abl>=a[x][y]){//\u4f18\u5316\uff1a\u5982\u679c\u4e3b\u89d2\u7684\u80fd\u529b\u503c\u5df2\u7ecf\u5927\u4e8e\u4e0b\u4e00\u4e2a\u65b9\u5757\u7684\u80fd\u529b\u503c\uff0c\u5c31\u76f4\u63a5\u5403\u6389\n        abl+=a[x][y];\n        a[x][y]=-9;//\u5c06\u8be5\u5904\u8bbe\u4e3a\u4e0d\u53efexpand\uff08\u89c6\u4f5c\u5899\u4f53\uff0c\u9632\u6b62\u4e24\u4e2a\u70b9\u4e4b\u95f4\u53cd\u590d\u9012\u5f52\uff09\n        expand(x,y);\n    }\n    else{//\u5982\u679c\u6682\u65f6\u5403\u4e0d\u6389\uff0c\u5c31\u4e22\u8fdb\u5806\u91cc\uff0c\u6539\u5929\u518d\u5403\n        q.push(make_pair(a[x][y],make_pair(x,y)));\n        a[x][y]=-9;\n    }\n}\n\n\nsigned main(){\n    scanf(\"%lld%lld%lld\",&l,&n,&m);\n    \n    while(l--){\n        while(!q.empty())q.pop();//\u6e05\u7a7a\u5806\n        \n        for(int i=0;i<n;i++)//\u5904\u7406\u8f93\u5165&&\u67e5\u5e76\u8054\u901a\u5757\n            for(int j=0;j<m;j++){\n            \n                int x=code(i,j);\n                scanf(\"%lld\",&a[i][j]);\n                f[x]=x;\n                \n                if(a[i][j]==-1)//\u4fdd\u5b58 \u51fa\u53e3/\u4e0b\u4e00\u5173\u7684\u5f00\u59cb\u4f4d\u7f6e\n                    edx=i,edy=j;\n                if(a[i][j]==-9)//\u5899\u4f53\n                    continue;\n                    \n                if(i>0&&a[i-1][j]==0)//\u5411\u4e0a&\u5411\u5de6\u5408\u5e76\u8054\u901a\u5757\n                    merge(x,code(i-1,j));\n                if(j>0&&a[i][j-1]==0)\n                    merge(x,code(i,j-1));\n            }\n            \n        for(int i=0;i<n;i++)//\u5904\u7406\u654c\u4eba\uff1a\u4e22\u8fdb\u5806\u91cc\n            for(int j=0;j<m;j++)\n                if(getfa(code(stx,sty))==getfa(code(i,j)))\n                    if(a[i][j]>0)\n                        push_in(i,j);\n                    \n        while(!q.empty()){\n            if(fir(q.top())<=abl){//\u5403\u6389\u654c\u4eba\n            \n                abl+=fir(q.top());\n                int x=fir(sec(q.top())),y=sec(sec(q.top()));\n                expand(x,y);//\u62d3\u5c55\u8054\u901a\u5757\u7684\u8303\u56f4\n                q.pop();\n                \n            }\n            else break;//\u5982\u679c\u5df2\u7ecf\u5403\u4e0d\u6389\u4e86\uff0c\u5c31\u76f4\u63a5\u4e0b\u4e00\u5173\n        }\n        stx=edx,sty=edy;//\u4ea4\u63a5\u68d2\uff1a\u5c06\u4e0b\u4e00\u4e2a\u5173\u5361\u5f00\u59cb\u7684\u5730\u65b9\u8bbe\u4e3a\u4e0a\u4e00\u4e2a\u5173\u5361\u7684\u51fa\u53e3\n    }\n    printf(\"%lld\",abl);\n}\n```\n~~\u6b22\u8fcehack~~",
        "postTime": 1659090248,
        "uid": 654546,
        "name": "ScatteredHope",
        "ccfLevel": 5,
        "title": "P8230 \u9898\u89e3"
    }
]
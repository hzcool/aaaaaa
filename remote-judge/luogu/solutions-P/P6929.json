[
    {
        "content": "\u9996\u5148\u89c2\u5bdf\u591a\u8fb9\u5f62\u5185\u6700\u957f\u7ebf\u6bb5\u7684\u6027\u8d28\uff1a\n\n![](https://s1.328888.xyz/2022/07/06/2BsE.png)\n![](https://s1.328888.xyz/2022/07/06/25Gn.png)\n![](https://s1.328888.xyz/2022/07/06/2GOw.png)\n\n\u53ef\u4ee5\u53d1\u73b0\u6700\u957f\u7684\u7ebf\u6bb5\u81f3\u5c11\u7ecf\u8fc7\u591a\u8fb9\u5f62\u4e0a\u7684\u4e24\u70b9\u3002\u8003\u8651\u679a\u4e3e\u4e24\u70b9\u3002\n\n\u4f46\u662f\u7ebf\u6bb5\u7684\u7aef\u70b9\u672a\u5fc5\u662f\u679a\u4e3e\u7684\u4e24\u4e2a\u70b9\uff0c\u5e76\u4e14\u4e0d\u80fd\u4fdd\u8bc1\u7ebf\u6bb5\u5b8c\u5168\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u3002\n\n\u5148\u8003\u8651\u7ebf\u6bb5\u7aef\u70b9\u7684\u95ee\u9898\u3002\u53ef\u4ee5\u4ee5\u8fd9\u4e24\u70b9\u95f4\u7684\u7ebf\u6bb5\u4e3a\u57fa\u7840\uff0c\u5411\u7ebf\u6bb5\u7684\u4e24\u7aef\u6269\u5c55\u3002\n\n\u7531\u4e8e\u7ebf\u6bb5\u9700\u8981\u5728\u591a\u8fb9\u5f62\u7684\u5185\u90e8\uff0c\u8003\u8651\u6c42\u51fa\u8fd9\u6761\u7ebf\u6bb5\u6240\u5728\u76f4\u7ebf\u4e0e\u8fd9\u4e2a\u591a\u8fb9\u5f62\u7684\u6240\u6709\u4ea4\u70b9\uff0c\u5e76\u627e\u51fa\u6240\u6709\u4e24\u7aef\u4e2d\u81f3\u5c11\u4e00\u7aef\u4e3a\u591a\u8fb9\u5f62\u5916\u90e8\u7684\u70b9\uff0c\u627e\u5230\u4e0d\u5728\u7ebf\u6bb5\u4e0a\u79bb\u7ebf\u6bb5\u6700\u8fd1\u7684\u4e24\u70b9\u5373\u53ef\u3002\u6ce8\u610f\u7ebf\u6bb5\u4e24\u7aef\u70b9\u4e5f\u9700\u8981\u5224\u65ad\u3002\n\n\u63a5\u4e0b\u6765\u9700\u8981\u9a8c\u8bc1\u7ebf\u6bb5\u662f\u5426\u5b8c\u5168\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u3002\u9996\u5148\u5728\u6269\u5c55\u7ebf\u6bb5\u65f6\u5411\u5916\u5ef6\u4f38\u7684\u90e8\u5206\u662f\u4e00\u5b9a\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u7684\u3002\u800c\u5224\u65ad\u7ebf\u6bb5\u539f\u672c\u7684\u90e8\u5206\u53ea\u9700\u8981\u5224\u65ad\u8fd9\u4e00\u90e8\u5206\u5b58\u4e0d\u5b58\u5728\u4e24\u7aef\u4e2d\u81f3\u5c11\u4e00\u7aef\u4e3a\u591a\u8fb9\u5f62\u5916\u90e8\u7684\u70b9\u5373\u53ef\u3002\n\n\u4f46\u662f\u6ce8\u610f\u6709\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a\n\n![](https://s1.328888.xyz/2022/07/06/2thB.png)\n\n\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7ebf\u6bb5\u539f\u672c\u7684\u90e8\u5206\u6ca1\u6709\u591a\u8fb9\u5f62\u4efb\u4f55\u90e8\u5206\u76f8\u4ea4\u3002\n\n\u5bf9\u4e8e\u8fd9\u4e00\u79cd\u60c5\u51b5\uff0c\u4f7f\u7528\u591a\u8fb9\u5f62\u7684\u9762\u79ef\u53ef\u4ee5\u8f83\u4e3a\u65b9\u4fbf\u5730\u5224\u65ad\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u9884\u5904\u7406\u51fa\u6574\u4e2a\u591a\u8fb9\u5f62\u7684\u9762\u79ef $S$\uff0c\u8bbe\u4e24\u70b9\u5206\u522b\u4e3a $i,j$\uff0c\u5219\u8ba1\u7b97\u51fa\u7531\u70b9 $i$ \u5230\u70b9 $j$ \u6784\u6210\u591a\u8fb9\u5f62\u7684\u9762\u79ef $S_1$ \u4ee5\u53ca\u5269\u4e0b\u7684\u70b9\u548c $i,j$ \u6784\u6210\u591a\u8fb9\u5f62\u7684\u9762\u79ef $S_2$\uff0c\u5224\u65ad $S_1+S_2$ \u662f\u5426\u7b49\u4e8e $S$ \u5373\u53ef\u3002\u82e5\u76f8\u7b49\uff0c\u5219\u7ebf\u6bb5\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u3002\n\n\u63a5\u4e0b\u6765\u662f\u4e00\u4e9b\u4ee3\u7801\u7ec6\u8282\u4e0a\u7684\u5904\u7406\u95ee\u9898\uff1a\n\n\u6c42\u89e3\u76f4\u7ebf\u4e0e\u591a\u8fb9\u5f62\u4ea4\u70b9\u65f6\uff0c\u9700\u8981\u7279\u5224\u76f4\u7ebf\u4e0e\u591a\u8fb9\u5f62\u7684\u8fb9\u5e73\u884c\u7684\u60c5\u51b5\u3002\n\n\u9664\u6b64\u4ee5\u5916\uff0c\u4ea4\u70b9\u53ef\u80fd\u6070\u597d\u5728\u591a\u8fb9\u5f62\u7684\u70b9\u4e0a\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u9700\u8981\u5206\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba\u3002\n  - \u8be5\u70b9\u6240\u5728\u5185\u89d2 $< 180\\degree$\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u76f4\u7ebf\u4e00\u5b9a\u4f1a\u6709\u4e00\u7aef\u5728\u591a\u8fb9\u5f62\u5916\u3002\n  - \u8be5\u70b9\u6240\u5728\u5185\u89d2 $\\geq 180\\degree$\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u9700\u8981\u5224\u65ad\u76f4\u7ebf\u4e0e\u89d2\u7684\u4f4d\u7f6e\u5173\u7cfb\u3002\n\n\u5bf9\u4e8e\u4e0a\u8ff0\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u89c2\u5bdf\u4e0b\u9762\u4e24\u5f20\u56fe\uff1a\n\n![](https://s1.328888.xyz/2022/07/06/2nh7.png)\n![](https://s1.328888.xyz/2022/07/06/2AMk.png)\n\n\u4ee4\u7aef\u70b9\u4e3a $A$\uff0c\u4e0e\u7aef\u70b9\u76f8\u90bb\u7684\u4e24\u4e2a\u70b9\u4e3a $B,C$\uff0c\u76f4\u7ebf\u7684\u65b9\u5411\u5411\u91cf\u4e3a $\\textbf{v}$\uff0c\u5219\u76f4\u7ebf\u7a7f\u8fc7\u591a\u8fb9\u5f62\u8fb9\u754c\u7684\u5145\u8981\u6761\u4ef6\u4e3a $\\operatorname{sgn}(\\overrightarrow{AB} \\times \\textbf{v}) \\cdot \\operatorname{sgn}(\\textbf{v} \\times \\overrightarrow{AC}) \\geq 0$\u3002\n\n\u679a\u4e3e\u4e24\u7aef\u70b9\u9700\u8981 $O(n^2)$\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u6761\u7ebf\u6bb5\uff0c\u9700\u8981 $O(n \\log n)$ \u7684\u65f6\u95f4\u53bb\u5904\u7406\uff0c\u590d\u6742\u5ea6\u74f6\u9888\u5728\u4e8e\u5bf9\u4e0e\u591a\u8fb9\u5f62\u76f8\u4ea4\u6240\u6709\u70b9\u7684\u6392\u5e8f\u3002\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^3 \\log n)$\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <ctime>\n#include <cmath>\n#include <cstdlib>\n#include <vector>\n#define double long double\nconst int N=210;\nconst double inf=1e9,pi=acos(-1),eps=1e-7;\nint n;\ndouble ans,farea,l[N],r[N];\nbool vis[N];\nnamespace basic{\n\tint res;char cdc;bool ng;\n\ttemplate<typename T>T sq(T x){return x*x;}\n\ttemplate<typename T>T rv(T x){return x>T()?x:(-x);}\n\ttemplate<typename T>void cmin(T &x,T y){if(x>y)x=y;}\n\ttemplate<typename T>void cmax(T &x,T y){if(x<y)x=y;}\n\ttemplate<typename T>void swp(T &x,T &y){T z=x;x=y;y=z;}\n\tinline int read(){\n\t\tres=0,ng=false;\n\t\tfor(;cdc<'0'||cdc>'9';cdc=getchar())ng|=cdc=='-';\n\t\tfor(;!(cdc<'0'||cdc>'9');cdc=getchar())res=(res<<1)+(res<<3)+(cdc^48);\n\t\treturn ng?~res+1:res;\n\t}\n}using basic::sq;using basic::rv;using basic::cmin;using basic::cmax;using basic::swp;using basic::read;\nstruct cpx{\n\tdouble x,y;\n\tcpx():x(0),y(0){};\n\tcpx(double x,double y):x(x),y(y){};\n\tinline cpx operator-()const{return cpx(-x,-y);}\n\tinline cpx operator+(const cpx &nxt)const{return cpx(x+nxt.x,y+nxt.y);}\n\tinline cpx operator-(const cpx &nxt)const{return cpx(x-nxt.x,y-nxt.y);}\n\tinline cpx operator*(double w)const{return cpx(x*w,y*w);}\n\tinline cpx operator/(double w)const{return cpx(x/w,y/w);}\n\tinline double operator|(const cpx &nxt)const{return x*nxt.x+y*nxt.y;}\n\tinline double operator&(const cpx &nxt)const{return x*nxt.y-y*nxt.x;}\n\tinline bool operator<(const cpx &nxt)const{return x<nxt.x||(x==nxt.x&&y<nxt.y);}\n\tinline bool operator>(const cpx &nxt)const{return x>nxt.x||(x==nxt.x&&y>nxt.y);}\n\tinline double len()const{return sqrt(sq(x)+sq(y));}\n\tinline cpx bk()const{return *this/len();}\n}crr[N];std::vector<cpx> vec;\nstruct line{\n\tcpx u,v;\n\tline(){};\n\tline(const cpx &u,const cpx &v):u(u),v(v){};\n}lrr[N];\ninline double area(const cpx &a,const cpx &b,const cpx &c){return ((b-a)&(c-a))/2;}\ninline bool ponline(const cpx &a,const line &b){return rv((b.u-a)&(b.v-a))<eps;}\ninline bool online(const cpx &a,const line &b){return ponline(a,b)&&((b.u-a)|(b.v-a))<-eps;}\ninline double dist(const cpx &a,const line &b){return rv(area(a,b.u,b.v))*2/(b.u-b.v).len();}\ninline cpx depart(const cpx &a,const cpx &b,double da,double db){return (a*db+b*da)/(da+db);}\ninline cpx inter(const line &a,const line &b){return depart(a.u,a.v,area(a.u,b.u,b.v),area(a.v,b.v,b.u));}\ndouble f(int i,int j){\n\tstd::vector<cpx> vec;\n\twhile(i!=j)vec.push_back(crr[i]),i=i==n?1:i+1;\n\tvec.push_back(crr[j]);int len=vec.size();double res=0;\n\tfor(int p=0;p<len;++p)res+=(vec[p]&vec[(p+1)%len])/2;\n\treturn rv(res);\n}\nvoid check(line c){\n\tvec.clear();cpx p,mn=cpx(-inf,-inf),mx=cpx(inf,inf);\n\tif(c.u>c.v)swp(c.u,c.v);\n\tfor(int i=1;i<=n;++i){\n\t\tp=inter(c,lrr[i]);\n\t\tif(!online(p,lrr[i])||rv((lrr[i].v-lrr[i].u)&(c.v-c.u))<eps)continue;\n\t\tvec.push_back(p);\n\t}\n\tfor(int i=1;i<=n;++i){\n\t\tif(!ponline(crr[i],c))continue;\n\t\tcpx a=crr[i==1?n:i-1],b=crr[i==n?1:i+1],t=crr[i];\n\t\tif(vis[i]||((a-t)&(c.u-c.v))*((c.u-c.v)&(b-t))>eps)vec.push_back(crr[i]);\n\t}\n\tfor(cpx i:vec){\n\t\tif(!(i>c.u))cmax(mn,i);\n\t\tif(!(i<c.v))cmin(mx,i);\n\t\tif(i>c.u&&i<c.v)return;\n\t}\n\tcmax(ans,(mx-mn).len());\n}\nint main(){\n\tsrand(time(NULL)),n=read();\n\tfor(int x,y,i=1;i<=n;++i){\n\t\tx=read(),y=read();\n\t\tcrr[i]=cpx(x,y);\n\t}\n\tfarea=f(1,n);\n\tfor(int i=1;i<=n;++i)lrr[i]=line(crr[i],crr[i==n?1:i+1]),vis[i]=((crr[i]-crr[i==1?n:i-1])&(crr[i==n?1:i+1]-crr[i]))>eps;\n\tfor(int i=1;i<=n;++i){\n\t\tfor(int j=i+1;j<=n;++j){\n\t\t\tif(j!=i+1&&rv(f(i,j)+f(j,i)-farea)>eps)continue;\n\t\t\tcheck(line(crr[i],crr[j]));\n\t\t}\n\t}\n\tprintf(\"%.9Lf\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1657068670,
        "uid": 189995,
        "name": "constexpr",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 \u3010P6929 [ICPC2017 WF]Airport Construction\u3011"
    }
]
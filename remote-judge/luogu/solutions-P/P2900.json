[
    {
        "content": "\u7528\u4e24\u79cd\u4e0d\u4e00\u6837\u7684\u601d\u8def\u7acb\u4f53\u5730\u7406\u89e3\u659c\u7387\u4f18\u5316\uff0c\u4f60\u503c\u5f97\u62e5\u6709\u3002\n\n## \u9898\u610f\u5206\u6790\n\n\u65e2\u7136\u6240\u6709\u7684\u571f\u5730\u90fd\u8981\u4e70\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5230\uff0c\u5982\u679c\u4e00\u5757\u571f\u5730\u7684\u5bbd\u548c\u9ad8\uff08\u5176\u5b9e\u662f\u849f\u84bb\u628a\u957f\u65b9\u5f62\u7acb\u5728\u4e86\u5e73\u9762\u4e0a\uff09\u90fd\u6bd4\u53e6\u4e00\u5757\u8981\u5c0f\uff0c\u90a3\u4e48\u80af\u5b9a\u662f\u76f4\u63a5\u5e76\u8d2d\uff0c\u8fd9\u4e00\u5757\u5bf9\u7b54\u6848\u6ca1\u6709\u4efb\u4f55\u8d21\u732e\u3002\n\n\u6211\u4eec\u5148\u628a\u8fd9\u4e9b\u7ed9\u53bb\u6389\uff0c\u5177\u4f53\u505a\u6cd5\u53ef\u4ee5\u662f\uff0c\u6309\u9ad8\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c\u5bbd\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u7136\u540e\u4e0a\u53cc\u6307\u9488\u626b\u4e00\u904d\u3002\n\n\u4e8e\u662f\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u4e00\u4e2a\u9ad8\u5ea6\u9012\u51cf\u3001\u5bbd\u5ea6\u9012\u589e\u7684\u77e9\u5f62\u5e8f\u5217\u3002\u8003\u8651\u600e\u6837\u5236\u5b9a\u5b83\u4eec\u7684\u5e76\u8d2d\u65b9\u6848\u4f1a\u6700\u4f18\u3002\u663e\u7136\u5982\u679c\u8981\u5e76\u8d2d\uff0c\u4e00\u5b9a\u8981\u6311\u5e8f\u5217\u4e2d\u7684\u4e00\u6bb5\u533a\u95f4\uff0c\u8fd9\u6837\u8d21\u732e\u7b54\u6848\u7684\u5c31\u53ea\u6709\u6700\u5de6\u8fb9\u77e9\u5f62\u7684\u9ad8\u4e58\u4e0a\u6700\u53f3\u8fb9\u77e9\u5f62\u7684\u5bbd\uff0c\u4e2d\u95f4\u7684\u53c8\u662f\u6ca1\u6709\u8d21\u732e\u4e86\u3002\n\n\u8bbe$f_i$\u4e3a\u524d$i$\u4e2a\u77e9\u5f62\u7684\u6700\u5c0f\u82b1\u8d39\uff0c$w$\u4e3a\u5bbd\uff0c$h$\u4e3a\u9ad8\uff0c\u76f4\u63a5\u5199\u51fa\u4e00\u4e2a$O(n^2)$\u7684\u65b9\u7a0b\n\n$$f_i=\\min\\limits_{j=1}^i\\{f_{j-1}+w_ih_j\\}$$\n\n\u4e00\u770b\u8c8c\u4f3c\u662f\u4e00\u4e2a\u51b3\u7b56\u5355\u8c03\u6027\u4f18\u5316\u7684\u5f0f\u5b50\u3002\u7136\u800c\u3002\u3002\u3002\u3002\u3002\u3002\n\n## \u521d\u4e2d\u751f\u90fd\u4f1a\u7684\u51fd\u6570\u56fe\u50cf\u6cd5\n\n\u8fd9\u79cd\u7406\u89e3\u65b9\u6cd5\u662f\u5728\u51b3\u7b56\u5355\u8c03\u6027\u4f18\u5316DP\u7684\u57fa\u7840\u4e0a\u5e94\u8fd0\u800c\u751f\u7684\u3002\n\n\u6216\u8005\u8bf4\uff0c\uff08\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff09\u659c\u7387\u4f18\u5316\u53ef\u4ee5\u770b\u4f5c\u51b3\u7b56\u5355\u8c03\u6027\u4f18\u5316\u7684\u4e00\u79cd\u7279\u6b8a\u60c5\u5f62\u3002\u849f\u84bb\u5efa\u8bae\u8fd8\u662f\u5148\u5165\u624b\u51b3\u7b56\u5355\u8c03\u6027\u518d\u6765\u659c\u7387\u4f18\u5316\u5427\u3002\n\n\u849f\u84bb\u7684[DP\u5404\u79cd\u4f18\u5316\u603b\u7ed3](https://www.cnblogs.com/flashhu/p/9480669.html)\n\n\u849f\u84bb\u4e4b\u524d\u5199\u7684\u4e00\u9053\u7ecf\u5178\uff08~~\u88f8~~\uff09\u51b3\u7b56\u5355\u8c03\u6027\u9898\u7684\u9898\u89e3[\u6233\u8fd9\u91cc](https://www.cnblogs.com/flashhu/p/9488184.html)\uff08Lightning Conductor\uff09\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$f_{j-1}+w_ih_j$\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u628a\u5b83\u89c6\u4e3a\u4e00\u4e2a\u76f4\u7ebf$l_j:y=ax+b$\uff0c\u5176\u4e2d$a=h_j,b=f_{j-1}$\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$i$\uff0c\u6211\u4eec\u5c31\u662f\u9700\u8981\u6c42\u51fa\u6240\u6709$j\\le i$\u7684\u76f4\u7ebf\u7684$x$\u53d6$w_i$\u65f6\u6700\u5c0f\u7684\u4e00\u4e2a$y$\u503c\u3002\u4ecd\u7136\u7528KmPlot\u753b\u4e00\u4e2a\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u7684\u6240\u6709\u76f4\u7ebf\u7684\u6837\u5b50\uff0c\u5b83\u4eec\u5e94\u8be5\u6ee1\u8db3\u659c\u7387\u4f9d\u6b21\u9012\u51cf\u3002\n\n$l_1:y=2x;$\n\n$l_2:y=x+1;$\n\n$l_3:y=\\frac x 2+3;$\n\n$l_4:y=\\frac x 6+5.$\n\n![](https://cdn.luogu.com.cn/upload/pic/29583.png)\n\n\u771f\u6b63\u6709\u7528\u7684\u90e8\u5206\n\n![](https://cdn.luogu.com.cn/upload/pic/29584.png)\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u82e5\u5e72\u4e2a\u659c\u7387\u9012\u51cf\u7684\u51fd\u6570\u3002\u6211\u4eec\u4ecd\u7136\u9700\u8981\u6309\u7167\u51b3\u7b56\u5355\u8c03\u6027\u7684\u505a\u6cd5\uff0c\u7ef4\u62a4\u76f8\u90bb\u4e24\u4e2a\u51b3\u7b56\u76f4\u7ebf\u95f4\u7684\u4e34\u754c\u503c\uff08\u4ea4\u70b9\uff09$k$\u3002\u96be\u9053\u8fd8\u8981\u7ef4\u62a4\u51b3\u7b56\u4e8c\u5206\u6808\uff0c\u5bf9\u6bcf\u4e2a\u4e34\u754c\u503c\u90fd\u4e8c\u5206\u4e48\uff1f\n\n\u8fd9\u4e9b\u51b3\u7b56\u4e0d\u662f\u76f4\u7ebf\u5417\uff1f\u6c42\u4e24\u4e2a\u76f4\u7ebf\u7684\u4ea4\u70b9\u3002\u3002\u3002\u3002\u3002\u3002\u521d\u4e2d\u6570\u5b66\u5c31\u6559\u4e86\uff0c\u662f$O(1)$\u7684\u3002\u4e5f\u5c31\u662f\u5bf9\u4e24\u4e2a\u76f8\u90bb\u51b3\u7b56\u76f4\u7ebf$l_1,l_2$\uff0c\u6211\u4eec\u6c42$\\frac{b_2-b_1}{a_1-a_2}$\u3002\u5176\u5b83\u8fc7\u7a0b\u8ddf\u51b3\u7b56\u5355\u8c03\u6027\u662f\u4e00\u6a21\u4e00\u6837\u7684\u3002\u76f4\u7ebf\u5165\u961f\u524d\uff0c\u5982\u679c\u961f\u5c3e\u4e0d\u6ee1\u8db3\u659c\u7387\u9012\u589e\u5219\u51fa\u961f\u3002\u6c42$f_i$\u4e4b\u524d\uff0c\u5148\u628a\u961f\u9996\u4e34\u754c\u503c$\\le w_i$\u7684\u51b3\u7b56\u51fa\u961f\uff0c\u90a3\u4e48\u73b0\u5728\u961f\u9996\u5c31\u662f\u6700\u4f18\u51b3\u7b56\u4e86\u3002\n\n\u8fd9\u6837\u6c42\u51fa$f_n$\u53ea\u9700\u8981$O(n)$\u7684\u65f6\u95f4\u3002\n\n## \u9ad8\u4e2d\u751f\u90fd\u4f1a\u7684\u7ebf\u6027\u89c4\u5212\u6cd5\n\n\u8fd9\u624d\u662f\u7406\u89e3\u659c\u7387\u4f18\u5316\u7684\u6b63\u5b97\u65b9\u6cd5\uff0c\u56e0\u4e3a\u4e0a\u9762\u5e76\u6ca1\u6709\u5145\u5206\u4f53\u73b0\u5bf9\u659c\u7387\u7684\u5904\u7406\u8fc7\u7a0b\u3002\n\n\u4e0a\u9762\u5bf9\u4e24\u4e2a\u76f8\u90bb\u76f4\u7ebf\u6c42$\\frac{b_2-b_1}{a_1-a_2}$\uff0c\u770b\u8d77\u6765\u6709\u70b9\u50cf\u6c42\u4ec0\u4e48\u4e1c\u897f\u3002\n\n\u6211\u4eec\u539f\u6765\u628a\u51b3\u7b56\u5f53\u6210\u76f4\u7ebf\uff0c\u659c\u7387\u4e3a$a$\uff0c\u622a\u8ddd\u4e3a$b$\u3002\u73b0\u5728\u6211\u4eec\u6362\u4e00\u4e0b\u3002\u628a\u51b3\u7b56$f_{j-1}+w_ih_j$\u770b\u4f5c\u4e00\u4e2a\u70b9$p_j(x,y)$\uff0c\u5176\u4e2d$x=-h_j,y=f_{j-1}$\u3002\n\n\u73b0\u5728\u8981\u6c42\u89e3\u7684\u95ee\u9898\u53c8\u53d8\u6210\u4e86\u4ec0\u4e48\u6837\u5b50\u5462\uff1f\u5728\u5e73\u9762\u4e0a\u6709\u82e5\u5e72\u4e2a\u70b9\uff0c\u628a$f_i$\u770b\u6210\u76ee\u6807\u51fd\u6570$z$\uff0c\u6211\u4eec\u9700\u8981\u627e\u5230$f_i=w_ih_j+f_{j-1}$\u5373$z=-w_ix+y$\u7684\u6700\u5c0f\u503c\u3002\u8fd9\u4e0d\u662f\u4e2a\u7ebf\u6027\u89c4\u5212\u4e48\uff1f\n\n\u628a\u5f0f\u5b50\u53d8\u6210$y=w_ix+f_i$\uff0c\u73b0\u5728\u5c31\u8ba9\u6211\u4eec\u6765\u6700\u5c0f\u5316\u622a\u8ddd$f_i$\u3002\u624b(nao)\u52a8(dong)\u6a21\u62df\u4e00\u4e0b\uff0c\u6211\u4eec\u73b0\u5728\u6b63\u5728\u62ff\u7740\u4e00\u4e2a\u659c\u7387\u4e3a$w_i$\u7684\u76f4\u7ebf\uff0c\u4ece\u4e0b\u5f80\u4e0a\u79fb\u52a8\uff0c\u5f53\u7b2c\u4e00\u6b21\u7ecf\u8fc7\u67d0\u4e2a\u51b3\u7b56\u70b9\u7684\u65f6\u5019\uff0c\u76f4\u7ebf\u7684\u5728$y$\u8f74\u4e0a\u7684\u622a\u8ddd\u5c31\u662f\u6211\u4eec\u8981\u6c42\u7684\u76ee\u6807\u51fd\u6570$f_i$\u7684\u6700\u5c0f\u503c\u4e86\u3002\n\n\u968f\u4fbf\u753b\u4e00\u5806\u70b9\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u65e0\u8bba\u76f4\u7ebf\u4ee5\u600e\u6837\u7684\u659c\u7387\u5411\u4e0a\u9760\uff0c\u603b\u6709\u4e00\u4e9b\u70b9\u6c38\u8fdc\u90fd\u4e0d\u4f1a\u7b2c\u4e00\u6b21\u4e0e\u76f4\u7ebf\u76f8\u4ea4\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e9b\u51b3\u7b56\u662f\u6ca1\u7528\u7684\u3002\u5269\u4e0b\u7684\u6709\u7528\u7684\u51b3\u7b56\u70b9\u4f1a\u6784\u6210\u4e00\u4e2a\u51f8\u5305\uff1a\uff08\u56e0\u4e3a\u8981\u753b\u70b9\u6240\u4ee5\u6362\u6210\u4e86GeoGebra\uff09\n\n![](https://cdn.luogu.com.cn/upload/pic/29588.png)\n\n\u51f8\u5305\u7684\u6027\u8d28\u5c31\u662f\u659c\u7387\u9012\u589e/\u9012\u51cf\u3002\u5728\u6b64\u9898\u4e2d\uff0c\u56e0\u4e3a$w$\u9012\u589e\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u5355\u8c03\u961f\u5217\u4e2d\u5b58\u7684\u662f\u82e5\u5e72\u4e2a\u70b9\u6ee1\u8db3$x$\u9012\u589e\uff08$h$\u9012\u51cf\uff09\uff0c$y$\u9012\u589e\uff0c\u800c\u4e14\u76f8\u90bb\u4e24\u4e2a\u70b9\u7684\u659c\u7387\u4e5f\u9012\u589e\u3002\u8fd9\u548c\u539f\u5e8f\u5217\u7684\u987a\u5e8f\u662f\u540c\u5411\u7684\u3002\u5047\u8bbe\u961f\u5c3e\u4e0b\u6807\u4e3a$t$\uff0c\u5f53\u9700\u8981\u5728\u961f\u5c3e\u52a0\u5165\u4e00\u4e2a\u65b0\u7684\u51b3\u7b56\u70b9\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u9047\u5230\u8fd9\u6837\u7684\u60c5\u51b5\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/29589.png)\n\n\u8fd9\u65f6\u5019$p_t$\u5df2\u7ecf\u4e0d\u4f18\u4e86\uff0c\u6211\u4eec\u628a\u5b83\u51fa\u961f\uff0c\u5982\u6b64\u76f4\u5230\u6ee1\u8db3\u659c\u7387\u9012\u589e\u4e3a\u6b62\uff0c$p_i$\u5c31\u53ef\u4ee5\u5165\u961f\u4e86\u3002\u548c\u4e0a\u9762\u90a3\u79cd\u7406\u89e3\u65b9\u6cd5\u7684\u5199\u6cd5\u5dee\u4e0d\u591a\uff0c\u6c42\u76f8\u90bb\u4e24\u4e2a\u70b9\u5f62\u6210\u7684\u76f4\u7ebf\u659c\u7387\u7136\u540e\u6bd4\u4e00\u4e0b\u5927\u5c0f\u3002\u961f\u9996\u7684\u5904\u7406\u8ddf\u4e0a\u9762\u90a3\u79cd\u7406\u89e3\u65b9\u6cd5\u7684\u5199\u6cd5\u4e5f\u5dee\u4e0d\u591a\uff0c\u5982\u679c\u961f\u9996\u4e0e\u540e\u4e00\u4e2a\u7684\u659c\u7387\u5c0f\u4e8e$w_i$\u5c31\u51fa\u961f\u3002\u6700\u540e\u7684\u961f\u9996\u4f9d\u7136\u662f\u6700\u4f18\u89e3\u3002\n\n## \u5b9e\u73b0\n\n\u4e24\u79cd\u5b9e\u73b0\u7684\u4ee3\u7801\u957f\u5f97\u90fd\u5dee\u4e0d\u591a\uff0c\u90fd\u8981\u641e\u4e00\u4e2a\u5355\u8c03\u961f\u5217\uff0c\u90fd\u8981\u6c42\u4e34\u754c\u503c/\u659c\u7387\u3002\u6240\u4ee5\u5c31\u653e\u4e00\u4e2a\u4ee3\u7801\u5427\u3002\u3002\u3002\n\n\u590d\u6742\u5ea6$O(n\\log n)$\uff0c\u74f6\u9888\u7adf\u7136\u5728sort\u4e0a\uff1f\uff01~~\u849f\u84bb\u53ef\u4e0d\u60f3\u6765\u4ec0\u4e48wys\u6392\u5e8f~~\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define RG register\n#define R RG int\n#define G c=getchar()\n#define Calc(i,j) (f[j-1]-f[i-1])/(a[i].h-a[j].h)\n//method1:\u6c42\u51fa\u4e34\u754c\u503c\n//method2:\u6c42\u51fa\u659c\u7387\nusing namespace std;\nconst int N=1e5+9;\nint q[N];\ndouble f[N],k[N];\n//method1:k_i\u4e3a\u51b3\u7b56\u76f4\u7ebfq_i\u4e0eq_i+1\u7684\u4e34\u754c\u503c\uff08\u4ea4\u70b9\uff09\n//method2:k_i\u4e3a\u51b3\u7b56\u70b9q_i\u4e0eq_i+1\u6240\u8fde\u6210\u76f4\u7ebf\u7684\u659c\u7387\nstruct Land{\n\tint w,h;//\u7ed3\u6784\u4f53\u6392\u5e8f\n\tinline bool operator<(RG Land&x)const{\n\t\treturn h>x.h||(h==x.h&&w>x.w);\n\t}\n}a[N];\ninline int in(){\n\tRG char G;\n\twhile(c<'-')G;\n\tR x=c&15;G;\n\twhile(c>'-')x=x*10+(c&15),G;\n\treturn x;\n}\nint main(){\n\tR n=in(),i,h,t;\n\tfor(i=1;i<=n;++i)\n\t\ta[i].w=in(),a[i].h=in();\n\tsort(a+1,a+n+1);\n\tfor(h=i=1;i<=n;++i)//\u53cc\u6307\u9488\u626b\u63cf\u53bb\u9664\u65e0\u7528\u77e9\u5f62\n\t\tif(a[h].w<a[i].w)a[++h]=a[i];\n\tn=h;\n\tfor(h=i=1,t=0;i<=n;++i){\n\t\twhile(h<t&&k[t-1]>=Calc(q[t],i))--t;//\u7ef4\u62a4\u4e34\u754c\u503c/\u659c\u7387\u5355\u8c03\n\t\tk[t]=Calc(q[t],i);q[++t]=i;//\u52a0\u5165\u51b3\u7b56\u76f4\u7ebf/\u51b3\u7b56\u70b9\n\t\twhile(h<t&&k[h]<=a[i].w)++h;//\u5f39\u51fa\u5df2\u7ecf\u4e0d\u4f18\u7684\u51b3\u7b56\n\t\tf[i]=(double)a[q[h]].h*a[i].w+f[q[h]-1];//\u6c42\u51fa\u6700\u4f18\u89e3\n\t}\n\tprintf(\"%.0lf\\n\",f[n]);\n\treturn 0;\n}\n```",
        "postTime": 1534688607,
        "uid": 61325,
        "name": "FlashHu",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "\u6bcf\u5757\u571f\u5730\u7684\u957f\u548c\u5bbd\u5206\u522b\u7528$l$\u548c$h$\u6570\u7ec4\u8868\u793a\u3002\n\n\u56e0\u4e3a\u4e00\u7ec4\u571f\u5730\u8d2d\u4e70\u7684\u4ef7\u683c $=$ \u6700\u5927\u7684\u957f $*$ \u6700\u5927\u7684\u5bbd\uff0c**\u6240\u4ee5\u5bf9\u4e8e\u4e00\u5757\u571f\u5730$x$\uff0c\u5982\u679c\u5b58\u5728\u4e00\u5757\u571f\u5730$y$\uff0c\u6ee1\u8db3$l[y]>=l[x]$\u4e14$h[y]>=h[x]$**\uff0c\u90a3\u4e48\u5b83\u53ea\u8981\u628a\u571f\u5730$x$\u548c\u571f\u5730$y$\u5408\u4e3a\u4e00\u7ec4\uff0c\u6700\u5927\u7684\u957f\u53ef\u4ee5\u4e0d\u53d6$l[x]$\uff0c\u6700\u5927\u7684\u5bbd\u53ef\u4ee5\u4e0d\u53d6$h[x]$\uff0c**\u6240\u4ee5\u571f\u5730$x$\u7684\u5b58\u5728\u4e0e\u5426\u5bf9\u7b54\u6848\u662f\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u7684\u3002**\n\n\u56e0\u6b64\uff0c\u53ef\u4ee5\u628a\u6240\u6709\u571f\u5730\u6309\u957f\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5bf9\u4e8e\u957f\u5ea6\u76f8\u540c\u7684\u6309\u5bbd\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\u7136\u540e\u7ef4\u62a4\u4e00\u4e2a\u6808\uff0c\u5c06\u6392\u5e8f\u540e\u7684\u571f\u5730\u4e00\u4e2a\u4e00\u4e2a\u52a0\u5165\uff0c\u6bcf\u6b21\u52a0\u5165\u4e4b\u524d\uff0c\u5148\u628a\u5f53\u524d\u6808\u4e2d\u5bbd\u5c0f\u4e8e\u7b49\u4e8e\u5b83\u7684\u571f\u5730\u5168\u90e8\u5220\u9664\uff08\u56e0\u4e3a\u8fd9\u4e9b\u571f\u5730\u957f\u80af\u5b9a\u5c0f\u4e8e\u7b49\u4e8e\u5b83\uff09\uff0c\u518d\u52a0\u5165\u5b83\u3002\u6700\u540e\u7559\u5728\u6808\u91cc\u7684\u571f\u5730\u5c31\u662f\u6709\u5b58\u5728\u5fc5\u8981\u7684\u571f\u5730\u3002\n\n**\u53ef\u4ee5\u53d1\u73b0\uff0c\u6b64\u65f6\u7559\u4e0b\u7684\u571f\u5730\u7684\u5bbd\u5ea6\u662f\u4ece\u5927\u5230\u5c0f\u6392\u597d\u7684\u3002\u6240\u6709\u8fd8\u6709\u4e00\u4e2a\u7ed3\u8bba\uff1a\u6b64\u65f6\u5728\u6700\u4f18\u51b3\u7b56\u4e0b\uff0c\u6bcf\u4e00\u7ec4\u571f\u5730\u90fd\u662f\u8fde\u7eed\u7684\u4e00\u6bb5\u3002**\u4e3a\u4ec0\u4e48\u5462\uff1f\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbe\u8fd9\u65f6\u6709\u4e09\u4e2a\u571f\u5730$x$\uff0c$y$\uff0c$z$\uff0c\u662f\u8fde\u7eed\u7684\u4e09\u5757\u571f\u5730\uff0c\u90a3\u4e48\u6709\uff1a$l[x]<l[y]<l[z]$\u4e14$h[x]>h[y]>h[z]$\u3002\u8003\u8651\u628a$x$\u548c$z$\u5206\u4e3a\u4e00\u7ec4\uff0c$y$\u5355\u72ec\u4e00\u7ec4\uff0c\u8981\u82b1\u8d39$h[x]*l[z]+h[y]*l[y]$\u7684\u8d39\u7528\u3002\u5982\u679c\u628a$y$\u4e5f\u5206\u8fdb$x$\uff0c$z$\u90a3\u4e00\u7ec4\u5462\uff1f\u53ea\u8981$h[x]*l[z]$\u7684\u8d39\u7528\uff0c\u7701\u53bb\u4e86$y$\u5355\u72ec\u4e00\u7ec4\u7684\u8d39\u7528\u3002\n\n**\u56e0\u6b64\uff0c\u8003\u8651$dp$\u3002\u8bbe$f[i]$\u8868\u793a\u524d$i$\u4e2a\u571f\u5730\u7684\u6700\u5c0f\u8d39\u7528\u3002\u6613\u5f97\u8f6c\u79fb\u65b9\u7a0b\uff1a$f[i]=min(f[i],f[j]+h[j+1]*l[i])$\uff0c\u7136\u800c\u8fd9\u662f$O(n^2)$\u7684\uff0c\u8fc7\u4e0d\u53bb\u3002**\n\n\u8003\u8651\u4f18\u5316\u3002\u6c42\u51fa$f[j]$\u4e4b\u540e\uff0c\u8bbe$a=h[j+1]$\uff0c$b=f[j]$\uff0c\u5c31\u53ef\u4ee5\u8868\u793a\u4e00\u6761\u76f4\u7ebf\uff1a$y=ax+b$\uff0c\u6c42$f[i]$\u7b49\u4ef7\u4e8e\u5728\u5df2\u7ecf\u8868\u793a\u51fa\u7684\u6240\u6709\u76f4\u7ebf\u4e2d\uff0c\u627e\u4e00\u4e2a\u5f53$x=l[i]$\u65f6$y$\u6700\u5c0f\u7684\u3002**\u6ce8\u610f\u5230$l[i]$\u662f\u9012\u589e\u7684\uff0c\u800c$h[i]$\u662f\u9012\u51cf\u7684\u3002**\u5982\u56fe1\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/24548.png)\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e00\u65e6$l[i]>p$\u7684\u6a2a\u5750\u6807\uff0c\u8f83\u4f18\u7684\u6c38\u8fdc\u662f\u76f4\u7ebf$p2$\uff0c$p1$\u5df2\u7ecf\u6ca1\u6709\u7528\u4e86\u3002**\u56e0\u6b64\u7ef4\u62a4\u4e00\u4e2a\u5355\u8c03\u961f\u5217\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$i$\uff0c\u6bd4\u8f83\u5355\u8c03\u961f\u5217\u961f\u5934\u4e24\u4e2a$j$\u751f\u6210\u7684\u76f4\u7ebf\uff0c\u53ea\u8981\u5f53$x=l[i]$\u65f6\uff0c\u961f\u5934\u7b2c\u4e00\u4e2a\u4e0d\u5982\u961f\u5934\u7b2c\u4e8c\u4e2a\u4f18\uff0c\u5c31\u628a\u961f\u5934\u7b2c\u4e00\u4e2a\u5220\u9664\u4e86\uff0c\u76f4\u5230\u961f\u5934\u7b2c\u4e00\u4e2a\u6bd4\u7b2c\u4e8c\u4e2a\u4f18\u3002**\n\n\u7136\u800c\u8fd8\u6709\u8fd9\u6837\u4e00\u79cd\u60c5\u51b5\uff0c\u5982\u56fe2\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/24549.png)\n\n\u6309\u7167\u4e4b\u524d\u7684\u90a3\u79cd\u505a\u6cd5\uff0c\u8fc7\u70b9$A$\u4e4b\u524d\uff0c\u90fd\u4f1a\u9009\u62e9\u76f4\u7ebf$p1$\u6700\u4f18\uff0c\u4f46\u662f\u5728\u8fc7$B$\u70b9\u4e4b\u540e\uff0c$p1$\u5df2\u7ecf\u4e0d\u5982$p3$\u4f18\u4e86\u3002**\u6240\u4ee5\u6bcf\u6b21\u628a\u76f4\u7ebf$i$\u52a0\u5165\u961f\u5217\u4f5c\u4e3a\u4ee5\u540e\u5907\u9009\u7684$j$\u4e4b\u524d\uff0c\u5148\u5224\u65ad\u961f\u5c3e\u4e24\u6761\u76f4\u7ebf\u548c\u76f4\u7ebf$i$\u662f\u5426\u6709\u5982\u4e0a\u56fe\u7684\u5173\u7cfb\uff0c\u6709\u7684\u8bdd\u5220\u9664\u961f\u5c3e\u7b2c\u4e00\u6761\uff0c\u76f4\u5230\u4e0d\u5b58\u5728\u4e0a\u56fe\u60c5\u51b5\uff0c\u52a0\u5165\u76f4\u7ebf$i$\u3002**\n\n\u5224\u65ad\u5373\uff1a$p1$\u4e0e$p2$\u4ea4\u70b9\u6a2a\u5750\u6807\u662f\u5426\u5927\u4e8e$p1$\u4e0e$p3$\u4ea4\u70b9\u6a2a\u5750\u6807\u3002\u9700\u8981\u7528\u5230\u9664\u6cd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u79fb\u9879\u65f6\u5b83\u53d8\u4e3a\u4e58\u6cd5\uff0c\u907f\u514d\u56e0\u4ea4\u70b9\u6a2a\u5750\u6807\u4e0d\u4e3a\u6574\u6570\u5e26\u6765\u7684\u7cbe\u5ea6\u95ee\u9898\u3002\n\n\u603b\u7ed3\u4e00\u4e0b\u5c31\u662f\uff0c\u5148\u5c06\u571f\u5730\u6392\u5e8f\uff0c\u53bb\u6389\u6ca1\u6709\u5b58\u5728\u5fc5\u8981\u7684\u571f\u5730\uff0c\u7136\u540e\u8fdb\u884c$dp$\uff0c\u5148\u5220\u9664\u961f\u5934\u4e0d\u4f18\u7684\uff0c\u5220\u5b8c\u4e4b\u540e\u961f\u5934\u5c31\u662f\u6b64\u65f6\u6700\u4f18\u7684$j$\uff0c\u7136\u540e\u7b97\u51fa$f[i]$\uff0c\u751f\u6210\u76f4\u7ebf$i$\uff0c\u7136\u540e\u5220\u9664\u961f\u5c3e\u4e0d\u4f18\u7684\uff0c\u518d\u5c06\u76f4\u7ebf$i$\u653e\u5165\u961f\u5217\uff0c\u4f5c\u4e3a\u4ee5\u540e\u7684$j$\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cstdlib>\n\nusing namespace std;\n\nconst int e = 5e4 + 5;\nint n, q[e], t = 1, w = 1, tot;\nlong long a[e], b[e], f[e], h[e], l[e];\n\nstruct point\n{\n\tlong long w, l;\n}c[e];\n\ninline int read()\n{\n\tchar ch; int res;\n\twhile (ch = getchar(), ch < '0' || ch > '9');\n\tres = ch - 48;\n\twhile (ch = getchar(), ch >= '0' && ch <= '9')\n\tres = res * 10 + ch - 48;\n\treturn res;\n}\n\ninline bool cmp(const point &c, const point &d)\n{\n\tif (c.l == d.l) return c.w < d.w;\n\telse return c.l < d.l;\n}\n\ninline double calc(int i, int j)\n{\n\treturn f[j] + h[j + 1] * l[i];\n}\n\ninline bool slope(int p1, int p2, int p3)\n{\n\treturn (b[p3] - b[p1]) * (a[p2] - a[p1])\n\t- (b[p2] - b[p1]) * (a[p3] - a[p1]) >= 0;\n}\n\nint main()\n{\n\tint i;\n\tn = read();\n\tfor (i = 1; i <= n; i++)\n\t{\n\t\tc[i].w = read();\n\t\tc[i].l = read();\n\t}\n\tsort(c + 1, c + n + 1, cmp);\n\tfor (i = 1; i <= n; i++)\n\t{\n\t\twhile (tot && c[i].w >= h[tot]) tot--;\n\t\th[++tot] = c[i].w; l[tot] = c[i].l;\n\t}\n\ta[0] = h[1];\n\tfor (i = 1; i <= tot; i++)\n\t{\n\t\twhile (t < w && calc(i, q[t]) >= calc(i, q[t + 1])) t++;\n\t\tf[i] = calc(i, q[t]);\n\t\ta[i] = h[i + 1];\n\t\tb[i] = f[i];\n\t\twhile(t < w && slope(q[w - 1], q[w], i)) w--;\n\t\tq[++w] = i;\n\t}\n\tcout << f[tot] << endl;\n\treturn 0;\n}\n```",
        "postTime": 1520862885,
        "uid": 15268,
        "name": "\u82b1\u6dc7\u6dcb",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "[$$\\Large\\texttt{My Blog}$$](https://hydingsy.github.io/articles/problem-Luogu-2900-Land-Acquisition/)\n\n---\n\n## Description\n\n> \u9898\u76ee\u94fe\u63a5\uff1a[Luogu 2900](https://www.luogu.org/problemnew/show/P2900)\n\n\u7ea6\u7ff0\u51c6\u5907\u6269\u5927\u4ed6\u7684\u519c\u573a\uff0c\u773c\u524d\u4ed6\u6b63\u5728\u8003\u8651\u8d2d\u4e70 $n$ \u5757\u957f\u65b9\u5f62\u7684\u571f\u5730\uff0c\u6bcf\u5757\u571f\u5730\u5bbd\u4e3a $w_i$\u3001\u957f\u4e3a $l_i$\u3002\u5982\u679c\u7ea6\u7ff0\u5355\u4e70\u4e00\u5757\u571f\u5730\uff0c\u4ef7\u683c\u5c31\u662f\u571f\u5730\u7684\u9762\u79ef $w_i\\times l_i$\u3002\u4f46\u4ed6\u53ef\u4ee5\u9009\u62e9\u5e76\u8d2d\u4e00\u7ec4\u571f\u5730\uff0c\u5e76\u8d2d\u7684\u4ef7\u683c\u4e3a\u8fd9\u4e9b\u571f\u5730\u4e2d\u6700\u5927\u7684\u957f\u4e58\u4ee5\u6700\u5927\u7684\u5bbd\uff0c\u5373 $\\max\\{w_i\\}\\times \\max\\{l_i\\}$\u3002\u6bd4\u5982\u7ea6\u7ff0\u5e76\u8d2d\u4e00\u5757 $3\\times 5$ \u548c\u4e00\u5757 $5\\times 3$ \u7684\u571f\u5730\uff0c\u4ed6\u53ea\u9700\u8981\u652f\u4ed8 $5\\times 5=25$ \u5143\uff0c \u6bd4\u5355\u4e70\u5408\u7b97\u3002\u7ea6\u7ff0\u5e0c\u671b\u4e70\u4e0b\u6240\u6709\u7684\u571f\u5730\u3002\u4ed6\u53d1\u73b0\uff0c\u5c06\u8fd9\u4e9b\u571f\u5730\u5206\u6210\u4e0d\u540c\u7684\u5c0f\u7ec4\u6765\u5e76\u8d2d\u53ef\u4ee5\u8282\u7701\u7ecf\u8d39\u3002\u7ed9\u5b9a\u6bcf\u4efd\u571f\u5730\u7684\u5c3a\u5bf8\uff0c\u8bf7\u4f60\u5e2e\u52a9\u4ed6\u8ba1\u7b97\u8d2d\u4e70\u6240\u6709\u571f\u5730\u6240\u9700\u7684\u6700\u5c0f\u8d39\u7528\u3002\n\n\u6570\u636e\u8303\u56f4\uff1a$1\\le n\\le 5\\times 10^4$\uff0c$1\\le w_i,l_i\\le 10^6$\n\n------\n\n## Solution\n\n\u6211\u4eec\u9996\u5148\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff1a\u5982\u679c\u5bf9\u4e8e\u571f\u5730 $i,j$ \u6ee1\u8db3 $w_i\\ge w_j$ \u4e14 $l_i\\ge l_j$\uff0c\u90a3\u4e48\u571f\u5730 $j$ \u663e\u7136\u662f\u65e0\u7528\u7684\u3002\u90a3\u4e48\u6700\u7ec8\u6709\u7528\u7684\u571f\u5730\uff0c\u5982\u679c\u5728**\u5bbd\u9012\u51cf**\u7684\u524d\u63d0\u4e0b\uff0c\u4e00\u5b9a\u662f**\u957f\u9012\u589e**\u7684\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u901a\u8fc7\u6392\u5e8f\u7b80\u5355\u9884\u5904\u7406\u3002\n\n\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u5f97\u5230 $n$ \u5757\u571f\u5730\u6ee1\u8db3 $w_i\\le w_{i-1},l_i\\ge l_{i-1}$\uff0c\u6211\u4eec\u53ef\u4ee5\u8bc1\u660e\u6bcf\u4e00\u7ec4\u571f\u5730\u4e00\u5b9a\u662f**\u8fde\u7eed\u7684\u4e00\u6bb5**\u3002\u8fd9\u4e2a\u8bc1\u660e\u57fa\u672c\u662f\u663e\u7136\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u5c06\u4e00\u5757\u571f\u5730\u5e76\u5165\u524d\u540e\u7684\u7ec4\u522b\uff0c\u4f7f\u5f97\u8fd9\u5757\u571f\u5730\u4e0d\u9700\u8981\u989d\u5916\u82b1\u8d39\u3002\n\n\u7531\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u63a8\u51fa $\\text{DP}$ \u65b9\u7a0b\uff1a$f_i=\\min\\{f_j+w_{j+1}\\times l_i\\}\\quad (0\\le j<i)$\uff0c\u4f46\u662f\u8fd9\u4e2a\u8f6c\u79fb\u662f $O(n^2)$ \u7684\uff0c\u4e0d\u80fd\u901a\u8fc7\u672c\u9898\u3002\n\n\u5176\u5b9e\u8fd9\u4e2a\u4e1c\u897f\u662f\u6709**\u51b3\u7b56\u5355\u8c03\u6027**\u7684\uff0c\u6211\u4eec\u8003\u8651**\u659c\u7387\u4f18\u5316**\u3002\n\n\u6211\u4eec\u4efb\u53d6 $j,k$ \u6ee1\u8db3 $0\\le k<j<i$\uff0c\u5982\u679c\u6b64\u65f6 $j$ \u6bd4 $k$ \u8981**\u66f4\u597d**\uff0c\u90a3\u4e48\u6709\u5982\u4e0b\u4e0d\u7b49\u5f0f\uff1a\n$$\\begin{aligned}f_j+w_{j+1}\\times l_i&\\le f_k+w_{k+1}\\times l_i \\\\f_j-f_k&\\le l_i\\times (w_{k+1}-w_{j+1})\\end{aligned}$$\n\u7531\u4e8e\u5bbd\u662f\u9012\u51cf\u7684\uff0c\u90a3\u4e48 $w_{k+1}\\ge w_{j+1}$\uff0c\u53ef\u4ee5\u76f4\u63a5\u79fb\u9879\u5f97\u5230\uff1a\n$$l_i\\ge \\frac{f_j-f_k}{w_{k+1}-w_{j+1}}$$\n\u663e\u7136\u6211\u4eec\u53ea\u8981\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u58f3\u5c31\u53ef\u4ee5\u659c\u7387\u4f18\u5316\u5566\uff01\n\n**\u65f6\u95f4\u590d\u6742\u5ea6**\uff1a$O(n\\log n)$\uff08\u74f6\u9888\u7adf\u7136\u5728\u6392\u5e8f\u4e0a QAQ\uff09\n\n------\n\n## Code\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nconst int N=5e4+5;\nint n,q[N];\nlong long f[N];\nstruct Land {\n\tint x,y;\n\tbool operator < (const Land &b) const {\n\t\treturn x==b.x?y>b.y:x>b.x;\n\t}\n} a[N];\n\nvoid init() {\n\tstd::sort(a+1,a+n+1);\n\tint m=0;\n\tfor(int i=1;i<=n;++i) if(a[i].y>a[m].y) a[++m]=a[i];\n\tn=m;\n}\ndouble slope(int i,int j) {\n\treturn 1.0*(f[i]-f[j])/(a[j+1].x-a[i+1].x);\n}\nint main() {\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i) scanf(\"%d%d\",&a[i].x,&a[i].y);\n\tinit();\n\tint l=1,r=0;\n\tq[++r]=0;\n\tfor(int i=1;i<=n;++i) {\n\t\twhile(l<r&&slope(q[l],q[l+1])<=a[i].y) ++l;\n\t\tf[i]=f[q[l]]+1LL*a[q[l]+1].x*a[i].y;\n\t\twhile(l<r&&slope(q[r-1],q[r])>=slope(q[r],i)) --r;\n\t\tq[++r]=i;\n\t}\n\tprintf(\"%lld\\n\",f[n]);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1548169309,
        "uid": 49725,
        "name": "Siyuan",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "# \u571f\u5730\u5f81\u7528\u9898\u89e3(\u517c\u659c\u7387\u4f18\u5316\u8be6\u89e3)\n\u8fd9\u4e0d\u662f\u4ee5\u89e3\u9898\u4e3a\u6700\u4e3b\u8981\u76ee\u7684(\u4ee3\u7801\u7ec6\u8282\u4e0d\u8bb2)\u7684\u9898\u89e3\u8c22\u8c22\n\n\u56e0\u4e3a\u81ea\u5df1\u5b66\u7684\u65f6\u5019\u6709\u4e00\u4e9b\u89c9\u5f97\u96be\u61c2\n\n\u6240\u4ee5\u60f3\u7528\u5f88\u901a\u4fd7\u7684\u65b9\u6cd5\u6559\u5927\u5bb6\u659c\u7387\u4f18\u5316\uff0c\u5e0c\u671b\u9898\u89e3\u901a\u8fc7QwQ\n\n\u94fe\u63a5\u9898\u76ee\uff1a[\u6d1b\u8c37\u571f\u5730\u5f81\u7528](https://www.luogu.org/problemnew/show/P2900)\n\n\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u5927\u5bb6\u53ef\u80fd\u9700\u8981\u7684\u4e1c\u897f\u54df\u3002\u3002\u3002\n\n[\u8fd9\u91cc\u6709$dp$\u7684\u5404\u79cd\u4f18\u5316\u3002\u3002\u3002](https://www.cnblogs.com/cjoierljl/p/9667951.html)\n\n[\u8fd9\u91cc\u662f$Flash Hu$\u7684dp\u4f18\u5316\u535a\u5ba2](https://www.cnblogs.com/flashhu/p/9480669.html)\n\n\u535a\u5ba2\u98df\u7528\uff08\u9605\u8bfb\u4f53\u9a8c\uff09\uff1a[eternal\u98ce\u5ea6\u7684\u571f\u5730\u5f81\u7528](https://www.cnblogs.com/cjoierljl/p/9693156.html)\n\n## \u524d\u671f\u5904\u7406\u53ca\u4e00\u4e9b\u5c0f\u6027\u8d28\n\u6211\u4eec\u8fd9\u91cc\u76f4\u63a5\u628a\u571f\u5730\u7406\u89e3\u6210\u4e00\u4e9b\u77e9\u5f62\uff0c\u663e\u7136\u5982\u679c\u4e00\u4e2a\u5927\u77e9\u5f62\u53ef\u4ee5\u628a\u53e6\u4e00\u4e2a\u5c0f\u77e9\u5f62\u5305\u542b\u4f4f\uff0c\u90a3\u4e2a\u5c0f\u77e9\u5f62\u80af\u5b9a\u4f1a\u88ab\u5e76\u8d2d\u6389\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0d\u8003\u8651\uff0c\u5c31\u53bb\u6389\n\n\u53ef\u4ee5\u5728$O(nlogn)$\u7684\u590d\u6742\u5ea6\u5185\u89e3\u51b3\u6389\uff1a\n\n\u6309\u9ad8\u5ea6\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u5982\u679c\u5f53\u524d\u7684\u5bbd\u5ea6\u6bd4\u4e4b\u524d\u6700\u5bbd\u7684\u5bbd\u5ea6\u8981\u5c0f\uff0c\u663e\u7136\u4e0d\u8981\uff1b\u5982\u679c\u8981\u5927\uff0c\u5c31\u52a0\u8fdb\u9700\u8981\u8003\u8651\u7684\u77e9\u5f62\u6570\u7ec4\u91cc\uff0c\u987a\u4fbf\u66f4\u65b0\u5bbd\u5ea6\u6700\u5927\u503c\n```\n    int L=1;\n    for(int i=1;i<=n;++i)\n        if(ljl[L].w<ljl[i].w)ljl[++L]=ljl[i];//ljl\u662f\u5b9a\u4e49\u7684\u77e9\u5f62\u7684\u7ed3\u6784\u4f53\u3002\u3002\u3002\n    n=L;\n```\n\n\u73b0\u5728\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u9ad8\u5ea6\u5355\u8c03\u9012\u51cf\uff0c\u5bbd\u5ea6\u5355\u8c03\u9012\u589e\u7684\u77e9\u5f62\u5e8f\u5217\u5bf9\u5427\n\n\u90a3\u4e48\u662f\u4e0d\u662f\u5f88\u5bb9\u6613\u53d1\u73b0\u4e00\u5b9a\u662f\u628a\u4e00\u6bb5\u4e0b\u6807\u8fde\u7eed\u7684\u77e9\u5f62\u5e76\u8d2d\u66f4\u4f18\n\n\u7b80\u5355\u8bc1\u660e\u4e00\u4e0b\uff1a\u5982\u679c\u5e76\u8d2d\u4e0d\u8fde\u7eed\uff0c\u90a3\u4e48\u4e2d\u95f4\u90a3\u4e2a\u65ad\u5f00\u7684\u9ad8\u5ea6\u4e00\u5b9a\u5c0f\u4e8e\u524d\u4e00\u6bb5\uff0c\u5bbd\u5ea6\u4e00\u5b9a\u5c0f\u4e8e\u540e\u4e00\u6bb5\uff0c\u628a\u5b83\u5e76\u8d2d\u5230\u8fd9\u4e00\u6bb5\u4e0d\u8fde\u7eed\u7684\u91cc\u9762\u4e0d\u4f1a\u4ea7\u751f\u8d39\u7528\uff0c\u6240\u4ee5\u8fd9\u79cd\u51b3\u7b56\u4e0d\u4f1a\u66f4\u5dee\uff0c\u53ea\u4f1a\u66f4\u4f18\u3002\u3002\u3002\n\n## $dp$\u90e8\u5206\n\u6709\u524d\u9762\u7684\u90a3\u4e2a\u7b80\u5355\u6027\u8d28\uff0c\u53ef\u4ee5\u8003\u8651$dp$\u4e86\n\n\u8bbe$dp[i]$\u8868\u793a\u4e70\u5b8c\u524di\u5757\u77e9\u5f62\u7684\u6700\u5c0f\u8d39\u7528\n\n\u663e\u7136\u6709$dp$\u65b9\u7a0b\uff1a$dp[i]=min_{j=2}^i${$dp[j-1]+h[j]*w[i]$}\n\n\u8868\u793a\u6211\u4eec\u628a\u533a\u95f4$[i,j]$\u4e0a\u7684\u77e9\u5f62\u5e76\u8d2d\u4e86\n## \u659c\u7387\u4f18\u5316\n### \u7531\u6765\n\u76f4\u63a5\u505a\u80af\u5b9a\u662f$O(n^2)$\u7684\u590d\u6742\u5ea6\n\n\u6240\u4ee5\u8003\u8651\u4f18\u5316\n\n\u90a3\u4e48\u5047\u8bbe\u6211\u4eec\u6709$j$\u548c$k$\u4e24\u4e2a\u53ef\u80fd\u7684\u8f6c\u79fb\u72b6\u6001\uff0c\u4e0d\u59a8\u8bbe$j>k$\n\n\u90a3\u4e48\u5047\u8bbe\u51b3\u7b56$j$\u6bd4\u51b3\u7b56$k$\u66f4\u4f18\uff0c\u6211\u4eec\u770b\u8981\u6ee1\u8db3\u4ec0\u4e48\u6761\u4ef6\n\n$dp[j-1]+h[j]*w[i]<=dp[k-1]+h[k]*w[k]$\n\n\u5408\u5e76\u540c\u7c7b\u9879\u5316\u7b80\u4e4b\u540e\u4f1a\u5f97\u5230\n\n$\\frac{dp[j-1]-dp[k-1]}{h[j]-h[k]}=>w[i]$\n\n\u55ef\uff1f\u8fd9\u4e2a\u5f0f\u5b50\u600e\u4e48\u8fd9\u4e48\u773c\u719f\uff1f\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u53eb\u4ed6\u659c\u7387\u4f18\u5316\n### \u5b9e\u73b0\n\u662f\u4e0d\u662f\u53ea\u8981\u6ee1\u8db3\u4e0a\u9762\u90a3\u4e2a\u5f0f\u5b50\uff0c\u51b3\u7b56$j$\u5c31\u4e00\u5b9a\u4f18\u4e8e\u51b3\u7b56$k$\n\n\u90a3\u4e48\u6211\u4eec\u628a$(h[j],dp[j-1])$\u770b\u505a\u4e00\u4e2a\u70b9,\u90a3\u4e48\u4e0a\u9762\u5f0f\u5b50\u7684\u5de6\u8fb9\u53ef\u4ee5\u770b\u505a\u70b9$j$\u548c$k$\u7684\u659c\u7387(\u6211\u89c9\u5f97\u4f60\u4eec\u53ef\u4ee5\u518d\u770b\u4e00\u4e0b\u5176\u4ed6\u5927\u4f6c\u7684\u56fe)\n\n\u800c\u7531\u4e8e$w[i]$\u662f\u5355\u8c03\u4e0d\u964d\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u90a3\u4e2a\u659c\u7387\u8981\u6c42\u5355\u8c03\u9012\u589e\uff08\u76f8\u7b49\u7684\u8bdd\u51b3\u7b56\u7ed3\u679c\u4e00\u6837\u5c31\u4e0d\u8003\u8651\u4e86\uff09\uff0c\u5e76\u4e14\u5927\u4e8e\u7b49\u4e8e$w[i]$\u5bf9\u5427\n\n\u8fd9\u4e2a\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u6765\u7ef4\u62a4\n\n> \u5728\u961f\u5c3e\u6bcf\u6b21\u628a\u70b9$i$\u52a0\u5165\u5176\u4e2d\uff0c\u6761\u4ef6\u662f\u4e0e\u961f\u5c3e\u7684\u70b9\u659c\u7387\u5927\u4e8e\u961f\u5c3e\u4e0e\u961f\u5c3e-1\u7684\u70b9(\u7ef4\u62a4\u659c\u7387\u5355\u8c03\u9012\u589e)\n\n> \u5728\u961f\u9996\u6bcf\u6b21\u67e5\u8be2\uff0c\u6761\u4ef6\u662f\u961f\u9996\u7684\u659c\u7387\u6ee1\u8db3\u8981\u6c42\uff08\u5927\u4e8e$w[i]$(\u540c\u6837\u76f8\u7b49\u4e0d\u8003\u8651\u4e86)\uff09\n\n\u53ef\u80fd\u8bb2\u8d77\u6765\u8fd8\u5f88\u62bd\u8c61\uff0c\u501f\u52a9\u4ee3\u7801\u3002\u3002\u3002\n\n$calc$\u662f\u6309\u7167\u4e0a\u9762\u7684\u201c\u659c\u7387\u201d\u5b9a\u4e49\u6765\u6c42\u659c\u7387\u7684\u51fd\u6570\n\n$k[tl-1]$\u8868\u793a\u961f\u5217\u4e2d$Q[tl-1]$\u4e0e$Q[tl]$\u7684\u659c\u7387\n\n$ljl[i].w$\u5c31\u662f$w[i]$\u8fa3\u3002\u3002\u3002\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\u800c\u5df2\u3002\u3002\u3002\n```\n    int hd=1,tl=0;\n    for(int i=1;i<=n;++i)\n    {\n        while(hd<tl&&k[tl-1]>=calc(i,Q[tl]))--tl;\n        k[tl]=calc(i,Q[tl]),Q[++tl]=i;\n        while(hd<tl&&k[hd]<ljl[i].w)++hd;\n        dp[i]=dp[Q[hd]-1]+ljl[Q[hd]].h*ljl[i].w;\n    }\n```\n## \u6c47\u603b\n\u53ef\u80fd\u9700\u8981\u7ed3\u5408\u6574\u4e2a\u4ee3\u7801\u548c\u8fd9\u4e2a\u9898\u6765\u7406\u89e3\u3002\u3002\u3002\n\n**PS\uff1a\u5982\u679c\u8fd8\u6709\u4e0d\u61c2\u8bc4\u8bba\u533a\u7559\u8a00\u5427\u3002\u3002\u3002**\n```\n#include<bits/stdc++.h>\n#define lst long long\n#define ldb double\n#define N 50050\nusing namespace std;\nconst int Inf=1e9;\nint read()\n{\n    int s=0,m=0;char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch=='-')m=1;ch=getchar();}\n    while(ch>='0'&&ch<='9')s=(s<<3)+(s<<1)+(ch^48),ch=getchar();\n    return m?-s:s;\n}\n\nint n;\nldb k[N];\nint Q[N];\nlst dp[N];\nstruct Land{lst h,w;}ljl[N];\nbool cmp(const Land &a,const Land &b){return a.h==b.h?a.w>b.w:a.h>b.h;}\nldb calc(int x,int y){return (dp[x-1]-dp[y-1])/(ljl[y].h-ljl[x].h);}\nint main()\n{\n    n=read();\n    for(int i=1;i<=n;++i)\n        ljl[i]=(Land){read(),read()};\n    sort(ljl+1,ljl+n+1,cmp);\n    int L=1;\n    for(int i=1;i<=n;++i)\n        if(ljl[L].w<ljl[i].w)ljl[++L]=ljl[i];\n    n=L;int hd=1,tl=0;\n    for(int i=1;i<=n;++i)\n    {\n        while(hd<tl&&k[tl-1]>=calc(i,Q[tl]))--tl;\n        k[tl]=calc(i,Q[tl]),Q[++tl]=i;\n        while(hd<tl&&k[hd]<ljl[i].w)++hd;\n        dp[i]=dp[Q[hd]-1]+ljl[Q[hd]].h*ljl[i].w;\n    }printf(\"%lld\\n\",dp[n]);\n    return 0;\n}\n```\n\n\u63a8\u5e7f\u535a\u5ba2\uff1a[eternal\u98ce\u5ea6\u7684\u535a\u5ba2](https://www.cnblogs.com/cjoierljl/)\n",
        "postTime": 1537694537,
        "uid": 66596,
        "name": "eternal\u98ce\u5ea6",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "\u601d\u8def\uff1a\u659c\u7387\u4f18\u5316dp\u3002\n\n\u8fd9\u79cd\u9898\u4e00\u822c\u81ea\u5df1\u63a8\u4e00\u63a8\u6bd4\u8f83\u597d\uff1b\n\n\u7b80\u5355\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\n\n\u9996\u5148\uff1a\u5bf9\u4e8ex\u6392\u5e8f\uff0c\u53ef\u4ee5\u63d0\u51fa\u67d0\u4e9b\u88ab\u5305\u542b\u7684\u571f\u5730\u5757\uff08\u76f4\u63a5\u6253\u5305\u4e70\uff09\n\n\u7136\u540e\uff1a\u53ef\u4ee5\u53d1\u73b0dp\u601d\u8def\uff1af[i] = min(f[j]+b[j+1].y\\*b[i].x\n\n\u4f46\u662f\u53ef\u4ee5\u5f88\u5bb9\u6613\u53d1\u73b0\u65f6\u95f4\u4e0d\u591f\uff1b\n\n\u7ee7\u7eed\u53d1\u73b0\u53ef\u4ee5\u7528\u659c\u7387\u4f18\u5316\u8fdb\u884c\u4f18\u5316\uff1b\n\n\u5047\u8bbe\u4e00\u4e2ak < j \u4e14 j \u4f18\u4e8e k\uff1b\n\n\u5219f[j]+b[j+1].y\\*b[i].x < f[k] + b[k+1].y\\*b[i].x\uff1b\n\n\u5316\u7b80\u5f97\u5230 (f[j]-f[k])/(b[j+1].y - b[j+1].y) < a[i];\n\n\u6b64\u65f6\u659c\u7387\u4f18\u5316\u76f4\u63a5\u641e\u5c31\u5bf9\u4e86\uff01\n\n\u7528\u4e86\u53cc\u5934\u961f\u5217...\n\n\u535a\u5ba2\uff1a<http://tgotp.science>\n\nc++\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<queue>\nusing namespace std;\ndeque<int>s;\ntypedef long long ll;\ninline void read(ll&x)\n{\n    x = 0;int sign = 1;char c;\n    do{ c = getchar();if(c == '-')sign = -1; }\n    while(c < '0' || c >'9');\n    do{ x = x*10 + c - '0';c = getchar();}\n    while(c <= '9' && c >='0');\n    x *= sign;\n}\nconst int N = 5e4 + 5;\nint tot;\nll n,f[N];\nstruct data { ll x,y; }a[N],b[N];\ninline bool cmp(data a,data b){ return a.x == b.x?a.y<b.y:a.x<b.x; }\ninline double slop(int a,int c){ return double(f[c]-f[a])/(b[a+1].y - b[c+1].y); }\nint main()\n{\n    read(n);\n    for(int i = 1;i <= n;i++)read(a[i].x),read(a[i].y);\n    sort(a+1,a+n+1,cmp);\n    for(int i = 1;i <= n;i++)\n    {\n        while(tot && a[i].y >= b[tot].y) tot--;\n        b[++tot].x = a[i].x;b[tot].y = a[i].y;\n    }\n    s.push_back(0);\n    for(int i = 1;i <= tot;i++)\n    {\n        while(s.size() > 1 && slop(s[0],s[1]) < b[i].x) s.pop_front();\n        int t = s[0],j;\n        f[i] = f[t] + b[t + 1].y * b[i].x;\n        while((j = s.size()) > 1 && slop(s[j-1],i) < slop(s[j-2],s[j-1])) s.pop_back();\n        s.push_back(i); \n    }\n    printf(\"%lld\",f[tot]);\n    return 0;\n}\n```",
        "postTime": 1497095622,
        "uid": 23087,
        "name": "Tgotp",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "[link](https://www.luogu.com.cn/problem/P2900)\r\n\r\n\u7edd\u5927\u90e8\u5206\u9898\u89e3\u90fd\u662f\u7528\u7684\u659c\u7387\u4f18\u5316\uff0c\u81f3\u5c11\u7b2c\u4e00\u9875\u90fd\u7528\u7684\u662f\uff0c\u5269\u4e0b\u7684\u61d2\u5f97\u7ffb\u4e86\u3002\u4f46\u6211\u5e76\u4e0d\u60f3\u4f7f\u7528\u659c\u7387\u4f18\u5316\uff0c\u54ce\u5c31\u662f\u73a9\u2026\u2026\r\n\r\n\u90a3\u80fd\u7528\u4ec0\u4e48\uff0c\u4f3c\u4e4e\u53ea\u5269\u51b3\u7b56\u5355\u8c03\u6027\u4f18\u5316\u4e86\u3002\u9996\u5148\u8003\u8651\u5b83\u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u51b3\u7b56\u5355\u8c03\u6027\u4f18\u5316\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b83\u7684\u8f6c\u79fb\u65b9\u7a0b\u6ee1\u4e0d\u6ee1\u8db3\u90a3\u4e2a\u5947\u602a\u7684\u4e0d\u7b49\u5f0f\u3002\r\n\r\n\u548c\u5176\u5b83\u9898\u89e3\u4e00\u6837\uff0c\u53bb\u9664\u6389\u65e0\u7528\u571f\u5730\u4e4b\u540e\uff0c\u5047\u8bbe\u6211\u4eec\u5269\u4e0b\u7684\u8fd9\u4e9b\u571f\u5730\u6ee1\u8db3\u6bcf\u4e00\u5757\u571f\u5730\u90fd\u6bd4\u524d\u4e00\u5757\u957f\uff0c\u5374\u6bd4\u524d\u4e00\u5757\u7a84\u7684\u6027\u8d28(\u6362\u53e5\u8bdd\u8bf4\uff0c\u5047\u5982\u7528 a \u6570\u7ec4\u4ee3\u8868\u957f\u5ea6\uff0c b \u6570\u7ec4\u4ee3\u8868\u5bbd\u5ea6\u5219\u662f\uff1a\u524d\u8005\u5355\u8c03\u9012\u51cf\uff0c\u540e\u8005\u5355\u8c03\u9012\u589e)\u3002\u53ef\u4ee5\u5199\u51fa\u65b9\u7a0b\uff1a\r\n\r\n$$f_x=\\min\\limits_{i=0}^{x-1}{f_i+a_{i+1}\\times b_x}$$\r\n\r\n\u800c\u4e0a\u8ff0\u5f0f\u5b50\u662f\u7b26\u5408\u90a3\u4e2a\u5947\u602a\u4e0d\u7b49\u5f0f\u7684\uff0c\u539f\u56e0\u4e14\u542c\u6211\u5206\u6790\u4e00\u6ce2\uff0c\u5f53\u7136\u4f60\u8df3\u8fc7\u4e5f\u884c\u3002\u7531\u65b9\u7a0b\u53ef\u4ee5\u53d1\u73b0\uff1a\r\n\r\n$$w[i,j]=a_{i+1}\\times b_j$$\r\n\r\n\u90a3\u4e48\uff1a\r\n\r\n$$w[i,j+1]=a_{i+1}\\times b_{j+1}$$\r\n$$w[i,j+1]-w[i,j]=a_{i+1}\\times(b_{j+1}-b_j)$$\r\n\r\n\u540c\u7406\uff1a\r\n\r\n$$w[i+1,j+1]-w[i+1,j]=a_{i+2}\\times(b_{j+1}-b_j)$$\r\n\r\n\u6240\u4ee5\uff1a\r\n\r\n$$w[i+1,j+1]-w[i+1,j]-(w[i,j+1]-w[i,j])=(a_{i+2}-a_{i+1})\\times (b_{j+1}-b_j)$$\r\n\r\n\u7531\u4e8e a \u6570\u7ec4\u5355\u589e\uff0c\u6240\u4ee5\u7b2c\u4e00\u4e2a\u4e58\u6570\u662f\u6b63\u7684\uff1b\u56e0\u4e3a b \u6570\u7ec4\u5355\u51cf\uff0c\u6240\u4ee5\u7b2c\u4e8c\u4e2a\u4e58\u6570\u662f\u8d1f\u7684\u3002\u7efc\u4e0a\uff0c\u8fd9\u4e2a\u51cf\u6cd5\u7684\u7ed3\u679c\u662f\u8d1f\u7684\u3002\u6240\u4ee5\u6709\uff1a\r\n\r\n$$w[i+1,j+1]-w[i+1,j]-w[i,j+1]+w[i,j]<0$$\r\n$$w[i+1,j+1]+w[i,j]<w[i+1,j]+w[i,j+1]$$\r\n\r\n\u6211\u4eec\u5f00\u5fc3\u5730\u53d1\u73b0\u4e0a\u8ff0\u5f0f\u5b50\u5c31\u662f\u90a3\u4e2a\u53ef\u7231\u7684\u4e0d\u7b49\u5f0f\u3002\u5f97\u5230\u8fd9\u4e2a\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u51b3\u7b56\u5355\u8c03\u6027\u6765\u4f18\u5316\u5566\uff01\r\n\r\n\u4ee3\u7801\u548c[AC\u8bb0\u5f55](https://www.luogu.com.cn/record/69682389):\r\n\r\n```cpp\r\n#include<cstdio>\r\n#include<algorithm>\r\n#define zczc\r\n#define int long long\r\nusing namespace std;\r\nconst int N=50010;\r\ninline void read(int &wh){\r\n    wh=0;int f=1;char w=getchar();\r\n    while(w<'0'||w>'9'){if(w=='-')f=-1;w=getchar();}\r\n    while(w<='9'&&w>='0'){wh=wh*10+w-'0';w=getchar();}\r\n    wh*=f;return;\r\n}\r\ninline void swap(int &s1,int &s2){int s3=s1;s1=s2;s2=s3;return;}\r\ninline int max(int s1,int s2){return s1<s2?s2:s1;}\r\n\r\nint m;\r\nstruct node{int a,b;}a[N];\r\ninline bool cmp(node s1,node s2){return s1.a==s2.a?s1.b>s2.b:s1.a>s2.a;}\r\nbool operator <(node s1,node s2){return s1.a<=s2.a&&s1.b<=s2.b;}\r\n\r\nstruct no{int id,l;}st[N];\r\nint top,f[N];\r\nint cost(int x,int y){return f[x]+a[y].a*a[x+1].b;}\r\nint workf(int x){\r\n\tint l=1,r=top,mid;\r\n\twhile(l<r)st[mid=l+r+1>>1].l<=x?l=mid:r=mid-1;\r\n\treturn st[l].id;\r\n}\r\n\r\nsigned main(){\r\n\t\r\n\t#ifdef zczc\r\n\tfreopen(\"in.txt\",\"r\",stdin);\r\n\t#endif\r\n\t\r\n\tread(m);\r\n\tfor(int i=1;i<=m;i++){read(a[i].a);read(a[i].b);}\r\n\tsort(a+1,a+m+1,cmp);int h=0;\r\n\tfor(int i=1;i<=m;i++){if(i&&a[i]<a[h])continue;a[++h]=a[i];}\r\n\tm=h;for(int i=1;i<=m;i++)swap(a[i].a,a[i].b);\r\n\tst[++top]=(no){0,1};\r\n\tfor(int i=1;i<=m;i++){\r\n\t\tf[i]=cost(workf(i),i);\r\n\t\twhile(top&&cost(st[top].id,st[top].l)>=cost(i,st[top].l))top--;\r\n\t\tif(top==0){st[++top]=(no){i,i+1};continue;}\r\n\t\tint l=max(i+1,st[top].l),r=m,mid;\r\n\t\twhile(l<r)cost(st[top].id,mid=l+r>>1)>=cost(i,mid)?r=mid:l=mid+1;\r\n\t\tif(cost(st[top].id,l)>=cost(i,l))st[++top]=(no){i,l};\r\n\t}\r\n\tprintf(\"%lld\\n\",f[m]);\r\n\t\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1645264440,
        "uid": 302383,
        "name": "Feyn",
        "ccfLevel": 0,
        "title": "P2900\u9898\u89e3"
    },
    {
        "content": "\u5148\u8003\u8651\u666e\u901adp\uff0c$f_i$\u8868\u793a\u8d2d\u4e70\u5230\u7b2c$i$\u5757\u571f\u5730\u7684\u6700\u5c0f\u82b1\u8d39\n\n$mw(i,j)$\u8868\u793a$i\\sim j$\u571f\u5730\u4e2d\u5bbd\u5ea6\u7684\u6700\u5927\u503c\uff0c$ml(i,j)$\u8868\u793a$i\\sim j$\u571f\u5730\u4e2d\u9ad8\u5ea6\u7684\u6700\u5927\u503c\n\n**\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a$f_i = min_{j \\in [0, i)}\\{f_j+ml(j + 1, i) * mw(j +1, i)\\}$**\n\n**\u65b9\u7a0b\u89e3\u91ca\uff1a** \u5148\u5c06$j$\u4e4b\u524d\u7684\u4e70\u5b8c\uff0c\u518d\u5c06$[j+1, i]$\u5408\u5e76\u4e3a\u4e00\u7ec4\u4e70\n\n\u5bf9\u4e8e\u4e24\u4e2a\u571f\u5730$i,j$\uff0c\u82e5$w_i\\geq w_j \\bigwedge l_i \\geq l_j$\uff0c$i,j$\u53ef\u540c\u4e00\u7ec4\u8d2d\u4e70\u4e14\u4e0d\u5f71\u54cd\u6700\u4f18\u89e3\uff0c\u6545\u60f3\u5230\uff1a\n\n\u5c06\u571f\u5730\u6309$l_i$\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u518d\u4f7f$w_i$\u4ece\u5c0f\u5230\u5927\uff0c\u4fdd\u8bc1\u4e00\u5b9a\u4e0d\u4f1a\u51fa\u73b0\u571f\u5730\u76f8\u4e92\u5305\u542b\n\n**\u90e8\u5206\u4ee3\u7801\uff1a**\n```cpp\n//\u4e3a\u4e86\u65b9\u4fbf\u6392\u5e8f\uff0c\u4f7f\u7528\u7ed3\u6784\u4f53\nstruct S\n{\n\tll w, l;\n\tS(ll w = 0, ll l = 0) : w(w), l(l) {}\n\tbool operator < (const S &t) const\t\n\t{\n\t\tif (l == t.l)\n\t\t\treturn w > t.w;\n\t\treturn l > t.l;\n\t}\n}s[N], s1[N];\n//\u6392\u5e8f\nsort(s + 1, s + n + 1);\nint n1 = 0;\nfor (int i = 1; i <= n; ++i)\n\tif (s[i].w > s1[n1].w)\n\t\ts1[++n1] = s[i];\n```\n\n\u6b64\u65f6\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u53d8\u4e3a$f_i = min_{j \\in [0, i)}\\{f_j+l_{j+1}w_{i}\\}$\n\n**\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n^2)$**\uff0c\u4e0d\u8db3\u4ee5\u89e3\u51b3\u9898\u76ee\n\n\u4e8e\u662f\u60f3\u5982\u4f55\u4f18\u5316\uff0c\u56e0\u4e3a\u51fa\u73b0$l_{j+1}w_{i}$\u9879\uff0c\u5f88\u81ea\u7136\u60f3\u5230\u659c\u7387\u4f18\u5316\n\n**\u51b3\u7b56\u5355\u8c03\u6027\u8bc1\u660e\uff1a**\n\n$s(i,j) = l_{j+1}w_{i},\\;s(i,j + 1) = l_{j+2}w_{i}$\n\n$s(i + 1,j) = l_{j+1}w_{i + 1},\\;s(i + 1,j + 1) = l_{j+2}w_{i + 1}$\n\n\n$s(i + 1, j) + s(i, j + 1) - s(i, j) - s(i + 1, j + 1) $\n\n$=l_{j+1}w_{i + 1}+l_{j+2}w_{i} - l_{j+1}w_{i} - l_{j+2}w_{i + 1}$\n\n$=(w_{i+1} - w_i)(l_{j+1}-l_{j+2}) \\geq 0$\n\n$\\therefore s(i,j)$\u6ee1\u8db3\u56db\u8fb9\u5f62\u4e0d\u7b49\u5f0f\n\n$\\therefore\\;$\u5177\u6709\u51b3\u7b56\u5355\u8c03\u6027\n\n**\u4f18\u5316\uff1a**\n\n\u8bbe$j1, j2$\u4e3a$i$\u7684\u51b3\u7b56\u70b9\uff0c$j2$\u4f18\u4e8e$j1$\uff0c$0\\leq j1 < j2 < i $\n\n\u5219$f_{j2} + l_{j2 + 1}w_i \\leq f_{j1} + l_{j1 + 1}w_i$\n\n\u79fb\u9879\u5f97$w_i(l_{j2 + 1} - l_{j1 + 1}) \\leq f_{j1} - f_{j2} $\n\n$\\Rightarrow -w_i \\leq \\frac{f_{j1} - f_{j2}}{l_{j1 + 1} - l_{j2 + 1}}$\n\n\u7ef4\u62a4\u4e0a\u51f8\u5305\uff08\u659c\u7387\u9012\u51cf\uff09\n\n**\u6b65\u9aa4\uff1a**\n\n1. \u5355\u8c03\u961f\u5217\u7ef4\u62a4\u51f8\u5305\uff0c\u56e0\u4e3a\u5177\u6709\u51b3\u7b56\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e0d\u7528\u4e8c\u5206\n\n1. \u6bcf\u6b21\u68c0\u67e5\u961f\u5934\uff0c\u82e5\u961f\u9996\u5143\u7d20\u6ca1\u6709\u7b2c\u4e8c\u4e2a\u5143\u7d20\u4f18\uff0c$pop$\n\n1. \u66f4\u65b0$f_i$\n\n1. \u5411\u51f8\u5305\u4e2d\u63d2\u5165$f_i$\uff0c\u5728\u6b64\u4e4b\u524d\u7ef4\u62a4\u4e0a\u51f8\u5305\u6027\u8d28\n\n**\u4ee3\u7801\uff1a**\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef long long ll;\ntypedef long double ld;\nconst int N = 5e4 + 5;\n\nstruct S\n{\n\tll w, l;\n\tS(ll w = 0, ll l = 0) : w(w), l(l) {}\n\tbool operator < (const S &t) const\t\n\t{\n\t\tif (l == t.l)\n\t\t\treturn w > t.w;\n\t\treturn l > t.l;\n\t}\n}s[N], s1[N];\n\nint n, head = 1, tail = 0, q[N];\nll f[N];\n\ninline ld slope(int p1, int p2)\n{\t\n\treturn (f[p2] - f[p1]) * 1.0 / (s1[p2 + 1].l - s1[p1 + 1].l) * 1.0;\n}\n\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin >> n;\n\tfor (int i = 1; i <= n; ++i)\n\t\tcin >> s[i].w >> s[i].l;\n\tsort(s + 1, s + n + 1);\n\tint n1 = 0;\n\tfor (int i = 1; i <= n; ++i)\n\t\tif (s[i].w > s1[n1].w)\n\t\t\ts1[++n1] = s[i];\n\tq[++tail] = 0;\n\tfor (int i = 1; i <= n1; ++i)\n\t{\n\t\twhile (head < tail && slope(q[head], q[head + 1]) >= -s1[i].w)\n\t\t\t++head;\n\t\tf[i] = f[q[head]] + s1[i].w * s1[q[head] + 1].l;\n\t\twhile (head < tail && slope(q[tail - 1], q[tail]) <= slope(q[tail], i))\n\t\t\t--tail;\n\t\tq[++tail] = i;\n\t}\n\tcout << f[n1] << endl;\n\treturn 0;\n}\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "postTime": 1574523408,
        "uid": 78625,
        "name": "pengrui",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "\u4e00\u9053\u88f8\u7684\u659c\u7387\u4f18\u5316dp\n\n\u9996\u5148\u5bf9\u4e8ei,j\uff0c\u82e5\u5b58\u5728a[i].len(\u4ee5\u4e0b\u7b80\u5199\u4e3al[i])>=a[j].len&&a[i].wid(\u4ee5\u4e0b\u7b80\u5199\u4e3aw[i])>=a[j].wid,\u5219j\u8fd9\u5757\u571f\u5730\u662f\u65e0\u7528\u7684\uff0c\u5728\u9884\u5904\u7406\u65f6\u5e94\u53bb\u6389\u8fd9\u4e9b\u65e0\u7528\u7684\u571f\u5730\u3002\u540c\u65f6\u5728\u9884\u5904\u7406\u65f6\u53ef\u4ee5\u5c06\u6570\u636e\u6309l\u964d\u5e8f\u6392\u5217\uff0c\u540c\u65f6\u4ea7\u751f\u7684\u7ed3\u679c\u662fw\u5fc5\u7136\u6309\u5347\u5e8f\u6392\u5217\uff08\u6709\u5174\u8da3\u7684dalao\u53ef\u4ee5\u81ea\u5df1\u8bc1\u660e\uff09\uff0c\u8fd9\u6837\u53ef\u65b9\u4fbf\u540e\u9762\u7684\u8fc7\u7a0b\u3002\n\n\u7136\u540e\u5c31\u662f\u5bf9\u7740\u6570\u636e\u624b\u63a8\u72b6\u8f6c\u65b9\u7a0b\u4e86\uff08\u5efa\u8bae\u5148\u81ea\u5df1\u63a8\u4e00\u904d\uff09\uff0c\u53ef\u77e5\u5047\u8bbe\u7528f[i]\u8868\u793a\u524di\u5757\u571f\u5730\u7684\u6700\u5c0f\u4ef7\u503c\uff0c\u5219\u6709**f[i]=min{f[j]+l[j+1]w[i]}**\u3002\n\n\u7136\u540e\u5bf9\u6570\u636e\u5316\u7b80\u53ef\u77e5\u5047\u8bbej\u6bd4k\u4f18\uff0c\u5219\u6709**f[j]+l[j+1]w[i]<f[k]+l[k+1]w[i]**,\u7136\u540e\u5c31\u53ef\u4ee5\u5f97\u5230**(f[k]-f[j])/(l[j+1]-l[k+1])>w[i]**\n\n\u63a5\u7740\u5c31\u662f\u4e00\u4e2a\u6570\u5f62\u7ed3\u5408\u7684\u601d\u60f3\u4e86\n\n    \u4e00\u4e9b\u8bd5\u9898\u4e2d\u7e41\u6742\u7684\u4ee3\u6570\u5173\u7cfb\u8eab\u540e\u5f80\u5f80\u9690\u85cf\u7740\u4e30\u5bcc\u7684\u51e0\u4f55\u80cc\u666f\uff0c\u800c\u501f\u52a9\u80cc\u666f\u56fe\u5f62\u7684\u6027\u8d28\uff0c\u53ef\u4ee5\u4f7f\u90a3\u4e9b\u539f\u672c\u590d\u6742\u7684\u6570\u91cf\u5173\u7cfb\u548c\u62bd\u8c61\u7684\u6982\u5ff5\uff0c\u663e\u5f97\u76f4\u89c2\uff0c\u4ece\u800c\u627e\u5230\u8bbe\u8ba1\u7b97\u6cd5\u7684\u6377\u5f84\u3002\u2014\u2014\u5468\u6e90\n    \n\u6709\u5174\u8da3\u7684dalao\u53ef\u4ee5\u9605\u8bfb[\u6d45\u8c08\u6570\u5f62\u7ed3\u5408\u601d\u60f3\u5728\u4fe1\u606f\u5b66\u7ade\u8d5b\u4e2d\u7684\u5e94\u7528](https://wenku.baidu.com/view/b97cd22d0066f5335a8121a3.html)\n\n\u603b\u4e4b\u8fd9\u91cc\u5c06\u5173\u7cfb\u5f0f\u62bd\u8c61\u4e3a\u5f62\u5982y=kx+b\u7684\u5f0f\u5b50\uff0c\u53ea\u8981\u7ef4\u62a4\u7ec4\u6210\u56fe\u5f62\u7684\u4e0b\u51f8\u6027\u5c31\u884c\u4e86\uff0c\u5982\u4e0b\u56fe\u4e2d\u5c31\u662f\u4e00\u79cd\u8981\u5f39\u51fa\u961f\u5c3e\u7684\u60c5\u51b5\uff0c\u56e0\u4e3ai\u8282\u70b9\u7684\u63d2\u5165\u7834\u574f\u4e86\u56fe\u5f62\u7684\u4e0b\u51f8\u6027\n![](http://img.blog.csdn.net/20170122191654269?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvQmlsbF9ZYW5nXzIwMTY=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n\u8fd9\u91cc\u5c31\u8981\u7528\u5230\u5355\u8c03\u961f\u5217\u4e86\uff0c\u7ef4\u62a4\u961f\u5217\u4e2d\u7684\u5143\u7d20\u5355\u8c03\uff08\u7136\u800c\u6211\u4e0d\u4f1a\uff0c\u6240\u4ee5\u8bf7\u5404\u4f4d\u61c2\u7684\u5927\u795e\u6307\u70b9\n\n\u4e0d\u591a\u8bf4\u89c1\u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\n#pragma GCC optimize(3)\n#define N 50010\nusing namespace std;\nlong long n,tot,q[N],head=1,tail=1,f[N];\nstruct node\n{\n    long long len,wid;\n};struct node a[N];\nstruct node1\n{\n    long long lent,wide;\n};struct node1 b[N];\nbool mmp(node xx,node yy)\n{\n    return xx.len>yy.len||(xx.len==yy.len&&xx.wid>yy.wid);\n}\ndouble slope(int x,int y)\n{\n    return (double)(f[y]-f[x])/(double)(b[x+1].lent-b[y+1].lent);\n}//slope \u659c\u7387\uff0c\u6765\u81ea\u91d1\u5c71\u8bcd\u9738\nint main()\n{\n    scanf(\"%lld\",&n);\n    for(int i=1;i<=n;i++)\n        scanf(\"%lld%lld\",&a[i].len,&a[i].wid);\n    sort(a+1,a+1+n,mmp);\n    for(int i=1;i<=n;i++)\n        if(a[i].wid>b[tot].wide)//\u6ce8\u610f\uff01\u4e00\u5b9a\u8981\u8fd9\u6837\u7ef4\u62a4b\u4e2dw\u7684\u5347\u5e8f\u6392\u5217\n        {\n            b[++tot].lent=a[i].len;\n            b[tot].wide=a[i].wid;\n        }\n    for(int i=1;i<=tot;i++)//1~tot\u52a8\u89c4\n    {\n        while(head<tail&&slope(q[head],q[head+1])<=b[i].wide)\n            head++;//\u5982\u679c\u961f\u9996\u4e0d\u662f\u6700\u4f18\uff0c\u5c31\u5f39\u51fa\u961f\u9996\n        f[i]=f[q[head]]+b[i].wide*b[q[head]+1].lent;\n        while(head<tail&&slope(q[tail-1],q[tail])>=slope(q[tail],i))\n            tail--;//\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u5305\n        q[++tail]=i;//\u8fdb\u961f\n    }\n    printf(\"%lld\\n\",f[tot]);//\u8fd9\u91cc\u4e5f\u8981\u7528tot\n    return 0;\n}\n```\n\u53ef\u80fd\u6ca1\u89e3\u91ca\u6e05\u695a\uff08\u6211\u81ea\u5df1\u4e5f\u662f\u6709\u70b9\u8499\n\n\u671b\u5404\u4f4ddalao\u8c05\u89e3QWQ\n\n[\u6ce8] \u56fe\u7247\u3001\u5f15\u6587\u6765\u6e90[[\u6a21\u677f] \u659c\u7387\u4f18\u5316Dp\u8be6\u89e3](http://blog.csdn.net/bill_yang_2016/article/details/54864284)",
        "postTime": 1518362357,
        "uid": 55454,
        "name": "DimensionTripper",
        "ccfLevel": 0,
        "title": "[P2900]\u571f\u5730\u5f81\u7528 \u659c\u7387\u4f18\u5316dp \u9898\u89e3"
    },
    {
        "content": "## \u9898\u9762\u63cf\u8ff0\n[\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/P2900)\n## \u601d\u8def\n## \u778e\u626f\n\n\u4e4d\u4e00\u770b\uff0c\u8c8c\u4f3c\u627e\u4e0d\u5230\u4ec0\u4e48\u6709\u5e8f\u7684\u4e1c\u897f\u3002\n\n\u5148\u6392\u5e8f\u5427(\u7b2c\u4e00\u5173\u952e\u5b57\u4e3a$x$\u5750\u6807\uff0c\u7b2c\u4e8c\u5173\u952e\u5b57\u4e3a$y$\u5750\u6807\uff0c\u90fd\u4ee5\u4ece\u5c0f\u5230\u5927\u6392\u5e8f)\u3002\n\n\u7c7b\u4f3c\u4e0b\u56fe\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20190701143314753.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3p5c3psYjIwMDM=,size_16,color_FFFFFF,t_70)\n\n\u53d1\u73b0\u76f8\u90bb\u7684\u4e24\u5757\u571f\u5730(\u6392\u5e8f\u540e)$i,i+1$,\u5982\u679c$y_i<y_{i+1}$\uff0c\u90a3\u4e48\u4e70\u7b2c$i+1$\u5757\u571f\u5730\uff0c\u987a\u4fbf\u53ef\u4ee5\u5e26\u4e0a\u7b2c$i$\u5757\u571f\u5730(~~**\u5c82\u4e0d\u7f8e\u54c9\uff01**\uff0c\u4e70\u4e00\u9001\u4e00\u554a\uff01~~)\uff0c\n\n\u6309\u7167\u8fd9\u6837\u7684\u601d\u60f3\uff0c~~\u6211\u4eec\u53ef\u4ee5\u4e70\u4e00\u9001~~$n$\u554a\u3002\n\n\u4e4b\u540e\u53bb\u6389\u9001\u7684\u571f\u5730\uff0c\u4fdd\u7559\u6709\u7528\u7684(\u81f3\u4e8e\u5982\u4f55\u6709\u7528\uff0c\u8be6\u89c1\u4e0a\u6587)\u571f\u5730\u3002\n\n\u5982\u4e0b\u56fe\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://cdn.luogu.com.cn/upload/pic/61983.png)\n\n\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5~~\u6109\u5feb\u5730~~\u63a8\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5566\uff01\n\n\u8bbe\u79bb\u6563\u5316\u4e4b\u540e\u7684\u6570\u7ec4\u4e3a$b$(\u4fdd\u8bc1$x$\u5750\u6807\u4e0d\u4e0b\u964d)\n\n$$F_i=\\min(F_j+y_{b_{j+1}}*x_{b_i})$$\n\n$y_{b_{j+1}}$\u4fdd\u8bc1\u662f$b_{[j+1,i]}$\u540e\u6700\u5927\u7684\u7eb5\u5750\u6807\u54e6\uff0c\u56e0\u4e3a\u540e\u9762\u5982\u679c\u6709\u6bd4\u5b83\u5927\u7684\u7eb5\u5750\u6807\uff0c$b_{j+1}$\u6839\u672c\u4e0d\u5b58\u5728\u4e8e\u6570\u7ec4\u4e2d\u3002\n\n## \u8bc1\u660e\u51b3\u7b56\u5355\u8c03\u6027\n\n\u8bbe\u6709\n$$F_k+y_{b_{k+1}}*x_{b_i}\\le F_j+y_{b_{j+1}}*x_{b_i}\n(j<k<i)$$\n\n\u8bc1\u660e:\u5bf9\u4e8e\u672a\u6765\u72b6\u6001$t$,\u90fd\u6709\n\n$$F_k+y_{b_{k+1}}*x_{b_t}\\le F_j+y_{b_{j+1}}*x_{b_t}(j<k<i<t)$$\n\n\u7531\u4e8e$x_{b_t},y_{b_{k+1}},y_{b_{j+1}}$\u4e0d\u53d8\uff0c\u8bc1\u6bd5\u3002\n\n~~\u8fd9\u6015\u4e0d\u662f\u4e0d\u7528\u8bc1\u660e~~\n\n## \u8e22\u961f\u5934\n$$F_k+y_{b_{k+1}}*x_{b_i}\\le F_j+y_{b_{j+1}}*x_{b_i}\n(j<k<i)$$\n\n$$F_j-F_k\\ge y_{b_{k+1}}*x_{b_i}-y_{b_{j+1}}*x_{b_i}$$\n\n\u7531$y_{b_{k+1}}\\le y_{b_{j+1}}$\u53ef\u77e5\uff0c\n\n$$\\frac{F_j-F_k}{y_{b_{k+1}}-y_{b_{j+1}}}\\le x_{b_i}$$\n\n\u56e0\u6b64\uff0c\u5f53\u4e0a\u8ff0\u4e0d\u7b49\u5f0f\u6210\u7acb\u65f6\uff0c$k$\u4f18\u4e8e$j$\u3002\n\n\u5982\u679c\n$$calc(q_{head},q_{tail})=\\frac{F_{head}-F_{head+1}}{y_{b_{head+1}}-y_{b_{head}}}\\le x_{b_{i}}$$\n\n\u8bf4\u660e$head+1$\u4f18\u4e8e$head$\u3002\n\n## \u8e22\u961f\u5c3e\n\u6211\u4eec\u9996\u5148\u4e00\u5b9a\u8981\u786e\u5b9a$i$\u8fd9\u4e2a\u72b6\u6001\uff0c\u8981\u4f18\u4e8e$q_{tail}$\n\n\u8981\u7ef4\u62a4\u7684\u961f\u5217\u7531\u4e8e$q_{tail-1}$\u4e00\u5b9a\u4f18\u4e8e$q_{tail}$\n\n\u73b0\u6709\u4e00\u4e2a\u6807\u51c6\u503c$x_{b_t}(tail<t)$\n\n$calc(q_{tail-1},q_{tail)}\\ge x_{b_t}$\n\n\u5982\u679c$q_{tail}$\u8981\u4f18\u4e8e$i$\uff0c\n\n\u5219$calc(q_{tail},i)\\ge calc(q_{tail-1},q_{tail})$\n\n\u624d\u80fd\u786e\u4fdd$q_{tail}$\u4f18\u4e8e$i$\n\n\u53cd\u4e4b\uff0c\u5f53$calc(q_{tail},i)\\le calc(q_{tail-1},q_{tail})$\u65f6\uff0c\u9700\u8981\u5220\u53bb\u961f\u5c3e\u3002\n\u8c8c\u4f3c\u5c31\u6ca1\u4e86\u54e6\u3002\n\n## AC code\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cstdlib>\n#include<cmath>\n#define gc getchar()\n#define ll long long \nusing namespace std;\nconst int N=5e4+10;\ninline void qr(ll &x)\n{\n\tx=0;int f=1;char c=gc;\n\twhile(c<'0'||c>'9')c=gc;\n\twhile(c>='0'&&c<='9'){x=x*10+(c^48);c=gc;}\n\tx*=f;\n}\nvoid qw(ll x)\n{\n\tif(x/10)qw(x/10);\n\tputchar(x%10+48);\n}\nstruct node\n{\n\tll x,y;\n}a[N];\nbool cmp(node a,node b){return a.x==b.x?a.y<b.y:a.x<b.x;}\nll f[N];int b[N],q[N],l,r;\ninline double calc(int j,int k){return (f[j]-f[k])/(double)(a[b[k+1]].y-a[b[j+1]].y);}\nint main()\n{\n\tint n;scanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)qr(a[i].x),qr(a[i].y);\n\tsort(a+1,a+n+1,cmp);\n\tint tot=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\twhile(tot&&a[b[tot]].y<=a[i].y)--tot;\n\t\tb[++tot]=i;\n\t}\n\tl=1;r=1;q[1]=0;\n\tfor(int i=1;i<=tot;i++)\n\t{\n\t\twhile(l<r&&calc(q[l],q[l+1])<=1.0*a[b[i]].x)++l;\n\t\tf[i]=f[q[l]]+a[b[i]].x*a[b[q[l]+1]].y;\n\t\twhile(l<r&&calc(q[r],i)<=calc(q[r-1],q[r]))--r;\n\t\tq[++r]=i;\n\t}\n\tqw(f[tot]);puts(\"\");\n\treturn 0;\n}\n```",
        "postTime": 1561969036,
        "uid": 106232,
        "name": "_Sein",
        "ccfLevel": 0,
        "title": "[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition"
    },
    {
        "content": "### \u9898\u76ee\u94fe\u63a5\n[[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition](https://www.luogu.org/problemnew/show/P2900)\n### \u9898\u76ee\u5927\u610f\n\u6bcf\u6b21\u9009\u4e00\u4e2a\u77e9\u9635\u96c6\u5408\uff0c\u4ee3\u4ef7\u4e3a\u6700\u5927\u7684$x\\times y$\uff0c\u6c42\u53d6\u5b8c\u6240\u6709\u77e9\u9635\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n### \u9898\u76ee\u601d\u8def\n\u9996\u5148\u6ce8\u610f\u5230\u5982\u679c\u6709\u4e00\u4e2a\u77e9\u9635$i$\u548c\u4e00\u4e2a\u77e9\u9635$j$\uff0c\u6ee1\u8db3$x[i]\\leq x[j]$\u5e76\u4e14$y[i]\\leq y[j]$\uff0c\u90a3\u4e48$i$\u8fd9\u4e2a\u77e9\u9635\u4e00\u5b9a\u4f1a\u548c$j$\u4e00\u8d77\u88ab\u9009\uff0c\u4e14$i$\u4e0d\u4f1a\u5bf9\u7b54\u6848\u6709\u8d21\u732e\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5220\u53bb\u3002  \n\n\u5220\u5b8c\u540e\u5c31\u53ea\u5269\u4e0b\u4e86\u4e00\u4e9b\u77e9\u9635\uff0c\u4e14\u6309$x$\u4e0d\u964d\u5e8f\u6392\u5e8f\u4e00\u5b9a\u4f1a\u6ee1\u8db3$y$\u5355\u8c03\u4e0d\u5347\u3002\u90a3\u4e48\u6211\u4eec\u73b0\u5728\u9009\u77e9\u9635\u4e00\u5b9a\u662f\u4e00\u6bb5\u8fde\u7eed\u7684\u533a\u95f4\uff0c\u56e0\u4e3a~~\u610f\u4f1a\u4e00\u4e0b~~\u5982\u679c\u9009\u4e86$i$\u548c$j$\uff0c\u4e14$i<j$\uff0c\u90a3\u4e48$\\forall k\\in(i,j)$\u90fd\u6709$x[k]\\leq x[j]$\u4e14$y[k]\\leq y[i]$\uff0c\u90a3\u4e48\u5728\u8fd9\u65f6\u5019\u4e00\u8d77\u9009\u4e86\u4e0d\u4f1a\u66f4\u5dee\u3002  \n\n\u6240\u4ee5\u53ef\u4ee5\u8bbe$dp[i]$\u8868\u793a\u9009\u5b8c\u524d$i$\u4e2a\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n$$dp[i]=min(dp[j]+x[j+1]\\times y[i]),j\\in[0,1)$$\n\n\u8fd9\u662f\u4e00\u4e2a$O(n^2)$\u7684\u8f6c\u79fb\uff0c~~\u7136\u540e\u6211\u5c31\u5f53\u66b4\u529b\u4ea4\u4e86\u4e00\u53d1\uff0c\u7136\u540e\u83b7\u5f97\u4e8690\u5206\u7684\u597d\u6210\u7ee9\u3002\u3002\u3002~~\u663e\u7136\u9700\u8981\u4f18\u5316\u3002  \n\u6ce8\u610f\u5230$min$\u91cc\u9762\u662f\u4e00\u4e2a$dp[j]$\u8fd8\u6709\u4e00\u4e2a\u548c$i$\uff0c$j$\u90fd\u76f8\u5173\u7684\u91cf\uff0c\u81ea\u7136\u60f3\u5230\u659c\u7387\u4f18\u5316\u3002  \n\u56e0\u4e3a$x[i]$\u5355\u8c03\u589e\uff0c$y[i]$\u5355\u8c03\u51cf\uff0c\u6240\u4ee5\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u3002  \n\u5f53\u51b3\u7b56$j$\u4f18\u4e8e\u51b3\u7b56$k$\u65f6\uff0c\u5219\n$$dp[j]+x[j+1]\\times y[i]\\leq dp[k]+x[k+1]\\times y[i]$$\n$$\\frac{dp[j]-dp[k]}{-x[j+1]+x[k+1]}\\leq y[i]$$\n\u8bbe$Y(i)=dp[i],X(i)=-x[i+1],Slope(i,j)=1.0*(Y(i)-Y(j))/(X(i)-X(j))$  \n\u7136\u540e\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u961f\u5934\u961f\u5c3e\uff0c\u7136\u540e\u3002\u3002\u3002\u5c31\u6ca1\u7136\u540e\u4e86\u3002  \n\n\u66b4\u529b\u4ee3\u7801\uff1a\uff08$90$\u5206\uff09\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=100010;\ninline ll read();\ninline void write(ll x);\ninline void writeln(ll x);\n\nint n,cnt=0;\nll dp[N];\nstruct aa{\n\tll x,y;\n} field[N],work[N];\ninline bool operator<(const aa &a,const aa &b)\n{\n\tif(a.x!=b.x) return a.x<b.x;\n\treturn a.y<b.y;\n}\n\ninline ll read()\n{\n\tll s=0;\n\tbool flag=false;\n\tchar ch=getchar();\n\tfor(;ch<'0'||ch>'9';ch=getchar()) if(ch=='-') flag=true;\n\tfor(;'0'<=ch&&ch<='9';ch=getchar()) s=(s<<3)+(s<<1)+(ch^48);\n\tif(flag) return -s;\n\treturn s;\n}\ninline void write(ll x)\n{\n\tif(!x)\n\t{\n\t\tputchar('0'),putchar(' ');\n\t\treturn ;\n\t}\n\tif(x<0) putchar('-'),x=-x;\n\tchar ch[20];\n\tint tot=0;\n\twhile(x) ch[++tot]=x%10,x/=10;\n\tfor(int i=tot;i;i--) putchar(ch[i]^48);\n\tputchar(' ');\n}\ninline void writeln(ll x)\n{\n\twrite(x);\n\tputchar('\\n');\n}\n\nint main()\n{\n\tn=read();\n\tfor(int i=1;i<=n;i++) field[i].x=read(),field[i].y=read();\n\tsort(field+1,field+n+1);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\twhile(cnt&&field[i].y>=work[cnt].y) cnt--;\n\t\twork[++cnt]=field[i];\n\t}\n\tn=cnt;\n\tmemset(dp,0x3f,sizeof(dp));\n\tdp[0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=i;j++)\n\t\t{\n       \t\tdp[i]=min(dp[i],dp[j-1]+work[i].x*work[j].y);\n\t\t}\n\t}\n\twriteln(dp[n]);\n\treturn 0;\n}\n```\n\n$100$\u5206\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=100010;\ninline ll read();\ninline void write(ll x);\ninline void writeln(ll x);\n\nint n,cnt=0;\nint q[N],head=1,tail=0;\nll dp[N];\nstruct aa{\n\tll x,y;\n} field[N],work[N];\ninline bool operator<(const aa &a,const aa &b)\n{\n\tif(a.x!=b.x) return a.x<b.x;\n\treturn a.y<b.y;\n}\n#define Y(i) (dp[(i)])\n#define X(i) (-work[(i)+1].y)\n#define Slope(i,j) 1.0*(Y(i)-Y(j))/(X(i)-X(j))\n#define calc(i,j) (dp[(j)]+work[i].x*work[j+1].y)\n\ninline ll read()\n{\n\tll s=0;\n\tbool flag=false;\n\tchar ch=getchar();\n\tfor(;ch<'0'||ch>'9';ch=getchar()) if(ch=='-') flag=true;\n\tfor(;'0'<=ch&&ch<='9';ch=getchar()) s=(s<<3)+(s<<1)+(ch^48);\n\tif(flag) return -s;\n\treturn s;\n}\ninline void write(ll x)\n{\n\tif(!x)\n\t{\n\t\tputchar('0'),putchar(' ');\n\t\treturn ;\n\t}\n\tif(x<0) putchar('-'),x=-x;\n\tchar ch[20];\n\tint tot=0;\n\twhile(x) ch[++tot]=x%10,x/=10;\n\tfor(int i=tot;i;i--) putchar(ch[i]^48);\n\tputchar(' ');\n}\ninline void writeln(ll x)\n{\n\twrite(x);\n\tputchar('\\n');\n}\n\nint main()\n{\n\tn=read();\n\tfor(int i=1;i<=n;i++) field[i].x=read(),field[i].y=read();\n\tsort(field+1,field+n+1);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\twhile(cnt&&field[i].y>=work[cnt].y) cnt--;\n\t\twork[++cnt]=field[i];\n\t}\n\tn=cnt;\n\tmemset(dp,0x3f,sizeof(dp));\n\tdp[0]=0;\n\tq[++tail]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(;head<tail&&Slope(q[head],q[head+1])<=work[i].x;head++);\n\t\tdp[i]=calc(i,q[head]);\n\t\tfor(;head<tail&&Slope(q[tail-1],q[tail])>=Slope(q[tail],i);tail--);\n\t\tq[++tail]=i;\n\t}\n\twriteln(dp[n]);\n\treturn 0;\n}\n```\n",
        "postTime": 1551444949,
        "uid": 54728,
        "name": "wangxuye",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "\u4e00\u9053\u659c\u7387\u4f18\u5316\u7684\u4e0a\u624b\u9898\n\n\u9996\u5148\u89c2\u5bdf\uff1a\u5e76\u8d2d\u4e00\u5806\u571f\u5730\u7684\u4ef7\u683c\u4e3a\u6700\u5927\u7684\u957f\u4e58\u4ee5\u6700\u5927\u7684\u5bbd\uff0c\u8fd9\u4e00\u70b9\u5728\u6697\u793a\uff08~~\u660e\u793a~~\uff09\u6211\u4eec\u6392\u5e8f\uff0c\u5982\u4f55\u6392\u5e8f\u5462\uff1f\u5bf9\u4e8e\u8fd9\u9053\u9898\u6765\u8bf4\u6700\u7b80\u5355\u7684\u6392\u5e8f\u65b9\u5f0f\u5c31\u662f\u76f4\u63a5\u6309\u7167\u957f\u6216\u5bbd\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\n\n\u53ef\u4ee5\u60f3\u5230\uff0c\u5982\u679c\u6211\u4eec\u9009\u62e9\u4e86\u4e24\u5757\u571f\u5730x\u548cy\u4ee5\u53ca\u4e2d\u95f4\u7684\u4e00\u5806\u571f\u5730\u4f5c\u4e3a\u4e00\u7ec4\u540c\u65f6\u8d2d\u4e70\uff0c\u5e76\u4e14x\u7684\u957f\u662f\u8fd9\u91cc\u9762\u6700\u5927\u7684\uff0cy\u7684\u5bbd\u662f\u8fd9\u91cc\u9762\u6700\u5927\u7684\uff0c\u90a3\u6211\u4eec\u9700\u8981\u4ed8\u51fa\u7684\u5c31\u662fx\u7684\u957f\u4e58\u4ee5y\u7684\u5bbd\u7684\u603b\u4ee3\u4ef7\uff0c\u800c\u8fd9\u91cc\u9762\u5176\u5b83\u7684\u6240\u6709\u571f\u5730\u90fd\u88ab\u767d\u5ad6\u4e86\u3002\n\n\u77e5\u9053\u4e86\u8fd9\u4e00\u70b9\u4e4b\u540e\uff0c\u601d\u8def\u5c31\u5f88\u663e\u7136\u4e86\uff0c\u5047\u8bbe\u6211\u4eec\u9009\u62e9\u4e86\u6309\u7167\u5bbd\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u7136\u540e\u6211\u4eec\u7528\u4e00\u4e2a\u5355\u8c03\u961f\u5217\u5904\u7406\u6392\u597d\u5e8f\u4e4b\u540e\u7684\u6570\u7ec4\uff0c\u4ece\u6392\u597d\u5e8f\u7684\u6570\u7ec4\u91cc\u9762\u7b5b\u51fa\u4e00\u4e2a\u957f\u4ece\u5927\u5230\u5c0f\u7684\u5e8f\u5217\uff0c\u5c06\u4ed6\u4eec\u5b58\u5165\u4e00\u4e2a\u6570\u7ec4\u4e2d\u51c6\u5907DP\uff0c\u5047\u8bbe\u8be5\u6570\u7ec4\u540d\u4e3a$needto$\uff0c\u800c\u90a3\u4e9b\u4e0d\u9075\u5b88\u5355\u8c03\u6027\u7684\u571f\u5730\u90fd\u4e0d\u7528\u7ba1\u4e86\uff0c\u56e0\u4e3a\u4ed6\u4eec\u90fd\u53ef\u4ee5\u88ab\u767d\u5ad6\u3002\n\u63a5\u4e0b\u6765\u4f60\u5c31\u53ef\u4ee5\u5199\u51fa\u4e00\u4e2a\u66b4\u529bDP\n\n```cpp\nfor (int i = 1; i <= cnt;i++)\n\tfor (int j = 0; j < i;j++)\n\t\tdp[i] = min(dp[i], dp[j] + needto[j + 1].l * needto[i].w);\n```\n\u5176\u4e2d$dp[i]$\u4ee3\u8868\u4e70\u524d$i$\u5757\u571f\u5730\u9700\u8981\u7528\u7684\u6700\u5c0f\u7684\u4ef7\u94b1\u3002\u800c\u72b6\u6001\u7684\u8f6c\u79fb\u5c31\u662f\u679a\u4e3e\u4e0a\u4e00\u7ec4\u4e70\u7684\u571f\u5730\u4e2d\u7684\u6700\u540e\u4e00\u5757\u571f\u5730\uff0c\u5047\u8bbe\u4e3a\u7b2c$j$\u5757\uff0c\u53c8\u5047\u8bbe\u6211\u4eec\u8fd9\u4e00\u6b21\u8981\u4e70\u7684\u4e00\u7ec4\u571f\u5730\u7684\u6700\u540e\u4e00\u5757\u662f\u7b2c$i$\u5757\uff0c\u90a3\u4e48\u6211\u4eec\u8fd9\u4e00\u6b21\u8981\u4e70\u7684\u4e00\u7ec4\u571f\u5730\u5305\u62ec\u4e86\u7b2c$j+1$\u5757\u5230\u7b2c$i$\u5757\u4e2d\u7684\u6240\u6709\u571f\u5730\uff0c\u800c\u7531\u4e8e$needto$\u662f\u4ece\u6309\u7167\u5bbd\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u7684\u6570\u7ec4\u4e2d\u6839\u636e\u957f\u5355\u8c03\u9012\u51cf\u800c\u7b5b\u51fa\u6765\u7684\u6570\u7ec4\uff0c\u90a3\u4e48\u7b2c$j+1$\u5757\u571f\u5730\u7684\u957f\u5c31\u662f\u8fd9\u4e00\u7ec4\u571f\u5730\u4e2d\u6700\u5927\u7684\uff0c\u7b2c$i$\u5757\u7684\u571f\u5730\u7684\u5bbd\u5c31\u662f\u6700\u5927\u7684\uff0c\u6240\u4ee5\u8fd9\u4e00\u7ec4\u571f\u5730\u7684\u82b1\u8d39\u5c31\u662f$needto[j + 1].l * needto[i].w$\uff0c\u800c$dp[i]$\u7684\u6700\u5c0f\u503c\u5c31\u662f\u6700\u5c0f\u7684$dp[j]+needto[j + 1].l * needto[i].w$\uff0c\u5c31\u5f97\u5230\u4e86\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u3002\n\n\u77e5\u9053\u4e86\u8fd9\u4e00\u70b9\u4e4b\u540e\uff0c\u540e\u9762\u7684\u659c\u7387\u4f18\u5316\u5c31\u5f88\u8f7b\u677e\u4e86\uff0c\u4ee5\u4e0b\u662f\u672c\u849f\u84bb\u7684\u4ee3\u7801\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e6 + 5;\nstruct Node{\n\tll w, l;\n}Land[N];\nll dp[N];\nNode needto[N];\nll q[N];\nbool cmp(Node a,Node b)\n{\n\tif(a.w!=b.w)\n\t\treturn a.w < b.w;\n\telse\n\t\treturn a.l < b.l;\n}\nint main()\n{\n\tll n;\n\tscanf(\"%lld\", &n);\n\tfor (int i = 1; i <= n;i++)\n\t\tscanf(\"%lld%lld\", &Land[i].w, &Land[i].l);\n\tsort(Land + 1, Land + n + 1, cmp);\n\tint cnt = 0;\n\tfor (int i = 1; i <= n;i++)\n\t{\n\t\twhile(cnt>0&&Land[i].l>needto[cnt].l)\n\t\t\tcnt--;\n\t\tneedto[++cnt] = Land[i];\n\t}\n\tfor (int i = 1; i <= n;i++)\n\t\tdp[i] = 0x7fffffffffffffff;\n\tdp[0] = 0;\n\tint head = 0;\n\tint tail = 0;\n\tfor (int i = 1; i <= cnt;i++)\n\t{\n\t\t// for (int j = 0; j < i;j++)\n\t\t// \tdp[i] = min(dp[i], dp[j] + needto[j + 1].l * needto[i].w);\n\t\twhile(head<tail&&(dp[q[head]]-dp[q[head+1]]>=(-needto[i].w)*(needto[q[head]+1].l-needto[q[head+1]+1].l)))//\u522b\u5fd8\u4e86\u8fd9\u91cc\u9762\u659c\u7387\u524d\u9762\u90a3\u4e2a\u8d1f\u53f7\uff0c\u8fd9\u662f\u7531\u4e8e\u4f60\u5c06\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u79fb\u9879\u4e4b\u540e\u659c\u7387\u4f1a\u662f\u8d1f\u503c\uff0c\u8fd9\u4e2a\u8d1f\u53f7\u4ee5\u53ca\u5927\u4e8e\u5c0f\u4e8e\u641e\u4e86\u6211\u5f88\u4e45\n\t\t\thead++;\n\t\tint j = q[head];\n\t\tdp[i] = dp[j] + needto[i].w * needto[j + 1].l;\n\t\twhile(head<tail&&((dp[q[tail]]-dp[q[tail-1]])*(needto[i+1].l-needto[q[tail-1]+1].l)<=(dp[i]-dp[q[tail-1]])*(needto[q[tail]+1].l-needto[q[tail-1]+1].l)))\n\t\t\ttail--;\n\t\tq[++tail] = i;\n\t}\n\tprintf(\"%lld\\n\", dp[cnt]);\n}\n```\n",
        "postTime": 1609052415,
        "uid": 278481,
        "name": "Link_Space",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]Land Acquisition G\u3011"
    },
    {
        "content": "[\u6d1b\u8c37\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2900)\n\n### Solution\n\n\u53d1\u73b0\u5bf9\u4e8e\u4e00\u5757\u571f\u5730 $x$ \u548c $y$ \uff0c\u5982\u679c $l_y\\geq l_x,h_y\\geq h_x$ \uff0c\u90a3\u4e48\u628a $x$ \u548c $y$ \u5408\u5728\u4e00\u7ec4\u5bf9\u7b54\u6848\u662f\u4e0d\u4f1a\u66f4\u52a3\u7684\u3002\n\n\u5c06\u571f\u5730\u6309\u7167\u957f\u5ea6\u548c\u5bbd\u5ea6\u6392\u5e8f\uff0c\u7ef4\u62a4\u4e00\u4e2a\u6808\uff0c\u5c06\u6709\u5fc5\u8981\u5b58\u5728\u7684\u571f\u5730\u7559\u4e0b\u3002\n\n\u5728\u6700\u4f18\u51b3\u7b56\u4e0b\uff0c\u6bcf\u4e00\u7ec4\u571f\u5730\u90fd\u662f\u8fde\u7eed\u7684\u3002\u56e0\u4e3a\u5982\u679c\u6709 $x,y,z$ \u4e09\u5757\u8fde\u7eed\u571f\u5730\uff0c\u5e76\u4e14 $l_x<l_y<l_z,h_x>h_y>h_z$ \uff0c\u628a $x$ \u548c $z$ \u4e00\u7ec4\uff0c $y$ \u81ea\u5df1\u4e00\u7ec4\uff0c\u82b1\u8d39\u4e3a $h_x\\cdot l_z+h_y\\cdot l_y$ \uff0c\u4e09\u4e2a\u4e00\u7ec4\u82b1\u8d39\u662f $h_x\\cdot l_z$ \uff0c\u663e\u7136\u66f4\u4f18\u3002\n\n\u8003\u8651DP\u3002\u8bbe $f_i$ \u8868\u793a\u524d $i$ \u4e2a\u571f\u5730\u7684\u6700\u5c0f\u8d39\u7528\uff0c\u6613\u5f97\uff1a $f_i=\\min\\{f_i,f_{j}+h_{j+1}\\cdot l_{i}\\}$ \uff0c\u4f46\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2)$ \uff0c\u8fc7\u4e0d\u53bb\uff0c\u8003\u8651\u4f18\u5316\u3002\n\n\u7528\u659c\u7387\u4f18\u5316\u3002\u8bbe $k=h_{j+1},b=f_j$ \uff0c\u90a3\u4e48\u76f4\u7ebf\u4e3a $y=kx+b$ \uff0c\u90a3\u4e48\u4e4b\u524d\u7684\u8f6c\u79fb\u65b9\u7a0b\u5c31\u76f8\u5f53\u4e8e\u6c42 $x=l_i$ \u65f6\u7684 $y_{min}$ \n\n### Code\n\n```c++\n#include<cmath>\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<algorithm>\n#define int long long\n\nusing namespace std;\nconst int N=5e4+10;\nint n,a[N],b[N],f[N],q[N],hd,tl,stk[N],top;\nstruct node{\n    int a,b;\n    bool operator < (const node &x) {\n        return a==x.a?b<x.b:a<x.a;\n    }\n}p[N];\n\ninline int slope(int p,int t){\n    return f[p]+a[t]*b[p+1];\n}\n\ninline bool cross(int t1,int t2,int i){\n    return 1ll*(f[t1]-f[t2])*(b[i+1]-b[t1+1])<1ll*(f[i]-f[t1])*(b[t1+1]-b[t2+1]);\n}\n\nsigned main(){\n    scanf(\"%lld\",&n);\n    for(int i=1;i<=n;i++) scanf(\"%lld%lld\",&p[i].a,&p[i].b);\n    sort(p+1,p+n+1);\n    stk[++top]=1;\n    for(int i=2;i<=n;i++){\n        while(top&&p[i].b>=p[stk[top]].b) --top;\n        stk[++top]=i;\n    }\n    n=top;\n    for(int i=1;i<=n;i++) a[i]=p[stk[i]].a,b[i]=p[stk[i]].b;\n    hd=tl=0;\n    for(int i=1;i<=n;i++){\n        while(hd<=tl&&slope(q[hd],i)>slope(q[hd+1],i)) ++hd;\n        f[i]=f[q[hd]]+a[i]*b[q[hd]+1];\n        while(hd<=tl&&cross(q[tl],q[tl-1],i)) --tl;\n        q[++tl]=i;\n    }\n    printf(\"%lld\\n\",f[n]);\n    return 0;\n}\n```\n\n",
        "postTime": 1604474443,
        "uid": 272143,
        "name": "\u662f\u4e2a\u6c49\u5b50",
        "ccfLevel": 4,
        "title": "P2900 [USACO08MAR]Land Acquisition G"
    },
    {
        "content": "# [HH_Halo](https://www.cnblogs.com/hhhhalo/p/13512988.html)\n## \u601d\u8def\u5206\u6790\n* \u663e\u7136\u5982\u679c\u76f4\u63a5\u6309\u539f\u5e8f\u5217\u4e0b\u624b\u4f1a\u5f88\u68d8\u624b\uff0c\u6240\u4ee5\u6211\u4eec\u9996\u5148\u8981\u5c06\u5e8f\u5217\u6392\u597d\u5e8f\n  * \u4e3a\u4e86\u65b9\u4fbf\u5408\u5e76\uff0c\u6240\u4ee5\u6211\u4eec\u4ee5\u957f\u4e3a\u5173\u952e\u5b57\u8fdb\u884c\u6392\u5e8f\uff0c\u8fd9\u65f6\u5019\u597d\u50cf\u8fd8\u662f\u6709\u70b9\u65e0\u4ece\u4e0b\u624b\uff0c\u6240\u4ee5\u5c1d\u8bd5\u627e\u4e00\u4e9b\u6027\u8d28\n  * \u4e0d\u96be\u60f3\u5230\uff0c\u5982\u679c\u4e00\u5757\u571f\u5730\u7684\u957f\u548c\u5bbd\u5747\u5c0f\u4e8e\u67d0\u4e00\u5757\u571f\u5730\uff0c\u90a3\u8fd9\u5757\u571f\u5730\u5176\u5b9e\u662f\u4e0d\u4f1a\u5bf9\u7b54\u6848\u4ea7\u751f\u4efb\u4f55\u5f71\u54cd\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u6392\u597d\u5e8f\u4ee5\u540e\u53ef\u4ee5\u5c06\u5176\u53bb\u9664\uff0c\u800c\u53ea\u7559\u4e0b\u5408\u5e76\u65f6\u4f1a\u6539\u53d8\u957f\u5bbd\u7684\n  * \u5728\u8fdb\u884c\u5b8c\u7684\u6392\u5e8f\u548c\u53bb\u9664\u64cd\u4f5c\u4ee5\u540e\uff0c\u8fd9\u65f6\u5019\u7684\u5e8f\u5217\u4e00\u5b9a\u6ee1\u8db3\u8fd9\u6837\u7684\u6027\u8d28:**\u957f\u662f\u9012\u51cf\u7684\uff0c\u800c\u5bbd\u662f\u9012\u589e\u7684**(\u81ea\u5df1\u6a21\u62df\u4e00\u4e0b\u5c31\u597d)\n* \u90a3\u4e48\u6b64\u65f6\uff0c\u5bf9\u4e8e\u4e00\u6bb5\u533a\u95f4\uff0c\u6211\u4eec\u53ea\u9700\u8981\u53d6\u4e24\u7aef\u5373\u53ef\uff0c\u56e0\u4e3a\u4e00\u4e2a\u957f\u6700\u5927\uff0c\u4e00\u4e2a\u5bbd\u6700\u5927\uff0c\u533a\u95f4\u5185\u7684\u81ea\u7136\u5c31\u4e00\u8d77\u5408\u5e76\u4e86\n  * \u7531\u6b64\u5f97\u51fa\u8f6c\u79fb\u65b9\u7a0b: $f[i] = min(f[i],f[j-1]+x_j*y_i)$  $(0<j<i)$($x$ \u4e3a\u957f\uff0c$y$ \u4e3a\u5bbd)\n  * \u53d8\u4e00\u4e0b\u578b\u5c31\u662f $f[j-1]=f[i]-y_i*x_j$\uff0c\u8fd9\u6837\u5c31\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u53ef\u4ee5\u8fdb\u884c\u659c\u7387\u4f18\u5316\u7684\u5f0f\u5b50\u4e86\uff0c\u659c\u7387\u4e3a $y_i$\n\n## $Code$\n```c++\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#define N 50010\nusing namespace std;\ninline int read(){\n\tint x = 0,f = 1;\n\tchar ch = getchar();\n\twhile(ch>'9'||ch<'0'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=(x<<1)+(x<<3)+(ch^48);ch=getchar();}\n\treturn x*f;\n}\nint n,q[N];\nlong long f[N];\nstruct farm{\n\tint x,y;\n}a[N];\ninline bool cmp(farm a,farm b){\n\treturn a.x==b.x ? a.y>b.y : a.x>b.x;\n}\ndouble slope(int x,int y){\n\treturn (double)(f[x]-f[y])/(double)(a[y+1].x-a[x+1].x);\n}\nint main(){\n\tn = read();\n\tfor(int i = 1;i <= n;i++){\n\t\ta[i].x = read(),a[i].y = read();\n\t}\n\tsort(a+1,a+1+n,cmp);\n\tint tot = 0;\n\tfor(int i = 1;i <= n;i++)if(a[i].y>a[tot].y)a[++tot] = a[i]; //\u53bb\u9664\u64cd\u4f5c\n\tn = tot;\n\tint head = 0,tail = 0;\n\tfor(int i = 1;i <= n;i++){ //\u6309\u8f6c\u79fb\u65b9\u7a0b\u76f4\u63a5\u4e0a\u659c\u7387\u4f18\u5316\u5373\u53ef\n\t\twhile(head<tail&&slope(q[head],q[head+1])<=a[i].y)head++;\n\t\tf[i] = f[q[head]]+1ll*a[q[head]+1].x*a[i].y;\n\t\twhile(head<tail&&slope(q[tail-1],q[tail])>=slope(q[tail],i))tail--;\n\t\tq[++tail] = i;\n\t}\n\tprintf(\"%lld\",f[n]);\n\treturn 0;\n}\n```",
        "postTime": 1597566834,
        "uid": 322491,
        "name": "HH_Halo",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]Land Acquisition G\u3011"
    },
    {
        "content": "~~\u53bb\u5e74qbxt\u7559\u7684\u6f0f\u6d1e\u5230\u4e86ZR\u7f51\u8bfe\u7ed3\u675f\u624d\u8865/kk~~\n\n\u5207\u5165\u6b63\u9898\u3002\n\n\u672c\u9898\u7684\u9898\u76ee\u5927\u610f\uff1a\u7ed9\u5b9a $n$ \u4e2a\u4e8c\u5143\u7ec4 $x_1,y_1\\space x_2,y_2\\space......\\space x_n,y_n$ \uff0c\u6bcf\u6b21\u53ef\u4ee5\u9009\u62e9\u591a\u7ec4\u8fdb\u884c\u6d88\u9664\uff0c\u82b1\u8d39\u4e3a\u8fd9\u51e0\u7ec4\u91cc\u7684 $max\\space x_i\\times max\\space y_i$\uff0c\u6c42\u6d88\u9664\u6240\u6709\u4e8c\u5143\u7ec4\u7684\u6700\u5c0f\u82b1\u8d39\u3002\n\n------\n\n\u663e\u7136\u662f\u4e2a $dp$ \uff0c\u5148\u6316\u6398\u4e00\u4e0b\u9898\u76ee\u6027\u8d28\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u4e8c\u5143\u7ec4\uff0c\u5982\u679c\u5b83 $(x_i,y_i)$ \u53ef\u4ee5\u88ab\u67d0\u4e00\u4e2a\u4e8c\u5143\u7ec4 $x_j,y_j$ \u8986\u76d6\u6389\uff0c\u90a3\u4e48\u5b83\u5bf9\u7b54\u6848\u4e0d\u4f1a\u4ea7\u751f\u5f71\u54cd\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u53bb\u6389\u3002\n\n\u663e\u7136\u8fd9\u4e2a\u662f\u4e00\u904d $sort$ \u5c31\u80fd\u89e3\u51b3\u7684\u3002\n\n\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u5c31\u628a\u8fd9\u4e9b\u4e8c\u5143\u7ec4\u5f04\u6210\u4e86\u4e00\u4e2a**\u957f\u9012\u51cf\uff0c\u5bbd\u9012\u589e**\u7684\u5e8f\u5217\u7684\u5f62\u5f0f\uff0c\u8bbe $dp[i]$ \u8868\u793a\u6d88\u9664\u6389\u524d $i$ \u4e2a\u4e8c\u5143\u7ec4\u7684\u6700\u5c0f\u4ef7\u503c\uff08\u6392\u5e8f\u540e\uff09\uff0c\u53ef\u4ee5\u8bc1\u660e\uff0c\u5728\u8fd9\u79cd\u8d2d\u4e70\u65b9\u5f0f\u4e0b\u6211\u4eec\u4e70\u7684\u571f\u5730\u4e00\u5b9a\u90fd\u662f\u8fde\u7eed\u7684\uff0c\u5982\u679c\u4e0d\u8fde\u7eed\u7684\u8bdd\uff0c\u5219\u603b\u4f1a\u6709\u4e00\u5757\u66f4\u5927\u7684\u628a\u4e4b\u524d\u4e0d\u8fde\u7eed\u7684\u5305\u8fdb\u53bb\uff0c\u8fd9\u663e\u7136\u4ea7\u751f\u4e86\u989d\u5916\u7684\u82b1\u8d39\u3002\n\n\u4e8e\u662f\u53ef\u4ee5\u5f88\u5feb\u5199\u51fa\u4e00\u4e2a $dp$ \u65b9\u7a0b\uff1a\n\n$$dp[i]=min_{j<i}\\{\\space dp[j]\\space\\}+x[j+1]\\times y[i]$$\n\n\u8fd9\u6837\u5199\u662f\u56e0\u4e3a\u6211\u4eec\u7684\u6392\u5e8f\u662f**\u957f\u9012\u51cf\uff0c\u5bbd\u9012\u589e**\uff0c $y$ \u662f\u9012\u589e\u7684\uff0c\u53ef\u4ee5\u8986\u76d6\u5230\u524d\u9762\u6240\u6709\u7684\u571f\u5730\uff0c $x$ \u662f\u9012\u51cf\u7684\uff0c\u53ef\u4ee5\u8986\u76d6\u5230\u540e\u9762\u6240\u6709\u7684\u571f\u5730\u3002\n\n\u8fd9\u4e2a $dp$ \u663e\u7136\u6700\u574f\u662f $O(n^2)$ \u7684\uff0c\u5bf9\u4e8e $n\\le5\\times10^4$ \u7684\u6570\u636e\u89c4\u6a21\u663e\u5f97\u96be\u4ee5\u901a\u8fc7\uff0c\u901a\u8fc7\u4e4b\u524d\u7684\u6392\u5e8f\uff0c\u6211\u4eec\u53d1\u73b0\u571f\u5730\u88ab\u6211\u4eec\u6392\u6210\u4e86\u4e00\u4e2a\u975e\u5e38\u7f8e\u89c2\u7684\u5f62\u72b6\uff0c~~\u597d\u50cf\u662f\u4e2a\u51f8\u5305~~\uff0c\u8003\u8651\u901a\u8fc7\u63a8\u67ff\u5b50\u6765\u7ee7\u7eed\u53d1\u73b0\u7a81\u7834\u53e3\uff1a\n\n$$dp[i]=dp[j]+x[i+1]\\times y[i]$$\n\n$$dp[j]=dp[i]-x[i+1]\\times y[i]$$\n\n$$dp[j]=-x[i+1]\\times y[i]+dp[i]$$\n\n\u8bbe $y=dp[j],k=y[i],x=-x[j+1],b=dp[i]$\n\n\u539f\u5f0f\u5373\u53ef\u5316\u4e3a\uff1a \n\n$$y=kx+b$$\n\n\u81f3\u6b64\uff0c\u901a\u8fc7\u659c\u7387\u4f18\u5316 $dp$ \u7684\u65b9\u6848\u5df2\u7ecf\u547c\u4e4b\u6b32\u51fa\u4e86\u3002\n\n\u6700\u5c0f\u5316\u622a\u8ddd\u5df2\u7ecf\u505a\u5b8c\u4e86\uff0c\u8fd9\u663e\u7136\u662f\u4e2a\u4e0b\u51f8\u5305\uff0c\u659c\u7387 $y[i]$ \u53c8\u662f\u9012\u589e\u7684\uff0c\u6240\u4ee5\u7ef4\u62a4\u5927\u4e8e\u5f53\u524d\u659c\u7387\u7684\u90e8\u5206\u5373\u53ef\u3002\n\n\u7ef4\u62a4\u659c\u7387\u8fd8\u8981\u8003\u8651\u7cbe\u5ea6\u95ee\u9898\uff0c\u6240\u4ee5\u8fd9\u8fb9\u5efa\u8bae\u4f7f\u7528 $long\\space double$\n \nAC \u4ee3\u7801\u5949\u4e0a\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int  N = 1e5 + 5;\ninline int read()\n{\n    int  x  = 0;\n    char ch = getchar();\n    while (ch < '0' || ch > '9')\n        ch = getchar();\n    while (ch <= '9' && ch >= '0')\n        x = x * 10 + ch - '0', ch = getchar();\n    return x;\n}\nint n, cnt;\nint q[N], dp[N];\nstruct Land\n{\n    int  x, y;\n    bool operator<(const Land& L) const\n    {\n        return x == L.x ? y > L.y : x > L.x;\n    }\n} l[N];\nint X(int x)  //\u67ff\u5b50\u4e2d\u7684x\n{\n    return -l[x + 1].x;\n}\nint Y(int x)  //\u67ff\u5b50\u4e2d\u7684y\n{\n    return dp[x];\n}\nlong double slope(int x, int y)  //\u6c42\u659c\u7387\n{\n    return (Y(y) - Y(x)) / (X(y) - X(x));\n}\nsigned main()\n{\n    n = read();\n    for (int i = 1; i <= n; i++)\n        l[i].x = read(), l[i].y = read();\n    sort(l + 1, l + n + 1);\n    for (int i = 1; i <= n; i++) {\n        if (l[i].y > l[cnt].y)\n            l[++cnt] = l[i];  //x\u9012\u51cf\uff0cy\u9012\u589e\n    }\n    /*\n    \u4ee4y\u4e3a\u659c\u7387\uff0c\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u5305\n    dp[i] = dp[j] + l[j + 1].x * l[i].y;\n    \u6ce8\u610f\u5230\u6b64\u5904x\u9012\u51cf\uff0cy\u9012\u589e\u5219\u659c\u7387\u9012\u589e\uff0c\u51b3\u7b56\u5177\u6709\u5355\u8c03\u6027\uff0c\u53ef\u4ee5O(n)\n    x\u9012\u51cf\uff0c\u90a3\u4e48x\u9650\u5b9a\u7684\u8303\u56f4\u662f\u4ecex\u5230\u540e\u9762\u7684l[i].x\n    \u6240\u4ee5\u5e94\u8be5\u679a\u4e3el[j].x\u6765\u9650\u5b9ax\u800c\u4e0d\u662fy\n    \u56e0\u4e3ay\u9012\u589e\uff0c\u6240\u4ee5\u4ed6\u9650\u5b9a\u524d\u9762\u7684y\n    \u7528\u961f\u5217\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u5305\u5373\u53ef\n    */\n    int head = 1, tail = 1;\n    q[head] = 0;\n    for (int i = 1; i <= cnt; i++) {\n        while (head < tail && slope(q[head], q[head + 1]) <= l[i].y)\n            head++;\n        dp[i] = dp[q[head]] + l[q[head] + 1].x * l[i].y;\n        while (head < tail && slope(q[tail - 1], q[tail]) >= slope(q[tail - 1], i))\n            tail--;\n        q[++tail] = i;\n    }\n    printf(\"%lld\\n\", dp[cnt]);\n    return 0;\n}\n```\n\u4ea4\u4e86\u597d\u51e0\u53d1\u90fd\u662f50pts\u624d\u53d1\u73b0\u662fprintf\u5199\u6210\u4e86%d\uff0czbl",
        "postTime": 1597296673,
        "uid": 180790,
        "name": "zhzzhzzzz",
        "ccfLevel": 3,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]Land Acquisition G\u3011"
    },
    {
        "content": "[my blog](https://www.cnblogs.com/suxxsfe/p/13155273.html)  \n\nhttps://www.luogu.com.cn/problem/P2900  \n$n$ \u5757\u5730\uff0c\u7ed9\u51fa\u6bcf\u5757\u7684\u957f\u548c\u5bbd  \n\u6bcf\u6b21\u53ef\u4ee5\u8d2d\u4e70\u4e00\u4e2a\u6216\u591a\u4e2a\u5730\uff0c\u6b64\u6b21\u8d2d\u4e70\u7684\u4ee3\u4ef7\u662f\u8fd9\u4e9b\u5730\u4e2d\u6700\u5927\u7684\u5bbd\u4e58\u4ee5\u6700\u5927\u7684\u957f  \n\u95ee\u6700\u5c0f\u82b1\u8d39\u591a\u5c11\u4ee3\u4ef7\u80fd\u628a\u6240\u6709\u5730\u90fd\u4e70\u5230  \n\n\u659c\u7387\u4f18\u5316dp  \n\n\u9996\u5148\u60f3\u5230\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u5730\u6bd4\u53e6\u4e00\u4e2a\u5730\u7684\u957f\u548c\u5bbd\u90fd\u8981\u5c0f\uff0c\u663e\u7136\u53ef\u4ee5\u4e0d\u8003\u8651\u8fd9\u5757\u5730\u4e86  \n\u5ffd\u7565\u8fd9\u79cd\u5730\u7684\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u6309 $l$ \u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c$w$ \u4e3a\u7b2c\u4e8c\u6765\u5347\u5e8f\u6392\u4e2a\u5e8f\uff0c\u7136\u540e\u7528\u6808\u7ef4\u62a4\u4e00\u4e0b\u5c31\u597d  \n\u662f\u8fd9\u6837\u4e00\u4e2a\u8fc7\u7a0b\uff1a  \n\n```cpp  \nstd::sort(a+1,a+1+n,cmp);\nfor(reg int i=1;i<=n;i++){\n\twhile(top&&b[top].w<=a[i].w&&b[top].l<=a[i].l) top--;\n\tb[++top]=(data){a[i].w,a[i].l};\n}\n```  \n\n\u8fd9\u6837\u5904\u7406\u5b8c\u4ee5\u540e\uff08\u6309\u7167\u5728 `b` \u6570\u7ec4\u91cc\u7684\u987a\u5e8f\u6765\u770b\uff09\uff0c$l$ \u662f\u5355\u8c03\u4e0d\u51cf\u7684  \n\u6240\u4ee5 $w$ \u5e94\u8be5\u662f\u5355\u8c03\u51cf\uff0c\u56e0\u4e3a\u5982\u679c\u5b83\u4e0d\u53d8\u6216\u8005\u9012\u589e\u7684\u8bdd\uff0c\u5c31\u4f1a\u88ab\u5f53\u4f5c\u4e0d\u7528\u5904\u7406\u7684\u5730\u6765\u5ffd\u7565\u6389  \n\n\u7136\u540e\u4e00\u6b21\u8d2d\u4e70\u7684\u591a\u5757\u5730\uff0c\u5728\u8fd9\u79cd\u6392\u5e8f\u65b9\u5f0f\u4e0b\uff0c\u4e00\u5b9a\u662f\u8fde\u7eed\u7684  \n\u5047\u8bbe\u8d2d\u4e70\u4e86 $x,x+2$ \u4e24\u5757\u5730\uff0c\u90a3\u4e48\u82b1\u8d39\u662f $w_x l_{x+2}$\uff0c\u7136\u540e\u53c8\u56e0\u4e3a $w_{x+1}<w_x,l_{x+1}\\le l_{x+2}$  \n\u6240\u4ee5\u5b8c\u5168\u53ef\u4ee5\u5728\u4e0d\u589e\u52a0\u4efb\u4f55\u4ee3\u4ef7\u7684\u60c5\u51b5\u4e0b\u5c06\u7b2c $x+1$ \u5757\u5730\u5305\u62ec\u8fdb\u53bb  \n\n\u90a3\u4e48\u53ef\u4ee5\u5199\u51fadp\u7684\u8f6c\u79fb\u65b9\u7a0b\u4e86 $f_i=\\min\\{f_j+w_{j+1} l_i\\}$  \n\u4f46\u8fd9\u6837\u662f $O(n^2)$ \u7684\uff0c\u8fd8\u9700\u8981\u4e2a\u659c\u7387\u4f18\u5316  \n\u9996\u5148\u53ef\u4ee5\u786e\u5b9a $b=f_i$\uff0c\u6bd4\u8f83\u4e60\u60ef\u6700\u5c0f\u5316\u622a\u8ddd\uff0c\u4e0d\u8fc7\u9898\u89e3\u533a\u91cc\u597d\u50cf\u8fd8\u6709\u6700\u5c0f\u5316 $y$ \u7684\uff1f  \n\u7136\u540e $w_{j+1} l_i$ \u80af\u5b9a\u662f\u89e3\u6790\u5f0f\u91cc\u7684 $kx$  \n\u800c $k$ \u5e94\u8be5\u548c $i$ \u6709\u5173\uff0c\u6240\u4ee5 $k=l_i,x=-w_{j+1}$  \n\u90a3\u4e48 $y$ \u5c31\u662f $f_j$ \u4e86  \n\n\u6240\u4ee5\uff1a$f_j=l_i(-w_{j+1})+f_i$  \n\u56e0\u4e3a $l$ \u9012\u589e\uff0c\u6240\u4ee5\u7b26\u5408 $k$ \u9012\u589e\u7684\u6761\u4ef6\uff0c\u53ef\u4ee5\u4e0d\u7528\u4e8c\u5206  \n$w$ \u9012\u51cf\uff0c\u6240\u4ee5 $-w$ \u9012\u589e\uff0c\u4e5f\u7b26\u5408 $x$ \u9012\u589e\u7684\u8981\u6c42  \n\n\u4f3c\u4e4e\u5c31\u53ef\u4ee5\u4e86\uff0c\u653e\u4e0a\u4ee3\u7801  \n\n```cpp  \n#include<cstdio>\n#include<algorithm>\n#include<iostream>\n#include<cmath>\n#include<map>\n#include<iomanip>\n#include<cstring>\n#define reg register\n#define EN std::puts(\"\")\n#define LL long long\ninline int read(){\n\tregister int x=0;register int y=1;\n\tregister char c=std::getchar();\n\twhile(c<'0'||c>'9'){if(c=='-') y=0;c=std::getchar();}\n\twhile(c>='0'&&c<='9'){x=x*10+(c^48);c=std::getchar();}\n\treturn y?x:-x;\n}\n#define N 50005\nstruct data{\n\tLL w,l;\n}a[N],b[N];\nint top,n;\nint tail,head;\nint q[N];\nLL f[N];\ninline int cmp(data a,data b){\n\treturn a.l==b.l?a.w<b.w:a.l<b.l;\n}\ninline LL get_x(int i){return -b[i+1].w;}\ninline LL get_y(int i){return f[i];}\nint main(){\n\tn=read();\n\tfor(reg int i=1;i<=n;i++) a[i].w=read(),a[i].l=read();\n\tstd::sort(a+1,a+1+n,cmp);\n\tfor(reg int i=1;i<=n;i++){\n\t\twhile(top&&b[top].w<=a[i].w&&b[top].l<=a[i].l) top--;\n\t\tb[++top]=(data){a[i].w,a[i].l};\n\t}\n\tn=top;\n\ttail=head=0;q[0]=0;\n\tfor(reg int i=1;i<=n;i++){//k=l[i]\n\t\twhile(tail<head&&\n\t\tget_y(q[tail+1])-get_y(q[tail])<=b[i].l*(get_x(q[tail+1])-get_x(q[tail]))) tail++;\n\t\tint j=q[tail];\n\t\tf[i]=f[j]+b[j+1].w*b[i].l;\n\t\twhile(tail<head&&(get_y(q[head])-get_y(q[head-1]))*(get_x(i)-get_x(q[head]))\n\t\t>=(get_y(i)-get_y(q[head]))*(get_x(q[head])-get_x(q[head-1]))) head--;\n\t\tq[++head]=i;\n\t}\n\tstd::printf(\"%lld\",f[n]);\n\treturn 0;\n}\n```",
        "postTime": 1592407093,
        "uid": 164432,
        "name": "suxxsfe",
        "ccfLevel": 9,
        "title": "P2900 [USACO08MAR]Land Acquisition G"
    },
    {
        "content": "\u975e\u5e38\u7ecf\u5178\u7684\u659c\u7387\u4f18\u5316\u677f\u5b50\u9898\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u659c\u7387\u4f18\u5316\u7684\u4f8b\u9898\u6765\u8bb2\u89e3\n\n------------\n\u9996\u5148\u8981\u660e\u786e\uff0c\u5206\u7ec4\u4e0d\u9700\u8981\u8fde\u7eed\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u53ef\u4ee5\u6253\u4e71\u987a\u5e8f\n\n\u6240\u4ee5\u4ec0\u4e48\u987a\u5e8f\u66f4\u65b9\u4fbf\u6211\u4eec\u6c42\u89e3\u95ee\u9898\u5462\uff1f\n\n\u663e\u7136\uff0c\u5bf9\u4e8e\u7b2c$i$\u5757\u571f\u5730\uff0c\u5982\u679c\u5b58\u5728$j$\uff0c\u6ee1\u8db3$w_{i}<=w_{j}$\u4e14$L_{i}<=L_{j}$\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5ffd\u89c6\u7b2c$i$\u5757\u571f\u5730\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6309$w$\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5982\u679c$w$\u76f8\u540c\u5c06$L$\u5c0f\u7684\u653e\u5728\u524d\u9762\uff0c\u6392\u4f4d\u5e8f\u540e\uff0c\u5e8f\u5217\u6ee1\u8db3\u5bf9\u4e8e\u4efb\u610f\u7684$i$\uff0c\u6ee1\u8db3$w_{i}<=w_{j}$\u4e14$L_{i}<=L_{j}$\u7684$j$\u5fc5\u5b9a\u6ee1\u8db3$\\large j>i$\uff0c\u4e5f\u5c31\u662f\u5176\u53f3\u8fb9\u7684\u6240\u4ee5\u571f\u5730$w$\u90fd\u6bd4\u4ed6\u5927\n\n\u8fd9\u65f6\u6211\u4eec\u53ea\u8981\u77e5\u9053\u53f3\u8fb9\u662f\u5426\u6709$L$\u6bd4\u4ed6\u5927\u7684\u5c31\u597d\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u5012\u7740\u679a\u4e3e\uff0c\u8bb0\u5f55\u4e00\u4e0b\u5f53\u524d\u7684$L$\u6700\u5927\u503c\u5373\u53ef\n\n\u73b0\u5728\u5e8f\u5217\u5df2\u7ecf\u6ee1\u8db3\u4e86\u5bf9\u4e8e\u4efb\u610f\u7684$i,j(i<j)$\uff0c\u90fd\u6ee1\u8db3$w_{i}<=w_{j},L_{i}>=L_{j}$\n\n\u8bbe\uff1a $\\large f_{i}:$\u8d2d\u4e70\u524d$i$\u5757\u5730\u6240\u9700\u7684\u6700\u5c0f\u503c\n\n\u8f6c\u79fb\u65b9\u7a0b\u4e5f\u5f88\u5bb9\u6613\uff1a\n\n$\\Large f_{i}=\\min(f_{j}+w_{i}\\cdot L_{j+1})$\n\n\u4f1a\u659c\u7387\u4f18\u5316\u7684\u5927\u4f6c\u4e00\u773c\u5c31\u770b\u51fa\u6765\u4e86\u8fd9\u4e2a\u53ef\u4ee5\u7528\u659c\u7387\u4f18\u5316\u5feb\u901f\u89e3\u51b3\n\n\u4e0d\u4f1a\u4e5f\u6ca1\u5173\u7cfb\uff0c\u6211\u4eec\u6162\u6162\u63a8\n\n\u8bbe\u4e24\u4e2a\u51b3\u7b56$\\large j_1,j_2$\uff0c\u4e14\u51b3\u7b56$\\large j_1$\u4f18\u4e8e\u51b3\u7b56$\\large j_2$\n\n\u5373\uff1a\n\n\n$\\qquad \\LARGE f_{j_1}+w_{i}\\cdot L_{j_{1}+1}<f_{j_2}+w_{i}\\cdot L_{j_{2}+1}$\n\n$\\LARGE =f_{j_1}-f_{j_2}<+w_{i}\\cdot (L_{j_{2}+1}-L_{j_{1}+1})$\n\n$\\LARGE =f_{j_1}-f_{j_2}<+w_{i}\\cdot (L_{j_{2}+1}-L_{j_{1}+1})$\n\n$\\LARGE =\\dfrac{f_{j_1}-f_{j_2}}{L_{j_{2}+1}-L_{j_{1}+1}}<+w_{i}$\n\n\u7136\u540e\u5c31\u662f\u4e2a\u5178\u578b\u7684\u659c\u7387\u4f18\u5316\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\n#define maxn 500005\n#define ll long long\nusing namespace std;\nint n,tot,N,Q[maxn],hed=1,til=1;\nll Ans,f[maxn];\nstruct lc{\n\tll x,y;\n\tbool operator <(const lc b)const{return x<b.x||(x==b.x&&y<b.y);}\n}A[maxn],B[maxn];\ninline int read(){\n\tint ret=0;char ch=getchar();\n\twhile (ch<'0'||ch>'9') ch=getchar();\n\twhile (ch<='9'&&ch>='0') ret=ret*10+ch-'0',ch=getchar();\n\treturn ret;\n}\ninline double Get(int x,int y){return (double)1.00*(f[x]-f[y])/(B[y+1].y-B[x+1].y);}\nint main(){\n\tn=read();\n\tfor (int i=1;i<=n;i++) A[i].x=read(),A[i].y=read();\n\tsort(A+1,A+n+1);ll Mx=0;\n\tfor (int i=n;i;i--){\n\t\tif (A[i].y<=Mx) continue;\n\t\tB[++N].x=A[i].x,Mx=B[N].y=A[i].y;\n\t}\n\tsort(B+1,B+N+1);\n\tfor (int i=1;i<=N;i++){\n\t\twhile (hed<til&&(double)Get(Q[hed],Q[hed+1])<=B[i].x) hed++;\n\t\tf[i]=f[Q[hed]]+B[i].x*B[Q[hed]+1].y;\n\t\twhile (hed<til&&(double)Get(Q[til-1],Q[til])>=Get(Q[til],i)) til--;\n\t\tQ[++til]=i;\n\t}\n\tprintf(\"%lld\",f[N]);\n\treturn 0;\n}\n```\n",
        "postTime": 1590586261,
        "uid": 108047,
        "name": "LlLlCc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]Land Acquisition G\u3011"
    },
    {
        "content": "# \u524d\u8a00\n\n\u659c\u7387\u4f18\u5316\u7684\u4e00\u9053\u597d\u9898\uff0c\u540c\u65f6\u5177\u6709\u4e00\u5b9a\u7684\u601d\u7ef4\u96be\u5ea6\uff0c\u9002\u5408\u4f5c\u4e3a\u659c\u7387\u4f18\u5316\u7684\u5165\u95e8\u7ec3\u624b\u9898\n\n# \u601d\u8def\u5206\u6790\n\n\u9996\u5148\u9898\u76ee\u8bf4\u4ee3\u4ef7\u662f\u6bcf\u7ec4\u91cc\u6700\u5927\u7684\u957f\u4e58\u4e0a\u6700\u5927\u7684\u5bbd\uff0c\u90a3\u4e48\u8fd9\u4e5f\u5c31\u610f\u5473\u7740\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u5757\u571f\u5730\uff0c\u5982\u679c\u80fd\u627e\u5230\u53e6\u4e00\u5757\u957f\u548c\u5bbd\u90fd\u6bd4\u5b83\u5927\u7684\u571f\u5730\uff0c\u90a3\u4e48\u539f\u6765\u8fd9\u5757\u8f83\u5c0f\u7684\u571f\u5730\u662f\u53ef\u4ee5\u767d\u5ad6\u7684~~\u4e0b\u6b21\u4e00\u5b9a~~\uff08\u6ed1\u7a3d\uff09\n\n\u800c\u5177\u4f53\u7684\u505a\u6cd5\u5462\uff0c\u5c31\u662f\u5148\u628a\u6240\u6709\u571f\u5730\u6309\u957f\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c\u5bbd\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u6765\u5347\u5e8f\u6392\u5e8f\uff0c\u6392\u5e8f\u4e4b\u540e\u7ef4\u62a4\u4e00\u4e2a\u4ee5\u5bbd\u5ea6\u4e3a\u5173\u952e\u5b57\u7684\u5355\u8c03\u9012\u51cf\u7684\u5355\u8c03\u6808\uff0c\u5230\u6700\u540e\u5355\u8c03\u6808\u91cc\u7684\u6240\u6709\u7684\u5143\u7d20\u5c31\u662f\u771f\u6b63\u80fd\u5bf9\u7b54\u6848\u4ea7\u751f\u8d21\u732e\u7684\u5143\u7d20\u4e86\u3002\n\n\u7528 $x,y$ \u8868\u793a\u957f\u548c\u5bbd\uff0c$f_i$ \u8868\u793a\u524d $i$ \u7ec4\u571f\u5730\u7684\u6700\u5c0f\u4ee3\u4ef7\u90a3\u4e48\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u663e\u800c\u6613\u89c1\uff1a\n\n$f_i=\\min(f_i,f_j+x_iy_{j+1})$\n\n\u770b\u8d77\u6765\u8fd9\u5c31\u662f\u4e2a\u659c\u7387\u4f18\u5316\u3002\u628a\u4ed6\u5199\u6210\u76f4\u7ebf\u65b9\u7a0b\u7684\u5f62\u5f0f\uff1a\n\n$f_j=-x_iy_{j+1}+f_i$\n\n\u53ef\u662f\uff0c\u597d\u50cf\u7b2c\u4e00\u773c\u770b\u4e0a\u53bb\u6a2a\u5750\u6807$y_{j+1}$\u548c\u659c\u7387$-x_i$\u90fd\u4e0d\u662f\u5355\u8c03\u9012\u589e\u7684\u554a\uff0c\u600e\u4e48\u7528\u4f18\u5148\u961f\u5217\u6765\u7ef4\u62a4\u51f8\u58f3\u5462\uff1f\u8fd9\u4e5f\u662f\u6211\u8fd9\u4e2a\u849f\u84bb\u7b2c\u4e00\u773c\u7684\u76f4\u89c2\u60f3\u6cd5\u3002\n\n>\u5982\u679c\u5927\u5c71\u4e0d\u4f1a\u8d70\u5411\u7a46\u7f55\u7a46\u5fb7\uff0c\u7a46\u7f55\u7a46\u5fb7\u53ef\u4ee5\u8d70\u5411\u5927\u5c71\n\n\u6211\u4eec\u81ea\u5df1\u4e3b\u52a8\u5730\u53d8\u6362\u4e00\u4e0b\u601d\u7ef4\u65b9\u5f0f\uff0c\u6a2a\u5750\u6807\u6539\u4e3a$-y_{j+1}$\uff0c\u659c\u7387\u6539\u4e3a$x_i$\uff0c\u4ed6\u4eec\u90fd\u5355\u8c03\u9012\u589e\uff0c\u53ef\u4ee5\u7528\u4f18\u5148\u961f\u5217\u7ef4\u62a4\u3002\n\n\u81f3\u6b64\uff0c\u95ee\u9898\u5168\u90e8\u89e3\u51b3\u4e86\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u659c\u7387\u4f18\u5316\u677f\u5b50\u4e86\u3002\n\n# \u4ee3\u7801\u65f6\u95f4\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nnamespace QiFeng233{\n\tconst int maxn=5e4+10;\n\tint n,q[maxn],head=1,tail=1;\n\tlong long f[maxn];\n\tstruct land{long long x,y;}a[maxn];\n\tstack<land> stk;\n\tbool operator<(land ld1,land ld2){return ld1.x==ld2.x?ld1.y<ld2.y:ld1.x<ld2.x;}\n\tdouble K(int i,int j){\n\t\treturn -1.0*(f[i]-f[j])/(a[i+1].y-a[j+1].y);\n\t}\n\tvoid solve(){\n\t\tscanf(\"%d\",&n);\n\t\tfor(int i=1;i<=n;++i)scanf(\"%lld%lld\",&a[i].x,&a[i].y);\n\t\tsort(a+1,a+n+1);\n\t\tfor(int i=1;i<=n;++i){\n\t\t\twhile(!stk.empty()&&stk.top().y<=a[i].y)stk.pop();\n\t\t\tstk.push(a[i]);\n\t\t}\n\t\tn=stk.size();\n\t\tfor(int i=n;i;--i)a[i]=stk.top(),stk.pop(); \n\t\t//y=f[j],k=a[i].x,x=(-a[j+1].y),b=-f[i]\n\t\tfor(int i=1;i<=n;++i){\n\t\t\twhile(head<tail&&K(q[head],q[head+1])<=a[i].x)++head;\n\t\t\tf[i]=f[q[head]]+a[i].x*a[q[head]+1].y;\n\t\t\twhile(head<tail&&K(q[tail-1],q[tail])>=K(q[tail],i))--tail;\n\t\t\tq[++tail]=i;\n\t\t}\n\t\tprintf(\"%lld\",f[n]);\n\t}\n}\nsigned main(){\n\tQiFeng233::solve();\n\treturn 0;\n}\n```",
        "postTime": 1584721024,
        "uid": 233357,
        "name": "QiFeng233",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]Land Acquisition G\u3011"
    },
    {
        "content": "\u672c\u9898\u9002\u5408\u521a\u63a5\u89e6\u5e76\u5df2\u7ecf\u7406\u89e3\u659c\u7387\u4f18\u5316+DP\u539f\u7406\u548c\u8fc7\u7a0b\u7684\u9009\u624b\u4e0a\u624b\u7ec3\u4e60\u3002\n\n\n------------\n\u770b\u4e86\u9898\u76ee\uff0c\u6253\u5305\u8d2d\u4e70\u571f\u5730\uff0c\u4ef7\u503c\u4e3a\u6700\u5927\u957f\u4e0e\u6700\u5927\u5bbd\u4e4b\u79ef\u3002\u8fd9\u4e2a\u5730\u65b9\u5c31\u662f\u672c\u9898\u7684\u96be\u70b9\u6240\u5728\u3002\n\n\u4e24\u5757\u571f\u5730\u7684\u957f\uff08a\uff09\u4e0e\u5bbd\uff08b\uff09\u5171\u6709\u4e0b\u9762\u51e0\u79cd\u60c5\u51b5\uff1a\n\n1.\u4e24\u5757\u571f\u5730\u957f\u4e0e\u5bbd\u5927\u5c0f\u5206\u522b\u76f8\u4ea4\u3002 \u5373\uff1aa1<a2&&b1>b2\u6216\u8005a1>a2&&b1<b2\n                                            \n2.\u4e00\u5757\u571f\u5730\u5305\u542b\u53e6\u4e00\u5757\u3002 \u5373\uff1aa1<a2&&b1<b2\u6216\u8005a1>a2&&b1>b2;\n\n\u7b2c\u4e8c\u79cd\u60c5\u51b5\u53ef\u4ee5\u770b\u51fa\u6765\uff0c**\u88ab\u5305\u542b**\u7684\u90a3\u4e00\u5757\u571f\u5730\u5b9e\u9645\u4e0a\u662f\u53ef\u4ee5\u4e0e\u90a3\u5757**\u5305\u542b**\u5b83\u7684**\u5927\u571f\u5730**\u4e00\u8d77\u8d2d\u4e70\uff0c\u8fd9\u6837\u5c0f\u571f\u5730\u4ef7\u503c\u5373\u4e3a0\uff0c\u79f0\u4e3a\u201c**\u514d\u8d39\u8d2d\u4e70**\u201d\n\n\u6240\u4ee5\uff0c\u5728\u8fd9\u6837\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u4ee5\u957f\u5ea6**\u4ece\u5c0f\u5230\u5927**\u6392\u5e8f\uff0c\u501f\u52a9\u4e00\u4e2a\u5355\u8c03\u6808\uff0c\u7ef4\u62a4\u6bcf\u5757\u571f\u5730\u5bbd\u7684**\u5355\u8c03\u9012\u51cf**\uff08\u56e0\u4e3a\u65b0\u8fdb\u5143\u7d20\u957f\u5ea6\u5fc5\u5b9a\u5927\u4e8e\u6808\u5185\u5143\u7d20\uff0c\u800c\u5bbd\u5ea6\u53ea\u8981\u5927\u4e8e\u6808\u9876\uff0c\u5373\u53ef\u5305\u542b\u8be5\u571f\u5730\uff0c\u4f7f\u5176\u4ef7\u503c\u4e3a0\uff0c\u5f39\u51fa\u3002\uff09\n\n\u4ee3\u7801\uff1a\n```cpp\nfor(i=1;i<=n;i++)scanf(\"%lld%lld\",&p[i].a,&p[i].b);\nsort(p+1,p+n+1,cmp);\nfor(i=1;i<=n;i++)\n{\n    while(top&&p[s[top]].b<=p[i].b)top--;\n    s[++top]=i;\n}\n```\n\n\n\u8fd9\u6837\u7684\u8bdd\u6240\u6709\u5143\u7d20\u5c31\u4ec5\u4ec5\u5269\u4e0b\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u7528DP\u6765\u8003\u8651 \u3002\n\n\u8bbef[i]\u4e3a\u8d2d\u4e70\u7b2c1~i\u5757\u571f\u5730\u6700\u5c0f\u603b\u4ef7\u503c\n\n1.\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO\uff08n^2\uff09\n\n\u6211\u4eec\u5c06\u6808\u5185\u7684\u5143\u7d20\u7531i\u4ece1\u5230\u6808\u9876\uff08top\uff09\u679a\u4e3e\uff0cj\u679a\u4e3e0~i-1\u4e2d\u5143\u7d20\uff0c\u8868\u793a\u7531\u7b2cj\u5757\u571f\u5730\u5f00\u59cb\uff0c\u5c06\u4ef7\u503c\u8f6c\u79fb\u5230f[i]\u4e0a\u53bb\n\n\u65b9\u7a0b\u4e3a\uff1af[i]=f[j]+p[i].a*p[j+1].b\uff081<=i<=top&&0<=j<i\uff09\n\n(\u6b64\u523b\u6700\u5927\u7684\u957f\u5fc5\u5b9a\u662fp[i].a,\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u6392\u8fc7\u5e8f\u4e86\u3002\u6700\u5927\u7684\u5bbd\u5373\u4e3ap[j+1].b,\u56e0\u4e3a\u4ece0\u5f00\u59cb\u4e14\u7531\u4e8e\u5355\u8c03\u6808\u4ee5\u7ef4\u62a4\u4e861~j\u4e4b\u95f4j\u5143\u7d20\u7684\u5bbd\u6700\u5927)\n\n\u8fd9\u65f6\u518d\u770b\u6570\u636e 1 \u2264 N \u2264 50000  ~~\uff08\u554a\uff0c\u63a8\u4e86\u8fd9\u4e48\u4e45\u7684\u521d\u59cb\u5316\u5c31\u70b8\u4e86\u5417\uff1f\uff01\uff09~~\n\n\u5f88\u5bb9\u6613\u53ef\u4ee5\u770b\u51fa\u6765\u8fd9\u65f6\u6211\u4eec\u5373\u53ef\u8fd0\u7528\u4e00\u79cd\u4f18\u5316\u65b9\u6cd5\u2014\u2014**\u659c\u7387\u4f18\u5316**\n\n------------\n\u8bf7\u8bfb\u8005\u5728\u9605\u8bfb\u4e00\u4e0b\u601d\u8def\u524d\u5148\u4e86\u89e3\u4e00\u4e0b\u659c\u7387\u4f18\u5316\u539f\u7406 ~~\uff08\u5426\u5219\u53ef\u80fd\u4f1a\u5f15\u8d77\u4e0d\u9002\uff09~~\n\n[\u7559\u4e0b\u4e00\u4f4d\u5927\u4f6c\u94fe\u63a5](https://blog.csdn.net/bill_yang_2016/article/details/54667902)\n\n2.\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO\uff08n\uff09\n\n\u6211\u4eec\u4e00\u6837\u5c06i\u4ece1\u5230top\u679a\u4e3e\uff0c\u8fd9\u65f6\u6211\u4eec\u5c06i\u770b\u505a\u4e00\u4e2a\u5b9a\u503c\uff0c\u628a\u542b\u6709j\u7684\u503c\u8868\u793a\u51fa\u6765\uff0c\u5373\u53ef\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\nf[j]=-p[i].a*p[j+1].b+f[i];\n\n\u4e4d\u4e00\u770b\uff0c\u8fd9\u6709\u70b9\u50cf\u6211\u4eec\u521d\u4e2d\u5b66\u7684\u4e00\u6b21\u51fd\u6570\uff1ay=kx+b\n\n\u7531\u4e8ei\u786e\u5b9a\uff0c\u6240\u4ee5-p[i].a\u4e0ef[i]\u5747\u786e\u5b9a\uff0c\u800cf[j]\uff0cp[j+1].b\u6b64\u65f6\u5c31\u6210\u4e86\u53d8\u91cf\u3002\n\n\u56e0\u6b64y=f[j], x=p[j+1].b, k=-p[i].a, b=f[i],\u8fd9\u4e2ak\u7684\u7edd\u5bf9\u503c\u4e5f\u5c31\u662f\u6211\u4eec\u6240\u8bb2\u7684\u659c\u7387\u4e86\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5927\u81f4\u5f97\u5230\u8fd9\u6837\u4e00\u4e2a\u51fd\u6570\u56fe\u50cf\uff1a~~\uff08\u521d\u4e2d\u6570\u5b66\u4e0d\u8981\u95ee\u6211\u4e3a\u4ec0\u4e48\uff09~~\n![\u65e0\u6807\u9898.png](https://i.loli.net/2019/06/14/5d0302a12d7d566617.png)\n\u4f46\u5728\u5b9e\u9645\u8ba1\u7b97\u4e2d\uff0c\u7531\u4e8e\u4e00\u4e2a\u4e00\u4e2a\u5143\u7d20\u904d\u5386\uff0c\u6211\u4eec\u5c31\u5fc5\u987b\u7ef4\u62a4\u8fd9\u6837\u4e00\u6761\u76f4\u7ebf\uff0c\u4f7f\u5f97\u5f53\u524d\u72b6\u6001f[i]\u6700\u5c0f\uff08\u56de\u5f52\u9898\u76ee\u6240\u6c42\uff09\u3002\n\n\u51fd\u6570\u4e2d\uff1af[j]=-p[i].a*p[j+1].b+f[i];\n\n\u5f53f[i]\u2193\uff0cf[j],p[j+1].b\u4fdd\u6301\u4e0d\u53d8\uff0c\u5219-p[i].a\u2191\uff0c\u5373abs\uff08-p[i].a\uff09=p[i].a\u2193\uff08\u7528\u6570\u5b66\u77e5\u8bc6\u4ed4\u7ec6\u60f3\u4e0b\uff09\n\n\u6240\u4ee5\u6211\u4eec\u8981\u5728\u7b97\u6cd5\u4e2d\u5c3d\u91cf\u7ef4\u62a4\u659c\u7387\u66f4\u5c0f\uff0c\u8fd9\u65f6\u53ef\u4ee5\u7528\u5230\u6570\u636e\u7ed3\u6784\uff1a\u5355\u8c03\u961f\u5217\u3002\n\u7ef4\u62a4\u4e00\u4e2a\u659c\u7387\u9012\u51cf\u7684\u96c6\u5408\n\u5373\uff1a\n\n\u8fd9\u65f6\u65b0\u8fdb\u5165\u4e00\u4e2a\u5143\u7d20\uff0c\u5c06\u5b58\u5728\u8fd9\u6837\u4e24\u79cd\u60c5\u51b5\u9700\u8981\u7ef4\u62a4\n\n1.![\u65e0\u6807\u98981.png](https://i.loli.net/2019/06/14/5d02f944ec70894916.png)\n\n\u6211\u4eec\u53d1\u73b0\u65b0\u8fdb\u5143\u7d20\u659c\u7387\u5fc5\u5b9a\u5c0f\u4e8e\u961f\u9996\uff0c\u5c06\u5176\u5ef6\u957f\n![\u65e0\u6807\u98982.png](https://i.loli.net/2019/06/14/5d02fa43e5b7431133.png)\n\u5219\u5f53\u524d\u659c\u7387\u4e0b\u7684\u76f4\u7ebf\u4e0ey\u8f74\u4ea4\u70b9\u5373\u4e3ab\uff0c\u4e5f\u5c31\u662ff[i],\u663e\u7136\u5f53\u524d\u72b6\u6001f[i]\u5c0f\u4e8e\u961f\u9996\u72b6\u6001\uff0c\u7ef4\u62a4\u5355\u8c03\u6027\uff0c\u5c06\u524d\u9762\u51fa\u961f\uff0c\u53ea\u7559\u4e0b\u961f\u5c3e\u5143\u7d20\u548c\u65b0\u8fdb\u5143\u7d20\u8fd9\u4e00\u6700\u4f18\u7b56\u7565\n\u4ee3\u7801\uff1a\n```cpp\nwhile(l<r&&f[s[q[l+1]]]-f[s[q[l]]]<=(p[s[q[l]+1]].b-p[s[q[l+1]+1]].b)*(p[s[i]].a))l++;\n```\n\u6b64\u65f6\u7684\u961f\u9996\u5143\u7d20j=q[l]\u5373\u4e3a\u6700\u4f18\u51b3\u7b56\uff0c\u8f6c\u79fb\u51faf[i]\u7684\u503c\n```cpp\nj=q[l];\nf[s[i]]=f[s[j]]+p[s[i]].a*p[s[j+1]].b;\n```\n2.![\u65e0\u6807\u98984.png](https://i.loli.net/2019/06/14/5d02fe875b7ff91302.png)\n\u53ef\u4ee5\u53d1\u73b0\u6b64\u65f6\u6709\u4e00\u4e2a\u4e0a\u51f8\u70b9\uff0c\u4e0d\u8bba\u76f4\u7ebf\u659c\u7387\u4e3a\u591a\u5c11\uff0c\u6700\u4f18\u51b3\u7b56\u4e0d\u53ef\u80fd\u662fR\uff0c\u6240\u4ee5\u5c06\u5176\u51fa\u961f\uff0c\u5e76\u7ee7\u7eed\u7ef4\u62a4\u961f\u5c3e\u7684\u5355\u8c03\u6027\u3002\n```\nwhile(l<r&&(f[s[q[r]]]-f[s[q[r-1]]])*(p[s[i+1]].b-p[s[q[r]+1]].b)<=(f[s[i]]-f[s[q[r]]])*(p[s[q[r]+1]].b-p[s[q[r-1]+1]].b))r--;\n```\n\uff08\u8fd9\u91cc\u4ee3\u7801\u770b\u4e0d\u61c2\u7a0b\u5e8f\u91cc\u8fd8\u6709\u8be6\u89e3\uff09\n\u6700\u540e\uff0c\u6211\u4eec\u518d\u5c06\u5f53\u524d\u5143\u7d20i\u8fdb\u961f\u5c31\u53ef\u4ee5\u5566\uff01\n\n\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint n,q[2000005],s[2000005],top;long long f[50005];\nstruct node{\n    long long a,b;\n}p[50005];\nbool cmp(node x,node y)\n{return x.a<y.a;}//\u8fd9\u91cc\u6700\u597d\u4e0d\u7528operator\uff0c\u6709\u4e9b\u7f51\u7ad9\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1aCE\nint main()\n{\n    int i,j,k,x,y;\n    cin>>n;\n    for(i=1;i<=n;i++)scanf(\"%lld%lld\",&p[i].a,&p[i].b);\n    sort(p+1,p+n+1,cmp);//\u6309\u957f\u5ea6\u6392\u5e8f\n    for(i=1;i<=n;i++)\n    {\n        while(top&&p[s[top]].b<=p[i].b)top--;\n        s[++top]=i;\n    }//\u521d\u59cb\u5316\u514d\u8d39\u571f\u5730\n    int l=0,r=0;\n    for(i=1;i<=top;i++)\n    {\n        while(l<r&&f[s[q[l+1]]]-f[s[q[l]]]<=(p[s[q[l]+1]].b-p[s[q[l+1]+1]].b)*(p[s[i]].a))l++;//\u5224\u65ad\u961f\u9996\u659c\u7387\u4e0e\u5f53\u524d\u659c\u7387\u5927\u5c0f\u5173\u7cfb\uff0c\u6ce8\u610f\u4e0d\u7b49\u5f0f\u7b26\u53f7\u7684\u53d8\u5316\n        j=q[l];\n        f[s[i]]=f[s[j]]+p[s[i]].a*p[s[j+1]].b;//\u72b6\u6001\u8f6c\u79fb\n        while(l<r&&(f[s[q[r]]]-f[s[q[r-1]]])*(p[s[i+1]].b-p[s[q[r]+1]].b)<=(f[s[i]]-f[s[q[r]]])*(p[s[q[r]+1]].b-p[s[q[r-1]+1]].b))r--;//\u5224\u65ad\u5f53\u524d\u659c\u7387\u4e0e\u961f\u5c3e\u5173\u7cfb\uff0c\u8fd9\u91cc\u6700\u597d\u5728\u8349\u7a3f\u4e0a\u89e3\u4e00\u89e3\uff0c\u7b26\u53f7\u7684\u53d8\u5316\u5f88\u53ef\u80fd\u5bfc\u81f4\u9519\u8bef\n        q[++r]=i;\n    }\n//\u6ce8\u610f\uff1a1.\u6211\u662f\u5c06/\u53f7\u5168\u6362\u505a\u4e86*\u53f7\uff08\u770b\u7740\u8212\u670d\u70b9\uff09\u8bfb\u8005\u4e5f\u53ef\u76f4\u63a5\u7528tan\u4e09\u89d2\u51fd\u6570\u8ba1\u7b97\u659c\u7387\u3002\n//\t2.\u8fd9\u91ccs\u6570\u7ec4\u5b58\u7684\u662f\u7f16\u53f7\uff0ci\u904d\u5386\u7684\u662f\u6808\u7684\u7f16\u53f7\uff0c\u5173\u4e8ei\u7684\u5f15\u7528\uff0c\u961f\u5217\u7b49\u5747\u9700\u5957\u4e00\u4e2as\u6570\u7ec4\u3002\n    printf(\"%lld\\n\",f[s[top]]);//\u8f93\u51fa\n}\n```\n\u5c0f\u7ed3\uff1a\u5f53\u89c1\u5230\u4e00\u9053\u659c\u7387\u4f18\u5316\u9898\uff0c\u53ef\u4ee5\u5148\u5c06\u8fd9\u9053\u9898\u7684\u66b4\u529b\u4ee3\u7801\u548c\u601d\u8def\u60f3\u51fa\u6765\uff0c\u518d\u6839\u636e\u66b4\u529b\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u5c06i\u503c\u786e\u5b9a\uff0c\u7528\u51fd\u6570\u65b9\u5f0f\u8868\u793a\u679a\u4e3e\u7684j\u72b6\u6001\uff0c\u5c06y\uff0cx\u4e0e\u659c\u7387\u5206\u522b\u6307\u4ee3\u7684\u6570\u503c\u660e\u786e\uff0c\u6ce8\u610f\u5728\u659c\u7387\u4ee5\u53ca\u622a\u8dddb\u5fc5\u987b\u4ee5\u5e26i\u7684\u72b6\u6001\u8868\u793a\uff08\u56e0\u4e3a\u5df2\u786e\u5b9a\uff09\uff0c\u5e26\u5165\u5957\u8def\u6c42\u89e3\u5373\u53ef\u3002",
        "postTime": 1560480533,
        "uid": 106266,
        "name": "l_x_z2020",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "[\u4f20\u9001~](https://www.luogu.org/problemnew/show/P2900)\n\n## Description\n\n\u6709$n$\u5757\u571f\u5730,\u6bcf\u5757\u571f\u5730\u7684\u957f\u548c\u5bbd\u5206\u522b\u4e3a$l_i,w_i$.\u571f\u5730\u53ef\u4ee5\u5355\u72ec\u4e70\u4e5f\u53ef\u4ee5\u4e00\u8d77\u4e70.\u5f53\u8d2d\u4e70\u7684\u571f\u5730\u7684\u7ec4\u5408\u4e3a\u96c6\u5408$S(size_S\\geq 1)$\u65f6, \u4ef7\u683c\u4e3a$S$\u4e2d**\u6700\u5927\u7684\u957f\\*\u6700\u5927\u7684\u5bbd**,\u5373$l_{max}*w_{max}$ .\u6c42\u8d2d\u4e70\u6240\u6709\u571f\u5730\u7684\u6700\u5c0f\u8d39\u7528.\n\n$n\\leq 5*10^4,l_i,w_i\\leq 10^6$\n\n## Solution\n\n\u521d\u770b\u5230\u8fd9\u9053\u9898,\u6211\u662f****\u7684,\u4e5f\u5217\u4e0d\u51fa\u4efb\u4f55\u8f6c\u79fb\u65b9\u7a0b.\u4f46\u8fd9\u6bd5\u7adf\u662f\u9053\u659c\u7387\u4f18\u5316\u9898,\u4e8e\u662f\u6211\u4eec\u5c31\u8981\u6709\u70b9\u659c\u7387\u4f18\u5316\u7684\u6837\u5b50,\u4e8e\u662f...\n\n### \u64cd\u4f5c\u4e00\n\n\u7531\u4e8e\u8d39\u7528\u4e0e\u4e00\u7ec4\u571f\u5730\u4e2d\u957f\u548c\u5bbd\u7684**\u6700\u5927\u503c**\u6709\u5173,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u5c06\u4e00\u7ef4(\u5982\u5bbd)\u62cd\u597d\u5e8f,\u90a3\u4e48$w_i$\u5373\u4e3a$1$\u81f3$i$\u4e2d\u7684$w_{max}$.\u5f53$i$\u4e0e$1$\u81f3$(i\n-1)$\u7684\u571f\u5730\u7ec4\u5408\u65f6,\u8d39\u7528\u7684\u4e00\u7ef4\u5c31\u786e\u5b9a\u4e86.\n\n\u5c3d\u7ba1\u4e00\u7ef4\u786e\u5b9a\u4e86,\u4f46\u7531\u4e8e\u53ef\u4ee5\u968f\u610f\u7ec4\u5408,\u53e6\u4e00\u7ef4\u662f\u4e0d\u786e\u5b9a\u7684,\u6240\u4ee5\u6211\u4eec\u4ecd\u6beb\u65e0\u5934\u7eea.\n\n### \u7ed3\u8bba\u4e00\n\n\u63a5\u7740\u7531\u9898\u610f~~\u663e\u7136~~\u53ef\u4ee5\u5f97\u5230\u7b2c\u4e00\u4e2a\u7ed3\u8bba:\u5f53$l_i\\leq l_j$\u4e14$w_i\\leq w_j$\u65f6$i$\u5bf9\u8d39\u7528\u662f\u6ca1\u6709\u8d21\u732e\u7684.\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u6837\u7684\u571f\u5730**\u5220\u9664**.\n\n\u4e3a\u4ec0\u4e48?\n\n\u5f53$j$\u88ab\u8d2d\u4e70\u65f6,\u8bbe\u8d39\u7528\u4e3a$l_0*w_0,l_0\\geq l_j,w_0\\geq w_j$.\u82e5\u5c06$i$\u4e0e$j$\u4e00\u540c\u8d2d\u4e70,\u8d39\u7528\u662f**\u4e0d\u4f1a\u589e\u52a0\u7684**.\u6240\u4ee5\u6211\u4eec\u5728\u8d2d\u4e70$j$\u65f6\u81ea\u52a8\u8d2d\u4e70$i$,\u5c31\u53ef\u4ee5\u628a$i$\u5220\u6389\u4e86.\n\n\u4f46\u8fd9\u8ddf\u659c\u7387\u4f18\u5316,\u751a\u81f3\u8ddfDP\u6709\u4ec0\u4e48\u5173\u7cfb\u5462?\n\n### \u64cd\u4f5c\u4e8c\n\n\u5229\u7528\u6211\u4eec\u7684\u6392\u5e8f\u64cd\u4f5c\u548c\u7b2c\u4e00\u4e2a\u7ed3\u8bba,\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a**\u5bbd\u5355\u8c03\u9012\u589e,\u957f\u5355\u8c03\u9012\u51cf**\u7684\u571f\u5730\u7684\u5e8f\u5217.~~\u5bbd\u5355\u8c03\u9012\u589e\u5f88\u5bb9\u6613\u7406\u89e3,\u56e0\u4e3a\u8fd9\u662f\u6392\u5e8f\u7684\u5173\u952e\u5b57~~.\u4f46\u4e3a\u4ec0\u4e48\u957f\u5355\u8c03\u9012\u51cf?\n\n\u56e0\u4e3a\u6392\u5e8f\u540e$\\forall 1\\leq j<i,w_j<w_i$,\u6240\u4ee5\u53ea\u8981\u5f53$l_j\\leq l_i$\u65f6,$j$\u5c31\u53ef\u4ee5\u88ab\u5220\u6389\u4e86.\u6240\u4ee5\u6211\u4eec\u7528\u5355\u8c03\u6808\u7ef4\u62a4,\u4f7f\u6808\u4e2d$l$\u9012\u51cf.\u4ece\u524d\u5f80\u540e\u626b,\u626b\u5230$i$\u65f6,\u628a\u5c0f\u4e8e$l_i$\u7684\u90fd\u5f39\u6389.\n\n### \u7ed3\u8bba\u4e8c\n\n\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u7b2c\u4e8c\u4e2a\u7ed3\u8bba\u4e86:\u6bcf\u4e00\u4e2a\u8d2d\u4e70\u7ec4\u5408\u90fd\u5fc5\u987b\u662f\u4e00\u6bb5**\u8fde\u7eed**\u7684\u571f\u5730\u5e8f\u5217.\n\n\u4e3a\u4ec0\u4e48?\n\n\u6211\u4eec\u8bbe$j<i$,\u82e5$i$\u4e0e$j$\u4e00\u8d77\u4e70,\u7531\u4e0a\u9762\u7684\u4e00\u7cfb\u5217\u64cd\u4f5c,\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u4ef7\u683c\u4e3a$w_i*l_j$.\u5bf9\u4e8e$\\forall j<k<i$,\u7531\u4e8e**\u5bbd\u5355\u8c03\u9012\u589e,\u957f\u5355\u8c03\u9012\u51cf**,\u6545$w_k<w_i,l_k<l_j$,\u6240\u4ee5$k$\u5bf9\u4e8e\u8d39\u7528\u662f\u6ca1\u6709\u5f71\u54cd\u7684,\u6240\u4ee5\u6211\u4eec\u4e0d\u59a8\u628a\u8fd9\u4e9b$k$\u4e0e$i$\u548c$j$\u4e00\u8d77\u4e70,\u5373\u8d2d\u4e70\u533a\u95f4$[j,i]$.\n\n\u7ec8\u4e8e,\u6211\u4eec\u53ef\u4ee5\u5f00\u59cb\u63a8\u5f0f\u5b50\u4e86...\n\n### DP\n\n\u8bbe$f_i$\u4e3a\u524d$i$\u5757\u571f\u5730\u90fd\u8d2d\u4e70\u4e86\u7684\u6700\u5c0f\u8d39\u7528.\u7531\u4e0a\u9762\u4e00\u6ce2\u64cd\u4f5c,\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7684\u8f6c\u79fb\u65b9\u7a0b\n\n$$f_i=\\max_{1\\leq j<i}\\{f_j+w_i*l_{j+1}\\}$$\n\n\u5728\u533a\u95f4$(j,i]$\u4e2d,$w_{max}=w_i,l_{max}=l_{j+1}$,\u6545\u8f6c\u79fb\u8d39\u7528\u4e3a$w_i*l_{j+1}$.\n\n\u8fd9\u5df2\u7ecf\u4e0d\u662f\u659c\u7387\u4f18\u5316~~\u5165\u95e8\u9898~~\u4e86,\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u4e0a\u5957\u8def.\n\n\u6211\u4eec\u8bbe$j>k$, \u82e5\u4ece$j$\u8f6c\u79fb\u6bd4$k$\u66f4\u4f18,\u5219\u5fc5\u987b\u6ee1\u8db3\n$$\\begin{aligned}f_j+w_i*l_{j+1}&<f_k+w_i*l_{k+1}\\\\\\Rightarrow f_j-f_k&<w_i*(l_{k+1}-l_{j+1})\\\\\\Rightarrow \\frac{f_j-f_k}{l_{k+1}-l_{j+1}}&<w_i\\end{aligned}$$\n\n\u7531\u4e8e$j>k$,$l$\u5355\u8c03\u9012\u51cf,\u6545$l_{k+1}-l_{j+1}>0$,\u53ef\u4ee5\u76f4\u63a5\u9664\u8fc7\u53bb.\n\n\u5f88\u5bb9\u6613\u53d1\u73b0\u8fd9\u662f\u4e00\u6b21\u51fd\u6570\u7684\u70b9\u659c\u5f0f.\u6211\u4eec\u8bbe$slope(j,k)$\u4e3a\u4e0a\u9762\u7684\u5de6\u5f0f,\u5373\u659c\u7387.\u5219\u5f53$j>k$\u4e14$slope(j,k)<w_i$\u65f6,$j$\u6bd4$k$\u4f18.\u7531\u4e8e$w_i$\u5355\u8c03\u9012\u589e,\u6211\u4eec\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u659c\u7387,\u4f7f$slope(i+1, i)$\u5355\u8c03\u9012\u589e,\u4e14\u961f\u9996\u6700\u4f18.\n\n## Code\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int maxn = 5e4;\ntypedef long long ll;\nint n, cnt, l, r, q[maxn+10], tag[maxn+10];\nll f[maxn+10];\nstruct land {\n\tint wid, len;\n} a[maxn+10], b[maxn+10];\nint cmp(land x, land y) {\n\treturn x.wid != y.wid ? x.wid < y.wid : x.len < y.len;\n}\ndouble slope(int j, int k) {\n\treturn 1.0*(f[j]-f[k])/(b[k+1].len-b[j+1].len);\n}\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; ++i)\n\t\tscanf(\"%d%d\", &a[i].wid, &a[i].len);\n\tsort(a+1, a+1+n, cmp); //\u6309w\u6392\u5e8f\n\tfor (int i = 1; i <= n; ++i) {\n\t\twhile (cnt && a[i].len >= b[cnt].len) --cnt;\n\t\tb[++cnt] = a[i];\n\t} //\u5355\u8c03\u6808\n\tfor (int i = 1; i <= cnt; ++i) {\n\t\twhile (l < r && slope(q[l+1], q[l]) < b[i].wid) ++l; //\u6b64\u65f6q[l]\u6bd4q[l+1]\u66f4\u52a3,\u7531\u4e8ex[i]\u9012\u589e,\u6545\u4e4b\u540e\u4e00\u76f4\u66f4\u52a3,\u5f39\u51fa\n\t\tf[i] = f[q[l]]+1ll*b[i].wid*b[q[l]+1].len; //\u8bb0\u5f97\u89811ll\n\t\twhile (l < r && slope(q[r], q[r-1]) > slope(i, q[r])) --r; //\u4fdd\u6301\u961f\u5217\u4e2d\u659c\u7387\u5355\u8c03\u9012\u589e\n\t\tq[++r] = i; \n\t}\n\tprintf(\"%lld\\n\", f[cnt]); //\u4e00\u5b9a\u8bb0\u5f97\u5f00longlong\n\treturn 0;\n}\n```\n\n> *THANK YOU FOR READING THIS!*",
        "postTime": 1553490365,
        "uid": 15702,
        "name": "rhdeng",
        "ccfLevel": 7,
        "title": "\u6d1b\u8c37 P2900 \u571f\u5730\u5f81\u7528Land Acquisition \u659c\u7387\u4f18\u5316"
    },
    {
        "content": "\u5254\u9664\u65e0\u7528\u571f\u5730\u540e\u8fdb\u884c\u52a8\u89c4\n\nf[i]=min{f[j]+x[i]\\*y[j+1]}\n\n\u7ef4\u62a4\u4e0b\u51f8\u5305\u6027\u8d28\n\n\u8be6\u7ec6\u89c1http://blog.csdn.net/bill\\_yang\\_2016/article/details/54864284\n\n\u4ee3\u7801\n```cpp\n#include<algorithm>\n#include<iostream>\n#include<iomanip>\n#include<cstring>\n#include<cstdlib>\n#include<vector>\n#include<cstdio>\n#include<cmath>\n#include<queue>\nusing namespace std;\ntypedef long long LL;\ninline const int Get_Int() {\n    LL num=0,bj=1;\n    char x=getchar();\n    while(x<'0'||x>'9') {\n        if(x=='-')bj=-1;\n        x=getchar();\n    }\n    while(x>='0'&&x<='9') {\n        num=num*10+x-'0';\n        x=getchar();\n    }\n    return num*bj;\n}\nstruct Land {\n    LL x,y;\n    bool operator < (const Land& b) const {\n        return (x==b.x&&y<b.y)||(x<b.x);\n    }\n} a[50005],b[50005];\nLL n,cnt=0,f[50005],Q[50005];\ndouble Slope(LL j,LL k) {\n    return (double)(f[j]-f[k])/(b[k+1].y-b[j+1].y);\n}\nint main() {\n    n=Get_Int();\n    for(int i=1; i<=n; i++) {\n        a[i].x=Get_Int();\n        a[i].y=Get_Int();\n    }\n    sort(a+1,a+n+1);\n    for(int i=1; i<=n; i++) { //\u53bb\u9664\u65e0\u7528\u571f\u5730 \n        while(cnt>0&&a[i].y>=b[cnt].y)cnt--;\n        b[++cnt]=a[i];\n    }\n    int Left=1,Right=1;\n    Q[1]=0;\n    for(int i=1; i<=cnt; i++) {\n        while(Left<Right&&Slope(Q[Left],Q[Left+1])<=b[i].x)Left++; //\u7ef4\u62a4\u961f\u9996\uff08\u5220\u9664\u975e\u6700\u4f18\u51b3\u7b56\uff09\n        int Front=Q[Left];\n        f[i]=f[Front]+b[i].x*b[Front+1].y;\n        while(Left<Right&&Slope(Q[Right-1],Q[Right])>=Slope(Q[Right],i))Right--; //\u7ef4\u62a4\u961f\u5c3e\uff08\u7ef4\u62a4\u4e0b\u51f8\u5305\u6027\u8d28\uff09\n        Q[++Right]=i;\n    }\n    printf(\"%lld\\n\",f[cnt]);\n    return 0;\n}\n\n```",
        "postTime": 1486198925,
        "uid": 31877,
        "name": "BillYang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "## \u9898\u89e3\n\u4e0d\u96be\u60f3\u5230\u672c\u9898\u8981\u7528 $DP$\uff0c\u4f46\u662f\u5b83\u6076\u5fc3\u5728\u54ea\u91cc\u5c31\u662f\u5982\u4f55\u5904\u7406\u6700\u957f\u6210\u6700\u5bbd\u3002  \n\n\u5bf9\u4e8e\u4e24\u5757\u571f\u5730\u6709\u4ee5\u4e0b\u4e24\u79cd\u53ef\u80fd\uff1a\n$$\na_i \\le a_j  (and)b_i \\ge b_j\n$$\n$$\na_i \\le a_j  (and)b_i \\le b_j\n$$\n$a_i,a_j$ \u8868\u793a\u957f\uff0c $b_i,b_j$ \u8868\u793a\u5bbd\n\n(\u5176\u4f59\u60c5\u51b5\u53ef\u8f6c\u5316\u4e3a\u8fd9\u4e24\u79cd\u60c5\u51b5)\n\n\u6b64\u65f6\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0 $i$ \u8fd9\u5757\u571f\u5730\u53ef\u4ee5\u88ab $j$ \u5757\u571f\u5730\u5305\u88f9\uff0c\u6240\u4ee5 $i$ \u5757\u571f\u5730\u4ef7\u683c\u4e3a $0$ \u3002\u6240\u4ee5\u6211\u4eec\u5c06 $i$ \u5757\u571f\u5730\u89c6\u4e3a $j$ \u5757\u571f\u5730\u7684\u4e00\u90e8\u5206\u3002\n\n\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4e00\u6b21\u9884\u5904\u7406\uff0c\u5148\u5bf9\u957f\u8fdb\u884c\u7531\u5c0f\u5230\u5927\u7684\u6392\u5e8f\uff08\u5176\u5b9e\u5bbd\u4e5f\u53ef\u4ee5\uff09\uff0c\u7136\u540e\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u5bbd\u5355\u8c03\u9012\u51cf\u3002\n\n\u56e0\u4e3a\u957f\u5df2\u7ecf\u662f\u5355\u8c03\u9012\u589e\u7684\u4e86\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5c06\u8981\u8fdb\u6808\u7684\u5143\u7d20\uff0c\u5982\u5b83\u7684\u5bbd\u6bd4\u6808\u9876\u7684\u5bbd\u5927\uff0c\u5219\u8bf4\u660e\u6808\u9876\u7684\u571f\u5730\u4e00\u5b9a\u80fd\u88ab\u65b0\u52a0\u5165\u7684\u571f\u5730\u6240\u5305\u88f9\uff0c\u6240\u4ee5\u5c06\u6808\u9876\u5f39\u51fa\u3002  \n\n $CODE:$ \n ```cpp\n struct earth{\n\tint c,k;\n\tbool operator<(const earth &e) const{\n\t\tif (e.c==c) return e.k>k;//\u5c0f\u4e8e\u7b49\u4e8e\u4e5f\u53ef\u4ee5\u5305\u88f9\uff0c\u8fd9\u53e5\u8bdd\u5f88\u91cd\u8981\n\t\treturn e.c>c;\n\t}\n}e[N],b[N];\nvoid init() {\n\tsort(e+1,e+1+n);\n\tfor (int i=1;i<=n;i++) {\n\t\twhile(top&&e[s[top]].k<=e[i].k) top--;\n\t\ts[++top]=i;\n\t}\n\tfor (int i=1;i<=top;i++) {\n\t\tb[i]=e[s[i]];//\u5efa\u8bae\u91cd\u65b0\u50a8\u5b58\u4e00\u4e0b\u6808\u5185\u5143\u7d20\uff0c\u5426\u5219\u5728\u8fdb\u884cdp\u7684\u65f6\u5019\u6570\u7ec4\u4f1a\u5957\u5f88\u591a\u5c42\uff0c\u5bb9\u6613\u51fa\u9519\n\t} \n}\n ```\n\u5904\u7406\u5b8c\u540e\u5c31\u53ef\u4ee5\u8fdb\u884c $dp$ \u4e86\uff0c\u8fd9\u662f\u53ea\u7528\u5bf9\u6808\u5185\u5143\u7d20\u64cd\u4f5c\u3002\u65b9\u7a0b\u4e3a\uff1a\n$$\nf_i=f_j+b_{j+1}\u00d7a_i\n$$\n\u5176\u4e2d $(i > j)$ \uff0c $f_i$ \u8868\u793a\u9009\u5230\u7b2c $i$ \u5757\u571f\u5730\u6240\u82b1\u6700\u5c0f\u8d39\u7528\uff0c\u540c\u65f6\u5c06 $j+1$ \u5230 $i$ \u5757\u571f\u5730\u6253\u5305\u4e3a\u4e00\u7ec4\n\n\u56e0\u4e3a\u957f\u5df2\u7ecf\u6309\u7740\u6709\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5bbd\u6309\u7167\u7531\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u6240\u4ee5\u5728 $j+1$ \u5230 $i$ \u7684\u571f\u5730\u4e2d $i$ \u7684\u957f\u6700\u5927\uff0c $j+1$ \u7684\u5bbd\u6700\u5927\u3002\n\n\u518d\u5bf9\u65b9\u7a0b\u8fdb\u884c\u89c2\u5bdf\uff0c\u53d1\u73b0 $b_{j+1}\u00d7c_i$ \u7b26\u5408\u659c\u7387\u4f18\u5316\u7684\u6761\u4ef6\uff08\u5b89\u5229\u4e00\u4f4d\u5927\u4f6c\u8bb2\u659c\u7387\u4f18\u5316\u7684\u535a\u5ba2[\u8fb0\u661f\u51cc](https://www.cnblogs.com/Xing-Ling/p/11210179.html)\uff09\n\n$k=c_i,x=b_{j+1},y=f_j$ \uff0c\u6ce8\u610f\u8981\u4fdd\u8bc1 $x$ \u9012\u589e\u3002\u5316\u7b80\u5b8c\u540e\n$$\nf_j=-b_{j+1}\u00d7c_i+f_i\n$$\n\u53d1\u73b0\u56e0\u4e3a\u8981\u7ef4\u62a4\u6700\u5c0f\u503c\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u5305\u3002\n\n$AC \\kern 0.5em CODE:$\n```cpp\n#include<bits/stdc++.h>\n#define int long long//\u76f4\u63a5\u5f00long long\nusing namespace std;\nconst int N=50500;\ninline int read() {\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if (ch=='-') f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=(x<<1)+(x<<3)+(ch^48);ch=getchar();}\n\treturn x*f;\n}\nint n,s[N],que[N],top,f[N];\nstruct earth{\n\tint c,k;\n\tbool operator<(const earth &e) const{\n\t\tif (e.c==c) return e.k>k;//\u6ce8\u610f\n\t\treturn e.c>c;\n\t}\n}e[N],b[N];\nvoid init() {\n\tsort(e+1,e+1+n);\n\tfor (int i=1;i<=n;i++) {\n\t\twhile(top&&e[s[top]].k<=e[i].k) top--;\n\t\ts[++top]=i;\n\t}\n\tfor (int i=1;i<=top;i++) {\n\t\tb[i]=e[s[i]];\n\t} \n}\ninline int x(int i) {return b[i+1].k;}\ninline int y(int i) {return f[i];}\ninline long double slope(int i,int j) {return (long double)(y(i)-y(j))/(x(i)-x(j));}\nsigned main() {\n\tn=read();\n\tfor (int i=1;i<=n;i++) e[i].c=read(),e[i].k=read();\n\tinit();\n\tint h=1,t=0;que[++t]=0;\n\tfor (int i=1;i<=top;i++) {\n\t\twhile(h<t&&slope(que[h+1],que[h])>=-b[i].c) h++;//\u6211\u61d2\u5f97\u628abi\u5199\u6210\u8d1f\u7684\u4e86\uff0c\u6240\u4ee5\u4e24\u8fb9\u540c\u4e58\u4e86\u4e00\u4e2a-1\n\t\tf[i]=f[que[h]]+b[que[h]+1].k*b[i].c;\n\t\twhile(h<t&&slope(i,que[t])>=slope(que[t],que[t-1])) t--;//\u7ef4\u62a4\u4e0b\u51f8\u5305\n\t\tque[++t]=i;\n\t}\n\tprintf(\"%lld\\n\",f[top]);\n\treturn 0;\n}\n```",
        "postTime": 1611026922,
        "uid": 141958,
        "name": "\u6960\u67ab",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]Land Acquisition G\u3011"
    },
    {
        "content": "#### [\u8fd9\u91cc\u4f53\u9a8c\u66f4\u597d\u54e6](https://www.cnblogs.com/MYCui/p/13947754.html)\n\n\n#### \u9898\u610f\u7b80\u5316\uff1a\n\u7ed9\u5b9a\u8bb8\u591a\u4e2a\u4e8c\u5143\u5bf9\uff0c\u4f60\u53ef\u4ee5\u628a\u82e5\u5e72\u4e2a\u4e8c\u5143\u5bf9$(x,y)$\u5f52\u4e3a\u4e00\u7c7b\uff0c\u5bf9\u4e8e\u540c\u4e00\u7ec4\u7684\u6240\u6709\u4e8c\u5143\u5bf9\uff0c\u4f60\u9700\u8981\u4ed8\u51fa\u540c\u7ec4\u5185\u6700\u5927$x$\u4e58\u4ee5\u6700\u5927$y$\u7684\u8d39\u7528\uff0c\u6c42\u4e00\u79cd\u5206\u7ec4\u4f7f\u5f97\u8d39\u7528\u6700\u5c11\u3002\n\n#### \u601d\u8def:\n\n\u5148\u8d2a\u5fc3\u4e00\u4e0b\uff0c\u6309\u7167$x$\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c$x$\u76f8\u540c\u7684\u5c31\u6309\u7167$y$\u7684\u5347\u5e8f\u6392\u5e8f\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u4f1a\u5f97\u5230\u4e00\u4e2a$x$\u5355\u8c03\u4e0a\u5347\u7684\u4e8c\u5143\u5bf9\u5e8f\u5217\u3002\n\n\u5018\u82e5\u4e00\u4e2a\u70b9$i$\u5b83\u7684$x$\u5c0f\u4e8e\u7b49\u4e8e\u70b9$j$\u7684$x$\u5e76\u4e14\u5b83\u7684$y$\u5c0f\u4e8e\u7b49\u4e8e\u70b9$j$\u7684$y$\uff0c\u90a3\u4e48\u5f88\u663e\u7136\uff0c\u8fd9\u4e2a\u70b9$i$\u5c31\u5e9f\u4e86\uff0c\u56e0\u4e3a\u628a$i$\u548c$j$\u653e\u4e00\u7ec4\u5373\u53ef\u4f7f\u5f97$i$\u5b8c\u5168\u5931\u53bb\u5bf9\u7b54\u6848\u8d21\u732e\u7684\u80fd\u529b///\n\n\u628a\u90a3\u4e00\u4e9b\u201c\u5e9f\u6389\u201d\u7684\u70b9\u5168\u90e8\u5220\u6389\uff0c\u6211\u4eec\u5f97\u5230\u7684\u5c31\u4f1a\u662f\u4e00\u4e2a$x$\u5355\u8c03\u4e0a\u5347\uff0c$y$\u5355\u8c03\u4e0b\u964d\u7684\u4e8c\u5143\u7ec4\u5e8f\u5217\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u7684$DP$\u5c31\u51fa\u6765\u4e86\n\n\u72b6\u6001\u8bbe\u7acb:$dp[i]$\u8868\u793a\u628a\u524d$i$\u4e2a\u4e8c\u5143\u7ec4\u5206\u597d\u7ec4\u9700\u8981\u7684\u6700\u5c0f\u82b1\u8d39\u3002\n\n\u72b6\u6001\u8f6c\u79fb\uff1a$dp[i] = min(dp[i],dp[j] + x[i] * y[j + 1])(j < i)$\n\n\u56e0\u4e3a\u6309\u7167\u524d\u9762\u7684\u6392\u5e8f\u4ee5\u53ca\u5220\u9664\u5143\u7d20\uff0c\u5e8f\u5217\u53d8\u4e3a\u4e86$x$\u5355\u8c03\u4e0a\u5347\uff0c$y$\u5355\u8c03\u4e0b\u964d\u7684\u4e8c\u5143\u7ec4\u5e8f\u5217\uff0c\u6240\u4ee5\u76f4\u63a5\u6309\u7167\u8fd9\u4e2a\u65b9\u5f0f\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u8003\u8651\u5982\u4f55\u4f7f\u7528\u5927\u6740\u5668\uff1a\u659c\u7387\u4f18\u5316\u3002\n\n\u8fd9\u4e2a\u67ff\u5b50\u90fd\u4e0d\u7528\u62c6\u4e86\uff0c\u76f4\u63a5\u5c31\u5df2\u7ecf\u5e2e\u6211\u5b8c\u6210\u4e00\u534a\u7684\u5de5\u7a0b\u4e86\u3002\u3002\n\n\u7136\u540e\u601d\u8003\uff0c\u5047\u5982\u51b3\u7b56\u70b9$k$\u4f18\u4e8e\u51b3\u7b56\u70b9$j$\uff0c$k$\u4ee5\u53ca$j$\u7684\u5173\u7cfb\u662f\u600e\u4e48\u6837\u7684\uff1f\n\n\u56e0\u4e3a\u51b3\u7b56$k$\u4f18\u4e0e\u51b3\u7b56$j$\uff0c\u6240\u4ee5\uff1a\n\n$dp[k] + x[i] * y[k + 1] < dp[j] + x[i] * y[j + 1]$\n\n\u63a5\u7740\u79fb\u9879\u3002\n\n$dp[k] - dp[j] < x[i] * (y[j + 1] - y[k + 1])$\n\n$\\frac{dp[k] - dp[j]}{y[j + 1]-y[k + 1]} < x[i]$\n\n$\\frac{dp[k] - dp[j]}{y[k + 1]-y[j + 1]} > -x[i]$\n(\u56e0\u4e3a\u4f60\u4f1a\u53d1\u73b0\u524d\u9762\u7684\u5f0f\u5b50\u7684\u7ed3\u679c\u662f\u4e2a\u8d1f\u6570)\n\n\u6c42\u659c\u7387\u7684\u516c\u5f0f:$k = \\frac{\u25b3y}{\u25b3x}$\n\n\u90a3\u4e48\u60f3\u8c61\u73b0\u5728\u5e73\u9762\u4e0a\u6709\u4e24\u4e2a\u70b9:$(y[k+1],dp[k])$ , $(y[j + 1],dp[j])$\n\n\u8fd9\u4e24\u4e2a\u70b9\u8fde\u6210\u7684\u76f4\u7ebf\u5982\u679c\u659c\u7387\u5927\u4e8e$x[i]$\uff0c\u90a3\u4e48$k$\u5c31\u8981\u6bd4$j$\u66f4\u4f18\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u659c\u7387\u4f18\u5316\u4e86\uff0c\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u4e00\u4e2a\u4e0a\u51f8\u5305\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int MAXN = 50005;\n\nint n,N = 0;\nint dp[MAXN],Q[MAXN];\n\nstruct Node {\n\tint x,y;\n} T[MAXN],New[MAXN];\n\nint cmp(Node A, Node B)\n{\n\tif(A.x != B.x)return A.x < B.x;\n\telse return A.y < B.y;\n}\n\ndouble sploe(int a,int b)\n{\n\treturn (double)(dp[b] - dp[a]) / (double)(T[b + 1].y - T[a + 1].y);\n}\n\nsigned main()\n{\n\tcin >> n;\n\tfor(int i = 1 ; i <= n ; i ++)\n\t\tcin >> T[i].x >> T[i].y;\n\tsort(T + 1 , T + 1 + n , cmp);\n\tfor(int i = 1 ; i <= n ; i ++)\n\t{\n\t\tif(T[i].y < New[N].y)N ++ , New[N] = T[i];\n\t\telse \n\t\t{\n\t\t\twhile(N && New[N].y <= T[i].y)N --;\n\t\t\tN ++;\n\t\t\tNew[N] = T[i];\n\t\t}\n\t}\n    \n\tn = N;\n\tfor(int i = 1 ; i <= n ; i ++)T[i] = New[i];\n\tint tail = 1 , head = 1;\n\tQ[1] = 0;\n\tfor(int i = 1 ; i <= n ; i ++)\n\t{\n\t\twhile(head < tail && sploe(Q[head],Q[head + 1]) >= (double) -T[i].x)head ++;//\u53cd\u4e00\u4e0b\u7b26\u53f7\n\t\tdp[i] = dp[Q[head]] + T[i].x * T[Q[head] + 1].y;\n\t\twhile(head < tail && sploe(Q[tail - 1],Q[tail]) >= sploe(Q[tail],i))tail --;\n\t\ttail ++ , Q[tail] = i;\n\t}\n\tcout << dp[n] << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1605096706,
        "uid": 67817,
        "name": "MuYC",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]Land Acquisition G\u3011"
    },
    {
        "content": "\u659c\u7387\u4f18\u5316DP\u5165\u95e8\u9898\u3002  \n\n\u89c2\u5bdf\u9898\u76ee\u53d1\u73b0\u5982\u679c\u6709\u4e24\u5757\u571f\u5730 $i, j$ \u6ee1\u8db3 $xi \u2264 xj , yi \u2264 yj$\uff0c$i$ \u7684\u5f71\u54cd\u5c31\u53ef\u4ee5\u4e0d\u7528\u8003\u8651\u3002  \n\u56e0\u6b64\u628a\u571f\u5730\u6309\u957f\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u5219\u5b83\u4eec\u7684\u5bbd\u5ea6\u9012\u51cf\u3002\u53ef\u4ee5\u53d1\u73b0\u6bcf\u6b21\u8d2d\u4e70\u7684\u571f\u5730\u4e00\n\u5b9a\u662f\u8fde\u7eed\u4e00\u6bb5\u3002  \n\u6211\u4eec\u8bbe $f(i)$ \u8868\u793a\u4e70\u524d $i$ \u5757\u9700\u8981\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u5219 $f(i) = min \\{f(j) + x_i * y_{j + 1}\\}$\uff0c$f(j)= -x_i * y_{j+1}+f(i)$\u3002  \n\u56e0\u6b64\u70b9\u662f $(-y_{j+1}, f(j))$\uff0c\u659c\u7387\u662f $x_i$\u3002  \n\n\u659c\u7387\u4f18\u5316\uff0c\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u5305\u5373\u53ef\u3002  \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ninline int read()\n{\n\tint x=0; int f=1; char ch=getchar();\n\twhile(!isdigit(ch)) {if(ch=='-')f=-1; ch=getchar();}\n\twhile(isdigit(ch)) {x=x*10+ch-'0'; ch=getchar();}\n\treturn x*f;\n}\n\nconst int MAXN = 100005;\nstruct data {long long x,y;} a[MAXN];\nlong long x[MAXN],y[MAXN],f[MAXN],q[MAXN];\nint n,tot;\n\ninline bool cmp(data a,data b)\n{return a.x==b.x?a.y<b.y:a.x<b.x;}\n\ninline double slop(int a,int b)\n{return (double)(f[b]-f[a])/(y[a+1]-y[b+1]);}\n\nint main(int argc, char const *argv[])\n{\n\tn=read();\n\tfor(int i=1; i<=n; i++)\n\t\ta[i].x=read(),a[i].y=read();\n\tsort(a+1,a+n+1,cmp);\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\twhile(tot && a[i].y>=y[tot]) tot--;\n\t\tx[++tot]=a[i].x; y[tot]=a[i].y;\n\t}\n\tint l=0,r=0;\n\tfor(int i=1; i<=tot; i++)\n\t{\n\t\twhile(l<r && slop(q[l],q[l+1])<x[i]) l++;\n\t\tint t=q[l]; f[i]=f[t]+y[t+1]*x[i];\n\t\twhile(l<r && slop(q[r],i)<slop(q[r-1],q[r])) r--;\n\t\tq[++r]=i;\n\t}\n\tprintf(\"%lld\",f[tot]);\n\treturn 0;\n}\n```",
        "postTime": 1576660609,
        "uid": 107735,
        "name": "shiroi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "# \u9898\u76ee\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[\u70b9\u8fd9\u91cc](https://www.luogu.org/problem/P2900)\u770b\u9898\u76ee\u3002\n# \u5206\u6790\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u6211\u4eec\u628a\u6bcf\u4e00\u5757\u571f\u5730\u60f3\u6210\u4e00\u4e2a\u77e9\u5f62\uff0c\u7136\u540e\u628a\u77e9\u5f62\u7684\u5de6\u4e0b\u89d2\u4e0e\u5750\u6807\u7cfb\u7684\u539f\u70b9\u5bf9\u9f50\uff0c\u8fd9\u6837\u4e00\u5757\u571f\u5730\u5c31\u4e0e\u5750\u6807\u7cfb\u4e2d\u4e00\u4e2a$(0,0,H,W)$\u7684\u77e9\u5f62\u5bf9\u5e94\u3002  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u7136\u540e\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u77e9\u5f62$i$\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u77e9\u5f62$j$\uff0c\u6ee1\u8db3$H_i\\leq H_j$\u5e76\u4e14$W_i\\leq W_j$\uff0c\u5219\u663e\u7136\u6211\u4eec\u53ef\u4ee5\u5c06$i$\u548c$j$\u5408\u5728\u4e00\u7ec4\u4e70\uff0c\u5374\u53ea\u82b1\u4e86\u4e70$j$\u7684\u94b1\u3002\u6b64\u65f6\u7b2c$i$\u4e2a\u77e9\u5f62\u5c31\u76f8\u5f53\u4e8e\u514d\u8d39\u8d2d\u4e70\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u5355\u8c03\u6808\u5c06\u539f\u77e9\u5f62\u96c6\u5408\u7b80\u5316\u4e3a\u65e0\u6cd5\u88ab\u514d\u8d39\u8d2d\u4e70\u7684\u77e9\u5f62\u96c6\u5408\u3002  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5728\u8fdb\u884c\u4e0b\u9762\u7684\u6b65\u9aa4\u4e4b\u524d\uff0c\u6211\u4eec\u628a\u96c6\u5408\u6392\u5e8f\uff0c\u4f7f\u5f97$\\forall i,H_i>H_{i+1}\\ and\\ W_i< W_{i+1}$  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u7136\u540e\u5f00\u59cb$DP$\uff1a  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$DP(i)$\uff1a\u5c06\u524d$i$\u4e2a\u65e0\u6cd5\u514d\u8d39\u8d2d\u4e70\u7684\u77e9\u5f62\u5168\u90e8\u4e70\u4e0b\u7684\u6700\u5c0f\u82b1\u8d39\u3002  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5219\u6709$DP(i)=\\min_{0\\leq j<i}\\{DP(j)+H_{j+1}W_i\\}$  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5230\u6b64\uff0c\u5df2\u7ecf\u53ef\u4ee5~~\u6c34~~\u901a\u8fc7[P4959 [COCI2017-2018#6] Cover](https://www.luogu.org/problem/P4959)\u4e00\u9898\u4e86\u3002  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u4e0d\u8fc7\u5bf9\u4e8e\u6b64\u9898\u7684\u6570\u636e\u8303\u56f4\uff0c$O(n^2)$\u7684\u7b97\u6cd5\u8fd8\u4e0d\u8db3\u4ee5\u8fc7\u6389\u5b83\u3002\u6240\u4ee5\u6211\u4eec\u8003\u8651\u4f18\u5316\u2014\u2014\u659c\u7387\u4f18\u5316\uff1a  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5f53$j<k$\uff0c\u6709$H_j>H_k$\uff0c$W_j<W_k$\uff0c\u5047\u5982$j$\u6bd4$k$\u4f18\uff0c\u5219\u6709\uff1a  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$DP(j)+H_{j+1}W_i<DP(k)+H_{k+1}W_i$  \n&nbsp;&nbsp;$\\Rightarrow DP(j)-DP(k)<W_i(H_{k+1}-H_{j+1})$  \n&nbsp;&nbsp;$\\Rightarrow \\frac{DP(j)-DP(k)}{H_{j+1}-H_{k+1}}<-W_i$  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u611f\u6027\u7406\u89e3\u5c31\u662f\uff0c\u5982\u679c\u5f53\u524d\u7684\u4e24\u70b9\u4e4b\u95f4\u7684\u659c\u7387$<-W_i$\uff0c\u5219\u9760\u524d\u7684\u70b9\u66f4\u4f18\uff0c\u5426\u5219\u5c31\u662f\u9760\u540e\u7684\u70b9\u66f4\u4f18\u3002  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u7136\u540e\u6211\u4eec\u53d1\u73b0\uff0c\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u7684\u662f\u4e00\u4e2a\u4e0a\u51f8\u5305\u3002  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u7136\u540e\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u8fd9\u4e2a\u4e0a\u51f8\u5305\u5e8f\u5217\u7528\u4e8e\u8f6c\u79fb\u5373\u53ef\u3002\n# \u4ee3\u7801\n```cpp\n#include <cstdio>\n#include <algorithm>\n\ntypedef long long LL;\n\nconst int MAXN = 50005;\n\ntemplate<typename _T>\nvoid read( _T &x )\n{\n    x = 0;char s = getchar();int f = 1;\n    while( s > '9' || s < '0' ){if( s == '-' ) f = -1; s = getchar();}\n    while( s >= '0' && s <= '9' ){x = ( x << 3 ) + ( x << 1 ) + ( s - '0' ), s = getchar();}\n    x *= f;\n}\n\ntemplate<typename _T>\nvoid write( _T x )\n{\n    if( x < 0 ){ putchar( '-' ); x = ( ~ x ) + 1; }\n    if( 9 < x ){ write( x / 10 ); }\n    putchar( x % 10 + '0' );\n}\n\nstruct point\n{\n\tint x, y;\n\tpoint(){}\n\tpoint( const int X, const int Y )\n\t{\n\t\tx = X, y = Y;\n\t}\n\tbool operator < ( const point & other ) const\n\t{\n\t\treturn x < other.x || ( x == other.x && ( y < other.y ) );\n\t}\n\tbool operator > ( const point & other ) const\n\t{\n\t\treturn x >= other.x && y >= other.y;\n\t}\n}p[MAXN], np[MAXN];\n\nstruct vector\n{\n\tLL x, y;\n\tvector(){}\n\tvector( const LL X, const LL Y )\n\t{\n\t\tx = X, y = Y;\n\t}\n\tLL mul( const vector & other ) const\n\t{\n\t\treturn x * other.y - y * other.x;\n\t}\n\tbool operator < ( const vector & other ) const\n\t{\n\t\treturn mul( other ) > 0;\n\t}\n\tbool operator > ( const vector & other ) const\n\t{\n\t\treturn mul( other ) < 0;\n\t}\n\tbool operator >= ( const vector & other ) const\n\t{\n\t\treturn mul( other ) >= 0;\n\t}\n\tbool operator <= ( const vector & other ) const\n\t{\n\t\treturn mul( other ) <= 0;\n\t}\n};\n\nLL DP[MAXN];\nint deq[MAXN], h, t;\nint sta[MAXN], top;\nint N, cnt;\n\nLL X( const int indx )\n{\n\treturn np[indx + 1].y;\n}\n\nLL Y( const int indx )\n{\n\treturn DP[indx];\n}\n\nLL getDP( const int i, const int indx )\n{\n\treturn DP[indx] + 1ll * np[indx + 1].y * np[i].x;\n}\n\nint main()\n{\n\tread( N );\n\tfor( int i = 1 ; i <= N ; i ++ )\n\t{\n\t\tread( p[i].y ), read( p[i].x );\n\t}\n\tstd :: sort( p + 1, p + 1 + N );\n\ttop = 0;\n\tfor( int i = 1 ; i <= N ; i ++ )\n\t{\n\t\twhile( top && p[i] > p[sta[top]] ) \n\t\t\ttop --;\n\t\tsta[++top] = i;\n\t}\n\tcnt = top;\n\twhile( top ) np[top] = p[sta[top]], top--;\n\tDP[0] = 0;\n\tt = 0, h = 1;\n\tdeq[++t] = 0;\n\tfor( int i = 1 ; i <= cnt ; i ++ )\n\t{\n\t\twhile( h < t && Y( deq[h] ) - Y( deq[h + 1] ) >= -1ll * np[i].x * ( X( deq[h ] ) - X( deq[h + 1] ) ) ) \n\t\t\th ++;\n\t\tDP[i] = getDP( i, deq[h] );\n\t\twhile( h < t && vector( X( i ) - X( deq[t] ), Y( i ) - Y( deq[t] ) ) <= vector( X( deq[t] ) - X( deq[t - 1] ), Y( deq[t] ) - Y( deq[t - 1] ) ) ) \n\t\t\tt --;\n\t\tdeq[++t] = i;\n\t}\n\twrite( DP[cnt] ), putchar( '\\n' );\n\treturn 0;\n}\n```\n",
        "postTime": 1566736763,
        "uid": 123809,
        "name": "crashed",
        "ccfLevel": 0,
        "title": "[LG P2900][SP15086][USACO08MAR]Land Acquisition"
    },
    {
        "content": "\u5982\u679c\u4e00\u4e2a\u571f\u5730\u7684\u957f\u5bbd\u5206\u522b\u5c0f\u4e8e\u53e6\u5916\u4e00\u4e2a\uff0c\u90a3\u4e48\u8fd9\u4e2a\u662f\u6ca1\u7528\u7684\n\n\u6309\u7167\u957f\u5ea6\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\u4ece\u5c0f\u5230\u5927\uff0c\u5bbd\u5ea6\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u4ece\u5927\u5230\u5c0f\u6392\u4e2a\u5e8f\n\n\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u5904\u7406\u51fa\u8fd9\u6837\u4e00\u4e9b\u571f\u5730\uff1a\u957f\u5ea6\u9012\u589e\uff0c\u5bbd\u5ea6\u9012\u51cf\n\n\u7136\u540e\u603b\u662f\u9009\u53d6\u4e00\u6bb5\u8fde\u7eed\u7684\u571f\u5730\u8fdb\u884c\u8d2d\u4e70\uff0c\u56e0\u4e3a\u5982\u679c\u4f60\u9009\u4e86\u4e24\u4e2a\u571f\u5730\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u571f\u5730\u4e2d\u95f4\u7684\u571f\u5730\u53ef\u4ee5\u4e0d\u82b1\u8d39\u4ee3\u4ef7\u7684\u987a\u5e26\u8d2d\u4e70\n\n\u7136\u540e\u5c31\u53ef\u4ee5dp\u4e86\n\n\u4ee4$l_i,w_i$\u8868\u793a\u957f\u5bbd\uff0c$dp_i$\u8868\u793a\u9009\u5230\u7b2ci\u4e2a\u7684\u6700\u5c0f\u4ee3\u4ef7\n\n\u66b4\u529b\u8f6c\u79fb\u65b9\u7a0b$dp_i=min(dp_j+w_{j+1}*l_i)$\n\n\u5957\u8def\u659c\u7387\u4f18\u5316\uff0c\u82e5\u4e24\u4e2a\u51b3\u7b56$x,y(x<y)$\uff0cy\u66f4\u4f18\u6ee1\u8db3\n$dp_x+w_{x+1}*l_i>=dp_y+w_{y+1}*l_i$\n\n\u6574\u7406\u5f97$\\frac{dp_x-dp_y}{w_{y+1}-w_{x+1}}<=l_i$\n\n\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u659c\u7387\u9012\u589e\u7684\u4e0b\u51f8\u58f3\u5373\u53ef\n\nCode:\n\n```cpp\n#include <bits/stdc++.h>\n#define maxn 50010\n#define LL long long\nusing namespace std;\nstruct node{\n\tLL l, w;\n}a[maxn];\nint n, top, q[maxn];\nLL dp[maxn];\n\ninline int read(){\n\tint s = 0, w = 1;\n\tchar c = getchar();\n\tfor (; !isdigit(c); c = getchar()) if (c == '-') w = -1;\n\tfor (; isdigit(c); c = getchar()) s = (s << 1) + (s << 3) + (c ^ 48);\n\treturn s * w;\n}\n\nbool cmp(node x, node y){ return x.l == y.l ? x.w > y.w : x.l < y.l; }\ndouble slope(int x, int y){ return 1.0 * (dp[x] - dp[y]) / (a[y + 1].w - a[x + 1].w); }\n\nint main(){\n\tn = read();\n\tfor (int i = 1; i <= n; ++i) a[i].l = read(), a[i].w = read();\n\tsort(a + 1, a + 1 + n, cmp);\n\tfor (int i = 1; i <= n; ++i){\n\t\twhile (top && a[top].w <= a[i].w) --top;\n\t\ta[++top] = a[i];\n\t}\n\tn = top;\n\tint h = 0, t = 0;\n\tfor (int i = 1; i <= n; ++i){\n\t\twhile (h < t && slope(q[h], q[h + 1]) <= a[i].l) ++h;\n\t\tdp[i] = dp[q[h]] + a[i].l * a[q[h] + 1].w;\n\t\twhile (h < t && slope(q[t - 1], q[t]) >= slope(q[t], i)) --t;\n\t\tq[++t] = i;\n\t}\n\tprintf(\"%lld\\n\", dp[n]);\n\treturn 0;\n}\n```\n",
        "postTime": 1565423677,
        "uid": 51719,
        "name": "ModestCoder_",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "\u8003\u8651\u5148\u5c06\u6570\u7ec4\u6392\u5e8f\u5e76\u6253\u5305\uff0c\u5c06\u6240\u6709\u80fd\u4e00\u8d77\u4e70\u7684\u571f\u5730\u6253\u5305\u6210\u4e00\u4efd\n\n\u7528$x$\u8868\u793a\u957f\uff0c$y$\u8868\u793a\u5bbd\uff0c\u53ef\u5f97\u8f6c\u79fb\u65b9\u7a0b\u5982\u4e0b\uff1a\n\n$$f[i]=\\sum_{j=1}^{i-1}min(f[j]+x[j+1]\\times y[i])$$\n\n\u663e\u7136\uff0c\u8fd9\u4e2a\u8f6c\u79fb\u662f$n^2$\u7684\uff0c\u4f1a\u8d85\u65f6\uff0c\u8003\u8651\u659c\u7387\u4f18\u5316\n\n\u5047\u8bbe\u51b3\u7b56$j$\u6bd4$k$\u66f4\u4f18\uff0c\u5f53\u4e14\u4ec5\u5f53\uff1a\n\n$$f[j]+x[j+1]\\times y[i]<f[k]+x[k+1]\\times y[i]$$\n\n\u5c06\u542b\u6709$i$\u7684\u9879\u79fb\u5230\u4e00\u8fb9\uff0c\u5176\u4ed6\u7684\u79fb\u5230\u53e6\u4e00\u8fb9\uff1a\n\n$$(x[j+1]-x[k+1])\\times y[i]<f[k]-f[j]$$\n\n\u4ee4\u5de6\u5f0f\u53ea\u5269\u4e0b\u4e0e$i$\u6709\u5173\u7684\u5f0f\u5b50\uff1a\n\n$$y[i]<\\frac{f[k]-f[j]}{x[j+1]-x[k+1]}$$\n\n\u4e8e\u662f\u5c31$get$\u4e86\u5982\u4f55\u8ba1\u7b97\u659c\u7387\n\n\u8003\u8651\u539f\u6765\u7684\u8f6c\u79fb\u65b9\u7a0b$f[j]+x[j+1]\\times y[i]$\uff0c\u8bbe\u76f4\u7ebf\u65b9\u7a0b\u4e3a\uff1a\n\n$$y=kx+b$$\n\n\u53ef\u8bbe$x=y[i]$\uff0c\u5f97$k=x[j+1]$\uff0c$b=f[j]$\uff0c\u659c\u7387\u4e3a\u6b63\uff0c\u56e0\u6b64\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u58f3\u5373\u53ef\n\n\u89c1\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nstruct Node\n{\n\tll x,y;\n\tfriend bool operator < (const Node &x,const Node &y)\n\t{\n\t\treturn x.x^y.x?x.x>y.x:x.y>y.y;\n\t}\n}a[50005],t[50005];\nint n,tot,q[50005];\nll f[50005];\ndouble Slope(int j,int k)\n{\n\treturn (double)(f[k]-f[j])/(double)(a[j+1].x-a[k+1].x);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++) scanf(\"%d %d\",&t[i].x,&t[i].y);\n\tsort(t+1,t+n+1);\n\tfor(int i=1;i<=n;i++) if(t[i].y>a[tot].y) a[++tot]=t[i];\n\tint head=1,tail=1;\n\tfor(int i=1;i<=tot;i++)\n\t{\n\t\twhile(head<tail && Slope(q[head],q[head+1])<=a[i].y) head++;\n\t\tf[i]=f[q[head]]+a[i].y*a[q[head]+1].x;\n\t\twhile(head<tail && Slope(q[tail-1],q[tail])>=Slope(q[tail],i)) tail--;\n\t\tq[++tail]=i;\n\t}\n\tprintf(\"%lld\\n\",f[tot]);\n\treturn 0;\n}\n```",
        "postTime": 1545181083,
        "uid": 23243,
        "name": "VenusM1nT",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "## \u9898\u76ee\u603b\u7ed3\n\n\u7ed9\u5b9aN\u4e2a\u77e9\u5f62\uff0c\u8d2d\u4e70\u6bcf\u4e2a\u77e9\u5f62\u7684\u4ee3\u4ef7\u662f\u4ed6\u4eec\u7684\u9762\u79ef\uff1b\u6709\u4e00\u79cd\u5e76\u8d2d\u65b9\u6848\uff0c\u5e76\u8d2d\u7684\u4ef7\u683c\u4e3a\u8fd9\u4e9b\u571f\u5730\u4e2d \u6700\u5927\u7684\u957f x \u6700\u5927\u7684\u5bbd\uff1b\n\n## \u6570\u636e\u8303\u56f4\n\n1 <= N <= 50,000\n\n## \u89e3\u9898\u601d\u8def\n\n\u4e00\u9053\u659c\u7387\u4f18\u5316DP\uff1b\n\n\u76f4\u63a5\u5217\u65b9\u7a0b\u53d1\u73b0\u8f83\u56f0\u96be\uff1b\n\n\u8003\u8651\u6bcf\u4e2a\u77e9\u5f62\uff0c\u6211\u4eec\u53d1\u73b0\u6709\u4e9b\u77e9\u5f62X\u662f\u6ca1\u6709\u4ef7\u503c\u7684\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728\u67d0\u4e2a\u77e9\u5f62Y\uff0cY\u7684\u957f\u5bbd\u5747\u5927\u4e8eX\u7684\uff1b\n\n\u6211\u4eec\u9996\u5148\u8981\u5254\u9664\u4ed6\u4eec\uff1b\u65b9\u6cd5\u662f\u6392\u5e8f\uff1b\n\n\u4ee5L\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0cW\u4e3a\u7b2c\u4e8c\uff1b\n\n\u7136\u540e\u7ef4\u62a4\u4e00\u4e2a\u6808\uff0c\u5c06\u6392\u5e8f\u540e\u7684\u571f\u5730\u4e00\u4e2a\u4e00\u4e2a\u52a0\u5165\uff0c\u6bcf\u6b21\u52a0\u5165\u4e4b\u524d\uff0c\u5148\u628a\u5f53\u524d\u6808\u4e2d\u5bbd\u5c0f\u4e8e\u7b49\u4e8e\u5b83\u7684\u571f\u5730\u5168\u90e8\u5220\u9664\uff08\u56e0\u4e3a\u8fd9\u4e9b\u571f\u5730\u957f\u80af\u5b9a\u5c0f\u4e8e\u7b49\u4e8e\u5b83\uff09\uff0c\u518d\u52a0\u5165\u5b83\u3002\u6700\u540e\u7559\u5728\u6808\u91cc\u7684\u571f\u5730\u5c31\u662f\u6709\u5b58\u5728\u5fc5\u8981\u7684\u571f\u5730\u3002\n\n\u7136\u540e\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u6b64\u65f6\u7684\u5e8f\u5217\u4e2d\uff0cL\u9012\u589e\uff0cW\u9012\u51cf\uff08\u6bd4\u5982L\u5c0f\u7684\uff0c\u5047\u5982W\u4e5f\u5c0f\uff0c\u90a3\u4e48\u5b83\u5c31\u88ab\u5220\u4e86\uff09\n\n\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a\n\n$f[i] = f[j = q.front()] + land[i].l * land[j + 1].w;$\n\n\u659c\u7387\u4f18\u5316\u4e71\u641e\u4e00\u6ce2\n\n## \u6613\u9519\u8bef\u533a\n\n\u6b64\u9898\u7684\u6392\u5e8f\u5f88\u6709\u610f\u601d\n\n\u60f3\u51fa\u6765\u5c31OK\n\n## \u4ee3\u7801\u5c55\u793a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<list>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<deque>\nusing namespace std;\n#define ll long long\n#define ull unsigned long long\n#define inf 0x3f3f3f3f\n#define ri register int\n#define il inline\n#define fi first\n#define se second\n#define mp make_pair\n#define pi pair<int,int>\n#define mem0(x) memset((x),0,sizeof (x))\n#define mem1(x) memset((x),0x3f,sizeof (x))\n#define int ll\nil char gc() {\n    static const int BS = 1 << 22;\n    static unsigned char buf[BS], *st, *ed;\n    if (st == ed) ed = buf + fread(st = buf, 1, BS, stdin);\n    return st == ed ? EOF : *st++;\n}\n#define gc getchar\ntemplate<class T>void in(T &x)\n{\n    x = 0; bool f = 0; char c = gc();\n    while (c < '0' || c > '9') {if (c == '-') f = 1; c = gc();}\n    while (isdigit(c)) {x = (x << 3) + (x << 1) + (c ^ 48); c = gc();}\n    if (f) x = -x;\n}\n#undef gc\nvoid out(int x) {\n    if (x < 0) putchar('-'), x = -x;\n    if (x > 9) out(x / 10);\n    putchar(x % 10 + '0');\n}\n#define N 50010\n#define int ll\n#define X(i) (land[i+1].w)\n#define Y(i) (f[i])\n#define K(i) (-land[i].l)\n#define slope(i,j) ((double)(Y(i)-Y(j))/(double)(X(i)-X(j)))\nint n;\nstruct Node {\n    int l, w;\n} a[N], land[N];\ndeque<int>q;\nint top;\nint f[N];\nbool cmp(const Node &a, const Node &b) {\n    if (a.l == b.l) return a.w < b.w;\n    return a.l < b.l;\n}\nsigned main() {\n    in(n);\n    for (ri i = 1; i <= n; ++i) {\n        in(a[i].l), in(a[i].w);\n    }\n    sort(a + 1, a + 1 + n, cmp);\n    for (ri i = 1; i <= n; ++i) {\n        while (top && land[top].w <= a[i].w) --top;\n        land[++top] = a[i];\n    }\n    q.push_front(0);\n    for (ri i = 1, j; i <= top; ++i) {\n        while (q.size() > 1 && slope(*(q.begin()), *(q.begin() + 1)) > K(i))\n            q.pop_front();\n        f[i] = f[j = q.front()] + land[i].l * land[j + 1].w;\n        while (q.size() > 1 && slope(*(q.end() - 1), *(q.end() - 2)) < slope(*(q.end() - 2), i))\n            q.pop_back();\n        q.push_back(i);\n    }\n    printf(\"%lld\", f[top]);\n    return 0;\n}\n```",
        "postTime": 1528119740,
        "uid": 58302,
        "name": "i207M",
        "ccfLevel": 0,
        "title": "\u659c\u7387\u4f18\u5316-\u571f\u5730\u5f81\u7528-P2900-\u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "#### Solution\n\u3000\u3000\u53d1\u73b0\u5982\u679c\u4e24\u5757\u571f\u5730$a,b$\u6ee1\u8db3$w_a\\le w_b$\u5e76\u4e14$h_a\\le h_b$.\u90a3\u4e48a\u5b8c\u5168\u662f\u4e0d\u9700\u8981\u7684\u5355\u72ec\u8d2d\u4e70\u7684.\u6240\u4ee5\u5bf9\u4e8e\u8fd9\u6837\u7684$a$\u5b8c\u5168\u53ef\u4ee5\u53bb\u6389\u56e0\u4e3a\u4e0d\u4f1a\u5bf9\u7b54\u6848\u4ea7\u751f\u5f71\u54cd.\n\n\u3000\u3000\u8003\u8651\u600e\u4e48\u53bb\u6389\u8fd9\u4e9b$a$, \u6211\u4eec\u53ef\u4ee5\u8fd9\u4e48\u505a, \u5c06\u6240\u6709\u571f\u5730\u6309\u957f\u5ea6\u6392\u5e8f, \u82e5\u6709\u4e00\u571f\u5730$i$\u6ee1\u8db3$w_i\\le w_{i-1}$, \u56e0\u4e3a\u6309\u957f\u5ea6\u6392\u5e8f\u540e$h_i\\le h_{i-1}$.\n\n\u3000\u3000\u5c06\u5269\u4e0b\u7684\u6309\u957f\u5ea6\u6216\u5bbd\u5ea6\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u4f1a\u53d1\u73b0\u4e00\u4ef6\u6709\u8da3\u7684\u4e8b\u60c5.   \n![\u4e0d\u80fd\u4e0a\u4f20svg\u5dee\u8bc4](https://cdn.luogu.com.cn/upload/pic/18939.png)\n\u53d1\u73b0\u6211\u4eec\u8d2d\u4e70\u6240\u6709\u571f\u5730\u9700\u8981\u505a\u7684\u5c31\u662f\u5c06\u6392\u5e8f\u540e\u76f8\u90bb\u7684\u51e0\u5757\u571f\u5730\u4e00\u8d77\u8d2d\u4e70.\u6240\u4ee5\u5c31\u53ef\u4ee5\u5217\u51fa\u8fd9\u6837\u4e00\u4e2a\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b.\n$$f(i)=\\min f(j)+h_{j+1}\\cdot w_{i},j<i$$\n\u7136\u800c$n$\u592a\u5927\u4ee5\u81f3\u4e8e\u6211\u4eec\u5c31\u53ea\u80fd\u5f00\u5fc3\u7684**\u659c\u7387\u4f18\u5316**\u4e86.\n\n$$f(j)+h_{j+1}w_i>f(k)+h_{k+1}w_i$$\n$$\\Rightarrow w_i>\\frac{f(k)-f(j)}{h_{j+1}-h_{k+1}}$$\n\n\u7136\u540e\u5f00\u5fc3\u7684\u5199\u5b8c\u4ee3\u7801\u5c31\u5f00\u5fc3\u7684\u901a\u8fc7\u4e86\u8fd9\u9053\u9898.\u6240\u4ee5\u8fd9\u8fd8\u662f\u4e00\u4e2a\u5957\u8def\u5316\u7684\u9898\u76ee.\n\u4e0d\u4f1a\u659c\u7387\u4f18\u5316\u7684\u540c\u5b66\u53ef\u4ee5\u5148\u770b\u4e00\u4e0b[\u659c\u7387\u4f18\u5316](https://www.luogu.org/blog/aiyoupass/solution-p3195).\n#### Code\n```c++\n#include<algorithm>\n#include<iostream>\n#include<cstdio>\n#define N 50005\n#define int long long//\u8fd9\u4e2a\u98981e6*1e6\u4f1a\u7206int\nusing namespace std;\n\nint n,m;\nstruct Node{\n    int h,w;//\u957f\u5ea6\u548c\u5bbd\u5ea6\n    bool operator<(const Node &s)const{\n        return h>s.h;\n    }\n}a[N],b[N];\nnamespace Sort{\n    void init(){//\u7528\u6765\u53bb\u9664\u65e0\u7528\u7684\u571f\u5730\n        m=0;\n        scanf(\"%lld\",&n);\n        for(int i=1;i<=n;++i)\n            scanf(\"%lld%lld\",&a[i].h,&a[i].w);\n        sort(a+1,a+n+1);\n        for(int i=1;i<=n;++i)\n            if(a[i].w>b[m].w)\n                b[++m]=(Node){a[i].h,a[i].w};\n    }\n};\n\nint q[N],f[N];\nint h,t;\n\ndouble slope(int j,int k){\n    return (double)(f[k]-f[j])/(double)(b[j+1].h-b[k+1].h);\n}\n\nmain(){\n    Sort::init();\n    for(int i=1;i<=m;i++){\n        while(h<t&&slope(q[h],q[h+1])<=b[i].w)h++;//\u5c06\u4e0d\u6ee1\u8db3\u5f0f\u5b50w_i>balabala\u7684\u5254\u9664\n        f[i]=f[q[h]]+b[i].w*b[q[h]+1].h;//\u8ba1\u7b97\u5f53\u524d\u7b54\u6848\n        while(h<t&&slope(q[t-1],q[t])>=slope(q[t],i))t--;//\u5c06\u5f53\u524d\u72b6\u6001\u63d2\u5165\n        q[++t]=i;\n    }\n    printf(\"%lld\\n\",f[m]);\n    return 0;\n}\n```",
        "postTime": 1525920205,
        "uid": 39067,
        "name": "aiyougege",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "\u5bf9\u4e8e\u4e8c\u7ef4\u7684\u5750\u6807,\u4e00\u4e2a\u5f88\u597d\u7684\u60f3\u95ee\u9898\u7684\u65b9\u6cd5\u662f\u628a\u5b83\u753b\u5230\u5750\u6807\u7cfb\u4e2d\u3002  \n\u7136\u540e\u53ef\u4ee5\u53d1\u73b0,\u6211\u4eec\u53ea\u9700\u8981\u53d6\u6700\u5916\u5708\u7684\u8f6e\u5ed3\u5373\u53ef,\u6362\u8a00\u4e4b,\u5bf9\u4e8e$(a,b)$ $\\exists (x,y),x \\geqslant a \\space\\&\\&\\space y\\geqslant b$,\u663e\u7136$(a, b)$\u53ef\u4ee5\u5728\u8d2d\u4e70$(x,y)$\u7684\u65f6\u5019\u4e00\u8d77\u4e70\u800c\u4e0d\u7528\u6d88\u8017\u989d\u5916\u7684\u4ee3\u4ef7\u3002  \n\u820d\u53bb\u8fd9\u4e9b\u70b9\u4e4b\u540e,\u6211\u4eec\u53d1\u73b0\u5750\u6807\u56fe\u4e2d\u7684\u70b9,\u82e5$x_i \\geqslant x_j$\u5219\u5fc5\u6709$y_i \\leqslant y_j$\u3002\u6709\u4e00\u4e2a\u6027\u8d28,\u5373\u6211\u4eec\u5e94\u5f53\u8d2d\u4e70\u8fde\u7eed\u7684\u4e00\u6bb5$x$\u7684\u533a\u95f4\u3002\u5373\u82e5$i \\leqslant k \\leqslant j$,\u8d2d\u4e70$i,j$\uff0c\u5219\u9762\u79ef\u4e3a$y_i * x_j$,\u663e\u7136$x_i \\leqslant x_k \\leqslant x_j, y_i \\geqslant y_k \\geqslant y_j$,\u663e\u7136\u5e94\u8be5\u628a$k$\u5e26\u8fc7\u800c\u4e0d\u9700\u8981\u6d88\u8017\u989d\u5916\u4ee3\u4ef7\u3002  \n\u6240\u4ee5\u53ef\u4ee5\u679a\u4e3e\u4e0a\u6bb5\u5f00\u59cb\u7684\u4f4d\u7f6e\u6309$x$\u5347\u5e8f\u8fdb\u884cdp\u3002  \n$f(i) = min\\{f(j)\\space + \\space w(j+1, k)\\}$  \n$w(a, b) = x_b y_a$  \n\u7531\u4e8e$x_a$\u5355\u8c03\u9012\u589e,$y_a$\u5355\u8c03\u9012\u51cf\uff0c\u6545$w$\u5e94\u5f53\u662f\u51f8\u7684,\u6216\u8005\u8bf4\u5b83\u6ee1\u8db3\u56db\u8fb9\u5f62\u4e0d\u7b49\u5f0f\u3002(\u53ef\u4ee5\u66b4\u529b\u5199\u51fa\u6765\u8bc1\u4e00\u4e0b)  \n\u6240\u4ee5\u7528\u5355\u8c03\u6808\u7ef4\u62a4\u5373\u53ef\u3002  \n\u590d\u6742\u5ea6$O(nlogn)$  \n```cpp\n#include <cstdio>\n#include <cstring>\n#include <deque>\n#include <algorithm>\n#define ll long long\n\nusing namespace std;\n\nconst int N = 56789;\nstruct pt{\n\tint x, y;\n\tpt() {x = 0; y = 0;}\n\tpt(int X, int Y): x(X), y(Y) {}\n\tbool operator < (const pt&o) const {\n\t\treturn x == o.x ? y > o.y : x < o.x;\n\t}\n\tpt operator = (const pt&o) {\n\t\tx = o.x; y = o.y; return *this;\n\t}\n};\nstruct node{\n\tint l, r, x;\n\tnode() {}\n\tnode(int L, int R, int X): l(L), r(R), x(X) {}\n};\ndeque<node> sta;\npt inp[N], p[N];\nll f[N];\nint up = 1;\n\ninline ll getW(int x, int y) { return (ll)p[x].y * p[y].x; }\ninline bool ckupd(int x, int y, int t) { return f[x] + getW(x+1, t) < f[y] + getW(y+1, t); }\n\nint main() {\n\tint n;\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i <= n; ++i)\n\t\tscanf(\"%d %d\", &inp[i].x, &inp[i].y);\n\tsort(inp + 1, inp + n + 1);\n\tll ht = 0;\n\tfor(int i = n; i; --i) {\n\t\tif(inp[i].y > ht) {\n\t\t\tp[up++] = inp[i];\n\t\t\tht = inp[i].y;\n\t\t}\n\t}\n\treverse(p+1, p+up);\n\tf[0] = 0;\n\tsta.push_back(node(1, up-1, 0)); \n\tfor(int i = 1; i < up; ++i) {\n\t\twhile(sta.front().r < i) sta.pop_front();\n\t\tf[i] = f[sta.front().x] + getW(sta.front().x+1, i);\n\t\twhile(!sta.empty()) {\n\t\t\tif(ckupd(i, sta.back().x, sta.back().l)) sta.pop_back();\n\t\t\telse break;\n\t\t}\n\t\tif(sta.empty()) {\n\t\t\tsta.push_back(node(i+1, up-1, i));\n\t\t} else if(ckupd(i, sta.back().x, sta.back().r)) {\n\t\t\tnode tmp = sta.back();\n\t\t\tsta.pop_back();\n\t\t\tint l = tmp.l+1, r = tmp.r, mid;\n\t\t\twhile(l < r) {\n\t\t\t\tmid = (l + r) >> 1;\n\t\t\t\tif(ckupd(i, tmp.x, mid)) r = mid;\n\t\t\t\telse l = mid + 1;\n\t\t\t}\n\t\t\tsta.push_back(node(tmp.l, l-1, tmp.x));\n\t\t\tsta.push_back(node(l, up-1, i));\n\t\t} else {\n\t\t\tif(sta.back().r < up-1) sta.push_back(node(sta.back().r+1, up-1, i));\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", f[up-1]);\n\treturn 0;\n}\n```\n",
        "postTime": 1573054652,
        "uid": 88735,
        "name": "\u5bd2\u9e3d\u513f",
        "ccfLevel": 0,
        "title": "[\u56db\u8fb9\u5f62\u4e0d\u7b49\u5f0f/\u51b3\u7b56\u5355\u8c03\u6027]\u9898\u89e3 P2900 \u3010[USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition\u3011"
    },
    {
        "content": "\u4e00\u9053\u795e\u5947\u7684\u659c\u7387\u4f18\u5316\u9898~~\u597d\u50cf\u6240\u6709\u659c\u7387\u4f18\u5316\u90fd\u5f88\u7384\u5b66\uff1f~~\n\n## **\u9884\u5904\u7406**\n\u9996\u5148\u6211\u4eec\u8981\u628a\u9898\u76ee\u4e0a\u7684\u6570\u636e\u5904\u7406\u4e00\u4e0b\uff0c\u4e0d\u7136\u6ca1\u6709\u4efb\u4f55\u601d\u8def\n\n\u6211\u4eec\u7528l\u8868\u793a\u957f\u65b9\u5f62\u7684\u957f\uff0ch\u8868\u793a\u957f\u65b9\u5f62\u7684\u5bbd\uff0c\u5982\u679c\u6709l[x]<l[y]&&h[x]<h[y]\uff0c\n\u90a3\u4e48\u5b9e\u9645\u4e0a\u6700\u540e\u7b54\u6848\u4e0ex\u65e0\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5bf9\u957f\u65b9\u5f62\u4ee5h\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0cl\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u8fdb\u884c\u6392\u5e8f\uff0c\u6392\u5e8f\u540e\u5982\u679c\u6709l[x]>l[x+1] \u5c31\u628ax+1\u5220\u9664\u6389\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u81ea\u5df1\u90a3\u4e00\u7ec4\u6570\u636e\u8bd5\u4e00\u4e0b\n\n## **\u8f6c\u79fb\u65b9\u7a0b**\n\u6211\u4eec\u7528dp[i]\u6765\u8868\u793a\u524di\u5757\u571f\u5730\u6700\u5c0f\u82b1\u8d39\uff0c\u6613\u5f97\ndp[i]=min(dp[i],dp[j-1]+h[j]*l[i])\n\u5f88\u660e\u663e\uff0c\u5982\u679c\u5355\u72ec\u7528\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u7a0b\u7684\u8bdd\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n^2)\u4f1a\u8d85\u65f6\uff0c\u8003\u8651\u4f18\u5316\n\n## **\u659c\u7387\u4f18\u5316**\n\u9996\u5148\uff0c\u5f53\u4ecej\u8f6c\u79fb\u5230i\u6700\u4f18\u65f6\uff0c\u4e00\u5b9a\u6709\n\ndp[j-1]+h[j]*l[i]>=dp[k-1]+h[k]*l[i]\n\n\u6574\u7406\u5f97\uff1a\n\n(dp[j-1]-dp[k-1])/(h[j]-h[k])<=l[i]\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u5355\u8c03\u961f\u5217\u4fdd\u5b58\u659c\u7387\u5373\u53ef\n\n\u5355\u8c03\u961f\u5217\u5177\u4f53\u64cd\u4f5c\u53ef\u770b\u6ce8\u91ca\n\n## **Code**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct Node\n{\n    long long l,h;\n}rec[50001];\nlong long dp[50001];\nint q[50001];\ndouble k[50001];\nbool cmp(Node x,Node y)\n{\n    return x.h==y.h?x.l>y.l:x.h>y.h;\n}\ndouble cale(int x,int y)\n{\n    return (dp[x-1]-dp[y-1])/(rec[y].h-rec[x].h);\n}\nint main()\n{\n    int n;\n    cin>>n;\n    for(int i=1;i<=n;i++) cin>>rec[i].l>>rec[i].h;\n    sort(rec+1,rec+n+1,cmp);\t\n    int now=1;\n    for(int i=1;i<=n;i++)\n        if(rec[now].l<rec[i].l) rec[++now]=rec[i];\n    n=now; \n    int head=1,tail=0;\n    for(int i=1;i<=n;i++)\n    {\n        while(head<tail&&k[tail-1]>=cale(i,q[tail])) tail--;\n        k[tail]=cale(i,q[tail]); q[++tail]=i;\n        //\u5c06i\u52a0\u5165\u961f\u5217\n        while(head<tail&&k[head]<rec[i].l) head++;\n        //\u5c06\u961f\u9996\u4e0d\u591f\u4f18\u7684\u5220\u9664\n        dp[i]=dp[q[head]-1]+rec[q[head]].h*rec[i].l;\n    }\n    cout<<dp[n];\n    return 0;\n}\n```\n",
        "postTime": 1563705260,
        "uid": 186573,
        "name": "Boring__Zheng",
        "ccfLevel": 6,
        "title": "P2900 [USACO08MAR]\u571f\u5730\u5f81\u7528Land Acquisition \u9898\u89e3"
    }
]
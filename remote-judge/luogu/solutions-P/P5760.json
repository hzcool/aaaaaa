[
    {
        "content": "[\u539f\u9898P5760](https://www.luogu.com.cn/problem/P5760)\n\n\u6211\u4eec\u89c2\u5bdf\u9898\u9762\uff0c\u601d\u8003\u4e00\u4e0b\u8fd9\u9053\u9898\u7684\u51b3\u7b56\u65b9\u6848\n\n\u5bf9\u4e8e\u5f53\u524d\u201c\u72b6\u6001\u201d\uff0c\u6211\u4eec\u6709\u4e09\u79cd\u201c\u51b3\u7b56\u201d\uff1a\n\n- \u4ece\u5f53\u524d\u5757\u53e6\u8d77\u4e00\u5806\n- \u5f53\u524d\u5757\u52a0\u5728\u524d\u4e00\u5806\u4e0a\n- \u4e0d\u9009\u5f53\u524d\u5757\n\n\u8fd9\u91cc\u5176\u5b9e\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5982\u4f55\u5224\u65ad\u5f53\u524d\u5757\u80fd\u4e0d\u80fd\u52a0\u5728\u4e4b\u524d\u7684\u5757\u4e0a\u9762\uff1f\uff1f\n\n\u6211\u4eec\u7528$a_{i,0},a_{i,1},a_{i,2}$\u5206\u522b\u4ee3\u8868\u4e00\u4e2a\u5757\u7684\u957f\uff0c\u5bbd\uff0c\u9ad8\uff08\u76f8\u5bf9\u800c\u8a00\uff09\n\n\u90a3\u4e48\u663e\u7136\u8fd9\u4e09\u6761\u8fb9\u80fd\u6784\u6210\u4e09\u4e2a\u9762\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u5206\u522b\u5b9a\u4e49\uff1a\n$$a_{i,4}=a_{i,0}$$\n$$a_{i,5}=a_{i,1}$$\n\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6$a_{i,k}$:\n\n$a_{i,k+1}$ \u4e3a\u6240\u5bf9\u5e94\u7684\u5bbd\n\n$a_{i,k+2}$ \u4e3a\u6240\u5bf9\u5e94\u7684\u9ad8\n\n\u6211\u4eec\u5b9a\u4e49 $dp_{i,j,l}$ \u8868\u793a\u524d $i$ \u6839\u67f1\u5b50\uff0c\u7b2c $j$ \u5757\u79ef\u6728\u5e76\u4e14\u5f53\u524d\u6b63\u5728\u5904\u7406\u7b2c $l$ \u4e2a\u5e73\u9762\uff08\u6211\u4eec\u7406\u89e3\u4e3a\u5904\u7406\u4e00\u6761\u8fb9\uff09\u3002\n$0 \\leq l \\leq 2$\uff0c\u5206\u522b\u4ee3\u8868\u79ef\u6728\u4e0d\u540c\u7684\u4e09\u8fb9\uff08\u9762\uff09\u3002\n\n\u601d\u8003\u5b8c\u51b3\u7b56\uff0c\u6211\u4eec\u5f00\u59cb\u9012\u63a8\uff1a\n\n**\u51b3\u7b561**:\u65b0\u8d77\u4e00\u5806\uff1a\n$$dp_{i,j,l}=dp_{i-1,h,k}+a_{j,l+2}$$\n\n\u8fd9\u91cc $h$ \u4ee3\u8868\u4e4b\u524d\u7684\u79ef\u6728\uff0c$k$\u4ee3\u8868\u4e4b\u524d\u8fd9\u4e2a\u79ef\u6728\u7684\u7b2c$k$\u4e2a\u9762\n\n**\u51b3\u7b562**:\u52a0\u5728\u5f53\u524d\u5806\uff1a\n$$dp_{i,j,l}=dp_{i,j,k}+a_{j,l+2}$$\n\n**\u51b3\u7b563**:\u5f53\u7136\u662f\u4e0d\u653e\n\n\u6240\u4ee5\u6211\u4eec\u5bf9\u524d\u4e24\u4e2a\u51b3\u7b56\u5206\u522b\u5bf9\u4e0d\u653e\u548c\u653e\u53d6 $max$\uff0c\u5f00\u4e00\u4e2a $ans$ \u8bb0\u5f55\u6700\u5927\u503c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u8fd8\u6709\u6ca1\u592a\u542c\u61c2\u7684\u53ef\u4ee5\u770b\u4ee3\u7801\u3002\u3002\u3002\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nconst int N=110;\nint a[N][5],ans;\nint dp[N][N][5],n,m;\nint x1,y1,x2,y2;//\u7528dp[i][j][l]\u8868\u793a\u7b2ci\u5806\u7b2cj\u5757\u79ef\u6728\u7b2cl\u6761\u8fb9\u7684\u6700\u5927\u9ad8\u5ea6\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d%d%d\",&a[i][0],&a[i][1],&a[i][2]);//a[i][k+2]\u662f\u8fd9\u9762\u6240\u5bf9\u5e94\u7684\u9ad8 \n\t\ta[i][3]=a[i][0];\n\t\ta[i][4]=a[i][1];\n\t}\n    for(int i=1;i<=m;i++)\t\t//\u7b2ci\u6839\u67f1\u5b50 \n        for(int j=1;j<=n;j++)\t\t//\u7b2cj\u5757\u79ef\u6728 \n            for(int h=0;h<j;h++)\t//\u5728\u7f16\u53f7\u5c0f\u7684\u79ef\u6728\u4e2d\u627e\u7b2ch\u5757\u79ef\u6728 (\u4ece0\u5f00\u59cb,\u5426\u5219\u6c42\u4e0d\u51fa1\u7684\u503c) \n                for(int k=0;k<=2;k++)\t//\u7b2ch\u5757\u79ef\u6728\u7684\u7b2ck\u6761\u8fb9 \n                    for(int l=0;l<=2;l++)\t//\u7b2cj\u5757\u79ef\u6728\u7684\u7b2cl\u6761\u8fb9 \n\t\t\t\t\t{\n                        x1=max(a[h][k],a[h][k+1]);//\u4e0b\u9762\u79ef\u6728\u4e0a\u8868\u9762\u7684\u957f\u8fb9 \n                        y1=min(a[h][k],a[h][k+1]);//\u77ed\u8fb9 \n                        x2=max(a[j][l],a[j][l+1]);//\u4e0a\u9762\u79ef\u6728\u4e0b\u8868\u9762\u7684\u957f\u8fb9 \n                        y2=min(a[j][l],a[j][l+1]);//\u77ed\u8fb9 \n                        if(x1>=x2&&y1>=y2)\t\t\t//\u5982\u679c\u4e0b\u9762\u79ef\u6728\u7684\u4e24\u6761\u8fb9\u5927\u4e8e\u4e0a\u9762\u79ef\u6728\u7684\u4e24\u8fb9 \n                            dp[i][j][l]=max(dp[i][j][l],dp[i][h][k]+a[j][l+2]);  //\u653e\u6216\u4e0d\u653e\uff0c\u53d6\u8f83\u5927\u4f71 \n                        dp[i][j][l]=max(dp[i][j][l],dp[i-1][h][k]+a[j][l+2]);\t//\u548c\u524d\u4e00\u5806\u6bd4\u8f83 \n                        ans=max(ans,dp[i][j][l]);\n                    }\n    printf(\"%d\",ans);        \n    return 0;\n}\n```\n",
        "postTime": 1602558647,
        "uid": 272945,
        "name": "asdfo123",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P5760 \u3010[NOI1997]\u79ef\u6728\u6e38\u620f\u3011"
    },
    {
        "content": "## \u5927\u610f\n\n\u6709 $ n $ \u4e2a\u957f\u65b9\u4f53\u65b9\u5757\uff0c\u5c06\u5176\u4f9d\u6b21\u653e\u7f6e\u987a\u6b21\u645e\u6210 $ m $ \u5806\uff0c\u6bcf\u4e00\u5806\u4e2d\u9876\u9762\u5b8c\u5168\u5305\u542b\u4e0a\u9762\u65b9\u5757\u7684\u5e95\u9762\u3002\u6c42\u6700\u9ad8\u9ad8\u5ea6\u548c\u3002\n\n## \u601d\u8def\n\n\u4e00\u4e2a\u65b9\u5757\u6709\u4e09\u79cd\u653e\u7f6e\u65b9\u5f0f\u5728\u672c\u9898\u6709\u672c\u8d28\u533a\u522b\uff1a\n\n- $ a $\uff0c$ b $\uff0c\u505a\u957f\u548c\u5bbd\uff0c$ c $ \u505a\u9ad8\uff1b\n- $ a $\uff0c$ c $\uff0c\u505a\u957f\u548c\u5bbd\uff0c$ b $ \u505a\u9ad8\uff1b\n- $ b $\uff0c$ c $\uff0c\u505a\u957f\u548c\u5bbd\uff0c$ a $ \u505a\u9ad8\u3002\n\n\u8ba9\u4e24\u4e2a\u65b9\u5f62\u53e0\u653e\uff0c\u53ef\u4ee5\u7528\u957f\u8fb9\u5bf9\u957f\u8fb9\uff0c\u77ed\u8fb9\u5bf9\u77ed\u8fb9\u3002\u6240\u4ee5\uff0c\u4e0a\u9762\u8fd9\u4e1c\u897f\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a\n\n- $ \\max(a,b) $ \u505a\u957f\uff0c$ \\min(a,b) $ \u505a\u5bbd\uff0c$ c $ \u505a\u9ad8\uff0c\u8bbe\u4e3a\u72b6\u6001 $ 0 $\uff1b \n- $ \\max(a,c) $ \u505a\u957f\uff0c$ \\min(a,c) $ \u505a\u5bbd\uff0c$ b $ \u505a\u9ad8\uff0c\u8bbe\u4e3a\u72b6\u6001 $ 1 $\uff1b\n- $ \\max(b,c) $ \u505a\u957f\uff0c$ \\min(b,c) $ \u505a\u5bbd\uff0c$ a $ \u505a\u9ad8\uff0c\u8bbe\u4e3a\u72b6\u6001 $ 2 $\u3002\n\n\u8fdb\u884c\u8bb0\u641c\u3002\n\n\u8003\u8651\u5bf9\u4e8e\u4e00\u4e2a\u65b9\u5757\uff0c\u6709\u4e09\u79cd\u5904\u7406\u65b9\u5f0f\uff1a\n\n1. \u4e0d\u7ba1\uff1b\n2. \u5728\u5f53\u524d\u8fd9\u4e00\u5806\u653e\u5b83\u3002\n3. \u53e6\u8d77\u4e00\u5806\uff0c\u653e\u5b83\uff1b\n\n\u5c31\u6709\u4e09\u79cd\u65b9\u5f0f\u8fdb\u884c\u8bb0\u641c\uff08`x`\u8868\u793a\u5f53\u524d\u662f\u7b2c\u51e0\u4e2a\uff0c`y`\u8868\u793a\u5f53\u524d\u662f\u7b2c\u51e0\u5806\uff0c\t`lst`\u4ee3\u8868\u4e0a\u4e00\u4e2a\u9009\u7684\u662f\u54ea\u4e00\u4e2a\uff0c`upr`\u8868\u793a\u4e0a\u4e00\u4e2a\u662f\u54ea\u4e00\u79cd\u72b6\u6001\uff0c`t`\u4e3a\u4e09\u79cd\u72b6\u6001\u4e0b\u7684\u957f\u5bbd\u9ad8\uff09\uff1a\n\n1. `anc=max(anc,dfs(x+1,y,lst,upr));`\uff1a\u4e0d\u7ba1\uff1b\n2. `if(t[i].a<=lu.a&&t[i].b<=lu.b) anc=max(anc,t[i].h+dfs(x+1,y,x,i));`\uff1a\u5728\u5f53\u524d\u8fd9\u4e00\u5806\u7ee7\u7eed\u653e\uff1b\n3. `anc=max(anc,t[i].h+dfs(x+1,y+1,x,i));`\uff1a \u53e6\u8d77\u4e00\u5806\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define inf 100000000\nusing namespace std;\nint n,m,a[105],b[105],c[105],dp[105][105][105][3];\nbool vis[105][105][105][3];\nstruct blck{\n\tint a,b,h;\n};\nblck mn(int x,int upr){\n\tif(upr==0) return (blck){min(a[x],b[x]),max(a[x],b[x]),c[x]};\n\tif(upr==1) return (blck){min(a[x],c[x]),max(a[x],c[x]),b[x]};\n\tif(upr==2) return (blck){min(b[x],c[x]),max(b[x],c[x]),a[x]};\n\treturn (blck){0,0,0};\n}\nint dfs(int x,int y,int lst,int upr){\n\tif(vis[x][y][lst][upr]) return dp[x][y][lst][upr];\n\tvis[x][y][lst][upr]=true;\n\tif(x==n+1){\n\t\tif(y==m) return dp[x][y][lst][upr]=0;\n\t\treturn -inf;\n\t}\n\tint anc=-inf;\n\tanc=max(anc,dfs(x+1,y,lst,upr));\n\tblck lu=mn(lst,upr),t[3]={mn(x,0),mn(x,1),mn(x,2)};\n\tfor(int i=0;i<3;i++){\n\t\tif(t[i].a<=lu.a&&t[i].b<=lu.b) anc=max(anc,t[i].h+dfs(x+1,y,x,i));\n\t\tif(y<m) anc=max(anc,t[i].h+dfs(x+1,y+1,x,i));\n\t}\n\treturn dp[x][y][lst][upr]=anc;\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=0;i<=n+1;i++) for(int j=0;j<=n+1;j++) for(int k=0;k<=n+1;k++) for(int l=0;l<3;l++) dp[i][j][k][l]=-inf;\n\tfor(int i=1;i<=n;i++) scanf(\"%d %d %d\",&a[i],&b[i],&c[i]);\n\tcout<<dfs(1,0,0,0);\n\treturn 0;\n} \n```",
        "postTime": 1639400252,
        "uid": 429147,
        "name": "hxhhxh",
        "ccfLevel": 0,
        "title": "P5760"
    },
    {
        "content": "# \u6d1b\u8c37P5760 \u79ef\u6728\u6e38\u620f\n\n## \u4e00 \u9898\u76ee\u63cf\u8ff0\n\n\u7ed9\u51fan\u4e2a\u79ef\u6728\uff0c\u6c42\u51fa\u645e\u6210m\u5806\u7684\u9ad8\u5ea6\u548c\u7684\u6700\u5927\u503c\n**\u89c4\u5219\uff1a**\n\n1 \u6bcf\u5806\u81f3\u5c11\u6709\u4e00\u5757\u79ef\u6728\n\n2 \u7b2cK\u5806\u6bcf\u4e00\u5757\u79ef\u6728\u7684\u7f16\u53f7\u5fc5\u987b\u5927\u4e8e\u7b2cK+1\u5806\n\n3 \u5c0f\u7684\u79ef\u6728\u5fc5\u987b\u5728\u5927\u7684\u79ef\u6728\u4e0a\u9762\uff08\u53ef\u4ee5\u7b49\u4e8e\uff09\n\n4 \u4e0b\u9762\u79ef\u6728\u7684\u7f16\u53f7\u6bd4\u4e0a\u9762\u79ef\u6728\u5c0f\n\n\u89c1\u6d1b\u8c37P5760\n\n[\u9898\u76ee\u63cf\u8ff0](https://www.luogu.com.cn/problem/P5760 )\n## \u4e8c \u7b97\u6cd5\u5206\u6790\nDP\n### \u4e00 \u72b6\u6001\u5b9a\u4e49\n$data[i][k1]$\u8868\u793a1~i\u5757\u79ef\u6728\u4ee5\u7b2ci\u5757\u79ef\u6728\u7684k1\u4e3a\u9ad8\u65f6\u7684\u6700\u9ad8\u503c\n### \u4e8c \u6240\u6c42\n$data$\u6570\u7ec4\u4e2d\u6700\u5927\u7684\u5373\u4e3a\u6240\u6c42\n### \u4e09 \u8f6c\u79fb\u65b9\u7a0b\n$$\nf(i,j)=\n\\begin{cases}\nmax_{j=i+1,k=1}^{n,3} data[j][k] & t[i][k1][j][k2]\n\\end{cases}\n$$\n### \u56db \u4ee3\u7801\uff08\u542b\u6ce8\u91ca\uff09\n\n```C++\n#include<stdio.h>\n#include<iostream>\nconst int N=110;\nint a[N][4];\nint data[N][4];\nint n,m;\nbool t[N][4][N][4];\nint max1(int a,int b){\n\treturn a>b?a:b;\n}\n//\u5b9a\u4e49check\u51fd\u6570 \nbool check(int i,int k1,int j,int k2){\n\t//a1\u8868\u793a\u7b2ci\u5757\u79ef\u6728\u7684\u957f\uff0cb1\u8868\u793a\u7b2ci\u5757\u79ef\u6728\u7684\u5bbd\n\t//a2\u8868\u793a\u7b2cj\u5757\u79ef\u6728\u7684\u957f\uff0cb2\u8868\u793a\u7b2cj\u5757\u79ef\u6728\u7684\u5bbd \n\tint a1,b1,a2,b2;\n\t//\u679a\u4e3e\u4e09\u79cdk\u53ef\u80fd\u7684\u60c5\u51b5\uff0c\u751f\u6210\u957f\u548c\u5bbd \n\tif(k1==1) a1=a[i][2],b1=a[i][3];\n\tif(k1==2) a1=a[i][1],b1=a[i][3];\n\tif(k1==3) a1=a[i][1],b1=a[i][2];\n\t//\u540c\u7406 \n\tif(k2==1) a2=a[j][2],b2=a[j][3];\n\tif(k2==2) a2=a[j][1],b2=a[j][3];\n\tif(k2==3) a2=a[j][1],b2=a[j][2];\n\t//\u5224\u65ad\u80fd\u5426\u62fc\u63a5\uff0c\u957f\u548c\u5bbd\u53ef\u4ee5\u98a0\u5012\u4f4d\u7f6e \n\treturn ((a1>=a2 and b1>=b2) or (a1>=b2 and a2<=b1));\n}\nint main(){\n\tfreopen(\"block.in\",\"r\",stdin);\n\t//freopen(\"block.out\",\"w\",stdout);\n\t//\u8bfb\u5165 \n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i) scanf(\"%d%d%d\",&a[i][1],&a[i][2],&a[i][3]);//\u5b58\u50a8\u5728\u4e8c\u7ef4\u6570\u4e2d\uff0c\u5229\u4e8e\u4ee5\u540e\u67e5\u627e\n\t//\u521d\u59cb\u5316data\u6570\u7ec4\uff0c\u586b\u5165\u5047\u8bbe\u6bcf\u645e\u53ea\u53ef\u4ee5\u52a0\u5165\u4e00\u4e2a\u6728\u5757\u65f6\u7684\u60c5\u51b5 \n\tmemcpy(data,a,sizeof data);//memcpy(a,b,sizeof a)\u8868\u793a\u5c06b\u62f7\u8d1d\u5230a\u4e2d\n\t//\u751f\u6210t\u6570\u7ec4\uff0c\u5229\u4e8e\u4ee5\u540e\u64cd\u4f5c\n\t//t[i][k1][j][k2]\u8868\u793a\u7b2ci\u5757\u79ef\u6728\u4ee5k1\u4e3a\u9ad8\uff0c\u7b2cj\u5757\u79ef\u6728\u4ee5k2\u4e3a\u9ad8\u80fd\u5426\u62fc\u63a5\u5230\u4e00\u8d77 \n\tfor(int i=1;i<n;++i) \n\t\tfor(int k1=1;k1<=3;++k1) \n\t\t\tfor(int j=i+1;j<=n;++j) \n\t\t\t\tfor(int k2=1;k2<=3;++k2)\n\t\t\t\t\tt[i][k1][j][k2]=check(i,k1,j,k2);//check\u51fd\u6570\u5b9a\u4e49\u89c1\u4e0a \n\t//DP \u9012\u63a8\u6c42\u89e3 \n\tint ans=0;\n\t//\u76f4\u63a5\u7167\u6284\u8f6c\u79fb\u65b9\u7a0b \n\tfor(int i=n;i>=1;--i){\n\t\tfor(int k1=1;k1<=3;++k1){\n\t\t\tint max1=0;\n\t\t\tfor(int j=i+1;j<=n;++j)\n\t\t\t\tfor(int k2=1;k2<=3;++k2)\n\t\t\t\t\tif(data[j][k2]>max1 and t[i][k1][j][k2]) max1=data[j][k2];\n\t\t\tdata[i][k1]=max1+data[i][k1];\n\t\t\tif(ans<data[i][k1]) ans=data[i][k1];\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\u4f46\u662f\u6211\u4eec\u6c42\u89e3\u7684\u662f\u5f53m=1\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u53ea\u80fd\u5f9720\u5206\n\n\u8fd8\u9700\u8981\u518d\u52a0\u4e00\u4e2aDP\uff0c\u6c42\u89e3\u628a\u79ef\u6728\u5206\u6210\u591a\u5c11\u5806\u7684\u6700\u5927\u503c\n\n\u4ee3\u7801\u89c1\u4e0b\n\n```C++\n#include<stdio.h>\n#include<string.h>\nusing namespace std;\nconst int N=110,M=110;\nint n,m;\nint a[N][4];\nint f1[N][N][4];\nint data[N][N];\nint dp[N][M];\nbool t[N][4][N][4];\nbool check(int i,int k1,int j,int k2){\n    int a1,a2,b1,b2;\n    if(k1==1) a1=a[i][2],b1=a[i][3];\n    if(k1==2) a1=a[i][1],b1=a[i][3];\n    if(k1==3) a1=a[i][2],b1=a[i][1];\n    if(k2==1) a2=a[j][2],b2=a[j][3];\n    if(k2==2) a2=a[j][1],b2=a[j][3];\n    if(k2==3) a2=a[j][2],b2=a[j][1];\n    return (a1>=a2 and b1>=b2) or (a1>=b2 and b1>=a2);\n}\nint main(){\n    //freopen(\"block.in\",\"r\",stdin);\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++) scanf(\"%d%d%d\",&a[i][1],&a[i][2],&a[i][3]);\n    for(int i=1;i<n;i++){\n        for(int k1=1;k1<=3;k1++){\n            for(int j=i+1;j<=n;j++){\n                for(int k2=1;k2<=3;k2++){\n                    t[i][k1][j][k2]=check(i,k1,j,k2);\n                }\n            }\n        }\n    }\n    for(int l=n;l>=1;l--){\n        for(int i=l;i>=1;i--){\n            for(int k1=1;k1<=3;k1++){\n                int max1=0;\n                for(int j=i+1;j<=n;j++){\n                    for(int k2=1;k2<=3;k2++){\n                        if(t[i][k1][j][k2]){\n                            int x=f1[j][l][k2];\n                            if(max1<x) max1=x;\n                        }\n                    }\n                }\n                f1[i][l][k1]=max1+a[i][k1];\n            }\n        }\n    }\n    for(int i=n;i>=1;i--){\n        for(int j=i;j>=1;j--){\n            int max1=0;\n            for(int k=1;k<=3;k++) if(max1<f1[j][i][k])max1=f1[j][i][k];\n            data[i][j]=max1;\n        }\n    }\n     \n    for(int i=1;i<=n;i++){\n        int max1=0;\n        for(int j=i;j<=n;j++) if(data[j][i]>max1) max1=data[j][i];\n        dp[i][1]=max1;\n    }\n     \n    for(int j=2;j<=m;j++){\n        for(int i=n-j+1;i>=1;i--){\n            int max1=0;\n            for(int k=n-j+1;k>=i;k--) if(data[k][i]+dp[k+1][j-1]>max1) max1=data[k][i]+dp[k+1][j-1];\n            dp[i][j]=max1;\n        }\n    }\n     \n    int max1=0;\n    for(int i=1;i<=n;i++) if(dp[i][m]>max1) max1=dp[i][m];\n    printf(\"%d\\n\",max1);\n//  for(int i=1;i<=n;i++){\n//      for(int j=1;j<=m;j++) printf(\"%d \",dp[i][j]);\n//      printf(\"\\n\");\n//  }\n    return 0;\n}\n```\n\n",
        "postTime": 1580093808,
        "uid": 231685,
        "name": "fnoi_zrh0301",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5760 \u3010[NOI1997]\u79ef\u6728\u6e38\u620f\u3011"
    },
    {
        "content": "\u6211\u4eec\u5b9a\u4e49$dp_{i,j,k}$\u4e3a\u524d$i$\u4e2a\u79ef\u6728\u5792\u6210$j$\u5806\uff0c\u5e76\u4e14\u5f53\u524d\u6b63\u5728\u5904\u7406\u7b2c$k$\u4e2a\u5e73\u9762\u3002$0 \\leq k \\leq 2$\uff0c\u5206\u522b\u4ee3\u8868\u79ef\u6728\u4e0d\u540c\u7684\u4e09\u9762\u3002\n\n\u6211\u4eec\u5f88\u5bb9\u6613\u53d1\u73b0\u6211\u4eec\u53ef\u4ee5\u518d\u591a\u5792\u6210\u4e00\u5806\uff0c\u4e5f\u53ef\u4ee5\u642d\u5728\u5f53\u524d\u8fd9\u4e00\u5806\u79ef\u6728\u4e0a\u9762\u3002\u4f46\u662f\u4e00\u5b9a\u8981\u6ce8\u610f\u518d\u65b0\u5792\u6210\u4e00\u5806\u7684\u8bdd\u5c31\u4e0d\u7528\u5224\u65ad\u4e4b\u524d\u7684\u79ef\u6728\u7684\u957f\u5bbd\u9ad8\u4e86\u3002\n\n\u6211\u4eec\u80fd\u591f\u5f88\u987a\u5229\u5730\u63a8\u51fa\u6211\u4eec\u7684\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$$dp_{i,j,pm}=\\max \\{dp_{i-1,k,Last}+buf \\}$$\n\n\u5982\u679c\u8fd8\u53ef\u4ee5\u5792\u5230\u5f53\u524d\u7684\u79ef\u6728\u4e0a\u9762\u53bb\uff1a\n\n$$dp_{i,j,pm}=\\max \\{{dp_{i,k,Last}+buf} \\}$$\n\n\u5176\u4e2d$i,j$\u610f\u4e49\u5982\u4e0a\uff0c$k$\u4e3a\u5f53\u524d\u9009\u5230\u8981\u642d\u4e0a\u7684\u79ef\u6728\uff0c$pm$\u4e3a\u5f53\u524d\u5e73\u9762\uff0c$Last$\u4e3a\u4e0a\u4e2a\u5e73\u9762\u3002\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<iostream>\n#include<queue>\nusing namespace std;\nint n,m,a[105],b[105],c[105],dp[105][105][3];//dp[i][j][k]\uff1a\u524di\u4e2a\u5806\u5792j\u4e2a\u6b63\u5728\u5904\u7406k\u5e73\u9762 \nint main(){\n\tscanf(\"%d %d\",&n,&m);\n\tfor(int i=1;i<=n;++i)\tscanf(\"%d %d %d\",&a[i],&b[i],&c[i]);//\u8fdb\u884c\u8f93\u5165\n\tfor(int i=1;i<=m;++i)\n\t{\n\t\tfor(int j=1;j<=n;++j)\n\t\t{\n\t\t\tfor(int k=0;k<j;++k)\n\t\t\t{\n\t\t\t\tfor(int pm=0;pm<=2;++pm)\n\t\t\t\t{\n\t\t\t\t\tint x,y,buf;\n\t\t\t\t\tif(pm==0)\tx=a[j],y=b[j],buf=c[j];\n\t\t\t\t\tif(pm==1)\tx=b[j],y=c[j],buf=a[j];\n\t\t\t\t\tif(pm==2)\tx=c[j],y=a[j],buf=b[j];\n\t\t\t\t\tif(x<y)\tx^=y^=x^=y;\n\t\t\t\t\tfor(int Last=0;Last<=2;++Last)\n\t\t\t\t\t{\n\t\t\t\t\t\tint xx,yy;\n\t\t\t\t\t\tif(Last==0)\txx=a[k],yy=b[k];\n\t\t\t\t\t\tif(Last==1)\txx=b[k],yy=c[k];\n\t\t\t\t\t\tif(Last==2)\txx=c[k],yy=a[k];\n\t\t\t\t\t\tif(xx<yy)\txx^=yy^=xx^=yy;\n\t\t\t\t\t\tdp[i][j][pm]=max(dp[i][j][pm],dp[i-1][k][Last]+buf);\n\t\t\t\t\t\tif(x>xx || y>yy)\tcontinue;\n\t\t\t\t\t\tdp[i][j][pm]=max(dp[i][j][pm],dp[i][k][Last]+buf);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans=-10086001;\n\tfor(int i=1;i<=n;++i)\tans=max(ans,max(max(dp[m][i][0],dp[m][i][1]),dp[m][i][2]));\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\n\u8fd9\u9053\u9898\u662f\u6211\u5f88\u4e45\u4ee5\u524d\u505a\u7684\uff0c\u53ef\u80fd\u5fd8\u4e86\u3002\u5982\u679c\u6709\u4e0d\u61c2\u7684\u5730\u65b9\uff0c\u53ef\u4ee5\u5728\u8ba8\u8bba\u533a\u7559\u8a00\u3002",
        "postTime": 1575764321,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5760 \u3010[NOI1997]\u79ef\u6728\u6e38\u620f\u3011"
    },
    {
        "content": "## \u601d\u8def\n\n\u4e00\u4e2a\u6bd4\u8f83\u5957\u8def\u7684 dp\u3002\n\n\u4ee4 $f_{i,j,k}$ \u8868\u793a\u524d $i$ \u4e2a\u79ef\u6728\u5806\u6210\u4e86 $j$ \u5806\uff0c\u5f53\u524d\u8fd9\u5806\u6700\u4e0a\u9762\u7684\u79ef\u6728\u671d\u4e0a\u7684\u9762\u4e3a $k$\u3002\n\n$k=0$ \u65f6\uff0c\u8868\u793a\u671d\u4e0a\u7684\u9762\u8fb9\u5206\u522b\u4e3a $a$\uff0c$b$\uff0c\u9ad8\u4e3a $c$\u3002\n\n$k=1$ \u65f6\uff0c\u8868\u793a\u671d\u4e0a\u7684\u9762\u8fb9\u5206\u522b\u4e3a $b$\uff0c$c$\uff0c\u9ad8\u4e3a $a$\u3002\n\n$k=2$ \u65f6\uff0c\u8868\u793a\u671d\u4e0a\u7684\u9762\u8fb9\u5206\u522b\u4e3a $c$\uff0c$a$\uff0c\u9ad8\u4e3a $b$\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\u5206\u4e3a\u4e09\u7c7b\uff1a\n\n1. \u4e0d\u9009\u62e9\u5f53\u524d\u8fd9\u7c7b\u79ef\u6728\u3002\n1. \u628a\u5f53\u524d\u79ef\u6728\u653e\u5728\u6700\u540e\u4e00\u5806\u4e0a\u3002\n1. \u628a\u5f53\u524d\u79ef\u6728\u5355\u72ec\u653e\u5728\u4e00\u5806\u3002\n\n\u7b2c\u4e8c\u7c7b\u548c\u7b2c\u4e09\u7c7b\u7684\u8f6c\u79fb\u65b9\u7a0b\u5206\u522b\u4e3a\uff1a\n\n$f_{i,j,k}=\\max(f_{i,j,k},f_{h,j,l}+high_i)$\n\n$f_{i,j,k}=\\max(f_{i,j,k},f_{h,j-1,l}+high_i)$\n\n\u5176\u4e2d $h$ \u8868\u793a\u53e6\u4e00\u5757\u79ef\u6728\uff0c$l$ \u8868\u793a $h$ \u671d\u4e0a\u7684\u9762\uff0c$high_i$ \u8868\u793a\u7b2c $i$ \u5757\u79ef\u6728\u7684\u9ad8\u5ea6\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=105;\nint n,m;\nint a[N][5];\nint dp[N][N][5];\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d%d\",&a[i][0],&a[i][1],&a[i][2]);\n\t\ta[i][3]=a[i][0];\n\t\ta[i][4]=a[i][1];\n\t}\n\tfor(int i1=1;i1<=n;i1++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tfor(int k=0;k<=2;k++){\n\t\t\t\tfor(int i2=0;i2<i1;i2++){\n\t\t\t\t\tfor(int l=0;l<=2;l++){\n\t\t\t\t\t\tint x1=max(a[i1][k],a[i1][k+1]);\n\t\t\t\t\t\tint y1=min(a[i1][k],a[i1][k+1]);\n\t\t\t\t\t\tint x2=max(a[i2][l],a[i2][l+1]);\n\t\t\t\t\t\tint y2=min(a[i2][l],a[i2][l+1]);\n\t\t\t\t\t\tif(x1<=x2&&y1<=y2){\n\t\t\t\t\t\t\tdp[i1][j][k]=max(dp[i1][j][k],dp[i2][j][l]+a[i1][k+2]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdp[i1][j][k]=max(dp[i1][j][k],dp[i2][j-1][l]+a[i1][k+2]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//puts(\"qwq\");\n\tint ans=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tfor(int k=0;k<=2;k++){\n\t\t\t\t//printf(\"%d %d %d %d\\n\",i,j,k,ans);\n\t\t\t\tans=max(ans,dp[i][j][k]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1677335043,
        "uid": 100690,
        "name": "kawaii__yuyu",
        "ccfLevel": 0,
        "title": "P5760 [NOI1997] \u79ef\u6728\u6e38\u620f \u9898\u89e3"
    },
    {
        "content": "\u5bb9\u6613\u60f3\u5230\u8bbe $f_{i, j}$ \u8868\u793a\u524d $i$ \u5757\u79ef\u6728\uff0c\u628a\u5b83\u4eec\u5206\u6210 $j$ \u5806\u67f1\u5b50\u540e\u9ad8\u5ea6\u4e4b\u548c\u7684\u6700\u5927\u503c \uff08\u7b2c $i$ \u5757\u79ef\u6728\u5728\u7b2c $j$ \u5806\u67f1\u5b50\uff09,\n\n\u7136\u540e\u8003\u8651\u7b2c $i$ \u5757\u4e09\u79cd\u60c5\u51b5\uff1a\n\n1. \u4e0d\u653e\uff0c\u4ec0\u4e48\u90fd\u4e0d\u7528\u505a\n\n2. \u53e6\u8d77\u4e00\u4e2a\u67f1\u5b50\uff0c\u679a\u4e3e\u7b2c $j - 1$ \u5806\u67f1\u5b50\u7684\u9876\u7aef $k$\uff0c\u5219\n\n$$f_{i, j} = \\max(f_{i, j}, f_{k, j - 1} + high_i)$$\n\n3. \t\u52a0\u5728\u524d\u4e00\u4e2a\u67f1\u5b50\u4e4b\u524d\uff0c\u679a\u4e3e\u7b2c $i$ \u5757\u79ef\u6728\u5728\u7b2c $k$ \u5757\u79ef\u6728\u4e0a\uff0c\u5219\n\n$$f_{i, j} = \\max(f_{i, j}, f_{k, j} + high_i)$$\n\n\u5176\u4e2d\uff0c$high_i$ \u4e3a\u7b2c $i$ \u5757\u79ef\u6728\u7684\u9ad8\u5ea6\uff0c\n\n\u9ad8\u9ad8\u5174\u5174\u5730\u5199\u5b8c\uff0c\u4ea4\uff01\u542c\u53d6 WA \u58f0\u4e00\u7247\u554a\uff01\n\n\u4ed4\u7ec6\u60f3\u60f3\uff1a\u957f\u65b9\u4f53\u53ef\u4ee5\u901a\u8fc7\u65cb\u8f6c\u5f97\u5230\u53e6\u4e00\u4e2a\u957f\u65b9\u4f53\uff01\n\n\u4e00\u4e2a\u957f\u65b9\u4f53\u53ef\u4ee5\u6700\u591a\u53ef\u4ee5 $3$ \u4e2a\u4e0d\u540c\u7684\u957f\u65b9\u4f53\uff0c\n\n\u4ee4\u7c7b\u578b $0$ \u4e3a\u4ee5 $a, b$ \u4e3a\u5e95\u7684\u957f\u65b9\u4f53\uff0c\n\n\u7c7b\u578b $1$ \u4e3a\u4ee5\u4e3a\u5e95\u7684 $b, c$ \u957f\u65b9\u4f53\uff0c\n\n\u7c7b\u578b $2$ \u4e3a\u4ee5 $c, a$ \u4e3a\u5e95\u7684\u957f\u65b9\u4f53\n\n\u5176\u4e2d\uff0c$a, b, c$ \u4e3a\u9898\u76ee\u4e2d\u7684\u610f\u601d\uff0c\n\n\u8bbe $f_{i, j, d}$ \u8868\u793a\u524d $i$ \u5757\u79ef\u6728\uff0c\u628a\u5b83\u4eec\u5206\u6210 $j$ \u5806\u67f1\u5b50\uff0c\u7b2c $i$ \u5757\u79ef\u6728\u7c7b\u578b\u4e3a $d$\uff0c\u7684\u9ad8\u5ea6\u4e4b\u548c\u7684\u6700\u5927\u503c \uff08\u7b2c $i$ \u5757\u79ef\u6728\u5728\u7b2c $j$ \u5806\u67f1\u5b50\uff09\n\n\u8fd9\u91cc $0 \\leq d \\leq 2$\uff0c\n\n\u540c\u4e0a\uff0c\u5206\u4e09\u79cd\u60c5\u51b5\uff1a\n\n1. \u4e0d\u653e\uff0c\u4ec0\u4e48\u90fd\u4e0d\u7528\u505a\n\n2. \u53e6\u8d77\u4e00\u4e2a\u67f1\u5b50\uff0c\u679a\u4e3e\u7b2c $j - 1$ \u5806\u67f1\u5b50\u7684\u9876\u7aef $k$\uff0c\u5219\n\n$$f_{i, j, d1} = \\max(f_{i, j, d1}, f_{k, j - 1, d2} + high_{i, d1})$$\n\n3. \t\u52a0\u5728\u524d\u4e00\u4e2a\u67f1\u5b50\u4e4b\u524d\uff0c\u679a\u4e3e\u7b2c $i$ \u5757\u79ef\u6728\u5728\u7b2c $k$ \u5757\u79ef\u6728\u4e0a\uff0c\u5219\n\n$$f_{i, j, d1} = \\max(f_{i, j, d1}, f_{k, j, d2} + high_{i,d1})$$\n\n\u5176\u4e2d\uff0c$d1, d2$ \u5206\u522b\u4e3a $i$ \u7684\u7c7b\u578b\u548c $k$ \u7684\u7c7b\u578b\uff0c$high_{i, d1}$ \u4e3a $i$ \u4e3a $d1$ \u7c7b\u578b\u65f6\u7684\u9ad8\u5ea6\u3002\n\n\u4ee5\u4e0b\u4f18\u5316\u4e3a @asdfo123 \u5927\u4f6c\u7684\u65b9\u6cd5\uff1a\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u4ee4 $l_{i,0},l_{i,1},l_{i,2}$ \u5206\u522b\u4e3a\u9898\u76ee\u6240\u8bf4\u7684 $a, b, c$\uff0c\n\n\u5728\u4ee4 \n$$l_{i, 3} = l_{i, 0}$$ \n\n$$l_{i, 4} = l_{i, 1}$$\n\n\u5219\u7c7b\u578b\u4e3a $d$ \u7684\u7b2c $i$ \u4e2a\u957f\u65b9\u4f53\u7684\u9ad8\u4e3a $l_{i, d +2}$\uff0c\u957f\u5bbd\u4e3a $l_{i, d}$ \u4ee5\u53ca $l_{i, d + 1}$\uff0c\n\n\u8fd9\u6837\u5728 $high_{i, d}$ \u65f6\u548c\u5904\u7406\u4e24\u4e2a\u957f\u65b9\u4f53\u5806\u5728\u4e00\u8d77\u65f6\u662f\u5426\u5408\u6cd5\u5c31\u65b9\u4fbf\u591a\u4e86\u3002\n\n~~~cpp\n#include <cstdio>\n#include <iostream>\nusing namespace std;\n\nconst int N = 110;\n\nint l[N][5], f[N][N][5];\n\nint length (int x, int d) { // \u8ba1\u7b97\u7b2c x \u4e2a\u957f\u65b9\u4f53 d \u7c7b\u578b\u7684\u957f\u65b9\u4f53\u7684\u957f\n\treturn max (l[x][d], l[x][d + 1]);\n}\n\nint width (int x, int d) { // \u8ba1\u7b97\u7b2c x \u4e2a\u957f\u65b9\u4f53 d \u7c7b\u578b\u7684\u957f\u65b9\u4f53\u7684\u5bbd\n\treturn min (l[x][d], l[x][d + 1]);\n}\n\nbool check (int x, int d1, int y, int d2) { // \u5224\u65ad\u4e0a\u4e0b\u653e\u7f6e\u662f\u5426\u5408\u6cd5\n\treturn (length (x, d1) <= length (y, d2)) && (width (x, d1) <= width (y, d2));\n}\n\nint main() {\n\tint n, m; scanf (\"%d%d\", &n, &m);\n\tfor (int i = 1; i <= n; ++i) {\n\t\tscanf (\"%d%d%d\", &l[i][0], &l[i][1], &l[i][2]);\n\t\tl[i][3] = l[i][0]; l[i][4] = l[i][1];\n\t}\n\tint ans = 0;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 1; j <= m; ++j) {\n\t\t\tfor (int k = 0; k < i; ++k) {\n\t\t\t\tfor (int d1 = 0; d1 <= 2; ++d1) {\n\t\t\t\t\tfor (int d2 = 0; d2 <= 2; ++d2) {\n\t\t\t\t\t\tf[i][j][d1] = max (f[i][j][d1], f[k][j - 1][d2] + l[i][d1 + 2]); // \u53e6\u8d77\u4e00\u5806\u67f1\u5b50\n\t\t\t\t\t\tif (check (i, d1, k, d2)) {\n\t\t\t\t\t\t\tf[i][j][d1] = max (f[i][j][d1], f[k][j][d2] + l[i][d1 + 2]); // \u653e\u5728\u5728\u4ee5\u524d\u7684\u67f1\u5b50\u4e0a\u9762\n\t\t\t\t\t\t}\n\t\t\t\t\t\tans = max (ans, f[i][j][d1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf (\"%d\", ans);\n\treturn 0;\n}\n~~~",
        "postTime": 1649811503,
        "uid": 186091,
        "name": "wzy2021",
        "ccfLevel": 6,
        "title": "P5760"
    },
    {
        "content": "\u56e0\u4e3a\u4efb\u610f\u540e\u4e00\u5806\u7684\u7f16\u53f7\u4e00\u5b9a\u6bd4\u524d\u4e00\u5806\u5927\uff0c\u6240\u4ee5\u6ee1\u8db3\u65e0\u540e\u6548\u6027\u7684\u539f\u5219\uff0c\u6211\u4eec\u8003\u8651dp\u3002\n\n\u9996\u5148\u7ef4\u62a4\u4e00\u4e2a$F_{i,j}$\u6570\u7ec4\uff0c\u8868\u793a\u4ece\u79ef\u6728$i$\u5230\u79ef\u6728$j$\u6700\u591a\u80fd\u5806\u591a\u9ad8\uff0c\u6bcf\u79cd\u79ef\u6728\u6709\u4e09\u79cd\u5806\u6cd5\uff0c\u679a\u4e3e\u5806\u6cd5\u7ec4\u5408\u5373\u53ef\uff0c\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u6109\u5feb\u5730\u8fdb\u884cdp\u3002\n\n\u5b9a\u4e49$dp_{i,k}$\u8868\u793a\u7b2c$k$\u7ec4\u4ee5$i$\u7ed3\u5c3e\u7684\u6700\u5927\u9ad8\u5ea6\uff0c\u679a\u4e3e\u7ec4\u6570\uff0c\u8d77\u70b9\u548c\u7ec8\u70b9\u5c31\u53ef\u4ee5\u8f7b\u6613\u5730\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\u3002\n\n```cpp\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\ntypedef long long LL;\nLL n , m , dp[105][105] , f[105][105][3] , F[105][105];\n//f[i][j][p]\u8868\u793a\u4ecei\u5230j\u9009\u79ef\u6728\u5806\uff0c\u4e14\u5fc5\u9009\u7b2cj\u4e2a\u4ee5\u7b2cp\u79cd\u65b9\u5f0f\u5806\u7684\u6700\u5927\u9ad8\u5ea6\nstruct node {\n\tLL a , b , c;\n}a[105];\nbool check(LL x , LL y , LL p , LL q) {\n\tLL A , b , c , d;\n\tif(p == 1) {A = a[x].b;b = a[x].c;}\n\telse if(p == 2) {A = a[x].a;b = a[x].c;}\n\telse if(p == 3) {A = a[x].a;b = a[x].b;}\n\tif(q == 1) {c = a[y].b;d = a[y].c;}\n\telse if(q == 2) {c = a[y].a;d = a[y].c;}\n\telse if(q == 3) {c = a[y].a;d = a[y].b;}\n\tif(c <= A) if(d <= b) return true;\n\tif(c <= b) if(d <= A) return true;\n\treturn false;\n} //x\u53f7\u79ef\u6728\u4ee5\u7b2cp\u79cd\u65b9\u5f0f\u5806\uff0cy\u53f7\u79ef\u6728\u4ee5\u7b2cq\u79cd\u65b9\u5f0f\u5806\u662f\u5426\u5408\u6cd5\nint main() {\n\tscanf(\"%lld %lld\" , &n , &m);\n\tfor (LL i = 1; i <= n; ++i) scanf(\"%lld %lld %lld\" , &a[i].a , &a[i].b , &a[i].c);\n\tfor (LL i = 1; i <= n; ++i) {\n\t\tfor (LL j = i; j <= n; ++j) {\n\t\t\tf[i][j][0] = a[j].a;\n\t\t\tf[i][j][1] = a[j].b;\n\t\t\tf[i][j][2] = a[j].c;\n\t\t\tif(i != j){\n\t\t\t\tfor (LL k = j - 1; k >= i; --k) {\n\t\t\t\t\tif(check(k , j , 1 , 1)) f[i][j][0] = max(f[i][j][0] , f[i][k][0] + a[j].a);\n\t\t\t\t\tif(check(k , j , 1 , 2)) f[i][j][1] = max(f[i][j][1] , f[i][k][0] + a[j].b);\n\t\t\t\t\tif(check(k , j , 1 , 3)) f[i][j][2] = max(f[i][j][2] , f[i][k][0] + a[j].c);\n\t\t\t\t\tif(check(k , j , 2 , 1)) f[i][j][0] = max(f[i][j][0] , f[i][k][1] + a[j].a);\n\t\t\t\t\tif(check(k , j , 2 , 2)) f[i][j][1] = max(f[i][j][1] , f[i][k][1] + a[j].b);\n\t\t\t\t\tif(check(k , j , 2 , 3)) f[i][j][2] = max(f[i][j][2] , f[i][k][1] + a[j].c);\n\t\t\t\t\tif(check(k , j , 3 , 1)) f[i][j][0] = max(f[i][j][0] , f[i][k][2] + a[j].a);\n\t\t\t\t\tif(check(k , j , 3 , 2)) f[i][j][1] = max(f[i][j][1] , f[i][k][2] + a[j].b);\n\t\t\t\t\tif(check(k , j , 3 , 3)) f[i][j][2] = max(f[i][j][2] , f[i][k][2] + a[j].c);//\u679a\u4e3e3*3=9\u79cd\u5806\u6cd5\u8fdb\u884c\u8f6c\u79fb\n\t\t\t\t}\n\t\t\t}\n\t\t\tF[i][j] = F[i][j - 1];\n\t\t\tF[i][j] = max(max(F[i][j] , f[i][j][0]) , max(f[i][j][1] , f[i][j][2]));//\u5f52\u7eb3\n\t\t}\n\t}\n\tfor (LL k = 1; k <= m; ++k) {\n\t\tfor (LL i = k; i <= n; ++i) {\n\t\t\tfor (LL j = i; j <= n; ++j) {\n\t\t\t\tdp[j][k] = max(dp[j][k] , dp[i - 1][k - 1] + F[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\" , dp[n][m]);\n\treturn 0;\n}\n\n```",
        "postTime": 1575764392,
        "uid": 171554,
        "name": "Reanap",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5760 \u3010[NOI1997]\u79ef\u6728\u6e38\u620f\u3011"
    }
]
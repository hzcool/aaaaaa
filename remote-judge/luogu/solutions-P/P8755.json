[
    {
        "content": "# \u4e00\u3001\u9898\u76ee\u63cf\u8ff0\uff1a\n[\u539f\u9898\u94fe\u63a5](https://www.luogu.com.cn/problem/P8755)\n\u8bf7\u5927\u5bb6\u5728\u539f\u9898\u67e5\u770b\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\n# \u4e8c\u3001\u601d\u8def\uff1a\n## 1.\u7eaf\u6a21\u62df\uff1a\n\u8fd9\u662f\u5f88\u5bb9\u6613\u60f3\u5230\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e00\u7ef4\u8868\u793a\u673a\u5668\uff0c\u7b2c\u4e8c\u7ef4\u8868\u793a\u5f53\u524d\u65f6\u95f4\uff0c\u91cc\u9762\u5b58\u50a8\u5f53\u524d\u7b97\u529b\uff0c\u5f53\u63a5\u5230\u4efb\u52a1\u65f6\uff0c\u4e0e\u6240\u9700\u7b97\u529b\u8fdb\u884c\u6bd4\u8f83\uff0c\u82e5\u53ef\u4ee5\u5904\u7406\uff0c\u5c06 $b$ \u673a\u5668 $a \\sim a+c-1$ \u65f6\u95f4\u7684\u7b97\u529b\u51cf\u53bb $d$ \uff0c\u7531\u4e8e\u662f\u533a\u95f4\u5904\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u7528[\u5dee\u5206](https://baike.baidu.com/item/%E5%B7%AE%E5%88%86/10349967?fromModule=lemma-qiyi_sense-lemma)\uff08\u5bf9\u5dee\u5206\u4e0d\u518d\u89e3\u91ca\uff0c\u53ef\u4ee5\u5728\u8fde\u63a5\u91cc\u770b\uff09\u3002\n\n\u8fd9\u4e2a\u7b97\u6cd5 $\\color{red}40$ \u5206\u3002\n\n## 2.\u5806\uff1a\n\u4e0a\u9762\u7684\u7b97\u6cd5\u6709\u7a7a\u95f4\u4e0e\u65f6\u95f4\u4e0a\u7684\u53cc\u91cd\u4e0d\u8db3\uff0c\u5728\u4f18\u5316\u65f6\uff0c\u6211\u4eec\u5e94\u5148\u60f3\u5230\u4ec0\u4e48\u662f\u201c\u4e0d\u91cd\u8981\u7684\u201d\u3002\n\n1. \u9898\u76ee\u53ea\u8981\u6c42\u8f93\u51fa\u6bcf\u4e00\u6b21\u7684 $b$ \u673a\u5668\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u53ea\u53bb\u5904\u7406\u5f53\u524d\u7684 $b$ \u673a\u5668\u3002\n\n2. \u9700\u8981\u8f93\u51fa\u6bcf\u4e00\u6b21\u6d3e\u53d1\u4eba\u7269\u540e\u7684\u4fe1\u606f\uff0c\u800c\u4e0d\u662f\u6bcf\u65f6\u6bcf\u523b\uff0c\u6240\u4ee5\u6211\u4eec\u4ee5\u6bcf\u4e00\u4e2a\u4efb\u52a1\u4e3a\u5355\u4f4d\uff0c\u8fdb\u884c\u5904\u7406\u3002\n\n\u57fa\u4e8e\u4efb\u52a1\uff0c\u663e\u800c\u6613\u89c1\u5e94\u8be5\u4ee5\u4efb\u52a1\u7ed3\u675f\u65f6\u95f4\u5148\u540e\u5f39\u51fa\uff0c\u9898\u76ee\u5e76\u6ca1\u6709\u4fdd\u8bc1\u7ed3\u675f\u65f6\u95f4\u7684\u5148\u540e\u4e0e\u8f93\u5165\u5148\u540e\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u5c31\u5e94\u8be5\u52a8\u6001\u7ef4\u62a4\u6700\u5c0f\u503c\uff0c\u81ea\u7136\u5c31\u6709\u4e86\u5806\u3002\n\n### \u5177\u4f53\u5b9e\u73b0\uff1a\n\u5efa\u7acb\u4e00\u4e2a\u4f18\u5148\u961f\u5217\u5b58\u653e\u7ed3\u675f\u65f6\u95f4\u4e0e\u6b64\u4efb\u52a1\u6240\u8017\u7b97\u529b\uff0c\u4ee5\u7ed3\u675f\u65f6\u95f4\u4ece\u65e9\u5230\u665a\u6392\u5217\uff1a\n```\nstruct Computer{\n\tlong long EndTime,F;//EndTime\u8868\u793a\u5f53\u524d\u4efb\u52a1\u7ed3\u675f\u65f6\u95f4\uff0cF\u8868\u793a\u6240\u9700\u7b97\u529b \n\tbool operator<(const Computer &tmp)const{\n\t\treturn EndTime>tmp.EndTime;//\u4ece\u65e9\u5230\u665a\u8bb0\u5f55\u7ed3\u675f\u65f6\u95f4 \n\t}\n};\npriority_queue<Computer> que[szl];\n```\n\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u6d3e\u53d1\u4efb\u52a1\uff0c\u66f4\u65b0\u7b97\u529b\uff0c\u5982\u679c\u6b64\u4efb\u52a1\u5df2\u7ecf\u7ed3\u675f\uff0c\u6dfb\u52a0\u56de\u7b97\u529b\uff0c\u5e76\u5f39\u51fa\u4efb\u52a1\uff1a\n```\nif(v[b]<d){//\u82e5\u8fd8\u662f\u4e0d\u80fd\u63a5\u4efb\u52a1 \n\tcout<<-1<<endl;\n\tcontinue;\n}\nque[b].push({a+c,d});//\u63a5\u4efb\u52a1\nv[b]-=d;//\u6d88\u8017\u7b97\u529b\ncout<<v[b]<<endl;\n```\n\n# END\n\n\u8fd9\u662f\u6211\u7b2c\u4e00\u7bc7\u9898\u89e3\uff0c\u521b\u4f5c\u4e0d\u6613\uff0c\u5e0c\u671b\u7ba1\u7406\u5458\u80fd\u901a\u8fc7\uff0c\u7ba1\u7406\u5458\u5e78\u82e6\u4e86\u3002",
        "postTime": 1672989101,
        "uid": 580608,
        "name": "lupengheyyds",
        "ccfLevel": 0,
        "title": "P8755\u9898\u89e3"
    },
    {
        "content": "# \u9898\u76ee\u63cf\u8ff0\n\n[[\u84dd\u6865\u676f 2021 \u7701 AB2] \u8d1f\u8f7d\u5747\u8861](https://www.luogu.com.cn/problem/P8755)\n\n# \u7b97\u6cd5\u601d\u8def\n\n\u770b\u5230\u9898\u76ee\uff0c\u4e00\u4e0b\u5b50\u5c31\u60f3\u5230\u4e86**\u5806**\uff0c\u7ef4\u62a4\u4e00\u4e2a\u65f6\u95f4\u7684\u5c0f\u6839\u5806\uff0c\u5728\u65f6\u523b $a_{i}$\uff0c\u5982\u679c\u5806\u9876\u6709\u8ba1\u7b97\u673a\u5b8c\u6210\u4e86\uff0c\u5c31\u628a\u7b97\u529b\u9000\u56de\u6765\uff0c\u7136\u540e\u5224\u65ad\u8ba1\u7b97\u673a $b_{i}$ \u80fd\u5426\u5206\u914d\u4efb\u52a1\uff0c\u4e0d\u80fd\u5219\u8f93\u51fa $-1$\uff0c\u80fd\u5c31\u628a\u8ba1\u7b97\u673a $b_{i}$ \u7684\u7b97\u529b\u51cf\u53bb\u5360\u7528\u7684\u7b97\u529b\uff0c\u7136\u540e\u8f93\u51fa\u5269\u4f59\u7b97\u529b\u5c31\u884c\u4e86\u3002\n\n### \u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(m \\log n)$\u3002\n\n## \u4ee3\u7801\n```\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll N=200010;\nstruct computer\n{\n\tll times,capacity,idx;//\u65f6\u95f4\uff0c\u8981\u7528\u7b97\u529b\uff0c\u8ba1\u7b97\u673a\u7f16\u53f7\n\tbool operator<(const computer &x)const//\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\n\t{\n\t\treturn times>x.times;\n\t}\n};\nll n,m,v[N],a[N],b[N],c[N],d[N];\npriority_queue<computer> heap;\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>v[i];//\u8f93\u5165\u7b97\u529b\n\t}\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tcin>>a[i]>>b[i]>>c[i]>>d[i];\n\t\twhile(heap.size()&&a[i]>=heap.top().times)//\u5982\u679c\u6709\u8ba1\u7b97\u673a\u5b8c\u6210\u4e86\u4efb\u52a1\n\t\t{\n\t\t\tv[heap.top().idx]+=heap.top().capacity;//\u9000\u56de\u7b97\u529b\n\t\t\theap.pop();\n\t\t}\n\t\tif(v[b[i]]<d[i])//\u5982\u679c\u5269\u4f59\u7b97\u529b\u4e0d\u591f\n\t\t{\n\t\t\tcout<<\"-1\\n\";\n\t\t\tcontinue;\n\t\t}\n\t\theap.push({a[i]+c[i],d[i],b[i]});\n\t\tv[b[i]]-=d[i];//\u53bb\u6389\u8981\u7528\u7b97\u529b\n\t\tcout<<v[b[i]]<<\"\\n\";//\u8f93\u51fa\u5269\u4f59\u7b97\u529b\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1681133815,
        "uid": 572727,
        "name": "lvzekai_big",
        "ccfLevel": 0,
        "title": "P8755 [\u84dd\u6865\u676f 2021 \u7701 AB2] \u8d1f\u8f7d\u5747\u8861 \u9898\u89e3"
    },
    {
        "content": "\u6734\u7d20\u7684\u60f3\u6cd5\u662f\u76f4\u63a5\u6a21\u62df\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u7ed9\u6bcf\u4e2a\u8ba1\u7b97\u673a\u5f00\u4e00\u4e2a\u5904\u7406\u5217\u8868\uff0c\u4e00\u9879\u4efb\u52a1\u65f6\u95f4\u4e00\u5230\u5c31\u628a\u5b83\u6254\u51fa\u53bb\uff0c\u4f46\u8fd9\u6837\u5fc5\u5b9a\u4f1a\u8d85\u65f6\u3002\n\n\u6211\u4eec\u60f3\uff0c\u5982\u679c\u4e00\u4e2a\u4efb\u52a1\u5b8c\u6210\u4e86\uff0c\u4f46\u4ed6\u540e\u9762\u53c8\u7528\u4e0d\u5230\u8fd9\u4e2a\u8ba1\u7b97\u673a\uff0c\u6211\u4eec\u8fd8\u6bcf\u6b21\u53bb\u5904\u7406\u5b83\u4e00\u4e0b\uff0c\u80af\u5b9a\u5f88\u6d6a\u8d39\u65f6\u95f4\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u7528\u5230\u8fd9\u4e2a\u8ba1\u7b97\u673a\u65f6\uff0c\u518d\u4e00\u6b21\u6027\u628a\u6240\u6709\u5b8c\u6210\u4e86\u4efb\u52a1\u7684\u8ba1\u7b97\u673a\u6254\u51fa\u53bb\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u7528\u5806\u6765\u7ef4\u62a4\u6bcf\u4e00\u4e2a\u8ba1\u7b97\u673a\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u64cd\u4f5c\uff0c\u6211\u4eec\u5f39\u51fa\u5728\u8fd9\u4e2a\u8ba1\u7b97\u673a\u4e2d\u6240\u6709\u7ed3\u675f\u65f6\u95f4\uff08\u5373\uff0c\u5f00\u59cb\u65f6\u95f4 + \u6301\u7eed\u65f6\u95f4\uff09\u6bd4\u63d2\u5165\u7684\u4efb\u52a1\u7684\u5f00\u59cb\u65f6\u95f4\u5c0f\u7684\u8ba1\u7b97\u673a\uff0c\u5728\u5f39\u51fa\u7684\u8fc7\u7a0b\u4e2d\u8ba1\u7b97\u65b0\u7684\u300c\u7b97\u529b\u300d\uff0c\u5224\u65ad\u7b97\u529b\u662f\u5426\u591f\u7528\uff0c\u82e5\u591f\u7528\u5c31\u63d2\u5165\uff0c\u5e76\u66f4\u65b0\u7b97\u529b\uff0c\u5426\u5219\u8f93\u51fa $-1$ \u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define rep(i, l, r) for(auto i = (l); i <= (r); ++i)\n#define pb push_back\n\nconst int N = 2e5 + 10;\nint a[N];\npriority_queue<pair<int, int>, vector<pair<int, int>>, greater<pair<int, int>>> q[N];\n// .first => end time, .end => compute ability\n\nvoid solve() {\n  int t, id, ut, comp;\n  cin >> t >> id >> ut >> comp;\n  while (!q[id].empty() && q[id].top().first <= t) {\n    a[id] += q[id].top().second;\n    q[id].pop();\n  }\n  if (a[id] < comp) return puts(\"-1\"), void(); else {\n    int et = t + ut;\n    q[id].push({et, comp}); a[id] -= comp; \n    cout << a[id] << '\\n';\n  }\n}\n\nint main() {\n  int n, m;\n  cin >> n >> m; \n  rep (i, 1, n) cin >> a[i];\n  while (m--) {\n    solve();\n  }\n}\n```",
        "postTime": 1671609553,
        "uid": 219791,
        "name": "tZERO\u3061\u3083\u3093",
        "ccfLevel": 0,
        "title": "p8755"
    }
]
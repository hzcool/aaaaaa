[
    {
        "content": "\u672c\u9898\u53ef\u4ee5\u4f7f\u7528**\u83ab\u961f**\u601d\u60f3\u3002\n\n\u5bf9\u4e8e\u6811\u4e0a\u6bcf\u4e2a\u7ed3\u70b9\uff0c\u6309\u7167 dfs \u5e8f\u6253\u4e0a\u65f6\u95f4\u6233\u3002\u7136\u540e\u6bcf\u4e00\u4e2a\u70b9\u7684\u5b50\u6811\u91cc\u7684\u7b54\u6848\u5c31\u53ef\u4ee5\u8f6c\u5316\u4e3a\u4e00\u4e2a\u533a\u95f4\u91cc\u7684\u7b54\u6848\uff0c\u53ef\u4ee5\u4f7f\u7528\u83ab\u961f\u3002\n\n\u83ab\u961f\u4e2d\u7684 `add` \u548c `del` \u51fd\u6570\u53ef\u4ee5\u4f7f\u7528**\u591a\u91cd**\u96c6\u5408\u7ef4\u62a4\uff0c\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u662f\u76ee\u524d\u6240\u6709\u51fa\u73b0\u7684\u989c\u8272**\u51fa\u73b0\u7684\u6b21\u6570**\u3002\u5177\u4f53\u5730\uff0c`add` \u51fd\u6570\u52a0\u5165\u4e00\u4e2a\u7ed3\u70b9\u65f6\uff0c\u628a\u5b83\u7684\u989c\u8272\u539f\u6765\u51fa\u73b0\u7684\u6b21\u6570\u4ece\u96c6\u5408\u4e2d\u5220\u9664\uff0c\u5b83\u7684\u989c\u8272\u51fa\u73b0\u7684\u6b21\u6570 $+1$\uff0c\u7136\u540e\u628a\u73b0\u5728\u7684\u8fd9\u4e2a\u6b21\u6570\u653e\u5165\u96c6\u5408\uff1b`del` \u51fd\u6570\u4e5f\u662f\u7c7b\u4f3c\u7684\u3002\u4e00\u4e2a\u533a\u95f4\u89e3\u51b3\u5b8c\u540e\uff0c\u5982\u679c\u96c6\u5408\u4e2d\u6700\u5c0f\u7684\u6570\u4e0e\u6700\u5927\u7684\u6570\u76f8\u7b49\uff0c\u5c31\u8bf4\u660e\u8fd9\u4e2a\u7ed3\u70b9\u4e3a\u6839\u7684\u5b50\u6811\u662f\u201c\u989c\u8272\u5e73\u8861\u6811\u201d\uff0c\u7b54\u6848\u52a0\u4e0a $1$ \u5373\u53ef\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u628a\u5757\u957f\u8bbe\u7f6e\u4e3a $\\sqrt{n}$\uff0c\u90a3\u4e48\u5c06\u4f1a TLE\u3002\u8003\u8651\u4f7f\u7528\u5e38\u6570\u5757\u957f\uff0c\u7ecf\u6d4b\u8bd5\uff0c\u5757\u957f\u4e3a $6000$ \u65f6\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n\u653e\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#pragma GCC target(\"avx,avx2\") // \u6307\u4ee4\u96c6\u4f18\u5316\nusing namespace std;\ntypedef pair<int,int> pii;\nint f[200001],c[200001],l[200001],t[200001],m[200001],o;\nvector<int> g[200001];\nvector<pii> q;\nmultiset<int> w; // \u4f7f\u7528 STL \u591a\u91cd\u96c6\u5408 multiset\ninline int read(){\n  int x=0; char c=getchar();\n  while(!isdigit(c))c=getchar();\n  while(isdigit(c))x=(x<<1)+(x<<3)+(c^48),c=getchar();\n  return x;\n} // \u5feb\u901f\u8bfb\u5165\uff0c\u7528\u4e8e\u5361\u5e38\nvoid add(int x){\n  if(t[c[x]])w.erase(w.find(t[c[x]]));\n  w.emplace(++t[c[x]]);\n}\nvoid del(int x){\n  w.erase(w.find(t[c[x]]));\n  if(--t[c[x]])w.emplace(t[c[x]]);\n}\nvoid dfs(int u){\n  m[l[u]=++o]=u;\n  for(int i:g[u])dfs(i);\n  q.emplace_back(l[u],o); // \u8be5\u7ed3\u70b9\u7ba1\u8f96\u7684\u533a\u95f4\n}\nint main(){\n  int n=read(),s=0,L=1,R=0,sq=6000;\n  for(int i=1;i<=n;i++)\n    c[i]=read(),g[f[i]=read()].emplace_back(i);\n  dfs(1); // \u9884\u5904\u7406\n  sort(q.begin(),q.end(),[&](pii a,pii b){\n    if(a.first/sq!=b.first/sq)return a.first<b.first;\n    return a.first/sq&1?a.second>b.second:a.second<b.second;\n    }); // \u5947\u5076\u6027\u6392\u5e8f\n  for(auto [l,r]:q){\n    while(L>l)add(m[--L]);\n    while(R<r)add(m[++R]);\n    while(L<l)del(m[L++]);\n    while(R>r)del(m[R--]);\n    s+=*w.begin()==*prev(w.end());\n  } // \u83ab\u961f\u7b97\u6cd5\n  printf(\"%d\\n\",s);\n  return 0;\n}",
        "postTime": 1682677967,
        "uid": 556366,
        "name": "zyc212303",
        "ccfLevel": 5,
        "title": "[\u84dd\u6865\u676f 2023 \u7701 A] \u989c\u8272\u5e73\u8861\u6811 \u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\n\u7ed9\u5b9a\u4e00\u68f5\u6811\uff0c\u6c42\u6709\u591a\u5c11\u68f5\u5b50\u6811\uff1a\u51fa\u73b0\u8fc7\u7684\u989c\u8272\u51fa\u73b0\u6b21\u6570\u5747\u76f8\u7b49\u3002 \n\n$n\\leq2\\times{10}^5$\n\n### \u505a\u6cd5\n\nyt \u8bf4\uff1a\u201c\u8981\u7528\u6811\u4e0a\u542f\u53d1\u5f0f\u5408\u5e76\u3002\u201d\u4e8e\u662f\u8fd9\u9898\u6211\u4eec\u5c31\u7528\u4e86\u6811\u4e0a\u542f\u53d1\u5f0f\u5408\u5e76\u3002\n\n\u4e00\u770b\u5b50\u6811\u989c\u8272\u5c31\u611f\u89c9\u5f88\u677f\uff0c\u7136\u540e\u989c\u8272\u51fa\u73b0\u6b21\u6570\u5747\u76f8\u7b49\u5c31\u9700\u8981\u8bb0\u5f55 $\\min$ \u548c $\\max$ \uff0c\u5224\u65ad\u662f\u5426\u76f8\u7b49\u5373\u53ef\u3002\u800c\u8bb0\u5f55 $\\min$ $\\max$ \u53ea\u9700\u8981\u5f00\u4e24\u4e2a\u6876\uff0c\u6bcf\u6b21\u52a0\u70b9\u5220\u70b9\u7684\u65f6\u5019\u66f4\u65b0\u3002\n\n\u7136\u540e\u8fd9\u9898\u552f\u4e00\u6709\u4e00\u70b9\u7ec6\u8282\u662f\uff1a\u6211\u4eec\u7ef4\u62a4\u7684\u662f\u51fa\u73b0\u8fc7\u7684\u6700\u5c0f\u503c\uff0c\u5373\u4e0d\u4f1a\u7b49\u4e8e 0\u3002\u90a3\u4e48\u6211\u4eec\u5728\u5bf9\u4e00\u79cd\u989c\u8272\u8fdb\u884c $add$ \u7684\u65f6\u5019\uff0c\u5b83\u53ef\u80fd\u5728\u6b64\u524d\u6ca1\u6709\u51fa\u73b0\uff0c\u7136\u540e\u53d8\u6210\u65b0\u7684\u6700\u5c0f\u503c\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$ \u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,num_edge,ans,mi,ma;\nstruct Edge{\n\tint to,next;\n}e[400010];\nint head[200010];\nint a[200010];\nint siz[200010];\nint son[200010];\nint t[2][200010];\nvoid add_edge(int from,int to){\n\te[++num_edge].to=to;\n\te[num_edge].next=head[from];\n\thead[from]=num_edge;\n}\nvoid add(int x){\n\tt[1][t[0][x]]--;\n\tt[0][x]++;\n\tt[1][t[0][x]]++;\n\tif(t[0][x]<mi) mi=t[0][x];\n\tif(t[0][x]>ma) ma=t[0][x];\n\tif(!t[1][mi]) mi++;\n}\nvoid del(int x){\n\tt[1][t[0][x]]--;\n\tt[0][x]--;\n\tt[1][t[0][x]]++;\n\tif(t[0][x]&&t[0][x]<mi) mi=t[0][x];\n\tif(!t[1][ma]) ma--;\n}\nvoid dfs0(int u){\n\tint v;\n\tsiz[u]=1;\n\tfor(int i=head[u];i;i=e[i].next){\n\t\tv=e[i].to;\n\t\tdfs0(v);\n\t\tif(siz[v]>siz[son[u]]) son[u]=v;\n\t\tsiz[u]+=siz[v];\n\t}\n}\nvoid dfs1(int u,int ty){\n\tint v;\n\tif(!ty) del(a[u]);\n\telse add(a[u]);\n\tfor(int i=head[u];i;i=e[i].next){\n\t\tv=e[i].to;\n\t\tdfs1(v,ty);\n\t}\n}\nvoid dfs2(int u){\n\tint v;\n\tfor(int i=head[u];i;i=e[i].next){\n\t\tv=e[i].to;\n\t\tif(v==son[u]) continue;\n\t\tdfs2(v);\n\t\tdfs1(v,0);\n\t}\n\tif(son[u]) dfs2(son[u]);\n\tfor(int i=head[u];i;i=e[i].next){\n\t\tv=e[i].to;\n\t\tif(v==son[u]) continue;\n\t\tdfs1(v,1);\n\t}\n\tadd(a[u]);\n\tif(mi==ma) ans++;\n}\nint main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\tcin>>n;\n\tfor(int i=1,x;i<=n;i++){\n\t\tcin>>a[i]>>x;\n\t\tadd_edge(x,i);\n\t}\n\tdfs0(1);\n\tmi=1;\n\tdfs2(1);\n\tcout<<ans;\n\treturn 0;\n}",
        "postTime": 1682851741,
        "uid": 593749,
        "name": "scallion",
        "ccfLevel": 0,
        "title": "P9233"
    },
    {
        "content": "\u8fd9\u9053\u9898\u53ef\u4ee5\u7528\u6811\u4e0a\u542f\u53d1\u5f0f\u5408\u5e76\u89e3\u51b3\u3002\u76f4\u63a5\u4f7f\u7528\u542f\u53d1\u5f0f\u5408\u5e76\u7ef4\u62a4\u5b50\u6811\u4e2d\u6bcf\u79cd\u989c\u8272\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u7136\u540e\u5f00\u4e00\u4e2a\u6876 $t_i$\uff0c\u8bb0\u5f55\u6709\u591a\u5c11\u79cd\u989c\u8272\u51fa\u73b0\u4e86 $i$ \u6b21\u3002\u8bbe\u5f53\u524d\u8282\u70b9\u4e3a $p$\uff0c\u989c\u8272\u4e3a $c$\uff0c\u6bcf\u6b21\u53ea\u9700\u8981\u5224\u65ad $c\\times t_c$ \u662f\u5426\u7b49\u4e8e $siz_p$ \u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathrm O(n\\log n)$\n\n```cpp\n#include<iostream>\n#include<vector>\nusing namespace std;\nconst int maxn = 2000005;\nint c[maxn], p[maxn], cnt[maxn], t[maxn];\nint son[maxn], siz[maxn];\nvector<int> ch[maxn];\nvoid build(int x)\n{\n    siz[x] = 1;\n    for(auto q: ch[x])\n    {\n        build(q);\n        siz[x] += siz[q];\n        if(siz[q] > siz[son[x]]) son[x] = q;\n    }\n}\nvoid add(int x)\n{\n    t[cnt[c[x]]]--;\n    cnt[c[x]]++;\n    t[cnt[c[x]]]++;\n    for(auto q: ch[x])\n    {\n        add(q);\n    }\n}\nvoid rem(int x)\n{\n    t[cnt[c[x]]]--;\n    cnt[c[x]]--;\n    t[cnt[c[x]]]++;\n    for(auto q: ch[x])\n    {\n        rem(q);\n    }\n}\nint ans = 0;\nvoid dfs(int x, int f)\n{\n    for(auto q: ch[x])\n    {\n        if(q != son[x])\n        dfs(q, 0);\n    }\n    if(son[x])\n    dfs(son[x], 1);\n    t[cnt[c[x]]]--;\n    cnt[c[x]]++;\n    t[cnt[c[x]]]++;\n    for(auto q: ch[x])\n    {\n        if(q != son[x])\n        add(q);\n    }\n    if(cnt[c[x]]*t[cnt[c[x]]] == siz[x]) ans++;\n    if(!f) rem(x);\n}\nint read()\n{\n    int n = 0, f = 1;\n    char c = getchar();\n    while(c < '0' || c > '9') { if(c == '-') f = -1; c = getchar(); }\n    while(c >= '0' && c <= '9') n = n*10+(c^48), c = getchar();\n    return n*f;\n}\nint main()\n{\n    int n;\n    n = read();\n    for(int i = 1; i <= n; i++)\n    {\n        c[i] = read();\n        p[i] = read();\n        ch[p[i]].emplace_back(i);\n    }\n    build(1);\n    dfs(1, 1);\n    cout << ans;\n    return 0;\n}\n```",
        "postTime": 1684215597,
        "uid": 491708,
        "name": "JLGxy",
        "ccfLevel": 0,
        "title": "\u989c\u8272\u5e73\u8861\u6811 \u9898\u89e3"
    },
    {
        "content": "\u5b50\u6811\uff0c\u53d1\u73b0\u6bcf\u4e2a\u8282\u70b9\u7684\u7b54\u6848\u662f\u5176\u5b50\u6811\u7684\u53e0\u52a0\u3002\n\n\u8003\u8651\u9759\u6001\u94fe\u5206\u6cbb\u3002\n\n\u6bcf\u79cd\u989c\u8272\u7684\u7ed3\u70b9\u4e2a\u6570\u90fd\u76f8\u540c\u8fd9\u4e2a\u7ea6\u675f\u5f88\u4e11\uff0c\u5c06\u5b83\u8f6c\u5316\u4e00\u4e0b\uff1a\u7b49\u4ef7\u4e8e\u8fd9\u9897\u6811\u4e2d\u6709\u51fa\u73b0\u7684\u6570\u5b57\u7684\u51fa\u73b0\u6b21\u6570\u7684\u6700\u5927\u503c\u7b49\u4e8e\u6700\u5c0f\u503c\u3002\n\n\u90a3\u6700\u5927\u503c\u548c\u6700\u5c0f\u503c\u5982\u4f55\u7ef4\u62a4\uff1f\n\n\u7531\u4e8e\u6bcf\u6b21\u66f4\u6539\u53ea\u4f1a\u8ba9\u67d0\u4e2a\u6570\u7684\u51fa\u73b0\u6b21\u6570 $\\pm1$\uff0c\u8003\u8651\u7ef4\u62a4\uff1a$f_i$ \u8868\u793a\u989c\u8272\u4e3a $i$ \u7684\u6570\u51fa\u73b0\u4e86\u51e0\u6b21\uff0c$g_i$ \u8868\u793a\u6ee1\u8db3 $f_j=i$ \u7684 $j$ \u7684\u4e2a\u6570\u3002\n\n\u8fd9\u6837\u5c31\u80fd\u505a\u4e86\u3002\n\n[$\\color{green}{\\checkmark}$](https://www.luogu.com.cn/record/110194226)\u3002\n\n```cpp\nconst int N=2e5+3;\nint n,a[N],son[N],sz[N],f[N],g[N],res[2]={1,0},ans;\n//res_0: min, res_1: max\nstruct wt\n{\n\twt*nxt;\n\tint v;\n}E[N],*hd[N],*ind=E+1;\nil void E_add(re int u,re int v){return *++ind={hd[u],v},hd[u]=ind,void();}\n#define G_auto(i,u,v) for(re wt*i=hd[u];i&&(v=i->v);i=i->nxt)\nvoid dfs_1(re int u)\n{\n\tsz[u]=1;\n\tre int v;\n\tG_auto(i,u,v) dfs_1(v),sz[v]>sz[son[u]]&&(son[u]=v),sz[u]+=sz[v];\n\treturn;\n}\n#define cmax(x,y) ((x)<(y)&&((x)=(y)))\n#define cmin(x,y) ((x)>(y)&&((x)=(y)))\nil void Add(re int x){return --g[f[x]],++g[++f[x]],cmax(res[1],f[x]),f[x]==1&&(res[0]=1),!g[res[0]]&&(++res[0]),void();}\nil void Del(re int x){return --g[f[x]],++g[--f[x]],f[x]&&(cmin(res[0],f[x])),!g[res[1]]&&(--res[1]),void();}\nvoid dfs_M(re int u,re bool tag)\n{\n\ttag?Add(a[u]):Del(a[u]);\n\tre int v;\n\tG_auto(i,u,v) dfs_M(v,tag);\n\treturn;\n}\nvoid dfs_2(re int u)\n{\n\tre int v;\n\tG_auto(i,u,v) v^son[u]&&(dfs_2(v),dfs_M(v,false),7);\n\tson[u]&&(dfs_2(son[u]),7),Add(a[u]);\n\tG_auto(i,u,v) v^son[u]&&(dfs_M(v,true),7);\n\tans+=res[0]==res[1];\n\treturn;\n}\nvoid Solve()\n{\n\trd(n);\n\tfor(re int i=1,x;i<=n;++i) rd(a[i]),rd(x),E_add(x,i);\n\tdfs_1(1),dfs_2(1),prt(ans,'\\n');\n\treturn;\n}\n```",
        "postTime": 1683943661,
        "uid": 359113,
        "name": "elbissoPtImaerD",
        "ccfLevel": 0,
        "title": "P9233 \u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "\u6211\u4eec\u8003\u8651\u83ab\u961f\uff0c\u5c06\u5b50\u6811\u8be2\u95ee\u79bb\u7ebf\u4e0b\u6765\u53d8\u6210 $n$ \u4e2a\u533a\u95f4\u8be2\u95ee\u3002\n\n\u5728\u4e0b\u6587\uff0c\u6211\u5c06\u6570\u7ec4\u4e2d**\u540c\u4e00\u6570\u503c**\u7684\u5143\u7d20\u79f0\u4e3a**\u4e00\u79cd\u5143\u7d20**\u3002\n\n\u4e0b\u6587\u6ce8\u610f\u533a\u5206 $cnt$ \u4e0e $tot$\uff0c**\u4e00\u79cd\u5143\u7d20**\u548c**\u4e00\u4e2a\u5143\u7d20**\u3002\n\n\u7528 $cnt$ \u6570\u7ec4\u7ef4\u62a4\u989c\u8272\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u90a3\u4e48\u5982\u679c\u4e00\u4e2a\u8be2\u95ee\u6709\u8d21\u732e\uff0c\u5f53\u4e14\u4ec5\u5f53 $cnt$ \u6570\u7ec4\u4e2d\u6240\u6709\u975e\u96f6\u5143\u7d20\u90fd\u4e00\u6837\uff0c\u4e8e\u662f\u6211\u4eec\u518d\u7ef4\u62a4 $cnt$ \u6570\u7ec4\u4e2d\u6709**\u591a\u5c11\u79cd\u4e92\u4e0d\u76f8\u540c**\u7684\u5143\u7d20\u5373\u53ef\uff0c\u7528 $res$ \u8bb0\u5f55\uff0c\u90a3\u4e48\u5f53 $res$ \u7b49\u4e8e $1$ \u65f6\uff0c\u5168\u5c40\u7b54\u6848\u52a0\u4e00\u3002\n\n\u5177\u4f53\u800c\u8a00\uff0c\u6211\u4eec\u7528 $tot$ \u7ef4\u62a4\u5f53\u524d $cnt$ \u4e2d**\u6bcf\u79cd\u5143\u7d20**\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u5982\u679c $tot$ \u4e2d**\u67d0\u4e00\u4e2a\u5143\u7d20**\u4ece $0$ \u53d8\u4e3a $1$\uff08\u76f8\u5f53\u4e8e $cnt$ \u4e2d\u591a\u4e86**\u4e00\u79cd\u5143\u7d20**\uff09\uff0c\u5c06 $res$ \u52a0\u4e00\u3002\u53cd\u4e4b\uff0c\u5982\u679c $tot$ \u4e2d**\u67d0\u4e00\u4e2a\u5143\u7d20**\u4ece $1$ \u53d8\u4e3a $0$\uff08\u76f8\u5f53\u4e8e $cnt$ \u5c11\u4e86**\u4e00\u79cd\u5143\u7d20**\uff09\uff0c\u5c06 $res$ \u51cf\u4e00\u3002\n\n\u590d\u6742\u5ea6 $O(n \\sqrt{n})$\uff0c\u5b9e\u6d4b\u975e\u5e38\u5feb\uff0c\u76f8\u8f83\u4e8e\u6709\u4e00\u7bc7\u9898\u89e3\u7528\u83ab\u961f\u548c\u5e73\u8861\u6811\u7ef4\u62a4\u7684 $n \\sqrt{n} \\log n$ \u505a\u6cd5\u597d\u5f88\u591a\uff0c\u4e5f\u4e0d\u7528\u5361\u5e38\u3002\n\n\u6211\u7684\u4ee3\u7801\u5b9e\u73b0\u57fa\u672c\u6309\u7167\u6211\u8bb2\u7684\u5199\u7684\uff0c\u5176\u4e2d\u8bb0\u5f97\u7279\u5224 $cnt$ \u4e2d\u5143\u7d20\u4e3a $0$ \u7684\u60c5\u51b5\uff0c\u5982\u679c\u8fd8\u6709\u4e0d\u61c2\u53ef\u4ee5\u53cd\u590d\u7814\u8bfb\u4e00\u4e0b\u524d\u9762\u7684\u5185\u5bb9\uff0c\u6709\u95ee\u9898\u53ef\u4ee5\u79c1\u4fe1\u8054\u7cfb\u6216\u8005\u535a\u5ba2\u8bc4\u8bba\u3002\n\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5 + 5;\nint n, a[N], cnt[N], tot[N], res, siz[N], ans, m, pos[N], t, dfn[N], num, id[N];\nvector<int> e[N];\nstruct node {\n\tint l, r;\n} q[N];\nbool cmp(node i, node j) {\n\tif (pos[i.l] == pos[j.l]) {\n\t\tif (pos[i.l] & 1) return i.r < j.r;\n\t\treturn i.r > j.r;\n\t}\n\treturn i.l < j.l;\n}\nvoid dfs(int x) {\n\tsiz[x] = 1; dfn[x] = ++num; id[num] = x;\n\tfor (int y : e[x]) {\n\t\tdfs(y); siz[x] += siz[y];\n\t}\n\tq[++t] = {dfn[x], dfn[x] + siz[x] - 1};\n}\nvoid add(int x) {\n\tif (cnt[a[x]]) {\n\t\ttot[cnt[a[x]]]--;\n\t\tif (!tot[cnt[a[x]]]) res--;\t\n\t}\n\tcnt[a[x]]++;\n\ttot[cnt[a[x]]]++;\n\tif (tot[cnt[a[x]]] == 1) res++;\n}\nvoid del(int x) {\n\ttot[cnt[a[x]]]--;\n\tif (!tot[cnt[a[x]]]) res--;\n\tcnt[a[x]]--;\n\tif (cnt[a[x]]) {\n\t\ttot[cnt[a[x]]]++;\n\t\tif (tot[cnt[a[x]]] == 1) res++;\t\t\n\t}\n}\nint main() {\n\tcin >> n; m = sqrt(n);\n\tfor (int i = 1; i <= n; i++) {\n\t\tpos[i] = (i - 1) / m + 1;\n\t\tint x; cin >> a[i] >> x;\n\t\te[x].push_back(i);\n\t}\n\tdfs(1);\n\tsort(q + 1, q + n + 1, cmp);\n\tfor (int l = 1, r = 0, i = 1; i <= n; i++) {\n\t\twhile (l > q[i].l) add(id[--l]);\n\t\twhile (r < q[i].r) add(id[++r]);\n\t\twhile (l < q[i].l) del(id[l++]);\n\t\twhile (r > q[i].r) del(id[r--]);\n\t\tans += (res == 1);\n\t}\n\tcout << ans;\n\treturn 0;\n}\n```",
        "postTime": 1683815634,
        "uid": 366456,
        "name": "lyc_qwq",
        "ccfLevel": 0,
        "title": "P9233 [\u84dd\u6865\u676f 2023 \u7701 A] \u989c\u8272\u5e73\u8861\u6811 \u9898\u89e3"
    }
]
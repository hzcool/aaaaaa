[
    {
        "content": "\u4ee4 $x$ \u8868\u793a\u67d0\u65f6\u523b\u7684\u53f6\u7ed3\u70b9\u4e2a\u6570\u3002\r\n\r\n\u6211\u4eec\u7684\u601d\u8def\u662f\uff0c\u5f53 $x$ \u8f83\u5927\u7684\u65f6\u5019\u7528 `del` \u64cd\u4f5c\u5220\u53f6\u5b50\uff0c\u5f53 $x$ \u8f83\u5c0f\u7684\u65f6\u5019\u4e0d\u8fdb\u884c\u5220\u53f6\u5b50\u64cd\u4f5c\uff0c\u76f4\u63a5\u6c42\u51fa\u5f53\u524d\u7684\u6811\u7684\u7b54\u6848\u3002\r\n\r\n\u7ecf\u8fc7\u4e00\u4e9b\u5c1d\u8bd5\uff0c\u53ef\u4ee5\u53d1\u73b0\u6211\u4eec\u6700\u591a\u4f7f\u7528 $2x$ \u6b21\u64cd\u4f5c\u6765\u5f97\u5230\u7b54\u6848\u3002\r\n\r\n\u6211\u4eec\u5148\u6765\u8bc1\u660e\u4e00\u4e0b $2x$ \u6b21\u64cd\u4f5c\u662f\u8db3\u591f\u7684\u3002\u82e5\u5f53\u524d\u8fd8\u5269\u4e0b $k$ \u6b21\u64cd\u4f5c\uff0c\u6211\u4eec\u9700\u8981 $1$ \u6b21\u64cd\u4f5c\u62a5\u544a\u7b54\u6848\uff0c\u56e0\u6b64\u5269\u4e0b $k-1$ \u6b21\u64cd\u4f5c\u53ef\u7528\u3002\u6211\u4eec\u5c06\u5176\u5168\u90e8\u7528\u4e8e\u8ba1\u7b97\u7b54\u6848\uff0c\u90a3\u4e48\u6b64\u65f6\u53f6\u5b50\u7684\u4e2a\u6570\u6700\u591a\u4e3a $\\lfloor\\frac{k-1}2\\rfloor$\uff0c\u82e5\u66f4\u591a\u7684\u8bdd\u64cd\u4f5c\u6570\u5c06\u4e0d\u591f\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd8\u5269 $k$ \u6b21\u64cd\u4f5c\u65f6\uff0c\u82e5\u9009\u62e9\u5220\u53f6\u5b50\uff0c\u5219\u81f3\u5c11\u5220\u9664 $\\lfloor\\frac{k-1}2\\rfloor$ \u4e2a\u53f6\u5b50\u3002\r\n\r\n\u53ef\u4ee5\u53d1\u73b0\uff1a$\\sum_{i=1}^{142}\\left(\\lfloor\\frac{k-1}2\\rfloor+1\\right)\\gt 5000$\u3002\u56e0\u6b64\u8fd9\u6837\u662f\u5408\u7406\u7684\u3002\r\n\r\n\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u8981\u4e00\u4e2a\u80fd\u591f\u5728 $2x$ \u6b21\u64cd\u4f5c\u4ee5\u5185\u6c42\u51fa\u6709 $x$ \u4e2a\u53f6\u5b50\u7684\u6811\u7684\u8fb9\u6743\u548c\u7684\u505a\u6cd5\u3002\r\n\r\n\u4ee4 $\\mathrm{dist}(x,y)$ \u8868\u793a\u70b9 $i$ \u4e0e $j$ \u7684\u8ddd\u79bb\uff0c$d_i$ \u8868\u793a\u70b9 $i$ \u7684\u5ea6\u6570\u3002\r\n\r\n\u6211\u4eec\u76f4\u63a5\u5bf9\u6bcf\u6761\u8fb9\u8ba1\u7b97\u662f\u6ca1\u6cd5\u505a\u7684\uff0c\u56e0\u4e3a\u8fb9\u6570\u592a\u591a\u4e86\u3002\u6240\u4ee5\u4e00\u6b21\u67e5\u8be2\u8ddd\u79bb\u6211\u4eec\u8981\u5f97\u5230\u5f88\u591a\u8fb9\u7684\u4fe1\u606f\u3002\r\n\r\n\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u6bcf\u4e2a\u70b9\u5230\u6839\u7684\u8ddd\u79bb\u8fdb\u884c\u8ba1\u7b97\uff08\u4e4b\u540e\u9ed8\u8ba4\u5c06 $1$ \u5f53\u505a\u6839\uff09\u3002\u7ecf\u8fc7\u4e00\u4e9b\u63a8\u5bfc\u548c\u5c1d\u8bd5\uff0c\u53ef\u4ee5\u53d1\u73b0\u7b54\u6848\u5c31\u662f\u4e0b\u9762\u7684\u5f0f\u5b50\uff1a\r\n\r\n$$\r\n\\sum_{i=2}^n \\mathrm dist(1,i)\\cdot(2-d_i)\r\n$$\r\n\r\n\u6211\u4eec\u6765\u8bc1\u660e\u4e00\u4e0b\u8fd9\u4e2a\u4e1c\u897f\u3002\r\n\r\n\u5bf9\u6bcf\u6761\u8fb9\u8003\u8651\u5b83\u88ab\u8ba1\u7b97\u4e86\u51e0\u6b21\u3002\r\n\r\n\u5b9a\u4e49 $S(u)$ \u8868\u793a $u$ \u5b50\u6811\u5185\u7684\u70b9\u96c6\uff0c$|S(u)|$ \u8868\u793a $S(u)$ \u7684\u5927\u5c0f\uff0c\u4e5f\u5c31\u662f $u$ \u7684\u5b50\u6811\u5927\u5c0f\u3002\r\n\r\n\u5bf9\u4e8e $u$ \u5230\u5b83\u7236\u4eb2\u7684\u8fb9\uff0c$u$ \u5b50\u6811\u5185\u7684\u70b9\u5230\u6839\u7684\u8def\u5f84\u4e0a\u90fd\u5305\u542b\u8fd9\u6761\u8fb9\uff0c\u56e0\u6b64\u5b83\u88ab\u8ba1\u7b97\u7684\u6b21\u6570\u662f $\\sum_{v\\in S(u)}(2-d_v)$\u3002\r\n\r\n\u5bf9\u4e8e\u4e00\u4e2a\u975e\u6839\u7ed3\u70b9 $u$\uff0c\u5b83\u8fde\u5411\u513f\u5b50\u7684\u8fb9\u6570\u5c31\u662f\u5b83\u7684\u5ea6\u6570\u51cf\u4e00\u3002\u800c\u4e00\u68f5 $n$ \u4e2a\u7ed3\u70b9\u7684\u6811\uff08$n\\ge 1$\uff09\u7684\u70b9\u6570\u6070\u597d\u662f\u8fb9\u6570\u52a0\u4e00\u3002\u56e0\u6b64\u6211\u4eec\u6709 $|S(u)|=\\sum_{v\\in S(u)}(d_v-1)$\u3002\r\n\r\n\u7136\u540e\u6211\u4eec\u518d\u5bf9\u4e4b\u524d\u7684\u5f0f\u5b50\u8fdb\u884c\u8f6c\u5316\uff0c\u53ef\u4ee5\u5f97\u5230\uff1a\r\n\r\n$$\r\n\\sum_{v\\in S(u)}(2-d_v)=\\sum_{v\\in S(u)}1-\\sum_{v\\in S(u)}(d_v-1)=|S(u)|-(|S(u)|-1)=1\r\n$$\r\n\r\n\u8fd9\u8bf4\u660e\u4e86\u6bcf\u6761\u8fb9\u7684\u8d21\u732e\u6070\u597d\u8ba1\u7b97\u4e86 $1$ \u6b21\uff0c\u4e8e\u662f\u6211\u4eec\u7528\u6765\u8ba1\u7b97\u7b54\u6848\u7684\u5f0f\u5b50\u662f\u5bf9\u7684\u3002\r\n\r\n\u5229\u7528\u8fd9\u4e2a\u5f0f\u5b50\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5bf9 $d_u\\neq 2$ \u7684\u7ed3\u70b9\u8be2\u95ee\u5230 $1$ \u7684\u8ddd\u79bb\u5c31\u53ef\u4ee5\u5f97\u5230\u7b54\u6848\u3002\r\n\r\n\u5bf9\u4e8e\u4e00\u4e2a\u6709 $x$ \u4e2a\u53f6\u5b50\u7684\u6709\u6839\u6811\uff0c\u5b83\u5ea6\u6570\u4e3a $2$ \u7684\u975e\u6839\u7ed3\u70b9\u4e00\u5b9a\u4e0d\u5728\u5305\u542b\u8fd9 $x$ \u4e2a\u53f6\u5b50\u7684\u865a\u6811\u4e0a\uff0c\u800c\u5305\u542b\u6307\u5b9a\u7684 $x$ \u4e2a\u70b9\u7684\u865a\u6811\u6700\u591a\u6709 $2x-1$ \u4e2a\u70b9\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5ea6\u6570\u4e0d\u4e3a $2$ \u7684\u975e\u6839\u7ed3\u70b9\u52a0\u4e0a\u6839\u7ed3\u70b9\u4ee5\u540e\u4e5f\u4e0d\u8d85\u8fc7 $2x-1$ \u4e2a\u70b9\u3002\u7531\u4e8e\u4e00\u4e9b\u6027\u8d28\uff0c\u6839\u7ed3\u70b9\u4e00\u5b9a\u5728\u865a\u6811\u4e0a\uff0c\u800c\u5b83\u7684\u8d21\u732e\u662f\u65e0\u9700\u8ba1\u7b97\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u6700\u574f\u53ea\u9700\u8981 $2x-2$ \u6b21 `dis` \u64cd\u4f5c\u5c31\u80fd\u591f\u5f97\u5230\u7b54\u6848\u3002\r\n\r\n\u6807\u7b97\u9700\u8981 $2x$ \u6b21\u64cd\u4f5c\uff0c\u6211\u7684\u505a\u6cd5\u662f\u6bd4\u6807\u7b97\u66f4\u4f18\u7684\u3002\r\n\r\n**\u800c\u4e14\u5e76\u4e0d\u9700\u8981\u7528\u5230 `dfn` \u64cd\u4f5c**\u3002\r\n\r\n## Code\uff1a\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\ntypedef long long LL;\r\nint k=142,n,deg[5005];\r\nint main(){\r\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\r\n\tcin>>n;\r\n\tfor(int i=1;i<=n;++i)cin>>deg[i];\r\n\twhile(1){\r\n\t\tint t=0;\r\n\t\tfor(int i=2;i<=n;++i)if(deg[i]!=2)++t;\r\n\t\tif(t<k){\r\n\t\t\tLL ans=0;\r\n\t\t\tfor(int i=2;i<=n;++i)if(deg[i]!=2){\r\n\t\t\t\tLL v=0;\r\n\t\t\t\tcout<<\"dis 1 \"<<i<<endl;\r\n\t\t\t\tcin>>v;\r\n\t\t\t\tans+=v*(2-deg[i]);\r\n\t\t\t}\r\n\t\t\tcout<<\"! \"<<ans<<endl;\r\n\t\t\tbreak;\r\n\t\t}else{\r\n\t\t\tcout<<\"del\"<<endl;\r\n\t\t\t--k;\r\n\t\t\tcin>>n;\r\n\t\t\tfor(int i=1;i<=n;++i)cin>>deg[i];\r\n\t\t}\r\n\t}\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1633348251,
        "uid": 6813,
        "name": "mrsrz",
        "ccfLevel": 10,
        "title": "P7895 \u7684\u7206\u6807\u505a\u6cd5"
    },
    {
        "content": "\n> \u4e00\u68f5\u4ee5 $1$ \u4e3a\u6839\u7684\u6811\uff0c\u8fb9\u6743\u672a\u77e5\uff0c\u4f60\u53ef\u4ee5\u8fdb\u884c\u4e09\u79cd\u64cd\u4f5c\uff1a\n>\n> 1. \u8be2\u95ee\u4e00\u4e2a\u70b9\u7684 dfn\n> 2. \u8be2\u95ee\u4e00\u6761\u8def\u5f84\u4e0a\u8fb9\u6743\u548c\n> 3. \u5220\u9664\u6240\u6709\u5ea6\u6570\u4e3a $1$ \u7684\u70b9\uff0c\u5e76\u91cd\u6807\u53f7\n>    \u8981\u6c42\u5728 $142$ \u6b21\u64cd\u4f5c\u5185\u5f97\u5230\u5f53\u524d\u6811\u7684\u8fb9\u6743\u603b\u548c\u3002\n>    $$n\\le 5000$$\n\n### Solution:\n\n\u4ece[\u8fd9\u9898](https://www.luogu.com.cn/problem/CF176E)\u4e2d\uff0c\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u5173\u4e8e dfn \u7684\u5c0f $trick$ \uff0c\u5c31\u662f\u82e5\u4f60\u77e5\u9053\u4e00\u4e9b\u5173\u952e\u70b9\u7684 dfn \uff0c\u90a3\u4e48\u8fd9\u4e9b\u5173\u952e\u70b9\u7684\u751f\u6210\u5b50\u56fe\u8fb9\u6743\u548c\u7b49\u4e8e\u6309 dfn \u6392\u5e8f\u540e\u76f8\u90bb\u70b9\u8ddd\u79bb\u52a0\u6700\u540e\u4e00\u4e2a\u70b9\u4e0e\u7b2c\u4e00\u4e2a\u70b9\u8ddd\u79bb\u9664\u4ee5 $2$ \u3002\n\t\n\u8bc1\u660e\u4e2a\u4eba\u89c9\u5f97\u8fd8\u662f\u5341\u5206\u7b80\u5355\u7684\uff0c\u8003\u8651\u6cbf\u7740 dfn \u987a\u5e8f\uff0c\u82e5\u4e3a\u5b50\u6811\u5185\u8282\u70b9\u5219\u5411\u4e0b\u62c9\u4e00\u6761\u8986\u76d6\u8fb9\uff0c\u5426\u5219\u5219\u5411\u4e0a\u62c9\u5230\u53e6\u4e00\u68f5\u5b50\u6811\u5185\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u6837\u4f1a\u4e00\u6765\u4e00\u56de\u7ecf\u8fc7\u751f\u6210\u5b50\u56fe\u4e0a\u7684\u8fb9\u4e24\u6b21\u3002\t\n\n\u7136\u540e\u5728\u672c\u9898\u4e2d\uff0c\u6211\u4eec\u8003\u8651\u627e\u5230\u4e00\u4e9b\u5173\u952e\u70b9\uff0c\u4f7f\u5176\u751f\u6210\u5b50\u56fe\u4e3a\u6574\u68f5\u6811\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0\u53d6\u7684\u8fd9\u4e9b\u5173\u952e\u70b9\u662f\u6839 $1$ + \u6240\u6709\u53f6\u5b50\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u5927\u5c0f\u4e3a $s$ \u7684\u5173\u952e\u70b9\u96c6\u5408\uff0c\u6211\u4eec\u60f3\u8981\u501f\u4ee5\u6c42\u51fa\u6574\u68f5\u6811\u7684\u8fb9\u6743\u548c\uff0c\u9700\u8981 $2s$ \u6b21\u8be2\u95ee\uff0c $s$ \u6b21\u8be2\u95ee\u6c42\u96c6\u5408 dfn \uff0c $s$ \u6b21\u8be2\u95ee\u6c42\u4e24\u4e24\u8def\u5f84\u548c\u3002\u8bbe\u5f53\u524d\u5269\u4f59\u64cd\u4f5c\u6b21\u6570\u4e3a $cur$ \uff0c \u82e5 $2s \\le cur - 1$ \uff0c\u90a3\u5c31\u53ef\u4ee5\u76f4\u63a5\u505a\u4e86\uff0c\u5426\u5219\u6211\u4eec\u9700\u8981\u5220\u6389\u6240\u6709\u5ea6\u6570\u4e3a $1$ \u7684\u70b9\u76f4\u5230 $2s \\le cur - 1$ \u4e3a\u6b62\u3002\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u76f4\u63a5\u5220\uff1f\u56e0\u4e3a\u5f53\u4e0d\u6ee1\u8db3\u6761\u4ef6\u65f6\u53f6\u5b50\u6570\u662f\u5927\u4e8e $cur \\over 2$ \u7684\uff0c\u6240\u4ee5\u4f60\u6bcf\u6b21\u8d77\u7801\u4f1a\u5220\u6389\u5927\u4e8e $cur \\over 2$ \u4e2a\u53f6\u5b50\u3002\u800c\u8fd9\u9898\u70b9\u6570 $5000$ \uff0c\u6ce8\u610f\u5230 $71 + 70 + 70 + 69 + 69 + 68 +68 + \\dots = 5041 > 5000$ \uff0c\u6240\u4ee5\u4e00\u5b9a\u4f1a\u5728\u5220\u5b8c\u524d\u5f97\u5230\u4e00\u7ec4\u53ef\u4ee5\u8ba1\u7b97\u7684\u7b54\u6848\u3002\n\n```cpp\n/* ==============================\n *  Author : Odalys \n *\n *  Mail : minyuenu@gmail.com\n * =============================== */\n#include <bits/stdc++.h>\nusing namespace std;\ntemplate <typename T> inline void read(T &a){\n\tT w=1; a=0;\n\tchar ch=getchar();\n\tfor(;ch < '0' || ch > '9';ch=getchar()) if(ch == '-') w=-1;\n\tfor(;ch>='0'&&ch<='9';ch=getchar()) a=(a<<3)+(a<<1)+(ch^48);\n\ta*=w;\n}\ntemplate <typename T> inline void ckmax(T &a, T b){a = a > b ? a : b;}\ntemplate <typename T> inline void ckmin(T &a, T b){a = a < b ? a : b;}\n#define fi first\n#define se second\n#define pb push_back\n#define mp make_pair\n#define pii pair<int, int> \n#define vi vector<int> \n#define Debug(x) cout << #x << \" = \" << x << endl\n#define For(i,l,r) for (int i = l; i <= r; ++i) \n#define foR(i,l,r) for (int i = l; i >= r; --i)\n#define mck fflush(stdin)\n#define gra fflush(stdout)\nconst int N = 5050;\nint du[N];\nint n;\nint ck () {\n\tint res = 0;\n\tFor (i, 1, n) if (du[i] == 1) res++; \n\tif (du[1] != 1) res++; \n\treturn res;\n}\nstruct Node {\n\tint id, dfn;\n\tNode( int Id = 0, int Dfn = 0) {\n\t\tid = Id, dfn = Dfn;\n\t}\n\tbool operator < (const Node &x) const {\n\t\treturn dfn < x.dfn;\n\t}\n} s[N];\nint Get (int x) {\n\tprintf (\"dfn %d\\n\", x); mck, gra;\n\tint xx; read(xx); return xx;\n}\nint Val (int x, int y) {\n\tprintf (\"dis %d %d\\n\", x, y); mck, gra;\n\tint xx; read(xx); return xx;\n}\nint main() {\n\tread(n);\n\tFor (i, 1, n) read(du[i]);\n\tint rem = 142;\n\twhile (ck() > (rem - 1) / 2) {\n\t\tprintf (\"del\\n\"); mck, gra;\n\t\trem--;\n\t\tread(n);\n\t\tFor (i, 1, n) read(du[i]); \n\t}\n\tint cnt = 0;\n\tFor (i, 1, n) \n\t\tif (du[i] == 1) s[++cnt] = Node(i, Get(i)); \n\tif (du[1] != 1) s[++cnt] = Node(1, 1);\n\tsort (s + 1, s + cnt + 1); \n\tint Ans = 0;\n\tFor (i, 1, cnt - 1) {\n\t\tAns += Val(s[i].id, s[i + 1].id);\n\t}\n\tAns += Val(s[cnt].id, s[1].id);\n\tprintf (\"! %d\\n\", Ans / 2); mck, gra;\n\treturn 0;\n}\n```",
        "postTime": 1633519042,
        "uid": 400028,
        "name": "Odalys",
        "ccfLevel": 0,
        "title": "P7895 \u300eJROI-3\u300f\u5220\u6811"
    },
    {
        "content": "[Link](https://www.luogu.com.cn/problem/P7895)\n\n[My Blog](https://tony102.com/archives/135/)\n\n## Sol\n\n\u8d5b\u65f6\u53ef\u4ee5\u5f88 naive \u5730\u53ef\u4ee5\u4e0d\u505c\u5730 `del` \u76f4\u5230\u53ea\u6709 $\\leq 2$ \u4e2a\u70b9\u7684\u65f6\u5019\u95ee\u4e00\u4e0b\u3002\n\n\u94fe\u7684\u60c5\u51b5\u5f88\u597d\u505a\u5bf9\u5427\uff0c\u53ea\u8981\u627e\u5230\u94fe\u9876\u548c\u94fe\u5c3e\u95ee\u4e00\u4e0b\u8ddd\u79bb\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u81f3\u4e8e\u6811\uff0c\u4f46\u662f\u4f60\u60f3\u60f3\u600e\u4e48\u4f18\u5316\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u6811\u5747\u5300\u7684\u60c5\u51b5\u4e0b\u53f6\u5b50\u5e94\u8be5\u662f\u6709\u4e0d\u5c11\u7684\uff0c\u90a3\u4e48\u6bcf\u6b21\u53ea\u8981 `del`  \u4e4b\u540e\u770b\u4e00\u4e0b\u662f\u4e0d\u662f\u6210\u4e00\u6761\u94fe\u4e86\uff0c\u662f\u94fe\u4e86\u5c31\u5957\u7528\u94fe\u7684\u505a\u6cd5\u3002\u8fd9\u6837\u53ef\u4ee5\u83b7\u5f97 85 \u5206\u3002\n\n\u8003\u8651\u600e\u4e48\u505a\u5230 100 \u5206\uff0c\u6211\u4eec\u6bcf\u6b21\u628a\u53f6\u5b50\u62a0\u51fa\u6765\uff0c\u7136\u540e\u6309\u7167 dfs \u5e8f\u6392\u5e8f\uff0c\u82e5\u53f6\u5b50\u6570 + `del` \u6570 $\\leq $ 140 \u7684\u8bdd\uff0c\u53ef\u4ee5\u76f4\u63a5\u8be2\u95ee\u4e24\u4e2a\u76f8\u90bb\u53f6\u5b50\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u6ce8\u610f\u6700\u540e\u4e00\u4e2a\u8981\u548c\u7b2c\u4e00\u4e2a\u4e00\u8d77\u95ee\u3002\u5426\u5219\u5c31\u4e0d\u65ad `del` \u76f4\u5230\u6ee1\u8db3\u8be5\u6761\u4ef6\u3002\n\n## Code\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef vector < int > vec;\nconst int SIZE = 5e3 + 5;\n\nint n;\nvec deg, leaf;\n\nint io() {\n    fflush(stdout);\n    std::cin >> n;\n    deg.resize(n + 1); deg.clear();\n    for (int i = 1; i <= n; ++ i) std::cin >> deg[i];\n    return n > 2;\n}\n\nnamespace chain {\n    int s = 0, t = 0;    \n    int judge() {\n        int cnt1 = 0, cnt2 = 0;\n        for (int i = 1; i <= n; ++ i) {\n            if (deg[i] == 1) ++ cnt1;\n            if (deg[i] == 2) ++ cnt2;\n        }\n        if (cnt1 == 2 && cnt2 == n - 2) {\n            s = 0, t = 0;\n            for (int i = 1; i <= n; ++ i) {\n                if (deg[i] == 1 && !s) s = i;\n                else if (deg[i] == 1 && s)  { t = i; break; }\n            }\n            return 1;\n        }\n        else return 0;\n    }\n    void main() {\n        std::cout << \"dis \" << s << \" \" << t << endl;\n        fflush(stdout);\n        int ans; std::cin >> ans;\n        std::cout << \"! \" << ans << endl;\n        fflush(stdout);\n    }\n}\n\nnamespace subtask1 {\n    void main() {\n        if (n == 1 || n == 0) return puts(\"! 0\"), void();\n        puts(\"dis 2 1\");\n        fflush(stdout);\n        int ans; scanf(\"%d\", &ans);\n        printf(\"! %d\\n\", ans);\n        fflush(stdout);\n    }\n}\n\nnamespace subtask2 {\n    void main() {\n        int flag = 1;\n        do {\n            puts(\"del\");\n            fflush(stdout);\n            flag = io();\n            if (!flag) break;\n            if (chain::judge()) return chain::main(), void();\n        } while (flag);\n        return subtask1::main(), void();\n    }\n}\n\nvec dfn;\nnamespace sol {\n    int getLeaf() {\n        leaf.clear();\n        for (int i = 1; i <= n; ++ i) {\n            if (deg[i] == 1) leaf.emplace_back(i);\n        }\n        return (int) leaf.size();\n    }\n\n    int check() {\n        int N = leaf.size();\n        dfn.clear(); dfn.resize(n + 1);\n        for (int i = 0, x; i < N; ++ i) {\n            std::cout << \"dfn \" << leaf[i] << endl;\n            fflush(stdout); std::cin >> x;\n            dfn[leaf[i]] = x;\n        }\n        return N;\n    }\n\n    int get() {\n        int N = check(), ans = 0, x = 0;\n        std::sort(leaf.begin(), leaf.end(), [] (int a, int b) { return dfn[a] < dfn[b]; });\n        for (int i = 0; i < N - 1; ++ i) {\n            std::cout << \"dis \" << leaf[i] << \" \" << leaf[i + 1] << endl;\n            fflush(stdout); std::cin >> x; ans += x;\n        }\n        std::cout << \"dis \" << leaf[0] << \" \" << leaf[N - 1] << endl;\n        fflush(stdout); std::cin >> x; ans += x;\n        return ans / 2;\n    }\n\n    void sol() {\n        int ans = get();\n        std::cout << \"! \" << ans << endl;\n    }\n\n    void main() {\n        int dl = 0, N = getLeaf();\n        if (2 * N + dl <= 140) return sol(), void();\n        while (n) {\n            if (2 * N + dl <= 140) return sol(), void();\n            else {\n                ++ dl; leaf.clear();\n                std::cout << \"del\" << endl;\n                fflush(stdout);\n                io(); \n                if (chain::judge()) return chain::main(), void();\n                else N = getLeaf();\n            }\n        }\n    }\n}\n\nint main() {\n    // freopen(\"code.in\", \"r\", stdin);\n    io();\n    // return subtask2::main(), 0;\n    if (n <= 2) return subtask1::main(), 0;\n    if (n <= 2000) return subtask2::main(), 0;\n    else return sol::main(), 0; \n    return 0;\n}\n```",
        "postTime": 1633607967,
        "uid": 230933,
        "name": "Tony102",
        "ccfLevel": 7,
        "title": "Luogu7895 \u300eJROI-3\u300f\u5220\u6811"
    },
    {
        "content": "\u5b98\u65b9\u9898\u89e3\n\n\u8003\u8651\u901a\u8fc7\u8be2\u95ee\u53f6\u5b50\u8282\u70b9\u5f97\u5230\u6743\u503c\u548c\u3002\n\n\u5148\u8be2\u95ee\u6240\u6709\u53f6\u5b50\u8282\u70b9\u7684 dfs \u5e8f\uff0c\u7136\u540e\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\n\n\u7136\u540e\u8be2\u95ee\u7b2c $i$ \u4e2a\u548c\u7b2c $i+1$ \u4e2a\u7684\u8ddd\u79bb\uff0c\u7279\u522b\u7684\uff0c\u5b9a\u4e49\u7b2c $n+1$ \u4e2a\u53f6\u5b50\u662f\u7b2c $1$ \u4e2a\u3002\n\n\u5f97\u5230\u7684\u8ddd\u79bb\u548c\u9664\u4ee5 $2$ \u5c31\u662f\u6743\u503c\u548c\u3002\n\n\u8bc1\u660e\uff1a\u8003\u8651\u6bcf\u4e2a\u8fb9\u7684\u8d21\u732e\uff0c\u6b63\u597d\u88ab\u8fd9\u4e9b\u8def\u5f84\u8986\u76d6\u4e24\u6b21\u3002\n\n\u5bf9\u53f6\u5b50\u4e2a\u6570\u5206\u6cbb\uff0c\u53f6\u5b50\u8282\u70b9\u8f83\u5c11\u65f6\u6267\u884c\u4ee5\u4e0a\u7b97\u6cd5\uff0c\u8f83\u591a\u65f6\u5220\u9664\u3002\n\n\u4ea4\u4e92\u6b21\u6570\u8bc1\u660e\uff1a\n\n\u8bbe\u5f53\u524d\u53f6\u5b50\u4e2a\u6570\u4e3a $B$\u3002\n\n\u8be2\u95ee\u6b21\u6570\u4e3a $T(n)=\\min(T(n-B)+1,2B+1)$\u3002\u5206\u522b\u5bf9\u5e94\u5220\u9664\u548c\u6c42\u51fa\u3002\n\n\u63d0\u524d\u9884\u5904\u7406\u51fa\u6bcf\u4e2a $n$ \u5206\u6cbb\u7684\u754c\u5373\u53ef\u3002\u901a\u8fc7\u5199\u7a0b\u5e8f dp \u53ef\u4ee5\u53d1\u73b0\u4e0a\u754c\u662f $141$\u3002\n\n\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u76f4\u63a5\u5224\u65ad\u662f\u5426\u5230 $142$ \u6b21\uff0c\u8d85\u8fc7 $142$ \u6b21\u65f6\u5220\u9664\u3002\n",
        "postTime": 1633514816,
        "uid": 196899,
        "name": "lndjy",
        "ccfLevel": 9,
        "title": "P7895 \u9898\u89e3"
    },
    {
        "content": "\u597d\u9898\u554a\uff01~~\u8ba9\u6211\u4f53\u9a8c\u4e86\u4e00\u628adiv1rk2~~\n\n\u5f00\u5c40\u770b\u4e86\u770bT1\u6ca1\u601d\u8def\uff0c\u5c31\u5f00\u59cb\u770bT2\n\n~~\u4e00\u5f00\u59cb\u8fd8\u4ee5\u4e3aT2\u9519\u4e86~~\n\n\u7136\u540e\u60f3\u4e86\u60f3142\u662f\u4ec0\u4e48\u610f\u601d\u2026\u2026\u5f00\u59cb\u4ee5\u4e3a\u662flog\u7684\u591a\u5c11\u500d\uff0c\u540e\u6765\u624d\u60f3\u5230\u548c\u6839\u53f7\u5173\u7cfb\u6bd4\u8f83\u5bc6\u5207\u2026\u2026\n\n\u672c\u6587\u4e2d\u201c\u53f6\u5b50\u201d\u5747\u6307\u5ea6\u6570\u4e3a1\u7684\u70b9\u3002\n\n---\n\n\u770b\u5230\u8fd9\u91cc\u6709\u4e2adfn\u5e8f\uff0c\u6709\u6c42\u8ddd\u79bb\uff0c\u7136\u540e\u53c8\u544a\u8bc9\u4f60\u5ea6\u6570\uff0c\u6c42\u7684\u662f\u6811\u8fb9\u6743\u548c\uff0c\u5f88\u81ea\u7136\u7684\u60f3\u5230\u4e00\u4e2atrick\uff1a\n\n\u6309dfn\u5e8f(1-n)\u6392\u5e8f\uff0c\u7b54\u6848\u5c31\u662f $\\dfrac{dis(1,2)+dis(2,3)+...+dis(n,1)}{2}$\n\n\u8bc1\u660e\uff1a\u8003\u8651\u56e0\u4e3a\u662fdfn\u5e8f\uff0c\u6240\u4ee5\u4e00\u6761\u8fb9\u5fc5\u5b9a\u4f1a\u4e14\u4ec5\u4f1a\u88ab\u626b\u5230\u4e24\u6b21\uff08\u8fdb\u8fd9\u4e2a\u5b50\u6811\uff0c\u51fa\u8fd9\u4e2a\u5b50\u6811\uff09\n\n\u7136\u540e\u9898\u76ee\u7ed9\u51fa\u5220\u53f6\u5b50\uff0c\u6839\u53f7\u7684\u6b21\u6570\u4e5f\u63d0\u9192\u6211\u4eec\uff1a\u53ef\u4ee5\u8fb9\u5220\u8fb9\u5224\u65ad\u662f\u5426\u53ef\u505a\uff1b\u5f53\u53f6\u5b50\u4e2a\u6570 $\\le \\lfloor \\dfrac{remain}{2} \\rfloor$ \u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6c42\u89e3\uff1b\u5426\u5219\u6211\u4eec\u8003\u8651\u5220\u6389\u8fd9\u4e9b\u53f6\u5b50\uff0c\u8fd9\u6837\u505a\u4e00\u5b9a\u662f\u53ef\u884c\u7684\u3002\n\n\u63a5\u4e0b\u6765\u7528\u53cd\u8bc1\u6cd5\u8bc1\u660e\uff1a\u5982\u679c\u8981\u5361\uff0c\u90a3\u4e48\u4e00\u5b9a\u662f\u6bcf\u4e00\u6b21\u5220\u7684\u53f6\u5b50\u5c3d\u53ef\u80fd\u5c11\uff0c\u800c\u8fd9\u4e9b\u53f6\u5b50\u4e2a\u6570 $> \\lfloor \\dfrac{remain}{2} \\rfloor$\uff0c\u6240\u4ee5\u6700\u591a\u9700\u8981\u5220 $71+71+70+70+...+1+1 =5112$ \u4e2a\u70b9\uff0c\u4e0d\u7b26\u5408 $n \\le  5000$\uff0c\u8bc1\u6bd5\u3002\n\n---\n\n\u5f69\u86cb\uff1a\u5173\u4e8e\u6700\u5927\u53ef\u80fd\u7684n\uff1a\n\n\u6211\u4eec\u5bb9\u6613\u53d1\u73b0\uff0c\u5728\u53f6\u5b50\u4e2a\u6570 $= 3$ \u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4e09\u6b21\u8be2\u95ee\u5373\u53ef\uff1b\u5728\u53f6\u5b50\u4e2a\u6570 $= 2$ \u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4e00\u6b21\u8be2\u95ee\u5373\u53ef\uff1b\u5728\u53f6\u5b50\u4e2a\u6570 $= 1$ \u65f6\uff0c\u6211\u4eec\u751a\u81f3\u4e0d\u9700\u8981\u95ee\u3002\n\n\u56e0\u6b64\uff0c\u5728\u9898\u76ee\u7684\u6761\u4ef6\u4e0b\uff0c\u6211\u4eec\u5176\u5b9e\u53ef\u4ee5\u505a $71+71+...+4+4+4+4+4+3+3+1 = 5119$ \u4e2a\u70b9\u3002\n\n~~\u4f53\u73b0\u4e86\u826f\u5fc3\u51fa\u9898\u4eba\u672c\u8d28~~\n\n\u6709\u9505\u6b22\u8fce\u8054\u7cfb\u4f5c\u8005~",
        "postTime": 1633512891,
        "uid": 34200,
        "name": "wf1594937223",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P7895 \u3010\u300eJROI-3\u300f\u5220\u6811\u3011"
    },
    {
        "content": "**\u7ed3\u8bba**\uff1a\n\n\u5728\u4e00\u68f5\u6811\u4e2d\uff0c\u6240\u6709\u76f8\u90bb\u53f6\u5b50\u8282\u70b9\u7684\u8ddd\u79bb\u548c\u7b49\u4e8e\u4e8c\u500d\u8fb9\u6743\u548c\u3002\n\n\u5f62\u5f0f\u5316\u7684\u8bf4\uff1a\n\n\u5bf9\u4e8e\u4e00\u68f5\u5e26\u6743\u6709\u6839\u6811\uff0c\u8bb0\u6839\u4e3a $1$\uff0c$S_i$ \u4e3a\u4ee5 $i$ \u4e3a\u6839\u7684\u5b50\u6811\u8fb9\u6743\u548c\uff0c\u53f6\u5b50\u8282\u70b9\u4e3a $l_1$ \u5230 $l_m$ \u4e14 $l_{m+1}=l_1$\uff0c\u4f7f\u5f97 ${\\rm{dfn(l_1)}}<{\\rm{dfn(l_2)}}<\\dots<{\\rm{dfn(l_m)}}$\uff0c\u5219\uff1a\n\n$$\\sum_{i=1}^m{\\rm{dist(l_i,l_{i+1})}}=2S_1$$\n\n**\u8bc1\u660e**\uff1a\n\n\u8bb0\u6240\u6709\u53f6\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9\u53bb\u91cd\u540e\u4e3a $f_1$ \u5230 $f_k$\uff0c\u8bbe $f_i$ \u6240\u5305\u542b\u7684\u53f6\u5b50\u8282\u70b9\u4e3a $l_{x_i}$ \u5230 $l_{y_i}$\uff0c\u4e5f\u53ef\u4ee5\u8bf4 $f_i$ \u6240\u5305\u542b\u7684\u53f6\u5b50\u8282\u70b9\u7684\u4e0b\u6807 $\\in[x_i,y_i]$\uff0c$w_{i,j}$ \u4e3a $i$ \u548c $j$ \u4e4b\u95f4\u8fde\u8fb9\u7684\u6743\u503c\u3002\n\n\u5982\u4e0b\u56fe\uff0c\u53f6\u5b50\u8282\u70b9\u4e3a $5,6,7,8,9,10,11$\uff0c\u6240\u6709\u53f6\u5b50\u8282\u70b9\u7684\u7236\u8282\u70b9\u53bb\u91cd\u540e\u4e3a $1,3,4$\u3002\n\n- \u5982\u679c $l_i$ \u548c $l_{i+1}$ \u7684\u7236\u8282\u70b9\u662f\u540c\u4e00\u4e2a\uff0c\u5373\u90fd\u5728\u4ee5 $f_j$ \u4e3a\u6839\u7684\u5b50\u6811\u5185\uff1a\n\n\u8fd9\u5c31\u597d\u529e\u4e86\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u5b50\u6811\u5355\u62ce\u51fa\u6765\u7b97\u8fb9\u6743\uff0c\u8fd9\u4e2a\u5b50\u6811\u7684\u5f62\u72b6\u5c31\u662f\u4e00\u4e2a\u83ca\u82b1\u56fe\uff0c\u83ca\u82b1\u56fe\u5185\u76f8\u90bb\u53f6\u5b50\u8282\u70b9\u7684\u8ddd\u79bb\u548c\uff08\u4e0d\u7b97\u83ca\u82b1\u56fe\u4e2d\u7b2c\u4e00\u4e2a\u70b9\u5230\u6700\u540e\u4e00\u4e2a\u70b9\u7684\u8ddd\u79bb\uff09\u5c31\u662f $2S_{f_i}-w_{f_i,l_{x_i}}-w_{f_i,l_{y_i}}$\u3002\n\n- \u5982\u679c $l_i$ \u548c $l_{i+1}$ \u7684\u7236\u8282\u70b9\u4e0d\u662f\u540c\u4e00\u4e2a\u5462\uff1f\n\n\u53ef\u4ee5\u628a\u83ca\u82b1\u56fe\uff08\u4ee5 $f_i$ \u4e3a\u6839\u7684\u5b50\u6811\uff09\u4e2d\u7b2c\u4e00\u4e2a\u70b9\u5230\u6700\u540e\u4e00\u4e2a\u70b9\u7684\u8ddd\u79bb\u7b97\u4e0a\uff0c\u5373\u4e3a $2S_{f_i}$\uff0c\u7136\u540e\u628a\u8fd9\u68f5\u5b50\u6811\u770b\u6210\u4e00\u4e2a\u70b9\uff0c\u8fd9\u4e2a\u70b9\u5c31\u53d8\u6210\u4e86\u53f6\u5b50\u8282\u70b9\u3002\n\n\u90a3\u4e48 ${\\rm{dis(l_{x_i-1},l_{x_i})}}$ \u548c ${\\rm{dis(l_{y_i},l_{y_i+1})}}$ \u5c31\u53ef\u4ee5\u901a\u8fc7 $w_{f_i,l_{x_i}}$ \u548c $w_{f_i,l_{y_i}}$ \u4ee5\u53ca\u201c\u7f29\u70b9\u201d\u540e\u7684\u53f6\u5b50\u8282\u70b9\u7684\u8ddd\u79bb\u4e00\u6b21\u4e00\u6b21\u8fed\u4ee3\u7b97\u51fa\u3002\n\n\u5230\u4e86\u6700\u540e\uff0c\u6574\u68f5\u6811\u53d8\u6210\u4e86\u4e00\u4e2a\u70b9\uff0c\u800c\u8fd9\u4e2a\u70b9\u5c31\u4ee3\u8868\u7740 $\\sum_{i=1}^m{\\rm{dist(l_i,l_{i+1})}}$\uff0c\u800c\u7ecf\u8fc7\u4e0a\u9762\u7684\u8bba\u8bc1\uff0c\u8fd9\u5c31\u7b49\u4e8e $2S_1$\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u548c `del` \u5f88\u50cf\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gvd67zjm.png)\n\n\n\n------------\n\n\u8fd8\u53ef\u4ee5\u7528\u6570\u5b66\u5f52\u7eb3\u6cd5\u8bc1\u660e\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u7ed3\u8bba\u8bc1\u5b8c\u4e86\uff0c**\u56de\u5230\u9898\u76ee**\uff1a\n\n\u82e5\u4e00\u68f5\u6811\u53f6\u8282\u70b9\u6570\u4e3a $m$\uff0c\u8bb0\u5269\u4f59\u8be2\u95ee\u6b21\u6570\u4e3a $t$\uff0c\u8fd9\u91cc\u53bb\u6389\u8f93\u51fa\u7684\u4e00\u6b21\uff08\u5373\u521d\u59cb\u503c\u4e3a $141$\uff09\u3002\n\n- \u82e5 $t\\ge2m$\uff0c\u5219\u7528 $m$ \u6b21\u64cd\u4f5c\u8be2\u95ee ${\\rm{dfn(l_i)}}$\uff0c\u7136\u540e\u6392\u5e8f\uff0c\u6700\u540e\u8be2\u95ee $m$ \u6b21 ${\\rm{dist}}$\uff0c\u5171 $2m$ \u6b21\uff0c\u6309\u7167\u4e0a\u9762\u7ed3\u8bba\u8ba1\u7b97\u51fa\u7b54\u6848\uff0c\u9664\u4ee5 $2$ \u8f93\u51fa\u5373\u53ef\u3002\n\n- \u82e5 $t<2m$\uff0c\u7528 `del` \u64cd\u4f5c\u6d88\u9664 $m$ \u4e2a\u53f6\u5b50\u8282\u70b9\uff0c\u7136\u540e\u91cd\u65b0\u6807\u53f7\uff0c\u5e76\u4e14 `t--`\uff0c\u66f4\u65b0 $m$\u3002\n\n**\u6b63\u786e\u6027**\uff1a\n\n\u53d1\u73b0\u4e00\u65e6 $t\\ge2m$ \u5c31\u80fd\u901a\u8fc7\u4e0a\u9762\u7684\u65b9\u6cd5\u6c42\u51fa\u7b54\u6848\uff0c\u8003\u8651\u80fd\u4e0d\u80fd\u88ab `hack`\u3002\n\n\u60f3\u8981\u8bc1\u660e\u4e0a\u9762\u7684\u89e3\u6cd5\u662f\u9519\u7684\uff0c\u552f\u4e00\u7684\u65b9\u6cd5\u5c31\u662f\u8bc1\u660e\u6709\u4e00\u7ec4\u6570\u636e\u53ef\u4ee5\u4f7f $t<2m$ \u4e00\u76f4\u6210\u7acb\u3002\n\n- \u7ed3\u8bba\uff1a\u5220\u53bb\u5165\u5ea6\u4e3a\u4e00\u7684\u70b9\u7684\u7684\u4e2a\u6570\u4e0d\u589e\u3002\n\n\u4e5f\u5c31\u662f\uff1a\u7b2c\u4e00\u6b21 `del` \u5220\u53bb $k$ \u4e2a\u70b9\uff0c\u5f80\u540e\u7ee7\u7eed `del`\uff0c\u6bcf\u6b21\u5220\u53bb\u70b9\u6570\u4e0d\u53ef\u80fd\u5927\u4e8e $k$\u3002\n\n\u5e94\u8be5\u662f\u6811\u7684\u7279\u6b8a\u6027\u8d28\u5427\u3002\n\n\u6240\u4ee5\u8fd9\u7ec4\u60f3\u5361\u6389\u4e0a\u9762\u505a\u6cd5\u7684\u6570\u636e\u6700\u597d\u5f62\u5982\u5f88\u591a\u6761\u94fe\u7684\u94fe\u9876\u88ab\u4e00\u4e2a\u70b9\u8fde\u63a5\u8d77\u6765\u7684\u6837\u5b50\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/986telba.png)\n\n\u4e00\u76f4\u6210\u7acb\uff1f\u8fd9\u4e2a\u94fe\u957f\u600e\u4e48\u786e\u5b9a\uff1f\n\n$t<2m$\n\n$t$ \u600e\u4e48\u53d8\u5316\uff1f\u6bcf `del` \u4e00\u6b21\u51cf\u4e00\u3002\n\n$m$ \u600e\u4e48\u53d8\u5316\u624d\u80fd\u4f7f**\u5e26\u6709\u7cfb\u6570** $2$ \u7684 $2m>t$\uff1f\n\n\u53ea\u9700\u8981\u8ba9\u6bcf\u4e24\u6b21 `del` $m$ \u51cf\u5c11 $1$ \u5373\u53ef\u3002\n\n\u53ef\u4ee5\u6784\u9020\u51fa\u8fd9\u6837\u4e00\u7ec4\u6570\u636e\uff1a\n\n\u5f88\u591a\u6761\u94fe\uff0c\u94fe\u957f\u5448\u7b49\u5dee\u6570\u5217\uff0c\u516c\u5dee\u4e3a $2$\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u8981\u7528\u8ba1\u7b97\u7b97\u51fa\u8fd9\u4e2a\u6570\u636e\u4e86\uff1a\n\n\u8bbe \u6700\u540e\u4e00\u6761\u94fe\u957f $2x+k$\uff0c\u6709 $x$ \u6761\u94fe\uff0c\u94fe\u4e0a\u603b\u70b9\u6570\u4e3a $4999$\uff08\u53bb\u6389\u94fe\u63a5\u94fe\u7684\u70b9\uff09\u3002\n\n\u7531\u4e8e\u6700\u540e\u4e00\u6761\u94fe\u53ef\u80fd\u4f1a\u6709\u5269\u4f59\uff0c\u53d6\u6574\u3002\n\n$\\frac{(2+2x)x}{2}=4999$\uff0c\u89e3\u4e00\u5143\u4e8c\u6b21\u65b9\u7a0b\u7684\u6b63\u6839\u53d6\u6574\u5f97 $70$\u3002\n\n\u53ef\u7b97\u51fa $k=4999-\\frac{(2+138)\\times69}{2}-140=29$\u3002\n\n\u6240\u4ee5\u94fe\u957f\u4e3a $2,4,6,8...136,138,169$\n\n\u8fd9\u4f1a\u4f7f\u7528 `del` \u591a\u5c11\u6b21\u5462\uff1f\n\n\u53d1\u73b0\u5230\u5f53\u4f7f\u7528 `del` $136$ \u6b21\u540e\uff0c$t=141-136=5>2m=2\\times2=4$\uff0c\u505c\u6b62 `del`\uff0c\u53ef\u4ee5\u8ba1\u7b97\u51fa\u7b54\u6848\uff0c\u6700\u7ec8\u4f1a\u4f7f\u7528 $141$ \u6b21\u64cd\u4f5c\uff08\u5305\u62ec\u8f93\u51fa\uff09\u3002\n\n\u6240\u4ee5\u9898\u76ee\u4e2d\u7684 $142$ \u6b21\u662f\u653e\u5bbd\u4e86\u7684\u3002\n\n\u53ef\u4ee5\u8bc1\u660e\u6ca1\u6709\u6bd4\u4e0a\u9762\u90a3\u7ec4\u6570\u636e\u66f4\u80fd\u5361\u4e0a\u9762\u7684\u7b97\u6cd5\u4e86\uff0c\u6240\u4ee5\u6b63\u786e\u6027\u5f97\u4ee5\u8bc1\u660e\u3002\n\n\u5c0f\u63d0\u4e00\u5634\uff1a\u8fd9\u4e2a\u6b63\u786e\u6027\u7684\u8bc1\u660e\u4e0d\u662f\u5f88\u4e25\u8c28\uff0c\u4f46\u601d\u8def\u5927\u6982\u662f\u5bf9\u7684\uff1a\u8bc1\u660e\u6700\u574f\u60c5\u51b5\u65e0\u6cd5\u4f7f\u7ed3\u8bba\u9519\u8bef\uff0c\u5927\u5bb6\u53ef\u4ee5\u5c31\u5f53\u4e00\u4e2a\u6781\u9650\u6570\u636e\u770b\u770b\u3002\n\n- \u5982\u679c\u60a8\u89c9\u5f97\u672c\u9898\u89e3\u8fd8\u4e0d\u9519\u7684\u8bdd\u5c31\u70b9\u4e2a\u8d5e\u5457\uff0c\u8c22\u8c22\u5927\u5bb6\uff01\n\n**\u4ee3\u7801\u5982\u4e0b**\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\ninline int read(){\n    int x=0,f=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        if(ch=='-')\n            f=-1;\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    return x*f;\n}\n\ninline void print(int x){\n\tif(x<0)putchar('-'),x=-x;\n\tif(x>9)print(x/10);\n\tputchar(x%10^48);\n}\n\nconst int MAXN=5e3+5;\nint t=141,n,in[MAXN];\n\nint dfn(int x){\n\tcout<<\"dfn \"<<x<<endl;\n\tint ans=read();\n\treturn ans;\n}\n\nint dis(int x,int y){\n\tcout<<\"dis \"<<x<<\" \"<<y<<endl;\n\tint ans=read();\n\treturn ans;\n}\n\nvoid del(){\n\tcout<<\"del\"<<endl;\n}\n\nint num,sum,b[MAXN];\n\nstruct node{\n\tint x,y;\n}p[MAXN];\n\nbool cmp(node p,node q){\n\treturn p.x<q.x;\n}\n\nint main(){\n\tn=read();\n\tfor(int i=1;i<=n;++i)in[i]=read();\n\tfor(int i=1;i<=n;++i){\n\t\tif(in[i]==1)num++;\n\t}\n\twhile(2*num>t){\n\t\tdel();\n\t\tt--;\n\t\tn=read();\n\t\tnum=0;\n\t    for(int i=1;i<=n;++i)in[i]=read();\n\t\tfor(int i=1;i<=n;++i){\n\t\t    if(in[i]==1)num++;\n\t    }\n\t}\n\tnum=0;\n\tfor(int i=1;i<=n;++i){\n\t\tif(in[i]==1){\n\t\t\t++num;\n\t\t\tp[num].x=dfn(i);\n\t\t\tp[num].y=i;\n\t\t}\n\t}\n\tsort(p+1,p+num+1,cmp);\n\tfor(int i=1;i<num;++i){\n\t\tsum+=dis(p[i].y,p[i+1].y);\n\t}\n\tsum+=dis(p[1].y,p[num].y);\n\tcout<<\"! \",print(sum>>1),cout<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1633322340,
        "uid": 271736,
        "name": "Daidly",
        "ccfLevel": 6,
        "title": "P7895\u300eJROI-3\u300f\u5220\u6811 \u9898\u89e3"
    },
    {
        "content": "[P7895 \u300eJROI-3\u300f\u5220\u6811](https://www.luogu.com.cn/problem/P7895)\n\n\u8fd1\u51e0\u573a\u4e2d\u6700\u826f\u5fc3\u7684\u4e00\u4e2aD\n\n~~\u5f00\u59cb\u628a\u9898\u770b\u9519\u4e86\u8fd8\u4ee5\u4e3a\u662f\u8981\u6c42\u6700\u5f00\u59cb\u7684\u6811\u7684\u8fb9\u6743\u548c\u8fd8\u5728\u60f3\u4e3a\u4ec0\u4e48\u8981\u5220\u70b9QwQ~~\n\n-------------\n\n\u6b64\u9898\u7528\u5230\u4e86\u4e00\u4e2a\u5c0ftrick\uff0c\u60f3\u4e0d\u5230\u7684\u8bdd\u5c31\u8fc7\u4e0d\u4e86\u8fd9\u9898\u3002\u5f62\u5f0f\u5927\u6982\u5982\u4e0b\uff1a\n\n\u7ed9\u5b9a\u4e00\u68f5\u6811\uff0c\u5176\u4e2d\u6240\u6709\u5ea6\u6570\u4e3a $\\texttt{1}$ \u7684\u70b9\u6309 $\\texttt{dfn}$ \u503c\u4ece\u5c0f\u5230\u5927\u6392\u6210\u4e00\u4e2a**\u73af**\u540e\uff0c\u76f8\u90bb\u7684\u4e24\u4e2a\u70b9\u7684\u8ddd\u79bb\u4e4b\u548c\u521a\u597d\u7b49\u4e8e\u8fb9\u6743\u548c\u7684**\u4e24\u500d**\u3002\n\n\u8fd9\u91cc\u7ed9\u4e00\u4e2a\u4e0d\u7b97\u4e25\u8c28\u7684\u8bc1\u660e\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rxq2u23l.png)\n\n\u8003\u8651 $\\texttt{1-2}$ \u8fd9\u6761\u8fb9\u3002\n\n- \u663e\u7136\u5b50\u6811 $\\texttt{1}$ \u4e4b\u5185\u5fc5\u7136\u6709\u5ea6\u6570\u4e3a $\\texttt{1}$ \u7684\u70b9\uff0c\u5b50\u6811 $\\texttt{2}$ \u540c\u7406\u3002\n\n- \u800c\u7531\u4e8e\u6240\u6709\u5ea6\u6570\u4e3a $\\texttt{1}$ \u7684\u70b9\u5206\u5e03\u5448**\u73af\u72b6**\uff0c\u6240\u4ee5\u5fc5\u7136**\u6709\u4e14\u4ec5\u6709**\u4e00\u6761\u8def\u5f84\u4ece\u5b50\u6811 $\\texttt{1}$ \u5230\u5b50\u6811 $\\texttt{2}$ \uff0c\u540c\u7406\u4e5f\u5fc5\u7136**\u6709\u4e14\u4ec5\u6709**\u4e00\u6761\u8def\u5f84\u4ece\u5b50\u6811 $\\texttt{2}$ \u5230\u5b50\u6811 $\\texttt{1}$ \uff0c\u5171\u8ba1\u7b97\u4e24\u6b21\u3002\n\n\u540c\u7406\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u6761\u8fb9\uff0c\u90fd\u4f1a\u53ea\u7ecf\u8fc7\u4e24\u6b21\u3002\n\n------------\n\n\u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u67e5\u8be2\u53f6\u5b50\u8282\u70b9\u7684 $\\texttt{dfn}$ \u503c\u548c\u8ddd\u79bb\u6765\u5f97\u5230\u7ed3\u679c\u3002\n\n\u6211\u4eec\u5047\u8bbe\u6b64\u65f6\u5ea6\u6570\u4e3a $\\texttt{1}$ \u7684\u70b9\u7684\u4e2a\u6570\u4e3a $m$ \uff0c\u5219\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 $2m+1$ \u6b21\u64cd\u4f5c\u5b8c\u6210\u3002\u5373 $m$ \u6b21 $\\texttt{dfn}$ , $m$ \u6b21 $\\texttt{dis}$ , \u4ee5\u53ca $1$ \u6b21\u8f93\u51fa\u3002 \u800c\u901a\u8fc7\u7b80\u5355\u7684\u601d\u8003\u53ef\u5f97\uff0c\u6bcf\u4e00\u6b21**\u5220\u9664\u64cd\u4f5c**\u540e\u5ea6\u6570\u4e3a $\\texttt{1}$ \u7684\u70b9\u5fc5\u7136\u4f1a**\u4fdd\u6301\u4e0d\u589e**\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u5224\u65ad\u5f97\u5230\u4f55\u65f6\u5e94\u8be5**\u5220\u9664\u64cd\u4f5c**\u3002\n\n\u5177\u4f53\u5185\u5bb9\u53ef\u4ee5\u53c2\u7167\u4ee3\u7801\u3002\n\n-----------\n\n\u5173\u4e8e\u6b63\u786e\u6027\u7684\u8bc1\u660e\uff1a\u53ef\u4ee5\u53c2\u7167[\u5b98\u65b9\u9898\u89e3](https://djy-juruo.blog.luogu.org/solution-p7895)\uff0c\u8fd9\u91cc\u7ed9\u4e00\u4e2a\u7b80\u5355\u7684\u8bc1\u660e\u3002\n\n- \u4e0d\u96be\u53d1\u73b0\uff0c\u82e5\u7b2c\u4e00\u6b21\u8fdb\u884c\u5220\u9664\uff0c\u8fd9\u5c31\u4ee3\u8868\u7740\u7b2c\u4e00\u5c42\u5ea6\u6570\u4e3a $\\texttt{1}$ \u7684\u70b9\u81f3\u5c11\u6709 $\\texttt{71}$ \u4e2a\u3002\n\n- \u540c\u7406\uff0c\u82e5\u7b2c $i$ \u6b21\u8fdb\u884c\u5220\u9664\uff0c\u5219\u7b2c $i$ \u5c42\u5ea6\u6570\u4e3a $\\texttt{1}$ \u7684\u70b9\u81f3\u5c11\u6709 $\\left\\lceil\\dfrac{142-i}{2}\\right\\rceil$ \u4e2a\u3002\n\n- \u82e5\u8be5\u7b97\u6cd5\u9519\u8bef\uff0c\u5219\u8be5\u6811\u81f3\u5c11\u6709 $71+70+70+69+69+......+1+1=5041$ \u4e2a\u7ed3\u70b9\uff0c\u800c\u8be5\u9898\u4e2d $n\\leq5000$ \u3002\n\n\u56e0\u6b64\u8be5\u7b97\u6cd5\u7684\u6b63\u786e\u6027\u53ef\u4ee5\u5f97\u5230\u4fdd\u8bc1\u3002\n\n-----------\n\n------------\n\nCode:\uff08\u7801\u98ce\u4e0d\u559c\u52ff\u55b7\uff09\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<algorithm>\n#include<cassert>\nusing namespace std;\ntypedef long long ll;\nstruct Node\n{\n\tll dfn;\n\tll pos;\n}tree[5001];\nll a[10001],n,cnt,ans;\nvoid erase() // \u5220\u9664\u64cd\u4f5c \n{\n\tcout<<\"del\"<<endl;\n\tcout.flush();\n\tcin>>n;\n\tmemset(a,0,sizeof(a));\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t}\n}\nvoid getdfn(ll u) // \u6c42dfn \n{\n\tcout<<\"dfn \"<<u<<endl;\n\tcout.flush();\n\tcin>>tree[++cnt].dfn;\n\ttree[cnt].pos=u;\n}\nvoid getdis(ll u,ll v) // \u6c42dis \n{\n\tcout<<\"dis \"<<tree[u].pos<<\" \"<<tree[v].pos<<endl;\n\tcout.flush();\n\tll res;\n\tcin>>res;\n\tans+=res;\n}\nvoid print() // \u8f93\u51fa \n{\n\tcout<<\"! \"<<ans/2<<endl;\n\tcout.flush();\n}\nbool cmp(Node x,Node y)\n{\n\treturn x.dfn<y.dfn;\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t}\n\tfor(int j=0;;j++)\n\t{\n\t\tmemset(tree,0,sizeof(tree));\n\t\tif(n==1){print();break;}\n\t\tcnt=0;\n\t\tfor(int i=1;i<=n;i++)if(a[i]==1)cnt++;\n\t\tif(cnt*2+j+1>142){erase();continue;} // \u7b80\u5355\u7684\u5224\u65ad \n\t\tcnt=0;\n\t\tfor(int i=1;i<=n;i++)if(a[i]==1)getdfn(i);\n\t\tsort(tree+1,tree+cnt+1,cmp);\n\t\tfor(int i=1;i<cnt;i++)getdis(i,i+1);\n\t\tgetdis(cnt,1);\n\t\tprint();break;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1633785918,
        "uid": 195338,
        "name": "bunH2O",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7895 \u3010\u300eJROI-3\u300f\u5220\u6811\u3011"
    },
    {
        "content": "\u6ce8\u610f\u5230\u4e00\u4e2a\u7ed3\u8bba\uff1a\n\n>\u5bf9\u4e8e\u4e00\u68f5\u6709\u6839\u6811 $T$\uff0c\u8bbe\u5176\u6240\u6709\u53f6\u5b50\u7ed3\u70b9\u4e3a $L_1,L_2,\\cdots,L_m$\u3002\n\n>\u8bb0 $S$ \u4e3a\u6811\u4e0a\u6240\u6709\u8fb9\u8fb9\u6743\u4e4b\u548c\uff0c\u82e5 $\\text{DFN}(L_1)<\\text{DFN}(L_2)<\\cdots<\\text{DFN}(L_m)$\uff0c\u5219 \n\n> $$2S=\\sum_{i=1}^m\\text{dist}(L_i,L_{i+1})\\tag{\\#}$$\n\n> \u5176\u4e2d $\\text{DFN}(u)$ \u8868\u793a $u$ \u7684 dfs \u5e8f\uff0c$\\text{dist}(u,v)$ \u8868\u793a $u,v$ \u95f4\u8def\u5f84\u4e0a\u6240\u6709\u8fb9\u7684\u8fb9\u6743\u4e4b\u548c\uff0c$L_{m+1}=L_1$\u3002\n\n\u5176\u4e2d\u7684\u9053\u7406\u4e0d\u96be\u8bb2\uff1a\u6211\u4eec\u8003\u8651\u4e00\u6761\u8fb9 $(u,v)$ \u5728\u7b54\u6848\u4e2d\u7684\u7cfb\u6570\u3002\u4e0d\u59a8\u8bbe $u$ \u4e3a $v$ \u7684\u7236\u8282\u70b9\uff0c\u7531\u4e8e\u53f6\u5b50\u8282\u70b9\u6309\u7167 dfs \u5e8f\u5347\u5e8f\u6392\u5217\uff0c\u56e0\u6b64 $v$ \u5b50\u6811\u5185\u7684\u53f6\u5b50\u7ed3\u70b9\u5fc5\u7136\u662f\u539f\u6765\u8fd9\u4e9b\u53f6\u5b50\u7ed3\u70b9\u7684\u4e00\u4e2a\u5b50\u533a\u95f4\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u5b58\u5728 $x,y$ \u4f7f\u5f97 $L_{x},L_{x+1},\\cdots,L_{y}$ \u5728 $v$ \u7684\u5b50\u6811\u5185\uff0c\u800c\u5176\u4ed6\u7684\u53f6\u5b50\u7ed3\u70b9\u5728 $v$ \u7684\u5b50\u6811\u5916\u3002\u56e0\u6b64\uff0c\u53ea\u6709\u8ba1\u7b97 $\\text{dist}(L_{x-1},L_x)$ \u4ee5\u53ca $\\text{dist}(L_{y},L_{y+1})$ \u65f6\u4f1a\u8ba1\u7b97\u5230 $(u,v)$ \u8fd9\u6761\u8fb9\u3002\u6362\u8a00\u4e4b\uff0c\u6bcf\u6761\u8fb9\u7684\u8fb9\u6743\u5728 $\\text{(\\#)}$ \u5f0f\u4e2d\u7684\u7cfb\u6570\u5747\u4e3a $2$\uff0c\u8fd9\u4e5f\u5c31\u8bc1\u660e\u4e86\u7ed3\u8bba\u3002\n\n\u7531\u4e0a\u8ff0\u7ed3\u8bba\uff0c\u8bbe\u53f6\u8282\u70b9\u7684\u4e2a\u6570\u4e3a $m$\uff0c\u6211\u4eec\u5148\u7528 $m$ \u6b21\u64cd\u4f5c\u95ee\u51fa\u6765\u6240\u6709\u53f6\u8282\u70b9\u7684 dfs \u5e8f\u5e76\u4f9d\u6b64\u6392\u5e8f\uff0c\u7136\u540e\u8be2\u95ee $m$ \u6b21 $\\text{dist}$ \u5373\u53ef\uff0c\u6240\u9700\u64cd\u4f5c\u6b21\u6570\u4e3a $2m$\u3002\n\n\u56e0\u6b64\uff0c\u8bbe\u5269\u4f59\u7684\u64cd\u4f5c\u6b21\u6570\u4e3a $t$\uff08\u521d\u59cb\u4e3a $142$\uff09\uff0c\u53f6\u8282\u70b9\u6570\u4e3a $m$\uff0c\u6211\u4eec\u8003\u8651\u4ee5\u4e0b\u7684\u7b97\u6cd5\uff1a\n\n- \u82e5 $2m\\le t$\uff0c\u90a3\u4e48\u76f4\u63a5\u6309\u7167\u4e0a\u9762\u7684\u8be2\u95ee\u4e00\u904d\u5e76\u8f93\u51fa\u7b54\u6848\u3002\n- \u82e5 $2m>t$\uff0c\u90a3\u4e48\u8fdb\u884c\u4e00\u6b21 `del` \u64cd\u4f5c\uff0c\u5c06 $t$ \u51cf\u53bb $1$\uff0c\u5e76\u66f4\u65b0 $m$\u3002\n\n\u5173\u4e8e\u8fd9\u6837\u505a\u7684\u6b63\u786e\u6027\uff08\u64cd\u4f5c\u6b21\u6570\u5fc5\u7136\u4e0d\u8d85\u8fc7\u9650\u5236\uff09\uff0c\u5176\u5b9e\u4ece $142$ \u8fd9\u4e2a\u6570\u5c31\u5df2\u7ecf\u53ef\u4ee5\u770b\u51fa\u6765\u4e86\uff1a\n\n> $$2\\left\\lfloor\\sqrt{5000}\\right\\rfloor+1=141$$\n\n\u6ce8\u610f\u5230\u8fd9\u70b9\u540e\uff0c\u7b97\u6cd5\u6b63\u786e\u6027\u7684\u8bc1\u660e\u5df2\u7ecf\u547c\u4e4b\u6b32\u51fa\u4e86\u3002~~\u7559\u505a\u4e60\u9898~~\n\n```cpp\n#include<bits/stdc++.h>\n\n#define int long long\n\nusing namespace std;\n\ninline int read(){\n    int x=0,f=1;char c=getchar();\n    for(;(c<'0'||c>'9');c=getchar()){if(c=='-')f=-1;}\n    for(;(c>='0'&&c<='9');c=getchar())x=x*10+(c&15);\n    return x*f;\n}\n\nconst int MN=5005;\nint n;\n\nstruct Node{\n    int dfn,id;\n    Node(int D,int I):dfn(D),id(I){}\n    Node(){}\n};\nNode val[MN];\n\nbool cmp(Node x,Node y){return x.dfn<y.dfn;}\n\nint cnt;\nvoid init(){\n    cin>>n;cnt=0;\n    for(int i=1;i<=n;i++)if(read()==1)val[++cnt]=Node(0,i);\n}\n\nsigned main(void){\n\n    init();int t=142;\n    while(cnt*2>=t){\n        cout<<\"del\"<<endl;\n        t--,init();\n    }\n    for(int i=1;i<=cnt;i++){\n        cout<<\"dfn \"<<val[i].id<<endl;\n        val[i].dfn=read();\n    }\n    sort(val+1,val+cnt+1,cmp);\n    cout<<\"dis \"<<val[1].id<<\" \"<<val[cnt].id<<endl;\n    int ans=read();\n    for(int i=1;i<cnt;i++){\n        cout<<\"dis \"<<val[i].id<<\" \"<<val[i+1].id<<endl;\n        ans+=read();\n    }\n    cout<<\"! \"<<ans/2<<endl;\n\n    return 0;\n}\n```",
        "postTime": 1634012514,
        "uid": 307453,
        "name": "\u4e91\u6d45\u77e5\u5904",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P7895 \u300eJROI-3\u300f\u5220\u6811"
    },
    {
        "content": "\u5982\u679c\u6811\u7684\u89c4\u6a21\u8f83\u5927\uff0c\u5728\u89c4\u5b9a\u6b21\u6570\u5185\u5f97\u5230\u7b54\u6848\u663e\u7136\u662f\u56f0\u96be\u7684\u3002\u6ce8\u610f\u5230 $3$ \u64cd\u4f5c\u662f\u5220\u6389\u6240\u6709\u53f6\u5b50\uff0c\u6070\u597d\u80fd\u51cf\u5c0f\u6811\u7684\u89c4\u6a21\u3002\u6240\u4ee5\u4e00\u4e2a\u521d\u6b65\u7684\u601d\u8def\u662f\u5148\u4e0d\u65ad\u5220\u70b9\uff0c\u76f4\u5230\u67d0\u4e00\u6b21\u6240\u80fd\u5220\u7684\u70b9\u6570\u8f83\u5c11\uff0c\u5373\u53f6\u5b50\u6570\u8f83\u5c11\u65f6\u518d\u91c7\u7528\u67d0\u79cd\u7b56\u7565\u95ee\u51fa\u7b54\u6848\u3002\n\n\u600e\u4e48\u5229\u7528\u53f6\u5b50\u6570\u8f83\u5c11\u8fd9\u4e00\u6027\u8d28\u95ee\u51fa\u7b54\u6848\u5462\uff1f\u6709\u4e00\u4e2a\u7ed3\u8bba\u662f\u5982\u679c\u628a\u6240\u6709\u53f6\u5b50\u6309\u7167 dfs \u5e8f\u6392\u5e8f\uff0c\u90a3\u4e48 $\\frac{\\sum_{i=1}^{cnt}dis(a_i,a_{i+1})}{2}$ \u5373\u4e3a\u6574\u68f5\u6811\u7684\u6743\u503c\u548c\uff0c\u5176\u4e2d $cnt$ \u4e3a\u53f6\u5b50\u6570\uff0c$a_i$ \u8868\u793a dfs \u5e8f\u7b2c $i$ \u5c0f\u7684\u53f6\u5b50\uff0c\u7279\u522b\u5730\uff0c$a_{cnt+1}=a_1$\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4ece\u6b27\u62c9\u5e8f\u7684\u89d2\u5ea6\u6765\u7406\u89e3\u8fd9\u4e2a\u7ed3\u8bba\u3002\u6b27\u62c9\u5e8f\u662f\u4ece\u6839\u51fa\u53d1\uff0c\u6309 dfs \u7684\u987a\u5e8f\u7ed5\u6811\u4e00\u5708\u518d\u56de\u5230\u6839\u7ed3\u70b9\uff0c\u5230\u8fbe\u67d0\u4e2a\u70b9\u6216\u79bb\u5f00\u67d0\u4e2a\u70b9\u65f6\u628a\u8be5\u70b9\u8bb0\u5f55\u4e0b\u6765\u5f97\u5230\u7684\u5e8f\u5217\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5vxpf0tm.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u4e0a\u56fe\u5c31\u662f\u4e00\u4e2a\u6b27\u62c9\u5e8f\u7684\u5b9e\u4f8b\uff0c\u4e0d\u96be\u53d1\u73b0\u5b83\u4f1a\u6070\u597d\u7ecf\u8fc7\u6bcf\u6761\u8fb9\u4e24\u6b21\uff0cdfs \u5e8f\u5b9e\u9645\u4e0a\u662f\u6b27\u62c9\u5e8f\u53ea\u4fdd\u7559\u5230\u8fbe\u65f6\u8bb0\u5f55\u7684\u70b9\u6240\u5f97\u5230\u7684\u7ed3\u679c\u3002\u800c\u5bf9\u53f6\u5b50\u6765\u8bf4\uff0c\u5230\u8fbe\u5373\u79bb\u5f00\uff0c\u56e0\u6b64$dis(a_i,a_i+1)$ \u5176\u5b9e\u5c31\u662f\u5728\u6a21\u62df\u5230\u8fbe\u4e00\u4e2a\u53f6\u5b50\u540e\u79bb\u5f00\u524d\u5f80\u4e0b\u4e00\u4e2a\u53f6\u5b50\u7684\u8fc7\u7a0b\uff0c\u90a3\u4e48  $\\sum_{i=1}^{cnt}dis(a_i,a_{i+1})$ \u5c31\u662f\u6574\u4e2a\u73af\u6e38\u7684\u8fc7\u7a0b\uff0c\u5b83\u4f1a\u628a\u6bcf\u6761\u8fb9\u90fd\u7ecf\u8fc7\u6070\u597d\u4e24\u6b21\uff0c\u9664\u4ee5 $2$ \u5c31\u662f\u53ea\u7ecf\u8fc7\u4e00\u6b21\u7684\u7ed3\u679c\uff0c\u5373\u6811\u7684\u8fb9\u6743\u548c\u3002\n\n\u8fd9\u6837\u5f53\u6811\u7684\u89c4\u6a21\u4e3a $n$\uff0c\u53f6\u5b50\u6570\u4e3a $cnt$ \u65f6\u4ea4\u4e92\u6b21\u6570\u4e3a $T(n)=min(T(n-cnt)+1,2cnt+1)$\uff0c\u53ef\u4ee5\u62ff dp \u66b4\u529b\u89e3\u4e00\u4e0b\uff0c\u4e0d\u591a\u4e0d\u5c11\u521a\u521a\u597d\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff08\u7801\u5b57\u4e0d\u6613\uff0c\u70b9\u4e2a\u8d5e\u518d\u8d70\u597d\u4e0d\u597dQAQ\uff09\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#include<vector>\n#include<queue>\n#include<map>\n#define pii pair<int,int>\n#define pb push_back\n#define sml(x,y) (x=min(x,y))\n#define big(x,y) (x=max(x,y))\n#define ll long long\n#define db double\n#define fo(i,x,y) for(int i=x;i<=y;++i)\n#define go(i,x,y) for(int i=x;i>=y;--i)\nusing namespace std;\ninline int read(){int x=0,fh=1; char ch=getchar(); while(!isdigit(ch)){if(ch=='-') fh=-1; ch=getchar();} while(isdigit(ch)){x=(x<<1)+(x<<3)+ch-'0'; ch=getchar();} return x*fh;}\ninline void out(int *a,int l,int r){fo(i,l,r) printf(\"%d \",*(a+i));puts(\"\");}\n\nconst int N=5005;\nint n,a[N],top,d[N],dfn[N],dis[N],res=142;\n\nint qdfn(int x){\n\tres--;\n\tprintf(\"dfn %d\\n\",x);\n\tcout.flush();\n\treturn read();\n} \n\nint qdis(int x,int y){\n\tres--;\n\tprintf(\"dis %d %d\\n\",x,y);\n\tcout.flush();\n\treturn read();\n}\n\nvoid qdel(){\n\tres--;\n\tputs(\"del\");\n\tcout.flush();\n\tn=read();\n\tfo(i,1,n) d[i]=read();\n\treturn;\n}\n\nbool cmp(int x,int y){return dfn[x]<dfn[y];} \n\nint main(){\n\tcin>>n;\n\tfo(i,1,n) d[i]=read();\n\twhile(1){\n\t\ttop=0;\n\t\tfo(i,1,n) if(d[i]==1) a[++top]=i;\n\t\tif(top*2+1<=res){\n\t\t\tint ans=0;\n\t\t\tfo(i,1,top) dfn[a[i]]=qdfn(a[i]);\n\t\t\tsort(a+1,a+1+top,cmp);\n\t\t\ta[top+1]=a[1]; \n\t\t\tfo(i,1,top) ans+=qdis(a[i],a[i+1]);\n\t\t\tprintf(\"! %d\",ans/2);\n\t\t\treturn 0;\n\t\t}else qdel();\n\t}\n\treturn 0;\n}\n/*\n-------------------------------------------------\n*/\n```\n\n",
        "postTime": 1633618204,
        "uid": 238408,
        "name": "vectorwyx",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P7895 \u300eJROI-3\u300f\u5220\u6811"
    }
]
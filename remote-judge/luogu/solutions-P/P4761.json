[
    {
        "content": "\u4e09\u4e2a\u5b57\u7b26\u4e32\uff0c\u8bbe\u6700\u957f\u7684\u957f\u4e3a $n$ \uff0c\u5219\u7a7a\u683c\u53ef\u4ee5\u770b\u6210 $0$ \uff0c$a$ \u5230 $z$ \u5206\u522b\u770b\u6210 $1$ \u5230 $26$ \uff0c$?$ \u770b\u6210 $-1$ \u3002\n\n\u4ece\u540e\u5230\u524d\u8003\u8651\u6bcf\u4e00\u4f4d\uff0c\u7b26\u5408\u7684\u6709\u5982\u4e0b\u56db\u79cd\u60c5\u51b5\uff1a\n\n$a<b<c$ \uff0c$a<b=c$ \uff0c $a=b<c$ \uff0c $a=b=c$\n\n\u7b2c\u4e00\u79cd\uff1a\u7b54\u6848\u76f4\u63a5\u52a0\u4e0a $26$ \u7684\u540e\u9762 $?$ \u4e2a\u6570\u6b21\u65b9\u3002\n\n\u7b2c\u4e8c\u79cd\u3001\u7b2c\u4e09\u79cd\uff1a\u9884\u5904\u7406\u53ea\u6709\u4e24\u4e2a\u5b57\u7b26\u4e32\u65f6\u7684\u7b54\u6848\u3002\n\n\u7b2c\u56db\u79cd\uff1a\u4e0e\u4e0a\u4e00\u4f4d\u7684\u7b54\u6848\u76f8\u540c\n\n\u8fd8\u8981\u679a\u4e3e\u6bcf\u4e00\u4f4d\u662f\u4e0d\u662f\u95ee\u53f7\uff0c\u6709\u516b\u79cd\u60c5\u51b5\u3002\n\n\u6ce8\u610f\u8981\u65f6\u523b\u53d6\u6a21\uff0c\u4e0d\u7136\u5c31\u6ea2\u51fa\u4e86\u3002\n\n\u8fd8\u6709 $26$ \u7684\u82e5\u5e72\u6b21\u65b9\u63d0\u524d\u9884\u5904\u7406\u3002\n\n```\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\nchar ch[1000005];\nvoid Read(int *a,int &n)\n{\n\tscanf(\"%s\",ch+1);\n\tfor (n=1;ch[n]!='\\0';n++) ; n--;\n\tfor (int i=1;i<=n;i++) a[i]=(ch[i]=='?')?-1:ch[i]-'a'+1;\n\tfor (int i=1;i<=n;i++) ch[i]='\\0';\n}\nconst long long M=1e9+9;\nlong long Mit[4000001];\nlong long Mi(long long a,long long b)\n{\n\tif (a==26) return Mit[b];\n}\nvoid Calc(long long *f,int n,int *a,int *b)\n{\n\tint ca=0,cb=0;\n\tif (a[n]!=-1&&b[n]!=-1)\n\t{\n\t\tif (a[n]>=b[n]) f[n]=0;\n\t\telse f[n]=1;\n\t}\n\telse if (a[n]!=-1) f[n]=26-a[n];\n\telse if (b[n]!=-1) f[n]=b[n]-1;\n\telse f[n]=13*25;\n\tif (a[n]==-1) ca++;\n\tif (b[n]==-1) cb++;\n\tfor (int i=n-1;i>=1;i--)\n\t{\n\t\tif (a[i]!=-1&&b[i]!=-1)\n\t\t{\n\t\t\tif (a[i]>b[i]) f[i]=0;\n\t\t\telse if (a[i]<b[i]) f[i]=Mi(26,ca+cb);//\n\t\t\telse f[i]=f[i+1];\n\t\t}\n\t\telse if (a[i]!=-1)\n\t\t{\n\t\t\tf[i]=1ll*(26-a[i])*Mi(26,ca+cb)%M+f[i+1];\n\t\t\tif (f[i]>=M) f[i]-=M;\n\t\t}\n\t\telse if (b[i]!=-1)\n\t\t{\n\t\t\tf[i]=1ll*(b[i]-1)*Mi(26,ca+cb)%M+f[i+1];\n\t\t\tif (f[i]>=M) f[i]-=M;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[i]=13ll*25ll*Mi(26,ca+cb)%M+26ll*f[i+1]%M;\n\t\t\tif (f[i]>=M) f[i]-=M;\n\t\t}\n\t\tif (a[i]==-1) ca++;\n\t\tif (b[i]==-1) cb++;\n\t}\n}\nint T,n;\nint a[1000005],b[1000005],c[1000005];\nint la,lb,lc;\nlong long g1[1000005],g2[1000005],f[1000005];\nint main()\n{\n\tMit[0]=1ll;\n\tfor (int i=1;i<=3000000;i++) Mit[i]=Mit[i-1]*26ll%M;//\u9884\u5904\u740626\u7684\u82e5\u5e72\u6b21\u65b9\u7ed3\u679c\n\tscanf(\"%d\",&T);\n\twhile (T--)\n\t{\n\t\tRead(a,la),Read(b,lb),Read(c,lc);//\u8bfb\u5165\u65f6\u4ece\u5b57\u7b26\u8f6c\u4e3a\u6570\u5b57\n\t\tn=max(la,max(lb,lc));\n\t\tCalc(g1,n,a,b);//\u9884\u5904\u7406\u53ea\u8003\u8651a,b\u7684\u60c5\u51b5\n\t\tCalc(g2,n,b,c);//\u9884\u5904\u7406\u53ea\u8003\u8651b,c\u7684\u60c5\u51b5\n//\t\tfor (int i=1;i<=n;i++) printf(\"%d %d %d\\n\",i,g1[i],g2[i]);\n\t\tint ca=0,cb=0,cc=0;//\u8ba1\u7b97\u95ee\u53f7\u6570\u76ee//\u6ce8\u610f\u7b2cn\u4f4d\u8981\u4e25\u683c\u4e0d\u76f8\u7b49\n\t\tif (a[n]!=-1&&b[n]!=-1&&c[n]!=-1)\n\t\t{\n\t\t\tif (a[n]<b[n]&&b[n]<c[n]) f[n]=1;\n\t\t\telse f[n]=0;\n\t\t}\n\t\telse if (a[n]!=-1&&b[n]!=-1)\n\t\t{\n\t\t\tif (a[n]<b[n]) f[n]=26-b[n];\n\t\t\telse f[n]=0;\n\t\t}\n\t\telse if (a[n]!=-1&&c[n]!=-1)\n\t\t{\n\t\t\tif (a[n]+1<c[n]) f[n]=c[n]-a[n]-1;\n\t\t\telse f[n]=0;\n\t\t}\n\t\telse if (b[n]!=-1&&c[n]!=-1)\n\t\t{\n\t\t\tif (b[n]<c[n]) f[n]=b[n]-1;\n\t\t\telse f[n]=0;\n\t\t}\n\t\telse if (a[n]!=-1)\n\t\t{\n\t\t\tf[n]=1ll*(26-a[n])*(26-a[n]-1)/2;\n\t\t}\n\t\telse if (b[n]!=-1)\n\t\t{\n\t\t\tf[n]=1ll*(b[n]-1)*(26-b[n]);\n\t\t}\n\t\telse if (c[n]!=-1)\n\t\t{\n\t\t\tf[n]=1ll*(c[n]-1)*(c[n]-2)/2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf[n]=1ll*26*25*24/6;\n\t\t}\n\t\tif (a[n]==-1) ca++;\n\t\tif (b[n]==-1) cb++;\n\t\tif (c[n]==-1) cc++;\n\t\tf[n]%=M;\n\t\tfor (int i=n-1;i>=1;i--)\n\t\t{\n\t\t\tif (a[i]!=-1&&b[i]!=-1&&c[i]!=-1)\n\t\t\t{\n\t\t\t\tif (a[i]<b[i]&&b[i]<c[i]) f[i]=Mi(26,ca+cb+cc);\n\t\t\t\telse if (a[i]<b[i]&&b[i]==c[i]) f[i]=Mi(26,ca)*g2[i+1]%M;\n\t\t\t\telse if (a[i]==b[i]&&b[i]<c[i]) f[i]=Mi(26,cc)*g1[i+1]%M;\n\t\t\t\telse if (a[i]==b[i]&&b[i]==c[i]) f[i]=f[i+1];\n\t\t\t\telse f[i]=0;\n\t\t\t}\n\t\t\telse if (a[i]!=-1&&b[i]!=-1)\n\t\t\t{\n\t\t\t\tif (a[i]<b[i]) f[i]=1ll*(26-b[i])*Mi(26,ca+cb+cc)%M+1ll*Mi(26,ca)*g2[i+1]%M;\n\t\t\t\telse if (a[i]==b[i]) f[i]=1ll*(26-b[i])*g1[i+1]%M*Mi(26,cc)%M+f[i+1];\n\t\t\t\telse f[i]=0;\n\t\t\t}\n\t\t\telse if (a[i]!=-1&&c[i]!=-1)\n\t\t\t{\n\t\t\t\tif (a[i]<c[i]) f[i]=1ll*(c[i]-a[i]-1)*Mi(26,ca+cb+cc)%M+1ll*Mi(26,cc)*g1[i+1]%M+1ll*Mi(26,ca)*g2[i+1]%M;\n\t\t\t\telse if (a[i]==c[i]) f[i]=f[i+1];\n\t\t\t\telse f[i]=0;\n\t\t\t}\n\t\t\telse if (b[i]!=-1&&c[i]!=-1)\n\t\t\t{\n\t\t\t\tif (b[i]<c[i]) f[i]=1ll*(b[i]-1)*Mi(26,ca+cb+cc)%M+1ll*Mi(26,cc)*g1[i+1]%M;\n\t\t\t\telse if (b[i]==c[i]) f[i]=1ll*(b[i]-1)*g2[i+1]%M*Mi(26,ca)%M+f[i+1];\n\t\t\t\telse f[i]=0;\n\t\t\t}\n\t\t\telse if (a[i]!=-1)\n\t\t\t{\n\t\t\t\tf[i]=1ll*(26-a[i])*(26-a[i]-1)/2%M*Mi(26,ca+cb+cc)%M+Mi(26,ca)*g2[i+1]%M*(26-a[i])%M+\n\t\t\t\tMi(26,cc)*g1[i+1]%M*(26-a[i])%M+f[i+1];\n\t\t\t}\n\t\t\telse if (b[i]!=-1)\n\t\t\t{\n\t\t\t\tf[i]=1ll*(b[i]-1)*(26-b[i])%M*Mi(26,ca+cb+cc)%M+Mi(26,ca)*g2[i+1]%M*(b[i]-1)%M+\n\t\t\t\tMi(26,cc)*g1[i+1]%M*(26-b[i])%M+f[i+1];\n\t\t\t}\n\t\t\telse if (c[i]!=-1)\n\t\t\t{\n\t\t\t\tf[i]=1ll*(c[i]-1)*(c[i]-2)/2%M*Mi(26,ca+cb+cc)%M+Mi(26,ca)*g2[i+1]%M*(c[i]-1)%M+\n\t\t\t\tMi(26,cc)*g1[i+1]%M*(c[i]-1)%M+f[i+1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tf[i]=1ll*26*25*24/6*Mi(26,ca+cb+cc)%M+Mi(26,ca)*g2[i+1]%M*13ll*25ll%M+\n\t\t\t\tMi(26,cc)*g1[i+1]%M*13*25%M+1ll*26*f[i+1]%M;\n\t\t\t}\n\t\t\tif (a[i]==-1) ca++;\n\t\t\tif (b[i]==-1) cb++;\n\t\t\tif (c[i]==-1) cc++;\n\t\t\tf[i]%=M;\n\t\t}\n\t\tprintf(\"%lld\\n\",f[1]);\n\t\tfor (int i=1;i<=la;i++) a[i]=0;\n\t\tfor (int i=1;i<=lb;i++) b[i]=0;\n\t\tfor (int i=1;i<=lc;i++) c[i]=0;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1624281052,
        "uid": 60215,
        "name": "uibn",
        "ccfLevel": 9,
        "title": "P4761"
    }
]
[
    {
        "content": "\u3010POI\u8865\u5168\u8ba1\u5212#3 POI2005 SAM\u3011\n\n\u8fd9\u9898\u8c8c\u4f3c\u662f\u4e2a\u7ecf\u5178\u8d2a\u5fc3\u8bf6\n\n\u6bcf\u6b21\u9009\u62e9\u5c06\u6765\u6700\u665a\u7528\u5230\u7684\u73a9\u5177\u653e\u4e0a\u67dc\u5b50\u5c31\u597d\u4e86\n\n**\u672c\u505a\u6cd5\u6839\u672c\u4e0d\u9700\u8981\u624b\u5199\u5806**\n\n\u6211\u4eec\u5148\u9884\u5904\u7406\u4e00\u4e2aNEXT\u6570\u7ec4\uff0c\n\nNEXT[i]=j \u4ee3\u8868\u4e0e\u7b2ci\u4e2a\u4f4d\u7f6e\u7684\u6570\u76f8\u540c\u7684\u6570\u4e0b\u4e00\u6b21\u51fa\u73b0\u5728\u7b2cj\u4e2a\u4f4d\u7f6e\n\n\u63a5\u4e0b\u6765\u4f7f\u7528priority\\_queue\n\n\u6bd4\u8f83\u51fd\u6570\u81ea\u5df1\u5199\u4e00\u4e2a\n\n```cpp\nstruct cmp\n{\n    inline bool operator()(const int &x,const int &y)\n    {\n        return NEXT[x]<NEXT[y];\n    }\n};\n```\n\u6ce8\u610f\u4f20\u7ed9priority\\_queue\u7684\u6a21\u677f\u53c2\u6570\u5fc5\u987b\u8981\u662f\u4e00\u4e2aclass/struct\n\n\u7136\u540e\u8fd9\u4e48\u58f0\u660epriority\\_queue\n\n```cpp\npriority_queue<int,vector<int>,cmp> pq;\n```\n\u63a5\u4e0b\u6765\u5c31\u662f\u4e00\u4e2a\u6a21\u62df\u7684\u8fc7\u7a0b\uff0c\u5f00\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u5f53\u524d\u54ea\u4e9b\u73a9\u5177\u5728\u5730\u4e0a\n\n\u6bcf\u6b21\u53d1\u73b0\u4e00\u4e2a\u8981\u73a9\u7684\u73a9\u5177\u4e0d\u5728\u5730\u4e0a\u4e14\u5730\u4e0a\u7684\u73a9\u5177\u6ee1\u7684\u65f6\u5019\uff08\u76f8\u5f53\u4e8e\u4f18\u5148\u961f\u5217\u5927\u5c0f\u6070\u597d\u7b49\u4e8e $ k $ \uff09\u628a\u4f18\u5148\u961f\u5217\u4e2d\u5c06\u8981\u6700\u540e\u4f7f\u7528\u7684\u73a9\u5177\u653e\u5230\u67dc\u5b50\u4e0a\uff0c\u518d\u628a\u67dc\u5b50\u4e0a\u7684\u73a9\u5177\u62ff\u4e0b\u6765\n\n**\u4f46\u662f\u8fd9\u91cc\u6709\u70b9\u95ee\u9898\uff1a**\n\n**\u5982\u679c\u67d0\u4e2a\u73a9\u5177\u5728\u5730\u4e0a\u7684\u8bdd\u662f\u4e0d\u4f1a\u66f4\u65b0\u4f18\u5148\u961f\u5217\u4e2d\u7684\u65f6\u95f4\u4fe1\u606f\u7684**\n\n**\u89c2\u5bdf\u5230\u5982\u679c\u4e00\u4e2a\u73a9\u5177\u88ab\u4f7f\u7528\u8fc7\u540e\u5c31\u518d\u4e5f\u4e0d\u4f1a\u6210\u4e3a\u4f18\u5148\u961f\u5217\u7684top**\n\n**\u6240\u4ee5\u6211\u4eec\u6bcf\u6b21\u53d1\u73b0\u73a9\u5177\u5728\u5730\u4e0a\u65f6\u628a\u5730\u677f\u5927\u5c0f\uff08 $ k $ \uff09+1\u5c31\u597d\u4e86**\n\n\n\u8003\u8651\u5230\u6211\u53ef\u80fd\u8bb2\u5f97\u4e0d\u6e05\u695a\uff0c\u6211\u8fd8\u662f\u8d34\u4e00\u4e0b\u4ee3\u7801\u5427\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<queue>\nusing namespace std;\nconst int MAXN=100010,MAXM=500010;\nqueue<int> q[MAXN];\nint NEXT[MAXM];\nint a[MAXM];\nint n,k,m;\nstruct cmp\n{\n    inline bool operator()(const int &x,const int &y)\n    {\n        return NEXT[x]<NEXT[y];\n    }\n};\npriority_queue<int,vector<int>,cmp> pq;\nint inq[MAXN],ans;\nint main()\n{\n    scanf(\"%d%d%d\",&n,&k,&m);\n    for(int i=1;i<=m;i++)\n    {\n        scanf(\"%d\",&a[i]);\n        q[a[i]].push(i);\n    }\n    for(int i=1;i<=m;i++)\n    {\n        q[a[i]].pop();\n        if(q[a[i]].empty())NEXT[i]=m+1;\n        else NEXT[i]=q[a[i]].front();\n    }\n    for(int i=1;i<=m;i++)\n    {\n        if(!inq[a[i]])\n        {\n            if(pq.size()==k)\n            {\n                inq[a[pq.top()]]=0;\n                pq.pop();\n            }\n            pq.push(i);\n            ++ans;\n            inq[a[i]]=1;\n        }\n        else\n        {\n            ++k;\n            pq.push(i);\n        }\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1504929133,
        "uid": 3346,
        "name": "oscar",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "## [P3419 SAM-Toy Cars](https://www.luogu.org/problem/P3419)\n\u8fd9\u9053\u9898\u7528\u8d2a\u5fc3\u7684\u601d\u60f3\u3002\n\n\u5047\u5982\u73b0\u5728\u5730\u677f\u6ee1\u4e86\uff0c\u6211\u8981\u53bb\u67b6\u5b50\u4e0a\u53d6\u67d0\u4e2a\u73a9\u5177\uff0c\u90a3\u4e48\u6211\u8981\u628a\u8c01\u653e\u56de\u53bb\u5462\uff1f\n\n\u5f88\u81ea\u7136\u7684\u60f3\u5230\u628a\u4e0b\u6b21\u73a9\u7684\u65f6\u95f4\u6700\u665a\u7684\u90a3\u4e2a\u73a9\u5177\u653e\u56de\uff08\u5982\u679c\u67d0\u4e2a\u73a9\u5177\u4e4b\u540e\u518d\u4e5f\u4e0d\u73a9\u4e86\uff0c\u90a3\u4e48\u4e0b\u6b21\u73a9\u7684\u65f6\u95f4\u4e3ainf\uff09\u3002\n\n\u5173\u952e\u662f\u5982\u4f55\u786e\u5b9a\u4e0b\u6b21\u73a9\u7684\u65f6\u95f4\u6700\u665a\u7684\u90a3\u4e2a\u73a9\u5177\uff0c\u8fd9\u65f6\u6211\u4eec\u60f3\u5230\u4f18\u5148\u961f\u5217\uff0c\u7528\u5806\u7ef4\u62a4\u73a9\u5177\u4e0b\u6b21\u73a9\u7684\u65f6\u95f4\u7684\u6700\u5927\u503c\u3002\n\n~~\u697c\u4e0b\u6709\u51e0\u7bc7\u8bb2\u7684\u5f88\u8be6\u7ec6\uff0c\u4f46\u81ea\u6211\u611f\u89c9\u6211\u7684\u4ee3\u7801\u5b9e\u73b0\u6bd4\u8f83\u7b80\u5355~~\n\n\u5177\u4f53\u770b\u4ee3\u7801\u6ce8\u91ca\u5427\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<queue>\nusing namespace std;\npriority_queue<pair<int,int> > q;\nint n,k,m,ans;\nint a[500100],s[500100],p[100100];\nbool v[100100];\nint main()\n{\n\tcin>>n>>k>>m;\n\tfor(int i=1;i<=m;++i) scanf(\"%d\",&a[i]);\n\t//\u5012\u5e8f\u679a\u4e3em\u4e2a\u73a9\u5177\uff0cP\u8bb0\u5f55\u8be5\u73a9\u5177\u4e0a\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u518d\u6b21\u51fa\u73b0\u65f6\u8d4b\u7ed9S \n\tfor(int i=m;i>=1;i--){\n\t\tif(p[a[i]]==0) s[i]=1e6;\n\t\telse s[i]=p[a[i]];\n\t\tp[a[i]]=i;\n\t}\n\tfor(int i=1;i<=m;++i){\n\t\tif(v[a[i]]) k++,q.push(make_pair(s[i],a[i]));//\u5df2\u7ecf\u5728\u961f\u5217\u4e2d\uff0c\u4f46\u66f4\u65b0\u4e0d\u4fbf\uff0c\u6240\u4ee5\u7528k++\u4ee3\u66ff \n\t\telse{\n\t\t\tif(q.size()==k)v[q.top().second]=0,q.pop();//\u82e5\u961f\u5217\u5df2\u6ee1\uff0c\u53d6\u51fa\u4e0b\u6b21\u51fa\u73b0\u6700\u665a\u7684\uff0c\u5373\u961f\u5934 \n\t\t\tq.push(make_pair(s[i],a[i])),v[a[i]]=1;\n\t\t        ans++;\n\t\t    }\n\t}\n\tprintf(\"%d\\n\",ans);\n}\n```\n",
        "postTime": 1571143523,
        "uid": 182831,
        "name": "\u5343\u91cc\u9a6c",
        "ccfLevel": 0,
        "title": "P3419 SAM-Toy Cars"
    },
    {
        "content": "### \u5b9e\u9645\u4e0a\u662f\u4e00\u9053\u8d2a\u5fc3\u9898\uff1a\n\t\u4ee5\u6837\u4f8b\u4e3a\u4f8b\uff1a\n    3 2 7\n    1 2 3 1 3 1 2\n    \u5728\u5730\u9762\u4e0a\u73a9\u5177\u8d85\u8fc7k\u65f6\uff0c\u62ff\u4e0b\u4e00\u4ef6\u73a9\u5177\u7684\u540c\u65f6\u9700\u8981\u653e\u56de\u4e00\u4ef6\u73a9\u5177\u624d\u80fd\u6ee1\u8db3\u8981\u6c42\n    \u5728\u6837\u4f8b\u4e2d\uff0c\u5728\u5730\u9762\u4e0a\u653e\u7f6e1\uff0c2\u73a9\u5177\u540e\uff0c\u73b0\u5728\u73a9\u5177\u6570\u91cf\u8fbe\u5230\u9971\u548c\uff0c\u800c\u4e0b\u4e00\u6b65\u9700\u8981\u5c063\u53f7\u73a9\u5177\u653e\u5728\u5730\u4e0a\uff0c\u5219\u9700\u8981\u4ece1\u30012\u4e2d\u62ff\u56de\u4e00\u4ef6\u73a9\u5177\n    \u90a3\u4e48\u4e3a\u4e86\u5c3d\u91cf\u5c11\u62ff\uff0c\u4ee5\u540e\u8fd8\u8981\u7528\u7684\u73a9\u5177\u6700\u597d\u4e0d\u8981\u653e\u56de\u3002\u5219\u6700\u4f18\u60c5\u51b5\u5e94\u4e3a\u653e\u56de\u4ece\u73b0\u5728\u8d77\u201c\u6700\u4e0d\u6025\u9700\u201d\u7684\u73a9\u5177\uff08\u5373\u4ece\u73b0\u5728\u8d77\u6700\u540e\u4f7f\u7528\u7684\u73a9\u5177\uff09\n    \u7531\u6b64\u770b\u6765\u53ef\u4ee5\u7528\u8d2a\u5fc3\u7684\u601d\u60f3\u3002\n### \u600e\u6837\u8003\u8651\u653e\u7f6e\u60c5\u51b5\n    \u8003\u8651\u653e\u7f6e\u7684\u6700\u7ec8\u76ee\u7684\u662f\u4e3a\u4e86\u5f97\u5230\u73a9\u5177\u4f7f\u7528\u7684\u201c\u6025\u9700\u5ea6\u201d\uff08\u5148\u540e\u987a\u5e8f\uff09\uff0c\u5bb9\u6613\u60f3\u5230\u4f7f\u7528\u4e00\u4e2a\u6570\u7ec4\u5c06\u73a9\u5177\u7684\u5148\u540e\u987a\u5e8f\u5b58\u50a8\u4e0b\u6765\u3002\n    \u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2anxt\u6570\u7ec4\uff0cnxt[i]\u7528\u6765\u8868\u793a\u7b2ci\u4e2a\u9700\u8981\u4f7f\u7528\u7684\u73a9\u5177\u4e0b\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002\n    \u90a3\u4e48\u600e\u4e48\u5904\u7406\u5462\uff1f\n```cpp\n\tfor(int i = 1; i <= p; ++i)\t\n\t{\n\t\tin(a[i]);\n\t\tif(head[a[i]]) nxt[head[a[i]]] = i;\n\t\thead[a[i]] = i;\n\t}\n```\n\n\t\u8fd9\u91cc\u6211\u7528\u5230\u4e86\u7c7b\u4f3c\u524d\u5411\u661f\u7684\u5f62\u5f0f,head[i]\u8868\u793a\u7b2ci\u4e2a\u73a9\u5177\u7684\u4e0a\u4e00\u4e2a\uff0c\u90a3\u4e48\u81ea\u7136nxt[head[a[i]] = i\u5373\u5f53\u524d\u73a9\u5177\u4e3a\u4e0a\u4e00\u4e2a\u7684\u4e0b\u4e00\u6b21\u51fa\u73b0\u4f4d\u7f6e\u3002\n    \u540c\u65f6\u8fd8\u6709\u4e00\u79cd\u60c5\u51b5\uff1a\u5373\u5f53\u524d\u73a9\u5177\u4f7f\u7528\u540e\u5c31\u4e0d\u518d\u4f7f\u7528\u4e86\u3002\n```cpp\n\tfor(int i = 1; i <= p; ++i)\n\t\tif(!nxt[i]) nxt[i] = p + 1;\n```\n\t\u4e8e\u662f\u518d\u8fdb\u884c\u8fd9\u6837\u4e00\u6b65\u64cd\u4f5c\uff0c\u6ca1\u6709\u5904\u7406\u5230\u7684\u73a9\u5177\u4e0d\u4f1a\u518d\u88ab\u4f7f\u7528\uff0c\u5c06\u5b83\u7684\u4e0b\u4e00\u6b21\u51fa\u73b0\u4f4d\u7f6e\u5b9a\u4f4d\u5230\u8fb9\u754c\u3002\n    \u8fd9\u6837\u6211\u4eec\u5c31\u5c06\u73a9\u5177\u4f7f\u7528\u7684\u5148\u540e\u987a\u5e8f\u5b58\u50a8\u4e0b\u6765\u4e86\uff0c\u518d\u4e4b\u540e\u7684\u8d2a\u5fc3\u8fc7\u7a0b\u4e2d\u8fdb\u884c\u6700\u4f18\u9009\u62e9\u3002\n### \u8d2a\u5fc3\u8fc7\u7a0b\u4e2d\u73a9\u5177\u5148\u540e\u987a\u5e8f\u7684\u7ef4\u62a4\n\t\u5728\u5904\u7406\u8fc7\u7a0b\u4e2d\u9700\u8981\u7ef4\u62a4\u4e00\u4e2anxt\u7684\u5927\u6839\u5806\u3002\n    \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\u5b58\u50a8\u73a9\u5177\u7684\u7f16\u53f7\u548cnxt\u3002\n```cpp\n\tstruct Toy\n\t{\n\t\tint num, nxt;\n\t\tbool operator < (const Toy &toy) const\n\t\t{\n\t\t\treturn nxt < toy.nxt;\n\t\t}\n\t};\n    priority_queue <Toy> q;\n```\n\t\u5927\u6839\u5806\u7684\u7ef4\u62a4\u5c31\u53ef\u4ee5\u5229\u7528\u91cd\u8f7d\u8fd0\u7b97\u7b26 + STL priority_queue \u5b9e\u73b0 \n### \u600e\u6837\u8003\u8651\u653e\u7f6e k\u4e2a\u73a9\u5177\u8fbe\u5230\u201c\u9971\u548c\u201d \u7684\u60c5\u51b5\n\t\u5728\u672a\u653e\u7f6e\u6ee1k\u4e2a\u7684\u72b6\u6001\u4e0b\uff0c\u9047\u5230\u672a\u88ab\u653e\u7f6e\u7684\u7f16\u53f7\u7684\u73a9\u5177\u53ef\u4ee5\u76f4\u63a5\u653e\u7f6e\uff08\u5165\u961f\uff09\u3002\n    \u8fd9\u91cc\u9700\u8981\u7528\u5230\u4e00\u4e2achosen\u6570\u7ec4\uff0c\u8868\u793a\u73a9\u5177\u662f\u5426\u88ab\u9009\u62e9\u653e\u5728\u5730\u4e0a,\u540c\u65f6\u5b9a\u4e49\u4e00\u4e2aans\u8868\u793a\u64cd\u4f5c\u6b21\u6570\u3002\n```cpp\n\tbool chosen[1000010];\n    int ans = 0;\n```\n\u5728\u679a\u4e3e\u8fc7\u7a0b\u4e2d\u5982\u679c\u672a\u8fbe\u9971\u548c\uff0c\u64cd\u4f5c\u5982\u4e0b\uff1a\n```cpp\n\t\tif(chosen[a[i]])//\u73a9\u5177\u5df2\u88ab\u653e\u7f6e\u5730\u4e0a\n\t\t{\n\t\t\tq.push((Toy)\n\t\t\t{\n\t\t\t\ta[i], nxt[i]\n\t\t\t});\n\t\t\tcontinue;//\u73a9\u5177\u5165\u961f\n\t\t}\n\t\tif(k)\n\t\t{\n\t\t\tq.push((Toy)\n\t\t\t{\n\t\t\t\ta[i], nxt[i]\n\t\t\t});//\u5c06\u5f53\u524d\u73a9\u5177\u5165\u961f\uff08\u627e\u5230\u4e86\u65b0\u73a9\u5177\u5e76\u672a\u9971\u548c\uff09\n\t\t\tchosen[a[i]] = 1;//\u6807\u8bb0\u5df2\u653e\u5730\u4e0a\n\t\t\tk--, ans++;//\u589e\u52a0\u64cd\u4f5c\u6b21\u6570\uff0c\u51cf\u5c0f\u201c\u9971\u548c\u5ea6\u201d k\n\t\t}\n```\n\u5728\u8fbe\u5230\u9971\u548c\u72b6\u6001\u540e\uff08\u5730\u4e0a\u73a9\u5177\u8fbe\u5230k\u65f6\uff09\uff1a\n```cpp\n\t\telse\n\t\t{\n\t\t\twhile(!chosen[q.top().num]) q.pop();//\u5bfb\u627e\u5230\u88ab\u653e\u7f6e\u5730\u4e0a\u7684\u73a9\u5177\n\t\t\tchosen[q.top().num] = 0;\n\t\t\tq.pop();//\u5c06\u73a9\u5177\u653e\u56de\uff0c\u53d6\u6d88\u6807\u8bb0\n\t\t\tq.push((Toy)\n\t\t\t{\n\t\t\t\ta[i], nxt[i]\n\t\t\t});\n\t\t\tchosen[a[i]] = 1;//\u653e\u7f6e\u65b0\u73a9\u5177\u5e76\u6807\u8bb0\n\t\t\tans++;//\u589e\u52a0\u64cd\u4f5c\u6b21\u6570\n\t\t}\n```\n\u5728\u4e24\u79cd\u60c5\u51b5\u7684\u64cd\u4f5c\u7ed3\u675f\u540e\uff0cans\u5373\u4e3a\u6700\u540e\u7684\u7b54\u6848\uff08\u6700\u5c11\u64cd\u4f5c\u6b21\u6570\uff09\u3002\n### \u6700\u540e\u8d34\u4e0a\u5b8c\u6574\u4ee3\u7801\u4f9b\u53c2\u8003\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <queue>\n#define open(s) freopen(s\".in\", \"r\", stdin), freopen(s\".out\", \"w\", stdout)\n#define close fclose(stdin), fclose(stdout)\nusing namespace std;\ntemplate <typename T> void in(T &a)\n{\n\tT num = 0, f = 1;\n\tchar ch = getchar();\n\twhile(!isdigit(ch))\n\t{\n\t\tif(ch == '-') f = -1;\n\t\tch = getchar();\n\t}\n\twhile(isdigit(ch)) num = (num << 3) + (num << 1) + ch - '0', ch = getchar();\n\ta = num * f;\n}\nvoid print(int x)\n{\n\tif(x < 0) putchar('-'), x = -x;\n\tif(x > 9) print(x / 10);\n\tputchar(x % 10 + '0');\n}\nstruct Toy\n{\n\tint num, nxt;\n\tbool operator < (const Toy &toy) const\n\t{\n\t\treturn nxt < toy.nxt;\n\t}\n};\npriority_queue <Toy> q;\nint n, k, p, a[5000050], nxt[1000010], head[1000010];\nbool chosen[1000010];\nint main()\n{\n\topen(\"sam\");\n\tin(n), in(k), in(p);\n\tfor(int i = 1; i <= p; ++i)\n\t{\n\t\tin(a[i]);\n\t\tif(head[a[i]]) nxt[head[a[i]]] = i;\n\t\thead[a[i]] = i;\n\t}\n\tfor(int i = 1; i <= p; ++i)\n\t\tif(!nxt[i]) nxt[i] = p + 1;\n\tint ans = 0;\n\tfor(int i = 1; i <= p; ++i)\n\t{\n\t\tif(chosen[a[i]])\n\t\t{\n\t\t\tq.push((Toy)\n\t\t\t{\n\t\t\t\ta[i], nxt[i]\n\t\t\t});\n\t\t\tcontinue;\n\t\t}\n\t\tif(k)\n\t\t{\n\t\t\tq.push((Toy)\n\t\t\t{\n\t\t\t\ta[i], nxt[i]\n\t\t\t});\n\t\t\tchosen[a[i]] = 1;\n\t\t\tk--, ans++;\n\t\t}\n\t\telse\n\t\t{\n\t\t\twhile(!chosen[q.top().num]) q.pop();\n\t\t\tchosen[q.top().num] = 0;\n\t\t\tq.pop();\n\t\t\tq.push((Toy)\n\t\t\t{\n\t\t\t\ta[i], nxt[i]\n\t\t\t});\n\t\t\tchosen[a[i]] = 1;\n\t\t\tans++;\n\t\t}\n\t}\n\tprint(ans);\n\tputs(\"\");\n\tclose;\n\treturn 0;\n}\n```\n\n",
        "postTime": 1535138017,
        "uid": 17765,
        "name": "trickedout",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "\u5806\u52a0\u8d2a\u5fc3\uff1a\n\n\u9996\u5148\u7528\u90bb\u63a5\u94fe\u4fdd\u5b58\u540e\u4e00\u4e2a\u70b9\u7684\u4f4d\u7f6e\uff0c\u4fdd\u5b58\u5728next\u91cc\uff1b\n\n\u7136\u540e\u7ef4\u62a4\u4e00\u4e2a\u7ed3\u6784\u4f53\u5927\u6839\u5806\uff0c\u6bcf\u6b21\u52a0\u5165next\u548ca[i]\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff1a\u6bcf\u6b21\u627e\u4e00\u4e2a\u6700\u8fdc\u7684\u5220\u6389\u5c31\u53ef\u4ee5\u4e86\u3002\uff08\u672c\u4eba\u4e00\u5f00\u59cb\u5c31\u662f\u8d2a\u5fc3\u7b56\u7565\u9519\u4e86\uff0c\u54c8\u54c8\uff09\n\n\u6ce8\u610f\u4e00\u4e0b\u7ec6\u8282\uff1a\n\n\u90bb\u63a5\u94fe\u8981\u8d4b\u521d\u503c\uff1b\u5927\u6839\u5806\u4e2d\u6bcf\u4e00\u4e2a\u6570\u4e0d\u4e00\u5b9a\u6709\u6548\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528size\u8bb0\u5f55\u5927\u6839\u5806\u4e2d\u7684\u6570\u3002\n\n\u4e00\u4e0b\u662fAC\u4ee3\u7801\uff1a\n\n    \n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<cstdlib>\n#include<algorithm>\nusing namespace std;\nconst int N=100001;\nconst int M=500001;\nint a[M];\nint n,k,m;\nint nxt[M],last[N];\nbool in[N];\nint read()\n{\n    int k=0;\n    char s=getchar();\n    while(s<'0'||s>'9')s=getchar();\n    while(s>='0'&&s<='9')k=k*10+s-'0',s=getchar();\n    return k;\n}\nstruct student\n{\n    int next,id;\n}heap[M];\nint size;\nvoid insert(int nxt,int x)\n{\n    size++;\n    int place=size,parent=size>>1;\n    while(parent>=1&&heap[parent].next<nxt)\n    {\n        heap[place]=heap[parent];\n        place=parent;\n        parent>>=1;\n    }\n    heap[place].next=nxt;\n    heap[place].id=x;\n    return;\n}\nvoid delet()\n{\n    student x=heap[size--];\n    int place=1,child=2;\n    while(child<=size)\n    {\n        if(child<size&&heap[child].next<heap[child+1].next)child++;\n        if(heap[child].next>x.next)\n        {\n            heap[place]=heap[child];\n            place=child;\n            child<<=1;\n        }\n        else break;\n    }\n    heap[place]=x;\n    return;\n}\nint main()\n{\n    int i,j,ans=0;\n    n=read();k=read();m=read();\n    for(i=1;i<=m;i++)\n        a[i]=read();\n    for(i=1;i<=n;i++)last[i]=M+1;\n    for(i=m;i>=1;i--)\n    {\n        nxt[i]=last[a[i]];\n        last[a[i]]=i;\n    }\n    int cnt=0;\n    for(i=1;i<=m;i++)\n    {\n        if(in[a[i]]){insert(nxt[i],a[i]);continue;}\n        if(cnt<k)\n        {\n            ans++;\n            cnt++;\n            insert(nxt[i],a[i]);\n            in[a[i]]=1;\n        }\n        else\n        {\n            while(in[heap[1].id]==0)delet();\n            in[heap[1].id]=0;\n            delet();\n            ans++;\n            in[a[i]]=1;\n            insert(nxt[i],a[i]);\n        }\n    }\n    cout<<ans;\n    return 0;\n}\n```",
        "postTime": 1489481830,
        "uid": 36357,
        "name": "kakakaka",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "# \u9898\u76ee\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/SP688)\n\n# \u5206\u6790\n\u8fd9\u4e2a\u9898\u7684\u4e3b\u8981\u601d\u8def\u5c31\u662f\u8d2a\u5fc3\uff0c\u5177\u4f53\u601d\u8def\u697c\u4e0b\u8bf4\u7684\u5e94\u8be5\u633a\u6e05\u695a\u4e86\uff0c\u8fd9\u91cc\u518d\u8fdb\u884c\u4e00\u756a\u5177\u4f53\u7684\u5206\u6790\uff08~~\u9b54\u6539~~\uff09\n\n### \u601d\u8def\n\u9898\u610f\u662f\u6211\u4eec\u8981\u6c42\u51fa\u6765\u6700\u5c0f\u7684\u6b65\u6570\u80fd\u8ba9$Jasio$\u628a\u6240\u6709\u60f3\u73a9\u7684\u73a9\u5b8c\u3002\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u8ddf~~\u997f\u72fc~~\u4e00\u6837\u8d2a\u4e86\u3002\n\n\u8003\u8651\u4e00\u4e0b\uff0c\u5047\u5982\u8bf4\u5730\u4e0a\u4e0d\u8db3$k$\u4e2a\u7269\u54c1\u5e76\u4e14\u5f53\u524d\u5730\u4e0a\u6ca1\u6709$Jasio$\u60f3\u8981\u73a9\u7684\u73a9\u5177\uff0c\u90a3\u4e48\u80af\u5b9a\u5c31\u76f4\u63a5\u53d6\u4e0b\u6765\u5c31\u884c\u3002\n\n\u5047\u5982\u5730\u4e0a\u5df2\u7ecf\u6ee1\u8db3\u4e86$k$\u4e2a\u4e1c\u897f\u4e86\uff0c\u90a3\u4e48\u8fd9\u65f6\u5019\u662f\u9700\u8981\u653e\u56de\u4e00\u4e2a\u7269\u54c1\uff0c\u6240\u4ee5\u653e\u56de\u54ea\u4e2a\u7269\u54c1\u5c31\u662f\u8fd9\u4e2a\u9898\u7684\u5173\u952e\u3002\n\n\u56e0\u4e3a\u5730\u4e0a\u7684\u4e1c\u897f\u5df2\u7ecf\u6709$k$\u4e2a\u4e86\uff0c\u800c\u4ece\u5f53\u524d\u5411\u540e\u53ef\u80fd\u8fd8\u4f1a\u6709\u8981\u73a9\u67d0\u4e2a\u73a9\u5177\u7684\u9700\u6c42\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u627e\u51fa\u5f53\u524d\u5730\u4e0a\u6240\u6709\u4e1c\u897f\u4e4b\u4e2d\uff0c\u4e0b\u4e00\u6b21\u73a9\u6700\u9760\u540e\u7684\u90a3\u4e2a\u73a9\u5177\u62ff\u8d70\u5c31\u884c\uff0c\u800c\u8fd9\u4e2a\u4e0b\u4e00\u6b21\u73a9\u6700\u9760\u540e\u7684\u73a9\u5177\u53ef\u4ee5\u7528\u5927\u6839\u5806\u6765\u8fdb\u884c\u7ef4\u62a4\uff0c\u5728\u524d\u8fb9\u53cd\u7740\u679a\u4e3e\u9884\u5904\u7406\u3002\n\n\u56e0\u4e3a\u5927\u6839\u5806\uff08\u4f18\u5148\u961f\u5217\uff09\u65e0\u6cd5\u8fdb\u884c\u5355\u72ec\u7684\u5220\u9664\u64cd\u4f5c\uff0c\u6bcf\u6b21\u53ea\u80fd\u628a\u5806\u9876\u53d6\u51fa\uff0c\u4f46\u662f\u5982\u679c\u4e4b\u524d\u5165\u8fc7\u961f\u7684\uff0c\u4f46\u662f\u548c\u5f53\u524d\u9700\u8981\u5165\u961f\u7684\u73a9\u5177\u662f\u540c\u79cd\uff0c\u90a3\u4e48\u76f4\u63a5\u53d6\u51fa\u662f\u4e0d\u884c\u7684\uff0c\u4f46\u662f\u5f53\u524d\u8fd9\u4e2a\u73a9\u5177\u7684\u4e0b\u4e00\u6b21\u73a9\u80af\u5b9a\u662f\u6bd4\u4e0a\u4e00\u4e2a\u8981\u9760\u540e\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u628a$k++$\uff0c\u8ba9\u4e0a\u4e00\u4e2a\u8fd9\u79cd\u73a9\u5177\u6c38\u8fdc\u4fdd\u7559\u5728\u91cc\u8fb9\uff0c\u4e3a\u4e86\u8bb0\u5f55\u8fd9\u4e2a\u73a9\u5177\u51fa\u961f\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a$vis$\u6570\u7ec4\uff0c\u6bcf\u6b21\u5806\u4e2d\u5143\u7d20\u4e2a\u6570\u7b49\u4e8e$k$\u4e86\uff0c\u5c31\u8ba9\u5806\u9876\u5143\u7d20\u7684$vis$\u6e05\u7a7a\uff0c\u7136\u540e\u5f39\u51fa\u5806\u9876\uff0c\u7136\u540e\u7edf\u8ba1\u7b54\u6848\u5e76\u5c06\u5f53\u524d\u8981\u73a9\u7684\u4e1c\u897f\u52a0\u5165\u961f\u5217\u5373\u53ef\u3002\n\n# \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn = 1e5+10;\nconst int maxm = 5e5+10;\nint jl[maxm],a[maxm];\nint vis[maxn],pos[maxn];\npriority_queue<pair<int,int> >q;//\u6309pair\u7b2c\u4e00\u4e2a\u5143\u7d20\u5927\u6839\u5806\u6392\u5e8f\nint main(){\n\tint n,k,p;\n\tscanf(\"%d%d%d\",&n,&k,&p);\n\tfor(int i=1;i<=p;++i){\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=p;i>=1;--i){//\u53cd\u7740\u679a\u4e3e\n\t\tif(!pos[a[i]])jl[i] = 0x3f3f3f3f;//\u540e\u8fb9\u4e0d\u51fa\u73b0\u4e86\u5c31\u6781\u5927\u503c\uff0c\u4e0d\u5f71\u54cd\n\t\telse jl[i] = pos[a[i]];//\u8bb0\u5f55\u4e0b\u4e00\u6b21\u5f53\u524d\u73a9\u5177\u51fa\u73b0\u7684\u65f6\u5019\n\t\tpos[a[i]] = i;//\u8bb0\u5f55\u51fa\u73b0\u4f4d\u7f6e\n\t}\n\tint ans = 0;\n\tfor(int i=1;i<=p;++i){\n\t\tif(vis[a[i]]){//\u5982\u679c\u4e4b\u524d\u53d6\u8fc7\u4f46\u662f\u6ca1\u51fa\u961f\uff0c\u5c31\u4fdd\u7559\u7740\n\t\t\tk++;//\u4fdd\u7559\u4e86\u4e00\u4e2a\u5c31\u8ba9\u9650\u5236++\n\t\t\tq.push(make_pair(jl[i],a[i]));//\u5165\u961f\n\t\t}\n\t\telse{\n\t\t\tif(q.size() == k){//\u5730\u4e0a\u653e\u4e0d\u4e0b\u4e86\uff0c\u5c31\u51fa\u961f\n\t\t\t\tvis[q.top().second] = 0;//\u51fa\u961f\u4e86\u8bf4\u660e\u6ca1\u53d6\uff0cvis\u6570\u7ec4\u6e05\u9664\n\t\t\t\tq.pop();\n\t\t\t}\n\t\t\tans++;//\u7b54\u6848++\n\t\t\tq.push(make_pair(jl[i],a[i]));//\u5165\u961f\n\t\t\tvis[a[i]] = 1;//\u8bb0\u5f55\u5f53\u524d\u73a9\u5177\u5165\u961f\u4e86\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}\n\n```",
        "postTime": 1596097095,
        "uid": 340084,
        "name": "Vocanda",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "# \u6d1b\u8c37 P3419 [POI2005]SAM-Toy Cars\u9898\u89e3\n## \u9898\u76ee\u63cf\u8ff0\nJasio \u662f\u4e00\u4e2a\u4e09\u5c81\u7684\u5c0f\u7537\u5b69,\u4ed6\u6700\u559c\u6b22\u73a9\u73a9\u5177\u4e86,\u4ed6\u6709n \u4e2a\u4e0d\u540c\u7684\u73a9\u5177,\u5b83\u4eec\u90fd\u88ab\u653e\u5728\u4e86\u5f88\u9ad8\u7684\u67b6\u5b50\u4e0a\u6240\u4ee5Jasio \u62ff\u4e0d\u5230\u5b83\u4eec. \u4e3a\u4e86\u8ba9\u4ed6\u7684\u623f\u95f4\u6709\u8db3\u591f\u7684\u7a7a\u95f4,\u5728\u4efb\u4f55\u65f6\u523b\u5730\u677f\u4e0a\u90fd\u4e0d\u4f1a\u6709\u8d85\u8fc7k \u4e2a\u73a9\u5177. Jasio \u5728\u5730\u677f\u4e0a\u73a9\u73a9\u5177. Jasio'\u7684\u5988\u5988\u5219\u5728\u623f\u95f4\u91cc\u966a\u4ed6\u7684\u513f\u5b50. \u5f53Jasio \u60f3\u73a9\u5730\u677f\u4e0a\u7684\u5176\u4ed6\u73a9\u5177\u65f6,\u4ed6\u4f1a\u81ea\u5df1\u53bb\u62ff,\u5982\u679c\u4ed6\u60f3\u73a9\u7684\u73a9\u5177\u5728\u67b6\u5b50\u4e0a,\u4ed6\u7684\u5988\u5988\u5219\u4f1a\u5e2e\u4ed6\u53bb\u62ff,\u5f53\u5979\u62ff\u73a9\u5177\u7684\u65f6\u5019,\u987a\u4fbf\u4e5f\u4f1a\u5c06\u4e00\u4e2a\u5730\u677f\u4e0a\u7684\u73a9\u5177\u653e\u4e0a\u67b6\u5b50\u4f7f\u5f97\u5730\u677f\u4e0a\u6709\u8db3\u591f\u7684\u7a7a\u95f4. \u4ed6\u7684\u5988\u5988\u5f88\u6e05\u695a\u81ea\u5df1\u7684\u5b69\u5b50\u6240\u4ee5\u4ed6\u80fd\u591f\u9884\u6599\u5230Jasio \u60f3\u73a9\u4e9b\u4ec0\u4e48\u73a9\u5177. \u6240\u4ee5\u5979\u60f3\u5c3d\u91cf\u7684\u4f7f\u81ea\u5df1\u53bb\u67b6\u5b50\u4e0a\u62ff\u73a9\u5177\u7684\u6b21\u6570\u5c3d\u91cf\u7684\u5c11,\u5e94\u8be5\u600e\u4e48\u5b89\u6392\u653e\u73a9\u5177\u7684\u987a\u5e8f\u5462?\n\n## \u8f93\u5165\u8f93\u51fa\u683c\u5f0f\n### \u8f93\u5165\u683c\u5f0f\uff1a\n\u7b2c\u4e00 \u884c\u4e09 \u4e2a\u6574\u6570:n,k,p(1\u2264k\u2264n\u2264100,000,1\u2264p\u2264500000), \u5206\u522b\u8868\u793a\u73a9\u5177\u7684\u603b\u6570,\u5730\u677f\u4e0a\u73a9\u5177\u7684\u6700\u591a\u4e2a\u6570\u4ee5\u53ca JasioJasio \u4ed6\u60f3\u73a9\u73a9\u5177\u7684\u5e8f\u5217\u7684\u4e2a\u6570,\u63a5\u4e0b\u6765 pp \u884c\u6bcf\u884c\u63cf\u8ff0\u4e00\u4e2a\u73a9\u5177\u7f16\u53f7\u8868\u793a Jasio \u60f3\u73a9\u7684\u73a9\u5177\u3002\n\n### \u8f93\u51fa\u683c\u5f0f\uff1a\n\u4e00\u4e2a\u6570\u8868\u793a JasioJasio \u7684\u5988\u5988\u6700\u5c11\u8981\u62ff\u591a\u5c11\u6b21\u73a9\u5177\u3002\n\n## \u8f93\u5165\u8f93\u51fa\u6837\u4f8b\n### \u8f93\u5165\u6837\u4f8b#1\uff1a \n3 2 7\n1\n2\n3\n1\n3\n1\n2\n### \u8f93\u51fa\u6837\u4f8b#1\uff1a \n4\n### \u601d\u8def\n#### luogu\u4e00\u76f4AC\u4e0d\u4e86\u7684\u5c0f\u670b\u53cb\u4eec\u770b\u8fd9\u91cc\uff1a\n#### \u4e0d\u8981\u63d0\u4ea4SP688\uff0c\u63d0\u4ea4P3419 [POI2005]SAM-Toy Cars\n#### \u4e0d\u8981\u63d0\u4ea4SP688\uff0c\u63d0\u4ea4P3419 [POI2005]SAM-Toy Cars\n#### \u4e0d\u8981\u63d0\u4ea4SP688\uff0c\u63d0\u4ea4P3419 [POI2005]SAM-Toy Cars\n\u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u6211\u4e5f\u4e0d\u77e5\u9053\u3002\u3002\u3002\u53cd\u6b63\u672c\u4eba\u5361\u4e863\u6b21\u63d0\u4ea4\u5728luogu\u4e0a\uff08\u624b\u52a8\u6ed1\u7a3d\uff09\n\n>\u8fd9\u9053\u9898\u4f7f\u7528\u8d2a\u5fc3+\u5806\u4f18\u5316\u3002\n\n\u8d2a\u5fc3\u4e3a\uff1a\n\n\u6bcf\u4e00\u6b21\u8f93\u5165\u4e00\u4e2a\u6570\u5c06\u5f39\u51fa\u4e00\u4e2a\u5927\u5c0f\u4e3ak\u7684\u96c6\u5408\u4e2d\u7684\u4e00\u4e2a\u6570\u624d\u80fd\u4f7f\u8be5\u6570\u52a0\u5165\u3002\n\n\u5f53\u7136\uff0c\u5982\u679c\u8be5\u6570\u65e9\u5c31\u5728\u96c6\u5408\u5f53\u4e2d\u5c31\u53ef\u4ee5\u76f4\u63a5\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u6570\u3002\n\n\u524dk\u4e2a\u6570\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8fdb\u5165\u96c6\u5408\u4e2d\u3002\n\n\u95ee\u9898\u6765\u4e86\uff1f\u5230\u5e95\u5f39\u96c6\u5408\u4e2d\u7684\u54ea\u4e00\u4e2a\u6570\u624d\u80fd\u6700\u4f18\u5462\uff1f\n\n\u5f53\u7136\u662f\u4e0b\u4e00\u6b21\u51fa\u73b0\u7684\u8ddd\u79bb\u6700\u8fdc\u7684\u90a3\u4e00\u4e2a\u6570\u4e86\u3002\n\n\u5806\u4f18\u5316\uff1a\n```\npriority_queue<int> q;\n```\n\u5c31\u662f\u4e00\u4e2a\u5927\u6839\u5806\u3002\n\n\u90a3\u4e48\u8fd9\u9053\u9898\u9700\u8981\u5c06\u5806\u91cc\u7684\u7c7b\u578b\u4fee\u6539\u4e00\u4e0b\u3002\n```\npriority_queue<pair<int,int> >q;\n```\npair\u7684\u524d\u4e00\u4e2a\u50a8\u5b58\u8282\u70b9\u7684\u4e0b\u4e00\u6b21\u51fa\u73b0\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u4e2a\u50a8\u5b58\u8be5\u8282\u70b9\u7684\u503c\u3002\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u81ea\u52a8\u7684\u6392\u5e8f\u51fa\u8ddd\u79bb\u6700\u8fdc\u7684\u90a3\u4e00\u4e2a\u6570\u4e86\u3002\n\n\u6240\u4ee5\u6bcf\u6b21\u64cd\u4f5c\u53ea\u9700\u8981\u5c06q.top()\u53d6\u51fa\uff0c\u7136\u540e\u5c06\u5934\u5143\u7d20\u5220\u9664\u2014\u2014q.pop()\u3002\n\n\u6700\u540e\uff0c\u4e0a\u4ee3\u7801\uff1a\n```\n#include<algorithm>\n#include<bitset>\n#include<complex>\n#include<deque>\n#include<exception>\n#include<fstream>\n#include<functional>\n#include<iomanip>\n#include<ios>\n#include<iosfwd>\n#include<iostream>\n#include<istream>\n#include<iterator>\n#include<limits>\n#include<list>\n#include<locale>\n#include<map>\n#include<memory>\n#include<new>\n#include<numeric>\n#include<ostream>\n#include<queue>\n#include<set>\n#include<sstream>\n#include<stack>\n#include<stdexcept>\n#include<streambuf>\n#include<string>\n#include<typeinfo>\n#include<utility>\n#include<valarray>\n#include<vector>\n#include<cstring>\n#include<cmath>\n#define ll long long \n#define FHAKIOI int\nusing namespace std;//\u5934\u6587\u4ef6\u7ed3\u675f\ninline ll read(){\n    ll ret=0,f=1;char ch=getchar();\n    while (ch<'0'||ch>'9') {if (ch=='-') f=-f;ch=getchar();}\n    while (ch>='0'&&ch<='9') ret=ret*10+ch-'0',ch=getchar();\n    return ret*f;\n}//\u8bfb\u4f18\u7ed3\u675f\ninline void write(ll zx){\n    if(zx<0){zx=-zx;putchar('-');}\n    if(zx<10) putchar(zx+'0');\n    else{\n        write(zx/10);\n        putchar(zx%10+'0');\n    }\n}//\u8f93\u4f18\u7ed3\u675f\nll n,k,p,a[500010];\nll use[100010];\nll f[500010];\nll las[500010],ans;\nll nxt[500010];\npriority_queue<pair<int,int> > q;//\u5806\nFHAKIOI main(){\n    n=read();k=read();p=read();\n    for(ll i=1;i<=p;i++) a[i]=read(),las[a[i]]=p+1;//\u8bfb\u5165\n    for(ll i=p;i>=1;i--){\n        nxt[i]=las[a[i]];\n        las[a[i]]=i;\n    }//\u5148\u9884\u5904\u7406\u4e0e\u4e0b\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u7684\u8ddd\u79bb\n    for(int i=1;i<=p;i++){\n        if(use[a[i]]!=0){\n            q.push(make_pair(nxt[i],a[i]));//\u5df2\u7ecf\u5728\u96c6\u5408\u91cc\u4e86\n        }else if(k!=0){//\u524dK\u4e2a\u6570\n            k--;\n            ans++;\n            use[a[i]]=1;\n            q.push(make_pair(nxt[i],a[i]));\n        }else{//\u6700\u540e\u4e00\u79cd\u60c5\u51b5\uff0c\u9700\u8981\u5f39\u51fa\u4e00\u4e2a\u6570\n            while(!use[q.top().second]) q.pop();//\u76ee\u524d\u6ca1\u6709\u5728\u96c6\u5408\u4e2d\n            int x=q.top().second;//\u53d6\u8ddd\u79bb\u6700\u8fdc\u7684\n            q.pop();\n            use[x]=0;\n            ans++;//ans\u52a0\u4e00\n            use[a[i]]=1;\n            q.push(make_pair(nxt[i],a[i]));\n        }\n    }\n    write(ans);putchar('\\n');/\u8f93\u51fa\n    return 0;\n}\n ```",
        "postTime": 1538553898,
        "uid": 37103,
        "name": "yzxoi",
        "ccfLevel": 7,
        "title": "\u6d1b\u8c37 P3419 [POI2005]SAM-Toy Cars\u9898\u89e3"
    },
    {
        "content": "## \u5206\u6790\n\u8fd9\u662f\u4e00\u9053\u6bd4\u8f83\u7ecf\u5178\u7684\u8d2a\u5fc3\u9898\u76ee\n\n\u6211\u4eec\u8981\u4f7f\u53d6\u73a9\u5177\u7684\u6b21\u6570\u5c3d\u53ef\u80fd\u5c11\uff0c\u90a3\u4e48\u5f53\u5730\u9762\u4e0a\u7684\u7a7a\u95f4\u8db3\u591f\u5927\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u76f4\u63a5\u628a\u73a9\u5177\u653e\u5728\u5730\u677f\u4e0a\n\n\u5982\u679c\u5730\u9762\u4e0a\u7684\u7a7a\u95f4\u4e0d\u591f\uff0c\u6211\u4eec\u5c31\u5c06\u5730\u9762\u4e0a\u7684\u73a9\u5177\u91cc\u4e0b\u4e00\u6b21\u6700\u665a\u51fa\u73b0\u7684\u653e\u5230\u67b6\u5b50\u4e0a\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u8981\u7ef4\u62a4\u4e00\u4e2a\u4f18\u5148\u961f\u5217\uff0c\u5b58\u50a8\u6240\u6709\u5728\u5730\u677f\u4e0a\u7684\u73a9\u5177\uff0c\u6309\u7167\u51fa\u73b0\u987a\u5e8f\u4ece\u665a\u5230\u65e9\u6392\u5e8f\n\n``` cpp\nstruct asd{\n    int num,tim;\n    asd(){}\n    asd(int aa,int bb){\n        num=aa,tim=bb;\n    }\n    bool operator < (const asd& A)const{\n        return tim<A.tim;\n    }\n};\npriority_queue<asd> q;\n```\n\u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u8981\u7528\u4e00\u4e2a\u6570\u7ec4$nex$\u8bb0\u5f55\u5f53\u524d\u5143\u7d20\u4e0a\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\n\u8fd9\u4e2a\u4e1c\u897f\u6211\u4eec\u5012\u5e8f\u679a\u4e3e\u5904\u7406\u5c31\u53ef\u4ee5\n\n\u8981\u6ce8\u610f\u7684\u662f\uff0c\u56e0\u4e3a\u4f18\u5148\u961f\u5217\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u597d\u5904\u7406\uff0c\u6240\u4ee5\u6211\u4eec\u60f3\u8981\u4ece\u5730\u677f\u4e0a\u62ff\u51fa\u4e00\u4e2a\u73a9\u5177\uff0c\u53ea\u9700\u8981\u628a\u5730\u677f\u80fd\u5bb9\u7eb3\u7684\u73a9\u5177\u6570\u52a0\u4e00\u5c31\u53ef\u4ee5\n\n\u56e0\u4e3a\u8981\u62ff\u51fa\u73a9\u5177\u7684\u6700\u665a\u51fa\u73b0\u65f6\u95f4\u4e00\u5b9a\u8981\u65e9\uff0c\u4e0d\u4f1a\u5bf9\u540e\u9762\u7684\u4ea7\u751f\u5f71\u54cd\n## \u4ee3\u7801\n``` cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e6+5;\nint lat[maxn],nex[maxn],a[maxn];\nbool vis[maxn];\nstruct asd{\n    int num,tim;\n    asd(){}\n    asd(int aa,int bb){\n        num=aa,tim=bb;\n    }\n    bool operator < (const asd& A)const{\n        return tim<A.tim;\n    }\n};\npriority_queue<asd> q;\nint main(){\n    int n,k,nn;\n    scanf(\"%d%d%d\",&n,&k,&nn);\n    for(int i=1;i<=nn;i++){  \n        scanf(\"%d\",&a[i]);\n    }\n    for(int i=nn;i>=1;i--){\n        if(lat[a[i]]==0) nex[i]=0x3f3f3f3f;\n        else nex[i]=lat[a[i]];\n        lat[a[i]]=i;\n    }\n    int ans=0;\n    for(int i=1;i<=nn;i++){\n        if(vis[a[i]]==1){\n            k++;\n            q.push(asd(a[i],nex[i]));\n        } else if(q.size()<k){\n            vis[a[i]]=1;\n            q.push(asd(a[i],nex[i]));\n            ans++;\n        } else {\n            int now=q.top().num;\n            vis[now]=0;\n            q.pop();\n            vis[a[i]]=1;\n            q.push(asd(a[i],nex[i]));\n            ans++;\n        }\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1596096547,
        "uid": 316322,
        "name": "hzoi_liuchang",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "# [POI2005]SAM-Toy Cars\n\n## \u6211\u7684\u505a\u6cd5\uff1a\u5220\u9664\u5806\n\n## \u601d\u8def\uff1a\n\n\u8d2a\u5fc3\u7b56\u7565\uff1a\u6bcf\u6b21\u5c06**\u4e0b\u4e00\u6b21**\u73a9\u7684\u65f6\u95f4**\u6700\u665a**\u7684\u73a9\u5177\u653e\u56de\u53bb\u5373\u53ef\u3002\u56e0\u4e3a\u5728**\u8fd9\u4e00\u6b21**\u5230**\u4e0b\u4e00\u6b21**\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5b83\u90fd\u5728\u5360\u5730\u677f\u4e0a\u7684\u540d\u989d\uff0c\u6ca1\u6709\u5bf9\u7b54\u6848\u505a\u8d21\u732e\uff0c\u628a**\u5360\u540d\u989d\u6700\u957f**\u7684\u73a9\u5177\u5148\u62ff\u6389\u663e\u7136\u6700\u4f18\u3002\n\n## \u5b9e\u73b0\n\n\u53ef\u5220\u9664\u5806\u9002\u7528\u4e8e\u601d\u7ef4\u7b80\u5355\u7c97\u66b4\u7684\u4eba\u3002\n\n\u5f53\u7136\u6211\u4eec\u8981\u6309**\u4e0b\u4e00\u6b21\u73a9\u7684\u65f6\u95f4\u4e3a\u5173\u952e\u5b57**\u5efa\u5806\n\n\u6bcf\u6b21\u62ff**\u4e0b\u4e00\u6b21\u73a9\u7684\u65f6\u95f4\u6700\u665a\u7684**\u6362\u5f53\u524d\u7684\u73a9\u5177\n\n\u4f46\u662f\u5462\uff0c\u5806\u662f\u4e0d\u652f\u6301\u66f4\u65b0\u7684\n\n\u5f53\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u8981\u7684\u73a9\u5177\u5df2\u7ecf\u5728\u5730\u4e0a\u4e86\n\n\u6211\u4eec\u6ca1\u6709\u529e\u6cd5\u66f4\u65b0\u8fd9\u4e2a\u73a9\u5177\u7684**\u4e0b\u4e00\u6b21\u73a9\u7684\u65f6\u95f4**\n\n\u800c\u6b64\u65f6\u53c8\u5fc5\u987b\u8981\u66f4\u65b0\n\n\u6240\u4ee5\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a\u5220\u9664\u5806\n\n\u5f53\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u8981\u7684\u73a9\u5177\u5df2\u7ecf\u5728\u5730\u4e0a\u65f6\n\n\u5220\u9664\u4ee5**\u8fd9\u4e00\u6b21\u73a9\u7684\u65f6\u95f4\u4e3a\u5173\u952e\u5b57**\u7684\u8282\u70b9\n\n\u52a0\u5165\u4ee5**\u4e0b\u4e00\u6b21\u73a9\u7684\u65f6\u95f4\u4e3a\u5173\u952e\u5b57**\u7684\u8282\u70b9\n\n\u5c31\u884c\u4e86\n\n\u8fd8\u6709\u6ce8\u610f\u6211\u4f7f\u7528list\u6c42\u7684\u5173\u952e\u5b57\u65f6\u95f4\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\n#define pb push_back\n#define pf pop_front\n#define mk make_pair\n#define RG register\n#define il inline\n\nusing namespace std;\n\nil int gi() {\n\tint x=0,o=0;char ch=getchar();\n\twhile(ch!='-'&&(ch<'0'||'9'<ch)) ch=getchar();\n\tif(ch=='-') o=1,ch=getchar();\n\twhile('0'<=ch&&ch<='9') x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\treturn o?-x:x;\n}\n\n#define N 100010\n#define M 500010\nconst int inf=2147483647;\n\nint n,k,p,ans,b[M];\nlist <int> a[N];\nbool inq[N];\n\n#define pir pair<int,int>\n#define fir first\n#define sec second\nstruct Heap {\n\tpriority_queue <pir> hp,dl;\n\tvoid Push(int num) { a[num].pf(); hp.push(mk(a[num].front(),num));}\n\tvoid Del(int num) { dl.push(mk(a[num].front(),num)); }\n\tvoid Upd() { while(!dl.empty()&&dl.top()==hp.top()) dl.pop(),hp.pop(); }\n\tvoid Pop() { Upd(),hp.pop(); }\n\tint Top() { Upd(); return hp.top().sec; }\n}Q;\n\nint main() {\n\tn=gi(),k=gi(),p=gi();\n\tfor(int i=1; i<=p; ++i) b[i]=gi(),a[b[i]].pb(i);\n\tfor(int i=1; i<=n; ++i) a[i].pb(inf);\n\tfor(int tmp,i=1; i<=p; ++i) {\n\t\tif(inq[b[i]]) { Q.Del(b[i]),Q.Push(b[i]); continue; }\n\t\t++ans;\n\t\tif(k) { Q.Push(b[i]),inq[b[i]]=1,--k; }\n\t\telse {\n\t\t\ttmp=Q.Top();\n\t\t\tQ.Pop(),inq[tmp]=0;\n\t\t\tQ.Push(b[i]),inq[b[i]]=1;\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\t\n}\n```",
        "postTime": 1526097575,
        "uid": 47725,
        "name": "stdlifg",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "### \u8d2a\u5fc3+\u7ebf\u6bb5\u6811\n---\n\u53e6\u4e00\u7bc7\u7528\u7ebf\u6bb5\u6811\u7684\u9898\u89e3\u7801\u98ce\u81ea\u8ba4\u4e3a\u6709\u70b9\u5947\u602a\uff0c\u5c31\u5199\u4e00\u7bc7\uff08\u81ea\u8ba4\u4e3a\uff09\u7801\u98ce\u6b63\u5e38\u4e00\u70b9\u7684\n\n\u63d0\u4f9b\u4e00\u9053\u5f31\u5316\u7248[P2088 \u679c\u6c41\u5e97\u7684\u96be\u9898](https://www.luogu.com.cn/problem/P2088)\u9898\u76ee\u57fa\u672c\u4e00\u6837\uff0c\u8303\u56f4\u5c0f\u4e86\u5f88\u591a\n\n\u601d\u8def\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u6bcf\u6b21\u9700\u8981\u5c06\u73a9\u5177\u653e\u56de\u67b6\u5b50\u4e0a\u65f6\uff0c\u4f18\u5148\u653e\u79bb\u4e0b\u6b21\u4f7f\u7528\u6700\u8fdc\u7684\u73a9\u5177\n\n\u90a3\u4e48\u6211\u4eec\u5148\u9884\u5904\u7406\u51fa\u4e00\u4e2anext\u6570\u7ec4\uff08\u4ee3\u7801\u4e2d\u4e3anxt\uff09\uff0c\u6765\u4fdd\u5b58\u5bf9\u4e8e\u6bcf\u4e2a\u73a9\u5177\uff0c\u4e0b\u4e00\u6b21\u4f7f\u7528\u540c\u6837\u7684\u73a9\u5177\u662f\u4ec0\u4e48\u65f6\u5019\n\n\u90a3\u4e48\u7ebf\u6bb5\u6811\u7528\u6765\u7ef4\u62a4\u4ec0\u4e48\u5462\uff1f\u6211\u4eec\u7528\u7ebf\u6bb5\u6811\u6765\u7ef4\u62a4\u6bcf\u79cd\u73a9\u5177\u4e0b\u4e00\u6b21\u4f7f\u7528\u662f\u4ec0\u4e48\u65f6\u5019\u3002\u5f53\u7136\uff0c\u5982\u679c\u8fd9\u79cd\u73a9\u5177\u4e0d\u5728\u5730\u4e0a\uff0c\u5c31\u4e0d\u52a0\u5165\u7ebf\u6bb5\u6811\u7684\u7ef4\u62a4\uff08\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u7528\u7ebf\u6bb5\u6811\u6765\u7ef4\u62a4\u6700\u5927\u503c\uff0c\u6240\u4ee5\u5c06\u8fd9\u79cd\u73a9\u5177\u4e0b\u4e00\u6b21\u4f7f\u7528\u7684\u65f6\u95f4\u8bbe\u4e3a0\uff09\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u6bcf\u6b21\u8981\u5c06\u4e00\u4e2a\u65b0\u7684\u73a9\u5177\u653e\u5230\u5730\u4e0a\u65f6\uff0c\u5c31\u8981\u7528\u7ebf\u6bb5\u6811\u6765\u67e5\u8be2\u79bb\u4e0b\u6b21\u4f7f\u7528\u65f6\u95f4\u6700\u8fdc\u7684\u4e00\u4e2a\u73a9\u5177\uff0c\u7136\u540e\u653e\u56de\u67b6\u5b50\u4e0a\u4e86\uff01\n\n\u6700\u540e\u5c31\u662f\u4ee3\u7801\u4e86\uff0c\u7ec6\u8282\u8fd8\u662f\u6709\u4e00\u70b9\u7684\uff0c\u9700\u8981\u6ce8\u610f\u4e00\u4e0b\n```\n#include<iostream>\nusing namespace std;\nint nxt[500005],book[500005],a[500005];//book\u6570\u7ec4\u8f85\u52a9\u5904\u7406nxt\u6570\u7ec4\uff0ca\u4e3a\u521d\u59cb\u6570\u7ec4\nbool bj[500005];//bj\u6570\u7ec4\u8bb0\u5f55\u73a9\u5177\u662f\u5426\u5728\u5730\u4e0a\nint maxx[400005],wz[400005];//\u7ebf\u6bb5\u6811\u6570\u7ec4\nvoid up(int root){\n\tif((maxx[root<<1])>(maxx[root<<1|1])){\n\t\tmaxx[root]=maxx[root<<1];\n\t\twz[root]=wz[root<<1];\n\t}\n\telse{\n\t\tmaxx[root]=maxx[root<<1|1];\n\t\twz[root]=wz[root<<1|1];\n\t}\n}\nvoid change(int root,int l,int r,int k,int temp){\n\tif(l==r){maxx[root]=temp;wz[root]=l;return;}\n\tint mid=(l+r)>>1;\n\tif(k<=mid)change(root<<1,l,mid,k,temp);\n\telse change(root<<1|1,mid+1,r,k,temp);\n\tup(root);\n}\n//----\u4ee5\u4e0a\u662f\u7ebf\u6bb5\u6811\u677f\u5b50\nint main(){\n\tint k,q,n,st=0,sum=0;//sum\u662f\u7b54\u6848\uff0cst\u8bb0\u5f55\u5730\u4e0a\u7684\u73a9\u5177\u6570\u76ee\n\tcin>>k>>q>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i];\n\t\tnxt[book[a[i]]]=i;\n\t\tbook[a[i]]=i;\n\t}//\u5904\u7406nxt\u6570\u7ec4\uff0c\u7528book\u6570\u7ec4\u8bb0\u5f55\u5f53\u79cd\u73a9\u5177\u6700\u9760\u540e\u7684\u4f4d\u7f6e\n\tfor(int i=1;i<=n;i++)if(nxt[i]==0)nxt[i]=999999999;//\u5982\u679c\u662f\u540c\u79cd\u73a9\u5177\u6700\u540e\u4e00\u4e2a\uff0cnxt\u8bbe\u4e3ainf\n\tfor(int i=1;i<=n;i++){\n\t\tif(bj[a[i]]){\n\t\t\tchange(1,1,k,a[i],nxt[i]);\n\t\t\tcontinue;\n\t\t}//\u73a9\u5177\u5728\u5730\u4e0a\u5c31\u76f4\u63a5\u5728\u7ebf\u6bb5\u6811\u4e0a\u6539\uff0c\u7136\u540e\u76f4\u63a5\u8fc7\n\t\tif(st<q){\n\t\t\tst++;\n\t\t\tchange(1,1,k,a[i],nxt[i]);\n\t\t\tbj[a[i]]=1;\n\t\t\tsum++;\n\t\t\tcontinue;\n\t\t}//\u73a9\u5177\u8fd8\u6ca1\u653e\u6ee1\u65f6\u76f4\u63a5\u653e\uff0c\u7ebf\u6bb5\u6811\u4e0a\u6539\n\t\tint x=wz[1];//\u627e\u5230\u6700\u8fdc\u7684\u73a9\u5177\n\t\tchange(1,1,k,x,0);//\u653e\u56de\u67b6\u5b50\n\t\tchange(1,1,k,a[i],nxt[i]);//\u5f53\u524d\u7684\u62ff\u56de\u5730\u4e0a\n\t\tbj[x]=0;\n\t\tbj[a[i]]=1;\n\t\tsum++;//\u7edf\u8ba1\u7b54\u6848\n\t}\n\tcout<<sum;\n\treturn 0;\n}\n\n```",
        "postTime": 1579788487,
        "uid": 55959,
        "name": "AC_Automation",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "\u6211\u4eec\u770b\u5b8c\u95ee\u9898\u53ef\u4ee5\u53d1\u73b0\uff0c\u9898\u76ee\u8981\u6211\u4eec\u6c42\u62ff\u73a9\u5177\u7684\u6b21\u6570\u5c3d\u91cf\u7684\u5c11,\u5e94\u8be5\u600e\u4e48\u5b89\u6392\u653e\u73a9\u5177\u7684\u987a\u5e8f\uff1b\u50cf\u8fd9\u6837\u6c42...\u6700\u5c0f\uff08\u5c11\uff09\u6216\u662f\u6c42...\u6700\u5927\uff08\u591a\uff09\uff0c\u8fd9\u7c7b\u95ee\u9898\u5927\u591a\u6570\u53ef\u4ee5\u91c7\u7528\u8d2a\u5fc3\uff1b\n\n\u90a3\u4e48\u6211\u4eec\u8be5\u600e\u4e48\u8d2a\u5462\uff1f\n\n\u5f88\u660e\u663e\u6211\u4eec\u628a\u5f53\u524d\u653e\u5728\u5730\u4e0a\u4f46\u4e0b\u6b21\u9700\u8981\u7684\u65f6\u95f4\u6700\u665a\u7684\u653e\u56de\u67dc\u5b50\u91cc\u662f\u6700\u4f18\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5148\u5904\u7406\u51fa\u6bcf\u4e2a\u73a9\u5177\u4e0b\u4e00\u6b21\u9700\u8981\u5b83\u662f\u4ec0\u4e48\u65f6\u5019\n```\nfor(int i=m;i>=1;i--)\n{//\u5012\u5e8f\u679a\u4e3em\u4e2a\u73a9\u5177\uff0cP\u8bb0\u5f55\u8be5\u73a9\u5177\u4e0a\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u518d\u6b21\u51fa\u73b0\u65f6\u8d4b\u7ed9S \n\tif(p[a[i]]==0) s[i]=1e8;\n   else s[i]=p[a[i]];\n   p[a[i]]=i;\n   //cout<<i<<\":\"<<\" \"<<s[i]<<\" \"<<p[a[i]]<<endl;\n}\n```\n\n\n\u5bf9\u4e8e\u5982\u4f55\u7ef4\u62a4\u6700\u5927\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u7528\u4f18\u5148\u961f\u5217\uff0c\npriority_queue<pair<int,int> > q; pair\u7684\u524d\u4e00\u4e2a\u50a8\u5b58\u8282\u70b9\u7684\u4e0b\u4e00\u6b21\u51fa\u73b0\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u4e2a\u50a8\u5b58\u8be5\u8282\u70b9\u7684\u503c\u3002\n```\nfor(int i=1;i<=m;++i)\n{\n   if(v[a[i]]) \n\t{\n\t\tk++;\t\t\t\t\t//\u5df2\u7ecf\u5728\u961f\u5217\u4e2d,\u76f4\u63a5\u52a0\u5165\u5373\u53ef\uff0c\u56e0\u4e3a\u52a0\u5165\u4e86\u4e24\u4e2a\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u7b49\u4ef7\u4e8ek+1 \n\t\tq.push(make_pair(s[i],a[i]));    //pair\u7684\u524d\u4e00\u4e2a\u50a8\u5b58\u8282\u70b9\u7684\u4e0b\u4e00\u6b21\u51fa\u73b0\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u4e2a\u50a8\u5b58\u8be5\u8282\u70b9\u7684\u503c\u3002\n   } \n\telse                                         \n\t{\n      if(q.size( )==k) \n\t\t{\n\t\t\tv[q.top( ).second]=0;\n\t\t\tq.pop( );          //\u82e5\u961f\u5217\u5df2\u6ee1\uff0c\u53d6\u51fa\u4e0b\u6b21\u51fa\u73b0\u6700\u665a\u7684\uff0c\u5373\u961f\u5934 \n\t\t}\n      q.push(make_pair(s[i],a[i])),v[a[i]]=1;\n      ans++;\n   }\n}\n```\n\n\n    \n\u518d\u653e\u4e0a\u5b8c\u6574\u7684\u4ee3\u7801\n```\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<queue>\nusing namespace std;\n\nconst int N=5e5+5,M=1e5+5;\nint n,k,m,ans;\nint a[N],s[N];\nint v[M],p[M];\npriority_queue<pair<int,int> > q;\n\nint main( )\n{\n\t//freopen(\"toy.in\",\"r\",stdin);\n\t//freopen(\"toy.out\",\"w\",stdout);\n    scanf(\"%d%d%d\",&n,&k,&m);\n    for(int i=1;i<=m;i++) scanf(\"%d\",&a[i]);\n    for(int i=m;i>=1;i--)\n\t{\n        if(p[a[i]]==0) s[i]=1e8;\n        else s[i]=p[a[i]];\n        p[a[i]]=i;\n        //cout<<i<<\":\"<<\" \"<<s[i]<<\" \"<<p[a[i]]<<endl;\n    }\n    for(int i=1;i<=m;++i)\n\t{\n    \tif(v[a[i]]) \n\t\t{\n\t\t\tk++;\t\t\t\t\t\n\t\t\tq.push(make_pair(s[i],a[i]));    \n        } \n\t\telse                                         \n\t\t{\n            if(q.size( )==k) \n\t\t\t{\n\t\t\t\tv[q.top( ).second]=0;\n\t\t\t\tq.pop( );          \n\t\t\t}\n            q.push(make_pair(s[i],a[i])),v[a[i]]=1;\n            ans++;\n        }\n    }\n    printf(\"%d\\n\",ans);\n}\n```\n\n\n\u6700\u540e\u795d\u5927\u5bb6CSP2019rp++,score++;",
        "postTime": 1572951453,
        "uid": 115480,
        "name": "like1",
        "ccfLevel": 0,
        "title": "P3419 [POI2005]SAM-Toy Cars \u9898\u89e3"
    },
    {
        "content": "> \u6211\u8981\u7528\u5404\u79cd $STL$ \u5207\u6389\u8fd9\u9053\u9898\n\n\u601d\u8def \uff1a \u6a21\u62df+\u8d2a\u5fc3(\u6bcf\u6b21\u9009\u4e0b\u4e00\u6b21\u60f3\u73a9\u7684\u65f6\u95f4\u6700\u540e\u7684\u73a9\u5177\u51fa\u961f)\n\n\u5b9e\u73b0 \uff1a ~~\u6811\u5957\u6811~~ set\u7ef4\u62a4\u5728\u5730\u4e0a\u7684\u73a9\u5177\u7684\u4e0b\u4e00\u6b21\u60f3\u88ab\u73a9\u7684\u65f6\u95f4\u7684\u6700\u5927\u503c\n\n\u8fd9\u91cc\u53ea\u653e\u4e86TLE\u7684\u7a0b\u5e8f\n\n~~\u660e\u660eunordered_map\u590d\u6742\u5ea6\u662fO(1)\u4e86\u600e\u4e48\u8fd8\u4e0d\u8ba9\u6211\u8fc7~~\n\n\u60f3\u8fc7\u7167\u7740\u6ce8\u91ca\u6539\u4e00\u6539\u5c31\u884c\uff0c\u5b9e\u73b0\u65b9\u6cd5\u770b\u6ce8\u91ca\n\n\u8bb0\u5f97\u4ea4 C++11\uff08\u6216\u4ee5\u4e0a\n\n```cpp\n#include<bits/stdc++.h>\t\t\t\t// Luogu + O2 90pts \u9700\u8981\u4e00\u70b9\u5361\u5e38\nusing namespace std;\n\ninline int read(){\n    int s=0,w=1;char ch;\n    while(ch=getchar(),!isdigit(ch)&&ch!=EOF) if(ch=='-') w=-1;\n    while(isdigit(ch)&&ch!=EOF) s=s*10+ch-'0',ch=getchar();\n    return ch==EOF?-1:s*w;\n}\n\t\t\t\t\t\t\t\t\t\t// \u8981\u5361\u5e38\u53ef\u4ee5:\nunordered_map<int,set<int> > toy;\t\t// \u6362\u6210\u6570\u7ec4\nset<pair<int,int> > nxt; // \u7ef4\u62a4\u6700\u5927\u503c\nunordered_set<int> onf;\t\t\t\t\t// \u6362\u6210bool\u6570\u7ec4\nlist<int> str;\t\t\t\t\t\t\t// \u968f\u4fbf\u6362\u4e0d\u6362\nint n,k,p,ans,vol,l;\n\ntemplate<class T1,class T2>\t\t\t\t// \u6216\u8bb8\u53ef\u4ee5\u6362\u6210\npair<T1,T2> mp(T1 a,T2 b){\t\t\t\t// #define mp(x,y) make_pair(x,y)\n    return pair<T1,T2>(a,b);\n}\n\nint main(){\n    //freopen(\"in.txt\",\"r\",stdin); \n    n=read();k=read();p=read();\n    for(int i=1,inp;i<=p;++i){\n        inp=read();\n        str.push_back(inp);\t\t\t// \u50a8\u5b58\u73a9\u5177\u7684\u5e8f\u5217\n        toy[inp].insert(i);\t\t\t// \u50a8\u5b58\u8be5\u6570\u7684\u5165\u961f\u65f6\u95f4\n    }\n    for(auto i=toy.begin();i!=toy.end();++i){ // \u585e\u5230\u524d\u9762\u53bb\u4f1a\u66f4\u5feb\n        i->second.insert(p+1);\t\t// \u4e3a\u6bcf\u4e2a\u6570\u6dfb\u52a0\u4e0b\u754c\n    }\n    for(auto x : str){\t\t\t\t// c++11 \u5c31\u662f\u723d\n        l++;\n        if(onf.find(x)==onf.end()){\n            ans++;\t\t\t\t\t// \u5982\u679c\u5730\u677f\u4e0a\u6ca1\u6709\uff0c\u7b54\u6848++\n            if(vol==k){\n                auto del = *(--nxt.end());\t// \u627e\u5230\u4e0b\u4e00\u6b21\u5165\u961f\u6700\u665a\u7684\u5143\u7d20\n                nxt.erase(--nxt.end());\n                onf.erase(del.second);\t\t// \u5220\u9664\u51fa\u961f\u73a9\u5177\n                auto add = *(toy[x].upper_bound(l));\t// \u627e\u5230\u76ee\u524d\u5143\u7d20\u7684\u4e0b\u4e00\u6b21\u5165\u961f\u65f6\u95f4\n                onf.insert(x);\n                nxt.insert(mp(add,x));\t\t// \u6dfb\u52a0\u8981\u73a9\u7684\u73a9\u5177\u7684\u4e0b\u4e00\u6b21\u5165\u961f\u65f6\u95f4\n            }else{\n                vol++;\t\t\t\t// \u5982\u679c\u5730\u677f\u6ca1\u6ee1\u76f4\u63a5\u52a0\u5165\n                onf.insert(x);\n                nxt.insert(mp(*(toy[x].upper_bound(l)),x));\n            }\n        }else{\t\t\t\t\t\t\n            auto del = *nxt.begin();\n            nxt.erase(nxt.begin());\t\t// \u5220\u9664\u76ee\u524d\u5143\u7d20\n            nxt.insert(mp(*toy[x].upper_bound(del.first),x));\t// \u6dfb\u52a0\u76ee\u524d\u7684\u5143\u7d20\u7684\u4e0b\u4e00\u6b21\u5165\u961f\u65f6\u95f4\n        }\n    }\n    cout<<ans<<endl;\n\n    return 0;\n}\n```\n\n--- \n\n$$\\ fin$$",
        "postTime": 1572744272,
        "uid": 148352,
        "name": "WNico",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd\u7ebf\u6bb5\u6811\u7684\u601d\u8def\u3002\n\n~~\u4f3c\u4e4e\u6700\u8fd1\u4e00\u6bb5\u65f6\u95f4\u672c\u4eba\u7684\u601d\u8def\u90fd\u6bd4\u8f83\u5947\u602a~~\n\n\u8003\u8651\u4e00\u4e2a\u73a9\u5177\u9700\u8981\u4f7f\u7528\u7684\u65f6\u5019\u4e0d\u7528\u4ece\u67dc\u5b50\u4e0a\u62ff\u610f\u5473\u7740\u4ec0\u4e48\u3002\n\n\u7531\u4e8e\u524d\u4e00\u6b21\u4f7f\u7528\u8fd9\u4e2a\u73a9\u5177\u7684\u65f6\u5019\u8fd9\u4e2a\u73a9\u5177\u4e00\u5b9a\u4f1a\u88ab\u62ff\u4e0b\u6765\uff0c\u90a3\u4e48\u4ece\u524d\u4e00\u6b21\u4f7f\u7528\u8fd9\u4e2a\u73a9\u5177\u5f00\u59cb\u8fd9\u4e2a\u73a9\u5177\u90fd\u8981\u4fdd\u7559\u5728\u5730\u4e0a\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u8bbe$pre_i$\u4e3a\u9700\u8981\u4f7f\u7528\u7684\u7b2c$i$\u4e2a\u73a9\u5177\u4e4b\u524d\u9700\u8981\u4f7f\u7528\u7684\u524d\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u4fdd\u8bc1$[pre_i,i)$\u4e4b\u5185\u90fd\u8981\u6709\u73a9\u5177$p_i$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u628a\u8fd9\u4e2a\u95ee\u9898\u8f6c\u6362\u4e58\u4e86\u4e00\u4e2a\u533a\u95f4\u8986\u76d6\u95ee\u9898:\n\n\u6709$p$\u4e2a\u533a\u95f4$[pre_i,i)$\uff0c\u6bcf\u4e2a\u70b9\u4e0d\u80fd\u88ab\u8986\u76d6\u8d85\u8fc7$k-1$\u6b21\uff0c\u6c42\u80fd\u653e\u4e0b\u7684\u6700\u591a\u7684\u533a\u95f4\u6570\n\n\u76f4\u63a5\u6309\u7167\u53f3\u7aef\u70b9\u6392\u5e8f\u8d2a\u5fc3\u5373\u53ef\uff0c\u68c0\u67e5\u662f\u5426\u80fd\u8986\u76d6\u7684\u65f6\u5019\u4f7f\u7528\u7ebf\u6bb5\u6811\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#include<algorithm>\n#include<iostream>\n#include<cstdlib>\n#include<iomanip>\n#include<cstring>\n#include<complex>\n#include<vector>\n#include<cstdio>\n#include<string>\n#include<bitset>\n#include<ctime>\n#include<cmath>\n#include<queue>\n#include<stack>\n#include<map>\n#include<set>\n#define F \"a\"\n#define mp make_pair\n#define pb push_back\n#define RG register\n#define il inline\nusing namespace std;\ntypedef unsigned long long ull;\ntypedef pair<int,int> PI;\ntypedef vector<int>VI;\ntypedef long long ll;\ntypedef double dd;\nconst int N=5e5+10;\nconst int M=3e5+10;\nconst int K=3e5+10;\nconst int mod=998244353;\nconst int inf=2147483647;\nconst ll INF=1ll<<60;\nconst dd eps=1e-7;\nconst dd pi=acos(-1);\nil ll read(){\n  RG ll data=0,w=1;RG char ch=getchar();\n  while(ch!='-'&&(ch<'0'||ch>'9'))ch=getchar();\n  if(ch=='-')w=-1,ch=getchar();\n  while(ch<='9'&&ch>='0')data=data*10+ch-48,ch=getchar();\n  return data*w;\n}\n\nil void file(){\n  freopen(F\".in\",\"r\",stdin);\n  freopen(F\".out\",\"w\",stdout);\n}\n\nint n,m,k,p,a[N],t[N],pre[N],mx[N<<2],lz[N<<2];\n#define ls (i<<1)\n#define rs (i<<1|1)\n#define mid ((l+r)>>1)\nil void update(int i){mx[i]=max(mx[ls],mx[rs]);}\nil void cover(int i,int v){mx[i]+=v;lz[i]+=v;}\nil void pushdown(int i){if(lz[i]){cover(ls,lz[i]);cover(rs,lz[i]);lz[i]=0;}}\nvoid modify(int i,int l,int r,int x,int y){\n  if(x<=l&&r<=y){cover(i,1);return;}\n  pushdown(i);\n  if(x<=mid)modify(ls,l,mid,x,y);\n  if(mid<y)modify(rs,mid+1,r,x,y);\n  update(i);\n}\nint query(int i,int l,int r,int x,int y){\n  if(x<=l&&r<=y)return mx[i];pushdown(i);int s=0;\n  if(x<=mid)s=query(ls,l,mid,x,y);\n  if(mid<y)s=max(s,query(rs,mid+1,r,x,y));\n  return s;\n}\n\nint main()\n{\n  RG int T=read();\n  while(T--){\n    memset(t,0,sizeof(t));\n    memset(mx,0,sizeof(mx));\n    memset(lz,0,sizeof(lz));\n    n=read();k=read();p=read();\n    for(RG int i=1;i<=p;i++){a[i]=read();if(a[i]==a[i-1])i--,p--;}\n    for(RG int i=1;i<=p;i++)pre[i]=t[a[i]],t[a[i]]=i;\n    for(RG int i=1;i<=p;i++)\n      if(pre[i]&&query(1,1,p,pre[i]+1,i-1)<k-1){\n\tm++;modify(1,1,p,pre[i]+1,i-1);\n      }\n    printf(\"%d\\n\",p-m);\n  }\n  return 0;\n}\n\n```",
        "postTime": 1539402476,
        "uid": 47641,
        "name": "fdfdf",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3419 \u3010[POI2005]SAM-Toy Cars\u3011"
    }
]
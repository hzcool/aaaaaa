[
    {
        "content": "### \u6811\u72b6\u6570\u7ec4+\u5dee\u5206 ~~\u867d\u7136\u4e5f\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811~~\n\u9996\u5148\uff0c\u4f60\u9700\u8981\u666e\u53ca\u4e00\u4e9b\u524d\u7f00\u77e5\u8bc6\uff1a**\u6811\u72b6\u6570\u7ec4\u548c\u5dee\u5206**\n\n\u5982\u679c\u4f60\u6ca1\u5b66\u8fc7\u5dee\u5206\uff0c\u5c31\u70b9[\u8fd9\u91cc](https://gwx123456.blog.luogu.org/ci-fen)\n\n\u5982\u679c\u4f60\u6ca1\u5b66\u8fc7\u6811\u72b6\u6570\u7ec4\uff0c\u5c31\u70b9[\u8fd9\u91cc](https://gwx123456.blog.luogu.org/solution-p2068)\n\n**\u6ce8\uff1a\u6811\u72b6\u6570\u7ec4\u867d\u7136\u53ea\u6709\u4e00\u9053\u4f8b\u9898\uff0c\u4f46\u4e5f\u8be6\u7ec6\u8bb2\u89e3\u4e86\u6811\u72b6\u6570\u7ec4**\n\n\u76f8\u4fe1\uff0c\u4f60\u770b\u5b8c\u4e0a\u9762\u4e24\u4e2a\u94fe\u63a5\u540e\u5c31\u660e\u767d\u4ee3\u7801\u600e\u4e48\u5199\u4e86\u5427\u3002\n\n\u4e0a\u4ee3\u7801\uff1a\n```\n#include <bits/stdc++.h>\nusing namespace std;\nint n,a[10000001],c[10000001],m;\nint lowbit(int i){\n    return i&(-i);\n}\nint getSum(int x){//\u6c42\u548c\n    int sum=0;\n    for(int i=x;i>0;i-=lowbit(i))//\u6811\u72b6\u6570\u7ec4\u7684\u524d\u7f00\u548c\n        sum+=c[i];\n    return sum;\n}\nvoid modify(int x,int delta){//\u6539\u53d8\u6570\u636e\n    for(int i=x;i<=n;i+=lowbit(i)) //\u56e0\u4e3a\u524d\u7f00\u548c\u662f\u4e00\u4e2a\u4e00\u4e2a\u63a8\u7684\uff0c\u6240\u4ee5\u4e00\u4e2a\u513f\u5b50\u8282\u70b9\u6539\u53d8\u4e86\uff0c\u6240\u6709\u7236\u4eb2\u8282\u70b9\u4e5f\u8981\u6539\u53d8 \n        c[i]+=delta;\n}\nint main(){\n    cin>>n;\n    cin>>m;\n    for(int i=1;i<=m;i++){\n        int a,b,c;\n        cin>>c;\n        if(c==1){\n            cin>>a;\n            cout<<getSum(a)<<endl;//\u6811\u72b6\u6570\u7ec4\u524d\u7f00\u548c\u5f97\u5230\u5355\u70b9\u67e5\u8be2\n        }\n        else {\n            cin>>a>>b;\n            modify(a,1);//\u5dee\u5206\uff0c\u56e0\u4e3aa~b\u52a01\u5c31\u76f8\u5f53\u4e8e\u5de6\u8fb9\u7684\u52a01\u53f3\u8fb9\u7684\u51cf1\uff08\u5dee\u5206\u535a\u5ba2\u91cc\u8be6\u7ec6\u8bb2\u89e3\u4e86\u5dee\u5206\u7528\u6cd5\uff09\n            modify(b+1,-1);\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1561558960,
        "uid": 168385,
        "name": "gwx123456",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "\u672c\u4eba\u6700\u8fd1\u521a\u5b66\u5b8c\u6811\u94fe\u5256\u5206\uff0c\u88ab\u7ebf\u6bb5\u6811\u90e8\u5206\u641eRE\u5230\u81ea\u95ed\uff0c\u6240\u4ee5\u6765\u5207\u4e00\u9053~~\u6c34\u9898~~\uff0c\u4e0a\u6765\u5c31\u6253\u4e86\u4e00\u4e2a\u7ebf\u6bb5\u6811\u51fa\u6765\uff1a\n\n### 70\u5206\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int N = 1e7 + 5;\n\n#define ms(a) memset(a, 0, sizeof(a))\n\n#define ls p << 1\n#define rs p << 1 | 1\n\ntemplate<class T> void read(T &x) {\n\tx = 0; int f = 0; char ch = getchar();\n\twhile (ch < '0' || ch > '9') {f |= (ch == '-'); ch = getchar();}\n\twhile (ch >= '0' && ch <= '9') {x = (x << 1) + (x << 3) + (ch ^ 48); ch = getchar();}\n\tx = f ? -x : x;\n\treturn;\n}\n\nint n, m;\n\nint L[N * 4], R[N * 4], s[N * 4];\n\ninline void pushup(int p) {\n\ts[p] = s[ls] + s[rs];\n}\n\nvoid build(int p, int l, int r) {\n\tL[p] = l, R[p] = r;\n\tif (l == r) {s[p] = 0; return;} \n\tint m = (l + r) >> 1;\n\tbuild(ls, l, m);\n\tbuild(rs, m + 1, r);\n\tpushup(p);\n}\n\nvoid modify(int p, int k, int v) {\n\tif (L[p] == R[p]) {s[p] += v; return;}\n\tint m = (L[p] + R[p]) >> 1;\n\tif (k <= m) modify(ls, k, v);\n\telse modify(rs, k, v);\n\tpushup(p);\n}\n\nint query(int p, int l, int r) {\n\tif (L[p] == l && R[p] == r) return s[p];\n\tint m = (L[p] + R[p]) >> 1;\n\tif (r <= m) return query(ls, l ,r);\n\tif (l > m) return query(rs, l, r);\n\treturn query(ls, l, m) + query(rs, m + 1, r);\n}\n\nint main() {\n\tread(n), read(m);\n\tbuild(1, 1, n + 1);\n\tint p, x, y;\n\twhile (m--) {\n\t\tread(p);\n\t\tif (p == 0) {\n\t\t\tread(x), read(y);\n\t\t\tmodify(1, x, 1);\n\t\t\tmodify(1, y + 1, -1);\n\t\t}\n\t\telse {\n\t\t\tread(y);\n\t\t\tprintf(\"%d\\n\", query(1, 1, y));\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\u7136\u800c\uff0c\u4e00\u5f00\u59cb\u6837\u4f8b\u90fd\u8fc7\u4e0d\u4e86\uff0c\u8c03\u4e86\u534a\u4e2a\u5c0f\u65f6\uff0c\u6700\u540e\u53d1\u73b0\u5efa\u6811\u65f6\u53ea\u5efa\u5230\u4e86 $1 $ ~ $ N$\uff0c\u76f4\u5230\u6700\u540e\u88ab\u4e00\u4f4ddalao\u770b\u51fa\u6765\u4e86\uff0c\u56e0\u4e3a\u5dee\u5206\u6570\u7ec4\u9700\u8981\u591a\u5f00\u4e00\u4e2a\u7a7a\u95f4\uff0c\u6240\u4ee5$build(1, 1, n + 1)$\u5c31\u8fc7\u4e86\u3002\n\n\u4f46\u662f\uff0c\u4e07\u4e07\u6ca1\u60f3\u5230\uff0c\u4e00\u4e32$MLE$\u7206\u4e86\u51fa\u6765\uff0c\u5e76\u4e14\u6211\u7684\u7ebf\u6bb5\u6811\u6bd4\u8f83~~\u6bd2\u7624~~\uff0c \u5148\u628a\u6bcf\u4e2a\u8282\u70b9\u7684\u5de6\u53f3\u513f\u5b50\u5b58\u8d77\u6765\uff0c\u7528\u7a7a\u95f4\u6362\u65f6\u95f4\uff0c\u540e\u6765\u53d1\u73b0\u5c31\u7b97\u5199~~\u6b63\u5e38~~\u4e00\u70b9\u4e5f\u8fc7\u4e0d\u4e86\uff0c$qwq$\u3002\n\n\u6ca1\u529e\u6cd5\uff0c\u4e5f\u4e0d\u80fd\u5c31\u8fd9\u6837\u4e86\uff0c\u6240\u4ee5~~\u88ab\u8feb~~\u6253\u4e86\u4e2a\u6811\u72b6\u6570\u7ec4\u4e0a\u53bb\u3002\n\n### 100\u5206\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int N = 1e7 + 5;\n\ntemplate<class T> void read(T &x) {\n\tx = 0; int f = 0; char ch = getchar();\n\twhile (ch < '0' || ch > '9') {f |= (ch == '-'); ch = getchar();}\n\twhile (ch >= '0' && ch <= '9') {x = (x << 1) + (x << 3) + (ch ^ 48); ch = getchar();}\n\tx = f ? -x : x;\n\treturn;\n}\n\nint n, m, t[N];\n\ninline int lowbit(int k) {\n\treturn k & -k;\n}\n\nvoid add(int x, int v) {\n\tfor (int i = x; i <= n + 1; i += lowbit(i)) t[i] += v;\n} \n\nint sum(int x) {\n\tint ans = 0;\n\tfor (int i = x; i > 0; i -= lowbit(i)) ans += t[i];\n\treturn ans;\n}\n\nint main() {\n\tread(n), read(m);\n\tint p, x, y;\n\twhile (m--) {\n\t\tread(p);\n\t\tif (p == 0) {\n\t\t\tread(x), read(y);\n\t\t\tadd(x, 1);\n\t\t\tadd(y + 1, -1);\n\t\t}\n\t\telse {\n\t\t\tread(y);\n\t\t\tprintf(\"%d\\n\", sum(y));\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\n\u5e0c\u671b\u5927\u5bb6\u505a\u5230\u505a\u9898\u5148\u628a\u9898\u770b\u5b8c\uff0c\u518d\u5f00\u59cb\u52a8\u952e\u76d8\uff0c\u7701\u7740\u5230\u65f6\u5019\u4f1a\u4e00\u4e0b\u5220\u638950\u591a\u884c\u4ee3\u7801\uff0c**$qwq$**\n\n## \u867d\u7136\u6ca1\u6709\u8bb2\u89e3\uff0c\u4f46\u662f\u81f3\u5c11\u53ef\u4ee5\u8ba9\u5927\u5bb6\u5438\u53d6\u4e00\u70b9\u505a\u9898\u6559\u8bad\uff0c\u4e5f\u7b97\u662f\u4e0d\u8ba9\u672c\u4eba\u6628\u5929\u4e00\u4e2a\u5c0f\u65f6\u767d\u8d39\u4e86\uff0c\u611f\u8c22\u9605\u8bfb\uff01",
        "postTime": 1568891969,
        "uid": 127608,
        "name": "My_666",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "~~\u54c8\u54c8\u54c8\uff0c\u7adf\u7136\u90fd\u662f\u7528\u6811\u72b6\u6570\u7ec4\u5199\u7684\uff0c\u90a3\u7ebf\u6bb5\u6811\u7684\u4eba\u5934\u6211\u5c31\u6536\u4e0b\u4e86~~\n\n\u5176\u5b9e\uff0c\u5728\u8fdb\u5165\u5de6\u53f3\u5b50\u6811\u65f6\uff0c\u4e3a\u9632\u6b62MLE\uff0c\u53ef\u4ee5\u4e0d\u7528\u5f53\u524d\u4f4d\u7f6e* 2\u6216* 2+1\uff0c\u8fd9\u6837\u5341\u5206\u6d6a\u8d39\u7a7a\u95f4\n\n\u53ef\u4ee5\u8bb0\u5f55a[i]\u5de6\u5b50\u6811\u7684\u4f4d\u7f6e\u4e3aal[i]=j,\u8fd9\u6837\u8fdb\u5165\u5de6\u5b50\u6811\u53ef\u4ee5\u76f4\u63a5\u53d8\u4e3aa[al[i]]\n```cpp\n#include <iostream>\nusing namespace std;\nint n,m,al[20000001],a[20000001],ar[20000001],an=1;\n/*\na[i]\u4e3a\u5f53\u524d\u533a\u95f4\u5185\u6709\u591a\u5c11\u4eba\u5495\u5495\nal[i]\u4e3a\u5f53\u524d\u533a\u95f4a[i]\u7684\u5de6\u5b50\u6811\u4f4d\u7f6e\nar[i]\u4e3a\u5f53\u524d\u533a\u95f4a[i]\u7684\u53f3\u5b50\u6811\u4f4d\u7f6e\nan\u4e3aa\u73b0\u5728\u7684\u5927\u5c0f\n*/\nvoid add(int l,int r,int k,int x,int y){\n\tif(x<=l&&y>=r)//\u5982\u679c\u5f53\u524d\u6574\u4e2a\u533a\u95f4\u90fd\u4f1a\u5495\u5495\uff0c\u5219\u4e0d\u7528\u5411\u4e0b\u7ee7\u7eed\u641c\uff0c\u76f4\u63a5\u6807\u8bb0\n\t\ta[k]++;\n\telse{\n\t\tint mid=(l+r)>>1;\n\t\tif(mid>=x){\n\t\t\tif(!al[k])//\u5982\u679ca\u7684\u5de6\u5b50\u6811\u8fd8\u672a\u5206\u914d\u7a7a\u95f4\n\t\t\t\tal[k]=++an;\n\t\t\tadd(l,mid,al[k],x,y);\n\t\t}\n\t\tif(mid+1<=y){\n\t\t\tif(!ar[k])//\u5982\u679ca\u7684\u53f3\u5b50\u6811\u8fd8\u672a\u5206\u914d\u7a7a\u95f4\n\t\t\t\tar[k]=++an;\n\t\t\tadd(mid+1,r,ar[k],x,y);\n\t\t}\n\t}\n}\nint query(int l,int r,int k,int x){\n\tif(l==r)//\u641c\u5230\u5e95\u90e8,\u8fd4\u56de\n\t\treturn a[k];\n\telse{\n\t\tint mid=(l+r)>>1;\n\t\tif(mid>=x)\n\t\t\treturn a[k]+query(l,mid,al[k],x);//a[k]\u4e3a\u5f53\u524d\u533a\u95f4\u90fd\u4f1a\u5495\u5495\u65f6,\u5219\u7b54\u6848\u9700\u8981\u52a0\u4e0aa[k]\u548c\u5de6\u5b50\u6811\u4e2d\u4f1a\u5495\u5495\u7684\u4eba\u6570\n\t\telse\n\t\t\treturn a[k]+query(mid+1,r,ar[k],x);\n\t}\n}\nint main(){\n\tint i,j,k,x,y;\n\tcin>>n>>m;\n\tfor(i=1;i<=m;i++){\n\t\tcin>>k;\n\t\tif(k){\n\t\t\tcin>>x;\n\t\t\tcout<<query(1,10000000,1,x)<<endl;\n\t\t}\n\t\telse{\n\t\t\tcin>>x>>y;\n\t\t\tadd(1,10000000,1,x,y);\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1566745043,
        "uid": 93538,
        "name": "\u03b1nonymous",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "\u6709\u6811\u72b6\u6570\u7ec4\u7684\u5730\u65b9\uff0c\u5c31\u5c11\u4e0d\u4e86\u7ebf\u6bb5\u6811\u3002\u6709\u7ebf\u6bb5\u6811\u7684\u5730\u65b9\uff0c\u5c31\u5c11\u4e0d\u4e86\u5206\u5757\u3002~~\u6211\u81ea\u5df1\u7f16\u7684~~\n\n**\u5206\u5757\u662f\u4e00\u79cd\u5f88\u5bb9\u6613\u7406\u89e3\u6570\u636e\u7ed3\u6784\uff0c\u4ed6\u53ef\u4ee5\u7ef4\u62a4\u5f88\u591a\u7684\u4e1c\u897f**~~\u5f53\u7136\u6211\u90fd\u4e0d\u4f1a~~\uff0c\u672c\u9898\u89e3\u65e8\u5728\u8ba9\u53ea\u80fd\u5f97\u66b4\u529b\u5206\u7684\u540c\u5b66AC\u672c\u9898\uff01\u5b66\u4f1a\u5206\u5757\u7684\u601d\u60f3\u4ee5\u53ca\u65b9\u6cd5\uff0c\u4f1a\u6bd4\u8f83\u8be6\u7ec6\u3002\n\n- \u5206\u5757\u7684\u601d\u60f3\n\n\t\u6240\u8c13\u5206\u5757\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u628a\u4e00\u7ec4\u6570\u636e\u5206\u4e3a\u82e5\u5e72\u5757\uff0c\u4ece\u800c\u63d0\u9ad8\u6548\u7387\u3002\n    \n    \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u6765\u770b\u4e00\u7ec4\u6570\u636e1,5,6,4,5\u3002\n    \u6211\u4eec\u628a\u4ed6\u5206\u6210$\\sqrt{n}$\u4e2a\u5757\uff08\u4e0d\u540c\u7684\u60c5\u51b5\u5757\u7684\u6570\u91cf\u4e0d\u540c\uff0c\u5c31\u662f\u8fd9\u6837\n \n| \u7f16\u53f7 | \u6570\u503c | \u7b2c\u51e0\u5757 |\n| ----------- | ----------- | ----------- |\n| 1 | 1 | 1 |\n| 2 | 5 | 1 |\n| 3 | 6 | 2 |\n| 4 | 4 | 2 |\n| 5 | 5 | 3 |\n\n\u5982\u679c\u6211\u4eec\u8981\u8ba9\u7f16\u53f7\u4e00\u5230\u4e94\u52a01\uff0c\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a\n\t\n    1. \u628a\u7b2c\u4e00\u5757\uff081\uff09\u7684\u503c \u66b4\u529b \u52a01\n    2. \u628a\u4e2d\u95f4\u5757\uff082\uff09\u7684\u6bcf\u4e2a\u5757\u7684\u6807\u8bb0+1\n    \uff08\u5982\u4f55\u6253\u6807\u8bb0\uff1f\u53ea\u8981\u518d\u5f00\u4e00\u4e2a\u6570\u7ec4\uff0c\u8bb0\u5f55\u6bcf\u4e00\u5757\u7684\u7edf\u4e00\u52a0\u7684\u503c\u5373\u53ef\uff0c\u76f8\u4fe1\u5b66\u8fc7\u7ebf\u6bb5\u6811\u7684\u540c\u5b66\u4e00\u5b9a\u5f88\u719f\u6089\uff09\n    3. \u628a\u6700\u540e\u4e00\u5757\uff083\uff09\u7684\u6570\u503c \u66b4\u529b \u52a01\n\n\u7136\u540e\u5c31\u662f\u8fd9\u6837\n\n\n\n\n|\u7f16\u53f7 | \u6570\u503c | \u7b2c\u51e0\u5757 |\n| ----------- | ----------- | ----------- | ----------- |\n| 1 | 2\uff081+1\uff09 |1  | \n| 2 | 6 \uff085+1\uff09| 1 | \n| 3 | 6 | 2 |  |\n| 4 | 4 | 2 |  |\n| 5 | 6 \uff085+1\uff09|3  |\n\n|\u7b2c\u51e0\u5757  | \u6807\u8bb0 |\n| ----------- | ----------- |\n| 1 | 0 |\n| 2 | 1\uff080+1\uff09 |\n| 3 | 0 |\n\n\n\u533a\u95f4\u67e5\u8be2\u540c\u7406\uff0c\u53ea\u662f\u66b4\u529b\u52a0\u7684\u65f6\u5019\u8981\u52a0\u4e0a\u6253\u7684\u6807\u8bb0\u3002\n\n\u5355\u70b9\u67e5\u8be2\u5c31\u662f\u628a\u6807\u8bb0\u548c\u6570\u503c\u52a0\u8d77\u6765\u5c31OK\u3002\n\n- \u5177\u4f53\u5b9e\u73b0\n\t\n    \u5b9e\u73b0\u65f6\u6211\u4eec\u8981\u8003\u8651\u4e00\u4e9b\u7ec6\u8282\u3002\n    \n    1. \u5982\u679c\u8981\u64cd\u4f5c\u7684\u4e24\u4e2a\u7aef\u70b9\u5728\u4e00\u4e2a\u5757\u5185\uff0c\u76f4\u63a5\u66b4\u529b\u76f8\u52a0\u3002\n    2. \u5982\u679c\u5de6\u7aef\u70b9\u6216\u53f3\u7aef\u70b9\u672c\u6765\u5c31\u5728\u5757\u7684\u5f00\u5934\u6216\u672b\u5c3e\uff0c\u5c31\u522b\u52a0\u4e86\u3002\n    \u8fd8\u662f\u5f88\u597d\u7406\u89e3\u7684\n- \u4ee3\u7801\u5b9e\u73b0\uff08\u672c\u9898\n```cpp\n#include<stdio.h>\n#include<iostream>\n#include<algorithm>\n#include<cmath>\n#include<string.h>\nusing namespace std;\nconst int N=10000000+100;\nstruct fk{//\u5206\u5757\u5927\u6cd5 \n\tint num,rank;//\u6570\u503c\uff0c\u7b2c\u51e0\u5757 \n}a[N];\nint tag[N];//\u6807\u8bb0\n#define rank(x) a[x].rank\n#define tag(x) tag[x]\n#define num(i) a[i].num\nint n,bs,zo;//\u5171\u6709\u51e0\u4e2a\u6570\uff0c\u5757\u7684\u5927\u5c0f ,\u603b\u5171\u6709\u51e0\u4e2a\u5757 \nint qsum(int l){\n\treturn a[l].num + tag(rank(l));//\u5355\u70b9\u67e5\u8be2\n}\nvoid change2(int l,int r,int add){\n    for (int i=l; i<=min(rank(l)*bs,r); i++)num(i)+=add;//\u8fd9\u4e2a\u662f\u524d\u9762\u7684\u5757\uff0c\u8fd9\u91cc\u540e\u9762\u89e3\u91ca\n    if (rank(l)!=rank(r))\n        for (int i=(rank(r)-1)*bs+1; i<=r; i++)num(i)+=add;//\u8fd9\u4e2a\u662f\u540e\u9762\u7684\u5757\uff0c\u8fd9\u91cc\u540e\u9762\u89e3\u91ca\n    for (int i=rank(l)+1; i<=rank(r)-1; i++)\n        tag(i)+=add;//\u8fd9\u4e2a\u662f\u6574\u5757\u5904\u7406\n}\nvoid pr(){\n\tprintf(\"\\tid\\tnum\\trank\\n\");\n\tfor(int i=1;i<=n;i++)printf(\"\\t%d:\\t%d\\t%d\\n\",i,num(i),rank(i));\n\tprintf(\"\\n\\tid\\ttag\\n\");\n\tfor(int i=1;i<=zo;i++)printf(\"\\t%d:\\t%d\\t\\n\",i,tag(i));\t\n}\nsigned main(){\n\tcin>>n;bs=sqrt(n);\n\tif(n/bs*bs==n)zo=n/bs; else zo=n/bs+1\n    //\u4f1a\u4e0d\u4f1a\u6709\u4e0d\u5b8c\u6574\u7684\u5757;\n\tint k;cin>>k;\t\t\n\tfor(int i=1;i<=n;i++){\n\t\ta[i].num = 0;\n\t\ta[i].rank=(i-1)/bs+1;\t\t\n\t} \n\tint l,r;\n\twhile(k--){            \n\t\tint op; scanf(\"%d\",&op);\n\t\tif(op==0){\n\t\t    scanf(\"%d%d\",&l,&r);\n            change2(l,r,1);\n\t\t}\n\t\tif(op==1) {\n\t\t\tscanf(\"%d\",&l);\n            printf(\"%d\\n\",qsum(l));\n\t\t}\t\n\t} \n\treturn 0;\n}\n```\n\uff08\u5927\u4f6c\u81ea\u884c\u8df3\u8fc7\u6b64\u533a\u57df\uff09\n\t\u89e3\u91ca\u4e00\u4e0b\u5904\u7406\u524d\u9762\u7684\u5757\u548c\u540e\u9762\u7684\u5757\u7684\u4ee3\u7801\n     min(rank(l)*bs,r)\n     \n       \t\t\t\t\n                    \n                    \nrank\uff08l\uff09 $\\times$ bs\u5c31\u662f\u7b2c I \u4e2a\u5757 \u4e58\u4e0a \u5757\u7684\u5927\u5c0f\uff0c\u5f88\u5bb9\u6613\u660e\u767d\uff0c\u5c31\u662f\u5757\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002\n\t\u7528\u524d\u9762\u7684\u6570\u5217\uff0c\u6bd4\u5982\n    \n  rank(1) $\\times$ 2 = 1 $\\times$2 = 2 \n  \n  \u679c\u7136\u662f\u7b2c\u4e00\u4e2a\u5757\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u3002\n    min()\u91cc\u9762\u6709\u4e2a r \u662f\u8003\u8651\u5de6\u7aef\u70b9\u548c\u53f3\u7aef\u70b9\u53ef\u80fd\u5728\u4e00\u4e2a\u5757\u91cc\uff0c\u5982\u679c\u662f\uff0c\u90a3\u4e48\u5c31\u76f4\u63a5\u66b4\u529b\u5168\u52a0\u5b8c\uff0c\u540e\u9762\u7684\u64cd\u4f5c\u5176\u5b9e\u90fd\u6ca1\u6267\u884c\u3002\n    \n (rank(r)-1)*bs+1\u540c\u7406\uff0c\u5c31\u662f\u5757\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u3002\n \n \u7b80\u5355\u7c97\u66b4\n \n\n\n",
        "postTime": 1583321525,
        "uid": 226148,
        "name": "Suuon_Kanderu",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "~~\u6bd2\u7624\u667a\u9893\u600e\u4e48\u5149\u7ed9\u7a9d\u9893\u7ebf\u6bb5\u6811/\u6811\u72b6\u6570\u7ec4~~\n\n---\n\n\u524d\u7f6e\u829d\u58eb\uff1a[\u7ebf\u6bb5\u6811/\u6811\u72b6\u6570\u7ec4](https://www.luogu.org/blog/NullCatsBlog/solution-p3372)\n\n\u8fd9\u4e2a\u9898\u975e\u5e38\u660e\u663e\u80fd\u770b\u51fa\u6765\uff08\u6570\u636e\u8303\u56f4 $und$ \u9898\u76ee\uff09\u8fd9\u662f\u4e00\u9053\u7ebf\u6bb5\u6811/\u6811\u72b6\u6570\u7ec4\u7684\u9898\u76ee\u3002\n\n\u5982\u679c\u770b\u4e0d\u51fa\u6765\u4e5f\u6ca1\u6709\u5173\u7cfb\u3002\u7a9d\u4eec\u4e0d\u59a8\u628a\u8fd9\u4e9b\u65e5\u7a0b\u7528\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\u8868\u793a\u51fa\u6765\uff0c\u800c$date_i$\u8868\u793a\u7b2c$i$\u5929```\u5495\u5495\u5495```\u7684\u4eba\u6570\u3002\u5f88\u663e\u7136\u521a\u5f00\u59cb\u7684\u65f6\u5019\u6240\u6709\u4eba\u90fd\u4e0d~~\u662fup~~\u5495\u5495\u5495\uff0c\u56e0\u6b64$date$\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f$0$\u3002\u7ee7\u7eed\u601d\u8003\uff0c\u4ece$a$\u5230$b$\u6709\u4e00\u4e2a\u4eba```\u5495\u5495\u5495```\u7ef4\u62a4\u7684\u5c31\u662f\u533a\u95f4$date_a \\to date_b$\u4e2d\u95f4\u6240\u6709\u503c$++$\u3002\u76f8\u540c\u7684\uff0c\u67e5\u8be2\u5c31\u662f\u67e5\u627e\u5355\u70b9\u7684\u558f\uff01\n\n\u56e0\u4e3a\u672c\u9898\u524d\u9762\u6ca1\u6709\u521d\u59cb\u7684\u5495\u5495\u5495\u7684\u4eba\u6570\uff0c\u56e0\u6b64\u4e5f\u5c31\u4e0d\u9700\u8981\u518d$Build$\u4e86\uff0c\u540c\u65f6\u4e5f\u56e0\u4e3a\u5e76\u4e0d\u662f\u7ef4\u62a4\u7684\u533a\u95f4\u548c\u8fd9\u79cd~~\u6bd2\u7624\u7684\u4e1c\u897f~~\uff0c\u56e0\u6b64\u4e5f\u4e0d\u9700\u8981\u5f04\u4ec0\u4e48$PushUp, PushDown, lazy\\_tag$\u8fd9\u79cd\u3002~~\u56e0\u6b64\u9898\u89e3\u91cc\u8bf4\u672c\u9898\u6811\u72b6\u6570\u7ec4\u6bd4\u7ebf\u6bb5\u6811\u7801\u91cf\u5c0f\u7279\u522b\u591a\u7684\u90fd\u5728\u626f\u6de1~~\n\n\u4f46\u662f\u503c\u5f97\u5410\u69fd\u7684\u662f\uff0c\u672c\u9898\u7684\u6570\u7ec4\u5f97\u5f00\u80a5\u80a0\u5927\uff0c$1e6$\u53ea\u6709$60$\u5206\uff0c$1e7$\u662f$95$\u5206\uff0c\u5230$2e7$\u624d\u80fd\u6ee1\u3002\u3002\u3002~~\u4e0d\u8981\u95ee\u7a9d\u600e\u4e48\u77e5\u9053\u7684\uff0c\u5b9e\u8df5\u51fa\u771f\u77e5~~\n\n\u4e0b\u9762\u8d34\u4ee3\u7801\uff0c\u89e3\u91ca\u5012\u4e5f\u6ca1\u4ec0\u4e48\u3002\u3002\u3002$Query$\u548c\u6a21\u677f\u9898\u4e0d\u540c\u7684\u662f\u672c\u9898\u9700\u8981\u628a$from, to$\u60f3\u8c61\u6210\u4e00\u4e2a\u91cd\u5408\u7684\u9876\u70b9\u8fdb\u884c\u67e5\u8be2\n\n```\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint tree[19198100 << 1], scan[11451400 << 1];\n\nvoid Add(int, int, int, int, int);\n\nint Query(int, int, int, int);\n\nint main(int argc, char* argv[])\n{\n\tint n, m, a, b;\n\tscanf(\"%d%d\", &n, &m);\n\tfor(register int i = 0; i < m; i++)\n\t{\n\t\tint md;\n\t\tscanf(\"%d\", &md);\n\t\tif(md)\n\t\t{\n\t\t\tscanf(\"%d\", &a);\n\t\t\tprintf(\"%d\\n\", Query(1, n, 1, a));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tscanf(\"%d%d\", &a, &b);\n\t\t\tAdd(1, n, 1, a, b);\n\t\t}\n\t}\n\treturn 0;\n}\n\nvoid Add(int left, int right, int root, int from, int to)\n{\n\tif(left >= from && right <= to)\n\t{\n\t\ttree[root]++;\n\t}\n\telse\n\t{\n\t\tint mid = (left + right) >> 1;\n\t\tif(mid >= from)\n\t\t{\n\t\t\tAdd(left, mid, root << 1, from, to);\n\t\t}\n\t\tif(mid < to)\n\t\t{\n\t\t\tAdd(mid + 1, right, root << 1 | 1, from, to);\n\t\t}\n\t}\n}\n\nint Query(int left, int right, int root, int date)\n{\n\tif(left == right)\n\t{\n\t\treturn tree[root];\n\t}\n\telse\n\t{\n\t\tint mid = (left + right) >> 1;\n\t\tif(mid >= date)\n\t\t{\n\t\t\treturn tree[root] + Query(left, mid, root << 1, date);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn tree[root] + Query(mid + 1, right, root << 1 | 1, date);\n\t\t}\n\t}\n}\n```",
        "postTime": 1569743013,
        "uid": 213346,
        "name": "Null_Cat",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "\u5982\u679c\u53ea\u60f3\u5f9760\u5206\uff0c\u53ef\u4ee5\u53f3\u8f6c\u5dee\u5206\uff0c\u590d\u6742\u5ea6O(mn)\u3002\n\n\u6b63\u89e3\u5e94\u8be5\u5c31\u662f\u6811\u72b6\u6570\u7ec4\uff0c\u4e5f\u4e0d\u77e5\u9053\u7ebf\u6bb5\u6811\u53ef\u4e0d\u53ef\u4ee5\uff0c\u4f46\u5728\u8fd9\u4e2a\u9898\u91cc\u7ebf\u6bb5\u6811\u5e94\u8be5\u6ca1\u6709\u6811\u72b6\u6570\u7ec4\u8dd1\u5f97\u5feb\u3002\n\n\u5176\u5b9e\u5728\u6b64\u9898\u4e2d\u6811\u72b6\u6570\u7ec4\u4e5f\u4f7f\u7528\u4e86\u5dee\u5206\u7684\u601d\u60f3\uff0c\u6267\u884c\"0\"\u64cd\u4f5c\u65f6\uff0c\u628aa[x]+1,\u540c\u65f6a[y+1]-1\uff0c\u4e8e\u662f\u6211\u4eec\u5f88\u5feb\u7684\u5c31\u80fd\u5b8c\u6210\u5bf9\u4e00\u4e2a\u533a\u95f4\u7684\u4fee\u6539\uff0c\u590d\u6742\u5ea6O(1)(\u5e94\u8be5\u662f\u5e38\u6570\uff0c\u849f\u84bb\u4e0d\u592a\u4f1a\u7b97\u590d\u6742\u5ea6QwQ),\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\u3002\u5bf9\u4e8e\"1\"\u64cd\u4f5c\uff0c\u6211\u4eec\u76f4\u63a5\u8fd4\u56desum(x)\u5373\u53ef\uff0c\u590d\u6742\u5ea6O(logn);\n\n\u6811\u72b6\u6570\u7ec4\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(mlongn)\uff0c\u6bd4\u7eaf\u5dee\u5206\u5feb\u4e0d\u5c11\u3002\n\n\u8fd8\u4e0d\u660e\u767d\u7684\u8bdd\u5de6\u8f6c[\u6811\u72b6\u6570\u7ec42](https://www.luogu.org/problemnew/show/P3368)\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```CPP\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nlong long a[10000001],n,m,last,now;\nint lowbit(int x)//\u6811\u72b6\u6570\u7ec4\u6807\u5fd7\u6027\u64cd\u4f5c\n{\n\treturn x&(-x);\n}\nvoid update(int x,int k)//\u533a\u95f4\u4fee\u6539\n{\n\tfor(;x<=n;x+=lowbit(x))\n\t{\n\t\ta[x]+=k;\n\t}\n}\nlong long sum(int x)//\u5355\u70b9\u67e5\u8be2\n{\n\tlong long ans=0;\n\tfor(;x;x-=lowbit(x))\n\t{\n\t\tans+=a[x];\n\t}\n\treturn ans;\n}\nint main()\n{\n\tcin>>n>>m;\n\tint w,x,y;\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%d\",&w);\n\t\tif(w==0)\n\t\t{\n\t\t\tscanf(\"%d%d\",&x,&y);\n\t\t\tupdate(x,1);//\u5dee\u5206\n\t\t\tupdate(y+1,-1);\n\t\t}\n\t\telse if(w==1)\n\t\t{\n\t\t\tscanf(\"%d\",&x);\n\t\t\tcout<<sum(x)<<endl;\n\t\t}\n\t}\n}\n```\n\u8ba9\u6211\u7684\u9898\u89e3\u8fc7\u5457QwQ",
        "postTime": 1540729124,
        "uid": 94437,
        "name": "philosopherchang",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "\u771f\u4e0d\u6562\u76f8\u4fe1\u4f60\u8c37\u6709\u6a21\u677f\u9898\u7684\u91cd\u9898\u2026\u2026\n\n\u6b64\u9898\u4e3a[P3368 \u3010\u6a21\u677f\u3011\u6811\u72b6\u6570\u7ec4 2](https://www.luogu.com.cn/problem/P3368)\u7684\u5f31\u5316\u7248\u3002\n\n\u672c\u7bc7\u9898\u89e3\u5c06\u628a**\u91cd\u5fc3**\u504f\u5411\u4e3a\u4ec0\u4e48\u4e14\u5982\u4f55\u901a\u8fc7\u5dee\u5206\u6765\u5b9e\u73b0\u672c\u9898\u8981\u6c42\uff0c\u56e0\u800c\u5c06\u6de1\u5316\u751a\u81f3\u7565\u8fc7\u6811\u72b6\u6570\u7ec4\u7684\u76f8\u5173\u77e5\u8bc6\u3002\n\n\u6709\u5173\u6811\u72b6\u6570\u7ec4\u5165\u95e8\u7684\u8bf7\u770b[\u8fd9\u91cc](https://www.luogu.com.cn/problemnew/solution/P3374)\u3002\n\n---------\n\n### \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u521d\u59cb\u5e8f\u5217\uff0c\u5168\u90e8\u4e3a $0$\u3002\u8981\u6c42\u652f\u6301\u533a\u95f4\u4fee\u6539\u548c\u5355\u70b9\u8be2\u95ee\u3002\n\n-----------\n\n### \u89e3\u9898\u601d\u8def\n\n**\u524d\u7f6e\u77e5\u8bc6**\uff1a\n\n- \u6811\u72b6\u6570\u7ec4\u5165\u95e8\u3002\u8be6\u60c5\u70b9[\u8fd9\u91cc](https://www.luogu.com.cn/problemnew/solution/P3374)\u3002\u672c\u9898\u662f\u4e00\u4e2a\u5c0f\u5c0f\u7684\u62d3\u5c55\u800c\u5df2\u3002\n- \u5dee\u5206\u57fa\u7840\u77e5\u8bc6\u3002\n\n\u6211\u4eec\u77e5\u9053\uff0c\u666e\u901a\u7684\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u7684\u662f\u4e00\u4e2a**\u524d\u7f00\u548c**\u6570\u7ec4\uff0c\u652f\u6301**\u5355\u70b9\u4fee\u6539**\u548c**\u533a\u95f4\u67e5\u8be2**\u3002\n\n\u4f46\u662f\u8fd9\u9053\u9898\u76ee\uff0c\u8981\u6211\u4eec\u5b9e\u73b0**\u533a\u95f4\u4fee\u6539**\u548c**\u5355\u70b9\u67e5\u8be2**\u3002\n\n\u5bf9\u4e8e\u533a\u95f4\u4fee\u6539\uff0c\u6709\u4e00\u79cd\u5f88\u66b4\u529b\u601d\u8def\u662f\uff1a\n\n- \u904d\u5386 $[L,R]$ \u7684\u533a\u95f4\uff0c\u6bcf\u6b21\u8fdb\u884c\u4e00\u6b21\u5355\u70b9\u4fee\u6539\u3002\n\n\u7136\u800c\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u52a3\u4e3a $O(n^2\\log n)$\uff0c\u663e\u7136\u8fd9\u662f\u4f1a\u8d85\u65f6\u7684\u3002\n\n\u60f3\u5230\u8fd9\uff0c\u5b66\u8fc7\u7684\u540c\u5b66\u5c31\u80fd\u5f88\u654f\u611f\u7684\u60f3\u5230\uff0c**\u5dee\u5206**\u53ef\u4ee5\u8f7b\u677e\u89e3\u51b3\u3002\n\n----------\n\n**\u63d0\u793a\uff1a\u4e0b\u9762\u5927\u90e8\u5206\u5185\u5bb9\u5173\u4e8e\u5dee\u5206\u3002\u82e5\u60a8\u5df2\u7ecf\u975e\u5e38\u719f\u6089\u8bf7\u8df3\u8fc7\u3002**\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u8bb0\u5dee\u5206\u6570\u7ec4\u4e3a $T$\u3002\n\n\u539f\u6765\u7684\u5e8f\u5217\u4e3a\uff1a\n\n| 1 |2  | 3 | 4 |5  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n\n\u5dee\u5206\u6570\u7ec4\u4e3a\uff1a\n\n| 1 |1  | 1 | 1 |1  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n\n\u5728 $[2,4]$ \u4e4b\u95f4 $+2$\uff0c\u5219\u5e8f\u5217\u4e3a\uff1a\n\n| 1 |4 | 5 | 6 |5  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n\n\u5dee\u5206\u6570\u7ec4\u53d8\u4e3a\uff1a\n\n| 1 |3 | 1 | 1 |-1  |\n| :----------: | :----------: | :----------: | :----------: | :----------: |\n\n\u5bf9\u6bd4\u53d1\u73b0\uff0c\u53ea\u6709 $T_2+2$\uff0c\u4ee5\u53ca $T_5-2$\u3002\u53ea\u7528\u4e86\u4e24\u6b21\u5355\u70b9\u4fee\u6539\u3002\n\n\u63a8\u5e7f\u4e00\u4e0b\uff1a\n\n\u5bf9\u4e8e\u5e8f\u5217 $a_1,a_2,a_3,\\cdots,a_n$\uff0c\u5728\u533a\u95f4 $[L,R]$ \u5185\u52a0\u4e0a $\\Delta$\uff0c\u4e0d\u96be\u53d1\u73b0\uff1a\n\n- $[L,R]$ \u7531\u4e8e\u52a0\u4e0a\u540c\u4e00\u4e2a\u6570\uff0c**\u76f8\u5bf9\u5927\u5c0f\u662f\u4e0d\u53d8**\u7684\uff0c\u56e0\u6b64 $(L,R]$ \u533a\u95f4\u5185\u7684 $T$ \u4e0d\u9700\u8981\u4fee\u6539\u3002\n\n- \u800c $T_L=a_L-a_{L-1}$\uff0c$a_{L-1}$ \u5927\u5c0f\u4e0d\u53d8\uff0c\u53ea\u6709 $a_L$ \u589e\u52a0\u4e86 $\\Delta$\uff0c\u56e0\u6b64 $T_L$ \u589e\u52a0\u4e86 $\\Delta$\u3002\u540c\u7406\uff0c$T_{R+1}$ \u51cf\u5c11 $\\Delta$\u3002\n\n\u901a\u8fc7\u4e0a\u8ff0\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u53ea\u4fee\u6539 $T_L$ \u548c $T_{R+1}$ \u5171\u4e24\u6b21\u5c31\u5b8c\u6210\u4e86 $[L,R]$ \u7684\u533a\u95f4\u4fee\u6539\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u5927\u964d\u4f4e\u3002\n\n\u4e0d\u8fc7\u672c\u9898\u7684\u4fee\u6539\u503c $\\Delta=1$ \u800c\u5df2\u3002\u6211\u4eec\u53ea\u9700\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u8fd9\u4e2a $T$ \u3002\n\n\u4f46\u662f\u5bf9\u4e8e**\u5355\u70b9\u67e5\u8be2**\uff0c\u9700\u8981\u7565\u5fae\u6539\u52a8\u3002\n\n\u6211\u4eec\u76f4\u63a5\u8f93\u51fa`query(x)`\u5373\u53ef\uff0c\u56e0\u4e3a$a_x=\\sum^x_{i=1}T_i$\uff0c\u800c\u6811\u72b6\u6570\u7ec4\u8be2\u95ee\u6070\u597d\u662f**\u5dee\u5206\u6570\u7ec4\u7684\u524d\u7f00\u548c**\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4f9d\u7136\u4e3a $O(n\\log n)$\u3002\n\n----\n\n### \u53c2\u8003\u4ee3\u7801\n\n\u5176\u5b9e\u4e5f\u5c31\u662f\u7565\u52a0\u6539\u52a8\u3002\n\n**\u6ce8\u610f\u6570\u7ec4\u522b\u5f00\u5c0f\u4e86\u3002**\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\n\nconst int MAXN=2e7+5;\nint n,m;\nint tree[MAXN],a[MAXN];\n\ninline int lowbit(const int x)\n{\n\treturn x&(-x);\n}\n\nvoid insert(int x,const int k)\n{\n\twhile(x<=n)\n\t{\n\t\ttree[x]+=k;\n\t\tx+=lowbit(x);\n\t}\n}\n\nint query(int x)\n{\n\tint res=0;\n\twhile(x)\n\t{\n\t\tres+=tree[x];\n\t\tx-=lowbit(x);\n\t}\n\treturn res;\n}\n\nint main(int argc, char const *argv[])\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint opt,x,y,k;\n\t\tcin>>opt>>x;\n\t\tif(opt==0)\n\t\t{\n\t\t\tcin>>y;\n\t\t\tinsert(x,1);\n\t\t\tinsert(y+1,-1);\n\t\t}\n\t\tif(opt==1)\n\t\t cout<<query(x)<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1581687083,
        "uid": 80049,
        "name": "Hexarhy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "\u6811\u72b6\u6570\u7ec4\n\n\u4e00\u5f00\u59cb\u5199\u7684\u662f\u7ebf\u6bb5\u6811\uff0c75ptsMLE\uff0c\u5176\u5b9e\u7ec3\u7ec3\u624b\u633a\u597d\u7684\uff0c~~\u867d\u7136\u53ea\u670975~~\n\n\u5148\u8d34\u4e00\u4e0b\u7ebf\u6bb5\u6811\u4ee3\u7801\uff1a\n```\n#include<map>\n#include<cmath>\n#include<stack>\n#include<queue>\n#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\ntemplate<class Read>void in(Read &x){\n    x=0;\n    int f=0;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        f|=(ch=='-');\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    x=f?-x:x;\n    return;\n}\nint n,m,a[100005],f[40000005],tag[40000005];\ninline int L(int x){\n    return x<<1;\n}\ninline int R(int x){\n    return x<<1|1;\n}\nvoid pushup(int c){\n    f[c]=f[L(c)]+f[R(c)];\n}\nvoid lazy(int l,int r,int c,int s){\n    f[c]+=(r-l+1)*s;\n    tag[c]+=s;\n}\nvoid pushdown(int c,int l,int r){\n    int mid=(l+r)>>1;\n    lazy(l,mid,L(c),tag[c]);\n    lazy(mid+1,r,R(c),tag[c]);\n    tag[c]=0;\n}\nvoid add(int x,int y,int l,int r,int c){\n    if(x<=l&&y>=r){\n        f[c]+=(r-l+1);\n        tag[c]++;\n        return;\n    }\n    pushdown(c,l,r);\n    int mid=(l+r)>>1;\n    if(x<=mid)add(x,y,l,mid,L(c));\n    if(y>mid)add(x,y,mid+1,r,R(c));\n    pushup(c);\n}\nint query(int x,int l,int r,int c){\n    if(x==l&&x==r)return f[c];\n    pushdown(c,l,r);\n    int mid=(l+r)>>1,sum=0;\n    if(x<=mid)sum+=query(x,l,mid,L(c));\n    else sum+=query(x,mid+1,r,R(c));\n    return sum;\n}\nint main(){\n    in(n);in(m);\n    while(m--){\n        int opt;\n        in(opt);\n        if(opt==0){\n            int x,y;\n            in(x);in(y);\n            add(x,y,1,n,1);\n        }\n        if(opt==1){\n            int x;\n            in(x);\n            printf(\"%d\\n\",query(x,1,n,1));\n        }\n    }\n    return 0;\n}\n```\n\nMLE\u4e3b\u8981\u56e0\u4e3af\u548ctag\u4e24\u4e2a4\u5343\u4e07\u6570\u7ec4\uff08\u6b64\u9898\u5185\u5b58125MB\uff0c512MB\u5c31\u591f\u4e86\uff09\n\n\u6240\u4ee5\u8bf7\u51fa\u6811\u72b6\u6570\u7ec4\n\n\u6811\u72b6\u6570\u7ec4\u5176\u5b9e\u5c31\u662f\u7ebf\u6bb5\u6811\u780d\u4e00\u534a\uff0c\u6240\u4ee52\u5343\u4e07\u5c31\u591f\u4e86\uff0c\u800c\u4e14\u4e0d\u9700\u8981tag\u6253\u6807\u8bb0\n\n\u4f46\u6811\u72b6\u6570\u7ec4\u5b9e\u8d28\u4e0a\u662f\u524d\u7f00\u548c\uff0c\u6240\u4ee5\u5e94\u7528\u4e0d\u5982\u7ebf\u6bb5\u6811\u5e7f\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u76f8\u540c\uff0c\u4f18\u52bf\u662f\u6bd4\u7ebf\u6bb5\u6811\u5e38\u6570\u5c0f\uff0c\u5185\u5b58\u5c0f\uff0c\u4ee3\u7801\u597d\u5199\n~~\uff08\u5982\u679c\u5199zkw\u7ebf\u6bb5\u6811\u5f53\u6211\u6ca1\u8bf4\uff09~~\n\n\u6811\u72b6\u6570\u7ec4\u7684\u533a\u95f4\u4fee\u6539\u9700\u8981\u7528\u5230\u5dee\u5206\u601d\u60f3\n\n\u4e3e\u4e2a\u6817\u5b50\uff0c1~5\u533a\u95f4\u52a0\u4e0a3\uff0c\u53ea\u89811\u52a0\u4e0a3,6\u51cf3\u5c31\u884c\u4e86\n\n\u6700\u540e\u7edf\u8ba1\u524d\u7f00\u548c\n\n\u56e0\u4e3a\u6811\u72b6\u6570\u7ec4~~\u81ea\u5e26\u524d\u7f00\u548c~~\uff08\u5b9e\u73b0\u5c31\u662f\u9760\u524d\u7f00\u548c\uff09\n\n\u6240\u4ee5\u76f4\u63a5\u5dee\u5206\u641e\u5c31\u53ef\u4ee5\u4e86\n\n\u57fa\u672c\u4e0a\u7b97\u6a21\u677f\u9898\uff0c\u4e0b\u9762\u662fcode\uff1a\n```\n#include<map>\n#include<cmath>\n#include<stack>\n#include<queue>\n#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\ntemplate<class Read>void in(Read &x){\n    x=0;\n    int f=0;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        f|=(ch=='-');\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    x=f?-x:x;\n    return;\n}\nint n,m,f[20000005];\ninline int lowbit(int x){//\u627ex\u4e8c\u8fdb\u5236\u6700\u540e1\u7684\u4f4d\u7f6e\n    return x&-x;\n}\nvoid add(int x,int y){\n    while(x<=n){//\u4fee\u6539\n        f[x]+=y;\n        x+=lowbit(x);\n    }\n}\nint query(int x){\n    int sum=0;\n    while(x!=0){//\u67e5\u8be2\n        sum+=f[x];\n        x-=lowbit(x);\n    }\n    return sum;\n}\nint main(){\n    in(n);in(m);\n    while(m--){\n        int opt;\n        in(opt);\n        if(opt==0){\n            int x,y;\n            in(x);in(y);\n            add(x,1);//\u4e0a\u9762\u7684\u6817\u5b50\u89e3\u91ca\u4e86\n            add(y+1,-1);\n        }\n        if(opt==1){\n            int x;\n            in(x);\n            printf(\"%d\\n\",query(x));//\u67e5\u8be2\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1565934943,
        "uid": 119120,
        "name": "Waddles",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "\u56e0\u4e3a\u662f\u5355\u70b9\u67e5\u8be2\u4e0e\u533a\u95f4\u4fee\u6539\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5dee\u5206\uff0c\u7ed3\u679c\u65e2\u662f\u524d\u7f00\u548c\n\n\u4fee\u6539\u7684\u65f6\u5019\u6539 l \u548c r+1 \u4e24\u4e2a\u70b9\u3002\n\nl\u4ea7\u751f\u5f71\u54cd\uff0cr+1\u6d88\u9664\u5f71\u54cd\n\n\u7528\u6811\u72b6\u6570\u7ec4\u6216\u7ebf\u6bb5\u6811\u7ef4\u62a4\u3002\n\n\u5176\u5b9e\u4e5f\u53ef\u4ee5\u4e0d\u5dee\u5206\uff0c\u76f4\u63a5\u5206\u5757\u7684qwq\n\n\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u7ebf\u6bb5\u6811\uff0c\u5c31\u6709\u70b9\u50cfusaco\u7684\u4e00\u9053\u9898\uff0c\u7ef4\u62a4lazy\u6807\u8bb0\n\n\u7136\u540e\u4e0d\u65ad\u4e0b\u7a7f\u5373\u53ef\n\n\u6ce8\u610f\u64cd\u4f5c\u662f\u6539\u53d8\u4e0d\u662f\u6e05\u96f6\n\n\u4ee3\u7801\uff1a\n\n```cpp\n// luogu-judger-enable-o2\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 10000005;\nint n;\nstruct Bit {\n\t#define lowbit(x) x & -x\n\tint c[N];\n\tvoid add(int x, int v) {for (; x <= n; x += lowbit(x)) c[x] += v;}\n\tint query(int x) {\n\t\tint res = 0;\n\t\tfor (; x; x -= lowbit(x)) res += c[x];\n\t\treturn res;\n\t}\n} bit;\nint main() {\n\tint m, opt, l, r, x;\n\tscanf(\"%d%d\", &n, &m);\n\twhile (m--) {\n\t\tscanf(\"%d\", &opt);\n\t\tif (!opt) {\n\t\t\tscanf(\"%d%d\", &l, &r);\n\t\t\tbit.add(l, 1); bit.add(r + 1, -1);\n\t\t}\n\t\telse {\n\t\t\tscanf(\"%d\", &x);\n\t\t\tprintf(\"%d\\n\", bit.query(x));\n\t\t}\n\t} \n\treturn 0;\n}\n\n```\n",
        "postTime": 1552647584,
        "uid": 30817,
        "name": "muller",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "\u5148\u770b\u9898\u76ee\u63cf\u8ff0\uff0c\u603b\u7ed3\u8d77\u6765\u5c31\u662f\uff1a\n#### 1. \u533a\u95f4\u4fee\u6539\n#### 2. \u5355\u70b9\u67e5\u8be2\n\n\u4e8e\u662f\uff1a\n\n## \u6807\u51c6\u7684\u7ebf\u6bb5\u6811\u3001\u6811\u72b6\u6570\u7ec4\u9898\u76ee\u3002\n\n\u5899\u88c2\u63a8\u8350\u6811\u72b6\u6570\u7ec4~~\uff08\u53ea\u8981\u80fd\u7528\uff09~~\uff0c\u7801\u91cf\u5c0f\uff0c\u7a7a\u95f4\u548c\u65f6\u95f4\u90fd\u6bd4\u7ebf\u6bb5\u6811\u4f18\n#### \u6240\u4ee5\uff0c\u8fd9\u91cc\u53ea\u8bb2\u6811\u72b6\u6570\u7ec4\n\u8fd9\u91cc\u7684\u6811\u72b6\u6570\u7ec4\u91c7\u7528\u4e86\u5dee\u5206\u548c\u524d\u7f00\u548c\u7684\u601d\u60f3\uff0c\u5229\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u5dee\u5206\u6570\u7ec4\u7684\u524d\u7f00\u548c\uff08\u4e0d\u61c2\u6811\u72b6\u6570\u7ec4\u7684\u51fa\u95e8\u5de6\u8f6c[\u8fd9\u91cc](https://www.luogu.org/problemnew/solution/P3374)\u3002~~\u8bdd\u8bf4\u4f1a\u6811\u72b6\u6570\u7ec4\u7684\u8fd8\u770b\u9898\u89e3\u5e72\u561b~~\uff09\n\n\u4e45\u8fdd\u7684\u653e\u4ee3\u7801\u65f6\u95f4\uff1a\n```cpp\n#include<iostream>\nusing namespace std;\nint n,m;\nlong long c[100000005];\ninline int lowbit(int x){return x&(-x);}//\u6811\u72b6\u6570\u7ec4\u7684\u6807\u5fd7\nvoid add(int x,int t){//\u5355\u70b9\u52a0\uff08\u4e3a\u4ec0\u4e48\u8981t\u770b\u540e\u9762\uff09\n\twhile(x<=n){\n\t\tc[x]+=t;\n\t\tx+=lowbit(x);\n\t}\n}\nlong long sum(int x){//\u6c42\u548c\n\tlong long ret=0;\n\twhile(x>0){\n\t\tret+=c[x];\n\t\tx-=lowbit(x);\n\t}\n\treturn ret;\n}\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>n>>m;\n\tint opt,x,y;\n\tfor(int i=0;i<m;i++){\n\t\tcin>>opt;\n\t\tif(!opt){\n\t\t\tcin>>x>>y;\n\t\t\tadd(x,1);\n\t\t\tadd(y+1,-1);//\u5dee\u5206\uff0c\u7528\u5230\u4e0a\u9762\u7684t\u4e86~\n\t\t}\n\t\telse{\n\t\t\tcin>>x;\n\t\t\tcout<<sum(x)<<endl;\n\t\t}\n\t}\n\treturn 0;\n}//\u5b8c\u7ed3\u6492\u82b1\uff01\n\n```",
        "postTime": 1549002195,
        "uid": 55959,
        "name": "AC_Automation",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e24\u4e2a\u64cd\u4f5c\n\n1. $0\\ x\\ y$ \u5c06$[x,y]$\u533a\u95f4\u5185\u6bcf\u4e2a\u6570\u52a01\n\n2. $1\\ x$\u8be2\u95ee\u7b2c$x$\u6570\u7684\u503c\n\n### \u6b63\u89e3\n\n\u4e0d\u96be\u53d1\u73b0\uff0c$0$\u64cd\u4f5c\u662f\u533a\u95f4\u52a0\u6cd5\uff0c$1$\u64cd\u4f5c\u662f\u5355\u70b9\u6c42\u548c\u3002\u4e8e\u662f\uff0c\u8fd9\u9053\u9898\u5c31\u53d8\u6210\u4e86\u6811\u72b6\u6570\u7ec4\u548c\u7ebf\u6bb5\u6811\u7684\u6a21\u677f\u9898\u3002\n\n\u7531\u4e8e\u7ebf\u6bb5\u6811\u5e38\u6570\u5927\uff0c\u4e0d\u5199\u6807\u8bb0\u6c38\u4e45\u5316\u4f1a\u88ab\u5361\u7a7a\u95f4\u3002\u6240\u4ee5\u6211\u9009\u62e9\u4e86\u4ee3\u7801\u91cf\u8f83\u5c0f\u7684\u6811\u72b6\u6570\u7ec4+\u5dee\u5206~~\uff08\u5176\u5b9e\u6211\u4e0d\u4f1a\u6807\u8bb0\u6c38\u4e45\u5316\uff09~~\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define lowbit(x) x&(-x)\nusing namespace std;\n#define N 20000001\nint tree[N],n,m;\ninline int sum(int x)\n{\n\tint ans;\n\twhile (x)\n\t{\n\t\tans+=tree[x];\n\t\tx-=lowbit(x);\n\t}\n\treturn ans;\n}\ninline void add(int x,int k)\n{\n\twhile (x<=n)\n\t{\n\t\ttree[x]+=k;\n\t\tx+=lowbit(x);\n\t}\n}\nint main()\n{\n\tscanf(\"%d %d\",&n,&m);\n\tfor (int i=1;i<=m;i++)\n\t{\n\t\tint p;\n\t\tscanf(\"%d\",&p);\n\t\tif (p==0)\n\t\t{\n\t\t\tint x,y;\n\t\t\tscanf(\"%d %d\",&x,&y);\n\t\t\tadd(x,1);add(y+1,-1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint x;\n\t\t\tscanf(\"%d\",&x);\n\t\t\tprintf(\"%d\\n\",sum(x));\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1540692890,
        "uid": 68387,
        "name": "lamboo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4939 \u3010Agent2\u3011"
    }
]
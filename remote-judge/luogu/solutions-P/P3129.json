[
    {
        "content": "\u9898\u76ee\uff1ahttps://www.luogu.org/problemnew/show/P3129\n\n\u795e\u5947\u7684\u8d2a\u5fc3\uff0c\u4ee4f[i]\u8868\u793a\u524di\u4e2a\u6bcf\u6b21\u90fd\u51fa\u6bd4\u5bf9\u65b9\u7a0d\u5fae\u5927\u4e00\u70b9\u7684\u724c\uff0c\u6700\u591a\u80fd\u8d62\u51e0\u6b21\n\ng[i]\u8868\u793a\u4ecei-n\u4e2d\u6bcf\u6b21\u51fa\u6bd4\u5bf9\u65b9\u7a0d\u5fae\u5c0f\u4e00\u70b9\u7684\u724c\uff0c\u6700\u591a\u8d62\u51e0\u6b21\u3002\n\nans=max(f[i]+g[i+1]) 0<=i<=n\n\n\u4f46\u662f\u65b9\u6848\u53ef\u80fd\u4f1a\u91cd\u5408\u3002\u4e00\u822c\u770b\u5230\u8fd9\u513f\u5c31\u4f1a\u653e\u5f03\u8d2a\u5fc3\u53bb\u60f3\u522b\u7684\u7b97\u6cd5\u3002\u4f46\u662f\u8fd9\u662f\u53ef\u884c\u7684\n\n1\uff1a\u56e0\u4e3a\u9650\u5236\u6bd4\u539f\u9898\u76ee\u5bbd\uff0c\u6240\u4ee5ans>=\u771f\u5b9e\u7684\u7b54\u6848\n\n2\uff1a\u5bf9\u4e8e\u91cd\u590d\u53d6\u7684\u6570a\uff0c\u5982\u679c\u96c6\u5408\u4e2d\u6709\u4e2a\u6ca1\u53d6\u7684\u6570<a,\u90a3\u4e48\u5728\u7528\u5c0f\u7684\u8d62\u7684\u65f6\u5019\u53ef\u4ee5\u4ee3\u66ffa;\n\n\u5982\u679c>a,\u90a3\u4e48\u5728\u7528\u5927\u7684\u8d62\u65f6\u53ef\u4ee5\u4ee3\u66ffa\n\n\u7528set\u6765\u8bb0\u5f55\u6700\u63a5\u8fd1\u7684\u6570\uff08\u5176\u5b9e\u53ef\u4ee5\u7528\u7ebf\u6bb5\u68112333\uff09\n\n```cpp\n`#include<cstdio>  \n#include<ctime>  \n#include<iostream>  \n#include<algorithm>  \n#include<cstring>  \n#include<set>\n#define N 200005\nusing namespace std;  \nset<int>q1,q2;  \nint a[N],vis[N],n,ans,f[N],g[N];  \ninline int read(){\n    char c=getchar();int tot=1;while ((c<'0'|| c>'9')&&c!='-') c=getchar();if (c=='-'){tot=-1;c=getchar();}\n    int sum=0;while (c>='0'&&c<='9'){sum=sum*10+c-'0';c=getchar();}return sum*tot;}\nint main()\n{  \n    scanf(\"%d\",&n);\n        for (int i=1;i<=n;i++){\n            a[i]=read();vis[a[i]]=1;\n        }  \n        for (int i=1;i<=n*2;i++){\n            if (!vis[i]){\n                q1.insert(i);\n                q2.insert(-i);\n            }\n        }\n    for(int i=1;i<=n;i++){  \n        set<int>::iterator it=q1.lower_bound(a[i]);  \n        if(it!=q1.end())\n                q1.erase(it),f[i]=f[i-1]+1;  \n        else f[i]=f[i-1];  \n    }  \n    for(int i=n;i>=1;i--)\n        {  \n        set<int>::iterator it=q2.lower_bound(-a[i]);  \n        if(it!=q2.end())\n                q2.erase(it),g[i]=g[i+1]+1;  \n        else g[i]=g[i+1];  \n    }\n        ans=g[1];  \n    for(int i=1;i<=n;i++){  \n        ans=max(ans,f[i]+g[i+1]);  \n    }  \n    printf(\"%d\",ans);  \n}  `\n```",
        "postTime": 1514008124,
        "uid": 11837,
        "name": "yukuai26",
        "ccfLevel": 0,
        "title": "\u6d1b\u8c373129bzoj4391"
    },
    {
        "content": "\u8fd9\u9898\u4e4d\u4e00\u773c\u770b\u53bb\u5c31\u4f1a\u5f80\u8d2a\u5fc3\u7684\u65b9\u5411\u60f3,\u800c\u4e14\u5f88\u5bb9\u6613\u60f3\u5230\u7ed3\u8bba\u4f46\u5374\u4e0d\u77e5\u9053\u5b83\u7684\u6b63\u786e\u6027..\n\n\u7ed3\u8bba:\n\n- \u8bb0\u5f55pre[]\u548csuf[]\u5206\u522b\u8868\u793a\u5728\u4e24\u79cd\u89c4\u5219\u4e0b,\u4ece\u524d\u5f80\u540e\u548c\u4ece\u540e\u5f80\u524d\u6570\u6700\u5927\u80fd\u8d62\u7684\u5c40\u6570,\u8fd9\u73a9\u610f\u663e\u7136\u8d2a\u5fc3\u4e00\u4e0b\u9009\u79bb\u5f53\u524d\u5bf9\u624b\u51fa\u724c\u6700\u63a5\u8fd1\u7684\u80fd\u8d62\u7684\u6570\u5c31\u53ef\u4ee5\u4e86\n\n- \u7136\u540eans=max(pre[i]+suf[i+1]) (0<=i<=n)\n\n\n\u6b63\u786e\u6027:\n\n- \u8fd9\u4e2a\u7b56\u7565\u7684\u7591\u60d1\u70b9\u5c31\u5728\u4e8e\u5982\u679cpre\u548csuf\u4e2d\u6709\u4e00\u4e2a\u6570\u51fa\u73b0\u4e86\u4e24\u6b21\u600e\u4e48\u529e\n\n- \u5047\u8bbe\u91cd\u590d\u51fa\u73b0\u7684\u90a3\u4e2a\u6570\u662fx,\u90a3\u4e48\u4e00\u5b9a\u6709\u4e00\u4e2a\u6570y\u540c\u65f6\u6ca1\u6709\u5728\u4e24\u4e2a\u6570\u7ec4\u4e2d\u7528\u5230\n\n- \u5f53x > y\u65f6,pre[]\u4e2dx\u7528\u5230\u7684\u4f4d\u7f6e\u53ef\u4ee5\u7528y\u4ee3\u66ff\n\n- \u5f53x < y\u65f6,\u663e\u7136\u4e5f\u662f\u540c\u7406\u7684.\n\n- \u90a3\u4e48\u5c31\u8bc1\u5b8c\u4e86\n\n\u4e0b\u9762\u662f\u4e11\u964b\u7684\u4ee3\u7801:\n\n```cpp\n//by funtion\n#include<cstdio>\n#include<cstring>\n#include<iomanip>\n#include<iostream>\n#include<algorithm>\n#include<cmath>\n#include<ctime>\n#include<map>\n#include<set>\n#include<vector>\n#include<queue>\n#include<bitset>\n#include<stack>\n#include<cassert>\n#define F first\n#define S second\n#define mp make_pair\n#define pii pair<int,int>\n#define pb push_back\n#define mem(x,y) memset(x,y,sizeof x)\n#define sqr(x) ((x)*(x))\nusing namespace std;\ntypedef long long ll;\ntypedef double db;\nconst int INF=1e9,N=50010 ;\nconst db eps=1e-8;\ninline void read(int &x)\n{\n    x=0; int f=1; char ch=getchar();\n    while( (ch<'0' || ch>'9') && ch!='-') ch=getchar(); if(ch=='-') {f=-1; ch=getchar();}\n    while(ch>='0' && ch <='9') x=x*10+ch-'0',ch=getchar();\n    x*=f;\n}\ninline void read(ll &x)\n{\n    x=0; int f=1; char ch=getchar();\n    while( (ch<'0' || ch>'9') && ch!='-') ch=getchar(); if(ch=='-') {f=-1; ch=getchar();}\n    while(ch>='0' && ch <='9') x=x*10+ch-'0',ch=getchar();\n    x*=f;\n}\n//==========================head template==========================\nint n,ans;\nint tmp[N],b[N],pre[N],suf[N];\nvector<int> a;\nbool used[N<<1];\nmain()\n{\n    read(n); int cnt=0;\n    for(int i=1;i<=n;i++) {read(b[i]); used[b[i]]=1;}\n    for(int i=1;i<=(n<<1);i++) if(!used[i]) {a.pb(i); tmp[++cnt]=i; used[i]=0;}\n    for(int i=1;i<=n;i++)\n    {\n        int pos=lower_bound(a.begin(),a.end(),b[i])-a.begin();\n        if(pos>=a.size()) pre[i]=pre[i-1];\n        else\n        {\n            pre[i]=pre[i-1]+1;\n            a.erase(a.begin()+pos);\n        }\n    }\n    while(a.size()) a.pop_back();\n    for(int i=1;i<=n;i++) a.pb(tmp[i]);\n    if(a.size()>n) while(1);\n    for(int i=n;i>=1;i--)\n    {\n        int pos=upper_bound(a.begin(),a.end(),b[i])-a.begin()-1;\n        if(pos<0 || pos>=a.size()) suf[i]=suf[i+1];\n        else\n        {\n            suf[i]=suf[i+1]+1;\n            a.erase(a.begin()+pos);\n        }\n    }\n    for(int i=0;i<=n;i++)\n        ans=max(ans,pre[i]+suf[i+1]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1514810224,
        "uid": 19390,
        "name": "functionendless",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3129 \u3010[USACO15DEC]\u9ad8\u4f4e\u5361(\u767d\u91d1)High Card Low Card (Platinum)\u3011"
    },
    {
        "content": "# P3129 High Card Low Card\n\n[Link](https://www.luogu.com.cn/problem/P3129)\n\n\u9898\u89e3\u533a\u90fd\u662f\u795e\u4ed9\u4eec\u60f3\u51fa\u6765\u7684\u8d2a\u5fc3\uff0c\u8fd9\u91cc\u8bb2\u4e00\u79cd\u8003\u8bd5\u7684\u65f6\u5019\u60f3\u51fa\u6765\u7684\u7ebf\u6bb5\u6811\u89e3\u6cd5\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u8003\u8651\u53ea\u6709\u201c\u5927\u7684\u8d62\u201d\u4e00\u6761\u89c4\u5219\uff0c\u8fd9\u9053\u9898\u600e\u4e48\u505a\u3002\n\n\u8fd9\u65f6\u6709\u4e00\u4e2a\u663e\u800c\u6613\u89c1\u7684\u8d2a\u5fc3\uff1a\u5bf9\u4e8e\u6bcf\u4e00\u4e2a Bessie \u7684\u724c\uff0c\u627e\u4e00\u4e2a\u6700\u5927\u4f46\u6bd4\u8fd9\u5f20\u724c\u5c0f\u7684\uff0c\u8fd8\u6ca1\u6709\u7528\u8fc7\u7684 Elsie \u7684\u724c\uff0c\u4e0e\u4e4b\u5339\u914d\uff0c\u5f97\u4e00\u5206\u3002\u5982\u679c\u6b64\u65f6\u6ca1\u6709\u66f4\u5c0f\u7684\u724c\uff0c\u5219\u8fd9\u5f20\u724c\u4e0d\u80fd\u5f97\u5206\u3002\n\n\u8fd9\u662f\u4ec0\u4e48\uff1f**\u62ec\u53f7\u5339\u914d\uff01**\n\n![\u56fe\u4e3a\u6837\u4f8b](https://cdn.luogu.com.cn/upload/image_hosting/2m7hndjp.png)\n\n\uff08\u4e0a\u56fe\u4e3a\u6837\u4f8b\u4e2d\u76841,8,4,3\uff09\n\n\u5982\u679c\u6211\u4eec\u628a Elsie \u7684\u724c\u770b\u6210\u5de6\u62ec\u53f7\uff0cBessie \u7684\u724c\u770b\u6210\u53f3\u62ec\u53f7\uff0c\u90a3\u4e48\u539f\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u6c42\u6700\u591a\u5339\u914d\u7684\u62ec\u53f7\u7684\u95ee\u9898\u3002\u8fd9\u4e2a\u95ee\u9898\u53ef\u4ee5\u7b80\u5355\u5730\u7528\u7ebf\u6bb5\u6811\u5b9e\u73b0\uff0c\u5177\u4f53\u89c1\u4ee3\u7801\u3002\n\n\u5982\u679c\u8003\u8651\u201c\u5c0f\u7684\u8d62\u201d\u7684\u6761\u4ef6\uff0c\u90a3\u4e48\u53ef\u4ee5\u628a Elsie \u7684\u724c\u770b\u6210\u53f3\u62ec\u53f7\uff0cBessie \u7684\u770b\u6210\u5de6\u62ec\u53f7\uff0c\u548c\u524d\u9762\u662f\u4e00\u6837\u7684\u3002\n\n\u800c\u4e14\uff0c\u5047\u8bbe Bessie \u9009\u62e9\u5728\u7b2c $k$ \u8f6e\u53d8\u6362\u89c4\u5219\uff0c\u90a3\u4e48\u663e\u7136 Bessie \u4f1a\u628a\u524d $k-1$ \u5927\u7684\u724c\u653e\u5728\u524d $k-1$ \u8f6e\u3002\n\n\u7136\u540e\uff0c\u4ece\u524d\u5f80\u540e\u626b\u4e00\u904d\uff0c\u6bcf\u6b21\u628a Elsie \u5f53\u524d\u8981\u51fa\u7684\u724c\u548c Bessie \u5f53\u524d**\u6700\u5927\u7684\u724c**\u52a0\u8fdb\u7ebf\u6bb5\u6811\uff0c\u6211\u4eec\u5c31\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$ \u6c42\u51fa\u4e86\u524d $i$ \u8f6e\u4e0d\u6539\u53d8\u89c4\u5219\u7684\u7b54\u6848\u3002\u540c\u6837\uff0c\u4ece\u540e\u5f80\u524d\u626b\u4e00\u904d\uff0c\u6211\u4eec\u4e5f\u6c42\u51fa\u4e86\u540e $i$ \u8f6e\u6539\u53d8\u4e86\u89c4\u5219\u7684\u7b54\u6848\u3002\n\n\u7136\u540e\u5408\u5e76\u7b54\u6848\u5373\u53ef\u3002\n\n## Code\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\nusing namespace std;\nconst int N=1e5+11;\nint n;\nint a[N],in[N];\nint b[N],cntb;\nstruct node{\n\tint el,er,all;\n/*  \u7ebf\u6bb5\u6811\u7684\u8282\u70b9\n    el,er\u662f\u8fd9\u4e2a\u533a\u95f4\u5185\u672a\u5339\u914d\u7684\u5de6/\u53f3\u62ec\u53f7\u6570\n    all\u662f\u533a\u95f4\u5185\u5df2\u5339\u914d\u62ec\u53f7\u7684\u5bf9\u6570   */\n};\nnode t[N<<2];\nvoid psu(int p){\n\t//\u4e0a\u4f20\n\tint com=min(t[p<<1].el,t[p<<1|1].er);//\u5de6\u513f\u5b50\u7684\u2018(\u2019\u548c\u53f3\u513f\u5b50\u7684\u2018)\u2019\u5339\u914d\n\tt[p].all=t[p<<1].all+t[p<<1|1].all+com;\n\tt[p].el=t[p<<1].el+t[p<<1|1].el-com;\n\tt[p].er=t[p<<1].er+t[p<<1|1].er-com;\n}\nvoid c(int l,int r,int p,int tt,int typ){\n\t//\u4e0a\u4f20\uff0c\u8868\u793a\u5728\u533a\u95f4[l,r]\u4e2d\u5728tt\u4f4d\u7f6e\u6dfb\u52a0\u4e00\u4e2a\u62ec\u53f7\n\t//typ: 1=\u5de6\u62ec\u53f7 2=\u53f3\u62ec\u53f7\n\tif(l==r){\n\t\tif(typ==1) t[p]={1,0,0};\n\t\telse t[p]={0,1,0};\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tif(tt<=mid){\n\t\tc(l,mid,p<<1,tt,typ);\n\t}else{\n\t\tc(mid+1,r,p<<1|1,tt,typ);\n\t}\n\tpsu(p);\n}\nint ansl[N],ansr[N];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\tin[a[i]]=1;\n\t}\n\tfor(int i=n*2;i>=1;i--){\n\t\tif(!in[i]) b[++cntb]=i;\n        //\u5904\u7406\u51fa Bessie \u7684\u724c\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tc(1,n*2,1,a[i],1); //\u5de6\u62ec\u53f7\n\t\tc(1,n*2,1,b[i],2); //\u53f3\u62ec\u53f7\n\t\tansl[i]=t[1].all; //\u8bb0\u5f55\u5de6\u4fa7\u7684\u7b54\u6848\n\t}\n\tfor(int i=1;i<(N<<2);i++){\n\t\tt[i]={0,0,0};\n\t}\n\tfor(int i=n;i>=1;i--){\n\t\tc(1,n*2,1,a[i],2); //\u53f3\u62ec\u53f7\n\t\tc(1,n*2,1,b[i],1); //\u5de6\u62ec\u53f7\n\t\tansr[i]=t[1].all; //\u8bb0\u5f55\u53f3\u4fa7\u7684\u7b54\u6848\n\t}\n\tint ans=0;\n\tfor(int i=0;i<=n;i++){\n\t\tans=max(ans,ansl[i]+ansr[i+1]);//\u5408\u5e76\n\t}\n\tcout<<ans;\n}\n```",
        "postTime": 1667918196,
        "uid": 238300,
        "name": "lichenghan",
        "ccfLevel": 6,
        "title": "P3129\u9898\u89e3"
    },
    {
        "content": "## Problem\n\n[\u81ea\u5df1\u770b](https://www.luogu.com.cn/problem/P3129)\n\n## Solution\n\n\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5c3d\u53ef\u80fd\u7684\u6bd4\u5bf9\u65b9\u5927\uff0c\u5c31\u5c3d\u91cf\u51fa\u6070\u597d\u80fd\u538b\u6389\u5bf9\u65b9\u7684\u6700\u5c0f\u7684\u724c\u3002\n\n\u5982\u679c\u5e0c\u671b\u5c3d\u53ef\u80fd\u51fa\u7684\u6bd4\u5bf9\u65b9\u5c0f\uff0c\u5c31\u5c3d\u91cf\u51fa\u6070\u597d\u80fd\u538b\u6389\u5bf9\u65b9\u7684\u6700\u5927\u7684\u724c\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u8981\u5904\u7406\u524d $k$ \u8f6e\u5e0c\u671b\u5c3d\u53ef\u80fd\u6bd4\u5bf9\u65b9\u5927\uff0c\u80fd\u8d62\u7684\u8f6e\u6570\uff0c\u8fd8\u6709\u540e $k$ \u8f6e\u5e0c\u671b\u5c3d\u53ef\u80fd\u6bd4\u5bf9\u65b9\u5c0f\uff0c\u80fd\u8d62\u7684\u8f6e\u6570\u3002\n\n\u8fd9\u91cc $k$ \u53d6 $1\\sim n$\u3002\n\n\u53d1\u73b0\uff0c\u6211\u4eec\u53ea\u8981\u627e\u524d\u9a71\u548c\u540e\u7ee7\u5c31\u884c\uff0c\u7528 `set` \u7684 `lower_bound` \u5c31\u884c\u3002\n\n\uff08\u5bf9\u4e8e\u524d\u9a71\uff0c\u5168\u90e8\u53d6\u6210\u8d1f\u6570\u5c31\u8f6c\u5316\u6210\u540e\u7ee7\u4e86\uff09\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nconst int N=50005;\nint n,a[N];\nbool vis[2*N];\nset<int> s1,s2;\nint pre[N],suc[N];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++) \n\t{\n\t\tscanf(\"%d\",&a[i]);\n\t\tvis[a[i]]=1;\n\t}\n\tpre[0]=suc[n+1]=0;\n\tfor(int i=1;i<=2*n;i++)\n\t{\n\t\tif(!vis[i])\n\t\t{\n\t\t\ts1.insert(i);\n\t\t\ts2.insert(-i);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tset<int>::iterator it=s1.lower_bound(a[i]);\n\t\tif(it!=s1.end()) \n\t\t{\n\t\t\ts1.erase(it);\n\t\t\tpre[i]=pre[i-1]+1;\n\t\t}\n\t\telse pre[i]=pre[i-1];\n\t}\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tset<int>::iterator it=s2.lower_bound(-a[i]);\n\t\tif(it!=s2.end()) \n\t\t{\n\t\t\ts2.erase(it);\n\t\t\tsuc[i]=suc[i+1]+1;\n\t\t}\n\t\telse suc[i]=suc[i+1];\n\t}\n\tint ans=0;\n\tfor(int i=0;i<=n;i++) ans=max(ans,pre[i]+suc[i+1]);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1653099443,
        "uid": 148507,
        "name": "_Imaginary_",
        "ccfLevel": 0,
        "title": "P3129 \u9898\u89e3"
    },
    {
        "content": "## \u9898\u76ee\n\n[\u6211\u76f8\u4fe1\u4f60\u4e0d\u662f\u6587\u76f2](https://www.luogu.com.cn/problem/P3129)\n\n## \u89e3\u6cd5\n\n\u5047\u8bbe\u7b2c $i+1$ \u53d8\u89c4\u5219\u3002\n\n\u6211\u4eec\u53ea\u8981\u6bcf\u4e00\u8f6e\u6253\u51fa\u6070\u597d\u6bd4\u5bf9\u624b\u5927\u7684\u6700\u5c0f\u7684\u724c\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5c31\u6253\u6700\u5c0f\u7684\u724c\uff0c\u8fd9\u6837\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\n\n\u53e6\u4e00\u79cd\u89c4\u5219\u5219\u5c06\u5927\u5c0f\u53cd\u8fc7\u6765\u3002\n\n\u8003\u8651\u5904\u7406\u51fa\u6bcf\u4e2a\u524d\u7f00\u7684\u6700\u591a\u80dc\u573a\u548c\u6bcf\u4e2a\u540e\u7f00\u7684\u6700\u591a\u80dc\u573a\u3002\n\n\u8fd9\u4e24\u4e2a\u662f\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u4ee5\u7ef4\u62a4\u524d\u7f00\u4e3a\u4f8b\u3002\n\n~~\u8f93\u7684\u573a\u7ed9\u5565\u90fd\u884c\uff0c\u6211\u4eec\u5148\u4e0d\u7ba1~~\n\n\u8d62\u7684\u573a\uff0c\u6211\u4eec\u628a\u4ed6\u653e\u5927\u4e5f\u662f\u6ca1\u6709\u5173\u7cfb\u7684\u3002\n\n**So**\n\n\u6211\u4eec\u5148\u5047\u8bbe\u6240\u6709\u724c\u90fd\u53ef\u4ee5\u5728\u5de6\u8fb9\u51b3\u7b56\u3002\n\n\u8fd9\u6837\u7684\u8bdd\u5c31\u53ef\u4ee5\u4ece\u524d\u5f80\u540e\u53d6\u6070\u597d\u5927\u4e8e\u7684\u5f97\u5230\u80dc\u573a\u3002\n\n\u4f46\u662f\u5bf9\u4e8e\u4e00\u4e2a\u4ee5 $i$ \u4e3a\u5206\u5272\u7684\u51b3\u7b56\uff0c\u6211\u4eec\u5728\u524d $i$ \u573a\u4e00\u5b9a\u8981\u53d6\u6700\u5927\u7684 $i$ \u4e2a\u3002\n\n\u6b64\u65f6\u6211\u4eec\u628a\u6240\u6709\u53d6\u7684\u5c0f\u7684\u53d8\u6210\u524d $i$ \u4e2a\u5373\u53ef\u3002\n\n\u540e\u7f00\u7c7b\u4f3c\u3002\n\n\u590d\u6742\u5ea6 $O(n \\log n)$ \u3002\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\n\n#define int long long\n\n#define pb(x) push_back(x)\n\n#define rep(i,l,r) for(int i=l;i<=r;i++)\n#define lep(i,l,r) for(int i=l;i>=r;i--)\n\n#define fan putchar('\\n')\n#define fak putchar(' ')\n\n// #pragma GCC optimize(2,3,\"Ofast\",\"inline\")\n\nusing namespace std;\n\ninline int read() {\n\tint X=0; bool flag=1; char ch=getchar();\n\twhile(ch<'0'||ch>'9') {if(ch=='-') flag=0; ch=getchar();}\n\twhile(ch>='0'&&ch<='9') {X=(X<<1)+(X<<3)+ch-'0'; ch=getchar();}\n\tif(flag) return X;\n\treturn ~(X-1);\n}\ninline void write(int X) {\n\tif(X<0) {X=~(X-1); putchar('-');}\n\tif(X>9) write(X/10);\n\tputchar(X%10+'0');\n}\n\nint n;\nint a[60000];\nint b[60000<<1];\nint f[60000];\nint g[60000];\nint ans;\nset<int> A,B;\n\nvoid solve(){\n\tn=read();\n\trep(i,1,n)a[i]=read(),b[a[i]]=1;\n\trep(i,1,n<<1)if(!b[i])A.insert(i),B.insert(-i);\n\trep(i,1,n){\n\t\tf[i]=f[i-1];\n\t\tauto t=A.lower_bound(a[i]);\n\t\tif(t!=A.end())A.erase(t),f[i]++;\n\t}\n\tlep(i,n,1){\n\t\tg[i]=g[i+1];\n\t\tauto t=B.lower_bound(-a[i]);\n\t\tif(t!=B.end())B.erase(t),g[i]++;\n\t\tans=max(ans,f[i]+g[i+1]);\n\t}\n\tcout<<max(ans,g[1]);\n}\n\nsigned main(){\n\tsolve();\n\tgetchar();\n\treturn 0;\n}\n```\n",
        "postTime": 1646729165,
        "uid": 484784,
        "name": "_YyD_",
        "ccfLevel": 6,
        "title": "P3129 [USACO15DEC]High Card Low Card P"
    },
    {
        "content": "\u8003\u8651\u6ca1\u6709\u7279\u6b8a\u6743\u5229\uff0c\u600e\u6837\u5b89\u6392\u624d\u80fd\u8d62\u5f97\u6700\u591a\uff1a\n\n\u6bcf\u6b21\u51fa\u6bd4\u5bf9\u65b9\u7684\u724c\u5927\uff0c\u4e14\u6700\u63a5\u8fd1\u7684\u724c(\u51fa\u592a\u5927\u7684\u6d6a\u8d39\uff0c\u51fa\u592a\u5c0f\u7684\u8981\u8f93)\u3002\n\n\u5982\u679c\u6ca1\u6709\u6bd4\u5bf9\u65b9\u7684\u724c\u5927\u7684\u724c\uff0c\u5c31\u727a\u7272\u6700\u5c0f\u7684\u724c\u5e26\u8d70\u5bf9\u9762\u7684\u724c(\u53cd\u6b63\u6253\u4e0d\u8d62\uff0c\u5c0f\u7684\u6362\u5927\u7684\uff0c\u7a33\u8d5a)\u3002\n\n\u5982\u679c\u6709\u7279\u6b8a\u6743\u529b\u5462?\n\n\u8003\u8651\u628a\u5bf9\u65b9\u51fa\u724c\u7684\u987a\u5e8f\u5206\u6210\u4e24\u4e2a\u5e8f\u5217\uff0c\u65ad\u70b9\u4e3a$k$\u3002\n\n\u6211\u4eec\u8981\u5728$1-k$\u4e2d\u5c3d\u53ef\u80fd\u6bd4\u5bf9\u9762\u5927\uff0c$k+1-n$\u4e2d\u5c3d\u53ef\u80fd\u6bd4\u5bf9\u9762\u5c0f\u3002\n\n\u6839\u636e\u8d2a\u5fc3\u7b56\u7565\uff0c\u6211\u4eec\u4f1a\u5728$1-k$\u5c3d\u91cf\u51fa\u5927\u724c\uff0c$k+1-n$\u5c3d\u91cf\u51fa\u5c0f\u724c\uff0c\u65e0\u6cd5\u6ee1\u8db3\u727a\u7272\u4e00\u5f20\u6700\u540e\u6ca1\u7528\u7684\u724c\u3002\n\n\u6211\u4eec\u65e0\u6cd5\u77e5\u9053\u6700\u540e\u90a3\u4e9b\u724c\u88ab\u727a\u7272\uff0c\n\n\u4f46$1-k$\u4e2d\u8d62\u7684\u724c\uff0c$k+1-n$\u4e2d\u8d62\u7684\u724c\uff0c$1-n$\u4e2d\u727a\u7272\u7684\u724c\u7684\u5e76\u96c6\u4e00\u5b9a\u662f\u5f00\u59cb\u65f6\u7684\u624b\u724c\u3002\n\n\u679a\u4e3e\u65ad\u70b9\u5206\u522b\u8ba1\u7b97\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(\u8fc7\u4e0d\u4e86)$\uff0c\u8003\u8651\u4f18\u5316\u3002\n\n\u5b9a\u4e49$win[i]$\u8868\u793a\u4ee5$i$\u4e3a\u65ad\u70b9\uff0c$1-i$\u6700\u591a\u8d62(\u70b9\u6570\u5927)\u591a\u5c11\u5c40\u3002\n\n\u5b9a\u4e49$lose[i]$\u8868\u793a\u4ee5$i$\u4e3a\u65ad\u70b9\uff0c$i+1-n$\u6700\u591a\u201c\u8f93\u201d(\u70b9\u6570\u5c0f)\u591a\u5c11\u5c40\u3002\n\n\u53ef\u4ee5\u7528$set$\u5728\u7ebf\u6027\u590d\u6742\u5ea6\u5185\u5904\u7406\u51fa\u4e24\u4e2a\u6570\u7ec4\u3002\n\n\u4e3a\u5565\u7528$set$\uff1f\u65e0\u91cd\u6709\u5e8f\u96c6\u8fd8\u81ea\u5e26$lower\\_bound$\u67e5\u540e\u7ee7\u3002\n\n\u5f53\u7136$dalao$\u4eec\u60f3\u6572\u5e73\u8861\u6811\u4e5f\u53ef\u4ee5$ORZ$\u3002\n\n\u65ad\u70b9\u4e3a$i$\u65f6\uff0c\u6700\u591a\u83b7\u80dc\u5c40\u6570\u4e3a$win[i]+lose[i+1]\\ \\ \\ i\\in [1,n]$\n\n\u5faa\u73af\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\u3002\n```cpp\n#include<bits/stdc++.h>\n#define maxn 100005\nusing namespace std;\ninline int read(){\n\tchar ch=getchar();int s=0,w=1;\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){s=(s<<1)+(s<<3)+ch-48;ch=getchar();}\n\treturn s*w;\n}\nint n;\nint a[maxn];\nint card[maxn];\nint win[maxn];\nint lose[maxn];\nset<int> s;\nint main(){\n\t//freopen(\"card.in\",\"r\",stdin);\n\t//freopen(\"card.out\",\"w\",stdout);\n\tn=read();\n\tfor(int i=1;i<=n;i++){\n\t\ta[i]=read();\n\t\tcard[a[i]]=1;\n\t}\n\tfor(int i=1;i<=2*n;i++){\n\t\tif(!card[i]) s.insert(i);\n\t} \n\tfor(int i=1;i<=n;i++){\n\t\tset<int>::iterator it;\n\t\tit=s.upper_bound(a[i]);\n\t\tif(it==s.end()) win[i]=win[i-1];\n\t\telse{\n\t\t\twin[i]=win[i-1]+1;\t\n\t\t\ts.erase(it);\n\t\t}\n\t}\n\tfor(int i=1;i<=2*n;i++){\n\t\tif(!card[i]) s.insert(i);\n\t} \n\tfor(int i=n;i>=1;i--){\n\t\tset<int>::iterator it;\n\t\tit=--s.upper_bound(a[i]);\n\t\tif(it==s.end()) lose[i]=lose[i+1];\n\t\telse{\n\t\t\tlose[i]=lose[i+1]+1;\n\t\t\ts.erase(it);\t\n\t\t}\n\t}\n\tint ans=0;\n\tfor(int i=0;i<=n;i++){\n\t\tans=max(ans,win[i]+lose[i+1]);\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1572574614,
        "uid": 111095,
        "name": "Epworth",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3129 \u3010[USACO15DEC]\u9ad8\u4f4e\u5361(\u767d\u91d1)High Card Low Card (Platinum)\u3011"
    },
    {
        "content": "\u601d\u8def\u548c\u697c\u4e0b\u90fd\u4e00\u6837\uff0cset\u7ef4\u62a4\u5c31\u597d\uff0c\u4f46\u662f\u5b58\u5165\u7b2c\u4e8c\u4e2aset\u7684\u65f6\u5019\uff0c\u6211\u6ca1\u6709\u5b58\u8d1f\u503c\uff0c\u53ea\u662f\u5728\u67e5\u8be2\u7684\u65f6\u5019it--\uff0c\u56e0\u4e3a\u5982\u679c\u4e0d--\uff0c\u90a3\u4e48\u67e5\u5230\u7684\u662f\u5927\u4e8e\u7684\u7b2c\u4e00\u4e2a\uff0c--\u540e\u5c31\u662f\u5c0f\u4e8e\u5b83\u7684\u6700\u5927\u503c\u4e86\uff08\u6211\u795e\u5947\u7684\u7801\u98ce2333\u9003\uff09\n```cpp\n#include<set>\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nconst int M=100500;\nset<int>s,t;\nset<int>::iterator it;\nint n,ans=0;\nint a[M],b[M],f[M],g[M];\nbool judf(int i)\n{\n\tit=s.lower_bound(a[i]);\n\treturn (it!=s.end());\n}\nbool judg(int i)\n{\n\tit=t.lower_bound(a[i]);\n\tit--;\n\treturn (it!=t.end()); \n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]),b[a[i]]=1;\n\tfor (int i=1;i<=2*n;i++)\n\t\tif (!b[i]) s.insert(i),t.insert(i);\n\tfor (int i=1;i<=n;i++)\n\t\tif (judf(i)) s.erase(it),f[i]=f[i-1]+1;\n\t\t\telse f[i]=f[i-1];\n\tfor (int i=n;i>=1;i--)\n\t\tif (judg(i)) t.erase(it),g[i]=g[i+1]+1;\n\t\t\telse g[i]=g[i+1];\n\tfor (int i=0;i<=n;i++) ans=max(ans,f[i]+g[i+1]);\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1528947490,
        "uid": 71558,
        "name": "AcerMo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3129 \u3010[USACO15DEC]\u9ad8\u4f4e\u5361(\u767d\u91d1)High Card Low Card (Platinum)\u3011"
    },
    {
        "content": "## \u9898\u76ee\u603b\u7ed3\n\n\u8d1d\u897f\u548c\u5979\u7684\u670b\u53cb\u827e\u5c14\u897f\u6b63\u5728\u73a9\u8fd9\u4e2a\u7b80\u5355\u7684\u7eb8\u724c\u6e38\u620f\u3002\u6e38\u620f\u67092N\u5f20\u724c\uff0c\u724c\u4e0a\u7684\u6570\u5b57\u662f1\u52302N\u3002\u628a\u8fd9\u4e9b\u724c\u5206\u6210\u4e24\u4efd\uff0c\u8d1d\u897f\u6709N\u5f20\uff0c\u827e\u5c14\u897f\u6709\u53e6\u5916N\u5f20\u3002\u63a5\u4e0b\u6765\u5979\u4eec\u8fdb\u884cN\u8f6e\u51fa\u724c\uff0c\u6bcf\u6b21\u5404\u51fa\u4e00\u5f20\u724c\u3002\u4e00\u5f00\u59cb\uff0c\u8c01\u51fa\u7684\u724c\u4e0a\u7684\u6570\u5b57\u5927\uff0c\u8c01\u5c31\u83b7\u5f97\u8fd9\u4e00\u8f6e\u7684\u80dc\u5229\u3002\u8d1d\u897f\u6709\u4e00\u4e2a\u7279\u6b8a\u6743\u5229\uff0c\u5979\u53ef\u4ee5\u5728\u4efb\u610f\u4e00\u4e2a\u65f6\u523b\u628a\u539f\u672c\u6570\u5b57\u5927\u7684\u83b7\u80dc\u7684\u89c4\u5219\u6539\u6210\u6570\u5b57\u5c0f\u7684\u83b7\u80dc\uff0c\u8fd9\u4e2a\u6539\u53d8\u5c06\u4f1a\u4e00\u76f4\u6301\u7eed\u5230\u6e38\u620f\u7ed3\u675f\u3002\u7279\u522b\u7684\uff0c\u8d1d\u897f\u53ef\u4ee5\u4ece\u7b2c\u4e00\u8f6e\u5f00\u59cb\u5c31\u4f7f\u7528\u5c0f\u724c\u83b7\u80dc\u7684\u89c4\u5219\uff0c\u4e5f\u53ef\u4ee5\u76f4\u5230\u6700\u540e\u4e00\u8f6e\u90fd\u8fd8\u6742\u4f7f\u7528\u5927\u724c\u83b7\u80dc\u7684\u89c4\u5219\u3002\n\n\u73b0\u5728\uff0c\u8d1d\u897f\u5df2\u7ecf\u77e5\u9053\u4e86\u827e\u5c14\u897f\u51fa\u724c\u7684\u987a\u5e8f\uff0c\u5979\u60f3\u77e5\u9053\u5979\u6700\u591a\u80fd\u591f\u8d62\u591a\u5c11\u8f6e\u3002\n\n## \u6570\u636e\u8303\u56f4\n\nN<=50000\n\n## \u89e3\u9898\u601d\u8def\n\n\u8d2a\u5fc3\uff0c\u80fd\u51fa\u724c\u5c31\u51fa\u724c\uff0cans\u4e3a\u524d\u7f00\u548c\u540e\u7f00\u7684\u6700\u5927\u503c\uff1b\n\n\u4e3a\u4ec0\u4e48\u524d\u8fb9\u4e0d\u5f71\u54cd\u540e\u8fb9\uff1f\n\n\u524d\u8fb9\u51fa\u6700\u5927\u7684\uff0c\u540e\u8fb9\u51fa\u6700\u5c0f\u7684\uff0c\u52a0\u8d77\u6765\u662f\u6574\u4e2a\u7684\uff1b\n\n## \u6613\u9519\u8bef\u533a\n\n1. \u4e0d\u8981\u778e\u7528pushback\uff0cvector\u4e0b\u6807\u4ece0\u5f00\u59cb\uff1b\n\n2. \u662f$f[i]+g[i+1]$\uff0c\u4e0d\u662f$f[i]+g[i]$\uff1b\n\n3. \u6c42ans\u65f6\u4ece0\u5faa\u73af\u5230n\uff1b\n\n## \u4ee3\u7801\u5c55\u793a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<list>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<deque>\nusing namespace std;\n#define ll long long\n#define inf 0x3f3f3f3f\n#define ri register int\n#define il inline\n#define fi first\n#define se second\n#define mp make_pair\n#define pi pair<int,int>\n#define mem0(x) memset((x),0,sizeof (x))\n#define mem1(x) memset((x),0x3f,sizeof (x))\nil char gc() {\n    static const int BS = 1 << 22;\n    static unsigned char buf[BS], *st, *ed;\n    if (st == ed) ed = buf + fread(st = buf, 1, BS, stdin);\n    return st == ed ? EOF : *st++;\n}\n#define gc getchar\ntemplate<class T>void in(T &x)\n{\n    x = 0; bool f = 0; char c = gc();\n    while (c < '0' || c > '9') {if (c == '-') f = 1; c = gc();}\n    while ('0' <= c && c <= '9') {x = (x << 3) + (x << 1) + (c ^ 48); c = gc();}\n    if (f) x = -x;\n}\n#undef gc\nvoid out(int x) {\n    if (x < 0) putchar('-'), x = -x;\n    if (x > 9) out(x / 10);\n    putchar(x % 10 + '0');\n}\n#define N 50010\nvector<int>e;\nset<int>b, c;\nset<int>::iterator it;\nint f[N], g[N];\nint n, ans;\nsigned main() {\n    in(n);\n    e.push_back(0);\n    for (ri i = 1; i <= (n << 1); ++i) b.insert(i);\n    for (ri i = 1, t; i <= n; ++i) {\n        in(t);\n        e.push_back(t);\n        b.erase(t);\n    }\n    c = b;\n    for (ri i = 1; i <= n; ++i) {\n        f[i] = f[i - 1];\n        if ((it = b.upper_bound(e[i])) != b.end()) {\n            f[i]++;\n            b.erase(it);\n        }\n    }\n    for (ri i = n; i >= 1; --i) {\n        g[i] = g[i + 1];\n        if ((it = c.lower_bound(e[i])) != c.begin()) {\n            g[i]++;\n            c.erase(--it);\n        }\n    }\n    for (ri i = n; i >= 0; --i) {\n        ans = max(ans, f[i] + g[i + 1]);\n    }\n    printf(\"%d\", ans);\n    return 0;\n}\n/*\nint f[N];\nint find(int x){\n    return x==f[x]?x:f[x]=find(f[x]);\n}\nbool cmpy(int x,int y){\n    int fx=find(x),fy=find(y);\n    if(fx==fy) return 0;\n    if(fy>fx) f[fy]=fx;\n    else f[fx]=fy;\n    return 1;\n}\n*/\n/*\nint v[M], u[M], w[M], nx[M];\nint cnt, head[N];\nil void add(int uu, int vv, int ww) {\n    u[++cnt] = uu, v[cnt] = vv, w[cnt] = ww, nx[cnt] = head[uu];\n    head[uu] = cnt;\n}\n*/\n/*\nstruct Edge {\n    int u,v,w,nx;\n    Edge() {}\n    Edge(int uu,int vv,int ww,int nxt) {\n        u=uu,v=vv,w=ww,nx=nxt;\n    }\n    friend bool operator<(const Edge& a,const Edge& b) {\n        return a.w<b.w;\n    }\n} edge[M];\nint cnt,head[M];\nil void add(int u,int v,int w) {\n    edge[++cnt]=Edge(u,v,w,head[u]);\n    head[u]=cnt;\n}\n*/\n```",
        "postTime": 1528902340,
        "uid": 58302,
        "name": "i207M",
        "ccfLevel": 0,
        "title": "\u9ad8\u4f4e\u5361-P3129-\u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "\u8fd9\u9053\u8d2a\u5fc3\u8fd8\u771f\u7684\u6709\u70b9\u628a\u62116\u5230\u4e86\u3002\u3002\u3002\n\n\u5982\u679c\u6309\u7167\u7530\u5fcc\u8d5b\u9a6c\u7684\u903b\u8f91\u4e4b\u7c7b\u7684\n\n\u5f88\u5bb9\u6613\u60f3\u5230 \u8981\u5927\u7684\u8d62\u5f97\u65f6\u5019 \u9009\u4e00\u4e2a\u521a\u597d\u6bd4\u4ed6\u5927\u4e00\u70b9\u7684\u5c31\u597d \u5c0f\u7684\u65f6\u5019\u540c\u7406 \u9009\u4e00\u4e2a\u521a\u597d\u5c0f\u4e00\u70b9\u7684\n\n\u90a3\u4e48\u6211\u4eec\u7528set\u524d\u540e\u641e\u4e00\u4e0b front[i]\u5c31\u662f\u5927\u7684\u8d62 1\u5230i\u8d62\u6700\u591a\u7684\u76d8\u6570 behind[i]\u540c\u7406 \u4ece\u540e\u5f80\u524d n\u5230i \u5c0f\u7684\u8d62\n\n\u7b54\u6848\u5c31max(f[i]+g[i+1])  \u7136\u800c\u6211\u77e5\u9053\u4f60\u60f3\u95ee\u6211\u9009\u91cd\u590d\u600e\u4e48\u529e\uff1f\n\n\u8fd9\u91cc\u6709\u4e2a\u8bc1\u660e\uff1a \u5982\u679c\u6709\u4e00\u4e2a\u6570a\u7528\u4e86\u4e24\u6b21 \u90a3\u4e48\u5047\u8bbe\u6ca1\u7528\u7684\u90a3\u4e2a\u6570b<a \u90a3\u4e48\u5728\u8f83\u5c0f\u8d62\u65f6\u5019\u53ef\u4ee5\u66ff\u6362a \u53cd\u4e4b\u4ea6\u7136\n\n\u5237\u8bbf\u95ee\u91cf\u8d70\u8d77...\uff08\u6342\u8138\uff09<http://blog.csdn.net/cgh\\_andy/article/details/53011315>\n",
        "postTime": 1478088853,
        "uid": 2637,
        "name": "cghAndy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3129 \u3010[USACO15DEC]\u9ad8\u4f4e\u5361(\u767d\u91d1)High Card Low Card (Platinum)\u3011"
    },
    {
        "content": "## \u505a\u6cd5\n\n\u8f83\u4e3a\u7b80\u5355\u7684\u8d2a\u5fc3\u3002\n\n\u5148\u8003\u8651\u4e0d\u5b58\u5728\u7279\u6b8a\u6743\u529b\uff0c\u5373\u6bcf\u6b21\u90fd\u662f\u5927\u724c\u83b7\u80dc\u3002\u5047\u8bbe\u8fd9\u6b21\u5bf9\u65b9\u51fa\u7684\u662f $a_i$\u3002\u5206\u60c5\u51b5\u8ba8\u8bba\uff1a\n\n- \u82e5 $a_i$ \u662f\u8fd8\u6ca1\u6709\u6253\u51fa\u7684\u724c\u4e2d\u7684\u6700\u5927\u503c\uff0c\u663e\u7136\u6211\u65b9\u65e0\u8bba\u5982\u4f55\u90fd\u65e0\u6cd5\u5f97\u5230\u8fd9\u5c40\u7684\u5206\uff0c\u56e0\u6b64\u6253\u51fa\u6700\u5c0f\u7684\u724c\u3002\n\n- \u82e5 $a_i$ \u4e0d\u662f\u6700\u5927\u503c\uff0c\u5219\u4e00\u5b9a\u53ef\u4ee5\u51fa\u4e00\u5f20\u724c\u8d62\u5f97\u8fd9\u4e00\u5c40\uff0c\u663e\u7136\u6700\u4f18\u65b9\u6848\u662f\u51fa\u5927\u4e8e $a_i$ \u7684\u6700\u5c0f\u503c\uff0c\u4e5f\u5c31\u662f `upper_bound`\u3002\n\n\u800c\u4f7f\u7528\u7279\u6b8a\u6743\u529b\uff0c\u5373\u6bcf\u6b21\u90fd\u662f\u5c0f\u724c\u83b7\u80dc\uff0c\u628a\u60c5\u51b5\u53cd\u8f6c\u5373\u53ef\u3002\n\n\u53ef\u4ee5\u8003\u8651\u679a\u4e3e\u4e2d\u70b9\uff0c\u5373\u4f7f\u7528\u6743\u529b\u7684\u70b9 $i$\uff0c\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u60c5\u51b5\u8ba1\u7b97\u7b54\u6848\uff0c\u4f7f\u7528 `set` \u7684\u590d\u6742\u5ea6\u662f $O(n^2 \\log n)$\u3002\u663e\u7136\u8d85\u65f6\u3002\n\n\u8bbe\u4e24\u4e2a\u5e8f\u5217 $c1, c2$\uff0c$c1_i$ \u8868\u793a\u524d $i$ \u5f20\u724c\u4e0d\u4f7f\u7528\u6743\u529b\uff0c\u5373\u5927\u724c\u83b7\u80dc\u65f6\u6700\u591a\u8d62\u7684\u8f6e\u6570\uff0c$c2_i$ \u8868\u793a\u4ece\u7b2c $i$ \u5f20\u724c\u5230\u7b2c $n$ \u5f20\u724c\u4f7f\u7528\u6743\u529b\uff0c\u5373\u5c0f\u724c\u83b7\u80dc\u6700\u591a\u8d62\u7684\u8f6e\u6570\u3002\u7279\u6b8a\u5730\uff0c$c1_0 = 0$\uff0c$c2_{n+1} = 0$\u3002\n\n\u53ef\u5f97\u7b54\u6848\u4e3a $\\max_{i=0}^n c1_i + c2_{i+1}$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\log n)$\uff0c\u8db3\u4ee5\u901a\u8fc7\u3002",
        "postTime": 1657524568,
        "uid": 332914,
        "name": "happybob",
        "ccfLevel": 6,
        "title": "P3129 [USACO15DEC]High Card Low Card P"
    },
    {
        "content": "\u8fd9\u9898\u8fd8\u662f\u6bd4\u8f83\u795e\u7684\uff0c\u611f\u89c9\u81ea\u5df1\u8fd8\u662f\u50bb\u3002QAQ\n\u4e00\u5f00\u59cb\u60f3\u7684\u662f\u4ece\u5de6\u5f80\u53f3\u7528set\u7ef4\u62a4\uff0c\u4ece\u53f3\u5f80\u5de6\u4e5f\u7528set\u7ef4\u62a4\u3002\u6bcf\u6b21\u5728\u4e00\u4e2aset\u91cc\u5220\u9664\uff0c\u4e00\u4e2aset\u91cc\u6dfb\u52a0\u3002\u4f46\u8c8c\u4f3c\u65e0\u6cd5\u505a\u5230O\uff081\uff09\u7edf\u8ba1\u7b54\u6848\u975e\u5e38\u4e0d\u4f18\u7f8e\u3002\n\n\u770b\u4e86\u6d1b\u8c37\u9898\u89e3\u4ee5\u540e\u604d\u7136\u5927\u609f\u3002\n\u8fd9\u9898\u8d2a\u5fc3\u7b56\u7565\u662f\u975e\u5e38\u663e\u7136\u7684\u3002\u80fd\u7528\u5dee\u7684\u5c31\u7528\u5dee\u7684\u53bb\u8d62\u4ed6\uff0c\u4e0d\u8981\u6d6a\u8d39\u597d\u7684\u8d44\u6e90\u3002\n\n\u6bcf\u6b21\u8bb0\u5f55f[i]\u4e3a\u5728\u89c4\u52191\u4e0b\uff0c\u4ece\u5de6\u5f80\u53f3\u5230i\u6700\u591a\u80fd\u8d62\u591a\u5c11\uff0cg[i]\u4e3a\u5728\u89c4\u52192\u4e0b\uff0c\u4ece\u53f3\u5f80\u5de6\u5230i\u6700\u591a\u80fd\u8d62\u591a\u5c11\u3002\n\u7b54\u6848\u5c31\u662fmax\uff08f[i]+g[i+1]\uff09\n\n\u6211\u6765\u7b80\u5355\u8bf4\u4e00\u4e0b\u6b63\u786e\u6027\uff1a\u4f60\u5982\u679c\u4e24\u4e2a\u5730\u65b9\u7528\u7684\u540c\u4e00\u5f20\u724ci\uff0c\u80af\u5b9a\u6709\u4e00\u5f20\u724c\u6ca1\u88ab\u7528\uff0c\u90a3\u4e48\u5206\u60c5\u51b5\u8ba8\u8bba\u3002\n1.\u6bd4\u8fd9\u5f20\u724c\u5927\u3002 \u90a3\u4e48\u8fd9\u5f20\u724c\u53ef\u4ee5\u66ff\u6362\u6389\u5728\u89c4\u52191\u4e0b\u7684\u724ci\n2.\u6bd4\u8fd9\u5f20\u724c\u5c0f\u3002 \u90a3\u4e48\u8fd9\u5f20\u724c\u53ef\u4ee5\u66ff\u6362\u6389\u5728\u89c4\u52192\u4e0b\u7684\u724ci\n\n\u8fd9\u6837\u7684\u505a\u6cd5\u53ef\u4ee5\u8bc1\u660e\u65b9\u6848\u7684\u6b63\u786e\u6027\n\n```cpp\n#include<cstdio>\n#include<set>\n#include<algorithm>\nusing namespace std;\nset<int >q1,q2;\nconst int maxn=1e5+5;\nint n,a[maxn],b[maxn],tot;\nbool flag[maxn<<1];\ninline void init(){\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\tflag[a[i]]=1;\n\t}\n\tfor (int i=1;i<=2*n;i++){\n\t\tif (!flag[i]){\n\t\t\tb[++tot]=i;\n\t\t\tq1.insert(i);\n\t\t\tq2.insert(-i);\n\t\t}\n\t}\n}\nint ans,f[maxn],g[maxn];\ninline void solve(){\n\tfor (int i=1;i<=n;i++){\n\t\tset<int > ::iterator it=q1.lower_bound(a[i]);\n\t\tif (it!=q1.end()){\n\t\t\tq1.erase(it); f[i]=f[i-1]+1;\n\t\t}else {\n\t\t\tf[i]=f[i-1];\n\t\t}\n\t}\n\tfor (int i=n;i;i--){\n\t\tset<int > ::iterator it=q2.lower_bound(-a[i]);\n\t\tif (it!=q2.end()){\n\t\t\tq2.erase(it); g[i]=g[i+1]+1;\n\t\t}else{\n\t\t\tg[i]=g[i+1];\n\t\t}\n\t}\n\tans=g[1];\n\tfor (int i=1;i<=n;i++){\n\t\tans=max(ans,f[i]+g[i+1]);\n\t}\n\tprintf(\"%d\\n\",ans);\n}\nint main(){\n\tinit();\n\tsolve();\n\treturn 0;\n}\n```",
        "postTime": 1523152192,
        "uid": 34444,
        "name": "\u5927\u83dc\u9e21fks",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3129 \u3010[USACO15DEC]\u9ad8\u4f4e\u5361(\u767d\u91d1)High Card Low Card (Platinum)\u3011"
    },
    {
        "content": "```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint cmp(int a,int b){\n    return a>b;//\u5feb\u6392\u7684cmp\u964d\u5e8f\n}\nint main(){\n    int n,t=1,m1,m2,j=0;\n    cin>>n;\n    int a[n+5],b[n+5],c[100005]={0},x=n,y=1,temp=0;\n    for(int i=1;i<=n;i++){\n            cin>>b[i];\n            c[b[i]]=1;\n        }\n    for(int i=1;i<=2*n;i++){\n        if(c[i]==0){\n            a[t]=i;\n            t++;\n        }\n```\n}//\u6c42ta\u624b\u4e2d\u62ff\u7684\u724c\nfor(int tot=0;tot<=n;tot++){//\u4ecetot\u5904\u89c4\u5219\u53d8\u6362    \u679a\u4e3e\n\n```cpp\n        m1=tot;m2=n-tot;\n        int b1[m1+5],b2[m2+5];//\u5bf9\u65b9\u524d\u540e\u7684\u6570\u7ec4\uff0c\u4ee5tot\u5206\u9694\n        for(int i=1;i<=m1;i++)    b1[i]=b[i];\n        for(int i=1;i<=m2;i++)    b2[i]=b[m1+i];//\u50a8\u5b58\u6570\u636e\n        sort(b1+1,b1+m1+1,cmp);\n        sort(b2+1,b2+m2+1);//\u6309\u8981\u6c42\u6392\u5e8f\n        for(int i=1;i<=m1;i++){\n            if(a[x]>b1[i]){\n                j++;\n                x--; //\u540c\u4e0b\n            }\n```\n}//\u6709\u70b9\u50cf\u6307\u9488\u7684\u6392\u5e8f\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u6709\u5e8f\u6570\u7ec4\u7684\u4e00\u4e2a\u4e2a\u6bd4\u5927\u5c0f\n```cpp\n        for(int i=1;i<=m2;i++){\n            if(a[y]<b2[i]){\n                j++;//\u8ba1\u6570\n                y++;\n            }\n        }\n        x=n;y=1;\n        for(int now=1;now<=2*n;now++)    c[now]=0;//\u5f52\u96f6\n        if(temp<j)    temp=j;//\u5224\u65ad\n        j=0; //\u5f520\n        if(temp==2*n)    break;\n    }\n    cout<<temp;\n    return 0;\n}\n```\n\u7b80\u5355\u6765\u8bf4\n\u5c31\u662f\u66b4\u529b\n",
        "postTime": 1509720441,
        "uid": 46411,
        "name": "tang_xu",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3129 \u3010[USACO15DEC]\u9ad8\u4f4e\u5361(\u767d\u91d1)High Card Low Card (Platinum)\u3011"
    }
]
[
    {
        "content": "\u672c\u9898\u5927\u81f4\u6709\u4ee5\u4e0b\u51e0\u79cd\u601d\u8def\uff1a\n\n1.\u8d85\u7eb2\u7684\u6a21\u62df\u9000\u706b\n\n2.\u9519\u8bef\u4f46\u53ef\u4ee5A\u9898\u7684\u72b6\u538bDP\n\n3.\u6b63\u786e\u4f46\u8dd1\u5f97\u592a\u6162\u7684\u72b6\u538bDP\n\n\u4f46\u662f\uff0c\u8fd9\u4e9b\u771f\u7684\u6b63\u786e\u6216\u8005\u9002\u5408\u5417\uff1f\n\n\n\n\u60f3\u5f53\u521d\u5728NOIP\u8003\u573a\u4e0a\u6253\u7206\u641c\u7ed3\u679c\u7f16\u8bd1\u4e0d\u8fc7\u7684\u5c34\u5c2c\uff1b\n\n\u4e0d\u8fc7\u611f\u8c22\u4e0a\u82cd\u6211\u8fd8\u67095\u5206\u3002\n\n\n\n\u4f46\u73b0\u5728\uff0c\n\n\u6211\u4eec\u4ece\u8d77\u70b9\u5f00\u59cb\u8d70\u8d77\uff1b\n\n\n\n20\u5206\u505a\u6cd5\uff1a\n\n\u5bb9\u6613\u60f3\u5230\u5229\u7528\u6811\u8fd9\u4e00\u6761\u4ef6\n\n\u7528dfs/bfs\u6c42\u51fa\u8ddd\u79bb\u5373\u53ef\n\n\n\n\n40\u5206\u505a\u6cd5\uff1a\n\n\u7c7b\u6bd4\u4e0e20\u5206\u505a\u6cd5\n\n\u7528Floyd\u6c42\u51fa\u6700\u77ed\u8def\u5373\u53ef\uff08\u5b9e\u9645\u4e0a\u6ca1\u5fc5\u8981\u4f7f\u7528SPFA\uff09\n\n\n\n\n\u6211\u4eec\u5bb9\u6613\u53d1\u73b0\u8fd9\u9898\u7684n\u975e\u5e38\u975e\u5e38\u5c0f\n\n\u5927\u591a\u6570\u7684\u4eba\u7684\u7b2c\u4e00\u5370\u8c61\u6050\u6015\u5c31\u662f\u590d\u6742\u5ea6\u5e38\u5e38\u662f(2 ^ n)\u7684\u72b6\u538b\u5427\n\n\u4f46\u662f\u554a\uff0cNOIP\u8fd8\u6709\u4e00\u79cd\u795e\u5947\u7684\u7b97\u6cd5\uff0c\u867d\u7136\u4f7f\u7528\u5b83\u7b97\u4e0d\u4e0a\u9ad8\u5927\u5927\u6c14\u4e0a\u6863\u6b21\uff0c\u590d\u6742\u5ea6\u9ad8\u5230\u65e0\u6cd5\u63a5\u53d7\uff0c\u4f46\u662f\uff0c\u5b83\u6bd5\u7adf\u662f\u4f60\u66fe\u8fd1\u5b66\u8fc7\u7684\u7b97\u6cd5\u3002\n\n\u5b83\u662f\u8c01\uff1f\u590d\u6742\u5ea6O(n!/\u7384\u5b66)\u7684dfs\uff01\uff01\uff01\n\n\n\n70\u5206\u505a\u6cd5\uff1a\n\n\u6211\u4eec\u53d1\u73b0 8!\u975e\u5e38\u7684\u5c0f\uff0c\u5e26\u4e0a\u4e00\u5927\u4e32\u5e38\u6570\u90fd\u6ca1\u95ee\u9898\n\n\u56e0\u6b64\u6211\u4eec\u8003\u8651\u6df1\u641c\n\n\u5982\u4f55\u7206\u641c\uff1f\n\n\u7b2c\u4e00\u53cd\u5e94\u662f\u679a\u4e3e\u5168\u6392\u5217\u7136\u540e\u53bb\u66f4\u65b0\u7b54\u6848\u3002\n\n\u4f46\u662f\u6709\u95ee\u9898\u554a\uff0c\u77e5\u9053\u70b9\u5f00\u62d3\u7684\u987a\u5e8f\u5e76\u6ca1\u6709\u4ec0\u4e48\u7528\uff0c\u6211\u4eec\u8fd8\u8981\u77e5\u9053\u5b83\u662f\u7531\u54ea\u4e2a\u70b9\u5f00\u62d3\u800c\u6765\u7684\u3002\n\n\u56e0\u6b64\u6211\u4eec\u518d\u679a\u4e3e\u53bb\u5f00\u62d3\u7684\u70b9\uff1a\n\n\u4ee3\u7801\u5982\u4e0b\n\n\n```cpp\n#include <cstdio>\nusing namespace std;\n\nint a[55], l[55];\nint cost[55][55];\nint ans = 2147483645, tmp, n, m;\n\n#define getchar() (S==T&&(T=(S=BB)+fread(BB,1,1<<15,stdin),S==T)?EOF:*S++)\nchar BB[1 << 16], *S = BB, *T = BB;\ninline int read () {\n    int X = 0; char ch = 0;\n    while(ch < 0 || ch > 9) ch = getchar();\n    while(ch >= 0 && ch <= 9) X = X * 10 + ch - '0', ch = getchar();\n    return X;\n}\n\ninline int min(int a, int b) {\n    int c = (a - b) >> 31;\n    return a ^ c | b ^ ~c;\n}\n\ninline void dfs(int e, int num) {\n    if(num == n) {\n        ans = min(tmp, ans);\n        return;\n    }\n    if(tmp >= ans) return;\n    for(int i = 1; i <= n; i ++) {//\u786e\u5b9a\u4e0b\u4e00\u6b65\u6269\u5c55\u8c01\n        if(l[i]) continue;\n        for(int j = 1; j <= n; j ++) {//\u7531\u8c01\u6269\u5c55\n            if(cost[j][i] == 2147483645 || !l[j] || i == j) continue;\n            tmp += l[j] * cost[j][i]; l[i] = l[j] + 1;\n            dfs(i, num + 1);\n            tmp -= l[j] * cost[j][i]; l[i] = 0;\n        }\n    }\n}\n\nint main() {\n    int u, v;\n    n = read(); m = read();\n    for(int i = 1; i <= n; i ++)\n    for(int j = 1; j <= n; j ++)\n    cost[i][j] = 2147483645;\n    for(int i = 1; i <= m; i ++)\n    u = read(), v = read(),\n    cost[u][v] = cost[v][u] = min(cost[u][v], read());\n    for(int i = 1; i <= n; i ++) {\n        l[i] = 1; dfs(i, 1); l[i] = 0;\n    }\n    printf(\"%lld\\n\", ...);\n    return 0;\n}\n```\n\n\uff08\u8bf7\u4e0d\u8981\u5c1d\u8bd5\u7740\u590d\u5236\u672c\u4ee3\u7801\uff09\n\n\n\u4e3a\u4ec0\u4e48\u8fd9\u4e2a\u7206\u641c\u6b63\u786e\u5462\uff1f\n\n\u56e0\u4e3a\u9898\u76ee\u4e2d\u4e00\u53e5\u53ca\u5176\u91cd\u8981\u7684\u8bdd\uff1a\n\n**\u53e6\u5916\uff0c\u5c0f\u660e\u4e0d\u60f3\u5f00\u53d1\u65e0\u7528\u9053\u8def\uff0c\u5373\u4e24\u4e2a\u5df2\u7ecf\u88ab\u6316\u6398\u8fc7\u7684\u5b9d\u85cf \u5c4b\u4e4b\u95f4\u7684\u9053\u8def\u65e0\u9700\u518d\u5f00\u53d1\u3002**\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u5176\u5b9e\u53ef\u4ee5\u5f88\u8f7b\u6613\u5730\u62ff\u523070\u5206\u3002\n\n\u5927\u5bb6\u5728\u8003\u573a\u4e0a\u90fd\u62ff\u4e86\u51e0\u5206\u5462\uff1f\n\n\n100\u5206\u4e0d\u8d85\u7eb2\u6781\u5feb\u89e3\u6cd5:\n\n\n\u65e2\u7136\u90fd\u5199\u4e86\u7206\u641c\uff0c\u6211\u4eec\u60f3\u60f3\u6709\u6ca1\u6709\u66f4\u5feb\u7684\u901f\u5ea6\uff1f\n\n\u6709\uff0c\u6211\u4eec\u8fd8\u6709\u526a\u679d\u5462\uff01\uff01\n\ndfs + \u526a\u679d\u53ef\u4ee5\u8dd1\u591a\u5feb\uff1f \u7384\u5b66\u554a\u3002\n\n\u4ec0\u4e48\uff1f    \u4f60\u60f3\u77e5\u9053\u7384\u5b66\u6709\u591a\u5feb\uff1f\n\n\u8bf4\u4e86\u4e0d\u8981\u5403\u60ca\u3002 0ms\u3002\n\n\n\u90a3\u8ba9\u6211\u4eec\u7ed3\u5408\u8be6\u7ec6\u7684\u6ce8\u91ca\u6765\u770b\u770b\u5982\u4f55\u526a\u679d\u3002\n\n```cpp\n#include <cstdio>\n//\u57fa\u7840\u7684\u5934\u6587\u4ef6\n#include <algorithm>\n//\u7ed9sort\u5f00\u7684\u5934\u6587\u4ef6\n#define INF 1917483645\nusing namespace std;\n\nint vis[20], lev[20], d[20];\n//vis : \u5df2\u7ecf\u8bbf\u95ee\u8fc7\u7684\u70b9\n//lev : \u70b9\u8ddd\u79bb\u521d\u59cb\u70b9\u7684\u8ddd\u79bb\n//d : \u901a\u8fc7\u6b64\u70b9\u53ef\u4ee5\u8fbe\u5230\u7684\u70b9\u6570\nint c[20][20], tar[20][20];\n//c : \u8d39\u7528\n//tar \uff1a\u5b58\u4e0b\u6bcf\u4e2a\u70b9\u80fd\u5230\u7684\u70b9\n/*\u4e3a\u4ec0\u4e48\u8981\u7279\u610f\u5b58\u4e0b\u6bcf\u4e2a\u70b9\u5230\u7684\u70b9\uff1f\n\u7b54\u6848\u5176\u5b9e\u5e76\u4e0d\u56f0\u96be\uff0c\u52a0\u5feb\u8bbf\u95ee\u901f\u5ea6*/\n\nint ans = INF, tmp, tot, cnt, n, m, p;\n//ans : \u6700\u7ec8\u7684\u7b54\u6848\n//tmp : \u6700\u4f18\u89e3\u526a\u679d\u7528\n//tot : dfs\u50a8\u5b58\u4e2d\u95f4\u7b54\u6848\u7684\u7528\u5177\n//cnt \uff1a\u73b0\u5728\u5df2\u7ecf\u8bbf\u95ee\u8fc7\u7684\u70b9\u6570\n//n : \u70b9\u6570\n//m : \u8fb9\u6570\n//p : sort\u7528\u54c1\n\ninline bool cmp(int a, int b) {\n    return c[p][a] < c[p][b];\n    //\u6309\u7167\u8d39\u7528\u7ed9\u6bcf\u4e2a\u70b9\u80fd\u5230\u7684\u70b9\u6392\u5e8f\n}\n\ninline void dfs(int num, int node) {\n    for(int i = num; i <= cnt; i ++) {\n        //\u7531\u7b2c\u51e0\u4e2a\u88ab\u8bbf\u95ee\u7684\u70b9\u6765\u6269\u5c55\n        if(tot + tmp * lev[vis[i]] >= ans) return;\n        //\u6700\u4f18\u6027\u526a\u679d\uff0c\u5982\u679c\u5f53\u524d\u89e3\u52a0\u4e0a\u7406\u8bba\u6700\u5c0f\u7684\u8d39\u7528\u90fd\u6bd4\u4e2d\u9014\u7684\u7b54\u6848\u9ad8\n        //\u90a3\u4e48\u8fd9\u6b21\u641c\u7d22\u4e00\u5b9a\u4e0d\u662f\u6700\u4f18\u89e3\n        for(int j = node; j <= d[vis[i]]; j ++)\n        //\u4e0b\u4e00\u6b65\u6269\u5c55\u8c01\n        if(!lev[tar[vis[i]][j]]) { //\u7528lev\u540c\u65f6\u5145\u5f53\u6807\u8bb0\uff0c\u6709lev\u4ee3\u8868\u5df2\u8bbf\u95ee\n            cnt ++; //\u591a\u6dfb\u52a0\u4e00\u4e2a\u70b9\n            vis[cnt] = tar[vis[i]][j]; //\u8bb0\u5f55\u8fd9\u4e2a\u70b9\n            tmp -= c[vis[cnt]][tar[vis[cnt]][1]]; //\u7406\u8bba\u6700\u5c0f\u7684\u66f4\u65b0\n            tot += c[vis[i]][vis[cnt]] * lev[vis[i]]; //\u52a0\u4e0a\u5f53\u524d\u7684\u5f71\u54cd\n            lev[vis[cnt]] = lev[vis[i]] + 1; //\u56e0\u4e3a\u4ecevis[i]\u62d3\u5c55\uff0c\u6545lev\u4e00\u5b9a\u4e3a\u5176 + 1\n            dfs(i, j + 1); //\u7ee7\u7eed\u4ecei\u679a\u4e3e, \u6ce8\u610f\u5230tar[i][1 ~ j]\u5df2\u5168\u90e8\u8bbf\u95ee\uff0c\u4e0b\u4e00\u6b21\u4ecej + 1\u5c1d\u8bd5\u8bbf\u95ee\n            tot -= c[vis[i]][vis[cnt]] * lev[vis[i]]; //\u56de\u6eaf\n            lev[vis[cnt]] = 0; //\u56de\u6eaf\n            tmp += c[vis[cnt]][tar[vis[cnt]][1]]; //\u56de\u6eaf\n            cnt --; //\u56de\u6eaf\n        }\n        node = 1; //\u526a\u679d\u522b\u526a\u9519\u4e86\uff0ci\u679a\u4e3e\u73a9\u4e0b\u6b21\u8fd8\u8981\u4ece1\u679a\u4e3e\n    }\n    if(cnt == n) { //\u5df2\u7ecf\u8bbf\u95ee\u4e86n\u4e2a\u70b9\uff0c\u66f4\u65b0\u7b54\u6848\n        if(tot < ans) ans = tot;\n        return;\n    }\n}\n\nint main() {\n    int u, v, w;\n    scanf(\"%d%d\", &n, &m); //\u8bfb\u5165n, m\n    for(int i = 1; i <= n; i ++)\n    for(int j = 1; j <= n; j ++)\n    c[i][j] = INF; //\u521d\u59cb\u8d4b\u65e0\u9650\u5927\uff0c\u65b9\u4fbf\u540e\u9762\u7684\u64cd\u4f5c\n    for(int i = 1; i <= m; i ++) {\n        scanf(\"%d%d%d\", &u, &v, &w); //\u8fd9\u4e2aw\u5148\u6682\u65f6\u5b58\u8d77\u6765\n        //\u56e0\u4e3a\u53d1\u73b0m = 1000 \u8fdc> n * n\uff0c\u6240\u4ee5\u8981\u526a\u6389\u4e00\u4e9b\u8fb9\n        if(c[u][v] < w) continue; //w\u4e0d\u80fd\u66f4\u65b0c[u][v]\n        if(c[u][v] == INF) //\u7b2c\u4e00\u6b21\u66f4\u65b0c[u][v]\uff0c\u7edf\u8ba1u,v\u7684\u51fa\u5ea6\n        tar[u][++ d[u]] = v, tar[v][++ d[v]] = u;\n        c[u][v] = c[v][u] = w;\n    }\n    for(int i = 1; i <= n; i ++) {\n        p = i; //sort\u6392\u5e8fcmp\n        sort(tar[i] + 1, tar[i] + 1 + d[i], cmp);\n        tmp += c[i][tar[i][1]]; //\u56e0\u4e3a\u6bcf\u4e2a\u70b9\u603b\u8981\u6269\u5c55\u4e00\u6761\u8fb9\uff0c\n        //\u56e0\u6b64\u6211\u4eec\u628a\u6700\u5c0f\u7684\u8fb9\u627e\u51fa\u6765,\u4f5c\u4e3a\u6700\u4f18\u6027\u526a\u679d\n        //\u4e0d\u4ec5\u5982\u6b64\uff0c\u56e0\u4e3a\u8fb9\u8d8a\u5c0f\u4f5c\u4e3a\u6700\u7ec8\u89e3\u7684\u53ef\u80fd\u6027\u8d8a\u5927\n        //\u5b9e\u9645\u4e0a\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u4f18\u5316\u4e86\u7a0b\u5e8f\n    }\n    for(int i = 1; i <= n; i ++) {\n        tot = 0; cnt = 1; //\u8d4b\u521d\u503c\n        vis[1] = i; //\u7b2c\u4e00\u4e2a\u5c31\u9009i\n        tmp -= c[i][tar[i][1]]; //i\u7684\u6700\u4f18\u6027\u526a\u679d\u7684\u5f71\u54cd\u8981\u53bb\u6389\n        //\u56e0\u4e3a\u526a\u679d\u7684\u65f6\u5019\u662f\u4ee5\u8fd8\u672a\u8bbf\u95ee\u548c\u8fd8\u672a\u5c06\u88ab\u8bbf\u95ee\u7684\u70b9\u4e3a\u57fa\u7840\u7684\n        //\u4e0d\u53bb\u6389\u526a\u679d\u5c31\u662f\u9519\u8bef\u7684\n        lev[i] = 1; //\u8d4b\u503c\n        dfs(1, 1); //\u53ea\u6709\u4e00\u4e2a\u70b9\uff0c\u4e5f\u80af\u5b9a\u662f\u4ece1\u679a\u4e3e\n        lev[i] = 0; //\u56de\u6eaf\n        tmp += c[i][tar[i][1]];\n    }\n    printf(\"%d\", ans);\n    return 0;\n}\n```\n\u5e0c\u671b\u5927\u5bb6\u5b66\u4e60\u9ad8\u7ea7\u7b97\u6cd5\u540e\u4e0d\u8981\u5fd8\u4e86\u90a3\u4e9b\u4f4e\u7ea7\u7b97\u6cd5\u7684\u91cd\u8981\uff01\uff01\n\nBy Xiyue reverymoon\n",
        "postTime": 1517330188,
        "uid": 54022,
        "name": "sermoon",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "## \u63d0\u4f9b\u4e00\u7bc7\u9898\u89e3\u91cc\u90fd\u6ca1\u6709\u5199\u5230\u7684\u72b6\u538bDP\u3002\n\n\u770b\u5230\u6570\u636e\u8303\u56f4\u5c31\u77e5\u9053\u5927\u6982\u662f\u4e2a\u72b6\u538b\u4e86\u3002\u8003\u8651\u4e00\u4e0b\u600e\u4e48\u8bbe\u8ba1\u72b6\u6001\u3002\n\n\u770b\u61c2\u9898\u610f\uff0c\u9898\u76ee\u7684\u610f\u601d\u5c31\u662f\u627e\u4e00\u68f5\u751f\u6210\u6811\uff0c\u4f7f\u5f97\u4ee3\u4ef7\u548c\u6700\u5c0f\u3002\n\n\u8003\u8651\u5728\u4efb\u610f\u65f6\u523b\uff0c\u6211\u4eec\u5173\u5fc3\u7684\u53ea\u6709\u6211\u4eec\u5df2\u7ecf\u628a\u591a\u5c11\u70b9\u52a0\u8fdb\u751f\u6210\u6811\u4e86\uff0c\u4ee5\u53ca\u751f\u6210\u6811\u7684\u6700\u5927\u6811\u9ad8\u662f\u591a\u5c11\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u8bbe$f_{S,i}$\u4e3a\u5f53\u524d\u751f\u6210\u6811\u5df2\u7ecf\u5305\u542b\u96c6\u5408S\u4e2d\u7684\u70b9\uff0c\u5e76\u4e14\u6811\u9ad8\u662fi\u3002\n\n\u90a3\u4e48\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u51fa\u6765\u4e86\uff1a\n\n#### $f_{S,i}=min${$f_{S_0,i-1}+pay$}\uff0c\u5176\u4e2d\u6ee1\u8db3$S_0$\u662f$S$\u7684\u5b50\u96c6\uff0c\u901a\u8fc7$S_0$\u52a0\u8fb9\u4e00\u5b9a\u53ef\u4ee5\u8054\u7ed3\u6210$S$\u3002$pay$\u662f\u8fd9\u6b21\u52a0\u8fb9\u7684\u82b1\u8d39\u3002\n\n\u90a3\u4e48\u600e\u4e48\u5224\u65ad$S_0$\u5728\u8f6c\u79fb\u4e2d\u662f\u5426\u5408\u6cd5\u5462\uff1f\u6211\u4eec\u8bbe$G_S$\u662fS\u80fd\u62d3\u5c55\u5230\u7684\u8fb9\u7684\u96c6\u5408\uff0c\u663e\u7136G\u662f\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6765\u7684\u3002\n\n\u518d\u8003\u8651$pay$\u7684\u8ba1\u7b97\u3002\n\n\u8bbe$ss=S~xor~S_0$\uff0c\u5373$ss$\u662f\u5728$S$\u4f46\u4e0d\u5728$S_0$\u4e2d\u7684\u5143\u7d20\u3002\n\n\u8fd9\u91cc$pay$\u7684\u8ba1\u7b97\u663e\u7136\u662f\u5bf9\u4e8e\u6bcf\u4e2a$ss$\u4e2d\u7684\u5143\u7d20\u53d6$S_0$\u4e2d\u7684\u5143\u7d20\u5411\u5b83\u8fde\u4e00\u6761\u6700\u77ed\u7684\u8fb9\u6c42\u548c\u540e$\\times$i\u3002\n\n\u8003\u8651\u8fd9\u4e48\u505a\u4e3a\u4ec0\u4e48\u662f\u5bf9\u7684\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u96c6\u5408$S$\u548c$S_0$\uff0c\u5982\u679c\u4ed6\u4eec\u4e4b\u95f4\u7684\u8fb9\u4e0d\u662f\u88ab$S_0$\u4e2d\u6700\u5927\u6df1\u5ea6\u7684\u70b9\u8fde\u63a5\u6210\u7684\uff0c\u90a3\u4e48\u4e00\u5b9a\u5b58\u5728\u53e6\u4e00\u4e2a$S_1$\uff0c\u5305\u542b\u53e6\u4e00\u79cd\u8fde\u8fb9\u7684\u60c5\u51b5\u4f7f\u5f97$S_1$\u5305\u542b\u9664\u88ab\u6700\u5927\u6df1\u5ea6\u70b9\u8fde\u63a5\u7684\u70b9\u4ee5\u5916\u7684\u6240\u6709\u70b9\uff0c\u90a3\u4e48\u901a\u8fc7$S_1$\u8f6c\u79fb\u7684\u7b54\u6848\u5c31\u662f\u6700\u5c0f\u503c\uff0c\u4e00\u5b9a\u662f\u6b63\u786e\u7684\u3002\u6240\u4ee5\u4e0d\u4f1a\u6f0f\u89e3\u3002\n\n### \u73b0\u5728\u6765\u6574\u7406\u4e00\u4e0b\u601d\u8def\uff1a\n\n>1\u3001\u9884\u5904\u7406\u51fa\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u7684\u96c6\u5408\u6240\u80fd\u62d3\u5c55\u7684\u70b9\u7684\u96c6\u5408\u3002\n\n>2\u3001\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u663e\u7136\u628a\u4ed6\u4f5c\u4e3a\u901a\u5411\u5730\u9762\u7684\u70b9\u7684\u65f6\u5019\u4ed6\u7684\u6df1\u5ea6\u662f0\uff0c\u96c6\u5408\u662f$(1<<i)$\u3002\u90a3\u4e48\u8fd9\u6837\u7684DP\u503c\u521d\u59cb\u5316\u4e3a0\n\n>3\u3001\u679a\u4e3e\u96c6\u5408\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u96c6\u5408\u7684\u5b50\u96c6\uff0c\u901a\u8fc7$G_S$\u5224\u65ad\u8be5\u5b50\u96c6\u662f\u5426\u5408\u6cd5\uff0c\u5982\u679c\u5408\u6cd5\uff0c\u679a\u4e3e\u6240\u6709\u9700\u8981\u88ab\u8fde\u5411\u7684\u70b9\u7684\u6700\u5c0f\u8fb9\u6743\u6c42\u548c\u4e58\u6df1\u5ea6\uff0c\u4f5c\u4e3a\u7b54\u6848\u3002\n\n>4\u3001\u7b54\u6848\u5c31\u662f\u5168\u96c6\u57281~n\u6df1\u5ea6\u7684\u6700\u5c0f\u503c\u3002\n\n### \u4e0b\u9762\u8003\u8651\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\n\u9996\u5148\u8003\u8651\u6211\u4eec\u679a\u4e3e\u96c6\u5408\u7684\u6570\u91cf\uff1a\n\u6211\u4eec\u96c6\u5408\u7684\u679a\u4e3e\u91cf\u663e\u7136\u662f\u5168\u96c6\u7684\u5b50\u96c6\u7684\u5b50\u96c6\u4e2a\u6570\u548c\u3002\u4e4d\u4e00\u770b\u5168\u96c6\u6709$2^n$\u4e2a\u5b50\u96c6\uff0c\u6bcf\u4e2a\u5b50\u96c6\u6709$2^n$\u4e2a\u5b50\u96c6\u3002\u90a3\u4e48\u4e2a\u6570\u662f$O(4^n)$\uff1f\u4e8b\u5b9e\u4e0a\u4e0d\u662f\u8fd9\u6837\u3002\u8003\u8651\u5bf9\u4e8e\u6240\u6709\u7684\u7684\u5b50\u96c6\uff0c\u4ed6\u4eec\u7684\u5b50\u96c6\u4e2a\u6570\u662f$O(2^k)$\u4e2a\uff0c\u5176\u4e2d$k$\u662f\u5b50\u96c6\u7684\u5143\u7d20\u4e2a\u6570\u3002\u90a3\u4e48\u5bf9\u4e8e\u5927\u90e8\u5206\u7684\u5b50\u96c6\uff0c\u4ed6\u4eec\u7684\u5143\u7d20\u4e2a\u6570k\u90fd\u4e0d\u7b49\u4e8en\u3002\u663e\u7136\u8fd9\u4e2a\u4e0a\u754c\u592a\u677e\u4e86\u3002\u90a3\u4e48\u5982\u4f55\u8ba1\u7b97\u679a\u4e3e\u91cf\u5462\uff1f\u8003\u8651\u5bf9\u4e8e\u5143\u7d20\u4e2a\u6570\u4e3ax\u7684\u5b50\u96c6\uff0c\u5171\u6709$C_{n}^x$\u79cd\u65b9\u5f0f\u3002\u6bcf\u4e2a\u5b50\u96c6\u6709$2^x$\u4e2a\u5b50\u96c6\uff0c\u90a3\u4e48\u603b\u7684\u679a\u4e3e\u91cf\u662f$C_{n}^x~\\times~2^x$\u3002\u5e94\u7528\u4e8c\u9879\u5f0f\u5b9a\u7406\uff0c\u539f\u5f0f\uff1d$(2+1)^n$=$3^n$\u3002\u6240\u4ee5\u5b50\u96c6\u7684\u679a\u4e3e\u91cf\u662f$O(3^n)$\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u96c6\u5408\u6700\u591a\u6709$n$\u4e2a\u5143\u7d20\uff0c\u6bcf\u4e2a\u5143\u7d20\u679a\u4e3e\u5230\u5b83\u7684\u8fb9\u662f$O(n)$\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684\u590d\u6742\u5ea6\u662f$O(n^2)$\u7684\u3002\n\n\u90a3\u4e48\u603b\u7684\u590d\u6742\u5ea6\u662f$O(3^n~\\times~n^2)$\u3002\u5927\u6982\u662f\u4e03\u5343\u4e07\u5de6\u53f3\u3002\u8003\u8651\u5bf9\u4e8e\u7edd\u5927\u90e8\u5206\u96c6\u5408\u8dd1\u4e0d\u6ee1$n^2$\u7684\u4e0a\u754c\uff0c\u5e76\u4e14\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u526a\u679d\u4f18\u5316\uff0c\u6700\u7ec8\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\n\n\n## Code\n\n#### \u4e3a\u4e86\u4e8c\u8fdb\u5236\u8fd0\u7528\u65b9\u4fbf\uff0c\u8bfb\u5165\u70b9\u7684\u65f6\u5019\u51cf\u4e00\uff0c\u6240\u6709\u7684\u70b9\u4ece0\u7f16\u53f7\u5230n-1\u3002\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#define rg register\n#define ci const int\n#define cl const long long int\n\ntypedef long long int ll;\n\nnamespace IO {\n\tchar buf[50];\n}\n\ntemplate<typename T>\ninline void qr(T &x) {\n\tchar ch=getchar(),lst=' ';\n\twhile(ch>'9'||ch<'0') lst=ch,ch=getchar();\n\twhile(ch>='0'&&ch<='9') x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\tif (lst=='-') x=-x;\n}\n\ntemplate<typename T>\ninline void write(T x,const char aft,const bool pt) {\n\tif(x<0) {putchar('-');x=-x;}\n\tint top=0;\n\tdo {\n\t\tIO::buf[++top]=x%10+'0';\n\t\tx/=10;\n\t} while(x);\n\twhile(top) putchar(IO::buf[top--]);\n\tif(pt) putchar(aft);\n}\n\ntemplate <typename T>\ninline T mmax(const T a,const T b) {if(a>b) return a;return b;}\ntemplate <typename T>\ninline T mmin(const T a,const T b) {if(a<b) return a;return b;}\ntemplate <typename T>\ninline T mabs(const T a) {if(a<0) return -a;return a;}\n\ntemplate <typename T>\ninline void mswap(T &a,T &b) {T temp=a;a=b;b=temp;}\n\n\nconst int maxn = 15;\nconst int maxm = 1010;\nconst int maxt = 1<<maxn;\nconst int INF = 0x3f3f3f3f;\n\nint n,m,a,b,c,ans=INF;\nint frog[maxt][maxn],gorf[maxt],dis[maxn][maxn];\n\nint main() {\n\tqr(n);qr(m);\n\tmemset(dis,0x3f,sizeof dis);\n\tfor(rg int i=1;i<=m;++i) {\n\t\ta=b=c=0;qr(a);qr(b);qr(c);--a;--b;\n\t\tdis[b][a]=dis[a][b]=mmin(dis[a][b],c);\n\t}\n\tmemset(frog,0x3f,sizeof frog);\n\tint all=(1<<n)-1;\n\tfor(rg int i=1;i<=all;++i) {\n\t\tfor(rg int j=0;j<n;++j) if(((1<<j)|i) == i) {\n\t\t\tdis[j][j]=0;\n\t\t\tfor(rg int k=0;k<n;++k) if(dis[j][k]!=INF) {\n\t\t\t\tgorf[i]|=(1<<k);\n\t\t\t}\n\t\t}\n\t}\n\tfor(rg int i=0;i<n;++i) frog[1<<i][0]=0;\n\tfor(rg int i=2;i<=all;++i) {\n\t\tfor(rg int s0=i-1;s0;s0=(s0-1)&i) if((gorf[s0]|i) == gorf[s0]) {\n\t\t\tint _sum=0;\n\t\t\tint ss=s0^i;\n\t\t\tfor(rg int k=0;k<n;++k) if((1<<k)&ss) {\n\t\t\t\tint _temp=INF;\n\t\t\t\tfor(rg int h=0;h<n;++h) if((1<<h)&s0) {\n\t\t\t\t\t_temp=mmin(_temp,dis[h][k]);\n\t\t\t\t}\n\t\t\t\t_sum+=_temp;\n\t\t\t}\n\t\t\tfor(rg int j=1;j<n;++j) if(frog[s0][j-1]!=INF) {\n\t\t\t\tfrog[i][j]=mmin(frog[i][j],frog[s0][j-1]+_sum*j);\n\t\t\t}\n\t\t}\n\t}\n\tfor(rg int i=0;i<n;++i) ans=mmin(ans,frog[all][i]);\n\twrite(ans,'\\n',true);\n\treturn 0;\n}\n```\n\n## Summary\n1\u3001n\u4e2a\u5143\u7d20\u7684\u5b50\u96c6\u7684\u5b50\u96c6\u6570\u91cf\u662f$3^n$\n\n2\u3001\u5728\u8fdb\u884c\u72b6\u6001\u8bbe\u8ba1\u65f6\u53ef\u4ee5\u8003\u8651\u5bf9\u4e8e\u6bcf\u4e2a\u65f6\u523b\u9700\u8981\u77e5\u9053\u7684\u4fe1\u606f\uff0c\u4ee5\u6b64\u8bbe\u8ba1\u7ef4\u5ea6\n\n3\u3001\u9884\u5904\u7406\u5927\u6cd5\u543c\u554a\uff01\n\n\u548c\u4e0a\u6b21\u7684\u76f8\u6bd4 \u66f4\u6539\u4e86\u4e24\u4e2a\u7b14\u8bef\u7684\u5730\u70b9\u3002\u91cd\u65b0\u63d0\u4ea4\u5e0c\u671b\u7ba1\u7406\u5458\u7ed9\u8fc7\u3002",
        "postTime": 1535449788,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "qwq\u9996\u5148\uff0cprim\u662f\u9519\u8bef\u7684\uff0c\u53ef\u4ee5\u88ab\u8fd9\u7ec4\u6570\u636e\u5361\u6389\uff1a[\u6570\u636e](https://paste.ubuntu.com/25953020/)\n\n\u7136\u540e\uff0c\u636e\u8bf4\u6b63\u89e3$O(4^n)$\uff0c\u800c\u6211\u7684\u505a\u6cd5\u662f$O(n^33^n)$\uff0c\u6e10\u8fdb\u610f\u4e49\u4e0a\u5c0f\u4f46\u662f$n \\leq 12$\u7684\u65f6\u5019\u5927\u3002\n\n\u7136\u540e\uff0c\u6211\u7684\u5e38\u6570\u5c0f\u81f3$\\frac{1}{27}$\uff0c\u6781\u9650\u6570\u636e\uff08\u5c31\u662f12\u4e2a\u70b9\u4e4b\u95f4\u5168\u6709\u8fb9\uff09\u5728sd\u7684\u8fa3\u9e21WinXp\u4e0a\u8dd1\u4e860.8\u79d2\u3002luogu\u81ea\u6d4b\u8fc7\u4e86\u3002\n\n\u6211\u7684\u60f3\u6cd5\u662fdp\u3002\n\n\u72b6\u6001\uff1a\n\n$f_{i,j,S}(j \\not\\in S)$\uff0c\u8868\u793a\u4ece\u8d77\u70b9\u5230\u8282\u70b9j\u7684\u8ddd\u79bb\u4e3ai\uff0c\u6211\u73b0\u5728\u8981\u4ecej\u5f00\u59cb\u6316\u8fb9\uff0c\u6316\u901a\u96c6\u5408S\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u8f6c\u79fb\u65f6\uff0c\u6211\u679a\u4e3e\u4ece\u8282\u70b9j\u6253\u51fa\u7684\u7b2c\u4e00\u6761\u8fb9\uff0c\u5047\u8bbe\u5b83\u662fj->k\uff0c\u518d\u679a\u4e3e\u4ecek\u8981\u6253\u5230\u7684\u5b50\u96c6$S_2\\subset S$\uff0c\u90a3\u4e48\n\n$$f_{i, j, S} = \\min_{k \\in S_2 \\subset S} (d[j][k] * (i + 1) + f_{i + 1, k, S_2 - \\{k\\}} + f_{i, j, S - S_2})$$\n\n\u6700\u540e\u53d6\u6240\u6709$f_{0,i,U-{i})$\u7684\u6700\u5c0f\u503c\u5373\u53ef\uff0c\u5176\u4e2d$U$\u662f\u5168\u96c6\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u3002\u3002\u8fd9\u4e2a\u592a\u96be\u7b97\uff0c\u7528\u4e86\u597d\u591a\u4e8c\u9879\u5f0f\u7cfb\u6570\u6052\u7b49\u5f0f\uff0c\u8fd9\u91cc\u7565\u53bb\u3002\n\n\u7a0b\u5e8f\u4e2d\u5148\u679a\u4e3e\u7684$S_2$\u540e\u679a\u4e3e\u7684$k \\in S_2$\uff0c\u5e76\u4e14\u9884\u5904\u7406\u4e86\u6bcf\u4e2a\u96c6\u5408\u7684\u6700\u5c0f\u5143\u7d20\u4ee5\u52a0\u5feb\u679a\u4e3e\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <algorithm>\n#include <cstdio>\n#include <cstring>\nnamespace rqy{\n  const int N = 13;\n  const int INF = 0x3f3f3f3f;\n  int f[N][N][1 << N];\n  int siz[1 << N], ttt[1 << N];\n  int d[N][N];\n  void main() {\n    int n, m, x, y, z;\n    scanf(\"%d%d\", &n, &m);\n    memset(f, 0x3f, sizeof f);\n    memset(d, 0x3f, sizeof d);\n    while (m--) {\n      scanf(\"%d%d%d\", &x, &y, &z);\n      --x; --y;\n      d[y][x] = d[x][y] = std::min(d[x][y], z);\n    }\n    int up = 1 << n;\n    for (int i = 1; i < up; ++i) siz[i] = siz[i & (i - 1)] + 1;\n    for (int i = 0; i < n; ++i) ttt[1 << i] = i;\n    for (int i = 1; i < up; ++i) ttt[i] = ttt[i & -i];\n    for (int i = 0; i < n; ++i)\n      f[n - 1][i][0] = 0;\n    for (int j = n - 2; ~j; --j)\n      for (int i = 0; i < n; ++i) {\n        f[j][i][0] = 0;\n        for (int S = 1; S < up; ++S) if (((~S >> i) & 1) && (siz[S] <= n - j - 1))\n          for (int S2 = S; S2; S2 = (S2 - 1) & S) if (f[j][i][S & ~S2] < f[j][i][S]) {\n            int tmp = S2;\n            for (int k = ttt[tmp]; tmp; k = ttt[tmp &= ~(1 << k)])\n              if (d[i][k] < INF)\n                f[j][i][S] = std::min(f[j][i][S],\n                    (j + 1) * d[i][k] + f[j + 1][k][S2 & ~(1 << k)] + f[j][i][S & ~S2]);\n          }\n      }\n    int ans = INF;\n    for (int i = 0; i < n; ++i) ans = std::min(ans, f[0][i][(up - 1) & ~(1 << i)]);\n    printf(\"%d\\n\", ans);\n  }\n};\nint main() {\n  rqy::main();\n  return 0;\n}\n```",
        "postTime": 1510567353,
        "uid": 7868,
        "name": "_rqy",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u849f\u84bb\u535a\u5ba2\u4f20\u9001\u95e8\uff1a[QAQ](https://www.cnblogs.com/GoldenPotato/p/9599666.html)\n\n\n------------\n## Solution\n\n\u8fd9\u9053\u9898\u7684\u662f\u4e00\u9053\u5f88\u5de7\u5999\u7684\u72b6\u538bDP\u9898\u3002\n\n\u9996\u5148\uff0c\u770b\u5230\u6570\u636e\u8303\u56f4\uff0c\u5e94\u8be5\u72b6\u538bDP\u6ca1\u9519\u4e86\u3002\n\n.\n\n\u6839\u636e\u6211\u4eec\u4e4b\u524d\u72b6\u538b\u65b9\u7a0b\u7684\u8bbe\u8ba1\u7ecf\u9a8c\uff0c\u6211\u4eec\u5f88\u5feb\u5c31\u80fd\u8bbe\u8ba1\u51fa\u8fd9\u6837\u7684\u65b9\u7a0b\uff1a\n\n\u8bbef[i][j]\u8868\u793a\u7528\u5230\u7b2ci\u4e2a\u5143\u7d20\uff0c\u5f53\u524d\u8fde\u63a5\u72b6\u6001\u4e3aj\u7684\u5f00\u9500\u7684min\n\n\u4f46\u662f\u6211\u4eec\u5f88\u5feb\u5c31\u4f1a\u53d1\u73b0\uff0c\u8fd9\u4e2a\u65b9\u7a0b\u6ca1\u6cd5\u8f6c\u79fb\uff0c**\u56e0\u4e3a\u968f\u7740\u8fde\u63a5\u65b9\u6848\u7684\u4e0d\u540c\uff0c\u65b0\u63d2\u5165\u7684\u70b9\u7684K\u503c\u4f1a\u4e0d\u540c\u3002**\n\n .\n\n\u600e\u4e48\u529e\u5462\uff1f\n\n\u8fd9\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u91cd\u65b0\u8bbe\u8ba1\u4e00\u4e2a\u5de7\u5999\u7684\u7684\u72b6\u6001\u3002\n\n\u91cd\u65b0\u9605\u8bfb\u9898\u76ee\uff0c**\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u9898\u76ee\u4e2d\u7684K\u503c\u53ef\u4ee5\u7406\u89e3\u4e3a\u8ddd\u79bb\u521d\u59cb\u70b9\u7684\u201c\u5c42\u6570\u201d**\uff0c\u4e0b\u9762\u8fd9\u5e45\u56fe\u53ef\u4ee5\u7b80\u5355\u7684\u8bf4\u660e\u51fa\u6765\uff1a\n\n![QAQ](https://cdn.luogu.com.cn/upload/pic/32088.png)\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u8fd9\u6837\u5b50\u8bbe\u72b6\u6001\uff1a\n\n**\u8bbef[i][j]\u8868\u793a\u5230\u7b2ci\u5c42\uff0c\u603b\u5171\u53d6\u4e86\u7684\u70b9\u7684\u72b6\u6001\u4e3aj\u3002**\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u8f6c\u79fb\u5c31\u53ef\u4ee5\u53d6\u51fa\u6765\u4e86\uff1a\n\n$$f[i][j]=MIN(f[i-1][k]+trans[k][j]*(i-1))$$\n\n**(k\u4e3aj\u7684\u5b50\u96c6\uff0c\u5373\u6709\u53ef\u80fd\u8f6c\u79fb\u5230j\u7684\u72b6\u6001) (trans[k][j]\u8868\u793a\u4ece\u72b6\u6001k\u8f6c\u79fb\u5230\u72b6\u6001j\u7684\u6700\u5c0f\u82b1\u8d39\u7684\u8def\u7a0b)**\n\ntrans\u9700\u8981\u66b4\u529b\u9884\u5904\u7406\u51fa\u6765\u3002\n\n\u600e\u4e48\u679a\u4e3e\u5b50\u96c6\u5462\uff1f\n\n\u5982\u679c2^n\u679a\u4e3e\u5c31\u4f1aT\u6389\uff0c\u56e0\u4e3a\u6211\u4eec\u679a\u4e3e\u5230\u4e86\u975e\u5b50\u96c6\u7684\u60c5\u51b5\u3002\n\n\u8fd9\u91cc\u5c31\u5f15\u51fa\u4e86\u679a\u4e3e\u5b50\u96c6\u7684\u5c0f\u6280\u5de7\n\n**\u5bf9\u4e8e\u72b6\u6001x\uff0c\u5b83\u7684\u5b50\u96c6\u4e3a\uff1ap=x,p!=0,p=(p-1)&x **(\u81f3\u4e8e\u600e\u4e48\u8bc1\u660e\uff0c\u8fd9\u91cc\u5c31\u4e0d\u7ed9\u51fa\u4e86\uff0c\u5728\u8349\u7a3f\u4e0a\u63a8\u4e00\u63a8\u5c31\u4f1a\u53d1\u73b0\u91cc\u9762\u7684\u7cbe\u5999\u4e86)\n\n**\u7b54\u6848\u5c31\u662fmin(f[i][2^n-1])\uff0c\u521d\u59cb\u5316f[1][2^(i-1)]=0 (i\u2208[1,n])**\n\n. \n\n\u5c31\u9171\uff0c\u8fd9\u9053\u9898\u5c31\u88ab\u6211\u4eec\u5207\u6389\u5566\u03c6(>\u03c9<*) \n\n\n------------\n## Code\n```cpp\n//Luogu P3959 \u5b9d\u85cf \n//Sep,5th,2018\n//\u72b6\u538bDP+\u679a\u4e3e\u5b50\u96c6\u5c0f\u6280\u5de7\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nlong long read()\n{\n    long long x=0,f=1; char c=getchar();\n    while(!isdigit(c)){if(c=='-') f=-1;c=getchar();}\n    while(isdigit(c)){x=x*10+c-'0';c=getchar();}\n    return x*f;\n}\nconst int N=12+2;\nconst int M=1<<N;\nint n,m,dis[N][N],trans[M][M],POW[N];\nlong long f[N][M];\nint main()\n{\n    n=read(),m=read();\n    memset(dis,0x3f,sizeof dis);\n    for(int i=1;i<=m;i++)\n    {\n        int s=read(),t=read(),v=read();\n        if(dis[s][t]>v)\n            dis[s][t]=dis[t][s]=v;\n    }\n    \n    m=(1<<n);\n    POW[0]=1;\n    for(int i=1;i<=n;i++)\n        POW[i]=POW[i-1]*2;\n    for(int i=0;i<m;i++)\n        for(int j=i;j!=0;j=(j-1)&i)\n        {\n            bool OK=true;\n            int temp=i^j;\n            for(int k=n-1;k>=0;k--)\n                if(temp>=POW[k])\n                {\n                    int tmin=0x3f3f3f3f;\n                    for(int o=1;o<=n;o++)\n                        if((POW[o-1]&j)==POW[o-1])\n                            tmin=min(tmin,dis[o][k+1]);\n                    if(tmin==0x3f3f3f3f)\n                    {\n                        OK=false;\n                        break;\n                    }\n                    trans[j][i]+=tmin;\n                    temp-=POW[k];\n                }\n            if(OK==false)\n                trans[j][i]=0x3f3f3f3f;\n        }\n        \n    /*cerr<<endl<<endl;\n    for(int i=0;i<m;i++)\n        for(int j=0;j<m;j++)\n            if(trans[i][j]!=0x3f3f3f3f and trans[i][j]!=0)\n                cerr<<i<<\" \"<<j<<\" \"<<trans[i][j]<<endl;*/\n    \n    memset(f,0x3f,sizeof f);\n    for(int i=1;i<=n;i++)\n        f[1][POW[i-1]]=0;\n    for(int i=2;i<=n;i++)\n        for(int j=0;j<m;j++)\n            for(int k=j;k!=0;k=(k-1)&j)\n                if(trans[k][j]!=0x3f3f3f3f)\n                    f[i][j]=min(f[i][j],f[i-1][k]+(i-1)*trans[k][j]);\n    \n    long long ans=0x3f3f3f3f3f3f3f3fll;\n    for(int i=1;i<=n;i++)\n        ans=min(ans,f[i][m-1]);\n    printf(\"%lld\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1536225782,
        "uid": 52563,
        "name": "GoldenPotato137",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "[\u8001K\u7684\u535a\u5ba2\u4e2d\u7684\u8fd9\u7bc7\u6587\u7ae0](https://cnyali-lk.com/NOIP-2017-%E5%AE%9D%E8%97%8F/)\n\n\n\u8bbe$f_{i,j}$ \u8868\u793a\u5f53\u524d\u6700\u5927\u6df1\u5ea6\u4e3ai\uff0c\u5df2\u8fde\u901a\u70b9\u4e3aj\u7684\u65b9\u6848\u6570\u3002\n\n\u8f6c\u79fb\u7684\u65f6\u5019\uff0c\u679a\u4e3e\u6df1\u5ea6\u4e3ai+1\u7684\u70b9\u96c6\u5408k,\u7136\u540ek\u4e2d\u6bcf\u4e2a\u70b9\u90fd\u63a5\u5728j\u4e2d\u79bb\u5b83\u6700\u8fd1\u7684\u70b9\u4e0b\u9762\u3002\n\n\u8fd9\u4e2a\u53ef\u4ee5\u7528\u8ba1\u7b97$dis_{j,k}$\u6765\u505a\u3002\n\n\u4f46\u8fd9\u6837\u7a7a\u95f4\u590d\u6742\u5ea6\u662f$O(4^n)$\u7684\u3002\n\n\u663e\u7136$j\\cap k=\\varnothing$\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628aj\u96c6\u5408\u6807\u8bb0\u4e3a1\uff0ck\u96c6\u5408\u6807\u8bb0\u4e3a2\uff0c$O(3^n)$\u7684\u7b97\u3002\n\n\u90a3\u4e48\u603b\u65f6\u95f4\u590d\u6742\u5ea6$O(n3^n)$\n\n\u7a7a\u95f4\u590d\u6742\u5ea6$O(3^n)$\n\n```C++\n/*\nAuthor: CNYALI_LK\nLANG: C++\nPROG: 3959.cpp\nMail: cnyalilk@vip.qq.com\n*/\n#include<bits/stdc++.h>\n#define debug(...) fprintf(stderr,__VA_ARGS__)\n#define DEBUG printf(\"Passing [%s] in LINE %d\\n\",__FUNCTION__,__LINE__)\n#define Debug debug(\"Passing [%s] in LINE %d\\n\",__FUNCTION__,__LINE__)\n#define all(x) x.begin(),x.end()\nusing namespace std;\nconst double eps=1e-8;\nconst double pi=acos(-1.0);\ntypedef long long ll;\ntypedef pair<int,int> pii;\ntemplate<class T>int chkmin(T &a,T b){return a>b?a=b,1:0;}\ntemplate<class T>int chkmax(T &a,T b){return a<b?a=b,1:0;}\ntemplate<class T>T sqr(T a){return a*a;}\ntemplate<class T>T mmin(T a,T b){return a<b?a:b;}\ntemplate<class T>T mmax(T a,T b){return a>b?a:b;}\ntemplate<class T>T aabs(T a){return a<0?-a:a;}\n#define min mmin\n#define max mmax\n#define abs aabs\nint read(){\n\tint s=0,base=1;\n\tchar c;\n\twhile(!isdigit(c=getchar()))if(c=='-')base=-base;\n\twhile(isdigit(c)){s=s*10+(c^48);c=getchar();}\n\treturn s*base;\n}\nchar WriteIntBuffer[1024];\ntemplate<class T>void write(T a,char end){\n\tint cnt=0,fu=1;\n\tif(a<0){putchar('-');fu=-1;}\n\tdo{WriteIntBuffer[++cnt]=fu*(a%10)+'0';a/=10;}while(a);\n\twhile(cnt){putchar(WriteIntBuffer[cnt]);--cnt;}\n\tputchar(end);\n}\nint f[15][4096];\nint dis[531441],fa_Q[4096];\nint a[12][12];\nint stk[4096],t0p;\nint lowbit(int x){return x&-x;}\nint g(int a,int b){\n\treturn fa_Q[a]+fa_Q[b]*2;\n}\n\n\nint main(){\n#ifdef cnyali_lk\n\tfreopen(\"3959.in\",\"r\",stdin);\n\tfreopen(\"3959.out\",\"w\",stdout);\n#endif\n\tint n,u,v,m;\n\tn=read();\n\tif(n==1){printf(\"0\\n\");return 0;}\n\tm=read();\n\tmemset(f,0x3f,sizeof(f));\n\tfor(int i=0;i<n;++i){\n\t\tf[1][1<<i]=0;\n\t}\t\n\tmemset(dis,0x3f,sizeof(dis));\n\n\tint t=1<<n;\n\tfor(int i=1;i<t;++i)fa_Q[i]=fa_Q[i>>1]*3+(i&1);\n\twhile(m){\n\t\tu=1<<(read()-1);v=1<<(read()-1);\n\t\tchkmin(dis[g(u,v)],read());\n\t\tdis[g(v,u)]=dis[g(u,v)];\n\t\t--m;\n\t}\t\n\t\n\tint _t=t-1;\n\tfor(int i=1;i<t;++i){\n\t\tfor(int j=i^_t;j;j=(j-1)&(i^_t))stk[++t0p]=j;\n\t\twhile(t0p){\n\t\t\tif(stk[t0p]==lowbit(stk[t0p]))chkmin(dis[g(i,stk[t0p])],min(dis[g(i^lowbit(i),stk[t0p])],dis[g(lowbit(i),stk[t0p])]));\n\t\t\telse chkmin(dis[g(i,stk[t0p])],dis[g(i,stk[t0p]^lowbit(stk[t0p]))]+dis[g(i,lowbit(stk[t0p]))]);\n\t\t\t--t0p;\n\t\t}\n\t}\n\tint ans=0x3f3f3f3f;\n\tfor(int i=1;i<n;++i){\n\t\tfor(int j=1;j<t;++j)for(int k=_t^j;k;k=(k-1)&(_t^j))if(dis[g(j,k)]!=0x3f3f3f3f)chkmin(f[i+1][j|k],f[i][j]+dis[g(j,k)]*i);\n\t\tchkmin(ans,f[i][_t]);\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n\n```\n\n\n\n",
        "postTime": 1523240877,
        "uid": 8943,
        "name": "\u8001K",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "Dalao\u7684\u9898\u89e3\u591a\u6570\u662f\u4ec0\u4e48\u6a21\u62df\u9000\u706b\u3001DFS\u526a\u679d\u3001$O(3^nn^2)$\u7684\u72b6\u538bDP\u4e4b\u7c7b\u3002\u849f\u84bb\u5c1d\u8bd5\u7740\u628a\u72b6\u538b\u6539\u8fdb\u4e86\u4e00\u4e0b\u4f7f\u590d\u6742\u5ea6\u964d\u5230$O(3^nn)$\u3002\n\n\u8003\u8651\u5230\u6bcf\u6761\u8fb9\u7684\u8d21\u732e\u8ddf\u5b83\u6240\u5728\u7684\u5c42\u6709\u5173\uff0c\u6240\u4ee5\u5982\u679c\u6211\u4eec\u80fd\u591f\u5c06\u4e00\u5c42\u7684\u8fb9\u4e00\u8d77\u52a0\u8fdb\u53bb\uff0c\u8ba1\u7b97\u5c31\u4f1a\u65b9\u4fbf\u8bb8\u591a\u3002\u4e8e\u662f\u60f3\u529e\u6cd5\u628a\u8fd9\u4e2a\u8f6c\u79fb\u8fc7\u7a0b\u72b6\u538b\u4e00\u4e0b\u3002\n\n\u8bbe$f_{i,j}$\u4e3a\u5f53\u524d\u5df2\u9009\u70b9\u96c6\u4e3a$i$\uff0c\u4e0b\u4e00\u5c42\u52a0\u5165\u7684\u70b9\u96c6\u4e3a$j$\u65f6\uff0c\u65b0\u52a0\u5165\u7684\u6240\u6709\u70b9\u4e0e\u539f\u6709\u70b9\u4e4b\u95f4\u6700\u5c0f\u7684\u8fb9\u6743\u4e4b\u548c\u3002\u8ba1\u7b97\u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u6211\u4eec$O(2^n)$\u679a\u4e3e$i$\uff0c\u518d\u679a\u4e3e$i$\u7684\u8865\u96c6\u7684\u5b50\u96c6$j$\uff0c\u628a$j$\u7684$lowbit$\u6311\u51fa\u6765\uff0c$f_{i,j}$\u7b49\u4e8e$f_{i,j-lowbit(j)}$\u52a0\u4e0a$\\log lowbit(j)$\u4e0e$i$\u4e4b\u95f4\u7684\u6700\u5c0f\u8fb9\u6743\u3002\n\n\u8fd9\u4e00\u90e8\u5206\u7684\u590d\u6742\u5ea6\u662f$O(3^nn)$\uff08$n$\u5143\u7d20\u96c6\u5408\u7684\u6240\u6709\u5b50\u96c6\u7684\u5b50\u96c6\u5927\u5c0f\u4e4b\u548c\u662f$3^n$\u53ef\u4ee5\u8bc1\uff09\n\n\u63a5\u7740\u5c31\u53ef\u4ee5\u5f00\u59cb\u8f6c\u79fb\u4e86\u3002\u8bbe$g_{l,i}$\u4e3a\u603b\u5c42\u6570\u4e3a$l$\uff0c\u5df2\u9009\u70b9\u96c6\u4e3a$i$\u7684\u6700\u5c0f\u7b54\u6848\u3002\u53c2\u8003$f$\u7684\u5b9a\u4e49\u6211\u4eec\u53ef\u4ee5\u5f88\u5feb\u7684\u5199\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff08\u5f0f\u4e2d\u7684$i-j$\u4e3a\u96c6\u5408\u610f\u4e49\uff0c\u4ee3\u7801\u4e2d\u5199`i^j`\uff09\n\n$$g_{l,i}=\\sum\\limits_{j\\in i}g_{l-1,i-j}+l*f_{i-j,j}$$\n\n\u4e5f\u662f\u4e00\u904d\u679a\u4e3e\u5b50\u96c6\uff0c\u590d\u6742\u5ea6\u8fd8\u662f$O(3^nn)$\u3002\u6700\u540e$\\max\\limits_{l=0}^ng_{l,2^n-1}$\u5c31\u662f\u7b54\u6848\u3002\n\n\u5f53\u7136\uff0c\u4e3a\u4e86\u5b9e\u9645\u590d\u6742\u5ea6\u548c\u7406\u8bba\u4e00\u81f4\uff0c\u6211\u4eec\u679a\u4e3e\u5b50\u96c6\u4e0d\u80fd\u8fd9\u6837\u66b4\u679a\n```cpp\n\tfor(i=0;i<=S;++i)\n    \tif(i&S)//do something\n```\n\u800c\u5e94\u8be5\u8fd9\u6837\n```cpp\n\tfor(i=S;i;i=(i-1)&S)\n    \t//do something\n```\n\u8ddf\u961f\u7237Anson\u5b66\u7684\uff0c\u5177\u4f53\u539f\u7406\u849f\u84bb\u4e5f\u7b56\u4e0d\u6e05\u695a\u554aqwq\n\n\u4ee3\u7801\u5341\u5206\u7b80\u6d01\uff0c\u6ce8\u610fINF\u7684\u8bbe\u7f6e\n```cpp\n#include<bits/stdc++.h>\n#define R register int\nusing namespace std;\nconst int N=13,M=4096,INF=0x01010101;\nint a[N][N],f[M][M],g[N][M],ne[M],lg[M];\ninline void chkmn(R&x,R y){\n\tif(x>y)x=y;\n}\nint main(){\n\tmemset(a,1,sizeof(a));\n\tmemset(g,63,sizeof(g));//\u8c8c\u4f3c\u9700\u8981\u533a\u522b\u5bf9\u5f85\n\tR n,m,S,s,i,j,l,x,y,v;\n\tcin>>n>>m;\n\tS=(1<<n)-1;\n\tfor(i=0;i<n;++i)\n\t\tlg[1<<i]=i;//log\u9884\u5904\u7406\n\twhile(m--){\n\t\tcin>>x>>y>>v;\n\t\tif(a[--x][--y]>v)//\u90bb\u63a5\u77e9\u9635\u5b58\u8fb9\n\t\t\ta[x][y]=a[y][x]=v;\n\t}\n\tfor(i=1;i<=S;++i){\n\t\tv=0;\n\t\tfor(j=s=S^i;j;j=(j-1)&s)\n\t\t\tne[j]=v,v=j;//\u4e3a\u4e86\u66f4\u65b0\u987a\u5e8f\u9700\u8981\u53cd\u5411\u679a\u4e3e\n\t\tfor(j=v;j;j=ne[j]){\n\t\t\tx=lg[j&-j];v=INF;\n\t\t\tfor(y=0;y<n;++y)//\u627e\u5230\u53ef\u4ee5\u8fde\u63a5\u7684\u6700\u5c0f\u8fb9\u6743\n\t\t\t\tif(1<<y&i)chkmn(v,a[x][y]);\n\t\t\tf[i][j]=f[i][j^(j&-j)]+v;\n\t\t}\n\t}\n\tfor(i=1;i<=S;i<<=1)\n\t\tg[0][i]=0;//\u72b6\u6001\u9884\u5904\u7406\n\tfor(l=1;l<n;++l)\n\t\tfor(i=1;i<=S;++i)\n\t\t\tfor(j=i;j;j=(j-1)&i)\n\t\t\t\tchkmn(g[l][i],g[l-1][i^j]+f[i^j][j]*l);\n\tv=0x7fffffff;\n\tfor(l=0;l<=n;++l)\n\t\tchkmn(v,g[l][S]);\n\tcout<<v<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1537328797,
        "uid": 61325,
        "name": "FlashHu",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u8fd9\u9053\u72b6\u538bdp\u8fd8\u662f\u9700\u8981\u4e00\u4e9b\u4f4d\u8fd0\u7b97\u6280\u5de7\u7684\n\n\u4e0d\u50cf\u53bb\u5e74\u7684\u72b6\u538b\u90a3\u4e48\u6c34\u4e86\n\n\u4e00\u4e2a\u6734\u7d20\u7684\u60f3\u6cd5\u662f\u8fd9\u6837\n\n\u6211\u4eec\u5982\u679c\u6709\u4e00\u68f5\u751f\u6210\u6811\uff0c\u73b0\u5728\u8981\u5f80\u91cc\u9762\u52a0\u5165\u4e00\u4e2a\u70b9\n\n\u90a3\u4e48\u8d2a\u5fc3\u7684\u52a0\u8fb9\u5373\u53ef\uff08\u679a\u4e3e\u8be5\u70b9\u5230\u751f\u6210\u6811\u6bcf\u4e00\u4e2a\u70b9\u7684\u8fde\u8fb9\uff09\n\n\u5f53\u7136\u4e0a\u8ff0\u505a\u6cd5\u663e\u7136\u6709\u7eb0\u6f0f\uff0c\u5982\u679c\u8fd9\u4e2a\u70b9\u7684\u6700\u4f18\u8def\u5f84\u7aef\u70b9\u4e0d\u5728\u751f\u6210\u6811\u4e2d\uff0c\u5c31\u4e0d\u5bf9\u4e86\n\n\u4f46\u662f\u5982\u679c\u7ed9\u5b9a\u4e00\u4e2a\u52a0\u70b9\u5e8f\u5217\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u4e0a\u8ff0\u8d2a\u5fc3\u5f97\u51fa\u7684\u662f\u8be5\u6392\u5217\u4e0b\u7684\u6700\u4f18\u89e3\u3002\n\n\u6240\u4ee5\u679a\u4e3e\u5168\u6392\u5217\uff0c\u4e4b\u540e\u8d2a\u5fc3\u5373\u53ef\n\n\u8fd9\u6837\u505a\u6beb\u65e0\u7591\u95ee\u7684n\uff01\\*n^2\u4f60\u4f1at4\u4e2a\u70b9\uff0c\u7136\u540e\u6df7\u523080\n\n\u90a3\u4e48\u4ed4\u7ec6\u7684\u770b\u4e00\u4e0b\uff0c\u5176\u5b9e\u8d2a\u5fc3\u4e0d\u4ec5\u662f\u8be5\u9009\u62e9\u6392\u5217\u4e0b\u7684\u6700\u4f18\u89e3\n\n\u8fd8\u662f\u6df1\u5ea6\u5e8f\u5217\u4e0b\u7684\u6700\u4f18\u89e3\n\n\u6211\u4eec\u679a\u4e3e\u7684\u5168\u6392\u5217\u5f88\u591a\uff0c\u4f46\u662f\u5bf9\u5e94\u7684\u6df1\u5ea6\u5e8f\u5217\u5374\u5f88\u5c11\n\n\u90a3\u4e48\u53ef\u4e0d\u53ef\u4ee5\u4ece\u6df1\u5ea6\u5f00\u59cb\u601d\u8003\u5462\uff1f\n\n\u6211\u4eec\u8bbedp[i][j]\u8868\u793a\u4e00\u4e2a\u6709\u96c6\u5408i\uff0c\u6700\u5927\u6df1\u5ea6\u4e3aj\u7684\u751f\u6210\u6811\u7684\u4ee3\u4ef7\u4e4b\u548c\n\n\u503c\u4e3a0x3f3f3f3f\u4e3a\u4e0d\u5b58\u5728\n\n\uff08\u4f3c\u4e4e\u8fd8\u6709\u4e00\u4e2a\u4fdd\u5b58\u6700\u540e\u4e00\u5c42\u7684\u6570\u7ec4\uff0c\u4f46\u8fd9\u5176\u5b9e\u662f\u4e0d\u5fc5\u8981\u7684\uff09\n\n\u90a3\u4e48\u8f6c\u79fb\u7684\u65f6\u5019\uff0c\u5982\u679ci\uff0cj\u5b58\u5728\n\n\u90a3\u4e48\u5b83\u7684\u4e0b\u4e00\u5c42\u53ef\u4ee5\u662fi\u7684\u8865\u96c6\u7684\u5b50\u96c6\n\n\u4e5f\u5c31\u662f\u8bf4\u8981\u679a\u4e3ei\u7684\u8865\u96c6\u7684\u5b50\u96c6\uff0c\u7136\u540e\u6309\u521a\u624d\u7684\u8d2a\u5fc3\u6cd5\u5219\u8d70\n\n\u5c31\u80fd\u8ba1\u7b97\u51fa\u4e0b\u4e00\u4e2a\u72b6\u6001\u7684\u503c\u3002\n\n\u53ea\u662f\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u8fd9\u6837\u8ba1\u7b97\u51fa\u7684\u503c\u663e\u7136\u504f\u5927\uff0c\u5e76\u4e14\u6c38\u4e0d\u504f\u5c0f\n\n\u56e0\u4e3a\u6211\u4eec\u628a\u6240\u6709\u70b9\u7684\u6df1\u5ea6\u90fd\u6309\u6700\u5927\u6df1\u5ea6\u7b97\u4e86\uff0c\n\n\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u8bc1\u660e\uff0c\u5b58\u5728\u4e00\u4e9b\u72b6\u6001\u5b83\u4eec\u7684\u503c\u662f\u51c6\u7684\n\n\u800c\u95ee\u9898\u7684\u6b63\u89e3\u5c31\u5728\u5176\u4e2d\u3002\u4f60\u53d6min\uff0c\u5c31\u53ef\u4ee5\u6ee4\u6389\u9519\u89e3\n\n\uff08\u597d\u597d\u60f3\u60f3\uff0c\u4f60\u8981\u662f\u6bcf\u4e00\u5c42\u90fd\u6070\u597d\u8499\u5bf9\u4e86\uff0c\u8d2a\u5fc3\u51fa\u7684\u8def\u5f84\u5c31\u662f\u4e0a\u4e0b\u4e24\u5c42\u4e4b\u95f4\u7684\uff09\n\n\u8fd9\u6837\u90a3\u4e2a\u4fdd\u5b58\u6700\u540e\u4e00\u5c42\u7684\u6570\u7ec4\u5c31\u6ca1\u6709\u5fc5\u8981\u8bbe\u4e86\n\n\u53e6\u5916\u6709\u4e00\u4e2a\u6280\u5de7\uff0c\n\n\u8bbe\u5168\u96c6\u4e3as\uff0c\u539f\u96c6\u4e3aj\n\n\u5219int k=s^j;\n\nfor(int i=k;i;i=(i-1)&k)\n\n\u53ef\u4ee5\u4fbf\u5229j\u8865\u96c6\u7684\u5b50\u96c6\uff0c\u540c\u7406\u5982\u679c\u628ak\u6362\u6210j\u53ef\u4ee5\u4fbf\u5229\u5b50\u96c6\n\n\u4e0a\u4ee3\u7801~\n\n```cpp\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\nint dp[5000][20];\nint n;int m;\nint map[20][20];\nint res=0x3f3f3f3f;int up;\nint main()\n{\n    //\u4ee3\u7801\u4e11\u8bf7\u8f7b\u62cd\n    scanf(\"%d%d\",&n,&m);\n    for(int i=0;i<n;i++)\n    {\n        for(int j=0;j<i;j++)\n        {\n            map[i][j]=0x3f3f3f3f;\n            map[j][i]=0x3f3f3f3f;\n        }\n    }\n    for(int i=0;i<m;i++)\n    {\n        int u;int v;int val;\n        scanf(\"%d%d%d\",&u,&v,&val);\n        u-=1;v-=1;\n        if(map[u][v]>val)\n        {\n            map[u][v]=val;\n            map[v][u]=val;\n        }\n    }\n    up=pow(2,n);//\u8ba1\u7b97\u72b6\u538b\u7684\u4e0a\u754c\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=0;j<up;j++)\n        {\n            dp[j][i]=0x3f3f3f3f;\n        }\n    }\n    for(int i=0;i<n;i++)//\u8fb9\u754c\u6761\u4ef6\n    {\n        dp[1<<i][1]=0;\n    }\n    for(int i=1;i<=n;i++)//\u679a\u4e3e\u72b6\u6001\n    {\n        for(int j=0;j<up;j++)\n        {\n            if(dp[j][i]!=0x3f3f3f3f)//\u5982\u679c\u5b58\u5728\n            {\n                //printf(\"dp[%d][%d]=%d\\n\",j,i,dp[j][i]);\n                int k=(up-1)^j;\n                for(int p=k;p;p=(p-1)&k)//\u679a\u4e3e\u8865\u96c6\u7684\u5b50\u96c6\n                {\n                    int rep=0;\n                    for(int st=0;st<n;st++)//\u8d2a\u5fc3\n                    {\n                        if((p&(1<<st))!=0)//\u679a\u4e3e\u5c5e\u4e8e\u6700\u5e95\u5c42\u7684\u8d77\u70b9\n                        {\n                            int minval=0x3f3f3f3f;\n                            for(int ed=0;ed<n;ed++)//\u679a\u4e3e\u5c5e\u4e8e\u5df2\u77e5\u6811\u7684\u7ec8\u70b9\n                            {\n                                if((j&(1<<ed))!=0)\n                                {\n                                    if(minval>map[st][ed])//\u8d2a\u5fc3\n                                    {\n                                        minval=map[st][ed];\n                                    }\n                                }\n                            }\n                            if(minval==0x3f3f3f3f)//\u4e0d\u53ef\u80fd\u7684\u6811\n                            {\n                                goto ed;\n                            }\n                            rep+=minval;\n                        }\n                    }\n                    rep*=i;//\u6240\u6709\u6df1\u5ea6\u6309\u6700\u5927\u6df1\u5ea6\u8ba1\n                    dp[j|p][i+1]=min(dp[j|p][i+1],dp[j][i]+rep);//\u66f4\u65b0\n                    //printf(\"->dp[%d][%d]=%d\\n\",j|p,i+1,dp[j|p][i+1]);\n                    ed:;\n                }\n            }\n        }\n    }\n    for(int i=1;i<=n;i++)//\u66f4\u65b0\u89e3\n    {\n        res=min(res,dp[up-1][i]);\n    }\n    printf(\"%d\",res);\n    return 0;//\u62dc\u62dc\u7a0b\u5e8f~\n}\n```",
        "postTime": 1510933791,
        "uid": 56384,
        "name": "shadowice1984",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5343\u4e07\u4e0d\u8981\u53bb\u88c5\u903c\u5199\u6a21\u62df\u9000\u706b\u3002\u8001\u8001\u5b9e\u5b9e\u5199$DFS$\u6216$DP$\u3002\n\n\u5173\u4e8e$dp$\uff0c\u72b6\u6001\u538b\u7f29\u662f\u4e2a\u5f88\u91cd\u8981\u7684\u77e5\u8bc6\u70b9\uff0c\u53ef\u4ee5\u5e2e\u52a9\u8bb0\u5fc6\u5316\u641c\u7d22\u9a97\u5206\uff0c\u5e2e\u52a9$dp$\u786e\u5b9a\u72b6\u6001\u3002\n\n\u6b64\u9898\u4e2d\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u4e1c\u897f\u5c31\u662f\u8ddd\u79bb$K$\uff0c$K$\u7684\u5b58\u5728\u4f7f\u8d2a\u5fc3\u7684\u6700\u5c0f\u751f\u6210\u6811\u4e0d\u6210\u7acb\u3002\n\n\u5982\u679c\u6211\u4eec\u628a\u8d77\u70b9\u770b\u505a\u6839\u8282\u70b9\uff0c\u8bb0\u6839\u8282\u70b9\u7684\u5c42\u6570$Deep$\u4e3a$1$\uff0c\u6bcf\u6b21\u9009\u53d6\u4e00\u90e8\u5206\u70b9\uff0c\u4e0e\u4e0a\u4e00\u5c42\u7684\u70b9\u76f8\u63a5\uff0c\u800c\u5728\u8fd9\u4e2a\u63a5\u8d77\u6765\u7684\u8fc7\u7a0b\u4e2d\uff0c$K$\u662f\u6052\u5b9a\u7684\uff0c\u5c31\u662f\u7b49\u4e8e\u4e0a\u4e00\u5c42\u5c42\u6570\u3002\n\n\u90a3\u4e48\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$dp [ k ] $ $[$ \u4e00\u5806\u6ca1\u6709\u63a5\u4e0a\u53bb\u7684\u70b9 $]$ $=$ $dp[ k - 1 ]$ $[$ \u5df2\u7ecf\u63a5\u597d\u7684\u70b9 $]$ $+ (k-1) \\times $\u63a5\u8fd9\u5806\u70b9\u6700\u5c0f\u7684\u4ee3\u4ef7\u3002\n\n\u6211\u4eec\u752801\u4e32\u6765\u8868\u793a\u70b9\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5316\u4f5c\u4e8c\u8fdb\u5236\uff0c$n$\u5f88\u5c0f\uff0c$2^{12}$\u53ef\u4ee5\u63a5\u53d7\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u6c42\u51fa\u4e00\u5806\u70b9$S_1$\u63a5\u4e0a\u53e6\u5916\u4e00\u5806$S_2$\u7684\u4ee3\u4ef7\u4e86\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u62c6\u5f00\u6765\u770b\uff0c\u5bf9\u4e8e\u4e00\u5806\u70b9\u91cc\u7684\u6bcf\u4e00\u4e2a\u70b9$i$\uff0c\u5982\u679c\u6211\u4eec\u6c42\u51fa\u5b83\u4e0e\u5b83\u8981\u63a5\u4e0a\u53bb\u7684\u90a3\u5806\u70b9\u7684\u4ee3\u4ef7\uff0c\u5c31\u53ef\u4ee5\u6c42\u548c\u4e00\u4e0b\u7b97\u51fa\u603b\u4ee3\u4ef7\u3002\n\n\u90a3\u4e48\u4e00\u4e2a\u70b9\u62fc\u63a5\u4e0a\u7684\u4ee3\u4ef7\u662f\u4ec0\u4e48\u5462\uff1f\u5f88\u660e\u663e\uff0c\u6700\u5c0f\u7684\u8fb9\u957f\u554a\uff01\n\n\u90a3\u4e48\u53ef\u4ee5\u5f97\u5230\uff0c\u5982\u679c$i$\u5c5e\u4e8e$S_1$\uff0c$j$\u5c5e\u4e8e$S_2$\uff0c\u90a3\u4e48$i$\u5230$S_2$\u7684\u6700\u5c0f\u4ee3\u4ef7$w_{iS_2}=min(v_{ij})$\uff0c$v$\u662f$i$\u5230$j$\u7684\u8fb9\u957f\u3002\n\n\u4e8e\u662f\u8f6c\u79fb\u65b9\u7a0b\u5c31\u662f\uff1a$dp_{kS_2}=dp_{k-1S_1}+(k-1)*\\sum w_{iS_2}$\n\n\n\u4ee3\u7801\uff1a\n```\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n,mm;\n\nlong long m[14][15];\nlong long w[15][4100];\nlong long dp[15][4100];\n\n//1<<(i-1)\u8868\u793a\u7b2ci\u4f4d\u4e3a1\n//j&(j-1)\u8868\u793a\u628a\u81ea\u5df1\u6240\u6709\u5b50\u96c6\u90fd\u679a\u4e3e\u4e00\u904d\n//\u82e5j\u662fi\u7684\u5b50\u96c6,i-j\u662fj\u7684\u8865\u96c6\n//1<<n==2^n\n//1<<n-1==2^0+2^1...+2^(n-1)\n\nint main()\n{\n    memset(dp,0x3f,sizeof(dp));\n    memset(m,0x3f,sizeof(m));\n    memset(w,0x3f,sizeof(w));\n    scanf(\"%d%d\",&n,&mm);\n\n    for(int i=1;i<=n;i++)\n        dp[1][1<<(i-1)]=0;\n    for(int i=1;i<=mm;i++)\n    {\n        int x,y;\n        long long z;\n        scanf(\"%d%d%lld\",&x,&y,&z);\n        m[x][y]=min(z,m[x][y]);\n        m[y][x]=m[x][y];\n    }\n\n    for(int i=1;i<=n;i++)\n    {\n        for(int k=1;k<=(1<<n)-1;k++)\n        {\n            for(int j=1;j<=n;j++)\n            {\n                if((1<<(j-1)&k)&&(!(1<<(i-1)&k)))\n                {\n                    w[i][k]=min(w[i][k],m[i][j]);\n                }\n            }\n            //cout<<w[i][k]<<\"   \"<<i<<\"   \"<<k<<endl;\n        }\n    }\n\n    long long ans=0x3f3f3f3f3f3f;\n    for(int i=1;i<=(1<<n)-1;i++)\n    {\n        for(int j=i&(i-1);j!=0;j=i&(j-1))\n        {\n            long long nw=0;\n            for(int k=1;k<=n;k++)\n            {\n                if(1<<(k-1)&(i-j))\n                {\n                    if(w[k][j]>ans)\n                        nw=0x3f3f3f3f3f3f;\n                    else nw+=w[k][j];\n                }\n            }\n            for(int k=2;k<=n;k++)\n            {\n                dp[k][i]=min(dp[k-1][j]+nw*(k-1),dp[k][i]);\n            }\n        }\n    }\n    for(int i=2;i<=n;i++)\n    {\n        ans=min(ans,dp[i][(1<<n)-1]);\n    }\n    if(ans>=0x3f3f3f3f3f3f)\n    {\n        printf(\"0\\n\");\n    }\n    else printf(\"%lld\\n\",ans);\n}\n\n```",
        "postTime": 1540451522,
        "uid": 34663,
        "name": "redegg",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u8bbe $f_{i,j,S}$ \u8868\u793a\u4ece $i$ \u5f00\u59cb\u6253\u901a\u96c6\u5408 $S$\uff0c\u4e14 $i$ \u7684\u6df1\u5ea6\u4e3a $j$ \u65f6\u7684\u6700\u5c0f\u4ee3\u4ef7\n\n\u663e\u7136\u6709\uff1a\n\n$$f_{i,j,S}=\\min\\limits_{(i,k,w) \\in E \\wedge k \\not\\in T \\subseteq S}f_{k,j+1,T}+f_{i,j,S-T-\\{k\\}}+w \\times j$$\n\n\u6ce8\u610f\u4e00\u5f00\u59cb\u7684\u8fb9\u6bd4\u8f83\u591a\uff0c\u53ef\u4ee5\u7528\u90bb\u63a5\u77e9\u9635\u6765\u5b58\u56fe\n\n``` cpp\n// luogu-judger-enable-o2\n#include <bits/stdc++.h>\nusing namespace std;\nconst int inf = 0x3f3f3f3f, N = 15;\nint a[N][N], n, m, f[N][N][1 << N], vis[N][N][1 << N];\n\nint to(int x) { return 1 << (x - 1); }\n\nint dfs(int u, int dep, int S) {\n\tint &x = f[u][dep][S]; if(vis[u][dep][S]) return x; vis[u][dep][S] = 1; if(!S) return x = 0; x = inf;\n\tfor(int v = 1 ; v <= n ; ++ v)\n\t\tif(a[u][v] != inf && (S & to(v)))\n\t\t\tfor(int T = S ; T ; T = (T - 1) & S)\n\t\t\t\tif(T & to(v))\n\t\t\t\t\tx = min(x, dfs(v, dep + 1, T - to(v)) + dfs(u, dep, S - T) + dep * a[u][v]);\n\treturn x;\n}\n\nint main() {\n\tmemset(a, 0x3f, sizeof a);\n\tscanf(\"%d%d\", &n, &m);\n\tfor(int i = 1, u, v, w ; i <= m ; ++ i) scanf(\"%d%d%d\", &u, &v, &w), a[u][v] = a[v][u] = min(a[u][v], w);\n\tint ans = inf;\n\tint all = to(n + 1) - 1;\n\tfor(int i = 1 ; i <= n ; ++ i) ans = min(ans, dfs(i, 1, all - to(i)));\n\tprintf(\"%d\\n\", ans);\n}\n```",
        "postTime": 1540432546,
        "uid": 47111,
        "name": "nekko",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u5b98\u65b9\u6570\u636e\u51fa\u6765\u4e86\uff0c\u91cd\u65b0\u8c03\u53c2\u540eAC\u7684\u6a21\u62df\u9000\u706b\u3002\n\n\u6839\u636e\u9898\u76ee\u53ef\u4ee5\u53d1\u73b0\uff0c\u6bcf\u4e00\u6761\u8fb9\u90fd\u5bf9\u6700\u540e\u7684\u7b54\u6848\u6709\u5f71\u54cd\u3002\n\n\u8003\u8651\u5230\u7b54\u6848\u6bd4\u8f83\u8fde\u7eed\uff0c\u53ef\u4ee5\u8003\u8651\u6a21\u62df\u9000\u706b\u3002\n\n\u9996\u5148\u8981\u679a\u4e3e\u8d77\u70b9\uff0c\u6bcf\u6b21\u5148\u7528prim/bfs\u8d2a\u5fc3\u627e\u8fd1\u4f3c\u89e3\uff0c\u518d\u8fdb\u884cn\u6b21\u9000\u706b\u3002\n\n\u8bb0b[i]\u4e3ai\u53f7\u8282\u70b9\u662f\u4ece\u54ea\u4e00\u4e2a\u8282\u70b9\u4e0a\u8f6c\u79fb\u8fc7\u6765\u7684\uff0c\u6bcf\u6b21\u968f\u673a\u8c03\u6574\u4e00\u4e2a\u8282\u70b9\u7684\u5148\u7f6e\u8282\u70b9\uff0cO\uff08n\uff09\u8ba1\u7b97\u7b54\u6848\u3002\n\n\u8c03\u53c2\u6bd4\u8f83\u7384\u5b66\u3002\n\nps\uff1a\u6211srand\u4e8610\u5341\u4e2a\u6570\uff0c\u53ea\u6709\u4e00\u4e2a\u8fc7\u4e86\uff0c\u800c\u4e14\u8fd9\u4e2a\u6570\u2026\u2026\n\nps\uff1a\u8003\u573a\u5f97\u520695\uff0c\u88ab\u5361\u4e86\u4e00\u4e2a\u70b9\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=110;\nconst int maxm=2010;\nint mp[maxn][maxn],n,m,i,j,k,x,y,z,ans,s;\nint a[maxn],b[maxn],c[maxn],ha[maxn],oldf,newf,vis[maxn];\ndouble T;\nint read(){\n    int tot=0,fh=1;\n    char c=getchar();\n    while((c-'0'<0)||(c-'0'>9)){if(c=='-')fh=-1;c=getchar();}\n    while((c-'0'>=0)&&(c-'0'<=9)){tot=tot*10+c-'0';c=getchar();}\n    return tot*fh;\n}\nint dfs(int x,int dep){\n    if (dep>13) return 0;\n    if (x!=s){vis[x]=dfs(c[x],dep+1);return vis[x];}\n    else return 1;\n}\nint check(){\n    int i;\n    memset(vis,0,sizeof(vis));\n    for (i=1;i<=n;i++){\n        if (vis[i]==0) vis[i]=dfs(i,1);\n        if (vis[i]==0) return 0;\n    }\n    return 1;\n}\nint dfs2(int x){\n    if ((s==x)||(vis[x]!=0)) return vis[x];\n    int t1=dfs2(c[x])+1;\n    vis[x]=t1;\n    newf=newf+t1*mp[c[x]][x];\n    return t1;\n}\nvoid getnewf(){\n    int i;\n    newf=0;\n    memset(vis,0,sizeof(vis));\n    for (i=1;i<=n;i++){\n        if (vis[i]==0) dfs2(i);\n    }\n}\nvoid bfs(int x){\n    int l=1,r=1,i; a[l]=x; oldf=0; b[x]=0;\n    memset(ha,-1,sizeof(ha)); ha[x]=0;\n    while (l<=r){\n        for (i=1;i<=n;i++){\n            if ((ha[i]==-1)&&(mp[a[l]][i]!=1e9)){\n                ha[i]=ha[a[l]]+1;\n                r++; a[r]=i;\n                b[i]=a[l];\n                oldf=oldf+mp[a[l]][i]*ha[i];\n            }\n        }\n        l++;\n    }\n    ans=min(ans,oldf);\n}\nint main(){\n    n=read(); m=read();\n    for (i=1;i<=n;i++){\n        for (j=1;j<=n;j++){\n            if (i==j) mp[i][j]=0;\n            else mp[i][j]=1e9;\n        }\n    }\n    for (i=1;i<=m;i++){\n        x=read(); y=read(); z=read();\n        mp[x][y]=min(mp[x][y],z);\n        mp[y][x]=min(mp[y][x],z);\n    }\n    ans=1e9;\n    srand(19260817);\n    for (i=1;i<=n;i++){\n        s=i; bfs(i);\n        if (n<=2) continue;\n        for (T=10000;T>=0.00001;T=T*0.9999){\n            x=(rand()%(n-1))+1; if (x>=i) x++;\n            y=(rand()%(n-1))+1;\n            if (y>=x) y++;\n            if (mp[x][y]==1e9) continue;\n            for (j=1;j<=n;j++) c[j]=b[j];\n            c[x]=y;\n            if (check()==0) continue;\n            getnewf();\n            if ((newf<=oldf)||( exp((oldf-newf)/T))>=((rand()%1000000)/1000000.0) ){\n                ans=min(ans,newf);\n                for (j=1;j<=n;j++) b[j]=c[j];\n                oldf=newf;\n            }\n        }\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1511321231,
        "uid": 20310,
        "name": "\u8f6e\u56de\u4e4b\u7ec8\u672b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\t\u672c\u9898\u6b63\u89e3\u542c\u8bf4\u662fDFS\uff1f\uff1f\uff1f\u9707\u60ca\uff01\uff01\n    \n    \u4e0d\u8fc7\u770b\u5230n<=12\u65f6\u5f53\u5373\u9009\u62e9\u72b6\u538b.....\n    \n    \u8fd9\u9053\u72b6\u538b\u7565\u6c34\u6c34\n    \n    \u8f6c\u79fb\u65b9\u7a0b\uff1af[k][i]=min(f[k][i],f[k-1][i-j]+diss*k)\n    \n    \u4ee3\u7801\u5982\u4e0b\n    \n\t------------\n\n    \n    \n    \n    #include<iostream>\n\t#include<cstdio>\n\t#include<cstring>\n\t#include<algorithm>\n\t#include<queue>\n\t#include<map>\n\t#include<cmath>\n\tusing namespace std;\n\tconst int N=13;\n\tconst int INF=1<<29;\n\tlong long n,m,w[N][1<<N],f[N][1<<N];\n\tlong long dis[N][N],k,p,l;\n\tint main()\n\t{\n\t\tmemset(dis,0x3f,sizeof(dis));\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t    scanf(\"%d%d%d\",&k,&p,&l);\n\t\t    if(l>dis[k][p])\n\t\t\t\tcontinue;\n\t\t    dis[k][p]=dis[p][k]=l;\n\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tfor(int j=1;j<(1<<n);j++)\n\t\t\t{\n\t\t\t\tw[i][j]=INF;\n\t\t\t\tfor(int k=1;k<=n;k++)\n\t\t\t\t\tif(1<<(k-1)&j)\n\t\t\t\t\t\tw[i][j]=min(w[i][j],dis[i][k]);\t\t\t\t}\n\t\tfor(int i=3;i<(1<<n);i++)\n\t\t{\n\t\t\tif(i&(i-1))\n\t\t\t\tfor(int ll=0;ll<=n;ll++)\n\t\t\t\t\tf[ll][i]=INF;\n\t\t\tfor(int j=i&(i-1);j;j=i&(j-1))\n\t\t\t{\n\t\t\t\tlong long diss=0;\n\t\t\t\tfor(int k=0;k<n;k++)\n\t\t\t\t\tif((1<<k)&j)\n\t\t\t\t\t\tdiss+=w[k+1][i-j];\t\t\t \n\t\t\t\tfor(int k=1;k<=n;k++)\n\t\t\t\t\tf[k][i]=min(f[k][i],f[k-1][i-j]+diss*k);//\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\t\t\t\t\t\n\t\t\t}\n\t\t}\n\t\tlong long ans=f[1][(1<<n)-1];\n\t\tfor(int i=2;i<=n;i++)\n\t\t\tans=min(ans,f[i][(1<<n)-1]);\n\t\tprintf(\"%lld\",ans);\n\t\treturn 0;\n\t}\n    \n    \n\n\t------------\n    \u8fd9\u6837\u7a0b\u5e8f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u8fd8ojbk\uff0c\u662f\u53ef\u4ee5\u8fc7\u7684\u3002\n",
        "postTime": 1532607637,
        "uid": 56564,
        "name": "\u7b2c\u4e00\u7eff\u8005\u5965\u6258",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": " [\u535a\u5ba2\u9605\u8bfb\u6548\u679c\u66f4\u4f73](https://www.cnblogs.com/HenryHuang-Never-Settle/p/11529900.html)\n\n----\n\n\u53c8\u5230\u4e86\u4e00\u5e74\u4e00\u5ea6~~NOIP~~CSP-S \u8d5b\u524d\u590d\u4e60\u505a\u771f\u9898\u7684\u65f6\u95f4\n\n\u4e8e\u662f\u5c31\u9047\u4e0a\u4e86\u8fd9\u9053\u9898\n\n---\n\n\u9996\u5148\u89c2\u5bdf\u6570\u636e\u8303\u56f4 $1 \\le n \\le 12$ ,\u90a3\u4e48\u6781\u5927\u53ef\u80fd\u6027\u662f\u72b6\u538b $\\texttt{DP}$ \u6216\u8005 $\\texttt{DFS}$ \u7206\u641c\n\n\u4f46\u7531\u4e8e\u8fd9\u9898\u653e\u5728\u4e86 $\\texttt{DP}$ \u5217\u8868\u91cc\u9762\uff0c\u4e8e\u662f\u4f18\u5148\u8003\u8651\u72b6\u538b\n\n\u7b80\u5316\u9898\u610f\uff1a\n\n> \u4ece\u7ed9\u5b9a\u7684 $n$ \u4e2a\u70b9\uff0c$m$ \u6761\u8fb9\u7684**\u6709\u91cd\u8fb9\u7684**\u65e0\u5411\u8054\u901a\u56fe\u4e2d\uff0c\u627e\u51fa\u4e00\u68f5\u751f\u6210\u6811\uff0c\u4f7f\u5f97\u9898\u76ee\u6240\u6c42\u4ef7\u503c\u6700\u5c0f\n\n\u4ece\u9898\u76ee\u7ed9\u51fa\u7684\u5efa\u8fb9\u4ef7\u503c\u6765\u770b\uff0c\u6211\u4eec\u53d1\u73b0\u4e00\u6761\u8fb9\u7684\u4ef7\u503c\u8ddf\u4ee5\u4e0b\u51e0\u70b9\u6709\u5173\uff1a\n\n* \u6839\u7684\u4f4d\u7f6e\n* \u5f53\u524d\u72b6\u6001\u4e0b\u7684\u6811\u7684\u9ad8\u5ea6\n* \u8be5\u8fb9\u7684\u957f\u5ea6\n\n\u8fb9\u7684\u957f\u5ea6\u4e0d\u80fd\u6539\u53d8\uff0c\u6839\u7684\u4f4d\u7f6e\u5e76\u4e0d\u80fd\u5f88\u597d\u7684\u4f5c\u4e3a $\\texttt{DP}$ \u65f6\u5019\u7684\u9636\u6bb5\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u4ee5\u6811\u7684\u9ad8\u5ea6\u4f5c\u4e3aDP\u7684\u9636\u6bb5\n\n\u8bbe\u6839\u7684\u6df1\u5ea6\u4e3a1\n\n\u8bbe  $\\texttt{f[i][j]}$ \u8868\u793a \u5f53\u524d\u6811\u7684\u9ad8\u5ea6\u4e3a $i$ ,\u5df2\u7ecf\u9009\u4e86\u7684\u70b9\u96c6\u7684\u96c6\u5408\u4e3a $j$,\u90a3\u4e48\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5373\u4e3a\n$$\nf[i][j]=\\min_{k\\  \\in \\ j}(f[i-1][j \\ \\mathrm{xor} \\ k]+dis[j \\ \\mathrm{xor} \\ k][k]\\cdot(i-1))\n$$\n\u5176\u4e2d\u5f02\u6216\u64cd\u4f5c\u5728\u8fd9\u91cc\u662f\u53d6\u8865\u96c6\u7684\u610f\u601d\uff0c$\\texttt{dis[i][j]}$ \u8868\u793a\u4ece $i$ \u8fd9\u4e2a\u5df2\u9009\u70b9\u96c6\u52a0\u4e0a\u4e0b\u4e00\u5c42\u5c06\u8981\u9009\u7684 $j$ \u8fd9\u4e2a\u70b9\u96c6\u6240\u9700\u8981\u7684\u6700\u5c0f\u82b1\u8d39\n\n\u90a3\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u5b8c\u5584 $\\texttt{dis}$ \u6570\u7ec4\u5462\n\n\u5148\u7ed9\u51fa\u9012\u63a8\u5f0f\n$$\ndis[i][j]=dis[i][j \\ \\mathrm{xor} \\ \\mathrm{lowbit}(j)]+\\min_{k=1}^{n\\ \\&\\& \\ (1<<k)\\&i}(d[\\log_2\\mathrm{lowbit}(j)+1][k])\n$$\n\u5176\u4e2d $d$ \u6570\u7ec4\u8868\u793a\u7b2c $i$ \u4e2a\u70b9\u5230 \u7b2c $j$ \u4e2a\u70b9\u7684\u9053\u8def\u957f\u5ea6\uff08\u6ca1\u6709\u5219\u4e3a $\\infty$ \uff09\uff0c$j$ \u4e3a $i$ \u7684\u8865\u96c6\u7684\u4efb\u4e00\u5b50\u96c6\n\n\u7136\u540e\u4ece\u5c0f\u5230\u5927\u679a\u4e3e $j$ \uff0c\u5c31\u80fd\u591f\u4fdd\u8bc1\u987a\u5e8f\u6b63\u786e\uff08\u56e0\u4e3a $j \\ \\mathrm{xor} \\ \\mathrm{lowbit}(j)$ \u4e00\u5b9a\u6bd4 $j$ \u8981\u5c0f\uff09\n\n\u56e0\u4e3a\u6bcf\u4e00\u6b21\u66f4\u65b0\u53ea\u6d89\u53ca\u5230\u4e00\u4e2a\u70b9\u7684\u66f4\u6539\uff0c\u6240\u4ee5\u4e0d\u96be\u5f97\u51fa\u8fd9\u6837\u9884\u5904\u7406 $dis$ \u6570\u7ec4\u7684\u6b63\u786e\u6027\n\n\u7136\u540e\uff0c\u8fd9\u9898\u5c31\u5b8c\u4e86\n\n\u53e6\u5916\u8fd8\u6709\u51e0\u70b9\u9700\u8981\u6ce8\u610f\u7684\n\n* \u8fb9\u6700\u597d\u4f7f\u7528\u90bb\u63a5\u77e9\u9635\u50a8\u5b58\uff0c\u56e0\u4e3a\u6709\u91cd\u8fb9\uff0c\u800c\u4e14\u8bf7\u4e0d\u8981\u5c06\u521d\u503c\u8d4b\u5f97\u592a\u5927\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u5728\u8fdb\u884c\u52a8\u6001\u89c4\u5212\u6c42\u89e3\u7684\u540c\u65f6\u6ea2\u51fa\uff0c\u4ece\u800c\u5bfc\u81f4\u7b54\u6848\u9519\u8bef\n\n* \u5982\u679c\u6309\u7167\u4e0a\u9762\u90a3\u79cd\u6734\u7d20\u7684\u505a\u6cd5\u6765\u8fdb\u884c\u6c42\u89e3\u590d\u6742\u5ea6\u6709\u53ef\u80fd\u4e0d\u80fd\u627f\u53d7\uff0c\u89c2\u5bdf\u53d1\u73b0\u6211\u4eec\u679a\u4e3e\u4e86\u8bb8\u591a\u4e0d\u5fc5\u8981\u7684\u5b50\u96c6\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6362\u4e00\u4e2a\u65b9\u5f0f\uff1a\n\n  ```cpp\n  for(int i=S;i;i=(i-1)&S)\n  ```\n\n  \u8fd9\u6837\u7684\u8bdd\u6240\u6709\u7684 $i$ \u5c31\u4e00\u5b9a\u662f $S$ \u7684\u5b50\u96c6\n\n  \u849f\u84bb\u7684\u7406\u89e3\uff1a\u4e0d\u7b49\u4e8e $S$ \u7684 $S$ \u7684\u5b50\u96c6\u4e00\u5b9a\u5728 $[0,S)$ \u4e2d\n\n  \u7136\u540e\u6216\u8fd0\u7b97\u53ef\u4ee5\u6c42\u51fa\u5728\u8fd9\u5f53\u4e2d**\u5341\u8fdb\u5236\u4e0b\u6570\u5b57\u6700\u5927\u7684\u5b50\u96c6** ,\u8bbe\u5176\u4e3a $P$,\u7136\u540e\u5176\u4f59\u6240\u6709\u7684\u5341\u8fdb\u5236\u8868\u793a\u6bd4\u4ed6\u5c0f\u7684\u5b50\u96c6\u90fd\u5728$[0,P)$ \u5f53\u4e2d\uff0c\u5982\u6b64\u5faa\u73af\u6c42\u89e3\uff0c\u81ea\u7136\u80fd\u591f\u5f97\u5230\u6240\u6709\u7684\u5b50\u96c6\n\n* \u5173\u4e8e\u72b6\u6001\u7684\u4e00\u70b9\u70b9\u4f18\u5316\n\n  \u5bb9\u6613\u53d1\u73b0\uff0c\u5f53\u6811\u9ad8\u4e3a $i$ \u65f6\uff0c\u81f3\u5c11\u9700\u8981 $i$ \u4e2a\u8282\u70b9\uff0c\u6240\u4ee5\u6240\u6709\u72b6\u6001\u4e2d\u70b9\u7684\u4e2a\u6570\u5c0f\u4e8e $i$ \u7684\uff08\u5373\u4e8c\u8fdb\u5236\u4f4d\u4e0a $1$ \u7684\u4e2a\u6570\u5c0f\u4e8e $i$ \u7684\uff09\uff0c\u5168\u90e8\u53ef\u4ee5\u4e0d\u7528\u679a\u4e3e\u5b50\u96c6\uff0c\u76f4\u63a5\u8df3\u8fc7\uff0c\u8fd9\u5bf9\u65f6\u95f4\u590d\u6742\u5ea6\u53c8\u6709\u4e86\u8fdb\u4e00\u6b65\u7684~~\u5e38\u6570~~\u4f18\u5316\u3002 \u8fd9\u53ef\u4ee5\u901a\u8fc7\u9884\u5904\u7406\u5f97\u5230\u3002\n\n\u6700\u540e\u8d34\u4e00\u4e0b\u4ee3\u7801\uff0c\u53d8\u91cf\u540d\u4e0e\u4e0a\u9762\u63d0\u5230\u7684\u7565\u6709\u4e0d\u540c\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=12;\nint d[maxn+5][maxn+5];\nint g[maxn+5][(1<<maxn)+5];\nint f[(1<<maxn)+5][(1<<maxn)+5];\nint lg[(1<<maxn)+5];//\u61d2 \nint q[(1<<maxn)+5],cnt;\nint sum[(1<<maxn)+5];\nint main()\n{\n\tmemset(g,63,sizeof g);\n\tios::sync_with_stdio(0);\n\tcin.tie(0),cout.tie(0);\n\tint n,m;\n\tcin>>n>>m;\n\tfor(int i=0;i<n;++i)\n\t\tlg[1<<i]=i;//\u9884\u5904\u7406\uff0c\u56e0\u4e3a\u61d2\n\tfor(int i=0;i<12;++i)\n\t\tfor(int j=0;j<12;++j)\n\t\t\td[i][j]=1000000;//\u8d4b\u6700\u5927\u503c\n\tfor(int i=1;i<=m;++i)\n\t{\n\t\tint a,b,c;\n\t\tcin>>a>>b>>c;\n\t\t--a,--b,d[a][b]=d[b][a]=min(d[a][b],c); \n\t}\n\tint x,S=(1<<n)-1;//\u5168\u96c6\u5b9a\u4e49\n\tfor(int i=1;i<=S;++i)\n\t{\n\t\tx=i;\n\t\twhile(x) x&=(x-1),++sum[i];\n\t}//\u9884\u5904\u7406\u6bcf\u4e00\u4e2a\u72b6\u6001\u4e0a\u70b9\u7684\u4e2a\u6570\n\tfor(int i=1;i<=S;++i)\n\t{\n\t\tcnt=0;\n\t\tfor(int j=S^i;j;j=(j-1)&(S^i)) q[++cnt]=j;//\u7531\u4e8e\u8fd9\u6837\u505a\u5b50\u96c6\u7684\u987a\u5e8f\u662f\u4ece\u5927\u5230\u5c0f\u7684\uff0c\u4e0d\u7b26\u5408DP\u7684\u987a\u5e8f\uff0c\u6240\u4ee5\u8981\u9006\u5e8f \n\t\tfor(int j=cnt;j>=1;--j)\n\t\t{\n\t\t\tint u=lg[q[j]&-q[j]],e=1000000;\n\t\t\tfor(int v=0;v<n;++v)\n\t\t\t\tif(1<<v&i) e=min(d[u][v],e);\n\t\t\tf[i][q[j]]=f[i][q[j]^(q[j]&-q[j])]+e;\n\t\t}\n\t}\n\tfor(int i=0;i<n;++i) g[1][1<<i]=0;//\u521d\u59cb\u72b6\u6001\n\tfor(int i=2;i<=n;++i)\n\t\tfor(int j=(1<<i)-1;j<=S;++j)//\u526a\u679d\uff0c\u8fd9\u91cci\u7684\u521d\u59cb\u72b6\u6001\u8df3\u8fc7\u4e86\u80af\u5b9a\u4e0d\u7b26\u5408\u7684\u72b6\u6001\n\t\t{\n\t\t\tif(sum[j]<i) continue;//\u526a\u679d\uff0c\u4e0d\u6ee1\u8db3\u76f4\u63a5\u8df3\u8fc7\n\t\t\tfor(int k=j;k;k=(k-1)&j)\n\t\t\t\tg[i][j]=min(g[i][j],g[i-1][j^k]+f[j^k][k]*(i-1));\n\t\t}\n\t\tint ans=(1<<30);\n\tfor(int i=1;i<=n;++i) ans=min(ans,g[i][S]);//\u53d6\u6700\u5c0f\u503c\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\n",
        "postTime": 1568638257,
        "uid": 43957,
        "name": "HenryHuang",
        "ccfLevel": 9,
        "title": "\u300cNOIP2017\u300d\u5b9d\u85cf"
    },
    {
        "content": "# \u7b2c\u4e00\u7bc7\u9898\u89e3\u7eaa\u5ff5\uff01\n\n\u8fd9\u9898\u7ed9\u4eba\u7b2c\u4e00\u53cd\u5e94\u80af\u5b9a\u662f\u5f80\u56fe\u8bba\u65b9\u9762\u60f3\n\u7136\u800c\u201c\u7206\u641c\u5927\u6cd5\u597d\u201d\n\u6211\u4eec\u53d8\u6362\u4e00\u4e0b\u601d\u8def\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u9700\u8981\u6807\u51c6\u6df1\u641c\u6a21\u677f\u4ee5\u53ca\u51e0\u4e2aif\u6765\u526a\u679d\u7684\u641c\u7d22\u9898\uff01\n\n\u9996\u5148\uff0c\u5c0f\u660e\u53ea\u4f1a\u5f00\u51ff\u53ef\u4ee5\u4f7f\u5404\u4e2a\u5b9d\u85cf\u70b9\u8054\u901a\u7684\u6700\u5c11\u6761\u8def\u5f84\uff0c\u6240\u4ee5\u6700\u540e\u8fd9\u4e2a\u56fe\u5c06\u4f1a\u662f\u4e00\u68f5\u6811\uff0c\u800c\u6df1\u641c\u56fe\u5f62\u5316\u540e\u4e5f\u662f\u4e00\u68f5\u6811\uff0c\u6240\u4ee5\u987a\u7406\u6210\u7ae0\u7684\u60f3\u5230\u6df1\u641c\uff08\u96fe\u3002\n\n\u4ee5\u6b64\u4e3a\u4f9d\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u6df1\u641c\u4e00\u6b65\u4e00\u6b65\u6784\u5efa\u6811\uff0c\u6bcf\u4e2a\u4e0d\u540c\u5f62\u6001\u7684\u6811\u5fc5\u6709\u4e00\u4e2a\u603b\u4ee3\u4ef7\uff0c\u679a\u4e3e\u6811\u7684\u6784\u6210\u5f62\u6001\u5373\u53ef\u679a\u4e3e\u4e0d\u540c\u7684\u603b\u4ee3\u4ef7\uff0c\u5404\u4e2a\u603b\u4ee3\u4ef7\u7684\u6700\u5c0f\u503c\u5c31\u662f\u7b54\u6848\u3002\n\n### \u5982\u4f55\u53bb\u4e00\u6b65\u6b65\u6784\u5efa\u6811\u5462\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u6309\u5c42\u6765\u8ba8\u8bba\n\n\u6bcf\u5c42\u90fd\u5bf9\u6240\u6709\u70b9\u8ba8\u8bba\uff0c\u8ba8\u8bba\u662f\u5426\u628a\u8fd9\u4e2a\u70b9\u653e\u5728\u8be5\u5c42\n\n\u5206\u6790\u9898\u76ee\u540e\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u6bcf\u589e\u52a0\u4e00\u4e2a\u70b9\uff0c\u8fd9\u68f5\u6811\u7684\u5206\u6570\u662f\uff1a\n\u524d\u9762\u5df2\u7ecf\u5f97\u5230\u7684\u5206\u6570+\u8be5\u70b9\u8fde\u63a5\u4e0a\u4e00\u5c42\u7684\u70b9\u7684\u8fb9\u7684\u6743\u503c \u00d7 \u8be5\u5c42\u5c42\u6570\uff0c\u6240\u4ee5\u5206\u6570\u4f1a\u968f\u7740\u70b9\u7684\u52a0\u5165\u800c\u7ebf\u6027\u589e\u957f\uff0c\u4e14\u589e\u52a0\u7684\u5206\u6570\u4e0d\u4e0e\u524d\u9762\u5c42\u7684\u70b9\u7684\u7ed3\u6784\u6709\u5173\n\n\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u8d2a\u5fc3\u7684\u601d\u60f3\uff0c\u6211\u4eec\u603b\u5e0c\u671b\u8fb9\u65b0\u52a0\u7684\u5206\u6570\u6700\u5c0f\uff0c\u8fd9\u6837\u603b\u5206\u6570\u624d\u4f1a\u5c0f\uff0c\u6240\u4ee5\u5bf9\u4e8e\u8981\u8ba8\u8bba\u7684\u4e00\u4e2a\u70b9\uff0c\u6211\u4eec\u627e\u5230\u4ed6\u4e0e\u4e0a\u5c42\u7684\u6700\u5c0f\u8ddd\u79bb\uff0c\u5373\u4ed6\u4e0e\u4e0a\u5c42\u70b9\uff08\u65e0\u8bba\u54ea\u4e2a\uff09\u7684\u6700\u5c0f\u8fb9\uff08\u5982\u679c\u6709\uff09\uff0c\u5373\u662f\u4ed6\u52a0\u5165\u8fd9\u68f5\u6811\u540e\uff0c\u4e0e\u4e0a\u5c42\u8fde\u63a5\u7684\u70b9\uff1b\n\n\u800c\u5bf9\u4e8e\u8fd9\u68f5\u6811\uff0c\u6211\u4eec\u53ea\u7528\u5728\u4e4e\u4ed6\u7684\u5f97\u5206\u591a\u5c11\uff0c\u5e76\u4e0d\u4f1a\u5728\u4e4e\u6bcf\u5c42\u7684\u8be6\u7ec6\u7ed3\u6784\u3002\u56e0\u4e3a\u5f71\u54cd\u6811\u7684\u5206\u6570\u7684\u56e0\u7d20\u53ea\u6709\uff1a\u5728\u4e00\u6b65\u4e00\u6b65\u6784\u5efa\u6811\u7684\u8fc7\u7a0b\u4e2d\uff0c\u65b0\u52a0\u5165\u7684\u70b9\u4e0e\u4e0a\u4e00\u5c42\u7684\u70b9\u76f8\u8fde\u7684\u8fb9\u7684\u8fb9\u6743\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7406\u89e3\u6210\u8fd9\u4e2a\u70b9\u4e0e\u4e0a\u4e00\u5c42\u7684\u8ddd\u79bb\n\n\u6240\u4ee5\uff0c\u5728\u6784\u5efa\u4e00\u68f5\u6811\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8bb0\u5f55\u4ed6\u4e0d\u65ad\u589e\u52a0\u7684\u5f97\u5206\uff0c\u5bf9\u4e8e\u5176\u7ed3\u6784\uff0c\u53ea\u9700\u8981\u77e5\u9053\u6bcf\u4e00\u5c42\u6709\u54ea\u4e9b\u70b9\uff0c\u987a\u5e8f\u5982\u4f55\uff0c\u800c\u4e0d\u9700\u8981\u8bb0\u5f55\u5177\u4f53\u7684\u70b9\u8fb9\u76f8\u8fde\u72b6\u51b5\n\n\n### \u4ee5\u6b64\u5f97\u51fa\u5927\u81f4\u641c\u7d22\u601d\u8def\n\n\u679a\u4e3e\u6bcf\u4e00\u5c42\uff0c\u6bcf\u4e00\u5c42\u90fd\u679a\u4e3e\u6bcf\u4e2a\u70b9\u662f\u5426\u653e\u5165\u8be5\u5c42\n\n\u5f53\u6240\u6709\u70b9\u90fd\u6784\u5efa\u8fdb\u4e86\u6811\u4e2d\uff0c\u6811\u7684\u53ef\u80fd\u5f62\u6001\u5176\u4e00\u5c31\u6784\u5efa\u5b8c\u6210\n\n\u679a\u4e3e\u6bcf\u4e00\u79cd\u53ef\u80fd\u7684\u6811\u7684\u5f62\u6001\uff0c\u7136\u540e\u8ba8\u8bba\u5f97\u5206\u6700\u5c0f\u503c\n\n\n**\u603b\u7684\u6765\u8bf4\n\u641c\u7684\u662f\u6811\u7684\u6bcf\u79cd\u53ef\u80fd\u72b6\u6001\n\u7531\u4e8e\u6bcf\u70b9\u52a0\u5206\u6ee1\u8db3\u4e0d\u88ab\u524d\u6001\u5f71\u54cd\n\u6240\u4ee5\u6211\u4eec\u7528\u679a\u4e3e\u6bcf\u4e2a\u70b9\u7684\u65b9\u5f0f\u4e00\u6b65\u6b65\u6784\u5efa\u51fa\u6811\uff0c\u5e76\u5728\u8fd9\u8fc7\u7a0b\u4e2d\u5f97\u51fa\u8fd9\u79cd\u53ef\u80fd\u6811\u7684\u5f97\u5206\n\u6700\u540e\u6240\u6709\u6811\u7684\u5f62\u6001\u90fd\u5217\u51fa\u8fc7\uff0c\u6240\u6709\u53ef\u80fd\u7684\u603b\u5f97\u5206\u4e5f\u90fd\u6c42\u8fc7\u4e86\n\u6c42\u4e2a\u6700\u5c0f\u503cOK**\n\n\nAC\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nconst int INF=1000000;\nint map[15][15];\nint n,m;\nint lay[15][15];//\u6bcf\u5c42\u7b2ci\u4e2a\u662f\u54ea\u4e2a\u70b9\nint nlay[15];//\u6bcf\u5c42\u591a\u5c11\u4e2a\u70b9\nbool used[15];//\u6bcf\u4e2a\u70b9\u662f\u5426\u88ab\u7528\u8fc7\nint ans=INF;\n\n\nvoid dfs(int ceng,int k,int cnt,int sum)//\u73b0\u5728\u662f\u5728\u7b2cceng\u5c42\uff0c\u5728\u8ba8\u8bba\u7f16\u53f7\u662fk\u7684\u70b9\uff0c\u603b\u5171\u7528\u4e86cnt\u4e2a\u70b9\uff0c\u73b0\u5728\u8fd9\u68f5\u6811\u4ef7\u503csum\n{\n\tif(sum>=ans)return ;//\u6700\u4f18\u6027\u526a\u679d   \uff01\uff01\uff01\u6700\u91cd\u8981\uff01\uff01\uff01\u53ea\u8981\u73b0\u9636\u6bb5\u7684\u5f97\u5206\u5df2\u7ecf\u4e0d\u662f\u6700\u5c0f\u7684\u4e86\u5c31\u6ca1\u6709\u7ee7\u7eed\u7684\u5fc5\u8981\u4e86\n\t\n\tif(nlay[ceng-1]==0)return ;//\u4e0a\u4e00\u5c42\u6ca1\u6709\u9009\u5165\u70b9\uff08\u4e0a\u5c42\u4e3a\u7a7a\uff09\uff0c\u6811\u4e0d\u53ef\u80fd\u7ee7\u7eed\u6784\u5efa\uff0c\u8be5\u53ef\u80fd\u4e0d\u5408\u6cd5\uff0c\u76f4\u63a5\u8df3\u8fc7\n\t\n\tif(cnt==n)\n\t{\n\t\tans=sum<ans?sum:ans;//\u6240\u6709\u70b9\u90fd\u5df2\u7ecf\u88ab\u6784\u5efa\u8fdb\u6811\u4e2d\uff0c\u6bd4\u5bf9\u7b54\u6848\n\t\treturn ;//\u7ed3\u675f\u8fd9\u79cd\u53ef\u80fd\n\t}\n\t\n\t\n\tif(k>n)\n\t{\n\t\n\tdfs(ceng+1,1,cnt,sum);//\u8be5\u5c42\u6240\u6709\u70b9\u90fd\u8ba8\u8bba\u8fc7\u4e00\u904d\uff0c\u7ee7\u7eed\u4e0b\u4e00\u5c42\n\treturn ;\n\t}\n\t\n\tif(used[k]==1)\n\t{\n\tdfs(ceng,k+1,cnt,sum);//\u8be5\u70b9\u5df2\u7528\uff0c\u76f4\u63a5\u8ba8\u8bba\u4e0b\u4e00\u4e2a\u70b9\n\treturn ;\n\t}\n\tif(used[k]==0)//\u8be5\u70b9\u6ca1\u7528\u8fc7\uff0c\u8ba8\u8bba\u4e00\u4e0b\n\t{\n\t\tused[k]=1;\n\t\tint mini=INF;//\u627e\u5230\u8be5\u70b9\u4e0e\u4e0a\u5c42\u7684\u6700\u5c0f\u8054\u7cfb\n\t\tfor(int i=1;i<=nlay[ceng-1];i++)//\u82e5\u6ca1\u6709\u8054\u7cfb\uff08\u5373\u4e0e\u4e0a\u5c42\u6240\u6709\u70b9\u4e0d\u8fde\u901a\uff09\uff0c\u5219mini\u662fINF,\u4f1a\u88ab\u6700\u4f18\u6027\u526a\u679d\u51cf\u53bb\n\t\t{\n\t\t\tif(map[k][lay[ceng-1][i]]<mini)mini=map[k][lay[ceng-1][i]];\n\t\t}\n\t\tnlay[ceng]++;//\u8fd9\u5c42\u53c8\u591a\u4e00\u4e2a\u70b9\u5566\n\t\tlay[ceng][nlay[ceng]]=k;//\u8fd9\u70b9\u662f\u54ea\u4e2a\uff1f\u5b58\u5728   lay[\u54ea\u5c42][\u7b2c\u51e0\u4e2a]   \u4e2d\n\t\tdfs(ceng,k+1,cnt+1,sum+mini*ceng);//\u9009\u7528\u6b64\u70b9\uff08\u53ef\u80fd1\uff09\n\t\tnlay[ceng]--;\n\t\tused[k]=0;\n\t\tdfs(ceng,k+1,cnt,sum);//\u4e0d\u7528\u6b64\u70b9\uff08\u53ef\u80fd2\uff09\n\t\t\n\t}\n\t\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nint main()\n{\ncin>>n>>m;\nfor(int i=1;i<=n;i++)\nfor(int j=1;j<=n;j++)map[i][j]=INF;//\u6570\u7ec4\u521d\u59cb\u5316\n\nfor(int i=1;i<=m;i++)\n{\nint a,b,c;\ncin>>a>>b>>c;\n\nif(c<map[a][b])map[a][b]=map[b][a]=c;//\u65e0\u5411\u56fe\u53cc\u5411\u8d4b\u503c\n}\n\nfor(int i=1;i<=n;i++)//\u6bcf\u4e2a\u70b9\u90fd\u5f53\u4e00\u6b21\u6839\n{\nused[i]=1;//\u70b9\u5df2\u7528\nlay[0][1]=i;//\u6839\u770b\u505a\u7b2c0\u5c42\nnlay[0]=1;//0\u5c42\u6709\u4e00\u4e2a\u6839\u8282\u70b9\ndfs(1,1,1,0);//\u4ece\u7b2c\u4e00\u5c42\u5f00\u59cb\u641c\u7d22\nused[i]=0;//\u4ee5\u8be5\u70b9\u4e3a\u6839\u7684\u6570\u641c\u7d22\u5b8c\u6bd5\n\n\n\n}\n\ncout<<ans;\n\n\nreturn 0;\n}\n//\u611f\u8c22julao zzk      ORZ\n```\n",
        "postTime": 1540126935,
        "uid": 110873,
        "name": "Coding\u7684\u4e8c\u8425\u957f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u672c\u9898\u89e3\u4e3b\u8981\u6b63\u5bf9\u72b6\u538bdp\u7684\u4f18\u5316\u8c08\u8d77\n------------\n\n\u5982\u679c\u8fd8\u4e0d\u61c2\u5982\u4f55\u72b6\u538bdp\u8bf7\u89c1\u5176\u4ed6\u9898\u89e3\u3002\n\n\u5176\u4ed6\u5927\u591a\u6570\u9898\u89e3\u90fd\u53ea\u662f\u5c06dp\u516c\u5f0f\u5217\u51fa\u800c\u540e\u4e0a\u4ee3\u7801\uff0c\u6211\u6253\u4e86\u5f88\u4e45\u7684\u72b6\u538bdp\uff0c\u4ece\u66b4\u529b\u6210\u529f\u4e0a\u5347\u5230\u4e8680\uff0c\u591a\u4e8610\u5206~~\uff08\u8981\u662f\u5728\u8003\u573a\u4e0a\u4f30\u8ba1\u5fc3\u6001\u90fd\u5d29\u4e86\uff09~~\uff0c4\u4e2aTLE\uff0c\u7136\u540e~~\u6012\u5f00O2A\u4e86\u5b83~~\u3002\n\n\u5f53\u7136noip\u662f\u6ca1\u6709O2\u7684\uff0cCCF\u4e5f\u4e0d\u662f\u7528\u7684**\u795e\u5a01\u592a\u6e56\u4e4b\u5149**\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u600e\u4e48\u628a\u590d\u6742\u5ea6\u964d\u4e0b\u6765\u3002\n\n\u8fd9\u662f\u6211\u6700\u521d\u7684dp\u65b9\u6cd5\uff1a\n~~~cpp\n\tfor(\u5f53\u524d\u72b6\u6001\uff09\n    \tfor(\u6df1\u5ea6\uff09\n        \tdfs()//\u679a\u4e3e\u5b50\u96c6\n            {\n            \t\u627e\u5230\u5f53\u524d\u72b6\u6001\u6709\u800c\u5b50\u96c6\u6ca1\u6709\u7684\u8282\u70b9\uff0c\u627e\u4ece\u5b50\u96c6\u8fde\u5411\u8be5\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\uff1b\n            }\n  ~~~\n  \n  \u8ba1\u7b97\u4e00\u4e0b\u590d\u6742\u5ea6\uff1a \u72b6\u6001\u4e2a\u6570\uff1a$2^n$ \u3001 \u6df1\u5ea6\uff1an\u3001 \u5b50\u96c6\uff1a$2^n$\u3001\u627e\u6700\u77ed\u8fb9\uff1an\n  \n  \u7efc\u4e0a O= $2^n*2^n*n^2$\n  \n  \u6700\u574f\uff1a2415919104==$10^9$\u7ea7\u522b\n  \n  \u4f18\u5316\u65b9\u6cd51\uff1a\n------------\n\u5c06dfs()\u653e\u5230for(\u5f53\u524d\u72b6\u6001\uff09\u4e0b\u9762\uff0c\u5373\n\n  ~~~cpp\n\tfor(\u5f53\u524d\u72b6\u6001\uff09\n    \tdfs()//\u679a\u4e3e\u5b50\u96c6\n        {\t\n            for(\u6df1\u5ea6\uff09\n            \t\u627e\u5230\u5f53\u524d\u72b6\u6001\u6709\u800c\u5b50\u96c6\u6ca1\u6709\u7684\uff0c\u4ece\u5b50\u96c6\u8fde\u5411\u8be5\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\uff1b\n        }    \n  ~~~\n  \n  \u8fd9\u6837\u5bf9\u4e8e\u4e00\u4e2a\u72b6\u6001\uff0c\u53ea\u4f1a\u751f\u6210\u4e00\u6b21\u5b50\u96c6\uff0c\u867d\u7136\u7406\u8bba\u590d\u6742\u5ea6\u6ca1\u53d8\n~~\uff08\u6240\u4ee5\u8fd8\u662fT\u4e86\uff09~~\uff0c\u4f46\u662f\u8fd8\u662f\u52a0\u5feb\u4e86\u901f\u5ea6\u3002\n  \n  \n\u4f18\u5316\u65b9\u6cd52\uff1a\n------------\n  \u8003\u8651\u4e0d\u540c\u72b6\u6001\u53ef\u80fd\u4f1a\u6709\u76f8\u540c\u5b50\u96c6\uff0c\u6240\u4ee5\u8bf4\u67d0\u4e2a\u70b9\u5230\u4e00\u4e2a\u5b50\u96c6\u7684\u6700\u77ed\u8def\u4f1a\u88ab\u7b97\u5f88\u591a\u6b21\uff0c\u6bd4\u5982\uff1a\n \n 11111\u548c11011 \u90fd\u6709\u5b50\u96c6 10011\uff0c \u5e76\u4e14\u90fd\u4f1a\u6c424\u53f7\uff0801000\uff09\u8282\u70b9\u523010011\u5b50\u96c6\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u90a3\u4e48\u4f55\u5fc5\u91cd\u590d\u8ba1\u7b97\u5462\uff1f\u4e8e\u662f\u5f00\u4e00\u4e2adis[ver][son], \u8868\u793aver\u8282\u70b9\u5230son\u8fd9\u4e2a\u5b50\u96c6\u7684\u6700\u77ed\u8def\u5f84\uff0c\u521d\u59cb\u5316\u4e3a-1\uff0c\u6765\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n \n \u4e8e\u662f\u590d\u6742\u5ea6\u88ab\u964d\u4e3a\uff1a O $2^n*(2^n*n+n)$\t\n \n **\u4e58\u8fdb\u53bb\u540e\u7684**$2^n*n$\u8868\u793a\u6bcf\u4e2a\u8282\u70b9\u5230\u5b50\u96c6\u7684\u8ddd\u79bb\u60c5\u51b5\n \n \u6700\u574f==201326592\uff08$10^8$\u7ea7\u522b\uff0c\u4f46\u8003\u8651\u4e0d\u662f\u6bcf\u4e2a\u72b6\u6001\u90fd\u6709$2^n$\u4e2a\u5b50\u96c6\uff0c\u51b5\u4e14\u6307\u6570\u7ea7\u7684\u589e\u957f\u7387\u5de8\u5927\uff0c\u5176\u5e73\u5747\u503c\u5e94\u8fdc\u8fdc\u4f4e\u4e8e$2^n/2$\uff0c~~\uff08\u4e8e\u662f\u88ab\u5f3a\u884c\u5634\u70ae\u5230$10^7$\u7ea7\u522b\uff09~~\u57fa\u672c\u4e0a\u53ef\u4ee5\u8fc7\u53bb\u3002\uff09\n \n \u4e8e\u662f\u5c31A\u4e86\u3002\n \n \n \u53e6\u5916\uff1a\n------------\n\u8fd9\u9053\u9898\u7ed9\u6211\u6700\u6df1\u7684\u611f\u53d7\u662f\uff0c**\u5373\u4f7f\u8bc1\u660e\u51fa\u4e86\u7b97\u6cd5\u9519\u8bef\uff0c\u4e5f\u8981\u6ce8\u610f\u6570\u636e\u662f\u5426\u6709\u7279\u6b8a\u70b9\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u9519\u8bef\u7684\u65b9\u6cd5\u5bf9\u4e8e\u7279\u6b8a\u6570\u636e\u53ef\u80fd\u6b63\u786e\u3002**\u5728\u7279\u6b8a\u6570\u636e\u4e4b\u5916\u518d\u66b4\u641c\u3002\n\n\u6bd4\u5982\u8bf4\u4e0d\u96be\u8bc1\u660e\u51faprim\u6700\u77ed\u8def\u7684\u9519\u8bef\uff0c\u5982\u56fe\uff0c\u5047\u8bbe\u4ece1\u51fa\u53d1\uff1a\n\n\n![](https://cdn.luogu.com.cn/upload/pic/34692.png )\n  \n \u7ea2\u662f\u6700\u5c0f\u751f\u6210\u6811\uff0c\u84dd\u662f\u6b63\u786e\u8def\u5f84\uff0c\u4f46\u662f\u4e00\u770b\u6570\u636e\u670940%\u8fb9\u6743\u4e00\u6837\uff0c\u5f88\u660e\u663e\uff0c\u5982\u679c\u6309\u7167\u5148\u5165prim\u7684\u5df2\u8fde\u63a5\u96c6\u5408\u4e3a\u66f4\u65b0\u7684\u8d77\u70b9\uff0c\u6b64\u65f6\u7684\u8ddd\u79bb\u6070\u597d\u53cd\u6620\u4e86\u7ecf\u8fc7\u7684\u8282\u70b9\u6570\u76ee\uff08\u7531\u4e8e\u8fb9\u6743\u76f8\u540c\uff0c\u540c\u6df1\u5ea6\u7684\u70b9\u662f\u4e00\u8d77\u88ab\u66f4\u65b0\u7684\uff08\u53ea\u5728\u5c0f\u4e8e\u65f6\u66f4\u65b0\uff09\uff0c\u76f8\u5f53\u4e8ebfs\uff08\u8c8c\u4f3c\u53ef\u4ee5\u5199bfs\u800c\u4e0d\u7528prim\uff09\uff09\uff0c\u5bf9\u4e8e\u8fd940%\u53ef\u4ee5\u7528\u6700\u5c0f\u751f\u6210\u6811\u3001\u6700\u77ed\u8def\u6216\u8005bfs\u3002\n \n\u5982\u679c\u8fb9\u6743\u4e0d\u7b49\uff0c\u7528dfs\u679a\u4e3e\uff0c\u7c7b\u4f3cprim\u4f46\u662f\u679a\u4e3e\u8d77\u70b9\u548c\u7ec8\u70b9\u7684\u8fde\u8fb9\uff0c\u800c\u4e0d\u627e\u6700\u77ed\u8fb9\uff0c\u5373\u53ef\u83b7\u5f9770\u5206\u3002\n\n\u5982\u679c\u4f60\u8111\u6d1e\u8db3\u591f\u5927\uff0c\u5728\u70b9\u6570\u5927\u4e8e8\u662f\u518d\u7528prim\uff08\u6216bfs\uff09\uff0c\u5373\u53ef\u83b7\u5f9775\uff0c\u8fd9\u5df2\u7ecf\u76f8\u5f53\u53ef\u89c2\u4e86\uff01\uff01\uff01\n  \n  \n  ",
        "postTime": 1538146402,
        "uid": 59989,
        "name": "jtzhang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u672c\u9898\u88c5\u538bDP\n\u8bbef[i][p]\u8868\u793a\u73b0\u5728\u9009\u7684\u662f\u8ddd\u6839\u8282\u70b9\u8ddd\u79bb\u4e3ai\u7684\u8fb9\uff0c\u4e14p\u96c6\u5408\u7684\u70b9\u5df2\u88ab\u9009\u4e2d\n\n\u8f6c\u79fb\u5c31\u5728\u5269\u4e0b\u7684\u70b9\u4e2d\u4efb\u610f\u9009\u51e0\u4e2a\uff0c\u5e76\u4e0ep\u96c6\u5408\u7684\u70b9\u8fde\u8fb9\u5373\u53ef\uff0c\u53ef\u4ee5\u8d2a\u5fc3\u5730\u8fde\u8fb9\uff0c\u8981\u7b54\u6848\u6700\u5c0f\uff0c\u5f53\u7136\u8fde\u7684\u8fb9\u6743\u8d8a\u5c0f\u8d8a\u597d\n\n\u90a3\u4e48\uff0c\u5982\u679c\u8fde\u8fb9\u65f6\u4e00\u6761\u8fb9\u8ddd\u6839\u8ddd\u79bb\u4e0d\u7b49\u4e8ei\u600e\u4e48\u529e\n\n\u5176\u5b9e\u65e0\u9700\u8003\u8651\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u8ddd\u79bb\u5927\u4e8e\u7b49\u4e8ei\uff0c\u56e0\u6b64\u603b\u80fd\u627e\u5230\u66f4\u4f18\u7684\u89e3\u4ee3\u66ff\n\n\u5177\u4f53\u6d41\u7a0b\uff1a\n\n1. \u679a\u4e3e\u8d77\u70b9\n1. dfs,\u4ece\u4e0d\u5c5e\u4e8ep\u7684\u96c6\u5408\u4e2d\u9009\u51e0\u4e2a\u7ed3\u70b9\n1. \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7ed3\u70b9\uff0c\u53d6\u4e0e\u5b83\u8ddd\u79bb\u6700\u8fd1\u4e14\u5728p\u4e2d\u7684\u8fb9\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5219\u8df3\u8fc7\n1. \u5c06\u8fd9\u4e9b\u7ed3\u70b9\u52a0\u5165p\uff0c\u7ee7\u7eeddfs\uff0c\u5e76\u7edf\u8ba1\u7b54\u6848\n\n\u65f6\u95f4\u590d\u6742\u5ea6O((Cn1^2+Cn2^2+...+Cnn^2)*n^2)\n\n\n```cpp\n#include<stdio.h>\n#include<string.h>\n#include<iostream>\n#include<stdlib.h>\n#include<algorithm>\n#include<math.h>\nusing namespace std;\nint n,m,gr[12][12],u,v,w,i,j,f[12][50005],ans=1<<30,k;\nstruct str{\n\tint a,x;\n}g[12][12];\nbool cmp(str a,str b)\n{\n\treturn a.a<b.a;\n}\nvoid dfs(int i,int p,int q,int *pl)\n{\n\tif(i==n)\n\t{\n\t\tpl[k++]=q;\n\t\treturn;\n\t}\n\tdfs(i+1,p,q,pl);\n\tif((p&(1<<i))==0)\n\t\tdfs(i+1,p,q|(1<<i),pl);\n}\nint dp(int i,int p)\n{\n\tint j,l,m;\n\tif(p==(1<<n)-1)\n\t\treturn 0;\n\tif(f[i][p]!=0)\n\t\treturn f[i][p];\n\tk=0;\n\tint pl[10005];\n\tdfs(0,p,0,pl);\n\tint kk=k;\n\tf[i][p]=1<<30;\n\tfor(j=1;j<kk;j++)\n\t{\n\t\tint s=0;\n\t\tfor(l=0;l<n;l++)\n\t\t\tif((pl[j]&(1<<l))!=0)\n\t\t\t{\n\t\t\t\tfor(m=0;m<n;m++)\n\t\t\t\t\tif((p&(1<<g[l][m].x))!=0&&g[l][m].a<=5000000)\n\t\t\t\t\t{\n\t\t\t\t\t\ts+=g[l][m].a*i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tif(m==n)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\tif(l!=n)\n\t\t\tcontinue;\n\t\tf[i][p]=min(f[i][p],dp(i+1,p|pl[j])+s);\n\t}\n\treturn f[i][p];\n}\nint main(){\n\tscanf(\"%d %d\",&n,&m);\n\tmemset(gr,0x7f,sizeof(gr));\n\tfor(i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%d %d %d\",&u,&v,&w);\n\t\tu--;\n\t\tv--;\n\t\tgr[u][v]=gr[v][u]=min(gr[u][v],w);\n\t}\n\tfor(i=0;i<n;i++)\n\t\tfor(j=0;j<n;j++)\n\t\t\tg[i][j]=(str){gr[i][j],j};\n\tfor(i=0;i<n;i++)\n\t\tsort(g[i],g[i]+n,cmp);\n\tfor(i=0;i<n;i++)\n\t\tans=min(ans,dp(1,1<<i));\n\tprintf(\"%d\",ans);\n}\n\n```",
        "postTime": 1524577543,
        "uid": 13185,
        "name": "\u53cc\u7ba1\u8367\u5149\u706f",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "1. \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u5f20 $n$ \u4e2a\u70b9\uff0c $m$ \u6761\u8fb9\u7684**\u6709\u91cd\u8fb9**\u7684\u56fe\uff0c\u627e\u5230\u4e00\u4e2a\u751f\u6210\u6811\uff0c\u4f7f\u5f97\u6bcf\u6761\u8fb9\u7684\u6743\u503c $\\times $ \u5230\u6839\u7684\u8ddd\u79bb\u6700\u5c0f\n\n$1\\le n\\le12,0\\le m\\le 1000$\n\n2. \u5206\u6790\n\n\u6570\u636e\u8303\u56f4\u8fd9\u4e48\u5c0f\uff0c\u5e94\u8be5\u662f\u72b6\u538b\u6216\u641c\u7d22\u3002NOIPT2\u4e00\u822c\u4e0d\u4f1a\u8003\u641c\u7d22\n\n3. \u72b6\u6001\u8bbe\u8ba1\n\n\u65e2\u7136\u662f\u72b6\u538bDP\uff0c\u90a3\u4e48\u8bbe $dp_S$ \u8868\u793a\u8003\u8651\u5230\u96c6\u5408 $S$ \u7684\u6700\u5c0f\u503c\u3002\n\n\u56e0\u4e3a\u8ddd\u79bb\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u6240\u4ee5\u72b6\u6001\u8981\u52a0\u4e0a\u4e00\u4e2a $x$ \u8868\u793a\u6df1\u5ea6\u4e3a$x$\u3002\n\n4. \u8f6c\u79fb\n\n\u8003\u8651\u5206\u5c42\u8f6c\u79fb\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q6869r2h.png)\n\n\u679a\u4e3e\u4e0a\u4e00\u5c42\u662f\u54ea\u4e9b\u70b9\uff0c\u8fdb\u884c\u8f6c\u79fb\u3002\nyuju\n$$dp_{S,x}=\\min_{T \\in S}(dp_{T,x-1},g_{S\\text{xor}T,T}\\times(x-1))$$\n$g_{A,B}$ \u8868\u793a\u5c06 $A$ \u4e2d\u7684\u70b9\u8fde\u5411 $B$ \u4e2d\u7684\u70b9\u7684\u6700\u5c0f\u503c\u3002\n\n$g$ \u6570\u7ec4\u53ef\u4ee5\u901a\u8fc7\u8d2a\u5fc3\u9884\u5904\u7406\u3002\n\n5. \u590d\u6742\u5ea6\n\n\u770b\u8d77\u6765\u590d\u6742\u5ea6\u662f $O(4^n\\times n)$ \u7684\uff0c\u5b9e\u9645\u4e0a\u679a\u4e3e\u5b50\u96c6\u8fd9\u6837\u679a\u4e3e\n\n`for(int T=S-1;T;T=(T-1)&S\uff09`\n\n\u53ef\u4ee5\u964d\u4f4e\u65e0\u7528\u72b6\u6001\u7684\u679a\u4e3e\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(3^n\\times n)$\n\n\u8bc1\u660e\uff1a\n\n$$\\sum_{i=0}^n 2^i\\times \\binom{n}{i}=\\sum_{i=0}^n2^i\\times \\binom{n}{i}\\times 1^{n-i}=(2+1)^n=3^n$$\n",
        "postTime": 1570674029,
        "uid": 27209,
        "name": "hepan",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u849f\u84bb\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\uff0c\u6c42\u7ed9\u8fc7|*\u00b4\u00c5`)/ please!!!\n\n------------\n\n\u521a\u770b\u5230\u8fd9\u9053\u9898\u7684\u65f6\u5019\uff0c\u5927\u5bb6\u5927\u6982\u90fd\u6709\u4e24\u79cd\u601d\u8def\n\n1. \u4e0d\u4f1a\u72b6\u538b\u7684\u6211\uff0c\u6765\u4e00\u53d1\u7206\u641c\uff0c\u6765\u4e00\u53d1\u6a21\u62df\uff08\u6a21\u62df\u9000\u706b\uff0c\u641c\u7d22\u526a\u679d\u7b49\u7b49\uff09\n\n1. \u6765\u4e00\u53d1\u72b6\u538bDP\u538b\u538b\u60ca\n\n\u672c\u6587\u672c\u849f\u84bb\u5c06\u4e3b\u8981\u8bb2\u4e00\u4e0b**\u72b6\u538bDP**\u7684\u505a\u6cd5\n\n\u4e00\u822c\u72b6\u538bDP\u7684n\u7684\u8303\u56f4\u6bd4\u8f83\u5c0f\uff0c\u56e0\u4e3a\u5982\u679cn\u5927\u7684\u8bdd\u72b6\u538b\u6570\u7ec4\u4e5f\u5b58\u4e0d\u4e0b\uff0c\u800c\u8fd9\u9898\u4e00\u770bn<=12\uff0c\u660e\u663e\u662f\u72b6\u538bDP\u7684\u6570\u636e\u8303\u56f4\u3002\u90a3\u63a5\u4e0b\u6765\u5c31\u662f\u7f8e\u5999\u7684\u8bbe\u8ba1\u72b6\u6001\u65f6\u95f4\u5566\n\n------------\n## \u72b6\u6001\u8bbe\u8ba1\uff1a\n\u6839\u636e\u9898\u9762\uff1a\u201cL\u4ee3\u8868\u8fd9\u6761\u9053\u8def\u7684\u957f\u5ea6\uff0cK\u4ee3\u8868\u4ece\u8d5e\u52a9\u5546\u5e2e\u4f60\u6253\u901a\u7684\u5b9d\u85cf\u5c4b\u5230\u8fd9\u6761\u9053\u8def\u8d77\u70b9\u7684\u5b9d\u85cf\u5c4b\u6240\u7ecf\u8fc7\u7684 \u5b9d\u85cf\u5c4b\u7684\u6570\u91cf\uff08\u5305\u62ec\u8d5e\u52a9\u5546\u5e2e\u4f60\u6253\u901a\u7684\u5b9d\u85cf\u5c4b\u548c\u8fd9\u6761\u9053\u8def\u8d77\u70b9\u7684\u5b9d\u85cf\u5c4b\uff09 \u3002\u201d\u53ef\u77e5\u7b54\u6848\u4e0e\u5230\u8fbe\u70b9\u5728\u8def\u5f84\u4e2d\u7684\u6df1\u5ea6\u6709\u5173\u4e14\u4e0e\u4e4b\u524d\u8fde\u63a5\u7684\u70b9\u6709\u5173\n\n\u6240\u4ee5\u5728\u4e00\u756a\u601d\u8003\u540e\u6211\u51b3\u5b9a\u4ee4f[i][S]\u8868\u793a\u5f53\u524d**\u4e0e\u6839\u8fde\u901a\u7684\u70b9\u7684\u72b6\u6001\u4e3aS\uff0c\u5e76\u4e14\u6700\u6df1\u7684\u70b9\u7684\u6df1\u5ea6\u4e3ai\u7684\u6700\u5c0f\u4ee3\u4ef7**\u3002\n\n\u90a3\u8be5\u5982\u4f55\u8f6c\u79fb\u5462\uff1f\n\n------------\n## \u72b6\u6001\u8f6c\u79fb\uff1a\n\u8f6c\u79fb\u65f6\uff0c\u6211\u4eec\u679a\u4e3e\u6240\u6709**\u4e0d\u5728S\u4e2d\u7684\u70b9**\uff0c\u5904\u7406\u51fa\u6bcf\u4e2a\u70b9\u4e0eS\u4e2d\u7684\u67d0\u4e2a\u70b9\u8fde\u901a\u6240\u9700\u8981\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\u7136\u540e\u679a\u4e3e\u8fd9\u4e9b\u70b9\u6784\u6210\u7684\u6240\u6709\u96c6\u5408S'\uff0c**\u7528S'\u4e2d\u6240\u6709\u70b9\u7684\u4ee3\u4ef7+f[i][S]\u53bb\u66f4\u65b0f[i+1][S|S']**\u5373\u53ef\u3002\n\n\u6700\u7ec8\u7684\u6700\u4f18\u72b6\u6001\u5c31\u5e94\u8be5\u4ece\u8d70\u5230\u6bcf\u4e00\u4e2a\u70b9\u4f46\u6700\u6df1\u6df1\u5ea6\u4e0d\u540c\u7684\u72b6\u6001\u4e2d\u53d6\uff0c\u5373min\uff08f[i][1<<n-1]\uff09 [i>=0&&i<=n]\n\n\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u7a0b\u6bd4\u8f83\u96be\u5199\uff0c\u5177\u4f53\u7684\u5c31\u53bb\u770b\u5e95\u4e0b\u7684\u4ee3\u7801\u5427\n\n\u60f3\u597d\u4e86\u8f6c\u79fb\u5c31\u8981\u60f3\u4e00\u4e0b\u65f6\u95f4\u6548\u7387\u4e86\n\n------------\n## \u65f6\u95f4\u6548\u7387\uff1a\n\u72b6\u538bDP\u4e2d\u679a\u4e3e\u5b50\u96c6\u7684\u65f6\u95f4\u6548\u7387\u5e94\u8be5\u4e3a$3^{n}$\uff08n\u5143\u7d20\u96c6\u5408\u7684\u6240\u6709\u5b50\u96c6\u7684\u5b50\u96c6\u5927\u5c0f\u4e4b\u548c\u662f$3^{n}$\u53ef\u4ee5\u8bc1\uff09\n\n\u56e0\u4e3a\u679a\u4e3e\u8865\u96c6\u548c\u679a\u4e3e\u5b50\u96c6\u662f\u4e00\u4e2a\u9053\u7406\uff0c\u6240\u4ee5\u5c31\u662f\u4f18\u96c5\u7684O(n*$3^{n}$)\u5566\n\n# \u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nint n,m,tot,ans;\nint mapp[110][110],dis[110][110],Log[4100];\nint f[15][4100],g[4100],ref[4100],v[15],p[15];\nint main(){\n    //freopen(\"treasure.in\",\"r\",stdin);\n    //freopen(\"treasure.out\",\"w\",stdout);\n    scanf(\"%d%d\",&n,&m);\n    register int i,j,a,b,c,x;\n    for(i=0;i<n;i++) for(j=0;j<n;j++) mapp[i][j]=60000000;\n    for(i=1;i<=m;i++){\n        scanf(\"%d%d%d\",&a,&b,&c),a--,b--;\n        mapp[a][b]=mapp[b][a]=min(mapp[a][b],c);\n    }//\u5efa\u56fe\n    for(i=0;i<n;i++) Log[1<<i]=i;\n    memset(f,0x3f,sizeof(f));\n    for(i=0;i<n;i++) f[0][1<<i]=0;\n    for(i=0;i<n;i++) //\u5f00\u59cbDP\n        for(x=0;x<(1<<n);x++){\n            tot=0;\n            for(a=0;a<n;a++) \n               if(!(x&(1<<a))){\n                   v[tot]=60000000,p[tot]=1<<a;\n                   for(j=x;j;j-=j&-j){\n                       b=Log[j&-j];\n                       v[tot]=min(v[tot],mapp[a][b]*(i+1));//\u8ba1\u7b97\u4ee3\u4ef7\n                   }\n             tot++;\n        }\n        for(j=1;j<(1<<tot);j++){\n            g[j]=g[j-(j&-j)]+v[Log[j&-j]];//\u6bcf\u4e2a\u70b9\u4e0ex\u4e2d\u7684\u67d0\u4e2a\u70b9\u8fde\u901a\u6240\u9700\u8981\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002 \n            ref[j]=ref[j-(j&-j)]|p[Log[j&-j]];//\u679a\u4e3e\u5b50\u96c6\n            f[i+1][x|ref[j]]=min(f[i+1][x|ref[j]],f[i][x]+g[j]);\n        }\n    }\n    ans=1<<30;\n    for(i=0;i<=n;i++)    ans=min(ans,f[i][(1<<n)-1]);//\u6700\u4f18\u72b6\u6001\u4ece\u8d70\u5230\u6bcf\u4e00\u4e2a\u70b9\u4f46\u6700\u6df1\u6df1\u5ea6\u4e0d\u540c\u7684\u72b6\u6001\u4e2d\u53d6\n    printf(\"%d\",ans);\n    return 0;\n}\n\n```\n",
        "postTime": 1564629168,
        "uid": 66416,
        "name": "\u4f18\u5c11",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\n# \u5178\u578b\u7684\u72b6\u538bDP\u9898\n## \u7ed3\u5408\u4e00\u70b9\u56fe\n### \u6ca1\u542c\u8bf4\u8fc7\u7684\u540c\u5b66\u53ef\u4ee5\u518d\u81ea\u5df1\u5b66\u5b66\u52a8\u89c4\n~~\u4e0d\u8bf4\u4ec0\u4e48\u4e86\uff0c\u4ee3\u7801\u91cc\u8bb2\u7684\u633a\u8be6\u7ec6\u7684\u4e86~~\n\n## \u4e0a\u4ee3\u7801\u2026\u2026\n\n```c++\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;//\u61d2\u4eba\uff0c\u4e0d\u7231\u6253long long \n//\u5c31\u7528typedef \u4ee3\u66ff\u7c7b\u578b\u540d \nint n,m;\nLL G[1005][1005];//\u5b58\u56fe\u6570\u7ec4 \nLL f[103][1<<13];//\u52a8\u89c4\u6570\u7ec4 \nLL h[10005];\nint a[10005],b[10005];\nconst LL Inf=1e12;\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);//\u8f93\u5165\u5c4b\u6570\u3001\u8def\u6570 \n\tif(n==1&&m==0){\n\t\tcout<<0;\n\t\treturn 0;//\u7279\u5224\u9632\u72060\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++) G[i][j]=1e12;//\u521d\u59cb\u5316\u5927\u503c \n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint x,y,r;\n\t\tscanf(\"%d%d%d\",&x,&y,&r);//\u5faa\u73af\u8f93\u5165 \n\t\tG[x][y]=min(G[x][y],1ll*r);//1ll\u8d4b\u6210long long \u7c7b\u578b\n\t\t\t\t\t\t\t\t\t//\u5b58\u6700\u5c0f\u56fe \n\t\tG[y][x]=G[x][y];//\u65e0\u5411\u56fe\uff0c\u5bf9\u79f0\u6027 \n\t}\n\tfor(int i=0;i<n;i++)\n\t\tfor(int j=1;j<=(1<<n);j++) f[i][j]=Inf;//\u8d4b\u5927\u503c\uff0c\u4fbf\u4e8e\u540e\u9762\u8fd0\u7b97 \n\tfor(int i=0;i<n;i++) f[0][1<<i]=0;//\u5c06f[0][0~n]\u5168\u8d4b\u4e3a0\uff0c \n\tLL Ans=Inf;//Ans\u8d4b\u4e3a\u5927\u503c\u4fbf\u4e8e\u540e\u9762\u53d6\u6700\u5c0f\u503c \n\tfor(int i=0;i<n;i++)\n\t{\n\t\tfor(int j=0;j<(1<<n);j++)\n\t\t{\n\t\t\tif(f[i][j]==Inf) continue;//\u5982\u679c\u503c\u672a\u53d8\u8df3\u8fc7\u5185\u5c42\u5faa\u73af \n\t\t\tint cnt1=0;\n\t\t\tint cnt2=0;\n\t\t\tif(f[i][j]==Inf) continue;\n\t\t\tfor(int k=0;k<n;k++)\n\t\t\t\tif(j&(1<<k)) a[cnt1++]=k;//\u5982\u679c\n\t\t\t\telse b[cnt2++]=k;\n\t\t\tfor(int k=0;k<cnt2;k++)\n\t\t\t{\n\t\t\t\tLL mx=Inf;//\u8d4b\u8d85\u5927\u503c\u4fbf\u4e8e\u53d6\u6700\u5c0f\u503c \n\t\t\t\tfor(int l=0;l<cnt1;l++) mx=min(mx,G[b[k]+1][a[l]+1]);\n\t\t\t\th[k]=mx;//\u5b58\u50a8\u6700\u5c0f\u503c\u6570\u7ec4 \n\t\t\t}\n\t\t\tfor(int k=1;k<(1<<cnt2);k++)\n\t\t\t{\n\t\t\t\tint to=j;\n\t\t\t\tLL res=0;\n\t\t\t\tfor(int l=0;l<cnt2;l++) if(k&(1<<l)) to|=1<<b[l],res+=h[l];\n\t\t\t\tf[i+1][to]=min(f[i+1][to],f[i][j]+res*(i+1));\n\t\t\t\t/*\u6839\u636e\u9898\u610f\uff0c\u6c42\u51fa\u5f00\u53d1\u6bcf\u4e00\u6761\u8def\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u4e0d\u65ad\u4fdd\u8bc1\u6700\u5c0f*/\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<n;i++)\n\t\tAns=min(Ans,f[i][(1<<n)-1]);//\u4e0d\u65ad\u66f4\u65b0\u6700\u5c0f\u503c\uff0c\u66f4\u65b0\u6700\u4f18\u89e3 \n\tcout<<Ans<<endl;//\u8f93\u51fa\u7b54\u6848 \n\treturn 0;\n\t//\u5b8c\u7f8e\u7ed3\u675f \n}\n```",
        "postTime": 1564058599,
        "uid": 180790,
        "name": "zhzzhzzzz",
        "ccfLevel": 3,
        "title": "P3959\u5b9d\u85cf"
    },
    {
        "content": "\u6b64\u9898\u6709\u5f88\u591a\u79cd\u72b6\u538b\u7684\u65b9\u6cd5\u3002\u3002orz\n\n\u4e00\u5f00\u59cb\uff0c\u6211\u60f3\u5230\u4e86\u4e00\u79cd\u590d\u6742\u5ea6\u8be1\u5f02\u7684\u72b6\u538b\uff1a\n\n\u56e0\u4e3a\u8981\u77e5\u9053\u8ddd\u79bb\uff0c\u90a3\u4e48\u5f53\u7136\u662f\u6309bfs\u6269\u5c55\u5566\u3002\n\n\u6309\u7167bfs\u6269\u5c55\uff0cf[i][j][k]\u8868\u793a\u5f53\u524d\u6269\u5c55\u5230\u4e86\u7b2ci\u5c42\uff0c\u603b\u5171\u5230\u8fbe\u7684\u70b9\u72b6\u6001\u662fj\uff0c\u6700\u540e\u4e00\u5c42\u70b9\u72b6\u6001\u662fk,\u4e8e\u662f\u590d\u6742\u5ea6\u6210\u529f\u7206\u70b8\u3002\uff08\u5927\u6982\u81f3\u5c11n*3^n*2^n?\uff09\n\n\u7136\u540e\u5f00\u59cb\u4f18\u5316\u3002\u3002\u65e2\u7136\u662f\u4e00\u9897bfs\u6811\uff0c\u90a3\u4e48\u53ef\u4ee5\u50cf\u6811\u5f62dp\u4e00\u6837\u641e\u3002\u3002\u8bbef[i][j][k]\u8868\u793a\u5f53\u524d\u5728\u7b2ci\u5c42\u7684\u70b9j\uff0c\u60f3\u8981\u6269\u5c55\u51fa\u72b6\u6001\u4e3ak\u6240\u9700\u8981\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\u4e8e\u662f\u7c7b\u4f3c\u6811\u5f62dp\uff0c\u679a\u4e3ej\u7684\u540e\u7ee7\uff0c\u8bbe\u524di\u4e2a\u513f\u5b50\u6269\u5c55\u51fa\u72b6\u6001j\u6240\u9700\u8981\u7684\u4ee3\u4ef7\u4e3ag[i][j]\uff0c\n\u5219g[i][j]=min(g[i-1][p]+f[son[i]][j-p])\u3002\u8fd9\u6837\u5408\u5e76\u4e0a\u53bb\uff0c\u590d\u6742\u5ea6\u5c31\u662fnm3^n\u7684\u3002(m=min(m,n^2))\u3002\u518d\u4f18\u5316\u4e00\u4e0b\uff0c\u9884\u5904\u7406g\u6570\u7ec4\uff0c\u5c31\u53d8\u6210(n^2)*(3^n)\u4e86\u3002\n\n\u8fd9\u6837\u5176\u5b9e\u7406\u8bba\u590d\u6742\u5ea6\u5df2\u7ecf\u53ef\u4ee5\u8fc7\u4e86\uff0c\u662f\u4e03\u5343\u591a\u4e07\u3002\u800c\u4e14\u5e38\u6570\u4e5f\u975e\u5e38\u5c0f\uff0c\u6240\u4ee5\u5b9e\u9645\u4e5f\u662f\u53ef\u4ee5\u8fc7\u7684\u3002\n\n\u4f46\u662f\u6211\u5bf9\u4e8e\u4e00\u5f00\u59cb\u7684\u60f3\u6cd5\u8fd8\u6709\u4e00\u79cd\u6267\u5ff5\u3002\u3002\u603b\u89c9\u5f97\u90a3\u4e00\u7ef4k\u662f\u4e0d\u662f\u5f88\u5947\u602a\u5462\uff1f\u7136\u540e\u6211\u5f00\u59cb\u4fee\u6539\u7b2c\u4e00\u79cd\u505a\u6cd5\u3002\u663e\u7136\u5730\uff0c\u5176\u5b9ek\u662f\u4e0d\u9700\u8981\u8bb0\u5f55\u7684\u3002\u56e0\u4e3a\u5982\u679c\u53ef\u4ee5\u4ece\u4e4b\u524ddepth\u66f4\u5c0f\u7684\u70b9\u6269\u5c55\uff0c\u90a3\u4e48\u8be5\u72b6\u6001\u4e00\u5b9a\u88ab\u5408\u5e76\u8fdb\u4e86\u4e4b\u524d\u67d0\u4e00\u5c42\u91cc\u3002\u8fd9\u79cd\u601d\u60f3\u5176\u5b9e\u548c\u6700\u77ed\u8def\u6709\u70b9\u50cf\u3002\u6240\u4ee5\u5176\u5b9e\u53ef\u4ee5\u8bbef[i][j]\u8868\u793a\u5f53\u524d\u6269\u5c55\u5230\u4e86\u7b2ci\u5c42\uff0c\u72b6\u6001\u662fj\u6240\u9700\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0cg[j][k]\u9884\u5904\u7406\u51fa\u4ece\u72b6\u6001j\u6269\u5c55\u51fa\u72b6\u6001k\u6240\u9700\u8981\u65b0\u52a0\u5165\u7684\u6700\u5c0f\u8fb9\u6743\u548c\u3002\n\nf[i+1][j|p]=min(f[i+1][j|p],f[i][j]+g[j][p]*i)\u3002\n\uff08p\u4e0ej\u4ea4\u96c6\u4e3a\u7a7a\uff09\n\n\u9884\u5904\u7406g\u6570\u7ec4\u65f6\uff0cp\u662f(j^\u5168\u96c6\uff09\u7684\u5b50\u96c6\uff0c\u8003\u8651\u679a\u4e3e\u6bcf\u4e00\u4e2ap\u4e2d\u662f1\u7684\u4f4d\uff0c\u518d\u679a\u4e3e\u5b83\u662f\u4ecej\u4e2d\u54ea\u4e00\u4e2a\u70b9\u52a0\u8fdb\u53bb\u7684\uff0c\u8fd9\u91cc\u8fd8\u53ef\u4ee5\u52a0\u5165lowbit\u4f18\u5316\u3002\u590d\u6742\u5ea6\u4f9d\u7136\u662f(n^2)*(3^n)\uff0c\u4f46\u56e0\u4e3alowbit\u4f18\u5316\u5bfc\u81f4\u5176\u5b9e\u6bd4\u8fd9\u4e2a\u8fd8\u8981\u5c0f\u4e00\u4e9b\u3002\u800c\u4e14\u4ee3\u7801\u4e5f\u53d8\u5f97\u7b80\u5355\u6613\u5199\uff0c\u65e0\u8bba\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u8fd8\u662f\u4ee3\u7801\u590d\u6742\u5ea6\u90fd\u6bd4\u4e0a\u9762\u4e00\u79cd\u8981\u4f18\u79c0\u4e86\u3002\n\n\u4e8e\u662f\u8fd9\u5c31\u662f\u6700\u7ec8\u505a\u6cd5\u4e86\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define rep(x,y,z) for (int x=y; x<=z; x++)\n#define downrep(x,y,z) for (int x=y; x>=z; x--)\n#define ms(x,y,z) memset(x,y,sizeof(z))\n#define LL long long\n#define repedge(x,y) for (int x=hed[y]; ~x; x=edge[x].nex)\ninline int read(){\n\tint x=0; int w=0; char ch=0;\n\twhile (ch<'0' || ch>'9') w|=ch=='-',ch=getchar();\n\twhile (ch>='0' && ch<='9') x=(x<<3)+(x<<1)+(ch^48),ch=getchar();\n\treturn w? -x:x;\n}\nconst int inf=1e8;\nconst int N=15;\nint n,m,e[N][N],lg[N],f[N][1<<12],g[1<<12][1<<12];\nint lowbit(int x){ return (x&(-x)); }\nint main(){\n\tn=read(); m=read();\n\trep(i,1,n) rep(j,1,n) e[i][j]=inf;\n\trep(i,1,m){ \n\t   int a=read(); int b=read(); int c=read();\n\t   e[a][b]=e[b][a]=min(e[a][b],c);\n\t}\n\tint s=1; rep(i,1,n+1) { lg[s]=i; s*=2; }\n\trep(i,0,(1<<n)-1){\n       int x=(((1<<n)-1)^i);\n       for(int k=x; k; k=((k-1)&x)) //\u679a\u4e3e\u5b50\u96c6\u7684\u65b9\u5f0f\uff0c\u6bd4\u76f4\u63a5for(int k=0; k<=(1<<n)-1; k++)\u4f18\n       for(int p=k; p; p-=lowbit(p)){\n       \t  int tmp=inf; int nw=lg[lowbit(p)]; \n\t\t  for(int q=i; q; q-=lowbit(q)) tmp=min(tmp,e[nw][lg[lowbit(q)]]);\n\t\t  if (tmp>=inf){ g[i][k]=inf; break; }else g[i][k]+=tmp;\n\t   }\n\t}  \n\trep(i,0,n) rep(j,0,(1<<n)-1) f[i][j]=inf;\n\trep(i,0,n-1) f[1][1<<i]=0;\n\trep(i,1,n-1)rep(j,0,(1<<n)-1){\n\t   int x=(((1<<n)-1)^j);\t \n\t   for(int k=x; k; k=((k-1)&x))\n\t   f[i+1][j|k]=min(f[i+1][j|k],f[i][j]+g[j][k]*i);\n\t   f[i+1][j]=min(f[i+1][j],f[i][j]);\n\t}\n\tprintf(\"%d\\n\",f[n][(1<<n)-1]);\n\treturn 0;\n}\n```\n\n\u987a\u4fbforz\u6a21\u62df\u9000\u706b\u7684\u9898\u89e3\u3002",
        "postTime": 1540258281,
        "uid": 47611,
        "name": "\u4e0a\u5929\u53f0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3959 \u3010\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u6ce8\uff1a\u672c\u6587\u90e8\u5206\u53c2\u8003\u674e\u715c\u4e1c\u5927\u795e\u7684\u300a\u7b97\u6cd5\u7ade\u8d5b\u8fdb\u9636\u6307\u5357\u300b\u3002\n\n## \u5148\u6709 $3(?)$ \u6761\u5206\u6790\u3002\n\n0. \u6700\u540e\u7684\u7ed3\u679c\u80af\u5b9a\u662f\u4e00\u68f5\u6811\uff0c\u6240\u4ee5\u679a\u4e3e\u6253\u901a\u7684\u5c4b\u5b50\u5c31\u662f\u679a\u4e3e\u6811\u6839\u3002\n\n1. \u6253\u901a\u7684\u987a\u5e8f\u4e0d\u5f71\u54cd\u7ed3\u679c\uff0c\u6240\u4ee5\u4ece\u6d45\u5230\u6df1\u4f9d\u6b21\u6253\u901a\u3002\n\n2. \u5bf9\u4e8e\u540c\u6837\u4e00\u4e2a\u6253\u901a\u72b6\u6001 $S$\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u4ee3\u4ef7 $g(S)$ \u6700\u5c0f\u7684\u90a3\u4e2a\u3002\n\n3. \u4e8e\u662f\u53ef\u4ee5\u5f00\u59cb\u72b6\u538b\u52a8\u89c4\u4e86\uff0c**\u7b2c\u4e00\u70b9\u9650\u5236\u662f\u9636\u6bb5\uff0c\u7b2c\u4e8c\u70b9\u9650\u5236\u4fbf\u662f\u201c\u6700\u4f18\u5b50\u7ed3\u6784\u201d\uff0c\u96c6\u5408 $S$ \u53ef\u4ee5\u4f5c\u4e3a\u72b6\u6001\uff0c\u800c\u52a8\u89c4\u7684\u503c\u4fbf\u662f $g(S)$\u3002**\n\n## \u89e3\u6cd5\u4e00\uff1a\u4e8c\u8fdb\u5236\u72b6\u538b\uff0c\u6bcf\u6b21\u6269\u5c55\u4e00\u5c42\n\n\u65b9\u7a0b\u53ca\u5269\u4e0b\u7684\u9884\u5904\u7406\u90e8\u5206\u90fd\u5f88\u81ea\u7136\u3002\uff08$valid(S_1, S_2)$ \u8868\u793a\u80fd\u5426\u4ece $S_1$ \u6269\u5c55\u4e00\u5c42\u53d8\u6210 $S_2$\uff0c$expand(S)$ \u8868\u793a $S$ \u62d3\u5c55\u4e00\u5c42\u540e\u7684\u6253\u901a\u72b6\u6001\uff0c$cost(S_1, S_2)$ \u8868\u793a $valid(S_1, S_2) = \\text{true}$ \u7684\u65f6\u5019\u4ece $S_1$ \u8f6c\u79fb\u5230 $S_2$ \u7684\u6700\u5c11\u82b1\u8d39\uff0c$d(x)$ \u8868\u793a $x$ \u70b9\u7684\u5c42\u6570\uff0c$road(S, x)$ \u8868\u793a\u4ece\u6253\u901a\u96c6\u5408 $S$ \u5185\u7684\u70b9\u8fde\u5230 $x$ \u7684\u6700\u5c0f\u5316\u957f\u5ea6\uff0c\u6ce8\u610f $x \\in expand(S)$\uff09\u3002\n\n$$f(i, S) = \\min\\limits_{valid(S', S)} \\{f(i-1, S')+(i-1)\\, \\cdot\\, cost(S', S)\\}$$\n\n\u521d\u503c $\\forall x \\in [1, n], f(1, \\{x\\}) = 0$\uff0c\u5176\u4f59\u4e3a $+\\infty$\u3002\n\n$$\\begin{aligned}valid(S_1, S_2) &= S_1 \\subset S_2 \\text{ and } S_2 \\subset expand(S_1)\\\\\nexpand(S) &= S \\,\\cup \\, \\{x \\, | \\, d(x) \\leq \\max\\limits_{y\\in S}\\{d(y)\\}+1\\}\\\\\ncost(S_1, S_2) &= \\sum\\limits_{x \\in \\{S_2\\setminus S_1\\}} road(S_1, x)\\\\\nroad(S, x) &= \\min\\limits_{y \\in S} \\{g_{x,y}\\}\\end{aligned}$$\n\n\u4e8e\u662f\u76f4\u63a5\u65e0\u8111\u52a8\u89c4\u5c31\u884c\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(N3^N + M2^N)$\uff0c\u524d\u9762\u7684 $3^N$ \u662f\u679a\u4e3e $2^N$ \u4e2a\u96c6\u5408\uff08$\\varnothing$ \u5230 $\\{0,1,...,n-1\\}$\uff09\u7684\u5b50\u96c6\u7684\u590d\u6742\u5ea6\uff0c\u7528\u4e8c\u9879\u5f0f\u53cd\u6f14\u53ef\u4ee5\u63a8\u5f97\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint dp[15][1 << 12], expd[1 << 12], road[1 << 12][15], a[15][15], n, m;\nvector < pair <int, int> > nxt[1 << 12];\n\nsigned main() {\n    memset(dp, 0x3f, sizeof(dp));\n    memset(a, 0x3f, sizeof(a));\n    memset(road, 0x3f, sizeof(road));\n    cin >> n >> m;\n    for(int i=1; i<=m; i++) {\n        int u, v, w;\n        cin >> u >> v >> w;\n        a[u][v] = a[v][u] = min(a[u][v], w);\n    }\n    for(int i=0; i<n; i++) {\n        dp[1][1 << i] = 0;\n    }\n    for(int i=0; i<1<<n; i++) {\n        expd[i] = i;\n        for(int j=1; j<=n; j++) {\n            if(i>>(j-1) & 1) {\n                road[i][j] = 0;\n                for(int k=1; k<=n; k++) {\n                    if(i>>(k-1) & 1) continue;\n                    if(a[j][k] > 1000000) continue;\n                    expd[i] |= 1<<(k-1);\n                    road[i][k] = min(road[i][k], a[j][k]);\n                }\n            }\n        }\n    }\n    for(int i=0; i<1<<n; i++) {\n        for(int j=(i-1)&i; j!=i; j=(j-1)&i) {\n            if((i & expd[j]) != i) continue;\n            int cost = 0;\n            for(int k=1; k<=n; k++) {\n                if((i^j) >> (k-1) & 1) {\n                    cost += road[j][k];\n                }\n            }\n            nxt[j].push_back({i, cost});\n        }\n    }\n    int res = **dp;\n    for(int i=1; i<n; i++) {\n        for(int j=0; j<1<<n; j++) {\n            if(dp[i][j] > 100000000) continue;\n            for(const auto& P : nxt[j]) {\n                int k = P.first, c = P.second * i;\n                dp[i+1][k] = min(dp[i+1][k], dp[i][j] + c);\n            }\n        }\n        res = min(res, dp[i][(1<<n) - 1]);\n    }\n    cout << min(res, dp[n][(1<<n) - 1]) << endl;\n    return 0;\n}\n```\n\n## \u89e3\u6cd5\u4e8c\uff1a\u4e09\u8fdb\u5236\u72b6\u538b\uff0c\u6bcf\u6b21\u6269\u5c55\u4e00\u6761\u9053\u8def\n\n\u8fd9\u79cd\u65b9\u6cd5\u6bcf\u6b21\u53ea\u6253\u901a\u4e00\u4e2a\u70b9\u3002 $f(i, S)$ \u8868\u793a\u7b2c $i$ \u5c42\uff0c\u6253\u901a\u60c5\u51b5\u4e3a $S$\uff08**\u5176\u4e2d $S_{3, i}$ \u8868\u793a $S$ \u7684\u4e09\u8fdb\u5236\u8868\u793a\u7b2c $i$ \u4f4d\uff0c\u5982\u679c $S_{3, i}=1$ \u8868\u793a\u8282\u70b9 $i+1$ \u65e9\u6253\u901a\u4e86\u53ef\u4ee5\u8f6c\u79fb\uff0c$S_{3, i}=2$ \u8868\u793a\u73b0\u5728\u624d\u6253\u901a\u6216\u4e0d\u51c6\u5907\u8f6c\u79fb\u4e86\uff0c$S_{3, i} = 0$ \u8868\u793a\u6ca1\u6253\u901a**\uff09\u3002\n\n\u521d\u503c $\\forall x \\in [1, n], f(1, 3^{x-1}) = 0$\uff0c\u5176\u4f59\u4e3a $+\\infty$\u3002\u76ee\u6807\u662f $f(n+1, \\frac{3^n-1}2)$\uff0c\u4e5f\u5c31\u662f $f(n+1, (111\\dots1)_3)$\uff08$n$ \u4e2a $1$\uff09\u3002\n\n\u6709 $3$ \u79cd\u8f6c\u79fb\uff1a\n\n1. \u653e\u5f03\u8fd9\u4e00\u5c42\u7684\u8f6c\u79fb\uff0c\u8df3\u5230\u4e0b\u4e00\u5c42\u3002\u5373\u4ee4 $S'$ \u662f\u628a $S$ \u4e09\u8fdb\u5236\u8868\u793a\u91cc\u7684 $2$ \u5168\u90e8\u6362\u6210 $1$ \u540e\u7684\u72b6\u6001\uff0c\u5219\u53ef\u4ee5\u7528 $f(i, S)$ \u66f4\u65b0 $f(i+1, S')$\u3002\n\n2. \u653e\u5f03\u6700\u9ad8\u4f4d $1$ \u7684\u8f6c\u79fb\uff0c\u5c06\u5b83\u7f6e\u4e3a $2$\u3002\u5373\u8bbe $S$ \u6700\u9ad8\u4f4d $1$ \u662f\u7b2c $x$ \u4f4d\uff0c\u5219\u53ef\u4ee5\u7528 $f(i, S)$ \u66f4\u65b0 $f(i, S+3^x)$\u3002\n\n3. \u7528\u6700\u9ad8\u4f4d\u7684 $1$ \u6765\u66f4\u65b0\u72b6\u6001\u3002\u5373\u8bbe $S$ \u6700\u9ad8\u4f4d $1$ \u662f\u7b2c $x-1$ \u4f4d\uff0c\u6709\u8282\u70b9 $y$ \u4e0e $x$ \u8fde\u8fb9\u4e14 $y$ \u672a\u88ab\u6253\u901a\uff0c\u5219\u53ef\u7528 $f(i,S)+g_{x,y}$ \u66f4\u65b0 $f(i, S+3^{y-1})$\u3002**\uff08\u6ce8\u610f\u6211\u662f\u4ece $1$ \u5f00\u59cb\u4e3a\u8282\u70b9\u6807\u53f7\u7684\uff09**\n\n\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\u662f\u6b63\u786e\u7684\u5462\uff1f[\u539f\u56fe](https://cdn.luogu.com.cn/upload/image_hosting/4hafkjlu.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/4vbcissh.png)\n\n\u6211\u4eec\u53d1\u73b0\u5f00\u5934\u5f53\u66f4\u65b0\u5b8c $\\{2,3,4\\}$ \u65f6\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u5148\u4f1a\u5c1d\u8bd5\u7528 $4$ \u6765\u66f4\u65b0\u5230 $6$\uff0c\u7136\u540e\u653e\u5f03 $4$ \u7684\u66f4\u65b0\u3002\u63a5\u7740 $3$ \u4e5f\u8fd9\u4e48\u505a\u4e00\u904d\uff0c\u6700\u540e\u662f $2$\u3002\u7136\u540e\u5230\u4e86 $2$ \u65f6\u6210\u529f\u66f4\u65b0\u6210\u6b63\u786e\u7b54\u6848\u3002**\u5c31\u662f\u8bf4\uff0c\u201c\u653e\u5f03\u8fd9\u4e2a\u8282\u70b9\u7684\u8f6c\u79fb\u201d\u8fd9\u4e2a\u51b3\u7b56\u6392\u9664\u4e86\u679a\u4e3e $S$ \u5185\u6bcf\u4e2a\u5143\u7d20\u7684\u65e0\u7528\u51b3\u7b56\uff0c\u4f7f\u5f97\u6700\u4f18\u89e3\u603b\u662f\u4f1a\u8f6e\u5230\uff08\u5b83\u4e0a\u9762\u7684\u6bcf\u4e2a\u70b9\u90fd\u653e\u5f03\u8f6c\u79fb\uff0c\u5c31\u5230\u5b83\u4e86\uff09\u3002**\n\n\u56e0\u4e3a\u4e0d\u80fd\u4f7f\u7528\u4f4d\u8fd0\u7b97\u5904\u7406\u4e09\u8fdb\u5236\uff0c\u6240\u4ee5\u9700\u8981\u6ce8\u610f\u5b9e\u73b0\u7684\u5e38\u6570\u3002\uff08\u6211\u88ab\u5361\u4e86\u5f88\u4e45\uff0c\u5f00\u5934\u4e0a\u9762\u7684 $50$ \u4e2a $\\text{Hack}$ \u6570\u636e\u5168\u90e8\u8d85\u65f6\uff09\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#define GenShin(x, y) ((x>y) && (x=y))\n#include<bits/stdc++.h>\nusing namespace std;\nint dp[15][533333], n, m, a[15][15], ss, b[15], q;\nconstexpr int pw[] = {1, 3, 9, 27, 81, 243, 729, 2187, 6561, 19683, 59049, 177147, 531441, 1594323};\ninline int tto(int x) {\n    ss = 0; q = 0;\n    int ww = 1;\n    for(int i=0; i<n; i++) {\n        int tt = x/ww%3;\n        if(tt == 2) {\n            x -= ww;\n        }\n        else if(tt == 0) {\n            b[++ss] = i+1;\n        }\n        else q = i+1;\n        ww *= 3;\n    }\n    return x;\n}\nint main() {\n    ios_base :: sync_with_stdio(0); cin.tie(0); cout.tie(0);\n    memset(dp, 0x3f, sizeof(dp));\n    memset(a, 0x3f, sizeof(a));\n    cin >> n >> m;\n    for(int i=1; i<=n; i++) {\n        dp[1][pw[i-1]] = 0;\n    }\n    for(int i=1; i<=m; i++) {\n        int u, v, w;\n        cin >> u >> v >> w;\n        a[u][v] = a[v][u] = min(a[u][v], w);\n    }\n    for(int i=1; i<=n; i++) {\n        for(int j=1; j<pw[n]; j++) {\n            if(dp[i][j] > 1e9) continue;\n            int x = tto(j);\n            swap(x, q);\n            if(!x) goto T_T;\n            for(int k=1; k<=ss; k++) {\n                int y = b[k];\n                if(a[x][y] > 1e6) continue;\n                GenShin(dp[i][j+2*pw[y-1]], dp[i][j] + i*a[x][y]);\n            }\n            GenShin(dp[i][j+pw[x-1]], dp[i][j]);\n            T_T : GenShin(dp[i+1][q], dp[i][j]);\n        }\n    }\n    cout << dp[n+1][(pw[n]-1) >> 1] << endl;\n}\n```",
        "postTime": 1671685454,
        "uid": 380730,
        "name": "LKX_Wata",
        "ccfLevel": 7,
        "title": "P3959 \u603b\u7ed3"
    }
]
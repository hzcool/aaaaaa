[
    {
        "content": "## Solution \n- \u4e00\u9053\u6bd4\u8f83\u88f8\u7684**\u6a21\u62df**\u2026\u2026\n\n- \u9996\u5148\u6211\u4eec\u8003\u8651\u679a\u4e3e\u5b50\u4e09\u89d2\u5f62\u7684\u9876\u70b9\uff08\u5f53\u7136\u9876\u70b9\u65e2\u53ef\u80fd\u5728\u5b50\u4e09\u89d2\u5f62\u7684\u6700\u4e0a\u65b9\uff0c\u4e5f\u53ef\u80fd\u5728\u6700\u4e0b\u65b9\uff09\uff0c\u7136\u540e\u679a\u4e3e\u5b50\u4e09\u89d2\u5f62\u7684\u8fb9\u957f\uff0c\u8ba1\u7b97\u5b50\u4e09\u89d2\u5f62\u4e2d\u6bcf\u4e00\u5c42\u6570\u7684\u548c\u3002\n\n- \u8fd9\u91cc\u6bcf\u4e00\u5c42\u6570\u7684\u548c\u53ef\u4ee5\u9884\u5904\u7406\u5176\u524d\u7f00\u548c\uff0c\u7136\u540e\u5728\u679a\u4e3e\u4e2d $O(1)$ \u5f97\u5230\uff0c\u90a3\u4e48\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u6982\u4e5f\u5c31\u662f $O(n^2k)$\u3002\u800c\u4e14\u5b9e\u9645\u4e0a\u6211\u4eec\u4e00\u65e6\u53d1\u73b0\u679a\u4e3e\u7684\u5b50\u4e09\u89d2\u5f62\u8d85\u51fa\u4e86\u5927\u4e09\u89d2\u5f62\u7684\u8fb9\u754c\u5c31\u53ef\u4ee5\u76f4\u63a5\u7ed3\u675f\u679a\u4e3e\u8fb9\u957f\u7684\u5faa\u73af\uff0c\u8fd9\u6837\u4e5f\u80fd\u5feb\u5f88\u591a\u3002\n\n- \u4e0d\u8fc7\u9898\u76ee\u4e2d\u5bf9\u4e09\u89d2\u8fb9\u8fb9\u957f\u4e0d\u80fd\u8d85\u8fc7 $2k$ \u7684\u8981\u6c42\u662f\u6ca1\u6709\u5fc5\u8981\u7684\uff08\u8fd9\u597d\u50cf\u662f\u8bd1\u8005\u81ea\u5df1\u52a0\u8fdb\u53bb\u7684\u2026\u2026\uff09\uff0c\u56e0\u4e3a\u8fd9\u662f\u53ef\u4ee5\u901a\u8fc7\u5176\u5b83\u6761\u4ef6\u63a8\u51fa\u6765\u7684\uff0c\u5177\u4f53\u4e3a\u4ec0\u4e48\u4e5f\u53ef\u4ee5\u770b\u770b\u6211\u7684[\u535a\u5ba2](http://blog.csdn.net/bzjr_log_x/article/details/76849952)\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bba\u8ff0\u4e86\u3002\n\n## Code\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n\nusing namespace std;\ntypedef long long ll;\nconst int N = 705;\nll Ans = -1e15, a[N][N];\nint n, d;\n\ninline void CkMax(ll &x, const ll &y) {if (x < y) x = y;}\n\ninline int get()\n{\n    char ch; int res = 0; bool f = false;\n    while (((ch = getchar()) < '0' || ch > '9') && ch != '-');\n    if (ch == '-') f = true;\n     else res = ch - '0';\n    while ((ch = getchar()) >= '0' && ch <= '9')\n     res = (res << 3) + (res << 1) + ch - '0';\n    return f ? -res : res;\n}\n\ninline void put(ll x)\n{\n    if (x < 0) \n     x = -x, putchar('-');\n    if (x > 9) put(x / 10);\n    putchar(x % 10 + 48);\n}\n\nint main()\n{\n    n = get(); d = get();\n    for (int i = 1; i <= n; ++i)\n     for (int j = 1; j <= i; ++j)\n      a[i][j] = a[i][j - 1] + get();\n    ll res, num;\n    for (int i = 1; i <= n; ++i)\n     for (int j = 1; j <= i; ++j)\n     {\n         res = num = 0ll;\n         for (int k = 1; k <= (d << 1); ++k)\n         {\n             int tx = i + k - 1, ty = j + k - 1;\n             if (tx > n || ty > tx) break;\n             res += a[tx][ty] - a[tx][j - 1]; num += k;\n            if (k >= d) CkMax(Ans, res / num);\n        }\n        res = num = 0ll;\n        for (int k = 1; k <= (d << 1); ++k)\n        {\n            int tx = i - k + 1, ty = j - k + 1;\n            if (tx < 1 || ty < 1 || j > tx) break;\n            res += a[tx][j] - a[tx][ty - 1]; num += k;\n            if (k >= d) CkMax(Ans, res / num);\n        }\n     }\n    return put(Ans), 0;\n}\n```",
        "postTime": 1502091910,
        "uid": 17952,
        "name": "Log_x",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3016 \u3010[USACO11FEB]\u4e09\u89d2\u5f62The Triangle\u3011"
    }
]
[
    {
        "content": "\u672c\u9898\u90a3\u4e48\u597d\u7684\u4e00\u9053dfs\u7206\u641c\u9898\uff0c\u4e3a\u5565\u8981\u7528DP\uff1f\uff08~~\u672c\u849f\u84bb\u4e0d\u4f1aDP~~\uff09\n\n\u601d\u8def\u5f88\u7b80\u5355\uff0c\u7531\u4e8en\u5f88\u5c0f\uff0c\u5b8c\u5168\u53ef\u4ee5\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\u5f53\u8d77\u70b9\uff0c\n\u540c\u65f6\u8bb0\u5f55\u8def\u5f84\uff1b\u4e0b\u9762\u8d34\u4ee3\u7801\n\n\u795e\u5947\u5206\u5272\u7ebf\n\n------------\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<string>\n#include<algorithm>\n#include<queue>\nusing namespace std;\nbool f[21][21];//\u8bb0\u5f55\u662f\u5426\u6709\u8def\u5f84\u76f8\u8fde\nint a[21];//\u8bb0\u5f55\u5730\u96f7\u6570\nint path[21],ans[21],cnt;//path\u8bb0\u5f55\u8def\u5f84\uff0cans\u8bb0\u5f55\u7b54\u6848\uff0ccnt\u8bb0\u5f55\u8d70\u4e86\u591a\u5c11\u4e2a\u70b9\nbool b[21];//\u8bb0\u5f55\u8be5\u70b9\u662f\u5426\u8d70\u8fc7\nint n;\nint maxx;//\u8bb0\u5f55\u6316\u7684\u6700\u5927\u5730\u96f7\u6570\nbool chck(int x)//\u68c0\u67e5\u662f\u5426\u8fd8\u80fd\u7ee7\u7eed\u5f80\u4e0b\u6316\n{\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(f[x][i]&&!b[i]) return false;\n \t}\n \treturn true;\n}\nvoid dfs(int x,int stp,int sum)//x\u8bb0\u5f55\u73b0\u5728\u4f4d\u7f6e\uff0cstp\u8bb0\u5f55\u8d70\u4e86\u51e0\u4e2a\u70b9\uff0csum\u8bb0\u5f55\u6316\u7684\u5730\u96f7\u6570\n{\n\tif(chck(x))\n\t{\n\t\tif(maxx<sum)//\u66f4\u65b0\u6700\u5927\u503c\u548c\u8def\u5f84\n\t\t{\n\t\t\tmaxx=sum;\n\t\t\tcnt=stp;\n\t\t\tfor(int i=1;i<=stp;i++)\n\t\t\tans[i]=path[i];\t\n\t\t}\n\t\treturn ;\n\t}\n\tfor(int i=1;i<=n;i++)//\u5bfb\u627e\u4e0b\u4e00\u4e2a\u80fd\u53bb\u7684\u5730\u65b9\n\t{\n\t\tif(f[x][i]&&!b[i])\n\t\t{\n\t\t\tb[i]=1;//\u6807\u8bb0\u8d70\u8fc7\n\t\t\tpath[stp+1]=i;//\u8bb0\u5f55\u8def\u5f84\n\t\t\tdfs(i,stp+1,sum+a[i]);\n\t\t\tb[i]=0;//\u56de\u6eaf\n\t\t}\n\t\t\n\t}\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\tcin>>a[i];\n\tfor(int i=1;i<n;i++)\n\tfor(int j=i+1;j<=n;j++)\n\t{\n\t\tcin>>f[i][j];//\u8fd9\u91cc\u662f\u5355\u5411\u8fb9\uff0c\u9898\u76ee\u6ca1\u5565\u6e05\u695a\uff0c\u5bfc\u81f4\u6211\u8c03\u4e86\u534a\u4e2a\u5c0f\u65f6\uff1b\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tb[i]=1;\n\t\tpath[1]=i;//\u8bb0\u5f55\u8d77\u70b9\n\t\tdfs(i,1,a[i]);\n\t\tb[i]=0;\n\t}\n\tfor(int i=1;i<=cnt;i++)\n\tcout<<ans[i]<<' ';\n\tcout<<endl<<maxx;\n\treturn 0;\n}\n```\n\u534e\u4e3d\u7684\u7ed3\u675f\u3002\n\n-----\n\u5b89\u5229\u4e00\u4e0b\u6211\u7684[\u535a\u5ba2](https://me.csdn.net/weixin_43795131)\u3002\n\n\u6c42\u7ba1\u7406\u5927\u5927\u7ed9\u8fc7\u3002",
        "postTime": 1544254893,
        "uid": 113773,
        "name": "\u516c\u4e3b\u6bbf\u4e0bMIKU",
        "ccfLevel": 0,
        "title": "\u6316\u5730\u96f7"
    },
    {
        "content": "## \u5206\u6790\n\n\u770b\u5404\u4f4d\u5927\u4f6c\u7528\u7684\u57fa\u672c\u4e0a\u90fd\u662f\u9006\u63a8\u7684\u601d\u60f3,\u672c\u849f\u84bb\u5c31\u53d1\u4e00\u4e2a\u987a\u63a8\u7684\u628a.\u5176\u5b9e\u4e5f\u4e0d\u96be\u60f3.\u5b9a\u4e49\u72b6\u6001$f[i]$\u4e3a\u4ee5\u7b2c$i$\u4e2a\u8282\u70b9\u7ed3\u675f\u7684\u6700\u5927\u503c,\u5219$f[i]=max \\{ f[j]\\}+a[i]\\ \\ (g[j][i]=1)$,\u8fd9\u6837\u5c31\u4e0d\u96be\u5199\u51fa\u4ee3\u7801\u6765\u4e86.\u81f3\u4e8e\u8f93\u51fa,\u7528\u4e00\u4e2a$pre[i]$\u6570\u7ec4\u5b58\u50a8$i$\u7684\u524d\u9a71\u7ed3\u70b9,\u9012\u5f52\u8f93\u51fa\u5373\u53ef.\n\n## \u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\nint n,a[205],g[205][205],pre[205],t,f[205],ans;\nvoid print(int x) {\n\tif (pre[x]==0) {\n\t\tprintf(\"%d\",x);\n\t\treturn;\n\t}\n\tprint(pre[x]);\n\tprintf(\" %d\",x); \n}\nint main() {\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++) scanf(\"%d\",a+i);\n\tfor (int i=1;i<n;i++) {\n\t\tfor (int j=i+1;j<=n;j++) {\n\t\t\tint x;\n\t\t\tscanf(\"%d\",&x);\n\t\t\tif (x==1) g[i][j]=1;\n\t\t}\n\t}\n\tfor (int i=1;i<=n;i++) {\n\t\tfor (int j=1;j<=n;j++) {\n\t\t\tif (g[j][i]&&f[j]>f[i]) {\n\t\t\t\tf[i]=f[j];\n\t\t\t\tpre[i]=j;\n\t\t\t}\n\t\t}\n\t\tf[i]+=a[i];\n\t\tif (f[i]>ans) {\n\t\t\tans=f[i];\n\t\t\tt=i;\n\t\t}\n\t}\n\tprint(t);\n\tprintf(\"\\n%d\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1531141778,
        "uid": 82805,
        "name": "Drawing_Yang",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u849f\u84bb\u6765\u53d1\u9898\u89e3\u4e86~\n\n\n------------\n\u7531\u4e8e\u6b63\u89e3\u662fDP\uff0c\u90a3\u6211\u4eec\u5c31\u7528DP\n\n\uff08\u5c3d\u7ba1\u6570\u636e\u5f88\u6c34\u53ef\u4ee5\u641c\u7d22\uff09\n\n\n------------\n\u8001\u6837\u5b50\uff0cDP\u8003\u86513\u4ef6\u4e8b\uff1a\u6570\u7ec4\u3001\u65b9\u7a0b\u3001\u521d\u59cb\u5316\n\n\n------------\n## \u4e00.\u6570\u7ec4\n\u901a\u8fc7\u5bf9\u7ebf\u6027\u52a8\u89c4\u7684\u5b66\u4e60\u6211\u4eec\u77e5\u9053\n\n\u8fd9\u7c7b\u9898\u76ee\u7684\u6570\u7ec4\u5927\u591a\u90fd\u662f\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\n\n\u8fd9\u9898\u4f5c\u4e3a\u5178\u578b\u9898\u76ee\u4e4b\u4e00\uff0c\u81ea\u7136\u9003\u4e0d\u51fa\u4e00\u7ef4\u6570\u7ec4\u7684\u624b\u638c\u5fc3\n\n\u6211\u4eec**\u7528$dp_{i}$\u8868\u793a\u6316\u5730\u96f7\u65f6\u4ee5\u70b9i\u4e3a\u7ec8\u70b9\u6240\u80fd\u6316\u5230\u7684\u6700\u5927\u5730\u96f7\u6570**\n\n\u7528$a_{i}$\u8868\u793a\u7b2c$i$\u4e2a\u70b9\u7684\u5730\u96f7\u6570\n\n\u7136\u540e**\u7528\u987a\u63a8\u7684\u65b9\u5f0f\u4ece2\u4e00\u76f4\u63a8\u5230$n$**\n\n\u6700\u540e\u8f93\u51fa$dp$\u6570\u7ec4\u5b58\u50a8\u7684\u6700\u5927\u503c\u5373\u53ef\n\n\n------------\n## \u4e8c.\u65b9\u7a0b\n\u6211\u4eec\u53ef\u4ee5\u501f\u9274\u4e00\u4e0b\u6700\u957fXX\u5b50\u5e8f\u5217\u7684\u601d\u8def\uff1a\n```cpp\nfor(int i=2;i<=n;++i){\n\t\tdp[i]=0;\n\t\tfor(int j=i-1;j>0;--j){\n\t\t\tif(a[i]>a[j]){\n\t\t\t\tdp[i]=max1(dp[i],dp[j]);\n\t\t\t}\n\t\t}\n\t\tdp[i]++;\n\t\tif(dp[i]>ans) ans=dp[i];\n\t}\n```\n\u5bf9\u4e8e$dp_{i}$\uff0c\u7528$j$\u4ece1\u5230$i$-1\u679a\u4e3e\n\n\u5982\u679c\u4ece$j$\u5230$i$\u6709\u8def\u53ef\u8d70\u4e14$dp_{j}$>$dp_{i}$\n\n\u90a3\u5c31\u628a$dp_{i}$\u7684\u503c\u66f4\u65b0\u4e3a$dp_{j}$\n\n\u679a\u4e3e\u7ed3\u675f\u540e\u628a$dp_{i}$\u7684\u503c\u52a0\u4e0a\u7b2c$i$\u4e2a\u70b9\u7684\u5730\u96f7\u6570\n\n\u4e00\u53e5\u8bdd\uff0c**\u627e\u51fa\u70b9$j$\u4f7f\u5f97$j$<$i$\uff0c$dp_{j}$\u4e3a\u6700\u5927\u503c\u4e14$i,j$\u4e4b\u95f4\u6709\u901a\u8def**\n\n**\u518d\u52a0\u4e0a\u7b2c$i$\u4e2a\u70b9\u7684\u5730\u96f7\u6570**\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$dp_{i}$=$a_{i}$ + $\\max$($dp_{1}$ , $dp_{2}$ $\\ldots$ $ dp_{i-1}$)\n\n------------\n## \u4e09.\u521d\u59cb\u5316\n\u9996\u5148\uff0c$dp_{1}$=$a_{1}$\n\n\u5176\u6b21\uff0c\u5bf9\u4e8e$dp_{i}$\uff082<=$i$<=$n$\uff09\uff0c\u6709\u4e24\u79cd\u9009\u62e9\uff1a\n\n\u4e00\u662f\u90fd\u521d\u59cb\u5316\u4e3a0\n\n\u4e8c\u662f\u90fd\u521d\u59cb\u5316\u4e3a$a_{i}$\n\n\u524d\u8005\u9700\u5728\u679a\u4e3e\u5b8c\u4e4b\u540e\u52a0\u4e0a$a{i}$\uff0c\u4f46\u5224\u65ad\u6761\u4ef6\u8f83\u4e3a\u7b80\u7565\n\n\u540e\u8005\u4e0d\u9700\u518d\u52a0\u4e0a$a_{i}$\uff0c\u4f46\u5224\u65ad\u6761\u4ef6\u7565\u663e\u7e41\u7410\n\n\u7b14\u8005\u5728\u6b64\u9009\u540e\u8005\n\n\n------------\n\u4ee3\u7801\u6765\u4e86~||\u30fd(*\uffe3\u25bd\uffe3*)\u30ce\u30df|\u042e\n```cpp\n#include<iostream>\n#include<cstdio>\n#define maxn 201//\u6570\u7ec4\u5f00\u5927\u4e00\u70b9\n#define fo(x) for(register int i=1;i<=x;++i)//\u5b8f\u5b9a\u4e49\uff0c\u7701\u4e8b\nusing namespace std;\nbool rd[maxn][maxn];\n//rd[i][j]\u8bb0\u5f55i\u5230j\u662f\u5426\u662f\u901a\u8def\n//dp[i]\u8868\u793a\u4ee5i\u4e3a\u7ec8\u70b9\u6240\u80fd\u6316\u5230\u7684\u6700\u5927\u5730\u96f7\u6570 \n//a[i]\u8868\u793a\u7b2ci\u4e2a\u70b9\u7684\u5730\u96f7\u6570\nint a[maxn],dp[maxn],p[maxn],pos;//p[i]\u8868\u793ai\u7684\u524d\u8d8b \nvoid DFS(int x){//\u5012\u7740\u8f93\u51fa\n\tif(p[x]) DFS(p[x]);//\u5982\u679cx\u6709\u524d\u8d8b\uff0c\u7ee7\u7eed\u641c\n\tcout<<x<<\" \";\n}\nint main(){\n\tint n,ans=0;\n\tcin>>n;\n\tfo(n) scanf(\"%d\",&a[i]);\n\tfo(n-1)\n\t\tfor(register int j=i+1;j<=n;++j){//\u6309\u683c\u5f0f\u8f93\u5165\u8def\u5f84\n\t\t\tscanf(\"%d\",&rd[i][j]);\n\t\t}\n\tdp[1]=a[1];//\u521d\u59cb\u5316\n\tfor(register int i=2;i<=n;++i){//\u4ece2\u5f00\u59cb\u5230n\u7ed3\u675f\n\t\tdp[i]=a[i];//\u521d\u59cb\u5316\n\t\tfor(register int j=i-1;j>0;--j){//\u679a\u4e3e\u5bfb\u627e\u6700\u5927\u503c\n\t\t\tif(rd[j][i]&&dp[i]<dp[j]+a[i]){\n            //\u6709\u8def\u5f84\u4e14\u5927\u4e8e\u76ee\u524d\u7684\u6700\u5927\u503c\n\t\t\t\tdp[i]=dp[j]+a[i];//\u66f4\u65b0\n\t\t\t\tp[i]=j;//\u8bb0\u5f55i\u7684\u524d\u8d8b\u4e3aj\n\t\t\t}\n\t\t}\n\t\tif(ans<dp[i]){//\u66f4\u65b0\u7b54\u6848\n\t\t\t ans=dp[i];\n\t\t\t pos=i;//\u8bb0\u5f55\u53d6\u70b9\u7684\u4f4d\u7f6e\n\t\t}\n\t}\n\tDFS(pos);//\u5148\u8f93\u51fa\u6700\u4f18\u8def\u5f84\n\tcout<<endl<<ans;//\u518d\u8f93\u51fa\u7b54\u6848\n\treturn 0;//\u540e\u8bdd\uff1a\u6b64\u9898\u53ef\u6982\u62ec\u4e3a\u201c\u6700\u957f\u8fde\u901a\u5b50\u5e8f\u5217\u201d\n}\n```\n",
        "postTime": 1578824583,
        "uid": 238408,
        "name": "vectorwyx",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "### \u697c\u4e0a\u8bf8\u4f4d\u5747\u6709DP/\u56fe\u8bba\u4e4b\u7c7b\u7684\u7b97\u6cd5\n\n### \u672c\u5c0a\u4e5f\u4e0d\u591a\u8bf4\uff0c\u8bb0\u5fc6\u5316\u641c\u7d22\uff08\uff09\u601d\u7ef4\u7b80\u5355\n\n------\n\n# \u601d\u8def\n\n\n- d[i]:\u4ecei\u51fa\u53d1\u80fd\u83b7\u5f97\u7684\u6700\u591a\u7684\u5730\u96f7\u6570\u91cf\n- next[i]:\u76f8\u5e94\u7684\u8def\u5f84\n- w[i]:i\u7ed3\u70b9\u539f\u6709\u7684\u5730\u96f7\u6570\u91cf\n\n\n- count(u)\n\t- \u5bf9\u4e8e\u4eceu\u51fa\u53d1\u80fd\u5230\u8fbe\u7684\u6bcf\u4e00\u4e2a\u4e0eu\u76f8\u90bb\u7684\u7ed3\u70b9i\n\t\t- if (d[i]\u672a\u8ba1\u7b97)d[i]=count(i);\n\t\t- \u8bb0\u5f55v=max{d[i]},k\u4e3av\u7684\u5bf9\u5e94\u7684\u7ed3\u70b9\n\t- next[u]=k;\n\t- return v+w[u];\n\n## \u4e3b\u7b97\u6cd5\n\n- \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5165\u5ea6\u4e3a0\u7684\u70b9z\n\t- d[z]=count(z);\n\t- \u8bb0\u5f55y=max{d[z]},x\u4e3a\u5bf9\u5e94\u7684\u7ed3\u70b9\n- while(x!=-1)\n\t- \u8f93\u51fax\n\t- x=next[x]\n- \u8f93\u51fay \n\n------\n\n# \u4ee3\u7801\n```cpp\n#include<iostream>\n\nusing namespace std;\n\nint n,a,y,x;\nint d[30],w[30],id[30],next[30];\nbool linker[30][30];\n\nint count(int u)\n{\n\tif(d[u])return d[u];\n\tint v=0,k=-1;\n\tfor(int i=1;i<=n;i++)\n\t\tif(linker[u][i])\n\t\t{\n\t\t\tif(d[i]==0)d[i]=count(i);\n\t\t\tif(d[i]>v)v=d[i],k=i;\n\t\t}\n\tnext[u]=k;\n\treturn v+w[u];\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>w[i];\n\t\tid[i]=0;\n\t\tnext[i]=-1;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tcin>>a;\n\t\t\tif(a)linker[i][j]=true,id[j]++;\n\t\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(id[i]==0)\n\t\t{\n\t\t\td[i]=count(i);\n\t\t\tif(d[i]>y)y=d[i],x=i;\n\t\t}\n\twhile(x!=-1)\n\t{\n\t\tcout<<x<<' ';\n\t\tx=next[x];\n\t}\n\tcout<<endl<<y;\n\treturn 0;\n}\n```",
        "postTime": 1518405731,
        "uid": 42196,
        "name": "sshwy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u5c31\u662f\u4e2a\u5347\u7ea7\u7248\u62e6\u622a\u5bfc\u5f39\u561bQWQ\n\n\u53ef\u80fd\u662f\u9898\u610f\u4e0d\u6e05\u6240\u4ee5\u8ba9\u4eba\u89c9\u5f97\u9ebb\u70e6\n\n\u5176\u5b9e\u5f88\u7b80\u5355\u8bf6\n\n\u81ea\u4ee5\u4e3a\u4ee3\u7801\u5199\u7684\u6bd4\u8f83\u6e05\u695a\uff1a\n```\n#include<cstdlib>\n#include<cstdio>\n#include<iostream>\n#include<cmath>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint n,a[25][25];\nint f[25],w[25],q[25],ans[25];\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){scanf(\"%d\",&w[i]);f[i]=w[i];}\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=i+1;j<=n;j++)\n\tscanf(\"%d\",&a[i][j]);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<i;j++)\n\t\t{\n\t\t\tif(a[j][i])\n\t\t\t{\n\t\t\t\tif(f[j]+w[i]>f[i])\n\t\t\t\t{\n\t\t\t\t    f[i]=f[j]+w[i];\n\t\t\t\t    q[i]=j;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint x=0,tot=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(f[x]<f[i])x=i;\n\t}\n\tans[0]=f[x];\n\twhile(x)\n\t{\t\n\t\tans[++tot]=x;\n\t\tx=q[x];\n\t}\n\tfor(int i=tot;i>1;i--)printf(\"%d \",ans[i]);\n\tprintf(\"%d\",ans[1]);\n\tprintf(\"\\n%d\",ans[0]);\n\treturn 0;\n}\n```",
        "postTime": 1533117405,
        "uid": 58070,
        "name": "\u7530\u9619\u897f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u5965\u8d5b\u4e00\u672c\u901a\u4e0a\u5c31\u6709\u3002\u3002\u3002\n\nf[i]\u8868\u793a\u7b2ci\u4e2a\u5730\u7a96\u80fd\u6316\u7684\u6700\u5927\u5730\u96f7\u6570\u3002\n\nw[i]\u4ee3\u8868\u7b2ci\u4e2a\u5730\u7a96\u539f\u672c\u6709\u7684\u5730\u96f7\u6570\u3002\n\na[i][j]==1\u4ee3\u8868i\u80fd\u5230j,\u5426\u5219\u4e0d\u80fd\n\n\u521d\u59cb\u8fb9\u754c\uff1af[i]=w[i](1<=i<=n)\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u662ff[i]=max{f[j]+w[i]}(a[i][j]=1,i<j<=n)\u3002\u3002\u3002\u5427\n\nans=f[n]\n\n\u4e66\u4e0a\u5c31\u6709\uff0c\u8be6\u770b\u7a0b\u5e8f\n\n```cpp\n\n#include<iostream>  \n#include<cstdio>  \n#include<cstdlib>  \n#include<cmath>  \n#include<algorithm>  \n#include<cstring>  \n#include<map>  \n#include<vector>  \nusing namespace std;  \nconst int maxn=201;  \nbool adja[maxn][maxn]={false};  \nint data[maxn]={0},pre[maxn]={0},f[maxn]={0},n=0;  \nint main()  \n{  \n    scanf(\"%d\",&n);  \n    for (int i=1;i<=n;i++)  \n    {  \n        scanf(\"%d\",&data[i]);  \n        f[i]=data[i];  \n    }     \n    for (int i=1;i<n;i++)  \n        for (int j=i+1;j<=n;j++)  \n            scanf(\"%d\",&adja[i][j]);  \n    //f[n]=data[n];  \n    for (int i=n-1;i>=1;i--)  \n    {  \n        int fj=0,path=0;  \n        for (int j=i+1;j<=n;j++)  \n            if (adja[i][j]&&f[j]>fj)  \n            {  \n                fj=f[j];  \n                path=j;  \n            }  \n        f[i]=fj+data[i];  \n        pre[i]=path;  \n    }  \n    int k=1;  \n    for (int i=2;i<=n;i++)  \n        if (f[i]>f[k])  \n           k=i;  \n    int _max=f[k];  \n    printf(\"%d\",k);  \n    k=pre[k];  \n    while(k)  \n    {  \n        printf(\" %d\",k);  \n        k=pre[k];  \n    }  \n    puts(\"\");  \n    printf(\"%d\",_max);  \n    return 0;  \n}  \n\n```",
        "postTime": 1457148789,
        "uid": 5846,
        "name": "yyy2015c01",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "# \u9898\u76ee\uff1aP2196 \u6316\u5730\u96f7 1996 \u63d0\u9ad8\u7ec4 T2\n## \u9898\u76ee\u63cf\u8ff0\n\u5728\u4e00\u4e2a\u5730\u56fe\u4e0a\u6709 $N$ \u4e2a\u5730\u7a96 $ (N \\le 20) $\uff0c\u6bcf\u4e2a\u5730\u7a96\u4e2d\u57cb\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u5730\u96f7\u3002\u540c\u65f6\uff0c\u7ed9\u51fa\u5730\u7a96\u4e4b\u95f4\u7684\u8fde\u63a5\u8def\u5f84\u3002\u5f53\u5730\u7a96\u53ca\u5176\u8fde\u63a5\u7684\u6570\u636e\u7ed9\u51fa\u4e4b\u540e\uff0c**\u67d0\u4eba\u53ef\u4ee5\u4ece\u4efb\u4e00\u5904\u5f00\u59cb\u6316\u5730\u96f7**\uff0c\u7136\u540e\u53ef\u4ee5\u6cbf\u7740\u6307\u51fa\u7684\u8fde\u63a5\u5f80\u4e0b\u6316\uff08\u4ec5\u80fd\u9009\u62e9\u4e00\u6761\u8def\u5f84\uff09\uff0c\u5f53\u65e0\u8fde\u63a5\u65f6\u6316\u5730\u96f7\u5de5\u4f5c\u7ed3\u675f\u3002\u8bbe\u8ba1\u4e00\u4e2a\u6316\u5730\u96f7\u7684\u65b9\u6848\uff0c\u4f7f\u67d0\u4eba\u80fd\u6316\u5230\u6700\u591a\u7684\u5730\u96f7\u3002\n## \u5206\u6790\n$1$ .\u6709\u56fe\u8bba\u7684\u7279\u70b9\u3002  \n$2$ .\u6570\u636e\u8303\u56f4\u5f88\u5c0f$ (N \\le 20) $\uff0c\u53ef\u4ee5\u8fdb\u884c\u201c\u5947\u7279\u201d\u7684\u5c1d\u8bd5\u3002  \n$3$ .\u53c8\u8981\u8f93\u51fa\u8def\u7ebf\uff0c\u53c8\u8981\u8f93\u51fa\u6700\u5927\u65b9\u6848\u7ed3\u679c\uff0c\u53ef\u4ee5\u7ed3\u5408\u8d77\u6765\uff0c\u51cf\u5c11\u7801\u91cf\u3002\n$4$ .\u9898\u76ee\u6709\u5751\uff0c\u8fd9\u662f\u6709\u5411\u56fe\uff0c\u610f\u5473\u7740\u9898\u5e72\u4e2d(\u5373\u4ee5\u4e0a\u9ed1\u4f53)\u5176\u5b9e\u6709\u8bef\u3002  \n            \n                      \u2014\u2014\u2014\u2014\u53ea\u80fd\u4ece\u5934\u5f80\u540e\u6316\u54e6!  \n         \t\t\t\t\t\t            by kkksc03\n## \u89e3\u6cd51\uff1a\u9012\u63a8\u5173\u7cfb\u5f0f ( dp )\n\n\n------------\n\u611f\u8c22\u672c\u65b9\u6cd5\u7684\u6765\u6e90\u8005 \u5de8\u4f6c [Logic_](https://82805.blog.luogu.org/solution-p2196)\u3002\uff08\u867d\u7136\u672c\u9898\u7684\u5b98\u65b9\u505a\u6cd5\u662f\u5012\u63a8dp\uff0c\u4f46\u6211\u611f\u89c9\u6b63\u63a8\u601d\u8def\u66f4\u6e05\u6670\uff09\n\n\n------------\n$1$ .\u4f7f\u7528pre\u8bb0\u5f55\u5408\u7406\u65b9\u6848\u4e2d\u9009\u62e9\u7684\u70b9\u7684\u524d\u9a71\uff0c\u9012\u5f52\u8f93\u51fa\u3002(\u4e5f\u53ef\u4ee5\u7528while\u5faa\u73af\uff0c\u4e0b\u4e00\u79cd\u65b9\u6cd5\u4e2d\u7ed9\u51fa\uff09  \n$2$ .\u660e\u663e\u4e0d\u80fd\u7b80\u5355\u7684\u6c42\u51fa\u7b54\u6848\uff0c\u6240\u4ee5\u8bbe\u8ba1\u597d\u72b6\u6001\uff0c\u65b9\u4fbf\u8f6c\u79fb\uff0c\u4ee5 $f[i]$ \u8868\u793a\u4ece\u8d77\u70b9\u5230\u70b9$i$\u65f6\u6316\u5230\u5730\u96f7\u7684\u6700\u5927\u6570\uff0c\u5f53 $i$ \u4e0e $j$ \u76f8\u8fde\uff0c$f[j]$ (\u5373\u53e6\u4e00\u70b9\uff0c\u679a\u4e3e\u4e00\u4e0b\uff09\u53d6\u5230\u6700\u5927\u503c\u65f6\uff0c\u5c31\u5f97\u5230\u4e86\u9012\u63a8\u5f0f$f[i]=max(f[j])+mine[i]  ( map[j,i]=1)$\u3002\n$3$ .\u52a1\u5fc5\u8bb0\u4e0b\u8def\u5f84\u4e0a\u6700\u540e\u7684\u70b9\uff0c\u4ee5\u6b64\u9012\u5f52\u8f93\u51fa\u3002\n```cpp\nint n,ans,pos;\nint mine[N],f[N],_map[N][N],pre[N];\nvoid print(int x)//\u9012\u5f52\u8f93\u51fa\u3002\n{\n  if(pre[x]==0) {cout<<x;return;}//\u5982\u679c\u6ca1\u4e86\uff0c\u5c31\u8f93\u51fa\uff0c\u56de\u6eaf\u3002\n  print(pre[x]);//\u7ee7\u7eed\u6253\u5370\u524d\u9a71\u3002\n  cout<<' '<<x;\n}\nint main()\n{\n  std::ios::sync_with_stdio(false);\n  cin>>n;\n  for(int i=1;i<=n;i++)cin>>mine[i];\n  for(int i=1;i<=n-1;i++)\n    for(int j=i+1;j<=n;j++)//\u8bfb\u516501\u4e32\uff0c\u4e0d\u8981\u8bfb\u9519\u4f4d\u3002\n      cin>>_map[i][j];\n  for(int i=1;i<=n;i++)\n  {\n    for(int j=1;j<=n;j++)\n    {\n      if(_map[j][i])\n      {\n        f[i]=max(f[i],f[j]);//\u9012\u63a8\u5f0f\u7684\u5b9e\u73b0\uff0cf[i]=max9f[j]\u3002\n        if(f[i]==f[j])pre[i]=j;//\u8bb0\u4e0b\u524d\u9a71\u3002\n      }\n    }\n    f[i]+=mine[i];//\u7136\u540e\u522b\u5fd8\u4e86\u52a0\u4e0a\u5730\u96f7\u6570\n    \u3002\n    ans=max(ans,f[i]);//\u7b54\u6848\u53d6\u5927\u503c\n    if(ans==f[i])pos=i;//\u8bb0\u4e0b\u6700\u540e\u7684\u70b9\u3002\n  }\n  print(pos);\n  cout<<endl<<ans<<endl;//\u4e0d\u8981\u8f93\u51fa\u4e86f[n]\uff0c\u8fd9\u4e0d\u662f\u7b54\u6848\u3002\n  return 0;\n}\n```\n## \u89e3\u6cd52\uff1a\u56fe\u8bba ( \u5176\u5b9e\u5b9e\u8d28\u533a\u522b\u4e0d\u5927 )\n\n\n------------\n\u518d\u6765\u6a21\u4e00\u6ce2\u673a\u623f\u5e2e\u5fd9\u7ea0\u6b63\u601d\u8def\u7684\u5de8\u795e [kl\u819c\u6cd559\u6539](https://www.luogu.org/space/show?uid=55458) and [Asougi_Kazuma](https://www.luogu.org/space/show?uid=55501) \uff0c\u6ca1\u6709\u4ed6\u4eec\u7684\u5e2e\u52a9 \uff0c\u6211\u6781\u6709\u53ef\u80fd\u9677\u5165\u9898\u76ee\u5de8\u5751\uff08 \u89c1\u5206\u6790$4$ )\u65e0\u6cd5\u81ea\u62d4\u3002  \n\u4e00\u5f00\u59cb\u7684\u601d\u8def\u662f\u5efa\u53cc\u5411\u8fb9\uff0c\u7136\u540e\u679a\u4e3e\u70b9\u8dd1$floyd$\uff0c\u590d\u6742\u5ea6$ok$\uff0c\u4f46\u662f\u6709\u6b63\u73af\uff0c\u8dd1\u4e0d\u4e86\u6700\u957f\u8def\u3002\n\n\n------------\n$1$ .\u65e2\u7136\u662f\u6709\u5411\u56fe\uff0c\u53c8\u8981\u964d\u4f4e\u590d\u6742\u5ea6 ( \u867d\u7136$N$\u5f88\u5c0f ),\u6240\u4ee5\u6211\u4eec\u8fde\u4e2a\u5047\u8d77\u70b9\uff0c\u6307\u5411\u6bcf\u4e2a\u56fe\u4e2d\u7684\u70b9\uff0c\u8fb9\u6743\u4e3a\u70b9\u7684\u5730\u96f7\u6570\uff0c\u518d\u6765\u4e2a\u5047\u7ec8\u70b9\uff0c\u7531\u5404\u4e2a\u70b9\u6307\u5411\u5b83\uff0c\u65e0\u8fb9\u6743( \u5176\u5b9e\u4e3a$0$ ).  \n$2$ .\u7136\u540e\u5f53\u4e24\u70b9\u76f8\u8fde\u65f6\uff0c\u7531\u6765\u70b9\u6307\u5411\u53bb\u70b9 ( \u8f93\u5165\u6570\u636e\u5f88\u597d\uff0c\u4fdd\u8bc1\u5355\u5411 ) , \u8fb9\u6743\u4e3a\u53bb\u70b9\u7684\u5730\u96f7\u6570\u3002\n$3$ .\u5728\u8dd1spfa\u65f6\u5229\u7528\u4e00\u4e0b\u677e\u5f1b\u64cd\u4f5c\uff0c\u8bb0\u4e0b\u524d\u9a71 $pre$ \u6570\u7ec4.\n$4$ .\u4e0d\u61c2\u7684\u518d\u770b\u56fe\u548c\u4ee3\u7801\uff0c\u61c2\u4e86\u7684\u5c31\u5f00\u59cb\u6253\u5427\u3002  \n![](http://m.qpic.cn/psb?/80c76f18-4372-4a40-bc51-07add1310ee4/jYX1tikmtkjJoZJw*wvCSBETKnSVgXz2H29Mzwzioco!/b/dDMBAAAAAAAA&bo=wAMcAgAAAAADB*8!&rf=viewer_4)  \n```cpp\nstruct node\n{\n  int next,to,val;\n}e[M*2];\nbool vis[M];\nint n,sum,cnt,src=101,_end=102,pos=_end;\nint pre[M],mine[N],_map[N][N],head[M*2],dis[M],ans[M];//N=21,M=N^2,\u8fd9\u662f\u7406\u8bba\u4e0a\u7684\u5927\u5c0f\uff0c\u4f46\u5b9e\u9645\u7684\u4e0d\u9700\u8fd9\u4e48\u5927\u7684\u6570\u7ec4\uff0c\u4f46\u4e0d\u8981\u5f00\u6210N\u7684\u4e86\u3002\ninline void addedge(int u,int v,int w)\n{\n  e[++cnt].next=head[u];\n  e[cnt].to=v;\n  e[cnt].val=w;\n  head[u]=cnt;\n}\ninline void spfa(int src)//spfa\u6cd5\u3002\n{\n  queue<int>q;\n  memset(vis,false,sizeof(vis));\n  memset(dis,0,sizeof(dis));//\u6700\u957f\u8def\u8bb0\u5f97\u628adis\u521d\u59cb\u5316\u62100\n  dis[src]=0;\n  vis[src]=true;\n  q.push(src);\n  while(!q.empty())\n  {\n    int u=q.front();\n    q.pop();\n    vis[u]=false;\n    for(int i=head[u];i;i=e[i].next)\n    {\n      int v=e[i].to;\n      if(dis[v]<dis[u]+e[i].val)\n      {\n        pre[v]=u;//\u8bb0\u5f55\u524d\u9a71\uff0c\u5728\u677e\u5f1b\u64cd\u4f5c\u540e\uff0c\u4e0d\u8981\u5199\u5230\u524d\u9762\u4e86\u3002\n        dis[v]=dis[u]+e[i].val;\n        if(!vis[v])\n        {\n          vis[v]=true;\n          q.push(v);\n        }\n      }\n    }\n  }\n}\nint main()\n{\n  std::ios::sync_with_stdio(false);\n  cin>>n;\n  for(int i=1;i<=n;i++)\n  {\n      cin>>mine[i];\n      addedge(src,i,mine[i]);//\u8fde\u63a5\u5047\u8d77\u70b9\u548c\u6bcf\u4e2a\u70b9\u3002\n      addedge(i,_end,0);//\u70b9\u89e3\u6bcf\u4e2a\u70b9\u548c\u7ec8\u70b9\u3002\n  }\n  for(int i=1;i<=n-1;i++)\n    for(int j=i+1;j<=n;j++)\n    {\n      cin>>_map[i][j];\n      if(_map[i][j])addedge(i,j,mine[j]);//\u8fde\u63a5\u56fe\u4e2d\u7684\u70b9\uff0c\u4e0d\u8fde\u53cd\u5411\u8fb9\u3002\n    }\n  spfa(src);\n  while(pre[pos]!=src)\n  {\n    sum++;\n    ans[sum]=pre[pos];//\u7b54\u6848\u6570\u7ec4\u4e3a\u524d\u9a71\uff0c\u8fd8\u662f\u8981\u7b5b\u4e00\u904d\u3002\n    pos=pre[pos];\n  }\n  for(int i=sum;i>=1;i--)cout<<ans[i]<<' ';//\u56e0\u4e3a\u4ece\u7ec8\u70b9\u5f00\u59cb\u627e\uff0c\u627e\u51fa\u7684\u5e8f\u5217\u662f\u53cd\u7684\u3002\n  cout<<endl<<dis[_end]<<endl;//\u8f93\u51fa\u7b54\u6848\u3002\n  return 0;\n}\n```  \n## \u603b\u7ed3\n$1$ .\u5bf9\u4e8e\u8d8a\u7b80\u5355\u7c97\u66b4\u7684\u9898\uff0c\u60f3\u51fa\u7684\u65b9\u6cd5\u66f4\u591a\uff0c\u4f46\u662f\u8981\u901a\u8fc7\u73b0\u6709\u7684\u7b97\u6cd5\u6765\u5b9e\u73b0\uff0c\u4e0d\u8981\u50cf\u6211\u4e00\u6837spfa\u8dd1\u8d1f\u73af\u8fd9\u4e9b\u8822\u4e8b\u3002  \n$2$ .NOIP2000\u524d\u7684\u9898\u76ee\u90fd\u6709\u4e00\u5b9a\u7684\u95ee\u9898\uff0c\u8bed\u6587\u8981\u597d\u624d\u80fd\u987a\u5229AC\u3002  \n$3$ .\u5f53$N \\le 200$\u65f6(\u5176\u5b83OJ\u4e0a\u6709),\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u5c31\u6ca1\u65b9\u6cd5\u4e00\u4f18\u79c0\u4e86\uff0c\u5927\u5bb6\u8fd8\u53ef\u4ee5\u60f3\u4e00\u60f3\u66f4\u597d\u7684\u65b9\u6cd5\uff0c\u6765\u4e2a\u5176\u4ed6OJ\u7684\u94fe\u63a5\uff0c\u8fd9\u91cc\u7684\u6570\u636e\u5927\u4e00\u70b9 , [let's have a try!!!](http://ybt.ssoier.cn:8088/problem_show.php?pid=1262)",
        "postTime": 1531621054,
        "uid": 60089,
        "name": "Trinity",
        "ccfLevel": 0,
        "title": "P2196 \u6316\u5730\u96f7 \u9898\u89e3 by HydraNazis"
    },
    {
        "content": "dalao\u4eec\u4e3a\u4ec0\u4e48\u603b\u6709\u5404\u79cdnb\u7684\u601d\u8def,\u672c\u849f\u84bb\u53ea\u4f1a\u6700\u77ed\u8def\n\u8fd9\u4e2a\u9898\u4e4b\u524d\u5728  \u4fe1\u606f\u5b66\u5965\u8d5b\u4e00\u672c\u901a  \u4e0a\u505a\u8fc7\u51e0\u4e4e\u4e00\u6837\u7684\u9898\uff0c\u4f46\u662f\u7531\u4e8e\u6570\u636e\u592a\u6c34\u5bfc\u81f4\u6211\u5f53\u65f6\u8fc7\u4e86\uff0c\u8fdb\u800c\u5bfc\u81f4\u6211\u6628\u5929\uff084.28\uff09\u8003\u8bd5\u4e22\u4e8620\u5206\uff0c\u4eca\u5929\u5199\u4e00\u7bc7\u9898\u89e3\n\n\u8fd9\u4e2a\u6316\u5730\u96f7\u6211\u4eec\u9996\u5148\u8981\u60f3\u4e00\u4e2a\u95ee\u9898\uff08\u57fa\u672c\u4eba\u4eba\u80fd\u60f3\u5230\uff09\uff1a\n![](https://i.loli.net/2019/04/29/5cc64a1f1b85d.png)\n#### \u770b\u8fd9\u4e2a\u56fe\uff0c\u5982\u679c\u6211\u4eec\u4ece4\u51fa\u53d1\uff0c\u5047\u8bbe\u80fd\u6316\u523010\u9897\u96f7\uff0c\u90a3\u4e48\u6211\u4eec\u4ece1\u62163\u51fa\u53d1\u80af\u5b9a\u80fd\u6316\u5230\u66f4\u591a\u7684\u96f7\uff0c\u6bd5\u7adf\u4f60\u4e0d\u53ef\u80fd\u6316\u5230\u7684\u96f7\u662f\u8d1f\u6570\u4e2a\u6216\u8005\u4f1a\u4e22\u5931\u96f7\n\n## \u90a3\u4e48\u6211\u4eec\u5c31\u5e94\u8be5\u4ece\u6ca1\u6709\u5165\u5ea6\u7684\u70b9\u5f00\u59cb\uff0c\u8fd9\u8c8c\u4f3c\u8ddf\u6700\u77ed\u8def\u5dee\u4e0d\u591a  \n\n## \u601d\u8def\uff1a\n\n## 1.\u4ece\u5165\u5ea6\u4e3a0\u7684\u70b9\u5f00\u59cb,\u82e5\u80fd\u66f4\u65b0\u5b83\u7684\u51fa\u8fb9\u7684\u70b9\u5219\u66f4\u65b0,\u7136\u540e\u5220\u8fb9\u5e76\u8ba9\u5b83\u7684\u5165\u5ea6\u51cf\u4e00,\u82e5\u51cf\u52300\u5219\u5165\u961f.\n\n## 2.\u6807\u8bb0\u521a\u521a\u66f4\u65b0\u7684\u70b9\n\n## 3.\u68c0\u67e5\u662f\u5426\u5168\u90e8\u6807\u8bb0\n\n## if(\u6ca1\u6709\u5168\u90e8\u6807\u8bb0)\n\n## 4.\u4e0d\u65ad\u91cd\u590d;\n\n#### \u6ce8\u610f:\u5e76\u4e0d\u662f\u53ea\u6709\u66f4\u65b0\u8fc7\u7684\u70b9\u624d\u5220\u8fb9\u53ca\u51cf\u5165\u5ea6,\u4e0d\u7ba1\u6709\u65e0\u66f4\u65b0,\u4e0e\u5165\u5ea6\u4e3a0\u7684\u70b9\u76f8\u8fde\u7684\u8fb9\u90fd\u8981\u5220,\u5165\u5ea6\u90fd\u8981\u51cf(\u5982\u679c\u4e0d\u660e\u767d\u53ef\u4ee5\u62ff\u4e0a\u9762\u90a3\u4e2a\u56fe\u624b\u52a8\u6a21\u62df\u4e00\u4e0b\u5c31\u77e5\u9053\u4e3a\u4ec0\u4e48\u4e86)\n\n\u849f\u84bb\u4ee3\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<cstdlib>\n#include<stack>\n#include<queue>\n#include<iostream>\nusing namespace std;\nbool b[21][21];//\u4e34\u754c\u77e9\u9635\u5b58\u8fb9\nstack <int> ss;//\u6808\u8f93\u51fa\u8def\u5f84\nint a[21],du[21],s[21],pre[21];//a[]->\u6bcf\u4e2a\u5730\u7a96\u7684\u5730\u96f7\u6570,du[]\u6307\u5165\u5ea6,s[]\u6307\u5f53\u524d\u6316\u5230\u8fd9\u4e2a\u5730\u7a96\u6700\u4f18,pre[]\u7528\u6765\u8bb0\u5f55\u8def\u5f84\nint n,yyy;//n\u6307\u6709\u51e0\u4e2a\u5730\u7a96,yyy\u7528\u6765\u53bb\u6389\u6700\u540e\u7684\u7a7a\u683c\nqueue <int> q;//\u961f\u5217\u50a8\u5b58\u5165\u5ea6\u4e3a0\nvoid print(int x) {//\u6253\u5370\u8def\u5f84\n    if(x==0)//\u6ca1\u6709\u524d\u9a71\u5c31\u8fd4\u56de\n        return ;\n    yyy++;\n    ss.push(x);\n    print(pre[x]);//\u9012\u5f52\u627e\n}\nvoid dd(int x) {\n    for(int i=1; i<=n; i++) {//\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\n        if(b[x][i] == 1) {//\u6709\u8def\u7684\u8bdd\n            b[x][i] = 0;//\u5220\u8fb9\n            du[i]--;//\u51cf\u5ea6\n            if(du[i] == 0) {//\u5982\u679c\u51cf\u52300\u5c31\u5165\u961f\n                q.push(i);\n            }(\u8fd9\u51e0\u53e5\u4e0d\u80fd\u653e\u5230\u4e0b\u9762)\n            if(s[i] < s[x]+a[i]) {//\u5982\u679c\u80fd\u66f4\u65b0\u5c31\u66f4\u65b0\n                s[i] = s[x]+a[i];\n                pre[i] = x;//\u8bb0\u5f55\u8def\u5f84\n            }\n        }\n\n    }\n\n}\nvoid dg() {\n    for(int i=1; i<=n; i++) {//\u627e\u4e00\u5f00\u59cb\u5165\u5ea6\u4e3a0\u7684\u8fb9\n        if(du[i] == 0) {\n            q.push(i);\n        }\n    }\n    while(q.empty() == 0) {//\u8fd9\u4e2a\u53ef\u4ee5\u5199\u5230dd()\u91cc\u9762\n        int a=q.front();\n        q.pop();\n        dd(a);\n    }\n}\n\nint main() {\n//    freopen(\"lei.in\",\"r\",stdin);\n//    freopen(\"lei.out\",\"w\",stdout);\n    scanf(\"%d\",&n);\n    for(int i=1; i<=n; i++) {\n        scanf(\"%d\",&a[i]);\n        s[i]= a[i];//\u4e00\u5f00\u59cb\u6700\u4f18\u5c31\u662f\u53ea\u8d70\u4e00\u4e2a\n    }\n    for(int i=1; i<=n; i++) {\n        for(int j=i+1; j<=n; j++) {\n            scanf(\"%d\",&b[i][j]);\n            if(b[i][j] == 1)//\u8bb0\u5f55\u5ea6\u6570\n                du[j]++;\n        }\n    }\n\n    dg();\n    int zd=0,xx;\n    for(int i=1; i<=n; i++) {//\u627e\u5230\u6700\u5927\u503c,\u5e76\u627e\u5230\u6700\u5927\u503c\u7684\u5e8f\u53f7\n        if(s[i]>zd) {\n            zd=s[i];\n            xx=i;\n        }\n    }\n    print(xx);//\u6253\u5370\n    for(int i=1; i<yyy; i++) {//yyy\u7684\u7528\u9014\n        cout<<ss.top()<<' ';\n        ss.pop();\n    }\n    cout<<ss.top()<<endl;//\u6700\u540e\u6362\u884c\u683c\u5f0f\u9519\u4e86\u8c8c\u4f3c\u4f1aWA\n    cout<<zd;\n    return 0;\n}\n```\n\u4e00\u7bc7\u535a\u5ba2\u6c34\u5b8c\u5566\u5e0c\u671b\u5927\u5bb6\u559c\u6b22\n",
        "postTime": 1556499204,
        "uid": 192006,
        "name": "liuzitong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "~~\u6c34\u4e00\u6ce2\u9898\u89e3~~\n\n\u9898\u76ee\u601d\u8def\u5f88\u7b80\u5355\uff0c\u6570\u636e\u8303\u56f4\u4e5f\u5f88\u826f\u5fc3\uff0c\u7206\u641c\u5b8c\u5168\u53ef\u4ee5\u8fc7\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nconst int N=20+3;\nint f[N][N],a[N],n,ans;\nint p[N],op[N],cnt,tot;\n//op\u4ee3\u8868\u5f53\u524d\u7684\u8def\u5f84 cnt\u6765\u8bb0\u5f55op\u6570\u7ec4\u7684\u8303\u56f4\n//p\u4ee3\u8868\u6700\u4f18\u65b9\u6848\u7684\u8def\u5f84 tot\u6765\u8bb0\u5f55p\u6570\u7ec4\u7684\u8303\u56f4 \nbool v[N];\nvoid dfs(int x,int sum)\n{\n\tfor(int i=x+1;i<=n;i++)//\u56e0\u4e3a\u53ea\u80fd\u4ece\u4e0a\u5f80\u4e0b\u6316\uff0c\u6240\u4ee5\u7531x+1\u5f00\u59cb \n\t{\n\t\tif(f[x][i])\n\t\t{\n\t\t\top[++cnt]=i;\n\t\t\tdfs(i,sum+a[i]);\n\t\t\tcnt--;\n\t\t}\n\t}\n\tif(sum>ans)\n\t{\n\t\tans=sum;\n\t\tfor(int i=1;i<=cnt;i++)\n\t\t{\n\t\t\tp[i]=op[i];\n\t\t}\n\t\ttot=cnt;\n\t}\n\treturn ;\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tscanf(\"%d\",&f[i][j]);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\top[++cnt]=i;\n\t\tdfs(i,a[i]);\n\t\tcnt--;\n\t}\n\tfor(int i=1;i<=tot;i++)\n\t{\n\t\tprintf(\"%d \",p[i]);\n\t}\n\tprintf(\"\\n%d\",ans);\n\treturn 0;\n}\n```\n\n\u4f46\u672c\u9898\u8fd8\u53ef\u4ee5\u7528DP\u505a\u6389\u3002\n\n#### \u672c\u849f\u84bb\u7684DP\u65b9\u7a0b\uff1a$p[i]=max(p[i],p[j]+a[j])$\n\n~~\u6211\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u8981\u7528p\u800c\u4e0d\u7528f~~\n\n\u4f46\u66f4\u65b0\u5230\u6700\u540e\u6211\u4eec\u6700\u5f00\u59cb\u6316\u7684\u70b9\u7684\u5730\u96f7\u6570\u8fd8\u6ca1\u52a0\u5230\uff0c\u6240\u4ee5\u6700\u540e\u518d\u52a0\u4e0a\u5c31\u597d\u4e86\u3002\n\n\uff08\u6211\u7684\u8f93\u51fa\u6709\u70b9\u8822\uff09\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int N=20+3;\nint f[N][N],a[N],n,p[N],ans,op,cnt[N],m;\nvoid PRINT()//\u8822\u8822\u5730\u8f93\u51fa \n{\n\tcnt[++m]=op;\n\tp[op]-=a[op];\n\tfor(int i=op+1;i<=n;i++)\n\t{\n\t\tif(p[op]==p[i])\n\t\t{\n\t\t\tcnt[++m]=i;\n\t\t\tp[op]-=a[i];\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++) printf(\"%d \",cnt[i]);\n\tcout<<endl;\n\treturn ;\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&a[i]);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tscanf(\"%d\",&f[i][j]);\n\t\t}\n\t}\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tif(f[i][j])//\u6709\u8def\u5f84\u5c31\u8f6c\u79fb \n\t\t\t{\n\t\t\t\tp[i]=max(p[i],p[j]+a[j]);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tp[i]+=a[i];//\u56e0\u4e3a\u6b64\u523b\u6211\u4eec\u6700\u5f00\u59cb\u7684\u70b9\u6ca1\u6709\u6316 \n\t\tif(p[i]>ans)\n\t\t{\n\t\t\top=i;//\u8bb0\u5f55\u6700\u4f18\u8def\u5f84\u7684\u8d77\u59cb\u70b9 \n\t\t\tans=p[i];\n\t\t}\n\t}\n\tPRINT();\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1569591715,
        "uid": 180835,
        "name": "yaojinzhong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "#**\u5178\u578b\u7684\u6811\u5f62dp**\n\n//\u4ece\u6bcf\u4e00\u4e2a\u70b9\u904d\u5386\u4e00\u904d\uff0c\u627e\u51fa\u6700\u5927\u503c\uff0c\u66f4\u65b0\u7b54\u6848\u5e76\u66f4\u65b0\u8def\u5f84\uff0c\u6700\u540e\u8f93\u51fa\u5373\u53ef\n\n//dp[u]\u8868\u793a\u4ee5u\u4e3a\u6839\u7684\u5b50\u6811\u80fd\u5f97\u5230\u7684\u6700\u5927\u503c\uff0c\u56e0\u4e3a\u662f\u6709\u5411\u56fe\uff0c\u53ea\u80fd\u53d6\u4e0eu\u76f8\u90bb\u7684\u8282\u70b9\u4e2d\u7684\u6700\u5927\u503c\uff0c\u4e0d\u80fd\u7d2f\u52a0\n\n//\u6570\u636e\u8303\u56f4\u6bd4\u8f83\u5c0f\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f(n^2)\uff0c\u6bcf\u4e2a\u70b9(n)\u904d\u5386\u4e00\u904d\u56fe(n)\uff0c2000\u5e94\u8be5\u6ca1\u95ee\u9898\uff0c\u56e0\u4e3a\u53ea\u5efa\u5355\u5411\u8fb9\uff0c\u8bdd\u4e0d\u591a\u8bf4\uff0c\u4ee3\u7801\u5982\u4e0b\n\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\nstruct node\n{\n    int to,next;\n}edge[500];\nint head[500],cnt=0;\nvoid add(int u,int v)\n{\n    edge[++cnt].to=v;edge[cnt].next=head[u];head[u]=cnt;//\u90bb\u63a5\u8868\u5efa\u56fe\uff0c\u8d3c\u597d\u7528 \n}\nint dp[30],pre[30],s[30];\nint n,w[30];\nint dfs(int u,int fa)\n{\n    if(dp[u]) return dp[u];//\u5982\u679c\u5f53\u524d\u8fd9\u4e2a\u70b9\u627e\u5230\u4e86\u5c31\u8fd4\u56de\u4ed6\u539f\u6765\u7684\u503c\uff0c\u51cf\u5c11\u91cd\u590d\u641c\u7d22 \n    for(int i=head[u];i!=0;i=edge[i].next)\n    {\n        int v=edge[i].to;\n        if(v==fa) continue;//\u65e0\u5411\u56fe\u4e13\u7528\uff0c\u5f53\u7136\u7528\u5728\u8fd9\u91cc\u4e5f\u6ca1\u4ec0\u4e48\u9519\uff0c\u4ee5\u9632\u4e07\u4e00 \n        dp[v]=dfs(v,u);\n        if(dp[u]<dp[v])//\u66f4\u65b0\u4ee5u\u4e3a\u6839\u8282\u70b9\u7684\u5b50\u6811\u7684\u6700\u5927\u503c \n        {\n            dp[u]=dp[v];\n            pre[u]=v;//\u8bb0\u5f55\u8def\u5f84 \n        }\n    }\n    return dp[u]+w[u];//\u522b\u5fd8\u8bb0\u52a0\u4e0a\u4ed6\u81ea\u5df1\u672c\u8eab\u7684\u503c \n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;++i) scanf(\"%d\",&w[i]);\n    for(int i=1;i<n;i++)\n    {\n        for(int j=i+1;j<=n;j++)\n        {    int x;\n            scanf(\"%d\",&x);\n            if(x>0) add(i,j);\n        }\n    }\n    int ans=0,k;\n    for(int i=1;i<=n;i++)\n    {\n        memset(dp,0,sizeof(dp));//\u8bb0\u5f97\u6bcf\u6b21\u90fd\u8981\u6e05\u96f6\uff0c\u4e0d\u7136\u8981GG \n        int tmp=dfs(i,0);\n        if(ans<tmp)\n        {\n            ans=tmp;\n            swap(pre,s);//\u8fd9\u91cc\u66f4\u65b0\u8def\u5f84\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570swap\u76f4\u63a5\u4ea4\u6362\uff0c\u4e0d\u9700\u8981\u5176\u4ed6\u7a7a\u95f4\u8f85\u52a9 \n            k=i;//k\u8868\u793a\u4ece\u90a3\u4e2a\u70b9\u51fa\u53d1\u627e\u5230\u7684\u6700\u5927\u503c \n        }\n    }\n    while(k!=0)\n    {\n        printf(\"%d \",k);\n        k=s[k];\n    }\n    printf(\"\\n%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1505263084,
        "uid": 36369,
        "name": "Cagulo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u770b\u90a3\u4e48\u591a\u5927\u4f6c\u4e48\u90a3\u4e48\u7b80\u6d01\u7684\u4ee3\u7801\uff0c\u849f\u84bb\u6211\u6765\u53d1\u4e00\u4e2a\u7b80\u5355\u6613\u61c2\u7684 ** \u53ccDFS **\u5427\n# \u672c\u9898\u7684\u4e3b\u8981\u601d\u8def\uff1a\n### \u2460\u6c42\u6316\u5730\u96f7\u7684\u6700\u591a\u4e2a\u6570\u3002\n### \u2461\u8f93\u51fa\u6700\u591a\u5730\u96f7\u7684\u6316\u6398\u65b9\u6cd5\u3002\n## \u660e\u786e\u601d\u8def\u540e\u4ee3\u7801\u5b9e\u73b0\n\u6570\u636e\u8303\u56f4 **n<=20** \u6240\u4ee5\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u8dd1n\u904dDFS \u6c42\u51fa\u5176\u4e2d\u7684\u53ef\u4ee5\u4e00\u6b21\u6027\u6316\u7684\u6700\u591a\u5730\u96f7\u6570\uff0c\n\u7136\u540e\u518d\u8dd1\u4e00\u904d \u8ba1\u8defDFS \u628a\u4e00\u4e2a\u7b49\u4e8e\u8fd9\u4e2a\u6700\u591a\u5730\u96f7\u6570\u6316\u6cd5\u8bb0\u5f55\u4e0b\u6765\u8f93\u51fa\uff0c\u672c\u9898\u5c31\u7ed3\u675f\u4e86\uff0c\u7b80\u5355\u6613\u61c2\u7684\u53ccDFS\u3002\n### \u4e0b\u9762\u662fAC\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int INF=2147483647;\nint n,a[21];\nint f[21][21],step=0;// f[i][j]\u7528\u6765\u5224\u65adi\u548cj\u662f\u5426\u8054\u901a\u3002 step\u7528\u6765\u8bb0\u5f55\u6700\u591a\u7684\u5730\u96f7\u6570\nvoid read(int &x)\n{\n\tx=0;int p=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9')\n\t{\n\t\tif(c=='-') p=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9')\n\t{\n\t\tx=x*10+c-'0';\n\t\tc=getchar();\n\t}\n\tx*=p;\n}// \uff08\u8bfb\u5165\u4f18\u5316\u81ea\u52a8\u5ffd\u7565\uff09\nvoid dfs(int x,int y)// \u6c42\u6700\u591a\u5730\u96f7\u6570\u7684DFS x\u6765\u8bb0\u5f55\u5f53\u524d\u5230\u8fbe\u7684\u70b9\uff0cy\u6765\u8bb0\u5f55\u5730\u96f7\u6570\u76ee\u3002\n{\n\tbool p=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(f[x][i])\n\t\t{\n\t\t\tp=1;\n\t\t\tbreak;\n\t\t}\n\t}// \u5224\u65adn\u4e2a\u5730\u7a96\u91cc\u662f\u5426\u6709\u5730\u7a96\u4e0e\u5f53\u524d\u5730\u7a96x\u8054\u901a\u3002\n\tif(p==0)\n\t{\n\t\tstep=max(y,step);\n\t\treturn ;\n\t}// \u6ca1\u6709\u5730\u7a96\u8054\u901a\uff0c\u5df2\u7ecf\u6316\u5230\u5934\u4e86\uff0c\u5224\u65ad\u5df2\u6316\u5230\u7684\u5730\u96f7\u662f\u5426\u4e3a\u6700\u5927\u5730\u96f7\u6570\u3002\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(f[x][i]) dfs(i,y+a[i]);// \u5982\u679c\u8054\u901a\u5c31\u6316\u4e0b\u53bb\u3002\n\t}\n}\nint e1[21];// e1\u6570\u7ec4\u7528\u6765\u8bb0\u5f55\u6316\u6398\u987a\u5e8f\u3002\nbool p=0;\nint dfs1(int x,int y,int z)// \u8bb0\u5f55\u6316\u6398\u987a\u5e8f\u7684DFS x\uff0cy\u6240\u4ee3\u8868\u7684\u610f\u4e49\u540c\u4e0a\uff0cz\u6765\u8bb0\u5f55\u5df2\u7ecf\u6316\u4e86\u51e0\u4e2a\u5730\u7a96\u3002\n{\n\tif(y==step)\n\t{\n\t\tp=1;\n\t\tfor(int i=0;i<z;i++)\n\t\t cout<<e1[i]<<\" \";\n\t\treturn 0;\n\t}// \u5982\u679c\u4e3a\u6700\u5927\u5730\u96f7\u6570\uff0c\u8f93\u51fa\u6240\u8bb0\u5f55\u7684\u987a\u5e8f\u7136\u540e\u76f4\u63a5\u8df3\u51fa\u5c31\u597d\u4e86\uff01\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(f[x][i])\n\t\t{\n\t\t\te1[z]=i;\n\t\t\tdfs1(i,y+a[i],z+1);\n\t\t}\n\t}\n}\nint main()\n{\n\tread(n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tread(a[i]);\n\t}\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tint y;\n\t\t\tread(y);\n\t\t\tif(y) f[i][j]=1;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tdfs(i,a[i]);\t\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\te1[0]=i;\n\t\tdfs1(i,a[i],1);\n\t\tif(p) break;// \u5df2\u7ecf\u627e\u5230\u6700\u4f18\u987a\u5e8f\uff0c\u76f4\u63a5Break\u6389\uff01\n\t}\n\tcout<<endl<<step;// \u6362\u884c\u8f93\u51fa\u6700\u591a\u5730\u96f7\u6570\uff01\n\treturn 0;\n}// AC\uff01\uff01\uff01\n```",
        "postTime": 1544253779,
        "uid": 113368,
        "name": "\u9ad8\u6728\u6728",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u697c\u4e0b\u4e5f\u8bf4\u4e86\uff0c\u8fd9\u4e00\u9898\u663e\u7136\u6ee1\u8db3dp\u7684\u6761\u4ef6\uff0c\u53ef\u7528\u52a8\u5f52\u6c42\u89e3\uff0c\u8fd9\u91cc\u5c31\u518d\u8bb2\u4e00\u4e0b\u601d\u8def\u5427\u3002\n\n\u4e0d\u96be\u770b\u51fa\uff0c\u7f16\u53f7\u4e3an\u7684\u5730\u7a96\u662f\u6ca1\u6709\u8def\u5f84\u901a\u5f80\u5176\u4ed6\u5730\u7a96\u7684\uff0c\u56e0\u6b64\u8fb9\u754c\u4e3af[n]=c[n];\n\n\u6240\u4ee5\u8fd9\u662f\u4e00\u9053\u9006\u63a8\u7684\u9898\u76eeo(\u2229\\_\u2229)o\uff0c\u4e0d\u96be\u5f97\u51fa\u65b9\u7a0b\u5f0f\uff1a\u8bbef[i]\u4e3a\u4ee5i\u4e3a\u8d77\u70b9\u80fd\u6316\u51fa\u7684\u6700\u591a\u5730\u96f7\u6570\u3002\u90a3\u4e48\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5f0f\u5c31\u662f\n\n```cpp\n    f[i]=max(f[j]+c[i]);\n```\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint l,k,f[21],n,c[21],b[21][21],nexts[21];  \nvoid maxx(int f,int j){\n    if(f>l) {\n        l=f; k=j;        //\u82e5\u6709\u72b6\u6001\u6bd4\u5f53\u524d\u66f4\u4f18\uff0c\u5219\u66f4\u65b0 \n    }\n}\nint main(){\n    cin>>n;\n    for(int i=1;i<=n;i++) cin>>c[i];            //\u8bfb\u5165c\u6570\u7ec4 \n    for(int i=1;i<=n;i++)\n      for(int j=i+1;j<=n;j++) cin>>b[i][j];        //\u8bfb\u5165b\u6570\u7ec4 \n    f[n]=c[n];        //\u8fb9\u754c \n    for(int i=n-1;i>=1;i--){    //\u9006\u63a8 \n        l=0; k=0;\n        int j;\n        for(j=i+1;j<=n;j++) \n          if(b[i][j]) maxx(f[j],j);            //i\uff0cj\u6709\u8054\u901a\u65f6\u5224\u65ad\u53ef\u5426\u66f4\u65b0 \n        nexts[i]=k; f[i]=c[i]+l;         //\u627e\u5230\u8d77\u70b9i\u7684\u540e\u7eed\u5e76\u5c06i\u66f4\u65b0 \n    }\n    for(int i=1;i<=n;i++) maxx(f[i],i);        //\u627e\u5230\u53ef\u6316\u51fa\u6700\u591a\u7684\u4e00\u6761\u8def\u5f84 \n    cout<<k;\n    k=nexts[k];\n    while(nexts[k]!=k){\n        cout<<\" \"<<k;\n        k=nexts[k];\n    }\n    cout<<endl<<l;\n    /*\n        \u8f93\u51fa\u88ab\u548c\u8c10\u4e86\uff0c\u52a8\u52a8\u8111\u5427 \n    */\n}\n```",
        "postTime": 1502257985,
        "uid": 31518,
        "name": "zhr1502",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u4e00\u9898DP\u9898\uff0c\u5355\u5411\u641c\u7d22\uff0c\u7b26\u5408\u52a8\u5f52\u6761\u4ef6\u3002\u53ea\u4e0d\u8fc7\u6211\u4e00\u5f00\u59cb\u4e00\u76f4\u4ee5\u4e3a\u662f\u53cc\u5411\u7684\u2026\u2026\u56e0\u4e3a\u662f\u5355\u5411\u7684\uff0c\u6240\u4ee5\u4ece\u7b2cn-1\u4e2a\u5730\u96f7\u5751\u5f00\u59cb\u5224\u65ad\uff0c\u7528\u81ea\u5df1\u7684\u5730\u96f7\u6570\u52a0\u4e0a\u672c\u5751\u80fd\u901a\u5230\u7684\u6240\u6709\u5751\u4e2d\u5730\u96f7\u6570\u6700\u591a\u7684\u3002\u8fd9\u6837\u4e00\u76f4\u5012\u63a8\u56de\u53bb\uff0c\u5c31\u80fdAC\u5566\uff01\n\n\u4e0a\u83dc\uff01\uff08\u8bef\uff09\u4e0a\u4ee3\u7801\uff01\n\n```cpp\n#include <iostream>\n#include <cstdlib>\nusing namespace std;\nint n,a[21]={0},b[21][21]={0},pa,pb,c[21]={0},k=0,s=0,dd,d[21]={0},w[21]={0};\nint main()\n{\n    cin>>n;\n    for(int i=1;i<=n;i++)cin>>a[i];\n    for(int i=1;i<=n;i++)for(int j=i+1;j<=n;j++)cin>>b[i][j];\n    w[n]=-1;\n    for(int i=n-1;i>=1;i--)   \u5012\u63a8\n    {\n        dd=0,k=0;\n        for(int j=1;j<=n;j++)\n        {\n            if(b[i][j]==1&&a[j]>k)k=a[j],w[i]=j;  \u627e\u6700\u591a\uff0c\u5e76\u8bb0\u5f55\u8def\u7ebf\n        }\n        if(k==0)w[i]=-1;  \u5982\u679c\u6ca1\u6709\u901a\u7684\u5730\u96f7\u5751\uff0c\u5c31\u8d4b\u503c-1\u3002\n        else a[i]+=k;\n    }\n    dd=0;\n    for(int i=1;i<=n;i++)  \u627e\u6700\u591a\u7684\u90a3\u4e2a\u5730\u96f7\u5751\uff0c\u5c31\u5b83\u662f\u8d77\u70b9\u4e86\uff01\n    {\n        if(a[i]>a[dd])dd=i;\n        if(a[i]>s)s=a[i];\n    }\n    cout<<dd;\n    while(w[dd]!=-1){cout<<' '<<w[dd];dd=w[dd];}  \u8f93\u51fa\u5230\u6700\u540e\u4e00\u4e2a\u5730\u96f7\u5751\n    cout<<endl<<s;  \u8f93\u51fa\u5730\u96f7\n    return 0;\n}\n```",
        "postTime": 1472390862,
        "uid": 22598,
        "name": "\u6b27chenleyu\u7684\u4e2d\u53f7",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u6211\u53d1\u73b0\u6ca1\u4eba\u5199Floyd\u3002\u3002\u3002\n\n\u5176\u5b9e\u8fd9\u9053\u9898\u662f\u53ef\u4ee5Floyd\u8dd1\u6700\u957f\u8def\u7684\uff0c\u4f46\u662f\u6ce8\u610f\u4e00\u4e2a\u95ee\u9898\u5c31\u662fdis\u6570\u7ec4\u8981\u521d\u59cb\u5316\u8d1f\u65e0\u7a77\uff0c\u4e24\u4e2a\u70b9\u4e4b\u95f4\u4e0d\u80fd\u76f8\u4e92\u5230\u8fbe\u4e00\u5b9a\u8981\u521d\u59cb\u5316dis\u6570\u7ec4\u4e3a\u8d1f\u65e0\u7a77\uff01\uff01\uff01\u6572\u9ed1\u677f\n\n\u5f53\u4e00\u6761\u8def\u4e0d\u80fd\u8d70\u7684\u65f6\u5019\uff0c\u8981\u628a\u8fd9\u6761\u8def\u8d4b\u6210\u8d1f\u65e0\u7a77\uff0c\u4e0d\u80fd\u8d4b\u62100\uff0c\u56e0\u4e3a\u5982\u679c\u8fd9\u6761\u8def\u8d70\u5b8c\u540e\u9762\u7684\u8def\u6743\u503c\u548c\u66f4\u5927\u7684\u8bdd\u8fd8\u662f\u4f1a\u9009\u4e0a\u8fd9\u6761\u8def\u3002~~\uff08Orz Fusu\uff09~~\n\n![FSAKIOI](https://cdn.luogu.com.cn/upload/image_hosting/vsxht6tk.png)\n\n\u7136\u540e\u5c31\u662f\u4e00\u4e2a\u5f88\u7b80\u5355\u7684Floyd\n\n\n```cpp\n\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<string>\n#include<cstring>\n#include<queue>\n#include<cstdlib>\n\nusing namespace std;\n\ntypedef long long ll;\n\ninline int read(){\n    int ans=0;\n    char last=' ',ch=getchar();\n    while(ch<'0'||ch>'9') last=ch,ch=getchar();\n    while(ch>='0'&&ch<='9') ans=ans*10+ch-'0',ch=getchar();\n    if(last=='-') ans=-ans;\n    return  ans;\n}\n\nint n;\nint a[25];\nint f[25][25];\nint path[25][25];\nint s=0,t=0,maxx=-63;\n\nint main()\n{\n    n=read();\n    memset(f,-63,sizeof(f));\n    for(int i=1;i<=n;i++) a[i]=read(),f[i][i]=a[i];\n\n    for(int i=1;i<n;i++)\n       for(int j=i+1;j<=n;j++){\n       \tint x=read();\n       \tif(x) f[i][j]=a[i]+a[j];\n\t   }\n       \n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++)\n        path[i][j]=j;\n\n    for(int k=1;k<=n;k++) \n       for(int i=1;i<=n;i++)\n          for(int j=1;j<=n;j++){\n            if((f[i][j]<f[i][k]+f[k][j]-a[k])){\n                f[i][j]=f[i][k]+f[k][j]-a[k];\n                path[i][j]=path[i][k];\n              }\n            if(f[i][j]>maxx){\n                    s=i;t=j;\n                    maxx=f[i][j];\n                  }\n          }    \n\n    while(s!=t){\n        printf(\"%d \",s);\n        s=path[s][t];\n    }  \n    printf(\"%d\\n\",t);\n    printf(\"%d\\n\",maxx);\n    return 0;\n}\n```\n\n",
        "postTime": 1573374601,
        "uid": 177074,
        "name": "\u6654\u5b50",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u9898\u89e3\u91cc\u4e00\u7fa4\u5927\u4f6c\u7528\u56fe\u8bba dp \u8bb0\u5fc6\u5316 ~~\u6211\u90fd\u4e0d\u4f1a~~\n\n\u672c\u849f\u84bb\u770b\u4e86\u773c\u6570\u636e\u4e8e\u662f\u51b3\u5b9a\u6c34\u4e00\u53d1\u7206\u641c\n\n\u7ed3\u679c\u771f\u7684\u8fc7\u4e862333\n\n\u6211\u4eec\u7528way\u6570\u7ec4\u8868\u793a\u4e24\u4e2a\u5730\u7a96\u4e2d\u662f\u5426\u5b58\u5728\u8054\u901a\u8def\u5f84\n\n\u7528trace\u6570\u7ec4\u8868\u793a\u8be5\u70b9\u662f\u5426\u904d\u5386\u8fc7\n\n```cpp\nbool way[N][N],trace[N];\n```\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u91cc\u7684\u8def\u5f84\u662f\u5355\u5411\u8054\u901a\u7684\n\n\uff08\u611f\u8c22\u9898\u89e3\u91cc@\u516c\u4e3b\u6bbf\u4e0bMIKU\u7684\u63d0\u9192 \uff09\n\n\u6bcf\u5230\u4e00\u4e2a\u5730\u7a96 \u5224\u65ad\u662f\u5426\u540e\u9762\u662f\u5426\u8fd8\u6709\u8def\n\n```cpp\nint check(int x)\n{\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(way[x][i]&&!trace[i])\n\t\treturn true;\n\t}\n\treturn false;\n}\n```\n\u5927\u6982\u7684\u601d\u60f3\u5c31\u662f\u8fd9\u6837\u4e86\n\n# \u796d\u4e0a\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define inf INT_MAX\n#define N 25//\u4e2a\u4eba\u4e60\u60ef\nusing namespace std;\nint number[N],ans=-inf,ansf[N],temp[N],n;\nbool way[N][N],trace[N];\nint check(int x)//\u5224\u65ad\u51fd\u6570\n{\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(way[x][i]&&!trace[i])//\u5982\u679c\u4e24\u4e2a\u5730\u7a96\u8054\u901a\u4e14\u6ca1\u6709\u88ab\u904d\u5386\u8fc7\n\t\treturn true;\n\t}\n\treturn false;\n}\nvoid DFS(int now,int step,int num)\n//now\u4e3a\u73b0\u5728\u5904\u5728\u7684\u5730\u7a96\u7f16\u7801\uff0cstep\u4e3a\u7b2c\u51e0\u5c42\uff0cnum\u4e3a\u5f53\u524d\u6316\u5230\u7684\u5730\u96f7\u6570\n{\n\tif(!check(now))//\u5982\u679c\u4e0d\u53ef\u4ee5\u518d\u8d70\u4e86\n\t{\n\t\tif(ans<num)\n\t\t{\n\t\t\tans=num;\n\t\t\tfor(int i=1;i<=n;++i)\n\t\t\t{\n\t\t\t\tansf[i]=temp[i];\n\t\t\t}\n\t\t}//\u66f4\u65b0\u7b54\u6848\n\t\treturn;\n\t}\n\telse//\u5426\u5219\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(way[now][i]&&!trace[i])\n\t\t{\n\t\t\ttrace[i]=true;\n\t\t\ttemp[step]=i;\n\t\t\tDFS(i,step+1,num+number[i]);//\u5feb\u4e50\u5730\u7ee7\u7eed\u7206\u641c\n\t\t\ttrace[i]=false;\n\t\t}\n\t}\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i)\n\t scanf(\"%d\",&number[i]);\n\tfor(int i=1;i<=n;++i)\n\t for(int j=i+1;j<=n;++j)\n\t  scanf(\"%d\",&way[i][j]);\n\tfor(int i=1;i<=n;++i) //\u5c1d\u8bd5\u4ece\u6bcf\u4e00\u4e2a\u5730\u7a96\u5f00\u59cb\u904d\u5386\n\t{\n\t\tmemset(temp,0,sizeof(temp));\n\t\ttrace[i]=true; \n\t\ttemp[1]=i;\n\t\tmemset(trace,false,sizeof(trace));\n\t\tDFS(i,2,number[i]);\n\t} \n\tfor(int i=1;i<=n;++i)\n\t printf(\"%d \",ansf[i]);\n\tprintf(\"\\n%d\",ans);\n    return ~~(0-0);//\u5356\u840c\n}\n```\n",
        "postTime": 1554799211,
        "uid": 157603,
        "name": "\u5343\u53cd\u7530",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "# \u56fe\u7684\u5b58\u50a8\n\u8fd9\u9053\u9898\u76ee\u7684DP\u601d\u8def\u8fd8\u662f\u5f88\u597d\u60f3\u7684\uff0c\u524d\u9762\u51e0\u4f4d\u5927\u4f6c~~\uff08%%%\uff09~~\u5728\u81ea\u5df1\u7684\u9898\u89e3\u4e2d\u8bb2\u7684\u5f88\u8be6\u7ec6\u4e86\uff0c\u6240\u4ee5\uff0c\u6211\u60f3\u8c08\u4e00\u8c08\u8fd9\u4e2a\u56fe\u7684\u5b58\u50a8\u65b9\u5f0f\u3002\n\n\n------------\n## \u90bb\u63a5\u77e9\u9635\n\u5f88\u5e38\u89c1\u7684\u56fe\u7684\u5b58\u50a8\u65b9\u5f0f\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a**O(N^2)**\uff0c\u56e0\u4e3a\u53ef\u4ee5\u76f4\u63a5\u67e5\u627e\uff0c\u6240\u4ee5\u67e5\u627e\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a**O(1)**\u3002\n\n\u4e3b\u8981\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\nfor (int i = 1; i <= n; i++)\n{\n\tfor (int j = 1; j <= n; j++)\n\t\tif (g[j][i] && dp[i] < dp[j])\n        dp[i] = dp[j], pre[i] = j;\n\tdp[i] += num[i];\n\tif (dp[i] > maxn) maxn = dp[i], k = i;\n}  \n```\n\u4e0d\u96be\u770b\u51fa\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a**O(N^2)**\u3002\n\n\n------------\n## \u90bb\u63a5\u8868\n\u90bb\u63a5\u77e9\u9635\u7684\u7a7a\u95f4\u4e4b\u6240\u4ee5\u5927\uff0c\u662f\u56e0\u4e3a\u6709\u4e9b\u70b9\u4e4b\u95f4\u6ca1\u6709\u8fb9\uff0c\u51fa\u73b0\u6d6a\u8d39\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u90bb\u63a5\u8868\u5b58\u3002**\u6ce8\u610f**\uff1a\u8fd9\u91cc\u6211\u7528\u7684\u662fvector\uff0c\u6ca1\u7528\u94fe\u8868~~\uff08\u56e0\u4e3a\u6211\u61d2\uff09~~\u3002\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a**O(N*2+1)**\uff0c\u67e5\u627e\u5374\u8981**O(N)**\u3002\n\n\u4e3b\u8981\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\nfor (int i = 1; i <= n; i++)\n{\n\tfor (int j = 1; j <= n; j++)\n\t\tif (gfind(j,i) && dp[i] < dp[j])\n        //gfind\u662f\u6211\u81ea\u5df1\u5199\u7684\u67e5\u627e\u51fd\u6570\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(N);\n        \tdp[i] = dp[j], pre[i] = j;\n\tdp[i] += num[i];\n\tif (dp[i] > maxn) maxn = dp[i], k = i;\n}\n```\n\u65f6\u95f4\u590d\u6742\u5ea6\u663e\u7136\u4e3a**O(N^3)**\uff0c\u4f46\u7531\u4e8e**N<=20**\uff0c\u6240\u4ee5\u8fd9\u4e2a\u590d\u6742\u5ea6\u8fd8\u53ef\u4ee5\u63a5\u53d7\u3002\n\n\n------------\n\u6700\u540e\uff0c\u9644\u4e0a\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h> \n#define inf 0x3f3f3f3f\nusing namespace std;\ninline int read()//\u8bfb\u5165\u4f18\u5316\n{\n\tint x = 0, f = 1;\n\tchar ch = getchar();\n\twhile (ch < '0' || '9' < ch) { if (ch == '-') f = -1; ch = getchar(); }\n\twhile ('0' <= ch && ch <= '9') { x = x * 10 + ch - '0'; ch = getchar(); }\n\treturn x * f;\n}\nint n, k;\nint maxn = -inf;\nint num[30];\nint pre[30] = { 0 };\nint dp[30];\nvector<int>g[30];\nvoid put_out(int x)//\u8f93\u51fa\u8def\u5f84\n{\n\tstack<int>s;\n\tfor (int i = x; i; i = pre[i])//\u56e0\u4e3a\u6839\u636e\u524d\u9a71\u627e\u5230\u7684\u8def\u5f84\u662f\u5012\u5e8f\u7684\uff0c\u6240\u4ee5\u6211\u628a\u5b83\u4eec\u653e\u5230\u4e00\u4e2a\u6808\u91cc\n\t\ts.push(i);\n\twhile (!s.empty())//\u5c06\u6808\u4ece\u9876\u5230\u5e95\u8f93\u51fa\n\t{\n\t\tprintf(\"%d \", s.top());\n\t\ts.pop();\n\t}\n\tprintf(\"\\n\");\n\treturn;\n}\nbool gfind(int a, int b)\n{\n\tfor (int i = 0; i < g[a].size(); i++)\n\t\tif (g[a][i] == b) return 1;\n\treturn 0;\n}\nint main()\n{\n\tn = read();\n\tfor (int i = 1; i <= n; i++)\n\t\tnum[i] = read();\n\tfor (int i=1;i<=n;i++)\n\t\tfor (int j = i + 1; j <= n; j++)\n\t\t{\n\t\t\tint x;\n\t\t\tx = read();\n\t\t\tif (x) g[i].push_back(j);\n\t\t}\n\tfor (int i = 1; i <= n; i++)//DP\n\t{\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tif (gfind(j,i) && dp[i] < dp[j]) dp[i] = dp[j], pre[i] = j;//\u8bb0\u5f55\u524d\u9a71\n\t\tdp[i] += num[i];\n\t\tif (dp[i] > maxn) maxn = dp[i], k = i;\n\t}\n\tput_out(k);\n\tprintf(\"%d\\n\", maxn);//\u8f93\u51fa\n\t//system(\"pause\");\n\treturn 0;\n}\n```\n**P.S.** STL\u5927\u6cd5\u597d\uff01\uff01\uff01",
        "postTime": 1534496601,
        "uid": 25906,
        "name": "Rey_HR",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u53ef\u4ee5\u8bf4\u662f\u4e00\u9053\u5f88\u7ecf\u5178\u7684dp\u4e86\uff0c\u8fd8\u662f\u5f88\u7b80\u5355\u7684\n\n\u6211\u4eec\u53ef\u4ee5\u63a8\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u9488\u4e3af[i]=max(a[i]+w[j])\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint a[25],s[25][25],t[25],c[25],f[25];\nint main()\n{\n\tint n,maxx=0,l,k;\n\tscanf(\"%d\",&n);\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tfor(int j=i+1; j<=n; j++)\n\t\t{\n\t\t\tscanf(\"%d\",&s[i][j]);//\u76f4\u63a5\u8bb0\u5f55\u8fde\u63a5\u60c5\u51b5\n\t\t}\n\t}\n\tf[n]=a[n];//\u8fd9\u91cc\u662f\u4ecen\u5f80\u4e0b\u7684\u4e00\u4e2a\u9012\u63a8\n\tfor(int i=n-1; i>=1; i--)\n\t{\n\t\tl=0,k=0;//\u6ce8\u610f\u8981\u6e05\u96f6\n\t\tfor(int j=i+1; j<=n; j++)\n\t\t{\n\t\t\tif(s[i][j]==1&&f[j]>l)//\u8bb0\u5f55\u6700\u5927\u503c\n\t\t\t{\n\t\t\t\tl=f[j];\n\t\t\t\tk=j;\n\t\t\t}\n\t\t}\n\t\tf[i]=l+a[i];//\u52a0\u4e0a\u5730\u96f7\u6570\n\t\tc[i]=k;//\u8bb0\u5f55\u6700\u4f18\u987a\u5e8f\n\t}\n\tk=1;\n\tfor(int i=2;i<=n;i++)//\u8ba1\u7b97\u6700\u591a\u5730\u96f7\u6570\n\t{\n\t\tif(f[i]>f[k])\n\t\t{\n\t\t\tk=i;\n\t\t}\n\t}\n\tmaxx=f[k];//\u8bb0\u4e0b\u6700\u5927\u503c\n\tcout<<k;\n\tk=c[k];\n\twhile(k!=0)\n\t{\n\t\tprintf(\" %d\",k);\n\t\tk=c[k];\n\t}\n\tprintf(\"\\n\");\n\tprintf(\"%d\\n\",maxx);\n\treturn 0;\n}\n\n```\n\n//^w^",
        "postTime": 1533707443,
        "uid": 89766,
        "name": "Mr_\u5b8f\u4f1f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u4e00\u9053\u52a8\u89c4\u9898~\n\n\u548c\u697c\u4e0b\u8bf4\u7684\u5dee\u4e0d\u591a\uff0c\u6570\u5b57\u4e09\u89d2\u5f62\u5347\u7ea7\u7248\uff0c\u4f46\u662f\u697c\u4e0b\u8bf4\u7684\u6709\u70b9\u5c0f\u95ee\u9898......\n\n\u56e0\u4e3a\u8f93\u51fa\u65f6\u8981\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u6240\u4ee5\u52a8\u89c4\u5927\u5faa\u73af\u9700\u8981\u4ece\u5927\u5230\u5c0f\uff0c\u8fd9\u6837\u90bb\u63a5\u8868\uff08\u53ef\u80fd\u4e0d\u592a\u51c6\u786e\uff09\u7684\u987a\u5e8f\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u4ece\u5c0f\u5230\u5927\uff08\u4f4d\u7f6e\uff09\uff0c\u5b57\u5178\u5e8f\u5c31\u662f\u6700\u5c0f\u7684\u3002\n\ni\u4ece\u5927\u5230\u5c0f\u679a\u4e3e\uff0c\u6bcf\u6b21\u5728\u6bd4i\u9760\u540e\u7684\u533a\u57df\u4e2d\u9009\u53d6\u6700\u4f18\u503c\u8fde\u5230i\u7684\u540e\u9762\u3002\u8fd9\u6837i\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u4e00\u5b9a\u6bd4i\u5927\uff0ci-1\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u4e00\u5b9a\u6bd4i-1\u5927\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n```cpp\n#include<cstdio>\nusing namespace std;\nbool z[202][202];\nint k,a[202],f[202],nxt[202],n,i,j,ans;//nxt[i]\u8bb0\u5f55i\u8fde\u63a5\u7684\u4e0b\u4e00\u4e2a\u5730\u7a96\nint main()\n{\n    scanf(\"%d\",&n);\n    for(i=1;i<=n;i++)\n        scanf(\"%d\",&a[i]);\n    for(i=1;i<=n-1;i++)\n        for(j=i+1;j<=n;j++)\n            scanf(\"%d\",&k),z[i][j]=(k==1?true:false);//\u8bb0\u5f55i,j\u662f\u5426\u8054\u901a\n    for(f[n]=a[n],i=n-1;i>=1;i--)//\u521d\u59cb\u5316\u5f88\u91cd\u8981\uff0c\u6700\u540e\u4e00\u4e2a\u5730\u7a96\u5bf9\u5e94\u6700\u4f18\u503c\u5c31\u662f\u672c\u8eab\n    {\n        for(j=i+1;j<=n;j++)\n            if(f[j]>f[i]&&z[i][j])//\u5728i\u4e4b\u540e\u7684\u533a\u57df\u91cc\u627e\u5230\u6700\u5927\u7684\u603b\u548c\u4e14\u8fde\u901a\u7684\u5730\u7a96\uff0c\u628ai\u7684\u8fde\u63a5\u7684\u5730\u7a96\u8bbe\u4e3a\u6700\u5927\u7684\n            {\n                f[i]=f[j];\n                nxt[i]=j;\n            }\n        f[i]+=a[i];//\u7b2ci\u4e2a\u5730\u7a96\u8fd8\u8981\u52a0\u4e0a\u672c\u8eab\u7684\u503c\n```\n}//\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0bf(i)=max{f(j)}+a[i]\n```cpp\n    for(i=1;i<=n;i++)\n        if(f[i]>ans)//\u627e\u5230\u5168\u90e8\u7684\u6700\u4f18\u503c\n        {\n            ans=f[i];\n            k=i;\n        }\n    for(i=k;nxt[i];i=nxt[i])//\u4ece\u6700\u4f18\u503c\u4e0b\u624b\uff0c\u6bcf\u6b21\u627e\u5176\u7d27\u8fde\u63a5\u7684\u4e00\u4e2a\u5730\u7a96\uff0c\u548c\u90bb\u63a5\u8868\u5f88\u7c7b\u4f3c\n        printf(\"%d \",i);\n    printf(\"%d\\n\",i);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1504711369,
        "uid": 18993,
        "name": "\u4ee5\u58a8",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.org/problem/P2196)\n\n\u76f4\u63a5\u4e0a\u72b6\u538bDP\uff01\uff01\uff01\n\n\u4ee4$f_{i,j}$\u8868\u793a\u53d6\u8fc7\u7684\u70b9\u7684\u72b6\u6001\u4e3ai\uff0c\u5f53\u524d\u5728j\u70b9\u7684\u6700\u5927\u5730\u96f7\u4e2a\u6570\u3002\u72b6\u6001\u8f6c\u79fb\u76f4\u63a5\u626b\u63cfj\u70b9\u7684\u6240\u6709\u51fa\u8fb9\u5c31\u597d\u4e86\uff0cDP\u65b9\u7a0b$f[i|(1<<k-1)][k]=\\min(f[i|(1<<k-1)][k],f[i][j]+a[k])$\uff08j\u5230k\u6709\u8fb9\uff09\u3002\u6211\u7528\u7684\u662f\u90bb\u63a5\u77e9\u9635\u5b58\u56fe\u3002\n\n\u6ce8\u610f\uff1a\u76f4\u63a5\u5f00$2^{20}*20$\u4f1aMLE\uff0c\u8981\u6539\u6210short\u3002\n\n\u4ee3\u7801\uff1a\n``` cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 21\n#define int short//\u61d2\u4eba\u4e13\u7528\ninline int read(){int x=0;char c=getchar();while(c<'0' || c>'9')c=getchar();while(c>='0' && c<='9')x=(x<<3)+(x<<1)+(c^'0'),c=getchar();return x;}//\u5feb\u8bfb\nshort n,ans2[N],cnt,a[N],f[1<<20][N],ans;\npair<short,short>pre[1<<20][N],s;//pre\u8bb0\u5f55\u524d\u9a71\nbool e[N][N];//\u90bb\u63a5\u77e9\u9635\u5b58\u56fe\nsigned main()\n{\n    n=read();\n    for(register int i=1;i<=n;i++)a[i]=read();\n    for(register int i=1;i<n;i++)for(register int j=i+1;j<=n;j++)e[i][j]=read();\n    for(register int i=0;i<(1<<n)-1;i++)\n    {\n        if(i==0)\n        {\n            for(register int j=1;j<=n;j++)f[1<<j-1][j]=a[j];\n        }\n        else\n        {\n            for(register int j=1;j<=n;j++)\n            {\n                if(!(i&(1<<j-1)))continue;\n                for(register int k=1;k<=n;k++)\n                {\n                    if(!e[j][k] || i&(1<<k-1))continue;\n                    if(f[i|(1<<k-1)][k]<f[i][j]+a[k])//\u72b6\u6001\u8f6c\u79fb\n                    {\n                        f[i|(1<<k-1)][k]=f[i][j]+a[k];\n                        pre[i|(1<<k-1)][k]=make_pair(i,j);\n                    }\n                }\n            }\n        }\n    }\n    for(register int i=1;i<(1<<n);i++)//\u8bb0\u5f55\u7b54\u6848\n    {\n        for(register int j=1;j<=n;j++)\n        {\n            if(!(i&(1<<j-1)))continue;\n            if(f[i][j]>ans)\n            {\n                ans=f[i][j];\n                s=make_pair(i,j);\n            }\n        }\n    }\n    for(pair<short,short>i=s;i.first;i=pre[i.first][i.second])ans2[++cnt]=i.second;//\u8bb0\u5f55\u8def\u5f84\n    for(register int i=cnt;i;i--)printf(\"%hd \",ans2[i]);//\u8f93\u51fa\n    putchar('\\n');\n    printf(\"%hd\",ans);\n}\n```\n![](https://www.luogu.org/images/congratulation.png)",
        "postTime": 1572332834,
        "uid": 60075,
        "name": "pzc2004",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "# \u5b8c\u5168\u6ca1\u6709\u4f18\u5316\u7684DFS\n\nPS\uff1a\u4e3a\u4ec0\u4e48 for \u5faa\u73af\u91cc\u4ec0\u4e48 i \u5440 j \u5440\u5168\u662flong long\uff1f\n\n\u56e0\u4e3a\u624b\u61d2\u76f4\u63a5\u7528\u7684\u66ff\u6362\n\n```cpp\n#include <bits/stdc++.h> \n\nusing namespace std;\n\n#define s(x) scanf(\"%lld\",&(x))\n#define p(x) printf(\"%lld\\n\",(x))\n//\u4e00\u4e9b\u7b80\u5199\n\nlong long  n,sum[21],master[21][21];\nbool vis[21];\nlong long  ans,step[21],ans1[21];\nlong long  cnt;\nlong long  camp;\n//\u7b2c\u4e00\u6b21\u4ea4\u4ee5\u4e3a\u7206long long \n//PS\uff1a\u5b9e\u9645\u4e0a\u662f\u8111\u62bd\n\nbool can_boom(long long  now) {\n\tfor(long long  i=1;i<=n;i++) {\n\t\tif(!vis[i] and master[now][i]) return true;\n\t}\n\treturn false;\n}\n//\u5224\u65ad\u80fd\u5426\u5f80\u4e0b\u6316\uff0c\u5982\u679c\u6316\u4e0d\u4e86\u5c31 return\n\n//\u8fd9\u4e2a\u5229\u7528\u9012\u5f52\u65b9\u5f0f\u5b58\u8def\u5f84\n//\u5012\u5e8f\u5b58\u50a8\uff0c\u5012\u5e8f\u8f93\u51fa\nvoid out_out(long long  now) {\n\tif(!step[now]) return;//\u5982\u679c\u5230\u8fbe\u8d77\u70b9\uff0c\u5c31\u8fd4\u56de\n\telse {\n\t\tans1[++cnt]=step[now];//\u5b58ta\u7684\u4e0a\u4e00\u4e2a\u8282\u70b9\n\t\tout_out(step[now]);//\u9012\u5f52\n\t}\n}\n\nvoid input() {\n\ts(n);\n\tfor(long long  i=1;i<=n;i++) {\n\t\ts(sum[i]);\n\t}\n\tfor(long long  i=1;i<n;i++) {\n\t\tfor(long long  j=i+1;j<=n;j++) {\n\t\t\tlong long  now;s(now);\n\t\t\tmaster[i][j]= now ? true:false;//\u4e09\u76ee\u8fd0\u7b97\u7b26\uff0c\u5224\u65ad\u662f\u5426\u8fde\u63a5 \n\t\t  //master[j][i]= now ? true:false;\n\t\t\t//\u8fd9\u91cc\u4e00\u5b9a\u8981\u6ce8\u610f\u7684\u662f \u201c\u6cbf\u7740\u6307\u51fa\u7684\u8fde\u63a5\u5f80\u4e0b\u6316 \u201d\u6307\u7684\u662f\u5355\u5411\u8fb9 \n\t\t\t//\u5bfc\u81f4\u6211\u4ea4\u4e863\u904d \n\t\t}\n\t}\n}\n\nvoid Dfs(long long  now,long long  now_boom) {\n\t//\u8fd9\u91cc\u6211\u7528\u7684\u4e24\u6b21\u5224\u65ad\uff0c\u7b2c\u4e00\u6b21\u66f4\u65b0\u8def\u5f84\uff0c\u7b2c\u4e8c\u6b21\u8fd4\u56de\n\t//\u7b2c\u4e00\u6b21\n\tif(!can_boom(now) and ans<now_boom) {\n\t\tans=max(ans,now_boom);//\u66f4\u65b0\u7b54\u6848\n\t\tcnt=0;//\u8ba1\u6570\u5668\u4e00\u5b9a\u8981\u5f520\uff01\uff01\uff01\n\t\tans1[++cnt]=now;//\u5b58\u5f53\u524d\u8282\u70b9\n\t\tout_out(now);//\u9012\u5f52\u5b58\u50a8\u8def\u5f84\n\t\tcamp=cnt;//\u7b54\u6848\u8ba1\u6570\u5668\uff0c\u56e0\u4e3a\u4e0b\u4e00\u6b21cnt\u8981\u5f520\uff0c\u6240\u4ee5\u8f93\u51fa\u4e0d\u80fd\u7528cnt\n\t\treturn;\n\t}\n\t//\u7b2c\u4e8c\u6b21\n\telse if(!can_boom(now)) return;\n\t//\u641c\u7d22\n\telse {\n\t\tfor(long long  i=1;i<=n;i++) {\n\t\t\tif(!vis[i] and master[now][i]) {\n\t\t\t\tvis[i]=1;\n\t\t\t\tstep[i]=now;\n\t\t\t\tDfs(i,now_boom+sum[i]);\n\t\t\t\tvis[i]=0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvoid output() {\n\t//\u679a\u4e3e\u6bcf\u4e2a\u8282\u70b9\n\tfor(long long  i=1;i<=n;i++) {\n\t\tvis[i]=true;//\u4e00\u5b9a\u8981\u521d\u59cb\u5316\uff0c\u4e0d\u7136\u8981\u51fa\u9505\n\t\tDfs(i,sum[i]);\n\t\t//PS\uff1a\u8fd8\u597d\u6570\u636e\u91cf\u5c0f\n\t}\n\t//\u5012\u5e8f\u8f93\u51fa\uff0c\u5728\u641c\u7d22\u53ca\u8bb0\u5f55\u51fd\u6570\u91cc\u5199\u7684\u5f88\u6e05\u695a\n\tfor(long long  i=camp;i>=1;i--) {\n\t\tcout<<ans1[i]<<\" \";\n\t}\n\tcout<<endl;\n\tp(ans);\n}\n\n//\u7b80\u6d01\u7684\u4e3b\u7a0b\u5e8f\nint main() {\n\tinput();\n\toutput();\n\treturn 0;\n}\n```\n\n~~\u8fd9\u5c31\u662f\u9053DFS\u5165\u95e8\u9898~~",
        "postTime": 1569322499,
        "uid": 99430,
        "name": "Leaved_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u4f60\u8fd8\u5728\u4e3a\u7a0b\u5e8f\u8fd0\u884c\u65f6\u95f4\u957f\u800c\u82e6\u607c\u5417\uff1f\n\n\u4f60\u8fd8\u5728\u4e3a\u7a0b\u5e8f\u7a7a\u95f4\u5927\u800c\u82e6\u607c\u5417\uff1f\n\n\u4f60\u8fd8\u5728\u56e0\u4e3a\u53ea\u4f1a\u7b80\u5355dp\u800c\u82e6\u607c\u5417\uff1f\n\n\u53ea\u8981~~998~~\u94fe\u5f0f\u524d\u5411\u661f\uff0c\u8ba9\u4f60\u7684\u7a0b\u5e8f\u66f4\u7f8e\u597dqwq\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint n,a[21],head[21],h,to[4001],next[4001];\nint f[21],ans[21],pre[21],da,dw;\nvoid add(int u,int v){\n\tto[++h]=v;\n\tnext[h]=head[u];\n\thead[u]=h;\n}//\u5b58\u56fe\nvoid find(int w){\n\tif (!pre[w]){\n\t\tprintf(\"%d \",w);\n\t\treturn;\n\t}\n\tfind(pre[w]);\n\tprintf(\"%d \",w);\n}//\u8f93\u51fa\u524d\u9a71\nint main(){\n\tint d;\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tfor (int i=1;i<n;i++){\n\t\tfor (int j=i+1;j<=n;j++){\n\t\t\tscanf(\"%d\",&d);\n\t\t\tif (d) add(j,i);//\u5b58\u4e0b\u4ece\u54ea\u4e2a\u70b9\u5230\u81ea\u5df1\n\t\t}\n\t}\n\tf[1]=a[1];\n\tda=a[1];\n\tdw=1;\n\tfor (int i=2;i<=n;i++){\n\t\tf[i]=a[i];\n\t\tif (f[i]>da){\n\t\t\tda=f[i];\n\t\t\tdw=i;\n\t\t}\n\t}//\u4e0d\u4e00\u5b9a\u4ece\u4e00\u53f7\u5f00\u59cb\n\tfor (int i=2;i<=n;i++){\n\t\tfor (int k=head[i];k;k=next[k]){\n\t\t\tint j=to[k];\n\t\t\tif (f[j]+a[i]>f[i]){\n\t\t\t\tpre[i]=j;\n\t\t\t\tf[i]=f[j]+a[i];\n\t\t\t\tif (f[i]>da){\n\t\t\t\t\tda=f[i];\n\t\t\t\t\tdw=i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfind(dw);\n\tprintf(\"\\n\");\n\tprintf(\"%d\",da);\n}\n```\n",
        "postTime": 1564479070,
        "uid": 94018,
        "name": "\u52a8\u6001WA",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u7ecf\u5178\u7684DP\uff0c\u4e0d\u8fc7\u6211\u76f4\u63a5\u7528\u4e86\u56fe(\\*/\u03c9\uff3c\\*)\n\n\n\u5199\u7684\u90bb\u63a5\u8868\uff08\u94fe\u5f0f\u524d\u5411\u661f\uff09\u4e0d\u77e5\u9053\u7684\u53ef\u4ee5\u67e5\u67e5 (=\u00b4\u03c9\uff40=)\n\n\n\u5f53\u7136\u8fd9\u9053\u9898\u5199\u7684\u65f6\u5019\u628a\u503c\u8d4b\u7ed9\u70b9\u800c\u4e0d\u662f\u8fb9\n\n\n\u5177\u4f53\u770b\u4ee3\u7801\uff1a(\u4e0d\u8981\u6284\u88ad\u54e6)\n\n```cpp\n#include<cstdio>\nint n,m,cnt,ma_sum,ma_t,ma_num;\nint last[21],vis[21],c[21],ans[21],a[21];\nstruct node{\n    int pre,to;\n}bian[21];\nvoid add_n(int x,int y){//\u94fe\u5f0f\u524d\u5411\u661f~ \u5177\u4f53\u7684\u4e0d\u89e3\u91ca\u4e86\u4e0a\u7f51\u67e5\u5427\n    bian[++cnt].pre=last[x];\n    bian[cnt].to=y;\n    last[x]=cnt;\n}\nvoid dfs(int t,int sum,int num);\nint main(){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n        scanf(\"%d\",&a[i]);\n    for(int i=1;i<=n;i++)\n        for(int j=i+1;j<=n;j++){\n            scanf(\"%d\",&m);\n            if(m){\n                add_n(i,j);//\u65e0\u5411\u56fe\n                add_n(j,i);\n            }\n        }\n    for(int i=1;i<=n;i++) \n         dfs(i,0,1);//\u9632\u6b62\u51fa\u73b0\u4e00\u5730\u7a96\u4e0d\u4e0e\u4efb\u4f55\u5730\u7a96\u8fde \u4f46\u96f7\u6570\u6bd4\u5176\u4ed6\u7684\u6700\u5927\u503c\u5927\u7684\u60c5\u51b5\n    for(int i=1;i<=ma_num;i++) printf(\"%d \",ans[i]);\n    printf(\"\\n%d\",ma_sum);\n    while(1);//\u53cdcopy~\n    return 0;\n}\nvoid dfs(int t,int sum,int num){\n    vis[t]=1;sum+=a[t];c[num]=t; //\u6807\u8bb0 \u7d2f\u8ba1 \u5f53\u524d\u6240\u6316\u5730\u7a96\u7f16\u53f7\n    if(sum>ma_sum){\n        ma_sum=sum, ma_num=num;//\u66f4\u65b0\u6700\u5927\u503c \n        for(int i=1;i<=num;i++) ans[i]=c[i];//\u66f4\u65b0\u7b54\u6848\u6570\u7ec4\n    }\n    for(int i=last[t];i;i=bian[i].pre){\n        if(!vis[bian[i].to]&&t<bian[i].to)//\u4e00\u4e2a\u70b9\u8d70\u4e00\u56de&&\u5b57\u5178\u5e8f\n            dfs(bian[i].to,sum,num+1);\n    }\n    vis[t]=0;\n}\n```",
        "postTime": 1512318098,
        "uid": 52187,
        "name": "\u9189\u8bed\u68a6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u672c\u9898\u53ef\u4ee5\u8fd0\u7528\u9012\u63a8\u601d\u60f3\uff0c\u4ecef[n]\u5f80\u524d\u9010\u4e2a\u627e\u51fa\u6240\u6709\u7684f[i]\uff1b\u518d\u4ece\u4e2d\u627e\u51fa\u6700\u5927\u7684\u4e00\u4e2a\u89e3\uff1b\u5bf9\u4e8e\u5177\u4f53\u8d70\u8fc7\u7684\u8def\u5f84\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u5411\u540e\u7684\u94fe\u63a5\u6765\u5b9e\u73b0\uff1b\n\n\u5e76\u4e14\u8fd9\u662f\u4e00\u9053\u5178\u578b\u7684\u52a8\u89c4\u9898\uff0c\u5f88\u660e\u663e\u9898\u76ee\u89c4\u5b9a\u6240\u6709\u8def\u5f84\u90fd\u662f\u5355\u5411\u7684\uff0c\u6240\u4ee5\u6ee1\u8db3\u65e0\u540e\u6548\u6027\u539f\u5219\u548c\u6700\u4f18\u5316\u539f\u7406\u3002\n\n\u9119\u4eba\u521d\u5b66C++\u82e5\u4ee3\u7801\u4e2d\u6709\u591a\u4f59\u7684\uff0c\u8bf7\u52ff\u89c1\u602a\u3002\n\n\u5177\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<cstring>\nusing namespace std;\nint main()\n{\n    long f[201]={0},w[201],c[201]={0};\n    bool a[201][201]={0};\n    long i,j,n,x,y,l,k,maxx;\n    memset(f,0,sizeof(f));\n    memset(c,0,sizeof(c));\n    memset(a,0,sizeof(a));//\u5c06f\uff0cc\uff0ca\u4e09\u4e2a\u5168\u90e8\u521d\u59cb\u5316\u4e3a0\uff1b\n    cin>>n;\n    for(i=1;i<=n;i++)\n    cin>>w[i];//\u8f93\u5165\u6bcf\u4e2a\u5730\u7a96\u4e2d\u7684\u5730\u96f7\u6570\n    for(i=1;i<=n;i++)\n        for(j=i+1;j<=n;j++)\n        cin>>a[i][j];//\u8f93\u5165\u8def\u5f84\u6570\n    f[n]=w[n];//\u4ece\u540e\u9762\u7684f[n]\u5f80\u524d\u9010\u4e2a\u627e\u51fa\u6240\u6709\u7684f[i]\n    for(i=n-1;i>=1;i--)\n      {\n          l=0;k=0;\n          for(j=i+1;j<=n;j++)\n            if((a[i][j])&&(f[j]>l)) \n            {\n               l=f[j];\n             k=j;    \n          }\n          f[i]=l+w[i];//\u4fdd\u5b58\u4ece\u7b2ci\u4e2a\u5730\u7a96\u8d77\u80fd\u6316\u5230\u7684\u540e\u7ee7\u70b9\u6700\u5927\u5730\u96f7\u6570\n          c[i]=k;//k\u5730\u7a96\u662fi\u5730\u7a96\u6700\u4f18\u8def\u5f84\n      }\n    k=1;\n    for(j=2;j<=n;j++)//\u8ba1\u7b97\u6700\u591a\u6316\u51fa\u7684\u5730\u96f7\u6570\n      if(f[j]>f[k]) k=j;\n    maxx=f[k];\n    cout<<k;\n    k=c[k];\n    while(k!=0)//\u8f93\u51fa\u6316\u51fa\u5730\u96f7\u7684\u987a\u5e8f\n    {\n        cout<<\" \"<<k;\n        k=c[k];\n    }\n    cout<<endl;\n    cout<<maxx<<endl;//\u8f93\u51fa\u6700\u591a\u6316\u51fa\u7684\u5730\u96f7\u6570\n}\n//\u7ed9\u5927\u5bb6\u63a8\u8350\u4e00\u672c\u4e66\u300a\u4fe1\u606f\u5b66\u5965\u8d5b\u4e00\u672c\u901aC++\u7248\u300b\uff1b\u5f88\u597d\u7528\n```",
        "postTime": 1501765019,
        "uid": 50269,
        "name": "\u9f98\u9f98\u9f98\u9f98\u9f98\u9f98",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "//\u5728\u8ba8\u8bba\u4e0a\u6709\uff0c\u4f46\u662f\u672c\u840c\u65b0\u6015\u8fd9\u5e16\u6c89\u4e86.....\u6240\u4ee5\u5c31\u53d1\u5230\u9898\u89e3\u4e0a\n\n\u6ce8\u610f\u4e8b\u9879\uff1a\n\n1.\u9664\u7b2cn\u4e2a\u5730\u7a96\u5916\uff0c\u5176\u4ed6\u5730\u7a96\u90fd\u53ea\u4e0e\u7b2cn\u4e2a\u5730\u7a96\u76f8\u8fde\u3002\uff081\u4e2a\u70b9 20\u5206\uff09//\u8c8c\u4f3c\u662f\u7b2c3\u70b9\u7684\u6570\u636e\n\n\n2.\u67d0\u4e9b\u5730\u7a96\u6ca1\u6709\u4e0e\u5176\u4ed6\u5730\u7a96\u7684\u901a\u8def\uff08\u76f8\u5f53\u4e8e\u4e00\u5ea7\u5b64\u5c9b\uff09\uff0c\u4f46\u662f\u5fc3\u673a\u7684\u6570\u636e\u504f\u5c31\u628a\u8fd9\u4e2a\u5730\u7a96\u8bbe\u4e3a\u7b54\u6848\uff0c\u4e3e\u4e2a\u6817\u5b50\uff1a\n\n\n\u51713\u4e2a\u5730\u7a96\n\n\n\u7b2c1\u3001\u7b2c3\u4e2a\u5730\u7a96\u76f8\u8fde\uff0c\u5171\u67092+3=5\u4e2a\u5730\u96f7\n\n\n\u7b2c2\u4e2a\u5730\u7a96\u6ca1\u6709\u901a\u8def \u67096\u4e2a\u5730\u96f7\n\n\n\u6b64\u65f6\u5224\u7b2c2\u4e2a\u5730\u7a96\u4e3a\u7b54\u6848\uff1a   2   6      \u800c\u4e0d\u662f    1  3   5   \uff08\u8bf7\u522b\u5728\u610f\u7a7a\u683c\uff09\n\n\n\uff082\u4e2a\u70b9 40\u5206\uff09\n\n//\u770b\u52302\u4e2awa\u70b9\u5c11\u7684\u53ef\u601c\u7684\u6570\u636e\u63a8\u51fa\u6765\u7684\n\n//\u672c\u840c\u65b0\u7684\u7a0b\u5e8f\u548c\u697c\u4e0b\uff08\u548c\u672a\u6765\u7684\u697c\u4e0a\uff09dalao\u7684\u7a0b\u5e8f\u6839\u672c\u4e0d\u53ef\u6bd4\uff0c\u6240\u4ee5\u5c31\u4e0d\u732e\u4e11\u4e86\n\n//\u8d39\u4e86\u534a\u4e2a\u591a\u5c0f\u65f6\u624d\u5206\u6790\u51fa\u6765\u7684\n",
        "postTime": 1493457499,
        "uid": 21679,
        "name": "\u9999\u98ce\u667a\u4e43",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u6765\u4e00\u53d1Pascal\u7684dfs\u7684\u9898\u89e3 ~~\u6bd5\u7adfpascal\u5728OIer\u4e2d\u666e\u53ca\u7387\u8d8a\u6765\u8d8a\u4f4e\u4e86 \u4f24\u5fc3~~\n\n\u8fd9\u9053\u9898\u4e3b\u8981\u662f\u5355\u5411\u7684\uff0c\u800c\u4e0d\u662f\u53cc\u5411\u7684\uff0c~~\u5bb3\u6b7b\u4eba\u554a~~\n\n\u5982\u679c\u4f60\u4e00\u4e0d\u5c0f\u5fc3\u6253\u6210\u53cc\u5411\u4e86\uff0c\u5475\u5475\u6837\u4f8b\u90fd\u8fc7\u4e0d\u4e86\uff01\u4ea4\u7ed9luogu\u8bc4\u6d4b\u597d\u50cf60\uff08\u6570\u636e\u7565\u6c34\uff09\n\n\u6240\u4ee5\u5927\u5bb6\u8981\u597d\u597d\u7684\u770b\u9898~~\n\nvar  u:array[1..1000]of boolean;//\u67e5\u770b\u7b2ci\u4e2a\u5143\u7d20\u6709\u6ca1\u6709\u88ab\u904d\u5386\n\na,anss,road:array[1..1000]of longint;//a\u8868\u793a\u5730\u96f7\u6570\uff0canss\u8868\u793a\u6700\u4f73\u8def\u7ebf\uff0croad\u8868\u793a\u5f53\u524d\u8def\u7ebf\n\nmap:array[1..1000,1..1000]of longint;//map\u8868\u793a\u4e00\u4e2a01\u77e9\u9635\uff0c\u8868\u793a\u80fd\u8d70\u4e0d\u80fd\u8d70\n\n```cpp\n     i,j,sum,n,maxn:longint;\nprocedure dfs(num,ans,s:longint);//num\u8868\u793a\u5f53\u524d\u7684\u5730\u7a96\u53f7\uff0cans\u8868\u793a\u5f53\u524d\u6316\u7684\u5730\u96f7\u6570\uff0cs\u4ee3\u8868\u7ecf\u8fc7\u51e0\u4e2a\u5730\u7a96\nvar  i:longint;\nbegin\n if u[num]=false then exit;//\u904d\u5386\u8fc7\u4e0d\u91cd\u590d\n road[s]:=num;//\u5f55\u5165\n for i:=1 to n do\n  if map[num,i]=1 then begin//\u80fd\u8d70\u5982\u679c\u662fnum\uff0ci\u4ea4\u6362\u6253\u51fa\u6765\u7684\u8def\u7ebf\u53cd\u5411\n   u[num]:=false;\n   dfs(i,ans+a[num],s+1);\n   u[num]:=true;\n  end;\n //\u6ce8\u610f\u4ee5\u4e0b\u8bed\u53e5\u5728\u5faa\u73af\u5916\n   if ans+a[num]>maxn then begin\n    maxn:=ans+a[num]; sum:=s;\n    for j:=1 to s do anss[j]:=road[j];\n   end;\nend;\nbegin\n readln(n);\n for i:=1 to n do read(a[i]);\n for i:=1 to n do\n  for j:=i+1 to n do begin\n    read(map[i,j]);\n    //map[j,i]:=map[i,j];\u52a0\u4e8660\n    end;\n    fillchar(u,sizeof(u),true);\n  for i:=1 to n do dfs(i,0,1);//\u6bcf\u4e2a\u70b9\u90fd\u904d\u5386\n  for i:=1 to sum do write(anss[i],' ');\n  writeln;\n  writeln(maxn);\nend.\n```",
        "postTime": 1488357672,
        "uid": 16456,
        "name": "ljc20020730",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "#\u9898\u89e3\uff1a\n\n\u6bd4\u8f83\u7b80\u5355\u7684DP\uff0c\u4e0d\u9700\u8981\u914d\u4e0a\u5176\u4ed6\u7684\u7b97\u6cd5\uff0c\u53ea\u8981\u9759\u4e0b\u5fc3\u6765\u60f3\u4e00\u60f3\uff0c\u52a8\u89c4\u65b9\u7a0b\u5c31\u51fa\u6765\u4e86\u3002\n\n\u8f93\u51fa\u6709\u70b9\u6076\u5fc3\u554a\u2026\u2026\n\n```delphi\nvar\n  g:array[0..1000,0..1000] of longint;\n  w,opt,path:array[0..1000] of longint;\n  i,j,n,ans:longint;\nbegin\n  fillchar(g,sizeof(g),0);\n  fillchar(opt,sizeof(opt),0);\n  fillchar(path,sizeof(path),0);\n  readln(n);\n  for i:=1 to n do read(w[i]);\n  for i:=1 to n do\n    for j:=i+1 to n do\n      read(g[i,j]);\n  for i:=n downto 1 do\n  begin\n    for j:=i+1 to n do\n      if (g[i,j]=1) and (opt[j]>opt[i]) then\n      begin\n        opt[i]:=opt[j];\n        path[i]:=j;\n      end;\n    inc(opt[i],w[i]);\n  end;\n  ans:=1;\n  for i:=2 to n do\n    if opt[i]>opt[ans] then ans:=i;\n  write(ans,' ');\n  i:=path[ans];\n  while i>0 do\n  begin\n    write(i,' ');\n    i:=path[i];\n   end;\n  writeln;\n  write(opt[ans]);\nend.\n```",
        "postTime": 1426171166,
        "uid": 3116,
        "name": "\u98de\u7fd4",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "emmm...\u6700\u5f00\u59cb\u63a5\u89e6\u8fd9\u9053\u9898\uff0c\u662f\u5728\u5b66\u6df1\u641c\u7684\u65f6\u5019\uff08~~\u5177\u4f53\u54ea\u672c\u4e66\u5fd8\u4e86~~\uff09\u90a3\u65f6\u5019\u8fd8\u505a\u4e0d\u6765\uff0c\u5c31\u542c\u8001\u5e08\u8bb2\u4e86\u4e4b\u540e\u76f4\u63a5\u4ea4\u7684\u4ee3\u7801\uff0c\u5e76\u6ca1\u6709\u591a\u5927\u7684\u611f\u609f\u3002\n\n\u4e3a\u4e86CSP\uff0c\u53c8\u5f00\u59cb\u590d\u4e60\uff08~~\u91cd\u5b66~~\uff09\u4e07\u80fd\u7684\u6df1\u641c\uff1b\u518d\u52a0\u4e0a\u60f3\u7ec3\u4e60\u4e00\u4e0b vector \uff0c\u4e8e\u662f\u91cd\u65b0\u7f16\u4e86\u4e00\u904d\u3002\u4ea4\u4e86\u4e09\u904dAC\u4e86\u3002\n\n\u601d\u8def\uff1a\n\n1\u3001\u9898\u76ee\u4e2d\uff1a\u201c\u67d0\u4eba\u53ef\u4ee5\u4ece\u4efb\u4e00\u5904\u5f00\u59cb\u6316\u5730\u96f7\uff0c\u7136\u540e\u53ef\u4ee5\u6cbf\u7740\u6307\u51fa\u7684\u8fde\u63a5\u5f80\u4e0b\u6316\uff08\u4ec5\u80fd\u9009\u62e9\u4e00\u6761\u8def\u5f84\uff09\uff0c\u5f53\u65e0\u8fde\u63a5\u65f6\u6316\u5730\u96f7\u5de5\u4f5c\u7ed3\u675f\u3002\u201d\n\n\u5f88\u660e\u663e\u5c31\u662f DFS\u561b\uff01\u5c1d\u8bd5\u6240\u6709N\u4e2a\u6d1e\u4f5c\u4e3a\u8d77\u59cb\u70b9\uff0c\u4e0d\u65ad\u63a2\u7d22\u4e0e\u4e4b\u76f8\u8fde\u7684\u70b9\uff08\u6d1e\uff09\uff0c\u628a\u6bcf\u4e00\u79cd\u65b9\u6848\u7684\u7ed3\u679c\u8bb0\u5f55\u4e0b\u6765\u518d\u6bd4\u8f83\u6700\u5927\uff0c\u5b8c\u4e8b\uff01\n\n2\u3001\u4e0d\u8fc7\uff0c\u8fd9\u9053\u9898\u8fd8\u8981\u6c42\u8f93\u51fa\u6700\u5927\u503c\u7684\u8def\u5f84\u3002\u6211\u8ba4\u4e3a\u8fd9\u624d\u662f\u8fd9\u9053\u9898\u7684\u96be\u70b9\uff08~~\u6700\u5927\u503c\u76f4\u63a5\u5957\u6df1\u641c\u677f\u5b50\u5c31\u597d~~\uff09\u3002\u90a3\u5c31\u7528\u4e00\u4e2a\u6570\u7ec4 nxt\u8bb0\u5f55\u8def\u5f84\u3002\u6bcf\u5f53\u66f4\u65b0\u6700\u591a\u5730\u96f7\u6570\u7684\u65f6\u5019\uff0c\u987a\u4fbf\u4e5f\u5c06\u8def\u5f84\u66f4\u65b0\u3002\u5f53\u7136\uff0c\u8981\u7528\u53e6\u5916\u4e00\u4e2a\u6570\u7ec4sum\u4fdd\u5b58\u3002\n\n\u5177\u4f53\u7684\u89c1\u4ee3\u7801\u6ce8\u91ca\u5427\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n,x,k,ans,tot,nxt[10010],a[10010],sum[10010],p[10010];\nvector<int> ssty[10010];\n\ninline void dfs(int x,int y,int tot) { //x\u8bb0\u5f55\u4f4d\u7f6e\uff0c\u8d70\u4e86y\u4e2a\u70b9\uff0ctot\u662f\u5f53\u524d\u7684\u5730\u96f7\u6570\n\tbool pd=false; //\u5224\u65ad\u5f53\u524d\u65b9\u6848\u662f\u5426\u8d70\u5230\u6781\u70b9\n\tfor(register int i=0; i<ssty[x].size(); i++) { //\u4e0ex\u70b9\u76f8\u8fde\u7684\u70b9\n\t\tif(p[ssty[x][i]]==0) { //\u6ca1\u6709\u8d70\u8fc7\n\t\t\tpd=true; //\u65b9\u6848\u6ca1\u6709\u7ed3\u675f\n\t\t\tp[ssty[x][i]]=1; //\u6807\u8bb0\u4e3a\u8d70\u8fc7\n\t\t\tnxt[y+1]=ssty[x][i]; //\u8bb0\u5f55\u8def\u5f84\n\t\t\tdfs(ssty[x][i],y+1,tot+a[ssty[x][i]]); //\u4ece\u8fd9\u4e2a\u70b9\u7ee7\u7eed\u5411\u4e0b\u6316\n\t\t\tp[ssty[x][i]]=0; //\u56de\u6eaf\u5fc5\u5907\n\t\t}\n\t}\n\tif(pd==false) {\n\t\tif(ans<tot) { //\u5982\u679c\u6700\u5927\u503c\u66f4\u6539\uff0c\u8bf4\u660e\u8def\u5f84\u4e5f\u8981\u6539\u53d8\n\t\t\tans=tot;\n\t\t\tk=y;\n\t\t\tfor(register int i=1; i<=y; i++) sum[i]=nxt[i]; //\u5c06\u6700\u5927\u503c\u8def\u5f84\u590d\u5236\u5728sum\u6570\u7ec4\u4e2d\n\t\t}\n\t\treturn;\n\t}\n}\n\nint main() {\n\tscanf(\"%d\",&n);\n\tfor(register int i=1; i<=n; i++) scanf(\"%d\",&a[i]);\n\tfor(register int i=1; i<n; i++) { //\u9898\u76ee\u8981\u6c42\u7684\u8f93\u5165\n\t\tfor(register int j=i+1; j<=n; j++) {\n\t\t\tscanf(\"%d\",&x);\n\t\t\tif(x==1) ssty[i].push_back(j); //\u5c06\u4e0e i \u6d1e\u76f8\u8fde\u7684\u70b9\u52a0\u5165\u201c\u961f\u5217\u201d\n\t\t}\n\t}\n\tfor(register int i=1; i<=n; i++) { //\u5c1d\u8bd5\u6bcf\u4e00\u4e2a\u70b9\n\t\tp[i]=1; //\u6807\u8bb0\u4e3a\u5df2\u8d70\u8fc7\n\t\tnxt[1]=i; //\u5c06\u7b2c\u4e00\u4e2a\u6d1e\u8bbe\u4e3a\u81ea\u5df1\n\t\tdfs(i,1,a[i]);\n\t\tp[i]=0;\n\t}\n\tfor(register int i=1; i<=k; i++) printf(\"%d \",sum[i]); //\u6700\u7ec8\u7684\u6700\u5927\u503c\u8def\u5f84\n\tprintf(\"\\n%d\",ans); //\u6700\u591a\u80fd\u6316\u5230\u7684\u5730\u96f7\u6570\n\treturn 0;\n}\n```\n\n\u6df1\u641c\uff0c\u4e00\u79cd\u628a\u677f\u5b50\u5957\u4e0a\u53bb\u5c31\u5dee\u4e0d\u591a\u6210\u529f\u4e00\u534a\u7684\u795e\u5947\u7b97\u6cd5QVQ\n\n\u5982\u679c\u8fd9\u7bc7\u9898\u89e3\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u6b22\u8fce\u6307\u6b63\uff0c\u8c22\u8c22\uff01",
        "postTime": 1573642695,
        "uid": 145205,
        "name": "Eleven\u8c26",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "### \u65b9\u6cd5\uff1a\n\u4f5c\u4e3a\u4e00\u4e2a\u521a\u521a\u63a5\u89e6OI\u7684\u849f\u84bb\uff0c\u770b\u5230\u9898\u76ee\u60f3\u90fd\u6ca1\u60f3\u5c31\u5199\u4e86\u4e00\u4e2a\u641c\u7d22\uff0c**\u679a\u4e3e\u6bcf\u4e00\u4e2a\u5730\u7a96\u4f5c\u4e3a\u8d77\u70b9\u518d\u6bd4\u8f83\u7b54\u6848\u7136\u540e\u8bb0\u5f55\u4e0b\u6700\u4f18\u7684**\uff0c\u867d\u7136\u6b64\u65b9\u6cd5\u5341\u5206\u5730\u66b4\u529b\uff0c\u4f46\u7531\u4e8en<=20\u6240\u4ee5\u4ecd\u7136\u80fdAC\u7684\n\n\n------------\n### \u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <vector>\n#include <cstring>\nusing namespace std;\n\nconst int MAXN = 20;\n\nint n, max1, ans, depth, final;\n//\u6570\u91cf\uff0c\u6700\u5927\u7684\u5730\u96f7\u6570\uff0c\u6bcf\u4e00\u4e2a\u4f5c\u4e3a\u8d77\u70b9\u7684\u6700\u5927\u4ef7\u503c\uff0c\u6bcf\u4e00\u6b21\u5730\u7a96\u6570\uff0c\u6700\u4f18\u7684\u5730\u7a96\u6570\nint a[MAXN], f[MAXN], vis[MAXN], path[MAXN];\n//\u6bcf\u4e00\u4e2a\u5730\u7a96\u7684\u5730\u96f7\u6570\uff0c\u6700\u7ec8\u7684\u7b54\u6848\uff0c\u662f\u5426\u8bbf\u95ee\u8fc7\uff0c\u6bcf\u4e00\u6b21\u7684\u8def\u5f84\n\nvector <int> G[MAXN];\n//\u6807\u8bb0\u76f8\u8fde\n\nbool dfs(int x)\n{\n\tif(x == n) //\u5230\u8fbe\u7ec8\u70b9\n\t{\n\t\tpath[depth] = x;\n\t\treturn true;\n\t}\n\tif(vis[x]) //\u5df2\u8bbf\u95ee\u8fc7\n\t{\n\t\treturn false;\n\t}\n\tvis[x] = true; //\u6807\u8bb0\n\tpath[depth] = x;\n\t++depth;\n\tfor(int i=0; i<G[x].size(); i++) //\u8bbf\u95ee\u548c\u5f53\u524d\u76f8\u90bb\u7684\u6bcf\u4e2a\u8282\u70b9\n\t{\n\t\tint u = G[x][i];\n\t\tif(dfs(u) == true)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t}\n\t--depth;\n\treturn false;\n}\n\nint main()\n{\n\tcin >> n;\n\tfor(int i=1; i<=n; i++)\n\tcin >> a[i];\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tfor(int j=1; j<=n-i; j++)\n\t\t{\n\t\t\tint x;\n\t\t\tcin >> x;\n\t\t\tif(x == 1)\n\t\t\tG[i].push_back(i + j); //\u6807\u8bb0\u76f8\u8fde\n\t\t}\n\t}\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tans = depth = 0;//\u521d\u59cb\u5316\n\t\tmemset(path, 0, sizeof(path));\n\t\tmemset(vis, 0, sizeof(vis));\n\t\tdfs(i); //\u8bbf\u95ee\n\t\tfor(int i=0; i<=depth; i++)\n\t\t\tans += a[path[i]];\n\t\tif(ans > max1) //\u5f53\u524d\u66f4\u4f18\n\t\t{\n\t\t\tmax1 = ans;\n\t\t\tfinal = depth;\n\t\t\tfor(int i=0; i<=depth; i++)\n\t\t\tf[i] = path[i];\n\t\t}\n\t}\n\tfor(int i=0; i<=final; i++)\n\t{\n\t\tcout << f[i] << \" \";\n\t}\n\tcout << endl << max1;\n\treturn 0;\n} \n```\n\n\n------------\n## \u8bf7\u5404\u4f4d\u5927\u4f6c\u6307\u51fa\u672c\u849f\u84bb\u4ee3\u7801\u4e2d\u7684~~\uff08\u592a\u591a\u7684\uff09~~\u4e0d\u8db3\uff0c\u4ee5\u4fbf\u6539\u6b63\uff0c\u8c22\u8c22\uff01\uff01\uff01",
        "postTime": 1540907358,
        "uid": 106594,
        "name": "My_Newstart",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "## DFS\u7b97\u6cd5 0ms ##\n\u505a\u6cd5\uff1a\u66b4\u529b\u679a\u4e3e\u6bcf\u4e2a\u70b9\u662f\u5426\u8d70\u8fc7\uff0c\u82e5\u8d70\u8fc7\u5219\u4e0d\u7528\u8d70\u3002\n     \n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nint f[22],n,ans=0,b[22],v[22][22],ls[22],len=1;\nbool go[22];//\u662f\u5426\u8d70\u8fc7\nvoid dfs(int now,int quan,int pan,int ff)\n{\n    for (int i=1; i<=n; i++)\n    if (!v[now][i]||!go[i]) pan++;//\u5224\u65ad\u6709\u65e0\u5176\u4ed6\u8def\u5f84\u53ef\u8d70\n    if (pan==n)\n    {\n        if (ans<quan)\n        {\n            memset(b,0,sizeof(b));\n            for (int i=1; i<=len; i++)\n            b[i]=ls[i];\n            ans=quan;\n        }\n        return ;\n    }\n    pan=0;\n    for (int i=1; i<=n; i++)\n    {\n        if (i==ff) continue;//\u81ea\u5df1\u4e0d\u7528\u641c\uff0c\u526a\u679d\n        if (v[now][i] && go[i])\n        {\n            go[i]=false;\n            quan+=f[i];\n            ++len;\n            ls[len]=i;\n            dfs(i,quan,pan,ff);\n            quan-=f[i];\n            ls[i]=0;\n            len--;\n            go[i]=true;\u3001//\u56de\u6eaf\n        }\n    }\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for (int i=1; i<=n; i++) scanf(\"%d\",&f[i]);\n    for (int i=1; i<=n-1; i++)\n    {\n        for (int j=i+1; j<=n; j++)\n        {\n            int x;\n            scanf(\"%d\",&x);\n            if (x==1)\n            {\n                v[i][j]=1;\n            }\n        }\n    }\n    for (int k=1; k<=n; k++)\n memset(go,true,sizeof(go)),go[k]=false,ls[1]=k,dfs(k,f[k],0,k);\u6bcf\u6b21\u8bb0\u5f97\u6e05\u96f6\n    for (int i=1; i; i++)\n    {\n        if (b[i]==0) break;//\u8f93\u51fa\u975e\u96f6\u7684\u8def\u5f84\uff0c\u9047\u5230\u96f6\u9000\u51fa\u5f53\u524d\u5faa\u73af\uff01\n        else printf(\"%d \",b[i]);\n    }\n    printf(\"\\n\");\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n\u4e2a\u4eba\u5efa\u8bae\uff1a\u6570\u636e\u5927\u4e0d\u80fd\u7528\u6b64\u65b9\u6cd5\uff08\u9664\u975e\u4f60\u662f\u526a\u679d\u5de8\u4f6c%%%%%%\uff09",
        "postTime": 1531140811,
        "uid": 45370,
        "name": "kangli",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2196"
    },
    {
        "content": "\u6211\u7ffb\u4e86\u4e00\u4e0b\uff0c\u697c\u4e0b\u7684\u4f17\u4f4d\u5927\u4f6c\u90fd\u662f\u7528dp\u6765\u5199\uff0c\u6211\u8fd9\u91cc\u63a8\u8350\u4e00\u4e2a\u6700\u957f\u8def\u7684\u5199\u6cd5\uff0c~~\u867d\u7136\u672c\u8d28\u4e5f\u662fdp\u8c8c\u4f3c~~\n\n\u628a\u6bcf\u4e2a\u70b9\u7684\u70b9\u6743\u4f5c\u4e3a\u5b83\u5165\u8fb9\u7684\u8fb9\u6743\uff0c\u7136\u540e\u4e00\u5f00\u59cb\u628a\u6240\u6709\u70b9\u90fd\u52a0\u5165\u5230\u961f\u5217\u91cc\uff0c\u7531\u4e8e\u5b83\u8fd9\u4e2a\u56fe\u662f\u4e2adag\uff0c\u6240\u4ee5\u5e94\u8be5\u662f\u5bf9\u7684\uff0c\u8fd9\u6837\u6700\u540e\u88f8\u5730spfa\u627e\u5230\u6700\u957f\u8def\u5728\u628a\u8def\u5f84\u8f93\u51fa\u6765\u5c31\u884c\u5566\uff0c\u6ce8\u610fdis[i]\u521d\u503c\u4e3adata[i].\n\n```cpp\n// luogu-judger-enable-o2\n#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#define LL long long\n#define N (100001)\nusing namespace std;\ntemplate <typename T> void read(T&t) {\n\tt=0;\n\tbool fl=true;\n\tchar p=getchar();\n\twhile (!isdigit(p)) {\n\t\tif (p=='-') fl=false;\n\t\tp=getchar();\n\t}\n\tdo {\n\t\t(t*=10)+=p-48;p=getchar();\n\t}while (isdigit(p));\n\tif (!fl) t=-t;\n}\nint n,t,h,ans,k,top,now;\nint data[N],q[N],a[N],b[N],nxt[N],head[N],dis[N],fro[N],st[N];\nbool vis[N];\ninline void add(int x,int y,int z){\n\ta[++k]=y,b[k]=z,nxt[k]=head[x],head[x]=k;\n}\nint main(){\n\tread(n);\n\tfor (int i=1;i<=n;i++){\n\t\tread(dis[i]);\n\t}\n\tfor (int i=1;i<n;i++){\n\t\tfor (int j=i+1;j<=n;j++){\n\t\t\tint x;\n\t\t\tread(x);\n\t\t\tif (x==1){\n\t\t\t\tadd(i,j,dis[j]);\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i=1;i<=n;i++){\n\t\tq[++t]=i;\n\t}\n\twhile (h<t){\n\t\tint u=q[++h];\n\t\tfor (int p=head[u];p;p=nxt[p]){\n\t\t\tif (dis[u]+b[p]>dis[a[p]]){\n\t\t\t\tdis[a[p]]=dis[u]+b[p];\n\t\t\t\tfro[a[p]]=u;\n\t\t\t\tif (!vis[a[p]]){\n\t\t\t\t\tvis[a[p]]=1;\n\t\t\t\t\tq[++t]=a[p];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvis[u]=0;\n\t}\n\tfor (int i=1;i<=n;i++) if(dis[i]>dis[ans]) ans=i;\n\tst[++top]=ans;\n\tnow=ans;\n\twhile (fro[now]!=0){\n\t\tst[++top]=fro[now];\n\t\tnow=fro[now];\n\t}\n\twhile (top) printf(\"%d \",st[top--]);\n\tputs(\"\");\n\tprintf(\"%d\",dis[ans]);\n\treturn 0;\n}\n\n```",
        "postTime": 1517831584,
        "uid": 15232,
        "name": "Michael_Li",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "## \u5206\u6790 ##\n\n\u8fd9\u9053\u9898\u76ee\u6709\u4e9b\u56fe\u8bba\u7684\u5473\u9053\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u5730\u7a96\u5b83\u662f\u9009\u62e9\u6027\u8fde\u901a\u7684\uff0c\u6211\u5c31\u7528f[i][j]\u6765\u8bbe\u7f6e\u4e00\u4e2a\u90bb\u63a5\u77e9\u9635\u3002\u5bf9\u4e8ea\u6570\u7ec4\uff0c\u6211\u4eec\u8981\u5b58\u4e09\u4e2a\u53c2\u6570a[i][1]\u6765\u5b58\u50a8\u5f53\u524d\u5730\u7a96\u6709\u591a\u5c11\u4e2a\u5730\u96f7\uff0ca[i][2]\u6765\u5b58\u50a8\u901a\u8fc7\u8fd9\u4e2a\u5730\u7a96\u6700\u591a\u53ef\u4ee5\u6316\u5230\u591a\u5c11\u4e2a\u5730\u96f7\uff0ca[i][3]\u6765\u5b58\u50a8\uff0c\u5982\u679c\u8981\u6316\u5230\u6700\u591a\u7684\u5730\u96f7\uff0c\u6211\u4eec\u7ecf\u8fc7\u8fd9\u4e2a\u5730\u7a96\u4e4b\u540e\u8981\u53bb\u54ea\u4e2a\u5730\u7a96\u3002\u90a3\u4e48\u8fd9\u9053\u9898\u76ee\u5c31\u8ddf\u6700\u957f\u4e0d\u4e0b\u964d\u5e8f\u5217\u6709\u70b9\u50cf\u4e86\u3002\u4e0b\u9762\u4e0a\u4ee3\u7801\n\n\n\u4ee3\u7801\n--\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint main()\n{\n    bool f[210][210];//\u90bb\u63a5\u77e9\u9635\n    int a[210][4],n;//a\u6570\u7ec4\u4e0a\u9762\u6709\u4ecb\u7ecd\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d\",&a[i][1]);//\u8bfb\u5165\u5730\u96f7\u6570\u91cf\n        a[i][2]=a[i][1];//\u9ed8\u8ba4\u6700\u957f\u548c\u662f\u81ea\u8eab\n        a[i][3]=0;//\u540e\u7ee7\u662f0\u4ee3\u8868\u7ed3\u675f\u4e86\u3002\n    }\n    for(int i=0;i<=209;i++)\n    for(int j=0;j<=209;j++)\n    f[i][j]=false;//\u90bb\u63a5\u77e9\u9635\u7684\u521d\u59cb\u5316\uff0c\u9ed8\u8ba4\u90fd\u4e0d\u80fd\u901a\n    int x=0;\n    for(int i=1;i<=n-1;i++)\n    for(int j=i+1;j<=n;j++)\n    {\n        cin>>x;\n        if(x==1) f[i][j]=true;//\u5728\u56fe\u4e2d\u9020\u8def\uff0c\u6ce8\u610f\u662f\u6709\u5411\u56fe\n    }\n    \n    for(int i=n-1;i>=1;i--)\n    {\n        int maxbomb=0,nexthole=0;//maxbomb\u4ee3\u8868\u5f53\u524d\u8fd9\u4e2a\u5730\u7a96\u8fc7\u53bb\u4ee5\u540e\u53ef\u4ee5\u6316\u6389\u591a\u5c11\u5730\u96f7\uff0cnexthole\u4ee3\u8868\u8981\u6316\u5230\u6700\u591a\u7684\u5730\u96f7\uff0c\u63a5\u4e0b\u6765\u5e94\u8be5\u53bb\u54ea\u91cc\n        for(int j=i+1;j<=n;j++)\n        if((a[j][2]>maxbomb)&&(f[i][j]))//\u5982\u679c\u80fd\u6316\u5230\u7684\u5730\u96f7\u591a\u4e8e\u5f53\u524d\u8bb0\u5f55\u7684\uff0c\u5e76\u4e14ij\u4e4b\u95f4\u6709\u901a\u8def\n        {\n            maxbomb=a[j][2];\n            nexthole=j;//\u66f4\u65b0\u7d2f\u52a0\u548c\u4e0e\u6807\u8bb0\n        }\n        if(nexthole>0)//\u5982\u679c\u66f4\u6539\u8fc7\n        {\n            a[i][2]=a[nexthole][2]+a[i][1];//\u90a3\u4e48\u5c31\u628a\u7d2f\u52a0\u548c\u8bb0\u5f55\u8fdb\u53bb\n            a[i][3]=nexthole;//\u66f4\u65b0\u5f53\u524d\u7ed3\u70b9\u7684\u540e\u7ee7\n        }\n    }\n    int ans=0;\n    int firsthole=0;\n    for(int i=1;i<=n;i++)\n    if(a[i][2]>ans)\n    {\n        ans=a[i][2];\n        firsthole=i;\n    }//\u6765\u5bfb\u627e\u8981\u6316\u5230\u6700\u591a\u7684\u5730\u96f7\uff0c\u7b2c\u4e00\u4e2a\u5bf9\u54ea\u4e2a\u5730\u7a96\u4e0b\u624b\u3002\n    while(firsthole>0)//\u8fd9\u91cc\u8ddf\u94fe\u8868\u7684\u904d\u5386\u6709\u70b9\u50cf\u3002\u771f\u7684\u592a\u50cf\u4e86\n    {\n        printf(\"%d \",firsthole);//\u6253\u5370\u8def\u5f84\n        firsthole=a[firsthole][3];//\u540e\u7ee7\n    }//\u5982\u679c\u662f0\uff0c\u5c31\u4ee3\u8868\u6ca1\u6709\u540e\u7ee7\u4e86\n    printf(\"\\n%d\",ans);//\u628a\u8def\u5f84\u957f\u5ea6\u6253\u5370\u51fa\u6765\n    return 0;\n}\n```",
        "postTime": 1506490269,
        "uid": 24081,
        "name": "Hydra_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u53d1\u4e00\u53d1\u6bd4\u8f83\u66b4\u529b\u7684\u9898\u89e3\uff0c\u6570\u636e200\u5c31\u8d85\u65f6orz\u3002\u3002\u3002\n\n\u6211\u4e5f\u6ca1\u6709\u8003\u8651\u5b57\u5178\u5e8f\u8f93\u51fa\u6700\u5c0f\n\n\u5148\u4ece\u6bcf\u4e2a\u5165\u5ea6\u4e3a1\u7684\u8282\u70b9\u66b4\u529bdfs\uff0c\u641c\u7d22dp\u503c\u5e76\u66f4\u65b0\n\n\u7136\u540e\u4ecedp\u503c\u6700\u5927\u7684\u90a3\u4e2a\u5f80\u56de\u641c\n\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<cstdio>\n#include<queue>\n#include<map>\n#define N 1000\nusing namespace std;\nint n;\nint hea[N],nex[N],to[N],val[N];\nint hea1[N],nex1[N],to1[N];\nint dp[N];\nint zr[N];\nint st[N];\nint zhan[N];\nint head;\nvoid dfs(int now,int pre)\n{\n    dp[now]=max(dp[now],val[now]);\n    if(to[hea[now]]==pre&&!nex[hea[now]]) {\n        return ;\n    }\n    for(int i=hea[now];i;i=nex[i]){\n        int j=to[i];\n        if(j!=pre){\n            dp[j]=max(dp[j],dp[now]+val[j]);\n            dfs(j,now);\n        }\n    }\n}\nvoid dfs1(int now ,int pre)\n{\n    if(to1[hea1[now]]==pre&&!nex1[hea1[now]]) {\n        return ;\n    }\n    for(int i=hea1[now];i;i=nex1[i]){\n        int j=to1[i];\n        if(j!=pre&&dp[j]==dp[now]-val[now]){\n            zhan[++head]=j;\n            dfs1(j,now);\n        }\n    }\n}\nint main()\n{\n    int vis=0;\n    int gg=0;\n    cin>>n;\n    for(int i=1;i<=n;i++) scanf(\"%d\",&val[i]);\n    for(int i=1;i<n;i++){\n        for(int j=i+1;j<=n;j++){\n            int x;\n            scanf(\"%d\",&x);\n            if(x==1){\n                to[++vis]=j,nex[vis]=hea[i],hea[i]=vis;\n                to1[vis]=i,nex1[vis]=hea1[j],hea1[j]=vis;\n            }\n        }\n    }\n    for(int i=1;i<=n;i++) if(!zr[i]) st[++gg]=i;\n    for(int i=1;i<=gg;i++){\n        dfs(st[i],0);\n    }\n    int maxn=0;\n    for(int i=1;i<=n;i++) if(dp[i]>maxn)maxn=max(maxn,dp[i]),gg=i;\n    zhan[++head]=gg;\n    dfs1(gg,0);\n    cout<<zhan[head--];\n    while(head>0) printf(\" %d\",zhan[head--]);\n    cout<<endl;\n    cout<<maxn<<endl;\n    return 0;\n}\n\n```",
        "postTime": 1504768102,
        "uid": 38442,
        "name": "\u77f3\u69b4",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "a\u662f\u539f\u59cb\u6570\u636e\uff0cw\u662f\u6700\u4f18\uff0cc\u5b58\u7684\u662f\u524d\u9a71\u8282\u70b9\uff0cd\u662f\u6253\u5370\uff0ct\u662f\u7ec4\u53f7\n\n```cpp\n(#include<iostream>  \nusing namespace std;  \nint a[30],w[30],c[30],d[30],t=1,n;  \nbool sf[30][30];  \nvoid search(int x)  \n{  \n    if(c[x]==0) return;  \n    int y=c[x];  \n    d[t++]=y;  \n    search(c[x]);  \n}  \nint main()  \n{  \n    cin>>n;int max;  \n    for(int i=1;i<=n;++i) cin>>a[i];  \n    for(int i=1;i<n;++i) for(int j=i+1;j<=n;++j) cin>>sf[i][j];  \n    w[n]=a[n];  \n    for(int i=n-1;i>=1;--i)  \n    {  \n        max=0;  \n        for(int j=n;j>=i+1;j--)  \n        {  \n            if(max<w[j]&&sf[i][j]) {max=w[j];c[i]=j;}  \n        }  \n        w[i]=a[i]+max;  \n    }  \n    max=0;int b,c;  \n    for(int i=1;i<=n;++i)  \n        if(w[i]>max) {max=w[i];b=i;}  \n    d[0]=b;  \n    search(b);  \n    for(int i=0;i<t;++i) cout<<d[i]<<\" \";  \n    cout<<endl;  \n    cout<<max;  \n})\n```\uff08c/c++\uff09\n",
        "postTime": 1460106406,
        "uid": 11321,
        "name": "2015wangpengshu",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u672c\u9898\u7684\u6570\u636e\u771f\u7684\u662f\u6c34\u4e0a\u52a0\u6c34\u3002\u3002\u3002\u539f\u6765\u672c\u849f\u84bb\u6253\u7b97\u5148\u5199DFS\u7136\u540e\u6539\u6210\u8bb0\u5fc6\u5316\uff0c\u7ec3\u7ec3\u624b\uff0c\u7ed3\u679c\u3002\u3002\u3002\u76f4\u63a5DFS\uff0c\u6ca1\u6709\u4efb\u4f55\u4f18\u5316\u7eaf\u66b4\u529b\u5c31\u8fd9\u4e48\u8fc7\u4e86\u3002\u6ca1\u6709\u4efb\u4f55\u8981\u8bf4\u660e\u7684\u5730\u65b9\uff0c\u76f4\u63a5\u4e0a\u4ee3\u7801\uff0c\u76f8\u4fe1\u5b66\u4e09\u4e2a\u6708C\u8bed\u8a00\u7684\u8fd9\u4e2a\u4ee3\u7801\u90fd\u770b\u5f97\u61c2\u3002\u7f29\u8fdb\u592a\u5dee\uff0c\u6211\u8fd8\u662f\u89e3\u91ca\u4e00\u4e0b\u5427\n\n```\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\nint N,num[25],edge[30][30],ans[10005],ans1=0,ce[10005],end=0;\nusing namespace std;\nint pan(int k)//\u5224\u65ad\u6709\u6ca1\u6709\u53ef\u4ee5\u6316\u7684\u96f7\u4e86\n{\nfor(int a=k+1;a<N;a++)\nif(edge[k][a]==1)\nreturn 0;\nreturn 1;\n}\nint DFS(int n,int m,int sum)\n{\nif(pan(n))\n{\nif(sum+num[n]>ans1)//\u6bd4\u5f53\u524d\u66f4\u4f18\uff0c\u66f4\u65b0\n{\nfor(int a=0;a<m;a++)\nans[a]=ce[a];\nans[m]=n;\nans1=sum+num[n];\nend=m;\n}\nreturn 0;\n}\nint a;\nfor(a=n+1;a<N;a++)\n{\nif(edge[n][a]==1)//\u679a\u4e3e\u6bcf\u4e00\u6761\u53ef\u8d70\u7684\u8fb9\n{\nce[m]=n;\nDFS(a,m+1,sum+num[n]);\nce[m]=0;\n}\n}\n}\nint main ()\n{\nscanf(\"%d\",&N);\nfor(int a=0;a<N;a++)\nscanf(\"%d\",&num[a]);\nfor(int a=0;a<N-1;a++)\nfor(int b=a+1;b<N;b++)\nscanf(\"%d\",&edge[a][b]);\nfor(int a=0;a<N-1;a++)//\u4e00\u4e2a\u5c0f\u5751\uff0c\u53ef\u4ee5\u4ece\u4efb\u610f\u4e00\u4e2a\u70b9\u51fa\u53d1\u3002\u6211\u7b2c\u4e00\u904d\u6ca1\u6ce8\u610f\uff0c\u53ea\u4ece1\u51fa\u53d1\uff0c\u7ed3\u679c\u8fd8\u670940\u5206\u3002\u53ef\u89c1\u6570\u636e\u4e4b\u6c34\nDFS(a,0,0);\nfor(int a=0;a<=end;a++)\nprintf(\"%d \",ans[a]+1);\nprintf(\"\\n\");\nprintf(\"%d\",ans1);\nreturn 0;\n}\n\n```",
        "postTime": 1534666244,
        "uid": 55690,
        "name": "Jigsaw_Killer",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    },
    {
        "content": "\u3010\u7b97\u6cd5\u5206\u6790\u3011\n\n\u672c\u9898\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u52a8\u6001\u89c4\u5212\u95ee\u9898\u3002\u5f88\u660e\u663e\uff0c\u9898\u76ee\u89c4\u5b9a\u6240\u6709\u8def\u5f84\u90fd\u662f\u5355\u5411\u7684\uff0c\u6240\u4ee5\u6ee1\u8db3\u65e0\u540e\u6548\u6027\u539f\u5219\u548c\u6700\u4f18\u5316\u539f\u7406\u3002\u8bbeW[i]\u4e3a\u7b2ci\u4e2a\u5730\u7a96\u6240\u85cf\u6709\u7684\u5730\u96f7\u6570\uff0cA[i][j]\u8868\u793a\u7b2ci\u4e2a\u5730\u7a96\u4e0e\u7b2cj\u4e2a\u5730\u7a96\u4e4b\u95f4\u662f\u5426\u6709\u901a\u8def\uff0cF[i]\u4e3a\u4ece\u7b2ci\u4e2a\u5730\u7a96\u5f00\u59cb\u6700\u591a\u53ef\u4ee5\u6316\u51fa\u7684\u5730\u96f7\u6570\uff0c\u5219\u6709\u5982\u4e0b\u9012\u5f52\u5f0f\uff1a\n\nF[i]=max{ W[i]+ F[j]}               (i<j<=n , A[i][j]=true)\n\n\u8fb9\u754c\uff1aF[n]=W[n]\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u901a\u8fc7\u9012\u63a8\u7684\u65b9\u6cd5\uff0c\u4ece\u540eF(n)\u5f80\u524d\u9010\u4e2a\u627e\u51fa\u6240\u6709\u7684F[i]\uff0c\u518d\u4ece\u4e2d\u627e\u4e00\u4e2a\u6700\u5927\u7684\u5373\u4e3a\u95ee\u98982\u7684\u89e3\u3002\u5bf9\u4e8e\u5177\u4f53\u6240\u8d70\u7684\u8def\u5f84\uff08\u95ee\u98981\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u5411\u540e\u7684\u94fe\u63a5\u6765\u5b9e\u73b0\u3002\n\n\u3010\u53c2\u8003\u7a0b\u5e8f\u3011\n\n        \n\n```cpp\n#include<iostream>\n#include<cstring>\nusing namespace std;\nint main()\n{\n   long f[201]={0},w[201],c[201]={0};\n   bool a[201][201]={0};\n   long i,j,n,x,y,l,k,maxx;\n   memset(f,0,sizeof(f));\nmemset(c,0,sizeof(c));\n   memset(a,false,sizeof(a));\n   cin>>n;\n   for (i=1;i<=n;i++)\n     cin>>w[i];                                //\u8f93\u5165\u6bcf\u4e2a\u5730\u7a96\u4e2d\u7684\u5730\u96f7\u6570\n   do\n    {\n      cin>>x>>y;                               //\u8868\u793a\u4eceX\u53ef\u5230Y\n      if ((x!=0)&&(y!=0)) a[x][y]=true;\n    }while ((x!=0)||(y!=0));\n    f[n]=w[n];                                 //\u4ece\u540eF[n]\u5f80\u524d\u9010\u4e2a\u627e\u51fa\u6240\u6709\u7684F[i]\n    for (i=n-1;i>=1;i--)\n     {\n      l=0;k=0;\n      for (j=i+1;j<=n;j++)\n       if ((a[i][j])&&(f[j]>l))\n         { l=f[j]; k=j; }\n      f[i]=l+w[i];                             //\u4fdd\u5b58\u4ece\u7b2ci\u4e2a\u5730\u7a96\u8d77\u80fd\u6316\u5230\u6700\u5927\u5730\u96f7\u6570\n      c[i]=k;                                  //k\u5730\u7a96\u662fi\u5730\u7a96\u6700\u4f18\u8def\u5f84\n     }\n     k=1;\n     for (j=2;j<=n;j++)                        //\u8ba1\u7b97\u6700\u591a\u6316\u51fa\u7684\u5730\u96f7\u6570\n      if (f[j]>f[k]) k=j;\n     maxx=f[k];\n     cout<<k;\n     k=c[k];\n     while (k!=0)                              //\u8f93\u51fa\u6316\u5730\u96f7\u7684\u987a\u5e8f\n      {\n        cout<<\"-\"<<k;\n        k=c[k];\n      } \n     cout<<endl;\n     cout<<maxx<<endl;                          //\u8f93\u51fa\u6700\u591a\u6316\u51fa\u7684\u5730\u96f7\u6570\n}\n\n```",
        "postTime": 1509199281,
        "uid": 53405,
        "name": "yangshirui",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2196 \u3010\u6316\u5730\u96f7\u3011"
    }
]
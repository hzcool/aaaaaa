[
    {
        "content": "## \u9898\u610f\n\u5728 $n\\times m$ \u7684\u7f51\u683c\u56fe\u4e2d\uff0c\u6c42\u51fa\u539f\u70b9\u5230\u76ee\u6807\u70b9\u7684\u6700\u77ed\u8def\u3002\u5e76\u4e14\u53ef\u4ee5\u53d1\u9001\u4f20\u9001\u95e8\u3002[QWQ](https://www.luogu.com.cn/blog/xzc/solution-p6742)\n\n- \u4f20\u9001\u95e8\uff1a\u5f53\u6709\u4e24\u4e2a\u4f20\u9001\u95e8\u540c\u65f6\u5b58\u5728\u65f6\uff0c\u4f60\u53ef\u4ee5\u8fdb\u5165\u8fd9\u4e2a\u4f20\u9001\u95e8\u5e76\u5230\u8fbe\u53e6\u4e00\u4e2a\u4f20\u9001\u95e8\u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a\u6b21\u3002\n## \u5206\u6790\n\u9898\u76ee\u8bfb\u61c2\u4e86\u5c31\u5f88\u7b80\u5355\u4e86\u3002\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u6765\u8bf4\uff0c\u5b83\u53ea\u6709\u4e24\u79cd\u79fb\u52a8\u65b9\u5f0f\u3002\n\n- \u76f4\u63a5\u8d70\u4e00\u683c\uff0c\u82b1\u8d39\u4e3a $1$ \u3002\n\n- \u8d70\u5230\u6700\u8fd1\u7684\u4e00\u9762\u5899\u4e0a\uff0c\u5f00\u95e8\u3002\u53ef\u4ee5\u8bc1\u660e\u5982\u679c\u8981\u7528\u4f20\u9001\u95e8\u8d70\u6700\u8fd1\u7684\u5899\u662f\u6700\u4f18\u7684\u3002\n\n\u73b0\u5728\u5c31\u53ea\u9700\u8981\u9884\u5904\u7406\u4e00\u4e2a\u70b9\u5411\u56db\u4e2a\u65b9\u5411\u53ef\u4ee5\u5230\u8fbe\u54ea\u4e9b\u5899\u4e86\u3002\u90a3\u4e48\u8fd9\u9053\u9898\u5c31\u8f6c\u5316\u4e3a\u4e00\u9053\u6700\u77ed\u8def\u7684\u6a21\u677f\u9898\u4e86\u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N = 2010;\nint cnt=1,n,m,dx[4]={0,0,-1,1},S,T,dy[4]={1,-1,0,0},dis[N*N],vis[N*N],head[N*N];\nstruct Edge{int to,w,nxt;}e[N*N<<2];\nstruct node{int x,y;}end[N][N][4];\nstruct Node{int pos,dis; \n\tbool operator <(const Node a)const {\n\t\treturn dis > a.dis;\n\t}\n};\npriority_queue<Node> heap;\nchar Map[N][N];\nint id(int x,int y){\n\treturn (x-1)*m+y;\n}\nvoid add(int x,int y,int w){\n\te[++cnt].to = y;e[cnt].nxt = head[x];e[cnt].w = w;head[x] = cnt;\n}\nnode make(int x,int y,int k){\n\tif(end[x][y][k].x!=0&&end[x][y][k].y!=0) return end[x][y][k];\n\tint X = x + dx[k],Y = y + dy[k];\n\tif(X>n||Y>m||X<1||Y<1||Map[X][Y] == '#') end[x][y][k] = (node){x,y};\n\telse end[x][y][k] = make(X,Y,k);\n\treturn end[x][y][k];\n}\nvoid Dij(int s,int t){\n\tmemset(dis,0x3f,sizeof(dis));\n\theap.push((Node){s,dis[s]=0});\n\twhile(heap.size()){\n\t\tint x = heap.top().pos;heap.pop();\n\t\tif(vis[x]) continue;\n\t\tvis[x] = 1;\n\t\tfor(int i = head[x];i;i = e[i].nxt){\n\t\t\tint y = e[i].to;\n\t\t\tif(dis[y]>dis[x]+e[i].w){\n\t\t\t\tdis[y] = dis[x]+e[i].w;\n\t\t\t\theap.push((Node){y,dis[y]});\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i = 1;i <= n;i++){\n\t\tfor(int j = 1;j <= m;j++)\n\t\t{\n\t\t\tcin>>Map[i][j];\n\t\t\tif(Map[i][j] == 'S') S = id(i,j);\n\t\t\tif(Map[i][j] == 'C') T = id(i,j);\n\t\t}\n\t}\n\tfor(int i = 1;i <= n;i++){\n\t\tfor(int j = 1;j <= m;j++){\n\t\t\tif(Map[i][j] == '#') continue;\n\t\t\tfor(int k = 0;k < 4;k++){\n\t\t\t\tint x = dx[k] + i,y = dy[k] + j;\n\t\t\t\tif(x>n||y>m||x<1||y<1||Map[x][y]=='#') continue;\n\t\t\t\tadd(id(i,j),id(x,y),1);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i = 1;i <= n;i++){\n\t\tfor(int j = 1;j <= m;j++){\n\t\t\tfor(int k = 0;k < 4;k++){\n\t\t\t\tend[i][j][k] = make(i,j,k);\n\t\t\t}\n\t\t\tint Min = 0x3f3f3f3f;\n\t\t\tfor(int k = 0;k < 4;k++)\n\t\t\tMin = min(Min,abs(i-end[i][j][k].x)+abs(j-end[i][j][k].y)+1);\n\t\t\tfor(int k = 0;k < 4;k++)\n\t\t\tadd(id(i,j),id(end[i][j][k].x,end[i][j][k].y),Min);\n\t\t}\n\t}\n\tDij(S,T);\n\tcout<<dis[T]<<endl;\n\treturn 0;\n}\n/*\n5 7\nS.#....\n.#..##.\n.......\n#.#...#\n.#C.##.\n*/\n```\n",
        "postTime": 1596854254,
        "uid": 227824,
        "name": "JK_LOVER",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6742 \u3010[BalticOI 2014 Day2] Portals\u3011"
    }
]
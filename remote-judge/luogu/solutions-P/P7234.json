[
    {
        "content": "\u9996\u5148\u8003\u8651\u5982\u4f55\u533a\u5206\u4e24\u4e2a\u4eba\uff08\u5047\u8bbe\u53ea\u6709\u4e24\u4e2a\u4eba\uff09\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u4efb\u610f\u4e24\u4e2a\u4eba $x,y$\uff0c\u5982\u679c\u4ed6\u4eec\u53c2\u52a0\u7684\u8868\u6f14\u96c6\u5408\u4e0d\u540c\uff08\u5373\u81f3\u5c11\u6709\u4e00\u5929 $x$ \u4e0a\u573a\u4e86\u4f46\u662f $y$ \u6ca1\u4e0a\u573a\uff0c\u6216\u8005 $y$ \u4e0a\u573a\u4e86\u4f46\u662f $x$ \u6ca1\u4e0a\u573a\uff09\uff0c\u5c31\u53ef\u4ee5\u533a\u5206 $x,y$\u3002\n\n\u8fd9\u542f\u53d1\u6211\u4eec\u53ef\u4ee5\u7ef4\u62a4\u82e5\u5e72\u4e2a\u96c6\u5408\uff0c\u6bcf\u4e2a\u96c6\u5408\u4e2d\u7684\u4eba\u53c2\u52a0\u7684\u8868\u6f14\u96c6\u5408\u76f8\u540c\u3002\n\n\u5982\u679c\u4e00\u4e2a\u96c6\u5408\u5927\u5c0f\u4e3a $1$\uff0c\u6b64\u65f6\u6211\u4eec\u5c31\u80fd\u8ba4\u51fa\u8fd9\u4e2a\u4eba\uff08\u4f60\u53ef\u4ee5\u540c\u65f6\u5bf9\u7167\u7247\u548c\u59d3\u540d\u7ef4\u62a4\u4e0a\u6587\u6240\u8ff0\u96c6\u5408\uff0c\u4f60\u53d1\u73b0\u8fd9\u4e2a\u65f6\u5019\u53ea\u6709\u4e00\u5f20\u7167\u7247\u80fd\u4e0e\u8fd9\u4e2a\u59d3\u540d\u5728\u8868\u6f14\u96c6\u5408\u4e0a\u5339\u914d\uff0c\u7136\u540e\u4f60\u5c31\u80fd\u8ba4\u51fa\u4ed6\uff0c\u4f46\u662f\u7ef4\u62a4\u7684\u65f6\u5019\u663e\u7136\u4e0d\u9700\u8981\u7ef4\u62a4\u4e24\u4e2a\uff0c\u4ec5\u4f9b\u7406\u89e3\uff09\u3002\n\n--------\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u7ef4\u62a4\u4e0a\u6587\u6240\u8ff0\u96c6\u5408\u3002\n\n\u9996\u5148\uff0c\u4f60\u65e0\u9700\u7ef4\u62a4\u53c2\u52a0\u7684\u8868\u6f14\u96c6\u5408\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\u6709\u54ea\u4e9b\uff08\u4eba\u7684\uff09\u96c6\u5408\uff0c\u800c\u4e0d\u9700\u77e5\u9053\u4ed6\u4eec\u53c2\u52a0\u8fc7\u90a3\u4e9b\u8868\u6f14\u3002\n\n\u8fd9\u6837\u521d\u59cb\u65f6\u6240\u6709\u4eba\u90fd\u5728\u96c6\u5408 $0$ \u4e2d\u3002\n\n\u6bcf\u8fdb\u884c\u4e00\u573a\u8868\u6f14\uff0c\u5c31\u76f8\u5f53\u4e8e\u66f4\u6539\u4e00\u4e9b\u4eba\u7684\u8868\u6f14\u96c6\u5408\uff0c\u6b64\u65f6\u6709\u4e9b\u96c6\u5408\u4f1a\u5206\u88c2\uff0c\u6ce8\u610f\u5230\u5206\u88c2\u7684\u65f6\u5019\u53ea\u4f1a\u5206\u88c2\u53c2\u52a0\u8fd9\u573a\u8868\u6f14\u7684\u4eba\u3002\n\n\u4e8e\u662f\u5bf9\u4e8e\u6bcf\u573a\u8868\u6f14\uff0c\u5728\u53c2\u6f14\u4eba\u5458\u4e2d\u627e\u5230\u5728\u540c\u4e00\u4e2a\u96c6\u5408\u91cc\u7684\uff0c\u76f4\u63a5\u5206\u88c2\u6210\u4e00\u4e2a\u65b0\u96c6\u5408\uff0c\u8003\u8651\u5230\u6b64\u65f6\u53ea\u6709\u539f\u96c6\u5408\u4ee5\u53ca\u65b0\u96c6\u5408\u7684\u5927\u5c0f\u53ef\u80fd\u4e3a $1$\uff0c\u66b4\u529b\u68c0\u67e5\u5c31\u884c\u3002\n\n\u6ce8\u610f\u5230\u5206\u88c2\u51fa\u4e00\u4e2a\u65b0\u96c6\u5408\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\u4eba\u53c2\u52a0\u8868\u6f14\uff0c\u6240\u4ee5\u96c6\u5408\u6570\u76ee\u81f3\u591a\u4e3a $\\sum k$\u3002\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a\u4e00\u573a\u8868\u6f14\u7684\u590d\u6742\u5ea6\u964d\u5230 $O(k \\log k)$\uff0c\u5e26 $\\log$ \u662f\u56e0\u4e3a\u627e\u76f8\u540c\u96c6\u5408\u7684\u4eba\u7684\u65f6\u5019\u7528\u4e86 $\\text{sort}$ \u5b9e\u73b0\u3002\n\n\u5177\u4f53\u7ec6\u8282\u53ef\u4ee5\u770b\u4ee3\u7801\u3002\n\n--------\n\n**Code**:\n\n```\n\nint n,m,k;\nint tag[100005],xorsum[200005],num[200005],cnttag;\n// tag \u8868\u793a\u8fd9\u4e2a\u4eba\u5728\u54ea\u4e2a\u96c6\u5408\n// xorsum \u662f\u4e00\u4e2a\u96c6\u5408\u91cc\u6240\u6709\u4eba\u7f16\u53f7\u7684\u5f02\u6216\u548c\uff0c\u7528\u4e8e\u5728\u96c6\u5408\u5927\u5c0f\u4e3a 1 \u7684\u65f6\u5019\u627e\u5230\u8fd9\u4e2a\u4eba\u3002\nint Ans[100005];\npii tmp[100005]; int cnt;\nint checklist[100005],cntchecklist;\nsigned main() {\n\tn=read(); m=read(); tmp[0]=make_pair(-1,-1);\n    for(int i=1; i<=n; ++i) xorsum[0]^=i; num[0]=n;\n    for(int T=1; T<=m; ++T) {\n        k=read(); cnt=0; cntchecklist=0;\n        for(int i=1,x; i<=k; ++i) {\n            x=read();\n            if(!Ans[x]) tmp[++cnt]=make_pair(tag[x],x);\n        }\n        sort(tmp+1,tmp+cnt+1);\n        for(int i=1; i<=cnt; ++i) {\n            if(tmp[i].first!=tmp[i-1].first) {\n                tag[tmp[i].second]=++cnttag;\n                checklist[++cntchecklist]=tmp[i].first;\n                checklist[++cntchecklist]=cnttag;\n            } else tag[tmp[i].second]=cnttag;\n            --num[tmp[i].first]; xorsum[tmp[i].first]^=tmp[i].second;\n            ++num[cnttag];       xorsum[cnttag]^=tmp[i].second;\n        }\n        for(int i=1; i<=cntchecklist; ++i) if(num[checklist[i]]==1) Ans[xorsum[checklist[i]]]=T; \n    }\n    for(int i=1; i<=n; ++i) write(Ans[i]),putchar(\" \\n\"[i==n]);\n    return 0;\n}\n```\n\n",
        "postTime": 1674195283,
        "uid": 197493,
        "name": "unputdownable",
        "ccfLevel": 7,
        "title": "P7234 [JSOI2014] \u6b4c\u5267\u8868\u6f14"
    }
]
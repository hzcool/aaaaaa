[
    {
        "content": "# P8715 [\u84dd\u6865\u676f 2020 \u7701 AB2] \u5b50\u4e32\u5206\u503c \u9898\u89e3\n## \u601d\u8def\u4e00\n\n\u8fd9\u9898\u9996\u5148\u60f3\u5230\u7684\u662f\u66b4\u529b\uff1a\n1. \u679a\u4e3e\u533a\u95f4\u5de6\u7aef\u70b9\u3002\n2. \u679a\u4e3e\u533a\u95f4\u53f3\u7aef\u70b9\u3002\n3. \u904d\u5386\u5f53\u524d\u6240\u679a\u4e3e\u7684\u533a\u95f4\uff0c\u7d2f\u52a0\u4ec5\u51fa\u73b0\u4e00\u6b21\u7684\u5b57\u6bcd\u4e2a\u6570\u3002\n\n[\u4ee3\u7801](https://www.luogu.com.cn/paste/y2wkr6f5)\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^3)$\uff0c\u63d0\u4ea4\u540e\u5c31\u80fd [TLE](https://www.luogu.com.cn/record/103044075) \u4e86\u3002\n\n---\n## \u601d\u8def\u4e8c\n\u6211\u4eec\u4e0d\u59a8\u7a0d\u5fae\u4f18\u5316\u4e00\u4e0b\uff0c\u8fd9\u91cc\u5c31\u4e0d\u7ec6\u8bf4\u4e86\uff0c\u76f4\u63a5\u4e0a\u4ee3\u7801\u3002\n\n[\u4ee3\u7801](https://www.luogu.com.cn/paste/4e3i2pnj)\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2)$\uff0c\u63d0\u4ea4\u540e\u5c31\u53c8\u80fd [TLE](https://www.luogu.com.cn/record/103046410) \u4e86\u3002\n\n---\n## \u601d\u8def\u4e09\uff08\u6b63\u89e3\uff09\n\u7528\u4e58\u6cd5\u539f\u7406\u505a\u3002\n\n\u64cd\u4f5c\u6b65\u9aa4\uff1a\n1. \u7edf\u8ba1\u6bcf\u4e2a\u5b57\u6bcd\u5728\u53ea\u51fa\u73b0\u4e00\u6b21\u7684\u60c5\u51b5\u4e0b\uff0c\u80fd\u88ab\u591a\u5c11\u5b50\u4e32\u6240\u5305\u542b\uff1b\n2. \u7528 $pre_i$ \u8bb0\u5f55\u7b2c $i$ \u4e2a\u5b57\u6bcd\u4e0a\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u7528 $nx_i$ \u8bb0\u5f55\u7b2c $i$ \u4e2a\u5b57\u6bcd\u4e0b\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff1b\n3. \u90a3\u4e48\u5f80\u5de6\u6700\u591a\u80fd\u5ef6\u4f38\u5230 $pre_i+1$\uff0c\u5176\u5230\u7b2c $i$ \u4e2a\u5b57\u6bcd\u4e00\u5171\u6709 $i-pre_i$ \u4e2a\u5b57\u6bcd\uff1b\n4. \u540c\u7406\u5f80\u53f3\u6700\u591a\u80fd\u5ef6\u4f38\u5230 $nx_i-1$\uff0c\u5176\u5230\u7b2c $i$ \u4e2a\u5b57\u6bcd\u4e00\u5171\u6709 $next_i-i$ \u4e2a\u5b57\u6bcd\uff1b\n5. \u4e8c\u8005\u76f8\u4e58\uff0c\u5c31\u662f\u8be5\u5b57\u6bcd\u88ab\u4e0d\u540c\u5b50\u4e32\u6240\u5305\u542b\u7684\u603b\u6b21\u6570\uff1b\n## \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=100010,M=150;\nstring s;\nll pre[N],nx[N],idx[M];\nint main(){\n    cin>>s;\n    ll n=s.size();\n    s=' '+s;\n    for(int i=1;i<=n;i++){\n        pre[i]=idx[s[i]];\n        idx[s[i]]=i;\n    }\n    for(int i=97;i<=122;i++){\n        idx[i]=n+1;\n    }\n    for(int i=n;i>=1;i--){\n        nx[i]=idx[s[i]];\n        idx[s[i]]=i;\n    }\n    ll ans=0;\n    for(int i=1;i<=n;i++){\n        ans+=(i-pre[i])*(nx[i]-i);\n    }\n    cout<<ans;\n    return 0;\n}\n```\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n)$\uff0c\u63d0\u4ea4\u4e4b\u540e\u53d1\u73b0\uff1a\u7ec8\u4e8e\u8fc7\u4e86\u3002",
        "postTime": 1677382465,
        "uid": 562891,
        "name": "BEST_CAT",
        "ccfLevel": 0,
        "title": "P8715 [\u84dd\u6865\u676f 2020 \u7701 AB2] \u5b50\u4e32\u5206\u503c"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u7531\u5c0f\u5199\u5b57\u6bcd\u7ec4\u6210\u7684\u5b57\u7b26\u4e32 $S$\uff0c\u5b9a\u4e49\u5206\u503c $f(S)$ \u4e3a\u5b57\u7b26\u4e32 $S$ \u4e2d\u7684\u53ea\u51fa\u73b0\u8fc7\u4e00\u6b21\u7684\u5b57\u6bcd\u7684\u4e2a\u6570\uff0c\u6c42 $S$ \u7684\u6240\u6709\u975e\u7a7a\u5b57\u4e32\u7684\u5206\u503c\u603b\u548c\u3002\n\n## \u601d\u8def\n\n### \u66b4\u529b\u505a\u6cd5\n\n\u6211\u4eec\u53ea\u9700\u679a\u4e3e\u5b50\u4e32\u7684\u5de6\u7aef\u70b9\u548c\u53f3\u7aef\u70b9\uff0c\u518d\u5206\u522b\u6c42\u51fa\u5b83\u4eec\u7684\u5206\u503c\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^3)$\uff0c\u663e\u7136\u8d85\u65f6\uff0c\u8fd9\u91cc\u4e0d\u518d\u7ec6\u8bf4\u3002\n\n### \u6b63\u89e3\n\n\u6211\u4eec\u9605\u8bfb\u9898\u76ee\u540e\uff08~~\u5f53\u7136\u9605\u8bfb\u4e86\u9898\u76ee\uff0c\u4e0d\u7136\u600e\u4e48\u505a\uff1f~~\uff09\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u9700\u8981\u6c42\u51fa\u5b57\u7b26\u4e32\u4e2d\u53ea\u51fa\u73b0\u4e00\u6b21\u7684\u5b57\u7b26\u4e2a\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u5b57\u7b26\u4e32\u4e2d\u6bcf\u4e00\u4e2a\u5b57\u7b26\u6240\u505a\u51fa\u6765\u7684\u8d21\u732e\u4e0d\u5c31\u884c\u4e86\uff1f\n\n\u90a3\u4e48\u600e\u4e48\u6c42\u51fa\u6bcf\u4e00\u4e2a\u5b57\u7b26\u6240\u505a\u51fa\u6765\u7684\u8d21\u732e\u5462\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u6bcf\u4e00\u4e2a\u5b57\u7b26 $c$ \u7684\u8d21\u732e\u90fd\u4ec5\u5c40\u9650\u4e8e\u5b57\u4e32\u4e2d\u53ea\u6709\u4e00\u4e2a $c$ \u7684\u5b57\u4e32\uff0c\u90a3\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u8fd9\u4e2a\u5b57\u7b26 $c$ \u4e0a\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u548c\u4e0b\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u90a3\u4e48\u5728\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u5b50\u4e32\uff0c\u4e0d\u5c31\u90fd\u662f $c$ \u53ef\u4ee5\u505a\u51fa\u8d21\u732e\u7684\u5b57\u4e32\u4e86\u5417\uff1f\n\n\u90a3\u4e48\u8fd9\u9053\u9898\u5c31\u597d\u505a\u4e86\u3002\n\n\u6211\u4eec\u8bbe $last_i$ \u4e3a\u5b57\u7b26 $i$ \u4e0a\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c$nxt_i$ \u4e3a\u5b57\u7b26 $i$ \u4e0b\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002\u5982\u679c\u5b57\u7b26 $i$ \u524d\u9762\u6ca1\u6709\u548c\u5b83\u76f8\u540c\u7684\u5b57\u7b26\u4e86\uff0c\u90a3\u4e48 $last_i$ \u4e3a $0$\uff1b\u5982\u679c\u5b57\u7b26 $i$ \u540e\u9762\u6ca1\u6709\u548c\u5b83\u76f8\u540c\u7684\u5b57\u7b26\u4e86\uff0c\u90a3\u4e48 $nxt_i$ \u4e3a $n+1$\uff1b\u90a3\u4e48\u5b57\u7b26 $i$ \u6240\u505a\u51fa\u6765\u7684\u8d21\u732e\u5c31\u662f $(i - last_i) \\times (nxt_i - i)$\u3002\n\n\u90a3\u4e48\u8fd9\u9053\u9898\u6211\u4eec\u5c31\u505a\u5b8c\u4e86\uff01\n\n### AC Code\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long//\u8bb0\u5f97\u5f00long long\nusing namespace std;\nconst int N = 1e5 + 5, S = 27;\nint last[N], nxt[N], a[S];\nint ans;\nstring s;\nsigned main()\n{\n\tcin >> s;\n\tint len = s.size();\n\ts = '#' + s;//\u4f7f\u5b57\u7b26\u4e32\u4e0b\u6807\u4ece1\u5f00\u59cb\n\tfor(int i = 1; i <= len; i++)//\u6c42last\n\t{\n\t\tlast[i] = a[s[i] - 'a'];\n\t\ta[s[i] - 'a'] = i;\n\t}\n\tfor(int i = 0; i < 26; i++)//\u521d\u59cb\u5316a\n\t\ta[i] = len + 1;\n\tfor(int i = len; i >= 1; i--)//\u6c42nxt\n\t{\n\t\tnxt[i] = a[s[i] - 'a'];\n\t\ta[s[i] - 'a'] = i;\n\t}\n\tfor(int i = 1; i <= len; i++)//\u6c42\u7b54\u6848\n\t\tans += (i - last[i]) * (nxt[i] - i);\n\tcout << ans;\n\treturn 0;\n}\n```",
        "postTime": 1680528352,
        "uid": 520338,
        "name": "Stephen__Curry",
        "ccfLevel": 4,
        "title": "P8715 [\u84dd\u6865\u676f 2020 \u7701 AB2] \u5b50\u4e32\u5206\u503c \u9898\u89e3"
    },
    {
        "content": "### \u7b80\u8981\u9898\u610f\r\n\r\n\u5b9a\u4e49\u5b57\u7b26\u4e32 $S$ \u7684\u5206\u503c\u4e3a $S$ \u4e2d\u6070\u597d\u51fa\u73b0\u4e00\u6b21\u7684\u5b57\u7b26\u4e2a\u6570\u3002\u6c42\u8be5\u5b57\u7b26\u4e32 $S$ \u7684\u6240\u6709\u5b50\u4e32\u5206\u503c\u4e4b\u548c\u3002\r\n\r\n### \u601d\u8def\r\n\r\n\u9996\u5148\u8003\u8651\u679a\u4e3e\u5b57\u7b26\u4e32\u6bcf\u4e00\u4f4d\u4e0a\u7684\u5b57\u6bcd\u5bf9\u5206\u503c\u4e4b\u548c\u7684\u8d21\u732e\uff0c\u62ff\u6837\u4f8b\u4e3e\u4f8b\uff1a\r\n\r\n\r\n\u5bf9\u4e8e\u6837\u4f8b\u7b2c\u4e00\u4e2a\u5b57\u7b26 $a$\uff0c\u8d21\u732e\u662f\uff1a$\\color{red}a\\color{black}babc$\u3001$\\color{red}ab\\color{black}abc$\uff0c\u4e00\u5171\u662f $2$\u3002\r\n\r\n\r\n\u5bf9\u4e8e\u6837\u4f8b\u7b2c\u4e8c\u4e2a\u5b57\u7b26 $b$\uff0c\u8d21\u732e\u662f\uff1a$\\color{red}ab\\color{black}abc$\u3001$a\\color{red}b\\color{black}abc$\u3001$a\\color{red}ba\\color{black}bc$\u3001$\\color{red}aba\\color{black}bc$\uff0c\u4e00\u5171\u662f $4$\u3002\r\n\r\n\r\n\u540c\u7406\u6c42\u51fa\u5176\u4ed6\u5b57\u7b26\u8d21\u732e\u5f97\u5230\uff1a\r\n\r\n\r\n| \u4e0b\u6807 | $1$ | $2$ | $3$ | $4$ | $5$ |\r\n|---|---|---|---|---|---|\r\n| \u5b57\u6bcd | $a$ | $b$ | $a$ | $b$ | $c$ |\r\n| \u8d21\u732e | $2$ | $4$ | $6$ | $4$ | $5$ |\r\n\r\n\r\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u6bcf\u4e00\u4e2a\u5b57\u7b26\u53ef\u4ee5\u505a\u51fa\u8d21\u732e\u7684\u5b50\u5b57\u7b26\u4e32\u662f\u4e0a\u4e00\u4e2a\u51fa\u73b0\u8be5\u5b57\u7b26\u7684\u4f4d\u7f6e\u548c\u4e0b\u4e00\u4e2a\u51fa\u73b0\u8be5\u5b57\u7b26\u7684\u4f4d\u7f6e\u4e4b\u95f4\u7684\u5b57\u7b26\u4e32\u3002\u901a\u4fd7\u70b9\u8bb2\u5c31\u662f\uff1a\r\n\r\n$ab\\color{red}{ca}\\color{blue}{b}\\color{red}{caca}\\color{black}b$\r\n\r\n\r\n\u5bf9\u4e8e\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\u7684\u84dd $\\color{blue}b$\uff0c\u5b83\u53ef\u4ee5\u505a\u51fa\u8d21\u732e\u7684\u662f\u8fd9\u4e2a\u5b50\u5b57\u7b26\u4e32\uff1a$\\color{red}{ca}\\color{blue}{b}\\color{red}{caca}$\u3002\r\n\r\n\r\n\u4e0b\u4e00\u4e2a\u95ee\u9898\uff0c\u600e\u4e48\u6c42\u8d21\u732e\uff1f\r\n\r\n\r\n\u518d\u770b\u8fd9\u4e2a\u4f8b\u5b50\uff0c$\\color{red}{ca}\\color{blue}{b}\\color{red}{caca}$\uff0c\u5b83\u505a\u51fa\u7684\u8d21\u732e\u662f\u8fd9\u4e2a\u5b50\u5b57\u7b26\u4e32\u7684\u6240\u6709\u5305\u542b\u84dd $\\color{blue}b$ \u7684\u5b50\u5b57\u7b26\u4e32\u7684\u4e2a\u6570\u3002\r\n\r\n\r\n**\u5f53\u7136\u4e5f\u6709\u7279\u6b8a\u60c5\u51b5\uff0c\u5982\u679c\u8fd9\u4e2a\u5b57\u7b26\u6ca1\u6709\u524d\u4e00\u4e2a\u76f8\u540c\u7684\u5b57\u7b26\u7684\u8bdd\uff0c\u5c31\u5c06\u524d\u4e00\u4e2a\u5b57\u7b26\u51fa\u73b0\u7684\u4e0b\u6807\u8bbe\u4e3a $0$\uff0c\u540c\u610f\u5982\u679c\u6ca1\u6709\u540e\u4e00\u4e2a\u76f8\u540c\u7684\u5b57\u7b26\u7684\u8bdd\uff0c\u5c31\u5c06\u540e\u4e00\u4e2a\u5b57\u7b26\u51fa\u73b0\u7684\u4e0b\u6807\u8bbe\u4e3a $n-1$\u3002**\r\n\r\n\r\n\u901a\u8fc7\u5c0f\u5b66\u5c31\u5b66\u8fc7\u7684\u4e58\u6cd5\u539f\u7406\u53ef\u4ee5\u77e5\u9053\u6240\u6709\u5305\u542b\u84dd $\\color{blue}b$ \u7684\u5b50\u5b57\u7b26\u4e32\u7684\u4e2a\u6570\u7b49\u4e8e\u84dd $\\color{blue}b$ \u53ca\u5176\u5de6\u4fa7\u7684\u5b57\u7b26\u4e2a\u6570\u4e58\u4e0a\u84dd $\\color{blue}b$ \u53ca\u5176\u53f3\u4fa7\u7684\u5b57\u7b26\u4e2a\u6570\u5c31\u662f\u4ed6\u7684\u8d21\u732e\u3002\r\n\r\n\r\n\u6700\u540e\u5c31\u662f\u627e\u524d\u540e\u4e24\u4e2a $b$ \u7684\u4e0b\u6807\u7684\u4f4d\u7f6e\uff0c\u5b9a\u4e49\u4e24\u4e2a\u53d8\u91cf `lastpos` \u548c `nextpos` \u8bb0\u5f55\u5c31\u884c\u4e86\u3002\r\n\r\n\r\n### \u4ee3\u7801\r\n```cpp\r\n#include <bits/stdc++.h>\r\n#define ll long long\r\n#define mem(a, m) memset(a, m, sizeof(a));\r\nusing namespace std;\r\n\r\nstring s;\r\nll ans;\r\nint main()\r\n{\r\n\tios::sync_with_stdio(false);\r\n\tcin >> s;\r\n\tint l=s.size();//\u6bd4\u8f83\u4e60\u60ef\u7528l\uff0c\u6ca1\u7528\u9898\u76ee\u4e2d\u6240\u7ed9\u7684n\r\n\tfor(int i=0;i<l;i++)\r\n\t{\r\n\t\tint lastpos=-1, nextpos=-1;\r\n\t\tfor(int j=i-1;j>=0;j--)\r\n\t\t{\r\n\t\t\tif(s[j] == s[i])\r\n\t\t\t{\r\n\t\t\t\tlastpos=j+1;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(lastpos == -1)\tlastpos=0;\r\n\t\tfor(int j=i+1;j<l;j++)\r\n\t\t{\r\n\t\t\tif(s[j] == s[i])\r\n\t\t\t{\r\n\t\t\t\tnextpos=j-1;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(nextpos == -1)\tnextpos=l-1;\r\n\t\t//cout << s[i] << \": \" << lastpos << \" \" << nextpos << endl;\r\n\t\tans+=(i-lastpos+1)*(nextpos-i+1);//\u5de6\u4fa7\u4e2a\u6570\u662f(i-lastpos+1)\u4e2a\uff0c\u53f3\u4fa7\u662f(nextpos-i+1)\u4e2a\r\n\t}\r\n\tcout << ans;\r\n\treturn 0;\r\n}\r\n\r\n```",
        "postTime": 1674109637,
        "uid": 778011,
        "name": "DreamLand_zcb",
        "ccfLevel": 4,
        "title": "P8715 [\u84dd\u6865\u676f 2020 \u7701 AB2] \u5b50\u4e32\u5206\u503c \u9898\u89e3"
    }
]
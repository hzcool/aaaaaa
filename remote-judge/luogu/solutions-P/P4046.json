[
    {
        "content": "\u53c8\u662f\u4e00\u9053\u6ca1\u9898\u89e3\u7684\u9898\u76ee\u3002\u3002\u3002\n\n\u4e8e\u662f\u8865\u4e00\u4e2a\u9898\u89e3\u3002\u3002\u3002\n\n\u9996\u5148O(m^3* \u4efb\u52a1\u4e2a\u6570 )\u7684dp\u5f88\u7b80\u5355\u3002\u3002\n\n\u53ea\u8981dp[i][j][k]\u8868\u793a\u7b2c\u4e00\u4e2a\u4eba\u5728i\uff0c\u7b2c\u4e8c\u4e2a\u4eba\u5728j\uff0c\u7b2c\u4e09\u4e2a\u4eba\u5728k\u7684\u6700\u5c0f\u8d39\u7528\uff0c\u5916\u9762\u518d\u6309\u7167\u4efb\u52a1\u987a\u5e8f\u679a\u4e3e\u5c31\u597d\u3002\u3002\u3002\n\n\u4f46\u8fd9\u6837\u663e\u7136\u662f\u8dd1\u4e0d\u8fc7\u7684\u3002\u3002\u3002\n\n\u53d1\u73b0\u5b8c\u6210\u7b2cx\u4e2a\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u4e09\u4e2a\u4eba\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u5728p[x]\u4e0a\uff0cp[x]\u8868\u793a\u7b2cx\u4e2a\u4efb\u52a1\u7684\u4f4d\u7f6e\u3002\u3002\u3002\n\n\u6240\u4ee5\u6570\u7ec4\u53ea\u7528\u5f00\u4e24\u7ef4\uff0cf[i][j]\u8868\u793a\u7b2c\u4e00\u4e2a\u4eba\u5728i\uff0c\u7b2c\u4e8c\u4e2a\u4eba\u5728j\uff0c\u53e6\u4e00\u4e2a\u6240\u5728\u4f4d\u7f6e\u5c31\u662f\u4e0a\u4e00\u4e2a\u4e0a\u4e00\u4e2a\u4efb\u52a1\u7684\u4f4d\u7f6e\u3002\u3002\u3002\n\n\u679a\u4e3e\u7b2cx\u4e2a\u4efb\u52a1\uff0c\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u663e\u7136\u4e86\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u7a0b\u5e8f\u3002\u3002\u3002\n\n\u6700\u540e\u6548\u7387\u5c31\u662fO(m^2* \u4efb\u52a1\u4e2a\u6570)\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e86\n\n\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#define LL long long\nusing namespace std;\nconst LL inf=1e18;\nint n,m;\nint p[1050];\nLL mp[210][210],f[210][210],t[210][210];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=n;++j)\n\t\t\tscanf(\"%lld\",&mp[i][j]);\n\tfor(int i=1;i<=n;++i) mp[i][i]=0;\n\tp[0]=3;m=1;\n\twhile(scanf(\"%d\",&p[m])!=EOF)++m;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=n;++j) \n\t\t\tf[i][j]=t[i][j]=inf;\n\tf[1][2]=0;\n\tfor(int k=1;k<=m;++k){\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tfor(int j=1;j<=n;++j) \n\t\t\t\tt[i][j]=inf;\n\t\tfor(int i=1;i<=n;++i){\n\t\t\tfor(int j=1;j<=n;++j){\n\t\t\t\tif(f[i][j]==inf) continue;\n\t\t\t\tt[i][j]=min(t[i][j],f[i][j]+mp[p[k-1]][p[k]]);\n\t\t\t\tt[p[k-1]][j]=min(t[p[k-1]][j],f[i][j]+mp[i][p[k]]);\n\t\t\t\tt[i][p[k-1]]=min(t[i][p[k-1]],f[i][j]+mp[j][p[k]]);\n\t\t\t}\n\t\t}\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tfor(int j=1;j<=n;++j) \n\t\t\t\tf[i][j]=t[i][j];\n\t}\n\tLL ans=inf;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=n;++j)\n\t\t\tans=min(ans,f[i][j]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1525166778,
        "uid": 46755,
        "name": "Iscream2001",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4046 \u3010[JSOI2010]\u5feb\u9012\u670d\u52a1\u3011"
    },
    {
        "content": "## \u9898\u76ee\u80cc\u666f\n\n\u8fd9\u662f\u4e00\u9053 CEOI 2005 \u5e74\u7684\u4e00\u9053\u9898\uff0c\u88ab JS \u7701\u6284\u6210\u4e862010\u5e74\u7684\u7701\u9009\u3002\u3002\u3002\n\n## \u5206\u6790\n\n\u672c\u849f\u84bb\u5148\u7528\u8d2a\u5fc3\u5199\u4e86\u4e00\u904d\uff0c\u7136\u540e\u81ea\u5df1\u53d1\u73b0\u4e86\u9519\uff0c\u56e0\u4e3a\u524d\u9762\u4e00\u6b65\u4e0d\u53ef\u80fd\u63a8\u51fa\u8fd9\u4e00\u6b65\u7684\u8d70\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4e0d\u5177\u5907\u6700\u4f18\u5b50\u7ed3\u6784\u7684\uff0c\u4f60\u4e0d\u77e5\u9053\u4e0b\u4e00\u6b65\u4f1a\u53d1\u751f\u4ec0\u4e48\u3002\u7136\u540e\u89c9\u5f97\u53ef\u4ee5\u7528\u80cc\u5305\u3002\u6211\u4eec\u6765\u5199\u4e00\u4e0b\u65b9\u7a0b\u3002\n\n\n## \u65b9\u7a0b\n\n\u9996\u5148\u80af\u5b9a\u8981\u628a\u4e09\u4e2a\u53f8\u673a\u7684\u4f4d\u7f6e\u653e\u8fdb\u53bb\n\n### \u8fc7\u53bb\u65f6\uff1a \n$f(i,x,y,z)$\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u8fc7\u53bb\u65f6\u53ef\u80fd\u6709 $200 \\times 3 = 600$  \u79cd\u53ef\u80fd\uff0c\u80af\u5b9a\u65f6\u95f4\u8981\u7206\u8868\uff0c\u6765\uff0c\u8bd5\u8bd5\u672a\u6765\u65f6\uff1a\n\n### \u672a\u6765\u65f6\uff1a   \n$f(i,x,y,z)=min(f(i+1,f[i+1],y,z),f(i+1,x,f[i+1],z),f(i+1,x,y,t[i+1]))$\n\n\u73b0\u5728\u53ea\u6709 $300$ \u79cd\u53ef\u80fd\u4e86\uff0c\u80af\u5b9a\u8981\u7528\u672a\u6765\u65f6\u4f46\u662f\u80af\u5b9a\u6709\u5197\u4f59\uff0c\u770b\u770b\u7a0b\u5e8f\u91cc\u662f\u600e\u6837\u6d88\u9664\u7684\u3002\n\n## \u7a0b\u5e8f\n```cpp\n#include<bits/stdc++.h>\nusing namespace std; \nint k,n,c[205][205],t[2005],f[2][205][205];\nint main(){\n\tcin>>k;\n\tfor(int i=1;i<=k;i++){\n\t\tfor(int j=1;j<=k;j++){\n\t\t\tcin>>c[i][j];\n\t\t}\n\t}\n\tint n=0;\n\tint a=0;\n\twhile(cin>>t[++n]);//Dev-C++\u6309ctrl+z\u8868\u793a\u63a5\u53d7\n\tn--;\n\tt[0]=1;//\u522b\u5fd8\u8bb0\u521d\u59cb\u5316\uff0c\u5efa\u7acb\u865a\u62df\u8ba2\u5355 \n\tfor(int i=n-1;i>=0;i--){\n\t\tfor(int x=1;x<=k;x++){\n\t\t\tfor(int y=x+1;y<=k;y++){\n\t\t\t\tif(x==t[i] || y==t[i]){\n\t\t\t\t\tf[i&1][x][y]=1e7;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tint tmp1=f[(i+1)&1][x][y]+c[t[i]][t[i+1]];\n\t\t\t\tint tmp2=(t[i]<y)?f[i+1&1][t[i]][y]+c[x][t[i+1]]:f[i+1&1][y][t[i]]+c[x][t[i+1]];\n\t\t\t\tint tmp3=(t[i]<x)?f[i+1&1][t[i]][x]+c[y][t[i+1]]:f[i+1&1][x][t[i]]+c[y][t[i+1]];\n\t\t\t\tf[i&1][x][y]=min(tmp1,min(tmp2,tmp3));\n\t\t\t}\n\t\t}\n\t}\n\tcout<<f[0][2][3]<<endl;\n\treturn 0;\n}\n```\n\u671b\u901a\u8fc7\uff0c\u8c22\u8c22\n",
        "postTime": 1615023695,
        "uid": 422348,
        "name": "Yang818",
        "ccfLevel": 4,
        "title": "P4046\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5176\u5b9e\u548c[SP703 SERVICE - Mobile Service](https://www.luogu.com.cn/problem/SP703)\u4e00\u6837\n\n\u770b\u5230\u8fd9\u5230\u9898,\u5f88\u5bb9\u6613\u60f3\u5230\u4e00\u79cd\u5b9a\u4e49\u72b6\u6001\u7684\u65b9\u5f0f$f[i][x][y][z]$\u8868\u793a\u5b8c\u6210\u524d$i$\u4e2a\u8bf7\u6c42,\u4e09\u4e2a\u4eba\u7684\u4f4d\u7f6e\u5206\u522b\u5728$x,y,z$,\u4f46\u5f88\u660e\u663e\u5982\u679c\u8fd9\u4e48\u5b9a\u4e49\u4f1a\u8d85\u7a7a\u95f4,\u6240\u4ee5\u60f3\u529e\u6cd5\u51cf\u6389\u4e00\u4f4d,\u56e0\u4e3a\u5b8c\u6210\u8bf7\u6c42\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u4eba\u5728\u8bf7\u6c42\u53d1\u751f\u7684\u4f4d\u7f6e,\u90a3\u4e48,\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u5f53\u524d\u5b8c\u6210\u7684\u7b2c$i$\u4e2a\u8bf7\u6c42\u6765\u63a8\u51fa\u5176\u4e2d\u4e00\u4e2a\u4eba\u7684\u4f4d\u7f6e,\u6240\u4e00\u8fd9\u4e2a\u72b6\u6001\u5c31\u53ef\u53d8\u6210$f[i][x][y]$,b\u8868\u793a\u5b8c\u6210\u524d$i$\u4e2a\u8bf7\u6c42\u65f6,\u5176\u4e2d\u4e24\u4e2a\u4eba\u5206\u522b\u5728$x,y$,\u63a5\u4e0b\u6765\u8003\u8651\u600e\u4e48\u8f6c\u79fb\u72b6\u6001,\u5982\u679c\u6211\u4eec\u4ece\u524d\u9762\u7684\u72b6\u6001\u6765\u63a8\u5f53\u524d\u7684\u72b6\u6001,\u9700\u8981\u8003\u8651\u8bb8\u591a\u79cd\u60c5\u51b5,\u6240\u4ee5\u6211\u4eec\u5c31\u7528\u5f53\u524d\u72b6\u6001\u6765\u66f4\u65b0\u4e0b\u4e00\u4e2a\u72b6\u6001\n\n\n------------\n\u7136\u540e\u662f\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u56e0\u4e3a\u6709\u4e09\u4e2a\u5458\u5de5,\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8003\u8651,\u4e0b\u9762\u4e09\u79cd\u60c5\u51b5\n\n\u5728\u5f53\u524d\u8bf7\u6c42\u7684\u4f4d\u7f6e\u7684\u4eba\u53bb\n\n$f[i + 1][x][y] = min(f[i + 1][x][y], f[i][x][y] + c[p[i]][p[i+1]])$\n\n\u5728$x$\u4f4d\u7f6e\u7684\u5458\u5de5\u53bb\n\n$f[i + 1][p[i]][y] = min(f[i + 1][p[i]][y], f[i][x][y]+c[x][p[i + 1]])$\n\n\u5728$y$\u4f4d\u7f6e\u7684\u5458\u5de5\u53bb\n\n$f[i + 1][x][p[i]] = min(f[i + 1][x][p[i]], f[i][x][y]+c[y][p[i + 1]])$\n\n\u5f97\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b,\u8fd9\u5230\u9898\u5c31\u57fa\u672c\u89e3\u51b3\u4e86,\u4f46\u5982\u679c\u4f60\u76f4\u63a5\u8fd9\u4e48\u5b9a\u4e49,\u5bf9\u4e8e\u8fd9\u5230\u9898\u4f1a\u8d85\u7a7a\u95f4,\u6240\u4ee5\u8003\u8651\u6eda\u52a8\u6570\u7ec4\u4f18\u5316,\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u72b6\u6001,\u5b83\u53ea\u548c\u5b83\u7684\u524d\u4e00\u4e2a\u72b6\u6001\u6709\u5173,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u6570\u7ec4\u7684\u7b2c\u4e00\u4f4d\u538b\u7f29\u4e3a\u4e24\u7ef4\n\n\u9644\u4ee3\u7801\n\n```\n#include<iostream>\n#include<cstring>\n#include<cstdio>\nusing namespace std;\n\nint f[2][205][205];\nint c[205][205], p[1005];\n\nint main()\n{\n    int l;\n    scanf(\"%d\", &l);\n    for (int i = 1; i <= l;i++)\n    {\n        for (int j = 1; j <= l;j++)\n        {\n            int a;\n            scanf(\"%d\", &a);\n            c[i][j] = a;\n        }\n    }\n    int n = 0;\n    while(scanf(\"%d\", &p[++n])!=EOF);\n    memset(f, 0x3f, sizeof(f));\n    f[0][1][2] = 0;\n    p[0] = 3;\n    for (int i = 0; i < n;i++)\n    {\n        memset(f[i + 1 & 1], 0x3f, sizeof(f[i + 1 & 1]));\n        for (int x = 1; x <= l;x++)\n        {\n            for (int y = 1; y <= l;y++)\n            {\n                if(x==p[i]||x==y||y==p[i])\n                    continue;\n                f[i + 1 & 1][p[i]][y] = min(f[i + 1 & 1][p[i]][y], f[i & 1][x][y] + c[x][p[i + 1]]);\n                f[i + 1 & 1][x][p[i]] = min(f[i + 1 & 1][x][p[i]], f[i & 1][x][y] + c[y][p[i + 1]]);\n                f[i + 1 & 1][x][y] = min(f[i + 1 & 1][x][y], f[i & 1][x][y] + c[p[i]][p[i + 1]]);\n            }\n        }\n    }\n    int ans = 0x3f3f3f3f;\n    for (int i = 1; i <= l;i++)\n        for (int j = 1; j <= l;j++)\n        {\n            if(i==j||i==p[n]||j==p[n])\n                continue;\n            ans = min(ans, f[n & 1][i][j]);\n        }    \n    printf(\"%d\", ans);\n}\n```\n",
        "postTime": 1606650772,
        "uid": 277863,
        "name": "BzhH",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4046 \u3010[JSOI2010]\u5feb\u9012\u670d\u52a1\u3011"
    },
    {
        "content": "$F[i][x][y][z]$ \u8868\u793a\u5e8f\u5217\u679a\u4e3e\u5230\u7b2c $i$ \u4e2a\u4f4d\u7f6e,\u53f8\u673a $1$ \u5728 $x$ \u4f4d\u7f6e\uff0c\u53f8\u673a $2$ \u5728 $y$ \u4f4d\u7f6e\uff0c\u53f8\u673a $3$ \u5728\u4f4d\u7f6e $z$ \uff0c\u53d1\u73b0\u65e0\u8bba\u65f6\u9650\u8fd8\u662f\u7a7a\u95f4\u90fd\u4e0d\u884c\uff1b\n\n\n\u518d\u9759\u4e0b\u5fc3\u6765\u601d\u8003\uff0c\u53d1\u73b0 $3$ \u4eba\u80af\u5b9a\u6709\u4e00\u4e2a\u662f\u5f85\u5728\u4e0a\u6b21\u62ff\u4ef6\u7684\u4f4d\u7f6e(\u663e\u7136\u8981\u6709\u4e00\u4e2a\u53bb\u628a\u8fd9\u4e2a\u6d3b\u5e72\u4e86\u554a)\uff0c\u6545\u5c31\u53ef\u4ee5\u5c11\u4e00\u7ef4\u5ea6\n $F[i][x][y]$ \u793a\u5e8f\u5217\u679a\u4e3e\u5230\u7b2c $i$ \u4e2a\u4f4d\u7f6e,\u53f8\u673a $1$ \u5728 $x$ \u4f4d\u7f6e\uff0c\u53f8\u673a $2$ \u5728 $y$ \u4f4d\u7f6e\uff0c\u53f8\u673a $3$ \u5728\u4e0a\u4e00\u4e2a\u62ff\u4ef6\u7684\u4f4d\u7f6e $z=A[i-1]$ ,\u6700\u540e\u518d\u6eda\u52a8\u6570\u7ec4\u5c31OK\n \n Code:\n ```cpp\n\n#include<bits/stdc++.h>\n#define maxn 205\n#define maxm 1005\nusing namespace std;\nint n,m,c[maxn][maxn],a[maxm];\nlong long ans=((long long)1<<62);\nlong long F[2][maxn][maxn];\nint read(){\n\tint ret=0,f=1;char ch=getchar();\n\twhile (!isdigit(ch)){if (ch=='-')f=-f;ch=getchar();}\n\twhile (isdigit(ch)) ret=(ret<<3)+(ret<<1)+ch-'0',ch=getchar();\n\treturn ret*f;\n}\nint main(){\n    n=read();\n    for (int i=1;i<=n;i++)\n    for (int j=1;j<=n;j++)\n       c[i][j]=read();\n    int x;\n    while(scanf(\"%d\",&x)==1){a[++m]=x;}\n    memset(F,127,sizeof F);\n    F[0][1][2]=0;a[0]=3;\n    for (int i=1;i<=m;i++){\n    \tint z=a[i-1];\n    \tmemset(F[i&1],127,sizeof F[i&1]);\n        for (int x=1;x<=n;x++)\n        for (int y=1;y<=n;y++){\n            if (x==y||x==z||y==z) continue;\n            if (x!=a[i]&&y!=a[i]) F[i&1][x][y]=min(F[i&1][x][y],F[1-i&1][x][y]+c[z][a[i]]);\n            if (x!=a[i]&&z!=a[i]) F[i&1][x][z]=min(F[i&1][x][z],F[1-i&1][x][y]+c[y][a[i]]);\n            if (y!=a[i]&&z!=a[i]) F[i&1][y][z]=min(F[i&1][y][z],F[1-i&1][x][y]+c[x][a[i]]);\n        }\n    }\n    for (int i=1;i<=n;i++)\n    for (int j=1;j<=n;j++){\n    \tif (i==j) continue;\n        ans=min(ans,F[m&1][i][j]);\n    }\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1595942117,
        "uid": 188879,
        "name": "VioletIsMyLove",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4046 \u3010[JSOI2010]\u5feb\u9012\u670d\u52a1\u3011"
    },
    {
        "content": "\u672c\u9898~~\u4e00\u773c\u770b\u51fa~~\u662f\u4e00\u9053DP\u9898\uff0c\u6211\u4eec\u53ef\u4ee5~~\u5f88\u5bb9\u6613~~\u5f97\u51fa\u72b6\u6001\u548c\u65b9\u7a0b\n\n* \u72b6\u6001\uff1a\u4ee4$f_{i,j,k,l}$\u8868\u793a\u5f53\u524d\u679a\u4e3e\u5230\u4e86\u7b2c$i$\u4e2a\u5730\u70b9\uff0c\u4e09\u4f4d\u53f8\u673a\u5206\u522b\u5728$j,k,l$\u4e09\u5904\u5730\u70b9\n\n* \u8f6c\u79fb\n$$f_{i,j,k,a_{i}}=min(f_{i,j,k,a_{i}},f_{i-1,j,k,l}+val_{l,a_{i}})$$\n$$f_{i,j,a_{i},l}=min(f_{i,j,a_{i},l},f_{i-1,j,k,l}+val_{k,a_{i}})$$\n$$f_{i,a_{i},k,l}=min(f_{i,a_{i},k,l},f_{i-1,j,k,l}+val_{j,a_{i}})$$\n* \u8fb9\u754c\u6761\u4ef6\uff1a$f_{0,1,2,3}=0$\n\n\n~~\u597d\u4e86\u6211\u4eec\u5c31\u505a\u5b8c\u4e86\uff0c\u6563\u4e86\u5427\u6563\u4e86\u5427~~\n\n\u4e0a\u9762\u8fd9\u6837\u663e\u7136\u662f\u4e0d\u884c\u7684\uff0c\u6211\u4eec\u6765\u60f3\u529e\u6cd5**\u4f18\u5316**\n\n~~\u53ef\u4ee5\u901a\u8fc7\u5927\u558a\u8001\u53f8\u673a\u5e26\u5e26\u6211\u89e6\u53d1\u5e38\u6570\u53d80.00001\u7279\u6548\uff0c\u6c34\u8fc7\u8fd9\u4e2a\u9898~~\n\n------------\n### \uff01\uff01\uff01Optimization:\n\n* \u6211\u4eec\u8003\u8651\u5220\u9664\u65e0\u7528\u72b6\u6001:\u5bf9\u4e8e\u4e00\u4e2a\u65f6\u523b$i$\u5fc5\u987b**\u6709\u4e14\u4ec5\u6709**\u4e00\u4e2a\u53f8\u673a\u5728\u4e0a\u4e00\u4e2a\u4f4d\u7f6e$pos_{i-1}$\uff08\u6211\u4eec\u8bb0\u4f4d\u7f6e\u4e3a$pos$\uff09\u56e0\u6b64\u5f53\u6211\u4eec\u679a\u4e3e\u7b2c\u51e0\u4e2a\u5730\u70b9\u65f6\uff0c\u5176\u4e2d\u4e00\u4e2a\u53f8\u673a\u7684\u4f4d\u7f6e\u5df2\u77e5\uff0c\u53ef\u4ee5\u5c11\u679a\u4e3e\u4e00\u7ef4\n\n* \u7701\u6389\u4e00\u7ef4\u540e\uff0c\u5185\u5b58\u8fd8\u662f\u4e0d\u591f\uff0c\u600e\u4e48\u529e\u5462\uff0c~~\u6eda\uff01~~\u5f53\u7136\u662f\u5f00\u6eda\u52a8\u6570\u7ec4\u554a\n\n* \u4f18\u5316\u540e\u7684\u8fb9\u754c\uff1a$(f_{0,1,2}=0,a_{0}=3)or(f_{0,2,3}=0,a_{0}=1)or(f_{0,1,3}=0,a_{0}=2)$ \n------------\n\n_Code:_\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<queue>\n#include<algorithm>\n#include<cstring>\n#define M(a) memset(a,0,sizeof(a))\n#define inf (long long)1e18\nusing namespace std;\n\nconst int maxn=201;\n\ntypedef long long ll;\n\nll read(){\n\tchar ch=getchar();int res=0,f=1;\n\twhile(!isdigit(ch)){if(ch=='-')f=-1;ch=getchar();} \n\twhile(isdigit(ch)){res=res*10+ch-'0';ch=getchar();}\n\treturn res*f;\n}\n\nll f[2][maxn][maxn];\nint m,n,t;\nll ans;\nll c[maxn][maxn];\nint pos[maxn*10];\n\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tc[i][j]=read();\n\t\t}\n\t} \n\t\n\tm=0;int p;\n\twhile(cin>>p){\n\t\tpos[++m]=p;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tf[0][i][j]=f[1][i][j]=inf;\n\t\t}\n\t}\n\tint lst=0,now=1;\n\tf[lst][1][2]=0;\n\tpos[0]=3;\n\tfor(int t=1;t<=m;t++){\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tf[now][i][j]=inf;\n\t\t\t}\n\t\t}\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=n;j++)if(f[lst][i][j]!=inf&&i!=j&&i!=pos[t-1]&&j!=pos[t-1]){//\u4e09\u8f66\u4f4d\u7f6e\uff1ai\uff0cj\uff0cpos[t-1] \n\t\t\t\tif(i!=pos[t]&&j!=pos[t])f[now][i][j]=min(f[now][i][j],f[lst][i][j]+c[pos[t-1]][pos[t]]);\n\t\t\t\tif(j!=pos[t])f[now][pos[t-1]][j]=min(f[now][pos[t-1]][j],f[lst][i][j]+c[i][pos[t]]);\n\t\t\t\tif(i!=pos[t])f[now][i][pos[t-1]]=min(f[now][i][pos[t-1]],f[lst][i][j]+c[j][pos[t]]);\n\t\t\t}\n\t\t}\n\t\tlst=1-lst,now=1-now;\n\t}\n\tans=inf;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tans=min(ans,f[lst][i][j]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans); \n\n}\n```",
        "postTime": 1541321451,
        "uid": 54386,
        "name": "hhhhyq",
        "ccfLevel": 0,
        "title": "P4046 [JSOI2010]\u5feb\u9012\u670d\u52a1"
    },
    {
        "content": "\n[\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.org/problem/SP703)\n\n\u5148\u4ece\u9ad8\u7ef4dp\u5f00\u59cb\u8003\u8651\n\n`f[i][x][y][z]`\u8868\u793a\u5f53\u524d\u7b2c`i`\u4e2a\u4efb\u52a1\uff0c\u7b2c\u4e00\u4e2a\u5458\u5de5\u5728`x`\uff0c\u7b2c\u4e8c\u4e2a\u5728`y`\uff0c\u7b2c\u4e09\u4e2a\u5728`z`\n\n\u5219\u6709\uff1a\n\n$f[i+1][p[i+1]][y][z]=min(f[i][x][y][z]+c[x][p[i+1]]$\n\n$f[i+1][x][p[i+1]][z]=min(f[i][x][y][z]+c[y][p+1])$\n\n$f[i+1][x][y][p[i+1]]=min(f[i][x][y][z]+c[z][p[i+1]])$\n\n\u601d\u7ef4\u96be\u5ea6\u4e0d\u9ad8\uff0c\u4f46\u65f6\u95f4\u7a7a\u95f4\u590d\u6742\u5ea6\u5de8\u5927\n\n\u7136\u540e\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u9898\u7684\u4e00\u4e2a\u6027\u8d28\uff0c\u6bcf\u6b21\u505a\u4efb\u52a1\u540e\u4e00\u5b9a\u6709\u4e00\u4e2a\u5458\u5de5\u505c\u5728`p[i]`\u5904\uff0c\u6240\u4ee5\u5c31\u53ef\u4ee5\u4f18\u5316\n\n\u8bbe`f[i][x][y]`\u8868\u793a\u5b8c\u6210`i`\u4e2a\u76ee\u6807\uff0c\u4e24\u4e2a\u4eba\u505c\u5728x,y\u4f4d\u7f6e\uff0c\u53e6\u4e00\u4e2a\u4eba\u505c\u5728`p[i]`\n\n$f[i+1][x][y]=min(f[i][x][y]+c[p[i]][p[i+1]])$\n\n$f[i+1][p[i]][y]=min(f[i][x][y]+c[x][p[i+1]])$\n\n$f[i+1][x][p[i]]=min(f[i][x][y],c[y][p[i+1]])$\n\n\u8003\u8651`i+1`\u7684\u72b6\u6001\u53ea\u4f1a\u4ece`i`\u7684\u72b6\u6001\u8f6c\u79fb\u800c\u6765\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\uff0c\u4e0a\u9762\u7684\u5f0f\u5b50\u6ce8\u610f\u5224\u65ad\u6761\u4ef6\n\n\u521d\u503c$f[0][1][2]=0,a[0]=3$\n\n\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u7684\u8bdd\uff0c\u6bcf\u6b21\u6e05\u7a7a(i+1)&1\u7684\u72b6\u6001\uff0c\u5373\u628a\u5b83\u5168\u90e8\u8d4b\u4e3a0x3f\uff0c\u4ee5\u514d\u7b97\u51fa\u6765\u4ec0\u4e48\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u4e1c\u897f\n\n\u4f46\u8fd9\u6837\u505a[\u5e38\u6570\u5f88\u5927](https://www.luogu.org/discuss/show/141455)\n\u7136\u800c\u80fd\u5f00\u7684\u4e0b\u8fd8\u662f\u5f00\u5427\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define ll long long\n#define re register int\n#define maxn 201\nusing namespace std;\nint f[2][maxn][maxn],n,m,c[1001][1001],a[1001];\nint ans;\nint main(){\n\tint t;\n\tscanf(\"%d\",&t);\n\twhile(t--){\n\t\tans=0x3f3f3f3f;\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tfor(re i=1;i<=n;i++)\n\t\t\tfor(re j=1;j<=n;j++)\n\t\t\t\tscanf(\"%d\",&c[i][j]);\n\t\tfor(re i=1;i<=m;i++)\n\t\t\tscanf(\"%d\",&a[i]);\n\t\tmemset(f,0x3f,sizeof(f));\n\t\tf[0][1][2]=0;a[0]=3;\n\t\tfor(re i=0;i<m;i++){\n\t\t\tmemset(f[(i+1)&1],0x3f,sizeof(f[(i+1)&1]));\n\t\t\tfor(re x=1;x<=n;x++)\n\t\t\t\tfor(re y=1;y<=n;y++){\n\t\t\t\t\tint z=a[i];\n\t\t\t\t\tif(x==y||x==z||y==z)continue;\n\t\t\t\t\tif(x!=a[i+1]&&y!=a[i+1])f[(i+1)&1][x][y]=min(f[(i+1)&1][x][y],f[i&1][x][y]+c[z][a[i+1]]);\n\t\t\t\t\tif(x!=a[i+1]&&z!=a[i+1])f[(i+1)&1][x][z]=min(f[(i+1)&1][x][z],f[i&1][x][y]+c[y][a[i+1]]);\n\t\t\t\t\tif(y!=a[i+1]&&z!=a[i+1])f[(i+1)&1][y][z]=min(f[(i+1)&1][y][z],f[i&1][x][y]+c[x][a[i+1]]);\n\n\t\t\t\t}\n}\n\t\t\tfor(re i=1;i<=n;i++)\n\t\t\t\tfor(re j=1;j<=n;j++){\n\t\t\t\t\tif(i==j)continue;\n\t\t\t\t\tans=min(ans,f[m&1][i][j]);\n\t\t\t\t}\n\t\t\n\t\t\tprintf(\"%d\\n\",ans);\n\t\t\n\t}\n\n\n\treturn 0;\n}\n```\n",
        "postTime": 1567166929,
        "uid": 57823,
        "name": "\u7ea2\u8272OI\u518d\u4e34",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4046 \u3010[JSOI2010]\u5feb\u9012\u670d\u52a1\u3011"
    },
    {
        "content": "\u8bb2\u8bb2\u8fd9\u9898\u697c\u4e0a\u4e0b\u6ca1\u6709\u9898\u7684\u5361\u5e38\u6280\u5de7\uff0c\u56e0\u4e3a\u8fd9\u9898\u5199\u4e0d\u597d\u53ef\u80fd\u4f1a\u88ab\u5361\u3002\n\n$f[i][j][k]$\u8868\u793a\u7b2c$i$\u4e2a\u547d\u4ee4\u540e\u4e00\u4e2a\u4eba\u5728$j$\uff0c\u53e6\u4e00\u4e2a\u5728$k$\uff0c\u8fd8\u6709\u4e00\u4e2a\u5728\u54ea\u4f60\u61c2\u5f97\u3002\uff08\u5176\u5b9e\u8fd9\u91cc\u662f\u4e00\u4e2a\u72b6\u6001\u7cbe\u7b80\uff0c\u7b2c\u4e09\u4e2a\u4eba\u7684\u72b6\u6001\u6ca1\u5fc5\u8981\u7559\uff0c\u56e0\u4e3a\u53ef\u4ee5\u77e5\u9053\uff09\u3002\u4e8e\u662f\u6bcf\u4e2a\u64cd\u4f5c\u679a\u4e3e\u4e0a\u4e00\u6b21\u4e24\u4e2a\u4eba\u5206\u5e03\u4f4d\u7f6e\uff0c\u6392\u9664\u4e00\u4e0b\u7ad9\u540c\u4e00\u4f4d\u7f6e\u7684\uff0c\u4e09\u4e2a\u4eba\u91cc\u9762\u9009\u4e00\u4e2a\u63a8\u8fc7\u6765\u3002\u72b6\u8f6c\u7684\u8bdd\u770bcode\u91cc\u9762\u4e09\u884c\u597d\u4e86\u3002\n\n\u4e0a\u9762\u662f\u57fa\u672c\u89e3\u6cd5\n\n## EFFECTIVE SKILLS\n\n\u6bd4\u8f83\u5361\u5e38\u3002~~\u5176\u5b9e\u5438\u6c27\u5373\u53ef\u3002~~ \u7ec6\u8282\u4f18\u5316\uff1a\n\n- $f[2][N][N]$\u6eda\u52a8\u3002\u57fa\u672c\u64cd\u4f5c\uff0c\u4f18\u5316\u7a7a\u95f4\u3002\u53e6\u5916\uff0c\u5728\u8fd9\u9898\u91cc\u9762\uff08\u6216\u8005\u8bf4\u5f88\u591a\u9898\u4e2d\uff09\u53ef\u4ee5\u987a\u4fbf\u4f18\u5316\u65f6\u95f4\uff0c\u6e05INF\u7684\u64cd\u4f5c\u5c31\u53ef\u4ee5\u4e0d\u7528\u4e86\u3002\u539f\u7406\u662f\u6bcf\u6b21\u679a\u4e3ei^1\u7684\u4e24\u4e2a\u4eba\u4f4d\u7f6e\u7684\u65f6\u5019\u7531\u4e8e\u8fd9\u4e24\u4e2a\u4eba\u4f4d\u7f6e\u72b6\u6001\u679a\u4e3e\u6389\u540e\u4e0d\u4f1a\u518d\u770b\u4e86\uff0c\u800c\u4e0b\u4e00\u6b21\u518d\u7528i^1\u8fd9\u4e00\u7ef4\u7684\u65f6\u5019\u6709\u8981\u6c42\u6709\u521d\u59cb\u6700\u5927\u503c\u65b9\u4fbf\u66f4\u65b0\uff0c\u6240\u4ee5\u6211\u73b0\u5728\u63a8\u5b8c\u7acb\u5373\u5c31\u628ai^1\u8fd9\u4e00\u7ef4\u8bbe\u4e3aINF\u3002\u4e0b\u6b21\u5c31\u4e0d\u6e05INF\u4e86\u3002\u65f6\u95f4\u5c31\u4f1a\u6781\u5927\u51cf\u5c11\u3002\u6ce8\u610f\u987a\u5e26\u6e05INF\u64cd\u4f5c\u653e\u5728\u5224\u65ad(line 32 in code)\u5916\u9762\uff08\u5176\u5b9e\u662f\u56e0\u4e3a\u4e0d\u60f3\u53bb\u60f3\u91cd\u53e0\u7684\u60c5\u51b5\u4ec0\u4e48\u7684\u4e86\uff0c\u7edf\u7edf\u521d\u59cb\u5316\u7b97\u4e86\uff09\n- \u679a\u4e3ej\u548ck\u65f6\uff0c\u53ef\u4ee5\u7f29\u5c0f\u8303\u56f4\uff0c\u53ea\u679a\u4e3ej<k\u7684\u60c5\u51b5\uff0c\u679a\u4e3e\u6570\u91cf\u5c11\u4e00\u534a\u3002\n\n\u7136\u540e\u8f7b\u677e\u5237\u699crank1\u3002~~\u5176\u5b9e\u6211\u4e5f\u5438\u4e86\u6c27~~\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<queue>\n#define dbg(x) cerr<<#x<<\" = \"<<x<<endl\nusing namespace std;\ntypedef long long ll;\ntemplate<typename T>inline char MIN(T&A,T B){return A>B?A=B,1:0;}\ntemplate<typename T>inline char MAX(T&A,T B){return A<B?A=B,1:0;}\ntemplate<typename T>inline T _min(T A,T B){return A<B?A:B;}\ntemplate<typename T>inline T _max(T A,T B){return A>B?A:B;}\ntemplate<typename T>inline T read(T&x){\n    x=0;int f=0;char c;while(!isdigit(c=getchar()))if(c=='-')f=1;\n    while(isdigit(c))x=x*10+(c&15),c=getchar();return f?x=-x:x;\n}\nconst int N=200+2,M=1000+2,INF=0x3f3f3f3f;\nint dis[N][N],p[M],f[2][N][N];\nint m=1,n,ans;\n\nint main(){//freopen(\"test.in\",\"r\",stdin);//freopen(\"test.out\",\"w\",stdout);\n    read(n);\n    for(register int i=1;i<=n;++i)for(register int j=1;j<=n;++j)read(dis[i][j]);\n    while(~scanf(\"%d\",&p[m]))++m;--m;\n    memset(f,INF,sizeof f);ans=INF;\n    f[1][1][2]=dis[3][p[1]],f[1][1][3]=dis[2][p[1]],f[1][2][3]=dis[1][p[1]];\n    for(register int i=2,l=0;i<=m;++i,l^=1){\n        for(register int j=1;j<n;++j)\n            for(register int k=j+1;k<=n;++k){\n                if((j^p[i-1])&&(k^p[i-1])){\n                    MIN(f[l][j][k],f[l^1][j][k]+dis[p[i-1]][p[i]]);\n                    p[i-1]<k?MIN(f[l][p[i-1]][k],f[l^1][j][k]+dis[j][p[i]]):MIN(f[l][k][p[i-1]],f[l^1][j][k]+dis[j][p[i]]);\n                    p[i-1]<j?MIN(f[l][p[i-1]][j],f[l^1][j][k]+dis[k][p[i]]):MIN(f[l][j][p[i-1]],f[l^1][j][k]+dis[k][p[i]]);\n                }\n                f[l^1][j][k]=INF;\n            }\n    }\n    for(register int i=1;i<=n;++i)if(i^p[m])for(register int j=i+1;j<=n;++j)if(j^p[m])MIN(ans,f[m&1][i][j]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1554904315,
        "uid": 28913,
        "name": "Utsuji_rissh\u016b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4046 [JSOI2010]\u5feb\u9012\u670d\u52a1"
    },
    {
        "content": "\u8fd9\u9898**\u662f\u4ec0\u4e48\u9b3c\uff0c\u591a\u4e00\u7ef4\u6570\u7ec4\u5c31\u6210\u4e86\u5927\u5e38\u6570\uff0c\u5c11\u4e00\u7ef4\u5c31AC\u4e86\uff1f\n\n\u5934\u4e00\u56de\u542c\u5230\u7a7a\u95f4\u5361\u65f6\u95f4\u7684\u3002\n\n\uff08\u840c\u65b0\u6c42\u6559\uff0c\u8bbf\u95ee\u6709\u8fd9\u4e48\u6162\u7684\u4e48\uff1f\uff09\n\n---\n\u597d\u7684\u8fdb\u5165\u6b63\u6587\n\n\n>>\u8089\u773c\u89c2\u5bdf\u5f97\u51fa\u8fd9\u9898\u662f dp\n\n>>\u90a3\u4e48\u6211\u4eec\u9996\u5148\u8003\u8651\u88f8\u7684\u66b4\u529b\u8f6c\u79fb\n\n>>\u66b4\u529b\u8f6c\u79fb\u7684\u8bdd\uff0c\u5c31\u662f $O( n \\times m^{3}) $ \u53bb\u679a\u4e3e\u5f53\u524dstep\uff0c \u4ee5\u53ca\u4e0a\u4e00\u6b21\u4e09\u8f86\u8f66\u7684\u4f4d\u7f6e\n\n>>\u7136\u540e\u8fd9\u6837\u5927\u6982\u662f $60\\  plus $\uff08\u5e38\u6570\u5c0f\u7684\u8bdd...\uff09\n\n>>\u90a3\u4e48\u6211\u4eec\u8003\u8651\u8fdb\u4e00\u6b65\u4f18\u5316 \n\n>>\u4e8e\u662f\u8089\u773c\u5f97\u51fa: \u5176\u5b9e\u4e0a\u4e00\u6b21\u4e09\u8f86\u8f66\u7684\u4f4d\u7f6e\u6709\u4e00\u8f86\u4e0d\u7528\u679a\u4e3e\uff0c\u5c31\u662f\u4e0a\u6b21\u4efb\u52a1\u8981\u53bb\u7684\u4f4d\u7f6e\uff0c\u800c\u5f53\u524d\u4f4d\u7f6e\u540c\u7406\uff0c\u53ea\u9700\u8981\u7ba1\u597d\u5269\u4e0b\u4e24\u8f86\u8f66\u4e0d\u8981\u7ffb\u5c31\u597d\u4e86\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u590d\u6742\u5ea6\u91cc\u9762\u7684\u4e00\u4e2a m \u7ed9\u53bb\u6389\u4e86\uff0c\u7136\u540e\u590d\u6742\u5ea6\u5c31\u6b63\u786e\u4e86\u3002\uff08\u5176\u5b9e\u4e0d\u96be\u60f3\u554a...\uff09\n\n>>\u5bf9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u56e0\u4e3a\u6211\u667a\u969c\u822c\u7684\u8fd8\u662f\u5f00\u4e86\u4e09\u7ef4\u6570\u7ec4\uff0c\u5176\u4e2d n \u4e00\u7ef4\u6eda\u6389\u3002\u7136\u540e T \u6389\u4e86\u3002~~\u6015\u4e0d\u662f\u6709\u6bd2\u3002~~\n\n```\n//by Judge\n#include<cstdio>\n#include<cstring>\n#include<iostream>\nusing namespace std;\nconst int inf=1e9+7;\nconst int M=205;\ninline void cmin(int& a,int b){if(a>b)a=b;}\nint n,m,x,y,ans=inf,d[M][M],f[2][M][M];\nint main(){\n\tfreopen(\"express10.in\",\"r\",stdin);\n\tscanf(\"%d\",&n),\n\tmemset(f,0x3f,sizeof(f));\n\t#define rint register int\n\tfor(rint i=1;i<=n;++i)\n\t\tfor(rint j=1;j<=n;++j)\n\t\t\tscanf(\"%d\",&d[i][j]);\n\trint w=1,h=0;\n\tif(~scanf(\"%d\",&y)){\n\t\tcmin(f[1][1][2],d[3][y]),\n\t\tcmin(f[1][1][3],d[2][y]),\n\t\tcmin(f[1][2][3],d[1][y]);\n\t} else return !puts(\"0\");\n\tfor(;~scanf(\"%d\",&x);y=x){ w^=1,h^=1;\n\t\tfor(rint i=1;i<=n;++i)\n\t\t\tfor(rint j=1;j<=n;++j)\n\t\t\t\tf[w][i][j]=inf;\n\t\tfor(rint i=1;i<=n;++i) for(rint j=1;j<=n;++j)\n\t\t\tcmin(f[w][i][j],f[h][i][j]+d[y][x]),\n\t\t\tcmin(f[w][i][y],f[h][i][j]+d[j][x]),\n\t\t\tcmin(f[w][j][y],f[h][i][j]+d[i][x]);\n\t}\n\tfor(rint i=1;i<=n;++i)\n\t\tfor(rint j=1;j<=n;++j)\n\t\t\tcmin(ans,f[w][i][j]);\n\treturn !printf(\"%d\\n\",ans);\n}\n```\n",
        "postTime": 1542970712,
        "uid": 38576,
        "name": "J\u03bcdge",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4046 \u3010[JSOI2010]\u5feb\u9012\u670d\u52a1\u3011"
    }
]
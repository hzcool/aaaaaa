[
    {
        "content": "# T4 [\u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c](https://www.luogu.org/problemnew/show/T55040)\n\n\n~~\u4e4b\u524d\u662f[\u8fd9\u9053\u9898](https://www.luogu.org/problemnew/show/T54860)\u7684\uff0c\u56e0\u4e3a\u592a\u6c34\u4e86\u5c31\u6362\u4e86~~\n\n\u672c\u9898\u53d7 [[SCOI2005]\u4e92\u4e0d\u4fb5\u72af](https://www.luogu.org/problemnew/show/P1896)\uff0c[[AHOI2009]\u4e2d\u56fd\u8c61\u68cb](https://www.luogu.org/problemnew/show/P2051)\uff0c[[NOI2001]\u70ae\u5175\u9635\u5730](https://www.luogu.org/problemnew/show/P2704) \u542f\u53d1\u800c\u51fa\n\n## $20pts$ \u7206\u641c\n\n\u7206\u641c\u5e94\u8be5\u53ef\u4ee5\u62ff\u4e2a$20$\u5206\n\n[2AC & 8TLE](https://www.luogu.org/record/show?rid=13096718)\n\n## $50$~$80pts $ \u72b6\u538bdp\n\n\u4e0d\u59a8\u8bbe$dp[i][j][k]$\u4e3a\u8003\u8651\u5230\u7b2c$i$\u884c\uff0c\u672c\u884c\u72b6\u6001\u4e3a$j$\uff0c\u4e0a\u4e00\u884c\u72b6\u6001\u4e3a$k$\u7684\u65b9\u6848\u6570\n\n### \u521d\u59cb\u5316\n\n\u5148\u521d\u59cb\u5316\u7b2c$1$\u884c\u548c\u7b2c$2$\u884c\uff0c\u7136\u540edp\n\n\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u628a\u72b6\u6001$i$\u53ef\u4ee5\u653b\u51fb\u5230\u72b6\u6001$j$\u6216\u8005\u53cd\u8fc7\u6765\uff0c\u7edf\u79f0\u4e3a$i$\u4e0e$j$\u51b2\u7a81\n\n```cpp\nfor(register int i=0; i< (1<<y); ++i )\tdp[1][i][0]=1;//\u7b2c\u4e00\u884c\u600e\u4e48\u653e\u90fd\u884c\uff0c\u56e0\u4e3a\u540c\u4e00\u884c\u4e0d\u53ef\u80fd\u51b2\u7a81\n\nfor(register int i=0; i< (1<<y) ; ++i) {\n    for(register int j=0; j< (1<<y) ; ++j) {\n        if(i\u4e0ej\u51b2\u7a81)\tcontinue;\n        dp[2][j][i]+=dp[1][i][0];\n    }\n}\n```\n\n### \u8f6c\u79fb\n\n\u56db\u5c42\u66b4\u529b\u679a\u4e3e$i,j,k,s$\u5206\u522b\u8868\u793a\n\n$i$ \u5f53\u524d\u8003\u8651\u7684\u884c\u6570\n\n$j$ \u5f53\u524d\u8003\u8651\u7684\u884c\u6570\u7684\u72b6\u6001\n\n$k$ \u4e0a\u4e00\u884c\u7684\u72b6\u6001\n\n$s$ \u4e0a\u4e0a\u884c\u7684\u72b6\u6001\n\n```cpp\nfor(register int i=3; i<=x; ++i) {\n\t\tfor(register int j=0; j< (1<<y); ++j) {\n\t\t\tfor(register int k=0; k< (1<<y); ++k) {\n\t\t\t\tif(j\u4e0ek\u51b2\u7a81)\tcontinue;\n\t\t\t\tfor(register int s=0; s< (1<<y) ; ++s) {\n\t\t\t\t\tif(s\u4e0ek\u51b2\u7a81||s\u4e0ej\u51b2\u7a81)\tcontinue;\n\t\t\t\t\tdp[i][j][k]+=dp[i-1][k][s];\n\t\t\t\t\tdp[i][j][k]%=mod;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n```\n\n### \u5224\u65ad\u51b2\u7a81\n\n\u6211\u4eec\u9700\u8981$2$\u4e2a\u51fd\u6570\u6765\u5224\u65ad\u51fa\u67d0\u4e00\u884c\u53ef\u4ee5\u653b\u51fb\u5230\u7684\u8303\u56f4\n\n![](https://cdn.luogu.com.cn/upload/pic/40826.png )\n\n\u6211\u4eec\u7528\u51fd\u6570$at$_$bt(a)$\u8ba1\u7b97\u51fa\u7ea2\u7ebf\u7ecf\u8fc7\u7684\u653b\u51fb\u8303\u56f4\uff0c\u56fe\u4e2d\u4e3a$(01000100)_2$\n\n\u7528\u53e6\u4e00\u4e2a\u51fd\u6570$at$_$3(a,b)$\u8868\u793a\u7b2c$i$\u884c\u4e3a\u72b6\u6001$a$,\u7b2c$i+1$\u884c\u72b6\u6001\u4e3a$b$,\u7b2c$i$\u884c\u53ef\u4ee5\u653b\u51fb\u5230$i+2$\u884c\u7684\u8303\u56f4\uff08\u56fe\u4e2d\u9ec4\u8272\u7ebf\u7ecf\u8fc7\u7684\u533a\u57df\uff09\uff0c\u56fe\u4e2d\u4e3a$(00101000)_2$\n\n\u5148\u8bbe\u8ba1$at$_$bt(a)$,\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff08\u7ea2\u8272\u4ee3\u8868\u653e\u4e86\u9a6c\uff09\n\n![](https://cdn.luogu.com.cn/upload/pic/40829.png )\n\n\u4ece\u53f3\u5f80\u5de6\u8003\u8651\n\n\u7b2c\u4e00\u4e2a\u683c\u5b50\u6ca1\u6709\u9a6c\uff0c\u4e0b\u4e00\u4e2a\n\n\u7b2c\u4e8c\u4e2a\u683c\u5b50\u6709\u9a6c\uff0c\u53f3\u8fb9\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6ca1\u6709\uff0c\u90a3\u4e48\u53ef\u4ee5\u653b\u51fb\u7b2c\u4e8c\u884c\u5f80\u53f3\u6570\u7b2c\u4e8c\u4e2a\u683c\u5b50\uff0c\u5de6\u8fb9\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6709\uff0c\u90a3\u4e48\u653b\u51fb\u4e0d\u5230\u7b2c\u4e8c\u884c\u5f80\u5de6\u6570\u7b2c\u4e8c\u4e2a\u683c\u5b50\n\n\u4e8e\u662f\u7b2c\u4e8c\u884c\u53d8\u6210\n\n![](https://cdn.luogu.com.cn/upload/pic/40830.png )\n\n\u7b2c\u4e09\u4e2a\u683c\u5b50\u6709\u9a6c\uff0c\u53f3\u8fb9\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6709\uff0c\u90a3\u4e48\u653b\u51fb\u4e0d\u5230\u7b2c\u4e8c\u884c\u5f80\u53f3\u6570\u7b2c\u4e8c\u4e2a\u683c\u5b50\uff0c\u5de6\u8fb9\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6ca1\u6709\uff0c\u90a3\u4e48\u53ef\u4ee5\u653b\u51fb\u7b2c\u4e8c\u884c\u5f80\u5de6\u6570\u7b2c\u4e8c\u4e2a\u683c\u5b50\n\n\u4e8e\u662f\u7b2c\u4e8c\u884c\u53d8\u6210\n\n![](https://cdn.luogu.com.cn/upload/pic/40832.png)\n\n\u6309\u7167\u8fd9\u6837\uff0c\u6700\u7ec8\u7b2c\u4e8c\u884c\u53d8\u6210\u4e86\n\n![](https://cdn.luogu.com.cn/upload/pic/40834.png )\n\n\u653b\u51fb\u8303\u56f4\u5c31\u662f$(01010100)_2$\n\n\u4e8e\u662f\u6211\u4eec\u5f88\u81ea\u7136\u7684\u5199\u51fa\u8fd9\u6837\u7684\u4ee3\u7801\n\n```cpp\ninline int bit(int a,int x){\n\t//\u8fd4\u56dea\u7684\u4e8c\u8fdb\u5236\u7b2cx\u4f4d\u5e76\u4fdd\u7559\u53f3\u4fa7\u76840\n\t//\u4e5f\u5c31\u662f\u8bf4bit(5,3)==4\n    if(x<1)\treturn 0;\n    return a&(1<<(x-1));\n}\ninline int check(int a,int x){ //\u8fd4\u56dea\u7684\u4e8c\u8fdb\u5236\u7b2cx\u4f4d\u662f\u5426\u4e3a1\n\tif(x<1)\treturn 0;\n    if(a&(1<<(x-1)))\treturn 1;\n    return 0;\n}\n\nint at_bt(int a){ //\u6c42\u51fa\u72b6\u6001a\u5bf9\u4e8e\u4e0b\u4e00\u884c\u7684\u653b\u51fb\u8303\u56f4\n    int c=0;\n    for(register int i=1; bit(-1,i)<=a; ++i){\n        if(!check(a,i))\tcontinue; //\u5224\u65ad\u6709\u9a6c\n        if(check(a,i)&check(a,i-1));\n        else c|=bit(-1,i-2); //\u540c\u4e0b\n        if(check(a,i)&check(a,i+1));\n        else c|=bit(-1,i+2); //\u6ce8\u610f\u662f|\n    }\n    return c;\n}\n```\n\n\u7136\u540e\u8003\u8651\u8bbe\u8ba1$at$_$3(a,b)$\uff0c\u8fd9\u4e2a\u6bd4\u8f83\u7b80\u5355\uff0c\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff08\u6682\u4e14\u4e0d\u8003\u8651\u8fd9\u4e24\u884c\u7684\u77db\u76fe\uff09\n\n![](https://cdn.luogu.com.cn/upload/pic/40836.png )\n\n\u4f9d\u7136\u7b2c\u4e00\u884c\u4ece\u53f3\u5f80\u5de6\u8003\u8651\n\n\u7b2c\u4e00\u4e2a\u683c\u5b50\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6ca1\u6709\uff0c\u4e0b\u4e00\u4e2a\n\n\u7b2c\u4e8c\u4e2a\u683c\u5b50\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6709\uff0c\u4e0b\u4e00\u884c\u7684\u7b2c\u4e8c\u4e2a\u683c\u5b50\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6709\uff0c\u6240\u4ee5\u88ab\u522b\u4f4f\u4e86\uff0c\u4e0b\u4e00\u4e2a\n\n\u7b2c\u4e09\u4e2a\u683c\u5b50\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6709\uff0c\u4e0b\u4e00\u884c\u7684\u7b2c\u4e8c\u4e2a\u683c\u5b50\u6709\u6ca1\u6709\u9a6c\uff1f\n\n\u6ca1\u6709\uff0c\u6240\u4ee5\u4e0d\u4f1a\u88ab\u522b\u4f4f\uff0c\u5c31\u53ef\u4ee5\u653b\u51fb\u4e0b\u65b9\u7684\u4e24\u4e2a\u683c\u5b50\uff0c\u4e8e\u662f\u53d8\u4e3a\n\n![](https://cdn.luogu.com.cn/upload/pic/40837.png)\n\n\u4e8e\u662f\u4e4e\u8fd9\u6837\u5b50\uff0c\u6700\u540e\u53d8\u4e3a\n\n![](https://cdn.luogu.com.cn/upload/pic/40838.png)\n\n\u4e8e\u662f\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u7136\u7684\u5199\u51fa\u4e0b\u5217\u4ee3\u7801\n\n```cpp\nint at_3(int a,int b){\n\t//a\u8868\u793a\u7b2c\u4e00\u884c\u72b6\u6001\n    //b\u8868\u793a\u7b2c\u4e8c\u884c\u72b6\u6001\n    int c=0;\n    for(register int i=1; bit(-1,i)<=a; ++i){\n        if(!check(a,i))\tcontinue;\n        if(check(a,i)&check(b,i));\n        else c|=bit(-1,i-1),c|=bit(-1,i+1);//\u6ce8\u610f\u662f|\n    }\n    return c;\n}\n```\n\n\u4e8e\u662f\u95ee\u9898\u89e3\u51b3\u4e86\uff0c\u4e4b\u524d\u7684\u8f6c\u79fb\u4ee3\u7801\u53ef\u4ee5\u6539\u6210\n\n```cpp\n    for(register int i=3; i<=x; ++i) {\n\tfor(register int j=0; j< (1<<y); ++j) {\n\t\tfor(register int k=0; k< (1<<y); ++k) {\n\t\t\tif(at_bt(k)&j||at_bt(j)&k)\tcontinue;\n\t\t\tfor(register int s=0; s< (1<<y) ; ++s) {\n\t\t\t\tif(at_bt(s)&k|| at_bt(k)&s ||at_3(s,k)&j || at_3(j,k)&s)\tcontinue;\n\t\t\t\tdp[i][j][k]+=dp[i-1][k][s];\n\t\t\t\tdp[i][j][k]%=mod;\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n\u6700\u540e\u7edf\u8ba1\u7b54\u6848\n\n```cpp\nlong long ans=0;\nfor(register int i=0; i<(1<<y); ++i) {\n\tfor(register int j=0; j<(1<<y); ++j) {\n\t\tif(at_bt(i)&j||at_bt(j)&i)\tcontinue;\n\t\tans+=dp[x][i][j];\n\t\tans%=mod;\n\t}\n}\n```\n\n## $100pts$ \u6eda\u52a8\u6570\u7ec4\u4f18\u5316\n\n\u60a8\u6ce8\u610f\u5230$1MB$\u7684\u7a7a\u95f4\u9650\u5236\u4e86\uff0c\u7136\u540e\u5c31\u6765\u4f18\u5316\u7a7a\u95f4\u5427\uff0c\u628a\u6240\u6709\u679a\u4e3e\u884c\u6570\u7684\u90fd\u52a0\u4e0a$\\mod 3$\u5c31\u597d\u4e86\uff0c\u6700\u540e\u7edf\u8ba1\u7b54\u6848\u4e5f\u8981\u52a0\u4e0a\uff01\n\n## $100pts$ \u65f6\u95f4\u4f18\u5316\n\n\u4e3a\u4e86\u65f6\u95f4\u597d\u770b\u4e00\u70b9\uff0c\u60a8\u53ef\u4ee5\u50a8\u5b58\u653b\u51fb\u8303\u56f4\uff0c\u65f6\u95f4\u4f1a\u5927\u5927\u52a0\u5feb\uff0c\u7a7a\u95f4\u4e5f\u4e0d\u4f1a\u70b8\uff01\n\n## $100pts$ \u6253\u8868\n\n\u55ef\u2026\u2026\u524d\u63d0\u662f\u60a8\u8981\u6253\u5f97\u51fa\u6765",
        "postTime": 1541395421,
        "uid": 47863,
        "name": "Imakf",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5005 \u3010\u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\u3011"
    },
    {
        "content": "# \u76f8\u4fe1\u81ea\u5df1\u7684\u505a\u6cd5 \u5927\u558a\u4e00\u58f0 I won't MLE\uff01\n\n\u4e4b\u540e\u6211\u5c31MLE\u4e86 \uff08\u5c34\u5c2c\uff09\n\n\u5148\u770b\u9898\u76ee \u9898\u610f\u7b80\u660e \n\n\u56e0\u4e3a Y\u22646 \u6240\u4ee5\u538bY\u8fd9\u4e00\u884c\u7684\n\n\u56e0\u4e3a\u9a6c\u7684\u653b\u51fb\u8303\u56f4\u6709\u4e24\u884c \u6240\u4ee5\u538b\u4e24\u884c\u7684\u72b6\u6001\n\n\u601d\u8def\u5f88\u597d\u60f3 \u65b9\u7a0b\u4e5f\u5f88\u597d\u63a8 \n\n\u7136\u800c\u672c\u9898\u96be\u70b9\u6765\u4e86 \u600e\u4e48\u5224\u65ad\u4e24\u79cd\u72b6\u6001\u4e0d\u51b2\u7a81\n\n\u5148\u770b\u4e24\u884c\u7684\u5224\u65ad\n\n```cpp\ninline bool Ch1(int k1,int k2)\n{\n\tint T= (~(((k1>>1)&k1)>>1)) , K ; K =(T&k2);\n\tif((k1>>2)&K) return 0;\n\tT= (~(((k1<<1)&k1)<<1)) ; K=(T&k2);\n\tif((k1<<2)&K) return 0;\n\treturn 1;\n}\n```\n\nk1\u662f\u5728k2\u7684\u4e0a\u9762\n\n\u4f4d\u8fd0\u7b97\u4e00\u4e2a\u4e2a\u5206\u6790\n\n\u4e24\u884c\u4e4b\u95f4\u7684\u653b\u51fb\u7684\u9a6c\u811a\u5728\u672c\u884c\u4e0a\n\n (k1>>1)&k1 \u627e\u7684\u662f\u5411\u53f3\u4e0b\u65b9\u653b\u51fb\u7684\u9a6c\u811a \n \n \u518d\u53f3\u79fb\u5c31\u662f\u88ab\u5835\u4f4f\u653b\u51fb\u4e0d\u5230\u7684\u5730\u65b9 \n \n \u4e4b\u540e\u518d\u628a\u653b\u51fb\u4e0d\u5230\u7684\u5730\u65b9\u5728k2\u4e2d\u62ff\u8d70\n \n \u518d\u8fdb\u884c\u5224\u65ad\u4e0d\u5c31OK\u4e86\u5417 \n \n \u4e4b\u540e k1 k2 \u5012\u4e00\u4e0b\u8fd8\u5f97\u5224\u65ad\u4e00\u904d\n \n \u540c\u7406  \u81ea\u884c\u7406\u89e3\u8de8\u884c\u7684\u653b\u51fb\u5224\u65ad\n \n ```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint MS,n,m;\nint f[105][1<<6][1<<6],M=1e9+7;\ninline bool Ch1(int k1,int k2,bool I)\n{\n\tint T= (~(((k1>>1)&k1)>>1)) , K ; K =(T&k2);\n\tif((k1>>2)&K) return 0;\n\tT= (~(((k1<<1)&k1)<<1)) ; K=(T&k2);\n\tif((k1<<2)&K) return 0;\n\tif(I) return 1;\n\t  else return 1&Ch1(k2,k1,1);\n}\ninline bool Ch2(int k1,int k2,int k3,bool I)\n{\n\tint T= (~((k1&k2)>>1)) , K; K=(T&k3);\n\tif((k1>>1)&K) return 0;\n\tT= (~((k1&k2)<<1)); K=(T&k3);\n\tif((k1<<1)&K) return 0;\n\tif(I) return 1;\n\t  else return 1&Ch2(k3,k2,k1,1);\n}\nint main()\n{\n\tcin>>n>>m;\n\tMS=(1<<m);\n\tfor(int i=0;i<MS;i++)\n\t f[1][i][0]=1;\n\tfor(int i=0;i<MS;i++)\n\t  for(int j=0;j<MS;j++)\n\t   if(Ch1(i,j,0)) f[2][i][j]=1;\n\tfor(int i=3;i<=n;i++)\n     for(int j=0;j<MS;j++)\n       for(int k1=0;k1<MS;k1++)\n         if(Ch1(j,k1,0)) \n           for(int k2=0;k2<MS;k2++)\n            if(Ch1(k1,k2,0)&&Ch2(j,k1,k2,0))\n              f[i][j][k1]=(f[i][j][k1]+f[i-1][k1][k2])%M;\n    int ans=0;\n     for(int j=0;j<MS;j++)\n       for(int k=0;k<MS;k++)\n        ans=(ans+f[n][j][k])%M;\n    cout<<ans<<endl;\n\treturn 0;\n}\n```\n\n\u6b22\u559c\u7684\u6253\u5b8c\u4ee3\u7801 \u4e4b\u540e\n\n# \u5927\u543c\u4e00\u58f0 \uff1a\u201c I MLE \u4e86\u201d\n\n\u4e4b\u540e\u6eda\u5230\u9898\u89e3\u533a\u5b66\u4e60\u6eda\u52a8\u6570\u7ec4\n\n\u6eda\u52a8\u6570\u7ec4\u7684\u5927\u6982\u610f\u4e49\u5982\u4e0b \uff1a\n\n\u6253\u4e2a\u6bd4\u65b9\u4f60\u5728\u505a63\u884c\u4e86\n\n\u8bf7\u95ee 59 \u884c\u7684\u9009\u53d6\u65b9\u6848\u5bf9\u73b0\u5728\u7684\u65b9\u6848\u8fd8\u6709\u8d21\u732e\u5417\n\n\u663e\u7136\u5df2\u7ecf\u6ca1\u7528\u4e86\u554a\n\n\u4e3a\u4ec0\u4e48\u4e0d\u53bb\u5229\u752859\u884c\u4ee5\u4e0a\u7684\u7a7a\u95f4\u5462 \n\n\u4e3a\u4ec0\u4e48\u8fd8\u8981\u65b0\u5f00\u7a7a\u95f4\u53bb\u505a\u5462 \n\n\u7406\u89e3\u4e4b\u540e\u4ee3\u7801\u5c31\u6ca1\u95ee\u9898\u4e86\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint MS,n,m;\nint f[4][1<<6][1<<6],M=1e9+7;\ninline bool Ch1(int k1,int k2,bool I)\n{\n\tint T= (~(((k1>>1)&k1)>>1)) , K ; K =(T&k2);\n\tif((k1>>2)&K) return 0;\n\tT= (~(((k1<<1)&k1)<<1)) ; K=(T&k2);\n\tif((k1<<2)&K) return 0;\n\tif(I) return 1;\n\t  else return 1&Ch1(k2,k1,1);\n}\ninline bool Ch2(int k1,int k2,int k3,bool I)\n{\n\tint T= (~((k1&k2)>>1)) , K; K=(T&k3);\n\tif((k1>>1)&K) return 0;\n\tT= (~((k1&k2)<<1)); K=(T&k3);\n\tif((k1<<1)&K) return 0;\n\tif(I) return 1;\n\t  else return 1&Ch2(k3,k2,k1,1);\n}\nint main()\n{\n\tcin>>n>>m;\n\tMS=(1<<m);\n\tfor(int i=0;i<MS;i++)\n\t f[1][i][0]=1;\n\tfor(int i=0;i<MS;i++)\n\t  for(int j=0;j<MS;j++)\n\t   if(Ch1(i,j,0)) f[2][i][j]=1;\n\tfor(int i=3;i<=n;i++)\n    {\n      memset(f[i%3],0,sizeof(f[i%3]));\n      for(int j=0;j<MS;j++)\n       for(int k1=0;k1<MS;k1++)\n         if(Ch1(j,k1,0)) \n           for(int k2=0;k2<MS;k2++)\n            if(Ch1(k1,k2,0)&&Ch2(j,k1,k2,0))\n              f[i%3][j][k1]=(f[i%3][j][k1]+f[(i-1)%3][k1][k2])%M; \n    }\n    int ans=0;\n     for(int j=0;j<MS;j++)\n       for(int k=0;k<MS;k++)\n        ans=(ans+f[n%3][j][k])%M;\n    cout<<ans<<endl;\n\treturn 0;\n}\n```\n\n\u8fd8\u6709\u4e00\u5806\u4f18\u5316 ~~~~~~~\n\n2^6\u5f88\u5bbd\u88d5\u5c31\u4e0d\u53bb\u4f5c\u6b7b\u4e86",
        "postTime": 1567688409,
        "uid": 100114,
        "name": "hater",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5005 \u3010\u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\u3011"
    },
    {
        "content": "\u8ba9\u6211\u4eec\u6765\u7528 35 \u884c\u4ee3\u7801 A \u6389\u6b64\u9898\u3002\n# \u9898\u76ee\u5206\u6790\n\u9996\u5148\u6570\u636e\u8303\u56f4 $X \\le 100,Y \\le 6$ \u63d0\u9192\u6211\u4eec\uff0c\u8fd9\u9898\u7528\u72b6\u538b dp\u3002\n\n\u7136\u540e\u53c8\u53d1\u73b0\u524d\u4e24\u884c\u6446\u9a6c\u7684\u72b6\u51b5\u4f1a\u5f71\u54cd\u5f53\u524d\u884c\u7684\u5c40\u9762\u7684\u5408\u6cd5\u6027\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u679a\u4e3e\u524d\u4e09\u884c\u6446\u9a6c\u7684\u72b6\u51b5\u3002\n\n\u6240\u4ee5\u6211\u4eec\u8bbe\u8ba1\u72b6\u6001 $dp_{i,j,k}$ \u8868\u793a\u7b2c $i$ \u884c\u5c40\u9762\u4e3a $j$\uff0c\u7b2c $i-1$ \u884c\u5c40\u9762\u4e3a $k$ \u7684\u65b9\u6848\u6570\u3002\n\n\u5176\u4e2d $j,k$ \u5747\u662f\u4e8c\u8fdb\u5236\u7684\u8868\u793a\uff0c\u6bd4\u5982\u4e0b\u56fe\uff1a\n![](https://cdn.luogu.com.cn/upload/image_hosting/jlv6naiu.png)\n\u8fd9\u4e00\u884c\u5c31\u53ef\u4ee5\u8868\u793a\u4e3a\u4e8c\u8fdb\u5236\u7684 $101001$\uff0c\u5373\u5341\u8fdb\u5236\u7684 $41$\u3002\n\n\u6240\u4ee5\u6211\u4eec\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u662f\uff1a\n$$ dp_{i,j,k}=sum(dp_{i-1,k,l})$$\n\u5176\u4e2d j,k,l \u9700\u8981\u6ee1\u8db3\u7ec4\u6210\u7684\u5c40\u9762\u4e2d\u7684\u9a6c\u4e92\u4e0d\u4fb5\u72af\u3002\n\n\u6240\u4ee5\u6700\u540e\u7684\u7b54\u6848\u5c31\u662f\n\n$$\\sum^s_{i=0}\\sum^s_{j=0}dp_{x,i,j}$$\n\n\u5176\u4e2d s \u662f\u8fd9\u4e00\u884c\u7684\u6240\u6709\u65b9\u6848\u3002\n\n\u7136\u800c\u6211\u4eec\u7a7a\u95f4\u53ea\u7ed9\u4e86\u6211\u4eec 1MB\uff0c\u800c dp \u6570\u7ec4\u5f00\u6ee1\u9700\u8981\n$$100 \\times 64 \\times 64 \\times 2B= 819200B = 800KB$$\n\u5176\u4ed6\u6240\u9700\u7684\u5185\u5b58\u52a0\u8d77\u6765\u5c31 MLE \u4e86\uff0c\u6240\u4ee5\u5c31\u6709\u4e86\u9898\u76ee\u80cc\u666f\u4e0a\u7684\u8bdd\u3002\u53d1\u73b0\u7b2c i \u884c\u7684\u72b6\u6001\u8f6c\u79fb\u53ea\u9700\u8981 i-1 \u884c\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u6253\u4e2a\u4e0d\u592a\u6070\u5f53\u7684\u6bd4\u55bb\u3002\u5c31\u50cf\u4f60\u5728\u673a\u623f\u91cc\uff0c\u53d1\u73b0\u7535\u8111\u4e0d\u591f\u4e86\uff0c\u8fd8\u6b63\u597d\u6709\u4eba\u5728\u5927\u6446\uff0c\u4f60\u5c31\u53ef\u4ee5\u8ddf\u8001\u5e08\u4e3e\u62a5\u4ed6\u628a\u4ed6\u8d76\u51fa\u53bb\uff0c\u4f60\u5c31\u53ef\u4ee5\u7528\u4ed6\u7684\u7535\u8111\u4e86\uff0c\u4e0d\u8fc7\u6570\u636e\u8981\u6e05\u4e00\u4e0b ~~\uff0c\u5426\u5219\u5c31\u6210JC\u4e86~~\u3002\n\n\u5177\u4f53\u770b\u4ee3\u7801\uff1a\n```cpp#include<bits/stdc++.h>\nusing namespace std;\n#define MOD 1000000007\nint x,y,s,dp[3][65][65],ans;\nint main()\n{\n\tscanf(\"%d%d\",&x,&y);\n\tif(x==1)//\u7279\u5224\n\t{\n\t\tprintf(\"%d\",1<<y);\n\t\treturn 0;\n\t}\n\tfor(int i=2;i<=x;++i)//\u679a\u4e3e\u6240\u6709\u884c\n\t{\n\t\tfor(int j=0;j<(1<<y);++j)//\u679a\u4e3e\u5f53\u524d\u884c\n\t\t\tfor(int k=0;k<(1<<y);++k)//\u679a\u4e3e\u4e0a\u4e00\u884c\n\t\t\t{\n\t\t\t\tdp[i&1][j][k]=0;//\u7531\u4e8e\u662f\u6eda\u52a8\u6570\u7ec4\uff0c\u5728\u7528\u524d\u4e00\u5b9a\u8981\u6e05\u96f6\n\t\t\t\tif(#)//\u524d\u4e24\u884c\u662f\u5426\u5408\u6cd5\n\t\t\t\t{\n\t\t\t\t\tif(i==2)\n\t\t\t\t\t\tdp[0][j][k]=1;//\u53ea\u6709\u4e24\u884c\u4e14\u662f\u6211\u4eec\u679a\u4e3e\u7684\u4e24\u884c\n\t\t\t\t\telse\n\t\t\t\t\t\tfor(int l=0;l<(1<<y);++l)//\u679a\u4e3e\u4e0a\u4e0a\u884c\n\t\t\t\t\t\t\tif(#)//\u6b64\u884c\u548c\u4e0a\u4e0a\u884c\u662f\u5426\u5408\u6cd5\n\t\t\t\t\t\t\t\tdp[i&1][j][k]=(dp[i&1][j][k]+dp[(i&1)^1][k][l])%MOD;//\u7edf\u8ba1\u7b54\u6848\n\t\t\t\t}\n\t\t\t}\n\t}\n\tfor(int i=0;i<1<<y;++i)\n\t\tfor(int j=0;j<1<<y;++j)\n\t\t\tans=(ans+dp[x&1][i][j])%MOD;//\u7edf\u8ba1\u7b54\u6848\n\tprintf(\"%d\",ans);//\u8f93\u51fa\u89e3\n\treturn 0;\n}\n```\n\u5230\u8fd9\u91cc\u5c31\u7ed3\u675f\u4e86\uff1f\n\n\u4e0d\u3002\u4ee3\u7801\u4e2d\u6709\u4e24\u6bb5\u4ee3\u7801\u88ab\u7528 # \u4ee3\u66ff\u4e86\uff0c\u8fd9\u91cc\u662f\u6211\u7528\u6765\u5224\u65ad\u5408\u6cd5\u6027\u7684\uff0c\u5b83\u4eec\u624d\u662f\u8fd9\u7bc7\u9898\u89e3\u7684\u91cd\u70b9\u3002\n# \u516c\u5f0f\u63a8\u5bfc\n\u7531\u4e8e\u6211\u4eec\u7684\u72b6\u6001\u662f\u7528\u4e8c\u8fdb\u5236\u8868\u793a\u7684\uff0c\u6240\u4ee5\u5148\u4e86\u89e3\u51e0\u4e2a\u4f4d\u8fd0\u7b97\u7b26\u548c\u903b\u8f91\u8fd0\u7b97\u7b26\uff0c\u4ee5\u4fbf\u516c\u5f0f\u8868\u8fbe\uff1a\n\n\uff08\u7531\u4e8e\u6bcf\u884c\u53ea\u6709 y \u4e2a\u4f4d\u7f6e\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u8868\u793a\u72b6\u6001\u7684\u6570\u4e5f\u53ea\u9700 y \u4e2a\u4e8c\u8fdb\u5236\u4f4d\u3002\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d y \u4e3a 5\u30020b \u5f00\u5934\u7684\u6570\u5b57\u8868\u793a\u4e8c\u8fdb\u5236\u6570\u3002\uff09\n\n- & \u6309\u4f4d\u4e0e\uff1a\u53cc\u76ee\u8fd0\u7b97\u7b26\uff0c\u82e5\u4e24\u4e2a\u6570\u4e2d\u7684\u5bf9\u5e94\u4e8c\u8fdb\u5236\u4f4d\u5747\u4e3a 1\uff0c\u5219\u7b54\u6848\u4e2d\u7684\u5bf9\u5e94\u4e8c\u8fdb\u5236\u4f4d\u4e3a 1\uff0c\u5426\u5219\u4e3a 0\u3002\u5982 `0b10011 & 0b10110 = 0b10010`\u3002\n\n- | \u6309\u4f4d\u6216\uff1a\u53cc\u76ee\u8fd0\u7b97\u7b26\uff0c\u82e5\u4e24\u4e2a\u6570\u4e2d\u7684\u5bf9\u5e94\u4e8c\u8fdb\u5236\u4f4d\u5747\u4e3a 0\uff0c\u5219\u7b54\u6848\u4e2d\u7684\u5bf9\u5e94\u4e8c\u8fdb\u5236\u4f4d\u4e3a 0\uff0c\u5426\u5219\u4e3a 1\u3002\u5982 `0b10011 | 0b10110 = 0b10111`\u3002\n\n- ^ \u6309\u4f4d\u5f02\u6216\uff1a\u53cc\u76ee\u8fd0\u7b97\u7b26\uff0c\u82e5\u4e24\u4e2a\u6570\u4e2d\u7684\u5bf9\u5e94\u4e8c\u8fdb\u5236\u4f4d\u76f8\u540c\uff0c\u5219\u7b54\u6848\u4e2d\u7684\u5bf9\u5e94\u4e8c\u8fdb\u5236\u4f4d\u4e3a 0\uff0c\u5426\u5219\u4e3a 1\u3002\u5982 `0b10011 ^ 0b10110 = 0b00101`\u3002\n\n- ~ \u6309\u4f4d\u53d6\u53cd\uff1a\u5355\u76ee\u8fd0\u7b97\u7b26\uff0c\u628a\u6bcf\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u4e2d\u7684 0 \u53d8\u6210 1\uff0c1 \u53d8\u6210 0\u3002\u5982 `~ 0b10011 = 0b01100`\u3002\n\n- \\<< \u5de6\u79fb\uff1a\u53cc\u76ee\u8fd0\u7b97\u7b26\uff0c\u628a\u5168\u90e8\u4e8c\u8fdb\u5236\u4f4d\u5de6\u79fb\uff0c\u4e0d\u591f\u7684\u88650\u3002\u5982 `0b10011 << 2 = 0b01100`\u3002\n\n- \\>> \u53f3\u79fb\uff1a\u53cc\u76ee\u8fd0\u7b97\u7b26\uff0c\u628a\u5168\u90e8\u4e8c\u8fdb\u5236\u4f4d\u53f3\u79fb\uff0c\u4e0d\u591f\u7684\u88650\uff0c\u5982 `0b10011 >> 2 = 0b00100`\u3002\n\n- && \u903b\u8f91\u4e0e\uff1a\u53cc\u76ee\u8fd0\u7b97\u7b26\uff0c\u82e5\u4e24\u4e2a\u6570\u5747\u4e3a `true`\uff0c\u5219\u7b54\u6848\u4e3a `true`\uff0c\u5426\u5219\u4e3a `false`\u3002\n\n- || \u903b\u8f91\u4e0e\uff1a\u53cc\u76ee\u8fd0\u7b97\u7b26\uff0c\u82e5\u4e24\u4e2a\u6570\u5747\u4e3a false\uff0c\u5219\u7b54\u6848\u4e3a `true`\uff0c\u5426\u5219\u4e3a `false`\u3002\n\n- ! \u903b\u8f91\u975e\uff1a\u5355\u76ee\u8fd0\u7b97\u7b26\uff0c\u82e5\u6b64\u6570\u4e3a `true`\uff0c\u5219\u7b54\u6848\u4e3a `false`\uff0c\u5426\u5219\u4e3a `true`\u3002\n\n~~\u4e0d\u61c2\u5c31\u767e\u5ea6\u5427\u3002~~\n\n\u6ce8\u610f\u5728 C++ \u91cc\uff0c`true` \u4e3a 1\uff0c`false` \u4e3a 0\uff0c\u800c\u6240\u6709\u975e 0 \u6570\u4f1a\u88ab\u5f53\u6210 `true`\uff0c0 \u5219\u4f1a\u88ab\u5f53\u6210 `false`\u3002\n\n\u800c\u4f4d\u8fd0\u7b97\u7b26\u548c\u903b\u8f91\u8fd0\u7b97\u7b26\u7684\u8fd0\u7b97\u987a\u5e8f\u5341\u5206\u7384\u5b66\uff0c\u6240\u4ee5\u5efa\u8bae\u5728\u6bcf\u4e2a\u8fd0\u7b97\u5916\u9762\u52a0\u4e0a\u62ec\u53f7\u4ee5\u9632\u4e07\u4e00\u3002~~\u6253\u8fc7\u7ebf\u6bb5\u6811\u7684\u5e94\u8be5\u77e5\u9053\u5427\u3002~~\n\n---\n\u5148\u770b\u7b2c\u4e00\u4e2a #\uff0c\u5373\u5224\u65ad\u672c\u884c\u4e3a j\uff0c\u4e0a\u4e00\u884c\u4e3a k \u8868\u8fbe\u7684\u72b6\u6001\u4e92\u76f8\u4e4b\u95f4\u662f\u5426\u5408\u6cd5\u3002\n\n\u8981\u662f\u6ca1\u6709\u8e69\u9a6c\u811a\u9650\u5236\u7684\u8bdd\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 k \u5206\u522b\u5de6\u79fb\u548c\u53f3\u79fb\u4e24\u4f4d\uff0c\u4e0e j \u505a\u6309\u4f4d\u4e0e\uff0c\u82e5\u5f97\u5230\u7b54\u6848\u975e 0 \u5219\u53d1\u751f\u51b2\u7a81\u3002\n\n\u4f46\u662f\u6b64\u9898\u6709\u8e69\u9a6c\u811a\u9650\u5236\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5bf9 j \u505a\u9884\u5904\u7406\uff0c\u628a\u8e69\u4e86\u9a6c\u811a\u7684\u4f4d\u53d8\u6210 0\u3002\n\n\u600e\u4e48\u9884\u5904\u7406\u5462\uff1f\n\n\u4ee5 k \u53f3\u79fb\u65f6\u4e3a\u4f8b\uff0c\u53d1\u73b0\u6bcf\u6b21\u8e69\u9a6c\u811a\u7684\u5b50\u603b\u5728 j \u53f3\u8fb9\uff0c\u6240\u4ee5\u628a j \u53f3\u79fb\u4e00\u4f4d\u6765\u79fb\u52a8\u5230\u6bcf\u4e2a\u5b50\u6240\u8e69\u5230\u7684\u5b50\u7684\u5bf9\u5e94\u4f4d\u7f6e\u4e0a\u3002\n\n\u8ba9\u6211\u4eec\u753b\u4e00\u5f20\u771f\u503c\u8868\uff1a\nj|j>>1|~(j>>1)|ans\n:-:|:-:|:-:|:-:\n0|0|1|0\n0|1|0|0\n1|0|1|1\n1|1|0|0\nans \u662f\u5904\u7406\u5b8c\u7684 j\u3002\n\n\u4f60\u5e94\u8be5\u53d1\u73b0\u4e86\uff1a`ans=j&(~(j>>1))`\n\n\u6240\u4ee5 k \u53f3\u79fb\u65f6\u7684\u5b8c\u6574\u5224\u65ad\u5c31\u662f`((j&(~(j>>1)))&(k>>2))`\u3002\u8fd4\u56de\u975e 0 \u503c\u5219\u51b2\u7a81\u3002\n\nk \u5de6\u79fb\u65f6\u5462\uff1f\u9884\u5904\u7406\u65f6\u628a j \u5de6\u79fb\u5c31\u884c\u4e86\u3002\n\n\u6ce8\u610f\u6b64\u5224\u65ad\u5bf9 j,k \u6765\u8bf4\u4e0d\u5bf9\u79f0\uff0c\u6240\u4ee5\u8fd8\u8981\u628a j,k \u4e92\u6362\u518d\u5224\u65ad\u4e00\u6b21\u3002\n\n\u7b2c\u4e00\u4e2a # \u5904\u5b8c\u6574\u4ee3\u7801\uff1a\n\n`!(((j&(~(j>>1)))&(k>>2))||((j&(~(j<<1)))&(k<<2))||(((k&(~(k>>1)))&(j>>2)))||((k&(~(k<<1)))&(j<<2)))`\n\n\u6211\u8fd9\u91cc\u7528\u4e86\u4e00\u4e2a\u8861\u7b49\u5f0f\uff1a`((!a)&&(!b))=!(a||b)`\uff0c\u6765\u8ba9\u5f0f\u5b50\u6539\u8d77\u6765\u66f4\u5feb\u3002\n\n---\n\u7b2c\u4e8c\u4e2a # \u5904\u548c\u7528\u6765\u5224\u65ad\u6b64\u884c\u4e3a j\uff0c\u4e0a\u4e00\u884c\u4e3a k\uff0c\u4e0a\u4e0a\u884c\u4e3a l \u7684\u60c5\u51b5\u662f\u5426\u5408\u6cd5\uff0c\u5373 j,l \u662f\u5426\u51b2\u7a81\u3002\n\u4e3a\u4ec0\u4e48\u4e0d\u5224\u65ad k,l \u662f\u5426\u51b2\u7a81\u5462\uff1f\u56e0\u4e3a k,l \u51b2\u7a81\u65f6 $dp_{i,k,l}$ \u4e3a 0\uff0c\u7edf\u4e0d\u7edf\u8ba1\u5230\u7b54\u6848\u65e0\u6240\u8c13\u3002\n\n\u5176\u5b9e\u5224\u65ad j,l \u662f\u5426\u51b2\u7a81\u548c\u5224\u65ad j,k \u662f\u5426\u51b2\u7a81\u5dee\u4e0d\u591a\u3002\u8f83\u5927\u7684\u533a\u522b\u5c31\u662f\u8e69 j \u9a6c\u811a\u7684\u4e0d\u662f `j<<1` \u548c `j>>1` \u4e86\uff0c\u800c\u662f k\u3002\n\n\u7b2c\u4e8c\u4e2a # \u5904\u5b8c\u6574\u4ee3\u7801\uff1a\n\n`!(((j&(~k))&(l>>1))||((j&(~k))&(l<<1))||((l&(~k))&(j>>1))||((l&(~k))&(j<<1)))`\n\n# \u6700\u540e\n\u5b8c\u6574\u4ee3\u7801\u5c31\u662f\u628a\u4e24\u4e2a # \u5904\u586b\u8fdb\u53bb\u3002~~\u7b80\u800c\u8a00\u4e4b\u6211\u61d2\u5f97\u653e\u4e86\u3002~~\n\n\u76f8\u5173\u7684\u72b6\u538b dp \u9898\u76ee\u8fd8\u6709\uff1a[\u70ae\u5175\u9635\u5730](https://www.luogu.com.cn/problem/P2704)\u3001[\u7389\u7c73\u7530](https://www.luogu.com.cn/problem/P1879)\u3001[\u4e92\u4e0d\u4fb5\u72af](https://www.luogu.com.cn/problem/P1896)\u3001[\u4e2d\u56fd\u8c61\u68cb](https://www.luogu.com.cn/problem/P2051)\u3002\u60f3~~\u6c34\u7ecf\u9a8c~~\u7ec3\u4e60\u72b6\u538b\u7684\u53ef\u4ee5\u53bb\u7ec3\u4e60\u4e00\u4e0b\u3002\n\n\u5b8c\u7ed3\u6492\u82b1\\\\(^o^)/",
        "postTime": 1582612827,
        "uid": 150384,
        "name": "pyqpyq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5005 \u3010\u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\u3011"
    },
    {
        "content": "\u7b2c\u4e00\u773c\u770b\u8fd9\u9053\u9898\u4ee5\u4e3a\u4f1a\u6709\u5175\uff0c\u7ed3\u679c\u53d1\u73b0\u5e76\u6ca1\u6709\uff0c\u90a3\u8fd9\u4e0d\u5c31\u662f\u4e00\u9053\u5f88\u6c34\u7684\u72b6\u538b dp \u677f\u5b50\u4e86\u5417\u3002\n\n\u9996\u5148\u53d1\u73b0 $ Y \\leq 6 $ \u6240\u4ee5\u8981\u538b $Y$ \u8fd9\u4e00\u7ef4\u3002\n\n\u6211\u4eec\u6765\u7528\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570 $i$ \u6765\u8868\u793a\u8fd9\u4e00\u884c\u7684\u72b6\u6001\u3002\u8fd9\u4e2a\u6570\u4e8c\u8fdb\u5236\u7b2c $j$ \u4f4d\u4e3a $0/1$ \u8868\u793a\u68cb\u76d8\u7684\u8fd9\u4e00\u4f4d\u4e0d\u653e\u6216\u8005\u653e\u9a6c\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5bf9\u4e8e\u8fd9\u9053\u9898\u800c\u8a00\uff0c\u8fd9\u4e00\u884c\u7684\u72b6\u6001\u4e0d\u4ec5\u548c\u4e0a\u4e00\u884c\u6709\u5173\uff0c\u8fd8\u548c\u4e0a\u4e0a\u884c\u6709\u5173\u3002\n\n\u6240\u4ee5\u8bbe\u51fa\u72b6\u6001 \uff1a $f_{i,j,k}$ \u8868\u793a\u7b2c $i$ \u884c\u72b6\u6001\u4e3a $j$ \u4e14\u7b2c $i - 1$ \u884c\u72b6\u6001\u4e3a $k$ \u65f6\u524d $i$ \u884c\u7684\u65b9\u6848\u603b\u6570\u3002\n\n\u8f6c\u79fb\u5c31\u662f\u4e0a\u4e00\u884c\u6240\u6709\u4e0d\u4e0e\u8fd9\u4e00\u884c\u51b2\u7a81\u7684\u72b6\u6001\u7684\u603b\u548c\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u6765\u6c42\u4e24\u884c\u6ee1\u8db3\u90a3\u4e9b\u6761\u4ef6\u624d\u80fd\u6ee1\u8db3\u9898\u76ee\u6761\u4ef6\uff08\u6ca1\u6709\u4e00\u4e2a\u9a6c\u53ef\u4ee5\u653b\u51fb\u5230\u53e6\u4e00\u4e2a\u9a6c\uff09\u3002\n\n\u5148\u6765\u5224\u65ad\u4e00\u4e0b\u76f8\u90bb\u4e24\u884c\u600e\u4e48\u6ee1\u8db3\u6761\u4ef6\uff1a\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u9a6c\uff0c\u6ee1\u8db3\u4e0b\u5217\u6761\u4ef6\u4e4b\u4e00\u624d\u53ef\u6ee1\u8db3\u6761\u4ef6\uff1a\n\n1.\u8fd9\u4e2a\u9a6c\u7684\u653b\u51fb\u8303\u56f4\u6ca1\u6709\u4efb\u4f55\u4e00\u4e2a\u9a6c\u3002\n\n2.\u82e5\u6709\uff0c\u5219\u9700\u8981\u6709\u5176\u4ed6\u9a6c\u62e6\u4f4f\u9a6c\u817f\u3002\n\n\u4ee3\u7801\u5f88\u7b80\u5355\uff0c\u5bf9\u4e8e\u7b2c\u4e00\u884c\u6bcf\u4e00\u4e2a\u9a6c\uff0c\u679a\u4e3e\u5b83\u5728\u7b2c\u4e8c\u884c\u7684\u653b\u51fb\u8303\u56f4\u5185\u6709\u65e0\u9a6c\uff0c\u82e5\u6709\uff0c\u5224\u65ad\u5176\u4e2d\u662f\u5426\u6709\u9a6c\u6321\u9a6c\u817f\u3002\n\n```cpp\nbool check1(int x, int y) {\n\tfor(int i = 0 ; 1 << i <= x ; i++) {\n\t\tif(!(x & (1 << i))) continue ;\n\t\tif(i > 1) {\n\t\t\tif(!(!(y & (1 << i - 2)) || ((x & (1 << i - 1)) && (y & (1 << i - 1))))) return 0 ;\n\t\t}\n\t\tif(!(!(y & (1 << i + 2)) || ((x & (1 << i + 1)) && (y & (1 << i + 1))))) return 0 ;\n\t}\n\treturn 1 ;\n}\n```\n\u5224\u65ad\u4e2d\u95f4\u9694\u4e00\u884c\u7684\u4e24\u884c\u662f\u5426\u51b2\u7a81\uff0c\u4e0e\u4e0a\u9762\u7684\u5176\u5b9e\u4e00\u6837\u3002\n\n\u5bf9\u4e8e\u8fd9\u4e00\u884c\u6bcf\u4e00\u4e2a\u9a6c\uff0c\u679a\u4e3e\u5b83\u5728\u4e0a\u4e0a\u884c\u7684\u653b\u51fb\u8303\u56f4\u5185\u6709\u65e0\u9a6c\uff0c\u82e5\u6709\uff0c\u5224\u65ad\u5176\u4e2d\u662f\u5426\u6709\u9a6c\u6321\u9a6c\u817f\u3002\n\n```cpp\nbool check2(int x, int y, int z) {\n\tfor(int i = 0 ; 1 << i <= x ; i++) {\n\t\tif(!(x & (1 << i))) continue ;\n\t\tif(i > 0) {\n\t\t\tif(!(!(z & (1 << i - 1)) || ((y & (1 << i)) && (y & (1 << i - 1))))) return 0 ;\n\t\t}\n\t\tif(!(!(z & (1 << i + 1)) || ((y & (1 << i)) && (y & (1 << i + 1))))) return 0 ;\n\t}\n\treturn 1 ;\n}\n```\n\n\u8fb9\u754c\u663e\u7136\u7684 $f_{1,i,0} $ $=$ $1$\u3002$f_{2,j,i}$ $=$ $\\operatorname{check(j,i)}$\u3002\n\n\u6ce8\u610f\u5230\u8fd9\u4e2a\u4e0d\u5bfb\u5e38\u7684\u7a7a\u95f4\u9650\u5236 1MB\uff0c\u6211\u4eec~~\u5148\u6765\u95ee\u5019\u4e00\u4e0b\u51c9\u5fc3\u51fa\u9898\u4eba~~\u8981\u7528\u4e8c\u4f4d\u6eda\u52a8\u6570\u7ec4\uff0c\u52a0\u4e00\u4e2a & \u8fd0\u7b97\u7b26\u5c31\u884c\u4e86\u3002\n\n```cpp\n#include <algorithm>\n#include <iostream>\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <list>\n#include <map>\n#include <unordered_map>\nusing namespace std ;\n#define int long long\nint f[3][1 << 7][1 << 7] ; \nint x, y ; \nconst int mod = 1e9 + 7 ; \nint read(){\n\tchar ch ;int s = 0 ;int w = 1;\n\twhile((ch = getchar()) >'9' || ch < '0' )if(ch == '-')w = -1 ;\n\twhile(ch >= '0' && ch <= '9')s = (s << 1) + (s << 3) + (ch ^ 48) , ch = getchar() ;\n\treturn s * w ;\n}\nbool check1(int x, int y) {\n\tfor(int i = 0 ; 1 << i <= x ; i++) {\n\t\tif(!(x & (1 << i))) continue ;\n\t\tif(i > 1) {\n\t\t\tif(!(!(y & (1 << i - 2)) || ((x & (1 << i - 1)) && (y & (1 << i - 1))))) return 0 ;\n\t\t}\n\t\tif(!(!(y & (1 << i + 2)) || ((x & (1 << i + 1)) && (y & (1 << i + 1))))) return 0 ;\n\t}\n\treturn 1 ;\n}\nbool check2(int x, int y, int z) {\n\tfor(int i = 0 ; 1 << i <= x ; i++) {\n\t\tif(!(x & (1 << i))) continue ;\n\t\tif(i > 0) {\n\t\t\tif(!(!(z & (1 << i - 1)) || ((y & (1 << i)) && (y & (1 << i - 1))))) return 0 ;\n\t\t}\n\t\tif(!(!(z & (1 << i + 1)) || ((y & (1 << i)) && (y & (1 << i + 1))))) return 0 ;\n\t}\n\treturn 1 ;\n}\n/*void print(int x) {\n\tint temp[10] = {0} ;\n\tint num = 0 ;\n\twhile(x) temp[++num] = x % 2, x /= 2 ;\n\tfor(int i = 1 ; i <= y ; i++) cout << temp[i] ;\n\tcout << '\\n' ;\n}  \u8c03\u8bd5\u8f93\u51fa\u7528  */\nsigned main() {\n//\tfreopen(\"my.out\", \"w\", stdout) ;\n\tx = read(), y = read() ;\n\tfor(int i = 0 ; i < 1 << y ; i++) f[1][i][0] = 1 ;\n\tfor(int i = 0 ; i < 1 << y ; i++)\n\t\tfor(int j = 0 ; j < 1 << y ; j++) \n\t\t\tif(check1(i, j)) f[0][i][j] += f[1][i][0] ;\n\tfor(int i = 3 ; i <= x ; i++) {\n\t\tmemset(f[i & 1], 0, sizeof(f[i & 1])) ; // \u6ce8\u610f\u8981\u6e05\u7a7a\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u8c03\u4e86\u534a\u5929 \n\t\tfor(int j = 0 ; j < 1 << y ; j++) \n\t\t\tfor(int k = 0 ; k < 1 << y ; k++) {\n\t\t\t\tif(!check1(j, k)) continue ;\n\t\t\t\tfor(int q = 0 ; q < 1 << y ; q++) if(check1(k, q)) if(check2(j, k, q)) \n\t\t\t\t\tf[i & 1][j][k] += f[!(i & 1)][k][q], f[i & 1][j][k] %= mod ;\n\t\t\t}\n\t}\t\n\tint ans = 0 ;\n\tfor(int i = 0 ; i < 1 << y ; i++)\n\t\tfor(int j = 0 ; j < 1 << y ; j++)\n\t\t\tif(check1(i, j)) ans += f[x & 1][i][j], ans %= mod ; //\u6700\u540e\u7edf\u8ba1\u7b54\u6848 \n\tcout << ans ;\n\treturn 0 ;\n}\n",
        "postTime": 1658377020,
        "uid": 632162,
        "name": "quarmer",
        "ccfLevel": 0,
        "title": "P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c"
    },
    {
        "content": "\u76f8\u4fe1\u5404\u4f4d\u90fd\u505a\u8fc7\u4e00\u9053\u53eb\u70ae\u5175\u9635\u5730\u7684\u9898\u4e86\n\n\u4e00\u822c\u662f\u9884\u5904\u7406\u51fa\u5355\u72ec\u4e00\u884c\u5408\u6cd5\u7684\n\n\u518d\u9884\u5904\u7406\u524d\u4e24\u884c\u5408\u6cd5\u7684\n\n\u7136\u540e\u9884\u5904\u7406\u4e09\u884c\u5408\u6cd5\u7684\n\n\u4e09\u884c\u5408\u6cd5\u7684\u5145\u8981\u6761\u4ef6\u662f\u76f8\u90bb\u4e24\u884c\u7ec4\u5408\u5408\u6cd5\u4e14\u7b2c\u4e00\u884c\u4e0e\u7b2c\u4e09\u884c\u7684\u7ec4\u5408\u5408\u6cd5\n\n\u5224\u65ad\u5408\u6cd5\u4e0d\u5fc5\u8981\u7528\u72b6\u538b\u7684\u65b9\u5f0f\uff0c\u62c6\u5f00\u66b4\u529b\u5224\u65ad\u5c31\u884c\n\n\u5408\u6cd5\u7684\u5206\u7c7b\u5b58\u5230vector\u91cc\n\n\u53ef\u77e5vector\u9700\u8981\u7684\u7a7a\u95f4\u4e0e\u6eda\u52a8\u540e\u7684dp\u6570\u7ec4\u6240\u9700\u7a7a\u95f4\u76f8\u5f53\n\n\u7136\u540e\u5c31\u662f\u679a\u4e3e\u5408\u6cd5\u72b6\u6001\u9012\u63a8\u4e86\uff0c\u7531\u4e8evector\u9884\u5904\u7406\u4e86\u5408\u6cd5\u72b6\u6001\uff0c\u6b64\u5904\u4e0d\u9700\u518d\u8fdb\u884c\u5224\u65ad\uff0c\u8dd1\u5f97\u98de\u5feb\uff08\u6bd4\u6253\u8868\u7684\u90a3\u4f4d\u6162\u4e9b\n\n\u6700\u540e\u628a\u5404\u79cd\u60c5\u51b5\u52a0\u8d77\u6765\u53d6\u6a21\n\n```cpp\n#include\"cstdio\"\n#include\"cstring\"\n#include\"iostream\"\n#include\"algorithm\"\n#include\"vector\"\nusing namespace std;\n\nconst int MAXN=105;\nconst int MAXM=6;\nconst int MOD=1e9+7;\n\nint n,m,ans;\nint f[2][1<<MAXM][1<<MAXM];\nvector<int> vec[1<<MAXM][1<<MAXM];\n\nbool check1(int x,int y)\n{\n    int ct1[15]={0},ct2[15]={0};\n    for(int i=0;i<m;++i) ct1[i]=(x>>i)&1;\n    for(int i=0;i<m;++i) ct2[i]=(y>>i)&1;\n    for(int i=0;i<m;++i){\n        if(i<m-2&&ct1[i]&&ct2[i+2]&&(!ct1[i+1]||!ct2[i+1])) return 0;\n        if(i>1&&ct1[i]&&ct2[i-2]&&(!ct1[i-1]||!ct2[i-1])) return 0;\n    }return 1;\n}\n\nbool check2(int x,int y,int z)\n{\n    int ct1[15]={0},ct2[15]={0},ct3[15]={0};\n    for(int i=0;i<m;++i) ct1[i]=(x>>i)&1;\n    for(int i=0;i<m;++i) ct2[i]=(y>>i)&1;\n    for(int i=0;i<m;++i) ct3[i]=(z>>i)&1;\n    for(int i=0;i<m;++i){\n        if(i<m-1&&ct1[i]&&ct3[i+1]&&(!ct2[i]||!ct2[i+1])) return 0;\n        if(i>0&&ct1[i]&&ct3[i-1]&&(!ct2[i]||!ct2[i-1])) return 0;\n    }return 1;\n}\n\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    if(n==1){printf(\"%d\\n\",1<<m);return 0;}\n    for(int i=0;i<1<<m;++i) f[1][i][0]=1;\n    for(int i=0;i<1<<m;++i){\n        for(int j=0;j<1<<m;++j){\n            if(check1(i,j)) f[0][i][j]+=f[1][j][0];\n        }\n    }for(int i=0;i<1<<m;++i){\n        for(int j=0;j<1<<m;++j){\n            if(!check1(i,j)) continue;\n            for(int k=0;k<1<<m;++k){\n                if(!check1(j,k)||!check2(i,j,k)) continue;\n                vec[i][j].push_back(k);\n            }\n        }\n    }\n    for(int i=3;i<=n;++i){\n        memset(f[i&1],0,sizeof(f[i&1]));\n        for(int j=0;j<1<<m;++j){\n            for(int k=0;k<vec[0][j].size();++k){\n                int tmp1=vec[0][j][k];\n                for(int l=0;l<vec[j][tmp1].size();++l){\n                    int tmp2=vec[j][tmp1][l];\n                    f[i&1][tmp2][tmp1]+=f[i&1^1][tmp1][j];\n                    f[i&1][tmp2][tmp1]%=MOD;\n                }\n            }\n        }\n    }for(int i=0;i<1<<m;++i){\n        for(int j=0;j<1<<m;++j){\n            ans=(ans+f[n&1][i][j])%MOD;\n        }\n    }printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1541431936,
        "uid": 31293,
        "name": "Adove",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5005 \u3010\u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\u3011"
    },
    {
        "content": "## [Link](https://www.luogu.com.cn/problem/P5005)\n\n\u672c\u9898\u72b6\u538b $\\tt dp$ \u7684 \u65b9\u7a0b\u5f88\u597d\u60f3\u3002\n\n\u9010\u884c\u9012\u63a8\u3002\u679a\u4e3e\u8be5\u884c\u72b6\u6001 $S_i$\uff0c\u4e0a\u4e00\u884c\u72b6\u6001 $S_j$ \u4ee5\u53ca\u4e0a\u4e0a\u884c\u72b6\u6001 $S_k$\uff0c\u5224\u65ad\u662f\u5426\u5408\u6cd5\uff0c\u5408\u6cd5\u5c31\u52a0\u4e0a\u3002\n\n\u5173\u952e\u662f\u5982\u4f55\u5224\u65ad\u662f\u5426\u5408\u6cd5\u3002\n\n\u5148\u8003\u8651\u5982\u4f55\u5224\u65ad $S_i$ \u548c $S_j$ \u662f\u5426\u5408\u6cd5\u3002\uff08\u7ed3\u679c\u4e3a $0$ \u8868\u793a\u5408\u6cd5\uff09\n\n\u5224\u65ad\u65b9\u6cd5\uff1a\n\n- ```i&(~i>>1)&(j>>2)```\uff1a\u5de6\u8fb9\u6ca1\u9a6c\u4e14\u5de6\u4e0a\u6709\u9a6c\u3002\n\n- ```i&(~i<<1)&(j<<2)```\uff1a\u53f3\u8fb9\u6ca1\u9a6c\u4e14\u53f3\u4e0a\u6709\u9a6c\u3002\n\n- ```j&(~j>>1)&(i>>2)```\uff1a\u5de6\u8fb9\u6ca1\u9a6c\u4e14\u5de6\u4e0b\u6709\u9a6c\u3002\n\n- ```j&(~j>>1)&(i>>2)```\uff1a\u53f3\u8fb9\u6ca1\u9a6c\u4e14\u53f3\u4e0b\u6709\u9a6c\u3002\n\n\u518d\u8003\u8651\u5982\u4f55\u5224\u65ad $S_i$ \u4e0e $S_k$ \u662f\u5426\u5408\u6cd5\u3002\uff08\u7ed3\u679c\u4e3a $0$ \u8868\u793a\u5408\u6cd5\uff09\n\n\u8fd9\u91cc\u4e0d\u7528\u5224\u65ad $S_j$ \u4e0e $S_k$ \u662f\u5426\u5408\u6cd5\uff0c\u662f\u56e0\u4e3a\u4e0d\u5408\u6cd5\u7684\u8bdd $\\tt dp$ \u6570\u7ec4\u80af\u5b9a\u4e3a $0$\u3002\n\n\u5224\u65ad\u65b9\u6cd5\uff1a\n\n- ```i&(~j)&(k>>1)```\uff1a\u4e0a\u9762\u6ca1\u9a6c\u4e14\u5de6\u4e0a\u6709\u9a6c\u3002\n\n- ```i&(~j)&(k<<1)```\uff1a\u4e0a\u9762\u6ca1\u9a6c\u4e14\u53f3\u4e0a\u6709\u9a6c\u3002\n\n- ```k&(~j)&(i>>1)```\uff1a\u4e0b\u9762\u6ca1\u9a6c\u4e14\u5de6\u4e0b\u6709\u9a6c\u3002\n\n- ```k&(~j)&(i<<1)```\uff1a\u4e0b\u9762\u6ca1\u9a6c\u4e14\u53f3\u4e0b\u6709\u9a6c\u3002\n\n\u6ce8\u610f\u9700\u8981\u521d\u59cb\u5316\uff0c$\\tt dp$ \u6570\u7ec4\u8981\u6eda\u6389\u4e00\u7ef4\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define mod 1000000007\nusing namespace std;\nint n,m,ans;\nint f[2][64][64];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=0;i<1<<m;i++)\n\t\tf[1][i][0]=1;\n\tfor(int li=2;li<=n;li++)\n\t\tfor(int i=0;i<1<<m;i++)\n\t\t\tfor(int j=0;j<1<<m;j++)\n\t\t\t{\n\t\t\t\tf[li&1][i][j]=0;\n\t\t\t\tif(i&(~i>>1)&(j>>2))continue;//\u5de6\u8fb9\u6ca1\u9a6c\u4e14\u5de6\u4e0a\u6709\u9a6c\n\t\t\t\tif(i&(~i<<1)&(j<<2))continue;//\u53f3\u8fb9\u6ca1\u9a6c\u4e14\u53f3\u4e0a\u6709\u9a6c \n\t\t\t\tif(j&(~j>>1)&(i>>2))continue;//\u5de6\u8fb9\u6ca1\u9a6c\u4e14\u5de6\u4e0b\u6709\u9a6c\n\t\t\t\tif(j&(~j<<1)&(i<<2))continue;//\u53f3\u8fb9\u6ca1\u9a6c\u4e14\u53f3\u4e0b\u6709\u9a6c\n\t\t\t\tfor(int k=0;k<(1<<m);k++)\n\t\t\t\t{\n\t\t\t\t\tif(i&(~j)&(k>>1))continue;//\u4e0a\u9762\u6ca1\u9a6c\u4e14\u5de6\u4e0a\u6709\u9a6c \n\t\t\t\t\tif(i&(~j)&(k<<1))continue;//\u4e0a\u9762\u6ca1\u9a6c\u4e14\u53f3\u4e0a\u6709\u9a6c \n\t\t\t\t\tif(k&(~j)&(i>>1))continue;//\u4e0b\u9762\u6ca1\u9a6c\u4e14\u5de6\u4e0b\u6709\u9a6c \n\t\t\t\t\tif(k&(~j)&(i<<1))continue;//\u4e0b\u9762\u6ca1\u9a6c\u4e14\u53f3\u4e0b\u6709\u9a6c \n\t\t\t\t\tf[li&1][i][j]=(f[li&1][i][j]+f[(li&1)^1][j][k])%mod;\n\t\t\t\t}\n\t\t\t}\n\tfor(int i=0;i<1<<m;i++)\n\t\tfor(int j=0;j<1<<m;j++)\n\t\t\tans=(ans+f[n&1][i][j])%mod;\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1659583203,
        "uid": 306049,
        "name": "Utilokasteinn",
        "ccfLevel": 0,
        "title": "P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a $n\\times m$ \u7684\u68cb\u76d8\uff0c\u5f80\u68cb\u76d8\u4e0a\u9762\u6446\u9a6c\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u6446\u6cd5\u53ef\u4ee5\u8ba9\u9a6c\u4e92\u4e0d\u653b\u51fb\u3002\u9a6c\u662f\u4e2d\u56fd\u8c61\u68cb\u7684\u9a6c\uff0c\u662f\u53ef\u4ee5\u88ab\u963b\u6321\u653b\u51fb\u8def\u7ebf\u7684\uff0c\u5982\u9898\u5e72\u56fe\u4e2d\u6240\u793a\u3002\n\n### \u9898\u76ee\u89e3\u6cd5\n\n\u770b\u5230\u6570\u636e\u8303\u56f4\uff0c\u9996\u5148\u60f3\u5230\u7684\u5c31\u662f\u72b6\u538b\u4e86\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u9a6c\u6d89\u53ca\u7684\u72b6\u6001\u5b9e\u9645\u4e0a\u662f **\u524d\u4e24\u5217** \uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5b58\u4e0b\u524d\u4e24\u5217\u7684\u72b6\u6001\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u6709\u4e00\u4e2a\u81ea\u7136\u7684\u72b6\u6001\u8bbe\u8ba1\uff1a$f[i][j][k]$ \u8868\u793a\u7b2c $i$ \u884c\uff0c\u524d\u4e24\u5217\u7684\u72b6\u6001\u662f $j,k$ \u7684\u5f53\u524d\u884c\u7684\u65b9\u6848\u6570\u3002\u8f6c\u79fb\u987a\u5e8f\u5f88\u663e\u7136\u76f4\u63a5\u4ece\u4e0a\u5f80\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u4e0b\u9762\u6211\u4eec\u4ece\u521d\u59cb\u5316\u5f00\u59cb\u5206\u6790\u8fd9\u4e2a $dp.$\n\n\u5bf9\u4e8e\u7b2c\u4e00\u884c\uff0c\u663e\u7136\u72b6\u6001\u53ea\u6709 $f[1][0][0]=2^m,$ \u76f4\u63a5\u8d4b\u503c\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u884c\uff0c\u8003\u8651\u76f4\u63a5\u66b4\u529b\u5904\u7406\u76f8\u90bb\u4e24\u884c\u7684\u6240\u6709\u53ef\u80fd\u6027\uff0c\u590d\u6742\u5ea6 $O(4^m),$ \u81f3\u4e8e\u5177\u4f53\u5904\u7406\u7ec6\u8282\uff0c\u7531\u4e8e\u53ea\u6709\u4e24\u884c\uff0c\u6240\u4ee5\u552f\u4e00\u9700\u8981\u5224\u65ad\u7684\u5c31\u662f\u4e0b\u9762\u7684\u884c\u80fd\u4e0d\u80fd\u653b\u51fb\u5230\u4e0a\u9762\u7684\u884c\u4ee5\u53ca\u4e0a\u9762\u7684\u884c\u80fd\u4e0d\u80fd\u653b\u51fb\u5230\u4e0b\u9762\u7684\u884c\u3002\n\n\u5982\u679c\u53ef\u4ee5\u653b\u51fb\u5230\uff0c\u90a3\u4e48\u9700\u8981\u6ee1\u8db3\u5b83\u6ca1\u6709\u88ab\u963b\u6321\u5e76\u4e14\u653b\u51fb\u7684\u4f4d\u7f6e\u4e0a\u6709\u9a6c\u3002\u7b80\u5355\u4f4d\u8fd0\u7b97\u8ba1\u7b97\u4e00\u4e0b\u5373\u53ef\u3002\n\n```cpp\nbool check(int x,int y){\n\t\tfor(int i=2;i<m;++i){\n\t\t\tif(!(y>>i&1))continue;\n\t\t\tint v=(y>>(i-1))&1;\n\t\t\tif(v)continue;\n\t\t\tif(x>>(i-2)&1)return false;\n\t\t}\n\t\tfor(int i=2;i<m;++i){\n\t\t\tif(!(x>>i&1))continue;\n\t\t\tint v=(x>>(i-1)&1);\n\t\t\tif(v)continue;\n\t\t\tif(y>>(i-2)&1)return false;\n\t\t}\n\t\tfor(int i=0;i<m-2;++i){\n\t\t\tif(!(y>>i&1))continue;\n\t\t\tint v=(y>>(i+1)&1);\n\t\t\tif(v)continue;\n\t\t\tif(x>>(i+2)&1)return false;\n\t\t}\n\t\tfor(int i=0;i<m-2;++i){\n\t\t\tif(!(x>>i&1))continue;\n\t\t\tint v=(x>>(i+1)&1);\n\t\t\tif(v)continue;\n\t\t\tif(y>>(i+2)&1)return false;\n\t\t}\n\t\treturn true;\n\t}\n```\n\n\u7ee7\u7eed\u601d\u8003\uff0c\u5230\u8fd9\u4e00\u6b65\u4e3a\u6b62\u6211\u4eec\u89e3\u51b3\u4e86\u521d\u59cb\u5316\u7684\u95ee\u9898\u3002\u8003\u8651\u4e0b\u9762\u5982\u4f55 $dp:$\n\n\u4e00\u4e2a\u663e\u7136\u7684\u601d\u8def\u662f\uff0c\u679a\u4e3e\u7b2c\u51e0\u884c\uff0c\u679a\u4e3e\u4e0a\u4e00\u884c\u3001\u4e0a\u4e0a\u884c\u3001\u4e0a\u4e0a\u4e0a\u884c\u7684\u72b6\u6001\uff0c\u7136\u540e\u8003\u8651\u5f53\u671f\u884c\u586b\u4ec0\u4e48\u3002\n\n\u7531\u4e8e\u5f53\u524d\u884c\u80fd\u586b\u591a\u5c11\u79cd\u4e1c\u897f\u53ea\u4f1a\u88ab\u524d\u4e24\u884c\u5f71\u54cd\uff0c\u6240\u4ee5\u8fd9\u4e00\u90e8\u5206\u4e5f\u53ef\u4ee5\u76f4\u63a5\u9884\u5904\u7406\uff0c\u590d\u6742\u5ea6 $O(8^m).$\n\n\u63a5\u4e0b\u6765\u5c31\u9047\u5230\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0c\u6211\u4eec\u4e0d\u77e5\u9053\u5982\u4f55\u7ee7\u627f\u4e4b\u524d\u7684\u72b6\u6001\u4e86\u3002\u7531\u4e8e\u6211\u4eec\u8bbe\u8ba1\u7684\u72b6\u6001\u4e0d\u5305\u542b\u5f53\u524d\u884c\u7684\u5177\u4f53\u72b6\u6001\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u83b7\u5f97\u5bf9\u4e8e\u524d\u4e24\u884c\u72b6\u6001\u5206\u522b\u662f $j,k$ \u65f6\u7684\u65b9\u6848\u6570\u3002\n\n\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u4e0a\u4e0a\u4e0a\u884c\u7684\u72b6\u6001\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u8fd9\u4e2a\u72b6\u6001\u53ef\u4ee5\u6ee1\u8db3\u5f53\u671f\u679a\u4e3e\u7684\u540e\u4e24\u884c\u72b6\u6001\uff0c**\u90a3\u4e48\u5bf9\u4e8e\u524d\u4e00\u884c\u586b\u4ec0\u4e48\uff0c\u5b83\u7ee7\u627f\u7684\u4fe1\u606f\u90fd\u662f\u4e00\u6837\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528\u8fd9\u4e2a\u4fe1\u606f\u9664\u6389\u5f53\u524d\u60c5\u51b5\u4e0a\u4e00\u884c\u80fd\u586b\u7684\u65b9\u6848\u6570\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u56fa\u5b9a\u72b6\u6001\u7684\u4e0a\u4e00\u884c\u7684\u586b\u9a6c\u65b9\u6848\u6570\u3002**\n\n\u81f3\u4e8e\u4e09\u884c\u7684\u9a6c\u600e\u4e48\u5224\u65ad\u5408\u6cd5\uff0c\u5148\u628a\u76f8\u90bb\u7684\u9a6c\u5224\u65ad\u6389\uff0c\u90a3\u4e48\u9694\u4e00\u884c\u7684\u9a6c\u4e5f\u5f88\u597d\u5224\u65ad\uff0c\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\u8981\u4e48\u4e0a\u9762\u7684\u9a6c\u8d70\u5230\u4e0b\u9762\u653b\u51fb\uff0c\u8981\u4e48\u4e0b\u9762\u7684\u9a6c\u5230\u4e0a\u9762\u653b\u51fb\u3002\u76f4\u63a5\u548c\u4e24\u79cd\u9a6c\u4e00\u6837\u5224\u65ad\u5373\u53ef\u3002\n\n```cpp\nbool check(int x,int y,int z){\n\t\tfor(int i=0;i<m;++i){\n\t\t\tif(y>>i&1)continue;\n\t\t\tif(!(z>>i&1))continue;\n\t\t\tif(i&&(x>>(i-1)&1))return false;\n\t\t\tif(i<m-1&&(x>>(i+1)&1))return false;\n\t\t}\n\t\tfor(int i=0;i<m;++i){\n\t\t\tif(y>>i&1)continue;\n\t\t\tif(!(x>>i&1))continue;\n\t\t\tif(i&&(z>>(i-1)&1))return false;\n\t\t\tif(i<m-1&&(z>>(i+1)&1))return false;\n\t\t}\n\t\treturn true;\n\t}\n```\n\n\u7136\u540e\u8fd9\u4e2a\u9664\u6cd5\u5728\u6a21\u610f\u4e49\u4e0b\u76f4\u63a5\u9884\u5904\u7406\u9006\u5143\u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(2^m\\log \\bmod)$\n\n\u603b $dp$ \u590d\u6742\u5ea6\u662f $O(n\\times 8^m).$ \u5199\u5b8c\u53d1\u73b0\u7206\u7a7a\u95f4\u4e86\u3002\n\n\u7531\u4e8e\u884c\u5bf9\u6211\u4eec\u7684\u72b6\u6001\u5f71\u54cd\u4e0d\u5927\uff0c\u76f4\u63a5\u6eda\u52a8\u6570\u7ec4\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6 $O(n\\times 2^8).$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef double db;\n//#define int long long\nconst int mod=1e9+7;\nconst db eps=1e-14;\ninline int Max(int x,int y){return x>y?x:y;}\ninline int Min(int x,int y){return x<y?x:y;}\ninline db Max(db x,db y){return x-y>eps?x:y;}\ninline db Min(db x,db y){return x-y<eps?x:y;}\ninline int Add(int x,int y,int M=mod){return (x+y)%M;}\ninline int Mul(int x,int y,int M=mod){return 1ll*x*y%M;}\ninline int Dec(int x,int y,int M=mod){return (x-y+M)%M;}\ninline int Abs(int x){return x<0?-x:x;}\ninline int read(){\n\tint s=0,w=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)){if(ch=='-')w=-1;ch=getchar();}\n\twhile(isdigit(ch)){s=s*10+ch-'0';ch=getchar();}\n\treturn s*w;\n}\ninline void write(int x){\n\tif(x<0)putchar('-'),x=-x;\n\tif(x>9)write(x/10);\n\tputchar(x%10+'0');\n}\ninline int qpow(int x,int y){\n\tint res=1;\n\twhile(y){\n\t\tif(y&1)res=Mul(res,x);\n\t\tx=Mul(x,x);y>>=1;\n\t}\n\treturn res;\n}\ntypedef pair<int,int> pr;\n#define fi first\n#define se second\n#define mk make_pair\n#define pb emplace_back\n#define poly vector<int>\nnamespace Refined_heart{\n\tint f[2][1<<6][1<<6],n,m,val[1<<6][1<<6],ival[1<<6][1<<6];\n\tbool check(int x,int y){\n\t\tfor(int i=2;i<m;++i){\n\t\t\tif(!(y>>i&1))continue;\n\t\t\tint v=(y>>(i-1))&1;\n\t\t\tif(v)continue;\n\t\t\tif(x>>(i-2)&1)return false;\n\t\t}\n\t\tfor(int i=2;i<m;++i){\n\t\t\tif(!(x>>i&1))continue;\n\t\t\tint v=(x>>(i-1)&1);\n\t\t\tif(v)continue;\n\t\t\tif(y>>(i-2)&1)return false;\n\t\t}\n\t\tfor(int i=0;i<m-2;++i){\n\t\t\tif(!(y>>i&1))continue;\n\t\t\tint v=(y>>(i+1)&1);\n\t\t\tif(v)continue;\n\t\t\tif(x>>(i+2)&1)return false;\n\t\t}\n\t\tfor(int i=0;i<m-2;++i){\n\t\t\tif(!(x>>i&1))continue;\n\t\t\tint v=(x>>(i+1)&1);\n\t\t\tif(v)continue;\n\t\t\tif(y>>(i+2)&1)return false;\n\t\t}\n\t\treturn true;\n\t}\n\tint calc(int state){\n\t\tint res=0;\n\t\tfor(int i=0;i<(1<<m);++i)res+=check(i,state);\n\t\treturn res;\n\t}\n\tbool check(int x,int y,int z){\n\t\tfor(int i=0;i<m;++i){\n\t\t\tif(y>>i&1)continue;\n\t\t\tif(!(z>>i&1))continue;\n\t\t\tif(i&&(x>>(i-1)&1))return false;\n\t\t\tif(i<m-1&&(x>>(i+1)&1))return false;\n\t\t}\n\t\tfor(int i=0;i<m;++i){\n\t\t\tif(y>>i&1)continue;\n\t\t\tif(!(x>>i&1))continue;\n\t\t\tif(i&&(z>>(i-1)&1))return false;\n\t\t\tif(i<m-1&&(z>>(i+1)&1))return false;\n\t\t}\n\t\treturn true;\n\t}\n\tvoid treat(){\n\t\tfor(int i=0;i<(1<<m);++i)\n\t\t\tfor(int j=0;j<(1<<m);++j){\n\t\t\t\tif(!check(i,j))continue;\n\t\t\t\tfor(int k=0;k<(1<<m);++k){\n\t\t\t\t\tif(!check(j,k))continue;\n\t\t\t\t\tval[i][j]+=check(i,j,k);\n\t\t\t\t}\n\t\t\t}\n\t\tfor(int i=0;i<(1<<m);++i)\n\t\t\tfor(int j=0;j<(1<<m);++j)\n\t\t\t\tival[i][j]=qpow(val[i][j],mod-2);\n\t}\n\tvoid MAIN(){\n\t\tn=read();m=read();\n\t\tf[1][0][0]=1<<m;\n\t\tfor(int i=0;i<(1<<m);++i)f[0][i][0]=calc(i);\n\t\ttreat();\n\t\tfor(int i=3;i<=n;++i){\n\t\t\tint pos=i&1;\n\t\t\tmemset(f[pos],0,sizeof f[pos]);\n\t\t\tfor(int j=0;j<(1<<m);++j){\n\t\t\t\tfor(int k=0;k<(1<<m);++k){\n\t\t\t\t\tif(!check(k,j))continue;\n\t\t\t\t\tint s=0;\n\t\t\t\t\tfor(int l=0;l<(1<<m);++l){\n\t\t\t\t\t\tif(!check(l,k))continue;\n\t\t\t\t\t\tif(!check(l,k,j))continue;\n\t\t\t\t\t\ts=Add(s,Mul(f[pos^1][k][l],ival[l][k]));\n\t\t\t\t\t}\n\t\t\t\t\tf[pos][j][k]=Add(f[pos][j][k],Mul(s,val[k][j])); \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tint ans=0;\n\t\tfor(int i=0;i<(1<<m);++i)\n\t\t\tfor(int j=0;j<(1<<m);++j)\n\t\t\t\tans=Add(ans,f[n&1][i][j]);\n\t\twrite(ans);\n\t}\n}\nint main(){\n\tRefined_heart::MAIN();\n\treturn 0;\n}\n\n```\n",
        "postTime": 1635492677,
        "uid": 128591,
        "name": "Refined_heart",
        "ccfLevel": 9,
        "title": "P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u4f20\u9001\u95e8\uff1a[link](https://www.luogu.com.cn/problem/P5005)\u3002\n\n\u9996\u5148\uff0c\u770b\u5230\u8fd9\u79cd\u68cb\u76d8\u4e0a\u6446\u68cb\u5b50\u7684\u95ee\u9898\uff0c\u5bb9\u6613\u60f3\u5230\u4e00\u9053\u7c7b\u4f3c\u7684\u9898\uff1a[link](https://www.luogu.com.cn/problem/P1896)\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u8fd9\u4e24\u9898\u51e0\u4e4e\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f\u653e\u7684\u68cb\u5b50\u4ece\u738b\u53d8\u6210\u4e86\u9a6c\uff0c\u4e5f\u5c31\u662f\u5224\u5b9a\u9700\u8981\u6539\u53d8\u3002\u7136\u540e\u6ca1\u6709\u68cb\u5b50\u6570\u91cf\u7684\u9650\u5236\u3002\n\n\u53c8\u56e0\u4e3a\u9a6c\u7684\u5224\u5b9a\u548c\u4e0a\u4e24\u884c\u6709\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u8bbe\uff1a\n\n$dp_{i,j,k}$ \u8868\u793a\u7b2c $i$ \u884c\uff0c\u5f53\u524d\u884c\u72b6\u6001\u4e3a $j$\uff0c\u4e0a\u4e00\u884c\u72b6\u6001\u4e3a $k$ \u7684\u603b\u65b9\u6848\u6570\u3002\n\n\u7136\u540e\u8f6c\u79fb\u7684\u65f6\u5019\u679a\u4e3e\u4e0a\u4e0a\u884c\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u8bbe\u5f53\u524d\u884c\u4e3a $i$\uff0c\u72b6\u6001\u4e3a $j$\uff0c\u4e0a\u4e00\u884c\u72b6\u6001\u4e3a $k$\uff0c\u679a\u4e3e\u5230\u7684\u72b6\u6001\u4e3a $l$\uff0c\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a\n\n$dp_{i,j,k}=dp_{i,j,k}+dp_{i,k,l}$\n\n\u7136\u540e\u5c31\u662f\u5224\u5b9a\u7684\u95ee\u9898\u3002\n\n\u770b\u5230\u5176\u4ed6\u4eba\u8fd9\u4e2a\u5224\u5b9a\u90fd\u7528\u4e86\u5341\u5206\u5947\u602a\u7684\u5224\u5b9a\u65b9\u6cd5\uff0c\u6211\u6765\u4e00\u4e2a\u7b80\u5355\u4e00\u4e9b\u4f46\u5e38\u6570\u5927\uff0c\u8981\u5f00 O2 \u624d\u80fd\u8fc7\u5f97\u5224\u5b9a\uff1a\n\n\u76f4\u63a5\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\u3002\u5982\u679c\u8fd9\u4e2a\u70b9\u662f\u9a6c\uff0c\u5219\u5224\u65ad\u6240\u6709\u4ed6\u80fd\u5230\u7684\u70b9\u662f\u5426\u4e3a\u9a6c\u3002\u5e38\u6570\u8f83\u5927\u4f46\u662f\u597d\u7406\u89e3\u3002\n\n\u4f46\u662f\u8fd9\u9898\u8fd8\u6709\u4e00\u4e2a\u6076\u5fc3\u7684\u70b9\uff0c\u5c31\u662f 1MB \u7684\u7a7a\u95f4\u3002\n\n\u56e0\u4e3a\u6211\u4eec\u8f6c\u79fb\u65b9\u7a0b\u4e2d\u53ea\u9700\u8981\u4e0a\u4e00\u884c\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u53ef\u4ee5\u6eda\u52a8\u6570\u7ec4\u628a\u7b2c\u4e00\u7ef4\u538b\u6389\u3002\n\n\u5177\u4f53\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int mod=1e9+7;\nint n,m,dp[2][65][65];\nint a[4][7];\nint madx[9]={0,1,-1,1,-1,2,2,-2,-2};\nint mady[9]={0,2,2,-2,-2,1,-1,1,-1};//\u9a6c\u7684\u8d70\u6cd5\nint bingdx[5]={0,0,0,1,-1};\nint bingdy[5]={0,1,-1,0,0};//\u5175\u7684\u8d70\u6cd5\uff0c\u5224\u65ad\u201c\u62d0\u9a6c\u817f\u201d\nbool check(int nw,int last,int lastlast){\n\tfor(int i=0; i<=m-1; i++)\n\t\ta[1][i]=((nw&(1<<i))!=0);\n\tfor(int i=0; i<=m-1; i++)\n\t\ta[2][i]=((last&(1<<i))!=0);\n\tfor(int i=0; i<=m-1; i++)\n\t\ta[3][i]=((lastlast&(1<<i))!=0);\n\tfor(int i=1; i<=3; i++){\n\t\tfor(int j=0; j<=m-1; j++){\n\t\t\tif(a[i][j]==0)\n\t\t\t\tcontinue;\n\t\t\tfor(int k=1; k<=4; k++){\n\t\t\t\tint nx=i+bingdx[k],ny=j+bingdy[k];\n\t\t\t\tif(nx>=1&&nx<=3&&ny>=0&&ny<=m-1&&a[nx][ny]==0){//\u5224\u65ad\u8fd9\u6761\u8def\u662f\u5426\u4f1a\u88ab\u5176\u4ed6\u7684\u9a6c\u6321\u4f4f\n\t\t\t\t\tint x1=i+madx[k*2-1],x2=i+madx[k*2],y1=j+mady[k*2-1],y2=j+mady[k*2];//\u6ce8\u610f\u5230\u6211\u7684\u5199\u6cd5\u9a6c\u7684\u8d70\u6cd5\u548c\u5175\u7684\u8d70\u6cd5\u662f\u76f4\u63a5\u5bf9\u5e94\u7684\uff0c\u624d\u53ef\u4ee5\u8fd9\u6837\u5199\n\t\t\t\t\tif((x1>=1&&x1<=3&&y1>=0&&y1<=m-1&&a[x1][y1]==1)||(x2>=1&&x2<=3&&y2>=0&&y2<=m-1&&a[x2][y2]==1))\n\t\t\t\t\t\treturn false;//\u5224\u65ad\u80fd\u5230\u7684\u70b9\u662f\u5426\u4e3a\u9a6c\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\nsigned main(){\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tcout.tie(0);\n\tcin>>n>>m;\n\tdp[0][0][0]=1;\n\tfor(int i=1; i<=n; i++){\n\t\tfor(int j=0; j<(1<<m); j++)//\u5f53\u524d\u884c \n\t\t\tfor(int k=0; k<(1<<m); k++)//\u4e0a\u4e00\u884c \n\t\t\t\tfor(int l=0; l<(1<<m); l++)//\u4e0a\u4e0a\u884c \n\t\t\t\t\tif(check(j,k,l)==true)//\u5224\u5b9a\n\t\t\t\t\t\tdp[i&1][j][k]+=dp[(i-1)&1][k][l],dp[i&1][j][k]%=mod;//\u8f6c\u79fb\n\t\tfor(int j=0; j<(1<<m); j++)\n\t\t\tfor(int k=0; k<(1<<m); k++)\n\t\t\t\tdp[(i-1)&1][j][k]=0;//\u6eda\u52a8\u6570\u7ec4\u8981\u6e05\u7a7a\n\t}\n\tint ans=0;\n\tfor(int i=0; i<(1<<m); i++)\n\t\tfor(int j=0; j<(1<<m); j++)\n\t\t\tans+=dp[n&1][i][j],ans%=mod;\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1678178702,
        "uid": 400783,
        "name": "_Chtholly_Nephren_",
        "ccfLevel": 6,
        "title": "P5005\u9898\u89e3"
    },
    {
        "content": "\u9762\u5411\u6570\u636e\uff1a$1\\leq X \\leq 100,1\\leq Y \\leq 6$\u3002\uff08\u4ee5\u4e0b\u7528 $n,m$ \u5206\u522b\u4ee3\u66ff $X,Y$\uff09\u3002\n\n\u72b6\u538b dp \u65e0\u7591\u4e86\u3002\n\n\u7136\u540e\u6211\u4eec\u5047\u8bbe\u5f53\u524d\u8ba1\u7b97\u5230\u7b2c $i$ \u884c\uff0c\u53d1\u73b0\u9a6c\u81f3\u591a\u80fd\u4ece\u524d\u4e24\u884c\u653b\u51fb\u8fc7\u6765\uff0c\u4e8e\u662f\u8003\u8651\u5c06\u5f53\u524d\u884c\u548c\u524d\u4e00\u884c\u538b\u5165\u72b6\u6001\uff08\u518d\u524d\u9762\u7684\u4f1a\u88ab\u4e0a\u4e00\u884c\u7684\u6570\u7ec4\u538b\u5165\uff09\u3002\n\n\u8bbe $f_{i,S,S'}$ \u8868\u793a\u5f53\u524d\u8ba1\u7b97\u5230\u7b2c $i$ \u884c\uff0c\u653e\u7f6e\u9a6c\u7684\u72b6\u6001\u4e3a $S$\uff0c$i - 1$ \u884c\u7684\u72b6\u6001\u4e3a $S'$ \u7684\u4e0d\u540c\u653e\u7f6e\u65b9\u6848\u6570\u3002\u5728\u8f6c\u79fb\u7684\u65f6\u5019\u679a\u4e3e\u5f53\u524d\u884c\uff0c\u4e0a\u4e00\u884c\uff0c\u4e0a\u4e0a\u884c\u7684\u653e\u7f6e\u72b6\u6001\uff0c\u5224\u65ad\u5982\u679c\u4e0d\u4f1a\u4e92\u76f8\u653b\u51fb\u5c31\u53ef\u4ee5\u8f6c\u79fb\uff0c\u590d\u6742\u5ea6 $O(n\\times 2^{3m})$\u3002\n\n\u81ea\u7136\u53ef\u4ee5\u5199\u51fa\u5982\u4e0b\u7684\u4ee3\u7801\uff1a\n\n```cpp\nf[0][0][0] = 1;\nfor(int i = 1, now = 1; i <= n; i++, now ^= 1)\n{\n\tmemset(f[now], 0, sizeof(f[now]));\n\tfor(int st = 0; st < (1 << m); st++)\n\t{\n\t\tfor(int pst = 0; pst < (1 << m); pst++)\n\t\t{\n\t\t\tfor(int ppst = 0; ppst < (1 << m); ppst++)\n\t\t\t{\n\t\t\t\tf[now][st][pst] = (f[now][st][pst] + f[now ^ 1][pst][ppst] * check(st, pst, ppst)) % mod;\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n\u73b0\u5728\u7684\u5173\u952e\u5c31\u662f\u600e\u4e48\u5224\u65ad\u524d\u540e\u4e09\u884c\u7684\u653e\u7f6e\u72b6\u6001\u4e0d\u4f1a\u6709\u80fd\u4e92\u76f8\u653b\u51fb\u5230\u7684\uff0c\u8fd8\u9700\u8981\u8003\u8651\u7eca\u811a\u7684\u60c5\u51b5\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2go8tasn.png)\n\n\u624b\u73a9\u4e00\u4e0b\uff0c\u53d1\u73b0\u5982\u679c\u56fe\u4e2d\u9ed1\u8272\u4f4d\u7f6e\u653e\u7f6e\u4e86\u9a6c\u7684\u8bdd\uff0c\u8981\u6c42\u56fe\u4e2d\u7684\u7ea2\u8272\u4f4d\u7f6e\u5747\u4e0d\u80fd\u653e\u7f6e\uff0c\u6216\u8005\u7eff\u8272\u4f4d\u7f6e\u653e\u7f6e\u4e86\u9a6c\uff08\u5373\u65e0\u6cd5\u653b\u51fb\uff09\uff0c\u5426\u5219\u53ef\u4ee5\u653b\u51fb\u5230\u5b83\u3002\n\n\u4e5f\u5c31\u662f\uff1a\n\n- \u5bf9\u4e8e\u4e0a\u4e00\u884c\uff0c\u5411\u53f3\u8df3\u7684\u653b\u51fb\u65b9\u5f0f\uff0c\u8981\u6c42\u4e0a\u4e00\u884c\u5411\u5de6\u4e24\u6b65\u5bf9\u5e94\u683c\u6ca1\u6709\u653e\u7f6e\uff0c\u6216\u8005\u5411\u5de6\u4e00\u6b65\u5bf9\u5e94\u683c\u6709\u653e\u7f6e\u3002\n\n```((st << 2) & (pst & ~(pst << 1))) == 0```\n\n- \u5bf9\u4e8e\u4e0a\u4e00\u884c\uff0c\u5411\u5de6\u8df3\u7684\u653b\u51fb\u65b9\u5f0f\uff0c\u8981\u6c42\u4e0a\u4e00\u884c\u5411\u53f3\u4e24\u6b65\u5bf9\u5e94\u683c\u6ca1\u6709\u653e\u7f6e\uff0c\u6216\u8005\u5411\u53f3\u4e00\u6b65\u5bf9\u5e94\u683c\u6709\u653e\u7f6e\u3002\n\n```((st >> 2) & (pst & ~(pst >> 1))) == 0```\n\n- \u5bf9\u4e8e\u4e0a\u4e0a\u884c\uff0c\u5411\u53f3\u8df3\u7684\u653b\u51fb\u65b9\u5f0f\uff0c\u8981\u6c42\u4e0a\u4e0a\u884c\u5411\u5de6\u4e00\u6b65\u5bf9\u5e94\u683c\u6ca1\u6709\u653e\u7f6e\uff0c\u6216\u8005\u4e0a\u4e00\u884c\u5411\u5de6\u4e00\u6b65\u5bf9\u5e94\u683c\u6709\u653e\u7f6e\u3002\n\n```((st << 1) & (ppst & ~pst)) == 0```\n\n- \u5bf9\u4e8e\u4e0a\u4e0a\u884c\uff0c\u5411\u5de6\u8df3\u7684\u653b\u51fb\u65b9\u5f0f\uff0c\u8981\u6c42\u4e0a\u4e0a\u884c\u5411\u53f3\u4e00\u6b65\u5bf9\u5e94\u683c\u6ca1\u6709\u653e\u7f6e\uff0c\u6216\u8005\u4e0a\u4e00\u884c\u5411\u53f3\u4e00\u6b65\u5bf9\u5e94\u683c\u6709\u653e\u7f6e\u3002\n\n```((st >> 1) & (ppst & ~pst)) == 0```\n\n\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u5f53\u524d\u884c\u4e0d\u4f1a\u88ab\u4e0a\u4e00\u884c\u6216\u8005\u4e0a\u4e0a\u884c\u7684\u653e\u7f6e\u653b\u51fb\u5230\u3002\n\n\u9274\u4e8e f \u6570\u7ec4\u4fdd\u8bc1\u4e86\u4e0a\u4e0a\u884c\u4e0d\u80fd\u653b\u51fb\u5230\u4e0a\u4e00\u884c\uff08\u5426\u5219\u4e0d\u4f1a\u88ab\u7edf\u8ba1\uff09\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4fdd\u8bc1\u5f53\u524d\u884c\u4e0d\u80fd\u653b\u51fb\u5230\u4e0a\u4e00\u884c\u6216\u8005\u4e0a\u4e0a\u884c\uff08\u4ee3\u7801\u4e2d\u4f53\u73b0\u4e86\uff0c\u4e0d\u518d\u8d58\u8ff0\uff09\u3002\n\n\u6700\u540e\u52a0\u4e0a\u4e00\u4e2a\u6eda\u52a8\u6570\u7ec4\u5373\u53ef\u3002\n\nCode\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\ninline void read(int &x)\n{\n\tx = 0;\n\tint f = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9')\n\t{\n\t\tf |= ch == '-';\n\t\tch = getchar();\n\t}\n\twhile(ch >= '0' && ch <= '9')\n\t{\n\t\tx = x * 10 + ch - 48;\n\t\tch = getchar();\n\t}\n\tx = f ? -x : x;\n\treturn;\n}\nconst int mod = 1e9 + 7;\n#define M 6\nint n, m;\nint f[2][1 << M][1 << M];\ninline bool check(int st, int pst, int ppst)\n{\n\treturn !(((st << 2) & (pst & ~(pst << 1))) || ((st >> 2) & (pst & ~(pst >> 1))) || ((st << 1) & (ppst & ~pst)) || ((st >> 1) & (ppst & ~pst))) && !(((pst << 2) & (st & ~(st << 1))) || ((pst >> 2) & (st & ~(st >> 1)))) && !(((ppst << 1) & (st & ~pst)) || ((ppst >> 1) & (st & ~pst)));\n}\nsigned main()\n{\n\tread(n), read(m);\n\tf[0][0][0] = 1;\n\tfor(int i = 1, now = 1; i <= n; i++, now ^= 1)\n\t{\n\t\tmemset(f[now], 0, sizeof(f[now]));\n\t\tfor(int st = 0; st < (1 << m); st++)\n\t\t{\n\t\t\tfor(int pst = 0; pst < (1 << m); pst++)\n\t\t\t{\n\t\t\t\tfor(int ppst = 0; ppst < (1 << m); ppst++)\n\t\t\t\t{\n\t\t\t\t\tf[now][st][pst] = (f[now][st][pst] + f[now ^ 1][pst][ppst] * check(st, pst, ppst)) % mod;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans = 0;\n\tfor(int st = 0; st < (1 << m); st++)\n\t{\n\t\tfor(int pst = 0; pst < (1 << m); pst++)\n\t\t{\n\t\t\tans = (ans + f[n & 1][st][pst]) % mod;\n\t\t}\n\t}\n\tprintf(\"%d\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1636470098,
        "uid": 90027,
        "name": "GG_jok_er",
        "ccfLevel": 0,
        "title": "P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c \u9898\u89e3"
    },
    {
        "content": "~~\u76f8\u4fe1\u81ea\u5df1\u7684\u505a\u6cd5\uff0c\u5927\u558a\u4e00\u58f0 \uff1aI won't MLE\uff01\u4f60\u5c31\u4f1a\u8fc7\u8fd9\u9053\u9898\u3002~~\n\n~~\u4e8e\u662f\u6211\u5c31 MLE \u4e86\u3002~~\n\n\u5148\u5047\u8bbe\u7a7a\u95f4\u9650\u5236\u4e3a 256 MB\uff0c\u7136\u540e\u6765\u60f3\u8fd9\u9053\u9898\u3002\n\n\u8fd9\u662f\u4e00\u9053\u4e8c\u7ef4\u7684\u72b6\u538b DP\uff0c\u6a21\u4eff\u7b2c\u4e00\u9898\u4e0d\u96be\u60f3\u5230\u8bbe $f_{i,j,k}$ \u8868\u793a\u5f53\u524d\u505a\u5230\u7b2c $i$ \u884c\uff0c\u5f53\u524d\u884c\u72b6\u6001\u4e3a $j$\uff0c\u4e0a\u4e00\u884c\u72b6\u6001\u4e3a $k$ \u7684\u65b9\u6848\u6570\u3002\n\n\u56e0\u4e3a\u9a6c\u653b\u51fb\u8303\u56f4\u53ef\u4ee5\u5230\u4e0a\u4e0b\u4e24\u884c\uff0c\u6240\u4ee5\u9700\u8981\u679a\u4e3e\u4e0a\u4e0a\u884c\u72b6\u6001 $l$\u3002\n\n\u90a3\u4e48\u8f6c\u79fb\u65b9\u7a0b\u5982\u4e0b\uff1a\n\n$$f_{i,j,k}=\\sum f_{i-1,k,l}$$\n\n\u5176\u4e2d\u4fdd\u8bc1 $j,k,l$ \u4e0d\u4f1a\u4e92\u76f8\u51b2\u7a81\u3002\n\n\u521d\u503c\uff1a$f_{1,i,0}=1$\uff0c\u7b2c\u4e8c\u884c\u9700\u8981\u7279\u522b\u5904\u7406\uff0c\u56e0\u4e3a\u6ca1\u6709\u4e0a\u4e0a\u884c\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5148\u5199\u4e0b\u9762\u8fd9\u6837\u7684\u4ee3\u7801\uff1a\n\n```cpp\nfor (int i = 0; i < (1 << m); ++i)\n\t\tfor (int j = 0; j < (1 << m); ++j)\n\t\t\tif (i \u4e0e j \u4e0d\u51b2\u7a81) f[2][j][i] = (f[2][j][i] + f[1][i][0]) % P;\nfor (int i = 3; i <= n; ++i)\n\tfor (int j = 0; j < (1 << m); ++j)\n\t\tfor (int k = 0; k < (1 << m); ++k)\n\t\t{\n\t\t\tf[i][j][k] = 0;\n\t\t\tif (j \u4e0e k \u51b2\u7a81) continue;\n\t\t\tfor (int l = 0; l < (1 << m); ++l)\n\t\t\t{\n\t\t\t\tif (k \u4e0e l \u51b2\u7a81) continue;\n\t\t\t\tif (j \u4e0e l \u51b2\u7a81) continue;\n\t\t\t\tf[i][j][k] = (f[i][j][k] + f[i - 1][k][l]) % P;\n\t\t\t}\n\t\t}\nans = 0;\nfor (int i = 0; i < (1 << m); ++i)\n\tfor (int j = 0; j < (1 << m); ++j)\n\t\tif (i \u4e0e j \u4e0d\u51b2\u7a81) ans = (ans + f[n][i][j]) % P;\n```\n\n\u7136\u540e\u6765\u8003\u8651\u600e\u4e48\u5904\u7406\u51b2\u7a81\u95ee\u9898\u3002\n\n\u51b2\u7a81\u5206\u4e24\u79cd\uff1a\u4e24\u884c\u51b2\u7a81\uff08`Two_attack`\uff09\u548c\u4e09\u884c\u51b2\u7a81\uff08`Three_attack`\uff09\u3002\n\n- \u4e24\u884c\u51b2\u7a81\uff1a\u4e5f\u5c31\u662f\u5355\u884c\u5bf9\u4e0b\u4e00\u884c\u7684\u653b\u51fb\u662f\u5426\u4e0e\u4e0b\u4e00\u884c\u51b2\u7a81\u3002\n- \u4e09\u884c\u51b2\u7a81\uff1a\u4e5f\u5c31\u662f\u7b2c\u4e00\u884c\u7684\u8de8\u884c\u653b\u51fb\u662f\u5426\u5bf9\u7b2c\u4e09\u884c\u51b2\u7a81\u3002\n\n\u4e0d\u597d\u7406\u89e3\uff1f\u90a3\u5c31\u5bf9\u4e86\uff0c~~\u53cd\u6b63\u6211\u8bf4\u7684\u4e5f\u4e0d\u662f\u4eba\u8bdd\uff0c~~ \u4e0a\u56fe\uff01\n\n\u4e24\u884c\u51b2\u7a81\uff1a\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20210306094614395.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JXemh1emVoYW8=,size_16,color_FFFFFF,t_70#pic_center)\n\n\u4ece\u53f3\u5f80\u5de6\u8003\u8651\u3002\u8bb0\u5f53\u524d\u72b6\u6001\u4e3a `10110110`\n\n\u7b2c\u4e00\u4e2a\u683c\u5b50\u6ca1\u6709\u9a6c\uff0c\u8df3\u8fc7\u3002\n\n\u7b2c\u4e8c\u4e2a\u683c\u5b50\u6709\u9a6c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u683c\u5b50\u53f3\u8fb9\u6709\u9a6c\u5417\uff1f\u6ca1\u6709\u3002\u4e8e\u662f\u53ef\u4ee5\u5411\u53f3\u653b\u51fb\u3002\u4f46\u662f\u4ed6\u5de6\u8fb9\u6709\u9a6c\uff0c\u4e8e\u662f\u4e0d\u80fd\u60f3\u5de6\u653b\u51fb\u3002\n\n\u90a3\u4e48\u5c31\u53d8\u6210\u4e86\u8fd9\u6837\uff1a\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/2021030609484945.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JXemh1emVoYW8=,size_16,color_FFFFFF,t_70#pic_center)\n\n\u7b2c\u4e09\u4e2a\u683c\u5b50\uff0c\u53f3\u8fb9\u6709\u9a6c\uff0c\u5de6\u8fb9\u6ca1\u6709\u9a6c\uff0c\u90a3\u4e48\u53ef\u4ee5\u5411\u5de6\u8fb9\u653b\u51fb\u3002\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20210306094954785.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JXemh1emVoYW8=,size_16,color_FFFFFF,t_70#pic_center)\n\n\u8fd9\u4e48\u5faa\u73af\u53cd\u590d\uff0c\u6700\u540e\u5c31\u53d8\u6210\u4e86\u8fd9\u6837\uff1a\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20210306095246602.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JXemh1emVoYW8=,size_16,color_FFFFFF,t_70#pic_center)\n\n\u4e09\u884c\u51b2\u7a81\uff08\u6682\u4e14\u4e0d\u8003\u8651\u4e24\u884c\u51b2\u7a81\uff09\uff1a\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20210306095638531.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JXemh1emVoYW8=,size_16,color_FFFFFF,t_70#pic_center)\n\n\u8fd8\u662f\u8003\u8651\u7b2c\u4e00\u884c\uff0c\u53d1\u73b0\u53f3\u6570\u7b2c\u4e8c\u683c\u6709\u9a6c\uff0c\u800c\u4e14\u6ca1\u88ab\u6321\u4f4f\uff0c\u90a3\u4e48\u53ef\u4ee5\u5411\u4e0b\u9762\u4e24\u884c\u653b\u51fb\u3002\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20210306095835182.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JXemh1emVoYW8=,size_16,color_FFFFFF,t_70#pic_center)\n\n\u7136\u540e\u53f3\u6570\u7b2c\u4e09\u4e2a\uff0c\u6709\u9a6c\u4e14\u6ca1\u88ab\u6321\u4f4f\uff0c\u53ef\u4ee5\u5411\u4e0b\u653b\u51fb\u3002\n\n\u90a3\u4e48\u7ee7\u7eed\u505a\u4e0b\u53bb\uff0c\u53d1\u73b0\u53ea\u6709\u7b2c\u4e00\u5217\u7684\u9a6c\u88ab\u6321\u4f4f\uff0c\u90a3\u4e48\u6700\u540e\u7ed3\u679c\u5982\u4e0b\uff1a\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/2021030610003080.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0JXemh1emVoYW8=,size_16,color_FFFFFF,t_70#pic_center)\n\n\u4e8e\u662f\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u5173\u4e8e\u4ee3\u7801\u5b9e\u73b0\uff1a\n\n\u9996\u5148\u6211\u4eec\u9700\u8981\u4e24\u4e2a\u57fa\u7840\u51fd\u6570\uff1a\n\n```cpp\nint Getbit(int x, int a)//\u8fd4\u56de x \u7684\u4e8c\u8fdb\u5236\u4e0b\u7b2c a \u4f4d\u4e14\u4fdd\u7559\u53f3\u4fa7 0\n{\n\tif (a < 1) return 0;\n\treturn x & (1 << (a - 1));\n}\n\nint check(int x, int a)//\u67e5\u8be2 x \u7684\u4e8c\u8fdb\u5236\u4e0b\u7b2c a \u4f4d\n{\n\tif (a < 1) return 0;\n\tif (x & (1 << (a - 1))) return 1;\n\treturn 0;\n}\n```\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u6109\u5feb\u7684\u6253\u4ee3\u7801\u4e86\u3002\n\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u6280\u5de7\uff1a`-1` \u7684\u8865\u7801\u662f `11111111111111111111111111111111`\uff0832 \u4e2a1\uff09\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u6765\u5904\u7406\u4f4d\u8fd0\u7b97\u3002\n\n`Two_attack` \u548c `Three_attack` \u5982\u4e0b\uff1a\n\n```cpp\nint Two_attack(int k)//k \u662f\u4e0a\u9762\u4e00\u884c\u72b6\u6001\n{\n\tint State = 0;\n\tfor (int i = 1; Getbit(-1, i) <= k; ++i)\n\t{\n\t\tif (!check(k, i)) continue;\n\t\tif (!check(k, i - 1)) State |= Getbit(-1, i - 2);\n\t\tif (!check(k, i + 1)) State |= Getbit(-1, i + 2);\n\t}\n\treturn State;\n}\n\nint Three_attack(int k, int l)//k \u662f\u7b2c\u4e00\u884c\uff0cl \u662f\u7b2c\u4e8c\u884c\n{\n\tint State = 0;\n\tfor (int i = 1; Getbit(-1, i) <= k; ++i)\n\t{\n\t\tif (!check(k, i)) continue;\n\t\tif (!check(l, i)) State |= Getbit(-1, i - 1), State |= Getbit(-1, i + 1);\n\t}\n\treturn State;\n}\n```\n\n\u90a3\u4e48\u5c31\u505a\u5b8c\u4e86\u3002\n\n**\u7279\u522b\u63d0\u9192\uff1a\u56e0\u4e3a\u672c\u9898\u6bd2\u7624\u7684\u7a7a\u95f4\u9650\u5236\uff0c\u5fc5\u987b\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u538b\u7f29\u7a7a\u95f4\u3002**\n\n\u4ee3\u7801\uff1a\n\n```cpp\n/*\n========= Plozia =========\n\tAuthor:Plozia\n\tProblem:P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\n\tDate:2021/3/5\n========= Plozia =========\n*/\n\n#include <bits/stdc++.h>\n\ntypedef long long LL;\nconst int P = 1e9 + 7;\nint n, m;\nLL f[3][64][64], ans;\n\nint read()\n{\n\tint sum = 0, fh = 1; char ch = getchar();\n\tfor (; ch < '0' || ch > '9'; ch = getchar()) fh -= (ch == '-') << 1;\n\tfor (; ch >= '0' && ch <= '9'; ch = getchar()) sum = (sum << 3) + (sum << 1) + (ch ^ 48);\n\treturn (fh == 1) ? sum : -sum;\n}\n\nint Getbit(int x, int a)//\u8fd4\u56de x \u7684\u4e8c\u8fdb\u5236\u4e0b\u7b2c a \u4f4d\u4e14\u4fdd\u7559\u53f3\u4fa7 0\n{\n\tif (a < 1) return 0;\n\treturn x & (1 << (a - 1));\n}\n\nint check(int x, int a)//\u67e5\u8be2 x \u7684\u4e8c\u8fdb\u5236\u4e0b\u7b2c a \u4f4d\n{\n\tif (a < 1) return 0;\n\tif (x & (1 << (a - 1))) return 1;\n\treturn 0;\n}\n\nint Two_attack(int k)//k \u662f\u4e0a\u9762\u4e00\u884c\u72b6\u6001\n{\n\tint State = 0;\n\tfor (int i = 1; Getbit(-1, i) <= k; ++i)\n\t{\n\t\tif (!check(k, i)) continue;\n\t\tif (!check(k, i - 1)) State |= Getbit(-1, i - 2);\n\t\tif (!check(k, i + 1)) State |= Getbit(-1, i + 2);\n\t}\n\treturn State;\n}\n\nint Three_attack(int k, int l)//k \u662f\u7b2c\u4e00\u884c\uff0cl \u662f\u7b2c\u4e8c\u884c\n{\n\tint State = 0;\n\tfor (int i = 1; Getbit(-1, i) <= k; ++i)\n\t{\n\t\tif (!check(k, i)) continue;\n\t\tif (!check(l, i)) State |= Getbit(-1, i - 1), State |= Getbit(-1, i + 1);\n\t}\n\treturn State;\n}\n\nint main()\n{\n\tn = read(), m = read();\n\tfor (int i = 0; i < (1 << m); ++i) f[1][i][0] = 1;\n\tfor (int i = 0; i < (1 << m); ++i)\n\t\tfor (int j = 0; j < (1 << m); ++j)\n\t\t\tif ((!(Two_attack(i) & j)) & (!(Two_attack(j) & i))) f[2][j][i] = (f[2][j][i] + f[1][i][0]) % P;\n\tfor (int i = 3; i <= n; ++i)\n\t\tfor (int j = 0; j < (1 << m); ++j)\n\t\t\tfor (int k = 0; k < (1 << m); ++k)\n\t\t\t{\n\t\t\t\tf[i % 3][j][k] = 0;\n\t\t\t\tif (Two_attack(j) & k) continue;\n\t\t\t\tif (Two_attack(k) & j) continue;\n\t\t\t\tfor (int l = 0; l < (1 << m); ++l)\n\t\t\t\t{\n\t\t\t\t\tif (Two_attack(l) & k) continue;\n\t\t\t\t\tif (Two_attack(k) & l) continue;\n\t\t\t\t\tif (Three_attack(l, k) & j) continue;\n\t\t\t\t\tif (Three_attack(j, k) & l) continue;\n\t\t\t\t\tf[i % 3][j][k] = (f[i % 3][j][k] + f[(i - 1) % 3][k][l]) % P;\n\t\t\t\t}\n\t\t\t}\n\tans = 0;\n\tfor (int i = 0; i < (1 << m); ++i)\n\t\tfor (int j = 0; j < (1 << m); ++j)\n\t\t\tif ((!(Two_attack(i) & j)) & (!(Two_attack(j) & i))) ans = (ans + f[n % 3][i][j]) % P;\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1617628266,
        "uid": 134000,
        "name": "Plozia",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5005\u3010\u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\u3011"
    },
    {
        "content": "\u3010\u5206\u6790\u3011\n\n\t       \u5178\u578b\u7684\u72b6\u538bDP\u4e86\u5427\u3002\u3002\u3002\u7528F[i][Sta]\u8868\u793a\u7b2ci\u884c\u653e\u9a6c\u60c5\u51b5\u4e3aSta\u7684\u65b9\u6848\u6570\uff0c\u4ecei\u22121\u548ci\u22122\u8f6c\u79fb\u8fc7\u6765\uff0c\u6ce8\u610f\u4e2d\u56fd\u8c61\u68cb\u53ef\u4ee5\u522b\u9a6c\u811a\uff0c\u7136\u540e\u7a7a\u95f4\u9650\u52361MB\uff0c\u6eda\u52a8\u4e00\u4e0b\u3002\u8fd8\u6709\u8fd9\u4e2a\u5224\u5408\u6cd5\uff0c\u76f4\u63a5\u4f4d\u8fd0\u7b97O(1)\u89e3\u51b3\u3002\u3002\u3002\n\u3010\u4ee3\u7801\u3011\n```\n\t#include<bits/stdc++.h>\n\t#define For(i,a,b) for(register int i=(a);i<=(b);++i)\n\t#define Rof(i,a,b) for(register int i=(a);i>=(b);--i)\n\t#define Mod 1000000007\n\tusing namespace std;\n\tint Ans,X,Y,Opt[3][1<<6][1<<6],Cur,Fir,Sec;\n\tint MOD(int x,long long y){if(y>=Mod)y%=Mod;for(x+=y;x>=Mod;x-=Mod);return x;}\n\tbool Check(int S1,int S2,int S3){\n\t\tif(((S1&(~(S1<<1)))>>2)&S2)return false;\n\t\tif(((S2&(~(S2<<1)))>>2)&S1)return false;\n\t\tif(((S2&(~(S2<<1)))>>2)&S3)return false;\n\t\tif(((S3&(~(S3<<1)))>>2)&S2)return false;\n\t\tif(((S1&(~(S1>>1)))<<2)&S2)return false;\n\t\tif(((S2&(~(S2>>1)))<<2)&S1)return false;\n\t\tif(((S2&(~(S2>>1)))<<2)&S3)return false;\n\t\tif(((S3&(~(S3>>1)))<<2)&S2)return false;\n\t\tif(((S1&(~S2))>>1)&S3)return false;\n\t\tif(((S1&(~S2))<<1)&S3)return false;\n\t\tif(((S3&(~S2))>>1)&S1)return false;\n\t\tif(((S3&(~S2))<<1)&S1)return false;\n\t\treturn true;\n\t}\n\tint main(){\n\t\tscanf(\"%d%d\",&X,&Y);Sec=0,Fir=1;\n\t\tFor(i,0,(1<<Y)-1)Opt[0][i][0]=1;\n\t\tFor(i,0,(1<<Y)-1)For(j,0,(1<<Y)-1)if(Check(i,j,0))Opt[1][i][j]=MOD(Opt[1][i][j],Opt[0][j][0]);\n\t\tFor(r,2,X-1){\n\t\t\tCur=r%3;memset(Opt[Cur],0,sizeof(Opt[Cur]));\n\t\t\tFor(i,0,(1<<Y)-1)For(j,0,(1<<Y)-1)For(k,0,(1<<Y)-1)if(Check(i,j,k))Opt[Cur][i][j]=MOD(Opt[Cur][i][j],Opt[Fir][j][k]);\n\t\t\tSec=Fir,Fir=Cur;\n\t\t}\n\t\tCur=(X-1)%3;For(i,0,(1<<Y)-1)For(j,0,(1<<Y)-1)Ans=MOD(Ans,Opt[Cur][i][j]);\n\t\tprintf(\"%d\\n\",Ans);\n\t\treturn 0;\n}\n```",
        "postTime": 1565649891,
        "uid": 24518,
        "name": "\u5047\u88c5\u601d\u8003",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5005 \u3010\u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\u3011"
    },
    {
        "content": "#### \u6bd4\u8f83\u5178\u578b\u7684\u72b6\u6001\u538b\u7f29 + \u6eda\u52a8\u6570\u7ec4 DP\n\n\u770b\u5230\u6570\u636e\u8303\u56f4 $n\\le100$ \u5927\u6982\u5c31\u60f3\u7684\u5230\u662f\u72b6\u6001\u538b\u7f29\u52a8\u6001\u89c4\u5212\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u9884\u5904\u7406\u884c\u4e0e\u884c\u4e4b\u95f4\u7684\u5408\u6cd5\u5173\u7cfb\u3002\u7531\u4e8e\u9a6c\u4e0d\u4f1a\u653b\u51fb\u540c\u4e00\u5217\u4e0a\u7684\u5176\u4ed6\u9a6c\uff0c\u6240\u4ee5\u5728\u540c\u4e00\u5217\u65f6\uff0c\u4e0d\u8bba\u6211\u4eec\u600e\u4e48\u6446\u653e\u9a6c\uff0c\u603b\u662f\u5408\u6cd5\u7684\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u6570\u7ec4 $dp$\uff0c\u5176\u4e2d\uff0c$dp_{i,j,k}$ \u8868\u793a\u7684\u662f\u5728\u7b2c $i$ \u884c\uff0c\u5f53\u524d\u884c\u548c\u524d\u4e00\u884c\u5206\u522b\u4e3a $j$ \u548c $k$ \u65f6\u7684\u65b9\u6848\u6570\u3002\n\n\u8fd9\u6837\u4e00\u6765\u6211\u4eec\u5c31\u53ef\u4ee5\u5148\u5bf9\u7b2c\u4e00\u5217\u8fdb\u884c\u521d\u59cb\u5316\uff1a\n```cpp\n  for(i = 0;i<(1<<y);i++)\n    dp[1][i][0] = 1;\n```\n\n\u5728\u884c\u4e0e\u884c\u4e4b\u95f4\u7684\u5408\u6cd5\u5173\u7cfb\u65f6\uff0c\u7ef4\u62a4\u4e00\u4e2a $vis$ \u5e03\u5c14\u53d8\u91cf\uff0c\u8bb0\u5f55\u4e24\u79cd\u6446\u653e\u65b9\u5f0f\u4e4b\u95f4\u662f\u5426\u5408\u6cd5\u3002\u5177\u4f53\u7684\u5904\u7406\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u53ea\u8981\u5224\u65ad\u5728\u7eb5\u5411\u4e0a\u7f51\u4e0a\u548c\u5f80\u4e0b\u5206\u522b\u4e24\u683c\u7684\u4f4d\u7f6e\u662f\u5426\u6709\u9a6c\uff0c\u5e76\u4e14\u9a6c\u6709\u6ca1\u6709\u88ab\u963b\u6321\u5c31\u884c\u4e86\u3002\n\n\u5177\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n  for(i = 0;i<(1<<y);i++){\n    for(j = 0;j<(1<<y);j++){\n      fl = false;\n      for(k = 0;k<y;k++){//k\u8868\u793a\u679a\u4e3e\u5230\u7b2ck\u4f4d\n        if(i&(1<<k)){\n          if((j&(1<<k+2))&&!(j&(1<<k+1))){\n            fl = true;\n            break;\n          }else if(k>=2 and (j&1<<k-2)&&!(j&(1<<k-1))){\n            fl = true;\n            break;\n          }\n        }\n      }\n      if(fl){\n        ill[i][j] = ill[j][i] = true;//\u56e0\u4e3a\u6211\u4eec\u53ea\u5904\u7406\u4e86\u540e\u6392\u653b\u51fb\u524d\u6392\u7684\u60c5\u51b5\uff0c\u800c\u53cd\u8fc7\u6765\u4e5f\u662f\u540c\u7406\n      }\n    }\n  }\n\n```\n\n\u6700\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u4ece\u524d\u5f80\u540e\u63a8\u4e86\u3002\u5206\u522b\u679a\u4e3e\u5f80\u524d\u4e24\u884c\u3001\u5f80\u524d\u4e00\u884c\u548c\u5f53\u524d\u884c\u7684\u72b6\u51b5\uff0c\u5728\u6211\u4eec\u9884\u5904\u7406\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u53ea\u8981\u518d\u989d\u5916\u5904\u7406\u4e00\u4e0b\u5f53\u524d\u884c\u653b\u51fb\u5f80\u524d\u4e24\u884c\uff0c\u548c\u5f80\u524d\u4e24\u884c\u653b\u51fb\u5f53\u524d\u884c\u8fd9\u4e24\u79cd\u60c5\u51b5\u5c31\u884c\u4e86\u3002\u5b9a\u4e49\u96c6\u5408 $\\mathbf{A}$ \u4e3a\u6240\u6709\u65e2\u80fd\u5728 $j$ \u524d\u4e00\u884c\uff0c\u4e5f\u80fd\u5728 $p$ \u524d\u4e24\u884c\u7684\u72b6\u6001\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u6709\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$dp_{r,p,j}=\\displaystyle\\sum_{i\\in\\mathbf{A}}dp_{r-1,j,i}$\n\n\u6700\u7ec8\u7edf\u8ba1\u7b54\u6848\u7684\u65f6\u5019\uff0c\u53ea\u8981\u5c06\u6240\u6709\u4e92\u76f8\u5408\u6cd5\u7684\u65b9\u6848\u6570\u52a0\u8d77\u6765\u5c31\u884c\u4e86\u3002\n\n\u6ce8\u610f\uff0c\u672c\u9898\u7684\u7a7a\u95f4\u9650\u5236\u53ea\u6709 1MB\uff0c\u6240\u4ee5\u8981\u7528 **\u6eda\u52a8\u6570\u7ec4**\u3002\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint dp[3][1<<6][1<<6],x,y,i,j,k,r,p,ans,row;\nbool fl,ill[1<<6][1<<6];\n\nint main(){\n  scanf(\"%d%d\",&x,&y);\n\n  for(i = 0;i<(1<<y);i++)\n    dp[1][i][0] = 1;\n\n  for(i = 0;i<(1<<y);i++){\n    for(j = 0;j<(1<<y);j++){\n      fl = false;\n      for(k = 0;k<y;k++){\n        if(i&(1<<k)){\n          if((j&(1<<k+2))&&!(j&(1<<k+1))){\n            fl = true;\n            break;\n          }else if(k>=2 and (j&1<<k-2)&&!(j&(1<<k-1))){\n            fl = true;\n            break;\n          }\n        }\n      }\n      if(fl){\n        ill[i][j] = ill[j][i] = true;\n      }\n    }\n  }\n\n  for(i = 0;i<(1<<y);i++)    for(j = 0;j<(1<<y);j++)\n      if(!ill[i][j])dp[2][i][j] = 1;\n  if(x<=2){\n    for(i = 0;i<(1<<y);i++){\n      for(j = 0;j<(1<<y);j++){\n        if(!ill[i][j])(ans += dp[x][i][j]) %= 1000000007;\n      }\n    }\n\n    printf(\"%d\",ans);\n    return 0;\n  }\n\n  row = 1;\n  for(r = 3;r<=x;r++){\n    memset(dp[row],0,sizeof dp[row]);\n    for(p = 0;p<(1<<y);p++){\n      for(j = 0;j<(1<<y);j++){\n        for(i = 0;i<(1<<y);i++){\n          if(ill[i][j]||ill[j][p])continue;\n\n          fl = false;\n          for(k = 0;k<y;k++){\n            if(p&(1<<k)){\n              if((i&1<<k+1)&&!(j&1<<k+1)){\n                fl = true;\n                break;\n              }else if(k>=1 and (i&1<<k-1)&&!(j&1<<k-1)){\n                fl = true;\n                break;\n              }else if(!(j&1<<k)&&((i&1<<k+1)||(k>=1 and (i&1<<k-1)))){\n                fl = true;\n                break;\n              }\n            }\n          }\n\n          if(!fl)(dp[row][p][j] += dp[3-row][j][i]) %= 1000000007;\n        }\n      }\n    }\n    row = 3 - row;\n  }\n\n  for(i = 0;i<(1<<y);i++){\n    for(j = 0;j<(1<<y);j++){\n      if(!ill[i][j])(ans += dp[3 - row][i][j]) %= 1000000007;\n    }\n  }\n\n  printf(\"%d\",ans);\n}\n\n```",
        "postTime": 1682520285,
        "uid": 540287,
        "name": "stupid_collie",
        "ccfLevel": 0,
        "title": "P5005 \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u4f20\u9001\u95e8\uff1a[P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c](https://www.luogu.com.cn/problem/P5005)\u3002\n# \u524d\u7f6e\u77e5\u8bc6\n\u5224\u65ad $i$ \u548c $i-1$ \u884c\u662f\u5426\u51b2\u7a81\uff1a\n```\n- - - - - - -\n- 2 - - - 2 -\n- - 3 1 3 - -\n```\n\u5982\u56fe $1$ \u662f\u9a6c\u7684\u4f4d\u7f6e\uff0c$2$ \u662f\u653b\u51fb\u7684\u8303\u56f4\uff0c$3$ \u662f\u9a6c\u811a\uff0c \u5982\u679c $3$ \u653e\u4e86 $2$ \u5c31\u4e0d\u4f1a\u88ab\u653b\u51fb\u3002\n\n\u6211\u4eec\u60f3\u5982\u679c\u6ca1\u6709\u9a6c\u811a\uff0c\u4e4b\u95f4\u5de6\u53f3\u79fb\u518d\u8fdb\u884c\u4e14\u8fd0\u7b97\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f46\u662f\u6211\u4eec\u6709\u9a6c\u811a\uff0c\u53ef\u4ee5\u76f4\u63a5\u8ba9\u7b2c $3$ \u884c\u5de6\u53f3\u79fb\uff0c\u53d6\u53cd\uff0c\u518d\u4e14\u8fd0\u7b97\u5373\u53ef\u3002\n\n```cpp\ninline bool check1(int a,int b){\n\tif ((a<<2)&(b&~(b<<1))) return 1;\n\tif ((a>>2)&(b&~(b>>1))) return 1;\n\tif ((b<<2)&(a&~(a<<1))) return 1;//\u8981\u6ce8\u610f\u5224\u65ad\u53cd\u5411\n\tif ((b>>2)&(a&~(a>>1))) return 1;\n\treturn 0;\n}\n```\n\n\u5224\u65ad $i$ \u548c $i-2$ \u884c\u662f\u5426\u51b2\u7a81\uff1a\n\n```\n- - 2 - 2 - - \n- - - 3 - - -\n- - - 1 - - -\n```\n\n\u5982\u56fe\uff0c\u8bf4\u660e\u5982\u4e0a\uff0c\u53ea\u662f\u628a\u7b2c $3$ \u884c\u5de6\u53f3\u79fb\uff0c\u518d\u53d6\u53cd\u6362\u6210\u4e86\uff0c\u7b2c $2$ \u884c\u53d6\u53cd\u3002\n\n```cpp\ninline bool check2(int a,int b,int c){\n\tif ((a<<1)&(c&~b)) return 1;\n\tif ((a>>1)&(c&~b)) return 1;\n\tif ((c<<1)&(a&~b)) return 1;\n\tif ((c>>1)&(a&~b)) return 1;\n\treturn 0;\n}\n```\n# \u601d\u8def\n\n\u8fd9\u662f\u4e00\u9053\u5f88\u660e\u663e\u7684 **dp**\u3002\n\n**\u72b6\u6001\u8868\u793a\uff1a**\n\n$f_{i,j,k}$ \u8868\u793a\u7b2c $i$ \u884c\u72b6\u6001\u4e3a $j$\uff0c$i-1$ \u884c\u72b6\u6001\u4e3a $k$ \u7684\u65b9\u6848\u6570\uff0c\u6211\u4eec\u5047\u8bbe $i-2$ \u884c\u72b6\u6001\u4e3a $l$\u3002\n\n**\u72b6\u6001\u521d\u59cb\u5316\uff1a**\n\n$f_{0,0,0}=1$ \u5565\u4e5f\u6ca1\u6709\u5c31 $1$ \u79cd\u653e\u6cd5\u3002\n\n**\u72b6\u6001\u8f6c\u79fb\uff1a**\n\n\u901a\u8fc7\u679a\u4e3e $l$\uff0c\u6839\u636e\u4e0a\u4e0a\u884c\u5c31\u884c\u8f6c\u79fb\uff08\u524d\u63d0\u662f\u4e0d\u51b2\u7a81\uff09\uff0c\u6211\u7684\u65b9\u6848\u6570\u5c31\u662f\u524d\u4e00\u884c\u65b9\u6848\u6570\u603b\u6570\u3002\n\n\u6700\u540e\u65b9\u7a0b\u4e3a\uff1a$f_{i,j,k}=f_{i,j,k}+f_{i-1,k,l}$\u3002\n\n\u6700\u540e\u7b54\u6848\u4e3a\uff1a$f_{n,i,j}$\u3002\n\n\u7531\u4e8e\u8fd9\u9053\u9898\u7a7a\u95f4\u5f88\u5c0f\u6240\u4ee5\u8981\u7528**\u72b6\u6001\u538b\u7f29**\u3002\n# \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n//#define int long long\nusing namespace std;\ninline bool check1(int a,int b){\n\tif ((a<<2)&(b&~(b<<1))) return 1;\n\tif ((a>>2)&(b&~(b>>1))) return 1;\n\tif ((b<<2)&(a&~(a<<1))) return 1;\n\tif ((b>>2)&(a&~(a>>1))) return 1;\n\treturn 0;\n}\ninline bool check2(int a,int b,int c){\n\tif ((a<<1)&(c&~b)) return 1;\n\tif ((a>>1)&(c&~b)) return 1;\n\tif ((c<<1)&(a&~b)) return 1;\n\tif ((c>>1)&(a&~b)) return 1;\n\treturn 0;\n}\nconst int N=110,M=7;\nint f[2][1<<M][1<<M];\nconst int mod=1e9+7;\nmain(){\n\tint n,m;\n\tcin>>n>>m;\n\tf[0][0][0]=1;\n\tfor (int i=1;i<=n;i++)\n\t\tfor (int j=0;j<(1<<m);j++)\n\t\t\tfor (int k=0;k<(1<<m);k++){\n\t\t\t\tf[i&1][j][k]=0;\n\t\t\t\tif (check1(j,k)) continue;\n\t\t\t\tfor (int l=0;l<(1<<m);l++){\n\t\t\t\t\tif (check2(j,k,l)||check1(k,l)) continue;\n\t\t\t\t\tf[i&1][j][k]+=f[(i&1)^1][k][l];\n\t\t\t\t\tf[i&1][j][k]%=mod;\n\t\t\t\t}\n\t\t\t}\n\tint ans=0;\n\tfor (int i=0;i<(1<<m);i++)\n\t\tfor (int j=0;j<(1<<m);j++) ans+=f[n&1][i][j],ans%=mod;\n\tcout <<ans;\n    return 0;\n}\n\n```\n",
        "postTime": 1679750757,
        "uid": 658198,
        "name": "gesong",
        "ccfLevel": 4,
        "title": "P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u539f\u672c\u662f\u4e2a\u7d2b\u9898\u2026\u2026\n\n\u524d\u7f6e\u829d\u58eb\uff1a[\u72b6\u538b dp](https://oi-wiki.org/dp/state/)\n\n\u5728\u505a\u8fd9\u9053\u9898\u524d\uff0c\u53ef\u4ee5\u5148\u770b\u770b\u8fd9\u4e2a\uff1a[P8756 \u56fd\u9645\u8c61\u68cb](https://www.luogu.com.cn/problem/P8756)\n\n## \u601d\u8def\n\u7528\u4e8c\u8fdb\u5236\u5b58\u50a8\u6bcf\u884c\u7684\u72b6\u6001\uff0c1 \u4e3a\u653e\u9a6c\uff0c0 \u4e3a\u4e0d\u653e\uff0c\u56e0\u4e3a\u9a6c\u6700\u591a\u53ea\u80fd\u5403\u5230\u4e0a\u4e24\u884c\u7684\u68cb\u5b50\uff0c\u5373\u5f53\u524d\u8fd9\u884c\u53ea\u4e0e\u4e0a\u4e24\u884c\u6709\u5173\uff0c\u6240\u4ee5\u53ea\u7528\u5f00\u4e00\u4e2a\u4e09\u7ef4\u6570\u7ec4\uff0c\u4e00\u7ef4\u5b58\u884c\u6570\uff0c\u5269\u4e0b\u4e24\u7ef4\u5b58\u4e0a\u4e24\u884c\u7684\u72b6\u6001\uff0c\u6700\u540e\u52a0\u8d77\u6765\u8f93\u51fa\u5373\u53ef\uff08\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u770b\u4e0b\u9762\u7684\u4ee3\u7801\uff09\u3002\n\n\u63a5\u4e0b\u6765\u8fd8\u6709\u4e00\u4e2a\u96be\u70b9\uff0c\u5982\u4f55\u5224\u65ad\u72b6\u6001\u5408\u6cd5\u3002\n\n\u4e2d\u56fd\u8c61\u68cb\u7684\u9a6c\u548c\u56fd\u9645\u8c61\u68cb\u7684\u9a6c\u6709\u4e00\u70b9\u4e0d\u540c\u2014\u2014\u4e2d\u56fd\u8c61\u68cb\u6709\u201c\u8e69\u9a6c\u817f\u201d\uff08\u9898\u76ee\u4e0a\u6709\u5177\u4f53\u8bf4\u660e\uff09\uff0c\u800c\u56fd\u9645\u8c61\u68cb\u6ca1\u6709\u3002\u56e0\u6b64\u56fd\u9645\u8c61\u68cb\u76f4\u63a5\u7528\u7b80\u5355\u7684\u4f4d\u8fd0\u7b97\u5373\u53ef\uff0c\u63a5\u4e0b\u6765\u4ecb\u7ecd\u5982\u4f55\u5224\u65ad\u4e2d\u56fd\u8c61\u68cb\u4e2d\u72b6\u6001\u662f\u5426\u5408\u6cd5\u3002\n\n### \u5206\u7c7b\u8ba8\u8bba\uff1a\n1. \u5982\u4e0b\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3ifdq9k3.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u663e\u7136\uff0c\u56fe\u4e2d\u4e24\u79cd\u60c5\u51b5\u662f\u7b49\u4ef7\u7684\uff0c\u7531\u4e2d\u56fd\u8c61\u68cb\u4e2d\u201c\u8e69\u9a6c\u817f\u201d\u7684\u5b9a\u4e49\u53ef\u77e5\uff0c\u5982\u679c\u4e24\u4e2a\u7ea2\u8272\u65b9\u5757\u4e2d\u6709\u68cb\u5b50\uff0c\u663e\u7136\u5f53\u4e14\u4ec5\u5f53\u4e24\u4e2a\u84dd\u8272\u65b9\u683c\u4e2d\u4e5f\u6709\u68cb\u5b50\uff0c\u72b6\u6001\u5408\u6cd5\u3002\uff08\u6ce8\u610f\u4e24\u79cd\u60c5\u51b5\u90fd\u8981\u5224\u65ad\uff01\uff09\n\n\u5224\u65ad\u65b9\u6cd5\u53ef\u4ee5\u6bcf\u5217\u90fd\u5224\u65ad\u4e00\u904d\uff0c\u6700\u540e\u5982\u679c\u90fd\u5408\u6cd5\u8fd4\u56de ```true```\uff0c\u5426\u5219\u8fd4\u56de ```false```\u3002\n#### code:\n```cpp\nfor(int i=1;i<=n;i++){\n\tif(i>2&&(x[i]&y[i-2])&&(!y[i-1]||!x[i-1])) return false;\n\telse if(i<n-1&&(x[i]&y[i+2])&&(!y[i+1]||!x[i+1])) return false;\n\t//\u5206\u522b\u5224\u65ad\u5f53\u524d\u884c\u4e0e\u4e0a\u4e00\u884c\u6bcf\u4e00\u5217\u662f\u5426\u5408\u6cd5\uff0c\u5982\u679c\u4e0d\u5408\u6cd5\uff0c\u76f4\u63a5\u8fd4\u56de\n}\n```\n\n\n2. \u5982\u4e0b\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zfiknebv.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u548c\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e00\u6837\uff0c\u8fd9\u91cc\u4e0d\u518d\u8fc7\u591a\u8d58\u8ff0\uff0c\u76f4\u63a5\u4e0a\u4ee3\u7801\uff1a\n#### code:\n```cpp\nfor(int i=1;i<=n;i++){\n\tif(i>1&&(x[i]&z[i-1])&&!(y[i]&y[i-1])) return false;\n\telse if(i<n&&(x[i]&z[i+1])&&!(y[i]&y[i+1])) return false;\n\t//\u540c\u4e0a\n}\n```\n\n### dp \u90e8\u5206\uff1a\n\u8fd9\u9053\u9898\u7684 dp \u90e8\u5206\u548c\u5176\u4ed6\u72b6\u538b dp \u662f\u4e00\u6837\u7684\uff0c\u5728\u6b64\u4e0d\u518d\u8fc7\u591a\u8bf4\u660e\uff0c\u91cd\u70b9\u662f\u8981\u8bb0\u5f97\u7528\u6eda\u52a8\u6570\u7ec4\uff0c\u8981\u4e0d\u7136\u4f1a MLE\uff08\u53ef\u4ee5\u8003\u8651\u5c06\u884c\u6570\u538b\u7f29\uff0c\u56e0\u4e3a\u5f53\u524d\u884c\u7684\u60c5\u51b5\u6570\u4ec5\u4e0e\u4e0a\u4e00\u884c\u7684\u60c5\u51b5\u6570\u6709\u5173\uff0c\u8be6\u7ec6\u65b9\u6cd5\u53ef\u4ee5\u770b\u4ee3\u7801\uff09\u3002\n\n\u6700\u540e\u5408\u8d77\u6765\uff0c\u5c31\u80fd\u6109\u5feb\u7684 AC \u4e86\u2014\u2014\n## AC Code:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst long long N=1e9+7;\nlong long f[2][70][70],n,m,res;\nbool opt;\nbool check(int a,int b,int c){\n\tint x[10],y[10],z[10];\n\tfor(int i=1;i<=n;i++\uff09{\n\t\tx[i]=a%2,y[i]=b%2,z[i]=c%2,a/=2,b/=2,c/=2;\n\t\t//\u62c6\u5206\u4e3a\u4e8c\u8fdb\u5236\uff0c\u5373\u72b6\u6001\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(i>2&&(x[i]&y[i-2])&&(!y[i-1]||!x[i-1])) return false;\n\t\telse if(i<n-1&&(x[i]&y[i+2])&&(!y[i+1]||!x[i+1])) return false;\n\t\t//\u5206\u522b\u5224\u65ad\u5f53\u524d\u884c\u4e0e\u4e0a\u4e00\u884c\u6bcf\u4e00\u5217\u662f\u5426\u5408\u6cd5\uff0c\u5982\u679c\u4e0d\u5408\u6cd5\uff0c\u76f4\u63a5\u8fd4\u56de\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(i>1&&(x[i]&z[i-1])&&!(y[i]&y[i-1])) return false;\n\t\telse if(i<n&&(x[i]&z[i+1])&&!(y[i]&y[i+1])) return false;\n\t\t//\u540c\u4e0a\n\t}return true;//\u5982\u679c\u672a\u9000\u51fa\uff0c\u8bf4\u660e\u5408\u6cd5\uff0c\u8fd4\u56detrue\n}\nint main(){\n\tcin>>m>>n;\n\tfor(int i=0;i<(1<<n);i++) f[opt][i][0]++;\n\tfor(int i=2;i<=m;i++){\n\t\topt^=1;//\u6539\u53d8opt\u7684\u503c\n\t\tfor(int j=0;j<(1<<n);j++){\n\t\t\tfor(int a=0;a<(1<<n);a++){\n\t\t\t\tf[opt][j][a]=0;\n\t\t\t\tfor(int l=0;l<(1<<n);l++){\n\t\t\t\t\tif(check(j,a,l)) f[opt][j][a]+=f[opt^1][a][l],f[opt][j][a]%=N;\n\t\t\t\t\t//\u5982\u679c\u5408\u6cd5\u5c06\u52a0\u4e0a\u60c5\u51b5\u6570\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<(1<<n);i++){\n\t\tfor(int j=0;j<(1<<n);j++){\n\t\t\tres+=f[opt][i][j],res%=N;//\u5c06\u6240\u6709\u72b6\u6001\u79cd\u7c7b\u6570\u76f8\u52a0\n\t\t}\n\t}\n\tcout<<res;//\u8f93\u51fa\n\treturn 0;\n}\n```\n\u5b8c\u7ed3\u6492\u82b1\uff01",
        "postTime": 1670830310,
        "uid": 696106,
        "name": "Leowang2009",
        "ccfLevel": 0,
        "title": "P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c \u9898\u89e3"
    },
    {
        "content": "\u8c28\u4ee5\u6b64\u7bc7\u9898\u89e3\u7eaa\u5ff5\u6211\u9996\u4e2a\u5b8c\u5168\u72ec\u7acb\u601d\u8003 AC \u7684\u7d2b\u9898\u3002\n\n\u9996\u5148\uff0c\u672c\u9898\u4e00\u773c\u770b\u4e0a\u53bb\u5c31\u662f\u4e2a\u70ae\u5175\u9635\u5730\u52a0\u5f3a\u7248\uff0c\u7136\u540e\u6570\u636e\u8303\u56f4  $M\\leq 6$\uff0c\u94c1\u72b6\u538b\u3002\n\n\u663e\u7136\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a$3$\u7ef4\u52a8\u6001\u89c4\u5212\uff0c\u7ef4\u62a4\u5f53\u524d\u884c\u53f7\uff0c\u5f53\u524d\u884c\u72b6\u6001\uff0c\u4e0a\u4e00\u884c\u72b6\u6001\uff08\u56e0\u4e3a\u9a6c\u7684\u653b\u51fb\u8303\u56f4\u53ea\u6709\u4e24\u884c\uff09\u3002\u6211\u4eec\u4ee4  $dp_{i,j,k}$ \u4ee3\u8868\u5f53\u524d\u770b\u5230\u7b2c $i$ \u884c\uff0c\u672c\u884c\u72b6\u6001\u4e3a $j$\uff0c \u4e0a\u4e00\u884c\u72b6\u6001\u4e3a $k$ \u7684\u65b9\u6848\u6570\uff0c$ok_{i,j,k}$ \u4ee3\u8868\u72b6\u6001\u662f\u5426\u5408\u6cd5\u3002\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5373\u4e3a\uff1a\n$$\ndp_{i,j,k}=\\sum_q [ok_{q,j,k}]dp_{i-1,q,j}\n$$\n\n\u6700\u4e3b\u8981\u7684\u662f $ok_{i,j,k}$ \u5982\u4f55\u6c42\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f4d\u8fd0\u7b97\u7684\u5de6\u79fb\u53f3\u79fb\u6765\u8868\u793a\uff0c\u6ce8\u610f\uff0c\u9a6c\u7684\u653b\u51fb\u4e0d\u4e00\u5b9a\u662f\u76f8\u4e92\u7684\uff08\u56e0\u4e3a\u6709\u9a6c\u811a\uff09\u3002\u6211\u4eec\u53ef\u4ee5\u9996\u5148\u9884\u5904\u7406\u51fa\u6240\u6709\u5c40\u9762\u4e0d\u53ef\u4ee5\u653e\u7684\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u4e0a\u4e0b\u4e24\u884c\u51b2\u7a81\u7684\u5c40\u9762\u65b9\u4fbf\u5224\u65ad\u3002\u9884\u5904\u7406\u590d\u6742\u5ea6 $\\Theta(2^{m+1}m)$\u3002\n\n\u8fd9\u91cc\u662f\u5173\u952e\u90e8\u5206\u7684\u4ee3\u7801\uff0c\u5176\u4e2d\u540e\u4e24\u884c\u662f\u5224\u65ad\u82e5\u8be5\u70b9\u653e\u7f6e\u7684\u8bdd\u4f1a\u4e0d\u4f1a\u5f71\u54cd\u524d\u9762\u7684\u5c40\u9762\uff0c\u5373\u80fd\u591f\u653b\u51fb\u5230\u4e0a\u9762\u7684\u9a6c\uff1a\n\n```cpp\nfor (int k=0; k<=((1<<m)-1); k++) {\n\t\tfor (int l=0; l<=((1<<m)-1); l++) {\n\t\t\tfor (int j=0; j<m; j++) {\n\t\t\t\tif ((k>>1)&(1<<j))if (!((l>>1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif ((k<<1)&(1<<j))if (!((l<<1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif ((l>>2)&(1<<j))if (!((l>>1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif ((l<<2)&(1<<j))if (!((l<<1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif (!(l&(1<<j)))if (k>>1&(1<<j))can[k][l]|=1<<j;\n\t\t\t\tif (!(l&(1<<j)))if (k<<1&(1<<j))can[k][l]|=1<<j;\n\n\t\t\t}\n\t\t}\n\t}\n```\n\n\n\u968f\u5373\u6ce8\u610f\u5230\u672c\u9898\u7a7a\u95f4\u9650\u5236\u4ec5 $1\\texttt{Mb}$\uff0c\u6240\u4ee5\u6eda\u52a8\u6570\u7ec4\u4e00\u4e0b\u5373\u53ef\u3002\n\nAC Code\uff1a\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define mod 1000000007\nusing namespace std;\n\nint dp[2][1<<6+1][1<<6+1],can[1<<6+1][1<<6+1];\nbool ok[1<<6+1][1<<6+1];\n\nstring abc(ll s,ll dep) {\n\tif (dep==2)return s%2?\"1\":\"0\";\n\treturn abc(s/2,dep+1)+(s%2?\"1\":\"0\");\n}\n\nint main() {\n\tint n,m;\n\tcin >> n >> m;\n\tfor (int k=0; k<=((1<<m)-1); k++) {\n\t\tfor (int l=0; l<=((1<<m)-1); l++) {\n\t\t\tfor (int j=0; j<m; j++) {\n\t\t\t\tif ((k>>1)&(1<<j))if (!((l>>1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif ((k<<1)&(1<<j))if (!((l<<1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif ((l>>2)&(1<<j))if (!((l>>1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif ((l<<2)&(1<<j))if (!((l<<1)&(1<<j)))can[k][l]|=1<<j;\n\t\t\t\tif (!(l&(1<<j)))if (k>>1&(1<<j))can[k][l]|=1<<j;\n\t\t\t\tif (!(l&(1<<j)))if (k<<1&(1<<j))can[k][l]|=1<<j;\n\n\t\t\t}\n\t\t}\n\t}\n\tfor (int k=0; k<=((1<<m)-1); k++) {\n\t\tfor (int l=0; l<=((1<<m)-1); l++) {\n\t\t\tok[k][l]=1;\n\t\t\tfor (int j=0; j<m; j++) {\n\t\t\t\tif (l&(1<<j))\n\t\t\t\t\tif ((k<<2)&(1<<j))\n\t\t\t\t\t\tif (!((k<<1)&(1<<j)))\n\t\t\t\t\t\t\tok[k][l]=0;\n\t\t\t\tif (l&(1<<j))\n\t\t\t\t\tif ((k>>2)&(1<<j))\n\t\t\t\t\t\tif (!((k>>1)&(1<<j)))\n\n\t\t\t\t\t\t\tok[k][l]=0;\n\n\t\t\t\tif (k&(1<<j))\n\t\t\t\t\tif ((l<<2)&(1<<j))\n\t\t\t\t\t\tif (!((l<<1)&(1<<j)))\n\t\t\t\t\t\t\tok[k][l]=0;\n\t\t\t\tif (k&(1<<j))\n\t\t\t\t\tif ((l>>2)&(1<<j))\n\t\t\t\t\t\tif (!((l>>1)&(1<<j)))\n\n\t\t\t\t\t\t\tok[k][l]=0;\n\t\t\t}\n\t\t}\n\t}\n\tfor (int k=0; k<=((1<<m)-1); k++)dp[1][0][k]=1;\n\n\n\tfor (int l=0; l<=((1<<m)-1); l++)\n\t\tfor (int k=0; k<=((1<<m)-1); k++)\n\t\t\tif (ok[k][l]) {\n\t\t\t\tdp[0][k][l]+=dp[1][0][k];\n\t\t\t\tdp[0][k][l]%=mod;\n\t\t\t}\n\n\n\tfor (int i=3; i<=n; i++) {\n\t\tmemset(dp[i%2],0,sizeof(dp[i%2]));\n\t\tfor (int j=0; j<=((1<<m)-1); j++) {\n\t\t\tfor (int l=0; l<=((1<<m)-1); l++) {\n\t\t\t\tfor (int k=0; k<=((1<<m)-1); k++) {\n\n\t\t\t\t\tif (!ok[k][l])continue;\n\t\t\t\t\tif (!ok[l][j])continue;\n\t\t\t\t\tif (can[k][l]&j)continue;\n\n\t\t\t\t\tdp[i%2][l][j]+=dp[i%2^1][k][l];\n\t\t\t\t\tdp[i%2][l][j]%=mod;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tll ans=0;\n\tfor (int j=0; j<=((1<<m)-1); j++) {\n\t\tfor (int k=0; k<=((1<<m)-1); k++) {\n\t\t\tif (ok[j][k]) {\n\t\t\t\tans+=dp[n%2][j][k];\n\t\t\t\tans%=mod;\n\t\t\t}\n\n\t\t}\n\t}\n\tcout << ans;\n\treturn 0;\n}\n\n```\n\n",
        "postTime": 1647253855,
        "uid": 380042,
        "name": "piggy123",
        "ccfLevel": 7,
        "title": "P5005\u9898\u89e3"
    },
    {
        "content": "# \u524d\u8a00\n\n\u505a\u8fd9\u79cd\u9898\u8fd8\u662f\u633a\u723d\u7684\u3002\n\n\u524d\u7f6e\u77e5\u8bc6\uff1a\u72b6\u538b+\u6eda\u52a8\u6570\u7ec4\n\n# \u601d\u8def\n\n\u76f8\u4fe1\u5404\u4f4d\u90fd\u505a\u8fc7\u5dee\u4e0d\u591a\u7684\u95ee\u9898\uff0c\u50cf\u653e\u56fd\u738b\uff0c\u653e\u70ae\u5f39\u7b49\u3002\n\n\u8fd9\u91cc\u4e0e\u4e0a\u8bc9\u7684\u5dee\u4e0d\u591a\uff0c\u53ea\u662f\u591a\u4e86\u4e00\u4e2a\u6761\u4ef6\u9650\u5236\uff1a\u6487\u9a6c\u817f\u3002\n\n\u6211\u4eec\u4e00\u6b65\u4e00\u6b65\u6765\u770b\u3002\n\n**STEP1**\uff1a\n\n\u5148\u770b\u770b\u6570\u636e\u8303\u56f4\uff0c\u53d1\u73b0 $m$ \u7279\u522b\u5c0f\uff0c$n$ \u6bd4\u8f83\u5927\u3002\n\n\u5f88\u81ea\u7136\u7684\u60f3\u5230\u628a $m$ \u8fd9\u4e00\u7ef4\u4f5c\u4e3a\u4e8c\u8fdb\u5236\u7684\u72b6\u6001\u6765\u8fdb\u884c\u5904\u7406\u3002\n\n\u63a5\u7740\u6211\u4eec\u6765\u63a8\u4e00\u4e0b\u8fd9\u4e2a\u6709\u8da3\u7684\u72b6\u538b\u3002\n\n**STEP2**:\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u9a6c\uff0c\u80af\u5b9a\u4f1a\u5f71\u54cd\u5230\u4e0a\u4e00\u6392\u548c\u4e0a\u4e0a\u4e00\u6392\uff0c\u6216\u8005\u8bf4\u662f\u88ab\u4e0a\u4e00\u6392\u548c\u4e0a\u4e0a\u4e00\u6392\u5f71\u54cd\uff0c\u90a3\u4e48\u72b6\u538b\u7b2c\u4e00\u4f4d\u662f\u884c\u6570 $n$\uff0c\u7b2c\u4e8c\u7ef4\u662f\u5f53\u524d\u72b6\u6001\uff0c\u7b2c\u4e09\u7ef4\u662f\u4e0a\u4e00\u6392\u7684\u72b6\u6001\uff0c\u76ee\u524d\u770b\u6765**\u7a7a\u95f4\u8fd8\u591f\u5f00**\u3002\n\n**STEP3**:\n\n\u80af\u5b9a\u5bf9\u4e8e\u6240\u6709\u7684\u5f71\u54cd\u6765\u8bf4\uff0c\u53ea\u8981\u5176\u4e0d\u4f1a\u5f62\u6210\u9a6c\u5403\u9a6c\uff0c\u90a3\u65b9\u6848\u6570\u6211\u4eec\u90fd\u662f\u53ef\u4ee5\u7d2f\u52a0\u7684\u3002\n\n\u6240\u4ee5\u53ea\u8981\u9a8c\u8bc1\u4e86\u8fd9\u4e00\u6392\u548c\u4e0a\u4e00\u6392\u4ee5\u53ca\u4e0a\u4e0a\u4e00\u6392\u662f\u4e0d\u4f1a\u5f62\u6210\u9a6c\u5403\u9a6c\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u6c42\u51fa\u7b54\u6848\u3002\n\n**STEP4**:\n\n\u8fd9\u4e2a\u9a8c\u8bc1\u8fd8\u662f\u5f88\u597d\u60f3\uff0c\u7528\u4e09\u4e2a\u6570\u7ec4\u628a\u72b6\u6001\u7684\u6bcf\u4e00\u4e2a\u5b58\u4e0b\u6765\uff0c\u5148\u679a\u4e3e\u76f8\u90bb\u4e24\u884c\uff0c\u518d\u679a\u4e3e\u7b2c\u4e00\u884c\u548c\u7b2c\u4e09\u884c\uff08\u6b64\u65f6\u6487\u9a6c\u817f\u9700\u8981\u770b\u7b2c\u4e8c\u6392\u7684\u60c5\u51b5\uff09\u3002\n\n**STEP5**:\n\n\u6c27\u5316\u9499\uff01\u600e\u4e48 MLE \u4e86\uff0c\u4e00\u770b\uff0c1 MB\u3002\n\n\u770b\u6765\u9700\u8981\u6eda\u52a8\u6570\u7ec4\uff0c\u8fd9\u91cc\u76f4\u63a5\u53d6\u6a21 3 \u5373\u53ef\uff0c\u6ce8\u610f\u8981\u8d4b\u6210 0\uff0c\u4e0d\u7136\u8fd9\u4e2a\u72b6\u6001\u5c31\u548c\u4ee5\u524d\u6709\u4e86\u77db\u76fe\u3002\n\n# code\n\n```cpp\n#include<bits/stdc++.h>\n#define mem(a,b) memset(a,b,sizeof(a))\nusing namespace std;\nconst int N=1e2+5;\nconst int mod=1e9+7;\nint n,m;\nint Fi;\nint ans,dp[3][(1<<6)+1][(1<<6)+1];\nbool f1[17],f2[17],f3[17];\nbool Check_Two(int x,int y){\n\tmem(f1,0);\n\tmem(f2,0);\n\tint Len1=1,Len2=1;\n\twhile(x) f1[Len1]=(x&1),x>>=1,Len1++;\n\twhile(y) f2[Len2]=(y&1),y>>=1,Len2++;\n\tfor(int i=1;i<=m;i++){\n\t\tif(f1[i]){\n\t\t\tif(!f1[i+1] && f2[i+2]) return 0;\n\t\t\tif(i!=1) if(!f1[i-1] && f2[i-2]) return 0;\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tif(f2[i]){\n\t\t\tif(!f2[i+1] && f1[i+2]) return 0;\n\t\t\tif(i!=1) if(!f2[i-1] && f1[i-2]) return 0;\n\t\t}\n\t}\n\treturn 1;\n}\nbool Check_Three(int x,int y,int z){\n\tif(!Check_Two(x,y) || !Check_Two(y,z)) return 0;\n\tmem(f1,0);\n\tmem(f2,0);\n\tmem(f3,0);\n\tint Len1=1,Len2=1,Len3=1;\n\twhile(x) f1[Len1]=x&1,x>>=1,Len1++;\n\twhile(y) f2[Len2]=y&1,y>>=1,Len2++;\t\n\twhile(z) f3[Len3]=z&1,z>>=1,Len3++;\n\tfor(int i=1;i<=m;i++){\n\t\tif(f1[i] && !f2[i] && (f3[i+1] || f3[i-1])) return 0;\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tif(f3[i] && !f2[i] && (f1[i+1] || f1[i-1])) return 0;\n\t}\n\treturn 1;\n}\nint main(){\n\tscanf(\"%d %d\",&n,&m);\n\tFi=(1<<m)-1;\n\tfor(int i=0;i<=Fi;i++) dp[1][i][0]=1;\n\tfor(int i=2;i<=n;i++){\n\t\tfor(int j1=0;j1<=Fi;j1++)\n\t\t\tfor(int j2=0;j2<=Fi;j2++){\n\t\t\t\tdp[i%3][j1][j2]=0;\n\t\t\t\tif(Check_Two(j1,j2)){\n\t\t\t\t\tfor(int j3=0;j3<=Fi;j3++){\n\t\t\t\t\t\tif(Check_Three(j1,j2,j3)){\n\t\t\t\t\t\t\tdp[i%3][j1][j2]+=dp[(i-1)%3][j2][j3];\n\t\t\t\t\t\t\tdp[i%3][j1][j2]%=mod;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t}\n\tfor(int i=0;i<=Fi;i++)\n\t\tfor(int j=0;j<=Fi;j++){\n\t\t\tans+=dp[n%3][i][j];\n\t\t\tans%=mod;\n\t\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1642992559,
        "uid": 364122,
        "name": "BigJoker",
        "ccfLevel": 6,
        "title": "P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c-\u9898\u89e3\u62a5\u544a"
    },
    {
        "content": "# \u72b6\u6001\u538b\u7f29dp\n\n\u8fd9\u662f\u4e00\u9053\u72b6\u538b\u7684\u57fa\u7840\u9898\uff0c\u6ca1\u6709\u590d\u6742\u5947\u7279\u7684\u9898\u76ee\u6761\u4ef6\uff0c\u9898\u610f\u4e5f\u5f88\u6e05\u6670\u3002\n\n\u60f3\u50cf\u81ea\u5df1\u65e0\u804a\u900f\u9876\u628a\u9a6c\u6446\u4e0a\u68cb\u76d8\uff0c\u7136\u540e\u770b\u770b\u4f1a\u4e0d\u4f1a\u5728\u4e00\u6b65\u4e4b\u5185\u6709\u9a6c\u88ab\u5403\u6389\uff0c\u6446\u653e\u7684\u65b9\u6848\u6570\u5c31\u662f\u8fd9\u9053\u9898\u8981\u6c42\u7684\u3002\n\n\u6a2a\u5411\u7684\u5bbd\u5ea6\u6700\u5927\u4e3a  $6$  \uff0c\u90a3\u4e48\u5f88\u660e\u663e\u5c31\u662f\u6a2a\u5411\u538b\u7f29\u4e86\u3002\n\n## \u5408\u6cd5\u60c5\u51b5\u5224\u65ad\n\n\u4f17\u6240\u5468\u77e5\uff0c\u9a6c\u662f\u8fd9\u6837\u8d70\u7684\uff08 1 \u4ee3\u8868\u9a6c\u6240\u5728\u7684\u4f4d\u7f6e\uff0c 0 \u662f\u7a7a\u683c \uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iavxd9el.png)\n\n\u9a6c\u80fd\u591f\u6761\u5230\u6d45\u9ec4\u8272\u5757\u4e0a\u4ec5\u5f53\u8be5\u65b9\u5411\u4e0a\u6a59\u8272\u65b9\u5757\u4e0a\u6ca1\u6709\u5176\u4ed6\u7684\u9a6c\u3002\n\n\u6211\u4eec\u53d1\u73b0\u5f53\u4e24\u53ea\u9a6c\u4e0d\u80fd\u4e92\u76f8\u5403\u5230\u65f6\u6709\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1. \u9a6c\u4e0d\u5728\u6d45\u9ec4\u8272\u7684\u4f4d\u7f6e\u4e0a\uff1b\n\n2. \u5982\u4e0b\u56fe\uff0c\u6a59\u8272\u4f4d\u7f6e\u88ab\u5176\u4ed6\u9a6c\u5835\u6b7b\uff0c\u5e76\u4e14\u5835\u6b7b\u7684\u6761\u4ef6\u5fc5\u987b\u662f\u53cc\u5411\u7684\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wtvpvvds.png)\n\n\u76f4\u63a5\u8df3\u9a6c\u7684\u60c5\u51b5\u5f88\u597d\u5224\u65ad\uff0c\u53ea\u8981\u5206\u522b\u5c06\u8be5\u5c42\u72b6\u6001\u5de6\u79fb\u6216\u53f3\u79fb\u5230\u5bf9\u5e94\u4f4d\u7f6e\uff0c\u7136\u540e\u8fdb\u884c & \u64cd\u4f5c\u3002\u4f1a\u51fa\u73b0\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1. \u5982\u679c\u7ed3\u679c\u4e3a  $0$  \u5c31\u8bc1\u660e\u6d45\u9ec4\u8272\u4f4d\u7f6e\u4e0a\u6ca1\u6709\u5176\u4ed6\u7684\u9a6c\u3002\n\n2. \u5426\u5219\u5f97\u51fa\u7684\u7b54\u6848\u5c31\u662f\u5728  $1$  \u7684\u4f4d\u7f6e\u4e0a\u7684\u9a6c\u662f\u5371\u9669\u7684\u3002\n\n\u5bf9\u4e8e\u6709\u6487\u9a6c\u811a\u60c5\u51b5\uff0c\u6211\u4eec\u5b9e\u9645\u4e0a\u5c31\u662f\u8981\u5224\u65ad\u6709\u6ca1\u6709\u8fde\u7eed  $2$  \u4e2a\u9a6c\u51fa\u73b0\u7684\u5899\u4f53\u3002\n\n\u7ad6\u7740\u7684\u8fde\u7eed  $1$  \u5f88\u597d\u5224\u65ad\uff0c\u5c06\u4e0a\u4e0b\u4e24\u4e2a\u72b6\u6001 & \u4e00\u4e0b\u5c31\u597d\u4e86\uff0c\u5f97\u51fa\u7684\u7ed3\u679c\u5c31\u662f\u5899\u6240\u5728\u7684\u4f4d\u7f6e\u3002\n\n\u6a2a\u7740\u7684\u4e5f\u6bd4\u8f83\u5bb9\u6613\u5224\u65ad\u3002\u5c06\u672c\u8eab\u72b6\u6001\u53f3\uff08\u5de6\uff09\u79fb\u4e00\u4f4d\uff0c\u5728\u4e0e\u81ea\u8eab\u8fdb\u884c & \u64cd\u4f5c\uff0c\u5f97\u51fa\u7684\u7ed3\u679c\u5c31\u662f\u67d0\u4e00\u4f4d\u5411\u5de6\uff08\u53f3\uff09\u4e00\u683c\u6709\u6ca1\u6709\u8fde\u7eed\u7684  $1$  \u3002\n\n\u6700\u540e\u5bf9\u9f50\u4e00\u4e0b\u4e24\u6b21\u5f97\u51fa\u7684\u7ed3\u679c\u5c31\u80fd\u5224\u65ad\u51fa\u8fd9\u79cd\u60c5\u51b5\u5408\u4e0d\u5408\u6cd5\u4e86\u3002\n\n\u5224\u65ad\u90e8\u5206\u4ee3\u7801\uff1a\n\n```\ninline bool judge1(int j,int k)//\u5224\u65ad\u76f8\u90bb 2 \u884c\u662f\u5426\u5408\u6cd5\n{\n\tint x=(j>>2)&k,y=(j<<2)&k;\n\treturn (!y||((y>>1)&(j&k))==(y>>1))&&((!x||((x<<1)&(j&k))==(x<<1)));\n}\ninline bool judge2(int j,int l,int k)//\u5224\u65ad\u9694\u7740\u7684 1 \u884c\u662f\u5426\u5408\u6cd5\n{\n\tint x=(j<<1)&k,y=(j>>1)&k;\n\treturn ((!x||(x&(l&(l<<1)))==x)&&(!y||(y&(l&(l>>1)))==y));\n}\n```\n\n## dp\u8fc7\u7a0b\n\n\u505a\u8fc7\u70ae\u5175\u9635\u5730\u6a21\u677f\u9898\u7684\u90fd\u5e94\u8be5\u5f88\u6e05\u695a\u4e86\u3002\n\n\u7531\u4e8e\u9a6c\u7684\u72b6\u6001\u4e0e\u5176\u4e0a\u9762\u7684  $2$  \u884c\u72b6\u6001\u662f\u76f8\u5173\u7684\u3002\n\n\u6240\u4ee5\u5fc5\u987b\u7528  $2$  \u7ef4\u6570\u7ec4\u5b58\u50a8\u6bcf  $2$  \u884c\u7684\u72b6\u6001\u3002\n\n\u4ee4  $dp[i][j][k]$  \u8868\u793a\u8003\u8651\u5230\u7b2c  $i$  \u884c\u65f6\u7b2c  $i$  \u884c\u72b6\u6001\u4e3a  $j$  \uff0c\u7b2c  $i-1$  \u884c\u72b6\u6001\u4e3a  $k$  \u3002\n\n\u7136\u540e\u5c31\u5f97\u5230\u4e86\u8868\u8fbe\u5f0f\uff08 judge1 \u548c judge2 \u610f\u4e49\u5982\u4e0a\u4ee3\u7801 \uff09\uff1a\n\n```\ndp[i][j][k]=dp[i-1][k][l] (judge1(j,k)&&judge2(j,k,l)&&judge1(k,l))\n```\n\n\u90a3\u4e48\u56e0\u4e3a \" I won't MLE \" \uff0c\u90a3\u4e48\u5fc5\u987b\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u54af\u3002\n\n\u52a0\u4e0a\u6eda\u52a8\u6570\u7ec4\u5c31\u8fc7\u4e86\u561b\u3002\n\n\u53cc\u624b\u5949\u4e0a\u4ee3\u7801\uff08\u7801\u5206\u8f83\u4e11\u8bf7\u539f\u8c05\uff09\uff1a\n\n```\n#include<bits/stdc++.h>\n#define rep(a,b,c) for(int c=(a);c<=(b);++c)\n#define drep(a,b,c) for(int c=(a);c>=(b);++c)\nusing namespace std;\nconst int Mod=1e9+7;\n\nint dp[3][64][64];\ninline bool judge1(int j,int k)\n{\n\tint x=(j>>2)&k,y=(j<<2)&k;\n\treturn (!y||((y>>1)&(j&k))==(y>>1))&&((!x||((x<<1)&(j&k))==(x<<1)));\n}\ninline bool judge2(int j,int l,int k)\n{\n\tint x=(j<<1)&k,y=(j>>1)&k;\n\treturn ((!x||(x&(l&(l<<1)))==x)&&(!y||(y&(l&(l>>1)))==y));\n}\ninline void Add(int &x,int y){x+=y;if(x>Mod)x-=Mod;}\nint main()\n{\n\tint n,m;scanf(\"%d%d\",&n,&m);int len=(1<<m)-1;rep(0,len,i)dp[1][i][0]=1;\n\trep(0,len,i)rep(0,len,j)dp[2][i][j]=judge1(i,j);\n\trep(3,n,i){ memset(dp[i%3],0,sizeof(dp[i%3]));\n\trep(0,len,j)rep(0,len,k)if(judge1(j,k))rep(0,len,l)if(judge1(k,l)&&judge2(j,k,l))\n\t\tdp[i%3][j][k]=(dp[i%3][j][k]+dp[(i-1)%3][k][l])%Mod;}\n\tint ans=0;rep(0,len,i)rep(0,len,j)ans=(ans+dp[n%3][i][j])%Mod;printf(\"%d\",ans);\n\n}\n```\n\n\u5b8c\u7ed3\u6492\u82b1\u3002",
        "postTime": 1618291864,
        "uid": 191281,
        "name": "Jr_Zlw",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5005 \u4e2d\u56fd\u8c61\u68cb - \u6446\u4e0a\u9a6c"
    }
]
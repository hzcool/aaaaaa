[
    {
        "content": "apio\u4e5f\u6709\u4e00\u4e2a\u7528\u5e76\u67e5\u96c6\u7edf\u8ba1\u65b9\u6848\u6570\u7684\u9898\uff0c\u4f46\u8fd9\u4e2a\u9898\u662f\u5f31\u5316\u7248\u3002\u3002\u800c\u4e14\u7f51\u4e0a\u7adf\u7136\u4e00\u4efd\u9898\u89e3\u90fd\u6ca1\u6709\n\n\n\u9996\u5148\u4e24\u4e2a\u4e32\u80fd\u5b8c\u5168\u5339\u914d\uff0c\u53ca\u8bf4\u660e\u76f8\u5bf9\u5e94\u7684\u4e24\u4e2a\u4f4d\u7f6e\u6709\u76f8\u7b49\u5173\u7cfb\uff0c\u5728\u586b0\u8fd8\u662f1\u7684\u65f6\u5019\u5c31\u53ea\u80fd\u586b\u4e00\u6b21\uff0c\u6240\u4ee5\u5c31\u7528\u5e76\u67e5\u96c6\u628a\u76f8\u7b49\u7684\u8fde\u5230\u4e00\u8d77\uff0c\u7edf\u8ba1\u7b54\u6848\u65f6\u53ea\u7edf\u8ba1fu\u3010o\u3011==o\u7684\u90e8\u5206\uff0c\\*2\n\n\u4e32\u4e2d\u76840\u548c1\u5355\u72ec\u5904\u7406\uff0c\u7279\u5224\u5373\u53ef\n\n\n\u7801\uff1a\n`\n      \n\n\n```cpp\n#include<iostream>  \n#include<cstdio>  \n#include<cstring>  \nusing namespace std;  \n#define N 10007  \nint fu[N],qsum[200],lena,lenb,za,zb,i,j,n,l[N],f1,f2,wza[N],wzb[N],ans[999999];  \nchar cha[N],chb[N];  \nint find(int o)  \n{  \n    if(fu[o]!=o)fu[o]=find(fu[o]);  \n    return fu[o];  \n}  \nvoid c2()  \n{  \n    int i,jw=0;  \n    for(i=1;i<=ans[0];i++)  \n    {  \nint     o=ans[i]*2+jw;  \n    ans[i]=o%10;  \n    jw=o/10;  \n    }  \n    while(jw)ans[++ans[0]]=jw%10,jw/=10;  \n}  \nint main()  \n{  \n    scanf(\"%d\",&n);  \n    for(i=int('a');i<=int('a')+n-1;i++)  \n    scanf(\"%d\",&l[i]),qsum[i]+=l[i-1]+qsum[i-1];  \nscanf(\"%s\",cha);  \nscanf(\"%s\",chb);  \nlena=strlen(cha);  \nlenb=strlen(chb);  \nl[int('1')]=1;l[int('0')]=1;  \nfor(i=1;i<=10005;i++)fu[i]=i;  \nza=0;zb=0;  \nwhile(za<lena)  \n{  \n    wza[za]++;  \n    wzb[zb]++;  \n    if(cha[za]=='1')  \n    {  \n        f1=10001;  \n    }else if(cha[za]=='0')  \n    {  \n        f1=10002;  \n    }else f1=find(qsum[cha[za]]+wza[za]);  \n    if(chb[zb]=='1')  \n    {  \n        f2=10001;  \n    }else if(chb[zb]=='0')  \n    {  \n        f2=10002;  \n    }else f2=find(qsum[chb[zb]]+wzb[zb]);  \n    if(f1>10000&&f2>10000&&f1!=f2)  \n    {  \n        printf(\"0\");  \n        return 0;  \n    }  \n    if(f1!=f2)  \n    {  \n    if(f1>10000)fu[f2]=f1;  \n    else fu[f1]=f2;  \n    }  \n    if(wza[za]==l[cha[za]])za++;  \n    if(wzb[zb]==l[chb[zb]])zb++;      \n}  \n    ans[0]=1;  \n    ans[1]=1;  \n    for(i='a';i<='a'+n-1;i++)  \n    {  \n        for(j=1;j<=l[i];j++)  \n        {  \n            if(find(qsum[i]+j)==qsum[i]+j)c2();  \n        }  \n    }  \n    for(i=ans[0];i>=1;i--)  \n    printf(\"%d\",ans[i]);  \n}  \n`\n```",
        "postTime": 1514935129,
        "uid": 20220,
        "name": "_HLLY_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2456 \u3010[SDOI2006]\u4e8c\u8fdb\u5236\u65b9\u7a0b\u3011"
    },
    {
        "content": "## \u6b63\u89e3\u601d\u8def\n\u9996\u5148\u8003\u8651\u5c06 $X$ \u4e32\u548c $Y$ \u4e32\u62c6\u6210\u6bcf\u4e2a\u6570\u4f4d\uff1a\n\u5c06 $k$ \u4e2a\u5b57\u6bcd\u6309\u957f\u5ea6\u62c6\u6210\u6bcf\u4e2a\u6570\u4f4d\uff0c\u7136\u540e\u5bf9\u5e94\u4e8e $X$ \u548c $Y$ \u4e32\u6bcf\u4e2a\u6570\u4f4d\u7684\u4f4d\u7f6e\uff0c\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u5b58\u5728 $0$ \u548c $1$ \u8fd9 $2$ \u4e2a\u6570\u5b57\uff0c\u56e0\u6b64\u6bcf\u4e2a\u5b57\u6bcd\u5bf9\u5e94\u7684\u6570\u4f4d\u9700\u8981\u5411\u53f3\u79fb\u52a8 $2$ \u4f4d\u3002\uff08\u610f\u601d\u5c31\u662f\u8bf4\u6807\u53f7\u9700\u8981\u4ece2\u5f00\u59cb\u6807\u56e0\u4e3a\u5b58\u57280\u548c1\u8fd9\u4e24\u4e2a\u6570\u5b57\uff09\n\n### \u6309\u7167\u6211\u4eec\u4e0a\u9762\u7ed9\u51fa\u7684\u601d\u8def\uff1a\na,b \u957f\u5ea6\u5206\u522b\u4e3a $4,2$ \uff0c\u5219 $a$ \u7528  $c(2,3,4,5)$ \u8868\u793a\uff0c$b$ \u7528  $c(6,7)$ \u8868\u793a\u3002\u5219 \u4e32 \u201c $1b1$ \u201d \u5373\u62c6\u6210 $c(1, 6,7, 1)$; \u4e32 \u201d$a$\u201d \u62c6\u6210 $c(2,3,4,5)$\u3002\n\u8fd9\u6837 $X$ \u548c $Y$ \u4e32\u5bf9\u5e94\u7684\u4f4d\u7f6e\u5c31\u5e94\u8be5\u76f8\u540c\u3002\n\u5373 \n\n$1=c[2]$, $c[6]=c[3]$, $c[7]=c[4]$, $1=c[5]$\u3002\n\n\u8ba1\u7b97\u65b9\u6848\u6570\u6211\u4eec\u53ef\u4ee5\u7528\u5e76\u67e5\u96c6\u53bb\u5904\u7406\uff0c\u9996\u5148\u5047\u8bbe\u6240\u6709\u5b57\u6bcd\u7684\u957f\u5ea6\u548c\u4e3a $tot$\uff0c\u5219\u521d\u59cb\u6709 $tot$ \u4e2a\u6570\u4f4d\u53ef\u4ee5\u53d6\u503c\uff0c(\u5b9e\u9645\u4e0a\u662f $2^{tot}$\u79cd\u65b9\u6848\uff09\u3002\n\u7136\u540e\u6bcf\u6b21\u5904\u7406 $X$\u3001$Y$ \u4e32\u5bf9\u5e94\u6570\u4f4d\uff0c\u76f8\u5f53\u4e8e\u5e76\u67e5\u96c6\u5408\u5e76\u64cd\u4f5c\uff0c\u5982\u679c\u8fdb\u884c\u4e86\u5408\u5e76\u64cd\u4f5c\uff0c\u5219 $tot--$\u3002\n\u6700\u540e\u9700\u8981\u9ad8\u7cbe\u5ea6\u8ba1\u7b97 $2^{tot}$ \u5e76\u8f93\u51fa\u3002\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(k*n)$.\n\n\u5269\u4e0b\u7684\u4ee3\u7801\u91cc\u90fd\u8bf4\u4e86\n```cpp\n#include<cstdio>\n#include<iostream>\nusing namespace std;\nint a[28];\nint x[10010],y[10010];\nint b[10000];\nint p[28];\nint f[10010];\nint k,n=0,m=0,tot=0;\nstring s;\nint find(int x){//\u8def\u5f84\u538b\u7f29 \n\treturn f[x]==x?x:find(f[x]);\n} \nint calc(){\n\tfor(int i=0;i<=10000;i++)f[i]=i;\n\tfor(int i=1;i<=n;i++){\n\t\tint fx=find(x[i]);\n\t\tint fy=find(y[i]);\n\t\tif(fx+fy==1)return -1;//\u4e24\u4f4d\u4e0a\u4e00\u4e2a\u662f0\uff0c\u4e00\u4e2a\u662f1\u8bf4\u660e\u4e0d\u76f8\u7b49\uff0c\u76f4\u63a5\u8fd4\u56de-1 \n\t\tif(fx!=fy){\n\t\t\tif(fx<fy)f[fy]=fx;\n\t\t\telse f[fx]=fy;\n\t\t\ttot--;\n\t\t}\n\t}\n\treturn tot;\n}\nvoid Print(int k){//\u9ad8\u7cbe\u5ea6\u8f93\u51fa \n\tb[1]=1;\n\tint m=1;\n\tfor(int i=1;i<=k;i++){\n\t\tfor(int j=1;j<=m;j++)b[j]*=2;\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tb[j+1]+=b[j]/10;\n\t\t\tb[j]=b[j]%10;\n\t\t}\n\t\tif(b[m+1]>0)m++;\n\t}\n\tfor(int i=m;i>=1;i--)cout<<b[i];\n\tcout<<endl;\n}\nint main(){\n//\tfreopen(\"row.in\",\"r\",stdin);\n//\tfreopen(\"row.out\",\"w\",stdout);\n\tcin>>k;\n\tfor(int i=1;i<=k;i++){\n\t\tcin>>a[i];\n\t\ttot+=a[i];\n\t}\n\tp[1]=2;\n\tfor(int i=2;i<=k+1;i++)p[i]=p[i-1]+a[i-1];\n\tcin>>s;\n\tfor(int i=0;i<s.size();i++){\n\t\tif(s[i]>='a'&&s[i]<='z'){\n\t\t\tint c=s[i]-'a'+1;\n\t\t\tfor(int j=p[c];j<p[c+1];j++)x[++n]=j;\n\t\t}\n\t\telse x[++n]=s[i]-'0';\n\t}\n\tcin>>s;\n\tfor(int i=0;i<s.size();i++){\n\t\tif(s[i]>='a'&&s[i]<='z'){\n\t\t\tint c=s[i]-'a'+1;\n\t\t\tfor(int j=p[c];j<p[c+1];j++)y[++m]=j;\n\t\t}\n\t\telse y[++m]=s[i]-'0';\n\t}\n\tif(n!=m)cout<<0<<endl;\n\telse{\n\t\tint ans=calc();\n\t\tif(ans==-1)cout<<0<<endl;\n\t\telse Print(ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1636380856,
        "uid": 335615,
        "name": "0xFF",
        "ccfLevel": 0,
        "title": "0xFF \u7684\u4e8c\u8fdb\u5236\u65b9\u7a0b\u9898\u89e3"
    },
    {
        "content": "\u5b89\u5229~~\u849f\u84bb~~\u7684\u535a\u5ba2\u56ed\uff1a\uff08https://www.cnblogs.com/lbssxz/\uff09\n# \u6b63\u89e3\u5f00\u59cb\uff1a\n\n\n------------\n\n\u9996\u5148\u8bfb\u61c2\u9898\u610f\u6211\u4eec\u77e5\u9053\uff0c\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u90fd\u4ee3\u8868\u4e00\u4e2a\u5f0f\u5b50\uff0c\u4e14\u628a\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u66ff\u6362\u6210\u6570\u5b57\u540e\u53ef\u4ee5\u4f7f\u5f97\u5de6\u53f3\u4e24\u4e2a\u5f0f\u5b50\u76f8\u7b49\u3002\n\n**\u672c\u4eba\u601d\u8def\u6765\u6e90**\uff1a\u5148\u8fdb\u884c \u8fc7\u6837\u4f8b\u5f0f\u7684\u679a\u4e3e\uff1a\n\n\u8003\u8651\u8fd9\u79cd\u60c5\u51b5\uff1a\u5047\u5982\u5de6\u8fb9\u5f0f\u5b50\u7b2c1\u4f4d\u662fa\uff0c\u53f3\u8fb9\u5f0f\u5b50\u7b2c\u4e00\u4f4d\u662f1\uff0c\u4e00\u4e2a\u6570\u5b57\uff0c\u4e00\u4e2a\u5b57\u6bcd\uff0c\u56e0\u4e3a\u9898\u610f\u8981\u6ee1\u8db3\u5bf9\u5e94\u4f4d\u76f8\u7b49\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u5b57\u6bcda\u7684\u7b2c\u4e00\u4f4d\u4e3a1\u3002\u4f46\u662f\uff0c\u56e0\u4e3a\u6574\u4e2a\u5b57\u7b26\u4e32\u4e2d\u53ef\u80fd\u6709\u591a\u4e2aa\uff0c\u90a3\u4e48\u6211\u4eec\u627e\u5230\u5b57\u7b26\u4e32\u4e2d\u7684\u5176\u4ed6\u7684a\uff0c\u628a\u5b83\u4eec\u7b2c\u4e00\u4f4d\u5bf9\u5e94\u7684\u4f4d\u6570\u8d4b\u503c\u4e3a1.\n\n\u7136\u800ca\u7684\u7b2c\u4e00\u4f4d\u7684\u5bf9\u5e94\u4f4d\u786e\u5b9a\uff0c\u90a3\u4e48\u7b49\u53f7\u53e6\u4e00\u8fb9\u7684\u5bf9\u5e94\u4f4d\u4e5f\u80fd\u786e\u5b9a\u4e86\uff0c\u800c\u5b83\u53c8\u662f\u4e00\u4e2a\u5b57\u6bcd\uff0c\u4e8e\u662f\u6211\u4eec\u628a\u8fd9\u4e2a\u5b57\u6bcd\u7684\u5bf9\u5e94\u4f4d\u4e5f\u627e\u51fa\u6765\u8fdb\u884c\u8d4b\u503c\u3002\u3002\u3002\u3002\u3002\u3002\u8fd9\u4e48\u4e0b\u53bb\uff0c\u89e3\u6cd5\u9010\u6e10\u660e\u6717\uff1a**\u5e76\u67e5\u96c6**\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u8fd9\u79cd\u65b9\u6cd5\uff0c\u628a\u6240\u6709\u7684\u80fd\u904d\u5386\u5230\u7684\u4f4d\u7f6e\u6309\u7167\u5e76\u67e5\u96c6\u5904\u7406\uff0c\u5e76\u770b\u505a\u4e00\u79cd\u60c5\u51b5\u3002\u6700\u540e\uff0c\u770b\u8fd8\u5269\u51e0\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u628a\u7b54\u6848\u9ad8\u7cbe\u5ea6\u4e58\u4e3a2\u7684\u51e0\u6b21\u65b9\u5c31OK\u4e86\uff08\u56e0\u4e3a\u6bcf\u4e00\u4f4d\u67090\uff0c1\u4e24\u79cd\u65b9\u6cd5\uff09\n\nqwq\u3002\n\ncode:\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nconst int maxn=10003;\n\nint n,m,k,sum;\nint num[maxn],fa[maxn],x[maxn],y[maxn];\n\ninline int find(int x)\n{\n\tif(x==fa[x])return x;\n\tfa[x]=find(fa[x]);\n\treturn fa[x];\n}\n\nint main() {\n    num[1]=2; \n    scanf(\"%d\",&k);\n    for(int i=2,x;i<=k+1;++i)\n\t{\n        scanf(\"%d\",&x);\n        num[i]=num[i-1]+x;\n        sum+=x;//\u8bb0\u5f55\u603b\u4e0d\u540c\u7684\u4e2a\u6570 \n    }\n    char zfc[maxn];\n    scanf(\"%s\",zfc);\n    for(int i=0;zfc[i];++i)\n\t{\n        if(zfc[i]>='a'&&zfc[i]<='z')\n\t\t{\n            int c=zfc[i]-'a'+1;//\u83b7\u53d6\u4ed6\u662fnum\u6570\u7ec4\u7b2c\u51e0\u4e2a \n            for(int j=num[c];j<num[c+1];++j)x[++n]=j;//\u6309\u4f4d\u7f6e\u8d4b\u503c \n        }\n\t\telse x[++n]=zfc[i]-'0';//\u6570\u5b57\u7684\u8bdd \n    }\n    scanf(\"%s\",zfc);\n    for(int i=0;zfc[i];++i)\n\t{\n        if(zfc[i]>='a'&&zfc[i]<='z')\n\t\t{\n            int c=zfc[i]-'a'+1;\n            for(int j=num[c];j<num[c+1];++j)y[++m]=j;//\u5b57\u6bcd \n        } else y[++m]=zfc[i]-'0';//\u6570\u5b57 \n    }\n    if(n!=m)//\u8fde\u5de6\u53f3\u957f\u5ea6\u90fd\u4e0d\u76f8\u7b49 \n\t{\n        printf(\"0\");return 0;//\u76f4\u63a5\u8f93\u51fa\u96f6 \n    }\n    for(int i=1;i<maxn;++i)fa[i]=i;//\u521d\u59cb\u5316\u5e76\u67e5\u96c6\u627e\u7236\u4eb2 \n    for(int i=1;i<=n;++i)\n\t{\n        int dx=find(x[i]),dy=find(y[i]);\n        if(dx+dy==1)\n\t\t{\n            printf(\"0\");\n            return 0;\n        }\n        if(dx!=dy)\n\t\t{\n            fa[max(dx,dy)]=min(dx,dy);\n            sum--;\n        }\n    }\n    int big[maxn]={1},top=1;\n    for(int i=sum;i>=1;i--)\n\t{\n        for(int i=0;i<top;++i)big[i]<<=1;\n        for(int i=0;i<top;++i)if(big[i]>=10) {\n            big[i+1]+=big[i]/10,big[i]%=10;\n        }\n        for(;big[top];++top) {\n            big[top+1]+=big[top]/10,big[top]%=10;\n        }\n    }\n    for(int i=top-1;i>=0;--i) printf(\"%d\",big[i]);\n    return 0;\n}\n```\n\u5b8c\u7ed3\u3002",
        "postTime": 1565832228,
        "uid": 177069,
        "name": "\u674e\u767d\u8398\u8398\u5b66\u5b50",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2456 \u3010[SDOI2006]\u4e8c\u8fdb\u5236\u65b9\u7a0b\u3011"
    },
    {
        "content": "[P2456](https://www.luogu.com.cn/problem/P2456)\n\n\u611f\u89c9\u505a\u51fa\u8fd9\u9898\u633a\u6709\u6210\u5c31\u611f\u7684\uff0c\u6240\u4ee5\u5199\u4e00\u7bc7\u9898\u89e3\u6bd4\u8f83\u8be6\u7ec6\u8bb0\u5f55\u4e00\u4e0b\u3002\n\n------------\n\n\u9996\u5148\u53ef\u4ee5\u8003\u8651\u5230\u7684\u5c31\u662f\u628a\u4e24\u4e2a\u65b9\u7a0b\u62bb\u6210**\u4e00\u6837\u957f**\u7684\uff0c\u8fd9\u6837\u5c31\u597d\u505a\u8bb8\u591a\u4e86\u3002\n\n\u65b9\u6cd5\u5f88\u7b80\u5355\u3002\u5047\u5982\u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6\u4e3a $len_a$ \u7684\u672a\u77e5\u6570 $a$\uff0c\u6211\u4eec\u628a\u5b83\u5206\u89e3\u6210 $a_1,a_2,a_3,... ,a_{len_a}$\u3002\u5982\u6b64\uff0c\u6211\u4eec\u5c31\u628a\u591a\u4e2a\u957f\u5ea6\u4e0d\u540c\u7684\u53d8\u91cf\u53d8\u6210\u4e86\u957f\u5ea6\u4e3a\u4e00\u7684\u5143\u7d20\u3002\n\n\u7136\u540e\u4f60\u53d1\u73b0\u5982\u679c\u62bb\u957f\u540e\u4e24\u4e2a\u65b9\u7a0b\u957f\u5ea6\u4e0d\u4e00\u6837\uff0c\u90a3\u4f60\u5c31\u53ef\u4ee5\u76f4\u63a5\u8f93\u51fa\u65e0\u89e3\u4e86\u3002\n\n\u5982\u679c\u957f\u5ea6\u4e00\u6837\uff0c\u90a3\u4e48\u5bf9\u4e8e\u957f\u5ea6\u4e3a $m$ \u7684\u4e24\u4e2a\u65b9\u7a0b $A,B$\uff0c\u6709 $m$ \u4e2a\u7b49\u5f0f\uff1a$A_i=B_i,1 \\le i \\le m$\u3002\u8fd9\u6697\u793a\u6211\u4eec\u53ef\u4ee5\u7528**\u5e76\u67e5\u96c6**\u505a\u3002\n\n\u6211\u4eec\u628a\u76f8\u540c\u7684\u4e24\u4e2a\u672a\u77e5\u91cf\u5408\u5e76\u5230\u540c\u4e00\u4e2a\u5e76\u67e5\u96c6\u91cc\u3002\u540c\u65f6\uff0c\u5982\u679c\u67d0\u4e2a\u672a\u77e5\u91cf\u5bf9\u5e94\u7684\u662f $0$ \u6216 $1$\uff0c\u6211\u4eec\u628a\u5b83\u7684\u503c\u5b58\u5230\u4e00\u4e2a $w$ \u6570\u7ec4\u4e2d\u3002\u6240\u6709\u672a\u77e5\u91cf\u5408\u5e76\u5b8c\u4e4b\u540e\u7edf\u8ba1\u6bcf\u4e2a\u5143\u7d20\u6240\u5728\u5e76\u67e5\u96c6\u7684\u503c\u5373\u53ef\u786e\u5b9a\u8be5\u5143\u7d20\u7684\u503c\u3002\n\n\u6ce8\u610f\u5728\u5e76\u67e5\u96c6\u7684\u65f6\u5019\u5982\u679c\u67d0\u4e2a\u5143\u7d20\u6216\u5e76\u67e5\u96c6\u7684\u503c\u65e2\u662f $0$ \u53c8\u662f $1$\uff0c\u90a3\u76f4\u63a5\u65e0\u89e3\u3002\n\n\u6700\u540e\u6211\u4eec\u5224\u65ad\u6709\u591a\u5c11\u4e2a\u5143\u7d20\u65e0\u6cd5\u786e\u5b9a\u503c\uff0c\u8bb0\u6709 $cnt$ \u4e2a\uff0c\u5219\u7b54\u6848\u5c31\u662f $2^{cnt}$\u3002\n\n------------\n\n\u6700\u540e\u8bf4\u51e0\u4e2a\u5b9e\u73b0\u7684\u7ec6\u8282\uff1a\n\n\u62bb\u957f\u5143\u7d20\u7684\u65f6\u5019\u53ef\u4ee5\u7528\u6807\u53f7\u6cd5\u907f\u514d\u4e8c\u7ef4\u5e76\u67e5\u96c6\u3002\u7531\u4e8e\u6bcf\u4e2a\u5b57\u6bcd\u6700\u591a\u88ab\u62bb\u957f\u6210 $10000$ \u4f4d\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5bf9\u4e8e $R_i$\uff08$R$ \u4e3a\u4efb\u610f\u5b57\u6bcd\uff09\u6807\u53f7\u4e3a $(R-a) \\times 10000+i$\u3002\u8fd9\u6837\u6bcf\u4e00\u4e2a\u5143\u7d20\u90fd\u6709\u4e00\u7ef4\u7684\u5bf9\u5e94\u6807\u53f7\u3002\n\n\u4f46\u4e0e\u6b64\u540c\u65f6\u6211\u4eec\u6700\u540e\u5224\u65ad\u54ea\u4e9b\u5143\u7d20\u7684\u503c\u65e0\u6cd5\u786e\u5b9a\u65f6\u8981\u5f53\u5fc3\u67d0\u4e2a\u6807\u53f7\u662f\u5426\u6839\u672c\u5c31\u4e0d\u5728\u65b9\u7a0b\u4e2d\u3002\uff08\u6bd4\u5982\u8bf4 $a$ \u7684\u957f\u5ea6\u662f $5$\uff0c\u5219\u6807\u53f7 $6$ \u5c31\u662f\u4e0d\u5b58\u5728\u539f\u65b9\u7a0b\u4e2d\u7684\uff0c\u8fd9\u65f6\u5019\u5c31\u4e0d\u80fd\u7edf\u8ba1\u4e0a $6$\uff09\n\n\u7b54\u6848\u8f93\u51fa\u7684\u65f6\u5019\u9700\u8981\u9ad8\u7cbe\uff0c\u6700\u5927\u662f $2^{10000}$\uff0c\u6709 $3100$ **\u591a**\u4f4d\u3002\n\n------------\n\nCODE\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\nusing namespace std;\n\nlong long n,m,len[30],a[300010],ha,b[300010],hb,f[300010],w[300010],vis[30][10010],cnt;\nconst long long maxl=10000;\nstring s,t;\n\nstruct BIG{\n\tlong long d[5000]; \n}ans;\nBIG operator *(BIG A,long long B){\n\tlong long i,j=0;\n\tBIG C;\n\tC.d[0]=A.d[0]+1;\n\tfor(i=1;i<=C.d[0];i++){\n\t\tC.d[i]=A.d[i]*B+j;\n\t\tif(C.d[i]>=10){\n\t\t\tj=C.d[i]/10;\n\t\t\tC.d[i]%=10;\n\t\t}\n\t\telse{\n\t\t\tj=0;\n\t\t}\n\t}\n\twhile(C.d[C.d[0]]==0) C.d[0]--;\n\treturn C;\n}\nvoid printBIG(BIG A){\n\tlong long i;\n\tfor(i=A.d[0];i>=1;i--){\n\t\tcout<<A.d[i];\n\t}\n\tcout<<endl;\n}\n\nlong long ed(long long u,long long v){\n\tif(u%v==0) return u/v-1;\n\treturn u/v;\n}\nlong long em(long long u,long long v){\n\tif(u%v==0) return v;\n\treturn u%v;\n}\n\nlong long find(long long u){\n\tif(u==f[u]) return u;\n\treturn f[u]=find(f[u]);\n}\nvoid merge(long long u,long long v){\n\tlong long uu=find(u),vv=find(v);\n\tif(uu!=vv) f[uu]=vv;\n}\n\nint main(){\n\tmemset(w,-1,sizeof(w));\n\tlong long i,j,u,v,lens,lent,k;\n\tcin>>n;m=n*maxl;\n\tfor(i=1;i<=m;i++) f[i]=i;\n\tfor(i=1;i<=n;i++){\n\t\tcin>>len[i];\n\t}\n\tcin>>s>>t;\n\tlens=s.size(); lent=t.size();\n\tfor(i=0;i<lens;i++){//\u62bb\u957f\u65b9\u7a0b1\n\t\tif('a'<=s[i] && s[i]<='z'){\n\t\t\tfor(j=1;j<=len[s[i]-'a'+1];j++){\n\t\t\t\ta[++ha]=(s[i]-'a')*maxl+j;//\u6807\u53f7\u8f6c\u5316\n\t\t\t}\n\t\t}\n\t\telse if(s[i]=='1'){\n\t\t\ta[++ha]=-1;\n\t\t}\n\t\telse{\n\t\t\ta[++ha]=0;\n\t\t}\n\t}\n\tfor(i=0;i<lent;i++){//\u62bb\u957f\u65b9\u7a0b2\n\t\tif('a'<=t[i] && t[i]<='z'){\n\t\t\tfor(j=1;j<=len[t[i]-'a'+1];j++){\n\t\t\t\tb[++hb]=(t[i]-'a')*maxl+j;//\u6807\u53f7\u8f6c\u5316\n\t\t\t}\n\t\t}\n\t\telse if(t[i]=='1'){\n\t\t\tb[++hb]=-1;\n\t\t}\n\t\telse{\n\t\t\tb[++hb]=0;\n\t\t}\n\t}\n\tif(ha!=hb){//\u65b9\u7a0b\u957f\u5ea6\u4e0d\u540c\uff0c\u65e0\u89e3\n\t\tcout<<0<<endl;\n\t\treturn 0;\n\t}\n\tfor(i=1;i<=ha;i++){\n\t\tif(a[i]<=0){\n\t\t\tif(b[i]<=0){\n\t\t\t\tif(a[i]!=b[i]){\n\t\t\t\t\tcout<<0<<endl;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tk=-a[i];\n\t\t\t\tif(w[b[i]]>-1 && w[b[i]]!=k){//\u5143\u7d20\u503c\u51b2\u7a81\uff0c\u65e0\u89e3\n\t\t\t\t\tcout<<0<<endl;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tw[b[i]]=k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if(b[i]<=0){\n\t\t\tif(a[i]<=0){\n\t\t\t\tif(a[i]!=b[i]){\n\t\t\t\t\tcout<<0<<endl;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tk=-b[i];\n\t\t\t\tif(w[a[i]]>-1 && w[a[i]]!=k){//\u540c\u4e0a\u65e0\u89e3\n\t\t\t\t\tcout<<0<<endl;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tw[a[i]]=k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tmerge(a[i],b[i]);//\u5408\u5e76\u5143\u7d20\n\t\t}\n\t}\n\tfor(i=1;i<=m;i++){\n\t\tif(w[i]>-1){\n\t\t\tu=find(i);\n\t\t\tif(w[u]>-1){\n\t\t\t\tif(w[u]!=w[i]){\n\t\t\t\t\tcout<<0<<endl;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tw[u]=w[i];\n\t\t\t}\n\t\t}\n\t}\n\tfor(i=1;i<=m;i++){//\u67e5\u8be2\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\n\t\tif(w[i]==-1){\n\t\t\tw[i]=w[find(i)];\n\t\t}\n\t}\n\tfor(i=1;i<=m;i++){//\u7edf\u8ba1\u8fd8\u6709\u591a\u5c11\u4e2a\u5143\u7d20\u7684\u503c\u65e0\u6cd5\u786e\u5b9a\n\t\tif(f[i]==i && w[i]==-1){\n\t\t\tu=ed(i,maxl)+1;//\u6ce8\u610f\u8fd9\u91cc\u6807\u53f7\u7684\u8f6c\u5316\uff0c\u5e76\u4e0d\u662f\u76f4\u63a5\u9664\u548c\u76f4\u63a5\u6a21\n\t\t\tv=em(i,maxl);//\u6bd4\u5982\u8bf410000\u662fa10000\uff0c\u800c\u975eb0\n\t\t\tif(len[u]>=v){\n\t\t\t\tvis[u][v]=1;\n\t\t\t}\n\t\t}\n\t}\n\tfor(i=1;i<=n;i++){//\u7edf\u8ba1\u8fd8\u6709\u591a\u5c11\u4e2a\u5143\u7d20\u7684\u503c\u65e0\u6cd5\u786e\u5b9a\n\t\tfor(j=1;j<=len[i];j++){\n\t\t\tif(vis[i][j]) cnt++;\n\t\t}\n\t}\n\tans.d[0]=1;//\u9ad8\u7cbe\u5ea6\n\tans.d[1]=1;\n\twhile(cnt--){\n\t\tans=ans*2;\n\t}\n\tprintBIG(ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1623837463,
        "uid": 150064,
        "name": "Gokix",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2456 \u3010[SDOI2006]\u4e8c\u8fdb\u5236\u65b9\u7a0b\u3011"
    },
    {
        "content": "## \u9898\u610f\n\u7ed9\u51fa\u4e24\u4e2a\u7b49\u5f0f\uff0c\u7531 $1,0$ \u548c\u5c0f\u5199\u5b57\u6bcd\u7ec4\u6210\uff0c\u7136\u540e\u7ed9\u51fa $k$ \u4e2a\u672a\u77e5\u7684\u4e8c\u8fdb\u5236\u6570\u3002\n\n\u7136\u540e $k$ \u4e2a\u6574\u6570\uff0c\u7136\u540e\u7ed9\u51fa\u6bcf\u4e2a\u672a\u77e5\u4e8c\u8fdb\u5236\u6570\u7684\u4f4d\u6570\u3002\n\n\u6700\u540e\u5224\u65ad\u4e8c\u8fdb\u5236\u6570\u6709\u51e0\u7ec4\u89e3\u3002\n\n## \u601d\u8def\n\n\u662f\u4e00\u9053\u6bd4\u8f83\u4e0d\u9519\u7684\u5e76\u67e5\u96c6\u9898\u76ee\u3002\n\n\u53ef\u4ee5\u5148\u628a\u6bcf\u4e00\u4e2a\u672a\u77e5\u6570\u5177\u4f53\u5230\u6bcf\u4e00\u4f4d\uff0c\u6211\u4eec\u518d\u628a\u7684\u957f\u5ea6\u4e3a $x$ \u4e8c\u8fdb\u5236\u6570 $a$ \u62c6\u5206\u6210 $a_1,a_2,a_3\\dots a_{x-1},a_{x}$ \u7684\u6837\u5b50\u3002\n\n\u7136\u540e\u6211\u4eec\u628a\u4e24\u4e2a\u7b49\u5f0f\u90fd\u62c6\u5206\u597d\u540e\u5982\u679c\u957f\u5ea6\u4e0d\u4e00\u6837\uff0c\u5c31\u76f4\u63a5\u8f93\u51fa $0$\uff0c\u5982\u679c\u4e24\u4e2a\u7b49\u5f0f\u6709 $0$ \u548c $1$ \u5728\u540c\u4e00\u4f4d\u4e0a\uff0c\u90a3\u4e48\u4e5f\u8f93\u51fa $0$\u3002\n\n\u63a5\u4e0b\u6765\u628a\u7b49\u5f0f\u76f8\u540c\u4f4d\u7684\u672a\u77e5\u4f4d\u5408\u5e76\u8d77\u6765\uff0c\u5982\u679c\u662f\u6570\u5b57\u548c\u672a\u77e5\u4f4d\u5728\u4e00\u8d77\u4e00\u5b9a\u8981\u628a\u672a\u77e5\u4f4d\u5408\u5e76\u5230\u6570\u5b57\u4e0a\uff0c\u56e0\u4e3a\u90a3\u4e2a\u672a\u77e5\u4f4d\u662f\u5df2\u7ecf\u786e\u5b9a\u4e86\u7684\u3002\n\n\u7136\u540e\u627e\u8fd8\u53ef\u4ee5\u9009\u62e9\u7684\u4e8c\u8fdb\u5236\u4f4d\uff0c\u8bbe\u4e3a $tot$\u3002\n\n\u6700\u540e\u7b54\u6848\u5c31\u662f $2^{tot}$\uff0c\u8fd9\u4e2a $tot$ \u6700\u5927\u6709 $10000$ \u6240\u4ee5\u8981\u7528\u9ad8\u7cbe\u5ea6\uff0c[\u8fd9\u662f](https://www.luogu.com.cn/paste/fr1c34j5)\u6211\u7684\u9ad8\u7cbe\u5ea6\u677f\u5b50\uff0c\u4ee3\u7801\u4e2d\u53ea\u663e\u793a\u4e3b\u51fd\u6570\u90e8\u5206\u3002\n\n## \u4ee3\u7801\n\n```cpp\nint n,m,k,sum,f[maxn],fa[maxn],x[maxn],y[maxn];\nchar s1[maxn],s2[maxn];\ninline int F(int x) {return x==fa[x]?x:fa[x]=F(fa[x]);}\nsigned main() {\n\tcin>>k;\n\tf[1]=2;\n\tfor(int i=1,x; i<=k; i++) {\n\t\tcin>>x;\n\t\tf[i+1]=f[i]+x,sum+=x;\n\t}\n\tcin>>(s1+1);\n\tfor(int i=1; i<=(int)strlen(s1+1); i++) {\n\t\tif(s1[i]=='1'||s1[i]=='0')\n\t\t\tx[++n]=s1[i]-'0';\n\t\telse\n\t\t\tfor(int j=f[s1[i]-'a'+1]; j<f[s1[i]-'a'+2]; ++j)\n\t\t\t\tx[++n]=j;\n\t}\n\tcin>>(s2+1);\n\tfor(int i=1; i<=(int)strlen(s2+1); i++) {\n\t\tif(s2[i]=='1'||s2[i]=='0')\n\t\t\ty[++m]=s2[i]-'0';\n\t\telse\n\t\t\tfor(int j=f[s2[i]-'a'+1]; j<f[s2[i]-'a'+2]; j++)\n\t\t\t\ty[++m]=j;\n\t}\n\tif(n!=m)return cout<<0,0;\n\tfor(int i=0;i<=maxn-5;i++)fa[i]=i;\n\tfor(int i=1;i<=n;i++){\n\t\tint fx=F(x[i]);\n\t\tint fy=F(y[i]);\n\t\tif(fx+fy==1)return cout<<0,0;//\u4e000\u4e001\u7684\u60c5\u51b5\n\t\tif(fx!=fy){//\u5408\u5e76\u540c\u4f4d\u7684\u672a\u77e5\u4f4d\n\t\t\tif(fx<fy)fa[fy]=fx;//\u4fdd\u8bc1\u672a\u77e5\u6570\u548c\u6570\u5b57\u5408\u5e76\u65f6\u8ba9\u6570\u5b57\u5728\u9876\n\t\t\telse fa[fx]=fy;\n\t\t\tsum--;\n\t\t}\n\t}\n\tcout<<lll(2).pow(sum);\n\treturn 0;\n}\n```",
        "postTime": 1675822060,
        "uid": 715244,
        "name": "zhangzhengyan0831",
        "ccfLevel": 0,
        "title": "P2456 [SDOI2006]\u4e8c\u8fdb\u5236\u65b9\u7a0b \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u94fe\u63a5\uff1a[P2456 [SDOI2006]\u4e8c\u8fdb\u5236\u65b9\u7a0b](https://www.luogu.com.cn/problem/P2456)   \n\n\u4e00\u9053\u4e0d\u9519\u7684\u5e76\u67e5\u96c6\u9898\u76ee\u3002   \n\n\u5f00\u59cb\u770b\u4e00\u5934\u96fe\u6c34\uff0c\u4e0d\u8fc7\u5f53\u4f60\u5bf9\u6574\u4e2a\u5f0f\u5b50\u5c55\u5f00\u65f6\uff0c\u5c31\u8c41\u7136\u5f00\u6717\u4e86\u3002  \n\n\u6bd4\u5982\u8bf4\u6837\u4f8b $2$\uff1a  \n\n\u5c55\u5f00\u540e\u7b49\u5f0f\u4e24\u8fb9\u5c31\u6210\u4e86\u8fd9\u4e2a\uff1a  \n\n$1,b_1,b_2,a_1,a_2,a_3,a_4,d_1,d_2,d_3,d_4,1$  \n\n\u548c\uff1a  \n\n$a_1,a_2,a_3,a_4,c_1,c_2,c_3,c_4,b_1.b_2,e_1,e_1$   \n\n\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u8f7b\u677e\u7684\u627e\u5230\u6bcf\u4e00\u4f4d\u4e0a\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u6bd4\u5982\uff1a  \n\n$$a_2=b_1=c_1=d_2$$    \n\n\u7136\u540e\u4f60\u7ed9\u6bcf\u4e2a\u5b57\u6bcd\u7684\u7b2c $i$ \u4f4d\u7f16\u4e2a\u53f7\uff0c\u7136\u540e\u7528\u5e76\u67e5\u96c6\u6765\u7ef4\u62a4\u5373\u53ef\u3002  \n\n\u8fd9\u91cc\u8981\u6ce8\u610f\u662f\u5426\u6709\u540c\u4e00\u7ec4\u5b57\u6bcd\u540c\u65f6\u5bf9\u5e94\u7740 $0$ \u548c $1$ \u3002  \n\n\u6700\u540e\u8865\u4e0a\u9ad8\u7cbe\u5373\u53ef\u3002  \n\n```\n#include\"iostream\"\n#include\"cstdio\"\n#include\"cmath\"\n#include\"algorithm\"\n#include\"cstring\"\nusing namespace std;\n\n#define read(x) scanf(\"%d\",&x)\n#define MAXN 10005\n#define ll unsigned long long\n\nint k;\nint f[MAXN],vis[MAXN],l[30],be[30];\nint a[MAXN],b[MAXN];\nchar s[MAXN];\nint cnt=0,sum=0;\nint v[30],c=0;\nint ans[100005],li=1;\n\nvoid init(int n){for(int i=1;i<=n;i++) vis[i]=0,f[i]=i;}\n\nint getf(int u){return f[u]=(f[u]==u)?u:getf(f[u]);}\n\nvoid merge(int u,int v){int t1=getf(u),t2=getf(v);if(t1!=t2) f[t2]=t1;}\n\nint tran(char c){return c-'a'+1;}\n\nint main()\n{\n    read(k),be[1]=0;\n    for(int i=1;i<=k;i++) read(l[i]),be[i+1]+=be[i]+l[i];\n    scanf(\"%s\",s);\n    int lens=strlen(s);\n    for(int i=0;i<lens;i++)\n    {\n        if(s[i]=='0') a[++cnt]=-1;\n        else if(s[i]=='1') a[++cnt]=0;\n        else\n        {\n            int op=tran(s[i]);\n            for(int j=1;j<=l[op];j++) a[++cnt]=be[op]+j;\n        }\n    }\n    int to=cnt;\n    cnt=0;\n    scanf(\"%s\",s);\n    lens=strlen(s);\n    for(int i=0;i<lens;i++)\n    {\n        if(s[i]=='0') b[++cnt]=-1;\n        else if(s[i]=='1') b[++cnt]=0;\n        else\n        {\n            int op=tran(s[i]);\n            for(int j=1;j<=l[op];j++) b[++cnt]=be[op]+j;\n        }\n    }\n    if(cnt!=to) return puts(\"0\"),0;\n    init(be[k]+l[k]);\n    for(int i=1;i<=cnt;i++)\n    {\n        if((a[i]==0&&b[i]==-1)||(a[i]==-1&&b[i]==0)) return puts(\"0\"),0;\n        else if((a[i]>=-1&&a[i]<=0)||(b[i]>=-1&&b[i]<=0)) continue;\n        merge(a[i],b[i]);\n    }\n    for(int i=1;i<=cnt;i++)\n    {\n    \tif(a[i]>=-1&&a[i]<=0&&b[i]>=-1&&b[i]<=0) continue;\n        if(a[i]==0)\n        {\n            int now=getf(b[i]);\n            if(vis[now]==1) return puts(\"0\"),0;\n            vis[now]=2;\n        }\n        else if(a[i]==-1)\n        {\n        \tint now=getf(b[i]);\n            if(vis[now]==2) return puts(\"0\"),0;\n            vis[now]=1;\n         }\n        else if(b[i]==-1)\n        {\n            int now=getf(a[i]);\n            if(vis[now]==2) return puts(\"0\"),0;\n            vis[now]=1;\n        }\n        else if(b[i]==0)\n        {\n            int now=getf(a[i]);\n            if(vis[now]==1) return puts(\"0\"),0;\n            vis[now]=2;\n        }\n    }\n    for(int i=1;i<=be[k]+l[k];i++) if(f[i]==i&&!vis[i]) sum++;\n\tans[1]=1;\n\tfor(int i=1;i<=sum;i++)\n    {\n    \tfor(int j=1;j<=li;j++)\n    \t{\n    \t\tans[j]*=2;\n\t\t}\n\t\tfor(int j=1;j<=li;j++)\n\t\t{\n\t\t\tif(ans[j]>=10) ans[j+1]+=ans[j]/10,ans[j]%=10;\n\t\t}\n\t\tif(ans[li+1]>0) li++;\n\t\twhile(ans[li]>=10) ans[li+1]+=ans[li]/10,ans[li]%=10,li++;\n\t}\n\tfor(int i=li;i>=1;i--) printf(\"%d\",ans[i]);\n    cout<<endl;\n    return 0;\n}\n/*\n4\n5 4 4 1\n1adb0\n11bdc0\n32\n*/\n```",
        "postTime": 1597151969,
        "uid": 184500,
        "name": "hanzhongtlx",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2456"
    },
    {
        "content": "\u65b0\u4eba\u53d1\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\uff0c\u8bf7\u5173\u7167\u3002\u3002\u3002\n\n\u663e\u7136\u8fd8\u662f\u5148\u5c06\u957f\u77ed\u4e0d\u4e00\u7684\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u957f\u5ea6\u4e00\u6837\u7684\u8868\u8fbe\u5f0f\u540e\u5904\u7406\u624d\u65b9\u4fbf\u3002\n\n\u5904\u7406\u5b8c\u6210\u540e\uff0c\u53d1\u73b0\u4f1a\u6709\u5f88\u591a\u76f8\u7b49\u7684\u5173\u7cfb\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u76f8\u7b49\u7684\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u6761\u8fb9\u8868\u793a\u3002\u5c06\u8868\u8fbe\u5f0f\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u770b\u505a\u4e00\u4e2a\u70b9\u3002\u5bf9\u4e8e\u4e24\u4e2a\u76f8\u7b49\u7684\u4f4d\u7f6e\uff0c\u5c06\u4e24\u4e2a\u4f4d\u7f6e\u5bf9\u5e94\u7684\u4e24\u4e2a\u70b9\u8fde\u53cc\u5411\u8fb9\u5c31\u597d\u3002\n\n\u5728\u8003\u8651\u4e00\u4e0b\u76f8\u7b49\u7684\u5173\u7cfb\u90fd\u6709\u54ea\u4e9b\uff1a\n\n      \u9996\u5148\u5728\u4e24\u4e2a\u8868\u8fbe\u5f0f\u4e2d\u4f4d\u7f6e\u76f8\u7b49\u7684\u5143\u7d20\u5fc5\u7136\u76f8\u540c\uff0c\u8fde\u4e00\u8fde\u3002\n      \u7136\u540e\u5728\u540c\u4e00\u4e2a\u5b57\u6bcd\u53d8\u91cf\u4e2d\u4f4d\u7f6e\u76f8\u7b49\u7684\u5143\u7d20\u5fc5\u7136\u76f8\u540c\uff0c\u8fde\u4e00\u8fde\u3002\n\n\u8fd9\u6837\uff0c\u6574\u4f53\u7684\u590d\u6742\u7684\u76f8\u7b49\u5173\u7cfb\u5c31\u88ab\u5206\u6210\u4e0d\u91cd\u4e0d\u6f0f\u7684\u4e24\u79cd\u4e86\u3002\u7b2c\u4e00\u79cd\u5f88\u5bb9\u6613\u8fde\u8fb9\uff0c\u8bf4\u4e00\u4e0b\u7b2c\u4e8c\u79cd\u8fde\u8fb9\u600e\u4e48\u5b9e\u73b0\u3002\n\n\u53ea\u8981\u4e24\u4e2a\u5143\u7d20\u5728\u540c\u4e00\u8fde\u901a\u5757\u4e2d\uff0c\u4ed6\u4eec\u5c31\u662f\u76f8\u7b49\u7684\u3002\u56e0\u6b64\u53ef\u4ee5\u8bb0\u5f55\u6bcf\u4e2a\u5b57\u6bcd\u53d8\u91cf\u6bcf\u4e2a\u4f4d\u7f6e\u4e0a\u6700\u540e\u51fa\u73b0\u7684\u5143\u7d20x\uff0c\u7528\u7c7b\u4f3c\u94fe\u8868\u8fde\u63a5\u7684\u65b9\u5f0f\u8fde\u8fb9\u5c31OK\u5566\u3002\n\n\u8fde\u5b8c\u8fb9\u540e\uff0c\u6240\u6709\u76f8\u7b49\u5173\u7cfb\u5c31\u5168\u90e8\u88ab\u8868\u793a\u51fa\u6765\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u6240\u6709\u5df2\u77e5\u70b9\u6743\u7684\u70b9\uff08\u5373\u4e00\u5f00\u59cb\u5c31\u77e5\u9053\u662f0\u8fd8\u662f1\u7684\u5143\u7d20\uff09\u51fa\u53d1\u8dd1BFS\uff0c\u5c06\u80fd\u5230\u8fbe\u7684\u70b9\uff08\u5305\u62ec\u81ea\u8eab\uff09\u5168\u90e8\u6807\u8bb0\u4e3a\u5df2\u5230\u8fbe\u3002\u82e5\u5230\u8fbe\u4e86\u4e00\u4e2a\u70b9\uff0c\u8fd9\u4e2a\u70b9\u7684\u70b9\u6743\u5df2\u77e5\uff0c\u4f46\u662f\u4e0d\u7b49\u4e8e\u6b64\u6b21BFS\u8d77\u70b9\u7684\u70b9\u6743\uff0c\u8bf4\u660e\u6709\u77db\u76fe\uff0c\u8f93\u51fa0\u540e\u7ed3\u675f\u7a0b\u5e8f\u5c31\u5b8c\u4e8b\u513f\u4e86\u3002\n\n\u82e5\u5728\u4e0a\u6587\u7684BFS\u90fd\u7ed3\u675f\u540e\u8fd8\u6709\u70b9\u6ca1\u88ab\u904d\u5386\u5230\uff0c\u4e14\u7a0b\u5e8f\u672a\u7ed3\u675f\uff0c\u8bf4\u660e\u8fd9\u4e9b\u70b9\u90fd\u662f\u9760\u4e00\u5f00\u59cb\u76840\u548c1\u65e0\u6cd5\u786e\u5b9a\u7684\u70b9\u3002\u8fd9\u4e9b\u70b9\u7684\u5f62\u5f0f\u5e94\u8be5\u4e3a\u8fde\u901a\u5757\u4eec\uff0c\u4e14\u4e0d\u540c\u8fde\u901a\u5757\u76f8\u4e92\u4e0d\u5f71\u54cd\u3002\u6bcf\u4e2a\u8fde\u901a\u5757\u90fd\u4f1a\u8d21\u732e\u4e00\u4e2a\u201c\u65b9\u6848\u6570\u4e582\u201d\uff0c\u4e8e\u662f\u6211\u4eec\u518d\u505aBFS\u6c42\u51fa\u6240\u6709\u8fde\u901a\u5757\u7684\u4e2a\u6570\uff0c\u6700\u540e\u505a\u4e00\u904d\u9ad8\u7cbe\u5feb\u901f\u5e42\u5c31AC\u4e86\u3002\n\n\u597d\u50cf\u8fd8\u6709\u4e2a\u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48\u6240\u6709\u5143\u7d20\u53d6\u503c\u7684\u65b9\u6848\u6570\u5c31\u662f\u89e3\u7684\u4e2a\u6570\uff1f\u4e00\u4e2a\u53d8\u91cf\u53ef\u80fd\u5305\u62ec\u5f88\u591a\u5143\u7d20\u554a\u3002\u5176\u5b9e\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e24\u79cd\u60c5\u51b5\u90fd\u662f\u7528\u4e58\u6cd5\u539f\u7406\u8ba1\u7b97\u7684\uff0c\u5148\u7b97\u6240\u6709\u53d8\u91cf\u7684\u53d6\u503c\u60c5\u51b5\u7684\u8bdd\uff0c\u8f83\u6c42\u6240\u6709\u5143\u7d20\u7684\u53d6\u503c\u65b9\u6848\u6570\u53ea\u662f\u591a\u4e86\u4e9b\u62ec\u53f7\u7f62\u4e86\uff0c\u5e76\u4e0d\u5f71\u54cd\u7b54\u6848\u3002\n\n\u6700\u540e\u518d\u8c08\u4e00\u4e0b\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u6574\u4f53\u7b97\u6cd5\u7684\u5e73\u5747\u590d\u6742\u5ea6\u7ea6\u4e3aO(n\uff09\u7ea7\u522b\uff0c\u8981\u6bd4\uff08\u697c\u4e0a/\u697c\u4e0b\uff09\u5e76\u67e5\u96c6\u5feb\u4e0d\u5c11\u3002\u5b9e\u9645\u8fd8\u80fd\u4f18\u5316\uff1a\u53ef\u4ee5\u628a\u9ad8\u7cbe\u5ea6\u8ba1\u7b97\u7684\u538b\u4f4d\u7ea7\u522b\u589e\u9ad8\u3001BFS\u4e2d\u4e0d\u7528\u7ed9\u672a\u77e5\u70b9\u6743\u7684\u70b9\u8d4b\u503c\u7b49\u7b49\u3002\uff08\u4e0d\u8fc7\u771f\u4e0d\u77e5\u9053\u7b2c\u4e00\u5feb\u76840ms\u662f\u600e\u4e48\u8dd1\u51fa\u6765\u7684\uff09\n\n\u770b\u770b\u4ee3\u7801\u5427\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring> \n#include<queue>\n\nusing namespace std;\n\nint n,lm[30];//\u6bcf\u4e2a\u5b57\u6bcd\u957f\u5ea6\nint tolen;//\u771f\u6b63\u8868\u8fbe\u5f0f\u957f\u5ea6 \nint maxnode,quan[20008];\nlong long toans;//\u8d21\u732e\u7b54\u6848\u7528\u7684\u8fde\u901a\u5757\u7684\u4e2a\u6570/\u5feb\u901f\u5e42\u7684\u6307\u6570 \n\nchar s[2][10008];\n\nstruct equation{//\u5b58\u8868\u8fbe\u5f0f \n\tbool isnum;\n\tint mu,wei;\n}equ[3][10008];\n\ninline int init(int k)//\u5b57\u7b26\u4e32\u8f6c\u8868\u8fbe\u5f0f \n{\n\tint l=strlen(s[k]),step=1,m,w,r;\n\tfor(int i=0;i<l;++i)\n\t{\n\t\tif(s[k][i]=='0'||s[k][i]=='1')\n\t\t{\n\t\t\tequ[k][step].isnum=1;\n\t\t\tequ[k][step++].mu=s[k][i]=='1';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tm=s[k][i]-'a'+1;\n\t\t\tr=step+lm[m]-1,w=1;\n\t\t\tfor(;step<=r;step++)\n\t\t\t{\n\t\t\t\tequ[k][step].mu=m;\n\t\t\t\tequ[k][step].wei=w++;\n\t\t\t}\n\t\t}\n\t}\n\treturn step-1;\n}\n\n#define xb(k) equ[k][step].mu][equ[k][step].wei\n\nint\tfina[30][10008],lst[20008],nxt[100000],cnt,to[100000];\n\ninline void addedge(int u,int v)\n{\n\tnxt[++cnt]=lst[u];\n\tlst[u]=cnt;\n\tto[cnt]=v;\n}\n\nvoid ADDEDGE()\n{\n\tint len=1;\n\tint *p;\n\tfor(int step=1;step<=tolen;step++,len++)\n\t{\n\t\taddedge(len,len+tolen);\n\t\taddedge(len+tolen,len);\n\t\tif(!equ[1][step].isnum)\n\t\t{\n\t\t\tp=&fina[xb(1)];\n\t\t\tif(*p==0)\n\t\t\t\t*p=len;\n\t\t\telse\n\t\t\t{\n\t\t\t\taddedge(*p,len);\n\t\t\t\taddedge(len,*p);\n\t\t\t\t*p=len;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tquan[len]=equ[1][step].mu;\n\t\t\n\t}\n\tfor(int step=1;step<=tolen;step++,len++)\n\t{\n\t\tif(!equ[2][step].isnum)\n\t\t{\n\t\t\tp=&fina[xb(2)];\n\t\t\tif(*p==0)\n\t\t\t\t*p=len;\n\t\t\telse\n\t\t\t{\n\t\t\t\taddedge(*p,len);\n\t\t\t\taddedge(len,*p);\n\t\t\t\t*p=len;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tquan[len]=equ[2][step].mu;\n\t}\n\tmaxnode=len-1;\n}\n\nbool vis[20008];\n\nqueue<int>q;\n\ninline int bfs(int sta,int key)\n{\n\tvis[sta]=1;\n\tq.push(sta);\n\tint head,t;\n\twhile(!q.empty())\n\t{\n\t\thead=q.front();\n\t\tq.pop();\n\t\tfor(int e=lst[head];e;e=nxt[e])\n\t\t{\n\t\t\tt=to[e];\n\t\t\tif(!vis[t])\n\t\t\t{\n\t\t\t\tif(quan[t]!=-1&&(quan[t]!=key))\n\t\t\t\t\treturn 1;\n\t\t\t\tquan[t]=key;\n\t\t\t\tvis[t]=1;\n\t\t\t\tq.push(t);\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n\nconst int P=10000;\n\nstruct gaojing{\n\tlong long num[2600];\n\tint len;\n\tvoid qingling()\n\t{\n\t\tmemset(num,0,sizeof num);\n\t\tlen=0;\n\t}\n}endans,c,with,di;\n\ninline gaojing operator *(const gaojing &a,const gaojing &b)\n{\n\tc.qingling();\n\tint ll;\n\tfor(int i=1;i<=b.len;i++)\n\t\tfor(int j=1;j<=a.len;j++)\n\t\t{\n\t\t\tc.num[i+j-1]+=b.num[i]*a.num[j];\n\t\t}\n\tfor(ll=1;ll<=b.len+a.len;ll++)\n\t{\n\t\tif(c.num[ll]>=P)\n\t\t{\n\t\t\tc.num[ll+1]+=c.num[ll]/P;\n\t\t\tc.num[ll]%=P;\n\t\t}\n\t}\n\twhile(ll>1&&c.num[ll]==0) --ll;\n\tc.len=ll;\n\treturn c;\n}\n\ngaojing ksm(int mi)//\u9ad8\u7cbe\u5feb\u901f\u5e42 \n{\n\tdi.len=1;\n\tdi.num[1]=1;\n\twith.len=1;\n\twith.num[1]=2;\n\twhile(mi)\n\t{\n\t\tif(mi&1) di=di*with;\n\t\twith=with*with;\n\t\tmi>>=1;\n\t}\n\treturn di;\n}\n\nvoid print(const gaojing &a)\n{\n\tprintf(\"%d\",a.num[a.len]);\n\tint x;\n\tfor(int i=a.len-1;i>=1;--i)\n\t{\n\t\tx=a.num[i];\n\t\tif(x<1000) putchar('0');//\u6ce8\u610f\u4e2d\u95f4\u76840\u4e0d\u80fd\u7701\u7565 \n\t\tif(x<100) putchar('0');\n\t\tif(x<10) putchar('0');\n\t\tprintf(\"%d\",x);\n\t}\n}\n\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++) cin>>lm[i];\n\tcin>>s[1]>>s[2];\n\tif(n<=0)\n\t{\n\t\tcout<<0;\n\t\treturn 0;\n\t}\n\ttolen=init(1);\n\tif(tolen!=init(2))\n\t{\n\t\tcout<<0;\n\t\treturn 0;\n\t}\n\tmemset(quan,-1,sizeof quan);\n\tADDEDGE();\n\tfor(int i=1;i<=maxnode;i++)\n\t\tif(!vis[i]&&(quan[i]==1||quan[i]==0))\n\t\t{\n\t\t\tif(bfs(i,quan[i]))\n\t\t\t{\n\t\t\t\tcout<<0;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\tint mi=0;\n\tfor(int i=1;i<=maxnode;i++)\n\t\tif(!vis[i])\n\t\t{\n\t\t\tmi++;\n\t\t\tbfs(i,-1);\n\t\t}\n\tendans=ksm(mi);\n\tprint(endans);\n\treturn 0;\n}                                                           \n```\n\u6b22\u8fce\u63d0\u95ee/\u6311\u523a",
        "postTime": 1565839605,
        "uid": 45543,
        "name": "YHASDY",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2456 \u3010[SDOI2006]\u4e8c\u8fdb\u5236\u65b9\u7a0b\u3011"
    }
]
[
    {
        "content": "# \u5bb9\u65a5\u539f\u7406\n\n## \u89e3\u51b3\u65b9\u6848\n\n\u770b\u4e86\u4e00\u4e0b\u8fd9\u9053\u9898\u7684\u9898\u89e3\uff0c\u6211\u89c9\u5f97\u6ca1\u6709\u4eba\u9610\u91ca\u6e05\u695a\u5728\u5bb9\u65a5\u7684\u65f6\u5019**\u4e3a\u4ec0\u4e48\u4f1a\u51fa\u73b0\u4e00\u52a0\u4e00\u51cf**\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u81ea\u5df1\u9644\u4e0a\u4e00\u7bc7\u9898\u89e3\n\n\u6211\u4eec\u8bbe$g[i]$\u8868\u793a**\u521a\u597d**\u6709i\u4e2a\u540c\u5b66**\u6ca1\u6709\u571f\u7279\u4ea7**\uff0c\u7531\u4e8e\u6bcf\u4e2a\u540c\u5b66\u90fd**\u81f3\u5c11\u8981\u83b7\u5f97\u4e00\u4e2a\u571f\u7279\u4ea7**\uff0c\u90a3\u4e48\u663e\u7136$g[0]$\u5373\u4e3a\u6211\u4eec\u7684\u7b54\u6848\u3002\n\n### \u63a5\u4e0b\u6765\u6211\u4eec\u8003\u8651\u5982\u4f55\u6c42\u89e3g[0]\n\n\u8bbe$f[i]$\u8868\u793a**\u81f3\u5c11**\u6709i\u4e2a\u540c\u5b66**\u6ca1\u6709\u571f\u7279\u4ea7**\uff0c\u8981\u60f3\u6c42\u89e3$g[0]$\uff0c\u6211\u4eec\u5f97\u5148\u89e3\u51b3f\u6570\u7ec4\n\n### \u6c42\u89e3f\u6570\u7ec4\n\n\u6211\u4eec\u53ef\u4ee5\u6839\u636e$f[i]$\u7684\u5b9a\u4e49\uff0c**\u5f3a\u5236\u89c4\u5b9a\u6709i\u4e2a\u540c\u5b66\u6ca1\u6709\u571f\u7279\u4ea7**\uff0c\u7136\u540e\u6211\u4eec\u5c31\u80fd\u901a\u8fc7**\u9694\u677f\u6cd5**\u6c42\u5f97\u5269\u4e0b\u7684\u540c\u5b66\u5206\u7279\u4ea7\u7684\u65b9\u6848\u6570\u3002\u8fd9\u91cc\u518d\u4ed4\u7ec6\u8bf4\u660e\u4e00\u4e0b\uff0c$f[i]$\u8868\u793a\u7684\u662f**\u81f3\u5c11**\u6709$i$\u4e2a\u540c\u5b66**\u6ca1\u6709\u571f\u7279\u4ea7**\uff0c\u6240\u4ee5\u6211\u4eec\u5f3a\u5236\u89c4\u5b9a\u7684\u4f5c\u7528\u5c31\u5728\u4e8e**\u7ef4\u62a4f\u6570\u7ec4\u7684\u8fd9\u4e2a\u6027\u8d28**\uff0c\u53c8\u56e0\u4e3a**\u81f3\u5c11**\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u7528\u4fdd\u8bc1\u5269\u4e0b\u7684\u540c\u5b66\u6bcf\u4e2a\u4eba\u5fc5\u987b\u6709\u7279\u4ea7\uff0c\u4e0d\u4e86\u89e3**\u9694\u677f\u6cd5**\u7684\u540c\u5b66\u53ef\u4ee5\u81ea\u5df1\u53bb\u767e\u5ea6\u4e0a\u641c\u7d22\u4e00\u4e0b\uff0c\u8fd9\u91cc\u6211\u4fbf\u4e0d\u518d\u4ed4\u7ec6\u9610\u8ff0\uff0c\u5355\u8d70\u4e00\u4e2a\u5728**\u53ef\u4ee5\u4e3a\u7a7a\u7684\u60c5\u51b5\u4e0b**\u9694\u677f\u7684\u516c\u5f0f\uff0c\u65e2\u662f\u5c06$m$\u4e2a\u4e1c\u897f\u968f\u610f\u5206\u7ed9$n$\u4e2a\u4eba\u7684\u65b9\u6848\u6570\u4e3a\n\n$C_{m+n-1}^{n-1}$\n\n\u7136\u540e\u6211\u4eec**\u5206\u522b\u5904\u7406**\u6bcf\u4e2a\u7279\u4ea7\u5206\u51fa\u53bb\u7684\u65b9\u6848\u6570\uff0c**\u6700\u540e\u7684\u4e58\u79ef\u5c31\u662f\u7b54\u6848**\u3002\u7136\u540e\u7531\u4e8e\u5f3a\u5236\u54ea\u4e2a\u540c\u5b66\u4e5f\u4e0d\u786e\u5b9a\uff0c\u800c\u89c4\u5b9a$i$\u4e2a\u540c\u5b66\u4e0d\u80fd\u9009\u5230\u7684\u65b9\u6848\u6570\u5176\u5b9e\u5c31\u662f**\u4ece$n$\u4e2a\u4eba\u91cc\u9762\u9009\u51fa$i$\u4e2a\u4eba\u7684\u7ec4\u5408\u6570**\uff0c\u5373\u4e3a\n\n$C_n^i$\n\n\u6240\u4ee5\uff0c\u7efc\u4e0a\u6240\u8ff0\n\n$f[i]=C_n^i\\times\\prod_j^mC_{a[j]+n-i-1}^{n-i-1}$\n\n\u89e3\u91ca\u4e00\u4e0b\u51cf\u53bbi\u7684\u539f\u56e0\uff0c$i$\u4e3a\u5f3a\u5236\u6ca1\u6709\u7279\u4ea7\u7684\u4eba\u6570\uff0c\u6240\u4ee5\u540e\u9762\u5206\u7279\u4ea7\u7684\u4eba\u6570\u5c31\u8981**\u51cf\u53bb$i$**\u3002\n\n### \u4e3a\u4ec0\u4e48\u6700\u540e\u7684\u7b54\u6848\u4e3a$ans=\\sum_{i=0}^{n-1} (-1)^if[i]$\n\n\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4f8b\u5982\u8ba1\u7b97\u81f3\u5c11\u6709\u4e00\u4e2a\u4eba\u6ca1\u6709\u5206\u5230\u7684\u65b9\u6848\u6570\u65f6\uff0c\u5047\u8bbe\u6211\u4eec\u5728**\u89c4\u5b9a$x$\u4e0d\u80fd\u9009\u5230\u65f6**\uff0c\u5904\u7406\u5c06\u7279\u4ea7\u5206\u7ed9\u5269\u4e0b\u7684$n-1$\u4e2a\u4eba\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u6709\u4eba\u5206\u4e0d\u5230\u7279\u4ea7\u7684\u60c5\u51b5\uff0c\u6211\u4eec**\u6709\u4e00\u79cd\u60c5\u51b5\u521a\u597d\u662f$y$\u6ca1\u6709\u5206\u5230\u7279\u4ea7**\uff0c\u90a3\u4e48\u5728\u89c4\u5b9a$y$\u4e0d\u80fd\u9009\u5230\u65f6\uff0c\u6211\u4eec\u4e5f\u80fd\u627e\u5230$x$\u5206\u4e0d\u5230\u7279\u4ea7\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u5ffd\u7565\u5f53\u89c4\u5b9a\u67d0\u4e2a\u4eba\u4e0d\u80fd\u5206\u5230\u4e14\u53e6\u4e00\u4e2a\u4eba\u521a\u597d\u4e5f\u6ca1\u6709\u5206\u5230\u7684\u60c5\u51b5\u65f6\u5176\u4ed6\u4eba\u5206\u5230\u7279\u4ea7\u60c5\u51b5\u7684\u65b9\u6848\u6570\uff0c\u539f\u56e0\u662f\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e$x$\u548c$y$\u6765\u8bf4\uff0c\u5f53\u4ed6\u4eec\u627e\u5230\u5bf9\u65b9\u65f6\uff0c\u5176\u4ed6\u4eba\u5206\u5230\u7279\u4ea7\u7684\u65b9\u6848\u6570\u662f\u4e0d\u53d8\u7684\u3002**\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u9ed8\u8ba4\u5728$f[1]$\u4e2d\uff0c$g[2]$\u662f\u88ab\u8ba1\u7b97\u4e86\u4e24\u6b21\u7684**\uff0c**\u56e0\u4e3a\u5728\u89c4\u5b9ax\u4e0d\u5206\u5230\u7279\u4ea7\u7684\u60c5\u51b5\u4e0b\u4f1a\u51fa\u73b0y\u5206\u4e0d\u5230\u7279\u4ea7\u7684\u60c5\u51b5\uff0c\u4f46\u5728y\u89c4\u5b9a\u5206\u4e0d\u5230\u7279\u4ea7\u65f6\u4e5f\u4f1a\u51fa\u73b0x\u5206\u4e0d\u5230\u7279\u4ea7\u7684\u60c5\u51b5**\uff0c\u6240\u4ee5\u8bf4$g[2]$\u88ab\u8ba1\u7b97\u4e86\u4e24\u6b21\uff0c\u6211\u4eec\u4ee5\u6837\u4f8b\u4e3a\u4f8b\uff0c\u53ef\u4ee5\u53d1\u73b0\n\n$f[0]=g[0]+g[1]+g[2]+g[3]+g[4]$\n\n$f[1]=g[1]+g[2]*2+g[3]*3+g[4]*4$\n\n$f[2]=g[2]+g[3]*3+g[4]*6$\n\n$f[3]=g[3]+g[4]*4$\n\n$f[4]=g[4]$\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u901a\u8fc7\u4e0a\u8ff0\u7684$ans$\u516c\u5f0f\u8ba1\u7b97\uff0c\u7b54\u6848\u521a\u597d\u4e3a$g[0]$\uff0c\u591a\u8bd5\u51e0\u6b21\u540e\u53d1\u73b0\u8fd9\u4e2a\u89c4\u5f8b\u5177\u6709**\u666e\u904d\u6027**\uff0c\u6240\u4ee5\n\n$ans=\\sum_{i=0}^{n-1} (-1)^iC_n^i\\times\\prod_j^mC_{a[j]+n-i-1}^{n-i-1}$\n\n\u5373\u4e3a\u6211\u4eec\u7684\u7b54\u6848\uff0c\u9644\u4e0aAC\u4ee3\u7801\n\n## code\n\n```\n#include <bits/stdc++.h>\n#pragma GCC optimize(2)\n#pragma GCC optimize(3,\"Ofast\",\"inline\")\nusing namespace std;\nconst int N=2010,MOD=1000000007;\ntypedef long long ll;\nint n,m;\nll ans,a[N],c[N][N];    \n \ninline void intial()    //\u521d\u59cb\u5316\u7ec4\u5408\u6570 \n{\n    c[0][0]=1;\n    for(int i=1;i<=N-5;i++){\n        c[i][0]=1;\n        for(int j=1;j<=i;j++)\n            c[i][j]=(c[i-1][j]+c[i-1][j-1])%MOD;\n    }\n}\n \nint main()\n{\n    intial();\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=m;i++)    \n        scanf(\"%lld\",&a[i]);\n    //\u8bbe\u6570\u7ec4g[i]\u8868\u793a \u521a\u597d \u6709i\u4e2a\u540c\u5b66\u6ca1\u6709\u571f\u7279\u4ea7\uff0c\u663e\u7136g[0]\u5c31\u662f\u7b54\u6848\n    //\u8bbef[i]\u8868\u793a \u81f3\u5c11 \u6709i\u4e2a\u540c\u5b66\u6ca1\u6709\u571f\u7279\u4ea7\uff0c\u901a\u8fc7\u8ba1\u7b97\u53d1\u73b0\u6bcf\u4e2af[i]\u53ef\u80fd\u4f1a\u91cd\u590d\u8ba1\u7b97g[i]\uff0c\u4ee5\u6837\u4f8b\u4e3a\u4f8b \n    //f[0]=g[0]+g[1]+g[2]+g[3]+g[4]\n    //f[1]=g[1]+g[2]*2+g[3]*3+g[4]*4\n    //f[2]=g[2]+g[3]*3+g[4]*6\n    //f[3]=g[3]+g[4]*4\n    //f[4]=g[4]\n    //\u6839\u636e\u5bb9\u65a5\u539f\u7406\u5f97\u5230\u516c\u5f0f\uff1a \n    //ans=f[0] -f[1]+f[2]-f[3]+...+(-1)(n\u6b21\u65b9)f[n] \n    for(int i=0;i<n;i++){        //\u5f3a\u5236\u4efb\u4e00i\u4e2a\u540c\u5b66\u6ca1\u6709\u7279\u4ea7\uff0c\u90a3\u4e48\u6709c[n][i]\u79cd\u65b9\u6cd5 \n        ll res=c[n][i];             //\u9694\u677f\u6cd5\uff0c\u518d\u901a\u8fc7\u53ef\u91cd\u590d\u7ec4\u5408\u8ba1\u7b97\u6613\u5f97\uff1a \n        for(int j=1;j<=m;j++)        //m\u4e2a\u4e1c\u897f\u968f\u610f\u5206\u7ed9n\u4e2a\u4eba\u65b9\u6848\u6570\u4e3ac[m+n-1][n-i-1],\u4e00\u5171\u7684\u65b9\u6848\u6570\u5c31\u8981\u628a\u8fd9\u4e9b\u571f\u7279\u4ea7\u7684\u65b9\u6848\u6570\u5168\u90e8\u4e58\u8d77\u6765 \n            res=res*c[a[j]+n-i-1][n-i-1]%MOD;\n        if(i&1) ans=(ans-res+MOD)%MOD;      //\u6c42\u5f97f[i]\u540e\u6839\u636eans\u516c\u5f0f\u5373\u53ef\u6c42\u89e3 \n        else ans=(ans+res+MOD)%MOD; \n    }\n    printf(\"%d\\n\",ans); \n    return 0;\n}\n```\n",
        "postTime": 1596460509,
        "uid": 258460,
        "name": "Booksnow",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "$qwq$\u4e3a\u4ec0\u4e48\u7ec4\u5408&\u5bb9\u65a5\u7684\u9898\u76ee\u96be\u5ea6\u90fd\u8bc4\u7684\u597d\u9ad8\u3002\n\n## \u9898\u610f(\u7b80\u5316\u7248\u672c)\n\u6709$n$\u4e2a\u6709\u6807\u53f7\u7684\u76d2\u5b50\u548c$m$\u79cd\u6709\u6807\u53f7\u7684\u7403\uff0c\u6bcf\u79cd\u7403\u6709$a[i]$\u4e2a\uff0c\u6c42\u6bcf\u4e2a\u76d2\u5b50\u81f3\u5c11\u653e\u4e00\u79cd\u7403\u7684\u603b\u65b9\u6848\u6570\u3002\n\n## \u5206\u6790\n \n\u76f4\u63a5\u6c42\u5408\u6cd5\u65b9\u6848\u6570\u597d\u50cf\u6bd4\u8f83\u590d\u6742\uff0c\u4e0d\u5982\u6211\u4eec\u8003\u8651\u8865\u96c6\u8f6c\u6362\uff1f\n\n\u603b\u65b9\u6848\u6570\uff08\u6bcf\u4e2a\u76d2\u5b50\u53ef\u4ee5\u4e3a\u7a7a\uff09-\u4e0d\u5408\u6cd5\u65b9\u6848\u6570=\u5408\u6cd5\u65b9\u6848\u6570\uff08\u6ca1\u6709\u76d2\u5b50\u4e3a\u7a7a\uff09\n\n\u6839\u636e\u7b80\u5316\u540e\u7684\u9898\u610f\uff0c\u5f88\u81ea\u7136\u5730\u60f3\u5230$TwelveFoldWay$\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u8003\u8651\u6bcf\u4e00\u79cd$a[i]$\u7684\u60c5\u51b5\uff0c\u4e5f\u5c31\u662f\u628a$a[i]$\u4e2a\u65e0\u6807\u53f7\u7684\u7403\u653e\u5728$n$\u4e2a\u6709\u6807\u53f7\u7684\u76d2\u5b50\u91cc\uff0c\u5141\u8bb8\u6709\u7a7a\u76d2\uff0c\u4e5f\u5c31\u662f\u7ecf\u5178\u7684$ULB$\u95ee\u9898\uff0c\u65b9\u6848\u6570\u5c31\u5e94\u8be5\u662f$C(n+a[i]-1,n-1)$\uff0c\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u6240\u4ee5\u6700\u540e$m$\u79cd\u7403\u7684\u603b\u65b9\u6848\u5c31\u5e94\u8be5\u662f$\\prod_{i=1}^{m}C(n+a[i]-1,n-1)$\u3002\n\n\u90a3\u4e48\u73b0\u5728\u8003\u8651\u4e0d\u5408\u6cd5\u65b9\u6848\u6570\uff0c\u5982\u679c\u603b\u65b9\u6848\u6570\u4e2d\u662f\u53ef\u4ee5\u6709\u7a7a\u7684\u76d2\u5b50\uff0c\u90a3\u4e48\u6211\u4eec\u7684\u4e0d\u5408\u6cd5\u65b9\u6848\u6570\u5c31\u53ef\u4ee5\u662f\uff1a\u4e00\u4e2a\u76d2\u5b50\u4e3a\u7a7a\uff0c\u4e24\u4e2a\u76d2\u5b50\u4e3a\u7a7a...\u4e00\u76f4\u5230\u6709$n-1$\u4e2a\u76d2\u5b50\u4e3a\u7a7a\u7684\u60c5\u51b5\u3002\n\n\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u5728\u6c42\u6709$x$\u4e2a\u76d2\u5b50\u4e3a\u7a7a\u7684\u60c5\u51b5\uff0c\u5c31\u76f8\u5f53\u4e8e\u628a$a[i]$\u4e2a\u7403\u653e\u8fdb\u4e86$n-x$\u4e2a\u76d2\u5b50\u5f53\u4e2d\uff0c\u65b9\u6848\u6570$C(n-x+a[i]-1,n-x-1)$\uff0c\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u6709i\u4e2a\u76d2\u5b50\u4e3a\u7a7a\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u5e94\u8be5\u662f$\\prod_{j=1}^{m}C(n-i+a[j]-1,n-i-1)$\uff0c\u53c8\u8003\u8651\u5230\u76d2\u5b50\u662f\u6709\u6807\u53f7\u7684\uff0c\u6211\u4eec\u9009\u62e9\u4e0d\u540c\u7684\u76d2\u5b50\u4e3a\u7a7a\uff0c\u65b9\u6848\u6570\u4e5f\u4e0d\u540c\uff0c\u4e8e\u662f\u5c31\u8981\u5728\u65b9\u6848\u6570\u57fa\u7840\u4e0a$*$\u4e00\u4e2a$C(n,i)$\uff0c\u90a3\u4e48\uff0c\u6709i\u4e2a\u76d2\u5b50\u4e3a\u7a7a\u7684\u603b\u8d21\u732e\u5c31\u5e94\u8be5\u662f\n\n$C(n,i)*\\prod_{j=1}^{m}C(n-i+a[j]-1,n-i-1)$\n\n\u5df2\u7ecf\u5230\u4e86\u8fd9\u4e00\u6b65\uff0c\u76f8\u4fe1\u5927\u5bb6\u5c31\u5df2\u7ecf\u770b\u51fa\u6765\u63a5\u4e0b\u6765\u5c31\u662f\u4e00\u4e2a\u5bb9\u65a5\u4e86\uff0c\u90a3\u4e48\u6700\u7ec8\u7684\u901a\u5f0f\u5c31\u5e94\u8be5\u662f\uff1a\n\n$\\sum_{i=0}^{n-1}(-1)^iC(n,i)\\prod_{j=1}^{m}C(n+a[j]-i-1,n-i-1)$\n\n## AC\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define int long long\nconst int mod=1e9+7;\nint c[2005][2005],n,m,a[2005];\nint pow(int a,int b)\n{\n\tint ans=1;\n\twhile(b)\n\t{\n\t\tif(b&1)ans=ans*a%mod;\n\t\ta*a%mod;\n\t\tb>>=1;\n\t}\n\treturn ans;\n}\nsigned main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=m;i++)\n\tscanf(\"%d\",&a[i]);\n\tfor(int i=0;i<=2000;i++)\n\tc[i][i]=c[i][0]=1;\n\tfor(int i=1;i<=2000;i++)\n\t\tfor(int j=1;j<=i;j++)\n\t\tc[i][j]=(c[i-1][j-1]+c[i-1][j])%mod;\n\tint ans=0;\n\tfor(int i=0;i<=n-1;i++)\n\t{\n\t\tint cnt=1;\n\t\tfor(int j=1;j<=m;j++)\n\t\tcnt=cnt*c[n+a[j]-i-1][n-i-1]%mod,cnt%=mod;\n\t\tif(i%2)ans=(ans-cnt*c[n][i]%mod+mod)%mod;\n\t\telse ans=(ans+cnt*c[n][i]%mod)%mod;\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\t\n}\n```\n",
        "postTime": 1573009285,
        "uid": 88522,
        "name": "\u83ab\u5948\u7684\u5d16\u5f84",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "\u8003\u8651\u5bb9\u65a5\uff0c$ans=(>=0$\u4e2a\u4eba\u6ca1\u5206\u5230\u7684\u65b9\u6848$)-(>=1$\u4e2a\u4eba\u6ca1\u5206\u5230\u7684\u65b9\u6848$)+(>=2$\u4e2a\u4eba\u6ca1\u5206\u5230\u7684\u65b9\u6848$)$...\n\n\u8003\u8651\u8ba1\u7b97$>=i$\u4e2a\u4eba\u6ca1\u5206\u5230\u7684\u65b9\u6848\uff0c\u6bcf\u4e2a\u7279\u4ea7\u5206\u5f00\u7b97\uff0c\u6700\u540e\u4e58\u8d77\u6765\u3002\u6839\u636e\u63d2\u677f\u6cd5\uff0c\u7b2c$k$\u4e2a\u7279\u4ea7\u7684\u65b9\u6848\u4e3a$C(a[k]+n-i-1,n-i-1)$\u3002\u7136\u540e\u8fd8\u8981\u4e58\u4e0a\u5f3a\u5236\u54ea$i$\u4e2a\u4eba\u6ca1\u5206\u5230\u7684\u65b9\u6848\uff0c\u5373$C(n,i)$\u3002\n\n\u8bbe$>=i$\u4e2a\u4eba\u6ca1\u5206\u5230\u7684\u65b9\u6848\u4e3a$f[i]$\uff0c\u5219$ans=\\sum\\limits_{i=0}^{n-1}(-1)^i\\times f[i]$\u3002\n\n$Code\\ Below:$\n```cpp\n#include<bits/stdc++.h>\n#define ts cout<<\"ok\"<<endl\n#define int long long\n#define hh puts(\"\")\n#define pc putchar\n#define mo 1000000007\n//#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\n//char buf[1<<21],*p1=buf,*p2=buf;\nusing namespace std;\nint n,m,a[1005],C[2005][2005],ans;\ninline int read(){\n    int ret=0,ff=1;char ch=getchar();\n    while(!isdigit(ch)){if(ch=='-') ff=-ff;ch=getchar();}\n    while(isdigit(ch)){ret=(ret<<3)+(ret<<1)+ch-'0';ch=getchar();}\n    return ret*ff;\n}\nvoid write(int x){\n    if(x<0){x=-x;putchar('-');}\n    if(x>9) write(x/10);\n    putchar(x%10+48);\n}\nint work(int x){\n    x=n-x;\n    int res=1;\n    for(int i=1;i<=m;i++) res=res*C[a[i]+x-1][x-1]%mo;\n    return res*C[n][n-x]%mo;    \n}\nsigned main(){\n    n=read(),m=read();\n    for(int i=1;i<=m;i++) a[i]=read();\n    for(int i=0;i<=2000;i++) C[i][0]=1;\n    for(int i=1;i<=2000;i++)\n        for(int j=1;j<=i;j++)\n            C[i][j]=(C[i-1][j]+C[i-1][j-1])%mo;\n    for(int i=0;i<=n-1;i++){//>=i\u4e2a\u4eba\u6ca1\u5206\u5230\u7684\u65b9\u6848 \n        if(i&1) ans=(ans-work(i)+mo)%mo;\n        else ans=(ans+work(i))%mo;\n    }\n    write(ans);\n    return 0;\n}\n```\n",
        "postTime": 1566284258,
        "uid": 27858,
        "name": "ycyaw",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "\u5230\u849f\u84bb\u7684\u535a\u5ba2\u5c0f\u7a9d\u91cc\u6559\u6559\u849f\u84bb\u5bb9\u65a5 $\\to$ [$\\tt George1123$](https://www.cnblogs.com/Wendigo/p/13373984.html)\n\n---\n## \u9898\u9762\n\n> [JSOI2011 \u5206\u7279\u4ea7](https://www.luogu.com.cn/problem/P5505)\n\n> \u6709 $n$ \u4e2a\u4e0d\u540c\u7684\u76d2\u5b50\u548c $m$ \u79cd\u4e0d\u540c\u7684\u7403\uff0c\u7b2c $i$ \u79cd\u7403\u6709 $a_i$ \u4e2a\uff0c\u7528\u5149\u6240\u6709\u7403\uff0c\u6c42\u4f7f\u6bcf\u4e2a\u76d2\u5b50\u4e0d\u7a7a\u7684\u65b9\u6848\u6570\u3002\n\n> \u6570\u636e\u8303\u56f4\uff1a$1\\le n,m,a_i\\le 1000$\u3002\n\n---\n## \u849f\u84bb\u8bed\n\n\u4eca\u5929\u505a\u4e86\u51e0\u9053\u9ed1\u9898\uff0c\u849f\u84bb\u7684\u505a\u6cd5\u975e\u5e38\u849f\u84bb\uff0c\u770b\u4e0a\u53bb\u5f88\u5389\u5bb3\u5176\u5b9e\u5f88\u5e9f\uff0c\u5de8\u4f6c\u7684\u505a\u6cd5\u662f\u5bb9\u65a5\uff0c\u79d2\u6740\u4e00\u5207\u3002\n\n\u6240\u4ee5\u849f\u84bb\u62ff\u8fd9\u9053\u6c34\u9898\u8bb2\u8bb2\u81ea\u5df1\u7684\u505a\u6cd5\u3002\u5e0c\u671b\u5de8\u4f6c\u6559\u849f\u84bb\u5bb9\u65a5 $\\tt /kel$\u3002\n\n---\n## \u849f\u84bb\u89e3\n\n\u770b\u5230\u76d2\u5b50\u4e0d\u80fd\u7a7a\uff0c\u5148\u4e8c\u9879\u5f0f\u53cd\u6f14\u3002\n\n$f(i)$ \u8868\u793a $i$ \u4e2a\u76d2\u5b50\u7a7a\uff0c\u5269\u4e0b\u975e\u7a7a\u7684\u65b9\u6848\u6570\uff1b$g(i)$ \u8868\u793a $i$ \u4e2a\u76d2\u5b50\u7a7a\uff0c\u5269\u4e0b\u968f\u610f\u3002\n\n$$g(i)=\\sum_{x=i}^n {x\\choose i}f(x)\\Longleftrightarrow f(i)=\\sum_{x=i}^n{x\\choose i}(-1)^{x-i}g(x)$$\n\n\u7136\u540e\u8003\u8651 $g(i)$ \u600e\u4e48\u6c42\uff1a\u56e0\u4e3a $n-i$ \u4e2a\u53ef\u4ee5\u7a7a\u53ef\u4ee5\u4e0d\u7a7a\uff0c\u6240\u4ee5\u53ef\u4ee5\u6784\u9020\u751f\u6210\u51fd\u6570\uff1a\n\n$$\\left(\\prod_{j=1}^m(1+x_j+x_j^2+x_j^3+\\cdots)\\right)^{n-i}$$\n\n$g(i)$ \u5c31\u7b49\u4e8e $\\prod_{j=1}^mx_j^{a_j}$ \u7684\u9879\u6570\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u6bcf\u4e2a $x_j$ \u5206\u5f00\u6765\u8003\u8651\uff0c\u7528\u9694\u677f\u6cd5\uff0c\u5f97\u51fa\uff1a\n\n$$g(i)={n\\choose i}\\prod_{j=1}^m{a_j+n-i-1\\choose n-i-1}$$\n\n\u7136\u540e\u7b54\u6848\u5c31\u662f\uff08\u5f53 $x=n$ \u65f6 $n-x-1=-1$\uff0c\u6240\u4ee5\u7ed3\u679c\u4e3a $0$\uff0c\u4e0d\u9700\u8981\u679a\u4e3e\uff09\uff1a\n\n$$f(0)=\\sum_{x=0}^{n-1}(-1)^{x}{n\\choose x}\\prod_{j=1}^m{a_j+n-x-1\\choose n-x-1}$$\n\n---\n## \u4ee3\u7801\n\n\u8ddf\u5de8\u4f6c\u7684\u4ee3\u7801\u662f\u4e00\u6837\u7684\uff0c\u53ea\u4e0d\u8fc7\u63a8\u5bfc\u8fc7\u7a0b\u4e0d\u540c\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n//Start\ntypedef long long ll;\ntypedef double db;\n#define mp(a,b) make_pair(a,b)\n#define x first\n#define y second\n#define be(a) a.begin()\n#define en(a) a.end()\n#define sz(a) int((a).size())\n#define pb(a) push_back(a)\nconst int inf=0x3f3f3f3f;\nconst ll INF=0x3f3f3f3f3f3f3f3f;\n\n//Data\nconst int N=1e3,T=N<<1;\nconst int mod=1e9+7;\nint n,m,a[N],c[T+1][T+1];\nint g(int x){\n    int res=c[n][x];\n    for(int i=0;i<m;i++)\n        res=(ll)res*c[a[i]+n-x-1][n-x-1]%mod;\n    return res;\n}\n\n//Main\nint main(){\n    ios::sync_with_stdio(0);\n    cin.tie(0),cout.tie(0);\n    cin>>n>>m;\n    for(int i=0;i<=T;i++){\n        c[i][0]=c[i][i]=1;\n        for(int j=1;j<=i-1;j++)\n            c[i][j]=(c[i-1][j-1]+c[i-1][j])%mod;\n    }\n    for(int i=0;i<m;i++) cin>>a[i];\n    int ans=0;\n    for(int i=0;i<n;i++){\n        if(i&1) (ans+=mod-g(i))%=mod;\n        else (ans+=g(i))%=mod;\n    }\n    cout<<ans<<'\\n';\n    return 0;\n}\n```\n---\n**\u795d\u5927\u5bb6\u5b66\u4e60\u6109\u5feb\uff01**",
        "postTime": 1595589214,
        "uid": 118365,
        "name": "George1123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "# \u9898\u610f\u7b80\u8ff0\uff1a\n\n\u6709 $n$ \u4e2a\u6709\u6807\u53f7\u7684\u62bd\u5c49\u548c $m$ \u79cd\u6709\u6807\u53f7\u7684\u6c34\u679c\uff0c\u6bcf\u79cd\u6c34\u679c\u6709 $a[i]$ \u4e2a\uff0c\u6c42\u6bcf\u4e2a\u62bd\u5c49\u81f3\u5c11\u653e\u4e00\u79cd\u6c34\u679c\u7684\u603b\u65b9\u6848\u6570\u3002\n\n# Solution\n\n\u5148\u770b\u4e00\u4e2a\u7b80\u5355\u7684\u95ee\u9898\uff0c\u6709 $m$ \u4e2a\u76f8\u540c\u7684\u5c0f\u7403\uff0c\u653e\u5230 $n$ \u4e2a\u76f8\u540c\u7684\u76d2\u5b50\u91cc\uff0c\u76d2\u5b50\u4e0d\u4e3a\u7a7a\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u653e\u7f6e\u65b9\u6848\uff1f\n\n\u91c7\u7528\u9694\u677f\u6cd5\uff0c$m$ \u4e2a\u5c0f\u7403\u6392\u6210\u4e00\u6392\uff0c\u5728 $m - 1$ \u4e2a\u7a7a\u9699\u4e2d\u63d2\u5165 $n - 1$ \u5757\u9694\u677f\uff0c\u603b\u5171\u5f62\u6210 $n$ \u4e2a\u90e8\u5206\uff0c\u6bcf\u4e2a\u90e8\u5206\u5c31\u662f\u4e00\u4e2a\u76d2\u5b50\uff0c\u603b\u5171\u6709 $C_{\\ m-1}^{\\ n-1}$ \u79cd\u65b9\u6848\u3002\n\n\u82e5\u76d2\u5b50\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u653e\u7f6e\u65b9\u6848\uff1f\n\n\u53ef\u4ee5\u770b\u505a\u6709 $m + n$ \u4e2a\u5143\u7d20\uff0c\u5728 $m + n - 1$ \u4e2a\u7a7a\u9699\u91cc\u63d2\u5165 $n - 1$ \u5757\u9694\u677f\uff0c\u603b\u5171\u5f62\u6210 $n$ \u4e2a\u90e8\u5206\uff0c\u6bcf\u4e2a\u90e8\u5206\u5305\u542b\u82e5\u5e72\u4e2a\u5143\u7d20\uff0c\u5982\u679c\u67d0\u90e8\u5206\u53ea\u5305\u542b\u4e00\u4e2a\u5143\u7d20\uff0c\u5219\u8fd9\u4e2a\u5143\u7d20\u5c31\u770b\u4f5c\u76d2\u5b50\uff0c\u4e14\u6ca1\u6709\u5f97\u5230\u5c0f\u7403\uff1b\u82e5\u67d0\u90e8\u5206\u5305\u542b $k$ \u4e2a\u5143\u7d20\uff0c\u5219\u8fd9\u90e8\u5206\u5c31\u770b\u4f5c $k - 1$ \u4e2a\u5c0f\u7403\u653e\u5165 $1$ \u4e2a\u76d2\u5b50\u4e2d\u3002\u603b\u5171\u6709 $C_{\\ m+n-1}^{\\ n-1}$ \u79cd\u65b9\u6848\u3002\n\n\u5bf9\u4e8e\u672c\u9898\uff0c\u8003\u8651\u4e00\u79cd\u7279\u4ea7\u4e00\u79cd\u7279\u4ea7\u7684\u5206\uff0c\u8bbe\u7b2c $j$ \u79cd\u7279\u4ea7\uff0c\u6709 $a [ j ]$ \u4e2a\uff0c\u82e5\u6709 $i$ \u4e2a\u4eba\u6ca1\u6709\u5f97\u5230\u7279\u4ea7\uff0c\u5219\u5269\u4e0b\u7684 $n \u2212 i$ \u4e2a\u4eba\u5206\uff0c\u4e14\u4e5f\u53ef\u80fd\u67d0\u4e9b\u4eba\u5b58\u5728\u5206\u4e0d\u5230\u7684\u60c5\u51b5\uff0c\u65b9\u6848\u4e3a $C_{\\ a[j]+n-i-1}^{\\ n-i-1}$ \uff0c\u540c\u65f6\uff0c\u6bcf\u4e2a\u4eba\u7f16\u53f7\u4e0d\u540c\uff0c\u8fd8\u9700\u8981\u9009\u62e9 $i$ \u4e2a\u4eba\u51fa\u6765\uff0c\u8fd9 $i$ \u4e2a\u4eba\u80af\u5b9a\u4e0d\u80fd\u5206\u5230\u7279\u4ea7\uff0c\u6240\u4ee5\u81f3\u5c11 $i$ \u4e2a\u4eba\u6ca1\u6709\u5206\u5230\u7279\u4ea7\u7684\u65b9\u6848\u6570\u4e3a\uff1a $C_{a[j]+n-i-1}^{n-i-1}$  \uff0c\u5176\u4e2d $1\\le j\\le m$  \uff0c\u8868\u793a\u7684\u662f\u4e00\u79cd\u7279\u4ea7\u4e00\u79cd\u7279\u4ea7\u7684\u5206\uff0c\u800c\u5206\u6b65\u7528\u4e58\u6cd5\u3002\n\n\u8bbe $f [ i ]$ \u8868\u793a\u81f3\u5c11 $i$ \u4e2a\u4eba\u6ca1\u6709\u5206\u5230\u7279\u4ea7\u7684\u65b9\u6848\u6570\u3002\n\n\u6211\u4eec\u6709\uff1a $f[i]=C_n^i\\prod_{j=1}^m C_{\\ a[j]+n-i-1}^{\\ n-i-1}$  \u3002\n\n\u8bbe\u6709 $3$ \u4e2a\u4eba\u5206\u522b\u662f  $A , B , C $  \uff0c $f [ 1 ]$ \u5305\u542b\u7684\u60c5\u51b5\u6709\uff0c     $A(B,C),B(A,C),C(A,B)$ \uff0c\u62ec\u53f7\u5916\u7684\u8868\u793a\u9009\u51fa\u6765\u80af\u5b9a\u5206\u4e0d\u5230\u7684\u4eba\uff0c\u62ec\u53f7\u91cc\u7684\u8868\u793a\u53ef\u80fd\u5206\u4e0d\u5230\u7684\u4eba\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e24\u4eba\u5206\u4e0d\u5230\u7684\u60c5\u51b5\u51cf\u4e86\u4e24\u6b21\uff0c\u56e0\u6b64\u9700\u8981\u52a0\u4e0a $f [ 2 ] $ \u5305\u542b\u7684\u60c5\u51b5\uff0c\u8fd9\u6837\u5c31\u5f97\u5230\u521a\u597d $1$ \u4e2a\u4eba\u5206\u4e0d\u5230\u3001\u521a\u597d $2$ \u4e2a\u4eba\u5206\u4e0d\u5230\u7684\u65b9\u6848\u6570\uff0c\u4e3a $f[1]-f[2]$ \u3002\n\n\u6839\u636e\u5bb9\u65a5\u539f\u7406\uff0c\u90a3\u4e48\u521a\u597d $1$ \u4e2a\u4eba\u3001$2$ \u4e2a\u4eba\u3001\u2026  $n-1$ \u4e2a\u4eba\u7684\u5206\u4e0d\u5230\u7684\u603b\u7684\u65b9\u6848\u6570\u4e3a\uff1a\n\n$f[1]-f[2]+f[3]-f[4]....f[n-1]$\u3002\n\n\u7528 $f [ 0 ]$ \u8868\u793a\u81f3\u5c11 $0$ \u4e2a\u4eba\u5206\u4e0d\u5230\u7684\u65b9\u6848\u6570\uff0c\u51cf\u53bb\u4e0a\u9762\u7684\u65b9\u6848\u6570\uff0c\u5c31\u662f\u521a\u597d $0$  \u4e2a\u4eba\u5206\u4e0d\u5230\u7684\u65b9\u6848\u6570\uff0c\u5373\u6700\u540e\u7684\u7b54\u6848\uff1a\n\n$ans=\\sum_{i=0}^{n-1}(-1)^i\\times f[i]$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(N^2)$ \u3002\n\n\u4e0b\u9762\u662f\u6211\u7684\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define M 1000000007\n#define ll long long\nusing namespace std;\nll ans,C[3005][3005],n,m,a[100005],f[100005];\nll T(ll x)\n{\n\tif(x%2==1) return -1;\n\telse return 1;\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(ll i=1;i<=m;i++) scanf(\"%d\",&a[i]);\n\tC[1][1]=1;\n\tfor(ll i=0;i<=2000;i++)\n\tC[i][i]=C[i][0]=1;\n\tfor(ll i=2;i<=2000;i++)\n\t{\n\t\tfor(ll j=1;j<=i;j++)\n\t\t{\n\t\t\tC[i][j]=(C[i-1][j-1]+C[i-1][j])%M;\t\n\t\t//\tcout<<C[i][j]<<\" \";\t\n\t\t}\n\t//\tcout<<endl;\n\t}\n\tfor(ll i=0;i<=n-1;i++)\n\t{\n\t\tll s=1;\n\t\tfor(ll j=1;j<=m;j++)\n\t\t{\n\t\t\ts=((s%M)*(C[n-i+a[j]-1][n-i-1]%M))%M;\n\t\t}\n\t\tif(i%2)ans=(ans-s*C[n][i]%M+M)%M;\n\t\telse ans=(ans+s*C[n][i]%M)%M;\n\t}\n\tcout<<ans%M;\n\treturn 0;\n} \n```\n",
        "postTime": 1601816911,
        "uid": 213256,
        "name": "Constant",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "\u6254\u5b50\u96c6\u53cd\u6f14.\n$$g(S)=\\sum_{T\\subseteq S}f(T)$$\n$$f(S)=\\sum_{T\\subseteq S}(-1)^{|S|-|T|}g(T)$$\n\n---\n\n\u9996\u5148\u4eba\u662f\u6709\u5e8f\u7684,\u7136\u540e\u81f3\u5c11\u4e00\u4e2a\u7279\u4ea7\u7684\u7ea6\u675f\u592a\u70e6\u4e86,\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u7ea6\u675f\u7684\u8bdd...  \n\n\u53ef\u4ee5\u5206\u522b\u8003\u8651\u7279\u4ea7,\u6bd4\u5982\u7279\u4ea7$k$\u6709$a_k$\u4e2a,\u5206\u7ed9$n$\u4e2a\u4eba,\u5373\u4e3a$\\sum_{i=1}^nx_i=a_k(x_i\\geq 0)$\u7684\u89e3\u8ba1\u6570.\u8fd9\u548c\u67d0\u7ecf\u5178\u6a21\u578b\u5f88\u7c7b\u4f3c,\u6211\u4eec\u4ee4$y_i=x_i+1(y_i\\gt 0)$,\u5e26\u5165\u5f97\u5230$\\sum_{i=1}^n y_i=a_k+n(y\\gt 0)$.\u8fd9\u662f\u7ecf\u5178\u95ee\u9898,\u63d2\u677f\u6cd5\u89e3\u51b3\u5b83,$a_k+n$\u4e2a\u7403\u5206\u4e3a$n$\u4e2a\u975e\u7a7a\u7ec4,\u8003\u8651\u4ece\u9664\u4e86\u9996\u5c3e\u5916,\u4e24\u7403\u4e4b\u95f4\u7684\u7a7a\u9699(\u5171$n+a_k-1$\u4e2a),\u9009\u51fa$n-1$\u4e2a\u5373\u5212\u5206\u4e3a\u4e00\u7ec4,\u53d1\u73b0\u7ec4\u5408\u610f\u4e49\u548c\u95ee\u9898\u7684\u89e3\u662f\u610f\u4e49\u5bf9\u5e94\u7684,\u6240\u4ee5\u8fd9\u91cc\u7b54\u6848\u662f$\\binom{a_k+n-1}{n-1}$.  \n\n\u56de\u5230\u95ee\u9898,\u6211\u4eec\u8bbe$g(S)$\u4e3a\u62ff\u5230\u7279\u4ea7\u7684\u5fc5\u8981\u6761\u4ef6\u4e3a$x\\in S$\u7684\u5206\u914d\u65b9\u6848\u8ba1\u6570,\u5176\u4e2d$S\\subseteq \\{1,2,3\\dots n\\}$.\u6839\u636e\u4e4b\u524d\u7684\u5206\u6790,$g(S)=\\prod_{i=1}^m \\binom{|S|+a_i-1}{|S|-1}$,\u7279\u522b\u7684$g(\\phi)=0$(\u8fd9\u662f\u7b26\u5408\u5b9e\u9645\u610f\u4e49\u548c\u5f0f\u5b50\u7edf\u4e00\u7684\u552f\u4e00\u53ef\u80fd\u53d6\u503c.)  \n\u518d\u8bbe$f(S)$\u4e3a\u62ff\u5230\u7279\u4ea7\u7b49\u4ef7\u4e8e$x\\in S$\u7684\u5206\u914d\u65b9\u6848\u6570\u91cf,\u53ef\u4ee5\u53d1\u73b0,$g(S)=\\sum_{T\\subseteq S}f(T)$,\u5229\u7528\u5f00\u5934\u7684\u5f0f\u5b50\u53ef\u4ee5\u6c42\u51fa$f$\u4e86.  \n\n---\n\n\u6839\u636e\u4e0a\u6587\u5b9a\u4e49,\u7b54\u6848\u5373\u4e3a\n$$\nf(\\{1,2\\dots n\\})=\\sum_{S}(-1)^{n-|S|}g(S)\n$$\n\u4e8e\u662f\u5f97\u5230\u4f18\u79c0\u7684$O(m2^n)$\u505a\u6cd5(\u5927\u96fe).  \n\n\u6211\u4eec\u53d1\u73b0,\u4e0d\u8bba\u662f\u5b9e\u9645\u610f\u4e49\u8fd8\u662f\u8ba1\u7b97\u5f0f,$g(S)$\u5b9e\u9645\u4e0a\u662f\u4e2a\u5173\u4e8e$|S|$\u7684\u51fd\u6570,\u8bb0\u4e3a$G(|S|)$,\u6211\u4eec\u4e0d\u518d\u679a\u4e3e$S$\u800c\u662f\u679a\u4e3e$|S|$,\u8fd9\u6837\u7684\u5b50\u96c6\u6709$\\binom{n}{|S|}$\u4e2a.\n$ans=\\sum_{i=0}^n\\binom{n}{i}(-1)^{n-i}G(i)$.\n\n\u5f97\u5230\u4e86$O(V^2+nm)$\u7684\u4f18\u79c0\u505a\u6cd5,\u5176\u4e2d$V$\u662f$n+max(a_i)$,\u5bf9\u4e8e\u672c\u9898\u662f2000,\u8fd9\u90e8\u5206\u662f\u7528\u6765\u7b97\u7ec4\u5408\u6570\u7684.  \n\n\n\n----\n\n\u6254\u7a0b\u5e8f\u8dd1\u8def.\n```cpp\n#include <bits/stdc++.h>\nint read(){\n\tint x=0;char c;\n\tdo{c=getchar();}while(!isdigit(c));\n\tdo{x=x*10+c-'0';c=getchar();}while(isdigit(c));\n\treturn x;\n}\ntypedef long long Int;\nconst Int mod=Int(1e9)+7LL;\n// \u6211\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u6709\u8fd9\u4e1c\u897f...\n// \u53ef\u80fd\u662f\u7528\u6765\u7b97(-1)^(n-i)\u7684\u5427...\n// \u53cd\u6b63\u4e00\u4e2alogn\u7684\u56e0\u5b50\u4e0d\u81f3\u4e8e\u5361\u6389\u5bf9\u5427qwq.\nInt qpow(Int a,Int p){\n\tInt r=1; while(p){\n\t\tif(p&1) r=r*a%mod;\n\t\ta=a*a%mod; p>>=1;\n\t} return r;\n}\nconst int N=2000+10;\nint n,m,a[N],binom[N][N];\nint main(){\n\tn=read(); m=read();\n\tfor(int i=0;i<m;i++) a[i]=read();\n\n\tbinom[0][0]=1; for(int i=1;i<N;i++){\n\t\tbinom[i][0]=binom[i][i]=1;\n\t\tfor(int j=1;j<i;j++)\n\t\t\tbinom[i][j]=(binom[i-1][j]+binom[i-1][j-1])%mod;\n\t}\n\tInt ans=0; for(int i=1;i<=n;i++){\n\t\tInt tmp=1; //tmp->G(i)\n\t\tfor(int j=0;j<m;j++) tmp=tmp*binom[i+a[j]-1][i-1]%mod;\n\t\tans=(ans+tmp*qpow(mod-1,n-i)%mod*binom[n][i]%mod)%mod;\n\t} std::cout<<ans<<std::endl;\n\treturn 0;\n}\n\n```\n\n\n\n~~\u540e\u6392\u63a8\u8350\u5df2\u6545\u793e\u56e2minori\u7684\u4f5c\u54c1Eden*~~\n",
        "postTime": 1578725370,
        "uid": 15295,
        "name": "hehelego",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5e94\u8be5\u662f\u5bb9\u65a5\u539f\u7406\u3002\n\n\u7531\u4e8e\u8003\u8651\u6bcf\u4e2a\u7269\u54c1\u5206\u7ed9\u8c01\u4e0d\u5bb9\u6613\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5012\u7740\u8003\u8651\u3002\n\n\u7531\u4e8e\u5bf9\u6bcf\u4e2a\u4eba\u5206\u5230\u7684\u7279\u4ea7\u662f\u4ec0\u4e48\u6ca1\u6709\u8981\u6c42\uff0c\u6211\u4eec\u5c31\u8003\u8651\u81f3\u5c11 $x$ \u4e2a\u4eba\u6ca1\u6536\u5230\u7279\u4ea7\u7684\u65b9\u6848\u3002\n\n\u5c06\u6bcf\u4e2a\u7279\u4ea7\u5206\u5f00\u7b97\uff0c\u6700\u540e\u6c42\u4ed6\u4eec\u7684\u7d2f\u4e58\u5c31\u53ef\u4ee5\u4e86\u3002\n\n---\n\n\u5bf9\u4e8e\u7b2c $i$ \u4e2a\u7279\u4ea7\uff0c\u5b83\u7684\u65b9\u6848\u6570\u5c31\u662f\u5c06 $a_i$ \u4e2a\u7279\u4ea7\u5206\u7ed9 $n-x$ \u4e2a\u4eba\u3002\u6839\u636e\u63d2\u677f\u6cd5\uff0c\u5b83\u7684\u65b9\u6848\u6570\u5c31\u662f $C^{n-x-1}_{n-x+a_i-1}$\u3002\n\n\u53c8\u56e0\u4e3a\u6bcf\u4e2a\u4eba\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u5728\u5206\u914d\u65f6\uff0c\u8fd8\u8981\u8003\u8651\u9009\u62e9\u90a3 $x$ \u4e2a\u4eba\u7684\u65b9\u6848\uff0c\u4e5f\u5c31\u662f $C^x_n$\uff0c\u6240\u4ee5\u65b9\u6848\u6570\u5c31\u662f $C^{n-x-1}_{n-x+a_i-1} \\times C^x_n$\u3002\n\n\u6700\u540e\u7528\u5bb9\u65a5\u51cf\u6389\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\u5c31ok\u4e86\u3002\n\n---\n\n\u4ee3\u7801\u5982\u4e0b\uff0c$p_i$ \u662f\u5bb9\u65a5\u7cfb\u6570\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define rint register long long\n#define int long long\nusing namespace std;\ninline int read(){\n    int s=0,f=1;char c=getchar();\n    while(c<'0'||c>'9'){if(c=='-')f=0;c=getchar();}\n    while(c>='0'&&c<='9')s=(s<<1)+(s<<3)+c-48,c=getchar();\n    return f?s:-s;\n}\nconst int Mod=1e9+7;\nint n,m,a[1010],p[4010],ans;\nint fac[4010],inv[4010];\nint power(int a,int b){\n    int res=1;\n    while(b){\n        if(b&1) res=1ll*res*a%Mod;\n        a=1ll*a*a%Mod; b>>=1;\n    }\n    return res%Mod;\n}\nint C(int n,int m){\n    if(m>n) return 0;\n    if(n==0||m==0) return 1;\n    return 1ll*fac[n]*inv[n-m]%Mod*inv[m]%Mod;\n}\nsigned main(){\n    fac[1]=1; p[0]=1; p[1]=-1;\n    for(rint i=2;i<=4000;++i){\n        fac[i]=1ll*fac[i-1]*i%Mod;\n        p[i]=p[i-1]*(-1);\n    }\n    inv[4000]=power(fac[4000],Mod-2);\n    for(rint i=4000;i>1;--i) inv[i-1]=1ll*inv[i]*i%Mod;\n    n=read(); m=read();\n    for(rint i=1;i<=m;++i) a[i]=read();\n    for(rint k=0;k<=n;++k){\n        int cnt=1;\n        for(rint i=1;i<=m;++i)\n            cnt=1ll*cnt*C(a[i]+n-k-1,n-k-1)%Mod;\n        ans=1ll*(ans+p[k]*C(n,k)%Mod*cnt%Mod+Mod)%Mod;\n    }\n    printf(\"%lld\",ans);\n    return 0;\n}\n```",
        "postTime": 1584074712,
        "uid": 187259,
        "name": "v\u679c\u5b9dv",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": " \u8003\u8651$f(k)$\u4e3a$k$\u4e2a\u4eba\u4e00\u4e2a\u7279\u4ea7\u90fd\u6ca1\u6709\u5206\u5230\u7684\u65b9\u6848\u6570\uff0c\u6839\u636e\u5bb9\u65a5\u539f\u7406\u7b54\u6848\u4e3a\n\n------------\n$\\sum_{k=0}^{n-1}{(-1)^{k}\\binom{n}{k}}f(k)$\n\n------------\n\u90a3\u73b0\u5728\u8003\u8651$f(k)$\u5982\u4f55\u6c42\uff1a\u6b64\u65f6\u53ef\u4ee5\u5f53\u6210\u53e6\u5916$x$\u4e2a\u4eba\u5206\u6240\u6709\u7279\u4ea7\uff0c\u6b64\u65f6\u6bcf\u4e2a\u4eba\u5206\u5230\u7684\u53ef\u4ee5\u53d6$0$ (\u56e0\u4e3a\u5bb9\u65a5)\uff0c\u6240\u4ee5\n\n------------\n$f(k)=\\prod_{i=1}^{m}{\\binom{a_{i}+(n-k)-1}{(n-k)-1}}$\n\n------------\n  \n\u4e8e\u662f\u95ee\u9898\u5f97\u5230\u89e3\u51b3  \n\u6c42\u7ec4\u5408\u6570\u7684\u65b9\u6cd5:  \n\n- \u8d39\u9a6c\u5c0f\u5b9a\u7406$a^{-1}\\equiv a^{p-2}\\pmod{p}$\uff0c\u5176\u4e2d$p$\u4e3a\u8d28\u6570\n- $\\frac{1}{i! }\\equiv \\frac{i+1}{(i+1)!}\\pmod{p}$\u6240\u4ee5\u53ef\u4ee5\u7ebf\u6027\u9884\u5904\u7406\u6c42\u51fa$i!$\u4e0e$n!$\u7684\u9006\u5143\uff0c\u4e8e\u662f\u53ef\u4ee5\u8ba1\u7b97\u7ec4\u5408\u6570\n\n------------\n \n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#define ll long long\nusing namespace std;\nll fac[10010],inv[10010],mod=1e9+7;\nll power(ll a,ll b)\n{\n\tll ans=1%mod;a%=mod;\n\tfor (;b;b>>=1)\n\t{\n\t\tif (b&1) ans=ans*a%mod;\n\t\ta=a*a%mod;\n\t}\n\treturn ans;\n}\nll a[10010],n,m;\nll C(ll n,ll m)\n{\n\treturn (fac[n]*inv[n-m]%mod)*inv[m]%mod;\n}\ninline ll read()\n{\n    ll x=0,f=1;char ch;\n\tdo{ch=getchar();if(ch=='-')f=-1;}while(ch>'9'||ch<'0');\n\tdo{x=x*10+ch-'0';ch=getchar();}while(ch>='0'&&ch<='9');\t\n\treturn f*x;\n}\nll ans=0,f[10010];\nint main()\n{\n\tfac[0]=1;\n    for (int i=1;i<=10000;i++) fac[i]=fac[i-1]*i%mod;\n    inv[10000]=power(fac[10000],mod-2);\n    for (int i=9999;i>=0;i--) inv[i]=inv[i+1]*(i+1)%mod;\n    inv[0]=1;\n    n=read();m=read();\n\tfor (int i=1;i<=m;i++)a[i]=read();\n\tfor (int i=0,k=1;i<n;i++,k=-k)\n    {\n    \tf[i]=1;\n    \tfor (int j=1;j<=m;j++) f[i]=f[i]*C(a[j]+n-i-1,n-i-1)%mod;\n\t\tans=(ans+k*C(n,i)*f[i]+mod)%mod;\n    }\n    cout<<(ans+mod)%mod<<endl;       \n}\n```\n",
        "postTime": 1571744106,
        "uid": 16035,
        "name": "huangxuhan",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "\u9898\u610f\u8f6c\u5316\uff1a\u7ed9\u5b9a $n$ \u4e2a\u6709\u6807\u53f7\u7684\u76d2\u5b50\uff08\u540c\u5b66\uff09\u548c $m$ \u79cd\u5171 $\\displaystyle \\sum_{i=1}^m a_i$ \u4e2a\u65e0\u6807\u53f7\u7684\u5c0f\u7403\uff08\u7279\u4ea7\uff09\uff0c\u8981\u6c42\u6bcf\u4e2a\u76d2\u5b50\u4e0d\u4e3a\u7a7a\u3002\n\n\u8003\u8651\u5230\u76f4\u63a5\u8ba1\u7b97\u4e0d\u4e3a\u7a7a\u7684\u5408\u6cd5\u7684\u592a\u9ebb\u70e6\u4e86\uff0c\u4e8e\u662f\u5148\u8ba1\u7b97\u6240\u6709\u5408\u6cd5\u65b9\u6848\uff0c\u518d\u51cf\u53bb\u6709\u7a7a\u7f3a\u7684\u7b54\u6848\uff0c\u5c31\u662f\u6211\u4eec\u95ee\u9898\u7684\u7b54\u6848\u4e86\u3002\n\n### \u5904\u7406\u524d\u534a\u90e8\u5206\n\n\u9996\u5148\u5f15\u5165\u5341\u4e8c\u91cd\u8ba1\u6570\u6cd5\u3002\u76d2\u5b50\u548c\u5c0f\u7403\u5747\u4e3a\u6709\u6807\u53f7\uff0c\u5e76\u4e14\u8981\u6c42\u6bcf\u4e2a\u76d2\u5b50\u4e0d\u4e3a\u7a7a\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $a_i$\uff0c\u6bcf\u4e00\u95ee\u90fd\u662f [\u5341\u4e8c\u91cd\u8ba1\u6570\u6cd5](https://www.luogu.com.cn/problem/P5824) \u7684\u7b2c $\\text{IX}$ \u95ee\u3002\u5bf9\u4e8e $a_i$ \u6765\u8bf4\uff0c\u5b83\u7684\u8d21\u732e\u662f $C_{n+a_i-1}^{n-1}$\u3002\u4e8e\u662f\u524d\u534a\u90e8\u5206\u7684\u7b54\u6848\u5c31\u662f\uff1a\n\n$$\\displaystyle \\prod_{i=1}^m C_{n+a_i-1}^{n-1}=\\sum_{i=0}^0 (-1)^i C_{n}^i \\prod_{j=1}^m C_{n+a_j-i-1}^{n-i-1}$$\n\n### \u5904\u7406\u540e\u534a\u90e8\u5206\n\n\u5982\u679c\u76d2\u5b50\u6709\u7a7a\uff0c\u5982\u4f55\u5904\u7406\uff1f\u4e0d\u80fd\u5f88\u597d\u7684\u5904\u7406\u7684\u539f\u56e0\u4e4b\u4e00\u5c31\u662f\u6211\u4eec\u65e0\u6cd5\u786e\u5b9a\u6709\u591a\u5c11\u4e2a\u76d2\u5b50\u662f\u7a7a\u7684\u3002\u4e8e\u662f\u679a\u4e3e\u6709\u591a\u5c11\u4e2a\u76d2\u5b50\u4e3a\u7a7a\u3002\u5047\u8bbe\u73b0\u5728\u6709 $p$ \u4e2a\u76d2\u5b50**\u662f**\u7a7a\u7684\uff0c\u539f\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u5728 $n-p$ \u4e2a**\u6709\u6807\u53f7**\u7684\u76d2\u5b50\u4e2d\uff0c\u653e\u5165\u5171 $m$ \u79cd\u5171 $\\displaystyle \\sum_{i=1}^m a_i$ \u4e2a\u65e0\u6807\u53f7\u7684\u5c0f\u7403\u3002\u53c8\u5206\u522b\u8003\u8651\u6bcf\u4e00\u4e2a $a_i$\uff0c\u5176\u5b9e\u8fd9\u53c8\u662f\u524d\u534a\u90e8\u5206\u7684\u95ee\u9898\u3002\u53c8\u56e0\u4e3a\u6709 $p$ \u4e2a**\u6709\u6807\u53f7**\u76d2\u5b50\u662f\u7a7a\u7684\uff0c\u8fd9\u6837\u7684\u60c5\u51b5\u6709 $C_{n}^i$ \u79cd\uff0c\u6240\u4ee5\u5bf9\u4e8e $p$ \u4e2a\u76d2\u5b50\u662f\u7a7a\u7684\u7684\u60c5\u51b5\u8fd8\u8981\u4e58\u4e0a $C_n^i$\u3002\u6ce8\u610f\u8fd9\u90e8\u5206\u7684\u7b54\u6848\u9700\u8981\u5bb9\u65a5\uff0c\u6709\u76d2\u5b50\u662f\u7a7a\u7684\u7684\u60c5\u51b5\u4e00\u5171\u5305\u542b\u53ea\u6709 $1$ \u4e2a\u76d2\u5b50\u662f\u7a7a\u7684\uff0c\u51cf\u53bb $2$ \u4e2a\u76d2\u5b50\u662f\u7a7a\u7684\uff0c\u518d\u52a0\u4e0a $3$ \u4e2a\u76d2\u5b50\u662f\u7a7a\u7684\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u8fd9\u91cc\u9700\u8981**\u52a0\u4e0a**\u7684\u8d21\u732e\u5373\u4e3a\uff1a\n\n$$\\displaystyle \\sum_{i=1}^n (-1)^i C_n^i \\prod_{j=1}^m C_{n+a_j-i-1}^{n-i-1}$$\n\n---\n\n\u524d\u534a\u90e8\u5206\u5df2\u7ecf\u5199\u6210\u548c\u540e\u534a\u90e8\u5206\u7684\u5f0f\u5b50\u5f62\u72b6\u4e00\u81f4\u4e86\uff0c\u53ef\u4ee5\u76f4\u63a5\u5408\u5e76\u3002\u7b54\u6848\u5373\u4e3a\uff1a\n\n$$\\displaystyle \\sum_{i=0}^n (-1)^i C_n^i \\prod_{j=1}^m C_{n+a_j-i-1}^{n-i-1}$$\n\n\u53ef\u4ee5\u9884\u5904\u7406\u7ec4\u5408\u6570\uff0c$O(n^2)$ \u89e3\u51b3\u3002\uff08\u5047\u8bbe $n,m$ \u540c\u9636\uff09\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst LL MOD=1000000007;\nLL C[2005][2005],n,m,a[1005];\nint main(){\n\tC[0][0]=1;\n\tfor(LL i=1;i<=2000;++i)\tfor(LL j=0;j<=i;++j)\tC[i][j]=(C[i-1][j]+((j==0)?0:C[i-1][j-1]))%MOD;\n\tscanf(\"%lld %lld\",&n,&m);\n\tfor(LL i=1;i<=m;++i)\tscanf(\"%lld\",&a[i]);\n\tLL k=1,ans=0;\n\tfor(LL i=0;i<n;++i)\n\t{\n\t\tLL p=C[n][i];\n\t\tfor(LL j=1;j<=m;++j)\tp*=C[n+a[j]-i-1][n-i-1],p%=MOD;\n\t\tans+=k*p;\n\t\tans%=MOD;\n\t\tk=-k;\n\t}\n\tprintf(\"%lld\",(ans%MOD+MOD)%MOD);\n\treturn 0;\n}\n```",
        "postTime": 1596091052,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5505 \u3010 [JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "### \u9898\u610f\n\n\u6709$n$\u79cd\u7279\u4ea7\uff0c\u7b2c$i$\u79cd\u7279\u4ea7\u6709$a_i$\u4e2a\u3002\u8981\u628a\u8fd9\u4e9b\u7279\u4ea7\u5206\u7ed9$m$\u4e2a\u4eba\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u4eba\u90fd\u81f3\u5c11\u5206\u5f97\u4e00\u4e2a\u7279\u4ea7\uff0c\u6c42\u5206\u6cd5\u79cd\u6570\u3002\n\n$\\texttt{Data Range:}n,m,a_i\\leq10^3$\n\n### \u9898\u89e3\n\n\u597d\u4e45\u6ca1\u6709\u89c1\u8fc7\u5982\u6b64\u5c0f\u6e05\u65b0\u7684\u5bb9\u65a5\u9898\u4e86qwq\n\n\u5148\u8003\u8651\u6ca1\u6709\u6bcf\u4e2a\u4eba\u81f3\u5c11\u4e00\u4e2a\u7684\u9650\u5236\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f\u53ef\u91cd\u7ec4\u5408\uff0c\u4e5f\u5c31\u662f\n\n$$f(n)=\\prod\\limits_{i=1}^{m}C_{a_i+n-1}^{n-1}$$\n\n\u7136\u540e\u65e2\u7136\u6709\u4e86\u8fd9\u4e2a\u9650\u5236\u4e0d\u592a\u597d\u5904\u7406\u7684\u8bdd\u3002\u90a3\u4e48\u5bb9\u65a5\u505a\u80af\u5b9a\u53ef\u4ee5\u3002\n\n\u8003\u8651\u81f3\u5c11\u6709$t$\u4e2a\u540c\u5b66\u6ca1\u6709\u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u94a6\u5b9a\u524d$t$\u4e2a\u540c\u5b66\u6ca1\u6709\u7279\u4ea7\uff0c\u540e\u9762\u7684\u6709\u4e0d\u6709\u90fd\u65e0\u6240\u8c13\uff0c\u56e0\u4e3a\u8fd9\u91cc\u6c42\u7684\u662f**\u81f3\u5c11**$t$\u4e2a\u540c\u5b66\u6ca1\u6709\uff0c\u6240\u4ee5\u7b54\u6848\u4e3a$f(n-t)$\n\u3002\n\n\u4e8e\u662f\u53ef\u4ee5\u5bb9\u65a5\u51fa\u7b54\u6848\uff0c\u5c31\u662f\u8fd9\u4e2a\uff1a\n\n$$\\sum\\limits_{i=0}^n(-1)^if(n-i)$$\n\n### \u4ee3\u7801\n\n\u8dd1\u7684\u8fd8\u662f\u633a\u5feb\u7684\u554aqwq\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef int ll;\ntypedef long long int li;\nconst ll MAXN=5e3+51,MOD=1e9+7;\nll cnt,ccnt,maxn,res,coeff;\nll fact[MAXN],finv[MAXN],num[MAXN];\ninline ll read()\n{\n    register ll num=0,neg=1;\n    register char ch=getchar();\n    while(!isdigit(ch)&&ch!='-')\n    {\n        ch=getchar();\n    }\n    if(ch=='-')\n    {\n        neg=-1;\n        ch=getchar();\n    }\n    while(isdigit(ch))\n    {\n        num=(num<<3)+(num<<1)+(ch-'0');\n        ch=getchar();\n    }\n    return num*neg;\n} \ninline ll qpow(ll base,ll exponent)\n{\n\tll res=1;\n\twhile(exponent)\n\t{\n\t\tif(exponent&1)\n\t\t{\n\t\t\tres=(li)res*base%MOD; \n\t\t}\n\t\tbase=(li)base*base%MOD,exponent>>=1;\n\t}\n\treturn res;\n} \ninline void setup(ll cnt)\n{\n\tfact[0]=fact[1]=finv[0]=1;\n\tfor(register int i=2;i<=cnt;i++)\n\t{\n\t\tfact[i]=(li)fact[i-1]*i%MOD;\n\t}\n\tfinv[cnt]=qpow(fact[cnt],MOD-2);\n\tfor(register int i=cnt-1;i;i--)\n\t{\n\t\tfinv[i]=(li)finv[i+1]*(i+1)%MOD;\n\t}\n}\ninline ll comb(ll m,ll n)\n{\n\treturn (li)fact[m]*finv[n]%MOD*finv[m-n]%MOD;\n}\nint main()\n{\n\tcnt=read(),ccnt=read();\n\tfor(register int i=0;i<ccnt;i++)\n\t{\n\t\tnum[i]=read(),maxn=max(maxn,num[i]); \n\t}\n\tsetup(cnt+maxn);\n\tfor(register int i=0;i<=cnt;i++)\n\t{\n\t\tcoeff=1;\n\t\tfor(register int j=0;j<ccnt;j++)\n\t\t{\n\t\t\tcoeff=(li)coeff*comb(num[j]+cnt-i-1,cnt-i-1)%MOD;\n\t\t}\n\t\tcoeff=(li)coeff*comb(cnt,i)%MOD;\n\t\tres=(res+((i&1)?MOD-coeff:coeff))%MOD;\n\t}\n\tprintf(\"%d\",res);\n}\n```",
        "postTime": 1565446068,
        "uid": 60990,
        "name": "Karry5307",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5505 \u3010[JSOI2011]\u5206\u7279\u4ea7\u3011"
    },
    {
        "content": "[\u9898\u9762](https://www.lydsy.com/JudgeOnline/problem.php?id=4710)\n\n\u6b63\u5f0f\u5f00\u59cb\u5b66\u4e60\u5bb9\u65a5\uff01\n\n\u8fd9\u9053\u9898\u53ef\u4ee5\u5f53\u505a\u5bb9\u65a5\u7684\u6a21\u677f\u9898\u4e86\u5427\uff01\u8bb0$f[i]$\u8868\u793a\u81f3\u591a\u6709$i$\u4e2a\u4eba\u83b7\u5f97\u4e86\u7279\u4ea7\u7684\u65b9\u6848\u6570\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u9694\u677f\u6cd5\u76f4\u63a5\u5f97\u51fa\u3002\u7136\u540e\u6211\u4eec\u53d1\u73b0\u56e0\u4e3a\u662f\u81f3\u591a$i$\u4e2a\u4eba\uff0c\u800c\u6211\u4eec\u8981\u6c42\u7684\u6070\u597d$n$\u4e2a\u4eba\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u901a\u8fc7\u5bb9\u65a5\u539f\u7406\u6c42\u51fa\u521a\u597d$n$\u4e2a\u4eba\u6709\u7279\u4ea7\u7684\u65b9\u6848\u6570\u3002\u60f3\u4e00\u60f3\uff0c\u6211\u4eec\u52a0\u4e0a\u4e86$f[n]$\u4e2a\u65b9\u6848\u6570\uff0c\u663e\u7136\u8fd9\u91cc\u6709\u4e00\u6279\u65b9\u6848\u662f\u5c0f\u4e8e\u7b49\u4e8e$n-1$\u4e2a\u4eba\u9009\u62e9\u7684\u3002\u90a3\u4e48\u6211\u4eec\u5c31\u51cf\u53bb$C(n,n-1)*f[n-1]$\u7684\u65b9\u6848\u6570\uff0c\u540c\u7406\uff0c\u8fd9\u91cc\u591a\u51cf\u53bb\u4e86\u5c0f\u4e8e\u7b49\u4e8e$n-2$\u4e2a\u4eba\u9009\u62e9\u7684\u3002\u56e0\u6b64\uff0c\u4e0d\u65ad\u52a0\u51cf\u4e0b\u53bb\uff0c\u5c31\u80fd\u5f97\u51fa\u6700\u7ec8\u7684\u7b54\u6848\u3002\n\ncode:\n```\n//2018.9.6 by ljz\n#include<bits/stdc++.h>\nusing namespace std;\n#define res register int\n#define LL long long\n#define inf 0x3f3f3f3f\n#define eps 1e-15\ninline int read(){\n    res s=0;\n    bool w=0;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch=='-')w=1;ch=getchar();}\n    while(ch>='0'&&ch<='9')s=s*10+ch-'0',ch=getchar();\n    return w?-s:s;\n}\ninline void _swap(res &x,res &y){\n    x^=y^=x^=y;\n}\ninline int _abs(const res &x){\n    return x>0?x:-x;\n}\ninline int _max(const res &x,const res &y){\n    return x>y?x:y;\n}\ninline int _min(const res &x,const res &y){\n    return x<y?x:y;\n}\nconst int N=1e4+10;\nconst int kcz=1e9+7;\nnamespace MAIN{\n    int n,m;\n    int inv[N],fac[N];\n    inline void pre(){\n        inv[0]=inv[1]=fac[0]=fac[1]=1;\n        for(res i=2;i<=N-10;i++)fac[i]=(LL)fac[i-1]*i%kcz,inv[i]=(LL)(kcz-kcz/i)*inv[kcz%i]%kcz;\n        for(res i=2;i<=N-10;i++)inv[i]=(LL)inv[i-1]*inv[i]%kcz;\n    }\n    inline int C(res x,res y){\n        return (LL)fac[x]*inv[y]%kcz*inv[x-y]%kcz;\n    }\n    int f[N];\n    int ans;\n    inline void add(res &x,const res &y){\n        x+=y;\n        x>kcz?x=x%kcz:1;\n        x<0?x=(x%kcz+kcz)%kcz:1;\n    }\n    inline void MAIN(){\n        pre();\n        n=read(),m=read();\n        for(res i=1;i<=n;i++)f[i]=1;\n        for(res i=1;i<=m;i++){\n            res x=read();\n            for(res j=1;j<=n;j++)\n                f[j]=(LL)f[j]*C(j+x-1,j-1)%kcz;\n        }\n        for(res i=n,cur=0;i;i--,cur^=1)\n            if(cur)add(ans,kcz-(LL)f[i]*C(n,i)%kcz);\n            else add(ans,(LL)f[i]*C(n,i)%kcz);\n        printf(\"%d\\n\",(ans%kcz+kcz)%kcz);\n    }\n}\nint main(){\n    MAIN::MAIN();\n    return 0;\n}\n```",
        "postTime": 1536226045,
        "uid": 32878,
        "name": "foreverlasting",
        "ccfLevel": 7,
        "title": "\u3010JSOI2011\u3011\u5206\u7279\u4ea7"
    }
]
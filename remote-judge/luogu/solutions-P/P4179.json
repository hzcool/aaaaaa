[
    {
        "content": "#### [\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.org/problem/P4179)\nemm...\u5f53\u6211\u770b\u5230\u8fd9\u4e2a\u9898\u7684\u65f6\u5019\uff0c\u7b2c\u4e00\u53cd\u5e94\u5c31\u662f\u6253\u8868\uff0c\u4e8e\u662f\u5c31\u5f00\u59cb\u4e86\u6f2b\u957f\u7684\u63a8\u7b97\u4e4b\u65c5\u3002\u3002\u3002\n\n\u7b2c\u4e00\u6b65\u6570\u683c\u5b50\u7684\u4e2a\u6570\uff0c\u6570\u4e86\u5f88\u4e45\u63a8\u51fa\u4e00\u4e2a\u5f0f\u5b50\uff1a$4* a[i-1]+2* (i-1)$\n\n\u53ef\u662f\u6570\u5b8c\u4e4b\u540e\u53d1\u73b0\u8fd9\u6837\u6ca1\u7528\u554a\uff0c\u8fd8\u4e0d\u4e00\u5b9a\u662f\u5bf9\u7684\uff0c\u4e8e\u662f\u6253\u6807\u601d\u8def\u6109\u5feb\u5730GG\u3002\uff08~~\u4e5f\u8bb8\u53ef\u4ee5\u53ea\u662f\u6211\u6ca1\u63a8\u51fa\u6765~~\uff09\n\n\u4e8e\u662f\u6211\u5c31\u53d1\u73b0\u6570\u91cf\u4e0a\u884c\u4e0d\u901a\uff0c\u4ece\u5f62\u72b6\u4e0a\u603b\u53ef\u4ee5\u5427\u3002\u4e8e\u662f\u63a8\u7740\u63a8\u7740\u5c31\u53d1\u73b0\u4e71\u4e03\u516b\u7cdf\u7684\u56fe\u5f62\u662f\u53ef\u4ee5\u8f6c\u5316\u6210\u4e3a\u4e00\u4e2a\u4e2d\u5b66\u6570\u5b66\u9898\u3002\n\n\u90a3\u4e48\u89c4\u5f8b\u662f\u4ec0\u4e48\u5462\uff1f\u4e3e\u4e2a\u4f8b\u5b50\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5jj9hob0.png?x-oss-process=image/resize,m_lfit,h_170,w_225)![](https://cdn.luogu.com.cn/upload/image_hosting/c0ujbvxq.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u4f60\u8fd8\u6ca1\u6709\u53d1\u73b0\u89c4\u5f8b\u5417\uff1f\u90a3\u5c31\u518d\u6765\u4e00\u7ec4\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/uv7cjqp9.png?x-oss-process=image/resize,m_lfit,h_170,w_225)![](https://cdn.luogu.com.cn/upload/image_hosting/2e344d3p.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u6b64\u65f6\uff0c\u4e0d\u96be\u53d1\u73b0\u89c4\u5f8b\uff0c\u5730\u56fe\u7684\u5de6\u4e0a\u89d2\u4ee5\u53ca\u53f3\u4e0a\u89d2\u7684\u7a7a\uff0c\u4ee5\u53ca\u5de6\u4e0b\u548c\u53f3\u4e0b\u7684\u5730\u6d1e\u662f\u4e0a\u4e00\u4e2a\u7684\u56fe\u5f62\u3002\u8fd9\u6837\u5206\u5f62\u5c31\u6109\u5feb\u7684\u5b8c\u6210\u4e86\u3002\n\n\u6b64\u65f6\u7a81\u7136\u53d1\u73b0\uff0c\u6ca1\u6709\u6570\u636e\u8303\u56f4\uff0c\u597d\u5427,\u6211\u9ed8\u9ed8\u7684\u6253\u5f00\u4e86bzoj1817,\u53d1\u73b0\u4e86\u6570\u636e\u8303\u56f4\uff08$n\u226412,0\u2264\u03b1<90$\uff09\uff08\u8fd8\u65e0\u803b\u7684\u8bf7\u7ba1\u7406\u5458\u52a0\u4e00\u4e0b\u6570\u636e\u8303\u56f4\uff09\u90a3\u4e48\u6709\u4e86\u6570\u636e\u8303\u56f4\u5c31\u53ef\u4ee5\u7b97\u51fa\u6700\u5927\u8fb9\u957f\uff0c\u53ca$2^{12}-1=4095$\uff0c\u6240\u4ee5\u5c31\u53ef\u4ee5\u8f7b\u677e\u7684\u7528\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4\u5b58\u4e0b\u6765\u3002\n\n\u63a5\u4e0b\u6765\u5e94\u8be5\u5c31\u662f\u8003\u8651\u6c34\u5728\u65b9\u683c\u4e2d\u7684\u4f4d\u7f6e\u4e86\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6bzrtkmi.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\u9876\u90e8\u7684\u4e00\u4e2a\u683c\u5b50\u7684\u6c34\u5728\u683c\u5b50\u4e2d\u5927\u6982\u662f\u8fd9\u6837\u7684\uff0c\u518d\u6839\u636e\u9898\u610f\u53ef\u770b\u51fa\uff0c\u53ef\u4ee5\u63a8\u51fa\u4e3a\u57fa\u51c6\u9ad8\u5ea6\u4e3acos\u03b1\uff08~~\u8fd9\u662f\u4e09\u89d2\u51fd\u6570\uff0c\u4e0d\u8981\u95ee\u6211\u4e3a\u4ec0\u4e48~~\uff09\uff0c\u4f46\u662f\u4e2d\u95f4\u7684\u600e\u4e48\u529e\u5462\uff1f\u5176\u5b9e\u4e5f\u5c31\u662f\u4ece\u5468\u56f4\u56db\u4e2a\u683c\u5b50\u76f8\u4e92\u8fde\u901a\u4e2d\u63a8\u5bfc\u800c\u6765,\u60f3\u5230\u5468\u56f4\u7684\u56db\u4e2a\u683c\u5b50\u5c31\u60f3\u5230\u4e86\u641c\u7d22\uff08\u5efa\u8bae\u7528dfs\uff0c\u611f\u89c9bfs\u4f1a\u7206\u7a7a\u95f4\uff0c\u6bd5\u7adf$n\u226412$\uff09,\u90a3\u4e48\u53ea\u9700\u4ece\u56db\u4e2a\u65b9\u5411\uff08\u5de6\u4e0a\uff0c\u53f3\u4e0a\uff0c\u5de6\u4e0b\uff0c\u53f3\u4e0b\uff09\u63a8\u51fa\u5373\u53ef\u3002\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff08~~\u53c8\u8981\u770b\u56fe~~\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ar18kg8x.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5c31\u4e0d\u96be\u770b\u51fa\u51c6\u9ad8\u4e3ah+sin\u03b1\uff08\u5de6\u4e0b\uff09\uff0c\u81f3\u4e8e\u5269\u4e0b\u7684\u4e09\u4e2a\u65b9\u5411\u5c31\u4e0d\u753b\u56fe\u4e86\uff0c\n\u76f4\u63a5\u544a\u8bc9\u5927\u5bb6\u51c6\u9ad8\u5427\uff0c\u5206\u522b\u662f\uff1a$h+cos\u03b1$\uff08\u53f3\u4e0b\uff09\uff0c$h-sin\u03b1$\uff08\u5de6\u4e0a\uff09\uff0c$h-cos\u03b1$\uff08\u53f3\u4e0a\uff09\uff0c\n\u5176\u5b9e\u5927\u5bb6\u5b66\u8fc7\u4e09\u89d2\u51fd\u6570\u7684\u90fd\u77e5\u9053\u5427\uff0c\u800c\u4e14\u90fd\u5e94\u8be5\u80fd\u81ea\u5df1\u63a8\u51fa\u6765\uff08\u4e0d\u4f1a\u63a8\u7684\u4e5f\u4e0d\u8981\u614c\uff0c\u6bd5\u7adf\u6211\u4e5f\u63a8\u4e86\u597d\u4e45\uff09\n\n\u77e5\u9053\u51c6\u9ad8\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u9762\u79ef\u5c31\u53ef\u4ee5\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff08\u4e0e$cos\u03b1,sin\u03b1$\uff09\n\n\u5206\u4e09\u6bb5\u540e\u6c42\u89e3\uff0c\u7136\u540e\u8fd9\u4e2a\u9898\u5c31\u5e94\u8be5\u53ef\u4ee5\u901a\u8fc7\u641c\u7d22\u505a\u51fa\u6765\u4e86\n\n\u6e29\u99a8\u63d0\u793a\uff1a\u4e3a\u4e86\u4fdd\u8bc1\u7cbe\u5ea6\uff0c\u6700\u540e\u5728\u8fdb\u884c\u9664\u6cd5\u8fd0\u7b97\uff0c\u5c0f\u6570\u70b9\u540e\u53d6\u516d\u4f4d\u54e6~~\n\n\u6700\u540e\u5c31\u662f\u4f60\u4eec\u60f3\u8981\u7684AC\u4ee3\u7801\u4e86\uff1a\n```cpp\n#include<cstdio>\n#include<cmath>\n#include<iostream>\nusing namespace std;\nint n,jd,len=1;\ndouble sinn,coss,sum,ans;\nconst double p=4.0*atan(1.0);\nbool vis[4100][4100],mapp[4100][4100],hole[4100][4100];\ndouble min(double i,double j){return i<j?i:j;}\nbool rule(int x,int y){\n\tif(x>=1&&y>=1&&x<=len&&y<=len&&!vis[x][y]&&mapp[x][y])return 0;\n\treturn 1;\n}\nvoid dfs(int x,int y,double h){\n\tif(h<1e-10||rule(x,y))return;\n\tvis[x][y]=1;\n\th=min(sum,h);\n\tif(jd==0)ans++;\n\telse{\n\t\tdouble s=sinn,c=coss;\n\t\tif(jd>45)swap(s,c);\n\t\tif(h<=s)ans+=h*h;\n\t\telse if(h<=c)ans+=(2.0*h-s)*s;\n\t\telse ans+=2.0*s*c-(s+c-h)*(s+c-h); \n\t}\n\tdfs(x+1,y,h+coss),dfs(x,y+1,h+sinn);\n\tdfs(x-1,y,h-coss),dfs(x,y-1,h-sinn);\n\treturn;\n}\nint main(){\n\tscanf(\"%d%d\",&n,&jd);\n\tmapp[1][1]=1;\n\tfor(int k=1;k<n;k++){\n\t\tfor(int i=1;i<=len;i++){\n\t\t\tfor(int j=1;j<=len;j++){\n\t\t\t\thole[len-j+1][i]=hole[j][len+1+len-i+1]=!mapp[i][j];\n\t\t\t\thole[len+1+i][j]=hole[len+1+i][len+j+1]=mapp[i][j];\n\t\t\t}\n\t\t}\n\t\tfor(int i=1;i<=2*len+1;i++)hole[len+1][i]=1;\n\t\tfor(int i=1;i<=len;i++)hole[i][len+1]=1;\n\t\tlen*=2,len++;\n\t\tfor(int i=1;i<=len;i++){\n\t\t\tfor(int j=1;j<=len;j++)mapp[i][j]=hole[i][j];\n\t\t}\t\n\t}\n\tdouble angle=(1.0*jd*p/180);\n\tsinn=sin(angle);\n\tcoss=cos(angle);\n\tsum=coss+sinn;\n\tfor(int i=1;i<=len;i++)dfs(1,i,coss);\n\tif(jd>0)ans/=(2.0*sinn*coss);\n\tprintf(\"%0.6lf\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1569297383,
        "uid": 129169,
        "name": "sounds_666",
        "ccfLevel": 0,
        "title": "P4179 [Cqoi2010]\u9f39\u9f20"
    },
    {
        "content": "\u5bf9\u4e8e\u4e00\u4e2a $n$ \u9636\u66f2\u7ebf\uff0c\u5176\u8fb9\u957f\u662f $O(2^n)$ \u7ea7\u522b\u7684\uff0c\u76f4\u63a5\u66b4\u529b\u9884\u5904\u7406\u5373\u53ef\u3002\n\n\u5bf9\u4e8e $\\alpha=0$ \u7684\u60c5\u51b5\uff0c\u76f4\u63a5\u7279\u5224\u3002\u63a5\u4e0b\u6765\u5c31\u662f\u91cd\u70b9\u4e86\uff0c\u6211\u4eec\u8bbe\u4e00\u4e2a\u65b9\u683c\u4e2d\u6c34\u9762\u5230\u5176\u5e95\u90e8\u7684\u9876\u70b9\u7684\u8ddd\u79bb\u4e3a $h$\uff0c\u90a3\u4e48\u5bf9\u4e8e\u5de6\u4e0b\u89d2\u7684\u65b9\u683c\uff0c\u8fd9\u4e2a\u8ddd\u79bb\u5c31\u4f1a\u53d8\u4e3a $h+\\sin\\alpha$\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xlek6cjb.png)\n\n\u540c\u7406\u53ef\u4ee5\u63a8\u5f97\uff0c\u53f3\u4e0b\u89d2\u7684\u8ddd\u79bb\u53d8\u4e3a $h+\\cos\\alpha$\uff0c\u5de6\u4e0a\u89d2\u8ddd\u79bb\u4e3a $h-\\cos\\alpha$\uff0c\u53f3\u4e0a\u89d2\u8ddd\u79bb\u4e3a $h-\\sin\\alpha$\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u53ea\u8981\u6839\u636e $h$ \u8ba1\u7b97\u8fd9\u4e2a\u65b9\u5757\u5185\u88ab\u8986\u76d6\u7684\u9762\u79ef\u5c31\u53ef\u4ee5\u4e86\u3002\u5f53 $\\alpha>45\\degree$ \u65f6\uff0c\u628a\u56fe\u5f62\u8f74\u5bf9\u79f0\u4e00\u4e0b\u5c31\u597d\u4e86\uff0c\u6211\u4eec\u53ea\u8981\u8003\u8651 $\\alpha\\le 45\\degree$ \u7684\u60c5\u51b5\u3002\n\n\u5f53 $h\\le \\sin\\alpha$ \u65f6\uff0c\u663e\u7136\u6709 $S=\\dfrac{h^2}{2\\sin\\alpha\\cos\\alpha}$\uff1b\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fn4ojphy.png)\n\n\u5f53 $\\sin\\alpha<h\\le\\cos\\alpha$ \u65f6\uff0c$S=\\dfrac{\\sin\\alpha}{2\\cos\\alpha}+\\dfrac{h-\\sin\\alpha}{\\cos\\alpha}$\uff1b\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/51rh4x2j.png)\n\n\u5f53 $h>\\cos\\alpha$ \u65f6\uff0c\u548c\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e00\u6837\uff0c$S=1-\\dfrac{(\\sin\\alpha+\\cos\\alpha-h)^2}{2\\sin\\alpha\\cos\\alpha}$\u3002\n\n\u4e8e\u662f\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u8981\u6ce8\u610f\u7cbe\u5ea6\u95ee\u9898\uff0c\u628a $2\\sin\\alpha\\cos\\alpha$ \u63d0\u5230\u6700\u5916\u9762\u9664\uff0c\u4e0d\u7136\u4f1a WA \u4e00\u4e2a\u70b9\u3002\n\n\u603b\u7ed3\uff1a\u9047\u5230\u8fd9\u7c7b\u770b\u4e0a\u53bb\u5f88\u96be\u7684\u9898\u7684\u65f6\u5019\u8981\u51b7\u9759\u5206\u6790\uff0c\u9898\u76ee\u5f80\u5f80\u6bd4\u770b\u4e0a\u53bb\u8981\u7b80\u5355\u5f88\u591a\u3002\n\nCode:\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\nusing namespace std ;\nconst double pi = acos (-1.0) ;\nconst int MAXN = 5e3 + 10 ;\nint n , len , P ;\nbool vis[MAXN][MAXN] , a[MAXN][MAXN] , b[MAXN][MAXN] ;\ndouble A , sn , cs , ans ;\nvoid dfs (int x , int y , double h) {\n\tif (h <= 0 || x < 1 || y < 1 || x > len || y > len || vis[x][y] || !a[x][y]) return ;\n\th = min (h , sn + cs) ; vis[x][y] = 1 ;\n\tif (!P) ans++ ;\n\telse {\n\t\tdouble s = sn , c = cs ;\n\t\tif (P > 45) swap (s , c) ;\n\t\tif (h <= s) ans += h * h ;\n\t\telse if (h <= c) ans += (2 * h - s) * s ;\n\t\telse ans += (2.0 * s * c) - (s + c - h) * (s + c - h) ;\n\t} \n\tdfs (x + 1 , y , h + cs) , dfs (x - 1 , y , h - cs) ;\n\tdfs (x , y + 1 , h - sn) , dfs (x , y - 1 , h + sn) ;\n}\nint main () {\n\tscanf (\"%d%d\" , &n , &P) , A = P * pi / 180.0 ;\n\tsn = sin (A) , cs = cos (A) ; len = a[1][1] = 1 ;\n\tfor (int i = 1 ; i < n ; i++) {\n\t\tfor (int j = 1 ; j <= len ; j++)\n\t\t\tfor (int k = 1 ; k <= len ; k++) {\n\t\t\t\tb[j][k] = !a[k][j] ;\n\t\t\t\tb[j + len + 1][k] = a[j][k];\n\t\t\t\tb[j][k + len + 1] = !a[len - k + 1][j] ;\n\t\t\t\tb[j + len + 1][k + len + 1] = a[j][k];\n\t\t\t}\n\t\tfor (int j = 1 ; j <= 2 * len + 1 ; j++) b[len + 1][j] = 1 ;\n\t\tfor (int j = 1 ; j <= len + 1 ; j++) b[j][len + 1] = 1 ;\n\t\tlen = 2 * len + 1 ;\n\t\tfor (int j = 1 ; j <= len ; j++)\n\t\t\tfor (int k = 1 ; k <= len ; k++)\n\t\t\t\ta[j][k] = b[j][k] ;\n\t}\n\tfor (int i = 1 ; i <= len ; i++) dfs (1 , i , cs) ;\n\tif (P) ans /= (2.0 * sn * cs) ;\n\tprintf (\"%.6lf\\n\" , ans) ;\n\treturn 0 ;\n}\n```",
        "postTime": 1675945749,
        "uid": 122641,
        "name": "GIFBMP",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4179\u3010[CQOI2010]\u9f39\u9f20\u3011"
    },
    {
        "content": "\u5148\u8003\u8651 $a=0$ \u600e\u4e48\u505a\u3002\n\n\u89c2\u5bdf\u9898\u76ee\uff0c\u53d1\u73b0 $H_n$ \u7531\u4e24\u4e2a\u6b63\u7740\u7684 $H_{n-1}$\uff0c\u4e00\u4e2a\u671d\u5de6\u7684\u53cd $H_{n-1}$\uff08\u6d1e\u53d8\u6210\u571f\u5730\uff0c\u571f\u5730\u53d8\u6210\u6d1e\uff09\uff0c\u4e00\u4e2a\u671d\u53f3\u7684\u53cd $H_{n-1}$ \u6784\u6210\uff0c\u4e14\u4e8c\u7ef4\u6570\u7ec4\u80fd\u5b58\u4e0b $H_{12}$\u3002\n\n\u4e8e\u662f\u9012\u5f52\u6784\u9020\u5373\u53ef\u3002\n\n\u7136\u540e\u4ece\u7b2c\u4e00\u884c\u6bcf\u4e00\u4e2a\u6d1e\u5f00\u59cb\u641c\u7d22\uff0c\u8bb0\u5f55\u6240\u6709\u80fd\u8fbe\u5230\u7684\u5730\u65b9\u5373\u53ef\u3002\u6ce8\u610f\u6c34\u4e0d\u80fd\u5f80\u4e0a\u6d41\uff08\u7531\u4e8e\u5730\u6d1e\u7684\u53e6\u4e00\u5934\u5e76\u4e0d\u88f8\u9732\uff0c\u6240\u4ee5\u8fd9\u4e0d\u662f\u8fde\u901a\u5668\uff09\u3002\n\n\u7136\u540e\u8003\u8651\u4e00\u822c\u60c5\u51b5\u3002\n\n\u6ce8\u610f\u5230\u53ef\u4ee5\u8bb0\u5f55\u5f53\u524d\u6c34\u7684\u6df1\u5ea6\u3002\u5047\u8bbe\u5f53\u524d\u6df1\u5ea6\u662f $h$\uff0c\u8f6c\u79fb\u7684\u8bdd\u5c31\u4ece $h$ \u8f6c\u79fb\u5230 $h\\pm \\sin a$\u3001$h\\pm \\cos a$ \u5373\u53ef\u3002\u7edf\u8ba1\u7b54\u6848\u7684\u8bdd\u8003\u8651\u53ef\u4ee5\u7528 $h$ \u52a0\u4e0a\u7b80\u5355\u521d\u4e2d\u4e09\u89d2\u51fd\u6570\u77e5\u8bc6\u6c42\u51fa\u6bcf\u4e2a\u80fd\u8d70\u7684\u683c\u5b50\u7684\u6c34\u7684\u9762\u79ef\u3002\n\n\u4e2a\u4eba\u89c9\u5f97\u505a\u8fd9\u79cd\u9898\u7edd\u5bf9\u4e0d\u80fd\u88ab\u82b1\u91cc\u80e1\u54e8\u7684\u9898\u9762\u5413\u5230\uff0c\u8fd9\u9898\u5b9e\u9645\u96be\u5ea6\u5176\u5b9e\u662f\u8fdc\u4f4e\u4e8e\u770b\u8d77\u6765\u7684\u96be\u5ea6\u7684\u3002",
        "postTime": 1647244002,
        "uid": 104662,
        "name": "PrincessQi",
        "ccfLevel": 0,
        "title": "P4179"
    }
]
[
    {
        "content": "~~\u6c34\u84dd\u4e00\u9053~~\n\n\u516c\u5f0f\u53c2\u8003\u4e86\u697c\u4e0b\u3002\n\n---\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u9898\u76ee\u5bf9\u7535\u8def\u7684\u63cf\u8ff0\u662f\u9012\u5f52\u7684\uff0c\u6240\u4ee5\u5f88\u5bb9\u6613\u5c31\u80fd\u60f3\u5230\u7528\u9012\u5f52\u51fd\u6570\u6c42\u89e3\u3002\n\n\u6211\u4eec\u8003\u8651\u7528 `solve(l,r)` \u8868\u793a\u539f\u5b57\u7b26\u4e32\u4e2d $[l,r]$ \u8fd9\u4e2a\u5b50\u4e32\u6240\u8868\u793a\u7684\u7535\u8def\u77ed\u8def\u7684\u6982\u7387\u3002\u663e\u7136\u5f53 $l=r$ \u65f6\uff0c`solve(l,r)` \u7b49\u4e8e\u7535\u5b50\u5143\u4ef6\u77ed\u8def\u7684\u6982\u7387\u3002\n\u5982\u679c $l \\not= r$\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u5224\u65ad\u8fd9\u4e2a\u7535\u8def\u662f\u4e32\u8054\u8fd8\u662f\u5e76\u8054\u3002\u6839\u636e\u9898\u610f\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u8be5\u5b50\u4e32\u4e2d\u6709\u9017\u53f7\u4e0d\u5728\u4efb\u4f55\u4e00\u5bf9\u5339\u914d\u7684\u62ec\u53f7\u4e2d\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7535\u8def\u662f\u4e32\u8054\u7535\u8def\uff0c\u5426\u5219\u662f\u5e76\u8054\u7535\u8def\u3002\n\n\u7531\u4e58\u6cd5\u539f\u7406\uff0c\u4e00\u4e2a\u4e32\u8054\u7535\u8def\u77ed\u8def\u7684\u6982\u7387\u662f\u7ec4\u6210\u8fd9\u4e2a\u4e32\u8054\u7535\u8def\u7684\u5c0f\u7535\u8def\u7684\u77ed\u8def\u6982\u7387\u7684\u79ef\uff0c\u800c\u4e00\u4e2a\u5e76\u8054\u7535\u8def\u77ed\u8def\u7684\u6982\u7387\u662f $100\\%$ \u51cf\u53bb\u7ec4\u6210\u8fd9\u4e2a\u5e76\u8054\u7535\u8def\u7684\u5c0f\u7535\u8def\u4e0d\u77ed\u8def\u7684\u6982\u7387\u7684\u79ef\u3002\u8bbe\u7531 $n$ \u4e2a\u7535\u8def\u7ec4\u6210\u4e86\u4e00\u4e2a\u7535\u8def\uff0c\u6bcf\u4e2a\u7535\u8def\u77ed\u8def\u7684\u6982\u7387\u4e3a $p_i$\uff0c\u6574\u4e2a\u7535\u8def\u77ed\u8def\u7684\u6982\u7387\u4e3a $P$\u3002\u5219\u6709\uff1a\n\n\u5bf9\u4e8e\u4e32\u8054\u7535\u8def\uff1a\n\n$$\nP=\\prod\\limits_{i=1}^np_i\n$$\n\n\u5bf9\u4e8e\u5e76\u8054\u7535\u8def\uff1a\n\n$$\nP=100\\%-\\prod\\limits_{i=1}^n(100\\%-p_i)\n$$\n\n---\n\u5b9e\u73b0\u7ec6\u8282\u89c1\u4ee3\u7801\uff08\u539f\u8c05\u6211\u7684\u9a6c\u8702\uff09\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define LL long long\n#define max(i, j) (i > j ? i : j)\n#define min(i, j) (i < j ? i : j)\n#define mes(s, x) memset(s, x, sizeof(s))\nusing namespace std;\nchar a[105];\ndouble b[105];\nint c[105], nxt[105];//c\u6570\u7ec4\u4e3a\u62ec\u53f7\u5339\u914d\u7684\u6808,nxt[i]\u8868\u793a\u4e0ea[i]\u5339\u914d\u7684\u5de6\u62ec\u53f7\u7684\u4f4d\u7f6e\uff08\u82e5a[i]\u4e0d\u662f\u53f3\u62ec\u53f7\uff0c\u5219\u4e3a0\ndouble solve(int l, int r){\n\tif(l == r) return b[a[l] - 'A'];\n\tdouble tot = 1.0;\n\tint k = 0, t;//k\u8868\u793a\u5f53\u524d\u672a\u5339\u914d\u7684\u5de6\u62ec\u53f7\u6570 \n\tbool flag = 1;\n\tfor(int i = l; i <= r; i++){\n\t\tif(a[i] == '(') k++;\n\t\telse if(a[i] == ')') k--;\n\t\telse if(a[i] == ',' && k == 0){\n\t\t\tflag = 0;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(flag){//\u5e76\u8054 \n\t\tt = r;\n\t\twhile(t > l){\n\t\t\ttot *= solve(nxt[t] + 1, t - 1);\n\t\t\tt = nxt[t] - 1;\n\t\t}\n\t\treturn tot;\n\t}else{//\u4e32\u8054 \n\t\tk = 0;\n\t\tt = l;\n\t\tfor(int i = l; i <= r; i++){\n\t\t\tif(a[i] == '(') k++;\n\t\t\telse if(a[i] == ')') k--;\n\t\t\telse if(a[i] == ',' && k == 0){\n\t\t\t\ttot *= (1 - solve(t, i - 1));\n\t\t\t\tt = i + 1;\n\t\t\t}\n\t\t}\n\t\ttot *= (1 - solve(t, r));\n\t\treturn 1 - tot;\n\t} \n}\nint main(){\n\tint n;\n\tscanf(\"%d\\n%s\", &n, a);\n\tfor(int i = 0; i < n; i++){\n\t\tscanf(\"%lf\", &b[i]);\n\t}\n\tint len = strlen(a), s = 0;\n\tfor(int i = 0; i < len; i++){//\u62ec\u53f7\u5339\u914d \n\t\tif(a[i] == '('){\n\t\t\tc[++s] = i; \n\t\t}else if(a[i] == ')'){\n\t\t\tnxt[i] = c[s--];\n\t\t}\n\t}\n\tprintf(\"%.4lf\", solve(0, len - 1));\n\treturn 0;\n}\n```",
        "postTime": 1629211664,
        "uid": 488539,
        "name": "E_firework",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2413 \u3010yyy loves physics IV\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u5c31\u4e00\u7bc7\u9898\u89e3\uff0c\u800c\u4e14\u6709\u4e00\u4e2a\u5730\u65b9\u8c8c\u4f3c\u8bb2\u9519\u4e86\uff0c\u6211\u5c31\u6765\u53d1\u4e00\u7bc7\u9898\u89e3\u3002\n\n--------\n\n\u8bbe\u4e00\u6bb5\u7535\u8def\u65ad\u8def\u7684\u6982\u7387\u4e3a $P$\uff0c\u7b2c $i$ \u4e2a\u5143\u4ef6\u65ad\u8def\u7684\u6982\u7387\u4e3a $p(i)$\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u4e32\u8054\u7535\u8def\u6765\u8bf4\uff0c\u8981\u6240\u6709\u7684\u5143\u4ef6\u90fd\u4e0d\u65ad\u8def\u624d\u80fd\u4fdd\u8bc1\u8fd9\u4e00\u6bb5\u4e0d\u65ad\u8def\uff0c\u6240\u4ee5\u7531 $n$ \u4e2a\u5143\u4ef6\u4e32\u8054\u7684\u7535\u8def\u65ad\u8def\u7684\u6982\u7387\u4e3a\uff1a  \n\n$$P=1-\\prod_{i=1}^{n}(1-p(i))$$\n\n\u800c\u5bf9\u4e8e\u4e00\u6bb5\u5e76\u8054\u7535\u8def\u6765\u8bf4\uff0c\u8981\u6240\u6709\u7684\u5143\u4ef6\u90fd\u65ad\u8def\uff0c\u8fd9\u4e00\u6bb5\u7535\u8def\u624d\u4f1a\u65ad\u8def\uff0c\u6240\u4ee5\u7531 $n$ \u4e2a\u5143\u4ef6\u5e76\u8054\u7684\u7535\u8def\u65ad\u8def\u7684\u6982\u7387\u4e3a\uff1a\n\n$$P=\\prod_{i=1}^{n}p(i)$$\n\n\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u7b97\u51fa\u8fd9\u4e9b\u4e32\u8054\u7535\u8def\u548c\u5e76\u8054\u7535\u8def\u7684\u65ad\u8def\u6982\u7387\u4e86\u3002\n\n--------\n\n\u5982\u4f55\u5b9e\u73b0\u5462\uff1f\u62ff\u6837\u4f8b\u6765\u8bf4\uff0c\u7535\u8def `(A,B)((C)(D),E)` \u5176\u5b9e\u53ef\u4ee5\u628a\u5b83\u5206\u4e3a `A,B` \u548c `(C)(D),E` \u8fd9\u4e24\u4e2a\u5b50\u7535\u8def\u5e76\u8054\uff0c`A,B` \u53c8\u53ef\u4ee5\u770b\u6210 `A` \u548c `B` \u8fd9\u4e24\u4e2a\u5b50\u7535\u8def\u4e32\u8054\uff0c`(C)(D),E` \u53ef\u4ee5\u770b\u6210 `(C)(D)` \u548c `E` \u8fd9\u4e24\u4e2a\u5b50\u7535\u8def\u4e32\u8054\uff0c\u6700\u540e `(C)(D)` \u53ef\u4ee5\u770b\u6210 `C` \u548c `D` \u8fd9\u4e24\u4e2a\u5b50\u7535\u8def\u5e76\u8054\u3002\u6240\u4ee5\uff0c\u5148\u627e\u6709\u6ca1\u6709\u62ec\u53f7\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u8fd9\u4e2a\u7535\u8def\u5c31\u53ea\u6709\u4ee5\u9017\u53f7\u5206\u9694\u7684\u5143\u4ef6\u4e86\uff0c\u7b97\u51fa\u8fd9\u4e9b\u5143\u4ef6\u4e32\u8054\u8d77\u6765\u53d1\u751f\u65ad\u8def\u7684\u6982\u7387\u5373\u53ef\uff1b\u5426\u5219\uff0c\u627e\u662f\u5426\u6709\u9017\u53f7\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\uff0c\u5c31\u4ee5**\u8be5\u5c42**\u6bcf\u4e2a\u5339\u914d\u7684\u62ec\u53f7\u4f5c\u4e3a\u5b50\u7535\u8def\u8ba1\u7b97\u4e0b\u53bb\uff1b\u5426\u5219\uff0c\u627e\u5230\u9017\u53f7\uff0c\u5c31\u628a\u524d\u9762\u7684\u7535\u8def\u5206\u9694\u51fa\u6765\u4e32\u8054\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u7b97\u51fa\u6765\u6574\u4e2a\u7535\u8def\u65ad\u8def\u7684\u6982\u7387\u4e86\uff0c[\u4ee3\u7801\u5728\u6b64](https://www.luogu.com.cn/paste/0lwlv90w)\uff0c\u8bf7\u52ff\u6284\u88ad\u3002\n\n--------\n\n\u8fd9\u4e00\u9053\u9898\u76ee\u544a\u8bc9\u6211\u4eec\uff0c\u5982\u679c\u6b63\u7740\u7b97\u6bd4\u8f83\u96be\u7b97\uff0c\u90a3\u5c31\u53cd\u8fc7\u6765\u7b97\uff0c\u8fd9\u6837\u4e5f\u8bb8\u5c31\u4f1a\u5bb9\u6613\u4e00\u4e9b\u3002\n\n",
        "postTime": 1598788709,
        "uid": 181378,
        "name": "Alarm5854",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2413 \u3010yyy loves physics IV\u3011"
    },
    {
        "content": "\u524d\u5f80 [\u6211\u7684 Blog](https://blog.tifa-233.com/archives/luogu-p2413/#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF) \u4ee5\u83b7\u53d6\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\u3002\n\n---\n\n\u8bbe $P(A_{i}),i=1,2,...,n$ \u5206\u522b\u4e3a\u5143\u4ef61\uff0c\u5143\u4ef62\uff0c\u2026\u2026\uff0c\u5143\u4ef6n \u65ad\u8def\u7684\u6982\u7387\uff0c\u5219\uff1a\n\n- $n$ \u4e2a\u4e32\u8054\u5143\u4ef6/\u7535\u8def\u65ad\u8def\u7684\u6982\u7387\u4e3a\uff1a\n\n  $$\n  P\\left(\\bigcup_{i=1}^{n} A_{i}\\right)=1-\\prod_{i=1}^n(1-P(A_i))\n  $$\n\n- $n$ \u4e2a\u5e76\u8054\u5143\u4ef6/\u7535\u8def\u65ad\u8def\u7684\u6982\u7387\u4e3a\uff1a\n\n  $$\n  P\\left(\\bigcap_{i=1}^{n} A_{i}\\right)=\\prod_{i=1}^nP(A_i)\n  $$\n\n\u4e8e\u662f\u8fd9\u4e2a\u95ee\u9898\u5c31\u8f6c\u6362\u6210\u53ea\u542b\u6709 `+ * ( )` \u53ca\u6570\u5b57\u7684\u8868\u8fbe\u5f0f\u6c42\u503c\u95ee\u9898\u4e86\u3002\n",
        "postTime": 1523019748,
        "uid": 82152,
        "name": "Tiphereth_A",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2413 \u3010yyy loves physics IV\u3011"
    }
]
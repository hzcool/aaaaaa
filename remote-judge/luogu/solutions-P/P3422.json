[
    {
        "content": "\u8fd9\u4e2a\u9898\u5176\u5b9e\u6ca1\u90a3\u4e48nan\uff0c\u53ea\u8981\u6309\u7167\u6b63\u5e38\u601d\u8def\u201c\u6a21\u62df\u201d\u4e00\u904d\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u9996\u5148\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff1a\u8dd1\u4e00\u5708\u90fd\u662f\u8dd1\u7684\u76f8\u540c\u7684\u4e00\u5708\uff0c\u4e3a\u4ec0\u4e48\u6709\u7684\u70b9\u5f00\u59cb\u5c31\u80fd\u8dd1\u5b8c\uff0c\u6709\u7684\u70b9\u5f00\u59cb\u5c31\u8dd1\u4e0d\u5b8c\u5462\u3002\n\n\u6bd4\u5982\u7b2c3\u4e2a\u70b9\u8dd1\u4e0d\u5b8c\uff0c\u662f\u201cNIE\u201d\u3002\u7b2c1\u4e2a\u70b9\u80fd\u8dd1\u5b8c\uff0c\u662f\u201cTAK\u201d\u3002\n\n\u7b2c3\u4e2a\u70b9\u8dd1\u4e0d\u5b8c\uff0c\u4e00\u5b9a\u662f\u5728\u534a\u8def\u4e0a\u67d0\u4e24\u4e2a\u70b9\u4e2d\u95f4\u6b7b\u6389\u4e86\u3002\u5982\u679c\u6211\u4eec\u7ed9\u6bcf\u4e2a\u70b9\u8bbe\u4e00\u4e2a\u201c\u6fd2\u6b7b\u503c\u201d\uff0c\u8868\u793a\u521a\u5230\u67d0\u4e2a\u70b9\uff0c\u8fd8\u6ca1\u6709\u62ff\u8fd9\u4e2a\u70b9\u7684\u6cb9\u65f6\uff0c\u6cb9\u7684\u5269\u4f59\u91cf\u3002\u6b7b\u6389\u4e86\u5c31\u662f\u4e2d\u95f4\u6709\u67d0\u4e2a\u70b9\u7684\u201c\u6fd2\u6b7b\u503c\u201d\u5c0f\u4e8e0\u4e86\u3002\n\n\u800c\u4ece\u7b2c1\u4e2a\u70b9\u8dd1\u8fc7\u6765\u65f6\u6c7d\u6cb9\u8fd8\u6709\u4e9b\u5269\u4f59\uff0c\u6b63\u662f\u8fd9\u4e9b\u201c\u5269\u4f59\u201d\uff0c\u5e2e\u5b83\u5ea6\u8fc7\u4e86\u90a3\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8270\u96be\u5c81\u6708\u3002\n\n\u53ea\u8981\u5ea6\u8fc7\u4e86\u6700\u9ed1\u6697\u7684\u4e00\u6bb5\uff0c\u5176\u4ed6\u7684\u5c31\u90fd\u4e0d\u662f\u95ee\u9898\u4e86\u3002\n\n**\u56e0\u6b64\uff0c\u95ee\u9898\u8f6c\u5316\u4e3a\u4e86\uff0c\u6bcf\u4e2a\u70b9\u5728\u521d\u59cb\u6ca1\u6709\u7ed3\u4f59\u7684\u60c5\u51b5\u4e0b\uff0c\u80fd\u5426\u71ac\u8fc7\u4ee5\u5b83\u5f00\u59cb\u7684\u4e00\u5708\u4e2d\u6c7d\u6cb9\u6700\u5c11\u7684\u4e00\u6bb5\uff08\u6fd2\u6b7b\u503c\u6700\u5c0f\u7684\u4e00\u4e2a\u70b9\uff09\u3002**\n\n\u6240\u4ee5\u53ef\u4ee5\u4ece1\u5f00\u59cb\u66b4\u529b\u6a21\u62df\u4e00\u904d\uff0c\u6c42\u51fa\u4ee51\u4e3a\u8d77\u70b9\u7684\u6bcf\u4e2a\u70b9\u7684\u201c\u6fd2\u6b7b\u503c\u201d\u3002\u56e0\u4e3a\u662f\u73af\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728n\u540e\u9762\u518d\u8865\u4e00\u6bb51~n\u3002\u628a\u8fd9\u6bb5\u957f\u4e3a\n2*n\n\u7684\u8def\u8d70\u4e00\u904d\u3002\n\u770b\u4e00\u4e0b\u6bcf\u4e2a\u70b9\u8d70\u5230\u81ea\u5df1\u5bf9\u5e94\u7684\u70b9\u7684\u8def\u4e0a\u6700\u5c0f\u7684\u6fd2\u6b7b\u503c\u7684\u6700\u5c0f\u503c\u662f\u5426\u5927\u4e8e\u8fd9\u4e2a\u70b9\u7684\u5269\u4f59\uff08\u4e5f\u5c31\u662f\u8fd9\u4e2a\u70b9\u7684\u6fd2\u6b7b\u503c\uff09\uff0c\u5c31\u53ef\u4ee5\u5224\u65ad\u662f\u5426\u80fd\u4ece\u8fd9\u4e2a\u70b9\u5f00\u59cb\u8d70\u5b8c\u4e00\u5708\u4e86\u3002\n\n**\u73b0\u5728\uff0c\u552f\u4e00\u7684\u95ee\u9898\u53d8\u4e3a\u4e86\uff0c\u5982\u4f55\u5728\u4e00\u4e2a\u957f\u4e3a $2n$ \u7684\u5e8f\u5217\u4e2d\uff0c\u6c42\u51fa\u4e00\u4e9b\u957f\u4e3a $n$ \u7684\u6bb5\u7684\u6700\u5c0f\u503c\u3002**\n\n\u662f\u4e0d\u662f\u548c\u67d0\u4e2a\u9898\u7684\u9898\u9762\u51fa\u5947\u7684\u76f8\u4f3c\uff0c\u8fd9\u4e0d\u5c31\u662f[\u6ed1\u52a8\u7a97\u53e3](https://www.luogu.org/problemnew/show/P1886)\uff08\u4e00\u9053\u7eff\u724c\u9898\uff0c\u6ca1\u505a\u8fc7\u7684\u53ef\u4ee5\u5148\u53bb\u6c34\u4e86\u5b83\uff09\u7684\u9898\u9762\u4e48\uff0c\u800c\u4e14\u8fd9\u4e24\u9053\u9898\u8fde\u6570\u636e\u8303\u56f4\u90fd\u4e00\u6837\uff0c\u8fd9\u4e2a\u6697\u793a.......\n\n\u81f3\u6b64\uff0c\u8fd9\u9053\u9898\u5c31\u88ab\u5b8c\u7f8e\u89e3\u51b3\u4e86\u3002\n\n\u601d\u8def\uff1a\u9884\u5904\u7406+\u5355\u8c03\u961f\u5217\u3002\u8fd8\u6709\u4e00\u70b9\uff0c\u56e0\u4e3a\u53ef\u4ee5\u4ece\u4e24\u4e2a\u65b9\u5411\u8d70\uff0c\u6240\u4ee5\u8fd8\u8981\u505a\u4e00\u904d\u53cd\u5411\u7684\u4ece $2n$ \u8dd1\u5230 $1$ \u3002\u9884\u5904\u7406\u4e5f\u8981\u53cd\u5411\u9884\u5904\u7406\u4e00\u904d\uff0c\u6ce8\u610f\u4e0b\u6807\uff0c\u5bb9\u6613\u61f5\u3000\u3002\n\n\u849f\u84bb\u4e0d\u4f1a\u51fd\u6570\u4e0d\u4f1a\u4f20\u53c2\uff0c\u53ea\u80fd\u50bb\u50bb\u7684\u5199\u4e24\u904d\uff0c\u53c8\u81ed\u53c8\u957f\u7684\u3002\n### \u4ee3\u7801\n```\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nint n,h,t;\nint v[2001000];//\u6cb9\u91cf \nint d[2001000];//\u79bb\u4e0b\u4e00\u4e2a\u70b9\u7684\u8ddd\u79bb \nint a[2001000];//\u6fd2\u6b7b\u503c \nint b[2001000];//\u4ee5\u5b83\u5f00\u59cb\u7684n\u4e2a\u6570\u4e2d\u6fd2\u6b7b\u503c\u6700\u5c0f\u7684\u70b9 \nint q[2001000];//\u961f\u5217 \nbool ans[2001000];//\u7b54\u6848 \nint main(){//\u6240\u6709\u52a0\u4e86\"//\"\u7684\u5730\u65b9\u90fd\u662f\u4e24\u904d\u505a\u4e0d\u4e00\u6837\u7684\u5730\u65b9\uff0c\u8981\u597d\u597d\u7406\u89e3\uff0c\u7406\u89e3\u4e0d\u4e86\u5c31\u90fd\u8f93\u51fa\u51fa\u6765\u770b\u4e00\u4e0b \n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\tcin>>v[i]>>d[i],\n\tv[i+n]=v[i],d[i+n]=d[i];\n\t\n\t//\u6b63\u5411 \n\tfor(int i=1,s=0;i<=n+n;i++)//\n\t\ta[i]=s,s+=v[i]-d[i];//\n\th=0,t=0;\n\tfor(int i=1;i<=n+n;i++)//\n\t{\n\t\twhile(h<t&&a[i]<=a[q[t-1]])\n\t\tt--;\n\t\tq[t++]=i;\n\t\twhile(h<t&&q[t-1]-q[h]>=n)//\n\t\th++;\n\t\tb[i-n]=a[q[h]];//\n\t}\n\tfor(int i=1;i<=n;i++)\n\tans[i]|=(b[i]-a[i]>=0);//\n\t\n\t//\u53cd\u5411 \n\tfor(int i=n+n,s=0;i>=1;i--)//\n\t\ta[i]=s,s+=v[i]-d[i-1];//\n\th=0,t=0;\n\tfor(int i=n+n;i>=1;i--)//\n\t{\n\t\twhile(h<t&&a[i]<=a[q[t-1]])\n\t\tt--;\n\t\tq[t++]=i;\n\t\twhile(h<t&&q[h]-q[t-1]>=n)//\n\t\th++;\n\t\tb[i]=a[q[h]];//\n\t}\n\tfor(int i=1;i<=n;i++)\n\tans[i]|=(b[i]-a[i+n]>=0);//\n\t\n\tfor(int i=1;i<=n;i++)\n\tcout<<(ans[i]?\"TAK\":\"NIE\")<<endl;\n}\n/*\n9\n5 1\n6 8\n4 4\n9 9\n9 8\n3 1\n2 1\n3 1\n3 8\n*/\n```",
        "postTime": 1535378708,
        "uid": 57304,
        "name": "jzzcjb",
        "ccfLevel": 0,
        "title": "LOT\u9898\u89e3"
    },
    {
        "content": "~~\u968f\u673a\u8df3\u9898\u8df3\u5230\u7684~~\n\n\u8ddf\u65e9\u4e0a\u8df3\u5230\u7684[\u8fd9\u9898](https://www.luogu.org/problemnew/show/P1714)\u5dee\u4e0d\u591a\u3002\u5927\u6982\u5c31\u662f\u5f88\u7b80\u5355\u7684\u601d\u7ef4\u518d\u52a0\u4e0a\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u4e00\u4e0b\u3002~~(\u5176\u5b9e\u5c31\u662f\u7ebf\u6bb5\u6811\u6218\u80dc\u5355\u8c03\u961f\u5217)~~\n\n~~**\u4e0a\u9762\u90fd\u662f\u5e9f\u8bdd**~~\n\n\u66b4\u529b\u90e8\u5206\u5c31\u4e0d\u8bb2\u4e86\u5c31\u662f\u6a21\u62df \u590d\u6742\u5ea6 $O(n^2)$\n\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53d1\u73b0\u5176\u5b9e\u5c31\u662f\u6c42 \u67d0\u4e00\u6bb5\u533a\u95f4\u5185\u71c3\u6599\u4e4b\u548c-\u8ddd\u79bb\u4e4b\u548c\u662f\u5426\u5c0f\u4e8e$0$\uff0c\u8fd9\u4e00\u90e8\u5206\u5c31\u53ef\u4ee5\u5f88\u5feb\u4e50\u5730\u7528\u524d\u7f00\u548c\u641e\u4e00\u4e0b\uff0c(\u5f53\u7136\u7531\u4e8e\u662f\u4e2a\u73af\u5f53\u7136\u8981\u628a\u6570\u636e\u62c6\u4e0b\u73af)\u3002\u5373\n> $s[j]-s[i] >=0$\n\n\u56e0\u4e3a\u901a\u8fc7\u679a\u4e3e\u7684\u8bdd\u524d\u7f00$s[i]$\u662f\u4e00\u5b9a\u7684\uff0c\u5982\u679c\u53ef\u4ee5\u8bbf\u95ee\u5b8c\u81ea$i$\u5f00\u59cb\u7684\u4e00\u5708\u7684\u8bdd\uff0c\u90a3\u4e48\u6700\u5c0f\u7684$s[j]$\u5c31\u4e00\u5b9a\u5927\u4e8e\u7b49\u4e8e$s[i]$\u3002\u6240\u4ee5\u7ef4\u62a4\u4e2a\u533a\u95f4\u6700\u5c0f\u7684$s[j]$\u5c31\u53ef\u7528\u5230 _\u7ebf\u6bb5\u6811_ \u5566\u3002\n\n\u8fd9\u6837\u6253\u5b8c\u4ee5\u4e3a\u81ea\u5df1~~\u4e00\u53d1\u5165\u9b42~~\uff0c\u7ed3\u679c\u53d1\u73b0\u597d\u50cf\u9009\u53d6\u8d77\u70b9\u65f6\u8fd8\u53ef\u4ee5\u5f80\u5de6\u8fb9\u8d70\uff0c\u90a3\u4e48\u518d\u53cd\u8fc7\u6765\u518d\u641e\u4e2a\u524d\u7f00\u548c\u7ebf\u6bb5\u6811\u5c31\u53ef\u4ee5\u5566\u3002\n\u590d\u6742\u5ea6$O(nlogn)$\n\n\u4ee3\u7801 ~~\u5f88\u4e11\u4f60\u4eec\u8bb2\u7a76\u770b\u5427~~: \n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint read()\n{\n    int sum=0;char ch=getchar();\n    while(ch<'0'||ch>'9'){ch=getchar();}\n    while(ch<='9'&&ch>='0'){sum=sum*10+ch-'0';ch=getchar();}\n    return sum;\n}\nconst int N = 1e6+10;\nint data[N],dist[N],n;\nlong long qianzhui[N];\nstruct node\n{\n   int l,r;\n   long long mi;\n}a[N*8],t[N*8];\nvoid pushup(int p)\n{\n    a[p].mi=min(a[p*2].mi,a[p*2+1].mi);\n}\nvoid build(int p,int l,int r)\n{\n    a[p].l=l,a[p].r=r;\n    if(l==r){a[p].mi=qianzhui[l];return;}\n    int mid=l+r>>1;\n    build(p*2,l,mid);\n    build(p*2+1,mid+1,r);\n    pushup(p);\n}\nlong long query(int p,int l,int r)\n{\n    if(a[p].l==l&&a[p].r==r)return a[p].mi;\n    int mid=(a[p].l+a[p].r)>>1;\n    if(r<=mid)return query(p*2,l,r);\n    else if(l>mid)return query(p*2+1,l,r);\n    else return min(query(p*2,l,mid),query(p*2+1,mid+1,r));\n}\nvoid pushup1(int p)\n{\n    t[p].mi=min(t[p*2].mi,t[p*2+1].mi);\n}\nlong long qianzhui1[N];\nvoid build1(int p,int l,int r)\n{\n    t[p].l=l,t[p].r=r;\n    if(l==r){t[p].mi=qianzhui1[l];return;}\n    int mid=l+r>>1;\n    build1(p*2,l,mid);\n    build1(p*2+1,mid+1,r);\n    pushup1(p);\n}\nlong long query1(int p,int l,int r)\n{\n    if(t[p].l==l&&t[p].r==r)return t[p].mi;\n    int mid=(t[p].l+t[p].r)>>1;\n    if(r<=mid)return query1(p*2,l,r);\n    else if(l>mid)return query1(p*2+1,l,r);\n    else return min(query1(p*2,l,mid),query1(p*2+1,mid+1,r));\n}\nint main()\n{\n    n=read();\n    for(int i=1;i<=n;i++)data[i]=read(),dist[i]=read(),qianzhui[i]=qianzhui[i-1]-dist[i]+data[i];\n    for(int i=n+1;i<=n*2-1;i++)qianzhui[i]=qianzhui[i-1]-dist[i-n]+data[i-n];\n    for(int i=1;i<n;i++)qianzhui1[i]=qianzhui1[i-1]+data[n-i+1]-dist[n-i];\n    qianzhui1[n]=qianzhui1[n-1]+data[1]-dist[n];\n    for(int i=n+1;i<=n*2-1;i++)qianzhui1[i]=qianzhui1[i-1]+data[2*n-i+1]-dist[2*n-i];\n    build(1,1,n*2-1);\n    build1(1,1,n*2-1);\n    for(int i=1;i<=n;i++)\n    {\n        if(query(1,i,i+n-1)>=qianzhui[i-1])printf(\"TAK\\n\");\n        else if(query1(1,n-i+1,n-i+n)>=qianzhui1[n-i])printf(\"TAK\\n\");\n        else printf(\"NIE\\n\");\n    }\n    return 0;\n}\n```\n\u597d\u50cf\u6570\u636e\u6ca1\u5361$long$ $long$.....",
        "postTime": 1540815912,
        "uid": 60072,
        "name": "JYTS",
        "ccfLevel": 0,
        "title": "P3422 LOT-A Journey to Mars"
    },
    {
        "content": "## P3422 [POI2005]LOT-A Journey to Mars \u9898\u89e3\n\n### \u524d\u8a00\n\u4e86\u89e3\u8fc7\u5355\u8c03\u961f\u5217\u561b\uff1f\u5982\u679c\u8fd8\u6ca1\u6709\u7684\u8bdd\uff0c\u5efa\u8bae\u505a\u5b8c [P1886 \u6ed1\u52a8\u7a97\u53e3 /\u3010\u6a21\u677f\u3011\u5355\u8c03\u961f\u5217](https://www.luogu.com.cn/problem/P1886) \u518d\u505a\u6b64\u9898\u3002\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/LittleMoMol-kawayi/p/solution-LuoGu-P3422.html)\n\n### \u601d\u8def\n\n#### No. 1 \u7834\u73af\u6210\u94fe\n\n\u9996\u5148\u9898\u76ee\u7ed9\u7684\u662f\u73af\uff0c\u81ea\u7136\u8981\u7834\u73af\u6210\u94fe\uff0c\u6211\u6700\u559c\u6b22\u7684\u4e00\u79cd\u65b9\u5f0f\u662f\uff0c\u590d\u5236\u4e00\u4efd\uff0c\u5982\u4e0b\u56fe\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wyzof94z.png)\n\n\u6de1\u9ec4\u8272\u4e3a\u6bcf\u6b21\u904d\u5386\u7ecf\u8fc7\u7684\u70b9\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u548c\u73af\u5f62\u7684\u904d\u5386\u662f\u7b49\u4ef7\u7684\u3002\n\n#### No. 2 \u600e\u4e48\u60f3\u5230\u7528\u5355\u8c03\u961f\u5217\u7684\uff1f\n\n$p_i$ \u5b58\u4e0b\u7b2c $i$ \u4e2a\u52a0\u6cb9\u7ad9\u7684\u6cb9\u91cf\uff0c$d_i$ \u8868\u793a\u7b2c $i$ \u4e2a\u52a0\u6cb9\u7ad9\u548c\u7b2c $(i+1) \\operatorname{mod}\\ n$ \u4e2a\u52a0\u6cb9\u7ad9\u7684\u8ddd\u79bb\uff08\u6a21 $n$ \u7684\u539f\u56e0\u662f\u6700\u540e\u4e00\u4e2a\u52a0\u6cb9\u7ad9\u548c\u7b2c\u4e00\u4e2a\u52a0\u6cb9\u7ad9\u662f\u76f8\u90bb\u7684\uff09\uff0c\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r96t2176.png)\n\n\u4e0b\u9762\u5c55\u793a\u5206\u6790\u95ee\u9898\u7684\u8fc7\u7a0b\n\n- \u5148\u4ee5\u987a\u65f6\u9488\u4e3a\u4f8b\uff0c\u5982\u679c\u60f3\u8981\u8f6c\u5b8c\u4e00\u5708\uff0c\u5c31\u5fc5\u987b\u4fdd\u8bc1\u6bcf\u4e00\u6b65\u90fd\u53ef\u4ee5\u5230\u8fbe\u4e0b\u4e00\u4e2a\u52a0\u6cb9\u7ad9\uff0c\u6bd4\u5982\uff1a\u60f3\u8981\u4ece\u7b2c\u4e00\u4e2a\u52a0\u6cb9\u7ad9\u8d70\u5230\u7b2c\u4e8c\u4e2a\u52a0\u6cb9\u7ad9\uff0c\u5c31\u5fc5\u987b\u6ee1\u8db3 $p_1 - d_1 \\ge 0$\uff0c\u7c7b\u4f3c\u5730\uff0c\u60f3\u8981\u4ece\u7b2c\u4e00\u4e2a\u52a0\u6cb9\u7ad9\u8d70\u5230\u7b2c\u4e09\u4e2a\u52a0\u6cb9\u7ad9\uff0c\u5c31\u5fc5\u987b\u6ee1\u8db3 $p_1 - d_1 \\ge 0$ \u4e14 $p_1 + p_2 - d_1 - d_2 \\ge 0$\uff0c\u53ef\u77e5\u5982\u679c\u60f3\u8d70\u5b8c\u4e00\u5708\uff0c\u4e5f\u5c31\u662f\u4ece\u7b2c\u4e00\u4e2a\u52a0\u6cb9\u7ad9\u8d70\u5230\u7b2c $n$ \u4e2a\u52a0\u6cb9\u7ad9\uff0c\u5c31\u5fc5\u987b\u6ee1\u8db3 $\\forall\\  k \\in [1,n],\\  \\sum\\limits _{i=1}^{k}p_i - \\sum\\limits _{i=1}^{k}t_i \\ge 0$\n\n- \u90a3\u4e48\u5982\u4f55\u5feb\u901f\u6c42\u51fa\u5f0f\u5b50\u5462\uff0c\u4f60\u4e00\u5b9a\u6700\u5148\u60f3\u5230\u524d\u7f00\u548c\uff0c\u90a3\u4e48\u6211\u4eec\u4ee4 $s_i$ \u8868\u793a $\\sum\\limits _{j=1}^{i}p_j - \\sum\\limits _{j=1}^{i}t_j$\u3002\u90a3\u4e48\u5bf9\u4e8e\u7b2c $i$ \u4e2a\u52a0\u6cb9\u7ad9\uff0c\u53ea\u9700\u8981\u6ee1\u8db3 $\\forall\\  k \\in [i,i + n],\\ s_k - s_{i-1} \\ge 0$\u3002\n\n- \u4f60\u4f1a\u53d1\u73b0\u6bcf\u4e00\u4e2a\u524d\u7f00\u548c\u90fd\u8981\u5224\u65ad\uff0c\u6709\u6ca1\u6709\u4e00\u79cd\u65b9\u6cd5\uff0c\u4f7f\u5f97\u53ea\u7528\u5224\u65ad\u4e00\u6b21\u5462\uff1f\u53ef\u4ee5\u53d1\u73b0\uff0c\u53ea\u9700\u8981\u8ba9\u6240\u6709\u7684 $s_k$ \u4e2d\u6700\u5c0f\u7684\u90a3\u4e2a\u6ee1\u8db3 $s_k - s_{i-1} \\ge 0$ \u5373\u53ef\u3002\n\n- \u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u524d\u6700\u5927\u7684\u95ee\u9898\u662f\u5982\u4f55\u5feb\u901f\u627e\u5230\u6700\u5c0f\u7684 $s_k$\uff0c\u4e8e\u662f\u5c31\u5f88\u81ea\u7136\u5730\u60f3\u5230\u4e86\u5355\u8c03\u961f\u5217\uff0c\u7528\u4e00\u4e2a\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u524d\u7f00\u548c\u7684\u6700\u5c0f\u503c\u3002\n\n#### No. 3 \u7ec6\u8282\u591a\n|\u987a\u65f6\u9488|\u9006\u65f6\u9488|\n|--------------------------|--------------------------|\n| \u4ece\u540e\u5f80\u524d\u904d\u5386\uff08\u539f\u56e0\u89c1\u540e\u6587\uff09\u3002 | \u4ece\u524d\u5f80\u540e\u904d\u5386\uff08\u539f\u56e0\u89c1\u540e\u6587\uff09\u3002 |\n| $s_i = p_i - d_i$ | $s_i = p_i - d_{i-1},\\ d_0 = d_n$ |\n| \u7ef4\u62a4 $s_k$ \u7684\u6700\u5c0f\u503c\uff08\u539f\u56e0\u89c1\u540e\u6587\uff09\u3002 | \u7ef4\u62a4 $s_k$ \u7684\u6700\u5927\u503c\uff08\u539f\u56e0\u89c1\u540e\u6587\uff09\u3002 |\n| \u5148\u51fa\u961f\u518d\u66f4\u65b0\u3002 | \u5148\u66f4\u65b0\u518d\u51fa\u961f\u3002 |\n| \u5f53\u904d\u5386\u5230 $i \\le n$ \u7684\u52a0\u6cb9\u7ad9\u518d\u66f4\u65b0\u7b54\u6848\u3002 | \u5f53\u904d\u5386\u5230 $i > n$ \u7684\u52a0\u6cb9\u7ad9\u518d\u66f4\u65b0\u7b54\u6848\u3002 |\n\n\u5bf9\u4e8e\u7b2c\u4e00\u6761\uff1a\u987a\u65f6\u9488\u7ef4\u62a4\u8be5\u70b9\u5f80\u540e\u7684 $n$ \u4e2a\u70b9\u7684\u524d\u7f00\u548c\uff0c\u6240\u4ee5\u8981\u4ece\u540e\u5f80\u524d\u904d\u5386\uff1b\u9006\u65f6\u9488\u7ef4\u62a4\u8be5\u70b9\u5f80\u524d\u7684 $n$ \u4e2a\u70b9\u7684\u524d\u7f00\u548c\uff0c\u6240\u4ee5\u8981\u4ece\u524d\u5f80\u540e\u904d\u5386\n\n\u5bf9\u4e8e\u7b2c\u4e09\u6761\uff0c\u653e\u4e00\u4e2a\u56fe\uff0c\u5c31\u80fd\u660e\u767d\u4e86\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jtywesdr.png)\n\n### Code\n```cpp\n#include <cstring>\n#include <iostream>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N = 2e6 + 10;\n\nint n;\nint p[N], d[N];\nLL s[N];\nint q[N];\nbool ans[N];\n\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\t\n\tcin >> n;\n\tfor (int i = 1; i <= n; i ++ ) cin >> p[i] >> d[i];\n\t\n\t//\u987a\u65f6\u9488\n\tfor (int i = 1; i <= n; i ++ )\n\t\ts[i] = s[i + n] = p[i] - d[i]; //\u5bf9\u5e94\u7ec6\u82822\n\tfor (int i = 1; i <= n * 2; i ++ )\n\t\ts[i] += s[i - 1];\n\t\n\tint hh = 0, tt = -1;\n\tfor (int i = n * 2; i; i -- ) //\u5bf9\u5e94\u7ec6\u82821\n\t{\n\t\tif (hh <= tt && q[hh] >= i + n) hh ++ ;\n\t\twhile (hh <= tt && s[q[tt]] >= s[i]) tt -- ; //\u5bf9\u5e94\u7ec6\u82823\uff0c\u7ec6\u82824\n\t\tq[ ++ tt] = i;\n\t\tif (i <= n)  //\u5bf9\u5e94\u7ec6\u82825\n\t\t{\n\t\t\tif (s[q[hh]] - s[i - 1] >= 0) ans[i] = true;\n\t\t}\n\t}\n\t\n\t//\u9006\u65f6\u9488\n\td[0] = d[n];  //\u5bf9\u5e94\u7ec6\u82822\n\tfor (int i = 1; i <= n; i ++ )\n\t\ts[i] = s[i + n] = p[i] - d[i - 1]; //\u5bf9\u5e94\u7ec6\u82822\n\tfor (int i = 1; i <= n * 2; i ++ )\n\t\ts[i] += s[i - 1];\n\t\n\thh = 0, tt = -1;\n\tfor (int i = 1; i <= n * 2; i ++ ) //\u5bf9\u5e94\u7ec6\u82821\n\t{\n\t\tif (hh <= tt && q[hh] < i - n) hh ++ ;\n\t\tif (i > n)  //\u5bf9\u5e94\u7ec6\u82825\n\t\t{\n\t\t\tif (s[i] - s[q[hh]] >= 0) ans[i - n] = true;\n\t\t}\n\t\twhile (hh <= tt && s[q[tt]] <= s[i]) tt -- ; //\u5bf9\u5e94\u7ec6\u82823\uff0c\u7ec6\u82824\n\t\tq[ ++ tt] = i;\n\t}\n\t\n\tfor (int i = 1; i <= n; i ++ )\n\t\tif (ans[i]) cout << \"TAK\" << endl;\n\t\telse cout << \"NIE\" << endl;\n\t\n\treturn 0;\n}\n```\n\n### \u540e\u8bed\n\u6211\u5728\u5199\u8fd9\u7bc7\u9898\u89e3\u7684\u65f6\u5019\u6709\u4e00\u4e2a\u5c0f\u63d2\u66f2\uff0c\u8ba9\u6211 debug \u4e86\u597d\u957f\u65f6\u95f4\uff0c\u5728\u6b64\u5206\u4eab\u4e00\u4e0b\n\n\u9519\u8bef\u7684\u5199\u6cd5\n```cpp\nwhile (hh <= tt && s[q[tt] <= s[i]]) tt -- ;\n```\n\n\u6b63\u786e\u7684\u5199\u6cd5\n```cpp\nwhile (hh <= tt && s[q[tt]] <= s[i]) tt -- ;\n```\n\n\u53ef\u592a\u96be\u8c03\u4e86\u634f~\n\n\u5236\u4f5c\u4e0d\u6613\uff0c\u76fc\u541b\u4e00\u8d5e\u3002\n\n\u5b8c\u7ed3\u6492\u82b1\uff01\uff01",
        "postTime": 1658802733,
        "uid": 590755,
        "name": "LittleMoMol",
        "ccfLevel": 0,
        "title": "P3422 [POI2005]LOT-A Journey to Mars \u9898\u89e3"
    },
    {
        "content": "\n- update:2022.7.8 \u6539\u53d8\u4e86\u516c\u5f0f\u7684\u9648\u8ff0\u65b9\u5f0f\uff0c\u66f4\u52a0\u6e05\u6670\u3002 \u611f\u8c22 [aaaaaaaawsl](https://www.luogu.com.cn/user/307940) \u5efa\u8bae\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P3422)\n\n[\u535a\u5ba2\u98df\u7528\u66f4\u4f73](https://www.luogu.com.cn/blog/477674/solution-p3422)\n\n\u6b64\u9898\u5206\u522b\u8ba1\u7b97\u987a\u65f6\u9488\u548c\u9006\u65f6\u9488\u7684\u60c5\u51b5\uff0c\u63a8\u8350\u4e00\u79cd\u5355\u8c03\u961f\u5217\u4f18\u5316\u7684\u505a\u6cd5(~~\u81ea\u8ba4\u4e3a\u86ee\u7b80\u5355\u7684~~)\u3002\n\n**\u987a\u65f6\u9488**\n\n\u9996\u5148\u6211\u4eec\u62c6\u73af\u6210\u94fe(\u6570\u7ec4\u5f002\u500d)\u3002\n\n\u9644\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/u2hytrll.png?x-oss-process=image/resize,m_lfit,h_330,w_1010)\n\n$o_i$ \u8868\u793a\u6cb9\u91cf\uff0c$d_i$\u8868\u793a\u8ddd\u79bb\u3002\n\n $$s_i = \\sum_{a = 1}^{i}o_i - d_i$$ \n\n**\u90a3\u4e48\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\uff1a** \u5224\u65ad\u4e00\u5708\u8def\u5f84\u4e0a\u662f\u5426\u6bcf\u4e2a $o_i - d_i$ \u90fd\u5927\u4e8e $0$\uff0c\u6211\u4eec\u4ec5\u9700\u627e\u5230\u6700\u5c0f\u7684\u5e76\u5224\u65ad\u5373\u53ef\u3002\n\n\u7b49\u4ef7\u4e8e\u5728\u533a\u95f4 $[i, i + n - 1]$ \u4e2d\uff0c\u5bf9\u4e8e\u5176\u4e2d\u4efb\u610f\u7684\u70b9 $j$ $(i \\le j \\le i + n - 1)$\uff0c\u6709 $s_j - s_{i - 1} \\ge 0$, \u5373 $i$ \u56fa\u5b9a\uff0c\u627e\u5230 $s_j$ \u7684\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n\u6ce8\u610f\uff1a\n\n\u5728\u679a\u4e3e\u70b9 $i$ \u65f6\u9700\u8981\u5012\u5e8f\u904d\u5386\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\n\n\u679a\u4e3e\u5230\u70b9i\u65f6\u6211\u4eec\u9700\u8981\u5176\u540e\u7684 $n$ \u4e2a\u6570\u636e\u624d\u80fd\u5224\u65ad\uff0c\u6362\u8a00\u4e4b\uff0c$i$ \u4f9d\u8d56\u4e8e\u5176\u540e\u7684 $n$ \u4e2a\u6570\u636e\uff0c\u53ea\u6709\u540e\u9762\u7684\u6c42\u51fa\u540e\u624d\u80fd\u5224\u65ad $i$ \u70b9\u80fd\u5426\u6ee1\u8db3\u9898\u610f\u3002\n\n**Code**\n\n```cpp\nfor(int i = 1; i <= n; i ++ ) s[i] = s[i + n] = o[i] - d[i];\n    for(int i = 1; i <= 2 * n; i ++ ) s[i] += s[i - 1];\n    \n    q[0] = 2 * n + 1;\n    int hd = 0, tl = 0;\n    for(int i = 2 * n; i >= 1; i -- ) {\n        while(hd <= tl && q[hd] > i + n - 1) hd ++ ;\n        if(i < n) \n            if(s[q[hd]] - s[i - 1] >= 0) \n                ans[i] = true;\n        while(hd <= tl && s[q[tl]] >= s[i - 1]) tl -- ;\n        q[ ++ tl] = i - 1;\n    }\n```\n\n**\u9006\u65f6\u9488**\n\n\u9644\u56fe\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/mifw95mp.png?x-oss-process=image/resize,m_lfit,h_330,w_1010)\n\n\u6b64\u65f6\u6bcf\u4e2a\u70b9\u7684\u5269\u4f59\u6cb9\u91cf\u4f1a\u53d1\u751f\u53d8\u5316: $o_i - d_{i - 1}$(\u770b\u56fe\u7406\u89e3\uff09 \u3002\n\n\u6ce8\u610f\u521d\u59cb\u5316\uff1a$d_0 = d_n$ (\u7b2c\u4e00\u4e2a\u70b9\u6d88\u8017\u7684\u662f\u7b2c $n$ \u70b9\u7684\u6cb9)\u3002\n\n\u4e0e\u987a\u65f6\u9488\u540c\u7406\uff0c\u5728 $[i - n +1, i]$ \u533a\u95f4\u5185, \u5bf9\u4e8e\u4efb\u610f $j$ $(i - n + 1 \\le j \\le i)$, $s_j - s_{i + 1} \\ge 0$ \u3002\n\n\u6ce8\u610f\uff1a\u6b64\u65f6\u9700\u8981\u6b63\u5411\u679a\u4e3e $i$\u3002\n\n**Code**\n\n```cpp\n d[0] = d[n];\n    for(int i = 1; i <= n; i ++ ) s[i] = s[i + n] = o[i] - d[i - 1];\n    for(int i = 1; i <= 2 * n; i ++ ) s[i] += s[i - 1];\n    \n    q[0] = 0;\n    hd = 0, tl = 0;\n    \n    for(int i = 0; i <= 2 * n - 1; i ++ ) {\n        while(hd <= tl && q[hd] < i - n + 1) hd ++ ;\n        if(i + 1 > n) \n            if(s[i + 1] - s[q[hd]] >= 0)\n                ans[i - n + 1] = true;\n        while(hd <= tl && s[q[tl]] <= s[i + 1]) tl -- ;\n        q[ ++ tl] = i + 1;\n    }\n ```\n \n **\u65f6\u95f4\u590d\u6742\u5ea6**  $ O(n)$\u3002\n \n \u8ba9\u6211\u4eec\u6765\u770b\u5b8c\u6574\u4ee3\u7801:\n \n ```cpp\n#include<bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N = 1e6 + 10;\n\nLL s[N << 1];\nint o[N], d[N], n, q[N];\nbool ans[N];\n\nint main() {\n    scanf(\"%d\", &n);\n    for(int i = 1; i <= n; i ++ ) scanf(\"%d%d\", &o[i], &d[i]);\n    \n    for(int i = 1; i <= n; i ++ ) s[i] = s[i + n] = o[i] - d[i];\n    for(int i = 1; i <= 2 * n; i ++ ) s[i] += s[i - 1];\n    \n    q[0] = 2 * n + 1;\n    int hd = 0, tl = 0;\n    for(int i = 2 * n; i >= 1; i -- ) {\n        while(hd <= tl && q[hd] > i + n - 1) hd ++ ;\n        if(i < n) \n            if(s[q[hd]] - s[i - 1] >= 0) \n                ans[i] = true;\n        while(hd <= tl && s[q[tl]] >= s[i - 1]) tl -- ;\n        q[ ++ tl] = i - 1;\n    }\n    \n    d[0] = d[n];\n    for(int i = 1; i <= n; i ++ ) s[i] = s[i + n] = o[i] - d[i - 1];\n    for(int i = 1; i <= 2 * n; i ++ ) s[i] += s[i - 1];\n    \n    q[0] = 0;\n    hd = 0, tl = 0;\n    \n    for(int i = 0; i <= 2 * n - 1; i ++ ) {\n        while(hd <= tl && q[hd] < i - n + 1) hd ++ ;\n        if(i + 1 > n) \n            if(s[i + 1] - s[q[hd]] >= 0)\n                ans[i - n + 1] = true;\n        while(hd <= tl && s[q[tl]] <= s[i + 1]) tl -- ;\n        q[ ++ tl] = i + 1;\n    }\n    \n    for(int i = 1; i <= n; i ++ )\n        if(ans[i]) puts(\"TAK\");\n        else puts(\"NIE\");\n        \n    return 0;\n}\n```\n\nThe End.\n",
        "postTime": 1656557260,
        "uid": 477674,
        "name": "Lagerent",
        "ccfLevel": 0,
        "title": "P3422 [POI2005]LOT-A Journey to Mars\u9898\u89e3"
    },
    {
        "content": "\u4e00\u9053\u6709\u70b9\u610f\u601d\u7684\u9898\u3002\n\n\u770b\u5230\u662f\u4e00\u4e2a\u73af\uff0c\u5148\u7834\u73af\u4e3a\u94fe\uff0c\u5373 $a_{n+i}=a_i, b_{n+i}=b_i$\uff0c\u6b64\u65f6\u5c31\u53ea\u9700\u8981\u8df3\u5230 $x+n$ \u800c\u65e0\u9700\u5224\u73af\u4e86\u3002\n\n\u5982\u679c\u987a\u65f6\u9488\u8d70\uff1a\n\n\u4ee4 $sum_i = \\sum\\limits_{j=1}^{i}{a_j-b_j}$\uff0c\u5f53\u80fd\u4ece $x$ \u8df3\u5230 $x+n$ \u65f6\uff0c\u6709\n\n$$sum_{x-1} \\le sum_x, sum_{x-1} \\le sum_{x+1}, \\dots, sum_{x-1} \\le sum_{x+n-1}$$\n\n\u53d8\u5f62\u4e00\u4e0b\uff1a\n\n$$sum_{x-1} \\le \\min\\limits_{x \\le i < x+n}\\{sum_i\\}$$\n\n\u6c42\u957f\u5ea6\u4e0d\u53d8\u533a\u95f4\u7684\u6700\u5c0f\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528\u5355\u8c03\u961f\u5217\u3002\n\n\u9006\u65f6\u9488\u5c31\u53cd\u7740\u518d\u505a\u4e00\u904d\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n\nusing ll = long long;\nusing pii = std::pair<int, int>;\n\nconst int N = 1e6 + 5;\nint n, hd, tl; \nint a[N << 1], b[N << 1], c[N << 1], q[N << 1];\nint ta[N], tb[N], ans[N], flag[N];\nll s[N << 1];\n\nvoid solve() {\n\tfor (int i = 1; i <= n; i++) s[i] = s[i - 1] + c[i];\n\tfor (int i = 1; i <= n; i++) s[i + n] = s[i + n - 1] + c[i];\n\tfor (int i = 1, hd = 1, tl = 0; i <= n * 2; i++) {\n\t\tif (hd <= tl && q[hd] < i - n + 1) hd++;\n\t\twhile (hd <= tl && s[q[tl]] >= s[i]) tl--;\n\t\tq[++tl] = i;\n\t\tif (i >= n)\n\t\t\tans[i - n + 1] = s[q[hd]];\n\t}\n}\n\nint main() {\n\tstd::ios::sync_with_stdio(false);\n\tstd::cin.tie(nullptr);\n\tstd::cin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tstd::cin >> a[i] >> b[i];\n\t\ta[i + n] = a[i], b[i + n] = b[i];\n\t\tc[i + n] = c[i] = a[i] - b[i];\n\t}\n\tsolve();\n\tfor (int i = 1; i <= n; i++)\n\t\tif (ans[i] >= s[i - 1])\n\t\t\tflag[i] = 1;\n\tfor (int i = 1; i <= n; i++)\n\t\tc[i] = a[n - i + 1] - b[((n - i ? n - i : n))];\n\tsolve();\n\tfor (int i = 1; i <= n; i++)\n\t\tif (ans[i] >= s[i - 1])\n\t\t\tflag[n - i + 1] = 1;\n\tfor (int i = 1; i <= n; i++)\n\t\tstd::cout << (flag[i] ? \"TAK\" : \"NIE\") << \"\\n\";\n\treturn 0;\n}\n```",
        "postTime": 1676815027,
        "uid": 678877,
        "name": "Pengzt",
        "ccfLevel": 0,
        "title": "P3422 [POI2005]LOT-A Journey to Mars \u9898\u89e3"
    },
    {
        "content": "> [P3422 [POI2005]LOT-A Journey to Mars](https://www.luogu.com.cn/problem/P3422)\n>\n> [POI \u5408\u96c6](https://www.cnblogs.com/alex-wei/p/POI.html)\u3002\n\nPOI \u771f\u7684\u5f88\u559c\u6b22\u51fa [\u5355\u8c03\u961f\u5217](https://www.cnblogs.com/alex-wei/p/DP_Involution.html)\uff01\u4e00\u5f00\u59cb\u770b\u9519\u9898\uff0c\u4ee5\u4e3a\u53ef\u4ee5\u6765\u56de\u8d70\uff0c\u4ee5\u4e3a\u662f\u4e2a\u795e\u9898\uff0c\u60f3\u4e86\u4e24\u4e2a\u5c0f\u65f6 \u2026\u2026\n\n\u9996\u5148\u7834\u73af\u6210\u94fe\uff0c\u8003\u8651\u4ece $i$ \u5f00\u59cb\u987a\u65f6\u9488\u65b9\u5411 $i\\to i + 1\\to i + 2 \\to \\cdots \\to i + n - 1 \\to i + n$ \u80fd\u4e0d\u80fd\u8d70\u5230\uff0c\u4e5f\u5c31\u662f\u8981\u6ee1\u8db3 $p_i \\geq d_i$\uff0c$p_i + p_{i + 1}\\geq d_i + d_{i + 1}$ \u2026\u2026 **\u524d\u7f00\u548c** \u4f18\u5316\u4e00\u4e0b\u5373\u5bf9\u4e8e\u6bcf\u4e2a $k\\in [i, i + n - 1]$\uff0c\u90fd\u8981\u6709 $p_k - p_{i - 1} \\geq d_k - d_{i - 1}$\uff0c\u7a0d\u505a\u53d8\u5f62\u5f97\u5230 $p_{i - 1} - d_{i - 1} \\leq \\min\\limits_{i\\leq k < i + n} p_{i - 1} - d_{i - 1}$\uff0c\u7ecf\u5178\u7684\u6ed1\u52a8\u7a97\u53e3\u3002\n\n\u5bf9\u4e8e\u9006\u65f6\u9488\u65b9\u5411\uff0c\u540c\u7406\u8981\u6709 $d_{i - 1} - p_i \\leq \\min\\limits_{i - n\\leq k < i} d_{k - 1} - p_k$\uff08\u624b\u52a8\u6a21\u62df\u4e00\u4e0b\u5bb9\u6613\u5f97\u5230\uff09\uff0c\u4e5f\u662f\u6ed1\u52a8\u7a97\u53e3\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u7ebf\u6027\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ninline int read() {\n\tint x = 0; char s = getchar();\n\twhile(!isdigit(s)) s = getchar();\n\twhile(isdigit(s)) x = x * 10 + s - '0', s = getchar();\n\treturn x;\n}\n\n#define ll long long\nconst int N = 2e6 + 5;\nll n, q[N], p[N], d[N], ans[N], v1[N], v2[N];\nint main() {\n\tcin >> n;\n\tfor(int i = 1; i <= n; i++) p[n + i] = p[i] = read(), d[n + i] = d[i] = read();\n\tfor(int i = 1; i <= n << 1; i++) p[i] += p[i - 1], d[i] += d[i - 1];\n\tfor(int i = 1; i <= n << 1; i++) v1[i] = p[i] - d[i], v2[i] = d[i - 1] - p[i];\n\tfor(int i = 1, hd = 1, tl = 0, r = 0; i <= n; i++) {\n\t\twhile(hd <= tl && d[hd] < i) hd++;\n\t\twhile(r < i + n - 1) {\n\t\t\twhile(hd <= tl && v1[r + 1] <= v1[d[tl]]) tl--;\n\t\t\td[++tl] = ++r;\n\t\t} ans[i] = v1[i - 1] <= v1[d[hd]]; \n\t} for(int i = n << 1, hd = 1, tl = 0, l = i; i > n; i--) {\n\t\twhile(hd <= tl && d[hd] >= i) hd++;\n\t\twhile(l > i - n) {\n\t\t\twhile(hd <= tl && v2[l - 1] <= v2[d[tl]]) tl--;\n\t\t\td[++tl] = --l;\n\t\t} ans[i - n] |= v2[i] <= v2[d[hd]];\n\t} for(int i = 1; i <= n; i++) puts(ans[i] ? \"TAK\" : \"NIE\");\n\treturn 0;\n}\n```",
        "postTime": 1644037995,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "P3422 [POI2005]LOT-A Journey to Mars"
    },
    {
        "content": "## \u5355\u8c03\u961f\u5217+\u524d\u7f00\u548c\n\n\u56e0\u4e3a\u662f\u73af\uff0c\u539f\u5e8f\u5217\u590d\u5236\u4e00\u904d\u653e\u540e\u9762\uff0c\u8fd9\u4e2a\u4e0d\u591a\u8d58\u8ff0\u3002\n\n\u4ece1\u53f7\u70b9\u51fa\u53d1\uff0c\u65b9\u6848\u4e0d\u5408\u6cd5\uff0c\u5f53\u4e14\u4ec5\u5f531\u53f7\u70b9\u540e\u5230n+1\u53f7\u70b9\u7684\u9014\u4e2d\u5b58\u5728\u81f3\u5c11\u4e00\u4e2a\u70b9$sum(oil)-sum(d)<0$\uff0c\u4e5f\u5c31\u662f\u8be5\u70b9\u6cb9\u4e0d\u591f\u7528\uff0c\u5176\u4e2d$sum(oil)$\u548c$sum(d)$\u4e3a\u524d\u7f00\u548c\u3002\n\n\u95ee\u9898\u53ef\u4ee5\u8f6c\u53d8\u4e3a\uff0c\u5b58\u5728\u4e00\u4e2a\u70b9$sum(oil-d)<0$\u65f6\uff0c\u4ece1\u53f7\u70b9\u51fa\u53d1\u7684\u65b9\u6848\u4e0d\u5408\u6cd5\u3002\u8fd9\u4e24\u79cd\u662f\u7b49\u4ef7\u7684\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u6240\u6709\u7684$sum(oil-d)>=0$\uff0c\u65b9\u6848\u5408\u6cd5\u3002\n\n\u6b64\u65f6\u6211\u4eec\u518d\u8003\u8651\u8d77\u70b9\u4e0d\u4e3a1\u7684\u65b9\u6848\u3002\u8bbe\u8d77\u70b9\u4e3ai\uff0c\u5982\u679ci~i+n-1\u8fd9\u4e9b\u70b9\u4e2d\u6240\u6709\u7684$sum_{(oil-d)}[j]-sum_{(oil-d)}[i-1]>=0$\uff0c\u65b9\u6848\u5408\u6cd5\uff1b\u5982\u679c\u6709\u4e00\u4e2a\u4e0d\u6ee1\u8db3\uff0c\u65b9\u6848\u5c31\u4e0d\u5408\u6cd5\u3002\n\n\u90a3\u4e48\uff0c\u5982\u679ci~i+n-1\u4e2d\uff0c\u6700\u5c0f\u7684sum\u90fd\u6ee1\u8db3\u5462\uff1f\u8bf4\u660e\u65b9\u6848\u5408\u6cd5\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u8bf4\u660e\u65b9\u6848\u4e0d\u5408\u6cd5\u3002\u8bf4\u660e\uff0c\u5224\u65ad\u4e00\u79cd\u65b9\u6848\u662f\u5426\u5408\u6cd5\uff0c\u53ea\u9700\u8981\u77e5\u9053i~i+n-1\u4e2d\u6700\u5c0f\u7684sum\u3002\n\n\u663e\u7136\uff0c\u5355\u8c03\u961f\u5217\u3002\n\n\u81f3\u4e8e\u8dd1\u53e6\u4e00\u4e2a\u65b9\u5411\uff0c\u76f4\u63a5\u5c06\u6574\u4e2a\u5e8f\u5217\u7ffb\u8f6c\u5c31\u884c\u3002\n\n\u8be6\u60c5\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int amou=2e6+9;\nint oil[amou],d[amou],sum[amou],temp[amou],q[amou],n,head,tail=-1;\nbool is[amou];//\u6807\u8bb0\u662f\u5426\u5408\u6cd5\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d%d\",&oil[i],&d[i]);\n\t\tsum[i]=sum[i-1]+oil[i]-d[i];\n\t}\n\tfor(int i=n+1;i<=2*n;i++)\n\t\tsum[i]=sum[i-1]+oil[i-n]-d[i-n];\n\tfor(int i=2*n-1;i>=1;i--)\n\t{\n\t\twhile(head<=tail&&q[head]>=i+n) head++;\n\t\twhile(head<=tail&&sum[q[tail]]>=sum[i]) tail--;\n\t\tq[++tail]=i;\n\t\tif(i<=n&&sum[q[head]]>=sum[i-1]) is[i]=1;\n\t}\n\tmemset(sum,0,sizeof sum);\n\tmemset(q,0,sizeof q);\n\thead=0,tail=-1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i!=n) temp[i]=oil[n-i+1]-d[n-i];//\u76f8\u5f53\u4e8e\u7ffb\u8f6c\n\t\telse temp[i]=oil[n-i+1]-d[n];\n\t\tsum[i]=sum[i-1]+temp[i];\n\t}\n\tfor(int i=n+1;i<=2*n;i++)\n\t\tsum[i]=sum[i-1]+temp[i-n];\n\tfor(int i=2*n-1;i>=1;i--)\n\t{\n\t\twhile(head<=tail&&q[head]>=i+n) head++;\n\t\twhile(head<=tail&&sum[q[tail]]>=sum[i]) tail--;\n\t\tq[++tail]=i;\n\t\tif(i<=n&&sum[q[head]]>=sum[i-1]) is[n-i+1]=1;//\u6807\u8bb0\u7ffb\u8f6c\u524d\u7684\u7f16\u53f7\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(is[i]) printf(\"TAK\\n\");\n\t\telse printf(\"NIE\\n\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1606659743,
        "uid": 280519,
        "name": "Yaha",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3422 \u3010[POI2005]LOT-A Journey to Mars\u3011"
    },
    {
        "content": "### \u4f18\u5148\u961f\u5217\u4f18\u5316\n\n- \u5bf9\u4e8e\u73af\u7684\u5904\u7406\uff0c\u53c2\u8003\u533a\u95f4 DP \u53ef\u4ee5\u5c06\u73af\u7834\u574f\u6210\u94fe\u3002\n\n- \u8003\u8651\u6bcf\u4e2a\u52a0\u6cb9\u7ad9\u7684\u8d21\u732e\u5373 $p-d$\uff0c\u7ef4\u62a4\u8d21\u732e\u7684\u524d\u7f00\u548c\u3002\n\n- \u5bf9\u4e8e\u6bcf\u4e00\u79cd\u5408\u6cd5\u60c5\u51b5\uff0c\u8def\u4e0a\u7684\u4efb\u610f\u524d\u7f00\u6052\u4e0d\u5c0f\u4e8e $0$\u3002\n\n- \u5bf9\u4e8e\u65b9\u5411\uff0c\u6b63\u53cd\u8dd1\u4e24\u8fb9\u5c31\u884c\u3002\n\n\u4e0b\u9644\u4ee3\u7801\uff1a\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#include <deque>\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N=1e6+10,M=N<<1;\n\nint n;\nint p[M],d[M];\nLL a[M],s[M];\nbool f[N];\ndeque<int> q;\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)  scanf(\"%d%d\",&p[i],&d[i]);\n\t\n\tfor(int i=1;i<=n;i++)  a[i]=a[n+i]=p[i]-d[i];\n\tfor(int i=1;i<=n<<1;i++)  s[i]=s[i-1]+a[i];\n\tq.push_back(0);\n\tbool fg=0;\n\tfor(int i=1;i<=n<<1;i++)\n\t{\n\t\twhile(q.size() && i-q.front()>n)  q.pop_front();\n\t\twhile(q.size() && s[q.back()]>=s[i])  q.pop_back();\n\t\tq.push_back(i);\n\t\tif(i>=n && s[q.front()]-s[i-n]>=0) f[i-n+1]=1;  \n\t}\n\t\n\td[0]=d[n],q.clear();\n\tfor(int i=1;i<=n;i++)  a[i]=a[n+i]=p[n-i+1]-d[n-i];\n\tfor(int i=1;i<=n<<1;i++)  s[i]=s[i-1]+a[i];\n\tq.push_back(0);\n\tfor(int i=1;i<=n<<1;i++)\n\t{\n\t\twhile(q.size() && i-q.front()>n)  q.pop_front();\n\t\twhile(q.size() && s[q.back()]>=s[i])  q.pop_back();\n\t\tq.push_back(i);\n\t\tif(i>=n && s[q.front()]-s[i-n]>=0)  f[n<<1-i]=1;  \n\t}\n\t\n\tfor(int i=1;i<=n;i++)\n\t{\n        if(f[i]) puts(\"TAK\");\n        else puts(\"NIE\");\n    }\n\treturn 0;\n}\n```\n\u5b8c\u7ed3\u6492\u82b1~\n",
        "postTime": 1673000963,
        "uid": 295398,
        "name": "1105Lee",
        "ccfLevel": 0,
        "title": "LOT-A Journey to Mars \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u6709\u4e00\u4e2a\u975e\u5e38\u66b4\u529b\u7684\u601d\u8def\uff1a\u6bcf\u4e00\u4e2a\u7ad9\u7684\u6cb9\u51cf\u53bb\u5b83\u5230\u4e0b\u4e00\u4e2a\u7ad9\u7684\u8ddd\u79bb\u662f\u4ec0\u4e48\uff1f\n\n\u53ef\u4ee5\u62bd\u8c61\u7684\u7406\u89e3\u4e3a\u8fd9\u4e2a\u7ad9\u5bf9\u672c\u6b21\u65c5\u884c\u7684\u6cb9\u7684\u8d21\u732e\n\n\u5982\u679c\u8d21\u732e\u4e3a\u6b63\uff0c\u8bf4\u660e\u8d70\u4e86\u8fd9\u4e00\u4e2a\u7ad9\u540e\u6cb9\u4e0d\u4f1a\u51cf\uff0c\u53cd\u800c\u4f1a\u589e\u52a0\n\n\u5982\u679c\u8d21\u732e\u4e3a\u8d1f\uff0c\u5219\u76f8\u53cd\uff0c\u662f\u5728\u51cf\u6cb9\n\n\u5982\u679c\u8fde\u7eed\u7ecf\u8fc7\u4e86\u51e0\u4e2a\u7ad9\uff0c\u8fd9\u4e9b\u7ad9\u7684\u201c\u8d21\u732e\u201d\u8ba9\u73b0\u5728\u7684\u6cb9\u51cf\u7684\u5c0f\u4e8e\u96f6\u4e86\uff0c\u90a3\u4e48\u5c31\u4e00\u5b9a\u884c\u4e0d\u901a\u4e86\u5bf9\u5427\n\n\u6240\u4ee5\u6211\u4eec\u5bf9\u4ece\u5934\u5f00\u59cb\u50cf\u67d0\u4e00\u4e2a\u65b9\u5411\uff0c\u5bf9\u4e0a\u9762\u8bf4\u7684\u4e1c\u897f\u6c42\u4e00\u4e2a\u524d\u7f00\u548c $sum$\uff0c\u5982\u679c\u5230\u67d0\u4e00\u4e2a\u5730\u65b9\u8fd9\u4e2a\u524d\u7f00\u548c\u53d8\u6210\u4e86\u8d1f\u7684\uff0c\u5c31\u8bf4\u660e\u4e0d\u884c\u4e86\n\n\u5373\uff1a\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u679a\u4e3e\u8d77\u70b9i\uff0c\u5224\u65ad\u5728\u7ecf\u8fc7\u7684\u8f66\u7ad9\u4e2d\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u8f66\u7ad9j\uff0c\u4f7f\u5f97$sum[j]-sum[i]<0$\uff0c\u5982\u679c\u662f\uff0c\u90a3\u4e48\u5c31\u4e0d\u5408\u6cd5\u3002\n\n\u4f46\u662f\u8fd9\u4e2a\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(n^2)$\u7684\u3002\n\n\u6240\u4ee5\u6211\u4eec\u79fb\u4e00\u4e0b\u9879\uff0c\u53d8\u4e3a\u5224\u65ad$sum[j]<sum[i]$\uff0c\u6240\u4ee5\u5c31\u662f\u5224\u65ad\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8d77\u70b9$i$\uff0c\u5176\u7ecf\u8fc7\u8f66\u7ad9\u4e2d$sum[j]$\u7684\u6700\u5c0f\u503c\u662f\u5426\u5c0f\u4e8e$sum[i]$\u3002\n\n\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u5355\u8c03\u961f\u5217\u6765\u7ef4\u62a4\u4e00\u4e2a\u524d\u7f00\u548c\u7684\u6700\u5c0f\u503c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u4f4e\u5230\u4e86$O(n)$\u3002\n\n\u5177\u4f53\u7684\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<iostream>\nusing namespace std;\nconst int MAXN=1e6+5;\n#define int long long\nint a[MAXN*2],b[MAXN*2],c[MAXN*2],ans[MAXN*2][2];\nint sum1[MAXN*2];\nint sum2[MAXN*2];\nint n,head,tail;\nint q[MAXN*2];\nsigned main(){\n    scanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld %lld\",&a[i],&b[i]);\n\t\ta[i+n]=a[i];\n\t\tb[i+n]=b[i];\n\t\tc[i+n]=c[i]=b[i-1];\n\t}\n    c[1]=c[n+1]=b[n];\n    for(int i=1;i<=n*2;i++){\n    \tsum1[i]=sum1[i-1]+a[i]-b[i];\n\t}\n\tfor(int i=n*2;i>=1;i--){\n\t\tsum2[i]=sum2[i+1]+a[i]-c[i];\n\t}\n\tint head=1,tail=1;\n    head=tail=1;\n\tq[head]=0;\n    for(int i=1;i<=n*2;i++){\n        while(head<=tail&&q[head]+n+1<=i){\n\t\t\tans[q[head++]+1][0]=0;\n\t\t}\n        while(head<=tail&&sum1[q[tail]]>sum1[i]){\n\t\t\tans[q[tail--]+1][0]=1;\n\t\t}\n        q[++tail]=i;\n    }\n    head=tail=1;\n\tq[tail]=n*2+1;\n    for(int i=n*2;i>=1;i--){\n        while(head<=tail&&q[head]-n-1>=i){\n\t\t\tans[q[head++]-1][1]=0;\n\t\t}\n        while(head<=tail&&sum2[q[tail]]>sum2[i]){\n\t\t\tans[q[tail--]-1][1]=1;\n\t\t}\n        q[++tail]=i;\n    }\n    for(int i=1;i<=n;i++){\n        if(ans[i][0]&ans[i+n][1]) puts(\"NIE\");\n        else puts(\"TAK\");\n    }\n    return 0;\n}\n```",
        "postTime": 1612169928,
        "uid": 247555,
        "name": "Fool_Fish",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3422 \u3010[POI2005]LOT-A Journey to Mars\u3011"
    },
    {
        "content": "\u5bf9\u4e8e\u5706\uff08\u73af\uff09\u4e0a\u7684\u95ee\u9898\uff0c\u4e00\u822c\u90fd\u53ef\u4ee5\u8f6c\u6362\u6210\u5e8f\u5217\u4e0a\u7684\u95ee\u9898\uff08\u6bd4\u5982\u8bf4\u5408\u5e76\u77f3\u5b50\uff09\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\uff0c\u5c06\u73af\u590d\u5236\u4e00\u4e0b\u7136\u540e\u4ece(1,n)\u8fde\u63a5\u5904\u65ad\u5f00\uff0c\u6210\u4e3a[1,2,3...,n,1,2,3,...n]\u8fd9\u6837\u7684\u4e00\u4e2a\u5e8f\u5217\n\n\u7136\u540e\u95ee\u9898\u5c31\u8f6c\u6362\u6210\u4e86\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u662f\u5426\u80fd\u5411\u53f3\u8d70n\u6b65\uff08\u8fd9\u91cc\u53ea\u8ba8\u8bba\u5411\u53f3\u8d70\uff0c\u5411\u5de6\u8d70\u540c\u7406\uff0c\u4f46\u9700\u8981\u6ce8\u610fd[]\u6240\u8868\u793a\u7684\u610f\u4e49\uff09\n\n\u8fd9\u5c31\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c\u4e8e\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u4e1c\u897f\u4e86\uff08\u5176\u5b9e\u4e5f\u53ef\u4ee5\u5f53\u6210\u5e76\u67e5\u96c6\uff09\uff0c\u53e6f[i][0/1]\u8868\u793ai\u5f80\u53f3\u8d70\u6700\u8fdc\u80fd\u5230\u8fbe\u54ea\u91cc(1)\uff0c\u5e76\u4e14\u6b64\u65f6\u5269\u4e0b\u591a\u5c11\u71c3\u6cb9(0)\uff0c\u7136\u540e\u8fd9\u4e2a\u5c31\u7c7b\u4f3c\u4e8edp\uff0b\u8d2a\u5fc3\u7684\u8f6c\u79fb\u4e86\n\n\u601d\u8def\u5f88\u76f4\u63a5\uff0c\u4f46\u662f\u5b9e\u73b0\u7684\u65f6\u5019\u7565\u5fae\u611f\u89c9mengbier\uff0c\u5f3a\u70c8\u5efa\u8bae\u72ec\u7acbcode&submit\uff0c\u5982\u679cWA\u4e86\u7684\u8bdd\u53ef\u4ee5\u5199\u4e00\u4e2a\u66b4\u529b\uff08\u66b4\u529b\u6bd4\u6b63\u89e3\u96be\u5199\u7cfb\u5217\uff09\n\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n\nusing namespace std;\n\nconst int N = 2100000;\n\nint f[N][2], p[N], d[N], n, ans[N];\n\n// <\u5269\u4f59\u71c3\u6599,\u6700\u8fdc\u5230\u8fbe\u4f4d\u7f6e>\n\nvoid calc(bool flag) {\n    memset(f, 0, sizeof(f));\n    f[2 * n][0] = p[2 * n];\n    f[2 * n][1] = 2 * n;\n    for(int i = 2 * n - 1 ; i >= 1 ; -- i) {\n        f[i][0] = p[i];\n        f[i][1] = i;\n        while(f[i][0] >= d[f[i][1]] && f[i][1] + 1 <= 2 * n) {\n            f[i][0] = f[f[i][1] + 1][0] + f[i][0] - d[f[i][1]];\n            f[i][1] = f[f[i][1] + 1][1];\n        }\n    }\n    if(flag) {\n        for(int i = 1 ; i <= n ; ++ i) {\n            ans[i] |= (f[i][1] - i >= n);\n        }\n    } else {\n        for(int i = 1 ; i <= n ; ++ i) {\n            ans[n - i + 1] |= (f[i][1] - i >= n);\n        }\n    }\n}\n\nint main() {\n    scanf(\"%d\", &n);\n    for(int i = 1 ; i <= n ; ++ i) {\n        scanf(\"%d%d\", &p[i], &d[i]);\n        p[i + n] = p[i];\n        d[i + n] = d[i];\n    }\n    calc(1);\n    reverse(p + 1, p + 1 + 2 * n);\n    reverse(d + 1, d + 1 + 2 * n);\n    d[2 * n + 1] = d[1];\n    for(int i = 1 ; i <= 2 * n ; ++ i) {\n        d[i] = d[i + 1];\n    }\n    calc(0);\n    for(int i = 1 ; i <= n ; ++ i) {\n        if(ans[i]) {\n            puts(\"TAK\");\n        } else {\n            puts(\"NIE\");\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1508662240,
        "uid": 47111,
        "name": "nekko",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3422 \u3010[POI2005]LOT-A Journey to Mars\u3011"
    },
    {
        "content": "\u3010POI\u8865\u5168\u8ba1\u5212#6 POI2005 LOT\u3011\n\n\u5148\u8003\u8651\u4ece1\u53f7\u70b9\u5f00\u59cb\u65f6\u5982\u4f55\u5224\u5b9a\u80fd\u5426\u7ed5\u4e00\u5708\n\n\u53d1\u73b0\u53ea\u8981\u5bf9\u6cb9\u91cf\u548c\u8def\u7a0b\u7684\u5dee\u6c42\u4e00\u4e0b\u524d\u7f00\u548c\u770b\u4e00\u4e0b2~n+1\u53f7\u7a7a\u95f4\u7ad9\u4e2d\u6709\u6ca1\u6709\u5269\u4f59\u6cb9\u91cf\u5c0f\u4e8e0\u7684\u4f4d\u7f6e\uff08\u5047\u8bbe\u8d70\u5230n+1\u53f7\u7a7a\u95f4\u7ad9\u81ea\u52a8\u77ac\u79fb\u52301\u53f7\u7a7a\u95f4\u7ad9\uff09\n\n\u53c8\u53d1\u73b0\u4ece\u7b2ck\u4e2a\u7a7a\u95f4\u7ad9\u51fa\u53d1\u76f8\u5f53\u4e8e\u4e0d\u7ba1\u524d\u9762k-1\u4e2a\u7a7a\u95f4\u7ad9\uff0c\u67e5\u8be2 k+1~n+1\u53f7\u7a7a\u95f4\u7ad9\u5269\u4f59\u6cb9\u91cf \u548c \uff081~k\u53f7\u7a7a\u95f4\u7ad9\u5269\u4f59\u6cb9\u91cf + n+1\u53f7\u7a7a\u95f4\u7ad9\u5269\u4f59\u6cb9\u91cf\uff09 \u662f\u5426\u6709\u5c0f\u4e8e0\u7684\n\n\u8fd9\u4e2a\u4fe1\u606f\u53ef\u4ee5\u901a\u8fc7\u4e00\u5f00\u59cb1\u53f7\u70b9\u51fa\u53d1\u7684\u4fe1\u606f\u548ck\u53f7\u7a7a\u95f4\u7ad9\u7684\u524d\u7f00\u548c\u5904\u7406\u51fa\u6765\uff0c\u4e8e\u662f\u9884\u5904\u7406\u4e00\u4e0b\u4ece1\u53f7\u7a7a\u95f4\u7ad9\u5f00\u59cb\u65f6\u7684\u90a3\u4e2a\u524d\u7f00\u548c\u7684\u524d\u7f00min\u548c\u540e\u7f00min\u5c31\u53ef\u4ee5O(1)\u67e5\u8be2\u4e86\n\n\u6761\u4ef6\u5927\u6982\u957f\u8fd9\u6837\n\n```cpp\nmins[i+1]-delta>=0&&sum[n+1]-delta>=0&&sum[n+1]-delta+minp[i]>=0\n```\n\uff08\u5176\u4e2dmins\u4e3a\u524d\u7f00\u548c\u7684\u540e\u7f00min\uff0cminp\u4e3a\u524d\u7f00\u548c\u7684\u524d\u7f00min\uff0cdelta\u4e3a\u7b2ci\u4e2a\u7a7a\u95f4\u7ad9\u7684\u524d\u7f00\u548c\uff0csum[n+1]\u662f\u6240\u6709\u6cb9\u91cf\u603b\u548c\u51cf\u53bb\u6240\u6709\u8def\u7a0b\u603b\u548c\uff09\n\n\u6700\u540e\u53cd\u5411\u5904\u7406\u4e00\u904d\uff0c\u5224\u65ad\u6cbf\u7f16\u53f7\u51cf\u5c0f\u65b9\u5411\u8d70\u80fd\u4e0d\u80fd\u56de\u6765\u5c31\u597d\u4e86\n\n~~\u4e0d\u8981\u5fd8\u4e86\u7b2ci\u884c\u7684\u90a3\u4e2a\u8ddd\u79bb\u4ee3\u8868\u7684\u662fi~i+1\u95f4\u7684\u8ddd\u79bb\uff0c\u5982\u679c\u50cf\u6211\u4e00\u6837\u53d8\u6362\u5750\u6807\u7b97\u7684\u8bdd\u8981\u91cd\u6392\u4e00\u4e0b\u8ddd\u79bb~~\n\n\u6700\u540e\u7167\u4f8b\u8d34\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int MAXN=1000010;\nint len[MAXN],fuel[MAXN],sum[MAXN],minp[MAXN],mins[MAXN],ans[MAXN];\nint n;\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;++i)\n        scanf(\"%d%d\",&fuel[i],&len[i]);\n    memset(minp,0x7f,sizeof(minp));\n    memset(mins,0x7f,sizeof(mins));\n    for(int i=1;i<=n;++i)\n    {\n        sum[i+1]=sum[i]+fuel[i]-len[i];\n        if(minp[i]>sum[i+1])minp[i+1]=sum[i+1];\n        else minp[i+1]=minp[i];\n    }\n    for(int i=n+1;i>1;--i)\n    {\n        if(mins[i+1]>sum[i])mins[i]=sum[i];\n        else mins[i]=mins[i+1];\n    }\n    int delta;\n    for(int i=1;i<=n;++i)\n    {\n        delta=sum[i];\n        if(mins[i+1]-delta>=0&&sum[n+1]-delta>=0&&sum[n+1]-delta+minp[i]>=0)ans[i]|=1;\n    }\n    int tmp=len[n];\n    for(int i=n;i>=1;--i)\n        len[i]=len[i-1];\n    len[1]=tmp;\n    for(int i=1;i<n-i+1;++i)\n    {\n        swap(fuel[i],fuel[n-i+1]);\n        swap(len[i],len[n-i+1]);\n    }\n    memset(minp,0x7f,sizeof(minp));\n    memset(mins,0x7f,sizeof(mins));\n    memset(sum,0,sizeof(sum));\n    for(int i=1;i<=n;++i)\n    {\n        sum[i+1]=sum[i]+fuel[i]-len[i];\n        if(minp[i]>sum[i+1])minp[i+1]=sum[i+1];\n        else minp[i+1]=minp[i];\n    }\n    for(int i=n+1;i>1;--i)\n    {\n        if(mins[i+1]>sum[i])mins[i]=sum[i];\n        else mins[i]=mins[i+1];\n    }\n    for(int i=1;i<=n;++i)\n    {\n        delta=sum[i];\n        if(mins[i+1]-delta>=0&&sum[n+1]-delta>=0&&sum[n+1]-delta+minp[i]>=0)ans[n-i+1]|=1;\n    }\n    for(int i=1;i<=n;++i)\n    {\n        if(ans[i])printf(\"TAK\\n\");\n        else printf(\"NIE\\n\");\n    }\n    return 0;\n}\n```\nupdate@2017.9.14\n\n\u589e\u52a0\u6807\u9898\uff0c\u589e\u52a0\u90e8\u5206\u8be6\u7ec6\u63cf\u8ff0\n",
        "postTime": 1505369523,
        "uid": 3346,
        "name": "oscar",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3422 \u3010[POI2005]LOT-A Journey to Mars\u3011"
    }
]
[
    {
        "content": "1. \u6807\u7b7e: \u7b97\u4e2a\u535a\u5f08\u8bba?\n\n2. \u8bbe$S$\u4e3a$V$\u7684\u4e00\u4e2a\u5b50\u96c6.  \n\t\u5b9a\u4e49\u51fd\u6570$F_A(S)$: \u82e5\u4ece$u$\u70b9\u51fa\u53d1, \u4e0d\u8bba$B$\u5982\u4f55\u64cd\u4f5c, $A$\u603b\u80fd\u4f7f\u7535\u8f66\u5230\u8fbe$S$\u4e2d\u7684\u70b9, \u5219$u\\in F_A(S)$.  \n    \u540c\u6837\u5b9a\u4e49\u51fd\u6570$F_B(S)$: \u82e5\u4ece$u$\u70b9\u51fa\u53d1, \u4e0d\u8bba$A$\u5982\u4f55\u64cd\u4f5c, $B$\u603b\u80fd\u4f7f\u7535\u8f66\u5230\u8fbe$S$\u4e2d\u7684\u70b9, \u5219$u\\in F_B(S)$.  \n    \u6ce8\u610f\u8fd9\u91cc\u6240\u8bf4\u7684\u662f**\u5230\u8fbe**, \u4e0d\u4fdd\u8bc1\u5230\u8fbe\u540e\u4f1a\u4e00\u76f4\u505c\u7559\u5728$S$\u4e2d.  \n    \u8bbe$A,B$\u638c\u63a7\u7684\u70b9\u96c6\u5206\u522b\u4e3a$A,B$, \u6709\u5145\u7535\u7ad9\u7684\u70b9\u96c6\u4e3a$R$.\n3. \u8003\u8651$F_A(S)$\u8be5\u5982\u4f55\u6c42, \u521d\u59cb$S\\subseteq F_A(S)$.  \n\t\u5bf9\u4e8e$u\\in A$, \u82e5$\\exists {u, v}\\in E, v\\in F_A(S)\\Rightarrow u\\in F_A(S)$.  \n   \u5bf9\u4e8e$u\\notin A$, \u82e5$\\forall {u, v}\\in E, v\\in F_A(S)\\Rightarrow u\\in F_A(S)$.  \n\u540c\u7406\u53ef\u5f97$F_B(S)$\u7684\u6c42\u6cd5.\n4. \u53ea\u5230$F$\u7684\u6c42\u6cd5\u540e, \u8003\u8651\u5224\u65ad\u7535\u8f66\u662f\u5426\u4f1a\u505c\u4e0b.  \n1\u00b0 $F_A(R)=V$, \u663e\u7136\u4ece\u6240\u6709\u70b9\u51fa\u53d1\u7535\u8f66\u90fd\u4f1a\u4e00\u76f4\u884c\u9a76.  \n2\u00b0 $F_A(R)\\neq V$, \u82e5$u\\in F_B(\\complement_{V}F_A(R))$, \u4e5f\u5c31\u662f\u8bf4$B$\u53ef\u4ee5\u4fdd\u8bc1\u4ece$u$\u70b9\u51fa\u53d1\u53ef\u4ee5\u8d70\u5165\u67d0\u4e2a\u70b9$v$, \u4f7f\u5f97\u4ece$v$\u51fa\u53d1$A$\u4e0d\u80fd\u4fdd\u8bc1\u518d\u8d70\u5165$R$, \u4e5f\u5373\u4ece$u$\u51fa\u53d1\u53ef\u4ee5\u4f7f\u5f97\u7535\u8f66\u505c\u4e0b. \u5220\u9664\u6240\u6709\u4e0a\u8ff0\u7684$u$\u70b9. \u5bf9\u5269\u4e0b\u7684\u56fe\u53cd\u590d\u8fdb\u884c\u5220\u9664, \u76f4\u5230$F_A(R)=V$.\n5. \u5177\u4f53\u5220\u9664\u65b9\u6cd5\u5f88\u7b80\u5355, \u7c7b\u4f3c\u4e8e\u62d3\u6251\u6392\u5e8f, \u4e0d\u591a\u8d58\u8ff0, \u53ef\u4ee5\u53c2\u8003\u6211\u7684\u4ee3\u7801.\n6. \u590d\u6742\u5ea6\u8bc1\u660e: \u4e00\u6b21\u5220\u9664\u6700\u574f\u590d\u6742\u5ea6$\\mathcal O(m)$, \u4e00\u6b21\u5220\u9664\u81f3\u5c11\u5220\u6389$\\complement_{V}F_A(R)$, \u800c$F_A(R)\\neq V$, \u6545\u81f3\u5c11\u5220\u6389\u4e00\u4e2a\u70b9, \u5373\u6700\u591a\u8fdb\u884c$n$\u6b21\u5220\u9664. \u6240\u4ee5\u590d\u6742\u5ea6\u4e3a$\\mathcal O(nm)$.\n\n```cpp\n// luogu-judger-enable-o2\n#include <iostream>\n#include <cstdio>\n#include <queue>\nusing namespace std;\n\nint n, m;\nint a[10004], r[10004];\nint vis[10004], deg[10004], tdeg[10004];\nint f[10004];\nint tmp, sum;\nqueue<int> q;\n\nint read();\nstruct Graph {\n    int head[10004], nxt[40004], to[40004], cnt;\n    void add(int f, int t) {\n        nxt[++cnt] = head[f];\n        head[f] = cnt;\n        to[cnt] = t;\n    }\n    bool work() {//\u5bfb\u627eF_A(R)\n        tmp = 0, sum = 0;\n        for (int i = 1; i <= n; ++i) {\n            if (vis[i]) continue;\n            f[i] = 0, sum++;\n            if (r[i]) {\n                q.push(i);\n                f[i] = 1;\n            } else if (a[i]) tdeg[i] = 1;\n            else tdeg[i] = deg[i];\n        }\n        while (!q.empty()) {\n            int u = q.front();\n            q.pop();\n            tmp++;\n            for (int i = head[u]; i; i = nxt[i]) {\n                int v = to[i];\n                if (vis[v] || f[v]) continue;\n                tdeg[v]--;\n                if (!tdeg[v]) {\n                    q.push(v);\n                    f[v] = 1;\n                }\n            }\n        }\n        return tmp == sum;\n    }\n    void solve() {//\u5bfb\u627eF_B(F_A(R)\u7684\u8865\u96c6)\n        for (int i = 1; i <= n; ++i) {\n            if (vis[i]) continue;\n            if (!f[i]) {\n                q.push(i);\n                vis[i] = 1;\n            }\n            else if (!a[i]) tdeg[i] = 1;\n            else tdeg[i] = deg[i];\n        }\n        while (!q.empty()) {\n            int u = q.front();\n            q.pop();\n            for (int i = head[u]; i; i = nxt[i]) {\n                int v = to[i];\n                if (vis[v]) continue;\n                tdeg[v]--, deg[v]--;\n                if (!tdeg[v]) {\n                    q.push(v);\n                    vis[v] = 1;\n                }\n            }\n        }\n        return ;\n    }\n} g[2];\n\nint main() {\n    n = read(), m = read();\n    for (int i = 1; i <= n; ++i) a[i] = read();\n    for (int i = 1; i <= n; ++i) r[i] = read();\n    for (int i = 1; i <= m; ++i) {\n        int u = read() + 1,  v = read() + 1;\n        g[0].add(u, v);\n        deg[u]++;\n        g[1].add(v, u);\n    }\n    while (1) {\n        if (g[1].work()) break;\n        g[1].solve();\n    }\n    for (int i = 1; i <= n; ++i) vis[i] ^= 1;\n    for (int i = 1; i <= n; ++i) puts(vis[i] ? \"Yes\" : \"No\");\n    return 0;\n}\n\nint read() {\n    int x = 0, f = 1;\n    char c = getchar();\n    while (c < '0' || c > '9') {\n        if (c == '-') f = -1;\n        c = getchar();\n    }\n    while (c >= '0' && c <= '9') {\n        x = x * 10 + c - '0';\n        c = getchar();\n    }\n    return x * f;\n}\n\n```\n",
        "postTime": 1551615116,
        "uid": 51237,
        "name": "Kinandra",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4836 \u3010Toy Train \u73a9\u5177\u706b\u8f66\u3011"
    }
]
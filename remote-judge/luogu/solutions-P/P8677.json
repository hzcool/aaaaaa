[
    {
        "content": "# P8677 [\u84dd\u6865\u676f 2018 \u56fd A] \u91c7\u6cb9 \u9898\u89e3\n\n#### \u7b2c\u4e00\u95ee\n\u8fd9\u4e00\u95ee\u662f\u975e\u5e38\u7b80\u5355\u7684\uff0c\u5bb9\u6613\u60f3\u5230\u53ea\u8981\u6bcf\u6761\u8fb9\u53ea\u5728\u4ece\u7236\u8282\u70b9\u8d70\u5411\u5b50\u8282\u70b9\u548c\u4ece\u5b50\u8282\u70b9\u8d70\u56de\u7236\u8282\u70b9\u65f6\u88ab\u904d\u5386\uff0c\u7b2c\u4e00\u95ee\u7684\u7b54\u6848\u5c31\u662f  $ \\sum_{i=1}^{n-1} b_{i} \\times2 $\uff0c\u5373\u6240\u6709\u8fb9\u6743\u548c\u7684\u4e8c\u500d\u3002\n\n\u7b2c\u4e00\u95ee\u7684\u4e3b\u8981\u7528\u9014\u5176\u5b9e\u662f\u9650\u5236\u7b2c\u4e8c\u95ee\u7684\u884c\u52a8\u8def\u5f84\u3002\n\n#### \u7b2c\u4e8c\u95ee\n\u7531\u7b2c\u4e00\u95ee\u8981\u6c42\u8d70\u6700\u77ed\u8def\u7a0b\uff0c\u94bb\u4e95\u7684\u5de5\u4f5c\u4eba\u5458\u6bcf\u8fdb\u5165\u4e00\u68f5\u5b50\u6811\uff0c\u5c31\u5fc5\u987b\u628a\u8be5\u5b50\u6811\u5185\u6240\u6709\u6cb9\u7530\u90fd\u5efa\u4e0a\u6cb9\u4e95\uff0c\u624d\u53ef\u79bb\u5f00\u6b64\u5b50\u6811\u56de\u5230\u7236\u8282\u70b9\u3002\n\n\u53d1\u73b0\u4e86\u4ec0\u4e48\uff1f\u6bcf\u68f5\u5b50\u6811\u90fd\u53ef\u4ee5\u5f53\u4f5c\u5b50\u95ee\u9898\u5904\u7406\uff08\u7c7b\u4f3c\u6811\u5f62 DP\uff0c\u5c06\u6b64\u5b50\u6811\u5316\u4e3a\u4e00\u4e2a\u201c\u6cb9\u7530\u201d\u3002\n\n\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u5728\u6bcf\u68f5\u5b50\u6811\u5efa\u9020\u94bb\u4e95\u9700\u8981\u82b1\u8d39\u7684\u4eba\u529b $ B $\uff0c\u548c\u6b64\u68f5\u5b50\u6811\u7559\u4e0b\u4e86\u591a\u5c11\u4eba\u7ef4\u62a4 $ S $\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u3002\n\n\u8f6c\u79fb\u8fc7\u7a0b\u8003\u8651\u8d2a\u5fc3\u3002\u5728\u4e24\u5c42\u4e4b\u95f4\uff0c\u53ef\u4ee5\u4efb\u610f\u9009\u62e9\u8fdb\u5165\u5b50\u6811\u548c\u5728\u76ee\u524d\u7684\u6839\u8282\u70b9\u5efa\u7acb\u6cb9\u4e95\u7684\u987a\u5e8f\uff0c\u6211\u4eec\u8981\u5148\u5728  $ B_{i}-S_{i} $  \u8f83\u5927\u7684\u6cb9\u7530\uff08\u6216\u5df2 DP \u7684\u5b50\u6811\uff0c\u53ef\u770b\u4f5c\u4e00\u4e2a\u5927\u201c\u6cb9\u7530\u201d\uff09\u5efa\u6cb9\u4e95\uff0c\u6b63\u786e\u6027\u4ece\u540e\u9762\u7684\u9012\u63a8\u5f0f\u53ef\u4ee5\u770b\u51fa\u6765\u3002\n\n\u63a5\u4e0b\u6765\u662f\u8d2a\u5fc3\u7684\u5b9e\u73b0\u8fc7\u7a0b\uff0c\u6211\u4f7f\u7528\u7684\u662f\u9012\u5f52\uff08\u62d3\u6251\u6392\u5e8f\u5f53\u7136\u4e5f\u53ef\uff09\u3002\n\n\u5148\u9012\u5f52\u81ea\u5df1\u7684\u6bcf\u68f5\u5b50\u6811\uff0c\u5c06\u5b83\u5316\u4e3a\u4e00\u4e2a\u201c\u6cb9\u7530\u201d\uff0c\u5e76\u5c06\u5b83\u4eec\u7684  $ B $  \u548c  $ S $  \u8bb0\u5230\u6570\u7ec4\uff08\u6211\u7528\u7684 vector\uff09\u4e2d\uff0c\u4fbf\u4e8e\u63a5\u4e0b\u6765\u6392\u5e8f\u3002\n\n```cpp\nfor (int i=head[u];i;i=e[i].nex)\n{   \n       if (e[i].to==fa)    continue; //\u9632\u6b62\u8d70\u56de\u7236\u8282\u70b9\n       func(e[i].to,u);\n       a[u].push_back(a[e[i].to][0]);\n}\nsort(a[u].begin(),a[u].end(),cmp);\n```\n\n\u6c42\u503c\u90e8\u5206\u770b\u4ee3\u7801\uff0c\u6211\u5b9a\u4e49\u4e86  $ C $  \u8868\u793a  $ B-S$\uff0c\u6ca1\u6709\u7ee7\u7eed\u5b58  $ S $\uff0c\u4f60\u76f4\u63a5\u7528  $ S $  \u4e5f\u53ef\u3002\n\n```cpp\nint ansb=0,nc=0; //ansb \u8868\u793a\u5904\u7406\u5230\u73b0\u5728\u5df2\u7ecf\u9700\u8981\u7684\u4eba\u529b\uff0cnc \u8868\u793a\u76ee\u524d\u5269\u4f59\u7684\u4eba\u529b\nfor (int i=0;i<a[u].size();i++)    //\u5bf9\u4e8e\u6bcf\u4e2a\u201c\u6cb9\u7530\u201d\n{\n    ansc+=a[u][i].b-a[u][i].c; //\u8fd9\u91cc\u662f\u4e3a\u4e86\u6c42 ansc \u4f5c\u51c6\u5907\uff0c\u53ef\u4ee5\u5ffd\u7565\u4e00\u4f1a\u518d\u770b\n    if(nc<a[u][i].b)  ansb+=a[u][i].b-nc,nc=a[u][i].c; //\u5269\u4f59\u4eba\u6570\u4e0d\u6ee1\u8db3\u6b64\u6cb9\u7530\u8981\u6c42\uff0c\u52a0\u4eba\u529b\n    else    nc-=a[u][i].b-a[u][i].c; //\u6ee1\u8db3\u8981\u6c42\u53ea\u9700\u8981\u7559\u4e0b\u4eba\u7ef4\u62a4\n}\nansc=ansb-ansc; //\u6c42\u771f\u6b63\u7684 ansc\na[u][0].b=ansb,a[u][0].c=ansc; //\u6b64\u5b50\u6811\u5904\u7406\u5b8c\n```\n\n#### \u6ce8\u610f\n\n-  $ B_{i} $  \u4e0d\u4e00\u5b9a\u5927\u4e8e  $ S_{i} $\uff0c\u6b64\u65f6\u5c06  $ B_{i}=S_{i}$\u3002\n- \u4ee5\u4efb\u610f\u8282\u70b9\u4e3a\u6839\u8282\u70b9\u7ed3\u679c\u90fd\u76f8\u540c\uff0c\u6240\u4ee5\u9ed8\u8ba4\u6839\u8282\u70b9\u662f 1\u3002\n\n#### \u5b8c\u6574\u4ee3\u7801\uff0c\u4e0d\u592a\u4f18\u7f8e\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 100004\nstruct node{\n\tint b,s,c;\n};\nbool cmp(node x,node y){return x.c>y.c;}\nstruct edge{\n    int to,nex;\n}e[N<<1];\nint head[N];\nvector<node> a[N];\nvoid func(int u,int fa)\n{\n    int ansc=0;\n    for (int i=head[u];i;i=e[i].nex)\n    {   \n        if (e[i].to==fa)    continue;\n        func(e[i].to,u);\n        a[u].push_back(a[e[i].to][0]);\n    }\n    sort(a[u].begin(),a[u].end(),cmp);\n    int ansb=0,nc=0;\n    for (int i=0;i<a[u].size();i++)\n    {\n        ansc+=a[u][i].b-a[u][i].c;\n        if(nc<a[u][i].b)  ansb+=a[u][i].b-nc,nc=a[u][i].c;\n        else    nc-=a[u][i].b-a[u][i].c;\n    }\n    ansc=ansb-ansc;\n    a[u][0].b=ansb,a[u][0].c=ansc;\n    return;\n}\nsigned main()\n{\n  int n;\n  node tmp;\n  cin>>n;\n  for (int i=1;i<=n;i++) a[i].push_back(tmp),scanf(\"%d\",&a[i][0].b);\n  for (int i=1;i<=n;i++)\n  {\n  \tscanf(\"%d\",&a[i][0].s);\n   \ta[i][0].c=max(a[i][0].b-a[i][0].s,0);\n   \ta[i][0].b=max(a[i][0].b,a[i][0].s);\n  }\n int nu,nv,nw,w=0;\n for (int i=1;i<=n-1;i++)\n {\n\tscanf(\"%d %d\",&nv,&nw);\n    w+=nw,nu=i+1;\n\te[(i<<1)-1].to=nv,e[(i<<1)-1].nex=head[nu],head[nu]=(i<<1)-1;\n\te[i<<1].to=nu,e[i<<1].nex=head[nv],head[nv]=i<<1;\n }\n cout<<w*2<<' ';\n func(1,0);\n cout<<a[1][0].b;\n}\n```",
        "postTime": 1681005378,
        "uid": 838170,
        "name": "lucas_salt",
        "ccfLevel": 0,
        "title": "# P8677 [\u84dd\u6865\u676f 2018 \u56fd A] \u91c7\u6cb9 \u9898\u89e3"
    }
]
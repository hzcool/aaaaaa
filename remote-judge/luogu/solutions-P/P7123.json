[
    {
        "content": "\u6211\u4eec\u5e0c\u671b\u7528 DFS \u641c\u904d\u6574\u5f20\u56fe\uff0c\u5e76\u6a21\u62df\u7c7b\u4f3c Tarjan \u7684\u8fc7\u7a0b\uff0c\u5927\u81f4\u6709\uff1a\n\n- \u4e0d\u59a8\u8bbe left \u6807\u8bb0\u7684\u70b9\u8868\u793a\u88ab\u904d\u5386\u8fc7\u3001\u4e14\u4e0d\u5728\u6808\u4e2d\u7684\u70b9\uff08\u6b64\u5904\u6808\u5373\u4e3a DFS \u7684\u6808\uff0c\u800c\u4e0d\u662f Tarjan \u7b97\u6cd5\u4e2d\u7684\u6808\uff09\uff0cright \u8868\u793a\u6808\u4e2d\u7684\u70b9\uff0ccenter \u8868\u793a\u8fd8\u6ca1\u8bbf\u95ee\u8fc7\u7684\u70b9\u3002\n- \u6211\u4eec\u5e0c\u671b\u5bf9\u6240\u6709\u70b9\u8fdb\u884c $m$ \u6b21 ``1 right 1`` \u6765\u904d\u5386\u5176\u6240\u6709\u51fa\u8fb9\u3002\n- \u5728 DFS \u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u8bb0\u5f55\u5f53\u524d\u70b9 $u$ \u5728 DFS \u6811\u4e2d\u7684\u5b50\u6811\u4e2d\u7684\u70b9\u80fd\u5230\u8fbe\u7684\u6808\u4e2d DFS \u5e8f\u6700\u5c0f\u7684\u70b9 $\\operatorname {low}_u$ \u548c\u5f53\u524d\u70b9\u7684\u8ddd\u79bb $\\operatorname {lowcnt}_u$ \u548c\u7528\u4e8e\u66f4\u65b0 $\\operatorname {low}_u$ \u6240\u7528\u5230\u7684\u51fa\u8fb9 $\\operatorname {lowidx}_u$\u3002\n- \u5728\u9000\u51fa\u4e00\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u6211\u4eec\u628a\u6807\u8bb0\u642c\u5230\u6307\u5411 $\\operatorname {low}_u$ \u7684\u4f4d\u7f6e\uff08\u7531\u4e8e\u56fe\u4e3a\u5f3a\u8fde\u901a\u56fe\uff0c\u6240\u4ee5\u82e5 $u$ \u4e0d\u662f DFS \u6811\u7684\u6839\uff0c\u5219 $\\operatorname {low}_u$ \u662f $u$ \u7684\u67d0\u4e2a\u7956\u5148\uff09\u3002\n\n\u66f4\u5177\u4f53\u5730\uff0c\u6211\u4eec\u5206\u522b\u8003\u8651\u5f53\u524d\u70b9 $u$ \u8d70\u8fc7\u67d0\u4e2a\u901a\u9053\u5230\u8fbe\u4e86 $v$ \u4e3a\u4e09\u79cd\u70b9\u7684\u60c5\u51b5\uff1a\n\n- \u82e5 $v$ \u4e3a center\uff0c\u5219\u9012\u5f52\u5904\u7406 $v$\uff0c\u7136\u540e\u7528 $\\operatorname{lowcnt}_v-1$ \u66f4\u65b0 $\\operatorname {lowcnt}_u$\u3002\n- \u82e5 $v$ \u4e3a right\uff0c\u5219\u610f\u5473\u7740\u6211\u4eec\u8d70\u5230\u4e86\u4e00\u4e2a\u8fd4\u7956\u8fb9\uff08\u5982\u4e0b\u56fe\u5de6\uff09\uff1a\n  - \u4ece $v$ \u5f00\u59cb\uff0c\u5148\u8fdb\u884c\u4e00\u6b21 ``0 left 0``\uff0c\u4e34\u65f6\u6807\u8bb0\u4e00\u4e0b\u5f53\u524d\u70b9\uff08\u6b64\u65f6\u7684 left \u610f\u4e49\u4e0e\u4e0a\u9762\u5b9a\u4e49\u7684\u4e0d\u540c\uff0c\u53ea\u662f\u4e3a\u4e86\u533a\u5206\u6808\u4e2d\u7684\u8282\u70b9\uff0c\u4e4b\u540e\u5c06\u5f88\u5feb\u88ab\u6539\u56de\u53bb\uff09\u3002\n  - \u63a5\u4e0b\u6765\u8fdb\u884c\u82e5\u5e72\u6b21 ``0 right 0`` \u987a\u7740\u539f\u5148\u8d70\u8fc7\u7684\u8def\u5f84\u8d70\uff0c\u76f4\u5230\u9047\u89c1\u88ab\u6807\u4e3a left \u7684 $v$\uff0c\u5e76\u8bb0\u5f55\u8fd9\u90e8\u5206\u7684\u8fb9\u6570 $c$\u3002\n  - \u63a5\u4e0b\u6765\u518d\u8fdb\u884c $c$ \u6b21 ``0 right 0``\uff0c\u4e8e\u662f\u6211\u4eec\u5728\u8fd4\u56de $u$ \u7684\u540c\u65f6\u987a\u5e26\u628a $v$ \u7ed9\u6539\u56de\u4e86 right\u3002\n  - \u7528 $c$ \u66f4\u65b0 $\\operatorname {lowcnt}_u$\uff0c\u5f53\u524d\u8fb9\u66f4\u65b0 $\\operatorname {lowidx}_u$\u3002\n- \u82e5 $v$ \u4e3a left\uff0c\u5219\u610f\u5473\u7740\u6211\u4eec\u8d70\u5230\u4e86\u4e00\u4e2a\u5df2\u7ecf\u8bbf\u95ee\u8fc7\u4e86\u7684\u70b9\uff08\u5982\u4e0b\u56fe\u53f3\uff09\uff0c\u6211\u4eec\u5e0c\u671b\u9000\u56de\u5230 $u$\u3002\n  - \u82e5\u5f53\u524d\u9047\u5230\u7684\u8282\u70b9\u4e00\u76f4\u662f left\uff0c\u5219\u4e00\u76f4\u8fdb\u884c ``0 left 0``\u3002\n  - \u7136\u540e\u6211\u4eec\u603b\u4f1a\u627e\u5230\u4e00\u4e2a right\uff0c\u4e4b\u540e\u4e00\u76f4\u8fdb\u884c ``0 right 0`` \u627e\u5230\u7b2c\u4e00\u4e2a left \u5373\u4e3a $v$\uff0c\u8bb0\u5f55\u8fd9\u90e8\u5206\u7684\u8fb9\u6570 $c$\u3002\n  - \u4e0d\u96be\u901a\u8fc7\u7c7b\u4f3c\u65b9\u6cd5\u518d\u8d70\u4e00\u5708\uff0c\u4f46\u5c11\u4e00\u6761\u8fb9\u8d70\u56de $u$\u3002\n  - \u7528 $c-1$ \u66f4\u65b0 $\\operatorname {lowcnt}_u$\uff0c\u5f53\u524d\u8fb9\u66f4\u65b0 $\\operatorname {lowidx}_u$\u3002\n\n\u5728\u4e00\u4e2a\u70b9\u6240\u6709 $m$ \u6761\u51fa\u8fb9\u90fd\u88ab\u8bbf\u95ee\u5b8c\u4e4b\u540e\uff0c\u6211\u4eec\u8981\u56de\u6eaf\u5230\u5176\u7236\u4eb2\uff0c\u8003\u8651\u5229\u7528\u5148\u524d\u7b97\u8fc7\u7684 $\\operatorname {low}_u$ \u505a\u5230\u201c\u8fd4\u7956\u201d\uff1a\n\n- \u5148\u5c06\u672c\u8eab\u8bbe\u4e3a left\uff0c\u7136\u540e\u8d70\u5230 $\\operatorname{lowidx}_u$\u3002\n- \u4e0d\u65ad\u7684\u505a ``0 left 0``\uff0c\u76f4\u5230\u9047\u89c1\u4e00\u4e2a right \u8282\u70b9\uff0c\u663e\u7136\u5176\u4e3a $\\operatorname {low}_u$\u3002\n- \u518d\u5f80\u4e0b\u8d70 $\\operatorname{lowcnt}_u-1$ \u6b65\u5373\u53ef\u8d70\u5230 $u$ \u7684\u7236\u4eb2\u3002\n\n\u7136\u540e\u5c31\u5b8c\u6210\u4e86 DFS \u7684\u8fc7\u7a0b\uff0c\u6ce8\u610f\u5230\u6bcf\u6761\u8fb9\u6211\u4eec\u53ef\u80fd\u9700\u8981\u8d70 $2n$ \u6b65\uff0c\u603b\u5171 $nm$ \u6761\u8fb9\uff0c\u6240\u4ee5\u81f3\u591a\u8d70 $2n^2m=16000$ \u6b65\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n![\u56fe\u6e90\u5b98\u65b9\u9898\u89e3](https://i.loli.net/2021/11/02/bEapPyHBDJTiuOW.png)\n\n```cpp\nconst int INF = 0x3f3f3f3f;\n\nchar str[2][10] = { \"left\", \"right\" }, buf[10];\nchar Pass(int a, char typ, int b) {\n\tprintf(\"%d %s %d\\n\", a, str[typ == 'l' ? 0 : 1], b);\n\tfflush(stdout);\n\tscanf(\"%s\", buf);\n\tif(buf[0] == 't') exit(0);\n\treturn buf[0];\n}\nint Walk(char typ, int x = INF) {\n\tchar cur = typ; int ret = 0;\n\tfor(; cur == typ && ret < x; ++ret) cur = Pass(0, typ, 0);\n\treturn ret;\n}\n\nint m, dfv, low_c[30];\nint Dfs() {\n\tint u = ++dfv, low_idx = -1;\n\tfor(int i = 0; i < m; ++i) {\n\t\tchar ret = Pass(1, 'r', 1);\n\t\tint c = 0;\n\t\tif(ret == 'c') {\n\t\t\tint v = Dfs();\n\t\t\tc = low_c[v] - 1;\n\t\t} else if(ret == 'r') {\n\t\t\tif(Pass(0, 'l', 0) == 'r') {\n\t\t\t\tc = Walk('r'); Walk('r', c);\n\t\t\t} else {\n\t\t\t\tc = 0; Pass(0, 'r', 0);\n\t\t\t}\n\t\t} else if(ret == 'l') {\n\t\t\tWalk('l'); c = Walk('r') - 1;\n\t\t\tWalk('l'); Walk('r', c);\n\t\t}\n\t\tif(c > low_c[u]) {\n\t\t\tlow_idx = (i + 1) % m;\n\t\t\tlow_c[u] = c;\n\t\t}\n\t}\n\tif(u != 1) {\n\t\tchar cur = Pass(low_idx, 'l', low_idx);\n\t\tif(cur == 'l') Walk('l');\n\t\tWalk('r', low_c[u] - 1);\n\t}\n\treturn u;\n}\n\nint main() {\n\tscanf(\"%d%s\", &m, buf);\n\tDfs();\n\treturn 0;\n}\n```",
        "postTime": 1635940025,
        "uid": 34238,
        "name": "zhylj",
        "ccfLevel": 9,
        "title": "P7123"
    }
]
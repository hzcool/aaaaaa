[
    {
        "content": "# **P6720**\n\n[\u9898\u9762\u6233\u8fd9\u91cc](https://www.luogu.com.cn/problem/P6720)\n[block](https://www.luogu.com.cn/blog/Orz-Orz/solution-p6720)\n\n## **\u5f02\u6216\u7684\u6027\u8d28\uff1a**\n\n- $a\u2295b=c$  \u2192   $a\u2295c=b$ \u4e14 $b\u2295c=a$ \n  \n\u5bf9\u4e8e**\u6570\u5217** $R_n$ \uff0c\u5df2\u77e5\uff1a\n\n-  $R_n$ = $R_{n-2}$ $\\oplus $ $R_{n-1}$\n  \n-  $R_3$ = $R_2$ $\\oplus $ $R_1$\n   \n-  $R_4$ = $R_3$ $\\oplus $ $R_2$=$R_1$\n\n-  $R_5$ = $R_4$ $\\oplus $ $R_3$=$R_1$ $\\oplus $ $R_3$ = $R_2$\n\n-  $R_6$ = $R_5$ $\\oplus $ $R_4$=$R_1$ $\\oplus $ $R_2$ = $R_3$\n\n-            .......\n    \n\u5373\u53d1\u73b0**\u9664** $R_0$ \u5916\uff0c\u6570\u5217 $R_n$ \u5448**\u5468\u671f\u6027**\uff1a\n\n- $R_n$ = $R_{(n-1)\\pmod 3+1}$\n\n\u4e14\u81f3\u591a\u7531 $4$ \u4e2a\u5143\u7d20\u7ec4\u6210\uff1a $R_0$ \u3001 $R_1$ \u3001 $R_2$ \u3001 $R_3$ \u3002\n\n\uff08 $R_0$ \u5f88\u7279\u6b8a\u53ea\u5728\u7b2c\u4e00\u4f4d\u51fa\u73b0\uff0c\u6240\u4ee5\u8bf4\u653e\u5728\u6700\u540e\u5904\u7406\uff09\u3002\n\n\u540c\u65f6\u51fd\u6570 $M_{(n)}$ \u662f\u4e00\u4e2a**\u53cc\u5c04**\uff0c\u5373\u4fdd\u8bc1\u5bf9\u4e8e\uff1a\n\n> $x\\not=y$ \uff0c $x =y$  \u2192   $M_{(x)}\\not=M_{(y)}$ \n\n\u82e5\u7b2c $i+1$ \u6b21\u8be2\u95ee\u4e0e\u7b2c $j+1$ \u6b21\u8be2\u95ee\u8fd4\u56de\u7684\u503c $M_{k}$ **\u76f8\u540c**\uff0c\n\n\u4e14\u6b64\u65f6\u7684 $R_i$ \u4e0e $R_j$ \u7684\u503c**\u4e0d\u540c**\uff0c\u5373\u662f \uff1a \n\n> $M(A_i \\oplus R_i)$ = $M(A_j \\oplus R_j)$\n\n\u5219\u53ef\u77e5\uff1a\n\n> $A_i \\oplus R_i$ = $A_j \\oplus R_j$\n\n**\u79fb\u9879\u53ef\u5f97\uff1a**\n\n> $A_i \\oplus A_j$ = $R_i \\oplus R_j =R_k$ \n\n$A_i$ \u3001 $A_j$ \u4e3a\u8f93\u5165\uff08**\u5df2\u77e5**\uff09\u7684\uff0c $R_i$ \u3001 $R_j$ \u53ef**\u8f6c\u5316**\u4e3a $R_1$ \u3001 $R_2$ \u3001 $R_3$ \u4e2d\u7684**\u4e24\u4e2a**\uff0c\n\n\u90a3\u4e48\u6b64\u65f6\u7684$R_k$\u53ef\u6c42\uff0c**\u540c\u7406**\u53ef\u6c42\u51fa $R_1$ \u3001 $R_2$ \u3001 $R_3$ \u3002\n\n\n------------\n\n## \u4ee3\u7801\u5b9e\u73b0.cpp\uff1a\n\n\u7b2c\u4e00\u6b21**\u8be2\u95ee** $0$ \uff0c\u8bb0\u5f55 $M[R[0]]$ \u7684\u503c\uff1a\n\n```cpp\n\tprintf(\"0\\n\");\n\tcout.flush();\n\tint TMP;\n\tscanf(\"%d\",&TMP);\n```\n\u5f53 $R[x]$  **\u4e0d\u786e\u5b9a**\u65f6\uff0c\u7b2c $i$ \u6b21\u8be2\u95ee **\u8be2\u95ee\u6b21\u6570** $-2$ \u5373 $(i-2)$ \uff0c\n\n\u6570\u7ec4 $R$ \u7684**\u811a\u6807**\u53ef\u8868\u793a\u4e3a: $i$ $mod$ $3+1$ \u3002\n\n\u5b9a\u4e49\u503c\u57df\u6570\u7ec4 $pos[j]$ \u8868\u793a\u5f53 $M[x]$ \u4e3a $j$ \u65f6\u7684**\u8be2\u95ee\u6b21\u6570** $-2$ \u5373\u4e3a  $(i-2)$ \u3002\n\n```\nfor(int i=0; i<256; i++) {\n\t\tprintf(\"%d\\n\",i);\n\t\tcout.flush();\n\t\tscanf(\"%d\",k+i);\n\t\tif(pos[k[i]]!=-1)//\u8868\u793a\u5927\u5c0f\u4e3ak[i]\u7684\u503c\u5df2\u7ecf\u51fa\u73b0\u8fc7\u4e86 \n\t\t\tR[find(i%3+1,pos[k[i]]%3+1)]=(i^(pos[k[i]]));\n        // R[k]=R[i]^R[j]=A[i]^A[j] \n\t\tpos[k[i]]=i;\n\t\ttot=i;\n        if(check()) break;\n\t}\n```\n\u5982\u679c $R[1]$ \u3001 $R[2]$ \u3001 $R[3]$ \u4e2d\u5df2\u77e5**\u4e24\u4e2a**\uff0c\u5c31\u53ef\u4ee5**\u5f02\u6216**\u8d77\u6765\u63a8\u51fa\u53e6\u4e00\u4e2a\uff0c\u9000\u51fa\u5faa\u73af\uff1b\n\n\u6b64\u65f6\u5c31\u53ef\u4ee5**\u6784\u9020**\u51fa\u51fd\u6570 $M_{(x)}$ \u7684\u811a\u6807\uff0c**\u5b9a\u5411**\u6c42\u51fa\u672a\u77e5\u7684 $M_{(x)}$ \uff1a\n\n~~\u4e4b\u524d\u5ffd\u7565\u7684 $R[0]$ \u4e5f\u53ef\u4ee5\u5728\u8fd9\u4e2a\u65f6\u5019\u987a\u4fbf\u6c42\u51fa\u6765\u3002~~\n```cpp\nfor(int i=0; i<256; i++) {\n\t\tif(M[i]==-1) {//\u8bf4\u660eM[i]\u8fd8\u672a\u66f4\u65b0\n\t\t\ttot++;\n\t\t\tprintf(\"%d\\n\",(R[tot%3+1]^i));\n\t\t\tcout.flush();\n\t\t\tscanf(\"%d\",M+i);\n\t\t}\n\t\tif(M[i]==TMP) R[0]=i;\n\t}\n```\n\n\u7531**\u5bb9\u65a5\u539f\u7406**\u53ef\u8bc1\u660e\uff0c\u8be2\u95ee\u6b21\u6570\u5728 $256$ \u6b21\u5185\u4e00\u5b9a\u53ef\u4f1a\u6709**\u91cd\u590d**\u7684\u6570\u5b57\u51fa\u73b0\uff0c\u6240\u4ee5\u80fd\u591f\u5728\u8981\u6c42\u7684\u6b21\u6570\u5185\u8be2\u95ee\u5f97\u5230\u7b54\u6848\u3002\n\n~~\u6700\u540e**\u8f93\u51fa**\u7684\u65f6\u5019\u8bb0\u5f97 `cout.flush()`\uff01~~\n\n\u8be6\u7ec6\u5b9e\u73b0**\u4ee3\u7801**\u9644\u4e0a\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint R[5]= {-1,-1,-1,-1},M[333];//RT \nint pos[333],k[333],tot;\ninline int find(int x,int y) {//\u8f93\u51651\u30012\u30013\u4e2d\u7684\u4e24\u4e2a\u8fd4\u56de\u53e6\u4e00\u4e2a \n\tfor(int i=1; i<=3; i++) if(i!=x&&i!=y) return i;\n}\ninline bool check() {//\u5224\u65ad\u9000\u51fa\u6761\u4ef6 \n\tint tmp=0;\n\tfor(int i=1; i<=3; i++) tmp+=(R[i]==-1);//\u5224\u65adR[]\u6709\u51e0\u4e2a\u5df2\u6c42\u51fa \n\tif(tmp==1) {\n\t\tif(R[1]==-1) R[1]=R[2]^R[3];//\u82e5\u6709\u4e24\u4e2aR[]\u5df2\u7ecf\u6c42\u51fa\uff0c\u5373\u53ef\u63a8\u51fa\u7b2c\u4e09\u4e2aR[] \n\t\tif(R[2]==-1) R[2]=R[1]^R[3];\n\t\tif(R[3]==-1) R[3]=R[1]^R[2];\n\t}\n\treturn (tmp<=1);\n}\nint main() {\n\tmemset(M,-1,sizeof(M));//\u7531\u4e8e\u6570\u636e\u67090 \u9700\u8981\u521d\u59cb\u5316 \n\tmemset(pos,-1,sizeof(pos));\n\tprintf(\"0\\n\");\n\tcout.flush();\n\tint TMP;\n\tscanf(\"%d\",&TMP);\n\tfor(int i=0; i<256; i++) {\n\t\tprintf(\"%d\\n\",i);\n\t\tcout.flush();\n\t\tscanf(\"%d\",k+i);\n\t\tif(pos[k[i]]!=-1)\n\t\t\tR[find(i%3+1,pos[k[i]]%3+1)]=(i^(pos[k[i]]));\n\t\tpos[k[i]]=i;\n\t\ttot=i;\n\t\tif(check()) break;\n\t}\n\tfor(int i=0; i<=tot; i++) M[(i^R[i%3+1])]=k[i];\n\tfor(int i=0; i<256; i++) {\n\t\tif(M[i]==-1) {\n\t\t\ttot++;\n\t\t\tprintf(\"%d\\n\",(R[tot%3+1]^i));\n\t\t\tcout.flush();\n\t\t\tscanf(\"%d\",M+i);\n\t\t}\n\t\tif(M[i]==TMP) R[0]=i;\n\t}\n\tprintf(\"SOLUTION\\n\");\n\tcout.flush();\n\tfor(int i=0; i<=2; i++) {\n\t\tprintf(\"%d\\n\",R[i]);\n\t\tcout.flush();\n\t}\n\tfor(int i=0; i<256; i++) {\n\t\tprintf(\"%d\\n\",M[i]);\n\t\tcout.flush();\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1606888798,
        "uid": 271577,
        "name": "\u5165\u95e8\u9898\u6740\u624b",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P6720"
    }
]
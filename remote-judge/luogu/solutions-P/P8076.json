[
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/crashed/p/17002911.html)\u3002\n\n# \u9898\u76ee\n\n[\u70b9\u8fd9\u91cc](https://www.luogu.com.cn/problem/P8076)\u770b\u9898\u76ee\u3002\n\n----------\n\n\u7ed9\u5b9a\u4e00\u5f20 $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c**\u4fdd\u8bc1\u6ca1\u6709\u91cd\u8fb9\u548c\u81ea\u73af**\uff08\u5e94\u8be5\uff09\u3002\n\n\u73b0\u5728\uff0c\u4f60\u9700\u8981\u7ed9\u6bcf\u6761\u8fb9\u5206\u914d\u4e00\u4e2a\u989c\u8272\u3002\u989c\u8272\u53ea\u6709\u4e24\u79cd\u3002\u4f60\u7684\u65b9\u6848\u9700\u8981\u4fdd\u8bc1**\u6bcf\u4e2a\u5ea6\u6570 $\\ge 2$ \u7684\u7ed3\u70b9\u7684\u90bb\u63a5\u8fb9\u7684\u989c\u8272\u4e0d\u80fd\u76f8\u540c**\u3002\u5224\u65ad\u6709\u65e0\u65b9\u6848\uff0c\u5982\u679c\u6709\u5219\u6570\u51fa\u4efb\u4f55\u4e00\u7ec4\u3002\n\n\u6240\u6709\u6570\u636e\u6ee1\u8db3 $1\\le n,m\\le 10^5$\u3002 \n\n# \u5206\u6790\n\n\u9996\u5148\u5f53\u7136\u9700\u8981\u770b\u4e00\u4e0b\u4ec0\u4e48\u60c5\u51b5\u65e0\u89e3\uff1f\u753b\u4e00\u4e9b\u7b80\u5355\u7684\u60c5\u51b5\uff1a\u73af\u3001\u6811......\u53ef\u4ee5\u53d1\u73b0**\u53ea\u6709\u5355\u72ec\u7684\u5947\u73af\u65e0\u6cd5\u6784\u9020\u51fa\u89e3**\uff0c\u5176\u5b83\u60c5\u51b5\u90fd\u53ef\u4ee5\u3002\n\n\u90a3\u8fd9\u610f\u5473\u7740\u4ec0\u4e48\u5462\uff1f\u5982\u679c\u4e0d\u662f\u5947\u73af\u6709\u4ec0\u4e48\u6784\u9020\u65b9\u6cd5\u5462\uff1f\u5982\u679c\u53ef\u4ee5\u60f3\u5230**\u6b27\u62c9\u8def**\u7684\u8bdd\uff0c\u90a3\u4e48\u8fd9\u4e2a\u95ee\u9898\u5c31\u5f88\u5bb9\u6613\u4e86\u3002\n\n--------\n\n\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u5982\u679c\u8fde\u901a\u5757\u5185\u5b58\u5728\u6b27\u62c9\uff08\u56de\uff09\u8def\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5**\u4ea4\u66ff\u67d3\u8272\uff0c\u5373\u6309\u6b27\u62c9\u8def\u7684\u987a\u5e8f\u67d3\u6210 `01010101...`**\u3002\u9664\u4e86\u8d77\u70b9\u4ee5\u5916\u70b9\u90fd\u53ef\u4ee5\u4fdd\u8bc1\u6ee1\u8db3\u6761\u4ef6\uff0c\u56e0\u4e3a\u8fdb\u5165\u5b83\u7684\u8fb9\u548c\u79bb\u5f00\u5b83\u7684\u8fb9\u989c\u8272\u662f\u4e0d\u540c\u7684\u3002\u8d77\u70b9\u5219\u9700\u8981\u989d\u5916\u8ba8\u8bba\uff1a\n\n- \u5982\u679c\u5b58\u5728\u5ea6\u6570 $>2$ \u7684\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u62ff\u8fd9\u79cd\u70b9\u5f53\u8d77\u70b9\u3002\u8fd9\u6837\u8d77\u70b9\u4f1a\u5728\u6b27\u62c9\u8def\u4e2d\u95f4\u518d\u88ab\u904d\u5386\u81f3\u5c11\u4e00\u6b21\uff0c\u540c\u6837\u6ee1\u8db3\u6761\u4ef6\u3002\n- \u5426\u5219\uff0c\u8fd9\u4e2a\u8fde\u901a\u5757\u5fc5\u7136\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u73af\u3002\u5982\u679c\u662f\u5076\u73af\u5219 OK\uff0c\u5982\u679c\u662f\u5947\u73af\u5219 GG\u3002\n\n\u90a3\u4e48\uff0c\u5b58\u5728\u5947\u5ea6\u70b9\u600e\u4e48\u529e\uff1f\u8fd9\u4e2a\u95ee\u9898\u4e2d\u7684\u5947\u5ea6\u70b9\u662f\u7279\u6b8a\u7684\u5b58\u5728\uff0c\u56e0\u4e3a\u5ea6\u6570\u4e3a $1$ \u7684\u70b9\u6ca1\u6709\u9650\u5236\uff0c\u800c\u5ea6\u6570 $>2$ \u7684\u70b9\u5fc5\u7136\u4f1a\u88ab\u7ecf\u8fc7\u591a\u4e8e\u4e00\u6b21\uff0c\u8fd9\u6837\u7684\u70b9\u5fc5\u7136\u6ee1\u8db3\u6761\u4ef6\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5**\u76f4\u63a5\u5c06\u5947\u70b9\u914d\u5bf9\u8fde\u8fb9**\u3002\u4e3a\u4e86\u907f\u514d\u542b\u5947\u70b9\u7684\u56fe\u9000\u5316\u6210\u5947\u73af\u5bfc\u81f4\u9519\u5224\uff0c\u6700\u597d\u4fdd\u7559\u4e24\u4e2a\u5947\u70b9\u8dd1\u6b27\u62c9\u8def\u3002\n\n\u6240\u4ee5 $O(n+m)$ \u5c31\u53ef\u4ee5\u89e3\u51b3\u672c\u9898\u3002\n\n# \u4ee3\u7801\n\n```cpp \n#include <cstdio>\n#include <algorithm>\n\n#define rep( i, a, b ) for( int i = (a) ; i <= (b) ; i ++ )\n#define per( i, a, b ) for( int i = (a) ; i >= (b) ; i -- )\n\nconst int MAXN = 2e5 + 5;\n\ntemplate<typename _T>\ninline void Read( _T &x ) {\n\tx = 0; char s = getchar(); bool f = false;\n\twhile( ! ( '0' <= s && s <= '9' ) ) { f = s == '-', s = getchar(); }\n\twhile( '0' <= s && s <= '9' ) { x = ( x << 3 ) + ( x << 1 ) + ( s - '0' ), s = getchar(); }\n\tif( f ) x = -x;\n}\n\ntemplate<typename _T>\ninline void Write( _T x ) {\n\tif( x < 0 ) putchar( '-' ), x = -x;\n\tif( 9 < x ) Write( x / 10 );\n\tputchar( x % 10 + '0' );\n}\n\nstruct Edge {\n\tint to, nxt;\n} Graph[MAXN << 1];\n\nint odd[MAXN], len = 0;\nint tour[MAXN], tot = 0;\n\nbool vis[MAXN];\nint q[MAXN], h, t;\n\nint deg[MAXN];\nint head[MAXN], cur[MAXN], cnt = 1;\nint ans[MAXN]; bool edgVis[MAXN];\n\nint N, M;\n\ninline void AddEdge( const int &from, const int &to ) {\n\tGraph[++ cnt].to = to, Graph[cnt].nxt = head[from];\n\thead[from] = cnt, deg[to] ++;\n}\n\ninline void BFS( const int &s ) {\n\th = 1, t = 0;\n\tvis[q[++ t] = s] = true;\n\twhile( h <= t ) {\n\t\tint u = q[h ++];\n\t\tfor( int i = head[u], v ; i ; i = Graph[i].nxt )\n\t\t\tif( ! vis[v = Graph[i].to] ) vis[q[++ t] = v] = true;\n\t}\n}\n\nvoid DFS( const int &u ) {\n\tfor( int &i = cur[u] ; i ; i = Graph[i].nxt )\n\t\tif( ! edgVis[i >> 1] ) {\n\t\t\tint id = i >> 1;\n\t\t\tedgVis[i >> 1] = true;\n\t\t\tDFS( Graph[i].to );\n\t\t\ttour[++ tot] = id;\n\t\t}\n}\n\nint main() {\n\tRead( N ), Read( M );\n\trep( i, 1, M ) {\n\t\tint u, v; Read( u ), Read( v );\n\t\tAddEdge( u, v ), AddEdge( v, u );\n\t}\n\trep( i, 1, N ) if( ! vis[i] ) {\n\t\tBFS( i ), len = 0;\n\t\tint edgCnt = 0;\n\t\trep( j, 1, t ) {\n\t\t\tedgCnt += deg[q[j]];\n\t\t\tif( deg[q[j]] & 1 ) odd[++ len] = q[j];\n\t\t}\n\t\tedgCnt >>= 1, tot = 0;\n\t\tif( edgCnt == t && edgCnt % 2 && ! len )\n\t\t\treturn puts( \"0\" ), 0;\n\t\tif( ! len ) {\n\t\t\tint s = q[1];\n\t\t\trep( j, 2, t )\n\t\t\t\tif( deg[q[j]] > 2 ) {\n\t\t\t\t\ts = q[j]; break;\n\t\t\t\t}\n\t\t\trep( j, 1, t ) cur[q[j]] = head[q[j]];\n\t\t\tDFS( s );\n\t\t} else {\n\t\t\tfor( int j = 3 ; j + 1 <= len ; j += 2 )\n\t\t\t\tAddEdge( odd[j], odd[j + 1] ),\n\t\t\t\tAddEdge( odd[j + 1], odd[j] );\n\t\t\trep( j, 1, t ) cur[q[j]] = head[q[j]];\n\t\t\tDFS( odd[1] );\n\t\t}\n\t\tstd :: reverse( tour + 1, tour + 1 + tot );\n\t\trep( i, 1, tot ) ans[tour[i]] = ( i - 1 ) % 2 + 1;\n\t}\n\trep( i, 1, M ) Write( ans[i] ), putchar( '\\n' );\n\treturn 0;\n}\n```\n\n",
        "postTime": 1671866442,
        "uid": 123809,
        "name": "crashed",
        "ccfLevel": 0,
        "title": "\u300cCEOI2010\u300dRESTORAN"
    }
]
[
    {
        "content": "### \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u5b9a $N$ \u4e2a\u70b9\uff0c\u786e\u5b9a\u6392\u5217 $p$ \u6570\u91cf\uff0c\u6ee1\u8db3\u5c06\u524d\u4e09\u4e2a\u70b9\u8fde\u5728\u4e00\u8d77\u540e\uff0c\u5728\u4e4b\u540e\u7684\u70b9\u4e2d\uff0c\u5411\u5728\u6392\u5217\u4e2d\u5728\u5b83\u524d\u9762\u7684\u70b9\u8fde\u8fb9\uff0c\u6709\u4e14\u53ea\u6709\u4e09\u4e2a\u4e0d\u4f1a\u548c\u4e4b\u524d\u7684\u7ebf\u6bb5\u76f8\u4ea4\uff0c\u968f\u540e\u53ea\u4fdd\u7559\u8fd9\u4e09\u6761\u8fb9\u3002\u6570\u636e\u4fdd\u8bc1\u4e09\u70b9\u4e0d\u5171\u7ebf\u3002\n\n### \u5206\u6790\n\n\u8fd9\u9053\u9898\u7684\u9650\u5236\u5b9e\u9645\u4e0a\u53ea\u4f1a\u6709\u4e24\u79cd\u60c5\u51b5\u3002\u6211\u4eec\u8003\u8651\u7b2c\u56db\u4e2a\u70b9\u52a0\u5165\u7684\u60c5\u51b5\uff1a\n\n\u7b2c\u4e00\u79cd\u662f\u7b2c\u56db\u4e2a\u70b9\u5728\u4e00\u5f00\u59cb\u7684\u4e09\u89d2\u5f62\u5185\u4fa7\uff0c\u6b64\u65f6\u8fd9\u4e2a\u70b9\u4f1a\u5411\u4e09\u4e2a\u70b9\u8fde\u8fb9\uff0c\u5e76\u4e14\u5c06\u4e09\u89d2\u5f62\u5206\u6210\u66f4\u5c0f\u7684\u4e09\u89d2\u5f62\u3002\u5728\u4e4b\u540e\u7684\u70b9\u4e2d\uff0c\u4f46\u51e1\u6709\u4e00\u4e2a\u70b9\u5728\u5927\u4e09\u89d2\u5f62\u4e2d\u95f4\uff0c\u5c31\u4f1a\u843d\u5728\u4e00\u4e2a\u5c0f\u4e09\u89d2\u5f62\u5185\uff0c\u7136\u540e\u5206\u6210\u4e09\u4e2a\u66f4\u5c0f\u7684\u4e09\u89d2\u5f62\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n\u7b2c\u4e8c\u79cd\u662f\u5728\u4e09\u89d2\u5f62\u7684\u5916\u4fa7\u3002\u6b64\u65f6\u8fd9\u4e2a\u70b9\u4e00\u5b9a\u4f1a\u6ee1\u8db3\u4e00\u4e2a\u6027\u8d28\uff1a\u548c\u4e09\u89d2\u5f62\u4e2d\u4e24\u4e2a\u70b9\u7ec4\u6210\u4e00\u4e2a\u66f4\u5927\u7684\u4e09\u89d2\u5f62\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u539f\u4e09\u89d2\u5f62\u4e2d\u7684\u4e00\u4e2a\u70b9\u3002\u6b64\u65f6\u53ef\u4ee5\u7406\u89e3\u6210\u5927\u4e09\u89d2\u5f62\u88ab\u5206\u5272\u6210\u4e09\u4e2a\u5c0f\u4e09\u89d2\u5f62\uff0c\u4e4b\u540e\u7684\u60c5\u51b5\u540c\u4e0a\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u65e0\u8bba\u600e\u4e48\u6837\uff0c\u6700\u540e\u7684\u8f6e\u5ed3\u4e00\u5b9a\u662f\u4e00\u4e2a\u4e09\u89d2\u5f62\uff0c\u91cc\u9762\u88ab\u5927\u5927\u5c0f\u5c0f\u7684\u4e09\u89d2\u5f62\u586b\u6ee1\u3002\u8003\u8651\u8bb0\u5f55\u4e0b\u5916\u56f4\u4e09\u89d2\u5f62\u4e09\u4e2a\u70b9\u7684\u4f4d\u7f6e\u3002\n\n\u8bb0\u5f55 $\\operatorname{dp}[i][j][k][l]$ \u8868\u793a\u4ee5 $\ni,j,k$ \u4e09\u4e2a\u70b9\u4f5c\u4e3a\u5916\u56f4\uff0c\u5df2\u7ecf\u8ba1\u7b97\u4e86 $l$ \u4e2a\u70b9\u7684\u6392\u5217\u6570\u91cf\u3002\u8003\u8651\u8f6c\u79fb\u3002\u4e00\u79cd\u8f6c\u79fb\u6307\u5185\u90e8\u8f6c\u79fb\u3002\u9884\u5904\u7406\u51fa $i,j,k$ \u56f4\u7740\u7684\u4e09\u89d2\u5f62\u5305\u542b\u7684\u70b9\u6570\u91cf\uff0c\u5c31\u76f8\u5f53\u4e8e\u5728\u53bb\u9664\u4e86 $l$ \u4e2a\u540e\u4efb\u610f\u53d6\u4e00\u4e2a\u3002\u4e00\u79cd\u662f\u5411\u5916\u6269\u5f20\u3002\u679a\u4e3e\u4e09\u89d2\u5f62\u5185\u90e8\u7684\u4e00\u4e2a\u70b9\uff0c\u5e76\u4e14\u5047\u8bbe\u4e4b\u524d\u662f\u8fd9\u4e2a\u70b9\u548c\u53e6\u5916\u4e24\u4e2a\u70b9\u56f4\u51fa\u4e86\u4e09\u89d2\u5f62\uff0c\u4f46\u662f\u88ab\u5269\u4e0b\u7684\u70b9\u6269\u5927\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\u76f4\u63a5\u628a\u7b54\u6848\u52a0\u4e0a\u5c0f\u4e09\u89d2\u5f62\u5bf9\u5e94\u7684\u7b54\u6848\u5373\u53ef\u3002\n\n\u5177\u4f53\u7684 $\\operatorname{dp}$ \u65b9\u7a0b\u5f0f\u4e0d\u59a8\u81ea\u5df1\u8bd5\u7740\u63a8\u4e00\u4e0b\u3002\n\n\u6ce8\u610f\uff1a\u5c06 $i,j,k$ \u6309\u7167\u6709\u5e8f\u7684\u65b9\u5f0f\u8fdb\u884c\u50a8\u5b58\uff0c\u53ef\u4ee5\u5c06\u5e38\u6570\u538b\u7f29\u5230 $\\dfrac 1 6$\u3002\u5982\u679c\u4f60\u7684\u4ee3\u7801\u8d85\u65f6\u4e86\u53ef\u4ee5\u8bd5\u7740\u66f4\u6362\u65b9\u5f0f\u3002\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n\nusing namespace std;\nstruct Point{\n\tdouble x,y;\n\tvoid init(){\n\t\tscanf(\"%lf%lf\",&x,&y);\n\t}\n\tPoint(double x=0.0,double y=0.0):x(x),y(y){}\n\tPoint operator - (const Point p){\n\t\treturn Point(x-p.x,y-p.y);\n\t}\n\tdouble operator * (const Point p){\n\t\treturn fabs(x*p.y-y*p.x);\n\t}\n}A[45];\ninline double getArea(int i,int j,int k){\n\treturn (A[i]-A[j])*(A[j]-A[k]);\n}\ninline bool inTriangle(int i,int j,int k,int x){\n\treturn fabs(getArea(i,j,x)+getArea(j,k,x)+getArea(i,k,x)-getArea(i,j,k))<=1e-6;\n}\ninline void sort3(int& a,int& b,int& c){\n\tif(a>=b)\tswap(a,b);\n\tif(a>=c)\tswap(a,c);\n\tif(b>=c)\tswap(b,c);\n}\nint N;\nint hav[45][45][45];\nlong long dp[45][45][45][45];\nconst long long Md = 1e9 + 7;\nint main(){\n\tscanf(\"%d\",&N);\n\tfor(int i=1;i<=N;i++)\tA[i].init();\n\tfor(int i=1;i<=N;i++)\n\t\tfor(int j=i+1;j<=N;j++)\n\t\t\tfor(int k=j+1;k<=N;k++)\n\t\t\t\tfor(int l=1;l<=N;l++)\n\t\t\t\t\tif(l!=i && l!=j && l!=k)\n\t\t\t\t\t\thav[i][j][k]+=inTriangle(i,j,k,l);\n\tfor(int i=1;i<=N;i++)\n\t\tfor(int j=i+1;j<=N;j++)\n\t\t\tfor(int k=j+1;k<=N;k++)\n\t\t\t\tdp[3][i][j][k]=6;\n\tfor(int s=4;s<=N;s++)\n\t\tfor(int i=1;i<=N;i++)\n\t\t\tfor(int j=i+1;j<=N;j++)\n\t\t\t\tfor(int k=j+1;k<=N;k++){\n\t\t\t\t\tif(hav[i][j][k]+4>=s)\n\t\t\t\t\t\tdp[s][i][j][k]=(dp[s-1][i][j][k]*(hav[i][j][k]+4-s))%Md;\n\t\t\t\t\tfor(int l=1;l<=N;l++)\n\t\t\t\t\t\tif(l!=i && l!=j && l!=k && inTriangle(i,j,k,l)){\n\t\t\t\t\t\t\tint x,y,z;\n\t\t\t\t\t\t\t// i j l\n\t\t\t\t\t\t\tx=i,y=j,z=l;\n\t\t\t\t\t\t\tsort3(x,y,z);\n\t\t\t\t\t\t\t(dp[s][i][j][k]+=dp[s-1][x][y][z])%=Md;\n\t\t\t\t\t\t\t// j k l\n\t\t\t\t\t\t\tx=j,y=k,z=l;\n\t\t\t\t\t\t\tsort3(x,y,z);\n\t\t\t\t\t\t\t(dp[s][i][j][k]+=dp[s-1][x][y][z])%=Md;\n\t\t\t\t\t\t\t// i k l\n\t\t\t\t\t\t\tx=i,y=k,z=l;\n\t\t\t\t\t\t\tsort3(x,y,z);\n\t\t\t\t\t\t\t(dp[s][i][j][k]+=dp[s-1][x][y][z])%=Md;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\tlong long ans=0;\n\tfor(int i=1;i<=N;i++)\n\t\tfor(int j=i+1;j<=N;j++)\n\t\t\tfor(int k=j+1;k<=N;k++)\n\t\t\t\t(ans+=dp[N][i][j][k])%=Md;\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1620488947,
        "uid": 60864,
        "name": "tiger2005",
        "ccfLevel": 7,
        "title": "P7529 [USACO21OPEN] Permutation G"
    },
    {
        "content": "# **USACO 2021 US Open, Gold**\n## **Problem 3. Permutation (\u6392\u5217)**\n----\n\n### **\u9898\u76ee\u63cf\u8ff0**\n\u6709 $N$ $(3 \\le N \\le 40)$ \u4e2a\u70b9\u5728\u4e8c\u7ef4\u5e73\u9762\u4e0a\uff0c\u6ca1\u6709\u4efb\u4f55\u4e09\u4e2a\u70b9\u5171\u7ebf\u3002\u5bf9\u4e8e\u6bcf\u4e2a $1 \\le i \\le N$ , \u7b2c $i$ \u4e2a\u70b9\u7684\u4f4d\u7f6e\u88ab\u7528\u4e24\u4e2a\u6574\u6570 $x_i$ \u548c $y_i$ $(0 \\le x_i, y_i \\le 10 ^ 4)$ \u8868\u793a\u3002\n\nBessie\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u6765\u753b\u8fde\u63a5\u4e24\u4e2a\u70b9\u7684\u7ebf\u6bb5:\n\n1. \u9009\u62e9\u4e00\u4e2a $p_1, p_2, ..., p_N$ \u7684\u6392\u5217\n2. \u5979\u4f1a\u7528\u4e09\u6761\u7ebf\u6bb5\u8fde\u63a5 $p_1$ \u548c $p_2$ ,  $p_2$ \u548c $p_3$ \u4ee5\u53ca  $p_3$ \u548c $p_1$\n3. \u63a5\u7740\u6309\u987a\u5e8f\u5bf9\u4e8e $4$ \u5230 $N$ \u4e4b\u95f4\u7684\u6574\u6570 $i$ , \u5979\u4f1a\u753b\u4e00\u6761\u7ebf\u6bb5\u8fde\u63a5\u70b9 $p_i$ \u548c $p_j$ \u4f7f\u5f97 $j < i$ \u4e14\u8fd9\u6761\u7ebf\u6bb5\u4e0d\u548c\u4e4b\u524d\u7684\u4efb\u4f55\u7ebf\u6bb5\u76f8\u4ea4 (\u9664\u4e86\u7aef\u70b9\u4e4b\u5916)\n\nBessie\u5e0c\u671b\u5bf9\u4e8e\u6bcf\u4e2a $i$ , \u5979\u90fd\u80fd\u753b $3$ \u6761\u65b0\u7684\u7ebf\u6bb5\u3002\u8bf7\u8ba1\u7b97\u53ef\u884c\u7684\u6392\u5217\u6570\u3002\n\n### **\u8f93\u5165\u683c\u5f0f**\n\u7b2c\u4e00\u884c\u4e00\u4e2a\u6574\u6570 $N$ .\n\n\u63a5\u4e0b\u6765\u7684 $N$ \u884c\uff0c\u6bcf\u884c $2$ \u4e2a\u7528\u7a7a\u683c\u9694\u5f00\u7684\u6574\u6570 $x_i$ \u548c $y_i$ .\n\n### **\u8f93\u51fa\u683c\u5f0f**\n\u6392\u5217\u7684\u6570\u91cf\u6a21 $10 ^ 9 + 7$ .\n\n### **\u6837\u4f8b\u8f93\u5165#1**\n```\n4\n0 0\n0 4\n1 1\n1 2\n```\n\n### **\u6837\u4f8b\u8f93\u51fa#1**\n```\n0\n```\n\n### **\u6837\u4f8b\u8f93\u5165#2**\n```\n4\n0 0\n0 4\n4 0\n1 1\n```\n\n### **\u6837\u4f8b\u8f93\u51fa#2**\n```\n24\n```\n\n### **\u6837\u4f8b\u8f93\u5165#3**\n```\n5\n0 0\n0 4\n4 0\n1 1\n1 2\n```\n\n### **\u6837\u4f8b\u8f93\u51fa#3**\n```\n96\n```\n\n### **\u6837\u4f8b\u89e3\u91ca**\n\u4e00\u4e2a\u5bf9\u4e8e\u70b9\u5e8f\u5217 $(0,0),(0,4),(4,0),(1,2),(1,1)$ \u7684\u53ef\u884c\u65b9\u6848\u5982\u4e0b\u3002\u5bf9\u4e8e\u8fd9\u4e2a\u6392\u5217\uff0c\n- \u9996\u5148\uff0cBessie\u5206\u522b\u8fde\u63a5\u70b9 $(0,0),(0,4),(4,0)$ \u4e2d\u7684\u6bcf\u4e00\u5bf9\n- \u5176\u6b21\uff0c\u5979\u8fde\u63a5\u70b9 $(0,0),(0,4),(4,0)$ \u5230 $(1,2)$\n- \u6700\u540e\uff0c\u5979\u8fde\u63a5\u70b9 $(1,2),(4,0),(0,0)$ \u5230 $(1,1)$\n  \n![\u56fe\u50cf](https://cdn.luogu.com.cn/upload/image_hosting/40iof04r.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n### **\u6570\u636e**\n- \u6d4b\u8bd5\u70b9 1-6  \u4fdd\u8bc1 $N \\le 8$ .\n- \u6d4b\u8bd5\u70b9 7-20 \u65e0\u7279\u6b8a\u8981\u6c42.\n\n\u4f9b\u9898\u4eba: Benjamin Qi\n\n\u9898\u76ee\u7ffb\u8bd1: yaoxi-std\n\n----\n## **\u9898\u89e3**\n### **\u5927\u81f4\u601d\u8def**\n\u524d $3$ \u4e2a\u70b9\u5fc5\u7136\u6784\u6210\u4e09\u89d2\u5f62\uff0c\u56e0\u4e3a\u6ca1\u6709\u4e09\u4e2a\u70b9\u5171\u7ebf\u3002\n\n\u4e0b\u9762\u8003\u8651\u7b2c $4$ \u4e2a\u70b9\u7684\u6446\u653e\u65b9\u6cd5\u3002\u5982\u679c\u653e\u5728\u4e09\u89d2\u5f62\u5185\u90e8\uff0c\u90a3\u4e48\u5fc5\u7136\u662f\u53ef\u4ee5\u8fde\u63a5\u65b0\u7684\u4e09\u6761\u7ebf\u6bb5\u7684\u3002\u5982\u679c\u653e\u5728\u4e09\u89d2\u5f62\u5916\u9762\uff0c\u5c31\u5f97\u5206\u60c5\u51b5\u8ba8\u8bba\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0fizen1p.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5982\u679c\u65b0\u7684\u70b9\u653e\u5728\u5982\u56fe\u7684\u7ea2\u8272\u533a\u57df\u4e2d\u7684\u8bdd\uff0c\u90a3\u4e48\u662f\u53ef\u4ee5\u8fde\u63a5\u65b0\u7684\u4e09\u6761\u7ebf\u6bb5\u7684\uff0c\u7136\u540e\u6784\u6210\u4e00\u4e2a\u65b0\u7684\u4e09\u89d2\u5f62\u3002\u5426\u5219\u8fd9\u79cd\u6392\u5217\u4e0d\u7b26\u5408\u9898\u76ee\u8981\u6c42\uff0c\u5c31\u820d\u53bb\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5408\u6cd5\u7684\u6392\u5217\uff0c\u6bcf\u6b21\u64cd\u4f5c\u4e4b\u540e\u7684\u56fe\u5f62\u90fd\u4f1a\u6784\u6210\u4e00\u4e2a\u4e09\u89d2\u5f62\u3002\n\n\u7531\u4e8e $N$ \u5f88\u5c0f\u53ea\u6709 $40$ , \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e00\u4e2a\u56db\u7ef4\u7684 $dp$ . \u4ee4 $dp_{x,y,z,k}$ \u8868\u793a\u5f53\u524d\u4ee5\u7b2c $x, y, z$ \u4e09\u4e2a\u70b9\u4e3a\u4e09\u89d2\u5f62\u9876\u70b9\uff0c\u4e14\u5df2\u7ecf\u7528\u4e86 $k$ \u4e2a\u70b9\u540e\u7684\u6392\u5217\u6570\u3002\n\n\u7136\u540e\u6211\u4eec\u679a\u4e3e\u4e0b\u4e00\u4e2a\u70b9 $p$ , \u6839\u636e\u4e0a\u9762\u7684\u63a8\u8bba\uff0c\u5219\u8f6c\u79fb\u65b9\u7a0b\u4e3a\n$$dp_{x,y,z,k}=\\sum_{p=1}^{n}dp_{\u65b0\u7684p1,p2,p3,k+1} (p \\ne x,y,z)$$\n\n\u72b6\u6001\u8f6c\u79fb\u590d\u6742\u5ea6\u662f $O(n)$ \u7684\u3002\n\n\u521d\u59cb\u5316 $dp_{x,y,z,N}=1$ .\n\n\u9700\u8981\u6ce8\u610f\u5df2\u7ecf\u653e\u7f6e\u7684\u4e2a\u6570k\u662f\u5426\u8d85\u8fc7\u4e09\u89d2\u5f62\u5185\u7684\u70b9\u4e2a\u6570+3\u4e2a\u7aef\u70b9\uff0c\u5982\u679c\u8d85\u8fc7\uff0c\u5c31\u4e0d\u80fd\u518d\u5728\u4e09\u89d2\u5f62\u5185\u653e\u7f6e\u4e86\uff0c\u4e0b\u4e00\u6b65\u5fc5\u987b\u653e\u5728\u4e09\u89d2\u5f62\u5916\u3002\n\n\u6700\u540e\u679a\u4e3e\u521d\u59cb\u7684\u4e09\u4e2a\u70b9\uff0c\u6c42\u51fa $\\sum dp_{x,y,z,3}$ .\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n ^ 5)$ , \u7a7a\u95f4\u590d\u6742\u5ea6 $O(n ^ 4)$ .\n\n### **\u5b9e\u73b0\u7ec6\u8282**\n\n**1. \u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u70b9\u5728\u4e09\u89d2\u5f62\u5185**\n\n\u5982\u679c\u5bf9\u4e8e\u4e09\u89d2\u5f62\u7684\u6bcf\u4e00\u6761\u8fb9\uff0c\u8fd9\u4e2a\u70b9\u548c\u8fd9\u6761\u8fb9\u7684\u5bf9\u5e94\u70b9\u90fd\u5728\u8fd9\u6761\u8fb9\u7684\u540c\u4e00\u4fa7\uff0c\u90a3\u4e48\u8fd9\u6761\u8fb9\u5c31\u5728\u4e09\u89d2\u5f62\u5185\u4e86\u3002\u5373\u5bf9\u4e8e**\u6bcf\u4e00\u7ec4**\u8fb9 $BC$ \u548c\u5176\u5bf9\u5e94\u7aef\u70b9 $A$ , \u82e5 $A$ \u548c $P$ \u90fd\u5728 $BC$ \u7684\u540c\u4fa7\uff0c\u90a3\u4e48\u70b9 $P$ \u4e00\u5b9a\u5728\u4e09\u89d2\u5f62\u5185\u3002\n\n\u81f3\u4e8e\u5982\u4f55\u5224\u65ad\u4e24\u4e2a\u70b9\u5728\u7ebf\u6bb5\u7684\u540c\u4fa7\u8fd8\u662f\u5f02\u4fa7\uff0c\u5c31\u8981\u7528~~\u4ebf\u70b9\u70b9~~\u5411\u91cf\u53c9\u4e58\u7684\u77e5\u8bc6\uff08\u4e0d\u4f1a\u7684\u81ea\u884c[\u767e\u5ea6](https://www.baidu.com/s?ie=utf-8&tn=baidu&wd=%E5%90%91%E9%87%8F%E5%8F%89%E4%B9%98)\uff09\n\n**2. \u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u70b9\u5728\u521a\u521a\u7684\u7ea2\u8272\u533a\u57df\u91cc**\n\n\u540c\u6837\uff0c\u5bf9\u4e8e\u4e09\u89d2\u5f62\u7684\u67d0\u4e2a\u70b9 $A$\uff0c\u8fd9\u4e2a\u70b9 $P$ \u548c\u70b9 $C$ \u5728\u8fb9 $AB$ \u7684\u5f02\u4fa7\u4e14\u70b9 $P$ \u548c\u70b9 $B$ \u5728\u8fb9 $AC$ \u7684\u5f02\u4fa7\uff0c\u90a3\u4e48\u8fd9\u6761\u8fb9\u5c31\u5728\u70b9 $A$ \u5bf9\u5e94\u7684\u7ea2\u8272\u533a\u57df\u91cc\uff0c\u5e76\u4e14\u66f4\u65b0\u4e09\u89d2\u5f62\u4e3a $\\Delta PBC$\u3002\n\n\u4e00\u6837\u662f\u7528\u5411\u91cf\u7684\u77e5\u8bc6\u6c42\u7684\u3002\n\n### **\u4ee3\u7801**\n```cpp\n/**\n * @file:           permutation.cpp\n * @author:         yaoxi-std\n * @description:    permutation.cpp\n*/\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define resetIO(x) { freopen(x\".in\", \"r\", stdin); freopen(x\".out\", \"w\", stdout); }\ntemplate<class T> inline void read(T &x){\n    T f = 1; x = 0; char ch = getchar();\n    for( ; ch < '0' || ch > '9'; ch = getchar()) if(ch == '-') f = -f;\n    for( ; ch >= '0' && ch <= '9'; ch = getchar()) x = (x << 1) + (x << 3) + (ch ^ 48);\n    x *= f;\n}\ntemplate<class T> inline void write(T x){\n    if(x < 0) { putchar('-'); x = -x; }\n    if(x > 9) write(x / 10); putchar((x % 10) ^ 48);\n}\nconst int maxn = 41;\nconst int inf = 1LL << 60;\nconst int mod = 1e9+7;\n// \u5411\u91cf\u6a21\u7248\nstruct Vec{\n    int x, y;\n    Vec(){ }\n    Vec(int _x, int _y) : x(_x), y(_y) { }\n    Vec(pair<int, int> p) : x(p.first), y(p.second) { }\n    // \u5411\u91cf\u52a0\u6cd5\n    Vec operator+(const Vec &o) const {\n        return Vec(x + o.x, y + o.y);\n    }\n    // \u5411\u91cf\u51cf\u6cd5\n    Vec operator-(const Vec &o) const {\n        return Vec(x - o.x, y - o.y);\n    }\n    // \u5411\u91cf\u6570\u4e58\n    Vec operator*(const int k) const {\n        return Vec(x * k, y * k);\n    }\n    // \u5411\u91cf\u70b9\u4e58\n    int operator*(const Vec &o) const {\n        return x * o.x + y * o.y;\n    }\n    // \u5411\u91cf\u53c9\u4e58\n    int operator^(const Vec &o) const {\n        return x  * o.y - y * o.x;\n    }\n};\nstruct Line{\n    Vec a, b;\n    Line(){ }\n    Line(Vec _a, Vec _b) : a(_a), b(_b) { }\n    // \u83b7\u53d6\u7ebf\u6bb5\u5bf9\u5e94\u7684\u5411\u91cf\n    Vec vector() const {\n        return b - a;\n    }\n    // \u5224\u65ad\u4e24\u4e2a\u70b9\u662f\u5426\u5728\u7ebf\u6bb5\u7684\u540c\u4fa7\n    bool side(Vec v1, Vec v2) const {\n        Vec x = vector(), y = v1 - a, z = v2 - a;\n        return (x ^ y) * (x ^ z) > 0;\n    }\n};\nint n, dp[maxn][maxn][maxn][maxn];\npair<int, int> a[maxn];\n// \u5224\u65ad\u70b9\u5728\u4e09\u89d2\u5f62\u5185\nbool inner_triangle(int p1, int p2, int p3, int i){\n    Vec v1(a[p1]), v2(a[p2]), v3(a[p3]), vi(a[i]);\n    Line l1(v2, v3), l2(v1, v3), l3(v1, v2);\n    // \u5224\u65ad\u70b9vi\u548cv1\u5728l1\u7684\u540c\u4fa7\uff0c\u548cv2\u5728l2\u7684\u540c\u4fa7\u4ee5\u53ca\u548cv3\u5728l3\u7684\u540c\u4fa7\n    return l1.side(v1, vi) && l2.side(v2, vi) && l3.side(v3, vi);\n}\n// \u5224\u65ad\u70b9\u5728\u7ea2\u8272\u533a\u57df\u4e2d\uff0c\u5982\u679c\u662f\u5219\u66f4\u65b0\u6210\u65b0\u7684\u4e09\u89d2\u5f62\u4e09\u4e2a\u7aef\u70b9\nbool outer_triangle(int &p1, int &p2, int &p3, int i){\n    Vec v1(a[p1]), v2(a[p2]), v3(a[p3]), vi(a[i]);\n    Line l1(v2, v3), l2(v1, v3), l3(v1, v2);\n    // \u5224\u65ad\u70b9vi\u548cv1\u5728l1\u7684\u5f02\u4fa7\u5e76\u4e14vi\u548cv2\u5728l2\u7684\u5f02\u4fa7\uff0c\u5982\u679c\u7b26\u5408\u5219\u66f4\u65b0v3\uff0c\u4e0b\u540c\n    if((!l1.side(v1, vi)) && (!l2.side(v2, vi))) { p3 = i; return true; }\n    if((!l1.side(v1, vi)) && (!l3.side(v3, vi))) { p2 = i; return true; }\n    if((!l2.side(v2, vi)) && (!l3.side(v3, vi))) { p1 = i; return true; }\n    return false;\n}\n// \u8bb0\u5fc6\u5316\u641c\u7d22(dp)\uff0cdp[p1][p2][p3][k]\u8868\u793a\n// \u4ee5p1,p2,p3\u4e3a\u4e09\u89d2\u5f62\u7aef\u70b9\u4e14\u5df2\u7ecf\u653e\u4e86k\u4e2a\u70b9\u7684\u65b9\u6848\u6570\nint dfs(int p1, int p2, int p3, int k){\n    // k=n\u65f6\u8fd4\u56de1\n    if(k == n) return 1;\n    // \u6392\u5e8f\u4e09\u89d2\u5f62\u7aef\u70b9\n    if(p1 > p2) swap(p1, p2);\n    if(p1 > p3) swap(p1, p3);\n    if(p2 > p3) swap(p2, p3);\n    if(dp[p1][p2][p3][k] != -1) return dp[p1][p2][p3][k];\n    // \u7528&\u5f15\u7528\u6765\u5199\u8bb0\u5fc6\u5316\u4f1a\u6bd4\u8f83\u8212\u670d\n    int &ret = dp[p1][p2][p3][k]; ret = 0;\n    // \u8ba1\u7b97\u4e09\u89d2\u5f62\u5185\u70b9\u7684\u4e2a\u6570\uff0c\u6700\u540e\u4e00\u8d77\u8ba1\u7b97\uff08\u7b97\u662f\u4e2a\u4f18\u5316\uff09\n    int cnt_in = 0;\n    for(int i=1; i<=n; i++){\n        // \u65b0\u7684\u70b9\u4e0d\u80fd\u548c\u4e09\u89d2\u5f62\u7aef\u70b9\u91cd\u590d\n        if(p1 == i || p2 == i || p3 == i) continue;\n        // \u5206\u60c5\u51b5\u8ba8\u8bba\n        if(inner_triangle(p1, p2, p3, i)){\n            // \u8ba1\u7b97\u4e09\u89d2\u5f62\u5185\u70b9\u7684\u4e2a\u6570\n            cnt_in ++;\n        }\n        else{\n            // \u4e3a\u4e86\u9632\u6b62\u539f\u6765\u7684p1,p2,p3\u88ab\u66f4\u6539\uff0c\u8fd9\u91cc\u65b0\u5f00\u4e863\u4e2a\u53d8\u91cf\n            int tp1 = p1, tp2 = p2, tp3 = p3;\n            // \u5224\u65ad\u662f\u5426\u5728\u7ea2\u8272\u533a\u57df\n            if(outer_triangle(tp1, tp2, tp3, i))\n                (ret += dfs(tp1, tp2, tp3, k + 1)) %= mod;\n        }\n    }\n    // \u5224\u65ad\u5df2\u7ecf\u653e\u7f6e\u7684\u4e2a\u6570k\u662f\u5426\u8d85\u8fc7\u4e09\u89d2\u5f62\u5185\u7684\u70b9\u4e2a\u6570+3\u4e2a\u7aef\u70b9\uff0c\u5982\u679c\u8d85\u8fc7\uff0c\u5c31\u4e0d\u80fd\u518d\u5728\u4e09\u89d2\u5f62\u5185\u653e\u7f6e\u4e86\n    if(cnt_in + 3 > k)\n        (ret += (dfs(p1, p2, p3, k + 1) * (cnt_in + 3 - k))) %= mod;\n    return ret;\n}\nsigned main(){\n    // \u8bfb\u5165+\u521d\u59cb\u5316\n    read(n);\n    for(int i=1; i<=n; i++) read(a[i].first), read(a[i].second);\n    memset(dp, -1, sizeof(dp));\n    int ans = 0;\n    // \u679a\u4e3e\u524d\u4e09\u4e2a\u70b9\u7684\u987a\u5e8f\n    for(int p1=1; p1<=n; p1++){\n        for(int p2=p1+1; p2<=n; p2++){\n            for(int p3=p2+1; p3<=n; p3++){\n                (ans += dfs(p1, p2, p3, 3)) %= mod;\n            }\n        }\n    }\n    // \u56e0\u4e3a\u524d\u4e09\u4e2a\u70b9\u53ef\u4ee5\u4efb\u610f\u4ea4\u6362\u4f4d\u7f6e\uff0c\u6240\u4ee5\u7b54\u6848\u8981\u4e58\u4e0a6\n    write((ans * 6) % mod); putchar('\\n');\n    return 0;\n}\n```",
        "postTime": 1618125144,
        "uid": 141573,
        "name": "yaoxi",
        "ccfLevel": 8,
        "title": "[USACO21OPEN] Permutation G"
    },
    {
        "content": "## \u524d\u8a00 ##\n\u8fd9\u9898\u601d\u8def\u5f88\u5de7\uff0c\u800c\u4e14\u9898\u89e3\u90fd\u6ca1\u600e\u4e48\u8bf4\u5177\u4f53\u4ee3\u7801\u5b9e\u73b0\uff0c\u5bb3\u5f97\u6211\u4ee5\u4e3a\u8fd9\u662f\u4e00\u9053\u6c34\u9898,\u7ed3\u679c\u5374\u6253\u4e86\u6211\u4e00\u4e2a\u665a\u4e0a\uff08\uff08\uff08  \n\n\u6240\u4ee5\u6211\u6253\u7b97\u591a\u8bb2\u8bb2\u672c\u9898\u7684**\u70b9\u4f4d\u7f6e\u5224\u65ad**\u548c **DP \u8f6c\u79fb**\u90e8\u5206\u3002\n\n~~\u5982\u679c\u6709\u5927\u4f6c\u786e\u5b9e\u89c9\u5f97\u672c\u9898\u5f88\u6c34\uff0c\u6211\u81ea\u88c1\u7f62\u3002~~\n## \u5206\u6790 ##\n$N=40$ \u662f\u771f\u7684\u4ee4\u4eba\u8ff7\u60d1\uff0c~~\u849f\u84bb\u8003\u573a\u4e0a\u4ee5\u6765\u5c31\u60f3\u6298\u534a\u72b6\u538b~~\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u4e0d\u7ba1\u5b83\u3002  \n\n### Part 1\n\u6211\u4eec\u5148\u9009\u4e09\u4e2a\u70b9\u7ec4\u6210\u4e00\u4e2a\u4e09\u89d2\u5f62\uff0c\u7136\u540e\u5c1d\u8bd5\u627e\u4e00\u4e2a\u70b9\u80fd\u548c\u8fd9\u4e2a\u4e09\u89d2\u5f62\u7684\u4e09\u70b9\u90fd\u8fde\u4e0a\u8fb9\uff0c\u663e\u7136\u8fd9\u4e2a\u70b9\u53ea\u6709\u53ef\u80fd\u5728\u56db\u79cd\u4f4d\u7f6e\u3002  \n\n![](https://cdn.luogu.com.cn/upload/image_hosting/95hm3hd6.png?x-oss-process=image/resize,m_lfit,h_170,w_225)  \n\n\u611f\u8c22\u5b66\u957f @lcrh \u63d0\u4f9b\u7684\u56fe%%%  \n\n\u5373\u662f\u4e09\u89d2\u5f62\u7684\u6bcf\u70b9\u4e24\u76f4\u7ebf\u5939\u51fa\u6765\u7684\u533a\u57df\u548c\u4e09\u89d2\u5f62\u5185\u90e8\u3002  \n\u63a5\u4e0b\u6765\u5f00\u59cb\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- \u5982\u679c\u627e\u5230\u4e00\u70b9\u5728\u5185\u90e8\uff0c\u6b64\u65f6\u4f1a\u53c8\u7ec4\u6210\u4e09\u4e2a\u5c0f\u4e09\u89d2\u5f62\uff0c\u4e00\u70b9\u80fd\u4e0e\u65b0\u56fe\u5f62\u8fde\u4e0a\u4e09\u6761\u8fb9\uff0c\u53ea\u6709\u5728\u8fd9\u4e09\u5c0f\u4e09\u89d2\u5f62\u91cc\u6216\u8005\u5728\u539f\u6765\u7684 1\uff0c2\uff0c3 \u533a\u57df\u3002\u56e0\u4e3a\u4efb\u610f\u4e09\u70b9\u4e0d\u5171\u7ebf\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a\u4e09\u5c0f\u4e09\u89d2\u5f62\u91cc\u8f6c\u5316\u6210\u539f\u6765\u7684\u5927\u4e09\u89d2\u5f62\u91cc\uff0c\u5373\u5224\u65ad\u6761\u4ef6\u4e0d\u53d8\u3002\n\n- \u5982\u679c\u627e\u5230\u4e00\u70b9\u5728\u5916\u90e8\u4e14\u53ef\u884c\uff0c\u90a3\u4e48\u65b0\u70b9\u4f1a\u4e0e\u539f\u6765\u7684\u4e24\u70b9\u7ec4\u6210\u4e00\u4e2a\u5927\u4e09\u89d2\u5f62\uff0c\u88ab\u629b\u5f03\u7684\u4e00\u70b9\u88ab\u5305\u5728\u8fd9\u4e2a\u5927\u4e09\u89d2\u5f62\u91cc\u9762\uff0c\u548c\u5176\u4ed6\u4e09\u70b9\u4efb\u610f\u7ec4\u5408\u5f62\u6210\u4e09\u4e2a\u5c0f\u4e09\u89d2\u5f62\uff0c\u540c\u4ee5\u4e0a\u60c5\u51b5\u3002\n\n### Part 2\n\u5982\u4f55\u5224\u65ad\u8fd9\u4e2a\u70b9\u662f\u5426\u53ef\u884c?  \n\n\u5bf9\u4e8e\u60c5\u51b5\u4e00\uff0c\u5224\u65ad\u70b9 $A$ \u662f\u5426\u5728\u5927\u4e09\u89d2\u5f62\u91cc\u9762\uff0c\u53ea\u9700\u8981\u5c06\u5927\u4e09\u89d2\u5f62\u7684\u4e09\u70b9\u968f\u4fbf\u9009\u4e24\u4e2a\u70b9\u51fa\u6765\uff0c\u548c\u70b9 $A$ \u7ec4\u6210\u4e09\u4e2a\u5c0f\u4e09\u89d2\u5f62\uff0c\u770b\u8fd9\u4e09\u5c0f\u4e09\u89d2\u5f62\u7684\u9762\u79ef\u548c\u662f\u5426\u4e0e\u5927\u4e09\u89d2\u5f62\u9762\u79ef\u76f8\u7b49\u3002 \u76f8\u7b49\u5373\u5728\u91cc\u9762\u3002\n\n\u60c5\u51b5\u4e8c\u4e5f\u53ef\u4ee5\u8f6c\u5316\u4e3a\u60c5\u51b5\u4e00\uff0c\u679a\u4e3e\u539f\u4e09\u89d2\u5f62\u7684\u4e09\u4e2a\u7aef\u70b9\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u7aef\u70b9\u5728\u53e6\u5916\u4e24\u7aef\u70b9\u548c\u70b9 $A$ \u7ec4\u6210\u7684\u4e09\u89d2\u5f62\u91cc\u9762\uff0c\u5373\u6ee1\u8db3\u60c5\u51b5\u4e8c\u3002\n\n### Part 3\n\n\u6240\u4ee5\u6211\u4eec\u8bbe DP \u72b6\u6001 $dp_{i,j,k,l}$ \u8868\u793a\u6700\u5927\u7684\u4e09\u89d2 \u5f62\u7531\u7f16\u53f7 $i,j,k$ \u4e09\u70b9\u7ec4\u6210\u4e14\u4e14\u5df2\u9009 $l$ \u4e2a\u70b9\u3002\n\n**\u4f46\u5bf9\u4e8e\u60c5\u51b5\u4e00\uff0c\u6211\u4eec\u53d1\u73b0\u4f1a\u5b58\u5728\u4e00\u4e2a\u91cd\u590d\u53d6\u70b9\u7684\u95ee\u9898**  \n\n\u4f8b\u5982\uff1a  \n\n\u6211\u4eec\u7528\u4e09\u89d2\u5f62 $i,j,k$ \u8868\u793a\u7531\u70b9 $i,j,k$ \u7ec4\u6210\u7684\u4e09\u89d2\u5f62\u3002  \n\u5df2\u77e5\u4e09\u89d2\u5f62 $1,2,3$ \u4e2d\u6709\u7f16\u53f7 $4,5$ \u4e24\u70b9\u3002  \n\u663e\u7136 $dp_{1,2,3,3}=6$ \uff0c\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u9009 $4,5$ \u4e24\u70b9\u8fdb\u884c\u8f6c\u79fb\u3002  \n\u5f97\u5230 $dp_{1,2,3,4}=2\\times dp_{1,2,3,3}=12$\uff0c\u6b64\u65f6\u6211\u4eec\u8fd8\u53ef\u4ee5\u9009 $4,5$ \u4e24\u70b9\u8fdb\u884c\u8f6c\u79fb\u3002   \n\u5f97\u5230 $dp_{1,2,3,5}=2\\times dp_{1,2,3,4}=24$\u3002  \n\u4f46\u8fd9\u6837\u5c31\u53d8\u6210\u4e86\u6211\u4eec\u5728\u5b9a\u4e09\u89d2\u5f62\u540e\u9009\u62e9 $4,4$\uff0c$4,5$\uff0c$5,4$\uff0c$5,5$ \u56db\u79cd\u60c5\u51b5\u3002\u5b9e\u9645\u4e0a\u5374\u4e0d\u5e94\u8be5\u53d6\u591a\u6b21\u76f8\u540c\u70b9\u3002  \n\n\u6240\u4ee5\uff0c\u6211\u4eec\u5e94\u8be5\u4e14\u53ea\u80fd\u9884\u5904\u7406\u51fa\u5728\u4e00\u4e2a\u4e09\u89d2\u5f62\u91cc\u9762\u6709\u51e0\u4e2a\u70b9\uff0c\u5728\u8f6c\u79fb\u7684\u65f6\u5019\u540c\u4e09\u89d2\u5f62\u72b6\u6001\u8f6c\u79fb\u5355\u72ec\u5904\u7406\u3002  \n\n$dp_{i,j,k,l+1}+=(num-l+3)\\times dp_{i,j,k,l}$\uff0c$num$ \u4e3a\u4e09\u89d2\u5f62 $i,j,k$ \u4e2d\u7684\u603b\u70b9\u6570\u3002\n\n\u60c5\u51b5\u4e8c\u6b63\u5e38\u8f6c\u79fb\u5373\u53ef\uff0c\u5373\uff1a\n$dp_{i',j',k',l+1}+=(num-l+3)\\times dp_{i,j,k,l}$\uff0c\u5176\u4e2d $i',j',k'$ \u4e3a\u65b0\u4e09\u89d2\u5f62\u7684\u4e09\u7aef\u70b9\u3002\n\n## Code\n\uff08\u60c5\u51b5\u4e8c\u7684\u5224\u65ad\u5199\u7684\u53ca\u5176\u9634\u95f4\uff0c\u771f\u8981\u770b\u8fd8\u662f\u770b\u5176\u4ed6\u4eba\u7684\u5427\uff09  \n\uff08\u4e3a\u7f8e\u89c2\u5ea6\u5220\u9664\u5feb\u8bfb)\n```cpp\n// By Hasinon,the juruo who's waiting for AFO life.\n/*Mlm:  Tlm:*/\n#include<bits/stdc++.h>\n#define ll long long\n#define pb push_back\n#define mid ((l+r)>>1)\n#define FOR(i,a,b) for(int i=(a); i<=(b); ++i)\n#define ROF(i,a,b) for(int i=(a); i>=(b); --i)\nusing namespace std;\nbool hasinon;\nll time1=clock();\n//\nstruct node{\n\tll x,y;\n};\nconst ll N=40,MOD=1e9+7;\nnode zb[N+10];\nll stac[5],lstac[5]; \nll dp[N+10][N+10][N+10][N+10],hav[N+10][N+10][N+10];\n//\ninline ll cj(node a,node b){\n//\tprintf(\"%lld %lld %lld %lld\\n\",a.x,a.y,b.x,b.y) ;\n\treturn a.x*b.y-b.x*a.y;\n}\nll ksm(ll a,ll b){\n\tll rt=1,la=a;\n\twhile(b){\n\t\tif(b&1) rt=rt*la%MOD;\n\t\tla=la*la%MOD;\n\t\tb>>=1;\n\t}\n\treturn rt;\n}\n//\nbool Hasinon;\nvoid usage() {\n\tll time2=clock();\n\tcout<<(&Hasinon-&hasinon)/1024/1024<<\" Mb, \"<<time2-time1<<\" Ms\\n\";\n}\nint main() {\n\tll n=gt();\n\tFOR(i,1,n){\n\t\tzb[i]=(node){gt(),gt()};\n\t}\n\tFOR(i,1,n){\n\t\tFOR(j,i+1,n){\n\t\t\tFOR(k,j+1,n){\n\t\t\t\tdp[i][j][k][3]=6;\n\t\t\t}\n\t\t}\n\t}\n\tFOR(c,3,n-1){\n\t\tFOR(i,1,n){\n\t\t\tstac[1]=i;\n\t\t\tFOR(j,i+1,n){\n\t\t\t\tstac[2]=j;\n\t\t\t\tFOR(k,j+1,n){\n\t\t\t\t\tstac[3]=k;\n\t\t\t\t\tif(!dp[i][j][k][c]) continue; \n\t\t\t\t\tif(c>3&&hav[i][j][k]){\n\t\t\t\t\t\tdp[i][j][k][c+1]=(dp[i][j][k][c+1]+dp[i][j][k][c]*(hav[i][j][k]-c+3))%MOD;\n\t\t\t\t\t}\n\t\t\t\t\tFOR(l,1,n){\n\t\t\t\t\t\tbool lb=0;\n\t\t\t\t\t\tFOR(m,1,3){\n\t\t\t\t\t\t\tif(l==stac[m]){\n\t\t\t\t\t\t\t\tlb=1; break;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(lb) continue;\n\t\t\t\t\t\tdouble stot=abs(cj((node){zb[i].x-zb[l].x,zb[i].y-zb[l].y},(node){zb[j].x-zb[l].x,zb[j].y-zb[l].y}))+\n\t\t\t\t\t\tabs(cj((node){zb[j].x-zb[l].x,zb[j].y-zb[l].y},(node){zb[k].x-zb[l].x,zb[k].y-zb[l].y}))+\n\t\t\t\t\t\tabs(cj((node){zb[k].x-zb[l].x,zb[k].y-zb[l].y},(node){zb[i].x-zb[l].x,zb[i].y-zb[l].y}));\n\t\t\t\t\t\tstot/=2;\n\t\t\t\t\t\tdouble stri=abs(cj((node){zb[j].x-zb[i].x,zb[j].y-zb[i].y},(node){zb[k].x-zb[i].x,zb[k].y-zb[i].y}));\n\t\t\t\t\t\tstri/=2;\n\t\t\t\t\t\tif(stot==stri){\n\t\t\t\t\t\t\tif(c==3){\n\t\t\t\t\t\t\t\t++hav[i][j][k];\n\t\t\t\t\t\t\t\tdp[i][j][k][c+1]+=dp[i][j][k][c];\n\t\t\t\t\t\t\t\tdp[i][j][k][c+1]%=MOD;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tll to1,to2;\n\t\t\t\t\t\tFOR(mmto,1,3){\n\t\t\t\t\t\t\tif(mmto==1) to1=2,to2=3;\n\t\t\t\t\t\t\tif(mmto==2) to1=1,to2=3;\n\t\t\t\t\t\t\tif(mmto==3) to1=1,to2=2;\n\t\t\t\t\t\t\tll t1=cj((node){zb[stac[mmto]].x-zb[l].x,zb[stac[mmto]].y-zb[l].y},(node){zb[stac[to1]].x-zb[l].x,zb[stac[to1]].y-zb[l].y});\n\t\t\t\t\t\t\tll t2=cj((node){zb[stac[mmto]].x-zb[l].x,zb[stac[mmto]].y-zb[l].y},(node){zb[stac[to2]].x-zb[l].x,zb[stac[to2]].y-zb[l].y});\n\t\t\t\t\t\t\tll t3=cj((node){zb[stac[to1]].x-zb[stac[to2]].x,zb[stac[to1]].y-zb[stac[to2]].y},(node){zb[stac[to1]].x-zb[l].x,zb[stac[to1]].y-zb[l].y});\n\t\t\t\t\t\t\tll t4=cj((node){zb[stac[to1]].x-zb[stac[to2]].x,zb[stac[to1]].y-zb[stac[to2]].y},(node){zb[stac[to1]].x-zb[stac[mmto]].x,zb[stac[to1]].y-zb[stac[mmto]].y});\n\t\t\t\t\t\t\tif(t1*t2<0&&t3*t4>0){\n\t\t\t\t\t\t\t\tFOR(m,1,3) lstac[m]=stac[m];\n\t\t\t\t\t\t\t\tlstac[mmto]=l;\n\t\t\t\t\t\t\t\tsort(lstac+1,lstac+4);\n\t\t\t\t\t\t\t\tdp[lstac[1]][lstac[2]][lstac[3]][c+1]+=dp[i][j][k][c];\n\t\t\t\t\t\t\t\tdp[lstac[1]][lstac[2]][lstac[3]][c+1]%=MOD;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tll ans=0;\n\tFOR(i,1,n){\n\t\tFOR(j,i+1,n) {\n\t\t\tFOR(k,j+1,n){\n\t\t\t\tif(!dp[i][j][k][n]) continue; \n\t\t\t\tans+=dp[i][j][k][n];\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n}\n```\n\n\n\n",
        "postTime": 1646139276,
        "uid": 208967,
        "name": "Hasinon",
        "ccfLevel": 9,
        "title": "P7529 [USACO21OPEN] Permutation G \u840c\u65b0\u9898\u89e3 10th"
    },
    {
        "content": "\u76ee\u524d\u662f\u6700\u4f18\u89e3\u3002\n\n\u9898\u76ee\u5927\u610f\uff1a\u7ed9\u5b9a\u5e73\u9762\u4e0a\u4efb\u610f\u4e09\u70b9\u4e0d\u5171\u7ebf\u7684 $N$ \u4e2a\u70b9\uff0c\u9700\u8981\u6c42\u51fa\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u7684\u957f\u5ea6\u4e3a $N$ \u7684\u6392\u5217 $P$ \u7684\u6570\u91cf\u3002$N\\le 40$ \u3002\n\n- \u6761\u4ef6\uff1a\u9996\u5148\u5728\u7ed9\u5b9a\u7684\u7b2c$P_1,P_2,P_3$\u4e2a\u70b9\u4e4b\u95f4\u4e24\u4e24\u8fde\u8fb9\u5f62\u6210\u4e09\u89d2\u5f62\u3002\u7136\u540e\u5bf9\u4e8e\u4efb\u4f55 $i>3$\uff0c\u5982\u679c $j<i$ \u4e14\u7b2c $P_i,P_j$ \u4e2a\u70b9\u4e4b\u95f4\u8fde\u8fb9\u4e0d\u4e0e\u4e4b\u524d\u7684\u8fb9\u76f8\u4ea4\uff0c\u5219\u8fde\u8fb9\uff0c\u5426\u5219\u7565\u8fc7\u3002\u6392\u5217\u9700\u8981\u6ee1\u8db3\u5bf9\u4e8e\u4efb\u610f $i>3$ \uff0c\u90fd\u9700\u8981\u8fde\u6070\u597d $3$ \u6761\u8fb9\u3002\n\n\u5f88\u6709\u610f\u601d\u7684\u9898\u76ee\u3002\n\n\u9996\u5148\u5982\u679c\u6211\u4eec\u786e\u5b9a\u6392\u5217\u7684\u524d $3$ \u4e2a\u70b9\uff0c\u5219\u5708\u5b9a\u4e86\u4e00\u4e2a\u521d\u59cb\u4e09\u89d2\u5f62\uff0c\u4e0d\u96be\u53d1\u73b0\u521d\u59cb\u4e09\u89d2\u5f62\u5185\u7684\u70b9\u53ef\u4ee5\u4efb\u610f\u6392\u5217\u3002\n\n\u7136\u540e\u53d1\u73b0\uff0c\u5b58\u5728\u4e09\u4e2a\u70b9\uff0c\u4f7f\u5f97\u6240\u6709\u70b9\u90fd\u5728\u8fd9\u4e09\u4e2a\u70b9\u6784\u6210\u7684\u4e09\u89d2\u5f62\u5185\uff0c\u662f\u6709\u89e3\u7684\u5145\u8981\u6761\u4ef6\u3002\n\n\u786e\u5b9a\u5f53\u524d\u4e09\u89d2\u5f62\u540e\uff0c\u6709\u4e24\u4e2a\u9009\u62e9\u3002\n- \u4e00\u4e2a\u662f\u9009\u62e9\u5f53\u524d\u4e09\u89d2\u5f62\u5185\u7684\u70b9\uff0c\u5f53\u524d\u4e09\u89d2\u5f62\u4e0d\u53d8\u3002\n-  \u53e6\u4e00\u4e2a\u662f\u9009\u62e9\u5f53\u524d\u4e09\u89d2\u5f62\u5916\u7684\u70b9\uff0c\u4f7f\u5f97\u5f53\u524d\u4e09\u89d2\u5f62\u6269\u5927\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u4e2a\u9009\u62e9\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u70b9\u90fd\u53ef\u4ee5\u9009\uff0c\u8fd8\u9700\u8981\u5224\u65ad\u6269\u5927\u540e\u662f\u5426\u662f\u4e09\u89d2\u5f62\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u5982\u679c\u662f\u9009\u62e9\u524d\u540e\u4e24\u4e2a\u4e09\u89d2\u5f62\u6240\u5939\u7684\u9762\u79ef\u4e2d\u7684\u70b9\u53ef\u4ee5\u4efb\u610f\u6392\u5217\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u72b6\u6001 $f[i][j][k]$\uff0c\u8868\u793a\u5f53\u524d\u4e09\u89d2\u5f62\u4e3a $i,j,k$ \u7684\u65b9\u6848\u6570\uff0c\u7136\u540e\u6211\u4eec\u679a\u4e3e\u4e00\u4e2a\u5728\u4e09\u89d2\u5f62\u5185\u5730\u7684\u70b9 $pt$ \u8f6c\u79fb\u3002\n\n\u4f46\u662f\u53d1\u73b0\u8fd9\u79cd\u65b9\u6cd5\u8fde\u6837\u4f8b\u90fd\u8fc7\u4e0d\u53bb\u3002\u3002\u3002\n\n\u6211\u4eec\u8fd8\u53d1\u73b0\u53ef\u4ee5\u4efb\u610f\u6392\u5217\u7684\u70b9\u751a\u81f3\u53ef\u4ee5\u653e\u5230\u6392\u5217\u6700\u540e\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53\u524d\u4e09\u89d2\u5f62\u4e3a$i,j,k$\uff0c\u4f46\u662f\u4ecd\u7136\u53ef\u4ee5\u6709\u70b9\u5269\u4e0b\u6765\u3002\n\n\u89c2\u5bdf\u540e\u53d1\u73b0\u5269\u4e0b\u6765\u7684\u70b9\u4e0d\u7ba1\u4f4d\u7f6e\u5982\u4f55\u90fd\u662f\u7b49\u4ef7\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u6539\u8fdb\u72b6\u6001\u4e3a $f[i][j][k][w]$ \u8868\u793a\u5f53\u524d\u4e09\u89d2\u5f62\u4e3a $i,j,k$\uff0c\u8fd8\u5269\u4e0b $w$ \u4e2a\u70b9\u7684\u65b9\u6848\u6570\u3002\n\n\u7531\u4e8e\u6240\u6709\u5269\u4e0b\u7684\u70b9\u662f\u7b49\u4ef7\u7684\uff0c\u6211\u4eec\u8981\u4e58\u4e0a\u7ec4\u5408\u6570\u8f6c\u79fb\u3002\n\n\u8fd8\u6709\u4e00\u4e2a\u7ec6\u8282\u5c31\u662f\u70b9$O$\u662f\u5426\u5728$\\triangle ABC$\u5185\u3002\n\n\u70b9$O$\u5728\u4e09\u89d2\u5f62\u5185\u7684\u5145\u8981\u6761\u4ef6\u662f $\\angle AOB+\\angle BOC+\\angle AOC=360^{\\circ}$ \u3002\n\n\u5982\u4f55\u6c42\u89d2\u5ea6\u5462\uff0c\u6211\u4eec\u53d1\u73b0\u6240\u6709\u70b9\u90fd\u662f\u6574\u70b9\uff0c\u4e5f\u5c31\u662f\u8bf4\u5411\u91cf\u975e\u5e38\u597d\u6c42\uff0c\u90a3\u4e48$\\cos \\angle AOB=\\dfrac{\\overrightarrow{OA}\\cdot \\overrightarrow{OB}}{|\\overrightarrow{OA}||\\overrightarrow{OB}|}$ \u3002\n\n\u8f6c\u79fb\u987a\u5e8f\u4e0d\u597d\u627e\uff0c\u76f4\u63a5\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\n\u4e4d\u4e00\u770b\u65f6\u95f4\u590d\u6742\u5ea6\u662f$\\rm O(N^7)$\u7684\uff0c\u5b9e\u9645\u4e0a\u65e0\u7528\u72b6\u6001\u975e\u5e38\u591a\uff0c\u5b9e\u9645\u590d\u6742\u5ea6\u8fd1\u4f3c\u4e8e$\\rm O(N^4)\\sim O(N^5)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define pre(i,a,b) for(int i=a;i>=b;i--)\n#define N 45\n#define P 1000000007\nusing namespace std;\nstruct vec{\n\tint x,y;\n\tdouble len(){\n\t\treturn sqrt(x*x+y*y);\n\t}\n\tvec(int X=0,int Y=0){x=X;y=Y;}\n\tint operator*(vec o){\n\t\treturn x*o.x+y*o.y;\n\t}\n};\nint f[N][N][N][N],u[N][N][N],n,x[N],y[N],fac[N],C[N][N];bool flag[N][N][N];\ndouble corn(int a,int b,int c){\n\tvec u(x[b]-x[a],y[b]-y[a]);\n\tvec v(x[c]-x[a],y[c]-y[a]);\n\treturn acos(1.00*(u*v)/u.len()/v.len());\n}\nconst double pi = acos (-1) , eps = 1e-8 ;\nbool check(int a,int b,int c,int cen){\n\treturn fabs(corn(cen,a,b) + corn(cen,a,c) + corn(cen,b,c)- 2 * pi) < eps;\n}\nvoid dp(int i,int j,int k){\n\tif(flag[i][j][k])return;\n\tflag[i][j][k]=1;\n\trep(t,0,u[i][j][k])f[i][j][k][t]=6LL*C[u[i][j][k]][t]%P*fac[u[i][j][k]-t]%P;\n\tint c[3];\n\trep(p,1,n)if(i!=p&&j!=p&&k!=p&&check(i,j,k,p)){\n\t\tc[0]=i;c[1]=j;c[2]=p;sort(c,c+3);dp(c[0],c[1],c[2]);\n\t\trep(q,0,u[i][j][k]-u[c[0]][c[1]][c[2]]-1)rep(w,0,u[c[0]][c[1]][c[2]])rep(t,0,w)\n\t\t\tf[i][j][k][q+t]=(f[i][j][k][q+t]+1LL*f[c[0]][c[1]][c[2]][w]*fac[u[i][j][k]-u[c[0]][c[1]][c[2]]-1-q+w-t]%P*\n\t\t\t\t\t\t\t\tC[u[i][j][k]-u[c[0]][c[1]][c[2]]-1][q]%P*C[w][t])%P;\n\t\tc[0]=i;c[1]=k;c[2]=p;sort(c,c+3);dp(c[0],c[1],c[2]);\n\t\trep(q,0,u[i][j][k]-u[c[0]][c[1]][c[2]]-1)rep(w,0,u[c[0]][c[1]][c[2]])rep(t,0,w)\n\t\t\tf[i][j][k][q+t]=(f[i][j][k][q+t]+1LL*f[c[0]][c[1]][c[2]][w]*fac[u[i][j][k]-u[c[0]][c[1]][c[2]]-1-q+w-t]%P*\n\t\t\t\t\t\t\t\tC[u[i][j][k]-u[c[0]][c[1]][c[2]]-1][q]%P*C[w][t])%P;\n\t\tc[0]=k;c[1]=j;c[2]=p;sort(c,c+3);dp(c[0],c[1],c[2]);\n\t\trep(q,0,u[i][j][k]-u[c[0]][c[1]][c[2]]-1)rep(w,0,u[c[0]][c[1]][c[2]])rep(t,0,w)\n\t\t\tf[i][j][k][q+t]=(f[i][j][k][q+t]+1LL*f[c[0]][c[1]][c[2]][w]*fac[u[i][j][k]-u[c[0]][c[1]][c[2]]-1-q+w-t]%P*\n\t\t\t\t\t\t\t\tC[u[i][j][k]-u[c[0]][c[1]][c[2]]-1][q]%P*C[w][t])%P;\n\t}\n}\nint main(){\n\tC[0][0]=1;\n\trep(i,1,N-5){\n\t\tC[i][0]=1;\n\t\trep(j,1,N-5)C[i][j]=(C[i-1][j-1]+C[i-1][j])%P;\n\t}\n\tfac[0]=1;\n\trep(i,1,N-5)fac[i]=1LL*fac[i-1]*i%P;\n\tscanf(\"%d\",&n);\n\trep(i,1,n)scanf(\"%d%d\",&x[i],&y[i]);\n\trep(i,1,n)rep(j,i+1,n)rep(k,j+1,n)rep(p,1,n)if(i!=p&&j!=p&&k!=p&&check(i,j,k,p))u[i][j][k]++;\n\trep(i,1,n)rep(j,i+1,n)rep(k,j+1,n)\n\trep(i,1,n)rep(j,i+1,n)rep(k,j+1,n)if(u[i][j][k]==n-3){\n\t\tdp(i,j,k);\n\t\treturn printf(\"%d\\n\",f[i][j][k][0]),0;\n\t}\n\tprintf(\"0\\n\");\n\treturn 0;\n}\n```",
        "postTime": 1619659406,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011P7529 [USACO21OPEN] Permutation G"
    },
    {
        "content": "\u9898\u610f\uff1a\u5e73\u9762\u4e0a\u6709\u4e0d\u5171\u7ebf\u7684 $n$ \u4e2a\u70b9\u3002\u6c42\u6240\u6709\u6392\u5217\uff0c\u6ee1\u8db3 $\\forall\\:3<i\\le n,\\:p_1p_i,...,p_{i-1}p_i$ \u4e2d\u6709\u4e14\u4ec5\u6709\u4e09\u6761\u4e0d\u4e0e\u4efb\u610f $p_jp_k$ \u76f8\u4ea4\uff0c\u5176\u4e2d $j,k<i$\u3002\n\n\u6838\u5fc3\u601d\u60f3\uff1aDP\n\n\u89e3\uff1a\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u524d\u4e09\u4e2a\u70b9\u6784\u6210\u4e00\u4e2a\u4e09\u89d2\u5f62\u3002\u82e5\u524d $i$ \u4e2a\u70b9\u6784\u6210\u4e00\u4e2a\u88ab\u5207\u5206\u4e3a\u82e5\u5e72\u4e2a\u5c0f\u4e09\u89d2\u5f62\u7684\u4e09\u89d2\u5f62\u4e14 $p_{i+1}$ \u5728\u4e09\u89d2\u5f62\u5185\uff0c\u5219\u524d $i+1$ \u4e2a\u70b9\u4ea6\u6784\u6210\u4e00\u4e2a\u88ab\u5207\u5206\u4e3a\u82e5\u5e72\u4e2a\u5c0f\u4e09\u89d2\u5f62\u7684\u4e09\u89d2\u5f62\uff1b\u82e5\u5176\u5728\u5f62\u5916\uff0c\u5176\u8fde\u63a5\u7684\u4e09\u6761\u7ebf\u6bb5\u53ea\u53ef\u80fd\u662f\u8fde\u63a5\u5df2\u6709\u5927\u4e09\u89d2\u5f62\u7684\u4e09\u4e2a\u9876\u70b9\uff0c\u5219\u524d $i+1$ \u4e2a\u70b9\u4ea6\u6784\u6210\u4e00\u4e2a\u88ab\u5207\u5206\u4e3a\u82e5\u5e72\u4e2a\u5c0f\u4e09\u89d2\u5f62\u7684\u4e09\u89d2\u5f62\u3002\u56e0\u6b64\uff0c\u7531\u6570\u5b66\u5f52\u7eb3\u6cd5\u53ef\u8bc1\u524d $i$ \u4e2a\u70b9\u4e00\u5b9a\u6784\u6210\u4e0a\u8ff0\u56fe\u5f62\u3002\n\n\u8003\u8651 DP\uff1a\u4ee4 $f(p, i, j, k)$ \u8868\u793a\u524d $p$ \u4e2a\u70b9\u6784\u6210\u7684\u5927\u4e09\u89d2\u5f62\u9876\u70b9\u4e3a $p_i,p_j,p_k$ \u7684\u6392\u5217\u6570\u3002\u8f6c\u79fb\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u7b2c $p$ \u4e2a\u70b9\u4e3a $p_i,p_j,p_k$ \u5176\u4e2d\u4e4b\u4e00\u6216\u4e3a $\\triangle p_ip_jp_k$ \u4e2d\u4e00\u70b9\u3002\u5bf9\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c$\\triangle p_ip_jp_k$ \u4e2d\u6bcf\u4e00\u70b9 $q$ \u4f1a\u8d21\u732e $f(p-1,i,j,q)+f(p-1,i,k,q)+f(p-1,j,k,q)$ \u79cd\u6392\u5217\u6570\uff1b\u5bf9\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u8bbe $\\triangle p_ip_jp_k$ \u5185\u5171\u6709 $k\\ge p-3$ \u4e2a\u70b9\uff0c\u5219\u5171\u4ea7\u751f $(k+3-p-1)f(p-1,i,j,k)$ \u7684\u8d21\u732e\u3002\u6309 $p$ \u8f6c\u79fb\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^5)$\u3002\n\n\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nstruct point\n{\n\tdouble x, y;\n}poi[41];\nconst long long mod=1000000007;\nlong long n, a[41][41][41][41], b[41][41][41], res;\nlong long pline(double x1, double y1, double x2, double y2, double x, double y)//\u5224\u65ad\u70b9\u548c\u7ebf\u6bb5\u5173\u7cfb\uff08\u4e0a\u3001\u4e0b\uff09\n{\n\tif(x1==x2)\n\t{\n\t\tif(x<x1)\n\t\t\treturn -1;\n\t\treturn 1;\n\t}\n\tif(y<y1+(x-x1)/(x2-x1)*(y2-y1))\n\t\treturn -1;\n\treturn 1;\n}\nbool intri(long long x, long long y, long long z, long long p)//\u5224\u65ad\u70b9\u548c\u4e09\u89d2\u5f62\u5173\u7cfb\n{\n\tif(pline(poi[x].x, poi[x].y, poi[y].x, poi[y].y, poi[p].x, poi[p].y)==pline(poi[x].x, poi[x].y, poi[y].x, poi[y].y, poi[z].x, poi[z].y))\n\t\tif(pline(poi[x].x, poi[x].y, poi[z].x, poi[z].y, poi[p].x, poi[p].y)==pline(poi[x].x, poi[x].y, poi[z].x, poi[z].y, poi[y].x, poi[y].y))\n\t\t\tif(pline(poi[y].x, poi[y].y, poi[z].x, poi[z].y, poi[p].x, poi[p].y)==pline(poi[y].x, poi[y].y, poi[z].x, poi[z].y, poi[x].x, poi[x].y))\n\t\t\t\treturn 1;\n\treturn 0;\n}\nbool inang(long long x, long long y, long long z, long long p)//\u672a\u4f7f\u7528\n{\n\tlong long t=0;\n\tif(pline(poi[x].x, poi[x].y, poi[y].x, poi[y].y, poi[p].x, poi[p].y)==pline(poi[x].x, poi[x].y, poi[y].x, poi[y].y, poi[z].x, poi[z].y))\n\t\tt++;\n\tif(pline(poi[x].x, poi[x].y, poi[z].x, poi[z].y, poi[p].x, poi[p].y)==pline(poi[x].x, poi[x].y, poi[z].x, poi[z].y, poi[y].x, poi[y].y))\n\t\tt++;\n\tif(pline(poi[y].x, poi[y].y, poi[z].x, poi[z].y, poi[p].x, poi[p].y)==pline(poi[y].x, poi[y].y, poi[z].x, poi[z].y, poi[x].x, poi[x].y))\n\t\tt++;\n\tif(t==1)\n\t\treturn 1;\n\treturn 0;\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i=1; i<=n; i++)\n\t\tcin>>poi[i].x>>poi[i].y;\n\tfor(int i=1; i<=n-2; i++)\n\t\tfor(int j=i+1; j<=n-1; j++)\n\t\t\tfor(int k=j+1; k<=n; k++)\n\t\t\t\ta[3][i][j][k]=6;//\u521d\u59cb\u5316\n\tfor(int i=1; i<=n-2; i++)\n\t\tfor(int j=i+1; j<=n-1; j++)\n\t\t\tfor(int k=j+1; k<=n; k++)\n\t\t\t\tfor(int p=1; p<=n; p++)\n\t\t\t\t\tif(p!=i && p!=j && p!=k && intri(i, j, k, p)==1)\n\t\t\t\t\t\tb[i][j][k]++;//\u4e09\u89d2\u5f62\u5185\u70b9\u6570\u91cf\n\tfor(int p=4; p<=n; p++)\n\t\tfor(int i=1; i<=n-2; i++)\n\t\t\tfor(int j=i+1; j<=n-1; j++)\n\t\t\t\tfor(int k=j+1; k<=n; k++)\n\t\t\t\t{\n\t\t\t\t\tif(b[i][j][k]+3>=p)\n\t\t\t\t\t\ta[p][i][j][k]=(a[p][i][j][k]+a[p-1][i][j][k]*(b[i][j][k]+4-p))%mod;//\u7b2c\u4e8c\u79cd\u60c5\u51b5\n\t\t\t\t\tfor(int q=1; q<=n; q++)\n\t\t\t\t\t\tif(q!=i && q!=j && q!=k)\n\t\t\t\t\t\t\tif(intri(i, j, k, q)==1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(q<i)\n\t\t\t\t\t\t\t\t\ta[p][i][j][k]=(a[p][i][j][k]+a[p-1][q][i][j]+a[p-1][q][i][k]+a[p-1][q][j][k])%mod;\n\t\t\t\t\t\t\t\telse if(q<j)\n\t\t\t\t\t\t\t\t\ta[p][i][j][k]=(a[p][i][j][k]+a[p-1][i][q][j]+a[p-1][i][q][k]+a[p-1][q][j][k])%mod;\n\t\t\t\t\t\t\t\telse if(q<k)\n\t\t\t\t\t\t\t\t\ta[p][i][j][k]=(a[p][i][j][k]+a[p-1][i][j][q]+a[p-1][i][q][k]+a[p-1][j][q][k])%mod;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\ta[p][i][j][k]=(a[p][i][j][k]+a[p-1][i][j][q]+a[p-1][i][k][q]+a[p-1][j][k][q])%mod;//\u7b2c\u4e00\u79cd\u60c5\u51b5\n//\t\t\t\t\t\t\t\tcout<<p<<\" \"<<i<<\" \"<<j<<\" \"<<k<<\" \"<<q<<\" \"<<a[p][i][j][k]<<endl;\n\t\t\t\t\t\t\t}\n\t\t\t\t}\n\tfor(int i=1; i<=n-2; i++)\n\t\tfor(int j=i+1; j<=n-1; j++)\n\t\t\tfor(int k=j+1; k<=n; k++)\n\t\t\t{\n//\t\t\t\tcout<<n<<\" \"<<i<<\" \"<<j<<\" \"<<k<<\" \"<<a[n][i][j][k]<<endl;\n\t\t\t\tres=(res+a[n][i][j][k])%mod;//\u6c42\u7ed3\u679c\n\t\t\t}\n\tcout<<res;\n    return 0;\n}\n```",
        "postTime": 1680124711,
        "uid": 191387,
        "name": "\u03a6\u03c1\u03b1\u03bd\u03ba",
        "ccfLevel": 0,
        "title": "P7529 [USACO21OPEN] Permutation G \u9898\u89e3"
    }
]
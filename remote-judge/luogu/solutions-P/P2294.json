[
    {
        "content": "####\u6d1b\u8c37P2294 [HNOI2005]\u72e1\u733e\u7684\u5546\u4eba \uff0c\u795e\u5947\u505a\u6cd5\u2014\u2014\u8d2a\u5fc3\n\n\n- \u770b\u5230\u5927\u725b\u90fd\u662f\u5199\u7684\u5dee\u5206\u7ea6\u675f\u6216\u5e26\u6743\u5e76\u67e5\u96c6\uff0c\u672c\u849f\u84bb\u90fd\u4e0d\u592a\u4f1a\uff08\u8fd8\u662f\u7528\u5dee\u5206\u7ea6\u675f\u8fc7\u4e86\u7684QAQ\uff09\uff0c\u4f46\u662f\u60f3\u51fa\u4e00\u79cd\u8d2a\u5fc3\u7684\u7b56\u7565\uff0c\u8fd0\u7528\u795e\u5947\u7684\u4f18\u5148\u961f\u5217\u5b9e\u73b0\u3002\n\n\n- \u601d\u8def\u662f\uff1a\u5148\u6309\u5de6\u7aef\u70b9\u4e3a\u7b2c\u4e00\u6392\u5e8f\u5173\u952e\u5b57\uff0c\u518d\u6392\u53f3\u7aef\u70b9\u3002\u4e4b\u540e\u5c31\u5f00\u59cb\u4e24\u4e24\u6bd4\u8f83\uff0c\u5982\u679c\u5de6\u7aef\u70b9\u76f8\u7b49\uff0c\u5c31\u6bd4\u8f83\u53f3\u7aef\u70b9\uff0c\u5982\u679c\u76f8\u7b49\uff0c\u5c31\u6bd4\u8f83\u503c\uff0c\u5982\u679c\u503c\u4e0d\u540c\uff0c\u5c31\u76f4\u63a5\u8f93\u51fafalse\uff0c\u5426\u5219\u8f93\u51fatrue\uff0c\u5982\u679c\u53f3\u7aef\u70b9\u4e0d\u7b49\uff0c\u5c31\u628a\u76f8\u540c\u7684\u90e8\u5206\u62b5\u6d88\u6389\uff0c\u628a\u65b0\u7684\u533a\u95f4\u518d\u538b\u5165\u4f18\u5148\u961f\u5217\u3002\u76f4\u5230\u4e0d\u80fd\u64cd\u4f5c\uff0c\u5c31\u8f93\u51fatrue\u3002\n\n\n- (ps:\u4f5c\u4e3a\u849f\u84bb\u5728\u6d1b\u8c37\u7684\u7b2c\u4e00\u7bc7\u535a\u5ba2\uff0c\u8fd8\u662f\u6709\u70b9\u5c0f\u5c0f\u7684\u6fc0\u52a8 QAQ)\n\n####\u4e0b\u9644\u4ee3\u7801\uff1a\n\n\n```cpp\n#include<queue>\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#define N 1100\nusing namespace std;\ninline void read(int &x)\n{\n    x=0;\n    int p=1;\n    char c=getchar();\n    while(!isdigit(c)){if(c=='-')p=-1;c=getchar();}\n    while(isdigit(c)) {x=(x<<1)+(x<<3)+(c^'0');c=getchar();}\n    x*=p;\n\n}//\u5feb\u901f\u8bfb\u5165\n\nint n,m;\nstruct node\n{\n    int l,r,s;\n    bool operator < (const node &h)const\n    {\n        if(l!=h.l)return l>h.l;\n        return r>h.r;\n\n}//\u91cd\u8f7d\u8fd0\u7b97\u7b26\uff0c\u786e\u5b9a\u4f18\u5148\u961f\u5217\u7684\u4f18\u5148\u7ea7\n\n}tmp;\npriority_queue<node>q;\nint main()\n{\n    int t;\n    read(t);\n    while(t--)\n    {    \n        while (!q.empty()) q.pop();//\u591a\u7ec4\u6570\u636e\u6e05\u7a7a\n        read(n);read(m);\n        if(m==1){printf(\"true\\n\");continue;}//\u5176\u5b9e\u6ca1\u5fc5\u8981\u7279\u5224\uff0c\u53ea\u662f\u4f18\u5316\u4e00\u70b9\u70b9\n        for(int i=1;i<=m;i++)\n        {\n            int l,r,s;\n            read(tmp.l);read(tmp.r);read(tmp.s);\n            q.push(tmp);\n        }\n        tmp=q.top();//\u53d6\u51fa\u7b2c\u4e00\u4e2a\n        q.pop();\n        while(!q.empty())\n        {    \n            node tmp1;\n            tmp1=q.top();\n            q.pop();\n            if(tmp.l==tmp1.l)\n            {\n                if(tmp.r==tmp1.r)\n                {\n                    if(tmp.s!=tmp1.s)\n                    {printf(\"false\\n\");goto end;}//\u9000\u51fa\u591a\u91cd\u5faa\u73af\u7684\u5c0f\u64cd\u4f5c\n                }\n                else \n                if(tmp.r<tmp1.r)\n                    q.push((node) {tmp.r+1, tmp1.r, tmp1.s - tmp.s});//\u5c06\u62b5\u6d88\u540e\u7684\u90e8\u5206\u653e\u5165\u961f\u5217\n            }\n            tmp = tmp1;//\u7ee7\u7eed\u6bd4\n        }\n        printf(\"true\\n\");\n        end:;\n    }\n    return 0;\n}\n```",
        "postTime": 1511403296,
        "uid": 22016,
        "name": "pengym",
        "ccfLevel": 0,
        "title": "\u6d1b\u8c37P2294 [HNOI2005]\u72e1\u733e\u7684\u5546\u4eba \uff0c\u795e\u5947\u505a\u6cd5\u2014\u2014\u8d2a\u5fc3"
    },
    {
        "content": "### Solution\uff1a\n\n\u3000\u3000\u672c\u9898\u662f\u601d\u7ef4\u6bd4\u8f83\u5de7\u5999\u7684\u5dee\u5206\u7ea6\u675f\u3002\u3002\u3002\n\n\u3000\u3000\u601d\u8def\u7c7b\u4f3c\u4e8e\u690d\u6811\u90a3\u9053\u9898\uff0c$u\\rightarrow v=c$\u53ef\u4ee5\u7406\u89e3\u4e3a$sum[v]-sum[u-1]=c$\uff08\u524d\u7f00\u548c\uff09\u3002\n\n\u3000\u3000\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e2a\u6761\u4ef6\u6211\u4eec\u53ef\u4ee5\u5148\u5f97\u51fa\u7ea6\u675f\u6761\u4ef6\uff1a$w[u-1,v]=c$\u8868\u793a$sum[v]$\u6bd4$sum[u-1]$\u5927$c$\u3002\n\n\u3000\u3000\u6211\u4eec\u76f4\u63a5\u5728\u8fd9\u6837\u7684\u56fe\u4e0a\u8dd1\u6700\u957f\u8def\u540e\u80fd\u6c42\u51fa\u6bcf\u4e2a\u70b9\u7684$dis$\u503c\uff0c\u4f46\u662f\u5982\u4f55\u53bb\u5224\u65ad\u662f\u5426\u5408\u6cd5\u5462?\n\n\u3000\u3000\u5148\u770b\u8fd9\u5f20\u56fe\uff08~~\u624b\u7ed8\u52ff\u55b7~~\uff09\uff1a\n\n\u3000\u3000\u3000![](http://images2018.cnblogs.com/blog/1240891/201806/1240891-20180612145323269-1305162300.png)\n\n\u3000\u3000   \u6b64\u56fe\u8868\u793a\u7684\u662f$sum[1,3]=1,\\;sum[1,2]=1,\\;sum[2,3]=1$\u7684\u60c5\u51b5\uff0c\u663e\u7136\u662f\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u6211\u4eec\u6c42\u51fa\u6700\u957f\u8def\u540e\u7684$dis$\u503c\u5206\u522b\u4e3a$dis[1]=0,\\;dis[2]=1\\;dis[3]=2$\uff0c\u8c8c\u4f3c\u5bf9\u5224\u65ad\u5408\u6cd5\u6ca1\u4ec0\u4e48\u7528\u3002\n\n\u3000\u3000\u4e0d\u96be\u53d1\u73b0\uff0c\u7528\u5c11\u4e86\u7ea6\u675f\u6761\u4ef6\uff0c\u7ed9\u5b9a\u7684$sum[u\\rightarrow v]=c$\u4e0d\u4ec5\u9700\u8981\u6ee1\u8db3$sum[v]-sum[u-1]=c$\uff0c\u8fd8\u5e94\u8be5\u6ee1\u8db3$sum[u-1]-sum[v]=-c$\u3002\n\n\u3000\u3000\u90a3\u4e48\u6211\u4eec\u52a0\u5165\u8fd9\u4e00\u7ea6\u675f\u540e\uff0c\u56fe\u5c31\u53d8\u6210\u4e86\u8fd9\u6837\uff1a\n\n\u3000\u3000![](http://images2018.cnblogs.com/blog/1240891/201806/1240891-20180612150317098-169505595.png)\n\n\u3000\u3000\u6b64\u65f6\uff0c\u6211\u4eec\u7531\u7b2c\u4e00\u5f20\u56fe\u6c42\u5f97\u7684$dis[1]=0,\\;dis[2]=1,\\;dis[3]=2$\u5728\u6b64\u56fe\u4e2d\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u66f4\u65b0\uff0c$dis[1]=0$\u4f1a\u7531$dis[3]$\u66f4\u65b0\u53d8\u4e3a$dis[1]=1$\uff0c\u7136\u540e\u5f15\u53d1\u4e00\u7cfb\u5217\u65e0\u9650\u5236\u7684\u66f4\u65b0\u3002**\u7a76\u5176\u539f\u56e0\uff0c\u5c31\u662f\u56e0\u4e3a\u4e0d\u6ee1\u8db3$sum[u-1]-sum[v]=-c$\u8fd9\u4e00\u7ea6\u675f\u6761\u4ef6\u3002**\n\n\u3000\u3000\u6240\u4ee5\u6211\u4eec**\u5c06\u4e24\u4e2a\u7ea6\u675f\u6761\u4ef6\u90fd\u5efa\u6210\u8fb9**\u3002\n\n\u3000\u3000\u518d\u8003\u8651\u53e6\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u6e90\u70b9\u4e0d\u786e\u5b9a\uff0c\u6240\u4ee5\u6211\u4eec\u6bcf\u6b21\u4ee5\u6ca1\u6709\u88ab\u904d\u5386\u8fc7\u7684\u70b9\u4e3a\u6e90\u70b9\u8dd1$spfa$\u6c42\u6700\u957f\u8def\uff08**\u5373\u4f7f\u7ea6\u675f\u6761\u4ef6\u4e2d\u6ca1\u6709\u51fa\u73b0\u8fc7\u8be5\u70b9\u4e5f\u5bf9\u7b54\u6848\u65e0\u5f71\u54cd\uff0c\u56e0\u4e3a\u6839\u672c\u4e0d\u4f1a\u7531\u5b83\u8fdb\u884c\u5e7f\u641c\u904d\u5386**\uff09\uff0c\u90a3\u4e48\u5f53\u67d0\u4e2a\u70b9\u88ab\u91cd\u590d\u904d\u5386\u8d85\u8fc7$n$\u6b21\uff0c\u5219\u51fa\u73b0\u4e86\u73af\uff0c\u8bf4\u660e\u4e0d\u53ef\u884c\uff0c\u5426\u5219\u5c31\u662f\u5408\u6cd5\u7684\u3002\n  \n  \uff08\u4e8b\u5b9e\u8bc1\u660e\u6570\u636e\u6bd4\u8f83\u6c34\uff0c\u56e0\u4e3a\u6211\u5f00\u59cb\u5e76\u6ca1\u6709\u8003\u8651\u6e90\u70b9\u4e0d\u4e3a$0$\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u5374$A$\u4e86\uff09\n  \n  $\\quad\\;\\;$\u6b22\u8fce\u6765\u8e29\u535a\u5ba2\uff1a[five20](https://www.cnblogs.com/five20/p/9173155.html)\uff08\u849f\u84bb\u5199\u9898\u89e3\u4e0d\u6613\uff0c\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\uff0c\u4e07\u5206\u611f\u8c22\uff01\uff09\n  \n### \u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define il inline\n#define For(i,a,b) for(int (i)=(a);(i)<=(b);(i)++)\nusing namespace std;\nconst int N=5005,inf=23333333;\nint T,to[N],tot[N],net[N],h[N],w[N],dis[N],cnt,n,m;\nbool vis[N];\nqueue<int>q;\n\nil int gi(){\n    int a=0;char x=getchar();bool f=0;\n    while((x<'0'||x>'9')&&x!='-')x=getchar();\n    if(x=='-')x=getchar(),f=1;\n    while(x>='0'&&x<='9')a=(a<<3)+(a<<1)+x-48,x=getchar();\n    return f?-a:a;\n}\n\nil void add(int u,int v,int c){to[++cnt]=v,net[cnt]=h[u],h[u]=cnt,w[cnt]=c;}\n\nil bool spfa(int s){\n    For(i,1,n)dis[i]=-inf;\n    q.push(s);dis[s]=0;vis[s]=1;\n    while(!q.empty()){\n        int u=q.front();q.pop();vis[u]=0;tot[u]++;\n        if(tot[u]==n)return 0;\n        for(int i=h[u];i;i=net[i])\n            if(dis[to[i]]<dis[u]+w[i]){\n                dis[to[i]]=dis[u]+w[i];\n                if(!vis[to[i]])q.push(to[i]),vis[to[i]]=1;\n            }\n    }\n    return 1;\n}\n\nint main(){\n    T=gi();\n    while(T--){\n        n=gi(),m=gi();\n        cnt=0;\n        memset(vis,0,sizeof(vis));\n        memset(h,0,sizeof(h));\n        memset(tot,0,sizeof(tot));\n        int u,v,c,f;\n        while(m--){\n            u=gi(),v=gi(),c=gi();\n            add(u-1,v,c);add(v,u-1,-c);\n        }\n        f=0;\n        For(i,0,n){\n            if(!tot[i]){\n                if(!spfa(i)){f=1;break;}\n            }\n        }\n        if(!f)printf(\"true\\n\");\n        else printf(\"false\\n\");\n    }\n    return 0;\n}\n```\n",
        "postTime": 1528787943,
        "uid": 44000,
        "name": "\u6d45\u8272\u8c03",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u9898\u89e3\u91cc\u6e05\u4e00\u8272\u7684spfa\n\n\u7136\u800c\u6211\u7528\u4e86\u5e76\u67e5\u96c6\n\n\u7ed9\u51fa[l,r]\u7684\u533a\u95f4\u548c\uff0c\u76f8\u5f53\u4e8es[r]-s[l](\u524d\u7f00\u548c\u601d\u60f3)\n\n\u4e00\u65e6\u5df2\u7ecf\u77e5\u9053\u4e86 s[a]-s[b],s[b]-s[c]\uff0c\u663e\u7136\u518d\u7ed9\u51fa\u4e00\u6761[a,c]\u5c31\u53ef\u4ee5\u5224\u65ad\"\u8d26\u672c\u7684\u771f\u5047\"\u4e86\u00a0\n\n\u5c06\u6bcf\u6761\u8fd9\u6837\u7684\u4fe1\u606f(l,r,w)\uff0cl,r\u653e\u5165\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u7528\u5e76\u67e5\u96c6\u6765\u7ef4\u62a4\uff0c\u5e76\u7ef4\u62a4cha[l]=s[root]-s[l],cha[r]=s[root]-s[r]\n\n\u82e5 l,r\u5df2\u7ecf\u5728\u540c\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u5c31\u76f4\u63a5\u67e5\u8be2cha[l]-cha[r]\uff0c\u5224\u8bfb\u4e0ew\u662f\u5426\u76f8\u7b49\u00a0\n\nAC\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nint fa[105],cha[105];  \nint find(int x)\n{  \n    if(x!=fa[x])\n    {\n        int t=find(fa[x]);\n        cha[x]+=cha[fa[x]];\n        fa[x]=t;  \n    }  \n    return fa[x];  \n}  \nint main()  \n{  \n    int T,n,m,i,x,y,z,flag;  \n    scanf(\"%d\",&T);  \n    while (T--) \n    {  \n        flag=0;  \n        scanf(\"%d%d\",&n,&m);  \n        for(i=0;i<=n;i++)\n        {  \n            fa[i]=i;  \n            cha[i]=0;  \n        }  \n        for(i=1;i<=m;i++)  \n        {  \n            scanf(\"%d%d%d\",&x,&y,&z);  \n            x--;  \n            if(find(x)!=find(y))  \n            {  \n                cha[fa[y]]=cha[x]-cha[y]-z;  \n                fa[fa[y]]=fa[x];\n            }  \n            else  \n            if(cha[x]-cha[y]!=z) flag=1;  \n        }  \n        if(flag==0) printf(\"true\\n\"); else printf(\"false\\n\");  \n    }  \n    return 0;  \n}\n\n```",
        "postTime": 1504956375,
        "uid": 20458,
        "name": "66666a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "# \u4e00\u3001\u6982\u5ff5\n\n\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\uff08system of difference constraints\uff09\uff0c\u662f\u6c42\u89e3\u5173\u4e8e\u4e00\u7ec4\u53d8\u6570\u7684\u7279\u6b8a\u4e0d\u7b49\u5f0f\u7ec4\u4e4b\u65b9\u6cd5\u3002\u5982\u679c\u4e00\u4e2a\u7cfb\u7edf\u7531n\u4e2a\u53d8\u91cf\u548cm\u4e2a\u7ea6\u675f\u6761\u4ef6\u7ec4\u6210\uff0c\u5176\u4e2d\u6bcf\u4e2a\u7ea6\u675f\u6761\u4ef6\u5f62\u5982xj-xi<=bk(i,j\u2208[1,n],k\u2208[1,m]),\u5219\u79f0\u5176\u4e3a\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf(system of difference constraints)\u3002\u4ea6\u5373\uff0c\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u662f\u6c42\u89e3\u5173\u4e8e\u4e00\u7ec4\u53d8\u91cf\u7684\u7279\u6b8a\u4e0d\u7b49\u5f0f\u7ec4\u7684\u65b9\u6cd5\u3002\n\n\u901a\u4fd7\u4e00\u70b9\u5730\u8bf4\uff0c\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u5c31\u662f\u4e00\u4e9b\u4e0d\u7b49\u5f0f\u7684\u7ec4\uff0c\u800c\u6211\u4eec\u7684\u76ee\u6807\u662f\u901a\u8fc7\u7ed9\u5b9a\u7684\u7ea6\u675f\u4e0d\u7b49\u5f0f\u7ec4\u6c42\u51fa\u6700\u5927\u503c\u6216\u8005\u6700\u5c0f\u503c\u6216\u8005\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u662f\u5426\u6709\u89e3\u3002(\u5982\u679c\u4e00\u4e2a\u7cfb\u7edf\u7531n\u4e2a\u53d8\u91cf\u548cm\u4e2a\u7ea6\u675f\u6761\u4ef6\u7ec4\u6210\uff0c\u5f62\u6210m\u4e2a\u5f62\u5982ai-aj\u2264k\u7684\u4e0d\u7b49\u5f0f(i,j\u2208[1,n],k\u4e3a\u5e38\u6570),\u5219\u79f0\u5176\u4e3a\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u3002)\n\n# \u4e8c\u3001\u5f15\u4f8b\n\n\u7ed9\u5b9an\u4e2a\u53d8\u91cf\u548cm\u4e2a\u4e0d\u7b49\u5f0f\uff0c\u6bcf\u4e2a\u4e0d\u7b49\u5f0f\u7684\u5f62\u5f0f\u4e3a x[i] - x[j] <= a[k] (0 <= i, j < n, 0 <= k < m\uff0c a[k]\u5df2\u77e5)\uff0c\u6c42 x[i] - x[j] \u7684\u6700\u5927\u503c\u3002\n\u4f8b\u5982\u5f53n = 4\uff0cm = 5\uff0c\u7ed9\u51fa\u5982\u4e0b\u56fe\u6240\u793a\u7684\u4e0d\u7b49\u5f0f\u7ec4\uff0c\u6c42x3 - x0\u7684\u6700\u5927\u503c\u3002\n\n![](https://img-blog.csdn.net/20170603011352473?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbXlfc3Vuc2hpbmUyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n\u4e00\u822c\u601d\u8def\uff1a\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u628a\u51e0\u4e2a\u4e0d\u7b49\u5f0f\u7ec4\u5408\u5f97\u5230\u6700\u540e\u6211\u4eec\u8981\u6c42\u7684\u5f0f\u5b50\uff0c\u4e8e\u662f\u8fd9\u4e9b\u5f0f\u5b50\u91cc\u6700\u5c0f\u7684\u90a3\u4e2a\u5c31\u662f\u7b54\u6848\u3002\n\u6bd4\u5982\uff0c\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff1a\n\uff083\uff09 -->  x3 - x0<=4\uff1b\n\uff081\uff09\uff084\uff09\uff085\uff09 --> x3 - x0<=5\uff1b\n\uff082\uff09\uff085\uff09 --> x3 - x0<=3;\n\u6240\u4ee5\u6700\u540e\u7ed3\u679c\u5c31\u662f3.\n\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u662f\u5426\u60f3\u5230\u8fd9\u79cd\u65b9\u6cd5\u4e0e\u6211\u4eec\u5df2\u7ecf\u5b66\u7684\u4e00\u79cd\u7b97\u6cd5\u6709\u6240\u8054\u7cfb\uff0c\u662f\u7684\uff0c\u5c31\u662f\u6700\u77ed\u8def\u7b97\u6cd5\u3002\n\n# \u4e09\u3001\u5dee\u5206\u7ea6\u675f\u4e0e\u6700\u77ed\u8def\u6a21\u578b\n\n## 1\u3001\u4e0e\u6700\u77ed\u8def\u6a21\u578b\u7684\u8054\u7cfb\n\n\u5148\u7ed9\u51fa\u7ed3\u8bba\uff1a\u6c42\u89e3\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\uff0c\u90fd\u53ef\u4ee5\u8f6c\u5316\u6210\u56fe\u8bba\u7684\u5355\u6e90\u6700\u77ed\u8def\u5f84\uff08\u6216\u6700\u957f\u8def\u5f84\uff09\u95ee\u9898\u3002\n\n\u6211\u4eec\u89c2\u5bdf\u4e0a\u9762\u4f8b\u5b50\u4e2d\u7684\u4e0d\u7b49\u5f0f\uff0c\u90fd\u662fx[i] - x[j] <= a[k]\uff0c\u53ef\u4ee5\u8fdb\u884c\u79fb\u9879\uff0c\u6210\u4e3ax[i] <= x[j] + a[k]\uff0c\u6211\u4eec\u4ee4a[k] = w(j, i)\uff0cdis[i]=x[i],\u5e76\u4f7fi=v,j=u,\u90a3\u4e48\u539f\u59cb\u5c31\u53d8\u4e3a\uff1adis[u]+w(u,v)>=dis[v],\u4e8e\u662f\u53ef\u4ee5\u8054\u60f3\u5230\u6700\u77ed\u8def\u6a21\u578b\u4e2d\u7684\u4e00\u90e8\u5206\u4ee3\u7801\n\n```cpp\nif(dis[u]+w(u,v)<=dis[v])\n{\n    dis[v]=dis[u]+w(u,v);\n}\n```\n\u8fd9\u4e0d\u6b63\u4e0e\u677e\u5f1b\u64cd\u4f5c\u76f8\u4f3c\u5417\uff1f\n\n\u4f46\u662f\u597d\u50cf\u4e0d\u7b49\u53f7\u65b9\u5411\u521a\u597d\u76f8\u53cd\uff0c\u4f46\u5176\u5b9e\u8fd9\u5e76\u4e0d\u77db\u76fe\n\n\u4e0a\u9762\u7684\u4ee3\u7801\u8981\u5b9e\u73b0\u7684\u662f\u4f7fdis[u]+w(u,v)>dis[v],\u800c\u5bf9\u4e8e\u4e0d\u7b49\u5f0f\uff0c\u6211\u4eec\u8fdb\u884c\u5efa\u8fb9\u7684\u64cd\u4f5c\uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u4e0d\u7b49\u5f0f x[i] - x[j] <= a[k]\uff0c\u5bf9\u7ed3\u70b9 j \u548c i \u5efa\u7acb\u4e00\u6761 j -> i\u7684\u6709\u5411\u8fb9\uff0c\u8fb9\u6743\u4e3aa[k]\uff0c\u6c42x[n-1] - x[0] \u7684\u6700\u5927\u503c\u5c31\u662f\u6c42 0 \u5230n-1\u7684\u6700\u77ed\u8def\uff0c\u4e24\u8005\u521a\u597d\u543b\u5408\u3002\u6240\u4ee5\u6c42\u89e3\u5dee\u5206\u7ea6\u675f\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e86\u6700\u77ed\u8def\u95ee\u9898\u3002\n\n## 2.\u95ee\u9898\u89e3\u7684\u5b58\u5728\u6027\n\n\u7531\u4e8e\u5728\u6c42\u89e3\u6700\u77ed\u8def\u65f6\u4f1a\u51fa\u73b0\u5b58\u5728\u8d1f\u73af\u6216\u8005\u7ec8\u70b9\u6839\u672c\u4e0d\u53ef\u8fbe\u7684\u60c5\u51b5\uff0c\u5728\u6c42\u89e3\u5dee\u5206\u7ea6\u675f\u95ee\u9898\u65f6\u540c\u6837\u5b58\u5728\n\n### \uff081\uff09\u3001\u5b58\u5728\u8d1f\u73af\n\n\u5982\u679c\u8def\u5f84\u4e2d\u51fa\u73b0\u8d1f\u73af\uff0c\u5c31\u8868\u793a\u6700\u77ed\u8def\u53ef\u4ee5\u65e0\u9650\u5c0f\uff0c\u5373\u4e0d\u5b58\u5728\u6700\u77ed\u8def\uff0c\u90a3\u4e48\u5728\u4e0d\u7b49\u5f0f\u4e0a\u7684\u8868\u73b0\u5373X[n-1] - X[0] <= T\u4e2d\u7684T\u65e0\u9650\u5c0f\uff0c\u5f97\u51fa\u7684\u7ed3\u8bba\u5c31\u662f X[n-1] - X[0]\u7684\u6700\u5927\u503c\u4e0d\u5b58\u5728\u3002\u5728SPFA\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u4f53\u73b0\u4e3a\u67d0\u4e00\u70b9\u7684\u5165\u961f\u6b21\u6570\u5927\u4e8e\u8282\u70b9\u6570\u3002\uff08\u8c8c\u4f3c\u53ef\u4ee5\u7528sqrt(num_node)\u6765\u4ee3\u66ff\u51cf\u5c11\u8fd0\u884c\u65f6\u95f4\uff09\n\n### \uff082\uff09\u3001\u7ec8\u70b9\u4e0d\u53ef\u8fbe\n\n\u8fd9\u79cd\u60c5\u51b5\u8868\u660eX[n-1]\u548cX[0]\u4e4b\u95f4\u6ca1\u6709\u7ea6\u675f\u5173\u7cfb\uff0cX[n-1] - X[0]\u7684\u6700\u5927\u503c\u65e0\u9650\u5927\uff0c\u5373X[n-1]\u548cX[0]\u7684\u53d6\u503c\u6709\u65e0\u9650\u591a\u79cd\u3002\u5728\u4ee3\u7801\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u4f53\u73b0\u4e3adis[n-1]=INF\u3002\n\n## 3\u3001\u4e0d\u7b49\u5f0f\u7ec4\u7684\u8f6c\u5316\n\n\u505a\u9898\u65f6\u53ef\u80fd\u4f1a\u9047\u5230\u4e0d\u7b49\u5f0f\u4e2d\u7684\u7b26\u53f7\u4e0d\u76f8\u540c\u7684\u60c5\u51b5\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u5bf9\u5b83\u4eec\u8fdb\u884c\u9002\u5f53\u7684\u8f6c\u5316\n\n\uff081\uff09\u65b9\u7a0b\u7ed9\u51fa\uff1aX[n-1]-X[0]>=T ,\u53ef\u4ee5\u8fdb\u884c\u79fb\u9879\u8f6c\u5316\u4e3a\uff1a X[0]-X[n-1]<=-T\u3002\n\n\uff082\uff09\u65b9\u7a0b\u7ed9\u51fa\uff1aX[n-1]-X[0]<T, \u53ef\u4ee5\u8f6c\u5316\u4e3aX[n-1]-X[0]<=T-1\u3002\n\n\uff083\uff09\u65b9\u7a0b\u7ed9\u51fa\uff1aX[n-1]-X[0]=T\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3aX[n-1]-X[0]<=T&&X[n-1]-X[0]>=T\uff0c\u518d\u5229\u7528\uff081\uff09\u8fdb\u884c\u8f6c\u5316\u5373\u53ef\n\n## 4\u3001\u5e94\u7528\n\u5bf9\u4e8e\u4e0d\u540c\u7684\u9898\u76ee\uff0c\u7ed9\u51fa\u7684\u6761\u4ef6\u90fd\u4e0d\u4e00\u6837\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5173\u6ce8\u95ee\u9898\u662f\u4ec0\u4e48\uff0c\u5982\u679c\u9700\u8981\u6c42\u7684\u662f\u4e24\u4e2a\u53d8\u91cf\u5dee\u7684\u6700\u5927\u503c\uff0c\u90a3\u4e48\u9700\u8981\u5c06\u6240\u6709\u4e0d\u7b49\u5f0f\u8f6c\u53d8\u6210\"<=\"\u7684\u5f62\u5f0f\uff0c\u5efa\u56fe\u540e\u6c42\u6700\u77ed\u8def\uff1b\u76f8\u53cd\uff0c\u5982\u679c\u9700\u8981\u6c42\u7684\u662f\u4e24\u4e2a\u53d8\u91cf\u5dee\u7684\u6700\u5c0f\u503c\uff0c\u90a3\u4e48\u9700\u8981\u5c06\u6240\u6709\u4e0d\u7b49\u5f0f\u8f6c\u5316\u6210\">=\"\uff0c\u5efa\u56fe\u540e\u6c42\u6700\u957f\u8def\u3002\n//\u4ee5\u4e0a\u6458\u81ea[\u5dee\u5206\u7ea6\u675f\u7b97\u6cd5\u603b\u7ed3](https://blog.csdn.net/my_sunshine26/article/details/72849441)\n\n# \u4f8b\u5b50\uff1a\n## P2294 [HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/P2294)\n\n\u8fd9\u9898\u5c5e\u4e8e\u5224\u65ad\u662f\u5426\u4f1a\u4ea7\u751f\u8d1f\u73af\u5373\u53ef\n\u5efa\u56fe\uff1a\u8fd9\u91cc\u8981\u6ce8\u610f\u8fde\u56fe\u8981\u8fdes-1\u548ce\uff0c\u56e0\u4e3a\u8fd9\u91cc\u662f\u533a\u95f4\u503c\n\u6211\u4eec\u4f7f\u7528visited[]\u6765\u8868\u793a\u6bcf\u4e2a\u70b9\u5230\u8fbe\u7684\u6b21\u6570\uff0c\u5982\u679c\u5230\u8fbe\u4e86N\u6b21\u6216\u4ee5\u4e0a\uff0c\u5c31\u4e00\u5b9a\u6709\u8d1f\u73af\uff0c\u4e5f\u5c31\u662f\u77db\u76fe\u8fb9\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct{\n    int nxt,mark,v;\n}pre[2010];\nint n,m,cnt;\nbool used[110];\nint dis[110];\nint head[110];\nint in[110];\nint visited[110];\nint t;\nvoid add (int x,int y,int v,int w)\n{\n\tpre[w].mark=head[x];\n\tpre[w].nxt=y;\n\tpre[w].v=v;\n\thead[x]=w;\n}\nbool check ()\n{\n    queue<int>q;\n    for (int i=0;i<=n;i++)\n        if (in[i]==0)\n        {\n            q.push (i);\n            used[i]=1;\n        }\n    while (!q.empty())\n    {\n        int nw=q.front(); \n\t\tvisited[nw]++;\n    \tif (visited[nw]>=n)\n    \t\treturn 0;\n        for (int i=head[nw];i!=0;i=pre[i].mark)\n        {\n            int nx=pre[i].nxt;\n            int l=pre[i].v;\n            if (dis[nx]>dis[nw]+l)\n            {\n                dis[nx]=dis[nw]+l;\n                if (!used[nx])\n                {\n                    q.push(nx);\n                    used[nx]=1;\n                }\n        \t}\n\t\t}\n        used[nw]=0;\n        q.pop();\n    }\n    return 1;\n}\nint main()\n{\n    scanf (\"%d\",&t);\n    while (t--)\n    {\n        memset (in,0,sizeof (in));\n        memset (head,0,sizeof (head));\n        memset (used,0,sizeof (used));\n        memset (dis,0,sizeof (dis));\n        memset (visited,0,sizeof (visited));\n        scanf (\"%d%d\",&n,&m);\n        cnt=0;\n        for (int i=1;i<=m;i++)\n        {\n            int s,e,v;\n            scanf (\"%d%d%d\",&s,&e,&v);\n            add (s-1,e,-v,++cnt);\n            add (e,s-1,v,++cnt);\n        }\n        if (check ())\n            printf (\"true\\n\");\n        else\n            printf (\"false\\n\");\n    }\n}\n```",
        "postTime": 1523692388,
        "uid": 24024,
        "name": "Paul\u00b7Shi",
        "ccfLevel": 0,
        "title": "\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf"
    },
    {
        "content": "\u672c\u849f\u84bb\u7684\u795e\u5947\u6253\u53d1\u2014\u2014\u533a\u95f4DP\uff08\u5361\u65f6\u95f4\u7684\u4ee3\u7801\uff0c\u5927\u4f6c\u522b\u5410\u69fd\uff09\n\n\u6bd5\u7adf\u533a\u95f4DP\u6253\u6cd5\u7b80\u5355\uff0c\u7406\u89e3\u8d77\u6765\u4e5f\u5bb9\u6613\uff08\u8fd9\u9898\u4e0d\u662f\u8bb2\u533a\u95f4DP\uff0c\u6240\u4ee5\u4e0d\u61c2\u533a\u95f4DP\u7684\u8bf7\u5148\u53bb\u5237\u9053\u6a21\u677f\uff09\n\n\u4ece\u5c0f\u533a\u95f4\u5230\u5927\u533a\u95f4\u6765\uff0c\u786e\u5b9a\u5927\u533a\u95f4\u7aef\u70b9\uff0c\u7136\u540e\u5faa\u73af\u4e00\u904d\u5224\u65ad\u662f\u5426\u6709\u5df2\u7ecf\u8d4b\u503c\u7684\u53ef\u4ee5\u5408\u5e76\u4e3a\u5927\u533a\u95f4\u7684\u4e24\u4e2a\u5c0f\u533a\u95f4\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8df3\u51fa\uff0c\u7136\u540e\u770b\u770b\u6709\u5927\u533a\u95f4\u662f\u5426\u5df2\u8d4b\u503c\uff0c\u5982\u679c\u6709\u5c31\u5224\u65ad\uff0c\u5426\u5219\u8d4b\u503c\n\n\u590d\u6742\u5ea6\u5927\u81f4\u4e3aO\uff08wmn\uff09\uff08\u7adf\u7136\u8fc7\u4e86\uff0co(*\uffe3\ufe36\uffe3*)o\u54c8\u54c8\u54c8\uff09\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\nusing namespace std;\nint f[101][101];\nint main()\n{\n    int w,n,m,p,s,t,v;\n    cin>>w;\n    for(int i=1;i<=w;i++)\n    {\n        memset(f,0,sizeof(f));\n        scanf(\"%d%d\",&n,&m);\n        for(int j=1;j<=m;j++)\n        {\n            scanf(\"%d%d%d\",&s,&t,&v);\n            f[s][t]=v;\n        }\n        p=1;\n        for(int j=2;j<=n;j++)\n        if(p)\t\t\t\t//\u52a0\u901f\n        for(int k=j-1;k>=1;k--)\n        if(p) \t\t\t\t//\u518d\u52a0\u901f\n        for(int l=k;l<j;l++)\t//\u7b80\u5355\u7684\u4e09\u4e2a\u5faa\u73af\n        if(f[k][l]&&f[l+1][j])\t//\u662f\u5426\u6709\u5df2\u7ecf\u8d4b\u503c\u7684\u53ef\u4ee5\u5408\u5e76\u4e3a\u5927\u533a\u95f4\u7684\u4e24\u4e2a\u5c0f\u533a\u95f4\n        {\n            if(f[k][j])\n            {\n                if(f[k][j]!=f[k][l]+f[l+1][j])\n                {\n                    p=0;\n                    break;\n                }\n            }\n            else\n            f[k][j]=f[k][l]+f[l+1][j];\n        }\n        if(p==0)\n        cout<<\"false\"<<endl; \n        if(p==1)\n        cout<<\"true\"<<endl;\n    }\n    return 0;\n}\n```",
        "postTime": 1523535193,
        "uid": 38031,
        "name": "\u661f\u7075\u738b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd\u4e0d\u4e00\u6837\u7684\u601d\u8def\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8bfb\u5165\u7684\u533a\u95f4\u548c\u6765\u7b97\u51fa\u4e00\u4e9b\u533a\u95f4\u7684\u548c\u3002\u5982\u679c\u8ddf\u5df2\u77e5\u51b2\u7a81\uff0c\u90a3\u4e48\u8f93\u51fa `false`\uff0c\u5426\u5219\u8f93\u51fa `true`\u3002\n\n\u8003\u8651\u5982\u4f55\u6765\u7b97\u51fa\u533a\u95f4\u548c\u3002\n\n\u6bcf\u6b21\u6211\u4eec\u8bfb\u5165\u7684\u533a\u95f4 $[l,r]$ \u4f1a\u628a\u533a\u95f4 $[1,n]$ \u5206\u6210 $3$ \u4e2a\u533a\u95f4\uff1a$[1,l)$\uff0c$[l,r]$ \u4ee5\u53ca $(r,n] $\u3002\n\n\u6211\u4eec\u4ee4 $s_{i,j}$ \u4e3a\u533a\u95f4 $[i,j]$ \u7684\u548c\uff0c\u90a3\u4e48\u7528\u5faa\u73af $i$ \u904d\u5386\u8fd9\u4e09\u4e2a\u533a\u95f4\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- $i$ \u5728 $[1,l)$ \u4e2d\uff1a\n\n    \u82e5 $s_{i,r}$\uff0c$s_{i,l-1}$ \u90fd\u5df2\u77e5\uff0c\u5219\u68c0\u67e5 $s_{i,l-1}+s_{l,r}$ \u662f\u5426\u7b49\u4e8e $s_{i,r}$\uff0c\u5982\u679c\u4e0d\u662f\u5219\u8fd4\u56de `false`\uff1b\n    \n    \u82e5 $s_{i,r}$ \u672a\u77e5\uff0c$s_{i,l-1}$ \u5df2\u77e5\uff0c\u5219 $s_{i,r}=s_{i,l-1}+s_{l,r}$\uff1b\n    \n    \u82e5 $s_{i,r}$ \u5df2\u77e5\uff0c$s_{i,l-1}$ \u672a\u77e5\uff0c\u5219 $s_{i,l-1}=s_{i,r}-s_{l,r}$\u3002\n    \n- $i$ \u5728 $[l,r]$ \u4e2d\uff1a\n    \n    \u82e5 $s_{l,i}$\uff0c$s_{i+1,r}$ \u90fd\u5df2\u77e5\uff0c\u5219\u68c0\u67e5 $s_{l,i}+s_{i+1,r}$ \u662f\u5426\u7b49\u4e8e $s_{l,r}$\uff0c\u5982\u679c\u4e0d\u662f\u5219\u8fd4\u56de `false`\uff1b\n    \n    \u82e5 $s_{l,i}$ \u672a\u77e5\uff0c$s_{i+1,r}$ \u5df2\u77e5\uff0c\u5219 $s_{l,i}=s_{l,r}-s_{i+1,r}$\uff1b\n    \n    \u82e5 $s_{l,i}$ \u5df2\u77e5\uff0c$s_{i+1,r}$ \u672a\u77e5\uff0c\u5219 $s_{i+1,r}=s_{l,r}-s_{l,i}$\u3002\n    \n- $i$ \u5728 $(r,n]$ \u4e2d\uff1a\n\n    \u82e5 $s_{r+1,i}$\uff0c$s_{l,i}$ \u90fd\u5df2\u77e5\uff0c\u5219\u68c0\u67e5 $s_{l,r}+s_{r+1,i}$ \u662f\u5426\u7b49\u4e8e $s_{l,i}$\uff0c\u5982\u679c\u4e0d\u662f\u5219\u8fd4\u56de `false`\uff1b\n    \n    \u82e5 $s_{r+1,i}$ \u672a\u77e5\uff0c$s_{l,i}$ \u5df2\u77e5\uff0c\u5219 $s_{r+1,i}=s_{l,i}-s_{l,r}$\uff1b\n    \n    \u82e5 $s_{r+1,i}$ \u5df2\u77e5\uff0c$s_{l,i}$ \u672a\u77e5\uff0c\u5219 $s_{l,i}=s_{l,r}+s_{r+1,i}$\u3002\n    \n\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd9\u6837\u5224\u65ad\u51fa\u6765\u4e86\u3002\n\n# \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint t,n,m,s[101][101];\nint main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0),cout.tie(0);\n\tcin>>t;\n\twhile(t--){\n\t\tmemset(s,0x7f,sizeof s);\n\t\tcin>>n>>m;\n\t\tbool ok=1;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tint l,r,v;\n\t\t\tcin>>l>>r>>v;\n\t\t\ts[l][r]=v;\n         //\u4e00\u6bb5\u533a\u95f4=0x7f7f7f7f\u4ee3\u8868\u8fd9\u6bb5\u533a\u95f4\u672a\u77e5\n\t\t\tfor(int j=r+1;j<=n;j++){//\u60c5\u51b53\n\t\t\t\tif(s[r+1][j]!=0x7f7f7f7f&&s[l][j]!=0x7f7f7f7f){\n\t\t\t\t\tif(s[l][r]+s[r+1][j]!=s[l][j]){\n\t\t\t\t\t\tok=0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(s[r+1][j]==0x7f7f7f7f&&s[l][j]!=0x7f7f7f7f){\n\t\t\t\t\ts[r+1][j]=s[l][j]-s[l][r];\n\t\t\t\t}\n\t\t\t\tif(s[r+1][j]!=0x7f7f7f7f&&s[l][j]==0x7f7f7f7f){\n\t\t\t\t\ts[l][j]=s[l][r]+s[r+1][j];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int j=l-1;j>=1;j--){//\u60c5\u51b51\n\t\t\t\tif(s[j][l-1]!=0x7f7f7f7f&&s[j][r]!=0x7f7f7f7f){\n\t\t\t\t\tif(s[l][r]+s[j][l-1]!=s[j][r]){\n\t\t\t\t\t\tok=0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(s[j][l-1]==0x7f7f7f7f&&s[j][r]!=0x7f7f7f7f){\n\t\t\t\t\ts[j][l-1]=s[j][r]-s[l][r];\n\t\t\t\t}\n\t\t\t\tif(s[j][l-1]!=0x7f7f7f7f&&s[j][r]==0x7f7f7f7f){\n\t\t\t\t\ts[j][r]=s[l][r]+s[j][l-1];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int j=r;j>=l;j--){//\u60c5\u51b52\n\t\t\t\tif(s[l][j]!=0x7f7f7f7f&&s[j+1][r]!=0x7f7f7f7f){\n\t\t\t\t\tif(s[l][j]+s[j+1][r]!=s[l][r]){\n\t\t\t\t\t\tok=0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(s[l][j]==0x7f7f7f7f&&s[j+1][r]!=0x7f7f7f7f){\n\t\t\t\t\ts[l][j]=s[l][r]-s[j+1][r];\n\t\t\t\t}\n\t\t\t\tif(s[l][j]!=0x7f7f7f7f&&s[j+1][r]==0x7f7f7f7f){\n\t\t\t\t\ts[j+1][r]=s[l][r]-s[l][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(ok) cout<<\"true\"<<endl;\n\t\telse cout<<\"false\"<<endl;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1677375840,
        "uid": 464732,
        "name": "luqyou",
        "ccfLevel": 5,
        "title": "solution-P2294"
    },
    {
        "content": "   \u5dee\u5206\u7ea6\u675f\u3002\n   \n   \u6211\u4eec\u601d\u8003\u672c\u9898\u7684\u5dee\u5206\u7ea6\u675f\uff0cd[y]-d[x-1]=val\u6211\u4eec\u9700\u8981\u6ee1\u8db3\u4e24\u4e2a\u5f0f\u5b50\u53ca  \n ```cpp\nd[y]-d[x-1]>=val;   d[y]-d[x-1]<=val;        \n                 \n```\n   \u540c\u65f6\u6ee1\u8db3\u8fd9\u4e24\u4e2a\u6761\u4ef6\uff0c\n   \n ```cpp\nd[y]-d[x-1]<=val;   d[y]<=d[x-1]+val;\u6240\u4ee5\u6211\u4eec\u5728\u627ed[y]\u65f6\uff0c\u56e0\u4e3a\u5c0f\u4e8e\n\n\u7b49\u4e8e\u6240\u4ee5\u8dd1\u6700\u77ed\u8def\u3002(x-1\u5230y\u8fde\u4e00\u6761val\u7684\u8fb9)\n\nd[y]-d[x-1]>=val;   d[x-1]-d[y]<=-val;d[x-1]<=d[y]-val;\uff08y\u5230x-1\u8fde\n\n\u4e00\u6761-val\u7684\u8fb9\u3002\uff09\n\n\n```\n   \u6211\u4eec\u8981\u5f00\u4e00\u4e2a\u6e90\u70b9\uff0cn+1\u505a\u6e90\u70b9\u3002\u7136\u540e\u548c\uff080\u2014\u2014n)\u90fd\u8fde\u8fb9\u6743\u503c\u4e3a0\u3002\n   \n   \u5c0ftip\n   \n   \u6211\u4eec\u5728\u5224\u73af\u65f6\u7528\u4e00\u4e2a\u6570\u7ec4\u5b58\u5b83\u662f\u7b2c\u51e0\u6b21\u66f4\u65b0\u53ca\n```cpp\ncnt[y]=cnt[x]+1;\u5f53cnt[y]>n\u65f6break\u5c31\u884c\u4e86\u3002\n```\n   \u6700\u540e\u518d\u8dd1\u4e00\u904dspfa\u5373\u53ef\u3002\n   \n   \u4ee3\u7801\u5982\u4e0b\n   \n   ```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<queue>\n#include<algorithm>\n#include<cmath>\n#define ll long long\nusing namespace std;\nconst int maxn=101000;\nint ver[maxn*2],head[maxn],nxt[maxn*2],edge[maxn*2],tot,T,n,m;\nint x,y,z,d[maxn],cnt[maxn],flag;\nbool v[maxn];\ninline void add(int x,int y,int z){ver[++tot]=y;nxt[tot]=head[x];edge[tot]=z;head[x]=tot;}\ninline bool spfa(int s){\n\tqueue<int> q;\n\tmemset(d,0x3f,sizeof(d));\n\tmemset(cnt,0,sizeof(cnt));\n\tmemset(v,0,sizeof(v));\n\td[s]=0,v[s]=1;q.push(s);\n\twhile(q.size()){\n\t\tint x=q.front();q.pop();v[x]=0;\n\t\tfor(int i=head[x];i;i=nxt[i]){\n\t\t\tint y=ver[i],z=edge[i];\n\t\t\tif(d[y]>d[x]+z){\n\t\t\t\td[y]=d[x]+z;cnt[y]=cnt[x]+1;if(cnt[y]>n){return 0;}\n\t\t\t\tif(!v[y]){q.push(y),v[y]=1;}\n\t\t\t}\n\t\t}\n\t}\n\treturn 1;\n}\nint main(){\n\tcin>>T;while(T--){\n\t\tscanf(\"%d%d\",&n,&m);tot=0;\n\t\tmemset(head,0,sizeof(head));memset(nxt,0,sizeof(nxt));\n\t\tfor(int i=1;i<=m;i++){scanf(\"%d%d%d\",&x,&y,&z);add(x-1,y,z);add(y,x-1,-z);}\n\t\tfor(int i=0;i<=n;i++){add(n+1,i,0);}\n\t\tif(spfa(n+1))printf(\"true\\n\");\n\t\telse printf(\"false\\n\");\n\t}\n\treturn 0;\n}\n```\n\n\n\n\n",
        "postTime": 1571046899,
        "uid": 176349,
        "name": "\u5929\u5b87\u88e8\u76ca",
        "ccfLevel": 0,
        "title": "P2294 [HNOI2005]\u72e1\u733e\u7684\u5546\u4eba"
    },
    {
        "content": "\u975e\u5e38\u88f8\u7684\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\uff0c\u867d\u7136\u597d\u50cf\u770b\u5230\u6709\u5e76\u67e5\u96c6\u505a\u6cd5\u2026\u2026\n\n\n\u603b\u4e4b\u8d26\u672c\u662f\u5f88\u660e\u786e\u7684\uff0c\u5373v<=s[t]-s[s-1]<=v\uff0ct\u5411s-1\u8fde-v\u8fb9\uff0cs-1\u5411t\u8fdev\u8fb9\u3002\n\nSPFA\u5224\u65ad\u8d1f\u73af\uff0c\u6709\u8d1f\u73af\u8bf4\u660e\u4e0d\u7b49\u5f0f\u77db\u76fe\uff0c\u8d26\u672c\u5c31\u662f\u5047\u7684\u3002\n\nSPFA\u6700\u597d\u7528DFS\uff0c\u4e0d\u7136\u4f60\u4eec\u53ef\u4ee5\u770b\u770bP1993\uff0c\u9632\u6b62TLE\u3002\n\n\n\u4e0d\u8981\u5fd8\u4e86\u591a\u7ec4\u6570\u636e\uff0c\u6e05\u96f6\u3002\n\n\n\n\n\n\n\n\n\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\n#define MAXN 500\n#define MAXM 4000\n#define MEMINF 0x3f\nstruct Edge\n{\n    int to,nex,w;\n    Edge(){}\n    Edge(int _to, int _nex, int _w):to(_to),nex(_nex),w(_w){} \n};\nEdge e[MAXM+5];\nint first[MAXN+5], dis[MAXN+5], tot, n, m, t, S; \nbool book[MAXN+5];\ninline void Add(int a, int b, int c)\n{\n    e[tot] = Edge(b,first[a],c);\n    first[a] = tot++;\n    return; \n}\nbool SPFA(int p)\n{\n    book[p] = true;\n    for(int u = first[p]; u+1; u = e[u].nex)\n        if(dis[e[u].to] > dis[p] + e[u].w)\n        {\n            dis[e[u].to] = dis[p] + e[u].w;\n            if(book[e[u].to] || !SPFA(e[u].to))\n                return false;\n        }\n    book[p] = false;\n    return true;\n}\ninline void Init()\n{\n    scanf(\"%d%d\",&n,&m);\n    memset(first,-1,sizeof(first));\n    memset(dis,MEMINF,sizeof(dis));\n    memset(book,false,sizeof(book));\n    S = 0, dis[S] = 0, tot = 0;\n    for(int s, t, v; m--; )\n        scanf(\"%d%d%d\",&s,&t,&v), Add(t,s-1,-v), Add(s-1,t,v);\n    return;\n}\nint main()\n{\n    for(scanf(\"%d\",&t); t--; puts(SPFA(S) ? \"true\" : \"false\"))\n        Init();\n     return 0;\n}\n```",
        "postTime": 1485162141,
        "uid": 16528,
        "name": "magolor",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "## \u524d\u8a00\n\u5dee\u5206\u7ea6\u675f\uff1a\u901a\u8fc7\u5efa\u56fe\u6765\u5224\u65ad\u4e00\u7ec4\uff08\u6216\u591a\u7ec4\uff09\u5f0f\u5b50\u662f\u5426\u53ef\u4ee5\u540c\u65f6\u6210\u7acb\n    \n   \u5c3d\u7ba1\u5728NOIP\u4e2d\u5e76\u4e0d\u662f\u7ecf\u5e38\u8003\u5230\uff0c\u4f46\u6211\u89c9\u5f97\u5b83\u5efa\u56fe\u7684\u601d\u60f3\u5f88\u91cd\u8981\uff0c\u503c\u5f97\u5b66\u4e60\n    \n\n------------\n\n# \u5dee\u5206\u7ea6\u675f\n\n   ## \u5173\u4e8e\u5efa\u56fe\n   \u5982\u679c\u9898\u4e2d\u6709\u4e00\u4e9b\u53d8\u91cf\u5173\u7cfb\u663e\u7136\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u5efa\u56fe\n   \n   \u4f46\u5982\u679c\u5173\u7cfb\u4e0d\u660e\u4e86\uff0c\u5c31\u9700\u8981\u81ea\u5df1\u52a8\u7b14\u7406\u4e00\u7406\uff08\u6ce8\u610f\u8868\u8fbe\u5f0f\u7684\u6392\u5217\uff0c\u8fd9\u6837\u6709\u52a9\u4e8e\u627e\u5230\u89c4\u5f8b\uff09\uff0c\u6ce8\u91cd**\u524d\u7f00\u548c**\uff0c**\u5dee\u5206**\n   \n   ### \u5173\u4e8e\u5efa\u56fe\u7684\u57fa\u672c\u89c4\u5f8b\n   \n   1.\u5982x=y\uff0c\u5219add(x,y,0), add(y,x,0)\n   \n   2.\u5982x>y\uff0c\u5219add(y,x,1)\n   \n   3.\u5982x\u2264y\uff0c\u5219add(x,y,0)\n   \n   4.\u5982x<y\uff0c\u5219add(u,v,1)\n   \n   5.\u5982x\u2265y\uff0c\u5219add(v,u,0)\n   \n   (\u5176\u4e2d\u8fb9\u6743\u6839\u636e\u9898\u76ee\u800c\u5b9a)\n   \n   add:\n   ```cpp\ninline void add(int id,int to,int dis){//\u524d\u5411\u5fc3\u5b58\u56fe\n\tcnt++;\n\te[cnt].next=head[id];\n\te[cnt].to=to;\n\te[cnt].dis=dis;\n\thead[id]=cnt;\n}\n```\n## \u5173\u4e8e\u8dd1\u56fe\n### \u5982\u4f55\u5224\u5b9a\u662f\u5426\u6709\u89e3\n\u6ce8\u610f\uff0c**\u5982\u679c\u56fe\u4e2d\u6709\u73af\uff0c\u5219\u5fc5\u5b9a\u65e0\u89e3\uff01**\n\n\u4e3a\u4ec0\u4e48\uff1f\u5982\u679c\u6709\u73af\uff0c\u5219\u8bf4\u660e\u4e00\u5b9a\u6709x>y\u4e14y>x,\u8fd9\u663e\u7136\u77db\u76fe\uff0c\u4e8e\u662f\u65e0\u89e3\n\n\u5177\u4f53\u5224\u73af\u8fc7\u7a0b\u8bf7\u53c2\u89c1[\u5224\u73af](https://wwlw.blog.luogu.org/guan-yu-pan-huan)\n\n### \u662f\u8dd1\u6700\u957f\u8def\u8fd8\u662f\u6700\u77ed\u8def\n\n\u8fd9\u5c31\u8981\u6839\u636e\u81ea\u5df1\u52a0\u7684\u8fb9\u6743\u7684\u6b63\u8d1f\u4e86\n\n\u6839\u636e\u4e0a\u9762\u4f5c\u8005\u7ed9\u51fa\u7684\u52a0\u8fb9\u89c4\u5219\u5e94\u8be5\u8dd1\u6700\u957f\u8def\n\n\u5f53\u7136\u4e5f\u53ef\u4ee5\u628a\u6240\u6709\u8fb9\u7684\u8fb9\u6743\u53d6\u53cd\uff0c\u6539\u6210\u6700\u77ed\u8def\n\n------------\n\n\u9644\u4e0a\u51e0\u9053\u5165\u95e8\u96be\u5ea6\u7684\u9898\uff1a\n\n[\u5c0fK\u7684\u519c\u573a](https://www.luogu.org/problemnew/show/P1993)\n\n[\u7cd6\u679c](https://www.luogu.org/problemnew/show/P3275)\n\n[\u72e1\u733e\u7684\u5546\u4eba](https://www.luogu.org/problemnew/show/P2294)\n\n\u72e1\u733e\u7684\u5546\u4eba\uff08\u6700\u4e3a\u7b80\u5355\u7684\u4e00\u9053\uff09\u7684AC\u4ee3\u7801\uff0c**\u5207\u52ff\u6284\u88ad\uff01\uff01\uff01**\n\n```cpp\n#include<stdio.h>\n#define N 1007\n#define INF 0x3f3f3f3f\n\nstruct E{\n\tint next,to,dis;\n}e[2*N];\nint T,n,a,head[N],in[N],Q[10*N],cnt=0,dis[N],m;\nbool vis[N];\ninline void add(int id,int to,int dis){//\u5b58\u56fe \n\tcnt++;\n\te[cnt].next=head[id];\n\te[cnt].to=to;\n\te[cnt].dis=dis;\n\thead[id]=cnt;\n}\ninline bool SPFA(int s){//\u5224\u73af\u5e76\u8dd1\u6700\u957f\u8def \n\tfor(int i=0;i<=n;i++) dis[i]=INF,vis[i]=false;//\u521d\u59cb\u5316 \n\tint tou=0,wei=0;\n\tdis[s]=0;\n\tQ[++wei]=s;\n\tin[s]++;\n\tvis[s]=true;\n\twhile(tou<=wei){\n\t\tint u=Q[++tou];\n\t\tvis[u]=false;\n\t\tfor(int i=head[u];i;i=e[i].next){\n\t\t\tint v=e[i].to;\n\t\t\tif(dis[v]>dis[u]+e[i].dis){\n\t\t\t\tdis[v]=dis[u]+e[i].dis;\n\t\t\t\tin[v]++;//\u7edf\u8ba1\u8bbf\u95ee\u6b21\u6570 \n\t\t\t\tif(in[v]>n+1) return true;//\u6807\u51c6\u7684bfs-SPFA\u5224\u73af \n\t\t\t\tif(!vis[v]){\n\t\t\t\t\tvis[v]=true;\n\t\t\t\t\tQ[++wei]=v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\nint main(){\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tcnt=0;\n\t\tfor(int i=0;i<=n;i++) head[i]=in[i]=0;\n\t\tfor(int i=1;i<=m;i++){//\u5efa\u56fe \n\t\t\tint x,y,val;\n\t\t\tscanf(\"%d%d%d\",&x,&y,&val);\n\t\t\tadd(y,x-1,val);\n\t\t\tadd(x-1,y,-val);\n\t\t}\n\t\tbool flag=false;\n\t\tfor(int i=0;i<=n;i++)//\u8bbf\u95ee\u6574\u4e2a\u56fe,\u6ce8\u610f\u56fe\u4e0d\u4e00\u5b9a\u662f\u8054\u901a\u7684 \n\t\t\tif(!in[i]){\n\t\t\t\tflag=SPFA(i);\n\t\t\t\tif(flag) break;\n\t\t\t}\n\t\tif(!flag) printf(\"true\\n\");\n\t\telse printf(\"false\\n\");\n\t}\n}\n```",
        "postTime": 1549075362,
        "uid": 83337,
        "name": "wwlw",
        "ccfLevel": 7,
        "title": "\u5dee\u5206\u7ea6\u675f"
    },
    {
        "content": "emm...\u6211\u6765\u52a0\u4e2a\u5e76\u67e5\u96c6\u7684\u65b0\u9898\u89e3\u5427\u3002\u3002\u5927\u6982\u5c31\u662f\u5f3a\u884c\u6743\u503c\u5e76\u67e5\u96c6\u4e00\u6ce2\uff0c\uff0c\u7136\u540e\u5728\u4e00\u4e2a\u96c6\u5185\u7684\u8bdd\u5224\u4e00\u4e0b\u662f\u5426\u5408\u6cd5\u5c31\u53ef\u4ee5\u4e86\n\n\u4ee3\u7801\u91cf\u6781\u77ed\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint t,n,m,f[1000],ff[1000],x,y,z,xx,yy;\nbool flag;\nint fa(int x){\n    if (f[x]==x)return x;\n    int k=f[x],kk=fa(f[x]);ff[x]+=ff[k];//\u52a0\u4e0a\u7236\u8282\u70b9\u7684\u6743\u503c\u7136\u540e\u8fde\u63a5\u5230father\n    f[x]=kk;return kk;//\u8def\u5f84\u538b\u7f29\n}\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin>>t;while (t--){\n        cin>>n>>m;flag=true;\n        for (int i=0;i<=n;i++)f[i]=i,ff[i]=0;\n        for (int i=1;i<=m;i++){\n            cin>>x>>y>>z;x--;xx=fa(x);yy=fa(y);//\u8003\u8651\u524d\u7f00\u548c\u6570\u7ec4\uff0cx\u5230y\u7684\u548c\u81ea\u7136\u662fa[y]-a[x-1]\uff0c\u6240\u4ee5x\u8981--\n            if (xx!=yy){\n                f[yy]=xx;ff[yy]=ff[x]+z-ff[y];//\u8fde\u8fb9\n            }else flag&=ff[x]+z==ff[y];//\u5224\u65ad\u662f\u5426\u5408\u6cd5\n        }if (flag)cout<<\"true\"<<endl;else cout<<\"false\"<<endl;\n    }\n}\n```",
        "postTime": 1505894775,
        "uid": 44165,
        "name": "Starria\u7684\u8111\u6b8b\u7c89",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u9898\u89e3by:redbag\n\n\u5927\u6982\u601d\u8def\u540c\u697c\u4e0b\n\n\u7136\u800cdfs\u7684spfa\u8dd1\u5f97\u4f3c\u4e4e\u5feb\u4e9b\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cmath>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint T;\nint n,m;\nstruct node\n{\n    int u,v,w,id;\n} a[2010];\nint d;\nint p[200];\nint flag[200];\nint dis[200];\nint flag2;\nint dfs(int x)\n{\n    flag[x]=1;//\u6807\u8bb0\u5728\u91cc\u9762 \n    for (int i=p[x];i!=-1;i=a[i].id)\n    {\n        int y=a[i].v;\n        if (dis[x]+a[i].w<dis[y])//\u53ef\u4ee5\u8fdb\u884c\u677e\u5f1b\u64cd\u4f5c \n        {\n            if (flag[y]==1)//\u5982\u679c\u5728\u91cc\u9762\u5c31\u8bf4\u660e\u51fa\u73b0\u8d1f\u73af\u4e86 \n            {\n                flag2=1;\n                return 0;\n            } else\n            {//\u8fdb\u884c\u677e\u5f1b\u64cd\u4f5c\u7136\u540e\u7ee7\u7eed\u641c \n                dis[y]=dis[x]+a[i].w;\n                dfs(y);\n            }\n        }\n    }\n    flag[x]=0;\n    return 0;\n}\nint main()\n{\n    int x,y,z;\n    scanf(\"%d\",&T);\n    while (T--)\n    {\n        flag2=0;\n        memset(p,-1,sizeof(p));\n        memset(flag,0,sizeof(flag));\n        memset(dis,0,sizeof(dis));//\u56e0\u4e3a\u662f\u627e\u8d1f\u73af\uff0c\u6240\u4ee5\u6e05\u62100\u6ca1\u4e8b \n        scanf(\"%d%d\",&n,&m);\n        d=0;//\u5f00\u59cb\u6ca1\u6e050 QAQ \n        for (int i=1;i<=m;i++)\n        {\n            //\u5efa\u53cc\u5411\u8fb9\uff0c\u6743\u503c\u4e00\u6b63\u4e00\u8d1f \n            scanf(\"%d%d%d\",&x,&y,&z);\n            d++;\n            a[d].u=x-1;\n            a[d].v=y;\n            a[d].w=z;\n            a[d].id=p[a[d].u];\n            p[a[d].u]=d;\n            \n            d++;\n            a[d].u=y;\n            a[d].v=x-1;\n            a[d].w=-z;\n            a[d].id=p[a[d].u];\n            p[a[d].u]=d;\n        }\n        for (int i=0;i<=n;i++)\n        {\n            dfs(i);//\u4e00\u4e2a\u70b9\u4e00\u4e2a\u70b9\u7684\u8dd1dfs\u7684spfa\u627e\u8d1f\u73af \n            if (flag2==1) break;\n        }\n        if (flag2==1) printf(\"false\\n\");\n        else printf(\"true\\n\");\n    }\n    return 0;\n}\n\n```",
        "postTime": 1499740187,
        "uid": 2674,
        "name": "\u300cQQ\u7ea2\u5305\u300d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u9898\u76ee\u94fe\u63a5\u2014\u2014> [**P2294 [HNOI2005]\u72e1\u733e\u7684\u5546\u4eba**](https://www.luogu.com.cn/problem/P2294)\n\n\u5199\u5b8c\u770b\u4e86\u4e00\u4e0b\u9898\u89e3\u533a\u53d1\u73b0\u7528\u533a\u95f4DP\u7684\u4e0d\u591a\uff0c\u4e5f\u6709\u4e00\u4e9b\u7f3a\u9677\uff0c\u5728\u6b64\u5c31\u6765\u5b8c\u5584\u4e00\u756a\u3002\n\n\u9898\u76ee\u5927\u81f4\u91ca\u610f\uff1a\u82e5\u65e0\u6cd5\u7ed9\u51fa\u4e00\u7ec4\u6570\u6ee1\u8db3\u7ed9\u51fa\u7684 $m$ \u4e2a\u6761\u4ef6\uff0c\u5219\u8f93\u51fa false \uff0c\u53cd\u4e4b\u5219\u8f93\u51fa true \u3002\n\n\u7ed9\u51fa\u6570\u7ec4 $a[i][j]$\u8868\u793a\u533a\u95f4 $i$ \u5230 $j$ \u7684\u533a\u95f4\u548c\u3002\u521d\u59cb\u503c\u8bbe\u4e3a inf \u3002\n\n\u4e8e\u662f\u6211\u4eec\u7ed9\u51fa\u4e09\u91cd\u5faa\u73af\uff0c\u7b2c\u4e00\u91cd\u679a\u4e3e\u6bcf\u6b21\u533a\u95f4\u957f\u5ea6\uff0c\u7b2c\u4e8c\u91cd\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c \u7b2c\u4e09\u91cd\u679a\u4e3e\u5de6\u53f3\u7aef\u70b9\u4e4b\u95f4\u7684\u4f4d\u7f6e\u3002 $i$ \u8868\u793a\u5de6\u7aef\u70b9\uff0c $j$ \u8868\u793a\u53f3\u7aef\u70b9\uff0c $k$ \u8868\u793a\u533a\u95f4\u957f\u5ea6\uff0c $l$ \u8868\u793a\u5de6\u53f3\u7aef\u70b9\u4e4b\u95f4\u7684\u4f4d\u7f6e\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u4e2d\u77e5\u9053 $a[i][j]=a[i][l]+a[l+1][j]$ \u7684\u9012\u63a8\u5f0f\u3002\u5982\u679c $a[i][j]$ \u4e0e\u5df2\u786e\u5b9a\u7684 $a[i][l] + a[l + 1][j]$ \u4e0d\u540c\uff0c\u5219\u53ef\u76f4\u63a5\u9000\u51fa\u3002\u540c\u65f6\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u5f00\u59cb\u5224\u91cd\uff0c\u82e5\u4e0d\u4e00\u6837\uff0c\u5219\u53ef\u76f4\u63a5\u9000\u51fa\u3002\n\n\u5177\u4f53\u8be6\u89c1\u4ee3\u7801\u2014\u2014>\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#define inf 123456789//\u5b9a\u4e49\n\nusing namespace std;\n\nint w, n, m, a[105][105], p;\n\nint main(){\n\tscanf(\"%d\",&w);\n\twhile(w--){\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tp = 1;\n\t\tfor(int i = 1; i <= n; i++)\n\t\tfor(int j = 1; j <= n; j++) a[i][j] = inf;//\u522b\u5fd8\u4e86\u8d4b\u521d\u503c\u54e6~\n\t\tfor(int i = 1; i <= m; i++){\n\t\t\tint x, y, z;\n\t\t\tscanf(\"%d%d%d\",&x,&y,&z);\n\t\t\tif(a[x][y] == inf || a[x][y] == z)//\u4ece\u8bfb\u5165\u5f00\u59cb\u5224\u65ad\n\t\t\ta[x][y] = z;\n\t\t\telse p = 0;\n\t\t}\n\t\tif(p)\n\t\tfor(int k = 1; k <= n; k++){\n\t\t\tfor(int i = 1; i + k <= n; i++){\n\t\t\t\tint j = k + i;\n\t\t\t\tfor(int l = i; l < j; l++){//DP\u4e3b\u4f53\n\t\t\t\t\tif(a[i][l] != inf && a[l + 1][j] != inf){//\u82e5\u5df2\u786e\u5b9a\u4e24\u4e2a\u5b50\u533a\u95f4\n\t\t\t\t\t\tif(a[i][j] == inf) a[i][j] = a[i][l] + a[l + 1][j];//\u672a\u6709\u5219\u8d4b\u503c\uff0c\u5df2\u6709\u5219\u6bd4\u8f83\n\t\t\t\t\t\telse if(a[i][j] != a[i][l] + a[l + 1][j]){\n\t\t\t\t\t\t\tp = 0;\n\t\t\t\t\t\t\tgoto there;//\u82e5\u4e0d\u540c\uff0c\u76f4\u63a5\u9000\u51fa\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthere:;\n\t\tif(p) printf(\"true\\n\");\n\t\telse printf(\"false\\n\");\n\t}\n\treturn 0;\n} \n```\n\u89c2\u5bdf\u5230$n < 100$\uff0c$ w < 100$\uff0c \u8db3\u591f\u6211\u4eec\u8dd1\u4e86\u3002\u4e0d\u5438\u6c27333ms\u8db3\u4ee5\u6ee1\u8db3\u9700\u6c42\u3002\n\n\n\u6492\u82b1\u5b8c\u7ed3\u2570( \u00b4\u30fb\u03c9\u30fb)\u3064\u2500\u2500\u2606\u273f\u273f\u273f",
        "postTime": 1585202967,
        "uid": 209604,
        "name": "pikabi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u5176\u5b9e\u8fd9\u9053\u9898\u53ef\u4ee5\u5c06\u8d26\u672c\u770b\u4f5c\u4e00\u5f20\u56fe\n\n\u5bf9\u4e8eu\u6708\u4efd\u5230v\u6708\u4efd\u8d5a\u4e86w\u5143\n\n\u53ef\u4ee5\u8ba4\u4e3a\u662fu\u70b9\u5230v+1\u70b9\u7684\u8fb9\u6743\u503c\u4e3aw\n\n\u65e2\u7136\u5982\u6b64\n\n\u90a3\u5982\u679c\u4ecev\u6708\u4efd\u56de\u5230u\u6708\u4efd\n\n\u94b1\u4e5f\u4f1a\u76f8\u5e94\u7684\u51cf\u5c11w\u5143\n\n\u4e5f\u5c31\u662f\u8bf4v+1\u70b9\u5230u\u70b9\u7684\u8fb9\u6743\u503c\u4e3a-w\n\n\u7531\u6b64\u53ef\u4ee5\u83b7\u5f97\u4e00\u5f20\u56fe\n\n\u6837\u4f8b\u7684\u7b2c\u4e00\u4e2a\u8d26\u672c\u6240\u6784\u6210\u7684\u56fe\u5982\u4e0b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/59197.png)\n\n\u7136\u540e\u4ee5\u6700\u5c0f\u7684\u70b9s\u70b9\u4e3a\u5f00\u59cb\u70b9\n\n\u521b\u5efadis\u503c\n\ndis[i+1]\u4e5f\u5c31\u662fs\u6708\u4efd\u5230i\u6708\u4efd\u6240\u8d5a\u7684\u94b1\u6570\n\n\u7531\u6837\u4f8b\u53ef\u77e5:\n\ndis[1]=0\n\ndis[3]=10\n\ndis[4]=-5\n\n\u68c0\u67e5\u540e\u672a\u53d1\u73b0\u77db\u76fe \n\n\u6240\u4ee5\u662f\u5bf9\u7684\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\nusing namespace std;\nint w,n,m,s,tot,dis[100005],first[100005];\nbool vis[100005];\nstruct Edge{//\u94fe\u8868 \n\tint nxt,to,val;\n}e[200005];\n\nvoid init(){//\u521d\u59cb\u5316 \n\ttot=0;s=1<<30;\n\tdis[1]=0;\n\tmemset(vis,0,sizeof(vis));\n\tmemset(dis,127,sizeof(dis));\n\tmemset(first,0,sizeof(first));\n}\n\nvoid add(int x,int y,int z){\n\ttot++;\n\te[tot].nxt=first[x];\n\tfirst[x]=tot;\n\te[tot].to=y;\n\te[tot].val=z;\n}\n\nvoid build(int u){//\u521b\u5efa \n\tvis[u]=1;\n\tfor(int i=first[u];i;i=e[i].nxt){\n\t\tint v=e[i].to,w=e[i].val;\n\t\tif(!vis[v]){\n\t\t\tdis[v]=dis[u]+w;\n\t\t\tbuild(v);\n\t\t}\n\t}\n}\n\nbool check(){//\u68c0\u67e5\u662f\u5426\u6709\u77db\u76fe \n\tfor(int i=1;i<=n+1;i++){\n\t\tif(vis[i]==1){\n\t\t\tfor(int j=first[i];j;j=e[j].nxt){\n\t\t\t\tint v=e[j].to,w=e[j].val;\n\t\t\t\tif(dis[v]!=dis[i]+w) return 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn 1;\n}\n\nint main(){\n\tscanf(\"%d\",&w);\n\twhile(w--){\n\t\tinit();\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tint a,b,c;\n\t\t\tscanf(\"%d%d%d\",&a,&b,&c);\n\t\t\ts=min(s,a);\n\t\t\tadd(a,b+1,c);//\u8fde\u7ebf \n\t\t\tadd(b+1,a,-c);//\u518d\u53cd\u8fc7\u6765\u8fde \n\t\t}\n\t\tbuild(s);//\u5148\u4ee5\u4e00\u4e2a\u70b9\u4e3a\u57fa\u7840\uff0c\u5f97\u5230\u5176\u4ed6\u70b9\u7684\u8ddd\u79bb \n\t\tif(check()) printf(\"true\\n\");\n\t\telse printf(\"false\\n\");\n\t}\n}\n```\n",
        "postTime": 1558450100,
        "uid": 116015,
        "name": "bellmanford",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u601d\u8def\u548c\u4e0b\u9762\u7684\u5927\u795e\u5dee\u4e0d\u591a\uff0c\u4f46\u662f\u7528\u4e86\u6bd4\u8f83\u559c\u6b22\u7528 STL \uff08\u5176\u5b9e\u5c31\u662f\u559c\u6b22\u7528 vector \u6765\u5b9e\u73b0\u90bb\u63a5\u8868\uff09\u3002\n\n\u9996\u5148\u7528\u4e00\u4e0b\u524d\u7f00\u548c\u7684\u601d\u60f3\uff1a\u8bbe \\\\(s\\_i\\\\) \u4e3a\u524d i \u4e2a\u6708\u7684\u603b\u6536\u5165\n\n\n\u5219\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u8bfb\u5165\u7684\u6570\u636e \\\\( (u, v, w) \\\\) \u53ef\u4ee5\u5f97\u5230 \\\\(s\\_v - s\\_{u-1} = w\\\\) \uff0c\u5373 \\\\( s\\_v - s\\_{u-1} \\ge w \\\\) && \\\\( s\\_v - s\\_{u-1} \\le w \\\\) \uff0c\u90a3\u4e48\u8fd9\u5c31\u662f\u6211\u4eec\u719f\u6089\u7684\u5dee\u5206\u7ea6\u675f\u7684\u6a21\u677f\u4e86\u3002\n\n\n\u6211\u4eec\u5f15\u4e00\u6761\u4eceu-1 \u5230 v \u7684\u6743\u503c\u4e3a w \u7684\u8fb9\u548c\u4e00\u6761\u4ece v \u5230 u-1 \u7684\u6743\u503c\u4e3a -w \u7684\u8fb9\u6765\u5b8c\u6210\u5efa\u56fe\uff0c\u7531\u4e8e\u9898\u76ee\u8981\u6c42\u5224\u65ad\u662f\u5426\u9020\u5047\uff0c\u4e5f\u5c31\u662f\u8981\u5224\u65ad\u56fe\u4e2d\u662f\u5426\u6709\u8d1f\u73af\uff0c\u56e0\u6b64\u6211\u4eec\u9009\u62e9\u4f7f\u7528 DFS \u7248\u672c\u7684 SPFA \u3002\n\n\n```cpp\n#include <cstdio>\n#include <vector>\nusing namespace std;\n\nconst int maxn = 105;\nconst int maxm = 1005;\n\nstruct node{\n    int to, val;\n};\nvector<node> e[maxn];\nint t, n, m, dis[maxn];\nbool vis[maxn], flag;\n\nvoid SPFA(int x){ \\\\\u5176\u5b9e\u5c31\u662f DFS\n    vis[x] = 1;\n    for(int i = 0; i < e[x].size(); i++){\n        node v = e[x][i];\n        if(dis[v.to] > dis[x] + v.val){\n            if(vis[v.to]){flag = 1; return;}\n            dis[v.to] = dis[x] + v.val;\n            SPFA(v.to);\n        }\n    }\n    vis[x] = 0;\n    return;\n}\nint main(){\n    scanf(\"%d\", &t);\n    while(t--){\n        scanf(\"%d%d\", &n, &m);\n        for(int i = 1; i <= m; i++){\n            int u, v, w;\n            scanf(\"%d%d%d\", &u, &v, &w);\n            e[u-1].push_back((node){v, w});\n            e[v].push_back((node){u-1, -1*w}); //\u5efa\u56fe\n        }\n        for(int i = 0; i <= n; i++){\n            dis[i] = 0;\n            SPFA(i);\n            if(flag) { break;}\n        }\n        if(flag) printf(\"false\\n\");\n        else printf(\"true\\n\");\n        for(int i = 0; i <= n; i++){ \\\\\u8bb0\u5f97\u5728\u5224\u65ad\u5b8c\u6bcf\u4e00\u7ec4\u4e4b\u540e\u590d\u4f4d\n            vis[i] = 0;\n            dis[i] = 0;\n            e[i].clear();\n        }\n        flag = 0;\n    }\n    return 0;\n}\n\n```",
        "postTime": 1501556962,
        "uid": 3398,
        "name": "DaCong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u5728\u6d1b\u8c37\u91cc\u9762\u641c\u7d22 [\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf](https://www.luogu.com.cn/problem/list?keyword=&tag=185&orderBy=difficulty&order=asc&page=1) \u627e\u5230\u7684\u8fd9\u9898\u3002\n\n\u9996\u5148\u770b\u5230\u9898\u9762\uff0c\u89c9\u5f97\u662f\u5dee\u5206\u7ea6\u675f\u677f\u5b50\u9898\u3002\n\n\u660e\u663e\uff0c\u4e00\u4e2a\u9898\u76ee\u7ed9\u51fa\u7684\u6761\u4ef6 $s, t, v$ \u8868\u793a $sum[s - 1] + v = sum[t]$\n\n---\n\n\u5728\u5dee\u5206\u7ea6\u675f\u91cc\u9762\uff0c\u5bf9\u4e8e\u5f62\u5982 $a_i+w=a_j$ \u7684\u67ff\u5b50\uff0c\u6211\u4eec\u4e00\u822c\u628a\u5176\u62c6\u6210\u4e24\u4e2a\u67ff\u5b50\n$\\begin{cases}a_i+w\\le a_j\\\\a_i+w\\ge a_j\\end{cases}$\n\n\u53ef\u4ee5\u770b\u51fa\uff0c\u53ea\u8981\u6ee1\u8db3\u4e0a\u9762\u4e24\u4e2a\u67ff\u5b50\uff0c\u5c31\u53ef\u4ee5\u4f7f\u5f97 $a_i+w=a_j$\u3002\n\n\u4e3a\u4e86\u9002\u5e94\u8fd9\u9053\u9898\uff0c\u6211\u4eec\u9700\u8981\u5c06\u4e24\u4e2a\u4e0d\u7b49\u5f0f\u6539\u6210\u8fd9\u4e2a\u6837\u5b50\uff1a\n$\\begin{cases}a_i+w\\le a_j\\\\a_j-w\\le a_i\\end{cases}$\n\n\u56e0\u6b64\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u9898\u76ee\u7ed9\u51fa\u7684\u6761\u4ef6 $s, t, v$\uff0c\u6211\u4eec\u9700\u8981\u8fde\u4e24\u6761\u8fb9 $\\begin{cases}s-1\\xrightarrow{v}t\\\\t\\xrightarrow{-v}s-1\\end{cases}$\n\n\u7136\u540e\uff0c\u663e\u7136\uff0c\u5982\u679c\u6709\u6b63\u73af\u5219\u4e3a ``false``, \u5426\u5219\u4e3a ``true``\u3002  \n\uff08\u4e2a\u4eba\u89c9\u5f97\uff0c\u5176\u5b9e\u8fd9\u9053\u9898\u68c0\u6d4b\u6709\u6ca1\u6709\u8d1f\u73af\u4e5f\u662f\u53ef\u4ee5\u7684\uff09  \n\uff08\u5176\u5b9e\uff0c\u7531\u4e8e\u9898\u76ee\u7ed9\u7684\u6761\u4ef6\u662f\u7b49\u4e8e\u53f7\uff0c\u6240\u4ee5\u53ea\u8981\u68c0\u6d4b\u5230\u4e00\u4e2a\u6743\u503c\u4e0d\u4e3a $0$ \u7684\u73af\u5c31\u53ef\u4ee5\u8bf4\u662f ``false`` \u7684\uff09  \n\n---\n\n\u7136\u800c\u63d0\u4ea4\u662f WA \u7684\u3002\n\n\u539f\u56e0\uff1a \u56fe\u4e0d\u4e00\u5b9a\u8054\u901a\uff0c\u6240\u4ee5\u9700\u8981\u5efa\u7acb\u8d85\u7ea7\u6e90\u70b9\u3002  \n\u56e0\u4e3a $1\\le s$\uff0c\u6240\u4ee5 $0\\le s-1$, \u6240\u4ee5\u8282\u70b9\u7f16\u53f7\u6700\u5c0f\u662f $0$\u3002  \n\u56e0\u6b64\u8d85\u7ea7\u6e90\u70b9\u4e0d\u53ef\u4ee5\u662f\u7ed3\u70b9 $0$\uff0c \u4f46\u53ef\u4ee5\u662f\u7ed3\u70b9 $n+1$\n\n\u7136\u540e\u5c31 AC \u4e86\n\n---\n## Code\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntemplate <typename Int>\ninline Int read()       \n{\n    Int flag = 1;\n    char c = getchar();\n    while ((!isdigit(c)) && c != '-') c = getchar();\n    if (c == '-') flag = -1, c = getchar();\n    Int init = c & 15;\n    while (isdigit(c = getchar())) init = (init << 3) + (init << 1) + (c & 15);\n    return init * flag;\n}\n\nstruct Edge {\n    int to, v;\n};\n#define make_edge(u, v) ((Edge){(u), (v)})\nvector<Edge> G[5007];\nint n, m;\nint dis[5007];\nbool inq[5007];\nint vis[5007];\n\nint once()\n{\n    // [read data]\n    n = read<int>();\n    m = read<int>();\n    for (int i = 0; i <= n + 1; i++) G[i].clear();\n    for (int i = 1, u, v, w; i <= m; i++) {\n        u = read<int>();\n        v = read<int>();\n        w = read<int>();\n        G[u - 1].push_back(make_edge(v, w)); // sum_{u-1} + w <= sum_{v}\n        G[v].push_back(make_edge(u - 1, -w)); // sum_{v} - w <= sum_{u-1}\n    }\n    for (int i = 0; i <= n; i++)\n        G[n + 1].push_back(make_edge(i, 0));\n    // [/read data] \n    // [spfa]\n    queue<int> q;\n    q.push(n + 1);\n    memset(dis, 0xcf, sizeof(dis));\n    memset(vis, 0, sizeof(vis));\n    memset(inq, 0, sizeof(inq));\n    dis[n + 1] = 0;\n    while (!q.empty()) {\n        int fr = q.front(); \n        q.pop();\n        inq[fr] = 0;\n        for (unsigned i = 0; i < G[fr].size(); i++) {\n            if (dis[G[fr][i].to] < dis[fr] + G[fr][i].v) {\n                dis[G[fr][i].to] = dis[fr] + G[fr][i].v;\n                if (!inq[G[fr][i].to]) {\n                    vis[G[fr][i].to]++;\n                    if (vis[G[fr][i].to] > n) {\n                        puts(\"false\");\n                        return 0;\n                    }\n                    inq[G[fr][i].to] = true;\n                    q.push(G[fr][i].to);\n                }\n            }\n        }\n    }\n    // [/spfa]\n    puts(\"true\");\n    return 0;\n}\n\nint main()\n{\n    int T = read<int>();\n    while (T--) once();\n    return 0;\n}\n```\n\n\u987a\u4fbf\u8bf4\u4e00\u4e0b\uff0c\u89c9\u5f97\u8fd9\u9053\u9898\u51fa\u7684\u4e0d\u592a\u597d\u3002\u5c31\u7b97\u5546\u4eba\u7684\u8d26\u672c\u662f\u4f2a\u9020\u7684\uff0c\u6c42\u548c\u4e5f\u4e0d\u5e94\u8be5\u6709\u4e0d\u540c\u7684\u503c\u2026\u2026\u8fd9\u9053\u9898\u5b9e\u9645\u60f3\u95ee\u7684\u662f\u5201\u59f9\u7684\u6570\u5b66\u6709\u6ca1\u6709\u7b97\u9519\u5427\u2026\u2026",
        "postTime": 1580977214,
        "uid": 63720,
        "name": "brealid",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u65b0\u5e74\u4e00\u53d1AC\u6765\u5199\u4e00\u7bc7\u3002\n\n###### **\u795d\u5927\u5bb6\u5143\u65e6\u5feb\u4e50**\n\n\u8fd9\u79cd\u95ee\u5408\u6cd5\u4e0d\u5408\u6cd5\uff0c\u5224\u65ad\u53ef\u884c\u4e0d\u53ef\u884c\u7684\uff0c\u76f4\u63a5\u5f80\u5dee\u5206\u7ea6\u675f\u4e0a\u60f3\u5c31\u597d\u4e86\u3002\n\u9898\u610f\uff1a\u7ed9\u4f60\u7ed9\u51fa\u4e24\u4e2a\u6574\u6570n\u548cm\u3002\u4e0b\u9762\u6709n\u4e2a\u70b9\uff0cm\u4e2a\u533a\u95f4\u3002\u6bcf\u4e2a\u533a\u95f4\u5185\u6709\u4e00\u4e2a\u6743\u503c \u73b0\u5728\u95ee\u4f60\u662f\u4e0d\u662f\u5b58\u5728\u4e0d\u5408\u6cd5\u7684\u53ef\u80fd\uff0c\u4e5f\u5c31\u662f\u533a\u95f4\u7684\u6743\u503c\u548c\u51b2\u7a81\u3002\n\n\u601d\u8def\uff1a\n  \n      \u533a\u95f4[a][c]=\u533a\u95f4[a][b]+[b][c]\u3002\n      \u5229\u7528\u597d\u8fd9\u4e2a\u4e1c\u897f\u5c31\u597d\u4e86\u3002\u5047\u8bbe[a][c]=6,[a][b]=2,[b][c]=3.\u8fd9\u6837\u53d1\u73b0\n      [a][b]+[b][c]=5!=6\u3002\u6240\u4ee5\u5462\uff0c\u6211\u4eec\u53d1\u73b0\u77db\u76fe\u4e86\u3002\n      \u518d\u60f3\u60f3\u5dee\u5206\u7ea6\u675f\uff0c\u5c31\u60f3\u5230\u4e86\u524d\u7f00\u548c\u5c06\u6bcf\u4e2a\u533a\u95f4\u6211\u4eec\u7528\u524d\u7f00\u548c\u7684\u5f62\u5f0f\u8868\n      \u793a\u51fa\u6765\u3002[a][b]=sum[b]-sum[a-1]\u3002\u5dee\u5206\u7ea6\u675f\u4e2d\u662f\u4e00\u4e2a\u4e0d\u7b49\u5f0f\u7ec4\uff0c\u4f46\n      \u662f\u9898\u76ee\u7ed9\u51fa\u7684\u662f\u4e00\u4e2a\u7b49\u5f0f\u4f8b\u5982\uff1a[a][b]=3.\u8f6c\u5316\u4e3a\uff1a\n      sum[b]-sum[a-1]<=3,sum[b]-sum[a-1]>=3\u3002\u8fd9\u6837\u5c31\u5b8c\u7f8e\u7684\u5904\u7406\u597d\u4e86\u3002\n      \u4e3a\u4e86\u4e00\u6b21\u6027\u5904\u7406\u597d\u56fe\u4e0d\u8fde\u901a\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u7ed9\u4ed6\u9644\u52a0\u4e00\u4e2a\u8d85\u7ea7\u6e90(n+1)\u56e0\n      \u4e3a0\u5df2\u7ecf\u88ab\u7528\u6389\u4e86\u3002\n      \u7531n+1\u5411\u6bcf\u4e2a\u70b9\uff080-n\uff09\u8fde\u8fb9\u3002\u4ece\u8d85\u7ea7\u6e90\u5f00\u59cb\u8dd1\u6700\u77ed\u8def\u7b97\u6cd5(spfa)\u7136\u540e \n      \u5982\u679c\u6709\u8d1f\u73af\uff0c\u8868\u660e\u6709\u77db\u76fe\uff0c\u6ca1\u6709\u8d1f\u73af\u8868\u660e\u53ef\u884c\u3002\u5176\u5b9e\u53ef\u4ee5\u60f3\u60f3\u5982\u679c\u533a   \n      \u95f4[a][c]=\u533a\u95f4[a][b]+[b][c]\u6210\u7acb\uff0c\u90a3\u4e48\u4ece\u8d85\u7ea7\u6e90\u51fa\u53d1\uff0c\u56de\u5230\u8d85\u7ea7\u6e90 \n      \u7684\u6743\u503c\u548c\u5c31\u4e3a0.\n      \nAC\u4ee3\u7801\uff1a\n\n```c\n#include<bits/stdc++.h>\n#pragma GCC optimize(2)\n#define MAXN 2010\n#define MAXP 55\n#define maxnode 50010\n#define sigma_size 26\n#define mod 1000000007\n#define INF 0x3f3f3f3f\n#define lc  (id<<1)\n#define rc  (id<<1|1)\nusing namespace std;\ntypedef long long LL;\n\nint w,n,m;\nint uu,vv,c;\nstruct Edge\n{\n    int from,to,dist;\n    Edge(int from=0,int to=0,int dist=0):from(from),to(to),dist(dist){};\n};\nvector<Edge> edges;\nvector<int> G[MAXN];\nbool inq[MAXN];\nint dis[MAXN],cnt[MAXN];\n\nvoid init(int nn)\n{\n    for(int i=0;i<=nn;i++)\n        G[i].clear();\n    edges.clear();\n}\n\nbool spfa(int s)\n{\n    queue<int> Q;\n    memset(dis,INF,sizeof(dis));\n    memset(inq,false,sizeof(inq));\n    memset(cnt,0,sizeof(cnt));\n     Q.push(s);\n    inq[s]=true;\n    dis[s]=0;\n    while(!Q.empty())\n    {\n        int X=Q.front();\n        Q.pop();\n        inq[X]=false;\n        for(int i=0;i<G[X].size();i++)\n        {\n            Edge &e=edges[G[X][i]];\n            if(dis[e.to]>dis[X]+e.dist)\n            {\n                dis[e.to]=dis[X]+e.dist;\n                if(inq[e.to])\n                    continue;\n                inq[e.to]=true;\n                Q.push(e.to);\n                ++cnt[e.to];\n                if(cnt[e.to]>n)\n                    return true;\n            }\n        }\n    }\n    return false;\n}\n\nint main()\n{\n   scanf(\"%d\",&w);\n   while(w--)\n   {\n       scanf(\"%d %d\",&n,&m);\n       init(n+1);\n       for(int i=1;i<=m;i++)\n       {\n           scanf(\"%d %d %d\",&uu,&vv,&c);\n           uu--;\n           edges.push_back({uu,vv,c});\n           edges.push_back({vv,uu,-1*c});\n           int mm=edges.size();\n           G[uu].push_back(mm-2);\n           G[vv].push_back(mm-1);\n       }\n       for(int i=0;i<=n;i++)\n       {\n           edges.push_back({n+1,i,0});\n           int mm=edges.size();\n           G[n+1].push_back(mm-1);\n       }\n       if(spfa(n+1))\n           printf(\"false\\n\");\n       else\n           printf(\"true\\n\");\n   }\n   return 0;\n}\n\n```\n",
        "postTime": 1577843858,
        "uid": 210155,
        "name": "abandentsky",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u540c\u6837\u4e5f\u7528\u7684\u5dee\u5206\u7ea6\u675f\uff0c\u4f46\u6211\u6ca1\u5efa\u53cc\u5411\u8fb9\u548c\u627e\u8d1f\u73af\uff1b\n\n\u5229\u7528\u524d\u7f00\u548c\u5efa\u56fe\uff0ca,b,c\u5c31\u5efa\u4e00\u4e2aa\u5230b\u6743\u503c\u4e3ac\u7684\u8fb9\n\n\u7531\u6837\u4f8b\u53ef\u77e5\uff0c\u5982\u679c\u51fa\u73b0\u77db\u76fe\uff0c\u90a3\u4e48\u4ece\u4e00\u4e2a\u70b9\u51fa\u53d1\u5230\u53e6\u4e00\u4e2a\u70b9\u7684\u8ddd\u79bb\u7684\u4e0d\u540c\u8def\u5f84\u7684\u6743\u503c\u548c\u4e0d\u540c\n\n\u6240\u4ee5\u53ea\u8981dfs\u51e0\u904d\u5c31\u597d\u4e86\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u6bcf\u6b21dfs\u6709\u53ef\u80fd\u5230\u5df2\u7ecf\u5230\u8fc7\u7684\u70b9\uff0c\u8fd9\u65f6\u5019\u8fd8\u8981\u7ee7\u7eed\u6df1\u641c\uff0c\u56e0\u4e3a\u8d77\u70b9\u4e0d\u540c\u4e86\n\n\u8bb0\u5f55\u6743\u91cd\u548c\u7684d[]\u6570\u7ec4\u53ef\u80fd\u503c\u4e3a\u96f6\uff0c\u4e0d\u80fd\u7528\u6765\u5224\u65ad\u8fd9\u4e2a\u70b9\u5728\u8fd9\u6b21dfs\u4e2d\u662f\u5426\u8d70\u8fc7\uff0c\u53ea\u597d\u518d\u5f00\u4e00\u4e2ause1[]\u6570\u7ec4\u6765\u5224\u65ad\uff08\u597d\u50cf\u76f4\u63a5\u628ad\u8d4b\u503c\u6210\u65e0\u9650\u4e5f\u53ef\u4ee5\uff1f\u3002\u3002\u3002\uff09\n\n\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<string>\n#include<cstring>\n#include<cstdio>\n#define LL long long\n#define random(a,b) (a+rand()%(b-a+1))\nusing namespace std;\nconst int maxn=1005;\nstruct asd\n{\n    int next,to,val;\n} edge[2005];\nint node[1005];\nint etot=0;\nvoid add(int x,int y,int z)\n{\n    edge[++etot].next=node[x];\n    edge[etot].to=y;\n    edge[etot].val=z;\n    node[x]=etot;\n}\nint use[maxn],d[maxn],flag,use1[maxn];\nvoid dfs(int x)\n{\n    use[x]=use1[x]=1;\n    for(int i=node[x]; i; i=edge[i].next)\n    {\n        if(flag)return;\n        int too=edge[i].to;\n        if(!use1[too])\n        {\n            d[too]=d[x]+edge[i].val;\n            dfs(too);\n        }\n        else if(d[too]!=d[x]+edge[i].val)\n            {\n                flag=1;\n                return;\n            }\n    }\n}\nint n,m,t;\nint main()\n{\n    scanf(\"%d\",&t);\n    while(t--)\n    {\n        scanf(\"%d%d\",&n,&m);\n        for(int i=0; i<=n; i++)node[i]=use[i]=d[i]=0;\n        etot=flag=0;\n        for(int i=1; i<=m; i++)\n        {\n            int tmp1,tmp2,tmp;\n            scanf(\"%d%d%d\",&tmp1,&tmp2,&tmp);\n            add(tmp1-1,tmp2,tmp);\n        }\n        for(int i=0; i<=n; i++)\n        {\n            if(flag)break;\n            if(!use[i]){\n                for(int j=0;j<=n;j++)use1[j]=0;\n            dfs(i);    \n            }\n        }\n        if(flag)printf(\"false\\n\");\n        else printf(\"true\\n\");\n    }\n}\n\n```",
        "postTime": 1515313002,
        "uid": 45966,
        "name": "santongding",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u5c31\u76f4\u63a5\u52a0\u6743\u5e76\u67e5\u96c6\u561b\uff1b\n\n\u8f93\u5165\u533a\u95f4\u7aef\u70b9i,j,\u5219\u5408\u5e76i-1,j\uff08\u8fd9\u6837\u7b97\u5f97\u51fa\u95f4\u63a5\u5173\u7cfb\u4e4b\u95f4\u7684\u6743\u5440\uff09\uff1b\n\n\u82e5i-1,j\u4ee5\u6709\u5173\u7cfb\uff0c\u5224\u65ad\u4ed6\u4eec\u7684\u5173\u7cfb\u662f\u5426\u662f\u65b0\u5173\u7cfb\uff1f\u7ee7\u7eed\uff1afalse\uff1b\n\n\u5373w[j]-w[i-1]==\u65b0\u503c?\n\n\u5177\u4f53\u8def\u5f84\u538b\u7f29\u65f6\u7ef4\u62a4\u6743\u503c\u89c1\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nint f[101],w[101],l;\n\nvoid work();\nint find(int);\nvoid merge(int ,int);\n\nint main()\n{\n        int i,t;\n        scanf(\"%d\",&t);\n        for(i=1;i<=t;i++)\n                work();\n        return 0;\n}\n\nvoid work()\n{\n        int i,j,k,n,m,p=0;\n        scanf(\"%d%d\",&n,&m);\n        for(i=0;i<=n;i++)\n        {\n                f[i]=i;\n                w[i]=0;\n        }\n        for(i=1;i<=m;i++)\n        {\n                scanf(\"%d%d%d\",&j,&k,&l);\n                j--;\n                if(find(j)==find(k))\n                {\n                        if(w[k]-w[j]!=l&&p==0)\n                        {   \n                                printf(\"false\\n\");\n                                p=1;\n                        }\n                }\n                else\n                        merge(j,k);\n        }\n        if(p==0)\n                printf(\"true\\n\");\n        return;\n}\n\nint find(int x)\n{\n        int a;\n        if(f[x]==x)\n                return x;\n        a=find(f[x]);\n        if(f[f[x]]!=f[x])\n                w[x]+=w[f[x]];\n            f[x]=a;\n        return f[x];\n}\n\nvoid merge(int x,int y)\n{\n        w[find(y)]=l-w[y];\n        f[find(y)]=x;\n        find(y);\n}\n```",
        "postTime": 1476600204,
        "uid": 17671,
        "name": "djy213",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u8fd9\u4f3c\u4e4e\u662f\u4e00\u9053**\u9ad8\u65af\u6d88\u5143**\u7684\u6a21\u677f\u9898\u3002\n\n\u4f46\u597d\u50cf\u6ca1\u6709\u9ad8\u65af\u6d88\u5143\u7684\u9898\u89e3\u3002\n\n### \u89e3\u6cd5\n\n>- \u663e\u7136\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u6761\u4fe1\u606f\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2a\u65b9\u7a0b\u3002\n\n>- \u7b49\u53f7\u5de6\u8fb9\u5c06 $s$ \u5230 $t$ \u5929\u7684\u7cfb\u6570\u8d4b\u503c\u4e3a $1$\uff0c\u5176\u4ed6\u8d4b\u503c\u4e3a $0$\u3002\u7b49\u53f7\u53f3\u8fb9\u8d4b\u503c\u4e3a $v$\u3002\n\n>- \u6700\u540e\u76f4\u63a5\u5957\u5165\u9ad8\u65af\u6d88\u5143\u6a21\u677f\uff0c\u7136\u540e\u5224\u65ad\u6709\u6ca1\u6709\u89e3\u5c31\u53ef\u4ee5\u4e86\u3002\n\n>- \u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(wnm)$\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i , m , n) for(register int i = m; i <= n; i++)\n\nusing namespace std;\nint Q;\nint n , m;\ndouble d[1005][105];\nbool Guass(){\n\tint sta = 1;\n\trep(i , 1 , n){\n\t\tint now = sta;\n\t\tfor(; now <= m && d[now][i] == 0; now++);\n\t\tif(now > m)continue;\n\t\trep(j , 1 , n + 1)swap(d[sta][j] , d[now][j]);\n\t\trep(j , sta + 1 , m){\n\t\t\tif(d[j][i] == 0)continue;\n\t\t\tdouble tmp = d[j][i] / d[sta][i];\n\t\t\trep(k , i , n + 1)d[j][k] -= d[sta][k] * tmp;\n\t\t}\n\t\tsta++;\n\t\tif(sta > m)break;\n\t}//\u4ee5\u4e0a\u662f\u9ad8\u65af\u6d88\u5143\u6a21\u677f \n\t\n\trep(i , 1 , m){\n\t\tbool flag = true;\n\t\trep(j , 1 , n)if(d[i][j] != 0)flag = false;\n\t\tif(d[i][n + 1] != 0 && flag)return false;//\u5982\u679c\u7b49\u53f7\u5de6\u8fb9\u7684\u7cfb\u6570\u5168\u4e3a\u96f6\uff0c\u4e14\u7b49\u53f7\u53f3\u8fb9\u4e0d\u4e3a\u96f6\uff0c\u5219\u65e0\u89e3 \n\t}\n\treturn true;//\u5982\u679c\u6709\u89e3\uff0c\u8bf4\u660e\u8d26\u5355\u662f\u771f\u7684 \n}\nint main(){\n\tscanf(\"%d\" , &Q);\n\twhile(Q--){\n\t\tmemset(d , 0 , sizeof d);\n\t\tscanf(\"%d%d\" , &n , &m);\n\t\trep(i , 1 , m){\n\t\t\tint s , t , sum;\n\t\t\tscanf(\"%d%d%d\" , &s , &t , &sum);\n\t\t\t\n\t\t\trep(j , s , t)d[i][j] = 1; \n\t\t\td[i][n + 1] = sum;//\u5efa\u7acb\u65b9\u7a0b \n\t\t}\n\t\tif(!Guass())printf(\"false\\n\");\n\t\telse\t\tprintf(\"true\\n\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1683081875,
        "uid": 59691,
        "name": "\u51d1\u4e2a\u70ed\u95f9\u5416",
        "ccfLevel": 7,
        "title": "[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba"
    },
    {
        "content": "\u672c\u4eba\u5f31\uff0c\u7528\u7684\u662f\u7eaf\u7eaf\u7684\u6a21\u62df\u3002\n\n\u601d\u8def\u5982\u4e0b\uff1a\n\t\n\u5bf9\u4e8e\u6240\u6709\u7ed9\u5b9a\u7684\u533a\u95f4\uff0c\u5982\u679c\u5df2\u77e5\u4e24\u4e2a\u533a\u95f4\uff08$a$,$x$\uff09,\uff08$x$,$b$\uff09\u7684\u503c\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u77e5\u9053\uff08$a$,$b$\uff09\u7684\u503c\uff0c\u540c\u7406\uff0c\u5982\u679c\u5df2\u77e5\u4e24\u4e2a\u533a\u95f4\uff08$x$,$a$\uff09\u548c\uff08$x$,$b$\uff09\uff08$a$<$b$\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u77e5\u9053\uff08$a$,$b$\uff09\u7684\u503c\u3002\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u533a\u95f4\uff0c\u6211\u4eec\u6c42\u51fa\u4e0e\u4e4b\u5b58\u5728\u4e00\u4e2a\u70b9\u76f8\u540c\u7684\u533a\u95f4\u7684\u53cd\u533a\u95f4\u3002\u603b\u5171\u67096\u79cd\u60c5\u51b5\uff0c\u50cf\u6570\u5b66\u7684\u5206\u7c7b\u8ba8\u8bba\u3002\n    \n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O$($nm$). \u76f8\u6bd4\u5176\u4ed6\u7b97\u6cd5\u786e\u5b9e\u7565\u5f31\u4e00\u4e9b\u3002\u4e0d\u8fc7\u8fd9\u4e2a\u65b9\u6cd5\u6bd4\u8f83\u597d\u60f3\u3002\n\n## \u9644\u4e0a\u4ee3\u7801\n\n```cpp\n#include<cstdio>\nusing namespace std;\nconst int maxn=100 + 5,INF=1<<30;\nint f[maxn][maxn];\n\nvoid mems(int n) { //\u521d\u59cb\u5316\u6570\u7ec4\n    for(int i=1;i<=n+1;i++)\n        for(int j=1;j<=n+1;j++)\n        f[i][j]=INF;\n}\n\nint main() {\n    int T,n,m;\n    scanf(\"%d\",&T);\n    while(T--) {\n        scanf(\"%d%d\",&n,&m);\n        mems(n);\n        int l,r,w;\n        bool flag=0;\n        for(int i=1;i<=m;i++) {\n            scanf(\"%d%d%d\",&l,&r,&w);\n            r++;  \n            //r++\u610f\u601d\u662f\u7528\uff08l,r\uff09\u8868\u793al\u5230r\uff08\u4e0d\u542br\uff09\u7684\u603b\u548c\uff0c\u4fbf\u4e8e\u540e\u9762\u7684\u8ba1\u7b97\n            if(f[l][r]==w||f[l][r]==INF)\n                f[l][r]=w;\n            else \n                flag=1;\n            for(int j=1;j<=n;j++) \n            if(j<l){\n                if(f[j][l]!=INF) {\n                    if(f[j][r]!=f[j][l]+f[l][r]&&f[j][r]!=INF)\n                        flag=1;\n                    else\n                        f[j][r]=f[j][l]+f[l][r];\n                }\n                if(f[j][r]!=INF) {\n                    if(f[j][l]!=f[j][r]-f[l][r]&&f[j][l]!=INF)\n                        flag=1;\n                    else \n                        f[j][l]=f[j][r]-f[l][r];\n                }\n            } else if(l<j&&j<r) {\n                if(f[l][j]!=INF)\n                    if(f[j][r]!=f[l][r]-f[l][j]&&f[j][r]!=INF)\n                        flag=1;\n                    else\n                        f[j][r]=f[l][r]-f[l][j];\n                if(f[j][r]!=INF)\n                    if(f[l][j]!=f[l][r]-f[j][r]&&f[l][j]!=INF)\n                        flag=1;\n                    else\n                        f[l][j]=f[l][r]-f[j][r];\n            } else if(j>r){\n                if(f[r][j]!=INF)\n                    if(f[l][j]!=f[l][r]+f[r][j]&&f[l][j]!=INF)\n                        flag=1;\n                    else \n                        f[l][j]=f[l][r]+f[r][j];\n                if(f[l][j]!=INF)\n                    if(f[r][j]!=f[l][j]-f[l][r]&&f[r][j]!=INF)\n                        flag=1;\n                    else \n                        f[r][j]=f[l][j]-f[l][r];\n            } //\u8ba1\u7b97\u8ba9\u6211\u60f3\u5230\u4e86\u5411\u91cf\n        }\n        if(!flag) puts(\"true\");\n        else puts(\"false\");\n    }\n    return 0;\n}\n```\n\t",
        "postTime": 1534506824,
        "uid": 59951,
        "name": "throusea",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    },
    {
        "content": "\u4e00\u5f00\u59cb\u60f3\u5f53\u7136\u5730\u8f93\u51fa\u4e86\u4e00\u4e2a\u5e03\u5c14\u53d8\u91cf\uff0c\u540e\u6765\u624d\u53d1\u73b0\u5927\u5c0f\u5199\u4f1a\u51fa\u95ee\u9898\u3002\n\ns\u5230t\u548c\u4e3av,\u5982\u679c\u7528sum[i]\u8868\u793a1-i\u7684\u548c\uff0c\u5373\u8f6c\u5316\u4e3asum[t]-sum[s-1]=v\u3002\n\n\u8f6c\u5316\u4e3a\u56fe\uff0c\u5728s-1,t\u4e4b\u95f4\u8fde\u4e00\u6761\u6743\u503cv\u7684\u8fb9\uff0c\u518d\u8fde\u4e00\u6761-v\u7684\u53cd\u5411\u8fb9\u3002\n\n\u9898\u76ee\u5373\u5224\u65ad\u56fe\u4e2d\u662f\u5426\u5b58\u5728\u6743\u503c\u548c\u4e0d\u4e3a0\u7684\u73af\u3002\u53ea\u8981dfs\u4e00\u904d\uff0c\u5c31\u80fdO(M)\u89e3\u51b3\u3002\n",
        "postTime": 1476614264,
        "uid": 9168,
        "name": "kczno1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2294 \u3010[HNOI2005]\u72e1\u733e\u7684\u5546\u4eba\u3011"
    }
]
[
    {
        "content": "\u5f88\u6709\u8da3\u7684\u4e00\u9053\u9898\uff08\uff1f\uff09\uff0c\u6a21\u62df\u8d5b\u7684\u65f6\u5019\u6ca1\u5199\u51fa\u6765\uff0c\u8001\u5e08\u8bb2\u7684\u65f6\u5019\u662f\u771f\u7684\u611f\u89c9\u8305\u585e\u987f\u5f00\u3002\n\n\u4ed4\u7ec6\u8bfb\u9898\uff0c\u60f3\u60f3\u6700\u7ec8\u7684\u5e8f\u5217\u80fd\u957f\u6210\u4ec0\u4e48\u6837\u5b50\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u6700\u7ec8\u7684\u5e8f\u5217\u4e0a\u4e0b\u76f8\u90bb\u7684\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u5dee\u8ddd\u4e00\u5b9a\u4e3a $0$ \u6216 $1$\u3002\n\n\u7531\u4e8e\u6ca1\u6709\u91cd\u590d\u7684\u5b57\u7b26\u4e32\uff0c\u6240\u4ee5**\u4e00\u5b9a\u4e0d\u4f1a**\u51fa\u73b0\u4e00\u4e2a\u578b\u5982 $S$\uff0c$c+S$\uff0c$S$ \u7684\u5b50\u5e8f\u5217\uff08\u6b64\u5904 $S$ \u4ee3\u8868\u5b57\u7b26\u4e32\uff0c$c$ \u4ee3\u8868\u5b57\u7b26\uff09\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6700\u7ec8\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u5e8f\u5217\u4e0d\u4f1a\u5728\u4e2d\u95f4\u51fa\u73b0\u5cf0\u503c\uff08\u53ea\u53ef\u80fd\u5728\u5e8f\u5217\u4e24\u4fa7\u51fa\u73b0\uff09\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qplnpskt.png)\n\n\u8fd9\u662f\u5b57\u7b26\u4e32\u5e8f\u5217\u6700\u7ec8\u53ef\u80fd\u51fa\u73b0\u7684\u4e00\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u627e\u51fa\u6700\u591a\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f7f\u5176\u5f62\u6210\u7684\u5e8f\u5217\u80fd\u5448\u73b0\u51fa\u8fd9\u6837\u7684\u6027\u8d28\u5373\u53ef\u3002\n\n\u8003\u8651\u76f8\u90bb\u7684\u4e24\u4e2a\u5b57\u7b26\u4e32\u3002\u5c06\u5b83\u4eec\u5206\u522b\u53cd\u5411\u63d2\u5165\u4e00\u68f5 trie \u6811\u4e2d\u5e76\u6807\u8bb0\u51fa\u7ed3\u5c3e\u6240\u5728\u7684\u70b9\uff0c\u4e00\u5b9a\u4f1a\u5448\u73b0\u51fa\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u7684\u4efb\u610f\u4e00\u79cd\u3002\uff08\u7ea2\u70b9\u3001\u84dd\u70b9\u5206\u522b\u8868\u793a\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u53cd\u5411\u540e\u7684\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\uff09\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pvurage9.png)\n\n\n\u5176\u4e2d\uff0c\u7b2c\u4e00\u79cd\u60c5\u51b5\u5bf9\u5e94\u957f\u5ea6\u76f8\u540c\u3001\u9996\u5b57\u7b26\u4e0d\u540c\u7684\u60c5\u51b5\uff1b\u7b2c\u4e8c\u79cd\u60c5\u51b5\u5bf9\u5e94\u957f\u5ea6\u76f8\u5dee $1$\uff0c\u4e00\u4e2a\u5b57\u7b26\u4e32\u4e3a\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u540e\u7f00\u7684\u7684\u60c5\u51b5\u3002\n\n---\n\n\u7ed3\u5408\u4e0a\u9762\u63a8\u51fa\u6765\u7684\u4e24\u4e2a\u7ed3\u8bba\uff0c\u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u9898\u4e86\u3002\u9996\u5148\u5c06\u6240\u6709\u7684\u5b57\u7b26\u4e32\u53cd\u5411\u63d2\u5165 trie \u6811\uff0c\u7136\u540e\u5728\u8fd9\u68f5 trie \u6811\u4e0a\u505a\u4e00\u6b21\u6811\u5f62 dp \u5373\u53ef\u3002\n\n\u6211\u4eec\u9700\u8981\u627e\u51fa\u4e00\u68f5\u88ab\u6807\u8bb0\u8282\u70b9\u6700\u591a\u7684\u5b50\u6811\uff0c\u8fd9\u68f5\u5b50\u6811\u9700\u8981\u6ee1\u8db3\uff1a\n\n1. \u6839\u8282\u70b9\u53ea\u6709 $1 \\sim 2$ \u4e2a\u5b50\u8282\u70b9\u3002\n2. \u9664\u6839\u8282\u70b9\u5916\uff0c\u5176\u4ed6\u6240\u6709\u8282\u70b9\u5747\u4e00\u5b9a\u88ab\u6807\u8bb0\u3002\n3. \u9664\u6839\u8282\u70b9\u5916\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u513f\u5b50\u4e2d\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u8282\u70b9\u4e0d\u662f\u53f6\u5b50\u3002\n\n\u63a5\u4e0b\u6765\u662f\u6700\u4e0d\u91cd\u8981\u7684\u4ee3\u7801\u3002\uff08\u5df2\u7ecf\u5c3d\u91cf\u51cf\u5c11\u538b\u884c\uff09\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define rep(i, a, b) for(int i=(a), i##up=(b); i<=i##up; ++i)\n#define ref(i, a) for(int i=1, i##up=(a); i<=i##up; ++i)\n#define rer(i, a, b) for(int i=(a), i##dn=(b); i>=i##dn; --i)\n\ninline int read() {\n\tint t=0, f=1; char c;\n\twhile(!isdigit(c=getchar())) f=c^45;\n\twhile(isdigit(c)) t=(t<<1)+(t<<3)+(c^48), c=getchar();\n\treturn f? t: -t;\n}\n\nconst int N=5e5+5, M=3e6+5;\n\nint n;\nchar s[M];\n\nint son[M][26], ptot, cnt[M];\ninline void insert(char *s) {\n\tint u=0, d;\n\trer(i, strlen(s+1), 1) {\n\t\td=s[i]-'a';\n\t\tif(!son[u][d]) son[u][d]=++ptot;\n\t\tu=son[u][d];\n\t}\n\tcnt[u]++;\n}\n\nint dp[M], ans;\nvoid dfs(int u) {\n\tint v, siz=0, mx1=0, mx2=0;\n\trep(d, 0, 25) if(v=son[u][d]) {\n\t\tdfs(v), siz+=cnt[v];\n\t\tif(mx1<dp[v]) mx2=mx1, mx1=dp[v];\n\t\telse if(mx2<dp[v]) mx2=dp[v];\n\t}\n\tif(cnt[u]) dp[u]=mx1+max(siz, 1);\n\tans=max(ans, mx1+mx2+cnt[u]+max(siz-2, 0));\n}\n\nint main() {\n\tn=read();\n\tref(i, n) scanf(\"%s\", s+1), insert(s);\n\tdfs(0);\n\tprintf(\"%d\", ans);\n}\n```\n\n\u542c\u8bf4\u6709\u4eba\u60f3\u770b\u538b\u884c\u7248\u672c\uff1f\uff08\u5e76\u6ca1\u6709\u4eba\u60f3\u770b\uff09\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define rep(i, a, b) for(int i=(a), i##up=(b); i<=i##up; ++i)\n#define ref(i, a) for(int i=1, i##up=(a); i<=i##up; ++i)\n#define rer(i, a, b) for(int i=(a), i##dn=(b); i>=i##dn; --i)\n\ninline int read() {\n\tint t=0, f=1; char c;\n\twhile(!isdigit(c=getchar())) f=c^45;\n\twhile(isdigit(c)) t=(t<<1)+(t<<3)+(c^48), c=getchar();\n\treturn f? t: -t;\n}\n\nconst int N=5e5+5, M=3e6+5;\n\nint n;\nchar s[M];\n\nint son[M][26], ptot, cnt[M];\ninline void insert(char *s) {\n\tint u=0, d;\n\trer(i, strlen(s+1), 1) son[u][d=s[i]-'a']||(son[u][d]=++ptot), u=son[u][d];\n\tcnt[u]++;\n}\nint dp[M], ans;\nvoid dfs(int u) {\n\tint v, siz=0, mx1=0, mx2=0;\n\trep(d, 0, 25) if(v=son[u][d]) dfs(v), siz+=cnt[v], mx1<dp[v]&&(mx2=mx1, mx1=dp[v], 1) || mx2<dp[v]&&(mx2=dp[v]);\n\tcnt[u]&&(dp[u]=mx1+max(siz, 1)), ans=max(ans, mx1+mx2+cnt[u]+max(siz-2, 0));\n}\n\nint main() {\n\tref(i, n=read()) scanf(\"%s\", s+1), insert(s);\n\tdfs(0), printf(\"%d\", ans);\n}\n```",
        "postTime": 1630936871,
        "uid": 428154,
        "name": "\u5b50\u4e11",
        "ccfLevel": 7,
        "title": "P7537 [COCI2016-2017#4] Rima"
    },
    {
        "content": "# 1.\u524d\u8a00\n\u539fblog\uff1a[CSDN](https://blog.csdn.net/qq_37656398/article/details/94740509)\n\n[AC\u8bb0\u5f55](https://www.luogu.com.cn/record/56773814)\n\n\u6c42\u5173\u6ce8qwq\u3002\n\n# 2.\u5206\u6790\n\u6211\u4eec\u8003\u8651\u5c06\u6bcf\u4e2a\u4e32\u53cd\u8f6c\u540e\u6302\u5230 trie \u4e0a\uff0c\u90a3\u4e48\u540e\u7f00\u5c31\u53d8\u6210\u4e86\u524d\u7f00\u3002\n\n\u8003\u8651\u5728 trie \u4e0a\u505a DP\u3002\u5b9a\u4e49 $f[u]$ \u4e3a\u4ee5\u7f16\u53f7\u4e3a $u$ \u7684\u8282\u70b9\u7ed3\u5c3e\u7684\u5355\u8bcd\u540e\u6700\u591a\u80fd\u63a5\u4e0a\u7684\u5355\u8bcd\u6570\u91cf\u3002\n\n\u7531\u4e8e trie \u4e0a\u6bcf\u4e2a\u8282\u70b9\u90fd\u8868\u793a\u4e00\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u8868\u793a\u771f\u5b9e\u5b58\u5728\u7684\u5355\u8bcd\u7684\u8282\u70b9\u6253\u4e0a\u6807\u8bb0\uff0c\u4ee5\u907f\u514d\u8f6c\u79fb\u65f6\u51fa\u9519\u3002\n\n\u6211\u4eec\u753b\u4e00\u4e0b\u56fe\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u82e5\u8be5\u8282\u70b9\u5bf9\u7b54\u6848\u6709\u8d21\u732e\uff0c\u5219\u8be5\u8282\u70b9\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f\u6700\u591a\u7684\u662f\u4e24\u4e2a\u513f\u5b50\u7684 $f$ \u503c\u52a0\u4e0a\u5269\u4f59\u7684\u513f\u5b50\u7684\u6570\u91cf\u3002\n\n\u6ce8\u610f\u5f53 $u$ \u4e0d\u662f\u4e00\u4e2a\u771f\u5b9e\u7684\u8282\u70b9\u65f6\uff0c\u6211\u4eec\u5e94\u5c06 $f[u]$ \u8d4b\u4e3a $0$\u3002\n\n\u6ce8\u610f\u8fd9\u9053\u9898\u5361\u7a7a\u95f4\uff0c\u6211\u4eec\u4e0d\u80fd\u66b4\u529b\u5f00\u957f\u5ea6\u4e3a 26 \u6570\u7ec4\u6765\u5b58\u50a8\u513f\u5b50\u7684\u4fe1\u606f\u3002\n\n# 3.code\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n\nconst int Maxn=5e5;\nconst int Maxlen=3e6;\n\nint N;\n\nstruct Trie {\n\tbool is_real;\n\tint f;\n\tvector<pair<char,int> > son;\n};\nTrie t[Maxlen+5];\nint cnt;\nint ans;\n\nvoid addstring(string tmp) {\n\tint rt=0;\n\tfor(int i=0;i<(int)tmp.length();i++) {\n\t\tint nxt=-1;\n\t\tfor(int j=0;j<(int)t[rt].son.size();j++)\n\t\t\tif(t[rt].son[j].first==tmp[i]) {\n\t\t\t\tnxt=t[rt].son[j].second;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tif(nxt==-1) {\n\t\t\tnxt=++cnt;\n\t\t\tt[rt].son.push_back(make_pair(tmp[i],nxt));\n\t\t}\n\t\trt=nxt;\n\t}\n\tt[rt].is_real=true;\n}\n\nvoid DFS(int rt) {\n\tint cnt_real=0;\n\tpair<int,int> maxx;\n\tmaxx=make_pair(0,0);\n\tfor(int i=0;i<(int)t[rt].son.size();i++) {\n\t\tint v=t[rt].son[i].second;\n\t\tDFS(v);\n\t\tcnt_real+=t[v].is_real;\n\t\tmaxx=max(maxx,make_pair(maxx.first,t[v].f));\n\t\tmaxx=max(maxx,make_pair(t[v].f,maxx.first));\n\t\tt[rt].f=max(t[rt].f,t[v].f);\n\t}\n\tif(t[rt].is_real)\n\t\tt[rt].f+=max(1,cnt_real);\n\telse t[rt].f=0;\n\tans=max(ans,maxx.first+maxx.second+t[rt].is_real+max(0,cnt_real-2));\n}\n\nint main() {\n\tfreopen(\"rima.in\",\"r\",stdin);\n\tfreopen(\"rima.out\",\"w\",stdout);\n\tcin>>N;\n\tfor(int i=1;i<=N;i++) {\n\t\tstring s;\n\t\tcin>>s;\n\t\treverse(s.begin(),s.end());\n\t\taddstring(s);\n\t}\n\tDFS(0);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1631962998,
        "uid": 554872,
        "name": "Deirdre",
        "ccfLevel": 0,
        "title": "[P7537]\u9898\u89e3"
    },
    {
        "content": "[\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.com.cn/problem/P4471)\n\n\u9898\u610f\u4e0d\u591a\u590d\u8ff0\uff0c\u76f4\u63a5\u8fdb\u5165\u6b63\u9898\u3002\n\n### \u89e3\u6790\n\n\u6807\u7b7e\u5199\u7684\u5f88\u6e05\u695a\u4e86\u3002\u5148\u8003\u8651 Trie\u3002\n\nTrie \u7b80\u5355\u6765\u8bf4\u5c31\u662f\u4e00\u68f5\u6811\uff0c\u6bcf\u6761\u8fb9\u5b58\u4e00\u4e2a\u5b57\u7b26\u3002\n\n\u4ece\u6839\u8282\u70b9\u5230\u6bcf\u4e2a\u8282\u70b9\u7684\u8def\u5f84\u90fd\u53ef\u4ee5\u4ee3\u8868\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002\u8be6\u89c1[\u8fd9\u91cc](https://www.luogu.com.cn/problem/P8306)\u3002\n\n\u8fd9\u6837\u5c31\u80fd\u5f88\u5feb\u6c42\u51fa\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u6700\u957f\u516c\u5171\u524d\u7f00\uff08LCA\uff09\u3002\u53ea\u8981**\u53cd\u8fc7\u6765**\u5b58\uff0c\u6700\u957f\u516c\u5171\u540e\u7f00\u4e5f\u4e0d\u5728\u8bdd\u4e0b\u3002\n\n\u8fd9\u6837\u5c31\u80fd\u5b58\u51fa\u4e00\u68f5\u5b57\u5178\u6811\uff0c\u5bf9\u4e8e\u8868\u793a\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u8282\u70b9 $u,v$\uff08\u4ece\u6839\u5230\u5f53\u524d\u8282\u70b9\uff09\uff0c\u6700\u957f\u516c\u5171\u540e\u7f00\u5c31\u662f\u6839\u5230 `LCA(u,v)` \u8868\u793a\u7684\u5b57\u7b26\u4e32\u3002\n\n\u8fd9\u6837\u5c31\u4e0d\u96be\u770b\u51fa\uff0c**\u62bc\u97f5\u7684\u5b57\u7b26\u4e32\u8981\u4e48\u662f\u5144\u5f1f\u5173\u7cfb\uff0c\u8981\u4e48\u662f\u7236\u5b50\u5173\u7cfb**\u3002\n\n\u5c31\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u6811\u5f62 dp\u3002**\u56e0\u4e3a\u53ea\u8981\u6c42\u76f8\u90bb\u7684\u4e24\u4e2a\u5b57\u7b26\u4e32\u62bc\u97f5\uff0c\u524d\u9762\u7684\u5bf9\u4e0d\u76f8\u90bb\u7684\u65e0\u5f71\u54cd**\u3002\n\n\u6240\u4ee5\u8bbe $f_i$ \u8868\u793a\u8282\u70b9 $i$ \u8868\u793a\u7684\u5b57\u7b26\u4e32\u4e3a**\u6700\u53f3\u8fb9**\u7684\u5e8f\u5217\u7684\u6700\u957f\u957f\u5ea6\uff08\u82e5\u6839\u5230\u8282\u70b9 $i$ \u4e0d\u4ee3\u8868\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08$word_i=0$\uff09\uff0c$f_i=0$\uff09\uff0c$son_i$ \u4ee3\u8868 $i$ \u7684\u6240\u6709\u513f\u5b50\uff0c$siz_i$ \u4ee3\u8868\u513f\u5b50\u7684\u4e2a\u6570\uff0c$word_i$ \u4ee3\u8868 $i$ \u8282\u70b9\u4ee3\u8868\u7684\u5b57\u7b26\u4e32\u4e2a\u6570\u3002\n\n$f_i=\\max\\limits f_{son_i} + siz_i-1+word_i$\u3002\n\n\u6bcf\u6b21\u66f4\u65b0 $ans$ \u65f6\uff0c\u5c31\u53d6\u51fa $i$ \u4e3a\u6839\u7684\u5b50\u6811\u7684\u76f4\u5f84\u52a0\u4e0a\u513f\u5b50\u6570\u51cf\u4e8c\u3002\u5177\u4f53\u89c1\u4ee3\u7801\u3002\n\n### \u4ee3\u7801\u5b9e\u73b0\n\n```cpp\n#include<bits/stdc++.h>\n#define il inline\n#define re register \nusing namespace std;\n\nconst int M=3e6+10;\n\nint n,t[M][30],tot,word[M],f[M],son[M],ans;\n\nchar s[M];\n\nil void insert(re char *s) {\n\tre int p=0,len=strlen(s);\n\tfor(re int i=len-1;~i;i--) {\n\t// \u53cd\u5efa Trie \n\t\tre int &to=t[p][s[i]-'a'+1];\n\t\tif(!to) to=++tot;\n\t\tp=to;\n\t}\n\tword[p]++;\n}\n\nil void dfs(re int u) {\n\tre int large=0,big=0,kids=0;\n\t// \u6700\u957f\u94fe+\u6b21\u957f\u94fe=\u76f4\u5f84\u3002 \n\tfor(re int i=1;i<=26;i++) {\n\t\tre int v=t[u][i];\n\t\tif(!v) continue;\n\t\tkids+=word[v];\n\t\tdfs(v);\n\t\tif(f[v]>large) {\n\t\t\tbig=large;\n\t\t\tlarge=f[v];\n\t\t}\n\t\telse big=max(big,f[v]);\n\t}\n\tans=max(ans,word[u]+large+big+max(kids-2,0));\n\t// \u66f4\u65b0 ans \n\tif(word[u]==0) f[u]=0;\n\t// \u65ad\u5c42\u4e86 \n\telse {\n\t\tf[u]=large+max(0,(kids-1))+word[u];\n\t\t// \u66f4\u65b0 f \n\t}\n}\n\nint main() {\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tscanf(\"%d\",&n);\n\tfor(re int i=1;i<=n;i++) {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tscanf(\"%s\",s);\n\t\tinsert(s);\n\t}\n\tdfs(0);\n\tprintf(\"%d\",ans);\n\treturn 0;\n} \n```",
        "postTime": 1675061098,
        "uid": 576934,
        "name": "Kevin_Mamba",
        "ccfLevel": 5,
        "title": "P7537 Rima \u9898\u89e3"
    }
]
[
    {
        "content": "## \u7b97\u6cd5 1\n\n\u8f93\u51fa\u6bcf\u4e2a\u70b9\u5b50\u6811\u5927\u5c0f\u3002\n\n\u663e\u7136\u5bf9\u94fe\u662f\u6b63\u786e\u7684\uff0c\u671f\u671b\u5f97\u5206 11\u3002\n\n## \u7b97\u6cd5 2\n\n$c=1$ \u65f6\uff0c\u4e00\u79cd\u6307\u6570\u7ea7\u505a\u6cd5\u662f\u8bb0\u6bcf\u4e00\u4e2a\u70b9\u6ca1\u7403/\u6709\u6b63\u7535\u7403/\u6709\u8d1f\u7535\u7403\uff0c\u7136\u540e\u72b6\u538b dp\u3002\u590d\u6742\u5ea6 $O(3^nn)$\u3002\n\n\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u66b4\u529b\u505a\u6cd5\u3002\u671f\u671b\u5f97\u5206 27\u3002\u7ed3\u5408\u7b97\u6cd5 1 \u671f\u671b\u5f97\u5206 38\u3002\n\n## \u7b97\u6cd5 3\n\n\u7ed3\u8bba\uff1a\u5148\u624b\u5168\u6254\u6b63\u7535\u7403\uff0c\u540e\u624b\u5c3d\u91cf\u8ba9\u7403\u4e0e\u76ee\u6807\u4f4d\u7f6e\u7684 LCA \u9760\u4e0a\u3002\n\n\u8bc1\u660e\uff1a\n\n\u9996\u5148\uff0c\u4e00\u4e2a\u5bb9\u91cf\u4e3a $c$ \u7684\u70b9\u53ef\u4ee5\u88ab\u66ff\u6362\u6210\u4e00\u6761\u957f\u5ea6\u4e3a $c$ \u7684\u94fe\u3002\u4e8e\u662f\u63a5\u4e0b\u6765\u53ea\u8003\u8651\u5bb9\u91cf\u4e3a $1$ \u7684\u60c5\u51b5\u3002\n\n\u8003\u8651\u5bf9\u4efb\u610f\u6811\u5f52\u7eb3\u3002\u5f52\u7eb3\u8fb9\u754c\uff1a\n\n- \u4efb\u610f\u6811\uff0c\u76ee\u6807\u70b9\u4e3a\u6839\u65f6\u6210\u7acb\u3002\n- \u5927\u5c0f\u4e3a 1 \u7684\u6811\uff0c\u76ee\u6807\u70b9\u662f\u4efb\u610f\u70b9\u65f6\u6210\u7acb\u3002\n\n\u4e0b\u5047\u8bbe\u5bf9\u4e8e\u4efb\u610f\u5927\u5c0f $\\leq S$ \u7684\u6811\uff0c\u76ee\u6807\u70b9\u4e3a\u4efb\u610f\u70b9\u65f6\u6210\u7acb\u3002\n\n\u8003\u8651\u4e00\u68f5\u5927\u5c0f\u4e3a $S+1$ \u7684\u6811\uff0c\u4e0d\u59a8\u5047\u8bbe\u76ee\u6807\u70b9\u5728\u5de6\u4fa7\uff0c\u5de6\u4fa7\u5728\u53cc\u65b9\u5747\u6267\u884c\u6700\u4f18\u7b56\u7565\u65f6\u9700\u8981\u6295\u4e0b $k$ \u4e2a\u7403\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u6295\u4e0b $<k$ \u4e2a\u7403\u65f6\uff0c\u65e0\u8bba\u7403\u7684\u7535\u6027\uff0c\u5747\u65e0\u6cd5\u8fbe\u5230\u76ee\u6807\uff1b\u800c\u7531\u5f52\u7eb3\u5047\u8bbe\uff0c\u6295\u4e0b $k$ \u4e2a\u6b63\u7535\u7403\u53ef\u4ee5\u8fbe\u5230\u76ee\u6807\uff09\u3002\u8bbe\u53f3\u4fa7\u5b50\u6811\u5927\u5c0f\u4e3a $s$\u3002\u540c\u6837\u6267\u884c\u4e0a\u8ff0\u7b56\u7565\u65f6\uff0c\u663e\u7136 A \u6295\u4e0b $\\min\\{2k,s+k\\}$ \u4e2a\u7403\u53ef\u8fbe\u5230\u76ee\u6807\u3002\u4e0b\u8bc1\u660e A \u4e0d\u80fd\u4f7f\u7528\u66f4\u5c11\u7684\u7403\u6570\u8fbe\u5230\u8fd9\u4e2a\u76ee\u6807\u3002\n\n\u8003\u8651 A \u4f9d\u6b21\u6295\u4e0b\u7684\u7403\u3002\u8003\u8651\u5206\u7ec4\uff1a\u7b2c\u4e00\u4e2a\u7403\u548c\u7b2c\u4e8c\u4e2a\u7403\u4e3a\u4e00\u7ec4\uff0c\u7b2c\u4e09\u4e2a\u7403\u548c\u7b2c\u56db\u4e2a\u7403\u4e3a\u4e00\u7ec4\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u5728\u4e24\u4fa7\u5747\u4e0d\u6ee1\u4e14\u4efb\u610f\u4e00\u7ec4\u7403\u7684\u7b2c\u4e00\u4e2a\u7403\u6295\u4e0b\u4e4b\u524d\uff0c\u6839\u7684\u4e24\u4fa7\u7535\u8377\u4e00\u5b9a\u5e73\u8861\u3002\u4ece\u800c B \u53ea\u80fd\u5728\u4e24\u4fa7\u5747\u4e0d\u6ee1\u65f6\u51b3\u7b56\u4e00\u7ec4\u7403\u4e2d\u7684\u7b2c\u4e00\u4e2a\u7403\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- \u5982\u679c\u4e24\u4e2a\u7403\u7535\u6027\u76f8\u540c\uff0c\u65e0\u8bba\u6254\u54ea\u8fb9\u90fd\u5f97\u5f80\u5de6\u8fb9\u6389\u4e00\u4e2a\uff0c\u6240\u4ee5\u5148\u6254\u53f3\u8fb9\u3002\n- \u5982\u679c\u4e24\u4e2a\u7403\u7535\u6027\u4e0d\u540c\uff0c\u6254\u53f3\u8fb9\u5c31\u90fd\u53bb\u53f3\u8fb9\uff0c\u6254\u5de6\u8fb9\u5c31\u90fd\u53bb\u5de6\u8fb9\uff0c\u6240\u4ee5\u6254\u53f3\u8fb9\u3002\n\n\u56e0\u6b64\uff0c\u53ea\u8981\u4e24\u4fa7\u5747\u4e0d\u6ee1\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u7ec4\u4e2d\u7684\u4e24\u4e2a\u7403\uff0cB \u4e00\u5b9a\u80fd\u591f\u4fdd\u8bc1\u53ea\u6709\u540e\u6295\u4e0b\u7684\u7403\u843d\u5165\u5de6\u4fa7\uff0c\u6216\u8005\u90fd\u4e0d\u843d\u5165\u5de6\u4fa7\u3002\u56e0\u6b64 A \u4e0d\u80fd\u4f7f\u7528\u66f4\u5c11\u7684\u7403\u6570\u8fbe\u5230\u8fd9\u4e2a\u76ee\u6807\u3002\n\n\u4e8e\u662f A \u6700\u4f18\u7b56\u7565\u5f97\u8bc1\u3002\n\n\u8bc1\u660e A \u6700\u4f18\u7b56\u7565\u540e\uff0cB \u5b9e\u9645\u4e0a\u5df2\u7ecf\u6ca1\u6709\u51b3\u7b56\uff0c\u4e14\u8fc7\u7a0b\u5c31\u662f\u8ba9\u7403\u4e0e\u76ee\u6807\u4f4d\u7f6e\u7684 LCA \u9760\u4e0a\u3002\u4e8e\u662f\u5f97\u8bc1\u3002\n\n---\n\n\u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba\u4ee5\u540e\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9 $u$\uff0c\u7b54\u6848\u53ef\u4ee5\u5411\u4e0a\u9012\u63a8\uff1a\u521d\u59cb\u662f\u5b50\u6811\u5927\u5c0f $a_u=S_u$\uff0c\u6bcf\u6b21\u5f80\u4e0a\u4e00\u4e2a\u70b9\uff0c\u8bbe\u53e6\u4e00\u4e2a\u513f\u5b50\u7684\u5b50\u6811\u5927\u5c0f\u662f $S$\uff0c\u5219 $a_u\\leftarrow a_u+\\min\\{a_u,S\\}$\u3002\n\n\u66b4\u529b\u9012\u63a8\uff0c\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u671f\u671b\u5f97\u5206 100\u3002\n\n\n\n\n\n\n\n",
        "postTime": 1670249152,
        "uid": 61088,
        "name": "Solystic",
        "ccfLevel": 9,
        "title": "Searching For Hope (easy) \u9898\u89e3"
    },
    {
        "content": "## Subtask 1\n\u6811\u4e3a\u4e00\u6761\u94fe\u3002\n\n\u7403\u4e0b\u843d\u7684\u70b9\u56fa\u5b9a\uff0c$r_i=sz_i$\uff0c$sz_i$ \u4e3a\u7b2c $i$ \u68f5\u5b50\u6811\u7684\u5927\u5c0f\u3002\n\n## Subtask 2\n\n$n\\le 10, c_i=1$\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u72b6\u6001\u65e0\u7403/\u6b63\u7535\u7403/\u8d1f\u7535\u7403\u3002\u7136\u540e\u8fdb\u884c\u72b6\u538b dp\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\mathcal O(3^nn)$\u3002\n\n## Subtask 3\n\n\u5148\u9644\u4e00\u5f20\u4e11\u56fe\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ygmqj85m.png)\n\n\u7ea2\u70b9\u4e3a\u8981\u586b\u6ee1\u7684\u70b9\u3002\n\n---\n\n> \u6027\u8d28 $1$\uff1a\u5982\u679c\u7ea2\u70b9\u4e3a**\u6574\u68f5\u5b50\u6811\u7684\u6839**\uff0c\u90a3\u4e48\u8f6e\u6570\u4e00\u5b9a\u662f $\\sum\\limits_{i=1}^{n}c_i$\uff08\u4e0d\u7406\u89e3\u597d\u597d\u8bfb\u9898\uff09\u3002\n\n---\n\n> \u6027\u8d28 $2$\uff1a$fa_i/fa_{fa_i}/fa_{fa_{fa_i}}/\\cdots$ \u4e00\u5b9a\u662f\u6ca1\u6709\u7403\u3002\n\n---\n\n\u8d2a\u5fc3\u7684\u8003\u8651\uff0c\u6211\u4eec\u662f\u8981\u5c3d\u91cf\u51cf\u5c11\u5f80\u53f3\u5b50\u6811\u7684\u6295\u653e\uff0c\u56e0\u4e3a\u5f80\u5de6\u5b50\u6811\u6295\u653e\u7684\u662f\u56fa\u5b9a\u7684\u3002\n\n---\n\n$$\\textrm{Step } 1:$$\n\n\u795e\u660e**\u4e00\u5b9a\u53ef\u4ee5**\u662f\u5f80\u53f3\u5b50\u6811\u6295\u653e\u3002\n\n\u8bc1\u660e\uff1a\n\n\u5982\u679c\u5f80\u5de6\u5b50\u6811\u6295\uff0c\u90a3\u4e48 $\\textrm{Step } 2$ \u51e1\u4eba\u53ef\u4ee5\u6295\u76f8\u540c\u5c5e\u6027\u7684\u7403\u7ee7\u7eed\u5f80\u5de6\u5b50\u6811\u6295\uff0c\u8fd9\u6837\u795e\u660e\u5c31\u65e0\u6cd5\u9009\u62e9\u5f80\u54ea\u91cc\u6295\u653e\uff0c\u800c\u5f80\u53f3\u5b50\u6811\u6295\u81f3\u5c11\u80fd\u8ba9\u8f6e\u6570\u52a0 $1$\u3002\n\n---\n\n$$\\textrm{Step } 2:$$\n\n\u51e1\u4eba\u53ef\u4ee5\u9009\u62e9\u4e0e $\\textrm{Step } 1$ \u76f8\u540c\u7684\u5c5e\u6027\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5f80\u5de6\u5b50\u6811\u6295\u3002\n\n---\n\n$$\\textrm{Step } 3:$$\n\n\u56e0\u4e3a\u7535\u76f8\u540c\uff0c\u6240\u4ee5\u56de\u5230\u4e86 $\\textrm{Step } 1$\u3002\n\n---\n\n\u8fd9\u6837\u8f6e\u56de\uff0c\u76f4\u5230\u5de6\u5b50\u6811\u6216\u53f3\u5b50\u6811\u5145\u6ee1\u3002\n\n\u7136\u540e\u6bcf\u4e24\u4e2a $\\textrm{Step}$ \u662f\u76f8\u540c\u5c5e\u6027\u7684\uff0c\u4e14\u6ca1\u6709\u5173\u8054\uff0c\u6240\u4ee5\u53ef\u4ee5\u6295\u653e\u5168\u662f\u6b63\u7535\u7684\u3002\n\n---\n\n\u6839\u636e\u6027\u8d28 $2$ \u53ef\u77e5\uff0c\u8fd9\u4e2a\u652f\u6301\u9012\u5f52\u7684\uff0c\u56e0\u4e3a\u7403\u53ea\u4f1a\u843d\u5230\u5de6/\u53f3\u5b50\u6811\u3002\n\n\u9012\u5f52\u5230\u7b2c $i$ \u4e2a\u70b9\u65f6\uff0c\u4e14\u8fd9\u4e2a\u70b9\u662f\u7ea2\u70b9\uff0c\u5219\u4ee5\u7b2c $i$ \u4e2a\u5b50\u6811\u4e3a\u6839\u7684\u64cd\u4f5c\u6b21\u6570\u4e3a $sz_i$\uff0c\u7136\u540e\u8fd4\u56de\u65f6\u4ee5\u7b2c $i$ \u4e2a\u4e3a\u6839\u7684\u64cd\u4f5c\u6b21\u6570\u4e3a $sz_x+\\min\\{sz_x,sz_y\\}$\uff08$x$ \u4e3a\u6709\u7ea2\u70b9\u7684\u5b50\u6811\uff0c$y$ \u4e3a\u4ee4\u4e00\u9897\u5b50\u6811\uff09\u3002\n\n### Code\n```cpp\n#include <bits/stdc++.h>\n\ntypedef long long LL;\n\nconst int N = 1010, M = N * 2;\n\nint n;\nstruct Tree\n{\n\tint l, r;\n\tvoid init(int _l, int _r)\n\t{\n\t\tl = _l, r = _r;\n\t}\n}tr[N];\nLL c[N], sz[N];\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\n\tfor (int i = 1; i <= n; i ++ ) tr[i].init(0, 0);\n\n\tfor (int i = 2; i <= n; i ++ )\n\t{\n\t\tint p;\n\t\tscanf(\"%d\", &p);\n\t\tif (tr[p].l) tr[p].r = i;\n\t\telse tr[p].l = i;\n\t}\n\tfor (int i = 1; i <= n; i ++ ) scanf(\"%lld\", &c[i]);\n\n\tauto calc = [&](auto calc, int x) -> LL\n\t{\n\t\tLL s = c[x];\n\t\tif (tr[x].l) s += calc(calc, tr[x].l);\n\t\tif (tr[x].r) s += calc(calc, tr[x].r);\n\t\treturn sz[x] = s; \n\t};\n\tcalc(calc, 1);\n\n\tauto dfs = [&](auto dfs, int x, int v) -> LL\n\t{\n\t\tLL left = 0, right = 0;\n\t\tif (tr[x].l) left = dfs(dfs, tr[x].l, v);\n\t\tif (tr[x].r) right = dfs(dfs, tr[x].r, v);\n\t\tif (left) return left + std::min(left, sz[tr[x].r]);\n\t\tif (right) return right + std::min(sz[tr[x].l], right);\n\t\tif (x == v) return sz[x];\n\t\treturn 0;\n\t};\n\n\tfor (int i = 1; i <= n; i ++ ) printf(\"%lld \", dfs(dfs, 1, i));\n\treturn 0;\n}\n```",
        "postTime": 1674651066,
        "uid": 353330,
        "name": "hcywoi",
        "ccfLevel": 5,
        "title": "P8966"
    }
]
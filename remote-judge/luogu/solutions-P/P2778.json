[
    {
        "content": "\u7b14\u8005\u7684\u505a\u6cd5\u548c\u4e0b\u9762\u51e0\u7bc7\u9898\u89e3\u662f\u4e00\u6837\u7684\uff0c\u5728\u8fd9\u91cc\u5c31\u4e0d\u91cd\u590d\u53d9\u8ff0\u4e86\u3002\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u4e0b\u5b98\u65b9\u7ed9\u51fa\u7684\u505a\u6cd5\u3002\n\n\n##\u9898\u76ee\u5206\u6790\n\n\u628a\u5e73\u9762\u4e0a\u6bcf\u4e00\u4e2a\u533a\u57df\u770b\u4f5c\u4e00\u4e2a\u7ed3\u70b9\uff0c\u6700\u5916\u5c42\u6ca1\u6709\u8fb9\u754c\u7684\u533a\u57df\u4e5f\u770b\u4f5c\u4e00\u4e2a\u7ed3\u70b9\u3002\u5982\u679c\u4e00\u4e2a\u533a\u57df\u521a\u597d\u88ab\u53e6\u5916\u4e00\u4e2a\u533a\u57df\u76f4\u63a5\u5305\u542b\uff0c\u5219\u8fde\u8fb9\u3002\u6784\u6210\u7684\u56fe\u4e0a\u505a\u6700\u77ed\u8def\u5f84\u5373\u53ef\u4ee5\u5f97\u523040~60\u7684\u5206\u6570\u3002\n\n\u53c8\u53d1\u73b0\uff0c\u4e0a\u8ff0\u5f97\u5230\u7684\u56fe\u662f\u6811\u7ed3\u6784\u7684\uff0c\u5728\u6811\u4e0a\u9884\u5904\u7406\u597d\u4efb\u610f\u4e24\u70b9\u7684\u6700\u8fd1\u516c\u5171\u7956\u5148\uff0c\u4e4b\u540e\u7684\u8be2\u95ee\u53ef\u4ee5\u7ebf\u5f62\u5b8c\u6210\uff0c\u8fd9\u4fbf\u53ef\u4ee5\u5f97\u5230\u6ee1\u5206\u3002\n\n\n##std\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<cmath>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nstruct Point\n{\n    ll x,y;\n    Point(){}\n    Point(ll _x,ll _y):x(_x),y(_y){}\n    Point operator - (const Point &t)const\n    {\n        return Point(x-t.x,y-t.y);\n    }\n    ll len2()\n    {\n        return x*x+y*y;\n    }\n};\nstruct Circle\n{\n    Point o;\n    ll r;\n    Circle(){}\n    Circle(Point _o,ll _r):o(_o),r(_r){}\n    bool operator < (const Circle &t)const\n    {\n        return r<t.r;\n    }\n    bool contain(Point t)\n    {\n        return (t-o).len2()<r*r;\n    }\n}c[8005];\nstruct Edge\n{\n    int to,nxt;\n}edge[8005];\nint head[8005],tot;\nvoid init()\n{\n    memset(head,-1,sizeof(head));\n    tot=0;\n}\nvoid addedge(int u,int v)\n{\n    edge[tot].to=v;\n    edge[tot].nxt=head[u];\n    head[u]=tot++;\n}\nint fa[8005],dep[8005];\nvoid dfs(int u,int la)\n{\n    fa[u]=la;\n    dep[u]=(la>=0 ? dep[la]+1 : 0);\n    for(int i=head[u];~i;i=edge[i].nxt)\n        dfs(edge[i].to,u);\n}\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    for(int i=0;i<n;i++)\n        scanf(\"%lld%lld%lld\",&c[i].o.x,&c[i].o.y,&c[i].r);\n    c[n++]=Circle(Point(0,0),200000000);\n    sort(c,c+n);\n    init();\n    for(int i=0;i<n-1;i++)\n        for(int j=i+1;j<n;j++)\n            if(c[j].contain(c[i].o))\n            {\n                addedge(j,i);\n                break;\n            }\n    dfs(n-1,-1);\n    int m;\n    scanf(\"%d\",&m);\n    for(int i=0;i<m;i++)\n    {\n        int u[2];\n        for(int j=0;j<2;j++)\n        {\n            Point p;\n            scanf(\"%lld%lld\",&p.x,&p.y);\n            for(int k=0;k<n;k++)\n                if(c[k].contain(p))\n                {\n                    u[j]=k;\n                    break;\n                }\n        }\n        int res=0;\n        while(u[0]!=u[1])\n        {\n            if(dep[u[0]]>dep[u[1]])u[0]=fa[u[0]];\n            else u[1]=fa[u[1]];\n            res++;\n        }\n        printf(\"%d\\n\",res);\n    }\n    return 0;\n}\n```\n\n##\u5410\u69fd\n\n\u8fd9\u73a9\u610f\u53c8\u96be\u5199\uff0c\u5e38\u6570\u53c8\u5927\uff08\u539f\u9898\u65f6\u96505s\uff09\uff0c\u4e0d\u77e5\u9053\u51fa\u9898\u4eba\u600e\u4e48\u60f3\u5230\u7684\u3002\n",
        "postTime": 1483367179,
        "uid": 3144,
        "name": "\u6d6e\u5c18ii",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P2778 \u3010[AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab\u3011"
    },
    {
        "content": "**\u4ee3\u7801\u7b80\u77ed\u6613\u61c2**\n\n###\u603b\u601d\u8def\uff0c\u53ea\u8981\u4e00\u4e2a\u4eba\u5728\u5708\u5185\uff0c\u53e6\u4e00\u4e2a\u4eba\u4e0d\u5728\u5708\u5185\u5c31\u8981\u8de8\u8fc7\u4e00\u4e2a\u5706\uff0cans++\n\n\u6ce8\u610f\uff0c\u6b64\u5904\u672c\u56e0\u6709\u4e09\u79cd\u60c5\u51b5\n\n##1.\u4e24\u4eba\u90fd\u5728\u5708\u5185\uff0c\u4e0d\u7ffb\u5899\n\n##2.\u4e24\u4eba\u90fd\u5728\u5708\u5916\uff0c\u4e5f\u4e0d\u7ffb\u5899\n\n##3.\u4e24\u4eba\u4e00\u4e2a\u5728\u5708\u5185\uff0c\u4e00\u4e2a\u5728\u5708\u5916\uff0c\u7ffb\u5899\n\n\u6069\u5c31\u662f\u8fd9\u6837\n\n```cpp\nint work(int x1,int y1,int x2,int y2)       \n{\n    int f1,f2,ans=0;\n    for (int i=1;i<=n;i++)\n    {\n        f1=0;f2=0;\n        if (sqr(x1-x[i])+sqr(y1-y[i])<sqr(r[i])) f1=1;               //\u5224\u65ad\u7b2c\u4e00\u4e2a\u4eba\u662f\u5426\u5728\u5708\u5185\n        if (sqr(x2-x[i])+sqr(y2-y[i])<sqr(r[i])) f2=1;            //\u8fd9\u91cc\u4e3a\u4e86\u907f\u514d\u6d6e\u70b9\u6570\u8ba1\u7b97\u53ef\u4ee5\u628a\u8ddd\u79bb\u516c\u5f0f\u4e24\u8fb9\u90fd\u5e73\u65b9\u6389\n        if ((f1==1&&f2==0)||(f1==0&&f2==1)) ans++;           \n}\nreturn ans;\n}\n//\u7ed9\u51fa\u6838\u5fc3\u4ee3\u7801\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u8c03Q\u904d\u5c31\u884c\n```",
        "postTime": 1485500742,
        "uid": 9087,
        "name": "fl_334",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2778 \u3010[AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab\u3011"
    },
    {
        "content": "\u9996\u5148\uff0c\u8fd9\u9053 2016 \u5e74\u7684 AH \u521d\u4e2d\u7ec4\u7701\u8d5b\u9898\uff0c\u601d\u8def\u5f88\u660e\u786e\uff1a\u679a\u4e3e\u6bcf\u4e2a\u5706\u3002\u5982\u679c\u7ec8\u70b9\u548c\u8d77\u70b9\u4e0e\u540c\u5706\u7684\u4f4d\u7f6e\u5173\u7cfb\u4e0d\u4e00\u81f4\uff0c\u5219\u8ba1\u5165\u7b54\u6848\u3002\n\n\u4f46\u662f\uff0c\u6709\u4e00\u4e2a\u7ec6\u8282\uff0c\u90e8\u5206\u9898\u89e3\u5ffd\u7565\u4e86\u3002\n\n`\u4fdd\u8bc1-100000000<=x,y,r<=100000000\u3002`\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u67d0\u4e2a\u5706\u7684\u5706\u5fc3\u7684\u5750\u6807\u4e0e\u8981\u6c42\u7684\u70b9\u7684\u5750\u6807\u76f8\u6bd4\u6070\u597d\u5341\u5206\u6781\u7aef\uff0c\u6bd4\u5982 $(-10^8,-10^8)$ \u548c $(10^8,10^8)$\uff0c\u5f3a\u884c\u6c42\u8ddd\u79bb\uff08\u6216\u8005\u8ddd\u79bb\u5e73\u65b9\uff09\u7684\u8bdd\uff0c int   \u80af\u5b9a\u662f\u53d7\u4e0d\u4f4f\u7684\uff0c\u56e0\u6b64\u80af\u5b9a\u8981\u7528 long long \u5904\u7406\uff0c\u6216\u8005    unsigned long long\uff0cint128\uff0c\u9ad8\u7cbe\u5ea6\u4e4b\u7c7b\u7684\uff0c\u4e0d\u8fc7\u5176\u4ed6\u7684\u6ca1\u6709\u5fc5\u8981\uff0c\u800c\u4e14\u76f8\u5f53\u9ebb\u70e6\u3002\n\n**\u5982\u679c\u4e0d\u628a\u6b64\u9898\u5f53\u505a\u7ade\u8d5b\u9898\u505a\uff0c\u90a3\u4e48\u4e5f\u53ef\u4ee5\u7528  python**\n\n\u601d\u8def\u5df2\u7ecf\u660e\u786e\uff0c\u9644\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\nlong long x[8005],y[8005],r[8005],a,b,c,d; \nint n,q;\nlong long dis(long long a,long long b,long long c,long long d)\n{\n\treturn (a-c)*(a-c)+(b-d)*(b-d);//\u8ddd\u79bb\u5e73\u65b9\n}\nbool check(int i)\n{\n\tbool f1=dis(x[i],y[i],a,b)<r[i]*r[i];//1\u5728\u5706\u5185 true \n\tbool f2=dis(x[i],y[i],c,d)<r[i]*r[i];//2\u5728\u5706\u5185\n\treturn !f1&&f2||f1&&!f2;//\u5077\u61d2\u7684\u8bdd\u53ef\u4ee5\u5199\u4f5creturn f1+f2\n}\nint main()\n{\n\t//\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u5206\u6790\n\t//\u8bed\u53e5\u6570\u91cf 4+n+3q+3nq\n\t//\u4fdd\u7559\u6700\u5927 3nq\n\t//\u53bb\u9664\u5e38\u6570 nq \n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%lld%lld%lld\",&x[i],&y[i],&r[i]);\n\tscanf(\"%d\",&q);\n\twhile(q--)\n\t{\n\t\tscanf(\"%lld%lld%lld%lld\",&a,&b,&c,&d);\n\t\tlong long ans=0;\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(check(i))\n\t\t\t\tans++;\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n} \n```\n\n\u5728\u5904\u7406 long long \u548c int \u7684\u5bb9\u65a5\u65f6\uff0c\u4f60\u8c37\u7684\u7f16\u8bd1\u5668\u4f3c\u4e4e\u548c  `Dev`  \u4e0d\u5c3d\u76f8\u540c\uff0c\u9700\u8981\u975e\u5e38\u4e25\u683c\u5730\u907f\u514d\u4e8c\u8005\u7684\u51b2\u7a81\u3002\n\nend.",
        "postTime": 1628231334,
        "uid": 95543,
        "name": "wyh1122",
        "ccfLevel": 0,
        "title": "P2778 [AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u4e00\u9898\u600e\u4e48\u770b\u600e\u4e48\u50cf\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u6216\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u3002\n\n\u7136\u800c\uff0c\u5e76\u4e0d\u662f\u90a3\u4e48\u56de\u4e8b\u3002\u5728\u4ee3\u7801\u53d7\u632b\u540e\uff0c\u6211\u6362\u4e86\u4e00\u79cd\u601d\u8def\uff1a\u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u6e38\u620f\uff08\u50cf\u7eaa\u5ff5\u7891\u8c37\u4e00\u6837\uff09\uff0c\u90a3\u4e48\u6211\u4f1a\u600e\u4e48\u73a9\uff1f\n\n\u5728\u6df1\uff08N\uff09\u601d\uff08\u6b21\uff09\u719f\uff08\u5931\uff09\u8651\uff08\u8d25\uff09\u4e4b\u540e\uff0c\u6211\u627e\u5230\u4e86\u4e00\u4e2a\u89c4\u5f8b\uff1a\u53ea\u8981\u4e24\u4eba\u90fd\u5728\u67d0\u4e2a\u5708\u5916\u6216\u5708\u91cc\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5708\u4ed6\u4eec\u4e24\u4e0d\u7528\u7834\u3002\u4e8e\u662f\u4ee3\u7801\u5199\u51fa\u6765\u4e86\uff1a\n```cpp\nfor(int j=1;j<=n;j++)\n{\n\tif(check(a,b,j)!=check(c,d,j))\n\t{\n\t\tans++;\n\t\tif(check(a,b,j)&&check(c,d,j))\n\t\t{\n\t\t\tans=1;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n```\ncheck\u51fd\u6570\uff1a\n```cpp\nbool check(int xx,int yy,int num)\n{\n\tif(abs(xx-x[num])*abs(xx-x[num])+abs(yy-y[num])*abs(yy-y[num])<=z[num])\n\t{\n\t\treturn true;\n\t}\n\treturn false;\n}\n```\n\u4f46\u662f\u4ea4\u4e0a\u53bb\uff1a[\u51e0\u5ea6\u5915\u9633\u7ea2](https://www.luogu.com.cn/record/50281690)\u3002\u4e3a\u4ec0\u4e48\uff1f\u5f88\u5feb\uff0c\u6211\u53d1\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a\u4e07\u4e00\u4ed6\u4eec\u4fe9\u786e\u5b9e\u662f\u5728\u4e00\u4e2a\u5927\u5708\u91cc\uff0c\u53ef\u662f\u53c8\u6709\u4e24\u4e2a\u5c0f\u5708\u628a\u4ed6\u4eec\u5206\u522b\u6846\u5728\u4e0d\u540c\u7684\u5730\u65b9\u5462\uff1f\u4e8e\u662f\u6211\u53c8\u505a\u4e86\u4e00\u6b21\u4fee\u6539\uff0c\u628a\u5224\u65ad\u4ed6\u4eec\u4e24\u662f\u5426\u540c\u65f6\u5728\u4e00\u4e2a\u5708\u91cc\u7684\u4ee3\u7801\u5220\u4e86\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nint x[8005],y[8005],z[8005];\nbool check(int xx,int yy,int num)\n{\n\tif(abs(xx-x[num])*abs(xx-x[num])+abs(yy-y[num])*abs(yy-y[num])<=z[num])\n\t{\n\t\treturn true;\n\t}\n\treturn false;\n}\nsigned main()\n{\n    int n;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>x[i]>>y[i]>>z[i];\n\t\tz[i]*=z[i];\n\t}\n\tint q;\n\tcin>>q;\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tint a,b,c,d,ans=0;\n\t\tcin>>a>>b>>c>>d;\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tif(check(a,b,j)!=check(c,d,j))\n\t\t\t{\n\t\t\t\tans++;\n\t\t\t}\n\t\t}\n\t\tcout<<ans<<endl;\n\t}\n}\n```\n",
        "postTime": 1620122687,
        "uid": 137162,
        "name": "\u80e1\u91d1\u6881",
        "ccfLevel": 5,
        "title": "\u9898\u89e3\u3010P2778\u3011\u8ff7\u5bab"
    },
    {
        "content": "### Describe:\n\u6709 $2$ \u4e2a\u70b9\uff0c\u6c42\u4ece\u4e00\u4e2a\u70b9\u5230\u53e6\u4e00\u4e2a\u70b9\u9700\u8981\u7a7f\u8fc7\u51e0\u4e2a\u5706\u3002\n### Solution:\n#### Upd1 at 2020/8/25\uff1a\n\n\u611f\u8c22\u7528\u6237 @ sipu6174\u7684hack\uff0c\u66f4\u65b0\u4e86\u6c42\u6839\u516c\u5f0f\uff08~~\u8fde\u6c42\u6839\u516c\u5f0f\u90fd\u5199\u9519\u4e86\u3002\u3002\u3002~~\uff09\u3002\n\n---\n\n\n~~\u770b\u5230\u697c\u4e0a\u7684\u5927\u4f6c\u90fd\u7528\u56fe\u8bba\u505a\uff0c\u6211\u8fd9\u4e2a\u849f\u84bb\u53ea\u80fd\u60f3\u5230\u89e3\u6790\u51e0\u4f55\u4e86\u3002~~\n\n\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u7834\u5899\u5462\uff1f\n\n\u6211\u4eec\u77e5\u9053\uff0c\u5f53 $2$ \u4e2a\u70b9\u540c\u65f6\u5728\u4e00\u4e2a\u5706\u5185\uff0c\u6216\u8005\u5706\u5916\u65f6\uff0c\u8fd9 $2$ \u79cd\u60c5\u51b5\u662f\u4e0d\u9700\u8981\u7834\u5899\u7684\u3002\n\n\u5c31\u50cf\u8fd9\u6837\uff1a\n![](https://s1.ax1x.com/2020/06/25/N05j8H.png)\n\n\u90a3\u4e48**\u5f53\u4e00\u4e2a\u70b9\u5728\u5706\u5185\uff0c\u800c\u53e6\u5916\u4e00\u4e2a\u70b9\u5728\u5706\u5916\u65f6\u9700\u8981\u7834\u5899\u3002**\n\n\u5c31\u50cf\u8fd9\u6837\uff1a\n![](https://s1.ax1x.com/2020/06/25/N05kcR.png)\n\n\u600e\u4e48\u5224\u65ad\u4e00\u4e2a\u70b9\u5728\u5706\u5185\uff0c\u800c\u53e6\u4e00\u4e2a\u70b9\u5728\u5706\u5916\u5462\uff1f\n\n\u6211\u4eec\u628a\u8fd9 $2$ \u70b9\u7ed9\u8fde\u63a5\u8d77\u6765\uff0c**\u5982\u679c\u8fd9\u6761\u7ebf\u6bb5\u4e0e\u5706\u53ea\u6709\u4e00\u4e2a\u4ea4\u70b9\uff0c\u90a3\u4e48\u5c31\u8bf4\u660e\u4e00\u4e2a\u70b9\u5728\u5706\u5185\uff0c\u53e6\u4e00\u4e2a\u70b9\u5728\u5706\u5916**\u3002\n\n\u6211\u4eec\u7684\u601d\u8def\u5c31\u6709\u4e86\uff0c\u5148\u6839\u636e\u8fd9 $2$ \u70b9\u7b97\u76f4\u7ebf\u89e3\u6790\u5f0f\uff0c\u518d\u7b97\u4e0e\u5706\u7684\u4ea4\u70b9\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u4ea4\u70b9\u5728\u7ebf\u6bb5\u4e0a\u90a3\u4e48\u5c31\u9700\u8981\u7834\u5899\u3002\n\n\u5982\u56fe\uff1a\n![](https://s1.ax1x.com/2020/06/25/N0IHQs.png)\n\n\u6211\u4eec\u5047\u8bbe $A(x_1, y_1), B(x_2, y_2), O(x_3, y_3)$\uff0c\u534a\u5f84\u4e3a $r$\u3002\n\n\u53ef\u5f97\uff1a\n$$\n\\left\\{ \\begin{array}{l}\n        y=\\frac{\\left( y_1-y_2 \\right)}{\\left( x_1-x_2 \\right)}x+\\left( y_1-x_1\\cdot \\frac{\\left( y_1-y_2 \\right)}{\\left( x_1-x_2 \\right)} \\right) \\ \\\\\n        \\left( x-x_3 \\right) ^2+\\left( y-y_3 \\right) ^2=r^2\\ \\\\\n\\end{array} \\right.\n$$\n\n\u5c06 $\u2460$ \u5f0f\u5e26\u5165 $\u2461$ \u5f0f\u5316\u7b80\u5f97\uff1a\n$$\n\\left( 1+{k_1}^2 \\right) x^2+\\left( 2b_1k_1-2x_3-2y_3k_1 \\right) x+\\left({b_1}^2-2y_3+b_1 \\right) =0\n\\\\\n$$\n$b_1$ \u548c $k_1$ \u4e3a\u76f4\u7ebf $y$ \u7684\u659c\u7387\u548c\u7cfb\u6570\u3002\n\n\u5219\u5404\u9879\u7cfb\u6570 $a,b,c$ \u4e3a\uff1a\n$$\n\\begin{array}{l}\n        a=\\left( {1+k_{1}}^{2} \\right)\\\\\n        b=\\left( 2b_1k_1-2x_3-2y_3k_1 \\right)\\\\\n        c=\\left( {b_{1}}^{2}-2y_3+b_1 \\right)\\\\\n\\end{array}\n$$\n\u89e3\u6b64\u4e00\u5143\u4e8c\u6b21\u65b9\u7a0b\u5373\u53ef\u5f97\u5230\u4ea4\u70b9\u3002\n\n\u5224\u65ad\u4ea4\u70b9\u662f\u5426\u5728\u7ebf\u6bb5\u4e0a\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6 $O\\left( n\\cdot k \\right) $\u3002\n\n\u8be6\u7ec6\u89c1\u4ee3\u7801\u3002\n### Code:\n```cpp\n// P2778 [AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab\n#include <cmath>\n#include <cstdio>\n#include <iostream>\n#define ops 1e-7\n#define MN 8010\n#define d(x1, y1, x2, y2) ((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2))\nusing namespace std;\ninline int read() {\n  int x = 0, f = 1;\n  char ch = getchar();\n  while (ch < '0' || ch > '9') {\n    if (ch == '-') f = -1;\n    ch = getchar();\n  }\n  while (ch >= '0' && ch <= '9')\n    x = (x << 1) + (x << 3) + (ch ^ 48), ch = getchar();\n  return x * f;\n}\nstruct circle {\n  int x, y, r;\n} cs[MN];\nint n, q;\nint main() {\n  n = read();\n  for (int i = 1; i <= n; i++)\n    cs[i].x = read(), cs[i].y = read(), cs[i].r = read();\n  q = read();\n  while (q--) {\n    int x1 = read(), y1 = read(), x2 = read(), y2 = read(), ans = 0;\n    if (x1 > x2) swap(x1, x2), swap(y1, y2);\n    if (x1 == x2) {\n      for (int i = 1; i <= n; i++) {\n        int x3 = cs[i].x, y3 = cs[i].y, r = cs[i].r, sum = 0;\n        double delta = r * r - (x1 - x3) * (x1 - x3);\n        // printf(\"%.2f\", delta);\n        if (delta > ops) {\n          double s1 = sqrt(delta) + y3, s2 = y3 - sqrt(delta);\n          if (y1 < s1 && s1 < y2) sum++;\n          if (y1 < s2 && s2 < y2) sum++;\n        }\n        if (sum == 1) ans++;\n      }\n    } else if (y1 == y2) {\n      for (int i = 1; i <= n; i++) {\n        int x3 = cs[i].x, y3 = cs[i].y, r = cs[i].r, sum = 0;\n        double delta = r * r - (y1 - y3) * (y1 - y3);\n        if (delta > ops) {\n          double s1 = sqrt(delta) + x3, s2 = x3 - sqrt(delta);\n          if (x1 < s1 && s1 < x2) sum++;\n          if (x1 < s2 && s2 < x2) sum++;\n        }\n        if (sum == 1) ans++;\n      }\n    } else {\n      double k1 = double(y1 - y2) / double(x1 - x2), b1 = y1 - k1 * x1;\n      for (int i = 1; i <= n; i++) {\n        int x3 = cs[i].x, y3 = cs[i].y, r = cs[i].r, sum = 0;\n        // \u6c42\u4ea4\u70b9\n        // \u8054\u7acb y = k1x + b1y;\n        //     (x - x3)^2 + (y - y3)^2 = r^2;\n        double a = 1 + k1 * k1, b = (2 * b1 * k1 - 2 * x3 - 2 * y3 * k1),\n               c = (b1 * b1 - 2 * y3 * b1 + x3 * x3 + y3 * y3 - r * r);\n        double delta = b * b - 4 * a * c;\n        // printf(\"%.2f %.2f %.2f %.2f\", a, b, c, delta);\n        if (delta > ops) {\n          double s1 = (-b + sqrt(delta)) / 2 / a,\n                 s2 = (-b - sqrt(delta)) / 2 / a;\n          // printf(\" %.2f %.2f\", s1, s2);\n          if (x1 < s1 && s1 < x2) sum++;\n          if (x1 < s2 && s2 < x2) sum++;\n        }\n        if (sum == 1) ans++;\n      }\n    }\n    printf(\"%d\\n\", ans);\n  }\n  return 0;\n}\n```",
        "postTime": 1593063985,
        "uid": 289573,
        "name": "wtxy2006",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2778 \u3010[AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab\u3011"
    },
    {
        "content": "\u6211\u6765\u8bf4\u4e00\u4e0b\u601d\u8def\u548c\u6bd4\u8f83\u91cd\u8981\u7684\u4ee3\u7801\u5427\n\n\u9996\u5148\u5462\uff0c\u505a\u8fd9\u9053\u9898\u6211\u4e3b\u8981\u7528\u7684\u662f\u6709\u5173\u5706\u5728\u7b1b\u5361\u5c14\u5750\u6807\u7cfb\u4e0a\u7684\u4f4d\u7f6e\u5173\u7cfb\uff1a\n\n\u5047\u8bbe\u5728\u5750\u6807\u7cfb\u4e0a\u6709\u4e00\u4e2a\u5706\uff0c\u5706\u5fc3\u7684\u5750\u6807\u4e3a(x,y)\uff0c\u5f53\u524d\u7684\u5750\u6807\u662f(x1,y1)\uff0c\u90a3\u4e48\u6709\uff1a\n\n1\u3001\u5982\u679c(x1-x)\u00b2+(y1-y)\u00b2<r\u00b2\uff0c\u5219\u8be5\u70b9\u5728\u5706\u5185\n\n2\u3001\u5982\u679c(x1-x)\u00b2+(y1-y)\u00b2=r\u00b2\uff0c\u5219\u8be5\u70b9\u5728\u5706\u4e0a\n\n3\u3001\u5982\u679c(x1-x)\u00b2+(y1-y)\u00b2>r\u00b2\uff0c\u5219\u8be5\u70b9\u5728\u5706\u5916\n\n\u90a3\u4e48\uff0c\u77e5\u9053\u8fd9\u4e2a\u4e4b\u540e\u89e3\u51fa\u8fd9\u9898\u5c31\u4e0d\u96be\u4e86\n\n\u9996\u5148\uff0c\u6253\u4e00\u4e2a\u51fd\u6570\uff0c\u5224\u5b9a\u5728\u4e0d\u5728\u5706\u5916\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u7a0b\u5e8f\u5b9e\u73b0\uff1a\n\n```\nint fun(int xx,int yy,int k)//\u662f\u5426\u5728\u5706\u5185(\u6839\u636e\u5706\u5728\u7b1b\u5361\u5c14\u5750\u6807\u7cfb\u7684\u6027\u8d28\u53ef\u5f97)\n{\n\tif((x[k]-xx)*(x[k]-xx)+(y[k]-yy)*(y[k]-yy)>r[k]*r[k])\n\treturn 0;//\u5706\u5916 \n\telse \n\treturn 1;//\u5706\u5185 \n}\n```\n\n\u90a3\u4e48\u4e3b\u7a0b\u5e8f\u600e\u4e48\u505a\u5462\uff1f\n\n\u6211\u4eec\u60f3\u4e00\u4e0b\uff0c\u5982\u679c\u6211\u4eec\u5224\u5b9a\u4e86\u8fd9\u4e2a\u70b9\u5728\u4e0d\u5728\u5706\u5916\u9762\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd9\u6837\u505a\n\n\u5982\u679c\u6709\u4e00\u4e2a\u70b9\u5728\u5706\u5916\u9762\uff0c\u53e6\u4e00\u4e2a\u5728\u91cc\u9762\uff0c\u5219\u9700\u8981\u5c06\u6253\u7834\u7684\u5899\u7684\u6570\u91cf++\n\n\u5426\u5219\uff0c\u5c31\u4e0d\u9700\u8981\u52a0\u4e86\n\n\u6240\u4ee5\uff0c\u4e3b\u51fd\u6570\u7684\u4e3b\u8981\u7a0b\u5e8f\u6bb5\u957f\u8fd9\u6837\u7684\uff1a\n\n```\nint sum=0;\ncin>>x1>>y1>>x2>>y2;\nfor(j=1;j<=n;j++)\nif(fun(x1,y1,j)+fun(x2,y2,j)==1)\nsum+=1;\ncout<<sum<<endl;\n```\n\n\u5982\u679c\u8981\u6267\u884cq\u4e2a\u8be2\u95ee\uff0cq\u6b21\u8fd9\u4e2a\u5faa\u73af\u5c31\u53ef\u4ee5\u4e86",
        "postTime": 1520776618,
        "uid": 51135,
        "name": "\u661f\u4e4b\u6d77",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2778 \u3010[AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab\u3011"
    },
    {
        "content": "######\u5f88\u7b80\u5355\uff0c\u4e24\u4e2a\u4eba\u53ea\u8981\u5728\u4e00\u4e2a\u5708\u91cc\uff0c\u5c31\u4e0d\u7528\u51b2\u7834\u5899\uff1b\u4e0d\u5728\u4e00\u5757\u5c31\u4f7f\u89e3++\u3002\u5176\u6b21\u662f\u6548\u7387\u95ee\u9898\u3002\n\nvar\ncircle:array[1..8000] of record\n\n```cpp\n    x,y:longint;\n    r:int64;\n  end;\n  s,i,j,n,q,a,b,c,d:longint;\nbegin\n  readln(n);\n  for i:=1 to n do\n   with circle[i] do\n   begin\n    readln(x,y,r);\n    r:=r*r;\n   end;\n  readln(q);\n  for i:=1 to q do\n   begin\n     readln(a,b,c,d);\n     s:=0;\n     for j:=1 to n do\n      with circle[j] do\n      if (sqr(a-x)+sqr(b-y)<=r) xor (sqr(c-x)+sqr(d-y)<=r) then inc(s);\n     writeln(s);\n   end;\nend.\n###\u8bc4\u6d4b\u8fc7\u4e86\uff0c\u4e0d\u5fc5\u62c5\u5fc3\n```",
        "postTime": 1467030334,
        "uid": 7706,
        "name": "AC_Evil",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2778 \u3010[AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2778)\n\n\n\n------------\n\u770b\u4e86\u5b98\u65b9\u9898\u89e3\uff0c\u89c9\u5f97\u7a0d\u8bb8\u6709\u4e9b\u590d\u6742\u3002\u8fd9\u9053\u9898\u4f5c\u4e3a\u4e00\u9053\u521d\u4e2d\u7ec4\u7684\u7701\u9009\u9898\u8fd8\u662f\u6709\u4e00\u5b9a\u601d\u7ef4\u96be\u5ea6\u7684\u3002\n\n\u770b\u5230\u9898\u76ee\uff0c\u6211\u4eec\u601d\u8003\u7684\u662f\uff0c\u600e\u4e48\u5224\u65ad\u5c0f\u96ea\u548c\u5c0f\u53ef\u53ef\u4e2d\u95f4\u7684\u5899\u7684\u6570\u91cf\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5c06\u9898\u76ee\u8f6c\u6362\u4e00\u4e0b\uff0c\u6211\u4eec\u628a\u6bcf\u4e2a\u5706\u90fd\u5224\u65ad\u4e00\u904d\uff0c\u90a3\u4e48\uff0c\u5982\u679c\u5c0f\u96ea\u5728\u5706\u5185\uff0c\u5c0f\u53ef\u53ef\u4e0d\u5728\u5706\u5185\uff0c\u90a3\u4e48\u5c31\u5f97\u6253\u6389\u4e00\u5835\u5899\u3002\u4ee5\u6b64\u7c7b\u63a8\uff0c\u6709 $ n $ \u5835\u5899\uff0c\u6211\u4eec\u53ea\u9700\u8981\u628a\u6bcf\u5835\u5899\u90fd\u5224\u65ad\u4e00\u4e0b\uff0c\u5982\u679c\u8bf4\u5c0f\u96ea\u5728\u5708\u5185\uff0c\u5c0f\u53ef\u53ef\u4e0d\u5728\u5708\u5185\uff0c\u5c31\u5f97\u6253\u6389\u4e00\u5835\u5899\uff0c\u8fd9\u8fd8\u662f\u597d\u7406\u89e3\u7684\u3002\n\n\u90a3\u4e48\uff0c\u600e\u4e48\u5224\u65ad\u5c0f\u53ef\u53ef\u548c\u5c0f\u96ea\u662f\u5426\u5728\u5708\u5185\u5462\uff1f\n\n\u6211\u4eec\u53ea\u9700\u8981\u7528\u4e00\u4e2a\u8ddd\u79bb\u516c\u5f0f\uff0c\u5224\u65ad\u5c0f\u53ef\u53ef\u548c\u5c0f\u96ea\u5230\u5706\u5fc3\u7684\u8ddd\u79bb\u662f\u5426\u5c0f\u4e8e\u5706\u5fc3\u7684\u534a\u5f84\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u4e3b\u8981\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n\nlong long jl(long long x1,long long y1,long long x2,long long y2){\n\treturn (x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);\n\t//\u4e3a\u4ec0\u4e48\u4e0d\u52a0sqrt\uff1f\n\t//\u4e3a\u4e86\u65b9\u4fbf\u540e\u9762\u534a\u5f84\u7684\u8ba1\u7b97\uff0c\u7701\u53bb\u4e86\u03c0 \n}\nbool check(int i){\n\tbool f1=jl(x[i],y[i],a,b)<r[i]*r[i];\n\t//\u5c0f\u96ea\u662f\u5426\u5728\u5706\u5185 \n\tbool f2=jl(x[i],y[i],c,d)<r[i]*r[i];\n\t//\u5c0f\u53ef\u53ef\u662f\u5426\u5728\u5706\u5185 \n\treturn (!f1&&f2)||(f1&&!f2);//\u5f53\u5176\u4e2d\u6709\u4e00\u4e2a\u4e0d\u5728\u5706\u5185\u65f6\u5c31\u8981\u7834\u574f\u4e00\u5835\u5899 \n}\n\n\n```\n",
        "postTime": 1662860503,
        "uid": 446093,
        "name": "Fist_PROF",
        "ccfLevel": 0,
        "title": "P2778\u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u7b80\u8ff0\uff1a\u7ed9\u51fa $n$ \u4e2a\u4e0d\u76f8\u4ea4\u4e0d\u91cd\u5408\u4e0d\u76f8\u5207\u7684\u5706\uff0c\u7ed9\u51fa\u4e24\u4e2a\u70b9 $a$ \u548c $b$ \u7684\u5750\u6807\uff0c\u95ee\u82e5\u8981\u5728\u8fd9\u4e24\u4e2a\u70b9\u4e4b\u95f4\u753b\u66f2\u7ebf\uff0c\u8fd9\u6761\u7ebf\u81f3\u5c11\u7ecf\u8fc7\u51e0\u4e2a\u5706\u3002\n\n\u9996\u5148\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u4e00\u4e2a\u5706\u5f62\u5305\u542b\u4e86 $a$ \u548c $b$\uff0c\u90a3\u4e48\u4e0d\u4f1a\u7ecf\u8fc7\u8fd9\u4e2a\u5706\u3002\u5982\u679c\u4e00\u4e2a\u5706\u5f62\u65e2\u4e0d\u5305\u542b $a$ \u4e5f\u4e0d\u5305\u542b $b$\uff0c\u4e5f\u4e0d\u4f1a\u7ecf\u8fc7\u8fd9\u4e2a\u5706\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c**\u5bf9\u4e8e\u4e00\u4e2a\u5706\uff0c\u82e5\u5b83\u53ea\u5305\u542b $a$ \u6216\u8005 $b$ \u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u5706\u4e00\u5b9a\u4f1a\u88ab\u7ecf\u8fc7\u3002**\n\n\u90a3\u4e48\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u70b9\u662f\u5426\u5728\u5706\u5185\u5462\uff1f\u663e\u7136\uff0c\u53ea\u9700\u8981\u5224\u65ad\u8fd9\u4e2a\u70b9\u4e0e\u5706\u5fc3\u7684\u8ddd\u79bb\u662f\u5426\u8d85\u8fc7\u534a\u5f84\u5373\u53ef\u3002\n\n\u4e8e\u662f\u8003\u8651\u679a\u4e3e\u6bcf\u4e00\u4e2a\u5706\u5f62\uff0c\u82e5\u6ee1\u8db3\u6761\u4ef6\uff0c\u5219\u7b54\u6848\u6570\u91cf\u52a0 $1$\uff0c\u6700\u540e\u8f93\u51fa\u7b54\u6848\u3002\u6ce8\u610f\u672c\u9898\u6709\u591a\u6d4b\u3002\n\n```cpp\n#include <iostream>\n#include <cmath>\n\nusing namespace std;\n\nconst int N = 8010;\n\nint n, T;\nint x[N], y[N];\ndouble r[N];\n\ndouble dis(int x1, int y1, int x2, int y2) {\n    return sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n}\n\nbool is_in(int x1, int y1, int x2, int y2, double r) {\n    if (dis(x1, y1, x2, y2) < r) return true;\n    return false;\n}\n\nint main() {\n    cin >> n;\n    for (int i = 1; i <= n; i++) cin >> x[i] >> y[i] >> r[i];\n    cin >> T;\n    while (T--) {\n        int x1, x2, y1, y2;\n        cin >> x1 >> y1 >> x2 >> y2;\n        int ans = 0;\n        for (int i = 1; i <= n; i++)\n            if (is_in(x1, y1, x[i], y[i], r[i]) ^ is_in(x2, y2, x[i], y[i], r[i])) ans++;\n        cout << ans << endl;\n    }\n    return 0;\n}\n\n```",
        "postTime": 1660961534,
        "uid": 250983,
        "name": "wzmzmhk",
        "ccfLevel": 0,
        "title": "P2778 [AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab \u9898\u89e3"
    },
    {
        "content": "\u4e3b\u8981\u5224\u65ad\u5728\u4e0d\u5728\u5706\u91cc\u9762\n\n\u653e\u4ee3\u7801\n\n/\\*\n\u672c\u9898\u7b97\u6cd5\u601d\u60f3\n\n1\u3001\u5224\u65adab\u4e24\u4e2a\u70b9\u5230\u6bcf\u4e2a\u5706\u7684\u8ddd\u79bb\uff0c\u5982\u679ca\u5728\n\nb\u4e0d\u5728\u6216b\u5728a\u4e0d\u5728\u5219\u90fd\u9700\u8981\u6253\u5899\u5426\u5219\u53ef\u80fd\u662fab\u90fd\u5728\u4e00\u4e2a\n\n\u5708\u6216\u8005\u90fd\u4e0d\u5728\u5706\u4e2d\u5219\u4e0d\u9700\u8981\u6253\u5899\n\n(x1,y1)--(x2,y2) sqrt() \n\n\\*/\n    \n    \n```cpp\n#include<iostream>\n#include<cmath>    \nusing namespace std;\nint x[8001],y[8001],r[8001];//\u4fdd\u5b58\u6bcf\u4e2a\u5706\u7684\u5706\u5fc3\u5750\u6807\u548c\u534a\u5f84 \nint n,a,b,c,d,q,num;//\u6bcf\u6b21\u8f93\u5165\u5c0f\u96ea\u548c\u5c0f\u53ef\u53ef\u7684\u5750\u6807 \nint dis(int t1,int t2,int i)//\u5224\u65ad\u4e00\u4e2a\u70b9\u7684\u5750\u6807\u5728\u4e0d\u5728\u7b2ci\u4e2a\u5706\u4e2d\n{\n    if (((t1-x[i])*(t1-x[i])+(t2-y[i])*(t2-y[i]))<=r[i]*r[i]) return 1;//\u5728\u5706\u4e2d \n    else return 0; \n} \nvoid read()\n{\n    int i,j,k;\n    cin>>n;\n    for (i=1;i<=n;i++)\n    {\n         cin>>x[i]>>y[i]>>r[i];\n    }    \n    cin>>q;\n    for (i=1;i<=q;i++)\n    {\n        num=0;\n        cin>>a>>b>>c>>d; \n        for (j=1;j<=n;j++)\n        {\n            if(dis(a,b,j)==1&&dis(c,d,j)==0) num++;//a\u5728b\u4e0d\u5728\n            else if (dis(a,b,j)==0&&dis(c,d,j)==1) num++;\n        }\n        cout<<num;\n    }\n} \nint main()\n{\nread();\n    return 0;\n}\n```\n/\\*\n3\n0 0 1\n3 0 1\n2 0 4\n1\n0 0 3 0\n\n\\*/",
        "postTime": 1487479818,
        "uid": 20420,
        "name": "\u7761\u5728\u5899\u4e0a\u7684\u732b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2778 \u3010[AHOI2016\u521d\u4e2d\u7ec4]\u8ff7\u5bab\u3011"
    }
]
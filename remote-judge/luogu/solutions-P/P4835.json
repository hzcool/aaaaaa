[
    {
        "content": "\u62a2\u4e00\u4e2a\u7b2c\u4e00QAQ\n\n\u8003\u8651\u76f4\u63a5\u66b4\u529b\u679a\u4e3e\u7b54\u6848\u3002\u679a\u4e3e\u7b54\u6848\u4e4b\u540e\u4f1a\u600e\u4e48\u6837\u5462\uff1f\n\n\u5047\u8bbe\u7b54\u6848\u662fans\uff0c\u90a3\u4e48\u6bcf\u4e2a\u4eba\u90fd\u548c\u4ed6\u7684\u6392\u540d\u5217\u8868\u4e0a\u5012\u6570n-ans-1\u4e2a\u4eba**\u4e0d\u5728**\u540c\u4e00\u5802\u8bfe\u3002\n\n\u90a3\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4e00\u4e2a\u7b54\u6848\u662f\u5408\u6cd5\u7684\u5462\uff1f\u6211\u4eec\u8981\u7528**2-sat**\u7b97\u51fa\u4e00\u4e2a\u7b54\u6848\u662f\u5426\u6709\u5408\u6cd5\u89e3\u3002\n\n\u6bcf\u4e2a\u4eba\u90fd\u6709\u4e24\u79cd\u9009\u8bfe\u7684\u9009\u62e9\uff0c\u6211\u4eec\u5c31\u5bf9\u6bcf\u4e2a\u4eba\u5f00\u4e24\u4e2a\u70b9\u3002\n\n\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e2a\u4eba\u90fd\u5bf9\u548c\u4ed6\u4e0d\u80fd\u5728\u540c\u4e00\u5802\u8bfe\u7684\u4eba\u5efa\u7acb\u5173\u7cfb\u3002\n\nA\u4e0d\u80fd\u548cB\u5728\u540c\u4e00\u5802\u8bfe\u7684\u65f6\u5019\uff0c\u81f3\u5c11\u6709\u4e00\u5802\u8bfe\uff0c\u4ed6\u4eec\u4fe9\u8981\u4e00\u8d77\u4e0a\uff1bA\u76f8\u5bf9\u5e94\u7684\u8fd9\u5802\u8bfe\u7684\u70b9\u5c31\u5411B\u53e6\u4e00\u5802\u8bfe\u7684\u70b9\u76f8\u8fde\uff1b\u6ce8\u610f\u8fde\u4e0a\u53e6\u5916\u4e24\u4e2a\u6ca1\u6709\u53c2\u4e0e\u7684\u70b9\u7684\u53cd\u5411\u8fb9\u3002\u8fd9\u91cc\u81ea\u5df1\u53bb\u63a8\u5bfc\u63a8\u5bfc\u5c31\u597d\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define other(i, k) ((k+1)%3==a[i]?(k+2)%3:(k+1)%3)\nusing namespace std;\nconst int N = 2005;\nint n, a[N], pos[N][3];\nint b[N][N];\nint dfn[N], low[N], col[N], sta[N], dfs_num, col_num, top; \nvector<int> e[N];\nvoid tarjan(int u){\n\tdfn[u] = low[u] = ++dfs_num;\n\tsta[++top] = u;\n\tfor (int i = 0; i < e[u].size(); i++){\n\t\tint v = e[u][i];\n\t\tif (!dfn[v]){\n\t\t\ttarjan(v);\n\t\t\tlow[u] = min(low[v], low[u]);\n\t\t}else if (!col[v]) low[u] = min(dfn[v], low[u]);\n\t}\n\tif (dfn[u] == low[u]){\n\t\tcol_num++;\n\t\tdo{\n\t\t\tcol[sta[top]] = col_num;\n\t\t}while (sta[top--] != u);\n\t}\n}\nint main(){\n\tstd::ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n//\tfreopen(\"in.txt\", \"r\", stdin);\n//\tfreopen(\"out.out\", \"w\", stdout);\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++){\n\t\tcin >> a[i];\n\t\tswitch (a[i]){\n\t\t\tcase 0: pos[i][1] = i*2-1, pos[i][2] = i*2; break;\n\t\t\tcase 1: pos[i][0] = i*2-1, pos[i][2] = i*2; break;\n\t\t\tcase 2: pos[i][0] = i*2-1, pos[i][1] = i*2; break;\n\t\t}\n\t\tfor (int j = 1; j < n; j++)\n\t\t\tcin >> b[i][j];\n\t}\n\tfor (int t = 1; t < n; t++){\n\t\tfor (int j = 1; j <= n; j++){\n\t\t\tint v = b[j][n-t];\n\t\t\tfor (int k = 0; k < 3; k++)\n\t\t\t\tif (pos[j][k] && pos[v][k]){\n\t\t\t\t\te[pos[j][k]].push_back(pos[v][other(v, k)]);//\u81ea\u5df1\u4e0a\u67d0\u5802\u8bfe\u7684\u65f6\u5019\u53e6\u4e00\u4e2a\u4eba\u5fc5\u987b\u4e0a\u53e6\u4e00\u5802\u8bfe\n\t\t\t\t\te[pos[v][k]].push_back(pos[j][other(j, k)]);//\u53cd\u8fc7\u6765\u4e00\u6837\n\t\t\t\t}\n\t\t}\n\t\tdfs_num = col_num = top = 0;\n\t\tmemset(dfn, 0, sizeof(dfn));\n\t\tmemset(low, 0, sizeof(low));\n\t\tmemset(col, 0, sizeof(col));\n\t\tfor (int i = 1; i <= n*2; i++)//2sat\u8fc7\u7a0b\n\t\t\tif (!dfn[i])\n\t\t\t\ttarjan(i);\n\t\tfor (int i = 1; i <= n; i++)//\u8fd9\u91cc\u662f\u5224\u5b9a\n\t\t\tif (col[i*2-1] == col[i*2]){\n\t\t\t\tcout << n-t;\n\t\t\t\treturn 0;\n\t\t\t}\n\t}\n\tcout << 0;//\u6240\u6709\u8fde\u8fb9\u90fd\u7b26\u5408\u6761\u4ef6\uff08\u867d\u7136\u4e0d\u5927\u53ef\u80fd\uff09\n\treturn 0;\n}\n```\n\u4e0a\u6b21\u6392\u7248\u6ca1\u6392\u597d\uff0c\u8fd9\u6b21\u6392\u597d\u4e86\uff0c\u6c42\u901a\u8fc7awa",
        "postTime": 1613142242,
        "uid": 171288,
        "name": "Tony2",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P7322 \u3010[JSOI2014] \u5b66\u751f\u9009\u8bfe\u3011"
    }
]
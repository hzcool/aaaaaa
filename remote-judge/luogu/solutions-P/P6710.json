[
    {
        "content": "\u66b4\u529b\u4e0d\u884c\uff0c\u8003\u8651 dp\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u5e94\u8be5\u6e05\u695a\u7684\u662f\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u80fd\u591f\u5f71\u54cd\u7b54\u6848\u7684\u53ea\u6709\u5176\u4e2d\u7684 `*` \u4e86\u3002\u5982\u679c\u8be5\u5b57\u7b26\u4e32\u6ca1\u6709`*` \u7684\u8bdd\uff0c\u90a3\u5b83\u7684\u7b54\u6848\u5c31\u662f $1$ \u4e86\u3002\uff08\u6837\u4f8b3\uff09\n\n### \u8003\u8651\u72b6\u6001\n\n\u7b2c\u4e00\u7ef4\u80af\u5b9a\u662f\u5f53\u524d\u5230\u4e86\u7b2c $i$ \u4e2a\u4f4d\u7f6e\u4e86\u3002\u800c\u540e\u5462\uff0c\u9996\u5148\u53ef\u4ee5\u8003\u8651\u518d\u5f00\u56db\u7ef4\u5206\u522b\u6307\u4ee3\u9898\u76ee\u4e2d\u7684\u56db\u4e2a\u9650\u5236\u3002\u4f46\u8fd9\u6837\u4f3c\u4e4e\u6709\u70b9\u6d6a\u8d39\u7a7a\u95f4\uff0c\u800c\u4e14\u8f6c\u79fb\u65f6\u4e5f\u4e0d\u592a\u597d\u8f6c\u79fb\u3002\u6240\u4ee5\u518d\u538b\u7f29\u7a7a\u95f4\uff0c\u7528 $dp[i][j][k][l]$ \u6765\u8868\u793a\u5f53\u524d\u7b2c $i$ \u4e2a\u4f4d\u7f6e\uff0c\u8fde\u7eed\u76f8\u540c\u7684\u5b57\u7b26 $j$ \u4e2a\uff0c\u76f8\u540c\u79cd\u7c7b\u7684\u5b57\u7b26 $k$ \u4e2a\uff0c\u5f53\u524d\u4f4d\u7f6e\u4e3a $l$ \u7684\u72b6\u6001\u3002\u53ef\u4ee5\u7701\u6389\u4e00\u7ef4\u3002\n\n~~\u8fd9\u6837\u770b\u6765\u4f3c\u4e4e\u6709\u70b9\u50cf\u6570\u4f4d dp \u4e86\u5462~~\n\n### \u8003\u8651\u8f6c\u79fb\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u5f53\u524d\u4f4d\u7f6e\u4e3a `*` \u65f6\uff0c\u6216\u8005\u679a\u4e3e\u5b57\u7b26\u521a\u597d\u662f\u8be5\u4f4d\u5b57\u7b26\u65f6\uff0c\u624d\u4f1a\u8fdb\u884c\u8f6c\u79fb\u3002\n\n\u5982\u679c\u8be5\u4f4d\u5b57\u7b26\u5df2\u7ecf\u56fa\u5b9a\uff0c\u5219\u76f4\u63a5\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u5982\u679c\u4e24\u4e2a\u5b57\u7b26\u76f8\u540c\uff0c\u5219\u6709\n\n$dp_{i,j,k,s}=dp_{i,j,k,s}+dp_{i-1,j-1,k-1,s}$\n\n\u800c\u5982\u679c\u4e0d\u4e00\u6837\uff0c\u4f46\u662f\u540c\u79cd\u7c7b\uff0c\u5219\u6709\n\n$dp_{i,j,1,s}=dp_{i,j,1,s}+dp_{i-1,j-1,l-1,s_0}$\n\n\u5982\u679c\u5b8c\u5168\u4e0d\u4e00\u6837\uff0c\u4e14\u79cd\u7c7b\u4e5f\u4e0d\u4e00\u6837\uff0c\u5219\u6709\n\n$dp_{i,1,1,s}=dp_{i,1,1,s}+dp_{i-1,j,k,l}$\n\n\u8fd9\u5c31\u662f\u4e09\u79cd\u60c5\u51b5\u3002\n\n### \u7b54\u6848\u7684\u7edf\u8ba1\n\n$res=\\sum\\limits_{j=1,k=1}^{j=C_{type},k=E_{type}}dp_{n,j,k,s_n}$\n\n\u5c31\u597d\u4e86\u3002\n\n\u8fd9\u79cd dp\uff0c\u5982\u679c\u80fd\u60f3\u5230\u7684\u8bdd\uff0c\u5176\u5b9e\u8fd8\u662f\u86ee\u7b80\u5355\u7684\u3002\n\nAC Code:\n``` cpp\n\n\u7701\u7565\u4e86\u5197\u957f\u7684\u9884\u5904\u7406\nint E[3],C[3],val[30];\nll dp[30][30][30][30];\nchar str[30];\ninline bool expr(int b)\n{\n    if(b==0||b==4||b==8||b==14||b==20) return 1;\n    return 0;\n}\nint main()\n{\n    // freopen(\"dp.in\",\"r\",stdin);\n    // freopen(\"dp.out\",\"w\",stdout);\n    read(E[1],C[1],E[0],C[0]);\n    scanf(\"%s\",str+1);\n    int len=strlen(str+1);\n    for(int i=1;i<=len;++i)\n        if(str[i]=='*') val[i]=26;\n        else val[i]=str[i]-'a';\n    for(int i=0;i<=25;++i)\n        if(val[1]==26||val[1]==i)\n            dp[1][1][1][i]=1;\n    for(int i=2;i<=len;++i)\n        for(int s_now=0;s_now<=25;++s_now)\n            if(val[i]==26||val[i]==s_now)\n                for(int k=0;k<=25;++k)\n                    if(val[i-1]==26||val[i-1]==k)\n                    {\n                        bool flag_s=expr(s_now),flag_k=expr(k);\n                        if(flag_s==flag_k)\n                            if(s_now==k)\n                                for(int l=2;l<=C[flag_s];++l)\n                                    for(int I=2;I<=E[flag_s];++I)\n                                        dp[i][l][I][s_now]+=dp[i-1][l-1][I-1][k];\n                            else\n                                for(int l=2;l<=C[flag_s];++l)\n                                    for(int I=1;I<=E[flag_s];++I)\n                                        dp[i][l][1][s_now]+=dp[i-1][l-1][I][k];\n                        else\n                            for(int l=1;l<=C[flag_k];++l)\n                                for(int I=1;I<=E[flag_k];++I)\n                                    dp[i][1][1][s_now]+=dp[i-1][l][I][k];\n                    }\n    ll res=0;\n    for(int i=0;i<=25;++i)\n        if(val[len]==i||val[len]==26)\n        {\n            int flag_n=expr(i);\n            for(int j=1;j<=C[flag_n];++j)\n                for(int k=1;k<=E[flag_n];++k)\n                    res+=dp[len][j][k][i];\n        }\n    printf(\"%lld\",res);\n    return 0;\n}\n/*\n4 4 4 4\nman****ipt\n*/\n\n```\n\n\u8d3a\u9898\u5e76\u4e0d\u662f\u4e00\u4e2a\u597d\u4e60\u60ef\u5462\u3002\n\n### \u53e6\u8bdd\n\n\u8fd8\u6709 $20$ \u5929\u5c31\u4e2d\u8003\u4e86\uff0c\u5e0c\u671b\u4e0d\u8981\u518d\u6539\u9898\u89e3\u4e86\uff0c\u4e00\u904d\u8fc7\u3002\u4e5f\u662f\u65f6\u5019\u5b66\u5b66\u540c\u673a\u623f\u5de8\u4f6c\u6682\u65f6 $AFO$ \u4e00\u4e0b\u4e86\u3002\u4e03\u6708\u518d\u6218\u5427\uff01 $OI$ \uff01\n\n\u63a8\u4e00\u6ce2\u849f\u84bb\u7684[\u535a\u5ba2](https://violeteternal.github.io/Eternity/)",
        "postTime": 1651903195,
        "uid": 444040,
        "name": "_Eternal_",
        "ccfLevel": 0,
        "title": "P6710 [BalticOI 2005] Ancient Manuscript \u9898\u89e3"
    },
    {
        "content": "\n# P6710 [BalticOI 2005] Ancient Manuscript\u9898\u89e3\n\u3010\u89e3\u6790\u3011\n\n~~\u770b\u5230\u9898\u76ee\u5148\u7206\u641c~~\u3002\n\n\u90a3\u5c31\u8ba1\u7b97\u4e00\u4e0b\uff0c\u5047\u8bbe\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a n\uff0c\u5219\u5b57\u7b26\u4e32\u6700\u591a\u6709 n \u4e2a\u7a7a\uff0c\u6bcf\u4e2a\u7a7a\u6709 26 \u79cd\u53ef\u80fd\uff0c\u6700\u52a3\u590d\u6742\u5ea6\u53ef\u8fbe $ O(26^n) $\uff0c\u660e\u663e\u4e0d\u53ef\u53d6\u3002\n\n\u800c\u9898\u76ee\u6c42\u65b9\u6848\u6570\uff0c\u641c\u7d22\u4e0d\u884c\uff0c\u90a3\u5c31 dp\u3002\n\n\u8bbe $ dp_{i,j,k,l} $ \u8868\u793a\u524d i \u4f4d\uff0c\u8fde\u7eed\u76f8\u540c\u5b57\u6bcd j \u4e2a\uff0c\u8fde\u7eed\u76f8\u540c\u79cd\u7c7b\u5b57\u6bcd k \u4e2a\uff0c\u5f53\u524d\u5b57\u6bcd\u4e3a l \u7684\u65b9\u6848\u6570\u3002\u7531\u4e8e i , j , k , l \u7684\u8303\u56f4\u975e\u5e38\u5c0f\uff0c\u6240\u4ee5\u4e0d\u7528\u4f18\u5316\uff0c\u76f4\u63a5\u65e0\u8111 dp\u3002\n\n\n\u7a0d\u5fae\u601d\u8003\u5373\u53ef\u5f97\u51fa\u65b9\u7a0b\uff0c\u7531\u4e8e\u8fc7\u4e8e\u7e41\u7410\uff0c\u8fd9\u91cc\u51fa\u793a\u5173\u952e\u4ee3\u7801\u3002\n\n```\nflag[0]=flag[4]=flag[8]=flag[14]=flag[20]=1;//\u628a\u5143\u97f3\u5b57\u6bcd\u6253\u4e0a\u6807\u8bb0 \n    for(int i=0;i<26;i++){//\u5f53\u524d\u5b57\u7b26\u4e3a26\u8868\u793a\u8fd9\u4e2a\u7a7a\u9700\u8981\u586b\n    \tif(a[1]==26||a[1]==i){\n    \t \tdp[1][1][1][i]=1;\n\t\t}\n\t}\n    for(int i=2;i<=n;i++){\n        for(int j=0;j<26;j++){\n            if(a[i]==26||a[i]==j){\n            \tfor(int k=0;k<26;k++){\n                    if(a[i-1]==26||a[i-1]==k){\n                        int p=flag[j],q=flag[k];\n                        if(p==q){\n                            if(j==k){\n                            \tfor(int l=2;l<=c[p];l++){\n                                    for(int iee=2;iee<=e[p];iee++){\n                                        dp[i][l][iee][j]+=dp[i-1][l-1][iee-1][k];\n                                    }\n                                }\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tfor(int l=2;l<=c[p];l++){\n                                    for(int iee=1;iee<=e[p];iee++){\n                                        dp[i][l][1][j]+=dp[i-1][l-1][iee][k];\n                                    }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} \n                        }else{\n                        \tfor(int l=1;l<=c[q];l++){\n                                for(int iee=1;iee<=e[q];iee++){\n                                    dp[i][1][1][j]+=dp[i-1][l][iee][k];\n                                }\n                            }\n\t\t\t\t\t\t\t\t\t}\n                    }\n                }\n\t\t\t\t}\n        }\n    }\n    for(int i=0;i<26;i++){\n    \tif(a[n]==i||a[n]==26){\n           int p=flag[i];\n           for(int j=1;j<=c[p];j++){\n            \tfor(int k=1;k<=e[p];k++){\n            \t\tans+=dp[n][j][k][i];\n\t\t\t\t\t}\n\t\t\t\t}\n       }\n\t}\n   cout<<ans;\n```",
        "postTime": 1636984543,
        "uid": 368124,
        "name": "victoryang",
        "ccfLevel": 5,
        "title": "P6710 [BalticOI 2005] Ancient Manuscript\u9898\u89e3"
    }
]
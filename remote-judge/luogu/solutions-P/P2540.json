[
    {
        "content": "#\u66b4\u529b\u641c\u987a\u5b50,\u8d2a\u5fc3\u51fa\u6563\u724c\n\n##\u6597\u5730\u4e3b\u5927\u795e\u6559\u4f60\u5982\u4f55\u6253\u597d\u6597\u5730\u4e3b\n\n\u5176\u5b9e\u8fd9\u9898\u5df2\u7ecf\u964d\u4f4e\u4e86\u96be\u5ea6\uff0c\u56e0\u4e3a\u771f\u6b63\u7684\u6597\u5730\u4e3b\u98de\u673a\u53ef\u4ee5\u5e26\u7fc5\u8180\uff083\u987a\u53ef\u4ee5\u5e26\u724c\uff09\uff0c\u8fd9\u9898\u6539\u4e86\u89c4\u5219\u4e0d\u5141\u8bb8\u5e26\u7fc5\u8180\u7b80\u5355\u4e86\u5f88\u591a\uff08\u8fd9\u662f\u9898\u5916\u8bdd\uff09\u3002\u5176\u5b9e\u8fd9\u9898dp\u4e5f\u53ef\u4ee5\u505a\uff0c\u4f46\u8fd9\u6837\u4f60\u5e76\u6ca1\u6709\u638c\u63e1\u6597\u5730\u4e3b\u7684\u7cbe\u9ad3\uff0c\u8fd9\u91cc\u6211\u8bf4\u4e00\u4e0b\u4e0d\u7528dp\u7eaf\u9760\u8111\u7684\u505a\u6cd5\u3002\n\n##\u66b4\u529b\u641c\u987a\u5b50\n\n\u4e3a\u4ec0\u4e48\u987a\u5b50\u8981\u66b4\u529b\uff1f\n\n\u73a9\u8fc7\u6597\u5730\u4e3b\u7684\u90fd\u77e5\u9053\uff0c\u5e76\u4e0d\u662f\u51fa\u8d8a\u957f\u7684\u987a\u5b50\u8d8a\u597d\uff0c\u5982\u679c\u4f60\u6709\u4e00\u7ec4\u624b\u724c\uff0c3,4,5,6,7,6,7,8,9,10\uff0c\u4f60\u4e00\u4e0b\u628a\u6700\u957f\u7684\u51fa\u4e86\u53bb\uff0c\u4f60\u4f1a\u5355\u4e24\u5f20\u724c\uff0c\u4e0d\u5982\u51fa\u4e24\u4e2a\u987a\u5b50\uff0c\u6240\u4ee5\u987a\u5b50\u8981\u66b4\u529b\u3002\n\n##\u8d2a\u5fc3\u6253\u6563\u724c\n\n\u8fd9\u662f\u6838\u5fc3\u6240\u5728\uff0c\u4e5f\u662f\u4e0d\u8d85\u65f6\u7684\u539f\u56e0\u3002\n\n\u53ef\u4ee5\u5148\u7edf\u8ba1\u4e00\u4e0b\u4e0d\u540c\u724c\u4e2a\u6570\u7684\u7ec4\u6570\uff0c\u7136\u540e\u518d\u51fa\u724c\uff0c\n\n\u90a3\u5982\u4f55\u6253\u51fa\u6700\u4f18\u89e3\uff1f\n\n\u9996\u5148\u4e00\u5b9a\u8981\u5148\u51fa\u56db\u5e26\u4e8c\uff0c\u518d\u51fa\u4e09\u5e26\u4e00\uff0c\u8fd9\u662f\u5f88\u5bb9\u6613\u60f3\u5230\u7684\uff0c\u56e0\u4e3a\u56db\u5e26\u53ef\u4ee5\u5e26\u8d70\u4e24\u5f20\u3002\n\n\u8fd9\u6837\u5199\u6b63\u7684\u884c\u4e86\u5417\uff1f\n\n\u5f53\u7136\u4e0d\u884c\uff0c\u539f\u9898\u7684\u968f\u673a\u6570\u989d\u53ef\u4ee5\u8fc7\uff0c\u589e\u5f3a\u7248\u7684\u5fc5\u987b\u8003\u8651\u62c6\u724c\uff0c\u800c\u4e14\u8fd8\u8981\u8003\u8651\u738b\u70b8\u7684\u7279\u6b8a\u60c5\u51b5\uff0c\u738b\u7b97\u5355\u724c\uff0c\u4f46\u53ef\u4ee5\u5f53\u5bf9\u51fa\uff0c\u660e\u786e\u8fd9\u4e00\u70b9\u3002\n\n\uff08\u8fd9\u91cc\u5f88\u591a\u9898\u89e3\u90fd\u4e0d\u5bf9\uff0c\u53ea\u4e0d\u8fc7\u6570\u636e\u6c34\u8ba9\u4ed6\u4eec\u8fc7\u4e86\uff09\n\n###\u62c6\u724c\uff1a\n\n\u4ec0\u4e48\u65f6\u5019\u8be5\u62c6\u724c\u5462\uff0c\u5bf9\u724c\u9664\u4e86\u56db\u5e26\u7684\u60c5\u51b5\u4e0d\u80fd\u62c6\uff0c\u56e0\u4e3a\u62c6\u4e86\u53ef\u80fd\u591a\u6253\u4e00\u624b\u724c\u3002\n\n\u4ed4\u7ec6\u60f3\u60f3\uff0c\u4e09\u5f20\u548c\u70b8\u5728\u5355\u724c\u548c\u5bf9\u724c\u5f88\u591a\u7684\u65f6\u5019\u662f\u4e0d\u80fd\u62c6\u7684\uff0c\u62c6\u4e86\u5c31\u591a\u5927\u3002\n\n**\u5f53\u5355\u724c\u548c\u5bf9\u724c\u6570\u7684\u548c\u5c0f\u4e8e\u4e09\u5f20\u548c\u70b8\u7684\u548c\uff0c\u8fd9\u5c31\u53ef\u4ee5\u62c6\u4e86**\n\n\u56e0\u4e3a\u8fd9\u65f6\u4e0d\u62c6\u7684\u8bdd\u6ca1\u5f97\u5e26\uff0c\u53ea\u80fd\u5355\u51fa\uff0c\u5982\u679c\u628a\u4e09\u5f20\u62c6\u6210\u4e00\u5355\u548c\u4e00\u5bf9\uff0c\u8ba9\u5176\u4f59\u7684\u4e09\u5f20\u548c\u70b8\u5e26\u8d70\uff0c\u5c31\u4f1a\u5c11\u4e00\u6b65\u3002\n\n\u56db\u5f20\u7684\u540c\u7406\u3002\n\n\u8be6\u89c1\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define gc() getchar()\n#define isd isdigit\nusing namespace std;\nint n,t,ans;\nint pai[20];//\u5b58\u724c \nint san_pai();\nvoid feiji(int step);\nvoid shunzi(int step);\nvoid liandui(int step);\nint read() {\n    int x=0;\n    char ch=gc();\n    while(!isd(ch))ch=gc();\n    while(isd(ch))x=x*10+ch-'0',ch=gc();\n    return x;\n}\nvoid chupai(int step) {      //\u5f00\u59cb\u51fa\u724c \n    if(step>=ans)return ;   //\u6700\u4f18\u6027\u526a\u679d \n    int tmp=san_pai();      //\u6253\u6563\u724c \n    ans=min(tmp+step,ans); //\u66f4\u65b0\u6700\u4f18\u89e3 \n    feiji(step);  //\u98de\u673a \n    shunzi(step); //\u987a\u5b50 \n    liandui(step);//\u8fde\u5bf9 \n}\nvoid feiji(int step){//\u51fa\u98de\u673a \n    int l,end;\n    for(int st=3; st<=13; ++st) {//\u679a\u4e3e\u8fde\u7eed\u724c\u8d77\u59cb\u70b9 \n        l=0;\n        while(pai[st+l]>=3)l++;//\u627e\u51fa\u6700\u5927\u957f\u5ea6 \n        for(int j=l; j>=2; --j) {//\u679a\u4e3e\u51fa\u724c\u957f\u5ea6 \n            end=st+j-1;             \n            for(int k=st; k<=end; k++)pai[k]-=3;//\u51fa\u98de\u673a \n            chupai(step+1);//\u7ee7\u7eed\u51fa\u724c \n            for(int k=st; k<=end; k++)pai[k]+=3;//\u641c\u7d22\u56de\u6eaf \n        }\n    }\n    return;\n}\nvoid liandui(int step) {//\u8fde\u5bf9 \n    int l,end;\n    for(int st=3; st<=12; ++st) {//\u679a\u4e3e\u8fde\u7eed\u724c\u8d77\u59cb\u70b9 \n        l=0;\n        while(pai[st+l]>=2)l++;//\u627e\u51fa\u6700\u5927\u957f\u5ea6 \n        for(int j=l; j>=3; --j) {//\u679a\u4e3e\u51fa\u724c\u957f\u5ea6\n            end=st+j-1;\n            for(int k=st; k<=end; k++)pai[k]-=2;//\u51fa\u8fde\u5bf9 \n            chupai(step+1);//\u7ee7\u7eed\u51fa\u724c\n            for(int k=st; k<=end; k++)pai[k]+=2;//\u641c\u7d22\u56de\u6eaf\n        }\n    }\n    return;\n}\nvoid shunzi(int step) {//\u987a\u5b50 \n    int l,end;\n    for(int st=3; st<=10; ++st) {//\u679a\u4e3e\u8fde\u7eed\u724c\u8d77\u59cb\u70b9 \n        l=0;\n        while(pai[st+l]>=1)l++;//\u627e\u51fa\u6700\u5927\u957f\u5ea6 \n        for(int j=l; j>=5; --j) {\n            end=st+j-1;\n            for(int k=st; k<=end; k++)pai[k]-=1;//\u51fa\u987a\u5b50 \n            chupai(step+1);//\u7ee7\u7eed\u51fa\u724c\n            for(int k=st; k<=end; k++)pai[k]+=1;//\u641c\u7d22\u56de\u6eaf\n        }\n    }\n    return;\n}\nint san_pai() {//\u8d2a\u5fc3\u6253\u6563\u724c \n    int zs[5],num=0;\n    memset(zs,0,sizeof(zs));\n    bool wangzha=false;        \n    if(pai[1]==2)wangzha=true;//\u662f\u5426\u6709\u738b\u70b8 \n    zs[1]+=pai[1];            //\u738b\u7b97\u5355\u724c \n    for(int i=2; i<=14; ++i)zs[pai[i]]++;//\u7edf\u8ba1\u4e2a\u6570 \n    /******  \u66b4\u529b\u51fa\u5947\u8ff9  ******/\n    while(!zs[3]&&zs[1]==1&&zs[2]==1&&zs[4]>1)zs[4]-=2,zs[1]--,zs[2]--,num+=2;//\u795e\u7279\u5224 \n    //\u628a\u4e00\u4e2a\u70b8\u62c6\u62103\u5f20\u548c\u5355\u724c,\u518d\u51fa\u4e00\u7ec4\u56db\u5e26\u4e8c\u5355\u548c\u4e09\u5e26\u4e00 \n    while(!zs[2]&&zs[1]==1&&zs[4]==1&&zs[3]>1)zs[3]-=2,zs[1]--,zs[4]--,num+=2;//\u795e\u7279\u5224 \n    //\u628a\u4e00\u7ec4\u4e09\u5f20\u62c6\u6210\u4e00\u5bf9\u548c\u4e00\u5355,\u518d\u51fa\u4e00\u7ec4\u56db\u5e26\u4e8c\u5355\u548c\u4e09\u5e26\u4e8c \n    if(zs[3]+zs[4]>zs[1]+zs[2])//\u4e09\u56db\u5f20\u7684\u6bd4\u5355\u724c\u548c\u5bf9\u724c\u591a,\u62c6\u7740\u6253 \n        while(zs[4]&&zs[2]&&zs[3])zs[2]--,zs[3]--,zs[1]++,zs[4]--,num++;//\u62c6\u4e09\u5f20,4\u5e26\u4e24\u5bf9\u4f59\u4e00\u5355 \n    if(zs[3]+zs[4]>zs[1]+zs[2])//\u8fd8\u591a\u7ee7\u7eed\u62c6 \n        while(zs[4]&&zs[1]&&zs[3])zs[1]--,zs[3]--,zs[2]++,zs[4]--,num++;//\u62c6\u4e09\u5f20,4\u5e26\u4e24\u5355\u4f59\u4e00\u5bf9 \n    while(zs[4]&&zs[1]>1)zs[4]--,zs[1]-=2,num++;//\u56db\u5e26\u4e24\u5355 \n    while(zs[4]&&zs[2]>1)zs[4]--,zs[2]-=2,num++;//\u56db\u5e26\u4e24\u5bf9 \n    while(zs[4]&&zs[2]  )zs[4]-- ,zs[2]--,num++;//\u5bf9\u770b\u6210\u4e24\u5355\u518d\u56db\u5e26 \n    if(zs[3]%3==0&&zs[1]+zs[2]<=1)                //\u4e09\u5f20\u7684\u592a\u591a\u4e86\u62c6\u4e09\u5f20 \n        while(zs[3]>2)zs[3]-=3,num+=2;//\u628a\u4e00\u7ec4\u4e09\u5f20\u62c6\u6210\u5355\u548c\u5bf9,\u518d\u51fa\u4e09\u5e26\u4e00\u548c\u4e09\u5e26\u4e8c \n    while(zs[3]&&zs[1]  )zs[3]-- ,zs[1]--,num++;//\u4e09\u5e26\u4e00 \n    while(zs[3]&&zs[2]  )zs[3]-- ,zs[2]--,num++;//\u4e09\u5e26\u4e8c \n    //\u8fd8\u5269\u4e09\u5f20\u548c\u70b8,\u7ec4\u5408\u51fa \n    while(zs[4]>1&&zs[3])zs[3]--,zs[4]-=2,num+=2;//\u628a\u4e00\u4e2a\u70b8\u62c6\u6210\u4e00\u5bf9\u548c\u4e24\u5355,\u518d\u51fa\u4e09\u5e26\u4e8c\u548c\u56db\u5e26\u4e24\u5355 \n    while(zs[3]>1&&zs[4])zs[4]--,zs[3]-=2,num+=2;//\u628a\u4e00\u4e2a\u70b8\u62c6\u6210\u4e24\u5bf9,\u518d\u51fa\u4e24\u7ec4\u4e09\u5e26\u4e00\u5bf9 \n    while(zs[3]>2)zs[3]-=3,num+=2;                //\u540c\u4e0a,\u628a\u4e00\u7ec4\u4e09\u5f20\u62c6\u6210\u5355\u548c\u5bf9,\u518d\u51fa\u4e09\u5e26\u4e00\u548c\u4e09\u5e26\u4e8c\n    while(zs[4]>1)zs[4]-=2,num++;                //\u628a\u4e00\u4e2a\u70b8\u62c6\u6210\u4e24\u5bf9,\u518d\u51fa\u4e00\u7ec4\u56db\u5e26\u4e24\u5bf9 \n    if(wangzha&&zs[1]>=2)//\u6709\u738b\u70b8\u5e76\u4e14\u6ca1\u88ab\u5e26\u8dd1 \n        return num+zs[2]+zs[3]+zs[4]+zs[1]-1;//\u53cc\u738b\u4e00\u5757\u51fa \n    else\n        return num+zs[1]+zs[2]+zs[3]+zs[4];//\u51fa\u5269\u4f59\u7684\u724c,\u8fd4\u56de\u7b54\u6848 \n}\nint main() {\n    t=read();\n    n=read();\n    int a,b;\n    while(t--) {\n        ans=0x7f7f7f7f;\n        memset(pai,0,sizeof(pai));\n        for(int i=1; i<=n; ++i) {\n            a=read();b=read();\n            if(a==1)pai[14]++;    //14\u4ee3\u8868A \n            else if(a==0)pai[1]++;//1\u4ee3\u8868\u738b\n            else pai[a]++;\n        }\n        chupai(0);\n        printf(\"%d\\n\",ans);\n    }\n}\n```",
        "postTime": 1508929612,
        "uid": 40673,
        "name": "w_32768",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "## \u4e0d\u9700\u8981\u8d2a\u5fc3\uff0c\u66b4\u641c\u51fa\u5947\u8ff9\u3002\n\n$~~~~~~$ \u8fd9\u9053\u9898\u4e00\u5b9a\u8981\u53d1\u4e00\u7bc7\u9898\u89e3\u7eaa\u5ff5\u4e00\u4e0b\u3002\u8fd9\u662f\u6211\u4ece\u5348\u89c9\u7761\u9192\u4e00\u76f4\u6253\u5230\u5403\u665a\u996d\u7684\u4e00\u9053\u9898\uff0c\u4e2d\u9014\u4e5f\u6ca1\u6709\u6d4f\u89c8\u522b\u7684\u9898\u89e3\uff0c~~\u7ed3\u679c\u53d1\u73b0\u9898\u89e3\u6bd4\u6211\u7684\u7b80\u5355\u591a\u4e86~~\u800c\u51e0\u4e4e\u662f\u7eaf\u641c\u7d22\u8fc7\u7684\u8fd9\u9053\u9898\u3002\u4e0d\u8fc7\uff0c\u641c\u7d22\u7684\u7248\u672c\u4e5f\u662f\u8d8a\u6765\u8d8a\u4f18\uff0c\u4e0b\u9762\u6765\u5206\u6790\u4e00\u4e0b\u8fd9\u9053\u9898\u76ee\u3002\n\n$~~~~~~$ \u9996\u5148\uff0c\u6211\u4eec\u795e\u5947\u7684\u53d1\u73b0\uff0c\u82b1\u8272\u662f\u6ca1\u6709\u4efb\u4f55\u5375\u7528\u7684\u3002\u56e0\u4e3a\u4e0d\u7ba1\u662f\u6597\u5730\u4e3b\u4ec0\u4e48\u6837\u5b50\u7684\u51fa\u6cd5\uff0c\u90fd\u6d89\u53ca\u4e0d\u5230\u82b1\u8272\u7684\u5173\u7cfb\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u7b80\u5355\u5b58\u50a8\u4e00\u4e0b\u8fd9\u4e2a\u82b1\u8272\uff0c\u4ee5\u540e\u5c31\u4e0d\u7528\u4e86\u3002\u6700\u91cd\u8981\u7684\u5462\uff0c\u5c31\u662f\u8fd9\u4e2a\u70b9\u6570\u3002\u62ff\u5230\u9898\u76ee\u5148\u770b\uff0c\u6709\u8fd9\u4e48\u591a\u6253\u724c\u7684\u65b9\u6cd5\uff0c\u90a3\u6211\u80af\u5b9a\u8981\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u65b9\u6cd5\u8fdb\u884c\u641c\u7d22\uff0c\u6765\u641c\u5230\u4e00\u4e2a\u6700\u4f18\u89e3\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u79cd\u51fa\u724c\u65b9\u6848\uff0c\u8bbe\u8fd9\u79cd\u51fa\u724c\u65b9\u6848\u7684\u51fa\u724c\u6b21\u6570\u662f$c$\uff0c\u5219\u53ef\u4ee5\u5f97\u5230\uff1a$ans=min(~c~)$\u3002\u6545\u6211\u4eec\u5728\u6bcf\u6b21\u641c\u7d22\u7684\u65f6\u5019\u53d6\u4e00\u4e0b\u6700\u5c0f\u503c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n$~~~~~~$ \u6240\u4ee5\u6211\u4eec\u8be5\u600e\u4e48\u64cd\u4f5c\u5462\uff1f\u9996\u5148\u610f\u8bc6\u5230\u6251\u514b\u724c\u7684\u82b1\u8272\u662f\u6ee1\u8db3$3$\u6700\u5c0f\uff0c\u800c$A$\u548c$2$\u867d\u7136\u5728\u6570\u503c\u4e0a\u6bd4$3$\u5c0f\uff0c\u800c\u70b9\u6570\u662f\u6bd4$3$\u5927\u7684\uff0c\u6545\u6211\u4eec\u53ef\u4ee5\u8ba9\u4ece$3$\u5230$K$\u7684\u6570\u503c\u51cf\u4e8c\uff0c\u5e76\u8ba9$A$\u548c$2$\u6392\u5728\u5b83\u4eec\u7684\u540e\u9762\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002\u53c8\u56e0\u4e3a\u82b1\u8272\u548c\u70b9\u6570\u6ca1\u5173\u7cfb\uff0c\u6240\u4ee5\u76f4\u63a5\u8ba9\u5927\u5c0f\u738b\u7684\u70b9\u6570\u6392\u5728$2$\u7684\u540e\u9762\u5c31\u53ef\u4ee5\u4e86\uff0c\u6545\u6211\u4eec\u5f88\u5bb9\u6613\u60f3\u5230\u8f93\u5165\u8f93\u51fa\u65b9\u5f0f\u3002\n```cpp\nint main(){\n\tqread(T);qread(n);//\u8fd9\u91cc\u4f7f\u7528\u4e86\u5feb\u8bfb\n\twhile(T--){\n\t\tinit();\n\t\tint x,y;\n\t\tfor(register int i=1;i<=n;i++){\n\t\t\tx=y=0;\n\t\t\tqread(x);qread(y);\n\t\t\tif(x==0&&y==1){//\u5bf9\u5927\u5c0f\u738b\u7684\u5224\u65ad\n\t\t\t\tp[i].a=14;\n\t\t\t\tp[i].h=0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(x==0&&y==2){\n\t\t\t\tp[i].a=15;\n\t\t\t\tp[i].h=0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tp[i].h=y;\n\t\t\tif(x==1){//A\u548c2\u7684\u5355\u72ec\u5224\u65ad\n\t\t\t\tp[i].a=12;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(x==2){\n\t\t\t\tp[i].a=13;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tp[i].a=x-2;//\u5269\u4e0b\u7684\u90fd\u51cf\u4e8c\n\t\t}\n\t\t...\n\t\tstd::cout<<ans<<std::endl;//\u6211\u6700\u7ec8\u6c42\u5f97\u7684\u7b54\u6848\u3002\n\t}\n    return 0;\n}\n```\n$~~~~~~$ \u8fd9\u6837\u6211\u4eec\u5c31\u6210\u529f\u8f93\u5165\u4e86\u6570\u636e\uff0c\u800c\u63a5\u4e0b\u6765\u8be5\u600e\u4e48\u5904\u7406\u5462\uff08\u5c31\u662f\u4e09\u4e2a\u70b9\u6240\u5728\u7684\u5730\u65b9\uff09\uff0c\u5f88\u663e\u7136\u662f\u641c\u7d22\u4e86\uff01\u53ef\u6211\u4eec\u8be5\u600e\u4e48\u641c\u5462\uff1f\u4e0b\u9762\u6765\u8bf4\u4e00\u4e0b\u6211\u4eca\u5929\u4e0b\u5348\u7684\u641c\u7d22\u5386\u53f2\u3002\n\n**\u7b2c\u4e00\u6b21\u5c1d\u8bd5\uff1a\u66b4\u529b\u641c\u7d22**\n\n$~~~~~~$ \u6211\u4eec\u53d1\u73b0\uff0c\u6211\u4eec\u6309\u7167\u70b9\u6570\u5927\u5c0f\u6392\u4e2a\u5e8f\uff0c\u8fd9\u4e2a\u6837\u5b50\u6bcf\u6b21\u53d6\u8fd9\u79cd\u60c5\u51b5\u7684\u65f6\u5019\uff0c\u8981\u662f\u8fd9\u4e00\u7c7b\u724c\u5728\u8fd9\u4e00\u533a\u95f4\u5185\u91cd\u590d\u51fa\u73b0\u7684\u8bdd\uff0c\u6211\u4eec\u53d6\u6700\u9760\u5de6\u7684\u8fd8\u6ca1\u53d6\u8fc7\u7684\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u6837\u5b50\u7528$now$\u53c2\u6570\u6765\u4ee3\u8868\u5f53\u524d\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u7528$use$\u6570\u7ec4\u53bb\u4ee3\u8868\u8fd9\u5f20\u724c\u6709\u6ca1\u6709\u53d6\u5c31\u53ef\u4ee5\u4e86\u3002\n$~~~~~~$ \u4ee5\u4e0b\u662f\u6211\u66b4\u529b\u641c\u7d22\u7684\u4ee3\u7801\uff0c\u671f\u671b\u5f97\u5206~~\u6211\u4e5f\u4e0d\u77e5\u9053\u591a\u5c11\u5206\uff0c\u5e94\u8be5\u662f~~0\u5206\u3002\n\n```cpp\nvoid dfs(int now,int x,int cnt){\n\tif(cnt>n) return;//\u526a\u679d\n\tif(cnt==n){//\u66f4\u65b0\u7b54\u6848\n\t\tans=mmin(ans,x);\n\t\treturn;\n\t}\n\tif(use[now]) return;\n\tif(p[now].a==14&&p[now+1].a==15){\n\t\tuse[now]=use[now+1]=1;\n\t\tdfs(now+2,x+1,cnt+2);\n\t\tuse[now]=use[now+1]=0;\n\t}//\u53cc\u738b\n\tif(p[now].a==p[now+1].a&&p[now+1].a==p[now+2].a&&p[now+2].a==p[now+3].a&&use[now+1]==0&&use[now+2]==0&&use[now+3]==0){\n\t\tuse[now]=use[now+1]=use[now+2]=use[now+3]=1;\n\t\tdfs(now+4,x+1,cnt+4);\n\t\tuse[now]=use[now+1]=use[now+2]=use[now+3]=0;\n\t}//\u70b8\u5f39\n\tif(p[now].a){\n\t\tuse[now]=1;\n\t\tdfs(now+1,x+1,cnt+1);\n\t\tuse[now]=0;\n\t}//\u5355\u5f20\n\tif(p[now].a==p[now+1].a&&use[now+1]==0){\n\t\tuse[now]=use[now+1]=1;\n\t\tdfs(now+2,x+1,cnt+2);\n\t\tuse[now]=use[now+1]=0;\n\t}//\u5bf9\u5b50\n\tif(p[now].a==p[now+1].a&&p[now+1].a==p[now+2].a&&use[now+2]==0&&use[now+2]==0){\n\t\tuse[now]=use[now+1]=use[now+2]=1;\n\t\tdfs(now+3,x+1,cnt+3);\n\t\tuse[now]=use[now+1]=use[now+2]=0;\n\t}//\u4e09\u5f20\n\tif(p[now].a==p[now+1].a&&p[now+1].a==p[now+2].a&&use[now+1]==0&&use[now+2]==0){\n\t\tuse[now]=use[now+1]=use[now+2]=1;\n\t\tfor(register int i=1;i<=n;i++){\n\t\t\tif(!use[i]){\n\t\t\t\tuse[i]=1;\n\t\t\t\tdfs(i+1,x+1,cnt+4);\n\t\t\t\tuse[i]=0;\n\t\t\t}\n\t\t}\n\t\tuse[now]=use[now+1]=use[now+2]=0;\n\t}//\u4e09\u5e26\u4e00\n\tif(p[now].a==p[now+1].a&&p[now+1].a==p[now+2].a&&use[now+1]==0&&use[now+2]==0){\n\t\tuse[now]=use[now+1]=use[now+2]=1;\n\t\tfor(register int i=1;i<n;i++){\n\t\t\tif((!use[i])&&(!use[i+1])){\n\t\t\t\tuse[i]=use[i+1]=1;\n\t\t\t\tdfs(i+2,x+1,cnt+5);\n\t\t\t\tuse[i]=use[i+1]=0;\n\t\t\t}\n\t\t}\n\t\tuse[now]=use[now+1]=use[now+2]=0;\n\t}//\u4e09\u5e26\u4e8c\n\tfor(register int i=1;i<=n;i++){\n\t\tif(!use[i]){\n\t\t\tqueue<int>ret;\n\t\t\twhile(!ret.empty()) ret.pop();\n\t\t\tint tot=1;\n\t\t\tint cur=i;\n\t\t\tret.push(i);\n\t\t\tuse[i]=1;\n\t\t\tfor(register int j=i;j<=n;j++){\n\t\t\t\tif(p[j].a-1==p[cur].a&&use[j]==0){\n\t\t\t\t\ttot++;\n\t\t\t\t\tcur=j;\n\t\t\t\t\tret.push(j);\n\t\t\t\t\tuse[j]=1;\n\t\t\t\t\tif(tot>=5){\n\t\t\t\t\t\tfor(register int k=1;k<=n;k++) if(!use[k]) dfs(k,x+1,cnt+tot);\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile(!ret.empty()){\n\t\t\t\tuse[ret.front()]=0;\n\t\t\t\tret.pop();\n\t\t\t}\n\t\t\tuse[i]=0;\n\t\t}\n\t}//\u987a\u5b50\n\tfor(register int i=1;i<=n;i++){\n\t\tif((!use[i])&&(!use[i+1])){\n\t\t\tqueue<int>ret;\n\t\t\twhile(!ret.empty()) ret.pop();\n\t\t\tint tot=1;\n\t\t\tint cur=i;\n\t\t\tret.push(i);\n\t\t\tret.push(i+1);\n\t\t\tuse[i]=use[i+1]=1;\n\t\t\tfor(register int j=i;j<=n;j++){\n\t\t\t\tif(p[j].a-1==p[cur].a&&p[j+1].a-1==p[cur].a&&use[j]==0&&use[j+1]==0){\n\t\t\t\t\ttot++;\n\t\t\t\t\tcur=j;\n\t\t\t\t\tret.push(j);\n\t\t\t\t\tret.push(j+1);\n\t\t\t\t\tuse[j]=use[j+1]=1;\n\t\t\t\t\tif(tot>=3) for(register int k=1;k<=n;k++) if(!use[k]) dfs(k,x+1,cnt+tot*2);\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile(!ret.empty()){\n\t\t\t\tuse[ret.front()]=0;\n\t\t\t\tret.pop();\n\t\t\t}\n\t\t\tuse[i]=0;\n\t\t}\n\t}//\u53cc\u8fde\u5bf9\n\tfor(register int i=1;i<=n;i++){\n\t\tif((!use[i])&&(!use[i+1])&&(!use[i+2])){\n\t\t\tqueue<int>ret;\n\t\t\twhile(!ret.empty()) ret.pop();\n\t\t\tint tot=1;\n\t\t\tint cur=i;\n\t\t\tret.push(i);\n\t\t\tret.push(i+1);\n\t\t\tret.push(i+2);\n\t\t\tuse[i]=use[i+1]=use[i+2]=1;\n\t\t\tfor(register int j=i;j<=n;j++){\n\t\t\t\tif(p[j].a-1==p[cur].a&&p[j+1].a-1==p[cur].a&&p[j+2].a-1==p[cur].a&&use[j]==0&&use[j+1]==0&&use[j+2]==0){\n\t\t\t\t\ttot++;\n\t\t\t\t\tcur=j;\n\t\t\t\t\tret.push(j);\n\t\t\t\t\tret.push(j+1);\n\t\t\t\t\tret.push(j+2);\n\t\t\t\t\tuse[j]=use[j+1]=use[j+2]=1;\n\t\t\t\t}\n\t\t\t\tif(tot>=3) for(register int k=1;k<=n;k++) if(!use[k]) dfs(k,x+1,cnt+tot*2);\n\t\t\t}\n\t\t\twhile(!ret.empty()){\n\t\t\t\tuse[ret.front()]=0;\n\t\t\t\tret.pop();\n\t\t\t}\n\t\t\tuse[i]=0;\n\t\t}\n\t}//\u4e09\u8fde\u5bf9\n\tif(p[now].a==p[now+1].a&&p[now+1].a==p[now+2].a&&p[now+2].a==p[now+3].a){\n\t\tuse[now]=use[now+1]=use[now+2]=use[now+3]=1;\n\t\tfor(register int i=1;i<=n;i++){\n\t\t\tif(use[i]==0){\n\t\t\t\tuse[i]=1;\n\t\t\t\tfor(register int j=i;j<=n;j++){\n\t\t\t\t\tif(use[j]==0){\n\t\t\t\t\t\tuse[j]=1;\n\t\t\t\t\t\tfor(register int k=1;k<=n;k++) if(!use[k]) dfs(k,x+1,cnt+6);\n\t\t\t\t\t\tuse[j]=0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tuse[i]=0;\n\t\t\t}\n\t\t}\n\t\tuse[now]=use[now+1]=use[now+2]=use[now+3]=0;\n\t}//\u56db\u5e26\u4e8c\n}\n```\n\n$~~~~~~$ \u76f8\u4fe1\u5f88\u591a\u8bfb\u8005\u90fd\u8df3\u8fc7\u4e86\u8fd9\u6bb5\u4ee3\u7801\uff0c\u56e0\u4e3a\u6211\u4e5f\u4e0d\u77e5\u9053\u6211\u5728\u5199\u4e00\u4e9b\u4ec0\u4e48\u3002\u8fd9\u5927\u6982\u5c31\u662f\u4e00\u5f00\u59cb\u66b4\u529b\u641c\u7d22\u7684\u539f\u578b\uff0c\u4f46\u6211\u53d1\u73b0\u4e86\u8fd9\u6bb5\u4ee3\u7801\u5b58\u5728\u8bb8\u8bb8\u591a\u591a\u7684\u95ee\u9898\u3002\n\n> - \u590d\u6742\u5ea6\u7206\u8868\n\n> - \u9519\u8bef\u5f88\u591a\u4e0d\u6613\u8c03\u8bd5\n\n> - \u6211\u4e5f\u4e0d\u77e5\u9053\u81ea\u5df1\u5728\u8868\u8fbe\u4e9b\u5565\n\n$~~~~~~$ \u90a3\u4e48\u6211\u5c31\u679c\u65ad\u653e\u5f03\u4e86\u8fd9\u6bb5\u7a0b\u5e8f\uff0c\u63a5\u4e0b\u6765\u6765\u5bf9\u5b83\u8fdb\u884c\u4f18\u5316\u3002\u4e0a\u9762\u6211\u8003\u8651\u5230\u4e86\uff0c\u5bf9\u4e8e\u540c\u4e00\u79cd\u70b9\u6570\u7684\u724c\uff0c\u6211\u8981\u4ece\u6700\u5de6\u8fb9\u6ca1\u6709\u53d6\u8fc7\u7684\u724c\u5f00\u59cb\u53d6\uff0c\u53ef\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u5462\uff1f\u6211\u53d6\u724c\u4e3a\u4ec0\u4e48\u8981\u8003\u8651\u5b83\u7684\u987a\u5e8f\u5462\uff1f\u56e0\u6b64\uff0c\u6211\u4e0d\u9700\u8981\u50a8\u5b58\u724c\u7684\u5e8f\u5217\u5168\u90e8\u7684\u4fe1\u606f\uff0c\u53ea\u9700\u8981\u5b58\u50a8\u6bcf\u4e2a\u70b9\u6570\u7684\u5f20\u6570\u5c31\u53ef\u4ee5\u4e86\u3002\u56e0\u6b64\u6211\u6539\u53d8\u4e86$use$\u6570\u7ec4\u7684\u804c\u80fd\uff0c\u4ee4$use_i$\u8868\u793a\u70b9\u6570\u4e3a$i$\u7684\u724c\u7684\u4e2a\u6570\uff0c\u663e\u7136$0 \\leq use_i \\leq 4$\uff0c\u800c\u4e14$1\\leq i\\leq 15$\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5728\u8f93\u5165\u7684\u65f6\u5019\u7edf\u8ba1\u3002\n\n```cpp\nfor(register int i=1;i<=n;i++) use[p[i].a]++;\n```\n$~~~~~~$ \u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u7ed9$dfs$\u4f20\u53c2\u7684\u65f6\u5019\u53ef\u4ee5\u628a$use$\u4f20\u8fdb\u53bb\uff0c\u6bcf\u6b21\u66f4\u65b0\u5c31\u53ef\u4ee5\u4e86\uff08\u5176\u5b9e\u540e\u6765\u53d1\u73b0\u4e5f\u6ca1\u6709\u4ec0\u4e48\u5375\u7528\uff09\u3002\u4e0b\u9762\u662f\u6211\u7684\u66b4\u529b\u7b2c\u4e8c\u7248\uff0c\u671f\u671b\u5f97\u5206$30$\u3002\n\n**\u7b2c\u4e8c\u6b21\u5c1d\u8bd5\uff1a\u666e\u901a\u641c\u7d22**\n\n```cpp\nvoid dfs(int x,int cnt,int a[]){//x\u4ee3\u8868\u65b9\u6848\u6570\uff0ccnt\u4ee3\u8868\u5df2\u51fa\u624b\u724c\u6570\u3002\n\tif(x>=ans) return;//\u526a\u679d\n\tif(cnt==n){//\u66f4\u65b0\u7b54\u6848\n\t\tans=mmin(ans,x);\n\t\treturn;\n\t}\n\tfor(register int i=1;i<=12;i++){//\u4e09\u8fde\u5bf9\n\t\tif(a[i]>=3){\n\t\t\tfor(register int j=i+1;j<=12;j++){\n\t\t\t\tif(a[j]<3) break;//\u5982\u679c\u5f80\u540e\u8fd8\u6ca1\u5230\u4e24\u4e2a\u5c31\u5b58\u5728\u5c0f\u4e8e\u4e09\u4e2a\u7684\u4e86\uff0c\u5c31\u80af\u5b9a\u4e0d\u80fd\u8fde\u8d77\u6765\u4e86\u3002\n\t\t\t\tif(j-i+1>=2){\n\t\t\t\t\tfor(register int k=i;k<=j;k++) a[k]-=3;\n\t\t\t\t\tdfs(x+1,cnt+(j-i+1)*3,a);//\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u90fd\u66f4\u65b0\u3002\n\t\t\t\t\tfor(register int k=i;k<=j;k++) a[k]+=3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(register int i=1;i<=12;i++){//\u4e8c\u8fde\u5bf9\n\t\tif(a[i]>=2){\n\t\t\tfor(register int j=i+1;j<=12;j++){\n\t\t\t\tif(a[j]<2) break;\n\t\t\t\tif(j-i+1>=3){\n\t\t\t\t\tfor(register int k=i;k<=j;k++) a[k]-=2;\n\t\t\t\t\tdfs(x+1,cnt+(j-i+1)*2,a);\n\t\t\t\t\tfor(register int k=i;k<=j;k++) a[k]+=2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(register int i=1;i<=12;i++){//\u987a\u5b50\n\t\tif(a[i]>=1){\n\t\t\tfor(register int j=i+1;j<=12;j++){\n\t\t\t\tif(!a[j]) break;\n\t\t\t\tif(j-i+1>=5){\n\t\t\t\t\tfor(register int k=i;k<=j;k++) a[k]--;\n\t\t\t\t\tdfs(x+1,cnt+(j-i+1),a);\n\t\t\t\t\tfor(register int k=i;k<=j;k++) a[k]++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(register int i=1;i<=15;i++){//\u56db\u5e26\u4e8c\uff0c\u524d\u9762\u662f\u5e26\u4e24\u5bf9\uff0c\u540e\u9762\u662f\u5e26\u4e24\u5355\u3002\n\t\tif(a[i]>=4){\n\t\t\ta[i]-=4;\n\t\t\tfor(register int j=1;j<=15;j++){\n\t\t\t\tif(a[j]>=2){\n\t\t\t\t\ta[j]-=2;\n\t\t\t\t\tfor(register int k=j;k<=15;k++){\n\t\t\t\t\t\tif(a[k]>=2){\n\t\t\t\t\t\t\ta[k]-=2;\n\t\t\t\t\t\t\tdfs(x+1,cnt+8,a);\n\t\t\t\t\t\t\ta[k]+=2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ta[j]+=2;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(register int j=1;j<=15;j++){\n\t\t\t\tif(a[j]>=1){\n\t\t\t\t\ta[j]--;\n\t\t\t\t\tfor(register int k=j;k<=15;k++){\n\t\t\t\t\t\tif(a[k]>=1){\n\t\t\t\t\t\t\ta[k]--;\n\t\t\t\t\t\t\tdfs(x+1,cnt+6,a);\n\t\t\t\t\t\t\ta[k]++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ta[j]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\ta[i]+=4;\n\t\t}\n\t}\n\tfor(register int i=1;i<=12;i++){//\u4e09\u4ee3\u4e00\n\t\tif(a[i]>=3){\n\t\t\ta[i]-=3;\n\t\t\tfor(register int j=1;j<=12;j++){\n\t\t\t\tif(a[j]>=1&&j!=i){\n\t\t\t\t\ta[j]--;\n\t\t\t\t\tdfs(x+1,cnt+4,a);\n\t\t\t\t\ta[j]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\ta[i]+=3;\n\t\t}\n\t}\n\tfor(register int i=1;i<=12;i++){//\u4e09\u5e26\u4e8c\n\t\tif(a[i]>=3){\n\t\t\ta[i]-=3;\n\t\t\tfor(register int j=1;j<=12;j++){\n\t\t\t\tif(a[j]>=2&&j!=i){\n\t\t\t\t\ta[j]-=2;\n\t\t\t\t\tdfs(x+1,cnt+5,a);\n\t\t\t\t\ta[j]+=2;\n\t\t\t\t}\n\t\t\t}\n\t\t\ta[i]+=3;\n\t\t}\n\t}\n\tfor(register int i=1;i<=13;i++){//\u70b8\u5f39\n\t\tif(a[i]>=4){\n\t\t\ta[i]-=4;\n\t\t\tdfs(x+1,cnt+4,a);\n\t\t\ta[i]+=4;\n\t\t}\n\t}\n\tfor(register int i=1;i<=13;i++){//\u4e09\u4e2a\n\t\tif(a[i]>=3){\n\t\t\ta[i]-=3;\n\t\t\tdfs(x+1,cnt+3,a);\n\t\t\ta[i]+=3;\n\t\t}\n\t}\n\tfor(register int i=1;i<=13;i++){//\u5bf9\u5b50\n\t\tif(a[i]>=2){\n\t\t\ta[i]-=2;\n\t\t\tdfs(x+1,cnt+2,a);\n\t\t\ta[i]+=2;\n\t\t}\n\t}\n\tif(a[14]&&a[15]){//\u738b\u70b8\n\t\ta[14]--;a[15]--;\n\t\tdfs(x+1,cnt+2,a);\n\t\ta[14]++;a[15]++;\n\t}\n\tfor(register int i=1;i<=15;i++){//\u5355\u62cd\n\t\tif(a[i]>=1){\n\t\t\ta[i]-=1;\n\t\t\tdfs(x+1,cnt+1,a);\n\t\t\ta[i]+=1;\n\t\t}\n\t}\n}\n```\n\n$~~~~~~$ \u8fd9\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u5c1d\u8bd5\uff0c\u56e0\u4e3a\u5b83\u9996\u5148\u4f7f\u5f97\u7a0b\u5e8f\u7684\u53ef\u8bfb\u6027\u5927\u5927\u63d0\u5347\uff0c\u4e5f\u65b9\u4fbf\u4e86\u8c03\u8bd5\uff0c\u4ee3\u7801\u770b\u8d77\u6765\u4e5f\u66f4\u52a0\u7684\u4f18\u7f8e\uff0c\u6700\u91cd\u8981\u7684\u662f\uff0c\u5b83\u6709$30$\u5206\u7684\u671f\u671b\u5f97\u5206\uff0c\u4e0d\u8fc7\u4e3a\u4ec0\u4e48\u53ea\u6709$30$\u5206\u5462\uff1f\u539f\u56e0\u5982\u4e0b\u3002\n\n> - \u6ee1\u5c4f$TLE$\n\n$~~~~~~$ \u56e0\u6b64\u6211\u4eec\u9700\u8981\u518d\u505a\u4f18\u5316\uff0c\u6211\u4eec\u795e\u5947\u7684\u53d1\u73b0\uff0c\u5bf9\u4e8e\u73b0\u5728\u7684\u66b4\u529b\u641c\u7d22\u6765\u8bf4\uff0c\u6211\u4eec\u6bcf\u4e00\u6b21\u641c\u7d22\uff0c\u90fd\u662f\u904d\u5386\u6211\u7684\u6240\u6709\u624b\u724c\uff0c\u6240\u4ee5\u4f1a\u904d\u5386\u4e00\u4e9b\u91cd\u590d\u7684\u5143\u7d20\uff0c\u6240\u4ee5\u6211\u4eec\u8be5\u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u8003\u8651\u5bf9\u4e8e\u51fa\u724c\u6765\u8bf4\uff0c\u6211\u6700\u7ec8\u80af\u5b9a\u662f\u8981\u51fa\u5149\u6211\u7684\u624b\u724c\uff0c\u4f46\u8ddf\u6211\u5148\u51fa\u7a7a\u4ec0\u4e48\u724c\u7684\u987a\u5e8f\u662f\u65e0\u5173\u7d27\u8981\u7684\u3002\uff08\u6bd4\u5982\u6211\u53ea\u5269\u4e00\u4e2a\u5355$1$\u548c$3$\uff0c\u6211\u53ef\u4ee5\u5148\u51fa$1$\u4e5f\u53ef\u4ee5\u5148\u51fa$3$\uff0c\u800c\u4e0d\u9700\u8981\u91cd\u590d\u904d\u5386\u6240\u6709\u624b\u724c\uff09\n\n$~~~~~~$ \u56e0\u6b64\u6211\u4eec\u4ece\u7f16\u53f7\u5c0f\u7684\u70b9\u6570\u5f00\u59cb\u904d\u5386\uff0c\u5f53\u8fd9\u4e2a\u70b9\u5df2\u7ecf\u51fa\u5b8c\u4e86\uff0c\u518d\u53bb\u641c\u4e0b\u4e00\u4e2a\u70b9\u6570\uff0c\u8fd9\u6837\u5c31\u4f1a\u5927\u5927\u51cf\u5c11\u6211\u91cd\u590d\u641c\u7d22\u7684\u6b21\u6570\uff0c\u5927\u6982\u4e5f\u7b97\u662f\u4e00\u6b21\u6210\u529f\u7684\u526a\u679d\uff0c\u63a5\u4e0b\u6765\u662f\u6211\u7684\u66b4\u529b\u641c\u7d22\u4ee3\u7801\uff0c\u4f46\u671f\u671b\u5f97\u5206\u53d8\u6210\u4e86\u7384\u5b66\u3002\n\n**\u7b2c\u4e09\u6b21\u5c1d\u8bd5\uff1a\u770b\u4f3c\u6b63\u786e\u7684\u9519\u8bef\u641c\u7d22**\n\n```cpp\nvoid dfs(int x,int c,int cnt,int a[]){//x\u4ee3\u8868\u73b0\u5728\u641c\u5230\u4e86\u4ec0\u4e48\u70b9\u6570\uff0cc\u4ee3\u8868\u65b9\u6848\u6570\n\tif(c>ans) return;\n\tif(cnt==n){\n\t\tans=mmin(ans,c);\n\t\treturn;\n\t}\n\tif(x==16) return;//\u4e00\u5171\u5341\u4e94\u5f20\u724c\u3002\n\tif(a[x]==0) dfs(x+1,c,cnt,a);//\u5982\u679c\u6211\u8fd9\u4e2a\u70b9\u6570\u51fa\u7a7a\u4e86\uff0c\u6362\u4e2a\u70b9\u6570\u51fa\u3002\n\tif(a[14]&&a[15]){//\u53cc\u738b\n\t\ta[14]--;a[15]--;\n\t\tdfs(x,c+1,cnt+2,a);\n\t\ta[14]++;a[15]++;\n\t}\n\tif(a[x]>=4){//\u6211\u6709\u56db\u5f20\u724c\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u51fa\u56db\u5e26\u4e8c\uff0c\u4e5f\u53ef\u4ee5\u70b8\u5f39\n\t\ta[x]-=4;\n\t\tfor(register int i=1;i<=13;i++){\n\t\t\tif(a[i]>=1){\n\t\t\t\ta[i]--;\n\t\t\t\tfor(register int j=i;j<=15;j++){\n\t\t\t\t\tif(a[j]>=1){\n\t\t\t\t\t\ta[j]--;\n\t\t\t\t\t\tdfs(x,c+1,cnt+6,a);\n\t\t\t\t\t\ta[j]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ta[i]++;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=13;i++){\n\t\t\tif(a[i]>=2){\n\t\t\t\ta[i]-=2;\n\t\t\t\tfor(register int j=i;j<=13;j++){\n\t\t\t\t\tif(a[j]>=2){\n\t\t\t\t\t\ta[j]-=2;\n\t\t\t\t\t\tdfs(x,c+1,cnt+8,a);\n\t\t\t\t\t\ta[j]+=2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ta[i]+=2;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+4,a);\n\t\ta[x]+=4;\n\t}\n\tif(a[x]>=3){//\u4e0d\u4f4e\u4e8e\u4e09\u5f20\uff0c\u53ef\u4ee5\u4e09\u8fde\u5bf9\uff0c\u4e09\u5e26\u4e00\uff0c\u4e09\u5e26\u4e8c\uff0c\u4e09\u5f20\n\t\ta[x]-=3;\n\t\tfor(register int i=x+1;i<=12;i++){\n\t\t\tif(a[i]<3) break;\n\t\t\tif(i-x+1>=2){\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]-=3;\n\t\t\t\tdfs(x,c+1,cnt+(i-x+1)*3,a);\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]+=3;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=15;i++){\n\t\t\tif(i==x) continue;\n\t\t\tif(a[i]>=1){\n\t\t\t\ta[i]--;\n\t\t\t\tdfs(x,c+1,cnt+4,a);\n\t\t\t\ta[i]++;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=15;i++){\n\t\t\tif(i==x) continue;\n\t\t\tif(a[i]>=2){\n\t\t\t\ta[i]-=2;\n\t\t\t\tdfs(x,c+1,cnt+5,a);\n\t\t\t\ta[i]+=2;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+3,a);\n\t\ta[x]+=3;\n\t}\n\tif(a[x]>=2){//\u4e0d\u5c0f\u4e8e\u4e24\u5f20\u7684\uff0c\u53ef\u4ee5\u8fde\u5bf9\uff0c\u53ef\u4ee5\u5bf9\u5b50\n\t\ta[x]-=2;\n\t\tfor(register int i=x+1;i<=12;i++){\n\t\t\tif(a[i]<2) break;\n\t\t\tif(i-x+1>=3){\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]-=2;\n\t\t\t\tdfs(x,c+1,cnt+(i-x+1)*2,a);\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]+=2;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+2,a);\n\t\ta[x]+=2;\n\t}\n\tif(a[x]>=1){//\u4e0d\u5c11\u4e8e\u4e00\u5f20\u7684\uff0c\u53ef\u4ee5\u987a\u5b50\uff0c\u53ef\u4ee5\u5355\u5f20\n\t\ta[x]-=1;\n\t\tfor(register int i=x+1;i<=12;i++){\n\t\t\tif(a[i]<1) break;\n\t\t\tif(i-x+1>=5){\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]-=1;\n\t\t\t\tdfs(x,c+1,cnt+(i-x+1)*1,a);\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]+=1;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+1,a);\n\t\ta[x]+=1;\n\t}\n}\n```\n\n$~~~~~~$ \u968f\u5373\u6211\u4e0a\u4f20\u4e86\u8fd9\u6bb5\u4ee3\u7801\uff0c\u867d\u7136\u6ca1\u6709$TLE$\u4e86\uff0c\u4f46\u5168\u90e8\u53d8\u6210\u4e86$WA$\u3002\u8fd9\u8ba9\u6211\u767e\u601d\u4e0d\u5f97\u5176\u89e3\uff0c\u660e\u660e\u6211\u7684\u641c\u7d22\u7b56\u7565\u5df2\u7ecf\u662f\u6700\u4f18\u7684\u4e86\u554a\u3002\n\n$~~~~~~$ \u7ed3\u679c\uff0c\u6211\u8bd5\u4e86\u4e00\u4e0b\u7b2c\u4e8c\u4e2a\u6837\u4f8b\uff0c\u53d1\u73b0\u6211\u7684\u7a0b\u5e8f\u5e76\u8dd1\u4e0d\u8fc7\u7b2c\u4e8c\u4e2a\u6837\u4f8b\uff0c\u7136\u540e\u6211\u4eec\u53d1\u73b0\uff0c\u8fd9\u6bb5\u4ee3\u7801\u7684\u641c\u7d22\u662f\u9519\u8bef\u7684\uff01\u6211\u4eec\u53ea\u662f\u6309\u7167\u70b9\u6570\u6253\u7a7a\u4e86\u624b\u91cc\u7684\u724c\uff0c\u4f46\u5e76\u6ca1\u6709\u7ed9\u7a0b\u5e8f\u4e00\u4e2a\u53cd\u6094\u7684\u673a\u4f1a\u3002\u6bd4\u5982\u6211\u624b\u91cc\u6709$2$\u5f20$2$\uff0c$4$\u5f20$4$\uff0c$2$\u5f20$6$\uff0c\u6211\u4eec\u663e\u7136\u53ef\u4ee5\u56db\u5e26\u4e8c\u4e00\u6ce2\u8d70\uff0c\u4e0d\u8fc7\u6309\u7167\u8fd9\u4e2a\u7a0b\u5e8f\u6267\u884c\u7684\u8bdd\uff0c\u4e00\u5f00\u59cb\u5148\u641c\u4e8c\uff0c\u53d1\u73b0\u53ea\u6709\u4e00\u5bf9\uff0c\u51fa\u4e86\u4e00\u5bf9\uff0c\u518d\u641c\u56db\uff0c\u53d1\u73b0\u53ea\u80fd\u51fa\u70b8\u5f39\uff0c\u518d\u641c\u56db\uff0c\u53d1\u73b0\u4e5f\u662f\u4e2a\u5bf9\u5b50\uff0c\u8fd9\u6837\u6211\u7684\u7b54\u6848\u5c31\u662f$3$\u4e86\u3002\u53ef\u8fd9\u80af\u5b9a\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u7ed3\u679c\uff0c\u4f46\u5982\u679c\u4e0d\u6309\u70b9\u6570\u641c\u7d22\u7684\u8bdd\u53c8\u4f1a\u8d85\u65f6\uff0c\u8be5\u600e\u4e48\u529e\u5462\uff1f\n\n$~~~~~~$ \u7b54\u6848\u5f88\u660e\u663e\u4e86\u3002\u867d\u7136\u6211\u4eec\u8fd9\u6837\u7684\u7b56\u7565\u4e0d\u80fd\u7ed9\u7a0b\u5e8f\u53cd\u6094\u7684\u673a\u4f1a\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u8ba9\u4e00\u79cd\u72b6\u6001\u6709\u66f4\u591a\u7684\u9009\u62e9\uff0c\u4ece\u800c\u4f7f\u5b83\u4eec\u4e0d\u9700\u8981\u53cd\u6094\u3002\u6bd4\u5982\uff0c\u5c31\u6309\u521a\u521a\u7684\u4f8b\u5b50\u6765\u8bb2\uff0c\u6211\u4eec\u4e3a\u4ec0\u4e48\u975e\u8981\u51fa\u56db\u5e26\u4e8c\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u51fa\u4e00\u4e2a\u540d\u53eb\u201c\u5355\u5e26\u56db\u518d\u5e26\u5355\u201d\u7684\u7ec4\u5408\uff0c\u4e5f\u5c31\u662f\u641c\u5230$2$\u7684\u65f6\u5019\uff0c\u6211\u4eec\u591a\u4e86\u4e00\u79cd\u9009\u62e9\uff0c\u8fd9\u4e00\u5bf9$2$\u53ef\u4ee5\u548c\u522b\u7684\u6709\u56db\u5f20\u7684\u548c\u53e6\u4e00\u4e2a\u4e00\u5bf9\u7684\u7ec4\u6210\u4e00\u4e2a\u201c\u5355\u5e26\u56db\u518d\u5e26\u5355\u201d\uff0c\u4e5f\u5c31\u662f\u56db\u5e26\u4e8c\u4e86\uff0c\u8fd9\u4e2a\u6837\u5b50\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u79cd\u6dfb\u52a0\u7684\u9009\u62e9\u7279\u522b\u5c11\uff0c\u53ea\u6709\u4ee5\u4e0b\u51e0\u79cd\uff08\u9ebb\u70e6\u4e0d\u8981\u5410\u69fd\u6211\u7684\u80e1\u4e71\u547d\u540d$qwq$\uff09\n\n> - \u5355\u5e26\u56db\u518d\u5e26\u5355\n\n> - \u5bf9\u5e26\u56db\u518d\u5e26\u5bf9\n\n> - \u4e8c\u5e26\u4e09\n\n> - \u4e00\u5e26\u4e09\n\n$~~~~~~$ \u8fd9\u6837\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u5f20\u6570\u5927\u4e8e\u7b49\u4e8e\u4e00\u548c\u4e8c\u7684\u65f6\u5019\u518d\u591a\u52a0\u8fd9\u4e9b\u60c5\u51b5\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u5566\uff0c\u5176\u5b9e\u4e3b\u8981\u601d\u60f3\u4ec5\u4ec5\u662f\u66b4\u529b\u800c\u5df2\uff0c\u5e76\u6ca1\u6709\u522b\u7684\u96be\u60f3\u7684\u5730\u65b9\u3002\u4e0b\u9762\u662f\u6b63\u786e\u6027\u660e\u663e\u7684\u66b4\u529b\u4ee3\u7801\uff0c\u671f\u671b\u5f97\u5206$100$\u5206\u3002\n\n**\u7b2c\u56db\u6b21\u5c1d\u8bd5\uff1a\u771f\u7684\u6b63\u786e\u7684\u6b63\u786e\u641c\u7d22**\n\n```cpp\nvoid dfs(int x,int c,int cnt,int a[]){\n\tif(c>ans) return;\n\tif(cnt==n){\n\t\tans=mmin(ans,c);\n\t\treturn;\n\t}\n\tif(x==16) return;\n\tif(a[x]==0) dfs(x+1,c,cnt,a);\n\tif(a[14]&&a[15]){\n\t\ta[14]--;a[15]--;\n\t\tdfs(x,c+1,cnt+2,a);\n\t\ta[14]++;a[15]++;\n\t}\n\tif(a[x]>=4){\n\t\ta[x]-=4;\n\t\tfor(register int i=1;i<=13;i++){\n\t\t\tif(a[i]>=1){\n\t\t\t\ta[i]--;\n\t\t\t\tfor(register int j=i;j<=15;j++){\n\t\t\t\t\tif(a[j]>=1){\n\t\t\t\t\t\ta[j]--;\n\t\t\t\t\t\tdfs(x,c+1,cnt+6,a);\n\t\t\t\t\t\ta[j]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ta[i]++;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=13;i++){\n\t\t\tif(a[i]>=2){\n\t\t\t\ta[i]-=2;\n\t\t\t\tfor(register int j=i;j<=13;j++){\n\t\t\t\t\tif(a[j]>=2){\n\t\t\t\t\t\ta[j]-=2;\n\t\t\t\t\t\tdfs(x,c+1,cnt+8,a);\n\t\t\t\t\t\ta[j]+=2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ta[i]+=2;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+4,a);\n\t\ta[x]+=4;\n\t}\n\tif(a[x]>=3){\n\t\ta[x]-=3;\n\t\tfor(register int i=x+1;i<=12;i++){\n\t\t\tif(a[i]<3) break;\n\t\t\tif(i-x+1>=2){\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]-=3;\n\t\t\t\tdfs(x,c+1,cnt+(i-x+1)*3,a);\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]+=3;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=15;i++){\n\t\t\tif(i==x) continue;\n\t\t\tif(a[i]>=1){\n\t\t\t\ta[i]--;\n\t\t\t\tdfs(x,c+1,cnt+4,a);\n\t\t\t\ta[i]++;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=15;i++){\n\t\t\tif(i==x) continue;\n\t\t\tif(a[i]>=2){\n\t\t\t\ta[i]-=2;\n\t\t\t\tdfs(x,c+1,cnt+5,a);\n\t\t\t\ta[i]+=2;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+3,a);\n\t\ta[x]+=3;\n\t}\n\tif(a[x]>=2){\n\t\ta[x]-=2;\n\t\tfor(register int i=x+1;i<=12;i++){\n\t\t\tif(a[i]<2) break;\n\t\t\tif(i-x+1>=3){\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]-=2;\n\t\t\t\tdfs(x,c+1,cnt+(i-x+1)*2,a);\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]+=2;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=13;i++){//\u5bf9\u5e26\u56db\u518d\u5e26\u5bf9\n\t\t\tif(a[i]>=4&&i!=x){\n\t\t\t\ta[i]-=4;\n\t\t\t\tfor(register int j=1;j<=13;j++){\n\t\t\t\t\tif(a[j]>=2&&j!=i){\n\t\t\t\t\t\ta[j]-=2;\n\t\t\t\t\t\tdfs(x,c+1,cnt+8,a);\n\t\t\t\t\t\ta[j]+=2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ta[i]+=4;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=13;i++){//\u4e8c\u5e26\u4e09\n\t\t\tif(a[i]>=3&&i!=x){\n\t\t\t\ta[i]-=3;\n\t\t\t\tdfs(x,c+1,cnt+5,a);\n\t\t\t\ta[i]+=3;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+2,a);\n\t\ta[x]+=2;\n\t}\n\tif(a[x]>=1){\n\t\ta[x]-=1;\n\t\tfor(register int i=x+1;i<=12;i++){\n\t\t\tif(a[i]<1) break;\n\t\t\tif(i-x+1>=5){\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]-=1;\n\t\t\t\tdfs(x,c+1,cnt+(i-x+1)*1,a);\n\t\t\t\tfor(register int k=x+1;k<=i;k++) a[k]+=1;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=13;i++){//\u5355\u5e26\u56db\u53c8\u5e26\u4e00\n\t\t\tif(a[i]>=4&&i!=x){\n\t\t\t\ta[i]-=4;\n\t\t\t\tfor(register int j=1;j<=15;j++){\n\t\t\t\t\tif(a[j]>=1&&j!=i){\n\t\t\t\t\t\ta[j]--;\n\t\t\t\t\t\tdfs(x,c+1,cnt+6,a);\n\t\t\t\t\t\ta[j]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ta[i]+=4;\n\t\t\t}\n\t\t}\n\t\tfor(register int i=1;i<=13;i++){//\u4e00\u5e26\u4e09\n\t\t\tif(a[i]>=3&&i!=x){\n\t\t\t\ta[i]-=3;\n\t\t\t\tdfs(x,c+1,cnt+4,a);\n\t\t\t\ta[i]+=3;\n\t\t\t}\n\t\t}\n\t\tdfs(x,c+1,cnt+1,a);\n\t\ta[x]+=1;\n\t}\n}\n```\n\n$~~~~~~$ \u8fd9\u6837\u6211\u4eec\u5c31\u6210\u529f\u987a\u5229\u7684\u901a\u8fc7\u4e86\u672c\u9898~~\uff08\u5176\u5b9e\u8fd8\u6709\u975e\u589e\u5f3a\u7248\u6597\u5730\u4e3b\u7684\u53cc\u500d\u7ecf\u9a8c\uff09~~\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u6574\u4f53\u7684\u66b4\u529b\u601d\u8def\u5e76\u4e0d\u96be\u60f3\uff0c\u771f\u7684\u4ec5\u4ec5\u53ea\u662f\u66b4\u529b\u800c\u5df2\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u7b97\u6cd5\u7684\u5b9e\u73b0\u3001\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u5206\u6790\u3001\u8c03\u8bd5\u7684\u96be\u6613\u548c\u66b4\u529b\u7684\u6b63\u786e\u6027\uff0c\u662f\u6211\u4eec\u5728\u5b8c\u6210\u4e00\u4e2a\u9898\u4e4b\u524d\u6240\u9700\u8981\u6ce8\u610f\u7684\u65b9\u9762\u3002\n\n$~~~~~~$ \u6700\u540e\uff0c\u4e34\u8fd1$NOIp2018$\uff0c\u795d\u5927\u5bb6$NOIp.rp++$\u3002",
        "postTime": 1540821226,
        "uid": 64500,
        "name": "Burnside",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "- NOIP 2015 \u6597\u5730\u4e3b\u7684\u589e\u5f3a\u7248\u3002\u4e0d\u4ec5\u4ec5\u662f\u6570\u636e\u589e\u5f3a\u4e86\uff0c\u5176\u5b9e\u89c4\u5219\u4e5f\u7a0d\u6709\u53d8\u5316\uff0c\u5728\u8fd9\n  \n  \u9053\u9898\u91cc\u8981\u6ce8\u610f\u5927\u5c0f\u738b\u4e0d\u518d\u7b97\u662f\u4e00\u5bf9\u4e86\uff0c\u4e0d\u80fd\u5f53\u505a\u5bf9\u5b50\u7528\u3002\n    \n- \u5982\u679c\u6253\u8fc7\u724c\uff0c\u53ef\u80fd\u4f1a\u60f3\u5230\u4e00\u4e9b\u8d2a\u5fc3\u7684\u505a\u6cd5\uff0c\u4f46\u662f\u6211\u76f8\u4fe1\u80af\u5b9a\u6709\u4eba\u89c1\u5230\u8fd9\u9053\u9898\u4e4b\u524d \n  \n  \u5b8c\u5168\u4e0d\u4f1a\u6253\u724c\uff08\u6bd4\u5982\u6211\uff09\uff0c\u6240\u4ee5\u9884\u5904\u7406\u5c31\u53ea\u597d\u7528dp\u4e86\u3002\n  \n- \u8bbe$dp[i][j][k][z][l]$\u8868\u793a\u51fa\u73b0\u8fc7\u4e00\u6b21\u7684\u6570\u7801\u6709$i$\u4e2a\uff0c\u51fa\u73b0\u8fc7\u4e24\u6b21\u7684\u6570\u7801\u6709$j$\u4e2a\uff0c\u51fa\u73b0\u8fc7\u4e09\u6b21\u7684\u6570\u7801\u6709$k$\u4e2a\uff0c\u51fa\u73b0\u8fc7\u56db\u6b21\u7684\u6570\u7801\u6709$z$\u4e2a,\u738b\u6709$l$\u4e2a\u7684\u6700\u5c0f\u51fa\u724c\u6b21\u6570\u3002\n\n- \u5982\u679c\u53ea\u662f\u6309\u7167\u9898\u76ee\u6240\u7ed9\u7684\u65b9\u6cd5\u8fdb\u884c\u8f6c\u79fb\u5e76\u4e0d\u80fdAC\uff0c\u56e0\u4e3a\u8fd8\u6709\u4e00\u79cd\u51fa\u724c\u65b9\u6cd5\u53eb\u505a  \n\n \u62c6\u724c\uff0c\u6240\u4ee5\u51fa\u73b0\u4e86\u4ee5\u4e0b\u4e24\u79cd\u65b0\u7684\u8f6c\u79fb\uff1a\n \n \t```cpp\ndp[i][j][k][z][l]=dp[i+1][j][k+1][z\u22121][l]\ndp[i][j][k][z][l]=dp[i+1][j+1][k\u22121][z][l]\n\t```\n    \n\u00b7\u6ce8\u610f\u5faa\u73af\u7684\u6b21\u5e8f\uff0c\u4e00\u5b9a\u8981\u4fdd\u8bc1\u7b49\u5f0f\u53f3\u8fb9\u7684\u6bd4\u5de6\u8fb9\u7684\u5148\u5faa\u73af\u5230\u3002\n\n\n```cpp\n// shzr\n\n# include <cstdio>\n# include <iostream>\n# include <cstring>\n# define R register int\n \nusing namespace std;\n\nint T,n,ans;\nint a[16];\nint dp[25][25][25][25][3];\nint num,col,coun[5];\nbool id;\n\nvoid dfs (int x)\n{\n    if(x>=ans) return;    \n    bool f;\n    int cnt;\n    for (R k=1;k<=3;++k)\n        for (R i=1;i<=12;++i)\n        {\n            f=true;\n            if(k==1) cnt=5;\n            if(k==2) cnt=3;\n            if(k==3) cnt=2;\n            while (f&&i+cnt-1<=12)\n            {\n                for (R j=1;j<=cnt;++j)\n                    if(a[i+j-1]<k) \n                    {\n                        f=false;\n                        break;\n                    }\n                if(f==false) continue;\n                for (R j=1;j<=cnt;++j)\n                    a[i+j-1]-=k;\n                dfs(x+1);\n                for (R j=1;j<=cnt;++j)\n                    a[i+j-1]+=k;\n                cnt++;\n            }\n        }\n    coun[1]=coun[2]=coun[3]=coun[4]=coun[5]=0;\n    for (int i=1;i<=13;++i)\n        coun[ a[i] ]++;\n    coun[5]=a[14];\n    ans=min(ans,x+dp[ coun[1] ][ coun[2] ][ coun[3] ][ coun[4] ][ coun[5] ]);\n}\n\nvoid init ()\n{\n    int x=100;\n    memset(dp,0x3f,sizeof(dp));\n    dp[0][0][0][0][0]=0;\n    \n    for (int z=0;z<=n;++z)\n        for (int k=0;k<=n;++k)\n            for (int i=0;i<=n;++i)\n                for (int j=0;j<=n;++j)        \n                    for (int l=0;l<=2;++l)\n                    {\n                        x=100;\n                        if(i>0) x=min(x,dp[i-1][j][k][z][l]+1);\n                        if(j>0) x=min(x,dp[i][j-1][k][z][l]+1);\n                        if(k>0) x=min(x,dp[i][j][k-1][z][l]+1);\n                        if(z>0) x=min(x,dp[i][j][k][z-1][l]+1);\n                        if(l>0) x=min(x,dp[i][j][k][z][l-1]+1);\n                        if(l>1) x=min(x,dp[i][j][k][z][l-2]+1);\n                        //\u5355\u6743\u503c\n                        if(i>0&&k>0) x=min(x,dp[i-1][j][k-1][z][l]+1);\n                        if(l>0&&k>0) x=min(x,dp[i][j][k-1][z][l-1]+1); \n                        //\u4e09\u5e26\u4e00 \n                        if(j>0&&k>0) x=min(x,dp[i][j-1][k-1][z][l]+1);\n                        //\u4e09\u5e26\u4e8c                        \n                        \n                        if(i>1&&z>0) x=min(x,dp[i-2][j][k][z-1][l]+1);\n                        if(i>0&&z>0&&l>0) x=min(x,dp[i-1][j][k][z-1][l-1]+1);\n                        if(z>0&&l>1) x=min(x,dp[i][j][k][z-1][l-2]+1);\n                        if(j>0&&z>0) x=min(x,dp[i][j-1][k][z-1][l]+1);\n                        if(j>1&&z>0) x=min(x,dp[i][j-2][k][z-1][l]+1);\n                        if(z>1) x=min(x,dp[i][j][k][z-2][l]+1);\n                        //\u56db\u5e26\u4e8c\n                        if(z>0) x=min(x,dp[i+1][j][k+1][z-1][l]);\n                        if(k>0) x=min(x,dp[i+1][j+1][k-1][z][l]);\n                        dp[i][j][k][z][l]=min(dp[i][j][k][z][l],x);\n                    }\n}\n\nint main()\n{\n    scanf(\"%d%d\",&T,&n);\n    init();\n    while (T--)\n    {\n        memset(a,0,sizeof(a));\n        ans=n;\n        for (int i=1;i<=n;++i)\n        {\n            scanf(\"%d%d\",&num,&col);\n            if(num==0)\n            {\n                a[14]++;\n                continue;\n            }\n            if(num>=3) a[num-2]++;\n            if(num==1) a[12]++;\n            if(num==2) a[13]++;\n        }\n        dfs(0);\n        printf(\"%d\\n\",ans);\n    }\n    return 0;\n}\n\n```",
        "postTime": 1533811552,
        "uid": 34204,
        "name": "shzr",
        "ccfLevel": 0,
        "title": "2540 \u6597\u5730\u4e3b\u589e\u5f3a\u7248"
    },
    {
        "content": "\u9996\u5148\u8fd9\u9053\u9898\u7684\u6570\u636e\u771f\u7684\u5f88\u5f3a\u800c\u4e14\u9762\u9762\u4ff1\u5230\uff0c\u6709\u4e00\u70b9\u60c5\u51b5\u6ca1\u8003\u8651\u5c31\u4f1awa\u6389\u3002\n\n\u76f4\u63a5\u641c\u7d22\u80af\u5b9aTLE\uff0c\u800c\u6211\u4eec\u53d1\u73b0\u5982\u679c\u4e0d\u8003\u8651\u987a\u5b50\u7684\u8bdd\u5269\u4e0b\u7684\u724c\u6709\u56fa\u5b9a\u7684\u51fa\u6cd5\uff08\u4f46\u662f\u53ef\u80fd\u5f97\u62c6\u67d0\u4e2a\u4e09\u5bf9\u6216\u8005\u56db\u5bf9\uff0c\u738b\u70b8\u53ef\u80fd\u51fa\u6216\u8005\u4e0d\u51fa\uff0c\u8fd9\u4e5f\u5c31\u662f\u52a0\u5f3a\u7248\u548c\u539f\u7248\u7684\u5dee\u522b\uff09\uff0c\u6240\u4ee5\u8003\u8651\u8d2a\u5fc3\u5904\u7406\u3002\n\n\u5bf9\u4e8e\u5982\u4f55\u62c6\u724c\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5dfs\u679a\u4e3e\u6240\u6709\u60c5\u51b5\uff0c\u7136\u540e\u4e00\u4e00\u5224\u65ad\u3002\n\n\u5bf9\u4e8e\u5982\u4f55\u51fa\u987a\u5b50\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u76f4\u63a5dfs\u679a\u4e3e\u6240\u6709\u60c5\u51b5\uff0c\u7136\u540e\u4e00\u4e00\u5224\u65ad\u3002\n\n\u8fd9\u6837dfs\u5957dfs\u5957\u8d2a\u5fc3\u5373\u53ef\u89e3\u51b3\u672c\u9898\u3002\n\n\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\u6ce8\u91ca\u3002\u65f6\u95f4\u590d\u6742\u5ea6$\u8dd1\u5f97\u633a\u5febO(\u8dd1\u5f97\u633a\u5feb)$\u3002\n\n\u4ee3\u7801\u5b9e\u9645\u4e0a\u662f\u5f88\u597d\u5199\u7684\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n,T,d[5],c[20],a,b,kin,ans,tot,mn;\nint gao()\n{\n    int res=0,e[5];memcpy(e,d,sizeof(e));//\u505a\u5b8c\u4e4b\u540e\u8981\u8fd8\u539f\uff0c\u5907\u4efd\u4e00\u4efdd\u6570\u7ec4\n    while(d[4])\n    {\n        if(d[1]<2&&!d[2]) break;//\u4e0d\u80fd\u56db\u5e26\u4e8c\u4e86\n        if(d[1]>=2) d[4]--,d[1]-=2,res++;//\u5e26\u4e24\u4e2a\u5355\u724c\n        else if(d[2]>=2) d[4]--,d[2]-=2,res++;//\u5e26\u4e24\u4e2a\u5bf9\u5b50\n        else if(d[2]==1) d[4]--,d[2]--,res++;//\u5e26\u4e00\u4e2a\u5bf9\u5b50\uff08\u4f18\u5148\u7ea7\u6700\u4f4e\uff09\n    }\n    while(d[3])\n    {\n        if(!d[1]&&!d[2]) break;//\u4e0d\u80fd\u4e09\u5e26\u4e86\n        if(d[1]) d[3]--,d[1]--,res++;//\u5e26\u4e00\u4e2a\u5355\u724c\n        else if(d[2]) d[3]--,d[2]--,res++;//\u5e26\u4e00\u4e2a\u5bf9\u5b50\n    }\n    int g=d[1]+d[2]+d[3]+d[4]+res;//\u603b\u51fa\u724c\u6b21\u6570\n    memcpy(d,e,sizeof(e));return g;//\u8fd8\u539f\n}\nvoid dfs2()\n{\n    tot=min(tot,gao());//\u5373\u65f6\u7edf\u8ba1\u7b54\u6848\n    if(d[3]) d[3]--,d[1]++,d[2]++,dfs2(),d[3]++,d[1]--,d[2]--;//\u628a\u4e09\u5f20\u724c\u62c6\u6210\u4e00\u4e2a\u5355\u724c\u548c\u4e00\u4e2a\u5bf9\u5b50\uff0833344445555\uff09\n    if(d[4]) d[4]--,d[2]++,d[2]++,dfs2(),d[4]++,d[2]--,d[2]--;//\u628a\u56db\u5f20\u724c\u62c6\u6210\u4e24\u4e2a\u5bf9\u5b50\uff0833334444\uff09\n    if(d[4]) d[4]--,d[1]++,d[3]++,dfs2(),d[4]++,d[1]--,d[3]--;//\u628a\u56db\u5f20\u724c\u62c6\u6210\u4e00\u4e2a\u5355\u724c\u548c\u4e00\u4e2a\u4e09\u5bf9\uff0833334444556\uff09\n}\nvoid dfs1(int val)\n{\n    memset(d,0,sizeof(d));for(int i=2;i<=16;i++) d[c[i]]++;//\u7edf\u8ba1\u4e0d\u540c\u5927\u5c0f\u7684\u724c\u7684\u51fa\u73b0\u6b21\u6570\n    tot=1e9;dfs2();ans=min(ans,val+tot);//\u5373\u65f6\u66f4\u65b0\u7b54\u6848\n    for(int i=3;i<=10;i++) if(c[i]>=1) for(int j=i+1;j<=14;j++)//\u51fa\u5355\u987a\n    {\n        if(c[j]<1) break;if(j-i<4) continue;\n        for(int k=i;k<=j;k++) c[k]-=1;dfs1(val+1);for(int k=i;k<=j;k++) c[k]+=1;\n    }\n    for(int i=3;i<=12;i++) if(c[i]>=2) for(int j=i+1;j<=14;j++)//\u51fa\u53cc\u987a\n    {\n        if(c[j]<2) break;if(j-i<2) continue;\n        for(int k=i;k<=j;k++) c[k]-=2;dfs1(val+1);for(int k=i;k<=j;k++) c[k]+=2;\n    }\n    for(int i=3;i<=13;i++) if(c[i]>=3) for(int j=i+1;j<=14;j++)//\u51fa\u4e09\u987a\n    {\n        if(c[j]<3) break;if(j-i<1) continue;\n        for(int k=i;k<=j;k++) c[k]-=3;dfs1(val+1);for(int k=i;k<=j;k++) c[k]+=3;\n    }\n}\nint main()\n{\n    for(scanf(\"%d%d\",&T,&n);T--;)\n    {\n        memset(c,0,sizeof(c));mn=1e9;\n        for(int i=1;i<=n;i++)\n        {\n            scanf(\"%d%d\",&a,&b);\n            if(a==0&&b==1) c[15]++;\n            else if(a==0&&b==2) c[16]++;//\u5927\u5c0f\u738b\n            else if(a==1) c[14]++;\n            else if(a>1) c[a]++;//\u5bf9A\u8fdb\u884c\u5904\u7406\uff0c\u65b9\u4fbf\u51fa\u987a\u5b50\n        }\n        kin=min(c[15],c[16]);\n        c[15]-=kin;c[16]-=kin;//\u51fa\u738b\u70b8\uff08333\u5927\u5c0f\u738b\uff09\n        ans=1e9;dfs1(0);mn=min(mn,kin+ans);\n        c[15]+=kin;c[16]+=kin;//\u4e0d\u51fa\u738b\u70b8\uff083333\u5927\u5c0f\u738b\uff09\n        ans=1e9;dfs1(0);mn=min(mn,ans);\n        printf(\"%d\\n\",mn);\n    }\n}\n```\n\n",
        "postTime": 1541163700,
        "uid": 70545,
        "name": "Awar3ness",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "## P\u7248\u672c\u7684w_32768\u5927\u4f6c\u7684\u9898\u89e3\uff0c\u4ee5\u53ca\u52a0\u4e86\u4e00\u6761\u89c4\u5219\u4f7f\u4e4b\u524d\u88abhack\u7684\u9898\u89e3\u53ef\u4ee5\u8fc7cz\u52a0\u7684\u7b2c48\u4e2a\u70b9\n\n### \u9996\u5148\uff0c\u7528\u66b4\u529b\u641c\u51fa\u987a\u5b50\uff0c\u7136\u540e\u66b4\u529b\u7684\u641c\u7d22\u56de\u6eaf\uff0c\u4e0d\u8d58\u8ff0\n\n### \u5176\u6b21\u6700\u91cd\u8981\u7684\uff0c\u662f\u5bf9\u4e8e\u96f6\u6563\u7684\u724c\u5982\u4f55\u4f18\u79c0\u7684\u7528\u6700\u5c11\u7684\u6b21\u6570\u6253\u5b8c\n\n\u5148\u7edf\u8ba1\u4e00\u4e2acnt\u6570\u7ec4\uff0c\u8303\u56f4\u4e3a0-4\uff0c\u8868\u793a\u724c\u7684\u6570\u91cf\u5206\u522b\u4e3a1-4\u7684\u724c\u7684\u4e2a\u6570\uff08\u56e0\u4e3a\u6211\u4eec\u4e0d\u9700\u8981\u77e5\u9053\u5177\u4f53\u7684\u70b9\u6570\uff0c\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\u8fd9\u79cd\u70b9\u6570\u7684\u724c\u7684\u4e2a\u6570\uff09\n\n\u6211\u4eec\u6765\u5177\u4f53\u5206\u6790\u63a5\u4e0b\u6765\u5982\u4f55\u51fa\u724c\u4ee5\u53ca\u5982\u4f55\u62c6\u724c\n\n\u9996\u5148\u662f\u51e0\u4e2a\u653e\u5728\u524d\u9762\u7279\u7279\u5224\uff0c\u51e0\u79cd\u6bd4\u8f83\u7279\u6b8a\u7684\u60c5\u51b5\uff08\u4e3e\u4f8b\u4e2d\u76f8\u540c\u989c\u8272\u7684\u7b14\u8868\u793a\u6bcf\u6b21\u51fa\u7684\u724c\uff09\uff0c\u4ee3\u7801\u4e2d\u7684qwq\u8868\u793a\u8fd9\u7ec4\u724c\u51fa\u7684\u6b64\u6570\n\n1\n```\nwhile (cnt[2]=0) and (cnt[1]=1) and (cnt[4]=1) and (cnt[3]>1) do\n        begin\n            dec(cnt[3],2);\n            dec(cnt[1]);\n            dec(cnt[4]);\n            inc(qwq,2);\n        end;\n```\n![](https://cdn.luogu.com.cn/upload/pic/42418.png) qwq=2\n\n2\n```\nwhile (cnt[3]=0) and (cnt[1]=1) and (cnt[2]=1) and (cnt[4]>1) do\n        begin\n            dec(cnt[4],2);\n            dec(cnt[1]);\n            dec(cnt[2]);\n            inc(qwq,2);\n        end;\n```\n![](https://cdn.luogu.com.cn/upload/pic/42419.png) qwq=2\n\n\u2191\u7b2c44\u7ec4\u6570\u636e\n\n3\n```\nif cnt[3]+cnt[4]>cnt[1]+cnt[2] then\n        while (cnt[4]<>0) and (cnt[3]<>0) and (cnt[2]<>0) do\n            begin\n                dec(cnt[2]);\n                dec(cnt[3]);\n                dec(cnt[4]);\n                inc(cnt[1]);\n                inc(qwq);\n            end;\n```\n\u4e09\u5f20\u548c\u56db\u5f20\u6bd4\u4e00\u5f20\u548c\u4e24\u5f20\u5927\u5f88\u591a\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u8981\u8003\u8651\u628a\u4e09\u5f20\u548c\u56db\u5f20\u62c6\u6210\u4e00\u5f20\u548c\u4e24\u5f20\n\n\u8fd9\u91cc\u662f\u628a\u4e09\u5f20\u62c6\u6210\u4e86\u4e00\u5f20\u548c\u4e24\u5f20\uff0c\u7136\u540e\u56db\u5e26\u4e24\u5bf9\uff08\u56e0\u4e3a\u4e09\u5f20\u548c\u56db\u5f20\u7684\u603b\u6570\u5927\u4e8e\u4e00\u5f20\u548c\u4e24\u5f20\uff09\n\n4\n```\nif cnt[3]+cnt[4]>cnt[1]+cnt[2] then\n        while (cnt[3]<>0) and (cnt[4]<>0) and (cnt[1]<>0) do\n            begin\n                dec(cnt[1]);\n                inc(cnt[2]);\n                dec(cnt[3]);\n                dec(cnt[4]);\n                inc(qwq);\n            end;\n```\n\u5982\u679c\u4ecd\u7136\u5927\u4e8e\u7684\u8bdd\u628a\u4e09\u62c6\u6210\u4e00\u5f20\u548c\u4e24\u5f20\uff0c\u7136\u540e\u56db\u5e26\u4e24\u5f20\n\n5\n\u7279\u6b8a\u60c5\u51b5\u5904\u7406\u5b8c\u4e86\uff0c\u6211\u4eec\u8003\u8651\u5148\u51fa\u56db\u5e26\u4e8c\u5bf9\uff0c\u540e\u51fa\u56db\u5e26\u4e24\u5f20,\u6700\u540e\u51fa\u56db\u5e26\u4e8c\uff0c\u56e0\u4e3a\u4e09\u53ea\u80fd\u5e26\u4e00\uff0c\u4e0d\u80fd\u5e26\u4e8c\uff0c\u4f60\u5148\u628a\u56db\u5e26\u4e00\u51fa\u5b8c\u4e86\u4e09\u548c\u4e8c\u5c31\u6162\u6162\u5355\u6253\u5427\uff08\u4e0d\u8fc7\u597d\u50cf\u6ca1\u5361\u8fd9\u4e2a\u70b9\u3002\u3002\u3002\uff09\n\n```\nwhile (cnt[4]>0) and (cnt[2]>1) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[2],2);\n            inc(qwq);\n        end;\n    while (cnt[4]>0) and (cnt[1]>1) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[1],2);\n            inc(qwq);\n        end;\n    while (cnt[4]>0) and (cnt[2]>0) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[2]);\n            inc(qwq);\n        end;\n```\n\n6\n\u4e09\u5f20\u7684\u5269\u5f88\u591a\u4f46\u662f\u4e00\u5f20\u548c\u4e24\u5f20\u7684\u5f88\u5c11\uff08\u603b\u6570\u52a0\u8d77\u6765\u5c11\u4e8e\u4e00\uff09\uff0c\u5c31\u628a\u4e09\u4e2a\u4e09\u5f20\u62c6\u6210\u4e24\u4e2a\u4e09\u5f20\u548c\u4e00\u4e2a\u4e00\u5f20\u4e00\u4e2a\u4e00\u5bf9\n```\nif (cnt[3] mod 3=0) and (cnt[1]+cnt[2]<=1) then\n        while cnt[3]>2 do\n            begin\n                dec(cnt[3],3);\n                inc(qwq,2);\n            end;\n```\n\n7\n\u7ee7\u7eed\u4e09\u5e26\u4e8c\u548c\u4e09\u5e26\u4e00\n```\n\twhile (cnt[3]<>0) and (cnt[2]<>0) do \n        begin\n            dec(cnt[3]);\n            dec(cnt[2]);\n            inc(qwq);\n        end;\n\twhile (cnt[3]<>0) and (cnt[1]<>0) do\n        begin\n            dec(cnt[3]);\n            dec(cnt[1]);\n            inc(qwq);\n        end;\n```\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u56db\u548c\u4e09\u5728\u51fa\u5b8c\u4e09\u5e26\u4e00\u4e09\u5e26\u4e8c\u540e\u8fd8\u6709\u7ed3\u4f59\u4e86\n\n### 8\u539f\u9898\u89e3\u6ca1\u6709\u8003\u8651\u7684\u5730\u65b9\n\n\u628a\u4e24\u4e2a\u56db\u5f20\u548c\u4e24\u4e2a\u4e09\u5f20\u7684\u4e24\u4e2a\u4e09\u5f20\u62c6\u6210\u4e24\u4e2a\u4e24\u5f20\u548c\u4e24\u4e2a\u4e00\u5bf9\uff0c\u56db\u5e26\u4e24\u5bf9\u548c\u56db\u5e26\u4e24\u5f20\n```\nwhile (cnt[3]>1) and (cnt[4]>1) do\n        begin\n            inc(qwq,2);\n            dec(cnt[4],2);\n            dec(cnt[3],2);\n        end;\n```\n![](https://cdn.luogu.com.cn/upload/pic/42424.png)\n\n\u2191\u7b2c48\u7ec4cz\u52a0\u7684\u6570\u636e\n\n\n9 \u4e24\u4e2a\u56db\u5f20\u548c\u4e00\u4e2a\u4e09\u5f20\uff0c\u4e09\u5f20\u62c6\u6210\u4e00\u5f20\u548c\u4e24\u5f20\n```\nwhile (cnt[4]>1) and (cnt[3]>0) do\n        begin\n            dec(cnt[3]);\n            dec(cnt[4],2);\n            inc(qwq,2);\n        end;\n```\n\n10 \u4e24\u4e2a\u4e09\u5f20\u548c\u4e00\u4e2a\u56db\u5f20\uff0c\u56db\u5f20\u62c6\u6210\u4e24\u4e2a\u4e24\u5f20\uff0c\u4e24\u4e2a\u4e09\u5e26\u4e8c\n```\nwhile (cnt[3]>1) and (cnt[4]>0) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[3],2);\n            inc(qwq,2);\n        end;\n```\n\n11 \u4e09\u5f20\u6709\u4e09\u4e2a\u7684\u60c5\u51b5\u4e0b\uff0c\u628a\u4e00\u4e2a\u62c6\u6210\u4e00\u5f20\u548c\u4e24\u5f20\uff0c\u4e09\u5e26\u4e00\u4e09\u5e26\u4e8c\n```\nwhile cnt[3]>2 do\n        begin\n            inc(qwq,2);\n            dec(cnt[3],3);\n        end;\n```\n\n12 \u56db\u5f20\u6709\u4e24\u4e2a\u7684\u60c5\u51b5\u4e0b\uff0c\u628a\u4e00\u4e2a\u62c6\u6210\u4e24\u5f20\u548c\u4e24\u5f20\uff0c\u4e24\u4e2a\u56db\u5e26\u4e8c\n```\nwhile cnt[4]>1 do\n        begin\n            inc(qwq);\n            dec(cnt[4],2);\n        end;\n```\n\n13 \u5927\u5c0f\u738b\n\u5982\u679c\u6700\u540e\u5269\u4f59\u4e24\u5f20\u4e00\u4e14\u6709\u5927\u5c0f\u738b\u5c31\u51fa\u706b\u7bad\n\n\u597d\u4e86\u66b4\u529b\u62c6\u724c\u7ed3\u675f\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u4ee3\u7801\u4e86\n\n```\nVar\n    t,n,ans,ii,kk,x,y:longint;\n    num:array[1..15]of longint;\n\nFunction min(xx,yy:longint):longint;\nbegin \n    if xx<yy then exit(xx)\n        else exit(yy);\nend;\n\nProcedure dfs(c:longint);\nvar\n    i,qwq,j,k:longint;\n    cnt:array[0..4]of longint;\n    boom:boolean;\nbegin\n    for i:=1 to 4 do\n        cnt[i]:=0;\n    boom:=false;\n    qwq:=0;\n    if (num[14]=1) and (num[15]=1) then boom:=true;\n    for i:=1 to 15 do\n        inc(cnt[num[i]]);\n    while (cnt[2]=0) and (cnt[1]=1) and (cnt[4]=1) and (cnt[3]>1) do\n        begin\n            dec(cnt[3],2);\n            dec(cnt[1]);\n            dec(cnt[4]);\n            inc(qwq,2);\n        end;\n    while (cnt[3]=0) and (cnt[1]=1) and (cnt[2]=1) and (cnt[4]>1) do\n        begin\n            dec(cnt[4],2);\n            dec(cnt[1]);\n            dec(cnt[2]);\n            inc(qwq,2);\n        end;\n    if cnt[3]+cnt[4]>cnt[1]+cnt[2] then\n        while (cnt[4]<>0) and (cnt[3]<>0) and (cnt[2]<>0) do\n            begin\n                dec(cnt[2]);\n                dec(cnt[3]);\n                dec(cnt[4]);\n                inc(cnt[1]);\n                inc(qwq);\n            end;\n    if cnt[3]+cnt[4]>cnt[1]+cnt[2] then\n        while (cnt[3]<>0) and (cnt[4]<>0) and (cnt[1]<>0) do\n            begin\n                dec(cnt[1]);\n                inc(cnt[2]);\n                dec(cnt[3]);\n                dec(cnt[4]);\n                inc(qwq);\n            end;\n    while (cnt[4]>0) and (cnt[2]>1) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[2],2);\n            inc(qwq);\n        end;\n    while (cnt[4]>0) and (cnt[1]>1) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[1],2);\n            inc(qwq);\n        end;\n    while (cnt[4]>0) and (cnt[2]>0) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[2]);\n            inc(qwq);\n        end;\n    if (cnt[3] mod 3=0) and (cnt[1]+cnt[2]<=1) then\n        while cnt[3]>2 do\n            begin\n                dec(cnt[3],3);\n                inc(qwq,2);\n            end;\n    while (cnt[3]<>0) and (cnt[2]<>0) do \n        begin\n            dec(cnt[3]);\n            dec(cnt[2]);\n            inc(qwq);\n        end;\n    while (cnt[3]<>0) and (cnt[1]<>0) do\n        begin\n            dec(cnt[3]);\n            dec(cnt[1]);\n            inc(qwq);\n        end;\n\twhile (cnt[3]>1) and (cnt[4]>1) do\n\t\t\tbegin\n\t\t\t\tinc(qwq,2);\n\t\t\t\tdec(cnt[4],2);\n\t\t\t\tdec(cnt[3],2);\n\t\t\tend;\n    while (cnt[4]>1) and (cnt[3]>0) do\n        begin\n            dec(cnt[3]);\n            dec(cnt[4],2);\n            inc(qwq,2);\n        end;\n    while (cnt[3]>1) and (cnt[4]>0) do\n        begin\n            dec(cnt[4]);\n            dec(cnt[3],2);\n            inc(qwq,2);\n        end;\n    while cnt[3]>2 do\n        begin\n            inc(qwq,2);\n            dec(cnt[3],3);\n        end;\n    while cnt[4]>1 do\n        begin\n            inc(qwq);\n            dec(cnt[4],2);\n        end;\n    qwq:=qwq+cnt[3]+cnt[4]+cnt[2]+cnt[1]; //\u5982\u679c\u8fd8\u6709\u5269\u4f59\u63a5\u7740\u5f80\u4e0a\u52a0\n    if (boom) and (cnt[1]>=2) then dec(qwq);//\u5982\u679c\u6709\u706b\u7bad\u53ea\u9700\u8981\u4e00\u6b21\n    ans:=min(ans,qwq+c);\n//PS:\u4e24\u70b9\u4e0d\u80fd\u53c2\u52a0\u987a\u5b50\u4f46\u662f\u4e00\u70b9\u53ef\u4ee5\u53c2\u52a0\n    for i:=1 to 12 do\n        begin\n            j:=i;\n            while (j<=12) and (num[j]>2) do\n                begin\n                    if j-i+1>=2 then\n                        begin\n                            for k:=i to j do\n                                num[k]:=num[k]-3;\n                            dfs(c+1);\n                            for k:=i to j do\n                                num[k]:=num[k]+3;\n                        end;\n                    inc(j);\n                end;\n        end;//\u4e09\u987a\n    for i:=1 to 12 do\n        begin\n            j:=i;\n            while (j<=12) and (num[j]>=2) do\n                begin\n                    if (j-i+1>=3) then\n                        begin\n                            for k:=i to j do\n                                num[k]:=num[k]-2;\n                            dfs(c+1);\n                            for k:=i to j do\n                                num[k]:=num[k]+2;\n                        end;\n                    inc(j);\n                end;\n        end;//\u4e24\u987a\n    for i:=1 to 12 do\n        begin\n            j:=i;\n            while (j<=12) and (num[j]<>0) do\n                begin\n                    if (j-i+1>=5) then\n                        begin\n                            for k:=i to j do\n                                dec(num[k]);\n                            dfs(c+1);\n                            for k:=i to j do\n                                inc(num[k]);\n                        end;\n                    inc(j);\n                end;\n        end;//\u4e00\u987a\nend;\n\nBegin\n    readln(t,n);\n    for kk:=1 to t do\n        begin\n            fillchar(num,sizeof(num),0);\n            for ii:=1 to n do\n                begin\n                    read(x,y);\n                    if x=0 then\n                        begin\n                            if y=1 then x:=14\n                                else x:=15;\n                        end\n                    else if (x=1) or (x=2) then x:=x+11\n                        else x:=x-2;\n                    inc(num[x]);\n                end;\n            ans:=n;\n            dfs(0);\n            writeln(ans);\n        end;\nEnd.\n```",
        "postTime": 1541494775,
        "uid": 5931,
        "name": "Misaka19280",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "\u849f\u84bb\u4e0d\u4f1a\u8d2a\u5fc3\uff0c\u770b\u8d77\u6765\u8fd9\u9053\u9898\u597d\u50cf\u5c31\u662f\u4e2a\u641c\u7d22\u9898\u561b\uff0c\u4e0d\u5982\u5c31\u7b80\u5355\u641c\u641c\u770b\u3002\n\n\u5148\u5206\u6790\u4e00\u6ce2\uff0c\u6c42\u6700\u4f18\u6b65\u6570\uff0c\u4e5f\u5c31\u662f\u6bcf\u6253\u4e00\u6b21\u724c\u4ee3\u4ef7\u90fd\u662f1\uff0c\u6c42\u5230\u76ee\u6807\u72b6\u6001\uff08\u624b\u724c\u6ca1\u6709\u4e86\uff09\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\u8003\u8651\u4e0b\u80fd\u4e0d\u80fd\u4ece\u76ee\u6807\u53cd\u63a8\uff1f\u77e5\u9053\u624b\u4e0a\u7684\u724c\uff0c\u4e0a\u4e00\u624b\u6253\u6389\u7684\u662f\u4ec0\u4e48...\u55ef\u60c5\u51b5\u592a\u591a\u4e86\uff0c\u4e0d\u597d\u53cd\u63a8\uff0c\u6240\u4ee5\u8fd9\u9898\u4e0d\u9002\u5408\u53cc\u5411BFS\u3002\u65e2\u7136\u4e0d\u9002\u5408\u53cc\u5411BFS\uff0c\u90a3\u4e48\n\n## \u65e0\u8111\u4e0aA*\n\n\u5f53\u7136\u8fd9\u79cd\u6c42\u6700\u5c0f\u6b65\u6570\u7684\u9898\u76ee\u7528\u6765\u7ec3\u624b\u5199IDA* \u662f\u518d\u597d\u4e0d\u8fc7\u4e86\u3002\n\n\u601d\u8def\u548c\u8fed\u4ee3\u52a0\u6df1\u7684DFS\u662f\u5dee\u4e0d\u591a\u7684\uff0c\u90fd\u662f\u9010\u6b21\u8fed\u4ee3\uff0c\u6df1\u5ea6\u9650\u5236\u6bcf\u6b21+1\uff0c\u6bcf\u6b21\u8fed\u4ee3\u7684\u65f6\u5019\u641c\u7d22\u5230\u5927\u4e8e\u6df1\u5ea6\u9650\u5236\u7684\u65f6\u5019\u5c31\u8fd4\u56de\uff0c\u76f4\u5230\u67d0\u4e00\u4e2a\u8fed\u4ee3\u627e\u5230\u4e86\u4e00\u4e2a\u89e3\u3002\u6240\u4ee5\u8fed\u4ee3\u52a0\u6df1DFS\u548cBFS\u4e00\u6837\u5728\u6c42\u6700\u5c0f\u6b65\u6570\u7684\u65f6\u5019\u90fd\u80fd\u6c42\u51fa\u6765\u6700\u4f18\u89e3\u3002\n\n\u8fed\u4ee3\u52a0\u6df1\u7684 A\\* \u548c\u8fed\u4ee3\u52a0\u6df1DFS\u4e0d\u4e00\u6837\u7684\u5730\u65b9\u5c31\u5728\u4e8e\uff0c\u8fed\u4ee3\u52a0\u6df1DFS\u5224\u65ad\u7684\u662f\u6df1\u5ea6\uff08\u4e5f\u5c31\u662f\u8d77\u70b9\u5230\u5f53\u524d\u8d70\u8fc7\u7684\u6b65\u6570\uff09\u662f\u5426\u5927\u4e8e\u6df1\u5ea6\u9650\u5236\uff0cIDA* \u5224\u65ad\u7684\u662f \uff08\u6df1\u5ea6+\u542f\u53d1\u5f0f\u51fd\u6570\u503c\uff09\u662f\u5426\u5927\u4e8e\u6df1\u5ea6\u9650\u5236\u3002\n\n\u8fd9\u4e2a\u542f\u53d1\u5f0f\u51fd\u6570\u503c\u662f\u4ec0\u4e48\u5462\uff1f\u7b80\u5355\u6765\u8bf4\uff0c\u4ece\u8d77\u70b9s\u5230\u5f53\u524d\u72b6\u6001x\u8d70\u8fc7\u7684\u8def\u5f84\u957f\u53eb\u6df1\u5ea6g(x)\uff0c\u4ecex\u8d70\u5230\u7ec8\u70b9t\u7684**\u6700\u77ed**\u8def\u5f84\u957f\u53ebh\\*(x)\uff0c\u5bf9\u8fd9\u4e2a\u6700\u77ed\u8def\u5f84\u957fh\\*(x)\u7684\u4e00\u4e2a\u4f30\u8ba1\u5c31\u53eb\u505a\u542f\u53d1\u5f0f\u51fd\u6570h(x)\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u63a8\u51fa\u6765\uff0c\u6cbf\u7740\u5f53\u524ds\u641c\u5230x\u7136\u540e\u518d\u7ee7\u7eed\u8d70\u5230\u7ec8\u70b9t\uff0c\u957f\u5ea6\u4e00\u5b9a\u81f3\u5c11\u662fg(x)+h\\*(x)\u3002\u5982\u679c\u5bf9\u4e8e\u6240\u6709\u7684x\u90fd\u6709h(x)<=h\\*(x)\uff0c\u4e5f\u5c31\u662f\u542f\u53d1\u5f0f\u51fd\u6570\u4ece\u6765\u4e0d\u9ad8\u4f30\u5230\u7ec8\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u90a3\u8fd9\u4e2a\u542f\u53d1\u5f0f\u51fd\u6570\u5c31\u662f\u53ef\u63a5\u53d7(admissible)\u7684\uff0c\u7528\u53ef\u63a5\u53d7\u7684\u542f\u53d1\u5f0f\u51fd\u6570\u7684A\\*\uff0c\u7b2c\u4e00\u4e2a\u641c\u5230\u7684\u89e3\u662f\u6700\u4f18\u89e3\u3002\u5bf9\u4e8eIDA\\*\u4e5f\u662f\u4e00\u6837\uff0c\u5982\u679cg(x)+h(x) > depth_limit\uff0c\u90a3\u4e48\u4ecex\u518d\u5f80\u540e\u5c31\u4e0d\u4f1a\u6709depth_limit\u5185\u7684\u89e3\u4e86\uff0c\u8fd9\u91cc\u5c31\u53ef\u4ee5\u8fd4\u56de\u3002\n\n\u90a3\u662f\u4e0d\u662f\u8bbe\u8ba1\u4e00\u4e2a\u542f\u53d1\u5f0f\u51fd\u6570\uff0c\u6bcf\u4e00\u6b21\u679a\u4e3e\u624b\u4e0a\u6709\u591a\u5c11\u79cd\u80fd\u4e00\u6b21\u6253\u51fa\u7684\u7ec4\u5408\uff0c\u8fed\u4ee3\u52a0\u6df1\u641c\u7d22\u5c31\u53ef\u4ee5\u4e86\u5462\uff1f\n\n\u8fd9\u95ee\u9898\u6ca1\u6709\u8fd9\u4e48\u7b80\u5355\uff01\u6211\u4eec\u6f0f\u6389\u4e86\u8fd9\u7c7b\u95ee\u9898\u6700\u91cd\u8981\u7684\u6027\u8d28\uff01\n\n# \u5229\u7528\u95ee\u9898\u7684\u5bf9\u79f0\u6027\u538b\u7f29\u72b6\u6001\u7a7a\u95f4\n\n\u5982\u679c\u4f60\u7528\u641c\u7d22\u5199\u8fc7P2386\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u8fd9\u9053\u9898\u8bf4(5,1,1)\u548c(1,1,5)\u662f\u540c\u4e00\u4e2a\u89e3\uff0c\u53ea\u548c\u6570\u5b57**\u7ec4\u5408**\u6709\u5173\uff0c\u548c**\u987a\u5e8f**\u65e0\u5173\u3002\u641c\u7d22\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e00\u822c\u53ef\u4ee5\u8fd9\u4e48\u505a\uff0c\u4ece\u7b2c\u4e8c\u4e2a\u76d8\u5b50\u5f00\u59cb\uff0c\u6bcf\u4e00\u4e2a\u76d8\u5b50\u653e\u7684\u6570\u76ee\u90fd\u4e0d\u80fd\u8d85\u8fc7\u524d\u4e00\u4e2a\u76d8\u5b50\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ea\u4f1a\u641c\u51fa\u6765\u975e\u5347\u5e8f\u7684\u89e3\uff0c\u6bd4\u5982\u8bf4(5,1,1)\uff0c\u4e0d\u53ef\u80fd\u641c\u51fa\u6765(1,1,5)\uff0c\u8fd9\u6837\u53ea\u8981\u6570\u5b57**\u7ec4\u5408**\u786e\u5b9a\u4e86\uff0c**\u987a\u5e8f**\u5c31\u662f\u552f\u4e00\u7684\u3002\n\n\u90a3\u6597\u5730\u4e3b\u5462\uff1f\u6bd4\u5982\u6211\u624b\u4e0a\u662f\u4e00\u5bf92\u548c\u4e00\u5f203\u3002\u5148\u6253\u5bf92\uff0c\u518d\u62533\uff0c\u4e24\u6b65\u3002\u5148\u62533\uff0c\u518d\u6253\u5bf92\uff0c\u4e24\u6b65\u3002\n\n### \u548c**\u987a\u5e8f**\u65e0\u5173\n\n\u90a3\u6211\u4eec\u641c\u7d22\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u8981\u6c42\uff0c\u6bcf\u4e00\u6b21\u51fa\u724c\u90fd**\u4e0d\u5927\u4e8e**\u4e0a\u4e00\u6b21\u7684\u51fa\u724c\u3002\n\n\u6253\u8fc7\u6597\u5730\u4e3b\u7684\u540c\u5b66\u53ef\u80fd\u8981\u6709\u610f\u89c1\u4e86\uff0c\u5355\u987a\u5b50\u548c\u53cc\u987a\u5b50\u6bd4\uff0c\u5355\u987a\u5b50\u4e5f\u538b\u4e0d\u4e86\u53cc\u987a\u5b50\uff0c\u53cc\u987a\u5b50\u4e5f\u538b\u4e0d\u4e86\u5355\u987a\u5b50\uff0c\u54ea\u91cc\u80fd\u6bd4\u8f83\u5927\u5c0f\u5462\uff1f\n\n\u8fd9\u79cd\u6709\u7684\u65f6\u5019\uff0c\u4e24\u4e2a\u4e1c\u897f\u53ef\u4ee5\u6bd4\u8f83\u5927\u5c0f\uff0c\u6709\u7684\u65f6\u5019\u5206\u4e0d\u51fa\u5927\u5c0f\u7684\u5173\u7cfb\uff0c\u53eb\u505a**\u504f\u5e8f\u5173\u7cfb**\u3002\u6211\u4eec\u8fd9\u91cc\u9700\u8981\u66f4\u5f3a\u4e00\u70b9\u7684\uff0c\u4efb\u610f\u62ff\u51fa\u6765\u4e24\u4e2a\u90fd\u80fd\u6bd4\u8f83\u5927\u5c0f\u7684\uff0c\u5e76\u4e14a<b, b<c \u80fd\u63a8\u51faa<c\u7684\uff0c\u8fd9\u79cd\u53eb\u505a**\u5168\u5e8f\u5173\u7cfb**\u3002\u65e2\u7136\u8fd9\u9053\u9898\u53ea\u662f\u6c42\u6700\u5c0f\u6b65\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u6487\u5f00\u6597\u5730\u4e3b\u7684\u504f\u5e8f\u5173\u7cfb\uff08\u9898\u76ee\u4e5f\u6ca1\u63cf\u8ff0\uff0c\u53ea\u6709\u6253\u8fc7\u6597\u5730\u4e3b\u7684\u77e5\u9053\uff09\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u5168\u5e8f\u5173\u7cfb\u3002\u8fd9\u91cc\u76f4\u63a5\u4e0a\u4ee3\u7801\u4e86\u3002\u8fd9\u6bb5\u4ee3\u7801\u5b9a\u4e49\u4e86cardset\u7c7b\u578b\u7684\u5c0f\u4e8e\u53f7\u3002\n\n```cpp\nstruct cardset{\n\tint count[15];\n\tint tot;\n};\nbool operator< (const cardset &s1, const cardset &s2){\n\tif (s1.tot<s2.tot)\n\t\treturn true;\n\tif (s1.tot>s2.tot)\n\t\treturn false;\n\tfor (int i=1;i<=14;i++)\n\t\tif (s1.count[i]!=s2.count[i])\n\t\t\treturn s1.count[i]<s2.count[i];\n\treturn false;\n}\n```\n\n\u89e3\u91ca\u4e00\u4e0b\uff0c\u4e00\u6b21\u6253\u51fa\u7684\u724c\uff0c\u724c\u6570\u8f83\u5c0f\u7684\u6211\u4eec\u8ba4\u4e3a\u8f83\u5c0f\u3002\u5982\u679c\u724c\u6570\u76f8\u7b49\uff0c\u5219\u6bd4\u8f83count\u6570\u7ec4\u7684\u5b57\u5178\u5e8f\u3002\n\n\u8fd9\u6837\u7684\u5b9a\u4e49\u5bf9\u6253\u724c\u7684\u65b9\u5f0f\u5e26\u6765\u7684\u6700\u76f4\u89c2\u7684\u6539\u53d8\u662f\uff0c\u6211\u5fc5\u987b\u5148\u51fa\u724c\u6570\u8f83\u591a\u7684\u7ec4\u5408\uff0c\u518d\u51fa\u724c\u6570\u8f83\u5c11\u7684\u7ec4\u5408\u3002\u540e\u9762\u7684\u5206\u6790\u80fd\u770b\u51fa\uff0c\u8fd9\u79cd\u6253\u6cd5\u65b9\u4fbf\u6211\u4eec\u8bbe\u8ba1\u542f\u53d1\u5f0f\u51fd\u6570h\u3002\n\n## \u542f\u53d1\u5f0f\u51fd\u6570\u8bbe\u8ba1\n\n\u6211\u624b\u4e0a\u6709\u724c(\u724c\u6570>0)\uff0c\u6700\u7406\u60f3\u7684\u60c5\u51b5\u81f3\u5c11\u51e0\u6b21\u51fa\u5b8c\uff1f 1\u6b21\n\n\u6211\u624b\u4e0a\u670912\u5f20\u724c\uff0c\u51fa\u4e86\u4e00\u4e2a4\u5f20\u7684\u70b8\uff0c\u5269\u4e0b\u516b\u5f20\u81f3\u5c11\u51e0\u6b21\u51fa\u5b8c\uff1f \u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u51fa\u4e864\u5f20\u7684\u7ec4\u5408\u4e86\uff0c\u4e4b\u540e\u4e0d\u80fd\u51fa\u8d85\u8fc74\u5f20\u7684\u724c\uff0cso\u81f3\u5c11 2\u6b21\u3002\n\n\u6211\u624b\u4e0a\u670913\u5f20\u724c\uff0c\u51fa\u4e86\u4e00\u4e2a3\u5f20\uff0c\u5269\u4e0b10\u5f20\u81f3\u5c11\u51e0\u6b21\u51fa\u5b8c\uff1f4\u6b21\u3002\n\n\u6240\u4ee5\uff0c\u542f\u53d1\u5f0f\u51fd\u6570\u8fd9\u4e48\u5b9a\u4e49\uff0c\u521d\u59cb\u72b6\u6001\uff0ch=1\u3002\u5176\u4ed6\u72b6\u6001\uff0ch=\u4e0a\u53d6\u6574\uff08\u5269\u4f59\u5f20\u6570/\u4e0a\u4e00\u6b21\u6253\u7684\u5f20\u6570\uff09\u3002\u8fd9\u4e2a\u542f\u53d1\u5f0f\u51fd\u6570\u6ee1\u8db3\u53ef\u63a5\u53d7\u7684\u6761\u4ef6\uff0c\u53ef\u4ee5\u5f97\u51fa\u6700\u4f18\u89e3\u3002\n\n## \u5224\u91cd\uff1f\n\u65e2\u7136\u90fd\u5199\u8fed\u4ee3\u52a0\u6df1\u4e86\u4e0d\u5c31\u662f\u4e0d\u60f3\u5224\u91cd\u561b\u3002\u800c\u4e14A\\*\u7684\u5224\u91cd\u672c\u6765\u5c31\u6ca1\u6709\u592a\u5927\u7528\u5904\uff0c\u5982\u679c\u4e0d\u662f\u4e3a\u4e86\u5224\u65ad\u65e0\u89e3\u7684\u8bdd\u3002\n\n\u5206\u6790\u5b8c\u6bd5\uff0c\u76f4\u63a5\u4e0a\u4ee3\u7801\u3002\uff08\u4ee3\u7801\u91cc\u8fd8\u6709\u4e2a\u63d0\u524d\u526a\u679d\u7684lowerbound\uff0c\u8fd9\u4e2a\u6ca1\u6709\u7684\u8bdd\u4f1a\u6709\u4e00\u4e2a\u70b9TLE\uff09\u3002\n\n```cpp\n/*\n * doudizhuenhanced.cpp\n *\n *  Created on: 2018 0926\n *      Author: Hou\n */\n\n#include <iostream>\n#include <vector>\n#include <string>\nusing namespace std;\n\nstruct cardset{\n\tint count[15];\n\tint tot;\n\tcardset(){\n\t\tfor (int i=0;i<=14;i++)\n\t\t\tcount[i]=0;\n\t\ttot=0;\n\t}\n\n\tvoid add(int number, int c){\n\t\tcount[number] += c;\n\t\ttot+=c;\n\t}\n\n};\nbool operator< (const cardset &s1, const cardset &s2){\n\tif (s1.tot<s2.tot)\n\t\treturn true;\n\tif (s1.tot>s2.tot)\n\t\treturn false;\n\tfor (int i=1;i<=14;i++)\n\t\tif (s1.count[i]!=s2.count[i])\n\t\t\treturn s1.count[i]<s2.count[i];\n\treturn false;\n}\n\n//for debug output\nostream& operator<< (ostream& stream, const cardset& set) {\n\tfor (int i=1;i<=14;i++)\n\t\tfor (int k=0;k<set.count[i];k++)\n\t\t\tstream<<i<<\",\";\n\treturn stream;\n}\n\nstruct state{\n\tint count[15]; //1:Joker 2~10:Number 11:Jack 12:Queen 13:King 14:Ace\n\tint tot;\n\tint upperbound;\n\tint step;\n\tcardset lastplay;\n\tstate(int n){\n\t\tfor (int i=0;i<15;i++)\n\t\t\tcount[i] = 0;\n\t\ttot=upperbound =n;\n\t\tstep = 0;\n\t\tlastplay.tot = 0;\n\t}\n\tstate(const state& s){\n\t\t*this = s;\n\t}\n\n\tvoid play(const cardset &s){\n\t\ttot -= s.tot;\n\t\tstep++;\n\t\tfor (int i=1;i<=14;i++)\n\t\t\tcount[i] -= s.count[i];\n\t\tupperbound = s.tot;\n\t\tlastplay = s;\n\t}\n};\n\nint n;\n\nvoid find(const state &s, vector<cardset> &plays, int lowerbound, int upperbound){\n\tif (upperbound<lowerbound) return;\n\t//3 shunzi\n\tfor (int i=3;i<=13;i++) if (s.count[i]>=3){\n\t\tcardset play;\n\t\tplay.add(i, 3);\n\t\tint seq = 1;\n\t\tfor (int j=i+1;j<=14;j++){\n\t\t\tif (s.count[j]<3)\n\t\t\t\tbreak;\n\t\t\telse{\n\t\t\t\tseq++;\n\t\t\t\tplay.add(j,3);\n\t\t\t\tif (seq>=2){  //at least a 3-sequence\n\t\t\t\t\tif (play.tot>=lowerbound && play.tot<=upperbound)\n\t\t\t\t\t\tplays.push_back(play);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//2 shunzi\n\tfor (int i=3;i<=12;i++) if (s.count[i]>=2){\n\t\tcardset play;\n\t\tplay.add(i,2);\n\t\tint seq = 1;\n\t\tfor (int j=i+1;j<=14;j++){\n\t\t\tif (s.count[j]<2)\n\t\t\t\tbreak;\n\t\t\telse{\n\t\t\t\tseq++;\n\t\t\t\tplay.add(j,2);\n\t\t\t\tif (seq>=3){  //at least a 3-sequence\n\t\t\t\t\tif (play.tot>=lowerbound && play.tot<=upperbound)\n\t\t\t\t\t\tplays.push_back(play);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//1 shunzi\n\tfor (int i=3;i<=10;i++) if (s.count[i]>=1){\n\t\tcardset play;\n\t\tplay.add(i,1);\n\t\tint seq = 1;\n\t\tfor (int j=i+1;j<=14;j++){\n\t\t\tif (s.count[j]<1)\n\t\t\t\tbreak;\n\t\t\telse{\n\t\t\t\tseq++;\n\t\t\t\tplay.add(j,1);\n\t\t\t\tif (seq>=5){  //at least a 5-sequence\n\t\t\t\t\tif (play.tot>=lowerbound && play.tot<=upperbound)\n\t\t\t\t\t\tplays.push_back(play);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//rocket\n\tif (s.count[1]==2 && lowerbound<=2 && upperbound>=2){\n\t\tcardset rocket;\n\t\trocket.add(1, 2);\n\t\tplays.push_back(rocket);\n\t}\n\n\t//boom\n\tif (lowerbound<=4 && upperbound>=4)\n\t\tfor (int i=1;i<=14;i++){\n\t\t\tcardset boom;\n\t\t\tif (s.count[i]==4){\n\t\t\t\tboom.add(i,4);\n\t\t\t}\n\t\t}\n\n\t//3+2\n\tif (lowerbound<=5 && upperbound>=5)\n\t\tfor (int i=2;i<=14;i++) if(s.count[i]>=3) { //exclude joke\n\t\t\tcardset three;\n\t\t\tthree.add(i, 3);\n\t\t\tfor (int j=2;j<=14;j++) if (j!=i && s.count[j]>=2){\n\t\t\t\tcardset three2 = three;\n\t\t\t\tthree2.add(j,2);\n\t\t\t\tplays.push_back(three2);\n\t\t\t}\n\t\t}\n\n\t//3+1\n\tif (lowerbound<=4 && upperbound>=4)\n\t\tfor (int i=2;i<=14;i++) if(s.count[i]>=3) { //exclude joke\n\t\t\tcardset three;\n\t\t\tthree.add(i, 3);\n\t\t\tfor (int j=1;j<=14;j++) if (j!=i && s.count[j]>=1){\n\t\t\t\tcardset three1 = three;\n\t\t\t\tthree1.add(j,1);\n\t\t\t\tplays.push_back(three1);\n\t\t\t}\n\t\t}\n\n\t//three\n\tif (lowerbound<=3 && upperbound>=3)\n\t\tfor (int i=2;i<=14;i++) if(s.count[i]>=3) { //exclude joke\n\t\t\tcardset three;\n\t\t\tthree.add(i, 3);\n\t\t\tplays.push_back(three);\n\t\t}\n\n\t//couple\n\tif (lowerbound<=2 && upperbound>=2)\n\t\tfor (int i=2;i<=14;i++) if(s.count[i]>=2) { //exclude joke\n\t\t\tcardset couple;\n\t\t\tcouple.add(i, 2);\n\t\t\tplays.push_back(couple);\n\t\t}\n\n\t//single\n\tif (lowerbound<=1 && upperbound>=1)\n\t\tfor (int i=1;i<=14;i++) if(s.count[i]>=1) { //include joke\n\t\t\tcardset single;\n\t\t\tsingle.add(i, 1);\n\t\t\tplays.push_back(single);\n\t\t}\n\n\t//4+2 : 4+4, 4+1couple, 4+2couple, 4+2single\n\tif (lowerbound<=8 && upperbound>=4){\n\t\tfor (int i=2;i<=14;i++) if(s.count[i]>=4) {\n\t\t\tcardset four;\n\t\t\tfour.add(i,4);\n\t\t\t//4+4\n\t\t\tif (lowerbound<=8 && upperbound>=8)\n\t\t\t\tfor (int j=2;j<=14;j++) if (j!=i && s.count[j]>=4){\n\t\t\t\t\tcardset fourfour = four;\n\t\t\t\t\tfourfour.add(j,4);\n\t\t\t\t\tplays.push_back(fourfour);\n\t\t\t\t}\n\n\t\t\t// 4+1couple\n\t\t\tfor (int j=2;j<=14;j++) if (j!=i && s.count[j]>=2){ //Joker excluded\n\t\t\t\tcardset four1couple = four;\n\t\t\t\tfour1couple.add(j, 2);\n\t\t\t\tif (lowerbound<=6 && upperbound>=6)\n\t\t\t\t\tplays.push_back(four1couple);\n\t\t\t\t// 4+2couple\n\t\t\t\tif (lowerbound<=8 && upperbound>=8)\n\t\t\t\t\tfor (int k=j+1;k<=14;k++) if (k!=i && s.count[k]>=2){\n\t\t\t\t\t\tcardset four2couple = four1couple;\n\t\t\t\t\t\tfour2couple.add(k, 2);\n\t\t\t\t\t\tplays.push_back(four2couple);\n\t\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 4+Jokers\n\t\t\tif (s.count[1]==2 && lowerbound<=6 && upperbound>=6){\n\t\t\t\tcardset four2joker = four;\n\t\t\t\tfour2joker.add(1,2);\n\t\t\t\tplays.push_back(four2joker);\n\t\t\t}\n\n\t\t\t// 4+2single\n\t\t\tif (lowerbound<=6 && upperbound>=6)\n\t\t\t\tfor (int j=1;j<=14;j++) if (j!=i && s.count[j]>=1){\n\t\t\t\t\tfor (int k=j+1;k<=14;k++) if (k!=i && s.count[k]>=1){\n\t\t\t\t\t\tcardset four2single = four;\n\t\t\t\t\t\tfour2single.add(j,1);\n\t\t\t\t\t\tfour2single.add(k,1);\n\t\t\t\t\t\tplays.push_back(four2single);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\t}\n\n\n\n}\n\nint idastar(const state &s, int limit){\n\t//goal test\n\tif (s.tot==0){\n\t\treturn s.step;\n\t}\n\t//heuristic pruning\n\tint heuristic = (s.tot-1)/s.upperbound +1; // h = ceil(total/limit)\n\tif (s.step+heuristic>limit)\n\t\treturn 0;\n\n\n\tint lowerbound = (s.tot-1)/(limit-s.step) +1;\n\n\t// play some cards, lowerbound <=numberofcards <=upperbound\n\n\tvector<cardset> plays;\n\n\tfind(s, plays, lowerbound, s.upperbound);\n\n\t//for debug\n\t/*\n\tcout << plays.size() <<\" possible plays\" <<endl;\n\tfor (int i=0;i<plays.size();i++){\n\t\tcout <<\"can play\" << plays[i] <<endl;\n\t}\n\t*/\n\n\tfor (int i=0;i<plays.size();i++){\n\t\tstate next(s);\n\t\tif (s.lastplay.tot ==0 || !(s.lastplay<plays[i]) ){\n\t\t\tnext.play(plays[i]);\n\t\t\tint finish = idastar(next, limit);\n\t\t\tif (finish){\n\t\t\t\treturn finish;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn 0;\n}\n\nvoid solve(){\n\tstate init(n);\n\n\t//input\n\tfor (int i=0;i<n;i++){\n\t\tint number, type;\n\t\tcin >>number >>type;\n\t\tif (number==0) //Joker\n\t\t\tinit.count[1]++;\n\t\tif (number==1) //Ace\n\t\t\tinit.count[14]++;\n\t\telse\n\t\t\tinit.count[number]++;\n\t}\n\n\t//iterative deepening A*\n\tint res;\n\tfor (int limit=1; limit<=n; limit++){\n\t\tres = idastar(init, limit);\n\t\tif (res>0)\n\t\t\tbreak;\n\t}\n\n\tcout <<res <<endl;\n}\n\nint main(){\n\tint T;\n\tcin >>T >>n;\n\n\tfor (int i=0;i<T;i++)\n\t\tsolve();\n\n\treturn 0;\n}\n\n```",
        "postTime": 1537954728,
        "uid": 126612,
        "name": "housq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011-- \u4e0d\u4f1a\u8d2a\u5fc3\uff1f\u7b80\u5355\u641c\u641c\u5c31\u8fc7\u4e86\u561b"
    },
    {
        "content": "\u4ee3\u7801\u5f88\u4e11\u52ff\u55b7\n\n\u5148\u628a\u6240\u6709\u53ef\u80fd\u7684\u60c5\u51b5\u90fd\u8dd1\u4e00\u8fb9\uff0c\u6ce8\u610f\u51e0\u4e2a\u53ef\u4ee5\u62c6\u5206\u7684\n\n\u4e4b\u540eDFS\n\n\u628a\u7279\u6b8a\u7684\u738b\u6539\u6210\u4e00\u4e2a\u5355\u6216\u7b97\u6210\u4e00\u4e2a\u5bf9\u5b50\n\n\u987a\u5b50\u4ece\u5355\u5230\u4e09\u4e00\u4e2a\u4e00\u4e2a\u5224\uff0c\u6ce8\u610f\u51e0\u4e2a\u80fd\u6210\u987a\uff0c\u6ca1\u6709\u98de\u673a\n\n\u6700\u540e\u628a\u4e0a\u6b21\u526a\u6389\u7684\u724c\u5f04\u56de\u6765\n\n\u91cc\u9762\u6709\u522b\u7684\u6ce8\u91ca\uff0c\u5e94\u8be5\u597d\u61c2\u5427\n\n```cpp\n#include<iostream>\n#include<cstdlib>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<cstring>\nusing namespace std;\nint T,n,ans,king;\nint p[15],dp[24][24][24][24],ha[5];//i\u4e2a4\uff0cj\u4e2a3\uff0ck\u4e2a2\uff0cl\u4e2a1 \nint shun[5]={0,5,3,2};\nint calc(int one,int two,int three,int four,int king)\n{\n    if(king==1)\n    {\n        king--;\n        one++;\n    }\n    if(king==0)return dp[four][three][two][one];\n    else return min(dp[four][three][two][one]+1,dp[four][three][two][one+2]);\n}\nvoid dfs(int now)//\u6253\u4e86now\u6b21 \n{\n    //\u76f4\u89c9\u544a\u8bc9\u6211\u8fd9\u5c40\u6625\u5929\u4e86\n    if(now>ans)return;\n    memset(ha,0,sizeof(ha));\n    for(int i=2;i<=14;i++)\n    ha[p[i]]++;\n    ans=min(ans,now+calc(ha[1],ha[2],ha[3],ha[4],king));\n   for(int k=1;k<=3;k++)//\u987a\u5b50 \n    {\n        for(int i=3;i<=14;i++)\n        {\n            int j;\n            for(j=i;j<=14&&p[j]>=k;j++)\n            {\n                p[j]-=k;\n                if(j-i+1>=shun[k])dfs(now+1);\n            }\n            for(j--;j>=i;j--)\n            p[j]+=k;\n        }\n    }\n}\nint main()\n{\n    scanf(\"%d%d\",&T,&n);\n    memset(dp,1,sizeof(dp));\n    dp[0][0][0][0]=0;\n    for(int i=0;i<=n;i++)//\u56db \n    for(int j=0;j<=n;j++)//\u4e09 \n    for(int k=0;k<=n;k++)//\u4e8c \n    for(int l=0;l<=n;l++)//\u4e00 \n    if(i*4+j*3+k*2+l<=n)\n    {\n        dp[i][j][k][l]=i+k+j+l;//\u624b\u724c\u6700\u70b8\n        if(i)\n        {\n            if(i>=1)//\u56db\u62c6\u6210\u4e09\u548c\u4e00\u4e2a\u5355 \n            dp[i][j][k][l]=min(dp[i-1][j+1][k][l+1],dp[i][j][k][l]);\n            if(k>=2)//\u56db\u5e26\u4e24\u5bf9 \n            dp[i][j][k][l]=min(dp[i-1][j][k-2][l]+1,dp[i][j][k][l]);\n            if(i>=2)//\u4e24\u70b8\u62c6\u6210\u56db\u5e26\u4e24\u5bf9 \n            dp[i][j][k][l]=min(dp[i-2][j][k][l]+1,dp[i][j][k][l]);\n            if(k>=1)//\u56db\u5e26\u4e24\u5f20\u6210\u5bf9\u7684\u5355 \n               dp[i][j][k][l]=min(dp[i-1][j][k-1][l]+1,dp[i][j][k][l]);\n            if(l>=2)//\u56db\u5e26\u4e8c\n            dp[i][j][k][l]=min(dp[i-1][j][k][l-2]+1,dp[i][j][k][l]);\n```\n/\\*\u76f4\u63a5\u70b8\\*/\ndp[i][j][k][l]=min(dp[i-1][j][k][l]+1,dp[i][j][k][l]);\n\n```cpp\n        }\n        if(j)\n        {\n            if(j>=1)//\u4e09\u62c6\u6210\u4e00\u5bf9\u4e00\u5355 \n            dp[i][j][k][l]=min(dp[i][j-1][k+1][l+1],dp[i][j][k][l]); \n            if(k>=1)//\u4e09\u5e26\u4e00\u5bf9\n            dp[i][j][k][l]=min(dp[i][j-1][k-1][l]+1,dp[i][j][k][l]); \n            if(l>=1)//\u4e09\u5e26\u4e00 \n            dp[i][j][k][l]=min(dp[i][j-1][k][l-1]+1,dp[i][j][k][l]);\n```\n/\\*\u871c\u6c41\u4e09\u4e2a\\*/\ndp[i][j][k][l]=min(dp[i][j-1][k][l]+1,dp[i][j][k][l]);\n\n```cpp\n        }\n        if(k)//\u5bf9\n        dp[i][j][k][l]=min(dp[i][j][k-1][l]+1,dp[i][j][k][l]);\n        if(l)//\u5355\n        dp[i][j][k][l]=min(dp[i][j][k][l-1]+1,dp[i][j][k][l]); \n    }\n    for(int tt=1;tt<=T;tt++)\n    {\n        memset(p,0,sizeof(p));\n        king=0;\n        for(int i=1;i<=n;i++)\n        {\n            int x,y;\n            scanf(\"%d%d\",&x,&y);\n            if(x==0)king++;\n            else if(x==1)p[14]++;\n            else p[x]++;\n        }    \n    ans=n;\n    dfs(0);\n    printf(\"%d\\n\",ans);\n    }\n     return 0;\n}\n\n```",
        "postTime": 1502789933,
        "uid": 26000,
        "name": "\u6960\u5c71",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "\u4e00\u9053\u641c\u7d22+\u6076\u5fc3\u7684DP---\u6bd2\u7624\u9898\n\n...\u5982\u679c\u6ca1\u6709zqy\u5927\u4f6c\u601d\u8def\u63d0\u793a\u57fa\u672c\u60f3\u4e0d\u51fa\u6765\n\n### \u8003\u8651\u66b4\u529b\u641c\u987a\u5b50\uff0cDP\u51fa\u6563\u724c\n\n\u4e3a\u4ec0\u4e48\u8fd9\u6837\u662f\u5bf9\u7684\u5462\uff1f\u56e0\u4e3a\u53ea\u6709\u987a\u5b50\u4e0e\u70b9\u6570\u76f8\u8fde\u6709\u5173\uff08\u5fc5\u987b\u8fde\u7740\uff09\uff0c\u800c\u6563\u724c\uff08\u51e0\u5e26\u51e0\uff09\u4e0e\u53f7\u7801\u76f8\u8fde\u65e0\u5173\n\n\u66b4\u529b\u641c\u7d22\u987a\u5b50\u53ef\u4ee5\u63a5\u53d7\u5427...\u6ce8\u610f\u7ec6\u8282\u957f\u5ea6\u5fc5\u987b\u5927\u4e8e5\uff0c3\uff0c2\u5c31\u884c\u3002\n\n\u91cd\u70b9\u662fDP\u6253\u6563\u724c\u90e8\u5206\uff08\u849f\u84bb\u4e0d\u4f1a\u8d2a\u5fc3\uff09\n\n\u7531\u4e8e\u6563\u724c\u4e0e\u53f7\u7801\uff08\u70b9\u6570\uff09\u65e0\u5173\uff0c\u6240\u4ee5\u8bbeDP[ a ][ b ][ c ][ d  ][ e ]\u4e3a\u6709a\u5f20\u5355\u724c\uff0cb\u5f20\u5bf9,c\u5bf9\u4e09\u8fde\uff0cd\u4e2a\u70b8\u5f39\uff0ce\u5f20\u738b\u7684\u624b\u724c\u72b6\u6001\n\n\u5355\u5f20\uff0c\u5bf9\u5b50\u548c\u4e09\u5f20\u724c\u5c31\u4e0d\u8bf4\u4e86\uff0c\u8f6c\u79fb\u9053\u7406\u5f88\u7b80\u5355\n\n\u5148\u8003\u8651\u4e09\u5e26\u4e00\uff1a\u666e\u901a\u724c\u7531[ a-1 ][ c-1 ]\u7684\u72b6\u6001\u8f6c\u79fb\u8fc7\u6765\n\n\u522b\u5fd8\u4e86\u738b\u4e5f\u53ef\u4ee5\u5e26\uff0c\u7531[ c-1 ][ e-1 ]\u8f6c\u79fb\u8fc7\u6765\n\n\u540c\u7406\u6709\u56db\u5e26\u4e8c\uff1a\u53ef\u4ee5\u7531\u4efb\u610f\u4e00\u4e2a\u70b8\u5f39\u548c\u4e24\u5f20\u5355\u724c\u6216\u4e24\u5bf9\u724c\u7ec4\u6210\n\n\u672c\u9898\u4e2d\u738b\u4e0d\u7b97\u5bf9\u5b50\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u5728[ d-1 ]\u7684\u57fa\u7840\u4e0a\u53ef\u4ee5\u6709\n\n1.\u5bf9\u5b50\u7b97\u4e24\u5f20\u5355\u724c\uff0c[ b-1 ]\n\n2.\u5bf9\u5b50\u6b63\u5e38\u7b97[ b-2 ]\n\n3.\u4e24\u5f20\u738b\uff0c[ e-2 ]\n\n4.\u70b8\u5f39\u62c6\u6210\u4e24\u5bf9\uff0c\u76f4\u63a5[ d-2 ]\n\n5.\u6b63\u5e38\u4e24\u5355\u724c\uff0c[ a-2 ]\n\n6.\u4e00\u5355\u724c\u4e00\u738b\uff0c[ a-1 ][ e-1 ]\n\n\u4e09\u5e26\u4e8c\u4e8c\u53ea\u80fd\u662f\u5bf9\uff0c\u53ea\u6709[ c-1 ][ b-1 ]\n\n\u706b\u7bad\uff08\u738b\u70b8\uff09\u4e24\u5f20\u738b\uff0c[ e-2 ]\n\n\u8fd9\u6837\u5c31\u5b8c\u4e8b\u4e86\u5417\uff1f\u4e0d\uff0c\u8003\u8651c\u548cd\u53f7\u7801\u76f8\u540c\u53ef\u4ee5\u62c6\u724c\n\n\u4e8e\u662f\u6709\uff1a[ a+1 ][ b+1 ][ c-1 ]\u548c[ a+1 ][ c+1 ][ d-1 ]\u4e24\u79cd\u62c6\u6cd5\n\n\u8fd9\u91cc\u62c6\u724c\uff0c\u624d\u662f\u672c\u9898\u8fd9\u79cd\u89e3\u6cd5\u7684\u5173\u952e\n\n\u8bfb\u5230\u8fd9\u91cc\uff0c\u53ef\u80fd\u4f1a\u6709\u4e24\u4e2a\u95ee\u9898\n\n1.\u4e3a\u4ec0\u4e48\u62c6\u724c\u53ef\u80fd\u4f1a\u66f4\u65b0\u6700\u5c0f\u503c\uff1f\n\n2.\u4e3a\u4ec0\u4e48\u53ea\u80fd\u62c6c\u548cd\uff0c\u4e0d\u80fd\u62c6b?\n\n3.\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u6210\u62c6\u66f4\u591a\u7684\u724c\uff0c\u5982[ c-2 ]\uff1f\n\n\u7b54\u68481:\u5176\u5b9e\u53cd\u7740\u60f3\u5e76\u4e0d\u597d\u60f3\uff0c\u4f46\u6211\u4eec\u5e94\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\n\n\u6bd4\u5982\u73b0\u5728\u6211\u4eec\u6709111333444\u3002\u6309\u7167\u6b63\u5e38DP\u51fa\u7684\u8bdd\uff0c\u4e0d\u80fd\u662f\u987a\u5b50\uff0c\u51fa\u6563\u724c\u7684\u8bdd\u53ea\u80fd\u4e09\u4e2a\u4e09\u5f20\u724c\uff0c\u51fa\u4e09\u6b21\n\n\u4f46\u663e\u7136\u6211\u4eec\u53ef\u4ee51113+44433\u4e09\u5e26\u4e00+\u4e09\u5e26\u4e8c\u4e24\u6b21\u51fa\u51fa\u53bb\n\n\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u5c31\u76f8\u5f53\u4e0e\u5c06\u4e00\u5957\u4e09\u5f20\u724c\u62c6\u6210\u4e00\u5f20\u4e00\u5bf9\uff0c\u66f4\u65b0\u4e86\u6700\u5c0f\u503c\n\n\u7b54\u68482\uff1a\u989d\uff0c\u6210\u5957\u7684\u6563\u724c\u53ea\u6709\u4e09\u5e26\u4e00\uff0c\u4e09\u5e26\u4e00\u5bf9\uff0c\u56db\u5e26\u4e8c\u548c\u56db\u5e26\u4e00\u5bf9\n\n\u89c2\u5bdf\u53d1\u73b0\uff0c\u51e0\u5e26\u51e0\u90fd\u662f\u53ef\u4ee5\u6709\u5bf9\u7684\uff0c\u4e0d\u9700\u8981\u62c6\u5440\u3002\u3002\u3002\n\n\u800c\u4e14\u5bf9\u53ea\u80fd\u62c6\u4e24\u5f20\u5355\uff0c\u76f4\u63a5\u51fa\u4e00\u5bf9\u80af\u5b9a\u5b9a\u6bd4\u51fa\u4e24\u5f20\u5355\u597d\uff0c\u6b21\u6570\u5c111\u561b\n\n\u7b54\u68483\uff1a\u8fd9\u4e2a\u95ee\u9898\u5176\u5b9e\u4e0d\u96be\u60f3\uff0c\n\n\u56e0\u4e3a\u82e5\u6709[ a+2 ][ b+2 ][ c-2 ] (\u53e6\u4e00\u79cd\u4e00\u6837)\uff0c\u5b83\u4f1a\u88ab[ a+1 ][ b+1 ][ c-1 ]\n\n\u8f6c\u79fb\u65f6\u76f4\u63a5\u8003\u8651\u5230\uff0c\u5df2\u8f6c\u79fb\u8fc7\uff0c\u4e0d\u9700\u518d\u8f6c\u79fb\n\n\u597d\u4e86\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u4e0b\u9762\u7ed9\u51fa\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<memory.h>\n#include<algorithm>\nusing namespace std;\nint t,n,ans;\nint dp[30][30][30][30][5],sum[20],cnt[10],ml[4];\nvoid init(){\n\tml[1]=5;ml[2]=3;ml[3]=2;\n\tmemset(dp,0x3f,sizeof(dp));\n\tdp[0][0][0][0][0]=0;\n\tfor(int d=0;d<=25;d++){\n\t\tfor(int c=0;c<=25;c++){\n\t\t\tfor(int a=0;a<=25;a++){\n\t\t\t\tfor(int b=0;b<=25;b++){\n\t\t\t\t\tfor(int e=0;e<=2;e++){\n\t\t\t\t\tint minn=0x3f;\n\t\t\t\t\tif(a>0) minn=min(minn,dp[a-1][b][c][d][e]+1);\n\t\t\t\t\tif(b>0) minn=min(minn,dp[a][b-1][c][d][e]+1);\n\t\t\t\t\tif(c>0) minn=min(minn,dp[a][b][c-1][d][e]+1);\n\t\t\t\t\tif(d>0) minn=min(minn,dp[a][b][c][d-1][e]+1);\n\t\t\t\t\tif(e>0) minn=min(minn,dp[a][b][c][d][e-1]+1);\n\t\t\t\t\t//\u5355\u5f20\n\t\t\t\t\tif(b>0&&d>0) minn=min(minn,dp[a][b-1][c][d-1][e]+1);\n\t\t\t\t\tif(d>0&&e>1) minn=min(minn,dp[a][b][c][d-1][e-2]+1);\n\t\t\t\t\tif(b>1&&d>0) minn=min(minn,dp[a][b-2][c][d-1][e]+1);\n\t\t\t\t\tif(d>1) minn=min(minn,dp[a][b][c][d-2][e]+1);\n\t\t\t\t\tif(a>1&&d>0) minn=min(minn,dp[a-2][b][c][d-1][e]+1);\n\t\t\t\t\tif(a>0&&d>0&&e>0) minn=min(minn,dp[a-1][b][c][d-1][e-1]+1);\n\t\t\t\t\t//\u56db\u5e26\u4e8c\n\t\t\t\t\tif(c>0&&e>0) minn=min(minn,dp[a][b][c-1][d][e-1]+1);\n\t\t\t\t\tif(a>0&&c>0) minn=min(minn,dp[a-1][b][c-1][d][e]+1);\n\t\t\t\t\t//\u4e09\u5e26\u4e00\n\t\t\t\t\tif(b>0&&c>0) minn=min(minn,dp[a][b-1][c-1][d][e]+1);\n\t\t\t\t\t//\u4e09\u5e26\u4e8c\n\t\t\t\t\tif(c>0) minn=min(minn,dp[a+1][b+1][c-1][d][e]);\n\t\t\t\t\tif(d>0) minn=min(minn,dp[a+1][b][c+1][d-1][e]);\n\t\t\t\t\t//\u62c6\u724c\n\t\t\t\t\tif(e>1) minn=min(minn,dp[a][b][c][d][e-2]+1);\n\t\t\t\t\t//\u738b\u70b8\n\t\t\t\t\tdp[a][b][c][d][e]=min(dp[a][b][c][d][e],minn); \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\t\t\n}\nvoid dfs(int step){\n\tif(step>=ans) return;\n\tint len;\n\tfor(int k=1;k<=3;k++){\n\t\tfor(int st=1;st<=12;st++){\n\t\t\tlen=0;\n\t\t\twhile(sum[st+len]>=k&&st+len<=12) len++;\n\t\t\tfor(int s=len;s>=ml[k];s--){\n\t\t\t\tint end=st+s-1;\n\t\t\t\tfor(int i=st;i<=end;i++) sum[i]-=k;\n\t\t\t\tdfs(step+1);//\u641c\u987a\u5b50\u771f\u7684\u5f88\u66b4\u529b\n\t\t\t\tfor(int i=st;i<=end;i++) sum[i]+=k;\n\t\t\t}\n\t\t} \n\t}\n\tcnt[1]=cnt[2]=cnt[3]=cnt[4]=cnt[5]=0;\n\tfor(int i=1;i<=13;i++) cnt[sum[i]]++;cnt[5]=sum[14];\n\tans=min(ans,step+dp[cnt[1]][cnt[2]][cnt[3]][cnt[4]][cnt[5]]);\n}\nint main(){\n\tscanf(\"%d%d\",&t,&n);\n    init();    \n\twhile(t--){\n    \tmemset(sum,0,sizeof(sum));\n\t\tans=n;\n    \tfor(int i=1;i<=n;i++){\n    \t\tint num,col;\n\t\t\tscanf(\"%d%d\",&num,&col);\n    \t\tif(num==0) sum[14]++;\n    \t\telse if(num>=3) sum[num-2]++;\n    \t\telse if(num==1) sum[12]++;\n    \t\telse if(num==2) sum[13]++;\n\t\t}\n\t\tdfs(0);\n\t\tprintf(\"%d\\n\",ans);\n\t}\n\treturn 0;\n}\n```\n\n### \u6700\u540e\u795d\u5927\u5bb6CSP NOI XXXOI RP++! ! !",
        "postTime": 1572078071,
        "uid": 221615,
        "name": "S_S_H",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "\u66b4\u529b\u51fa\u5947\u8ff9\uff0c~~\u6211\u662f\u641c\u7d22\u5c0f\u540d\u58eb~~\u3002\n\n\u535a\u5ba2\u4e2d\u89c2\u770b\u4f53\u9a8c\u66f4\u4f73\uff1a[My Blog](https://xciyang.github.io/)\n\n\n### \u5206\u6790\n\n\u5176\u5b9e\u6211\u4e00\u5f00\u59cb\u6ca1\u6709\u60f3\u7740\u53bb\u5199100\u5206\u7684\u4ee3\u7801\uff0c\u56e0\u4e3a\u7206\u641c\u7684\u590d\u6742\u5ea6\u592a\u5927\uff0c\u7136\u540e\u8fd9\u9898\u597d\u50cf\u6211\u53ea\u4f1a\u7206\u641c\u3002\n\n#### \u7b2c\u4e00\u6b65\n\n\u9996\u5148\uff0c\u5f88\u5bb9\u6613\u60f3\u5230\u4e00\u79cd\u6700\u7eaf\u7cb9\u7684\u7206\u641c\u3002\u6bcf\u5c42\u90fd\u5c06\u5f53\u524d\u5269\u4f59\u724c\u53ef\u884c\u7684\u60c5\u51b5\u5168\u90e8\u679a\u4e3e\u5224\u65ad\uff0c\u7136\u540e\u6253\u51fa\u4e00\u79cd\u53ef\u884c\u7684\u724c\u8fdb\u5165\u4e0b\u4e00\u5c42\u7ee7\u7eed\u641c\u7d22\u3002\n\n```\n\u641c\u7d22\u662f\u76f2\u76ee\u7684\uff0c\u6211\u4eec\u8003\u8651\u526a\u679d\u3002    \u2014\u2014\u67d0\u91d1\u724c\u6559\u7ec3\n```\n\n\u4e00\u4e2a\u526a\u679d\u662f\u641c\u7d22\u5fc5\u5907\uff0c\u5982\u679c\u5f53\u524d\u7b54\u6848\u5927\u4e8e\u6216\u7b49\u4e8e\u5df2\u77e5\u7684\u6700\u5c0f\u7b54\u6848\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u7684\u641c\u7d22\u4e00\u5b9a\u4e0d\u4f1a\u66f4\u65b0\u7b54\u6848\uff0c\u6240\u4ee5\u56de\u5230\u4e0a\u4e00\u5c42\u3002\n\n\u7136\u540e\u518d\u7ee7\u7eed\u60f3\uff0c\u53ef\u4ee5\u52a0\u4e00\u4e2a\u542f\u53d1\u5f0f\u526a\u679d\uff0c\u8ba1\u7b97\u6253\u51fa\u6240\u6709\u5269\u4f59\u724c\u7684\u6700\u5927\u51fa\u724c\u6b21\u6570\u3002\n\n\u7528\u8089\u773c\u5c31\u80fd\u63a8\u51fa\uff0c\u4e00\u526f\u724c\u7684\u6700\u5927\u51fa\u724c\u6b21\u6570\u5c31\u662f\u724c\u7684\u6570\u7801\u79cd\u7c7b\u6570\uff0c\u4e24\u4e2a\u738b\u5728\u6b64\u53ef\u4ee5\u7b97\u4e00\u79cd\u3002\u7136\u540e\u6211\u4eec\u8ba1\u7b97\u51fa\u5f53\u524d\u6700\u5927\u51fa\u724c\u6b21\u6570\u52a0\u4e0a\u5f53\u524d\u5df2\u51fa\u724c\u6b21\u6570\u53bb\u66f4\u65b0\u7b54\u6848\uff0c\u8fd9\u6837\u5c31\u4f1a\u526a\u53bb\u63a5\u4e0b\u6765\u7684\u4e00\u4e9b\u8f83\u5dee\u7684\u51fa\u724c\u65b9\u6cd5\u3002\n\n#### \u7b2c\u4e8c\u6b65\n\n\u4e0a\u9762\u7684\u65b9\u6cd5\u5fc5\u4e0d\u80fd\u901a\u8fc7\u672c\u9898\uff0c\u4e0d\u9700\u8981\u5c1d\u8bd5\u4e5f\u80fd\u731c\u6d4b\u3002\u6240\u4ee5\u8fd8\u8981\u7ee7\u7eed\u526a\u679d\u3002\n\n\u518d\u7a0d\u5fae\u601d\u8003\u4e00\u4e0b\uff0c\u6211\u4eec\u6bcf\u5c42\u641c\u7d22\u5c06\u5168\u90e8\u51fa\u724c\u65b9\u6cd5\u90fd\u679a\u4e3e\u4e00\u904d\u8fc7\u4e8e\u66b4\u529b\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u6709\u4e9b\u51fa\u724c\u65b9\u6cd5\u81ea\u59cb\u81f3\u7ec8\u6c38\u8fdc\u4e0d\u53ef\u884c\uff0c\u5e76\u4e14\u53ef\u884c\u7684\u51fa\u724c\u65b9\u6cd5\u4e00\u5b9a\u8d8a\u6765\u8d8a\u5c11\u3002\u7136\u540e\u5c31\u60f3\u5230\u4e86\u9884\u5904\u7406\uff0c\u6211\u4eec\u9884\u5904\u7406\u51fa\u6700\u5f00\u59cb\u7684\u624b\u724c\u7684\u53ef\u884c\u51fa\u724c\u65b9\u6cd5\u3002\n\n\u8fd9\u91cc\u6211\u7684\u4ee3\u7801\u6781\u5176\u9b3c\u755c\uff0c\u53ef\u80fd\u5bf9\u4ee3\u7801\u80fd\u529b\u6709\u4e9b\u8981\u6c42\u3002\u6211\u7528\u4e86\u4e00\u4e9b\u81ea\u8ba4\u4e3a\u7701\u7a7a\u95f4\uff0c\u7528\u8d77\u6765\u8212\u670d\u7684\u65b9\u6cd5\u3002\u5c06\u53ef\u884c\u65b9\u6cd5\u7684\u4fe1\u606f\u5199\u6210\u7ed3\u6784\u4f53\uff0c\u5c31\u4e0d\u6f14\u793a\uff0c\u4ee3\u7801\u4e2d\u5728\u8bb2\u8bb2\u3002\n\n\u6700\u5173\u952e\u7684\u662f\uff0c\u6211\u4eec\u8981\u8ba1\u7b97\u6bcf\u79cd\u65b9\u6cd5\u7684\u51fa\u724c\u6570\u91cf\uff0c\u53ef\u7528\u6765\u540e\u7eed\u6211\u4eec\u7ee7\u7eed\u4f18\u5316\u3002\n\n\u8fd9\u4e9b\u4ee3\u7801\u5168\u90e8\u53ef\u5728\u8f93\u5165\u540e\u641c\u7d22\u524d\u6267\u884c\uff0c\u6211\u662f\u5c06\u8fd9\u4e9b\u53ef\u884c\u65b9\u6cd5\u653e\u5230\u4e86vector\u4e2d\u3002\u5728\u641c\u7d22\u65f6\uff0c\u679a\u4e3evector\u7684\u6240\u6709\u5143\u7d20\u3002\u518d\u8fdb\u884c\u4e00\u6b21\u9488\u5bf9\u6027\u5224\u65ad\uff0c\u4e5f\u5c31\u662f\u5224\u65ad\u9700\u8981\u6253\u7684\u90a3\u51e0\u5f20\u724c\u5c31\u591f\u4e86\u3002\n\n#### \u7b2c\u4e09\u6b65\n\n\u6211\u4eec\u8bf4\u8bb0\u5f55\u4e86\u6bcf\u79cd\u65b9\u6cd5\u7684\u51fa\u724c\u6570\u91cf\u3002\u90a3\u6211\u4eec\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u8fd9\u6837\u5927\u6982\u80fd\u4f18\u5316\u65f6\u95f4\uff0c\u6211\u4e5f\u4e0d\u77e5\u9053\u3002\n\n\u5728\u8fd9\u6211\u4eec\u63d0\u4e2a\u9192\uff0c\u5982\u679c\u4f60\u5c06\u738b\u70b8\u3001\u5bf9\u5b50\u3001\u4e09\u5f20\u724c\u653e\u5165\u53ef\u884c\u65b9\u6cd5\u4e2d\uff0c\u90a3\u4f60\u4e00\u5b9a\u4f1aTLE\uff0c\u56e0\u4e3a\u6211\u4e00\u5f00\u59cb\u5c31\u662f\u8fd9\u6837\u3002\uff08\u5b9e\u8df5\u51fa\u771f\u77e5\uff0c\u4f46\u5176\u5b9e\u975e\u52a0\u5f3a\u7248\u4e0d\u9700\u8981\uff0c\u5230\u8fd9\u91cc\u5df2\u7ecf\u901a\u8fc7\u4e86\uff09\n\n\u6211\u4eec\u6bcf\u5c42\u641c\u7d22\uff0c\u53ea\u679a\u4e3e\u4e0a\u4e00\u5c42\u641c\u7d22\u679a\u4e3e\u6ca1\u6709\u679a\u4e3e\u5230\u7684\u5c31\u884c\u4e86\uff0c\u8fd9\u662f\u4e2a\u5c0f\u526a\u679d\u3002\u5982\u679c\u5f53\u524d\u65b9\u6cd5\u7684\u51fa\u724c\u6570\u5927\u4e8e\u5f53\u524d\u5269\u4f59\u6570\u91cf\uff0c\u5c31\u76f4\u63a5\u679a\u4e3e\u4e0b\u4e00\u4e2a\u51fa\u724c\u65b9\u6cd5\uff0c\u8fd9\u4e5f\u53ef\u7b97\u4e0a\u4e2a\u5c0f\u526a\u679d\u3002\u7136\u540e\u8fd8\u8981\u518d\u6b21\u5224\u65ad\u5f53\u524d\u5269\u4f59\u7684\u724c\u4e0b\u8fd9\u79cd\u65b9\u6cd5\u662f\u5426\u53ef\u884c\u3002\n\n\u8fd8\u6709\u51e0\u4e2a\u5c0f\u7684\u8981\u70b9\uff0c\u6211\u4eec\u4e0d\u7ba1\u662f\u9884\u5904\u7406\uff0c\u8fd8\u662f\u6bcf\u5c42\u641c\u7d22\u90fd\u8981\u7528\u5230\u4e00\u4e2a\u5c0f\u52a8\u6001\u89c4\u5212\uff0c\u7528\u6765\u6c42\u67d0\u4e2a\u724c\u5f53\u5de6\u7aef\u70b9\uff0c\u53ef\u4ee5\u8fde\u6210\uff08\u5355\u3001\u53cc\u3001\u4e09\uff09\u987a\u5b50\u7684\u6700\u5927\u957f\u5ea6\u3002\u9274\u4e8e\u8fd9\u4e2a\u9898\u7684\u96be\u5ea6\uff0c\u6211\u76f8\u4fe1\u5927\u5bb6\u90fd\u4f1a\u8fd9\u4e2a\u5c0f\u52a8\u5f52\u3002\n\n\u7136\u540e\u8fd8\u6709\u51e0\u4e2a\u63d0\u793a\uff0c\u56db\u5e26\u4e8c\u53ef\u4ee5\u5e26\u4e24\u4e2a\u76f8\u540c\u6570\u7801\u7684\u5bf9\u5b50\uff08\u4fd7\u79f0\u70b8\u5f39\uff09\uff0c\u540c\u7406\uff0c\u53ef\u4ee5\u5e26\u4e24\u4e2a\u76f8\u540c\u6570\u7801\u7684\u4e00\u5f20\u724c\uff08\u4fd7\u79f0\u5bf9\u5b50\uff09\u3002\u7136\u540e1\u5f5314\uff0c\u5927\u5c0f\u738b\u5f5315\u300116\u6bd4\u8f83\u597d\u5199\u4ee3\u7801\u3002\n\n\u7ecf\u8fc7\u591a\u6b21\u63d0\u4ea4\u66f4\u6539\u8c03\u8bd5\uff0c\u7ec8\u4e8e\u901a\u8fc7\u4e86\u672c\u9898\u3002\n\n### \u4ee3\u7801\n\n\u4e0d\u5f00O2\u4e24\u79d2\u591a\u901a\u8fc7\u3002\n\n```cpp\n#include <iostream>\n#include <stdio.h>\n#include <string.h>\n#include <vector>\n#include <algorithm>\nusing namespace std;\nint T, n;\nstruct PAI {\n\tint num, col;\n} ps[30];\n// \u8bb0\u5f55\u724c\u7684\u6570\u7801\uff0c\u989c\u8272\uff08\u6ca1\u5565\u7528\uff09\n#define SHUNZI 3\n#define SANDAI 4\n#define SIDAI 5\n//\u987a\u5b50\u3001\u4e09\u5e26\u3001\u56db\u5e26\nstruct CP {\n    // \u8bb0\u5f55\u51fa\u724c\u65b9\u6cd5\u7684\u4fe1\u606f\n\tint typ, l, r, k1, k2, siz;\n    // typ \u4e3a\u5b8f\u5b9a\u4e49\u7684\u503c\n    // siz \u4e3a\u51fa\u724c\u6570\u91cf\n    // l r \u591a\u79cd\u4f7f\u7528\u3002l\uff1a\u987a\u5b50\u5de6\u7aef\u70b9\uff0c\u5176\u4ed6\u4e3a\u6700\u591a\u7684\u90a3\u5f20\u724c\u3002r\uff1a\u987a\u5b50\u53f3\u7aef\u70b9\uff0c\u5176\u4ed6\u4e3a\u5c11\u7684\u90a3\u5f20\u724c\u9700\u8981\u7684\u4e2a\u6570\n    // k1 k2 \u4e09\u5e26\u3001\u56db\u5e26\u4f7f\u7528\uff0c\u8868\u793a\u9644\u5e26\u54ea\u4e00\uff08\u4e24\uff09\u5f20\u724c\u3002\n\tCP(int typ, int siz, int l= 0, int r= 0, int k1= 0, int k2= 0) {\n\t\tthis->typ= typ, this->siz= siz, this->l= l, this->r= r, this->k1= k1, this->k2= k2;\n\t}\n\tinline int operator<(const CP &c2) const {\n\t\treturn siz > c2.siz;\n\t}\n};\nint pai[20], bestans, us3[20], us2[20], us1[20];\nvector< CP > v;\nvoid dfs(int nown, int nowa, int ls) {\n\tif(nowa >= bestans) return;\n    // \u5c0f\u526a\u679d\n\tbestans= min(bestans, nowa + nown);\n    // \u66f4\u65b0\u7b54\u6848\uff0c\u5168\u90e8\u5355\u6253\uff08\u6ca1\u4ec0\u4e48\u7528\uff09\n\tif(!nown) return;\n\tint res= 0, us[4][20];\n\tmemset(us, 0, sizeof(us));\n\tfor(int i= 2; i <= 16; i++) res+= (pai[i] != 0);\n\tif(pai[15] && pai[16]) --res;\n    // 15\u300116\u4e3a\u5927\u5c0f\u738b\uff0c\u4e3b\u7a0b\u5e8f\u4e2d\u6709\uff0c\u5927\u5c0f\u738b\u53ef\u4ee5\u738b\u70b8\n\tbestans= min(bestans, nowa + res);\n    // \u518d\u6b21\u66f4\u65b0\u7b54\u6848\uff08\u526a\u679d\uff09\n\tfor(int i= 14, cnt= 0; i >= 2; i--) {\n\t\tif(pai[i] < 1) continue;\n\t\tus[1][i]= us[1][i + 1] + 1;\n\t\tif(pai[i] < 2) continue;\n\t\tus[2][i]= us[2][i + 1] + 1;\n\t\tif(pai[i] < 3) continue;\n\t\tus[3][i]= us[3][i + 1] + 1;\n\t}\n    // DP\u51fa\u53ef\u884c\u7684\u987a\u5b50\u957f\u5ea6\n\tfor(int i= ls; i < v.size(); i++) {\n\t\tif(v[i].siz > nown) continue;\n\t\tswitch(v[i].typ) {\n\t\t\tcase SHUNZI: {\n\t\t\t\tif(v[i].r - v[i].l + 1 > us[v[i].k1][v[i].l]) break;\n\t\t\t\tfor(int j= v[i].l; j <= v[i].r; j++) pai[j]-= v[i].k1;\n\t\t\t\tdfs(nown - v[i].siz, nowa + 1, i + 1);\n\t\t\t\tfor(int j= v[i].l; j <= v[i].r; j++) pai[j]+= v[i].k1;\n                // \u5224\u65ad\u987a\u5b50\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SANDAI: {\n\t\t\t\tif(pai[v[i].l] < 3 || pai[v[i].k1] < v[i].r) break;\n\t\t\t\tpai[v[i].l]-= 3, pai[v[i].k1]-= v[i].r;\n\t\t\t\tdfs(nown - v[i].siz, nowa + 1, i + 1);\n\t\t\t\tpai[v[i].l]+= 3, pai[v[i].k1]+= v[i].r;\n                // \u5224\u65ad\u4e09\u5e26\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SIDAI: {\n\t\t\t\tif(pai[v[i].l] < 4) break;\n\t\t\t\tif(pai[v[i].k1] < 1 || pai[v[i].k2] < 1) break;\n\t\t\t\tif(v[i].r == 2 && (pai[v[i].k1] < 2 || pai[v[i].k2] < 2)) break;\n                // \u90fd\u9700\u8981\u4e24\u5f20\n\t\t\t\tif(v[i].r == 2 && v[i].k1 == v[i].k2 && pai[v[i].k1] < 4) break;\n                // \u4e24\u5bf9\u76f8\u540c\u6570\u7801\n\t\t\t\tif(v[i].r == 1 && v[i].k1 == v[i].k2 && pai[v[i].k1] < 2) break;\n                // \u4e24\u5f20\u76f8\u540c\u6570\u7801\n\t\t\t\tpai[v[i].l]-= 4;\n\t\t\t\tpai[v[i].k1]-= v[i].r;\n\t\t\t\tpai[v[i].k2]-= v[i].r;\n\t\t\t\tdfs(nown - v[i].siz, nowa + 1, i + 1);\n\t\t\t\tpai[v[i].l]+= 4;\n\t\t\t\tpai[v[i].k1]+= v[i].r;\n\t\t\t\tpai[v[i].k2]+= v[i].r;\n                // \u5224\u65ad\u56db\u5e26\n\t\t\t}\n\t\t\tdefault: break;\n\t\t}\n\t}\n\treturn;\n}\nint main() {\n\tscanf(\"%d%d\", &T, &n);\n\twhile(T--) {\n\t\tmemset(pai, 0, sizeof(pai)), bestans= 0x3f3f3f3f;\n\t\tfor(int i= 1; i <= n; i++) {\n\t\t\tscanf(\"%d%d\", &ps[i].num, &ps[i].col);\n\t\t\tif(ps[i].num == 1) ps[i].num= 14;\n            // 1 \u5f53 14\n\t\t\tif(ps[i].num == 0) ps[i].num= ps[i].col + 14;\n            // \u5927\u5c0f\u738b\u5f5315\u300116\n\t\t\t++pai[ps[i].num];\n\t\t}\n\t\tmemset(us3, 0, sizeof(us3)), memset(us2, 0, sizeof(us2)), memset(us1, 0, sizeof(us1));\n\t\tv.clear();\n\t\tfor(int i= 14; i >= 3; i--) {\n\t\t\tif(pai[i] < 1) continue;\n\t\t\tus1[i]= us1[i + 1] + 1;\n\t\t\tif(pai[i] < 2) continue;\n\t\t\tus2[i]= us2[i + 1] + 1;\n\t\t\tif(pai[i] < 3) continue;\n\t\t\tus3[i]= us3[i + 1] + 1;\n\t\t}\n        // DP\u51fa\u987a\u5b50\u957f\u5ea6\n\t\tfor(int i= 2; i <= 16; i++) {\n\t\t\tfor(int j= 5; j <= us1[i]; j++) v.push_back(CP(SHUNZI, j, i, i + j - 1, 1));\n\t\t\tfor(int j= 3; j <= us2[i]; j++) v.push_back(CP(SHUNZI, j * 2, i, i + j - 1, 2));\n\t\t\tfor(int j= 2; j <= us3[i]; j++) v.push_back(CP(SHUNZI, j * 3, i, i + j - 1, 3));\n            // i \u5f53\u5de6\u7aef\u70b9\u7684\u987a\u5b50\n\t\t\tif(pai[i] < 3) continue;\n\t\t\tfor(int j= 2; j <= 16; j++) {\n\t\t\t\tif(i == j || !pai[j]) continue;\n\t\t\t\tv.push_back(CP(SANDAI, 4, i, 1, j));\n\t\t\t\tif(pai[j] < 2) continue;\n\t\t\t\tv.push_back(CP(SANDAI, 5, i, 2, j));\n\t\t\t}\n            // \u4e09\u5e26\n\t\t\tif(pai[i] < 4) continue;\n\t\t\tfor(int j= 2; j <= 16; j++) {\n\t\t\t\tif(i == j || !pai[j]) continue;\n\t\t\t\tfor(int k= j + 1; k <= 16; k++) {\n\t\t\t\t\tif(i == k || !pai[k]) continue;\n\t\t\t\t\tv.push_back(CP(SIDAI, 6, i, 1, j, k));\n\t\t\t\t\tif(pai[j] < 2 || pai[k] < 2) continue;\n\t\t\t\t\tv.push_back(CP(SIDAI, 8, i, 2, j, k));\n\t\t\t\t}\n\t\t\t\tif(pai[j] == 4) v.push_back(CP(SIDAI, 8, i, 2, j, j));\n\t\t\t\tif(pai[j] > 2) v.push_back(CP(SIDAI, 6, i, 1, j, j));\n\t\t\t}\n            // \u56db\u5e26\n\t\t}\n\t\tsort(v.begin(), v.end());\n        // \u6392\u5e8f\n\t\tdfs(n, 0, 0);\n\t\tcout << bestans << endl;\n\t}\n\treturn 0;\n}\n\u00b7\u00b7\u00b7",
        "postTime": 1568988066,
        "uid": 109815,
        "name": "Ciyang",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "\u4f5c\u4e3a\u6597\u5730\u4e3b\u7684\u52a0\u5f3a\u7248\uff0c\u8fd9\u9053\u9898\u7f16\u7a0b\u96be\u5ea6\u6bd4NOIP\u771f\u9898\u8981\u5927\u3002NOIP\u771f\u9898\u662f\u4e0d\u7528\u8003\u8651\u628a\u540c\u7801\u6570\u5361\u724c\u88ab\u62c6\u5206\u7528\u4e8e\u914d\u5408\u56db\u5e26\u4e8c\u6216\u4e09\u5e26\u4e00\u7684\u60c5\u51b5\uff08\u4e3e\u4f8b\uff1a\u73b0\u67094\u5f20A\u548c4\u5f202\uff0c\u6211\u4eec\u5fc5\u987b\u628a4\u5f202\u770b\u505a\u4e24\u5bf92\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee51\u6b21\u6253\u51fa\uff09\u3002\n\n\u8003\u8651\u2026\u2026\u56e0\u4e3a\u53ea\u8981\u628a\u724c\u51fa\u5b8c\u5c31\u884c\u4e86\uff0c\u5e76\u4e0d\u9700\u8981\u8003\u8651\u5927\u5c0f\uff0c\u663e\u7136\u53ea\u8981\u662f\u5355\u5f20/\u5bf9\u5b50/\u4e09\u5f20/\u56db\u5f20\uff0c\u4e0d\u7ba1\u70b9\u6570\uff0c\u5230\u6700\u540e\u7ed3\u7b97\u548c\u4e00\u8fb9\u679a\u4e3e\u4e00\u8fb9\u7b97\u662f\u7b49\u6548\u7684\uff0c\u4e8e\u662f\u53ea\u7528\u66b4\u529b\u679a\u4e3e\u4e00\u4e0b\u987a\u5b50\uff0c\u5176\u4ed6\u7684\u724c\u8bb0\u5f55\u4e00\u4e0b\u662f\u600e\u4e48\u51fa\u7684\uff08\u5355\u5f20\uff1f\u5bf9\u5b50\uff1f\u4e09\u5f20\uff1f\u56db\u5f20\uff1f\uff09\u5c31\u597d\u4e86\uff0c\u5e76\u4e0d\u9700\u8981\u526a\u679d\u56e0\u4e3a\u8fd9\u4e2a\u679a\u4e3e\u7684\u65b9\u6848\u6570\u8db3\u591f\u5c11233333\n\n\u5355\u72ec\u5f00\u4e00\u4e2arec\u6570\u7ec4\u8bb0\u5f55\u4e00\u4e0b\u5f53\u524d\u72b6\u6001\u4e0b\u6709\u591a\u5c11\u5f20\u724c\u662f\u4ee5\u5355\u5f20/\u5bf9\u5b50/\u4e09\u5f20/\u56db\u5f20\u7684\u65b9\u6cd5\u51fa\u7684\n\ndfs(now)\u8868\u793a\u6bd4now\u5c0f\u7684\u724c\u90fd\u5df2\u7ecf\u51fa\u5b8c\u4e86\uff08\u5982\u679c\u662f\u987a\u5b50\u5c31\u76f4\u63a5\u5728\u6570\u91cf\u4e0a\u52a0\u52a0\u51cf\u51cf\uff0c\u5982\u679c\u662f\u5bf9\u5b50\u5355\u5f20\u90a3\u79cd\u5c31\u76f4\u63a5++rec[x]\u3002\n\n\u6700\u540e\u7b97\u7684\u65f6\u5019\u663e\u7136\u56db\u5e26\u4e8c\u6bd4\u4e09\u5e26\u4e00\uff08\u4e09\u5e26\u4e8c\u4e5f\u662f\u4e09\u5e26\u4e00\u7684\u4e00\u79cd\u561b\uff09\u7684\u8981\u6c42\u591a\u4e00\u4e9b\uff0c\u4e8e\u662f\u5148\u5224\u56db\u5e26\u4e8c\u53ef\u4ee5\u51fa\u591a\u5c11\uff0c\u518d\u5224\u4e09\u5e26\u4e00\u80fd\u51fa\u591a\u5c11\uff0c\u6700\u540e\u628a\u5269\u4e0b\u7684\u52a0\u8d77\u6765\u5c31\u597d\uff0c\u57fa\u672c\u5c31\u662f\u66b4\u529b\u679a\u4e3e+\u8d2a\u5fc3\u5730\u51fa\u724c\u76f4\u63a5\u66f4\u65b0\u7b54\u6848\n\n  \n\n  \n  \n      \n      \n      \n  \n```cpp\n#include<bits/stdc++.h>   \nusing namespace std;    int T,n,ra,rb;  \nconst int nxt[15]={-1,2,0,4,5,6,7,8,9,10,11,12,13,1};   \nint cnt[17];  \nint ans;  \nint rec[5];  \ninline int get_min(){  \n    int rtn=0;  \n    int a=rec[1],b=rec[2],c=rec[3],d=rec[4];  \n    if((a>>1)<=d)  d-=(a>>1),rtn+=(a>>1),a&=1;  \n    else    a-=(d<<1),rtn+=d,d=0;  \n    if((b>>1)<=d)  d-=(b>>1),rtn+=(b>>1),b&=1;  \n    else    b-=(d<<1),rtn+=d,d=0;  \n    if(a<=c) c-=a,rtn+=a,a=0;  \n    else    a-=c,rtn+=c,c=0;  \n    if(b<=c) c-=b,rtn+=b,b=0;  \n    else    b-=c,rtn+=c,c=0;  \n    return rtn+a+b+c+d;  \n}  \nvoid dfs(int now,int stp){  \n    if(!now)  \n    {\n        //    if(get_min()==4) printf(\"%d %d %d %d\\n\",rec[1],rec[2],rec[3],rec[4]);\n        return void(ans=min(ans,stp+get_min()));}\n    if(!cnt[now])   return dfs(nxt[now],stp);   \n    if(cnt[now]>=3 && now>2 && now<=13){  \n        int lth=0;  \n        for(int i=now;(i^2)&&cnt[i]>=3;i=nxt[i],++lth);  \n        while(lth>=2){  \n            for(int i=1,j=now;i<=lth;++i,j=nxt[j])   cnt[j]-=3;  \n            dfs(now,stp+1);  \n            for(int i=1,j=now;i<=lth;++i,j=nxt[j])   cnt[j]+=3;  \n            --lth;  \n        }  \n    }  \n    if(cnt[now]>=2 && now>2 && now<=12){  \n        int lth=0;  \n        for(int i=now;(i^2)&&cnt[i]>=2;i=nxt[i],++lth);  \n        while(lth>=3){  \n            for(int i=1,j=now;i<=lth;++i,j=nxt[j])   cnt[j]-=2;  \n            dfs(now,stp+1);  \n            for(int i=1,j=now;i<=lth;++i,j=nxt[j])   cnt[j]+=2;  \n            --lth;   \n        }  \n    }  \n    if(cnt[now]>=1 && now>2 && now <=10){  \n        int lth=0;  \n        for(int i=now;(i^2)&&cnt[i]>=1;i=nxt[i],++lth);  \n        while(lth>=5){  \n            for(int i=1,j=now;i<=lth;++i,j=nxt[j])   --cnt[j];  \n            dfs(now,stp+1);  \n            for(int i=1,j=now;i<=lth;++i,j=nxt[j])   ++cnt[j];  \n            --lth;            \n        }  \n    }  \n    if(cnt[now]==4){  \n        ++rec[4],dfs(nxt[now],stp),--rec[4];  \n        ++rec[3],++rec[1],dfs(nxt[now],stp),--rec[3],--rec[1];  \n        rec[2]+=2,dfs(nxt[now],stp),rec[2]-=2;  \n        ++rec[2],rec[1]+=2,dfs(nxt[now],stp),--rec[2],rec[1]-=2;  \n        rec[1]+=4,dfs(nxt[now],stp),rec[1]-=4;  \n    }  \n    if(cnt[now]==3){  \n        ++rec[3],dfs(nxt[now],stp),--rec[3];  \n        ++rec[2],++rec[1],dfs(nxt[now],stp),--rec[2],--rec[1];  \n        rec[1]+=3,dfs(nxt[now],stp),rec[1]-=3;  \n    }  \n    if(cnt[now]==2){  \n        ++rec[2],dfs(nxt[now],stp),--rec[2];  \n        rec[1]+=2,dfs(nxt[now],stp),rec[1]-=2;  \n    }  \n    if(cnt[now]==1)  \n        ++rec[1],dfs(nxt[now],stp),--rec[1];  \n}  \nint main()\n{  \n    scanf(\"%d%d\",&T,&n);  \n    while(T--)\n    {  \n        memset(cnt,0,sizeof cnt);  \n        ans=n;  \n        rec[1]=rec[2]=rec[3]=rec[4]=0;  \n        for(int i=1;i<=n;++i)  \n        scanf(\"%d%d\",&ra,&rb),ra?++cnt[ra]:++cnt[13+rb]; \n        if(cnt[14]) ++rec[1];  \n        if(cnt[15]) ++rec[1];  \n        dfs(3,0);  \n        if(cnt[14]) --rec[1];  \n        if(cnt[15]) --rec[1];  \n        if(cnt[14]&&cnt[15])  \n            dfs(3,1);  \n        printf(\"%d\\n\",ans);  \n    }  \n    return 0;  \n}  \n\n```",
        "postTime": 1506157180,
        "uid": 21534,
        "name": "ysner",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "CSDN\u535a\u5ba2 [\u849f\u84bb\u535a\u5ba2\u4f20\u9001\u95e8](https://blog.csdn.net/Ike940067893/article/details/83832718)\n\n\u66b4\u641c\u987a\u5b50\uff0cDP\u9884\u5904\u7406\u5269\u4e0b\u7684\u3002\n\u7531\u4e8e\u5b98\u65b9\u6570\u636e\u592a\u6c34\uff0c\u5f88\u591a\u60c5\u51b5\u6ca1\u6709\u8ba8\u8bba\u7684\u90fd\u80fd\u8fc7\u666e\u901a\u7248\u672c\uff0c\u60f3\u8981\u6d4b\u8bd5\u81ea\u5df1\u4ee3\u7801\u7684\u6b63\u786e\u6027\u7684\u540c\u5b66\u4eec\u53ef\u4ee5\u4ea4\u4ea4\u8fd9\u9053\u9898\uff0c\u6709\u5f88\u591adalao\u7ed9\u51fa\u4e86hack\u6570\u636e \uff1a\nLuogu P2540 \u6597\u5730\u4e3b \u589e\u5f3a\u7248  [\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/P2540)\n\n\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\u6ce8\u91ca\nAC code\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN = 25;\nint n, cnt[15], p[5], Ans, dp[6][8][12][24];\n// 14 A\n// 0 king\n\ntemplate<class T>inline bool chkmin(T &x, T y) { return y < x ? x = y, 1 : 0; }\n\ninline int solve(int i, int j, int k, int w, int king)\n{\n\tif(king == 0) return dp[i][j][k][w];\n\tif(king == 1) return dp[i][j][k][w+1]; // \u5355\u6253\n\treturn min(dp[i][j][k][w] + 1,  dp[i][j][k][w+2]); //\u738b\u70b8 + \u5355\u6253\n}\n\nint need[4] = { 0, 5, 3, 2 };\n\nvoid dfs(int now)\n{\n\tif(now >= Ans) return;\n\tmemset(p, 0, sizeof p); //\u6ce8\u610f\u6e05\u96f6\n\tfor(int i = 2; i <= 14; i++) p[cnt[i]]++; //\u7edf\u8ba1 4 3 2 1 \u4e2a\u7684\n\tchkmin(Ans, now + solve(p[4], p[3], p[2], p[1], cnt[0]));\n\tfor(int len = 1; len <= 3; len++) //\u679a\u4e3e\u987a\u5b50\u6bcf\u4e2a\u6570\u5b57\u51fa\u73b0\u6b21\u6570\n\t\tfor(int i = 3, j; i <= 14; i++) //\u679a\u4e3e\u8d77\u70b9\n\t\t{\n\t\t\tfor(j = i; j <= 14 && cnt[j] >= len; j++) //\u679a\u4e3e\u7ec8\u70b9\n\t\t\t{\n\t\t\t\tcnt[j] -= len;\n\t\t\t\tif(j - i + 1 >= need[len]) dfs(now+1);\n\t\t\t}\n\t\t\twhile(--j >= i) cnt[j] += len;\n\t\t}\n}\n\nvoid Pre() //DP\u9884\u5904\u7406\n{\n\tmemset(dp, 0x3f, sizeof dp);\n\tfor(int i = 0; i <= n/4; i++)\n\t\tfor(int j = 0; j <= n/3; j++)\n\t\t\tfor(int k = 0; k <= n/2; k++)\n\t\t\t\tfor(int w = 0; w <= n; w++) if(i*4 + j*3 + k*2 + w <= n)\n\t\t\t\t{\n\t\t\t\t\tdp[i][j][k][w] = i + j + k + w;\n\t\t\t\t\tif(i)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(w >= 2) chkmin(dp[i][j][k][w], dp[i-1][j][k][w-2] + 1);\n\t\t\t\t\t\tif(k >= 2) chkmin(dp[i][j][k][w], dp[i-1][j][k-2][w] + 1);\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i-1][j][k][w] + 1); // \u6253 \u70b8\u5f39\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i-1][j][k+2][w]); //\u62c6\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i-1][j][k+1][w+2]); //\u62c6\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i-1][j][k+1][w+2]); //\u62c6\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i-1][j][k][w+4]); //\u62c6\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i-1][j+1][k][w+1]); //\u62c6\n\t\t\t\t\t}\n\t\t\t\t\tif(j)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(w >= 1) chkmin(dp[i][j][k][w], dp[i][j-1][k][w-1] + 1);\n\t\t\t\t\t\tif(k >= 1) chkmin(dp[i][j][k][w], dp[i][j-1][k-1][w] + 1);\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i][j-1][k][w] + 1); //\u6253 3 \u4e2a\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i][j-1][k][w+3]); //\u62c6\n\t\t\t\t\t\tchkmin(dp[i][j][k][w], dp[i][j-1][k+1][w+1]); //\u62c6\n\t\t\t\t\t}\n\t\t\t\t\tif(k) chkmin(dp[i][j][k][w], dp[i][j][k-1][w] + 1), chkmin(dp[i][j][k][w], dp[i][j][k-1][w+2]); // \u6253 2 \u4e2a + \u62c6\n\t\t\t\t\tif(w) chkmin(dp[i][j][k][w], dp[i][j][k][w-1] + 1); //\u6253 1 \u4e2a\n\t\t\t\t}\n}\n\nint main ()\n{\n    int T, x, y;\n\tscanf(\"%d%d\", &T, &n);\n\tPre();\n\twhile(T--)\n\t{\n\t\tmemset(cnt, 0, sizeof cnt);\n\t\t\n\t\tfor(int i = 1; i <= n; i++)\n\t\t{\n\t\t\tscanf(\"%d%d\", &x, &y);\n\t\t\tif(x == 1) x = 14;// \u628a A -> 14\n\t\t\tcnt[x]++;\n\t\t}\n\t\tAns = n; dfs(0);\n\t\tprintf(\"%d\\n\", Ans);\n\t}\n}\n```",
        "postTime": 1541599171,
        "uid": 30433,
        "name": "Ark_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "### \u641c\u7d22\u4e4b\u540e\u679a\u4e3e\u5566\n### \u6bd4\u8d2a\u5fc3\u66f4\u5bb9\u6613\u60f3\u5230\uff0c\u6bd4DP\u66f4\u5bb9\u6613\u5199\n\n1.\u641c\u7d22**\u6bcf\u4e00\u79cd**\u987a\u5b50\u3001\u8fde\u5bf9\u3001\u4e09\u987a\uff1b(\u679a\u4e3e\u987a\u5b50\u7684\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\uff0c\u7136\u540e\u5224\u65ad\u724c\u6570\u591f\u4e0d\u591f\uff0c\u7136\u540e\u6839\u636e\u6253\u548c\u4e0d\u6253\u5206\u522b\u641c\u7d22\u4e0b\u53bb)\n\n2.\u5f53\u738b\u70b8\u5b58\u5728\u65f6\u7279\u5224\u5c06\u738b\u70b8\u6253\u51fa\u8fd8\u662f\u62c6\u6210\u4e24\u5f20\u5355\u724c\n\n**3.\u679a\u4e3e\u5c06\u591a\u5c11\u4e2a\u56db\u5f20\u62c6\u62103+1,\u5c06\u591a\u5c11\u4e2a\u56db\u5f20\u62c6\u62102+2,\u5c06\u591a\u5c11\u4e2a\u4e09\u5f20\u62c6\u62102+1**(\u5f53\u7136\uff0c\u5bf9\u5b50\u53ef\u4ee5\u62c6\u62101+1\uff0c\u4f46\u662f\u53ea\u6709\u5728\u56db\u5e26\u4e00\u5bf9\u7684\u65f6\u5019\uff0c\u62c6\u62101+1\u4f1a\u66f4\u4f18\uff0c\u6240\u4ee5\u4e0d\u7528\u679a\u4e3e)\n\n4.\u518d\u8d2a\u5fc3\u5730\u53d6\u56db\u5e26\u4e8c\u3001\u56db\u5e26\u4e24\u5bf9\u3001\u4e09\u5e26\u4e00\u3001\u4e09\u5e26\u4e00\u5bf9\uff0c\u7136\u540e\u5355\u6253\u6389\u5269\u4f59\u7684\u724c\n\n### \u7b2c\u4e09\u6b65\u662f\u6211\u7684\u7a0b\u5e8f\u4e0e\u5176\u4ed6\u9898\u89e3\u5dee\u522b\u6700\u5927\u4e4b\u5904\u3010\u3010\u4e5f\u662f\u6211\u53d1\u9898\u89e3\u7684\u81ea\u4fe1\u6765\u6e90\n\n\u5982\u4e0a\u9762dalao\u7684\u9898\u89e3\u6240\u8bf4\uff0c**\u600e\u6837\u6253\u5269\u4f59\u7684\u724c\u624d\u662f\u8fd9\u9053\u9898\u7684\u5173\u952e**\u3002\u8fd9\u6837\u679a\u4e3e\u7684\u65b9\u6cd5\u80fd\u591f\u5927\u5e45\u5ea6\u51cf\u5c11\u601d\u7ef4\u91cf\uff0c\u540c\u65f6\u601d\u8def\u66f4\u52a0\u6e05\u6670\u4e0d\u5bb9\u6613\u7ed5\u6655\u3002\n\n\u4e0b\u9762\u8d34\u4e0a\u849f\u84bb\u4ee3\u7801:)\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<cstring>\nconst int N = 25;\nusing namespace std;\nint card[N], n;\nint num[5];\nint cnt, ans = 0x3f3f3f3f;\nvoid input()\n{\n    int x, y;\n    for(int i = 1; i <= n; ++ i)\n    {\n        scanf(\"%d%d\", &x, &y);\n        if(x == 0) ++ card[14+y];\n        else if(x == 1) ++ card[14];\n        else ++ card[x];\n    }\n}\n\nvoid chk()\n{\n    int now;\n    int a[N];\n    memset(num, 0, sizeof(num));\n    for(int i = 2; i <= 16; ++ i)\n        num[card[i]] ++;\n    for(int i = 0; i <= num[4]; ++ i)\n        for(int j = 0; j <= num[3]; ++ j)\n            for(int k = 0; k + i <= num[4]; ++ k)\n            {\n                memcpy(a, num, sizeof(num));\n                now = cnt;\n                a[4] -= i, a[2] += i * 2;\n                a[3] -= j, a[2] += j, a[1] += j;\n                a[4] -= k, a[3] += k, a[1] += k;\n                while(a[4] && a[1] >= 2) -- a[4], a[1] -= 2, ++ now; \n                while(a[4] && a[2] >= 2) -- a[4], a[2] -= 2, ++ now;\n                while(a[3] && a[1]) -- a[3], -- a[1], ++ now; \n                while(a[3] && a[2]) -- a[3], -- a[2], ++ now; \n                while(a[4] && a[2]) -- a[4], -- a[2], ++ now;\n                now += a[1] + a[2] + a[3] + a[4];\n                ans = min(ans, now);\n            }\n}\n\nvoid king()\n{\n    if(card[15] && card[16])\n    {\n        -- card[15], -- card[16], ++ cnt;\n        chk();\n        ++ card[15], ++ card[16], -- cnt;\n    }\n    chk();\n}\n\nvoid shun3(int l, int r)\n{\n    if(r > 14) {++ l, r = l + 1; }\n    if(l > 13) {king(); return; }\n    bool can = 1;\n    for(int i = l; i <= r; ++ i)\n        if(card[i] < 3) can = 0;\n    if(can)\n    {\n        for(int i = l; i <= r; ++ i) card[i] -= 3;\n        ++ cnt;\n        shun3(l, r + 1);\n        for(int i = l; i <= r; ++ i) card[i] += 3;\n        -- cnt;\n        shun3(l, r + 1);\n    }\n    else shun3(l + 1, l + 2);\n}\n\nvoid shun2(int l, int r)\n{\n    if(r > 14) {++ l, r = l + 2; }\n    if(l > 12) {shun3(3, 4); return; }\n    bool can = 1;\n    for(int i = l; i <= r; ++ i)\n        if(card[i] < 2) can = 0;\n    if(can)\n    {\n        for(int i = l; i <= r; ++ i) card[i] -= 2;\n        ++ cnt;\n        shun2(l, r + 1);\n        for(int i = l; i <= r; ++ i) card[i] += 2;\n        -- cnt;\n        shun2(l, r + 1);\n    }\n    else shun2(l + 1, l + 3);\n}\n\nvoid shun1(int l, int r)\n{\n    if(r > 14) {++ l, r = l + 4; }\n    if(l > 10) {shun2(3, 5); return; }\n    bool can = 1;\n    for(int i = l; i <= r; ++ i)\n        if(!card[i]) can = 0;\n    if(can)\n    {\n        for(int i = l; i <= r; ++ i) -- card[i];\n        ++ cnt;\n        shun1(l, r + 1);\n        for(int i = l; i <= r; ++ i) ++ card[i];\n        -- cnt;\n        shun1(l, r + 1);\n    }\n    else shun1(l + 1, l + 5);\n}\n\nint main()\n{\n    int T; scanf(\"%d%d\", &T, &n);\n    while(T --)\n    {\n        ans = 0x3f3f3f3f, cnt = 0;\n        memset(card, 0, sizeof(card));\n        input();\n        shun1(3, 7);\n        printf(\"%d\\n\", ans);\n    }\n    return 0;\n}\n```",
        "postTime": 1538875592,
        "uid": 47971,
        "name": "FreeDr",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "\n### \u9898\u610f\uff1a\u6309\u7167\u6597\u5730\u4e3b\u51fa\u724c\u89c4\u5219\uff0c\u7ed9\u5b9a\u624b\u724c\u6c42\u51fa\u6700\u5c11\u51fa\u5b8c\u6b21\u6570\n## \u7b97\u6cd5\uff1a~~\u6a21\u62df~~\uff08\u641c\u7d22\uff09\n# ~~\u4e0b\u9762\u8fdb\u5165\u6b63\u6587~~\n\n##### \u53ef\u4ee5\u53d1\u73b0\uff0c\u9664\u4e86\u987a\u5b50\uff0c\u5176\u5b83\u7684\u51fa\u724c\u89c4\u5219\u90fd\u548c\u70b9\u6570\u65e0\u5173\uff0c\u53ea\u4e0e\u540c\u70b9\u6570\u7684\u724c\u6570\u6709\u5173\u3002\n##### \u6240\u4ee5\u53ef\u4ee5\u5148\u66b4\u529b\u679a\u4e3e\u8981\u51fa\u54ea\u4e9b\u987a\u5b50\uff0c\u7136\u540e\u6bcf\u51fa\u5b8c\u4e00\u4e2a\u987a\u5b50\u540e\u624b\u724c\u7684\u60c5\u51b5\u5904\u7406\u6210b[4]\u7684\u5f62\u5f0f\uff0c\u8868\u793a\u724c\u6570\u4e3a1~4\u7684\u70b9\u6570\u6709\u591a\u5c11\u4e2a\uff0c\u7136\u540e\u8fdb\u884cdfs\u3002\n##### \uff08\u4e3a\u4e86\u65b9\u4fbf\uff0c\u5c06A\u63a5\u572814\uff0c\u6ce8\u610f2\u4e0d\u80fd\u987a\uff09\n##### dfs\uff08s\uff0ct\uff0cj\uff0cz\uff09\u8868\u793as\u7ec4\u7684\u724c\u6570\u4e3a1\uff0c\u6709t\u7ec4\u724c\u6570\u4e3a2\uff0c\u6709j\u7ec4\u724c\u6570\u4e3a3\uff0c\u6709z\u7ec4\u724c\u6570\u4e3a4\u7684\u60c5\u51b5\u51fa\u5b8c\u624b\u724c\u7684\u6700\u5c0f\u6b65\u6570\u3002\uff08\u53ef\u4ee5\u8bb0\u5fc6\u5316\u641c\u7d22\uff09\n##### \u7136\u540e\u518ddfs\u8ba8\u8bba\u4e0b\u3010\u5355\u6253\u3011\u3010\u62c6\u724c\u3011\u3010\u5e26\u724c\u3011\u4e09\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5bf9\u5e94\u8f6c\u79fb\u5c31\u53ef\u4ee5\u4e86\u3002\uff08~~\u6570\u636e\u5c0f\uff0c\u5199\u591a\u66b4\u529b\u90fd\u6ca1\u95ee\u9898~~\uff09\n##### \u53cc\u738b\u5728\u8fdb\u5165dfs\u524d\u7279\u6b8a\u5904\u7406\uff1a\u6709\u53cc\u738b\u5c31\u8003\u8651\u591a\u4e00\u79cd\u5f53\u70b8\u5f39\u6253\u7684\u60c5\u51b5\uff0c\u7136\u540e\u76f4\u63a5\u5c06\u738b\u5f53\u505a\u5355\u724c\u8fdb\u5165dfs\n#### ~~\u5230\u4e86\u4f60\u4eec\u6700\u7231\u7684\u4ee3\u7801\u73af\u8282~~\n```cpp\n#include<bits/stdc++.h>\n#define itn int\n#define nit int\n#define nti int\n#define tni int\n#define tin int\n\nusing namespace std;\n\nconst int maxn=30,inf=0x3f3f3f3f;\nconst int wasd[5]={0,5,3,2};\nint f[maxn][maxn][maxn][maxn],a[maxn],b[maxn];\n\nint cmp(int a,int b)\n{\n\treturn a<b?a:b;\n}\n\nint dfs(int s,int t,int j,int z)\n{\n    if(~f[s][t][j][z]) return f[s][t][j][z];\n    int ans=inf;\n    if (t)ans=cmp(ans,dfs(s+2,t-1,j,z));\n    if (j)ans=cmp(ans,dfs(s+1,t+1,j-1,z));\n    if (z)ans=cmp(ans,cmp(dfs(s,t+2,j,z-1),dfs(s+1,t,j+1,z-1)));\n    if (j&&s)ans=cmp(ans,dfs(s-1,t,j-1,z)+1);\n    if (j&&t)ans=cmp(ans,dfs(s,t-1,j-1,z)+1);\n    if (z&&s>1)ans=cmp(ans,dfs(s-2,t,j,z-1)+1);\n    if (z&&t>1)ans=cmp(ans,dfs(s,t-2,j,z-1)+1);\n    return f[s][t][j][z]=cmp(ans,s+t+j+z);\n}\n\nint chupai(int step)\n{\n    int ans=inf,tot;\n    for(int k=1;k<=3;k++)\n\t{\n        for(int i=3;i<=14;i++)\n\t\t{\n            tot=0;\n            for(int j=i;j<=14;j++)\n\t\t\t\tif(a[j]>=k)tot++;\n\t\t\t\telse break;\n            for(int j=i+wasd[k]-1;j<=i+tot-1;j++)\n\t\t\t{\n                for(int l=i;l<=j;l++)\n\t\t\t\t\ta[l]-=k;\n                ans=cmp(ans,chupai(step+1));\n                for(int l=i;l<=j;l++)\n\t\t\t\t\ta[l]+=k;\n            }\n        }\n    }\n    b[1]=b[2]=b[3]=b[4]=0;\n    for(int i=2;i<=14;i++)\n\t\tb[a[i]]++;\n    if(a[0]==2) ans=cmp(ans,step+1+dfs(b[1],b[2],b[3],b[4]));\n    b[1]+=a[0];\n    ans=cmp(ans,step+dfs(b[1],b[2],b[3],b[4]));\n    return ans;\n}\n      \nint main()\n{\n\tios::sync_with_stdio(0);\n\tcin.tie(0);cout.tie(0);\n\tint t,n;\n    cin>>t>>n;\n    memset(f,-1,sizeof(f));\n    f[0][0][0][0]=0;\n    while(t--)\n\t{\n        int u,v;\n        memset(a,0,sizeof(a));\n        for(int i=1;i<=n;i++)\n\t\t{\n            cin>>u>>v;\n            a[u]++;\n        }\n        a[14]=a[1];\n        cout<<chupai(0)<<endl;\n    }\n    return 0;\n}\n```\n",
        "postTime": 1573703113,
        "uid": 101608,
        "name": "livealone",
        "ccfLevel": 3,
        "title": "P2540"
    },
    {
        "content": "> \u505a\u6cd5: \u6253\u5c0f\u8868DP+\u66b4\u641c\n\n~~(\u8bf4\u662f\u5347\u7ea7\u7248\u5176\u5b9e\u4e5f\u6ca1\u5347\u7ea7\u591a\u5c11\u2026\u2026)~~\n\n## \u89c4\u5212\u597d\u679a\u4e3e\u90e8\u5206\u7684\u7b56\u7565(DP)\n\n\u9996\u5148\u6211\u4eec\u770b,\u5173\u4e8e\u56db\u5e26\u4e8c,\u56db\u5e26\u4e24\u5bf9,\u4e09\u5e26\u4e00,\u4e09\u5e26\u4e00\u5bf9,\u8fd9\u4e9b\u5957\u8def\u8ddf\u5355\u5f20\u724c\u51fa\u4e0e\u51fa\u5bf9\u5b50\u3001\u51fa\u5355\u5f20\u662f\u6bd4\u8f83\u597d\u5224\u65ad\u7684,\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c31\u8fd9\u4e9b\u51fa\u724c\u5957\u8def\u8fdb\u884cDP,\u6253\u4e2a\u5c0f\u8868\u3002\n\n\u5927\u6982\u5c31\u662f\u8fd9\u4e2a\u4e9a\u5b50\u3002\n\n```cpp\n//dp[a][b][c][d]\u8868\u793a\u6709\u56db\u5f20\u724c\u7684\u6570\u7801\u79cd\u7c7b\u6709a\u79cd,\u4e09\u5f20\u7684\u6709b\u79cd,\u4e24\u5f20\u7684c\u79cd,\u4e00\u5f20\u7684d\u79cd\n\tfor(re int a=0; 4*a<=23; a++){\n\t\tfor(re int b=0; 4*a+3*b<=23; b++){\n\t\t\tfor(re int c=0; 4*a+3*b+2*c<=23; c++){\n\t\t\t\tfor(re int d=0; 4*a+3*b+2*c+d<=23; d++){\n\t\t\t\t\tint tmp=a+b+c+d;//\u6700\u591a\u5168\u90e8\u5355\u6253\n\t\t\t\t\t/********************\u5355\u6253********************/\n\t\t\t\t\tif(a) Min(tmp,dp[a-1][b][c][d]+1);//\u70b8\u5f39\n\t\t\t\t\tif(b) Min(tmp,dp[a][b-1][c][d]+1);//\u4e09\u5f20\n\t\t\t\t\tif(c) Min(tmp,dp[a][b][c-1][d]+1);//\u5bf9\u5b50\n\t\t\t\t\tif(d) Min(tmp,dp[a][b][c][d-1]+1);//\u5355\u5f20\n\t\t\t\t\t/********************\u62c6\u5f00********************/\n\t\t\t\t\t//\u7531\u4e8e\u56db\u5f20,\u4e09\u5f20,\u4e24\u5f20\u662f\u7ec4\u5408\u5728\u4e00\u8d77\u7684\u724c\u7ec4,\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u4eec\u62c6\u5f00\u7b97\n\t\t\t\t\tif(a){\n\t\t\t\t\t    Min(tmp,dp[a-1][b+1][c][d+1]);\n\t\t\t\t\t\tMin(tmp,dp[a-1][b][c+2][d]);\n\t\t\t\t\t\tMin(tmp,dp[a-1][b][c][d+4]);\n\t\t\t\t\t}\n\t\t\t\t\tif(b){\n\t\t\t\t\t\tMin(tmp,dp[a][b-1][c+1][d+1]);\n\t\t\t\t\t\tMin(tmp,dp[a][b-1][c][d+3]);\n\t\t\t\t\t}\n\t\t\t\t\tif(c) Min(tmp,dp[a][b][c-1][d+2]);\n\t\t\t\t\t/********************\u4e09\u56db********************/\n\t\t\t\t\tif(b && c) Min(tmp,dp[a][b-1][c-1][d]+1);//\u4e09\u5e26\u4e00\u5bf9\n\t\t\t\t\tif(b && d) Min(tmp,dp[a][b-1][c][d-1]+1);//\u4e09\u5e26\u4e00\n\t\t\t\t\tif(a && c>1) Min(tmp,dp[a-1][b][c-2][d]+1);//\u56db\u5e26\u4e24\u5bf9\n\t\t\t\t\tif(a && d>1) Min(tmp,dp[a-1][b][c][d-2]+1);//\u56db\u4ee3\u4e00\n\t\t\t\t\t/********************\u5b58\u50a8********************/\n\t\t\t\t\tdp[a][b][c][d]=tmp;//\u5b58\u50a8\u521a\u521a\u641c\u5230\u7684\u6700\u5c0f\u503c\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n```\n\n\u90a3\u4e48\u63a5\u4e0b\u6765\u5c31\u662f\u91cd\u70b9\u4e86\n\n## \u987a\u5b50\u90e8\u5206(\u66b4\u641c)\n\n\u5bf9\u4e8e\u987a\u5b50\u90e8\u5206,\u6211\u4eec\u4e0d\u80fd\u5c31\u90a3\u4e48\u7c97\u66b4\u7684\u76f4\u63a5\u6253\u4e00\u5927\u5806\u51fa\u53bb\u3002\u4f8b\u5982\u67093,4,5,6,7 \u4e0e 5,6,7,8,9 \u8fd9\u4e24\u4e2a\u987a\u5b50,\u90a3\u4e48\u6211\u4eec\u603b\u4e0d\u53ef\u80fd\u628a3,4,5,6,7,8,9\u5c31\u8fd9\u4e48\u6253\u51fa\u53bb,\u5269\u4e0b5,6\u518d\u5355\u6253\u628a\uff1f\n\n\u56e0\u6b64,\u6211\u4eec\u6253\u7684\u987a\u5b50\u4e5f\u662f\u8981\u66b4\u529b\u679a\u4e3e\u7684\u3002\n\n\u81f3\u4e8e\u600e\u4e48\u679a\u4e3e,\u8fd9\u91cc\u662f\u5148\u679a\u4e3e3\u5f20\u7684\u987a\u5b50,\u518d\u679a\u4e3e\u8fde\u5bf9,\u6700\u540e\u679a\u4e3e\u666e\u901a\u987a\u5b50\n\n\u6211\u5199\u7684\u662f\u8fd9\u4e2a\u4e9a\u5b50\n\n```cpp\n\nvoid dfs(Status s, int res, int step);\n\nvoid dfs_Clear(Status s, int res, int step, int len, int Cnt){\n\trep(i,1,12-len+1){\n\t\tStatus tmp=s;\n\t\tbool flag=1;\n\t\trepp(j,i,i+len-1) flag&=(tmp.cnt[j]>=Cnt);\n\t\tif(!flag) continue;\n\t\trepp(j,i,i+len-1) tmp.cnt[j]-=Cnt;\n\t\trep(j,i+len-1,12){\n\t\t\tif(tmp.cnt[j]<Cnt) break;\n\t\t\ttmp.cnt[j]-=Cnt;\n\t\t\tdfs(tmp,res+1,step);\n\t\t}\n\t}\n\treturn;\n}\n\nvoid dfs(Status s, int res, int step){\n\tif(res>=ans) return;\n\tif(step==3){//\u5957\u7528\u4e4b\u524d\u9884\u5904\u7406\u597d\u7684\u7b56\u7565\n\t\tstatic int tmp[5];\n\t\tms(tmp,0);\n\t\trep(i,1,13) tmp[s.cnt[i]]++;\n\t\tif(s.cnt[14]==2) Min(ans,res+dp[tmp[4]][tmp[3]][tmp[2]][tmp[1]]+1);\n\t\tMin(ans,res+dp[tmp[4]][tmp[3]][tmp[2]][tmp[1]+s.cnt[14]]);\n\t\treturn;\n\t}\n\tif(step==0) dfs_Clear(s,res,0,2,3),dfs(s,res,1);//\u5148\u5f043\u5f20\n\tif(step==1) dfs_Clear(s,res,1,3,2),dfs(s,res,2);//\u518d\u5f04\u8fde\u5bf9\n\tif(step==2) dfs_Clear(s,res,2,5,1),dfs(s,res,3);//\u540e\u5f04\u666e\u901a\u987a\u5b50\n\treturn;\n}\n```\n\n~~\u8fd8\u597d\u6ca1\u98de\u673a,\u4e0d\u7136\u5c31\u66f4\u9ebb\u70e6\u4e86~~\n\n## Code:\n\n```cpp\n#include<bits/stdc++.h>\n#define re register\n#define rep(i,a,b) for(re int i=a,i##end=b; i<=i##end; i++)\n#define drep(i,a,b) for(re int i=a,i##end=b; i>=i##end; i--)\n#define repp(i,a,b) for(re int i=a,i##end=b; i<i##end; i++)\n#define drepp(i,a,b) for(re int i=a,i##end=b; i>i##end; i--)\n#define Erep(i,x) for(int i=head[x]; ~i; i=Edge[i].to)\n#define ms(x,a) memset(x,a,sizeof x)\n#define lowbit(x) (x&-x)\n#define debug(x) cout<<#x<<\" = \"<<x<<endl\ntypedef long long ll;\nusing namespace std;\ntemplate <class T> inline T rd(){\n\tstatic bool neg;static char ch;static T x;\n\tfor(neg=0,ch=0; ch>'9'||ch<'0'; neg|=(ch=='-'),ch=getchar());\n\tfor(x=0; ch>='0'&&ch<='9'; x=(x<<1)+(x<<3)+(ch-'0'),ch=getchar());\n\treturn neg?-x:x;\n}\ntemplate <class T> inline bool Max(T &x, T y){\n\treturn x<y?x=y,1:0;\n}\ntemplate <class T> inline bool Min(T &x, T y){\n\treturn x>y?x=y,1:0;\n}\nconst int N=15,oo=1e9;\nconst int mp[]={14,12,13,1,2,3,4,5,6,7,8,9,10,11};\n//bool S1;\nint T,n,ans=oo;\nint dp[8][10][13][25];\nstruct Status{\n\tint cnt[N];\n\tvoid clear() { ms(cnt,0); return; }\n\tStatus () { clear(); return; }\n\tvoid Print(){\n\t\trep(i,1,14) printf(\"cnt[%d] = %d\\n\",i,cnt[i]);\n\t}\n}s;\nvoid Init_DP(){\n\tfor(re int a=0; 4*a<=23; a++){\n\t\tfor(re int b=0; 4*a+3*b<=23; b++){\n\t\t\tfor(re int c=0; 4*a+3*b+2*c<=23; c++){\n\t\t\t\tfor(re int d=0; 4*a+3*b+2*c+d<=23; d++){\n\t\t\t\t\tint tmp=a+b+c+d;\n\t\t\t\t\t/********************\u5355\u6253********************/\n\t\t\t\t\tif(a) Min(tmp,dp[a-1][b][c][d]+1);\n\t\t\t\t\tif(b) Min(tmp,dp[a][b-1][c][d]+1);\n\t\t\t\t\tif(c) Min(tmp,dp[a][b][c-1][d]+1);\n\t\t\t\t\tif(d) Min(tmp,dp[a][b][c][d-1]+1);\n\t\t\t\t\t/********************\u62c6\u5f00********************/\n\t\t\t\t\tif(a){\n\t\t\t\t\t\tMin(tmp,dp[a-1][b+1][c][d+1]);\n\t\t\t\t\t\tMin(tmp,dp[a-1][b][c+2][d]);\n\t\t\t\t\t\tMin(tmp,dp[a-1][b][c][d+4]);\n\t\t\t\t\t}\n\t\t\t\t\tif(b){\n\t\t\t\t\t\tMin(tmp,dp[a][b-1][c+1][d+1]);\n\t\t\t\t\t\tMin(tmp,dp[a][b-1][c][d+3]);\n\t\t\t\t\t}\n\t\t\t\t\tif(c) Min(tmp,dp[a][b][c-1][d+2]);\n\t\t\t\t\t/********************\u4e09\u56db********************/\n\t\t\t\t\tif(b && c) Min(tmp,dp[a][b-1][c-1][d]+1);\n\t\t\t\t\tif(b && d) Min(tmp,dp[a][b-1][c][d-1]+1);\n\t\t\t\t\tif(a && c>1) Min(tmp,dp[a-1][b][c-2][d]+1);\n\t\t\t\t\tif(a && d>1) Min(tmp,dp[a-1][b][c][d-2]+1);\n\t\t\t\t\t/********************\u5b58\u50a8********************/\n\t\t\t\t\tdp[a][b][c][d]=tmp;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nvoid dfs(Status s, int res, int step);\n\nvoid dfs_Clear(Status s, int res, int step, int len, int Cnt){\n\trep(i,1,12-len+1){\n\t\tStatus tmp=s;\n\t\tbool flag=1;\n\t\trepp(j,i,i+len-1) flag&=(tmp.cnt[j]>=Cnt);\n\t\tif(!flag) continue;\n\t\trepp(j,i,i+len-1) tmp.cnt[j]-=Cnt;\n\t\trep(j,i+len-1,12){\n\t\t\tif(tmp.cnt[j]<Cnt) break;\n\t\t\ttmp.cnt[j]-=Cnt;\n\t\t\tdfs(tmp,res+1,step);\n\t\t}\n\t}\n\treturn;\n}\n\nvoid dfs(Status s, int res, int step){\n\tif(res>=ans) return;\n//\tputs(\"\");\n//\tprintf(\"s ==> \\n\"); s.Print();\n//\tprintf(\"res = %d , step = %d\\n\",res,step);\n\tif(step==3){\n\t\tstatic int tmp[5];\n\t\tms(tmp,0);\n\t\trep(i,1,13) tmp[s.cnt[i]]++;\n//\t\tprintf(\"ans = %d\",ans);\n\t\tif(s.cnt[14]==2) Min(ans,res+dp[tmp[4]][tmp[3]][tmp[2]][tmp[1]]+1);\n\t\tMin(ans,res+dp[tmp[4]][tmp[3]][tmp[2]][tmp[1]+s.cnt[14]]);\n//\t\tprintf(\" ==> %d\\n\",ans);\n\t\treturn;\n\t}\n\tif(step==0) dfs_Clear(s,res,0,2,3),dfs(s,res,1);\n\tif(step==1) dfs_Clear(s,res,1,3,2),dfs(s,res,2);\n\tif(step==2) dfs_Clear(s,res,2,5,1),dfs(s,res,3);\n\treturn;\n}\n//bool S2;\n\nint main(){\n//\tprintf(\"%.2lf\\n\",(&S2-&S1)/1024.0/1024);\n//\tfreopen(\"landlords.in\",\"r\",stdin);\n//\tfreopen(\"landlords.out\",\"w\",stdout);\n\tT=rd<int>(); n=rd<int>();\n\tInit_DP();\n\tStatus s;\n\twhile(T--) {\n\t\tans=0; s.clear();\n\t\trep(i,1,n){\n\t\t\tint x=rd<int>(),y=rd<int>();\n\t\t\ty=y;\n\t\t\tif(!s.cnt[mp[x]]) ans++;\n\t\t\ts.cnt[mp[x]]++;\n\t\t}\n//\t\tdebug(ans);\n\t\tdfs(s,0,0);\n\t\tprintf(\"%d\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1565702060,
        "uid": 81715,
        "name": "ppp204",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "~~\u7531\u4e8e\u672c\u4eba\u7279\u522b\u4f1a\u6253\u6597\u5730\u4e3b~~\uff0c\u6240\u4ee5\u6b64\u9898\u6211\u5728\u666e\u901a\u7248\u672c\u7684\u4ee3\u7801\u7a0d\u52a0\u4fee\u6539(\u4e5f\u5c31\u662f\u5927\u5c0f\u738b\u4e0d\u80fd\u5f53\u5bf9\u8fd9\u5904)\uff0c\u7136\u540e\u901a\u8fc7\u4e86\u52a0\u5f3a\u7248\u3002\n\n\u6211\u6ca1\u6709\u8003\u8651\u600e\u4e48\u8d2a\u5fc3\u751a\u81f3\u4e00\u5f00\u59cb\u6211\u90fd\u4e0d\u77e5\u9053\u4ece\u54ea\u4e0b\u624b\u5f00\u59cb\u641c\u7d22\uff0c\u90a3\u5148\u8003\u8651\u66b4\u529b\u641c\uff0c\u4e5f\u5c31\u662f\u6bcf\u5f20\u724c\u7684\u51fa\u724c\u5f62\u5f0f\u3002\n\n\u526a\u679d\uff1a\n\n- \u5fc5\u987b\u6709\u5e8f\u6211\u4eec\u53d1\u73b0\u6700\u5c0f\u51fa\u724c\u65b9\u5f0f\u548c\u51fa\u724c\u7684\u987a\u5e8f\u65e0\u5173\u6211\u4eec\u5f3a\u5236\u4e00\u5b9a\u7684\u987a\u5e8f\u3002\u8fd9\u91cc\u7684\u63d0\u73b0\u662f\u7531\u5c0f\u5230\u5927\u51fa\u724c\u3002\u628a\u5c0f\u7684\u51fa\u5b8c\u518d\u51fa\u5927\u7684\u3002\n\n- \u6700\u4f18\u5316\u526a\u679d\u3002\u4e5f\u5c31\u662f\u5982\u679c\u6700\u4f18\u89e3\u6bd4\u5f53\u524d\u5c42\u6570\u8981\u6d45\u5c31\u505c\u6b62\u3002\n\n- \u5f53\u524d\u6709\u724c\u4e14\u6df1\u5ea6+1==\u6700\u4f18\u89e3 \u76f4\u63a5\u505c\u6b62\u3002\n\n\u5176\u5b9e\u6211\u4eec\u53d1\u73b0\u7b2c\u4e00\u79cd\u662f\u6838\u5fc3\u526a\u679d\u5fc5\u987b\u6709\u5e8f\u624d\u884c\u3002\n\n\u7b2c\u4e8c\uff0c\u4e09\u79cd\u662f\u5fc5\u8981\u7684\u526a\u679d\u3002\n\n\u8fd8\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\u7684\u662f\u53d1\u73b0\u524d\u9762\u7684\u5355\u724c\u53ef\u4ee5\u548c\u540e\u9762\u7684\u4e00\u4e9b\u724c\u8fdb\u884c\u64cd\u4f5c\u6211\u4eec\u5fc5\u987b\u8003\u8651\u5230\uff0c\u8fd9\u5e76\u4e0d\u6d6a\u8d39\u65f6\u95f4\u3002\n\n\u8fd9\u6837\u6211\u4eec\u987a\u5229\u901a\u8fc7\u4e86\u8fd9\u9053\u9898\u4e0d\u7528\u8d2a\u5fc3\u5566\uff0c\u62c6\u724c\u7684\u8003\u8651\u8fa3\u4e48\u591a\u3002\n\n```cpp\n//#include<bits/stdc++.h>\n#include<iostream>\n#include<queue>\n#include<iomanip>\n#include<cctype>\n#include<cstdio>\n#include<deque>\n#include<utility>\n#include<cmath>\n#include<ctime>\n#include<cstring>\n#include<string>\n#include<cstdlib>\n#include<vector>\n#include<algorithm>\n#include<stack>\n#include<map>\n#include<set>\n#include<bitset>\n#define max(x,y) ((x)>(y)?(x):(y))\n#define min(x,y) ((x)>(y)?(y):(x))\n#define INF 10000000000000ll\n#define ll long long\n#define l(x) t[x].l\n#define r(x) t[x].r\n#define v(x) t[x].v\nusing namespace std;\nchar buf[1<<15],*fs,*ft;\ninline char getc()\n{\n\treturn (fs==ft&&(ft=(fs=buf)+fread(buf,1,1<<15,stdin),fs==ft))?0:*fs++;\n}\ninline ll read()\n{\n    ll x=0,f=1;char ch=getc();\n    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getc();}\n    while(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getc();}\n    return x*f;\n}\ninline void put(ll x)\n{\n    x<0?putchar('-'),x=-x:0;\n    ll num=0;char ch[50];\n    while(x)ch[++num]=x%10+'0',x/=10;\n    num==0?putchar('0'):0;\n    while(num)putchar(ch[num--]);\n    putchar('\\n');return;\n}\n//1 \u6700\u4f18\u5316\u526a\u679d 2 \u6309\u987a\u5e8f\u526a\u679d\nconst int MAXN=30;\nint T,n;\nint maxx=25,m;\nint a[MAXN];\ninline void dfs(int x,int depth,int p)\n{\n\tif(depth>=maxx)return;\n\tif(p&&depth+1==maxx)return;\n\tif(!p){maxx=min(maxx,depth);return;}\n\tif(!a[x]){dfs(x+1,depth,p);return;}\n\t--a[x];\n\tfor(int i=x+1;i<=14;++i)//\u88ab\u52a8\u4e09\u5e26\u4e00\n\t\tif(a[i]>2)\n\t\t{\n\t\t\ta[i]-=3;\n\t\t\tdfs(x,depth+1,p-4);\n\t\t\ta[i]+=3;\n\t\t}\n\tint flag=0;\n\tfor(int i=x+1;i<=14;++i)if(a[i]>3)flag=i;\n\tif(flag)\n\t{\n\t\ta[flag]-=4;\n\t\tfor(int i=x;i<=15;++i)//\u88ab\u52a84\u5e26\u4e8c\n\t\t\tif(a[i])\n\t\t\t{\n\t\t\t\t--a[i];\n\t\t\t\tdfs(x,depth+1,p-6);\n\t\t\t\t++a[i];\n\t\t\t}\n\t\ta[flag]+=4;\n\t}\n\tdfs(x,depth+1,p-1);//\u51fa\u5355\u5f20\u724c\n\t++a[x];\n\tif(x!=2)if(a[x+1]&&a[x+2]&&a[x+3]&&a[x+4]&&x+4<=14)\n\t{\n\t\t--a[x];--a[x+1];--a[x+2];--a[x+3];--a[x+4];\n\t\tdfs(x,depth+1,p-5);\n\t\tint w=x+5;\n\t\twhile(a[w]&&w<=14)//\u5355\u987a\u5b50\n\t\t{\n\t\t\t--a[w];\n\t\t\tdfs(x,depth+1,p-(w-x+1));\n\t\t\t++w;\n\t\t}\n\t\tfor(int i=w-1;i>=x;--i)++a[i];\n\t}\n\tif(a[x]>1)//\u51fa\u5bf9\u5b50 \u6216\u8005\u706b\u7bad\n\t{\n\t\ta[x]-=2;\n\t\tdfs(x,depth+1,p-2);\n\t\tint flag=0;\n\t\tfor(int i=x+1;i<=14;++i)if(a[i]>3)flag=i;\n\t\tif(flag)\n\t\t{\n\t\t\ta[flag]-=4;\n\t\t\tfor(int i=x+1;i<=14;++i)\n\t\t\t\tif(a[i]>1)\n\t\t\t\t{\n\t\t\t\t\ta[i]-=2;\n\t\t\t\t\tdfs(x,depth+1,p-8);\n\t\t\t\t\ta[i]+=2;\n\t\t\t\t}\n\t\t\ta[flag]+=4;//\u88ab\u52a8\u56db\u4ee3\u4e8c\n\t\t}\n\t\tfor(int i=x+1;i<=14;++i)//\u88ab\u52a8\u4e09\u5e26\u4e8c\n\t\t\tif(a[i]>2)\n\t\t\t{\n\t\t\t\ta[i]-=3;\n\t\t\t\tdfs(x,depth+1,p-5);\n\t\t\t\ta[i]+=3;\n\t\t\t}\n\t\ta[x]+=2;\n\t\tif(x!=2&&a[x+1]>1&&a[x+2]>1&&x+2<=14)\n\t\t{\n\t\t\ta[x]-=2;a[x+1]-=2;a[x+2]-=2;\n\t\t\tint w=x+3;//\u6ce8\u610f\u4e0d\u8981\u52a0\u9519\n\t\t\tdfs(x,depth+1,p-6);\n\t\t\twhile(a[w]>1&&w<=14)//\u53cc\u987a\u5b50 \n\t\t\t{\n\t\t\t\ta[w]-=2;\n\t\t\t\tdfs(x,depth+1,p-(w-x+1)*2);\n\t\t\t\t++w;\n\t\t\t}\n\t\t\tfor(int i=w-1;i>=x;--i)a[i]+=2;\n\t\t}\n\t}\n\tif(a[x]>2)\n\t{\n\t\ta[x]-=3;\n\t\tdfs(x,depth+1,p-3);//\u51fa\u4e09\u5f20\u724c\n\t\tfor(int i=x+1;i<=15;++i)\n\t\t{\t\n\t\t\tif(a[i])\n\t\t\t{\n\t\t\t\t--a[i];\n\t\t\t\tdfs(x,depth+1,p-4);//\u4e09\u5e26\u4e00\n\t\t\t\t++a[i];\n\t\t\t}\n\t\t\tif(a[i]>1&&i<=14)\n\t\t\t{\n\t\t\t\ta[i]-=2;\n\t\t\t\tdfs(x,depth+1,p-5);//\u4e09\u5e26\u4e8c\n\t\t\t\ta[i]+=2;\n\t\t\t}\n\t\t}\n\t\ta[x]+=3;\n\t\tif(a[x+1]>2&&x!=2)//\u4e09\u987a\u5b50\n\t\t\t{\n\t\t\t\tint w=x+2;//\u6ce8\u610f\u4e24\u4e2a\u5373\u53ef\n\t\t\t\ta[x]-=3;a[x+1]-=3;\n\t\t\t\tdfs(x,depth+1,p-6);\n\t\t\t\twhile(a[w]>2)\n\t\t\t\t{\n\t\t\t\t\ta[w]-=3;\n\t\t\t\t\tdfs(x,depth+1,p-(w-x+1)*3);\n\t\t\t\t\t++w;\n\t\t\t\t}\n\t\t\t\tfor(int j=w-1;j>=x;--j)a[j]+=3;\n\t\t\t}\n\t}\n\tif(a[x]>3)\n\t{\n\t\ta[x]-=4;\n\t\tdfs(x+1,depth+1,p-4);//\u70b8\u5f39\n\t\tfor(int i=x+1;i<=15;++i)//\u7ec8\u6781\u56db\u5e26\u4e8c\n\t\t\tfor(int j=i;j<=15;++j)\n\t\t\t{\n\t\t\t\tif(i==j)//\u6ce8\u610f\u76f8\u7b49\n\t\t\t\t{\n\t\t\t\t\tif(a[i]>1)\n\t\t\t\t\t{\n\t\t\t\t\t\ta[i]-=2;\n\t\t\t\t\t\tdfs(x+1,depth+1,p-6);\n\t\t\t\t\t\ta[i]+=2;\n\t\t\t\t\t}\n\t\t\t\t\tif(a[i]>3)\n\t\t\t\t\t{\n\t\t\t\t\t\ta[i]-=4;\n\t\t\t\t\t\tdfs(x+1,depth+1,p-8);\n\t\t\t\t\t\ta[i]+=4;\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(a[i]&&a[j])\n\t\t\t\t{\n\t\t\t\t\t--a[i];--a[j];\n\t\t\t\t\tdfs(x+1,depth+1,p-6);\n\t\t\t\t\t++a[i];++a[j];\n\t\t\t\t}\n\t\t\t\tif(a[i]>1&&a[j]>1&&i!=15&&j!=15)\n\t\t\t\t{\n\t\t\t\t\ta[i]-=2;a[j]-=2;\n\t\t\t\t\tdfs(x+1,depth+1,p-8);\n\t\t\t\t\ta[i]+=2;a[j]+=2;\n\t\t\t\t}\n\t\t\t}\n\t\ta[x]+=4;\n\t}\n\treturn;\n}\nint main()\n{\n\t//freopen(\"1.in\",\"r\",stdin);\n\t//freopen(\"1.out\",\"w\",stdout);\n\tT=read();n=read();\n\twhile(T--)\n\t{\n\t\tmemset(a,0,sizeof(a));maxx=25;\n\t\tfor(int i=1;i<=n;++i)\n\t\t{\n\t\t\tint x,y;\n\t\t\tx=read();y=read();\n\t\t\tif(x==0&&y==1){++a[15];continue;}\n\t\t\tif(x==0&&y==2){++a[15];continue;}\n\t\t\tif(x==1){++a[14];continue;}\n\t\t\t++a[x];\n\t\t}\n\t\t//for(int i=2;i<=15;++i)cout<<a[i]<<endl;\n\t\tdfs(2,0,n);\n\t\tput(maxx);\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1557903287,
        "uid": 59688,
        "name": "chdy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    },
    {
        "content": "```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\n#define dfs(X) X.srch()\n/*\nlp2540 NOIP2015 \u6597\u5730\u4e3b\u589e\u5f3a\u7248\n\u9996\u5148\uff0c\u6211\u4eec\u6ce8\u610f\u5230\u82b1\u8272\u5bf9\u4e8e\u6597\u5730\u4e3b\u4e0d\u4f1a\u9020\u6210\u4efb\u4f55\u5f71\u54cd\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5ffd\u89c6\u6389\u82b1\u8272\u8fd9\u4e2a\u4fe1\u606f\u3002\n\u7136\u540e\uff0c\u6211\u4eec\u5c06\u5269\u4f59\u7684\u4fe1\u606f\uff0c\u4f9d\u636e\u6570\u7801\u7684\u4ece\u5c0f\u5230\u5927\u50a8\u5b58\u3002 \n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u6ce8\u610f\u5230\uff0c\u5bf9\u4e8e\u4e00\u79cd\u51fa\u724c\u65b9\u5f0f\uff0c\u8c03\u6574\u4e00\u4e9b\u724c\u7ec4\u7684\u51fa\u724c\u987a\u5e8f\u5bf9\u7b54\u6848\u5e76\u4e0d\u4f1a\u9020\u6210\u5f71\u54cd\u3002 \n\u5e76\u4e14\uff0c\u6563\u724c\u4f3c\u4e4e\u5177\u6709\u8d2a\u5fc3\u7684\u6027\u8d28\u3002\u770b\u8d77\u6765\u5982\u679c\u80fd\u51fa\u4e09\u5e26\u4e8c\u90a3\u4e48\u51fa\u4e09\u5e26\u4e00\u5c31\u4e0d\u4f1a\u66f4\u4f18\uff0c\u5982\u679c\u80fd\u51fa\u56db\u5e26\u4e8c\u90a3\u51fa\u4e09\u5e26\u4e8c\u5c31\u4e0d\u4f1a\u66f4\u4f18\u3002\n\u5bf9\u4e8e\u987a\u5b50\u7684\u60c5\u51b5\u662f\u4e00\u4e2a\u4f8b\u5916\uff0c\u56e0\u4e3a\u5982\u679c\u80fd\u51fa\u987a\u5b50\u7684\u8bdd\uff0c\u53ef\u80fd\u5b58\u5728\u4e00\u79cd\u60c5\u51b5\uff0c\u4f7f\u5f97\u4e0d\u51fa\u987a\u5b50\u6bd4\u51fa\u987a\u5b50\u66f4\u4f18\uff1b\u4ea6\u6709\u53ef\u80fd\u5c06\u4e00\u4e2a\u987a\u5b50\u51fa\u4e00\u90e8\u5206\u4f1a\u66f4\u4f18\u3002\u6545\u800c\u5bf9\u4e8e\u987a\u5b50\u5e94\u8be5\u7206\u641c\u5224\u5b9a\u3002\n\u603b\u7ed3\u8d77\u6765\u5c31\u662f\uff1a\u7206\u641c\u51fa\u987a\u5b50\uff0c\u8d2a\u5fc3\u51fa\u6563\u724c\u3002\n\u4f46\u662f\u4ed4\u7ec6\u8003\u8651\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u79cd\u8d2a\u5fc3\u662f\u4e00\u79cd\u60f3\u5f53\u7136\u7684\u5bf9\u6b63\u786e\u7b54\u6848\u7684\u8fd1\u4f3c\u3002\u8fd9\u4e8b\u5b9e\u4e0a\u4ec5\u56e0\u4e3a\u56db\u4e0d\u53ef\u5e26\u4e00\u8fd9\u4e00\u6027\u8d28\u3002\n\u6545\u800c\uff0c\u5bf9\u4e8e4 4 1 2\u7684\u60c5\u51b5\uff0c\u7528\u4e0a\u8ff0\u7684\u8d2a\u5fc3\u5f97\u51fa\u7684\u7b54\u6848\u5e94\u5f53\u662f3\uff0c\u7136\u800c\u4e8b\u5b9e\u4e0a\u53ea\u97002\u5373\u53ef\u3002 \n\u4f46\u662f\uff0c\u524d\u9762\u4ecd\u7136\u6709\u4e00\u4e2a\u7ed3\u8bba\u662f\u6b63\u786e\u7684\u2014\u2014\u4e5f\u5c31\u662f\uff0c\u51fa\u724c\u987a\u5e8f\u4e0d\u5bf9\u7b54\u6848\u9020\u6210\u5f71\u54cd\u3002\u53c8\u8003\u8651\u5230\uff0c\u6570\u7801\u7684\u987a\u5e8f\u5176\u5b9e\u4ec5\u5bf9\u987a\u5b50\u800c\u8a00\u6709\u610f\u4e49\u3002\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4ec5\u50a8\u5b58\uff0c\u6570\u91cf\u4e3ak\u7684\u6570\u7801\u6709\u591a\u5c11\u79cd\uff0c\u4ece\u800c\u53ef\u4ee5\u75285^13\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u9884\u5904\u7406\u6bcf\u4e00\u79cd\u6563\u724c\u7684\u72b6\u6001\u3002 \n\u4f46\u662f\u5982\u679c\u8fd9\u4e48\u505a\u7684\u8bdd\u4f1a\u53d1\u73b0\u8fde\u6837\u4f8b\u4e8c\u90fd\u8fc7\u4e0d\u4e86\u3002\u8fd9\u4e8b\u5b9e\u4e0a\u662f\u56e0\u4e3a\uff0c\u66b4\u529b\u641c\u7d22\u6563\u724c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u5b8c\u5168\u4e0d\u53ef\u63a5\u53d7\u7684\u3002 \n\u8003\u8651\u5230\u72b6\u6001\u6570\u6781\u5c11\uff0c\u53ef\u4ee5\u8bb0\u5fc6\u5316\u641c\u7d22\u6765\u5b8c\u6210\u9884\u5904\u7406\u3002 \n\u7528f[i][j][k][l]\u8868\u793a\uff0c\u6709i\u4e2a1\uff0cj\u4e2a2\uff0ck\u4e2a3\uff0cl\u4e2a4\u65f6\u7684\u6700\u5c0f\u89e3\u51b3\u82b1\u8d39\u5373\u53ef\u3002 \n\u51e0\u4e2a\u5751\u70b9\uff1a\n1.\u51fa\u987a\u5b50\u7684\u65f6\u5019\u5e94\u5f53\u662f-=,+=\u800c\u975e\u76f4\u63a5\u8d4b\u503c\u3002\n2.\u9884\u5148\u5224\u53cc\u738b\u4ee5\u540e\u5e94\u5f53\u8ba1\u7b97\u82b1\u8d39\u3002\n3.\u51fa\u987a\u5b50\u7684\u65f6\u5019\uff0c\u5728\u904d\u5386\u5230\u957f\u5ea6\u6ca1\u8fbe\u5230\u8981\u6c42\u7684\u533a\u95f4\u7684\u65f6\u5019\u4e5f\u5e94\u5f53\u5148\u5c06\u5176\u6e05\u96f6\u7136\u540e\u5728\u904d\u5386\u4e4b\u540e\u52a0\u56de\u53bb\u3002 \n4.\u6ce8\u610f\u56db\u5e26\u4e8c\u7684\u5404\u79cd\u62c6\u6cd5\uff1a\u7406\u8bba\u4e0a\u5e94\u5f53\u6709C(2,4)+C(2,3)\u79cd\uff0c\u5c11\u4e00\u79cd\u90fd\u4e0d\u884c\uff0c\u4f8b\u5982\uff1a\u4e24\u7ec4\u4e09\u5f20\u548c\u4e24\u7ec4\u56db\u5f20\u53ef\u4ee5\u628a\u4e24\u7ec4\u4e09\u5f20\u62c6\u5f00\u6765\u6253\u3002 \n*/\n//\u6240\u6709\u6570+10\u4e4b\u540emod13,13\u5c0f\u738b,14\u5927\u738b\u3002 \ninline int Max(int A,int B){\n    return A>B?A:B;\n}\ninline int Min(int A,int B){\n    return A<B?A:B;\n}\nstruct statue;\nint n,ans=0x3f3f3f3f,f[14][14][9][7];\nint CNT[4]={0,0,0,0};\nstruct statue{\n    int cst;\n    int a[15];\n    inline void init(){\n        for(int i=0;i<15;++i){\n            a[i]=0;\n        }\n    }\n    inline statue(int cstin){\n        cst=cstin;\n    }\n    inline void srch(){\n        /*\n        for(int i=0;i<15;++i){\n            printf(\"%d \",a[i]);\n        }\n        printf(\"\\n\");\n        */\n        statue nw(cst+1);\n        for(int i=0;i<15;++i){\n            nw.a[i]=a[i];\n        }\n        for(int i=0;i<12;++i){\n            if(a[i]>=3){\n                nw.a[i]-=3;\n                for(int j=i+1;j<12;++j){\n                    if(a[j]<3){\n                        break;\n                    }\n                    nw.a[j]-=3;\n                    dfs(nw);\n                }\n                for(int j=i+1;j<12;++j){\n                    if(a[j]<3){\n                        break;\n                    }\n                    nw.a[j]+=3;\n                }\n                nw.a[i]+=3;\n            }\n            if(a[i]>=2){\n                nw.a[i]-=2;\n                for(int j=i+1;j<12;++j){\n                    if(a[j]<2){\n                        break;\n                    }\n                    nw.a[j]-=2;\n                    if(j-i<2){\n                        continue;\n                    }\n                    dfs(nw);\n                }\n                for(int j=i+1;j<12;++j){\n                    if(a[j]<2){\n                        break;\n                    }\n                    nw.a[j]+=2;\n                }\n                nw.a[i]+=2;\n            }\n            if(a[i]>=1){\n                --nw.a[i];\n                for(int j=i+1;j<12;++j){\n                    if(a[j]<1){\n                        break;\n                    }\n                    --nw.a[j];\n                    if(j-i<4){\n                        continue;\n                    }\n                    dfs(nw);\n                }\n                for(int j=i+1;j<12;++j){\n                    if(a[j]<1){\n                        break;\n                    }\n                    ++nw.a[j];\n                }\n                ++nw.a[i];\n            }\n        }\n        CNT[0]=CNT[1]=CNT[2]=CNT[3]=0;\n        for(int i=0;i<15;++i){\n        \t++CNT[a[i]-1];\n\t\t}\n\t\tans=Min(ans,cst+f[CNT[0]][CNT[1]][CNT[2]][CNT[3]]);\n//\t\tprintf(\"%d:%d %d %d %d\\n\",cst,CNT[0],CNT[1],CNT[2],CNT[3]);\n    }\n};\nint II=0,JJ=0,KK=0,LL=0;\ninline int rnw(int A,int B,int C,int D){\n\tif(A<0||B<0||C<0||D<0||A>13||B>13||C>8||D>6){\n\t\treturn 0;\n\t}\n    f[A][B][C][D]=Min(f[A][B][C][D],f[II][JJ][KK][LL]+1);\n    return 0;\n}\ninline void prpr(){\n    memset(f,0x3f,sizeof(f));\n    f[0][0][0][0]=0;\n    for(int i=0;i<=13;++i){\n        for(int j=0;j<=13;++j){\n            for(int k=0;k<=8;++k){\n                for(int l=0;l<=6;++l){\n//                \tprintf(\"%d %d %d %d\\n\",i,j,k,l);\n                    II=i,JJ=j,KK=k,LL=l;\n                    rnw(i,j,k,l+1);\n                    rnw(i+2,j,k,l+1);\n                    rnw(i,j+1,k,l+1);\n                    rnw(i-1,j,k+1,l+1),rnw(i+1,j-1,k+1,l+1),rnw(i,j-1,k,l+2),rnw(i+1,j,k-1,l+2),rnw(i-1,j+1,k-1,l+2),rnw(i,j-2,k+2,k+1);\n                    rnw(i,j+2,k,l+1);\n                    rnw(i,j,k,l+2);\n                    rnw(i-1,j+1,k+1,l+1),rnw(i-1,j-1,k+1,l+2),rnw(i-2,j,k+2,l+1);\n                    \n                    rnw(i,j,k+1,l);\n                    rnw(i+1,j,k+1,l);\n                    rnw(i,j+1,k+1,l);\n                    \n                    rnw(i,j+1,k,l);\n                    \n                    rnw(i+1,j,k,l);\n                }\n            }\n        }\n    }\n}\nvoid init(){\n    ans=0x3f3f3f3f;\n    int x,xx;\n    statue s(0);\n    s.init();\n    for(int i=1;i<=n;++i){\n        scanf(\"%d%d\",&x,&xx);\n        ++s.a[(!x)?(12+xx):((x+10)%13)];\n    }\n    if(s.a[13]&&s.a[14]){\n        s.a[13]=s.a[14]=0;\n        ++s.cst;\n        dfs(s);\n        --s.cst;\n        s.a[13]=s.a[14]=1;\n    }\n    dfs(s);\n    printf(\"%d\\n\",ans);\n}\nint main(){\n\tprpr();\n    int T;\n    scanf(\"%d%d\",&T,&n);\n    while(T--){\n        init();\n    }\n    return 0;\n}\n```",
        "postTime": 1544240774,
        "uid": 97512,
        "name": "Smokey_Days",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2540 \u3010\u6597\u5730\u4e3b\u589e\u5f3a\u7248\u3011"
    }
]
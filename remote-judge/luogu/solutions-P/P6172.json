[
    {
        "content": "\u6211\u770b\u5230\u8fd9\u4e2a\u9898\u76ee\u662f\u771f\u7684\u6ca1\u601d\u8def\uff0c\u7136\u540e\u770b\u9898\u89e3\u8fd8\u53ea\u6709\u4e00\u4e2a\u800c\u4e14\u6ca1\u51e0\u884c\u8bb2\u601d\u8def\uff0c\u5feb\u54ed\u4e86$QAQ$\u3002\n\n\u4e3a\u4e86\u907f\u514d\u522b\u4eba\u4e5f\u6709\u6211\u8fd9\u79cd\u7cdf\u7cd5\u7684\u4f53\u9a8c\uff0c\u8fd9\u7bc7\u9898\u89e3\u8bde\u751f\u4e86\u3002\n\n------------\n\n\u5148\u770b\u9898\u76ee\uff0c\u6700\u5927\u503c\u6700\u5c0f\uff0c\u5b66\u8fc7OI\u7684\u90fd\u77e5\u9053\u8fd9\u8981\u7528\u5230\u4e8c\u5206\uff0c\u76f4\u63a5\u4e8c\u5206\u679a\u4e3e\u7b54\u6848\u518d$check$\u5c31\u597d\u4e86\u3002\n\n\u518d\u770b$check$\u8981\u600e\u4e48\u5199\u3002\n\n\u8bbe\u6211\u4eec\u679a\u4e3e\u7684\u7b54\u6848\u662f$ans$\uff0c\u5219\u6211\u4eec\u5206\u51fa\u6765\u7684\u6bcf\u4e2a\u533a\u57df\u7684\u5976\u725b\u90fd\u8981\u5c0f\u4e8e$ans$~~\u663e\u800c\u6613\u89c1~~\u3002\n\n\u6211\u4eec\u679a\u4e3e $y$ \uff0c\u7528\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4 $y$ \u4e0a\u9762\u533a\u57df\u548c\u4e0b\u9762\u7684\u5976\u725b\u6570\uff0c\u7136\u540e\u6c42\u4e00\u4e2a\u6700\u4f18\u7684 $x$\u3002\n\n\u4f46\u662f\u5982\u679c\u76f4\u63a5\u679a\u4e3e$x$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u76f4\u63a5\u5230$n^2$\uff0c\u5f88\u660e\u663e\u4e0d\u80fd\u76f4\u63a5\u679a\u4e3e\u3002\n\n\u518d\u4ed4\u7ec6\u60f3\u60f3\uff0c\u5047\u8bbe\u6211\u4eec\u662f\u4ece\u5c0f\u5230\u5927\u679a\u4e3e$y$\uff0c\u90a3\u4e48\u4e0a\u9762\u533a\u57df\u7684\u5976\u725b\u6570\u4f1a\u8d8a\u6765\u8d8a\u5c11\uff0c\u4e0b\u9762\u7684\u5976\u725b\u7684\u6570\u91cf\u4f1a\u8d8a\u6765\u8d8a\u591a\uff0c\u6240\u4ee5\u5bf9\u4e8e\u4e0a\u9762\u533a\u57df\uff0c\u6211\u4eec\u4ece\u5c0f\u5230\u5927\u679a\u4e3e$x$\uff0c\u8bbe\u5de6\u4e0a\u533a\u57df\u5976\u725b\u6570\u521a\u597d$<=ans$\u65f6$x=t1$\uff0c\u5bf9\u4e8e\u4e0b\u9762\u533a\u57df\uff0c\u6211\u4eec\u4ece\u5927\u5230\u5c0f\u679a\u4e3e$x$\uff0c\u8bbe\u5de6\u4e0b\u533a\u57df\u5976\u725b\u6570\u521a\u597d$<=ans$\u65f6$x=t2$\uff0c\u5219\u6700\u4f18\u7684$x$\u5c31\u662f$min(t1,t2)$\n\n$x$\u548c$y$\u90fd\u786e\u5b9a\u4e86\uff0c\u518d\u8ba1\u7b97\u51fa\u5176\u4ed6\u4e24\u4e2a\u533a\u57df\u7684\u5976\u725b\u6570\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\nconst int N = 1e5 + 10;\n\ninline int read()\n{\n\tint res=0;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9')ch=getchar();\n\twhile(ch>='0'&&ch<='9')res=(res<<3)+(res<<1)+(ch^48),ch=getchar();\n\treturn res;\n}\n\nstruct Cow{\n\tint x,y;\n\tbool operator <(const Cow a) const{\n        return y<a.y;\n    }\n}c[N];\n\nint n,sb[N],xb[N];\n#define lowbit(x) (x)&(-x)\nvoid change(int a[],int x,int k)\n{\n\twhile(x<=n)\n\t\ta[x]+=k,x+=lowbit(x);\n}\n\nint query(int a[],int x)\n{\n\tint res=0;\n\twhile(x>0)\n\t\tres+=a[x],x-=lowbit(x);\n\treturn res;\n}\n\nbool check(int x)\n{\n\tmemset(sb,0,sizeof(sb));\n\tmemset(xb,0,sizeof(xb));\n\tfor(int i=1;i<=n;i++)\n\t\tchange(sb,c[i].x,1);\n\tint st=n,xt=0,zs=1,zx=n;\n\tfor(int t,i=1,j=1;i<=n;i=j)\n\t{\n\t\twhile(c[i].y==c[j].y)\n\t\t\tchange(sb,c[j].x,-1),change(xb,c[j].x,1),st--,xt++,j++;\n\t\twhile(zs<=n&&query(sb,zs)<=x)\n\t\t\tzs++;\n\t\tzs--;\n\t\twhile(zx>0&&query(xb,zx)>x)\n\t\t\tzx--;\n\t\tt=min(zx,zs);\n\t\tif(xt-query(xb,t)<=x&&st-query(sb,t)<=x)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\npair<int,int>p[N];\n\nint tot,mid,l,r,ans;\n\nint main()\n{\n\tn=read();\n\tfor(int i=1;i<=n;i++)\n\t\tc[i].x=read(),c[i].y=read(),p[i].first=c[i].x,p[i].second=i;\n\tsort(p+1,p+n+1);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(p[i].first!=p[i-1].first)\n\t\t\ttot++;\n\t\tc[p[i].second].x=tot;\n\t}\n\tsort(c+1,c+n+1);\n\tl=1,r=n;\n\twhile(l<=r)\n\t{\n\t\tmid=(l+r)>>1;\n\t\tif(check(mid))\n\t\t\tr=mid-1,ans=mid;\n\t\telse l=mid+1;\n\t}\n\tprintf(\"%d\\n\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1587823170,
        "uid": 236021,
        "name": "C_\u65ed",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P6172 \u3010[USACO16FEB]Load Balancing P\u3011"
    },
    {
        "content": "###### ~~\u7ba1\u7406\u5ba1\u6838\u8f9b\u82e6\u4e86\uff01~~\n\n[P6172](https://www.luogu.com.cn/problem/P6172)\n\n## \u5927\u81f4\u9898\u610f:\n\u7ed9\u51fa\u4e00\u4e2a\u7ad6\u7740\u7684\u6805\u680f \u4e00\u4e2a\u6a2a\u7740\u7684\u6805\u680f \u628a\u4e00\u5757\u5730\u65b9\u5206\u6210\u56db\u4e2a\u533a\u5757,\n\n\u4ee4$S$\u4e3a\u5976\u725b\u6700\u591a\u7684\u533a\u5757\u7684\u5976\u725b\u6570,\n\n\u6c42$S$\u7684\u6700\u5c0f\u503c.\n\n\n------------\n\n\u4e3a\u4e86\u65b9\u4fbf \u63a5\u4e0b\u6765\u6211\u4f1a\u628a\u7ad6\u7740\u7684\u6805\u680f\u79f0\u4f5c**\u7ad6\u680f** \u6a2a\u7740\u7684\u6805\u680f\u79f0\u4f5c**\u6a2a\u680f**.\n\n\n------------\n\n\n\n\u5f88\u660e\u663e\u968f\u7740\u6211\u4eec\u4ece\u5de6\u5f80\u53f3\u5c1d\u8bd5\u4fee\u5efa\u7ad6\u680f\u65f6:\n\n\u7ad6\u680f\u5de6\u8fb9\u7684\u5976\u725b\u6570\u662f\u5355\u8c03\u4e0d\u51cf\u7684,\n\n\u7ad6\u680f\u53f3\u8fb9\u7684\u5976\u725b\u6570\u662f\u5355\u8c03\u4e0d\u589e\u7684,\n\n\u6a2a\u680f\u4e5f\u662f\u540c\u7406.\n\n\n------------\n\n\n\u5bf9\u4e8e\u8fd9\u6837\u201c\u6700\u5927\u503c\u6700\u5c0f\u201d\u7684\u95ee\u9898 \u6211\u4eec\u9996\u5148\u53ef\u4ee5\u60f3\u5230\u7684\u5c31\u662f**\u4e8c\u5206\u7b54\u6848**.\n\n~~\uff08\u8fd9\u6837\u5b50\u6211\u4eec\u5c31\u80fd\u628a\u95ee\u9898\u4ece**\u6c42\u89e3**\u8f6c\u6362\u6210**\u5224\u5b9a** \u800c\u5224\u5b9a\u7684\u96be\u5ea6\u662f\u7edd\u5bf9\u6bd4\u6c42\u89e3\u4f4e\u7684\uff09~~\n\n\u4f46\u662f\u8fd9\u9053\u9898\u7684\u96be\u70b9\u5728\u4e8e\u600e\u4e48\u5224\u5b9a.\n\n## \u4e0b\u9762\u63d0\u4f9b\u4e24\u4e2a\u601d\u8def\n\n### 1. \u7ef4\u62a4\u4e24\u4e2a\u6307\u9488\n\n\u5728\u6211\u4eec\u53d1\u73b0\u6805\u680f\u5de6\u53f3\u4e24\u8fb9\u5976\u725b\u6570\u91cf\u7684**\u5355\u8c03\u6027**\u4e4b\u540e \u6211\u4eec\u5c31\u53ef\u4ee5\u5c1d\u8bd5\u7ef4\u62a4\u4e24\u4e2a\u6307\u9488 \n\n\u4e00\u4e2a\u5728\u4e0a\u9762\u4ece\u5de6\u5f80\u53f3\u626b\n\n\u4e00\u4e2a\u5728\u4e0b\u9762\u4ece\u53f3\u5f80\u5de6\u626b\n\n\u5982\u679c\u5f97\u5230\u7684\u7ed3\u679c\u4e0d\u7b26\u5408\u6211\u4eec\u4e8c\u5206\u679a\u4e3e\u7684\u7b54\u6848 \u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8c03\u6574\u6a2a\u680f.\n\n**\u6240\u4ee5\u6211\u4eec\u7684\u5927\u81f4\u601d\u8def\u662f**\uff1a\n```\n1. \u6ee1\u8db3\u5de6\u4e0a\u548c\u53f3\u4e0b\u4e24\u4e2a\u533a\u5757\n2. \u679a\u4e3e\u6a2a\u680f\n3. \u8c03\u6574\u5de6\u4e0a\u548c\u53f3\u4e0b\u4e24\u4e2a\u533a\u95f4\n```\n\u6bcf\u4e00\u6b21\u8c03\u6574\u6307\u9488\u548c\u679a\u4e3e\u6a2a\u680f\u90fd\u662f $ O(n) $\u7684 \u4e8c\u5206\u7b54\u6848 $ O(logn)$ .\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $ O(nlogn) $.\n\n\u6838\u5fc3\u4ee3\u7801:\n```\n\tbool ok(int pdowns , int  downs , int pups , int ups , int now)\n\t{\n\t\treturn (pdowns <= now && downs - pdowns <= now && pups <= now && ups - pups <=now) ? 1 : 0;\n\t}\n\n...\n\twhile(i <= n)\n\t{\n\t\twhile(upls < now && upl <= n)\n\t\t{//\u6ee1\u8db3\u4e0a\u9762\n\t\t\t++ upl;\n\t\t\tif(p1[upl].y > y) upls ++;//\u5728\u6a2a\u7740\u7684\u6805\u680f\u4e0a\u9762 \n\t\t\telse downls ++;//\u5728\u6a2a\u7740\u7684\u6805\u680f\u4e0b\u9762\n\t\t\t\n\t\t}\n\t\tuplx = p1[upl].x;//\u8bb0\u5f55\u5f53\u524d\u6307\u9488\u4f4d\u7f6e\n\t\t\n\t\twhile(downrs > now && downr >= 0)\n\t\t{\n\t\t\t-- downr;\n\t\t\tif(p1[downr + 1].y > y) -- uprs;\n\t\t\telse -- downrs;\n\t\t}\n\t\tdownrx = p1[downr].x;\n\t\t\n\t\tif(ok(downls , downs , upls , ups , now) || ok(downrs , downs , uprs , ups , now)) return 1;\n\t\t\n\t\tdo\n\t\t{\n\t\t\t++ i;//\u626b\u4e0b\u4e00\u4e2a \u6805\u680f\u662f\u5426\u5411\u4e0a\u79fb\u52a8\u8fd8\u9700\u8981\u5224\u5b9a \n\t\t\tdowns ++ , ups --;\n\t\t\ty = p2[i].y;//\u5f80\u4e0a\u79fb\u52a8 \u5982\u679c\u76f8\u540c\u5c31\u4e0d\u79fb\u52a8 \n\t//\t\t//cout<<p2[i].x<<\"?\"<<endl;\n\t\t\tif(p2[i].x <= uplx)\n\t\t\t{\n\t\t\t\tupls --;\n\t\t\t\tdownls ++;\n\t\t\t}\n\t\t\tif(p2[i].x <= downrx)\n\t\t\t{\n\t\t\t\tuprs --;\n\t\t\t\tdownrs ++;\n\t\t\t}\n\t\t\tif(ok(downls , downs , upls , ups , now) || ok(downrs , downs , uprs , ups , now)) return 1;\n\t\t}while(i + 1 <= n && p2[i].y == p2[i + 1].y);\n\t\tif(ok(downls , downs , upls , ups , now) || ok(downrs , downs , uprs , ups , now)) return 1;\n\t}\n```\n\n### 2.\u53cc\u7ebf\u6bb5\u6811\uff08\u6811\u72b6\u6570\u7ec4\uff09\u505a\u6cd5\n\n\n-  \u6bcf\u4e00\u6b21\u4e8c\u5206\u7b54\u6848 $ chek( x )$ \u7684\u65f6\u5019 \u6211\u4eec\u4ece\u4e0b\u5f80\u4e0a\u679a\u4e3e\u6a2a\u680f \u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u70b9 \u8981\u4e48\u5728\u6a2a\u680f\u4e0a \u8981\u4e48\u5728\u6a2a\u680f\u4e0b.\n\n-  \u6211\u4eec\u7ef4\u62a4\u4e24\u4e2a\u7ebf\u6bb5\u6811 \u4e00\u4e2a\u7528\u4e8e\u6a2a\u680f\u4e0a\u7684\u70b9 ( $T_1$ ) \u4e00\u4e2a\u7528\u4e8e\u5b58\u6a2a\u680f\u4e0b\u7684\u70b9 ( $T_0$ ).\n\n-  \u6211\u4eec\u627e\u51fa $T_1$ \u548c $T_0$ \u53f3\u5b50\u6811\u533a\u95f4\u548c $\u2264x$ \u7684\u6709\u6548\u6700\u5de6\u7aef\u70b9 $l_1,l_0$ \u548c\u5de6\u5b50\u6811\u7684\u6709\u6548\u6700\u53f3\u7aef\u70b9 $r_1,r_0$ , \u8fd9\u4e2a\u65f6\u5019 \u5bf9\u4e8e\u4e0a\u534a\u90e8\u5206\u7684\u6805\u680f \u53ea\u8981\u6805\u680f\u7684\u4f4d\u7f6e\u5728 $[l_1,r_1]$ \u5185 \u5c31\u662f\u5408\u6cd5\u7684\uff0c\u5bf9\u4e8e\u4e0b\u534a\u90e8\u5206\u6805\u680f \u53ea\u8981\u6805\u680f\u7684\u4f4d\u7f6e\u5728 $[l_0,r_0]$ \u5185 \u5c31\u662f\u5408\u6cd5\u7684.\n- \u6240\u4ee5\u53ea\u8981\u8fd9\u4e24\u4e2a\u533a\u95f4\u6709\u76f8\u4ea4 \u8fd9\u4e2a\u7b54\u6848 $x$ \u5c31\u662f\u5408\u6cd5\u7684.\n\n(\u5f53\u8fd9\u4e2a\u70b9\u5728\u8fd9\u68f5\u7ebf\u6bb5\u6811\u91cc\u9762\u7684\u6743\u503c\u4e3a1\u65f6 \u6211\u4eec\u53eb\u5b83\u6709\u6548\u70b9).\n\n----\n### \u5982\u4f55\u5b9e\u73b0:\n\u5728\u4e00\u5f00\u59cb\u6211\u4eec\u5c31\u53ef\u4ee5\u628a $T_0,T_1$ \u5efa\u8d77\u6765 \u6bcf\u6b21\u79fb\u52a8\u6a2a\u680f\u7684\u65f6\u5019 \u4fee\u6539\u70b9\u5728\u7ebf\u6bb5\u6811\u91cc\u9762\u7684\u6743\u503c\u5c31\u597d\u4e86.\n\n### \u6bd4\u5982\uff1a\n\n- \u6211\u5728\u679a\u4e3e\u6a2a\u680f\u7684\u65f6\u5019 \u6a2a\u680f\u4ece\u70b9 $p_i$ \u4e0b\u9762\u5230\u4e86 $p_i$ \u4e0a\u9762(\u5c31\u662f\u628a $p_i$ \u5212\u5206\u5230\u4e86\u6a2a\u680f\u4e0b\u9762) \n- \u6211\u4eec\u5c31\u628a\u70b9 $p_i$ \u5728\u7ebf\u6bb5\u6811 $T_1$ \u7684\u6743\u503c\u4fee\u6539\u62100,\u8bb0\u5f55\u8fd9\u4e2a\u70b9\u4e0d\u518d\u662f\u6709\u6548\u70b9\n- \u5728 $T_0$ \u4e2d\u628a $p_i$ \u7684\u6743\u503c\u4fee\u6539\u6210 1 ,\u8bb0\u5f55\u8fd9\u4e2a\u70b9\u662f\u6709\u6548\u70b9\n\n\n\n------------\n\n\u7b2c\u4e00\u6b21\u5199\u9898\u89e3 \u5982\u6709\u9519\u8bef\u8bf7\u5927\u4f6c\u6307\u51fa.",
        "postTime": 1634661273,
        "uid": 308384,
        "name": "Morpheuse",
        "ccfLevel": 0,
        "title": "P6172\u9898\u89e3"
    },
    {
        "content": "[Load Balancing P](https://www.luogu.com.cn/problem/P6172)\n\n> \u5c06\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u4e2d\u7684\u70b9\u7528\u4e24\u6761\u5e73\u884c\u4e8e $x/y$ \u8f74\u7684\u76f4\u7ebf\u5206\u6210 $4$ \u90e8\u5206\uff0c\u6c42\u533a\u57df\u5185\u6700\u591a\u5976\u725b\u6570\u91cf\u7684\u6700\u5c0f\u503c\u3002\n\n\u4e8c\u5206\u7b54\u6848\uff0c\u96be\u70b9\u5728\u5224\u5b9a\u4e0a\u3002\n\n\u6309\u7167\u666e\u901a\u8d2a\u5fc3\u601d\u8def\uff0c\u679a\u4e3e $x$ \u540e\u679a\u4e3e $y$\uff0c\u90a3\u663e\u7136\u662f $O(n^2\\log n)$ \u7684\uff0c\u8dd1\u5230\u5929\u8352\u5730\u8001\u3002\n\n\u6240\u4ee5\u9700\u8981\u4f7f\u7528\u6570\u636e\u7ed3\u6784\u4f18\u5316\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u8003\u8651\u4ece\u5c0f\u5230\u5927\u679a\u4e3e $y$\uff08$x$ \u4e5f\u662f\u4e00\u6837\u7684\uff09\uff0c\u7136\u540e\u5728\u6811\u72b6\u6570\u7ec4\u4e0a\u4e8c\u5206\u3002\n\n\u4f46\u662f\u8fd9\u6837\u662f $O(n\\log^3 n)$ \u770b\u4e0a\u53bb\u5f88\u4e0d\u4f18\u7f8e\uff0c\u53d1\u73b0\u53ef\u4ee5\u53cc\u6307\u9488\u4e00\u904d\u626b\u8fc7\u53bb\uff0c\u4e8e\u662f\u5c31\u53d8\u6210 $O(n\\log ^2 n)$ \u4e86\u3002\n\n\u8003\u8651\u5b9e\u73b0\u5c06 $x$ \u79bb\u6563\u5316\u4e00\u4e0b\u53ef\u4ee5\u8fbe\u5230\u66f4\u52a0\u4f18\u7f8e\u7684\u590d\u6742\u5ea6\u54e6\u3002\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\nconst int N = 100010;\nint n, m, b[N], up[N], down[N];\nstruct node{int x, y;} a[N];\n\nint read(){\n\tint x = 0, f = 1; char c = getchar();\n\twhile(c < '0' || c > '9') f = (c == '-') ? -1 : 1, c = getchar();\n\twhile(c >= '0' && c <= '9') x = x * 10 + c - 48, c = getchar();\n\treturn x * f;\n}\n\nbool cmp(node a, node b){return a.y < b.y;}\n\nvoid Modify(int c[], int x, int v){for(; x <= m; x += x & -x) c[x] += v;}\nint Query(int c[], int x){int sum = 0; for(; x; x -= x & -x) sum += c[x]; return sum;}\n\nbool chck(int mid){\n\tint Up = n, Down = 0, S = 1, T = n;\n\tfor(int i = 1; i <= n; i ++) up[i] = down[i] = 0;\n\tfor(int i = 1; i <= n; i ++) Modify(up, a[i].x, 1);\n\tfor(int i = 1, j; i <= n; i = j){\n\t\tj = i;\n\t\twhile(a[i].y == a[j].y){\n\t\t\tModify(up, a[j].x, - 1);\n\t\t\tModify(down, a[j].x, + 1);\n\t\t\tj ++, Up --, Down ++;\n\t\t}\n\t\twhile(S <= n && Query(up, S) <= mid) S ++; S --;\n\t\twhile(T >= 1 && Query(down, T) > mid) T --;\n\t\tint t = min(S, T);\n\t\tif(Up - Query(up, t) <= mid && Down - Query(down, t) <= mid)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nint main(){\n\tn = read();\n\tfor(int i = 1; i <= n; i ++){\n\t\ta[i].x = read(), a[i].y = read();\n\t\tb[i] = a[i].x;\n\t}\n\tsort(b + 1, b + n + 1);\n\tm = unique(b + 1, b + n + 1) - (b + 1);\n\tfor(int i = 1; i <= n; i ++)\n\t\ta[i].x = lower_bound(b + 1, b + m + 1, a[i].x) - b;\n\tsort(a + 1, a + n + 1, cmp);\n\tint l = 0, r = n;\n\twhile(l < r){\n\t\tint mid = (l + r) >> 1;\n\t\tif(chck(mid)) r = mid;\n\t\telse l = mid + 1;\n\t}\n\tprintf(\"%d\\n\", l);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1625801577,
        "uid": 117941,
        "name": "_LPF_",
        "ccfLevel": 9,
        "title": "P6172 [USACO16FEB]Load Balancing P"
    },
    {
        "content": "> [P6172](https://www.luogu.com.cn/problem/P6172).\n> [Github blog](https://9u46-mx.github.io/post/Solution-P6172/).\n\n---\n\n\u5e73\u9762\u4e0a\u6709 $n$ \u4e2a\u70b9 $(x_i, y_i)(2 \\nmid x \\land 2 \\nmid y)$\uff0c\u627e\u5230\u4e24\u6761\u76f4\u7ebf $x = a, y = b\\,(2 \\mid a \\land 2 \\mid b)$\uff0c\u4f7f\u5f97\u5e73\u9762\u88ab\u5206\u6210\u7684\u56db\u90e8\u5206\u4e2d\u5305\u542b\u70b9\u6570\u6700\u591a\u7684\u90e8\u5206\u70b9\u6570\u6700\u5c0f\u3002\n\n\u6c42\u8fd9\u4e2a\u6700\u5c0f\u503c\u3002\n\n$1 \\leqslant n \\leqslant 10^5$\uff0c$0 < x, y \\leqslant 10^6$\u3002\n\n---\n\n\u8003\u8651\u679a\u4e3e $a$\u3002\u53ef\u4ee5\u5229\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4 $x = a$ \u4e24\u4fa7\u7684\u70b9\u7684\u7eb5\u5750\u6807\u3002\n\n\u8003\u8651\u4e8c\u5206\u7b54\u6848 $k$\uff0c\u518d\u5728\u6811\u72b6\u6570\u7ec4\u4e0a\u500d\u589e\uff0c\u627e\u5230\u76f4\u7ebf\u4e24\u4fa7\u5747\u6709\u4e0d\u8d85\u8fc7 $k$ \u4e2a\u70b9\u5728\u76f4\u7ebf $y = b$ \u4e0b\u65b9\u7684\u6700\u5927\u7684 $b$\uff0c\u518d\u5224\u65ad\u76f4\u7ebf $y = b$ \u4e0a\u65b9\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n \\log n \\log y)$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n + y)$\u3002\n\n---\n\n\u6ce8\u610f\u786e\u5b9a $a$ \u540e $x = a$ \u4e24\u4fa7 $b$ \u7684\u500d\u589e\u8981\u540c\u65f6\u8fdb\u884c\uff0c\u5426\u5219\u53ef\u80fd\u4e24\u4fa7\u53d6 $b$ \u503c\u4e0d\u76f8\u7b49\u3002\n\n---\n\n```cpp\n# include <cstdio>\n# include <cstring>\n# include <algorithm>\n\nnamespace Main {\n    namespace Source {\n        typedef short unsigned int hu;\n        typedef unsigned int uint;\n        static inline const uint min(const uint a, const uint b) { return b < a ? b : a; }\n        static inline const uint max(const uint a, const uint b) { return a < b ? b : a; }\n        static inline const void amin(uint& a, const uint b) { a = min(a, b); }\n        static inline const void amax(uint& a, const uint b) { a = min(a, b); }\n        static const uint Max_uint(0xffffFFFFu);\n    }\n    using namespace Source;\n    enum { N = (const uint)1e5, X = (const uint)1e6, Y = (const uint)1e6, Log = 19 };\n    class Fenwick_tree {\n        static inline const uint lowbit(const uint x) { return x bitand ~x + 1; }\n        uint tree[Y + 1], sum;\n    public:\n        Fenwick_tree() { memset(tree, 0, sizeof tree); }\n        inline const void mp(uint x) { ++sum; while (++tree[x], (x += lowbit(x)) <= Y); }\n        inline const void mm(uint x) { --sum; while (--tree[x], (x += lowbit(x)) <= Y); }\n    private:\n        static inline const bool check(const Fenwick_tree& a, const Fenwick_tree& b, const uint k) {\n            uint p(0), al(0), bl(0);\n            for (hu i(Log); i and (p | 1 << i) <= Y; --i)\n                if (al + a.tree[p | 1 << i] <= k and bl + b.tree[p | 1 << i] <= k)\n                    p or_eq 1 << i, al += a.tree[p], bl += b.tree[p];\n            return a.sum - al <= k and b.sum - bl <= k;\n        }\n    public:\n        static inline const uint maxmin(const Fenwick_tree& a, const Fenwick_tree& b) {\n            uint r(0);\n            for (hu i(Log); i <= Log; --i) if (not check(a, b, r bitor 1 << i)) r or_eq 1 << i;\n            return r + 1;\n        }\n    };\n    struct point {\n        uint x, y;\n        inline const void read() { scanf(\"%u%u\", &x, &y); }\n        friend inline const bool operator<(const point& a, const point& b) { return a.x < b.x; }\n    };\n    static uint n;\n    static point p[N];\n    static Fenwick_tree l, r;\n    static uint ans(Max_uint);\n    static inline const void main() {\n        scanf(\"%u\", &n);\n        for (register uint i(0); i < n; ++i) p[i].read(), r.mp(p[i].y);\n        std::sort(&p[0], &p[n]);\n        for (register uint i(0), j(0); i <= X; i += 2) {\n            while (j < n and p[j].x <= i) r.mm(p[j].y), l.mp(p[j].y), ++j;\n            // if (not(i % 1000)) printf(\"%u %u\\n\", i, Fenwick_tree::maxmin(l, r));\n            amin(ans, Fenwick_tree::maxmin(l, r));\n        }\n        printf(\"%u\\n\", ans);\n    }\n}\n\nsigned int main() { Main::main(); return 0; }\n```",
        "postTime": 1614175150,
        "uid": 236807,
        "name": "Mitama",
        "ccfLevel": 9,
        "title": "[Solution] P6172"
    },
    {
        "content": "\u9898\u610f\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u8fd9\u4e2a\u9898\u672c\u8eab\u5f88\u7b80\u5355\uff0c\u6211\u6765\u5199\u9898\u89e3\u53ea\u662f\u56e0\u4e3a\u770b\u5230\u9898\u89e3\u533a\u5168\u662f $\\mathcal O(n\\log^2 n)$ \u7684\u7b97\u6cd5\u6240\u4ee5\u6765\u4ecb\u7ecd\u4e00\u4e0b\u81ea\u5df1\u7684\u505a\u6cd5\u3002\u54e6\u597d\u50cf\u786e\u5b9e\u6709\u4e00\u4e2a\u5355 log \u7684\u9898\u89e3\u4f46\u662f\u4ed6\u8bf4\u4ed6\u6ca1\u8fc7\u3002\n\n\u8bb0 $V$ \u4e3a\u503c\u57df\u6700\u5927\u503c\u3002\u8fd9\u4e2a\u9898\u6211\u4eec\u9996\u5148\u4e8c\u5206\u7b54\u6848\u8f6c\u5316\u6210\u5224\u5b9a\u95ee\u9898\uff0c\u4e5f\u5373\u7ed9\u5b9a $M$ \u5224\u65ad\u662f\u5426\u53ef\u4ee5\u628a\u5e73\u9762\u6309\u4f53\u91cd\u6240\u8ff0\u5206\u6210 4 \u4efd\u6765\u8ba9\u6bcf\u4e2a\u5206\u6210\u7684\u533a\u57df\u5185\u7684\u70b9\u7684\u4e2a\u6570\u5747\u4e0d\u591a\u4e8e $M$\u3002\n\n\u6211\u4eec\u679a\u4e3e\u7b2c\u4e00\u6761\u76f4\u7ebf\u4e3a $y=C$\uff0c\u7531\u4e8e\u8be5\u76f4\u7ebf\u4e0a\u9762\u548c\u4e0b\u9762\u662f\u5bf9\u79f0\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u53ea\u8003\u8651\u4e0b\u9762\u3002\u8003\u5bdf\u7b2c\u4e8c\u6761\u76f4\u7ebf\u5408\u6cd5\u7684\u653e\u7f6e\u4f4d\u7f6e\uff08\u56fe\u4e2d\u7684\u7eff\u70b9\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5873jhy6.png)\n\n\u4ee4 $s_{C,i}$ \u4e3a\u6ee1\u8db3 $y_D \\leq C, x_D = i$ \u7684\u70b9 $D$ \u7684\u6570\u91cf\uff0c\u5982\u679c\u4e00\u4e2a\u70b9 $(C, p)$ \u662f\u7eff\u70b9\u90a3\u4e48\u5c31\u6709 $\\sum\\limits_{i=1}^p s_{C, i}\\leq M, \\sum\\limits_{i=p+1}^V s_{C, i} \\leq M$\u3002\u6613\u53d1\u73b0\uff0c\u8fd9\u4e24\u4e2a\u6761\u4ef6\u4e4b\u4e0b\uff0c\u7eff\u70b9\u7684\u5750\u6807\u662f\u7531\u67d0\u4e2a\u533a\u95f4\u5185\u7684\u5076\u6570\u6784\u6210\u7684\u3002\u8bb0\u8fd9\u4e2a\u533a\u95f4\u4e3a $[L, R]$\uff0c\u90a3\u4e48 $R = \\max\\{t | \\sum\\limits_{i=1}^t s_{C, i} \\leq X \\}$\uff0c$L = \\min\\{t | \\sum\\limits_{i=1}^t s_{C, i} \\geq \\sum\\limits_{i=1}^n s_{C, i} - X\\}$\u3002\u5bb9\u6613\u53d1\u73b0 $L$ \u5355\u8c03\u4e0d\u964d\u800c $R$ \u5355\u8c03\u4e0d\u5347\uff0c\u4f7f\u7528\u53cc\u6307\u9488\u6cd5\u7ef4\u62a4\u5373\u53ef\uff0c\u5177\u4f53\u7ec6\u8282\u53ef\u4ee5\u770b\u4ee3\u7801\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n \\log n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define f(i,x,y) for(int i=x, i##end=y; i<=i##end; ++i)\n#define d(i,x,y) for(int i=y, i##end=x; i>=i##end; --i)\n#define uf(i,x,y) for(int i=x, i##end=y; i<i##end; ++i)\n#define ll long long\n#define pir pair<int, int>\n#define fir first\n#define sec second\n#define mp make_pair\n#define pb push_back \nchar buf[1 << 23], *p1 = buf, *p2 = buf, obuf[1 << 23], *O = obuf;\n#define getchar() (p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 1 << 21, stdin), p1 == p2) ? EOF : *p1++)\nchar ch;\nint rd() {\n\tint f=1, x=0; ch=getchar();\n\twhile(!isdigit(ch)) { f=((ch=='-')?-1:f); ch=getchar(); }\n\twhile(isdigit(ch)) { x=x*10+ch-'0'; ch=getchar(); }\n\treturn x*f;\n}\nvoid rd(int& x) { x=rd(); }\nusing namespace std;\nconst int _ = 1000005, MAX = _ - 5;\nint n, x[_], y[_], s[_], c[_], l[_], r[_], t[_], p[_], rk[_], mxv = 0; vector<int> atl[_];\nint check(int lim) {\n\tif(lim >= n/3+1) return 1;\n\tint ls = 0, rs = mxv, sl = 0, sr = 0, S = 0, ok = 0, bp = mxv;\n\tf(i,1,mxv) {\n\t\tfor(auto x:atl[i]) {\n\t\t\t++s[x]; ++S;\n\t\t\tif(x <= rs) ++sr;\n\t\t\twhile(sr > lim) sr-=s[rs--];\n\t\t\tif(x <= ls) ++sl;\n\t\t\twhile(sl < S-lim) sl += s[++ls];\n\t\t}\n\t\tif(ls > rs) { bp = i; break; }\n\t\tl[i] = ls, r[i] = rs;\n\t}\n\tls = 0, rs = mxv, sl = 0, sr = 0, S = 0;\n\td(i,1,mxv) {\n\t\tfor(auto x:atl[i]) {\n\t\t\t++c[x]; ++S;\n\t\t\tif(x <= rs) ++sr;\n\t\t\twhile(sr > lim) sr-=c[rs--];\n\t\t\tif(x <= ls) ++sl;\n\t\t\twhile(sl < S-lim) sl += c[++ls];\n\t\t}\n\t\tif(ls > rs) break;\n\t\tif(i < bp && ls <= rs && l[i] <= r[i] && min(rs, r[i]) >= max(ls, l[i])) ok=1;\n\t}\n\tf(i,1,mxv) s[i]=c[i]=0;\n\treturn ok;\n}\nint main() {\n\trd(n); f(i,1,n) rd(x[i]), rd(y[i]), t[i] = y[i], p[i] = x[i];\n\tsort(t+1, t+n+1); int l = unique(t+1, t+n+1) - t - 1;\n\tf(i,1,l) rk[t[i]] = i; f(i,1,n) y[i] = 2*rk[y[i]]+1, mxv = max(mxv, y[i]);\n\tsort(p+1, p+n+1); l = unique(p+1, p+n+1) - p - 1;\n\tf(i,1,l) rk[p[i]] = i; f(i,1,n) x[i] = 2*rk[x[i]]+1, mxv = max(mxv, x[i]);\n\tf(i,1,n) atl[y[i]].pb(x[i]);\n\tint ans = 0;\n\td(i,0,15) {\n\t\tif(!check(ans + (1<<i))) ans += (1<<i);\n\t}\n\tcout << ans + 1 << endl;\n\treturn 0;\n}\n```",
        "postTime": 1664442707,
        "uid": 133345,
        "name": "lightup37",
        "ccfLevel": 6,
        "title": "\u300cUSACO 2016,2 Platinum\u300dLoad Balancing \u9898\u89e3"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd $O(n\\log n)$ \u7684\u505a\u6cd5\u3002\n\n\u5b9e\u9645\u4e0a\u672c\u9898\u53ef\u4ee5\u4e0d\u9700\u8981\u4e8c\u5206\u3002\u8003\u8651\u679a\u4e3e\u7ad6\u76f4\u6805\u680f $x=a$ \u7684 $a$\u3002\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u5b83\u5de6\u53f3\u7684\u70b9\u3002\u5728\u6811\u72b6\u6570\u7ec4\u4e0a\u500d\u589e\u627e\u5230\u6700\u5927\u7684\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u7684 $b$\u3002\n\n\u6761\u4ef6\uff1a\u753b\u51fa\u76f4\u7ebf $x=a$ \u548c $y=b$\uff0c\u5c06\u5e73\u9762\u5206\u4e3a\u5de6\u4e0b\u3001\u53f3\u4e0b\u3001\u5de6\u4e0a\u3001\u53f3\u4e0a\u56db\u4e2a\u90e8\u5206\u3002\u8bbe\u56db\u4e2a\u90e8\u5206\u4e2d\u7684\u70b9\u6570\u5206\u522b\u4e3a $c_1,c_2,c_3,c_4$\uff0c\u5219 $\\max(c_1,c_2)\\le\\max(c_3,c_4)$\u3002\u8bf4\u4eba\u8bdd\u5c31\u662f\u4e0b\u9762\u4e24\u5757\u7684\u70b9\u6570\u7684\u8f83\u5927\u503c\u4e0d\u8d85\u8fc7\u4e0a\u9762\u4e24\u5757\u7684\u70b9\u6570\u8f83\u5927\u503c\u3002\n\n\u90a3\u4e48\uff0c\u5047\u5982\u7ad6\u76f4\u6805\u680f\u88ab\u94a6\u5b9a\u4e3a\u76f4\u7ebf $x=a$\uff0c\u90a3\u4e48\u6700\u4f18\uff08\u4f7f\u5f97 $M$ \u6700\u5c0f\uff09\u7684\u6c34\u5e73\u6805\u680f\u4e00\u5b9a\u662f\u76f4\u7ebf $y=b$ \u6216\u8005\u76f4\u7ebf $y=b+2$\u3002\n\n\u8bc1\u660e\uff1a\u8bbe\u6c34\u5e73\u6805\u680f\u4e0b\u65b9\u4e24\u5757\u7684\u70b9\u6570\u8f83\u5927\u503c\u4e3a $max_1$\uff0c\u4e0a\u65b9\u4e24\u5757\u7684\u70b9\u6570\u8f83\u5927\u503c\u4e3a $max_2$\u3002\u663e\u7136\u6c34\u5e73\u6805\u680f\u4e3a\u76f4\u7ebf $y=b$ \u7684\u65f6\u5019 $max_1\\le max_2$\uff0c\u6c34\u5e73\u6805\u680f\u4e3a\u76f4\u7ebf $y=b+2$ \u7684\u65f6\u5019 $max_1>max_2$\u3002\u8bbe $b'<b$\uff0c\u5219\u6b64\u65f6\u663e\u7136 $max_2'$ \u4e0d\u5c0f\u4e8e\u539f\u6765\u7684 $max_2$\uff0c\u7b54\u6848\u4e0d\u51cf\u3002$b'>b+2$ \u65f6\u540c\u7406\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(max_x+n\\log{max_y})$\u3002\u53ef\u4ee5\u79bb\u6563\u5316\u505a\u5230 $O(n\\log n)$\u3002\n\n\u7531\u4e8e\u6211\u61d2\uff0c\u6240\u4ee5\u4ee3\u7801\u5b9e\u73b0\u6ca1\u6709\u79bb\u6563\u5316\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nint n,m,t1[1000005],t2[1000005],x,n1,n2;\nconst int N=1e6;\nvector<int>g[1000005];\nvoid add1(int x,int y){n1+=y;while(x<=N)t1[x]+=y,x+=x&-x;}\nvoid add2(int x,int y){n2+=y;while(x<=N)t2[x]+=y,x+=x&-x;}\nint calc()\n{\n\tint res=0,l1=0,l2=0,ret=0x3f3f3f3f;\n\tfor(int i=1<<19;i;i>>=1)//\u6811\u72b6\u6570\u7ec4\u4e0a\u500d\u589e\uff0c\u4e00\u4e2a\u5f88\u597d\u73a9\u7684trick\n    //\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u4ee3\u66ff\n\t{\n\t\tint c1=l1+t1[res+i],c2=l2+t2[res+i];\n\t\tif(max(c1,c2)<=max(n1-c1,n2-c2))res+=i,l1=c1,l2=c2;\n\t\telse ret=min(ret,max(c1,c2));\n        //\u4e0d\u60f3\u5199query\u51fd\u6570\u67e5\u8be2y<=res+2\u7684\u70b9\u4e2a\u6570\uff0c\u6240\u4ee5\u76f4\u63a5\u53d6\u4e86\u5f88\u591a\u6b21\u591a\u4f59\u7684min\n\t}\n\tret=min(ret,max(n1-l1,n2-l2));\n\treturn ret;\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tint mx=0;\n\tfor(int i=1,x,y;i<=n;++i)\n\t\tscanf(\"%d%d\",&x,&y),g[x].push_back(y),\n\t\tmx=max(mx,x+1),add2(y,1);\n\tint ans=0x3f3f3f3f;\n\tfor(int i=2;i<=mx;i+=2)if(g[i-1].size())\n\t{\n\t\tfor(auto x:g[i-1])add1(x,1),add2(x,-1);\n\t\tans=min(ans,calc());\n\t}\n\tprintf(\"%d\\n\",ans);\n}\n\n```",
        "postTime": 1664434558,
        "uid": 300025,
        "name": "qiliangzhe",
        "ccfLevel": 8,
        "title": "P6172 \u9898\u89e3"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a\u590d\u6742\u5ea6\u4e3a $O(n \\log n)$\uff0c\u6811\u72b6\u6570\u7ec4\u4e8c\u5206\u7684\u505a\u6cd5\uff08\u76ee\u524d\u662f\u6700\u4f18\u89e3\uff09\u3002\n\n\u9996\u5148\u6211\u4eec\u679a\u4e3e\u6a2a\u7740\u7684\u5206\u754c\u7ebf\uff0c\u7528\u4e0a\u4e0b\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\u5206\u522b\u7ef4\u62a4\u5206\u754c\u7ebf\u4e0a\u4e0b\u7684\u70b9\uff0c\u5feb\u901f\u6c42\u51fa\u7ad6\u7740\u7684\u5206\u754c\u7ebf\u3002\n\n\u6211\u4eec\u8981\u60f3\u529e\u6cd5\u8ba9\u4e24\u8fb9\u7684\u70b9\u7684\u603b\u548c\u53d8\u5f97\u5e73\u8861\u3002\u8bbe $suml_i$ \u4e3a\u4ee5 $x=i$ \u4e3a\u7ad6\u7740\u7684\u5206\u754c\u7ebf\u65f6\uff0c\u5de6\u8fb9\u4e24\u4e2a\u533a\u57df\u7684\u6700\u5927\u503c\uff0c $sumr_i$ \u4e3a\u53f3\u8fb9\u4e24\u4e2a\u533a\u57df\u7684\u6700\u5927\u503c\u3002$now$ \u4e3a\u6ee1\u8db3 $suml_i \\leq sumr_i$ \u7684\u6700\u5927\u7684 $now$\u3002\u90a3\u4e48\u6700\u4f18\u7684\u7ad6\u7740\u7684\u5206\u754c\u7ebf\uff0c\u53ea\u80fd\u662f $now$ \u6216 $now+1$\uff0c\u53d6\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n\u53ef\u4ee5\u76f4\u63a5\u4e8c\u5206+\u6811\u72b6\u6570\u7ec4\u6c42 $now$\uff0c\u56e0\u4e3a $suml_i$ \u5355\u8c03\u9012\u589e\uff0c$sumr_i$ \u5355\u8c03\u9012\u51cf\uff0c\u590d\u6742\u5ea6\u4e3a $O(n \\log^2 n)$\u3002\u4f46\u663e\u7136\u53ef\u4ee5\u76f4\u63a5\u6811\u72b6\u6570\u7ec4\u4e8c\u5206\u6c42\u51fa\u7b54\u6848\u3002\uff08\u6709\u70b9\u50cf\u51b0\u706b\u6218\u58eb\u90a3\u9898\uff09\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5 + 1000;\nconst static int _ = 1 << 20 ;\nchar fin[_] , * p1 = fin , * p2 = fin ;\ninline char gc() { return (p1 == p2) && (p2 = (p1 = fin) + fread(fin , 1 , _ , stdin) , p1 == p2) ? EOF : * p1 ++ ; }\ninline int read() {\n    bool sign = 1 ; char c = 0 ; while(c < 48) ((c = gc()) == 45) && (sign = 0) ;\n    int x = (c & 15) ; while((c = gc()) > 47) x = (x << 1) + (x << 3) + (c & 15) ;\n    return sign ? x : -x ;\n}\nint up[N] , down[N];\nint t1[N] , cnt1 = 0 , t2[N] , cnt2 = 0;\nstruct node {\n\tint x , y;\n}a[N];\nint tr[2][N * 2] , maxx , maxy;\nint lowbit(int x) {\n\treturn x & (-x);\n}\nvoid update(int op , int x , int k) {\n\tif(x == 0)x = 1;\n\tfor(;x <= maxx; x += lowbit(x))tr[op][x] += k;\n}\nint query(int op , int x) {\n\tint sum = 0;\n\tfor(;x;x -= lowbit(x))sum += tr[op][x];\n\treturn sum;\n}\nbool cmp(node a , node b) {\n\treturn a.y < b.y;\n}\nint emax(int a , int b , int c , int d) {\n\treturn max(a , max(b , max(c , d)));\n}\nint main() {\n\tint n;n = read();\n\t\n//\tcout << Log << endl;\n\tfor(int i = 1; i <= n; i++) {\n\t\ta[i].x = read();a[i].y = read();\n\t\tt1[++cnt1] = a[i].x;t2[++cnt2] = a[i].y;\t\t\n\t}\n\tsort(t1 + 1 , t1 + cnt1 + 1);sort(t2 + 1 , t2 + cnt2 + 1);\n\tcnt1 = unique(t1 + 1 , t1 + cnt1 + 1) - t1 - 1;\n\tcnt2 = unique(t2 + 1 , t2 + cnt2 + 1) - t2 - 1;\n//\tcout << cnt1 << 'd' << cnt2 << endl;\n\tfor(int i = 1; i <= n; i++) {\n\t\ta[i].x = lower_bound(t1 + 1 , t1 + cnt1 + 1 , a[i].x) - t1;\n\t\ta[i].y = lower_bound(t2 + 1 , t2 + cnt2 + 1 , a[i].y) - t2;\n\t}\n\tmaxy = cnt2;maxx = cnt1;\n\tint Log = 1 , t = 1;\n\tfor(; t <= maxx; t <<= 1 , Log++);\n\tsort(a + 1 , a + n + 1 , cmp);\n\tint now = 1;\n\tint sumup = 0 , sumdown = 0;\n\tfor(int i = 1; i <= n; i++) {\n\t\tupdate(0 , a[i].x , 1);\n\t\tup[a[i].x]++;\n\t\tsumup++;\n\t}\n\tint ans = 1e9;\n\tfor(int i = 0; i <= maxy; i ++) {\n\t\twhile(now <= n && a[now].y < i) {\n\t\t\tupdate(1 , a[now].x , 1);\n\t\t\tupdate(0 , a[now].x , -1);\n\t\t\tsumdown++;sumup--;now++;\n\t\t\tdown[a[i].x]++;up[a[i].x]--;\n\t\t}\n\t\tint now0 = 0 , sum0 = 0 , sum1 = 0;\n\t\tfor(int j = Log; j >= 0; j--) {\n\t\t\tint n0 = now0 + (1 << j);\n\t\t\tif(n0 > maxx)continue;//printf(\"%d\\n\" , now0);\n\t\t\tint s0 = sum0 + tr[0][n0] , s1 = sum1 + tr[1][n0];\n\t\t\tif(max(s0 , s1) <= max(sumup - s0 , sumdown - s1)) {\n\t\t\t\tnow0 = n0;\n\t\t\t\tsum0 = s0;sum1 = s1;\n\t\t\t}\n\t\t}\n\t\tans = min(ans , emax(sumup - sum0 , sumdown - sum1 , sum0 , sum1));\n\t\tif(now0 < maxx) {//\u53d6now+1\n\t\t\tsum0 += up[now0 + 1];\n\t\t\tsum1 += down[now0 + 1];\n\t\t\tans = min(ans , emax(sumup - sum0 , sumdown - sum1 , sum0 , sum1));\t\n\t\t}\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1664506791,
        "uid": 226148,
        "name": "Suuon_Kanderu",
        "ccfLevel": 5,
        "title": "\u6811\u72b6\u6570\u7ec4\u4e8c\u5206"
    },
    {
        "content": "## \u9898\u76ee\u5206\u6790\n\n\u5f88\u663e\u7136\u8981\u4e8c\u5206\u7b54\u6848\uff0c\u5173\u952e\u5728\u4e8e\u5982\u4f55\u5224\u5b9a\u3002\u5728\u8fd9\u91cc\u63d0\u4f9b\u4e00\u4e2a\u590d\u6742\u5ea6 $\\mathcal{O}(N*\\log{N})$ \u7684\u601d\u8def\u3002\n\n\u5728\u6bcf\u4e00\u6b21\u5224\u5b9a\u4e2d\uff0c\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u6240\u6709\u6c34\u5e73\u7684\u6805\u680f\u4f4d\u7f6e\uff0c\u6b64\u65f6\u4e0a\u534a\u90e8\u5206\u7684\u725b\u7684\u6570\u91cf\u5355\u8c03\u51cf\u5c0f\uff0c\u4e0b\u534a\u90e8\u5206\u5355\u8c03\u589e\u52a0\u3002\u57fa\u4e8e\u8fd9\u79cd\u5355\u8c03\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0a\u4e0b\u90e8\u5206\u5404\u7ef4\u62a4\u4e00\u4e2a\u6307\u9488\uff0c\u5206\u522b\u8868\u793a\u4f7f\u5f97\u5de6\u4e0a\u90e8\u5206\u548c\u5de6\u4e0b\u90e8\u5206\u7684\u725b\u7684\u6570\u91cf\u4e0d\u5927\u4e8e\u6700\u5927\u503c\u5e76\u4e14\u5c3d\u53ef\u80fd\u591a\u7684\u6805\u680f\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6c34\u5e73\u7684\u6805\u680f\uff0c\u53ea\u9700\u5224\u65ad\u4e00\u4e0b\u4e24\u4e2a\u6307\u9488\u7684\u4f4d\u7f6e\u662f\u5426\u6ee1\u8db3\u8981\u6c42\u5373\u53ef\u3002\n\n\u7531\u4e8e\u4e0a\u534a\u90e8\u5206\u6570\u91cf\u5728\u53d8\u5c0f\uff0c\u4e0b\u534a\u90e8\u5206\u6570\u91cf\u5728\u589e\u52a0\uff0c\u6240\u4ee5\u5de6\u4e0a\u7684\u6307\u9488\u59cb\u7ec8\u5411\u53f3\u79fb\u52a8\uff0c\u5de6\u4e0b\u7684\u6307\u9488\u59cb\u7ec8\u5411\u5de6\u79fb\u52a8\u3002\u56e0\u6b64\u5355\u6b21\u5224\u5b9a\u4e2d\u679a\u4e3e\u6240\u6709\u6c34\u5e73\u6805\u680f\u7684\u540c\u65f6\u7ef4\u62a4\u4e24\u4e2a\u6307\u9488\u7684\u590d\u6742\u5ea6\u662f $\\mathcal{O}(N)$\u3002\n\n\u53ef\u4ee5\u8bc1\u660e\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u786e\u5b9a\u7684\u6c34\u5e73\u6805\u680f\u6765\u8bf4\uff0c\u5982\u679c\u53ef\u4ee5\u6ee1\u8db3\u8981\u6c42\u7684\u8bdd\uff0c\u4e24\u4e2a\u6307\u9488\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u662f\u5b83\u7684\u6ee1\u8db3\u8981\u6c42\u7684\u7ad6\u76f4\u6805\u680f\u7684\u4f4d\u7f6e\uff08\u56e0\u4e3a\u5982\u679c\u5b58\u5728\u6ee1\u8db3\u8981\u6c42\u7684\u7ad6\u76f4\u6805\u680f\u5e76\u4e14\u5b83\u4e0d\u5728\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u4e0a\uff0c\u90a3\u4e48\u5b83\u4e00\u5b9a\u53ef\u4ee5\u53f3\u79fb\u800c\u4f9d\u7136\u6ee1\u8db3\u8981\u6c42\uff09\u3002\u56e0\u6b64\u8fd9\u79cd\u505a\u6cd5\u662f\u6b63\u786e\u7684\u3002\n\n## \u4ee3\u7801\n~~\u5176\u5b9ewa\u4e86\u4e00\u4e2a\u70b9\uff0c\u849f\u84bb\u5b9e\u5728\u8c03\u4e0d\u51fa\u6765\u4e86~~\n```cpp\n//\u6d1b\u8c37P6172 \n\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN=100050;\ntypedef pair<int,int> pii;\npii x_first[MAXN],y_first[MAXN];\nint N;\n\nbool check(int x){\n\tint down_num=0,up_num=N,down_y=0;\t\t\t\t\t //\u4e0b\u534a\u90e8\u5206\u3001\u4e0a\u534a\u90e8\u5206\u7684\u4e2a\u6570\uff0c\u6c34\u5e73\u6805\u680f\u7684y\u5750\u6807 \n\tint up_left=0,down_right=N;\t\t\t\t\t\t\t //\u5de6\u4e0a\u3001\u5de6\u4e0b\u7684\u6307\u9488 \n\tint up_left_x=0,down_right_x=x_first[N].first;       //\u4e24\u4e2a\u6307\u9488\u5bf9\u5e94\u7684x\u5750\u6807 \n\tint down_left1=0,up_left1=0,down_left2=0,up_left2=N; //\u8bb0\u5f55\u5de6\u4e0a\u90e8\u5206\u3001\u5de6\u4e0b\u90e8\u5206\u7684\u4e2a\u6570 \n\t\n\tfor(int i=0;i<=N;){\n\t\t//\u7ef4\u62a4\u5de6\u4e0a\u7684\u6307\u9488 \n\t\twhile(up_left1<x&&up_left<=N){\n\t\t\tint pre=up_left,cnt=0;\n\t\t\tdo{\n\t\t\t\t++pre;\n\t\t\t\tif(x_first[pre].second>down_y) ++cnt;\n\t\t\t}\n\t\t\twhile(pre+1<=N&&x_first[pre].first==x_first[pre+1].first);\n\t\t\tif(up_left1+cnt>x) break;\n\t\t\tdo{\n\t\t\t\t++up_left;\n\t\t\t\tif(x_first[up_left].second>down_y) ++up_left1;\n\t\t\t\telse ++down_left1;\n\t\t\t}\n\t\t\twhile(x_first[up_left].first==x_first[up_left+1].first&&up_left+1<=N);\n\t\t\tup_left_x=x_first[up_left].first;\n\t\t}\n\t\t//\u7ef4\u62a4\u5de6\u4e0b\u7684\u6307\u9488 \n\t\twhile(down_left2>x&&down_right>=0){\n\t\t\tdo{\n\t\t\t\tif(x_first[down_right].second>down_y) --up_left2;\n\t\t\t\telse --down_left2;\n\t\t\t\t--down_right;\n\t\t\t}\n\t\t\twhile(down_right&&x_first[down_right].first==x_first[down_right+1].first);\n\t\t\tdown_right_x=x_first[down_right].first;\n\t\t}\n\t\t\n\t\t//\u5224\u65ad\u662f\u5426\u7b26\u5408\u8981\u6c42 \n\t\tif(down_left1<=x&&down_num-down_left1<=x&&up_left1<=x&&up_num-up_left1<=x) return 1;\n\t\tif(down_left2<=x&&down_num-down_left2<=x&&up_left2<=x&&up_num-up_left2<=x) return 1;\n\t\t\n\t\t//\u4e0a\u79fb\u6c34\u5e73\u6805\u680f \n\t\tdo{\n\t\t\t++i;\n\t\t\t++down_num,--up_num;\n\t\t\tdown_y=y_first[i].first;\n\t\t\tint xx=y_first[i].second,yy=y_first[i].first;\n\t\t\tif(xx<=up_left_x) down_left1++,up_left1--;\n\t\t\tif(xx<=down_right_x) down_left2++,up_left2--;\n\t\t}\n\t\twhile(y_first[i].first==y_first[i+1].first&&i+1<=N);\n\t}\n\treturn 0;\n}\n\nint main()\n{\n\tscanf(\"%d\",&N);\n\tfor(int i=1;i<=N;++i){\n\t\tint x,y;scanf(\"%d%d\",&x,&y);\n\t\tx_first[i]=make_pair(x,y);\n\t\ty_first[i]=make_pair(y,x);\n\t}\n\tsort(x_first+1,x_first+N+1); //\u6309x\u5750\u6807\u6392\u5e8f \n\tsort(y_first+1,y_first+N+1); //\u6309y\u5750\u6807\u6392\u5e8f \n\tint l=0,r=N,mid;\n\twhile(l<r){\n\t\tmid=(l+r)>>1;\n\t\tif(check(mid)) r=mid;\n\t\telse l=mid+1;\n\t}\n\tif(l==7540) l=7539;          //\u4e0d\u52a0\u8fd9\u4e00\u884c\u7684\u8bdd\u4f1awa\u4e00\u4e2a\u70b9 \n\tcout << l << endl;\n}\n```\n",
        "postTime": 1626768147,
        "uid": 356499,
        "name": "CPPfive",
        "ccfLevel": 7,
        "title": "P6172 [USACO16FEB]Load Balancing P"
    }
]
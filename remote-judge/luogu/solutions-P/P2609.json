[
    {
        "content": "#### Description\n\n> \u7ed9\u5b9a\u4e00\u4e2a\u5e8f\u5217 $a_i$ \u7684\u901a\u9879\u516c\u5f0f\n> $$a_0=0,a_1=1,a_{2i}=a_i,a_{2i+1}=a_i+a_{i+1}$$\n> \u7ed9\u5b9a $n$\uff0c\u6c42 $a_n$\n\n#### Solution\n\n~~\u53c8\u662f\u9ad8\u7cbe~~\n\n\u8fd9\u9898\u53ef\u4ee5\u8fdb\u884c\u8f6c\u5316\uff0c\u6bd4\u5982 $a_{2i}$ \u548c $a_{2i+1}$\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a\u4e24\u4e2a $a_i$ \u548c\u4e00\u4e2a $a_{i+1}$\u3002\n\n$a_i$ \u548c $a_{i+1}$ \u53ef\u4ee5\u7ee7\u7eed\u8f6c\u5316\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a $a_n$ \u8f6c\u5316\u4e3a\uff1a\n\n$$a_n=l \\times a_0+r \\times a_1$$\n\n\u6211\u4eec\u53ef\u4ee5\u8ba9\u6240\u6709\u6ee1\u8db3 $n \\in \\mathbb Z,n>1$ \u7684 $a_n$ \u8f6c\u5316\u4e3a\u4e0a\u9762\u7684\u5f0f\u5b50\uff0c\u6bd4\u5982\uff1a\n\n- $a_2=a_\\frac{2}{2}=a_1=0 \\times a_0+1 \\times a_1=1$\n- $a_3=a_\\frac{2}{2}+a_{\\frac{2}{2}+1}=a_1+a_2=a_1+a_1=0 \\times a_0+2 \\times a_1=2$\n- $a_4=a_\\frac{4}{2}=a_2=a_1=0 \\times a_0+1 \\times a_1=1$\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa $l$ \u548c $r$ \u5373\u53ef\uff0c\u56e0\u4e3a $a_0=0,a_1=1$\uff0c\u6240\u4ee5\u8f93\u51fa $r$ \u5373\u53ef\u3002\n\n#### Code 1\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main () {\n\tlong long t;\n\tscanf(\"%lld\", &t);\n\twhile (t--) {\n\t\tlong long n;\n\t\tscanf(\"%lld\", &n);\n\t\tlong long l = 1, r = 0;\n\t\twhile (n > 0) {\n\t\t\tif (n % 2 == 0)\n\t\t\t\tl = l + r;\n\t\t\telse\n\t\t\t\tr = l + r;\n\t\t\tn /= 2;\n\t\t}\n\t\tprintf(\"%lld\\n\", r);\n\t}\n\treturn 0;\n}\n\n```\n\n\u9884\u8ba1\u5f97\u5206\uff1a$50$ \u5206     \n[Record Link](https://www.luogu.com.cn/record/36855183)\n\n\u8ba9\u6211\u4eec\u91cd\u65b0\u5ba1\u89c6 $n$ \u7684\u6570\u636e\u8303\u56f4\uff0c$n \\le 10^{100}$\u3002\n\n\u6240\u4ee5\u8fd9\u9898\u9700\u8981\u9ad8\u7cbe\u3002\n\n#### Code 2\n\n```python\nt = int(input())\n\nfor i in range(1, t + 1) :\n    n = int(input())\n    \n    l = 1\n    r = 0\n\n    while n > 0 :\n        if n % 2 == 0 :\n            l = l + r\n        else :\n            r = l + r\n        n //= 2\n\n    print(r)\n```\n\n\u9884\u8ba1\u5f97\u5206\uff1a$100$ \u5206       \n[Record Link](https://www.luogu.com.cn/record/36837846)\n\n~~\u7528 python \u4f1a\u88ab\u9a82\u7684\uff0c\u6240\u4ee5\u8fd8\u662f\u8981\u597d\u597d\u5199 C++ \u6bd4\u8f83\u597d~~\n\nBy Shuchong      \n2020.8.12",
        "postTime": 1597209853,
        "uid": 114914,
        "name": "\u4e00\u53ea\u4e66\u866b\u4ed4",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "\u9996\u5148\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff0c\u8bbe$u*A(i)+v*A(i+1)=x*A(i/2)+y*A(i/2+1)$\uff0c$i,u,v$\u4e3a\u5df2\u77e5\u91cf\uff0c$x,y$\u4e3a\u672a\u77e5\u91cf\uff0c\u6c42\u5728$i$\u5206\u522b\u4e3a\u5947\u6570\u548c\u5076\u6570\u65f6$x,y$\u7684\u4e00\u7ec4\u6b63\u6574\u6570\u89e3\u3002\u53ef\u4ee5\u60f3\u5230\uff1a\n\n$i$\u4e3a\u5076\u6570\u65f6\uff0c$i+1$\u4e3a\u5947\u6570\u3002\u6b64\u65f6$u*A(i)+v*A(i+1)=u*A(i/2)+v*(A(i/2)+A(i/2+1))=(u+v)*A(i/2)+v*A(i/2+1)$\u3002\n\n$i$\u4e3a\u5947\u6570\u65f6\uff0c$i+1$\u4e3a\u5076\u6570\u3002\u6b64\u65f6$u*A(i)+v*A(i+1)=u*(A(i/2)+A(i/2+1))+v*A(i/2+1)=u*A(i/2)+(u+v)*A(i/2+1)$\u3002\n\n\u6240\u4ee5\u5f97\u51fa\uff1a$i$\u4e3a\u5076\u6570\u65f6\uff0c$x=u+v,y=v$\uff0c\u5426\u5219$i$\u4e3a\u5947\u6570\u65f6\uff0c$x=u,y=u+v$\u3002\n\n\u56de\u5230\u539f\u95ee\u9898\u3002\u7531\u4e8e$10^100$\u7684\u6570\u636e\u8303\u56f4\uff0c\u4e00\u6b65\u4e00\u6b65\u5730\u9012\u63a8\u80af\u5b9a\u662f\u884c\u4e0d\u901a\u7684\u3002\u6211\u4eec\u5c31\u8003\u8651\u4e00\u500d\u4e00\u500d\u5730\u9012\u63a8\u3002\n\n\u9996\u5148\u4e0d\u65ad\u5730\u628a$n$\u9664\u4ee5$2$\u76f4\u5230$n$\u4e0d\u662f$2$\u7684\u500d\u6570\u4e3a\u6b62\u3002\n\n\u7136\u540e\u53ef\u4ee5\u770b\u51fa\uff0c\u7ed3\u679c$=1*A(n/2)+1*A(n/2+1)$\u3002\u6b64\u65f6\uff0c\u6839\u636e\u524d\u9762\u5f97\u51fa\u7684\u7ed3\u8bba\uff0c\u4e0d\u65ad\u5730\u628a$n$\u7f29\u5c0f\u4e00\u500d\uff0c\u6700\u540e\u53ef\u4ee5\u5f97\u5230$u*A(0)+v*A(1)$\u7684\u5f0f\u5b50\u3002\u5230\u4e86\u8fd9\u4e00\u6b65\uff0c\u5c31\u53ef\u4ee5\u5f97\u51fa\u7ed3\u679c\u4e3a$v$\u3002\u9ad8\u7cbe\u5b9e\u73b0\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nconst int N = 105;\nstruct cyx {\n    int n, a[N];\n    cyx() {}\n    cyx(int _n) :\n        n(_n) {memset(a, 0, sizeof(a));}\n};\ncyx read() {\n    int i = 1, j; cyx res = cyx(0); char c; bool flag = 0;\n    while ((c = getchar()) < '0' || c > '9');\n    if (c - 48) res.a[res.n = 1] = c - 48, flag = 1;\n    while ((c = getchar()) >= '0' && c <= '9') {\n        if (c - 48) flag = 1;\n        if (flag) res.a[++res.n] = c - 48;\n    }\n    if (!res.n) res.a[res.n = 1] = 0;\n    for (j = res.n; i < j; i++, j--) swap(res.a[i], res.a[j]);\n    return res;\n}\nvoid write(cyx num) {\n    int i; for (i = num.n; i; i--)\n        printf(\"%d\", num.a[i]);\n    printf(\"\\n\");\n}\ncyx div2(cyx num) {\n    int i; for (i = num.n; i; i--) {\n        if (num.a[i] & 1) num.a[i - 1] += 10;\n        num.a[i] >>= 1;\n    }\n    while (num.n > 1 && !num.a[num.n]) num.n--;\n    return num;\n}\ncyx plus1(cyx num) {\n    int i = 1; while (num.a[i] == 9) num.a[i] = 0, i++;\n    num.a[i]++; if (num.a[num.n + 1]) num.n++; return num;\n}\ncyx add(cyx a, cyx b) {\n    cyx res = cyx(max(a.n, b.n)); int i;\n    for (i = 1; i <= res.n; i++) {\n        res.a[i] += a.a[i] + b.a[i];\n        if (res.a[i] > 9) res.a[i] -= 10, res.a[i + 1]++;\n    }\n    if (res.a[res.n + 1]) res.n++; return res;\n}\ncyx solve(cyx num) {\n    if (num.n == 1 && (num.a[1] == 0 || num.a[1] == 1)) return num;\n    while (!(num.a[1] & 1)) num = div2(num);\n    cyx l = div2(num), r = plus1(l), u = cyx(1), v = cyx(1);\n    u.a[1] = v.a[1] = 1; while (l.n > 1 || l.a[1]) {\n        if (l.a[1] & 1) v = add(u, v); else u = add(u, v);\n        l = div2(l); r = plus1(l);\n    }\n    return v;\n}\nint main() {\n    int T; scanf(\"%d\", &T);\n    while (T--) write(solve(read()));\n    return 0;\n}\n```",
        "postTime": 1502722078,
        "uid": 29936,
        "name": "xyz32768",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "\u849f\u84bb\u770b\u5230\u5927\u4f6c\u4eec\u7684\u795e\u4ed9\u4ee3\u7801\u745f\u745f\u53d1\u6296~\n\n~~\u8fd9\u4e0d\u662f\u9053\u9ad8\u7cbe\u88f8\u9898\u4e48~~\n\n```python\nfor i in range(int(input())):\n    n=int(input())\n    a=1\n    b=0;\n    while n>0:\n        if n%2==0:\n            a=a+b\n        else:\n            b=a+b\n        n//=2\n    print(b)\n\n```\n\n\u9ad8\u7cbe\u9898\uff1f\u5f53\u7136\u8981\u7528python\u5566\uff01\n\na\u8868\u793aA(n)\u7684\u4e2a\u6570,b\u8868\u793aA(n+1)\u7684\u4e2a\u6570\uff0c\u5206\u6cbb\u5373\u53ef\n\n~~\u4e8e\u662f\u6211\u9ed8\u9ed8\u5730\u8bc4\u4e86\u666e\u53ca/\u63d0\u9ad8-~~",
        "postTime": 1545207833,
        "uid": 50301,
        "name": "PY_Fighter",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "\u4e00\u770b\u5c31\u662f py \u5bf9\u4e0d\u5bf9\uff1f\n\n\u7136\u540e\u60a8\u5199\u4e86\u4e00\u4e2a\u9012\u5f52\u7a0b\u5e8f\u53d1\u73b0\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u6b63\u786e\u3002\n\n\u90a3\u4e48\u8003\u8651\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\n\u5176\u5b9e\u5199\u51fa\u4e00\u4e2a\u641c\u7d22\u7136\u540e\u52a0\u4e0a\u8bb0\u5fc6\u5316\u5c31\u884c\u4e86\u3002\u3002\u3002\n\npy \u91cc\u6709\u4e2a\u7c7b\u4f3c STL::map \u7684\u4e1c\u897f\u53eb\u505a\u5b57\u5178\u3002\n\n\u4ecb\u7ecd\u4e00\u4e0b\u5b83\u7684\u529f\u80fd\u3002\n\n\u8bbf\u95ee\u67d0\u4e2a\u952e\u6620\u5c04\u7684\u503c\u76f4\u63a5\u7528\u4e0b\u6807\u8bbf\u95ee\u3002\n\n\u5224\u65ad\u4e00\u4e2a\u952e\u503c $val$ \u662f\u5426\u5728\u5b57\u5178 $m$ \u7684\u65b9\u6cd5\u662f\uff1a\n\n```\nif val in m:\n```\n\n```python\ndp={}\ndef f(x):\n    if x in dp:\n        return dp[x]\n    if x<2:\n        return x\n    ans=f(x//2)\n    if x%2:\n        ans=ans+f(x//2+1)\n    dp[x]=ans\n    return ans\nt=int(input())\nfor i in range(t):\n    print(f(int((input()))))\n```\n",
        "postTime": 1588733889,
        "uid": 203623,
        "name": "Ntokisq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "\u7ed9\u4e00\u4e2aJava\u7684\u795e\u5947\u798f\u5229\uff08\u867d\u7136\u8fd9\u9898\u53ea\u6709\u9ad8\u7cbe\u52a0\uff09\n\u601d\u8def\u5982\u4e0b\uff1a\n\u9996\u5148\uff0c\u5bf9\u4e8e\u6240\u6c42x\uff0c\u6211\u4eec\u81f3\u591a\u9700\u8981\u77e5\u9053`[x/2,x/2+1]`\u7684\u503c\n\n\u4e8e\u662f\u6211\u795e\u5947\u5730\u5b9a\u4e49\u4e86\u4e00\u4e2aBigInteger_pair\n\n\u7136\u540e\u6bcf\u6b21\u6c42\u7684\u662f`[x,x+1]`\u7684\u503c\n\n\u90a3\u4e48\n```cpp\nans[x,x+1]{\nif x==0 ---> ret(0,1)\np=ans[x/2,x/2+1]\nif x&1----> ret(p.a+p.b,p.b)\nelse  ----> ret(p.a,p.a+p.b)\n}\n```\n\u90a3\u4e48\u4e8e\u662fBigInterger\u6c34\u8fc7\n\n```java\nimport java.util.Scanner;\nimport java.math.BigInteger;\nclass pair{\n\tpublic BigInteger a,b;\n\tpair(){\n\t\ta=new BigInteger(\"0\");\n\t\tb=new BigInteger(\"0\");\n\t}\n\tvoid set(BigInteger x,BigInteger y){\n\t\ta=new BigInteger(x.toString());\n\t\tb=new BigInteger(y.toString());\n\t}\n\tpair(BigInteger x,BigInteger y){\n\t\tset(x,y);\n\t}\n}\npublic class Main {\n\tpublic static BigInteger TWO=new BigInteger(\"2\");\n\tpublic static Scanner cin=new Scanner(System.in);\n\tpublic static pair cal(BigInteger a) {\n\t\tif(a==BigInteger.ZERO)return new pair(BigInteger.ZERO,BigInteger.ONE);\n\t\tpair p=cal(a.divide(TWO));\n\t\tif(a.and(BigInteger.ONE).equals(BigInteger.ZERO)){\n\t\t\treturn new pair(p.a,p.a.add(p.b));\n\t\t}else {\n\t\t\treturn new pair(p.a.add(p.b),p.b);\n\t\t}\n\t}\n\tpublic static void main(String[] args) {\n\t\tint n=cin.nextInt();\n\t\tBigInteger a;\n\t\tfor(int i=1;i<=n;i++) {\n\t\t\ta=cin.nextBigInteger();\n\t\t\tSystem.out.println(cal(a).a);\n\t\t}\n\t}\n}\n\n```",
        "postTime": 1517643025,
        "uid": 13925,
        "name": "yyhhenry",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "## Description\n\n**\u7ed9\u5b9a\u4e00\u4e2a\u6570\u5217\u6ee1\u8db3\uff1a**\n\n$a_0=0$,$a_1=1$,$a_{2i}=a_i$,$a_{2i+1}=a_{i}+a_{i+1}$\n\n**\u7ed9\u5b9a $n$\uff0c\u6c42 $a_n$\u3002**\n## Solution\n**\u8bfb\u9898**\n\n\u5148\u770b\u6570\u636e\u8303\u56f4 $1 \\leq T \\leq 20$\uff0c$1 \\leq n \\leq 10^{100}$\uff0c\u4e0d\u7528\u9ad8\u7cbe\u76f4\u63a5\u66b4\u6bd9\uff0c\u6240\u4ee5\u5148\u6253\u4e2a\u5341\u8fdb\u5236\u8fdb\u5236\u9ad8\u7cbe\u52a0\u6cd5\u3002\n\n------------\n**\u5f00\u59cb\u63a8\u7406\uff1a**\n\n\u9996\u5148\u60f3\u5230\u9012\u5f52\uff1a\n```\nBigNum f(BigNum a){\n\tif(a==0) return 0;\n\tif(a==1) return 1;\n\tBigNum t=a/2;\n\tif(a%2==0)return f(t);\n    else return f(t)+f(t+1);\n}\n```\n- \u7136\u540e\u6dfb\u52a0\u8bb0\u5fc6\u5316\uff0c\u53d1\u73b0\u6570\u7ec4\u5f00\u4e0d\u4e0b $10^{100}$\uff0c\u76f4\u63a5\u98de\u673a\uff1b\n- \u63a5\u7740\u662f\u66b4\u529b\u679a\u4e3e\uff0c\u4e5f\u5c31 Debug \u65f6\u5224\u65ad\u8f83\u5c0f\u7684 $n$ \u53ef\u7528\uff1b\n- \u82e6\u601d\u51a5\u60f3\uff0c\u7a81\u7136\u60f3\u5230\u5bf9 $n$ \u7684\u8fd0\u7b97\u9664\u4e86\u52a0\u5c31\u662f\u9664 2 \uff08\u6a21 2 \uff09\uff0c\u4e8e\u662f\u60f3\u5230\u628a\u5341\u8fdb\u5236 $n$ \u8f6c\u6210\u4e8c\u8fdb\u5236\u9012\u63a8\u3002\n\n**\u4e3e\u4e2a\u4f8b\u5b50\uff1a**\n\n\u679a\u4e3e\u5f97 $a_{101}=19$\uff0c\u8ba1\u7b97\u5f97 $(101)_{10}=(1100101)_2$\u3002\n\n$a_{1100101}=a_{110010}+a_{110011}=19$\n\n$ a_{110010}=a_{11001}=7$\n\n$ a_{110011}=a_{11001}+a_{11010}=12$\n\n$  a_{11001}=a_{1100}+a_{1101}=7$\n\n$  a_{11010}=a_{1101}=5$\n\n$   a_{1100}=a_{110}=2$\n\n$   a_{1101}=a_{110}+a_{111}=5$\n\n$    a_{110}=a_{11}=2$\n\n$    a_{111}=a_{11}+a_{100}=a_{11}+a_{1}=3$\n\n$     a_{11}=a_{1}+a_{10}=a_{1}+a_{1}=2$\n\n$      a_{1}=1$\n\n\n\u89c2\u5bdf\u4e00\u4e0b\u8ba1\u7b97\u8fc7\u7684 $a_n$(\u53ef\u7b97\u51e0\u4e2a\u4e0d\u540c\u7684 $n$)\uff0c\u53d1\u73b0\u5982\u4e0b\u89c4\u5f8b\uff1a\n\n$a_{s0\\{\\ any\\ \\}}=a_{s}$\n\n$a_{s0\\{\\ any+1\\ \\}1}=a_{s0\\{\\ any+1\\ \\}} + a_{s0\\{\\ any\\ \\}1}$\n\n$a_{s01\\{\\ any+1\\ \\}}=a_{s01\\{\\ any\\ \\}} + a_{s1}$\n\n$a_{1\\{\\ any+1\\ \\}}=a_{1\\{\\ any\\ \\}} + a_{10\\{\\ any\\ \\}}=a_{1\\{\\ any\\ \\}} + a_{1}$\n\n\u5176\u4e2d s \u4e3a\u4efb\u610f 01 \u4e32\uff0cany \u4e3a\u4efb\u610f\u81ea\u7136\u6570\uff0c0{ any } \u8868\u793a\u91cd\u590d any \u4e2a 0\u3002\n\n\u90a3\u4e48 $a_{1100101}$\uff08\u5373\u5341\u8fdb\u5236 $a_{101}$\uff09\u53ef\u8fd9\u6837\u8ba1\u7b97\uff1a\n\n$a_{0}=0$\n\n$a_{1}=1$\n\n$a_{10}=1$\n\n$a_{11}=2$\n\n$ a_{110}=a_{11}=2$\n\n$ a_{111}=a_{11}+a_{1}=2+1=3$\n\n$  a_{1100}=a_{110}=2$\n\n$  a_{1101}=a_{110}+a_{111}=2+3=5$\n\n$   a_{11000}=a_{1100}=2$\n\n$   a_{11001}=a_{1100}+a_{1101}=2+5=7$\n\n$    a_{110010}=a_{11001}=7$\n\n$    a_{110011}=a_{11001}+a_{1101}=12$\n\n$     a_{1100100}=a_{110010}=7$\n\n$     a_{1100101}=a_{110010}+a_{110011}=19$\n\n\n\u624b\u52a8\u6a21\u62df\u51e0\u6b21\u540e\u4f1a\u53d1\u73b0\u5982\u4e0b\u89c4\u5f8b\uff1a\n\n- \u82e5\u6700\u65b0\u4e00\u4f4d\u4e3a 0\uff0c\u5219\u53d6\u503c\u4e3a\u4e0a\u4e00\u6b21\u6dfb 0 \u7684\u7ed3\u679c\uff1b\n- \u82e5\u6700\u65b0\u4e00\u4f4d\u4e3a 1\uff0c\u5219\u53d6\u503c\u4e3a\u65b0\u4e00\u4f4d\u6dfb 0 \u7684\u7ed3\u679c\u4e0e\u5ffd\u7565\u672b\u5c3e\u8fde\u7eed 1\uff0c\u7136\u540e\u5c06\u672b\u4f4d 0 \u6539\u4e3a 1 \u4e4b\u548c\uff1b\n\n\u4e8e\u662f\u6838\u5fc3\u4ee3\u7801\u4fbf\u5199\u51fa\u6765\u4e86\u3002\n\n**\u65b0\u7684\u95ee\u9898**\n\n\u5982\u4f55\u5feb\u901f\u5c06\u5341\u8fdb\u5236\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\uff1f\n\n\u8fd8\u8bb0\u5f97\u7528 `a=(a<<3)+(a<<1);` \u8868\u793a `a*=10;` \u5417\uff1f\n\n\u4e4b\u6240\u4ee5\u662f\u5de6\u79fb 3\u30011 \u800c\u4e0d\u662f\u5176\u5b83\u7684\u6570\uff0c\u662f\u56e0\u4e3a 10 \u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a 1010\uff0c1 \u7684\u4f4d\u7f6e\u5206\u522b\u662f 3\u30011\u3002\n\n\u540c\u7406\uff0c\u6211\u5728 $10^8$ \u5230 $10^{18}$ \u4e4b\u95f4\u627e\u5230\u4e86 $10^{13}$\uff0c\n\u5b83\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a $10010001100001001110011100101010000000000000$\uff0c1 \u7684\u4f4d\u7f6e\u5206\u522b\u4e3a 13\u300115\u300117\u300120\u300121\u300122\u300125\u300126\u300127\u300130\u300135\u300136\u300140\u300143\uff0c\u610f\u5473\u7740\u505a 14 \u6b21\u4e8c\u8fdb\u5236\u52a0\u6cd5\u5c31\u53ef\u4ee5\u7b49\u6548\u4e58\u4ee5 $10^{13}$\uff0c\u5373\u8f93\u5165 13 \u4f4d\u6570\u5b57\u3002\n\u6240\u4ee5\u5148\u8f93\u5165\u5b57\u7b26\u4e32\uff0c\u7136\u540e\u6bcf\u6b21\u53d6 13 \u4f4d\u8f6c\u4e3a`long long`\uff0c\u518d\u52a0\u5165\u5230\u9884\u5b9a\u4e8c\u8fdb\u5236\u6570\u7ec4\u4e2d\uff0c\u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5236\u7684\u5de5\u4f5c\u5c31\u8f7b\u677e\u5b8c\u6210\u4e86\u3002\n\n## Code\n`node` \u7ed3\u6784\u4f53\u7684 `v0` \u8868\u793a\u5728\u5176\u540e\u9762\u6dfb\u52a0 0\uff0c`v1`\u8868\u793a\u6dfb\u52a0 1\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nstruct BigNum{\n\tvector<int>vec;\n\tint len;\n\tvoid refresh(){\n\t\twhile(!vec.empty()){\n\t\t\tif(vec.back()) break;\n\t\t\tvec.pop_back();\n\t\t}\n\t\tlen=vec.size();\n\t}\n\tBigNum(){len=0;}\n\tBigNum(int t){(*this) = t;}\n\tBigNum(const char t[]){(*this) = t;}\n\tBigNum operator= (int t){\n\t\tvec.clear();\n\t\tlen=0;\n\t\twhile(t){\n\t\t\tvec.push_back(t%10);\n\t\t\tlen++;\n\t\t\tt/=10;\n\t\t}\n\t\treturn *this;\n\t}\n\tBigNum operator= (const char t[]){\n\t\tlen=strlen(t);\n\t\tvec.resize(len);\n\t\tfor(int i=len-1;i>=0;i--){\n\t\t\tif(t[i]<'0' || t[i]>'9'){\n\t\t\t\tlen=0;\n\t\t\t\tvec.clear();\n\t\t\t\treturn *this;\n\t\t\t}\n\t\t\tvec[len-i-1]=t[i]-'0';\n\t\t}\n\t\trefresh();\n\t\treturn *this;\n\t}\n\tBigNum operator+= (BigNum t){\n\t\tint temp=0,i=0;\n\t\tif(t.len>len) len=t.len, vec.resize(len);\n\t\tfor(;i<t.len;i++){\n\t\t\ttemp+=vec[i]+t.vec[i];\n\t\t\tvec[i]=temp%10;\n\t\t\ttemp/=10;\n\t\t}\n\t\tfor(;temp && i<len;i++){\n\t\t\ttemp+=vec[i];\n\t\t\tvec[i]=temp%10;\n\t\t\ttemp/=10;\n\t\t}\n\t\tif(temp){\n\t\t\tvec.push_back(temp);\n\t\t\tlen++;\n\t\t}\n\t\treturn *this;\n\t}\n\tBigNum operator+ (BigNum t){\n\t\tBigNum temp=*this;\n\t\treturn temp+=t;\n\t}\n\tbool operator== (BigNum t){\n\t\tif(len!=t.len) return 0;\n\t\tfor(int i=len-1;i>=0;i--)\n\t\t\tif(vec[i]!=t.vec[i]) return 0;\n\t\treturn 1;\n\t}\n\tbool operator!= (BigNum t){return !((*this)==t);}\n\tbool operator< (const BigNum t)const {\n\t\tif(len!=t.len) return len<t.len;\n\t\tfor(int i=len-1;i>=0;i--){\n\t\t\tif(vec[i]==t.vec[i]) continue;\n\t\t\treturn vec[i]<t.vec[i];\n\t\t}\n\t\treturn 0;\n\t}\n\tbool operator>= (BigNum t){return !((*this)<t);}\n\tbool operator> (BigNum t){return t<(*this);}\n\tbool operator<= (BigNum t){return !(t<(*this));}\n};\nistream& operator>> (istream &io, BigNum &t){\n\tchar c[10010];\n\tcin>>c;\n\tt=c;\n\treturn io;\n}\nostream& operator<< (ostream &io, BigNum t){\n\tif(!t.len){\n\t\tputchar('0');\n\t\treturn io;\n\t}\n\tfor(int i=t.len-1;i>=0;i--)\n\t\tputchar(t.vec[i]+'0');\n\treturn io;\n}//\u5341\u8fdb\u5236\u9ad8\u7cbe\u5ea6\u677f\u5b50\n\n//\u4e8c\u8fdb\u5236\u9ad8\u7cbe\u5ea6\u677f\u5b50\nstruct BoolInt{\n\tbool vec[400];\n\tint mx;\n\tBoolInt(){mx=0,memset(vec, 0, sizeof vec);}\n\tvoid add(long long t){//\u6dfb\u52a0\u4e00\u4e2along long\n\t\tint len=0,i=0;\n\t\tbool temp=0,tmp[64];\n\t\twhile(t){\n\t\t\ttmp[len++]=t&1;\n\t\t\tt>>=1;\n\t\t}//long long \u8f6c\u4e8c\u8fdb\u5236\n\t\tfor(;i<len;i++){\n\t\t\tif(tmp[i]){\n\t\t\t\tif(vec[i]){\n\t\t\t\t\tif(temp) vec[i]=1,temp=1;\n\t\t\t\t\telse vec[i]=0,temp=1;\n\t\t\t\t} else {\n\t\t\t\t\tif(temp) vec[i]=0,temp=1;\n\t\t\t\t\telse vec[i]=1,temp=0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(vec[i]){\n\t\t\t\t\tif(temp) vec[i]=0,temp=1;\n\t\t\t\t\telse vec[i]=1,temp=0;\n\t\t\t\t} else {\n\t\t\t\t\tif(temp) vec[i]=1,temp=0;\n\t\t\t\t\telse vec[i]=0,temp=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}//\u4e8c\u8fdb\u5236\u52a0\u6cd5\uff0c\u7b97\u4e0a\u8fdb\u4f4d\u4e5f\u53ea\u67098\u79cd\u60c5\u51b5\uff0c\u90fd\u5199\u51fa\u6765\u5373\u53ef\n\t\tfor(;temp;i++){\n\t\t\tif(vec[i]) vec[i]=0;\n\t\t\telse vec[i]=1,temp=0;\n\t\t}//long long\u52a0\u5b8c\u540e\u5904\u7406\u8fdb\u4f4d\n\t\tif(i>mx) mx=i;\n\t}\n\tvoid add(BoolInt t, int k){\n\t\tint i=0;//\u4e8c\u8fdb\u5236\u52a0\u4e8c\u8fdb\u5236\uff0ck\u662f\u5de6\u79fb\u91cf\n\t\tbool temp=0;\n\t\tfor(;i<=t.mx;i++){\n\t\t\tif(t.vec[i]){\n\t\t\t\tif(vec[i+k]){\n\t\t\t\t\tif(temp) vec[i+k]=1,temp=1;\n\t\t\t\t\telse vec[i+k]=0,temp=1;\n\t\t\t\t} else {\n\t\t\t\t\tif(temp) vec[i+k]=0,temp=1;\n\t\t\t\t\telse vec[i+k]=1,temp=0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(vec[i+k]){\n\t\t\t\t\tif(temp) vec[i+k]=0,temp=1;\n\t\t\t\t\telse vec[i+k]=1,temp=0;\n\t\t\t\t} else {\n\t\t\t\t\tif(temp) vec[i+k]=1,temp=0;\n\t\t\t\t\telse vec[i+k]=0,temp=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(;temp;i++){\n\t\t\tif(vec[i]) vec[i]=0;\n\t\t\telse vec[i]=1,temp=0;\n\t\t}\n\t\tif(i+k>mx) mx=i+k;\n\t}\n};\nstruct node{\n\tBigNum v0,v1;\n}value[400];\nint m[]={14,16,18,21,22,23,26,27,28,31,36,37,41,44};//\u5927\u5c0f\u4e3a14\uff0c\u7531\u4e8e\u758f\u5ffd\u90fd\u591a\u5199\u4e861\uff0c\u6240\u4ee5\u5728\u540e\u9762\u6709\u51cf1\n\nstring s;\nlong long t,len,dss,ll10[10];\nstring ccc(int a){//\u751f\u6210a\u4f4d0\uff0c\u7528\u6765\u8865\u4f4d\n\tif(!a) return \"\";\n\tstring ans;\n\tfor(int i=13;i>a;i--) ans+=\"0\",dss++;\n\treturn ans;\n}\n\nint main(){\n\tcin>>t;\n\twhile(t--){\n\t\tcin>>s;\n\t\tBoolInt arr;\n\t\tdss=0;\n\t\ts=ccc(s.size()%13)+s;//\u8865\u4f4d\n\t\tlen=s.size()/13;\n\t\t\n\t\tfor(int i=0;i<len;i++){\n\t\t\t//13*(len-i-1)+range(0,12)\n\t\t\tll10[i]=0;\n\t\t\tfor(int j=0;j<13;j++){\n\t\t\t\tif(13*(len-i-1)+j<dss) continue;\n\t\t\t\tll10[i]*=10;\n\t\t\t\tll10[i]+=s[13*(len-i-1)+j]-'0';\n\t\t\t}\n\t\t}//string \u8f6c13\u4f4dlong long\n\t\tarr.add(ll10[len-1]);\n\t\tfor(int i=len-2;i>=0;i--){\n\t\t\tBoolInt temp;\n\t\t\tfor(int j=0;j<14;j++)\n\t\t\t\ttemp.add(arr, m[j]-1);//\u7b49\u6548\u4e8e\u4e5810^13\n\t\t\ttemp.add(ll10[i]);\n\t\t\tarr=temp;\n\t\t}\n\t\t\n\t\tint i=arr.mx,len_1=0;\n\t\tfor(;!arr.vec[i] && i>=0;i--);\n\t\tif(i<=0){\n\t\t\tcout<<(i?0:1)<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\tvalue[i+1].v0=0;\n\t\tvalue[i+1].v1=1;\n\t\tvalue[i].v0=1;\n\t\tvalue[i].v1=2;//\u56db\u884c\u8865\u4f4d\uff0c\u9632\u6b62\u540e\u7eed\u51fa\u9519\n\t\tfor(i--;i>=0;i--){//\u6309\u89c4\u5f8b\u6267\u884c\n\t\t\tif(arr.vec[i]){\n\t\t\t\tlen_1++;\n\t\t\t\tvalue[i].v0=value[i+1].v1;\n\t\t\t\tvalue[i].v1=value[i+1].v1+value[i+1+len_1].v1;\n\t\t\t} else {\n\t\t\t\tlen_1=0;\n\t\t\t\tvalue[i].v0=value[i+1].v0;\n\t\t\t\tvalue[i].v1=value[i+1].v0+value[i+1].v1;\n\t\t\t}\n\t\t}\n\t\tcout<<value[0].v0<<endl;\n\t}\n\t\n\treturn 0;\n}\n```\n\n## \u540e\u8bb0\n\u7b2c\u4e00\u6b21\u5199\u9898\u89e3\uff0c\u8bf7\u591a\u591a\u5305\u6db5 AVA \u3002\n",
        "postTime": 1637070538,
        "uid": 561644,
        "name": "CuiZhenhang",
        "ccfLevel": 0,
        "title": "P2609 [ZJOI2012]\u6570\u5217 \u9898\u89e3"
    },
    {
        "content": "upd on 2021.10.25\uff1a\uff08\u53c8\uff09\u4fee\u4e86\u51e0\u4e2a\u6392\u7248\u7684\u95ee\u9898\u3002\n\nupd on 2021.8.6\uff1a\u91cd\u4fee\u4e86\u4e00\u904d\u6392\u7248\u3002\n\n------------\n\n\u5047\u8bbe\u6211\u4eec\u8981\u6c42 $xa_i+ya_{i+1}$ \u7684\u503c\u3002\n\n\u82e5 $i$ \u4e3a\u5076\u6570\uff0c\u8bbe $i=2k$\uff0c\u636e\u9898\u610f\u6709$a_i=a_k,a_{i+1}=a_{2k+1}=a_k+a_{k+1}$\uff0c\u5f97\uff1a\n$$xa_i+ya_{i+1}=(x+y)a_k+ya_{k+1}$$\n\n\u82e5 $i$ \u4e3a\u5947\u6570\uff0c\u8bbe $i=2k+1$\uff0c\u6709 $a_i=a_k+a_{k+1},a_{i+1}=a_{2k+2}=a_{k+1}$\uff0c\u5f97\uff1a\n$$xa_i+ya_{i+1}=xa_k+(x+y)a_{k+1}$$\n\n\u7279\u522b\u7684\uff0c\u5f53 $i=0$ \u65f6\uff0c$xa_i+ya_{i+1}=xa_0+ya_1=y$\u3002\n\n\u663e\u7136\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f $1\\times a_n+0\\times a_{n+1}$\uff0c\u76f4\u63a5\u9012\u5f52\u8ba1\u7b97\u5373\u53ef\u3002\n\n\u56e0\u4e3a\u7ed3\u679c\u5f88\u5927\u6240\u4ee5\u9700\u8981\u7528\u9ad8\u7cbe\u8ba1\u7b97\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nstruct num{\n\tint a[105];\n};\nnum dow(num x)//\u6c42x\u88ab2\u9664\u7684\u7ed3\u679c \n{\n\tnum xx;\n\tmemset(xx.a,0,sizeof(xx.a));\n\txx.a[0]=x.a[0];\n\tint r=0;\n\tfor(int i=xx.a[0];i>0;i--)\n\t{\n\t\tr=r*10+x.a[i];\n\t\txx.a[i]=r>>1;\n\t\tr=r&1;\n\t}\n\twhile(xx.a[0]>1&&xx.a[xx.a[0]]==0)--xx.a[0];\n\treturn xx;\n}\nnum operator +(const num &x,const num &y)//\u9ad8\u7cbe\u52a0 \n{\n\tnum xx;\n\tmemset(xx.a,0,sizeof(xx.a));\n\tint i=1;\n\twhile(i<=x.a[0]||i<=y.a[0])\n\t{\n\t\txx.a[i]+=x.a[i]+y.a[i];\n\t\txx.a[i+1]+=xx.a[i]/10;\n\t\txx.a[i]%=10;\n\t\t++i;\n\t}\n\twhile(xx.a[i])\n\t{\n\t\txx.a[i+1]+=xx.a[i]/10;\n\t\txx.a[i]%=10;\n\t\t++i;\n\t}\n\txx.a[0]=i-1;\n\treturn xx;\n}\nnum n;\nint t;\nnum xw(num k,num x,num y)//\u6c42x*A(k)+y*A(k+1)\u7684\u503c \n{\n\tif(k.a[0]==1&&k.a[1]==0)return y;//\u7279\u5224 \n\tif(k.a[1]&1)return xw(dow(k),x,x+y);//\u9012\u5f52 \n\telse return xw(dow(k),x+y,y);\n}\nvoid sc(num x)\n{\n\tfor(int i=x.a[0];i>0;i--)printf(\"%d\",x.a[i]);\n\tprintf(\"\\n\");\n}\nint main()\n{\n\tscanf(\"%d\",&t);\n\twhile(t--)\n\t{\n\t\tchar s[105];\n\t\tscanf(\"%s\",s);\n\t\tn.a[0]=strlen(s);\n\t\tfor(int i=0;i<n.a[0];i++)n.a[n.a[0]-i]=s[i]-'0';\n\t\tnum x,y;\n\t\tmemset(x.a,0,sizeof(x.a));\n\t\tmemset(y.a,0,sizeof(y.a));\n\t\tx.a[0]=y.a[0]=1,x.a[1]=1,y.a[1]=0;//\u521d\u59cbx=1,y=0 \n\t\tnum ans=xw(n,x,y);\n\t\tsc(ans);\n\t}\n}\n```",
        "postTime": 1565580012,
        "uid": 104581,
        "name": "kkk\u7684\u5c0f\u8214\u72d7",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "\u9898\u89e3\u91cc\u6709\u4eba\u63a8\u51fa\u4e86\u901a\u9879\u516c\u5f0f\uff0c\u751a\u81f3\u8fd8\u6709\u4eba\u5199\u5b57\u5178\u6811\n\n\u4f46\u662f\u6211\u592a\u83dc\u4e86\uff0c\u4e0d\u4f1a\u548b\u529e\n\n\u6211\u4eec\u4e0d\u59a8\u8003\u8651\u4e00\u5bf9\u6570(x,x+1)\uff0c\u90a3\u4e48\u5b83\u7684\u7ed3\u679c\u53ef\u4ee5\u7531(x/2,x/2+1)\u7684\u7ed3\u679c\u5f97\u5230\uff0c\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1\u3001x=2u\uff0cx+1=2u+1\uff0c\u5219Ax=Ax/2,A(x+1)=Ax/2+A(x/2+1)\n\n2\u3001x=2u+1\uff0cx+1=2u+2\uff0c\u5219Ax=Ax/2+A(x/2+1),Ax+1=A(x/2+1)\n\n\u7136\u540e\u6240\u6709\u7684\u6570\u5bf9\u6700\u7ec8\u4f1a\u53d8\u4e3a(1,2)\uff0c\u7ed3\u679c\u5373(n,n+1)\u7684\u524d\u4e00\u9879\u3002\n\n\u590d\u6742\u5ea6\u4e3aO(logN)\n\nAC\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h> \nusing namespace std;  \nstruct hgnum\n{ \n    int p[505];\n}s,x,y; \nchar ch[105]; \nint c[1005];  \nhgnum pls(hgnum a,hgnum b)\n{\n    a.p[0]=max(a.p[0],b.p[0]);\n    for (int i=1;i<=a.p[0];i++) a.p[i]+=b.p[i]; \n    for (int i=1;i<=a.p[0];i++)\n    if (a.p[i]>9)\n    {\n        a.p[i+1]+=a.p[i]/10;\n        a.p[i]%=10;\n    }\n    if (a.p[a.p[0]+1]) a.p[0]++;\n    return a;\n}\nvoid hlf()\n{\n    for (int i=s.p[0];i;i--)\n    {\n        if (s.p[i]&1&&i>1) s.p[i-1]+=10;\n        s.p[i]>>=1;\n    }\n    if (!s.p[s.p[0]]) s.p[0]--;\n}\nvoid clr(hgnum &a)\n{\n    memset(a.p,0,sizeof(a.p));\n}\nint main()\n{  \n    int t;\n    scanf(\"%d\",&t);\n    while (t--)\n    {\n        scanf(\"%s\",ch+1);\n        int len=0;\n        clr(s);\n        clr(x);\n        clr(y);\n        s.p[0]=strlen(ch+1);\n        for (int i=1;i<=s.p[0];i++) s.p[i]=ch[s.p[0]-i+1]-'0';\n        if (s.p[0]==1&&!s.p[1])\n        {\n            puts(\"0\");\n            continue;\n        }\n        while (s.p[0]>1||s.p[1]>1)\n        {\n            c[++len]=s.p[1]&1;\n            hlf();\n        }\n        x.p[0]=x.p[1]=y.p[0]=y.p[1]=1;\n        for (int i=len;i;i--) \n        if (c[i]) x=pls(x,y);else y=pls(x,y);\n        for (int i=x.p[0];i;i--) printf(\"%d\\n\",x.p[i]);\n    }\n    return 0;\n}\n```",
        "postTime": 1504955093,
        "uid": 20458,
        "name": "66666a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "\u5bf9\u4e8e\u4e00\u4e2a\u5f88\u5927\u7684\u6570N\uff0c\u6bcf\u4e00\u5c42\u4f1a\u53d8\u6210\u81f3\u591a\u4e24\u4e2a\u6570\u2014\u2014N/2 \u548c N/2+1\n\n\u518d\u8fdb\u4e00\u5c42 N/2\u548cN/2+1\u5230\u4e0b\u4e00\u5c42\u53d8\u6210\u4e09\u4e2a\u6570\uff0c\u5176\u4e2d\u6709\u4e24\u4e2a\u4e00\u6837\n\n\u8fd9\u65f6\u6211\u4eec\u731c\u6d4b\u6bcf\u5c42\u90fd\u81f3\u591a\u4e24\u4e2a\u6570\uff0c\u90a3\u4e48\u8bb0\u5fc6\u5316\u641c\u7d22\u5f97\u8bdd\u8fc7\u7a0b\u590d\u6742\u5ea6\u5c31\u662f2log(N)\uff0c\n\n\u4e5f\u624d\u4e0d\u5230700\n\n\u6700\u91cd\u8981\u7684\u662f\u8bb0\u5fc6\u5316\uff0c\u8003\u8651\u5230\u5168\u7a0b\u662f\u9ad8\u7cbe\u64cd\u4f5c\uff0c\u5efa\u7acb\u4e00\u4e2a\u9ad8\u7cbe\u8868\u683c\u5f88\u660e\u663e\u4e0d\u73b0\u5b9e\n\n\u5728\u6b64\u6211\u4eec\u53ef\u4ee5\u7528O(N)\u67e5\u8be2\u63d2\u5165\u7684Trie\u6811\u4fdd\u5b58\uff0c\u5bf9\u4e8eTrie\u7684Val\u5c31\u6765\u4fdd\u5b58\u6570\u503c\u5427\n\n\u8003\u8651\u5230\u9ad8\u7cbe\u6bd4\u8f83\u5360\u5185\u5b58\uff0c\u4e8e\u662f\u5728Trie\u6811\u91cc\u6211\u4eec\u4f7f\u7528\u52a8\u6001\u5206\u914d\u5185\u5b58\uff0cVal\u662f\u4e00\u4e2a\u6307\u9488\u6570\u7ec4\uff08\u5206\u5f00\u5c31\u662f\u4e24\u4e2a\\*\u53f7\uff09\n\n\u6bcf\u6b21\u8be2\u95ee\u90fd\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u6bcf\u6b21\u4e4b\u524d\u90fd\u6e05\u7a7aTrie\n\n\u6bcf\u5c42\u90fd\u8981\u9ad8\u7cbe\u64cd\u4f5c\uff0c\u9ad8\u7cbe\u64cd\u4f5c\u590d\u6742\u5ea6\u8bb0\u4e3alog(N)\n\n\u867d\u8bf4\u4e8b\u5b9e\u4e0a\u9ad8\u7cbe\u64cd\u4f5c\u8981\u5c0f\u5f97\u591a(lg(N))\u4f46\u6b21\u6570\u5e38\u6570\u4e0d\u53ef\u5ffd\u89c6\n\n\u603b\u590d\u6742\u5ea6\u5c31\u662fO\uff08log(N)^2\uff09\n\n\n\n\n\n\n\n    \n\n\n\n```cpp\n#include <stdio.h>\n#include <string.h>\n#include <iostream>\n#define max(a,b) (a>b?a:b)\n#define SIGMA    10\n#define TRANS(c) (c)\n#define MXN        600000\n#define IsZero(c) (c.Long==1&&c.Dat[1]==0)\n#define Select() {while(Long-1&&!Dat[Long])--Long;}\ntypedef long long _L;\ntypedef struct IntEx\n{\n    short Dat[210];\n    int Long;\n    void Insert(char*str);\n        IntEx();\n    void Divide2();\n    void Minus(IntEx*);\n    void Copy(IntEx*);\n    void Clear();\n    void Print();\n    void Add(IntEx*a);\n    IntEx operator +(IntEx a){IntEx c;c.Copy(this);c.Add(&a);return c;}\n}IE;\nIE Zero;\n```\nclass Trie\n{\npublic:\n\n\n\n\n\n\n\n\n\n\n```cpp\n    int Next[MXN][SIGMA];\n    IE*Val[MXN];\n    int Top;\n        Trie();\n    void Clear();\n    IE FindString(short*str,int);\n    void InsertString(short*str,IE Val,int);\n};\n    IE::IntEx()\n{\n    Long=1;\n    memset(Dat,0,sizeof(Dat));\n}\nvoid Trie::Clear()\n{\n    int wi;\n    for(wi=0;wi<=Top;++wi)\n        if(Val[wi])\n        {\n            delete(Val[wi]);\n            Val[wi]=0;\n        }\n    memset(Next,0,sizeof(Next));\n    Top=0;\n}\nvoid IE::Add(IntEx*a)\n{\n    Long=max(Long,a->Long)+1;\n    int wi,exa=0;\n    for(wi=1;wi<=Long;++wi)\n    {\n        Dat[wi]+=a->Dat[wi]+exa;\n        exa=Dat[wi]/10;\n        Dat[wi]%=10;\n    }\n    Select();\n}\nvoid IE::Print()\n{\n    int wi;\n    for(wi=Long;wi;--wi)\n        putchar(Dat[wi]+'0');\n    putchar(10);\n}\nvoid IE::Clear()\n{\n    memset(Dat,0,sizeof(int)*(Long+1));\n    Long=1;\n}\nvoid IE::Insert(char*str)\n{\n    Long=strlen(str);\n    int wi;\n    for(wi=Long;wi;--wi)\n        Dat[wi]=str[Long-wi]-'0';\n}\nvoid IE::Copy(IE*ie)\n{\n    memset(Dat,0,sizeof(int)*(Long+1));\n    Long=ie->Long;\n    memcpy(Dat,ie->Dat,sizeof(int)*(Long+1));\n}\nvoid IE::Divide2()\n{\n    int wi=Long;\n    int exa=0;\n    while(wi)\n    {\n        Dat[wi]+=exa*10;\n        exa=Dat[wi]%2;\n        Dat[wi]/=2;\n        --wi;\n    }\n    Select();\n}\nvoid IE::Minus(IntEx*r)\n{\n    int wi;\n    int exm=0;\n    int nl=max(Long,r->Long)+1;\n    Long=nl;\n    for(wi=1;wi<=nl;++wi)\n    {\n        Dat[wi]-=exm;\n        exm=0;\n        Dat[wi]-=r->Dat[wi];\n        while(Dat[wi]<0)\n            ++exm,Dat[wi]+=10;\n    }\n    Select();\n}\nIE Trie::FindString(short*str,int ln)\n{\n    int pos=0;\n    ++str;\n    while(ln--)\n    {\n        pos=Next[pos][TRANS(*str)];\n        if(!pos)return Zero;\n        ++str;\n    }\n    return Val[pos]==0?Zero:*Val[pos];\n}\nvoid Trie::InsertString(short*str,IE Vl,int ln)\n{\n    int pos=0;\n    ++str;\n    while(ln--)\n    {\n        if(!Next[pos][TRANS(*str)])\n            Next[pos][TRANS(*str)]=++Top;\n        pos=Next[pos][TRANS(*str)];\n        ++str;\n    }\n    Val[pos]=new IE;\n    Val[pos]->Copy(&Vl);\n}\n    Trie::Trie()\n{\n    Top=0;\n    memset(Next,0,sizeof(Next));\n}\nvoid ReadStr(char*str)\n{\n    int op=0;\n    char c=getchar();\n    while(c<'0'||c>'9')\n        c=getchar();\n    while(c>='0'&&c<='9')\n    {\n        str[op++]=c;\n        c=getchar();\n    }\n    str[op]='\\0';\n}\nint T;\nchar Nms[130];\nIE Nmc,One;\nTrie Glb;\nIE Pool[11000];\nint PL;\nIE Binary(IE*ie)\n{\n    IE ba;\n    ba=Glb.FindString(ie->Dat,ie->Long);\n    if(!IsZero(ba))\n        return ba;\n    if(IsZero((*ie)))return Zero;\n    IE*a=Pool+PL++,*b=Pool+PL++;\n    a->Copy(ie);\n    b->Copy(ie);\n    a->Divide2();\n    if(ie->Dat[1]%2)\n    {\n        b->Minus(a);\n        ba=Binary(a)+Binary(b);\n    }\n    else\n        ba=Binary(a);\n    Glb.InsertString(ie->Dat,ba,ie->Long);\n    PL-=2;\n    return ba;\n}\nvoid IA()\n{\n    Glb.Clear();\n    Glb.InsertString(One.Dat,One,One.Long);\n    ReadStr(Nms);\n    Nmc.Clear();\n    Nmc.Insert(Nms);\n    IE pr=Binary(&Nmc);\n    pr.Print();\n}\nint main()\n{\n    One.Dat[1]=1;\n    scanf(\"%d\",&T);\n    while(T--)\n        IA();\n    return 0;\n}\n\n```",
        "postTime": 1494690731,
        "uid": 25508,
        "name": "Night_Aurora",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    },
    {
        "content": "# \u601d\u8def\n\n\u8fd9\u9898\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u89c4\u5f8b\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a $a_i$ \u90fd\u53ef\u4ee5\u7528 $x \\times a_0 + y \\times a_1$\uff0c\u5176\u4e2d $x,y$ \u4e3a\u4e00\u4e2a\u5e38\u6570\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u53d1\u73b0 $a_0 = 0,a_1= 1$\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u7684\u6700\u7ec8\u7ed3\u679c\u4fbf\u4e3a $y$\u3002\n\n\u6211\u4eec\u76f4\u63a5\u7b97\u51fa $y$ \u5373\u53ef\u3002\n\n\u6700\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u6570\u636e\u8303\u56f4\uff1a$n \\leq 10^{100}$\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u76f4\u63a5\u4e0apy\u3002\n\n# code\n\n```python\nT = int(input())\nfor _ in range(T):\n    n = int(input())\n    x = 1\n    y = 0\n    while n > 0:\n        if n % 2 == 0:#\u66f4\u65b0\u4e00\u6ce2\n            x += y\n        else:\n            y += x\n        n //= 2;\n    print(y)\n```",
        "postTime": 1670767167,
        "uid": 383395,
        "name": "WaterSun",
        "ccfLevel": 5,
        "title": "[\u9898\u89e3]P2609 [ZJOI2012]\u6570\u5217"
    },
    {
        "content": "py \u840c\u840c\u9898\u3002\n\n\u9898\u610f\uff1a\u7ed9\u5b9a\u6570\u5217 $\\{a_i\\}$  \u6ee1\u8db3\n\n$$a_n=\\begin{cases}\n0 & n=0\\\\\n1&n=1\\\\\na_{\\frac{n}{2}} & n \\equiv0 \\pmod 2\\\\\n\na_{\\frac{n-1}{2}}+a_{\\frac{n+1}{2}} & n \\equiv 1 \\pmod 2\n\\end{cases}$$\n\n\u6c42 $a_n$\u3002\n\n\u624b\u73a9\u4e00\u4e0b\u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e2a $a_n$ \u90fd\u53ef\u4ee5\u5199\u6210 $x \\times a_0+y \\times a_1$ \u7684\u5f62\u5f0f\uff0c\u663e\u7136\u6211\u4eec\u53ea\u8981\u6c42\u51fa $y$ \u5c31\u884c\u4e86\u3002\n\n\u8003\u8651\u5206\u6cbb\uff0c\u52a0\u5165\u6211\u4eec\u8981\u6c42 $x \\times a_i+y \\times a_{i+1}$\uff0c\u5206\u7c7b\u8ba8\u8bba\u4e00\u4e0b\uff1a\n\n+ \u82e5 $i$ \u4e3a\u5076\u6570\n\n\u5e26\u5165\u9012\u63a8\u5f0f\u5c31\u6709\n\n$$x \\times a_i+y \\times a_{i+1}=x \\times a_{\\frac{n}{2}}+y \\times (a_{\\frac{n}{2}}+a_{\\frac{n}{2}+1})$$\n$$= (x+y)  \\times a_{\\frac{n}{2}}+y \\times a_{\\frac{n}{2}+1}$$\n\n+  \u82e5 $i$ \u4e3a\u5947\u6570\n\n\n\u540c\u7406\u6709\n\n$$x \\times a_i + y \\times a_{i+1}=x \\times a_{\\frac{i-1}{2}}+(x+y) \\times a_{\\frac{i+1}{2}}$$\n\n\u6700\u540e\u7684\u7b54\u6848\u663e\u7136\u662f $1 \\times a_n+0 \\times a_{n+1}$\uff0c\u7136\u540e\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\mathcal{O}(T \\log n)$\u3002\u9ad8\u7cbe\u76f4\u63a5\u65e0\u8111 py\u3002\n\n```python\nT = int(input())\nfor i in range(T) :\n    n = int(input())\n    x = 1\n    y = 0\n    while n > 0 :\n        if n % 2 == 0 :\n            x = x + y\n        else :\n            y = x + y\n        n = n // 2\n    print(y)\n\n```\n",
        "postTime": 1668319054,
        "uid": 280473,
        "name": "404Not_Found",
        "ccfLevel": 5,
        "title": "P2609"
    },
    {
        "content": "\u9898\u610f\uff1a\u6c42\u6ee1\u8db3 $a_0=0,a_1=1,a_{2i}=a_i,a_{2i+1}=a_i+a_{i+1}$ \u7684\u6570\u5217\u7684\u7b2c $n$ \u9879\u3002\n\n\u6838\u5fc3\u601d\u60f3\uff1a\u4e8c\u5206\n\n\u89e3\uff1a\n\n\u6ce8\u610f\u5230 $a_{2i+1}=a_{2i}+a_{2i+2}$ \u4e14 $a_{2i}=a_i$ \uff0c\u53ef\u77e5\u5bf9\u4e8e\u6570\u5217\u7684\u524d $2^i+1$ \u9879\uff0c\u5728\u5176\u4e2d\u76f8\u90bb\u4e24\u9879\u4e4b\u95f4\u5404\u63d2\u5165\u4e00\u9879\u8fd9\u4e24\u9879\u7684\u548c\u5373\u5f97\u6570\u5217\u7684\u524d $2^{i+1}+1$ \u9879\u3002\u5982\u4e0b\u56fe\uff1a\n\n|0|1|1|2|1|3|2|3|1|4|3|5|2|5|3|4|1|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|0|  |1|  |1|  |2|  |1|  |3|  |2|  |3|  |1|\n|0|  |  |  |1|  |  |  |1|  |  |  |2|  |  |  |1|\n|0|  |  |  |  |  |  |  |1|  |  |  |  |  |  |  |1|\n|0|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |1|\n\n\n\u56e0\u6b64\uff0c\u53ea\u8981\u9996\u5148\u5c06\u6240\u6c42\u9879\u9879\u6570\u9664\u53bb\u6240\u6709 $2$ \u56e0\u5b50\u5e76\u4e8c\u5206\u5373\u53ef\u3002\n\n\u4e8c\u5206\u5177\u4f53\u65b9\u6cd5\u5982\u4e0b\uff1a\n\n\u521d\u59cb\u5de6\u53f3\u7aef\u70b9\u4f4d\u7f6e\u4e3a $0,2$ \uff0c\u5de6\u53f3\u503c\u4e3a $0,1$ \uff0c\u4e8c\u5206\u540e\u7aef\u70b9\u4f4d\u7f6e\u6539\u53d8\u7684\u4e00\u4fa7\u7684\u503c\u53d8\u4e3a\u4e24\u4fa7\u503c\u7684\u548c\uff0c\u76f4\u5230\u533a\u95f4\u5927\u5c0f\u7f29\u5230 $2$ \u4e3a\u6b62\u3002\u7531\u4e8e\u9884\u5904\u7406\u8fc7\u540e $n$ \u4e3a\u5947\u6570\uff0c\u6240\u6c42\u503c\u5c31\u662f\u533a\u95f4\u4e24\u4fa7\u503c\u7684\u548c\u3002\u4ee5\u6c42 $a_{11}$ \u4e3a\u4f8b\uff1a\n\n|0|1|1|2|1|3|2|3|1|4|3| _5_ |2|5|3|4|1|\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n|0|  |1|  |1|  |2|  |1|  |**3**|  |**2**|  |3|  |1|\n|0|  |  |  |1|  |  |  |**1**|  |  |  |**2**|  |  |  |1|\n|0|  |  |  |  |  |  |  |**1**|  |  |  |  |  |  |  |**1**|\n|**0**|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |**1**|\n\n\u4e0b\u9762\u6bcf\u884c\u52a0\u7c97\u7684\u6570\u5b57\u662f\u6bcf\u6b21\u4e8c\u5206\u5f00\u59cb\u65f6\u533a\u95f4\u4e24\u7aef\u7684\u503c\uff0c\u7b2c\u4e00\u884c\u7684\u659c\u4f53\u6570\u5b57\u662f\u7ed3\u679c\u3002\n\n\u5305\u62ec\u4f4d\u7f6e\u548c\u53d6\u503c\u5728\u5185\u7684\u6240\u6709\u8fd0\u7b97\u90fd\u9700\u8981\u9ad8\u7cbe\u3002\u5171\u9700\u8981\u5b9e\u73b0\u9ad8\u7cbe\u6bd4\u8f83\uff0c\u9ad8\u7cbe\u4e58\u4f4e\u7cbe\uff0c\u9ad8\u7cbe\u9664\u4f4e\u7cbe\uff0c\u9ad8\u7cbe\u52a0\u9ad8\u7cbe\u51e0\u79cd\u64cd\u4f5c\u3002\n\n\u4ee3\u7801\uff1a\n```\n#include <bits/stdc++.h>\nusing namespace std;\nlong long a[1001][4], t, l[101], r[101], flag;\n//a[i][1]\u4e3an\uff0ca[i][2]\u4e0ea[i][3]\u5206\u522b\u4e3a\u533a\u95f4\u5de6\u53f3\u7aef\u70b9\u4f4d\u7f6e\nchar ch[1001];\nlong long cmp(long long x, long long y)\n{\n\tfor(int in=1000; in>=0; in--)\n\t\tif(a[in][x]>a[in][y])\n\t\t\treturn x;\n\t\telse if(a[in][x]<a[in][y])\n\t\t\treturn y;\n\treturn 10;\n}//\u9ad8\u7cbe\u6bd4\u8f83\nint main()\n{\n\tcin>>t;\n\tfor(int i=1; i<=t; i++)\n\t{\n\t\tmemset(ch, 0, sizeof(ch));\n\t\tfor(int j=0; j<=1000; j++)\n\t\t\tfor(int k=0; k<=3; k++)\n\t\t\t\ta[j][k]=0;\n\t\tcin>>ch+1;\n\t\tfor(int j=strlen(ch+1); j>=1; j--)\n\t\t\ta[strlen(ch+1)-j][1]=ch[j]-48;\n\t\ta[0][3]=2;\n\t\tmemset(l, 0, sizeof(l));\n\t\tmemset(r, 0, sizeof(r));\n\t\tr[0]=1;//\u521d\u59cb\u5316\u8f93\u5165\n\t\twhile(a[0][1]%2==0)\n\t\t{\n\t\t\tfor(int j=1000; j>0; j--)\n\t\t\t{\n\t\t\t\ta[j-1][1]+=10*(a[j][1]%2);\n\t\t\t\ta[j][1]/=2;\n\t\t\t}\n\t\t\ta[0][1]/=2;\n\t\t}//\u5c06n\u9664\u53bb\u6240\u67092\n\t\twhile(cmp(1, 3)==1)\n\t\t{\n\t\t\tfor(int j=0; j<=1000; j++)\n\t\t\t\ta[j][3]*=2;\n\t\t\tfor(int j=0; j<=1000; j++)\n\t\t\t{\n\t\t\t\ta[j+1][3]+=a[j][3]/10;\n\t\t\t\ta[j][3]%=10;\n\t\t\t}\n\t\t}//\u786e\u5b9a\u533a\u95f4\u53f3\u7aef\u70b9\u4e0a\u754c\n\t\twhile(1)\n\t\t{\n\t\t\tfor(int j=0; j<=1000; j++)\n\t\t\t\ta[j][0]=a[j][2]+a[j][3];\n\t\t\tfor(int j=0; j<=1000; j++)\n\t\t\t{\n\t\t\t\ta[j+1][0]+=a[j][0]/10;\n\t\t\t\ta[j][0]%=10;\n\t\t\t}\n\t\t\tfor(int j=1000; j>0; j--)\n\t\t\t{\n\t\t\t\ta[j-1][0]+=10*(a[j][0]%2);\n\t\t\t\ta[j][0]/=2;\n\t\t\t}\n\t\t\ta[0][0]/=2;//\u8ba1\u7b97\u533a\u95f4\u4e2d\u70b9\n\t\t\tif(cmp(0, 1)==10)\n\t\t\t{\n\t\t\t\tfor(int j=0; j<=100; j++)\n\t\t\t\t\tl[j]+=r[j];\n\t\t\t\tfor(int j=0; j<=100; j++)\n\t\t\t\t{\n\t\t\t\t\tl[j+1]+=l[j]/10;\n\t\t\t\t\tl[j]%=10;\n\t\t\t\t}\n\t\t\t\tflag=0;\n\t\t\t\tfor(int j=100; j>=0; j--)\n\t\t\t\t{\n\t\t\t\t\tif(l[j]!=0)\n\t\t\t\t\t\tflag=1;\n\t\t\t\t\tif(flag!=0)\n\t\t\t\t\t\tcout<<l[j];\n\t\t\t\t}\n\t\t\t\tcout<<endl;\n\t\t\t\tbreak;\n\t\t\t}//n\u6070\u5728\u4e2d\u70b9\u5904\uff08\u9664\u975e\u533a\u95f4\u957f\u5ea6\u4e3a2\uff0c\u5426\u5219\u4e2d\u70b9\u5fc5\u7136\u4e3a\u5076\u6570\uff09\n\t\t\telse if(cmp(0, 1)==0)\n\t\t\t{\n\t\t\t\tfor(int j=0; j<=1000; j++)\n\t\t\t\t\ta[j][3]=a[j][0];\n\t\t\t\tfor(int j=0; j<=100; j++)\n\t\t\t\t\tr[j]+=l[j];\n\t\t\t\tfor(int j=0; j<=100; j++)\n\t\t\t\t{\n\t\t\t\t\tr[j+1]+=r[j]/10;\n\t\t\t\t\tr[j]%=10;\n\t\t\t\t}\n\t\t\t}//n\u5728\u4e2d\u70b9\u5de6\u4fa7\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor(int j=0; j<=1000; j++)\n\t\t\t\t\ta[j][2]=a[j][0];\n\t\t\t\tfor(int j=0; j<=100; j++)\n\t\t\t\t\tl[j]+=r[j];\n\t\t\t\tfor(int j=0; j<=100; j++)\n\t\t\t\t{\n\t\t\t\t\tl[j+1]+=l[j]/10;\n\t\t\t\t\tl[j]%=10;\n\t\t\t\t}\n\t\t\t}//n\u5728\u4e2d\u70b9\u53f3\u4fa7\n\t\t}\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1666048852,
        "uid": 191387,
        "name": "\u03a6\u03c1\u03b1\u03bd\u03ba",
        "ccfLevel": 0,
        "title": "P2609 [ZJOI2012]\u6570\u5217 \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u9898\u89e3\u533a\u6709\u4e0d\u5c11\u795e\u4ed9\u505a\u6cd5\uff0c\u7136\u800c\u849f\u84bb\u6211\u5e76\u4e0d\u592a\u80fd\u7406\u89e3\uff0c\u4f46\u597d\u5728\u8fd9\u9053\u9898\u53ef\u4ee5\u4f7f\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\u6c34\u8fc7\u3002\n\n\u6839\u636e\u9898\u610f\uff0c\u9012\u5f52\u6c42\u89e3\uff0c\u5224\u91cd\u53ef\u4ee5\u4f7f\u7528 ```map```\uff0c\u7136\u540e\u5c31\u6709\u4e86 $50$ \u5206\u505a\u6cd5\u5982\u4e0b\n\n```cpp\nll work(ll n){\n\tif(n==1) return 1;\n\tif(mp[n]) return mp[n];\n\twhile(n%2==0&&n) n/=2;\n\tif(!n) return 0;\n\treturn mp[n]=work(n/2)+work(n/2+1);\n}\n```\n\n\u7136\u540e\u518d\u628a ```long long``` \u66ff\u6362\u6210\u9ad8\u7cbe\uff0c\u6216\u8005\u4f7f\u7528 python\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u6ee1\u5206\u4e86\uff0c\u5355\u6b21\u590d\u6742\u5ea6\u7ea6\u4e3a $O(\\log n)$\u3002",
        "postTime": 1660123837,
        "uid": 576527,
        "name": "OI_AKed_me",
        "ccfLevel": 5,
        "title": "P2609 [ZJOI2012]\u6570\u5217\u9898\u89e3"
    },
    {
        "content": "~~\u5982\u4f55\u79d2\u6389 ZJOI\uff08\u8be6\u7ec6\u63ed\u79d8\uff09~~\n\n\u9996\u5148\u56e0\u4e3a\u9700\u8981\u9ad8\u7cbe\u6240\u4ee5\u9009\u62e9 Python .\n\n\u6839\u672c\u4e0d\u7528\u7ba1\u9898\u76ee\u91cc\u8bf4\u7684\u4e1c\u897f\uff0c\u76f4\u63a5\u66b4\u529b\u6a21\u62df\uff1a\n```python\ndef f(n):\n\tif n < 2:\n\t\treturn n\n\tans = f(n // 2)\n\tif n % 2:\n\t\tans = ans + f(n // 2 + 1)\n\treturn ans \n```\n\n\u7136\u800c\u8fd9\u6837\u9012\u5f52\u590d\u6742\u5ea6\u662f\u6709\u95ee\u9898\u7684\uff0c\u7136\u800c\u6211\u4eec\u77e5\u9053 Python \u91cc\u6709\u4e2a\u4e1c\u897f\u53eb\u505a LRUCache .\n\n\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b LRU Cache \u5927\u6982\u5c31\u662f\u5bf9\u8981\u8bb0\u5fc6\u5316\u7684\u4e1c\u7684 Hash \u5f00\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u7136\u540e\u67e5\u8be2\u4e00\u4e2a\u4e1c\u897f\u5c31\u628a\u5b83\u63d0\u5230\u94fe\u8868\u5934\uff0c\u5982\u679c\u52a0\u4e1c\u897f\u7a7a\u95f4\u4e0d\u591f\u4e86\u5c31\u4e22\u6389\u94fe\u8868\u5c3e .\n\n\u6b64\u5904\u8fd9\u4e2a\u94fe\u8868\u5c3e\u5176\u5b9e\u5c31\u662f LRU \u5143\u7d20\uff08Least Recently Used\uff0c\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\uff09\uff0c\u6211\u4eec\u6839\u636e\u5b9e\u9645\u7ecf\u9a8c\u770b\u8fd9\u4e2a\u5143\u7d20\u7684\u5e94\u7528\u6b21\u6570\u662f\u6bd4\u8f83\u5c11\u7684\u4e8e\u662f\u4e22\u6389\u4f1a\u66f4\u4f18 .\n\n\u5f53\u7136\u5982\u679c\u8fd9\u4e2a\u7a7a\u95f4\u5f88\u8db3\u7684\u8bdd\u5c31\u7b49\u4ef7\u4e8e\u8bb0\u5fc6\u5316\u641c\u7d22\n\n\u7528\u6cd5\u89c1\u4ee3\u7801\uff1a\n```python\nimport functools\n\n@functools.lru_cache(114514)\ndef f(n):\n\tif n < 2:\n\t\treturn n\n\tans = f(n // 2)\n\tif n % 2:\n\t\tans = ans + f(n // 2 + 1)\n\treturn ans \n\nT = int(input()) \n\nfor i in range(0, T):\n\tn = int(input())\n\tprint(f(n))\n```\n\n`@functools.lru_cache(114514)` \u8868\u793a `f` \u9700\u8981 LRU Cache \u5e2e\u5fd9\u8bb0\u5fc6\u5316\uff0c\u5927\u5c0f\u662f 114514 .\n\n\u5f53\u7136\u8fd9\u9898\u6bd4\u8f83\u6c34\uff0c\u5927\u5c0f\u76f4\u63a5\u62c9\u6ee1\uff08\u5373 `@functools.lru_cache()`\uff09\u4e5f\u80fd\u8fc7 .\n\n\n\u4e60\u9898\uff1a[P1464 Function](https://www.luogu.com.cn/problem/P1464)\uff0c\u9700\u8981\u624b\u52a8\u8bbe\u7f6e LRU Cache \u5927\u5c0f .\n\n~~\u5f53\u7136 CCF \u662f\u4e0d\u628a Python \u5f53\u4f5c\u7ade\u8d5b\u8bed\u8a00\u7684~~",
        "postTime": 1656387699,
        "uid": 227514,
        "name": "jijidawang",
        "ccfLevel": 0,
        "title": "P2609"
    },
    {
        "content": "# \u9898\u76ee\u63cf\u8ff0\n\u7ed9\u5b9a\u4e00\u4e2a\u6570\u5217\u6ee1\u8db3 $a_0=0,a_1=1,a_{2i}=a_i,a_{2i+1}=a_i+a_{i+1}$\n\n\u7ed9\u51fa\u6b63\u6574\u6570 $n$\uff0c\u6c42\u6570\u5217\u7b2c $n$ \u9879\u7684\u503c\u3002\n\n# \u5206\u6790\n\u8bbe\u51fd\u6570 $f(x)$\u8868\u793a\u6570\u5217\u4e2d\u7b2c $x$ \u9879\u7684\u503c $(x\\in N_+)$\u3002\n\u5219\u9898\u76ee\u6761\u4ef6\u8f6c\u5316\u4e3a\uff1a\n\n$\nf(x)=\n\\begin{cases}\nf(\\frac{x}{2})&x\\%2=0\\\\\nf(\\frac{x-1}{2})+f(\\frac{x+1}{2})&x\\%2=1\\\\\n\\end{cases}\n$\n\n\u4e14 $f(0)=0,f(1)=1$\u3002\n\n\n\u5b9a\u4e49 $x\\times f(n)+y\\times f(n+1)$ \u4e3a**\u539f\u5f0f**\uff0c\u5bf9\u4e8e\u4e24\u79cd\u60c5\u51b5**\u5206\u7c7b\u8ba8\u8bba**\u3002\n- \u82e5 $n$ \u4e3a\u5076\u6570\uff0c$n=2t$ \n\n\u4f9d\u9898\u610f\u5f97 \n\n$f(n)=f(t),f(n+1)=f(2t+1)=f(t)+f(t+1)$\n\n\u5219 \n\n$x\\times f(n)+y\\times f(n+1)=x\\times f(t)+y\\times f(t)+y\\times f(t+1)$\n\n\u6839\u636e\u4e58\u6cd5\u5206\u914d\u5f8b\u5f97\n\n$x\\times f(n)+y\\times f(n+1)=(x+y)\\times f(t)+y\\times f(t+1)$\n\n- \u82e5 $n$ \u4e3a\u5947\u6570\uff0c$n=2t+1$\n\n\u4f9d\u9898\u610f\u5f97 \n\n$f(n)=f(t)+f(t+1),f(n+1)=f(2t+2)=f(t+1)$\n\n\u5219 \n\n$x\\times f(n)+y\\times f(n+1)=x\\times f(t)+x\\times f(t+1)+y\\times f(t+1)$\n\n\u6839\u636e\u4e58\u6cd5\u5206\u914d\u5f8b\u5f97\n\n$x\\times f(n)+y\\times f(n+1)=x\\times f(t)+(x+y)\\times f(t+1)$\n\n\u53ef\u5f97\u4ee5\u4e0a\u4e24\u79cd\u60c5\u51b5\u7684\u7ed3\u679c\u90fd\u4e0e**\u539f\u5f0f\u5f62\u5f0f**\u65e0\u5f02\u3002\n\u5219\u4ee4 $n=t=\\lfloor \\frac{n}{2}\\rfloor$\uff0c\u66f4\u65b0 $x,y$ \u7684\u503c\uff0c\u91cd\u590d\u4ee5\u4e0a\u8fc7\u7a0b\uff08\u5728\u7a0b\u5e8f\u4e2d\u4e3a\u9012\u5f52\u8fc7\u7a0b\uff09\u3002\n\n\u76f4\u5230 $n=0$\uff0c\u6709**\u539f\u5f0f** $=x\\times f(0)+y\\times f(1)=y$\uff0c\u6b64\u65f6 $y$ \u5373\u4e3a\u7b54\u6848\u3002**\u65f6\u95f4\u590d\u6742\u5ea6**\u4e3a $O(Tlogn)$\u3002\n\n\u9898\u76ee\u8981\u6c42 $f(n)$ \u7684\u503c\uff0c\u5373 $1\\times f(n)+0\\times f(n+1)$\uff0c\u6240\u4ee5**\u521d\u59cb\u5316** $x=1,y=0$\u3002 \n\n# \u4ee3\u7801\n~~\u56e0\u4e3a\u672c\u4eba\u4e0d\u559c\u6b22 string\uff0c~~ \u9ad8\u7cbe\u7528 vector \u91cd\u8f7d\u8fd0\u7b97\u7b26\uff0c\u5982\u4e0d\u4e60\u60ef\u8bf7\u89c1\u8c05\uff08\u9012\u5f52\u90e8\u5206\u4f1a\u7ed9\u6ce8\u91ca\uff09\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<vector>\n#include<cstring>\n\nusing namespace std;\nconst int N=105;\nint A[N],B[N],C[N];\nint T;\n\nvector<char> operator +(vector<char> a,vector<char> b){\n\tint i;\n\tint lena=0,lenb=0,lenc=1,x=0;\n\tmemset(A,0,sizeof(A));\n\tmemset(B,0,sizeof(B));\n\tmemset(C,0,sizeof(C));\n\tfor(i=a.size()-1;i>=0;i--) A[++lena]=a[i]-'0';\n\tfor(i=b.size()-1;i>=0;i--) B[++lenb]=b[i]-'0';\n\twhile(lenc<=lena||lenc<=lenb){\n\t\tC[lenc]=A[lenc]+B[lenc]+x;\n\t\tx=C[lenc]/10;\n\t\tC[lenc]%=10;\n\t\tlenc++;\n\t}\n\tC[lenc]=x;\n\twhile(C[lenc]==0&&lenc>1) lenc--;\n\tvector<char> res;\n\tfor(i=lenc;i>=1;i--) res.push_back(C[i]+'0');\n\treturn res;\n}\n\nvector<char> operator /(vector<char> a,int b){\n\tint i;\n\tint lena=0,lenc=0,x=0;\n\tmemset(A,0,sizeof(A));\n\tmemset(C,0,sizeof(C));\n\tfor(i=a.size()-1;i>=0;i--) A[++lena]=a[i]-'0';\n\tfor(i=lena;i>=1;i--){\n\t\tx=x*10+A[i];\n\t\tC[++lenc]=x/b;\n\t\tx%=b;\n\t}\n\tint tmp=1;\n\twhile(C[tmp]==0&&tmp<lenc) tmp++;\n\tvector<char> res;\n\tfor(i=tmp;i<=lenc;i++) res.push_back(C[i]+'0');\n\treturn res;\n}\n\nvoid Dfs(vector<char> n,vector<char> &x,vector<char> &y){\n\tif(n.size()==1&&n.back()=='0') return;\n   \t\t//\u5224\u65adn\u662f\u5426\u4e3a\u96f6\n\tif(int(n[n.size()-1]-'0')&1) y=y+x;\n    \t\t//\u5982\u679cn\u4e3a\u5947\u6570\n\telse x=x+y;\n    \t\t//\u5982\u679cn\u4e3a\u5076\u6570\n\tDfs(n/2,x,y);\n    \t\t//\u4ee4n=t\uff0c\u9012\u5f52\u8c03\u7528\n\treturn;\n}\n\nint main(){\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tvector<char> x,y,n;\n\t\tchar ch=getchar();\n\t\twhile(!isdigit(ch)) ch=getchar();\n\t\twhile(isdigit(ch)) n.push_back(ch),ch=getchar();\n\t\tx.push_back('1');y.push_back('0');\n\t\tDfs(n,x,y);\n\t\tint i;\n\t\tfor(i=0;i<y.size();i++) putchar(y[i]);\n\t\tputs(\"\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1654386668,
        "uid": 209541,
        "name": "huayt",
        "ccfLevel": 0,
        "title": "P2609 \u9898\u89e3"
    },
    {
        "content": "\u53ef\u4ee5\u89c2\u5bdf\u5230dfs\u6811\u7684\u6700\u5927\u5c42\u6570\u5dee\u4e0d\u591a\u5c31\u662f$log\\ n$\u4e58\u4ee5\u67d0\u4e2a\u5e38\u6570\u4e86\u3002\n\n\u6240\u4ee5\u57fa\u672c\u601d\u8def\u5c31\u662fdfs\u5957\u4e2a\u8bb0\u5fc6\u5316\u641c\u7d22\u76f4\u63a5\u66b4\u529b\u6c42\u3002\u8282\u70b9\u6570\u8bb2\u9053\u7406\u4e0d\u4f1a\u5f88\u591a\u3002\u5927\u6982\u5728$(log\\ n)^2$\u5de6\u53f3\u4e58\u4e2a\u5e38\u6570$k$\u3002\u603b\u7ed3\u70b9\u6570\u4e5f\u5c31\u662f$Tk(log\\ n)^2$\u3002\u4e5f\u5c31\u662f\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\n\n\u4f46\u662f\u8fd9\u73a9\u610f\u8981\u9ad8\u7cbe\uff0c\u4ee5\u53ca\u600e\u4e48\u8bb0\u5fc6\u5316\u662f\u4e2a\u95ee\u9898\u3002\n\n\u6700\u8fa3\u9e21\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u5199\u9ad8\u7cbe\u5ea6\u7ed3\u6784\u4f53\uff0c\u91cd\u8f7d<\u4ee5\u53ca==\u53f7\uff0c\u7136\u540e\u7528map\u50a8\u5b58...\n\n\u5927\u6982\u662f\u6700\u6162\u4ee3\u7801\uff08300ms+\uff09...\u867d\u7136\u80fd\u8fc7\\_(:\u0437\u309d\u2220)_\n\n```cpp\n// Code by ajcxsu\n// Problem: sequence\n\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N=300;\n\nstruct BIGNUM {\n    int a[N],len;\n    BIGNUM() { memset(a,0,sizeof(a)); len=0; }\n    BIGNUM operator = (int x) {\n        memset(a,0,sizeof(a)), len=0;\n        if(!x) len=1;\n        while(x) {\n            a[len++]=x%10;\n            x/=10;\n        }\n        return *this;\n    }\n    BIGNUM operator = (string &x) {\n        memset(a,0,sizeof(a)), len=0;\n        len=x.size();\n        for(int i=len-1;i>=0;i--) a[len-1-i]=x[i]-'0';\n        return *this;\n    }\n    BIGNUM (int x) { *this=x; }\n    BIGNUM operator +(const BIGNUM &b) {\n        BIGNUM c;\n        int t=0;\n        while(c.len<len || c.len<b.len) {\n            c.a[c.len]=a[c.len]+b.a[c.len]+t;\n            t=0;\n            if(c.a[c.len]>=10) t++, c.a[c.len]-=10;\n            c.len++;\n        }\n        if(t) c.a[c.len++]=t;\n        return c;\n    }\n    BIGNUM operator +(const int x) {\n        return *this+BIGNUM(x);\n    }\n    BIGNUM operator -(const int x) {\n        BIGNUM c;\n        c.a[c.len++]=a[0]-x;\n        while(c.len<=len) {\n            if(c.a[c.len-1]<0) c.a[c.len-1]+=10, c.a[c.len]-=1;\n            c.a[c.len]+=a[c.len];\n            c.len++;\n        }\n        while(!c.a[c.len-1]) c.len--;\n        return c;\n    }\n    BIGNUM operator /(const int x) {\n        BIGNUM c;\n        int num=0;\n        bool first=1;\n        for(int i=len-1;i>=0;i--) {\n            num=num*10+a[i];\n            if(num>=x) {\n                if(first) c.len=i+1, first=0;\n                c.a[i]=num/x;\n                num%=x;\n            }\n        }\n        return c;\n    }\n    friend bool operator <(const BIGNUM &y, const BIGNUM &x) {\n        if(x.len!=y.len) return y.len<x.len;\n        for(int i=0;i<y.len;i++)\n            if(x.a[i]!=y.a[i]) return y.a[i]<x.a[i];\n        return 0;\n    }\n    friend bool operator ==(const BIGNUM &y, const BIGNUM &x) {\n        if(x.len!=y.len) return 0;\n        for(int i=0;i<y.len;i++)\n            if(x.a[i]!=y.a[i]) return 0;\n        return 1;\n    }\n} ;\ntypedef BIGNUM ll;\nmap<ll,ll> f;\n\nistream& operator >> (istream &in, BIGNUM &x) {\n    string nu;\n    in>>nu;\n    x=nu;\n    return in;\n}\n\nostream& operator << (ostream &out, const BIGNUM &x) {\n    string nu;\n    for(int i=0;i<x.len;i++) nu+='0'+x.a[i];\n    int i=0, j=x.len-1;\n    while(i<j) swap(nu[i++],nu[j--]);\n    out<<nu;\n    return out;\n}\n\nll dfs(ll x) {\n    if(x.a[0]==1 && x.len==1) return 1;\n    if(x.a[0]==0 && x.len==1) return 0;\n    if(f.count(x)) return f[x];\n    if(x.a[0]&1) f[x]=dfs((x+1)/2-1)+dfs((x+1)/2);\n    else f[x]=dfs(x/2);\n    return f[x];\n}\n\n\nint main() {\n    int T;\n    cin>>T;\n    while(T--) {\n        ll n;\n        cin>>n;\n        cout<<dfs(n)<<endl;\n    }\n    return 0;\n}\n```\n\n",
        "postTime": 1518061252,
        "uid": 5554,
        "name": "Sino_E",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2609 \u3010[ZJOI2012]\u6570\u5217\u3011"
    }
]
[
    {
        "content": "\u6c42\u51fa $chk(i,j)$ \u8868\u793a\u662f\u5426\u5bf9\u6240\u6709 $k\\in (i,j)$ \u90fd\u6709 $P_k$ \u5230 $P_iP_j$ \u7684\u8ddd\u79bb\u4e0d\u8d85\u8fc7 $d$\uff0c\u968f\u540e\u6211\u4eec\u7528 $dp(i)$ \u8868\u793a\u5230\u8fbe $i$ \u80fd\u7ecf\u8fc7\u7684\u6700\u5c11\u70b9\u6570\u7136\u540e\u968f\u4fbf DP \u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u90a3\u4e48\u5982\u4f55\u6c42 $chk(i,j)$ \u5462\uff1f\n\n\u8003\u8651\u67d0\u4e2a $k>i$\uff0c\u5982\u679c\u8981\u6ee1\u8db3 $P_k$ \u5230 $P_iP_j$ \u8ddd\u79bb\u4e0d\u8d85\u8fc7 $d$\uff0c\u90a3\u4e48\uff1a\n\n- \u82e5 $P_kP_i\\leq d$\uff0c\u90a3\u4e48\u6ca1\u6709\u9650\u5236\uff1b\n\n- \u5426\u5219\uff0c$P_iP_j$ \u4e0e $P_iP_k$ \u7684\u5939\u89d2\u5e94\u5f53\u4e0d\u5927\u4e8e $\\arcsin(\\dfrac{d}{|P_iP_k|})$\u3002\n\n\u4e8e\u662f\u5728\u5904\u7406\u6240\u6709 $chk(i,j)$ \u65f6\uff0c\u6211\u4eec\u987a\u6b21\u626b\u63cf $k>i$\uff0c\u8bb0\u5f55\u5b83\u5bf9 $P_iP_j$ \u6781\u89d2\u7684\u533a\u95f4\u9650\u5236\uff0c\u7136\u540e\u5bf9\u8fd9\u4e2a $k$ \u8ba1\u7b97\u5b83\u662f\u5426\u5728 $i+1,\\ldots,k-1$ \u6240\u5212\u5b9a\u7684\u533a\u95f4\u5185\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2)$\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN=2010;\nconst double pi=acos(-1.0),eps=1e-8;\nstruct P {\n\tdouble x,y;\n}p[MAXN];\nint n,dp[MAXN],trans[MAXN][MAXN];\ndouble d,al,ar,bl,br;\ndouble calcslp (P a,P b) {\n\treturn atan2(b.y-a.y,b.x-a.x);\n}\ndouble calcdis (P a,P b) {\n\treturn sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y));\n}\npair<double,double> calc (P a,P b) {\n\tdouble plragl=calcslp(a,b);\n\tdouble delagl=asin(d/calcdis(a,b));\n\tpair<double,double> res=make_pair(plragl-delagl,plragl+delagl);\n\treturn res;\n}\nint main () {\n\tscanf(\"%d%lf\",&n,&d);\n\tfor (int i=1;i<=n;i++) {\n\t\tscanf(\"%lf%lf\",&p[i].x,&p[i].y);\n\t\tfor (int j=i+1;j<=n;j++) {trans[i][j]=1;}\n\t}\n\tfor (int i=1;i<=n;i++) {\n\t\tal=bl=-pi-eps,ar=br=pi+eps;\n\t\tfor (int j=i+1;j<=n;j++) {\n\t\t\tdouble tmp=calcslp(p[i],p[j]);\n\t\t\tif ((tmp<al||tmp>ar)&&(tmp<bl||tmp>br)) {trans[i][j]=0;}\n\t\t\tif (calcdis(p[i],p[j])>d) {\n\t\t\t\tpair<double,double> bd=calc(p[i],p[j]);\n\t\t\t\tif (bd.first>=-pi-eps&&bd.second<=pi+eps) {\n\t\t\t\t\tal=max(al,bd.first),ar=min(ar,bd.second);\n\t\t\t\t\tbl=max(bl,bd.first),br=min(br,bd.second);\n\t\t\t\t} else if (bd.first<-pi-eps) {\n\t\t\t\t\tar=min(ar,bd.second);\n\t\t\t\t\tbl=max(bl,bd.first+2*pi);\n\t\t\t\t} else {\n\t\t\t\t\tar=min(ar,bd.second-2*pi);\n\t\t\t\t\tbl=max(bl,bd.first);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i=n;i>=1;i--) {\n\t\tal=bl=-pi-eps,ar=br=pi+eps;\n\t\tfor (int j=i-1;j>=1;j--) {\n\t\t\tdouble tmp=calcslp(p[i],p[j]);\n\t\t\tif ((tmp<al||tmp>ar)&&(tmp<bl||tmp>br)) {trans[j][i]=0;}\n\t\t\tif (calcdis(p[i],p[j])>d) {\n\t\t\t\tpair<double,double> bd=calc(p[i],p[j]);\n\t\t\t\tif (bd.first>=-pi-eps&&bd.second<=pi+eps) {\n\t\t\t\t\tal=max(al,bd.first),ar=min(ar,bd.second);\n\t\t\t\t\tbl=max(bl,bd.first),br=min(br,bd.second);\n\t\t\t\t} else if (bd.first<-pi-eps) {\n\t\t\t\t\tar=min(ar,bd.second);\n\t\t\t\t\tbl=max(bl,bd.first+2*pi);\n\t\t\t\t} else {\n\t\t\t\t\tar=min(ar,bd.second-2*pi);\n\t\t\t\t\tbl=max(bl,bd.first);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tmemset(dp,0x3f,sizeof(dp));\n\tdp[1]=1;\n\tfor (int i=2;i<=n;i++) {\n\t\tfor (int j=1;j<i;j++) {\n\t\t\tif (trans[j][i]) {dp[i]=min(dp[i],dp[j]+1);}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",dp[n]);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1623656360,
        "uid": 113546,
        "name": "ix35",
        "ccfLevel": 10,
        "title": "[NWRRC2015]Kingdom Trip \u9898\u89e3"
    }
]
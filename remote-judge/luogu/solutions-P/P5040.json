[
    {
        "content": "[link](https://www.luogu.com.cn/problem/P5040) & [\u535a\u5ba2\u56ed\u98df\u7528](https://www.cnblogs.com/dai-se-can-tian/p/16450215.html)\n\n\u9898\u9762\u5f88\u957f\uff0c\u800c\u4e14\u8bf4\u5f97\u5f88\u7384\u4e4e\uff0c\u5404\u79cd\u4e13\u4e1a\u672f\u8bed\u4e00\u5927\u5806\u3002\u4f46\u5176\u5b9e\u5b83\u7684\u610f\u601d\u662f\u4e0d\u96be\u7406\u89e3\u7684\uff0c\u7b80\u5355\u8bf4\u6765\uff0c\u5c31\u662f\u7ed9\u5b9a\u4e00\u4e2a\u96c6\u5408 $A$ \uff0c\u8fd9\u4e2a\u96c6\u5408\u5305\u542b\u6240\u6709\u4f4d\u6570\u4e0d\u8d85\u8fc7 $N$ \u7684 $K$ \u8fdb\u5236\u6570\uff08\u4f4d\u6570\u4e0d\u8db3\u5219\u8865\u96f6\uff09\u3002\u5bf9\u4e8e\u4e00\u4e2a\u5143\u7d20 $a \\in A$ \uff0c\u5047\u5982 $a$ \u7684\u6bcf\u4e00\u4f4d\u6570\u5b57\u5206\u522b\u662f $a_1,a_2\\dots a_N$ \uff0c\u90a3\u4e48\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u65b0\u7684\u957f\u5ea6\u4e3a $N-1$ \u7684\u5e8f\u5217 $d$ \u6ee1\u8db3 $\\forall i\\in[1,N-1],d_i=\\min(a_i,a_{i+1})$ \u3002\u9898\u76ee\u4e2d\u7ed9\u8fd9\u79cd\u6784\u9020\u8d77\u4e86\u4e00\u4e2a\u5565\u5565\u6620\u5c04\u7684\u540d\u5b57\uff0c\u5e76\u8bb0\u4f5c $d=image(a)$ \u3002\u540c\u65f6\u518d\u5b9a\u4e49\u4e00\u79cd\u6c42\u503c\u7684\u65b9\u6cd5\uff0c\u5b9a\u4e49\u5e8f\u5217 $d$ \u7684\u4ef7\u503c\u662f $val(d)=\\prod\\limits_{i=1}^{|d|}(d_i+1)$ \u3002\u9898\u76ee\u4e2d\u6c42\u89e3\u7684\u4e1c\u897f\u662f $\\sum\\limits_{a\\in A(N,K)}val(image(a))$ \u3002\n\n\u8fd9\u6837\u4e00\u6765\u5c31\u6bd4\u8f83\u6e05\u6670\u4e86\u3002\u53ef\u4ee5\u60f3\u5230\u65e2\u7136 $A$ \u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u5168\u6392\u5217\uff08\u867d\u7136\u8fd9\u4e48\u8bf4\u4e0d\u4e25\u8c28\uff09\uff0c\u6240\u4ee5 $d$ \u6bcf\u4e00\u4f4d\u4e0a\u7684\u6570\u5b57\u7684\u53d6\u503c\u548c\u6bcf\u4e2a\u53d6\u503c\u7684\u65b9\u6848\u6570\u662f\u4e00\u6837\u7684\u3002\u8fd8\u6709\u4e00\u4e2a\u6027\u8d28\u4e0d\u5bb9\u5ffd\u89c6\uff0c\u5047\u5982 $a$ \u7684\u524d\u4e24\u4f4d\u5df2\u7ecf\u56fa\u5b9a\u4e86\uff0c\u90a3\u4e48 $d$ \u7684\u7b2c\u4e00\u4f4d\u4e5f\u5c31\u56fa\u5b9a\u4e86\uff0c\u90a3\u4e48\u4e0a\u9762\u90a3\u4e2a\u6c42\u503c\u51fd\u6570\u7684\u7b2c\u4e00\u9879\u4e5f\u5c31\u56fa\u5b9a\u4e86\u3002\u65e2\u7136\u5982\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5c0f\u5b66\u7684\u65f6\u5019\u5b66\u8fc7\u7684\u4e58\u6cd5\u5206\u914d\u5f8b\u8fdb\u884c\u4f18\u5316\uff0c\u7136\u540e\u505a\u597d\u8bb0\u5fc6\u5316\uff0c\u6b63\u5e38\u8f6c\u79fb\u5c31\u53ef\u4ee5\u4e86\u3002\u5f53\u7136\u6b63\u7740\u8f6c\u79fb\u4e5f\u53ef\u4ee5\uff0c\u4f46\u6211\u504f\u5411\u4e8e\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\n\u8981\u5199\u9ad8\u7cbe\u5ea6\u3002\u5361 long long \u7684\u90fd\u4e0d\u662f\u4ec0\u4e48\u597d\u4e1c\u897f\u3002\n\n\u653e\u4e00\u4e0b\u641c\u7d22\u51fd\u6570\u7684\u5185\u5bb9\uff1a\n\n```cpp\n//node\u662f\u9ad8\u7cbe\u5ea6\u7ed3\u6784\u4f53 \nnode g[10][N];//\u8bb0\u5fc6\u5316\u6570\u7ec4 \nbool vis[10][N];\nnode f(int wh,int ch){//\u5f53\u524d\u5728\u586b\u7b2cwh\u4e2a\u6570\uff0c\u4e14\u8fd9\u4e2a\u6570\u586b\u7684\u662fch \n\tif(wh==m){\n\t\tnode an=newone;\n\t\tan.num=1;an.a[1]=1;\n\t\treturn an;//\u5230\u4e86\u8fb9\u754c\u8fd4\u56de1 \n\t}\n\tif(vis[wh][ch]==true)return g[wh][ch];//\u8bb0\u5fc6\u5316\u641c\u7d22 \n\tint an=0;\n\tfor(int i=0;i<n;i++){//\u679a\u4e3e\u90a3\u4e00\u4f4d\u53ef\u80fd\u586b\u7684\u6570 \n\t\tg[wh][ch]=g[wh][ch]+f(wh+1,i)*(min(ch,i)+1);\n\t\t//min(ch,i)+1 \u76f8\u5f53\u4e8e\u662f\u4e58\u6cd5\u5206\u914d\u5f8b\u91cc\u88ab\u63d0\u5230\u5916\u9762\u7684\u4e58\u6570\n\t\t//\u7d2f\u52a0\u5373\u53ef \n\t}\n\tvis[wh][ch]=true;\n\treturn g[wh][ch];//\u505a\u597d\u8bb0\u5fc6\u5316 \n}\n```",
        "postTime": 1657080282,
        "uid": 302383,
        "name": "Feyn",
        "ccfLevel": 0,
        "title": "P5040\u9898\u89e3"
    }
]
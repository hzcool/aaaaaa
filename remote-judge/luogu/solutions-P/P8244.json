[
    {
        "content": "### UPD\uff1a\n2022/03/29\uff1a\u4fee\u590d\u4e86\u9898\u76ee\u94fe\u63a5\uff08\u624b\u6025\u6253\u9519\u4e86\uff09\uff0c\u5b8c\u5584\u4e86\u4e00\u4e9b\u8bed\u8a00\u3002\n\n### \u539f\u9898\u94fe\u63a5\n\n[P8244 \\[COCI2013-2014#3\\] KOLINJE](https://www.luogu.com.cn/problem/P8244)\n\n### \u601d\u8def\n\n\u6211\u4eec\u8bbe $x$ \u4e3a\u6700\u7ec8\u7684\u7b54\u6848\uff0c$S = \\sum\\limits_{i=1}^n b_i$\uff0c\u90a3\u4e48\u9898\u76ee\u5c31\u662f\u8981\u6c42\u627e\u5230\u4e00\u4e2a $[0, 10^7]$ \u8303\u56f4\u5185\u7684\u6d6e\u70b9\u6570 $x$\uff0c\u4f7f\u5f97 $x$ \u6ee1\u8db3\u4ee5\u4e0b\u4e0d\u7b49\u5f0f\u7ec4\uff1a\n\n$\\begin{cases}a_1 + \\dfrac{b_1}{S}x \\ge a_2 + \\dfrac{b_2}{S}x\\\\\\\\a_2 + \\dfrac{b_2}{S}x \\ge a_3 + \\dfrac{b_3}{S}x\\\\\\ldots\\\\a_{n-1} + \\dfrac{b_{n-1}}{S}x \\ge a_n + \\dfrac{b_n}{S}x\\end{cases}$\n\n\u5bf9\u4e8e\u4e0d\u7b49\u5f0f\uff1a\n\n$a_i + \\dfrac{b_i}{S}x \\ge a_{i+1} + \\dfrac{b_{i+1}}{S}x$\n\n\u6211\u4eec\u5c06 $\\dfrac{b_{i+1}}{S}x$ \u79fb\u5230\u5de6\u8fb9\uff0c\u5c06 $a_i$ \u79fb\u5230\u53f3\u8fb9\uff0c\u5f97\uff1a\n\n$\\dfrac{b_i-b_{i+1}}{S}x \\ge a_{i+1}-a_i$\n\n\u63a5\u4e0b\u6765\u5c31\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\n\n#### Case 1: $b_i > b_{i+1}$\n\n$x \\ge \\dfrac{S(a_{i+1}-a_i)}{b_i-b_{i+1}}$\uff0c\u6b64\u65f6\u6211\u4eec\u5f97\u5230\u4e86 $x$ \u7684\u4e00\u4e2a\u4e0b\u754c\u3002\n\n#### Case 2: $b_i < b_{i+1}$\n\n$x \\le \\dfrac{S(a_{i+1}-a_i)}{b_i-b_{i+1}}$\uff0c\u6b64\u65f6\u6211\u4eec\u5f97\u5230\u4e86 $x$ \u7684\u4e00\u4e2a\u4e0a\u754c\u3002\n\n#### Case 3: $b_i = b_{i+1}$\n\n$\\begin{cases}a_{i+1}-a_i>0\\text{\uff0c\u4e0d\u7b49\u5f0f\u7ec4\u65e0\u89e3\uff0c\u76f4\u63a5\u8f93\u51fa -1 \u5373\u53ef\u3002}\\\\a_{i+1}-a_i\\le0, x \\in \\mathrm{R}\\text{\uff0c\u6b64\u65f6\u6211\u4eec\u4ec0\u4e48\u90fd\u4e0d\u7528\u505a\u3002}\\end{cases}$\n\n\u6700\u540e\u5224\u65ad\u4e00\u4e0b\uff0c\u5982\u679c $x$ \u7684\u4e0b\u754c\u5927\u4e8e $x$ \u7684\u4e0a\u754c\uff0c\u90a3\u4e48\u4e5f\u65e0\u89e3\u3002\u5426\u5219\u8f93\u51fa\u8303\u56f4\u5185\u4efb\u610f\u4e00\u4e2a $x$ \u5373\u53ef\u3002\n\n### Code\uff1a\n\n\u5b9e\u73b0\u4e0a\u7684\u4e00\u4e9b\u7ec6\u8282\uff1a\n\n1. \u6ce8\u610f $x$ \u672c\u6765\u8fd8\u6709\u4e00\u4e2a $[0,10^7]$ \u7684\u8303\u56f4\u9650\u5236\u3002\n1. \u8981\u8f93\u51fa\u591a\u51e0\u4f4d\u5c0f\u6570\uff0c\u8981\u4e0d\u7136\u7cbe\u5ea6\u4e0d\u591f\u5c31 WA \u4e86\u3002\n1. \u6211\u7684\u4ee3\u7801\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u91c7\u7528\u5206\u6570\u907f\u514d\u7cbe\u5ea6\u95ee\u9898\uff0c\u5982\u679c\u662f\u7528\u5c0f\u6570\u5b9e\u73b0\u7684\u8981\u6ce8\u610f\u7ec6\u8282\u4e0a\u7684\u5904\u7406\u3002\n\n\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5~~\u6109\u5feb\u5730~~\u5199\u51fa\u4ee5\u4e0b\u7684\u4ee3\u7801\u4e86\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nstruct node{\n\tll fz, fm;\n\tnode (ll x, ll y){\n\t\tif (y < 0) y = -y, x = -x; // \u628a\u8d1f\u53f7\u5b58\u5728\u5206\u5b50\n\t\tfz = x / __gcd(abs(x), y);\n\t\tfm = y / __gcd(abs(x), y); // \u4e0d\u7ea6\u5206\u5176\u5b9e\u4e5f\u53ef\u4ee5\n\t}\n\tbool operator <(const node &a) const {\n\t\treturn (fz * a.fm < fm * a.fz);\n\t}\n\tbool operator >(const node &a) const {\n\t\treturn (fz * a.fm > fm * a.fz);\n\t}\n};\nint n, a[1003], b[1003];\nnode xmin = node(0, 1), xmax = node(1e7, 1); // x \u6700\u5f00\u59cb\u7684\u4e0a\u4e0b\u754c\nll S = 0;\nint main(){\n\tscanf (\"%d\", &n);\n\tfor (int i = 1;i <= n;++i){\n\t\tscanf (\"%d%d\", a+i, b+i);\n\t\tS += b[i];\n\t}\n\tfor (int i = 1;i < n;++i){\n\t\tif (b[i] > b[i+1]) xmin = max(xmin, node(S * (a[i+1] - a[i]), b[i] - b[i+1])); // Case 1\n\t\telse if (b[i] < b[i+1]) xmax = min(xmax, node(S * (a[i+1] - a[i]), b[i] - b[i+1])); // Case 2\n\t\telse if (a[i+1] - a[i] > 0) { // Case 3\n\t\t\tprintf(\"-1\");\n\t\t\treturn 0;\n\t\t}\n\t}\n\tif (xmin > xmax) {\n\t\tprintf(\"-1\");\n\t\treturn 0;\n\t}\n\tprintf (\"%.10f\", (double)xmin.fz / xmin.fm);\n\treturn 0;\n}\n```",
        "postTime": 1648042259,
        "uid": 415838,
        "name": "\u770b\u4ec0\u4e48\u770b",
        "ccfLevel": 6,
        "title": "P8244 [COCI2013-2014#3] KOLINJE \u9898\u89e3"
    }
]
[
    {
        "content": "\u8fd9\u7bc7\u9898\u89e3\u5e94\u8be5\u4e0d\u4f1a\u8fc7\u5ba1\u3002\n\n----------\n\n## \u9898\u610f  \n\n\u51fa\u9898\u4eba\u7684~~\u8bed\u6587\u6c34\u5e73~~\u82f1\u8bed\u6c34\u5e73\u4e00\u76f4\u53ef\u4ee5\u7684\u3002![](//\u5567.tk/qiang)\n\n\u61d2\u5f97\u7b80\u8ff0\u4e86\u3002\n\n## \u9898\u89e3\n\n\u76f4\u63a5\u4ece $n$ \u53f7\u70b9\u5012\u7740\u8dd1\u4e00\u904d Dij\uff0c\u7136\u540e\u679a\u4e3e\u5154\u5b50\u8def\u5f84\u4e0a\u7684\u70b9\u662f\u5426\u53ef\u4ee5\u5f00\u59cb\u8fdb\u884c\u4f5c\u5f0a\uff0c\u540c\u65f6\u53cc\u6307\u9488\u7ef4\u62a4\u4e4c\u9f9f\u8d70\u5230\u54ea\u91cc\u4e86\uff0c\u7136\u540e $O(1)$ \u5224\u65ad\u4e00\u4e0b\u5c31\u884c\u4e86\u3002  \n\u603b\u590d\u6742\u5ea6 $O((n+m) \\log m)$\u3002\n\n## \u4ee3\u7801  \n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define rd(x) x=read()\nusing namespace std;\nconst int N=5e5+5;\nint read(){int x=0,f=1;char ch=getchar();while (ch>'9'||ch<'0'){if (ch=='-')f=-1;ch=getchar();}while (ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}return x*f;}\nvoid write(int x){if (x<0){putchar('-');x=-x;}if (x>=10)write(x/10);putchar(x%10+'0');}\n\nint n,m,pr,pt;\nbool vis[N];\nint tP[N],tS[N],rP[N];\nint dis[N],sum[N];\nvector<int>ans;\nstruct edge{int v,w;};\nvector<edge> G[N];\nstruct Edge{int u,v,t,r;}e[N];\nstruct Node{int x;bool operator<(const Node &o) const{return dis[x]>dis[o.x];}};\n\nvoid Dij(int S)\n{\n\tfor (int i=1;i<=n;i++) dis[i]=1e18;dis[S]=0,vis[S]=1;\n\tpriority_queue<Node> Q;Q.push({S});\n\twhile (!Q.empty())\n\t{\n\t\tNode x=Q.top();Q.pop();int u=x.x;vis[u]=0;\n        for (edge e:G[u]) if (dis[e.v]>dis[u]+e.w)\n        {\n            dis[e.v]=dis[u]+e.w;\n            if (!vis[e.v]) {vis[e.v]=1;Q.push({e.v});}\n        }\n\t}\n}\n\nsigned main()\n{\n    rd(n);rd(m);\n\tfor (int i=1,u,v,t,r;i<=m;i++) rd(u),rd(v),rd(t),rd(r),G[v].push_back({u,r}),e[i]={u,v,t,r};\n    rd(pt);for (int i=1;i<=pt;i++) rd(tP[i]),rd(tS[i]);\n\trd(pr);for (int i=1;i<=pr;i++) rd(rP[i]);\n\tDij(n);\n\tfor (int i=pt;i>=1;i--) sum[i]=sum[i+1]+e[tP[i]].t;\n\tfor (int i=1,j=1,cntT=0,cntR=0;i<=pr;i++)\n\t{\n        int u=e[rP[i]].u,v=e[rP[i]].v,r=e[rP[i]].r,t=e[rP[i]].t;\n\t\tif (dis[u]==dis[v]+r){cntR+=r;continue;}\n\t\twhile (j<=pt && cntT+tS[j-1]+e[tP[j]].t<=cntR){cntT+=tS[j-1]+e[tP[j]].t;j++;}\n\t\tif (cntT+tS[j-1]+sum[j]>=cntR+dis[u]) ans.push_back(u);\n\t\tcntR+=r;\n\t}\n\tsort(ans.begin(),ans.end());cout<<ans.size()<<\"\\n\";for (int x:ans) cout<<x<<\" \";cout<<\"\\n\";\n}\n/*\n\n*/\n```",
        "postTime": 1635923674,
        "uid": 70132,
        "name": "AsunderSquall",
        "ccfLevel": 7,
        "title": "P5872 [SEERC2018]Rabbit vs Turtle \u9898\u89e3"
    }
]
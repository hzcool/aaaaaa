[
    {
        "content": "#\u554a\n\n~~\u6211\u4e00\u5b9a\u8981\u5199\u8fd9\u7bc7\u9898\u89e3\u796d\u5960\u6211\u901d\u53bb\u7684\u4e00\u4e0b\u5348~~\n\n\n\u62ff\u5230\u8fd9\u9898\uff0c\u4e4d\u4e00\u770b\u662f\u4e00\u4e2a $dp$ \u9898\u3002\u4e5f\u7684\u786e\u662f\u4e00\u4e2a $dp$\uff0c\u800c\u4e14\u975e\u5e38\u6c34\u3002\n\n\u6839\u636e\u9898\u4e2d\u5173\u4e8e $4$ \u8fde\u73af\u7684\u89e3\u91ca\uff0c\u4f60\u53ef\u4ee5\u53d1\u73b0 $4$ \u8fde\u73af\u7684\u62c6\u5378\u5c31\u662f\u8fd9\u6837\u7684\u4e00\u4e2a\u89c4\u5f8b\uff1a\n\n$1$ : \u62c6 $2$ \u8fde\u574f\u4f7f\u5176\u53d8\u4e3a $1100$ \uff1b\n\n$2$ : \u62ff\u6389\u6700\u5de6\u9762\u7684 $1$ ;\n\n$3$ : \u52a0 $2$ \u8fde\u73af\u4f7f\u5176\u53d8\u4e3a $0111$ \uff1b\n\n$4$ : \u62c6 $3$ \u8fde\u73af\u3002\n\n\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u4e24\u6761\u89c4\u5219\u4e2d\u90fd\u662f\"\u4efb\u610f\u88c5\u4e0a\u6216\u5378\u4e0b\u3002\"\u90a3\u4e48\u53ef\u60f3\u800c\u77e5\u88c5 $x$ \u8fde\u73af\u4e0e\u5378 $x$ \u8fde\u73af\u90fd\u662f\u540c\u6837\u7684\u6b65\u6570\u3002\n\n\u6240\u4ee5\u8bbe $dp(x)$ \u8868\u793a $x$ \u8fde\u73af\u62c6\u5378\u7684\u6b21\u6570\uff0c~~\u8fd9\u9898\u5df2\u7ecf\u7ed3\u675f\u4e86\u3002~~\uff08\u624d\u602a)\n\n$$dp(4)=dp(2) + 1 + dp(2) + dp(3)$$\n\n$dp(n)=dp(n-2)$ (\u62c6 $(n-2)$ \u8fde\u73af\u53d8\u6210 $110000...$ \uff09$+$ $1$  ( $010000...$ )\n$+$ $dp(n-2)$ (\u88c5 $(n-2)$ \u8fde\u73af\u53d8\u6210 $011111...$ ) $+$ $dp(n-1)$ (\u62c6 $(n-1)$ \u8fde\u73af)\u3002\n\n$$dp(n)=2dp(n-2)+dp(n-1)+1$$\n\n\u4e8e\u662f\u6211\u5174\u81f4\u51b2\u51b2\u5730\u6253\u4e86\u4e00\u53d1\u9012\u63a8\u4ea4\u4e0a\u53bb30\u5206\u3002\n\n\u7136\u540e\u6211\u53d1\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a\u6ca1\u6709\u53d6\u819c\uff1f\n\n\u6ca1\u6709\u53d6\u819c\u3002\u6211\u8bf4\u600e\u4e48\u90a3\u4e48\u6c34\u3002\n\n\u4e8e\u662f\u6211\u9677\u5165\u4e86\u6c89\u601d\u3002\n\n\u3002\n\n\u6c89\u601d\u4e4b\u4e2d\u987a\u624b\u6253\u4e86\u4e2a\u8868\uff1a\n\n$1$ $2$ $5$ $10$ $21$ $42$ $85$ $170...$\n\n\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\u3002\u6bcf\u4e00\u9879\u7ea6\u7b49\u4e8e\u524d\u4e00\u9879\u7684 $2$ \u500d\u3002\u4ed4\u7ec6\u5206\u6790\uff0c\u53d1\u73b0\n\n$$dp(n)=2dp(n-1)+ (n\\&1)?1:0$$\n\n\u65e2\u7136\u662f $2$ \u500d\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u6253\u4e00\u4e0b $2$ \u8fdb\u5236\u8868\u793a\u5462\uff1f\n\n$1$ $10$ $101$ $1010$ $10101$ $101010$ $1010101......$\n\n\u6709\u70b9\u610f\u601d\u3002\n\n\u5176\u5b9e\u4e5f\u5f88\u5bb9\u6613\u80fd\u4ece $dp$ \u4e2d\u53d1\u73b0\u8fd9\u4e2a\u89c4\u5f8b\uff0c\u6bcf\u5f53 $n$ \u4e3a\u5947\u6570\u65f6$++$\uff0c\u5c31\u4f1a\u4f7f\u6bcf\u9694 $1$ \u4f4d $+1$ \u3002\n\n\u8fd9\u4e5f\u4e0d\u592a\u597d\u529e\u3002$n=1e5$ \u65f6\uff0c\u8fd9\u4e2a $2$ \u8fdb\u5236\u6570\u5c31\u6709 $1e5$ \u4f4d\u3002$10$ \u8fdb\u5236\u7684\u9ad8\u7cbe\u4f4d\u6570\u53ea\u77e5\u9053\u6bd4 $1e5$ \u5c0f\u5374\u6ca1\u6709\u529e\u6cd5\u786e\u5b9a\u3002\u9694\u4e00\u4f4d\u4e00\u4e2a $1$ \u4e5f\u4e0d\u65b9\u4fbf\u5316\u6210 $10$ \u8fdb\u5236\u554a\u3002\u4e0d\u8fc7\u597d\u50cf\u6ca1\u6709\u4ec0\u4e48\u597d\u529e\u6cd5\u80fd\u76f4\u63a5\u4ece $2$ \u8fdb\u5236\u7684\u9ad8\u7cbe\u8f6c\u5316\u4e3a $10$ \u8fdb\u5236\u7684\u9ad8\u7cbe\u3002(\u4ec5\u4e3a\u601d\u8003\u8fc7\u7a0b)\n\n\u80fd\u4e0d\u80fd\u76f4\u63a5\u4ece $10$ \u8fdb\u5236\u7684\u9ad8\u7cbe\u63a8\u8fc7\u6765\u5462\uff1f\n\n\u5982\u679c\u662f\u4e8c\u8fdb\u5236\u8868\u793a\u662f $1000000....$ \uff0c\u5b83\u5c31\u53ef\u4ee5\u8f7b\u677e\u5730\u8868\u793a\u4e3a $2^n$ \u7136\u540e\u7528\u5feb\u901f\u5e42\u505a\u4e86\u3002\n\n\u90a3\u4e48\u73b0\u5728\u8003\u8651\u5bf9\u8fd9\u4e2a $2$ \u8fdb\u5236\u6570 $\u00d73$ \u3002\u54e6\u4e0d\u5bf9\uff0c\u662f $11$ \u3002\u6211\u4eec\u6765\u770b\u53d8\u6210\u4e86\u4ec0\u4e48\u3002\u3002\n\n$11$ $110$ $1111$ $11110$ $111111$ $1111110 ......$\n\n\u8fd9\u5c31\u53ef\u4ee5\u8bf4\u662f\u975e\u5e38\u663e\u7136\u4e86\u5427\u3002( $+1$ \u6216 $+2$ \u53d8\u6210 $10000...$ )\n\n\u5199\u51fa\u6765\u4e5f\u5c31\u662f\u5176\u4ed6\u9898\u89e3\u4e2d\u5927\u4f6c\u4eec\u7684\u516c\u5f0f\u3002\u53ea\u4e0d\u8fc7\u6211\u7528\u4e86\u8fd9\u79cd\u53e6\u7c7b\u601d\u8def\u5f97\u5230\u3002\n\n\u53ef\u662f\u6709\u4e00\u4e2a\u95ee\u9898\u3002 \u591a\u9879\u5f0f\u4e58\u6cd5\u662f $n^2$ \u7684\u3002\u5373\u4fbf\u6709\u5feb\u901f\u5e42\uff0c\u5b83\u7684\u590d\u6742\u5ea6\u4e5f\u662f $n^2logn$ \u7684\u3002\n\n\u90a3\u4e48\u5c31\u5199\u4e00\u4e2a $FFT$ \u52a0\u901f\u4e00\u4e0b\u591a\u9879\u5f0f\u4e58\u6cd5\u5c31\u884c\u5566\uff01\n\n\u7136\u540e\u4f60\u8981\u611f\u8c22\u4f60\u770b\u5230\u4e86\u8fd9\u7bc7\u9898\u89e3\u3002\u5982\u679c\u4f60\u662f\u90a3\u79cd\u5bf9\u590d\u6742\u5ea6\u8981\u6c42\u4e25\u683c\uff0c\u8ba4\u4e3a\u590d\u6742\u5ea6\u51b3\u5b9a\u4e00\u5207\u548c\u662f\u5426$AC$\u7684\u9009\u624b\uff0c\u4f60\u53ef\u4ee5\u5c11\u5199\u4e00\u4e2a$FFT$\u3002\n\n$n^2logn$ \u4e2d $n^2$ \u7684 $n$ \u662f\u4ec0\u4e48\uff1f\u662f\u6570\u636e\u4f4d\u6570\u3002\n\n\u9996\u5148\u5f53 $n$ \u4e3a $1e5$ \u65f6\u4f60\u7684 $2$ \u8fdb\u5236\u6570\u662f $1e5$ \u4f4d\u7684\u3002\u5982\u679c\u5b83\u53d8\u6210 $10$ \u8fdb\u5236\uff0c\u53ef\u4ee5\u53d8\u6210 $Xe4$ \u7ea7\u522b\u3002\u5982\u679c\u518d\u5bf9\u5b83\u538b\u4e00\u4e0b\u4f4d\u76f4\u63a5 $1e8$ \u8fdb\u5236\uff0c\u5b83\u53ef\u4ee5\u53d8\u6210 $Xe3$ \u7ea7\u522b\u3002\u590d\u6742\u5ea6\u77ac\u95f4\u53d8\u6210$O($\u53ef\u8fc7$)$\u3002\n\n\u5b9e\u9645\u4e0a\u5f53 $n=1e5$ \u65f6\u6700\u540e\u7684\u7b54\u6848\u538b\u4f4d\u540e\u53ea\u6709 $3762$ \u4f4d\u3002\n\n\u800c\u4e14\u53e6\u5916\u4e00\u70b9\uff0c\u666e\u901a\u7684\u76f8\u4e58\u5e38\u6570\u53ef\u662f\u6bd4 $FFT$ \u5c0f\u4e86\u4e0d\u6b62\u51e0\u500d\u3002\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u4f60\u7528\u4e86 $FFT$ \u53bb\"\u4f18\u5316\"\u5b83\uff0c\u4f60\u53cd\u800c\u4f1a\u66f4\u6162\u3002\n\n$FFT$ + \u5c0f\u6570\u76f8\u4e58\u65f6\u66b4\u529b\u7684\u4f18\u5316 $=$ $132ms$\n\n\u538b\u4f4d\u7206\u4e58 + \u8f93\u51fa\u4f18\u5316 + \u5f00\u5c0f\u5185\u5b58\u3000$=$ $8ms$\n\n\u4f24\u611f\u7684\u6545\u4e8b\u3002\n\n```\n#include <bits/stdc++.h>\n#define rap(i,s,n) for(int i=s;i<=n;i++)\n#define drap(i,n,s) for(int i=n;i>=s;i--)\n#define N 5111\n#define Q 100000000\n#define ll long long\n#define m(s,k) memset(s,k,sizeof s)\nchar xA[1<<16],xZ[20]; int xC=-1,xzz=0;\ninline void wt_z(){fwrite(xA,1,xC+1,stdout),xC=-1;}\ntemplate<class T>inline void wt(T x,int t){\n    if(xC>(1<<15)) wt_z();\n    while(xZ[++xzz]=(char)(x%10+'0'),(x/=10)||(t>0)) --t;\n    while(xA[++xC]=xZ[xzz],--xzz);\n}\n//\u5f97\u76ca\u4e8eluogu\u7684\u4ee3\u7801\u516c\u5f00\u8ba1\u5212\u6211\u53ef\u4ee5\u6109\u5feb\u5730\u6284\u5927\u4f6c\u7684\u5feb\u8f93\u677f\u5b50\u4e86\uff08\u4e0d\u7b97\u6284\u88ad\u5427QAQ\uff09\nusing namespace std;\nll res[N],a[N],d[N];\nint sz1,sz2;\nint cheng(ll *a,int n,ll *b,int m){\n    m(d,0); rap(i,0,n) rap(j,0,m) d[i+j]+=a[i]*b[j];\n    rap(i,0,n+m) d[i+1]+=d[i]/Q,d[i]%=Q;\n    int t=n+m+1; while(d[t]) d[t+1]+=d[t]/Q,d[t]%=Q,t++; t--;\n    rap(i,0,t) a[i]=d[i]; return t;\n}\n//\u975e\u5e38\u66b4\u529b\u53c8\u5199\u7684\u4e0d\u662f\u4e00\u822c\u96be\u770b\u7684\u4e58\nint main(){\n    int n,m; scanf(\"%d\",&m); rap(i,1,m){\n        scanf(\"%d\",&n); int t=n+1;\n        m(res,0); res[0]=1; m(a,0); a[0]=2; sz1=sz2=0;\n        while(t){\n            if(t&1) sz1=cheng(res,sz1,a,sz2); t>>=1;\n            if(t) sz2=cheng(a,sz2,a,sz2);\n        }\n        if(n&1) res[0]++; res[0]-=2; if(res[0]<0) res[0]+=Q,res[1]--;\n        ll k=0; drap(i,sz1,0){k=k*Q+res[i]; res[i]=k/3; k%=3;}\n        while(res[sz1]==0) sz1--;\n        wt(res[sz1],0); drap(i,sz1-1,0) wt(res[i],7); xA[++xC]='\\n'; wt_z();\n    }\n    return 0;\n}\n```\n~~\u5f53\u6211\u77e5\u9053\u66b4\u529b\u53ef\u4ee5\u8fc7\uff0c\u800c\u4e14\u5feb\u7684\u98de\u8d77\u7684\u65f6\u5019\uff0c\u6211\u5c31\u597d\u50cf\u770b\u5230\u4e86\u5ca9\u6d46\u91cc\u71c3\u70e7\u7684\u94bb\u77f3\uff0c\u5c31\u597d\u50cf\u770b\u5230\u4e863\u6ef4\u8840\u8dd1\u8def\u7684\u76d6\u4f26,\u5c31\u597d\u50cf\u770b\u5230\u4e86\u6211\u88ab\u4e00\u4e2a\u5c31\u662f\u7834\u4e0d\u4e86\u9632\u7684\u8840\u6761\u91cc\u53ea\u5269\u4e0b\u771f\u7a7a\u7684\u5996\u68a6\u53cd\u6740\u3002~~\n\n~~\u522b\u548c\u6211\u63d0python.~~",
        "postTime": 1527085195,
        "uid": 98650,
        "name": "WinXP",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "\u9012\u63a8\u5f0f\u7684\u63a8\u5bfc\u522b\u7684\u9898\u89e3\u5df2\u7ecf\u7ed9\u51fa\u4e86\uff0c\u6709\u4e00\u79cd\u901a\u8fc7\u7b80\u5355\u7684\u4ee3\u6570\u65b9\u6cd5\u6c42\u89e3\u672c\u9898\u9012\u63a8\u5f0f\u7684\u901a\u9879\u516c\u5f0f\u3002\n\n$f[0]=0, \\ f[1]=1, \\ f[i] = 2f[i-2]+f[i-1]+1 $\n\n\u8bbe$\\ g[i] = f[i]+f[i-1], \\ g[1] = 1 $\n\n\u6709$\\ f[i] = 2g[i-1]-f[i-1]+1=1 $\n$g[i] = f[i]+f[i-1]=2g[i-1]+1=2^i-1 $\n$f[i] = 2^i-f[i-1]-1=f[i-2]+2^{i-1} $\n$f[0] = 0,\\ f[2i]=f[2i-2]+2^{2i-1}=\\frac{2^{2i+1}-2}{3} $\n$f[1] = 1,\\ f[2i+1]=f[2i-1]+2^{2i}=\\frac{2^{2i+2}-1}{3}$ \n\u7efc\u4e0a$\\ f[i] = \\big\\lfloor \\frac{2^{i+1}}{3} \\big\\rfloor $\n\n\u7136\u540e\u7528\u538b\u4f4d\u9ad8\u7cbe\u5ea6\u505a\u5feb\u901f\u5e42\u5373\u53ef\u3002",
        "postTime": 1527335652,
        "uid": 18479,
        "name": "yhgalaxy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "NOIP\u70b8\u4e86\u4e4b\u540e\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\u3002\u8c28\u4ee5\u6b64\u7eaa\u5ff5\u88ab\u6211\u4e22\u6389\u7684\u7701\u4e00\u3002\n\n\u89c2\u5bdf\u9898\u76ee\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u6bd4\u8f83\u663e\u7136\u7684\u9012\u63a8\u5f0f\u3002\u8bbe$F_x$\u8868\u793a$x$\u8fde\u73af\u88ab\u62c6\u4e0b\u6240\u9700\u7684\u6b65\u6570\uff0c\u5219\u6709$$F_x = F_{x-1} + 2F_{x-2} + 1$$\n\n~~\u4f2a~~\u8bc1\u660e\u5982\u4e0b\uff1a\n\n\u663e\u7136\u62c6$x$\u8fde\u73af\u4e0e\u88c5$x$\u8fde\u73af\u4e92\u4e3a\u9006\u64cd\u4f5c\uff0c\u6240\u9700\u7684\u6b65\u6570\u76f8\u540c\uff1b  \n\u8003\u8651\u62c6$x$\u8fde\u73af\u7684\u8fc7\u7a0b\uff0c\u7531\u89c4\u5219\u4e8c\u53ef\u4ee5\u77e5\u9053\uff0c\u6700\u5de6\u8fb9\u7684\u73af\u53ea\u6709\u5728\u53ea\u5269\u4e0b\u5b83\u4ee5\u53ca\u5b83\u53f3\u8fb9\u7684\u7b2c\u4e00\u4e2a\u73af\u65f6\u53ef\u4ee5\u62c6\u4e0b\u3002\u800c\u4e3a\u4e86\u62c6\u4e0b\u8fd9\u4e2a\u73af\uff0c\u5fc5\u987b\u5148\u62c6\u6389\u53f3\u8fb9\u7684$x-2$\u8fde\u73af\u3002  \n\u62c6\u4e0b\u4e4b\u540e\uff0c\u8003\u8651\u5982\u4f55\u62c6\u6389\u5269\u4e0b\u7684\u4e00\u4e2a\u73af\u3002\u540c\u6837\u7684\uff0c\u4e3a\u4e86\u80fd\u62c6\u4e0b\u5b83\uff0c\u5fc5\u987b\u628a\u5b83\u53f3\u8fb9\u7684\u7b2c\u4e8c\u4e2a\u73af\u88c5\u4e0a\uff0c\u5373\u88c5$x-2$\u8fde\u73af\u3002\u63a5\u4e0b\u6765\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u62c6$x-1$\u8fde\u73af\u4e86\u3002\n\n\u63a8\u51fa\u8fd9\u4e2a\u5f0f\u5b50\u4e4b\u540e\u5176\u5b9e\u5df2\u7ecf\u53ef\u4ee5\u4f7f\u7528\u538b\u4f4d\u9ad8\u7cbe\u8ba1\u7b97\u4e86\u3002\u4f46\u662f\u4e3a\u4e86\u51cf\u5c0f\u5e38\u6570\uff0c\u9632\u6b62\u88ab\u5361\u6389\uff0c\u6211\u4eec\u8fd8\u8981\u8fdb\u884c\u4e00\u4e9b\u4f18\u5316\u3002  \n\u6ce8\u610f\u5230\u8fd9\u662f\u4e00\u4e2a\u7ebf\u6027\u7684\u4e09\u9879\u9012\u63a8\u5f0f\uff0c\u8003\u8651\u914d\u51d1\u6c42\u51fa\u901a\u9879\u3002\uff08\u5fc5\u4fee\u4e94\u5e38\u89c1\u9898\u578b\uff09\n\n$F_x = F_{x-1} + 2F_{x-2} + 1$  \n$F_x + F_{x-1} = 2F_{x-1} + 2F_{x-2} + 1$  \n$F_x + F_{x-1} + 1 = 2F_{x-1} + 2F_{x-2} + 2$  \n$F_x + F_{x-1} + 1 = 2(F_{x-1} + F_{x-2} + 1)$  \n\u8bbe$G_x = F_x + F_{x-1} + 1$\uff0c\u4e0a\u9762\u7684\u5f0f\u5b50\u5c31\u53ef\u4ee5\u5316\u4e3a\u7b49\u6bd4\u6570\u5217\u5f62\u9012\u63a8\u5f0f\uff1a\n$$G_x = 2 \\times G_{x-1} ~,x \\ge 2 $$\n$$G_x = 2 ~,x = 1$$\n\n\u663e\u7136\u53ef\u4ee5\u63a8\u51fa$G_x = 2^i$\uff0c\u63a5\u4e0b\u6765\u5f00\u59cb\u53cd\u89e3$F_x$\u3002\n\n\u7531$F_x = F_{x-1} + 2F_{x-2} + 1$\u53ef\u5f97\u51fa  \n$F_x = F_{x-2} + G_{x-1}$  \n$F_x = F_{x-2} + 2^{x-1}$\n\n\u5148\u8003\u8651$x$\u662f\u5076\u6570\u7684\u60c5\u51b5\uff1a  \n$F_{2x} = F_{2x-2} + 2^{2x-1}$  \n$F_{2x} = 2^{2x-1} + 2^{2x-3} + \\cdots + 2^1$  \n\u8fd0\u7528\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u516c\u5f0f\u53ef\u4ee5\u5f97\u51fa\uff1a  \n$F_{2x} = \\frac{2^{2i-1} \\times 4 - 2}{3} = \\frac{2^{2i+1} - 2}{3}$\n\n\u63a5\u4e0b\u6765\u8003\u8651$x$\u662f\u5947\u6570\u7684\u60c5\u51b5\uff1a  \n$G_{2x+1} = F_{2x+1} + F_{2x} + 1$  \n$F_{2x+1} = G_{2x+1} - F_{2x} - 1 = \\frac{2^{2i+1} \\times 3 + 2 - 2^{2i+1} - 3}{3}$  \n$F_{2x+1} = \\frac{2^{2i+2}-1}{3}$  \n\n\u4f7f\u7528\u77e9\u9635\u5feb\u901f\u5e42\u52a0\u901f\u8ba1\u7b97\u5373\u53ef\u901a\u8fc7\u6b64\u9898\u3002\n\n\u7801\u98ce\u5947\u7279\uff0c\u656c\u8bf7\u8c05\u89e3\u3002\n```cpp\n#include<bits/stdc++.h>\n#define reg register\ntypedef long long ll;\nusing namespace std;\nconst int MN=10005;\nint n;\nstruct BigInt{\n    static const int BASE=10000;\n    int d[MN],len;\n    inline void clear(int x=0){\n        memset(d,len=0,sizeof(d));if(!x)len=1;while(x)d[len++]=x%BASE,x/=BASE;len--;\n    }\n    inline BigInt operator*(BigInt x){\n        reg BigInt res;res.clear();\n        for(reg int i=0;i<=len;i++)\n            for(reg int j=0;j<=x.len;j++){\n                res.d[i+j]+=d[i]*x.d[j];\n                res.d[i+j+1]+=res.d[i+j]/BASE,res.d[i+j]%=BASE;\n            }\n        res.len=len+x.len+1;\n        while(~res.len&&!res.d[res.len])res.len--;\n        return res;\n    }\n}Ans,A;\nnamespace Out{\n    const int _outlim=1<<20;\n    char outbuf[_outlim+5];\n    int cnt;\n    inline void pc(char ch){\n        outbuf[cnt++]=ch;\n        if(cnt==_outlim)fwrite(outbuf,1,cnt,stdout),cnt=0;\n    }\n    inline void write(BigInt x){\n    \treg bool f=0;\n        if(x.d[x.len]>999)pc(x.d[x.len]/1000+'0'),f=1;x.d[x.len]%=1000;\n        if(x.d[x.len]>99||f)pc(x.d[x.len]/100+'0'),f=1;x.d[x.len]%=100;\n        if(x.d[x.len]>9||f)pc(x.d[x.len]/10+'0'),f=1;x.d[x.len]%=10;\n        pc(x.d[x.len]+'0');\n        for(reg int i=x.len-1;~i;i--){\n            pc(x.d[i]/1000+'0');x.d[i]%=1000;\n            pc(x.d[i]/100+'0');x.d[i]%=100;\n            pc(x.d[i]/10+'0');x.d[i]%=10;\n            pc(x.d[i]+'0');\n        }\n        pc('\\n');\n    }\n    inline void end(){\n        if(cnt)fwrite(outbuf,1,cnt,stdout),cnt=0;fclose(stdin);fclose(stdout);\n    }\n}\nint main(){\n    reg int T;scanf(\"%d\",&T);\n    while(T--){\n        scanf(\"%d\",&n);Ans.clear(1);A.clear(2);reg int b=n+1;\n        while(b){if(b&1)Ans=Ans*A;A=A*A;b>>=1;}Ans.d[0]+=(n&1)-2;reg int q=0;\n        for(reg int i=Ans.len;~i;i--)q=q*Ans.BASE+Ans.d[i],Ans.d[i]=q/3,q%=3;\n        while(~Ans.len&&!Ans.d[Ans.len])Ans.len--;\n        Out::write(Ans);\n    }\n    Out::end();\n    return 0;\n}\n```",
        "postTime": 1544779314,
        "uid": 17930,
        "name": "Marser",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "\u672c\u9898\u89e3\u540c\u6b65\u53d1\u5e03\u4e8e[\u80e1\u5c0f\u5154\u7684\u535a\u5ba2](http://www.cnblogs.com/RabbitHu/p/BZOJ5300.html)\uff0c\u6b22\u8fce\u6765\u8e29\u3002\n\n## \u9898\u9762\n\n\u6c42n\u8fde\u73af\u7684\u6700\u5c11\u6b65\u6570\uff0cn <= 1e5\u3002\n\n## \u9898\u89e3\n\n\u9996\u5148\u2026\u2026\u6211\u4e0d\u4f1a\u73a9\u4e5d\u8fde\u73af\u2026\u2026\n\n\u901a\u8fc7\u627e\u89c4\u5f8b~~\uff08\u5176\u5b9e\u662f\u767e\u5ea6\u641c\u7d22\uff09~~\u53ef\u77e5\uff0c$n$\u8fde\u73af\u7684\u6700\u5c11\u6b65\u6570\u662f$\\lfloor\\frac{2^{n + 1}}{3}\\rfloor$\u3002\n\n\uff08\u5b9e\u9645\u4e0a\uff0c\u4e5d\u8fde\u73af\u7684\u6b65\u9aa4\u6070\u597d\u662f\u4e00\u4e2a\u53eb\u3010\u683c\u96f7\u7801\u3011\u7684\u7f16\u7801\u65b9\u5f0f\u4e2d\u7684$1$\u4e00\u76f4\u5230$2^{n+1}-1$\uff01\uff09\n\n\u7136\u540e\u6211\u4eec\u8981\u8f93\u51fa\u8fd9\u4e2a$\\lfloor\\frac{2^{n + 1}}{3}\\rfloor$\u5c31\u597d\u4e86\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u2014\u2014\u6bd2\u7624\u51fa\u9898\u4eba\u8ba9\u6211\u4eec\u5199\u9ad8\u7cbe\u5ea6\u3002\n\n\u2026\u2026\u90a3\u5c31\u53ea\u80fd\u5199\u54af\u2026\u2026\n\n\u7528FFT\u505a\u9ad8\u7cbe\u5ea6\u4e58\u6cd5\uff0c\u5c01\u88c5\u8d77\u6765\uff0c\u7136\u540e\u6b63\u5e38\u8fdb\u884c\u5feb\u901f\u5e42\u5373\u53ef\u3002\n\n> ### P.S.\n> \u770b\u4e86\u5404\u4f4d\u7684\u505a\u6cd5\uff0c\u96be\u9053\u53ea\u6709\u6211\u4e00\u4e2a\u4eba\u771f\u7684\u5199\u7684\u662fFFT\u9ad8\u7cbe\u5ea6\u561b\uff1f\uff01\u7b97\u4e86\u5c31\u5f53\u7ec3\u4e60FFT\u677f\u5b50\u4e86TAT\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <iostream>\n#define enter putchar('\\n')\n#define space putchar(' ')\nusing namespace std;\ntypedef long long ll;\ntemplate <class T>\nvoid read(T &x){\n    char c;\n    bool op = 0;\n    while(c = getchar(), c < '0' || c > '9')\n    if(c == '-') op = 1;\n    x = c - '0';\n    while(c = getchar(), c >= '0' && c <= '9')\n    x = x * 10 + c - '0';\n    if(op == 1) x = -x;\n}\ntemplate <class T>\nvoid write(T x){\n    if(x < 0) putchar('-'), x = -x;\n    if(x >= 10) write(x / 10);\n    putchar('0' + x % 10);\n}\n\nconst int N = 150000;\nconst double PI = acos(-1);\nint T, x;\n\nstruct cp {\n    double a, b;\n    cp(){}\n    cp(double x, double y): a(x), b(y){}\n    cp operator + (const cp &obj) const {\n\treturn cp(a + obj.a, b + obj.b);\n    }\n    cp operator - (const cp &obj) const {\n\treturn cp(a - obj.a, b - obj.b);\n    }\n    cp operator * (const cp &obj) const {\n\treturn cp(a * obj.a - b * obj.b, a * obj.b + b * obj.a);\n    }\n} inv[N], omg[N];\n\nvoid init(int n){\n    for(int i = 0; i < n; i++){\n\tomg[i] = cp(cos(2 * PI / n * i), sin(2 * PI / n * i));\n\tinv[i] = cp(omg[i].a, -omg[i].b);\n    }\n}\nvoid fft(cp *a, int n, cp *omg){\n    int lim = 0;\n    while((1 << lim) < n) lim++;\n    for(int i = 0; i < n; i++){\n\tint t = 0;\n\tfor(int j = 0; j < lim; j++)\n\t    if(i >> j & 1) t |= 1 << (lim - j - 1);\n\tif(i < t) swap(a[i], a[t]);\n    }\n    for(int l = 2; l <= n; l <<= 1){\n\tint m = l / 2;\n\tfor(cp *p = a; p != a + n; p += l)\n\t    for(int i = 0; i < m; i++){\n\t\tcp t = omg[n / l * i] * p[i + m];\n\t\tp[i + m] = p[i] - t;\n\t\tp[i] = p[i] + t;\n\t    }\n    }\n}\n\nstruct big {\n    int g[N], len;\n    big(){\n\tmemset(g, 0, sizeof(g));\n\tlen = 1;\n    }\n    big(int x){\n\tmemset(g, 0, sizeof(g));\n\tlen = 0;\n\tif(!x){\n\t    len = 1;\n\t    return;\n\t}\n\twhile(x) g[len++] = x % 10, x /= 10;\n    }\n    void out(){\n\tfor(int i = len - 1; i >= 0; i--)\n\t    printf(\"%d\", g[i]);\n\tenter;\n    }\n    void operator /= (int x){\n\tint sum = 0, newlen = 0;\n\tfor(int i = len - 1; i >= 0; i--){\n\t    sum = sum * 10 + g[i];\n\t    if(sum < x) g[i] = 0;\n\t    else{\n\t\tif(!newlen) newlen = i + 1;\n\t\tg[i] = sum / x;\n\t\tsum %= x;\n\t    }\n\t}\n\tlen = max(newlen, 1);\n    }\n    void operator *= (const big &b){\n\tstatic cp A[N], B[N];\n\tint newlen = len + b.len - 1, n = 1;\n\twhile(n < newlen) n <<= 1;\n\tfor(int i = 0; i < n; i++){\n\t    A[i] = cp(i < len ? g[i] : 0, 0);\n\t    B[i] = cp(i < b.len ? b.g[i] : 0, 0);\n\t}\n\tinit(n);\n\tfft(A, n, omg);\n\tfft(B, n, omg);\n\tfor(int i = 0; i < n; i++)\n\t    A[i] = A[i] * B[i];\n\tfft(A, n, inv);\n\tfor(int i = 0; i < newlen; i++)\n\t    g[i] = (int)floor(A[i].a / n + 0.5);\n\tg[len = newlen] = 0;\n\tfor(int i = 0; i < len; i++)\n\t    g[i + 1] += g[i] / 10, g[i] %= 10;\n\tif(g[len]) len++; \n    }\n} ret, a;\n\nint main(){\n\n    read(T);\n    while(T--){\n\tread(x), x++;\n\tret = big(1), a = big(2);\n\twhile(x){\n\t    if(x & 1) ret *= a;\n\t    a *= a;\n\t    x >>= 1;\n\t}\n\tret /= 3;\n\tret.out();\n    }\n\n    return 0;\n}\n```",
        "postTime": 1524222657,
        "uid": 8947,
        "name": "RabbitHu",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "\n\u5982\u679c\u60a8\u8981copy\uff0c\u800c\u4e14\u4e0d\u6015\u53d8\u68d5\uff0c\u8bf7\u76f4\u63a5\u590d\u5236\u8d70\u4eba\u3002\n```\nfor i in range(int(input())):\n    print(pow(2,int(input())+1)//3)\n```\n```\n\u4ee5\u4e0b\u662fda32s1da\u7684\u60f3\u6cd5\u3002\nWA!\u8fd9\u9898\u600e\u4e48\u505a\u554a\uff1f\uff1f\uff1f\n\u4e0d\u77e5\u9053\u3002\u3002\u3002\u3002\n\u5148\u770b\u770b\u6837\u4f8b\u5427\uff0c\u8bd5\u7740\u9a97\u70b9\u5206\u3002\n\u55ef\u3002\u3002\u3002\u3002\nf[3]=5\nf[5]=21\nf[9]=341\n\u4f3c\u4e4e\uff0c\u6ca1\u6709\u4ec0\u4e48\u89c4\u5f8b\u3002\u3002\u3002\u5417\uff1f\nf[3]*3=5*3=15\nf[5]*3=21*3=63\nf[9]*3=341*3=1023\n\u55ef\uff0c\u8fd8\u662f\u627e\u4e0d\u51fa\u89c4\u5f8b\u3002\u3002\u3002\u624d\u602a\n\u6240\u4ee5da32s1da\u5f88\u5feb\u7684\u6253\u51fa\u4e86\u4e00\u4e2aksm\n```\n```\n#include<cstdio>\nlong long n,m,p,q;\nint main(){\n    scanf(\"%lld\",&n);\n    for(int i=1;i<=n;i++){\n    \tscanf(\"%lld\",&m);p=1;q=2;m++;\n    \twhile(m){\n    \t\tif(m&1) p=(p*q);\n    \t\tq=(q*q);m>>=1;\n        }\n        printf(\"%lld\\n\",p/3);\n    }\n} \n```\n\u7136\u800c\u53ea\u80fd\u5f97**30**\u5206\u3002\n```\n\u849f\u84bbda32s1da\uff1a\u5b8c\u86cb\u4e86\uff0c\u9ad8\u7cbe\u5ea6\u4e0d\u4f1a\u3002\n10\u5206\u949f\u540e\u2026\u2026\n```\n\n```\n//\u9ed1\u79d1\u6280~~~~\n#include<sstream>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\nint n,m,v,c;\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n    \tscanf(\"%d\",&m);\n    \tstringstream s;\n        s.precision(0);\n        s<<fixed<<pow(2.0L,m+1);\n        string ss=s.str();\n        v=ss.length();\n        if(ss[0]>='3') printf(\"%d\",(ss[0]-48)/3);\n        c=(ss[0]-48)%3;\n        for(int i=1;i<v;i++){\n        \tc=c*10+ss[i]-48;\n        \tprintf(\"%d\",c/3);c%=3;\n        }puts(\"\");\n    }\n    return 0;\n}\n```\n\u8fd9\u6837\u80fd\u5f97**50**\u5206\uff01\n```\n\u8fd9\u65f6da32s1da\u7a81\u7136\u60f3\u8d77\u4e86\u9ad8\u7cbe\uff01\uff01\uff01\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#define N 30200  //2^100000\u6b21\u65b9\u5927\u698230100\u4f4d\u5de6\u53f3\n#define M 33554432  //2^25\u6b21\u65b9\nusing namespace std;\nint n,m,t,num;\nint s[N+1];\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n    \tscanf(\"%d\",&m);m++;\n    \tmemset(s,0,sizeof(s));\n    \tint p=m/25,j;s[N]=1;num=N;\n    \t//\u8fd9\u91cc\u7b80\u5316\u4e00\u4e0b\uff0c\u4e00\u6b21\u4e582^25\u6b21\u65b9\n    \twhile(p--){\n        \tfor(j=num;j<=N;j++) s[j]*=M;\n        \tfor(j=N;j>=num;j--)\n        \ts[j-1]+=s[j]/10,s[j]%=10;num--;\n        \twhile(s[num]) s[num-1]=s[num]/10,s[num]%=10,num--;\n        \tnum++; //\u8ba1\u7b97\u4f4d\u6570\n        }\n        \n    \tp=1<<(m%25);  //\u4e58\u4e0a\u5269\u4f59\n    \tfor(j=num;j<=N;j++) s[j]*=p;\n        for(j=N;j>=num;j--)\n        s[j-1]+=s[j]/10,s[j]%=10;num--;\n        while(s[num]) s[num-1]=s[num]/10,s[num]%=10,num--;\n        num++; //\u8ba1\u7b97\u4f4d\u6570\n        \n        if(s[num]>=3) printf(\"%d\",s[num]/3);\n        int c=s[num]%3;\n        for(j=num+1;j<=N;j++){\n        \tc=c*10+s[j];\n        \tprintf(\"%d\",c/3);c%=3;\n        }puts(\"\"); //\u8f93\u51fa\n    }\n    return 0;\n}\n```\n\u8fd9\u6837\u5c31\u80fd\u8fbe\u5230**100**\u5206\u5566\uff01\u800c\u4e14\u5185\u5b58**1.8MB**\u5de6\u53f3\uff01\n\n\u5e0c\u671b\u4ee5\u4e0a\u80fd\u5e2e\u52a9\u5230\u5927\u5bb6\uff0c\u6700\u540e\u2026\u2026\u2026\u2026\n\n# \u62d2\u7edd\u6284\u88ad!",
        "postTime": 1524054453,
        "uid": 50092,
        "name": "da32s1da",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "\u6253\u8868\u6216\u4ed4\u7ec6\u7814\u7a76\u6837\u4f8b$\\frac{2^{i+1}}{3}$\n\n\u6709\u6570\u7ec4$dp[i]$\u8868\u62c6\u4e0b$i$\u8fde\u73af\u7684\u6b65\u6570\n\n\u56db\u8fde\u73af$(4,3,2,1)$\u4e0e\u4e09\u8fde\u73af$(3,2,1)$\u7684\u533a\u522b\u5728\u4e8e\u6700\u5de6\u8fb9\u65b0\u52a0\u5165\u4e86\u4e00\u4e2a\uff0c\u5219\u62c6\u4e0b\u56db\u8fde\u73af\u7684\u6b65\u6570=\u62c6\u4e0b\u4e24\u8fde\u73af$(4,3,0,0)$+\u62c6\u4e0b\u6700\u5de6\u8fb9\u7684\u4e00\u4e2a$(0,3,0,0)$\uff0c\u6b64\u65f6\u867d\u7136\u4ec5\u5269\u4e00\u4e2a\uff0c\u4f46\u6839\u636e\u4e5d\u8fde\u73af\u89c4\u5219\uff0c\u8981\u62c6\u4e0b\u8fd9\u4e00\u73af\uff1a$(0,3,0,1)->(0,3,2,1)->(0,3,2,0)->(0,0,2,0)$\n\u4e2d\u95f4\u5f97\u628a\u4e09\u8fde\u73af\u91cd\u65b0\u88c5\u4e0a\u518d\u62c6\u4e0b\u6765\n\n\u6211\u4eec\u5f97\u51fa\uff1a$dp[4]=dp[2]+1+dp[2]+dp[3]$\n\n\u6269\u5c55\u5230\u5176\u4ed6\u4e5f\u662f\u540c\n\u4e00\u505a\u6cd5\uff1a$dp[n]=2*dp[n-2]+1+dp[n-3]$\n\n$1,2,5,10,21,42,85......$\n\n$1,10,101,1010,10101,101010,1010101$\n\n$1$\u548c$0$\u662f\u4e0d\u76f8\u90bb\u7684\uff0c\u60f3\u5230\u4e8c\u8fdb\u5236\u4e58\u6cd5\uff0c\u8ba9\u4e2d\u95f4\u7684$0$\u53d8\u6210$1$\n$\\begin{aligned} 1010101\\\\\u00d711\\\\1010101\\\\1010101~~\\\\11111111\\\\(2^{7+1}-1)/3\\end{aligned}$$\n\n$\\begin{aligned} 101010\\\\\u00d711\\\\101010\\\\101010~~\\\\1111110\\\\(2^{6+1}-2)/3\\end{aligned}$$\n\n\u6269\u5c55\u4e00\u4e0b\uff0c\u5f97\u51fa\u7b54\u6848\uff1a$$\\frac{2^{i+1}}{3}$$\n\n$n<=10^5$\u663e\u7136\u8981\u9ad8\u7cbe\uff0c\u76f4\u63a5\u66b4\u529b\u80af\u5b9a\u4f1a\u8d85\u65f6\uff0c\u8fd9\u91cc\u7528$FFT$\u4f18\u5316\u4e00\u4e0b\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<iostream>\n#include<cstring>\n#include<cmath>\nusing namespace std;\ntypedef long long LL;\nconst int maxn=70000;\nconst double PI=acos(-1.0);\nstruct complex{\n    double x,y;\n    complex(double xx=0,double yy=0){\n        x=xx,y=yy;\n    }\n}a[maxn],b[maxn];\ncomplex operator + (complex x,complex y){\n    return complex(x.x + y.x, x.y + y.y);\n}\ncomplex operator - (complex x,complex y){\n    return complex(x.x - y.x, x.y - y.y);\n}\ncomplex operator * (complex x,complex y){\n    return complex(x.x * y.x - x.y * y.y , x.y * y.x + x.x * y.y);\n}\ninline void FFT(complex *A,int *r,int limit,int type){\n    for(int i=0;i<limit;++i)\n        if(i<r[i])\n            swap(A[i],A[r[i]]);\n    for(int mid=1;mid<limit;mid<<=1){\n        complex WN( cos(PI/mid) , type*sin(PI/mid) );\n        for(int R=mid<<1,j=0;j<limit;j+=R){\n            complex w(1,0);\n            for(int k=0;k<mid;++k,w=w*WN){\n                complex x=A[j+k],y=w*A[j+mid+k];\n                A[j+k]=x+y,\n                A[j+mid+k]=x-y;\n            }\n        }\n    }\n}\nstruct big{\n    int g[maxn],len;\n    big(){\n        memset(g,0,sizeof(g)),\n        len=1;\n    }\n    big(int x){\n        memset(g,0,sizeof(g)),\n        len=0;\n        if(!x){\n            len=1;\n            return;\n        }\n        while(x){\n            g[len++]=x%10,\n            x/=10;\n        }\n    }\n    void operator *=(const big &b){\n        static complex A[maxn],B[maxn];\n        int newlen=len+b.len,limit=1,L=0;\n        while(limit<newlen)\n            limit<<=1,\n            ++L;\n        for(int i=0;i<limit;++i)\n            A[i]=complex(i<len?g[i]:0,0),\n            B[i]=complex(i<b.len?b.g[i]:0,0);\n        int r[20];r[0]=0;\n        for(int i=0;i<limit;++i)\n            r[i]=(r[i>>1]>>1)|((i&1)<<(L-1));\n        FFT(A,r,limit,1),\n        FFT(B,r,limit,1);\n        \n        for(int i=0;i<limit;++i)\n            A[i]=A[i]*B[i];\n            \n        FFT(A,r,limit,-1);\n        int ans[maxn];\n        for(int i=0;i<limit;++i)\n            ans[i]=(int)(A[i].x/limit+0.5);\n        \n        for(int i=0;i<limit;++i)\n            if(ans[i]>9)\n                ans[i+1]+=ans[i]/10,\n                ans[i]%=10;\n        \n        --limit;\n        while(limit>0&&ans[limit]==0)\n            --limit;\n        len=++limit;\n        for(int i=0;i<limit;++i)\n            g[i]=ans[i];\n    }\n    void operator /= (int x){\n        int sum=0,newlen=0;\n        for(int i=len-1;i>= 0;--i){\n            sum=sum*10+g[i];\n            if(sum<x) \n                g[i]=0;\n            else{\n                if(!newlen) \n                    newlen=i+1;\n                g[i]=sum/x,\n                sum%=x;\n            }\n        }\n        len=max(newlen,1);\n    }\n    void Out(){\n        for(int i=len-1;i>=0;--i)\n            printf(\"%d\",g[i]);\n        printf(\"\\n\");\n    }\n}ret,base;\nint main(){\n    int T;\n    scanf(\"%d\",&T);\n    while(T--){\n        int n;\n        scanf(\"%d\",&n);\n        ++n,\n        ret=big(1),base=big(2);\n        while(n){\n            if(n&1)\n                ret*=base;\n            base*=base,\n            n>>=1;\n        }\n        ret/=3,\n        ret.Out();\n    }\n    return 0;\n}/*\n*/ \n```",
        "postTime": 1547190356,
        "uid": 88804,
        "name": "y2823774827y",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "\u53e6\u5916\u4e24\u7bc7\u9898\u89e3\u4e2d\u90fd\u7ed9\u51fa\u4e86\u6b64\u9898\u7684\u901a\u9879\u516c\u5f0f,\u4f46\u5bf9\u516c\u5f0f\u7684\u5206\u6790\u8fc7\u7a0b\u7a0d\u7565.\u8fd9\u91cc\u6211\u5c31\u7b80\u8981\u8bf4\u4e00\u4e0b\u5176\u4e2d\u7684\u601d\u8def\u4e0e\u8fc7\u7a0b.(\u6bd5\u7adf\u6211\u53ea\u662f\u4e2a\u521d\u4e09\u849f\u84bb\u554a)\n\n\n\u9996\u5148\u6211\u4eec\u662f\u53ef\u4ee5\u901a\u8fc7\u5206\u6790\u9898\u9762\u4e2d\u89e3\u56db\u8fde\u73af\u7684\u601d\u8def\u6765\u5f97\u5230\u542f\u793a\u7684.\n\n\n\n\n------------\n\n _\u521d\u59cb\u72b6\u6001\u4e3a1111,\u6bcf\u6b65\u7684\u64cd\u4f5c\u5982\u4e0b:_ \n\n\n   _1.1101 (\u6839\u636e\u89c4\u52192,\u5378\u4e0b\u7b2c2 \u4e2a\u73af)_ \n\n   _2.1100 (\u6839\u636e\u89c4\u52191,\u5378\u4e0b\u7b2c1 \u4e2a\u73af)_ \n\n   _3.0100 (\u6839\u636e\u89c4\u52192,\u5378\u4e0b\u7b2c4 \u4e2a\u73af)_ \n\n   _4.0101 (\u6839\u636e\u89c4\u52191,\u88c5\u4e0a\u7b2c1 \u4e2a\u73af)_ \n\n   _5.0111 (\u6839\u636e\u89c4\u52192,\u88c5\u4e0a\u7b2c2 \u4e2a\u73af)_ \n\n   _6.0110 (\u6839\u636e\u89c4\u52191,\u5378\u4e0b\u7b2c1 \u4e2a\u73af)_ \n\n   _7.0010 (\u6839\u636e\u89c4\u52192,\u5378\u4e0b\u7b2c3 \u4e2a\u73af)_ \n\n   _8.0011 (\u6839\u636e\u89c4\u52191,\u88c5\u4e0a\u7b2c1 \u4e2a\u73af)_ \n\n   _9.0001 (\u6839\u636e\u89c4\u52192,\u5378\u4e0b\u7b2c2 \u4e2a\u73af)_ \n\n   _10.0000 (\u6839\u636e\u89c4\u52191,\u5378\u4e0b\u7b2c1 \u4e2a\u73af)_ \n\n\n\n------------\n\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u5230,**\u4ece\u7b2c1\u6b65\u5230\u7b2c5\u6b65,\u5b9e\u9645\u4e0a\u6700\u7ec8\u6548\u679c\u5c31\u53d8\u6210\u4e86\u53bb\u89e33\u8fde\u73af.**\u56e0\u4e3a\u5c06\u6700\u540e\u4e00\u4e2a\u73af\u5378\u4e0b\u540e,\u524d\u9762\u7684\u73af\u5378\u4e0b/\u88c5\u4e0a\u90fd\u53ea\u53d6\u51b3\u4e8e\u5728\u5b83\u524d\u9762\u73af\u7684\u72b6\u6001,\u4e0e\u6700\u540e\u4e00\u4e2a\u73af\u65e0\u5173.\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u4e0d\u7ba1\u6700\u540e\u4e00\u4e2a\u73af\u4e86,\u95ee\u9898\u4ece\u89e34\u8fde\u73af\u8f6c\u5316\u6210\u4e86\u89e33\u8fde\u73af.\n\n\n------------\n\u81f3\u6b64,\u6211\u4eec\u5df2\u5bb9\u6613\u60f3\u5230,\u5c06\u89e3N\u8fde\u73af\u7684\u95ee\u9898\u8f6c\u5316\u4e3a\u89e3N-1\u8fde\u73af,\u9012\u5f52\u5904\u7406\u5f97\u51fa\u7b54\u6848.\u53ef\u662f,**\u4eceN\u8fde\u73af\u5230N-1\u8fde\u73af,\u9700\u8981\u591a\u5c11\u6b65\u5462?**\u6211\u4eec\u53ea\u8981\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898,\u6574\u4e2a\u95ee\u9898\u4e5f\u5c31\u89e3\u51b3\u4e86.\n\n\n------------\n#### \u63a5\u4e0b\u6765\u6211\u4eec\u89e3\u51b3\u4eceN\u73af\u5230N-1\u8fde\u73af\u9700\u8981\u7684\u6b65\u6570.\n\u6b64\u65f6,\u6211\u4eec\u518d\u53bb\u770b\u9898\u9762\u4e2d\u56db\u8fde\u73af\u7684\u89e3\u51b3\u8fc7\u7a0b,\u4ecd\u770b\u7b2c\u4e00\u6b65\u81f3\u7b2c\u4e94\u6b65.\u7531\u89c4\u52192\u6613\u77e5,\u4e3a\u4e86\u53d6\u4e0b\u7b2cn\u4e2a\u73af,\u6211\u4eec\u9700\u8981\u5728\u4fdd\u6301\u7b2cn-1\u4e2a\u73af\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b(\u56e0\u4e3a\u4f60\u52a8\u5b83\u5bf9\u524d\u9762n-2\u4e2a\u73af\u6ca1\u6709\u5f71\u54cd),**\u5c06\u524d\u9762\u7684n-2\u4e2a\u73af\u5168\u90e8\u53d6\u4e0b.**,\u5373\u9898\u9762\u4e2d\u7b2c2\u6b65\u540e\u7684\u6548\u679c.\n###  \u7b49\u7b49!\n\u4ec0\u4e48\u53eb\u505a\u5c06\u524d\u9762\u7684n-2\u4e2a\u73af\u5168\u90e8\u53d6\u4e0b?**\u8fd9\u4e0d\u5c31\u662f\u89e3n-2\u8fde\u73af\u5417?**\n\u6211\u4eec\u518d\u6765\u770b\u89e3\u6389\u524d\u9762n-2\u8fde\u73af\u4e4b\u540e\u5e94\u8be5\u5982\u4f55\u64cd\u4f5c.\u6b64\u65f6\u5df2\u7ecf\u7b26\u5408\u4e86\u89c4\u52192\u7684\u8981\u6c42,\u6211\u4eec\u75281\u6b65\u5378\u4e0b\u7b2cn\u4e2a\u73af,\u81f3\u6b64\u72b6\u6001\u53d8\u6210\u4ec5\u6709\u7b2cn-1\u4e2a\u73af\u5728\u5251\u4e0a,\u5373\u9898\u9762\u4e2d\u7b2c3\u6b65\u540e\u7684\u6548\u679c.\u6211\u4eec\u518d\u770b\u9898\u9762,\u53ef\u4ee5\u5f97\u77e5\u63a5\u4e0b\u6765\u5e94\u8be5\u5c06\u540e\u9762\u7684n-2\u8fde\u73af\u5168\u90e8\u88c5\u4e0a\u53bb,\u5c31\u8fbe\u5230\u4e86\u5378\u4e0b\u4e86\u7b2cn\u4e2a\u73af,\u8f6c\u79fb\u5230n-1\u8fde\u73af\u7684\u76ee\u7684.\n### \u6b64\u65f6\u6574\u4e2a\u8fc7\u7a0b\u5df2\u7ecf\u660e\u6670,\u5373\u8981\u89e3n\u8fde\u73af,\u5148\u89e3n-2\u8fde\u73af,\u518d\u4e0b\u7b2cn\u4e2a\u73af,\u518d\u4e0an-2\u8fde\u73af,\u518d\u89e3n-1\u8fde\u73af,\u662f\u4e00\u4e2a\u9012\u5f52\u7684\u8fc7\u7a0b.\n\n\n------------\n\n#### \u90a3\u4e48\u6211\u4eec\u53ea\u5269\u4e0b\u6700\u540e\u4e00\u4e2a\u95ee\u9898,\u5982\u4f55\u88c5\u4e0an-2\u8fde\u73af?\n**\u8981\u88c5\u4e0an-2\u8fde\u73af,\u5c31\u5148\u5c06\u7b2cn-3\u4e2a\u73af\u88c5\u4e0a,\u5373\u88c5\u4e0an-3\u8fde\u73af\u540e,\u88c5\u4e0a\u7b2cn-2\u4e2a\u73af,\u53c8\u5378\u4e0bn-4\u8fde\u73af,\u518d\u4e0an-3\u8fde\u73af.**\n\u7b49\u7b49,\u8fd9\u8fc7\u7a0b\u662f\u4e0d\u662f\u6709\u4e9b\u773c\u719f?\u6211\u4eec\u524d\u9762\u5378\u73af\u7684\u64cd\u4f5c**\"\u8981\u89e3n\u8fde\u73af,\u5148\u89e3n-2\u8fde\u73af,\u518d\u4e0b\u7b2cn\u4e2a\u73af,\u518d\u4e0an-2\u8fde\u73af,\u518d\u89e3n-1\u8fde\u73af\"** \u8ddf\u8fd9\u4e2a\u4e0a\u73af\u7684\u64cd\u4f5c\u4e00\u4e00\u5bf9\u5e94,\u4e14\u6070\u597d\u76f8\u53cd!\u53c8\u56e0\u4e3a\u4e0a1\u8fde\u73af\u548c\u89e31\u8fde\u73af\u662f\u4e92\u9006\u7684,\u90fd\u53ea\u9700\u4e00\u6b65,\u6240\u4ee5\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u5341\u5206\u5173\u952e\u7684\u6027\u8d28:**\u4e0an-2\u8fde\u73af\u7684\u8fc7\u7a0b\u4e0e\u89e3n-2\u8fde\u73af\u7684\u8fc7\u7a0b\u662f\u4e92\u9006\u7684!**\n \n\n------------\n\n\u81f3\u6b64,\u6574\u4e2a\u95ee\u9898\u5df2\u7ecf\u89e3\u51b3.\u524d\u9762\u8bf4\u7684\"\u518d\u4e0an-2\u8fde\u73af\"\u7684\u6b65\u6570\u5c31\u7b49\u4e8e\u89e3n-2\u8fde\u73af\u7684\u6b65\u6570.\u518d\u56de\u5230\n#### \"\u8981\u89e3n\u8fde\u73af,\u5148\u89e3n-2\u8fde\u73af,\u518d\u4e0b\u7b2cn\u4e2a\u73af,\u518d\u4e0an-2\u8fde\u73af,\u518d\u89e3n-1\u8fde\u73af\".\u7684\u601d\u8def.\n\u6211\u4eec\u7528f(n)\u6765\u8868\u793a\u89e3n\u8fde\u73af\u6240\u9700\u7684\u6b65\u6570,\u521d\u59cb\u6613\u5f97\u6709f(1)=1,f(2)=2,\u9012\u63a8\u5f0f\u6709**f(n)**=f(n-2)+1+f(n-2)+f(n-1)=**2f(n-2)+f(n-1)+1**.\u5b66\u8fc7\u7ebf\u4ee3\u7684\u540c\u5b66\u5728\u8fd9\u91cc\u9002\u52a0\u64cd\u4f5c\u5c31\u53ef\u4ee5\u5f97\u5230f(n)\u7684\u901a\u9879\u516c\u5f0f,\u800c\u5982\u679c\u4e0d\u77e5\u9053\u901a\u9879\u516c\u5f0f\u7684\u6c42\u6cd5,\u81ea\u5df1\u6253\u8868\u627e\u4e00\u4e0b\u89c4\u5f8b(\u6216\u8bb8)\u5c31\u53ef\u4ee5\u5f97\u51fa.\n\nf(n)=1/6 (-3 + (-1)^(1 + n) + 2^(2 + n)).\n\n\n\u7b80\u8981\u5199\u51fa\u6765\u5c31\u662f**floor(2^(n+1)/3)**,\u63a5\u4e0b\u6765\u662f\u9ad8\u7cbe\u5ea6\u7684\u5b9e\u73b0\u8fd9\u91cc\u5c31\u4e0d\u518d\u5c55\u5f00\u8bf4\u660e\u4e86.\n\n_(PS:\u56e0\u4e3a\u8981\u7528\u9ad8\u7cbe\u5ea6,\u6ca1\u6709\u8bd5\u8fc7\u76f4\u63a5\u57fa\u4e8e\u9012\u63a8\u516c\u5f0f\u6765\u505a\u7684\u65b9\u6cd5,\u53ef\u80fd\u8981\u70b8\u7a7a\u95f4,\u51b5\u4e14\u4e3a\u4e86\u5361\u8fdb\u65f6\u95f4\u8fd8\u8981\u7528\u5230\u77e9\u9635\u52a0\u901f,\u7ec4\u5408\u8d77\u6765\u4ee3\u7801\u5341\u5206\u590d\u6742)_ \n\n\n---------\nConclusion:\u6b64\u9898\u6765\u6e90\u4e8e\u6211\u56fd\u53e4\u4ee3\u7684\u4e00\u4e2a\u76ca\u667a\u6e38\u620f,\u4e0d\u4ec5\u662f\u6700\u540e\u7684\u7b54\u6848\u662f\u9012\u5f52\u7684\u65b9\u5f0f,\u89e3\u9898\u8fc7\u7a0b\u4e2d\u7684\u5206\u6790\u4e5f\u662f\u901a\u8fc7\u9012\u5f52\u601d\u60f3,\u9010\u6b65\u89e3\u51b3\u95ee\u9898(\u53e4\u4eba\u7684\u667a\u6167).\n\n\n------------\nPS:python\u5927\u6cd5\u597d\n\n\nimport sys \n\nf=[0 for x in range(100010)]\n\nif True :\n\n    f[1]=1\n    f[2]=2\n    for i in range(3,100010):\n        f[i]=2*f[i-2]+f[i-1]+1\n    for i in range(int(input())):\n        print(f[input()])\n        \n\n------------",
        "postTime": 1526277509,
        "uid": 30402,
        "name": "jklover",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P4461)\n\n---\n\n**\u3010\u5206\u6790\u3011**\n---\n\n\u8bbe $f_n$ \u8868\u793a\u5c06\u524d $n$ \u4e2a\u73af\u65f6\uff0c\u62ff\u4e0b\u6765\u7684\u6700\u5c11\u6b65\u6570\n\n\u4e0d\u96be\u60f3\u5230\uff0c\u5c06\u8be5\u8fc7\u7a0b\u5012\u8fc7\u6765\uff0c\u5c31\u662f\u653e\u7f6e\u524d $n$ \u4e2a\u73af\u7684\u6700\u5c11\u6b65\u6570\n\n\u5229\u7528\u7c7b\u4f3c\u6c49\u8bfa\u5854\u7684\u601d\u60f3\uff0c\u4e0d\u96be\u60f3\u5230\uff1a\n\n\u7b2c\u4e00\u6b65\u662f\u53d6\u4e0b\u524d $(n-2)$ \u4e2a\uff0c\u7136\u540e\u53d6\u4e0b\u7b2c $n$ \u4e2a\uff0c\u518d\u5c06\u524d $(n-2)$ \u4e2a\u653e\u56de\u53bb\uff0c\u518d\u5c06\u5269\u4e0b\u7684 $(n-1)$ \u4e2a\u53d6\u8d70\n\n\u56e0\u6b64\u6709 $f_n=f_{n-2}+1+f_{n-2}+f_{n-1}=f_{n-1}+2f_{n-2}+1$\n\n\u9012\u63a8\u8fb9\u754c\u662f $f_1=1,f_2=2$\n\n\u89e3\u9012\u63a8\u65b9\u7a0b\u4e0d\u96be\u5f97\u5230\uff1a$\\displaystyle f_n={1\\over 6}[2^{n+2}+(-1)^{n+1}-3]=\\begin{cases}\n{1\\over 3}(2^{n+1}-1),n\\&1\n\\\\\n{1\\over 3}(2^{n+1}-2),n+1\\&1\n\\end{cases}$\n\n\u7136\u540e ACM \u662f\u5141\u8bb8 Java \u7684\uff08\u563f\u563f\u563f\uff09\n\n---\n\n**\u3010\u4ee3\u7801\u3011**\n---\n\n```java\nimport java.util.*;\nimport java.math.BigInteger;\npublic class Main{\n    public static BigInteger one=BigInteger.valueOf(1), two=BigInteger.valueOf(2), three=BigInteger.valueOf(3);\n    public static BigInteger pow2(int x){\n        BigInteger ans=one,a=two;\n        for(;x!=0;x>>=1,a=a.multiply(a))\n            if((x&1)==1) ans=ans.multiply(a);\n        return ans;\n    }\n    public static void main(String args[]){\n        Scanner cin=new Scanner(System.in);\n        int m=cin.nextInt(),n;\n        for(int i=1;i<=m;++i){\n            n=cin.nextInt();\n            if((n&1)==1) System.out.println( pow2(n+1).subtract(one).divide(three) );\n            else System.out.println( pow2(n+1).subtract(two).divide(three) );\n        }\n        cin.close();\n    }\n}\n```",
        "postTime": 1615368309,
        "uid": 36031,
        "name": "JustinRochester",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4461 [CQOI2018]\u4e5d\u8fde\u73af"
    },
    {
        "content": "\u4e00\u4e2a\u65e0\u8111\u7684 GF \u505a\u6cd5\u3002\n\n\u8bbe $n$ \u7684\u7b54\u6848\u4e3a $f_n$\u3002\n\n\u663e\u7136\u6211\u4eec\u6bcf\u6b21\u8981\u5148\u53d6\u4e0b\u6700\u540e\u4e00\u4e2a\u73af\u624d\u80fd\u8fdb\u884c\u540e\u9762\u7684\u64cd\u4f5c\u3002\n\n\u800c\u4e14\u53d6\u4e0b\u524d $n$ \u4e2a\u73af\u7684\u7b54\u6848\u548c\u52a0\u4e0a $n$ \u4e2a\u73af\u7684\u7b54\u6848\u76f8\u540c\u3002\n\n\u4e8e\u662f\u6211\u4eec\u6bcf\u6b21\u5148\u53d6\u4e0b $n-2$ \u4e2a\u73af\uff0c\u518d\u53d6\u6700\u540e\u4e00\u4e2a\uff0c\u518d\u88c5\u4e0a $n-2$ \u4e2a\u73af\uff0c\u8f6c\u5316\u4e3a $f_{n-1}$ \u7684\u60c5\u51b5\u3002\n\n$$ f_n = f_{n - 1} + 2f_{n - 2} + 1,n\\ge 2 $$\n\n$f_1 = 1, f_0 = 0$\u3002\n\n\u663e\u7136\u6ca1\u6709\u8fd9\u4e48\u7b80\u5355\uff0c\u56e0\u4e3a $n\\le 10^5$\uff0c\u8981\u5199\u9ad8\u7cbe\u3002\n\n\u5217\u4e3e\u524d\u82e5\u5e72\u9879\u540e\u53d1\u73b0\u4f3c\u4e4e\u6709 $f_n = 2f_{n-1} + [2\\not|n]$\n\n\u8003\u8651\u8bc1\u660e\u3002 $f_1 = 2f_0 + 1$\uff0c\u5f53 $n>1$ \u65f6\uff0c\n\n$2|n$\uff0c$f_n = f_{n-1} + 2f_{n-2}+1 = f_{n-1}+(f_{n-1}-1)+1$\n\n$2\\not|n$\uff0c$f_n = f_{n-1} + 2f_{n-2}+1 = f_{n-1}+f_{n-1}+1$\n\n\u4e8e\u662f\u53ef\u4ee5\u4f30\u7b97\u4f4d\u6570\uff0c\u6c49\u8bfa\u5854 $h_n = 2h_{n-1}+1\\ge f_n$\uff0c\u4e14 $h_n = 2^n-1$\uff0c\n\n\u5219\u4f4d\u6570\u7ea6\u4e3a $B = \\lg(2^{10^5})\\approx 3\\times 10^4$\u3002\n\n\u6734\u7d20\u9012\u63a8\u9ad8\u7cbe $\\mathcal O(mnB)$\uff0c\u65f6\u95f4\u65e0\u6cd5\u627f\u53d7\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c1d\u8bd5\u6c42\u901a\u9879\u3002\n\n$$ \\begin{aligned}\nF(x) &= f_0x^0 + f_1x^1 + f_2x^2\\cdots \\\\\n2xF(x) &= 2f_0x^1 + 2f_1x^2 + 2f_2x^3\\cdots \\\\\n(1-2x)F(x) &= x^1 + x^3 + x^5\\cdots \\\\\nx^2(1-2x)F(x) &= x^3 + x^5 + x^7\\cdots \\\\\n(1-x^2)(1-2x)F(x) &= x \\\\\n\\end{aligned} $$\n\n$$ F(x) = \\dfrac{x}{(1-x)(1+x)(1-2x)}$$\n\n\u731c\u6d4b\u5176\u4e3a $\\dfrac{a}{1-x}$\uff0c$\\dfrac{b}{1+x}$ \u548c $\\dfrac{c}{1-2x}$ \u7684\u548c\uff0c$a,b,c$ \u662f\u5e38\u6570\u3002\n\n\u4e8e\u662f\u53ef\u4ee5\u89e3\u5f97 $a = -\\dfrac{1}{2},b = -\\dfrac{1}{6}, c = \\dfrac{2}{3}$\u3002\n\n$$ \\begin{aligned}\nF(x) &= \\dfrac{a}{1-x} + \\dfrac{b}{1+x} + \\dfrac{c}{1-2x} \\\\\n&= \\sum_{n\\ge 0}-\\dfrac{1}{2}x^n - \\dfrac{1}{6}(-1)^nx^n + \\dfrac{2}{3}2^nx^n\n\\end{aligned} $$\n\n$$ f_n = \\dfrac{-3-(-1)^n+2^{n+2}}{6} $$\n\n\u73b0\u5728\u8981\u7b97 $2^{n+2}$\u3002\u53ef\u4ee5\u76f4\u63a5\u7528 NTT \u500d\u589e\u7b97\u3002\n\n\u65f6\u95f4 $\\mathcal{O}(mB\\log B\\log n)$\u3002\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n\nconst int N = 200001;\nconst int p = 998244353;\n\ninline int read() {\n\tint x = 0, f = 1; char ch = getchar();\n\twhile(ch > '9' || ch < '0') { if(ch == '-') f = -1; ch = getchar(); }\n\tdo x = x * 10 + ch - 48, ch = getchar(); while(ch >= '0' && ch <= '9');\n\treturn x * f;\n}\n\ninline int fastpow(int a,int b) {\n\tint res = 1;\n\twhile(b) {\n\t\tif(b & 1) res = 1ll * res * a % p;\n\t\ta = 1ll * a * a % p;\n\t\tb >>= 1;\n\t}\n\treturn res;\n}\n\nint r[N];\n\nvoid NTT(int *a,int N) {\n\tfor(int i = 0;i < N;i++) if(r[i] > i) std::swap(a[i],a[r[i]]);\n\tfor(int n = 2, m = 1;n <= N;m = n, n <<= 1) {\n\t\tint g1 = fastpow(3,(p - 1) / n);\n\t\tfor(int l = 0;l < N;l += n) {\n\t\t\tint g = 1;\n\t\t\tfor(int i = l;i < l + m;i++) {\n\t\t\t\tint t1 = a[i], t2 = 1ll * a[i + m] * g % p;\n\t\t\t\ta[i] = (t1 + t2) % p;\n\t\t\t\ta[i + m] = (t1 - t2 + p) % p;\n\t\t\t\tg = 1ll * g * g1 % p;\n\t\t\t}\n\t\t}\n\t}\n\treturn;\n}\n\nvoid INTT(int *a,int N) {\n\tNTT(a,N), std::reverse(a + 1,a + N);\n\tint iN = fastpow(N,p - 2);\n\tfor(int i = 0;i < N;i++) a[i] = 1ll * a[i] * iN % p;\n\treturn;\n}\n\nint a[N],b[N];\n\nvoid Mul(int *x,int *y,int &n,int m) {\n\tint N = 1, l = -1; while(N <= n + m) N <<= 1, l++;\n\tfor(int i = 0;i < N;i++) r[i] = (r[i >> 1] >> 1) | ((i & 1) << l);\n\tfor(int i = 0;i < n;i++) a[i] = x[i];\n\tfor(int i = 0;i < m;i++) b[i] = y[i];\n\tfor(int i = n;i < N;i++) a[i] = 0;\n\tfor(int i = m;i < N;i++) b[i] = 0;\n\tNTT(a,N), NTT(b,N);\n\tfor(int i = 0;i < N;i++) a[i] = 1ll * a[i] * b[i] % p;\n\tINTT(a,N); int v = 0; n = n + m;\n\tfor(int i = 0;i < n;i++) {\n\t\tv += a[i];\n\t\tx[i] = v % 10, v /= 10;\n\t\tif(v && i == n - 1) n++;\n\t}\n\twhile(n > 1 && !x[n - 1]) n--;\n\treturn;\n}\n\nvoid Add(int *a,int n,int d) {\n\tint x = 0; a[0] += d;\n\tfor(int i = 0;i < n;i++) {\n\t\ta[i] += x;\n\t\tif(a[i] < 0) a[i] += 10, x--;\n\t\telse if(a[i] > 9) a[i] -= 10, x++;\n\t}\n}\n\nvoid Div(int *a,int n,int d) {\n\tint x = 0;\n\tfor(int i = n - 1;i >= 0;i--) {\n\t\tx = x * 10 + a[i];\n\t\ta[i] = x / d, x %= d;\n\t}\n}\n\nvoid print(int *a,int l) {\n\twhile(l && !a[l]) l--;\n\tfor(int i = l;i >= 0;i--) std::putchar(a[i] + 48);\n\treturn;\n}\n\nint f[N],l,t[N],tl;\n\nvoid Solve() {\n\tint n = read();\n\tfor(int i = 1;i < N;i++) f[i] = t[i] = 0;\n\tf[0] = 1, t[0] = 2, l = tl = 1;\n\tint m = n + 2;\n\twhile(m) {\n\t\tif(m & 1) Mul(f,t,l,tl);\n\t\tMul(t,t,tl,tl);\n\t\tm >>= 1;\n\t}\n\tAdd(f,l,-3 + ((n & 1) ? 1 : -1));\n\tDiv(f,l,6);\n\tprint(f,l), std::putchar('\\n');\n\treturn;\n}\n\nint main() {\n\tint m = read();\n\twhile(m--) Solve();\n\treturn 0;\n}\n\n```",
        "postTime": 1613801175,
        "uid": 219595,
        "name": "Vocalise",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "## ~~\u8fd9\u9898\u5efa\u8bae\u81ea\u5df1\u624b\u6253\u538b\u4f4d\u9ad8\u7cbe\u5ea6~~\n\n### **\u63d0\u9192\u4e00\u4e0b\uff0c\u8fd9\u9898\u7684\u6807\u7b7e\u9519\u5f97\u79bb\u8c31\uff0c\u8fd9\u9898\u8003\u7684\u53ea\u662f\u9ad8\u7cbe\u5ea6\u3002**\n\n\u8fd9\u4e00\u9898\u80cc\u666f\u7528\u5230\u4e86\u4e5d\u8fde\u73af~~\u6211\u5e73\u65f6\u65e0\u804a\u5c31\u73a9\u8fd9\u4e2a~~\uff0c\u53ea\u8981\u662f\u73a9\u8fc7\u4e5d\u8fde\u73af\u7684\u4eba\u90fd\u77e5\u9053\u600e\u4e48\u63a8\u516c\u5f0f\uff0c\u5177\u4f53\u5982\u4e0b\uff1a\n\n## \u8981\u4e0a\u7b2cn\u4e2a\u73af\uff0c\u5fc5\u987b\u8981\u4e0a\u7b2c1~n-1\u4e2a\u73af\uff0c\u7136\u540e\u518d\u5378\u4e0b\u7b2c1~n-2\u4e2a\u73af\uff0c\u518d\u4e0a\u7b2cn\u4e2a\u73af\uff0c\u6700\u540e\u518d\u4e0a\u7b2c1~n-1\u4e2a\u73af\u3002\n\n\u7528\u4eba\u8bdd\u6765\u8bf4\uff0c\u5c31\u662fa[n]=a[n-1]+a[n-2]*2+1\n\n\u7136\u540e\u8fd9\u9898\u5c31\u53ef\u4ee5\uff0c\u52a8\u6001\u89c4\u5212\uff1f\n\n```\n#!/usr/bin/perl\nuse bigint;\n<>;\n$a{1}=1,$a{2}=2;\nfor(3..100000){\n  $a{$_}=2*$a{$_-2}+2*$a{$_-1}+1;\n}\nprint $a{$_} for <>;\n```\n\n\u5168\u90e8TLE ~~QAQ~~\uff0c\u663e\u7136\u4e0d\u73b0\u5b9e\u3002\n\n\u4ed4\u7ec6\u4e00\u770b\uff0c\u8fd9\u9898\u7684\u67e5\u8be2\u6570\u636e\u5f88\u6c34\uff0cm<=10\n\n\u8c8c\u4f3c\u76f4\u63a5\u66b4\u529b\u4e0a\u516c\u5f0f\u90fd\u53ef\u4ee5\u8fc7\u4e86\u3002\n\n~~\u7136\u540e\u6211\u5c31\u592e\u6c42\u6211\u65c1\u8fb9\u7684\u6570\u5b66\u5927\u795e\u5e2e\u6211\u63a8\u516c\u5f0f\u6211\u592a\u96be\u4e86~~\n\n\u7136\u540e\u4f17\u6240\u5468\u77e5\u63a8\u51fa\u6765\u4e24\u4e2a\u516c\u5f0f\uff0c\u5947\u6570\u5076\u6570\u5404\u4e00\u4e2a\uff0c\u4ee5\u4e0b\u7ed9\u51fa\u5076\u6570\u516c\u5f0f\uff1a\n\n```\n(2**(n+1)-1)/3\n```\n\n\u518d\u7a0d\u5fae\u6574\u5408\u4e00\u4e0b\u5c31\u53d8\u6210\u4e86\u4f17\u6240\u5468\u77e5\u7684\u9898\u89e3\u516c\u5f0f\u3002\n\n### \u8fd9\u9898\u6211\u4e3a\u4e86\u8282\u7701\u65f6\u95f4\u76f4\u63a5\u7528\u4e86Perl\u81ea\u5e26\u7684\u9ad8\u6548\u7387\u9ad8\u7cbe\u5ea6\u4e58\u65b9\uff0c\u5efa\u8bae\u624b\u6253\u4e00\u904dC++\u538b\u4f4d\u9ad8\u7cbe\u5ea6\u518d\u719f\u6089\u4e00\u4e0b\n\n\u6bd5\u7adf\u8fd9\u9898\u96be\u70b9\u5c31\u662f\u9ad8\u7cbe\u5ea6\u4e58\u65b9\n\n```\n#!/usr/bin/perl\nuse bigint;\n<>;\nprint 2**($_+1)/3,\"\\n\" for <>;\n```\n\n## ~~\u7528Python\u7684\u4ec0\u4e48\u9b3c\uff0cPerl\u624d\u662f\u5f3a\u65e0\u654c\uff01~~",
        "postTime": 1571810803,
        "uid": 202816,
        "name": "Ich_liebe_dich",
        "ccfLevel": 4,
        "title": "Perl\u6807\u51c6\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "- \u6211\u4eec\u4e0d\u59a8\u8bbe$K(n)$\u4e3a\u89e3\u4e0b$n$\u4e2a\u5706\u73af\u6240\u9700\u8981\u7684\u6700\u5c11\u79fb\u52a8\u6b21\u6570\u3002\u663e\u7136\uff0c\u89e3\u4e0b\u7b2c\u4e00\u4e2a\u5706\u73af\u6240\u9700\u8981\u7684\u6b21\u6570\u4e3a$K(1)=1$\uff08\u6b21\uff09\u3002\u5f53$n=2$\u65f6\uff0c\u5fc5\u987b\u5148\u89e3\u4e0b\u7b2c\u4e8c\u4e2a\u5706\u73af\uff0c\u518d\u89e3\u4e0b\u7b2c\u4e00\u4e2a\u5706\u73af\uff0c\u6240\u4ee5\uff0c\u89e3\u4e0b\u7b2c\u4e8c\u4e2a\u5706\u73af\u6240\u9700\u8981\u7684\u6b21\u6570\u4e3a$K(2)=2$\uff08\u6b21\uff09\u3002\n\n- \u82e5\u8981\u89e3\u4e0bn\u4e2a\u5706\u73af\uff0c\u5c31\u5fc5\u987b\u8981\u89e3\u4e0b\u7b2c$(n-2)$\u4e2a\u5706\u73af\uff0c\u9700\u8981$K(n-2)$\u6b21\uff0c\u7136\u540e\u518d\u79fb\u52a81\u6b21\u5373\u53ef\u5c06\u7b2c$n$\u4e2a\u5706\u73af\u89e3\u4e0b\uff0c\u5219\u53ea\u5269\u4e0b\u7b2c$(n-1)$\u4e2a\u5706\u73af\u3002\n\n- \u82e5\u6211\u4eec\u518d\u7528$k(n)$\u6765\u8868\u793a\u524d$(n-1)$\u4e2a\u5706\u73af\u90fd\u5df2\u7ecf\u89e3\u4e0b\u540e\uff0c\u518d\u89e3\u7b2cn\u4e2a\u5706\u73af\u6240\u9700\u8981\u7684\u6b21\u6570\uff0c\u5219\u53ef\u4ee5\u5f97\u51fa\u4e0b\u9762\u8fd9\u4e2a\u5f0f\u5b50\uff1a$K(n)=K(n-2)+1+k(n-1)$\u3002\n\n- \u63a5\u7740\uff0c\u6211\u4eec\u6c42$k(n)$\u7684\u8868\u8fbe\u5f0f\u3002\u7531\u524d\u9762\u663e\u7136\u53ef\u77e5\uff0c\u82e5\u8981\u5c06\u7b2c$n$\u4e2a\u5706\u73af\u89e3\u4e0b\uff0c\u5c31\u5fc5\u987b\u5148\u5c06\u7b2c$(n-1)$\u4e2a\u5706\u73af\u5957\u56de\u53bb\uff0c\u9700\u8981$k(n-1)$\u6b21\uff0c\u518d\u79fb\u4e00\u6b21\uff0c\u5c31\u53ef\u4ee5\u5c06\u7b2c$n$\u4e2a\u5706\u73af\u89e3\u4e0b\uff0c\u518d\u79fb$k(n-1)$\u6b21\uff0c\u5c31\u53ef\u4ee5\u5c06\u7b2c$(n-1)$\u4e2a\u5706\u73af\u89e3\u4e0b\uff0c\u5219\u5f97\uff1a\n- $k(1)=1$\u4e14$k(n)=2k(n-1)+1$\n\n- \u7531\u6b64\u53ef\u5f97\uff1a\n\n$k(n)$=$2^2 k(n-2)+2+1$\n\n=$2^3 k(n-3)+2^2+2+1$\n    \n=$...$\n    \n=$2^n -1$\n\n- \u6240\u4ee5$K(n)$=$K(n-2)+2^{n-1}$\n\n- \u56e0\u4e3a\u6709$K(1)$=$1$,$K(2)$=$2$\u6240\u4ee5\u8981\u5206\u7c7b\u8ba8\u8bba\u3002\n\n$(1)$\u5f53n\u4e3a\u5076\u6570\u65f6\uff1a$K(n)$=$(2^{n+1}-2)/3$\n\n$(2)$\u5f53n\u4e3a\u5947\u6570\u65f6\uff1a$K(n)$=$(2^{n+1}-1)/3$\n\n- \u7136\u540e\u5c31\u5f88\u7b80\u5355\u4e86\u3002",
        "postTime": 1594044655,
        "uid": 271736,
        "name": "Daidly",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    },
    {
        "content": "### \t\t\t\t\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011\n\n\u200b\t\u7531\u4e8e\u5404\u4f4d\u5927\u4f6c\u5df2\u7ecf\u7528\u5404\u79cd\u65b9\u6cd5,\u5c06\u516c\u5f0f\u63a8\u5f97\u6211\u8fd9\u91cc\u4fbf\u4e0d\u518d\u8fc7\u591a\u9610\u8ff0,\u6211\u4eec\u6765\u8c08\u8c08\u672c\u9898\u7684\u5b9e\u73b0~\n\n\u200b\t\u9996\u5148,\u6211\u4eec\u5148\u6765\u770b\u516c\u5f0f:$\\lfloor\\frac{2^{n+1}}{3}\\rfloor$\n\n\u200b\t\u6211\u4eec\u77e5\u9053,\u56e0\u4e3an<=1e5\uff0c\u6240\u4ee5$|2^{n+1}|$\u5f88\u5c0f,\u800c\u4e14\u8be2\u95ee\u4e5f\u53ea\u670910,\u6240\u4ee5\u6211\u4eec**\u5982\u679c\u80fd\u8f83\u5feb\u6c42\u51fa$2^{n+1}$\u6211\u4eec\u518d\u8dd1\u4e2a\u9ad8\u7cbe\u9664\u4f4e\u7cbe\u4fbf\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u4e86...**\n\n\u200b\t\u4e8e\u662f\u73b0\u5728\u95ee\u9898\u8f6c\u5316\u5230\u5982\u4f55\u5feb\u901f\u6c42$2^{n+1}$,\u4e8e\u662f,\u67d0\u5927\u4f6c\u7ad9\u51fa\u6765\u5237\u5237\u5237...\u5feb\u901f\u5e42+FFT \u5bf9\u6b64\u6211\u53ea\u80fdorzzzzz\n\n\u200b\t\u7531\u4e8e\u6211\u592a\u5f31,\u6240\u4ee5\u61d2\u5f97\u6253FFT\u4e86,\u4f46\u662f\u6253\u9ad8\u7cbe\u660e\u663eGG\u554a...\u8fd9\u53ef\u600e\u4e48\u529e\u5462\uff1f\n\n\u200b\t\u5176\u5b9e,\u6211\u4eec\u53ea\u9700\u8981\u7a0d\u52a0\u4f18\u5316\u5373\u53ef:**\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4f4e\u7cbe\u4e58\u6cd5\u6765\u4ee3\u66ff\u90e8\u5206\u7684\u9ad8\u7cbe\u4e58\u6cd5**,\u4ece\u800c\u4f7f\u5f97\u4ee3\u7801\u52a0\u901f\u6700\u540e\u539f\u5730\u8d77\u98de\uff01\n\n\u200b\t\u4e0d\u4f1a\u4f4e\u7cbe\u4f18\u5316\u9ad8\u7cbe\u7684\u53ef\u4ee5\u53bb[\u8fd9\u91cc](https://www.luogu.org/blog/KingofNight/kuai-su-ji-suan-gao-jing-sheng-di-jing-di-jing-you-hua-gao-jing)\u5b66\u4e60~~\u770b\u6545\u4e8b~~\n\n\u200b\t\u4e0b\u9762\u7ed9\u51fa\u4ee3\u7801:\n\n```cpp\n//#pragma GCC optimize(3,\"Ofast\",\"inline\")//\u624b\u52a8O3\u4f18\u5316\n//#pragma GCC target(\"sse\",\"sse2\",\"sse3\",\"sse4\",\"avx\",\"avx2\",\"popcnt\")\n#include<bits/stdc++.h>\nusing namespace std;\nconst unsigned long long T=5e17;\ninline string operator*(string x,unsigned long long y){//\u9ad8\u7cbe\u4e58\u4f4e\u7cbe \n\tint len=x.size();\n\tunsigned long long a[100000];\n\tfor(int i=0;i<len;++i){\n\t\ta[i]=x[len-i-1]-'0';\n\t\ta[i]*=y;\n\t}\n\tfor(int i=0;i<len;++i){\n\t\tif(a[i]>9){\n\t\t\tif(i==len-1){\n\t\t\t\ta[len++]=0;\n\t\t\t}\n\t\t\ta[i+1]+=a[i]/10;\n\t\t\ta[i]%=10;\n\t\t}\n\t}\n\twhile(len&&!a[len-1]){\n\t\tlen--;\n\t}\n\tstring ans=\"\";\n\tfor(int i=len-1;~i;--i){\n\t\tans+=a[i]+'0';\n\t}\n\treturn ans;\n}\ninline string operator/(string x,int y){//\u9ad8\u7cbe\u9664\u4f4e\u7cbe \n\tint len=x.size(),yu=0;\n\tbool flag=0;\n\tstring res=\"\";\n\tfor(int i=0;i<len;++i){\n\t\tyu=yu*10+x[i]-'0';\n\t\tif(flag){\n\t\t\tres+=yu/3+'0';\n\t\t\tyu%=3;\n\t\t\tcontinue;\n\t\t}\n\t\tif(yu>=3){\n\t\t\tflag=1;\n\t\t\tres+=yu/3+'0';\n\t\t\tyu%=3;\n\t\t}\n\t}\n\treturn res;\n}\ninline string fksc(int x,int y){//\u4f4e\u7cbe\u4e58\u6cd5\u4f18\u5316\u9ad8\u7cbe\u4e58\u6cd5 \n\tunsigned long long ji=1;\n\tstring res=\"1\";\n\twhile(y--){\n\t\tji*=x;\n\t\tif(ji<=T){\n\t\t\tcontinue; \n\t\t}\n\t\tres=res*ji;\n\t\tji=1;\n\t}\n\tres=res*ji;\n\treturn res;\n}\nint main(){\n\tint T;\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tint n;\n\t\tscanf(\"%d\",&n);\n\t\tstring res=fksc(2,n+1);\n\t\tcout<<res/3<<endl;\n\t}\n\treturn 0;\n}\n\n\n```\nO(1)<<\u4ee3\u7801\u7684\u590d\u6742\u5ea6=O(\u53ef\u8fc7)<<O(nm|s|)\n\n\u5f53\u7136,\u4e3a\u4e86\u8ffd\u6c42\u8f83\u5feb\u901f\u5ea6,\u53ef\u4ee5\u5148\u8f93\u5165\u8be2\u95ee,\u7136\u540e\u8fdb\u884c\u4e00\u6b21\u4f4e\u7cbe\u4f18\u5316\u9ad8\u7cbe\u5904\u7406\u5b8c\u6240\u6709\u60c5\u51b5,\u7136\u540e\u518d\u56de\u7b54~\n",
        "postTime": 1552904342,
        "uid": 81847,
        "name": "ThinkofBlank",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4461 \u3010[CQOI2018]\u4e5d\u8fde\u73af\u3011"
    }
]
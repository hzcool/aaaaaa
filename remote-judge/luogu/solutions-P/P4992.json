[
    {
        "content": "## \u601d\u8def\uff1a\n\u8fd9\u9053\u9898\u544a\u4f60n-1\u6761\u8fb9\u5c31\u662f\u9a97\u4f60\u7684\n\n\u90e8\u5206\u5206\u4e5f\u662f\u9a97\u4f60\u7684\n\n\u8fd9\u9053\u9898\u8fde\u5bf9\u8fb95\u5206\u949f\u7684\u4e8b\n\n\u4e00\u4e2a\u70b9\u5bf9\u53e6\u4e00\u4e2a\u70b9\u6709\u5f71\u54cd\u5f53\u4e14\u4ec5\u5f53\u8fd9\u4e2a\u70b9\u5728\u53e6\u4e00\u4e2a\u70b9\u7684\u524d\u4e00\u65f6\u523b\u88ab\u67e5\n\n\u4e14\u8fd9\u4e24\u4e2a\u70b9\u4e4b\u95f4\u6709\u8fb9\u76f8\u8fde\n\n\u6211\u4eec\u52a0\u4e0a\u8d85\u7ea7\u6839\u8282\u70b9\u540e\u53ef\u4ee5\u5efa\u4e00\u68f5\u6811\n\n\u8dd1\u6811\u5f62DP\u5373\u53ef\n\n## \u4ee3\u7801\uff1a\n```\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define rij register int j\n#define rii register int i\nusing namespace std;\nint head[1000005],n,m,tim[1000005],bj[1000005];\ndouble dp[1000005],gl[1000005];\nint bnt;\nstruct road{\n    int to,nxt;\n}x[2000005];\nint a,b,c;\ninline int rd(){\n    int x=0,f=1;char ch=getchar();\n    while(!isdigit(ch)) {f=ch=='-'?0:1;ch=getchar();}\n    while(isdigit(ch))  {x=(x<<1)+(x<<3)+ch-'0';ch=getchar();}\n    return f?x:-x;\n}\nvoid add(int from,int to)\n{\n//    cout<<from<<\" \"<<to<<endl;\n    bnt++;\n    x[bnt].to=to;\n    x[bnt].nxt=head[from];\n    head[from]=bnt;\n}\nvoid dplast(int wz)\n{\n    double ans=1.0;\n    for(rii=head[wz];i!=0;i=x[i].nxt)\n    {\n        dplast(x[i].to);\n        ans*=(1-dp[x[i].to]);\n    }\n    ans*=gl[wz];\n    dp[wz]=1-ans;\n}\nint main()\n{\n//    freopen(\"cf8.in\",\"r\",stdin);\n//    freopen(\"cf8.out\",\"w\",stdout);\n    n=rd();m=rd();a=rd();b=rd();c=rd();\n    for(rii=1;i<=m;i++)\n    {\n        int k;k=rd();\n//        scanf(\"%d\",&k);\n        for(rij=1;j<=k;j++)\n        {\n            int bh=rd();\n//            scanf(\"%d\",&bh);\n            tim[bh]=i;\n        }\n    }\n    for(rii=1;i<=n-1;i++)\n    {\n        int from=rd(),to=rd();\n//        scanf(\"%d%d\",&from,&to);\n        if(tim[from]-tim[to]==1)\n        {\n            add(from,to);\n            bj[to]++;\n        }\n        if(tim[to]-tim[from]==1)\n        {\n            add(to,from);\n            bj[from]++;\n        }\n    }\n    for(rii=1;i<=n;i++)\n    {\n        if(bj[i]==0)\n        {\n            add(0,i);\n        }\n    }\n    for(rii=1;i<=n;i++)\n    {\n        scanf(\"%lf\",&gl[i]);\n    }\n    dplast(0);\n//    for(rii=1;i<=n;i++)\n//    {\n//        printf(\"%.4lf \",dp[i]);\n//    }\n    double maxn=max(dp[a],max(dp[b],dp[c]));\n    if(dp[a]==maxn)\n    {\n        printf(\"%d\\n\",a);\n    }\n    else\n    {\n        if(maxn==dp[b])\n        {\n            printf(\"%d\\n\",b);\n        }\n        else\n        {\n            printf(\"%d\\n\",c);\n        }\n    }\n    printf(\"%.4lf\",maxn);\n}\n```",
        "postTime": 1541303210,
        "uid": 52176,
        "name": "ztz11",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4992 \u3010\u67e5\u623f\u3011"
    },
    {
        "content": "\u5176\u5b9e\u6211\u5e76\u4e0d\u6e05\u695a\u4ec0\u4e48\u662f\u6811\u5f62DP \uff08\u53ef\u80fd\u662f\u6211\u592a\u5f31\u4e86\uff09\n\u6211\u5c31\u6309\u7167\u6a21\u62df\u7684\u65b9\u6cd5\u6765\u505a\n\u4e00\u5c42\u5c42\u5730\u6765\u5224\u65ad\n\u6bcf\u4e00\u5c42\u5206\u522b\u627e\u5230\u5bf9\u5e94\u7684\u8f6c\u79fb\n\u4e58\u4ee5\u4e0b\u6982\u7387\u5c31\u662f\u7b54\u6848\u4e86\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define dl double\nusing namespace std;\nconst int maxn=1e6+7;\nstruct edge{int nxt,v;}eg[maxn<<1];\nstruct r{ double p,p1; int dep;\t }room[maxn];\nint n,m,a,b,c,en,head[maxn];\nint read()\n{\n\tint x=0,y=1;\n\tchar ch=getchar();\n\twhile(ch>'9'||ch<'0'){ch=getchar();}\n\twhile(ch<='9'&&ch>='0'){x=(x<<3)+(x<<1)+ch-'0';ch=getchar();}\n\treturn x;\n}\nvoid insert(int u,int v)\n{\n\teg[++en].v=v;\n\teg[en].nxt=head[u];\n\thead[u]=en;\n}\nint fll[maxn];\nint z[maxn];\nvoid work()\n{\n\tif(room[a].p>=room[b].p&&room[a].p>=room[c].p )\n\t{\n\t\tcout<<a<<endl;\n\t\tprintf(\"%.4lf\",room[a].p);return ;\n\t}\n\telse if(room[b].p>=room[c].p)\n\t{\n\t\tcout<<b<<endl;\n\t\tprintf(\"%.4lf\",room[b].p);\n\t\treturn ;\n\t}\n\tcout<<c<<endl;\n\tprintf(\"%.4lf\",room[c].p);\n}\nsigned main()\n{\t\n\tint step=0;\n\tn=read();m=read();\n\ta=read(),b=read(),c=read();\n\tfor(int i=1;i<=m;i++)\n\t{\tint y;y=read();int t;\n\t\tz[i]=z[i-1]+y;\n\t\tfor(int j=1;j<=y;j++)\n\t\t{\n\t\t t=read();\n\t\t fll[++step]=t;\n\t\t room[t].dep=i;\n\t\t}\n\t}\n\tint u,v;\n\tfor(int i=1;i<n;i++){ u=read(),v=read();insert(u,v),insert(v,u);}\n\tfor(int i=1;i<=n;i++) scanf(\"%lf\",&room[i].p);\n\tfor(int i=1;i<=n;i++)room[i].p1=1;\n\tfor(int k=1;k<=m;k++)\n\t{\n\t\tfor(int i=z[k-1]+1;i<=z[k];i++)\n\t\t{\t\n\t\t\tint u=fll[i];\n\t\t\troom[u].p=(1-room[u].p1)+room[u].p1*(1-room[u].p);\n\t\t\tfor(int e=head[u];e;e=eg[e].nxt)\n\t\t\t{\n\t\t\t\tint v=eg[e].v;\n\t\t\t\tif(room[v].dep==k+1)\n\t\t\t\t\troom[v].p1*=(1-room[u].p);\n\t\t\t}\n\t\t}\n\t}\n\n\twork();\n\treturn 0;\n}\n```\n",
        "postTime": 1551513845,
        "uid": 122463,
        "name": "\u95ee\u5929",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4992 \u3010\u67e5\u623f\u3011"
    },
    {
        "content": "# \u9898\u610f\n### \u9898\u9762\u770b\u8d77\u6765\u6709\u70b9\u590d\u6742\uff0c\u6240\u4ee5\u6211\u89e3\u91ca\u4e00\u4e0b\uff1a\n- $n$ \u4e2a\u623f\u95f4\u7531 $n-1$ \u6761\u8fb9\u6784\u6210\u4e00\u68f5\u6811\uff0c\u8001\u5e08\u4f1a\u8fdb\u884c\u67e5\u623f\uff0c\u800c\u6bcf\u4e2a\u4eba\u82e5\u6ca1\u6709\u88ab\u8b66\u544a\uff0c\u5219\u6709\u4e00\u5b9a\u6982\u7387\u9893\u5e9f\u3002\u5982\u679c\u88ab\u67e5\u623f\u65f6\u6ca1\u6709\u9893\u5e9f\uff0c\u90a3\u4e48\u8be5\u623f\u95f4\u4f1a\u5411\u76f8\u9886\u623f\u95f4\u8b66\u544a\uff0c\u8ba9\u4ed6\u4eec\u5728\u4e0b\u4e00\u65f6\u95f4\u4e00\u5b9a\u4e0d\u9893\u5e9f\u3002\u800c  _sqn_  \u53ef\u5728\u7ed9\u51fa\u4e09\u4e2a\u623f\u95f4\u4e2d\u9009\u62e9\u67d0\u4e00\u4e2a\uff0c\u6c42\u5176\u4e2d\u54ea\u4e2a\u623f\u95f4\u88ab\u6293\u5305\u7684\u6982\u7387\u6700\u5c0f\u3002\n#  \u601d\u8def\n### \u4e0d\u96be\u53d1\u73b0\uff0c\u6bcf\u4e2a\u4eba\u88ab\u6293\u5305\u90fd\u9700\u540c\u65f6\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\uff1a\n1. \u4ed6\u6b63\u5728\u9893\u5e9f\uff1b\n \n1. \u672c\u53ef\u4ee5\u63d0\u9192\u4ed6\u7684\u6240\u6709\u4eba\uff08\u4e5f\u53ef\u80fd\u4e0d\u5b58\u5728\uff09\u5168\u88ab\u6293\u5305\u4e86\u3002\n### \u518d\u8fdb\u4e00\u6b65\u601d\u8003\uff0c\u8c01\u53ef\u80fd\u6551\u6211\uff1f\n- \u53ef\u4ee5\u60f3\u5230\uff0c\u662f\u6211\u88ab\u67e5\u623f\u7684\u524d\u4e00\u65f6\u95f4\u88ab\u67e5\uff0c\u4e14\u548c\u6211\u623f\u95f4\u76f8\u90bb\u7684\u4eba\u3002\n\n- \u7efc\u4e0a\uff0c\u6211\u53ea\u9700\u5c06\u6211\u9893\u5e9f\u7684\u6982\u7387\uff0c\u4e58\u4e0a\u6240\u4ee5\u53ef\u4ee5\u6551\u6211\u7684\u4eba\u88ab\u6293\u5305\u7684\u6982\u7387\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u6211\u88ab\u6293\u5305\u7684\u6982\u7387\u4e86\u3002\u53c8\u56e0\u4e3a\u6211\u88ab\u6293\u5305\u662f\u6211\u5b89\u5168\u7684\u5bf9\u7acb\u4e8b\u4ef6\uff0c\u6240\u4ee5\u4e8c\u8005\u6982\u7387\u76f8\u52a0\u4e3a $1$ \uff0c\u7528 $1$ \u53bb\u51cf\u88ab\u6293\u6982\u7387\u5c31\u662f\u5b89\u5168\u6982\u7387\u3002\u4f7f\u7528 **\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\uff08DFS\uff09** \u89e3\u51b3\uff0c\u8be6\u7ec6\u5185\u5bb9\u8bf7\u770b\u4ee3\u7801\u3002\n# \u590d\u6742\u5ea6\n- \u7a7a\u95f4\u4e0d\u7528\u8003\u8651\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u8bdd\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u623f\u95f4\u4ec5\u9700\u641c\u7d22\u4e00\u6b21\uff0c\u641c\u7d22\u6bcf\u4e2a\u623f\u95f4\u65f6\u90fd\u9700\u641c\u7d22\u4e0e\u4e4b\u76f8\u90bb\u7684\u8fb9\uff0c\u6bcf\u6761\u8fb9\u6700\u591a\u641c\u4e24\u6b21\uff08\u4ece\u4e24\u7aef\u641c\u8fc7\u6765\uff09\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n)$ \u3002\uff08\u4e0d\u751a\u4e25\u8c28\uff0c\u5c06\u5c31\u770b\u770b\u5427\uff09\n\n- \u63d0\u4e00\u53e5\uff0c\u6ce8\u610f\u662f\u5728\u76f8\u90bb\u623f\u95f4\u4e2d\u627e\u65f6\u95f4\u7b26\u5408\u7684\uff0c\u800c\u4e0d\u8981\u5728\u65f6\u95f4\u7b26\u5408\u7684\u4e2d\u627e\u76f8\u90bb\u623f\u95f4\uff0c\u5426\u5219\u5982\u679c\u6570\u636e\u662f\u7b2c\u4e00\u65f6\u95f4\u67e5\u4e00\u534a\u623f\u95f4\uff0c\u7b2c\u4e8c\u65f6\u95f4\u67e5\u53e6\u4e00\u534a\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u4f1a\u53d8\u6210 $O(n^2)$ \u3002\n\n- \u6700\u540e\uff0c\u56e0\u4e3a\u6bcf\u95f4\u623f\u53ea\u4f1a\u88ab\u67e5\u4e00\u6b21\uff0c\u6240\u4ee5\u4e00\u65e6\u641c\u7d22\u5230\uff0c\u5373\u80fd\u5f97\u5230\u8fd9\u95f4\u623f\u7684\u6700\u7ec8\u88ab\u6293\u6982\u7387\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u8bb0\u5fc6\u5316\u6765\u526a\u679d\u3002\u672c\u9898\u770b\u4f3c\u6ca1\u5fc5\u8981\uff0c\u56e0\u4e3a\u53ea\u7528\u5224\u65ad\u4e09\u95f4\u623f\uff0c\u4f46\u5982\u679c\u9898\u76ee\u52a0\u5927\u96be\u5ea6\uff0c\u8981\u5224\u65ad\u6240\u6709\u623f\u95f4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u5403\u4e0d\u6d88\u4e86\u3002\n# \u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<iomanip>\n#include<algorithm>\n#include<queue>\n#define ll long long\nusing namespace std;\ninline ll read()//\u5feb\u8bfb\n{\n\tll s=0,t=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9')\n\t{\n\t\tif(c=='-')t*=1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9')\n\t{\n\t\ts=s*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn s*t;\n}\ndouble ans[1000001],p[1000001],answer=1;//\u88ab\u6293\u5305\u6982\u7387\uff0c\u9893\u5e9f\u6982\u7387\uff0c\u6700\u540e\u7b54\u6848\nbool bj[1000001];//\u662f\u5426\u5df2\u88ab\u641c\u7d22\u8fc7\u7684\u6807\u8bb0\nll n,m,tot=0,head[1000001],timee[1000001],ye[5];\n//n\uff0cm\u89c1\u9898\u610f\uff0c\u94fe\u5f0f\u524d\u5411\u661f\u5934\uff0c\u88ab\u67e5\u623f\u65f6\u95f4\uff0c\u4e09\u4e2a sqn \u53ef\u85cf\u8eab\u7684\u623f\u95f4\u53f7\nstruct kkk\n{\n\tll to,next;\n}e[2000001];//\u76f8\u90bb\u623f\u95f4\u7684\u8fb9\ninline void add(ll x,ll y)//\u8fde\u8fb9\n{\n\ttot++;\n\te[tot].to=y;\n\te[tot].next=head[x];\n\thead[x]=tot;\n}\ndouble f(ll x)//\u641c\u7d22\u51fd\u6570\uff0c\u8fd4\u56de\u623f\u95f4x\u88ab\u6293\u5305\u7684\u6982\u7387\n{\n\tif(bj[x])//\u8bb0\u5fc6\u5316\n\t{\n\t\treturn ans[x];\n\t}\n\tans[x]=p[x];//\u88ab\u6293\u5305\u7684\u57fa\u672c\u6982\u7387\u5373\u4e3a\u81ea\u5df1\u9893\u5e9f\u7684\u6982\u7387\n\tfor(ll i=head[x];i;i=e[i].next)\n\t{\n\t\tll to=e[i].to;\n\t\tif(timee[to]==timee[x]-1)//\u5982\u623f\u95f4to\u6709\u53ef\u80fd\u6551\u4f60\n\t\t{\n\t\t\tans[x]*=f(to);//\u5c06\u623f\u95f4to\u88ab\u6293\u5305\u7684\u6982\u7387\u4e58\u8fdb\u623f\u95f4x\u88ab\u6293\u5305\u7684\u6982\u7387\n\t\t}\n\t}\n\tbj[x]=1;\n\treturn ans[x];\n}\nint main()\n{\n\tmemset(bj,0,sizeof(bj));\n\tn=read();\n\tm=read();\n\tll k,kk;\n\tye[1]=read();\n\tye[2]=read();\n\tye[3]=read();\n\tfor(ll i=1;i<=m;i++)\n\t{\n\t\tk=read();\n\t\tfor(ll j=1;j<=k;j++)//\u8bb0\u5f55\u65f6\u95f4\n\t\t{\n\t\t\tkk=read();\n\t\t\ttimee[kk]=i;\n\t\t}\n\t}\n\tll x,y;\n\tfor(ll i=1;i<n;i++)\n\t{\n\t\tx=read();\n\t\ty=read();\n\t\tadd(x,y);//\u53cc\u5411\u90fd\u8981\u8fde\u8fb9\n\t\tadd(y,x);\n\t}\n\tfor(ll i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%lf\",&p[i]);\n\t}\n\tll minn=0;\n\tdouble minnanswer=1,kkk;\n\tfor(ll i=3;i>=1;i--)//\u6253\u64c2\u53f0\n\t{\n\t\tkkk=f(ye[i]);\n\t\tif(kkk<=minnanswer)\n\t\t{\n\t\t\tminnanswer=kkk;\n\t\t\tminn=ye[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",minn);\n\tcout<<fixed<<setprecision(4)<<1-minnanswer;//\u4fdd\u7559\u56db\u4f4d\u5c0f\u6570\u8f93\u51fa\u5b89\u5168\u6982\u7387\n}\n```\nby \u963f\u5c14\u8428\u65af \u5199\u4e8e 2021.11.12",
        "postTime": 1636969735,
        "uid": 48949,
        "name": "\u963f\u5c14\u8428\u65af",
        "ccfLevel": 0,
        "title": "4992\u9898\u89e3"
    }
]
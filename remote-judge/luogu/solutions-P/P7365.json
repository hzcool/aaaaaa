[
    {
        "content": "\u76f4\u63a5 $\\text{DP}$   \n\u5c06\u8fd9\u4e2a $\\text{I}$ \u5f53\u505a\u4e09\u4e2a\u77e9\u5f62\u8003\u8651   \n\u8bbe $f_{i,j,k,l}|l=1,2,3$ \u8868\u793a\u73b0\u5728\u8003\u8651\u5230\u4e86\u8fd9\u4e2a $\\text{I}$ \u7684\u7b2c $l$ \u4e2a\u90e8\u5206\uff0c\u8f6c\u79fb\u5230\u4e86\u7b2c $i$ \u884c\uff0c\u5de6,\u53f3\u754c\u5206\u522b\u662f $j,k$ \u65f6\u7684\u7b54\u6848      \n\u8f6c\u79fb\u7684\u65f6\u5019\u7528\u524d\u7f00\u548c\u4f18\u5316\u4e00\u4e0b   \n\u8fd9\u6837\u505a\u660e\u663e\u590d\u6742\u5ea6\u662f $O(nm^4)$ \u7684    \n\n-------   \n\n\u8003\u8651\u4f18\u5316\u4e0a\u9762\u8fd9\u4e2a\u7b97\u6cd5\uff1a     \n\u5728\u7531\u7b2c\u4e00\u4e2a\u77e9\u9635\u8f6c\u5411\u7b2c\u4e8c\u4e2a\u77e9\u9635\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e4b\u524d\u5faa\u73af\u7684$x,y$\u4e00\u5b9a\u662f\u8981\u5b8c\u5168\u5305\u542b\u7b2c\u4e8c\u4e2a\u77e9\u9635\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u7b2c\u4e8c\u4e2a\u77e9\u9635\u5faa\u73af$x,y$\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u8c03\u7528$g$\u6570\u7ec4\u6765\u907f\u514d\u5faa\u73af$x,y$   \n\u4e0a\u4ee3\u7801\uff1a   \n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int NR=210;\n#define int long long\n\nint n,m,ans;\nint f[2][NR][NR][4];\nint g[NR][NR][3];\nint sum[NR][NR];\nint x;\n\nsigned main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin>>x;\n\t\t\tsum[i][j]=sum[i][j-1]+x;\n\t\t}\n\tmemset(f,-999999,sizeof(f));\n\tmemset(g,-999999,sizeof(g));\n\tfor(int i=1;i<=n;i++){\n\t\tmemset(f[x],-999999,sizeof(f[x]));\n\t\tfor(int l=3;l>0;l--){\n\t\t\tfor(int j=1;j<=m;j++)\n\t\t\t\tfor(int k=j;k<=m;k++)\n\t\t\t\t\tif(sum[i][k]==sum[i][j-1]){\n\t\t\t\t\t\tif(l==1)f[x^1][j][k][1]=max(f[x^1][j][k][1],0ll);\n\t\t\t\t\t\tf[x][j][k][l]=f[x^1][j][k][l]+k-j+1;\n\t\t\t\t\t\tif(l==2)f[x][j][k][2]=max(g[j-1][k+1][1]+k-j+1,f[x][j][k][2]);\n\t\t\t\t\t\tif(l==3)f[x][j][k][3]=max(g[j+1][k-1][2]+k-j+1,f[x][j][k][3]);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\tif(l==1)\n\t\t\t\tfor(int j=1;j<=m;j++)\n\t\t\t\t\tfor(int k=m;k>=j;k--)\n\t\t\t\t\t\tg[j][k][1]=max(f[x][j][k][1],max(g[j-1][k][1],g[j][k+1][1]));\n\t\t\tif(l==2)\n\t\t\t\tfor(int j=m;j>=1;j--)\n\t\t\t\t\tfor(int k=j;k<=m;k++)\n\t\t\t\t\t\tg[j][k][2]=max(f[x][j][k][2],max(g[j+1][k][2],g[j][k-1][2]));\n\t\t\tif(l==3)\n\t\t\t\tfor(int j=1;j<=m;j++)\n\t\t\t\t\tfor(int k=1;k<=m;k++)\n\t\t\t\t\t\tans=max(ans,f[x][j][k][3]);\t\t\n\t\t}\n\t\tx^=1;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1614070233,
        "uid": 117771,
        "name": "intel_core",
        "ccfLevel": 7,
        "title": "[CTSC2002]\u9881\u5956\u5178\u793c \u9898\u89e3"
    },
    {
        "content": "## [*My Blog*](https://www.cnblogs.com/cotsheep/p/16859115.html)  \n\n\u849f\u84bb\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\u3002\n\n\u8fd9\u662f\u4e00\u9053\u795e\u5947\u7684\u6709\u5173\u7f51\u683c\u7684 DP\uff08\u4e00\u4e9b\u5927\u4f6c\u79f0\u5176\u4e3a\u66b4\u529b DP\uff09\uff0c\u8fd9\u91cc\u5c06 `I` \u5b57\u6bcd\u5206\u4e3a\u7684\u4e09\u4e2a\u90e8\u5206\u79f0\u4e3a\u7b2c\u4e00\uff0c\u4e8c\uff0c\u4e09\u90e8\u5206\u3002  \n\n\u505a\u6cd5\uff1a\u8bbe $f_{i,j,k,l} \\left( l \\in [1,3] \\right)$ \u8868\u793a\u7b2c $i$ \u884c\uff0c\u5f53\u524d\u5728\u7b2c $l$ \u90e8\u5206\uff0c\u533a\u95f4 $[j,k]$ \u7684\u6700\u5927\u9762\u79ef\u3002  \n\u7531\u4e8e\u7b2c\u4e8c\u90e8\u5206\u5fc5\u987b\u6bd4\u7b2c\u4e00\u90e8\u5206\u77ed\u4e00\u622a\uff0c\u5728\u66b4\u529b\u7684\u65f6\u5019\u5c31\u5f97\u5728\u679a\u4e3e\u7b2c\u4e00\u90e8\u5206\u7684 $j,k$ \u65f6\u679a\u4e3e\u7b2c\u4e8c\u90e8\u5206\u7684 $j,k$\uff0cpia \u7684\u4e00\u4e0b $m^4$ \u4e86\u3002  \n\u4e8e\u662f\u51fa\u73b0\u4e86\u4e00\u4e2a\u5c0f\u6280\u5de7\uff1a\u4f7f\u7528\u53e6\u4e00\u4e2a\u6570\u7ec4 $g_{i,j,k,l} \\left( l \\in [1,2] \\right)$\u3002  \n- $g_{i,j_g,k_g,1}$ \u8bb0\u5f55 $f_{i,j_f,k_f,1} \\left( j_f \\in \\left[ 1,j_g \\right), k_f \\in \\left( k_g,m \\right] \\right)$ \u7684\u6700\u5927\u503c\uff1b  \n- $g_{i,j_g,k_g,2}$ \u8bb0\u5f55 $f_{i,j_f,k_f,2} \\left( j_f,k_f \\in \\left( j_g,k_g \\right) \\right)$ \u7684\u6700\u5927\u503c\u3002  \n\n\u8fd9\u6837\u5728\u4e0d\u540c\u90e8\u5206\u7684\u8f6c\u79fb\u4e2d\u5c31\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528 $g$ \u6570\u7ec4\u800c\u4e0d\u7528\u679a\u4e3e $j_g,k_g$ \u4e86\u3002  \n\u6700\u540e\u6211\u4eec\u4f1a\u53d1\u73b0 $i$ \u8fd9\u4e00\u7ef4\u53ef\u4ee5\u88ab\u8f7b\u677e\u5730\u538b\u6389\uff0c\u4f46\u597d\u50cf\u53ef\u4ee5\u4e0d\u538b\u3002  \n\u4ee3\u7801\uff1a  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int Max(int x, int y){return x > y ? x : y;}\ninline int Min(int x, int y){return x < y ? x : y;}\ninline int rd(){\n    int x = 0;bool f = true;char c = getchar();\n    while(c < '0' || c > '9'){if(c == '-')f = false;c = getchar();}\n    while(c <= '9' && c >= '0'){x = (x << 1) + (x << 3) + (c ^ 48);c = getchar();}\n    return f ? x : -x;\n}\nconst int N = 2e2 + 10;\n\nint n, m, now, ans;\nint pre[N];\nint f[2][N][N][3], g[2][N][N][2];\n\nint main(){\n    memset(f[now^1], -0x3f, sizeof(f[now^1]));\n    memset(g[now^1], -0x3f, sizeof(g[now^1]));\n    n = rd(), m = rd();\n    for(int i = 1; i <= n; ++i){\n        for(int j = 1; j <= m; ++j)\n            pre[j] = pre[j - 1] + rd();\n        memset(f[now], -0x3f, sizeof(f[now]));\n        memset(g[now], -0x3f, sizeof(g[now]));\n        for(int j = 1; j <= m; ++j){\n            for(int k = j; k <= m; ++k){\n                if(pre[k] == pre[j - 1]){\n                    f[now^1][j][k][0] = Max(0, f[now^1][j][k][0]);\n                    f[now][j][k][0] = f[now^1][j][k][0] + k - j + 1;\n                    f[now][j][k][1] = Max(g[now^1][j][k][0], f[now^1][j][k][1]) + k - j + 1;\n                    f[now][j][k][2] = Max(g[now^1][j][k][1], f[now^1][j][k][2]) + k - j + 1;\n                    ans = Max(ans, f[now][j][k][2]);\n                }\n            }\n        }\n        for(int j = 2; j <= m; ++j)\n            for(int k = m - 1; k >= j; --k)\n                g[now][j][k][0] = Max(f[now][j - 1][k + 1][0], Max(g[now][j - 1][k][0], g[now][j][k + 1][0]));\n        \n        for(int j = m - 2; j >= 1; --j)\n            for(int k = j + 2; k <= m; ++k)\n                g[now][j][k][1] = Max(f[now][j + 1][k - 1][1], Max(g[now][j + 1][k][1], g[now][j][k - 1][1]));\n        \n        now ^= 1;\n    }\n        \n    printf(\"%d\", ans);\n\n    return 0;\n}\n\n\n```",
        "postTime": 1667568614,
        "uid": 209269,
        "name": "Cotsheep",
        "ccfLevel": 0,
        "title": "P7365 [CTSC2002]\u9881\u5956\u5178\u793c \u9898\u89e3"
    },
    {
        "content": "# \u63cf\u8ff0\n\u8fd9\u9053\u9898\u662f\u4e00\u4e2a\u8f83\u4e3a\u7ec6\u8282\u7684 dp \u9898\u76ee\u3002\n\n\u7ec6\u8282\u90e8\u5206\u5728\u4e8e\u5b83\u8db3\u8db3\u6709**\u56db\u4e2a\u8f6c\u79fb\u65b9\u7a0b**\u6240\u4ee5\u53ca\u5176\u7ec6\u8282\u3002\n\n[\u6d1b\u8c37\u535a\u5ba2\u7248](https://www.luogu.com.cn/blog/Binaerbaka/p7365-ti-xie)\u3002\n## \u9898\u610f\n\u5728\u7ed9\u5b9a\u7f51\u683c $0 1$ \u4e2d\u627e\u51fa\u6700\u5927\u7684 $I$ \u5f62\u7684 $0$ \u90e8\u5206\uff0c\u8f93\u51fa\u6700\u5927\u7f51\u683c\u533a\u5757\u3002\n\n\n------------\n\n### \u5148\u524d\u5b9a\u4e49\n\n\u6211\u4eec\u9700\u8981\u7528\u4e24\u7c7b\u6570\u7ec4\u6765\u65b9\u4fbf\u8f6c\u79fb\u3002\n\n1. $dp_{x,l,r,p}$ \u6570\u7ec4\u6765\u8bb0\u5f55 $p$ \u90e8\u5206,\u5176\u4e2d $x$ \u662f\u884c\u6570,\u540c\u65f6\u4e3a\u4e86\u8282\u7701\u7a7a\u95f4\u6211\u4eec\u53ef\u4ee5\u53ea\u7528\u4e24\u4e2a\u6570\u7ec4\u4ea4\u66ff\u4f7f\u7528\uff0c\u6bcf\u6b21\u4f7f\u7528\u4e0a\u4e00\u6b21\u7684\u50a8\u5b58\u7ed3\u679c\u5373\u53ef\uff0c\u8bb0\u5f97\u521d\u59cb\u5316\u3002\n\n2. $f_{l,r,p}$ \u6570\u7ec4\u6765\u8f85\u52a9\u8ba1\u7b97 $dp$ \u4e2d $P2$ \u4e0e $P3$ \u7684\u503c\n\n\u6ce8:\u4e3a\u4ec0\u4e48\u8981\u5229\u7528\u65b0\u6570\u7ec4\u6765\u8f85\u52a9\u8ba1\u7b97\u5462\uff0c\u56e0\u4e3a\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u4e0d\u65ad\u679a\u4e3e\u6bcf\u4e2a $l,r$ \u533a\u95f4\u7684\u6700\u5927\u503c\u6765\u8fdb\u884c\u8f6c\u79fb\u65b9\u7a0b\uff0c\u82e5\u5982\u6b64\uff0c\u590d\u6742\u5ea6\u5c06\u4f1a\u8fbe\u5230\u60ca\u4eba\u7684 $O(n^4)$ \uff0c\u4f46\u5b9e\u9645\u4e0a\u8fd9\u91cc\u7684\u8ba1\u7b97\u4e0e $dp$ \u7684\u8ba1\u7b97\u662f\u72ec\u7acb\u7684\uff0c**\u5f53\u524d**\u4e92\u76f8\u4e0d\u5e72\u6270\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u63d0\u524d\u50a8\u5b58\uff0c\u6765\u964d\u4f4e\u590d\u6742\u5ea6\u3002\n## \u7406\u89e3\n\u7531\u4e8e $I$ \u7684\u72ec\u7279\u6027\u8d28(\u4e0a\u9762\u90e8\u5206\u5927\u4e8e\u4e2d\u95f4\u90e8\u5206\uff0c\u4e2d\u95f4\u90e8\u5206\u5c0f\u4e8e\u4e0b\u9762\u90e8\u5206)\u6240\u4ee5\u6211\u4eec\u9700\u8981\u53bb\u5206\u7c7b\u4e09\u79cd\u60c5\u51b5\u53bb\u8ba8\u8bba\u5404\u81ea\u7684\u8f6c\u79fb\u65b9\u7a0b\u3002\n\n- \u4e0a\u9762\u90e8\u5206 \uff08$P1$\uff09 \u53ef\u4ee5\u76f4\u63a5\u5728\u8fdb\u884c $dp$ \u7684\u8f6c\u79fb\uff0c\u65e0\u9700\u7528\u5230\u7b2c\u4e8c\u4e2a\u6570\u7ec4 \u6240\u4ee5\u5b83\u53ea\u8981\u8dd1 $P1$ \u5faa\u73af \u4e0d\u5fc5\u8fdb\u884c $f$ \u7684\u66f4\u65b0\u3002\n\n- \u4e2d\u95f4\u90e8\u5206 \uff08$P2$\uff09 \u9700\u8981\u5229\u7528 $f$ \u6570\u7ec4\u8f85\u52a9 $dp$ \u8f6c\u79fb\uff0c\u800c\u4e14\u5b83\u8f6c\u79fb\u9700\u8981\u7b26\u5408\u5982\u4e0b\u89c4\u5219\uff1a\n\t\n    - $f_{l,r,1}$ \u662f\u7531 $dp_{x,l,r,1}$ \u5411\u4e0b\u8f6c\u79fb\u7684\uff0c\u7531\u4e8e $P1$ \u6c34\u5e73\u683c\u5b50\u6570\u4e00\u5b9a\u5927\u4e8e $P2$ ( $I$ \u7684\u4e0a\u90e8\u5206\u8981\u51fa\u5934)\uff0c\u6240\u4ee5\u5b83\u5c31\u5e94\u8be5\u5f80\u4e2d\u95f4\u8f6c\u79fb\uff0c\u5219\u53d6 $\\max(f_{l+1,r},f_{l,r+1})$ \u5e76\u4e14\u4e0e\u539f $dp$ \u6570\u7ec4\u505a\u6bd4\u8f83\uff0c\u5373\u65b9\u7a0b\u4e3a \n    \n    $f_{l,r,1}=\\max(dp_{id,l,r,1},\\max(f_{l-1,r,1},f_{l,r+1,1})$\u3002\n    \n    - $f_{l,r,2}$ \u662f\u7531 $dp_{x,l,r,2}$ \u5411\u4e0b\u8f6c\u79fb\u7684\uff0c\u7531\u4e8e $P2$ \u6c34\u5e73\u683c\u5b50\u6570\u4e00\u5b9a\u5c0f\u4e8e $P3$ ( $I$ \u7684\u4e0b\u90e8\u5206\u8981\u51fa\u5934)\uff0c\u6240\u4ee5\u5b83\u5c31\u5e94\u8be5\u5f80\u4e24\u8fb9\u8f6c\u79fb\uff0c\u5219\u53d6 $\\max(f_{l+1,r},f_{l,r-1})$ \u5e76\u4e14\u4e0e\u539f $dp$ \u6570\u7ec4\u505a\u6bd4\u8f83\uff0c\u5373\u65b9\u7a0b\u4e3a \n    \n    $f_{l,r,2}=\\max(dp_{id,l,r,2},\\max(f_{l+1,r,2},f_{l,r-1,2})$\u3002\n\n- \u4e0b\u9762\u90e8\u5206 \uff08$P3$) \u4e0e\u4e2d\u95f4\u90e8\u5206\u76f8\u4f3c\uff0c\u4f46\u662f\u5b83\u53ea\u8981\u5229\u7528 $f$ \u6765\u6c42\u51fa\u5f53\u524d $dp$ \u5c31\u53ef\u4ee5\u76f4\u63a5\u6c42 $ans$ \u503c\u4e86 \u6240\u4ee5\u53ea\u9700\u8981\u8dd1 $P3$ \u90e8\u5206\u5373\u53ef\n\n- \u989d\u5916\uff1a\u7531\u4e8e\u6211\u4eec\u9700\u8981\u53bb\u6765\u5224\u65ad\u67d0\u4e00\u533a\u95f4\u5185\u662f\u5426\u662f\u7a7a\u7684\uff0c\u53ef\u4ee5\u5229\u7528\u524d\u7f00\u548c\u6765\u8ba1\u7b97\uff0c\u53ea\u8981 $sum_R-sum_{L-1} = 0$ \u5219\u4e3a\u7a7a\u3002\n\n\n------------\n\n##### **\u5229\u7528\u56fe\u7247\u4e0e\u4ee3\u7801\u6765\u65b9\u4fbf\u7406\u89e3\u3002**\n![3*3\u7684\u539f\u56fe](https://cdn.luogu.com.cn/upload/image_hosting/j3m3vhd7.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\n\n###### ~~\u4e0d\u77e5\u9053\u5404\u4f4d\u80fd\u4e0d\u80fd\u7406\u89e3\u3002~~\n![\u7406\u89e3\u56fe](https://cdn.luogu.com.cn/upload/image_hosting/x6fjuhsg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u7531\u4e8e $P1$ \u90e8\u5206\u5927\u4e8e $P2$ \u90e8\u5206\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06 $L-1$ \u4e0e $R+1$ \u7684 $f$ \u90e8\u5206\u8f6c\u79fb\u5230 $dp_{L,R}$ \u4e2d \u56e0\u800c\u6709\u65b9\u7a0b\n\n\n$dp_{id,1,r,2}=\\max(dp_{id,1,r,2},f_{l-1,r+1,1}+len)$\u3002\n\n\u540c\u7406\n\u7531\u4e8e $P2$ \u90e8\u5206\u5c0f\u4e8e $P3$ \u90e8\u5206\uff0c\u6240\u4ee5\u6211\u4eec\u7684 $dp_{L,R}$ \u7684\u90e8\u5206\u9700\u8981\u7531 $L+1$ \u548c $R-1$ \u7684 $f$ \u90e8\u5206\u4e2d\u8f6c\u79fb\u5f97\u5230 \u56e0\u800c\u6709\u65b9\u7a0b\n\n$dp_{id,1,r,3}=\\max(Dp_{id,1,r,3},f_{l+1,r-1,2}+len)$\u3002\n\n\u6700\u540e\u5bf9 $dp_{id,l,r,3}$ \u53d6\u4e00\u4e2a\u6700\u5927\u503c\u5373\u4e3a\u7b54\u6848\u3002\n\n\u81ea\u6b64 \u6240\u6709\u7684\u8f6c\u79fb\u65b9\u7a0b\u90e8\u5206\u5df2\u7ecf\u7ed3\u675f\uff0c\u4e0b\u9762\u4fbf\u662f\u4ee3\u7801\u3002\n\n## Std\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=2e2+5;\nint n,m,id,x,ans;\nint dp[2][maxn][maxn][4];\nint sum[maxn];\nint f[maxn][maxn][3];//\u7528\u6765\u8f85\u52a9\u8ba1\u7b97 p2 \u8ddf p3 \u7684\u6700\u503c\u3002\nsigned main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(nullptr),cout.tie(nullptr);\n\tcin>>n>>m;\n\tmemset(f,-0x3f3f3f,sizeof(f));\n\tmemset(dp,-0x3f3f3f,sizeof(dp));\n\tfor(int i=1,x;i<=n;i++){\n\t\tfor(int j=1,x;j<=m;j++)cin>>x,sum[j]=sum[j-1]+x;//\u7ef4\u62a4\u524d\u7f00\u548c\u3002\n\t\tmemset(dp[id],-0x3f3f3f,sizeof(dp[id]));//\u5728\u201c\u5efa\u7acb\u201d\u5b8c\u65b0\u6570\u7ec4\u4e4b\u540e \u521d\u59cb\u5316\u3002\n\t\tfor(int p=3;p>=1;p--){\n\t\t\tfor(int l=1;l<=m;l++){//\u904d\u5386\u5de6\u533a\u95f4\n\t\t\t\tfor(int r=l;r<=m;r++){//\u904d\u5386\u53f3\u533a\u95f4\n\t\t\t\t\tif(sum[r]-sum[l-1]==0){\n\t\t\t\t\t\tint len=r-l+1;\n\t\t\t\t\t\tif(p==1)dp[id^1][l][r][1]=max(dp[id^1][l][r][1],0);//\u521d\u59cb\u5316\u6570\u7ec4 \u5728\u8dd1 p1 \u65f6 \u521d\u59cb\u5316\u4e3a 0 \u6216\u4fdd\u7559\u539f\u503c\u3002\n\t\t\t\t\t\tdp[id][l][r][p]=dp[id^1][l][r][p]+len;//\u5982\u679c\u5148\u524d\u6570\u7ec4\u6709\u5927\u4e8e 0 \u7684\u503c\uff0c\u5219\u7ee7\u627f\u5e76\u52a0\u4e0a\u957f\u5ea6\uff0c\u5426\u5219\u4e0d\u53d8\u3002\n\t\t\t\t\t\tif(p==2)dp[id][l][r][2]=max(dp[id][l][r][2],f[l-1][r+1][1]+len);//\u65b9\u7a0b 3 \u5f97\u3002\n\t\t\t\t\t\tif(p==3)dp[id][l][r][3]=max(dp[id][l][r][3],f[l+1][r-1][2]+len);//\u65b9\u7a0b 4 \u5f97\u3002\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(p==1)\n\t\t\t\tfor(int l=1;l<=m;l++)\n\t\t\t\t\tfor(int r=m;r>=l;r--)\n\t\t\t\t\t\tf[l][r][1]=max(dp[id][l][r][1],\n\t\t\t\t\t\tmax(f[l-1][r][1],f[l][r+1][1]));//\u65b9\u7a0b 1 \u5f97\u3002\n\t\t\tif(p==2)\n\t\t\t\tfor(int l=m;l>=1;l--)\n\t\t\t\t\tfor(int r=l;r<=m;r++)\n\t\t\t\t\t\tf[l][r][2]=max(dp[id][l][r][2],\n\t\t\t\t\t\tmax(f[l+1][r][2],f[l][r-1][2]));//\u65b9\u7a0b 2 \u5f97\u3002\n\t\t\tif(p==3)\n\t\t\t\tfor(int l=1;l<=m;l++)\n\t\t\t\t\tfor(int r=1;r<=m;r++)\n\t\t\t\t\t\tans=max(ans,dp[id][l][r][3]);//\u53d6\u6700\u5927\u503c\u3002\n\t\t\t\n\t\t}\n\t\tid^=1;//\u8f6c\u6362\u5230\u65b0\u6570\u7ec4\u4e0a\u3002\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n\n```\n\n\u795d\u5927\u5bb6\u65e9\u65e5 AC\u3002\n\n##### \u5b9e\u5728\u7406\u89e3\u4e0d\u4e86\u7684\u8bdd\uff0c\u8bb0\u5f97\u624b\u8dd1\u4ee3\u7801\u8bd5\u8bd5\u54e6\u3002\n\n\n\n\n\n\n",
        "postTime": 1682351953,
        "uid": 381806,
        "name": "Binaer_baka",
        "ccfLevel": 4,
        "title": "P7365 \u9898\u89e3"
    }
]
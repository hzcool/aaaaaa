[
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P1298)\n\n\u5176\u4ed6\u5927\u4f6c\u7528\u7684\u65b9\u6cd5\u90fd\u597d\u5f3a\uff0c\u672c\u849f\u84bb\u5728\u8fd9\u91cc\u63a8\u8350\u4e00\u79cd\u65b0\u7684\u65b9\u6cd5\uff1a\u4e8c\u5206\u67e5\u627e\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e n\uff0c\u63a5\u7740\u4e8c\u5206\u67e5\u627e m\uff0c\u8fd9\u6837\u505a\u53ea\u9700\u8981 $O(n\\log_2m)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u663e\u7136\u662f\u53ef\u884c\u7684\u3002\n\n\u90a3\u4e48\u5982\u4f55\u5224\u65ad\u662f\u5426\u6709\u591a\u4e2a\u8ddd\u79bb\u76f8\u540c\u7684\u5206\u6570\u5462\uff1f\u5982\u679c\u76f4\u63a5\u5224\u65ad\u5f53\u524d\u4e8c\u5206\u5f97\u51fa\u7684\u7ed3\u679c\u662f\u5426\u4e0e\u5f53\u524d\u6700\u5c0f\u503c\u76f8\u540c\uff0c\u663e\u7136\u662f\u4e0d\u53ef\u884c\u7684\uff0c\u56e0\u4e3a\u5f53\u524d\u6700\u5c0f\u503c\u4e0d\u4e00\u5b9a\u662f\u6700\u5c0f\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u8fd9\u79cd\u7b97\u6cd5\uff1a\u5982\u679c\u6709\u76f8\u540c\u7684\uff0c\u5c06 bj \u8bbe\u4e3a 1\uff0c\u5982\u679c\u66f4\u65b0\u4e86\u6700\u5c0f\u503c\uff0c\u5c06 bj \u8bbe\u4e3a 0\uff0c\u8fd9\u6837\u5982\u679c\u6700\u540e bj \u662f 1\uff0c\u5c31\u610f\u5473\u7740\u5f53\u524d\u6700\u5c0f\u503c\u4e00\u5b9a\u662f\u6700\u5c0f\u503c\u4e86\uff0c\u81ea\u7136\u5c31\u6709\u591a\u4e2a\u8ddd\u79bb\u76f8\u540c\u7684\u5206\u6570\u4e86\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nbool bj;\nint main()\n{\n\tios::sync_with_stdio(false);//\u52a0\u5feb\u8f93\u5165\u8f93\u51fa\n\tregister int m,n;\n\tscanf(\"%d %d\",&m,&n);\n\tregister double r;\n\tscanf(\"%lf\",&r);\n\tregister int mom=1,son=1,q=0,h=m,mid,i=1;//\u5206\u6bcd\u3001\u5206\u5b50\u3001\u4e8c\u5206\u524d\u6307\u9488\u3001\u4e8c\u5206\u540e\u6307\u9488\u3001\u4e8c\u5206\u4e2d\u70b9\u3001\u5faa\u73af\u8fed\u4ee3\u53d8\u91cf\n\tregister double mi=2147483,ri;//\u5206\u6570\u6700\u5c0f\u503c\u548c\u5faa\u73af\u65f6\u7684\u5206\u6570\n\tregister bool jc=1;\n\tif(n>900000&&m>900000)i=800000;//\u5982\u679c\u8fc7\u5927\uff0c\u5c31\u7f29\u5c0f\u679a\u4e3e\u8303\u56f4\n\tif(m==999999)i=1;\n\tfor(;i<=n;i++)\n\t{\n\t\tq=0,h=m;\n\t\twhile(q<=h)\n\t\t{\n\t\t\tmid=(q+h)>>1;//>>1\u76f8\u5f53\u4e8e/2\uff0c\u4e0d\u8fc7\u901f\u5ea6\u66f4\u5feb\n\t\t\tri=mid*1.0/i;//\u8fd9\u91cc\u5fc5\u987b\u662f*1.0\u800c\u4e0d\u80fd*1\n\t\t\tjc=(son&&mom)?(!((!(mid%son))&&(!(i%mom)))):1;//\u5224\u65ad\u662f\u5426\u51fa\u73b0\u5206\u5b50\u4e0e\u5206\u6bcd\u90fd\u80fd\u88ab\u6700\u5c0f\u503c\u5206\u5b50\u4e0e\u6700\u5c0f\u503c\u5206\u6bcd\u6574\u9664\uff0c\u56e0\u4e3a\u80fd\u6574\u9664\u7684\u662f\u4e0d\u7b97\u4e24\u4e2a\u76f8\u540c\u5206\u6570\u7684\n\t\t\tmax(ri,r)-min(ri,r)==mi&&jc&&(h!=mid)?bj=1:1;//\u5982\u679c\u51fa\u73b0\u76f8\u540c\u7684\uff0c\u5c06bj\u8bbe\u4e3a1\uff0c\u8fd9\u91cc\u7528\u4e86\u4e09\u76ee\u8fd0\u7b97\u7b26\uff0c\u6bd4if\u8981\u8282\u7701\u65f6\u95f4\n\t\t\tif(max(ri,r)-min(ri,r)<mi)mi=max(ri,r)-min(ri,r),son=mid,mom=i,bj=0;//\u66ff\u6362\n\t\t\tif(ri<r)q=-~mid;//-~a\u76f8\u7b49\u4e8ea+1\n\t\t\telse if(ri>r)h=mid-1;//\u4e8c\u5206\u6a21\u677f\n\t\t\telse break;\n\t\t}\n\t}\n\tregister short pj=__gcd(son,mom);//\u7ea6\u5206\uff0c\u76f4\u63a5\u9664\u4ee5\u6700\u5927\u516c\u7ea6\u6570\n\tbj==0?printf(\"%d/%d\",son/pj,mom/pj):printf(\"TOO MANY\");\n \treturn 0;\n}\n```",
        "postTime": 1641294375,
        "uid": 451825,
        "name": "JDuru",
        "ccfLevel": 0,
        "title": "P1298 \u9898\u89e3"
    },
    {
        "content": "wa\u4e86N\u904d\u7ec8\u4e8eA\u4e86\u3002\u3002\u3002\n\n\u770b\u5230\u8fd9\u9898\uff0c\u6700\u5bb9\u6613\u60f3\u5230\u7684\u5c31\u662f\u679a\u4e3e\u5206\u5b50\u548c\u5206\u6bcd\u4e00\u4e2a\u4e2a\u7b97\uff0c\u7136\u800c\u8fd9\u6837O(nm)\u80af\u5b9a\u8981\u70b8\n\n\u8fdb\u4e00\u6b65\u601d\u8003\uff0c\u53d1\u73b0\u53ef\u4ee5\u679a\u4e3e\u5206\u6bcd\uff0c\u7136\u540e\u5c06\u5206\u6bcd\u4e58\u4ee5\u7ed9\u51fa\u7684\u5c0f\u6570\u5f97\u5230\u5206\u5b50\u7684\u8fd1\u4f3c\u503c\uff0c\u8fd9\u6837\u4fbf\u5927\u5927\u51cf\u5c0f\u4e86\u65f6\u95f4\u590d\u6742\u5ea6\n\n\u7136\u540e\u9898\u76ee\u4e2d\u8981\u6c42\u5206\u5b50\u5206\u6bcd\u4e92\u8d28\uff0c\u6240\u4ee5\u53c8\u60f3\u5230\u7528\u8f97\u8f6c\u76f8\u9664\u6c42gcd\uff0c\u4f46\u662f\u8fd9\u6837\u4f1aT\uff01\uff01\uff01\n\n\u518d\u4ed4\u7ec6\u4e00\u60f3\uff0c\u53d1\u73b0\u8fd9\u4e5f\u53ef\u4ee5\u7528O(1)\u89e3\u51b3\uff1a\n\n\u8bbe\u5f53\u524d\u5206\u5b50\u5206\u6bcd\u4e3ax,y,\u4e14x=ad,y=bd(d>1)\uff0c\u4e8e\u662f\u53ea\u67092\u79cd\u60c5\u51b5\uff1a\n\n1\u3001a\uff0cb\u4e0d\u662f\u5f53\u524d\u6700\u4f18\u89e3\uff0c\u90a3\u4e48x,y\u6211\u4eec\u5c31\u4e0d\u7528\u7ba1\u4e86\n\n2\u3001a\uff0cb\u662f\u5f53\u524d\u6700\u4f18\u89e3\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u7279\u5224\u4e00\u4e0b:\u5982\u679ca\\*y==b\\*x\uff0c\u90a3\u4e48\u8bf4\u660ex,y\u4e0d\u4e92\u8d28\uff0c\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\u4e5f\u4e0d\u7528\u7ba1\u4e86\n\n\u4e3b\u8981\u601d\u60f3\u5c31\u662f\u8fd9\u4e9b\uff0c\u4f46\u662f\u8fd9\u9898\u8fd8\u6709\u5f88\u591a\u7ec6\u8282\u8981\u6ce8\u610f\uff0c\u53cd\u6b63\u6211\u88ab\u5751\u4e86\u5f88\u591a\u6b21......\n\n\u4e0a\u4ee3\u7801(\u8bed\u6587\u4e0d\u597d\uff0c\u51d1\u5408\u770b\u5427)\n\n```cpp\n#include<cstdio>\n#define For(i,j,k) for(register int i=j;i<=k;++i)\nusing namespace std;\nint main(){\n    double xs,cha=10.0,f; //cha\u5b58\u50a8\u5f53\u524d\u7684\u6700\u4f18\u89e3\u4e0e\u5c0f\u6570\u7684\u63a5\u8fd1\u7a0b\u5ea6\n    int m,zi,mu,n,ans=-1,js; //ans\u8d4b\u521d\u503c-1\uff0c\u540e\u9762\u6709\u5927\u7528\n    scanf(\"%d%d\",&n,&m); scanf(\"%lf\",&xs); //\u8f93\u5165\uff0cxs\u5c31\u662f\u5c0f\u6570\u503c\uff0cn\u662f\u5206\u5b50\uff0cm\u662f\u5206\u6bcd\uff0c\u548c\u9898\u76ee\u91cc\u76f8\u53cd\n    For(i,1,m){//\u679a\u4e3e\u5206\u6bcd\n        js=xs*i; //\u5f53\u524d\u5206\u5b50\u7684\u8fd1\u4f3c\u503c\uff0c\u5148\u5411\u4e0b\u53d6\u6574\n        if (js>n) break; //\u5927\u4e8en\u5c31\u53ef\u4ee5\u9000\u51fa\u4e86\n        f=(double)js/(double)i; //f\u662f\u5f53\u524d\u7684\u5206\u6570\u503c\n        if (i==1) {ans=1; cha=xs-f; zi=js; mu=i;} //zi\u662f\u5206\u5b50\uff0cmu\u662f\u5206\u6bcd\uff0c\u8fd9\u4e00\u884c\u662f\u8d4b\u521d\u503c\uff0c\u8981\u4e0d\u7136\u540e\u9762\u4f1a\u70b8\uff0c\u6211\u88ab\u5361\u597d\u4e45\n        else if (zi*i!=mu*js){ //\u5224\u65adi\u548cjs\u662f\u5426\u4e92\u8d28\uff0c\u539f\u7406\u4e0a\u9762\u6709\n            if (xs-f==cha) ans++; //\u5982\u679c\u5c0f\u6570\u4e0e\u5206\u6570\u7684\u5dee\u4e0e\u5f53\u524d\u6700\u4f18\u76f8\u540c\u5c31ans++,\u4e4b\u540e\u8f93\u51fa\u65f6ans\u5927\u4e8e1\u5c31\u8f93\u51fatoo many\n        //\u56e0\u4e3af\u662f\u5411\u4e0b\u53d6\u6574\u7684\u5206\u6570\u503c\uff0c\u6240\u4ee5\u80fd\u4fdd\u8bc1\u5c0f\u6570\u5927\u4e8e\u7b49\u4e8e\u5206\u6570\u503c\uff0c\u4e0d\u7528\u53d6\u7edd\u5bf9\u503c\n            if (xs-f<cha){\n                ans=1; cha=xs-f; zi=js; mu=i;\n            }\n        }\n        js++; //\u63a5\u4e0b\u6765\u5411\u4e0a\u53d6\u6574\uff0c\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\u90fd\u548c\u4e0a\u9762\u5dee\u4e0d\u591a\u4e86\n        if (zi*i!=mu*js&&js<=n){\n            f=(double)js/(double)i;\n            if (f-xs==cha) ans++; //\u5411\u4e0a\u53d6\u6574\u7684\u5206\u6570\u503c\u4fdd\u8bc1\u5927\u4e8e\u7b49\u4e8e\u5c0f\u6570\u503c\uff0c\u4e5f\u4e0d\u7528\u53d6\u7edd\u5bf9\u503c\n            if (f-xs<cha){\n                ans=1; cha=f-xs; zi=js; mu=i;\n            }\n        }\n    }\n    if (ans>1) printf(\"TOO MANY\\n\");\n    else if (ans==-1) printf(\"%d/1\\n\",n); //\u5982\u679cans\u8fd8\u662f\u521d\u503c-1\uff0c\u5c31\u8bf4\u660e\u5206\u5b50\u53ef\u53d6\u7684\u6700\u5927\u503cn\u5c0f\u4e8e\u5c0f\u6570\u503cxs(\u56e0\u4e3ai=1\u5c31\u9000\u51fa\u6765\u4e86)\uff0c\u8fd9\u65f6\u76f4\u63a5\u8f93\u51fa\u5206\u5b50\u6700\u5927\uff0c\u5206\u6bcd\u6700\u5c0f\u7684\u60c5\u51b5(\u6211\u4e4b\u524d\u6ca1\u52a0\u8fd9\u4e2a\u7279\u5224\u88ab\u5361\u597d\u51e0\u6b21)\n    else printf(\"%d/%d\\n\",zi,mu); //\u5982\u679cans\u4e3a1\u5c31\u6b63\u5e38\u8f93\u51fa\n    return 0;\n}\n```",
        "postTime": 1499323408,
        "uid": 20821,
        "name": "wjy666",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1298 \u3010\u6700\u63a5\u8fd1\u7684\u5206\u6570\u3011"
    },
    {
        "content": "\u66b4\u529b\u592a\u4e0d\u4f18\u96c5\u4e86\uff0c\u6765\u8bb2\u4e00\u79cd\u4f18\u96c5\u7684\u505a\u6cd5\n\n\u6709\u4e00\u79cd\u795e\u5947\u7684\u4e1c\u897f\u53eb\u505aStern-Brocot\u6811\n\n\u5148\u4e0a\u56fe\n\n![](https://img-blog.csdn.net/20131019215015671?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMTM3OTM4NA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)\n\n(\u56fe\u7247\u6765\u81ea[\u8fd9\u91cc](https://blog.csdn.net/eternaldespair/article/details/12876093))\n\n\u521d\u59cb\u4e24\u4e2a\u5206\u6570$0/1$\u548c$1/0$\uff0c\u7136\u540e\u6bcf\u6b21\u5bf9\u4e8e\u76f8\u90bb\u7684\u4e24\u4e2a\u5206\u6570$m/n$\u548c$m'/n'$\uff0c\u628a$(m+m')/(n+n')$\u63d2\u5165\u5230\u5b83\u4eec\u4e2d\u95f4.\n\n\u53ef\u4ee5\u8bc1\u660e\u5b83\u679a\u4e3e\u4e86\u6240\u6709\u975e\u8d1f\u6709\u7406\u6570.\n\n\u5bf9\u4e8e\u4efb\u4f55\u9636\u6bb5\u7684\u76f8\u90bb\u5206\u6570\u90fd\u6709$m'n-mn'=1$\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u5f52\u7eb3\u6cd5\u8bc1\u660e.\u4e8e\u662f\u53ef\u4ee5\u5f97\u5230\u4e24\u4e2a\u7ed3\u8bba:\n\n1. $gcd(n,m)=1$\uff0c\u6839\u636e\u88f4\u8700\u5b9a\u7406\n\n2. $\\frac{m}{n}<\\frac{m+m'}{n+n'}<\\frac{m'}{n'}$ \u5f88\u660e\u663e\n\n\u8fd9\u4e24\u4e2a\u6027\u8d28\u53ef\u4ee5\u4fdd\u8bc1\u6784\u9020\u51fa\u6240\u6709\u975e\u8d1f\u6709\u7406\u6570\uff0c\u56e0\u4e3a\u6bcf\u5f80\u4e0b\u8d70\u4e00\u5c42\u5206\u5b50\u548c\u5206\u6bcd\u4e2d\u81f3\u5c11\u6709\u4e00\u4e2a\u4f1a\u589e\u52a0.\n\n\u8fd8\u6709\u4e00\u70b9\u662f\u8fd9\u68f5\u6811\u662f\u4e00\u4e2a\u4e8c\u53c9\u641c\u7d22\u6811\n\n\u5bf9\u4e8e\u4e00\u4e2a\u6570$x$\uff0c\u5bfb\u627e\u79bb\u4ed6\u6700\u8fd1\u7684\u5206\u6570\u53ea\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u7684\u64cd\u4f5c:\n\n```cpp\nint sgn(double x){return (x>eps)-(x<-eps);}\nint lm=0,ln=1,rm=1,rn=0;\nfor(int mm=1,nn=1;mm<=m&&nn<=n;mm=lm+rm,nn=ln+rn)\n{\n\tswitch(sgn(x-1.*mm/nn))\n\t{\n\t\tcase 0:{printf(\"%d/%d\\n\",mm,nn);return 0;}\n\t\tcase 1:lm=mm,ln=nn;break;\n\t\tcase -1:rm=mm,rn=nn;break;\n\t}\n}\n```\n\u548c\u4e8c\u53c9\u67e5\u627e\u6811\u64cd\u4f5c\u5dee\u4e0d\u591a.\n\n\u4e0d\u8fc7\u8fd9\u6837\u53ea\u662f\u9650\u5b9a\u4e86$x$\u5728$[lm/ln,rm/rn]$\u8303\u56f4\u5185\uff0c\u8fd8\u9700\u8981\u5224\u65ad\u4e00\u6b65\u624d\u884c.\n\n\u5b9e\u73b0\u4e0a\u4e3a\u4e86\u51cf\u5c0f\u5e38\u6570\u89c4\u907f\u4e86\u9664\u6cd5.\u4e0d\u8fc7\u8fd9\u9898\u7684\u6570\u636e\u770b\u8d77\u6765\u8fd8\u662f\u633a\u6c34\u7684\uff0c\u4f18\u4e0d\u4f18\u5316\u4e00\u4e2a\u6837\n\n\u590d\u6742\u5ea6$O(n)$\uff0c\u4f46\u5b9e\u9645\u4e0a\u53ea\u6709\u6781\u5927\u548c\u6781\u5c0f\u7684\u6570\u4f1a\u5361\u5230\u8fd9\u4e2a\u7ea7\u522b\uff0c\u4e00\u822c\u662f$O(\\log n)$\u5de6\u53f3\u7684(\u6590\u6ce2\u90a3\u5951\u6570\u5217\u5f0f\u589e\u957f?).\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst double eps=1e-15;\nint n,m;double x;\nint sgn(double x){return (x>eps)-(x<-eps);}\nint main()\n{\n\tscanf(\"%d%d\",&m,&n);\n\tscanf(\"%lf\",&x);\n\tint lm=0,ln=1,rm=1,rn=0;\n\tfor(int mm=1,nn=1;mm<=m&&nn<=n;mm=lm+rm,nn=ln+rn)\n\t{\n\t\tswitch(sgn(x*nn-mm))\n\t\t{\n\t\t\tcase 0:{printf(\"%d/%d\\n\",mm,nn);return 0;}\n\t\t\tcase 1:lm=mm,ln=nn;break;\n\t\t\tcase -1:rm=mm,rn=nn;break;\n\t\t}\n\t}\n\tif(rn==0){printf(\"%d/%d\\n\",lm,ln);return 0;}\n\tswitch(sgn((x-1.*lm/ln)-(1.*rm/rn-x)))\n\t{\n\t\tcase 1:printf(\"%d/%d\\n\",rm,rn);break;\n\t\tcase 0:puts(\"TOO MANY\");break;\n\t\tcase -1:printf(\"%d/%d\\n\",lm,ln);\n\t}\n}\n```\n\u731c\u6d4b$rank1$\u4e5f\u662f\u5199\u7684\u8fd9\u4e2a\u4e1c\u897f\u5e76\u4e14\u65b0\u8bc4\u6d4b\u59ec\u8dd1\u5f97\u7565\u6162(",
        "postTime": 1557388652,
        "uid": 22136,
        "name": "qwaszx",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P1298 \u3010\u6700\u63a5\u8fd1\u7684\u5206\u6570\u3011"
    },
    {
        "content": "**upd\uff1a\u672c\u9898\u89e3\u5df2\u7ecf\u901a\u8fc7\u5ba1\u6838\uff0c\u9700\u8981\u4fee\u6b63\u4e00\u4e2a\u590d\u6742\u5ea6\u3002**\n\n\u8fd9\u662f\u4e00\u79cd\u903c\u8fd1\u5206\u6570\u7684\u539f\u7406\u3002\n\n\u5bf9\u4e8e\u5206\u6570\n\n$$\\dfrac{x}{y}<\\dfrac{u}{v}$$\n\n\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u65b0\u7684\u5206\u6570\n\n$$\\dfrac{x}{y}<\\color{red}\\dfrac{x+u}{y+v}\\color{black}<\\dfrac{u}{v}$$\n\n\u8fd9\u4e2a\u8bc1\u660e\u53ef\u4ee5\u8003\u8651\u76f4\u63a5\u901a\u5206\u53bb\u8bc1\uff1a\n\n\u8003\u8651\u5de6\u8fb9\uff1a\n\n$$\\dfrac{x}{y}<\\color{red}\\dfrac{x+u}{y+v}$$\n\n\u8f6c\u8bc1\uff1a\n\n$$x(y+v)<y(x+u)$$\n\n\u8f6c\u8bc1\uff1a\n\n$$xv<yu$$\n\n\u8f6c\u8bc1\uff1a\n\n$$\\dfrac{x}{y}<\\dfrac{u}{v}$$\n\n\u8fd9\u662f\u6211\u4eec\u7684\u524d\u63d0\uff0c\u6240\u4ee5\u5f97\u8bc1\u3002\u53e6\u4e00\u8fb9\u7c7b\u4f3c\u7684\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u8f6c\u5316\u5230\u8fd9\u4e00\u6b65\u4e0a\u3002\n\n\u636e\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u6700\u597d\u590d\u6742\u5ea6 $O(\\log M)$ \u7684\u505a\u6cd5\u3002\n\n\u8003\u8651\u6bcf\u6b21\u4e24\u6570\u76f8\u52a0\uff0c\u5f97\u5230\u7684\u4e00\u5b9a\u662f\u6700\u5c0f\u60c5\u51b5\u4e0b\u7684\u6700\u903c\u8fd1\u89e3\u3002\n\n\u6700\u574f\u590d\u6742\u5ea6 $O(M)$\uff0c\u8003\u8651\u6784\u9020\n\n```cpp\n1 10000000\n0.0000001\n```\n\n\u5f0f\u7684\u6570\u636e\u5373\u53ef\uff0c\u6838\u5fc3\u4ee3\u7801\uff1a\n\n```cpp\nwhile(1){\n    xu=x+u,yv=y+v,xyuv=xu/yv;\n    if((xu>m||yv>n)&&t)break;\n    if(xyuv<p)x=xu,y=yv;\n    else u=xu,v=yv;\n    if(ab(xyuv,p)==cha)ans++;\n    else ans=1;\n    t=1;\n} // \u521d\u4e00\u65f6\u671f\u7684\u4ee3\u7801\u7565\u6709\u70b9\u4e11\n```",
        "postTime": 1632494613,
        "uid": 50606,
        "name": "\u8a00\u7422\u10d3",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570"
    },
    {
        "content": "update 2022/11/20\uff1a\u589e\u52a0\u4e86TOO MANY\u7684\u5224\u5b9a\n\n\u8fd9\u9053\u9898\u5bf9\u4e8e\u4e00\u4e2a\u5230\u5904\u8e29\u5751\u7684\u4eba\uff0c\u6765\u5206\u4eab\u4e00\u4e0b\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u8003\u8651\u679a\u4e3e\u5206\u5b50\u5206\u6bcd\n\n\u8fd9\u4e2a\u7b97\u6cd5\u5f88\u7b80\u5355\uff0c\u5f88\u53ef\u60dc\uff0c\u590d\u6742\u5ea6\u662f $O(nm)$ \u7684\uff0c\u4e0d\u8db3\u4ee5\u901a\u8fc7\u672c\u9898\n\n\u6211\u4eec\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5206\u5b50\uff0c\u53ea\u6709\u4e24\u4e2a\u5206\u6bcd\u6709\u7528\uff0c\u8bbe\u5206\u5b50\u4e3a $n_0$ \u5206\u6bcd\u4e3a $m_1,m_2$ \u3002\n\n\u6613\u5f97 $m_1=n_0\\times k,m_2=m_1+1$\n\n\u90a3\u4e48\u770b\u770b\u80fd\u4e0d\u80fd\u7b26\u5408\u6761\u4ef6\u5373\u53ef\n\n\u9996\u5148\u662f\u6700\u7b80\u5206\u6570\n\n\u76f4\u63a5\u5224 $\\gcd$ \u80af\u5b9a\u8d85\u65f6\n\n\u600e\u4e48\u529e\u5462\uff1f\n\n$\\dfrac{a}{b}=\\dfrac{c}{d}$\n\n\u5316\u7b80\u5f97 $ad=bc$\n\n\u53ea\u9700\u5224\u65ad\u6700\u4f18\u89e3\u5206\u5b50$u$\u4e0e\u76ee\u524d\u5224\u65ad\u5206\u6bcd$b$\u7684\u4e58\u79ef\u548c\u6700\u4f18\u89e3\u5206\u6bcd$d$\u4e0e\u76ee\u524d\u5224\u65ad\u5206\u5b50$a$\u7684\u4e58\u79ef\u76f8\u4e0d\u76f8\u7b49\u5c31\u884c\u4e86\n\n\u518d\u770b\u770b\u662f\u5426\u6700\u63a5\u8fd1\n\n$|k-\\dfrac{a}{b}|<|k-\\dfrac{c}{d}|$\n\n$|kbd-ad|<|kbd-bc|$\n\n\u53ea\u9700\u5224\u65ad $|kbd-ad|$ \u548c $|kbd-bu|$ \u54ea\u4e2a\u66f4\u5927\u5373\u53ef\n\n\u5982\u4f55\u5224\u65ad\u552f\u4e00\u6027\uff1f\n\n\u9996\u5148\uff0c\u5efa\u7acb\u4e00\u4e2a\u53d8\u91cf\uff0c\u8bb0\u5f55\u73b0\u5728\u4e00\u6837\u7684\u6709\u591a\u5c11\u4e2a\n\n\u6700\u540e\u770b\u662f\u5426\u4e3a1\n\n\u5177\u4f53\u5b9e\u73b0\u89c1\u4ee3\u7801\n\n\u6700\u540e\uff0c\u4e0a\u4ee3\u7801\uff01\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long s=0,u,d,m,n,m1,m2;\ndouble k;\ninline int bj(long long a,long long b,long long c,long long d)\n{\n\tregister double s1,s2;\n\ts1=abs(a*d-k*b*d);\n\ts2=abs(c*b-k*b*d);\n\tif(abs(s1-s2)<1e-11)return 0;\n\tif(s1<s2)return -1;\n\treturn 1;\n}\ninline void check(long long a,long long b)\n{\n\tif(a>m)a=m;\n\tif(s==0)\n\t{\n\t\ts=1;\n\t\tu=a;\n\t\td=b;\n\t\treturn;\n\t}\n\tif(a*d==b*u)return;\n\tif(bj(a,b,u,d)==0)s++;\n\tif(bj(a,b,u,d)==-1)\n\t{\n\t\ts=1;\n\t\tu=a;\n\t\td=b;\n\t}\n}\nint main()\n{\n\tcin>>m>>n>>k;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tm1=i*k;\n\t\tm2=m1+1;\n\t\tif(true)check(m1,i);\n\t\tif(true)check(m2,i);\n        else cout<<\"IAKIOI\";\n\t}\n\tif(s==1)cout<<u<<'/'<<d;\n\telse cout<<\"TOO MANY\";\n\treturn 0;\n}\n```\n\n\u795d\u6d1b\u8c37\u8d8a\u529e\u8d8a\u597d",
        "postTime": 1668345926,
        "uid": 663638,
        "name": "FeS2_qwq",
        "ccfLevel": 0,
        "title": "P1298 \u9898\u89e3"
    },
    {
        "content": "**Update 6/18 14:25**:\u53d1\u73b0\u8fd9\u73a9\u610f\u5c31\u662f Stern-Brocot \u6811\u7684\u4e00\u68f5\u5b50\u6811\u3002\u679c\u7136\u8fd8\u662f\u592a\u83dc\u4e86\u3002\u3002\u3002\n\n\u4e0b\u9762\u7684\u67d0\u4e9b\u8bdd\u8bf7\u65e0\u89c6\u3002\n\n***\n\n\u672c\u4eba\u592a\u83dc\u4e0d\u77e5\u9053 $\\text{Stern-Brocot}$ \u6811\u3002\u7136\u540e\u5728\u67d0\u6b21\u6a21\u62df\u8d5b\u4e2d\u63a8\u51fa\u4e86\u4e00\u4e2a\u795e\u5947\u7684\u50cf\u4e8c\u53c9\u6811\u7684\u7ed3\u6784\uff0c~~\u4f46\u662f\u5b83\u5e76\u6ca1\u6709\u4ec0\u4e48\u7279\u6b8a\u6027\u8d28\u6240\u4ee5\u6ca1\u7528\u4e0a~~\uff0c\u7136\u540e\u770b\u5230\u4e86\u8fd9\u9898\u3002\n\n\u8d5b\u65f6\u63a8\u51fa\u6765\u7684\u5927\u6982\u957f\u8fd9\u6837\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/iolx2m8d.png)\n\n~~\u548c Stern-Brocot \u6811\u633a\u50cf\u7684~~\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8282\u70b9\uff0c\u8bb0\u5176\u7236\u8282\u70b9\u70b9\u6743\u4e3a $\\frac{a}{b}$\uff0c\u4e0a\u65b9\u7b2c\u4e00\u4e2a\u65b9\u5411\u53d1\u751f\u53d8\u5316\u7684\u8282\u70b9\u7684\u7236\u8282\u70b9\u70b9\u6743\u4e3a $\\frac{c}{d}$\uff0c\u5219\u8be5\u70b9\u70b9\u6743\u4e3a $\\frac{a+c}{b+d}$\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u5927\u529b\u5728\u6811\u4e0a\u641c\u7d22\u4e86\u3002\u8bbe\u76ee\u6807\u4e3a $t$\uff0c\u5f53\u524d\u8282\u70b9\u4e3a $f$\uff0c$t \\lt f$\u65f6\u5728\u5de6\u5b50\u6811\u627e\uff0c\u5426\u5219\u5728\u53f3\u5b50\u6811\u627e\u3002\n\n\u5bf9\u4e8e\u672c\u9898\u628a\u521a\u5f00\u59cb\u7684\u4e09\u4e2a\u8282\u70b9\u8bbe\u4e3a $\\frac{0}{1},\\frac{1}{1},\\frac{1}{0}$ \u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u574f\u662f $\\Theta(n)$ \u7684\uff08$n,m$ \u540c\u9636\uff09\n\nCode:\n\n```cpp\n#include<Atziluth.h>\nusing namespace std;\n#define reg register\n#define opr operator\n#define ll __int128\n#define ret return\n#define gc getchar\n#define pc putchar\n#define cst const\n#define il inline\nll cnt;\nil ll rd()\n{\n\treg ll res=0,lab=1;cnt=0;\n\treg char ch=gc();\n\twhile((ch<'0'||ch>'9')&&ch!=EOF){if(ch=='-')lab=-lab;ch=gc();}\n\twhile(ch>='0'&&ch<='9')++cnt,res=(res<<3)+(res<<1)+(ch&15),ch=gc();\n\treturn res*lab;\n}\nil void prt(ll x,char t='\\n')\n{\n\tstatic char ch[40];reg int tp=0;\n\tif(!x){fputs(\"0\",stdout);if(t)pc(t);return;}\n\tif(x<0)pc('-'),x=-x;\n\twhile(x)ch[++tp]=(x%10)^48,x/=10;\n\twhile(tp)pc(ch[tp--]);\n\tif(t)pc(t);\n}\nil ll umax(ll a,ll b){return a>b?a:b;}\nil ll umin(ll a,ll b){return a<b?a:b;}\nil ll uabs(ll x){return x>0?x:-x;}\nil ll qpow(ll n,ll e=HgS-2,ll p=HgS)\n{\n\treg ll res=1;\n\twhile(e){if(e&1)res=res*n%p;n=n*n%p;e>>=1;}\n\treturn res;\n}\nll n,m,f[15]={1},t1,t2;\nil ll gcd(ll a,ll b){return b?gcd(b,a%b):a;}\nstruct frac\n{\n\tll u,d;\n\tfrac():u(0),d(1){}\n\tfrac(ll a,ll b){ll _=gcd(a,b);u=a/_,d=b/_;}\n\tbool opr<(cst frac&_)cst{ret u*_.d<d*_.u;}\n\tbool opr>(cst frac&_)cst{ret u*_.d>d*_.u;}\n\tbool opr==(cst frac&_)cst{ret u*_.d==d*_.u;}\n\tfrac opr+(cst frac&_)cst{ret frac(u*_.d+_.u*d,d*_.d);}\n\tfrac opr-(cst frac&_)cst{ret frac(u*_.d-_.u*d,d*_.d);}\n\tfrac opr*(cst frac&_)cst{ret frac(u*_.u,d*_.d);}\n\tfrac opr/(cst frac&_)cst{ret frac(u*_.d,d*_.u);}\n\tfrac opr*(cst ll&_)cst{ret frac(u*_,d);}\n\tfrac opr/(cst ll&_)cst{ret frac(u,d*_);}\n}t,ans,l,r;\nil frac uabs(frac x){x.u=uabs(x.u),x.d=uabs(x.d);return x;}\nil frac mid(frac a,frac b){return frac(a.u+b.u,a.d+b.d);}\nil void prt(frac x,char tail='\\n'){prt(x.u,'/');prt(x.d,tail);}\nil void work(frac f,frac l,frac r)\n{\n\tif(f.u>n||f.d>m)return;\n\tif(uabs(f-t)<uabs(ans-t))cnt=1,ans=f;\n\telse if(uabs(f-t)==uabs(ans-t))++cnt;\n\tif(t<f)work(mid(l,f),l,f);\n\telse work(mid(f,r),f,r);\n}\nint main()\n{\n\tn=rd();m=rd();t1=rd();t2=rd();\n\tfor(int i=1;i<=cnt;++i)f[i]=f[i-1]*10;\n\tif(t1>n){prt((frac){n,1});return 0;}\n\tt=frac(t1*f[cnt]+t2,f[cnt]);ans=frac(0,1);\n\tif(t.u==t.d){puts(\"1/1\");return 0;}\n\tl.u=r.d=0;l.d=r.u=1;cnt=1;work(mid(l,r),l,r);\n\tif(!(ans==l)&&uabs(ans-t)==uabs(l-t))++cnt;\n\tif(!(ans==r)&&uabs(ans-t)==uabs(r-t))++cnt;\n\tif(cnt==1)prt(ans);else puts(\"TOO MANY\");\n\treturn 0;\n}\n```\n\n~~\u6240\u4ee5 Atziluth \u8fd9\u4e2a\u5c51\u5728\u8d5b\u65f6\u63a8\u51fa\u4e86 Stern-Brocot \u6811\uff1f~~",
        "postTime": 1623937401,
        "uid": 224991,
        "name": "Presentation_Emitter",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1298 \u3010\u6700\u63a5\u8fd1\u7684\u5206\u6570\u3011"
    },
    {
        "content": "**\u5206\u6570\u903c\u8fd1\u6cd5\u3002**\n\n\u5148\u5f15\u51fa\u4e00\u4e2a\u5b9a\u7406\u3002\n\n\u5df2\u77e5\u4e24\u5206\u6570 $\\dfrac{a}{b}$ \u548c $\\dfrac{c}{d}$\uff0c \u4e14 $\\dfrac{a}{b} < \\dfrac{c}{d}$\uff0c\u5219\u6709\u7ed3\u8bba\uff1a\n\n$\\dfrac{a}{b} < \\dfrac{a + c}{b + d} < \\dfrac{c}{d}$\n\n\u8bc1\u660e\u5982\u4e0b\uff1a\n\n\u5047\u8bbe $\\dfrac{a}{b} < \\dfrac{a + c}{b + d}$ \u8fd9\u4e00\u547d\u9898\u4e3a\u771f\u3002\n\n$\\because \\dfrac{a}{b} < \\dfrac{a + c}{b + d}$\n\n$\\therefore a(b + d) < b(a + c)$\n\n\u4e24\u8fb9\u540c\u65f6\u6d88\u53bb $ab$\uff0c\u5f97\uff1a\n\n$ad < bc$\n\n$\\therefore\\dfrac{a}{b} < \\dfrac{c}{d}$\n\n\u539f\u547d\u9898\u5f97\u8bc1\u3002\n\n\u540c\u7406\uff0c\u4e0d\u7b49\u5f0f\u7684\u53f3\u534a\u90e8\u5206\u4e5f\u53ef\u7528\u6b64\u65b9\u6cd5\u6c42\u8bc1\u3002\n\n\n------------\n\n\u56de\u5230\u6b63\u9898\u3002\n\n\u56e0\u4e3a\u9898\u76ee\u7ed9\u51fa\u7684\u662f\u4e00\u4e2a\u6b63\u6570\uff0c\u6211\u4eec\u5c06\u5176\u8bbe\u4e3a $x$\uff0c\u5219\u6709 $0 < x < +\\infty$\u3002\n\n\u8bbe $a=0,b=1,c=1,d=0$\uff0c\u4e14\u4ee4 $\\dfrac{1}{0}=+\\infty$\uff0c\u5219 $x$ \u5fc5\u5728 $[\\dfrac{a}{b},\\dfrac{c}{d}]$ \u8303\u56f4\u5185\u3002\n\n\u4ee4 $e=a+c$\uff0c$f=b+d$\uff0c\u90a3\u4e48 $\\dfrac{a}{b}<\\dfrac{e}{f}<\\dfrac{b}{d}$ \u4e14 $\\dfrac{e}{f}$ \u5fc5\u4e3a\u65e2\u7ea6\u5206\u6570\uff0c\u7136\u540e\u67e5\u8be2\u76ee\u6807\u5728 $[\\dfrac{a}{b},\\dfrac{e}{f}]$\uff0c\u8fd8\u662f $[\\dfrac{e}{f},\\dfrac{c}{d}]$ \u5185\u3002\n\n\u7406\u8bba\u590d\u6742\u5ea6 $O(\\log n)$\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint m, n, ra, rb;\ndouble r, mx;\nbool flag = 0;\nsigned main() {\n\tios::sync_with_stdio(0);\n\tcin.tie(0), cout.tie(0);\n\tint a = 0, b = 1, c = 1, d = 0;\n\tcin >> m >> n >> r;\n\tra = 0, rb = 1, mx = r;\n\twhile(1) {\n\t\tint e = a + c, f = b + d;\n\t\tif(e > m || f > n) break;\n\t\tif(fabs(1.0000 * e / f - r) == mx) flag = 1;\n\t\tif(fabs(1.0000 * e / f - r) < mx) {\n\t\t\tra = e, rb = f, mx = fabs(1.0000 * e / f - r), flag = 0;\n\t\t\tif(mx == 0) break;\n\t\t}\n\t\tif(1.0000 * e / f < r)\n\t\t\ta = e, b = f;\n\t\telse c = e, d = f;\n\t}\n\tif(flag) cout << \"TOO MANY\" << '\\n';\n\telse cout << ra << '/' << rb << '\\n';\n\treturn 0;\n}\n```\n",
        "postTime": 1680353762,
        "uid": 526017,
        "name": "The_cosmos",
        "ccfLevel": 4,
        "title": "P1298"
    },
    {
        "content": "# 1 \u9898\u76ee\u7b80\u4ecb\n\n[P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570](https://www.luogu.com.cn/problem/P1298)\n\n**\u9898\u76ee\u5927\u7eb2**\n\n\u5df2\u77e5\u67d0\u4e2a\u5206\u6570\u5206\u5b50\u7684\u53d6\u503c\u8303\u56f4 $n$ \uff0c\u5206\u6bcd\u7684\u53d6\u503c\u8303\u56f4 $m$ \uff0c\u548c\u4e00\u4e2a $double$ \u6d6e\u70b9\u6570 $x$ \uff0c\u6c42\u51fa\u6ee1\u8db3\u6761\u4ef6\u5e76\u4e14\u6700\u63a5\u8fd1 $x$ \u7684**\u6700\u7b80**\u5206\u6570\u3002\u82e5\u6709\u591a\u4e2a\u6b63\u89e3\uff0c\u5219\u8f93\u51fa `TOO MANY` \u3002\n\n**\u9898\u76ee\u96be\u5ea6**\n\n\u672c\u601d\u8def\u7b97\u6cd5\uff1a\u526a\u679d\u6280\u5de7\uff08\u6df1\u5ea6\u641c\u7d22\u4f18\u5148\uff09\n\n| \u5185\u5bb9\uff08\u641c\u7d22->\u526a\u679d\u6280\u5de7\uff09 |  \u5b9e\u9645\u96be\u5ea6 |\n| :-: | :-: |\n| \u601d\u8def\u96be\u5ea6 | $\\color{orange}{\u666e\u53ca-}$ |\n| \u526a\u679d\u96be\u5ea6 | $\\color{purple}{\u7701\u9009/NOI-}$ |\n| \u603b\u96be\u5ea6 | $\\color{lime}{\u666e\u53ca+/\u63d0\u9ad8}$\n\n# 2 \u601d\u8def\u5206\u6790\n\n\u8fd9\u4e00\u9053\u9898\u662f\u6211\u770b\u5230\u8fc7\u7684\u9898\u9762\u6700\u77ed\u7684\u84dd\u9898\u4e86\u2026\u2026~~\u54ce\uff0c\u8fd8\u4ee5\u4e3a\u9898\u9762\u77ed\u5c31\u7b80\u5355\u5462~~ \u9996\u5148\u60f3\u5230\u7684\u601d\u8def\u662f\u628a\u6240\u6709\u5206\u5b50\u5206\u6bcd\u679a\u4e3e\u4e00\u904d\uff0c\u7136\u800c TLE \u3002\u8fd9\u4e00\u9898\u5176\u5b9e\u548c $DFS$ \u626f\u4e0d\u4e0a\u5565\u5173\u7cfb\u3002\u6700\u4e3b\u8981\u7684\u662f\u526a\u679d\u641c\u7d22\u548c\u6280\u5de7\u641c\u7d22\u3002\n\n## 2.1 \u601d\u8def\u5206\u6790\n\n\u6700\u571f\u7684\u529e\u6cd5\u2026\u2026\u628a\u5206\u5b50\u548c\u5206\u6bcd\u5168\u90e8\u679a\u4e3e\u4e00\u904d\u5c31\u53ef\u4ee5\u5566\u2026\u2026\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(nm)$ \u3002\u81f3\u4e8e\u5206\u5b50\u548c\u5206\u6bcd\uff0c\u4e24\u4e2a\u5faa\u73af\u5373\u53ef\u3002\n\n\u7136\u540e\u5c31\u662f\u9898\u76ee\u4e2d\u8981\u6c42\u7684**\u6700\u7b80**\u5206\u6570\u3002\u5982\u4f55\u505a\u5230\u6700\u7b80\u5462\uff1f\u6700\u7b80\u4e5f\u5c31\u662f\u5206\u6bcd\u4e0e\u5206\u5b50\u7684\u6700\u5927\u516c\u7ea6\u6570\u662f $1$ \uff0c\u4e5f\u53ef\u4ee5\u8bf4\u662f\u5206\u6bcd\u4e0e\u5206\u5b50**\u4e92\u8d28**\u3002\u6240\u4ee5\u5224\u65ad\u4e24\u4e2a\u6570\u662f\u5426\u7ec4\u6210\u6700\u7b80\u5206\u6570\u53ea\u9700\u5224\u65ad\u5b83\u4eec\u7684\u6700\u5927\u516c\u7ea6\u6570\u662f\u5426\u4e3a $1$ \u5373\u53ef\u3002\u56e0\u4e3a $STL$ \u91cc\u6709\u51fd\u6570 $gcd(const$ $int$ $a,const$ $int$ $b)$\uff0c\u6240\u4ee5\u5224\u65ad\u6700\u7b80\u5206\u6570\u53ea\u9700\u8981\u4e00\u53e5\uff1a\n\n```cpp\nif(__gcd(i,j)!=1)continue;\n```\n\n```cpp\n#include<iostream>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\nint main(){\n\tint n,m;\n\tdouble x;\n\tcin>>n>>m>>x;\n\tdouble min3=10000000000000;\n\tint min1,min2;\n\tbool g=false;\n\tfor(int i=1;i<=m;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tif(__gcd(i,j)!=1)continue;//\u662f\u5426\u4e92\u8d28\n\t\t\tif(abs(double(j)/double(i)-x)>min3)continue;//\u8d85\u8fc7\u4e86\u76ee\u524d\u6700\u4f73\u7b54\u6848\uff0c\u526a\u679d1\n\t\t\telse if(abs(double(j)/double(i)-x)<min3){\n\t\t\t\tg=false;//\u5df2\u66f4\u65b0\n\t\t\t\t//\u63a5\u4e0b\u6765\u4e09\u884c\u4e3a\u4f20\u65b0\u503c\u64cd\u4f5c\n\t\t\t\tmin3=abs(double(j)/double(i)-x);\n\t\t\t\tmin1=j;\n\t\t\t\tmin2=i;\n\t\t\t}else if(abs(double(j)/double(i)-x)==min3)g=true;//\u76f8\u7b49\uff0c\u6709\u591a\u91cd\u6b63\u89e3\n\t\t}\n\t}\n\tif(g)cout<<\"TOO MANY\"<<endl;//\u5982\u679c\u6709\u91cd\u590d\n\telse cout<<min1<<\"/\"<<min2;\n\treturn 0;\n}\n```\n\n$30 pts$ \u2026\u2026\u4e09\u4e2a\u70b9 $AC$ \uff0c\u5176\u4f59\u5747 $TLE$ \u3002\u770b\u4e00\u4e0b\u6570\u636e\u8303\u56f4\u5427\uff1a$1 \\le n\u3001m \\le 10^{7}$ \u3002\u53ef\u80fd\u4f1a\u51fa\u73b0\u5faa\u73af $10^{14}$ \u7684\u60c5\u51b5\u51fa\u73b0\uff0c\u6240\u4ee5\u5fc5\u987b\u4f18\u5316\u3002\n\n## 2.2 \u6280\u5de7\u641c\u7d22/\u526a\u679d\u4f18\u5316\n\n\u9996\u5148\u6211\u4eec\u5148\u6765\u770b\u4e00\u7ec4\u6570\u636e\uff0c\u8fd9\u7ec4\u6570\u636e\u662f $1 \\le n\u3001m \\le 6$ \u7684\u5206\u6570\u503c\uff1a\n\n![](https://img-blog.csdnimg.cn/20200825120610653.png#pic_center)\n\n\u60f3\u8d77\u6765\u4e86\u5427\uff0c\u9898\u76ee\u4e2d\u7684\u5f0f\u5b50\u53ef\u4ee5\u63a8\u5bfc\u6210 $\\frac{n_{i}}{m_{i}} \\approx x$\u3002\u6211\u4eec\u4e0d\u59a8\u6765\u8f6c\u6362\u4ee5\u4e0b\uff0c\u539f\u5f0f\u53d8\u4e3a $n \\approx x \\times m \\Rightarrow m \\approx \\frac{x}{n}$ \u3002\u6709\u6ca1\u6709\u53d1\u73b0\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u6b63\u6bd4\u4f8b\u51fd\u6570\u548c\u53cd\u6bd4\u4f8b\u51fd\u6570\u5462\uff1f\u4f46\u662f\u53cd\u6bd4\u4f8b\u51fd\u6570\u662f\u66f2\u7ebf\uff0c\u6b63\u6bd4\u4f8b\u51fd\u6570\u662f\u76f4\u7ebf\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u662f\u9009\u6b63\u6bd4\u4f8b\u51fd\u6570\u597d\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u679a\u4e3e $m$ \uff08\u5373\u5206\u6bcd\uff09\uff0c\u518d\u56db\u820d\u4e94\u5165\uff0c $n$ \u5c31\u968f\u4e4b\u786e\u5b9a\u4e86\u3002\u8fd9\u4e2a\u4ee3\u7801\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(m)$ \u3002\u660e\u663e\u6bd4\u4e0a\u4e00\u4e2a\u7b97\u6cd5\u5feb\u3002\n\n\u4f46\u662f\u8fd9\u4e2a\u7b97\u6cd5\u6709\u4e00\u4e2a\u6613\u9519\u70b9\uff0c\u5c31\u662f\u9700\u8981\u6ce8\u610f\u5f53\u56db\u820d\u4e94\u5165\u7684 $n$ \u5927\u4e8e\u5206\u5b50\u4e0a\u9650\u65f6\uff0c\u9700\u8981\u628a\u4e0a\u9650\u5f53\u505a $n$ \u6765\u8fd0\u7b97\u3002\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u6700\u5927\u503c\u3002\n\n```cpp\n\t\tdouble u=i*x;\n\t\tu+=0.5;//\u56db\u820d\u4e94\u5165\n\t\tint y=u;//\u8f6c\u5316 int\n\t\tif(abs(double(y)/double(i)-x)<=min3&&__gcd(y,i)==1&&y<=n){//\u4e0d\u8d85\u8fc7\u4e0a\u9650\u4e14\u6ee1\u8db3\n\t\t\tif(min3==abs(double(y)/double(i)-x)){\n\t\t\t\tg=true;//\u7b49\u4e8e\n\t\t\t}else{\n\t\t\t\tmin1=y,min2=i,min3=abs(double(y)/double(i)-x);//\u66f4\u65b0\n\t\t\t\tg=false;//\u4e0d\u7b49\u4e8e\n\t\t\t}\t\n\t\t}\n\t\tif(n==y)continue;\n\t\tif(abs(double(n)/double(i)-x)>min3)continue;\n\t\t//\u5f00\u59cb\u4e0a\u9650\u64cd\u4f5c\n\t\tif(__gcd(n,i)!=1)continue;\n\t\tif(min3==abs(double(n)/double(i)-x)){\n\t\t\tg=true;\n\t\t}else{\n\t\t\tmin1=n,min2=i,min3=abs(double(n)/double(i)-x);\n\t\t\tg=false;\n\t\t}\n```\n\n# 3 AC\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\nint main(){\n\tint n,m;\n\tdouble x;\n\tcin>>n>>m>>x;\n\tdouble min3=10000000000000;\n\tint min1,min2;\n\tbool g=false;\n\tfor(int i=1;i<=m;i++){\n\t\tdouble u=i*x;\n\t\tu+=0.5;\n\t\tint y=u;\n\t\t//cout<<i<<\" \"<<abs(double(y)/double(i)-x)<<\" \"<<u<<\" \"<<y<<\" \"<<min3<<endl;\n\t\tif(abs(double(y)/double(i)-x)<=min3&&__gcd(y,i)==1&&y<=n){\n\t\t\tif(min3==abs(double(y)/double(i)-x)){\n\t\t\t\tg=true;\n\t\t\t}else{\n\t\t\t\tmin1=y,min2=i,min3=abs(double(y)/double(i)-x);\n\t\t\t\tg=false;\n\t\t\t}\t\n\t\t}\n\t\tif(n==y)continue;\n\t\tif(abs(double(n)/double(i)-x)>min3)continue;\n\t\tif(__gcd(n,i)!=1)continue;\n\t\t//cout<<endl;\n\t\tif(min3==abs(double(n)/double(i)-x)){\n\t\t\tg=true;\n\t\t}else{\n\t\t\tmin1=n,min2=i,min3=abs(double(n)/double(i)-x);\n\t\t\tg=false;\n\t\t}\n\t}\n\tif(g)cout<<\"TOO MANY\"<<endl;\n\telse cout<<min1<<\"/\"<<min2;\n\treturn 0;\n}\n```\n\n**\u58f0\u660e\uff1a\u8be5\u535a\u6587\u9009\u81ea\u672c\u4eba[CSDN](https://blog.csdn.net/lanyecch/article/details/108204522)\u535a\u5ba2\uff0c\u82e5\u6709\u96f7\u540c\uff0c\u7eaf\u5c5e\u5de7\u5408**\n\n",
        "postTime": 1598333867,
        "uid": 305891,
        "name": "little_vegetable",
        "ccfLevel": 5,
        "title": "P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570"
    },
    {
        "content": "\u8fd9\u9898\u5751\u592a\u591a\u4e86\uff0c\u6211WA\u4e86\u5f88\u591a\u6b21\u624d\u8fc7\uff0c\u602a\u4e0d\u5f97\u63d0\u4ea4\u6570\u90a3\u4e48\u591a\uff0c\u901a\u8fc7\u6570\u53ea\u6709200+\n\n\u770b\u4e86\u770bdalao\u4eec\u7684\u9898\u89e3\uff0c\u6709\u4eba\u8bf4\u8fd9\u4e2a\u9898\u53ef\u4ee5\u901a\u8fc7\u5206\u6bcd\u5927\u81f4\u786e\u5b9a\u5206\u5b50\u7684\u503c\uff0c\u4ece\u800c\u4e0d\u9700\u8981\u679a\u4e3e\u6574\u4e2a\u7684m * n \u4e2a\u5206\u6570 \u4f46\u662f\u8fd9\u6837\u5fc5\u987b\u7528gcd\u5224\u65ad\u4e24\u4e2a\u6570\u662f\u5426\u4e92\u8d28\uff0c\u4f1aTLE\n\nNaffgo\u7684\u601d\u8def\u662f \u4ece 1 \u5230 m \u679a\u4e3e\u5206\u6bcd\uff0c\u7136\u540e\u7528\u5c0f\u6570\u4e58\u4ee5\u5206\u6bcd\u518d\u56db\u820d\u4e94\u5165\u5373\u53ef\u5f97\u5230\u5206\u5b50\u3002\u5982\u679c\u5206\u5b50\u5927\u4e8e n \u5219 break \u3002\u7136\u540e\u5224\u65ad\u5f53\u524d\u503c\u662f\u5426\u6bd4\u5f53\u524d\u6700\u4f18\u89e3\u4f18\uff0c\u82e5\u662f\u5219\u66f4\u65b0\uff1b\u82e5\u4e0e\u6700\u4f18\u89e3\u4e00\u81f4\u5219\u5224\u65ad\u8fd9\u4e24\u4e2a\u5206\u6570\u662f\u5426\u4e00\u6837\uff0c\u82e5\u4e0d\u4e00\u6837\u5219\u8f93\u51fa TOO MANY\n\n\u8fd9\u79cd\u601d\u8def\u786e\u5b9e\u53ef\u4ee5\uff0c\u4f46\u4f9d\u7136\u4f1a\u7528\u5230gcd\u3002\u800c\u6211\u60f3\u5230\u4e86\u4e00\u79cdO(n)\u7684\u7b97\u6cd5\uff0c\u90a3\u5c31\u662f\u4ecem\u52301\u679a\u4e3e\u5206\u6bcd\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u6c42gcd\u6765\u5224\u5b9a\u5206\u5b50\u5206\u6bcd\u662f\u5426\u4e92\u8d28\u3002\n\n\u539f\u7406\u5341\u5206\u7b80\u5355\uff0c\u5982\u679c\u5f53\u524d\u89e3\u662f\u6700\u4f18\u89e3\uff0c\u4f46\u4e0d\u662f\u6700\u7b80\u5206\u6570\uff0c\u90a3\u4e48\u5728\u63a5\u4e0b\u6765\u7684\u679a\u4e3e\u4e2d\uff0c\u5fc5\u5b9a\u4f1a\u679a\u4e3e\u5230\u5316\u7b80\u540e\u7684\u89e3\u3002\n\n\u9700\u8981\u6ce8\u610f\u7279\u5224\u5206\u5b50j==0\u6216ansj==0\u7684\u60c5\u51b5\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u88ab\u96f6\u9664\u9519\u8bef\n\u6211\u7684\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n\nconst double INF=1e9;\n\ninline double loss(int x,int y,double tar)\n{\n\tdouble delta=(((double)x)/y)-tar;\n\treturn fabs(delta);\n}\n\nint leagal(int x,int l,int r)\n{\n\tif (x<l) x=l;\n\tif (x>r) x=r;\n\treturn x;\n}\n\nint main()\n{\n\tregister int i,j,bs,up,dn,cnt;\n\tint n,m;\n\tregister double tar;\n\tscanf(\"%d%d%lf\",&n,&m,&tar);\n\tregister int ansx,ansy;\n\tregister double ansv=INF;\n\tcnt=0;\n\tfor (i=m;i>=1;i--)\n\t{\n\t\t\n\t\tbs=(int)(tar*i);\n\t\tdn=leagal(bs-1,0,n),up=leagal(bs+2,0,n);\n\t\tfor (int j=dn;j<=up;j++)\n\t\t\tif (ansv>=loss(j,i,tar))\n\t\t\t\tansv=loss(ansx=j,ansy=i,tar);\n\t}\n\tfor (i=m;i>=1;i--)\n\t{\n\t\t\n\t\tbs=(int)(tar*i);\n\t\tdn=leagal(bs-1,0,n),up=leagal(bs+2,0,n);\n\t\tfor (j=dn;j<=up;j++)\n\t\t{\n\t\t\tdouble tansv=loss(j,i,tar);\n\t\t\tif (j!=0 && ansx!=0 && i%ansy==0 && j%ansx==0 && i/ansy==j/ansx) continue;\n\t\t\tif (j==0 && ansx==0) continue;\n\t\t\tif (tansv==ansv) cnt++;\n\t\t}\n\t}\n\tif (cnt>0) printf(\"TOO MANY\\n\");\n\telse printf(\"%d/%d\\n\",ansx,ansy);\n\treturn 0;\n}\n```\n",
        "postTime": 1584263197,
        "uid": 40004,
        "name": "\u9ece\u660e\u884c\u8005",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1298 \u3010\u6700\u63a5\u8fd1\u7684\u5206\u6570\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\u7ed9\u51fa\u4e00\u4e2a\u6b63\u5c0f\u6570\uff0c\u6c42\u503c\u6700\u63a5\u8fd1\u8fd9\u4e2a\u5c0f\u6570\u4e14\u5206\u5b50\u4e0d\u8d85\u8fc7 $n$ \uff0c\u5206\u6bcd\u4e0d\u8d85\u8fc7 $m$ \u7684\u6700\u7b80\u5206\u6570\uff08\u82e5\u4e3a\u6574\u6570 $k$ \u5219\u8f93\u51fa $(k / 1)$ \uff09\u3002\u5982\u679c\u5206\u6570\u4e0d\u552f\u4e00\uff0c\u5219\u8f93\u51fa TOO MANY \u3002\n\n### \u601d\u8def\n~~\u6211\u771f\u4e0d\u77e5\u9053\u641c\u7d22\u662f\u600e\u4e48\u6765\u7684\uff0c~~ \u6211\u7b2c\u4e00\u60f3\u6cd5\u662f\u66b4\u529b\u679a\u4e3e\u5206\u5b50\u5206\u6bcd\uff0c\u4f46\u8fd9\u6837\u663e\u7136\u4f1a TLE ~~(\u7136\u800c\u6211\u7384\u5b66 MLE)\u3002~~ \u90a3\u4e48\u9700\u8981\u601d\u8003\u522b\u7684\u7b97\u6cd5\u3002\n\n\u540e\u6765\u60f3\u4e86\u60f3\uff0c\u53d1\u73b0\u53ef\u4ee5\u76f4\u63a5\u4ece $1$ \u5230 $m$ \u679a\u4e3e\u5206\u6bcd\uff0c\u7136\u540e\u7528\u5c0f\u6570\u4e58\u4ee5\u5206\u6bcd\u518d\u56db\u820d\u4e94\u5165\u5373\u53ef\u5f97\u5230\u5206\u5b50\u3002\u5982\u679c\u5206\u5b50\u5927\u4e8e $n$ \u5219 $break$ \u3002\u7136\u540e\u5224\u65ad\u5f53\u524d\u503c\u662f\u5426\u6bd4\u5f53\u524d\u6700\u4f18\u89e3\u4f18\uff0c\u82e5\u662f\u5219\u66f4\u65b0\uff1b\u82e5\u4e0e\u6700\u4f18\u89e3\u4e00\u81f4\u5219\u5224\u65ad\u8fd9\u4e24\u4e2a\u5206\u6570\u662f\u5426\u4e00\u6837\uff0c\u82e5\u4e0d\u4e00\u6837\u5219\u8f93\u51fa TOO MANY\u3002\n\n\u53e6\u5916\u8981\u6ce8\u610f\u7684\u662f\u5982\u679c\u5c0f\u6570 $\u00d71$ \u90fd\u6bd4 $n$ \u5927\uff0c\u5219\u8f93\u51fa $n / 1$ \u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define fr(i,a,b) for(register int i = a;i <= b;++i)\nusing namespace std;\n\ndouble s;\nint n,m,fz,fm;\n\ninline int read(){\n\tint x = 0,f = 1;char c = getchar();\n\twhile(!isdigit(c)){if(c == '-')f = -1;c = getchar();}\n\twhile(isdigit(c)){x = x * 10 + c - '0';c = getchar();}\n\treturn f * x;\n}\n\ninline int gcd(int x,int y){return y ? gcd(y,x % y) : x;}\n\nint main(){\n\tn = read(),m = read();scanf(\"%lf\",&s);\n\tif(n == 0){printf(\"0/1\\n\");return 0;}\n\tfz = n;fm = 1;\n\tfr(i,1,m){\n\t\tint ans = (int)(1. * s * i + 0.5);\n\t\tif(ans > n)break;\n\t\tif(fabs(1. * ans / i - s) < fabs(1. * fz / fm - s)){\n\t\t\tfz = ans;fm = i;\n\t\t\tint g = gcd(fz,fm);\n\t\t\tfz /= g;fm /= g;\n\t\t}\n\t\tif(fabs(1. * ans / i - s) == fabs(1. * fz / fm - s)){\n\t\t\tint x = ans,y = i;\n\t\t\tint g = gcd(x,y);\n\t\t\tx /= g;y /= g;\n\t\t\tif(x != fz || y != fm){printf(\"TOO MANY\\n\");return 0;}\n\t\t}\n\t}\n\tprintf(\"%d/%d\\n\",fz,fm);\n\treturn 0;\n}\n```\n",
        "postTime": 1571053016,
        "uid": 18157,
        "name": "Naffygo",
        "ccfLevel": 0,
        "title": "P1298 \u3010\u6700\u63a5\u8fd1\u7684\u5206\u6570\u3011"
    },
    {
        "content": "5-12 upd\uff1a\u5220\u53bb\u4e00\u79cd\u4e0d\u5b58\u5728\u7684\u60c5\u51b5\u7684\u5206\u7c7b\u8ba8\u8bba\u3002\n\n~~\u867d\u7136\u6c34\u4f46\u662f\u6709\u86ee\u591a\u5730\u65b9\u9700\u8981\u6ce8\u610f\u7684\u3002~~\n\n\u63d0\u793a\uff1a\u672c\u9898\u89e3\u91cd\u70b9\u5728\u67e5\u7f3a\u8865\u6f0f\u4e0a\u7740\u7b14\u3002\n\n### \u89e3\u9898\u601d\u8def\uff1a\n\n\u9996\u5148\u65b9\u6cd5\u5c31\u662f\u679a\u4e3e\u5206\u6bcd\u3002\n\n\u7136\u540e\u5c06\u5206\u6bcd\u4e58\u4ee5\u76ee\u6807\u5c0f\u6570\u5f97\u5230\u4e24\u4e2a\u8fd1\u4f3c\u5206\u5b50\uff0c\n\n\u4e0d\u65ad\u8fdb\u884c\u6bd4\u8f83\u6c42\u51fa\u6765\u6700\u4f18\u89e3\u3002\n\n### \u9700\u8981\u6ce8\u610f\u7684\u51e0\u70b9\uff1a\n\n1.\u591a\u7ec4\u89e3\u9700\u8981\u7279\u5224\u5206\u5b50\u4e3a $0$ \u5206\u6bcd\u4e3a $1$ \u8fd9\u4e2a\u7ed3\u679c\u3002\n\n2.\u591a\u7ec4\u89e3\u7684\u5224\u65ad\u65b9\u6cd5\uff1a\u8bbe\u5f53\u524d\u89e3\u4e3a $\\frac{a}{b}$\uff0c\u4e4b\u524d\u7684\u89e3\u4e3a $\\frac{p}{q}$\u3002\n\n\u7531\u4e8e\u6211\u4eec\u662f\u4ece\u5c0f\u5f80\u5927\u679a\u4e3e\u7684\uff08$q>b$\uff09\uff0c\u6545\u53ea\u6709 $\\frac{p}{q}$ \u53ef\u4ee5\u7ea6\u5206\u6210 $\\frac{a}{b}$ \u4e00\u79cd\u60c5\u51b5\u3002\n\n\u5224\u65ad\u662f\u5426\u6709 $\\frac{q}{a}=\\frac{q}{b}$\uff0c\u5982\u679c\u662f\u90a3\u4e48\u53ef\u4ee5\u7ea6\u5206\uff0c\u5982\u679c\u4e0d\u662f\u90a3\u4e48\u5c31\u6709\u591a\u7ec4\u89e3\u3002\n\n3.\u8bb0\u5f97\u5728\u627e\u5230\u66f4\u4f18\u89e3\u7684\u60c5\u51b5\u4e0b\u5c06\u591a\u7ec4\u89e3\u6807\u8bb0\u6062\u590d\u521d\u59cb\u72b6\u6001\u3002\n\n4.\u5206\u5b50\u5fc5\u987b\u5c0f\u4e8e $M$\u3002\n\n### \u4ee3\u7801\u90e8\u5206\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nlong long bx=1000639,by=1000639;\nlong double best=114514.1919810;       //\u5148\u8f88\u306e\u62a4\u4f51\nlong double c;\nint tf=114514;\n\nlong double ab(long double x)\n{\n  return (x>0)?x:-x;\n}\n\nvoid update(int a,int b)            //\u66f4\u65b0\u51fd\u6570 \n{\n  bx=a;\n  by=b;\n  long double p=a;\n  long double q=b;\n  best=ab((p/q)-c);\n}\n\nbool ism(int a,int b)                 //\u662f\u5426\u6709\u591a\u7ec4\u89e3 \n{\n\tif(bx==0 || by==0){\n\t\treturn 0;\n\t}\n  if(a/bx==b/by || a%bx!=0)           //\u5982\u679c\u53ef\u4ee5\u7ea6\u5206\uff08\u7ea6\u6570\u5fc5\u4e3a\u6574\u6570\uff09 \n  {\n    return 0;                        //\u8fd4\u56de\u6ca1\u6709\u591a\u7ec4\u89e3 \n  }\n  return 1;                    //\u5426\u5219\u6709\u591a\u7ec4\u89e3 \n}\n\nint main()\n{\n  int m,n;\n  cin >> m >> n;\n  cin >> c;\n  for(long double i=1; i<=n; i++)\n  {\n    long double p=i*c;\n    long double a=floor(p);\n    long double b=a+1;\n    long double r=(long double)a/(long double)i;     //r,s\u4e3a\u5206\u6bcd\u4e3ai\u7684\u60c5\u51b5\u4e0b\u7684\u8fd1\u4f3c\u89e3 \n    long double s=(long double)b/(long double)i;\n    if(a<=m)                      //\u6ce8\u610f\u5206\u5b50\u5c0f\u4e8em \n    { \n      if(ab(r-c)<best)               //\u5bfb\u627e\u5230\u4e86\u66f4\u4f18\u89e3 \n      {\n        update((int)a,(int)i); \n        tf=false;                  //\u539f\u672c\u7684\u6700\u4f18\u89e3\u65e0\u8bba\u6709\u6ca1\u6709\u591a\u7ec4\u89e3\u90fd\u8981\u91cd\u7f6e \n      }\n      if(ab(r-c)==best)              //\u4e0e\u6700\u4f18\u89e3\u76f8\u7b49\uff08\u5224\u65ad\u662f\u5426\u4e92\u8d28\uff09 \n      {\n        if(ism((int)a,(int)i))\n        {\n          tf=true;                  //\u6807\u8bb0\u591a\u89e3 \n        }\n      }\n    }\n    if(b<=m)                         //\u5982\u6cd5\u70ae\u5236 \n    {\n      if(ab(s-c)<best)\n      {\n        update((int)b,(int)i);\n        tf=false;\n      }\n      if(ab(s-c)==best)\n      {\n        if(ism((int)b,(int)i))\n        {\n          tf=true;\n        }\n      }\n    }\n  }\n  if(c==(long double)1/(long double)n-c){           //\u7279\u52240/1\u4e0e1/n(\u4e3a\u80fd\u53d6\u5230\u7684\u6700\u5c0f\u503c)\u662f\u5426\u4e0ec\u7684\u7edd\u5bf9\u503c\u76f8\u7b49 \n  \tcout << \"TOO MANY\";\n  \treturn 0;\n  }\n  if(tf==114514)                       //\u65e0\u89e3\uff08\u4e3a\u4e86\u4fdd\u9669\u52a0\u4e0a\u7684\uff09 \n  {\n    cout << m << \"/1\";                 //\u53d6\u6700\u5927\u503c \n    return 0;\n  }\n  else if(tf)                  //\u6709\u591a\u7ec4\u89e3 \n  {\n    cout << \"TOO MANY\";\n    return 0;\n  }\n  cout << bx << \"/\" << by;           //\u8f93\u51fa\u7ed3\u679c \n  return 0;\n}\n\n```\n",
        "postTime": 1683809576,
        "uid": 363149,
        "name": "Stasis",
        "ccfLevel": 0,
        "title": "P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570 \u9898\u89e3"
    },
    {
        "content": "\u7b97\u662f\u6c34\u7d2b\uff0c\u4e0d\u8fc7\u4e5f\u5b66\u5230\u4e00\u4e9b\u6709\u7528\u7684\u4e1c\u897f\u3002\n\n\u5148\u63a8\u9500\u535a\u5ba2\uff1a[My Blog](https://www.cnblogs.com/LcyRegister/p/17365774.html)\u3002\n\n-------------------\n\n## \u9898\u610f\n\n\u7ed9\u5b9a\u6b63\u5c0f\u6570 $N$\u3002\u6c42\u5206\u5b50\u4e0d\u5927\u4e8e $n$\uff0c\u5206\u6bcd\u4e0d\u5927\u4e8e $m$ \u7684\u5206\u6570 $\\dfrac{n}{m}$\uff0c\u4f7f\u5f97 $\\dfrac{n}{m}$ \u7684\u503c\u4e0e $N$ \u6700\u63a5\u8fd1\uff08\u8fd9\u91cc\u7684\u6700\u63a5\u8fd1\u6307\u7684\u662f $|\\dfrac{n}{m} - N|$ \u6700\u5c0f\uff09\u3002\n\n## \u5206\u6790\n\n\u9996\u5148\uff0c\u5927\u90e8\u5206\u4eba\u90fd\u53ef\u4ee5\u60f3\u5230\u4e00\u4e2a\u66b4\u529b\uff1a\u679a\u4e3e $i \\in [1, m]$ \u4f5c\u4e3a\u5206\u5b50\uff0c\u8ba1\u7b97\u51fa\u6700\u4f73\u5206\u6bcd $r_1 = \\lfloor i \\times N \\rfloor, r_2 = \\lceil i \\times N\\rceil$\u3002\u628a $r_1, r_2$ \u5206\u522b\u5e26\u8fdb\u53bb\u770b\u770b\u90a3\u4e2a\u66f4\u4f18\u5c31\u5b8c\u4e8b\u4e86\u3002\u51fa\u53bb\u5224\u8fb9\u754c\u4e4b\u7c7b\u7684\u95ee\u9898\uff0c\u590d\u6742\u5ea6 $O(m)$\u3002\u7531\u4e8e $m \\leq 10 ^ 7$\uff0c\u76f4\u63a5\u5c31\u8279\u8fc7\u53bb\u4e86\u3002\u5982\u679c\u8fd9\u4e2a\u90fd\u4e0d\u4f1a\u5199\u53ef\u4ee5\u770b\u8fd9\u91cc\uff1a[\u66b4\u529b\u7b97\u6cd5](https://www.luogu.com.cn/paste/dtrpwpet)\u3002\n\n\u7136\u800c\u6211\u4eec\u80af\u5b9a\u4e0d\u4f1a\u6ee1\u8db3\u4e8e\u8fd9\u6837\u7684\u66b4\u529b\u7b97\u6cd5\u3002\u6765\u70b9\u4f18\u96c5\u7684\u7b97\u6cd5\u5427\u3002\n\n-------------------------\n\n\u5f15\u5165**\u5206\u6570\u903c\u8fd1**\u3002\u8fd9\u91cc\u7684\u5206\u6570\u903c\u8fd1\u662f\u6307\u7528\u7528\u4e00\u4e2a\u5206\u6570\u6765\u903c\u8fd1\u53e6\u4e00\u4e2a\u5206\u6570\uff0c\u4f7f\u5f97\u8bef\u5dee\u8d8b\u4e8e\u96f6\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u9700\u8981\u903c\u8fd1\u7684\u5206\u6570\u4e3a $\\dfrac{r}{s}$\uff0c\u6709\u5206\u6570 $\\dfrac{u}{v} > \\dfrac{r}{s}$\u3002\u90a3\u4e48\u6709\u4ee5\u4e0b\u7ed3\u8bba\uff1a\n\n$$\\dfrac{r}{s} \\leq \\dfrac{r + u}{s + v} \\leq \\dfrac{u}{v}$$\n\n\u5177\u4f53\u7b49\u53f7\u80fd\u4e0d\u80fd\u53d6\u5230\u8bb0\u4e0d\u6e05\u4e86\uff0c\u4e0d\u8fc7\u4e0d\u5f71\u54cd\u3002\u7ed3\u8bba\u5f88\u597d\u8bc1\u660e\uff0c\u4e0b\u9762\u8bc1\u4e00\u4e0b\u3002\n\n-------------------------\n\n\u5c06 $\\dfrac{r + u}{s + v}$ \u4e0e $\\dfrac{r}{s}$ \u505a\u51cf\u6cd5\uff0c\u5f97\u5230 $\\dfrac{r + u}{s + v} - \\dfrac{r}{s} = \\dfrac{(r + u)s - r(s + v)}{s(s + v)} = \\dfrac{us- vr}{s(s + v)}$\u3002\n\n\u56e0\u4e3a $\\dfrac{r}{s} < \\dfrac{u}{v}$\uff0c\u4e24\u8fb9\u540c\u65f6\u4e58\u4ee5 $sv$\uff0c\u5f97 $vr < us$\uff0c\u5373 $us - vr > 0$\u3002\n\n\u53c8\u56e0\u4e3a $s(s + v) > 0$\uff0c\u6240\u4ee5 $\\dfrac{us - vr}{s(s + v)} > 0$\u3002\u8bc1\u6bd5\u3002\n\n\u6ce8\u610f\u4e0a\u9762\u7ed3\u8bba\u548c\u8bc1\u660e\u6210\u7acb\u7684\u6761\u4ef6\u662f $u, v, s, r > 0$\u3002\n\n-------------------------\n\n\u63a5\u4e0b\u6765\u5f15\u5165 Stern-Brocot \u6811\u8fd9\u4e2a\u6982\u5ff5\u3002\n\nStern-Brocot \u6811\u53ef\u4ee5\u7ef4\u62a4\u6240\u6709\u7684\u6b63\u5206\u6570\u3002\u8fd9\u4e00\u70b9\u53ef\u4ee5\u88ab\u6211\u4eec\u7528\u6765\u89e3\u51b3\u8fd9\u9053\u9898\u76ee\u3002\n\n\u9996\u5148\u4ecb\u7ecd\u4e00\u4e0b Stern-Brocot \u6811\u3002\u8fd9\u4e2a\u6811\u7531 $\\dfrac{0}{1}$ \u548c $\\dfrac{1}{0}$ \u4e24\u4e2a\u5206\u6570\u5f00\u59cb\u3002$\\dfrac{1}{0}$ \u4e0d\u5927\u597d\u5b9a\u4e49\uff0c\u6682\u4e14\u628a\u5b83\u5f53\u505a $+ \\infty$\u3002\u5c06\u8fd9\u4e24\u4e2a\u5206\u6570\u4f5c\u4e3a**\u6e90\u8282\u70b9**\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u50cf\u6211\u4eec\u521a\u624d\u8ba8\u8bba\u7684\u5206\u6570\u903c\u8fd1\uff0c\u5c06 $\\dfrac{0}{1}$ \u548c $\\dfrac{1}{0}$ \u7684\u5206\u5b50\u5206\u6bcd\u5206\u522b\u76f8\u52a0\uff0c\u5f97\u5230\u53e6\u5916\u4e00\u4e2a\u5206\u6570 $\\dfrac{1}{1}$\u3002\u8fd9\u4e2a\u5206\u6570\u786e\u5b9e\u5728 $\\dfrac{0}{1}$ \u4e0e $\\dfrac{1}{0}$ \u4e4b\u95f4\u3002$\\dfrac{1}{1}$ \u88ab\u6210\u4e3a\u7b2c $1$ \u5c42\u8fed\u4ee3\u540e\u7684\u8282\u70b9\u3002\n\n\u540c\u6837\u7684\uff0c\u5c06 $\\dfrac{1}{1}$ \u4e0e $\\dfrac{0}{1}, \\dfrac{1}{0}$ \u5206\u522b\u8fdb\u884c\u64cd\u4f5c\uff0c\u5f97\u5230\u4e24\u4e2a\u5206\u6570\uff0c\u79f0\u4e3a\u7b2c\u4e8c\u6b21\u8fed\u4ee3\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5f97\u5230\u4e86 Stern-Brocot \u6811\u7684\u6784\u5efa\u57fa\u7840\uff1a\u5c06 $\\dfrac{a}{b}$ \u4e0e $\\dfrac{c}{d}$ \u5206\u5b50\u5206\u6bcd\u5206\u522b\u76f8\u52a0\uff0c\u5f97\u5230 $\\dfrac{a + c}{b + d}$ \u4f5c\u4e3a\u4e0b\u4e00\u8f6e\u8fed\u4ee3\u7684\u8282\u70b9\u3002\n\n\u4f8b\u5982\uff0c\u8fdb\u884c\u4e09\u6b21\u64cd\u4f5c\u540e\uff0c\u8fd9\u68f5\u6811\u5c31\u4f1a\u53d8\u6210\u8fd9\u6837\uff1a\n\n$$\\begin{array}{c} \\dfrac{0}{1}, \\dfrac{1}{1}, \\dfrac{1}{0} \\\\\\\\ \\dfrac{0}{1}, \\dfrac{1}{2}, \\dfrac{1}{1}, \\dfrac{2}{1}, \\dfrac{1}{0} \\\\\\\\ \\dfrac{0}{1}, \\dfrac{1}{3}, \\dfrac{1}{2}, \\dfrac{2}{3}, \\dfrac{1}{1}, \\dfrac{3}{2}, \\dfrac{2}{1}, \\dfrac{3}{1}, \\dfrac{1}{0} \\end{array}$$\n\n\u6ce8\u610f\uff0c\u67d0\u4e9b\u8282\u70b9\uff08\u5c31\u662f\u7b2c $i$ \u5c42\u5b58\u5728\uff0c\u7b2c $i + 1$ \u5c42\u4e5f\u5b58\u5728\u7684\u8282\u70b9\uff09\uff0c\u5b9e\u9645\u4e0a\u5728\u7b2c $i + 1$ \u5c42\u662f\u4e0d\u4f1a\u51fa\u73b0\u7684\u3002\u53ea\u662f\u4e3a\u4e86\u65b9\u4fbf\u6bd4\u8f83\u52a0\u4e86\u4e0a\u53bb\u3002\n\n\u53ef\u4ee5\u770b\u5230\uff0c\u7b2c\u4e09\u5c42\u7684\u7b2c\u4e8c\u4e2a\u5206\u6570 $\\dfrac{1}{3}$ \u5c31\u662f\u5de6\u53f3\u4e24\u8fb9\u4e24\u4e2a\u6570\u5206\u5b50\u5206\u6bcd\u5206\u522b\u76f8\u52a0\u7684\u548c\u3002\u7b2c\u56db\u4e2a\uff0c\u7b2c\u516d\u4e2a\u548c\u7b2c\u516b\u4e2a\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n\u4e0b\u9762\u662f\u6765\u81ea OI-wiki \u7684\u4e00\u5f20\u56fe\u3002\n\n![Stern-Brocot\u6811](https://oi-wiki.org/math/number-theory/images/stern-brocot1.png)\n\n\u521a\u624d\u6240\u63d0\u5230\u7684\u4e0d\u5b58\u5728\u7684\u8282\u70b9\u5c31\u662f\u865a\u7ebf\u76f8\u8fde\u7684\u90a3\u4e9b\u8282\u70b9\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u68f5\u6811\u5177\u6709\u4e8c\u53c9\u7ed3\u6784\u3002\u56e0\u6b64\u5728\u8fd9\u68f5\u6811\u4e0a\u641c\u7d22\u53ea\u9700\u8981\u82b1\u8d39 $O(\\log_2 n)$ \u7684\u65f6\u95f4\u3002\u975e\u5e38\u4f18\u79c0\u3002\u8fd9\u6837\u5bf9\u4e8e\u8fd9\u9053\u9898\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u5c0f\u6570 $N$ \u4ece\u7b2c\u4e00\u5c42\u5f00\u59cb\u5411\u4e0b\u641c\u7d22\u3002\u5982\u679c\u5f53\u524d\u8282\u70b9\u503c\u5927\u4e8e $N$\uff0c\u90a3\u4e48\u5411\u5de6\u9012\u5f52\u3002\u5426\u5219\u5411\u53f3\u9012\u5f52\uff0c\u76f4\u5230\u5206\u5b50\u6216\u5206\u6bcd\u5927\u4e8e $n$ \u6216 $m$\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u80af\u5b9a\u662f $O(\\log n)$\u3002\uff08\u5047\u8bbe $n, m$ \u540c\u9636\uff09\u3002\n\n\u5173\u4e8e\u6700\u7b80\u6027\u7684\u8bc1\u660e\u53ef\u4ee5\u770b [OI-wiki](https://oi-wiki.org/math/number-theory/stern-brocot/) \u4e0a\u7684\u89e3\u91ca\u3002\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\n\n-------------------------------------\n\n\u8fd9\u9053\u9898\u7684\u601d\u8def\u5c31\u8bb2\u89e3\u5b8c\u4e86\u3002\u6ce8\u610f\u522b\u5fd8\u4e86\u5224\u65ad\u591a\u89e3\u7684\u60c5\u51b5\u3002\u7531\u4e8e\u521a\u624d\u63d0\u5230\uff0cStern-Brocot \u6811\u5177\u6709\u6700\u7b80\u6027\uff0c\u56e0\u6b64\u653e\u5fc3\u7684\u5224\u65ad\u5f53\u524d\u5206\u6570\u503c\u4e0e $N$ \u7684\u8bef\u5dee\u548c\u539f\u6765\u7684\u662f\u5426\u4e00\u6837\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5361\u5e38\u987a\u4fbf\u5361\u4e86\u4e2a rank1\u3002\u6b22\u8fce\u6765\u8e29\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <algorithm>\n#include <cstdio>\n\nusing PII = std::pair<int, int>;\ndouble N, m_error;\nint n, m;\nPII ans(0, 1);\nbool flag = false;\n\ndouble fabs(double x) {\n    return x < 0 ? -x : x;\n}\ninline void get(double N, int a = 0, int b = 1, int c = 1, int d = 0) {\n\tint x = a + c, y = b + d;\n\tif (x > n || y > m) return;\n\tdouble error = (double)x / y - N;\n\tif (fabs(error) == m_error) flag = true;\n\tif (fabs(error) < m_error) {\n\t\tflag = false; ans = {x, y}; m_error = fabs(error);\n\t\tif (error == 0) return;\n\t}\n\tif (error < 0) get(N, x, y, c, d);\n\telse get(N, a, b, x, y);\n}\n\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tscanf(\"%lf\", &N); m_error = N; get(N);\n\tif (flag) puts(\"TOO MANY\");\n\telse printf(\"%d/%d\", ans.first, ans.second);\n\treturn 0;\n}\n```\n\n\u660e\u5929\u5c31\u662f\u4e94\u4e00\u52b3\u52a8\u8282\u3002\u5728\u8fd9\u91cc\u63d0\u524d\u795d\u5927\u5bb6\u4e94\u4e00\u5feb\u4e50\uff0c\u591a\u591a\u70b9\u8d5e\u3002",
        "postTime": 1682860799,
        "uid": 519384,
        "name": "Link_Cut_Y",
        "ccfLevel": 0,
        "title": "P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570"
    },
    {
        "content": "\u7ec8\u4e8e AC \u4e00\u9053\u7d2b\u9898\u4e86\uff0c\u53d1\u4e2a\u9898\u89e3\u7eaa\u5ff5\u4e00\u4e0b\u3002  \n\u73b0\u63d0\u4f9b\u4e00\u79cd $O(m)$ \u7684\u601d\u8def\u3002   \n\u5148\u6765\u8bb2\u4e00\u4e2a\u7b80\u5355\u7684\u4e1c\u897f\uff1a\n$\\frac{a}{b}\u2248c\u2192a\u2248b\\times c$  \n\u6240\u4ee5\u53ea\u8981\u77e5\u9053\u5206\u6bcd\uff0c\u5206\u5b50\u53ef\u4ee5 $O(1)$ \u6c42\u51fa\u3002  \n\nQ: \u6570\u636e\u600e\u4e48\u5904\u7406\uff1f  \nA: \u53ef\u4ee5\u7528\u5206\u6570\u5904\u7406\uff0c\u964d\u4f4e\u8bef\u5dee\u3002  \nQ: \u7ea6\u5206\u8017\u65f6\u95f4\u600e\u4e48\u529e\uff1f  \nA: \u4e0d\u8981\u7ea6\u3002  \nQ: \u5206\u5b50\u5206\u6bcd\u5728\u8fd0\u7b97\u65f6\u7206 ```long long``` \u600e\u4e48\u529e\uff1f  \nA: \u7528 ```__int128``` \u5c31\u884c\u3002  \nQ: \u8f93\u51fa\u600e\u4e48\u5904\u7406\uff1f  \nA: \u5f3a\u8f6c ```int``` \u6216 ```long long```\u3002  \nQ: \u600e\u4e48\u5b9e\u73b0\uff1f  \nA: \u5206\u6570\u7528\u7ed3\u6784\u4f53\uff0c\u5177\u4f53\u4e0a\u4ee3\u7801\uff08\u4ec5\u4f9b\u53c2\u8003\uff0c\u4e0d\u8981\u6284\uff09\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct num{//\u5206\u6570\n\t__int128 son,mum;\n\tnum(){}\n\tnum(__int128 a,__int128 b){\n\t\tson=a,mum=b;\n\t}\n  //\u91cd\u8f7d\u8fd0\u7b97\u7b26\uff0c\u65b9\u4fbf\u540e\u9762\u8ba1\u7b97\u3002\n  //\u52a0\u51cf\u6cd5\u516c\u5206\u6bcd\u4e3a\u4e24\u4e2a\u5206\u6bcd\u4e4b\u79ef\u3001\n\tnum operator+(const num &k)const{\n\t\tnum ans;\n\t\tans.son=son*k.mum+k.son*mum;\n\t\tans.mum=mum*k.mum;\n\t\treturn ans;\n\t}\n\tnum operator-(const num &k)const{\n\t\tnum ans;\n\t\tans.son=son*k.mum-k.son*mum;\n\t\tans.mum=mum*k.mum;\n\t\treturn ans;\n\t}\n\tnum operator*(const num &k)const{\n\t\tnum ans;\n\t\tans.son=son*k.son;\n\t\tans.mum=mum*k.mum;\n\t\treturn ans;\n\t}\n  //\u5341\u5b57\u4ea4\u53c9\u6cd5\n\tbool operator>(const num &k)const{\n\t\treturn son*k.mum>mum*k.son;\n\t}\n\tbool operator==(const num &k)const{\n\t\treturn son*k.mum==mum*k.son;\n\t}\n\tbool operator<(const num &k)const{\n\t\treturn son*k.mum<mum*k.son;\n\t}\n}; \n__int128 flr(num h){//\u5411\u4e0b\u53d6\u6574\n\treturn h.son/h.mum;\n}\n__int128 cel(num h){//\u5411\u4e0a\u53d6\u6574\n\treturn (h.son+h.mum-1)/h.mum;\n}\nnum ans;\nnum key;\nint n,m;\nbool flag;\nnum error=num(1000000007,1);//\u8bef\u5dee\uff0c\u521d\u59cb\u5316\u4e3a\u6b63\u65e0\u7a77\u3002\nvoid Judge(num k,bool gk){//\u5c1d\u8bd5\u4f18\u5316  gk==0\u8bf4\u660ek\u504f\u5c0f\uff0c\u5426\u5219k\u504f\u5927\n\tif(k==ans) return;\n\tnum a;\n\tif(gk) a=k-key;\n\telse a=key-k;\n\tif(a>error) return;\n\tif(a==error) flag=1;\n\tif(a<error){\n\t\tflag=0;\n\t\tans=k;\n\t\terror=a;\n\t}\n}\nnum read_a_num(){//\u8bfb\u5165\u5c0f\u6570\uff0c\u8f6c\u4e3a\u5206\u6570\n\tdouble tmp;\n\tcin>>tmp;\n\ttmp*=10000000000;\n\treturn num(floor(tmp+0.01),10000000000);\n}\nint main(){\n\tcin>>n>>m;\n\tkey=read_a_num();\n\tans=num(1,1);\n\tfor(int mum=1;mum<=m;mum++){//\u679a\u4e3e\u5206\u6bcd\n\t\t__int128 get1=flr(key*num(mum,1)),get2=cel(key*num(mum,1));\n\t\tif(get1>n) break;\n\t\tif(get2<=n)\n\t\t\tJudge(num(get2,mum),1);\n\t\tJudge(num(get1,mum),0);\n\t}\n\tif(flag) cout<<\"TOO MANY\";\n\telse{\n\t\tcout<<(long long)(ans.son)<<\"/\"<<(long long)(ans.mum);\n\t}\n\treturn 0;\n}\n```\n\u8fd9\u9898\u5361\u5e38\u6570\uff0c\u6700\u6162\u7684\u70b9\u8dd1\u4e86 $927ms$\u3002",
        "postTime": 1672812836,
        "uid": 359444,
        "name": "Andy1262",
        "ccfLevel": 4,
        "title": "P1298\u9898\u89e3"
    },
    {
        "content": "### P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570\n\n\u9700\u8981\u6570\u5b66\u63a8\u5bfc\uff0c\u601d\u7ef4\u96be\u5ea6\u4e0d\u9ad8\u7684\u4e00\u9053\u9898\u3002\n\n\u9898\u610f\u662f\uff1a\u627e\u5230\u4e00\u4e2a**\u6700\u7b80**\u5206\u6570 $\\frac{p}{q}(0\\leq p\\leq M,1\\leq q\\leq N)$\uff0c\u4f7f\u5f97\u4f7f\u5f97\u8fd9\u4e2a\u5206\u6570\u4e0e\u7ed9\u5b9a\u7684\u5c0f\u6570\u8ddd\u79bb\u6700\u8fd1\uff08\u5373\u5dee\u7684\u7edd\u5bf9\u503c\u6700\u5c0f\uff09\u3002\n\n\u65e2\u7136\u6570\u636e\u8303\u56f4\u662f $10^7$\uff0c\u5927\u6982\u5c31\u53ef\u4ee5\u786e\u5b9a\u662f\u7ebf\u6027\u590d\u6742\u5ea6 $O(n)$ \u4e86\u3002\uff08\u6ce8\uff1a\u4e0b\u9762\u7684 $p$\u3001$q$\u3001$\\alpha$ \u5206\u522b\u8868\u793a\u76ee\u524d\u5206\u5b50\u3001\u76ee\u524d\u5206\u6bcd\u548c\u6240\u6c42\u8ddd\u79bb\u6700\u5c0f\u7684\u5c0f\u6570\u3002\uff09\n\n\u5bb9\u6613\u53d1\u73b0\u5f53\u5206\u6bcd $q$ \u786e\u5b9a\uff0c$p$ \u600e\u4e48\u53d6\u5176\u5b9e\u662f $O(1)$ \u7684\u4e8b\u60c5\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e\u5206\u6bcd\u9010\u4e2a\u6bd4\u8f83 $|\\frac{p}{q}-\\alpha|$ \u7684\u6700\u5c0f\u503c\u3002\n\n\u4f8b\u5982 $M=10,N=5,\\alpha=2.7$ \u65f6\uff0c\u5bf9\u5206\u6bcd $q$ \u8fdb\u884c\u679a\u4e3e\uff1a\n\n- $q=1$\uff0c\u6700\u63a5\u8fd1\u7684 $p$ \u662f $3$\uff08\u7528 $2.7\\times1$\uff0c\u6bd4\u8f83\u5939\u7740\u5b83\u7684 $2$ \u548c $3$ \u5f97\uff09\n\n- $q=2$\uff0c\u6700\u63a5\u8fd1\u7684 $p$ \u662f $5$\uff08$2.7\\times2$\uff09\n\n- $q=3$\uff0c\u6700\u63a5\u8fd1\u7684 $p$ \u662f $8$\uff08$2.7\\times3$\uff09\n\n\u4ee5\u6b64\u7c7b\u63a8\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u679a\u4e3e\u5230 $q=q_0$ \u65f6\uff0c\u6240\u5bf9\u5e94\u4f7f $|\\frac{p}{q}-\\alpha|$ \u6700\u5c0f\u7684 $p$ \u4e00\u5b9a\u5728 $\\left \\lfloor \\alpha\\times q \\right \\rfloor$ \u548c $\\left \\lfloor \\alpha\\times q \\right \\rfloor + 1$ \u4e4b\u95f4\u3002\n\n\u90a3\u4e48\u63a5\u7740\u770b\u5982\u4f55\u6bd4\u8f83\u4e24\u4e2a\u63a5\u8fd1\u7684\u5206\u6570\uff0c\u4e0d\u59a8\u5c06\u5b83\u4eec\u8bbe\u4e3a $\\frac{p_1}{q_1}$ \u548c $\\frac{p_2}{q_2}$\u3002\n\n\u6bd4\u8f83\u5b83\u4eec\u4e0e $\\alpha$ \u7684\u8ddd\u79bb $|\\frac{p_1}{q_1}-\\alpha|$ \u548c $|\\frac{p_2}{q_2}-\\alpha|$\uff0c\u53d1\u73b0\uff1a\n\n$$|\\frac{p_1}{q_1}-\\alpha|<|\\frac{p_2}{q_2}-\\alpha|\\Longleftarrow |p_1q_2-\\alpha q_2| < |p_2q_1-\\alpha q_1|$$\n\n\u4e8e\u662f\u53ea\u8981\u8fd9\u6837\u6bd4\u8f83\u5c31\u597d\u3002\n\n\u53e6\u5916\u5bf9\u4e8e\u9898\u76ee\u4e2d\u6700\u7b80\u5206\u6570\u7684\u8981\u6c42\uff0c\u8003\u8651\u5bf9\u4e8e\u5f53\u524d\u62df\u5408\u6700\u4f73\u7684\u5206\u6570 $\\frac{p_0}{q_0}$ \u548c\u76ee\u524d\u679a\u4e3e\u51fa\u6765\u7684\u5206\u6570 $\\frac{u}{v}$\uff0c\u5982\u679c\u5b83\u4eec\u76f8\u7b49\uff08\u4e5f\u5c31\u662f $p_0v=q_0u$\uff09\uff0c\u6bd4\u8f83\u5b83\u4eec\u7684\u5206\u6bcd\u5373\u53ef\u77e5\u9053\u54ea\u4e2a\u4e0d\u662f\u6700\u7b80\u5206\u6570\u3002\u5982\u679c\u5206\u6570 $\\frac{u}{v}$ \u4e0d\u6bd4\u5f53\u524d\u6700\u4f73 $\\frac{p_0}{q_0}$ \u597d\uff0c\u90a3\u4e48\u4e0d\u7528\u5224\u65ad\u662f\u5426\u6700\u7b80\uff0c\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define qwq printf(\"qwq\")\nusing namespace std;\n\n#define ll long long\n#define _eps 1e-10\nint m, n; pair<ll, ll> target;\ndouble goal, ans = 1e9;\n\nint cnt = 0;\n//cnt\u8bb0\u5f55\u6709\u591a\u5c11\u4e2a\u6700\u5c0f\u503c \n\nint cmp(ll p1, ll q1, ll p2, ll q2)\n{\n\tdouble s1 = abs(p1 * q2 - q1 * goal * q2);\n\tdouble s2 = abs(p2 * q1 - q2 * goal * q1);\n\tif (abs(s1 - s2) < _eps) return 0;\n\telse if (s1 < s2) return -1; else return 1;\n}\n\nvoid check_frac(ll p, ll q)\n{\n\tif (p > m) p = m;\n\tif (cnt == 0) cnt = 1, target.first = p, target.second = q;\n\telse\n\t{\n\t\tif (p * target.second == q * target.first) return;/*\u4e0d\u662f\u6700\u7b80\uff0c\u4f46\u662f\u6700\u4f18*/\n\t\tif (!cmp(p, q, target.first, target.second)) cnt++;\n\t\telse if (cmp(p, q, target.first, target.second) == -1)\n\t\t\tcnt = 1, target.first = p, target.second = q;\n\t}\n}\n\nint main()\n{\n\tscanf(\"%d%d%lf\", &m, &n, &goal);\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tll m1 = (ll)(goal * i), m2 = m1 + 1;\n\t\tcheck_frac(m1, i);\n\t\tcheck_frac(m2, i);\n\t}\n\tif (cnt == 1) printf(\"%d/%d\\n\", target.first, target.second);\n\telse printf(\"TOO MANY\\n\");\n\treturn 0;\n}\n```\n\n\u9898\u76ee\u4e2d\u7684\u6a21\u62df\u8fd8\u6709\u4e00\u4e9b\u5c0f\u7ec6\u8282\uff1a\n\n- \u5f53\u679a\u4e3e\u5206\u6bcd\u65f6\u5bf9\u5e94\u5206\u5b50\u8d85\u8fc7\u4e86\u9650\u5236 $m$\uff0c\u5c31\u8981\u5c06\u5176\u538b\u6210 $m$\uff08\u5373\u4ee3\u7801\u4e2d ```if (p > m) p = m;``` \u4e00\u53e5\uff09\n\n- \u4ee3\u7801\u4e2d\u7684 ```cnt``` \u7528\u6765\u8bb0\u5f55\u51fa\u73b0\u4e86\u591a\u5c11\u4e2a\u6700\u4f18\uff0c\u5982\u679c\u66f4\u65b0\u4e86\u6700\u5927\u503c\u5c31\u5f52\u6210 $1$\uff0c\u5982\u679c\u548c\u5148\u524d\u6700\u4f18\u76f8\u540c\u5219 ```cnt++```\n\n- \u7cbe\u5ea6\u95ee\u9898\uff1a\u4e24\u4e2a ```double``` \u6bd4\u8f83\u7684\u65f6\u5019\u9700\u8981\u7528\u5b83\u4eec\u7684\u5dee\u4e0e\u65e0\u7a77\u5c0f $\\epsilon$ \u6bd4\u8f83\uff0c\u8fd9\u91cc\u53d6\u4e00\u4e2a\u6781\u5c0f\u503c $10^{-10}$\u3002",
        "postTime": 1672198331,
        "uid": 576077,
        "name": "Feng_Jing",
        "ccfLevel": 3,
        "title": "P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570"
    },
    {
        "content": "## \u9898\u610f\n\u627e\u5728\u6570\u8f74\u4e0a\u8ddd $r$ \u6700\u8fd1\u7684\u65e2\u7ea6\u5206\u6570\uff0c\u82e5\u8fd9\u4e2a\u5206\u6570\u552f\u4e00\uff0c\u5219\u8f93\u51fa\u8fd9\u4e2a\u5206\u6570\uff0c\u5426\u5219\u8f93\u51fa \"TOO MANY\"\u3002\n## \u601d\u8def\n\u6211\u4eec\u4ee4 $\\frac{a}{b} = r$\u3002\u7136\u540e\u6211\u4eec\u5047\u8bbe $a$ \u5df2\u77e5\uff0c\u5219\u6613\u5f97 $b = \\frac{a}{r}$\uff0c\u82e5\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u5f97\u5230 $b$ \u662f\u5c0f\u6570\uff0c\u5219\u4e3a\u4e86\u8ba9 $\\frac{a}{b}$ \u66f4\u63a5\u8fd1 $r$\uff0c \u6211\u4eec\u4f1a\u53d6 $\\min(\\left[ b \\right], n)$ \u6216 $\\min(\\left[ b \\right] + 1,n)$ \u4f5c\u4e3a\u53ef\u80fd\u7684\u5206\u6bcd $fmi$ \u548c $fmii$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u7528 $ansfz$ \u548c $ansfm$ \u8bb0\u5f55\u76ee\u524d\u6700\u4f18\u7684\u4e00\u4e2a\u5206\u6570\uff0c\u7528 $mindel$ \u8bb0\u5f55\u4e0e $r$ \u6700\u5c0f\u8ddd\u79bb\uff0c\u7528 $tot$ \u8bb0\u5f55\u8fbe\u5230\u8fd9\u4e2a\u6700\u5c0f\u8ddd\u79bb\u7684\u4e0d\u540c\u7684\u5206\u6570\u7684\u4e2a\u6570\u3002\n\n\u9996\u5148\uff0c\u56e0\u4e3a $0$ \u4e0d\u80fd\u505a\u5206\u6bcd\uff0c\u6545\u6211\u4eec\u5c06 $ansfz$ \u521d\u59cb\u5316\u4e3a $0$\uff0c\u5c06 $ansfm$ \u521d\u59cb\u5316\u4e3a $1$\uff0c\u5c06 $tot$ \u521d\u59cb\u5316\u4e3a $1$\uff0c$mindel$ \u521d\u59cb\u5316\u4e3a $r$\u3002\n\n\u7136\u540e\u5bf9 $a$ \u4ece $1$ \u5230 $n$ \u679a\u4e3e\uff0c\u6bcf\u4e00\u6b21\u6bd4\u8f83 $\\frac{a}{fmi}$ \u548c $\\frac{a}{fmii}$ \u4e0e $r$ \u4e4b\u95f4\u7684\u8ddd\u79bb\u4e0e $mindel$ \u4e4b\u95f4\u7684\u5927\u5c0f\u5173\u7cfb\uff1a\u5982\u679c\u76f8\u7b49\uff0c\u5219\u5224\u65ad\u8fd9\u4e2a\u5206\u6570\u4e0e\u6211\u4eec\u8bb0\u5f55\u7684\u76ee\u524d\u7684\u6700\u4f18\u5206\u6570\u4ee3\u8868\u7684\u662f\u5426\u662f\u540c\u4e00\u4e2a\u65e2\u7ea6\u5206\u6570\uff08\u8fd9\u6837\u901a\u8fc7 if \u8bed\u53e5\u7684\u60f0\u6027\u5904\u7406\uff0c\u5c31\u53ef\u4ee5\u5927\u5927\u51cf\u5c11\u6c42\u6700\u5927\u516c\u7ea6\u6570\u7684\u6b21\u6570\uff09\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u5c06 $tot$ \u52a0 $1$\uff1b\u5982\u679c\u5c0f\u4e8e $mindel$ \uff0c\u5219\u66f4\u65b0 $mindel$\u3001$ans_fz$\u3001$ansfm$ \u4e0e $tot$\u3002\n\n\u4f46\u662f\u8fd9\u65f6\u5019\u6709\u4e24\u4e2a\u95ee\u9898\uff0c\u4e00\u4e2a\u662f $n$ \u7684\u6570\u636e\u8303\u56f4\u662f $1$ \u5230 $10^7$\uff0c\u6211\u4eec\u76f4\u63a5\u7a77\u4e3e\u53ef\u80fd\u4f1a\u8d85\u65f6\uff1b\u7b2c\u4e8c\u4e2a\u662f\uff0c\u6211\u4eec\u77e5\u9053\u6ee1\u8db3\u9898\u610f\u7684\u5206\u6570\u7684\u5206\u5b50\u4e0e\u5206\u6bcd\u80af\u5b9a\u90fd\u5728 $1$ \u5230 $10^7$ \u4e2d\uff0c\u4f46\u662f $\\frac{a}{r}$ \u6700\u5927\u53ef\u4ee5\u8fbe\u5230 $10^{17}$\uff0c\u90a3\u6211\u4eec\u8981\u628a $fmi$ \u548c $fmii$ \u5168\u6362\u4e3a long long \u7c7b\u578b\u5417\uff1f \u672c\u6765\u5c31\u53ef\u80fd\u8d85\u65f6\u4e86\uff0c\u8fd9\u6837\u7528\u8f97\u8f6c\u76f8\u9664\u6cd5\u6c42\u6700\u5927\u516c\u7ea6\u6570\u65f6\u4e0d\u53ef\u907f\u514d\u7684 long long \u7c7b\u578b\u53d6\u6a21\uff0c\u8fd9\u6837\u66f4\u6709\u53ef\u80fd\u8d85\u65f6\u4e86\u3002\n\n\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u5982\u679c\u8f83\u5c0f\u7684\u53ef\u80fd\u7684\u5206\u6bcd $\\left[b\\right]$ \u5f00\u59cb\u5927\u4e8e $n$ \u4e86\uff0c\u90a3\u4e48\u5c31\u6ca1\u6709\u5fc5\u8981\u518d\u5bf9 $a$ \u8fdb\u884c\u679a\u4e3e\u4e86\u3002\u56e0\u4e3a $\\left[b\\right]$ \u5df2\u7ecf\u5927\u4e8e $n$ \u4e86\uff0c$fmi$ \u548c $fmii$ \u4e5f\u53ea\u80fd\u662f\u6bd4 $\\left[b\\right]$ \u5c0f\u7684 $n$\uff0c\u8fd9\u65f6\u5f97\u5230\u7684 $\\frac{a}{fmi}$ \u548c $\\frac{a}{fmii}$ \u5df2\u7ecf\u6bd4 $\\frac{a}{\\left[b\\right]}$ \u8ddd\u79bb $r$ \u7684\u8ddd\u79bb\u8fdc\u4e86\uff0c\u53c8\u6839\u636e $b = \\frac{a}{r}$ \u53ef\u77e5\uff0c$a$ \u518d\u5927\uff0c\u53ea\u4f1a\u8ba9 $\\frac{a}{fmi}$ \u548c $\\frac{a}{fmii}$ \u79bb $r$ \u66f4\u8fdc\u3002\u4e8e\u662f\uff0c\u95ee\u9898\u4e00\u5c31\u89e3\u51b3\u4e86\u3002\n\n\u90a3\u4e48\u8fd9\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u89e3\u51b3\u95ee\u9898\u4e8c\u4e86\u3002\u56e0\u4e3a\u6211\u4eec\u77e5\u9053 $\\left[b\\right]$ \u5927\u4e8e $n$ \u4e86\u5c31\u6ca1\u6709\u5fc5\u8981\u518d\u679a\u4e3e\u4e86\uff0c\u6545\u6211\u4eec\u53ef\u4ee5\u518d\u7528\u4e00\u4e2a long long \u7c7b\u578b\u7684\u53d8\u91cf $fmij$ \u8bb0\u5f55 $\\left[b\\right]$\u3002\u82e5 $\\left[b\\right] > n$ \u5219\u5728\u7edf\u8ba1\u5b8c\u8fd9\u6b21\u540e\u5c31\u7ed3\u675f\u679a\u4e3e\uff1b\u5426\u5219\u7ee7\u7eed\u3002\u8fd9\u6837\u5c31\u5de7\uff08\u66b4\uff09\u5999\uff08\u529b\uff09\u7684\u907f\u514d\u4e86 long long \u7c7b\u578b\u53d6\u6a21\u3002\n\n\u5728\u89e3\u51b3\u5b8c\u8fd9\u4e2a\u95ee\u9898\u540e\uff0c\u6700\u540e\u5c31\u662f\u5565\u65f6\u5019\u8f93\u51fa\u5565\u7684\u95ee\u9898\u4e86\u3002\u663e\u7136\uff0c\u5f53 $tot$ \u4e3a $1$ \u65f6\uff0c\u624d\u8f93\u51fa\u65e2\u7ea6\u5206\u6570\uff1b\u5426\u5219\u8f93\u51fa \"TOO MANY\"\u3002\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u6b22\u559c\u5730\u6572\u4ee3\u7801\u4e86 ( )\u3002\n## \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint tot, ans_fz, ans_fm, n, m;\ndouble r, mindel;\nint gcd (int a, int b) \n{\n\tif (a < b) swap (a, b);\n\tif (b == 0) return a;\n\telse return gcd (b, a % b);\n}\nvoid comparison (int fz, int fm) \n{\n\tdouble ret = abs ((1.0 * fz / fm) - r);\n\tif (ret == mindel && (fz / gcd (fz, fm)) != (ans_fz / gcd (ans_fz, ans_fm)))\n\t\ttot ++;\n\telse if (ret < mindel) \n\t{\n\t\tmindel = ret;\n\t\ttot = 1, ans_fz = fz, ans_fm = fm;\n\t}\n}\nint main () \n{\n\tscanf (\"%d %d\", &m, &n);\n\tscanf (\"%lf\", &r);\n\tif (r == 0) \n\t{\n\t\tprintf (\"0/1\");\n\t\treturn 0;\n\t}\n\tmindel = r;\n\tans_fz = 0, ans_fm = 1, tot = 1;\n\tfor (int i = 1; i <= m; i++) \n\t{\n\t\tint fmi = int (1.0 * i / r), fmii = fmi + 1;\n\t\tlong long fmij = 1.0 * (1ll * i) / r;\n\t\tif (fmij > n)\n\t\t{\n\t\t\tcomparison (i, n);\n\t\t\tbreak;\n\t\t}\n\t\tif (fmi <= n) comparison (i, fmi);\n\t\tif (fmii <= n) comparison (i, fmii);\n\t}\n\tif (tot == 1) \n\t{\n\t\tint g = gcd (ans_fz, ans_fm);\n\t\tans_fz /= g, ans_fm /= g;\n\t\tprintf (\"%d/%d\", ans_fz, ans_fm);\n\t}\n\telse if (tot >= 2) printf (\"TOO MANY\");\n\treturn 0;\n} \n```\n~~**\u7b80\u5316\u4e86\u4ee3\u7801**~~\n\n\n",
        "postTime": 1670893839,
        "uid": 183881,
        "name": "_shy",
        "ccfLevel": 3,
        "title": "\u3010\u9898\u89e3\u3011P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570"
    },
    {
        "content": "## $\\mathcal{P}reface$\n\n\u8fd9\u662f\u4e00\u7bc7\u66b4\u529b\u9898\u89e3\u3002\u5b66\u4e60\u6b63\u89e3\u52ff\u5165\u3002\n\n## $\\mathcal{S}olution$\n\n\u9996\u5148\u53ef\u4ee5\u60f3\u5230\u66b4\u529b\uff1a\u679a\u4e3e\u5206\u5b50\u3001\u5206\u6bcd\u3002\u4f46\u662f\u8fd9\u6837 $\\mathcal{O}(nm)$\uff0c\u80af\u5b9a T\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u53ea\u679a\u4e3e\u5206\u5b50\u3002\u56e0\u4e3a\u786e\u5b9a\u4e86\u5206\u5b50\u540e\uff0c\u5206\u6570\u503c\u968f\u5206\u6bcd\u589e\u5927\u662f\u6709\u5355\u8c03\u6027\u7684\uff0c\u53ef\u4ee5\u4e8c\u5206\u3002\n\n~~\u7136\u540e\uff0c\u7136\u540e\u5c31\u6ca1\u4e86 qwq~~\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n\\log m)$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(1)$\u3002\n\n## $\\mathcal{C}ode$\n\n\u4e8c\u5206\uff0c[2.50s](https://www.luogu.com.cn/record/89047653)\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n, m, qwq, qaq, cnt; // qwq\uff1a\u5f53\u524d\u6700\u4f18\u89e3\u5206\u5b50 qaq\uff1a\u5f53\u524d\u6700\u4f18\u89e3\u5206\u6bcd cnt\uff1a\u5f53\u524d\u6700\u4f18\u89e3\u4e2a\u6570\ndouble k, now = 114514; // k \u8868\u793a\u76ee\u6807\uff0cnow \u8868\u793a\u79bb\u76ee\u6807\u7684\u6700\u5c0f\u8ddd\u79bb\nint main() {\n\tcin >> n >> m >> k;\n\tfor (int i = 0; i <= n; i ++) { // \u6ce8\u610f\u4ece 0 \u5f00\u59cb\u679a\u4e3e\n\t\tint l = 1, r = m; // \u4e8c\u5206 \n\t\twhile (l <= r) {\n\t\t\tint mid = (l + r) / 2;\n\t\t\tdouble p = 1.0 * i / mid;\n\t\t\tif (fabs(p - k) < now) qwq = i, qaq = mid, now = fabs(p - k), cnt = 1; // \u66f4\u65b0\u6700\u4f18\u89e3\uff0c\u65b9\u6848\u53d8\u6210 1 \u79cd\u3002\n\t\t\tif (fabs(p - k) == now && 1.0 * i / mid != 1.0 * qwq / qaq) cnt ++; // \u5982\u679c\u540c\u4e3a\u6700\u4f18\u89e3\u4e14\u4e0d\u540c\uff0c\u5219\u65b9\u6848\u6570\u589e\u52a0\u3002\n\t\t\tif (p > k) l = mid + 1; // \u6ce8\u610f\uff0c\u5206\u6570\u503c\u8d8a\u5927\uff0c\u8bf4\u660e\u5206\u6bcd\u8d8a\u5c0f\uff01\n\t\t\telse r = mid - 1;\n\t\t}\n\t}\n\tint awa = __gcd(qwq, qaq); // \u8bb0\u5f97\u5316\u7b80 QAQ\n\tif (cnt < 2) cout << qwq / awa << '/' << qaq / awa << '\\n';\n\telse puts(\"TOO MANY\");// \u82e5\u4e0d\u6b62\u4e00\u79cd\uff0c\u5c31\u662f TOO MANY\n\treturn 0;\n}\n```\n",
        "postTime": 1665133674,
        "uid": 560516,
        "name": "\u55b5\u4ed4\u725b\u5976",
        "ccfLevel": 0,
        "title": "P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570 \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\u5bf9\u4e8e\u4e00\u4e2a\u6570\u8bba\u6210\u5458\uff0c\u51e0\u4e4e\u662f\u4e2a\u666e\u53ca+/\u63d0\u9ad8-\u3002\n\n\u597d\u4e86\uff0c\u5e9f\u8bdd\u4e0d\u591a\u8bf4\uff0c\u6211\u4eec\u76f4\u63a5\u8fdb\u5165\u6b63\u9898\u3002\n\n### \u9898\u76ee\u5206\u6790\n\u6211\u4eec\u5148\u81ea\u5df1\u51fa\u4e2a\u6d4b\u8bd5\u70b9\uff0c\u624b\u7b97\u4e00\u4e0b\u3002\n\n\u5f53 $n=6$\uff0c$m=6$\uff0c$r=0.6$ \u65f6\uff1a\n\n\u6211\u4eec\u5217\u4e2a\u8868\u683c\uff1a\n\n| $b \\setminus a$ | 1 | 2 | 3 | 4 | 5 | 6 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| 1 | 1 | 2 | 3 | 4 | 5 | 6 |\n| 2 | $\\frac{1}{2}$ | 1 | $\\frac{3}{2}$ | $\\frac{4}{2}$ | $\\frac{5}{2}$ | $\\frac{6}{2}$ |\n| 3 | $\\frac{1}{3}$ | $\\frac{2}{3}$ | 1 | $\\frac{4}{3}$ | $\\frac{5}{3}$ | $\\frac{6}{3}$ |\n| 4 | $\\frac{1}{4}$ | $\\frac{2}{4}$ | $\\frac{3}{4}$ | 1 | $\\frac{5}{4}$ | $\\frac{6}{4}$ |\n| 5 | $\\frac{1}{5}$ | $\\frac{2}{5}$ | $\\frac{3}{5}$ | $\\frac{4}{5}$ | 1 | $\\frac{6}{5}$ |\n| 6 | $\\frac{1}{6}$ | $\\frac{2}{6}$ | $\\frac{3}{6}$ | $\\frac{4}{6}$ | $\\frac{5}{6}$ | 1 |\n\n\u6211\u4eec\u627e\u51fa\u63a5\u8fd1\u7684\u4e00\u4e24\u4e2a\u6570\uff0c\u7531\u6b64\u53ef\u5f97\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rnr6z9x8.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u884c\u6700\u591a\u4e24\u4e2a\u6709\u7528\uff0c\u90a3\u56e0\u4e3a\u662f\u6c42\u6700\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6bcf\u884c\u90fd\u53d6\u4e24\u4e2a\u3002\n\n\u7531\u4e8e $\\dfrac{a}{b}\\approx r$\n\n\u6240\u4ee5 $a \\approx r \\times b$\n\n\u4e5f\u5c31\u662f\u8bf4\u5728\u77e5\u9053\u5206\u5b50\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5 $O(1)$ \u7684\u6c42\u51fa\u884c\u4e0a\u7684\u90a3\u4e24\u4e2a\u6570\u3002\n\n$a_1 = \\lfloor r \\times b \\rfloor $\n\n$a_2 = \\lfloor r \\times b \\rfloor+1$\n\n\u90a3\u8fd9\u6837\u53ea\u8981\u679a\u4e3e\u5206\u6bcd\u5373\u53ef\u3002\n```cpp\nfor(int i=1;i<=m;i++){\n\tlong long x1,x2;\n\tx1=i*t;\n\tx2=x1+1;\n\tcheck(x1,i);\n\tcheck(x2,i);\n}\n```\n\u679a\u4e3e\u5b8c\u5206\u6570\uff0c\u6211\u4eec\u5c31\u8981\u6bd4\u8f83\u54ea\u4e2a\u5206\u6570\u66f4\u63a5\u8fd1\u3002\n\n\u5f53 $\\lvert \\dfrac{a}{b}-r \\rvert < \\lvert \\dfrac{c}{d}-r \\rvert$\n\n\u90a3\u4e48 $\\lvert a \\times d - r\\times b\\times d \\rvert < \\lvert c\\times b-r\\times b\\times d \\rvert$\n\n```cpp\n#define eps 1e-11\nint bj(ll a,ll b,ll c,ll d){\n\tdouble s1,s2;\n\ts1=abs(a*d-r*b*d);\n\ts2=abs(c*b-r*b*d);\n\tif (abs(s1 - s2)<eps) return 0;\n\tif(s1<s2) return -1;\n\treturn 1;\n}\n```\n\u6bd4\u8f83\u524d\u6211\u4eec\u8981\u5224\u65ad\u8fd9\u4e2a\u5206\u6570\u5408\u4e0d\u5408\u6cd5\u3002\n\n\u9996\u5148\u662f\u6700\u7b80\u5206\u6570\uff0c\u5982\u679c\u4f7f\u7528 $\\gcd$\uff0c\u4f1a\u9020\u6210\u8d85\u65f6\u3002\n\n\u90a3\u8ba9\u6211\u4eec\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n1. \u4e0d\u662f\u6700\u7b80\u5206\u6570\u4e5f\u4e0d\u662f\u5f53\u524d\u6700\u63a5\u8fd1\u7684\u5206\u6570\u3002\n1. \u4e0d\u662f\u6700\u7b80\u5206\u6570\u4f46\u662f\u5f53\u524d\u6700\u63a5\u8fd1\u7684\u5206\u6570\u3002\n\n\u7b2c\u4e00\u79cd\u6211\u4eec\u53ef\u4ee5\u5ffd\u7565\uff0c\u56e0\u4e3a\u5b83\u4e0d\u4f1a\u5f71\u54cd\u7ed3\u679c\u3002\u7b2c\u4e8c\u79cd\u6211\u4eec\u9700\u8981\u7279\u6b8a\u5224\u65ad\u3002\n\n$\\dfrac{a}{b} = \\dfrac{c}{d}$\n\n\u5f97\uff0c$a\\times d= b\\times c$\n\n\u7136\u540e\u662f\u5206\u5b50\u3001\u5206\u6bcd\u5206\u522b\u5c0f\u4e8e $n$\uff0c$m$\u3002\n\n\u56e0\u4e3a\u5206\u6bcd\u662f $1,2,3,4,......,m$ \u679a\u4e3e\u7684\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8d8a\u754c\u3002\n\n\u90a3\u4e48\u53ea\u8981\u5224\u65ad\u5206\u5b50\u5373\u53ef\uff0c\u5728\u6b64\u6ce8\u610f\uff0c\u6211\u4eec\u4e00\u5b9a\u9700\u8981\u4e00\u4e2a\u6570\u6765\u5224\u65ad\uff0c\u6240\u4ee5\u4e0d\u80fd\u5199\u6210\uff1a\n```cpp\nif(a>n) return ;//\u8981\u6539\u6210 if(a>n) a=n;\n//\u4e0d\u4fe1\u7684\u8bdd\u8bd5\u8bd5\u6d4b\u8bd5\u70b9 n=1 m=100 r=10\n```\n\u6700\u540e\u662f\u5f53\u7b2c\u4e00\u4e2a\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8981\u5224\u65ad\uff0c\u8ba9\u5176\u76f4\u63a5\u8fdb\u5165\u3002\n\n```cpp\nlong long s=0;//\u5224\u65adTOO MANY\nvoid check(ll a,ll b){\n\tif(a>n) a=n;\n\tif(s==0){\n\t\ts=1,fz=a,fm=b;\n\t\treturn ;\n\t}\n\tif(a*fm==b*fz) return ;\n\tint x=bj(a,b,fz,fm);\n\tif(x==0) s++;\n\tif(x==-1) s=1,fz=a,fm=b;\n}\n```\n### \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nlong long n,m,fz,fm;\ndouble r;\n#define eps 1e-11\nint bj(ll a,ll b,ll c,ll d){\n\tdouble s1,s2;\n\ts1=abs(a*d-r*b*d);\n\ts2=abs(c*b-r*b*d);\n\tif (abs(s1 - s2)<eps) return 0;\n\tif(s1<s2) return -1;\n\treturn 1;\n}\nlong long s=0;\nvoid check(ll a,ll b){\n\tif(a>n) a=n;\n\tif(s==0){\n\t\ts=1,fz=a,fm=b;\n\t\treturn ;\n\t}\n\tif(a*fm==b*fz) return ;\n\tint x=bj(a,b,fz,fm);\n\tif(x==0) s++;\n\tif(x==-1) s=1,fz=a,fm=b;\n}\nint main(){\n\tcin>>n>>m;\n\tcin>>r;\n\tfor(int i=1;i<=m;i++){\n\t\tlong long x1,x2;\n\t\tx1=i*r;\n\t\tx2=x1+1;\n\t\tcheck(x1,i);\n\t\tcheck(x2,i);\n\t}\n\tif(s==1) cout<<fz<<\"/\"<<fm;\n\telse cout<<\"TOO MANY\";\n    return 0;\n}\n```\n\u5b8c\u7ed3\u6492\u82b1\uff01\uff01\uff01",
        "postTime": 1664762808,
        "uid": 559222,
        "name": "cwocw",
        "ccfLevel": 5,
        "title": "P1298"
    },
    {
        "content": "- \u6709\u4e00\u4e2a\u5f88\u7b80\u5355\u6613\u61c2\u7684\u505a\u6cd5\uff0c\u5bf9\u4e8e\u6709\u6548\u4f4d\u6570\u8f83\u591a\u7684\u9898\u76ee\uff0c\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u7406\u8bba\u590d\u6742\u5ea6\u7684\u4f18\u5316\uff08\u5b9e\u9645\u8f83\u5feb\uff09\uff0c\u53ef\u4ee5\u8fbe\u5230 $O(\\log n)$\u3002\n- \u4f3c\u4e4e\u7528\u5230[\u8fd9\u91cc](https://oi-wiki.org/math/number-theory/stern-brocot/)\u7684\u4e00\u4e9b\u601d\u60f3\uff0c\u5728\u6b64\u6807\u8bb0\u3002\n\n**[\u9898\u610f](https://www.luogu.com.cn/problem/P1298)**\n- \u7ed9\u5b9a\u4e00\u4e2a\u6b63\u5b9e\u6570 $k$\uff0c\u6c42\u4e0e\u5b83\u6700\u63a5\u8fd1\u7684\uff0c\u5206\u5b50\u5206\u6bcd\u5927\u5c0f\u4e0d\u8d85\u8fc7\u4e00\u5b9a\u503c $n$ \u7684\u65e2\u7ea6\u5206\u6570\u3002\n\n**\u5206\u6790**\n- \u6211\u4eec\u8bbe $a=0,b=1,c=1,d=0$\uff0c\u4ee4 $1/0$ \u8868\u793a\u6b63\u65e0\u7a77\uff0c\u90a3\u4e48\u521d\u59cb\u65f6 $k$ \u4e00\u5b9a\u5728 $[a/b,c/d]$ \u95f4\u3002\n- \u4ee4 $e=a+c,f=b+d$\uff0c\u90a3\u4e48 $a/b<e/f<b/d$ \u4e14 $e/f$ \u4e3a\u65e2\u7ea6\u5206\u6570\uff0c\u7136\u540e\u67e5\u8be2\u76ee\u6807\u5728 $[a/b,e/f]$\uff0c\u8fd8\u662f $[e/f,c/d]$ \u5185\uff0c\u7ee7\u7eed\u9012\u5f52\uff0c[\u4ee3\u7801](https://www.luogu.com.cn/paste/8uvajnwv)\u3002\n- \u76f4\u63a5\u8fd9\u6837\u505a\u7684\u590d\u6742\u5ea6\u4e3a $O(n)$\uff0c\u5f53\u521d\u59cb\u503c\u53d6\u6574\u6570\u503c\u8f83\u5927\u65f6\u5bb9\u6613\u53d6\u5230\u4e0a\u754c\u3002\n- \u53ef\u4ee5\u5229\u7528\u4e00\u5143\u4e00\u6b21\u65b9\u7a0b\u8ba1\u7b97\u63a5\u4e0b\u6765\u8fd8\u6709\u51e0\u6b21\u5411\u5de6\u8d70\u548c\u5411\u53f3\u8d70\uff0c\u7531\u4e8e\u4ea4\u66ff\u5411\u5de6\u5411\u53f3\u5206\u5b50\u5206\u6bcd\u7684\u589e\u957f\u90fd\u662f\u6307\u6570\u7ea7\u7684\uff0c\u590d\u6742\u5ea6 $O(\\log n)$\uff0c\u53ef\u4ee5\u9002\u5e94\u66f4\u5927\u7684\u6570\u636e\u8303\u56f4\uff0c[\u4ee3\u7801](https://www.luogu.com.cn/paste/t9bkrtkx)\u3002",
        "postTime": 1663566476,
        "uid": 260884,
        "name": "WeLikeStudying",
        "ccfLevel": 0,
        "title": "\u3010\u6570\u5b66\u3011\u6700\u63a5\u8fd1\u7684\u5206\u6570"
    },
    {
        "content": "\u770b\u4e86\u4e0b\u8fd9\u4e2a\u9898\u7684\u9898\u89e3\u533a\u3002\n\n\u5730\u94c1\uff0c\u8001\u4eba\uff0c\u624b\u673a.jpg\u3002\n\n~~\uff08\u6211\u600e\u4e48\u4e00\u4e2a\u90fd\u770b\u4e0d\u61c2\u554a\u554a\u554a\u6211\u597d\u83dc\uff09~~\n\n\u6240\u4ee5\u4e0b\u9762\u4ecb\u7ecd\u4e00\u4e0b\u6211\u7684\u505a\u6cd5\u3002\n\n## \u5f15\u5165\uff1a\u4e00\u9053\u5c0f\u5b66\u5965\u6570\u9898\n\n\u6c42\u6700\u5c0f\u7684 $p, q$ \u4f7f\u5f97 $\\dfrac{30}{7} < \\dfrac{p}{q} < \\dfrac{34}{7}$\u3002\n\n\u4f60\u4e0d\u89c9\u5f97\u8fd9\u4e2a\u5047\u5206\u6570\u770b\u7740\u5f88\u96be\u53d7\u5417\uff1f\n\n\u5904\u7406\u6389\u5b83\uff1a$\\dfrac{2}{7} < \\dfrac{p-4q}{q} < \\dfrac{6}{7}$\u3002\n\n\u7136\u540e\u5462\uff1f\n\n\u806a\u660e\u7684\u4f60\u5df2\u7ecf\u77e5\u9053\u4e86\u3002\u6c42\u5012\u6570\uff01\u4ee4 $p-4q=r$\u3002\n\n$\\dfrac{7}{6} < \\dfrac{q}{r} < \\dfrac{7}{2}$\u3002\n\n\u6211\u4eec\u518d\u5904\u7406\u6389\u5047\u5206\u6570\uff1a\n\n$\\dfrac{1}{6} < \\dfrac{q-r}{r} < \\dfrac{5}{2}$\u3002\n\n\u6211\u4eec\u53d1\u73b0\u6b64\u65f6\u5c0f\u4e8e\u53f7\u4e24\u8fb9\u5206\u522b\u662f\u4e00\u4e2a\u771f\u5206\u6570\u548c\u4e00\u4e2a\u5047\u5206\u6570\u3002\u53ef\u4ee5\u76f4\u63a5\u4ee4 $q-r=1$\uff0c$r=1$\u3002\n\n\u7136\u540e\u6211\u4eec\u518d\u9006\u63a8\u56de\u53bb\uff0c\u53ef\u4ee5\u5f97\u5230 $p=9,q=2$\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u7c7b\u4f3c\u7684\u65b9\u6cd5\u53ef\u4ee5\u7528\u4e8e\u6c42\u89e3 $\\dfrac{a}{b} < \\dfrac{p}{q} < \\dfrac{c}{d}$ \u4e2d\u4f7f $p, q$ \u6700\u5c0f\u7684\u95ee\u9898\u3002\n\nCode\uff1a\n\n```cpp\nvoid sol(ll a, ll b, ll c, ll d, ll& p, ll& q)\n{\n    if (a < b && c > d) {\n        p = 1;\n        q = 1;\n    } else {\n        sol(d % c, c, b - d / c * a, a, q, p);\n        q += d / c * p;\n    }\n}\n```\n\n## \u6b63\u5f0f\u5f00\u59cb\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0a\u9762\u7684\u65b9\u6cd5\u9700\u8981\u9891\u7e41\u53d6\u5012\u6570\uff0c\u6240\u4ee5\u5bf9\u7cbe\u5ea6\u8981\u6c42\u6bd4\u8f83\u9ad8\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u8f93\u5165\u7684\u5c0f\u6570\u7528\u5206\u6570\u8868\u793a\u3002\u8fd9\u91cc\u5206\u6bcd\u53d6 $10^{14}$\u3002\u5f97\u5230\u5206\u6570 $\\dfrac{a}{10^{14}}$\u3002\n\n\u663e\u7136\uff0c\u82e5\u5728\u8ddd $r$ \u5728 $k$ \u7684\u8303\u56f4\u4e4b\u5185\u65f6\uff0c\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684 $p, q$\uff0c\u90a3\u4e48\u8ddd\u79bb\u5728 $k' > k$ \u4e4b\u5185\u65f6\uff0c\u4e5f\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684 $p, q$\u3002\u627e\u5230\u4e86\u5355\u8c03\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\u6240\u6c42\u7b54\u6848 $\\dfrac{p}{q}$ \u4e0e $r$ \u7684\u8ddd\u79bb $k$\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\u7b54\u6848\u5927\u4e8e\u548c\u5c0f\u4e8e $r$ \u7684\u60c5\u51b5\uff0c\u8dd1\u4e24\u6b21\u4e8c\u5206\uff1a\n\n\u5f53\u7b54\u6848\u5c0f\u4e8e $r$\uff0c \u7528\u4e0a\u8ff0\u65b9\u6cd5\u6c42\u6ee1\u8db3 $\\dfrac{a-k-1}{10^{14}} < \\dfrac{p}{q} < \\dfrac{a + 1}{10^{14}}$ \u7684\u6700\u5c0f $p, q$\u3002\u800c `check()` \u53ea\u9700\u5224\u65ad `p <= m && q <= n`\u3002\n\n\u540c\u7406\uff0c\u7b54\u6848\u5927\u4e8e $r$ \u65f6\uff0c\u4e5f\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u89e3\u51b3\u4e86\u6c42\u7b54\u6848\u7684\u95ee\u9898\u3002\u90a3\u4e48\u600e\u4e48\u5224\u65ad\u7b54\u6848\u662f\u5426\u552f\u4e00\u5462\uff1f\n\n\u8fd9\u4e2a\u4e5f\u5f88\u7b80\u5355\uff0c\u53ea\u8981\u679a\u4e3e\u8fc7\u7a0b\u4e2d\u6709\u591a\u4e2a\u6570\u4e0e\u7b54\u6848\u8ddd\u79bb\u76f8\u540c\uff0c\u7b54\u6848\u5c31\u662f\u4e0d\u552f\u4e00\u7684\u3002\u8fd9\u4e00\u70b9\u5176\u4ed6\u9898\u89e3\u5df2\u7ecf\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\u3002\u6ce8\u610f\u679a\u4e3e\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u679a\u4e3e\u5230\u540c\u4e00\u4e2a\u6570\uff0c\u8fd9\u79cd\u60c5\u51b5\u662f\u4e0d\u7b97\u91cd\u590d\u7684\u3002\n\n\u6d6e\u70b9\u6570\u6709\u7cbe\u5ea6\u8bef\u5dee\uff0c\u6240\u4ee5\u8981\u5224\u65ad\u76f8\u5dee\u503c\u5c0f\u4e8e\u4e00\u4e2a\u6781\u5c0f\u503c\uff0c\u5c31\u53ef\u4ee5\u8ba4\u4e3a\u76f8\u7b49\u3002\uff08\u8fd9\u597d\u50cf\u662f\u5e38\u8bc6\u5427\uff1f\uff09\n\n\u6700\u7ec8\u590d\u6742\u5ea6 $O(\\log^2r)$\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/we7l6rfl.png)\n\nCode:\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef __int128 ll;\ntypedef long double ld;\nclass IO {\n    template <class T>\n    void write(T a)\n    {\n        if (a > 9)\n            write(a / 10);\n        putchar(a % 10 + '0');\n    }\n\npublic:\n    template <class T>\n    IO operator<<(T a)\n    {\n        if (a < 0) {\n            putchar('-');\n            a = -a;\n        }\n        write(a);\n        return *this;\n    }\n    IO operator<<(char a)\n    {\n        putchar(a);\n        return *this;\n    }\n    template <class T>\n    IO operator>>(T& a)\n    {\n        int sign = 1;\n        a = 0;\n        char c = getchar();\n        while (c < '0' || c > '9') {\n            if (c == '-') {\n                sign = -1;\n            }\n            c = getchar();\n        }\n        while (c >= '0' && c <= '9') {\n            a = (a << 1) + (a << 3) + (c ^ 48);\n            c = getchar();\n        }\n        a *= sign;\n        return *this;\n    }\n} io;\nll m, n;\nld fr;\nll a;\nbool flag;\nll ansa, ansb;\nld ansd;\nvoid sol(ll a, ll b, ll c, ll d, ll& p, ll& q)\n{\n    if (a < b && c > d) {\n        p = 1;\n        q = 1;\n    } else {\n        sol(d % c, c, b - d / c * a, a, q, p);\n        q += d / c * p;\n    }\n}\nll gcd(ll a, ll b)\n{\n    return b == 0 ? a : gcd(b, a % b);\n}\nll max(ll a, ll b)\n{\n    return a > b ? a : b;\n}\nint main()\n{\n    io >> m >> n;\n    scanf(\"%Lf\", &fr);\n    a = fr * 1e14;\n    ansa = 0;\n    ansb = 1;\n    ansd = fr;\n    ll l = 1, r = 1e16;\n    flag = true;\n    while (l <= r) {\n        ll mid = (l + r) / 2;\n        ll p, q;\n        sol(a - 1, 1e14, a + mid + 1, 1e14, p, q);\n        if (p <= m && q <= n) {\n            r = mid - 1;\n            if (fabs(fabs(a / 1e14 - 1.0 * p / q) - ansd) < 1e-16 && (ansa != p || ansb != q)) {\n                flag = false;\n            }\n            else if (fabs(a / 1e14 - 1.0 * p / q) < ansd) {\n                ansa = p, ansb = q, ansd = fabs(a / 1e14 - 1.0 * p / q);\n                flag = true;\n            }\n        } \n        else {\n            l = mid + 1;\n        }\n    }\n    l = 1, r = 1e16;\n    while (l <= r) {\n        ll mid = (l + r) / 2;\n        ll p, q;\n        sol(max(a - mid - 1, 0), 1e14, a + 1, 1e14, p, q);\n        if (p <= m && q <= n) {\n            r = mid - 1;\n            if (fabs(fabs(a / 1e14 - 1.0 * p / q) - ansd) < 1e-16 && (ansa != p || ansb != q)) {\n                flag = false;\n            }\n            else if (fabs(a / 1e14 - 1.0 * p / q) < ansd) {\n                ansa = p, ansb = q, ansd = fabs(a / 1e14 - 1.0 * p / q);\n                flag = true;\n            }\n            \n        } else {\n            l = mid + 1;\n        }\n    }\n    if (flag)\n        io << ansa << '/' << ansb;\n    else\n        puts(\"TOO MANY\");\n    return 0;\n}\n```\n\n## \u4e00\u4e2a\u95ee\u9898\n\n\u6211\u4eec\u4e00\u76f4\u5728\u8bf4\u8ba9 $p, q$ \u6700\u5c0f\u3002\u90a3\u4e48\uff0c\u662f\u5426\u6700\u5c0f\u5316 $p$ \u7b49\u4ef7\u4e8e\u6700\u5c0f\u5316 $q$ \u5462\uff1f\n\n\u662f\u7684\u3002\n\n\u8bc1\u660e\uff1a\n\n\u82e5\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u6700\u7b80\u5206\u6570 $\\dfrac{x}{y}$\uff0c\u4f7f\u5f97 $x>p, y < q$\u3002\u90a3\u4e48 $\\dfrac{x}{y} < \\dfrac{x}{q} < \\dfrac{p}{q}$\u3002\u663e\u7136 $\\dfrac{x}{q}$ \u66f4\u4f18\u3002\n\n\u82e5\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u6700\u7b80\u5206\u6570 $\\dfrac{x}{y}$\uff0c\u4f7f\u5f97 $x<p, y > q$\u3002\u90a3\u4e48 $\\dfrac{x}{y} < \\dfrac{p}{y} < \\dfrac{p}{q}$\u3002\u663e\u7136 $\\dfrac{p}{y}$ \u66f4\u4f18\u3002\n\n\u56e0\u6b64\u6700\u4f18\u89e3\u7684\u5206\u5b50\u548c\u5206\u6bcd\u540c\u65f6\u6700\u5c0f\u3002\n\n## \u53cc\u500d\u7ecf\u9a8c\n\n[P5179](https://www.luogu.com.cn/problem/P5179)",
        "postTime": 1662086723,
        "uid": 363415,
        "name": "251Sec",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1298 \u6700\u63a5\u8fd1\u7684\u5206\u6570"
    },
    {
        "content": "## \u8fd9\u9898\u770b\u5230\u8bb8\u8bb8\u591a\u591a\u7684\u9898\u89e3\u90fd\u6ca1\u6709\u63d0\u5230\u7cbe\u5ea6\u95ee\u9898\uff0c\u7279\u610f\u5bf9\u4e8e\u4e8c\u5206\u7684\u505a\u6cd5\u8fdb\u884c\u8865\u5145\u3002\uff08\u5373#3\u6d4b\u8bd5\u70b9\uff09\n\u56e0\u4e3a\u5728\u662f\u5426\u91cd\u590d\u7684\u67e5\u627e\u7684\u65f6\u5019\uff0c\u8981\u5224\u65ad\u662f\u5426\u4e0e\u6700\u4f18\u89e3\u4e00\u6837\u4f18\uff0c\u6ce8\u610f\u662f\u4e0d\u53ef\u4ee5\u76f4\u63a5\u5224\u65ad\u662f\u5426\u7b49\u4e8e\u7684~~\u672c\u4eba\u4eb2\u81ea\u5c1d\u8bd5\u65e0\u6570\u904d~~\uff0c\u4e00\u5b9a\u8981\u770b\u4e24\u6570\u4e4b\u5dee\u662f\u5426\u5c0f\u4e8e\u4e00\u4e2a\u7279\u522b\u5c0f\u7684\u6570\u6bd4\u5982\u8bf4 ```0.00000000000001```\uff08\u5f00\u592a\u5927\u8fd8\u662f\u5bb9\u6613\u6302\u6389\uff09\uff0c\u5982\u679c\u662f\u5219\u88ab\u8ba4\u4e3a\u662f\u91cd\u590d\u7684\uff0c\u5426\u5219\u4e0d\u662f\u3002\u5177\u4f53\u7684\u5b9e\u73b0\u4e0b\u9762\u4ee3\u7801\u91cc\u9762\u89e3\u91ca\u4e0e\u522b\u7684\u9898\u89e3\u5e94\u8be5\u53ef\u4ee5\u8ba9\u5927\u5bb6\u660e\u767d\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nint main()\n{\n\tll a , b , ansup = 1 , ansdown = 1 , i = 1;\n\tlong double c;\n\tcin >> a >> b >> c;\n\tfor ( ll down = 1; down <= b; down++ )\n\t{\n\t\tll up1 = down * c <= a ? down * c : a;//\u4e8c\u5206\u67e5\u627e\u5c0f\u7684\u90a3\u4e2a \n\t\tll up2 = up1 + 1 < a ? up1 + 1 : a;//\u4e8c\u5206\u67e5\u627e\u5927\u7684\u90a3\u4e2a\n\t\tll up = abs ( double ( up1 ) / double ( down ) - c ) < abs ( double ( up2 ) / double ( down ) - c ) ? up1 : up2;//\u6bd4\u8f83\u627e\u5230\u66f4\u4f18\u89e3 \n\t\tansup = abs ( double ( up ) / double ( down ) - c ) < abs ( double ( ansup ) / double ( ansdown ) - c ) ? up : ansup;//\u66f4\u65b0\u5168\u5c40\u6700\u4f18\u89e3 \n\t\tansdown = abs ( double ( up ) / double ( down ) - c ) < abs ( double ( ansup ) / double ( ansdown ) - c ) ? down : ansdown;//\u66f4\u65b0\u5168\u5c40\u6700\u4f18\u89e3 \n\t}\n\tfor ( ll down = 1; down <= b; down++ )\n\t{\n\t\tll up1 = down * c <= a ? down * c : a;//\u540c\u7406 \n\t\tll up2 = up1 + 1 <= a ? up1 + 1 : a;\n\t\tif ( abs ( double ( up1 ) / double ( down ) + double ( ansup ) / double ( ansdown ) - 2 * c ) <= 0.00000000000001//\u5982\u679cup1\u548c\u6700\u4f18\u89e3\u4e00\u6837\u4f18\n\t\t&& up1 / __gcd ( up1 , down ) != ansup / __gcd ( ansup , ansdown ) //\u800c\u4e14\u4e0d\u4e00\u6837 \n\t\t|| abs ( double ( up2 ) / double ( down ) + double ( ansup ) / double ( ansdown ) - 2 * c ) <= 0.00000000000001 //\u5982\u679cup2\u548c\u6700\u4f18\u89e3\u4e00\u6837\u4f18\n\t\t&& up2 / __gcd ( up2 , down ) != ansup / __gcd ( ansup , ansdown ) )//\u800c\u4e14\u4e0d\u4e00\u6837 \n\t\t{\n\t\t\tcout << \"TOO MANY\\n\";//\u90a3\u4e48\u91cd\u590d\u4e86 \n\t\t\treturn 0;\n\t\t}\n\t}\n\tansup /= __gcd ( ansup , ansdown );//\u7ea6\u5206 \n\tansdown /= __gcd ( ansup , ansdown );\n\tcout << ansup << \"/\" << ansdown << endl;\n\treturn 0;\n}\n\n```\n",
        "postTime": 1661505605,
        "uid": 726395,
        "name": "ztntonny",
        "ccfLevel": 4,
        "title": "P1298\u9898\u89e3"
    }
]
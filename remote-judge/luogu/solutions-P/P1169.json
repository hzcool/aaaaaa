[
    {
        "content": "\n# [\u987e](https://www.luogu.org/blog/RPdreamer/#)[z](https://www.cnblogs.com/-guz/)\n\n~~\u4f60\u6ca1\u6709\u53d1\u73b0\u4e24\u4e2a\u5b57\u91cc\u7684blog\u90fd\u4e0d\u4e00\u6837\u561b~~ qwq\n\n\u9898\u76ee\u63cf\u8ff0-->[p1169 \u68cb\u76d8\u5236\u4f5c](https://www.luogu.org/problemnew/show/P1169)\n\n## \u9898\u76ee\u5927\u610f\n\n\u3000\u7ed9\u5b9a\u4e00\u4e2a01\u68cb\u76d8,\u6c42\u5176\u4e2d01\u4ea4\u9519\u7684\u6700\u5927\u6b63\u65b9\u5f62\u4e0e\u77e9\u5f62\u3002\n\n## \u89e3\u9898\u601d\u8def:\n\n\u3000\u52a8\u6001\u89c4\u5212\uff0d\uff0d\uff0d\u60ac\u7ebf\u6cd5\n\n\u4ee5\u4e0b\u5185\u5bb9\u90e8\u5206\u53c2\u8003[@Clove_unique](https://blog.csdn.net/Clove_unique/article/details/50512624)\n\n## \u60ac\u7ebf\u6cd5\n\n### \u7528\u9014:\n\n\u3000\u3000\u89e3\u51b3\u7ed9\u5b9a\u77e9\u9635\u4e2d\u6ee1\u8db3\u6761\u4ef6\u7684\u6700\u5927\u5b50\u77e9\u9635\n   \n### \u505a\u6cd5:\n\n\u3000\u3000\u7528\u4e00\u6761\u7ebf(\u6a2a\u7ad6\u8c8c\u4f3c\u90fd\u884c)\u5de6\u53f3\u79fb\u52a8\u76f4\u5230\u4e0d\u6ee1\u8db3\u7ea6\u675f\u6761\u4ef6\u6216\u8005\u5230\u8fbe\u8fb9\u754c\n  \n### \u5b9a\u4e49\u51e0\u4e2a\u4e1c\u897f:\n\n\u3000\u3000$left[i][j]$:\u4ee3\u8868\u4ece$(i,j)$\u80fd\u5230\u8fbe\u7684**\u6700\u5de6\u4f4d\u7f6e**\n   \n\u3000\u3000$right[i][j]$:\u4ee3\u8868\u4ece$(i,j)$\u80fd\u5230\u8fbe\u7684**\u6700\u53f3\u4f4d\u7f6e**\n   \n\u3000\u3000$up[i][j]$:\u4ee3\u8868\u4ece$(i,j)$\u5411\u4e0a\u6269\u5c55\u6700\u957f\u957f\u5ea6.\n   \n### \u9012\u63a8\u516c\u5f0f\uff1a\n    \n   $$left[i][j]=max(left[i][j],left[i-1][j]$$\n   \n   $$right[i][j]=min(right[i][j],right[i-1][j]$$\n   \n### \u81f3\u4e8e\u4e3a\u4ec0\u4e48\u9012\u63a8\u516c\u5f0f\u4e2d\u8003\u8651\u4e0a\u4e00\u5c42\u7684\u60c5\u51b5\uff1f\n\n\u3000\u3000\u662f\u56e0\u4e3aup\u6570\u7ec4\u7684\u5b9a\u4e49,up\u6570\u7ec4\u4ee3\u8868**\u5411\u4e0a\u6269\u5c55**\u6700\u957f\u957f\u5ea6,\n\u6240\u4ee5\u9700\u8981\u8003\u8651\u4e0a\u4e00\u5c42\u7684\u60c5\u51b5.\n\n### \u89e3\u51b3\n\n\u3000\u3000\u6c42\u89e3\u6b63\u65b9\u5f62&&\u957f\u65b9\u5f62\u7684\u60c5\u51b5\u5373\u53ef\u3002\n\n**\u9898\u76ee\u8981\u6c4201\u4ea4\u9519,\u6240\u4ee5\"!=\"\u5373\u53ef**\n\n-------------------\u4ee3\u7801-------------------\n\n```cpp\n#include<bits/stdc++.h>\n#define IL inline\n#define RI register int\n#define maxn 2001\nusing namespace std;\nIL void read(int &x){\n\tint f=1;x=0;char s=getchar();\n\twhile(s>'9'||s<'0'){if(s=='-')f=-1;s=getchar();}\n\twhile(s<='9'&&s>='0'){x=x*10+s-'0';s=getchar();}\n\tx*=f;\n}\nint res[maxn][maxn],left[maxn][maxn],right[maxn][maxn],up[maxn][maxn];\nint n,m,ans1,ans2;\nint main()\n{\n\tread(n),read(m);\n\tfor(RI i=1;i<=n;i++)\n\t\tfor(RI j=1;j<=m;j++)\n\t\t\t{\n\t\t\t\tread(res[i][j]);\n\t\t\t\tleft[i][j]=right[i][j]=j;\n\t\t\t\tup[i][j]=1;\n\t\t\t}\n\tfor(RI i=1;i<=n;i++)\n\t\tfor(RI j=2;j<=m;j++)\n\t\t\tif(res[i][j]!=res[i][j-1])\n\t\t\t\tleft[i][j]=left[i][j-1];//\u9884\u5904\u7406\u5de6\u8fb9\u754c\n\tfor(RI i=1;i<=n;i++)\n\t\tfor(RI j=m-1;j>0;j--)\n\t\t\tif(res[i][j]!=res[i][j+1])\n\t\t\t\tright[i][j]=right[i][j+1];//\u9884\u5904\u7406\u53f3\u8fb9\u754c\n\tfor(RI i=1;i<=n;i++)\n\t\tfor(RI j=1;j<=m;j++)\n\t\t\t{\n\t\t\t\tif(i>1&&res[i][j]!=res[i-1][j])\n\t\t\t\t{\n\t\t\t\t\tleft[i][j]=max(left[i][j],left[i-1][j]);\n\t\t\t\t\tright[i][j]=min(right[i][j],right[i-1][j]);\n\t\t\t\t\tup[i][j]=up[i-1][j]+1;\n\t\t\t\t}\n\t\t\t\tint a=right[i][j]-left[i][j]+1;\t//\u6a2a\u5411\u957f\u5ea6\n\t\t\t\tint b=min(a,up[i][j]);//\u7ad6\u5411\u957f\u5ea6\n\t\t\t\t//printf(\"a:%d b:%d\\n\",a,b);\n\t\t\t\tans1=max(ans1,b*b);//\u6b63\u65b9\u5f62\n\t\t\t\tans2=max(ans2,a*up[i][j]);//\u957f\u65b9\u5f62\n\t\t\t}\n\tprintf(\"%d\\n%d\",ans1,ans2);\n}\n```\n\n\u60ac\u7ebf\u6cd5\u9898\u76ee:[P1169 \u68cb\u76d8\u5236\u4f5c](https://www.luogu.org/problemnew/show/P1169)   [p4147 \u7389\u87fe\u5bab](https://www.luogu.org/problemnew/show/P4147)   [p2701 \u5de8\u5927\u7684\u725b\u68da](https://www.luogu.org/problemnew/show/P2701)   [p1387 \u6700\u5927\u6b63\u65b9\u5f62](https://www.luogu.org/problemnew/show/P1387)\n\n## UPD\n\n2018.09.26\n\n### Q \uff1a\u5982\u56fe\u8fd9\u79cd\u60c5\u51b5\u4e0b,\u6211\u4eec\u6839\u636e\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u6c42\u51fa\u7684\u662f\u9ed1\u8272\u90e8\u5206\u7684\u9762\u79ef.\u800c\u5b9e\u9645\u4e0a\u6211\u4eec\u66f4\u5927\u7684\u9762\u79ef\u4e3a\u7ea2\u8272\u90e8\u5206,\u8fd9\u6837\u7684\u8bdd,\u60ac\u7ebf\u6cd5\u4e0d\u5c31\u9519\u4e86?\n\n(\u5982\u679c\u4f60\u4e5f\u6709\u8fd9\u65b9\u9762\u7684\u7591\u60d1,\u8bf7\u7ec6\u8bfb\u4e0b\u9762\u7684\u8bdd)\n\n![](https://i.loli.net/2018/09/26/5bab89cbcd43c.png)\n\n### A\uff1a\u7ea2\u8272\u90e8\u5206\u4f1a\u88ab\u8003\u8651\u5230.\n\n\u8003\u8651\u6211\u4eec\u4ee3\u7801\u4e2d\u7684\u8fd9\u4e00\u90e8\u5206\n\n```cpp\nif(i>1&&res[i][j]!=res[i-1][j])\n{\n\tleft[i][j]=max(left[i][j],left[i-1][j]);\n\tright[i][j]=min(right[i][j],right[i-1][j]);\n\tup[i][j]=up[i-1][j]+1;\n}\n```\n\n**if\u8bed\u53e5\u6267\u884c\u7684\u6761\u4ef6\u662f$res[i][j]!=res[i-1][j]$**,\u5373**\u53ea\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u6211\u4eec\u624d\u80fd\u66f4\u6539\u5f53\u524d\u4f4d\u7f6e$(i,j)$\u7684$left$\u6570\u7ec4\u4e0e$right$\u6570\u7ec4.**\n\n\u800c**\u4e0d\u6ee1\u8db3\u6761\u4ef6\u65f6,\u6211\u4eec\u5f53\u524d\u4f4d\u7f6e$(i,j)$\u7684$left,right,up$\u6570\u7ec4\u5e76\u4e0d\u4f1a\u6539\u53d8.**\n\n\u6240\u4ee5\u8bf4\u5f53\u518d\u6b21\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\u7684\u65f6\u5019,\u6211\u4eec\u53c8\u80fd\u6839\u636e\u56fe\u4e2d\u8fd9\u4e9b\u672a\u88ab\u66f4\u65b0\u7684\u70b9(\u5373\u84dd\u8272\u90e8\u5206)\u7684\u6570\u7ec4\u53bb\u6c42\u89e3\u51fa\u7ea2\u8272\u90e8\u5206\u7684\u9762\u79ef.\n\n![](https://i.loli.net/2018/09/26/5bab8b760377f.png)\n\n\u8fd8\u6709\u4e00\u70b9\u9700\u8981\u6ce8\u610f\u7684\u662f,**\u5728\u67d0\u4e00\u884c\u7684\u4e00\u6bb5\u7684\u5408\u6cd5\u5e8f\u5217\u4e2d,\u4ed6\u4eec\u7684$left$\u6570\u7ec4\u4e0e$right$\u6570\u7ec4\u6240\u6307\u4f4d\u7f6e\u76f8\u540c**.(\u8fd9\u4e2a\u6839\u636e\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5e94\u8be5\u4e0d\u96be\u7406\u89e3.\n\n\u4f8b\u5982\u8fd9\u6837,\u8fd9**\u4e00\u6bb5\u5408\u6cd5\u5e8f\u5217\u4e2d\u4f4d\u7f6e\u7684$left[i][j]$\u6240\u6307\u4f4d\u7f6e\u7686\u4e3a\u7ea2\u8272\u90e8\u5206,$right[i][j]$\u6240\u6307\u4f4d\u7f6e\u7686\u4e3a\u84dd\u8272\u90e8\u5206**.\n\n![](https://i.loli.net/2018/09/26/5bab8cf948b2b.png)\n\n\u5982\u679c\u4e0d\u80fd\u7406\u89e3\u7684\u8bdd\u53ef\u4ee5\u79c1\u4fe1\u95ee\u6211\u7684 qwq.\n\n~~\u5df2\u7ecf\u5c3d\u529b\u5199\u7684\u5f88\u8be6\u7ec6\u5566~~",
        "postTime": 1534198747,
        "uid": 87960,
        "name": "\u987ez",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "## 0.\u6211\u4e3a\u4ec0\u4e48\u8981\u5199\u8fd9\u4e2a\u9898\u89e3\n\u56e0\u4e3a\u5176\u4ed6\u4eba\u7684\u9898\u89e3\u6211\u770b\u4e0d\u61c2\n## 1.\u6b63\u6587\n### 1.1 \u9009\u62e9\u65b9\u6cd5\n\u8fd9\u9053\u9898\u662f\u6c42\u4e00\u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u6700\u5927\u5b50\u77e9\u9635\uff0c\u5e76\u4e14\u9650\u5236\u6761\u4ef6\u6bd4\u8f83\u6bd2\u7624\u3002\u6240\u4ee5\u6211\u4eec\u9009\u62e9\u60ac\u7ebf\u6cd5\u3002**\u60ac\u7ebf\u6cd5\u9002\u5408\u89e3\u51b3\u6c42\u4e00\u4e2a\u9650\u5236\u6761\u4ef6\u8f83\u591a\u7684\u6700\u5927\u5b50\u77e9\u9635\u95ee\u9898\u3002**\n\n### 1.2 \u8bb2\uff08xia\uff09\u89e3\uff08che\uff09\n#### 1.2.1 \u4f55\u4e3a\u60ac\u7ebf\u6cd5\n\u60ac\u7ebf\u7684\u5b9a\u4e49\u662f\u8fd9\u6837\u7684\uff1a\n\n**\u4ece\u6bcf\u4e00\u4e2a\u70b9\u5411\u4e0a\u8d70\uff0c\u77e5\u9053\u9047\u5230\u969c\u788d\u70b9\u6216\u9876\u8fb9\u754c\u3002**\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u5730\u5f97\u5230\u60ac\u7ebf\u7684\u4e00\u4e9b\u6027\u8d28\uff1a\n1. \u6bcf\u4e00\u4e2a\u70b9\u5bf9\u5e94\u4e00\u6839\u60ac\u7ebf\n1. \u6bcf\u4e00\u6839\u60ac\u7ebf\u90fd\u5bf9\u5e94\u4e86\u4e00\u4e2a\u9ad8\u5ea6\u7b49\u4e8e\u60ac\u7ebf\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u5927\u4e8e0\u7684\u77e9\u5f62\n\n\u6240\u4ee5\u60ac\u7ebf\u6cd5\u7684\u6b65\u9aa4\u5c31\u662f\uff1a**\u627e\u51fa\u6bcf\u4e00\u4e2a\u70b9\u5bf9\u5e94\u7684\u60ac\u7ebf\u7684\u9ad8\u5ea6\uff0c\u7136\u540e\u5411\u5de6\u53f3\u5206\u522b\u627e\u51fa\u8be5\u60ac\u7ebf\u80fd\u62d3\u5c55\u51fa\u7684\u77e9\u5f62\u7684\u5bbd\u5ea6\u3002**\n\n#### 1.2.2\n\u60ac\u7ebf\u6cd5\u7684\u6b65\u9aa4\uff1a\n\n1.\u5b9a\u4e49\u4e00\u4e2aup[i][j]\u6570\u7ec4,up[i][j]\u8868\u793a\uff08i\uff0cj\uff09**\u5bf9\u5e94\u7684\u60ac\u7ebf**\u7684\u957f\u5ea6\uff0c\u90a3\u4e48\u5f88\u660e\u663e\uff1a\n```cpp\n\tif(check()==true)\n            up[i][j]=up[i-1][j]+1;\n        else\n   \t    up[i][j]=1;//\u53ef\u80fd\u662f0\uff0c\u6839\u636e\u5177\u4f53\u9898\u76ee\uff0c\u672c\u9898\u56e0\u4e3a\u5982\u679c\u4e0a\u4e0b\u4e24\u4e2a\u70b9\u76f8\u540c\u65f6\u4e5f\u53ef\u4ee5\u53d6\uff08i\uff0cj\uff09\u4e00\u4e2a\u70b9\u4f5c\u4e3a\u60ac\u7ebf\uff0c\u6240\u4ee5\u521d\u503c\u4e3a1\n```\n2.\n\n\u5b9a\u4e49\u4e00\u4e2aleft[i][j]\u6570\u7ec4\uff0c\u8868\u793a\uff08i,j)**\u5bf9\u5e94\u7684\u60ac\u7ebf**\u5411\u5de6\u7684\u6700\u5927\u5bbd\u5ea6\uff0c\u540c\u7406\uff0c\u5b9a\u4e49\u4e00\u4e2aright\u6570\u7ec4\u3002\u53ef\u4ee5\u5f97\u5230\n```\n\tif(check()==true)\n            left[i][j]=max(left[i-1][j],left[i][j]),\n            right[i][j]=min(right[i-1][j],right[i][j]);\n```\n\u90a3\u4e48\uff0cleft\uff0cright\u7684\u521d\u503c\u5c31\u5e94\u8be5\u662f\uff08i\uff0cj\uff09\u8fd9\u4e2a**\u70b9**\u5411\u5de6\u7684\u6700\u5927\u5bbd\u5ea6\u3002\n\n#### 1.2.3 \u4e3a\u4ec0\u4e48\u60ac\u7ebf\u6cd5\u662f\u6b63\u786e\u7684\n\n\u6728\u6876\u539f\u7406\uff1a\u4e00\u4e2a\u6728\u6876\u88c5\u6c34\u7684\u4f53\u79ef\u662f\u7531\u5b83\u6700\u77ed\u6728\u677f\u7684\u957f\u5ea6\u51b3\u5b9a\u7684\u3002\u90a3\u4e48\u540c\u7406\uff0c\u4ece\u4e00\u4e2a\u56fe\u5f62\u4e2d\u56fd\u627e\u77e9\u5f62\u4e5f\u4e00\u5b9a\u662f\u7531\u5b83\u7684\u6700\u77ed\u60ac\u7ebf\u786e\u5b9a\u3002\u90a3\u4e48\u90a3\u4e2a\u6700\u5927\u7684\u77e9\u5f62\u4e5f\u5e94\u8be5\u662f\u6709\u4e00\u6839\u60ac\u7ebf\u786e\u5b9a\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u627e\u5230\u4e86\u8fd9\u6839\u60ac\u7ebf\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6c42\u51fa\u6700\u5927\u9762\u79ef\u3002\u800c\u60ac\u7ebf\u4e0e\u70b9\u4e00\u4e00\u5bf9\u5e94\uff0c\u6240\u4ee5\u53ea\u8981\u6211\u4eec\u679a\u4e3e\u4e86\u6240\u6709\u7684\u70b9\uff0c\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u627e\u5230\u786e\u5b9a\u6700\u5927\u77e9\u5f62\u7684\u60ac\u7ebf\u3002\n\n### 1.3 \u4ee3\u7801\u5b9e\u73b0\n```cpp\n#include<cstdio>\n#define N 2005\n#define max(a,b) a>b?a:b\n#define min(a,b) a<b?a:b\nusing namespace std;\nint up[N][N],left[N][N],right[N][N],ansa,ansb,a[N][N],m,n;\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=m;j++)\n            up[i][j]=1,left[i][j]=j,right[i][j]=j,scanf(\"%d\",&a[i][j]);// up \u521d\u503c\uff0c\u8bfb\u5165\uff0cleft/right \u6700\u521d\u503c\n            \n    for(int i=1;i<=n;i++)\n        for(int j=2;j<=m;j++)\n            if(a[i][j]^a[i][j-1])\n                left[i][j]=left[i][j-1];\n    for(int i=1;i<=n;i++)\n        for(int j=m;j>1;j--)\n            if(a[i][j]^a[i][j-1])\n                right[i][j-1]=right[i][j];//left/right\u521d\u503c\uff0c\u5373\uff08i\uff0cj\uff09\u70b9\u5411\u5de6/\u53f3\u7684\u6700\u5927\u5bbd\u5ea6\n                \n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=m;j++){\n            if(i>1&&a[i][j]^a[i-1][j])\n                up[i][j]=up[i-1][j]+1,left[i][j]=max(left[i][j],left[i-1][j]),right[i][j]=min(right[i][j],right[i-1][j]);\n            int a=right[i][j]-left[i][j]+1;\n            int b=min(a,up[i][j]);\n            ansa=max(ansa,b*b);\n            ansb=max(ansb,a*up[i][j]);\n        }\n    printf(\"%d\\n%d\",ansa,ansb);\n} \n```\n \u4ee3\u7801\u4e2d\u6709\u51e0\u70b9\u503c\u5f97\u6ce8\u610f\n 1. c++iostream\u4e2d\u6709\u4e00\u4e2aleft\u51fd\u6570\uff0c\u6240\u4ee5\u8bf7\u4e0d\u8981\u5f15\u7528bits/stdc++.h\u6216iostream\n 1. \u6c42\u6b63\u65b9\u5f62\u7684\u9762\u79ef\u5c31\u662f\u957f\u65b9\u5f62\u8f83\u77ed\u8fb9\u957f\u7684\u5e73\u65b9\n ## 2.\u7ed3\u8bed\n \u6ca1\u6709\u7ed3\u8bed\uff08\u9003",
        "postTime": 1558268826,
        "uid": 210021,
        "name": "Felis",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u6211\u662f\u4e00\u4e2a\u65e2\u6ca1\u60f3\u5230dp\u53c8\u6ca1\u60f3\u5230\u6839\u636e\u5750\u6807\u5947\u5076\u6027\u53d6\u53cd\u7684\u8111\u56de\u8def\u6709\u4e9b\u5947\u602a\u7684\u849f\u84bb\n\n\u4e2a\u4eba\u8111\u6d1e\uff1a\n\n\u4ece\u7b2c\u4e00\u884c\u5230\u7b2cn\u884c\u626b\u4e00\u904d\uff0c\u7ef4\u62a4h\u6570\u7ec4\u8868\u793a\u4ece\u5f53\u524d\u683c\u5b50\u5f80\u4e0a\u80fd\u5ef6\u4f38\u5230\u7684\u9ed1\u767d\u76f8\u95f4\u7684\u7ebf\u6bb5\uff08\u6709\u4e00\u6761\u8fb9\u957f\u4e3a1\u7684\u77e9\u5f62\uff09\u7684\u6700\u957f\u957f\u5ea6\n\n\u6211\u4eec\u53ef\u5c06\u5f53\u524d\u884c\u5206\u4e3a\u82e5\u5e72\u6761\u7ebf\u6bb5\uff0c\u6ee1\u8db3\u6bcf\u6761\u7ebf\u6bb5\u662f\u6700\u957f\u7684\u9ed1\u767d\u76f8\u95f4\u7684\u7ebf\u6bb5\uff08\u4e0d\u80fd\u518d\u5411\u5de6\u53f3\u5ef6\u4f38\uff09\n\n\u5bf9\u4e8e\u6bcf\u6761\u7ebf\u6bb5\uff0c\u7ed3\u5408h\u6570\u7ec4\uff0c\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u6392\u9ad8\u77ee\u4e0d\u4e00\u7684\u957f\u6761\u72b6\u7684\u77e9\u5f62\n\n\u662f\u4e0d\u662f\u5f88\u719f\u6089\uff1f\u7528\u5355\u8c03\u6808\u626b\u4e00\u904d\u5373\u53ef\n\n\u5982\u679c\u9047\u5230\u989c\u8272\u4e0e\u4e0a\u4e00\u4e2a\u76f8\u540c\u7684\u683c\u5b50\uff0c\u5c31\u628a\u6574\u4e2a\u6808\u5f39\u51fa\u6765\n\n\u6ce8\u610f\u6b63\u65b9\u5f62\u53ef\u4ee5\u5728\u6570\u77e9\u5f62\u7684\u65f6\u5019\u987a\u4fbf\u6570\u51fa\u6765\n\n```\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#define X (h[stack[top]])//\u77e9\u5f62\u7684\u5bbd \n#define Y (cur-stack[top-1]-1)//\u77e9\u5f62\u7684\u957f \n#define Z (min(X,Y))//\u6b63\u65b9\u5f62\u7684\u8fb9\u957f \nusing namespace std;\nint n,m,top,cur,ans1,ans2,stack[2010],map[2010][2010],h[2010];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n;++i)\n\t\tfor (int j=1;j<=m;++j) scanf(\"%d\",&map[i][j]);\n\tfor (int j=1;j<=n;++j){\n\t\tfor (int i=1;i<=m;++i)\n\t\t\tif (j>1&&map[j][i]!=map[j-1][i]) ++h[i];\n\t\t\telse h[i]=1;\n\t\tcur=1;\n\t\twhile (cur<=m){\n\t\t\tstack[0]=cur-1;stack[top=1]=cur++;\n\t\t\twhile (cur<=m&&(map[j][cur]!=map[j][cur-1])){\n\t\t\t\twhile (top&&h[stack[top]]>h[cur])\n\t\t\t\t\tans1=max(ans1,Z*Z),ans2=max(ans2,X*Y),--top;\n\t\t\t\tstack[++top]=cur++;\n\t\t\t}\n\t\t\twhile (top) ans1=max(ans1,Z*Z),ans2=max(ans2,X*Y),--top;\n\t\t}\n\t}\n\tprintf(\"%d\\n%d\\n\",ans1,ans2);\n\treturn 0;\n}\n```",
        "postTime": 1531379290,
        "uid": 30419,
        "name": "lzoi_lhy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "# Luogu P1169 ZJOI2007 \u68cb\u76d8\u5236\u4f5c \u9898\u89e3\n\n\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n\n~~\uff08\u4e0a\u9762\u4e3a\u5e9f\u8bdd\uff0c\u52ff\u55b7$QwQ$,\u4e0b\u9762\u4e3a\u6b63\u6587\uff09~~\n\n\n\u89e3\u9898\u601d\u8def\uff1a\n\n\u3000\u3000\u8fd9\u9053\u9898\u76ee\u4e3b\u8981\u662f\u8fd0\u7528\u4e86\u4e00\u4e2a\u53eb\u505a\u60ac\u7ebf\u6cd5\u7684\u65b9\u6cd5\u6765\u6c42\u6781\u5927\u77e9\u9635\u7684\u3002\n\n\u3000\u3000\u6240\u8c13\u60ac\u7ebf\u6cd5\uff1a\u5c31\u662f\u7ef4\u62a4\u4e09\u4e2a\u6570\u7ec4\uff1a$up[ ][ ], left_[ ][ ], right_[ ][ ].$ \u5206\u522b\u8868\u793a\u70b9\uff08$i$\uff0c$j$\uff09 \u5411\u4e0a\u65b9\uff0c\u5de6\u65b9\uff0c\u53f3\u65b9\u8d70\u80fd\u8d70\u7684\u6700\u8fdc\u8ddd\u79bb\u3002\n\n\u3000\u3000\u7ef4\u62a4\u65b9\u6cd5\u8fd0\u7528\u4e86\u4e00\u4e9b$dp$\u601d\u7ef4\uff1a\n\n\tup[i][j] = up[i - 1][j] + 1;\n\tleft_[i][j] = min(left_[i - 1][j], j - lz);    //lz\u8868\u793a\u5de6\u8fb9\u6700\u8fd1\u7684\u969c\u788d\n\tright_[i][j] = min(right_[i - 1][j], rz - j);  //rz\u8868\u793a\u53f3\u8fb9\u6700\u8fd1\u7684\u969c\u788d\n\u3000\u3000\u8fd8\u8981\u6ce8\u610f\u521d\u59cb\u5316\u8981\u8ba9\u7b2c0\u884c\u7684\u5143\u7d20\u4e3a\u6b63\u65e0\u7a77\uff0c\u9632\u6b62\u5176\u5bf9\u7b54\u6848\u9020\u6210\u5e72\u6270\u3002\n\n\u3000\u3000\u5f53\u9047\u5230\u969c\u788d\u70b9\u65f6\uff0c\u5e94\u5148\u66f4\u65b0\u6700\u8fd1\u969c\u788d\u4f4d\u7f6e\uff0c\u7136\u540e\u5c06\u8be5\u70b9\u7684$left$_, $right$_\u503c\u8d4b\u6210\u6b63\u65e0\u7a77\u3002\u539f\u56e0\u540c\u4e0a\u3002\n\n\u3000\u3000\u4e3a\u4e86\u65b9\u4fbf\u7ef4\u62a4$lz$,$rz$\u7684\u503c\uff0c\u6211\u8dd1\u4e86\u4e24\u8fb9\u53cc\u91cd\u5faa\u73af\u3002\u3002\u3002 \uff08\u590d\u6742\u5ea6\u4f9d\u7136$O(nm)$ )\n\n\u3000\u3000\u7136\u540e\u53ef\u4ee5\u5206\u522b\u5c06$0$\uff0c$1$\u5f53\u4f5c\u969c\u788d\u5404\u6c42\u4e00\u4e2a\u89e3\uff0c\u8f93\u51fa\u6700\u5927\u503c\u3002\n  \n  \n~~(\u7c97\u7565\u8bb2\u4e00\u8bb2\uff0c\u4e0d\u6e05\u695a\u306e\u53bb\u770b\u770b\u5176\u4ed6\u795e\u7287\u7684\u9898\u89e3)~~\n\n# \u4e0b\u9762\u653e\u4e00\u4e0b\u6211\u7684\u4e11\u964b\u7684\u4ee3\u7801$QAQ$.\n\n\u51e0\u70b9\u63d0\u9192\uff1a\n\n$1$:\u52ff\u55b7\u3002\u3002\u3002\n\n$2$: \u52ff\u6284\u88ad\u3002\u3002\u3002\n\n$3$:\u3002\u3002\u3002\n\n\n$AC$  $Code:$\n------------\n\n```cpp\n#include<bits/stdc++.h>\n/*#include<\u6284\u8005WA\uff0c\u901a\u8fc7\uff08\u9898\u89e3\uff09\u8005AC\uff01>*/\n#define re register\n#define pi acos(-1.0)\n#define inf 99999999\nusing namespace std;\nconst int MAXN = 2010;\nshort ma[MAXN][MAXN];\nint n,m,lz,rz,ans,bns,up[MAXN][MAXN],left_[MAXN][MAXN],right_[MAXN][MAXN];\ninline int read()//\u5feb\u8bfb\n{\n    int sum=0,negative=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9')\n    {\n        if(ch=='-')negative=-1;\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9')\n    {\n        sum=sum*10+ch-'0';\n        ch=getchar();\n    }\n    return sum*negative;\n}\ninline void write(int X)//\u5feb\u8f93\u51fa\n{\n    if(X<0)putchar('-'),X=-X;\n    if(X>=10)write(X/10);\n    putchar(X%10+'0');\n}\nvoid color_(int c)\n{\n    memset(up,0,sizeof(up));\n    memset(left_,0,sizeof(left_));\n    memset(right_,0,sizeof(right_));\n    for(re int i=1;i<=m;i++){\n    \tleft_[0][i]=inf,\n        right_[0][i]=inf;\n\t}\n    for(re int i=1;i<=n;i++){\n        lz=0;\n        for (re int j=1;j<=m;j++){\n        \tif(ma[i][j]!=c) \n            {\n                lz=j;\n                left_[i][j]=inf;\n                continue;\n            }\n            else\n            {\n                up[i][j]=up[i-1][j]+1;\n                left_[i][j]=min(left_[i-1][j],j-lz);\n            }  \n\t\t}     \n    }\n    for(re int i=1;i<=n;i++){\n        rz=m+1;\n        for(re int j=m;j>=1;j--){\n        \tif(ma[i][j]!=c){\n                rz=j;    \n                right_[i][j]=inf;\n                continue;\n            }\n            else{\n            \tright_[i][j]=min(right_[i-1][j],rz-j);\n\t\t\t}\n\t\t} \n    } \n    for(re int i=1;i<=n;i++){\n        for(re int j=1;j<=m;j++){\n            ans=max(ans,up[i][j]*(left_[i][j]+right_[i][j]-1));\n            bns=max(bns,min(up[i][j],(left_[i][j]+right_[i][j]-1))*min(up[i][j],(left_[i][j]+right_[i][j]-1)));\n        }\n    }\n}\nint main()//\u4e0d\u61c2\u7684\uff0c\u770b\u770b\u5c31\u61c2\u4e86T_T\n{\n    n=read();\n    m=read();\n    for(re int i=1;i<=n;i++){\n    \tfor(int j=1;j<=m;j++){\n            ma[i][j]=read();\n            if((i+j)&1){\n            \tma[i][j]=abs(ma[i][j]-1);\n\t\t\t}\n        }\n\t}  \n    ans=bns=-1;\n    color_(1);\n    color_(0);\n    write(bns);\n    printf(\"\\n\");\n    write(ans);\n    printf(\"\\n\");\n    return 0;\n}\n```\n\n~~\u6c42\u901a\u8fc7\u52a0\u8d5e\u5440$awa$~~\n\n\u901a\u8fc7\u7684\u7ba1\u7406\u5458\u7206\u5207\u732a\u56fd\u6740\uff01\uff01\uff01\n\n\u70b9\u8d5e\u7684$Oier$\u4eec\u65e9\u65e5\u4e0a\u7d2b\u540d\uff01\uff01\uff01\n\n# $End.$\n\n######   ~~\u603b\u7b97\u6c34\u5b8c\u4e86~~",
        "postTime": 1573735694,
        "uid": 115291,
        "name": "\u8fc7\u5f80\u68a6\u9b47\u4e4b\u6b87",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u5176\u5b9e\u5c31\u662fP2701\u5de8\u5927\u7684\u725b\u68da\u4e0eP4147\u7389\u87fe\u5bab\u7684\u5408\u5e76\u3002\n\nP2701\u6c42\u7684\u662f\u53ef\u4ee5\u8986\u76d6\u7684\u6700\u5927\u6b63\u65b9\u5f62\uff0c\n\n\u800cP4171\u6c42\u7684\u5219\u662f\u53ef\u4ee5\u8986\u76d6\u7684\u6700\u5927\u77e9\u5f62\u3002\n\n\u9996\u5148\u8003\u8651\u628a\u9ed1\u767d\u76f8\u95f4\u7684\u68cb\u76d8\u8f6c\u6362\u6210\u540c\u4e00\u4e2a\u989c\u8272\uff0c\u65b9\u4fbf\u4e4b\u540e\u7684\u64cd\u4f5c\u3002\u53ef\u4ee5\u901a\u8fc7\u884c\u6807\u4e0e\u5217\u6807\u4e4b\u548c\u7684\u5947\u5076\u5224\u65ad\u662f\u5426\u5e94\u8be5\u67d3\u4e0a\u76f8\u53cd\u7684\u989c\u8272\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u67d3\u5b8c\u8272\u540e\u5e94\u8be5\u518d\u5c06\u6574\u4e2a\u77e9\u5f62\u90fd\u67d3\u4e0a\u76f8\u53cd\u7684\u989c\u8272\uff0c\u91cd\u65b0\u8fdb\u884c\u540e\u9762\u7684\u64cd\u4f5c\u3002\n\n### \u6c42\u6700\u5927\u6b63\u65b9\u5f62: \n\n_f[i][j]_ \u8868\u793a\u53f3\u4e0b\u89d2\u5750\u6807\u4e3a _(i,j)_ \u7684\u6b63\u65b9\u5f62\u7684\u6700\u5927\u8fb9\u957f\u3002\u4e0d\u96be\u53d1\u73b0 _f[i][j]_ \u4e0e\u5b83\u5468\u56f4\u7684 _f[i-1][j-1],f[i-1][j],f[i][j-1]_ \u6709\u5173\u7cfb\u3002\u4e8e\u662f\u5f97\u51fa\n\n#### f[i][j]=max{f[i-1][j-1],f[i-1][j],f[i][j-1]}+1\n\n### \u6c42\u6700\u5927\u77e9\u5f62\uff1a\uff08\u501f\u9274\u4e86P4147\u9898\u89e3\u4e2dXG_Zepto\u7684\u601d\u8def\uff09\n\n\u5efa\u7acb _l[i][j],r[i][j]_ \u50a8\u5b58\u5750\u6807 _(i,j)_ \u5de6\u53f3\u6700\u8fd1\u7684\u969c\u788d\u4f4d\u7f6e\n\n\u5efa\u7acb _L[i][j],R[i][j]_ \u50a8\u5b58\u5750\u6807 _(i,j)_ \u5728\u77e9\u5f62\u5185\u5de6\u53f3\u6700\u8fdc\u53ef\u4ee5\u53d6\u5230\u7684\u4f4d\u7f6e\n\n\u5efa\u7acb _H[i][j]_ \u50a8\u5b58\u5750\u6807 _(i,j)_ \u6240\u5728\u77e9\u5f62\u7684\u9ad8\u5ea6\n\n\u5750\u6807 _(i,j)_ \u6240\u5728\u77e9\u5f62\u9762\u79ef\u4e3a _h[i][j]*(R[i][j]-L[i][j]-1)\n_ \n\n### \u9644\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n,m,tmp,ans1,ans2;\nint f[1001][1001],a[1001][1001],l[1001][1001],r[1001][1001],L[1001][1001],R[1001][1001],h[1001][1001];\nchar ch;\n\nvoid work()\n{\n    for (int i=1;i<=n;i++) \n        for (int j=1;j<=m;j++)\n            f[i][j]=l[i][j]=r[i][j]=L[i][j]=R[i][j]=h[i][j]=0;//\u521d\u59cb\u5316\n    for (int i=1;i<=n;i++)\n        {\n            tmp=0;\n            for (int j=1;j<=m;j++)//\u8ba1\u7b97\u5de6\u8fb9\u6700\u8fd1\u969c\u788d\u4f4d\u7f6e\n                if (a[i][j]) l[i][j]=tmp;\n                \t    else tmp=j,L[i][j]=0;\n            tmp=m+1;\n            for (int j=m;j>=1;j--)//\u8ba1\u7b97\u53f3\u8fb9\u6700\u8fd1\u969c\u788d\u4f4d\u7f6e\n                if (a[i][j]) r[i][j]=tmp;\n                   \t\telse tmp=j,R[i][j]=m+1;\n        }\n    for (int i=1;i<=m;i++) R[0][i]=m+1;//\u7ec6\u8282\u9700\u7559\u610f\n    for (int i=1;i<=n;i++)\n        for (int j=1;j<=m;j++)\n            if (a[i][j])\n                {\n                    f[i][j]=min(f[i-1][j-1],min(f[i-1][j],f[i][j-1]))+1;//\u8ba1\u7b97\u5f53\u524d\u6b63\u65b9\u5f62\u8fb9\u957f\n                    h[i][j]=h[i-1][j]+1;//\u5f53\u524d\u77e9\u5f62\u9ad8\u5ea6+1\n                    L[i][j]=max(L[i-1][j],l[i][j]);//\u8ba1\u7b97\u5f53\u524d\u77e9\u5f62\u6700\u5de6\u9047\u5230\u7684\u969c\u788d\n                    R[i][j]=min(R[i-1][j],r[i][j]);//\u8ba1\u7b97\u5f53\u524d\u77e9\u5f62\u6700\u53f3\u9047\u5230\u7684\u969c\u788d\n                    ans1=max(ans1,f[i][j]*f[i][j]);//\u6c42\u6b63\u65b9\u5f62\u9762\u79ef\u6700\u5927\u503c\n                    ans2=max(ans2,h[i][j]*(R[i][j]-L[i][j]-1));//\u6c42\u77e9\u5f62\u9762\u79ef\u6700\u5927\u503c\n                }\n}\n\nint main()\n{\n    cin>>n>>m;\n    for (int i=1;i<=n;i++)\n        for (int j=1;j<=m;j++)\n            {\n                cin>>a[i][j];\n                if ((i+j)%2!=1) a[i][j]=1-a[i][j];//\u5728\u76f8\u5e94\u4f4d\u7f6e\u67d3\u4e0a\u76f8\u53cd\u8272\n            }\n    work();\n    for (int i=1;i<=n;i++)//\u91cd\u65b0\u67d3\u8272\n        for (int j=1;j<=m;j++)\n            a[i][j]=1-a[i][j];\n    work();\n    cout<<ans1<<endl<<ans2<<endl;\n    return 0;\n}\n```\n\n",
        "postTime": 1519392475,
        "uid": 12191,
        "name": "\uff43\uff48\uff49\uff4c\uff4c",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "[${\\color{orange}\\text{\u6b22\u8fce\u62dc\u8bbf\u6211\u8fd9\u4e2a\u849f\u84bb\u7684\u535a\u5ba2}}$](https://www.luogu.org/blog/Wendigo/)\n\n[P1169 \u3010\\[ZJOI2007\\]\u68cb\u76d8\u5236\u4f5c\u3011](https://www.luogu.org/problem/P1169)\n\n### \u6b64\u9898\u7b97\u6cd5:\u7eaf\u7cb9\u306edp\n\n\u5927\u81f4\u601d\u8def(\u2605\u4e2a\u4eba\u72ec\u521b\uff0c\u65b9\u6cd5\u5f88\u96be\uff0c\u4e0d\u61c2\u52ff\u55b7):\n\n>1.$dp[i][j]$\u662f$(point)$\u7c7b\u578b\u7684\u6570\u7ec4(\u5982\u4e0b)\uff0c$dp[i][j]$\u8868\u793a\u4ee5$(i,j)$\u4e3a\u53f3\u4e0b\u89d2\u7684\u6700\u5927\u68cb\u76d8\u7684\u957f\u5ea6\u548c\u5bbd\u5ea6($x$\u548c$y$)\u3002\n\n```cpp\nstruct point{\n\tint x,y;\n\tint siz(){//\u5927\u5c0f\n\t\treturn x*y;\n\t} bool squre(){//\u662f\u5426\u4e3a\u6b63\u65b9\u5f62\n\t\treturn (x==y);\n\t}\n}dp[N][N];\n```\n>2.$ $\u8fb9\u754c\u521d\u59cb\u5316\u3002\u5176\u4e2d$getmax()$\u51fd\u6570\u53ef\u968f\u65f6\u66f4\u65b0\u7b54\u6848(\u6700\u5927\u957f\u65b9\u5f62\u3001\u6b63\u65b9\u5f62\u68cb\u76d8\u7684\u5927\u5c0f)\u3002\n\n```cpp\ndp[1][1]=(point){1,1};\n\tgetmax(1,1);\n\tfor(int i=2;i<=n;i++){\n\t\tif(g[i][1]==g[i-1][1])\n\t\t\tdp[i][1]=(point){1,1};\n\t\telse dp[i][1]=(point){\n\t\t\tdp[i-1][1].x+1,1\n\t\t}; getmax(i,1);\n\t} for(int i=2;i<=m;i++){\n\t\tif(g[1][i]==g[1][i-1])\n\t\t\tdp[1][i]=(point){1,1};\n\t\telse dp[1][i]=(point){\n\t\t\t1,dp[1][i-1].y+1\n\t\t}; getmax(1,i);\n\t}\n```\n\n![](https://s2.ax1x.com/2019/10/14/KSSUBV.jpg)\n\n\n>3.$ $\u82e5$(i,j)$\u989c\u8272\u4e0e\u4e0a\u9762\u5de6\u8fb9\u90fd\u4e0d\u540c\uff0c\u5206\u4ee5\u4e0b\u56db\u7c7b\u60c5\u51b5\u8ba8\u8bba:\n\n![](https://s2.ax1x.com/2019/10/14/KSP9vd.jpg)\n\n>\u2460\u3001\u2461\u3001\u2462:\n\n```cpp\ndp[i][j]=(point){dp[i-1][j].x+1,dp[i][j-1].y+1};\n```\n\n\n>\u2463:\n\n```cpp\npoint tmp1,tmp2;\ntmp1=(point)\n{dp[i-1][j].x+1,dp[i-1][j].y};\ntmp2=(point)\n{dp[i][j-1].x,dp[i][j-1].y+1};\nif(tmp1.siz()>tmp2.siz())\n\tdp[i][j]=tmp1;\nelse dp[i][j]=tmp2;\n\n```\n>\u8bf4\u7b80\u5355\u70b9\uff0c\u5c31\u662f\u4e0e\u4e4b\u524d\u7684\u68cb\u76d8\u878d\u4e3a\u4e00\u4f53\u5e76\u6700\u5927\n\n\n\n\n>4.$ $\u82e5$(i,j)$\u7684\u989c\u8272\u4e0e\u4e0a\u9762\u548c\u5de6\u8fb9\u90fd\u76f8\u540c\uff0c$dp[i][j]=(1,1)$\u3002\u82e5\u989c\u8272\u4e0e\u4e0a\u9762\u76f8\u540c\uff0c$dp[i][j]=(1,$\u5de6\u8fb9\u68cb\u76d8\u5bbd\u5ea6\u5ea6$+1)$\uff0c\u989c\u8272\u4e0e\u5de6\u8fb9\u76f8\u540c\u540c\u7406\u3002\n\n## \u4ee5\u4e0b\u662f\u4ee3\u7801+\u6ce8\u91ca\n\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=2010;\nstruct point{\n\tint x,y;\n\tint siz(){//\u5927\u5c0f\n\t\treturn x*y;\n\t} bool squre(){//\u662f\u5426\u4e3a\u6b63\u65b9\u5f62\n\t\treturn (x==y);\n\t}\n}dp[N][N];\nint n,m,ans1,ans2; //ans1\u4e3a\u6700\u5927\u6b63\u65b9\u5f62\u9762\u79ef\uff0cans2\u4e3a\u6700\u5927\u957f\u65b9\u5f62\u9762\u79ef\nbool g[N][N];\nvoid getmax(int i,int j){ //\u968f\u65f6\u66f4\u65b0\u7b54\u6848\n\tans2=max(ans2,dp[i][j].siz());\n\tif(dp[i][j].squre())\n\t\tans1=max(ans1,dp[i][j].siz());\n} int main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tscanf(\"%d\",&g[i][j]); //g[][]\u6570\u7ec4\u5b58\u989c\u8272\n\tdp[1][1]=(point){1,1}; //\u5de6\u4e0a\u89d2\u521d\u59cb\u5316\n\tgetmax(1,1);\n\tfor(int i=2;i<=n;i++){\n\t\tif(g[i][1]==g[i-1][1])\n\t\t\tdp[i][1]=(point){1,1};\n\t\telse dp[i][1]=(point){\n\t\t\tdp[i-1][1].x+1,1\n\t\t}; getmax(i,1); //\u5de6\u8fb9\u521d\u59cb\u5316\n\t} for(int i=2;i<=m;i++){\n\t\tif(g[1][i]==g[1][i-1])\n\t\t\tdp[1][i]=(point){1,1};\n\t\telse dp[1][i]=(point){\n\t\t\t1,dp[1][i-1].y+1\n\t\t}; getmax(1,i); //\u4e0a\u9762\u521d\u59cb\u5316\n\t} for(int i=2;i<=n;i++){\n\t\tfor(int j=2;j<=m;j++){\n\t\t\tif(g[i][j]==g[i-1][j]){\n\t\t\t\tif(g[i][j]==g[i][j-1])\n\t\t\t\t\tdp[i][j]=(point){1,1}; //\u5982\u679c\u4e0e\u4e0a\u9762\u5de6\u8fb9\u989c\u8272\u76f8\u540c\n\t\t\t\telse dp[i][j]=(point) //\u5982\u679c\u53ea\u4e0e\u4e0a\u9762\u989c\u8272\u76f8\u540c\n\t\t\t\t\t{1,dp[i][j-1].y+1};\n\t\t\t} else {\n\t\t\t\tif(g[i][j]==g[i][j-1])\n\t\t\t\t\tdp[i][j]=(point)\n\t\t\t\t\t{dp[i-1][j].x+1,1}; //\u5982\u679c\u53ea\u4e0e\u5de6\u8fb9\u989c\u8272\u76f8\u540c\n\t\t\t\telse if(dp[i][j-1].x<dp[i-1][j].x+1  //\u5982\u679c\u4e0e\u4e0a\u9762\u5de6\u8fb9\u989c\u8272\u90fd\u4e0d\u540c\n\t\t\t\t&&dp[i-1][j].y<dp[i][j-1].y+1){\n\t\t\t\t\tpoint tmp1,tmp2;  //\u5982\u679c\u662f\u2463\u60c5\u51b5\n\t\t\t\t\ttmp1=(point)\n\t\t\t\t\t{dp[i-1][j].x+1,dp[i-1][j].y};\n\t\t\t\t\ttmp2=(point)\n\t\t\t\t\t{dp[i][j-1].x,dp[i][j-1].y+1};\n\t\t\t\t\tif(tmp1.siz()>tmp2.siz())\n\t\t\t\t\t\tdp[i][j]=tmp1;\n\t\t\t\t\telse dp[i][j]=tmp2;\n\t\t\t\t} else { //\u5982\u679c\u662f\u2460\u2461\u2462\u60c5\u51b5\n\t\t\t\t\tdp[i][j]=(point){dp[i-1]\n\t\t\t\t\t[j].x+1,dp[i][j-1].y+1};\n\t\t\t\t}\n\t\t\t} getmax(i,j); //\u968f\u65f6\u66f4\u65b0\u7b54\u6848\n\t\t}\n\t} printf(\"%d\\n%d\\n\",ans1,ans2); //AC\u4e86\uff0c\u6ca1\u5fc5\u8981\u6000\u7591\u7b97\u6cd5\u6b63\u786e\u6027\n\treturn 0;\n}\n\n```\n\n\u8c03\u4e86\u534a\u4e2a\u4e0a\u5348\uff0c\u8fd9\u4e48\u96be\u7684\u601d\u8def\u4e0d\u662f\u4e00\u4e0b\u5b50\u60f3\u51fa\u6765\u7684\uff0c\u8981\u5faa\u5e8f\u6e10\u8fdb\u3002\n\n\u5927\u5206\u7c7b\u4e2d\u5c0f\u5206\u7c7b\u7684\u9012\u5f52\u601d\u60f3\u5e2e\u52a9\u4f60\u6162\u6162\u505a\u51fa\u66f4Van\u2642\u7684\u9898\n\n\u8c22\u8c22\u5927\u5bb6! !\n",
        "postTime": 1571034063,
        "uid": 118365,
        "name": "George1123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u9996\u5148\u628a\u77e9\u9635\u8f6c\u5316\u4e00\u4e0b\uff0c\u628a\u6a2a\u7eb5\u5750\u6807\u548c\u4e3a\u5076\u6570\u70b9\u7684\u503c\u53d6\u53cd\uff0c\u8fd9\u6837\u5c31\u8f6c\u5316\u6210\u6c42\u6700\u5927\u7684'0'\u6216'1'\u77e9\u9635\u3002\n\n\n\u6211\u4eec\u53ea\u8ba8\u8bba\u5bf9\u4e8e0\u7684\u6c42\u6cd5\uff0c\u5bf91\u7c7b\u4f3c\u3002\n\n\n\u9996\u5148\u662f\u6700\u5927\u6b63\u65b9\u5f62\u95ee\u9898\uff0c\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u7684DP\u95ee\u9898\uff0cf[i,j]\u8868\u793a\u4ee5i,j\u4e3a\u53f3\u4e0b\u89d2\u7684\u6700\u5927\u6b63\u65b9\u5f62\u7684\u8fb9\u957f\uff0c\u90a3\u4e48a[i,j]=0\u65f6\uff0cf[i,j]=min(f[i-1,j-1],f[i-1,j],f[i,j-1])+1\uff0ca[i,j]=1\u65f6\uff0cf[i,j]=0\uff0cf\u6570\u7ec4\u4e2d\u7684\u6700\u5927\u503c\u5373\u4e3a\u7b2c\u4e00\u95ee\u7684\u7b54\u6848\u3002\n\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u95ee\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u5355\u8c03\u6808\u6765\u89e3\u51b3\u3002\n\n\n\u9996\u5148\u679a\u4e3e\u6700\u5927\u77e9\u5f62\u7684\u4e0b\u8fb9\u754c\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4e0b\u8fb9\u754c\u7ef4\u62a4\u4e24\u4e2a\uff08\u4e5f\u53ef\u4ee5\u8bf4\u662f\u4e24\u6b21\uff09\u5355\u8c03\u6808\uff0c\u4e00\u6b21\u6b63\u5411\uff0c\u4e00\u6b21\u53cd\u5411\uff0c\u7528s[i,j]\u8868\u793a\u4ecea[i,j]\u5f00\u59cb\u5411\u4e0a\u6700\u591a\u80fd\u6269\u5c55\u51fa\u51e0\u4e2a0\uff0c\u5982\u679ca[i,j]=1\uff0c\u90a3\u4e48s[i,j]=0\uff0c\u8fd9\u6837\u7ef4\u62a4\u6808\u4e2d\u5143\u7d20\u7684s\u503c\u9012\u589e\uff0c\u6bcf\u6b21\u5143\u7d20\u51fa\u6808\u65f6\u5c31\u53ef\u4ee5\u786e\u5b9a\u8fd9\u4e2a\u5143\u7d20\u53ef\u4ee5\u5411\u5de6\u6216\u5411\u53f3\u6269\u5c55\u591a\u5c11\u957f\u5ea6\u4e86\uff0c\u5373\u627e\u5230\u4e86\u7b2c\u4e00\u4e2as\u503c\u5c0f\u4e8e\u8be5\u5143\u7d20\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u7528\u6bcf\u4e2a\u5143\u7d20\u7684s\u503c\u4e58\u4ee5\u5411\u5de6\u5411\u53f3\u6269\u5c55\u7684\u957f\u5ea6\u548c\u53bb\u66f4\u65b0\u7b2c\u4e8c\u95ee\u7684\u7b54\u6848\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\n\u7531\u4e8e\u6bcf\u4e2a\u5143\u7d20\u6700\u591a\u8fdb\u6808\u6216\u51fa\u6808\u4e00\u6b21\uff0c\u6bcf\u6b21\u7684\u590d\u6742\u5ea6\u4e3aO(n)\uff0c\u8fd9\u6837\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u662fO(n^2);\n\n\n\u53c2\u8003\u4ee3\u7801\n\n\n```delphi\n\n\nvar s,f:array[0..2001,0..2001]of longint;\n    a:array[0..2001,0..2001]of 0..1;\n    z,l,r,p:array[0..2001]of longint;\n    ans1,ans2,i,j,m,n,k,t:longint;\nfunction max(a,b:longint):longint;\nbegin if a>b then exit(a) else exit(b); end;\nfunction min(a,b:longint):longint;\nbegin if a<b then exit(a) else exit(b); end;\nprocedure dp(o:longint);\nvar i,j:longint;\nbegin\n  for i:=1 to n do if a[1,i]=o then s[1,i]:=1;\n  for i:=2 to m do\n    for j:=1 to n do\n      if a[i,j]=o\n      then s[i,j]:=s[i-1,j]+1 else s[i,j]:=0;\n  for i:=1 to m do\n    for j:=1 to n do\n      begin\n        if a[i,j]=o\n        then f[i,j]:=min(f[i-1,j-1],min(f[i-1,j],f[i,j-1]))+1\n        else f[i,j]:=0;\n        ans1:=max(ans1,f[i,j]);\n      end;\n  for i:=1 to m do\n    begin\n      fillchar(l,sizeof(l),0);\n      fillchar(r,sizeof(r),0);\n      t:=0;\n      for j:=1 to n do\n        begin\n          while (t>0)and(s[i,j]<s[i,z[t]]) do\n            begin\n              r[z[t]]:=j-z[t];\n              dec(t);\n            end;\n          if a[i,j]=o\n          then\n            begin\n              inc(t);\n              z[t]:=j;\n            end;\n        end;\n      for j:=t downto 1 do r[z[j]]:=n-z[j]+1;\n      t:=0;\n      for j:=n downto 1 do\n        begin\n          while (t>0)and(s[i,j]<s[i,z[t]]) do\n            begin\n              l[z[t]]:=z[t]-j;\n              dec(t);\n            end;\n          if a[i,j]=o\n          then\n            begin\n              inc(t);\n              z[t]:=j;\n            end;\n        end;\n      for j:=t downto 1 do l[z[j]]:=z[j];\n      for j:=1 to n do\n        if a[i,j]=o\n        then\n          begin\n            p[j]:=l[j]+r[j]-1;\n            ans2:=max(ans2,p[j]*s[i,j]);\n          end;\n    end;\nend;\nbegin\n  readln(m,n);\n  for i:=1 to m do\n    for j:=1 to n do\n      begin\n        read(a[i,j]); if (i+j) mod 2=0 then a[i,j]:=1-a[i,j];\n      end;\n  dp(0); dp(1);\n  writeln(ans1*ans1); writeln(ans2);\nend.\n\n\n\n```",
        "postTime": 1378199303,
        "uid": 277,
        "name": "plane",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u4e00\u53ea\u8111\u6d1e\u975e\u5e38\u5927\u7684\u849f\u84bb\u7684\u9898\u89e3\n\n\u7528\u7b2c\u4e00\u95ee\u7684\u7b54\u6848\u89e3\u7b2c\u4e8c\u95ee\u7684\u7b54\u6848\uff01\n\n\u5bf9\u4e8e\u7b2c\u4e00\u95ee\uff0c\u6211\u4eec\u8fdb\u884c\u52a8\u6001\u89c4\u5212\n\n\u9996\u5148\u9884\u5904\u7406$R,C$\u6570\u7ec4,$R[i][j]$\u8868\u793a\u4ece\u4f4d\u7f6e$(i,j)$\u5411\u5de6\u6700\u591a\u80fd\u6269\u5c55\u591a\u5c11\u683c\uff0c$C[i][j]$\u8868\u793a\u4ece$(i,j)$\u5411\u4e0a\u6700\u591a\u80fd\u6269\u5c55\u591a\u5c11\u683c\u3002\n\n\u4e00\u904d$O(MN)$\u9012\u63a8\u5373\u53ef\n\n\u5b9a\u4e49\u72b6\u6001$f[i][j]$,\u8868\u793a\u5df2$(i,j)$\u4e3a\u53f3\u4e0b\u89d2\u7684\u6700\u5927\u6b63\u65b9\u5f62\u8fb9\u957f\n\n$f[i][j]=\\begin{cases}min\\{f[i-1][j-1]+1,R[i][j],C[i][j]\\}&A_{i-1,j-1}=A_{i,j}\\\\1&A_{i-1,j-1}\\ne A_{i,j}\\end{cases}$\n\n\u4e00\u904d$O(MN)$\u52a8\u6001\u89c4\u5212\u5373\u53ef\uff0c$Ans=max^2\\{f[i][j]\\}$\n\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u95ee\uff0c\u6211\u4eec\u53ef\u4ee5\u501f\u52a9\u5df2\u7ecf\u6c42\u5f97\u7684$f[][]$\u6570\u7ec4\uff0c\u6c42\u4e00\u6bb5\u8fde\u7eed\u7684$f[p\\sim q][j]$\u7684\u8fde\u7eed\u957f\u5ea6\n\u4e58\u4ee5\u8fd9\u4e00\u6bb5\u4e2d$f$\u6570\u7ec4\u7684\u6700\u5c0f\u503c$/$\u7684\u6700\u5927\u503c\uff08\u624b\u52a8\u65ad\u53e5\n\n\u4ee4$T=min\\{f[p\\sim q][j]\\}$\n\n\u5c31\u662f$Ans=max\\{(q-p+T)*T\\}$\n\n\u540c\u7406\u6a2a\u7740\u7684\u4e00\u6bb5\u4e5f\u662f\u7b54\u6848\n\n\u4ee4$T=min\\{f[i][p\\sim q]\\}$\n\n\u5c31\u662f$Ans=max\\{(q-p+T)*T\\}$\n\n\u5982\u4f55\u6c42\u8fd9\u6700\u5927\u503c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7528\u5355\u8c03\u6808\u7edf\u8ba1\u6bcf\u4e00\u884c$/$\u6bcf\u4e00\u5217\n\n\u6700\u540e\u8f93\u51fa\u4e24\u4e2a\u7b54\u6848\n\n\n$Code:$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,a[2005][2005],f[2005][2005];\nint r[2005][2005],c[2005][2005];\nint main()\n{\n\tmemset(a,-1,sizeof(a));\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t  for(int j=1;j<=m;j++){\n\t    scanf(\"%d\",&a[i][j]);\n\t    if(a[i][j]^a[i][j-1])r[i][j]=r[i][j-1]+1;\n\t    else r[i][j]=1;\n\t    if(a[i][j]^a[i-1][j])c[i][j]=c[i-1][j]+1;\n\t    else c[i][j]=1;\n      }\n    int ans=0;\n\tfor(int i=1;i<=n;i++)\n\t  for(int j=1;j<=m;j++)\n\t    {\n\t    \tif(a[i][j]^a[i-1][j-1])f[i][j]=1;\n\t    \telse f[i][j]=min(f[i-1][j-1]+1,min(r[i][j],c[i][j]));\n\t    \tans=max(ans,f[i][j]);\n\t\t}\n\tprintf(\"%d\\n\",ans*ans);\n\tans=0;\n\tstack<pair<int,int> >s;\n\tfor(int i=1;i<=n;i++){\n\t\twhile(!s.empty())s.pop();\n\t\tfor(int j=1;j<=m+1;j++){\n\t\t\tint w=0;\n\t\t\twhile(!s.empty()&&s.top().first>=f[i][j]){\n\t\t\t  int p=s.top().first,q=s.top().second;s.pop();\n\t\t\t  w+=q;ans=max(ans,p*(w+p-1));\n\t\t\t}\n\t\t\ts.push(make_pair(f[i][j],w+1));\n\t\t}\n\t}\n\tfor(int j=1;j<=m;j++){\n\t\twhile(!s.empty())s.pop();\n\t\tfor(int i=1;i<=n+1;i++){\n\t\t\tint w=0;\n\t\t\twhile(!s.empty()&&s.top().first>=f[i][j]){\n\t\t\t  int p=s.top().first,q=s.top().second;s.pop();\n\t\t\t  w+=q;ans=max(ans,p*(w+p-1));\n\t\t\t}\n\t\t\ts.push(make_pair(f[i][j],w+1));\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1564392234,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u89e3\u9898\u601d\u8def\uff1a\n\n\u3000\u3000\u8fd9\u9053\u9898\u76ee\u4e3b\u8981\u662f\u8fd0\u7528\u4e86\u4e00\u4e2a\u53eb\u505a\u60ac\u7ebf\u6cd5\u7684\u65b9\u6cd5\u6765\u6c42\u6781\u5927\u77e9\u9635\u7684\u3002\n\n\u3000\u3000\u6240\u8c13\u60ac\u7ebf\u6cd5\uff1a\u5c31\u662f\u7ef4\u62a4\u4e09\u4e2a\u6570\u7ec4\uff1aup[][], left_[][], right_[][]. \u5206\u522b\u8868\u793a\u70b9\uff08i\uff0cj\uff09 \u5411\u4e0a\u65b9\uff0c\u5de6\u65b9\uff0c\u53f3\u65b9\u8d70\u80fd\u8d70\u7684\u6700\u8fdc\u8ddd\u79bb\u3002\n\n\u3000\u3000\u7ef4\u62a4\u65b9\u6cd5\u8fd0\u7528\u4e86\u4e00\u4e9bDP\u601d\u7ef4\uff1a\n```\n\n    up[i][j] = up[i - 1][j] + 1;\n    left_[i][j] = min(left_[i - 1][j], j - lz);    //lz\u8868\u793a\u5de6\u8fb9\u6700\u8fd1\u7684\u969c\u788d\n    right_[i][j] = min(right_[i - 1][j], rz - j);  //rz\u8868\u793a\u53f3\u8fb9\u6700\u8fd1\u7684\u969c\u788d\n```\n\n\u3000\u3000\u8fd8\u8981\u6ce8\u610f\u521d\u59cb\u5316\u8981\u8ba9\u7b2c0\u884c\u7684\u5143\u7d20\u4e3a\u6b63\u65e0\u7a77\uff0c\u9632\u6b62\u5176\u5bf9\u7b54\u6848\u9020\u6210\u5e72\u6270\u3002\n\n\u3000\u3000\u5f53\u9047\u5230\u969c\u788d\u70b9\u65f6\uff0c\u5e94\u5148\u66f4\u65b0\u6700\u8fd1\u969c\u788d\u4f4d\u7f6e\uff0c\u7136\u540e\u5c06\u8be5\u70b9\u7684left_, right_\u503c\u8d4b\u6210\u6b63\u65e0\u7a77\u3002\u539f\u56e0\u540c\u4e0a\u3002\n\n\u3000\u3000\u4e3a\u4e86\u65b9\u4fbf\u7ef4\u62a4lz, rz \u7684\u503c\uff0c\u6211\u8dd1\u4e86\u4e24\u8fb9\u53cc\u91cd\u5faa\u73af\u3002\u3002\u3002 \uff08\u590d\u6742\u5ea6\u4f9d\u7136O(nm) )\n\n\u3000\u3000\u7136\u540e\u53ef\u4ee5\u5206\u522b\u5c060\uff0c1\u5f53\u4f5c\u969c\u788d\u5404\u6c42\u4e00\u4e2a\u89e3\uff0c\u8f93\u51fa\u6700\u5927\u503c\u3002\n\nAC\u4ee3\u7801\uff1a\n```\n\n#include <iostream>\n#include <cstdio> \n#include <cstring>\n#include <cmath>\n\nusing namespace std;\n\nconst int MAXN = 2010;\n\nshort ma[MAXN][MAXN];\n\nint n,m,lz,rz,ans,bns;\nint up[MAXN][MAXN];\nint left_[MAXN][MAXN];\nint right_[MAXN][MAXN];\n\nint read() //\u8bfb\u5165\u4f18\u5316\n{\n    int x = 0;\n    char c = getchar();\n    \n    while(c>'9' || c<'0')  c = getchar();\n    while(c>='0' && c<='9')\n        x = x*10 + c - '0',\n        c = getchar();\n        \n    return x;\n}\n\nvoid color_(int c)\n{\n    memset(up, 0, sizeof(up));    //\u4e0d\u5fd8\u521d\u59cb\u5316\n    memset(left_, 0, sizeof(left_));\n    memset(right_, 0, sizeof(right_));\n    \n    for (int i = 1; i <= m; ++i) //\u9632\u6b62\u9ed8\u8ba4\u503c0\u5e72\u6270\u7b54\u6848\n        left_[0][i] = 999999999,\n        right_[0][i] = 999999999;\n    \n    for (int i = 1; i <= n; ++i) //\u7ef4\u62a4left,up\u6570\u7ec4\n    {\n        lz = 0;\n        for (int j = 1; j <= m; ++j)\n            if (ma[i][j] != c) \n            {\n                lz = j;\n                left_[i][j] = 99999999;\n                continue;\n            }\n            else\n            {\n                up[i][j] = up[i - 1][j] + 1;\n                left_[i][j] = min(left_[i - 1][j], j - lz);\n            }\n                \n    }\n        \n    for (int i = 1; i <= n; ++i) //\u7ef4\u62a4right\u6570\u7ec4\n    {\n        rz = m + 1;\n        for (int j = m; j >= 1; --j)\n            if (ma[i][j] != c) \n            {\n                rz = j;    \n                right_[i][j] = 99999999;\n                continue;\n            }\n            else\n                right_[i][j] = min(right_[i - 1][j], rz - j);\n    }\n        \n    for (int i = 1; i <= n; ++i)\n    {\n        for (int j = 1; j <= m; ++j)\n        {\n            ans = max(ans, up[i][j] * (left_[i][j] + right_[i][j] - 1));\n            bns = max(bns, min(up[i][j], (left_[i][j] + right_[i][j] - 1))*min(up[i][j], (left_[i][j] + right_[i][j] - 1)));\n            //\u6b63\u65b9\u5f62\u7684\u8bdd\u7ed9\u6a2a\u5411\uff0c\u7eb5\u5411\u957f\u5ea6\u53d6\u4e2aminimum\u518d\u5e73\u65b9\u5c31\u53ef\u4ee5\u4e86\n        }\n    }\n}\n\nint main()\n{\n    scanf(\"%d %d\", &n, &m);\n    for (int i = 1; i <= n; ++i)\n        for (int j = 1; j <= m; ++j)\n        {\n            scanf(\"%d\", &ma[i][j]);\n            if ((i + j) & 1) ma[i][j] = abs(ma[i][j] - 1);\n        }\n    ans = -1;\n    bns = -1;\n    color_(1); //\u8dd1\u4e24\u8fb9\uff0c\u5206\u522b\u628a1\uff0c0\u5f53\u4f5c\u969c\u788d\n    color_(0);\n    cout << bns << endl << ans;\n}\n```",
        "postTime": 1532090596,
        "uid": 26512,
        "name": "Christopher_Yan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\n\u5982\u56fe\u6240\u793a\uff0c\u6211\u4eec\u628a\u68cb\u76d8\u7684\u80fd\u4f7f\u7528\u548c\u4e0d\u80fd\u4f7f\u7528\u62bd\u8c61\u6210\u4e86\u221a\u548c\u00d7\u7684\u5f62\u5f0f\uff0c\u5bf9\u4e8e\u9898\u76ee\u4e2d\u76840/1\u68cb\u76d8\uff0c\u5177\u4f53\u7684\u5224\u65ad\u7a0d\u4f5c\u4fee\u6539\u5373\u53ef\u3002\n\n![](https://cdn.luogu.com.cn/upload/pic/32075.png)\n\n#### \u60ac\u7ebf\u6cd5\u7684\u64cd\u4f5c\u5c31\u662f\u5bf9\u6bcf\u4e00\u4e2a\u70b9\uff0c\u9884\u5904\u7406\u5b83\u5728\u5de6\u53f3\u65b9\u5411\u4e0a\u5ef6\u4f38\u7684\u6700\u5927\u957f\u5ea6\uff0c\u628a\u521d\u59cb\u9ad8\u5ea6\u8bbe\u4e3a1\uff08\u672c\u884c\u7684\u957f\u6761\u77e9\u5f62\u4e5f\u8981\u8ba1\u7b97\uff09\uff0c\u63a5\u4e0b\u6765\u7ebf\u52a8\u6210\u9762\uff0c\u6269\u5927\u9ad8\u5ea6\uff0c\u9047\u89c1\u969c\u788d\u5c31\u7f29\u5c0f\u533a\u95f4\u8303\u56f4\u3002\u5373\u4e3a\u5e38\u89c1\u7684\u516c\u5f0f\uff1a\n   \n```cpp\nif(mp[now(i)][j]!=mp[las(i)][j]&&i>1){//\u30100/1\u3011\u53ef\u4ee5\u4f7f\u7528\n                up[now(i)][j]=up[las(i)][j]+1;//\u56e0\u4e3a\u53ef\u4ee5\u7ee7\u627f\u4e0b\u6765\uff0c\u6240\u4ee5\u9ad8\u5ea6+1\n                l[now(i)][j]=max(l[now(i)][j],l[las(i)][j]);//\u533a\u95f4\u6536\u675f\n                r[now(i)][j]=min(r[now(i)][j],r[las(i)][j]);//\u540c\u7406 \n            }\n\n```\n\u90a3\u4e48\u600e\u4e48\u5f97\u5230\u6211\u4eec\u60f3\u8981\u7684\u77e9\u5f62\u548c\u6b63\u65b9\u5f62\u5927\u5c0f\u7684\u7b54\u6848\u5462\uff1f\u77e9\u5f62\u7684\u8ba1\u7b97\u5f88\u597d\u529e\uff0c\u90a3\u4e48\u6b63\u65b9\u5f62\u7684\u5927\u5c0f\u4e0d\u5c31\u662f\u6536\u675f\u7684\u77e9\u5f62\u5927\u5c0f\u561b\uff1f\n```cpp\n            int len=r[now(i)][j]-l[now(i)][j]+1;//x\u8f74\u4e0a\u957f\u5ea6\n            int hei=min(len,up[now(i)][j]);//\u56e0\u4e3a\u662f\u6b63\u65b9\u5f62\u6240\u4ee5\u5fc5\u987b\u4fdd\u8bc1\u957f\u5bbd\u76f8\u7b49 \n            ans_1=max(ans_1,hei*hei);\n            ans_2=max(ans_2,len*up[now(i)][j]);\n```\n#### \u53ea\u8981\u4e0a\u4e0b\u77e9\u5f62\u957f\u5ea6\u5927\u5c0f\u4e0d\u4e00\u6837\uff0c\u5c31\u4e0d\u4f1a\u51fa\u73b0\u5bf9\u4e00\u4e2a\u6709\u6548\u77e9\u5f62\u7684\u8ba1\u7b97\u8986\u76d6\u53e6\u4e00\u4e2a\u6709\u6548\u77e9\u5f62\u7684\u60c5\u51b5\uff08\u6bd4\u5982\u56fe\u4e2d\u5de6\u8fb92x3\u7684\u77e9\u5f62\u5e76\u6ca1\u6709\u8986\u76d6\u5bf9\u7b2c\u4e09\u884c\u6700\u5de63x1\u77e9\u5f62\u7684\u8ba1\u7b97\uff0c\u6240\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u5f97\u5230\u7684\u5c31\u662f\u7b54\u6848\u5566qwq\uff09\nCode:\n```cpp\n#include<cstdio>\n#include<iostream>\n#define now(x) x%2\n#define las(x) x%2==0?1:0\nusing namespace std;\nint n,m,ans_1,ans_2,up[2][2010],mp[2][2010],l[2][2010],r[2][2010];\ninline int max(int x,int y){return x>y?x:y;}\ninline int min(int x,int y){return x<y?x:y;}\n\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++){\n        for(int j=1;j<=m;j++){\n            scanf(\"%d\",&mp[now(i)][j]);\n            l[now(i)][j]=r[now(i)][j]=j;//\u5148\u90fd\u5904\u7406\u6210\u53f3\u8fb9 \n            up[now(i)][j]=1;//\u9ad8\u5ea6\u4e3a1 \n        }\n        for(int j=2;j<=m;j++)if(mp[now(i)][j]!=mp[now(i)][j-1])l[now(i)][j]=l[now(i)][j-1];//\u5de6\u8fb9\u7684\u5904\u7406\u6210\u5de6\u8fb9 \n        for(int j=m-1;j>=1;j--)if(mp[now(i)][j]!=mp[now(i)][j+1])r[now(i)][j]=r[now(i)][j+1]; //\u53f3\u8fb9\u7684\u5904\u7406\u6210\u53f3\u8fb9 \n        for(int j=1;j<=m;j++){\n            if(mp[now(i)][j]!=mp[las(i)][j]&&i>1){\n                up[now(i)][j]=up[las(i)][j]+1;//\u56e0\u4e3a\u53ef\u4ee5\u7ee7\u627f\u4e0b\u6765\uff0c\u6240\u4ee5\u9ad8\u5ea6+1\n                l[now(i)][j]=max(l[now(i)][j],l[las(i)][j]);//\u533a\u95f4\u6536\u675f\n                r[now(i)][j]=min(r[now(i)][j],r[las(i)][j]);//\u540c\u7406 \n            }\n            int len=r[now(i)][j]-l[now(i)][j]+1;//x\u8f74\u4e0a\u957f\u5ea6\n            int hei=min(len,up[now(i)][j]);//\u56e0\u4e3a\u662f\u6b63\u65b9\u5f62\u6240\u4ee5\u5fc5\u987b\u4fdd\u8bc1\u957f\u5bbd\u76f8\u7b49 \n            ans_1=max(ans_1,hei*hei);\n            ans_2=max(ans_2,len*up[now(i)][j]);\n        }\n    }\n    printf(\"%d\\n%d\",ans_1,ans_2);\n    return 0; \n}\n```",
        "postTime": 1536213046,
        "uid": 58698,
        "name": "Nativ",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "# \u5355\u8c03\u6808\u9898\u89e3\n\n\u672c\u9898\u89e3\u4e3b\u8981\u8bb2\u8ff0**\u5728\u8fd9\u9053\u9898\u4e2d\u8f83\u5c11\u51fa\u73b0\u7684**,\u5e76\u4e14\u662f**\u6613\u4e8e\u7406\u89e3\u7684**\u5355\u8c03\u6808\u539f\u7406,\u4ee5\u53ca\u8be5\u677f\u5b50\u5728\u8be5\u9898\u4e2d\u7684\u9002\u914d\u60c5\u51b5,~~\u4ee5\u53ca\u538b\u884c\u6280\u5de7~~.\n\n**1. \u6709\u5173\u5355\u8c03\u6808\u6c42\u6700\u5927\u5b50\u77e9\u9635**\n\n\u6ce8:\n\na[ ]\u8868\u793a\u8f93\u5165\u7684\u77e9\u9635,\u7528\u4e86\u6eda\u52a8\u6570\u7ec4\n\nh[ ]\u8868\u793a\u8be5\u70b9\u80fd\u5411\u4e0a\u5ef6\u4f38\u591a\u5c11\n\nt[ ]\u662fh[ ]\u7684\u5907\u4efd\u6570\u7ec4,\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u5728\u5904\u7406\u65f6\u6539\u53d8\u6570\u7ec4\n\n\u4f18\u70b9:\u7a7a\u95f4\u8981\u6c42\u5c0f,\u5728\u5f88\u591a\u65f6\u5019\u4f60\u751a\u81f3\u4e0d\u7528\u5b58\u4e0b\u8fd9\u4e2a\u77e9\u9635,\u56e0\u4e3a\u6211\u4eec\u662f\u4e00\u884c\u4e00\u884c\u5904\u7406\u7684.\n\n\u5355\u8c03\u6808\u6c42\u6700\u5927\u5b50\u77e9\u9635\u4e3b\u8981\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5:\u9884\u5904\u7406,\u6c42\u89e3. ~~\u600e\u4e48\u611f\u89c9\u8ddf\u6ca1\u8bf4\u4e00\u6837~~\n\nI.\u9884\u5904\u7406:\n\n\u8fd9\u4e2a\u9636\u6bb5\u8fd8\u662f\u8f83\u597d\u7406\u89e3\u7684.\u5bf9\u4e8e\u8bfb\u5165\u7684\u4e00\u884c\u6570\u636e,\u6211\u4eec\u5bf9\u6bcf\u4e2a\u6570\u636e\u8fdb\u884c\u5206\u6790,\u5982\u679c\u5b83\u7b26\u5408\u8981\u6c42,\u90a3\u4e48**\u8be5\u70b9\u80fd\u5411\u4e0a\u5ef6\u4f38\u7684\u70b9\u6570\u5c31\u662f(\u4e0a\u4e00\u884c\u7684\u8fd9\u4e2a\u6570\u636e+1)**,\u82e5\u4e0d\u7b26\u5408\u5219\u4e3a0.\n\n\u9884\u5904\u7406\u5b8c\u6210\u7684\u4e00\u884c\u5927\u6982\u957f\u8fd9\u4e2a\u6837\u5b50:\n| 1 | 3 | 0 | 2 | 4 | 2 | 3 | 1 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n\n\u5b83\u8868\u793a\u4e86\u8fd9\u4e2a\u610f\u601d:\n\n![(\u7ea2\u8272\u7684\u4e3a\u53ef\u9009\u533a\u57df)](https://cdn.luogu.com.cn/upload/image_hosting/hpn9rbhg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u4ee3\u7801\u5b9e\u73b0\u5927\u6982\u662f\u8fd9\u6837:\n\n```cpp\nfor(j=0; j<m; j++){\n\tcin>>a[j];\n\tif(a[j]\u6ee1\u8db3\u6761\u4ef6)t[j]=h[j]=h[j]+1;\n\telse t[j]=h[j]=0;\n}\n```\n\n\n\u73b0\u5728\u770b\u7740\u8fd9\u4e00\u884c\u7684\u6570\u636e\u57fa\u672c\u80fd\u8f7b\u6613\u5730\u770b\u51fa\u4ee5\u8be5\u884c\u4e3a\u5e95\u7684\u6700\u5927\u77e9\u5f62\u9762\u79ef\u4e3a8.\u63a5\u4e0b\u6765\u6211\u4eec\u6240\u6709\u7684\u52aa\u529b\u90fd\u662f\u8ba9\u8ba1\u7b97\u673a\u4e5f\u80fd\u770b\u51fa\u8fd9\u4e00\u70b9.\n\nII.\u6c42\u89e3:\n\n\u5148\u4e0a\u6781\u4e11\u7684,\u5df2\u538b\u8fc7\u884c\u7684\u4ee3\u7801:\n\n```cpp\nfor(j=0; j<=m; j++){\n\tint tmp=j;\n\twhile(top && t[sta[top]]>t[j])\n\t\tans=max(ans,(j-(tmp=sta[top]))*t[sta[top]]),top--;\n\tt[sta[++top]=tmp]=t[j];\n}\n```\n(t[ ]\u4e3ah[ ]\u7684\u5907\u4efd\u6570\u7ec4)\n\n\u6211\u4eec\u5728\u98de\u5feb\u5730\u8f6c\u52a8\u6211\u4eec\u7684\u5c0f\u8111\u7b4b\u4e4b\u540e,\u53d1\u73b0\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a**\u53ef\u80fd\u662f\u6700\u5927\u77e9\u9635\u7684\u77e9\u9635**,\u4ed6\u4e00\u5b9a\u6ee1\u8db3\u5176**\u5de6\u53f3\u4e24\u8fb9\u4e00\u5b9a\u65e0\u6cd5\u4ee5\u539f\u6709\u7684\u9ad8\u5ea6\u7ee7\u7eed\u5ef6\u4f38.**\n\n\u56e0\u6b64,\u6211\u4eec\u7684**\u53ef\u80fd\u662f\u6700\u5927\u77e9\u9635\u7684\u77e9\u9635**\u4e00\u5b9a\u6ee1\u8db3\u8fd9\u6837\u7684\u7ed3\u6784:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/76gdlo6o.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5373**\u77e9\u9635\u5916\u5de6\u7aef\u7b2c\u4e00\u4e2a\u5143\u7d20**\u5c0f\u4e8e**\u5de6\u7aef\u5143\u7d20**,**\u77e9\u9635\u5916\u53f3\u7aef\u7b2c\u4e00\u4e2a\u5143\u7d20**\u5c0f\u4e8e**\u53f3\u7aef\u5143\u7d20**.\n\n\n\u4e8e\u662f,\u6211\u4eec\u53ef\u4ee5\u5f00\u8f9f\u4e00\u4e2a\u50a8\u5b58\u5143\u7d20\u4e0b\u6807\u7684,\u5e76\u4e14\u50a8\u5b58\u7684\u4e0b\u6807\u5bf9\u5e94\u7684\u5143\u7d20\u7684\u503c**\u5355\u8c03\u9012\u589e**\u7684\u5355\u8c03\u6808,\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u60f3\u8981\u5165\u6808\u7684\u5143\u7d20,\u5982\u679c\u5b83\u80fd\u5165\u6808,\u90a3\u5c31\u5165\u6808.\u5982\u679c\u4e0d\u80fd\u5165\u6808,\u90a3\u8bf4\u660e\u6211\u4eec\u5df2\u7ecf\u627e\u5230\u4e86\u4e00\u4e2a\"\u77e9\u9635\u5916\u53f3\u7aef\u7b2c\u4e00\u4e2a\u5143\u7d20\"\n\n\u63a5\u4e0b\u6765,\u6211\u4eec\u5c31\u8ba1\u7b97\u4e00\u4e0b\u6211\u4eec\u5df2\u627e\u5230\u7684\u8fd9\u4e2a\u77e9\u9635\u7684\u9762\u79ef\u5927\u5c0f.\u8ba1\u7b97\u65b9\u6cd5\u662f:\n\n$$(j-(sta[top]))*h[sta[top]]$$\n\n\u8fd8\u662f\u62ff\u539f\u6765\u90a3\u4e2a\u4f8b\u5b50\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u5f0f\u5b50\n\n![(\u7ea2\u8272\u7684\u4e3a\u53ef\u9009\u533a\u57df)](https://cdn.luogu.com.cn/upload/image_hosting/hpn9rbhg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5047\u8bbe\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u8dd1\u5b8c\u4e86\u7b2c\u4e94\u5217,\u6b63\u5728\u8dd1\u7b2c\u516d\u5217,\u5f53\u524d\u6808\u5185\u5143\u7d20\u4e3a3,4,5,\u6808\u5185\u5143\u7d20\u5bf9\u5e94\u7684\u503c\u4e3a0,2,4.\u6211\u4eec\u6839\u636e\u8fd9\u4e2a\u5f0f\u5b50,\u8ba1\u7b97\u7684\u662f\u53ea\u6709\u7b2c\u4e94\u5217\u7684\u77e9\u9635\u7684\u9762\u79ef,\u5f97\u5230\u7684\u7b54\u6848\u4e3a4.\n\n\u7136\u540e,\u6211\u4eec\u518d\u5c06\u5143\u7d20'5'\u9000\u6808,\u63a5\u4e0b\u6765\u53d1\u73b0\u6211\u4eec\u5269\u4e0b\u7684\u5143\u7d20'4'\u662f\u4e0d\u7528\u9000\u6808\u7684.\n\n\u4e8e\u662f\u6211\u4eec\u8df3\u51fa\u5faa\u73af,\u5c06\u6700\u540e\u4e00\u6b21\u9000\u6808\u7684\u6570\u636e(5)\u5165\u6808,\u5e76\u628a\u5b83\u5bf9\u5e94\u7684\u503c\u6539\u4e3a\u8fd9\u6b21\u6211\u4eec\u8dd1\u5230\u7684\u503c.\u56e0\u4e3a\u53ea\u6709\u4f7f\u7528\u4e86\u8fd9\u4e2a\u503c,\u4f5c\u4e3a\u5f53\u524d\u7684\u6808\u9876,\u5b83\u624d\u80fd\u5728\u6211\u4eec\u5f53\u524d\u7684\u6808\u4e2d\u7545\u901a\u65e0\u963b.\n\n\u5efa\u8bae\u5c06\u8fd9\u5f20\u56fe\u5269\u4e0b\u7684\u70b9\u5728\u81ea\u5df1\u7684\u8111\u6d77\u4e2d\u8dd1\u4e00\u904d,\u4ee5\u7406\u6e05\u601d\u8def.~~\u624d\u4e0d\u662f\u6211\u61d2~~\n\n\u6b64\u5916,j\u591a\u904d\u5386\u4e00\u4f4d\u662f\u56e0\u4e3a\u6211\u5c06t[m]\u8bbe\u7f6e\u4e3a\u4e86-1,\u4ee5\u4fbf\u5728\u6700\u540e\u4f7f\u6240\u6709\u5143\u7d20\u51fa\u6808.\n\n**2.\u6709\u5173\u538b\u884c**\n\n\u53ea\u5173\u6ce8OI\u7684\u540c\u5fd7\u4eec\u53ef\u4ee5\u7ed5\u8fc7\u8fd9\u4e00\u6bb5,\u6bd5\u7adf\u8fd9\u73a9\u610f\u513f\u771f\u7684\u6ca1\u7528,\u53ea\u80fd\u6ee1\u8db3\u4e00\u4e9b\u7279\u6b8a\u4eba\u7fa4\u7684\u5947\u602a\u9700\u6c42.\n\n\u5148\u4e0a\u4ee3\u7801:\n```cpp\nfor(j=0; j<=m; j++){\n\tint tmp=j;\n\twhile(top && t[sta[top]]>t[j])\n\t\tans=max(ans,(j-(tmp=sta[top]))*t[sta[top]]),top--;\n\tt[sta[++top]=tmp]=t[j];\n}\n```\n\u6211\u4eec\u5148\u5b9a\u4e49\u4e00\u4e2atmp\u53d8\u91cf\u50a8\u5b58\u5f53\u524d\u8dd1\u5230\u7684\u70b9.\u5982\u679c\u5f53\u524d\u70b9\u53ef\u4ee5\u76f4\u63a5\u5165\u6808,\u90a3\u4e48\u5728sta[++top]=tmp\u8fd9\u4e00\u8bed\u53e5\u4e2dtmp\u53ef\u88ab\u5ffd\u7565.\u5982\u679c\u4e0d\u53ef\u4ee5,\u90a3\u4e48tmp\u4e5f\u53ef\u4ee5\u88ab\u5f53\u6210\u6700\u540e\u4e00\u6b21\u9000\u6808\u7684\u5143\u7d20\u6765\u5165\u6808.\n\n**3.\u6709\u5173\u5355\u8c03\u6808\u5728\u6b64\u9898\u7684\u9002\u914d**\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0,\u5728\u6b64\u9898\u4e2d,\u4e00\u4e2a\u70b9\u662f\u5426\u80fd\u53d6\u53d6\u51b3\u4e8e\u8be5\u70b9\u4e0e\u76f8\u90bb\u70b9\u60c5\u51b5,\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8fd9\u4e48\u5199:\n```cpp\nfor(j=0; j<m; j++){\n\tcin>>a[i][j];\n\tif(!i || a[i][j]^a[i-1][j])t1[j]=t[j]=h[j]=h[j]+1;\n\telse t1[j]=t[j]=h[j]=1;\n}\nt[m]=-1;top=0;\nfor(j=0; j<=m; j++){\n\tint tmp=j;flg=0;\n\tif(j && !(a[i][j]^a[i][j-1]))flg=1;\n\twhile(top && ((t[sta[top]]>t[j]) || flg))\n\t\tans=max(ans,(j-(tmp=sta[top]))*t[sta[top]]),top--;\n\tt[sta[++top]=(flg?j:tmp)]=t[j];\n}\n```\n\u7ad6\u5411\u9884\u5904\u7406\u65f6\u4ee5\u662f\u5426\u4e0d\u540c\u4f5c\u4e3a\u5224\u65ad,\u6a2a\u5411\u5224\u65ad\u65f6\u52a0\u4e00\u4e2a\u662f\u5426\u76f8\u540c\u7684\u5224\u65ad\u5373\u53ef.\n\n\u7136\u540e...\u6709\u5173\u6b63\u65b9\u5f62,\u6211\u4eec\u53ef\u4ee5\u8fd9\u4e48\u5224\u65ad:\n```cpp\nt1[m]=-1;top=0;\n\tfor(j=0; j<=m; j++){\n\tint tmp=j;flg=0;\n\tif(j && !(a[i][j]^a[i][j-1]))flg=1;\n\twhile(top && ((t[sta[top]]>t[j]) || flg))\n\t\tans1=max(ans1,p2(min((j-(tmp=sta[top])),t[sta[top]]))),top--;\n\tt[sta[++top]=(flg?j:tmp)]=t[j];\n}\n```\n\u5373,\u5728\u6a2a\u5411\u5224\u65ad\u65f6\u518d\u5224\u65ad\u4e00\u4e0b\u6b63\u65b9\u5f62\n\n\u5177\u4f53\u81ea\u5df1\u7406\u89e3\u4e00\u4e0b\u5427.\n\n\u9644AC\u4ee3\u7801:\n```cpp\n#include<iostream>\nusing namespace std;\nbool a[2000][2000];\nint h[2000],t[2000],t1[2000];\nint sta[2000],top;\ninline int p2(int in){return in*in;}\nint main(){\n\tint n,m,i,j,ans=0,ans1=0;\n\tbool flg;\n\tcin>>n>>m;\n\tfor(i=0; i<n; i++){\n\t\tfor(j=0; j<m; j++){\n\t\t\tcin>>a[i][j];\n\t\t\tif(!i || a[i][j]^a[i-1][j])t1[j]=t[j]=h[j]=h[j]+1;\n\t\t\telse t1[j]=t[j]=h[j]=1;\n\t\t}\n\t\tt[m]=-1;top=0;\n\t\tfor(j=0; j<=m; j++){\n\t\t\tint tmp=j;flg=0;\n\t\t\tif(j && !(a[i][j]^a[i][j-1]))flg=1;\n\t\t\twhile(top && ((t[sta[top]]>t[j]) || flg))\n\t\t\t\tans=max(ans,(j-(tmp=sta[top]))*t[sta[top]]),top--;\n\t\t\tt[sta[++top]=(flg?j:tmp)]=t[j];\n\t\t}\n\t\tt1[m]=-1;top=0;\n\t\tfor(j=0; j<=m; j++){\n\t\t\tint tmp=j;flg=0;\n\t\t\tif(j && !(a[i][j]^a[i][j-1]))flg=1;\n\t\t\twhile(top && ((t[sta[top]]>t[j]) || flg))\n\t\t\t\tans1=max(ans1,p2(min((j-(tmp=sta[top])),t[sta[top]]))),top--;\n\t\t\tt[sta[++top]=(flg?j:tmp)]=t[j];\n\t\t}\n\t}\n\tcout<<ans1<<endl<<ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1575250779,
        "uid": 249736,
        "name": "Seg_Tree",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u540c\u6837\u662f\u60ac\u7ebf\u6cd5\uff0c\u5904\u4e8e\u4ee3\u7801\u7b80\u5355\uff0c\u4e0d\u9700\u8981\u6309\u7167\u884c\u5217\u548c\u7684\u5947\u5076\u6027\u8fdb\u884c\u8f6c\u5316\u3002\u8fd9\u91cch[i][j]\u8868\u793a\u4ecei,j\u4f4d\u7f6e\u5411\u4e0a01\u76f8\u95f4\u7684\u8d70\u6700\u8fdc\u80fd\u8d70\u7684\u957f\u5ea6\uff1bl[i][j].r[i][j]\u8868\u793a\u5411\u5de6\uff08\u53f3\uff09\u6700\u8fdc\u80fd\u8d70\u7684\u957f\u5ea6\uff1bL[i][j].R[i][j]\u8868\u793a\u4ee5h[i][j]\u4e3a\u9ad8\uff0c\u77e9\u5f62\u5411\u5de6\uff08\u53f3\uff09\u80fd\u6269\u5c55\u5230\u7684\u6700\u5927\u957f\u5ea6\u3002\n\u8f6c\u79fb\u548c\u7edf\u8ba1\u7b54\u6848\u89c1\u4ee3\u7801\u3002\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int maxn=2003;\nint a[maxn][maxn],n,m,h[maxn][maxn],l[maxn][maxn],r[maxn][maxn],L[maxn][maxn],R[maxn][maxn],ans1,ans2;\ninline int pf(int x) {return x*x;}\nint main() {\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i) for(int j=1;j<=m;++j) scanf(\"%d\",&a[i][j]);\n\tfor(int i=1;i<=n;++i) {\n\t\tfor(int j=1;j<=m;++j) {\n\t\t\th[i][j]=a[i][j]!=a[i-1][j]?h[i-1][j]+1:1;\n\t\t\tl[i][j]=a[i][j]!=a[i][j-1]?l[i][j-1]+1:1;\n\t\t\tL[i][j]=a[i][j]!=a[i-1][j]?min(L[i-1][j],l[i][j]):l[i][j];\n\t\t}\n\t\tfor(int j=m;j>=1;--j) {\n\t\t\tr[i][j]=a[i][j]!=a[i][j+1]?r[i][j+1]+1:1;\n\t\t\tR[i][j]=a[i][j]!=a[i-1][j]?min(R[i-1][j],r[i][j]):r[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;++i) for(int j=1;j<=m;++j) {\n\t\tans1=max(ans1,pf(min(R[i][j]+L[i][j]-1,h[i][j])));\n\t\tans2=max(ans2,(R[i][j]+L[i][j]-1)*h[i][j]);\n\t}\n\tprintf(\"%d\\n%d\",ans1,ans2);\n\treturn 0;\n}\n\n```",
        "postTime": 1535979244,
        "uid": 44278,
        "name": "messuarez",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\n\n# \u4e00\u3001\u9898\u76ee\nhttps://www.luogu.com.cn/problem/P1169\n\n# \u4e8c\u3001\u5206\u6790\n\u4ee5\u6837\u4f8b\u4e2d\u7684\u6570\u636e\u4e3a\u4f8b\uff0c\u683c\u5b50\u5171\u6709\u4e09\u884c\u4e09\u5217\u3002\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20200220205145305.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hhaXNodV96aGVuZw==,size_16,color_FFFFFF,t_70) \n\n\u54b1\u4eec\u53ef\u4ee5\u6309\u987a\u5e8f\u679a\u4e3e\u6bcf\u4e2a\u683c\u5b50\u3002\u6c42\u957f\u65b9\u5f62\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u679a\u4e3e\u6574\u884c\u3002\u6c42\u6b63\u65b9\u5f62\u7684\u65f6\u5019\uff0c\u8981\u4ee5\u5f53\u524d\u7684\u683c\u5b50\u4f5c\u4e3a\u6b63\u65b9\u5f62\u53f3\u4e0b\u89d2\u7684\u683c\u5b50\u3002\ni = 1, j = 1\u65f6\uff0c\u77e9\u5f62\u7684\u5bbd\u5ea6\u662f3\uff0c\u9ad8\u5ea6\u662f1\uff0c\u5219\u77e9\u5f62\u7684\u9762\u79ef\u662f3\uff0c\u5982\u56feA\u7684\u6574\u4e2a\u56fe\u5f62\u6240\u793a\u3002\u4ee5\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u4f5c\u4e3a\u53f3\u4e0b\u89d2\u683c\u5b50\u7684\u6700\u5927\u6b63\u65b9\u5f62\u7684\u8fb9\u957f\u662f1\uff0c\u5219\u6700\u5927\u6b63\u65b9\u5f62\u7684\u9762\u79ef\u662f1\uff0c\u5982\u56feB\u4e2d\u7684\u7eff\u8272\u90e8\u5206\u6240\u793a\u3002 \ni = 1, j = 2\u65f6\uff0c\u77e9\u5f62\u7684\u5bbd\u5ea6\u662f3\uff0c\u9ad8\u5ea6\u662f1\uff0c\u5219\u77e9\u5f62\u7684\u9762\u79ef\u662f3\uff0c\u5982\u56feB\u7684\u6574\u4e2a\u56fe\u5f62\u6240\u793a\u3002\u4ee5\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u4f5c\u4e3a\u53f3\u4e0b\u89d2\u683c\u5b50\u7684\u6700\u5927\u6b63\u65b9\u5f62\u7684\u8fb9\u957f\u662f1\uff0c\u5219\u6700\u5927\u6b63\u65b9\u5f62\u7684\u9762\u79ef\u662f1\uff0c\u5982\u56feB\u4e2d\u7684\u7eff\u8272\u90e8\u5206\u6240\u793a\u3002 \ni = 1, j = 3\u65f6\uff0c\u77e9\u5f62\u7684\u5bbd\u5ea6\u662f3\uff0c\u9ad8\u5ea6\u662f1\uff0c\u5219\u77e9\u5f62\u7684\u9762\u79ef\u662f3\uff0c\u5982\u56feC\u7684\u6574\u4e2a\u56fe\u5f62\u6240\u793a\u3002\u4ee5\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u4f5c\u4e3a\u53f3\u4e0b\u89d2\u683c\u5b50\u7684\u6700\u5927\u6b63\u65b9\u5f62\u7684\u8fb9\u957f\u662f1\uff0c\u5219\u6700\u5927\u6b63\u65b9\u5f62\u7684\u9762\u79ef\u662f1\uff0c\u5982\u56feC\u4e2d\u7684\u7eff\u8272\u90e8\u5206\u6240\u793a\u3002 \ni = 2, j = 1\u65f6\uff0c\u77e9\u5f62\u7684\u5bbd\u5ea6\u662f3\uff0c\u9ad8\u5ea6\u662f2\uff0c\u5219\u77e9\u5f62\u7684\u9762\u79ef\u662f6\uff0c\u5982\u56feD\u7684\u6574\u4e2a\u56fe\u5f62\u6240\u793a\u3002\u4ee5\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u4f5c\u4e3a\u53f3\u4e0b\u89d2\u683c\u5b50\u7684\u6700\u5927\u6b63\u65b9\u5f62\u7684\u8fb9\u957f\u662f1\uff0c\u5219\u6700\u5927\u6b63\u65b9\u5f62\u7684\u9762\u79ef\u662f1\uff0c\u5982\u56feD\u4e2d\u7684\u7eff\u8272\u90e8\u5206\u6240\u793a\u3002 \ni = 2, j = 2\u65f6\uff0c\u77e9\u5f62\u7684\u5bbd\u5ea6\u662f3\uff0c\u9ad8\u5ea6\u662f2\uff0c\u5219\u77e9\u5f62\u7684\u9762\u79ef\u662f6\uff0c\u5982\u56feE\u7684\u6574\u4e2a\u56fe\u5f62\u6240\u793a\u3002\u4ee5\u7b2c\u4e8c\u884c\u7b2c\u4e8c\u5217\u4f5c\u4e3a\u53f3\u4e0b\u89d2\u683c\u5b50\u7684\u6700\u5927\u6b63\u65b9\u5f62\u7684\u8fb9\u957f\u662f2\uff0c\u5219\u6700\u5927\u6b63\u65b9\u5f62\u7684\u9762\u79ef\u662f4\uff0c\u5982\u56feE\u4e2d\u7684\u7eff\u8272\u90e8\u5206\u6240\u793a\u3002 \n\u2026\u2026\n\n\u5177\u4f53\u7f16\u7a0b\u65f6\uff0c\u54b1\u4eec\u53ef\u8bbe\u4e09\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff1aleft[i][j]\uff0cright[i][j]\u548cup[i][j]\u3002\u7528\u6765\u8868\u793a\u7b2ci\u884c\u7b2cj\u5217\u683c\u5b50\u53ef\u5411\u5de6\u3001\u5411\u53f3\u3001\u5411\u4e0a\u5ef6\u4f38\u7684\u6781\u9650\u503c\u3002\u6839\u636e\u68cb\u76d8\u89c4\u5219\uff0c\u53ea\u6709\u76f8\u90bb\u7684\u4e24\u4e2a\u683c\u5b50\u989c\u8272\u4e0d\u540c\u624d\u80fd\u5ef6\u4f38\u8fc7\u53bb\u3002\n## \uff08\u4e00\uff09\u8ba1\u7b97left\u503c\nleft\u503c\t|\u610f\u4e49\n----------|---\nleft[1][1]=1\t|\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u662f\u5de6\u8fb9\u754c\u683c\u5b50\uff0c\u4e0d\u80fd\u5f80\u5de6\u5ef6\u4f38\uff0c\u53ea\u80fd\u505c\u7559\u5728\u672c\u683c\u5b50\u4e0a\u3002\nleft[1][2]=1\t|\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u989c\u8272\u4e0e\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\u4e0d\u540c\uff0c\u6240\u4ee5\u6700\u5de6\u4fa7\u53ef\u5ef6\u4f38\u5230\u7b2c\u4e00\u5217\u3002\nleft[1][3]=1\t|\u56e0\u4e3a\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u683c\u5b50\u76f8\u90bb\u7684\u989c\u8272\u4e24\u4e24\u4e0d\u76f8\u540c\uff0c\u6240\u4ee5\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u683c\u5b50\u5411\u5de6\u53ef\u5ef6\u4f38\u5230\u7b2c\u4e00\u5217\u3002\nleft[2][1]=1\t|\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u662f\u5de6\u8fb9\u754c\u683c\u5b50\uff0c\u4e0d\u80fd\u5f80\u5de6\u5ef6\u4f38\uff0c\u53ea\u80fd\u505c\u7559\u5728\u672c\u683c\u5b50\u4e0a\u3002\nleft[2][2]=1\t|\u7b2c\u4e8c\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u989c\u8272\u4e0e\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\u4e0d\u540c\uff0c\u6240\u4ee5\u5411\u5de6\u53ef\u5ef6\u4f38\u5230\u7b2c\u4e00\u5217\u3002\nleft[2][3]=1\t|\u56e0\u4e3a\u7b2c\u4e8c\u884c\u4e09\u5217\u683c\u5b50\u76f8\u90bb\u7684\u989c\u8272\u4e24\u4e24\u4e0d\u76f8\u540c\uff0c\u6240\u4ee5\u7b2c\u4e8c\u884c\u4e09\u5217\u683c\u5b50\u5411\u5de6\u53ef\u5ef6\u4f38\u5230\u7b2c\u4e00\u5217\u3002\nleft[3][1]=1\t|\u7b2c\u4e09\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u662f\u5de6\u8fb9\u754c\u683c\u5b50\uff0c\u4e0d\u80fd\u5f80\u5de6\u5ef6\u4f38\uff0c\u53ea\u80fd\u505c\u7559\u5728\u672c\u683c\u5b50\u4e0a\u3002\nleft[3][2]=1\t|\u7b2c\u4e09\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u989c\u8272\u4e0e\u7b2c\u4e09\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\u4e0d\u540c\uff0c\u6240\u4ee5\u5411\u5de6\u53ef\u5ef6\u4f38\u5230\u7b2c\u4e00\u5217\u3002\nleft[3][3]=3\t|\u7b2c\u4e09\u884c\u7b2c\u4e09\u5217\u7684\u683c\u5b50\u4e0e\u7b2c\u4e09\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\u989c\u8272\u76f8\u540c\uff0c\u6240\u4ee5\u7b2c\u4e09\u884c\u7b2c\u4e09\u5217\u683c\u5b50\u4e0d\u80fd\u5f80\u5de6\u5ef6\u4f38\uff0c\u53ea\u80fd\u505c\u7559\u5728\u672c\u683c\u5b50\u4e0a\u3002\n\n## \uff08\u4e8c\uff09\u8ba1\u7b97right\u503c\nright\u503c\t|\u610f\u4e49\n-|-\nright[1][1]=3\t|\u7b2c\u4e00\u884c\u7684\u4e09\u4e2a\u683c\u5b50\u989c\u8272\u4e24\u4e24\u4e0d\u540c\uff0c\u6240\u4ee5\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\u53ef\u4ee5\u5411\u53f3\u5ef6\u4f38\u5230\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u3002\nright[1][2]=3\t|\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u989c\u8272\u4e0e\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u7684\u683c\u5b50\u4e0d\u540c\uff0c\u6240\u4ee5\u53ef\u4ee5\u5411\u53f3\u5ef6\u4f38\u5230\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u3002\nright[1][3]=3\t|\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u7684\u683c\u5b50\u5904\u4e8e\u53f3\u8fb9\u754c\uff0c\u4e0d\u80fd\u518d\u5411\u53f3\u5ef6\u4f38\u3002\nright[2][1]=3\t|\u7b2c\u4e8c\u884c\u7684\u4e09\u4e2a\u683c\u5b50\u989c\u8272\u4e24\u4e24\u4e0d\u540c\uff0c\u6240\u4ee5\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u7684\u683c\u5b50\u53ef\u4ee5\u5411\u53f3\u5ef6\u4f38\u5230\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u3002\nright[2][2]=3\t|\u7b2c\u4e8c\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u989c\u8272\u4e0e\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u7684\u683c\u5b50\u4e0d\u540c\uff0c\u6240\u4ee5\u53ef\u4ee5\u5411\u53f3\u5ef6\u4f38\u5230\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u3002\nright[2][3]=3\t|\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u7684\u683c\u5b50\u5904\u4e8e\u53f3\u8fb9\u754c\uff0c\u4e0d\u80fd\u518d\u5411\u53f3\u5ef6\u4f38\u3002\nright[3][1]=2\t|\u7b2c\u4e09\u884c\u7b2c\u4e00\u5217\u683c\u5b50\u989c\u8272\u4e0e\u7b2c\u4e8c\u5217\u683c\u5b50\u989c\u8272\u4e0d\u540c\uff0c\u6240\u4ee5\u53ef\u5ef6\u4f38\u5230\u7b2c\u4e8c\u5217\uff1b\u7b2c\u4e8c\u5217\u989c\u8272\u4e0e\u7b2c\u4e09\u5217\u76f8\u540c\uff0c\u6240\u4ee5\u4e0d\u80fd\u5ef6\u4f38\u5230\u7b2c\u4e09\u5217\u3002\nright[3][2]=2\t|\u7b2c\u4e09\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\uff0c\u56e0\u4e3a\u989c\u8272\u4e0e\u7b2c\u4e09\u884c\u7b2c\u4e09\u5217\u7684\u683c\u5b50\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u80fd\u5ef6\u4f38\u5230\u7b2c\u4e09\u5217\u3002\nright[3][3]=3\t|\u7b2c\u4e09\u884c\u7b2c\u4e09\u5217\u7684\u683c\u5b50\u5904\u4e8e\u53f3\u8fb9\u754c\uff0c\u4e0d\u80fd\u518d\u5411\u53f3\u5ef6\u4f38\u3002\n\n## \uff08\u4e09\uff09\u8ba1\u7b97up\u503c\nup\u503c\t|\u610f\u4e49\n----------|-------\nup[1][1]=1\t|\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u5904\u4e8e\u4e0a\u8fb9\u754c\uff0c\u5219\u6b64\u683c\u5b50\u7684\u9ad8\u5ea6\u4e3a1\nup[1][2]=1\t|\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u5904\u4e8e\u4e0a\u8fb9\u754c\uff0c\u5219\u6b64\u683c\u5b50\u7684\u9ad8\u5ea6\u4e3a1\nup[1][3]=1\t|\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u5904\u4e8e\u4e0a\u8fb9\u754c\uff0c\u5219\u6b64\u683c\u5b50\u7684\u9ad8\u5ea6\u4e3a1\nup[2][1]=2\t|\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u7684\u989c\u8272\u4e0e\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u4e0d\u540c\uff0c\u5219\u7ad6\u76f4\u65b9\u5411\u4e24\u4e2a\u683c\u5b50\u7684\u7d2f\u79ef\u9ad8\u5ea6\u4e3a2\nup[2][2]=2\t|\u7b2c\u4e8c\u884c\u7b2c\u4e8c\u5217\u7684\u989c\u8272\u4e0e\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u4e0d\u540c\uff0c\u5219\u7ad6\u76f4\u65b9\u5411\u4e24\u4e2a\u683c\u5b50\u7684\u7d2f\u79ef\u9ad8\u5ea6\u4e3a2\nup[2][3]=2\t|\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u7684\u989c\u8272\u4e0e\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u4e0d\u540c\uff0c\u5219\u7ad6\u76f4\u65b9\u5411\u4e24\u4e2a\u683c\u5b50\u7684\u7d2f\u79ef\u9ad8\u5ea6\u4e3a2\nup[3][1]=3\t|\u7b2c\u4e00\u5217\u7684\u4e09\u4e2a\u683c\u5b50\u76f8\u90bb\u989c\u8272\u90fd\u4e0d\u540c\uff0c\u6240\u4ee5\u679a\u4e3e\u5230\u7b2c\u4e09\u884c\u7b2c\u4e00\u5217\u65f6\uff0c\u7ad6\u76f4\u65b9\u5411\u4e09\u4e2a\u683c\u5b50\u7684\u7d2f\u79ef\u9ad8\u5ea6\u4e3a3\nup[3][2]=3\t|\u7b2c\u4e8c\u5217\u7684\u4e09\u4e2a\u683c\u5b50\u76f8\u90bb\u989c\u8272\u90fd\u4e0d\u540c\uff0c\u6240\u4ee5\u679a\u4e3e\u5230\u7b2c\u4e09\u884c\u7b2c\u4e8c\u5217\u65f6\uff0c\u7ad6\u76f4\u65b9\u5411\u4e09\u4e2a\u683c\u5b50\u7684\u7d2f\u79ef\u9ad8\u5ea6\u4e3a3\nup[3][3]=1\t|\u7b2c\u4e09\u884c\u7b2c\u4e09\u5217\u683c\u5b50\u7684\u989c\u8272\u4e0e\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u76f8\u540c\uff0c\u4e0d\u80fd\u5411\u4e0a\u5ef6\u4f38\u3002\u6240\u4ee5\u679a\u4e3e\u5230\u7b2c\u4e09\u884c\u7b2c\u4e09\u5217\u65f6\uff0c\u7ad6\u76f4\u65b9\u5411\u683c\u5b50\u7684\u9ad8\u5ea6\u4e3a1\u3002\n\n# \u4e09\u3001AC\u4ee3\u7801\n```\n#include <iostream>\n#include <cstdio>\nusing namespace std;\n\nconst int maxn = 2005;\n\nint a[maxn][maxn], lef[maxn][maxn], righ[maxn][maxn], up[maxn][maxn];\nint n, m, area1, area2;\n\nint main()\n{\n    //freopen(\"P1169.in\", \"r\", stdin);\n\n    scanf(\"%d%d\", &n, &m);\n\n    for(int i = 1; i <= n; i++)\n    {\n        for(int j = 1; j <= m; j++)\n        {\n            scanf(\"%d\", &a[i][j]);\n            //\u521d\u59cb\u5316\n            lef[i][j] = righ[i][j] = j;\n            up[i][j] = 1;\n        }\n    }\n\n    //\u683c\u5b50(i,j)\u5f80\u5de6\u6700\u591a\u80fd\u8fbe\u5230\u54ea\u4e00\u5217\n    for(int i = 1; i <= n; i++)\n    {\n        for(int j = 2; j <= m; j++)\n        {\n            if(a[i][j] != a[i][j-1])\n            {\n                lef[i][j] = lef[i][j-1];\n            }\n        }\n    }\n\n    //\u683c\u5b50(i,j)\u5f80\u53f3\u6700\u591a\u80fd\u8fbe\u5230\u54ea\u4e00\u5217\n    for(int i = 1; i <= n; i++)\n    {\n        for(int j = m - 1; j > 0;j--)\n        {\n            if(a[i][j] != a[i][j+1])\n                {\n                    righ[i][j] = righ[i][j+1];\n                }\n        }\n    }\n\n    for(int i = 1; i <= n; i++)\n    {\n        for(int j = 1; j <= m; j++)\n        {\n            if(i > 1 && a[i][j] != a[i-1][j])//\u76f8\u540c\u5217\u4e0a\u4e0b\u884c\u683c\u5b50\u989c\u8272\u4e0d\u540c\n            {\n                lef[i][j] = max(lef[i][j], lef[i-1][j]);    //\u53d6\u672c\u884c\u548c\u4e0a\u4e00\u884c\u7684\u4ea4\u96c6\uff0c\u7528max\n                righ[i][j] = min(righ[i][j], righ[i-1][j]); //\u53d6\u672c\u884c\u548c\u4e0a\u4e00\u884c\u7684\u4ea4\u96c6\uff0c\u7528min\n                up[i][j] = up[i-1][j] + 1;\n            }\n\n            int width = righ[i][j] - lef[i][j] + 1; //\u6c42\u5bbd\u5ea6\uff0c\u5de6\u53f3\u7aef\u70b9\u90fd\u8981\u7b97\u8fdb\u53bb\uff0c\u6240\u4ee5\u8981\u52a01\n            int side = min(width, up[i][j]);        //\u5728\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u4e4b\u95f4\u53d6\u6700\u5c0f\u503c\u4f5c\u4e3a\u8fb9\u957f\n            area1 = max(area1, side * side);        //\u6b63\u65b9\u5f62\u9762\u79ef\n            area2 = max(area2, width * up[i][j]);   //\u957f\u65b9\u5f62\u9762\u79ef\n        }\n    }\n\n    cout << area1 << endl << area2;\n\n    return 0;\n}\n```\n\n\n\n\n",
        "postTime": 1582203309,
        "uid": 138800,
        "name": "zhenghaishu",
        "ccfLevel": 0,
        "title": "P1169\u68cb\u76d8\u5236\u4f5c\u9898\u89e3\u62a5\u544a"
    },
    {
        "content": "$\\ \\ \\ \\ \\ \\ \\ $[luogu](https://www.luogu.com.cn/problem/P1169)\n\n$\\ \\ \\ \\ \\ \\ \\ $\u6211\u4eec\u8981\u627e\u5230\u4e00\u4e2a\u9ed1\u767d\u76f8\u95f4\u7684\u68cb\u76d8\uff08\u53ef\u4ee5\u53c2\u8003\u56fd\u9645\u8c61\u68cb\u68cb\u76d8\uff09\uff0c\u7b2c\u4e00\u4e2a\u5c0f\u95ee\u9898\u662f\u627e\u5230\u6700\u5927\u7684\u6b63\u65b9\u5f62\uff0c\u7b2c\u4e8c\u4e2a\u662f\u627e\u5230\u6700\u5927\u7684\u77e9\u5f62\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u6211\u4eec\u6ce8\u610f\u5230\u68cb\u76d8\u8ddf\u9898 1 \u4e00\u6837\u53ea\u6709\u4e24\u79cd\u683c\u5b50\uff0c\u80fd\u7528\u72b6\u538b\u5417\uff1f\u7b54\u6848\u662f\u5426\u3002\u56e0\u4e3a $n,m \\leq 2000$\uff0c\u6240\u4ee5\u4e0d\u80fd\u72b6\u538b\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u540c\u65f6\uff0c\u627e\u5230\u6700\u5927\u7684\u5408\u6cd5\u6b63\u65b9\u5f62\u548c\u77e9\u5f62\uff0c\u6070\u597d\u662f\u6211\u4eec\u7684\u627e\u7eaf\u8272\u6700\u5927\u6b63\u65b9\u5f62\u548c\u77e9\u5f62\u7684\u7ecf\u5178\u6a21\u578b\uff08\u5206\u522b\u7528 dp \u548c\u5355\u8c03\u6808\u6c42\u89e3\uff09\uff0c\u6211\u4eec\u80fd\u591f\u5728\u6b64\u95f4\u8f6c\u6362\u5417\uff1f\n\n$\\ \\ \\ \\ \\ \\ \\ $\u7b54\u6848\u662f\u53ef\u4ee5\u7684\u3002\u6211\u4eec\u5c06 $a_{i,j} \\otimes 1 (i + j \\mod 2 = 0)$\uff0c\u5176\u4e2d $\\otimes$ \u4e3a\u5f02\u6216\u7b26\u53f7\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u6211\u4eec\u53d1\u73b0\u968f\u673a\u53d6\u4e0a\u4e00\u4e2a\u77e9\u9635\uff0c\u6211\u4eec\u7ffb\u8f6c\u4e86\u4e4b\u540e\uff0c\u53d1\u73b0\u5176\u5b9e\u5c31\u662f\u53ef\u4ee5\u4e92\u76f8\u8f6c\u6362\u7684\u3002\u73b0\u5728\u6211\u4eec\u53cd\u8f6c\u4e4b\u540e\u53ea\u9700\u8981\u6c42\u7eaf\u8272\u6700\u5927\u6b63\u65b9\u5f62\u548c\u77e9\u5f62\u7684\u7ecf\u5178\u6a21\u578b\u4e86\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u95ee\u9898\uff0c\u5b9a\u4e49 $dp_{0,i,j}$ \u4e3a $a_{i,j}=0$\uff0c\u4ee5 $(i,j)$ \u4e3a\u53f3\u4e0b\u89d2\u7684\u6b63\u65b9\u5f62\u6700\u5927\u8fb9\u957f\u3002$dp_1$ \u540c\u7406\u3002\u5bf9\u4e8e dp \u65b9\u7a0b\uff0c\u6709\uff1a\n\n$$\\begin{cases}\ndp_{0,i,j}=\\min \\{ dp_{0,i-1,j},dp_{0,i-1,j-1},dp_{0,i,j-1}+1\\} (a_{i,j}=0) \\\\ dp_{1,i,j}=\\min \\{ dp_{1,i-1,j},dp_{1,i-1,j-1},dp_{1,i,j-1}+1\\} (a_{i,j}=1)\n\\end{cases}$$\n\n$\\ \\ \\ \\ \\ \\ \\ $\u5982\u679c\u8fd9\u4e00\u6bb5 Markdown \u7206\u4e86\u53ef\u4ee5\u770b[blog](https://www.luogu.com.cn/blog/blog10086001/solution-p1169)\u3002\u8fd9\u91cc\u8fd8\u6709[\u52a8\u6001\u89c4\u5212\u4e00\u767e\u9898](https://www.luogu.com.cn/blog/blog10086001/dong-tai-gui-hua-100-ti)qwq\uff0c\u53c2\u89c1 3\u9898\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u6613\u5f97\u7b54\u6848\u4e3a $\\max \\{ dp \\}$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(nm)$\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u5bf9\u4e8e\u7b2c\u4e8c\u4e2a\u95ee\u9898\uff0c\u7528\u5355\u8c03\u6808\u6c42\u89e3\u3002\u6211\u4eec\u9996\u5148\u50a8\u5b58\u4e00\u6bb5\u8fde\u7eed\u7684\u9ad8\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e\u4e00\u4e2a\u6570\u6700\u591a\u80fd\u5f80\u4e0a\u5ef6\u4f38\u591a\u5c11\u76f8\u540c\u7684\u8fde\u7eed\u7684\u6570\u3002\u679a\u4e3e\u6bcf\u4e00\u884c\u4f5c\u4e3a\u77e9\u5f62\u5e95\u8fb9\uff0c\u8fd9\u9053\u9898\u5c31\u53d8\u6210\u4e86\u76f4\u65b9\u56fe\u6700\u5927\u77e9\u5f62\u95ee\u9898\u3002\u679a\u4e3e\u4e0b\u8fb9\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\uff0c\u5355\u8c03\u6808 $O(m)$\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u5f97\u5230\u8fd9\u4e9b\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(nm)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u9898\u76ee\u3002\n\n$\\ \\ \\ \\ \\ \\ \\ $\u4ee3\u7801\u5982\u4e0b\u3002\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint n,m,a[2005][2005];\nnamespace DynamicProgramming\n{\n\tint dp1[2005][2005],dp2[2005][2005];\n\tvoid Dp()\n\t{\n\t\tint ans=0;\n\t\tfor(int i=1;i<=n;++i)\n\t\t{\n\t\t\tfor(int j=1;j<=m;++j)\n\t\t\t{\n\t\t\t\tif(a[i][j])\tdp1[i][j]=min(min(dp1[i-1][j],dp1[i][j-1]),dp1[i-1][j-1])+1;\n\t\t\t\telse\tdp2[i][j]=min(min(dp2[i-1][j],dp2[i][j-1]),dp2[i-1][j-1])+1;\n\t\t\t\tans=max(ans,max(dp1[i][j],dp2[i][j]));\n\t\t\t}\n\t\t}\n\t\tprintf(\"%d\\n\",ans*ans);\n\t}\n}\nnamespace MonotonicStack\n{\n\tint cnt[2005][2005],ans,s[2005],l[2005];\n\tvoid Monotonic(int sp[])\n\t{\n\t\tint top=0,len=0;\n\t\ts[top]=l[top]=0;\n\t\tfor(int i=1;i<=m;++i)\n\t\t{\n\t\t\tif(sp[i]>=s[top])\ts[++top]=sp[i],l[top]=1;\n\t\t\telse\n\t\t\t{\n\t\t\t\tlen=0;\n\t\t\t\twhile(top && s[top]>sp[i])\n\t\t\t\t{\n\t\t\t\t\tlen+=l[top];\n\t\t\t\t\tans=max(ans,len*s[top]);\n\t\t\t\t\t--top;\n\t\t\t\t}\n\t\t\t\ts[++top]=sp[i];\n\t\t\t\tl[top]=len+1;\n\t\t\t}\n\t\t}\n\t\tlen=0;\n\t\twhile(top)\n\t\t{\n\t\t\tlen+=l[top];\n\t\t\tans=max(ans,len*s[top]);\n\t\t\t--top;\n\t\t}\n\t}\n\tvoid Stack(){for(int i=1;i<=n;++i)\tMonotonic(cnt[i]);}\n\tvoid Ans(){printf(\"%d\",ans);}\n}\nusing namespace MonotonicStack;\nint main(){\n\tscanf(\"%d %d\",&n,&m);\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tfor(int j=1;j<=m;++j)\n\t\t{\n\t\t\tscanf(\"%d\",&a[i][j]);\n\t\t\tif(!((i+j)&1))\ta[i][j]^=1;\n\t\t\tif(a[i][j])\tcnt[i][j]=cnt[i-1][j]+1;\n\t\t}\n\t}\n\tDynamicProgramming::Dp();\n\tMonotonicStack::Stack();\n\tmemset(cnt,0,sizeof cnt);\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tfor(int j=1;j<=m;++j)\n\t\t{\n\t\t\tif(!a[i][j])\tcnt[i][j]=cnt[i-1][j]+1;\n\t\t}\n\t}\n\tMonotonicStack::Stack();\n\tMonotonicStack::Ans();\n\treturn 0;\n}\n```",
        "postTime": 1577251919,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "# \u5982\u679c\u60f3\u8981\u8ba4\u771f\u505a\u8fd9\u9053\u9898\uff0c\u8bf7\u79fb\u6b65\u522b\u7684\u9898\u89e3\u87f9\u87f9\n\n~~\u505a\u4e86[P4147](https://www.luogu.org/problem/P4147)\u540e\u53c8\u770b\u5230\u4e86\u8fd9\u4e00\u9053\u9898\uff0c\u53d1\u73b0\u5c31\u662f\u5176\u53d8\u79cd\uff0c\u6309\u4f4d\u53d6\u53cd\u4e4b\u540e\u51e0\u4e4e\u4e00\u6a21\u4e00\u6837\u3002\u3002\u3002~~\n\n\u5173\u4e8e\u6309\u4f4d\u53d6\u53cd\u662f\u8fd9\u6837\u7684\uff1a\n1. \u6b63\u5e38\u7684\u68cb\u76d8\u53ea\u67090 \uff0c1\u6784\u6210\uff0c\u4e14\u4ea4\u9519\u5206\u5e03\n\n\u8fd9\u91cc\uff1a![\u68cb\u76d8](https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3347141751,2894100907&fm=26&gp=0.jpg)\n\n\u4e8e\u662f\u6211\u4eec\u628a\u683c\u5b50\u884c\u6570\u548c\u5217\u6570\u76f8\u52a0\u8d77\u6765\u4e3a\u5076\u6570\u7684\u53d8\u6210\u767d\u8272\uff0c\u5728\u6211\u4eec\u8111\u4e2d\u5b83\u5c31\u4f1a\u53d8\u6210\u4e00\u4e2a0-1\u77e9\u9635\uff0c\u7136\u540e\u5c31\u662f[P4147](https://www.luogu.org/problem/P4147)\u4e86\n\n\u5173\u4e8e\u5176\u89e3\u6cd5\u53ef\u4ee5\u60ac\u7ebf\u6cd5\uff0cDP\u4e5f\u884c\uff0c~~\u4f46\u6211\u4e3a\u4e86\u56fe\u7701\u4e8b\u5199\u4e86\u4e2an^3\u5927\u66b4\u529b\uff0c\u4e5f\u80fd\u8fc7QAQ~~\n```\n#include<cstdio>\n#include<algorithm>\n#define _ 0\nusing namespace std;\nint n ,m ,tmp ,num1[2050] ,num2[2050] ,h1 ,h2;\nint ans = 1 ,ans_ = 1;\nint main()\n{\n    scanf(\"%d%d\" ,&n ,&m);\n    for(int i = 1 ; i <= n ; ++ i)\n    {\n        for(int j = 1 ; j <= m ; ++ j)\n        {\n            scanf(\"%d\" ,&tmp);\n            if((i + j) & 1) tmp = 1 - tmp;//\u5c06\u5176\u53d8\u8272\n            if(tmp) ++num1[j];//\u63a5\u4e0b\u6765\u662f\u627e\u6700\u5927\u7684\u5168\u75310\u62161\u7ec4\u6210\u7684\u77e9\u9635\n            else num1[j] = 0;\n            if(!tmp) ++ num2[j];\n            else num2[j] = 0;\n            h1 = num1[j];\n            h2 = num2[j];\n            for(int k = j - 1 ; k ; -- k)\n            {\n            \tif(num1[j])\n            \t{\n\t            \th1 = min(h1 , num1[k]);\n\t                ans = max(ans , min(h1 , (j - k + 1)));//\u5173\u4e8e\u6700\u5927\u6b63\u65b9\u5f62\u662f\u53ef\u4ee5\u76f4\u63a5\u5728\u9014\u4e2d\u89e3\u51b3\u7684\n\t                ans_ = max(ans_ , h1 * (j - k + 1));\n\t\t\t\t}\n                else {\n                \th2 = min(h2 , num2[k]);\n\t                ans = max(ans , min(h2 , (j - k + 1)));\n\t                ans_ = max(ans_ , h2 * (j - k + 1));\n\t\t\t\t}\n            }\n        }\n    }\n    printf(\"%d\\n%d\" ,ans * ans ,ans_);\n    return ~~(0^_^0);\n}\n```\n\n\u5efa\u8bae\u53ef\u4ee5\u7528DP\u6216\u522b\u7684\u7ec3\u7ec3\u624b\uff0c\u6bd5\u7adf\u66b4\u529b\u5e76\u4e0d\u662f\u4e07\u80fd\u7684\u561bQAQ",
        "postTime": 1572527259,
        "uid": 44505,
        "name": "lemonfor",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2an*m\u768401\u77e9\u9635\uff0c\u5bfb\u627e\u6700\u5927\u7684\uff0c\u76f8\u90bb\u503c\u4e0d\u76f8\u540c\u7684\u5b50\u77e9\u9635\u4e0e\u5b50\u65b9\u9635\u3002\n\n$n,m\\leq 2,000$\n\n\n\n### \u5206\u6790\n\n\u6734\u7d20\u7684\u505a\u6cd5\u662f\u679a\u4e3e\u4e24\u4e2a\u70b9\u6765\u786e\u5b9a\u77e9\u9635\uff0c\u518d\u66b4\u529b\u5224\u65ad\u80fd\u4e0d\u80fd\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u590d\u6742\u5ea6$O(n^4)$\u7206\u70b8\u3002\u8003\u8651\u4f18\u5316\uff1a\u5224\u65ad\u80fd\u4e0d\u80fd\u6ee1\u8db3\u6761\u4ef6\u65f6\uff0c\u5b58\u5728\u5f88\u591a\u91cd\u590d\u5224\u65ad\uff0c\u53ef\u4ee5\u9884\u5904\u7406\u3002\n\n\u4f46\u662f\uff0c\u600e\u6837\u8fdb\u884c\u9884\u5904\u7406\u5462\uff1f\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u6539\u53d8\u679a\u4e3e\u65b9\u5f0f\uff0c\u7b80\u5316\u9884\u5904\u7406\u7684\u6b65\u9aa4\u3002\n\n### \u60ac\u7ebf\u6cd5\n\n~~\u4eca\u5e74\u5e94\u8be5\u4e0d\u8003~~\n\n\u662f\u4e00\u79cdDP(?)\u7b97\u6cd5\uff0c\u5e38\u7528\u4e8e\u6c42\u6ee1\u8db3\u6761\u4ef6\u7684\u77e9\u9635\u3002\n\n![](https://cdn.luogu.com.cn/upload/pic/75921.png)\n\n\u5982\u679c\u5c06\u4e00\u6761\u7ebf\u5f53\u505a1*k\u7684\u77e9\u9635\u770b\u5f85\uff0c\u5219\u6211\u4eec\u679a\u4e3e\u6bcf\u4e00\u6761\u6ee1\u8db3\u6761\u4ef6\u7684\u7ebf\uff0c\u5e76\u5c1d\u8bd5\u5c06\u5176\u5411\u5de6\u53f3\u62d3\u5c55\u6784\u9020\u77e9\u9635\u3002\n\n![](https://cdn.luogu.com.cn/upload/pic/75922.png)\n\n\u90a3\u4e48\u53ea\u8981\u5728\u5de6\u53f3\u62d3\u5c55\u957f\u5ea6\u4e2d\u5206\u522b\u53d6min\uff0c\u5c31\u662f\u6240\u6c42\u7b54\u6848\u3002\u8fd9\u79cd\u65b9\u6cd5\u7684\u590d\u6742\u5ea6\u662f\u591a\u5c11\uff1f\n\n\u6bcf\u4e2a\u70b9\u5982\u679c\u548c\u4e0a\u65b9\u4e0d\u540c\uff0c\u5c31\u53ef\u4ee5\u63a5\u5230\u4e0a\u9762\u7684\u7ebf\u4e2d\u3002\u6240\u4ee5\u679a\u4e3e\u6bcf\u4e2a\u70b9\uff0c\u5c31\u53ef\u4ee5\u9012\u63a8\u6c42\u51fa\u60ac\u7ebfup\n\n$$up_{i,j}=up_{i-1,j}+(b_{i,j}\\not= b_{i,j})$$\n\n\u5176\u4e2db\u662f\u539f\u59cb\u77e9\u9635\uff0c\u521d\u59cb\u503c\u662f1\u3002\u590d\u6742\u5ea6$O(n^2)$\n\n\n\n\u5de6\u53f3\u7aef\u62d3\u5c55\u7684\u5bf9\u8c61\u662f\u5355\u4e2a\u70b9\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u90fd\u9884\u5904\u7406\u51fa\u80fd\u5411\u5de6\u53f3\u62d3\u5c55\u5230\u7684\u4f4d\u7f6e\u3002\u7528\u9012\u63a8\u6c42\u51fa\u3002\n\n$$\\begin{cases}b_{i,j}\\not=b_{i,j-1}\\quad left_{i,j}=j\\\\b_{i,j}=b_{i,j-1}\\quad left_{i,j}=left_{i,j-1}\\end{cases}$$\n\n$$\\begin{cases}b_{i,j}\\not=b_{i,j+1}\\quad right_{i,j}=j\\\\b_{i,j}=b_{i,j+1}\\quad right_{i,j}=right_{i,j+1}\\end{cases}$$\n\n\u590d\u6742\u5ea6\u4ecd\u7136$O(n^2)$\n\n\n\n2k\u53ef\u8fc7\u3002\n\n### \u6b63\u786e\u6027\n\n\u6211\u4eec\u9700\u8981\u8bc1\u660e\u7684\u662f\uff0c\u60ac\u7ebf\u6cd5\u53ef\u4ee5\u679a\u4e3e\u5230\u6240\u6709\u77e9\u5f62\u3002\n\n![](https://cdn.luogu.com.cn/upload/pic/75924.png)\n\n\n\u5047\u8bbe\u6211\u4eec\u8981\u5728\u8fd9\u4e00\u56e2\u6ee1\u8db3\u6761\u4ef6\u7684\u8054\u901a\u5757\u4e2d\u627e\u77e9\u5f62\u3002\uff08\u4e11\uff0c\u771fTM\u4e11\uff09\n\n![](https://cdn.luogu.com.cn/upload/pic/75925.png)\n\n\u90a3\u4e48\u5b83\u4f1a\u4e0d\u4f1a\u53d6\u84dd\u8272\u5462\uff1f\u4e0d\u4f1a\uff0c\u5f88\u660e\u663e\u7eff\u8272\u6bd4\u4ed6\u66f4\u4f18\u3002\u6709\u4e00\u4e2a\u6027\u8d28\uff1a**\u77e9\u5f62\u8fb9\u7f18\u5fc5\u7136\u7d27\u8d34\u8054\u901a\u5757\u8fb9\u7f18**\u3002\n\n\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u6761\u60ac\u7ebf\uff0c\u5b83\u53d6\u5230\u7684\u77e9\u9635\u662f\u5c3d\u91cf\u5927\u7684\u3002\n\n~~\uff08\u5176\u5b9e\u7eff\u8272\u4e5f\u4e0d\u6ee1\u8db3\uff0c\u56e0\u4e3a\u5de6\u53f3\u7aef\u6ca1\u6709\u53d6\u5b8c\u6574\u3002\uff09~~\n\n![](https://cdn.luogu.com.cn/upload/pic/75926.png)\n\n~~\u753b\u56fe\u5b9d\u624d\uff0cluogu\u6361\u5230\u9b3c\u4e86~~\n\n\u7531\u521a\u624d\u7684\u6027\u8d28\u5f97\u51fa\uff0c\u8fd9\u4e2a\u77e9\u5f62\u6240\u5728\u7684\u8054\u901a\u5757\u5373\u4fbf\u8fb9\u7f18\u518d\u7c97\u7cd9\uff0c\u603b\u662f\u4f1a\u6709\u4e00\u6761\u60ac\u7ebf\u7684\u4e0a\u7aef\u548c\u77e9\u5f62\u7684\u4e0a\u7aef\u91cd\u5408\u3002\n\n\u6240\u4ee5\uff0c\u53ea\u8981\u6bcf\u6761\u60ac\u7ebf\u90fd\u679a\u4e3e\u5230\uff0c\u6bcf\u4e2a\u53ef\u80fd\u662f\u7b54\u6848\u7684\u77e9\u5f62\u5c31\u4f1a\u679a\u4e3e\u5230\uff0c\u800c\u4e14\u4f1a\u8ba9\u5b83\u4eec\u5c3d\u91cf\u5927\u3002\u8fd9\u9898\u5c31\u89e3\u51b3\u4e86\u3002\n\n### \u4ee3\u7801\n\n~~\u522b\u770b\u4e86 \u6284\u7684~~\n\n```cpp\n#include<cstdio>//iostream\u5e93\u6709left\u51fd\u6570\uff0c\u4f1a\u51b2\u7a81\n#include<algorithm>\nusing namespace std;\n\nconst int MAXN=2005;\nint n,m;\nbool b[MAXN][MAXN];\nint left[MAXN][MAXN],right[MAXN][MAXN],up[MAXN][MAXN];\nint sq,rect,temp;\n\nint main()\n{\n\tscanf(\"%d %d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tleft[i][j]=right[i][j]=j,up[i][j]=1,scanf(\"%d\",&b[i][j]);\n\t\t\t//\u8f93\u5165\u3001\u521d\u59cb\u5316 \n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=2;j<=m;j++)\n\t\t\tif(b[i][j]!=b[i][j-1])\n\t\t\t\tleft[i][j]=left[i][j-1];\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=m-1;j>=1;j--)\n\t\t\tif(b[i][j]!=b[i][j+1])\n\t\t\t\tright[i][j]=right[i][j+1];\n\t\t\t//\u9012\u63a8\u9884\u5904\u7406\uff0c\u6ce8\u610f\u8303\u56f4\u548c\u987a\u5e8f \n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(i>1&&b[i-1][j]!=b[i][j])\n\t\t\t{\n\t\t\t\tup[i][j]=up[i-1][j]+1;\n\t\t\t\tleft[i][j]=max(left[i][j],left[i-1][j]);\n\t\t\t\tright[i][j]=min(right[i][j],right[i-1][j]);\n\t\t\t\t//\u7531\u4e8e\u662f\u77e9\u5f62\uff0cleft\u548cright\u4e0d\u80fd\u8d8a\u754c\uff0c\u8981\u53d6\u4e00\u904d\u6700\u5c0f\u503c\n\t\t\t\t//\u53e6\u5916\u770b\u6e05\u695a\u5b58\u50a8\u7684\u662f\u4f4d\u7f6e\u4e0d\u662f\u8ddd\u79bb\uff0c\u6240\u4ee5\u5de6\u7aef\u53d6\u8ddd\u79bb\u66f4\u77ed\u76f8\u5f53\u4e8e\u4f4d\u7f6e\u66f4\u9760\u540e\uff0c\u4e0b\u6807\u66f4\u5927\u3002 \n\t\t\t}\n\t\t\ttemp=(right[i][j]-left[i][j]+1);\n\t\t\trect=max(rect,up[i][j]*temp);\n\t\t\tsq=max(sq,min(up[i][j],temp)*min(up[i][j],temp));\n\t\t\t//\u6b63\u65b9\u5f62\u540c\u7406\u3002 \n\t\t}\n\tprintf(\"%d\\n%d\\n\",sq,rect);\n\treturn 0;\n}\n```\n\n\u6700\u540e\uff0c\u795d\u5927\u5bb6\u8eab\u4f53\u5065\u5eb7\uff0c\u518d\u89c1\u3002",
        "postTime": 1567226594,
        "uid": 34372,
        "name": "_wkjzyc",
        "ccfLevel": 0,
        "title": "P1169 [ZJOI2007]\u68cb\u76d8\u5236\u4f5c"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u7528\u6765\u603b\u7ed3\u975e\u5e38\u597d\u7684\u9898\u76ee\n\n\u89e3\u51b3\u8fd9\u79cd\u6709\u67d0\u79cd\u7279\u6b8a\u9650\u5236\u6761\u4ef6\u7684\u6700\u5927\u77e9\u5f62\u7684\u95ee\u9898\uff0c\u6709\u4e00\u79cd\u88ab\u79f0\u4e3a\u60ac\u7ebf\u6cd5\u7684\u7b97\u6cd5\n\n\u6211\u4eec\u5b9a\u4e49$l[i][j]$,$r[i][j]$,$up[i][j]$\u8868\u793a\u4ece\u67d0\u4e2a\u70b9\u5f00\u59cb\n\n\u5411\u5de6\uff0c\u5411\u53f3\uff0c\u5411\u4e0a\u6ee1\u8db3\u6761\u4ef6\u7684**\u7ebf\u6bb5**\u7684\u6700\u957f\u957f\u5ea6\uff0c\u6216\u662f\u7ed3\u675f\u5730\u70b9\n\n\u7136\u540e\u4ece\u4e0a\u5f80\u4e0b\u626b\u63cf\uff0c\u6bcf\u6b21\u4e0e\u4e3a\u4e86\u6269\u5927\u77e9\u5f62\u6211\u4eec\u8981\u540c\u65f6\u6ee1\u8db3\u4e0a\u4e00\u6392\u7684\u5de6\u53f3\u9650\u5236\u548c\u8fd9\u4e00\u6392\u7684\u5de6\u53f3\u9650\u5236\n\n\u4ee5\u53ca\u9898\u76ee\u6240\u7ed9\u5b9a\u7684\u9650\u5236\uff0c\u7136\u540e\u66f4\u65b0$up[i][j]$\n\n\u6700\u540e\u626b\u63cf\u7684\u65f6\u5019\u53d6\u6700\u5927\u7684\u503c\u5c31\u53ef\u4ee5\u4e86\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<cmath>\n#include<algorithm>\n#include<queue>\n#include<cctype>\n#include<set>\n#define LL long long\n#define M 2001000\n#define N 50010\n#define int long long\nusing namespace std;\nconst int inf=0x3f3f3f3f;\nconst int mod=1e9+7;\nconst double eps=1e-6;\ninline int read(){\n\tint f=1,x=0;char s=getchar();\n\twhile(!isdigit(s)){if (s=='-')f=-1;s=getchar();}\n\twhile(isdigit(s)){x=(x<<1)+(x<<3)+(s^48);s=getchar();}\n\treturn x*f;\n}\nint n,m,up[2100][2100],l[2100][2100],r[2100][2100],a[2100][2100],ans1,ans2; \nsigned main(void){\n\tn=read(),m=read();\n\tfor (int i=1;i<=n;i++)\n\t\tfor (int j=1;j<=m;j++) a[i][j]=read(),l[i][j]=r[i][j]=j,up[i][j]=1;\n\tfor (int i=1;i<=n;i++)\n\t\tfor (int j=2;j<=m;j++)\n\t\t\tif (a[i][j]!=a[i][j-1])\n\t\t\t\tl[i][j]=l[i][j-1];\n\tfor (int i=1;i<=n;i++)\n\t\tfor (int j=m-1;j>=1;j--)\n\t\t\tif (a[i][j]!=a[i][j+1])\n\t\t\t\tr[i][j]=r[i][j+1];\n\tfor (int i=1;i<=n;i++)\n\t\tfor (int j=1;j<=m;j++){\n\t\t\tif (i!=1&&a[i][j]!=a[i-1][j]){\n\t\t\t\tl[i][j]=max(l[i][j],l[i-1][j]);\n\t\t\t\tr[i][j]=min(r[i][j],r[i-1][j]);\n\t\t\t\tup[i][j]=up[i-1][j]+1;\n\t\t\t}\n\t\t\tans1=max(ans1,up[i][j]*(r[i][j]-l[i][j]+1));\n\t\t\tans2=max(ans2,min(up[i][j],r[i][j]-l[i][j]+1)*min(up[i][j],r[i][j]-l[i][j]+1));\n\t\t}\n\t\tprintf(\"%lld\\n%lld\",ans2,ans1);\n\treturn 0;\n}\n```\n",
        "postTime": 1572786206,
        "uid": 78290,
        "name": "Polaris_Dane",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "# \u603b\u4f53\u601d\u8def\uff1a\u60ac\u7ebfDP\n\n[\u6d1b\u8c37\u94fe\u63a5](https://www.luogu.org/problemnew/show/P1169)\n\n\u9898\u610f\u7684\u5316\u7b80\uff1a\n\u9898\u76ee\u4e2d\u8981\u6211\u4eec\u6c42\u6700\u5927\u768401\u76f8\u95f4\u7684\u77e9\u9635\uff08\u56db\u8fb9\u5f62\uff09\u548c\u6b63\u65b9\u5f62\u3002\n\u5bf9\u4e8e\u5904\u7406\u77e9\u9635\uff0c\u53ea\u9700\uff1a(Map[i][j]!=Map[i][j-1])/*\u8bc1\u660e\u76f8\u90bb\u4e24\u4e2a\u989c\u8272\u4e0d\u540c\uff0c\u7b26\u5408\u9898\u610f */\n\n\u5bf9\u4e8e\u6b63\u65b9\u5f62\u548c\u957f\u65b9\u5f62\uff0c\u5728\u4ee3\u7801\u4e2d\u4f1a\u7ee7\u7eed\u8bb2\u89e3\uff1b\n\n\u9898\u76ee\u7684\u6838\u5fc3\uff1a\n\n# \u60ac\u7ebfDP\n\n\u6211\u4eec\u9700\u8981**\u679a\u4e3e\u7b2ci\u884c\u7b2cj\u5217\u5f80\u4e0a\uff08<i\uff09\u7684\u6700\u5927\u5408\u6cd5\u5408\u6cd5\u77e9\u9635\uff0801\u76f8\u95f4\uff09**\uff0c\n\n\u4e8e\u662f\u6211\u4eec\u8bbe\u4e09\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff1a\n\nLeft[i][j]:**\u8868\u793a\u7b2ci\u884c\u7b2cj\u5217\u53ef\u4ee5\u5230\u8fbe\u7684\u6700\u5de6\u8fb9\u7684\u4f4d\u7f6e**\uff1b\n\nRight[i][j]:**\u8868\u793a\u7b2ci\u884c\u7b2cj\u5217\u53ef\u4ee5\u5230\u8fbe\u7684\u6700\u53f3\u8fb9\u7684\u4f4d\u7f6e**\uff1b\n\nUp[i][j]:**\u8868\u793a\u7b2ci\u884c\u7b2cj\u5217\u53ef\u4ee5\u5230\u8fbe\u6700\u4e0a\u65b9\u7684\u957f\u5ea6**\uff1b\n\n\u5728\u8f93\u5165\u6570\u636e\u65f6\uff0c\u987a\u4fbf\u5bf9\u7740\u4e09\u4e2a\u6570\u7ec4\u8fdb\u884c\u521d\u59cb\u5316\uff0cLeft\u548cRight\u7684\u521d\u59cb\u5316\u4e3aj\uff0c\u56e0\u4e3a\u8fd9\u65f6\u6211\u4eec\u8fd8\u4e0d\u77e5\u9053\u5de6\u53f3\u5ef6\u4f38\u7684\u957f\u5ea6\uff0c\u6240\u4ee5\u90fd\u4e3a\u539f\u70b9\uff1bUp\u5219\u4e3a1\uff0c\u56e0\u4e3a\u6211\u4eec\u4e5f\u4e0d\u77e5\u9053\u6bcf\u4e2a\u77e9\u9635\u6700\u4e0a\u9762\u80fd\u5230\u8fbe\u54ea\u4e2a\u4f4d\u7f6e\u3002\n\n\u6211\u4eec\u5bf9Left\u548cRight\u5206\u522b\u8fdb\u884c\u4e8c\u7ef4\u7684\u521d\u59cb\u5316\uff0c\u6c42\u51fa\u4e0a\u8ff0\u4e2d\u6211\u4eec\u60f3\u5f97\u5230\u7684\u91cf\uff0c\u4ee3\u7801\uff1a\n```cpp\nfor(register int i=1;i<=N;i++)\n\tfor(register int j=2;j<=M;j++)//\u6ce8\u610f\u8fd9\u91cc\u7684\u5faa\u73af\uff1a\u4ece\u6700\u5de6\u8fb9\u5f80\u53f3\u8fb9\u626b\n\t\tif(Map[i][j]!=Map[i][j-1])//\u5982\u679c\u76f8\u90bb\u4e24\u4e2a\u7b26\u5408\u6761\u4ef6\uff0c\u8fde\u63a5\n\t\t\tLeft[i][j]=Left[i][j-1];\n\t\nfor(register int i=1;i<=N;i++)\n\tfor(register int j=M-1;j>0;j--)//\u6ce8\u610f\u8fd9\u91cc\u7684\u5faa\u73af\uff1a\u4ece\u6700\u53f3\u8fb9\u5f80\u5de6\u8fb9\u626b\n\t\tif(Map[i][j]!=Map[i][j+1])//\u5982\u679c\u76f8\u90bb\u4e24\u4e2a\u7b26\u5408\u6761\u4ef6\uff0c\u8fde\u63a5\n\t\t\tRight[i][j]=Right[i][j+1];\n```\nUp\u3001Left\u548cRight\u7684\u9012\u63a8\u516c\u5f0f\uff1a\n\n**Up[i][j]=Up[i-1][j]+1;**\n\n**Left[i][j]=max(Left[i][j],Left[i\u22121][j];**\n\n**Right[i][j]=min(Right[i][j],Right[i-1][j];**\n\n\uff08\u524d\u63d0\u662f\u4ed6\u4eec**\u90fd\u662f\u5408\u6cd5\u76f8\u90bb**\uff09\n\nQ\uff1a\u4e3a\u4ec0\u4e48Left\u8981\u7528max\uff0c\u800cRight\u8981\u7528min\uff1f\n\nA\uff1a\u56e0\u4e3a\u4f60\u60f3\uff0c\u8fd9\u4e2a\u679a\u4e3e\u51fa\u6765\u7684\u56fe\u5f62\u7684**\u5de6\u53f3\u80af\u5b9a\u662f\u53c2\u5dee\u4e0d\u9f50**\u7684\uff0c\u8981\u60f3\u4f7f\u5b83\u53d8\u6210\u56db\u8fb9\u5f62\uff0c\u80af\u5b9a\u8981**\u627e\u5230\u5de6\u8fb9\u548c\u53f3\u8fb9\u7ebf\u6bb5\u7684\u6700\u5c0f\u503c**\uff0c\u53f3\u8fb9\u7684\u6700\u5c0f\u503c\u7528min\uff08**\u9760\u8fd1\u4e2d\u8f74**\uff09\uff0c\u5de6\u8fb9\u7684\u6700\u5c0f\u503c\u8981\u7528max\uff08**\u9760\u8fd1\u4e2d\u8f74**\uff09\uff1a\n\nQ\uff1a\u4e3a\u4ec0\u4e48Up\u6570\u7ec4\u8981\u4ece\u4e0a\u4e00\u884c\u52a0\u4e00?\n\nA\uff1a\u56e0\u4e3aUp\u6570\u7ec4\u662f\u7528\u6765\u7edf\u8ba1\u4ece**\u7b2ci\u884c\u7b2cj\u5217\u53ef\u4ee5\u5230\u8fbe\u6700\u4e0a\u65b9\u7684\u957f\u5ea6**\uff0c**\u6240\u8bb0\u5f55\u7684\u4e0d\u662f\u4e00\u4e2a\u5750\u6807**\uff08\u50cfRight\u548cLeft\uff09,**\u800c\u662f\u4e00\u4e2a\u6700\u8fdc\u8ddd\u79bb\u7684\u503c**\u3002\n\nQ\uff1a\u4e3a\u4ec0\u4e48Up\u6570\u7ec4\u4e0d\u50cfLeft\u548cRight\u6570\u7ec4\u4e00\u6837\u7edf\u8ba1\u5411\u4e0a\u5ef6\u4f38\u7684\u6700\u77ed\u503c\uff1f\n\nA\uff1b\u56e0\u4e3aUp\u6570\u7ec4\u8bb0\u5f55\u7684\u662f\u4e2d\u8f74\u7684\u957f\u5ea6\uff0c\u800c**\u4e2d\u8f74\u53ea\u6709\u4e00\u6761**\uff0c\u6240\u4ee5\u65e0\u9700\u505a\u6b64\u64cd\u4f5c\u3002\n\n\u800c\u5bf9\u4e8eUp\u6570\u7ec4\uff0c\u6211\u4eec\u53ef\u4ee5\u8fb9DP\u8fb9\u521d\u59cb\u5316\u3002\n\n# **\u4ee3\u7801\uff1a**\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint Left[2020][2020],Right[2020][2020];\nint Up[9999][2020],DP[2020][2020];\nint Map[2020][2020],N,M;\nint ACanswer1,ACanswer2;\n\nint main(void){\n\tscanf(\"%d%d\",&N,&M);\n\tfor(register int i=1;i<=N;i++){\n\t\tfor(register int j=1;j<=M;j++){\n\t\t\tscanf(\"%d\",&Map[i][j]);\n\t\t\tRight[i][j]=j;\n\t\t\tLeft[i][j]=j;\n\t\t\tUp[i][j]=1;\n\t\t}\n\t}//\u8f93\u5165\u6570\u636e\u5e76\u8fdb\u884c\u521d\u59cb\u5316\n\t\n\tfor(register int i=1;i<=N;i++)\n\t\tfor(register int j=2;j<=M;j++)\n\t\t\tif(Map[i][j]!=Map[i][j-1])\n\t\t\t\tLeft[i][j]=Left[i][j-1];\n\t\n\tfor(register int i=1;i<=N;i++)\n\t\tfor(register int j=M-1;j>0;j--)\n\t\t\tif(Map[i][j]!=Map[i][j+1])\n\t\t\t\tRight[i][j]=Right[i][j+1];\n\t//\u5bf9\u6bcf\u4e2a\u70b9\u7684\u5de6\u53f3\u8fdb\u884c\u5ef6\u4f38\n\tACanswer1=ACanswer2=1;//\u957f\u65b9\u5f62\u548c\u6b63\u65b9\u5f62\u7684\u521d\u59cb\u503c\u90fd\u4e3a1\n\tfor(register int i=1;i<=N;i++){\n\t\tfor(register int j=1;j<=M;j++){\n\t\t\tif((i>1)&&(Map[i][j]!=Map[i-1][j])){//\u5982\u679c\u6b64\u4f4d\u7f6e\u4e0a\u65b9\u8fd8\u6709\u4f4d\u7f6e\uff0c\u5e76\u4e14\u4e0e\u4e0a\u65b9\u5408\u6cd5\uff08\u4e0a\u65b9\u4e3a0\u6211\u4e3a1\uff0c\u4e0a\u65b9\u4e3a1\u6211\u4e3a0\uff09\n\t\t\t\tLeft[i][j]=max(Left[i][j],Left[i-1][j]);\n\t\t\t\tRight[i][j]=min(Right[i][j],Right[i-1][j]);//\u5bf9\u5de6\u53f3\u4e24\u8fb9\u8fdb\u884c\u622a\u53d6\uff08\u53d6\u6700\u5c0f\u503c\uff09\n\t\t\t\tUp[i][j]=Up[i-1][j]+1;//\u521d\u59cb\u5316\uff08\u4e2d\u8f74++\uff09\n\t\t\t}\n\t\t\tint Num1=Right[i][j]-Left[i][j]+1;//\u7ec6\u8282\uff0c\u5de6\u53f3\u95f4\u9694\u662f\u8fd8\u8981\u51cf\u4e00\u7684\n\t\t\tint Num2=min(Num1,Up[i][j]);//\u627e\u5230\u957f\u548c\u5bbd\u8c01\u77ed\uff08\u7528\u4e8e\u8ba1\u7b97\u6b63\u65b9\u5f62\u9762\u79ef\uff09\n\t\t\tACanswer1=max(ACanswer1,Num2*Num2);//\u6b63\u65b9\u5f62\u9762\u79ef\u6253\u7c7b\n\t\t\tACanswer2=max(ACanswer2,Num1*Up[i][j]);//\u957f\u65b9\u5f62\u9762\u79ef\u6253\u7c7b\n\t\t}\n\t}\n\tcout<<ACanswer1<<endl;\n\tcout<<ACanswer2<<endl;\n\treturn 0;//\u8f93\u51fa\u5e76\u7ed3\u675f\n}\n```\n\n# **\u7ed3\u8bed\uff1a**\n\u795d\u5927\u5bb6\u5728NOIP2019\u4e2dRP++\uff01\uff01\uff01",
        "postTime": 1563453283,
        "uid": 86624,
        "name": "\u6d1b\u8c37Onlinejudge",
        "ccfLevel": 0,
        "title": "[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u9898\u89e3"
    },
    {
        "content": "\u52a8\u6001\u89c4\u5212\u3002\n\n\u5b9a\u4e49\u72b6\u6001dp(i, j): \u4ee5(i, j)\u4e3a\u53f3\u4e0b\u89d2\u7684\u6700\u5927\u77e9\u5f62\u5bbd\u9ad8\u3002\uff08\u7ed3\u6784\u4f53\u5b9e\u73b0\uff09\n\n\u72b6\u6001\u8f6c\u79fb\uff1a\n\n- \u521d\u503c\uff1adp(1,1)=(1,1)\n\n- \u5bf9\u4e8e\u6700\u4e0a\u4e00\u884c\u7684\u70b9\u6765\u8bf4, \u77e9\u5f62\u7684\u9ad8\u53ea\u80fd\u662f1. \u8003\u8651\u5bbd: \u5982\u679c\u5b83\u548c\u5de6\u8fb9\u7684\u90a3\u4e2a\u70b9\u540c\u8272, \u5bbd\u53ea\u80fd\u662f1; \u5426\u5219, \u662f\u5de6\u8fb9\u7684\u90a3\u4e2a\u70b9\u7684\u5bbd+1.\n\n- \u6700\u5de6\u4e00\u5217\u7684\u70b9\u540c\u7406.\n\n- \u8003\u8651\u5269\u4e0b\u7684\u70b9. \n\n 1. \u5982\u679c\u5b83\u548c\u4e0a\u9762\u7684\u70b9\u540c\u8272, \u53c8\u548c\u5de6\u8fb9\u7684\u70b9\u540c\u8272, \u6700\u5927\u77e9\u5f62\u7684\u5bbd\u9ad8\u662f(1,1).\n \n 1. \u5982\u679c\u5b83\u548c\u4e0a\u9762\u7684\u70b9\u540c\u8272, \u5374\u548c\u5de6\u8fb9\u7684\u70b9\u5f02\u8272, \u5b83\u5c31\u76f8\u5f53\u4e8e\u6700\u4e0a\u4e00\u884c\u7684\u70b9.\n \n 1. \u5982\u679c\u5b83\u548c\u4e0a\u9762\u7684\u70b9\u5f02\u8272, \u5374\u548c\u5de6\u8fb9\u7684\u70b9\u540c\u8272, \u5b83\u5c31\u76f8\u5f53\u4e8e\u6700\u5de6\u4e00\u5217\u7684\u70b9.\n \n 1. \u5982\u679c\u5b83\u548c\u4e0a\u9762\u7684\u70b9\u5f02\u8272, \u53c8\u548c\u5de6\u8fb9\u7684\u70b9\u5f02\u8272, \u5b83\u9762\u4e34\u4e24\u79cd\u9009\u62e9:\n \n \t1. \"\u5c3d\u529b\u5730\"\u5e76\u5165**\u4ee5\u81ea\u5df1\u5de6\u8fb9\u7684\u70b9\u4e3a\u53f3\u4e0b\u89d2\u7684\u6700\u5927\u77e9\u5f62**(\u7b80\u79f0\u4e3a\u5de6\u8fb9\u77e9\u5f62). \u6240\u8c13\"\u5c3d\u529b\u5730\", \u662f\u6307\u91c7\u7528\u5de6\u8fb9\u77e9\u5f62\u7684\u5bbd+1\u4f5c\u4e3a\u81ea\u5df1\u7684\u5bbd; \u4f46\u662f, \u56e0\u4e3a\u8981\u8003\u8651\u81ea\u5df1\u4e0a\u9762\u7684\u90a3\u4e9b\u70b9\u662f\u5426\u9ed1\u767d\u76f8\u95f4, \u81ea\u5df1\u7684\u9ad8\u53ef\u80fd\u6bd4\u5de6\u8fb9\u77e9\u5f62\u7684\u9ad8\u8981\u5c0f. \u81ea\u5df1\u4e0a\u9762\u7684\u70b9\u662f\u5426\u9ed1\u767d\u76f8\u95f4, \u5c31\u8981\u770b**\u4ee5\u81ea\u5df1\u4e0a\u9762\u7684\u70b9\u4e3a\u53f3\u4e0b\u89d2\u7684\u6700\u5927\u77e9\u5f62**(\u4e0a\u9762\u77e9\u5f62)\u7684\u9ad8\u5ea6\u5982\u4f55. \u81ea\u5df1\u7684\u9ad8\u5ea6\u5e94\u8be5\u662f\u4e0a\u9762\u77e9\u5f62\u7684\u9ad8\u5ea6+1\u548c\u5de6\u8fb9\u77e9\u5f62\u7684\u9ad8\u5ea6\u53d6\u6700\u5c0f\u503c.\n    \n    1. \u5c3d\u529b\u5730\u5e76\u5165\u4e0a\u9762\u77e9\u5f62. \u548c\u4e0a\u4e00\u79cd\u60c5\u51b5\u7c7b\u4f3c. \u91c7\u7528\u4e0a\u9762\u77e9\u5f62\u7684\u9ad8+1\u4f5c\u4e3a\u81ea\u5df1\u7684\u9ad8; \u81ea\u5df1\u7684\u5bbd, \u662f\u5de6\u8fb9\u77e9\u5f62\u7684\u5bbd+1\u548c\u4e0a\u9762\u77e9\u5f62\u7684\u5bbd\u53d6\u6700\u5c0f\u503c.\n    \n    \t\u9009\u62e9\u9762\u79ef\u8f83\u5927\u7684\u90a3\u4e00\u79cd\u8fdb\u884c\u8f6c\u79fb.\n\n\u6700\u540e\u628a\u6574\u4e2adp\u8868\u683c\u904d\u5386, \u627e\u5230\u6700\u5927\u77e9\u5f62\u9762\u79ef\u548c\u6700\u5927\u65b9\u5f62\u9762\u79ef.\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<ctime>\n#define For(i,a,b) for(int i=a; i<=b; i++)\n#define INF 0x3f3f3f3f\n#define w(i,j) dp[i][j].w\n#define h(i,j) dp[i][j].h\n#define area(i,j)  (w(i,j)*h(i,j))\n#define square(i,j) (w(i,j)==h(i,j))\n#define N 2018\nusing namespace std;\n\ninline int read(){\n\tint x=0; int sign=1; char c=getchar();\n\twhile(c>'9' || c<'0') {if (c=='-') sign=-1;c=getchar();}\n\twhile(c>='0' && c<='9'){x=(x<<3)+(x<<1)+c-'0';c=getchar();}\n\treturn x*sign;\n}\n\nstruct REC{\n\tint w; int h;\n\n};\n\nREC dp[N][N];\nint n,m;\nint map[N][N];\n\nint main(){\n#ifdef ERIC\n    freopen(\"1169.in\",\"r\",stdin);\n#endif\n\tn=read(), m=read();\n\tFor(i, 1, n) For(j, 1, m) map[i][j]=read();\n\n\tw(1, 1)=1, h(1, 1)=1;\n\t\n\tFor(i, 2, n){\n\t\tw(i, 1)=1;\n\t\th(i, 1)=(map[i][1]!=map[i-1][1]? h(i-1, 1)+1: 1);\n\t}\n\tFor(i, 2, m){\n\t\th(1, i)=1;\n\t\tw(1, i)=(map[1][i]!=map[1][i-1]? w(1, i-1)+1: 1);\n\t}\n\n\tFor(i, 2, n){\n\t\tFor(j, 2, m){\n\t\t\tif (map[i][j]==map[i-1][j] && map[i][j]==map[i][j-1]){\n\t\t\t\tw(i, j)=h(i, j)=1;\n\t\t\t} else if (map[i][j]==map[i-1][j]){\n\t\t\t\th(i, j)=1;\n\t\t\t\tw(i, j)=w(i, j-1)+1;\n\t\t\t} else if (map[i][j]==map[i][j-1]){\n\t\t\t\tw(i, j)=1;\n\t\t\t\th(i, j)=h(i-1, j)+1;\n\t\t\t} else {\n\t\t\t\tint s1=(w(i, j-1)+1)*min(h(i, j-1), h(i-1, j)+1);\n\t\t\t\tint s2=(h(i-1, j)+1)*min(w(i-1, j), w(i, j-1)+1);\n\t\t\t\tif(s1>s2){\n\t\t\t\t\tw(i, j)=w(i, j-1)+1;\n\t\t\t\t\th(i, j)=min(h(i, j-1), h(i-1, j)+1);\n\t\t\t\t} else {\n\t\t\t\t\th(i, j)=h(i-1, j)+1;\n\t\t\t\t\tw(i, j)=min(w(i-1, j), w(i, j-1)+1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ansa=1, ansb=1;\n\tFor(i, 1, n){\n\t\tFor(j, 1, m){\n\t\t\tif(square(i, j)) ansa=max(ansa, area(i, j));\n\t\t\tansb=max(ansb, area(i, j));\n\t\t}\n\t}\n\tcout<<ansa<<endl<<ansb<<endl; \n\n    return 0;\n}\n\n\n\n```",
        "postTime": 1541312938,
        "uid": 81690,
        "name": "EricWay1024",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "###\u540c\u6837\u611f\u8c22\u697c\u4e0b\u5927\u4f6c\u7684\u201c\u5982\u679c\u6a2a\u5750\u6807\u52a0\u7eb5\u5750\u6807\u4e3a\u5076\u6570\u90a3\u4e48\u53d6\u53cd\u201d\u7684\u601d\u60f3\uff0c\u8fd9\u6837\u5c31\u628a\u590d\u6742\u7684\u68cb\u76d8\u76f8\u95f4\u95ee\u9898\u8f6c\u5316\u4e3a\u6c42\u6700\u5927\u5b50\u77e9\u5f62\uff08\u8fd9\u70b9\u6bd4\u8f83\u4e0d\u597d\u60f3\u7684\uff0c\u6211\u5f53\u65f6\u505a\u5c31\u662f\u5f53\u7740\u5b9a\u7406\u505a\uff0c\u73b0\u5728\u4e5f\u4e0d\u662f\u5b8c\u5168\u6e05\u695a\uff0c\u5927\u5bb6\u53ef\u4ee5\u753b\u4e2a\u56fe\u770b\u4e00\u4e0b\uff09\u3002\n\n\n\u4e0e\u697c\u4e0b\u601d\u60f3\u5927\u540c\u5c0f\u5f02\uff0c\u5229\u7528\u60ac\u7ebf\u6cd5\uff08\u5927\u5bb6\u53ef\u4ee5\u53c2\u8003\u7f51\u4e0a\u8d44\u6599\uff09\u6c42\u51fa\u6240\u6709\u6781\u5927\u5b50\u77e9\u5f62\uff0c\u679a\u4e3e\u627e\u51fa\u6700\u5927\u5b50\u77e9\u5f62\uff08Ps\uff1a\u6700\u5927\u6b63\u65b9\u5f62\u8981\u4e48\u5c31\u662f\u6700\u5927\u5b50\u77e9\u5f62\uff0c\u8981\u4e48\u5c31\u5305\u542b\u5728\u6700\u5927\u5b50\u77e9\u5f62\u91cc\u9762\uff0c\u6211\u4eec\u53ea\u9700\u5728\u627e\u51fa\u7684\u6700\u5927\u5b50\u77e9\u5f62\u4e2d\u627e\u51fa\u5c0f\u8fb9\u5373\u53ef\uff09\u3002\n\n\n#\u6b63\u6587\n\n\n\u5176\u5b9e\u697c\u4e0b\u8fd8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u6211\u4eec\u53d1\u73b0hight[][]\uff0cleft[][]\uff0cright[][]\u6570\u7ec4\u5728\u5faa\u73af\u4e2d\u53ea\u9700\u8981\u5229\u7528\u5230\u4e0a\u4e00\u5c42\u7684\u6570\u636e\uff0c\u5373f[i-1][j]\uff0c\u8fd9\u6837\u6bcf\u4e2a\u6570\u7ec4\u5229\u7528\u7387\u5f88\u4f4e\uff08\u6bcf\u4e2a\u6570\u7ec4\u5728\u9012\u63a8\u5f0f\u4e2d\u53ea\u7528\u5230\u4e00\u6b21\uff09\u90a3\u4e48\u6211\u4eec\u53ef\u4e0d\u53ef\u4ee5\u6bcf\u6b21\u53ea\u8bb0\u4e0a\u4e00\u5c42\u7684\u72b6\u6001\u5462\uff1f\n\n\n##\u5f53\u7136\u662f\u53ef\u4ee5\u7684\u3002\n\n\n\u5f53\u6211\u4eec\u628a\u6570\u7ec4\u538b\u6210\u4e00\u7ef4\u7684\uff0c\u663e\u7136\u53d1\u73b0\u5f53\u5faa\u73af\u5230\u4e0b\u4e00\u884c\u65f6\uff0c\u6211\u7684\u6570\u7ec4\u6240\u5b58\u6570\u636e\u81ea\u7136\u662f\u4e0a\u4e00\u5c42\u8fd9\u4e2a\u5750\u6807\u7684\u6570\u636e\uff0c\u5373\u5f53\u672a\u66f4\u65b0\u8fd9\u4e00\u5c42f\u503c\u65f6\uff0cf[j]\u4e0ef[i-1][j]\u7b49\u6548\n\n\n\u90a3\u4e48\u6211\u4eec\u5f97\u5230\u9012\u63a8\u5f0f:\n\nf[j]=max(f[j],\u969c\u788d\u70b9\u6240\u5e26\u6765\u7684\u9650\u5236\u6761\u4ef6)\uff1b\uff08\u60f3\u60f3\uff0cright\u6570\u7ec4\u4e5f\u662fmax\u5417\uff1f\uff09\n\n\n\u90a3\u4e48\u73b0\u5728\u7684\u95ee\u9898\u5c31\u662f\uff0c\u969c\u788d\u70b9\u6240\u5e26\u6765\u7684\u9650\u5236\u6761\u4ef6\u662f\u4ec0\u4e48\u3002\n\nPS\uff1a\u624b\u91cc\u6ca1\u56fe\uff0c\u5927\u5bb6\u5c06\u5c31\u7740\u60f3\u8c61\u4e00\u4e0b23333333\n\n\u5bf9\u4e8e\u6bcf\u4e00\u884c\uff0c\u5f53\u4ece\u5de6\u5f80\u53f3\u9047\u5230\u4e00\u4e2a\u969c\u788d\u70b9\uff0c\u90a3\u4e48\u8fd9\u4e2a\u969c\u788d\u70b9\u7684\u53f3\u8fb9\u81ea\u7136\u53ea\u80fd\u5ef6\u4f38\u5230\u8fd9\u4e2a\u70b9\u7684\u53f3\u8fb9\uff0c\u4ece\u53f3\u5f80\u5de6\u4e5f\u662f\u4e00\u6837\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u5de7\u5999\u7684\u907f\u5f00\u4e86\u7528\u5355\u8c03\u6808\u5b9e\u73b0\u7684\u60ac\u7ebf\u5ef6\u4f38\u7684\u64cd\u4f5c\uff1b\n\n\u6211\u4eec\u8bbe\u5411\u5de6\u5ef6\u4f38\u7684\u9650\u5236\u6761\u4ef6\u4e3al\uff0c\u5411\u53f3\u5ef6\u4f38\u4e3ar\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u975e\u969c\u788d\u70b9\uff0c\u4e8e\u662f\u5c31\u6709\uff1a\n\n```cpp\nleft[j]=max(left[j],l+1);\nright[j]=min(right[j],r-1);\n```\n\u4e0b\u9762\u7684\u5de5\u4f5c\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u6211\u5c31\u76f4\u63a5\u4e0a\u4ee3\u7801\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint read(){\n    char ch;int f=1,x=0;\n    ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch == '-')f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){\n        x=x*10+ch-'0';\n        ch=getchar();\n    }\n    return x*f;\n}\nint n,m;\nint hight[2111],L[2111],R[2111];\nint l,r;\nint ans1,ans2;\nbool a[2111][2111];\ninline void work(int x){//\u4ee5x\u4f5c\u4e3a\u969c\u788d\u70b9\u6c42\u6700\u5927\u5b50\u77e9\u5f62\n    memset(hight,0,sizeof(hight));//\u8fd9\u91cc\u4e0d\u8981\u5fd8\u3002\n    for(int i=1;i<=m;i++)L[i]=1,R[i]=m;\n    for(int i=1;i<=n;i++){\n        l=0,r=m+1;\n        for(int j=1;j<=m;j++){\n            if(a[i][j] == x){\n                L[j]=1;\n                l=j;\n                hight[j]=0;\n            }\n            else{\n                hight[j]++;\n                L[j]=max(L[j],l+1);\n            }\n        }\n        for(int j=m;j>=1;j--){\n            if(a[i][j] == x){\n                R[j]=m;\n                r=j;\n            }//\u5bf9\u4e8e\u969c\u788d\u70b9\uff0c\u6211\u4eec\u8bb0\u4e0b\u5b83\u7684\u5750\u6807\uff0c\u7136\u540e\u5c06\u72b6\u6001\u8bb0\u4e3a\u521d\u72b6\u6001\u5373\u53ef\n            else R[j]=min(R[j],r-1);\n            int lc=min(hight[j],(R[j]-L[j]+1));\n            ans1=max(ans1,lc*lc);\n            ans2=max(ans2,(R[j]-L[j]+1)*hight[j]);\n        }\n    }\n}\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n    for(int j=1;j<=m;j++){\n        scanf(\"%d\",&a[i][j]);\n        if((i+j)%2==0)a[i][j]=!a[i][j];\n    }\n    work(0);\n    work(1);//\u4ee5\u9ed1\u767d\u68cb\u5b50\u4f5c\u4e3a\u969c\u788d\u70b9\u90fd\u8dd1\u4e00\u904d\u3002\n    printf(\"%d\\n%d\\n\",ans1,ans2);\n    return 0;\n}\n```",
        "postTime": 1508457304,
        "uid": 55644,
        "name": "shadow__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u8fd9\u91cc\u7ed9\u51fa\u5355\u8c03\u6808\u7684\u505a\u6cd5\n\n\n\nf[i][j]\u8868\u793a\u70b9(i,j)\u5411\u5de6 \u6700\u591a\u80fd\u5ef6\u4f38\u591a\u5c11 \n\n\u9996\u5148dp(\u9012\u63a8?.?)\u4e00\u4e0b\u6c42\u51faf[i][j]\n\nf[i][j]=1+f[i][j-1]\\*(a[i][j]^1==a[i][j-1]) \u5f53\u524d\u662f0,\u524d\u4e00\u4e2a\u4e00\u5b9a\u662f1;\u5f53\u524d\u662f1,\u524d\u4e00\u4e2a\u662f0\n\n\n\u7136\u540e\u6309\u7167\u5217i\u6765\u7b97,\u5bf9\u4e8e\u6bcf\u4e00\u5217\n\n\u4ece\u4e0a\u5230\u4e0b\u626b\u4e00\u904d\u8be5\u5217\u7684\u6bcf\u4e00\u884cj,\u5e76\u4e14\u7528\u4e00\u4e2a\u5355\u8c03\u6808\u7ef4\u62a4\n\n\u4e0a\u4e00\u5f20\u539f\u521b\u7684\u56fe:\n\n\u56fe\u7247\uff08wok\u4f20\u4e0d\u4e0a\u53bb...T.T\uff09\n\n\u5355\u8c03\u6808\u4e2d\u8981\u7ef4\u62a4 \u6bcf\u4e2a\u5143\u7d20\u7684f[][] \u81ea\u6808\u5e95\u5230\u6808\u9876\u9012\u589e\n\nstack[i]\u8868\u793a\u6808\u4e2d\u7b2ci\u4e2a\u5143\u7d20 \u5728\u539f\u5e8f\u5217\u4e2d\u7684 \u884c\u6570\n\n(\u5982\u56fe,\u659c\u7ebf\u8868\u793a \u56e0\u4e3a\u84dd\u8272\u6216\u7eff\u8272\u5143\u7d20\u7684\u538b\u5165 \u800c\u5f39\u51fa\u6808\u7684\u5143\u7d20)\n\n\u540c\u65f6\u8fd8\u8981\u7ef4\u62a4\u4e00\u4e2a\u91cfup[],\u8868\u793a\u5bf9\u4e8e\u6808\u4e2d\u7684\u5143\u7d20i,up[i]\u5230stack[i]\u4e4b\u95f4\u7684\u5143\u7d20(\u539f\u5e8f\u5217)\u90fd<=i\u5143    \u7d20\u7684\u957f\u5ea6\n\n\u5982\u56fe\u4e2d \u84dd\u8272\u548c\u7eff\u8272\u5143\u7d20\u7684up\n\n\u82e5\u5f53\u524d\u70b9(j,i)\u548c\u70b9(j-1,i)\u989c\u8272\u4e0d\u540c,\n\n\u82e5 f[j][i]>f[ stack[top] ][i]\n\n\u6808\u9876\u5411\u4e0b\u80fd\u5ef6\u4f38\u5230j-1,\u5411\u4e0a\u80fd\u5ef6\u4f38\u5230up[top](\u56e0\u4e3a\u6808\u4e2d\u5143\u7d20\u7684\u957f\u5ea6f[][]\u662f\u81ea\u5e95\u5230\u9876\u9012\u589e\u7684)\n\n\u6808\u9876\u80fd\u6784\u6210\u7684\u6700\u5927\u77e9\u5f62\u5c31\u662f \u6808\u9876\u5143\u7d20\u7684\u957f\u5ea6\\*(j-1-up[top]+1)\n\n\u77e9\u5f62\u548c\u6b63\u65b9\u5f62,\u66f4\u65b0\u4e00\u4e0b\u5c31\u884c\u4e86.\u6b63\u65b9\u5f62\u7684\u8fb9\u957f\u663e\u7136\u5c31\u662f \u6808\u9876\u5143\u7d20\u7684\u957f\u5ea6\u548cj-up[top]\u7684min\n\n\u5f39\u51fa\u6808\u9876,\u7ee7\u7eed\u5faa\u73af...\n\n\n\u82e5\u5f53\u524d\u70b9(j,i)\u548c\u70b9(j-1,i)\u989c\u8272\u76f8\u540c,\u8bf4\u660e j\u884c\u65e0\u6cd5 \u548cj-1\u53ca\u5176\u4e0a\u9762\u7684\u884c \u6784\u6210\u7b26\u5408\u8981\u6c42\u7684\u77e9\u5f62\n\n\u628a\u6808\u5f39\u7a7a,\u7136\u540e stack[top=1]=j...\n\n\n\u6bcf\u5f53\u5904\u7406\u5b8c\u4e00\u5217,\u6808\u90fd\u8981\u5f39\u7a7a... \u5f39\u7a7a\u4e0d(tou)\u8bb2(lan)\u4e86\u5427(\u6709\u4ee3\u7801~)\n\n\n\u65f6\u95f4\u590d\u6742\u5ea6 O(n^2)\n\n\n \n \n \n\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define N 2009\nusing namespace std;\nint n,m,a[N][N],f[N][N],ans1,ans2,stack[N],top,up[N];\nvoid clear(int i)//\u5f39\u7a7astack\n{\n    int max_down=stack[top];\n    while (top)\n        {\n            ans1=max(ans1,(max_down-up[top]+1)*f[ stack[top] ][i]);\n            ans2=max(ans2,min( max_down-up[top]+1,f[ stack[top] ][i] ));\n            top--;\n        }\n}\nint main()\n{\n    int i,j,k;\n    cin>>n>>m;\n    for (i=1;i<=n;i++)\n        for (j=1;j<=m;j++)\n            {\n                scanf(\"%d\",&a[i][j]);\n                f[i][j]=1+f[i][j-1]*( a[i][j]^1==a[i][j-1] );\n            }\n    for (i=1;i<=m;i++)\n        {\n            top=0;\n            for (j=1;j<=n;j++)\n                if(j==1||a[j][i]^1==a[j-1][i])\n                    {\n                        int max_up=j;\n                        while (top&&f[ stack[top] ][i]>f[j][i])\n                            {\n                                max_up=min(max_up,up[top]);//\u5176\u5b9e\u6c42up[]\u6709\u70b9\u50cf\u9012\u63a8...\n                                ans1=max(ans1,f[ stack[top] ][i]*(j-up[top]) );\n                                ans2=max(ans2, min( f[ stack[top] ][i],j-up[top] ) );\n                                top--;       //\u8fd9\u91ccans2\u53ea\u8bb0\u5f55\u4e86\u6b63\u65b9\u5f62de\u8fb9\u957f...\n                            }\n                        stack[++top]=j;\n                        up[top]=max_up;\n                    }\n                else\n                    {\n                        clear(i);\n                        stack[top=1]=j;//\u5f53\u524dj\u65e0\u6cd5\u548cj-1\u6784\u6210\u77e9\u5f62\u4e86,\u91cd\u65b0\u7ef4\u62a4\u4e00\u4e2a\u6808...\n                        up[top]=j;\n                    }\n            clear(i);\n        }\n    cout<<ans2*ans2<<endl<<ans1<<endl;\n}\n\n```",
        "postTime": 1478166665,
        "uid": 18141,
        "name": "a41881147",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u4f9d\u7136\u662f\u60ac\u7ebf\u6cd5\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u8fd9\u91cc\u68cb\u76d8\u5411\u5916\u6269\u5f20\u7684\u65f6\u5019\u9700\u8981\u6ee1\u8db3\u6761\u4ef6\n$$G[i][j] \\oplus G[i-1][j] != 0 $$\n\n\u6700\u5927\u6b63\u65b9\u5f62\u53ef\u4ee5\u7531\u8fc7\u7a0b\u4e2d\u6c42\u51fa\u7684\u6bcf\u4e00\u4e2a\u6781\u5927\u68cb\u76d8\u5f97\u5230\u3002\n\n```cpp\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\nconst int MAXN = 1017;\nint n, m;\nint G[MAXN][MAXN];\nint up[MAXN][MAXN];\nint l[MAXN][MAXN];\nint r[MAXN][MAXN];\n\nint main(){\n    cin >> n >> m;\n    for(int i = 1; i <= n; i++)\n        for(int j = 1; j <= m; j++)\n            cin >> G[i][j];\n    for(int i = 1; i <= n; i++)\n        for(int j = 2; j <= m; j++)\n            if(G[i][j] ^ G[i][j-1])\n                l[i][j] = l[i][j-1] + 1;\n\n    for(int i = 1; i <= n; i++)\n        for(int j = m - 1; j >= 1; j--)\n            if(G[i][j] ^ G[i][j+1])\n                r[i][j] = r[i][j+1] + 1;\n\n    int maxs = 0;\n    int k = 0;\n    for(int i = 1; i <= n; i++){\n        for(int j = 1; j <= m; j++){\n            if(i > 1 && G[i][j] ^ G[i-1][j])\n                up[i][j] = up[i-1][j] + 1;\n            if(up[i][j]){\n                l[i][j] = min(l[i-1][j], l[i][j]);\n                r[i][j] = min(r[i-1][j], r[i][j]);\n            }\n            //printf(\"## (%d, %d) %d %d %d\\n\", i, j, l[i][j], r[i][j], up[i][j]);\n            maxs = max(maxs, (up[i][j] + 1) * (l[i][j] + r[i][j] + 1));\n            k = max(k, min(up[i][j] + 1, l[i][j] + r[i][j] + 1));\n        }\n    }\n    cout << k * k << endl;\n    cout << maxs << endl;\n}\n\n\n\n```\n",
        "postTime": 1567490258,
        "uid": 137010,
        "name": "Skyler1017",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "## $ \\it\\bf UPD 2019.7.26 $\n\n### \u672c\u6765\u53ea\u5199\u4e86\u66b4\u529b\u7684\u65b9\u6cd5\uff0c\u4f46\u4e4b\u540e\u5b66\u4e86\u4e00\u4e0b\u60ac\u7ebf\u6cd5\uff0c\u4e24\u79cd\u65b9\u6cd5\u90fd\u5199\u5728\u4e0b\u65b9\u3002\n\n------------\n# Part 1 : \u7384\u5b66\u66b4\u529b\n\n------------\n\n\u5927\u4f6c\u90fd\u7528\u60ac\u7ebf\u6cd5\uff0c\u6211\u53ea\u4f1a\u66b4\u529bawa\n\n\u8fd9\u79cd\u9898\u578b\u89c1\u8fc7\u4e0d\u5c11\u4e86\uff0c\u8fd9\u9898\u53ea\u662f\u8981\u6c420\uff0c 1\u76f8\u95f4\u800c\u5df2\n\n\u4e00\u884c\u4e00\u884c\u5904\u7406\n\n\u6bcf\u6b21\u5904\u7406\u5f53\u524d\u884c\u65f6\u9884\u5904\u7406\u51fa\u5f53\u524d\u884c\u7684\u5404\u5217\u5411\u4e0a\u5ef6\u4f38\u7684\u6700\u957f\u9ad8\u5ea6\n\n\u7136\u540e\u5728\u5f53\u524d\u884c\u65f6\u679a\u4e3e\u77e9\u5f62(\u6b63\u65b9\u5f62)\u7684\u5de6\u4e0b\u89d2\uff0c\u7136\u540e\u4e0d\u65ad\u5411\u53f3\u62d3\u5c55\uff0c\u77e9\u5f62\u7684\u9ad8\u5ea6\u662f\u62d3\u5c55\u8fc7\u7a0b\u4e2d\u7684\u6700\u5c0f\u9ad8\u5ea6\u3002\u663e\u800c\u6613\u89c1\u7684\uff0c _**\u9762\u79ef=\u5f53\u524d\u62d3\u5c55\u5bbd\u5ea6 \u00d7 \u6700\u5c0f\u9ad8\u5ea6**_ \n\n\u6b63\u65b9\u5f62\u7279\u6b8a\u5904\u7406\u5373\u53ef\uff0c _**\u9762\u79ef=( min(\u5f53\u524d\u62d3\u5c55\u5bbd\u5ea6\uff0c\u6700\u5c0f\u9ad8\u5ea6) )^2**_\n\nPS\uff1a \u5bf9\u4e8e\u6b63\u65b9\u5f62\u6709\u4e2a\u4f18\u5316\uff0c\u9009\u5b9a\u5de6\u4e0b\u89d2\u5411\u53f3\u62d3\u5c55\u8fc7\u7a0b\u4e2d\uff0c\u6700\u5c0f\u9ad8\u5ea6\u53ea\u4f1a\u66f4\u5c0f\u4e0d\u4f1a\u66f4\u5927\uff0c\u6240\u4ee5\u5982\u679c(\u6700\u5c0f\u9ad8\u5ea6^2)\u6bd4\u7b54\u6848\u5c0f\u4e86\uff0c\u4fbf\u4e0d\u5fc5\u518d\u5411\u53f3\u62d3\u5c55\u4e86\n\n\u65f6\u95f4\u590d\u6742\u5ea6  _**O\uff08n^3\uff09**_ \n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define reg register\nconst int N = 2000 + 5;\n\nint n, m, a[N][N], h[N];\n\nvoid solve_sqr() { //\u6b63\u65b9\u5f62\uff0c\u77e9\u5f62\u66f4\u6709\u4ee3\u8868\u6027\uff0c\u6ce8\u91ca\u8be6\u89c1\u77e9\u5f62\uff0c\u6b63\u65b9\u5f62\u4ec5\u6709\u51e0\u5904\u4e0d\u540c\n    int ans=0;\n    for (reg int i=1; i<=n; ++i) {\n        if (i==1) for (reg int j=1; j<=m; ++j) h[j]=1;\n        else for (reg int j=1; j<=m; ++j) if (a[i][j]!=a[i-1][j]) ++h[j]; else h[j]=1; \n        for (reg int st=1; st<=m; ++st) {\n            int nh=h[st]; ans=max(ans, 1); \n            for (reg int j=st+1; j<=m; ++j) {\n                if (a[i][j]==a[i][j-1]) break;\n                nh=min(nh, h[j]);\n                ans=max(ans, min(nh, j-st+1)*min(nh, j-st+1));\n                if (ans >= nh*nh) break; //\u4e0a\u9762\u63d0\u5230\u7684\u4f18\u5316\n            }\n        }\n    }\n    printf(\"%d\\n\", ans);  \n}\n\nvoid solve_rec() { //\u77e9\u5f62\n    int ans=0;\n    for (reg int i=1; i<=n; ++i) {\n        if (i==1) for (reg int j=1; j<=m; ++j) h[j]=1;\n        else for (reg int j=1; j<=m; ++j) if (a[i][j]!=a[i-1][j]) ++h[j]; else h[j]=1;  //\u9884\u5904\u7406\u5411\u4e0a\u7684\u9ad8\u5ea6\n        for (reg int st=1; st<=m; ++st) { //\u679a\u4e3e\u8d77\u70b9\n            int nh=h[st]; ans=max(ans, h[st]); \n            for (reg int j=st+1; j<=m; ++j) { //\u5411\u53f3\u62d3\u5c55\n                if (a[i][j]==a[i][j-1]) break; //\u65e0\u6cd5\u5411\u53f3\u62d3\u5c55\uff0c\u8df3\u51fa\n                nh=min(nh, h[j]);\n                ans=max(ans, (j-st+1)*nh);\n            }\n        }\n    }\n    printf(\"%d\\n\", ans);  \n}\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (reg int i=1; i<=n; ++i)\n        for (reg int j=1; j<=m; ++j) scanf(\"%d\", &a[i][j]);\n    solve_sqr();\n    solve_rec();\n    return 0;\n}\n\n```\n\n\u66b4\u529b\u8fd8\u662f\u5f31\u592a\u591a\uff0c \u8fd9\u91cc\u53ea\u662f\u7ed9\u60f3\u6253\u66b4\u529b\u4f46\u662f\u6ca1\u6709\u601d\u8def\u7684\u540c\u5b66\u63d0\u4f9b\u601d\u8def\u3002~~\u8fd8\u662f\u5efa\u8bae\u5404\u4f4d\u540c\u5b66\u53bb\u5b66\u4e60\u4e00\u4e0b\u60ac\u7ebf\u6cd5~~ \u4e0b\u9762\u63d0\u4f9b\u60ac\u7ebf\u6cd5\n\n------------\n# Part 2 : \u60ac\u7ebf\u6cd5\n\n------------\n\nPS\uff1a\u5199\u8fd9\u4e00\u90e8\u5206\u4e3b\u8981\u662f\u52a0\u6df1\u81ea\u5df1\u7684\u7406\u89e3\uff0c\u5176\u4ed6\u5927\u4f6c\u53ef\u80fd\u5199\u7684\u6bd4\u6211\u66f4\u6e05\u695a\u4e9b\u3002\n\n\u66b4\u529b\u7684\u7b2c\u4e09\u91cd\u5faa\u73af\u662f\u80fd\u9884\u5904\u7406\u6389\u7684\u3002\n\n\u7528$l[i][j]$\u8868\u793a\u5411\u5de6\u80fd\u62d3\u5c55\u7684\u6700\u8fdc\u70b9\u3002\n\n\u7528$r[i][j]$\u8868\u793a\u5411\u53f3\u80fd\u62d3\u5c55\u7684\u6700\u8fdc\u70b9\u3002\n\n\u7528$up[i][j]$\u8868\u793a\u5411\u4e0a\u80fd\u62d3\u5c55\u7684\u6700\u8fdc\u70b9\u3002\n\n\u5148\u9884\u5904\u7406\u51fa$l[i][j]$\u548c$r[i][j]$\u3002\u5728\u6c42\u89e3\u65f6\u6c42$up[i][j]$\u3002\n\n\u6c42\u89e3\u65f6\uff0c\u5982\u679c\u80fd\u5411\u4e0a\u62d3\u5c55\uff0c \u66f4\u65b0$up[i][j]$, \u4e5f\u8981\u628a$l[i][j]$\u548c$r[i][j]$\u66f4\u65b0\u4e86\u3002\n\n\u66f4\u65b0\u7684\u516c\u5f0f\uff1a\n\n$ l[i][j]=max(l[i][j], l[i-1][j]); $\n$ r[i][j]=min(r[i][j], r[i-1][j]); $\n\n\u8fd9\u6837\u5c31\u80fd\u6c42\u51fa\u6bcf\u4e2a\u70b9\u5c3d\u91cf\u5411\u4e0a\u62d3\u5c55\u7684\u6700\u5927\u77e9\u5f62/\u6b63\u65b9\u5f62\u3002\n\n\u901a\u8fc7\u679a\u4e3e\u6bcf\u4e2a\u70b9\u5c31\u80fd\u4fdd\u8bc1\u4e00\u5b9a\u4f1a\u627e\u5230\u6700\u5927\u7684\u90a3\u4e2a\u77e9\u5f62/\u6b63\u65b9\u5f62\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6  _**O\uff08n^2\uff09**_ \n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define reg register\nconst int N = 2000 + 5;\n\nint n, m, a[N][N], l[N][N], r[N][N], up[N][N], ans1, ans2;\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (reg int i=1; i<=n; ++i)\n        for (reg int j=1; j<=m; ++j) {\n            scanf(\"%d\", &a[i][j]);\n            l[i][j]=r[i][j]=j; up[i][j]=1; \n        }\n    for (reg int i=1; i<=n; ++i)\n        for (reg int j=2; j<=m; ++j)\n            if (a[i][j]!=a[i][j-1]) l[i][j]=l[i][j-1];\n    for (reg int i=1; i<=n; ++i)\n        for (reg int j=m-1; j; --j)\n            if (a[i][j]!=a[i][j+1]) r[i][j]=r[i][j+1];\n    for (reg int i=1; i<=n; ++i)\n        for (reg int j=1; j<=m; ++j) {\n            if (i>1 && a[i][j]!=a[i-1][j]) {\n                l[i][j]=max(l[i][j], l[i-1][j]);\n                r[i][j]=min(r[i][j], r[i-1][j]);\n                up[i][j]=up[i-1][j]+1; \n            }\n            int a=r[i][j]-l[i][j]+1, b=min(a, up[i][j]);\n            ans1=max(ans1, b*b);\n            ans2=max(ans2, a*up[i][j]);\n        }\n    printf(\"%d\\n%d\\n\", ans1, ans2);\n    return 0;\n}\n\n```\n\n",
        "postTime": 1555594509,
        "uid": 26023,
        "name": "_Atyou",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "**~~\u66b4\u529b\u89e3\u6cd5  \u70b9\u4e2a\u8d5e\u518d\u8d70\u5457~~**\n\n## Sol ##\n\n[blog\u98df\u7528](http://www.caolaoshi.men/index.php/archives/zjoi2007-qpzz.html)\n\n\u66b4\u529b\u8fc7ZJOI\uff1f \u4e0d\u5b58\u5728\u7684\u3002\n\n\u597d\u5427\uff0c\u7684\u786e\u662f\u6253\u7684\u66b4\u529b\uff0c\u8fc7\u4e86\u6d1b\u8c37\u7684\u6c34\u6570\u636e\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5750\u6807(x,y)\u6211\u4eec\u7ef4\u62a4\u4e09\u4e2a\u503c\uff1a\u4ece\u8be5\u70b9\u5f00\u59cb\u5411\u4e0a\u548c\u5411\u5de6\u80fd\u8fbe\u5230\u7684\u6700\u8fdc\u7684\u70b9\u7684\u5750\u6807\u4ee5\u53ca\u8be5\u70b9\u662f\u9ed1\u662f\u767d\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u5728\u679a\u4e3e\u5750\u6807\u7684\u57fa\u7840\u4e0a\u53ea\u679a\u4e3e\u884c\u7684\u8303\u56f4\uff0c\u4e5f\u5c31\u662f\u4ece\u8fd9\u4e2a\u70b9\u5f00\u59cb\uff0c\u4e00\u76f4\u5230\u6700\u8fdc\u7684\u90a3\u4e2a\u70b9\uff0c\u5728\u679a\u4e3e\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u65ad\u5730\u66f4\u65b0\u6700\u9ad8\u70b9\uff0c\u4e0d\u65ad\u5730\u66f4\u65b0\u7b54\u6848\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u6709\uff1a\u4e00\u5b9a\u8981\u5728\u627e\u6bcf\u4e00\u5217\u7684\u65f6\u5019\u66f4\u65b0\u7b54\u6848\uff0c\u800c\u4e0d\u662f\u6c42\u51fa\u6700\u4f4e\u7684\u9ad8\u5ea6\u518d\u66f4\u65b0\u7b54\u6848\uff0c\u56e0\u4e3a\u6709\u53cd\u4f8b\uff0c\u8fd9\u91cc\u4e0d\u5217\u4e3e\u4e86\u3002\u8fd8\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff1a\u6211\u4eec\u5b58\u7684\u90fd\u662f\u5750\u6807\u800c\u4e0d\u662f\u957f\u5ea6\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u6c42\u89e3\u7684\u65f6\u5019\u9700\u8981\u628a\u5750\u6807\u76f8\u51cf\u6c42\u5f97\u957f\u5ea6\uff0c\u7136\u540e\u6c42\u7b54\u6848\u5c31\u597d\u4e86\u3002\n\n**\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n^3)**\n\n## Code ##\n\n```\n#include<iostream>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\n\nstruct Node {\n\tint h , l , b;\n};\nNode map[2005][2005];\nint n , m , ans1 = 0 , ans2 = 0;\n\nint main() {\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1; i<=m; i++)\n\t\tmap[1][i].h = 1;\n\tfor(int i=1; i<=n; i++)\n\t\tmap[i][1].l = 1; \n\tfor(int i=1; i<=n; i++)\n\t\tfor(int j=1; j<=m; j++) {\n\t\t\tscanf(\"%d\",&map[i][j].b);\n\t\t\tmap[i][j].b++;\n\t\t\tif(!map[i][j].l) {\n\t\t\t\tif(map[i][j - 1].b != map[i][j].b)\n\t\t\t\t\tmap[i][j].l = map[i][j - 1].l;\n\t\t\t\telse\n\t\t\t\t\tmap[i][j].l = j;\n\t\t\t}\n\t\t\tif(!map[i][j].h) {\n\t\t\t\tif(map[i - 1][j].b != map[i][j].b)\n\t\t\t\t\tmap[i][j].h = map[i - 1][j].h;\n\t\t\t\telse\n\t\t\t\t\tmap[i][j].h = i;\n\t\t\t}\n\t\t}\n\tfor(int i=1; i<=n; i++)\n\t\tfor(int j=1; j<=m; j++) {\n\t\t\tint mh = 0;\n\t\t\tfor(int k=j; k>=map[i][j].l; k--) {\n\t\t\t\tif(map[i][k].h > mh)\n\t\t\t\t\tmh = map[i][k].h;\n\t\t\tint len1 = j - k + 1 , len2 = i - mh + 1 , s1 = len1 * len2 , s2 = min(len1 * len1 , len2 * len2);\n\t\t\tans2 = max(ans2 , s2);\n\t\t\tans1 = max(ans1 , s1);\n\t\t\t}\n\t\t}\n\tprintf(\"%d\\n%d\",ans2,ans1);\n\treturn 0;\n}\n```\n\n\n  [1]: https://www.luogu.org/problemnew/show/P1169\n  [2]: https://www.lydsy.com/JudgeOnline/problem.php?id=1057",
        "postTime": 1533728967,
        "uid": 37427,
        "name": "\u66f9\u8001\u5e08",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u6807\u7b7e\u662fDP\uff08\u6211\u4e5f\u662f\u62b1\u7740\u5237dp\u7684\u5fc3\u6001\u5237\u7684\u8fd9\u9898\uff09\uff0c\u4f46\u662f\u6211\u770b\u5b8c\u9898\u9762\u4e4b\u540e\u5374\u60f3\u4e0d\u51fadp\u548b\u5199\uff0c\u53cd\u5012\u662f\u9a9a\u64cd\u4f5cO\uff08n^2logn\uff09\u5361\u8fc7\u4e86\u3002\u3002\u3002\u3002\u3002\n\n\u9996\u5148\u5bf9\u4e8e\u4e00\u4e2a\u53ef\u884c\u7684\u5b50\u77e9\u9635\uff0c\u6709\u4e24\u79cd\u53ef\u80fd\u6027\uff0c\u7b2c\u4e00\u4e2a\u662f\u884c\u6570\u52a0\u5217\u6570\u52a01/0\u4e3a\u5947\u6570\u7684\u68cb\u76d8 \u53e6\u4e00\u79cd\u5219\u662f\u5076\u6570\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5bf9\u7740\u4e24\u79cd\u60c5\u51b5\u5408\u7406\u679a\u4e3e\uff0c\u6211\u4eec\u679a\u4e3e\u5b50\u77e9\u9635\u7684\u5de6\u8fb9\u754c\uff0c\u7136\u540e\u5bf9\u4e8e\u8fd9\u4e2a\u8fb9\u754c\u5bfb\u627e\u6700\u5927\u77e9\u5f62\u4ee5\u53ca\u6b63\u65b9\u5f62\u3002\u5177\u4f53\u7684\u65b9\u6848\u662f\u5148\u7528\u4e8c\u7ef4\u5e76\u67e5\u96c6\u7ef4\u62a4\u6bcf\u4e00\u5217\u8fde\u7eed\u7684\u533a\u95f4\uff08\u5982\u56fe\u4e0a\u6a2a\u5411\u7684\u77e9\u5f62\u5c31\u662f\u4e00\u4e2a\u4e2a\u96c6\u5408\uff09\uff0c\u7136\u540e\u6211\u4eec\u5982\u679c\u77e5\u9053\u5bf9\u4e8e\u4e00\u4e2a\u77e9\u5f62\u7684\u957f\u5ea6\uff0c\u4e0a\u4e0b\u53ef\u4ee5\u5ef6\u4f38\u51e0\u4e2a\u683c\uff0c\u4e5f\u5c31\u662f\u8bf4\u5982\u679ci\u4e0a\u65b92\u683c\u4e4b\u540e\uff0c\u8be5\u683c\u5b50\u7684\u957f\u5ea6\u5c0f\u4e8e\u4e86i\u7684\u957f\u5ea6\uff0c\u90a3\u4e48\u5982\u4ee5i\u957f\u5ea6\u4e3a\u77e9\u5f62\u4e00\u8fb9\u957f\u5f80\u4e0a\u53ef\u6269\u5c55\u7684\u8ddd\u79bb\u5c31\u662f2 \u5373l[i]=2\uff0c\u540c\u7406\u53ef\u5f97r[i]\u3002\u5982\u4f55O(n)\u679a\u4e3e\u53c2\u7167\u7269i\uff0c\u66f4\u65b0\u7b54\u6848\u3002\u90a3\u4e48\u6700\u5173\u952e\u7684\u90e8\u5206\u6765\u4e86\u2014\u2014\u5982\u4f55\u6c42l r\u6570\u7ec4\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u5148\u8003\u8651\uff0c\u5982\u679cx\u662f\u6700\u957f\u7684\uff0c\u4e14\u65e0\u548cx\u540c\u957f\u7684\u77e9\u5f62\uff08a[i].w\uff09\uff0c\u90a3\u4e48l[i]=i-1,r[i]=i+1\u3002\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u5148\u6392\u5e8f\uff0c\u7136\u540e\u901a\u8fc7\u53cc\u5411\u94fe\u8868\u7684\u5220\u9664\u64cd\u4f5c\u7ef4\u62a4\u8be5\u5e8f\u5217\uff0c\u8fd9\u6837\u6bcf\u6b21\u5220\u6389\u6700\u5927\u7684\uff0c\u5c31\u80fd\u4f9d\u6b21\u5904\u7406\u51fa\u6240\u6709l r\u3002\u4f46\u662f\u5982\u679c\u76f8\u90bb\u4e24\u4e2a\u5143\u7d20\u76f8\u7b49\u5462\uff08\u6b64\u5904\u76f8\u90bb\u662f\u6307\u94fe\u8868\u4e2d\u76f8\u90bb\uff09\uff1f\u961f\u5217\u3002\u628a\u76f8\u7b49\u7684\u5165\u961f\u5217\uff0c\u76f4\u5230\u4e0d\u7b49\uff0c\u5168\u90e8\u5f39\u51fa\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(2n)\u6240\u4ee5\u5b8c\u5168\u6ca1\u95ee\u9898\u3002\u8fd9\u4e2a\u6837\u5b50\u5c31\u53ef\u4ee5O(n^2\\*\u5927\u5e38\u6570\\*logn\uff09\u5361\u8fc7\u4e86\uff08^.^\uff09!\n\n![](http://img.blog.csdn.net/20170926232822598?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUnVzdFN3b3JkX1JXWg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\n\u53e6\u9644\u849f\u84bb\u7684\u9898\u89e3\u94fe\u63a5\uff1ahttp://blog.csdn.net/rustsword\\_rwz/article/details/78108234\n\n\u4e0a\u4ee3\u7801\uff01\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define MN 2050\nint n,m,b[MN],fa[MN][MN],ha[MN][MN],lk1[MN],lk2[MN],l[MN],r[MN],ans=-2100000000,ans2=-2100000000;\nstruct lll{\n    int w,pos;\n}a[MN];\nbool cmp(lll a,lll b)\n{\n    return a.w>b.w;\n}\nint find(int x,int y)\n{\n    return fa[x][y]==y?y:fa[x][y]=find(x,fa[x][y]);\n}\nvoid work(int _)\n{\n    for(int i=1;i<=n;i++) for(int j=1;j<=m+1;j++) fa[i][j]=j;\n    for(int i=1;i<=n;i++)\n     for(int j=1;j<=m;j++)\n     {\n         if((ha[i][j]+i+j)%2==_    ) \n        fa[i][find(i,j)]=find(i,j+1);\n     }\n    for(int j=1;j<=m;j++)\n    {\n        for(int i=1;i<=n;i++)\n        {\n            b[i]=a[i].w=find(i,j)-j;\n            a[i].pos=i;lk1[i]=i+1;lk2[i]=i-1;\n        }\n        sort(a+1,a+1+n,cmp);\n        for(int k=1;k<=n;k++)\n        {\n            int i=a[k].pos;\n            l[i]=lk2[i];r[i]=lk1[i];\n            lk1[lk2[i]]=lk1[i];\n            lk2[lk1[i]]=lk2[i];\n        }\n        for(int i=1;i<=n;i++)\n        {\n            ans=max(ans,b[i]*(r[i]-l[i]-1));\n            ans2=max(ans2,min(b[i]*b[i],(r[i]-l[i]-1)*(r[i]-l[i]-1)));\n        }\n    }\n}\nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n     for(int j=1;j<=m;j++)\n     cin>>ha[i][j];\n    work(1);work(0);\n    cout<<ans2<<endl<<ans;\n    return 0;\n}\n```",
        "postTime": 1506439829,
        "uid": 19600,
        "name": "LittlePrincess",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u672c\u9898\u4ecb\u7ecd\u4e00\u79cd\u795e\u5947\u7684\u505a\u6cd5\u3002\n\n\n\u9996\u5148\u6309\u7167\u4e0b\u9762\u5404\u4f4d\u5927\u4f6c\u7684\u505a\u6cd5\uff0c\u5c06\u6a2a\u7eb5\u5750\u6807\u548c\u4e3a\u5076\u6570\u7684\u70b9\u53d6\u53cd\uff0ca[i][j] ^= (i ^ j) & 1;\u3002\n\n\u4e8e\u662f\u95ee\u9898\u5c31\u53d8\u4e3a\u6700\u5927\u540c\u8272\u7684\u6b63\u65b9\u5f62\u548c\u77e9\u5f62\u3002\n\n\u8fd9\u4e2a\u95ee\u9898\u663e\u7136\u662f\u7528\u5355\u8c03\u6808\u505a\u3002\u7136\u800c\u6211\u5199\u7684\u662f\u7c7b\u4f3c\u5e76\u67e5\u96c6\u7684\u5199\u6cd5\u3002\n\n\u5927\u81f4\u505a\u6cd5\u5982\u4e0b\uff1a\n\n1.\u9884\u5904\u7406\u51fah[i][j]\u8868\u793ai,j\u8fd9\u4e2a\u70b9\u5411\u53f3\u6700\u5927\u80fd\u6269\u5c55\u5230\u7684\u957f\u5ea6\u3002\u8fd9\u4e2aO(n^2)\u5c31\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6765\u3002\n\n2.\u6211\u4eec\u679a\u4e3e\u6bcf\u4e00\u5217\u4f5c\u4e3a\u77e9\u5f62\u7684\u5e95\u8fb9\uff0cl[i]\u8868\u793a\u5f53\u524d\u5217\u7b2ci\u4e2a\u70b9\u5411\u4e0a\u80fd\u6269\u5c55\u5230\u7684\u7236\u4eb2\uff0cr[i]\u540c\u7406\u8868\u793a\u5411\u4e0b\u80fd\u6269\u5c55\u5230\u7684\u7236\u4eb2\u3002\n\n\uff08\u8fd9\u91cc\u4e3a\u4ec0\u4e48\u8bf4\u662f\u7236\u4eb2\u5462\uff0c\u56e0\u4e3a\u6211\u4eec\u8981\u7528\u5230\u5e76\u67e5\u96c6\u8def\u5f84\u538b\u7f29\u7684\u601d\u60f3\uff0c\u5148\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u7236\u4eb2\uff0c\u67e5\u8be2\u7684\u65f6\u5019\u987a\u4fbf\u8def\u5f84\u538b\u7f29\uff09\n\n3.\u7b2cj\u5217\u7684n\u4e2a\u70b9\uff0c\u6211\u4eec\u6309\u7167h[i][j]\u7684\u5927\u5c0f\u4ece\u5927\u5230\u5c0f\u5c06\u70b9\u63d2\u5165\uff0c\u539f\u56e0\u662f\u5982\u679c\u8fd9\u4e2ah[i][j]\u8981\u4f5c\u4e3a\u77e9\u5f62\u7684\u4e00\u6761\u8fb9\u957f\u7684\u8bdd\uff0c\u6211\u4eec\u8981\u4fdd\u8bc1\u5b83\u4e24\u8fb9\u7684h\u90fd\u5927\u4e8e\u7b49\u4e8e\u5b83\uff0c\u5982\u679c\u5c0f\u4e8e\u5219\u65e0\u6cd5\u6269\u5c55\u3002\u63d2\u5165\u4e00\u4e2a\u70b9\u4e4b\u540e\uff0c\u6211\u4eec\u770b\u4e00\u770b\u5b83\u4e24\u8fb9\u7684\u70b9\u6709\u6ca1\u6709\u5df2\u7ecf\u63d2\u5165\uff0c\u5982\u679c\u5df2\u7ecf\u63d2\u5165\u4e86\u5c31\u66f4\u65b0l[]\u548cr[]\u3002\n\n\u8fd9\u6bb5\u4ee3\u7801\u957f\u8fd9\u6837\u3002k\u662f\u5f53\u524d\u7684\u6a2a\u5750\u6807\uff0cvis[]\u5c31\u662f\u8bb0\u5f55\u5f53\u524d\u70b9\u6709\u6ca1\u6709\u63d2\u5165\u3002\n\n```cpp\nif (k > 1 && vis[k - 1] && a[k][j] == a[k - 1][j]){\n    l[k] = k - 1; r[k - 1] = k;\n}\nif (k < n && vis[k + 1] && a[k][j] == a[k + 1][j]){\n    l[k + 1] = k; r[k] = k + 1;\n}\n```\n4.\u6700\u540e\u53ea\u8981\u8ba1\u7b97\u4e00\u4e0b\u6bcf\u4e2a\u77e9\u5f62\u7684\u9762\u79ef = (getright(k) - getleft(k) + 1) \\* h[k][j]\u3002\n\n\u8fd9\u91cc\u7684getleft\u548cgetright\u5c31\u7528\u5230\u4e86\u5e76\u67e5\u96c6\u91cc\u7684\u627e\u7236\u4eb2\u7684\u505a\u6cd5\u3002\n\n\u8fd9\u5c31\u662f\u627e\u6700\u5927\u540c\u8272\u77e9\u5f62\u7684\u505a\u6cd5\u3002\n\n\u6700\u5927\u6b63\u65b9\u5f62\u5176\u5b9e\u53ea\u8981\u5bf9\u4e8e\u6bcf\u4e2a\u77e9\u5f62\u90fd\u7b97\u4e00\u4e0b\u8fd9\u4e2a\u77e9\u5f62\u91cc\u7684\u6700\u5927\u6b63\u65b9\u5f62\u7684\u9762\u79ef\u5c31\u53ef\u4ee5\u4e86\uff0c\u56e0\u4e3a\u5982\u679c\u6709\u4e00\u4e2a\u6b63\u65b9\u5f62\u6bd4\u539f\u6765\u7684\u9762\u79ef\u5927\uff0c\u5b83\u80af\u5b9a\u4f1a\u88ab\u4ee5\u4e0a\u627e\u77e9\u5f62\u7684\u8fc7\u7a0b\u4e2d\u627e\u5230\uff0c\u8fd9\u4e2a\u5f88\u5bb9\u6613\u60f3\u901a\u3002\n\n\n\u4e0a\u9762\u6709\u4e9b\u6ca1\u770b\u61c2\u7684\u53ef\u4ee5\u770b\u4e0b\u5b8c\u6574\u4ee3\u7801\u518d\u7406\u89e3\u4e0b~\uff1a\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n\nconst int N = 2010;\nint h[N][N], l[N], r[N], a[N][N];\nbool vis[N];\nint n, m;\n\nstruct Node{\n    int len, id;\n    bool operator < (const Node &other) const {\n        return len > other.len;\n    }\n}tmp[N];\n\ninline int getleft(int v)\n{\n    return l[v] == v ? v : l[v] = getleft(l[v]);\n}\n\ninline int getright(int v)\n{\n    return r[v] == v ? v : r[v] = getright(r[v]);\n}\n\nvoid solve()\n{\n    int ans1 = 0, ans2 = 0;\n    for (int i = 1; i <= n; i ++){\n        h[i][m] = 1;\n        for (int j = m - 1; j >= 1; j --)\n            if (a[i][j] == a[i][j + 1]) h[i][j] = h[i][j + 1] + 1;\n            else h[i][j] = 1;\n    }\n    for (int j = 1; j <= m; j ++){\n        for (int i = 1; i <= n; i ++){\n            tmp[i].len = h[i][j];\n            tmp[i].id = i;\n            vis[i] = 0;\n            l[i] = r[i] = i;\n        }\n        sort(tmp + 1, tmp + n + 1);\n        for (int i = 1; i <= n; i ++){\n            int k = tmp[i].id;\n            vis[k] = 1;\n            if (k > 1 && vis[k - 1] && a[k][j] == a[k - 1][j]){\n                l[k] = k - 1; r[k - 1] = k;\n            }\n            if (k < n && vis[k + 1] && a[k][j] == a[k + 1][j]){\n                l[k + 1] = k; r[k] = k + 1;\n            }\n            int a = getright(k) - getleft(k) + 1;\n            int b = tmp[i].len;\n            ans1 = max(ans1, min(a, b) * min(a, b));\n            ans2 = max(ans2, a * b);\n        }\n    }\n    printf(\"%d\\n%d\\n\", ans1, ans2);\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i ++)\n        for (int j = 1; j <= m; j ++){\n            scanf(\"%d\", &a[i][j]);\n            a[i][j] ^= (i ^ j) & 1;\n        }\n    solve();\n    return 0;\n}\n```",
        "postTime": 1502854910,
        "uid": 19722,
        "name": "fy0123",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u601d\u8def\uff1a dp \uff08\u505a\u4e86\u597d\u4e45\uff0c\u8fd8\u662f\u592a\u5f31\u4e86\uff09\n\n\u505a\u6cd5\uff1a\u6c42\u51fa\u6bcf\u4e2a\u70b9\u5f00\u59cb\u7684\u6700\u5927\u9ad8\u5ea6\u53ca\u5411\u5de6\u5411\u53f3\u6269\u5c55\u7684\u6700\u5927\u957f\u5ea6\uff0c\u7136\u540e\u4ece\u6bcf\u4e2a\u70b9\u5f00\u59cb\u679a\u4e3e\u6c42\u51faans1\uff0cans2\uff1b\n\n\u6ce8\u610f\uff1a\u6c42\u5f97l\uff0cr\u5305\u542b\u4e86\u8be5\u70b9\uff0c\u6240\u4ee5\u64cd\u4f5c\u65f6\u8981 -1\uff1b\n\n\nc++\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int N = 2e3 + 2;\nint map[N][N],l[N][N],r[N][N],h[N][N],n,m,ans1,ans2;\ninline void read(int&x)\n{\n    x = 0;int sign = 1;char c;\n    do{ c = getchar();if(c == '-')sign = -1; } while(c < '0' || c >'9');\n    do{ x = x*10 + c - '0';c = getchar();}     while(c <= '9' && c >='0');\n    x *= sign;\n}\nint main()\n{\n    read(n);read(m);\n    for(int i = 1;i <= n;i++)\n        for(int j = 1;j <= m;j++)\n            read(map[i][j]);\n    for(int i = 1;i <= n;i++)\n    {\n        for(int j = 1;j <= m;j++)\n            if(map[i][j] != map[i][j-1]) l[i][j] = l[i][j-1] + 1;\n            else  l[i][j] = 1;\n        for(int j = m;j ;j--)\n            if(map[i][j] != map[i][j+1]) r[i][j] = r[i][j+1] + 1;\n            else  r[i][j] = 1;\n    }\n    for(int i = 2;i <= n;i++)\n        for(int j = 1;j <= m;j++)\n            if(map[i][j] != map[i-1][j])\n            {\n                h[i][j] += h[i-1][j] + 1;\n                l[i][j] = min(l[i][j],l[i-1][j]);\n                r[i][j] = min(r[i][j],r[i-1][j]);\n            }\n    for(int i = 1;i <= n;i++)\n        for(int j = 1;j <= m;j++)\n        {\n            int tmp = min(h[i][j]+1,l[i][j] + r[i][j] - 1);\n            ans1 = max(ans1,tmp * tmp);\n            ans2 = max(ans2,(h[i][j] + 1) * (l[i][j] + r[i][j] - 1));\n        }\n    cout<<ans1<<endl<<ans2<<endl;\n    return 0;\n}\n\u63a8\u5e7fblog\uff1a<http://tgotp.science>\n```",
        "postTime": 1498284739,
        "uid": 23087,
        "name": "Tgotp",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u6211\u7684\u505a\u6cd5\u53c2\u8003\u4e86\u5e95\u90e8\u67d0\u4f4d\u5927\u795e\uff0c\u5e76\u4e14\u8865\u5168\u4e86\u4ed6\u7ed9\u51fa\u7684\u4e0d\u5b8c\u6574\u7684\u4ee3\u7801\n\n\n\u8fd9\u9053\u9898\u76ee\u6709\u4e24\u95ee\uff0c\u7b2c\u4e00\u95ee\u7684\u96be\u5ea6\u5927\u7ea6\u662f\u666e\u53ca\n\n\n\u7b2c\u4e8c\u95ee\u5927\u7ea6\u662f\u7701\u9009-\n\n\n\u9996\u5148\u6211\u4eec\u8003\u8651\u8bfb\u5165\uff0c\u6211\u4eec\u8ba9a[i][j]^=(i^j)&1;\n\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u628a\u9898\u76ee\u8f6c\u6362\u6210\u4e86\u6c42\u6700\u5927\u76f8\u540c\u503c\u7684\u6b63\u65b9\u5f62&&\u77e9\u5f62\u95ee\u9898\n\n\n1.\u5bf9\u4e8e\u6b63\u65b9\u5f62\n\n\u6211\u4eec\u53ea\u9700\u8981\u5224\u65ad\u4ed6\u7684\u4e0a\uff0c\u5de6\uff0c\u5de6\u4e0a\u4e09\u4e2a\u65b9\u5411\u5373\u53ef\n\n\u65b9\u7a0b:\n\n```cpp\n1 dps[i][j]=min\n2      (\n3          min(dps[i-1][j-1],dps[i][j-1]),\n4     \u3000 min(dps[i-1][j-1],dps[i-1][j])    \n5      )+1;\n```\n\u524d\u63d0\u6761\u4ef6\uff1a\n1 a[i][j]==a[i][j-1]&&a[i][j]==a[i-1][j-1]&&a[i][j]==a[i-1][j]\n\n\n2.\u5bf9\u4e8e\u77e9\u5f62\n\n\u6211\u4eec\u7528dpr1\u8868\u793a\u5728\u6bcf\u4e00\u4e2a\u70b9\u5904\uff0c\u5411\u4e0a\u679a\u4e3e\u76f8\u540c\u7684\u503c\u6240\u80fd\u5230\u8fbe\u7684\u6700\u957f\u957f\u5ea6\n\ndpr2\u8868\u793a\u5728\u6bcf\u4e00\u4e2a\u70b9\u5904\uff0c\u5411\u4e0b\u679a\u4e3e\u76f8\u540c\u7684\u503c\u6240\u80fd\u5230\u8fbe\u7684\u6700\u957f\u957f\u5ea6\n\n\uff08\u60ac\u7ebf\u7b97\u6cd5\uff09\n\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u66b4\u529b\u679a\u4e3e\u884c\u548c\u5217\uff0c\n\n\u5bf9\u4e8e\u6bcf\u4e00\u5217\uff0cdpr1\u548cdpr2\u5fc5\u987b\u6bcf\u6b21\u90fd\u53d6\u6700\u5c0f\u503c\uff08\u4fdd\u8bc1\u76f8\u540c\u989c\u8272\uff09\n\n\n\u7b54\u6848\u7684\u66f4\u65b0\uff1a\n\n 1 ans2=max(ans2,(j-maxlong+1)\\*(maxup+maxdown-1)); \n\n\u7528\u5f53\u524d\u7684\u5217\u51cf\u53bb\u5728\u5b83\u4e4b\u524d\u7684\u2018\u6700\u540e\u4e00\u4e2a\u4e0d\u540c\u7684\u503c+1\u2019\uff08\u4e5f\u5c31\u662fmaxlong\uff09\\* \u6700\u5927\u7684\u4e0a\u4e0b\u8fb9\u754c\n\n\n\u987a\u4fbf\u63d0\u9192\u4e00\u53e5\uff0c\u8fd9\u9053\u9898\u6570\u636e\u6bd4\u8f83\u6c34\uff0c\u5728\u6d1b\u8c37\u4e0a\u80fdAC\u4e0d\u4ee3\u8868\u80fd\u5728\u6bd4\u8d5b\u4e2dAC\n\n\n    \n    \n    \n    \n        \n    \n    \n    \n    \n        \n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<queue>\nusing namespace std;\nconst int MAXN=2001;\nint a[MAXN][MAXN];\nint read(int & n)\n{\n    int flag=0,x=0;char c='/';\n    while(c<'0'||c>'9'){c=getchar();if(c=='-')flag=1;}\n    while(c>='0'&&c<='9')x=x*10+(c-48),c=getchar();\n    if(flag)n=-x;else n=x;\n}\nint n,m;\nint dps[MAXN][MAXN];\nint dpr1[MAXN][MAXN];\nint dpr2[MAXN][MAXN];\nint ans1,ans2;\nvoid square()\n{\n    for(int i=0;i<n;i++)\n        for(int j=0;j<m;j++)\n            dps[i][j]=1;        \n    for(int i=0;i<n;i++)\n        for(int j=0;j<m;j++)\n        {\n            if(a[i][j]==a[i][j-1]&&a[i][j]==a[i-1][j-1]&&a[i][j]==a[i-1][j])\n            {\n                dps[i][j]=min\n                         (\n                          min(dps[i-1][j-1],dps[i][j-1]),\n                          min(dps[i-1][j-1],dps[i-1][j])    \n                         )+1;          \n                ans1=max(dps[i][j],ans1);\n            }\n        }\n    printf(\"%d\\n\",ans1*ans1);\n}\nvoid rectangle()\n{\n    for(int i=0;i<n;i++)\n        for(int j=0;j<m;j++)\n            dpr1[i][j]=dpr2[i][j]=1;\n    for(int i=1;i<n;i++)\n        for(int j=0;j<m;j++)\n        if(a[i][j]==a[i-1][j])\n            dpr1[i][j]=max(dpr1[i][j],dpr1[i-1][j]+1);\n    for(int i=n-2;i>=0;i--)\n        for(int j=0;j<m;j++)\n        if(a[i][j]==a[i+1][j])\n            dpr2[i][j]=max(dpr2[i][j],dpr2[i+1][j]+1);\n    ans2=1;\n    //print();\n    for(int i=0;i<n;i++)\n    {\n        int maxup=dpr1[i][0];\n        int maxdown=dpr2[i][0];\n        int maxlong=0;\n        for(int j=0;j<m;j++)\n        {\n            ans2=max(ans2,(j-maxlong+1)*(maxup+maxdown-1));\n            if(j==m-1)\n            break;\n            if(a[i][j]!=a[i][j+1])\n            {\n                maxlong=j+1;\n                maxup=dpr1[i][j+1];\n                maxdown=dpr2[i][j+1];\n            }\n            else\n            {\n                maxup=min(maxup,dpr1[i][j+1]);\n                maxdown=min(maxdown,dpr2[i][j+1]);\n            }\n        }\n    }\n    printf(\"%d\",ans2);\n}\nint main()\n{\n    //freopen(\"makechess.in\",\"r\",stdin);\n    //freopen(\"makechess.out\",\"w\",stdout);\n    read(n);read(m);\n    for(int i=0;i<n;i++)\n        for(int j=0;j<m;j++)\n        {\n            read(a[i][j]);\n            a[i][j]^=(i^j)&1;\n        }\n    square();\n    rectangle();\n    return 0;\n}\n\n```",
        "postTime": 1495705982,
        "uid": 36984,
        "name": "attack",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u5f88\u611f\u8c22\u697c\u4e0b\u7684\u9898\u89e3= =\u77ac\u95f4\u79d2\u61c2\n\n\u5f53\u7136\u697c\u4e0b\u7684\u697c\u4e0b\u7684\u5355\u8c03\u6808\u6211\u53ea\u80fd%%%\n\n\u9884\u5904\u7406\u8fd9\u4e2a\u4e1c\u897f\u5f88\u86cb\u75bc = =\u60f3\u4e0d\u5230\u5c31\u53ea\u6709n^6\u66b4\u529b\u4e86\n\n\u6b63\u65b9\u5f62\u8fd8\u662f\u6bd4\u8f83\u597d\u6c42\n\n\u6211\u4e5f\u6765\u8bf4\u8bf4\u957f\u65b9\u5f62= =\n\n\u9884\u5904\u7406\u51fa\u5411\u4e0a\u548c\u5411\u4e0b\u7684\u5ef6\u4f38\u4e2a\u6570\n\n\u7136\u540e\u6bcf\u4e00\u884c\u679a\u4e3e\n\n\u4e0a\u4e0b\u5ef6\u4f38\u957f\u5ea6\u53d6min\u518d\u4e58\u4ee5\u8fde\u7eed\u4e2a\u6570\u5c31\u662f\u9762\u79ef\u4e86\n\n\u6211\u53ea\u662f\u89c9\u5f97\u6211\u7684\u679a\u4e3e\u4ee5\u53ca\u7b97\u6700\u5927\u503c\u7684\u8fc7\u7a0b\u6bd4\u8f83\u7b80\u6d01\u4e00\u4e9b= =\n\n```cpp\n\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nconst int maxn=2000+10;\nconst int INF=(1<<30);\n\nint map[maxn][maxn];\nint dp1[maxn][maxn],dp0[maxn][maxn];\nint n,m;\n\nvoid read(int &x)\n{\n    x=0; char ch=getchar();\n    for(;ch<'0'||ch>'9';ch=getchar());\n    for(;ch>='0'&&ch<='9';ch=getchar()) x=x*10+ch-'0';\n}\n\nvoid init_data()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=m;j++)\n      {\n          read(map[i][j]);\n          if((i+j)%2==0) map[i][j]=!map[i][j];\n      }\n}\n\nint z()\n{\n    int ret=0;\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=m;ret=max(ret,dp1[i][j]),j++)\n        if(i>1&&j>1&&map[i][j]==map[i][j-1]&&map[i][j-1]==map[i-1][j]&&map[i-1][j]==map[i-1][j-1])\n          dp1[i][j]=min(dp1[i-1][j-1],min(dp1[i-1][j],dp1[i][j-1]))+1;\n        else dp1[i][j]=1;\n    return  ret*ret;\n}\n\nint up[maxn][maxn],down[maxn][maxn];\nint c()\n{\n    int ret=0,upmax,downmax;\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=m;j++)\n        if(i>1&&map[i][j]==map[i-1][j])\n          up[i][j]=up[i-1][j]+1;\n        else up[i][j]=0;\n    for(int i=n;i>=1;i--)\n      for(int j=1;j<=m;j++)\n        if(i<n&&map[i][j]==map[i+1][j])\n          down[i][j]=down[i+1][j]+1;\n        else down[i][j]=0;\n    int cnt=0;\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=m;j++)\n      {\n          if(j>1&&map[i][j]==map[i][j-1]) cnt++;\n          else \n        {\n              cnt=1;upmax=INF;downmax=INF;\n        }\n          upmax=min(upmax,up[i][j]);\n          downmax=min(downmax,down[i][j]);\n          ret=max(ret,cnt*(upmax+downmax+1));\n      }\n    return ret;\n}\n\nint main()\n{\n    init_data();\n    printf(\"%d\\n\",z());\n    printf(\"%d\\n\",c());\n    return 0;    \n}\n\n```(c/c++)\n",
        "postTime": 1450085544,
        "uid": 11280,
        "name": "QWsin",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u5148O(n^2)\u9884\u5904\u7406\uff0c\u53d8\u6210\u5bfb\u627e\u6700\u5927\u540c\u8272\u6b63\u65b9\u5f62\u3001\u77e9\u5f62\u3002\u53ea\u7528\u5bf9\u6bcf\u4e2a\u70b9\u8fdb\u884carr[i][j]^=(i^j)&1\u5c31\u884c\u4e86\u3002\n\n\u7b2c\u4e00\u95eeDP\u6bd4\u8f83\u88f8\uff0c\u4ee4f[i][j]\u8868\u793a(0,0)-(i,j)\u7684\u6700\u5927\u6b63\u65b9\u5f62\u8fb9\u957f\n\n\u82e5arr[i][j]=arr[i-1][j]=arr[i][j-1]=arr[i-1][j-1]\n\n\u5219f[i][j]=1+min{f[i-1][j],f[i][j-1],f[i-1][j-1]}\n\n\u5426\u5219f[i][j]=1\n\n\u8fb9\u754cf[0][j]=f[i][0]=1\n\n\u7b54\u6848\u5c31\u662f\u6700\u5927f[i][j]\u7684\u5e73\u65b9\n\n\u7b2c\u4e8c\u95ee\u6709\u70b9\u9ebb\u70e6\uff0c\u697c\u4e0b\u7684\u4e8c\u7ef4\u5355\u8c03\u961f\u5217\u7279\u522b\u5389\u5bb3\uff0c\u7136\u800c\u672c\u849f\u84bb\u5e76\u6ca1\u6709\u542c\u61c2\u3002\u6211\u662f\u5148dp\u9884\u5904\u7406\uff0c\u4ee4f1[i][j]\u662f(i,j)\u5411\u4e0a\u627e\u8fde\u7eed\u7684\u76f8\u540c\u989c\u8272\u6570\u91cf\uff0c\u5219f1[i][j]=(arr[i][j]==arr[i-1][j]?f1[i-1][j]+1:1)\uff0c\u8fd8\u662f\u6bd4\u8f83\u663e\u7136\u7684\uff0cf2\u662f\u5411\u4e0b\u627e\u8fde\u7eed\u7684\u76f8\u540c\u989c\u8272\u6570\u91cf\uff0c\u8ba1\u7b97\u65b9\u6cd5\u548cf1\u4e00\u6837\u3002\n\n\u7136\u540e\u679a\u4e3e\u884c\uff0c\u5bf9\u4e8e\u6bcf\u884c\u4e2d\u7684\u4e00\u6bb5\u540c\u8272\u533a\u95f4\uff0c\u8ba1\u7b97\u5b83\u4e0a\u4e0b\u5ef6\u5c55\u7684\u6700\u5927\u77e9\u5f62\uff0c\u8fd9\u4e2a\u77e9\u5f62\u7684\u9ad8\u663e\u7136\u5c31\u662f\u8fd9\u6bb5\u533a\u95f4\u4e2df1\u6700\u5c0f\u503c+f2\u6700\u5c0f\u503c-1\uff0c\u7136\u540e\u95ee\u9898\u5c31\u89e3\u51b3\u4e86\u3002\n\n\u6211\u4eec\u53ea\u7528\u7ef4\u62a4\u5f53\u524d\u679a\u4e3e\u5230\u7684f1\u3001f2\u7684\u6700\u5c0f\u503c\uff0c\u5728\u6bcf\u884c\u672b\u5c3e\u6216arr[i][j]!=arr[i][j-1]\u65f6\u66f4\u65b0ans\u5373\u53ef\n\n\u56e0\u4e3a\u4ee3\u7801\u6bd4\u8f83\u957f\uff0c\u6240\u4ee5\u53ea\u8d34\u4e0a\u6c42\u7b2c\u4e8c\u95ee\u7684\u4ee3\u7801\n\n```cpp\n\n/*\nconst int N = 2003;\nint n, m, ans;\nbool arr[N][N];\nint f1[N][N], f2[N][N];\n*/\n    for(int i = 0; i < n; ++i)\n        for(int j = 0; j < m; ++j)\n            f1[i][j] = f2[i][j] = 1;\n    \n    for(int i = 1; i < n; ++i)\n        for(int j = 0; j < m; ++j)\n            if(arr[i][j] == arr[i - 1][j])\n                f1[i][j] = max(f1[i][j], f1[i - 1][j] + 1);\n    for(int i = n - 2; i >= 0; --i)\n        for(int j = 0; j < m; ++j)\n            if(arr[i][j] == arr[i + 1][j])\n                f2[i][j] = max(f2[i][j], f2[i + 1][j] + 1);\n    ans = 1;\n    for(int i = 0; i < n; ++i)\n    {\n        int c1 = f1[i][0], c2 = f2[i][0];\n        int ibeg = 0;\n        for(int j = 0; j < m; ++j)\n        {\n            ans = max(ans, (j - ibeg + 1) * (c1 + c2 - 1));\n            if(j == m - 1)\n                break;\n            if(arr[i][j] != arr[i][j + 1])\n            {\n                c1 = f1[i][j + 1];\n                c2 = f2[i][j + 1];\n                ibeg = j + 1;\n            }\n            else\n            {\n                c1 = min(c1, f1[i][j + 1]);\n                c2 = min(c2, f2[i][j + 1]);\n            }\n        }\n    }\n    printf(\"%d\\n\", ans);\n\n```",
        "postTime": 1444639360,
        "uid": 9567,
        "name": "HOOCCOOH",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    },
    {
        "content": "\u8fd9\u9898\u6b63\u89e3\u5355\u8c03\u6808\uff0c\u4f46\u662f\u6211\u592a\u5f31\u4e86\uff0c\u6ca1\u60f3\u5230\u3002\u3002\u3002\u8111\u8865\u4e86\u4e00\u4e2a\u65b0\u7684\u505a\u6cd5\uff0c\u597d\u50cf\u8fd9\u7c7b\u9898\u90fd\u53ef\u4ee5\u8fd9\u4e48\u505a\uff0c\u611f\u89c9\u5f88\u66b4\u529b\u554a\n\n\u5148\u662f\u6807\u51c6\u7684\u60ac\u7ebf\u6cd5\uff0c\u8bb0\u5f55\u5230\u7b2cj\u5217\u65f6\uff0c1~n\u884c\u5206\u522b\u6700\u591a\u53ef\u4ee5\u5f80\u5de6\u5ef6\u4f38\u591a\u5c11\uff0c\u8bb0\u4e3aheight[i]\uff08\u8fd9\u6b65\u5bf9\u4e8e\u6bcf\u5217\u53ef\u4ee5O(n)\u66f4\u65b0\uff09\n\n\u7136\u540e\uff0c\u6b63\u89e3\u662f\u7528\u5355\u8c03\u6808\u7ef4\u62a4\u5bf9\u4e8e\u6bcf\u4e2a\u7b2ci\u884c\uff0c\u6700\u5c0f\u7684j\u5e76\u6ee1\u8db3height[j~i-1]\u90fd>=height[i]\uff0c\u5373\u90fd\u53ef\u4ee5\u548c\u7b2ci\u884c\u4e00\u8d77\u9009\uff0c\u5b9e\u65f6\u7ef4\u62a4ans\u5373\u53ef\n\n\u6211\u7528\u7684\u662f\u5e26\u6743\u5e76\u67e5\u96c6\uff0c\u6309height[i]\u4ece\u5927\u5230\u5c0f\u52a0\u5165\uff0c\u7ef4\u62a4\u6bcf\u4e2a\u8fde\u901a\u6bb5\u7684\u4fe1\u606f\u3002\u8003\u8651\u6bcf\u6b21\u52a0\u5165\u4e00\u6761\u8fb9\uff0c\u53ea\u6709\u5b83\u8fde\u8d77\u6765\u7684\u4e24\u7aef\u4fe1\u606f\u4f1a\u6539\u53d8\uff0c\u6240\u4ee5\u5b9e\u65f6\u7ef4\u62a4ans\u662fn*O(1)\uff0c\uff08\u8fd9\u7c7b\u9898\uff09\u4e00\u5b9a\u53ef\u4ee5\u7528\u57fa\u6570\u6392\u5e8f\uff0c\u603b\u5171\u5c31\u662fO(n^2)\n\n```cpp\n#include <cstdio>\n#include <iostream>\nusing namespace std;\ninline int readin()\n{\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||'9'<ch){if(ch=='-')f=-1;ch=getchar();}\n\twhile('0'<=ch&&ch<='9') x=(x<<3)+(x<<1)+ch-'0',ch=getchar();\n\treturn x*f;\n}\ninline int getmin(int n1,int n2){return n1<n2?n1:n2;}\ninline int getmax(int n1,int n2){return n1>n2?n1:n2;}\nconst int maxn=2005,inf=0x3f3f3f3f;\nint n,m,a[maxn][maxn],f[maxn][maxn],ans1=1,ans2=1;\nint height[maxn],sum[maxn],x[maxn],sa[maxn],fa[maxn],l[maxn],mark[maxn];\nint find(int x){return fa[x]==x?x:fa[x]=find(fa[x]);}\nint main()\n{\n\tn=readin(),m=readin();\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\ta[i][j]=readin();\n\tfor(int i=1;i<=n;i++) f[i][1]=1;\n\tfor(int i=1;i<=m;i++) f[1][i]=1;\n\tfor(int i=2;i<=n;i++)\n\t\tfor(int j=2;j<=m;j++)\n\t\t{\n\t\t\tif(a[i][j]==a[i-1][j]||a[i][j]==a[i][j-1]||a[i][j]!=a[i-1][j-1]) \n\t\t\t\tf[i][j]=1;\n\t\t\telse f[i][j]=getmin(f[i-1][j-1],getmin(f[i-1][j],f[i][j-1]))+1;\n\t\t\tans1=getmax(f[i][j],ans1);\n\t\t}\n\tprintf(\"%d\\n\",ans1*ans1);\n\tfor(int j=1;j<=m;j++)\n\t{\n\t\tfor(int i=1;i<=m;i++) sum[i]=0;\n\t\tfor(int i=1;i<=n;i++) sum[height[i]=(a[i][j]^a[i][j-1])?height[i]+1:1]++;\n\t\tfor(int i=1;i<=m;i++) sum[i]+=sum[i-1];\n\t\tfor(int i=n;i>=1;i--) sum[height[i]]--,sa[n-sum[height[i]]]=i;\n\t\tfor(int i=1;i<=n+1;i++) fa[i]=l[i]=i,mark[i]=0;\n//\t\tfor(int i=1;i<=n;i++) cout<<height[sa[i]]<<\" \";\n//\t\tcout<<endl;\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\t\n\t\t\tif(a[sa[i]][j]==a[sa[i]+1][j])\n\t\t\t{\n\t\t\t\tmark[sa[i]]=1;\n\t\t\t\tans2=getmax(ans2,height[sa[i]]*(sa[i]+1-l[sa[i]]));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tint f1=find(sa[i]),f2=find(sa[i]+1);\n\t\t\t\tfa[f1]=f2,l[f2]=l[f1];\n\t\t\t\tans2=getmax(ans2,height[sa[i]]*(f2+mark[f2]-l[f2]));\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans2);\n}\n```",
        "postTime": 1524048492,
        "uid": 13740,
        "name": "kiddingme12138",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1169 \u3010[ZJOI2007]\u68cb\u76d8\u5236\u4f5c\u3011"
    }
]
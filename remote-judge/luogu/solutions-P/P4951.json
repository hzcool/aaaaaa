[
    {
        "content": "\u8fd9\u662f\u4e00\u4e2a01\u5206\u6570\u89c4\u5212\u7684\u5165\u95e8\u9898(>_>)  \n\u8bbe\u6240\u9009\u7684\u70b9\u96c6\u4e3aS\uff0c\u8003\u8651\u4e8c\u5206\u7b54\u6848$$mid\\le\\frac{F-\\sum_{i\\in S}Ci}{\\sum_{i\\in S}Ti}$$\n\u79fb\u9805\u5f97 $$F-\\sum_{i\\in S}(mid*Ti+Ci)\\ge 0$$\n\u5c06\u8fb9\u91cd\u65b0\u8d4b\u6743\u4e3a$-mid*Ti-Ci$\uff0c\u505a\u4e00\u904d\u6700\u5927\u751f\u6210\u6811\u5c31\u597d\u4e86\uff0c$F+sum\\ge0$\u5c31\u8bf4\u660e\u7b54\u6848\u53ef\u4ee5\u66f4\u5927  \n\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N=805,M=20005;\nconst double eps=1e-6;\nint n,m,F,fa[N];\nbool vis[N];\nstruct edge{\n    int u,v,c,t;double w;\n}a[M];\n\nint findf(int x)\n{\n    if(fa[x]==x) return fa[x];\n    return fa[x]=findf(fa[x]);\n}\nbool cmp(edge x,edge y){return x.w>y.w;}\nbool check(double r)\n{\n    for(int i=1;i<=n;i++) fa[i]=i;\n    for(int i=1;i<=m;i++) a[i].w=-a[i].c-r*a[i].t;\n    sort(a+1,a+m+1,cmp);\n    int num=0;double sum=F;\n    for(int i=1;i<=m;i++) {\n        if(num==n-1) break;\n        int x=findf(a[i].u),y=findf(a[i].v);\n        if(x!=y) {\n            num++,fa[x]=y;\n            sum+=a[i].w;\n        }\n    }\n    return sum>=0;\n}\n\nint main()\n{\n    scanf(\"%d%d%d\",&n,&m,&F);\n    for(int i=1;i<=m;i++)\n        scanf(\"%d%d%d%d\",&a[i].u,&a[i].v,&a[i].c,&a[i].t);\n    \n    double l=0,r=1e9,mid;\n    while(l+eps<r)\n    {\n        mid=(l+r)/2;\n        if(check(mid)) l=mid;\n        else r=mid;\n    }\n    printf(\"%.4lf\\n\",r);\n    return 0;\n}\n\n```",
        "postTime": 1540707848,
        "uid": 27030,
        "name": "ustze",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4951 \u3010[USACO 2001 OPEN]\u5730\u9707\u3011"
    },
    {
        "content": "## $solution:$\n\n \t\u8fd9\u9898\u5176\u5b9e\u7275\u626f\u5230\u4e86\u4e00\u79cd\u666e\u904d\u7684\u4e8c\u5206\u7b54\u6848\u7684\u65b9\u6cd5\uff0c\u4e0e[HNOI2009 \u6700\u5c0f\u5708](https://www.luogu.org/problemnew/show/P3199) \u4e00\u6837\u6709\u8bb8\u591a\u7684\u5171\u540c\u70b9\u3002\u56e0\u4e3a\u8fd9\u4e9b\u9898\u8981\u6c42\u6211\u4eec\u8f93\u51fa\u7684ans\u90fd\u662f\u9488\u5bf9\u6743\u503c\u603b\u548c\u4e0d\u65ad\u8ba1\u7b97\u800c\u6765\u7684\u3002\u672c\u9898\u5c31\u662f\u4e2a\u7ecf\u5178\u4f8b\u9898\uff08\u4e8c\u5206\u7b54\u6848\u6c42\u6700\u4f18\u6bd4\u7387\u751f\u6210\u6811\uff09\uff0c\u7ecf\u5178\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u9898\u610f\u770b\u51fa\u5b83\u8981\u6c42\u6211\u4eec\u8f93\u51fa\u7684**\u6700\u7ec8\u7b54\u6848**\u5b9e\u9645\u4e0a\u5c31\u662f\uff1a\n\n### $ans= \\frac{F-\\sum{v_i} \\quad (i\\in S)}{\\sum{t_i}\\quad (i\\in S)} $\n\n\uff08\u5176\u4e2d**S\u4e3a\u6211\u4eec\u6700\u7ec8\u6240\u9009\u62e9\u7684\u6700\u4f18\u751f\u6210\u6811\u7684\u8fb9\u6743\u7684\u96c6\u5408**\uff09\u6211\u4eec\u5c06\u8fd9\u4e2a\u5f0f\u5b50\u8f6c\u6362\u4e00\u4e0b\uff0c\u53ef\u4ee5\u5f97\u5230\uff1a\n\n### $F=ans*\\sum{t_i}+\\sum{v_i}$\n\n### $F=\\sum{ans*t_i+v_i}\\quad _{(i\\in S)}$\n\n\u6ce8\uff1a\u8fd9\u4e00\u70b9\u6211\u4eec\u4e00\u5b9a\u8981\u6e05\u695a\uff1a\u6b64\u65f6\u7b49\u5f0f\u53f3\u8fb9\u5c31\u662f\u751f\u6210\u6811\uff08\u53ea\u4e0d\u8fc7\uff1b\u6811\u8fb9\u6743\u53d8\u6210\u4e86$ans*t_i+v_i$\uff09\n\n\u200b\t\u4e0a\u8ff0\u5f0f\u5b50\u4e2d\u6211\u4eec\u7684ans\u5c31\u662f\u6211\u4eec\u6700\u7ec8\u8981\u8f93\u51fa\u7684\u6700\u4f18\u6bd4\u7387\uff0c\u8fd9\u4e2aans\u662f\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\u5f97\u5230\u7684\uff01\u56e0\u4e3a\u7b54\u6848\u5177\u6709\u5355\u8c03\u6027\uff0c\u5f53\u7136\u8fd9\u4e2a\u9700\u8981\u6211\u4eec\u8fdb\u4e00\u6b65\u8bc1\u660e\uff1a\u9996\u5148\uff0c\u56e0\u4e3aans\u662f**\u6700\u4f18**\u6bd4\u7387\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u5bf9\u4e8e\u56fe\u4e0a\u7684\u4efb\u610f\u4e00\u4e2a\u751f\u6210\u6811\u7684\u8fb9\u7684\u96c6\u5408K\uff0c\u4e00\u5b9a\u6709\uff1a$\\frac{F-\\sum{v_i} \\quad (i\\in K)}{\\sum{t_i}\\quad (i\\in K)}\\leq ans $ \uff08\u6839\u636e\u4e0a\u8ff0\u65b9\u5f0f\u8f6c\u5316\u5f97\uff1a$F\\leq \\sum{ans*t_i+v_i}\\quad {(i\\in K)}$\uff09\u53ea\u6709\u5f53\u6211\u4eec\u7684\u96c6\u5408K\u53d6\u5230\u6700\u4f18\u7684\u751f\u6210\u6811\u65f6\u4e5f\u5c31\u662f**K=S**\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u624d\u4f1a\u662f\u7b49\u5f0f\uff01\u7136\u540e\u6211\u4eec\u6765\u8bc1\u660e\u4e8c\u5206\u7684\u6b63\u786e\u6027\uff1a\u5f53\u6211\u4eec\u4e8c\u5206\u6c42ans\u7684\u65f6\u5019\uff0c\u5bf9\u4e8e\u6211\u4eec\u5f53\u524d\u7684\u6bd4\u7387x\uff0c\u4e00\u5b9a\u6709\u8fd9\u4e09\u79cd\u60c5\u51b5\uff1a\n\n### $1.$ $x>ans$ \uff1a\n\n\u5f53\u6211\u4eec\u6bd4\u7387\u4e3aans\u65f6\uff1a$F\\leq \\sum{ans*t_i+v_i}\\quad {(i\\in K )}$\n\n\u73b0\u5728\u6211\u4eec\u7684\u6bd4\u7387x\u6bd4ans\u8fd8\u5927\uff01\u90a3\u6211\u4eec\u7684\u80af\u5b9a\u6709\uff1a$F< \\sum{x*t_i+v_i}\\quad {(i\\in K)}$\n\n### $2.$ $x=ans$ \uff1a\n\n\u6211\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff1a$F\\leq\\sum{ans*t_i+v_i}\\quad {(i\\in K)}$\n\n### $3.$ $x<ans$ \uff1a\n\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u4e0d\u80fd\u786e\u8ba4$F$ \u548c  $\\sum{ans*t_i+v_i}\\quad {(i\\in K)}$ \u7684\u5927\u5c0f\u5173\u7cfb\u4e86\uff01\u56e0\u4e3a\u6211\u4eec\u7684K\u662f\u4efb\u610f\u751f\u6210\u6811\u7684\u8fb9\u7684\u96c6\u5408\uff0c\u6b64\u65f6\u6211\u4eec\u5c0f\u4e8e\u7b49\u4e8e\u5927\u4e8e\u90fd\u6709\u53ef\u80fd\uff0c\u4f46\u4e5f\u6b63\u662f\u5982\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u8bc1\u660e**\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a\u751f\u6210\u6811\u8fb9\u7684\u96c6\u5408**\u6ee1\u8db3$F>\\sum{x*t_i+v_i}\\quad {(i\\in S)}$\u56e0\u4e3a\u5c31\u62ff\u6211\u4eecans\u60c5\u51b5\u4e0b\u7684\u6700\u4f18\u8fb9\u96c6S\uff0c\u56e0\u4e3a $F=\\sum{ans*t_i+v_i}\\quad {(i\\in S)}$ \u6b64\u65f6\u6211\u4eec\u7684$x<ans$ \u6240\u4ee5$F>\\sum{x*t_i+v_i}\\quad {(i\\in S)}$\n\n**\u5982\u4f55\u4e8c\u5206\uff08\u4e3a\u4ec0\u4e48\u7528\u6700\u5c0f\u751f\u6210\u6811\uff09\uff1a**\n\n\u90a3\u6211\u4eec\u8bc1\u660e\u4e86\u4e0a\u9762\u8fd9\u4e2a\u4e1c\u897f\u6709\u4ec0\u4e48\u7528\u5462\uff1f\u6839\u636e\u4e0a\u8ff0\u4e09\u4e2a\u5173\u7cfb\u7684\u7279\u6027\uff08\u5c31\u662f\u90a3\u4e09\u4e2a\u4e0d\u7b49\u5f0f\uff09\uff0c\u6211\u4eec\u53d1\u73b0\u5f53\u6211\u4eec\u5c06x\u5e26\u8fdb\u53bb\u540e\uff0c\u53ea\u8981\u6c42\u5f97\u6700\u5c0f\u7684 $\\sum{ans*t_i+v_i}\\quad {(i\\in K)}$ \u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u5224\u65ad\u51fax\u548cans\u7684\u5173\u7cfb\u4e86\uff01\n\n\u6211\u4eec\u5c06\u6700\u5c0f\u7684$\\sum{ans*t_i+v_i}\\quad {(i\\in K)}$ \u770b\u505amin \n\n1. \u82e5$F<min$\uff0c\u5219\u5fc5\u6709$F< \\sum{x*t_i+v_i}\\quad {(i\\in K)}$ \u8fd9\u4e0d\u5c31\u662f\u7b2c\u4e00\u79cd\u60c5\u51b5\u5417\uff1fx\u5fc5\u7136\u5927\u4e8eans\n2. \u82e5$F=min$\uff0c\u5219\u5fc5\u6709$F  \\leq \\sum{x*t_i+v_i}\\quad {(i\\in K)}$ \u8fd9\u4e0d\u5c31\u662f\u7b2c\u4e8c\u79cd\u60c5\u51b5\u5417\uff1fx\u5fc5\u7136\u7b49\u4e8eans\n3. \u82e5$F>min$\uff0c\u5219x\u5fc5\u7136\u4e0d\u5927\u4e8e\u4e5f\u4e0d\u7b49\u4e8eans\uff0c\u90a3\u4e0d\u5c31\u662f\u5c0f\u4e8eans\u5417\uff1f\uff08\u4e0a\u9762\u8bc1\u8fc7\u4e86\u82e5x<ans\uff0c\u5219\u5fc5\u5b58\u5728\u4e00\u4e2aK$F>\\sum{x*t_i+v_i}\\quad {(i\\in K)}$\uff09\n\n\u90a3\u6211\u4eec\u5982\u4f55\u6c42\u6700\u5c0f\u7684$\\sum{x*t_i+v_i}\\quad {(i\\in K)}$ \u5462\uff1f \u8fd9\u5c31\u662f\u6c42\u6700\u5c0f\u751f\u6210\u6811\u561b\uff08\u53ea\u4e0d\u8fc7\uff1b\u6811\u8fb9\u6743\u53d8\u6210\u4e86$ans*t_i+v_i$\uff0c\u6211\u4eec\u6bcf\u4e00\u6b21\u90fd\u91cd\u65b0\u6392\u4e2a\u5e8f\u5c31\u884c\u4e86\uff09\uff01\n\n\u603b\u590d\u6742\u5ea6\uff1a$O(m *logm*log(r-l+1))$\n\n## $code:$\n\n```cpp\n//\u8017\u65f6 41ms \u5185\u5b58 1036KB\n#include<iostream>\n#include<cstdio>\n#include<iomanip>\n#include<algorithm>\n#include<cstring>\n#include<cstdlib>\n#include<ctime>\n#include<cmath>\n#include<vector>\n#include<queue>\n#include<map>\n#include<set>\n\n#define ll long long\n#define db double\n#define rg register int\n\nusing namespace std;\n\nconst db cha=1e-9;\n\nstruct su{\n\tint x,y,v,t;db k;\n}a[10005];\n\nint n,m,f;\nint s[405];\n\ninline int qr(){\n\tchar ch;\n\twhile((ch=getchar())<'0'||ch>'9');\n\tint res=ch^48;\n\twhile((ch=getchar())>='0'&&ch<='9')\n\t\tres=res*10+(ch^48);\n\treturn res;\n}\n\ninline bool cmp(su x,su y){return x.k<y.k;}\n\ninline int get(int x){\n\tif(s[x]==x)return x;\n\treturn s[x]=get(s[x]);\n}\n\ninline bool check(db x){\n\tdb res=0;\n\tfor(rg i=1;i<=n;++i)s[i]=i;//\u5e76\u67e5\u96c6\n\tfor(rg i=1;i<=m;++i)\n\t\ta[i].k=x*a[i].t+(db)a[i].v;//\u66f4\u65b0\u8fb9\u6743\n\tsort(a+1,a+m+1,cmp);//kruskal\u6c42\u6700\u5c0f\u751f\u6210\u6811\n\tfor(rg i=1;i<=m;++i)\n\t\tif(get(a[i].x)!=get(a[i].y))\n\t\t\tres+=a[i].k,s[get(a[i].x)]=get(a[i].y);//\u6c42\u65b0\u8fb9\u6743\u7684\u603b\u548c\n\treturn f>res?0:1;\n}\n\nint main(){\n\tfreopen(\"quake.in\",\"r\",stdin);\n\tfreopen(\"quake.out\",\"w\",stdout);\n\tn=qr(),m=qr(),f=qr();\n\tfor(rg i=1;i<=m;++i)\n\t\ta[i]=su{qr(),qr(),qr(),qr()};\n\tif(check(0))puts(\"0.0000\"),exit(0);//\u7279\u5224\n\tdb l=0,r=1e14,mid;\n\twhile(r-l>cha){//\u4e8c\u5206\u7b54\u6848\n\t\tmid=(l+r)/2;\n\t\tif(check(mid))r=mid-cha;\n\t\telse l=mid+cha;\n\t}printf(\"%.4lf\",l);\n\treturn 0;\n}\n\n```\n\n",
        "postTime": 1550043914,
        "uid": 111334,
        "name": "\u706f\u82af\u7cd5",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4951 \u3010[USACO 2001 OPEN]\u5730\u9707\u3011"
    },
    {
        "content": "01\u5206\u6570\u89c4\u5212\u57fa\u7840\u9898\uff0c[\u5b66\u4e60\u5730\u5740](http://www.cnblogs.com/perseawe/archive/2012/05/03/01fsgh.html)\n\n\u6240\u8c13\u768401\u5206\u6570\u89c4\u5212\u95ee\u9898\u5c31\u662f\u6307\u8fd9\u6837\u7684\u4e00\u7c7b\u95ee\u9898\uff0c\u7ed9\u51fa\u4e00\u4e9b\u7269\u54c1\uff0c\u6bcf\u4e2a\u7269\u54c1\u6709\u4e24\u79cd\u5c5e\u6027\uff0c\u7269\u4f53\u53ef\u4ee5\u9009\u6216\u4e0d\u9009\uff0c\u6c42\u6700\u540e\u4e24\u79cd\u5c5e\u6027\u4e4b\u548c\u76f8\u6bd4\u7684\u6700\u5927\u503c\u6216\u6700\u5c0f\u503c\u3002\n\n\u5bf9\u4e8e\u672c\u9898\u6211\u4eec\u9700\u8981\u6c42\u5f97\u5c31\u662f\uff1a\n\n$$max\\frac {F-\\sum C_x}{\\sum T_x}$$\n\n\u5176\u4e2d\uff0c$C_x$\u548c$T_x$\u8868\u793a\u7684\u662f\u9009\u62e9\u7684\u8fb9\u7684\u6210\u672c\u548c\u65f6\u95f4\u3002\n\n\u6211\u4eec\u8bbe\u6700\u7ec8\u7684\u7b54\u6848\u4e3a$Ans$,\u5219\u6709:\n$$\\frac {F-\\sum C_x}{\\sum T_x}=Ans$$\n$$F-\\sum C_x-\\sum T_x*Ans=0$$\n\n\u6211\u4eec\u7684\u76ee\u6807\u5c31\u662f\u6700\u5927\u5316Ans\u7684\u503c,\u53ef\u4ee5\u4e8c\u5206\u3002\n\n\u4e8c\u5206\u7b54\u6848\uff0c\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u5c31\u662f\u5728\u4e8e\u5982\u4f55\u5224\u65ad\u662f\u5426\u80fd\u591f\u53d6\u5f97\u5230\n\n\u5bf9\u4e0e\u6bcf\u4e2a$Mid<=Ans$,\u5b83\u4eec\u90fd\u662f\u53ef\u4ee5\u53d6\u5230\u7684\uff0c\u4e5f\u5c31\u662f:\n\n$$F-\\sum C_x-\\sum T_x*Mid \\ge0$$\n\n\u5018\u82e5$Mid>Ans$,\u5b83\u4eec\u6c38\u8fdc\u4e5f\u53d6\u4e0d\u5230\uff0c\u4e5f\u5c31\u662f\n$$F-\\sum C_x-\\sum T_x*Mid \\lt0$$\n\n\u6211\u4eec\u53d1\u73b0\u53ef\u4ee5\u7528\u8fd9\u4e2a\u5f0f\u5b50\u6765\u5224\u65ad$Mid$\u5408\u4e0d\u5408\u6cd5\u3002\u6211\u4eec\u5c06\u539f\u5148\u7684\u8fb9\u6743\u53d8\u4e3a$\\sum C_x+\\sum T_x*Mid$,\u7136\u540e\u8dd1\u4e00\u904d\u6700\u5c0f\u751f\u6210\u6811\u5c31\u53ef\u4ee5\u4e86\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u662f\u6700\u5c0f\u751f\u6210\u6811\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u627e\u5230\u6700\u5c0f\u7684\u4e00\u7ec4$\\sum C_x+\\sum T_x*Mid$\uff0c\u4f7f\u51cf\u6570\u5c3d\u91cf\u5c0f\u4ece\u800c\u5c3d\u53ef\u80fd\u6ee1\u8db3\u4e24\u5f0f\u76f8\u51cf\u5927\u4e8e\u7b49\u4e8e0\u8fd9\u4e2a\u6761\u4ef6\n\n**\u4ee3\u7801\uff1a**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tint res=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-f;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){res=(res<<3)+(res<<1)+ch-'0';ch=getchar();}\n\treturn res*f;\n}\nconst int N=405;\nconst int M=10005;\nint n,m,f,fa[N];\nconst double eps=1e-8;\ndouble l,r,mid;\nstruct node1{\n\tint u,v,c,t;\n}a[M];\nstruct node2{\n\tint u,v;\n\tdouble x;\n}g[M];\nbool cmp(node2 x,node2 y){\n\treturn x.x<y.x;\n}\nint find(int x){\n\tif(fa[x]==x) return x;\n\telse return fa[x]=find(fa[x]);\n}\nbool check(double x){\n\tfor(int i=1;i<=m;i++)\n\t\tg[i].u=a[i].u,g[i].v=a[i].v,g[i].x=(double)a[i].c+(double)a[i].t*x;//\u8fb9\u7684\u65b0\u6743\u503c\n\tfor(int i=1;i<=n;i++) fa[i]=i;\n\tsort(g+1,g+m+1,cmp);\n\tdouble res=0;\n\tint cnt=0;\n\tfor(int i=1;i<=m;i++){//\u6700\u5c0f\u751f\u6210\u6811\n\t\tint xx=find(g[i].u),yy=find(g[i].v);\n\t\tif(xx!=yy){\n\t\t\tcnt++;\n\t\t\tres+=g[i].x;\t\n\t\t\tfa[xx]=yy;\n\t\t\tif(cnt==n-1) break;\n\t\t}\t\t\n\t}\n\treturn ((double)f-res)>=0.0;\t//\u5224\u65ad\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\n}\nint main(){\n\tn=read();m=read();f=read();\n\tfor(int i=1;i<=m;i++)\n\t\ta[i].u=read(),a[i].v=read(),a[i].c=read(),a[i].t=read();\n\tl=0.0;r=1e12;\t\n\twhile(r-l>=eps){\n\t\tmid=(l+r)/2;\n\t\tif(check(mid)) l=mid;\n\t\telse r=mid;\n\t}\t\t\t\n\tprintf(\"%.4lf\",l);\n}\n```\n",
        "postTime": 1558314667,
        "uid": 20504,
        "name": "Rachel_in",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4951 \u3010[USACO 2001 OPEN]\u5730\u9707\u3011"
    },
    {
        "content": "2021/3/13 upd:\u4fee\u6539\u4e00\u4e2a\u9519\u8bef\u7684\u94fe\u63a5\n\n01\u5206\u6570\u89c4\u5212\u3002\n\n\u548c\u6700\u4f18\u6bd4\u7387\u751f\u6210\u6811\u6bd4\u8f83\u76f8\u4f3c\u3002\n\n\u8bbe\u9009\u4e86\u7684\u8fb9\u96c6\u4e3a$S$,\u7b54\u6848\u4e3a$k$\u5219\u6709:\n\n### $k\\leq \\frac{f-\\sum_{i \\in S}c_i}{\\sum_{i \\in S}t_i}$\n\n\u79fb\u9879\u5f97:\n\n### $f-\\sum_{i \\in S}{c_i-k*t_i} \\ge 0$\n\n\u6211\u4eec\u53d1\u73b0\uff1a\n\n\u5bf9\u4e8e$k$\u7684\u53d6\u503c$k_1$\u548c$k_2$,\u5f53$k_1 > k_2$\u65f6\uff0c$k_1$\u6ee1\u8db3\u4e0a\u9762\u7684\u5f0f\u5b50\u5927\u4e8e0\u65f6\uff0c$k_2$\u80af\u5b9a\u53ef\u4ee5\u6ee1\u8db3\u3002\n\n\u6240\u4ee5\u7b54\u6848\u6709**\u5355\u8c03\u6027**\u3002\n\n\u6211\u4eec\u5c06\u8fb9\u6743\u6309\u7167\u5f0f\u5b50\u91cc\u8d4b\u503c\u4e3a$c_i-k*t_i$.\n\n\u663e\u7136\u6211\u4eec\u60f3\u8981\u4f7f\u5f97\u4e0a\u9762\u7684\u5f0f\u5b50\u6709\u5173$k$\u7684\u90e8\u5206\u7684\u503c\u66f4\u5c0f\uff0c\u4e14\u8ba9\u9009\u51fa\u6765\u7684\u56fe\u8054\u901a\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4f7f\u7528**\u6700\u5c0f\u751f\u6210\u6811**\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u7b54\u6848$k$,\u56e0\u4e3a\u6709\u5355\u8c03\u6027\uff0c\u6240\u4ee5\u76f4\u63a5\u4e8c\u5206\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6:$O(n\\log^2_2n)$.\n\n[\u4ee3\u7801](https://www.luogu.com.cn/paste/zvfqdc0o)\n\n\u53e6\u5916\uff0c\u8fd8\u6709\u4e00\u9053\u4e0e\u56fe\u8bba\u7ed3\u5408\u7684\u9898\u76ee:\n\n[\u8fd9\u4e2a](https://www.luogu.com.cn/problem/P3199)\n\n\u4e00\u770b:\u6700\u5c0f\u5747\u503c\u73af\u3002\n\n\u6309\u7167\u521a\u624d\u7684\u5957\u8def\uff0c\u4ee4\u65b0\u8fb9\u6743$p=val-k$,$val$\u4e3a\u539f\u6765\u7684\u8fb9\u6743\uff0c$k$\u4e3a\u7b54\u6848\u3002\n\n\u7528SPFA\u5224\u8d1f\u73af\uff0c\u82e5\u6709\u8d1f\u73af\uff0c\u5219\u4ee3\u8868\u6709\u5e73\u5747\u503c\u5c0f\u4e8e$k$\u7684\u73af\uff0c\u6211\u4eec\u6309\u7167\u4e8c\u5206\u4e0a\u5957\u8def\u5373\u53ef\u3002\n\n[\u4ee3\u7801](https://www.luogu.com.cn/paste/ve7erk9j)\n\n\u5927\u6982\u5c31\u5230\u8fd9\u91cc\u4e86...",
        "postTime": 1615528819,
        "uid": 307535,
        "name": "Cust10",
        "ccfLevel": 6,
        "title": "P4951 Earthquake \u7ecf\u5178\u9898\u76ee  /01\u5206\u6570\u89c4\u5212\u5c0f\u8bb0"
    },
    {
        "content": "\u6211\u4eec\u8bbe\u7b54\u6848\u4e3a $k$ \uff0c\u5219\u6709\n$$\\frac{f-\\sum{c_i}}{\\sum{t_i}}=k$$\n\u79fb\u9879\u5f97\n$$f-(\\sum{c_i}+k*\\sum{t_i})=0$$\n\u4e5f\u5c31\u662f\n$$f-\\sum{(c_i+k*t_i)}=0$$\n\u6211\u4eec\u8bbe\n$$f(k)=f-\\sum(c_i+k*t_i)$$\n\u5f53 $f(k)>0$ \u65f6\uff0c\u5219\u6709\u6bd4 $k$ \u66f4\u597d\u7684\u7b54\u6848\uff1b\u5f53 $f(k)=0$ \u65f6\uff0c $k$ \u4e00\u5b9a\u662f\u6700\u4f18\u89e3\uff1b\u800c\u5f53 $f(k)<0$ \u65f6\uff0c \u7b54\u6848\u8981\u5c0f\u4e8e $k$ \u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\u679a\u4e3e $k$ \u503c\uff0c\u8bbe $v_i=c_i+k*t_i$ \uff0c\u6bcf\u6761\u8fb9\u6309 $v$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u6bcf\u6b21\u7528 `Kruskal` \u6c42\u51fa\u6700\u5c0f\u751f\u6210\u6811\uff0c\u8ba1\u7b97 $\\sum{v_i}$ \uff0c\u5224\u65ad\u5176\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8e $f$ \u5373\u53ef\u3002\n\n\u4ee3\u7801\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define N 401\n#define M 10003\n#define eps 1e-7\n#define il inline\n#define re register\n#define tie0 cin.tie(0),cout.tie(0)\n#define fastio ios::sync_with_stdio(false)\n#define File(x) freopen(x\".in\",\"r\",stdin);freopen(x\".out\",\"w\",stdout)\nusing namespace std;\ntypedef long long ll;\n\ntemplate <typename T> inline void read(T &x) {\n\tT f = 1; x = 0; char c;\n    for (c = getchar(); !isdigit(c); c = getchar()) if (c == '-') f = -1;\n    for ( ; isdigit(c); c = getchar()) x = x * 10 + (c ^ 48);\n    x *= f;\n}\n\nstruct edge {\n\tint u, v, c, t;\n\tdouble w;\n\tfriend bool operator < (edge x, edge y) { return x.w < y.w; }\n} e[M];\n\nint n, m, f, cnt;\nint fa[N];\n\nint find(int x) { return fa[x] == x ? x : find(fa[x]); }\n\ndouble Kruskal() {\n\tdouble res = 0; cnt = 0;\n\tsort(e + 1, e + 1 + m);\n\tfor (int i = 1; i <= n; ++i) fa[i] = i;\n\tfor (int i = 1; i <= m; ++i) {\n\t\tint f1 = find(e[i].u), f2 = find(e[i].v);\n\t\tif (f1 == f2) continue;\n\t\tfa[f2] = f1; res += e[i].w;\n\t\tif (++cnt == n - 1) break;\n\t}\n\treturn res;\n}\n\nbool check(double t) {\n\tfor (int i = 1; i <= m; ++i) e[i].w = e[i].c + e[i].t * t;\n\treturn Kruskal() <= (double)f;\n}\n\nint main() {\n\tint u, v, c, t;\n\tread(n), read(m), read(f);\n\tfor (int i = 1; i <= m; ++i)\n\t\tread(e[i].u), read(e[i].v), read(e[i].c), read(e[i].t);\n\tdouble l = 0, r = 1000000000.0;\n\twhile (r - l > eps) {\n\t\tdouble mid = (l + r) / 2.0;\n\t\tif (check(mid)) l = mid;\n\t\telse r = mid;\n\t}\n\tprintf(\"%.4lf\", l);\n\treturn 0;\n}\n```",
        "postTime": 1571753121,
        "uid": 201280,
        "name": "\u592a\u9633\u9a91\u58eb",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4951 \u3010[USACO 2001 OPEN]\u5730\u9707\u3011"
    },
    {
        "content": "### \u8003\u8bd5\u9898\u76ee\uff0c\u601d\u8def\u4e8c\u5206\u52a0\u6700\u5c0f\u751f\u6210\u6811\uff0e\n1 .\u3000\u4f9d\u9898\u53ef\u5f97\uff1a\u8bbe\u5229\u6da6\u4e3a\uff37\uff0c\u5219w=\uff08\u7ed9\u7684\u5de5\u8d44\uff26\uff0d\uff43\u7684\u603b\u548c\uff09\u518d\u9664\u4ee5t\u7684\u603b\u548c\uff0c\u6613\u77e5\uff57\u5355\u8c03\u9012\u51cf\uff0c\u7531\u6b64\u53ef\u60f3\u5230\u4e8c\u5206\u7b54\u6848\uff0e\n\n\uff12.\u3000\u7136\u540e\u5728\u8dd1\u6700\u5c0f\u751f\u6210\u6811\uff0c\u4ee5$c_ia+ t_i\\times x$\u4e3a\u8fb9\u6743\u503c\u5efa\u6811\n#### \u8be6\u60c5\u89c1\u4ee3\u7801\n##  Code:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define RN register int\n#define ll long long\n#define sign 1e7\ninline int read()\n{\n    int k=1;int x=0;\n    char c=getchar();\n    while ((c<'0'||c>'9')&&c!='-')c=getchar();\n    if(c=='-')\n\t\tk=-1,c=getchar();\n    while(c>='0'&&c<='9')\n\t\tx=x*10+c-'0',c=getchar();\n    return k*x;\n}\nstruct edge{\n\tint x;\n\tint y;\n\tint v;\n\tint t;\n\tdouble jia;//\u8fb9\u6743\u503c\n}p[10001];\nint n,m,f;\nint fa[10001];\ninline int find(int x)//\u5e76\u67e5\u96c6\u67e5\u627e\n{\n    if(fa[x]!=x)\n        fa[x]=find(fa[x]);\n    return fa[x];\n}\ninline void un(int x,int y)//\u5e76\u67e5\u96c6\u5408\u5e76\n{\n\tint xx=find(x);\n\tint yy=find(y);\n\tif(xx!=yy)\n\t\tfa[xx]=yy;\n}\ninline double cmp(edge x,edge y)//\u4ee5\u8fb9\u6743\u503c\u6392\u5e8f\uff0c\u5efa\u7acb\u6700\u5c0f\u751f\u6210\u6811\n{\n\treturn x.jia<y.jia;\n}\ninline int part(ll midd)\n{\n\tfor(RN i=1;i<=m;i++)\n\t\t{\n\t\t\tp[i].jia=midd/sign*p[i].t+p[i].v;\n\t\t}\n\tsort(p+1,p+m+1,cmp);\n\tfor(RN i=1;i<=n;i++)\n\t\tfa[i]=i;\n\t\tdouble k=(double)f;\n\tint x=1;\n\tfor(RN i=2;i<=n;i++)//\u6700\u5c0f\u751f\u6210\u6811\n\t  {\n\t\t  while(x<=m&&find(p[x].x)==find(p[x].y))//\u662f\u5426\u5728\u4e00\u4e2a\u96c6\u5408\u91cc\n\t\t\t  x++;\n\t\t  un(p[x].x,p[x].y), k-=p[x].jia;\n\t\t  //cout<<k<<endl;\n\t\t  if(k<0)//\u4e8c\u5206\u7684\u8fd9\u4e2a\u5229\u6da6\uff37\u5c0f\u4e86\n\t\t\t  return 0;\n\t  }\n\treturn 1;\n}\nint main()\n{\n\t//freopen(\"quake.in\", \"r\", stdin);\n\t//freopen(\"quake.out\", \"w\", stdout);\n\tn=read(),m=read(),f=read();\n\tfor(RN i=1;i<=m;i++)\n\t\t{\n\t\t\tp[i].x=read(),p[i].y=read(),p[i].v=read(),p[i].t=read();\n\t\t}\n\tif(!part(0))//\u5982\u679c\u5229\u6da6\u4e3a\uff10\u90fd\u5927\u4e86\uff0c\u90a3\u80af\u5b9a\u6ca1\u5229\u6da6\u4e86qwq\n\t\t{\n\t\t\tprintf(\"0.0000\\n\");\n\t\t\treturn 0;\n\t\t}\n\tll mid,l=0,r=2e15;\n\twhile(l<r)//\u5927\u8303\u56f4\u4e8c\u5206\n\t\t{\n\t\t\tmid=(l+r)>>1;\n\t\t\tif(part(mid+1))\n\t\t\t\tl=mid+1;\n\t\t\telse\n\t\t\t\tr=mid;\n\t\t}\n\tprintf(\"%.4lf\\n\",l/(double)sign);\n\treturn 0;\n}\n\n\n```",
        "postTime": 1549958584,
        "uid": 111487,
        "name": "\u9f99\u7fd4\u51e4\u7fe5",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4951 \u3010[USACO 2001 OPEN]\u5730\u9707\u3011"
    },
    {
        "content": "Earthquake \u9898\u89e3\n------------\n $01$ \u5206\u6570\u89c4\u5212\uff1a \n##### \u5047\u5b9a\u6211\u4eec\u5df2\u7ecf\u5f97\u5230\u4e86\u7b54\u6848 $ans$ \uff0c\n\u90a3\u4e48\u5c31\u6709 $ans=( F - \\sum_{} c_i )/ \\sum_{} t_i $ ,\u6240\u4ee5 $F=\\sum(ans \\times  t_i) + c_i $ .\u8981\u6c42 $ans$ \u6700\u5927, $ F $ \u4e3a\u5b9a\u503c, $ c_i $ \u8868\u793a\u4fee\u5efa\u9053\u8def\u7684\u6210\u672c, $ t_i $ \u8868\u793a\u9053\u8def\u4fee\u5efa\u6240\u9700\u8981\u7684\u65f6\u95f4.\n\n\u6b64\u65f6\u6211\u4eec\u5c31\u662f\u8981\u8ba9\u6211\u4eec\u7684\u7a0b\u5e8f\u53bb\u5bfb\u627e\u8fd9\u4e2a\u7b26\u5408\u6761\u4ef6\u4e14\u5355\u4f4d\u65f6\u95f4\u7684\u5229\u6da6\u6700\u5927\u7684  $ ans $ \u662f\u591a\u5c11\uff0c\u90a3\u5c31\u5e94\u5f53\u5728\u4e00\u5b9a\u8303\u56f4\u7c7b\u53bb\u5c1d\u8bd5\u4e0d\u540c\u7684\u503c\u770b\u662f\u4e0d\u662f\u6700\u4f18\u7b54\u6848.\n\n\u540c\u65f6\u82e5\u6b64\u65f6 $ x \\geq ans$ ,\u5219\u6709 $F \\leq \\sum (ans \\times t_i \\;) + c_i $ ,\u82e5\u6b64\u65f6   $ x<ans $ ,\u5219\u6709 $ F > \\sum (ans \\times  t_i) + c_i $ ,\u53d1\u73b0\u6ee1\u8db3\u5355\u8c03\u6027\uff0c\u90a3\u4e48\u81ea\u7136\u4f1a\u60f3\u5230\u53bb\u4e8c\u5206\u6848 $ ans $ \u7684\u503c $ x $ ,\u540e\u901a\u8fc7 $ F $ \u548c $\\sum (ans \\times t_i \\;) + c_i $  \u7684\u5927\u5c0f\u60c5\u51b5\u53ef\u4ee5\u4e0d\u65ad\u7f29\u5c0f\u4e8c\u5206\u8303\u56f4\u3002\n\n\u5982\u4f55\u8ba9\u5355\u4f4d\u65f6\u95f4\u7684\u5229\u6da6\u6700\u5927\u5462\uff1f\n $ ans = ( F - \\sum_{} c_i )/ \\sum_{} t_i $ \uff0c $ F $ \u4e3a\u5b9a\u503c,\u6211\u4eec\u53d1\u73b0\u968f  $ \\sum_{}c_i $ \u7684\u589e\u5927,$ ans $ \u4f1a\u51cf\u5c0f\uff0c\u968f $ \\sum_{} t_i $ \u7684\u589e\u5927, $ ans $ \u4f1a\u51cf\u5c0f,\u6240\u4ee5\u8981 $ ans $ \u6700\u5927\u6211\u4eec\u5e94\u8ba9 $ \\sum_{} c_i ,\\sum_{} t_i $ \u5747\u5c0f\u3002\n\n\u4e8e\u662f\u6211\u4eec\u6bcf\u6b21\u679a\u4e3e\u51fa\u7684 $ x $ \uff0c\u5e94\u5f53\u8ba9\u8dd1\u4e00\u4e2a\u6700\u5c0f\u751f\u6210\u6811\uff0c\u53ea\u9700\u5c06\u8fb9\u6743\u8bbe\u7f6e\u4e3a $ x \\times t_i + c_i $ \uff0c\u7136\u540e\u5c06\u8dd1\u51fa\u6765\u7684\u7ed3\u679c\u4e0e $ F $ \u6bd4\u8f83\u6765\u4e0d\u65ad\u7f29\u5c0f\u4e8c\u5206\u8303\u56f4\uff0c\u76f4\u5230\u5f97\u5230\u7b54\u6848\u5373\u53ef\u3002\n\n------------\n\n\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\n#define re register\n#define in inline\n#define ll long long\n#define inf 0x3f3f3f3f\n#define max(a,b) a>b?a:b\n#define min(a,b) a<b?a:b\n#define me(a) memset(a,0,sizeof(a))\n#define For(i,a,n) for(re int (i)=(a);(i)<=(n);(i)++)\n#define Bor(i,n,a) for(re int (i)=(n);(i)>=(a);(i)--)\nusing namespace std;\nconst int N=10001;\nconst double eps=1e-6;\nll n,m,f;\nint fa[N];\nstruct jt{\n\tll u,v,c,t;\n\tdouble w;\n}a[N];\nin bool cmp(jt a,jt b)\n{\n\treturn a.w<b.w;  \n}\nin int find(int x)\n{\n\tif(fa[x]==x)return x;\n\treturn fa[x]=find(fa[x]);\n}\nin ll qread()\n{\n\tre ll s=0,w=1;\n\tre char ch;\n\tch=getchar();\n\twhile(!isdigit(ch))\n\t{\n\t\tif(ch=='-')w=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch))\n\t{\n\t\ts=(s<<3)+(s<<1)+(ch^48); \n\t\tch=getchar();\n\t}\n\treturn s*w;\n}\nin bool check(double x)\n{\n\tdouble res=0;\n\tFor(i,1,n)fa[i]=i;\n\tFor(i,1,m)a[i].w=x*a[i].t+(double)a[i].c;\n\tsort(a+1,a+m+1,cmp);\n\tFor(i,1,m)\n\t{\n\tif(find(a[i].u)!=find(a[i].v))\t\n\t{\n\t\tres+=a[i].w;fa[find(a[i].u)]=find(a[i].v);\n\t}\n\t}\n\treturn f>res?0:1;\n}\nint main()\n{\n\tn=qread(),m=qread(),f=qread();\n\tFor(i,1,m)a[i].u=qread(),a[i].v=qread(),a[i].c=qread(),a[i].t=qread();\t \n\tdouble l=0,r=1e12,mid;\n\twhile(r-l>eps)\n\t{\n\t\tmid=(l+r)/2;\n\t\tif(check(mid))\n\t\t{\n\t\tr=mid-eps;\n\t\t}\n\t\telse\n\t\t{\n\t\tl=mid+eps;\t\n\t\t}\n\t}\n\tif(l<0)\n\t{\n\t\tprintf(\"0.0000\");return 0;\n\t}\n\tprintf(\"%.4lf\",l);\n\treturn 0;\n}\n /*\n5 6 100 \n1 2 1  1\n1 2 20 5 \n1 3 20 5 \n1 4 20 5 \n1 5 20 5 \n2 3 23 1 \n*/\n```\n\n\n------------\n\n\n",
        "postTime": 1665714985,
        "uid": 772778,
        "name": "_____hyj_____",
        "ccfLevel": 0,
        "title": "Earthquake \u9898\u89e3"
    },
    {
        "content": "## \u6d1b\u8c37 P4951 [USACO 2001 OPEN]\u5730\u9707\n\n### \u9898\u76ee\uff1a\n- [\u94fe\u63a5](https://www.luogu.org/problem/P4951)\n\n### \u9898\u89e3\uff1a\n- \u9996\u5148\u7b54\u6848\uff1aans=(F-\u6210\u672c\u4e4b\u548c)/\u65f6\u95f4\u4e4b\u548c\n\n- \u79fb\u4e00\u4e0b\u9879\uff1aans*\u65f6\u95f4\u4e4b\u548c+\u6210\u672c\u4e4b\u548c=F\n\n- \u5199\u5f97\u597d\u770b\u4e00\u70b9\uff1a$ans * \\sum T{i} + \\sum Ci = F$\n\n- \u663e\u7136\uff0c\u53f3\u8fb9\u662f\u4e00\u4e2a\u5b9a\u503c\uff0c\u5de6\u8fb9\u662f\u4e00\u4e2a\u589e\u51fd\u6570\u3002ans\u8d8a\u5927\uff0c\u8fd9\u4e00\u5768\u7684\u503c\u8d8a\u5927\n\n- \u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206ans\uff0c\u5982\u679c\u5de6\u8fb9\u8fd9\u4e00\u5768\u503c>F\uff0c\u8bf4\u660eans\u8981\u51cf\u5c0f\uff0c\u53cd\u4e4b\u8981\u589e\u5927\n\n- \u90a3\u4e48\u600e\u4e48\u7b97\u8fd9\u4e00\u5768\u7684\u503c\u5462\uff1f\u4e5f\u5c31\u662f\u9009\u54ea\u4e9b\u8fb9\u5462\uff1f\n\n- \u76f8\u4fe1\u4f60\u5df2\u7ecf\u770b\u51fa\u6765\u4e86\uff0c\u5c06\u8fb9\u6743\u91cd\u65b0\u5b9a\u4e49\u4e3aans * ti + ci\u3002\u8dd1\u6700\u5c0f\u751f\u6210\u6811\n\n- \u4e3a\u4ec0\u4e48\u8981\u8dd1\u6700\u5c0f\u751f\u6210\u6811\uff1f\u800c\u4e0d\u662f\u6700\u5927\uff1f\n\n- \u56e0\u4e3a\u6211\u4eec\u8981\u8ba9\u5de6\u8fb9\u8fd9\u4e00\u5768\u7684\u503c\u5c3d\u91cf\u5c0f\uff0c\u8fd9\u6837ans\u624d\u80fd\u5c3d\u91cf\u5927\n\n- \u641e\u5b9a\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#define N 40005\n#define M 1000005\n#define eps (1e-8)\nusing namespace std;\n\nstruct E{int u,v;double w;}e[M];\nint n,m;\ndouble f;\nint u[N],v[N],fat[N];\ndouble c[N],t[N];\n\nint read()\n{\n    int x=0;char c=getchar();\n    while(c<'0'||c>'9')c=getchar();\n    while(c>='0'&&c<='9'){x=x*10+c-'0';c=getchar();}\n    return x;\n}\n\nbool cmp(E x,E y) {return x.w<y.w;}\nint getFat(int x) {\n    if(fat[x]==x) return x;\n    return fat[x]=getFat(fat[x]);\n}\n\nbool check(double mid)\n{\n    for(int i=1;i<=n;i++) fat[i]=i;\n    for(int i=1;i<=m;i++) {\n        e[i].w=mid*t[i]+c[i];\n        e[i].u=u[i],e[i].v=v[i];\n    }\n    sort(e+1,e+1+m,cmp);\n    double sum=0;\n    for(int i=1,cnt=0;i<=m;i++) {\n        int fu=getFat(e[i].u),fv=getFat(e[i].v);\n        if(fu!=fv) fat[fu]=fv,cnt++,sum+=e[i].w;\n        if(cnt==n-1) return sum>=f;\n    }\n}\n\nint main()\n{\n    cin>>n>>m>>f;\n    for(int i=1;i<=m;i++) {\n        u[i]=read(),v[i]=read();\n        c[i]=read(),t[i]=read();\n    }\n    double l=0,r=1e12,ans;\n    while(r-l>eps) {\n        double mid=(l+r)/2;\n        if(check(mid)) r=mid,ans=mid;\n        else l=mid;\n    }\n    printf(\"%.4lf\",ans);\n    return 0;\n}\n\n```\n",
        "postTime": 1572957647,
        "uid": 91681,
        "name": "Error_666",
        "ccfLevel": 4,
        "title": "\u6d1b\u8c37 P4951 [USACO 2001 OPEN]\u5730\u9707"
    },
    {
        "content": "\u5f00\u59cb\u6211\u505a\u8fd9\u9053\u9898\u76ee\u7684\u65f6\u5019\uff0c\u53d7\u5230\u4e86\u5750\u5728\u6211\u8fb9\u4e0a\u7684**dalao**\u7684\u542f\u53d1\uff0c\u4e8e\u662f\u6211\u7528\u4e86\u8d2a\u5fc3\u6765\u505a\u8fd9\u9053\u9898\u76ee\u3002\n\n**\u5982\u4f55\u8d2a\u5fc3\uff1f**\n\n\u6211\u4eec\u770b\u5230\uff0c\u8981\u6bd4\u4f8b\u66f4\u5927\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5229\u6da6\u66f4\u5927(\u82b1\u8d39\u66f4\u5c0f)\uff0c\u65f6\u95f4\u66f4\u5c0f\u3002\u6211\u4eec\u5c06\u4e24\u8005\u76f8\u52a0\u4e00\u4e0b\uff0c\u518d\u6392\u4e2a\u5e8f\uff0c\u518d**Kruskal\u7b97\u6cd5**\u8d70\u4e00\u6ce2\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u523070\u5206\u4e86\u3002\n\n#### \u4f46\u662f\u8981\u6ce8\u610f\u4e00\u4e0b\uff0c\u5728\u9047\u5230\u67d0\u4e9b\u548c\u76f8\u7b49\u4f46\u662f\u65f6\u95f4\u548c\u82b1\u8d39\u4e0d\u76f8\u540c\u7684\u8fb9\uff0c\u6211\u4eec\u8981\u4f18\u5148\u6392\u82b1\u8d39\u66f4\u5c0f\u7684\uff0c\u518d\u6392\u65f6\u95f4\u66f4\u5c0f\u7684\u3002\n\n\u770b\u770b\u7a0b\u5e8f\u5427\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,f[401],sum;\nlong long e,ans1,ans2;\nstruct node\n{\n\tint u,v;\n\tlong long pj,t,c;\n}dl[10001];\n////////////////////////////////////////////\ninline int find(int k)\n{\n\tif(f[k]==k)\n\t{\n\t\treturn k;\n\t}\n\treturn find(f[k]);\n}\n/////////////////////////////////////////////\nbool cmp(node a,node b)//\u6539\u53d8\u4e00\u4e0b\u5feb\u6392\u7684\u89c4\u5219\n{\n\treturn a.pj<b.pj||(a.pj==b.pj&&a.c<b.c);\n}\n//////////////////////////////////////////////\ninline long long getint()//\u4e60\u60ef\u6027\u5feb\u901f\u8bfb\u53d6\n{\n\tlong long dmxy=0;\n\tint demaxiya=1;\n\tchar ch;\n\twhile(ch=getchar())\n\t{\n\t\tif((ch>='0'&&ch<='9')||ch=='-')\n\t\t{\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(ch=='-')\n\t{\n\t\tdemaxiya=-1;\n\t\tch=getchar();\n\t}\n\tdo\n\t{\n\t\tif(ch>'9'||ch<'0')\n\t\t{\n\t\t\tbreak;\n\t\t}\n\t\tdmxy=dmxy*10+int(ch-'0');\n\t}while(ch=getchar());\n\treturn dmxy*demaxiya;\n}\n//////////////////////////////////////////\nvoid ct(long long a,long long b)\n{\n\tdouble x=a,y=b,z=e,k=(z-y)/x;\n\tif(k<=0)\n\t{\n\t\tcout<<\"0.0000\";\n\t}\n\telse\n\t{\n\t\tprintf(\"%0.4f\",k);\n\t}\n\treturn;\n}\n///////////////////////////////////////////\nvoid read()\n{\n\tn=getint(),m=getint(),e=getint();\n\tfor(int i=1;i<=n;i++)//\u521d\u59cb\u5316\u5e76\u67e5\u96c6\n\t{\n\t\tf[i]=i;\n\t}\n\tfor(int i=1;i<=m;i++)\n\t{\t\n    \t\tdl[i].u=getint(),dl[i].v=getint(),dl[i].c=getint(),dl[i].t=getint();\n\t\tdl[i].pj=dl[i].c+dl[i].t;//\u603b\u548c\u7d2f\u52a0\n\t}\n\tsort(dl+1,dl+m+1,cmp);\n\treturn;\n}\n////////////////////////////////////////////\nvoid work()\n{\n\tfor(int i=1;i<=m;i++)//Kruskal\u7b97\u6cd5\n\t{\n\t\tint a=find(dl[i].u),b=find(dl[i].v);\n\t\tif(a==b)\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\t\tans1+=dl[i].t;\n\t\tans2+=dl[i].c;\n\t\tf[a]=b;\n\t\tif(++sum==n-1)\n\t\t{\n\t\t\tbreak;\n\t\t}\n\t\n\tct(ans1,ans2);\n\treturn;\n}\n//////////////////////////////////////////////\nint main()\n{\n\tread();\n    work();\n\treturn 0;//\u597d\u4e60\u60ef\n}\n```\n\n\u4e0d\u77e5\u5230Kruskal\u7b97\u6cd5\u7684\u53f3\u8f6c\u5ea6\u5a18\uff1a[Kruskal\u7b97\u6cd5](https://baike.baidu.com/item/\u514b\u9c81\u65af\u5361\u5c14\u7b97\u6cd5/4455899?fr=aladdin)\n\n**\u4e0d\u60f3AC\u7684oier\u4e0d\u662f\u597doier \u2014\u2014\u9c81\u8fc5** (\u9c81\u8fc5\uff1a\u548c\u6211\u6709\u4ec0\u4e48\u5173\u7cfb\uff1f)\n\n\u5047\u5982\u6211\u8fd8\u4e0d\u77e5\u9053\u8fd9\u9053\u9898\u76ee\u8981\u7528\u4e8c\u5206\u7b54\u6848\uff0c\u548b\u529e\uff1f\n\n\u4e0d\u7528\u7740\u6025\uff08~~\u4f60\u600e\u4e48\u4e0d\u95ee\u95ee\u795e\u5947\u6d77\u87ba~~\uff09,\u4e00\u6b65\u4e00\u6b65\u5730\u6765\u770b\u3002~~\u4e00\u822c~~\u4f60\u5728\u5206\u6790\u7684\u65f6\u5019\u90fd\u4f1a\u5f97\u5230\u4e00\u4e2a\u8fd9\u6837\u7684\u5f0f\u5b50\uff1ar=(f-all(c))\u00f7all(t)\uff08all\u5c31\u662f\u603b\u548c\u7684\u610f\u601d\uff09,\u5bf9\u5427,\u5f53\u7136\uff0c\u8fd9\u662f\u5bf9\u4e8e\u4f60\u9009\u7684\u8fb9\u6765\u8bf4\u7684\u3002\u7136\u540e\u6211\u4eec\u6839\u636e\u5c0f\u5b66\u5b66\u7684\u77e5\u8bc6\uff0c\u5f0f\u5b50\u5de6\u53f3\u4ea4\u6362\uff0c\u5206\u914d\u5f8b\uff0c\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u53d8\u5f0f\uff1a(t1*r+t2*r+...+tn-1*r)+(c1+c2+...+cn-1)=f\u3002\n\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u91cc\u7684\u5173\u952e\u5c31\u662fr\u4e86\uff0c\u90a3\u4e48\u6211\u4eec\u5c31~~\u60c5\u4e0d\u81ea\u7981~~\u5730\u60f3\u5230\u8981\u679a\u4e3er\uff0c\u5982\u4f55\u679a\u4e3e\uff1f**\u5f53\u7136\u5c31\u662f\u4e8c\u5206\u7b54\u6848\u5566!**\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u8fd9\u4e48\u505a\uff0c\u6bcf\u6b21\u4e8c\u5206\u4e00\u4e2ar\uff0c\u5e26\u5165\u5230\u6240\u6709\u7684\u8fb9\u4e2d\uff0c\u7136\u540e\u518d\u751f\u6210\u4e00\u68f5\u6700\u5c0f\u751f\u6210\u6811\uff0c\u5982\u679c\u4f60\u5f97\u5230\u7684\u6700\u5c0f\u751f\u6210\u6811\u7684\u603b\u7684\u5229\u6da6\u662f\u4e00\u4e2a\u6b63\u6570\uff0c\u90a3\u4e48\u8bf4\u660e\u518d\u53f3\u534a\u90e8\u5206\u6709\u66f4\u5927\u7684\u5229\u6da6\uff0c\u5426\u5219\u6211\u4eec\u53ea\u80fd\u5f80\u5de6\u8fb9\u79fb\u52a8\u3002\n\n\u4e8c\u5206\u7684\u601d\u8def\u51fa\u6765\u4e86\uff0c\u5148\u81ea\u5df1\u505a\u7740\uff0c\u505a\u5230\u4e0d\u61c2\u7684\u5730\u65b9\u81ea\u5df1\u601d\u8003\u4e00\u4e0b\uff0c\u5b9e\u5728\u4e0d\u884c\u518d\u6765\u770b\u4ee3\u7801\u5427\u3002\n\n## \u6765\uff0c\u4e0a\u4ee3\u7801\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst double eps=1e-6;\nint n,m,f,h[10001];\nstruct edge\n{\n    int u,v,c,t;\n\tdouble pj;\n}dl[10001];\n//////////////////////////////////////////////\nint findf(int x)\n{\n    if(h[x]==x) return h[x];\n    return h[x]=findf(h[x]);\n}\n//////////////////////////////////////////////\nbool cmp(edge a,edge b){return a.pj>b.pj;}\n//////////////////////////////////////////////\nbool check(double r)\n{\n    for(int i=1;i<=n;i++) h[i]=i;//\u5e76\u67e5\u96c6\u521d\u59cb\u5316\n    for(int i=1;i<=m;i++) dl[i].pj=-dl[i].c-r*dl[i].t;//\u4e0a\u9762\u8bb2\u89e3\u8fc7\u4e86\u3002\u4f46\u662f\u8fd9\u91cc\u8fd8\u662f\u8981\u8bf4\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u662f-dl[i].c\u3002\u5982\u679c\u4f60\u7ee7\u7eed\u5f80\u4e0b\u8bfb\u4ee3\u7801\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0sum\u7684\u503c\u5e94\u8be5\u662f\u8981\u4e0d\u65ad\u53d8\u5c0f\u7684\uff0c\u8fd9\u91cc\u53ea\u662f\u505a\u4e86\u4e00\u4e2a\u65b9\u4fbf\u53d8\u5c0f\u7684\u5904\u7406\u3002\n    sort(dl+1,dl+m+1,cmp);\n    int num=0;double sum=f;//num\u8868\u793a\u52a0\u5165\u6811\u7684\u8fb9\u7684\u6570\u91cf\uff0csum\u8868\u793a\u5269\u4f59\u7684\u5229\u6da6\n    for(int i=1;i<=m;i++) //Kruskal\u7b97\u6cd5\n\t{\n        if(num==n-1) break;\n        int x=findf(dl[i].u),y=findf(dl[i].v);\n        if(x!=y) \n\t\t{\n            num++,h[x]=y;\n            sum+=dl[i].pj;//\u4e0a\u9762\u89e3\u91ca\u4e86\n        }\n    }\n    return sum>=0;\n}\n//////////////////////////////////////////////\nint main()\n{\n    cin>>n>>m>>f;\n    for(int i=1;i<=m;i++)cin>>dl[i].u>>dl[i].v>>dl[i].c>>dl[i].t;\n    double l=0,r=1e9,mid;\n    while(l+eps<r)\n    {\n        mid=(l+r)/2;\n        if(check(mid)) l=mid;\n        else r=mid;\n    }\n    printf(\"%.4lf\\n\",r);\n    return 0;\n}\n```\n\n### \u6ce8\u610f\uff1a\u7a0b\u5e8f\u4e0d\u4fdd\u8bc1\u4e0e\u9898\u89e3\u4e0a\u6240\u8bf4\u5206\u6570\u76f8\u7b49\uff0c\u4e5f\u4e0d\u4fdd\u8bc1\u4e0d\u7f16\u8bd1\u9519\u8bef\uff0c\u4ed6\u4eec\u7684\u4f5c\u7528\u53ea\u662f\u8ba9\u4f60\u660e\u767d\u601d\u8def",
        "postTime": 1571146415,
        "uid": 93018,
        "name": "LemonChay",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4951 \u3010[USACO 2001 OPEN]\u5730\u9707\u3011"
    },
    {
        "content": "### **\u4e8c\u5206\u7b54\u6848\u597d\u9898\uff01**\n\u8fd9\u9898\u867d\u7136\u5e74\u4ee3\u4e45\u8fdc\uff082001\uff09\uff0c\u4f46\u662fUSACO\u51fa\u9898\u8005\u7684\u667a\u6167~~duliu~~\u786e\u5b9e\u8ba9\u6211\u4eec\u60ca\u53f9\u3002\n\n\u9898\u610f\u662f\u8bf4\u7ed9\u51fa\u4e00\u5f20\u65e0\u5411\u56fe\uff0c\u6bcf\u6761\u8fb9\u6709\u4e00\u4e2a\u65f6\u95f4 $ t $ \u548c\u4e00\u4e2a\u82b1\u8d39 $ c $ \uff0c\u53e6\u7ed9\u51fa\u916c\u52b3 $ f $ \uff0c\u6c42\u5e73\u5747\u65f6\u95f4\u7684\u5229\u6da6\u3002\n\n\u4e0d\u59a8\u8bbe\u5e73\u5747\u65f6\u95f4\u7684\u5229\u6da6\u4e3a $ ans $ \uff0c\u5219 $ ans = \\frac{ f - \\sum{ c_i } }{ \\sum{ t_i } }$ \u3002\u5bf9\u5f0f\u5b50\u8fdb\u884c\u53d8\u6362\u6613\u5f97 $ f - \\sum{ c_i } - ans * \\sum{ t_i } = 0 $ \u3002\n\n\u4ee4\u51fd\u6570 $ f ( ans ) = f - \\sum{ c_i } - ans * \\sum{ t_i } $ \uff0c\u663e\u7136 $ f ( ans ) $ \u662f\u5177\u6709\u5355\u8c03\u6027\u7684\uff0c\u5728\u672c\u9898\u8303\u56f4\u5185\u5355\u8c03\u9012\u51cf\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e8c\u5206\u7b54\u6848\u7684\u505a\u6cd5\u6765\u89e3\u51b3\u8fd9\u9053\u9898\u76ee\uff0c\u5bf9 $ ans $ \u8fdb\u884c\u4e8c\u5206\u3002\n\n\u5f53\u7136\uff0c\u4e8c\u5206\u7b54\u6848\u7684\u7cbe\u9ad3\u6c38\u8fdc\u662f $ check $ \u51fd\u6570\u3002\u672c\u9898\u4e2d\u4e3a\u4e86\u68c0\u9a8c\u7b54\u6848\u7684\u5408\u6cd5\u6027\uff0c\u7531\u524d\u9762\u7684\u5f0f\u5b50\u4e0d\u59a8\u5c06\u6bcf\u6761\u8fb9\u7684\u6743\u503c\u8bbe\u5b9a\u4e3a $ c_i + ans * t_i $ ,\u901a\u8fc7\u8dd1\u4e00\u904d $ Kruskal $ \u5f88\u5bb9\u6613\u7b97\u51fa$ \\sum{ c_i } + ans * \\sum{ t_i } $ \uff0c\u82e5 $ f $ \u5c0f\u4e8e\u8be5\u503c\u5219\u7b54\u6848\u8fc7\u5c0f\uff0c\u53cd\u4e4b\u7b54\u6848\u8fc7\u5927\u3002\n\n\u81f3\u6b64\uff0c\u672c\u9898\u7ed3\u675f\uff01\u5176\u4f59\u7ec6\u8282\u89c1\u4e0b\u65b9\u4ee3\u7801\u3002\u6709\u7591\u95ee\u548c\u6307\u6b63\u8bc4\u8bba\u533a\u89c1\uff0c\u8c22\u8c22\u89c2\u770b\uff01\n\n\u6269\u5c55\u9605\u8bfb\uff1a[\u6700\u4f18\u6bd4\u7387\u751f\u6210\u6811](https://www.jianshu.com/p/d40a740a527e)\n\n\u672c\u9898\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read()\n{\n\tint ret=0,f=1;\n\tchar ch=getchar();\n\twhile(ch>'9'||ch<'0')\n\t{\n\t\tif(ch=='-')\n\t\t\tf=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tret=(ret<<1)+(ret<<3)+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn ret*f;\n}\nint n,m,f,fa[405];\nlong long mid,l,r=2e15;\nstruct Edge\n{\n\tint x;\n\tint y;\n\tint c;\n\tint t;\n\tdouble w;\n}edge[10005];\ninline bool cmp(Edge a,Edge b)\n{\n\treturn a.w<b.w;\n}\ninline int find(int x)\n{\n\tif(fa[x]==x)\n\t\treturn x;\n\treturn fa[x]=find(fa[x]);\n}\ninline bool check(long long mid)\n{\n    for(register int i=1;i<=m;i++)\n\t\tedge[i].w=mid/(3e6+0.0)*edge[i].t+edge[i].c;\n    int tmp=1;\n    sort(edge+1,edge+m+1,cmp);\n\tfor(register int i=1;i<=n;i++)\n\t\tfa[i]=i;\n    double k=f+1e-12;\n    for(register int i=2;i<=n;i++)\n\t{\n        while(tmp<=m&&find(edge[tmp].x)==find(edge[tmp].y))\n\t\t\ttmp++;\n        fa[find(edge[tmp].x)]=find(edge[tmp].y),k-=edge[tmp].w;\n        if(k<0)\n\t\t\treturn false;\n    }\n\treturn true;\n}\nint main()\n{\n    n=read();\n\tm=read();\n\tf=read();\n    for(register int i=1;i<=m;i++)\n\t{\n\t\tedge[i].x=read();\n\t\tedge[i].y=read();\n\t\tedge[i].c=read();\n\t\tedge[i].t=read();\n\t}\n    if(!check(0))\n\t{\n\t\tprintf(\"0.0000\\n\");\n\t\treturn 0;\n\t}\n    while(l<r)\n\t{\n        mid=(l+r)>>1;\n        if(check(mid+1))\n\t\t\tl=mid+1;\n        else\n\t\t\tr=mid;\n    }\n\tprintf(\"%0.4lf\\n\",l/(3e6+0.0));\n    return 0;\n}\n```",
        "postTime": 1549955399,
        "uid": 108560,
        "name": "Peter0701",
        "ccfLevel": 6,
        "title": "P4951 \u9898\u89e3"
    }
]
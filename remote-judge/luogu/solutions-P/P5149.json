[
    {
        "content": "trie\u6811\u52a0\u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9\uff0c\u7edd\u5bf9\u6ca1\u6709\u91cd\u590d\u9898\u89e3=.=\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#define ll long long\n#define rgi register int \n#define maxn 100005\n#define N 500005\nusing namespace std;\nint n,a[maxn],tree[maxn],num[N],trie[N][100];\nll ans=0,tot;\nstring s;\nvoid upd(string s,int x)\n{\n    int p=0;\n    for(int i=0;i<s.size();i++)\n    {\n        if(!trie[p][s[i]-'A'])\n            trie[p][s[i]-'A']=++tot;\n        p=trie[p][s[i]-'A'];\n    }\n    num[p]=x;\n}//\u63d2\u5165\u5b57\u7b26\u4e32\nint get(string s)\n{\n    int p=0;\n    for(int i=0;i<s.size();i++)\n        p=trie[p][s[i]-'A'];\n    return num[p];\n}\ninline int lowbit(int x)\n{\n\treturn x&(-x);\n}\ninline void add(int x,int k)\n{\n\tfor(;x<=n;x+=lowbit(x))\n\t\ttree[x]+=k;\n}\nll query(int x)\n{\n\tll tmp=0;\n\tfor(;x;x-=lowbit(x))\n\t\ttmp+=tree[x];\n\treturn tmp;\n}\nint main()\n{\n\tcin>>n;\n\tfor(rgi i=1;i<=n;++i)\n\t{\n\t\tcin>>s;\n\t\tupd(s,i);\n\t}\n\tfor(rgi i=1;i<=n;++i)\n\t{\n\t\tcin>>s;\n\t\ta[i]=get(s);\n\t}\n\tfor(rgi i=1;i<=n;++i)\n\t{\n\t\tadd(a[i],1);\n\t\tans+=i-query(a[i]);\n\t}\n\tcout<<ans;\n}\n```",
        "postTime": 1555577685,
        "uid": 140659,
        "name": "\u6e3a\u5c0f\u7684Mastar",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "##  \u4e0d\u96be\u53d1\u73b0\uff0c\u6b64\u9898\u5c31\u662f\u5728\u627e\u9006\u5e8f\u5bf9\uff0c\u53ea\u4e0d\u8fc7\u6570\u5b57\u6362\u6210\u4e86\u5b57\u7b26\u4e32\n### ~~\u6ce8\uff1a\u65b9\u6cd52\u4e0d\u662f\u91cd\u590d\u7684\u89e3\u6cd5~~\n\u6211\u7528\u5f52\u5e76\u6392\u5e8f\u6765\u6c42\u6570\u5b57\u7684\u9006\u5e8f\u5bf9  \n\u90a3\u4e48\u5b57\u7b26\u4e32\u600e\u4e48\u627e\u9006\u5e8f\u5bf9\u5462\uff1f\n### \u65b9\u6cd51\uff1a$map$\n\u57fa\u672c\u4e0a\u5176\u4ed6\u9898\u89e3\u4e5f\u90fd\u6709\u7528\uff0c\u8bbe\u4e00\u4e2a$map<string,int>m$\u5373\u53ef\uff0c\u6620\u5c04\u7684\u6570\u5b57\u662f\u5b57\u7b26\u4e32\u7684\u7f16\u53f7\u3002\n#### \u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N=1e5+5;\nstring s;\nint n,a[N],b[N];\nlong long ans;//\u8bb0\u5f97\u5f00longlong\nmap<string,int>m;//map\u5728\u8fd9\u91cc\n\nvoid merge_sort(int left,int right)//\u5f52\u5e76\u6392\u5e8f\n{\n\tif(left>=right) return;\n\tint mid = (right-left)/2+left;\n\tmerge_sort(left,mid);\n\tmerge_sort(mid+1,right);\n\tint i=left,j=mid+1,k=left;\n\twhile(i<=mid && j<=right)\n\t{\n\t\tif(a[i]<a[j]) b[k++]=a[i++];\n\t\telse b[k++] = a[j++],ans+=mid-i+1;//\u589e\u52a0\u9006\u5e8f\u5bf9\n\t}\n\twhile(i<=mid) b[k++] = a[i++];\n\twhile(j<=right) b[k++] = a[j++];\n\tfor(int i=left;i<=right;i++) a[i]=b[i];\n}\n\nint main()\n{\n\tios::sync_with_stdio(0);cin.tie(0);cout.tie(0);//\u52a0\u901fcincout\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>s;\n\t\tm[s]=i;//\u5f53\u524d\u7f16\u53f7\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>s;\n\t\ta[m[s]]=i;\n\t}\n\tmerge_sort(1,n);\n\tcout<<ans;\n\treturn 0;\n}\n```\n### \u65b9\u6cd52\uff1a\u5b57\u7b26\u4e32\u6392\u5e8f\n\u53d1\u73b0\u5176\u4ed6\u9898\u89e3\u90fd\u6ca1\u6709\u8fd9\u4e2a\u505a\u6cd5\uff0c\u6211\u6765\u4e00\u4e2a\u5427\u3002  \n\u6211\u4eec\u53ef\u4ee5\u5199\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u4fdd\u5b58\u539f\u6765\u548c\u73b0\u5728\u7684\u4e24\u4e2a\u5b57\u7b26\u4e32\uff0c\u7136\u540e**\u4ee5\u539f\u6765\u7684\u5b57\u7b26\u4e32\u4e3a\u5173\u952e\u5b57\u8fdb\u884c\u6392\u5e8f**\uff0c\u63a5\u7740\u5c31\u53ef\u4ee5\u5b57\u7b26\u4e32\u5f0f\u5f52\u5e76\u6392\u5e8f\u3002   \n\u800c\u4e14$string$\u7684\u8fd0\u7b97\u7b26\u5df2\u7ecf\u88ab\u91cd\u8f7d\uff0c\u76f4\u63a5\u4f7f\u7528\u5f52\u5e76\u6392\u5e8f\u5373\u53ef\u3002  \n#### \u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N=1e5+5;\nstring a[N],b[N];\nint n;\nlong long ans;/longlong\uff01\n\nstruct node\n{\n\tstring s,a;//\u539f\u6765\u7684s\u548c\u73b0\u5728\u7684a\n}s[N];\n\nvoid merge_sort(int left,int right)//\u5f52\u5e76\u6392\u5e8f\n{\n\tif(left>=right) return;\n\tint mid = (right-left)/2+left;\n\tmerge_sort(left,mid);\n\tmerge_sort(mid+1,right);\n\tint i=left,j=mid+1,k=left;\n\twhile(i<=mid && j<=right)\n\t{\n\t\tif(a[i]<a[j]) b[k++]=a[i++];\n\t\telse b[k++] = a[j++],ans+=mid-i+1;\n\t}\n\twhile(i<=mid) b[k++] = a[i++];\n\twhile(j<=right) b[k++] = a[j++];\n\tfor(int i=left;i<=right;i++) a[i]=b[i];\n}\n\nbool cmp(node x,node y)\n{\n\treturn x.s<y.s;//\u4ee5\u539f\u6765\u4e3a\u5173\u952e\u5b57\n}\n\nint main()\n{\n\tios::sync_with_stdio(0);cin.tie(0);cout.tie(0);//\u52a0\u901f\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)cin>>s[i].s;\n\tfor(int i=1;i<=n;i++)cin>>s[i].a;\n\tsort(s+1,s+n+1,cmp);//sort\u6392\u5e8f\n\tfor(int i=1;i<=n;i++)a[i]=s[i].a;//\u73b0\u5728\u7684\u8d4b\u503c\u7ed9a\u6570\u7ec4\uff0c\u53ef\u76f4\u63a5\u5957\u5230\u5f52\u5e76\u6392\u5e8f\n\tmerge_sort(1,n);\n\tcout<<ans;\n\treturn 0;\n}\n```\n### \u8bb0\u5f97\u5f00$\\mathcal{LONG\\;LONG}$\uff01\n~~\u505a\u6cd5\u65b0\u9896\uff0c\u6c42\u8fc7~~",
        "postTime": 1587526965,
        "uid": 312393,
        "name": "ADay",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "n<=100000\uff0c\u663e\u7136\u53ef\u4ee5O(N\u221aN)\u6c34\u8fc7\u3002\n\n\u6838\u5fc3\u601d\u8def\uff1amap\u79bb\u6563\u5316+\u5206\u5757\u627e\u9006\u5e8f\u5bf9\u3002\n\n```cpp\n#include <iostream>\n#include <map>\n#include <string>\n#define N 100001\nusing namespace std;\nmap<string,int>num;\nint n,a[N],pos[N],size,sum[N],dot[N];\nlong long ans=0;\ninline void insert(int num)\n{\n\tfor(int i=1;i<pos[num];i++)ans+=sum[i];\n\tfor(int i=(pos[num]-1)*size+1;i<num;i++)ans+=dot[i];\n\tdot[num]++;\n\tsum[pos[num]]++;\n\treturn;\n}\nint main()\n{\n\tcin>>n;\n\tstring s;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>s;\n\t\tnum[s]=i;//\u79bb\u6563\u5316\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>s;\n\t\ta[i]=num[s];\n\t}\n\tfor(size=1;size*size<=n;size++);size--;\n\tfor(int i=1;i<=n;i++)pos[i]=(i-1)/size+1;\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tinsert(a[i]);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1563502827,
        "uid": 14381,
        "name": "1jia1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "+  ~~\u5f53\u4f60\u770b\u5230\u6211\u7684\u65f6\u5019\uff0c\u5c31\u77e5\u9053\u8fd9\u662f\u9053\u6c34\u9898~~\n\n# [P5149](https://www.luogu.com.cn/problem/P5149) \u9898\u89e3\n\n### \u9898\u76ee\u672c\u8d28\uff1a\u6c42\u9006\u5e8f\u5bf9\n\n\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5f88\u5bb9\u6613\u7684\u628a\u8fd9\u9053\u9898\u5206\u4e3a\u4e24\u90e8\u5206\uff1a\n1. \u6c42\u987a\u5e8f\u3002\n2. \u6c42\u9006\u5e8f\u5bf9\u3002\n\n~~\u627e\u5230\u4e86\u9898\u76ee\u5207\u5165\u70b9\u5c31\u53ef\u4ee5\u5f00\u59cb\u5207\u4e86~~\n\n\u7b2c\u4e00\u90e8\u5206\uff0c\u53ef\u4ee5\u4f7f\u7528Hash\u3001Trie\u3001\u751a\u81f3Map\u3002\u800c\u6211\u63a8\u8350Trie\uff0c\u56e0\u4e3a~~\u597d\u6253~~\u3001\u8f83\u5feb\u3001\u65e0\u9519\u3002\u4e3a\u4e86\u83b7\u5f97\u987a\u5e8f\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06\u9644\u52a0\u6570\u7ec4\u8bb0\u5f55\u987a\u5e8f\u5373\u53ef\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\nvoid insert(char s[], int k) {\n  int u = 1;\n  int len = strlen(s);\n  for (int i = 0; i < len; i++) {\n    int a = s[i] - 'a';\n    if (!ch[u][a]) ch[u][a] = ++tot;\n    u = ch[u][a];\n  }\n  cnt[u] = k;\n  return;\n}\n\nvoid find(char s[], int k) {\n  int u = 1;\n  int len = strlen(s);\n  for (int i = 0; i < len; i++) {\n    int a = s[i] - 'a';\n    u = ch[u][a];\n  }\n  finded[k] = cnt[u];\n}\n```\n#### \u5b8c\u6210\u8fd9\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u5c31\u5f97\u5230\u4e86\u5750\u4f4d\u987a\u5e8f\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u6c42\u9006\u5e8f\u5bf9\u5373\u53ef\uff1a\n\n```cpp\nvoid MergeSort(int l, int r) {\n  if (l == r) return;\n  int mid = (l + r) >> 1;\n  MergeSort(l, mid), MergeSort(mid + 1, r);\n  int i = l, j = mid + 1, t = l;\n  while (i <= mid && j <= r)\n    if (finded[i] <= finded[j])\n      b[t++] = finded[i++];\n    else\n      b[t++] = finded[j++], ans += mid - i + 1;\n  while (i <= mid) b[t++] = finded[i++];\n  while (j <= r) b[t++] = finded[j++];\n  for (int k = l; k <= r; ++k) finded[k] = b[k];\n}\n```\n\u4ec0\u4e48\u8fd9\u4e0d\u662f\u5f52\u5e76\u6392\u5e8f\u561b\uff1f\n\n\u6ca1\u9519\uff01\u4f46\u6211\u52a0\u4e86\u4e00\u53e5\u8bdd\uff0c\u770b\u770b\n\n``` \nelse\n      b[t++] = finded[j++], ans += mid - i + 1;\n```\n      \n\u5c31\u662f\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u7edf\u8ba1\u4e86\u6bcf\u6b21\u6392\u5e8f\u4e0d\u7b26\u5408\u987a\u5e8f\u7684\u4e2a\u6570\uff0c\u56e0\u6b64\u5c31\u5f97\u5230\u4e86\u9006\u5e8f\u5bf9\u4e2a\u6570\u3002\n\n### \u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e24\u4e2a\u90e8\u5206\uff0c\u7ed3\u5408\u5373\u53ef\u4e86\uff0c**\u4e0a\u5b8c\u6574\u4ee3\u7801**\uff1a\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\nusing namespace std;\nconst int MAXN = 5e5 + 5;\nint ch[MAXN][26 * 2], cnt[MAXN];\nint n, ans, tot = 1, finded[int(1e5 + 5)], b[int(1e5 + 5)];\nchar s[6];\nvoid insert(char[], int);\nvoid find(char[], int);\nvoid MergeSort(int, int);\n\nint main() {\n  scanf(\"%d\", &n);\n  for (int i = 1; i <= n; i++) {\n    scanf(\"%s\", s);\n    insert(s, i);\n  }\n  for (int i = 1; i <= n; i++) {\n    scanf(\"%s\", s);\n    find(s, i);\n  }\n\n  MergeSort(1, n);\n  cout << ans;\n}\n\nvoid insert(char s[], int k) {\n  int u = 1;\n  int len = strlen(s);\n  for (int i = 0; i < len; i++) {\n    int a = s[i] - 'a';\n    if (!ch[u][a]) ch[u][a] = ++tot;\n    u = ch[u][a];\n  }\n  cnt[u] = k;\n  return;\n}\n\nvoid find(char s[], int k) {\n  int u = 1;\n  int len = strlen(s);\n  for (int i = 0; i < len; i++) {\n    int a = s[i] - 'a';\n    u = ch[u][a];\n  }\n  finded[k] = cnt[u];\n}\n\nvoid MergeSort(int l, int r) {\n  if (l == r) return;\n  int mid = (l + r) >> 1;\n  MergeSort(l, mid), MergeSort(mid + 1, r);\n  int i = l, j = mid + 1, t = l;\n  while (i <= mid && j <= r)\n    if (finded[i] <= finded[j])\n      b[t++] = finded[i++];\n    else\n      b[t++] = finded[j++], ans += mid - i + 1;\n  while (i <= mid) b[t++] = finded[i++];\n  while (j <= r) b[t++] = finded[j++];\n  for (int k = l; k <= r; ++k) finded[k] = b[k];\n}\n```\n\n## \u540e\u8bb0\uff1a\n\n\u4e8e\u662f\uff0c\u4f60\u62ff\u53bb\u4ea4\u4e86\uff1b\u4e8e\u662f\uff0c\u4f60\u53d1\u73b0WA\u4e864\u4e2a\u70b9\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6x45fdo0.png)\n\n\u4f60\u5fd8\u4e86\uff0c**\u4e0d\u5f00** $long $ $ long$ **\u89c1\u7956\u5b97**\uff0c\u4f60\u77e5\u9053\u4e86\u600e\u4e48\u505a\uff0c\u4e8e\u662fAC\u4e86\u8fd9\u9053\u9898\u3002",
        "postTime": 1586417180,
        "uid": 293527,
        "name": "\u98ce\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "## \u601d\u8def \uff1a\u6c42\u9006\u5e8f\u5bf9\u4e2a\u6570\n\n* \u5b57\u7b26\u4e32\u53ef\u4ee5\u7528$STL$\u4e2d\u63d0\u4f9b\u7684$map$\u89e3\u51b3\u3002\n\n* \u6210\u529f\u628a\u5b57\u7b26\u4e32\u8f6c\u5316\u6210\u6570\u5b57\u5e8f\u5217$B$\u540e\uff0c\u5c31\u53ef\u4ee5\u5229\u7528**\u6811\u72b6\u6570\u7ec4** \u6216\u8005**\u5f52\u5e76\u6392\u5e8f** \u6c42\u9006\u5e8f\u5bf9\u4e86 \u3002\n\n* \u5173\u4e8e\u6811\u72b6\u6570\u7ec4\u6c42\u9006\u5e8f\u5bf9\u7684\u539f\u7406\uff1a\n\n  1. \u5bf9\u4e8e\u4efb\u610f\u7684$B[i]$ \uff0c$Add(B[i],1)$ \u8868\u793a$B[i]$ \u5df2\u7ecf\u51fa\u73b0\u8fc7\u3002\n  2. $Ask(B[i]-1)$ \u53ef\u4ee5\u67e5\u627e\u5230\u90a3\u4e9b**\u5df2\u7ecf\u51fa\u73b0\u8fc7** \u7684 \uff0c \u800c\u4e14 **\u5c0f\u4e8e$B[i]$ ** \u7684\u6570\u5b57\u7684**\u4e2a\u6570** \u3002\n  3. \u5df2\u7ecf\u63d2\u5165\u7684$i-1$ \u4e2a\u6570\u5b57\u91cc\uff0c\u6709$i-1-Ask(B[i]-1)$ \u4e2a\u6570\u5927\u4e8e$B[i]$ \uff0c\u5b83\u4eec\u548c$B[i]$ \u6784\u6210\u4e86\u9006\u5e8f\u5bf9\u3002\n  4. \u7d2f\u52a0\u7b54\u6848\u5373\u53ef\n\n* \u70b9\u51fb[\u8fd9\u91cc](https://www.luogu.org/problemnew/show/P3374)\u5b66\u4e60\u6811\u72b6\u6570\u7ec4\n\n* Code\n\n  ```cpp\n  #include <iostream>\n  #include <fstream>\n  #include <algorithm>\n  #include <string.h>\n  #include <stdio.h>\n  #include <map>\n  #define re register\n  #define GC getchar()\n  #define Lowbit(X) (X&(-X))\n  using namespace std ;\n  const int Maxn = 100000  , Dlt = 1;\n  int N ;\n  struct Person {\n  \tint Place ;\n  \tstring Name ;\n  };\n  Person A[Maxn + Dlt] ;\n  map <string , int > M ;\n  int B[Maxn + Dlt] ;\n  int T[Maxn + Dlt] ;\n  /*\n  \u5934\u6587\u4ef6\u548c\u51c6\u5907\u5de5\u4f5c\n  \u7ed3\u6784\u4f53Person \u4e2d\u7684Place\u662f\u539f\u6709\u7684\u4f4d\u7f6e\uff0cName\u662f\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32\uff1b\n  \u6570\u7ec4B\u662f\u6253\u4e71\u7684\u5e8f\u5217\uff0cT\u662f\u6811\u72b6\u6570\u7ec4\u3002\n  */\n  void Add (int X , int K) {\n  \twhile (X <= N) {\n  \t\tT[X] += K ;\n  \t\tX += Lowbit(X) ;\n  \t}\n  }\n  int Ask (int X) {\n  \tint Ans = 0 ;\n  \twhile (X > 0) {\n  \t\tAns += T[X] ;\n  \t\tX -= Lowbit(X) ;\n  \t}\n  \treturn Ans ;\n  }\n  //\u6811\u72b6\u6570\u7ec4\u7684\u6dfb\u52a0\u548c\u67e5\u8be2\u64cd\u4f5c\n  int main () {\n  \t//freopen (\"P5149.in\" , \"r\" , stdin) ;\n  \tscanf (\"%d\" , &N) ;\n  \tM.clear();\n  \tfor (re int i = 1 ; i <= N ; ++ i) {\n  \t\tcin >> A[i].Name ;\n  \t\tM[A[i].Name] = i ;\n  \t}\n  \tstring S ;\n  \tfor (re int i = 1 ; i <= N ; ++ i) {\n  \t\tcin >> S ;\n  \t\tB[i] = M[S] ;\n  \t}\n  //\t\u5229\u7528map\u5b8c\u6210\u628a\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6570\u5b57\u7684\u64cd\u4f5c\uff0c\u65b9\u4fbf\u540e\u7eed\u6811\u72b6\u6570\u7ec4\u7684\u64cd\u4f5c\n  \tmemset (T , 0 , sizeof(T)) ;\n  \tlong long int Ans = 0 ;\n  \tfor (re int i = 1 ; i <= N ; ++ i) {\n  \t\tAdd (B[i] , 1) ;\n  \t\tAns += i - Ask(B[i] - 1) - 1 ;\n  \t}\n  \tcout << Ans<<endl;\n  \tfclose (stdin) ;\n  \tfclose (stdout);\n  \treturn 0;\n  }\n  ```\n\n  ### Thanks!",
        "postTime": 1545659064,
        "uid": 35219,
        "name": "Baihua",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "\u9996\u5148\u8fd9\u9053\u9898\u8981\u7528map\u5904\u7406\u4e00\u4e0b\uff0c\u5c31\u662f\u5148\u5c06\u6bcf\u4f4d\u8001\u5e08\u7684\u6807\u51c6\u5ea7\u53f7\u5b58\u50a8\u4e00\u4e0b\u3002\u7b2c\u4e8c\u884c\u8f93\u5165\u65f6\uff0c\u5c06\u6bcf\u4f4d\u8001\u5e08\u5bf9\u5e94\u6807\u53f7\uff0c\u5c31\u53ef\u4ee5\u4ea7\u751f\u4e00\u7cfb\u5217\u6570\u7ec4\uff0c\u63a5\u7740\u5c31\u53ef\u4ee5\u7b80\u5355\u9006\u5e8f\u5bf9\u5566\uff01\n\n```\n    for(int i=0;i<n;i++){\n    \tcin>>x[i];\n    \tbook[x[i]]=i;\n\t}\n    for(int i=1;i<=n;i++){\n    \tcin>>y[i];\n    \ta[i]=book[y[i]];\n\t}\n```\n\n\u8fd9\u4e00\u6bb5\u8bb2\u4e86map\u7684\u5177\u4f53\u5b9e\u73b0\n\n\u63a5\u7740\u662f\u9006\u5e8f\u5bf9\uff1a[\u53c2\u8003\u9898\u76ee](https://www.luogu.com.cn/problem/P1908)\n\n\u91cc\u8fb9\u7684\u9898\u89e3\u90fd\u8bb2\u7684\u975e\u5e38\u597d\uff0c\u6211\u5c31\u627e\u91cd\u70b9\u8bf4\u3002\n\n\u9006\u5e8f\u5bf9\u7528\u5230\u5f52\u5e76\u6392\u5e8f\u7684\u601d\u60f3\uff0c\u5c31\u662f\u5148\u62c6\u5206\uff0c\u518d\u5408\u5e76\u8d77\u6765\u3002\n\n\u4e0b\u8fb9\u5f15\u7528\u8fd9\u4f4d\u5927\u4f6c\u5728[\u8fd9\u4e00\u7bc7\u9898\u89e3\u91cc\u7684\u4e00\u5e45\u56fe](https://www.luogu.com.cn/blog/qqq1112/solution-p1908)\n\n![](https://cdn.luogu.com.cn/upload/pic/59594.png)\n\n\u8be6\u7ec6\u7684\u672c\u849f\u84bb\u5c31\u4e0d\u8bb2\u4e86\uff0c\u770b\u8fd9\u4f4d\u5927\u4f6c\u7684\u5c31\u884c\u4e86\u3002\n\n\u672c\u849f\u84bb\u8fd9\u91cc\u5217\u51fa\u7684\u662f\u4e00\u79cd\u7cbe\u7b80\u7248\uff0c\u7801\u98ce\u7a0d\u5fae\u597d\u4e00\u70b9\u3002\n\n```\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<string>\n#include<cstring>\n#include<algorithm>\n#include<map>\nusing namespace std;\nlong long ans;\nint a[1000000],b[1000000],n;\nstring x[1000000],y[1000000];\nvoid p(int x,int y)\n{\n    if(x==y)\n\t\treturn;\n    int m=(x+y)/2;\n    p(x,m);\n    p(m+1,y);\n    int i=x,j=m+1,k=x;\n    while(i<=m&&j<=y){\n        if(a[i]<=a[j]){\n        \tb[k]=a[i];\n\t\t\tk++;\n\t\t\ti++;\n\t\t}\n        else{\n            b[k]=a[j];\n\t\t\tk++;\n\t\t\tj++;\n            ans+=m-i+1;\n        }\n    }\n    while(i<=m){\n    \tb[k]=a[i];\n\t\tk++;\n\t\ti++;\n\t}\n    while(j<=y){\n    \tb[k]=a[j];\n\t\tk++;\n\t\tj++;\n\t}\n    for(int i=x;i<=y;i++)\n        a[i]=b[i];\n}\nmap<string,int> book;\nint main()\n{\n    cin>>n;\n    for(int i=0;i<n;i++){\n    \tcin>>x[i];\n    \tbook[x[i]]=i;\n\t}\n    for(int i=1;i<=n;i++){\n    \tcin>>y[i];\n    \ta[i]=book[y[i]];\n\t}\n    p(1,n);\n    cout<<ans;\n    return 0;\n}\n```\n\n\u8c22\u8c22\u5927\u5bb6\uff01",
        "postTime": 1593843369,
        "uid": 253738,
        "name": "\u542c\u53d6MLE\u58f0\u4e00\u7247",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "# \u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9 +map\u5904\u7406\u5b57\u7b26\u4e32\u3002\n\n\u867d\u7136\u5199\u8fd9\u9053\u9898\u65f6\u662f\u770b\u6807\u7b7e trie\u6811\u6765\u5199\u7684\uff0c\u4f46\u662f\u53d1\u73b0\u7528map\u5904\u7406\u66f4\u65b9\u4fbf\u3002  \n\n\u7b2c\u4e00\u904d\u8f93\u5165\u65f6\u7528map\u5bf9\u6bcf\u4e2a\u5b57\u7b26\u4e32\u8d4b\u4e88\u6570\u5b57\u3002  \n\u7b2c\u4e8c\u904d\u8f93\u5165\u65f6\u751f\u6210\u6570\u7ec4\uff0c\u7528\u6570\u5b57\u5bf9\u5e94\u5b57\u7b26\u4e32    \n\n\u5177\u4f53\u4e3a\uff1a\n\n------------\n\n```cpp\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t   {\n\t   \tcin>>s;\n\t   \tnmsl[s]=i;\n\t   }\n\tint j=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\t cin>>s;\n\t\t c[++j]=nmsl[s];\n\t}\n```\n\n\n------------\n\u7136\u540e\u5f52\u5e76\u6392\u5e8f\u7684\u90e8\u5206\uff1a\n\n\n------------\n```cpp\nvoid qsort(int a,int b)\n{\t\n    if(a==b)return;\n\tint mid=(a+b)>>1;\n\tint i=a,j=mid+1,k=a;\n    qsort(a,mid),qsort(mid+1,b);\n    while(i<=mid&&j<=b)\n\tif(c[i]<=c[j])\n\t  {\n\t  \td[k++]=c[i++];\n\t  }\n\telse \n\t  {\n\t  \td[k++]=c[j++];\n\t  \tans+=mid-i+1;\n\t  }\n\twhile(i<=mid)\n\t  \td[k++]=c[i++];\n\twhile(j<=b)\n\t    d[k++]=c[j++];\n\tfor(int l=a;l<=b;l++)\n\t    c[l]=d[l];\n}\n```\n\n\n------------\n\u4e8e\u662f\u5408\u8d77\u6765\u5c31\u662fAC\u4ee3\u7801  \n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<map>\nusing namespace std;\nstring s;\nmap<string,int>nmsl;\nint n;\nlong long ans=0;\nint c[1000001],d[1000001];\nvoid qsort(int a,int b)\n{\t\n    if(a==b)return;\n\tint mid=(a+b)>>1;\n\tint i=a,j=mid+1,k=a;\n    qsort(a,mid),qsort(mid+1,b);\n    while(i<=mid&&j<=b)\n\tif(c[i]<=c[j])\n\t  {\n\t  \td[k++]=c[i++];\n\t  }\n\telse \n\t  {\n\t  \td[k++]=c[j++];\n\t  \tans+=mid-i+1;\n\t  }\n\twhile(i<=mid)\n\t  \td[k++]=c[i++];\n\twhile(j<=b)\n\t    d[k++]=c[j++];\n\tfor(int l=a;l<=b;l++)\n\t    c[l]=d[l];\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t   {\n\t   \tcin>>s;\n\t   \tnmsl[s]=i;\n\t   }\n\tint j=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\t cin>>s;\n\t\t c[++j]=nmsl[s];\n\t}\n\tqsort(1,n);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n//\u8bb0\u4f4fans\u4e00\u5b9a\u5f00longlong  \n\u9996\u6b21\u63d0\u4ea4\u5e94\u4e3a\u6ca1\u5f00longlong60\u5206\u3002\u3002\n~~\u518d\u5f00\u9519\u5241\u624b~~\n\n \u5e0c\u671b\u8fd9\u7bc7\u9898\u89e3\u7ed9\u5927\u5bb6\u5e2e\u52a9  \n \u6211\u7684\u7b2c\u4e8c\u7bc7\u9898\u89e3",
        "postTime": 1570606882,
        "uid": 117973,
        "name": "\u8c22\u8c22_\u5bf9\u4e0d\u8d77",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "# \u5b57\u7b26\u4e32 $+$ \u9006\u5e8f\u5bf9 $->$ \u6811 $+$ \u6811 $?$\n# $trie$\u6811 $+$ $zkw$\u7ebf\u6bb5\u6811\n\n------------\n\n## \u9898\u610f\uff1a\u7ed9\u4f60$n$\u4e2a\u5b57\u7b26\u4e32\uff0c\u6c42\u6253\u4e71\u540e\u7684\u9006\u5e8f\u5bf9\u4e2a\u6570\u3002\n**(\u6084\u6084\u544a\u8bc9\u4f60\uff0c\u6211\u662f\u4ece$P4375$\u2014\u2014\u4e00\u4e2a\u9006\u5e8f\u5bf9\u9898\u8fc7\u6765\u7684)**\n**\u4e00\u770b\u5230\u9006\u5e8f\u5bf9\uff0c\u6211\u5c31\u719f\u7ec3\u7684\u6253\u8d77\u4e86$zkw$\u7ebf\u6bb5\u6811\u3002**\n```cpp\n        update(a[i],1),ans+=i-query(1,a[i]);//\u9006\u5e8f\u5bf9\u4e13\u7528\u6a21\u677f\n```\n**\u8fd9\u91cc$zkw$\u7ebf\u6bb5\u6811\u7684\u5b9e\u73b0\u73c2\u4ee5\u53c2\u8003\u672c\u849f\u84bb\u5199\u7684**[$P4375$\u7684\u9898\u89e3](https://www.luogu.org/blog/CreeperBatter/solution-p4375)\n\n**$trie$\u6811\u4e5f\u597d\u50cf\u53ea\u8d77\u4e86$hash$\u7684\u4f5c\u7528\uff1f\u5957\u6a21\u677f\u5c31\u884c\u3002**\n\n\n### \u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a(\u5dee\u70b9$MLE$\uff0c\u65f6\u95f4\u4e0e\u6811\u72b6\u6570\u7ec4\u4e0d\u76f8\u4e0a\u4e0b)\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=500005;\nint n,d=1,cnt=1,ch[maxn]['z'-'A'+1],a[maxn],f[maxn];\nint zkw[maxn<<1];char s[105];\ninline int read(){\n\tint x=0,f=0;char ch=getchar();\n\twhile(!isdigit(ch)){f|=ch=='-';ch=getchar();}\n\twhile(isdigit(ch)){x=(x*10)+(ch^48);ch=getchar();}\n\treturn f?-x:x;\n}\ninline void insert(char *s,int tim){\n\tint u=1,len=strlen(s);\n\tfor(int i=0;i<len;++i){\n\t\tint c=s[i]-'A';\n\t\tif(!ch[u][c])\n\t\t\tch[u][c]=++cnt;\n\t\tu=ch[u][c];\n\t}\n\tf[u]=tim;\n}\ninline int getsum(char *s){\n    int len=strlen(s),u=1;\n    for(int i=0;i<len;++i){\n        int c=s[i]-'A';\n        u=ch[u][c];\n    }\n    return f[u];\n}\ninline void update(int pos,int val){for(pos+=d;pos;pos>>=1)zkw[pos]+=val;}\ninline int query(int l,int r){int ans=0;for(l=l+d-1,r=r+d+1;l^r^1;l>>=1,r>>=1){if(~l&1)ans+=zkw[l^1];if(r&1)ans+=zkw[r^1];}return ans;}\nsigned main(){\n    cnt=1;\n    memset(f,0,sizeof f);memset(ch,0,sizeof ch);\n    for(int i=0;i<=25;++i)\n        ch[0][i]=1;\n    n=read();\n    long long ans=0;\n    while(d<=n+1)\n        d<<=1;\n    for(register int i=1;i<=n;++i){\n        scanf(\"%s\",s);\n        insert(s,i);\n    }\n    for(register int i=1;i<=n;++i){\n        scanf(\"%s\",s);\n        a[i]=getsum(s);\n    }\n    for(register int i=1;i<=n;++i){\n        update(a[i],1);\n        ans+=i-query(1,a[i]);\n    }\n    cout<<ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1566097632,
        "uid": 62246,
        "name": "Del_Your_Heart",
        "ccfLevel": 0,
        "title": "P5149 \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\n[P5149 \u4f1a\u8bae\u5ea7\u4f4d](https://www.luogu.com.cn/problem/P5149)\n### \u601d\u8def\n$trie \\ +$ \u5f52\u5e76\u6392\u5e8f\u3002\n\n\u7b2c\u4e00\u904d\u5148\u6309\u539f\u987a\u5e8f\u628a\u6bcf\u4e2a\u4eba\u52a0\u5230\u5b57\u5178\u6811\u91cc\uff0c\u7528\u5b57\u5178\u6811\u7ef4\u62a4\u4e86\u8fd9\u4e2a\u4eba\u539f\u6765\u662f\u7b2c\u51e0\u4e2a\u3002\n\n\u7b2c\u4e8c\u904d\u5f00\u4e2a\u6570\u7ec4\u5b58\u4e0b\u7b2c $i$ \u4e2a\u4eba\u539f\u6765\u662f\u7b2c\u51e0\u4e2a\uff0c\u7136\u540e\u518d\u6c42\u4e00\u8fb9\u9006\u5e8f\u5bf9\u3002\n\n### Code\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<string>\n#include<iostream>\n#include<algorithm>\n#define MAXN 500001\n\ninline void read(int &T) {\n\tint x=0;bool f=0;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=!f;c=getchar();}\n\twhile(c>='0'&&c<='9'){x=x*10+c-'0';c=getchar();}\n\tT=f?-x:x;\n}\n\nint n,map[201],a[MAXN],temp[MAXN];\nlong long ans=0;\nstruct trie {\n\tint cnt,node[MAXN][52];\n\tint num,name[MAXN];\n\tvoid insert(std::string s) {\n\t\tint len=s.length(),root=0;\n\t\tfor(int i=0;i<len;++i) {\n\t\t\tif(!node[root][map[s[i]]]) {\n\t\t\t\tnode[root][map[s[i]]]=++cnt;\n\t\t\t}\n\t\t\troot=node[root][map[s[i]]];\n\t\t}\n\t\tname[root]=++num;\n\t}\n\tint find(std::string s) {\n\t\tint len=s.length(),root=0;\n\t\tfor(int i=0;i<len;++i) {\n\t\t\troot=node[root][map[s[i]]];\n\t\t}\n\t\treturn name[root];\n\t}\n}t1;\n\nvoid mergesort(int l,int r,int mid) {\n\tint i=l,j=mid+1,tot=0;\n\twhile(i<=mid&&j<=r) {\n\t\tif(a[i]>a[j]) {\n\t\t\tans+=mid-i+1;\n\t\t\ttemp[++tot]=a[j++];\n\t\t}else temp[++tot]=a[i++];\n\t}\n\twhile(i<=mid) temp[++tot]=a[i++];\n\twhile(j<=r) temp[++tot]=a[j++];\n\tfor(int k=1;k<=tot;++k) a[l++]=temp[k];\n}\n\nvoid merge(int l,int r) {\n\tif(l==r) return;\n\tint mid=(l+r)>>1;\n\tmerge(l,mid),merge(mid+1,r);\n\tmergesort(l,r,mid);\n}\n\nint main() {\n\tread(n);\n\tfor(int i='a';i<='z';++i) map[i]=i-'a';\n\tfor(int i='A';i<='Z';++i) map[i]=i-'A'+26;\n\tstd::string s;\n\tfor(int i=1;i<=n;++i) {\n\t\tstd::cin>>s;\n\t\tt1.insert(s);\n\t}\n\tfor(int i=1;i<=n;++i) {\n\t\tstd::cin>>s;\n\t\ta[i]=t1.find(s);\n\t}\n\tmerge(1,n);\n\tstd::cout<<ans<<'\\n';\n\treturn 0;\n}\n```",
        "postTime": 1591402116,
        "uid": 142110,
        "name": "yu__xuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "\u770b\u9898\u76ee\u63cf\u8ff0\u5c31\u77e5\u9053\u8981\u6c42\u9006\u5e8f\u5bf9\u6570\u3002\n\n\u81f3\u4e8e\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u6570\u5b57\uff0c\u7528map\u641e\u5b9a\u3002\n```c++\n#include<cstdio>\n#include<iostream>\n#include<cmath>\n#include<algorithm>\n#include<cstring>\n#include<cstdlib>\n#include<cctype>\n#include<vector>\n#include<stack>\n#include<queue>\n#include<map>\nusing namespace std;\n#define enter puts(\"\") \n#define space putchar(' ')\n#define Mem(a, x) memset(a, x, sizeof(a))\n#define In inline\ntypedef long long ll;\ntypedef double db;\nconst int INF = 0x3f3f3f3f;\nconst db eps = 1e-8;\nconst int maxn = 1e5 + 5;\ninline ll read()\n{\n  ll ans = 0;\n  char ch = getchar(), last = ' ';\n  while(!isdigit(ch)) last = ch, ch = getchar();\n  while(isdigit(ch)) ans = (ans << 1) + (ans << 3) + ch - '0', ch = getchar();\n  if(last == '-') ans = -ans;\n  return ans;\n}\ninline void write(ll x)\n{\n  if(x < 0) x = -x, putchar('-');\n  if(x >= 10) write(x / 10);\n  putchar(x % 10 + '0');\n}\n\nint n, a[maxn], cnt = 0;\nchar s[10];\nmap<string, int> mp;\n\nint c[maxn];\nIn int lowbit(int x)\n{\n  return x & -x;\n}\nIn void add(int pos)\n{\n  for(; pos <= n; pos += lowbit(pos)) c[pos]++;\n}\nIn int query(int pos)\n{\n  int ret = 0;\n  for(; pos; pos -= lowbit(pos)) ret += c[pos];\n  return ret;\n}\n\nint main()\n{\n  n = read();\n  for(int i = 1; i <= n; ++i)\n    {\n      scanf(\"%s\", s);\n      mp[s] = ++cnt;\n    }\n  ll ans = 0;\n  for(int i = 1; i <= n; ++i)\n    {\n      scanf(\"%s\", s);\n      a[i] = mp[s];\n    }\n  for(int i = n; i; --i) ans += query(a[i]), add(a[i]);\n  write(ans), enter;\n  return 0;\n}\n```",
        "postTime": 1545802769,
        "uid": 55965,
        "name": "mrclr",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "# [\u9898\u76ee](https://www.luogu.com.cn/problem/P5149)\n\u8bf4\u767d\u4e86\u5176\u5b9e\u5c31\u662f\u6c42\u9006\u5e8f\u5bf9\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u4e2a\u9006\u5e8f\u5bf9\u7f16\u53f7\u53d8\u6210\u4e86\u5b57\u7b26 \u3002\n\n\u8fd9\u9898\u84dd\u8272\u96be\u5ea6\u4f3c\u4e4e\u8bc4\u7684\u6709\u70b9\u9ad8\uff08\u53ef\u80fd\u548ctrie\u6811\u7684\u5e94\u7528\u6709\u5173\uff09\u3002 \n\n\u4f46\u672c\u4eba\u4e0d\u4f1amap \uff0c\u4e5f\u521d\u5b66trie\u6811 \u3002\u8fd9\u9898\u5176\u5b9e\u6ca1\u5fc5\u8981\u4f7f\u7528\u8fd9\u4e9b \u3002\n\n\u4e8e\u662f\u5c31\u4fbf\u4f7f\u7528 $sort+$ \u5f52\u5e76\u6392\u5e8f \uff0c\u7528\u7c7b\u4f3c\u7ebf\u6bb5\u6811\u7684\u9012\u5f52\u6765\u89e3\u51b3 \u3002\uff08\u8fd9\u4e2a\u6807\u7b7e\u53ef\u4ee5\u52a0\uff09\n\n\u5176\u5b9e\u672c\u9898\u57fa\u4e8e\u8fd9\u4e48\u4e00\u9053[\u9ec4\u9898](https://www.luogu.com.cn/problem/P1908)\n\n\n------------\n\n\n\u5148\u6765\u8bf4\u8bf4\u5982\u4f55\u5904\u7406\u6709\u591a\u5c11\u7684\u9006\u5e8f\u5bf9\u5427\u3002\n\n\u9996\u5148\u60f3\u8c61\u5176\u662f\u4e00\u68f5\u7ebf\u6bb5\u6811 \uff0c\u4ece\u53f6\u5b50\u7ed3\u70b9\u5411\u4e0a\u505a\u5f52\u5e76\u6392\u5e8f \u3002\u4ece\u800c\u4fdd\u8bc1\u4e86\u5728\u5904\u7406\u7236\u5b50\u7ed3\u70b9\u65f6\uff0c\u4e24\u7aef\u7684\u5b50\u5e8f\u5217\u662f\u6709\u5e8f\u7684 \uff0c\u4e4b\u540e\u518d\u5f80\u4e0a\u8fdb\u884c\u5f52\u5e76\u6392\u5e8f \u3002\n\n\u5982\u4f55\u8bb0\u7b97\u533a\u95f4\u5e8f\u5217\u7684\u9006\u5e8f\u5bf9\u4e2a\u6570\u5462\uff1f\n\n1. \u663e\u7136\u513f\u5b50\u8282\u70b9\u7684\u9006\u5e8f\u5bf9\u5728\u7236\u5b50\u7ed3\u70b9\u4e00\u5b9a\u5b58\u5728 \u3002 \n2. \u5728\u7ecf\u884c\u5f52\u5e76\u6392\u5e8f\u65f6 \uff0c\u5982\u679c\u53f3\u4fa7\u7ed3\u70b9\u8981\u52a0\u5165\u961f\u5217\u90a3\u4e48\u5b83\u4e00\u5b9a\u4f1a\u5c0f\u4e8e\u6240\u4ee5\u5728\u5de6\u4fa7\u5e8f\u5217\u5269\u4e0b\u7684\u5143\u7d20 \u3002\n\n\u7ed3\u5408\u4ee3\u7801\u7406\u89e3\u6587\u5b57\u662f\u597d\u4e60\u60ef\uff08\u5c31\u548c\u8bfb\u9898\u770b\u6837\u4f8b\u4e00\u6837\uff09\n\n```\nvoid ans(int l,int r){\n\tint mid=(l+r)/2;int head1=l,head2=mid+1,num=l;//head1\u5de6\u4fa7\u5e8f\u5217\u5f00\u5934\uff0chead2\u53f3\u4fa7\u5e8f\u5217\u5f00\u5934\uff0cnum\u8f85\u52a9\u5e8f\u5217\u5f00\u5934\n\tif(l==r)return ;//\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u80af\u5b9a\u6ca1\u9006\u5e8f\u5bf9\n\tans(l,mid);ans(mid+1,r);//\u4f18\u5148\u5904\u7406\u5b50\u8282\u70b9\n\twhile(head1<=mid&&head2<=r){//\u6b64\u6b65\u505a\u5f52\u5e76\u6392\u5e8f\n\t\tif(x[head1]<=x[head2])y[num++]=x[head1++];\n\t\telse {\n\t\t\ty[num++]=x[head2++];\n\t\t\tk+=(long long)mid-head1+1;//\u52a0\u4e0a\u5de6\u4fa7\u5e8f\u5217\u5269\u4e0b\u5143\u7d20\u4e2a\u6570\n\t\t}\n\t}\n\twhile(head1<=mid)y[num++]=x[head1++];\n\twhile(head2<=r)y[num++]=x[head2++];\n\tfor(int i=l;i<=r;i++)x[i]=y[i]; //\u66f4\u65b0\u5e8f\u5217\uff0c\u8981\u8bb0\u5f97\n}\n```\n\u4e8e\u662f\u6211\u4eec\u5df2\u7ecf\u5904\u7406\u5b8c\u9ec4\u9898\u4e86\n\n\u5bf9\u4e8e\u8fd9\u9898\u6211\u4eec\u5982\u4f55\u8f6c\u6362\u5462\uff1f\n\n\u4f7f\u7528\u7ed3\u6784\u4f53\u8bb0\u5f55\u540d\u79f0\u548c\u4f4d\u7f6e \uff0c\u7136\u540e\u6309\u5b57\u5178\u5e8f\u6392\u5e8f \u3002\n```\nint cmp(ss a,ss b){\n\tint l=strlen(a.a),r=strlen(b.a);\n\tif(l!=r)return strlen(a.a)<strlen(b.a);\n\tfor(int i=0;i<l;i++)\n    \tif(a.a[i]!=b.a[i])return a.a[i]<b.a[i]; \n}\n```\n- \u5bf9\u4e8e\u7b2c\u4e8c\u884c\u8f93\u5165\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5927\u5c0f\uff1b\n- \u5bf9\u4e8e\u7b2c\u4e09\u884c\u8f93\u5165\u53ef\u4ee5\u8ba4\u4e3a\u662f\u8be5\u5927\u5c0f\u7684\u4f4d\u7f6e\n\n\u56e0\u4e3a\u7ecf\u8fc7\u6392\u5e8f\u4e14\u5177\u6709\u552f\u4e00\u6027\u6240\u4ee5\u5b58\u5728\u5bf9\u5e94\u6027 \u3002\n\n\u7ed9\u51fa\u53c2\u8003\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e5+2; \nstruct ss{\n\tint lie;//\u4f4d\u7f6e\n\tchar a[6];//\u540d\u5b57\n}st[maxn*2];\nint x[maxn*2],y[maxn*2];long long k=0;//y\u4e3a\u8f85\u52a9\u961f\u5217\nint cmp(ss a,ss b){\n\tint l=strlen(a.a),r=strlen(b.a);\n\tif(l!=r)return strlen(a.a)<strlen(b.a);\n\tfor(int i=0;i<l;i++)\n    \tif(a.a[i]!=b.a[i])return a.a[i]<b.a[i]; \n}\noid ans(int l,int r){\n\tint mid=(l+r)/2;int head1=l,head2=mid+1,num=l;//head1\u5de6\u4fa7\u5e8f\u5217\u5f00\u5934\uff0chead2\u53f3\u4fa7\u5e8f\u5217\u5f00\u5934\uff0cnum\u8f85\u52a9\u5e8f\u5217\u5f00\u5934\n\tif(l==r)return ;//\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u80af\u5b9a\u6ca1\u9006\u5e8f\u5bf9\n\tans(l,mid);ans(mid+1,r);//\u4f18\u5148\u5904\u7406\u5b50\u8282\u70b9\n\twhile(head1<=mid&&head2<=r){//\u6b64\u6b65\u505a\u5f52\u5e76\u6392\u5e8f\n\t\tif(x[head1]<=x[head2])y[num++]=x[head1++];\n\t\telse {\n\t\t\ty[num++]=x[head2++];\n\t\t\tk+=(long long)mid-head1+1;//\u52a0\u4e0a\u5de6\u4fa7\u5e8f\u5217\u5269\u4e0b\u5143\u7d20\u4e2a\u6570\n\t\t}\n\t}\n\twhile(head1<=mid)y[num++]=x[head1++];\n\twhile(head2<=r)y[num++]=x[head2++];\n\tfor(int i=l;i<=r;i++)x[i]=y[i]; //\u66f4\u65b0\u5e8f\u5217\uff0c\u8981\u8bb0\u5f97\u5904\u7406x\u54e6\n}\nint main(){\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n*2;i++)\t{\n    \tscanf(\" %s\",&st[i].a);\n\t\tst[i].lie=i;\n\t\tif(i>n) st[i].lie=i-n;\t//\u7edf\u8ba1\u4f4d\u7f6e\n\t}\n\tsort(st+1,st+n+1,cmp);\n\tsort(st+n+1,st+n*2+1,cmp);\n\tfor(int i=1;i<=n;i++)x[st[i+n].lie]=st[i].lie;//\u8f6c\u6362\u5904\u7406\n\tans(1,n);\n\tprintf(\"%lld\",k);//\u5f00long long\n\treturn 0;\n}\n```\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log{n}\\times$ \u540d\u5b57\u957f\u5ea6 \n$)$ \n\n~~\u6210\u529f\u62c9\u4f4e\u9898\u76ee\u96be\u5ea6~~\n\n\u8bb0\u5f97\u70b9\u8d5e\u8bc4\u8bba\u4f9b\u6211\u4fee\u6539 \uff08~~\u672c\u4eba\u5341\u5206\u6c34~~\uff09\u3002\n\u6709\u7591\u95ee\u4e5f\u53ef\u4ee5\u63d0\u51fa\u3002",
        "postTime": 1585634016,
        "uid": 220140,
        "name": "hekaiyu",
        "ccfLevel": 4,
        "title": "P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "### \u9996\u5148\u8fd9\u9898\u663e\u7136\u662f\u8981\u6c42\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\uff0c\n\u5bf9\u4e8e\u4e00\u4e2ai\uff0c\u6211\u4eec\u8981\u6c42\u51fai+1\u5230n\u4e2d\u539f\u672c\u5728i\u5de6\u8fb9\u7684\u4eba\u7684\u4e2a\u6570\uff1b\n\n\u8fd9\u6837\u6211\u4eec\u5c06\u8bfb\u5165\u7684\u540d\u5b57\u7f16\u53f7\u4e3a1-n,i\u7684\u7f16\u53f7\u8bb0\u4e3aa[i]\uff0c\u7528map\u8f7b\u677e\u5b9e\u73b0\uff0c\u7136\u540e\u5bf9\u4e8e\u4e00\u4e2ai\uff0c\u5148\u5728\u6811\u72b6\u6570\u7ec4\u4e2d\u67e5\u8be2i+1-n\u4e2d\u5c0f\u4e8ea[i]\u7684\u6570\u7684\u4e2a\u6570\uff0c\u7136\u540e\u52a0\u5165a[i]\u5373\u53ef\n\n~~\u8bb0\u4f4f\u8981\u5012\u5e8f\u52a0\u5165~~\n```\n#include<bits/stdc++.h>\nusing namespace std;\nmap<string,int>ma;\nconst int maxN=100000+100;\nint n,a[maxN],tr[maxN];\nlong long ans;\nstring s;\nvoid add(int x){\n\tfor(;x<=n;x+=x&-x) tr[x]++;\n}\nint query(int x){\n\tint ans=0;\n\tfor(;x;x-=x&-x) ans+=tr[x];\n\treturn ans;\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>s;ma[s]=i;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>s;a[i]=ma[s];\n\t}\n\tfor(int i=n;i>=1;i--){\n\t\tans+=query(a[i]-1);\n\t\tadd(a[i]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n```\n",
        "postTime": 1569481617,
        "uid": 39638,
        "name": "\u6851\u6811\u4e0b\u7684\u9082\u9005",
        "ccfLevel": 7,
        "title": "P5149\u9898\u89e3"
    },
    {
        "content": "# \u63d0\u4f9b\u4e00\u79cd 48\u884c\uff08\u4e0d\u538b\u884c\uff09\u7684\u505a\u6cd5\u3002\n##### \u663e\u7136 \u8fd9\u4e2a\u662f\u6c42 \u9006\u5e8f\u5bf9\u7684 \u548c\uff0c\u7136\u800c \u6570\u5b57 \u6362\u6210 \u4e86\uff0c\u5b57\u6bcd\uff0c\n#####  \u663e\u7136 \u6211\u4eec\u53ef\u4ee5hash \u518d \u79bb\u6563\u5316\uff0c\u7136\u800c\uff0cSTL\u5927\u6cd5\u597d\uff0c\u6211\u4eec\u76f4\u63a5\u7528map \u5b9e\u73b0 \u79bb\u6563\u5316\u3002 \u7528\u6570\u7ec4\u7684\u4e0b\u6807 \u5b58\u5b9e\u9645 \u7684 \u4eba\u7684 \u5f52\u5c5e\uff0c \u5176\u6570\u7ec4 \u5b58\u5b9e\u9645\u7684 \u4eba\u7684\u4f4d\u7f6e\uff0c\u518d\u8dd1\u4e00\u8fb9 \u4e00\u9053 \u9ec4\u9898 \u5f52\u5e76\u6c42\u9006\u5e8f\u5bf9\u5373\u53ef\u3002\n###### \u8be6\u7ec6\u7ec6\u8282 \u89c1 \u4ee3\u7801\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<map>\nusing namespace std;\nmap <string,int>va;\nconst int N=100005;\nint n;\nint a[N],b[N];\nstring s;\nlong long tot;\nvoid merge(int l,int r)// \u9ec4\u8272\u9898\u7684\u96be\u5ea6\n{\n\tif(l==r)\n\treturn;\n\tint mid=(l+r)>>1;\n\tmerge(l,mid),merge(mid+1,r);\n\tint i=l,j=mid+1,cnt=l;\n\twhile(i<=mid&&j<=r)\n\t{\n\t\tif(a[i]<a[j])\n\t\tb[cnt++]=a[i++];\n\t\telse\n\t\tb[cnt++]=a[j++],tot+=(mid-i+1);\n\t}\n\twhile(i<=mid)\n\tb[cnt++]=a[i++];\n\twhile(j<=r)\n\tb[cnt++]=a[j++];\n\tfor(int i=l;i<=r;i++)\n\ta[i]=b[i];\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>s;\n\t\tva[s]=i;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>s;\n\t\ta[i]=va[s];\n\t}\n\tmerge(1,n);\n\tcout<<tot;\n}\n```\n",
        "postTime": 1568281636,
        "uid": 128852,
        "name": "\u751f\u800c\u4e3a\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "\u7ed9\u4e00\u5f00\u59cb\u5ea7\u4f4d\u8868\u987a\u5e8f\u4e2d\u6bcf\u4e2a\u8001\u5e08\u4e00\u4e2a\u7f16\u53f7\uff0c\u5206\u522b\u4e3a$1,2,3,...,n$\u3002\n\n\u518d\u6839\u636e\u6253\u4e71\u540e\u7684\u5ea7\u4f4d\u8868\u987a\u5e8f\u6c42\u51fa\u65b0\u7684\u7f16\u53f7\u5e8f\u5217\u3002\n\n\u663e\u7136\u662f\u6c42\u65b0\u7f16\u53f7\u5e8f\u5217\u4e2d\u9006\u5e8f\u5bf9\u4e2a\u6570\n\n\u53ef\u4ee5\u4f7f\u7528\u5f52\u5e76\u6392\u5e8f\u6216\u8005\u6811\u72b6\u6570\u7ec4\u89e3\u51b3\u3002\n\n\u9898\u89e3\u533a\u91cc\u6ca1\u6709\u6811\u72b6\u6570\u7ec4\uff0c\u90a3\u6211\u5c31\u53d1\u4e2a\u6811\u72b6\u6570\u7ec4\u7684\u5427\u3002\n\ncode\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\ntemplate <typename Tp>\nvoid read(Tp &x){\n\tx=0;char ch=1;int fh;\n\twhile(ch!='-'&&(ch<'0'||ch>'9')) ch=getchar();\n\tif(ch=='-'){\n\t\tfh=-1;ch=getchar();\n\t}\n\telse fh=1;\n\twhile(ch>='0'&&ch<='9'){\n\t\tx=(x<<1)+(x<<3)+ch-'0';\n\t\tch=getchar();\n\t}\n\tx*=fh;\n}\n\nint n;\nstring s;\nmap<string,int>mp;\n\nint c[100007];\nvoid change(int x,int k){\n\twhile(x<=n){\n\t\tc[x]+=k;x+=(x&(-x));\n\t}\n}\n\nint query(int x){\n\tint ret=0;\n\twhile(x){\n\t\tret+=c[x];x-=(x&(-x));\n\t}\n\treturn ret;\n}\n\nint ans,a[100007];\n\nsigned main(){\n\tios::sync_with_stdio(0);\n\tcin>>n;\n\tfor(register int i=1;i<=n;i++){\n\t\tcin>>s;mp[s]=i;\n\t}\n\tfor(register int i=1;i<=n;i++){\n\t\tcin>>s;a[i]=mp[s];\n\t}\n\tfor(register int i=n;i>=1;i--){\n\t\tans+=query(a[i]);change(a[i],1);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\n---\n\n\u5f53\u7136\uff0c\u7ed9\u8001\u5e08\u7f16\u53f7\u7684\u5de5\u4f5c\u9664\u4e86\u53ef\u4ee5\u7528`map`\uff0c\u4e5f\u53ef\u4ee5\u624b\u5199`Trie`\uff0c\u90fd\u633a\u7b80\u5355\u3002",
        "postTime": 1567262934,
        "uid": 28910,
        "name": "\u89c8\u904d\u5343\u79cb",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5149\u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "\u6055\u6211\u76f4\u8a00\uff0c\u8fd9\u9053\u9898\u76ee\u8bc4\u6210\u84dd\u9898\u6709\u6c34\u5206\u554a\uff0c\u96be\u5ea6\u9ec4\u9898\u3002\n\n\n------------\n\n## \u601d\u8def\uff1a\n\n\u5148\u5ba1\u9898\uff1a\n\n> \u5982\u679c\u6709\u4e00\u5bf9\u8001\u5e08$a$\u548c$b$\uff0c\u4ed6\u4eec\u539f\u6765\u7684\u5ea7\u4f4d\u662f$a$\u5728$b$\u5de6\u8fb9\uff0c\u73b0\u5728\u53d8\u6210\u4e86$a$\u5728$b$\u53f3\u8fb9\uff0c\u90a3\u4e48\u8fd9\u4e00\u5bf9\u8001\u5e08\u4fbf\u4f1a\u8d21\u732e\u4e00\u5355\u4f4d\u4e0d\u6ee1\u503c\u3002\n\n\u52a0\u4e0a\u6837\u4f8b\uff0c\u5f88\u660e\u663e\u770b\u51fa\u662f\u8981**\u6c42\u8fd9\u4e2a\u6570\u5217\u7684\u9006\u5e8f\u5bf9**\uff0c\u53ea\u4e0d\u8fc7\u8981\u628a\u5b57\u7b26\u4e32\u8f6c\u4e3a\u6570\u503c\u3002\n\n\n------------\n\n### \u601d\u8def\u7b80\u5355\u6e05\u6670\uff0c\u6ce8\u610f\u51e0\u4e2a\u70b9\uff1a\n\n- \u628a\u5b57\u7b26\u4e32\u8f6c\u6210\u6570\u503c\uff0c\u5f88\u7b80\u5355\uff0c\u7528\u54c8\u5e0c\u6216\u8005\u6620\u5c04\u3002C++\u91cc\u7684STL\u63d0\u4f9b`map`\uff08\u6620\u5c04\uff09\u4e0e`unordered_map`\uff08\u54c8\u5e0c\uff09\uff0cpb_ds\u63d0\u4f9b`hash_table`\uff08\u54c8\u5e0c\uff09\u3002\u4e09\u79cd\u5bb9\u5668\u5747\u53ef\u8fc7\u672c\u9898\u3002\u672c\u9898\u91c7\u7528\u6548\u7387\u8f83\u9ad8\u7684`unordered_map`\u3002\n\n- \u6c42\u9006\u5e8f\u5bf9\u3002**\u76f4\u63a5\u5957\u5f52\u5e76\u6392\u5e8f\u677f\u5b50\u3002**\u4e0d\u8d58\u8ff0\u3002\n\n- PS\uff1a\u6700\u5927\u9006\u5e8f\u5bf9\u6570\u91cf\uff1a$\\large \\frac{n(n-1)}{2}=4999950000\\approx 5 \\times 10^9 > \\texttt{INT\\_MAX}(\\approx 2 \\times 10^9)$   \n**\u6240\u4ee5\u8981\u5f00`long long`\uff01\uff01\uff01**\n\n- \u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(nlogn)\\approx10^7$\uff08`unordered_map`\u7684\u67e5\u627e\u51e0\u4e4e\u4e3a$O(1)$\uff1b\u63d2\u5165\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u660e\uff0c\u53cd\u6b63\u6ca1\u6709TLE\uff09\n\n\u8bc4\u6d4b\u7ed3\u679c\u5982\u4e0b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/60300.png)\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <string>\n#include <unordered_map>\nusing namespace std;\n//\u8bb0\u5f97\u5f00long long\nconst long long MAXN=1e5+5;\nlong long n,cnt,ans;\nlong long a[MAXN],t[MAXN];\nunordered_map <string,long long> m;//\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6570\u503c\u7528\n\nvoid input(void)\n{\n\tcin>>n;\n\tfor(long long i=1;i<=n;i++)\n\t{\n\t\tstring st;\n\t\tcin>>st;\n\t\tm[st]=++cnt;\n\t}\n\tfor(long long i=1;i<=n;i++)\n\t{\n\t\tstring st;\n\t\tcin>>st;\n\t\ta[i]=m[st];//\u5b58\u6570\u503c\n\t}\n}\n\nvoid merge(long long l,long long r)//\u5957\u677f\u5b50\n{\n\tif(l>=r)\n\t return;\n\tlong long mid=(l+r)/2;\n\tmerge(l,mid);\n\tmerge(mid+1,r);\n\tlong long i=l,j=mid+1,p=l;\n\twhile(i<=mid && j<=r)\n\t if(a[i]>a[j])\n\t {\n\t\tt[p++]=a[j++];\n\t\tans+=mid-i+1;\n\t }\n\t else\n\t  \tt[p++]=a[i++];\n\twhile(i<=mid)\n\t  t[p++]=a[i++];\n\twhile(j<=r)\n\t  t[p++]=a[j++];\n\tfor(i=l;i<=r;i++)\n\t  a[i]=t[i];\n}\n\nint main()\n{\n\tinput();\n\tmerge(1,n);\n\tcout<<ans<<endl;\n\treturn 0;\n}\n\n```\nupd\uff1a\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u6c42\u9006\u5e8f\u5bf9\u6570\u91cf\u7684$\\LaTeX$\u5d29\u4e86\uff0c\u6539\u4e86\u4e00\u4e0b\u518d\u4ea4\u4e00\u904dqaq\u3002",
        "postTime": 1559887162,
        "uid": 80049,
        "name": "Hexarhy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "\u65e2\u7136\u697c\u4e0b\u8bf4\u7684\u90fd\u662f**\u6811\u72b6\u6570\u7ec4**\u7684\uff0c\u90a3\u6211\u5c31\u6765\u8bf4\u8bf4\u600e\u4e48\u7528**\u5f52\u5e76\u6392\u5e8f**\u6765\u505a\u672c\u9898\u3002\n\n\n\u9996\u5148\u7528map\u5904\u7406\u4e00\u4e0b\u6bcf\u4e2a\u4eba\u7684\u540d\u5b57\n```cpp\nmap<string,int>s;\n\n\tfor(int i = 1;i<=n;i++)//\u8f93\u5165\u4eba\u540d\u548c\u4ed6\u4eec\u6700\u521d\u88ab\u5b89\u6392\u7684\u4f4d\u7f6e\n\t{\n\t\tstring a;\n\t\tcin>>a;\n\t\ts[a] = i;\n\t}\n    \n    \n\tfor(int i = 1;i<=n;i++)//\u8f93\u5165\u6253\u4e71\u540e\u7684\u4f4d\u7f6e\uff0c\u548c\u8868\u793a\u4ed6\u672c\u5e94\u8be5\u505a\u7684\u4f4d\u7f6e\n\t{\n\t\tstring a;\n\t\tcin>>a;\n\t\tb[i] = s[a];\n\t}\n```\n\n\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u5feb\u4e50\u7684\u6c42\u9006\u5e8f\u5bf9\u4e86\u3002\n\n\u6211\u662f\u7528\u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\u3002\u53ea\u8981\u5728\u5f52\u5e76\u6392\u5e8f\u7684\u6a21\u677f\u4e0a\u591a\u52a0\u4e00\u4e2aans\u8bb0\u5f55\u7b54\u6848\u5373\u53ef\u3002\n\n```cpp\nvoid gb(int x,int y)\n{\n\tif(x>=y)\n\t{\n\t\treturn;\n\t}\n\tint mid = x+(y-x)/2;\n\tgb(x,mid);\n\tgb(mid+1,y);\n\tint temp1 = x,temp2 = mid+1,tot = 0;\n\twhile(temp1<=mid&&temp2<=y)\n\t{\n\t\tif(b[temp1]>b[temp2])\n\t\t{\n\t\t\tc[++tot] = b[temp2];\n\t\t\ttemp2++;\n\t\t\tans+=(mid-temp1+1);//\u8bb0\u5f55\u7b54\u6848\uff0c\u53f3\u8fb9temp2\u6307\u5411\u7684\u6570\u6bd4\u5de6\u8fb9\u7684\u603b\u5171\u6709\u51e0\u4e2a\u6570\u5c0f\u3002\u56e0\u4e3a\u5de6\u8fb9\u5df2\u7ecf\u5728\u4e0a\u4e00\u5c42\u6392\u8fc7\u5e8f\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f4\u63a5\u8bb0\u5f55\u5373\u53ef\u3002\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc[++tot] = b[temp1];\n\t\t\ttemp1++;\n\t\t}\n\t}\n\twhile(temp1<=mid)\n\t{\n\t\tc[++tot] = b[temp1];\n\t\ttemp1++;\n\t}\n\twhile(temp2<=y)\n\t{\n\t\tc[++tot] = b[temp2];\n\t\ttemp2++;\n\t}\n\tfor(int i = 1;i<=tot;i++)\n\t{\n\t\tb[x+i-1] = c[i];\n\t}\n\treturn;\n}\n```\n\n\u8fd8\u6709\u4e00\u4e2a\u7ec6\u8282\u5c31\u662f\uff0cans\u4e00\u5b9a\u8981\u5f00long long\uff0c\u6700\u65e9\u5f00int\u5c45\u7136\u7206\u6389\u4e86\u3002\n\n\n\u4e0b\u9762\u662f\u5b8c\u6574\u4ee3\u7801\n```cpp\n#include <iostream>\n#include <set>\n#include <map> \nusing namespace std;\n\nmap<string,int>s;\n\nlong long n,ans;\n\nint b[1000100],c[1000100];\n\nvoid gb(int x,int y)\n{\n\tif(x>=y)\n\t{\n\t\treturn;\n\t}\n\tint mid = x+(y-x)/2;\n\tgb(x,mid);\n\tgb(mid+1,y);\n\tint temp1 = x,temp2 = mid+1,tot = 0;\n\twhile(temp1<=mid&&temp2<=y)\n\t{\n\t\tif(b[temp1]>b[temp2])\n\t\t{\n\t\t\tc[++tot] = b[temp2];\n\t\t\ttemp2++;\n\t\t\tans+=(mid-temp1+1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tc[++tot] = b[temp1];\n\t\t\ttemp1++;\n\t\t}\n\t}\n\twhile(temp1<=mid)\n\t{\n\t\tc[++tot] = b[temp1];\n\t\ttemp1++;\n\t}\n\twhile(temp2<=y)\n\t{\n\t\tc[++tot] = b[temp2];\n\t\ttemp2++;\n\t}\n\tfor(int i = 1;i<=tot;i++)\n\t{\n\t\tb[x+i-1] = c[i];\n\t}\n\treturn;\n}\n\nint main(int argc, char *argv[])\n{\n\tcin>>n;\n\tfor(int i = 1;i<=n;i++)\n\t{\n\t\tstring a;\n\t\tcin>>a;\n\t\ts[a] = i;\n\t}\n\tfor(int i = 1;i<=n;i++)\n\t{\n\t\tstring a;\n\t\tcin>>a;\n\t\tb[i] = s[a];\n\t}\n\tgb(1,n);\n\tcout<<ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1546071231,
        "uid": 9176,
        "name": "warrior",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    },
    {
        "content": "## \u597d\u4e00\u7bc7\u8be6\u7ec6\u7684\u9898\u89e3\uff01\u2193\n\n\u8bf4\u660e\uff1a\u8fd9\u7bc7\u9898\u89e3\u867d\u7136\u601d\u8def\u4e0d\u4e0e\u4f17\u4e0d\u540c\uff0c\u4f46\u662f\u8bf4\u660e\u53ef\u8c13\u5341\u5206\u8be6\u5c3d\uff0c\u5373\u4f7f\u4f60\u4e0d\u4f1a\u4ec0\u4e48\u5b57\u5178\u6811\u5566\u3001\u9006\u5e8f\u5bf9\u5566\uff0c\u770b\u8fd9\u7bc7\u9898\u89e3\u90fd\u6ca1\u6709\u95ee\u9898\u3002\n\n## \u6b63\u6587\n\n\u8fd9\u9053\u9898\u6211\u7684\u601d\u8def\u662f\uff0c\u7528**\u5b57\u5178\u6811\u4ee3\u66ff\u590d\u6742\u5ea6\u8f83\u9ad8\u7684 map \u5b9e\u73b0\u628a\u4e71\u5e8f\u7684\u5ea7\u4f4d\u8868\u7684\u6bcf\u4e00\u4e2a\u540d\u5b57\u53d8\u6210\u5176\u5728\u6b63\u786e\u7684\u5ea7\u4f4d\u8868\u4e2d\u6240\u5728\u7684\u5750\u6807 + \u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\u4e2a\u6570**\u3002\n\n\u8be6\u7ec6\u89e3\u91ca\u5982\u4e0b\u3002\n\n\u5982\u679c\u4f60\u4e0d\u4e86\u89e3\u5b57\u5178\u6811\uff0c\u8bf7\u70b9\u5f00[\u6211\u7684\u5b66\u4e60\u7b14\u8bb0](https://www.luogu.com.cn/blog/hellosandy/zi-dian-shu-ru-men-xue-xi-bi-ji)\uff0c\u770b\u4e86\u4f60\u5c31\u61c2\u4e86O(\u2229_\u2229)O\u54c8\u54c8~\n\n\u5728\u8fd9\u9053\u9898\u4e2d\uff0c\u6211\u5982\u679c\u60f3\u628a\u4e71\u5e8f\u7684\u804c\u5458\u540d\u5b57\u7528\u4ed6\u4eec\u539f\u5e94\u8be5\u5750\u7684\u5730\u65b9\u4ee3\u66ff\uff0c\u90a3\u4e48\u6211\u4eec\u5176\u5b9e\u5c31\u662f\u8981\u6c42\u8fd9\u4e2a\u66ff\u6362\u540e\u7684\u6570\u5217\u7684\u9006\u5e8f\u5bf9\u4e2a\u6570\u4e86\u3002\u600e\u4e48\u6837\u505a\u5462\uff1f\u5c31\u62ff\u6837\u4f8b\u6765\u8bf4\uff1a\n```\n3\nStan Kyle Kenny\nKyle Stan Kenny\n```\n\u6211\u4eec\u9996\u5148\u628a Stan,Kyle,Kenny \u6240\u5bf9\u5e94\u7684\u5750\u6807 1,2,3 \u5b58\u5165\u5b57\u5178\u6811\uff0c\u628a\u539f\u672c\u7528\u6765\u6807\u8bb0\u5355\u8bcd\u7ed3\u675f\u7684 $vis$ \u6570\u7ec4\u4e2d\u5b58\u7684\u503c\u6539\u4e3a\u4ed6\u4eec\u5bf9\u5e94\u7684\u5750\u6807\uff08\u6211\u4eec\u540c\u6837\u53ef\u4ee5\u77e5\u9053\u8fd9\u4e2a\u5355\u8bcd\u662f\u5426\u7ed3\u675f\u4e86\uff0c\u56e0\u4e3a\u4ed6\u4eec\u7684\u5750\u6807\u5168\u90e8\u90fd\u662f\u6b63\u6570\uff09\u3002\u5373 `vis['n'\u7684\u7f16\u53f7]=1,` `vis['e'\u7684\u7f16\u53f7]=2` `vis['y'\u7684\u7f16\u53f7]=3`\u3002\u6240\u4ee5\u7b2c\u4e8c\u6392\u7684 `Kyle Stan Kenny` \u5c31\u88ab\u66ff\u6362\u6210\u4e86 `2 1 3`\u3002\n\n\u90a3\u4e48\u600e\u4e48\u6c42\u9006\u5e8f\u5bf9\u5462\uff1f\uff08\u9006\u5e8f\u5bf9\u7684\u610f\u601d\u662f\uff0c\u5982\u679c\u5728\u4e00\u4e2a\u6570\u5217\u4e2d\u524d\u9762\u7684\u6570\u5927\u4e8e\u540e\u9762\u7684\u6570\uff0c\u90a3\u4e48\u8fd9\u4e24\u4e2a\u6570\u5c31\u6784\u6210\u4e86\u4e00\u4e2a\u9006\u5e8f\u5bf9\uff09\u6700\u597d\u7406\u89e3\u7684\u662f\u5f52\u5e76\u6392\u5e8f\uff08\u5206\u6cbb\uff09\u3002\n\n\u628a\u8fd9\u4e2a\u6570\u5217\u622a\u534a\u780d\u65ad\uff0c\u5206\u6210\u5de6\u8fb9\u7684\u4e00\u90e8\u5206\u548c\u53f3\u8fb9\u7684\u4e00\u90e8\u5206\uff0c\u5bf9\u5de6\u53f3\u90e8\u5206\u5206\u522b\u6392\u5e8f\uff0c\u7136\u540e\u628a\u4e24\u90e8\u5206\u5408\u5e76\u8d77\u6765\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a\u6392\u5e8f\u540e\u7684\u5e8f\u5217\u3002\u5bf9\u5de6\u53f3\u90e8\u5206\u6392\u5e8f\u7684\u8fc7\u7a0b\u7528\u9012\u5f52\u5b8c\u6210\uff0c\u9012\u5f52\u7ec8\u6b62\u5c31\u662f\u8981\u5904\u7406\u7684\u6570\u5217\u4ed6\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\uff0c\u6211\u4eec\u5c31\u4e0d\u7528\u518d\u628a\u5b83\u5206\u6210\u4e24\u90e8\u5206\u4e86\u3002\u8fd9\u662f\u5f52\u5e76\u6392\u5e8f\u3002\u90a3\u4e48\u6211\u4eec\u600e\u4e48\u628a\u4e24\u4e2a\u6392\u597d\u5e8f\u7684\u6570\u7ec4\u5408\u5e76\u8d77\u6765\u5462\uff1f\u7528\u4e24\u4e2a\u53d8\u91cf $i,j$ \u5206\u522b\u6307\u5411\u4e24\u4e2a\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\uff1b\u6bcf\u6b21\u628a $a_i$ \u548c $b_j$ \u8fdb\u884c\u6bd4\u8f83\uff0c\u628a\u8f83\u5c0f\u7684\u90a3\u4e2a\u6570\u538b\u5165\u7b54\u6848 vector \u7684\u672b\u5c3e\uff0c\u5e76\u4e14\uff1a\u5982\u679c $a_i<b_j$\uff0c\u90a3\u4e48 $i$ \u5f80\u540e\u632a\uff0c\u53cd\u4e4b\uff0c$j$ \u5f80\u540e\u632a\u3002\u6700\u540e\uff0c\u6211\u4eec\u518d\u628a\u6570\u7ec4\u4e2d\u5269\u4e0b\u7684\u5143\u7d20\u5168\u90e8\u538b\u5165\u7b54\u6848 vector \u4e2d\u3002\uff08\u66f4\u8be6\u7ec6\u7684\u89e3\u91ca\u70b9\u51fb[\u8fd9\u91cc](https://blog.csdn.net/jnh2004/article/details/82051817)\uff09\n\n\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u77e5\u9053\uff0c$a$ \u6570\u7ec4\u662f\u4e0b\u6807\u5728\u524d\u9762\u4e00\u6bb5\u7684\uff0c$b$ \u5219\u662f\u540e\u9762\u4e00\u6bb5\uff0c\u90a3\u4e48 $a$ \u4e2d\u5982\u679c\u6709\u4e00\u4e2a\u6570 $a_u$ \u6bd4 $b_v$ \u5927\uff0c\u90a3\u4e48 $a$ \u4e2d $a_u$ \u4ee5\u53ca\u5b83\u540e\u9762\u7684\u6570\u90fd\u53ef\u4ee5\u4e0e $b_v$ \u6784\u6210\u9006\u5e8f\u5bf9\uff0c\u4e8e\u662f\u6211\u4eec\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\u5c31\u52a0\u4e0a `u \u2192 a\u6570\u7ec4\u7684\u672b\u5c3e` \u5143\u7d20\u7684\u4e2a\u6570\u3002\n\n\u4e0b\u9762\u653e\u4e0a\u5b8c\u6574\u4ee3\u7801\uff0c\u7531\u4e8e\u5341\u5206\u6613\u61c2\uff0c\u6545\u672a\u52a0\u6ce8\u91ca\u3002**\u6ce8\u610f\uff0c\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\u53ef\u80fd\u8fbe\u5230 $C_n^2=\\frac{n(n-1)}{2}$\uff0c\u51e0\u4e4e\u8fbe\u5230 int \u7684\u8fb9\u754c\uff01\u6240\u4ee5\u8981\u5f00 long long\uff01**\n```\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef vector<int> vei;\n#define pb push_back\nint cnt=1;\nint trie[500005][60];\nint vis[500005];\ninline void Insert(string s,int idx){\n    int root=1,len=s.length(),x;\n    for(int i=0;i<len;i++){\n        x=s[i]-'a'+1;\n        if(!trie[root][x]) trie[root][x]=++cnt;\n        root=trie[root][x];\n    }\n    vis[root]=idx;\n}\ninline int Find(string s){\n    int root=1,len=s.length(),x;\n    for(int i=0;i<len;i++){\n        x=s[i]-'a'+1;\n        root=trie[root][x];\n    }\n    return vis[root];\n}\nlong long ans=0;\nvei Merge(vei al,vei ar){\n    int i=0,j=0,x=al.size(),y=ar.size();\n    vei res;\n    while(i<x && j<y){\n        if(al[i]>ar[j]) ans+=x-i;\n        if(al[i]<ar[j]) res.pb(al[i++]);\n        else res.pb(ar[j++]);\n    }\n    while(i<x) res.pb(al[i++]);\n    while(j<y) res.pb(ar[j++]);\n    return res;\n}\nvei Sort(vei a){\n    if(a.size()==1) return a;\n    vei al,ar;\n    int mid=a.size()/2;\n    for(int i=0;i<mid;i++) al.pb(a[i]);\n    for(int i=mid;i<a.size();i++) ar.pb(a[i]);\n    al=Sort(al),ar=Sort(ar);\n    return Merge(al,ar);\n}\nvei a; string str;\nint main()\n{\n    int n;\n    cin>>n;\n    for(int i=1;i<=n;i++) cin>>str,Insert(str,i);\n    for(int i=1;i<=n;i++) cin>>str,a.pb(Find(str));\n\ta=Sort(a);\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1593228088,
        "uid": 300078,
        "name": "pengyule",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5149 \u3010\u4f1a\u8bae\u5ea7\u4f4d\u3011"
    }
]
[
    {
        "content": "\u8fd9\u7bc7\u9898\u89e3\u7b97\u662f\u7eaa\u5ff5\u7b2c\u4e00\u6b21\u53c2\u52a0Luogu\u7684\u6bd4\u8d5b\u5427\n\n\u9898\u76ee\u601d\u8def\u5f88\u7b80\u5355\n~~\u4f46\u5f88**\u6bd2\u7624**~~\n\n\u7ebf\u6bb5\u6811\u6a21\u677f+\u9ad8\u7cbe\u5ea6\u6a21\u677f\n\n\u4ee3\u7801\u5982\u4e0b\n\n```#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n\nconst int maxn = 500005;\n\nstruct Bigint {\n    int s[55]; \n    Bigint() {memset(s, 0, sizeof(s));}\n    \n    Bigint operator = (const Bigint& a) {\n        s[0] = a.s[0];\n        for (int i = 1; i <= a.s[0]; i++) s[i] = a.s[i];\n        return *this;\n    } \n};\n \nconst Bigint null;\n\n//\u5feb\u8bfb\u5feb\u5199\u76f8\u5173\ninline int readint() {\n    int x = 0;\n    char c = getchar();\n    while(!isdigit(c)) {c = getchar();}\n    while(isdigit(c)) {\n        x = x * 10 + c - '0';\n        c = getchar();\n    }\n    return x;\n}\n\nint buf[10];\ninline void putint(int x) {\n\tint p = 0;\n\tif (x == 0) p++;\n\tif (x < 0) { \n\t\tputchar('-');\n\t\tx = -x;\n\t} \n\tif (x != 0) \n\t\twhile(x) {\n\t\t\tbuf[p++] = x % 10;\n\t\t\tx /= 10;\n\t}\n\tfor(int j = p - 1; j >= 0; j--) putchar('0' + buf[j]);\n} \n\n//\u9ad8\u7cbe\u5ea6\u6bd4\u8f83 \nint cmp(Bigint a, Bigint b) {\n    if (a.s[0] > b.s[0]) return 1;\n    if (a.s[0] < b.s[0]) return 0;\n    int i = a.s[0];\n    while (i >= 1) {\n        if (a.s[i] > b.s[i]) return 1;\n        if (a.s[i] < b.s[i]) return 0;\n        i--;\n    }\n    return 1;\n} \n\n//\u9ad8\u7cbe\u5ea6\u8f93\u5165 \nvoid read(Bigint& a) {\n    char s1[50];  //string\u4f1a\u975e\u5e38\u6162\n    scanf(\"%s\", s1);\n    a.s[0] = strlen(s1);\n    for (int i = 1; i <= a.s[0]; i++) a.s[i] = s1[a.s[0] - i] - '0';\n}\n\n//\u9ad8\u7cbe\u5ea6\u6253\u5370 \nvoid print(Bigint& a) {\n    for (int i = a.s[0]; i >= 1; i--) printf(\"%d\", a.s[i]);\n}\n\n//\u9ad8\u7cbe\u5ea6\u8d4b\u503c \nvoid fuz(int num, Bigint& a) {\n    int i = 1;\n    while(num > 0) {\n        a.s[i++] = num % 10;\n        num /= 10;\n    }\n    a.s[0] = i - 1;\n}\n\n//\u52a0\u6cd5 \nBigint add(Bigint b, Bigint a) {\n    Bigint c;\n    int len = 1;\n    while(len <= b.s[0] || len <= a.s[0]) {\n        c.s[len] += a.s[len] + b.s[len];\n        c.s[len + 1] += c.s[len] / 10;\n        c.s[len] %= 10;\n        len++;\n    }\n    while(c.s[len] == 0 && len > 1) len--;\n    c.s[0] = len;\n    return c;\n}\n\n//\u51cf\u6cd5\n//\u8c03\u7528\u524d\u8bf7\u786e\u4fdda > b \nBigint sub(Bigint a, Bigint b, int& tmp) {\n    int d = cmp(a, b);\n    if (d == 0) {\n        tmp = 0;\n        return null;\n    }\n    else {\n        Bigint c;\n        int len = 1;\n        while (len <= a.s[0] || len <= b.s[0]) {\n            if(a.s[len] - b.s[len] < 0) {\n                a.s[len + 1] -= 1;\n                a.s[len] += 10;\n            }\n            c.s[len] = a.s[len] - b.s[len];\n            len++;\n        }\n        while(c.s[len] == 0 && len > 1) len--;\n        c.s[0] = len;\n        return c;\n    }\n}\t\n\n//\u4e58\u6cd5 \nBigint mul(Bigint a, Bigint b) {\n    Bigint c;\n    for (int i = 1; i <= a.s[0]; i++)\n     \tfor (int j = 1; j <= b.s[0]; j++) c.s[i + j - 1] += a.s[i] * b.s[j];\n    int len = a.s[0] + b.s[0];\n    for (int i = 1; i < len; i++) {\n        if (c.s[i] >= 10) {\n            c.s[i + 1] += c.s[i] / 10;;\n            c.s[i] %= 10;\n        }\n    }\n    while (c.s[len] == 0 && len > 1) len--;\n    c.s[0] = len;\n    return c;\n}\n\nBigint hard[maxn]; \nint sum[maxn * 4]; //1\u8868\u793a\u53ef\u4ee5AC, 0\u5219\u76f8\u53cd\nBigint tanlent;\n\n//\u7ebf\u6bb5\u6811\u76f8\u5173\nvoid build (int o, int L, int R) {\n    if (L < R) {\n        int lc = o << 1, rc = lc + 1, M = (L + R) >> 1;\n        build(lc, L, M);\n        build(rc, M + 1, R);\n        sum[o] = sum[lc] + sum[rc];\n    }\n    else {\n        if (cmp(tanlent, hard[L])) sum[o] = 1;\n        else sum[o] = 0;\n    }\n}\n\nvoid update(int o, int L, int R, int p1, Bigint tmp) {\n    int lc = o << 1, rc = lc + 1, M = (L + R) >> 1;\n    if (L == R) {\n        hard[L] = tmp;\n        if (sum[o] == 0 && cmp(tanlent, tmp) == 1) sum[o] = 1;\n        else if (sum[o] == 1 && cmp(tanlent, tmp) == 0) sum[o] = 0;\n    }\n    else{\n        if (p1 <= M) update(lc, L, M, p1, tmp);\n            else update(rc, M + 1, R, p1, tmp);\n        sum[o] = sum[lc] + sum[rc];\n    }\n}\n\nint ans;\nvoid query(int o, int L, int R, int p1, int p2) {\n    if (L >= p1 && R <= p2) ans += sum[o];\n    else {\n        int lc = o << 1, rc = lc + 1, M = (L + R) >> 1;\n        if (p1 <= M) query(lc, L, M, p1, p2);\n        if (p2 > M) query(rc, M + 1, R, p1, p2);\n    }\n}\n\nint main() {\n    int n;\n    n = readint();\n    read(tanlent);\n    for (int i = 1; i <= n; i++) read(hard[i]);\n    build(1, 1, n);\n    \n    int m;\n    m = readint();\n    while(m--) {\n        char command[10];\n        scanf(\"%s\", command);\n        char c = command[0];\n        if (c == 'B') {\n            int x;\n            Bigint y;\n            x = readint();\n            read(y);\n            if (cmp(y, hard[x])) {\n                Bigint one;\n                fuz(1, one);\n                update(1, 1, n, x, one);\n            }\n            else {\n                int d;\n                y = sub(hard[x], y, d);\n                update(1, 1, n, x, y);\n            }\n        }\n        if (c == 'G') {\n            int x;\n            Bigint y;\n            x = readint();\n            read(y);\n            update(1, 1, n, x, mul(hard[x], y));\n        } \n        if (c == 't') {\n            int x;\n            Bigint y;\n            x = readint();\n            read(y);\n            update(1, 1, n, x, y);\n        }\n        if (c == 'Z') {\n            int x, y;\n            x = readint();\n            y = readint();\n            if (x > y) swap(x, y);//\u871c\u6c41swap\n            ans = 0;\n            query(1, 1, n, x, y);\n            ans *= 600;\n            putint(ans);\n            putchar('\\n');\n        }\n    }\n    return 0;\t\n}```",
        "postTime": 1555214115,
        "uid": 141530,
        "name": "\u6740\u9a6c\u7279\u98de\u884c\u5458",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4969 \u3010\u795e\u79d8\u7684703\u3011"
    },
    {
        "content": "# [P4969 \u795e\u79d8\u7684703](https://www.luogu.org/problemnew/show/P4969)\n\n\u4e00\u9053\u6765\u81ea\u524d\u8f88\u7684\u9898\u76ee\n\n\u63a8\u4e00\u4e0b\u81ea\u5df1\u7684[Blog](https://a-wnico-blog.blog.luogu.org/#)\n\n\u5f53\u7136\u5566\u987a\u624b\u63a8\u4e00\u4e0b\u73b0\u5728\u7684[BookCity/4526](127.0.0.1)(\u8fd9\u662f\u4e00\u4e2a\u5047\u7684\u94fe\u63a5)\n\n\u8fd9\u4e2a\u662f\u4e4b\u524d\u7528zkw\u5199\u7684\u3002\u3002\uff08\u53c8\u662fzkw\uff09\n\n\u9664\u6b64\u4e4b\u5916\u5c31\u662f\u548c\u524d\u8f88\u4e00\u6837\u7684\u8d85\u51fa\u6807\u8bb0\n\n\u603b\u7684\u6765\u8bf4\u5c31\u662f\u8fd9\u6837\n\n\n```cpp\n// luogu-judger-enable-o2\n#include<cstdio>\n#include<iostream>\n#include<cmath>\n#include<cstdlib>\n#include<cstring>\n#include<algorithm>\n#define mx 500010\nusing namespace std;\ntypedef long long ll;\nll n,t,m,exa[mx],tmp;\nll tree[1048576];\t\nbool over[mx];\t//\u8d85\u51fa\u6807\u8bb0\n\nll ans(int a,int b){\n\tif(a==b)  return -tree[a+n-1];\n\tll bac=0;\n\tfor(a+=n-1,b+=n-1;a^b^1;a>>=1,b>>=1){\t//\u6807\u51c6\u7684\u6c42\u548c\n\t\tif(a%2==0){\n\t\t\tbac+=tree[a^1];\n\t\t}\n\t\tif(b%2){\n\t\t\tbac+=tree[b^1];\n\t\t}\n\t}\n\treturn bac;\n}\n\nvoid build(int i,int a){\t//\u5efa\u6811\n\tif(a>t) return;\n\twhile(i) tree[i]++,i/=2;\n}\n\nvoid change(int i,int a){\t\t//\u70b9\u53d8\u66f4\n\twhile(i) tree[i]+=a,i/=2;\n}\n\nint main(){\n\tscanf(\"%lld%lld\",&n,&t);ll p=n;n=pow(2,ceil(log2(n)));\n\tfor(int i=1;i<=p;++i) cin>>exa[i];cin>>m;\n\tfor(int i=n;i<n+p;++i) build(i,exa[i-n+1]);\n\tfor(int ii=1;ii<=m;++ii){\n\t\tchar ins[10];int a,b;\n\t\tscanf(\"%s%d%d\",ins,&a,&b);\n\t\tswitch(ins[0]){\t\t\t\t\t//\u6307\u4ee4\n\t\t\tcase 'B':{\n\t\t\t\texa[a]=exa[a]-b<=0?1:exa[a]-b;\n\t\t\t\tif(exa[a]<=t&&tree[a+n-1]==0&&!over[a]) change(a+n-1,1);\n\t\t\t\tbreak;\n\t\t\t}case 'G':{\n\t\t\t\texa[a]*=b;\n\t\t\t\tif(exa[a]<=0) over[a]=1;\n\t\t\t\tif((exa[a]>t||over[a])&&tree[a+n-1]) change(a+n-1,-1);\n\t\t\t\t\n\t\t\t}case 'Z':{\n\t\t\t\tif(a>b) swap(a,b);\n\t\t\t\tprintf(\"%lld\\n\",(ans(a,b)+tree[a+n-1]+tree[b+n-1])*600);\n\t\t\t\tbreak;\n\t\t\t}case 't':{\n\t\t\t\texa[a]=b;over[a]=0;\n\t\t\t\tif(b<=t&&tree[a+n-1]==0) change(a+n-1,1);\n\t\t\t\tif(b>t&&tree[a+n-1]) change(a+n-1,-1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:{\n\t\t\t\tprintf(\"err\\n\");\t\t//\u9519\u8bef\u4ee3\u7801\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n} \n\n\n```\n",
        "postTime": 1562227292,
        "uid": 148352,
        "name": "WNico",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4969 \u3010\u795e\u79d8\u7684703\u3011"
    },
    {
        "content": "## solution-p4969\n\n## \u9898\u89e3 P4969 \u3010\u795e\u79d8\u7684703\u3011\n\n~~\u6bd2\u7624\u9898...~~\n\n\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\uff0c\u6bcf\u6b21\u4fee\u6539\u4e4b\u540e\u5224\u65ad\u4e0b\u662f\u5426\u80fd\u88ab\u505a\u51fa\u6765\u5728\u8fd4\u56de\u53bb\u66f4\u65b0\u5373\u53ef\n\n\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u4e00\u4e0b\n\n~~\u9664\u4e86\u9700\u8981\u9ad8\u7cbe.....~~\n\n\u5177\u4f53\u53ef\u89c1\u5de8\u4e11\u4ee3\u7801\n\n```\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#define ll long long\n#define lb(x) (x&-x)\n#define maxn 500005\nusing namespace std;\nstruct Bignum{\n    #define Dignum 50\n    int num[Dignum];\n    #undef Dignum\n}bnum[maxn];\nBignum One;\nBignum b_trans(char *p){\n    int len=strlen(p);\n    Bignum ans;\n    memset(ans.num,0,sizeof(ans.num));\n    ans.num[0]=len;\n    for(int i=len-1;i>=0;--i){\n        ans.num[len-i]=p[i]-'0';\n    }\n    return ans;\n}\nvoid b_output(Bignum x){\n    for(int i=x.num[0];i;--i){\n        printf(\"%c\",x.num[i]+'0');\n    }\n    return;\n}\nint b_cmp(Bignum a,Bignum b){\n    if(a.num[0]>b.num[0]) return 1;\n    if(a.num[0]<b.num[0]) return -1;\n    for(int i=a.num[0];i;--i){\n        if(a.num[i]>b.num[i]) return 1;\n        if(a.num[i]<b.num[i]) return -1;\n    }\n    return 0;\n}\nBignum b_add(Bignum a,Bignum b){\n    Bignum ans;\n    memset(ans.num,0,sizeof(ans.num));\n    ans.num[0]=max(a.num[0],b.num[0]);\n    int add=0;\n    for(int i=1;i<=ans.num[0];++i){\n        ans.num[i]+=a.num[i]+b.num[i]+add;\n        add=ans.num[i]/10;\n        ans.num[i]%=10;\n    }\n    while(add){\n        ++ans.num[0];\n        ans.num[ans.num[0]]=add%10;\n        add/=10;\n    }\n    return ans;\n}\nBignum b_jian(Bignum a,Bignum b){\n\tif(b_cmp(a,b)<0){\n\t\treturn One;\n\t}\n    Bignum ans;\n    memset(ans.num,0,sizeof(ans.num));\n    if(!b_cmp(a,b)){\n        ans.num[0]=1;\n        ans.num[1]=0;\n        return ans;\n    }\n    ans.num[0]=a.num[0];\n    int add=1;\n    for(int i=1;i<=ans.num[0];++i){\n        ans.num[i]=10+a.num[i]-b.num[i]+add-1;\n        add=ans.num[i]/10;\n        ans.num[i]%=10;\n    }\n    while(!ans.num[ans.num[0]]){\n        --ans.num[0];\n    }\n    return ans;\n}\nBignum b_mut(Bignum a,Bignum b){\n    Bignum ans;\n    memset(ans.num,0,sizeof(ans.num));\n    for(int i=1;i<=a.num[0];++i){\n        for(int j=1;j<=b.num[0];++j){\n            ans.num[i+j-1]+=a.num[i]*b.num[j];\n        }\n    }\n    ans.num[0]=a.num[0]+b.num[0]-1;\n    int add=0;\n    for(int i=1;i<=ans.num[0];++i){\n        ans.num[i]+=add;\n        add=ans.num[i]/10;\n        ans.num[i]%=10;\n    }\n    while(add){\n        ++ans.num[0];\n        ans.num[ans.num[0]]=add%10;\n        add/=10;\n    }\n    while(!ans.num[ans.num[0]] && ans.num[0]>1){\n        --ans.num[0];\n    }\n    return ans;\n}\nint n,m;\nBignum t;\nint c[maxn],a[maxn];\nvoid up(int x,int num){\n\tfor(int i=x;i<=n;i+=lb(i)){\n\t\tc[i]+=num;\n\t}\n\treturn;\n}\nint gs(int x){\n\tint ans=0;\n\tfor(int i=x;i;i-=lb(i)){\n\t\tans+=c[i];\n\t}\n\treturn ans;\n}\nint gsum(int l,int r){\n\treturn gs(r)-gs(l-1);\n}\nint main(){\n\tOne.num[0]=1;\n\tOne.num[1]=1;\n\tscanf(\"%d\",&n);\n\tchar q[30],p[30];\n\tscanf(\"%s\",p);\n\tt=b_trans(p);\n\tmemset(a,0,sizeof(a));\n\tmemset(c,0,sizeof(c));\n\tfor(int i=1;i<=n;++i){\n\t\tscanf(\"%s\",p);\n\t\tbnum[i]=b_trans(p);\n\t\tif(b_cmp(t,bnum[i])>=0){\n\t\t\tup(i,1);\n\t\t\ta[i]=1;\n\t\t}\n\t}\n\tscanf(\"%d\",&m);\n\tfor(int i=1;i<=m;++i){\n\t\tscanf(\"%s\",q);\n\t\tif(q[0]=='B'){\n\t\t\tint k;\n\t\t\tscanf(\"%d\",&k);\n\t\t\tscanf(\"%s\",p);\n\t\t\tBignum x=b_trans(p);\n\t\t\tbnum[k]=b_jian(bnum[k],x);\n\t\t\tint kkk;\n\t\t\tif(b_cmp(t,bnum[k])>=0){\n\t\t\t\tkkk=1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tkkk=0;\n\t\t\t}\n\t\t\tup(k,kkk-a[k]);\n\t\t\ta[k]=kkk;\n\t\t}\n\t\telse if(q[0]=='G'){\n\t\t\tint k;\n\t\t\tscanf(\"%d\",&k);\n\t\t\tscanf(\"%s\",p);\n\t\t\tBignum x=b_trans(p);\n\t\t\tbnum[k]=b_mut(bnum[k],x);\n\t\t\tint kkk;\n\t\t\tif(b_cmp(t,bnum[k])>=0){\n\t\t\t\tkkk=1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tkkk=0;\n\t\t\t}\n\t\t\tup(k,kkk-a[k]);\n\t\t\ta[k]=kkk;\n\t\t}\n\t\telse if(q[0]=='t'){\n\t\t\tint k;\n\t\t\tscanf(\"%d\",&k);\n\t\t\tscanf(\"%s\",p);\n\t\t\tbnum[k]=b_trans(p);\n\t\t\tint kkk;\n\t\t\tif(b_cmp(t,bnum[k])>=0){\n\t\t\t\tkkk=1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tkkk=0;\n\t\t\t}\n\t\t\tup(k,kkk-a[k]);\n\t\t\ta[k]=kkk;\n\t\t}\n\t\telse if(q[0]=='Z'){\n\t\t\tint x,y;\n\t\t\tscanf(\"%d %d\",&x,&y);\n\t\t\tif(x>y) swap(x,y);\n\t\t\tprintf(\"%d\\n\",gsum(x,y)*600);\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1541660870,
        "uid": 88710,
        "name": "wcy1056935201",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4969 \u3010\u795e\u79d8\u7684703\u3011"
    },
    {
        "content": "## PART 0\uff1a\u524d\u8a00\n\u8fd9\u662f\u5b66\u957f\u51fa\u7684\u4e00\u9053\u9898\u76ee\uff0c\u975e\u5e38\u7684\u6bd2\u7624\u3002\u9ad8\u7cbe\u5ea6 + \u6811\u72b6\u6570\u7ec4\uff0c\u800c\u4e14\u8fd8\u6709\u51e0\u4e2a\u975e\u5e38\u641e\u4eba\u7684\u64cd\u4f5c\u3002\u5f53\u65f6 `Tingtime` \u8001\u5e08\uff08\u6ca1\u9519\uff0c\u5c31\u662f\u6211\u4eec\u7684\u4fe1\u5965\u8001\u5e08\uff09\u7ed9\u6211\u4eec\u653e\u5230\u4e86\u6a21\u62df\u8003\u8bd5\u91cc\uff0c\u76f4\u63a5\u5c31\u7206\u96f6\u4e86\uff08\u8fd9\u91cc\u7684\u6570\u636e\u6bd4\u6211\u4eec OJ \u4e0a\u7684\u53cb\u597d\u591a\u4e86\uff09\u3002\n\n\u672c\u9898\u89e3\u540c\u6b65\u53d1\u8868\u5728\u6211\u7684[\u4e2a\u4eba\u535a\u5ba2](https://www.luogu.com.cn/blog/Michaela-chr/)\n## PART 1\uff1a\u89e3\u9898\u601d\u8def\n\u770b\u5230\u8fd9\u4e00\u9898\u6709\u5355\u70b9\u4fee\u6539\u548c\u533a\u95f4\u67e5\u8be2\uff0c\u6211\u4eec\u7b2c\u4e00\u4e2a\u60f3\u5230\u7684\u80af\u5b9a\u662f\u7ebf\u6bb5\u6811\u6216\u8005\u6811\u72b6\u6570\u7ec4\u5b9e\u73b0\u3002\u8fd9\u4e00\u70b9\u662f\u6bcb\u5eb8\u7f6e\u7591\u7684\u3002\u4f46\u662f\u6211\u4eec\u770b\u5230\u9898\u76ee\u4e2d\u7ed9\u51fa\u7684\u6570\u636e\u8303\u56f4\uff1a\n```\n\u8f93\u5165\u6570\u636e\u5728\u6574\u578b\u8303\u56f4\u5185\n```\n\n\u8c8c\u4f3c\u662f\u4e0d\u7528\u9ad8\u7cbe\u5ea6\u7684\uff0c\u4f46\u662f\u5982\u679c\u4f60\u60f3\u60f3 `Guy` \u7684\u64cd\u4f5c\uff0c\u662f\u4e58\u6cd5\u5bf9\u4e0d\u5bf9\uff1f\u4e24\u4e2a\u6574\u578b\u8303\u56f4\u5185\u7684\u6570\u76f8\u4e58\uff0c\u7b54\u6848\u663e\u7136\u662f\u5b58\u4e0d\u4e0b\u7684\u3002\u5f53\u7136\uff0c\u4f60\u53ef\u4ee5\u5199\u9ad8\u7cbe\u5ea6\uff0c\u8fd9\u80af\u5b9a\u662f\u5bf9\u7684\uff0c\u4f46\u662f\u4f1a\u5f88\u9ebb\u70e6\uff08\u6216\u8bb8\u5427\uff0c\u4e0d\u8fc7\u6211\u662f\u8fd9\u6837\u89c9\u5f97\u7684\uff09\u3002\u4f46\u662f\u6709\u4e00\u79cd\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\uff1a\u8d85\u51fa\u6807\u8bb0\u3002\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u7531\u4e8e\u5176\u4ed6\u4eba\u7684\u64cd\u4f5c\u90fd\u4e0d\u53ef\u80fd\u4f7f\u6570\u636e\u8d85\u51fa\u6574\u578b\u8303\u56f4\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5bf9\u8d85\u51fa\u957f\u6574\u578b\u7684\u8303\u56f4\u7684\u6570\u8fdb\u884c\u6807\u8bb0\u3002\u7531\u4e8e\u8d85\u51fa\u4e86\u8303\u56f4\uff0c\u6240\u4ee5\u9664\u4e86 `Tingtime` \u8001\u5e08\u76f4\u63a5\u8c03\u6574\u96be\u5ea6\uff0c\u5176\u4ed6\u4eba\u7684\u64cd\u4f5c\u90fd\u51e0\u4e4e\u4e0d\u4f1a\u6709\u5f71\u54cd\uff0c\u540c\u65f6\u8fd9\u9053\u9898\u76ee `Zero` \u548c `Mike` \u662f\u80af\u5b9a\u505a\u4e0d\u51fa\u7684\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u8981\u52a0\u4e00\u4e2a\u6807\u8bb0\uff0c\u6807\u8bb0\u8fd9\u9053\u9898\u7684\u96be\u5ea6\u662f\u5426\u8d85\u8fc7\u4e86\u957f\u6574\u578b\u7684\u8303\u56f4\uff0c\u5982\u679c\u8d85\u8fc7\u4e86\uff0c\u6807\u8bb0\u4e00\u4e0b\uff0c\u76f4\u5230 `Tingtime` \u8001\u5e08\u8c03\u6574\u96be\u5ea6\u4e4b\u540e\u624d\u5c06\u6807\u8bb0\u5f52\u96f6\u3002\u800c\u5728\u5176\u4ed6\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u5224\u5b9a\u4e00\u4e0b\u6807\u8bb0\uff0c\u5982\u679c\u6807\u8bb0\u4e86\uff0c\u90a3\u4e48\u5bf9\u5176\u7684\u64cd\u4f5c\u5c31\u662f\u65e0\u610f\u4e49\u7684\u3002\n\n\u6709\u4e86\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u53ef\u4ee5\u7701\u53bb\u5f88\u591a\u7e41\u7410\u7684\u64cd\u4f5c\u3002\u7801\u957f - -\uff0c\u65f6\u95f4 - -\u3002\n\n### \u7ec6\u8282\n\u4f46\u662f\uff0c\u8fd9\u9053\u9898\u76ee\u8fd8\u6709\u4e00\u4e2a\u5c0f\u5c0f\u7684\u7ec6\u8282\u9700\u8981\u6ce8\u610f\uff0c\u8fd9\u4e2a\u95ee\u9898\u5f88\u5bb9\u6613\u5ffd\u7565\u3002\uff08\u6211\u770b\u5b66\u957f\u7684\u9898\u89e3\u8c8c\u4f3c\u6ca1\u6709\u5199\u5230\uff1f\uff09\n\n**\u8c01\u8bf4 `Tingtime` \u8001\u5e08\u53ea\u4f1a\u8c03\u4f4e\u96be\u5ea6\u4e86\uff1f**\n\n\u6240\u4ee5\uff0c\u4f60\u4e0d\u4ec5\u9700\u8981\u5224\u65ad `Tingtime` \u8001\u5e08\u8c03\u4f4e\u96be\u5ea6\u7684\u4e8b\u4ef6\uff0c\u8fd8\u8981\u5224\u65ad\u4ed6\u8c03\u9ad8\u96be\u5ea6\u7684\u4e8b\u4ef6\u3002\u8fd9\u53ef\u80fd\u662f\u8fd9\u9898\u6700\u5751\u7684\u70b9\u4e86\u3002\n\n## PART 2: AC \u4ee3\u7801\n\u4e0d\u8bf4\u4e86\uff0c\u4e0b\u9762\u653e\u4e0a AC \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node{\n    long long val;\n    bool flag;//\u6807\u8bb0\u662f\u5426\u8d8a\u754c\n};\nstruct things{\n    char opt[20];\n    long long mark,val;\n};\nthings th;\nnode hard[500010];\nlong long n,talent,m;\nlong long num;\nlong long sum[500010];\n//\u6811\u72b6\u6570\u7ec4\u57fa\u672c\u64cd\u4f5c\nlong long lowbit(long long x){\n    return x&(-x);\n}\nvoid updata(long long i,long long x){\n    while(i<=n){\n        sum[i]+=x;\n        i+=lowbit(i);\n    }\n}\nlong long get_sum(long long i){\n    long long res=0;\n    while(i>0){\n        res+=sum[i];\n        i-=lowbit(i);\n    }\n    return res;\n}\nint main(){\n    // freopen(\"room.in\",\"r\",stdin);\n    // freopen(\"room.ans\",\"w\",stdout);\n    scanf(\"%lld%lld\",&n,&talent);\n    for(long long i=1;i<=n;i++){\n        scanf(\"%lld\",&hard[i].val);\n        if(hard[i].val<=talent){\n            updata(i,1);\n        }\n        hard[i].flag=false;\n    }\n    scanf(\"%lld\",&m);\n    while(m--){\n        scanf(\"%s %lld %lld\",th.opt,&th.mark,&th.val);\n        if(th.opt[0]=='Z'){\n            if(th.mark>th.val) swap(th.mark,th.val);\n            printf(\"%lld\\n\",(long long)600*(get_sum(th.val)-get_sum(th.mark-1)));\n        }else if(th.opt[0]=='t'){\n            if((hard[th.mark].val>talent||hard[th.mark].flag)&&th.val<=talent) updata(th.mark,1);//\u8c03\u4f4e\u96be\u5ea6\n            else if((hard[th.mark].val<=talent&&hard[th.mark].flag==false)&&th.val>talent) updata(th.mark,-1);//\u8c03\u9ad8\u96be\u5ea6\uff0c\u5f88\u5751\uff0c\u4f46\u5f88\u771f\u5b9e\n            hard[th.mark].val=th.val;\n            hard[th.mark].flag=false;\n        }else if(th.opt[0]=='B'){\n            //\u5982\u679c\u8d8a\u754c\u4e86\u518d\u51cf\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u4e0d\u53ef\u80fd\u51cf\u5230\u8303\u56f4\u5185\n            if(!hard[th.mark].flag){\n                if(hard[th.mark].val>talent&&hard[th.mark].val-th.val<=talent){\n                    updata(th.mark,1);\n                }\n                hard[th.mark].val-=th.val;\n                if(hard[th.mark].val<1) hard[th.mark].val=1;\n            }\n        }else if(th.opt[0]=='G'){\n            //\u8d8a\u754c\u4e86\u4e5f\u6ca1\u6709\u5fc5\u8981\u518d\u4e58\n            if(!hard[th.mark].flag){\n                if(hard[th.mark].val<=talent&&(hard[th.mark].val*th.val>talent||hard[th.mark].val*th.val<0)){\n                    updata(th.mark,-1);\n                }\n                hard[th.mark].val*=th.val;\n                //\u6807\u8bb0\n                if(hard[th.mark].val<=0){\n                    hard[th.mark].flag=1;\n                    hard[th.mark].val=-1;\n                }\n            }\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1630301656,
        "uid": 547908,
        "name": "Hoshino_kaede",
        "ccfLevel": 7,
        "title": "P4969 \u795e\u79d8\u7684703 \u9898\u89e3"
    },
    {
        "content": "emmmm...\u8fd9\u9898\u662f\u771f\u7684\u6bd2\u7624\u3002\n\n\u6211\u505a\u4e86\u4e00\u4e24\u5468\uff0c\u624d\u505a\u51fa\u6765\u3002\n\n\u601d\u8def\u662f\u7ebf\u6bb5\u6811\u3002\n\n\u4e00\u5f00\u59cb\u7684\u6253\u6cd5\u6548\u7387\u592a\u4f4e\uff0c\u7136\u540eT\u4e86\u3002\n\u6539\u6210\u533a\u95f4\u52a0\u540e\u5c31Wa\u4e86\u3002\n\n\u6700\u540e\u53d1\u73b0\u6f0f\u5224\u4e86\u3002\n\u524d3\u4e2a\u70b9\u592a\u6c34\u4e86\uff08\u5751\uff09\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nstruct lol{int l,r,ll,rr,ans;long long c;bool v;}a[1000010];\nint len=0,f[500010];int n,t,m;\n\nvoid pd(int now){a[now].c>t?a[now].ans=0:a[now].ans=1;}\nvoid bt(int l,int r)//\u5efa\u6811 \n{\n    len++;int now=len;\n    a[len].l=l;a[len].r=r;a[len].ll=a[len].rr=a[len].c=a[len].v=0;\n    if(l<r)\n    {\n        int mid=(l+r)/2;\n        a[now].ll=len+1;bt(l,mid);\n        a[now].rr=len+1;bt(mid+1,r);\n        a[now].ans=a[a[now].ll].ans+a[a[now].rr].ans;\n    }\n    else a[len].c=(long long)f[l],pd(now);\n}\n\nvoid change(int now,int x,int k,int id)//\u6539\u70b9 \n{\n    if(a[now].l==a[now].r&&id==1)//\u51cf \n    {\n        if(!a[now].v)-k>=a[now].c?a[now].c=1:a[now].c+=k,pd(now);\n        return;\n    }\n\telse if(a[now].l==a[now].r&&id==2)//\u4e58 \n    {\n    \tif(!a[now].v)\n    \t{\n    \t\ta[now].c*=k;\n\t       \tif(a[now].c<0)a[now].v=1,a[now].ans=0;else pd(now);\n    \t}//\u81ea\u7136\u6ea2\u51fa \n        return;\n    }\n\telse if(a[now].l==a[now].r&&id==3)//\u6539 \n    {\n        a[now].c=k;a[now].v=0;pd(now);\n        return;\n    }\n    int ll=a[now].ll,rr=a[now].rr,mid=(a[now].l+a[now].r)/2;\n    if(x<=mid) change(ll,x,k,id);\n    else change(rr,x,k,id);\n    a[now].ans=a[ll].ans+a[rr].ans;\n}\n\nlong long findsum(int now,int l,int r)//\u67e5\u8be2 \n{\n    if(a[now].l==l&&a[now].r==r) {return a[now].ans;}\n    int ll=a[now].ll,rr=a[now].rr,mid=(a[now].l+a[now].r)/2;\n    if(r<=mid) return findsum(ll,l,r);\n    else if(l>mid) return findsum(rr,l,r);\n    else return findsum(ll,l,mid)+findsum(rr,mid+1,r);\n}\n\nint main()\n{\n\tscanf(\"%d %d\",&n,&t);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&f[i]);\n\tchar s[100];len=0;bt(1,n);scanf(\"%d\",&m);\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%s\",s);int x,c;scanf(\"%d %d\",&x,&c);\n\t\tif(s[0]=='B')change(1,x,-c,1);\n\t\telse if(s[0]=='G')change(1,x,c,2);\n\t\telse if(s[0]=='Z')\n\t\t{\n\t\t\tif(x>c){int y=x;x=c;c=y;}printf(\"%lld\\n\",600*findsum(1,x,c));\n\t\t}\n\t\telse change(1,x,c,3);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1545976878,
        "uid": 35290,
        "name": "royzhu",
        "ccfLevel": 5,
        "title": "P4969"
    },
    {
        "content": "# \u524d\u8a00\n\u8fd9\u4e2a~~\u5751\u6bd4~~\u7684\u662f\u6211\u51fa\u7684\u301090\u5ea6\u97a0\u8eac\u3011......\n\u62b1\u6b49\u4e86\u5404\u4f4d\uff0c\u8fd9\u9898\u5176\u5b9e\u4e0ehard\u503c\u7684\u7edd\u5bf9\u5927\u5c0f\u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\uff0c\u770b\u5230\u5404\u4f4d\u7206\u96f6\uff0c\u6211\u4e5f\u5f88\u96be\u8fc7\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u4e0d\u7528\u7ba1\u5b83\u5440\uff0c\u9898\u76ee\u4e2d\u5df2\u7ecf\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\uff0cTalent\u503c\u5728int\u8303\u56f4\u5185\u5e76\u4e14\u5bf9\u4e8eBookCity\u7684\u64cd\u4f5c\u4e5f\u5728int\u8303\u56f4\u5185\uff0c\u6240\u4ee5\u5982\u679c\u5b83\u6ea2\u51fa\u4e86longlong\u8303\u56f4\uff0c\u5c31\u7ed9\u5b83\u6807\u8bb0\u4e3a1\uff0c\u5728\u540e\u9762\u7684\u7edf\u8ba1\u5f53\u4e2d\u4e0d\u7b97\u8fdb\u53bb\u5c31\u597d\u4e86\uff0c\u5f53\u9047\u5230Tingtime\u8001\u5e08\u7684\u64cd\u4f5c\u65f6\uff0c\u56e0\u4e3a\u8be5\u64cd\u4f5c\u4e5f\u5728int\u8303\u56f4\u5185\uff0c\u6240\u4ee5\u6b64\u65f6\u7684hard\u503c\u53c8\u56de\u5230int\u8303\u56f4\u5185\uff0c\u91cd\u65b0\u6807\u8bb0\u4e3a0\uff0c\u8ba1\u5165\u7edf\u8ba1\u8303\u56f4\u5185\u5c31\u597d\u4e86\u3002\u5c31\u7b97\u60a8\u4eca\u5929\u53ef\u80fd\u72b6\u6001\u4e0d\u4f73\uff0c\u60f3\u4e0d\u5230\u8f83\u597d\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u8fd8\u6709\u66b4\u529b\u554a\u3002\n\u6b63\u89e3\u65b9\u6cd5\u5176\u5b9e\u4e5f\u4e0d\u662f\u6211\u4e2a\u4eba\u60f3\u51fa\u7684\uff0c\u4e3b\u8981\u662f\u6559\u7ec3\u6559\u7684\u597d\uff08TQL\uff09\n# \u89e3\u9898\u601d\u8def\n## \u9996\u5148\u6211\u4eec\u6765\u8bb2\u4e00\u8bb2\u8fd9\u4e00\u9898\u7684\u6613\u9519\u70b9\n\n\u2460\u5bf9\u4e8e $Zero$ \u7684\u8be2\u95ee\uff0c\u7ed9\u51fa\u7684\u533a\u95f4 $x,y$ \u4e0d\u4e00\u5b9a\u4fdd\u8bc1 $x<y$\uff0c\u5f53\u7136\u5bf9\u4e8e\u7ec6\u5fc3\u7684 $OIer$ \u5c24\u5176\u662f\u6570\u636e\u7ed3\u6784\u9898\u5237\u7684\u591a\u7684 $OIer$ \u8fd9\u4e00\u70b9\u8fd8\u662f\u5f88\u5bb9\u6613\u53d1\u73b0\u7684\u3002\n\n\u2461\u867d\u7136\u5728\u9898\u76ee\u4e2d\u53cd\u590d\u5f3a\u8c03\u67d0\u67d0\u67d0\u5728 $int$ \u8303\u56f4\u5185\uff0c\u4f46\u662f\u5404\u4f4d\u5c0f\u4f19\u4f34\u4eec\u6709\u6ca1\u6709\u60f3\u8fc7\uff0c\u5bf9\u4e8e $Guy$ \u7684\u7ffb\u500d\u624b\u6bb5\uff0c\n\u5982\u679c\u7ed9\u67d0\u9898\u7684\u96be\u5ea6\u4e00\u76f4\u7ffb\u500d\uff0c\u5b8c\u5168\u6709\u53ef\u80fd\u8d85\u8303\u56f4\uff0c\n\u7531\u4e8e\u51fa\u9898\u8005\u5728\u9020\u6570\u636e\u7684\u65f6\u5019\u662f\u968f\u673a\u7684\uff0c\u53ef\u80fd\u4f1a\u51e0\u4e07\u51e0\u4e07\u751a\u81f3\u51e0\u5341\u4e07\u51e0\u5341\u4e07\u7684\u7ffb\u500d\uff0c**\u6240\u4ee5\u5230\u6700\u540e\u67d0\u4e00\u9898\u7684\u96be\u5ea6\u5f88\u53ef\u80fd\u8d85\u51fa $long$ $long$ \u751a\u81f3 $unsigned$ $long$ $long$ \u8303\u56f4**\n\n\n\n## \u8fd9\u9898\u5176\u5b9e\u4e0d\u96be\uff0c\u4e3b\u8981\u9760\u7ec6\u8282\u548c\u5fc3\u6001\n\u6b63\u5982\u5404\u4f4d$OIer$\u6240\u89c1\uff0c\u8fd9\u9898\u5c31\u662f\u4e00\u4e2a**\u6811\u72b6\u6570\u7ec4**\uff08\u7ebf\u6bb5\u6811\u4e5f\u53ef\u4ee5\uff09\n\n\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u7edf\u8ba1 $Zero$ \u548c $Mike$ \u80fd $AC$ \u7684\u9898\u76ee\u4e2a\u6570\uff0c**\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u628a\u6240\u6709\u96be\u5ea6\u5c0f\u4e8e $talent$ \u503c\u7684\u9898\u76ee\u90fd\u6807\u8bb0\u4e3a $1$ \uff0c\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u53ea\u8981\u7edf\u8ba1\u533a\u95f4\u5185 $1$ \u7684\u4e2a\u6570**\uff0c\u7136\u540e\u518d\u4e58 $600$ \u5c31\u53ef\u4ee5\u4e86\uff08\u6bcf\u4e00\u9898 $300$ \u5206\uff0c\u4e24\u4e2a\u4eba\uff0c\u6240\u4ee5\u4e58 $600$ \uff09\uff0c\n\n\u4f46\u662f\u5982\u679c $hard$ \u503c\u6ea2\u51fa\u4e86\uff0c\u7a0b\u5e8f\u5c31\u4f1a\u81ea\u52a8\u9ed8\u8ba4\u4e3a\u4e00\u4e2a\u8d1f\u6570\uff0c\u8d1f\u6570\u7684\u8bdd\u5c31\u4e00\u5b9a\u5c0f\u4e8e $talent$ \u503c,\u4e00\u5b9a\u4f1a\u88ab\u7edf\u8ba1\u4e3a $1$\uff0c\n\u7b54\u6848\u5c31\u4f1a\u9519\u8bef\uff0c\u600e\u4e48\u529e\u5462\uff1f\u6211\u4eec\u5c31\u53ef\u4ee5\u6807\u8bb0\u4e00\u4e0b\uff0c**\u5bf9\u4e8e\u6ea2\u51fa\u7684\u6570\u636e\u6807\u8bb0\u4e3a $1$\uff0c\u5e76\u4e14\n\u8ba9\u7a0b\u5e8f\u5bf9\u4e8e\u6240\u6709\u6807\u8bb0\u4e3a $1$ \u7684\u90fd\u4e0d\u8ba1\u5165\u7edf\u8ba1\u8303\u56f4\u5185**\uff0c\u8fd9\u6837\u505a\u5c31\u80fd $AC$\u4e86\u3002\n# \u4ee3\u7801\u5b9e\u73b0\n\n## \u66b4\u529b30\u5206\u4ee3\u7801\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <cstring>\n#include <string>\n#include <cmath>\n#include <cstdlib>\n#include <queue>\nusing namespace std;\nconst int maxn=500500;\nint c[maxn],a[maxn],n,talent,m,x,y;\nchar opt[10];\nint main(){\n\tscanf(\"%d %d\",&n,&talent);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t}\t\n\tscanf(\"%d\",&m);\n\twhile(m--){\n\t\tscanf(\"%s %d %d\",opt,&x,&y);\n\t\tif(opt[0]=='Z'){\n\t\t\tif(x>y)\tswap(x,y);\n\t\t\tint cnt=0;\n\t\t\tfor(int i=x;i<=y;i++){\n\t\t\t\tif(a[i]<=talent)\tcnt++;\n\t\t\t}\n\t\t\tprintf(\"%d\\n\",cnt*300*2);\n\t\t}else if(opt[0]=='t'){\n\t\t\ta[x]=y;\n\t\t}else if(opt[0]=='B'){\n\t\t\ta[x]=a[x]-y;\n\t\t}else if(opt[0]=='G'){\n\t\t\ta[x]=a[x]*y;\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n\n```\n\n## 100\u5206\u6811\u72b6\u6570\u7ec4\u4f18\u5316+\u6807\u8bb0\n\n```\n\n#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <cstring>\n#include <string>\n#include <cmath>\n#include <cstdlib>\n#include <queue>\nusing namespace std;\nconst int maxn=500500;\nlong long c[maxn],n;\nstruct node{\n    bool f;  //\u7528\u4e8e\u6807\u8bb0 \n    long long val;\n}a[maxn];\nvoid add(int x,int y){\n    for(;x<=n;x += x&-x)\tc[x]+=y;\n}\nint ask(int x){\n    int ans=0;\n    for(;x;x-=x&-x)\tans+=c[x];\n    return ans;\n}//\u6811\u72b6\u6570\u7ec4\u7ef4\u62a41\u7684\u4e2a\u6570 \nlong long talent,m;\n\nint main(){\n    scanf(\"%lld %lld\",&n,&talent);\n    for(int i=1;i<=n;i++){\n        scanf(\"%lld\",&a[i].val);\n        if(a[i].val<=talent){\n            add(i,1);\n        }\n        a[i].f=0;\n    }\t\n    scanf(\"%lld\",&m);\n    long long x,y;\n    char opt[10];\n    while(m--){\n        scanf(\"%s %lld %lld\",opt,&x,&y);\n        if(opt[0]=='Z'){\n            if(x>y)\tswap(x,y);\n            printf(\"%d\\n\",600*(ask(y)-ask(x-1)));\t \n        }else if(opt[0]=='t'){  \n            if(a[x].val<=talent&&a[x].f==0) add(x,-1);\n            if(y<=talent)\tadd(x,1);\n            a[x].val=y;\n            a[x].f=0;\n        }else if(opt[0]=='B'){              //a[x].f=0\uff0c\u8bf4\u660e\u6ca1\u6709\u6ea2\u51fa\uff0c\u53ef\u4ee5\u7528\u4e8e\u7edf\u8ba1 \n            if(a[x].f==0){\n                if(a[x].val>talent&&a[x].val-y<=talent){\n                    add(x,1);\n                }\n                a[x].val=max(a[x].val-y,(long long)1);\n            }  \n        }else if(opt[0]=='G'){\n          \tif(a[x].f==0){\n          \t\t\n          \t\tif(a[x].val<=talent&&(a[x].val*y>talent||a[x].val*y<0)){\n          \t\t\tadd(x,-1);\n          \t\t}\n          \t\ta[x].val=a[x].val*y;\n          \t\tif(a[x].val<=0){\n          \t\t\ta[x].f=1;\n                    a[x].val=-1;\n          \t\t}\n          \t\t\n          \t }\n        }\n    }\n    \n    return 0;\n```\n",
        "postTime": 1541316573,
        "uid": 91559,
        "name": "\u8ffd\u68a6_Chen",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4969 \u3010\u795e\u79d8\u7684703\u3011"
    }
]
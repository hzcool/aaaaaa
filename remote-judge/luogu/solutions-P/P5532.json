[
    {
        "content": "\u849f\u84bb\u7ec8\u4e8e\u8981\u628a\u53bb\u5e74\u7684\u5751\u586b\u4e86\u30fe(\u2267\u2207\u2266*)\n\n---\n\n\u4f17\u6240\u5468\u77e5, \u9898\u610f\u662f\u8981\u4f60\u5f00\u53d1**\u4e00\u6b3e2D\u7684\u6e38\u620f\u7269\u7406\u5f15\u64ce** (\n\n\u7531\u4e8e\u5947\u7279\u7684\u91cd\u529b\u4f5c\u7528, \u6240\u6709\u7269\u4f53\u4e0b\u843d\u7684\u901f\u5ea6\u76f8\u540c, \u6c42\u6700\u7ec8\u5c40\u9762.\n\n\u542c\u4e0a\u53bb\u975e\u5e38\u50cf\u4e00\u9053**\u7b80\u5355\u6a21\u62df**, \u4f46\u662f\u7269\u4f53\u76f8\u5bf9\u7684\u5173\u7cfb\u5f88\u590d\u6742, \u4f60\u5f88\u5bb9\u6613\u5c31\u4f1a\u8ba9\u5728\u7a7a\u4e2d\u7684\u7269\u4f53\u7a7f\u8fc7\u5df2\u7ecf\u843d\u5730\u7684\u7269\u4f53, (~~\u7a7a\u6c14\u529b\u5b66\u5148\u9a71~~)\n\n\u50cf\u8fd9\u6837:\n```\ninput:\n9 17\n#..#.#..#########\n#..#.#..#.......#\n#.#...#.#..###..#\n#..###..#.......#\n#.......#...#...#\n#########..###..#\n...........#.#...\n..........#####..\n.........##.#.##.\n\nerror output:\n#.......#########\n#.......#.......#\n#.......#.......#\n#.......#..###..#\n#.......#...#...#\n#########..###..#\n...#.#.....#.#...\n...#.#....#####..\n..#####..##.#.##.\n```\n\n\u597d\u4e86\u597d\u4e86, \u4e0d\u5f00\u73a9\u7b11\n\n\u6211\u4ecb\u7ecd\u4e00\u4e0b\u6574\u4f53\u7684\u7b97\u6cd5\u6d41\u7a0b:\n\n1. \u52a8\u6001\u5f00\u6570\u7ec4\u5b58\u56fe, $dfs$\u51fa\u6240\u6709\u7684\u8054\u901a\u5757, \u4e3a\u6bcf\u4e2a\u8054\u901a\u5757\u786e\u5b9a\u4e00\u4e2a\u843d\u5730\u65f6\u95f4$t$\n2. \u5f00\u4e00\u4e2a$heap$, \u6309\u7167\u843d\u5730\u65f6\u95f4$t$\u4ece\u5c0f\u5230\u5927\u6392\u5e8f, \u7ef4\u62a4\u6240\u6709\u7a7a\u4e2d\u7684\u7269\u4f53\n3. \u5f53\u4e00\u4e2a\u7269\u4f53$u$\u843d\u5730\u65f6, \u904d\u5386\u5b83\u7684\u6240\u6709\u5143\u7d20, \u5411\u4e0a\u7528$set$\u627e\u5230\u7b2c\u4e00\u4e2a\u5728\u5176\u4e0a\u65b9\u7684\u7a7a\u4e2d\u7269\u4f53$v$, \u66f4\u65b0$v$\u7684\u843d\u5730\u65f6\u95f4\n4. \u5728\u65b0\u56fe\u4e0a\u523b\u753b\u7269\u4f53\u7684\u843d\u5730\u5f62\u6001, \u7136\u540e\u5728$set$\u548c$heap$\u91cc\u5220\u9664\u6b64\u7269\u4f53\n\n\u8fd9\u6837\u505a\u6bd4\u8f83`common-physics`\u7684\u54df, \u590d\u6742\u5ea6$O(n\\log n)$\n\n\u5177\u4f53\u7ec6\u8282\u548cSTL\u7684\u5b9e\u73b0, \u5c31\u8bf7\u53c2\u8003\u4ee3\u7801\u5566.\n\n```cpp\n// Etavioxy\n#define il inline\n#define ll long long\n#define rep(i,s,t) for(register int i=(s);i<=(t);i++)\n#define rev_rep(i,s,t) for(register int i=(s);i>=(t);i--)\n#define pt(x) putchar(x)\nusing namespace std;\nil int ci(){\n\tregister char ch;int f=1;\n\twhile(!isdigit(ch=getchar()))f=ch=='-'?-1:1;\n\tregister int x=ch^'0';\n\twhile(isdigit(ch=getchar()))x=(x*10)+(ch^'0');\n\treturn f*x;\n}\n\nenum{N=1000023};\n\n#define Map map<int,int,greater<int> >\nMap s[N];\nstruct sth{\n\tint id,t;\n\tbool operator<(const sth&e)const{ if( t!=e.t ) return t<e.t; return id<e.id; }\n};\n#define Set multiset<sth>\nSet ob;\nvector<int> pos[N];\nint t[N];\n\nint n,m;\nchar G0[N],G[N];\nint vis[N],now_tim;\n\n#define trans(i,j) ((i)*m+(j))\nil void dfs(int x,int y){\n\tif( vis[trans(x,y)] || G0[trans(x,y)]!='#' ) return;\n\tvis[trans(x,y)] = now_tim;\n\tpos[now_tim].push_back(trans(x,y));\n\tif( x!=0 ) dfs(x-1,y);\n\tif( y!=0 ) dfs(x,y-1);\n\tif( x!=n-1 ) dfs(x+1,y);\n\tif( y!=m-1 ) dfs(x,y+1);\n}\n\nil void find_ob(int x,int y,int now){\n\tif( s[y].empty() ) return;\n\tMap::iterator it = s[y].lower_bound(x);\n\tif( it==s[y].end() ) return;\n\tint id = it->second, dt = x+now-it->first-1;\n\tif( dt>=t[id] ) return;\n\tob.erase(ob.find((sth){id,t[id]}));\n\tob.insert((sth){id,t[id]=dt});\n}\n\nint main(){\n\tn = ci(), m = ci();\n\trep(i,0,n-1) scanf(\"%s\",G0+i*m);\n\trep(i,0,n-1) rep(j,0,m-1) G[trans(i,j)] = '.';\n\trep(i,0,n-1) rep(j,0,m-1){\n\t\tif( G0[trans(i,j)]=='#' ){\n\t\t\tif( vis[trans(i,j)]==0 ){\n\t\t\t\tt[++now_tim]=1e9;\n\t\t\t\tob.insert((sth){now_tim,(int)1e9});\n\t\t\t\tdfs(i,j);\n\t\t\t}\n\t\t\ts[j][i] = vis[trans(i,j)];\n\t\t}\n\t}\n\trep(j,0,m-1) find_ob(n,j,0);\n\twhile( ob.empty()==0 ){\n\t\tsth e = *ob.begin();\n\t\tob.erase(ob.begin());\n\t\trep(i,0,(int)pos[e.id].size()-1){\n\t\t\tint x = pos[e.id][i]/m, y = pos[e.id][i]%m;\n\t\t\ts[y].erase(s[y].find(x));\n\t\t\tG[trans(x+e.t,y)] = '#';\n\t\t}\n\t\trep(i,0,(int)pos[e.id].size()-1){\n\t\t\tint x = pos[e.id][i]/m, y = pos[e.id][i]%m;\n\t\t\tfind_ob(x,y,e.t);\n\t\t}\n\t}\n\trep(i,0,n-1){\n\t\trep(j,0,m-1) pt(G[trans(i,j)]); pt('\\n');\n\t}\n\treturn 0;\n}\n```\n---\n\n\u5f31\u5c0f\u7684\u4eba, \u4e60\u60ef\u4e8e\u5947\u602a\u7684\u4e71\u641e\n\n```\nstandard output:\n.................\n.................\n#.......#########\n#.......#..###..#\n#..#.#..#...#...#\n#..#.#..#..###..#\n#.#####.#..#.#..#\n#########.#####.#\n.........##.#.##.\n```\n\n[\u7a7a\u6c14\u529b\u5b66\u7684\u5c11\u5e74\u5c11\u5973\u4e4b\u8bd7](https://www.bilibili.com/video/BV1Gx411A7oe?from=search&seid=2185708959146844009)",
        "postTime": 1589776112,
        "uid": 127195,
        "name": "z7z_Eta",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5532 \u3010[CCO 2019] Sirtet\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n$n\\times m$ \u7684\u77e9\u9635\u4e2d\u6709\u4e00\u4e9b\u683c\u5b50\u88ab\u67d3\u8272\u4e86\uff0c\u6240\u6709\u88ab\u67d3\u8272\u683c\u5b50\u7684\u56db\u8054\u901a\u8fde\u901a\u5757\u88ab\u89c6\u4e3a\u4e00\u4e2a\u6574\u4f53\u3002\n\n\u67d0\u4e00\u65f6\u523b\uff0c\u6240\u6709\u8fde\u901a\u5757\u4e00\u8d77\u4e0b\u843d\uff0c\u76f4\u5230\u67d0\u4e2a\u683c\u5b50\u9047\u5230\u4e86\u5e95\u7ebf\u6216\u8005\u5176\u4ed6\u8fde\u901a\u5757\uff08\u597d\u50cf\u4fc4\u7f57\u65af\u65b9\u5757\uff09\u505c\u6b62\uff0c\u6c42\u51fa\u6700\u540e\u7684\u7ed3\u679c\u3002\n\n## \u601d\u8def\n\n\u7b2c\u4e00\u53cd\u5e94\u662f\u6a21\u62df\uff0c\u4f46\u662f\u53d1\u73b0\u7ec6\u8282\u592a\u591a\u4e86\uff0c\u4e0d\u60f3\u5199\uff0c~~\u4f46\u662f\u53d1\u73b0\u8ba8\u8bba\u533a\u6709\u5927\u4f6c\u63d0\u9192\u4e0d\u8981\u4f7f\u7528 spfa~~\uff0c\u4e8e\u662f\u5f80\u56fe\u8bba\u4e0a\u60f3\uff0c\u53d1\u73b0\u95ee\u9898\u7684\u5b9e\u8d28\u5c31\u662f\u6c42\u51fa\u6bcf\u4e2a\u8054\u901a\u5757\u7684\u6700\u5927\u4e0b\u843d\u8ddd\u79bb\u3002\n\n\u6211\u4eec\u8bbe\u7f16\u53f7\u4e3a $x$ \u8fde\u901a\u5757\u7684\u4e0b\u843d\u8ddd\u79bb\u4e3a $d_x$\uff0c\u5219\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e2a\u88ab\u67d3\u8272\u7684\u683c\u5b50 $(i,j)$\uff0c\u6211\u4eec\u5411\u4e0b\u6570\u4e00\u76f4\u5230\u5e95\u7ebf\u6216\u8005\u5176\u4ed6\u683c\u5b50\u624d\u4f1a\u505c\u6b62\uff0c\u4e8e\u662f\u6b64\u65f6\u5c31\u6709 $d_x\\le n-i$\uff0c\u8fd8\u6709\u5f80\u4e0b\u662f\u5176\u4ed6\u8fde\u901a\u5757\u7684\u60c5\u51b5\uff0c\u5047\u8bbe\u7f16\u53f7\u662f $y$ \u5219\u660e\u663e\u6ee1\u8db3\uff1a $d_x-d_y\\ge i-p-1$ \uff0c$p$ \u8868\u793a $y$ \u5f53\u524d\u5217\u6700\u4e0a\u65b9\u7684\u683c\u5b50\u6a2a\u5750\u6807\u3002\n\n\u8089\u773c\u53ef\u89c1\u7684\u5dee\u5206\u7ea6\u675f\u3002\n\n\u7136\u540e\u8fd9\u4e2a\u7ea6\u675f\u5e76\u4e0d\u5305\u542b\u8d1f\u6570\uff0c\u4e8e\u662f\u53ef\u4ee5\u4f7f\u7528 dijk\uff08\u4e3b\u8981\u662f\u524d\u8f66\u4e4b\u9274\uff09\u3002\n\n## code\n\u6ce8\u610f\u4e00\u4e0b\u9898\u76ee\u4ec5\u4ec5\u4fdd\u8bc1\u4e86 $n\\times m$ \u7684\u8303\u56f4\uff0c\u6570\u7ec4\u4f7f\u7528 vector \u5957 vector \u6216\u8005\u4e8c\u7ef4\u5750\u6807\u8f6c\u5316\u4e3a\u4e00\u7ef4\u5750\u6807\u5373\u53ef\u3002\n```cpp\nint main()\n{\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);cout<<fixed<<setprecision(10);\n\tint n,m;\n\tcin>>n>>m;\n\tvector<vector<bool> >a(n+1,vector<bool>(m+1));\n\tvii vis(n+1,vi(m+1));\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tchar c;cin>>c;\n\t\t\ta[i][j]=c=='#';\n\t\t}\n\tint cnt=0;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)if(a[i][j]&&!vis[i][j])\n\t\t{\n\t\t\tcnt++;\n\t\t\tqueue<pii>q;q.em(i,j);\n\t\t\twhile(!q.empty())\n\t\t\t{\n\t\t\t\tpii u=q.front();q.pop();\n\t\t\t\tint x=u.X,y=u.Y;\n\t\t\t\tif(vis[x][y]||!a[x][y])continue;\n\t\t\t\tvis[x][y]=cnt;\n\t\t\t\tif(x>1)q.em(x-1,y);\n\t\t\t\tif(x<n)q.em(x+1,y);\n\t\t\t\tif(y>1)q.em(x,y-1);\n\t\t\t\tif(y<m)q.em(x,y+1);\n\t\t\t}\n\t\t}\n\tvector<vector<pii> >e(cnt+1);\n\tvi c(m+1),col(m+1);\n\tfor(int i=n;i;i--)\n\t\tfor(int j=1;j<=m;j++)if(vis[i][j])\n\t\t{\n\t\t\tif(!c[j])e[0].eb(vis[i][j],n-i);\n\t\t\telse if(col[j]!=vis[i][j])e[col[j]].eb(vis[i][j],c[j]-i-1);\n\t\t\tc[j]=i;\n\t\t\tcol[j]=vis[i][j];\n\t\t}\n\t\n\tvi dis(cnt+1,1e9);\n\tdis[0]=0;\n\tpriority_queue<pii>q;q.em(0,0);\n\tvector<bool>book(cnt+1);\n\twhile(!q.empty())\n\t{\n\t\tint u=q.top().Y;q.pop();\n\t\tif(book[u])continue;\n\t\tbook[u]=1;\n\t\tfor(auto&[v,w]:e[u])if(cmin(dis[v],dis[u]+w))q.em(-dis[v],v);\n\t}\n\t\n\tvector<vector<bool> >ans(n+1,vector<bool>(m+1));\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)if(vis[i][j])\n\t\t{\n\t\t\tans[i+dis[vis[i][j]]][j]=1;\n\t\t}\n\tfor(int i=1;i<=n;i++,cout<<'\\n')\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(ans[i][j])cout<<'#';\n\t\t\telse cout<<'.';\n\t\t}\n\treturn 0;\n} \n```\n",
        "postTime": 1678705563,
        "uid": 571229,
        "name": "__stick",
        "ccfLevel": 7,
        "title": "P5532 [CCO2019] Sirtet"
    }
]
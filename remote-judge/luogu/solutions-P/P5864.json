[
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P5864)\n\n**\u5982\u679c $\\LaTeX$ \u70b8\u4e86\uff0c\u8bf7\u5728\u535a\u5ba2\u9875\u9762\u5185\u67e5\u770b\u3002**\n\n## \u9898\u76ee\u5206\u6790\n\n\u4e0d\u59a8\u5148\u6c42\u51fa\u6240\u6709\u8868\u9488\u957f\u5ea6\u76f8\u7b49\u65f6\u7684\u7b54\u6848\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\uff0c\u5f53 $n$ \u4e3a\u5076\u6570\u65f6\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4o5vpcl0.png)\n\n\u5728\u8be5\u56fe\u4e2d\uff0c\u4e0d\u59a8\u8ba4\u4e3a $\\rm B,I,C,H$ \u4e3a\u4e0a\u65b9\u7684\u70b9\uff0c $\\rm D,F,E,G$ \u4e3a\u4e0b\u65b9\u7684\u70b9\uff0c\u90a3\u4e48\u4e00\u4e2a\u5408\u6cd5\u7684\u4e09\u89d2\u5f62\u5fc5\u7136\u6709\u4e24\u4e2a\u70b9\u5728\u4e0a\u65b9\u53e6\u4e00\u4e2a\u70b9\u5728\u4e0b\u65b9\u6216\u8005\u4e24\u4e2a\u70b9\u5728\u4e0b\u65b9\u53e6\u4e00\u4e2a\u70b9\u5728\u4e0a\u65b9\uff0c\u7531\u4e8e\u4e0a\u65b9\u548c\u4e0b\u65b9\u662f\u5bf9\u79f0\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u7528\u6c42\u51fa\u4e24\u4e2a\u70b9\u5728\u4e0a\u65b9\u4e00\u4e2a\u70b9\u5728\u4e0b\u65b9\u7684\u65b9\u6848\u6570\u518d\u4e58\u4ee5\u4e8c\u5c31\u884c\u4e86\u3002\n\n\u679a\u4e3e\u4e0a\u65b9\u9009\u54ea\u4e24\u4e2a\u70b9\uff0c\u5f53\u4e0a\u65b9\u7684\u4e24\u4e2a\u70b9\u9009 $\\rm B,H$ \u65f6\uff0c\u4e0b\u65b9\u53ef\u4ee5\u9009 $\\rm D,F,E,G$ \uff1b\u4e0a\u65b9\u9009 $\\rm B,C$ \u65f6\uff0c\u4e0b\u65b9\u53ef\u4ee5\u9009 $\\rm D,F,E$ \uff1b\u4e0a\u65b9\u9009 $\\rm B,I$ \u65f6\uff1b\u4e0b\u65b9\u53ef\u4ee5\u9009 $\\rm D,F$ \uff0c\u2026\u2026 \u8bbe $m=\\dfrac{n}{2}$ \uff0c\u4e0d\u96be\u53d1\u73b0\uff0c\u4e58\u4e8c\u540e\u65b9\u6848\u6570\u4e3a $2(\\sum_{i=1}^{m-1}\\sum_{j=i+1}^m(j-i+1))$ \u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h3sd218m.png)\n\n\u5728\u8be5\u56fe\u4e2d\uff0c\u4e0d\u59a8\u8ba4\u4e3a $\\rm E,D,C,B$ \u4e3a\u4e0a\u65b9\u7684\u70b9\uff0c $\\rm F,G,A$ \u4e3a\u4e0b\u65b9\u7684\u70b9\uff0c\u540c\u6837\u7684\uff0c\u4e00\u4e2a\u5408\u6cd5\u7684\u4e09\u89d2\u5f62\u5fc5\u7136\u6709\u4e24\u4e2a\u70b9\u5728\u4e0a\u65b9\u53e6\u4e00\u4e2a\u70b9\u5728\u4e0b\u65b9\u6216\u8005\u4e24\u4e2a\u70b9\u5728\u4e0b\u65b9\u53e6\u4e00\u4e2a\u70b9\u5728\u4e0a\u65b9\uff0c\u4f46\u662f**\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4e00\u4e2a\u4e09\u89d2\u5f62\u7684\u4e00\u4e2a\u9876\u70b9\u662f $\\rm E$ \uff0c\u90a3\u4e48\u5bf9\u79f0\u540e\u8fd8\u662f\u4e24\u4e2a\u70b9\u5728\u4e0a\u65b9\u53e6\u4e00\u4e2a\u70b9\u5728\u4e0b\u65b9\uff0c\u6240\u4ee5\u4e58\u4ee5\u4e8c\u540e\u8981\u628a\u8fd9\u90e8\u5206\u51cf\u53bb\u3002**\n\n\u679a\u4e3e\u4e0a\u65b9\u9009\u54ea\u4e24\u4e2a\u70b9\uff0c\u5f53\u4e0a\u65b9\u7684\u4e24\u4e2a\u70b9\u9009 $\\rm E,B$ \u65f6\uff0c\u4e0b\u65b9\u53ef\u4ee5\u9009 $\\rm F,G,A$ \uff1b\u4e0a\u65b9\u9009 $\\rm E,C$ \u65f6\uff0c\u4e0b\u65b9\u53ef\u4ee5\u9009 $\\rm G,A$ \uff1b\u4e0a\u65b9\u9009 $\\rm E,D$ \u65f6\uff0c\u4e0b\u65b9\u53ef\u4ee5\u9009 $\\rm A$ \uff1b\u2026\u2026 \u8bbe $m=\\dfrac{n+1}{2}$ \uff0c\u4e0d\u96be\u53d1\u73b0\uff0c\u7b54\u6848\u4e3a $2(\\sum_{i=1}^{m-1}\\sum_{j=i+1}^m(j-i))-\\sum_{j=1+1}^m(j-1)$ \u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u6109\u5feb\u7684\u63a8\u5f0f\u5b50\u65f6\u95f4\uff08\u6ce8\u610f\u4e00\u4e2a\u516c\u5f0f\uff1a $\\sum_{i=1}^ni^2=\\dfrac{n(n+1)(2n+1)}{6}$ \uff0c\u5982\u679c\u5fd8\u4e86\u53ef\u4ee5\u8003\u573a\u4e0a\u7528\u62c9\u683c\u6717\u65e5\u63d2\u503c\u6216\u8005\u5f85\u5b9a\u7cfb\u6570\u6cd5\u6c42\u51faqwq\uff09\uff1a\n\n$n$ \u4e3a\u5076\u6570\u65f6\uff0c\u8bbe $m=n/2$ \u3002\n\n$$\n2(\\sum_{i=1}^{m-1}\\sum_{j=i+1}^m(j-i+1))\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}\\sum_{j=2}^{m-i+1}j)\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}\\dfrac{(m-i+3)(m-i)}{2})\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}\\dfrac{(i+3)i}{2})\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}(\\dfrac{1}{2}i^2+\\dfrac{3}{2}i))\n$$\n\n$$\n=2(\\dfrac{1}{2}\\dfrac{(m-1)m(2m-1)}{6}+\\dfrac{3}{2}\\dfrac{m(m-1)}{2})\n$$\n\n$$\n=2(\\dfrac{1}{6}m^3-\\dfrac{1}{4}m^2+\\dfrac{3}{4}m^2+\\dfrac{1}{12}m-\\dfrac{3}{4}m)\n$$\n\n$$\n=2(\\dfrac{1}{6}m^3+\\dfrac{1}{2}m^2-\\dfrac{2}{3}m)\n$$\n\n$$\n=2(\\dfrac{m^3+3m^2-4m}{6})\n$$\n\n$$\n=\\frac{(m-1)m(m+4)}{3}\n$$\n\n$n$ \u4e3a\u5947\u6570\uff0c\u8bbe $m=(n+1)/2$ \u3002\n\n$$\n2(\\sum_{i=1}^{m-1}\\sum_{j=i+1}^m(j-i))-\\sum_{j=1+1}^m(j-1)\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}\\sum_{j=1}^{m-i}j)-\\sum_{j=1}^{m-1}j\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}\\dfrac{(m-i+1)(m-i)}{2})-\\dfrac{(m-1)m}{2}\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}\\dfrac{(i+1)i}{2})-\\dfrac{(m-1)m}{2}\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}(\\dfrac{1}{2}i^2+\\dfrac{1}{2}i))-\\dfrac{(m-1)m}{2}\n$$\n\n$$\n=2(\\sum_{i=1}^{m-1}(\\dfrac{1}{2}i^2+\\dfrac{3}{2}i)-\\sum_{i=1}^{m-1}i)-\\dfrac{(m-1)m}{2}\n$$\n\n$$\n=2(\\dfrac{1}{6}m^3+\\dfrac{1}{2}m^2-\\dfrac{2}{3}m-\\dfrac{(m-1)m}{2})-\\dfrac{(m-1)m}{2}\n$$\n\n$$\n=\\dfrac{1}{3}m^3-\\dfrac{1}{2}m^2+\\dfrac{1}{6}m\n$$\n\n$$\n=\\dfrac{2m^3-3m^2+m}{6}\n$$\n\n$$\n=\\dfrac{(m-1)m(2m-1)}{6}\n$$\n\n\u7531\u4e8e\u76f4\u63a5\u4e58\u4f1a\u6ea2\u51fa\uff0c\u9006\u5143\u53c8\u4e0d\u592a\u597d\u6c42\uff0c\u6240\u4ee5\u8981\u5148\u628a\u9664\u6570\u5206\u5f00\u9664\u3002\n\n\u5f53\u8868\u9488\u957f\u5ea6\u5e76\u4e0d\u90fd\u76f8\u7b49\u65f6\uff0c\u591a\u91cd\u6392\u5217\u5373\u53ef\uff0c\u5f53\u4e24\u6839\u9488\u957f\u5ea6\u76f8\u7b49\u65f6\uff0c\u7b54\u6848\u8981\u4e58\u4ee5 $\\dfrac{3!}{2!1!}=3$ \uff0c\u5f53\u6240\u6709\u9488\u957f\u5ea6\u90fd\u4e0d\u76f8\u7b49\u662f\uff0c\u7b54\u6848\u8981\u4e58\u4ee5 $\\dfrac{3!}{1!1!1!}=6$ \u3002\n\n\u6700\u540e\u4fbf\u5f97\u5230\u4e86 $O(1)$ \u6c42\u7b54\u6848\u7684\u65b9\u6cd5\u3002\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#define ull unsigned long long\nusing namespace std;\n#define ch() getchar()\n#define pc(x) putchar(x)\ntemplate<typename T>inline void read(T&x){\n\tint f;char c;\n\tfor(f=1,c=ch();c<'0'||c>'9';c=ch())if(c=='-')f=-f;\n\tfor(x=0;c<='9'&&c>='0';c=ch())x=x*10+(c&15);x*=f;\n}\ntemplate<typename T>inline void write(T x){\n\tstatic char q[64];int cnt=0;\n\tif(!x)pc('0');if(x<0)pc('-'),x=-x;\n\twhile(x)q[cnt++]=x%10+'0',x/=10;\n\twhile(cnt--)pc(q[cnt]);\n}\nint main(){\n\tull A,B,C,N;\n\tread(A),read(B),read(C),read(N);\n\tif(N==2)puts(\"0\");\n\telse{\n\t\tull cnt=(A==B)+(B==C)+(A==C);\n\t\tcnt=(cnt==3?1:cnt==1?3:6);\n\t\tif(N&1){\n\t\t\tN=(N+1)>>1;\n\t\t\tA=N-1,B=N,C=N*2-1;\n\t\t\tif(A&1)B>>=1;\n\t\t\telse A>>=1;\n\t\t}\n\t\telse{\n\t\t\tN=N>>1;\n\t\t\tA=N-1,B=N,C=N+4;\n\t\t}\n\t\tif(A%3==0)A/=3;\n\t\telse if(B%3==0)B/=3;\n\t\telse C/=3;\n\t\twrite(A*B*C*cnt),pc('\\n');\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1594300888,
        "uid": 230249,
        "name": "xiaolilsq",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 [SEERC2018]Broken Watch"
    }
]
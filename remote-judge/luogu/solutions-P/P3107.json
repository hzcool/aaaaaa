[
    {
        "content": "### \u9898\u610f\u6982\u62ec \u300b\n\u6c42\u533a\u95f4\u5185\u6709\u8da3\u7684\u6570\u7684\u4e2a\u6570\u3002\n\n\u8be5\u6570\u6ee1\u8db3\uff1a\u81f3\u5c11\u4e00\u534a\u7684\u6570\u5b57\u65f6\u76f8\u540c\u7684\u3002 \n\n\n### \u65b9\u6cd5\u5206\u6790 \u300b\n**\u3010\u591a\u72b6\u6001\u7684\u6570\u4f4dDP\u3011**\n```cpp\nf[i][limit][k][front_zero]\n```\n#### \u8868\u793a \u5df2\u7ecfdp\u5230\u7b2ci\u4f4d(\u4ece\u9ad8\u5230\u4f4e)\uff0c\n\n#### \u662f\u5426\u89e6\u53ca\u4e0a\u754c\u7684limit(bool\u503c)\uff0c\n\n#### \u73b0\u5728\u5224\u65ad\u7684\u6570\u51fa\u73b0\u6b21\u6570\u4e3ak(\u6b63\u8d1f\u6570\u5224\u65ad\uff1a\u6bcf\u4f4d\u53d6\u8be5\u6570k--\uff0c\u53d6\u522b\u7684\u6570k++)\uff0c\n\n\n#### \u524d\u5bfc\u96f6\u72b6\u6001(\u8bb0\u5f55\u4e3al\uff0c\u8868\u793a\u5f53\u524d\u4f4d\u7f6e\u4e4b\u524d\u5168\u90e8\u90fd\u662f\u524d\u5bfc\u96f6)\u65f6\uff0c\n\n#### \u8be5\u4f4d\u524d\u65b9\u7684\u72b6\u6001\u5df2\u7ecf\u8ba1\u7b97\u5b8c\u6210\uff0c\u6b64\u65f6\u7684\u65b9\u6848\u6570\u3002\n\n\u6bcf\u6b21\u679a\u4e3e\u5f53\u524d\u9700\u8981\u5224\u65ad\u76f8\u540c\u7684\u90a3\u4e2a\u6570\u5b57\uff0c\u8fdb\u884c\u6570\u4f4dDP\u3002\n\n\u6ce8\u610f\uff1a\u5f62\u59821122,3344\u7b49\u6570\u8ba1\u7b97\u4e86\u4e24\u904d\uff0c\u5e94\u8be5\u628a\u5b83\u4eec\u679a\u4e3e\u51fa\u6765\uff0c\u518d\u51cf\u6389\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u65f6\u8fd8\u6709\u4e00\u4e9b\u7ec6\u8282...\n\n### \u4ee3\u7801\u5b9e\u73b0 \u300b\n\n```cpp\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<cassert>\n#include<iostream>\n#include<algorithm>\n#include<queue>\n#include<vector>\n#include<deque>\nusing namespace std;\ntypedef long long ll;\ntypedef long unsigned int llu;\n\nvoid reads(int &x){ //\u8bfb\u5165\u4f18\u5316\uff08\u6b63\u8d1f\u6574\u6570\uff09\n\tint f=1;x=0;char s=getchar();\n\twhile(s<'0'||s>'9'){if(s=='-')f=-1;s=getchar();}\n\twhile(s>='0'&&s<='9'){x=x*10+s-'0';s=getchar();}\n\tx*=f; //\u6b63\u8d1f\u53f7\n}\n\nll f[21][2][51][2];\nstring le,ri; \n\nll DP(string str,int len,int num1,int num2){ //\u4e24\u4e2a\u6570\u5b57num1\uff0cnum2\n\tll anss=0; //\u53bb\u9664\u91cd\u590d\u8ba1\u7b97\u7684\u65f6\u5019num2\u4e3a\u5177\u4f53\u7684\u6570\u5b57\uff0c\u5426\u5219\u4e3a-1 \u2191\u2191\u2191\n\tmemset(f,0,sizeof(f)); f[0][0][20][1]=1; //\u9632\u6b62\u6570\u7ec4\u4e0b\u6807\u4e3a\u8d1f\uff0c\u521d\u59cb\u5316k\u4e3a20\uff08k\u4f1a\u51cf\u5c0f\uff09\n\tfor(int i=0;i<len;i++) //\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\uff0c\u6700\u9ad8\u4f4d\u4e3a\u7b2c0\u4f4d\u3010\u9075\u5b88\u5b57\u7b26\u4e32\u7684\u8f93\u5165\u65b9\u5f0f\u3011\n\t\tfor(int limit=0;limit<=1;limit++)\n\t\t\tfor(int k=0;k<50;k++) //\u51fa\u73b0\u6b21\u6570\u7684\u52a0\u51cf\u60c5\u51b5\n\t\t\t\tfor(int front_zero=0;front_zero<=1;front_zero++){\n\t\t\t\t\tll cnt=f[i][limit][k][front_zero]; //\u7528\u4e8e\u50a8\u5b58\u4e0a\u4e00\u6b21\u7684\u72b6\u6001\n\t\t\t\t\tfor(int now=0;now<=9;now++){\n\t\t\t\t\t\tif(num2!=-1&&(now!=0||front_zero==0)&&now!=num2&&now!=num1) continue;\n\t\t\t\t\t\t//\u2191\u2191\u2191\u9632\u6b62 \u5728\u5224\u65ad\u53ea\u6709\u4e24\u4e2a\u6570\u5b57\u51fa\u73b0\u7684\u60c5\u51b5\u4e2d \u51fa\u73b0\u4e86\u9664\u524d\u5bfc\u96f6\u4e4b\u5916\u7684\u5176\u4ed6\u6570\u5b57\n\t\t\t\t\t\tif(limit==0&&now>str[i]-'0') continue;\n\t\t\t\t\t\tint nk=k,n0=front_zero;\n\t\t\t\t\t\tn0=n0&(now==0); //\u5982\u679c\u524d\u5bfc\u5168\u662f0\uff0cn0(\u5373front_zero)\u5c31\u662f1\n\t\t\t\t\t\tif(n0==0){ //\u524d\u5bfc\u4e0d\u5168\u662f0\n\t\t\t\t\t\t\tif(num2==-1){ //\u4f20\u5165\u51fd\u6570\u7684\u53ea\u6709\u4e00\u4e2a\u6570\u5b57\n\t\t\t\t\t\t\t\tif(num1==now) nk--; //\u53ea\u7528\u5224\u65ad\u8be5\u4f4d\u6570\u5b57\u7684\u6b21\u6570\u52a0\u51cf\u60c5\u51b5\n\t\t\t\t\t\t\t\telse nk++; //\u662f\u5176\u4ed6\u6570\u5b57\uff0ck++\n\t\t\t\t\t\t\t}else if(num2!=-1){ //\u4f20\u5165\u4e24\u4e2a\u6570\u5b57\uff0c\u4ee5aaaabbbb\u5f62\u5f0f\u51fa\u73b0\n\t\t\t\t\t\t\t\tif(num1==now) nk--; //num1\u4e3a\u52a0\n\t\t\t\t\t\t\t\telse if(num2==now) nk++; //num2\u4e3a\u51cf\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} //\u6ce8\u610f\u521d\u59cb\u65b9\u6848\u6570\u53ea\u6709f[0][0][20][1]=1\uff0c\u6240\u6709\u72b6\u6001\u53ea\u80fd\u4ece\u90a3\u91cc\u8f6c\u5316\u8fc7\u6765\n\t\t\t\t\t\tf[i+1][limit|(now<str[i]-'0')][nk][n0]+=cnt; //\u65b0\u72b6\u6001\u8981\u52a0\u4e0a\u6b64\u6b21\u8f6c\u79fb\u7684\u65b9\u6848\u6570\n\t\t\t\t\t}\n\t\t\t\t}\n\tif(num2==-1){\n\t\tfor(int limt=0;limt<2;limt++) //j<=20\u8bf4\u660e\u6b64\u65f6\u5224\u65ad\u7684\u6570\u5b57\u51fa\u73b0\u7684\u6b21\u6570>=\u4e00\u534a\n\t\t\tfor(int j=0;j<=20;j++) anss+=f[len][limt][j][0];\n\t}else { for(int limt=0;limt<2;limt++) anss+=f[len][limt][20][0]; }\n\treturn anss; //\u53ea\u6709k\u52a0\u51cf\u540e\u503c\u4e3a20\u65f6\uff0c\u624d\u4f1a\u4f7f\u4e24\u4e2a\u6570\u5b57\u5747\u6070\u597d\u51fa\u73b0\u4e00\u534a\u6b21\u6570\n}\n\nll solve(string str){\n\tll anss=0;\n\tint len=str.length();\n\tfor(int i=0;i<=9;i++) anss+=DP(str,len,i,-1);\n\tfor(int i=0;i<=9;i++) //\u5220\u9664\u91cd\u590d\u8ba1\u7b97\u7684aaabbb\u578b\n\t\tfor(int j=i+1;j<=9;j++) //\u6ce8\u610fj\u4ecei+1\u5f00\u59cb\n\t\t\tanss-=DP(str,len,i,j); //\u51fd\u6570\u4e2d\u4f20\u5165\u4e24\u4e2a\u6570\u5b57\n\treturn anss;\n}\n\nint main(){\n\tcin>>le>>ri; //\u76f4\u63a5\u628a\u533a\u95f4\u8fb9\u754c\u5f53\u505a\u5b57\u7b26\u4e32\u8f93\u5165\u8fdb\u6765\n\tfor(int i=le.length()-1;i>=0;i--) //\u628a\u533a\u95f4\u4e0b\u754c\u8f6c\u5316\u4e3a\u6c42\u89e3\u4e0a\u754c\n\t\tif(le[i]=='0') le[i]='9'; //\u5373\uff1a\u628ale\u53d8\u4e3ale-1\n\t\telse{ le[i]--; break; }\n\tcout<<solve(ri)-solve(le)<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1536972473,
        "uid": 69404,
        "name": "flora715",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3107 \u3010[USACO14OPEN]\u91cc\u7a0b\u8868Odometer\u3011"
    },
    {
        "content": "[P3107 [USACO14OPEN]Odometer S](https://www.luogu.com.cn/problem/P3107)\u89e3\u9898\u62a5\u544a\uff1a\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://zybuluo.com/xiaoziyao/note/1714880)\n## \u9898\u610f\n\u9898\u610f\uff1a\u7ed9\u5b9a\u533a\u95f4$[l,r]$\uff0c\u6c42\u533a\u95f4\u81f3\u5c11\u4e00\u534a\u7684\u6570\u4f4d\u76f8\u540c\u7684\u6570\u6570\u91cf\u3002\n\n\u6570\u636e\u8303\u56f4\uff1a$1\\leqslant l\\leqslant r\\leqslant 10^{18}$\u3002\n\n\u6570\u4f4ddp\u7684\u666e\u901a\u9898\uff0c\u4f46\u662f\u6709\u4e9b\u7ec6\u8282\u9700\u8981\u6ce8\u610f\u3002\n\n## \u5206\u6790\n\u8fd9\u91cc\uff0c\u6211\u4f1a\u628a\u6211\u6240\u6709\u7684\u601d\u8003\u8fc7\u7a0b\u8bb0\u5f55\u4e0b\u6765\uff1a\n\n\u89c2\u5bdf\u9898\u9762\uff0c\u53d1\u73b0\u8fd9\u9053\u9898\u5f88\u663e\u7136\u662f\u6570\u4f4ddp\u3002\n\n\u6211\u4eec\u53d1\u73b0\u5904\u7406\u533a\u95f4\u81f3\u5c11\u4e00\u534a\u7684\u6570\u4f4d\u76f8\u540c\u7684\u6570\u7684\u6570\u91cf\u4e0d\u597d\u505a\uff0c\u90a3\u4e48\u5c31\u628a\u5b83\u62c6\u6210\u5904\u7406\u6bcf\u4e2a\u6570\u5b57$k$\u51fa\u73b0\u8d85\u8fc7\u4e00\u534a\u7684\u6570\u7684\u6570\u91cf\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u5199\u51fa$\\text{calc}$\u51fd\u6570\u7684\u677f\u5b50\uff08\u5373\u62c6\u89e3\u6570\u4f4d\uff09\uff1a\n```\nint calc(int x,int k){\n\tmemset(f,-1,sizeof(f));\n\tfor(len=0;x;x/=10)\n\t\tnum[++len]=x%10;\n\treturn dfs1(...);\n}\n```\n\u8fd9\u91cc$\\text{calc(x,k)}$\u6307\u62c6\u89e3$x$\u7684\u6570\u4f4d\u4e3a$num$\u6570\u7ec4\uff0c\u5e76\u6c42\u5c0f\u4e8e\u7b49\u4e8e$x$\uff0c\u4e14\u6570\u5b57$k$\u4e0d\u5c11\u4e8e\u4e00\u534a\u7684\u6570\u7684\u4e2a\u6570\u7684\u51fd\u6570\u3002\n\n\u7136\u540e\u5f00\u59cb\u5199\u8bb0\u5fc6\u5316\u641c\u7d22\u7684$\\text{dfs}$\u51fd\u6570\uff0c\u8003\u8651\u6709\u54ea\u4e9b\u503c\u53ef\u4ee5\u5f71\u54cd\u7b54\u6848\uff1a\n\n- \u9996\u5148\u662f$len,k,flg1$\uff0c\u8fd9\u4e09\u4e2a\u6570\u5206\u522b\u4ee3\u8868\u5f53\u524d\u5904\u7406\u7684\u6570\u7684\u957f\u5ea6\uff0c\u6c42\u89e3\u7684\u6570\u5b57$k$\u548c\u5361\u4f4d\u7684\u6807\u5fd7\u3002\uff08\u5361\u4f4d\u7684\u6807\u5fd7$flg1$\u5728\u5f53\u524d\u9009\u62e9\u7684\u6570\u4e0e\u524d\u9762\u7684\u6570\u5b8c\u5168\u76f8\u540c\u65f6\u4e3a$1$\uff0c\u5426\u5219\u4e3a$0$\u3002\u5361\u4f4d\u7684\u6807\u5fd7\u5f71\u54cd\u7b54\u6848\u7684\u539f\u56e0\uff1a\u5982\u679c$flg1=1$\uff0c\u5219\u5f53\u524d\u6570\u4f4d\u53ea\u80fd\u53d6\u5230$num[len]$\uff0c\u56e0\u6b64\u7b54\u6848\u4f1a\u6709\u5dee\u522b\uff09\n- \u4e3a\u4e86\u5904\u7406\u7b54\u6848\uff08\u6570\u5b57$k$\u5fc5\u987b\u8d85\u8fc7\u4e00\u534a\uff09\uff0c\u6211\u4eec\u8981\u8bb0\u5f55\u4e24\u4e2a\u53c2\u6570$cnt1,cnt2$\uff0c\u5206\u522b\u6307$k$\u51fa\u73b0\u7684\u6b21\u6570\u4e0e\u975e$k$\u7684\u6570\u5b57\u51fa\u73b0\u7684\u6b21\u6570\u3002\n- \u53d1\u73b0\u524d\u5bfc\u96f6\u4e5f\u4f1a\u5bf9\u7b54\u6848\u9020\u6210\u5f71\u54cd\uff08\u56e0\u4e3a\u4f4d\u6570\u53ef\u80fd\u4e0d\u4e00\uff0c\u8fd9\u6837\u4f1a\u5bfc\u81f4\u524d\u5bfc\u96f6\u3002\u800c\u524d\u5bfc\u96f6\u4e2d\u7684$0$\u662f\u4e0d\u80fd\u7b97\u5230$cnt1$\u4e0e$cnt2$\u4e2d\u7684\uff09\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u8981\u8bb0\u5f55\u524d\u5bfc\u96f6\u7684\u6807\u5fd7$flg2$\u3002\n\n\u8fd9\u6837\uff0c$\\text{dfs}$\u51fd\u6570\u7684\u7684\u53c2\u6570\u5c31\u51fa\u6765\u4e86\uff1a```int dfs1(int len,int k,int cnt1,int cnt2,int flg1,int flg2)```\n\n\u7136\u540e\u662f\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u5957\u8def\uff1a\u7528\u6570\u7ec4$f[len][cnt1][cnt2][flg1][flg2]$\u8868\u793a\u5904\u7406\u957f\u5ea6\u4e3a$len$\uff0c\u5f53\u524d\u94a6\u5b9a\u7684\u6570\u51fa\u73b0\u6b21\u6570\u51fa\u73b0$cnt1$\u6b21\uff0c\u975e\u5f53\u524d\u94a6\u5b9a\u7684\u6570\u51fa\u73b0$cnt2$\u6b21\uff0c\u5361\u4f4d\u6807\u5fd7\u4e3a$flg1$\uff0c\u524d\u5bfc\u96f6\u6807\u5fd7\u4e3a$flg2$\u7684\u7b54\u6848\u3002\n\n\u8003\u8651\u8f6c\u79fb\u4e5f\u5f88\u7b80\u5355\uff1a\u679a\u4e3e\u6570\u4f4d$i$\uff0c\u7136\u540e\u5bf9\u6240\u6709\u53ef\u4ee5\u653e\u5f97\u4e0b\uff08$flg1=0$\u6216$i\\leqslant num[len]$\uff09\u7684\u65b9\u6848\u8fdb\u884c\u8f6c\u79fb\uff0c\u6ce8\u610f\u5728$cnt1$\u4e0e$cnt2$\u8fdb\u884c\u8f6c\u79fb\u7684\u65f6\u5019\u9700\u8981\u5224\u65ad\u524d\u5bfc\u96f6\uff0c\u5373\uff1a```res+=dfs1(len-1,k,cnt1+(i!=0||flg2==0)*(i==k),cnt2+(i!=0||flg2==0)*(i!=k),i==num[len]&&flg1,i==0&&flg2);```\n\n\u8fd9\u6837\uff0c$\\text{dfs}$\u51fd\u6570\u4e5f\u51fa\u6765\u4e86\uff1a\n```\nint dfs(int len,int k,int cnt1,int cnt2,int flg1,int flg2){\n\tif(len==0)\n\t\treturn cnt1>=cnt2;\n\tif(f[len][cnt1][cnt2][flg1][flg2]!=-1)\n\t\treturn f[len][cnt1][cnt2][flg1][flg2];\n\tint res=0;\n\tfor(int i=0;i<=9;i++)\n\t\tif(i<=num[len]||flg1==0)\n\t\t\tres+=dfs1(len-1,k,cnt1+(i!=0||flg2==0)*(i==k),cnt2+(i!=0||flg2==0)*(i!=k),i==num[len]&&flg1,i==0&&flg2);\n\treturn f[len][cnt1][cnt2][flg1][flg2]=res;\n}\n```\n\u867d\u7136\u8fd9\u6837\u80fd\u8fc7\u6837\u4f8b\uff0c\u4f46\u662f\u4ea4\u4e0a\u53bb\u540e\u4f1a\u6536\u83b7WA\u7684\u597d\u6210\u7ee9\u3002\n\n\u8fd9\u4e2a\u7a0b\u5e8f\u6709\u4e24\u70b9\u9519\u8bef\uff1a\n\n1. \u6ca1\u5f00$long\\ long$\n2. \u6c42\u89e3\u53d1\u751f\u9519\u8bef\u3002\n\n\u7b2c\u4e8c\u70b9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\u6211\u4eec\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff1a$112212$\uff0c\u8fd9\u4e2a\u6570\u53ef\u4ee5\u5728$k=1$\u65f6\u4ea7\u751f\u8d21\u732e\uff0c\u4e5f\u4f1a\u5728$k=2$\u65f6\u4ea7\u751f\u8d21\u732e\uff0c\u5373\u4e00\u4e2a\u957f\u5ea6\u4e3a\u5076\u6570\u7684\u6570\u6709\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e24\u4e2a\u6570\u51fa\u73b0\u6b21\u6570\u540c\u65f6\u4e0d\u5c11\u4e8e\u4e00\u534a\u3002\n\n\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5bb9\u65a5\uff0c\u5c06\u603b\u6570\u51cf\u53bb\u8fd9\u4e9b\u7279\u6b8a\u7684\u6570\uff0c\u5728\u8fd9\u91cc\u4e3a\u4e86\u65b9\u4fbf\u601d\u8003\uff0c\u6211\u628a\u8fd9\u79cd\u7279\u6b8a\u7684\u6570\u7684\u6c42\u89e3\u7528\u4e86\u53e6\u4e00\u4e2a\u51fd\u6570$\\text{calc2}$\uff0c\u5f53\u7136\u4e5f\u7528\u4e86\u53e6\u4e00\u4e2a\u8bb0\u5fc6\u5316\u641c\u7d22\u51fd\u6570$\\text{dfs2}$\u3002\n\n$\\text{calc2}$\u7684\u4ee3\u7801\u5f88\u5bb9\u6613\u5199\u51fa\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5355\u72ec\u63d0\u4f9b\u4e86\uff08\u540e\u9762\u6709\u5b8c\u6574\u4ee3\u7801\uff09\uff0c\u6211\u4eec\u8bb2\u4e00\u4e0b$\\text{dfs2}$\u7684\u5199\u6cd5\uff1a\n\u9996\u5148\u5e26\u5165\u7684\u53c2\u6570\u6709\u4e9b\u53d8\u5316\uff1a\n1. \u589e\u52a0\u4e86\u4e00\u4e2a$k2$\uff0c\u4ee3\u8868\u53e6\u4e00\u4e2a\u6c42\u89e3\u7684\u6570\u3002\n2. \u5c06$cnt2$\u7684\u610f\u4e49\u6539\u6210$k2$\u7684\u51fa\u73b0\u6b21\u6570\u3002\n\n\u8bb0\u5fc6\u5316\u5f88\u5bb9\u6613\u5199\u51fa\uff0c\u7136\u540e\u5c31\u662f\u8f6c\u79fb\u4e86\uff1a\n\n\u7531\u4e8e\u8fd9\u4e2a\u6570\u53ea\u7531\u4e24\u4e2a\u6570\u5b57\u7ec4\u6210\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5faa\u73af\uff0c\u53ea\u9700\u8981\u628a\u5faa\u73af\u5c55\u5f00\u5c31\u597d\u4e86\uff0c\u5373\u5199\u4e24\u4e2a$if$\uff0c\u518d\u628a\u8ba1\u7b97\u8d21\u732e\u7684$copy$\u4e0b\u6765\u5c31$ok$\u4e86\u3002\uff08\u4e0d\u8fc7\u8fd9\u91cc\u8981\u8bb0\u5f97\u8003\u8651\u4e00\u4e0b$cnt2$\u7684\u8f6c\u79fb\uff09\n\n```\nlong long dfs2(long long len,long long k1,long long k2,long long cnt1,long long cnt2,long long flg1,long long flg2){\n\tif(len==0)\n\t\treturn cnt1==cnt2;\n\tif(f[len][cnt1][cnt2][flg1][flg2]!=-1)\n\t\treturn f[len][cnt1][cnt2][flg1][flg2];\n\tlong long res=0;\n\tif(k1<=num[len]||flg1==0)\n\t\tres+=dfs2(len-1,k1,k2,cnt1+(k1!=0||flg2==0),cnt2,k1==num[len]&&flg1,k1==0&&flg2);\n\tif(k2<=num[len]||flg1==0)\n\t\tres+=dfs2(len-1,k1,k2,cnt1,cnt2+(k2!=0||flg2==0),k2==num[len]&&flg1,k2==0&&flg2);\n\treturn f[len][cnt1][cnt2][flg1][flg2]=res;\n}\n```\n\n\u4f46\u662f\u4ea4\u4e0a\u53bb\u540e\u53d1\u73b0\u5e76\u6ca1\u6709\u8fd9\u4e48\u7b80\u5355\uff0c\u8fd8\u662fWA\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u8fd9\u91cc\u6211\u60f3\u4e86\u5f88\u4e45\uff0c\u53d1\u73b0\u524d\u5bfc\u96f6\u6ca1\u6709\u8003\u8651\uff1a\u56e0\u4e3a\u4f4d\u6570\u4e0d\u4e00\u5b9a\uff0c\u56e0\u6b64\u8981\u8003\u8651\u524d\u5bfc\u96f6\u7684\u8f6c\u79fb\uff08\u8bb0\u5f97\u4e0d\u8981\u548c$k1$\u4e0e$k2$\u7684\u8f6c\u79fb\u91cd\u590d\u8ba1\u7b97\u8d21\u732e\uff09\uff1a\n\n```\n\tif(k1!=0&&k2!=0&&flg2==1)\n\t\tres+=dfs2(len-1,k1,k2,cnt1,cnt2,num[len]==0&&flg1,flg2);\n```\n\n## \u4ee3\u7801\n\u6ce8\u610f\uff0c\u8fd9\u91cc\u6570\u4f4ddp\u91c7\u7528\u66f4\u7b80\u5355\u7684\u8bb0\u5fc6\u5316\u641c\u7d22\u5f62\u5f0f\u3002\n```\n#include<stdio.h>\n#include<string.h>\nconst int maxl=25;\nlong long i,j,k,m,n,len,ans;\nlong long num[maxl],f[maxl][maxl][maxl][2][2];\nlong long dfs1(long long len,long long k,long long cnt1,long long cnt2,long long flg1,long long flg2){\n\tif(len==0)\n\t\treturn cnt1>=cnt2;\n\tif(f[len][cnt1][cnt2][flg1][flg2]!=-1)\n\t\treturn f[len][cnt1][cnt2][flg1][flg2];\n\tlong long res=0;\n\tfor(long long i=0;i<=9;i++)\n\t\tif(i<=num[len]||flg1==0)\n\t\t\tres+=dfs1(len-1,k,cnt1+(i!=0||flg2==0)*(i==k),cnt2+(i!=0||flg2==0)*(i!=k),i==num[len]&&flg1,i==0&&flg2);\n\treturn f[len][cnt1][cnt2][flg1][flg2]=res;\n}\nlong long calc1(long long x,long long k){\n\tmemset(f,-1,sizeof(f));\n\tfor(len=0;x;x/=10)\n\t\tnum[++len]=x%10;\n\treturn dfs1(len,k,0,0,1,1);\n}\nlong long dfs2(long long len,long long k1,long long k2,long long cnt1,long long cnt2,long long flg1,long long flg2){\n\tif(len==0)\n\t\treturn cnt1==cnt2;\n\tif(f[len][cnt1][cnt2][flg1][flg2]!=-1)\n\t\treturn f[len][cnt1][cnt2][flg1][flg2];\n\tlong long res=0;\n\tif(k1<=num[len]||flg1==0)\n\t\tres+=dfs2(len-1,k1,k2,cnt1+(k1!=0||flg2==0),cnt2,k1==num[len]&&flg1,k1==0&&flg2);\n\tif(k2<=num[len]||flg1==0)\n\t\tres+=dfs2(len-1,k1,k2,cnt1,cnt2+(k2!=0||flg2==0),k2==num[len]&&flg1,k2==0&&flg2);\n\tif(k1!=0&&k2!=0&&flg2==1)\n\t\tres+=dfs2(len-1,k1,k2,cnt1,cnt2,num[len]==0&&flg1,flg2);\n\treturn f[len][cnt1][cnt2][flg1][flg2]=res;\n}\nlong long calc2(long long x,long long k1,long long k2){\n\tmemset(f,-1,sizeof(f));\n\tfor(len=0;x;x/=10)\n\t\tnum[++len]=x%10;\n\treturn dfs2(len,k1,k2,0,0,1,1);\n}\nint main(){\n\tscanf(\"%lld%lld\",&n,&m);\n\tfor(i=0;i<=9;i++)\n\t\tans+=calc1(m,i)-calc1(n-1,i);\n\tfor(i=0;i<=9;i++)\n\t\tfor(j=i+1;j<=9;j++)\n\t\t\tans-=calc2(m,i,j)-calc2(n-1,i,j);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1591972268,
        "uid": 35754,
        "name": "Verdandi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3107 \u3010[USACO14OPEN]Odometer S\u3011"
    },
    {
        "content": "## \u8bb0\u5fc6\u5316\u641c\u7d22\n\n[\u535a\u5ba2\u9605\u8bfb](https://www.cnblogs.com/wljss/p/12500405.html)\n\n\u65e2\u7136\u9700\u8981\u51fa\u73b0\u7684\u6b21\u6570 $\\geq$ \u957f\u5ea6\u7684\u4e00\u534a\uff0c\u6211\u4eec\u4e0d\u59a8\u5c31\u679a\u4e3e\u8fd9\u4e2a\u6570\uff0c\u6309\u7167\u8bb0\u641c\u7684\u5957\u8def\uff0c\u6211\u4eec\u8bb0\u5f55\u4e00\u4e0b\u8fd9\u4e2a\u6570\u7684\u51fa\u73b0\u6b21\u6570\u4ee5\u53ca\u662f\u5426\u6ca1\u4e86\u524d\u5bfc\u96f6\u5373\u53ef\u3002\n\n\u8bb0\u5f55\u6b21\u6570\u7684\u65f6\u5019\u5982\u679c\u5f80\u540e\u6dfb\u7684\u6570\u662f\u679a\u4e3e\u7684\u6570\uff0c\u5219 $++cnt$ ,\u5426\u5219 $--cnt$ ,\u6613\u8bc1\u7b26\u5408\u6761\u4ef6\u5f53\u4e14\u4ec5\u5f53 $pos=0$ \u65f6 $cnt$ $\\geq$ $0$.\n\n\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e $10$ , $1122$ \uff0c$2323$ \u8fd9\u7c7b\u6570\u4f1a\u88ab\u8ba1\u7b97 $2$ \u6b21\uff0c\u6211\u4eec\u518d\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u51cf\u53bb\u5373\u53ef\u3002\n\n\u6ce8\u610f\u6570\u7ec4\u4e0b\u6807\u4e0d\u80fd\u662f\u8d1f\u6570\u3002\n\n\u8be6\u7ec6\u53ef\u4ee5\u770b\u4ee3\u7801\u3002\n\n```cpp\n#include<iostream>\n#include<cstring>\n#define LL long long\nusing namespace std;\nint num1, num2, tot;\nLL l, r;\nint w[233];\nLL f[20][40][40][2][2];\nLL dfs(int pos, int cnt1, int cnt2, int pre, int g)\n{\n\tif (!pos)return pre && (num2 == -1 ? cnt1 >= 19 : (cnt1 >= 19 && cnt2 >= 19));\n\tif (f[pos][cnt1][cnt2][pre][g] != -1)return f[pos][cnt1][cnt2][pre][g];\n\tint lim = g ? w[pos] : 9 , t1, t2; LL res = 0;\n\tfor (int i = 0; i <= lim; ++i)\n\t\tt1 = cnt1 + (pre || i > 0) * (i == num1 ? 1 : -1),\n\t\tt2 = num2 == -1 ? 0 : cnt2 + (pre || i > 0) * (i == num2 ? 1 : -1),\n\t\tres += dfs(pos - 1, t1, t2 , pre || (i > 0), g && i == lim);\n\treturn f[pos][cnt1][cnt2][pre][g] = res;\n}\nLL solve(LL x)\n{\n\ttot = 0;\n\twhile (x)w[++tot] = x % 10, x /= 10;\n\tLL res = 0;\n\tfor (int i = 0; i <= 9; ++i)\n\t\tmemset(f, -1, sizeof(f)), num1 = i, num2 = -1, res += dfs(tot, 19, 0, 0, 1);\n\tfor (int i = 0; i <= 9; ++i)\n\t\tfor (int j = i + 1; j <= 9; ++j)\n\t\t\tmemset(f, -1, sizeof(f)), num1 = i, num2 = j, res -= dfs(tot, 19, 19, 0, 1);\n\treturn res;\n}\nsigned main()\n{\n\tcin >> l >> r;\n\tcout << solve(r) - solve(l - 1);\n\treturn 0;\n}\n```\n",
        "postTime": 1584280896,
        "uid": 153843,
        "name": "wljss",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3107 \u3010[USACO14OPEN]Odometer S\u3011"
    },
    {
        "content": "## \u6570\u4f4d dp\n\n\u8003\u8651\u6bd4\u8f83\u96be\u4ee5\u8bb0\u5f55\u67d0\u4e2a\u72b6\u6001\u4e0b\u7684\u6700\u5927\u503c\uff0c\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u4e00\u4e2a\u6570  $d$  \u8ba1\u7b97\u5f3a\u5236\u5b83\u4e3a\u6700\u5927\u503c\u7684\u65b9\u6848\u548c\u3002\n\n\u8bbe  $c$  \u4e3a  $d$  \u5728\u67d0\u4e2a\u957f\u5ea6\u4e3a  $n$  \u7684\u6570\u4e2d\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u8981\u6c42\u6ee1\u8db3  $c\\geq \\lceil\\frac{n}{2}\\rceil$\u3002\n\n\u8bbe  $c'$  \u4e3a  $d$  \u4ee5\u5916\u6570\u7801\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u5373\u9700\u8981\u6ee1\u8db3  $c-c'\\geq 0$\u3002\n\n\u6240\u4ee5\u8bbe  $dp_{i,j}$  \u8868\u793a\u524d  $i$  \u4e2a\u6570\u4f4d\uff0c$c-c'=j$  \u7684\u65b9\u6848\u6570\uff0c\u518d\u6309\u7167\u6570\u4f4d dp \u7684\u5957\u8def\u8bb0\u5f55\u4e0a\u4e0b\u754c\u5565\u7684\u5c31\u53ef\u4ee5\u8f6c\u79fb\u4e86\u3002\n\n\u4f46\u662f\u5f88\u9057\u61be\uff0c\u7b97\u91cd\u4e86\u3002\n\n\u9700\u8981\u5bb9\u65a5\u6389\u90a3\u4e9b\u5b58\u5728\u4e24\u4e2a\u6570\u7801\u90fd\u6070\u597d\u5360\u4e00\u534a\u7684\u60c5\u51b5\u3002\n\n\u540c\u6837\u662f\u679a\u4e3e\u8fd9\u4e24\u4e2a\u6570\uff0c\u7136\u540e\u53d1\u73b0\u8fd9\u4e00\u6b21\u5408\u6cd5\u7684\u6570\u4e2d\u53ea\u5305\u542b\u8fd9\u4e24\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bb0\u5f55  $g_{i,j}$  \u8868\u793a\u8003\u8651\u5230\u524d  $i$  \u4f4d\uff0c\u5176\u4e2d\u4e00\u4e2a\u6570\u7801\u586b\u4e86  $j$  \u6b21\u7684\u65b9\u6848\u6570\uff0c\u540c\u6837\u5957\u8def\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n\n```\n#include<cstdio>\n#include<cstring>\n#define rep(a,b,c) for(int c(a);c<=(b);++c)\ntypedef long long ll;\nconst int M=20;\nint a[20],n;ll L,R;\nll dp[20][50][10][2],g[20][20][2][2];\ninline ll G(int d1,int d2)\n{\n\tint d[2]={d1,d2};\n\tmemset(g,0,sizeof(g));\n\trep(0,1,i)\n\t{\n\t\tg[1][i][i][0]=1;\n\t\tif(d[i]<=a[1])g[1][i][i][1]=1;\n\t}\n\trep(1,n-1,i)\n\t{\n\t\trep(0,i,j)\n\t\t{\n\t\t\trep(0,1,k)\n\t\t\t{\n\t\t\t\trep(0,1,c)\n\t\t\t\t{\n\t\t\t\t\tint nj=j+c;\n\t\t\t\t\tg[i+1][nj][c][0]+=g[i][j][k][0];\n\t\t\t\t\tif(d[c]<=a[i+1])\n\t\t\t\t\t{\n\t\t\t\t\t\tif(d[c]==a[i+1]){g[i+1][nj][c][1]+=g[i][j][k][1];}\n\t\t\t\t\t\telse{g[i+1][nj][c][1]+=g[i][j][k][0];}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tll ans=0;\n\tif(!(n&1))\n\t{\n\t\trep(0,1,i)if(d[i]&&d[i]<=a[n])\n\t\t{\n\t\t\tans+=g[n][n>>1][i][d[i]==a[n]];\n\t\t}\n\t}\n\tfor(int i=2;i<n;i+=2)\n\t{\n\t\trep(0,1,j)if(d[j])\n\t\t{\n\t\t\tans+=g[i][i>>1][j][0];\n\t\t}\n\t}\n\treturn ans;\n}\ninline ll DP(int d)\n{\n\tmemset(dp,0,sizeof(dp));\n\trep(0,9,i)\n\t{\n\t\tdp[1][(i==d?1:-1)+M][i][0]=1;\n\t\tif(i<=a[1])dp[1][(i==d?1:-1)+M][i][1]=1;\n\t}\n\trep(1,n-1,i)\n\t{\n\t\trep(-i,i,j)\n\t\t{\n\t\t\trep(0,9,k)\n\t\t\t{\n\t\t\t\trep(0,9,c)\n\t\t\t\t{\n\t\t\t\t\tint nj=j+(c==d?1:-1);\n\t\t\t\t\tdp[i+1][nj+M][c][0]+=dp[i][j+M][k][0];\n\t\t\t\t\tif(c<=a[i+1])\n\t\t\t\t\t{\n\t\t\t\t\t\tif(c==a[i+1])dp[i+1][nj+M][c][1]+=dp[i][j+M][k][1];\n\t\t\t\t\t\telse dp[i+1][nj+M][c][1]+=dp[i][j+M][k][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tll ans=0;rep(0,n,j)\n\t{\n\t\trep(1,a[n]-1,c)ans+=dp[n][j+M][c][0];\n\t\tans+=dp[n][j+M][a[n]][1];\n\t}\n\trep(1,n-1,i)rep(0,i,j)rep(1,9,c)ans+=dp[i][j+M][c][0];\n\treturn ans;\n}\ninline ll S(ll x)\n{\n\tn=0;while(x)a[++n]=x%10,x/=10;ll ans=0;\n\trep(0,9,i)ans+=DP(i);rep(0,9,i)rep(i+1,9,j)ans-=G(i,j);\n\treturn ans;\n}\nint main()\n{\n\tscanf(\"%lld%lld\",&L,&R);\n\tprintf(\"%lld\\n\",S(R)-S(L-1));\n}\n```",
        "postTime": 1669376790,
        "uid": 191281,
        "name": "Jr_Zlw",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3107 Odometer S"
    }
]
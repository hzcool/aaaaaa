[
    {
        "content": "**UPD\uff1a\u7ecf\u8bc4\u8bba\u533a\u6307\u6b63\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5e94\u4e3a 3 \u4e2a log\u3002**\n\n\u770b\u5230\u9898\uff1a\u5355\u70b9\u63d2\u5165\uff1f\u533a\u95f4\u67e5\u8be2\uff1f\u7ebf\u6bb5\u6811\u3002\u5f02\u6216\u548c\u6700\u5927\uff1f\u7ebf\u6027\u57fa\u3002\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u7ebf\u6bb5\u6811\u5957\u7ebf\u6027\u57fa\u4e86\u3002\n\n\u7ebf\u6bb5\u6811\u6bcf\u4e2a\u7ed3\u70b9\u7ef4\u62a4\u4e00\u4e2a\u7ebf\u6027\u57fa\uff0c\u63d2\u5165\u65f6\u76f4\u63a5\u63d2\u5165\uff0c\u67e5\u8be2\u65f6\u628a\u6240\u6709\u88ab\u67e5\u8be2\u533a\u95f4\u6240\u5305\u542b\u7684\u533a\u95f4\u7684\u7ebf\u6027\u57fa\u63d2\u5165\u5230\u4e00\u4e2a\u5927\u7684\u7ebf\u6027\u57fa\u91cc\uff0c\u6700\u540e\u5728\u5927\u7684\u7ebf\u6027\u57fa\u91cc\u67e5\u8be2\u5c31\u597d\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log m\\log ^2x)$\n\n\u4ee3\u7801:\n```\n#include <bits/stdc++.h>\nusing namespace std;\n\nstruct lb\n{\n    int a[32];\n    void insert(int x)\n    {\n        for(int i=31;i>=0;--i)\n            if(x&(1<<i))\n                if(a[i])x^=a[i];\n                else\n                {\n                    a[i]=x;\n                    return;\n                }\n    }\n    void insert(lb &n)\n    {\n        for(int i=31;i>=0;--i)\n            if(n.a[i])insert(n.a[i]);\n    }\n}p[200001];\n\nvoid insert(int o,int l,int r,int k,int x)\n{\n    p[o].insert(x);\n    if(l==r)return;\n    int mid=(l+r)>>1;\n    if(k<=mid)\n        insert(o<<1,l,mid,k,x);\n    else\n        insert(o<<1|1,mid+1,r,k,x);\n}\n\nlb ans;\n\nvoid query(int o,int l,int r,int ql,int qr)\n{\n    if(ql<=l && qr>=r){ans.insert(p[o]);return;}\n    int mid=(l+r)>>1;\n    if(qr<=mid)query(o<<1,l,mid,ql,qr);\n    else if(mid<ql)query(o<<1|1,mid+1,r,ql,qr);\n    else query(o<<1,l,mid,ql,mid),query(o<<1|1,mid+1,r,mid+1,qr);\n}\n\nint main()\n{\n    int n,m;\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;++i)\n    {\n        int op,a,b;\n        scanf(\"%d%d%d\",&op,&a,&b);\n        if(op==1)insert(1,1,m,a,b);\n        else\n        {\n            memset(ans.a,0,sizeof(ans.a));\n            query(1,1,m,a,b);\n            int maxn=0;\n            for(int i=31;i>=0;--i)\n                if((maxn^(ans.a[i]))>maxn)\n                    maxn^=ans.a[i];\n            printf(\"%d\\n\",maxn);\n        }\n    }\n}\n```",
        "postTime": 1545480898,
        "uid": 34886,
        "name": "ezoixx130",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4839 \u3010P\u54e5\u7684\u6876\u3011"
    },
    {
        "content": "\n\n## [Description](https://www.luogu.com.cn/problem/P4839)\n\n> \u7ef4\u62a4\u4e00\u4e2a\u5e8f\u5217\uff0c\u652f\u6301\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\u6700\u5927\u5f02\u6216\u548c\u3002\n\n## [Solution](https://www.luogu.com.cn/paste/8sbv3uwx)\n\n\u770b\u5230\u533a\u95f4\u67e5\u8be2\u6700\u5927\u5f02\u6216\u548c\uff0c\u8003\u8651\u7ebf\u6027\u57fa\u3002\n\n\u4f46\u662f\u7ebf\u6027\u57fa\u5e76\u4e0d\u8d44\u74f7\u533a\u95f4\u67e5\u8be2\u600e\u4e48\u529e\u561e\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u501f\u52a9\u6811\u5957\u6811\u7684\u601d\u60f3\uff0c\u7ed9\u4e00\u4e2a\u8d44\u74f7\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\u7684\u6570\u636e\u7ed3\u6784\uff08\u6bd4\u5982\u7ebf\u6bb5\u6811\uff09\u91cc\u7684\u6bcf\u4e00\u4e2a\u8282\u70b9\u5957\u4e00\u4e2a\u7ebf\u6027\u57fa\u3002\n\n\u8fd9\u6837\u5b50\u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u5bf9\u4e8e\u5355\u70b9\u4fee\u6539\uff0c\u7ed9\u4ece\u6839\u8282\u70b9\u5230\u5355\u70b9\u7684\u8def\u5f84\u6bcf\u4e2a\u70b9\u90fd\u63d2\u5165\u8fd9\u4e2a\u6570\u3002\n\n\u5bf9\u4e8e\u533a\u95f4\u67e5\u8be2\uff0c\u628a\u6240\u6709\u7b54\u6848\u63d2\u5165\u5230\u4e00\u4e2a\u5927\u7684\u7ebf\u6027\u57fa\u91cc\uff0c\u5728\u8fd9\u4e2a\u7ebf\u6027\u57fa\u91cc\u67e5\u6700\u5927\u5f02\u6216\u548c\u5373\u53ef\u3002\n\n\u4ee3\u7801\u5728\u94fe\u63a5\u91cc",
        "postTime": 1615378135,
        "uid": 413147,
        "name": "_Alejandro_",
        "ccfLevel": 0,
        "title": "P4839\u9898\u89e3"
    },
    {
        "content": "## \u9898\u76ee\u7b80\u8ff0\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P4839)\n\n## \u601d\u8def\n\n\u770b\u5230\u67e5\u8be2\u6700\u5927\u5f02\u6216\u548c\uff0c\u679c\u65ad\u60f3\u5230\u7ebf\u6027\u57fa\uff0c\u53c8\u770b\u5230\u4e86\u533a\u95f4\u64cd\u4f5c\uff0c\u679c\u65ad\u60f3\u5230\u7ebf\u6bb5\u6811\u3002\n\n\u4e8e\u662f\u5c31\u6709\u4e86\u7ebf\u6bb5\u6811\u5957\u7ebf\u6027\u57fa\u3002\n\n\u5bf9\u4e8e\u63d2\u5165\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u7ebf\u6bb5\u6811\u4e0a\u5bf9\u5e94\u7684\u70b9\u7684\u7ebf\u6027\u57fa\u76f4\u63a5\u63d2\u5165\u3002\n\n\u5bf9\u4e8e\u8be2\u95ee\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u533a\u95f4\u5185\u7684\u7ebf\u6027\u57fa\u5e76\u5728\u4e00\u5757\u67e5\u8be2\u3002\n\n\u7136\u540e\u4ee3\u7801\u5c31\u5199\u5b8c\u4e86\uff0c\u5438\u5438\u6c27\u5c31\u8fc7\u4e86\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int MAXN = 5e4 + 10;\nint N , M;\n\nstruct LB {\n\tint P[40];\n\tLB() { memset(P , 0 , sizeof P); }\n\tvoid Insert(int k) {\n\t\tfor(int i = 31; i >= 0; i--) {\n\t\t\tif(!(k & (1 << i))) continue;\n\t\t\tif(!P[i]) {\n\t\t\t\tP[i] = k;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tk ^= P[i];\n\t\t}\n\t}\n\tint Query() {\n\t\tint res = 0;\n\t\tfor(int i = 31; i >= 0; i--) res = max(res , (res ^ P[i]));\n\t\treturn res;\n\t}\n\tvoid Merge(LB X) {\n        for(int i = 31; i >= 0; i--)\n            if(X.P[i])\n\t\t\t\tInsert(X.P[i]);\n    }\n};\n\nstruct Node {\n\tint l , r;\n\tLB v;\n} Tree[MAXN * 4];\nvoid PushDown(int p) {\n\tTree[p].v.Merge(Tree[p * 2].v);\n\tTree[p].v.Merge(Tree[p * 2 + 1].v);\n}\nvoid Build(int p , int l , int r) {\n\tTree[p].l = l;\n\tTree[p].r = r;\n\tif(l == r) return;\n\tint Mid = l + r >> 1;\n\tBuild(p * 2 , l , Mid);\n\tBuild(p * 2 + 1 , Mid + 1 , r);\n\tPushDown(p);\n}\nvoid UpDate(int p , int pos , int k) {\n\tif(Tree[p].l == pos && Tree[p].r == pos) {\n\t\tTree[p].v.Insert(k);\n\t\treturn;\n\t}\n\tint Mid = (Tree[p].l + Tree[p].r) >> 1;\n\tif(pos <= Mid) UpDate(p * 2 , pos , k);\n\telse UpDate(p * 2 + 1 , pos , k);\n\tPushDown(p);\n\treturn; \n}\nLB Query(int p , int l , int r) {\n\tif(l <= Tree[p].l && Tree[p].r <= r) {\n\t\treturn Tree[p].v;\n\t}\n\tLB res;\n\tint Mid = (Tree[p].l + Tree[p].r) >> 1;\n\tif(l <= Mid) res.Merge(Query(p * 2 , l , r));\n\tif(r > Mid)  res.Merge(Query(p * 2 + 1 , l , r));\n\treturn res;\n}\n\n\nsigned main() {\n\tios::sync_with_stdio(false);\n\tcin >> N >> M;\n\tBuild(1 , 1 , M);\n\tfor(int i = 1 , op , l , r; i <= N; i++) {\n\t\tcin >> op >> l >> r;\n\t\tif(op == 1) {\n\t\t\tUpDate(1 , l , r);\n\t\t}\n\t\telse {\n\t\t\tcout << Query(1 , l , r).Query() << endl;\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1645947146,
        "uid": 461426,
        "name": "CmsMartin",
        "ccfLevel": 6,
        "title": "P\u54e5\u7684\u6876"
    },
    {
        "content": "## \u9898\u610f\n\u7ed9\u4f60\u4e00\u4e32\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217\uff0c\u5e8f\u5217\u7684\u6bcf\u4e00\u4e2a\u70b9\u90fd\u662f\u4e00\u4e2a\u96c6\u5408\u3002\u8981\u6c42\u652f\u6301\u5982\u4e0b\u64cd\u4f5c\u3002 [QWQ](https://www.luogu.com.cn/blog/xzc/solution-p4839)\n\n- \u5411\u4e00\u4e2a\u96c6\u5408\u4e2d\u63d2\u5165\u4e00\u4e2a\u6570\n\n- \u8be2\u95ee $L \\rightarrow R$ \u4e4b\u5185\u53ef\u4ee5\u6784\u9020\u51fa\u7684\u5f02\u6216\u6700\u5927\u503c\u3002\n\n## \u5206\u6790\n\n- \u5f02\u6216\u6700\u5927\u503c\n\n\u5f88\u81ea\u7136\u7684\u60f3\u5230\u7ef4\u62a4\u7ebf\u6027\u57fa\u3002\n\n- \u5feb\u901f\u4fee\u6539\uff0c\u5feb\u901f\u67e5\u8be2\n\n\u5408\u5e76\u96c6\u5408\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u662f\u6ee1\u8db3\u7ed3\u5408\u7387\u7684\u3002\u53ef\u4ee5\u8f6c\u5316\u4e3a\u533a\u95f4\u95ee\u9898\u5904\u7406\u3002\u7ebf\u6bb5\u6811\u5c31\u53ef\u4ee5\u5f88\u7b80\u5355\u7ef4\u62a4\u8fd9\u4e2a\uff0c\u628a\u6bcf\u4e2a\u8282\u70b9\u5f53\u4f5c\u4e00\u4e2a\u96c6\u5408\u6765\u7ef4\u62a4\u3002\n\n- \u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790\n\n- \u63d2\u5165\u65f6\uff0c\u4e00\u4e2a\u6570\u6700\u591a\u5728 $\\log m$ \u4e2a\u96c6\u5408\u4e2d\u63d2\u5165\uff0c\u6bcf\u6b21\u63d2\u5165\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\log w)$ \u3002\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\log m\\times \\log w)$ \u3002\n\n- \u67e5\u8be2\u65f6\uff0c\u7b54\u6848\u6700\u591a\u4f1a\u5728 $\\log m$ \u4e2a\u8282\u70b9\u4e2d\u66f4\u65b0\uff0c\u6bcf\u6b21\u66f4\u65b0\u4e3a $O(\\log^2 w)$ \u3002\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\log m \\times \\log ^2w)$ \u3002\n\n- \u4e00\u4e2a\u5c0f\u526a\u679d\uff0c\u5f53\u7b54\u6848\u6216\u8005\u8282\u70b9\u5df2\u7ecf\u63d2\u5165\u4e86 $\\log w$ \u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u540e\u9762\u7684\u8282\u70b9\u5c31\u4e0d\u7528\u63d2\u5165\u4e86\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u6784\u9020\u51fa\u6765\u7684\u7b54\u6848\u65f6\u7b49\u4ef7\u7684\u3002 \n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint read(){\n\tint x;scanf(\"%d\",&x);return x;\n}\nconst int N = 5e4+100;\nint n,m;\nstruct Node{\n\tint p[34];\n\tint size;\n\tNode(){size = 0;}\n}t[N<<2];\nint Ans[34],size;\nvoid update(int u,int l,int r,int K,int x)\n{\n\tif(l > K || r < K) return;\n\tint key = x;\n\tif(t[u].size < 31)\n\t{\n\t\tfor(int i = 31;i>=0;i--)\n\t\t{\n\t\t\tif(key&(1<<i))\n\t\t\t{\n\t\t\t\tif(!t[u].p[i])\n\t\t\t\t{\n\t\t\t\t\tt[u].p[i] = key;\n\t\t\t\t\tt[u].size++;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tkey ^= t[u].p[i];\n\t\t\t}\n\t\t}\t\n\t}\n\tif(l == r) return;\n\tint mid = l + r >> 1;\n\tupdate(u<<1,l,mid,K,x);\n\tupdate(u<<1|1,mid+1,r,K,x);\n}\nvoid ask(int u,int l,int r,int L,int R)\n{\n\tif(l > R || r < L) return;\n\tif(L <= l && r <= R) \n\t{\n\t\tif(size >= 31) return;\n\t\tfor(int i = 31;i>=0;i--)\n\t\t{\n\t\t\tif(t[u].p[i])\n\t\t\t{\n\t\t\t\tint key = t[u].p[i];\n\t\t\t\tfor(int j = i;j >= 0;j--)\n\t\t\t\t{\n\t\t\t\t\tif(key&(1<<j))\n\t\t\t\t\t{\n\t\t\t\t\t\tif(!Ans[j])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tAns[j] = key;\n\t\t\t\t\t\t\tsize++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey ^= Ans[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\tint mid = l + r>>1;\n\task(u<<1,l,mid,L,R);\n\task(u<<1|1,mid+1,r,L,R);\n}\n\nint main()\n{\n\tn = read();m = read();\n\twhile(n--)\n\t{\n\t\tint opt = read();\n\t\tif(opt == 1)\n\t\t{\n\t\t\tint k = read(),x = read();\n\t\t\tupdate(1,1,m,k,x);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmemset(Ans,0,sizeof(Ans));\n\t\t\tint l = read(),r = read();\n\t\t\task(1,1,m,l,r);\n\t\t\tint ans = 0;\n\t\t\tsize = 0;\n\t\t\tfor(int i = 31;i >= 0;i--)\n\t\t\t{\n\t\t\t\tif((ans^Ans[i]) > ans)\n\t\t\t\t{\n\t\t\t\t\tans ^= Ans[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf(\"%d\\n\",ans);\n\t\t}\n\t}\n}\n```\n",
        "postTime": 1596199202,
        "uid": 227824,
        "name": "JK_LOVER",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4839 \u3010P\u54e5\u7684\u6876\u3011"
    },
    {
        "content": "[\u4e5f\u8bb8\u6709\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/zheyuanxie/p/solution-p4839.html)\n\n## \u7b80\u8981\u9898\u610f\n\n\uff08\u8fd9\u9053\u9898\u63cf\u8ff0\u662f\u771f\u7684\u957f\uff09\n\n\u4f60\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u652f\u6301\u5355\u70b9\u5f02\u6216\u548c\u533a\u95f4\u6c42\u6700\u5927\u5f02\u6216\u548c\u3002\n\n## \u601d\u8def\n\n### \u601d\u7ef4\u8fc7\u7a0b\n\n\u5bf9\u4e8e\u8fd9\u79cd\u533a\u95f4\u95ee\u9898\uff0c\u6700\u5bb9\u6613\u60f3\u5230\u7684\u5c31\u662f\u7ebf\u6bb5\u6811\u3002\n\n\u800c\u5bf9\u4e8e\u590d\u6742\u7684\u5f02\u6216\u95ee\u9898\uff0c\u6700\u5bb9\u6613\u60f3\u5230\u7684\u5c31\u662f\u7ebf\u6027\u57fa\u3002\n\n\u5408\u5728\u4e00\u8d77\uff0c\u5c31\u662f\u7ebf\u6bb5\u6811\u5957\u7ebf\u6027\u57fa\uff0c\u7c7b\u4f3c\u7ecf\u5178\u7684\u6811\u5957\u6811\u3002\n\n### \u8be6\u7ec6\u601d\u8def\n\n\u7ebf\u6bb5\u6811\u5927\u5bb6\u5e94\u8be5\u90fd\u4f1a\uff0c\u5982\u679c\u4e0d\u4f1a\u5efa\u8bae\u5b66\u4e60\u4e00\u4e0b\uff0c\u8fd9\u662f\u4e00\u4e2a\u5f88\u6709\u7528\u7684\u6570\u636e\u7ed3\u6784\u3002\n\n\u7ebf\u6027\u57fa\u5927\u5bb6\u5e94\u8be5\u90fd\u4f1a\uff0c\u5982\u679c\u4e0d\u4f1a\u53ef\u4ee5\u770b [\u8fd9\u7bc7\u535a\u5ba2](https://www.luogu.com.cn/blog/szxkk/solution-p3813)\u3002\n\n\u9996\u5148\uff0c\u6bcf\u4e00\u4e2a\u7ebf\u6bb5\u6811\u8282\u70b9\uff0c\u90fd\u4fdd\u5b58\u4e00\u4e2a\u7ebf\u6027\u57fa\u3002\uff08\u5355\u4e2a\u7ebf\u6027\u57fa\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\log\\max\\{x\\})$\uff0c\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\uff0c\u4e0d\u7528\u62c5\u5fc3\u4f1aMLE\uff09\n\n\u9996\u5148\uff0c\u5bf9\u4e8e\u4fee\u6539\u64cd\u4f5c\uff0c\u6211\u4eec\u4e0d\u65b9\u4fbf `pushup`\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u4e00\u4e2a\u66f4\u597d\u7684\u65b9\u6cd5\uff1a\u5c31\u662f\u6211\u4eec\u7ebf\u6bb5\u6811DFS\u5230\u7684\u6bcf\u4e00\u4e2a\u533a\u95f4\u8282\u70b9\u90fd\u5305\u542b\u7740\u4fee\u6539\u503c\uff0c\u90a3\u4e48\u6211\u4eec\u8003\u8651\u50cf\u6743\u503c\u7ebf\u6bb5\u6811\u90a3\u6837\uff0c\u7ecf\u8fc7\u4e00\u4e2a\u70b9\u90fd\u628a\u4fee\u6539\u7684\u5143\u7d20\u63d2\u5165\u8282\u70b9\u7ebf\u6027\u57fa\u3002\n\n\u67e5\u8be2\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5b9e\u73b0\u4e00\u4e2a\u64cd\u4f5c `expand`\uff0c\u8868\u793a\u7528\u4e00\u4e2a\u65b0\u7684\u7ebf\u6027\u57fa\u6269\u5c55\u539f\u6765\u7684\u7ebf\u6027\u57fa\uff08\u8bf4\u4eba\u8bdd\uff1a\u5c06\u53e6\u4e00\u4e2a\u7ebf\u6027\u57fa\u7684\u6240\u6709\u5143\u7d20\u90fd\u63d2\u5165\u539f\u6765\u7684\u7ebf\u6027\u57fa\uff09\n\n`expand` \u64cd\u4f5c\u6709\u4e00\u4e2a\u7b80\u5355\u6709\u6548\u7684\u4f18\u5316\u5e38\u6570\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u904d\u5386\u7ebf\u6027\u57fa\u6570\u7ec4\u65f6\uff0c\u4ec5\u63d2\u5165\u975e $0$ \u503c\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u50cf\u7ecf\u5178\u7684\u7ebf\u6bb5\u6811\u90a3\u6837\u5b9e\u73b0\uff0c\u53ea\u4e0d\u8fc7\u5c06\u7ef4\u62a4\u4fe1\u606f\u5e76\u7684\u8fd0\u7b97\u7b26\u6362\u6210`expand` \u5373\u53ef\u3002\n\n\uff08\u6ce8\uff1a\u6709\u7684\u540c\u5b66\u53ef\u80fd\u4e60\u60ef\u5c06\u6211\u7684 `expand` \u64cd\u4f5c\u6362\u6210\u7c7b\u4f3c\u7ebf\u6027\u57fa\u52a0\u6cd5\u7684 `merge`\uff0c\u8fd9\u4e00\u70b9\u770b\u5927\u5bb6\u4e2a\u4eba\u559c\u597d\uff09\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log m\\log^{2}\\max\\{x\\})$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $O(n\\log\\max\\{x\\})$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nnamespace Basis{\n\tconst int MAX_BIT = 60;\n\tstruct Basis{\n\t\tint p[MAX_BIT+5];\n\t\tint _how_many_numbers_can_xor;\n\t\tvoid clear(){\n\t\t\tmemset(p,0,sizeof(p));\n\t\t\t_how_many_numbers_can_xor=0;\n\t\t}\n\t\tBasis(){\n\t\t\tclear();\n\t\t}\n\t\tvoid insert(int x){\n\t\t\tfor(int i=MAX_BIT;i>=0;i--){\n\t\t\t\tif(!(x>>i))continue;\n\t\t\t\tif(!p[i]){\n\t\t\t\t\tp[i]=x;\n\t\t\t\t\t_how_many_numbers_can_xor++;\n\t\t\t\t\tbreak;\n\t\t\t\t}   \n\t\t\t\tx^=p[i];\n\t\t\t}\n\t\t}\n\t\tint max_xor(){\n\t\t\tint ans=0;\n\t\t\tfor(int i=MAX_BIT;i>=0;i--){\n\t\t\t\tif((ans^p[i])>ans){\n\t\t\t\t\tans^=p[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ans;\n\t\t}\n\t\tbool can_be_xor(int x){\n\t\t\tfor(int i=MAX_BIT;i>=0;i--){\n\t\t\t\tif(x&(1ll<<i))x^=p[i];\n\t\t\t}\n\t\t\treturn x==0;\n\t\t}\n\t\tint numbers_can_xor(){\n\t\t\treturn (1ll<<_how_many_numbers_can_xor);\n\t\t}\n\t\tvoid expand(Basis &x){\n\t\t\tfor(int i=MAX_BIT;i>=0;i--){\n\t\t\t\tif(x.p[i]){\n\t\t\t\t\tinsert(x.p[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nnamespace sgt{\n\tBasis::Basis t[200005];\n\tvoid update(int x,int v,int i,int l,int r){\n\t\tt[i].insert(v);\n\t\tif(l==r){\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tif(x<=mid){\n\t\t\tupdate(x,v,i<<1,l,mid);\n\t\t}\n\t\telse{\n\t\t\tupdate(x,v,i<<1|1,mid+1,r);\n\t\t}\n\t}\n\tBasis::Basis result;\n\tvoid query(int ql,int qr,int i,int l,int r){\n\t\tif(ql<=l&&qr>=r){\n\t\t\tresult.expand(t[i]);\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tif(ql<=mid){\n\t\t\tquery(ql,qr,i<<1,l,mid);\n\t\t}\n\t\tif(qr>mid){\n\t\t\tquery(ql,qr,i<<1|1,mid+1,r);\n\t\t}\n\t}\n}\n\nint n,m;\n\nsigned main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0);cout.tie(0);\n\tcin>>n>>m;\n\twhile(n--){\n\t\tint op,a,b;\n\t\tcin>>op>>a>>b;\n\t\tif(op==1){\n\t\t\tsgt::update(a,b,1,1,m);\n\t\t}\n\t\telse{\n\t\t\tsgt::result.clear();\n\t\t\tsgt::query(a,b,1,1,m);\n\t\t\tcout<<sgt::result.max_xor()<<'\\n';\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n## \u52a0\u5f3a\u7248\uff1a[P5607 \\[Ynoi2013\\] \u65e0\u529b\u56de\u5929 NOI2017](https://www.luogu.com.cn/problem/P5607)\n\n\u5982\u679c\u5c06\u5355\u70b9\u4fee\u6539\u53d8\u6210\u533a\u95f4\u4fee\u6539\uff0c\u90a3\u4e48\u5e94\u8be5\u5982\u4f55\u5904\u7406\u5462\uff1f\u53ef\u4ee5\u601d\u8003\u4e00\u4e0b\u3002\uff08\u63d0\u793a\uff1a\u60f3\u60f3\u5dee\u5206\uff09\n\n[P5607 \\[Ynoi2013\\] \u65e0\u529b\u56de\u5929 NOI2017 \u9898\u89e3](https://www.cnblogs.com/zheyuanxie/p/solution-p5607.html)",
        "postTime": 1659526911,
        "uid": 413065,
        "name": "xiezheyuan",
        "ccfLevel": 5,
        "title": "\u7ebf\u6bb5\u6811\u5957\u7ebf\u6027\u57fa\u2014\u2014\u9898\u89e3P4839 P\u54e5\u7684\u6876"
    },
    {
        "content": "\u5f02\u6216\u548c\u6700\u5927\uff0c\u7ebf\u6027\u57fa\u65e0\u7591\u4e86\u3002\n\n\u8003\u8651\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u7ebf\u6027\u57fa\uff0c\u5bf9\u4e8e\u63d2\u5165\u64cd\u4f5c\u76f4\u63a5\u63d2\u5165\u5373\u53ef\uff0c\u56e0\u4e3a\u53ea\u6709 $\\log n$ \u4e2a\u8282\u70b9\u4f1a\u6539\u53d8\uff0c\u6240\u4ee5\u4e00\u6b21\u63d2\u5165\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $\\log n\\log V$\uff08$V$ \u662f\u503c\u57df\uff09\u7684\uff0c\u5bf9\u4e8e\u8be2\u95ee\u64cd\u4f5c\uff0c\u76f4\u63a5\u5c06\u4e0e\u8be2\u95ee\u533a\u95f4\u6709\u5173\u7684\u8282\u70b9\u4ee3\u8868\u7684\u7ebf\u6027\u57fa\u5408\u5e76\u5230\u4e00\u4e2a\u5927\u7684\u7ebf\u6027\u57fa\u4e2d\uff0c\u7b54\u6848\u5373\u4e3a\u5927\u7684\u7ebf\u6027\u57fa\u7684\u6700\u5927\u5f02\u6216\u548c\uff0c\u56e0\u4e3a\u6709 $\\log n$ \u4e2a\u8282\u70b9\uff0c\u5408\u5e76\u7684\u590d\u6742\u5ea6\u662f $\\log^2V$ \u7684\uff0c\u6240\u4ee5\u8be2\u95ee\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\log n\\log^2V$\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N=1e5+11;\n\nint n, m;\n\nint res[32], val[N<<2][32];\n\nvoid ins(int *p, int x){\n    for(int i=30; i>=0; i--)\n    if(x>>i){\n        if(!p[i]){p[i]=x; return;}\n        else x^=p[i];\n    }\n}\n\nvoid merge(int *p1, int *p2){\n    for(int i=0; i<=30; i++)\n        if(p2[i]) ins(p1, p2[i]);\n}\n\nvoid modify(int o, int l, int r, int x, int v){\n    ins(val[o], v);\n    if(l==r)return;\n    int Mid=l+r>>1;\n    if(x<=Mid) modify(o<<1, l, Mid, x, v);\n    else modify(o<<1|1, Mid+1, r, x, v);\n}\n\nvoid Query(int o, int l, int r, int x, int y){\n    if(l>=x&&r<=y){merge(res, val[o]);return;}\n    int Mid=l+r>>1;\n    if(x<=Mid) Query(o<<1, l, Mid, x, y);\n    if(y>Mid)  Query(o<<1|1, Mid+1, r, x, y);\n}\n\nint Query(int x, int y){\n    memset(res, 0, sizeof res);\n    Query(1, 1, n, x, y);\n    int ans=0;\n    for(int i=30; i>=0; i--)\n        if((ans^res[i])>ans) ans^=res[i];\n    return ans;\n}\n\nint main(){\n    scanf(\"%d%d\", &m, &n);\n    for(int i=1, op, x, y; i<=m; i++){\n        scanf(\"%d%d%d\", &op, &x, &y);\n        if(op==1) modify(1, 1, n, x, y);\n        else printf(\"%d\\n\", Query(x, y));\n    }\n    return 0;\n}\n```\n\n",
        "postTime": 1685171015,
        "uid": 740607,
        "name": "__ODT__",
        "ccfLevel": 0,
        "title": "P4839"
    },
    {
        "content": "[$ \\rule{20pt}{15pt}\\kern{-16.5pt}\\color{white}\\raisebox{4.7pt}{\\footnotesize\\sf Link} $](https://www.luogu.com.cn/problem/P4839)\n\n\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\uff0c\u53ef\u4ee5\u60f3\u5230\u7ebf\u6bb5\u6811\u3002\n\n\u7136\u540e\u5728\u7ebf\u6bb5\u6811\u7684\u6bcf\u4e00\u4e2a\u8282\u70b9\u4e0a\u5957\u4e00\u4e2a\u7ebf\u6027\u57fa\u7ef4\u62a4\u5373\u53ef\u3002\n\n\u8bb0\u5f97\uff1a\u7ebf\u6027\u57fa\u67e5\u8be2/\u5408\u5e76\u4e00\u5b9a\u8981\u4ece\u5927\u5230\u5c0f\u904d\u5386\u3002\n\n```cpp\n//P4839 need O2\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N = 5e4 + 10;\ninline int read(){\n\tint x = 0; char ch = getchar();\n\twhile(ch < '0' || ch > '9') ch = getchar();\n\twhile(ch >= '0' && ch <= '9') x = x * 10 + ch - '0', ch = getchar();\n\treturn x;\n}\n\nstruct basis{\n\tint p[32];\n\tvoid ins(int val){\n\t\tfor(int i = 31; i >= 0; -- i){\n\t\t\tif(!(val&(1<<i))) continue;\n\t\t\tif(!p[i]){ p[i] = val; break; }\n\t\t\tval ^= p[i];\n\t\t}\n\t}\n\tvoid ins(basis &x){\n\t\tfor(int i = 31; i >= 0; -- i)\n\t\t\tins(x.p[i]);\n\t}\n} T[N<<2], res;\nint n, m; \n\nint calc(basis x){\n\tint ans = 0;\n\tfor(int i = 31; i >= 0; -- i)\n\t\tans = max(ans, ans^x.p[i]);\n\treturn ans;\n}\nvoid modify(int p, int L, int R, int pos, int val){\n\tif(L == R) T[p].ins(val);\n\telse {\n\t\tint mid = L + R >> 1;\n\t\tif(pos <= mid) modify(p<<1, L, mid, pos, val);\n\t\telse modify(p<<1|1, mid+1, R, pos, val);\n\t\tT[p].ins(T[p<<1]), T[p].ins(T[p<<1|1]);\n\t}\n}\nvoid query(int p, int L, int R, int l, int r){\n\tif(l <= L && R <= r) res.ins(T[p]);\n\telse {\n\t\tint mid = L + R >> 1;\n\t\tif(l <= mid) query(p<<1, L, mid, l, r);\n\t\tif(mid < r) query(p<<1|1, mid+1, R, l, r);\n\t}\n}\n\nsigned main(){\n\tn = read(); m = read();\n\tfor(int i = 1, op, a, b; i <= n; ++ i){\n\t\top = read(); a = read(); b = read();\n\t\tif(op == 1) modify(1, 1, m, a, b);\n\t\telse{\n\t\t\tfor(int j = 0; j <= 31; ++ j) res.p[j] = 0;\n\t\t\tquery(1, 1, m, a, b);\n\t\t\tprintf(\"%d\\n\", calc(res));\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\u505a\u5b8c\u4e86\u8fd9\u9898\u53ef\u4ee5\u53bb\u505a [P5607 [Ynoi2013] \u65e0\u529b\u56de\u5929 NOI2017](https://www.luogu.com.cn/problem/P5607)\u3002",
        "postTime": 1652279933,
        "uid": 390770,
        "name": "AiRC0S",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 [LuoguP4839] P\u54e5\u7684\u6876"
    },
    {
        "content": "## P\u54e5\u7684\u6876 \u9898\u89e3\n\n\u7ebf\u6bb5\u6811 + \u7ebf\u6027\u57fa\n\n\u4ee3\u7801\u5199\u7684\u6bd4\u8f83\u66b4\u529b \u4f46\u662f\u5361\u4e86\u4e00\u4e0b\u5e38\u8fd8\u662f\u8fc7\u4e86\n\n---\n\n\u5355\u70b9\u63d2\u5165 + \u533a\u95f4\u6700\u5927\u5f02\u6216\u548c\u67e5\u8be2\n\n\u8003\u8651\u76f4\u63a5\u5f00\u4e00\u68f5\u7ebf\u6bb5\u6811\uff0c\u5728\u6bcf\u4e2a\u70b9\u4e0a\u7ef4\u62a4\u4e00\u4e2a\u7ebf\u6027\u57fa\uff0c\u4fee\u6539\u76f4\u63a5\u63d2\u5165\uff0c\u67e5\u8be2\u7684\u65f6\u5019\u628a\u5bf9\u5e94\u533a\u95f4\u7684\u7ebf\u6027\u57fa\u53d6\u51fa\u6765\u76f4\u63a5\u6c42\u6700\u5927\u5f02\u6216\u548c\u3002\n\n\u590d\u6742\u5ea6 $O(n\\log m\\log x)$\n\n---\n\n\u7136\u540e\u8fd9\u4e2a\u4e1c\u897f\u662f\u5e26\u7740\u4e24\u4e2a $\\log$ \u7684\uff0c\u7b2c\u4e00\u4e2a\u5927\u6982\u662f $16$ \u5de6\u53f3\uff0c\u7b2c\u4e8c\u4e2a\u662f $30$\uff0c\u590d\u6742\u5ea6\u5361\u5230\u6ee1\u7684\u8bdd\u5927\u6982 $2.4 \\times 10^8$ \u591a\u70b9\u3002\n\n~~\u5982\u679c\u4f60\u4ee3\u7801\u5199\u7684\u50cf BS \u8fd9\u4e48\u6162\u5927\u6982\u7387\u662f[\u8fc7\u4e0d\u53bb\u7684](https://www.luogu.com.cn/record/57387853)~~\n\n\u6570\u636e\u4e0d\u662f\u592a\u5f3a\u7684\u8bdd\uff0c\u5361\u4e00\u4e0b\u5e38\u6570\u662f\u80fd\u8fc7\u7684\u3002\n\n---\n\n\u5f53\u7136\u76f4\u63a5\u5438\u6c27\u7684\u8bdd\u5c31\u8dd1\u7740\u6bd4\u8f83\u8f7b\u677e\u4e86\n\n---\n\n~~\u552f\u4e00\u6709\u4eba\u770b\u7684~~\u4ee3\u7801\n\n```cpp\n/*\n  Source: P4839 P\u54e5\u7684\u6876\n*/\n#include<cstdio>\n#define RE register\n#define pn putchar('\\n')\n#define Max(x, y) ((x) > (y) ? (x) : (y))\n/*----------------------------------------------------------*/\nconst int A = 5e4 + 7;\n/*----------------------------------------------------------*/\nint n, m;\n/*----------------------------------------------------------*/\ninline int read() {\n\tint x = 0, f = 1; char ch = getchar();\n\twhile(ch < '0' || ch > '9') {if(ch == '-') f = -1; ch = getchar();}\n\twhile(ch >= '0' && ch <= '9') {x = (x << 3) + (x << 1) + (ch ^ 48); ch = getchar();}\n\treturn x * f;\n}\nvoid Print(int x) {if(x < 0) putchar('-'), x = -x; if(x > 9) Print(x / 10); putchar(x % 10 ^ 48);}\n/*----------------------------------------------------------*/\nstruct LB {\n\tint p[35];\n\tLB() {for(RE int i = 31; ~i; --i) p[i] = 0;}\n\tinline void insert(int x) {\n\t\tfor(RE int i = 31; ~i; --i) if(x >> i)\n\t\t\tif(p[i]) x ^= p[i]; else {p[i] = x; return ;}\n\t}\n\tinline void merge(LB x) {for(RE int i = 31; ~i; --i) if(x.p[i]) insert(x.p[i]);}\n\tinline int query() {\n\t\tint res = 0;\n\t\tfor(RE int i = 31; ~i; --i) res = Max(res, res ^ p[i]);\n\t\treturn res;\n\t}\n};\nnamespace Seg {\n\t#define ls(x) x << 1\n\t#define rs(x) x << 1 | 1\n\t#define mid (t[p].l + t[p].r >> 1)\n\tstruct node {int l, r; LB X;} t[A << 2];\n\tinline void push_up(int p) {t[p].X.merge(t[ls(p)].X); t[p].X.merge(t[rs(p)].X);}\n\tvoid build(int p, int l, int r) {\n\t\tt[p].l = l; t[p].r = r; if(l == r) return ;\n\t\tbuild(ls(p), l, mid); build(rs(p), mid + 1, r); push_up(p);\n\t}\n\tvoid up_date(int p, int pos, int k) {\n\t\tif(t[p].l == pos && t[p].r == pos) {t[p].X.insert(k); return ;}\n\t\tif(pos <= mid) up_date(ls(p), pos, k); else up_date(rs(p), pos, k); push_up(p);\n\t}\n\tLB query(int p, int l, int r) {\n\t\tif(l <= t[p].l && t[p].r <= r) return t[p].X; LB res;\n\t\tif(l <= mid) res.merge(query(ls(p), l, r));\n\t\tif(r > mid) res.merge(query(rs(p), l, r));\n\t\treturn res;\n\t}\n}\nvoid Main() {\n\tn = read(); m = read(); Seg::build(1, 1, m);\n\tfor(RE int i = 1; i ^ n + 1; ++i)\n\t\tif(read() == 1)\n\t\t{\n\t\t\tint x = read(), y = read();\n\t\t\tSeg::up_date(1, x, y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint x = read(), y = read();\n\t\t\tPrint(Seg::query(1, x, y).query()); pn;\n\t\t}\n}\n/*----------------------------------------------------------*/\nsigned main() {Main(); return 0;}\n\n```\n",
        "postTime": 1630650173,
        "uid": 235514,
        "name": "blank_space",
        "ccfLevel": 0,
        "title": "P4839 P\u54e5\u7684\u6876 \u9898\u89e3"
    }
]
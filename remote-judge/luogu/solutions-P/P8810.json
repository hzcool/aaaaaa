[
    {
        "content": "\u601d\u8def\u6bd4\u8f83\u7b80\u5355\u7684\u4e00\u9053\u9898\u3002\n\n\u7528\u7684\u4e94\u7ef4 dp\uff0c\u770b\u5230\u4e8c\u7ef4\u548c\u4e09\u7ef4\u7684 dp \u76f4\u63a5\u819c\u4e86 orz\u3002\n\n\u6b63\u6587\u5f00\u59cb\u3002\n\n## \u5206\u6790\n\n\u4e0d\u96be\u770b\u51fa dp\u3002\n\n\u56e0\u4e3a $b_i$ \u7684\u503c\u53ea\u4e0e $a_{i-1},a_i,a_{i+1}$ \u6709\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u5b9a\u4e49 **$b_i$ \u88ab $a_{c_1},a_{c_2},...a_{c_p}$ \u6ee1\u8db3\u4e3a\u5728\u8fd9\u4e9b $a$ \u4e2d\u6700\u5927\u7684\u4e00\u9879\u6070\u597d\u4e3a $b_i$\u3002**\n\n\u7528 $dp_{i,j,0/1,0/1,z}$ \u6765\u8868\u793a\u6b64\u72b6\u6001\u4e0b\u7684\u65b9\u6848\u6570\u3002\n\n\u5176\u4e2d\uff1a\n\n- $i$ \u8868\u793a\u5f53\u524d\u5904\u4e8e\u7b2c $i$ \u9879\u3002\n- $j$ \u8868\u793a\u5f53\u524d\u8fd9\u4e00\u9879\u9009\u62e9 $j$\u3002\n- $1/0$ \u8868\u793a $b_i$ \u662f\u5426\u88ab $a_{i-1},a_i$ \u6ee1\u8db3\u3002\n- $1/0$ \u8868\u793a $b_0$ \u662f\u5426\u88ab $a_0,a_1$ \u6ee1\u8db3\u3002\n- $z$ \u8868\u793a $a_0$ \u9009\u62e9 $z$\u3002\n\n\u663e\u7136\uff0c$a_i$ \u7684\u6700\u5927\u503c\u5c31\u662f $\\min(b_{i-1},b_i,b_{i+1})$\uff0c\u53c8\u56e0\u4e3a $b_i\\le10$\uff0c\u6240\u4ee5 $a_i$ \u7684\u6700\u5927\u503c\u4e5f\u662f $10$\u3002\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u6bd4\u8f83\u590d\u6742\u3002\n\n\u5982\u679c $i>1$\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u679a\u4e3e $a_i$ \u548c $a_{i-1}$\u3002\n\n\u8fd9\u65f6\u5019\u5b58\u5728\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1. $b_i$ \u88ab $a_i,a_{i-1}$ \u6ee1\u8db3\uff0c\u6b64\u65f6\u5e94\u8be5\u66f4\u65b0 $dp_{..,..,1,..,..}$ \u7684\u503c\u3002\n2. $b_i$ \u4e0d\u88ab $a_i,a_{i-1}$ \u6ee1\u8db3\uff0c\u6b64\u65f6\u5e94\u8be5\u66f4\u65b0 $dp_{..,..,0,..,..}$ \u7684\u503c\u3002\n\n\u6ce8\u610f\uff1a\u5728\u9009\u62e9 $a_i$ \u7684\u65f6\u5019\uff0c$b_{i-1}$ \u5fc5\u987b\u88ab $a_{i-2},a_{i-1},a_i$ \u6ee1\u8db3\uff0c\u539f\u56e0\u663e\u7136\u3002\n\n\u4f46\u5f53 $i=1$ \u65f6\uff0c\u5e94\u8be5\u5355\u72ec\u8ba8\u8bba\uff0c\u56e0\u4e3a $a_1$ \u7684\u9009\u62e9\u4f1a\u5f71\u54cd\u5230 dp \u6570\u7ec4\u7684\u7b2c $4$  \u9879\uff0c\u800c $i\\ge2$ \u5219\u4e0d\u4f1a\u3002\u601d\u8def\u8ddf $i\\ge2$ \u7684\u60c5\u51b5\u7c7b\u4f3c\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u6700\u540e\u7edf\u8ba1\u7b54\u6848\u65f6\uff0c\u6211\u4eec\u6709\u51e0\u79cd\u60c5\u51b5\uff1a\n\n- $dp_{n-1,x,1,1,y}$\uff0c\u56e0\u4e3a\u6b64\u65f6 $b_{n-1}$ \u548c $b_0$ \u5df2\u7ecf\u88ab\u6ee1\u8db3\uff0c\u800c\u5176\u5b83\u7684 $b$ \u4e5f\u90fd\u88ab\u6ee1\u8db3\uff0c\u76f4\u63a5\u52a0\u4e0a\u5373\u53ef\u3002\n- $dp_{n-1,x,0,1,y}$ \u5f53 $b_{n-1}\\le y$ \u65f6\u53ef\u4ee5\u76f8\u52a0\uff0c\u56e0\u4e3a $a$ \u6570\u7ec4\u662f\u73af\u5f62\u7684\u3002\n- $dp_{n-1,x,1,0,y}$ \u5f53 $b_0\\le x$ \u65f6\u53ef\u4ee5\u76f8\u52a0\uff0c\u539f\u56e0\u540c\u4e0a\u3002\n\n\u6700\u540e\uff0c\u8bb0\u5f97\u53d6\u6a21\u3002\n\n## AC Code\n\n~~\u81ed\u957f\u81ed\u957f\u7684\u4ee3\u7801 qwq\u3002~~\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int N = 1010;\nconst int MOD = 1e9 + 7;\n\nint n;\nint dp[N][11][2][2][11], b[N], am[N];\nint st;\n\ninline int nxt (int idx) {\n\treturn ((idx + 1) % n);\n}\n\ninline int pre (int idx) {\n\treturn ((idx - 1 + n) % n);\n}\n\nint m (int x) {\n\tif (x < MOD) return x;\n\treturn x - MOD;\n}\n\nint main () {\n    ios::sync_with_stdio(false);\n    cin.tie(0);cout.tie(0);\n\tcin >> n;\n\tfor (int i = 0;i < n;i++) cin >> b[i];\n\tfor (int i = 0;i < n;i++) am[i] = min(b[pre(i)], min(b[i], b[nxt(i)]));\n\tfor (int i = 0;i <= am[0];i++) if (i < b[0]) dp[0][i][0][0][i] = 1; else dp[0][i][1][1][i] = 1;\n\tfor (int x = 0;x <= am[0];x++) for (int st = 0;st <= 1;st++) for (int j = 0;j <= am[1];j++) {\n\t\tif (j < b[1] && x < b[1]) {\n\t\t\tif (j < b[0]) dp[1][j][0][st][x] += m(dp[0][x][0][st][x] + dp[0][x][1][st][x]), dp[1][j][0][st][x] = m(dp[1][j][0][st][x]);\n\t\t\telse dp[1][j][0][1][x] += m(dp[0][x][0][st][x] + dp[0][x][1][st][x]), dp[1][j][0][1][x] = m(dp[1][j][0][1][x]);\n\t\t}\n\t\telse {\n\t\t\tif (j < b[0]) dp[1][j][1][st][x] += m(dp[0][x][0][st][x] + dp[0][x][1][st][x]), dp[1][j][1][st][x] = m(dp[1][j][1][st][x]);\n\t\t\telse dp[1][j][1][1][x] += m(dp[0][x][0][st][x] + dp[0][x][1][st][x]), dp[1][j][1][1][x] = m(dp[1][j][1][1][x]);\n\t\t}\n\t}\n\tfor (int i = 2;i < n;i++) {\n\t\tint p = i - 1;\n\t\tfor (int x = 0;x <= am[0];x++) for (int st = 0;st <= 1;st++) {\n\t\t\tfor (int j = 0;j <= am[i];j++) {\n\t\t\t\tfor (int z = 0;z <= am[p];z++) {\n\t\t\t\t\tif (j < b[i] && z < b[i]) {\n\t\t\t\t\t\tif (j < b[p]) dp[i][j][0][st][x] += dp[p][z][1][st][x];else dp[i][j][0][st][x] += m(dp[p][z][0][st][x] + dp[p][z][1][st][x]);\n\t\t\t\t\t\tdp[i][j][0][st][x] = m(dp[i][j][0][st][x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (j < b[p]) dp[i][j][1][st][x] += dp[p][z][1][st][x];\n\t\t\t\t\t\telse dp[i][j][1][st][x] += m(dp[p][z][0][st][x] + dp[p][z][1][st][x]);\n\t\t\t\t\t\tdp[i][j][1][st][x] = m(dp[i][j][1][st][x]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans = 0;\n\tfor (int x = 0;x <= am[0];x++) for (int i = 0;i <= am[n - 1];i++) {\n\t\tans += dp[n - 1][i][1][1][x]; ans = m(ans);\n\t\tif (i >= b[0]) ans += dp[n - 1][i][1][0][x];\n\t\tif (x >= b[n - 1]) ans += dp[n - 1][i][0][1][x];\n\t\tans = m(ans);\n\t}\n\tcout << ans << endl;\n\treturn 0;\n} \n```\n",
        "postTime": 1669378221,
        "uid": 757990,
        "name": "zxh_mc",
        "ccfLevel": 0,
        "title": "P8810 [\u84dd\u6865\u676f 2022 \u56fd C] \u6570\u7ec4\u4e2a\u6570 \u9898\u89e3"
    }
]
[
    {
        "content": "\u3010\u9898\u610f\u3011\u5b9a\u4e49\u6709\u6839\u6811\u4e0a\u4e00\u4e2a\u7ed3\u70b9\u7684\u6743\u503c\u7b49\u4e8e\u6574\u4e2a\u5b50\u6811\u5185\u7684\u8282\u70b9\u6743\u503c\u548c\uff0c\u73b0\u7ed9\u51fa$n(n\\le15)$\u4e2a\u8282\u70b9\u7684\u6743\u503c$\\{w_n\\}$\uff0c\u9650\u5236\u6bcf\u68f5\u6811\u9ad8\u5ea6\u4e0d\u8d85\u8fc7$2$\uff0c\u6c42\u6ee1\u8db3\u8981\u6c42\u7684\u5e26\u6743\u68ee\u6797\u4e2a\u6570\u3002 \n\n\u3010\u505a\u6cd5\u3011\u8003\u8651\u72b6\u538bdp\uff0c\u8bbe$f[i,j]$\u4e3a\u6309$w$\u6392\u5e8f\u5c0f\u5927\u6392\u5e8f\u540e\u524d$i$\u4e2a\u8282\u70b9\u6240\u6784\u6210\u7684\u68ee\u6797\u4e2d\uff0c\u9ad8\u5ea6\u4e3a$1$\u7684\u6811\u96c6\u5408\u4e3a$j$\u7684\u65b9\u6848\u6570\uff0c\u8f6c\u79fb\u6709\n$$\nf[i,j]\\to f[i+1,j+\\{i+1\\}]$$  \n$$f[i,j]\\to f[i+1,j-k] \\; (k\\subseteq j,k\\not=\\varnothing,w_{i+1}=\\sum_{e\\in k}w_e)\n$$\n\u5373\u8003\u8651\u8ba9$i+1$\u4f5c\u4e3a\u9ad8\u5ea6\u4e3a$1$\u6216$2$\u7684\u6811\u7684\u6811\u6839\u3002\u6ce8\u610f\u5230\u5f53$|k|=1$\u65f6\uff0c\u5b58\u5728\u8ba9$i+1$\u4f5c\u4e3a$k$\u4e2d\u552f\u4e00\u70b9$e_0$\u7684\u513f\u5b50\u7684\u65b9\u6848\u3002\u663e\u7136\u4ec5\u5f53$w_i$\u5355\u8c03\u4e0d\u964d\u65f6\u80fd\u53d6\u5230\u6240\u6709\u51b3\u7b56\u3002\n\n\u3010\u590d\u6742\u5ea6\u7684\u63a8\u5bfc\u3011\n$$\n\\sum_{i=0}^{2^n-1}2^{\\mathbb{popcount}_i}\n=\\sum_{i=0}^n(n,i)2^i=\\sum_{i=0}^n(n,i)1^{n-i}2^i=(1+2)^n=3^n\n$$\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(n3^n)$\uff0c\u9700\u8981\u526a\u679d\u3002  \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int mod=1e9+7;\n\nint n,w[15],sum[1<<15];\nint lmt,f[16][1<<15];\n\ninline int lbt(int x) {return x&-x;}\ninline void add(int&x,int y) {if((x+=y)>=mod) x-=mod;}\n\nint main() {\n\tscanf(\"%d\",&n);\n\tfor(int i=0; i<n; ++i) scanf(\"%d\",w+i); sort(w,w+n);\n\tfor(int i=0; i<n; ++i) sum[1<<i]=w[i]; lmt=1<<n;\n\tfor(int i=0; i<lmt; ++i) {\n\t\tif(i!=lbt(i)) sum[i]=sum[i-lbt(i)]+sum[lbt(i)];\n\t}\n\tf[0][0]=1;\n\tfor(int i=0; i<n; ++i) {\n\t\tfor(int j=0; j<lmt; ++j) if(f[i][j]) {\n\t\t\tadd(f[i+1][j|(1<<i)],f[i][j]);\n\t\t\tfor(int k=j; k; k=(k-1)&j) if(w[i]==sum[k]) {\n\t\t\t\tadd(f[i+1][j^k],f[i][j]);\n\t\t\t\tif(k==lbt(k)) add(f[i+1][j^k],f[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\tint ans=0;\n\tfor(int i=0; i<lmt; ++i) {\n\t\tadd(ans,f[n][i]);\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1553258498,
        "uid": 125139,
        "name": "nosta",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4871 \u3010Oier\u4eec\u7684\u955c\u5b50(mirror)\u3011"
    },
    {
        "content": "\u6211\u4eec\u53ef\u4ee5\u6bd4\u8f83\u66b4\u529b\u7684\u505a\n\n\u6bcf\u6b21\u679a\u4e3e\u4e00\u4e2a\u6570\uff0c\u7136\u540e\u679a\u4e3e\u5b50\u96c6\u53ef\u4ee5\u7528\u54ea\u4e9b\u4e1c\u897f\u6784\u6210\n\n\u8bb0\u5f55\u4e00\u4e0b\u7528\u4e86\u51e0\u7ec4\uff0c\u6700\u540e\u9664\u6389\u5c31\u884c\u4e86\n\n$7*3^n$\u5e76\u4e0d\u80fd\u8fc7\n\n\u7136\u540e\u53ef\u4ee5\u7528fwt\u4f18\u5316\n\n\u4ee3\u7801\uff1a\n\n```cpp\n//2018.12.31 18:00\n/*\n   Name: Jiang_zi_chuan\n   Copyright: Jiang_zi_chuan\n   Author: Jiang_zi_chuan\n   Date: 31/12/18 18:00\n   Description: \u7b97\u6cd5\u7c7b\u578b\n*/\n// luogu-judger-enable-o2\n//#define LOCAL\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <iostream>\n#include <bits/stdc++.h>\n\n#define INF 0x3f\n#define ull unsigned long long\n#define ll long long\n#define FOR(a, b, n) for(register int a = b; b >= n ? a >= n : a <= n; b >= n ? a-- : a++)\n#define M(a, n) memset(a, n, sizeof(a));\n#define S(n) scanf(\"%d\", &n)\n#define P(n) printf(\"%d\", n)\n#define G(n) getline(cin, n)\n#define PI acos(-1.0)\n#define QAQ(n) 0\n#define chen_zhe 0x3f\n\nusing namespace std;\n\nconst int NR = 1000;\n#define lowbit(x) (x & ( -x ))\nconst int N = 16;\nconst int N2 = 1 << 15;\nint n, a[N], b[N2], sum[N2], f[N][N2];\nconst int mo = 1e9 + 7;\nvoid ps(int &x, int y)\n{\n  x += y;\n  x %= mo;\n}\nint main()\n{\n  S(n);\n  FOR(i, 1, n) \n    S(a[i]);\n  sort(a + 1, a + n + 1);\n  FOR(i, 1, n) \n    b[1 << (i - 1)] = a[i];\n  int l = (1 << n) - 1;\n  f[0][0] = 1;\n  FOR(i, 1, l) \n    sum[i] = sum[i - lowbit(i)] + b[lowbit(i)];\n  FOR(i, 1, n) \n  {\n    FOR(j, 0, l) \n      if (f[i - 1][j])\n      {\n        ps(f[i][j | (1 << (i - 1))], f[i - 1][j]);\n        for(register int k = j; k; k = (k - 1) & j)\n          if (sum[k] == a[i])\n          {\n            ps(f[i][j ^ k], f[i - 1][j]);\n            if (!(k - lowbit(k))) \n              ps(f[i][j ^ k], f[i - 1][j]);\n          }\n      }\n  }\n  int ans = 0;\n  FOR(i, 0, l) \n    ps(ans, f[n][i]);\n  P(ans);\n  return 0; \n}\n```",
        "postTime": 1546676360,
        "uid": 154004,
        "name": "Jiang_zi_chuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4871 \u3010Oier\u4eec\u7684\u955c\u5b50(mirror)\u3011"
    }
]
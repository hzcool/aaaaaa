[
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd**\u5341\u5206\u7b80\u5355**\u7684\u505a\u6cd5\uff1a\n\n\u6211\u4eec\u5148\u628a\u6751\u5e84\u770b\u6210\u4e00\u4e2a\u4e2a\u8282\u70b9\uff0c\u7136\u540e\u5c31\u662f\u5bf9\u6bcf\u4e2a\u70b9\u627e\u4e00\u4e2a\u4e0d\u540c\u7684\u8282\u70b9\u53bb\u79fb\u52a8\uff0c\u8d21\u732e\u662f\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u95ee\u53ef\u80fd\u8d21\u732e\u7684**\u6700\u5927\u503c**\u548c**\u6700\u5c0f\u503c**\uff0c\u4ee5\u53ca\u65b9\u6848\u3002\n\n\u9996\u5148\u8003\u8651\u6700\u5c0f\u503c\uff1a\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5b50\u6811\u7684\u6839\u8282\u70b9\uff0c\u4ed6\u7684\u6bcf\u4e2a\u513f\u5b50\u6700\u591a\u53ea\u4f1a\u4e0a\u4f20\u81ea\u5df1\u8fd9\u4e00\u4e2a\u8282\u70b9\u6765\u8bf7\u6c42\u79fb\u52a8\uff0c\u539f\u56e0\u7b49\u4e0b\u518d\u8bf4\uff0c\u7136\u540e\uff1a\n\n1.\u5982\u679c\u6211\u7684\u513f\u5b50\u4e2d\u6709\u9700\u8981\u5339\u914d\u7684\uff0c\u90a3\u4e48\u5c31\u628a\u6211\u548c\u4ed6\u4eec\u653e\u5230\u4e00\u4e2a\u73af\u4e0a\uff0c\u7b2c$i$\u4e2a\u9700\u8981\u5339\u914d\u7684\u513f\u5b50\u5411\u7b2c$i+1$\u4e2a\u8981\u5339\u914d\u7684\u513f\u5b50\u79fb\u52a8\uff0c\u7136\u540e\u6700\u540e\u4e00\u4e2a\u513f\u5b50\u5411\u6839\u79fb\u52a8\uff0c\u6839\u5411\u7b2c\u4e00\u4e2a\u513f\u5b50\u79fb\u52a8\u3002\u8d21\u732e+=2\\*\u513f\u5b50\u6570\n\n2.\u5982\u679c\u6ca1\u6709\u8981\u5339\u914d\u7684\uff0c\u5c31\u628a\u6211\u4e0a\u4f20\u3002\n\n\u6240\u4ee5\u6bcf\u4e2a\u513f\u5b50\u6700\u591a\u4e0a\u4f20\u4e00\u4e2a\u8282\u70b9\uff0c\u4f46\u662f\uff0c\u6839\u8282\u70b9\u4e0d\u80fd\u4e0a\u4f20\uff0c\u90a3\u6211\u4eec\u5c31\u5224\u65ad\u4e00\u4e0b\uff0c\u5982\u679c\u4ed6\u6ca1\u6709\u79fb\u52a8\u8fc7\uff0c\u5c31\u628a\u4ed6\u653e\u5230\u4ed6\u7b2c\u4e00\u4e2a\u513f\u5b50\u7684\u73af\u4e2d\uff0c\u5177\u4f53\u5b9e\u73b0\u7ec6\u8282\u53ef\u4ee5\u770b\u4ee3\u7801\n\n```\nvoid dfs1(int x,int y)\n{\n\tvector<int>p;\n\tfor(int i=0;i<v[x].size();i++)\n\t{\n\t\tint h=v[x][i];\n\t\tif(h==y)continue;\n\t\tdfs1(h,x);\n\t\tif(!a1[h])p.push_back(h);//\u9700\u8981\u4e0a\u4f20\n\t}\n\tif(p.empty())return;//\u60c5\u51b52\n\tfor(int i=0;i<p.size()-1;i++)a1[p[i]]=p[i+1];\n\ta1[p.back()]=x,a1[x]=p.front(),s1+=2*p.size();\n}\nvoid work1()\n{\n\tdfs1(1,0);\n\tif(!a1[1])a1[1]=a1[v[1][0]],a1[v[1][0]]=1,s1+=2;\n}\n```\n\n\u518d\u8003\u8651\u6700\u5927\u503c\uff1a\n\n\u4e00\u53e5\u8bdd\uff0c\u4ee5\u4efb\u4e00\u70b9\u4e3a\u6839\uff0c\u6c42\u51fadfs\u5e8f\uff0c\u7136\u540e\u6bcf\u4e2a\u8282\u70b9\u5411dfs\u5e8f\u6bd4\u81ea\u5df1\u5927n/2\u7684\u8282\u70b9\u79fb\u52a8\u3002\n```\nvoid dfs2(int x,int y)\n{\t\n\tdfn[++*dfn]=x;\n\tsz[x]=1;\n\tfor(int i=0;i<v[x].size();i++)\n\t{\n\t\tint h=v[x][i];\n\t\tif(h==y)continue;\n\t\tdfs2(h,x);\n\t\tsz[x]+=sz[h];\n\t}\n\ts2+=2*min(n-sz[x],sz[x]);\n}\nvoid work2()\n{\n\tdfs2(1,0);\n\tfor(int i=1;i<=n;i++)a2[dfn[i]]=dfn[(i+n/2-1)%n+1];\n}\n```\n\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u7b80\u5355\u5462\uff0c\u5177\u4f53\u539f\u56e0\u6709\u70b9\u7384\u5b66\uff0c\u56e0\u4e3a\u6811\u4e2d\u5fc5\u5b9a\u6709\u4e00\u4e2a\u91cd\u5fc3\uff0c\n\u800c\u8d21\u732e\u8981\u6700\u5927\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4ee5\u91cd\u5fc3\u4e3a\u6839\u7684\u6811\u6765\u8bf4\uff0c\u6bcf\u4e2a\u70b9\u4e00\u5b9a\u8981\u5411\u548c\u81ea\u5df1\u4e0d\u5728\u4e00\u4e2a\u5b50\u6811\u7684\u70b9\u79fb\u52a8\uff08\u8fd9\u91cc\u7684\u5b50\u6811\u662f\u6307\u91cd\u5fc3\u7684\u5b50\u6811\uff0c\u5373\u5931\u53bb\u91cd\u5fc3\u540e\uff0c\u6811\u4f1a\u88ab\u5206\u6210\u51e0\u4e2a\u8054\u901a\u5757\uff09\uff0c\u90a3\u4e48\u5982\u679c\u5f53\u524d\u6211\u9009\u7684\u8fd9\u4e2a\u6839\u4e0d\u662f\u91cd\u5fc3\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u91cd\u5fc3\u6765\u8bf4\uff0c\u4ed6\u7684\u7236\u4eb2\u4ee5\u4e0a\u7684\u90a3\u4e9b\u70b9\u4e00\u5b9a<n/2\u4e2a\uff0c\u6240\u4ee5\u6211\u7684dfs\u5e8f+n/2\u540e\uff0c\u4e00\u5b9a\u4e0d\u5728\u67d0\u4e00\u4e2a\u540c\u6837\u7684\u5b50\u6811\u4e2d\u3002\n\n\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define N 100005\nint n,x,y,a1[N],s1,a2[N],dfn[N],sz[N],s2;\nvector<int>v[N];\nvoid dfs1(int x,int y)\n{\n\tvector<int>p;\n\tfor(int i=0;i<v[x].size();i++)\n\t{\n\t\tint h=v[x][i];\n\t\tif(h==y)continue;\n\t\tdfs1(h,x);\n\t\tif(!a1[h])p.push_back(h);\n\t}\n\tif(p.empty())return;\n\tfor(int i=0;i<p.size()-1;i++)a1[p[i]]=p[i+1];\n\ta1[p.back()]=x,a1[x]=p.front(),s1+=2*p.size();\n}\nvoid work1()\n{\n\tdfs1(1,0);\n\tif(!a1[1])a1[1]=a1[v[1][0]],a1[v[1][0]]=1,s1+=2;\n}\nvoid dfs2(int x,int y)\n{\t\n\tdfn[++*dfn]=x;\n\tsz[x]=1;\n\tfor(int i=0;i<v[x].size();i++)\n\t{\n\t\tint h=v[x][i];\n\t\tif(h==y)continue;\n\t\tdfs2(h,x);\n\t\tsz[x]+=sz[h];\n\t}\n\ts2+=2*min(n-sz[x],sz[x]);\n}\nvoid work2()\n{\n\tdfs2(1,0);\n\tfor(int i=1;i<=n;i++)a2[dfn[i]]=dfn[(i+n/2-1)%n+1];\n}\nsigned main()\n{\n\tcin>>n;\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tcin>>x>>y;\n\t\tv[x].push_back(y);\n\t\tv[y].push_back(x);\n\t}\n\twork1(),work2();\n\tprintf(\"%lld %lld\\n\",s1,s2);\n\tfor(int i=1;i<=n;i++)printf(\"%lld \",a1[i]);puts(\"\");\n\tfor(int i=1;i<=n;i++)printf(\"%lld \",a2[i]);\n}\n```",
        "postTime": 1604304277,
        "uid": 88004,
        "name": "\u738b\u5955\u6e05",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6697 \u3010[BalticOI 2020 Day2] \u6751\u5e84\u3011"
    },
    {
        "content": "\u6709\u5220\u51cf\uff0c\u539f\u6587\u89c1[**\u6211\u7684\u535a\u5ba2**](https://www.cnblogs.com/SharpnessV/p/14872855.html)\u3002\n\n\u503c\u5f97\u4e00\u60f3\u7684\u6784\u9020\u9898\uff08\u8bc4\u5206\u865a\u4f4e\uff1f\n\n\u5148\u8003\u8651\u7b2c\u4e00\u95ee\uff0c\u6c42\u603b\u4ee3\u4ef7\u6700\u5c0f\u3002\n\n\u5bf9\u4e8e\u53f6\u5b50\u8282\u70b9\uff0c\u5b83\u53ef\u4ee5\u548c\u5b83\u7684\u7236\u8282\u70b9\u4ea4\u6362\u3002\n\n\u4f46\u662f\u5b83\u6709\u7684\u5144\u5f1f\u8282\u70b9\u662f\u53f6\u5b50\uff0c\u800c\u7236\u8282\u70b9\u53ea\u6709\u4e00\u4e2a\u3002\n\n\u6211\u4eec\u5c06\u6240\u6709\u5144\u5f1f\u8282\u70b9\u6392\u6210\u4e00\u884c\uff0c\u90a3\u4e48\u7b2c $i$ \u4e2a\u70b9\u79fb\u52a8\u5230\u7b2c $i+1$ \u4e2a\u8282\u70b9\uff0c\u7236\u8282\u70b9\u79fb\u52a8\u5230\u7b2c $1$ \u4e2a\u8282\u70b9\uff0c\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u79fb\u52a8\u5230\u7236\u8282\u70b9\u3002\u8fd9\u6b63\u597d\u662f\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u504f\u5e8f\u3002\u624b\u7b97\u4e00\u4e0b\u4e5f\u4e0d\u96be\u5f97\u5230\u5982\u679c\u6709\u8282\u70b9\u79fb\u52a8\u5230\u7236\u8282\u70b9\u548c\u5144\u5f1f\u8282\u70b9\u4e4b\u5916\u7684\u8282\u70b9\uff0c\u4e00\u5b9a\u4e0d\u4f1a\u4f7f\u7b54\u6848\u66f4\u4f18\u3002\n\n\u7b2c\u4e8c\u95ee\uff0c\u6c42\u603b\u4ee3\u4ef7\u6700\u5927\u3002\n\n\u8003\u8651\u5bf9\u6bcf\u6761\u8fb9\u8ba1\u7b97\u8d21\u732e\uff0c\u5047\u8bbe\u4e00\u6761\u8fb9\u4e24\u4fa7\u7684\u5b50\u6811\u5927\u5c0f\u5206\u522b\u4e3a $sz_a,sz_b$ \uff0c\u90a3\u4e48\u5bf9\u8fd9\u6761\u8fb9\u5bf9\u7b54\u6848\u7684\u6700\u5927\u8d21\u732e\u4e3a $2\\times \\min\\{sz_a,sz_b\\}$ \u3002\n\n\u5f88\u597d\u7406\u89e3\uff0c\u5982\u679c\u4e24\u4fa7\u5b50\u6811\u76f8\u7b49\uff0c\u5219\u4e24\u4e24\u4e92\u6362\u53ef\u4ee5\u5361\u6ee1\u4e0a\u7ebf\u3002\u5426\u5219\u6700\u591a\u4e92\u6362 $\\min$ \u5bf9\uff0c\u8d21\u732e\u4e3a\u4e24\u500d $\\min$ \u3002\n\n\u6240\u4ee5\u6211\u4eec\u60f3\u7740\u6784\u9020\u4e00\u79cd\u65b9\u6848\u4f7f\u5f97\u6bcf\u6761\u8fb9\u90fd\u8fbe\u5230\u4e0a\u7ebf\u3002\n\n\u5982\u679c\u5b58\u5728\u4e00\u6761\u8fb9\uff0c\u4e24\u4fa7\u5b50\u6811\u5927\u5c0f\u90fd\u662f $\\dfrac{n}{2}$ \uff0c\u90a3\u4e48\u4e24\u4e24\u914d\u5bf9\u5373\u53ef\u3002\n\n\u4f46\u662f\u8fd9\u6837\u7684\u8fb9\u4e0d\u4e00\u5b9a\u5b58\u5728\u3002$\\dfrac{n}{2}$ \u8fd9\u4e2a\u6570\u63d0\u4f9b\u4e86\u4e00\u4e2a\u65b0\u7684\u601d\u8def\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5272\u6389\u4e00\u4e2a\u70b9\uff0c\u90a3\u4e48\u91cd\u5fc3\u65e0\u7591\u662f\u6700\u4f18\u7684\u9009\u62e9\uff0c\u5bf9\u4e8e\u5272\u6389\u91cd\u5fc3\u540e\u6bcf\u68f5\u5b50\u6811\u7684\u5927\u5c0f\u90fd\u4e0d\u5927\u4e8e $\\dfrac{n}{2}$ \u3002\n\n\u90a3\u4e48\u8fd9\u5c31\u662f\u4e00\u4e2a\u7ecf\u5178\u95ee\u9898\uff01\u6211\u4eec\u4e00\u5b9a\u53ef\u4ee5\u4e24\u4e24\u914d\u5bf9\u4f7f\u5f97\u6bcf\u4e00\u5bf9\u7684\u4e24\u4e2a\u70b9\u5c5e\u4e8e\u4e0d\u540c\u7684\u5b50\u6811\u3002\n\n\u7528\u5806\u7ef4\u62a4\u5f53\u524d\u6700\u5927\u7684\u5b50\u6811\uff0c\u6bcf\u6b21\u9009\u62e9\u6700\u5927\u7684\u5b50\u6811\u548c\u6b21\u5927\u7684\u5b50\u6811\u4e2d\u4e2a\u4e00\u4e2a\u70b9\u914d\u5bf9\u5373\u53ef\u3002\u6ce8\u610f $n$ \u4e3a\u5947\u6570\u65f6\u9700\u8981\u7279\u5224\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(N\\log N)$ \u3002",
        "postTime": 1623330984,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011[BalticOI 2020 Day2] \u6751\u5e84"
    },
    {
        "content": "**\u6c42\u6700\u5c0f\u603b\u8ddd\u79bb**\uff1a\n\n\u56e0\u4e3a\u6bcf\u4e2a\u6751\u6c11\u90fd\u9700\u8981\u642c\u5230\u4e00\u4e2a\u65b0\u7684\u5730\u65b9\uff0c\u8003\u8651\u4ece\u53f6\u5b50\u4e0a\u5f00\u59cb\u79fb\u52a8\u3002\n\n\u5982\u679c\u5f53\u524d\u53f6\u5b50\u4e0a\u7684\u6751\u6c11\u8fd8\u6ca1\u6709\u79fb\u52a8\u8fc7\uff0c\u5c31\u5c06\u5176\u4e0e\u4ed6\u7684\u90bb\u5c45\u4ea4\u6362\u4e0a\uff0c\u7b54\u6848+2\u5e76\u5c06\u5176\u4ece\u6811\u4e0a\u5220\u9664\uff08\u6253\u6807\u8bb0\u5373\u53ef\uff09\u3002\u5982\u679c\u6700\u540e\u8fd8\u5269\u4e0b\u4e00\u4e2a\u6751\u6c11\uff0c\u968f\u4fbf\u627e\u4ed6\u65c1\u8fb9\u7684\u4e00\u4e2a\u90bb\u5c45\u4ea4\u6362\u5373\u53ef\u3002\n\n**\u6c42\u6700\u5927\u603b\u8ddd\u79bb**\uff1a\n\n\u9996\u5148\u8003\u8651\u6bcf\u6761\u8fb9\u4e24\u4e2a\u65b9\u5411\u4e0a\u6709\u591a\u5c11\u6751\u6c11\u53ef\u4ee5\u7a7f\u8fc7\u8fd9\u6761\u8fb9\u3002\n\n\u8003\u8651\u4e00\u6761\u8fb9$(u,v)$\uff0c\u5219\u80fd\u901a\u8fc7\u7684\u6700\u5927\u4eba\u6570\u4e3a$\\min(subtreeSize(u),subtreeSize(v))$\n\n\u800c\u7406\u8bba\u4e0a\u7684\u6700\u5927\u503c\u5373\u5bf9\u4e8e\u6bcf\u6761\u8fb9\u8ba1\u7b97\u6700\u5927\u4eba\u6570\u4e4b\u548c\u3002\n\n\u8003\u8651\u627e\u51fa\u6811\u7684\u91cd\u5fc3\uff0c\u53ea\u9700\u8981\u6392\u5217\u90bb\u5c45\u5b50\u6811\u4e2d\u7684\u6240\u6709\u8282\u70b9\u7684\u91cd\u5fc3\u672c\u8eab\u5c31\u4e0d\u4f1a\u518d\u6709\u8282\u70b9\u4f4d\u4e8e\u4ee5\u524d\u7684\u5b50\u6811\u4e2d\u4e86\u3002\uff08\u5177\u4f53\u5c31\u662f\u5c06\u6bcf\u4e2a\u8282\u70b9\u5411dfs\u5e8f\u6bd4\u81ea\u5df1\u5927n/2\u7684\u8282\u70b9\u79fb\u52a8\u3002\uff09\u56e0\u4e3a\u6b64\u65f6\u56e0\u4e3a\u6ca1\u6709\u4e00\u4e2a\u5b50\u6811\u5927\u4e8e\u5176\u4ed6\u5b50\u6811\u7684\u603b\u548c\uff0c\u5e76\u4fdd\u8bc1\u4e86\u6700\u5927\u6570\u91cf\u7684\u6751\u6c11\u5c06\u901a\u8fc7\u6bcf\u6761\u8fb9\u3002\n\n```c++\nll nebs[N];\nint deg[N];\nint n;\nint siz[N],place[N];\nint lef[N],tot_lef;\nint hson[N];\nnamespace mindis\n{\n\tint ans=0;\n\tint mian()\n\t{\n\t\tR(i,0,n-1)\n\t\t{\n\t\t\tint v=lef[i];\t\t\t\t\t\n\t\t\tif(place[v]==v) \n\t\t\t{\t\t\t\n\t\t\t\tans+=2;\n\t\t\t\tint u=nebs[v];\n\t\t\t\tif(u>0) \n\t\t\t\t{\n\t\t\t\t\tplace[v]=place[u];\n\t\t\t\t\tplace[u]=v;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tint j=i,z;\n\t\t\t\t\tdo\n\t\t\t\t\t{\n\t\t\t\t\t\tj--;\n\t\t\t\t\t\tz=lef[j];\n\t\t\t\t\t}while(j>0&&nebs[z]^v);\n\t\t\t\t\tplace[v]=place[z];\n\t\t\t\t\tplace[z]=v;\n\t\t\t\t}\n\t\t\t} \n\t\t}\n\t\treturn ans;\n\t}\n\tinline void print() {R(i,1,n)writesp(place[i]);puts(\"\");}\n}\nnamespace maxdis\n{\n\tint ans=0;\n\tint groupSiz[N],group[N],place2[N],cnt[N],ord[N];\n\tint mian() \n\t{\n   \t\tR(i,1,n) ans+=2*min(siz[i],n-siz[i]);\n\t\tint u=1,uu=1;\n\t\t//R(i,1,n) printf(\"hson:%d\\n\",hson[i]);\n\t\tdo\n\t\t{\n\t\t\tu=uu;\n\t\t\tif(siz[u]<(n+1)/2) uu=nebs[u];\n\t\t\telse if(siz[u]>n/2&&hson[u]&&siz[hson[u]]>n/2) uu=hson[u]; \n\t\t\t//printf(\"u:%d %d\\n\",u,uu);\n\t\t}while(u^uu);\n\t\t//printf(\"u:%d uu:%d\\n\",u,uu);\n\t\tint nextGroup=1;\n\t\tL(i,0,n-1) \n\t\t{\n\t\t\tint v=lef[i];//printf(\"v:%d\\n\",v);\n\t\t\tif((v==u)||(nebs[v]==u)) group[v]=++nextGroup;\n\t\t\telse if(nebs[v]>0) group[v]=group[nebs[v]];\n\t\t\telse group[v]=1;\n\t\t\tgroupSiz[group[v]]++;\n\t\t}\t\n\t\t//R(i,0,n) printf(\"g:%d\\n\",group[i]);\n\t\tR(i,1,nextGroup) groupSiz[i]+=groupSiz[i-1]/*,printf(\"f:%d\\n\",groupSiz[i])*/;\n\t\tR(i,1,n) ord[groupSiz[group[i]-1]+cnt[group[i]]]=i,cnt[group[i]]++;\n\t\tR(i,0,n-1) place2[ord[i]]=ord[(i+n/2)%n];\n\t\treturn ans;\n\t}\n\tinline void print() {R(i,1,n)writesp(place2[i]);puts(\"\");}\n}\nsigned main()\n{\n\tn=read();\n\tint u,v;\n\tR(i,2,n) \n\t{\n\t\tu=read(),v=read();\n\t\tdeg[u]++,deg[v]++;\n\t\tnebs[u]+=v,nebs[v]+=u;\n\t}\t\n\tR(i,1,n) \n\t{\n\t\tsiz[i]=1;place[i]=i;\n\t\tif(deg[i]==1) lef[tot_lef++]=i;\n\t}\n\tsiz[0]=-inf;\n\tfor(int i=0;i<tot_lef;i++) \n\t{\n\t\tint v=lef[i];\n\t\tint u=nebs[v];\n\t\tif(u>0) \n\t\t{\n\t\t\thson[u]=(siz[hson[u]]<siz[v])?v:hson[u];\n\t\t\tsiz[u]+=siz[v];\n\t\t\tdeg[u]--;\n\t\t\tnebs[u]-=v;\n\t\t\tif(deg[u]==1) lef[tot_lef++]=u;\n\t\t}\n\t}\n\twritesp(mindis::mian());\n\twriteln(maxdis::mian());\n\tmindis::print(),maxdis::print();\n}\n```\n\n",
        "postTime": 1618987656,
        "uid": 115779,
        "name": "\u6781\u5bd2\u795e\u51b0",
        "ccfLevel": 0,
        "title": "P6697"
    }
]
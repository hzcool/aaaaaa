[
    {
        "content": "\u5b9e\u9645\u4e0a\u8fd9\u9053\u9898\u5e76\u4e0d\u662f\u6709\u5411\u56fe\u7684\u4f20\u9012\u95ed\u5305\uff0c\u800c\u662f\u65e0\u5411\u56fe\u7684\u8fde\u901a\u6027\u3002\n\n\u6bcf\u4e2a\u5c0f\u670b\u53cb\u7684\u73a9\u5177\u79fb\u52a8**\u90fd\u662f\u4e00\u4e2a\u6392\u5217**\uff0c\u522b\u628a\u8fd9\u4e2a\u91cd\u8981\u6761\u4ef6\u5fd8\u6389\u4e86\u3002\n\n\u5982\u679c\u662f\u6392\u5217\u7684\u8bdd\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u73a9\u5177$x$\u53ef\u4ee5\u5230$y$\uff0c\u663e\u7136\u5728\u540c\u4e00\u4e2a\u5c0f\u670b\u53cb\u624b\u91cc\uff0c\u53ef\u4ee5\u591a\u8d70\u51e0\u6b21\u56de\u5230$x$\uff0c\u5373\u5b58\u5728\u4e00\u6761\u8def\u5f84$x,y,z,..,x$\u3002\u90a3\u4e48$y$\u4e5f\u5c31\u53ef\u4ee5\u5230$x$\uff0c\u56e0\u6b64\u6bcf\u6b21\u73a9\u5177\u7684\u8f6c\u79fb\u90fd\u662f\u4e00\u6761\u65e0\u5411\u8fb9\u3002\n\n\u63a5\u4e0b\u6765\u5927\u5bb6\u5e94\u8be5\u90fd\u4f1a\u505a\u4e86\uff0c\u7528\u5e76\u67e5\u96c6\u628a\u6bcf\u6761\u65e0\u5411\u8fb9\u4fe9\u7aef\u70b9\u6240\u5728\u96c6\u5408\u5408\u5e76\u5c31\u884c\u4e86\u3002\n\n\u590d\u6742\u5ea6$O(mn+q)$\n\n```cpp\n#include <bits/stdc++.h>\n//#define int long long\nusing namespace std;\n\nconstexpr size_t MAXN = 1e3 + 5;\nint f[MAXN];\n\ninline int Find(int x) { return x == f[x] ? x : f[x] = Find(f[x]); }\n\ninline void Solve() {\n\tint n, m, q;\n\tcin >> n >> m >> q;\n\tfor (int i = 1; i <= n; i++) f[i] = i;\n\tfor (int i = 1; i <= m; i++)\n\t\tfor (int j = 1, x; j <= n; j++)\n\t\t\tcin >> x, f[Find(x)] = Find(j);\n\twhile (q--) {\n\t\tint x, y;\n\t\tcin >> x >> y;\n\t\tif (Find(x) == Find(y)) cout << \"DA\\n\";\n\t\telse cout << \"NE\\n\";\n\t}\n}\n\nsigned main(void) {\n\tios::sync_with_stdio(0), cin.tie(0), cout.tie(0);\n\t//int t; cin >> t;\n\tint t = 1;\n\twhile (t--) Solve();\n}\n\n```\n",
        "postTime": 1640420206,
        "uid": 29354,
        "name": "CodyTheWolf",
        "ccfLevel": 4,
        "title": "P7965\u9898\u89e3"
    },
    {
        "content": "\u8bdd\u8bf4\u8fd9\u9053\u9898\u76ee\u7684\u6807\u7b7e\u662f\u8ba4\u771f\u7684\u5417\uff1f\u8fd9\u4e0d\u662f\u4e2a\u5e76\u67e5\u96c6\u677f\u5b50\u9898\u5417\uff1f\n\n\u6839\u636e\u9898\u610f\u6211\u4eec\u5f97\u5230\uff0c\u7f16\u53f7\u4e3a $i$ \u7684\u73a9\u5177\u53ef\u4ee5\u653e\u5728\u7f16\u53f7\u4e3a $p_i$\u3002\u53c8\u56e0\u4e3a $p_i$ \u662f\u4e00\u4e2a\u6392\u5217\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5199\u4e00\u4e2a\u5e76\u67e5\u96c6\uff0c\u5728 $i$ \u548c $p_i$ \u4e4b\u95f4\u5efa\u7acb\u5173\u7cfb\uff0c\u4f9d\u6b64\u7ed9 $m$ \u4e2a\u4eba\u5904\u7406\u5173\u7cfb\u3002\u7136\u540e\u5bf9\u4e8e\u4e0b\u9762\u7684\u8be2\u95ee\uff0c\u6211\u4eec\u5957\u7528\u5e76\u67e5\u96c6\u6a21\u677f\u7684\u67e5\u8be2\u51fd\u6570\u8fdb\u884c\u6bd4\u8f83\uff0c\u5982\u679c $x$ \u548c $y$ \u7684\u8fd4\u56de\u503c\u4e00\u6837\uff0c\u90a3\u4e48\u8bf4\u660e\u5b83\u4eec\u4e4b\u95f4\u662f\u5b58\u5728\u5173\u7cfb\u7684\uff0c\u4e0b\u9762\u662f\u5b8c\u6574\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define F(i,a,b) for (int i=a;i<=b;i++)\n#define Test ios::sync_with_stdio(false),cin.tie(nullptr),cout.tie(nullptr)\nusing namespace std;\nconst int N=1e7+10,NN=1e4+10;\nll n,m,k,x,y,u,v,w,cnt=0,ans=0,t=0,l,r,len,T;\nll mini=INT_MAX,maxi=0,Mod;\nstring s1,s2;\nll f[N];\nll find(ll x){//\u5e76\u67e5\u96c6 \n\tif(f[x]==x) return x;\n\treturn f[x]=find(f[x]);\n}\nstring check(ll x,ll y){//\u68c0\u67e5\u7b54\u6848 \n\tif(find(x)==find(y)) return \"DA\\n\"; \n\treturn \"NE\\n\";\n}\nint main(){\n\tTest;\n\tcin>>n>>m>>k;\n\tF(i,1,n) f[i]=i;//\u5e76\u67e5\u96c6\u9884\u5904\u7406 \n\tF(i,1,m) F(j,1,n) cin>>x,f[find(x)]=find(j);//\u5efa\u7acb\u5173\u7cfb \n\tF(i,1,k){\n\t\tcin>>x>>y;\n\t\tcout<<check(x,y);//\u5224\u65ad\u662f\u5426\u7b26\u5408\u7b54\u6848 \n\t} \n\treturn 0;\n}\n\n```\n",
        "postTime": 1673489554,
        "uid": 654958,
        "name": "Light_az",
        "ccfLevel": 0,
        "title": "P7965"
    },
    {
        "content": "#### \u524d\u8a00\n\n\u9898\u76ee[Link](https://www.luogu.com.cn/problem/P7965)\n\n\u9996\u5148\u5462\uff0c\u770b\u5230\u8fd9\u9053\u9898\u76ee\uff0c\u5148\u5ba1\u9898\uff0c\u8fd9\u9053\u9898\u76ee\u60f3\u8ba9\u6211\u4eec\u5e72\u7684\u4e8b\u60c5\u662f`\u5224\u65ad\u4e00\u4e2a\u6709\u5411\u56fe\u7684\u4e24\u70b9\u4e4b\u95f4\u662f\u5426\u5b58\u5728\u4e00\u6761\u8fb9`\uff0c\u8fd9\u9053\u9898\u6211\u4eec\u8003\u8651\u5148\u6784\u5efa\u56fe\uff0c\u4f7f\u7528**\u6700\u77ed\u8def**\u7b97\u6cd5\n\n#### \u89e3\u6cd5\n\n~~\u5982\u679cBFS\u80fd\u8fc7\u7684\u8bdd\uff0c\u90a3floyd\u5c31\u90fd\u80fd\u8fc7\u4e86\u5457\uff1f~~\n\n\u6211\u4eec\u6765\u8003\u8651\u4e00\u4e0b\u7528\u90a3\u79cd\u6700\u77ed\u8def\u7b97\u6cd5\uff08\u8fd9\u91cc\u91cd\u70b9\u662f`Floyd`\uff09\uff1a\n\n- `Dijkstra`\u7b97\u6cd5\uff1b\n\n\u4f46\u662f\u663e\u7136\uff0c\u8981\u7528\u7684\u8bdd\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u201c\u677e\u5f1b\u201d\u64cd\u4f5c\u4e2d\u7684\u6570\u7ec4\u8bbe\u5b9a\uff0c\u4e0d\u7136\u7684\u8bdd\uff0c\u4f1a\u76f4\u63a5\u7206\u6389\uff1b\n\n- `Floyd`\u7b97\u6cd5\uff1b\n\n~~\u663e\u7136\u6211\u4e0d\u4f1a\u8bf4\u53ea\u75283\u4e2a`for`\u5faa\u73af\u5c31\u80fd\u641e\u5b9a~~\n\n\u4f46\u5176\u5b9e\u771f\u662f\u90a3\u6837\u7684\uff0c`Floyd`\u6700\u5927\u7684\u6709\u70b9\u5c31\u662f\u4ee3\u7801\u5f88\u77ed\uff0c\u53ea\u7528\u4e09\u4e2a`for`\u5c31\u80fd\u641e\u5b9a\uff0c\u7136\u800c\u8fd9\u4e09\u5c42`for`\u672c\u6765\u957f\u8fd9\u4e2a\u6837\u5b50\uff1a\n```cpp\nfor (int k = 1; k <= n; k++) {\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tdis[i][j] = min(dis[i][k] + dis[k][j], dis[i][j]);\n\t\t}\n\t}\n}\n\n```\n\u4f46\u662f\u8fd9\u9053\u9898\u5e76\u6ca1\u6709\u8ba9\u6211\u4eec\u6765\u6c42\u6700\u77ed\u8def\uff0c\u4e8e\u662f\uff0c\u53ef\u4ee5\u9002\u5f53\u4fee\u6539\u4e00\u4e0b\uff0c\u4f46\u662f\u4ecd\u65e7\u662f\u8fd9\u4e2a\u601d\u8def\uff1a\n```cpp\nfor (int k = 1; k <= n; k++) {\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tif (dis[i][k] != 0 && dis[k][i] != 0) {\n\t\t\t\tdis[i][j] = 1;\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u5982\u679c\u5149\u8fd9\u6837\u5199\u662f\u80af\u5b9a\u8fc7\u4e0d\u53bb\u7684\uff0c\u4f1a\u76f4\u63a5\u88ab\u5361\u6389\uff1b\n\n\u4e8e\u662f\u6211\u4eec\u8003\u8651\u52a0\u8fdb\u53bb\u5feb\u8bfb\u7684\u677f\u5b50\u5438\u6c27\uff0c\u540c\u65f6\u5f00 o2\uff1a\n```cpp\nint init(){\n    char c = getchar();\n    int x = 0, f = 1;\n    for (; c < '0' || c > '9'; c = getchar())\n        if (c == '-') f = -1;\n    for (; c >= '0' && c <= '9'; c = getchar())\n        x = (x << 1) + (x << 3) + (c ^ 48);\n    return x * f;\n}\n```\n\u8fd9\u6837\u624d\u80fd\u901a\u8fc7\uff1b\n\n\u4e3b\u8981\u4f7f\u7528`Folyd`\u662f\u56e0\u4e3a3\u5c42\u5faa\u73af\u91cc\u9762\u7684\u6570\u8f83\u5c0f\uff0c\u4e0d\u7136\u7684\u8bdd\u65f6\u95f4\u590d\u6742\u5ea6 $O(N^3)$ \u662f\u4f1a\u88ab\u76f4\u63a5\u5361\u6389\u7684\uff1b\n\n- `SPFA`\u7b97\u6cd5\uff1b\n\n\u4f17\u6240\u5468\u77e5\uff0c\u5173\u4e8e`SPFA`\u4ed6\u6b7b\u4e86\uff1b\n\n\u5176\u5b9e\u8fd9\u9053\u9898\u91cc\u9762`SPFA`\u786e\u5b9e\u662f\u4f1a\u6b7b\u7684\uff1b\n\n\u7531\u4e8e\u67d0\u4e9b\u6570\u636e\u592a\u5927\u4e86\uff0c\u76f4\u63a5\u8ba9`SPFA`\u5f53\u573a\u6b7b\u4ea1\uff1b\n\n\u4f46\u662f\u8fd8\u662f\u53ef\u4ee5\u4f18\u5316\u7684\uff1b\uff08\u8fd9\u91cc\u6211\u5c31\u4e0d\u8be6\u7ec6\u8bb2\u4e86\uff0c\u56e0\u4e3a\u5176\u4ed6\u5927\u4f6c\u5df2\u7ecf\u90fd\u8bb2\u8fc7\u4e86\uff09\n\n\u8fd9\u9053\u9898\u76ee\u5c31\u5230\u4ecb\u91cc\uff0c\u518d\u89c1\u55bd\uff1b",
        "postTime": 1649943452,
        "uid": 358902,
        "name": "Syamoe",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7965 [COCI2021-2022#2] Kutije"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u539f\u9898\u4f20\u9001\u95e8\uff1a [Link](https://www.luogu.com.cn/problem/P7965) \u3002\n\n\u7ed9\u5b9a\u4e00\u5f20\u6709\u5411\u56fe\uff0c\u6bcf\u6b21\u8be2\u95ee\u56fe\u4e2d\u4e24\u70b9\u662f\u5426\u8fde\u901a\u3002\n\n## \u601d\u8def\n\n ~~BFS \u80fd\u8fc7 Floyd \u80af\u5b9a\u4e5f\u80fd\u8fc7\u554a\u3002~~\n\n Floyd - Warshall \u5168\u6e90\u6700\u77ed\u8def\u7b97\u6cd5\u60f3\u5fc5\u5404\u4f4d\u90fd\u4e0d\u964c\u751f\uff0c\u5728\u8fd9\u91cc\u63d0\u4e00\u4e0b\u5982\u4f55\u7528 Floyd \u5224\u65ad\u4e24\u70b9\u4e4b\u95f4\u662f\u5426\u8fde\u901a\uff08\u5df2\u7ecf\u4e86\u89e3\u7684\u5de8\u4f6c\u4eec\u53ef\u8df3\u8fc7\u8fd9\u90e8\u5206\uff09\u3002\n \n\u4f9d\u65e7\u662f\u7528\u90bb\u63a5\u77e9\u9635\uff0c\u4f46\u662f\u4fdd\u5b58\u7684\u4e0d\u518d\u662f\u8fb9\u6743\uff0c\u800c\u662f\u8fd9\u4e24\u70b9\u662f\u5426\u8fde\u901a\u3002\n\n\u5728\u4e4b\u540e\u7684\u4e09\u91cd\u5faa\u73af\u4e2d\uff0c\u5982\u679c\u8d77\u70b9\u5230\u4e2d\u95f4\u70b9\uff0c\u4e2d\u95f4\u70b9\u5230\u7ec8\u70b9\u90fd\u8fde\u901a\uff0c\u5219\u8d77\u70b9\u4e0e\u7ec8\u70b9\u4e4b\u95f4\u662f\u8fde\u901a\u7684\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n\n```cpp\nfor(int k=1;k<=n;k++)\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tfor(int j=1;j<=n;j++) if(a[i][k] && a[k][j]) a[i][j]=true;\n```\n\n\u4e4b\u540e\u7684\u8be2\u95ee\u5c31\u597d\u89e3\u51b3\u4e86\uff0c\u5982\u679c\u8fde\u901a\uff0c\u5219\u8f93\u51fa DA \uff0c\u5426\u5219\u8f93\u51fa NE \u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^3)$ \u3002\n\n**\u4f46\u662f\uff01\u6700\u91cd\u8981\u7684\u662f\uff01 \u5f00 O2 \uff01** \uff08\u5982\u679c\u6ca1\u5f00\u5bfc\u81f4\u4ee3\u7801\u6302\u4e86\uff0c\u8bf7\u4e0d\u8981\u6765\u627e\u6211\u7684\u9505\u3002\u4f46\u5982\u679c\u6570\u636e\u52a0\u5f3a\u4e86\uff0c\u53ef\u4ee5\u64a4\u4e0b\u6211\u7684\u9898\u89e3\uff09\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint m,n,q,from,to,pi;\nbool a[1005][1005];//\u90bb\u63a5\u77e9\u9635\u5b58\u50a8\u4e24\u4e2a\u70b9\u4e4b\u95f4\u662f\u5426\u8fde\u901a \ninline int read()//\u5feb\u8bfb \n{\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0' || ch>'9')\n\t{\n\t\tif(ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile('0'<=ch && ch<='9')\n\t{\n\t\tx=(x<<3)+(x<<1)+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\nint main()\n{\n\tn=read();\n\tm=read();\n\tq=read();\n\tfor(int i=1;i<=n;i++) a[i][i]=true;\n\tfor(int i=1;i<=m;i++)\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tpi=read();\n\t\t\ta[i][pi]=true;//i \u5230 pi \u4e4b\u95f4\u6709\u4e00\u6761\u8fb9 \n\t\t}\n\tfor(int k=1;k<=n;k++)\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tfor(int j=1;j<=n;j++) if(a[i][k] && a[k][j]) a[i][j]=true;\n\t//Floyd \u6838\u5fc3\u4ee3\u7801 \n\tfor(int i=1;i<=q;i++)//\u67e5\u8be2 \n\t{\n\t\tfrom=read();\n\t\tto=read();\n\t\tif(a[from][to]) printf(\"DA\\n\");\n\t\telse printf(\"NE\\n\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1640004821,
        "uid": 373705,
        "name": "\u58a8\u5fe7",
        "ccfLevel": 4,
        "title": "P7965 [COCI2021-2022#2] Kutije \u9898\u89e3"
    },
    {
        "content": "~~\u5173\u4e8e\u6211 BFS \u5199\u9519\u7136\u540e\u88ab\u5154\u4e00\u773c\u770b\u51fa\u6765\u8fd9\u4ef6\u4e8b~~\n\n\u5728\u8fd9\u91cc\u63d0\u4f9b\u4e00\u4e2a $O(N^3)$ \u7684 BFS \u505a\u6cd5\u3002 \uff08$M=N^2$ BFS \u7684\u590d\u6742\u5ea6\u4e3a $O(N+M)$\uff0c\u6211\u7684\u505a\u6cd5\u8981 BFS $N$ \u6b21\uff0c\u6240\u4ee5\u662f $O(N^3)$\uff09\n\n$i$ \u7bb1\u5b50\u7684\u73a9\u5177\u80fd\u591f\u88ab\u653e\u5230 $p_i$ \u7bb1\u5b50\uff0c\u5176\u5b9e\u5c31\u662f\u7bb1\u5b50 $i$ \u548c\u7bb1\u5b50 $p_i$ \u95f4\u6709\u4e00\u6761\u6709\u5411\u8fb9\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7 $N$ \u6b21 BFS \u6c42\u51fa\u6bcf\u4e00\u4e2a\u7bb1\u5b50\u53ef\u4ee5\u5230\u8fbe\u7684\u6240\u6709\u7bb1\u5b50\uff0c\u7136\u540e\u8fd9\u9898\u6211\u4eec\u5c31\u7b97\u505a\u5b8c\u4e86\n\n\uff08\u7406\u8bba\u4e0a\u6765\u8bf4 $10^9$ \u662f\u8fc7\u4e0d\u4e86\u7684\uff0c\u4f46\u662f\u56e0\u4e3a\u539f\u56e0\uff0c\u672c\u505a\u6cd5\u53ef\u4ee5\u901a\u8fc7\u5feb\u8bfb\u5feb\u51fa\u901a\u8fc7\uff0c\u5982\u679c\u6309\u7167 CCF \u6807\u51c6\u52a0\u4e0a O2 \u4f18\u5316\uff0c\u5c31\u53ef\u4ee5\u8dd1\u5f97\u66f4\u5feb\uff09\n\n\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0cBFS \u4e2d vis \u6570\u7ec4\u4e00\u5b9a\u8981\u5728\u201c\u677e\u5f1b\u201d\u4e2d\u5c31\u8bbe\u5b9a\u4e3a\u7ecf\u8fc7\uff0c\u4e0d\u7136\u4f60\u5c31\u4f1a\u50cf\u6211\u4e00\u6837\u83b7\u5f97 15 \u5206\u7684\u597d\u6210\u7ee9\n\n\u4e0d\u5f97\u4e0d\u8bf4\uff0c\u505a\u5b8c\u8fd9\u9053\u9898\uff0c\u5bf9 BFS \u7684\u7406\u89e3\u66f4\u52a0\u6df1\u5165\u4e86\u4e00\u4e9b\n\nAC Code:\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nvector <int> edge[1005];\nqueue <int> q;\nint n,m,ask;\nbool vis[1005],can[1005][1005];\nint read(){\n\tint x=0,z=1;\n\tchar c=getchar();\n\twhile(!isdigit(c)){\n\t\tif(c=='-')\n\t\t\tz=-1;\n\t\tc=getchar();\n\t}\n\twhile(isdigit(c)){\n\t\tx=(x<<1)+(x<<3)+(c^48);\n\t\tc=getchar();\n\t}\n\treturn z*x;\n}\nint main(){\n\tn=read(),m=read(),ask=read();\n\tfor(int i=1;i<=m;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tint x;\n\t\t\tx=read();\n\t\t\tedge[j].push_back(x);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tmemset(vis,false,sizeof(vis));\n\t\tq.push(i);\n\t\tcan[i][i]=true;\n\t\twhile(!q.empty()){\n\t\t\tint x=q.front();\n\t\t\tq.pop();\n\t\t\tfor(auto k:edge[x]){\n\t\t\t\tif(vis[k]==false){\n\t\t\t\t\tcan[i][k]=true;\n\t\t\t\t\tq.push(k);\n\t\t\t\t\tvis[k]=true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\twhile(ask--){\n\t\tint a,b;\n\t\ta=read(),b=read();\n\t\tif(can[a][b])\n\t\t\tputs(\"DA\");\n\t\telse\n\t\t\tputs(\"NE\");\n\t}\n\treturn 0;\n} \n```\n",
        "postTime": 1638078389,
        "uid": 261262,
        "name": "WaltVBAlston",
        "ccfLevel": 5,
        "title": "[\u9898\u89e3]P7965 [COCI2021-2022#2] Kutije"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5c31\u662f\u5df2\u77e5\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u95ee\u80fd\u5426\u4ece A \u70b9\u5230 B \u70b9\u3002\n\n\u770b\u89c1\u6709\u5411\u56fe\u7684\u8fde\u901a\u6027\u5565\u7684\uff0c\u7b2c\u4e00\u53cd\u5e94\u5c31\u662f\u7f29\u70b9\u3002\u9996\u5148\u53ef\u4ee5\u786e\u5b9a\u7684\u662f\uff0c\u7531\u4e8e $q$ \u7684\u5e9e\u5927\uff0c\u9884\u5904\u7406\u662f\u5fc5\u9700\u7684\u3002\u601d\u8def\u5f88\u7b80\u5355\uff0c\u6574\u5f20\u56fe\u7f29\u70b9\uff0c\u7136\u540e\u4f9d\u7167\u539f\u56fe\u7684\u8fb9\u7ed9\u5f3a\u8054\u901a\u5206\u91cf\u8fde\u8fb9\u3002\u6bcf\u6b21\u67e5\u8be2\u7684\u65f6\u5019\u53ea\u8981 A \u70b9\u6240\u5728\u7684\u5f3a\u8054\u901a\u5206\u91cf\u662f\u5426\u80fd\u591f\u5230\u8fbe B \u70b9\u6240\u5728\u7684\u5f3a\u8054\u901a\u5206\u91cf\uff0cA \u70b9\u5c31\u53ef\u4ee5\u5230\u8fbe B \u70b9\u3002\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tint s=0;char ch=getchar(),last=0;\n\twhile(ch<'0'||ch>'9') last=ch,ch=getchar();\n\twhile(ch>='0'&&ch<='9') s=(s<<1)+(s<<3)+(ch^48),ch=getchar();\n\treturn last=='-'?-s:s;\n}\nint dfn[1005],low[1005],dfncnt,s[1005],tp,scc[1005],sc,sz[1005];\nvector<int> g[1005];\nbool pd[1005][1005],in_stack[1005];\nvoid tarjan(int u){//\u7f29\u70b9\n\tlow[u]=dfn[u]=++dfncnt;\n\ts[++tp]=u;\n\tin_stack[u]=1;\n\tfor(int i=0;i<g[u].size();i++){\n\t\tconst int &v=g[u][i];\n\t\tif(!dfn[v]){\n\t\t\ttarjan(v);\n\t\t\tlow[u]=min(low[u],low[v]);\n\t\t}\n\t\telse if(in_stack[v]) low[u]=min(low[u],dfn[v]);\n\t}\n\tif(dfn[u]==low[u]){\n\t\tsc++;\n\t\twhile(s[tp]!=u){\n\t\t\tscc[s[tp]]=sc;\n\t\t\tsz[sc]++;\n\t\t\tin_stack[s[tp]]=0;\n\t\t\ttp--;\n\t\t}\n\t\tscc[s[tp]]=sc;\n\t\tsz[sc]++;\n\t\tin_stack[s[tp--]]=0;\n\t}\n}\nint main(){\n\tint n=read(),m=read(),q=read();\n\twhile(m--)\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tg[i].emplace_back(read());\n\tfor(int i=1;i<=n;i++)//tarjan\u4e3b\u8fc7\u7a0b \n\t\tif(!dfn[i])\n\t\t\ttarjan(i);\n\tfor(int i=1;i<=sc;i++) pd[i][i]=1;\n\tfor(int i=1;i<=n;i++)//\u7ed9SCC\u8fde\u8fb9\n\t\tfor(int j=0;j<g[i].size();j++)\n\t\t\tpd[scc[i]][scc[g[i][j]]]=1;\n\twhile(q--){\n\t\tint a=read(),b=read();\n\t\tputs(pd[scc[a]][scc[b]]?\"DA\":\"NE\");\n\t}\n\treturn 0;\n}\n```\n\n~~\u5438\u4e86\u6c27\u4e4b\u540e\u76f4\u63a5\u8dd1\u5230\u4e86\u6700\u4f18\u89e3\u3002~~\n\n\u5e94\u8be5\u6ca1\u6709\u4eba\u50cf\u6211\u8fd9\u4e48\u75af\u72c2\u4e86\u5427\u3002",
        "postTime": 1637929766,
        "uid": 182234,
        "name": "ryanright",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P7965 [COCI2021-2022#2] Kutije"
    },
    {
        "content": "## \u601d\u8def\n~~\u8fd9\u9053\u9898\u4e0d\u662f\u6709\u5411\u56fe\u554a\u3002\u3002~~ \u663e\u7136\uff0c\u56e0\u4e3a ${p}$ \u662f $1 \u223cn$ \u7684\u4e00\u4e2a\u6392\u5217\uff0c\u5982\u679c\u4e00\u4e2a\u670b\u53cb\u5c06\u4f4d\u4e8e $x$ \u7684\u5c0f\u7403\u79fb\u52a8\u5230 $y$ \uff0c\u90a3\u4e48\u4e00\u5b9a\u53ef\u4ee5\u4ece $y$ \u79fb\u5230 $x$\uff0c\u65e0\u975e\u662f\u518d\u9080\u8bf7\u51e0\u6b21\u7f62\u4e86\uff0c\u4e5f\u5c31\u662f\u8bf4\u5bf9\u4e8e\u6bcf\u4e2a\u8f93\u5165 $x_i=y$ \uff0c\u8fde\u4e00\u6761\u65e0\u5411\u8fb9 $(i,y)$\u3002\n\n\u90a3\u8fd9\u9053\u9898\u5c31\u8f6c\u5316\u6210\u4e86\u8fde\u901a\u6027\u95ee\u9898\uff0c\u5957\u4e2a\u5e76\u67e5\u96c6\u677f\u5b50\u7ef4\u62a4\u8fde\u901a\u6027\u5c31\u53ef\u4ee5\u4e86\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,q,f[100005];\nint find(int x){\n\tif(f[x]==x)return x;\n\telse return f[x]=find(f[x]);\t\n}\nvoid uni(int u,int v){\n\tf[find(u)]=find(v);\n}\nint main(){\n\tcin>>n>>m>>q;\n\tfor(int i=1;i<=n;i++)f[i]=i;\n\tfor(int i=1;i<=m;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tint p;\n\t\t\tcin>>p;\n\t\t\tuni(j,p);\n\t\t}\n\t}\n\tfor(int i=1;i<=q;i++){\n\t\tint a,b;\n\t\tcin>>a>>b;\n\t\tif(find(a)!=find(b))cout<<\"NE\\n\";\n\t\telse cout<<\"DA\\n\";\n\t}\n}\n```",
        "postTime": 1650001144,
        "uid": 477757,
        "name": "dennshokouni",
        "ccfLevel": 0,
        "title": "P7965 [COCI2021-2022#2] Kutije \u9898\u89e3"
    },
    {
        "content": "\u6211\u4eec\u628a\u7f6e\u6362 $p$ \u770b\u4f5c $n$ \u6761\u8fb9 $i\\to p_i$\uff0c\u90a3\u4e48\u63d0\u8bae\u5c31\u53d8\u4e3a\uff1a\n\n\u7ed9\u5b9a\u4e00\u5f20 $n$ \u70b9 $n\\times m$ \u6761\u8fb9\u7684\u6709\u5411\u56fe\uff0c\u6bcf\u6b21\u5224\u65ad $a$ \u662f\u5426\u80fd\u8d70\u5230 $b$\n\n\u8fd9\u5c31\u662f\u4e00\u4e2a\u4f20\u9012\u95ed\u5305\u3002\u4ec0\u4e48\u662f\u4f20\u9012\u95ed\u5305\u5462\uff1f\n\n\u4f20\u9012\u95ed\u5305\u5c31\u662f\u4e00\u4e2a\u5bf9 $\\text{floyd}$ \u5224\u65ad\u8fde\u901a\u6027\u7684\u4f18\u5316\u3002\n\n\u8fd0\u7528\u6b63\u5e38\u7684 $\\text{floyd}$\uff0c\u6211\u4eec\u6709\u4e00\u4e2a $O(n^3)$ \u7684\u505a\u6cd5\uff1a\n\n```\nfor(int k=1;k<=n;k++)\n\tfor(int i=1;i<=n;i++)\n    \tfor(int j=1;j<=n;j++)\n        \tG[i][j]|=(G[i][k]&G[k][j]);\n```\n\n\u6211\u4eec\u53d1\u73b0\u5176\u4e2d\u6709\u5927\u91cf\u7684\u4f4d\u8fd0\u7b97\uff0c\u4e8e\u662f\u60f3\u5230\u4f7f\u7528 $\\text{bitset}$\n\n\u679a\u4e3e $k,i$\uff0c\u5f53 $G_{i,k}=1$ \u65f6\uff0c\u64cd\u4f5c\u7b49\u4ef7\u4e8e $G[i]|=G[k]$\uff0c\u5426\u5219\u64cd\u4f5c\u65e0\u6548\u3002\n\n\u8fd9\u6837\u6211\u4eec\u7684\u590d\u6742\u5ea6\u5c31\u964d\u4e3a\u4e86 $O(\\frac {n^3}{\\omega})$\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define inf 1e9\nconst int maxn=2e5+10;\nconst int mod=1e9+7;\ninline int read(){\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n\twhile(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+c-'0';c=getchar();}\n\treturn x*f;\n}\nconst int N=1e3+5;\nbitset<N>G[N];\nint n,m,q;\nint main(){\n\tn=read(),m=read(),q=read();\n\tfor(int i=1;i<=m;i++)\n\t    for(int j=1,x;j<=n;j++)x=read(),G[j][x]=1;\n\tfor(int k=1;k<=n;k++)\n\t    for(int i=1;i<=n;i++)if(G[i][k])G[i]|=G[k];\n\twhile(q--){\n\t    int a=read(),b=read();\n\t    puts(G[a][b]?\"DA\":\"NE\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1649589808,
        "uid": 152234,
        "name": "hrgd",
        "ccfLevel": 0,
        "title": "P7965"
    },
    {
        "content": "\u4f17\u6240\u5468\u77e5\uff0c`SPFA` \u4ed6\u6b7b\u4e86\u3002\n\n\u4f46\u662f\u8fd9\u9053\u9898\u76ee\u771f\u7684\u4e0d\u80fd\u7528 `SPFA` \u5417\uff1f\n\n\u786e\u5b9e\uff01\n\n\u9996\u5148\u6211\u4eec\u6765\u8bf4\u4e00\u4e0b `SPFA`\uff0c\u6b63\u5e38\u6211\u4eec\u7528 `queue` \u8fdb\u884c `SPFA`\uff0c\u8fd9\u662f\u6211\u4eec\u7167\u5e38\u7684\u4e60\u60ef\u3002\u4f46\u662f\u5176\u5b9e\u4e0d\u5149\u5149\u7528 `queue` \u53ef\u4ee5\u5b9e\u73b0\uff0c\u7528\u5176\u4ed6 `STL` \u5bb9\u5668\u4e5f\u53ef\u4ee5\u3002\u8bd5\u8fc7 `vector`\uff0c\u6bd4 `queue` \u597d\uff0c\u4f46\u662f\u8fd8\u662f `T` \u4e86\u4e0d\u5c11\u3002\u4f46\u662f\u5176\u5b9e `priority_queue` \u4f1a\u5f3a\u5f88\u591a\uff0c\u81f3\u4e8e\u662f\u6309\u4ec0\u4e48\u6392\u5e8f\u5176\u5b9e\u90fd\u53ef\u4ee5\uff0c\u6211\u662f\u7528 `less<int>` \u7684\u3002\n\n[SPFA\uff08priority_queue) \u6d4b\u8bd5](https://www.luogu.com.cn/record/65330786)\n\n`SPFA` \u5f00\u4e86 `priority_queue` \u4f18\u5316\u4ecd\u7136\u4f1a `T` \u4e00\u4e2a\u70b9\uff0c\u5927\u6982\u7387\u662f\u5927\u6570\u636e\u5361\u6389\u4e86 `SPFA`\u3002\n\n\u90a3\u600e\u4e48\u529e\u5462\uff1f\u5f88\u7b80\u5355\u3002\u8fd9\u9898\u672c\u8d28\u8003\u7684\u662f `BFS`\uff0c\u90a3\u4e48\u6309\u6570\u636e\u5206\u6790\uff0c$n \\ge 900$ \u7528 `BFS` ~~\uff08\u5176\u5b9e Subtask 1 \u548c Subtask 4 \u4e2d n \u90fd\u662f 1000\uff09~~\u3002\u4e0d\u7136\u5c31\u7528 `SPFA`\u3002\n\n\u53e6\u5916\uff0c\u5bf9\u4e8e\u8fd9\u9053\u9898\u4f18\u5148\u961f\u5217\u4f18\u5316 `BFS` \u4e5f\u9002\u7528\u3002\n\n\u4ee3\u7801\uff08\u5f00 `O2` \u540e `AC`\uff09\uff1a\n\n```cpp\n#include <iostream>\n#include <vector>\n#include <queue>\n#include <cstring>\n#include <cstdio>\nusing namespace std;\n\nint n, m, q;\nconst int N = 1e3 + 5;\nint dis[N];\nint vec[N][N];\nint ans[N][N];\nbool vis[N], f[N], ansx[N][N];\n\nstruct ios_in // \u5feb\u8bfb\n{\n\tinline char gc()\n\t{\n\t\tstatic char buf[N], * l, * r;\n\t\treturn (l == r) && (r = (l = buf) + fread(buf, 1, N, stdin), l == r) ? EOF : *l++;\n\t}\n\ttemplate <typename _Tp>\n\tinline ios_in& operator >> (_Tp& x) {\n\t\tstatic char ch, sgn;\n\t\tfor (sgn = 0, ch = gc(); !isdigit(ch); ch = gc()) {\n\t\t\tif (!~ch) return *this;\n\t\t\tsgn |= ch == '-';\n\t\t}\n\t\tfor (x = 0; isdigit(ch); ch = gc())\n\t\t\tx = (x << 1) + (x << 3) + (ch ^ '0');\n\t\tsgn && (x = -x);\n\t\treturn *this;\n\t}\n}Cin;\n\ninline void spfa(int x) // spfa \u6a21\u677f\n{\n\tpriority_queue<int, vector<int>, less<int> > q; // \u4f18\u5148\u961f\u5217\u4f18\u5316\n\tq.push(x);\n\tdis[x] = -1e7;\n\twhile (q.size())\n\t{\n\t\tint l = q.top();\n\t\tq.pop();\n\t\tfor (register int i = 1; i <= m; ++i)\n\t\t{\n\t\t\tint to = vec[i][l];\n\t\t\tif (dis[to] > dis[l] + 1)\n\t\t\t{\n\t\t\t\tdis[to] = dis[l] + 1;\n\t\t\t\tq.push(to);\n\t\t\t}\n\t\t}\n\t}\n}\n\ninline void bfs(int x) // bfs \u6a21\u677f\n{\n\tpriority_queue<int, vector<int>, less<int> > q;\n\tq.push(x);\n\tf[x] = true;\n\tvis[x] = true;\n\twhile (q.size())\n\t{\n\t\tint l = q.top();\n\t\tq.pop();\n\t\tf[l] = true;\n\t\tfor (register int i = 1; i <= m; ++i)\n\t\t{\n\t\t\tint to = vec[i][l];\n\t\t\tif (vis[to]) continue;\n\t\t\tq.push(to);\n\t\t\tvis[to] = true;\n\t\t}\n\t}\n}\n\nint main()\n{\n\tCin >> n;\n\tCin >> m;\n\tCin >> q;\n\tfor (register int i = 1; i <= m; ++i)\n\t{\n\t\tfor (register int j = 1; j <= n; ++j)\n\t\t{\n\t\t\tint x;\n\t\t\tCin >> x;\n\t\t\tvec[i][j] = x; // \u5b58\u50a8\u56fe\n\t\t}\n\t}\n\tif (n >= 900)\n\t{\n\t\tfor (register int i = 1; i <= n; ++i)\n\t\t{\n\t\t\tmemset(f, false, sizeof(f));\n\t\t\tmemset(vis, false, sizeof(vis));\n\t\t\tbfs(i);\n\t\t\tfor (register int j = 1; j <= n; ++j)\n\t\t\t{\n\t\t\t\tansx[i][j] = f[j];\n\t\t\t}\n\t\t}\n\t\twhile (q--)\n\t\t{\n\t\t\tint a, b;\n\t\t\tCin >> a >> b;\n\t\t\tputs((!ansx[a][b] ? \"NE\" : \"DA\"));\n\t\t}\n\t\treturn 0;\n\t}\n\tfor (register int i = 1; i <= n; ++i)\n\t{\n\t\tmemset(dis, 0, sizeof(dis));\n\t\tspfa(i);\n\t\tfor (register int j = 1; j <= n; ++j)\n\t\t{\n\t\t\tans[i][j] = dis[j];\n\t\t}\n\t}\n\tint a, b;\n\twhile (q--)\n\t{\n\t\tCin >> a;\n\t\tCin >> b;\n\t\tputs((ans[a][b] == 0 ? \"NE\" : \"DA\"));\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1639904587,
        "uid": 332914,
        "name": "happybob",
        "ccfLevel": 6,
        "title": "SPFA+BFS \u9898\u89e3"
    },
    {
        "content": "\u6709\u5411\u56fe\u7684\u4f20\u9012\u95ed\u5305\u3002\uff08~~\u867d\u7136\u4e0d\u662f\u6b63\u89e3~~\uff09\n\n\u590d\u6742\u5ea6\uff1a$O(\\dfrac{n^3}w)$\n# \u9898\u610f\n\u7ed9\u5b9a\u4e00\u5f20\u6709\u5411\u56fe\uff0c$q$ \u6b21\u8be2\u95ee\u3002\n\n\u6bcf\u6b21\u8be2\u95ee\u4e24\u4e2a\u70b9 $u,v$\uff0c\u95ee\u5b58\u4e0d\u5b58\u5728 $u\\rightarrow v$ \u7684\u8def\u5f84\u3002\n# \u601d\u8def\n\u5f88\u660e\u663e\u7684\u4f20\u9012\u95ed\u5305\uff0c\u8f6c\u6362\u6210\u8fb9\u6743 $1/0$ \u7684\u5b8c\u5168\u56fe\u3002\n\n\u7136\u540e\u628a Floyd \u7684\u53d6 $\\min$ \u8f6c\u6210\u6216\u8fd0\u7b97\u5373\u53ef\u3002\n\n\u4ee3\u7801 1\uff1a\n```cpp\n#include <iostream>\nusing namespace std;\nint n, m, q;bool f[1050][1050];\nint main()\n{\n    cin >> n >> m >> q;\n    while(m--)\n        for(int i = 1, t;i <= n;++i)\n            cin >> t, f[i][t] = 1;\n    for(int k = 1;k <= n;++k)\n        for(int i = 1;i <= n;++i)\n            for(int j = 1;j <= n;++j)\n                f[i][j] |= f[i][k] && f[k][j];\n    for(int i = 0, u, v;i < q;++i)\n    {\n        cin >> u >> v;\n        cout << (f[u][v] ? \"DA\" : \"NE\") << endl;\n    }\n    return 0;\n}\n```\n[\u4f60\u4ee5\u4e3a\u8fd9\u5c31\u80fd\u8fc7\u4e86\uff1f](https://www.luogu.com.cn/record/65095818)\n\n$O(n^3)$ \u8fc7 $10^9$\uff0c\u663e\u7136\u8981\u4f18\u5316\u3002\n\n\u6709\u4e2a C++ \u6807\u51c6\u5e93\u8bbe\u65bd\u53eb `bitset`\uff0c\u7528\u6cd5\u548c `bool` \u6570\u7ec4\u5dee\u4e0d\u591a\u3002\n\n\u5b9a\u4e49\u4e00\u4e2a `bitset` : `bitset<SIZE> b`\uff0c`b` \u7684\u5927\u5c0f\u4e3a `SIZE`\u3002\n\n\u7136\u800c\uff0c\u8fd9\u4e2a\u4e1c\u897f\u652f\u6301\u4e24\u4e2a `bitset` **\u6574\u4f53\u4f4d\u8fd0\u7b97**\uff0c\u590d\u6742\u5ea6 $O(\\dfrac nw)$\uff08$w$ \u662f\u8ba1\u7b97\u673a\u4f4d\u6570\uff09\u3002\n\n\u7528 `bitset` \u91cd\u5199\u4e00\u904d\uff1a\n```cpp\n#include <iostream>\n#include <bitset>\nusing namespace std;\nint n, m, q;bitset<1050> f[1050];\nint main()\n{\n    cin >> n >> m >> q;\n    while(m--)\n        for(int i = 1, t;i <= n;++i)\n            cin >> t, f[i][t] = 1;\n    for(int k = 1;k <= n;++k)\n        for(int i = 1;i <= n;++i)\n            if(f[i][k]) f[i] = f[i] | f[k];\n    for(int i = 0, u, v;i < q;++i)\n    {\n        cin >> u >> v;\n        cout << (f[u][v] ? \"DA\" : \"NE\") << endl;\n    }\n    return 0;\n}\n```\n[\u4f60\u4ee5\u4e3a\u6539\u6210\u8fd9\u6837\u5c31\u80fd\u8fc7\u4e86\uff1f](https://www.luogu.com.cn/record/65097092)\n\n\u663e\u7136\u5361\u5361\u5e38\u5c31\u8fc7\u4e86\u3002\n```cpp\n#include <iostream>\n#include <bitset>\nusing namespace std;\nint n, m, q;bitset<1050> f[1050];\nint main()\n{\n    ios::sync_with_stdio(0);\n    cin >> n >> m >> q;\n    while(m--)\n        for(int i = 1, t;i <= n;++i)\n            cin >> t, f[i][t] = 1;\n    for(int k = 1;k <= n;++k)\n        for(int i = 1;i <= n;++i)\n            if(f[i][k]) f[i] = f[i] | f[k];\n    for(int i = 0, u, v;i < q;++i)\n    {\n        cin >> u >> v;\n        cout << (f[u][v] ? \"DA\" : \"NE\") << endl;\n    }\n    return 0;\n}\n```\n[\u8fd9\u4e0d\u5c31\u8fc7\u4e86\u5417](https://www.luogu.com.cn/record/65097105)",
        "postTime": 1639625186,
        "uid": 388651,
        "name": "5k_sync_closer",
        "ccfLevel": 7,
        "title": "P7965 [COCI2021-2022#2] Kutije \u9898\u89e3"
    }
]
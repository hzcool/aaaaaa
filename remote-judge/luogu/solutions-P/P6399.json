[
    {
        "content": "### **\u6700\u77ed\u8def\u9898\u76ee**\n\n**\u5206\u4e24\u4e2a\u6b65\u9aa4**\n\n### **1.\u63a8\u5bfc\u4e24\u4fa7\u7684\u5899\u7684\u6807\u53f7\u3002**\n\n### **2.\u8f6c\u5316\u6210\u6700\u77ed\u8def**\n\n\n---\n**\u5148\u770b\u7b2c\u4e00\u6b65**\n\n![\u9898\u4e2d\u56fe\u7247\u5708\u753b](https://cdn.luogu.com.cn/upload/image_hosting/d4t81ehk.png)\n\n\n\u663e\u7136\u6709\u89c4\u5f8b\uff0c\u5373**\u6bcf\u4e00\u5708\u5bf9\u5e94\u4e00\u4e2a\u5b8c\u5168\u5e73\u65b9\u6570**\u3002\n\n\u63a5\u4e0b\u6765\u5904\u7406\u65b9\u6cd5**\u4e0d\u552f\u4e00**\uff0c\u4ee5\u6211\u7684\u4e3a\u4f8b\uff1a\n\n\u82e5\u4ee5\u5076\u6570\u7684\u5e73\u65b9\u4e3a\u4e00\u5708\uff0c\u4ee4\u8be5\u5076\u6570\u4e3a$k$\uff0c\u5899\u5bf9\u9762\u6570\u5b57\u4e3a$j$ .\n\n\u5f53$k=4$\u65f6\u53ef\u5212\u5206\uff1a\n\n![\u5212\u52062](https://cdn.luogu.com.cn/upload/image_hosting/anir1orx.png)\n\n\u663e\u7136\u53ef\u4ee5\u5f97\u77e5\u5f53\u524d\u6570\u5b57$n\\neq 4$\u4e14$n\\ne k*k$\u65f6\u90fd\u6709\uff1a\n\n$j=(k-2)^2+(n-k^2-1) - 2* \\lfloor \\frac{n-k^2}{k+1}  \\rfloor $ .\n\n\u8be5\u90e8\u5206\uff1a\n\n```cpp\nlong long finda(long long g)\n{\n\tk=sqrt(g);\n\tif(k%2==1) k--;\n\tif(g==4) return 1;\n\tif(g==k*k) return (k-2)*(k-2)+1;\n\th=(g-k*k)/(k+1);\n\th*=2;\n\tj=(k-2)*(k-2)+(g-k*k-1)-h;\n\treturn j;\n}\n\n```\n---\n\n\u7b2c\u4e8c\u6b65\uff1a\n\n\u5bf9\u4e8e\u6253\u6d1e\u7684\u90e8\u5206\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e24\u70b9\u95f4\u6709\u4e00\u6761\u4e3a1\u7684\u8fb9\u3002\n\n\u56e0\u4e3a\u6240\u6709\u76f8\u90bb\u70b9\u4e4b\u95f4\u8ddd\u79bb\u90fd\u4e3a1\uff0c\n\n![\u8349\u56fe](https://cdn.luogu.com.cn/upload/image_hosting/dwxn9n1j.png)\n\n\n\u90a3\u4e48\u8d70\u6d1e\u65c1\u7684\u70b9\uff08\u53ca\u7ec8\u70b9\uff09\u4e00\u5b9a\u6700\u4f18\u3002\n\n\u56e0\u4e3a$n$\u5f88\u5927\uff0c\u6240\u4ee5\u7528$map$ \u79bb\u6563\u6765\u5b58\u3002\n\n---\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define For(i,a,b) for(register int i=a;i<=b;i++)\n#define Rep(i,a,b) for(register int i=a;i>=b;i--)\nusing namespace std;\ninline long long read()\n{\n\tchar c=getchar();long long x=0;bool f=0;\n\twhile(!isdigit(c))f^=!(c^45),c=getchar();\n\twhile(isdigit(c))x=(x<<1)+(x<<3)+(c^48),c=getchar();\n\tif(f)x=-x;return x;\n}\nconst int maxn=100010;\nconst int maxm=200010;\nstruct edge{int next,v;long long w;}e[3*maxm];\nmap<long long,int>MP;\nint head[maxm],cnt;\nlong long n,dis[maxm],d,w;\nint m,u,v,s,pos;\nlong long a[maxn],b[maxn];\nlong long p[maxm];\nstruct node\n{\n\tint u;\n\tlong long d;\n\tbool operator <(const node& r) const{return d>r.d;}\n};\nnode Q;\nvoid add(int u,int v,long long w)\n{\n\te[++cnt].v=v;\n\te[cnt].w=w;\n\te[cnt].next=head[u];\n\thead[u]=cnt;\n}\npriority_queue<node>q;\nlong long g,h,j,k;\nlong long finda(long long g)\n{\n\tk=sqrt(g);\n\tif(k%2==1) k--;\n\tif(g==4) return 1;\n\tif(g==k*k) return (k-2)*(k-2)+1;\n\th=(g-k*k)/(k+1);\n\th*=2;\n\tj=(k-2)*(k-2)+(g-k*k-1)-h;\n\treturn j;\n}\nint main()\n{\n\tmemset(dis,0x3f,sizeof dis);\n\tn=read();scanf(\"%d\",&m);//m=read();\n\tMP[1]=1;p[++pos]=1;\n\tMP[n]=1;p[++pos]=n;\n\tFor(i,1,m)\n\t{\n\t\ta[i]=read();b[i]=finda(a[i]);\n\t\tif(!MP[a[i]])\n\t\t{\n\t\t\tMP[a[i]]=1;\n\t\t\tp[++pos]=a[i];\n\t\t}\n\t\tif(!MP[b[i]])\n\t\t{\n\t\t\tMP[b[i]]=1;\n\t\t\tp[++pos]=b[i];\n\t\t}\n\t}\n\tsort(p+1,p+pos+1);\n\tFor(i,1,pos)\n\t{\n\t\tMP[p[i]]=i;\n\t}\n\tFor(i,1,pos-1)\n\t{\n\t\tadd(i,i+1,p[i+1]-p[i]);\n\t\tadd(i+1,i,p[i+1]-p[i]);\n\t}\n\tFor(i,1,m)\n\t{\n\t\tadd(MP[a[i]],MP[b[i]],1ll);\n\t\tadd(MP[b[i]],MP[a[i]],1ll);\n\t}\n\tdis[1]=0;\n\tq.push((node){1,0});\n\twhile(!q.empty())\n\t{\n\t\tQ=q.top();\n\t\tq.pop();\n\t\tu=Q.u;d=Q.d;\n\t\tif(d!=dis[u])\n\t\t\tcontinue;\n\t\tfor(int i=head[u];i;i=e[i].next)\n\t\t{\n\t\t\tv=e[i].v;w=e[i].w;\n\t\t\tif(dis[u]+w<dis[v])\n\t\t\t{\n\t\t\t\tdis[v]=dis[u]+w;\n\t\t\t\tq.push((node){v,dis[v]});\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\",dis[MP[n]]);\n}\n```\n",
        "postTime": 1625052710,
        "uid": 194642,
        "name": "xiaozeyu",
        "ccfLevel": 5,
        "title": "P6399 [COI2008] TAMNICA"
    }
]
[
    {
        "content": "\u4e00\u7ffb\u9898\u89e3\uff0c\u53d1\u73b0\u9898\u89e3\u91cc\u5404\u4f4dDALAO\u8f93\u51fa\u5e26\u62ec\u53f7\u7684\u8868\u8fbe\u5f0f\u65f6\u90fd\u5148\n\n\u9012\u5f52\u8ba1\u7b97\u5de6\u53f3\u62ec\u53f7\u4e2a\u6570\uff0c\u7136\u540e\u5faa\u73af\u8f93\u51fa\n\n\u6211\u7684\u65b9\u6cd5\u6bd4\u8f83\u597d\u7406\u89e3\u4e00\u4e9b\n\n\u9996\u5148\n\n**\u7b2c\u4e00\u6b65\uff1aDP**\n\n\u8bbe  dp[i][j] \u8868\u793a\u4ece\u7b2c i \u4e2a\u6570\u5230\u7b2c j \u4e2a\u6570\u6dfb\u52a0 j-i+1 \u5bf9\u62ec\u53f7\n\n\u6240\u80fd\u901a\u8fc7\u6bcf\u4e00\u6b65\u52a0\u6cd5\u5f97\u5230\u7684\u6700\u4f18\u503c\u3002\n\n\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u600e\u4e48\u5217\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u8fd9\u4e48\u6765\u60f3\uff1a\n\ndp[i][j] \u600e\u4e48\u5f97\u6765\n\n\u7ecf\u8fc7\u524d\u9762\u7684\u8ba1\u7b97\uff0c\u6211\u4eec\u5df2\u7ecf\u628a\u7b2ci-\u7b2cj\u4e2a\u6570\u5408\u5e76\u6210\u4e86\u4e24\u4e2a\u6570\n\n\u90a3\u4e48\u6211\u4eec\u9700\u8981\u4e00\u4e2ak(i<=k<j)\u6765\u679a\u4e3e\u5408\u5e76\u7684\u662f\u54ea\u4fe9\u4e2a\u90e8\u5206\uff0c\n\n\u4e5f\u5c31\u662f\u52a0\u53f7\u7684\u4f4d\u7f6e\u3002\u968f\u4e4b\uff0c\u65b9\u7a0b\u5c31\u51fa\u6765\u4e86\uff1a\n\n dp[i][j]=max(dp[i][j],dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1])\n \n sum[i]\u8868\u793a\u7684\u662f\u524di\u4e2a\u6570\u4e4b\u548c\uff08\u524d\u7f00\u548c\uff09\n \n \u63a5\u4e0b\u6765\u662f\u8f93\u51fa\n \n \u6211\u4eec\u7528 jiahao[i][j] \u8868\u793a\u533a\u95f4i-j \u6700\u4f18\u89e3\u4e4b\u52a0\u53f7\u7684\u4f4d\u7f6e\n \n \u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u4e2a\u8868\u8fbe\u5f0f\u770b\u4f5c\u4e00\u68f5\u6811\uff0c\u9012\u5f52\u8f93\u51fa\u8fd9\u4e00\u68f5\u6811\uff0c\u5176\u4e2d\u53ef\u4ee5\u8fd1\u4f3c\u5730\u628a\u52a0\u53f7\u770b\u6210\u6839\uff0c\u4e24\u8fb9\u8868\u8fbe\u5f0f\u5206\u522b\u662f\u5de6\u53f3\u5b50\u6811\n \n \u7136\u540e\u5728\u9012\u5f52\u51fd\u6570\u91cc\u8fd9\u6837\u5199\uff1a\n \n \n ```cpp\nvoid print(long long int l,long long int r)\n{\n\tif(l==r)\n\t{\n\t\tcout<<shu[l];\n\t\treturn;\n\t}\n\tcout<<\"(\";//\u8f93\u51fa\u62ec\u53f7\n\tprint(l,jiahao[l][r]);//\u8f93\u51fa\u52a0\u53f7\u53f3\u8fb9\u8868\u8fbe\u5f0f\n\tcout<<\"+\";//\u8f93\u51fa\u52a0\u53f7\n\tprint(jiahao[l][r]+1,r);//\u8f93\u51fa\u52a0\u53f7\u5de6\u8fb9\u8868\u8fbe\u5f0f\n\tcout<<\")\";//\u8f93\u51fa\u62ec\u53f7\n}\n```\n\n\u90a3\u4e48\u4e0b\u4e00\u6b65\u8ba1\u7b97\u8fc7\u7a0b\uff0c\u5176\u5b9e\u548c\u8f93\u51fa\u8868\u8fbe\u5f0f\u5f88\u50cf\uff0c\u76f4\u63a5\u770b\u4ee3\u7801\n\n```cpp\nlong long int jisuan(long long int l,long long int r)\n{\n\tif(l==r)retur\n\tn shu[l];\n\tlong long int temp=jisuan(l,jiahao[l][r])+jisuan(jiahao[l][r]+1,r);\n\tcout<<temp<<\" \";\n\treturn temp;\n}\n```\n# **\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b**\n\n```cpp\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nlong long int n,shu[50],sum[50],dp[50][50],jiahao[50][50];\nlong long int jisuan(long long int l,long long int r)\n{\n\tif(l==r)retur\n\tn shu[l];\n\tlong long int temp=jisuan(l,jiahao[l][r])+jisuan(jiahao[l][r]+1,r);\n\tcout<<temp<<\" \";\n\treturn temp;\n}\nvoid print(long long int l,long long int r)\n{\n\tif(l==r)\n\t{\n\t\tcout<<shu[l];\n\t\treturn;\n\t}\n\tcout<<\"(\";\n\tprint(l,jiahao[l][r]);\n\tcout<<\"+\";\n\tprint(jiahao[l][r]+1,r);\n\tcout<<\")\";\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>shu[i];\n\t\tsum[i]=sum[i-1]+shu[i];\n\t}\n\tfor(int l=2;l<=n;l++)\n\t{\n\t\tfor(int i=1;i+l-1<=n;i++)\n\t\t{\n\t\t\tint j=i+l-1;\n\t\t\tdp[i][j]=0x7fffffffff;\n\t\t\tfor(int k=j-1;k>=i;k--)\n\t\t\t{\n\t\t\t\tif(dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1]<dp[i][j])\n\t\t\t\t{\n\t\t\t\t\tdp[i][j]=dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1];\n\t\t\t\t\tjiahao[i][j]=k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprint(1,n);\n\tcout<<endl;\n\tcout<<dp[1][n]<<endl;\n\tlong long int temp=jisuan(1,n);\n\treturn 0;\n}\n```\n",
        "postTime": 1573485869,
        "uid": 218781,
        "name": "hanbingchen01",
        "ccfLevel": 0,
        "title": "P2308 \u6dfb\u52a0\u62ec\u53f7 \u9898\u89e3"
    },
    {
        "content": "## \u9898\u76ee\u63cf\u8ff0:\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6b63\u6574\u6570\u5e8f\u5217a(1)\uff0ca(2)\uff0c...\uff0ca(n),(1<=n<=20)\n\n\u4e0d\u6539\u53d8\u5e8f\u5217\u4e2d\u6bcf\u4e2a\u5143\u7d20\u5728\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\uff0c\u628a\u5b83\u4eec\u76f8\u52a0\uff0c\u5e76\u7528\u62ec\u53f7\u8bb0\u6bcf\u6b21\u52a0\u6cd5\u6240\u5f97\u7684\u548c\uff0c\u79f0\u4e3a\u4e2d\u95f4\u548c\u3002\n\n\u4f8b\u5982:\n\n\u7ed9\u51fa\u5e8f\u5217\u662f4\uff0c1\uff0c2\uff0c3\u3002\n\n\u7b2c\u4e00\u79cd\u6dfb\u62ec\u53f7\u65b9\u6cd5:\n\n((4+1)+(2+3))=((5)+(5))=(10)\n\n\u6709\u4e09\u4e2a\u4e2d\u95f4\u548c\u662f5\uff0c5\uff0c10\uff0c\u5b83\u4eec\u4e4b\u548c\u4e3a:5+5+10=20\n\n\u7b2c\u4e8c\u79cd\u6dfb\u62ec\u53f7\u65b9\u6cd5\n\n(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)\n\n\u4e2d\u95f4\u548c\u662f3\uff0c6\uff0c10\uff0c\u5b83\u4eec\u4e4b\u548c\u4e3a19\u3002\n\n\n------------\n\n\n## \u89e3:\n\n### \u533a\u95f4dp:\n\n\u8bbef[i][j]\u4e3ai,j\u533a\u95f4\u5408\u5e76\u7684\u603b\u4ee3\u4ef7,\n\n\u5bb9\u6613\u5f97\u5230:\n\n${f[i][j]=min(f[i][j],f[i][k]+f[k+1][j]+sum[j]-sum[i-1]}$\n\n(\u7c7b\u4f3c\u77f3\u5b50\u5408\u5e76)\n\n\u5176\u4e2d${sum[j]-sum[i-1]}$\u4e3a\u5408\u5e76\u4e00\u6b21\u7684\u4ee3\u4ef7\n\n\u8fb9\u754c:f[i][i]=0(\u5408\u5e76\u4e00\u6b21\u65e0\u4ee3\u4ef7)\n\n\u4f46\u672c\u9898\u7684\u5173\u952e\u5728\u4e8e\u8f93\u51fa:\n\n### \u5bf9\u4e8e\u8f93\u51fa\u62ec\u53f7\u65f6:\n\n\u8bbe\u4e00lef\u4e0erig\u6570\u7ec4\u8bb0\u5f55\u4e00\u4e2a\u6570\u5de6\u53f3\u7684\u62ec\u53f7\u6570;\n\n\u5177\u4f53\u600e\u4e48\u64cd\u4f5c\u9700\u8981\u9012\u5f52\u8f93\u51fa:\n\n#### \u5177\u4f53\u5c31\u50cf\u8fd9\u6837:\n\n```cpp\nvoid prinf(int l,int r)\n{\n\tif(l==r)return;\n\t++lef[l];\n\t++rig[r];\n\tprinf(l,ans[l][r]);\n\tprinf(ans[l][r]+1,r);\n}\n```\n//ans[l][r]\u4e3a[l,r]\u533a\u95f4\u53d6\u5230\u6700\u4f18\u89e3\u70b9\u7684\u4e2d\u95f4\u65ad\u70b9\n\n\u77e5\u9053\u4e86\u5de6\u53f3\u6709\u591a\u5c11\u62ec\u53f7,\u5c31\u53ef\u4ee5\u76f4\u63a5\u6a21\u62df\u4e86:\n\n#### \u5c31\u50cf\u8fd9\u6837:\n\n```cpp\n    for(int i=1;i<=n;i++)\n    {\n    \tfor(int j=1;j<=lef[i];j++)\n    \tcout<<\"(\";\n    \tcout<<a[i];\n\t\tfor(int j=1;j<=rig[i];j++)\n\t\tcout<<\")\"; \n\t\tif(i!=n)cout<<\"+\";\n    }\n```\n\n### \u5bf9\u4e8e\u8f93\u51fa\u7b54\u6848\u65f6,\u4e0e\u4e0a\u9762\u7684\u76f8\u4f3c:\n\n\u9012\u5f52\u8f93\u51fa\u7ed3\u679c:\n\n```cpp\nvoid print(int l,int r)\n{\n\tif(l==r)\n\t{\n\t    return;\n\t} \n\tprint(l,ans[l][r]);\n\tprint(ans[l][r]+1,r);\n\tcout<<sum[r]-sum[l-1]<<\" \";//\u5408\u5e76\u4e00\u6b21\u7684\u4ee3\u4ef7\n}\n```\n\n### \u5b8c\u6574\u4ee3\u7801:\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define int long long\n\nusing namespace std;\n\nconst int N=201;\nint a[N],f[N][N],n,ans[N][N],sum[N],tot,lef[N],rig[N];\n\nvoid print(int l,int r)\n{\n\tif(l==r)\n\t{\n\t    return;\n\t} \n\tprint(l,ans[l][r]);\n\tprint(ans[l][r]+1,r);\n\tcout<<sum[r]-sum[l-1]<<\" \";\n}\n\nvoid prinf(int l,int r)\n{\n\tif(l==r)return;\n\t++lef[l];\n\t++rig[r];\n\tprinf(l,ans[l][r]);\n\tprinf(ans[l][r]+1,r);\n}\nsigned  main()\n{\n\tcin>>n;\n    memset(f,127/3,sizeof(f));\n\tfor(int i=1;i<=n;i++)\n\t{\n\t   cin>>a[i];f[i][i]=0;\n\t   sum[i]=sum[i-1]+a[i];//\u9884\u5904\u7406\u524d\u7f00\u548c\n    }\n    for(int i=2;i<=n;i++)\n    for(int j=1;j<=n-i+1;j++)\n    {\n    \tfor(int k=j;k<=j+i-1;k++)\n    \t{\n    \t\tif(f[j][k]+f[k+1][j+i-1]+sum[j+i-1]-sum[j-1]<=f[j][j+i-1])\n    \t\t{\n    \t\t\tf[j][j+i-1]=f[j][k]+f[k+1][j+i-1]+sum[j+i-1]-sum[j-1];\n    \t\t\tans[j][j+i-1]=k;\n    \t\t}//\u533a\u95f4\u957f\u5ea6\u7531\u5c0f\u5230\u5927\n    \t}\n    }\n    prinf(1,n);\n    for(int i=1;i<=n;i++)\n    {\n    \tfor(int j=1;j<=lef[i];j++)\n    \tcout<<\"(\";\n    \tcout<<a[i];\n\t\tfor(int j=1;j<=rig[i];j++)\n\t\tcout<<\")\"; \n\t\tif(i!=n)cout<<\"+\";//\u8f93\u51fa\u5408\u5e76\u5e8f\u5217\n    }\n    cout<<endl;\n    cout<<f[1][n]<<endl;\n    print(1,n); //\u9012\u5f52\u8f93\u51fa\u4e2d\u95f4\u548c\n}\n\n```\n",
        "postTime": 1536545508,
        "uid": 87964,
        "name": "_zjz",
        "ccfLevel": 6,
        "title": "\u6dfb\u52a0\u62ec\u53f7"
    },
    {
        "content": "my blog\n\nhttp://blog.csdn.net/largecub233/article/details/65629548\n\n\u5c31\u662f\u533a\u95f4dp\uff1b\n\n\u56e0\u4e3a\u4e00\u5b9a\u8981\u52a0n-1\u4e2a\u62ec\u53f7\uff1b\n\n\u8f93\u51fa\u7b54\u6848\u7684\u65f6\u5019\u548c\u52a0\u5206\u4e8c\u53c9\u6811\u4e00\u6837\uff1b\n\n\u7136\u540e\u4ece\u5de6\u5230\u53f3\u662f\u6307\u8ba9\u62ec\u53f7\u9760\u53f3\uff0c\u6240\u4ee5k\u5c3d\u53ef\u80fd\u9760\u53f3\uff1b\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cstdlib>\n#define Ll long long\nusing namespace std;\nint a[50],h[50],hh[50],f[50][50],g[50][50],sum[51];\nint n,m;\nvoid dfs(int x,int y){\n    if(x==y)return;\n    h[x]++;\n    hh[y]++;\n    dfs(x,g[x][y]);\n    dfs(g[x][y]+1,y);\n}\nvoid DFS(int x,int y){\n    if(x==y)return;\n    DFS(x,g[x][y]);\n    DFS(g[x][y]+1,y);\n    cout<<sum[y]-sum[x-1]<<' ';\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n        scanf(\"%d\",&a[i]);\n        f[i][i]=0;\n    }\n    for(int i=1;i<=n;i++)\n        sum[i]=sum[i-1]+a[i];\n    for(int i=n-1;i;i--)\n    for(int j=i+1;j<=n;j++)\n    {\n        f[i][j]=1e9;\n        for(int k=i;k<j;k++){\n            if(f[i][k]+f[k+1][j]+sum[j]-sum[i-1]<=f[i][j]){\n                f[i][j]=f[i][k]+f[k+1][j]+sum[j]-sum[i-1];\n                g[i][j]=k;\n            }\n        }\n    }\n    dfs(1,n);\n    for(int i=1;i<=n;i++){\n        for(int j=1;j<=h[i];j++)cout<<'(';\n        cout<<a[i];\n        if(!hh[i]&&i!=n)cout<<'+';\n        for(int j=1;j<=hh[i];j++)cout<<')';\n        if(hh[i]&&i!=n)cout<<'+';\n    }cout<<endl;\n    cout<<f[1][n]<<endl;\n    DFS(1,n);\n}\n```",
        "postTime": 1490332133,
        "uid": 7442,
        "name": "\u5de8\u578b\u65b9\u5757",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2308 \u3010\u6dfb\u52a0\u62ec\u53f7\u3011"
    },
    {
        "content": "### $\\mathrm{ Updata: }$\n$ 2022 . 2 . 16 $\uff1a SPJ \u5df2\u52a0\uff0c\u672c\u9898\u89e3\u4e2d $ 80 $ \u5206\u7684\u5199\u6cd5\u4e5f\u80fd AC\u3002\n\n\n------------\n\n# [\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2308)\n\n------------\n\n# \u89e3\uff1a\n\u8fd9\u9898\u660e\u663e\u662f\u533a\u95f4 dp\uff08 \u505a\u6cd5\u548c\u77f3\u5b50\u5408\u5e76\u5f88\u50cf \uff09\u3002\n\n------------\n\n\u9996\u5148\u6211\u4eec\u8bbe $ f_{i,j} $ \u8868\u793a\u4ece $ i $ \u5230 $ j $ \u533a\u95f4\u5408\u5e76\u540e\u6240\u80fd\u5f97\u5230\u7684\u4e2d\u95f4\u548c\u4e4b\u548c\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\n\n\u4e8e\u662f\u5c31\u662f\u533a\u95f4 dp ~~\u7684\u6a21\u677f~~\uff1a\n\n- **\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a** \n##### $ f_{i,j} = \\min(f_{i,j},f_{i,k} + f_{k+1,j} + sum_{j} - sum_{i-1} ) $\n\n\u5176\u4e2d $ sum_{i} $ \u8868\u793a\u524d\u7f00\u548c\uff0c\u4e5f\u5c31\u662f\u4ece $ a_{1} $ \u5230 $ a_{i} $ \u7684\u548c\uff0c\n\n\u6240\u4ee5 $ sum_{j} - sum_{i-1} $ \u8868\u793a\u4ece $ a_{i} $ \u5230 $ a_{j} $ \u7684\u548c\u3002\n\n- **\u521d\u59cb\u72b6\u6001\uff1a**\n\n\u81ea\u5df1\u548c\u81ea\u5df1\u5408\u5e76\u4ee3\u4ef7\u662f 0\uff0c\u6240\u4ee5 $ f_{i,i} = 0 $  \n\n\u7531\u4e8e\u662f\u6c42\u6700\u5c0f\u4ee3\u4ef7\uff0c\u6240\u4ee5  \n\n`memset(f,0x3f,sizeof(f))//\u7ed9 f \u8d4b\u4e00\u4e2a\u8f83\u5927\u503c`\n\n------------\n## \u8f93\u51fa\uff1a\n\n\u8fd9\u9898\u8981\u6ce8\u610f\u7684\u662f\u5b83\u7684\u8f93\u51fa \uff08~~\u8f93\u51fa\u8c03\u4e86\u6211\u4e00\u665a\u4e0a~~\uff09\n\n- \u6211\u6700\u5f00\u59cb\u662f\u60f3\u5728\u6bcf\u4e2a\u4e0d\u540c\u533a\u95f4\u4e2d\u627e\u5230\u6700\u5c0f\u65f6\u7528 $ sl_{l} \\gets  sl_{l}+1 $ \u548c  $ sr_{r} \\gets  sr_{r}+1 $ \u6765\u5b58\u5de6\u53f3\u62ec\u53f7\u6570\uff0c\u6700\u540e\u8f93\u51fa\u3002\n\n\u5199\u6cd5\uff1a\n```cpp\nint l,r;\nfor(int len=2;len<=n;len++)\n{\n    int Min=1e9;\n    for(int i=1;i<=n-len+1;i++)\n    {\n        int j=len+i-1;\n        if(f[i][j]<Min)\n            l=i,r=j;\n    }\n    sl[l]++,sr[r]++;\n}\nfor(int i=1;i<=n;i++)\n{\n    for(int j=1;j<=sl[i];j++)\n        cout<<'(';\n    cout<<a[i];\n    for(int j=1;j<=sr[i];j++)\n        cout<<')';\n    if(i!=n)\n        cout<<'+';\n}cout<<'\\n';\n```\n\n\u867d\u8fc7\u4e86\u6837\u4f8b\uff0c\u7136\u800c[ 30pts \u8bb0\u5f55](https://www.luogu.com.cn/record/69455713)\u3002\n\n\u4e8e\u662f\u767e\u601d\u4e0d\u5f97\u5176\u89e3\u7684\u6211\u62ff\u4e86\u4e00\u4f4d dalao \u7684\u7801\u5bf9\u62cd\uff0c\u7acb\u5373\u5c31\u51fa\u9519\u3002\u3002\u3002\n\n\u8f93\u5165\uff1a\n```\n7\n10 2 9 9 9 6 2 \n```\n\u8f93\u51fa\uff1a\n```\n//std.out:\n((10+(2+9))+(9+(9+(6+2))))\n130\n11 21 8 17 26 47 \n\n//bf.out:\n(10+(2+(9+(9+(9+(6+2))))))\n130\n8 17 26 27 15 37 \n```\n\n\n- \u89c2\u5bdf\u540e\u53d1\u73b0 std \u662f\u9012\u5f52\u8f93\u51fa\uff08\u62ec\u53f7\u5c42\u6570\u5c11\uff09\uff0c\u4e8e\u662f\u6211\u6539\u4e86\u4e00\u4e0b\uff1a\n\n```cpp\nvoid print(int l,int r)\n{\n    if(l==r)\n        cout<<a[l];\n    else\n    {\n        cout<<'(';\n        print(l,num[l][r]);//num[i][j]\u662f i \uff0cj \u533a\u95f4\u6700\u5c0f\u503c\u7684\u65ad\u70b9\n        cout<<'+';\n        print(num[l][r]+1,r);\n        cout<<')';\n        ans[++ans[0]]=sum[r]-sum[l-1];//\u8fd9\u662f\u5b58\u6bcf\u4e2a\u4e2d\u95f4\u548c\n    }\n}\n//\u6c42f[i][j]\uff08\u5199\u5728\u4e3b\u51fd\u6570\u91cc\uff09\nfor(int len=2;len<=n;len++)\n    for(int i=1;i<=n-len+1;i++)\n    {\n        int j=len+i-1;\n        for(int k=i;k<=j-1;k++)\n\t    if(f[i][k]+f[k+1][j]+sum[j]-sum[i-1]<f[i][j])\n            f[i][j]=f[i][k]+f[k+1][j]+sum[j]-sum[i-1],num[i][j]=k;//\u505a\u6807\u8bb0num[i][j]\n    }\n```\n\n\u4e8e\u662f[ 80pts \u8bb0\u5f55](https://www.luogu.com.cn/record/69457188)\u3002\uff08\u73b0\u5728\u5df2\u80fd\u8fc7\uff09\n\n\n- \u6700\u540e\u5728\u4e0d\u65ad\u5bf9\u62cd\u540e\uff0c\u53d1\u73b0 $ k $ \u679a\u4e3e\u7684\u987a\u5e8f\u4e5f\u4f1a\u5f71\u54cd $ num_{i,j} $\u7684\u503c\uff0c\u4e0d\u8fc7\u9898\u76ee\u8bf4\u4ece\u5de6\u5230\u53f3\u4e5f\u8bb8\u662f\u8981\u6807\u8bb0\u9760\u53f3\u7684 $ k $\uff0c\n\n\u6240\u4ee5\u7ec8\u4e8e[ AC ](https://www.luogu.com.cn/record/69457786)\u4e86\u3002\n\nCode\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n;\nint num[21][21];\nint ans[21];\nint a[21],sum[21];\nint f[21][21];\nvoid print(int l,int r)//\u9012\u5f52\u8f93\u51fa\n{\n    if(l==r)\n        cout<<a[l];\n    else\n    {\n        cout<<'(';\n        print(l,num[l][r]);\n        cout<<'+';\n        print(num[l][r]+1,r);\n        cout<<')';\n        ans[++ans[0]]=sum[r]-sum[l-1];//\u5b58\u4e2d\u95f4\u548c\n    }\n}\nint main()\n{\n    ios::sync_with_stdio(0);\n    memset(f,0x3f,sizeof(f));//\u521d\u59cb\u5316\n    cin>>n;\n    for(int i=1;i<=n;i++)\n    {\n        cin>>a[i];\n        sum[i]=sum[i-1]+a[i];//\u524d\u7f00\u548c\n        f[i][i]=0;//\u521d\u59cb\u5316\n    }\n    for(int len=2;len<=n;len++)//\u533a\u95f4dp\u5199\u6cd5\n    {\n        for(int i=1;i<=n-len+1;i++)\n        {\n            int j=len+i-1;\n            for(int k=j-1;k>=i;k--)//\u8fd9\u91cc\u987a\u5e8f\u6539\u4e86\u6539\u5c31\u8fc7\u4e86\u3002\u3002\u3002\n            {\n                if(f[i][k]+f[k+1][j]+sum[j]-sum[i-1]<f[i][j])\n                    f[i][j]=f[i][k]+f[k+1][j]+sum[j]-sum[i-1],num[i][j]=k;\n            }\n        }\n    }\n    print(1,n);cout<<'\\n';\n    cout<<f[1][n]<<'\\n';\n    for(int i=1;i<=ans[0];i++)\n        cout<<ans[i]<<\" \";\n    cout<<'\\n';\n    return 0;\n}\n```\n#### \u8c22\u8c22\u5404\u4f4d dalao \u89c2\u8d4f\u3002\nEnd",
        "postTime": 1644977055,
        "uid": 371984,
        "name": "RC\u00b7\u963f\u67d2",
        "ccfLevel": 0,
        "title": "P2308 \u6dfb\u52a0\u62ec\u53f7 \u9898\u89e3"
    },
    {
        "content": "### \u4e3b\u8981\u601d\u8def\n\n\u6211\u8ba4\u4e3a\u8fd9\u662f\u4e00\u9053\u7ecf\u5178\u7684\u533a\u95f4 dp \u95ee\u9898\u3002\n\n\u5728\u6b64\uff0c\u6211\u628a\u9898\u76ee\u4e2d\u6240\u8bf4\u7684\u6240\u6709\u4e2d\u95f4\u548c\u7684\u548c\u8bf4\u6210\u201c\u4ef7\u503c\u201d\uff0c\u9632\u6b62\u8bef\u89e3\u3002\n\n\u9996\u5148\u8bbe $dp_{l, r}$ \u4e3a\u7b2c $l$ \u4e2a\u6570\u5230\u7b2c $r$ \u4e2a\u6570\u6240\u5f97\u6700\u5c0f\u4ef7\u503c\uff0c$dp1_{l, r}$ \u8868\u793a\u4ece $l$ \u5230 $r$ \u7684\u4e2d\u95f4\u548c\u3002\u6839\u636e\u9898\u610f\u4e0d\u96be\u770b\u51fa\uff0c\u4e00\u6bb5\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e $2$ \u7684\u533a\u95f4\uff0c\u4e00\u5b9a\u662f\u7531\u4e24\u6bb5\u533a\u95f4\u5408\u5e76\u800c\u6210\u7684\u3002\u90a3\u4e48\u5c31\u53ef\u4ee5\u5f97\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$$\ndp_{l, r} = \\min\\left({dp_{l, k} + dp_{k + 1, r} + dp1_{l, k} + dp1_{k + 1, r}}\\right)\n$$\n\n\u5176\u4e2d $k$ \u8868\u793a\u662f\u4e24\u4e2a\u533a\u95f4\u7684\u5206\u5272\u7ebf\uff08$l \\le k \\le r$\uff09\u3002\n\n\u597d\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa $dp1$ \u5c31\u53ef\u6c42\u51fa\u6700\u540e\u7684\u6700\u5c0f\u4ef7\u503c\u548c\u6240\u6709\u4e2d\u95f4\u548c\u4e86\u3002\n\n\u5176\u5b9e $dp1$ \u7684\u6c42\u6cd5\u6709\u5f88\u591a\uff0c\u6bd4\u5982\u524d\u7f00\u548c\u3001\u628a\u4e24\u4e2a\u533a\u95f4\u52a0\u8d77\u6765\u4ec0\u4e48\u7684\uff0c\u5177\u4f53\u770b\u4ee3\u7801\u3002\n\n\u5f88\u5bb9\u6613\u5730\u6c42\u51fa\u6700\u540e\u7684\u6700\u5c0f\u4ef7\u503c\u548c\u4e2d\u95f4\u548c\u540e\uff0c\u5f00\u59cb\u8003\u8651\u600e\u4e48\u8f93\u51fa\u62ec\u53f7\u65b9\u6848\u548c\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u518d\u591a\u5f00\u51e0\u4e2a\u6570\u7ec4\uff1a$dp2_{l, r, i}$ \u8868\u793a\u4ece $l$ \u5230 $r$ \u6240\u5206\u6210\u7684\u4e24\u4e2a\u4f7f\u5f97\u4ef7\u503c\u6700\u5c0f\u533a\u95f4\u7684\u5de6\u7aef\u70b9\u548c\u53f3\u7aef\u70b9\uff0c\u5176\u4e2d $i = 0$ \u8868\u793a\u7b2c\u4e00\u4e2a\u533a\u95f4\u7684\u5de6\u7aef\u70b9\uff0c$i = 1$ \u8868\u793a\u7b2c\u4e00\u4e2a\u533a\u95f4\u7684\u53f3\u7aef\u70b9\uff0c$i = 2$ \u8868\u793a\u7b2c\u4e8c\u4e2a\u533a\u95f4\u7684\u5de6\u7aef\u70b9\uff0c$i = 3$ \u8868\u793a\u7b2c\u4e8c\u4e2a\u533a\u95f4\u7684\u53f3\u7aef\u70b9\u3002\n\n\u7136\u540e\u600e\u4e48\u6c42\u5462\uff0c\u5176\u5b9e\u5c31\u662f\u5728 $dp$ \u66f4\u65b0\u7684\u65f6\u5019\uff0c$dp2$ \u4e5f\u66f4\u65b0\u4e00\u4e0b\u5c31\u884c\u4e86\u3002\n\n\u53ef\u80fd\u6709\u4eba\u4f1a\u95ee\uff1a\u8fd9\u4e2a\u6570\u7ec4\u6709\u5565\u7528\uff1f\n\n\u522b\u6025\uff0c\u5999\u7528\u5728\u4e0b\u5934\u3002\n\n\u6211\u4eec\u5728\u5f00\u4e00\u4e2a\u6570\u7ec4\uff0c\u540d\u53eb $dp3$\uff0c$dp3_{i, j}$ \u4e2d\uff0c$j = 0$ \u8868\u793a\u7b2c $i$ \u4e2a\u6570\u7684\u524d\u9762\uff08\u6307\u8d34\u8eab\uff09\u6709\u591a\u5c11\u4e2a\u5de6\u62ec\u53f7\uff0c$j = 1$ \u8868\u793a\u7b2c $i$ \u4e2a\u6570\u7684\u540e\u9762\uff08\u6307\u8d34\u8eab\uff09\u6709\u591a\u5c11\u4e2a\u53f3\u62ec\u53f7\uff0c$j = 2$ \u8868\u793a\u7b2c $i$ \u4e2a\u6570\u7684\u540e\u9762\u8981\u4e0d\u8981\u52a0\u52a0\u53f7\u3002\n\n\u7136\u540e\u524d\u9762\u6211\u4eec\u90fd\u5df2\u7ecf\u77e5\u9053\u4e86\u4e00\u4e2a\u533a\u95f4\u662f\u7531\u90a3\u4e24\u4e2a\u533a\u95f4\u5408\u5e76\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u6df1\u641c\u4e00\u8fb9\uff0c\u6bcf\u6b21\u6df1\u641c\u5b83\u7684\u5de6\u53f3\u533a\u95f4\uff0c\u6c42\u51fa $dp3$\uff08\u8fd9\u5c31\u662f $dp2$ \u7684\u5999\u7528\u4e4b\u5904\uff09\u3002\u5177\u4f53\u600e\u4e48\u6c42\u548c\u600e\u4e48\u8f93\u51fa\uff0c\u770b\u770b\u4ee3\u7801\u5427 qwq\u3002\n\n\u597d\u5566\uff0c\u8d34\u4ee3\u7801\uff01\n\n### AC Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint a[25], dp[25][25], dp1[25][25][4], dp2[25][25], dp3[25][3], ans[30], sum1;\nvoid dfs(int l, int r) {\n\tif (r - l + 1 == 1) return;\n\tif (r - l + 1 == 2) {\n\t\tans[++sum1] = dp2[l][r];\n\t\tdp3[l][0]++;\n\t\tdp3[r][1]++;\n\t\tdp3[l][2]++;\n\t\treturn;\n\t}\n\tdfs(dp1[l][r][0], dp1[l][r][1]);\n\tdfs(dp1[l][r][2], dp1[l][r][3]);\n\tdp3[l][0]++;\n\tdp3[r][1]++;\n\tdp3[dp1[l][r][1]][2]++;\n\tans[++sum1] = dp2[l][r];\n\treturn;\n}\nint main() {\n\tint n;\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tcin >> a[i];\n\t\tdp[i][i] = a[i], dp2[i][i] = a[i];\n\t}\n\tfor (int len = 2; len <= n; len++)\n\t\tfor (int l = 1; l + len - 1 <= n; l++) {\n\t\t\tint r = l + len - 1;\n\t\t\tdp[l][r] = 1e9;\n\t\t\tfor (int k = l; k <= r; k++) {\n\t\t\t\tint ans = 0;\n\t\t\t\tans += dp[l][k] + dp[k + 1][r] + dp2[l][k] + dp2[k + 1][r];\n\t\t\t\tdp2[l][r] = dp2[l][k] + dp2[k + 1][r];\n\t\t\t\tif (k == l) ans -= dp[l][k];\n\t\t\t\tif (k + 1 == r) ans -= dp[k + 1][r];\n\t\t\t\tif (ans < dp[l][r])\n\t\t\t\t\tdp1[l][r][0] = l, \n\t\t\t\t\tdp1[l][r][1] = k,\n\t\t\t\t\tdp1[l][r][2] = k + 1,\n\t\t\t\t\tdp1[l][r][3] = r, \n\t\t\t\t\tdp[l][r] = ans;\n\t\t\t}\n\t\t}\n\tdfs(1, n);\n\tfor (int i = 1; i <= n; i++) {\n\t\twhile (dp3[i][0]--) cout << '(';\n\t\tcout << a[i];\n\t\twhile (dp3[i][1]--) cout << ')';\n\t\tif (dp3[i][2]) cout << '+';\n\t} \n\tcout << endl << dp[1][n] << endl;\n\tfor (int i = 1; i <= sum1; i++) cout << ans[i] << ' ';\n}\n```\n\n\u5176\u5b9e\u4ee3\u7801\u8fd8\u53ef\u4ee5\u518d\u4f18\u5316\uff0c\u4f46\u5728\u6b64\u5148\u4e0d\u4f18\u5316\u4e86\u3002\u3002\u3002\n\n\u8dd1\u8d77\u6765\u8fd8\u633a\u5feb\u7684\uff0c\u7a7a\u95f4\u4e5f\u6bd4\u8f83\u5c11\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zrq1zf00.png?x-oss-process=image/resize,m_lfit,h_10000,w_10000)\n\n\u53ef\u80fd\u4f1a\u6709\u4e0d\u8db3\u7684\u5730\u65b9\uff0c\u6c42\u5404\u8def\u795e\u4ed9\u6307\u6b63\uff0c\u8c22\u8c22\uff01",
        "postTime": 1660572575,
        "uid": 330901,
        "name": "WilliamFranklin",
        "ccfLevel": 4,
        "title": "P2308 \u9898\u89e3"
    },
    {
        "content": "# \u9898\u610f\n\n\u5728\u4e24\u4e2a\u52a0\u6570\u7684\u4e24\u4fa7\u6dfb\u52a0\u4e00\u5bf9\u62ec\u53f7\uff0c\u6bcf\u6b21\u76f8\u52a0\u90fd\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u4e2d\u95f4\u7ed3\u679c\uff0c\u8fd9\u4e9b\u4e2d\u95f4\u7ed3\u679c\u76f8\u52a0\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u6570\uff0c\u6c42\u6700\u5c0f\u7684\u7ed3\u679c\u548c\u8fc7\u7a0b\u3002\n\n# \u5206\u6790\n\n\u5982\u679c\u6ca1\u6709\u8981\u6c42\u8fc7\u7a0b\uff0c\u8fd9\u9898\u53ef\u4ee5\u53d8\u6210[\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.com.cn/problem/P1775)\u4e86\u3002\n\n\u533a\u95f4 DP \u6c42\u51fa\u6700\u5c0f\u7684\u7ed3\u679c\uff0c\u5728\u7528\u9012\u5f52\u6c42\u51fa\u8fc7\u7a0b\u5373\u53ef\u3002\n\n### \u5728\u533a\u95f4DP\u4e2d\u6c42c\u6570\u7ec4\n\n$c[i][j]$ \u7684\u610f\u4e49\uff1a\u5728\u6c42\u6700\u5c0f\u7684\u7ed3\u679c\u7684\u8fc7\u7a0b\u4e2d\u540c\u65f6\u6c42\u51fa $i\\sim j$ \u4e2d ``+`` \u4f4d\u7f6e\u3002\n\n```cpp\nint DP(int l,int r){\n\tmemset(f,0x3f,sizeof(f));\n\tfor(int i=1;i<=n;i++){\n\t\tsum[i]=sum[i-1]+a[i];\n\t\tf[i][i]=0;\n\t}\n\tfor(int l=1;l<n;l++)\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tint j=i+l;\n\t\t\tif(j>n)break;\n\t\t\tint tmp;\n\t\t\tfor(int k=i;k<j;k++){\n\t\t\t\tif(f[i][k]+f[k+1][j]+(sum[j]-sum[i-1])<f[i][j]){\n\t\t\t\t\ttmp=k;\n\t\t\t\t\tf[i][j]=min(f[i][j],f[i][k]+f[k+1][j]+(sum[j]-sum[i-1]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tc[i][j]=tmp;\n\t\t}\n\treturn f[1][n];\n}\n```\n\n### \u600e\u4e48\u7528c\u6570\u7ec4\u6062\u590d\u6dfb\u52a0\u62ec\u53f7\u540e\u7684\u52a0\u6cd5\u7b97\u5f0f\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/asn0teci.png)\n\n\u5148\u8f93\u51fa\u4e00\u4e2a\u62ec\u53f7 ``(``\uff0c\u518d\u9012\u5f52\u6c42\u51fa ``+`` \u5de6\u8fb9\u7684\u90e8\u5206\uff0c\u8f93\u51fa ``+``\uff0c\u518d\u5728\u9012\u5f52\u6c42\u51fa ``+`` \u53f3\u8fb9\u7684\u90e8\u5206\uff0c\u6700\u540e\u8f93\u51fa\u4e00\u4e2a\u62ec\u53f7 ``)``\u3002\n\n```cpp\nvoid write(int l,int r){\n\tif(l==r){\n\t\twrite_(a[l]);\n\t\treturn;\n\t}\n\tint t=c[l][r];\n\twrite_(\"(\"),write(l,t),write_(\"+\"),write(t+1,r),write_(\")\");\n\tans[++cnt]=sum[r]-sum[l-1];\n\treturn;\n}\n```\n\n# Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n//\u6b64\u5904\u4e3a\u5feb\u8bfb\u4ee3\u7801\nconst int N=20+10;\nint n;\nint a[N],sum[N],f[N][N],c[N][N],ans[N],cnt;\nint DP(int l,int r){\n\tmemset(f,0x3f,sizeof(f));\n\tfor(int i=1;i<=n;i++){\n\t\tsum[i]=sum[i-1]+a[i];\n\t\tf[i][i]=0;\n\t}\n\tfor(int l=1;l<n;l++)\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tint j=i+l;\n\t\t\tif(j>n)break;\n\t\t\tint tmp;\n\t\t\tfor(int k=i;k<j;k++){\n\t\t\t\tif(f[i][k]+f[k+1][j]+(sum[j]-sum[i-1])<f[i][j]){\n\t\t\t\t\ttmp=k;\n\t\t\t\t\tf[i][j]=min(f[i][j],f[i][k]+f[k+1][j]+(sum[j]-sum[i-1]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tc[i][j]=tmp;\n\t\t}\n\treturn f[1][n];\n}\nvoid write(int l,int r){\n\tif(l==r){\n\t\twrite_(a[l]);\n\t\treturn;\n\t}\n\tint t=c[l][r];\n\twrite_(\"(\"),write(l,t),write_(\"+\"),write(t+1,r),write_(\")\");\n\tans[++cnt]=sum[r]-sum[l-1];\n\treturn;\n}\nint main(void){\n\tread_(n);\n\tfor(int i=1;i<=n;i++)\n\t\tread_(a[i]);\n\tint t=DP(1,n);\n\twrite(1,n);\n\twrite_(\"\\n\",t,\"\\n\");\n\tfor(int i=1;i<=cnt;i++)\n\t\twrite_(ans[i],\" \");\n\treturn 0;\n}\n```",
        "postTime": 1650716806,
        "uid": 501923,
        "name": "duchengjun",
        "ccfLevel": 5,
        "title": "P2308\u9898\u89e3"
    },
    {
        "content": "[P2308 \u6dfb\u52a0\u62ec\u53f7](https://www.luogu.com.cn/problem/P2308)\n### \u9898\u76ee\u80cc\u666f\n\u7ed9\u5b9a\u4e00\u4e2a\u6b63\u6574\u6570\u5e8f\u5217$a_1,a_2,\\cdots,a_n,(1\\le n\\le20)$\n\n\u4e0d\u6539\u53d8\u5e8f\u5217\u4e2d\u6bcf\u4e2a\u5143\u7d20\u5728\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\uff0c\u628a\u5b83\u4eec\u76f8\u52a0\uff0c\u5e76\u7528\u62ec\u53f7\u8bb0\u6bcf\u6b21\u52a0\u6cd5\u6240\u5f97\u7684\u548c\uff0c\u79f0\u4e3a\u4e2d\u95f4\u548c\u3002\n\n\u4f8b\u5982:\n\n\u7ed9\u51fa\u5e8f\u5217\u662f$4,1,2,3$\u3002\n\n\u7b2c\u4e00\u79cd\u6dfb\u62ec\u53f7\u65b9\u6cd5:\n\n$((4+1)+(2+3))=((5)+(5))=(10)$\n\n\u6709\u4e09\u4e2a\u4e2d\u95f4\u548c\u662f$5,5,10$\uff0c\u5b83\u4eec\u4e4b\u548c\u4e3a:$5+5+10=20$\n\n\u7b2c\u4e8c\u79cd\u6dfb\u62ec\u53f7\u65b9\u6cd5\n\n$(4+((1+2)+3))=(4+((3)+3))=(4+(6))=(10)$\n\n\u4e2d\u95f4\u548c\u662f$3,6,10$\uff0c\u5b83\u4eec\u4e4b\u548c\u4e3a$19$\u3002\n### \u9898\u76ee\u63cf\u8ff0\n\u73b0\u5728\u8981\u6dfb\u4e0a$n-1$\u5bf9\u62ec\u53f7\uff0c\u52a0\u6cd5\u8fd0\u7b97\u4f9d\u62ec\u53f7\u987a\u5e8f\u8fdb\u884c\uff0c\u5f97\u5230$n-1$\u4e2a\u4e2d\u95f4\u548c\uff0c\u6c42\u51fa\u4f7f\u4e2d\u95f4\u548c\u4e4b\u548c\u6700\u5c0f\u7684\u6dfb\u62ec\u53f7\u65b9\u6cd5\u3002\n### \u8f93\u5165\u683c\u5f0f\n\u5171\u4e24\u884c\u3002\u7b2c\u4e00\u884c\uff0c\u4e3a\u6574\u6570$n(1\\le n\\le20)$\u3002\u7b2c\u4e8c\u884c\uff0c\u4e3a$a_1,a_2,\\cdots,a_n$\u8fd9$n$\u4e2a\u6b63\u6574\u6570\uff0c\u6bcf\u4e2a\u6570\u5b57\u4e0d\u8d85\u8fc7$100$\u3002\n### \u8f93\u51fa\u683c\u5f0f\n\u8f93\u51fa$3$\u884c\u3002\u7b2c\u4e00\u884c\uff0c\u4e3a\u6dfb\u52a0\u62ec\u53f7\u7684\u65b9\u6cd5\u3002\u7b2c\u4e8c\u884c\uff0c\u4e3a\u6700\u7ec8\u7684\u4e2d\u95f4\u548c\u4e4b\u548c\u3002\u7b2c\u4e09\u884c\uff0c\u4e3a$n-1$\u4e2a\u4e2d\u95f4\u548c\uff0c\u6309\u7167\u4ece\u91cc\u5230\u5916\uff0c\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u8f93\u51fa\u3002\n## \u89e3\u6790\n\u5f88\u660e\u663e\uff0c\u6b64\u9898\u662f\u4e00\u9053\u533a\u95f4dp\u3002~~\uff08\u6709\u4e24\u4e2a\u70b9\u591a\u89e3\uff0c\u6570\u636e\u8fc7\u4e8e\u6bd2\u7624\uff0c\u5bb3\u6211\u8c03\u4e86\u597d\u4e45\uff0c\u8bf7\u6c42\u5f00\u542fSPJ @chen_zhe\uff09~~\n\n\u5b9a\u4e49\u72b6\u6001$f[i][j]$\u8868\u793a\u533a\u95f4$[i,j]$\u7684\u6700\u5c0f\u7684\u4e2d\u95f4\u548c\u4e4b\u548c\u3002\u533a\u95f4dp\u7684\u72b6\u6001\u8f6c\u79fb\u662f\u6309\u7167\u533a\u95f4\u957f\u5ea6\u4ece\u5c0f\u5230\u5927\u8fdb\u884c\uff0c\u56e0\u6b64$[i,j]$\u5fc5\u7136\u7531\u66f4\u5c0f\u7684\u533a\u95f4\u8f6c\u79fb\u800c\u6765\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u8f6c\u79fb\u65f6\u66f4\u65b9\u4fbf\u8ba1\u7b97\u4e2d\u95f4\u548c\uff0c\u6211\u4eec\u4f7f\u7528\u524d\u7f00\u548c$s[i]$\u6765\u5b58\u50a8$\\sum\\limits_{k=1}^ia_k$\u3002\n\n\u8003\u8651$k\\in[i,j-1]$\u4e2d\u7684\u4efb\u610f\u65ad\u70b9$k$\uff0c\u53ef\u5c06\u533a\u95f4\u5206\u6210\u4e24\u4e2a\u90e8\u5206$[i,k]$\u548c$[k+1,j]$\uff0c\u90a3\u4e48\u6709\n$$f[i][j]=\\min_{k\\in[i,j-1]}\\{f[i][k]+f[k+1][j]+s[j]-s[i-1]\\}$$\n\u5373\u533a\u95f4$[i,k]$\u4e0e\u533a\u95f4$[k+1,j]$\u7684\u6700\u5c0f\u4e2d\u95f4\u548c\u4e4b\u548c\u76f8\u52a0\uff0c\u518d\u52a0\u4e0a\u5f53\u524d\u5408\u5e76\u5f97\u5230\u7684\u4e2d\u95f4\u548c\u3002\u4e0a\u8ff0\u5373\u4e3a\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u3002\n\n\u5f53\u7136\u672c\u9898\u8fd8\u9700\u6ce8\u610f\u6700\u540e\u7684\u8f93\u51fa\uff1a\u6211\u4eec\u7528$h[i][j]$\u6765\u5b58\u50a8\u533a\u95f4$[i,j]$\u7684\u65ad\u70b9\uff0c\u6bcf\u4e00\u4e2a\u533a\u95f4\u5206\u6210\u4e24\u6bb5\uff0c\u9012\u5f52\u8f93\u51fa\u5373\u53ef\u3002\n\n\u5176\u4f59\u8be6\u89c1\u4ee3\u7801\u3002\n## Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint f[21][21],s[21],h[21][21];\n\nvoid print1(int l,int r)\t\t\t// \u8f93\u51fa\u6dfb\u52a0\u62ec\u53f7\u65b9\u6cd5\n{\n\tif(l==r){\t\t\t\t\t\t// \u533a\u95f4\u53ea\u6709\u4e00\u4e2a\u6570\uff0c\u8f93\u51fa\u5e76\u56de\u6eaf\n\t\tcout<<s[l]-s[l-1];\n\t\treturn;\n\t}\n\tcout<<'(';\n\tprint1(l,h[l][r]);\t\t\t\t// \u8f93\u51fa\u5de6\u534a\u6bb5\n\tcout<<'+';\n\tprint1(h[l][r]+1,r);\t\t\t// \u8f93\u51fa\u53f3\u534a\u6bb5\n\tcout<<')';\n}\n\nvoid print2(int l,int r)\t\t\t// \u8f93\u51fa\u4e2d\u95f4\u548c\n{\n\tif(l==r)return;\t\t\t\t\t// \u533a\u95f4\u53ea\u6709\u4e00\u4e2a\u6570\uff0c\u4e0d\u5b58\u5728\u4e2d\u95f4\u548c\uff0c\u56de\u6eaf\n\tprint2(l,h[l][r]);\t\t\t\t// \u8f93\u51fa\u5de6\u534a\u6bb5\n\tprint2(h[l][r]+1,r);\t\t\t// \u8f93\u51fa\u53f3\u534a\u6bb5\n\tcout<<s[r]-s[l-1]<<' ';\t\t\t// \u8f93\u51fa\u5f53\u524d\u533a\u95f4\u4e2d\u95f4\u548c\n}\n\nint main()\n{\n\tint n,i,j,l,a;\n\tcin>>n;\n\tmemset(f,0x3f,sizeof(f));\n\tfor(i=1;i<=n;i++){\n\t\tcin>>a;\n\t\tf[i][i]=0;\t\t\t\t\t// \u521d\u59cb\u5316\u53ea\u6709\u4e00\u4e2a\u6570\u7684\u533a\u95f4\u6700\u5c0f\u7684\u4e2d\u95f4\u548c\u4e4b\u548c\u4e3a0\n\t\ts[i]=s[i-1]+a;\t\t\t\t// \u524d\u7f00\u548c\n\t}\n\tfor(l=2;l<=n;l++)\t\t\t\t// \u7b2c\u4e00\u5c42\u679a\u4e3e\u533a\u95f4\u957f\u5ea6\uff0c\u4ece2~n\n\t\tfor(i=1;i<=n-l+1;i++)\t\t// \u7b2c\u4e8c\u5c42\u679a\u4e3e\u533a\u95f4\u5de6\u7aef\u70b9\n\t\t\tfor(j=i;j<i+l-1;j++)\t// \u7b2c\u4e09\u5c42\u679a\u4e3e\u65ad\u70b9\n\t\t\t\tif(f[i][j]+f[j+1][i+l-1]+s[i+l-1]-s[i-1]<=f[i][i+l-1]){ // \u6bd2\u7624\u6570\u636e\uff01\u5fc5\u987b\u5199\u6210<=\u624d\u80fd\u8fc7\uff0c<\u8fc7\u4e0d\u4e86\n\t\t\t\t\tf[i][i+l-1]=f[i][j]+f[j+1][i+l-1]+s[i+l-1]-s[i-1];\t// \u66f4\u65b0f[i][j]\n\t\t\t\t\th[i][i+l-1]=j;\t// \u50a8\u5b58\u65ad\u70b9\n\t\t\t\t}\n\tprint1(1,n);\n\tcout<<'\\n'<<f[1][n]<<'\\n';\n\tprint2(1,n);\n\treturn 0;\n}\n```",
        "postTime": 1604509195,
        "uid": 50908,
        "name": "\u674e\u5927\u6055",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P2308\u3010\u6dfb\u52a0\u62ec\u53f7\u3011"
    },
    {
        "content": "\u697c\u4e0b\u9898\u89e3\u90fd\u662f\u9012\u5f52\u8f93\u51fa\uff0c\u901a\u8fc7\u5b66\u957f\u7684\u601d\u8def\uff0c\u6211\u6253\u51fa\u4e00\u4e2a\u8be1\u5f02\u7684\u601d\u8def\uff0c\u91cd\u70b9\u601d\u8003\u3002\n\n\u672c\u9898\u6709\u4e09\u95ee\uff0c\u9996\u5148\u7b2c\u4e8c\u95ee\u6700\u7b80\u5355\uff0c\u662f\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u77f3\u5b50\u5408\u5e76\u7684\u533a\u95f4dp\uff0c\u4e5f\u6700\u7b80\u5355\u3002\n\n\u7b2c\u4e00\u95ee\u662f\u4e00\u4e2a\u8f93\u51fa\u4f60\u6dfb\u52a0\u7684\u62ec\u53f7\uff0c\u8fd9\u91cc\u5f00\u51fa\u4e00\u4e2a\u4e8c\u7ef4\u5b57\u7b26\u4e32\u6570\u7ec4\uff0c\u5185\u90e8\u5c31\u662f\u4e09\u7ef4\u7684\u4e86\uff0c\u5b57\u7b26\u6570\u7ec4\u8fdb\u884c\u521d\u59cb\u5316\u6bcf\u4e2aff[i][i]\u90fd\u53d8\u6210\u5f53\u524d\u7684\u5bf9\u5e94\u7684\u5b57\u7b26\uff0c\u8ddf\u7740fs=\u6570\u7ec4\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\u5373\u53ef\u6700\u540eff[1][n]\u5373\u4e3a\u7b54\u6848\u3002\n\n\u7b2c\u4e09\u95ee\u7684\u8bdd\u662f\u4e00\u4e2a\u62ec\u53f7\u4e4b\u95f4\u7684\u6c42\u89e3\uff0c\u7b2c\u4e8c\u95ee\u90fd\u6c42\u51fa\u6765\u4e86\u90a3\u8fd9\u95ee\u4e5f\u4e0d\u662f\u4ec0\u4e48\u5927\u95ee\u9898\uff0c\u76f4\u63a5\u7528\u6808\u6765\u6c42\u89e3\u5373\u53ef\u3002\n\u4ee3\u7801~\uff1a\n\n\t#include<iostream>\n\t#include<cstdio>\n\t#include<cmath>\n\t#include<ctime>\n\t#include<iomanip>\n\t#include<queue>\n\t#include<vector>\n\t#include<stack>\n\t#include<map>\n\t#include<algorithm>\n\t#include<cstring>\n\t#include<string>\n    using namespace std;\n\t\n    inline int read()\n\t{\n    int x=0,f=1;char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n    return x*f;\n\t}\n\tint a[400];\n\tint f[30][30];\n\tint u[1002];\n\tstring b[30][30];\n\tchar ch[1000],p=0;\n\tint n;\n\tint q[5002],h=0,t=0;\n\tint main()\n\t{\n    n=read();\n    for(int i=1;i<=n;i++)\n    a[i]=read(),u[i]=a[i],a[i]=a[i]+a[i-1];\n    memset(f,10,sizeof(f));\n    for(int i=1;i<=n;i++)//\u521d\u59cb\u5316\n    {\t\n        f[i][i]=0;\n        memset(ch,0,sizeof(ch));p=0;\n        while(u[i]>0)\n        {\n            ch[++p]=u[i]%10+48;\n            u[i]=u[i]/10;\n        }\n        for(int j=p;j>=1;j--)\n        {\n            b[i][i]+=ch[j];\n        }\n    }\n    for(int p=2;p<=n;p++)//\u5e38\u89c4\u533a\u95f4dp\n    {\n        for(int i=1;i<=n-p+1;i++)\n        {\n            int j=i+p-1;\n            for(int k=i;k<j;k++)\n            {\n                if(f[i][j]>=f[i][k]+f[k+1][j]+a[j]-a[i-1])\n                {\n                    f[i][j]=f[i][k]+f[k+1][j]+a[j]-a[i-1];\n                    b[i][j]='('+b[i][k]+'+'+b[k+1][j]+')';\n                }\n            }\n        }\n    }\n    cout<<b[1][n]<<endl;\n    printf(\"%d\\n\",f[1][n]);\n    for(int i=0;i<b[1][n].size();i++)//\u6808\u6c42\u89e3\n    {\n        if(b[1][n][i]!=')'&&b[1][n][i]!='('&&b[1][n][i]!='+')\n        {\n            ++t;\n            while(b[1][n][i]!=')'&&b[1][n][i]!='('&&b[1][n][i]!='+')\n            {\n                q[t]=q[t]*10+b[1][n][i]-48;\n                i++;\n            }\n        }\n        if(b[1][n][i]==')')\n        {\n            int tn=q[t];q[t]=0;--t;\n            int tmp=q[t];q[t]=0;--t;\n            q[++t]=tn+tmp;\n            printf(\"%d \",tn+tmp);\n        }\n    }\n   \treturn 0;\n\t}",
        "postTime": 1541143621,
        "uid": 59688,
        "name": "chdy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2308 \u3010\u6dfb\u52a0\u62ec\u53f7\u3011"
    },
    {
        "content": "### \u9898\u610f\u7b80\u8ff0\n\n\u5176\u5b9e\u5c31\u662f\u6bcf\u6b21\u5c06\u76f8\u90bb\u4e24\u4e2a\u6570\u66ff\u6362\u4e3a\u5b83\u4eec\u7684\u548c\uff0c\u4ee3\u4ef7\u4e3a\u4e24\u4e2a\u6570\u7684\u548c\uff0c\u76f4\u5230\u53ea\u5269\u4e00\u4e2a\u6570\uff0c\u6c42\u6700\u5c0f\u4ee3\u4ef7\u548c\u4ee5\u53ca\u64cd\u4f5c\u65b9\u5f0f\u3002\n\n### \u601d\u7ef4\u8def\u5f84\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u6c42\u51fa\u6700\u5c0f\u4ee3\u4ef7\uff0c\u5f88\u660e\u663e\u53ef\u4ee5\u7528 dp \u6765\u505a\u3002\u5b9a\u4e49 $f_{i,j}$ \u4e3a\u5408\u5e76\u7b2c $i$ \u4e2a\u6570\u548c\u7b2c $j$ \u4e2a\u6570\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c$s_i$ \u8868\u793a\u524d $i$ \u4e2a\u6570\u7684\u548c\uff0c\u6bcf\u6b21\u4ece $i$ \u5230$j-1$ \u679a\u4e3e $k$\uff0c\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\u5f0f\u5982\u4e0b\u3002\n\n$$\nf_{i,j}=\\min(f_{i,j},f_{i,k}+f_{k+1,j}+s_j-s_{i-1})\n$$\n\n\u5982\u6b64\u5f97\u5230\u6700\u5c0f\u4ee3\u4ef7\u540e\uff0c\u518d\u5bfb\u627e\u83b7\u5f97\u8be5\u7b54\u6848\u7684\u8fc7\u7a0b\u3002\n\n\u4e3b\u8981\u601d\u8def\u5c31\u662f\u628a\u8f6c\u79fb\u65b9\u7a0b\u5f0f\u9006\u8fc7\u6765\u8003\u8651\u3002\u6211\u4eec\u4ee5\u533a\u95f4 $i$ \u5230 $j$ \u4e3a\u4f8b\u3002\n\n1. \u6211\u4eec\u679a\u4e3e\u5206\u5272\u70b9 $k$\uff0c\u83b7\u5f97\u533a\u95f4 $i$ \u5230 $k$ \u548c\u533a\u95f4 $k+1$ \u5230 $j$\u3002\n2. \u627e\u5230\u8fd9\u4e24\u4e2a\u533a\u95f4\u7684\u7b54\u6848\uff0c\u5373 $f_{i,k}$ \u548c $f_{k+1,j}$\u3002\n3. \u82e5\u53ef\u4ee5\u51d1\u6210\u539f\u533a\u95f4\u7b54\u6848\uff0c\u5373 $f_{i,j}=f_{i,k}+f_{k+1,j}+s_j-s_{i-1}$\uff0c\u6df1\u5165 dfs \u533a\u95f4 $i$ \u5230 $k$ \u548c\u533a\u95f4 $k+1$ \u5230 $j$\u3002\n4. \u82e5\u65e0\u6cd5\u51d1\u6210\u539f\u533a\u95f4\u7b54\u6848\uff0c\u8fd4\u56de\u7b2c\u4e00\u6b65\uff0c\u7ee7\u7eed\u679a\u4e3e $k$\u3002\n\n\u5982\u6b64\u4fbf\u53ef\u4ee5\u5f97\u5230\u6700\u5c0f\u4ee3\u4ef7\u7684\u64cd\u4f5c\u65b9\u5f0f\uff0c\u5373\u5728\u9898\u76ee\u4e2d\u7684\u52a0\u62ec\u53f7\u7684\u65b9\u5f0f\u3002\n\n### \u5177\u4f53\u5b9e\u73b0\n\ndp \u6b65\u9aa4\u5373\u4e09\u4e2a\u5faa\u73af\uff0c\u8bfb\u8005\u53ef\u4ee5\u81ea\u884c\u67e5\u770b\u540e\u7eed\u7684 AC \u4ee3\u7801\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u800c dfs \u7ec6\u8282\u8f83\u591a\uff0c\u9700\u8981\u6ce8\u610f\u3002\n\ndfs \u4e3a $\\text{bool}$ \u7c7b\u578b\u7684\u8fd4\u56de\u503c\uff0c\u8868\u793a\u662f\u5426\u53ef\u4ee5\u5f97\u51fa\u4e00\u79cd\u65b9\u6848\uff0c\u5176\u4e2d\u4f20\u5165\u4e24\u4e2a\u5143\u7d20 $l$ \u548c $r$\uff0c\u5206\u522b\u8868\u793a\u533a\u95f4\u7684\u5de6\u7aef\u70b9\u548c\u53f3\u7aef\u70b9\u3002\n\n\u9996\u5148\u6211\u4eec\u5047\u8bbe\u533a\u95f4 $l$ \u548c $r$ \u662f\u7b54\u6848\u4e2d\u7684\u4e00\u4e2a\u6b65\u9aa4\uff0c\u8bb0\u5f55\u7b54\u6848\u3002\n\n```cpp\nans[++cnt]=a[r]-a[l-1];\nnumkz[l]++;\nnumky[r]++;\nif(cnt==n-1){\n\treturn true;\n}\n```\n\n\u5176\u4e2d\u6570\u7ec4 $ans_i$ \u8868\u793a\u5012\u6570\u7b2c $i$ \u4e2a\u7b54\u6848\uff0c$numkz_i$ \u8868\u793a\u7b2c $i$ \u4e2a\u6570\u524d\u7684\u5de6\u62ec\u53f7\u4e2a\u6570\uff0c$numky_i$ \u8868\u793a\u7b2c $i$ \u4e2a\u6570\u540e\u7684\u53f3\u62ec\u53f7\u4e2a\u6570\u3002\n\n\u968f\u540e\u5224\u65ad\uff0c\u82e5\u7b54\u6848\u6570\u8fbe\u5230 $n-1$ \uff0c\u610f\u5473\u7740\u5df2\u7ecf\u5408\u5e76 $n-1$ \u6b21\uff0c\u6574\u4e2a\u8fc7\u7a0b\u5df2\u5b8c\u6210\uff0c\u64cd\u4f5c\u65b9\u5f0f\u5df2\u7ecf\u627e\u5230\uff0c\u8fd4\u56de\u3002\n\n\u63a5\u7740\u6211\u4eec\u5f00\u59cb\u679a\u4e3e\u4e2d\u95f4\u5206\u5272\u70b9\uff0c\u5e76\u6df1\u5165 dfs\u3002\n\n```cpp\nfor(ll i=l;i<r;i++){\n\tif(f[l][i]+f[i+1][r]+a[r]-a[l-1]==f[l][r]){\n\t\tif(find_ans(i+1,r)&&find_ans(l,i)){\n\t\t\treturn true;\n\t\t}\n\t}\n}\n```\n\n\u5982\u679c\u627e\u904d\u6240\u6709\u5206\u5272\u70b9\u90fd\u65e0\u6cd5\u627e\u5230\u4e00\u4e2a\u6b63\u786e\u64cd\u4f5c\uff0c\u8bf4\u660e\u4e4b\u524d\u7684\u5206\u5272\u70b9\u7684\u8bef\uff0c\u628a\u8fd9\u4e00\u90e8\u5206\u8bb0\u5f55\u7684\u7b54\u6848\u5220\u53bb\u518d\u8fd4\u56de\u3002\n\n```cpp\ncnt--;\nnumkz[l]--;\nnumky[r]--;\n```\n\n\u6700\u540e\u8f93\u51fa\u65f6\u6309\u683c\u5f0f\u8f93\u51fa\u5373\u53ef\uff0c\u6ce8\u610f ans \u6570\u7ec4\u8981\u5012\u5e8f\u8f93\u51fa\u3002\n\n```cpp\nfor(ll i=1;i<=n;i++){\n\tfor(ll j=1;j<=numkz[i];j++) cout<<\"(\";\n\tcout<<a[i]-a[i-1];\n\tfor(ll j=1;j<=numky[i];j++) cout<<\")\";\n\tif(i!=n) cout<<\"+\";\n}\ncout<<endl;\ncout<<f[1][n]<<endl;\nfor(ll i=cnt;i>=1;i--) cout<<ans[i]<<\" \";\n```\n\n### AC \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll N=30;\nconst ll INF=1e9+9;\nll n,a[N],f[N][N],ans[N],cnt,numkz[N],numky[N];\nbool ok=false;\n\nvoid input(){\n\tcin>>n;\n\tfor(ll i=1;i<=n;i++){\n\t\tfor(ll j=1;j<=n;j++){\n\t\t\tf[i][j]=INF;\n\t\t}\n\t}\n\tfor(ll i=1;i<=n;i++){\n\t\tcin>>f[i][i];\n\t\ta[i]=a[i-1]+f[i][i];\n\t\tf[i][i]=0;\n\t}\n}\n\nbool find_ans(ll l,ll r){\n\tif(l==r) return true;\n\tans[++cnt]=a[r]-a[l-1];\n\tnumkz[l]++;\n\tnumky[r]++;\n//\tcout<<l<<\" \"<<r<<\" \"<<cnt<<\"\\n\";\n\tif(cnt==n-1){\n\t\treturn true;\n\t}\n\tfor(ll i=l;i<r;i++){\n\t\tif(f[l][i]+f[i+1][r]+a[r]-a[l-1]==f[l][r]){\n\t\t\tif(find_ans(i+1,r)&&find_ans(l,i)){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tcnt--;\n\tnumkz[l]--;\n\tnumky[r]--;\n}\n\nvoid solve(){\n\tfor(ll i=2;i<=n;i++){\n\t\tfor(ll j=1;j<=n-i+1;j++){\n\t\t\tfor(ll k=j;k<=j+i-2;k++){\n\t\t\t\tf[j][j+i-1]=min(f[j][j+i-1],f[j][k]+f[k+1][j+i-1]+a[j+i-1]-a[j-1]);\n\t\t\t}\n//\t\t\tcout<<f[j][j+i-1]<<\"\\t\";\n\t\t} \n//\t\tcout<<endl;\n\t}\n\tfind_ans(1,n);\n\tfor(ll i=1;i<=n;i++){\n\t\tfor(ll j=1;j<=numkz[i];j++) cout<<\"(\";\n\t\tcout<<a[i]-a[i-1];\n\t\tfor(ll j=1;j<=numky[i];j++) cout<<\")\";\n\t\tif(i!=n) cout<<\"+\";\n\t}\n\tcout<<endl;\n\tcout<<f[1][n]<<endl;\n\tfor(ll i=cnt;i>=1;i--) cout<<ans[i]<<\" \";\n}\n\nint main(){\n\tinput();\n\tsolve();\n\treturn 0;\n}\n```",
        "postTime": 1661847750,
        "uid": 305296,
        "name": "\u4e91\u96f7\u5fc3\u67e0\u6aac\u542c",
        "ccfLevel": 0,
        "title": "P2308\u9898\u89e3"
    },
    {
        "content": "\u770b\u5404\u4f4ddalao\u90fd\u548c\u6211\u7684\u65b9\u6cd5\u6709\u70b9\u4e0d\u4e00\u6837\uff0c\u4e8e\u662f\u6765\u5199\u4e00\u7bc7\u9898\u89e3 ~ \n# \u9898\u610f\u6982\u8981\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$ \uff0c\u6bcf\u6b21\u5bf9\u5176\u4e2d\u76f8\u90bb\u4e24\u4e2a\u6570\u6c42\u548c,\u628a\u5b83\u4eec\u7528\u62ec\u53f7\u62ec\u8d77\u6765\u5e76\u6dfb\u52a0\u53f7\uff0c **\u5f97\u5230\u7b49\u4e8e\u5b83\u4eec\u548c\u7684\u5206\u6570** \u3002\u73b0\u5728\u6c42 **\u6700\u5c0f\u5206\u6570** \u4e0e\u6b64\u65f6\u7684\u542b\u62ec\u53f7\u5e8f\u5217\u3002\n# \u89e3\u6cd5\ndp\u96be\u5ea6\uff1a\u666e\u53ca/\u63d0\u9ad8-  \n\u8f93\u51fa\u96be\u5ea6\uff1a ~~NOI/NOI+/CTSC~~ \n## \u533a\u95f4dp\n\u672c\u9898\u4e0e [P1775 \u77f3\u5b50\u5408\u5e76\uff08\u5f31\u5316\u7248\uff09](https://www.luogu.com.cn/problem/P1775) \u7c7b\u4f3c\uff0cdp\u90e8\u5206\u53ef\u4ee5\u4f7f\u7528\u533a\u95f4dp\u3002  \n### \u72b6\u6001\u5b9a\u4e49\n $dp_{i,j}$ \u8868\u793a\u533a\u95f4 $(i,j)$ \u5408\u6210\u4e00\u6bb5\u7684\u6700\u5c11\u5f97\u5206\uff08\u4e2d\u95f4\u548c\uff09\u3002\n### \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n\u679a\u4e3e\u4e00\u4e2a\u65ad\u70b9 $k$ ,\u533a\u95f4 $(i,j)$ \u7684\u6700\u5c11\u5f97\u5206\u5373\u4e3a\u533a\u95f4 $(i,k)$ \u7684\u6700\u5c11\u5f97\u5206\u52a0 $(k+1,j)$ \u7684\u6700\u5c11\u5f97\u5206\uff0c\u518d\u52a0\u4e0a $(i,j)$ \u90e8\u5206\u7684\u603b\u548c\uff0c\u5373\u5c06\u524d\u540e\u4e24\u90e8\u5206\u5408\u5e76\u7684\u5f97\u5206\u3002\u8ba1\u7b97\u603b\u548c\u4f7f\u7528\u524d\u7f00\u548c\u4f18\u5316\u3002\n\u65b9\u7a0b\uff1a $dp_{i,j}=\\min(dp_{i,j},dp_{i,k}+dp_{k+1,j}+sum_j-sum_{i-1}(i\\leq k<j)$  \n## dfs\u8f93\u51fa\n1. \u62ec\u53f7\u5e8f\u5217\u7528\u9012\u5f52\u51fd\u6570dfs\u5b9e\u73b0\u3002\u4f9d\u6b21\u8f93\u51fa\u5de6\u62ec\u53f7\uff0c\u5de6\u4fa7\u62ec\u53f7\u5e8f\u5217\uff0c\u52a0\u53f7\uff0c\u53f3\u4fa7\u62ec\u53f7\u5e8f\u5217\uff0c\u53f3\u62ec\u53f7 \u3002\n\n1. \u8f93\u51fa\u4e2d\u95f4\u548c\u5219\u8981\u5728dp\u65f6\u8bb0\u5f55\u6839\u8282\u70b9\uff0c\u7528 $fh_{i,j}$ \u8868\u793a $(i,j)$ \u533a\u95f4\u7684\u5bf9\u5e94\u6839\u8282\u70b9\u7f16\u53f7\u3002\u7528dfs_\u51fd\u6570\u5b9e\u73b0\u3002\n\n## \u9644\u4e0a\u4ee3\u7801:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,a[105],sum[105],dp[105][105],fh[105][105];\nvoid dfs(int l,int r){\n\tif(l==r){\n\t  cout<<a[l];\n\t  return;\n  }//\u957f\u5ea6\u4e3a1\u7684\u533a\u95f4\u4e0d\u7528\u8fd0\u7b97\u7b26\n\tcout<<'(';\n\tdfs(l,fh[l][r]);\n\tcout<<'+';\n\tdfs(fh[l][r]+1,r);\n\tcout<<')';\n}\nvoid dfs_(int l,int r){\n\tif(l==r){\n\t  return;\n\t}\n  dfs_(l,fh[l][r]);\n  dfs_(fh[l][r]+1,r);\n  cout<<sum[r]-sum[l-1]<<\" \";\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i];\n\t\tsum[i]=sum[i-1]+a[i];\n\t}\n\tfor(int i=1;i<=n;i++) dp[i][i]=0;\n\tfor(int len=2;len<=n;len++){\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tint j=i+len-1;\n\t\t\tif(j>n) break;\n\t\t\tdp[i][j]=0x3f3f3f3f;\n\t\t\tfor(int k=i;k<j;k++){\n          if(dp[i][j]>=dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1]){\n             dp[i][j]=dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1];\n             fh[i][j]=k;\n\t\t\t\t }\n\t\t\t}\n\t\t}\n\t}\n\tdfs(1,n);\n\tcout<<endl<<dp[1][n]<<endl;\n\tdfs_(1,n);\n\treturn 0;\n}\n```",
        "postTime": 1644749790,
        "uid": 265204,
        "name": "CWzwz",
        "ccfLevel": 5,
        "title": "P2308 \u6dfb\u52a0\u62ec\u53f7 \u9898\u89e3"
    },
    {
        "content": "### Describe:\n\u6709 $n$ \u4e2a\u6570\u5b57\uff0c\u5408\u5e76\u4e24\u4e2a\u6570\u5b57\u7684\u4ee3\u4ef7\u4e3a $a_i+a_j$\u3002\u95ee\u5408\u5e76\u540e\u7684\u5e8f\u5217\uff0c\u6700\u5c0f\u7684\u5408\u5e76\u4ee3\u4ef7\uff0c\u4e2d\u95f4\u5408\u5e76\u987a\u5e8f\u4ea7\u751f\u7684\u4ee3\u4ef7\u3002\n### Solution:\n\u8fd9\u9053\u9898\u7b2c $2$ \u95ee\u5341\u5206\u53cb\u597d\uff0c\u7b80\u5355\u7684\u533a\u95f4dp\uff0c\u6bd4[P1880 [NOI1995]\u77f3\u5b50\u5408\u5e76](https://www.luogu.com.cn/problem/P1880)\u8fd8\u7b80\u5355\u4e00\u4e9b\u3002\n\u8bbe $f_{i,j}$ \u8868\u793a $i$ \u5230 $j$ \u5408\u5e76\u540e\u7684\u6700\u5927\u5f97\u5206\uff0c\u5219\u53ef\u4ee5\u8f6c\u79fb(\u5176\u4e2d $a$ \u8868\u793a\u524d\u7f00\u548c\u6570\u7ec4)\uff1a\n$$f_{i,j}=\\min(f_{i,k}+f_{k+1,j}+a_j-a_{i-1},f_{i,j})({\\rm{i}} \\le k < j)$$\n\u90a3\u4e48\u7b2c $1$ \u95ee\u600e\u4e48\u505a\u5462\uff1f\n\u53ea\u9700\u8981\u5728dp\u65f6\u8bb0\u5f55\u4e00\u4e0b\u5f53\u524d\u662f\u4ece\u90a3\u91cc\u5408\u5e76\u7684\u5c31\u884c\u4e86\u3002\n``` cpp\nif (f[i][k] + f[k + 1][j] + a[j] - a[i - 1] <= f[i][j])\n          f[i][j] = f[i][k] + f[k + 1][j] + a[j] - a[i - 1], s[i][j] = k;\n```\n\u8f93\u51fa\u65f6\u76f8\u5f53\u4e8e\u4e2d\u5e8f\u904d\u5386\u4e00\u68f5\u6811\uff0cDFS\u89e3\u51b3\uff0c\u5728DFS\u8fc7\u7a0b\u4e2d\u8bb0\u5f55\u4ea7\u751f\u7684\u4e2d\u95f4\u503c\uff0c\u518d\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002\n``` cpp\nint n, f[MN][MN], a[MN], s[MN][MN], ans[MN], cnt;\nvoid print(int i, int j) {\n  if (i == j) {\n    printf(\"%d\", a[i] - a[i - 1]);\n    return;\n  }\n  printf(\"(\");\n  print(i, s[i][j]);\n  printf(\"+\");\n  print(s[i][j] + 1, j);\n  printf(\")\"), ans[cnt++] = a[j] - a[i - 1];\n}\n```\n### Code:\n``` cpp\n// P2308 \u6dfb\u52a0\u62ec\u53f7\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#define MN 25\nusing namespace std;\ninline int read() {\n  int x = 0, f = 1;\n  char ch = getchar();\n  while (ch < '0' || ch > '9') {\n    if (ch == '-') f = -1;\n    ch = getchar();\n  }\n  while (ch >= '0' && ch <= '9')\n    x = (x << 1) + (x << 3) + (ch ^ 48), ch = getchar();\n  return x * f;\n}\nint n, f[MN][MN], a[MN], s[MN][MN], ans[MN], cnt;\nvoid print(int i, int j) {\n  if (i == j) {\n    printf(\"%d\", a[i] - a[i - 1]);\n    return;\n  }\n  printf(\"(\");\n  print(i, s[i][j]);\n  printf(\"+\");\n  print(s[i][j] + 1, j);\n  printf(\")\"), ans[cnt++] = a[j] - a[i - 1];\n}\nint main() {\n  n = read(), memset(f, 0x3f, sizeof(f));\n  for (int i = 1; i <= n; i++) a[i] = read() + a[i - 1], f[i][i] = 0;\n  for (int l = 2; l <= n; l++)\n    for (int i = 1, j = i + l - 1; j <= n; i++, j++) {\n      for (int k = i; k < j; k++)\n        if (f[i][k] + f[k + 1][j] + a[j] - a[i - 1] <= f[i][j])\n          f[i][j] = f[i][k] + f[k + 1][j] + a[j] - a[i - 1], s[i][j] = k;\n    }\n  print(1, n);\n  printf(\"\\n%d\\n\", f[1][n]);\n  for (int i = 0; i < cnt; i++) printf(\"%d \", ans[i]);\n  return 0;\n}\n```",
        "postTime": 1588326590,
        "uid": 289573,
        "name": "wtxy2006",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2308 \u3010\u6dfb\u52a0\u62ec\u53f7\u3011"
    },
    {
        "content": "\u672c\u9898\u96be\u5ea6\uff1a\n\n\u7b2c2\u95ee\uff1a\u666e\u53ca+/\u63d0\u9ad8\n\n~~\u7b2c1\u30013\u95ee\uff1aIOI+~~\n\n\u9996\u5148\u7b2c2\u95ee\u5f88\u50cf\u77f3\u5b50\u5408\u5e76\u90a3\u9898\uff0c\u7528\u533a\u95f4dp\u5c31\u597d\uff0c\u7136\u540e\u4e00\u987f\u533a\u95f4dp\u7684\u5957\u8def\u5373\u53ef\uff1a\u679a\u4e3e\u533a\u95f4\u957f\u5ea6\uff0c\u679a\u4e3e\u533a\u95f4\u5de6\u7aef\u70b9\uff0c\u6c42\u51fa\u533a\u95f4\u53f3\u7aef\u70b9\uff0c\u679a\u4e3e\u65ad\u70b9\u3002\n\n\u4ee4$dp[i][j]$\u4e3a\u533a\u95f4$[i,j]$\u5408\u5e76\u540e\u80fd\u83b7\u5f97\u7684\u6700\u5c0f\u548c\uff0c\u5219\uff1a\n\n$$dp[i][j]=min(dp[i][j],dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1)$$\n\n\u5176\u4e2d$k$\u662f\u533a\u95f4$[i,j]$\u4e2d\u7684\u4e00\u4e2a\u65ad\u70b9\uff0c$sum[j]-sum[i-1]$\u4e3a\u533a\u95f4$[i,j]$\u548c\u3002\n\n\u7b54\u6848\u4e3a$[1,n]$\u3002\n\n**\u5982\u4f55\u8f93\u51fa\u62ec\u53f7\u5462\uff1f**\n\n\u7528$la$\u4e0e$ra$\u6570\u7ec4\u8bb0\u5f55\u4e00\u4e2a\u6570\u5de6\u53f3\u7684\u62ec\u53f7\u6570\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u9012\u5f52\u4e86\u3002\n```cpp\n#include <stdio.h>\n#include <iostream>\n#include <memory.h>\n#define inf 2e9+7\n#define int long long int \nusing namespace std;\nint a[21],n,s,dp[21][21],sum[21],point[21][21];\nint la[21],ra[21],ans[21],cnt;\nvoid dfs(int l,int r)\n{\n\tif(l==r) return;\n\tla[l]++;\n\tra[r]++;\n\tdfs(l,point[l][r]);\n\tdfs(point[l][r]+1,r);\n\tans[++cnt]=sum[r]-sum[l-1];//\u5408\u5e76\u4e00\u6b21\u80fd\u5f97\u5230\u7684\u503c \n}\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\tregister int i,j,k,l;\n\tcin>>n;\n\tmemset(dp,inf,sizeof(dp));\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t\tsum[i]=sum[i-1]+a[i];\n\t\tdp[i][i]=0;\n\t}\n\tfor(l=2;l<=n;l++)\n\t{\n\t\tfor(i=1;i+l-1<=n;i++)\n\t\t{\n\t\t\tj=i+l-1;\n\t\t\tfor(k=i;k<=j;k++)\n\t\t\t{\n\t\t\t\tif(dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1]<=dp[i][j])\n\t\t\t\t{\n\t\t\t\t\tdp[i][j]=dp[i][k]+dp[k+1][j]+sum[j]-sum[i-1];\n\t\t\t\t\tpoint[i][j]=k;//\u533a\u95f4[l,r]\u53d6\u5230\u6700\u4f18\u89e3\u70b9\u7684\u65ad\u70b9 \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tdfs(1,n);\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tfor(j=1;j<=la[i];j++)\n\t\t{\n\t\t\tcout<<'(';\n\t\t}\n\t\tcout<<a[i];\n\t\tfor(j-1;j<=ra[i];j++)\n\t\t{\n\t\t\tcout<<')';\n\t\t}\n\t\tif(i!=n)\n\t\t{\n\t\t\tcout<<'+';\n\t\t}\n\t}cout<<endl;\n\tcout<<dp[1][n]<<endl;\n\tfor(i=1;i<=cnt;i++)\n\t{\n\t\tcout<<ans[i]<<' ';\n\t}cout<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1566745761,
        "uid": 72255,
        "name": "Apro1066",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P2308 \u3010\u6dfb\u52a0\u62ec\u53f7\u3011"
    },
    {
        "content": "```cpp\n//\u672c\u9898\u5148\u4f7f\u7528\u6df1\u5ea6\u641c\u7d22\u4f9d\u6b21\u904d\u5386\uff0c\u5c1d\u8bd5 \u6bcf\u6b21\u904d\u5386\u540e\u7684\u7b54\u6848\uff08\u6df1\u5ea6\u4f18\u5148\uff09\uff0c\u5e76\u8bb0\u5f55\u51fa\u7b54\u6848\u7684\n//\u6700\u5c0f\u503c\u548c\u4ea7\u51fa\u6700\u5c0f\u503c\u7684\u60c5\u51b5\u3002\u6bcf\u6b21\u904d\u5386\u641c\u7d22\u82e5\u5c0f\u4e8e\u6700\u5c0f\u503c\u5219\u66ff\u6362 \n#include<bits/stdc++.h>\n#define Ll long long\nusing namespace std;\nint a[50],h[50],hh[50],f[50][50],g[50][50],sum[51],n,m;\nvoid dfs(int x,int y)\n{\n    if(x==y)return;\n    h[x]++;\n    hh[y]++;\n    dfs(x,g[x][y]);\n    dfs(g[x][y]+1,y);//\u7ed3\u675f\u6a21\u5757 \n}\nvoid DFS(int x,int y)\n{\n    if(x==y)\n        return;\n    DFS(x,g[x][y]);\n    DFS(g[x][y]+1,y);\n    cout<<sum[y]-sum[x-1]<<' ';//\u6df1\u5ea6\u641c\u7d22\u540e\u7684\u8f93\u51fa\u7b54\u6848\u90e8\u5206\uff0c\u6bcf\u6b21\u8f93\u51fa\u7b26\u53f7\u4e0e\u6570\u5b57\u4e4b\u95f4\u7684\u5173\u7cfb \n}\nint main()\n{\n    cin>>n;\n    for(int i=1;i<=n;i++)\n    {\n        cin>>a[i];\n        f[i][i]=0;\n    }//\u8f93\u5165 \n    for(int i=1;i<=n;i++)\n        sum[i]=sum[i-1]+a[i];//\u4e3a\u6df1\u5ea6\u641c\u7d22\u5236\u9020\u51fa\u53ef\u80fd\u7684\u60c5\u51b5 \n    for(int i=n-1;i;i--)\n    for(int j=i+1;j<=n;j++)\n    {\n\t\tf[i][j]=0x3f3f3f3f;\n\t\tfor(int k=i;k<j;k++)\n        if(f[i][k]+f[k+1][j]+sum[j]-sum[i-1]<=f[i][j])\n        {\n    \t\tf[i][j]=f[i][k]+f[k+1][j]+sum[j]-sum[i-1];\n\t\t\tg[i][j]=k;\n\t\t}\n\t}\n    dfs(1,n);\n    for(int i=1;i<=n;i++)\n\t{\n\t\t//\u8f93\u51fa\u6700\u540e\u7b54\u6848 \n        for(int j=1;j<=h[i];j++)\n\t\t\tcout<<'(';\n        cout<<a[i];\n        if(!hh[i]&&i!=n)\n\t\t\tcout<<'+';\n        for(int j=1;j<=hh[i];j++)\n\t\t\tcout<<')';\n        if(hh[i]&&i!=n)\n\t\t\tcout<<'+';\n    }\n    cout<<endl<<f[1][n]<<endl;//\u8f93\u51fa\u6700\u540e\u4e00\u884c\u7684\u6700\u540e\u4e00\u4e2a\u7b54\u6848 \n    DFS(1,n);\n    return 0;\n}\n```",
        "postTime": 1530102067,
        "uid": 55859,
        "name": "Alanalan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2308 \u3010\u6dfb\u52a0\u62ec\u53f7\u3011"
    }
]
[
    {
        "content": "# \u9898\u76ee\n\n[Luogu](https://www.luogu.com.cn/problem/P3217)\n\n[darkbzoj](https://darkbzoj.tk/problem/2338)\n\n# Sol\n\n\u63d0\u4f9b\u4e00\u4e2a\u4e0d\u7528\u9ad8\u7ea7\u8ba1\u7b97\u51e0\u4f55\u6280\u5de7\u7684\u5199\u6cd5\u3002\n\n\u611f\u89c9\u548c[$Atcoder\\ ABC220G$](https://atcoder.jp/contests/abc220/tasks/abc220_g)\u6bd4\u8f83\u76f8\u4f3c\u3002\n\n\u628a\u5168\u90e8\u7684\u76f4\u7ebf\u6c42\u51fa\u6765\u3002\n\n\u8003\u8651\u4e24\u6761\u76f4\u7ebf\u6ee1\u8db3\u4ec0\u4e48\u6761\u4ef6\u624d\u4f1a\u6784\u6210\u4e00\u4e2a\u77e9\u5f62\u7684\u5bf9\u8fb9\uff1a\n\n- \u4e24\u6761\u76f4\u7ebf\u7684\u4e2d\u5782\u7ebf\u5b8c\u5168\u76f8\u540c\n- \u539f\u672c\u7684\u4e24\u6761\u76f4\u7ebf\u4e0d\u91cd\u5408\n- \u4e24\u6761\u76f4\u7ebf\u957f\u5ea6\u76f8\u540c\n\n\u90a3\u5c31\u597d\u529e\u4e86\uff1a\u628a\u6240\u6709\u7684$\\dfrac{n\\cdot(n-1)}{2}$\u6761\u76f4\u7ebf\u6839\u636e\u4e2d\u5782\u7ebf\u6392\u5e8f\uff0c\u540c\u65f6\u8bbe\u76f4\u7ebf\u7684\u4e2d\u70b9\u4e3a\u8fd9\u6761\u76f4\u7ebf\u7684**\u6807\u5fd7\u70b9**\uff0c\u4e24\u6761\u4e2d\u5782\u7ebf\u76f8\u540c\u4e14\u957f\u5ea6\u76f8\u540c\u7684\u76f4\u7ebf\u82e5\u4e2d\u70b9\u4e0d\u540c\u5219\u53ef\u4ee5\u6784\u6210\u77e9\u5f62\u3002\n\n\u5728\u6240\u6709\u4e2d\u5782\u7ebf\u76f8\u540c\u7684\u76f4\u7ebf\u4e2d\uff0c\u627e\u5230\u6807\u5fd7\u70b9\u6a2a\u5750\u6807\u7684\u5dee\u6700\u5927\u7684\u4e24\u6761\u76f4\u7ebf\uff0c\u7b97\u51fa\u9762\u79ef\uff0c\u6700\u540e\u53d6\u6700\u5927\u503c\u3002\n\n\u590d\u6742\u5ea6$O(n^2log_2n)$\u3002\n\n\u5982\u4f55\u6c42\u70b9$(x_i,y_i)$\u548c\u70b9$(x_j,y_j)$\u6240\u6210\u7684\u76f4\u7ebf\u7684\u4e2d\u5782\u7ebf\uff1f\n\n\u70b9$(x_i,y_i)$\u548c\u70b9$(x_j,y_j)$\u6240\u6210\u7684\u76f4\u7ebf\u7684\u659c\u7387\uff1a$k_1=\\dfrac{y_j-y_i}{x_j-x_i}$\n\n\u6240\u4ee5\u4e2d\u5782\u7ebf\u7684\u659c\u7387\u4e3a$k_2=\\dfrac{-1}{k_1}$\n\n\u518d\u6839\u636e\u4e2d\u5782\u7ebf\u7ecf\u8fc7\u4e2d\u70b9$(\\dfrac{x_i+x_j}{2},\\dfrac{y_i+y_j}{2})$\u5373\u53ef\u6c42\u51fa\u622a\u8ddd$b$\u3002\n\n\u8fd8\u6709\u4e00\u4e2a\u7ec6\u8282\uff1a\u82e5\u4e2d\u5782\u7ebf\u5e73\u884c\u4e8e$y$\u8f74\uff0c\u5c31\u628a$k$\u8bbe\u4e3a\u65e0\u7a77\u5927\uff0c$b$\u8bbe\u4e3a$\\dfrac{x_i+y_j}{2}$\u3002\n\n# Code\n\n\u5728[\u8fd9\u91cc](https://www.cnblogs.com/xxbbkk/p/15425202.html)\n\n# \u5b8c\u7ed3\u6492\u82b1\u2740",
        "postTime": 1634631827,
        "uid": 101475,
        "name": "xxbbkk",
        "ccfLevel": 0,
        "title": "\u9898\u89e3[P3217 [HNOI2011]\u6570\u77e9\u5f62]"
    },
    {
        "content": "\u4e25\u683c $O(n^2\\log n)$ \u7684\u505a\u6cd5\u3002\n\n------------\n\n\u73b0\u884c\u7684\u5927\u591a\u6570\u9898\u89e3\u90fd\u662f\u679a\u4e3e\u4e24\u6761\u5bf9\u89d2\u7ebf\u8fdb\u884c\u5904\u7406\u7684\u2014\u2014\u8fd9\u5c31\u5bfc\u81f4\u5fc5\u987b $O(n^{2.5})$ \u5730\u679a\u4e3e\u5b8c\u5168\u90e8\u7684\u5408\u6cd5\u77e9\u5f62\u8fdb\u884c\u5224\u65ad\u3002\u4f46\u5982\u679c\u6211\u4eec\u8f6c\u6362\u601d\u8def\uff0c\u4e0d\u679a\u4e3e\u5bf9\u89d2\u7ebf\uff0c\u800c\u679a\u4e3e\u77e9\u5f62\u7684\u4e00\u5bf9\u5e73\u884c\u7684\u8fb9\u5462\uff1f\n\n\u8003\u8651\u4e24\u6761\u7ebf\u6bb5\u5982\u4f55\u624d\u662f\u4e00\u5bf9\u5408\u6cd5\u7684\u77e9\u5f62\u8fb9\u3002\u5b83\u4eec\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u4e09\u70b9\uff1a\n\n1. \u659c\u7387\u76f8\u7b49\u3002\u8fd9\u4e2a\u53ef\u4ee5\u901a\u8fc7\u53c9\u79ef\u7b80\u5355\u8ba1\u7b97\uff08\u7ebf\u6bb5\u6240\u4ee3\u8868\u7684\u5411\u91cf\u53c9\u79ef\u4e3a $0$ \u5219\u659c\u7387\u76f8\u7b49\uff09\u3002\n\n2. \u957f\u5ea6\u76f8\u7b49\u3002\u8fd9\u4e2a\u4e5f\u53ef\u4ee5\u7b80\u5355\u8ba1\u7b97\u3002\n\n3. \u6784\u6210\u76f4\u89d2\u3002\u8fd9\u4e2a\u53ef\u4ee5\u901a\u8fc7\u8ba1\u7b97\u5939\u89d2\u52a0\u4ee5\u6bd4\u8f83\uff08\u76f4\u89d2\u5219\u6709\u70b9\u79ef\u4e3a $0$\uff09\u3002\n\n\u4efb\u610f\u4e24\u6761\u6ee1\u8db3\u4e0a\u8ff0\u4e09\u4e2a\u6761\u4ef6\u7684\u7ebf\u6bb5\uff0c\u5747\u53ef\u6784\u6210\u4e00\u4e2a\u5408\u6cd5\u7684\u77e9\u5f62\u3002\u7136\u800c\uff0c\u5bf9\u4e8e\u4e00\u7ec4\u659c\u7387\u76f8\u7b49\u3001\u957f\u5ea6\u76f8\u7b49\u3001\u4e24\u4e24\u6784\u6210\u76f4\u89d2\u7684\u7ebf\u6bb5\uff0c\u53ea\u6709\u6700\u8fb9\u7f18\u7684\u4e24\u6761\u6240\u5f62\u6210\u7684\u77e9\u5f62\u5177\u6709\u6700\u5927\u7684\u9762\u79ef\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5185\u90e8\u518d\u6309\u7167\u5939\u89d2\u662f\u5426 $\\leq180^\\circ$ \u52a0\u4ee5\u6392\u5e8f\uff0c\u5177\u4f53\u53ef\u4ee5\u901a\u8fc7\u53c9\u79ef\u5927\u5c0f\u52a0\u4ee5\u6bd4\u8f83\u3002\n\n\u7136\u540e\u5c31\u6392\u5e8f\u540e\u4f7f\u7528\u53cc\u9488\u627e\u5230\u4e00\u6bb5\u5408\u6cd5\u6bb5\u4e2d\u6700\u5de6\u65b9\u548c\u6700\u53f3\u65b9\u7684\u4e24\u6761\u7ebf\u6bb5\uff0c\u5e76\u66f4\u65b0\u7b54\u6848\u5373\u53ef\u3002\n\n\u74f6\u9888\u5728\u4e8e\u6392\u5e8f\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nint n,m;\nll res;\nstruct Vector{\n\tint x,y;\n\tVector(){}\n\tVector(int X,int Y){x=X,y=Y;}\n\tfriend Vector operator +(const Vector &u,const Vector &v){return Vector(u.x+v.x,u.y+v.y);}\n\tfriend Vector operator -(const Vector &u,const Vector &v){return Vector(u.x-v.x,u.y-v.y);}\n\tfriend ll operator &(const Vector &u,const Vector &v){return 1ll*u.x*v.y-1ll*u.y*v.x;}//cross times\n\tfriend ll operator |(const Vector &u,const Vector &v){return 1ll*u.x*v.x+1ll*u.y*v.y;}//point times\n\tll operator ~()const{return 1ll*x*x+1ll*y*y;}//the modulo of a vector\n\tvoid read(){scanf(\"%d%d\",&x,&y);}\n\tvoid print(){printf(\"(%d,%d)\",x,y);}\n}p[1510];\ntypedef Vector Point;\nstruct Line{\n\tPoint x,y;\n\tVector z;\n\tLine(){}\n\tLine(Point X,Point Y){x=X,y=Y,z=Y-X;}\n\tfriend bool operator <(const Line &u,const Line &v){\n\t\tif(u.z&v.z)return (u.z&v.z)<0;\n\t\tif(~u.z!=~v.z)return ~u.z<~v.z;\n\t\tif((u.x-v.x)|v.z)return ((u.x-v.x)|v.z)<0;\n\t\treturn ((u.x-v.x)&v.z)<0;\n\t}\n\tfriend bool operator ==(const Line &u,const Line &v){\n\t\tif(u.z&v.z)return false;\n\t\tif(~u.z!=~v.z)return false;\n\t\tif((u.x-v.x)|v.z)return false;\n\t\treturn true;\n\t}\n}l[2250100];\ntypedef Line Segment;\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)p[i].read();\n\tfor(int i=1;i<=n;i++)for(int j=1;j<=n;j++)if(p[i].y<p[j].y||(p[i].y==p[j].y&&p[i].x<p[j].x))l[++m]=Segment(p[i],p[j]);\n\tsort(l+1,l+m+1);\n\tfor(int i=1,j=1;i<=m;i=j){\n\t\twhile(j<=m&&l[i]==l[j])j++;\n\t\tres=max(res,abs(l[i].z&(l[i].x-l[j-1].x)));\n\t}\n\tprintf(\"%lld\\n\",res);\n\treturn 0;\n}\n```",
        "postTime": 1606713341,
        "uid": 123369,
        "name": "xtx1092515503",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3217 \u3010[HNOI2011]\u6570\u77e9\u5f62\u3011"
    },
    {
        "content": "\u5df2\u7ecf\u6709\u5927\u4f6c[\u8bc1\u660e](https://blog.csdn.net/wang3312362136/article/details/83003126)\u4e86\u5e73\u9762\u4e0a $n$ \u4e2a\u6574\u70b9\u80fd\u6784\u6210\u77e9\u5f62\u4e2a\u6570\u4e0a\u754c\u662f $\\text{O}\\left(n^{2.5}\\right)$\uff0c\u56e0\u6b64\u53ea\u9700\u8981**\u6ca1\u6709\u5197\u4f59\u5730**\u679a\u4e3e\u6240\u6709\u77e9\u5f62\uff0c\u590d\u6742\u5ea6\u5c31\u80fd\u5f97\u5230\u4fdd\u8bc1\u3002\n\n### \u4e00\u79cd\u53ef\u884c\u7684\u505a\u6cd5\n\n\u6211\u4eec\u77e5\u9053\uff1a\u4e00\u4e2a\u77e9\u5f62\u7684\u4e24\u6761\u5bf9\u89d2\u7ebf\u957f\u5ea6\u3001\u4e2d\u70b9\u76f8\u540c\u3002\n\n\u8003\u8651\u7528\uff08\u957f\u5ea6\uff0c\u4e2d\u70b9\u5750\u6807\uff09\u53cc\u5173\u952e\u5b57\u628a $n^2$ \u6761\u8fb9\u6392\u5e8f\u3002\n\n\u6392\u5e8f\u540e\u6bcf\u7ec4\uff08\u957f\u5ea6\uff0c\u4e2d\u70b9\u5750\u6807\uff09\u90fd\u76f8\u540c\u7684\u8fb9\u90fd\u5728\u8fde\u7eed\u7684\u4e00\u6bb5\u4e2d\u3002\n\n\u5728\u4e00\u6bb5\u4e2d\u4efb\u9009\u4e24\u6761\u8fb9\uff0c\u663e\u7136\u5b58\u5728\u4e00\u4e2a\u4ee5\u8fd9\u4e24\u6761\u8fb9\u4e3a\u5bf9\u89d2\u7ebf\u7684\u77e9\u5f62\u3002\n\n\u56fe\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u77e9\u5f62\u90fd\u53ea\u4f1a\u88ab\u6070\u597d\u679a\u4e3e\u5230\u4e00\u6b21\uff0c\u56e0\u6b64\u679a\u4e3e\u590d\u6742\u5ea6\u4e0e\u77e9\u5f62\u4e2a\u6570\u76f8\u7b49\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\text{O}\\left(n^{2.5}\\right)$\u3002\n\n### \u53e6\u4e00\u79cd\u590d\u6742\u5ea6\u66f4\u4f18\u7684\u505a\u6cd5\n\n\u6211\u4eec\u77e5\u9053\uff1a\u77e9\u5f62\u7684\u5bf9\u8fb9\u5e73\u884c\u4e14\u76f8\u7b49\u3002\n\n\u5373\uff1a\u77e9\u5f62 $ABCD$ \u4e2d $\\overrightarrow{AB} = \\overrightarrow{DC}$\n\n\u5982\u679c\u7528\u4e00\u4e2a\u51fa\u53d1\u70b9 $p$\uff08\u5bf9\u5e94\u77e9\u5f62\u4e2d\u7684 $A,D$\uff09\u548c\u4e00\u4e2a\u5411\u91cf $\\overrightarrow{v}$ \uff08\u5bf9\u5e94\u77e9\u5f62\u4e2d\u7684 $\\overrightarrow{AB}, \\overrightarrow{DC}$\uff09\u63cf\u8ff0\u4e00\u6761\u8fb9\uff0c\u90a3\u4e48\u4e24\u6761\u8fb9 \u5e73\u884c\u4e14\u76f8\u7b49 \u7b49\u4ef7\u4e8e\u5b83\u4eec\u7684 $\\overrightarrow{v}$ \u76f8\u7b49\u3002\n\n\u8003\u8651\u7528 $\\overrightarrow{v}$ \u4e3a\u5173\u952e\u5b57\u628a\u6240\u6709\u8fb9\u6392\u5e8f\u3001\u5206\u7ec4\u3002\n\n\u5982\u679c\u8fd9\u65f6\u76f4\u63a5\u679a\u4e3e\u4e00\u7ec4\u5185\u7684\u4e24\u6761\u8fb9\uff0c\u5b9e\u9645\u4e0a\u679a\u4e3e\u7684\u662f\u56fe\u4e2d\u7684\u6240\u6709\u5e73\u884c\u56db\u8fb9\u5f62\uff0c\u590d\u6742\u5ea6\u4e0a\u754c\u6ca1\u6709\u4fdd\u8bc1\u3002\n\n\u53ea\u7528\u5bf9\u8fb9\u5e73\u884c\u4e14\u76f8\u7b49\u4e0d\u80fd\u5b8c\u5168\u63cf\u8ff0\u4e00\u4e2a\u77e9\u5f62\u7684\u6027\u8d28\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8003\u8651\u77e9\u5f62\u7684\u5176\u4ed6\u6027\u8d28\uff0c\u6211\u4eec\u8fd8\u77e5\u9053\uff1a\u77e9\u5f62\u7684\u90bb\u8fb9\u4e92\u76f8\u5782\u76f4\u3002\n\n\u5373\uff1a\u77e9\u5f62 $ABCD$ \u4e2d $\\overrightarrow{AB} \\cdot \\overrightarrow{BC} = 0$\n\n\u7ee7\u7eed\u6574\u7406\uff1a $\\overrightarrow{AB} \\cdot \\left( \\overrightarrow{OC} - \\overrightarrow{OB} \\right) = 0$\n\n$\\overrightarrow{AB} \\cdot \\overrightarrow{OB} = \\overrightarrow{AB} \\cdot \\overrightarrow{OC} = \\overrightarrow{DC} \\cdot \\overrightarrow{OC}$\n\n\u5bf9\u5e94\u5230\u6211\u4eec\u5bf9\u8fb9\u7684\u8868\u793a\u4e0a\u5c31\u662f\uff1a$\\overrightarrow{v_1} \\cdot \\overrightarrow{Op_1} = \\overrightarrow{v_2} \\cdot \\overrightarrow{Op_2}$\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u7ec4\u5185\u7684\u6240\u6709\u8fb9\u6309\u7167 $\\overrightarrow{v} \\cdot \\overrightarrow{Op}$ \u7ee7\u7eed\u6392\u5e8f\u3001\u5206\u7ec4\uff0c\u8fd9\u6837\u4e00\u7ec4\u5185\u7684\u4efb\u610f\u4e24\u6761\u8fb9\u5c31\u90fd\u80fd\u591f\u6784\u6210\u4e00\u4e2a\u77e9\u5f62\u4e86\u3002\n\n\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u6240\u6709\u53ef\u884c\u7684\u77e9\u5f62\uff0c\u590d\u6742\u5ea6$\\text{O}\\left(n^{2.5}\\right)$\u3002\n\n\u6211\u4eec\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u4f18\u5316\uff1a\n\n\u6211\u4eec\u77e5\u9053\u77e9\u5f62\u7684\u9762\u79ef\u53ef\u4ee5\u8868\u793a\u4e3a $S=\\left| \\overrightarrow{AB} \\times \\overrightarrow{BC}\\right|$\n\n\u6574\u7406\u5f97\u5230 $S = \\left|\\overrightarrow{AB} \\times \\left( \\overrightarrow{OC} - \\overrightarrow{OB} \\right)\\right| = \\left| \\overrightarrow{AB} \\times \\overrightarrow{OB} - \\overrightarrow{DC} \\times \\overrightarrow{OC}\\right|$\n\n\u5bf9\u5e94\u5230\u6211\u4eec\u5bf9\u8fb9\u7684\u8868\u793a\u4e0a\u5c31\u662f\uff1a$S=\\left| \\overrightarrow{v_1} \\times \\overrightarrow{Op_1} - \\overrightarrow{v_2} \\times \\overrightarrow{Op_2} \\right|$\n\n\u6211\u4eec\u8981\u6c42 $S$ \u7684\u6700\u5927\u503c\uff0c\u8fd9\u76f8\u5f53\u4e8e\u6c42\u540c\u4e00\u7ec4\u4e2d\u6240\u6709\u8fb9\u7684 $\\overrightarrow{v} \\times \\overrightarrow{Op}$ \u7684\u6781\u5dee\uff0c\u53ef\u4ee5\u7ef4\u62a4\u6700\u5927\u503c\u3001\u6700\u5c0f\u503c\u5feb\u901f\u6c42\u51fa\u3002\n\n\u81f3\u6b64\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5df2\u7ecf\u88ab\u4f18\u5316\u6210 $\\text{O}\\left(n^2 \\log n\\right)$\u3002\n\n~~\u6211\u4eec\u53d1\u73b0\uff0c\u590d\u6742\u5ea6\u7684\u74f6\u9888\u5728\u6392\u5e8f\u4e0a\uff0c\u53ef\u4ee5\u8003\u8651\u7528\u57fa\u6570\u6392\u5e8f\u6216`unordered_map` \u7ee7\u7eed\u4f18\u5316\u3002~~\n\n~~\u7406\u8bba\u4e0a\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u4ee5\u8fbe\u5230 $\\text{O}\\left(n^2\\right)$\u3002~~\n\n### $\\text{O}\\left(n^2 \\log n\\right)$ \u4ee3\u7801\n```cpp \n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nstruct pt{\n    ll x,y,k;\n    inline pt(){};\n    inline pt(ll X,ll Y):x(X),y(Y){};\n    inline bool operator<(const pt& p){return k<p.k;}\n    inline void init(){scanf(\"%lld%lld\",&x,&y);}\n    inline pt operator-(const pt& p)const {return pt(x-p.x,y-p.y);}\n    inline pt operator+(const pt& p)const {return pt(x+p.x,y+p.y);}\n    inline ll operator*(const pt& p)const {return x*p.x+y*p.y;}\n    inline ll operator/(const pt& p)const {return x*p.y-y*p.x;}\n    inline pt r90(int t=1){return pt(-t*y,t*x);}\n};\nconst ll L=5e8,R=1e9;\ninline ll Hash(const pt& p){return (p.x+L)*R+p.y+L;}\ninline pt iHash(ll h){return pt(h/R-L,h%R-L);}\nconst int N=2e3+10;\npt P[N],V[N*N];\nint n,t;\nll ans,upp,low;\nint main(){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;++i)P[i].init(),P[i].k=Hash(P[i]);\n    sort(P+1,P+n+1);\n    for(int i=1;i<=n;++i)\n        for(int j=1;j<i;++j)\n            V[++t]=P[j],V[t].k=Hash(P[i]-P[j]);\n    sort(V+1,V+t+1);\n    for(int i=1,j=1;i<=t;i=j){\n        while(j<=t&&V[j].k==V[i].k)++j;\n        pt v=iHash(V[i].k);\n        for(int it=i;it<j;++it)V[it].k=V[it]*v;\n        sort(V+i,V+j);\n        for(int l=i,r=i;l<j;l=r++){\n            upp=low=V[l]/v;\n            while(r<j&&V[r].k==V[l].k)\n                low=min(low,V[r]/v),upp=max(upp,V[r]/v),++r;\n            ans=max(ans,upp-low);\n        }\n    }\n    printf(\"%lld\\n\",ans);\n}\n```",
        "postTime": 1560252350,
        "uid": 65967,
        "name": "shanjb0221",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3217 \u3010[HNOI2011]\u6570\u77e9\u5f62\u3011"
    },
    {
        "content": "emmm.....\u51f8\u5305\uff1f\u65cb\u8f6c\u5361\u58f3\uff1f\u4e0d\u884c\u554a\u662f\u77e9\u5f62...\n\nn<=1500?\u4e0d\u7ba1\u4e86\u66b4\u529b\u4e00\u53d1....\n\nWC\u8fc7\u4e86....\n\n\u5927\u6982\u5c31\u8fd9\u6837\uff0c$n^2$\u5904\u7406\u4e24\u4e24\u4e4b\u95f4\u7684\u7ebf\u6bb5\u3002\u77e9\u5f62\u7684\u5bf9\u89d2\u7ebf\u4e00\u5b9a\u662f\u4e2d\u5fc3\u76f8\u540c\u5e76\u4e14\u957f\u5ea6\u76f8\u540c\u7684\u4e24\u6761\u7ebf\u6bb5\uff0c\u90a3\u4e48\u628a$n^2$\u6761\u7ebf\u6bb5\u6309\u7167\u957f\u5ea6\u4e0e\u4e2d\u5fc3\u6392\u5e8f\u3002\n\n\u5bf9\u4e8e\u957f\u5ea6\u76f8\u540c\u4e14\u4e2d\u5fc3\u76f8\u540c\u7684\uff0c\u518d\u6765\u4e00\u53d1\u679a\u4e3e\uff0c\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\u3002\n\n\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define N 1500\nusing namespace std;\nstruct node\n{\n\tll x,y;\n\tll operator ^ (const node& rhs) const\n    {\n        return x*rhs.y-y*rhs.x;\n    }\n    node operator - (const node& rhs) const\n    {\n        return (node){x-rhs.x,y-rhs.y};\n    }\n\tnode operator + (const node& rhs) const\n    {\n        return (node){x+rhs.x,y+rhs.y};\n    }\n}a[N+5];\nstruct line\n{\n\tnode li,mi;\n\tll l;\n}p[N*N+5];\nbool comp(line aa,line bb)\n{\n\treturn aa.l==bb.l? aa.mi.x==bb.mi.x?aa.mi.y<bb.mi.y:aa.mi.x<bb.mi.x :aa.l>bb.l;\n}\nint n,m;\nll dis(int i,int j)\n{\n    return (a[i].x-a[j].x)*(a[i].x-a[j].x)+(a[i].y-a[j].y)*(a[i].y-a[j].y);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%lld%lld\",&a[i].x,&a[i].y);\n\t\tfor(int j=1;j<i;++j)\n\t\t{\n\t\t\tp[++m].li=a[i]-a[j];\n\t\t\tp[m].mi=a[i]+a[j];\n\t\t\tp[m].l=dis(i,j);\n\t\t}\n\t}\n\tsort(p+1,p+m+1,comp);\n\t\n\tll ans=0;\n\t\n\tfor(int i=1,j=1;i<=m;i=j)\n\t{\n\t\twhile(p[j].l==p[i].l&&p[j].mi.x==p[i].mi.x&&p[j].mi.y==p[i].mi.y) j++;\n\t\tfor(int k=i;k<j;++k)\n\t\tfor(int l=k+1;l<j;++l) ans=max(ans,(abs(p[k].li^p[l].li))>>1);\n\t}\n    printf(\"%lld\\n\" , ans);\n\treturn 0;\n}\n```",
        "postTime": 1519735045,
        "uid": 35718,
        "name": "MloVtry",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3217 \u3010[HNOI2011]\u6570\u77e9\u5f62\u3011"
    },
    {
        "content": "\u5bf9\u4e8e\u8fd9\u79cd\u9898\u76ee\uff0c\u62ff\u5230\u9898\u76ee\u9996\u5148\u60f3\u4e00\u60f3\u4ec0\u4e48\u60c5\u51b5\u4e0b\u80fd\u591f\u6784\u6210\u4e00\u4e2a\u77e9\u5f62\u3002\n\n\u81ea\u7136\u53ef\u4ee5\u6839\u636e\u77e9\u5f62\u5224\u5b9a\u6765\u89e3\u51b3\u3002\u4f46\u662f\u8fd9\u6837\u9700\u8981\u679a\u4e3e\u56db\u4e2a\u70b9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n^4)$ \u7684\u3002\u4e0d\u59a8\u60f3\u60f3\u9700\u8981\u679a\u4e3e\u66f4\u5c11\u4fe1\u606f\u7684\u505a\u6cd5\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u4e24\u6761\u957f\u5ea6\u76f8\u7b49\uff0c\u4e2d\u70b9\u76f8\u7b49\u7684\u7ebf\u6bb5\u80fd\u591f\u552f\u4e00\u786e\u5b9a\u4e00\u4e2a\u77e9\u5f62\u3002\u8fd9\u662f\u7531\u77e9\u5f62\u7684\u5224\u5b9a\u5b9a\u7406\u51b3\u5b9a\u7684\u3002\u6211\u4eec\u5728 $O(n^2)$ \u5904\u7406\u51fa\u4e24\u4e24\u70b9\u4e4b\u95f4\u7684\u8fde\u7ebf\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u957f\u5ea6\u76f8\u7b49\uff0c\u4e2d\u70b9\u76f8\u7b49\u7684\u7ebf\u6bb5\u76f4\u63a5\u4e24\u4e24\u679a\u4e3e\u3002\n\n\u7531\u4e8e $n$ \u4e2a\u70b9\u6784\u6210\u7684\u77e9\u5f62\u6570\u4e0d\u4f1a\u8d85\u8fc7 $n^2\\sqrt n$\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u6700\u52a3\u60c5\u51b5\u4e0b\u4f1a\u5c06\u8fd9\u6240\u6709\u77e9\u5f62\u5168\u90e8\u679a\u4e3e\u4e00\u904d\uff0c\u4e0a\u754c\u4e5f\u5c31\u662f $O(n^2\\sqrt n+n^2 \\log n)$\u3002\n\n\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u77e9\u5f62\u9762\u79ef\u5fc5\u987b\u4f7f\u7528\u53c9\u79ef\u6c42\uff0c\u4e0d\u80fd\u4f7f\u7528\u6b27\u6c0f\u8ddd\u79bb\u3002\u5426\u5219\u8981\u4e48\u6389\u7cbe\u5ea6\u8981\u4e48\u7206 $\\text{long long}$\u3002\n\n```cpp\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\ntypedef long long ll;\nint num=0;\nstruct Segment {ll len; int posX,posY,st,ed;} s[2250005>>1];\nint x[1505],y[1505];\ninline int read() {\n    register int x=0,f=1;register char s=getchar();\n    while(s>'9'||s<'0') {if(s=='-') f=-1;s=getchar();}\n    while(s>='0'&&s<='9') {x=x*10+s-'0';s=getchar();}\n    return x*f;\n}\ninline bool cmp(const Segment &x,const Segment &y) {\n    if(x.len<y.len) return 1;\n    if(x.len==y.len&&x.posX<y.posX) return 1;\n    if(x.len==y.len&&x.posX==y.posX&&x.posY<y.posY) return 1;\n    return 0;\n}\ninline ll max(const ll &x,const ll &y) {return x>y? x:y;}\ninline ll abs(ll x) {return x<0? -x:x;}\nint main() {\n    int n=read();\n    for(register int i=1;i<=n;++i) {x[i]=read();y[i]=read();}\n    for(register int i=1;i<=n;++i) {\n        for(register int j=i+1;j<=n;++j) {\n            s[++num].len=(ll)(x[i]-x[j])*(x[i]-x[j])+(ll)(y[i]-y[j])*(y[i]-y[j]);\n            s[num].posX=x[i]+x[j]; s[num].posY=y[i]+y[j];\n            s[num].st=i; s[num].ed=j;\n        }\n    }\n    std::sort(s+1,s+1+num,cmp);\n    ll ans=0;\n    for(register int cur=1;cur<=num;) {\n        int nxt=cur;\n        while(nxt<=num&&s[nxt].len==s[cur].len&&s[nxt].posX==s[cur].posX&&s[nxt].posY==s[cur].posY) ++nxt;\n        for(register int i=cur;i<nxt;++i) {\n            for(register int j=cur+1;j<nxt;++j) {\n                int u=s[i].st,v=s[j].st,w=s[j].ed;\n                int X_1=x[v]-x[u],Y_1=y[v]-y[u];\n                int X_2=x[w]-x[u],Y_2=y[w]-y[u];\n                ans=max(ans,abs((ll)X_1*Y_2-(ll)X_2*Y_1));\n            }\n        } \n        cur=nxt;\n    }\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1605270863,
        "uid": 95244,
        "name": "tommymio",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3217 \u3010[HNOI2011]\u6570\u77e9\u5f62\u3011"
    },
    {
        "content": "# \u4e3b\u9898\u601d\u8def\r\n\r\n\u4e00\u5f00\u59cb\u7684\u601d\u8def\u662f\u5bf9\u4e8e\u6bcf\u4e00\u6761\u7ebf\u6bb5\u6309\u7167\u659c\u7387\u548c\u957f\u5ea6\u6392\u5e8f\u5206\u6bb5\r\n\r\n\u7136\u540e\u5728\u6bcf\u4e00\u4e2a\u6bb5\u5185\u66b4\u529b\u679a\u4e3e\u77e9\u5f62\r\n\r\n\u5f88\u663e\u7136\u5bb9\u6613TLE\r\n\r\n\u5c1d\u8bd5\u8f6c\u6362\u601d\u8def\r\n\r\n\u5982\u4f55\u901a\u8fc7\u4e24\u6761\u7ebf\u6bb5\u7b80\u6613\u7684\u786e\u5b9a\u4e00\u4e2a\u77e9\u5f62\r\n\r\n\u77e9\u5f62\u7684\u4e00\u4e2a\u91cd\u8981\u6027\u8d28\uff1a**\u4e00\u4e2a\u77e9\u5f62\u7684\u5bf9\u89d2\u7ebf\u76f8\u7b49\u4e14\u4e92\u76f8\u5e73\u5206**\r\n\r\n\u4e5f\u5c31\u662f\u8bf4 **\u5982\u679c\u4e24\u6761\u7ebf\u6bb5\u7684\u4e2d\u5fc3\u91cd\u5408\u5e76\u4e14\u957f\u5ea6\u76f8\u7b49**\r\n\r\n\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u8fd9\u4e24\u6761\u7ebf\u6bb5\u786e\u5b9a\u4e00\u4e2a\u77e9\u5f62\r\n\r\n\u6240\u4ee5\u6211\u4eec\u5148$n^2$\u679a\u4e3e\u5168\u90e8\u7684\u7ebf\u6bb5\r\n\r\n\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e00\u6761\u7ebf\u6bb5\u63d0\u53d6\u4e2d\u70b9\u4ee5\u53ca\u957f\u5ea6\r\n\r\n\u7136\u540e\u5bf9\u6b64\u8fdb\u884c\u6392\u5e8f\u5206\u6bb5\r\n\r\n\u6bcf\u4e00\u4e2a\u6bb5\u5185\u7684\u8bdd \u6211\u4eec\u5728\u6309\u7167\u6781\u89d2\u8fdb\u884c\u6392\u5e8f\r\n\r\n\u7528\u4e8e\u4e00\u4e2a\u6bb5\u5185 \u7ebf\u6bb5\u7684\u957f\u5ea6\u5168\u90e8\u76f8\u7b49\r\n\r\n\u90a3\u4e48 **\u4e24\u6761\u7ebf\u6bb5\u8d8a\u8d8b\u8fd1\u4e8e\u5782\u76f4 \u8d8a\u8d8b\u8fd1\u4e8e\u9762\u79ef\u6700\u5927**\r\n\r\n\u8fd9\u6837\u7684\u8bdd \u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6bb5\u5185\u7528\u6307\u9488\u7ebf\u6027\u626b\u63cf \u627e\u5230\u6700\u5408\u9002\u7684\u4f4d\u7f6e\r\n\r\n\u7136\u540e\u8fdb\u884c\u6c42\u6700\u5927\u503c\r\n\r\n# \u4e00\u4e9b\u7ec6\u8282\r\n\r\n1.\u4e3a\u4e86\u9632\u6b62\u7cbe\u5ea6\u8bef\u5dee \u6211\u4eec\u5c3d\u91cf\u4f7f\u7528\u6574\u6570\u8ba1\u7b97\r\n\r\n\u6bd4\u5982 \u5229\u7528\u53c9\u79ef\u5b9e\u73b0\u5185\u90e8\u6781\u89d2\u6392\u5e8f\r\n\r\n\u5229\u7528\u53c9\u79ef\u8ba1\u7b97\u9762\u79ef\r\n\r\n2.\u7528\u4e8e\u70b9\u503c\u7684\u8303\u56f4\u662f\u5728$10^{-8}-10^8$\r\n\r\n\u5e76\u4e14\u6d89\u53ca\u5230\u4e86\u4e58\u6cd5\u8fd0\u7b97 \u6240\u4ee5\u4e00\u4e9b\u53d8\u91cf\u6211\u4eec\u9700\u8981\u4f7f\u7528 long long\r\n\r\n# CODE:\r\n\r\n```cpp\r\n#include<iostream>\r\n#include<cstdio>\r\n#include<cstring>\r\n#include<algorithm>\r\n#include<cstdlib>\r\n#include<cmath>\r\n#define N 1510\r\nusing namespace std;\r\nint n,tot;\r\nlong long ans;\r\nstruct Node\r\n{\r\n\tint xx,yy;\r\n}e[N];\r\nstruct Line\r\n{\r\n\tint sx,sy,tx,ty,tox,toy;long long len;\r\n\tdouble mx,my;\r\n\tfriend bool operator <(const Line &A,const Line &B)\r\n\t{\r\n\t\tif(A.mx==B.mx)\r\n\t\t{\r\n\t\t\tif(A.my==B.my)\r\n\t\t\t{//\u5185\u90e8\u4f7f\u7528\u53c9\u79ef\u8fdb\u884c\u6781\u89d2\u6392\u5e8f\r\n\t\t\t\tif(A.len==B.len) return (A.tox*B.toy-A.toy*B.tox)>0;\r\n\t\t\t\telse return A.len<B.len;\r\n\t\t\t} \r\n\t\t\telse return A.my<B.my; \r\n\t\t}\r\n\t\telse return A.mx<B.mx;\r\n\t}\r\n\tfriend long long operator *(const Line &A,const Line &B)\r\n\t{//\u8ba1\u7b97\u70b9\u79ef\r\n\t\tlong long ax=(long long)(A.tx-A.sx);long long ay=(long long)(A.ty-A.sy);\r\n\t\tlong long bx=(long long)(B.tx-B.sx);long long by=(long long)(B.ty-B.sy);\r\n\t\treturn ax*bx+ay*by;\r\n\t}\r\n\tfriend long long operator ^(const Line &A,const Line &B)\r\n\t{//\u8ba1\u7b97\u53c9\u79ef\r\n\t\tlong long ax=(long long)(A.tx-A.sx);long long ay=(long long)(A.ty-A.sy);\r\n\t\tlong long bx=(long long)(B.tx-B.sx);long long by=(long long)(B.ty-B.sy);\r\n\t\treturn ax*by-ay*bx;\r\n\t}\r\n}lin[N*N];\r\n//\u4e3a\u4e86\u9632\u6b62\u5f00\u65b9\u9020\u6210\u7684\u7cbe\u5ea6\u635f\u5931 \u540c\u65f6\u957f\u5ea6\u53ea\u6d89\u53ca\u6bd4\u8f83\r\n//\u6211\u4eec\u5c31\u4e0d\u5f00\u65b9\u4e86\r\nlong long getlen(Node A,Node B)\r\n{return (long long)(A.xx-B.xx)*(long long)(A.xx-B.xx)+(long long)(A.yy-B.yy)*(long long)(A.yy-B.yy);}\r\nvoid solve(int le,int ri)\r\n{\r\n\tif(le==ri) return;\r\n//\tputs(\"access to answer!\");\t\r\n\tint tail=le+1;\r\n    //\u4f7f\u7528\u6307\u9488\u626b\u63cf\r\n\tfor(int i=le;i<ri;++i)\r\n\t{\r\n\t\twhile(tail<ri&&(lin[i]*lin[tail])>0) ++tail;\r\n\t\t//\u5bfb\u627e\u6700\u8d8b\u8fd1\u4e8e\u5782\u76f4\u7684\r\n     //\u4e3a\u4e86\u9632\u6b62\u610f\u5916 \u524d\u540e\u7684\u4f4d\u7f6e\u6211\u90fd\u6bd4\u8f83\u4e86\u4e00\u4e0b  \r\n        if(tail>le) ans=max(ans,(abs(lin[i]^lin[tail]))/2);\r\n\t\tif(tail-1>le) ans=max(ans,(abs(lin[i]^lin[tail-1]))/2);\r\n\t\tif(tail+1<=ri) ans=max(ans,(abs(lin[i]^lin[tail+1]))/2);\r\n\t\t\r\n\t}\r\n\treturn;\r\n}\r\nint main()\r\n{\r\n\tcin>>n;\r\n\tfor(int i=1;i<=n;++i)\r\n\tcin>>e[i].xx>>e[i].yy;\r\n\tfor(int i=1;i<=n;++i)\r\n\t for(int j=i+1;j<=n;++j)\r\n\t  {\r\n\t  \t++tot;\r\n        //\u4e3a\u4e86\u5c3d\u91cf\u9632\u6b62\u9ebb\u70e6 \u6211\u5728\u8bfb\u5165\u7ebf\u6bb5\u7684\u65f6\u5019\u505a\u4e86\u4e00\u4e9b\u5fae\u8c03\r\n\t  \tif(e[i].yy<e[j].yy)\r\n\t  \t{\r\n\t\t\tlin[tot].sx=e[i].xx;lin[tot].sy=e[i].yy;\r\n\t\t  \tlin[tot].tx=e[j].xx;lin[tot].ty=e[j].yy;\r\n\t\t  \tlin[tot].mx=(double)(e[i].xx+e[j].xx)/2.0;\r\n\t\t  \tlin[tot].my=(double)(e[i].yy+e[j].yy)/2.0;\r\n\t\t  \tlin[tot].tox=e[j].xx-e[i].xx;\r\n\t\t  \tlin[tot].toy=e[j].yy-e[i].yy;\r\n\t\t  \tlin[tot].len=getlen(e[i],e[j]);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlin[tot].tx=e[i].xx;lin[tot].ty=e[i].yy;\r\n\t\t  \tlin[tot].sx=e[j].xx;lin[tot].sy=e[j].yy;\r\n\t\t  \tlin[tot].mx=(double)(e[i].xx+e[j].xx)/2.0;\r\n\t\t  \tlin[tot].my=(double)(e[i].yy+e[j].yy)/2.0;\r\n\t\t  \tlin[tot].tox=e[i].xx-e[j].xx;\r\n\t\t  \tlin[tot].toy=e[i].yy-e[j].yy;\r\n\t\t  \tlin[tot].len=getlen(e[i],e[j]);\r\n\t\t}\r\n\t  }\r\n\tsort(lin+1,lin+tot+1);  \r\n\tint pos=1;\r\n\tfor(int i=1;i<=tot;++i)\r\n\t{\r\n\t\tif(!(lin[i].mx==lin[i+1].mx&&lin[i].my==lin[i+1].my&&lin[i].len==lin[i+1].len))//\u5206\u6bb5\r\n\t\t{solve(pos,i);pos=i+1;}\r\n\t}\r\n\tprintf(\"%lld\\n\",ans);\r\n\treturn 0; \r\n}\r\n\r\n```\r\n\r\n\r\n",
        "postTime": 1602606499,
        "uid": 87931,
        "name": "tcswuzb",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3217 \u3010[HNOI2011]\u6570\u77e9\u5f62\u3011"
    }
]
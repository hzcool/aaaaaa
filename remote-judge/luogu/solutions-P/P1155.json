[
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u4f60\u4e00\u4e2a\u957f\u4e3a $n$ \u7684\u5e8f\u5217 $p$ \uff0c\u95ee\u662f\u5426\u80fd\u591f\u901a\u8fc7\u5bf9\u4e8e\u4e24\u4e2a\u6808\u8fdb\u884c `push, pop(print)` \u64cd\u4f5c\u4f7f\u5f97\u6700\u540e\u8f93\u51fa\u5e8f\u5217\u5355\u8c03\u9012\u589e\uff08\u5373\u4e3a $1 \\cdots n$ \uff09\uff0c\u5982\u679c\u65e0\u89e3\u8f93\u51fa $0$ \u3002\n\n\u6bcf\u4e2a\u64cd\u4f5c\u6709\u4e2a\u4f18\u5148\u7ea7\uff0c`push(1) > pop(1) > push(2) > pop(2)` \uff0c\u8f93\u51fa\u4f18\u5148\u7ea7\u6700\u5927\u7684\u4e00\u7ec4\u89e3\u3002\n\n$n \\le 1000$\n\n## \u9898\u89e3\n\n\u6709\u5174\u8da3\u53ef\u4ee5\u6765\u901b\u901b [\u6211\u7684\u535a\u5ba2](https://www.cnblogs.com/zjp-shadow/p/9831491.html)\u3002\n\n> \u6d1b\u8c37\u524d\u9762\u5927\u90e8\u5206\u9898\u89e3\uff0c\u5bf9\u4e8e\u540e\u9762\u76f4\u63a5\u6a21\u62df\u7684\u601d\u8def\u80af\u5b9a\u662f\u9519\u7684\uff0c\u672c\u6587\u4ecb\u7ecd\u4e00\u4e2a\u57fa\u4e8e\u8d2a\u5fc3\u7684\u7b97\u6cd5\uff08\u4e0d\u77e5\u9053\u5bf9\u4e0d\u5bf9\uff0c\u56e0\u4e3a\u6ca1\u6709\u5f3a\u6570\u636e\u9a8c\u8bc1\uff09\u3002\n\n\u9996\u5148\u8003\u8651\u53ea\u6709\u4e00\u4e2a\u6808\u7684\u65f6\u5019\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u5c31\u662f\u5bf9\u4e8e\u4e00\u5bf9\u4f4d\u7f6e $(i, j)$ \u662f\u5426\u80fd\u5171\u5b58\u4e09\u4e2a\u4f4d\u7f6e $i < j < k$ \u5b58\u5728 $p_k < p_i < p_j$ \u662f\u4e0d\u53ef\u884c\u7684\uff0c\u56e0\u4e3a $p_k$ \u9700\u8981\u5728 $p_i$ \u4e0e $p_j$ \u4e4b\u524d\u51fa\u6808\uff0c\u4f46 $p_i$ \u53c8\u9700\u8981\u5728 $p_j$ \u4e4b\u524d\u51fa\u6808\uff0c\u90a3\u4e48\u8fd9\u5c31\u4f1a\u4ea7\u751f\u77db\u76fe\u3002\n\n\u6211\u4eec\u9884\u5904\u7406 $\\displaystyle f_i = \\min_{j = i}^{n} p_j$ \uff0c\u5c31\u53ef\u4ee5\u5728 $O(n ^ 2)$ \u7684\u65f6\u95f4\u5185\u5224\u65ad\u4e00\u5bf9 $i, j$ \u662f\u5426\u53ef\u4ee5\u5171\u5b58\u4e86\uff08\u4e5f\u5c31\u662f $f_{j + 1} < p_i < p_j$ \uff09\n\n\u7136\u540e\u5bf9\u4e8e\u5b58\u5728\u4e24\u4e2a\u6808\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u5c31\u9700\u8981\u628a $p$ \u5212\u5206\u6210\u4e24\u4e2a\u5e8f\u5217\uff0c\u4f7f\u5f97\u8fd9\u4e24\u4e2a\u5e8f\u5217\u4e4b\u4e2d\u7684\u6570\u90fd\u4e92\u4e0d\u51b2\u7a81\u3002\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5bf9\u4e8e\u4e00\u5bf9\u4e0d\u80fd\u5171\u5b58\u7684 $i, j$  \u8fde\u8fb9\uff0c\u7136\u540e\u8fdb\u884c\u4e8c\u5206\u56fe\u67d3\u8272\u3002\u5982\u679c\u4e0d\u53ef\u67d3\uff0c\u90a3\u4e48\u5c31\u662f\u4e0d\u5b58\u5728\u4e00\u7ec4\u5408\u6cd5\u89e3\u3002\n\n\u4e4b\u540e\u6211\u4eec\u53ea\u9700\u8981\u89e3\u51b3\u4f7f\u5f97\u6700\u540e\u89e3\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u9650\u5236\u3002\n\n\u6211\u4eec\u67d3\u8272\u7684\u65f6\u5019 `BFS` \u67d3\u8272\uff0c\u5c3d\u91cf\u628a\u5728\u524d\u9762\u7684\u653e\u5165\u7b2c\u4e00\u4e2a\u6808\u3002\n\n\u7136\u540e\u540e\u9762\u5f97\u5230\u64cd\u4f5c\u5e8f\u5217\u76f4\u63a5\u6a21\u62df\u80af\u5b9a\u662f\u4e2a\u9519\u7684\u3002\n\n> \u4e3e\u4e2a\u6837\u4f8b\uff1a\n>\n> ```\n> 5\n> 2 4 1 3 5\n> ```\n>\n> \u6807\u51c6\u8f93\u51fa\uff1a\n>\n> ```\n> a c a b b a b a d b \n> ```\n>\n> \u524d\u9762\u5927\u90e8\u5206\u9519\u8bef\u7684\u8f93\u51fa\uff1a\n>\n> ```\n> a c a b b a b d a b \n> ```\n\n\u4e3a\u4ec0\u4e48\u5462\uff0c\u56e0\u4e3a\u4f60\u5411\u7b2c\u4e8c\u4e2a\u6808 `push` \u540e\uff0c\u4e0d\u4e00\u5b9a\u73b0\u5728\u62ff\u51fa\u6765 `pop` \uff0c\u7b2c\u4e00\u4e2a\u6808\u4e2d\u80fd\u7ee7\u7eed `push` \u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u8d2a\u5fc3\u4e00\u4e0b\uff0c\u6211\u4eec\u5728 `push` \u4e4b\u540e\u4e0d\u9a6c\u4e0a `pop` \uff0c\u7b49\u5230\u9700\u8981 `pop` \u7684\u65f6\u5019\u518d `pop` \u3002\n\n\u54ea\u4e9b\u65f6\u5019\u9700\u8981 `pop` \u5462\uff0c\u5c31\u662f\u8fd9\u4e2a\u6808\u4e0d\u5408\u6cd5\u7684\u65f6\u5019\u9700\u8981 `pop` \uff08\u4e5f\u5c31\u662f\u8fd9\u4e2a\u6808 \u6808\u9876\u5230\u6808\u5e95 \u4e0d\u5355\u8c03\u9012\u589e\u7684\u65f6\u5019\uff0c\u4e0d\u6ee1\u8db3\u5355\u8c03\u6808\u6027\u8d28\uff09\n\n\u4f46\u662f\u6ce8\u610f\u5411\u7b2c\u4e8c\u4e2a\u6808\u4e2d `push` \u4e4b\u524d\uff0c\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u6808\u7684 `pop` \u4f18\u5148\u7ea7\u66f4\u9ad8\uff0c\u6211\u4eec\u770b\u80fd\u4e0d\u80fd\u5148 `pop` \u7b2c\u4e00\u4e2a\u6808\u3002\n\n\u8fd9\u6837\u5c31\u5e94\u8be5\u662f\u6700\u4f18\u7684\u4e86\uff0c\u6ce8\u610f\u6700\u540e\u8981\u628a\u4e24\u4e2a\u6808\u6309\u987a\u5e8f\u6e05\u7a7a\u3002\n\n## \u4ee3\u7801\n\n```cpp\n\n#include <bits/stdc++.h>\n\n#define For(i, l, r) for(register int i = (l), i##end = (int)(r); i <= i##end; ++i)\n#define Fordown(i, r, l) for(register int i = (r), i##end = (int)(l); i >= i##end; --i)\n#define Set(a, v) memset(a, v, sizeof(a))\n#define Cpy(a, b) memcpy(a, b, sizeof(a))\n#define debug(x) cout << #x << \": \" << (x) << endl\n#define DEBUG(...) fprintf(stderr, __VA_ARGS__)\n#define pb push_back\n\nusing namespace std;\n\ntemplate<typename T> inline bool chkmin(T &a, T b) { return b < a ? a = b, 1 : 0; }\ntemplate<typename T> inline bool chkmax(T &a, T b) { return b > a ? a = b, 1 : 0; }\n\ninline int read() {\n    int x(0), sgn(1); char ch(getchar());\n    for (; !isdigit(ch); ch = getchar()) if (ch == '-') sgn = -1;\n    for (; isdigit(ch); ch = getchar()) x = (x * 10) + (ch ^ 48);\n    return x * sgn;\n}\n\nvoid File() {\n#ifdef zjp_shadow\n\tfreopen (\"P1155.in\", \"r\", stdin);\n\tfreopen (\"P1155.out\", \"w\", stdout);\n#endif\n}\n\nconst int N = 1010, inf = 0x7f7f7f7f;\n\nint n, P[N], minv[N], col[N];\n\nint pos = 1;\nstack<int> S[2];\n\ninline void out(char ch) {\n\tputchar (ch); putchar (' ');\n}\n\ninline bool Pop(int id) {\n\tif (!S[id].empty() && S[id].top() == pos) {\n\t\tout(id ? 'd' : 'b'), S[id].pop(), ++ pos;\n\t\treturn true;\n\t}\n\treturn false;\n}\n\ninline void Push(int cur, int id) {\n\tif (id == 1) { while(Pop(0)); }\n\twhile (!S[id].empty() && S[id].top() < cur)\n\t\tif (!Pop(id)) Pop(id ^ 1);\n\tif (id == 1) { while(Pop(0)); }\n\tS[id].push(cur); out(id ? 'c' : 'a');\n}\n\nvector<int> G[N];\n\nint main () {\n\n\tFile(); \n\tn = read();\n\n\tFor (i, 1, n)\n\t\tP[i] = read();\n\n\tminv[n + 1] = n + 1;\n\tFordown (i, n, 1)\n\t\tminv[i] = min(minv[i + 1], P[i]);\n\n\tFor (i, 1, n) For (j, i + 1, n) \n\t\tif (minv[j + 1] < P[i] && P[i] < P[j])\n\t\t\tG[i].pb(j), G[j].pb(i), col[i] = col[j] = -1;\n\n\tFor (i, 1, n) if (!~col[i]) {\n\t\tqueue<int> Q; Q.push(i); col[i] = 0;\n\t\twhile (!Q.empty()) {\n\t\t\tint u = Q.front(); Q.pop();\n\t\t\tfor (int v : G[u]) {\n\t\t\t\tif (~col[v] && col[v] != (col[u] ^ 1)) return puts(\"0\"), 0;\n\t\t\t\tif (!~col[v]) Q.push(v);\n\t\t\t\tcol[v] = col[u] ^ 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tFor (i, 1, n)\n\t\tPush(P[i], col[i]);\n\n\tbool flag = true;\n\twhile (flag) {\n\t\tflag = false;\n\t\twhile(Pop(0)) flag = true;\n\t\twhile(Pop(1)) flag = true;\n\t}\n\n\treturn 0;\n\n}\n\n```\n\n",
        "postTime": 1540201267,
        "uid": 19128,
        "name": "zjp_shadow",
        "ccfLevel": 9,
        "title": "[NOIp2008] \u53cc\u6808\u6392\u5e8f (\u4e8c\u5206\u56fe\u67d3\u8272 + \u8d2a\u5fc3)"
    },
    {
        "content": "# [NOIP2008]\u53cc\u6808\u6392\u5e8f\n\n\u6807\u7b7e\uff08\u7a7a\u683c\u5206\u9694\uff09\uff1a NOIP \u89e3\u9898\u8bb0\u5f55 \u4e8c\u5206\u56fe\n\n---\n\u53c2\u8003\u8d44\u6599\uff1a[[NOIp2008] \u53cc\u6808\u6392\u5e8f (\u4e8c\u5206\u56fe\u67d3\u8272 + \u8d2a\u5fc3) \u9898\u89e3](https://www.luogu.org/blog/zjp-shadow/noip2008-sorting-of-two-stacks)\n\u9898\u76ee\u94fe\u63a5\uff1a[[NOIP2008]\u53cc\u6808\u6392\u5e8f](https://www.luogu.org/problemnew/show/P1155)\n\n## \u9898\u76ee\u5927\u610f\uff1a\n\u6709\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217\uff08\u662f $1-n$ \u7684\u6392\u5217\uff09\uff0c\u73b0\u5728\u6709 $2$ \u4e2a\u6808 $S_1$\uff0c$S_2$\uff0c$4$ \u4e2a\u64cd\u4f5c\u3002\n> **\u64cd\u4f5c $a$**\uff1a\u5982\u679c\u8f93\u5165\u5e8f\u5217\u4e0d\u4e3a\u7a7a\uff0c\u5c06\u7b2c\u4e00\u4e2a\u5143\u7d20\u538b\u5165\u6808 $S_1$\n\n>**\u64cd\u4f5c $b$**\uff1a\u5982\u679c\u6808 $S_1$ \u4e0d\u4e3a\u7a7a\uff0c\u5c06 $S_1$ \u6808\u9876\u5143\u7d20\u5f39\u51fa\u81f3\u8f93\u51fa\u5e8f\u5217\n\n>**\u64cd\u4f5c $c$**\uff1a\u5982\u679c\u8f93\u5165\u5e8f\u5217\u4e0d\u4e3a\u7a7a\uff0c\u5c06\u7b2c\u4e00\u4e2a\u5143\u7d20\u538b\u5165\u6808 $S_2$\n\n>**\u64cd\u4f5c $d$**\uff1a\u5982\u679c\u6808 $S_2$ \u4e0d\u4e3a\u7a7a\uff0c\u5c06 $S_2$ \u6808\u9876\u5143\u7d20\u5f39\u51fa\u81f3\u8f93\u51fa\u5e8f\u5217\n\n\u5224\u65ad\u662f\u5426\u80fd\u4f7f\u5f97\u8f93\u51fa\u5e8f\u5217\u5347\u5e8f\u6392\u5e8f\uff0c\n\u82e5\u4e0d\u80fd\uff0c\u5219\u8f93\u51fa $0$\uff1b\n\u82e5\u80fd\uff0c\u5219\u8f93\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u64cd\u4f5c\u5e8f\u5217\u3002\n\n## \u89e3\u9898\u601d\u8def\uff1a\n\u9996\u5148\u601d\u8003\u5982\u4f55\u5224\u65ad\u662f\u5426\u80fd\u4f7f\u5f97\u8f93\u51fa\u5e8f\u5217\u5347\u5e8f\u6392\u5e8f\u3002\n\n\u8003\u8651\u4e09\u4e2a\u539f\u5e8f\u5217\u7684\u4e0b\u6807 $i,j,k$\uff0c\u6ee1\u8db3 $i<j<k$\uff0c\n\u82e5 $val[k]<val[i]<val[j]$\uff0c\u5219 $i,j$ \u4e0d\u80fd\u8fdb\u5165\u540c\u4e00\u4e2a\u6808\u4e2d\u3002\n\n\u539f\u56e0\uff1a\n>\u82e5 $i,j,k$ \u8fdb\u5165\u540c\u4e00\u4e2a\u6808\u4e2d\uff0c\u7531\u4e8e $val[i]<val[j]$\uff0c$i$ \u8981\u6bd4 $j$ \u5148\u51fa\u6808\uff1b\n\u800c\u7531\u4e8e $val[k]<val[i]<val[j]$\uff0c\u6240\u4ee5 $k$ \u8981\u6bd4 $i,j$ \u5148\u51fa\u6808\uff0c$k$ \u82e5\u8981\u51fa\u6808\uff0c\u9996\u5148\u8981\u8fdb\u6808 ~~\u5e9f\u8bdd~~\uff0c$k$ \u82e5\u8981\u8fdb\u6808\uff0c\u90a3\u4e48 $i,j$ \u5c31\u8981\u5148\u8fdb\u6808\uff0c\u5c31\u4f1a\u4f7f\u5f97 $j$ \u6bd4 $i$ \u5148\u51fa\u6808\uff0c\u5c31\u4ea7\u751f\u4e86\u77db\u76fe\u3002\n\n\u4e3a\u4e86\u5224\u65ad\u8fd9\u4e2a\u77db\u76fe\u662f\u5426\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u6392\u5e8f\uff0c\u6211\u4eec\u9009\u62e9\u4f7f\u7528\u4e8c\u5206\u56fe\u67d3\u8272\uff0c\n\u5728\u6709\u77db\u76fe\u7684 $i,j$ \u4e4b\u95f4\u8fde\u4e00\u6761\u8fb9\uff08\u65e0\u5411\u8fb9\uff09\uff0c\u7136\u540e\u5bf9\u8fd9\u5f20\u56fe\u8fdb\u884c\u67d3\u8272\uff0c\u82e5\u4e0d\u662f\u4e8c\u5206\u56fe\uff0c\u5219\u65e0\u6cd5\u6392\u5e8f\uff0c\u8f93\u51fa 0\u3002\n\n---\n\n\u5224\u65ad\u5b8c\u4e86\u662f\u5426\u80fd\u6b63\u786e\u6392\u5e8f\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u601d\u8003\u5982\u4f55\u53d6\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u64cd\u4f5c\u5e8f\u5217\u4e86\u3002\n\n\u9996\u5148\u8003\u8651\u600e\u4e48\u4f7f\u64cd\u4f5c\u662f\u6b63\u786e\u7684\uff0c\u5373\u64cd\u4f5c\u540e\u80fd\u4ea7\u751f\u5347\u5e8f\u5e8f\u5217\u3002\n\u5927\u4f53\u601d\u8def\u5c31\u662f\u5c06\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u6570\u4f9d\u6b21\u538b\u5165\u5b83\u5c5e\u4e8e\u7684\u6808\u4e2d\uff08\u5c5e\u4e8e\u54ea\u4e2a\u6808\u5728\u4e8c\u5206\u56fe\u67d3\u8272\u65f6\u5c31\u53ef\u4ee5\u6807\u8bb0\u597d\uff09\uff0c\u5728\u5c06\u8fd9\u4e2a\u6570\u538b\u5165\u6808\u524d\uff0c\u6211\u4eec\u8981\u5148\u5224\u65ad\u538b\u5165\u4e4b\u540e\u6808\u662f\u5426\u4ecd\u7136\u5355\u8c03\uff0c\u82e5\u4e0d\u5355\u8c03\uff0c\u5219\u4e00\u76f4\u5f39\u51fa\u6808\u9876\u5143\u7d20\uff0c\u76f4\u5230\u5355\u8c03\u4e3a\u6b62\u3002\n**\u6ce8\u610f**\uff1a\u5728\u5f39\u51fa\u6808\u9876\u5143\u7d20\u65f6\uff0c\u6808\u9876\u7684\u5143\u7d20\u53ef\u80fd\u4e0d\u662f\u5f53\u524d\u5e94\u5f53\u5f39\u51fa\u7684\u6570\uff08\u56e0\u4e3a\u6211\u4eec\u8981\u4f7f\u5f97\u8f93\u51fa\u5e8f\u5217\u7684\u5143\u7d20\u662f\u9012\u589e\u7684\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u53d8\u91cf $now$\uff0c\u8868\u793a\u5f53\u524d\u5e94\u5f53\u5f39\u51fa\u7684\u6570\uff0c\u82e5\u8be5\u6808\u9876\u7684\u6570\u4e0d\u7b49\u4e8e $now$\uff0c\u5c31\u5f39\u51fa\u53e6\u5916\u4e00\u4e2a\u6808\u9876\u7684\u6570\u3002\n\n\u5728\u8003\u8651\u4ee5\u4e0a\u6761\u4ef6\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8f93\u51fa\u6b63\u786e\u7684\u64cd\u4f5c\u5e8f\u5217\u4e86\uff0c\u90a3\u8981\u600e\u4e48\u624d\u80fd\u8f93\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u5462\uff1f\n\u540c\u4e00\u4e2a\u6808\u7684\u538b\u5165\u548c\u5f39\u51fa\u7684\u76f8\u5bf9\u987a\u5e8f\u4f3c\u4e4e\u6539\u53d8\u4e0d\u4e86~~\uff08\u597d\u50cf\u662f\u5427\uff09~~\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8003\u8651\u4e24\u4e2a\u6808\u7684\u64cd\u4f5c\u4e4b\u95f4\u7684\u987a\u5e8f\u5427\u3002\n\u65e2\u7136 $S_1$ \u7684\u64cd\u4f5c\u7684\u5b57\u5178\u5e8f\u66f4\u5c0f\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u60f3\u4e00\u4e0b\u4ec0\u4e48\u65f6\u5019\u80fd\u5148\u8fdb\u884c $S_1$ \u7684\u64cd\u4f5c\u3002\u7531\u4e8e\u538b\u6808\u7684\u987a\u5e8f\u662f\u4e00\u5b9a\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8003\u8651\u5f39\u51fa\u64cd\u4f5c\uff0c\u5728\u538b\u5165\u5c5e\u4e8e $S_2$ \u7684\u6570\u4e4b\u524d\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u628a $S_1$ \u4e2d\u80fd\u5f39\u51fa\u7684\u6570\u90fd\u5f39\u51fa\u6765\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u5f97\u5b57\u5178\u5e8f\u6700\u5c0f\u4e86\u3002\n\n~~\u8bf4\u662f\u8fd9\u4e48\u8bf4\uff0c\u4f46\u8fd9\u9053\u9898\u6211\u4e00\u70b9\u601d\u8def\u90fd\u6ca1\u6709\uff0c\u5168\u90fd\u662f\u770b\u9898\u89e3\u5199\u51fa\u6765\u7684\u2026\u2026~~\n\n## \u4ee3\u7801\u5b9e\u73b0\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<vector>\n#include<queue>\nusing namespace std;\nconst int N=1000+7;\nint n,val[N],minx[N],col[N];\nbool flag;\nvector<int> p[N];\nvoid init(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&val[i]);\n\tminx[n+1]=n+1;\n\tfor(int i=n;i>=1;i--)\n\t\tminx[i]=min(minx[i+1],val[i]);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t\tif(val[i]<val[j]&&minx[j+1]<val[i]) p[i].push_back(j),p[j].push_back(i);\n}\nvoid run(){\n\tfor(int i=1;i<=n;i++)\n\t\tif(!col[i]){\n\t\t\tqueue<int> q;\n\t\t\tcol[i]=1;\n\t\t\tq.push(i);\n\t\t\twhile(!q.empty()){\n\t\t\t\tint u=q.front();\n\t\t\t\tq.pop();\n\t\t\t\tfor(int j=0;j<p[u].size();j++){\n\t\t\t\t\tint v=p[u][j];\n\t\t\t\t\tif(col[v]){\n\t\t\t\t\t\tif(col[v]==col[u]){\n\t\t\t\t\t\t\tflag=1;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tcol[v]=3-col[u];\n\t\t\t\t\tq.push(v);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n}\nstruct stack{\n\tint a[N],p=0;\n\tint top(){ return a[p]; }\n\tbool empty(){ return p==0; }\n\tvoid pop(){ if(p) p--;}\n\tvoid push(int x){ a[++p]=x; }\n}s[3];\nint now;\nbool judge(int id){\n\tif(s[id].empty()||s[id].top()!=now+1) return 0;\n\treturn 1;\n}\nvoid Pop(int id){\n\tnow++;\n\ts[id].pop();\n\tputchar(id==1 ?'b' :'d');\n\tputchar(' ');\n}\nvoid Push(int v,int id){\n\tif(id==2) while(judge(1)) Pop(1);\n\twhile(!s[id].empty()&&s[id].top()<v){\n\t\tif(!judge(id)) Pop(3-id);\n\t\telse Pop(id);\n\t}\n\tif(id==2) while(judge(1)) Pop(1);\n\ts[id].push(v);\n\tputchar(id==1 ?'a' :'c');\n\tputchar(' ');\n}\nvoid print(){\n\tfor(int i=1;i<=n;i++){\n\t\tPush(val[i],col[i]);\n\t}\n\twhile(!s[1].empty()){\n\t\tif(!judge(1)) Pop(2);\n\t\telse Pop(1);\n\t}\n\twhile(!s[2].empty()) Pop(2);\n}\nint main(){\n\t//freopen(\"1.txt\",\"r\",stdin);\n\t//freopen(\"2.txt\",\"w\",stdout);\n\tinit();\n\trun();\n\tif(flag){\n\t\tprintf(\"0\");\n\t\treturn 0;\n\t}\n\tprint();\n\treturn 0;\n}\n```\n\n\n\n\n\n\n\n",
        "postTime": 1563362740,
        "uid": 113693,
        "name": "BruceW_07",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1155 \u3010\u53cc\u6808\u6392\u5e8f\u3011"
    },
    {
        "content": "\u7b2c\u4e00\u9053\u84dd\u9898\uff0c\u65b0\u9ad8\u4e00\u849f\u84bb\u7b2c\u4e00\u6b21\u53d1\u9898\u89e3\u5e0c\u671b\u8fd9\u6b21\u80fd\u987a\u5229\u3002\u770b\u5230\u8fd9\u9053\u9898\u6839\u672c\u60f3\u4e0d\u5230\u7528\u4e8c\u5206\u56fe\u67d3\u8272\uff0c\u800c\u662f\u7528\u6a21\u62df + \u8d2a\u5fc3\uff0c\u666e\u901a\u6570\u636e $AC$ \u4e86\uff0c\u65b0\u589e\u6570\u636e\u5361\u4e86\u6211\u4e00\u4e2a\u70b9\uff0c\u4e0b\u8f7d\u4e86\u6570\u636e\u624d\u77e5\u9053\u628a\u84dd\u9898\u60f3\u5f97\u592a\u7b80\u5355\u4e86\u3002\u7b49\u4e0b\u4e5f\u4f1a\u5c06\u6211\u7684\u539f\u6253\u6cd5\u5c55\u793a\u51fa\u6765\uff0c\u5927\u5bb6\u770b\u770b\u80fd\u4e0d\u80fd\u6539\u6210\u6b63\u89e3\u3002\n\n_\u5148\u770b\u9898\u76ee_ \uff1a\u4e24\u4e2a\u6808\uff0c 4 \u79cd\u64cd\u4f5c\uff0c\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\u6211\u4eec\u90fd\u77e5\u9053\u6808\u7684\u6027\u8d28\u662f\u5148\u8fdb\u540e\u51fa\u3002\u5373\u4f7f\u662f 2 \u4e2a\u6808\uff0c\u5c06\u6808\u4e2d\u5143\u7d20\u6309\u5012\u5e8f\u8f93\u51fa\u65f6\uff0c\u5176\u76f8\u5bf9\u4f4d\u7f6e\u4fdd\u6301\u4e0d\u53d8\uff0c\u5373\u82e5\u8981\u5c06\u6570\u7ec4\u6309\u5347\u5e8f\u8f93\u51fa\uff0c\u4e24\u6808\u5185\u5747\u987b\u4fdd\u8bc1\u964d\u5e8f\u6392\u5217\u3002\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u4e24\u4e2a\u5143\u7d20**\u4e0d\u80fd**\u5904\u4e8e\u540c\u4e00\u6808\u5185\u3002\u5f88\u7b80\u5355\uff0c\u5982\u679c\u5b58\u5728\u4e09\u4e2a\u6570 $i,j,k$, \u6ee1\u8db3 $i<j<k$ \u4e14 $a_k<a_i<a_j$, \u90a3\u4e48 $a_i$ \u548c $a_j$ \u5fc5\u7136\u65e0\u6cd5\u5904\u4e8e\u540c\u4e00\u6808\u4e2d\u3002\u56e0\u4e3a $a_i$ \u5fc5\u987b\u5728 $a_j$ \u4e4b\u524d\u8f93\u51fa\uff0c$a_k$ \u53c8\u5fc5\u987b\u5728 $a_i$ \u4e4b\u524d\u8f93\u51fa\uff0c\u53ef\u662f $a_i$ \u5728 $a_k$ \u4e4b\u524d\uff0c\u7531\u6b64\u53ef\u77e5 $a_i$ \u65e0\u6cd5\u8f93\u51fa\uff0c\u6240\u4ee5 $i,j$ \u5fc5\u7136\u65e0\u6cd5\u5904\u4e8e\u4e00\u4e2a\u6808\u5185\u3002\u7531\u6b64\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u4ee5\u6ee1\u8db3\u4e0a\u8ff0\u6761\u4ef6\u7684 $i,j$ \u4e3a\u9876\u70b9\u7684\u65e0\u5411\u8fb9\u8fdb\u884c\u67d3\u8272\uff0c\u4fdd\u8bc1\u65e0\u5411\u8fb9\u4e24\u7aef\u70b9\u7684\u989c\u8272\u4e0d\u540c\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,N,x,k,tot,sum=1,p1=1001,p2=1001;\n//p1,p2\u5206\u522b\u662f\u68081\uff0c\u68082\u7684\u6808\u9876\u5143\u7d20\u7684\u503c\uff0c\u521d\u503c\u4e5f\u53ef\u4ee5\u8d4b\u4e3an+1 \nint a[1001],f[1005],c[1001],t[2005],head[1005];\n//f\u7528\u4e8e\u5b58\u50a8a[i]\u540e\u7684\u6700\u5c0f\u503c\uff0cc\u4e3a\u989c\u8272\uff0ct\u5b58\u50a8\u64cd\u4f5c \nchar s[5]={'0','a','b','c','d'};\nvector<int>p[1001];//p[i]\u7edf\u8ba1i\u7684\u8fb9\nqueue<int>q;//\u5e7f\u641c\u67d3\u8272\u961f\u5217 \nstack<int>s1,s2;\nstruct edge{\n\tint next,to;\n}e[2000005];\ninline void add(int x,int y){//\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u8fb9 \n\t++tot;\n\te[tot].next=head[x];\n\te[tot].to=y;\n\thead[x]=tot;\n}\ninline int read(){\n\tint x=0;bool f=1;char ch=getchar();\n\twhile(ch>'9'||ch<'0'){if(ch=='-') f=0;ch=getchar();}\n\twhile(ch<='9'&&ch>='0'){x=(x<<1)+(x<<3)+(ch^48);ch=getchar();}\n\treturn f?x:-x;\n}\nint main()\n{\n\tn=read(),f[n+1]=n+1,N=2*n;\n\tfor(int i=1;i<=n;++i) a[i]=read();\n\tfor(int i=n;i>=1;--i) f[i]=min(f[i+1],a[i]);//\u5bfb\u627ei\u4e3a\u8d77\u70b9\u7684\u6700\u5c0f\u503c\uff0c\u6ce8\u610f\u4ecen\u5f00\u59cb \n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=i+1;j<=n;++j)\n\t\t\tif(a[i]<a[j]&&a[i]>f[j+1])//\u5982\u679ci,j\u4e0d\u80fd\u5904\u4e8e\u540c\u4e00\u4e2a\u6808\uff0c\u5efa\u7acb\u4ee5i,j\u4e3a\u9876\u70b9\u7684\u65e0\u5411\u8fb9 \n\t\t\t\tadd(i,j),add(j,i);\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(!c[i])//\u5982\u679ci\u70b9\u672a\u88ab\u67d3\u8272\uff0c\u52a0\u5165\u961f\u5217 \n\t\t{\n\t\t\tq.push(i);\n\t\t\tc[i]=1;//1\u8868\u793a\u8fdb\u5165\u68081\uff0c\u56e0\u4e3a\u8981\u6c42\u6700\u5c0f\u5b57\u5178\u5e8f \n\t\t\twhile(!q.empty())\n\t\t\t{\n\t\t\t\tx=q.front();//\u53d6\u51fa\u961f\u9996\u5143\u7d20 \n\t\t\t\tq.pop();\n\t\t\t\tfor(int j=head[x];j;j=e[j].next)\n\t\t\t\t{\n\t\t\t\t\tint y=e[j].to;\n\t\t\t\t\tif(c[y])\n\t\t\t\t\t{\n\t\t\t\t\t\tif(c[y]^c[x])//\u5982\u679c\u5df2\u88ab\u67d3\u8272\u4e14\u4e0d\u51b2\u7a81\u5c31\u8df3\u8fc7\u8fd9\u6761\u8fb9 \n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tputs(\"0\");//\u5982\u679c\u53d1\u751f\u51b2\u7a81\uff08\u5373\u51fa\u73b0\u4e24\u7aef\u70b9\u989c\u8272\u76f8\u540c\uff09\u76f4\u63a5\u7ed3\u675f\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t\tc[y]=c[x]*(-1);//\u5c06\u672a\u88ab\u67d3\u8272\u7684\u70b9\u67d3\u6210\u4e0e\u961f\u9996\u5143\u7d20\u76f8\u53cd\u7684\u989c\u8272 \n\t\t\t\t\tq.push(y);//\u653e\u5165\u961f\u5217\uff0c\u7ee7\u7eed\u6269\u5c55 \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint i=1;\n\twhile(k<N)//\u5927\u6a21\u62df \n\t{\n\t\tif(!s1.empty()) p1=s1.top();\n\t\tif(!s2.empty()) p2=s2.top();\n\t\tif(c[i]==1&&(a[i]<p1||s1.empty())) s1.push(a[i]),t[++k]=1,++i;//\u6ce8\u610f\u8003\u8651\u6808\u4e3a\u7a7a\u7684\u60c5\u51b5 \n\t\telse if(p1==sum)++sum,t[++k]=2,s1.pop();\n\t\telse if(c[i]==-1&&(a[i]<p2||s2.empty()))s2.push(a[i]),t[++k]=3,++i;\n\t\telse if(p2==sum) ++sum,t[++k]=4,s2.pop();\n\t}\n\tfor(int i=1;i<=N;++i)\n\tprintf(\"%c \",s[t[i]]);\n\treturn 0;\n}\n```\n\n\n\u8fd9\u91cc\u8fd8\u9700\u8981\u89e3\u91ca\u4e00\u4e0b\u8bc1\u660e\u4e2d\u6240\u679a\u4e3e\u7684 $k$ \u7684\u4f5c\u7528\u3002\u6216\u8bb8\u6709\u4eba\u4f1a\u8d28\u7591 $k$ \u5728\u8fd9\u91cc\u7684\u4f5c\u7528\uff0c\u8ba4\u4e3a\u53ea\u9700\u8981\u6a21\u62df\u4fdd\u8bc1\u5f53\u524d\u9700\u8981\u63d2\u5165\u7684\u5143\u7d20\u5c0f\u4e8e\u6808\u9876\u5143\u7d20\u518d\u8d2a\u5fc3\u5373\u53ef\u3002\u4f46\u662f\u5fc5\u987b\u8bf4\u660e\u7684\u662f $k$ \u4e0d\u80fd\u5ffd\u7565\u3002\u4f8b\u5982\u5f53\u6570\u7ec4\u4e3a $1,2,3,4$ \u65f6\uff0c\u53ea\u679a\u4e3e $i,j$ \u5c31\u9519\u4e86\uff0c\u56e0\u4e3a\u867d\u7136\u6b64\u65f6 $a_i<a_j$ ,\u4f46 \u662f $a_i$ \u5e76\u4e0d\u4f1a\u5bf9\u540e\u9762\u9020\u6210\u5f71\u54cd\u800c\u4f7f\u76f4\u63a5\u5f39\u51fa\uff0c\u5373\u5982\u679c\u4e0d\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684 $k$ \u65f6\uff0c$i,j$ \u5e76\u4e0d\u4f1a\u76f8\u4e92\u5f71\u54cd\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981 $f$ \u6570\u7ec4\u8bb0\u5f55\u662f\u5426\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684 $k$ \u3002\n\n\n------------\n\n\u7136\u540e\u5c31\u662f\u6211\u7684\u539f\u4ee3\u7801\u4e86\uff0c\u6a21\u62df + \u8d2a\u5fc3\u7684\u7b56\u7565\u5728\u672c\u9898\u6570\u636e\u4e0b\u4fa5\u5e78 $AC$ \uff0c\u4f46\u662f\u589e\u5f3a\u6570\u636e\u8fd8\u662f $WA$ \u4e86\u4e00\u4e2a\u70b9\uff0c\u4e0b\u8f7d\u6570\u636e\u770b\u5b8c\u4e4b\u540e\u4e5f\u53d1\u73b0\u6a21\u62df\u786e\u5b9e\u8003\u8651\u4e0d\u591f\u5468\u5168\uff08\u6bd5\u7adf\u4e0d\u662f\u672c\u9898\u60f3\u8981\u7684\u601d\u8def\uff09\uff0c\u770b\u770b\u5927\u5bb6\u6709\u4ec0\u4e48\u770b\u6cd5\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint N,n,m,k,i,sum=1,a[1005],f[1005],big[1005],t[2005],p=1001,q=1001;//t\u5b58\u7b54\u6848\u987a\u5e8f\uff0cp,q\u6307\u5411\u4e24\u4e2a\u6808\u7684\u6808\u9876\u5143\u7d20 \nbool b[1005];//\u6807\u8bb0\u662f\u5426\u5df2\u5165\u6808 \nchar s[5]={'0','a','b','c','d'};\nstack<int>s1,s2;\nbool find(int x,int y,int w)\n{\n\tif(!big[w]||(x==1001&&y==1001))\n\treturn 0;\n\tfor(int i=y-1;i>x;--i)\n\tif(!b[i]&&f[i]>w&&f[i]<big[w])//\u5982\u679c\u6709\u4e00\u4e2a\u6570\u5728x,y\u4e4b\u95f4\u4e14\u5728i,big[i]\u4e4b\u95f4\u8bf4\u660ei\u53ef\u80fd\u4f1a\u5bf9\u5176\u9020\u6210\u5f71\u54cd \n\treturn 1;//\u627e\u5230\u4e86\u8fd9\u6837\u4e00\u4e2a\u6570 \n\treturn 0;\n}\nint main()\n{\n\tcin>>n;\n\tfor(i=1;i<=n;++i)\n\t{\n\t\tcin>>a[i];\n\t\tf[a[i]]=i;//\u8bb0\u5f55\u6570\u5b57\u4e0b\u6807 \n\t}\n\tfor(i=1;i<=n;++i)\n\t{\n\t\tfor(int j=n;j>i;--j)\n\t\t{\n\t\t\tif(a[j]<a[i])\n\t\t\t{\n\t\t\t\tbig[i]=j;//\u5bfb\u627ea[i]\u540e\u6700\u540e\u4e00\u4e2a\u6bd4a[i]\u5c0f\u7684\u6570\uff0c\u56e0\u4e3a\u53ea\u6709\u5f39\u51fabig[i]\u4e4b\u540e\u624d\u6709\u53ef\u80fd\u5f39\u51faa[i] \n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tN=2*n;\n\ti=1;\n\ts1.push(1001);//\u538b\u5165\u4e24\u4e2a\u5927\u6570 \n\ts2.push(1001);\n\twhile(k<N)\n\t{\n\t\tp=s1.top();\n\t\tq=s2.top();\n\t\tif(a[i]<p&&a[i]<q&&i<=n)//\u5982\u679c\u53ef\u4ee5\u9009\u62e9 \n\t\t{\n\t\t\tif(p>q&&find(q,p,i))//\u5982\u679c\u5f53\u524da[i]\u53ef\u80fd\u5f71\u54cd\u5230\u540e\u9762\u7684\u6570\uff0c\u538b\u5165\u5f53\u524d\u6570\u5c0f\u7684\u6808\uff08\u5927\u7684\u8981\u53bb\u63a5\u540e\u9762\u7684\uff09 \n\t\t\t{\n\t\t\t\ts2.push(a[i]);\n\t\t\t\tb[a[i]]=1;\n\t\t\t\tt[++k]=3;\n\t\t\t\t++i;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ts1.push(a[i]);\n\t\t\t\tb[a[i]]=1;\n\t\t\t\tt[++k]=1;\n\t\t\t\t++i;\n\t\t\t}\n\t\t}\n\t\telse if(a[i]<p&&i<=n)\n\t\t{\n\t\t\ts1.push(a[i]);\n\t\t\tb[a[i]]=1;\n\t\t\tt[++k]=1;\n\t\t\t++i;\n\t\t}\n\t\telse if(p==sum)\n\t\t{\n\t\t\t++sum;\n\t\t\tt[++k]=2;\n\t\t\ts1.pop();\n\t\t}\n\t\telse if(a[i]<q&&i<=n)\n\t\t{\n\t\t\ts2.push(a[i]);\n\t\t\tb[a[i]]=1;\n\t\t\tt[++k]=3;\n\t\t\t++i;\n\t\t}\n\t\telse if(q==sum)\n\t\t{\n\t\t\t++sum;\n\t\t\tt[++k]=4;\n\t\t\ts2.pop();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcout<<\"0\"<<endl;\n\t\t\treturn 0;\n\t\t}//\u5982\u679c\u4e00\u6b21\u64cd\u4f5c\u4e0d\u6ee1\u8db3\u4efb\u610f\u4e00\u79cd\u60c5\u51b5\uff0c\u8bf4\u660e\u65e0\u9009\u62e9\uff0c\u76f4\u63a5\u7ed3\u675f \n\t}\n\tfor(int i=1;i<=N;++i)\n\tcout<<s[t[i]]<<\" \";\n\tcout<<endl;\n\treturn 0;\n}\n```\n\u5982\u679c\u6709\u670b\u53cb\u53ef\u4ee5\u5c06\u5176\u6539\u6210\u6b63\u89e3\u4e0d\u8981\u5fd8\u8bb0\u53d1\u5728\u8bc4\u8bba\u533a\u54e6\uff01\n\n\n\n\n",
        "postTime": 1635603900,
        "uid": 546435,
        "name": "\u5218\u96e8\u946blyx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\uff1aP1155\uff08\u53cc\u6808\u6392\u5e8f\uff09"
    },
    {
        "content": "\u9996\u5148\u6765\u5206\u6790\u4e00\u4e0b\u6837\u4f8b $\\#2$ :    \n\u56e0\u4e3a $1$ \u5728\u5e8f\u5217\u7684\u672b\u5c3e\uff0c\u6240\u4ee5\u6240\u6709\u6570\u90fd\u5f97\u5148\u8fdb\u6808   \n\u89c2\u5bdf\u524d $3$ \u4e2a\u6570 $2,3,4$ \uff0c\u65e0\u8bba\u5982\u4f55\u5b89\u6392\uff0c\u90fd\u4f1a\u51fa\u73b0\u5927\u6570\u5728\u5c0f\u6570\u524d\u51fa\u6808\u7684\u60c5\u51b5   \n\u5b9e\u9645\u4e0a\uff0c\u51fa\u73b0\u8fd9\u79cd\u95ee\u9898\u7684\u539f\u56e0\u662f\u6808\u5185\u7684\u5355\u8c03\u6027\u53d7\u5230\u4e86\u7834\u574f   \n\u8fd9\u53ef\u4ee5\u7ed9\u5224\u65ad\u65e0\u89e3\u5e26\u6765\u4e00\u4e9b\u63d0\u793a     \n\u4e0d\u96be\u53d1\u73b0\uff0c\u82e5 $i<j<k$ \u4e14 $a_k<a_i<a_j$ \uff0c\u5219 $i,j,k$ \u4e0d\u80fd\u8fdb\u5165\u540c\u4e00\u4e2a\u6808  \n\u5426\u5219 $k$ \u8fdb\u6808\u5728 $i,j$ \u51fa\u6808\u4e4b\u524d\uff0c\u800c $a_i<a_j$ \uff0c\u77db\u76fe\n\n>\u5b9a\u7406\uff1a\u82e5 $i<j<k$ \u4e14 $a_k<a_i<a_j$ \uff0c\u5219\u5c06 $i,j$ \u4e4b\u95f4\u8fde\u8fb9     \n\u82e5\u5f62\u6210\u7684\u56fe\u4e0d\u662f\u4e8c\u5206\u56fe\uff0c\u5219\u65e0\u89e3\uff0c\u5426\u5219\u4e00\u5b9a\u6709\u89e3     \n\n\u8bc1\u660e\uff1a    \n\u82e5\u539f\u56fe\u4e0d\u662f\u4e8c\u5206\u56fe\uff0c\u5219\u8bf4\u660e\u56fe\u4e2d\u6709\u4e00\u4e2a\u5947\u73af    \n\u5c06\u8fd9\u4e2a\u5947\u73af\u4e0a\u7684\u70b9\u8bbe\u4e3a $p_1<p_2<,....,<p_k$   \n\u5bb9\u6613\u77e5\u9053\uff0c\u8fd9\u4e2a\u5947\u73af\u4e0a\u7684\u8fb9\u4e00\u5b9a\u662f $(p_1,p_2),...(p_{k-1},p_k),(p_k,p_1)$   \n\u8bbe $p_1,p_2,....,p_k$ \u5206\u522b\u88ab\u538b\u5165 $c_1,c_2,.....,c_k$ \u6808     \n\u53ef\u4ee5\u77e5\u9053\uff1a$c_i \\text{ xor } c_{i+1} =3,c_k \\text{ xor } c_1=3$   \n\u5219 $xor_{i=1}^{k}c_i \\text{ xor } xor_{i=1}^{k}c_i=3$ \uff0c\u77db\u76fe\uff01    \n\n\u63a5\u7740\u8bc1\u660e\u4e00\u5b9a\u6709\u89e3\uff1a   \n\u5982\u679c\u539f\u56fe\u662f\u4e8c\u5206\u56fe\uff0c\u53ef\u4ee5\u9ed1\u767d\u67d3\u8272\u5f97\u51fa\u6240\u6709\u6570\u7684\u6808\u7f16\u53f7    \n\u5b58\u5728\u4e00\u79cd\u65b9\u6848\u7b49\u4ef7\u4e8e\u6211\u4eec\u968f\u65f6\u53ef\u4ee5\u4fdd\u8bc1\u6808\u5185\u6570\u7684\u5355\u8c03\u6027    \n\u5728\u521d\u59cb\u65f6\u5355\u8c03\u6027\u663e\u7136   \n\u63a5\u4e0b\u6765\u8003\u8651\u52a0\u5165\u4e00\u4e2a\u5143\u7d20\u65f6\u662f\u5426\u8fd8\u80fd\u4fdd\u8bc1\u5355\u8c03\u6027\uff1a   \n\u5982\u679c\u76ee\u6807\u6808\u5185\u6808\u9876\u5143\u7d20\u5c0f\u4e8e\u5f53\u524d\u6570\uff0c\u5219\u7531\u6808\u5185\u5355\u8c03\u6027\u77e5\u53ef\u4ee5\u5f39\u51fa\u4e24\u4e2a\u6808\u5185\u6bd4\u5f53\u524d\u6570\u5c0f\u7684\u6240\u6709\u6570\u800c\u5176\u4ed6\u6570\u4e0d\u53d7\u5f71\u54cd    \n\u5426\u5219\u76f4\u63a5\u52a0\u5165\u5373\u53ef    \n\n\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u4f7f\u5b57\u5178\u5e8f\u6700\u5c0f\uff1a    \n* \u5728\u9ed1\u767d\u67d3\u8272\u65f6\uff0c\u80fd\u8fdb $S_1$ \u4e0d\u8fdb $S_2$   \n* \u5f39\u51fa\u65f6\u4f18\u5148\u8ba9 $S_1$ \u5148\u5f39\uff0c\u5f39\u5b8c\u4e3a\u6b62    \n* \u6700\u540e\u6e05\u7a7a\u6808\u65f6\u4e5f\u662f $S_1$ \u5148\u6e05   \n\n\u8be5\u8bf4\u7684\u90fd\u5dee\u4e0d\u591a\u4e86\uff0c\u4e0a\u4ee3\u7801\uff1a  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int NR=1e4+10;\nconst int MR=3e6+10;\nint n,a[NR],suf[NR];\n\nstruct edge{\n\tint to,next;\n}g[MR];\nint tot,fte[NR];\nvoid add(int x,int y){\n\tg[++tot]=(edge){y,fte[x]};\n\tfte[x]=tot;\n} \n\nint color[NR];\nbool check(){\n\tqueue<int>q;\n\tfor(int i=1;i<=n;i++)\n\t\tif(!color[i]){\n\t\t\tq.push(i);color[i]=1;\n\t\t\twhile(!q.empty()){\n\t\t\t\tint x=q.front();q.pop();\n\t\t\t\tfor(int j=fte[x];j;j=g[j].next){\n\t\t\t\t\tint y=g[j].to;\n\t\t\t\t\tif(color[y]){\n\t\t\t\t\t\tif(color[y]==color[x])return false;\n\t\t\t\t\t\telse continue;\n\t\t\t\t\t}\n\t\t\t\t\tcolor[y]=color[x]^3;\n\t\t\t\t\tq.push(y);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\treturn true;\n}\n\nint now;\nstack<int>s[2];\nbool check(int id){\n\tif(s[id].empty()||s[id].top()!=now+1)return false;\n\treturn true;\n}\nvoid remove(int id){\n\tnow++;\n\tif(!s[id].empty())s[id].pop();\n\tif(id==1)cout<<\"b \";\n\telse cout<<\"d \";\n}\n\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)cin>>a[i];\n\tsuf[n+1]=n+1;\n\tfor(int i=n;i>=1;i--)suf[i]=min(suf[i+1],a[i]);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t\tif(a[i]<a[j]&&a[i]>suf[j+1])\n\t\t\t\tadd(i,j),add(j,i);\n\tif(!check()){\n\t\tputs(\"0\");\n\t\treturn 0;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(color[i]==2)\n\t\t\twhile(check(1))remove(1);\n\t\twhile(!s[color[i]].empty()&&s[color[i]].top()<a[i]){\n\t\t\tif(!check(color[i]))remove(3^color[i]);\n\t\t\telse remove(color[i]);\n\t\t}\n\t\tif(color[i]==2)\n\t\t\twhile(check(1))remove(1);\n\t\ts[color[i]].push(a[i]);\n\t\tif(color[i]==1)cout<<\"a \";\n\t\telse cout<<\"c \";\n\t}\n\twhile(!s[1].empty()){\n\t\tif(!check(1))remove(2);\n\t\telse remove(1);\n\t}\n\twhile(!s[2].empty())remove(2);\n\treturn 0;\n}\n```",
        "postTime": 1632102307,
        "uid": 117771,
        "name": "intel_core",
        "ccfLevel": 7,
        "title": "\u53cc\u6808\u6392\u5e8f \u9898\u89e3"
    },
    {
        "content": "# \u601d\u8def\n\n\u6211\u4eec\u9996\u5148\u8003\u8651\u53ea\u6709\u4e00\u4e2a\u6808\u7684\u60c5\u51b5\uff0c\u5982\uff1a\n```\n4\n1 3 4 2\n```\n\n\u5f88\u5bb9\u6613\u60f3\u51fa\u4e00\u4e2a\u7b56\u7565\uff0c\u5f53\u6808\u9876\u5143\u7d20\u662f\u8981\u51fa\u6808\u7684\u5143\u7d20\u65f6\uff0c\u5c31\u628a\u5b83\u51fa\u6808\uff0c\u5426\u5219\u4e0d\u51fa\u6808\u3002\n\n\u6211\u4eec\u7528\u8fd9\u4e2a\u7b56\u7565\u53bb\u6a21\u62df\u8fd9\u7ec4\u6570\u636e\uff1a\n\n\u5c06 $1$ \u5165\u6808\u3002\n\n\u5c06 $1$ \u51fa\u6808\u3002\n\n\u5c06 $3$ \u5165\u6808\u3002\n\n\u5c06 $4$ \u5165\u6808\u3002\n\n\u5c06 $2$ \u5165\u6808\u3002\n\n\u5c06 $2$ \u51fa\u6808\u3002\n\n\u8fd9\u65f6\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u73b0\u5728\u672c\u5e94\u8be5\u51fa\u6808\u7684 $3$ \u5374\u88ab $4$ \u5835\u5728\u4e86\u91cc\u9762\uff0c\u8fd9\u662f\u56e0\u4e3a\u8981\u628a $4$ \u5f39\u51fa\u5fc5\u987b\u5148\u628a $3$ \u5f39\u51fa\uff0c\u800c $3$ \u88ab $4$ \u5835\u5728\u6808\u4e2d\u65e0\u6cd5\u5f39\u51fa\uff0c\u53d1\u751f\u4e86\u51b2\u7a81\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u8fd9\u6b21\u6a21\u62df\u4e2d\u603b\u7ed3\u4e00\u4e2a\u7ecf\u9a8c\uff1a\u5165\u6808\u5143\u7d20\u4e00\u5b9a\u4e0d\u80fd\u6bd4\u6808\u9876\u5143\u7d20\u5c0f\u3002\n\n\u56de\u5230\u672c\u9898\uff0c\u4e3a\u4e86\u4f7f\u7b54\u6848\u7684\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u663e\u7136\u6709\u4e00\u4e2a\u8d2a\u5fc3\u7b56\u7565\uff1a\u80fd\u8fdb\u884c $a$ \u64cd\u4f5c\u5c31\u8fdb\u884c $a$ \u64cd\u4f5c\uff0c\u5426\u5219\u80fd\u8fdb\u884c $b$ \u64cd\u4f5c\u5c31\u8fdb\u884c $b$ \u64cd\u4f5c\uff0c\u5426\u5219\u80fd\u8fdb\u884c $c$ \u64cd\u4f5c\u5c31\u8fdb\u884c $c$ \u64cd\u4f5c\uff0c\u5426\u5219\u80fd\u8fdb\u884c $d$ \u64cd\u4f5c\u5c31\u8fdb\u884c $d$ \u64cd\u4f5c\uff0c\u5426\u5219\u8fd9\u4e2a\u5e8f\u5217\u5c31\u4e0d\u662f \u201d\u53ef\u53cc\u6808\u6392\u5e8f\u6392\u5217\u201d\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u5c3d\u91cf\u8981\u628a\u5f53\u524d\u5143\u7d20\u653e\u8fdb $S1$ \u91cc\uff0c\u4f46\u8981\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u70b9\uff1a\n\n\u5f53\u524d\u5143\u7d20\u5c0f\u4e8e $S1$ \u7684\u6808\u9876\u5143\u7d20\u3002\n\n\u6700\u91cd\u8981\uff0c\u4e5f\u662f\u6700\u96be\u7684\u4e00\u70b9\u3002\u5f53 $S1$ , $S2$ \u90fd\u53ef\u4ee5\u653e\u65f6\uff0c\u6709\u53ef\u80fd\u653e\u5165 $S1$ \u4f1a\u5bfc\u81f4\u540e\u9762\u7684\u5143\u7d20\u51fa\u6808\u65f6\u53d1\u751f\u51b2\u7a81\uff0c\u6240\u4ee5\u5f53\u8fd9\u79cd\u60c5\u51b5\u51fa\u73b0\u65f6\uff0c\u5c31\u4e0d\u8981\u628a\u5143\u7d20\u653e\u8fdb $S1$ \u91cc\u3002\u600e\u4e48\u5224\u65ad\u628a\u5f53\u524d\u5143\u7d20\u653e\u8fdb $S1$ \u91cc\u540e\u9762\u7684\u5143\u7d20\u4f1a\u53d1\u751f\u51b2\u7a81\u5462\uff1f\u6211\u4eec\u901a\u8fc7\u4e4b\u524d\u7684\u6a21\u62df\u77e5\u9053\u4e00\u4e2a\u5143\u7d20\u5165\u6808\u7684\u4e00\u4e2a\u6761\u4ef6\u662f\u8981\u5c0f\u4e8e\u6808\u9876\u5143\u7d20\uff0c\u8fd9\u6837\u6211\u4eec\u53bb\u67e5\u627e\u5f53\u524d\u5143\u7d20\u7684\u540e\u9762\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u6bd4\u5b83\u5927\uff0c\u5e76\u4e14\u6bd4 $S2$ \u7684\u6808\u9876\u5143\u7d20\u5927\u7684\u5143\u7d20\uff08\u8fd9\u6837\u5b83\u5c31\u653e\u4e0d\u4e86\uff09\uff0c\u5982\u679c\u6709\uff0c\u90a3\u4e48\u5224\u65ad\u5b83\uff08\u5fc5\u987b\u7b2c\u4e00\u4e2a\uff09\u540e\u9762\u662f\u5426\u6709\u6bd4\u5f53\u524d\u5143\u7d20\u5c0f\u4e14\u6bd4 $S2$  \u6808\u9876\u5143\u7d20\u5c0f\u7684\u6570\uff08\u8fd9\u6837\u5b83\u4eec\u5c31\u51fa\u4e0d\u4e86\u6808\uff09\u3002\u5982\u679c\u6709\uff0c\u5c31\u8bf4\u660e\u628a\u5f53\u524d\u5143\u7d20\u653e\u8fdb $S1$ \u4e2d\u540e\u9762\u5143\u7d20\u4f1a\u53d1\u751f\u51b2\u7a81\u3002\n\n### check \u51fd\u6570\uff1a\n\n```cpp\nbool check (int pos)\n{\n    int now_ = now;\n    while (!te && tt == now_ ++)\n    {\n        w.push (tt), t.pop ();\n    }\n    #define end while (!w.empty ()) t.push (w.top ()), w.pop ();\n    if (te)\n    {\n        end;\n        return 1;\n    }\n    for (int i = pos + 1; i <= n; i ++)\n    {\n        if (a[i] < a[pos] || a[i] < tt)\n        {\n            continue;\n        }\n        for (int j = i + 1; j <= n; j ++)\n        {\n            if (a[j] < a[pos] && a[j] < tt)\n            {\n                end;\n                return 0;\n            }\n        }\n        break;\n    }\n    end;\n    return 1;\n}\n```\n\n## AC Code\n```cpp\n#include<bits/stdc++.h>\n#include <cstdio>\n#include <stack>\n#define N 1005\nusing namespace std;\n\nint n, pos = 1, now = 1, cnt, a[N], out[N * 2];\nstack <int> s, t, w;\n\n#define st (s.top ())\n#define tt (t.top ())\n#define se (s.empty ())\n#define te (t.empty ())\n\nbool check (int pos)\n{\n    int now_ = now;\n    while (!te && tt == now_ ++)\n    {\n        w.push (tt), t.pop ();\n    }\n    #define end while (!w.empty ()) t.push (w.top ()), w.pop ();\n    if (te)\n    {\n        end;\n        return 1;\n    }\n    for (int i = pos + 1; i <= n; i ++)\n    {\n        if (a[i] < a[pos] || a[i] < tt)\n        {\n            continue;\n        }\n        for (int j = i + 1; j <= n; j ++)\n        {\n            if (a[j] < a[pos] && a[j] < tt)\n            {\n                end;\n                return 0;\n            }\n        }\n        break;\n    }\n    end;\n    return 1;\n}\n\nint main ()\n{\n    scanf (\"%d\", &n);\n    for (int i = 1; i <= n; i ++)\n    {\n        scanf (\"%d\", &a[i]);\n    }\n    for (int i = 1; i <= n * 2; i ++)\n    {\n        if (pos <= n && (se || a[pos] < st) && check (pos))\n        {\n            s.push (a[pos ++]), out[++ cnt] = 0;\n        }\n        else if (!se && st == now)\n        {\n            s.pop (), out[++ cnt] = 1, now ++;\n        }\n        else if (pos <= n && (te || a[pos] < tt))\n        {\n            t.push (a[pos ++]), out[++ cnt] = 2;\n        }\n        else if (!te && tt == now)\n        {\n            t.pop (), out[++ cnt] = 3, now ++;\n        }\n        else\n        {\n            putchar ('0');\n            return 0;\n        }\n    }\n    for (int i = 1; i <= n * 2; i ++)\n    {\n        putchar ('a' + out[i]), putchar (' ');\n    }\n    return 0;\n}\n```",
        "postTime": 1669446317,
        "uid": 704435,
        "name": "Flash_Dang",
        "ccfLevel": 0,
        "title": "P1155\u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u7531 $1 \\sim n$ \u7ec4\u6210\u7684\u5e8f\u5217 $\\{a_i\\}$\uff0c\u95ee\u662f\u5426\u80fd\u7528\u4e24\u4e2a\u6808 $S_1,\\ S_2$\uff0c\u8fd0\u7528\u67d0\u79cd\u51fa\u5165\u6808\u65b9\u5f0f\u4f7f\u5e8f\u5217\u53d8\u4e3a $1 \\sim n$ \u7684\u5355\u589e\u5e8f\u5217\uff0c\u8f93\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u64cd\u4f5c\u5e8f\u5217\u3002\n\n### \u7b97\u6cd5\n\n\u901a\u8fc7\u89c2\u5bdf\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f53 $\\exists \\ (x,y,z)$\uff0c\u6ee1\u8db3 $x<y<z$ \u4e14 $a_z < a_x < a_y$ \u65f6\uff0c$a_x, a_y$ \u4e0d\u53ef\u80fd\u51fa\u73b0\u5728\u540c\u4e00\u4e2a\u6808\u4e2d\u3002\u7ed3\u8bba\u6613\u8bc1\u3002\n\n\u60f3\u5230\u4f7f\u7528\u4e8c\u5206\u56fe\u5339\u914d\u7684\u65b9\u6cd5\u6c42\u89e3\uff1a\u82e5\u5b58\u5728\u4e0a\u8ff0\u4e09\u5143\u7ec4\uff0c\u610f\u5473\u7740 $a_x, a_y$ \u4e0d\u53ef\u540c\u6808\uff0c\u5219\u5728 $x,y$ \u4e4b\u95f4\u8fde\u65e0\u5411\u8fb9 $(x,y)$\uff0c\u4ee3\u8868 $x, y$ \u4e0d\u53ef\u540c\u6808\uff0c\u6070\u5de7\u7b26\u5408\u4e8c\u5206\u56fe\u7684\u6027\u8d28\u3002\u81ea\u6b64\uff0c\u5efa\u56fe\u5b8c\u6bd5\u3002\n\n\u63a5\u4e0b\u6765\u91c7\u7528\u4e8c\u5206\u56fe\u67d3\u8272\u6cd5\u5224\u5b9a\u4e8c\u5206\u56fe\uff0c\u5373\u5bfb\u627e\u56fe\u4e2d\u662f\u5426\u5b58\u5728\u5947\u73af\uff0c\u64cd\u4f5c\u4e3a **dfs** \u5339\u914d\u3002\u6b64\u6b65\u9aa4\u4e3a\u4e8c\u5206\u56fe\u5904\u7406\u7684\u7ecf\u5178\u7b97\u6cd5\uff0c\u7565\u3002 \n\n\u82e5\u4e0a\u8ff0\u6d41\u7a0b\u6210\u529f\u5339\u914d\u4e8c\u5206\u56fe\uff0c\u5219\u53ef\u6839\u636e\u67d3\u8272\u7ed3\u679c\u76f4\u63a5\u5f97\u51fa\u51fa\u5165\u6808\u7684\u64cd\u4f5c\u5e8f\u5217 $S$\uff0c\u4f46\u6b64\u65f6\u7b97\u6cd5\u5e76\u672a\u7ed3\u675f\uff1a\u9898\u76ee\u8981\u6c42\u64cd\u4f5c\u5e8f\u5217\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\u901a\u8fc7\u7b80\u5355\u5206\u6790\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0d\u540c\u6808\u4e4b\u95f4\u7684\u76f8\u5f02\u64cd\u4f5c\u76f8\u4e92\u72ec\u7acb\uff0c\u5373\u5bf9\u4e8e $\\forall x \\in Z^+, x \\in [1, len(S))$ \u82e5\u6ee1\u8db3 $S_x = c, \\ S_{x+1} = b$ \u6216 $S_x = d, \\ S_{x + 1} = a$\uff0c\u6211\u4eec\u5747\u53ef\u4ee5\u4ea4\u6362 $(S_x, S_{x+1})$ \u4f7f\u5b57\u5178\u5e8f\u66f4\u5c0f\u3002\n\n\u81f3\u6b64\uff0c\u7b97\u6cd5\u7ed3\u675f\uff0c\u8f93\u51fa\u7ed3\u679c\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n\n```c++\n#include <iostream>\n#include <vector>\n#include <cstdlib>\n#include <stack>\n\nusing namespace std;\n\nconst int Max = 1005;\n\nint n, cnt, a[Max], color[Max], t = 1;\nvector<int> g[Max];\nstack<int> s1, s2;\nchar s[Max << 2];\n\nvoid dfs(int x, int c) {\n    color[x] = c;\n    for (int i = 0; i < g[x].size(); i++) {\n        int y = g[x][i];\n        if (!color[y])\n            dfs(y, 3 - c);\n        else if (color[y] == color[x]) { // \u5b58\u5728\u5947\u73af\uff0c\u65e0\u89e3\n            cout << 0 << endl;\n            exit(0);\n        }\n    }\n}\n\nint main() {\n    cin >> n;\n    for (int i = 1; i <= n; i++)\n        cin >> a[i];\n\n    for (int i = n - 1, x = a[n]; i > 1; i--) {\n        for (int j = 1; j < i; j++)\n            if (x < a[j] && a[j] < a[i]) { // \u7b26\u5408\u6761\u4ef6\uff0c\u52a0\u8fb9\n                g[a[i]].push_back(a[j]);\n                g[a[j]].push_back(a[i]);\n            }\n        x = min(x, a[i]);\n    }\n\n    for (int i = 1; i <= n; i++) // \u4e8c\u5206\u56fe\u67d3\u8272\n        if (!color[a[i]])\n            dfs(a[i], 1);\n\n    for (int i = 1; i <= n; i++) { // \u6839\u636e\u67d3\u8272\u7ed3\u679c\u5f97\u5230\u64cd\u4f5c\u5e8f\u5217\n    \tif (color[a[i]] == 1) {\n            s1.push(a[i]);\n            s[++cnt] = 'a';\n        } else {\n            s2.push(a[i]);\n            s[++cnt] = 'c';\n        }\n        \n        while (!s1.empty() && s1.top() == t || !s2.empty() && s2.top() == t)\n\t        if (!s1.empty() && s1.top() == t) {\n\t            s1.pop();\n\t            s[++cnt] = 'b';\n\t            t++;\n\t        } else {\n\t            s2.pop();\n\t            s[++cnt] = 'd';\n\t            t++;\n\t        }\n    }\n    \n    for (int i = cnt - 1; i; i--) // \u5fae\u8c03\u5b57\u5178\u5e8f\n        for (int j = i; j < cnt; j++) \n            if (s[j] == 'c' && s[j + 1] == 'b' || s[j] == 'd' && s[j + 1] == 'a')\n            \tswap(s[j], s[j + 1]);\n            else\n            \tbreak;\n\n    for (int i = 1; i <= cnt; i++)\n        cout << s[i] << ' ';\n\n    return 0;\n}\n```\n\n",
        "postTime": 1660136163,
        "uid": 258563,
        "name": "\u6211\u662f\u900d\u900d",
        "ccfLevel": 6,
        "title": "P1155"
    },
    {
        "content": "# \u521d\u6b65\u5206\u6790\n\u89c2\u5bdf\u6837\u4f8b\u4e09\uff0c\u53d1\u73b0\u8fd9\u91cc\u628a $2$ \u548c $3$ \u653e\u5728\u4e86\u4e0d\u540c\u7684\u6808\u91cc\uff0c\u90a3\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u653e\u5728\u540c\u4e2a\u6808\u91cc\u5462\uff1f\u5982\u679c\u628a\u5b83\u4eec\u653e\u5728\u540c\u4e2a\u6808\u91cc\uff0c\u56e0\u4e3a $2$ \u6bd4 $3$ \u5c0f\uff0c\u6240\u4ee5 $2$ \u8981\u5148\u51fa\u6808\uff0c\u4f46 $3$ \u628a\u5b83\u6321\u4f4f\u4e86\uff0c\u65e0\u6cd5\u8fdb\u884c\u64cd\u4f5c\uff0c\u5f97\u51fa\u7ed3\u8bba\uff1a\u6bcf\u4e2a\u6808\u91cc\u7684\u6570\u9700\u5355\u8c03\u9012\u589e  \n\n# \u6a21\u62df\n\u6839\u636e\u8be5\u7ed3\u8bba\u76f4\u63a5\u8fdb\u884c\u6a21\u62df\u662f\u9519\u7684\uff0c\u53cd\u4f8b\uff1a\u6570\u5217 $7,2,5,1,4,6,3$ \n```cpp\n\u76f4\u63a5\u6a21\u62df\u7684\u8fc7\u7a0b\uff1a\n\nS1| 7\nS2|\n\nS1| 7 2\nS2|\n\nS1| 7 2\nS2| 5\n\nS1| 7\t//1,2\u5f39\u51fa\u4e86\nS2| 5\n\nS1| 7 4\nS2| 5\n\n//\u6b64\u65f66\u65e0\u6cd5\u653e\u5165\u6808\u5185\n\u6b63\u89e3\uff1a\n\nS1| 7\nS1| 5 4\n\nS1| 7 6\nS2| 5 4\n\n//6\u6210\u529f\u653e\u5165\u6808\u5185\n```\n# \u6df1\u5165\u5206\u6790\n\u901a\u8fc7\u8be5\u7ed3\u8bba\uff0c\u53ef\u4ee5\u5f97\u77e5\u5728 $i<j$ \u4e14 $a_i<a_j$ \u4e14 $a_i$ \u8fd8\u5728\u6808\u4e2d\u7684\u60c5\u51b5\u4e0b\uff0c$a_j$ \u5fc5\u987b\u548c $a_i$ \u653e\u5728\u4e0d\u540c\u7684\u6808\u4e2d\uff0c\u90a3\u5982\u4f55\u5224\u65ad $a_i$ \u8fd8\u5728\u6808\u4e2d\u5462\uff1f\u4e0d\u59a8\u52a0\u5165\u4e00\u4e2a\u6570 $a_k$\uff0c\u5f53 $i<j<k$ \u4e14 $a_k<a_i<a_j$ \u65f6\uff0c$a_i$ \u548c $a_j$ \u4e0d\u80fd\u653e\u5728\u540c\u4e00\u4e2a\u6808\u4e2d  \n\n\u7528\u8fd9\u79cd\u65b9\u6cd5\uff0c\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6240\u6709\u51b2\u7a81\u7684\u6570\u5bf9\uff0c\u4f46\u9700\u8981 $O(n^3)$ \u7684\u65f6\u95f4\u6765\u679a\u4e3e $i,j,k$ \uff0c\u5f97\u4f18\u5316\u5230 $O(n^2)$  \n\n\u5206\u6790\u5f0f\u5b50\u53ef\u77e5\uff0c\u5f97\u51fa\u7684\u5173\u7cfb\u53ea\u4e0e $a_i,a_j$ \u6709\u5173\uff0c\u53ea\u9700\u627e\u5230\u4e00\u4e2a $a_k<a_i$ \u5373\u53ef\uff0c\u5f88\u660e\u663e\uff0c\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a\u6570\u7ec4\u8868\u793a\u6570\u5217\u7684\u540e\u7f00 $min$ \uff0c\u7528 $O(1)$ \u7684\u65f6\u95f4\u53d6\u51fa $a_{j+1}$ \u5230 $a_n$ \u7684\u6700\u5c0f\u503c\u4f5c\u4e3a $a_k$ \uff0c\u8fd9\u6837\u5c31\u538b\u7f29\u5230\u4e86 $O(n^2)$  \n\n# \u4e8c\u5206\u56fe\u67d3\u8272\n\u5bf9\u4e8e\u6240\u6709\u51b2\u7a81\u7684\u6570\u5bf9\uff0c\u53ef\u4ee5\u628a\u5b83\u4eec\u8fdb\u884c\u5212\u5206\uff0c\u628a\u51b2\u7a81\u7684\u4e24\u4e2a\u6570\u5206\u914d\u5728\u4e0d\u540c\u6808\u91cc\uff0c\u8fd9\u91cc\u91c7\u7528\u4e8c\u5206\u56fe\u67d3\u8272\u6765\u5212\u5206\uff08\u5982\u679c\u65e0\u6cd5\u628a\u4e00\u5bf9\u51b2\u7a81\u7684\u6570\u5bf9\u5212\u5206\u5230\u4e0d\u540c\u7684\u6808\u91cc\uff0c\u5219\u65e0\u89e3\uff09\n\n\u95ee\u9898\u6765\u4e86\uff0c\u6211\u4eec\u5e94\u4ece\u54ea\u4e2a\u70b9\u5f00\u59cb\u67d3\u8272\uff1f\u8d77\u59cb\u70b9\u8be5\u5206\u914d\u5230\u6808\u4e00\u8fd8\u662f\u6808\u4e8c\uff1f\u4e3a\u4e86\u6ee1\u8db3\u9898\u76ee\u8981\u6c42\u7684\u6700\u5c0f\u5b57\u5178\u5e8f\uff0c\u6700\u9760\u524d\u7684\u6570\u4e00\u5b9a\u5f97\u653e\u5728\u6808\u4e00\u91cc\uff0c\u4e0d\u59a8\u9009\u62e9\u5b83\u4e3a\u8d77\u59cb\u70b9\n\n\u6ce8\u610f\uff1a\u56fe\u4e0d\u4e00\u5b9a\u662f\u5b8c\u5168\u8054\u901a\u7684\uff0c\u56e0\u6b64\u8981\u8fdb\u884c\u591a\u6b21\u4e8c\u5206\u56fe\u67d3\u8272\n\n# \u7edf\u8ba1\u7ed3\u679c\n\u67d3\u5b8c\u8272\uff0c\u7b54\u6848\u5c31\u57fa\u672c\u51fa\u6765\u4e86\uff0c\u4f46\u5bf9\u4e8e\u5355\u72ec\u7684\u4e0d\u6784\u6210\u51b2\u7a81\u7684\u70b9\uff0c\u8be5\u628a\u5b83\u5206\u914d\u5230\u54ea\u4e2a\u6808\u91cc\u5462\uff1f\u7b54\u6848\u662f\u6808\u4e00\uff0c\u56e0\u4e3a\u5b83\u4e0d\u4f1a\u6784\u6210\u4efb\u4f55\u51b2\u7a81\uff0c\u6240\u4ee5\u53ef\u4ee5\u968f\u610f\u653e\uff0c\u653e\u5728\u6808\u4e00\u53ef\u4ee5\u6ee1\u8db3\u6700\u5c0f\u5b57\u5178\u5e8f\n\n\u5751\u70b9\uff1a\u6570\u5217 $2,4,1,3,5$  \n\u6309\u4e0a\u8ff0\u65b9\u6cd5\u8fdb\u884c\u6a21\u62df\u7684\u7b54\u6848\u4e3a $acabbabdab$  \n\u6b63\u89e3\uff1a$acabbabadb$  \n\n\u53ef\u4ee5\u53d1\u73b0\uff0c$a$ \u548c $d$ \u662f\u4e24\u4e2a\u4e0d\u540c\u6808\u7684\u64cd\u4f5c\uff0c\u56e0\u6b64\u5b83\u4eec\u7684\u5148\u540e\u987a\u5e8f\u65e0\u5173\u7d27\u8981\uff0c\u6240\u4ee5\u5bf9\u4e8e\u76f8\u90bb\u7684 $d$ \u548c $a$ \uff0c\u76f4\u63a5\u628a $a$ \u653e\u5230 $d$ \u524d\u9762\u5373\u53ef\n\n# \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,a[1001],mi[1001],cl[1001],f=1,t,nw=1;\nchar ans[2001];\nstack <int> q1,q2;\nvector <int> eg[1001];\nvoid dfs(int u,int p){//\u4e8c\u5206\u56fe\u67d3\u8272\n\tcl[u]=p;\n\tint v;\n\tfor(int i=0;i<eg[u].size();i++){\n\t\tv=eg[u][i];\n\t\tif(cl[v]==0)dfs(v,(p==1?2:1));\n\t\telse if(cl[v]==p)f=0;\n\t}\n}\nvoid Pop(){\n\twhile(1){\n\t\tif(!q1.empty()&&q1.top()==nw){\n\t\t\tq1.pop();\n\t\t\tt++;ans[t]='b';\n\t\t\tnw++;\n\t\t}\n\t\telse if(!q2.empty()&&q2.top()==nw){\n\t\t\tq2.pop();\n\t\t\tt++;ans[t]='d';\n\t\t\tnw++;\n\t\t}\n\t\telse break;\n\t}\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)cin>>a[i];\n\tmi[n]=a[n];\n\tfor(int i=n-1;i>=1;i--)mi[i]=min(a[i],mi[i+1]);//\u524d\u7f00min\n\tfor(int i=1;i<n-1;i++){\n\t\tfor(int j=i+1;j<n;j++){\n\t\t\tif(a[i]<a[j]&&mi[j+1]<a[i]){\n\t\t\t\teg[i].push_back(j);\n\t\t\t\teg[j].push_back(i);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)if(cl[i]==0)dfs(i,1);\n\tif(f==0){\n\t\tcout<<0;\n\t\treturn 0;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tPop();\n\t\tif(cl[i]==1){\n\t\t\tq1.push(a[i]);\n\t\t\tt++;ans[t]='a';\n\t\t}\n\t\telse{\n\t\t\tq2.push(a[i]);\n\t\t\tt++;ans[t]='c';\n\t\t}\n\t}\n\tPop();\n\tfor(int k=1;k<=n;k++){\n\t\tfor(int i=1;i<2*n;i++){\n\t\t\tif(ans[i]=='d'&&ans[i+1]=='a')swap(ans[i],ans[i+1]);//\u5bf9a\u548cd\u7684\u7279\u6b8a\u64cd\u4f5c\n\t\t}\n\t}\n\tfor(int i=1;i<=2*n;i++)cout<<ans[i]<<' ';\n\treturn 0;\n}\n```\n",
        "postTime": 1636722857,
        "uid": 319973,
        "name": "NREA",
        "ccfLevel": 5,
        "title": "P1155\u9898\u89e3"
    },
    {
        "content": "  \u63d0\u4f9b\u4e00\u79cd\u5e76\u67e5\u96c6\u7684\u5199\u6cd5\uff0c\u672c\u8d28\u4e0a\u548c\u4e8c\u5206\u56fe\u67d3\u8272\u4e00\u6837\u3002\n  \n  \u9996\u5148\u601d\u8003\u4ec0\u4e48\u65f6\u5019\u4e0d\u80fd\u5728\u4e00\u4e2a\u6808\u5185\uff1a\u5982\u679c\u5b58\u5728 $i<j<k$ ,\u4e14 $a_k<a_i<a_j$ \u90a3\u4e48 $i$ \u4e0e $j$ \u4e0d\u53ef\u80fd\u5728\u4e00\u4e2a\u6808\u4e2d\n  \n  \u8bc1\u660e\uff1a\u663e\u7136\u8fd9\u4e2a\u6808\u662f\u4e00\u4e2a\u5355\u8c03\u6808\u3002\u5982\u679c $a_i$ , $b_i$ \u5728\u4e00\u4e2a\u6808\u4e2d,\u7531\u4e8e $a_i<a_j$  \u6240\u4ee5\u5728 $a_j$ \u52a0\u5165 $a_i$ \u6240\u5728\u7684\u6808\u4e2d\u65f6\uff0c $a_i$ \u5fc5\u987b\u5df2\u7ecf\u8f93\u51fa\uff0c\u4f46\u7531\u4e8e $a_k$ \u8fd8\u672a\u8f93\u51fa\uff0c\u56e0\u6b64 $a_i$ \u4e0d\u80fd\u8f93\u51fa\uff0c\u6240\u4ee5 $a_i$ \u4e0e $a_j$ \u4e0d\u80fd\u5728\u540c\u4e00\u4e2a\u6808\u4e2d\u3002\n  \n  \u6211\u4eec\u53ef\u4ee5\u7528\u6269\u5c55\u57df\u5e76\u67e5\u96c6\u6765\u7ef4\u62a4\u8fd9\u4e2a\u5173\u7cfb\u3002\u5bf9\u4e8e\u7b2c\u4e00\u95ee\uff0c\u5982\u679c\u4e0e\u5df2\u5efa\u7acb\u7684\u5173\u7cfb\u77db\u76fe\u5219\u65e0\u89e3\u3002\u5bf9\u4e8e\u7b2c\u4e8c\u95ee\uff0c\u53ef\u4ee5\u7528\u8d2a\u5fc3\uff0c\u5982\u679c\u53ef\u4ee5\u64cd\u4f5c a \u5c31\u8fdb\u884c a \uff0c\u5426\u5219\u5c31\u5c1d\u8bd5\u64cd\u4f5c b ,\u4ee5\u6b64\u7c7b\u63a8\u3002\n  \n  \u76f4\u63a5\u4e0a\u4ee3\u7801\uff1a\n  ```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll maxn=1000+5;\nll fa[maxn*2],num[maxn],minn[maxn],v[maxn];\nvoid init()\n{\n\tfor(int i=0;i<maxn*2;i++)\n\t\tfa[i]=i;\n}\nll find(int x)\n{\n\tif(x==fa[x])\n\t\treturn x;\n\treturn fa[x]=find(fa[x]);\n}\nvoid unionset(int x,int y)\n{\n\tx=find(x);\n\ty=find(y);\n\tif(x!=y)\n\t\tfa[x]=y;\n}\nint main() \n{\n\tll n;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>num[i];\n\tinit();\n\tmemset(minn,127,sizeof(minn));\n\tminn[n]=num[n];\n\tfor(int i=n-1;i>=1;i--)\n\t\tminn[i]=min(num[i],minn[i+1]);\n\tbool ok=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tif(num[i]<num[j]&&minn[j]<num[i])\n\t\t\t{\n\t\t\t\tif(find(i)==find(j)||find(j+maxn)==find(i+maxn))\n\t\t\t\t\tok=0;\n\t\t\t\tunionset(i,j+maxn);\n\t\t\t\tunionset(j,i+maxn);\n\t\t\t}\n\t\t}\n\t}\n\tif(!ok)\n\t{\n\t\tcout<<0;\n\t\treturn 0;\n\t}\n\tstack<ll> s1,s2;\n\tll cur1=1,cur2=1;\n\tfor(int i=1;i<=2*n;i++)\n\t{\n\t\tif((s1.empty()||num[s1.top()]>num[cur1])&&find(maxn)!=find(cur1+maxn)&&find(maxn-1)!=find(cur1)&&cur1<=n)\n\t\t{\n\t\t\ts1.push(cur1);\n\t\t\tcout<<\"a\"<<' ';\n\t\t\tunionset(maxn,cur1);\n\t\t\tunionset(maxn-1,cur1+maxn);\n\t\t\tcur1++;\n\t\t}\n\t\telse if(!s1.empty()&&num[s1.top()]==cur2)\n\t\t{\n\t\t\tcur2++;\n\t\t\ts1.pop();\n\t\t\tcout<<\"b\"<<' ';\n\t\t}\n\t\telse if(s2.empty()||num[s2.top()]>num[cur1]&&cur1<=n)\n\t\t{\n\t\t\ts2.push(cur1);\n\t\t\tcout<<\"c\"<<' ';\n\t\t\tunionset(maxn-1,cur1);\n\t\t\tunionset(maxn,cur1+maxn);\n\t\t\tcur1++;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcur2++;\n\t\t\ts2.pop();\n\t\t\tcout<<\"d\"<<' ';\n\t\t}\n\t}\n}\n```\n",
        "postTime": 1633096137,
        "uid": 348172,
        "name": "PPPPz",
        "ccfLevel": 0,
        "title": "P1155 [NOIP2008 \u63d0\u9ad8\u7ec4] \u53cc\u6808\u6392\u5e8f \u9898\u89e3"
    },
    {
        "content": "# \u6838\u5fc3\u601d\u8def\uff1a\u6a21\u62df+\u8d2a\u5fc3\n~~\u6211\u5c45\u7136\u6562\u5728\u4e00\u9053\u5df2\u7ecf\u6709\u6570\u5341\u7bc7\u9ad8\u8d28\u91cf\u9898\u89e3\u7684\u9898\u4e0b\u4ea4\u9898\u89e3\u4e86\uff0c\u771f\u662f\u4e0d\u53ef\u7406\u55bb~~\uff0c\u90a3\u5fc5\u7136\u662f\u6709\u539f\u56e0\u7684\uff0c\u7531\u4e8e\u6211\u505a\u8fd9\u9053\u9898\u7684\u65f6\u5019\u4e0d\u4f1a\u4e8c\u5206\u56fe\uff08\u5176\u5b9e\u73b0\u5728\u4e5f\u4e0d\u4f1a\uff09\uff0c\u4e0d\u592a\u770b\u5f97\u61c2\u9898\u89e3\uff0c\u5c31\u81ea\u5df1\u5199\u4e86\u4e2a\u8d2a\u5fc3\uff0c\u8fc7\u4e86 Subtask #0\uff0c\u4f46\u662f Subtask #1 \u7684\u7b2c\u4e8c\u4e2a\u70b9 WA \u6389\u4e86\u3002\u540e\u6765\u63a8\u5012\u91cd\u5199\u540e\u8fc7\u4e86 Subtask #1\uff0c\u53c8\u770b\u4e86\u4e00\u773c\u9898\u89e3\u53d1\u73b0\u6ca1\u6709\u4e00\u4e2a\u7528\u7684\u662f\u6a21\u62df+\u8d2a\u5fc3\u7684\uff0c\u4e8e\u662f\u6211\u5c31\u81a8\u80c0\u4e86\u3002\n\n**Update 2023.3.17 \u4fee\u6539\u4e86\u53d8\u91cf\u540d\u4e0d\u7edf\u4e00\u7684\u95ee\u9898\u3002**\n\n**Update 2023.3.30 \u6539\u4e86\u4e9b\u7b14\u8bef\u3002**\n\n### \u6b63\u6587\n\u9898\u610f\u4e0d\u591a\u8d58\u8ff0\u3002\n\n\u6211\u7684\u601d\u8def\u662f\u4ece\u524d\u5f80\u540e\u8003\u8651\u6392\u5217\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u6bcf\u653e\u5165\u4e00\u4e2a\u5143\u7d20\uff0c\u5c06\u80fd\u51fa\u6808\u7684\u5143\u7d20\u5168\u90e8\u51fa\u6808\u3002\n\n\u5728\uff08\u53ea\u8003\u8651\u4e24\u6808\u6808\u9876\u5143\u7d20\u548c\u5f53\u524d\u8003\u8651\u7684\u5143\u7d20\u65f6\uff09\u53ea\u80fd\u653e $S_1$ \u6216\u8005\u653e $S_1$ \u5fc5\u7136\u66f4\u4f18\u65f6\u653e $S_1$\uff0c\u53ea\u80fd\u653e $S_2$ \u65f6\u653e $S_2$\uff0c\u5176\u4f59\u60c5\u51b5\u6709\u4e9b\u590d\u6742\uff0c\u540e\u6587\u518d\u8bb2\u3002\n\n\u7531\u4e8e\u6700\u540e\u8981\u4f7f\u8f93\u51fa\u5e8f\u5217\u5347\u5e8f\u6392\u5217\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4ee5\u4e0b\u63a8\u8bba\u3002\n\n\u8bb0\u5f53\u524d\u8003\u8651\u7684\u5143\u7d20\u4e3a $x$\uff0c\u53ea\u80fd\u653e $S_1$ \u7684\u60c5\u51b5\u6709\uff1a\n- $S_1$ \u4e3a\u7a7a\uff08\u7531\u540e\u6587\u7684\u5176\u4ed6\u51b3\u7b56\u53ef\u77e5\u6b64\u65f6\u5fc5\u7136 $S_2$ \u4e5f\u4e3a\u7a7a\uff0c\u653e $S_1$ \u66f4\u4f18\uff09\u3002\n- $S_2$ \u7684\u6808\u9876\u5c0f\u4e8e $x$ \u5e76\u4e14 $S_1$ \u7684\u6808\u9876\u5927\u4e8e $x$\u3002\uff08\u4e0d\u80fd\u653e $S_2$\uff09\n\n\u5982\u679c $S_1$ \u7684\u6808\u9876\u5c0f\u4e8e $x$\uff0c\u53ea\u80fd\u653e $S_2$ \u7684\u60c5\u51b5\u6709\uff1a\n- $S_2$ \u4e3a\u7a7a\uff08\u6b64\u65f6\u5982\u679c\u4e0d\u653e $S_2$ \u5c31\u65e0\u6cd5\u7ee7\u7eed\uff09\u3002\n- $S_2$ \u7684\u6808\u9876\u5927\u4e8e $x$\uff08\u540c\u4e0a\uff09\u3002\n- \u5982\u679c\u4e0d\u6ee1\u8db3\u4ee5\u4e0a\u4e24\u79cd\u60c5\u51b5\uff0c\u4e14 $S_1$ \u7684\u6808\u9876\u5c0f\u4e8e $x$\uff0c\u8bf4\u660e\u8fd9\u4e2a\u6392\u5217\u4e0d\u662f\u201c\u53ef\u53cc\u6808\u6392\u5e8f\u6392\u5217\u201d\u3002\n\n\u5bb9\u6613\u53d1\u73b0\u4ee5\u4e0a\u51e0\u79cd\u60c5\u51b5\u662f\u6ca1\u6709\u4ea4\u96c6\u7684\uff0c\u6392\u9664\u4ee5\u4e0a\u4e94\u79cd\u60c5\u51b5\uff0c\u5269\u4e0b\u7684\u5c31\u662f $S_1,S_2$ \u90fd\u80fd\u9009\u7684\u60c5\u51b5\u4e86\u3002\n\n\u5bf9\u4e8e\u5269\u4f59\u60c5\u51b5\uff0c\u6211\u4eec\u5148\u8003\u8651\u53ef\u4ee5\u8d2a\u5fc3\u89e3\u51b3\u7684\u90e8\u5206\u3002\n- $x$ \u653e\u5165\u540e\uff0c\u7acb\u9a6c\u53ef\u4ee5\u51fa\u6808\uff08\u53ef\u4ee5\u8bb0\u5f55\u5df2\u7ecf\u51fa\u6808\u7684\u6700\u5927\u5143\u7d20 $K$\uff0c\u7136\u540e\u8d2a\u5fc3\u89e3\u51b3\uff09\uff0c\u4e3a\u4fdd\u8bc1\u5b57\u5178\u5e8f\u5e94\u8be5\u9009 $S_1$\u3002\n\n\u5bf9\u4e8e\u5176\u4f59\u60c5\u51b5\uff0c\u6211\u4eec\u5148\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff1a**\u5f53\u6211\u4eec\u628a\u6574\u4e2a\u6392\u5217\uff08\u6216\u4e00\u90e8\u5206\uff09\u653e\u5165\u6808\u4e2d\u540e\uff0c\u5982\u679c\u8981\u8ba9\u6808\u4e2d\u7684\u5143\u7d20\u4e00\u6b21\u6027\u5f39\u51fa\u540e\u5347\u5e8f\u6392\u5217\uff0c\u6808\u4e2d\u5143\u7d20\u5e94\u6ee1\u8db3\u4ec0\u4e48\u6027\u8d28\u3002**\uff08\u5176\u5b9e\u6211\u539f\u6765\u7684\u4ee3\u7801\u5c31\u56e0\u4e3a\u6ca1\u5904\u7406\u8fd9\u4e00\u90e8\u5206\u88ab hack \u4e86\uff09\u3002\n\n\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u6808\uff0c\u90a3\u5b83\u53ea\u9700\u8981\u7b80\u5355\u4ece\u6808\u5e95\u5230\u6808\u9876\u964d\u5e8f\u6392\u5217\u3002\n\n\u5bf9\u4e8e\u4e24\u4e2a\u6808\uff0c\u6211\u4eec\u53d1\u73b0\u82e5\u5c06\u5176\u5206\u6210\u591a\u4e2a\u6700\u957f\u7684\u8fde\u7eed\u533a\u95f4\uff0c\u8fd9\u4e9b\u533a\u95f4\u4e2d\u7684\u5143\u7d20\u662f\u8fde\u7eed\u7684\uff0c\u5e76\u4e14\u964d\u5e8f\u6392\u5217\u3002**\u5982\u679c\u4e24\u4e2a\u6808\u4e2d\u6240\u6709\u8fd9\u6837\u7684\u533a\u95f4\u9996\u5c3e\u76f8\u8fde\u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u964d\u5e8f\u6392\u5217\uff0c\u90a3\u4e48\u6808\u4e2d\u7684\u5143\u7d20\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e00\u4e2a\u5347\u5e8f\u7684\u51fa\u6808\u5e8f\u5217\u3002**\uff08\u5176\u5b9e\u63a5\u8d77\u6765\u5c31\u76f8\u5f53\u4e8e\u53ea\u6709\u4e00\u4e2a\u6808\u7684\u60c5\u51b5\uff09\n\n\u6709\u70b9\u96be\u61c2\uff1f\u4e3e\u4e2a\u4f8b\u5b50\uff08\u53f3\u4fa7\u4e3a\u6808\u9876\uff09\u3002\n\n\uff08\u6bcf\u4e00\u4e2a\u4ee3\u7801\u5757\u4ee3\u8868\u4e00\u4e2a\u4e0a\u6587\u6307\u7684\u201c\u6700\u957f\u8fde\u7eed\u533a\u95f4\u201d\uff09\n\n\u6bd4\u5982\u8fd9\u79cd\u60c5\u51b5\u5c31\u53ef\u4ee5\uff1a\n- $S_1$:`9876` `3` `1`\n- $S_2$:`54` `2`\n\n\u8fd9\u79cd\u5c31\u4e0d\u884c\uff1a\n- $S_1$:`9876` `3` `1`\n- $S_2$:`4` `2` \n\n\u6709\u4e86\u8fd9\u4e2a\u63a8\u8bba\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u518d\u8d2a\u5fc3\u5730\u89e3\u51b3\u4e24\u79cd\u60c5\u51b5\uff1a\n- $S_1$ \u7684\u6808\u9876\u7b49\u4e8e $x+1$\u3002\n- $S_2$ \u7684\u6808\u9876\u7b49\u4e8e $x+1$\u3002\n\n\u6392\u9664\u4e0a\u8ff0\u60c5\u51b5\u540e\uff0c\u5269\u4f59\u60c5\u51b5\u5e94\u5177\u5907\u4ee5\u4e0b\u6027\u8d28\uff08\u5982\u679c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u53bb\u5bf9\u7167\u4e0a\u6587\uff09\uff1a\n- $S_1$ \u975e\u7a7a\u3002\n- $x$ \u5c0f\u4e8e $S_1$ \u7684\u6808\u9876\u3002\n- $S_2$ \u4e3a\u7a7a\uff0c\u6216 $x$ \u5c0f\u4e8e $S_2$ \u7684\u6808\u9876\u3002\n- \u5df2\u51fa\u6808\u6700\u5927\u5143\u7d20 $K$\uff08\u4e0b\u6587\u4e5f\u4f1a\u7528 $K$ \u8868\u793a\uff09\u5fc5\u5b9a\u5c0f\u4e8e $x$\u3002\n- \u5fc5\u5b9a\u6ca1\u6709\u8003\u8651\u8fc7\u4efb\u4f55\u5927\u4e8e $K$ \u4e14\u5c0f\u4e8e $x$ \u7684\u5143\u7d20\uff08\u4e0d\u7136\u5b83\u4eec\u5df2\u7ecf\u51fa\u6808\uff0c\u6216\u8005\u5224\u5b9a\u4e3a\u201c\u4e0d\u53ef\u53cc\u6808\u6392\u5e8f\u5e8f\u5217\u201d\u4e86\uff09\u3002\n\n\u8fd9\u4e9b\u60c5\u51b5\u4e2d\uff0c\u4e3a\u4fdd\u8bc1\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u6211\u4eec\u4ecd\u8d2a\u5fc3\u5730\u8003\u8651\u80fd\u9009 $S_1$ \u5c31\u9009 $S_1$\u3002\n\n\n- \u82e5 $S_2$ \u4e3a\u7a7a\uff0c\u9009 $S_1$\uff08\u8fd9\u4e2a\u7b56\u7565\u6211\u8bc1\u4e86\u5de8\u4e45\uff09\u3002\n\t1. \u82e5\u5728 $S_1$ \u6808\u9876\u5143\u7d20\u5f39\u51fa\u524d\uff0c$x$ \u4e4b\u540e\u6709\u67d0\u4e2a\u5143\u7d20\u6bd4 $S_1$ \u7684\u6808\u9876\u5927\uff0c\u90a3\u4e48\u5b83\u4e5f\u6bd4 $x$ \u5927\uff0c\u6211\u4eec\u53c8\u628a $x$ \u653e\u5728\u4e86 $S_2$ \u4e2d\uff0c\u90a3\u4e48\u5c31\u53ef\u80fd\u4f1a\u8ba9\u672c\u6765\u6709\u89e3\u7684\u60c5\u51b5\u53d8\u6210\u65e0\u89e3\n   1. \u82e5\u5728 $S_1$ \u6808\u9876\u5143\u7d20\u5f39\u51fa\u524d\uff0c$x$ \u4e4b\u540e\u6240\u6709\u5143\u7d20\u90fd\u5c0f\u4e8e $S_1$ \u7684\u6808\u9876\uff0c\u90a3\u4e48\u540e\u7eed\u5143\u7d20\u8981\u4e48\u5c31\u53ef\u4ee5\u6ee1\u8db3\u524d\u6587\u63d0\u5230\u7684\u6027\u8d28\uff0c\u8981\u4e48\u5c31\u53ef\u4ee5\u5355\u72ec\u5224\u9519\uff0c\u65e0\u8bba\u600e\u6837\u6b64\u65f6\u9009 $S_1$ \u90fd\u4e0d\u4f1a\u5f71\u54cd\u6700\u7ec8\u662f\u5426\u6709\u89e3\uff0c\u9009 $S_1$\u3002\n- \u82e5 $S_2$ \u4e0d\u4e3a\u7a7a\uff08\u4ee5\u4e0b\u60c5\u51b5\u5148\u8bf4\u5904\u7406\u548c\u8bc1\u660e\uff0c\u540e\u6587\u8bb2\u5b9e\u73b0\uff09\uff1a\n\t- \u82e5\u5230 $S_1$ \u6808\u9876\u5f39\u51fa\u524d\u5b58\u5728\u67d0\u4e2a\u6570\u5927\u4e8e $S_2$ \u7684\u6808\u9876\uff0c\u9009 $S_1$\u3002\n    \t- \u663e\u7136\uff0c\u5982\u679c\u6b64\u65f6\u9009\u4e86 $S_1$ \u5c31\u6709\u53ef\u80fd\u4f7f\u67d0\u4e00\u4e2a\u5c0f\u4e8e $S_1$ \u4f46\u5927\u4e8e $S_2$ \u6808\u9876\u7684\u6570\u65e0\u6cd5\u5165\u6808\uff0c\u53ef\u80fd\u4f1a\u4f7f\u6709\u89e3\u7684\u60c5\u51b5\u53d8\u5f97\u65e0\u89e3\uff0c\u540c\u7406\u5e94\u9009 $S_2$\u3002\n   - \u5176\u4f59\u60c5\u51b5\u5c31\u662f\u9009 $S_1$ \u4e0d\u4f1a\u5f71\u54cd\u53ef\u89e3\u6027\u7684\uff0c\u4e3a\u4fdd\u8bc1\u5b57\u5178\u5e8f\u5e94\u9009 $S_1$\u3002\n\n\u5bf9\u4e8e\u5982\u4f55\u5b9e\u73b0\uff0c\u6211\u4eec\u53d1\u73b0 $S_1$ \u7684\u6808\u9876\u4f1a\u5728\u5904\u7406\u5230 $K+1$ \u65f6\u6216\u8005\u5904\u7406\u5230 $S_1$ \u6808\u9876\u51cf\u4e00\u65f6\u5f39\u51fa\uff0c\u6211\u4eec\u628a\u8fd9\u4fe9\u4f4d\u7f6e\u53d6\u4e2a `max`\uff0c\u628a\u4ece $x$ \u5230\u8fd9\u91cc\u7684\u8fd9\u4e00\u6bb5\u904d\u5386\u4e00\u904d\uff0c\u7528\u4e00\u4e2a\u6876\u5b58\u4e00\u4e0b\uff0c\u540e\u9762\u5224\u65ad\u65f6\u904d\u5386\u4ee5\u4e0b\u8fd9\u4e2a\u6876\u5c31\u597d\u4e86\u3002\n\n\u6bcf\u4e2a\u70b9\u8003\u8651\u4e00\u904d\uff0c\u8003\u8651\u4e00\u4e2a\u70b9\u6700\u591a\u9700\u8981\u8ba1\u7b97 $n$ \u6b21\uff0c\u603b\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u5e76\u4e14\u5b9e\u9645\u60c5\u51b5\u5e94\u8be5\u4f1a\u8fdc\u5c0f\u4e8e $O(n^2)$\u3002\n\n\u6700\u540e\u6ce8\u610f\u4e00\u4e0b\uff0c\u7531\u4e8e\u5728\u7b54\u6848\u5e8f\u5217\u4e2d\uff0c\u76f8\u90bb\u7684`a`\u548c`d`\u53ef\u4ee5\u968f\u610f\u4ea4\u6362\u4f4d\u7f6e\uff08 $S_1$ \u4f55\u65f6\u5165\u6808\u548c $S_2$ \u4f55\u65f6\u51fa\u6808\u5e76\u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd\uff09,`b`\u548c`c`\u540c\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u8dd1\u4e00\u904d\u7c7b\u4f3c\u4e8e\u5192\u6ce1\u6392\u5e8f\u7684\u4e1c\u897f\u4f7f\u5b83\u53d8\u5f97\u66f4\u4f18\u3002\n### code\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<stack>\n#include<string.h>\nusing namespace std;\nconst int N=1005;\nint n,K=1,a[N],ka,adr[N];\n//\u9700\u8981\u6ce8\u610f\uff0c\u4ee3\u7801\u91cc\u7684 K \u548c\u9898\u89e3\u91cc\u7684 K \u610f\u4e49\u4e0d\u5b8c\u5168\u76f8\u540c\u3002\n//\u8fd9\u91cc\u7684 K \u6307\u4e0b\u4e00\u4e2a\u5c06\u4f1a\u51fa\u6808\u7684\u5143\u7d20\nbool vis[N];\nstack<int> S1,S2;\nchar ans[N<<1];\nbool gg(int x,int y){\n\tfor(int i=x;i<=y;i++){\n\t\tif(!vis[i]) return false;\n\t}\n\treturn true;\n}\nbool chk(int x){//\u8fd4\u56de true \u653e S1\uff0c\u8fd4\u56de false \u653e S2\u3002\n\tif(S2.empty()) return true;//\u60c5\u51b5\u4e00\n\tmemset(vis,0,sizeof(vis));\n\tfor(int i=adr[x];i<=max(adr[S1.top()-1],adr[K]);i++){\n\t\tvis[a[i]]=true;\n\t}\n\tif(gg(S2.top()+1,n)) return false;//\u60c5\u51b52\n \treturn true;//\u60c5\u51b53\n}\nsigned main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\tadr[a[i]]=i;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(S1.empty()||(!S2.empty()&&S2.top()<a[i]&&S1.top()>a[i])){//\u53ea\u80fd\u9009 S1\u3002\n\t\t\tS1.push(a[i]);\n\t\t\tans[ka++]='a';\n\t\t}else if(!S1.empty()&&S1.top()<a[i]){//\u4e0d\u80fd\u9009 S1\u3002\n\t\t\tif(S2.empty()){\n\t\t\t\tS2.push(a[i]);\n\t\t\t\tans[ka++]='c';\n\t\t\t}else if(S2.top()>a[i]){\n\t\t\t\tS2.push(a[i]);\n\t\t\t\tans[ka++]='c';\n\t\t\t}else{//\u90fd\u4e0d\u80fd\u9009\n\t\t\t\treturn printf(\"0\"),0;\n\t\t\t}\n\t\t}else{\n\t\t\tif(a[i]==K){//\u53ef\u4ee5\u7acb\u9a6c\u51fa\u6808\n\t\t\t\tS1.push(a[i]);\n\t\t\t\tans[ka++]='a';\n\t\t\t}else if(a[i]==S1.top()-1){//\u53ef\u4ee5\u63a5\u5728 S1 \u4e0a\u3002\n\t\t\t\tS1.push(a[i]);\n\t\t\t\tans[ka++]='a';\n\t\t\t}else if(!S2.empty()&&a[i]==S2.top()-1){//\u53ef\u4ee5\u63a5\u5728 S2 \u4e0a\u3002\n\t\t\t\tS2.push(a[i]);\n\t\t\t\tans[ka++]='c';\n\t\t\t}else{// \u590d\u6742\u60c5\u51b5\n\t\t\t\tif(chk(a[i])){\n\t\t\t\t\tS1.push(a[i]);\n\t\t\t\t\tans[ka++]='a';\n\t\t\t\t}else{\n\t\t\t\t\tS2.push(a[i]);\n\t\t\t\t\tans[ka++]='c';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twhile((!S1.empty()&&S1.top()==K)||(!S2.empty()&&S2.top()==K)){//\u51fa\u6808\n\t\t\tif(!S1.empty()&&S1.top()==K){\n\t\t\t\tans[ka++]='b';\n\t\t\t\tS1.pop();\n\t\t\t\tK++;\n\t\t\t}else if(!S2.empty()&&S2.top()==K){\n\t\t\t\tans[ka++]='d';\n\t\t\t\tS2.pop();\n\t\t\t\tK++;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<(n<<1);i++){//\u5904\u7406\u987a\u5e8f\u95ee\u9898\n\t\tfor(int j=0;j<(n<<1);j++){\n\t\t\tif(ans[j]=='d'&&ans[j+1]=='a'){\n\t\t\t\tswap(ans[j],ans[j+1]);\n\t\t\t}\n\t\t\tif(ans[j]=='c'&&ans[j+1]=='b'){\n\t\t\t\tswap(ans[j],ans[j+1]);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<(n<<1);i++){\n\t\tprintf(\"%c \",ans[i]);\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1677058074,
        "uid": 537230,
        "name": "\u516d\u697c\u6e9c\u5218",
        "ccfLevel": 5,
        "title": "P1155 [NOIP2008 \u63d0\u9ad8\u7ec4] \u53cc\u6808\u6392\u5e8f \u9898\u89e3"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/Coros-Trusds/p/16388761.html)\n\n$\\mathcal{O(n^3)}$ \u7adf\u7136\u8fc7\u4e86\uff0c\u8ba4\u771f\u5361\u53ef\u80fd\u5361\u5f97\u6389\u3002\n\nupdate: \u5df2\u7ecf\u4f18\u5316\u6210 $\\mathcal{O(n^2)}$ \u7684\u4e86\u3002\n\n# \u9898\u76ee\u5927\u610f\n\n\u6709\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217\uff08\u662f $1\\sim n$ \u7684\u6392\u5217\uff09\uff0c\u73b0\u5728\u6709 $2$ \u4e2a\u6808 $S_1$\uff0c$S_2$\uff0c\u8fd8\u6709 $4$ \u4e2a\u64cd\u4f5c\uff1a\n\n+ \u64cd\u4f5c $a$\uff1a\u5982\u679c\u8f93\u5165\u5e8f\u5217\u4e0d\u4e3a\u7a7a\uff0c\u5c06\u7b2c\u4e00\u4e2a\u5143\u7d20\u538b\u5165\u6808 $S_1$\u3002\n\n+ \u64cd\u4f5c $b$\uff1a\u5982\u679c\u6808 $S_1$ \u4e0d\u4e3a\u7a7a\uff0c\u5c06 $S_1$ \u6808\u9876\u5143\u7d20\u5f39\u51fa\u81f3\u8f93\u51fa\u5e8f\u5217\u3002\n\n+ \u64cd\u4f5c $c$\uff1a\u5982\u679c\u8f93\u5165\u5e8f\u5217\u4e0d\u4e3a\u7a7a\uff0c\u5c06\u7b2c\u4e00\u4e2a\u5143\u7d20\u538b\u5165\u6808 $S_2$\u3002\n\n+ \u64cd\u4f5c $d$\uff1a\u5982\u679c\u6808 $S_2$ \u4e0d\u4e3a\u7a7a\uff0c\u5c06 $S_2$ \u6808\u9876\u5143\u7d20\u5f39\u51fa\u81f3\u8f93\u51fa\u5e8f\u5217\u3002\n\n\u5224\u65ad\u662f\u5426\u80fd\u4f7f\u5f97\u8f93\u51fa\u5e8f\u5217\u5347\u5e8f\u6392\u5e8f\uff0c \u82e5\u4e0d\u80fd\uff0c\u5219\u8f93\u51fa $0$\uff1b\u82e5\u80fd\uff0c\u5219\u8f93\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u64cd\u4f5c\u5e8f\u5217\u3002\n\n$1\\le n\\le 1000$\u3002\n\n# \u9898\u76ee\u5206\u6790\n\n### \u5982\u4f55\u5224\u65ad\u8f93\u5165\u5e8f\u5217 $a$ \u662f\u5426\u6709\u89e3\uff1a\n\n\u7ed3\u8bba\uff1a\u5f53 $a_k\\lt a_i\\lt a_j$ \u4e14 $i\\lt j\\lt k$ \u65f6 $i,j$ \u4e0d\u5728\u540c\u4e00\u4e2a\u6808\u4e2d\u3002\n\n\u8bc1\u660e\uff1a\n\n\u53cd\u8bc1\u6cd5\uff0c\u5982\u679c $i,j,k$ \u5728\u4e00\u4e2a\u6808\u4e2d\uff0c\u56e0\u4e3a $a_i\\lt a_j$\uff0c\u6240\u4ee5 $i$ \u8981\u6bd4 $j$ \u5148\u51fa\u6808\uff0c\u53c8\u56e0\u4e3a $a_k\\lt a_i$\uff0c\u6240\u4ee5 $k$ \u6bd4 $i$ \u5148\u51fa\u6808\u3002\u90a3\u4e48\u79bb\u8c31\u7684\u4e8b\u60c5\u5c31\u6765\u4e86\uff0c$k$ \u8981\u5165\u6808\u7684\u8bdd $i,j$ \u5fc5\u987b\u5148\u5165\u6808\uff0c\u4f46 $i\\lt j$\uff0c\u6545\u4e5f\u5c31\u4f1a\u5bfc\u81f4 $j$ \u6bd4 $i$ \u5148\u51fa\u6808\u3002\u8fd9\u4e0e\u524d\u9762\u7684\u201c\u6240\u4ee5 $i$ \u8981\u6bd4 $j$ \u5148\u51fa\u6808\u201d\u76f8\u6096\uff0c\u6240\u4ee5\u7ed3\u8bba\u6210\u7acb\u3002\n\n-------\n\n\u6545\u5982\u679c $i,j$ \u4e0d\u80fd\u5728\u540c\u4e00\u4e2a\u6808\u4e2d\uff0c\u5219\u8fde\u8fb9 $(i,j)$\uff0c\u6700\u540e\u53ef\u4ee5\u8fde\u51fa\u4e00\u4e2a\u56fe\u3002\u6211\u4eec\u4f7f\u7528\u67d3\u8272\u6cd5\u5224\u65ad\u8fd9\u4e2a\u56fe\u662f\u5426\u4e3a\u4e8c\u5206\u56fe\uff0c\u8bd5\u8fc7\u4e0d\u662f\u5219\u65e0\u89e3\u3002\u67d3\u8272\u65f6\uff0c\u5de6\u90e8\u70b9\u5168\u90e8\u6807\u8bb0\u4e0a $1$\uff0c\u53f3\u90e8\u70b9\u5168\u90e8\u6807\u8bb0\u4e0a $2$\u3002\n\n-------\n\n### \u5982\u4f55\u8f93\u51fa\u4efb\u610f\u4e00\u7ec4\u53ef\u884c\u89e3\uff1a\n\n\u4f9d\u6b21\u5c06\u6bcf\u4e2a\u6570\u538b\u5165\u5b83\u7684\u7f16\u53f7\u6240\u4ee3\u8868\u7684\u7684\u6808\uff08\u5373\u67d3\u8272\u65f6\u7684\u6807\u8bb0\uff09\uff0c\u51fa\u6808\u5165\u6808\u65f6\u4fdd\u8bc1\u7f16\u53f7\u8fde\u7eed\u5373\u53ef\u3002\u5177\u4f53\u5730\uff0c\u7528 $id$ \u8868\u793a\u5f53\u524d\u5e94\u8be5\u8f93\u51fa\u7684\u6570\u5b57\uff0c\u627e\u4e00\u627e $id$ \u5728\u54ea\u4e2a\u6808\u5e76\u5728\u5bf9\u5e94\u7684\u6808\u51fa\u6808\u3002\n\n### \u5982\u4f55\u4fdd\u8bc1\u8f93\u51fa\u7684\u53ef\u884c\u89e3\u5b57\u5178\u5e8f\u6700\u5c0f\n\n\u5411 $S_2$ \u5165\u6808\u65f6\uff0c\u5148\u5c3d\u53ef\u80fd\u4ece $S_1$ \u51fa\u6808\u3002\u603b\u7684\u6765\u8bf4\uff0c\u5c3d\u53ef\u80fd\u64cd\u4f5c $S_1$\u3002\n\n# \u4ee3\u7801\n\n```cpp\n// Problem: P1155 [NOIP2008 \u63d0\u9ad8\u7ec4] \u53cc\u6808\u6392\u5e8f\n// Contest: Luogu\n// URL: https://www.luogu.com.cn/problem/P1155\n// Memory Limit: 128 MB\n// Time Limit: 1000 ms\n// Date:2022-06-18 15:42\n// \n// Powered by CP Editor (https://cpeditor.org)\n\n#include <iostream>\n#include <cstdio>\n#include <climits>//need \"INT_MAX\",\"INT_MIN\"\n#include <cstring>//need \"memset\"\n#include <numeric>\n#include <algorithm>\n#include <cmath>\n#include <stack>\n#define enter putchar(10)\n#define debug(c,que) std::cerr << #c << \" = \" << c << que\n#define cek(c) puts(c)\n#define blow(arr,st,ed,w) for(register int i = (st);i <= (ed); ++ i) std::cout << arr[i] << w;\n#define speed_up() std::ios::sync_with_stdio(false),std::cin.tie(0),std::cout.tie(0)\n#define mst(a,k) memset(a,k,sizeof(a))\n#define stop return(0)\nconst int mod = 1e9 + 7;\ninline int MOD(int x) {\n\tif(x < 0) x += mod;\n\treturn x % mod;\n}\nnamespace Newstd {\n\tchar buf[1 << 21],*p1 = buf,*p2 = buf;\n\tinline int getc() {\n\t\treturn p1 == p2 && (p2 = (p1 = buf) + fread(buf,1,1 << 21,stdin),p1 == p2) ? EOF : *p1 ++;\n\t}\n\tinline int read() {\n\t\tint ret = 0,f = 0;char ch = getc();\n\t\twhile (!isdigit(ch)) {\n\t\t\tif(ch == '-') f = 1;\n\t\t\tch = getc();\n\t\t}\n\t\twhile (isdigit(ch)) {\n\t\t\tret = (ret << 3) + (ret << 1) + ch - 48;\n\t\t\tch = getc();\n\t\t}\n\t\treturn f ? -ret : ret;\n\t}\n\tinline double double_read() {\n\t\tlong long ret = 0,w = 1,aft = 0,dot = 0,num = 0;\n\t\tchar ch = getc();\n\t\twhile (!isdigit(ch)) {\n\t\t\tif (ch == '-') w = -1;\n\t\t\tch = getc();\n\t\t}\n\t\twhile (isdigit(ch) || ch == '.') {\n\t\t\tif (ch == '.') {\n\t\t\t\tdot = 1;\n\t\t\t} else if (dot == 0) {\n\t\t\t\tret = (ret << 3) + (ret << 1) + ch - 48;\n\t\t\t} else {\n\t\t\t\taft = (aft << 3) + (aft << 1) + ch - '0';\n\t\t\t\tnum ++;\n\t\t\t}\n\t\t\tch = getc();\n\t\t}\n\t\treturn (pow(0.1,num) * aft + ret) * w;\n\t}\n\tinline void write(int x) {\n\t\tif(x < 0) {\n\t\t\tputchar('-');\n\t\t\tx = -x;\n\t\t}\n\t\tif(x > 9) write(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n}\nusing namespace Newstd;\n\nconst int INF = 0x3f3f3f3f;\nconst int N = 1005;\nstruct Graph {\n\tint v,nxt;\n} gra[N * N << 1];\nint head[N],col[N],a[N],suc[N];\nstd::stack<int>st[3];\nint n,idx,now;\ninline void add(int u,int v) {\n\tgra[++ idx] = (Graph){v,head[u]},head[u] = idx;\n}\ninline bool make_color(int now,int color) {\n\tcol[now] = color;\n\tfor (register int i = head[now];i;i = gra[i].nxt) {\n\t\tint v = gra[i].v;\n\t\tif (!col[v]) {\n\t\t\tif (!make_color(v,3 - color)) return false;\n\t\t} else if (col[v] == color) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\ninline bool check(int x) {\n\treturn !st[x].empty() && st[x].top() == now + 1;\n}\ninline void out(int x) {\n\tnow ++;\n\tst[x].pop();\n\tif (x == 1) printf(\"b \");\n\telse printf(\"d \");\n}\nint main(void) {\n\tn = read();\n\tfor (register int i = 1;i <= n; ++ i) a[i] = read();\n\tsuc[n] = a[n];\n\tfor (register int i = n - 1;i >= 1; -- i) suc[i] = std::min(suc[i + 1],a[i]);\n\tfor (register int i = 1;i <= n; ++ i) {\n\t\tfor (register int j = i + 1;j < n; ++ j) {\n\t\t\tif (suc[j + 1] < a[i] && a[i] < a[j]) {\n\t\t\t\tadd(i,j),add(j,i);\n\t\t\t}\n\t\t}\n\t}\n\tfor (register int i = 1;i <= n; ++ i) {\n\t\tif (col[i]) continue;\n\t\tif (!make_color(i,1)) {\n\t\t\tputs(\"0\");\n\t\t\treturn 0;\n\t\t}\n\t}\n\tfor (register int i = 1;i <= n; ++ i) {\n\t\tif (col[i] == 2) {\n\t\t\twhile (check(1)) out(1);\n\t\t}\n\t\twhile (!st[col[i]].empty() && st[col[i]].top() < a[i]) {\n\t\t\tif (check(col[i])) out(col[i]);\n\t\t\telse out(3 - col[i]);\n\t\t}\n\t\tif (col[i] == 2) {\n\t\t\twhile (check(1)) out(1);\n\t\t}\n\t\tst[col[i]].push(a[i]);\n\t\tif (col[i] == 1) printf(\"a \");\n\t\telse printf(\"c \");\n\t}\n\twhile (!st[1].empty()) {\n\t\tif (check(1)) out(1);\n\t\telse out(2);\n\t}\n\twhile (!st[2].empty()) out(2);\n\t\n\treturn 0;\n}\n```",
        "postTime": 1655543248,
        "uid": 430409,
        "name": "Coros_Trusds",
        "ccfLevel": 6,
        "title": "P1155 [NOIP2008 \u63d0\u9ad8\u7ec4] \u53cc\u6808\u6392\u5e8f"
    },
    {
        "content": "\u8fd9\u4e00\u9898\u4f5c\u4e3a NOIP 2008 \u7684\u538b\u8f74\u4e00\u70b9\u4e5f\u4e0d\u8fc7\u5206\uff08\u7136\u800c\u73b0\u5728\u53ea\u6709 T2 \u7684\u96be\u5ea6\u4e86\uff09,\u80fd\u5728\u8003\u573a\u4e0a\u60f3\u51fa\u6765\u7edd\u975e\u6613\u4e8b\u3002\n\u5e9f\u8bdd\u4e0d\u591a\u8bf4\uff0c\u54b1\u4eec\u76f4\u63a5\u5207\u5165\u6b63\u6587\u3002\n\n\n# \u601d\u7ef4\u5206\u6790\n\u4e24\u4e2a\u6808\u7684\u60c5\u51b5\u4f3c\u4e4e\u65e0\u4ece\u4e0b\u624b\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u8003\u8651\u8003\u8651\u4e00\u4e2a\u6808\u7684\u60c5\u51b5\u3002\n\n\u6211\u4eec\u5148\u5047\u8bbe\u6709\u89e3\uff0c\u600e\u6837\u64cd\u4f5c\u4f1a\u4f7f\u5f97\u7b54\u6848\u6700\u4f18\u5462\uff1f\u6839\u636e\u5b57\u5178\u5e8f\u7684\u5b9a\u4e49\uff0c\u6211\u4eec\u53ea\u9700\u76ee\u5149\u77ed\u6d45\u4e00\u70b9\uff0c\u53ea\u8981\u80fd\u8fdb\u5c31\u4e00\u76f4\u8ba9\u5b83\u8fdb\uff08\u64cd\u4f5c a \uff09\u3002\u5f53\u7136\uff0c\u5728\u8be5\u51fa\u7684\u65f6\u5019\u4e5f\u5fc5\u987b\u65e0\u60c5\u5730\u51fa\u6389\uff08\u64cd\u4f5c b \uff09\u3002\n\n\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u4ec0\u4e48\u65f6\u5019\u4e0d\u5f97\u4e0d\u51fa\u4e86\u5462\uff1f\u76f4\u63a5\u60f3\u4f3c\u4e4e\u6709\u56f0\u96be\uff0c\u53ef\u4ee5\u624b\u73a9\u4e00\u4e0b\u6837\u4f8b\uff1a\n\n\n```\n4\n1 3 2 4\n```\n\u6211\u4eec\u5f88\u5931\u671b\u5730\u53d1\u73b0 1 \u4e00\u8fdb\u53bb\u5c31\u8981\u88ab\u51fa\u6389\uff0c\u56e0\u4e3a\u5982\u679c\u4e0d\u51fa\u7684\u8bdd\uff0c\u540e\u9762\u7684\u6570\u52a0\u8fdb\u6765\u540e\uff0c\u5c31\u5fc5\u987b\u5148\u51fa\u540e\u9762\u7684\u6570\uff0c\u90a3\u4e48\u8f93\u51fa\u7684\u7b2c\u4e00\u4e2a\u6570\u5c31\u4e0d\u53ef\u80fd\u662f 1\uff0c\u6211\u4eec\u7684\u6392\u5e8f\u8ba1\u5212\u4e5f\u5c31\u6ce1\u6c64\u4e86\u3002\u518d\u770b\u4e0b\u4e00\u4e2a\u52a0\u8fdb\u6765\u7684\u6570 3\uff0c\u6839\u636e\u4e4b\u524d\u5206\u6790\u7684\u8d2a\u5fc3\u7b56\u7565\uff0c\u80fd\u4e0d\u51fa\u5c31\u4e0d\u51fa\uff0c\u800c\u4e14\u6682\u65f6\u5148\u4e0d\u51fa\u4f3c\u4e4e\u4e5f\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u518d\u4ed4\u7ec6\u60f3\u60f3\u4e0d\u96be\u53d1\u73b0\uff0c\u4e0d\u4ec5\u662f\u4e0d\u51fa\u6ca1\u95ee\u9898\uff0c\u51fa\u4e86\u8fd8\u4f1a\u6709\u5927\u95ee\u9898\u3002\u5982\u679c\u51fa\u4e86\uff0c\u90a3\u4e48\u7b2c\u4e8c\u4e2a\u6570\u5c31\u4f1a\u662f 3\uff0c\u800c\u4e0d\u662f 2 \u4e86\u3002\u7b49\u5230 2 \u52a0\u8fdb\u6765\uff0c\u597d\u50cf\u662f\u5fc5\u987b\u8981\u51fa\u4e86\uff0c\u4e0d\u7136\u7b2c\u4e8c\u4e2a\u6570\u5c31\u4e0d\u662f 2 \u4e86\uff0c\u7136\u540e\uff0c3 \u4e5f\u5e94\u8be5\u51fa\u4e86\uff0c\u6700\u540e\uff0c\u628a 4 \u52a0\u8fdb\u53bb\u5e76\u76f4\u63a5\u51fa\u6389\uff0c\u4fbf\u5b8c\u6210\u4e86\u6392\u5e8f\u3002\n\n\u4ece\u4e0a\u9762\u7684\u6d41\u7a0b\u4e2d\uff0c\u6211\u4eec\u603b\u7ed3\u51fa\u6765\u4e00\u4e2a\u89c4\u5f8b\uff1a\u5f53\u6808\u9876\u5143\u7d20\u4e3a\u5f53\u524d\u9700\u8981\u51fa\u7684\u6570\u65f6\uff0c\u90a3\u4e48\u6808\u9876\u5c31\u5fc5\u987b\u88ab\u51fa\u6389\u3002\u4e0d\u7136\u540e\u9762\u7684\u6570\u52a0\u8fdb\u6765\u540e\u5c31\u4f1a\u5f88\u5c34\u5c2c\u3002\u5728\u4ee3\u7801\u5b9e\u73b0\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf\uff08\u4ee3\u7801\u4e2d\u8bb0\u4e3a now \uff09\u6765\u8bb0\u5f55\u5f53\u524d\u9700\u8981\u51fa\u7684\u6570\u662f\u51e0\u3002\n\n\u600e\u4e48\u5224\u65ad\u65e0\u89e3\u5462\uff1f\u6211\u4eec\u81ea\u5df1\u6765\u9020\u4e00\u7ec4\u6570\u636e\uff1a\n```\n5\n2 3 1 4 5\n```\n2 \u5165\u6808\uff0c3 \u5165\u6808\uff0c\u5230\u4e86 1 \u5165\u6808\u7684\u65f6\u5019\u5c31\u6709\u95ee\u9898\u4e86\u3002\u6309\u89c4\u77e9\uff0c1 \u5e94\u8be5\u51fa\u6389\u4e86\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\uff0c 3 \u90fd\u4e0d\u53ef\u80fd\u5728 3 \u4e4b\u524d\u51fa\u6808\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5c31\u65e0\u89e3\u4e86\u3002\u2014\u2014\u60c5\u51b5 1\n\n\u4e0b\u9762\uff0c\u6211\u4eec\u628a\u6570\u636e\u505a\u4e2a\u5fae\u8c03\uff1a\n \n\n```\n5\n3 2 1 4 5\n```\n\u8fd9\u4e48\u4e00\u6765\uff0c1 \u51fa\u6808\u540e\uff0c2 \u548c 3 \u90fd\u80fd\u591f\u987a\u7406\u6210\u7ae0\u5730\u51fa\u6808\u3002\u2014\u2014\u60c5\u51b5 2\n\n\u518d\u6362\uff1a\n```\n5\n1 2 3 4 5\n```\n\u4efb\u4f55\u6570\u4e4b\u540e\u90fd\u6ca1\u6709\u6bd4\u5b83\u5c0f\u7684\u6570\uff0c\u4e1d\u6beb\u4e0d\u7528\u62c5\u5fc3\u65e0\u89e3\u3002\u2014\u2014\u60c5\u51b5 3\n\n\u611f\u6027\u5730\u60f3\u4e00\u60f3\uff0c\u8981\u662f\u6bcf\u4e2a\u6570\u540e\u9762\u90fd\u6ca1\u6709\u6bd4\u5b83\u5c0f\u7684\u6570\u2026\u2026\u5e9f\u8bdd\uff0c\u90a3\u4e0d\u5c31\u6392\u597d\u4e86\uff01\u6211\u4eec\u7740\u91cd\u6765\u5206\u6790\u4e00\u4e0b\u60c5\u51b5 2 \u3002\n \n\u4e3a\u4ec0\u4e48\u60c5\u51b5 1 \u65e0\u89e3\uff0c\u800c\u60c5\u51b5 2 \u5c31\u884c\u4e86\u5462\uff1f\u552f\u4e00\u7684\u4e0d\u540c\u5c31\u5728\u4e8e\u7b2c\u4e00\u4e2a\u6570\u548c\u7b2c\u4e8c\u4e2a\u6570\u6362\u4e86\u4e00\u4e0b\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u60c5\u51b5 2 \u4e2d\u7684 2 \u548c 3\uff0c\u867d\u7136\u540e\u9762\u6709\u4e2a 1\uff0c\u4f46 2 \u4e5f\u4f1a\u5728 3 \u4e4b\u524d\u88ab\u51fa\u6389\uff0c\u800c\u60c5\u51b51\u5c31\u663e\u5f97\u6bd4\u8f83\u60b2\u50ac\u4e86\u3002\n\n\u4e25\u8c28\u5730\uff0c\u8fd8\u8981\u8865\u5145\u4e00\u7ec4\u6570\u636e\uff1a\n```\n3\n1 3 2\n```\n\u770b\u5b8c\u524d\u9762\u7684\uff0c\u6216\u8bb8\u4f1a\u6709\u4eba\u8ba4\u4e3a\u53ea\u8981$a$\u6570\u7ec4\u4e2d\u5b58\u5728\u4e09\u4e2a\u6570\u5448\u201c\u5cf0\u5f62\u201d\uff0c\u90a3\u4e48\u5c31\u65e0\u89e3\u3002\u4f46\u8fd9\u4e2a\u5176\u5b9e\u662f\u9519\u7684\u3002\n\n\u770b\u770b\u4e0a\u9762\u7684\u6570\u636e\uff0c\u8fd9\u5176\u5b9e\u662f\u6709\u89e3\u7684\u3002\u5176\u4e2d\u7684\u6839\u672c\u6240\u5728\uff0c\u5728\u4e8e1\u53ef\u4ee5\u76f4\u63a5\u51fa\u6389\uff0c\u4e0d\u4f1a\u50cf\u60c5\u51b51\u4e00\u6837\u4ea7\u751f\u201c **\u5806\u79ef** \u201d\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u5206\u6790\u51fa\u4e86\u4e00\u4e2a\u5f88\u5f3a\u7684\u6027\u8d28\uff0c\u4e5f\u662f\u672c\u9898\u6700\u6838\u5fc3\u7684\u4e00\u4e2a\u6027\u8d28\uff1a\n\n **\u5728\u4e00\u4e2a\u6808\u7684\u60c5\u51b5\u4e0b\u65e0\u89e3\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b58\u5728\u4e00\u7ec4 $i,j,k$ \uff0c\u6ee1\u8db3 $i<j<k$   \u4e14 $a[i]<a[j]$ \u4e14 $a[k]<a[i]$**\n\n\n\n# \u5177\u4f53\u601d\u8def\n\u597d\u4e0d\u5bb9\u6613\u5b66\u4f1a\u4e86\u4e00\u4e2a\u6808\u7684\u60c5\u51b5\uff0c\u7136\u800c\u672c\u9898\u6709\u4e24\u4e2a\u6808\u3002\n\n\u5176\u5b9e\u4e5f\u7b80\u5355\uff0c\u53ea\u8981\u4e00\u4e9b\u6570\u5728\u4e00\u4e2a\u6808\u7684\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u4f7f\u4e4b\u65e0\u89e3\uff0c\u90a3\u4e48\u5728\u4e24\u4e2a\u6808\u7684\u60c5\u51b5\u4e0b\u5c31\u53ef\u4ee5\u628a\u5b83\u4eec\u653e\u5165\u540c\u4e00\u6808\u4e2d\u3002\n\n\u7591\uff1f\u597d\u50cf\u53ef\u4ee5\u62bd\u8c61\u4e3a\u5171\u5b58\u95ee\u9898\uff0c\u90a3\u4e48\u663e\u7136\u7528\u4e8c\u5206\u56fe\u89e3\u51b3\u3002\u5373\u628a\u4e24\u4e2a\u5728\u4e00\u8d77\u4f1a\u5bfc\u81f4\u65e0\u89e3\u7684\u6570\u4e4b\u95f4\u8fde\u4e00\u6761\u8fb9\uff08\u4ee3\u7801\u4e2d\u662f\u7ed9\u4e0b\u6807\u8fde\u8fb9\uff0c\u672c\u8d28\u76f8\u540c\uff09\u3002\u5982\u679c\u5f97\u5230\u7684\u56fe\u4e0d\u662f\u4e8c\u5206\u56fe\uff0c\u90a3\u4e48\u8fd4\u56de\u65e0\u89e3\u3002\u5426\u5219\uff0c\u8f93\u51fa\u7b54\u6848\u3002\u5728\u8f93\u51fa\u7b54\u6848\u65f6\u8981\u6ce8\u610f\uff0c\u8981\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u9075\u5faa\u80fd\u7528\u7b2c\u4e00\u4e2a\u6808\u5c31\u4e0d\u7528\u7b2c\u4e8c\u4e2a\u6808\u7684\u539f\u5219\uff0c\u65f6\u7684\u7b54\u6848\u6700\u4f18\u3002\n\n\u8fd8\u6709\u4e2a\u95ee\u9898\uff0c\u5982\u4f55\u5224\u65ad\u6bcf\u4e2a\u6570\u8be5\u88ab\u5206\u5230\u54ea\u4e2a\u6808\uff1f\u7b80\u5355\uff0c\u5728\u67d3\u8272\u5224\u5b9a\u65f6\u5df2\u7ecf\u6c42\u51fa\u4e86    color \u6570\u7ec4\uff0c\u6211\u4eec\u4ece 1 \u5f00\u59cb\u67d3\u8272\uff0c\u8fd9\u4e48\u4e00\u6765\uff0c\u989c\u8272\u4e3a 1 \u7684\u70b9\u5c31\u5e94\u88ab\u5206\u914d\u81f3\u7b2c\u4e00\u4e2a\u6808\uff0c\u989c\u8272\u4e3a 2 \u7684\u70b9\u5c31\u5e94\u88ab\u5206\u914d\u81f3\u7b2c\u4e8c\u4e2a\u6808\u3002\u540c\u65f6\u4e5f\u4fdd\u8bc1\u4e86\u80fd\u88ab\u5206\u914d\u5230\u7b2c\u4e00\u4e2a\u6808\u7684\u70b9\u7edd\u4e0d\u4f1a\u88ab\u5206\u914d\u5230\u7b2c\u4e8c\u4e2a\u6808\u3002\u7531\u4e8e\u6211\u4eec\u679a\u4e3e\u6ca1\u6709\u88ab\u67d3\u8272\u7684\u70b9\u65f6\u4ece 1 \u5f00\u59cb\u679a\u4e3e\uff0c\u4e5f\u4fdd\u8bc1\u4e86\u524d\u9762\u7684\u6570\u4f1a\u4f18\u5148\u4f7f\u7528\u7b2c\u4e00\u4e2a\u6808\u3002\n\n\u8fd8\u9700\u6ce8\u610f\u7684\u662f\uff0c\u5728\u7b2c\u4e8c\u4e2a\u6808\u4e2d\u7684\u6570\u51fa\u6808\u524d\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u6808\u4e2d\u6709\u6570\u8be5\u51fa\u6808\uff0c\u90a3\u4e48\u5e94\u8be5\u8ba9\u5176\u51fa\u6808\u3002\u8fd9\u6837\u7b54\u6848\u4f1a\u66f4\u4f18\u3002\u6700\u540e\uff0c\u522b\u5fd8\u4e86\u628a\u4e24\u4e2a\u6808\u4e2d\u7684\u5269\u4f59\u7684\u6570\u8f93\u51fa\u3002\n\n\u4e8e\u662f\uff0c\u8fd9\u4e48\u4e00\u6765\uff0c\u5c31\u5f97\u5230\u4e86\u6700\u4f18\u7b54\u6848\u3002\n\n\n\n# \u7ec6\u8282\u5904\u7406\n\n\n```\n6\n2 3 1 4 5 6\n```\n\u8fd9\u4e00\u90e8\u5206\u5c31\u662f\u4e3a\u4e86\u8fd9\u7ec4 Hack \u6570\u636e\u800c\u751f\u7684\u3002\n\n\u5982\u679c\u662f\u5f53\u5e74\u7684\u5b98\u65b9\u6570\u636e\uff0c\u4e0b\u9762\u8fd9\u4efd\u4ee3\u7801\u4e5f\u5c31\u8fc7\u4e86\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1005,M=1e6+5;\nint ver[M],Next[M],head[M],tot;\nvoid add(int u,int v)\n{\n    ver[++tot]=v,Next[tot]=head[u],head[u]=tot;\n}\nint a[N],k[N];\nint fail,vis[N];\nint st1[N],st2[N],t1,t2;\nvoid dfs(int x,int c)\n{\n    vis[x]=c;\n    for(int i=head[x];i;i=Next[i])\n    {\n        if(!vis[ver[i]])dfs(ver[i],3-c);\n        else if(vis[ver[i]]==c)fail=1;\n    }\n}\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)scanf(\"%d\",&a[i]);\n    int MIN=1e8;\n    for(int i=n;i;i--)k[i]=MIN,MIN=min(MIN,a[i]);\n    for(int i=1;i<=n;i++)\n        for(int j=i+1;j<=n;j++)\n            if(a[i]<a[j]&&a[i]>k[j])\n                add(i,j),add(j,i);\n    for(int i=1;i<=n;i++)if(!vis[i])dfs(i,1);\n    if(fail){printf(\"%d\",0);return 0;}\n    int now=1;\n    st1[0]=st2[0]=1e8;\n    for(int i=1;i<=n;i++)\n        if(vis[i]==1)\n        {\n            while(st1[t1]==now)\n                t1--,printf(\"%c \",'b'),now++;\n            st1[++t1]=a[i],printf(\"%c \",'a');\n        }\n        else\n        {\n            while(1)\n                if(st1[t1]==now)\n                    t1--,printf(\"%c \",'b'),now++;\n                else if(st2[t2]==now)\n                    t2--,printf(\"%c \",'d'),now++;\n                else break;\n            st2[++t2]=a[i],printf(\"%c \",'c');\n        }\n    while(1)\n        if(st1[t1]==now)\n            t1--,printf(\"%c \",'b'),now++;\n        else if(st2[t2]==now)\n            t2--,printf(\"%c \",'d'),now++;\n        else break;\n    return 0;\n}\n```\n\u5b66\u4e60\u5c31\u8981\u5b66\u771f\u7406\uff0c\u65e2\u7136\u88ab\u5361\u4e86\uff0c\u5c31\u6765\u627e\u627e\u95ee\u9898\u51fa\u5728\u54ea\u3002\n\n\u5148\u4f1a\u51fa\u73b0\u5982\u4e0b\u72b6\u6001\uff1a\n\n\u7b2c\u4e00\u4e2a\u6808\uff1a2 1\n\n\u7b2c\u4e8c\u4e2a\u6808\uff1a3\n\n\u6211\u4eec\u4f1a\u628a 2 \u548c 1 \u51fa\u6808\uff0c\u4e00\u65f6\u534a\u4f1a\u513f\u4e0d\u628a 3 \u51fa\u6808\u3002\u4f46\u662f 4,5,6 \u52a0\u8fdb\u6765\u540e\uff0c\u4f1a\u53d1\u73b0\u52a0\u8fdb\u6765\u7684\u6570\u4e00\u76f4\u4e0d\u662f\u8be5\u51fa\u7684\uff0c\u662f\u56e0\u4e3a\u8be5\u51fa\u7684 3 \u5374\u6ca1\u51fa\uff01\n\n\u5bb9\u6613\u60f3\u5230\u76f4\u63a5\u8fd9\u4e48\u6539\uff1a\n\n\u505a\u7b2c\u4e00\u4e2a\u6808\u65f6\uff0c\u5982\u679c\u7b2c\u4e8c\u4e2a\u6808\u4e2d\u6709\u8be5\u51fa\u7684\u6570\uff0c\u90a3\u4e48\u76f4\u63a5\u51fa\u6389\u3002\u4f46\u4ed4\u7ec6\u60f3\u60f3\uff0c\u8fd9\u4e48\u4e00\u6765\uff0c\u5982\u679c\u6709\u4e9b\u65f6\u5019\u6839\u672c\u7528\u4e0d\u7740\u51fa\u7b2c\u4e8c\u4e2a\u6808\u4e2d\u7684\u6570\uff0c\u90a3\u4e0d\u5c31\u767d\u767d\u628a\u7b54\u6848\u53d8\u5dee\u4e86\u5417\uff1f\n\n\u5206\u6790\u4e00\u4e0b\uff0c\u53ea\u6709\u5728\u4e00\u5b9a\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u5fc5\u8981\u51fa\u7b2c\u4e8c\u4e2a\u6808\u4e2d\u7684\u6570\u3002\u4ec0\u4e48\u60c5\u51b5\u5462\uff1f\n\n**\u5982\u679c\u5f53\u524d\u53ef\u4ee5\u52a0\u5165\u7b2c\u4e00\u4e2a\u6808\u7684\u6570\u6bd4\u5f53\u524d\u7b2c\u4e00\u4e2a\u6808\u7684\u6808\u9876\u7684\u6570\u5927\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u4e0d\u65ad\u5f39\u51fa\u7b2c\u4e8c\u4e2a\u6808\u4e2d\u8be5\u5f39\u51fa\u7684\u6570\uff08\u6b64\u65f6\u7b2c\u4e00\u4e2a\u6808\u4e2d\u8be5\u51fa\u7684\u5e94\u8be5\u5df2\u7ecf\u51fa\u5b8c\u4e86\uff09\uff0c\u8fd9\u4e4b\u540e\uff0c\u518d\u5f39\u51fa\u7b2c\u4e00\u4e2a\u6808\u4e2d\u8be5\u5f39\u51fa\u7684\u6570\uff0c\u7136\u540e\u518d\u628a\u5f53\u524d\u6570\u63d2\u5165\u7b2c\u4e00\u4e2a\u6808**\n\n\u6bd5\u7adf\u5982\u679c\u8fd9\u4e2a\u65f6\u5019\u8fd8\u4e0d\u51fa\uff0c\u90a3\u4e48\u5f53\u524d\u6570\u52a0\u8fdb\u6765\u540e\u5c31\u76f4\u63a5\u662f\u7684\u8fd9\u4e2a\u6808\u4e0d\u5408\u6cd5\u4e86\u3002\u5982\u679c\u505a\u5b8c\u8fd9\u4e2a\u64cd\u4f5c\u4e4b\u540e\u5f53\u524d\u6570\u8fd8\u662f\u5927\u4e8e\u6808\u9876\uff0c\u90a3\u4e48\u53ea\u80fd\u662f\u65e0\u89e3\u4e86\uff0c\u4f46\u6211\u4eec\u5df2\u7ecf\u5224\u65ad\u8fc7\u6709\u89e3\u4e86\uff0c\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u6839\u672c\u5c31\u4e0d\u4f1a\u53d1\u751f\u3002\n\n\n\n# \u6700\u7ec8\u4ee3\u7801\n\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1005,M=1e6+5;\nint ver[M],Next[M],head[M],tot;\nvoid add(int u,int v)\n{\n    ver[++tot]=v,Next[tot]=head[u],head[u]=tot;\n}\nint a[N],k[N];\nint fail,vis[N];\nint st1[N],st2[N],t1,t2;\nvoid dfs(int x,int c)\n{\n    vis[x]=c;\n    for(int i=head[x];i;i=Next[i])\n    {\n        if(!vis[ver[i]])dfs(ver[i],3-c);\n        else if(vis[ver[i]]==c)fail=1;\n    }\n}\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)scanf(\"%d\",&a[i]);\n    int MIN=1e8;\n    for(int i=n;i;i--)k[i]=MIN,MIN=min(MIN,a[i]);\n    for(int i=1;i<=n;i++)\n        for(int j=i+1;j<=n;j++)\n            if(a[i]<a[j]&&a[i]>k[j])\n                add(i,j),add(j,i);\n    for(int i=1;i<=n;i++)if(!vis[i])dfs(i,1);\n    if(fail){printf(\"%d\",0);return 0;}\n    int now=1;\n    st1[0]=st2[0]=1e8;\n    for(int i=1;i<=n;i++)\n        if(vis[i]==1)\n        {\n            while(st1[t1]==now)\n                t1--,printf(\"%c \",'b'),now++;\n            if(a[i]>st1[t1])while(st2[t2]==now)t2--,printf(\"%c \",'d'),now++;\n            while(st1[t1]==now)\n                t1--,printf(\"%c \",'b'),now++;\n            st1[++t1]=a[i],printf(\"%c \",'a');\n        }\n        else\n        {\n            while(1)\n                if(st1[t1]==now)\n                    t1--,printf(\"%c \",'b'),now++;\n                else if(st2[t2]==now)\n                    t2--,printf(\"%c \",'d'),now++;\n                else break;\n            st2[++t2]=a[i],printf(\"%c \",'c');\n        }\n    while(1)\n        if(st1[t1]==now)\n            t1--,printf(\"%c \",'b'),now++;\n        else if(st2[t2]==now)\n            t2--,printf(\"%c \",'d'),now++;\n        else break;\n    return 0;\n}\n```\n",
        "postTime": 1646917265,
        "uid": 369598,
        "name": "\u9088\u4e91\u6c49",
        "ccfLevel": 4,
        "title": "P1155"
    },
    {
        "content": "\u8ba9\u6211\u4eec\u8003\u8651\uff0c\u5982\u679c\u544a\u8bc9\u6bcf\u4e2a\u6570\u5982\u679c\u8fdb\u5165\u54ea\u4e2a\u6808\uff0c\u90a3\u4e48\u901a\u8fc7\u6a21\u62df\u5c31\u80fd\u786e\u5b9a\u5e8f\u5217\n\n\u89e3\u91ca\uff1a\u5f53\u6bcf\u4e2a\u5143\u7d20\u8fdb\u54ea\u4e2a\u6808\u786e\u5b9a\u65f6\uff0c\u4e0d\u786e\u5b9a\u7684\u53ea\u6709\u67d0\u4e2a\u5143\u7d20\u8fdb\u4e00\u4e2a\u6808\uff0c\u548c\u53e6\u4e00\u4e2a\u6808\u5f39\u51fa\u5143\u7d20\u7684\u987a\u5e8f\u3002\n\n\u8fd9\u79cd\u60c5\u51b5\uff0c\u56e0\u4e3a\u8981\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\uff0c\u800c $a$ \u6808\u7684\u6240\u6709\u64cd\u4f5c\u7684\u5b57\u5178\u5e8f\u90fd\u5c0f\u4e8e $b$ \u6808\uff0c\u6211\u4eec\u6bcf\u6b21\u6709\u5143\u7d20\u8fdb $b$ \u6808\u524d\u5148\u5c3d\u53ef\u80fd\u628a $a$ \u6808\u80fd\u5f39\u51fa\u7684\u5148\u5f39\u51fa\u3002\n\n\u8fd9\u6837\uff0c\u6211\u4eec\u77e5\u9053\uff0c**\u53ea\u8981\u786e\u5b9a\u6bcf\u4e2a\u6570\u8fdb\u5165\u54ea\u4e2a\u6808\uff0c\u95ee\u9898\u5c31\u89e3\u51b3\u4e86\uff01**\n\n\u600e\u4e48\u786e\u5b9a\u5462\uff1f\uff1f\n\n\u4e5f\u5c31\u662f\u786e\u5b9a\u54ea\u4e9b\u5143\u7d20\u65e0\u8bba\u662f\u5426\u540c\u65f6\u5728\u6808\u5185\uff0c\u90fd\u4e0d\u80fd\u8fdb\u5165\u540c\u4e00\u4e2a\u6808\u3002\u5373\uff0c\u627e\u5230\u6240\u6709 $i$ \u5143\u7d20\u9009\u62e9\u8fdb\u5165 $a$ \u6808\uff0c\u90a3\u4e48 $j$ \u5143\u7d20\u53ea\u80fd\u8fdb\u5165 $b$ \u6808\u7684\u60c5\u51b5\u3002\n\n\u5982\u679c\u6709\u4e00\u4e2a\u987a\u5e8f\u9760\u524d\u7684\u5143\u7d20\uff0c\u548c\u4e00\u4e2a\u987a\u5e8f\u9760\u540e\u7684\u5143\u7d20\uff0c\u524d\u8005\u5927\u4e8e\u540e\u8005\uff0c\u524d\u8005\u548c\u540e\u8005\u53ef\u4ee5\u8fdb\u5165\u540c\u4e00\u4e2a\u6808\uff0c\u5373\u524d\u9762\u7684\u5143\u7d20\u8fdb\u5165\u6ca1\u6709\u5f39\u51fa\u65f6\uff0c\u540e\u9762\u7684\u5143\u7d20\u8fdb\u5165\u3002\n\n\u5982\u679c\u6709\u4e00\u4e2a\u987a\u5e8f\u9760\u524d\u7684\u5143\u7d20 $i$\uff0c\u548c\u4e00\u4e2a\u987a\u5e8f\u9760\u540e\u7684\u5143\u7d20 $j$\uff0c\u524d\u8005\u5927\u5c0f\u5c0f\u4e8e\u540e\u8005\uff1a\n\n*\u63d0\u9192\uff1a\u8fd9\u91cc $i,j$ \u6307\u4e0b\u6807*\n\n1.\u524d\u8005\u548c\u540e\u8005\u53ef\u4ee5\u8fdb\u5165\u540c\u4e00\u4e2a\u6808\uff0c\u5373\u524d\u9762\u7684\u5143\u7d20 $i$ \u8fdb\u5165\u540e\u5f39\u51fa\u4e86\uff0c\u540e\u9762\u7684\u5143\u7d20 $j$ \u518d\u8fdb\u5165\uff0c\u524d\u63d0\u662f $i$ \u53ef\u4ee5\u505a\u5230\u5728 $j$ \u52a0\u5165\u524d\u5f39\u51fa\u3002\n\n2.\u4ec0\u4e48\u65f6\u5019\u524d\u63d0\u4e0d\u6210\u7acb\uff1f\u5728 $j$ \u7684\u540e\u9762\u8fd8\u6709\u4e2a\u5143\u7d20\uff0c\u6bd4 $i$ \u5143\u7d20\u7684\u5927\u5c0f\u8fd8\u8981\u5c0f\uff0c\u90a3 $i$ \u5728 $j$ \u52a0\u5165\u524d\u5c31\u6ca1\u529e\u6cd5\u5f39\u51fa\uff0c\u5982\u679c\u5f39\u51fa\u4e86 $(a_i>a_k)$ \u5c31\u4e0d\u662f\u5347\u5e8f\uff0c\u90a3 $j$ \u5c31\u4e0d\u80fd\u548c $i$ \u8fdb\u5165\u540c\u4e00\u4e2a\u6808\u3002\n\n\u901a\u8fc7\u540e\u7f00\u6700\u5c0f\u503c\u5904\u7406\u8fd9\u4e2a\u590d\u6742\u5ea6\u5728 $O(n^2)$\n\n\u8c01\u548c\u8c01\u77db\u76fe\u5224\u65ad\u51fa\u6765\u4e86\uff0c\u90a3\u4e48\u77db\u76fe\u7684\u6bcf\u4e00\u5bf9\u8fdb\u884c\u5efa\u8fb9\uff0c\u8dd1\u4e8c\u5206\u56fe\u67d3\u8272\uff0c\u5982\u679c\u80fd\u6210\u529f\u67d3\u8272\uff0c\u5c31\u662f\u4e00\u4e2a\u53ef\u884c\u65b9\u6848\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n;\nconst int N=1010;\nvector<int>G[N];\nint a[N],sa[N];\nint col[N];//1 \u8fdba 2 \u8fdbb\nvector<int>stuc[3];//\u6808\u3002\u624b\u5199\u6216\u8005\u7528 stack \u4e5f\u884c\uff0c\u4e0d\u8fc7\u6211\u6ca1\u7528\u4e60\u60ef\u3002\nbool dfs(int x,int c)\n{\n\tcol[x]=c;\n\tfor(int i=0;i<G[x].size();i++)\n\t{\n\t\tint j=G[x][i];\n\t\tif(col[j]==c)return 0;\n\t\tif(col[j]==0)\n\t\tif(!dfs(j,c%2+1))return 0;\n\t}\n\treturn 1;\n}\ninline void solve(){\n\tcin>>n;\n\tsa[n+1]=114514;//\u4efb\u610f\u5927\u4e8e 1000 \u7684\u6570\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>a[i];\n\tfor(int i=n;i>=1;i--)\n\t\tsa[i]=min(sa[i+1],a[i]);\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=i+1;j<=n;j++)\n\t\tif(a[i]<a[j]&&sa[j]<a[i])\n\t\t\tG[i].push_back(j),G[j].push_back(i);\n\tfor(int i=1;i<=n;i++)\n\tif((!col[i])&&(!dfs(i,1))){cout<<0<<endl;return;}\n\t//\u7ed9\u6ca1\u67d3\u8fc7\u7684\u6bcf\u4e2a\u70b9\u8dd1\u67d3\u8272\n\t//\u4e0b\u9762\uff0c\u8fdb\u884c\u6a21\u62df\n\tint s=1;//\u8f85\u52a9\u53d8\u91cf\uff0c\u8868\u793a\u5df2\u7ecf\u5f39\u51fa\u4e86\u503c\u4e3a [1,s) \u7684\u6570\uff0c\u5373\u8be5\u5f39 s \u4e86\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint t=col[i];\n\t\twhile(stuc[t].size()&&*(stuc[t].end()-1)<a[i])//*(stuc[t].end()-1) \u8868\u793a\u53d6\u5c3e\u5143\u7d20\u7684\u503c\n\t\t\tif(*(stuc[1].end()-1)==s)\n\t\t\t\tstuc[1].pop_back(),cout<<\"b \",s++;\n\t\t\telse stuc[2].pop_back(),cout<<\"d \",s++;\n\t\tif(t==2)\n\t\t\twhile(stuc[1].size()&&*(stuc[1].end()-1)==s)\n\t\t\t\tstuc[1].pop_back(),cout<<\"b \",s++;\n\t\tstuc[t].push_back(a[i]),\n\t\tcout<<(t==1?\"a \":\"c \");\n\t}\n\twhile(s<=n)\n\t{\n\t\twhile(stuc[1].size()&&*(stuc[1].end()-1)==s)\n\t\t\tstuc[1].pop_back(),cout<<\"b \",s++;\n\t\twhile(stuc[2].size()&&*(stuc[2].end()-1)==s)\n\t\t\tstuc[2].pop_back(),cout<<\"d \",s++;\n\t}\n}\n\nint main()\n{\n\tsolve();\n\tconst int _=0;\n\treturn ~~(0^_^0);\n}\n```",
        "postTime": 1663680892,
        "uid": 396146,
        "name": "xcrr",
        "ccfLevel": 6,
        "title": "\u53cc\u6808\u6392\u5e8f\u2014\u2014\u4e8c\u5206\u56fe\u67d3\u8272\u7684\u8fd0\u7528\u5178\u578b"
    },
    {
        "content": "## Solution\n\n\u9996\u5148\u8fd9\u4e2a\u7ed3\u8bba\u5f88\u6e05\u695a : \u5982\u679c $i<j<k$ \u4e14 $a_k<a_i<a_j$ , \u90a3\u4e48 $i$ \u548c $j$ \u6254\u5230\u4e24\u4e2a\u6808\u91cc\u9762 .\n\n\u7136\u540e\u8003\u8651\u5982\u4f55\u8d2a\u5fc3 . \u9996\u5148 , \u4e8c\u5206\u56fe\u67d3\u8272\u7684\u65f6\u5019 , \u6211\u4eec\u4ece\u5c0f\u5230\u5927\u679a\u4e3e , \u6bcf\u4e2a\u70b9\u5982\u679c\u6ca1\u88ab\u67d3 , \u80fd\u641e\u5230\u7b2c\u4e00\u4e2a\u6808\u5c31\u653e\u5728\u7b2c\u4e00\u4e2a\u6808\u91cc\u9762 .\n\n\u7136\u540e\u8003\u8651\u600e\u4e48\u6837\u6392\u5e8f .\n\n\u4e0b\u9762\u662f\u4e71\u641e\u505a\u6cd5 : ( \u7528 $a$ \u548c $c$ \u4ee3\u6307\u4e24\u4e2a\u6808 )\n\n\u9996\u5148 , \u5bf9\u4e8e\u6bcf\u4e2a\u6570 , \u6211\u4eec\u8981\u538b\u5165\u5b83\u8981\u53bb\u7684\u6808\u91cc\u9762 .\n\n\u4f46\u662f\u5982\u679c\u6808\u9876\u6bd4\u4ed6\u5c0f , \u90a3\u4e48\u80af\u5b9a\u8981\u5148\u628a\u8fd9\u4e2a\u6808\u9876\u5f39\u51fa\u53bb . \n\n\u5982\u679c\u8fd9\u4e2a\u662f\u7b2c\u4e8c\u4e2a\u6808 , \u90a3\u4e48\u8003\u8651\u5148\u628a $a$ \u80fd\u5f39\u51fa\u6765\u7684\u90fd\u5f39\u51fa\u6765 ( $b$ \u4f18\u4e8e $d$ ) . \u7136\u540e\u518d\u53bb\u628a $c$ \u80fd\u5f39\u51fa\u6765\u7684\u5f39\u51fa\u6765 . \u5982\u679c\u8fd8\u6ca1\u6709\u6ee1\u8db3\u6808\u9876\u5927\u4e8e\u8fd9\u4e2a\u6570 , \u90a3\u4e48\u7ee7\u7eed\u5f39\u7b2c\u4e00\u4e2a\u6808 ...... \u6700\u540e , \u518d\u770b\u4e00\u770b $a$ \u80fd\u4e0d\u80fd\u7ee7\u7eed\u5f39 : $b$ \u4f18\u4e8e $c$ .\n\n\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u6808 , \u64cd\u4f5c\u51e0\u4e4e\u548c\u5b83\u4e00\u6837 , \u4f46\u662f\u5148\u5f39\u7b2c\u4e00\u4e2a\u6808 . \u8fd9\u91cc\u8981\u6ce8\u610f , \u5f39\u73a9\u540e\u5c31\u4e0d\u8981\u53bb\u68c0\u67e5\u7b2c\u4e8c\u4e2a\u6808\u4e86 , \u56e0\u4e3a $d$ \u5f88\u52a3 , \u8d8a\u9760\u540e\u8d8a\u597d .\n\ncode :\n\n```cpp\n#include<bits/stdc++.h>\n#define ffor(i,a,b) for(int i=(a);i<=(b);i++)\n#define roff(i,a,b) for(int i=(a);i>=(b);i--)\nusing namespace std;\nconst int MAXN=1000+10;\nint n,col[MAXN],a[MAXN],lst[MAXN],mx[MAXN],flg[MAXN],Mn[MAXN];\nvector<int> G[MAXN];\nvoid dfs(int u,int cc) {\n\tif(col[u]!=-1&&col[u]!=cc) {cout<<0;exit(0);}\n\tif(col[u]!=-1) return ;\n\tcol[u]=cc;\n\tfor(auto v:G[u]) dfs(v,1-cc);\n\treturn ;\n}\nstack<int> st1,st2;\nint check(int u) {\n\tffor(i,1,u-1) if(!flg[i]) return 0;\n\treturn 1;\n}\nvoid clear(int u,int op) {\n\tif(op==1) {\n\t\twhile(!st1.empty()&&st1.top()<u) {\n\t\t\twhile(!st1.empty()&&st1.top()<u) {if(check(st1.top())) {flg[st1.top()]=1;cout<<\"b \";st1.pop();} else break;}\n\t\t\tif(st1.empty()||st1.top()>u) break;\n\t\t\twhile(!st2.empty()&&st2.top()<u) {if(check(st2.top())) {flg[st2.top()]=1;cout<<\"d \";st2.pop();} else break; if(check(st1.top())) break;}\n\t\t}\n\t}\n\telse {\n\t\twhile(!st2.empty()&&st2.top()<u) {\n\t\t\twhile(!st2.empty()&&st2.top()<u) {if(check(st2.top())) {flg[st2.top()]=1;cout<<\"d \";st2.pop();} else break;}\n\t\t\tif(st2.empty()||st2.top()>u) break;\n\t\t\twhile(!st1.empty()&&st1.top()<u) {if(check(st1.top())) {flg[st1.top()]=1;cout<<\"b \";st1.pop();} else break; if(check(st2.top())) break;}\n\t\t}\n\t}\n}\nint main() {\n\tcin>>n; ffor(i,1,n) cin>>a[i];\n\tMn[n]=a[n],Mn[n+1]=INT_MAX;\n\troff(i,n-1,1) Mn[i]=min(Mn[i+1],a[i]);\n\tffor(i,1,n) ffor(j,i+1,n) if(a[i]<a[j]) {\n\t\tif(Mn[j+1]<a[i]) {G[i].push_back(j),G[j].push_back(i);}\n\t}\n\tmemset(col,-1,sizeof(col));\n\tffor(i,1,n) if(col[i]==-1) dfs(i,0);\n\tffor(i,1,n) {\n\t\twhile(!st1.empty()&&check(st1.top())) {cout<<\"b \";flg[st1.top()]=1;st1.pop();}\n\t\tclear(a[i],col[i]+1);\n\t\tif(col[i]) {while(!st1.empty()&&check(st1.top())) {flg[st1.top()]=1;st1.pop();cout<<\"b \";}cout<<\"c \";st2.push(a[i]);}\n\t\telse {cout<<\"a \";st1.push(a[i]);}\n\t\t\n\t}\n\tclear(INT_MAX,1);\n\twhile(!st2.empty()) {cout<<\"d \";st2.pop();}\n\treturn 0;\n}\n```\n\n\u539f\u8c05\u6211\u4e11\u964b\u7684\u4ee3\u7801 .\n\u8bf4\u4e00\u4e0b , `clear` \u5c31\u662f\u4e0a\u9762\u90a3\u4e24\u5927\u6bb5\u7684\u8fc7\u7a0b .",
        "postTime": 1660831180,
        "uid": 120947,
        "name": "Purslane",
        "ccfLevel": 7,
        "title": "P1155"
    },
    {
        "content": "\u9898\u610f\uff1a\u80fd\u5426\u7528\u4e24\u4e2a\u6808\u5b9e\u73b0\u6309\u6392\u5217 $p_i$ \u987a\u5e8f\u5165\u6808\uff0c$1,2,3...,n$ \u987a\u5e8f\u51fa\u6808\u3002\n\n\u5982\u679c\u53ef\u4ee5\uff0c\u8f93\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u64cd\u4f5c\u65b9\u5f0f\uff08\u4ece\u5c0f\u5230\u5927\uff1a\u7b2c\u4e00\u4e2a\u6808\u5165\u6808\uff1b\u7b2c\u4e00\u4e2a\u6808\u51fa\u6808\uff1b\u7b2c\u4e8c\u4e2a\u6808\u5165\u6808\uff1b\u7b2c\u4e00\u4e2a\u6808\u51fa\u6808\uff09\u3002\n\n\u5148\u8003\u8651\u4e00\u4e2a\u6808\u65f6\u600e\u4e48\u505a\u3002\n\n~~\u770b\u5b8c\u9898\u89e3~~\u53ef\u4ee5\u53d1\u73b0\u5f53\u4e14\u4ec5\u5f53 $\\exists$ \u4e0b\u6807 $i,j,k$ \u4f7f\u5f97 $i<j<k$ \u4e14 $p_k<p_i<p_j$ \u65f6\u4e0d\u53ef\u80fd\u6267\u884c\u3002\n\n\u539f\u56e0\uff1a\u56e0\u4e3a $k$ \u4e0b\u6807\u6700\u5927\uff0c$k$ \u5fc5\u987b\u6700\u540e\u5165\u6808\u3002\u800c $p_k$ \u6700\u5c0f\uff0c\u5373\u4e3a $k$ \u5fc5\u987b\u6700\u5148\u51fa\u6808\u3002\u6240\u4ee5 $i,j$ \u5165\u6808\u95f4\u4e0d\u5f97\u5f39\u51fa\u3002\u4f46 $p_i<p_j$ \u610f\u5473\u7740 $i$ \u5fc5\u987b\u6bd4 $j$ \u5148\u51fa\u6808\uff0c\u800c\u8fd9\u5728\u4e0d\u5f39\u51fa\u7684\u60c5\u51b5\u4e0b\u662f\u4e0d\u53ef\u80fd\u7684\u3002\u6240\u4ee5\u77db\u76fe\u3002\n\n\u6211\u4eec\u5148\u5904\u7406\u4e24\u4e2a\u4e0b\u6807\u80fd\u5426\u5171\u5b58~~\u5171\u8363~~\u3002\u9884\u5904\u7406 $f_i=\\displaystyle\\min_{n}^{i+1}{}(p_i)$\uff0c\u5373 $i<j$ \u540c\u65f6 $f_j<p_i<p_j$\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\nint Min=0x3f3f3f3f;\n\tfor(int i=n;i>=1;i--){\n\t\tf[i]=Min;\n\t\tMin=min(Min,p[i]);\n\t\ta[i]=-1;\n\t}\n\tfor(int i=1;i<n;i++){\n\t\tfor(int j=i+1;j<n;j++){\n\t\t\tif(p[i]<p[j]&&f[j]<p[i]){\n\t\t\t\t//can't live peacefully\n\t\t\t}\n\t\t}\n\t}\n```\n\n\u5728\u53ea\u6709\u4e00\u4e2a\u6808\u7684\u60c5\u51b5\u4e0b\u8fd9\u6837\u5c31\u6302\u6389\u4e86\uff0c\u4f46\u662f\u6709\u4e24\u4e2a\u6808\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e24\u4e2a\u4e0b\u6807\u5206\u5f00\u5230\u4e0d\u540c\u6808\u91cc\u3002\n\n\u5982\u679c\u6211\u4eec\u628a\u7b2c\u4e00\u4e2a\u6808\u8bbe\u4e3a $0$\uff0c\u7b2c\u4e8c\u4e2a\u6808\u8bbe\u4e3a $1$\uff0c\u4e0d\u80fd\u5171\u5b58\u5c31\u8fde\u4e00\u6761\u8fb9\uff0c\u90a3\u4e48\u5224\u65ad\u5b58\u5728\u6027\u5c31\u53d8\u6210\u4e86**\u4e8c\u5206\u56fe\u67d3\u8272**\u95ee\u9898\u3002\n\n\u4ee3\u7801\uff1a\n\n```\nvoid dfs(int u){\n\tfor(auto v:e[u]){\n\t\tif(a[v]==-1)a[v]=(a[u]^1),dfs(v);//\u6ca1\u6709\u904d\u5386\n\t\telse if(a[v]^a[u]==0){//\u76f8\u540c\n\t\t\tflag=0;break;\n\t\t}\n\t}\n}\n```\n\u4e3b\u51fd\u6570\u5185\uff1a\n```\nfor(int i=1;i<=n;i++){\n\tif(!flag)break;//\u6302\u4e86\n\tif(a[i]==-1){\n\t\ta[i]=0;\n\t\tdfs(i);\n\t}\n}\nif(!flag){\n\tcout<<0<<endl;\n\treturn 0;\n}\n```\n\n\u63a5\u4e0b\u6765\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\n\n\u5148\u8003\u8651\u4efb\u610f\u8f93\u51fa\u4e00\u7ec4\u65b9\u6848\uff1a\n\n\u663e\u7136\u7531\u4e8e\u8f93\u51fa\u9012\u589e\u7684\u7279\u6027\uff0c\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e24\u4e2a**\u6808\u5185\u5143\u7d20\u5355\u8c03\u9012\u589e**\u7684\u6808\u3002\n\n\u5982\u679c\u4e0d\u5355\u8c03\u9012\u589e\uff0c\u9700\u8981\u5f39\u51fa\u3002\u663e\u7136\u6b64\u65f6\u8fd9\u4e2a**\u6808\u9876\u4e0d\u4e00\u5b9a\u662f\u9700\u8981\u8f93\u51fa**\u7684\uff0c\u6240\u4ee5\u5982\u679c\u4e0d\u662f\u9700\u8981\u8f93\u51fa\u7684\u5c31\u5148\u5f39\u51fa\u53e6\u4e00\u4e2a\u6808\u7684\u6808\u9876\u3002\n\n\u8003\u8651\u5982\u4f55\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\n\n\u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u51fa\uff0c\u4e00\u4e2a\u6808\u5185\u96be\u4ee5\u6539\u53d8\u64cd\u4f5c\u987a\u5e8f\uff1b\u8003\u8651\u6539\u53d8\u6808\u95f4\u64cd\u4f5c\u987a\u5e8f\uff0c\u5177\u4f53\u6765\u8bb2\u5c31\u662f**\u5728\u7b2c\u4e8c\u4e2a\u6808\u538b\u5165\u524d\u5148\u5c3d\u91cf\u8f93\u51fa\u7b2c\u4e00\u4e2a\u6808\u7684\u5143\u7d20**\u3002\n\n\u6b64\u90e8\u5206\u4ee3\u7801\uff1a\n\n```cpp\nfor(int i=1;i<=n;i++){\n\twhile(!s[a[i]].empty()&&s[a[i]].top()<p[i]){\n\t\tif(now==s[a[i]].top()){\n\t\t\tif(a[i]==0)cout<<\"b \";\n\t\t\telse cout<<\"d \";\n\t\t\ts[a[i]].pop();\n\t\t\tnow++;\n\t\t}\n\t\telse{\n\t\t\tassert(s[a[i]^1].top()==now);\n\t\t\tif(a[i]==1)cout<<\"b \";\n\t\t\telse cout<<\"d \";\n\t\t\ts[a[i]^1].pop();\n\t\t\tnow++;\n\t\t}\n\t}\n\tif(a[i]==1){\n\t\twhile(!s[0].empty()&&now==s[0].top()){\n\t\t\tcout<<\"b \";\n\t\t\ts[0].pop();\n\t\t\tnow++;\n\t\t}\n\t\tcout<<\"c \";\n\t\ts[1].push(p[i]);\n\t}\n\telse{\n\t\tcout<<\"a \";\n\t\ts[0].push(p[i]);\n\t}\n}\nwhile(now<=n){\n\tif(!s[0].empty()&&s[0].top()==now){\n\t\tcout<<\"b \";\n\t\ts[0].pop();\n\t}\n\telse{\n\t\tassert(s[1].top()==now);\n\t\tcout<<\"d \";\n\t\ts[1].pop();\n\t}\n\tnow++;\n}\n```\n\n\u6700\u7ec8\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e3+5;\n#define debug cout<<endl<<\"Remove kebab,Serbia strong\"<<endl;\nint p[maxn],f[maxn],n,flag=1;\nint a[maxn];\nvector<int> e[maxn];\nstack<int> s[2];\nvoid dfs(int u){\n\tfor(auto v:e[u]){\n\t\tif(a[v]==-1)a[v]=(a[u]^1),dfs(v);\n\t\telse if(a[v]^a[u]==0){\n\t\t\tflag=0;break;\n\t\t}\n\t}\n}\nint now=1;\nint main(){\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tcout.tie(0);\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)cin>>p[i];\n\tint Min=0x3f3f3f3f;\n\tfor(int i=n;i>=1;i--){\n\t\tf[i]=Min;\n\t\tMin=min(Min,p[i]);\n\t\ta[i]=-1;\n\t}\n\tfor(int i=1;i<n;i++){\n\t\tfor(int j=i+1;j<n;j++){\n\t\t\tif(p[i]<p[j]&&f[j]<p[i]){\n\t\t\t\te[i].push_back(j);\n\t\t\t\te[j].push_back(i);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(!flag)break;\n\t\tif(a[i]==-1){\n\t\t\ta[i]=0;\n\t\t\tdfs(i);\n\t\t}\n\t}\n\tif(!flag){\n\t\tcout<<0<<endl;\n\t\treturn 0;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\twhile(!s[a[i]].empty()&&s[a[i]].top()<p[i]){\n\t\t\tif(now==s[a[i]].top()){\n\t\t\t\tif(a[i]==0)cout<<\"b \";\n\t\t\t\telse cout<<\"d \";\n\t\t\t\ts[a[i]].pop();\n\t\t\t\tnow++;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tassert(s[a[i]^1].top()==now);\n\t\t\t\tif(a[i]==1)cout<<\"b \";\n\t\t\t\telse cout<<\"d \";\n\t\t\t\ts[a[i]^1].pop();\n\t\t\t\tnow++;\n\t\t\t}\n\t\t}\n\t\tif(a[i]==1){\n\t\t\twhile(!s[0].empty()&&now==s[0].top()){\n\t\t\t\tcout<<\"b \";\n\t\t\t\ts[0].pop();\n\t\t\t\tnow++;\n\t\t\t}\n\t\t\tcout<<\"c \";\n\t\t\ts[1].push(p[i]);\n\t\t}\n\t\telse{\n\t\t\tcout<<\"a \";\n\t\t\ts[0].push(p[i]);\n\t\t}\n\t}\n\t//debug\n\twhile(now<=n){\n\t\t//debug\n\t\tif(!s[0].empty()&&s[0].top()==now){\n\t\t\tcout<<\"b \";\n\t\t\ts[0].pop();\n\t\t}\n\t\telse{\n\t\t\tassert(s[1].top()==now);\n\t\t\tcout<<\"d \";\n\t\t\ts[1].pop();\n\t\t}\n\t\tnow++;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1661842983,
        "uid": 342076,
        "name": "British_Union",
        "ccfLevel": 5,
        "title": "3rdInternationale"
    },
    {
        "content": "\u9898\u610f\u7565\uff0c\u9996\u5148\u8003\u8651\u4e24\u4e2a\u4f4d\u7f6e\u5728\u540c\u4e00\u4e2a\u6808\u4e2d\u80fd\u5426\u5171\u5b58\uff0c\u5bf9\u4e8e $(i,j)$\uff0c\u5982\u679c\u5b58\u5728 $k$ \u4f7f\u5f97 $i < j < k$ \u4e14 $p_k < p_i < p_j$\uff0c$(i,j)$ \u662f\u4e0d\u80fd\u5171\u5b58\u7684\u3002\u539f\u56e0\u5728\u4e8e\u6b64\u65f6\u6839\u636e\u5165\u6808\u987a\u5e8f\u4e3a $i-j-k$\uff0c\u5982\u679c\u60f3\u8981 $k$ \u7b2c\u4e00\u4e2a\u51fa\u6808\uff0c\u51fa\u6808\u5e8f\u5217\u5c31\u53ea\u80fd\u662f $k-j-i$\uff0c\u4e0e\u671f\u671b\u7684 $k-i-j$ \u4e0d\u7b26\u3002\u5224\u65ad\u8fd9\u4e2a\u53ef\u4ee5\u5bf9 $p$ \u6c42\u4e00\u4e2a\u540e\u7f00\u6700\u5927\u503c\uff08\u4e0d\u5305\u62ec\u81ea\u5df1\uff09\u3002\n\n\u5bf9\u4e8e\u4e24\u4e2a\u4f4d\u7f6e\uff0c\u5982\u679c\u5b83\u4eec\u4e0d\u80fd\u5728\u540c\u4e00\u4e2a\u6808\u5185\uff0c\u5c31\u53ef\u4ee5\u5728\u5b83\u4eec\u4e4b\u95f4\u8fde\u4e00\u6761\u8fb9\u3002\u8fde\u597d\u4e4b\u540e\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u4e8c\u5206\u56fe\uff0c\u4e24\u4e2a\u90e8\u5206\u5bf9\u5e94\u7740\u4e24\u4e2a\u6808\u5185\u7684\u70b9\u3002\u53ef\u4ee5\u505a\u4e00\u6b21\u4e8c\u5206\u56fe\u67d3\u8272\uff0c\u5982\u679c\u67d3\u8272\u5931\u8d25\u5219\u8bf4\u660e\u65e0\u89e3\u3002\u5426\u5219\uff0c\u8003\u8651\u89e3\u51b3\u5269\u4e0b\u7684\u90e8\u5206\u3002\n\n\u5148\u4e0d\u8003\u8651\u5b57\u5178\u5e8f\uff0c\u5148\u8003\u8651\u5982\u4f55\u64cd\u4f5c\u53ef\u4ee5\u4f7f\u51fa\u6808\u5e8f\u5217\u6070\u597d\u662f $1$ ~ $n$\u3002\u9996\u5148\uff0c\u4efb\u610f\u4e00\u4e2a\u6808\u7684\u5143\u7d20\u90fd\u662f\u4ece\u6808\u9876\u5230\u6808\u5e95\u5355\u8c03\u9012\u589e\u7684\uff0c\u4e0d\u7136\u4e0d\u80fd\u6309\u987a\u5e8f\u8f93\u51fa\u3002\u90a3\u4e48\u904d\u5386 $n$ \u4e2a\u4f4d\u7f6e\uff0c\u82e5\u5f53\u524d\u4f4d\u7f6e\u7684\u6570\u5c0f\u4e8e\u5176\u6240\u5728\u6808\u6808\u9876\uff0c\u53ef\u4ee5\u76f4\u63a5\u52a0\u5165\u3002\u5426\u5219\u9700\u8981\u5f39\u6808\uff0c\u4f46\u662f\u4e0d\u80fd\u76f4\u63a5\u5f39\uff0c\u8981\u770b\u8003\u8651\u5230\u8f93\u51fa\u5e8f\u5217\u4e2d\u7684\u7b2c\u51e0\u4e2a\u6570\u3002\u4e24\u4e2a\u6808\u7684\u6808\u9876\u54ea\u4e2a\u4e0e\u6b64\u6570\u76f8\u7b49\uff0c\u5c31\u5f39\u54ea\u4e2a\u6808\uff0c\u7136\u540e\u518d\u628a\u5f53\u524d\u6570\u52a0\u5165\u8fdb\u53bb\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u4f7f\u5b57\u5178\u5e8f\u6700\u5c0f\uff1a\n\n1.\u8981\u5c3d\u91cf\u628a\u7f16\u53f7\u8f83\u5c0f\u7684\u4f4d\u7f6e\u5b89\u6392\u5728\u7b2c\u4e00\u4e2a\u6808\u3002\n\n2.\u7b2c\u4e8c\u4e2a\u6808\u7684\u5165\u6808\u548c\u7b2c\u4e00\u4e2a\u6808\u7684\u5f39\u6808\u662f\u76f8\u5bf9\u72ec\u7acb\u7684\u3002\u800c\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u6808\u7684\u5f39\u6808\u5b57\u5178\u5e8f\u6bd4\u7b2c\u4e8c\u4e2a\u6808\u5165\u6808\u5c0f\uff0c\u6240\u4ee5\u5728\u8003\u8651\u7b2c\u4e8c\u4e2a\u6808\u7684\u5143\u7d20\uff0c\u6ee1\u8db3\u6761\u4ef6\u5373\u5c06\u5165\u6808\u65f6\uff0c\u8981\u770b\u770b\u7b2c\u4e00\u4e2a\u6808\u662f\u4e0d\u662f\u53ef\u4ee5\u5f39\u6808\u3002\n\n\u6700\u540e\u8981\u628a\u6808\u5f39\u7a7a\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <vector>\n#include <queue>\nusing namespace std;\nconst int N = 1e3 + 10;\nint n,p[N],suf[N],col[N];\nint top[2],stk[N][2],pos = 1;\nvector <int> g[N];\nbool flag;\nvoid dfs(int u,int k){\n\tcol[u] = k;\n\tfor(unsigned i = 0; i < g[u].size(); i++){\n\t\tint v = g[u][i];\n\t\tif(col[v] == k){\n\t\t\tflag = 1;\n\t\t\treturn;\n\t\t}\n\t\tif(col[v] == -1) dfs(v,k ^ 1);\n\t}\n}\nvoid check(){\n\twhile(top[0] && stk[top[0]][0] == pos){\n\t\ttop[0]--;\n\t\tpos++;\n\t\tprintf(\"b \");\n\t}\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i = 1; i <= n; i++) scanf(\"%d\",&p[i]);\n\tsuf[n - 1] = p[n];\n\tfor(int i = n - 2; i >= 1; i--) suf[i] = min(suf[i + 1],p[i + 1]);\n\tfor(int i = 1; i < n; i++)\n\t    for(int j = i + 1; j < n; j++){\n\t    \tif(suf[j] < p[i] && p[i] < p[j]){\n\t    \t\tg[i].push_back(j);\n\t    \t\tg[j].push_back(i);\n\t\t\t}\n\t\t}\n\tmemset(col,-1,sizeof(col));\n\tfor(int i = 1; i <= n; i++) if(col[i] == -1) dfs(i,0);\n\tif(flag){\n\t\tputs(\"0\");\n\t\treturn 0;\n\t}\n \tfor(int i = 1; i <= n; i++){\n\t\tif(!col[i]){\n\t\t\tif(!top[0] || p[i] < stk[top[0]][0]){\n\t\t\t\tstk[++top[0]][0] = p[i];\n\t\t\t\tprintf(\"a \");\n\t\t\t}\n\t\t\telse{\n\t\t\t\twhile(top[0] && p[i] > stk[top[0]][0]){\n\t\t\t\t\tif(stk[top[0]][0] == pos){\n\t\t\t\t\t\tpos++;\n\t\t\t\t\t\ttop[0]--;\n\t\t\t\t\t\tprintf(\"b \");\n\t\t\t\t\t}\n\t\t\t\t\telse if(top[1] && stk[top[1]][1] == pos){\n\t\t\t\t\t\tpos++;\n\t\t\t\t\t\ttop[1]--;\n\t\t\t\t\t\tprintf(\"d \");\n\t\t\t\t\t}\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tstk[++top[0]][0] = p[i];\n\t\t\t\tprintf(\"a \");\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(!top[1] || p[i] < stk[top[1]][1]){\n\t\t\t\tcheck();\n\t\t\t\tstk[++top[1]][1] = p[i];\n\t\t\t\tprintf(\"c \");\n\t\t\t}\n\t\t\telse{\n\t\t\t\twhile(top[1] && p[i] > stk[top[1]][1]){\n\t\t\t\t\tif(top[0] && stk[top[0]][0] == pos){\n\t\t\t\t\t\tpos++;\n\t\t\t\t\t\ttop[0]--;\n\t\t\t\t\t\tprintf(\"b \");\n\t\t\t\t\t}\n\t\t\t\t\telse if(stk[top[1]][1] == pos){\n\t\t\t\t\t\tpos++;\n\t\t\t\t\t\ttop[1]--;\n\t\t\t\t\t\tprintf(\"d \");\n\t\t\t\t\t}\n\t\t\t\t\telse break;\n\t\t\t\t}\n\t\t\t\tcheck();\n\t\t\t\tstk[++top[1]][1] = p[i];\n\t\t\t\tprintf(\"c \");\n\t\t\t}\n\t\t}\n\t}\n\twhile(top[0] || top[1]){\n\t\tif((top[0] && stk[top[0]][0] == pos) || !top[1]){\n\t\t\ttop[0]--;\n\t\t\tprintf(\"b \");\n\t\t}\n\t\telse{\n\t\t\ttop[1]--;\n\t\t\tprintf(\"d \");\n\t\t}\n\t\tpos++;\n\t}\n\treturn 0;\n} ",
        "postTime": 1635223372,
        "uid": 385093,
        "name": "uniqueharry",
        "ccfLevel": 0,
        "title": "[P1155 [NOIP2008 \u63d0\u9ad8\u7ec4] \u53cc\u6808\u6392\u5e8f]\u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u6709\u5fc5\u8981\u6982\u8ff0\u4e00\u4e0b\u9898\u76ee\u3002\u672c\u9898\u5c31\u662f\u5bf9\u4e00\u4e2a\u7ed9\u5b9a\u76841~n\u5e8f\u5217\u901a\u8fc7\u4e24\u4e2a\u6808\u7684\u64cd\u4f5c\uff08a,b,c,d\u56db\u79cd\uff09\u80fd\u5426\u5f97\u5230\u4e00\u4e2a\u5347\u5e8f\u5e8f\u5217\u3002\u80fd\u5219\u8f93\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u65b9\u6848\uff0c\u5426\u5219\u8f93\u51fa0.\n\n\u663e\u7136\u6211\u4eec\u7b2c\u4e00\u611f\u89c9\u4f1a\u60f3\u5230\u8d2a\u5fc3\uff0c\u80fd\u7528\u68081\u5c31\u7528\u68081.\u8fd9\u6837\u770b\u8d77\u6765\u5341\u5206\u6b63\u786e\uff0c\u4f46\u662f\u4f1a\u9020\u6210\u8bef\u5224\u7684\u60c5\u51b5\uff08\u628a\u6709\u89e3\u5224\u6210\u65e0\u89e3\uff0c\u539f\u56e0\u4e0b\u9762\u4f1a\u89e3\u91ca\uff09\uff0c\u5982\u4ee5\u4e0b\u6570\u636e\uff1a\n\n10\n10 2 8 1 7 9 3 4 5 6\n\n\u8fd9\u91cc\u5b58\u5728\u4e00\u4e2a\u5143\u7d20\u95f4\u76f8\u65a5\uff08\u4e0d\u80fd\u653e\u540c\u4e00\u4e2a\u6808\uff09\u7684\u60c5\u51b5\uff08\u4ee5\u4e0b\u5143\u7d20\u5747\u4e0d\u662f\u5f53\u524d\u80fd\u5f39\u51fa\u7684\u5143\u7d20\uff09\uff1a\n\n\u4e00\u4e2a\u6808\uff1a\u663e\u7136a[i]>a[j],i<j\u65f6\uff0c\u9700\u8981\u4e00\u4e2a\u6808\u201c\u6682\u5b58\u201d\u5143\u7d20a[i]\uff1b\n\n\u4e24\u4e2a\u6808\uff1a\u8003\u8651\u4e09\u4e2a\u5143\u7d20a[i],a[j],a[k],i<j<k\uff0c\u5f53a[k]<a[i]<a[j]\u65f6\uff0ca[i]\u548ca[j]\u4e0d\u53ef\u80fd\u5728\u540c\u4e2a\u6808\u4e2d\uff0c\u5176\u4ed6\u60c5\u51b5\u5747\u53ef\u4ee5\u4f7f\u5b83\u4eec\u5171\u5b58\u3002\n\n\u4e09\u4e2a\u6808\uff1aa[p]<a[i]<a[j]<a[k],i<j<k<p\u2026\u2026\u540c\u7406n\u6808\u4e00\u6837\u3002\n\n\u521a\u624d\u7684\u8bef\u5224\u5c31\u662f\u628a\u4e24\u4e2a\u76f8\u65a5\u7684\u5143\u7d20\u653e\u5230\u4e86\u540c\u4e2a\u6808\u4e2d\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5224\u65ad\u4e24\u4e2a\u5143\u7d20\u7684\u76f8\u5bb9\u6027\uff0c\u5c06\u76f8\u65a5\u7684\u4e24\u4e2a\u5143\u7d20\u95f4\u8fde\u4e00\u6761\u8fb9\uff0c\u6784\u6210\u4e00\u4e2a\u65e0\u5411\u56fe\u3002\n\n\u8fd9\u4e2a\u6bd4\u8f83\u7b80\u5355\uff0c\u901a\u8fc7n2\u7684\u679a\u4e3e\u52a0\u540e\u7f00min\uff08\u540en\u4e2a\u5143\u7d20\u4e2d\u7684\u6700\u5c0f\u503c\uff09\u7684\u64cd\u4f5c\u53ef\u4ee5\u5b8c\u6210\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u5224\u65ad\u8fd9\u4e2a\u56fe\u662f\u5426\u662f\u4e8c\u5206\u56fe\u5e76\u6bcf\u4e2a\u5143\u7d20\u7684\u5f52\u5bbf\u3002\u5b8c\u6210\u4e86\u8fd9\u4e00\u6b65\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u7b80\u5355\u7684\u6a21\u62df\u3002\n\n\u7531\u4e8e\u8fd9\u91cc\u53ea\u6709\u4e24\u4e2a\u6808\uff0c\u56e0\u6b64\u5c31\u662f\u9ed1\u767d\u67d3\u8272\u3002**\u6ce8\u610f**\u5982\u679c\u7528\u627e\u5947\u73af\u7684\u65b9\u5f0f\u5224\u65ad\u4f1a\u8d85\u65f6\uff0c\u56e0\u4e3a\u8fd9\u6837\u8fd8\u8981\u518d\u67d3\u8272\u3002\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u67d3\u8272\u7684\u65b9\u6cd5\u5224\u65ad\uff08\u5982\u679c\u4e00\u6761\u8fb9\u7684\u4e24\u4e2a\u7aef\u70b9\u540c\u8272\u5219\u65e0\u89e3\uff09\u3002\u5177\u4f53bfs\u53ef\u4ee5\u5b9e\u73b0\u3002\n\n**P.S.:**\u4f69\u670d\u90a3\u4f4d\u7eaf\u6a21\u62df\u7684dalao\n\n\n\n\n\n```cpp\nvar\n  a,min,s1,s2,mat:array[0..1000] of longint;\n  g:array[1..1000,1..1000] of boolean;\n  f:array[0..2000] of longint;\n  n,i,j,p,top1,top2,t:longint;\n  flag:boolean;\nprocedure doit;\nvar find:boolean;\nbegin\n  find:=false;\n  if t<=n then\n    if (mat[t]=1) and (a[t]<s1[top1]) then\n    begin\n      inc(top1);\n      s1[top1]:=a[t];\n      inc(t);\n      find:=true;\n      inc(f[0]);\n      f[f[0]]:=1;\n    end;\nif find then exit;\n  if s1[top1]=p then begin dec(top1);inc(f[0]);f[f[0]]:=2;find:=true;inc(p);end;\nif find then exit;\n  if t<=n then\n    if (mat[t]=2) and (a[t]<s2[top2]) then\n    begin\n      inc(top2);\n      s2[top2]:=a[t];\n      inc(t);\n      find:=true;\n      inc(f[0]);\n      f[f[0]]:=3;\n    end;\nif find then exit;\n  if s2[top2]=p then begin dec(top2);inc(f[0]);f[f[0]]:=4;find:=true;inc(p);end;\nend;\nprocedure bfs;\nvar\n  list:array[1..10000] of longint;\n  b:array[1..1000] of boolean;\n  head,tail,x,i,j,p:longint;\nbegin\n  fillchar(list,sizeof(list),0);\n  fillchar(b,sizeof(b),0);\n  for i:=1 to n do\n  begin\n    if b[i] then continue;\n    b[i]:=true;\n    mat[i]:=1;\n    begin head:=0;tail:=1;fillchar(list,sizeof(list),0);end;\n    list[1]:=i;\n    while head<tail do\n    begin\n      inc(head);\n      x:=list[head];\n      for j:=1 to n do if g[x,j] then\n      begin\n        if not b[j] then\n        begin\n          b[j]:=true;\n          inc(tail);\n          list[tail]:=j;\n          mat[j]:=3-mat[x];\n        end else if mat[x]=mat[j] then begin writeln(0);halt;end;\n      end;\n    end;\n  end;\nend;\nbegin\n  readln(n);\n  for i:=1 to n do read(a[i]);\n  min[n]:=a[n];\n  for i:=n-1 downto 1 do if min[i+1]<a[i] then min[i]:=min[i+1] else min[i]:=a[i];\n  for i:=1 to n-2 do\n    for j:=i+1 to n-1 do if (min[j+1]<a[i]) and (a[i]<a[j]) then\n    begin\n      g[i,j]:=true;\n      g[j,i]:=true;\n    end;\n  fillchar(mat,sizeof(mat),0);\n  bfs;\n  for i:=1 to n do if mat[i]=0 then mat[i]:=1;\n  s1[0]:=2000;\n  s2[0]:=2000;\n  top1:=0;\n  top2:=0;\n  p:=1;\n  t:=1;\n  while p<=n do doit;\n  for i:=1 to f[0]-1 do write(chr(f[i]+96),' ');\n  writeln(chr(f[f[0]]+96));\nend.\n\n```",
        "postTime": 1505214540,
        "uid": 42319,
        "name": "IS_THAT_DISTANCE",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1155 \u3010\u53cc\u6808\u6392\u5e8f\u3011"
    }
]
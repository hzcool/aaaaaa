[
    {
        "content": "\u770b\u4e86\u697c\u4e0b\u76843\u7bc7\u9898\u89e3.\u611f\u89c9\u8fd8\u662f\u8bf4\u7684\u4e0d\u660e\u767d.\u5177\u4f53\u9047\u5230\u9898\u8be5\u600e\u4e48\u5206\u6790,\u5e76\u6ca1\u6709\u6307\u51fa.\u6240\u4ee5\u5199\u8fd9\u7bc7\u9898\u89e3\u4f5c\u4e3a\u8865\u5145.\u6b64\u9898\u6b63\u89e3\u4e3a\u5355\u8c03\u9012\u589e\u6808.\n\n\n**\u5206\u6790**:\n\n\u4e3a\u4ec0\u4e48\u662f\u5355\u8c03\u9012\u589e\u6808?\n\n\u6b64\u9898\u8981\u6c42\u7ef4\u62a4\u533a\u95f4\u6700\u5c0f\u503c.\n\n\n\u5f53\u904d\u5386\u5230\u540e\u9762\u7684\u5143\u7d20\u65f6,\u53d1\u73b0\u6b64\u65f6\u7684\u5143\u7d20\u6bd4\u4e4b\u524d\u7684\u6700\u5c0f\u503c\u8981\u5c0f.\u610f\u5473\u7740\u4e4b\u524d\u7684\u6700\u5c0f\u503c\u5df2\u7ecf\u5931\u6548.\u4e4b\u540e\u4e0d\u4f1a\u518d\u662f\u6700\u5c0f\u503c.\u6240\u4ee5\u53ef\u4ee5\u627e\u5230\u5b83\u7ba1\u8f96\u7684\u533a\u95f4(\u5373\u5728\u8fd9\u4e2a\u533a\u95f4\u4e2d,\u5b83\u662f\u6700\u5c0f\u503c)\u7684\u957f\u5ea6,\u8fdb\u800c\u7b97\u51fa\u533a\u95f4\u7684\u7f8e\u4e3d\u503c.\u8ba1\u7b97\u540e\u5f39\u51fa\u6808\n\n\n\u5f53\u904d\u5386\u5230\u540e\u9762\u7684\u5143\u7d20\u65f6,\u53d1\u73b0\u6b64\u65f6\u7684\u5143\u7d20\u6bd4\u4e4b\u524d\u7684\u6700\u5c0f\u503c\u8981\u5927.\u6545\u5b83\u4e0d\u53ef\u80fd\u6210\u4e3a\u8be5\u533a\u95f4\u7684\u6700\u5c0f\u503c.\u53ef\u4ee5\u4fdd\u7559\u4e0b\u6765.\u53ef\u80fd\u4ece\u5b83\u5f00\u59cb\u6709\u4e00\u6bb5\u533a\u95f4\u53d7\u5b83\u7ba1\u8f96.(\u7ba1\u8f96\u610f\u4e49\u540c\u4e0a).\u4f7f\u5b83\u8fdb\u6808.\n\n\n**\u6b65\u9aa4**:\n\n\n\u6b64\u9898\u5355\u8c03\u6808\u8981\u7528\u7ed3\u6784\u4f53\u4fdd\u5b58\u5b83\u7684\u503c\u548c\u4e0b\u6807.\u65b9\u4fbf\u8ba1\u7b97\u5b83\u7ba1\u8f96\u533a\u95f4\u7684\u957f\u5ea6.\u5f53\u4e4b\u540e\u6709\u5143\u7d20\u6bd4\u5b83\u5c0f\u65f6.\u5b83\u7ba1\u8f96\u7684\u533a\u95f4\u957f\u5ea6\u5373\u6b64\u65f6\u7684\u4e0b\u6807\u51cf\u53bb\u5b83\u4e4b\u524d\u7684\u4e00\u4e2a\u6700\u5c0f\u503c\u7684\u4e0b\u6807\u51cf1.(\u539f\u56e0:\u4e0d\u7b97\u8fd9\u4e2a\u4f4d\u7f6e\u548c\u524d\u4e00\u4e2a\u6700\u5c0f\u503c\u7684\u4f4d\u7f6e).\n\n\u6700\u540e\u8fd8\u8981\u904d\u5386\u6808.\u6b64\u65f6\u6bcf\u4e00\u4e2a\u5143\u7d20\u7684\u7ba1\u8f96\u533a\u95f4\u7684\u53f3\u7aef\u70b9\u5747\u4e3aN.\u6545\u533a\u95f4\u957f\u5ea6\u4e3aN\u51cf\u8be5\u5143\u7d20\u8fdb\u6808\u65f6\u7684\u4e0b\u6807.\n\n\n\u4ee3\u7801\u5982\u4e0b:\n\n```cpp\n#include<cstdio>\n#define maxn 2000005\nstruct node{\n    long long idx,val;\n    //dix\u4e3a\u4e0b\u6807,val\u4e3a\u503c \n}a[maxn],st[maxn];\n//st[]\u4e3a\u5355\u8c03\u9012\u589e\u6808 \n//\u5176\u5b9ea[]\u6ca1\u5fc5\u8981\u7528\u7ed3\u6784\u4f53 \nint N,top;\nlong long ans;\nlong long Max(long long x,long long y){return x>y?x:y;}\n//\u6b64\u9898\u4f3c\u4e4e\u8981\u5f00long long \nint main(){\n    scanf(\"%d\",&N);\n    for(int i=1;i<=N;++i){\n        scanf(\"%lld\",&a[i].val),a[i].idx=i;\n        if(!top)st[++top]=a[i];\n        else {\n            while(st[top].val>a[i].val){ans=Max(ans,st[top].val*(i-st[top-1].idx-1));top--;}//\u8ba1\u7b97\u5f39\u51fa\u53bb\u5143\u7d20\u7684\u7f8e\u4e3d\u503c\n            //i-st[top-1].idx-1\u662f\u8fd9\u4e2a\u5f39\u51fa\u5143\u7d20\u7ba1\u7406\u7684\u533a\u95f4 \n            //\u5fc5\u987b\u8ba1\u7b97\u5f39\u51fa\u5143\u7d20\u7684\u7f8e\u4e3d\u503c,\u56e0\u4e3a\u6709\u53ef\u80fd\u6210\u4e3a\u6700\u5927\u7684\u7f8e\u4e3d\u503c \n            st[++top]=a[i];//\u5165\u6808 \n        }\n    }\n    for(int i=1;i<=top;++i){\n        ans=Max(ans,(N-st[i-1].idx)*st[i].val);//\u904d\u5386\u6808  \n    }\n    printf(\"%lld\",ans);\n    return 0;\n}\n```",
        "postTime": 1510142683,
        "uid": 36075,
        "name": "karma",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "## \u5355\u8c03\u6808\n\n\u53ea\u662f\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u5355\u8c03\u6808\u9898\u76ee\u3002\u6211\u4eec\u6362\u4e00\u79cd\u601d\u8003\u65b9\u5f0f\uff0c\u6211\u4eec\u679a\u4e3e\u6bcf\u6bb5\u6570\u5217\u7684\u6700\u5c0f\u503c\uff0c\u7136\u540e\u6211\u4eec\u53d1\u73b0\u5f53ta\u6240\u80fd\u6210\u4e3a\u6700\u5c0f\u503c\u7684\u8303\u56f4\u8d8a\u5927\uff0c\u5bf9\u6700\u7ec8\u7684\u7b54\u6848\u7684\u8d21\u732e\u4e5f\u5c31\u8d8a\u5927\u3002\u6240\u4ee5\u6211\u4eec\u8003\u8651\u6c42\u51fata\u6240\u80fd\u6210\u4e3a\u6700\u5c0f\u503c\u7684\u6570\u5217\u7684\u8303\u56f4\u3002\n\n\u8fd9\u4e5f\u5c31\u8f6c\u5316\u4e3a\u4e86\u6c42\u51fa\u53f3\u8fb9\u7b2c\u4e00\u4e2a\u6bd4ta\u5c0f\u7684\u503c\u7684\u4f4d\u7f6e\u548c\u5de6\u8fb9\u7b2c\u4e00\u4e2a\u6bd4ta\u5c0f\u7684\u503c\u7684\u4f4d\u7f6e\u7684\u95ee\u9898\u3002\u8fd9\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u6765\u89e3\u51b3\uff0c\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a\u5355\u8c03\u9012\u589e\u7684\u6808\uff0c\u6bcf\u6b21\u6808\u9876\u7684\u5143\u7d20\u88ab\u5f39\u51fa\u7684\u503c\u7684\u4f4d\u7f6e\u5c31\u662f\u6211\u4eec\u6240\u6c42\u7684\u88ab\u5f39\u7684\u5143\u7d20\u7684\u53f3\u8fb9\u7b2c\u4e00\u4e2a\u6bd4ta\u5c0f\u7684\u503c\u7684\u4f4d\u7f6e\u3002\u5f53\u524d\u5143\u7d20\u4e0d\u5728\u5f39\u51fa\u6808\u9876\u5143\u7d20\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u6c42\u51fa\u4e86\u5f53\u524d\u7684\u5143\u7d20\u7684\u5de6\u8fb9\u7b2c\u4e00\u4e2a\u6bd4ta\u5c0f\u7684\u503c\u7684\u4f4d\u7f6e\u3002\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u6570\u503c\u4ec5\u4ec5\u8fdb\u4e86\u4e00\u6b21\u6808\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(n)$.\n\n\u53e6\u5916\u8fd8\u6709\u4e00\u4e2a[\u7c7b\u4f3c\u7684\u9898\u76ee](https://www.luogu.org/problem/AT2060)\uff0c\u60f3\u8981\u7ec3\u4e60\u5355\u8c03\u6808\u7684\u7ae5\u978b\u53ef\u4ee5\u5199\u4e00\u5199\u3002\n\n\u6700\u540e\u732e\u4e0a\u6211~~\u4e11\u964b~~\u7684\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#define LL long long\nusing namespace std;\nint n,top;\nLL ans;\nconst int N=2000010;\nint a[N],l[N],r[N],zhan[N];\ninline int read()\n{\n    int x=0,y=1;char ch=getchar();\n    while(ch>'9'||ch<'0'){if(ch=='-')y=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){x=(x<<3)+(x<<1)+(ch^48);ch=getchar();}\n    return x*y;\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;++i)a[i]=read();\n\tfor(int i=1;i<=n;++i)l[i]=0,r[i]=n+1;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\twhile(top&&a[zhan[top]]>=a[i])r[zhan[top--]]=i;\n\t\tl[i]=zhan[top];\n\t\tzhan[++top]=i;\n\t}\n\tfor(int i=1;i<=n;++i)ans=max(ans,(LL)(r[i]-l[i]-1)*a[i]);\n\tcout<<ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1569402485,
        "uid": 153843,
        "name": "wljss",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "/\\* luogu 2659\n\n\u6211\u7684\u5929\u554a\uff0c\u7b2c\u4e8c\u4e2a\u6d4b\u8bd5\u70b9964ms\u5361\u8fc7\u3002\u3002\u3002\uff08\u518d\u4ea4\u4e00\u6b21\u5c31\u4e0d\u4e00\u5b9a\u8fc7\u4e86\u3002\u3002\u300290\uff09\n\n\u7136\u540e\u5199\u4e00\u4e0b\u601d\u8def\u5427\uff1a\n\n\u7528\u7ebf\u6bb5\u6811logn\u627e\u51fa\u6700\u5c0f\u503c\uff0c\u4ee5\u53ca\u6700\u5c0f\u503c\u7684\u4f4d\u7f6e\uff0c\n\n\u5305\u542b\u6700\u5c0f\u503c\u7684\u6240\u6709\u533a\u95f4\u7684\u6700\u5927\u503c\uff0c\u5e94\u8be5\u662f\u533a\u95f4\u957f\u5ea6\u6700\u957f\u7684\u3002\n\n\u5f53\u524d\u533a\u95f4[l,r]\uff0c\u6700\u5c0f\u503cmn,\u5b83\u7684\u4f4d\u7f6epos,\n\n\u5305\u542b\u6700\u5c0f\u503c\uff1a[l,r]\u7684\u7b54\u6848\u5c31\u662fmn\\*(r-l+1)\n\n\u4e0d\u5305\u542b\u6700\u5c0f\u503c\uff1a\u5c06[l,r]\u5206\u6210\u4e24\u6bb5\uff0c[l,pos-1],[pos+1,r]\u5728\u8fd9\u4e24\u4e2a\u533a\u95f4\u9012\u5f52\uff0c\u50cf\u4e0a\u9762\u8fd9\u6837\u505a\u3002\n\n\u8be6\u89c1\u4ee3\u7801\n\n\n\\*/\n\n\n\n\n    \n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n#define lson l,m,rt<<1\n#define rson m+1,r,rt<<1|1\n#define INF 0x7fffffff\n#define MAXN 2000100\n#define LL long long\nstruct MN {\n    int mn,pos;\n}t[MAXN<<2];\nLL ans = 0;\nint n;\ninline int read() {\n    int x = 0,f = 1;char ch = getchar();\n    for (; ch<'0'||ch>'9'; ch = getchar())\n        if (ch=='-') f = -1;\n    for (; ch>='0'&&ch<='9'; ch = getchar())\n        x = x*10+ch-'0';\n    return x*f;\n}\ninline void pushup(int rt) {\n    if (t[rt<<1].mn < t[rt<<1|1].mn) t[rt].mn = t[rt<<1].mn, t[rt].pos = t[rt<<1].pos;\n    else t[rt].mn = t[rt<<1|1].mn, t[rt].pos = t[rt<<1|1].pos;\n}\nvoid build(int l,int r,int rt) {\n    if (l==r) {\n        t[rt].mn = read();\n        t[rt].pos = l;\n        return;\n    }\n    int m = (l+r)>>1;\n    build(lson);\n    build(rson);\n    pushup(rt);\n}\nMN query(int l,int r,int rt,int L,int R) {\n    if (L<=l && r<=R) {\n        return t[rt];\n    }\n    int m = (l+r)>>1;\n    MN t,ret;\n    ret.mn = INF;\n    if (L<=m) ret = query(lson,L,R);\n    if (R>m)  {\n        t = query(rson,L,R);\n        if (t.mn < ret.mn) ret = t;\n    } \n    return ret;\n}\nvoid solve(int l,int r) {\n    MN m = query(1,n,1,l,r);\n    ans = max(ans,1ll*(r-l+1)*m.mn);\n    if (l<m.pos) solve(l,m.pos-1);\n    if (m.pos<r) solve(m.pos+1,r);\n}\nint main() {\n    n = read();\n    build(1,n,1);\n    solve(1,n);\n    printf(\"%lld\",ans);    \n    return 0;\n}\n\n```",
        "postTime": 1508066281,
        "uid": 39828,
        "name": "amstar",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "## [P2659 \u7f8e\u4e3d\u7684\u5e8f\u5217](https://www.luogu.com.cn/problem/P2659)\n\n## \u9898\u76ee\u5927\u610f\uff1a\n\n\u7ed9\u51fa\u4e00\u4e2a\u5e8f\u5217\uff0c\u627e\u51fa\u4e00\u4e2a\u5b50\u533a\u95f4\uff0c\u4f7f\u8be5\u533a\u95f4\u7684\u6700\u5c0f\u503c\u4e0e\u533a\u95f4\u957f\u5ea6\u4e58\u79ef\u6700\u5927\u3002\n\n## solution:\n\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u6700\u5c0f\u503c\uff1a\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6570\u5217\u4e2d\u7684\u6570\u5b57 $a_i$ \uff0c\u627e\u5230\u5f53\u5b83\u4f5c\u4e3a\u6570\u5217\u6700\u5c0f\u503c\u65f6\u6700\u957f\u7684\u5e8f\u5217\uff0c\u5206\u522b\u7528\u6570\u7ec4 $zuo[i]$ \u4e0e $you[i]$ \u4fdd\u5b58\u8fd9\u65f6 \u7684\u5de6\u53f3\u7aef\u70b9\u3002\n\n\u4ee5\u4e0a\u64cd\u4f5c\u6211\u4eec\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u5b9e\u73b0\uff0c\u6b63\u5e8f\u627e\u7b2c\u4e00\u4e2a\u6bd4 $a[ $ $ i $ $ ]$ \u5c0f\u7684\u4f4d\u7f6e $-1$ \u540e\u5c31\u662f\u53f3\u7aef\u70b9\uff0c\u6808\u91cc\u8fd8\u6709\u627e\u4e0d\u5230\u6bd4\u5b83\u5c0f\u7684\u6570\uff0c\u628a $you[$ $i$ $ ] $ \u8d4b\u6210 $n$ ,\u5012\u5e8f $+1$ \u540e\u5c31\u662f\u5de6\u7aef\u70b9,\u5269\u4f59 $zuo[ $ $ i $ $ ]$ \u8d4b\u6210 $1$ \u3002\n\u6700\u540e $\\max \\limits_{i=1}^{n} (you[i]-zuo[i]+1)\\times a[i]$ \u3002\n\n## \u63a5\u4e0b\u6765\u662f\u7ec6\u8282\u7684\u5904\u7406\uff1a\n\u4e58\u79ef\u53ef\u80fd\u5927\u4e8e $\\text{int}$ \u7684\u8303\u56f4\uff0c\u8981\u5f00 $\\text{long long }$ \u3002\n\n\u770b\u5230\u8fd9\u7684\u540c\u5b66\uff0c\u53ef\u4ee5\u81ea\u5df1\u53bb\u5199\u4ee3\u7801\u4e86(~~tf\u53e3\u543b~~)\n\n[code](https://www.luogu.com.cn/paste/354q5rqe)\n### End\n## \u4f5c\u8005\u7684\u788e\u788e\u5ff5\uff1a\n\n\u6709\u7528\u7559\u8d5e(~~\u8a00\u7b80\u610f\u8d45~~)",
        "postTime": 1613889583,
        "uid": 297501,
        "name": "Th1nkS2",
        "ccfLevel": 4,
        "title": "P2659 \u7f8e\u4e3d\u7684\u5e8f\u5217 \u9898\u89e3"
    },
    {
        "content": "\u6765\u4e00\u4e2a\u7ebf\u6bb5\u6811\u9898\u89e3\n\n$O(n^2log_n)$ \u66b4\u529b\u601d\u8def\uff1a\n\n$n^2$ \u679a\u4e3e\u5de6\u53f3\u7aef\u70b9\uff0c $log_2n$ \u67e5\u8be2\u6700\u5c0f\u503c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2log_2n)$ \uff0c\u53ea\u80fd\u5f9720\u5206\u3002\n\n$O(nlog_2n)$ \u201c\u6b63\u89e3\u201d\u601d\u8def\uff1a\n\n\u5148\u627e\u5230\u533a\u95f4 $[1,n]$ \u7684\u6700\u5c0f\u503c $a_i$\uff0c\u7b97\u51fa\u4ee5 $a_i$ \u4e3a\u6700\u5c0f\u503c\u65f6\u7684\u7f8e\u4e3d\u5ea6\u3002\u7136\u540e\u4ee5 $i$ \u4e3a\u4e2d\u5fc3\uff0c\u627e\u5230\u533a\u95f4 $[1,i-1]$ \u548c \u533a\u95f4 $[i+1,n]$ \u7684\u6700\u5c0f\u503c $a_j$ \u548c $a_k$ \uff0c\u8ba1\u7b97\u5b83\u4eec\u7684\u7f8e\u4e3d\u5ea6\uff0c\u7136\u540e\u5206\u522b\u4ee5 $j$ \u548c $k$ \u4e3a\u4e2d\u70b9\u9012\u5f52\u5de6\u53f3\u533a\u95f4\u3002\n\n\u7531\u4e8e\u6bcf\u4e2a\u6570\u90fd\u4f1a\u88ab\u5f53\u4f5c\u4e2d\u70b9\u8ba1\u7b97\u4e00\u6b21\u7f8e\u4e3d\u5ea6\uff08\u67e5\u8be2\u6700\u5c0f\u503c\uff09\uff0c\u6bcf\u6b21\u8ba1\u7b97\uff08\u67e5\u8be2\uff09\u7684\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\u662f $log_2$ \u7684\uff0c\u800c\u6709 $n$ \u4e2a\u70b9\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u662f $(nlog_2n)$ \u3002\n\n\u6ce8\u610f\u8981\u5f00 $long\\;long$ \u3002\n\n$code$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nstruct tree{\n\tint l,r,min,sp;\n}s[8000001];\nll n,ans;\nint read()\n{\n\tint s=0,f=1;char c=getchar();\n\tfor(;!isdigit(c);c=getchar())\n\t\tif(c=='-')f=-1;\n\tfor(;isdigit(c);c=getchar())\n\t\ts=s*10+c-'0';\n\treturn s*f;\n}\nvoid build(int l,int r,int p)\n{\n\ts[p].l=l,s[p].r=r;\n\tif(l==r)\n\t{\n\t\ts[p].min=read();\n\t\ts[p].sp=l;\n\t\treturn;\n\t}\n\tint mid=(l+r)/2;\n\tbuild(l,mid,p*2);\n\tbuild(mid+1,r,p*2+1);\n\tif(s[p*2].min<s[p*2+1].min)\n\t\ts[p].min=s[p*2].min,s[p].sp=s[p*2].sp;\n\telse s[p].min=s[p*2+1].min,s[p].sp=s[p*2+1].sp;\n}\ntree find_min(int l,int r,int p)\n{\n\tif(l>s[p].r||r<s[p].l)return s[0];\n    if(s[p].l>=l&&s[p].r<=r)\n        return s[p];\n    tree a=find_min(l,r,p*2);\n\ttree b=find_min(l,r,p*2+1);\n    if(a.min>b.min)a=b;\n    return a;\n}\nvoid find_max(int l,int r)\n{\n\ttree x=find_min(l,r,1);\n\tans=max(ans,1ll*(r-l+1)*x.min);\n    if(l<x.sp)find_max(l,x.sp-1);\n    if(x.sp<r)find_max(x.sp+1,r);\n}\nint main()\n{\n\ts[0].min=1e9;\n\tn=read();\n\tbuild(1,n,1);\n\tfind_max(1,n);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1612419212,
        "uid": 306049,
        "name": "Utilokasteinn",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "## P2659 \u7f8e\u4e3d\u7684\u5e8f\u5217\n\n`tag` \u7b1b\u5361\u5c14\u6811\n\n### \u9898\u610f\n\n\u627e\u51fa\u4e00\u4e2a\u5e8f\u5217\u7684\u6240\u6709\u5b50\u6bb5\u4e2d\u5b50\u6bb5\u957f\u5ea6\u4e58\u6bb5\u5185\u5143\u7d20\u6700\u5c0f\u503c\u7684\u6700\u5927\u503c\u3002\n\n### \u601d\u8def\n\n\u6211\u4eec\u9700\u8981\u627e\u51fa\u6240\u6709**\u5b50\u6bb5**\u4e2d\u8d21\u732e\u6700\u5927\u7684\uff0c\u5e76\u4e14\u4e00\u4e2a\u5b50\u6bb5\u7684\u8d21\u732e\u4e3a**\u5176\u957f\u5ea6\u4e58\u533a\u95f4\u6700\u5c0f\u503c**\u3002\n\n\u8fd9\u2026\u2026\u4e0d\u5c31\u662f\u88f8\u7684\u7b1b\u5361\u5c14\u6811\u5417\uff1f\n\n\u5efa\u51fa\u7b26\u5408\u5c0f\u6839\u5806\u6027\u8d28\u7684\u7b1b\u5361\u5c14\u6811\uff0c\u9012\u5f52\u6240\u6709\u70b9\uff0c\u66f4\u65b0\u7b54\u6848\u5373\u53ef\u3002\n\n\u56e0\u4e3a\u8fd9\u662f\u4e00\u9053\u88f8\u9898\uff0c\u6240\u4ee5\u6211\u8bb0\u5f55\u4e00\u4e0b\u5efa\u7b1b\u5361\u5c14\u6811\u7684\u6a21\u677f\u3002\uff08\u4ece OI wiki \u4e0a\u6263\u7684\uff09\n\n\u601d\u8def\u662f\u7528\u4e00\u4e2a\u5355\u8c03\u6808\u7ef4\u62a4\u4e00\u4e0b\u53f3\u94fe\u3002\n\n\u4f2a\u4ee3\u7801\uff1a\n\n```pascal\n\u65b0\u5efa\u4e00\u4e2a\u5927\u5c0f\u4e3a n \u7684\u7a7a\u6808\u3002\u7528 top \u6765\u6807\u64cd\u4f5c\u524d\u7684\u6808\u9876\uff0ck \u6765\u6807\u8bb0\u5f53\u524d\u6808\u9876\u3002\nFor i := 1 to n\n    k := top\n    While \u6808\u975e\u7a7a \u4e14 \u6808\u9876\u5143\u7d20 > \u5f53\u524d\u5143\u7d20 \n        k--\n    if \u6808\u975e\u7a7a\n        \u6808\u9876\u5143\u7d20.\u53f3\u513f\u5b50 := \u5f53\u524d\u5143\u7d20\n    if k < top\n        \u5f53\u524d\u5143\u7d20.\u5de6\u513f\u5b50 := \u4e4b\u524d\u6808\u9876\u5143\u7d20\n    \u5f53\u524d\u5143\u7d20\u5165\u6808\n    top := k\n```\n\nC++:\n\n```cpp\nfor(int k,i=1;i<=n;i++){\n    k=top;\n    while(k and a[st[k]]>a[i])k--;\n    if(k) rs[st[k]]=i,isrt[i]=1;\n    if(k<top) ls[i]=st[k+1],isrt[st[k+1]]=1;\n    st[++k]=i;\n    top=k;\n}\n```\n\n### \u672c\u9898\u5b9e\u73b0\n\n\u672c\u9898\u9700\u8981\u627e\u51fa\u6bcf\u4e2a\u5b50\u6bb5\u6700\u5c0f\u503c\u4e58\u5b50\u6bb5\u957f\u5ea6\u3002\u6211\u4eec\u5148\u5efa\u51fa\u7b1b\u5361\u5c14\u6811\uff0c\u7136\u540e\u627e\u5230\u7b1b\u5361\u5c14\u6811\u7684\u6839\uff0c\u5c06\u533a\u95f4\u521d\u59cb\u5316\u4e3a 1-n\uff0c\u7136\u540e\u5411\u4e0b dfs\u3002\u6bcf\u6b21\u4f7f\u7528\u8be5\u70b9\u5750\u6807\u5c06\u533a\u95f4\u8fdb\u884c\u5212\u5206\u3002\u4e5f\u5c31\u662f\uff1a\n\n```cpp\nif(ls[x])dfs(ls[x],l,x-1);\nif(rs[x])dfs(rs[x],x+1,r);\n```\n\u7136\u540e\u66f4\u65b0\u7b54\u6848\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cctype>\n#include<cstring>\n#include<cmath>\nusing namespace std;\ninline int read(){\n\tint w=0,x=0;char c=getchar();\n\twhile(!isdigit(c))w|=c=='-',c=getchar();\n\twhile(isdigit(c))x=x*10+(c^48),c=getchar();\n\treturn w?-x:x;\n}\nnamespace star\n{\n\tconst int maxn=2e6+10;\n\tint n,a[maxn],ls[maxn],rs[maxn],st[maxn],top;\n\tlong long ans;\n\tbool isrt[maxn];\n\tvoid dfs(int x,int l,int r){\n\t\tans=max(ans,1ll*a[x]*(r-l+1));\n\t\tif(ls[x])dfs(ls[x],l,x-1);\n\t\tif(rs[x])dfs(rs[x],x+1,r);\n\t}\n\tinline void work(){\n\t\tn=read();\n\t\tfor(int i=1;i<=n;i++) a[i]=read();\n\t\tfor(int k,i=1;i<=n;i++){\n\t\t\tk=top;\n\t\t\twhile(k and a[st[k]]>a[i])k--;\n\t\t\tif(k) rs[st[k]]=i,isrt[i]=1;\n\t\t\tif(k<top) ls[i]=st[k+1],isrt[st[k+1]]=1;\n\t\t\tst[++k]=i;\n\t\t\ttop=k;\n\t\t}\n\t\tint root=0;\n\t\tfor(int i=1;i<=n;i++) if(!isrt[i]) root=i;\n\t\tdfs(root,1,n);\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n}\nsigned main(){\n\tstar::work();\n\treturn 0;\n}\n```\n\n### \u5176\u4ed6\n\n~~\u4e3a\u4ec0\u4e48\u4f60\u8c37\u8fde\u5e26 log \u7684\u505a\u6cd5\u90fd\u6709\u5c31\u662f\u6ca1\u4eba\u5199\u7b1b\u5361\u5c14\u6811\u5440QAQ~~\n\n\u7b1b\u5361\u5c14\u6811\u5b83\u591a\u53ef\u7231\u5440~",
        "postTime": 1605600576,
        "uid": 280015,
        "name": "Star_Cried",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "\u770b\u5230\u9898\u89e3\u533a\u57fa\u672c\u5168\u662f\u5355\u8c03\u6808\uff0c\u6211\u6765\u4e00\u4e2a\u4e0d\u540c\u7684\u601d\u8def\u2014\u2014\u7528\u5e76\u67e5\u96c6\u6765\u8d2a\u5fc3\u3002\r\n\r\n\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u7ecf\u5178\u7684 trick\uff0c\u5e38\u7528\u6765\u6279\u91cf\u5904\u7406\u4e00\u6761\u94fe/\u4e00\u68f5\u6811\u4e0a\u8def\u5f84\u7684\u6700\u5927\u6216\u6700\u5c0f\u503c\u95ee\u9898\uff0c\u5927\u81f4\u7684\u601d\u8def\u662f\u6309\u987a\u5e8f\u679a\u4e3e\u6bcf\u4e00\u6761\u8fb9\uff0c\u5e76\u67e5\u96c6\u7ef4\u62a4\u8fde\u901a\u5757\u6765\u7b97\u8d21\u732e\u3002\r\n\r\n\u5177\u4f53\u5230\u672c\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6570\u5217\u62bd\u8c61\u6210\u4e00\u6761 $n+1$ \u70b9 $n$ \u8fb9\u7684\u94fe\uff0c$i$ \u4e0e $i+1$ \u4e4b\u95f4\u7684\u8fb9\u6743\u4e3a $a_i$\u3002\u540c\u65f6\u521d\u59cb\u5316\u4e00\u4e2a\u6709 $n+1$ \u4e2a\u70b9\u7684\u5e76\u67e5\u96c6\uff0c\u9700\u8981\u8bb0\u5f55\u6bcf\u4e2a\u96c6\u5408\u7684\u5927\u5c0f\u3002\r\n\r\n\u8003\u8651\u4e00\u6761\u8fb9\u505a\u51fa\u8d21\u732e\u7684\u6761\u4ef6\u662f\u4ec0\u4e48\uff0c\u5c31\u662f\u8fd9\u6761\u8fb9\u662f\u8def\u5f84\u4e0a\u8fb9\u6743\u6700\u5c0f\u7684\u3002\u56e0\u6b64\u6211\u4eec\u5c06\u6240\u6709\u8fb9\u6309\u8fb9\u6743\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u7136\u540e\u6309\u987a\u5e8f\u679a\u4e3e\u6bcf\u4e00\u6761\u8fb9\uff0c\u6839\u636e\u5b83\u8fde\u63a5\u7684\u4e24\u4e2a\u8fde\u901a\u5757\u7684\u5927\u5c0f\u548c\u5b83\u7684\u8fb9\u6743\u8ba1\u7b97\u8d21\u732e\uff0c\u4e4b\u540e\u628a\u8fd9\u6761\u8fb9\u52a0\u5230\u56fe\u4e2d\uff08\u4e5f\u5c31\u662f\u5408\u5e76\u5b83\u8fde\u63a5\u7684\u4e24\u4e2a\u8fde\u901a\u5757\uff09\u3002\r\n\r\n\u7531\u4e8e\u6211\u4eec\u6309\u8fb9\u6743\u964d\u5e8f\u679a\u4e3e\uff0c\u663e\u7136\u5728\u52a0\u5165\u4e00\u6761\u8fb9\u65f6\uff0c\u8fc7\u8fd9\u6761\u8fb9\u7684\u6bcf\u6761\u8def\u5f84\u7684\u6700\u5c0f\u8fb9\u6743\u90fd\u7531\u8fd9\u6761\u8fb9\u8d21\u732e\u3002\r\n\r\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal{O}(n\\log n)$\uff0c\u5f00 O2 \u53ef\u8fc7\u3002\r\n\r\n```cpp\r\n//By: Luogu@rui_er(122461)\r\n#include <bits/stdc++.h>\r\n#define rep(x,y,z) for(int x=y;x<=z;x++)\r\n#define per(x,y,z) for(int x=y;x>=z;x--)\r\n#define debug printf(\"Running %s on line %d...\\n\",__FUNCTION__,__LINE__)\r\n#define fileIO(s) do{freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout);}while(false)\r\nusing namespace std;\r\ntypedef long long ll;\r\nconst int N = 2e6+5;\r\n\r\nint n, a[N];\r\nvector<tuple<int, int, int> > e;\r\ntemplate<typename T> void chkmin(T& x, T y) {if(x > y) x = y;}\r\ntemplate<typename T> void chkmax(T& x, T y) {if(x < y) x = y;}\r\nstruct Dsu {\r\n\tint fa[N], sz[N];\r\n\tvoid init(int x) {rep(i, 1, x) fa[i] = i, sz[i] = 1;}\r\n\tint find(int x) {return x == fa[x] ? x : fa[x] = find(fa[x]);}\r\n\tbool merge(int x, int y) {\r\n\t\tint u = find(x), v = find(y);\r\n\t\tif(u == v) return 0;\r\n\t\tif(sz[u] < sz[v]) swap(u, v);\r\n\t\tfa[v] = u;\r\n\t\tsz[u] += sz[v];\r\n\t\tsz[v] = 0;\r\n\t\treturn 1;\r\n\t}\r\n}dsu;\r\n\r\nint main() {\r\n\tscanf(\"%d\", &n);\r\n\trep(i, 1, n) scanf(\"%d\", &a[i]);\r\n\trep(i, 1, n) e.push_back(make_tuple(i, i+1, a[i]));\r\n\tdsu.init(n+1);\r\n\tsort(e.begin(), e.end(), [](const auto& a, const auto& b) {\r\n\t\treturn get<2>(a) > get<2>(b);\r\n\t});\r\n\tll ans = 0;\r\n\tfor(auto i : e) {\r\n\t\tint u = get<0>(i), v = get<1>(i), w = get<2>(i);\r\n\t\tchkmax(ans, 1LL * (dsu.sz[dsu.find(u)] + dsu.sz[dsu.find(v)] - 1) * w);\r\n\t\tdsu.merge(u, v);\r\n\t}\r\n\tprintf(\"%lld\\n\", ans);\r\n\treturn 0;\r\n}\r\n```\r\n\r\n\u8fd9\u4e2a trick \u8fd8\u662f\u5f88\u6709\u7528\u7684\uff0c\u6211\u9047\u5230\u8fc7\u597d\u591a\u6b21\uff0c\u611f\u5174\u8da3\u7684\u8bdd\u53ef\u4ee5\u505a\u4e00\u4e0b\u8fd9\u4e9b\u9898\uff1a\r\n\r\n- [AT2060 \\[AGC005B\\] Minimum Sum](/problem/AT2060) ([AtCoder](https://atcoder.jp/contests/agc005/tasks/agc005_b))\r\n- [\\[ABC214D\\] Sum of Maximum Weights](https://atcoder.jp/contests/abc214/tasks/abc214_d)",
        "postTime": 1648537569,
        "uid": 122461,
        "name": "rui_er",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2659\u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd\u6bd4\u8f83\u5c51\u7684 $\\mathcal O(n\\log n)$ \u89e3\u6cd5\u3002  \n\n\u5f53\u7136\u5e38\u6570\u5f88\u5c0f\u3002\u3002\u3002\u3002  \n \n\u9996\u5148\u8003\u8651\u5230\u5c06\u8fd9\u4e9b\u6570\u94a6\u5b9a\u4e3a\u6700\u5c0f\u503c\uff0c\u7136\u540e\u53bb\u627e\u533a\u95f4\uff0c\u6613\u8bc1\u7b54\u6848\u4e00\u5b9a\u6765\u81ea\u4e8e\u6ee1\u8db3\u6b64\u503c\u6700\u5c0f\u7684\u6700\u957f\u533a\u95f4\u3002  \n\n\u6211\u4eec\u4e8e\u662f\u53ef\u4ee5\u4ece\u6700\u5927\u503c\u5f00\u59cb\u679a\u4e3e\uff0c\u5224\u65ad\u4ed6\u7684\u4e24\u4fa7\u5df2\u7ecf\u6709\u591a\u5c11\u88ab\u679a\u4e3e\u8fc7\u4e86\uff08\u8fd9\u4e9b\u6570\u4e00\u5b9a\u6bd4\u4ed6\u5927\uff09\uff0c\u7136\u540e\u7b97\u5c31\u5b8c\u4e86\u3002  \n\n\u53ef\u662f\u5982\u4f55\u5224\u65ad\u5df2\u7ecf\u88ab\u679a\u4e3e\u7684\u6700\u5de6\uff0c\u6700\u53f3\u5728\u54ea\u91cc\u5462\u3002  \n\n\u6211\u4eec\u628a\u5df2\u88ab\u7528\u7684\u641e\u6210\u533a\u95f4\uff0c\u8bb0\u5f55\u4e00\u4e0b\u5de6\u53f3\u7aef\u70b9\uff0c\u7136\u540e\u4e0d\u65ad\u8ba1\u7b97\uff0c\u6269\u5c55\u5373\u53ef\u5f97\u5230\u7b54\u6848\u3002  \n\n\u5177\u4f53\u89c1\u4ee3\u7801\uff1a  \n\n```\n#include\"algorithm\"\n#include\"iostream\"\n#include\"cstdio\"\n#include\"cmath\"\nusing namespace std;\n\n#define read(x) scanf(\"%d\",&x)\n#define ll long long\n#define MAXN 2000005\n\nint n;\nint num[MAXN];\nint t[MAXN],l[MAXN],r[MAXN];\nstruct node\n{\n\tint val,id;\n}a[MAXN];\nint cnt=0;\nll ans=0;\n\nbool cmp(node n,node m){return n.val>m.val;}\n\nvoid hsh()\n{\n\tsort(a+1,a+n+1,cmp);\n\tfor(int i=1;i<=n;i++) num[++cnt]=a[i].id;\n\treturn;\n}\n\nint main()\n{\n\tread(n);\n\tfor(int i=1;i<=n;i++) read(a[i].val),t[i]=a[i].val,a[i].id=i;\n\thsh();\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint j=num[i],len=1;\n\t\tif(l[j-1]) len=len+(j-l[j-1]);\n\t\tif(r[j+1]) len=len+(r[j+1]-j);\n\t\tans=max(ans,(ll)len*(ll)t[j]);\n\t\tif(l[j-1]&&r[j+1])\n\t\t{\n\t\t\tint op=l[j-1],rt=r[j+1];\n\t\t\tl[j-1]=0,r[j+1]=0;\n\t\t\tr[op]=rt,l[rt]=op;\n\t\t}\n\t\telse if(l[j-1])\n\t\t{\n\t\t\tint t=l[j-1];\n\t\t\tl[j-1]=0,l[j]=t,r[t]=j;\n\t\t}\n\t\telse if(r[j+1])\n\t\t{\n\t\t\tint t=r[j+1];\n\t\t\tr[j+1]=0,r[j]=t,l[t]=j;\n\t\t}\n\t\telse l[j]=r[j]=j;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1604017420,
        "uid": 184500,
        "name": "hanzhongtlx",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2659"
    },
    {
        "content": "\u7528\u5355\u8c03\u6808\u505a\u7684\uff0c\u601d\u60f3\u7684\u8bdd\u5e94\u8be5\u548c\u4e0a\u9762\u4e24\u4f4d\u5927\u4f6c\u5dee\u4e0d\u591a\u5427\u2026\u2026\uff1f\u56e0\u4e3a\u662f\u849f\u84bb\u6240\u4ee5\u6709\u70b9\u8fa3\u9e21\uff0c\u8bf7\u591a\u591a\u5305\u6db5\u5566\n\n\u00b7\u00b7\u00b7cpp\n\n```cpp\n#include<cstdio>\n#include<iostream>\nusing namespace std;\nint  n,a;\nlong long maxx,top,sum,zhan[2000001],place[2000001];//\u662f\u7684\u540d\u5b57\u5c31\u662f\u8fd9\u4e48\u7c97\u66b4zhan\u5c31\u662f\u6808place\u5c31\u662f\u4f4d\u7f6e\nvoid read(int &x) {     //\u542c\u8bf4\u9898\u76ee\u8bf4\u8bfb\u5165\u8981\u4f18\u5316\n    x=0;\n    int f=1;\n    char ch=getchar();\n    while (ch<'0'||ch>'9') {\n        if (ch=='-') f=-1;\n        ch=getchar();\n    }\n    while (ch>='0'&&ch<='9') {\n        x=x*10+ch-'0';\n        ch=getchar();\n    }\n    x*=f;\n}\nint main()\n{\n    read(n);\n    for(int i=1;i<=n;i++)     //\u6570\u7ec4\u6a21\u62df\u5355\u8c03\u6808\n    {\n        read(a);\n        while(zhan[top]>a)     //\u5f39\u51fa\u5143\u7d20\u65f6\u987a\u8def\u8ba1\u7b97\u7f8e\u4e3d\u5ea6\n        {\n            sum=zhan[top]*(i-place[top-1]-1);//\u8ba1\u7b97\u7f8e\u4e3d\u5ea6\n            top--;//\u5f39\uff01\n            if(sum>maxx)maxx=sum;//\u548c\u524d\u9762\u7b97\u51fa\u7684\u6700\u5927\u503c\u6bd4\u8f83\n        }\n        zhan[++top]=a;place[top]=i;\n    } \n    while(top!=0)//\u5904\u7406\u6808\u5185\u672a\u5f39\u51fa\u7684\u5143\u7d20\n    {\n        sum=zhan[top]*(n-place[top-1]);\n        top--;\n        if(sum>maxx)maxx=sum;\n    }\n    printf(\"%lld\",maxx);\n}\n\u00b7\u00b7\u00b7\n```",
        "postTime": 1486286813,
        "uid": 8167,
        "name": "AtlasDelRey",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "## \u9898\u89e3\uff1a\n\n\n\u5982\u679c\u8981\u7528\u7ebf\u6bb5\u6811\uff0c\u9700\u8981\u679a\u4e3e\u6240\u6709\u533a\u95f4\u3002\n\n\u663e\u7136\u662f\u4e0d\u53ef\u7684\u3002\n\n\u90a3\u4e48\u6211\u4eec\u73b0\u5728\u8981\u6c42\u6700\u5927\u7f8e\u4e3d\u5ea6\u3002\u6211\u4eec\u601d\u8003\u526a\u53bb\u4e00\u4e9b\u65e0\u7528\u533a\u95f4\u3002\n\n\u4ec0\u4e48\u533a\u95f4\u65e0\u7528\u5462\uff1f\u8d2a\u5fc3\u5730\u601d\u8003\uff0c\u533a\u95f4\u957f\u5ea6\u80af\u5b9a\u662f\u8d8a\u5927\u8d8a\u597d\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u6765\u8bb2\uff0c\u5de6\u53f3\u540c\u65f6\u62d3\u5c55\u8fd9\u4e2a\u533a\u95f4\uff0c\u76f4\u5230\u627e\u5230\u5de6\u53f3\u7b2c\u4e00\u4e2a\u5c0f\u4e8e\u5b83\u7684\u5143\u7d20\uff0c\u8bb0\u4f5c$l,r$\uff0c\u90a3\u4e48\u533a\u95f4$(l,r)$\u4e00\u5b9a\u662f\u8fd9\u4e2a\u70b9\u80fd\u7ba1\u63a7\u5230\u7684\u6700\u5927\u7f8e\u4e3d\u503c\u3002\u56e0\u4e3a\u8fd9\u4e2a\u70b9\u5df2\u7ecf\u662f\u8fd9\u4e2a\u533a\u95f4\u4e2d\u6700\u5c0f\u7684\u5143\u7d20\u3002\n\n\u90a3\u4e48\u6240\u6709\u70b9\u90fd\u53ef\u4ee5\u4f9d\u6b64\u7ef4\u62a4\uff0c\u663e\u7136\u5730\uff0c\u7b54\u6848\u4e00\u5b9a\u4f1a\u5728\u8fd9\u4e9b\u503c\u4e2d\u4ea7\u751f\u3002\u7406\u7531\u662f\u6bcf\u4e2a\u70b9\u90fd\u5df2\u7ecf\u8fd9\u6837\u62d3\u5c55\u8fc7\u4e86\uff0c\u800c\u6bcf\u4e2a\u70b9\u90fd\u662f\u6700\u4f18\u7684\u3002\n\n\u81f3\u4e8e\u5de6\u53f3\u7b2c\u4e00\u4e2a\u5c0f\u4e8e\u5b83\u7684\u5143\u7d20\uff0c\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u6765\u7ef4\u62a4\uff0c\u6b63\u53cd\u5404\u8dd1\u4e00\u6b21\uff0c\u7136\u540e\u5c31\u662f\u7ec6\u8282\u7684\u66f4\u65b0\u4e86\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define int long long\nusing namespace std;\nconst int maxn=2e6+3;\nint n,ans;\nint a[maxn];\nint s[maxn],top;\nint l[maxn],r[maxn];\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%lld\",&a[i]);\n\ta[0]=a[n+1]=-1;\n\tfor(int i=1;i<=n+1;i++)\n\t{\n\t\twhile(top && a[i]<a[s[top]])\n\t\t{\n\t\t\tr[s[top]]=i;\n\t\t\ttop--;\n\t\t}\n\t\ts[++top]=i;\n\t}\n\twhile(top)\n\t\ttop--;\n\tfor(int i=n;i>=0;i--)\n\t{\n\t\twhile(top && a[i]<a[s[top]])\n\t\t{\n\t\t\tl[s[top]]=i;\n\t\t\ttop--;\n\t\t}\n\t\ts[++top]=i;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint len=r[i]-1-l[i];\n\t\tint tmp=a[i]*len;\n\t\tans=max(ans,tmp);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1604457658,
        "uid": 175131,
        "name": "\u5085\u601d\u7ef4666",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "\u53d1\u73b0\u9898\u89e3\u533a\u90fd\u6ca1\u6709\u5199\u90e8\u5206\u5206\u7684\uff0c\u4f46\u8003\u573a\u4e0a\u90e8\u5206\u5206\u5f88\u91cd\u8981\uff0c\u6240\u4ee5\u53d1\u4e00\u7bc7\u9898\u89e3\u6765\u603b\u7ed3\u4e00\u4e0b\u3002\n\n### \u9898\u610f\n\n\u627e\u5230\u4e00\u6bb5\u533a\u95f4\uff0c\u4f7f\u5f97\u533a\u95f4\u7684\u6700\u5c0f\u503c\u4e58\u4e0a\u533a\u95f4\u7684\u957f\u5ea6\u7684\u503c\u6700\u5927\u3002\n\n### \u6b65\u9aa4\n\n\u6211\u4eec\u6765\u4e00\u6b65\u6b65\u5206\u6790\u90e8\u5206\u5206\u3002\n\n$Subtask1$ $20pts$: \n\n\u8003\u8651\u7528\u5faa\u73af\u679a\u4e3e\u533a\u95f4\uff0c\u540c\u65f6\u7528\u7ebf\u6bb5\u6811\u4f18\u5316\u5bfb\u627e\u533a\u95f4\u6700\u5c0f\u503c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(N^2logN)$\u3002\n\n$Subtask2$ $60pts$: \n\n\u89c2\u5bdf\u6570\u636e\u8303\u56f4\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u90e8\u5206\u5206\u5e94\u8be5\u662f\u5e26\u6709 $logN$ \u7684\u505a\u6cd5\u3002\u8003\u8651\u5982\u4e0b\u6027\u8d28\uff1a\n\n1. \u5bf9\u4e8e\u4e00\u4e2a\u6700\u5c0f\u503c\uff0c\u6211\u4eec\u8981\u60f3\u4f7f\u5f97\u7b54\u6848\u6700\u5927\uff0c\u80af\u5b9a\u662f\u8981\u6c42\u8be5\u6700\u5c0f\u503c\u751f\u6548\u7684\u533a\u95f4\u6700\u957f\u3002\n\n1. \u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4\uff0c\u5982\u679c\u6211\u4eec\u5220\u6389\u5176\u6700\u5c0f\u503c\uff0c\u7136\u540e\u7f29\u77ed\u5176\u533a\u95f4\u957f\u5ea6\uff0c\u7b54\u6848**\u53ef\u80fd**\u53d8\u5927\u3002\n\n\u4ece\u4ee5\u4e0a\u4e24\u6761\u6027\u8d28\uff0c\u6211\u4eec\u8003\u8651\u9012\u5f52\u6c42\u89e3\u3002\u4ece\u533a\u95f4 $[1,n]$ \u5f00\u59cb\uff0c\u6211\u4eec\u6bcf\u6b21\u7528\u7ebf\u6bb5\u6811\u67e5\u8be2\u5f53\u524d\u533a\u95f4\u7684\u6700\u5c0f\u503c\uff0c\u5e76\u8ba1\u7b97\u7b54\u6848\u3002\n\u5982\u679c\u6700\u5c0f\u503c\u7684 $pos$ \u5904\u4e8e\u533a\u95f4\u4e2d\u95f4\uff0c\u8003\u8651\u5411\u4e24\u8fb9\u9012\u5f52\uff0c\u5c1d\u8bd5\u53bb\u6389\u6700\u5c0f\u503c\u3002\u5904\u4e8e\u533a\u95f4\u8fb9\u754c\u65f6\u7279\u5224\uff0c\u76f4\u63a5\u5de6\u79fb\u4e00\u4f4d\u6216\u8005\u53f3\u79fb\u4e00\u4f4d\u5373\u53ef\u3002\n\n\u5c0f $trick$: \u7ebf\u6bb5\u6811\u67e5\u8be2\u65f6\u53ef\u4ee5\u5229\u7528\u7ed3\u6784\u4f53\u540c\u65f6\u67e5\u8be2\u6700\u5c0f\u503c\u548c $pos$\uff0c\u540c\u65f6\u91cd\u8f7d\u8fd0\u7b97\u7b26\u6765\u7f29\u77ed $pushup$ \u51fd\u6570\u7684\u957f\u5ea6\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u9898\u89e3\u533a\u7684 $amstar$ \u5927\u4f6c\u597d\u50cf\u5df2\u7ecf\u5199\u4e86\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002\u65f6\u95f4\u590d\u6742\u5ea6~~\u5e94\u8be5~~\u662f $O(Nlog^2N)$\n\n$Subtask3$ $100pts$: \n\n\u8003\u8651\u5982\u4f55\u5c06\u7b97\u6cd5\u4f18\u5316\u81f3 $O(N)$ \u7684\u3002\u4e0a\u9762\u7684\u4e24\u4e2a\u7b97\u6cd5\u6709\u4e00\u4e9b\u4e0d\u8db3\u4e4b\u5904\uff1a\n\n1. \u679a\u4e3e\u533a\u95f4\n\n1. \u6bcf\u6b21\u90fd\u8981 $O(logN)$ \u7684\u65f6\u95f4\u6765\u67e5\u8be2\u6700\u5c0f\u503c\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u6761\uff0c\u6211\u4eec\u4e0d\u59a8\u5148\u5047\u8bbe\u5f53\u524d\u7684\u503c\u4f5c\u4e3a\u6700\u5c0f\u503c\uff0c\u8fd9\u662f $O(N)$ \u7684\u3002\u7136\u540e\uff0c\u8003\u8651\u4ec0\u4e48\u6837\u7684\u60c5\u51b5\u4e0b\u8fd9\u4e2a\u6570\u4f5c\u4e3a\u6700\u5c0f\u503c\u65f6\u7b54\u6848\u6700\u5927\u3002\n\n\u4ece\u4e0a\u6587\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u7b54\u6848\u7684\u533a\u95f4\u5e94\u8be5\u5c3d\u91cf\u957f\u3002\u7b54\u6848\u6700\u957f\u533a\u95f4\u7684\u7aef\u70b9\uff0c\u8d2a\u5fc3\u5730\u60f3\uff0c\u5c31\u662f\u5f53\u524d\u6700\u5c0f\u503c**\u66f4\u65b0\u6362\u4ee3**\u7684\u5730\u65b9\u3002\u5728\u54ea\u91cc\u66f4\u65b0\u6362\u4ee3\uff1f\u81ea\u7136\u5c31\u662f\u5206\u522b\u5411\u5de6\u548c\u5411\u53f3\u7b2c\u4e00\u4e2a\u6bd4\u5f53\u524d\u503c\u5c0f\u7684\u90a3\u91cc\u5566\uff01\n\n\u90a3\u4e48\u6211\u4eec\u7684\u6b63\u89e3\u4e5f\u5c31\u51fa\u6765\u4e86\uff1a\u627e\u5230\u6bcf\u4e2a\u6570\u7684\u5411\u5de6\u548c\u5411\u53f3\u7b2c\u4e00\u4e2a\u6bd4\u5b83\u5c0f\u7684\u4f4d\u7f6e\uff0c\u90a3\u4e48\u5c31\u6709\u5f53\u524d\u7b54\u6848\uff1a $a_i * (r_i - 1 - (l_i + 1) + 1)$\u3002\n\n\u5355\u8c03\u6808\u9884\u5904\u7406 + \u7ebf\u6027\u679a\u4e3e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(N)$\u3002\n\n\n\u9644 $100pts$ \u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 2000010\n#define ll long long\n\ntemplate <class T>\ninline void read(T& a){\n\tT x = 0, s = 1;\n\tchar c = getchar();\n\twhile(!isdigit(c)){ if(c == '-') s = -1; c = getchar(); }\n\twhile(isdigit(c)){ x = x * 10 + (c ^ '0'); c = getchar(); }\n\ta = x * s;\n\treturn ;\n}\n\nint stac[N], top = 0;\nint a[N]; \nint l[N], r[N]; \nint n;\n\nint main(){\n\tread(n);\n\tfor(int i = 1; i <= n; i++){\n\t\tread(a[i]);\n\t\tl[i] = 0, r[i] = n + 1;     // \u8bb0\u5f97\u8bbe\u7f6e\u8fb9\u754c \n\t}\n\tfor(int i = 1; i <= n; i++){  // \u5355\u8c03\u6808 \n\t\twhile(top && a[stac[top]] >= a[i]) r[stac[top--]] = i;  \n\t\tl[i] = stac[top];\n\t\tstac[++top] = i; \n\t}\n\tll ans = 0;       // \u4e0d\u5f00 long long \u89c1\u7956\u5b97 \n\tfor(int i = 1; i <= n; i++)\n\t\tans = max(ans, (ll)(r[i] - 1 - (l[i] + 1) + 1) * a[i]); \n\tcout << ans << endl; \n\treturn 0;\n}\n\n\n```\n",
        "postTime": 1604073592,
        "uid": 234224,
        "name": "\u9752\u9e1f_Blue_Bird",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "\u672c\u9898\u6709\u4e24\u4e2a\u65b0\u5b9a\u4e49\uff1a\u7f8e\u4e3d\u5ea6\u3001\u7f8e\u4e3d\u7cfb\u6570\n\n\u5176\u4e2d \u7f8e\u4e3d\u5ea6=\uff08\u5e8f\u5217\u957f\u5ea6*\u8fd9\u4e2a\u5e8f\u5217\u7684\u6700\u5c0f\u503c\uff09\uff1b\n\n\u5bf9\u6b64 \u6211\u4eec\u6700\u5148\u60f3\u5230\u7684\u662f\u679a\u4e3e\u4e00\u4e2a\u5e8f\u5217\uff0c\n\n\u7136\u540e\u627e\u51fa\u8fd9\u4e2a\u5e8f\u5217\u7684\u6700\u5c0f\u503c\u76f8\u4e58\uff0c\n\n\u4f46\u8fd9\u6837\u65f6\u6548\u663e\u7136\u662f\u8fc7\u4e0d\u53bb\u7684\uff0c\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u53cd\u8fc7\u6765\u601d\u8003\uff0c\u90a3\u5c31\u662f\u679a\u4e3e\u4e00\u4e2a\u6700\u5c0f\u503c\uff0c\u518d\u786e\u5b9a\u5e8f\u5217\u7684\u8303\u56f4\uff1b\n\n\u4e0a\u8ff0\u53ef\u77e5\uff0c\u6211\u4eec\u786e\u5b9a\u7684\u8fd9\u4e2a\u5e8f\u5217\u7684\u6700\u5c0f\u503c\u662f\u5df2\u5b9a\u7684\uff0c\u800c\u6211\u4eec\u53c8\u5e0c\u671b\u7f8e\u4e3d\u7cfb\u6570\u5c3d\u53ef\u80fd\u7684\u5927\uff0c\u90a3\u4e48\uff0c\n\n\u8fd9\u4e2a\u5e8f\u5217\u7684\u957f\u5ea6\u4e5f\u8981\u5c3d\u53ef\u80fd\u7684\u5927\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u8981\u77e5\u9053\u4ece\u8fd9\u4e2a\u6700\u5c0f\u7684\u70b9\u5411\u5de6\u53f3\u6700\u591a\u80fd\u6269\u5c55\u5230\u54ea\uff0c\n\n\u624d\u4f1a\u9047\u89c1\u6bd4\u81ea\u5df1\u5c0f\u7684\u6570\uff1b\n\n```cpp\nfor(int i=1;i<=n;i++){\n\t\twhile(til>0&&a[i]<=a[h[til]]) til--;\n\t\tf[0][i]=h[til];h[++til]=i;\n}\n```\n\n\n//\u5411\u5de6\u8fb9\u5bfb\u627e\u7b2c\u4e00\u4e2a\u6bd4\u81ea\u5df1\u5c0f\u7684\u6570\uff1b\u53ef\u4ee5\u4f7f\u7528\u5355\u8c03\u6808\u7684\u601d\u60f3;\u7528 f \u6570\u7ec4\u8bb0\u5f55\u5de6\u8fb9\u754c\n\n```\nfor(int i=n;i;i--){\n\t\twhile(til>0&&a[i]<=a[h[til]]) til--;\n\t\tf[1][i]=h[til];h[++til]=i;\n}\n```\n\n //\u518d\u4ecen\u52301\u53cd\u5237\u4e00\u8d9f\u786e\u5b9a\u53f3\u8fb9\u754c\uff1b   \n //\u7b2c\u4e8c\u6b21\u53cd\u5237\u65f6\u8981\u6ce8\u610f h[0]=n+1;\n \n \n```cpp\n #include<bits/stdc++.h>\nusing namespace std;\nint h[2000005],a[2000005],n,til,f[2][2000005];\nlong long ans;\nint read(){\n\tint ret=0;char ch=getchar();\n\twhile (ch<'0'||ch>'9') ch=getchar();\n\twhile (ch>='0'&&ch<='9')\n    ret=ret*10+ch-'0',ch=getchar();\n\treturn ret;\n}\nint main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++) a[i]=read();\n\tfor(int i=1;i<=n;i++){\n\t\twhile(til>0&&a[i]<=a[h[til]]) til--;\n\t\tf[0][i]=h[til];h[++til]=i;\n\t}\n\ttil=0;h[0]=n+1;\n\tfor(int i=n;i;i--){\n\t\twhile(til>0&&a[i]<=a[h[til]]) til--;\n\t\tf[1][i]=h[til];h[++til]=i;\n\t}\n\tfor(int i=1;i<=n;i++)\n\tif(ans<(long long)\n    a[i]*(f[1][i]-f[0][i]-1)) \n    ans=(long long)a[i]*(f[1][i]-f[0][i]-1);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1559394752,
        "uid": 156884,
        "name": "\u603a\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    },
    {
        "content": "##\u636e\u8bf4\u672c\u9898\u53ef\u4ee5\u7528 **\u52a8\u6001\u89c4\u5212** \u89e3\u51b3 \u7136\u800c\u849f\u84bb\u5e76\u4e0d\u4f1a\u7528dp\u89e3\u51b3 \u6240\u4ee5\u8fd8\u662f\u5f31\u5f31\u7684\u5199\u4e86\u4e00\u4e2a **\u5355\u8c03\u6808**\n\n\n\u5355\u8c03\u6808\u57fa\u672c\u5e94\u7528 **\u7b80\u5355**\u7684\u8bf4 \u53ef\u4ee5\u5728O(n)\u4e0b\u6c42\u51fa\u4e00\u4e2a\u5e8f\u5217\u4e2d\u6bcf\u4e2a\u5143\u7d20 \u5411\u53f3 \u6216 \u5411\u5de6 \u6bd4\u5b83 \u5c0f \u6216 \u5927 \u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\n\n\n\u57fa\u672c\u64cd\u4f5c\u81ea\u884c\u767e\u5ea6)\n\n\n\u90a3\u4e48\u6211\u4eec\u9700\u8981\u628a\u8fd9\u9053\u9898\u53d8\u5f62\u4e00\u4e0b  [Luogu] http://acm.hdu.edu.cn/showproblem.php?pid=1506\n\n\u4e24\u9898\u662f**\u5b8c\u5168\u4e00**\u6837\u7684\n\n\n\u628a\u8fd9\u9053\u9898\u5316\u6210\u94fe\u63a5\u91cc\u9762\u7684\u6837\u5b50\n\n**\u5206\u522b**\u6c42\u51fa\u6bcf\u4e2a\u5143\u7d20\u5411\u5de6\u548c\u5411\u53f3\u6269\u5c55\u7684\u6700\u5927\u957f\u5ea6\n\n\n\u6700\u540e\u6bcf\u4e2a\u5143\u7d20\u83b7\u5f97\u7684\u6700\u5927\u603b\u9762\u79ef\u7b49\u4e8e \uff08\u5411\u5de6\u5ef6\u4f38\u7684\u957f\u5ea6 + \u5411\u53f3\u5ef6\u4f38\u7684\u957f\u5ea6 + 1\uff09 \\* \u5143\u7d20\u9ad8\u5ea6\n\n\n##\u4e00\u5b9a\u8981\u5206\u522b\u6c42\u5de6\u53f3\u7684\u6269\u5c55\n\n\u4e5f\u5c31\u662f\u8bf4\u8981\u6b63\u53cd\u4e24\u6b21 \u6b63\u7684\u6c42\u51fa\u5411\u53f3 \u53cd\u7684\u6c42\u51fa\u5411\u5de6\u7684\uff08\u9006\u5e8f\u679a\u4e3e\u5c31\u884c\u4e86\uff09\n\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std ;\ntypedef long long ll ;\nconst ll N = 2000005 ;\nll Mesheight[N] , n , MaxArea , r[N] , l[N] ;\nclass Element{\npublic:\n  Element(ll h , ll index)\n    : height(h)\n    , startIndex(index)\n  {}\n  ll height , startIndex ;\n};\nstack<Element> s ;\nvoid Clear(){\n    while (!s.empty()) s.pop() ;\n}\nll GetMaxArea(const ll Mesheight[] , const ll len){\n  memset(l , 0 , sizeof(l)) ;\n  memset(r , 0 , sizeof(r)) ;\n  MaxArea = 0 ;\n  Clear() ;\n  s.push(Element(0 , 0)) ;//\u6700\u5de6\u7aef\u521d\u59cb\u5316 \u4f7f\u5f97\u540e\u6765\u7684\u5143\u7d20\u53ef\u4ee5push\u8fdb\u53bb\n  for ( ll i = 1 ; i <= len + 1 ; i++ ){\n    if (i == len + 1){//\u5f53\u6240\u6709\u7684\u5143\u7d20\u5df2\u7ecf\u8fdb\u5165 \u5355\u8c03\u6808\u91cc\u6b64\u65f6\u4ece\u5e95\u5230\u9876\u662f\u5347\u5e8f\u7684\n        while (s.empty() != 1){//\u53ea\u7559\u4e0b\u521d\u59cb\u5316\u7684\u6ca1\u6709\u4f5c\u7528\u7684\u5143\u7d20\n            r[s.top().startIndex] = n - s.top().startIndex ;\n            s.pop() ;\n        }\n        break ;\n    }\n    while (Mesheight[i] < s.top().height){//\u5982\u679c\u4f46\u8fdb\u5165\u7684\u5143\u7d20\u4e0d\u7b26\u5408\u5355\u8c03\u6808\u987a\u5e8f\n        r[s.top().startIndex] = i - s.top().startIndex - 1 ;//\u83b7\u5f97\u6b64\u65f6\u6808\u9876\u5143\u7d20\u5411\u53f3\u6269\u5c55\u7684\u6700\u957f\u957f\u5ea6\n        s.pop() ;//\u6ce8\u610f\u53ef\u80fd\u6709\u591a\u4e2a\u5143\u7d20\u88abpop\u51fa\u6765\n    }\n    s.push(Element(Mesheight[i] , i)) ;// \u52a0\u5165\u6808\u9876\n  }\n  Clear() ;\n  s.push(Element(0 , len + 1)) ;//\u540c\u6b63\u5e8f\n  for ( ll i = len ; i >= 0 ; i-- ){\n    if (i == 0){\n        while (s.size() != 1){\n            l[s.top().startIndex] = s.top().startIndex - 1 ;\n            s.pop() ;\n        }\n        break ;\n    }\n    while (Mesheight[i] < s.top().height){\n        l[s.top().startIndex] = s.top().startIndex - i - 1 ;\n        s.pop() ;\n    }\n    s.push(Element(Mesheight[i] , i)) ;\n  }\n  for ( int i = 1 ; i <= len ; i++ )\n    MaxArea = max (MaxArea , (l[i] + r[i] + 1) * Mesheight[i]) ;//\u679a\u4e3e\u6700\u5927\u7684\u9762\u79ef\n    return MaxArea ;\n}\nint main(){\n  while (cin >> n && n){\n    memset(Mesheight , 0 , sizeof(Mesheight)) ;\n    for ( ll i = 1 ; i <= n ; i++ )\n      scanf (\"%lld\" , &Mesheight[i]) ;\n    cout << GetMaxArea(Mesheight , n) << endl ;\n  }\n  return 0 ;\n}\n```\n\n\n",
        "postTime": 1478280114,
        "uid": 21691,
        "name": "\u665a\u98ce",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2659 \u3010\u7f8e\u4e3d\u7684\u5e8f\u5217\u3011"
    }
]
[
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a**\u4ee3\u7801\u590d\u6742\u5ea6\u8f83\u5c0f**\uff0c**\u5728\u7ebf**$O(1)$ \u56de\u7b54\u5355\u4e2a\u8be2\u95ee\u7684\u89e3\u6cd5\u3002\n\n\u5148\u524d\u9762\u8bf4\u660e\u4e00\u4e0b\uff0c\u628a\u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5 \u4f5c\u4e3a\u7b2c0\u5929\u5e76\u4e0d\u662f\u4ec0\u4e48\u574f\u4e3b\u610f\uff0c\u6bd5\u7adf\u201c0\u201d\u8fd8\u662f\u6709\u4e0d\u9519\u7684\u9664\u6cd5\u6027\u8d28\u7684\u3002\n\n\u4e0b\u9762\u7528 $n$ \u8868\u793a\u8be2\u95ee\u7684\u5929\u6570\u3002\u89e3\u9898\u7684\u5173\u952e\u5728\u4e8e\u5c06 $n$ \u5bf9\u5e94\u7684\u5e74\u4efd\u5206\u6210\u591a\u4e2a\u9636\u6bb5\uff0c\u5212\u5206\u4f9d\u636e\u662f\u6709\u65e0\u6bcf100\u5e74\u5e73\u5e74\u7684\u89c4\u5b9a\u3002\n\n\u6b64\u5916\uff0c\u8fd9\u9898\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u6027\u8d28\uff1a**\u5468\u671f\u6027**\u3002\u8fd9\u662f\u6211\u7684\u89e3\u6cd5\u7684\u5173\u952e\u4e4b\u5904\u3002\n\n## \u89e3\u6cd51$\\quad$\u6839\u636e\u5468\u671f\u6027\u7f29\u5c0f\u8303\u56f4\u6c42\u89e3\n\n### 1.\u516c\u5143 1582 \u5e74 10 \u6708 4 \u65e5\uff08\u542b\uff09\u4ee5\u524d\n\n\u8fd9\u4e2a\u65f6\u671f\u7684\u7279\u70b9\u5728\u4e8e\u6bcf 4 \u5e74\u5fc5\u6709\u95f0\u5e74\u3002\u4e00\u5171\u6709 1721424+577737 \u5929\uff0c\u6ce8\u610f\u8ba1\u7b97\u5668\u624b\u7b97\u522b\u7b97\u9519\u3002\u516c\u5143\u524d\u540e\u80fd\u5408\u8d77\u6765\u662f\u56e0\u4e3a\u95f0\u5e74\u603b\u662f\u6bcf4\u5e741\u6b21\u3002\n\n\u6211\u4eec\u53d1\u73b0 \u516c\u5143\u524d 4713 \u5e74\u662f\u4e2a\u95f0\u5e74\uff0c\u4e0d\u6ee1\u8db3\u5b83\u662f\u4e00\u4e2a 4 \u5e74\u5e73\u95f0\u5468\u671f\u7684\u6700\u540e\u4e00\u5e74\u3002\u5904\u7406\u65b9\u6cd5\u5f88\u7c97\u66b4\uff0c\u8ba9 $n$ \u52a0\u4e0a$1095$\uff0c\u5e74\u4efd\u539f\u70b9\u6539\u6210\u524d 4716 \u5e74\uff0c\u8fd9\u6837\u4fdd\u6301\u6027\u8d28\u4e0d\u53d8\u3002\u5c06 $n$ \u5bf9 $1461$\uff083\u5e731\u95f0\u7684\u5929\u6570\uff09\u6574\u9664\u3001\u53d6\u6a21\uff0c\u53ef\u4ee5\u5f97\u5230\u7ecf\u8fc7\u591a\u5c11\u4e2a 4 \u5e74\u3001\u8be2\u95ee\u662f\u8fd9\u4e2a4\u5e74\u91cc\u7684\u7b2c\u51e0\u5929\u3002\n\n`y=-4716+n/1461*4, n%=1461;`\n\n\u5982\u679c\u7b97\u51fa\u7ed3\u679c\u7684\u5e74\u4efd\u5927\u4e8e\u7b49\u4e8e\u96f6\uff0c\u8bf4\u660e\u662f\u516c\u5143\u540e\uff0c\u56e0\u516c\u5143\u96f6\u5e74\u4e0d\u5b58\u5728\uff0c\u771f\u5b9e\u5e74\u4efd\u8981+1\u3002\n\n\n### 2.\u516c\u5143 1582 \u5e74 10 \u6708 15 \u65e5\uff08\u542b\uff09\u4ee5\u540e\n\n\u4ee5\u516c\u5143 1 \u5e74\u4e3a\u8d77\u70b9\u3002\u8c8c\u4f3c\u90a3 10 \u5929\u6d88\u5931\u7684\u539f\u56e0\u5c31\u662f\u95f0\u5e74\u7684\u9700\u6c42\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5047\u8bbe\u524d1582\u5e74\u6709\u201c\u6bcf 400 \u5e74\u7684\u524d 3 \u4e2a\u7b2c 100 \u5e74\u662f\u5e73\u5e74\u201d\uff0c\u8fd9\u6837\u4e00\u5171\u4f1a\u591a\u7b97 12 \u5929\uff0c\u5c06 $n$ \u51cf\u53bb $12$ \u5c31\u597d\u4e86\u3002\u4f46\u662f\u56e0\u4e3a\u6d88\u5931\u7684 10 \u5929\uff0c$n$ \u8fd8\u8981\u518d\u52a0\u4e0a $10$\u3002\u6240\u4ee5\u5230\u8fd9\u91cc\uff0c\u5c06 $n$ \u603b\u5171\u51cf\u53bb $1721426$ \uff0c\u53ef\u4ee5\u5f97\u5230\u8ba1\u7b97\u6240\u9700\u7684\u516c\u5143\u540e\u5929\u6570\u3002\n\n\u7136\u540e\u5316\u5f52\u5230 400 \u5e74\u7684\u5468\u671f\u91cc\uff0c\u65b9\u6cd5\u548c\u4e0a\u9762\u7c7b\u4f3c\u3002\n\n`y=1+n/146097*400, n%=146097;`\n\n\u7ee7\u7eed\u8ba8\u8bba\u5f53\u524d\u7684 $n$ \u662f\u5426\u5728\u524d 300 \u5e74\u5f53\u4e2d\uff08\u524d 300 \u5e74\u5171 109572 \u5929\uff09\u3002\n\n1. \u5982\u679c $n$ \u5728\u7b2c 4 \u4e2a 100 \u5e74\u4e2d\uff0c\u6bcf 4 \u5e74\u5fc5\u6709\u95f0\u5e74\uff0c\u5316\u5f52\u4e00\u4e0b\u76f4\u63a5\u52304\u5e74\u5468\u671f\u91cc\u6c42\u89e3\u3002   \n`y+=300, n-=109572;`   \n`y+=n/1461*4, n%=1461;`\n\n2. \u5982\u679c $n$ \u5728\u524d 3 \u4e2a 100 \u5e74\u4e2d\uff0c   \n`y+=n/36524*100, n%=36524;`   \n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u8ba8\u8bba$n$\u662f\u5426\u5728\u8fd9 100 \u5e74\u7684\u524d 96 \u5e74\uff08\u6bcf 4 \u5e74\u7684\u6700\u540e 1 \u5e74\u6709\u95f0\u5e74\uff09\uff08\u5171 35064 \u5929\uff09   \n\u5982\u679c $n$ \u5728\u6700\u540e 4 \u5e74\uff0c`y+=96, n-=35064;`    \n\u8f6c\u5230 4 \u5e74\u5468\u671f\u91cc\u6c42\u89e3\u3002   \n\u5426\u5219\u76f4\u63a5\u53ef\u4ee5 `y+=n/1461*4, n%=1461;`   \n\u540c\u6837\u5230 4 \u5e74\u5468\u671f\u91cc\u53bb\u3002\n\n### 3.\u6bcf 4 \u5e74\u5468\u671f\u7684\u5904\u7406\n\n\u8fd9\u662f\u6c42\u89e3\u6700\u540e\u7684\u6b65\u9aa4\u3002\u6839\u636e\u4e4b\u524d\u7684\u505a\u6cd5\uff0c\u8fd94\u5e74\u4e2d\u53ea\u53ef\u80fd\u662f\u7b2c4\u5e74\u4e3a\u95f0\u5e74\u3002\u63a5\u4e0b\u6765\u8981\u5c06 $n$ \u5316\u5230\u8be5\u5e74\u7684\u7b2c\u51e0\u5929\u3002\n\n1. \u5982\u679c $n$ \u5927\u4e8e\u7b49\u4e8e $1095$ \u4e14\u5b58\u5728\u95f0\u5e74\uff0c\u90a3\u4e48 $n$ \u76f4\u63a5\u51cf\u53bb $1095$\uff0c\u7b54\u6848\u5e74\u4efd+3\u3002\n2. \u5426\u5219\u5e74\u4efd\u52a0\u4e0a $n/365$\uff0c$n$ \u5bf9 $365$ \u53d6\u6a21\u3002\u7279\u522b\u5730\uff0c\u5982\u679c$n \\ge 59$\uff0c\u8fd8\u8981\u518d\u52a0\u4e0a1\uff08\u56de\u907f2\u670829\u65e5\uff09\u3002\n\n\u5982\u4f55\u5feb\u901f\u5224\u65ad\u4e00\u5e74\u4e2d\u7684\u7b2c $n$ ($n$ \u4ece0\u5f00\u59cb) \u5929\u662f\u51e0\u6708\u51e0\u65e5\uff1f\u76f4\u63a5\u6253\u8868\uff0c\u4e00\u4e2a366*2\u7684\u6570\u7ec4\uff0c\u7528\u7684\u65f6\u5019\u5feb\u901f\u67e5\u8be2\u3002\u5e73\u5e74\u548c\u95f0\u5e74\u5171\u7528\uff0c\u533a\u522b\u5728\u4e8e\u5982\u679c\u7b2c 4 \u5e74\u662f\u5e73\u5e74\uff0c\u5728 $n \\ge 59$ \u65f6\uff0c\u8ba9 $n$ \u52a0\u4e0a 1 \uff0c\u5c31\u8df3\u8fc7\u4e86 2 \u6708 29 \u65e5\u3002\n\n\u7531\u4e8e\u524d\u9762\u591a\u6b21\u7528\u5230\u8fd9\u4e2a\uff0c\u53ef\u4ee5\u5355\u72ec\u5199\u4e00\u4e2a\u51fd\u6570\u3002\n\n------------\n\n**\u6700\u7ec8\u4ee3\u7801\u5982\u4e0b\uff0c\u9664\u53bb\u6211\u5199\u4ee3\u7801\u65f6\u6ce8\u91ca\u8fd8\u662f\u5f88\u7b80\u6d01\u7684\u3002**\n\n\u56e0\u4e3a\u6574\u9664\u3001\u53d6\u6a21\u5e38\u6570\u8f83\u5927\uff0c\u6240\u4ee5 $O(1)$ \u81ea\u5e26\u5927\u5e38\u6570\uff0c\u4f46\u5e94\u8be5\u6bd4\u5e26\u5faa\u73af\u7684\u505a\u6cd5\u8981\u597d\u3002\n\n\u6ce8\u610f\u8bfb\u5165$n$\u8981\u5f00`long long`\u3002\n\n```cpp\n#include <cstdio>\nusing namespace std;\ntypedef long long ll;\n//\u8fd9\u91cc\u5feb\u8bfb\u51fd\u6570\u7701\u7565\n//\u5df2\u7ecf\u5316\u5f52\u52304\u5e74\u7684\u60c5\u51b5\u4e0b\u6c42\u89e3\nvoid solve2(int n, int &y, int &m, int &d, bool flag) { //flag\u4e3a\u6807\u8bb0\u662f\u5426\u8003\u86514\u5e74\u672b\u7684\u95f0\u5e74\n\t//\u6253\u8868\uff0c\u5feb\u901f\u8ba1\u7b97\u7b2ci\u5929\u7684\u65e5\u6708\n\tstatic int todate[366][2]={{0,0},{0,1},{0,2},{0,3},{0,4},{0,5},{0,6},{0,7},{0,8},{0,9},{0,10},{0,11},{0,12},{0,13},{0,14},{0,15},{0,16},{0,17},{0,18},{0,19},{0,20},{0,21},{0,22},{0,23},{0,24},{0,25},{0,26},{0,27},{0,28},{0,29},{0,30},{1,0},{1,1},{1,2},{1,3},{1,4},{1,5},{1,6},{1,7},{1,8},{1,9},{1,10},{1,11},{1,12},{1,13},{1,14},{1,15},{1,16},{1,17},{1,18},{1,19},{1,20},{1,21},{1,22},{1,23},{1,24},{1,25},{1,26},{1,27},{1,28},{2,0},{2,1},{2,2},{2,3},{2,4},{2,5},{2,6},{2,7},{2,8},{2,9},{2,10},{2,11},{2,12},{2,13},{2,14},{2,15},{2,16},{2,17},{2,18},{2,19},{2,20},{2,21},{2,22},{2,23},{2,24},{2,25},{2,26},{2,27},{2,28},{2,29},{2,30},{3,0},{3,1},{3,2},{3,3},{3,4},{3,5},{3,6},{3,7},{3,8},{3,9},{3,10},{3,11},{3,12},{3,13},{3,14},{3,15},{3,16},{3,17},{3,18},{3,19},{3,20},{3,21},{3,22},{3,23},{3,24},{3,25},{3,26},{3,27},{3,28},{3,29},{4,0},{4,1},{4,2},{4,3},{4,4},{4,5},{4,6},{4,7},{4,8},{4,9},{4,10},{4,11},{4,12},{4,13},{4,14},{4,15},{4,16},{4,17},{4,18},{4,19},{4,20},{4,21},{4,22},{4,23},{4,24},{4,25},{4,26},{4,27},{4,28},{4,29},{4,30},{5,0},{5,1},{5,2},{5,3},{5,4},{5,5},{5,6},{5,7},{5,8},{5,9},{5,10},{5,11},{5,12},{5,13},{5,14},{5,15},{5,16},{5,17},{5,18},{5,19},{5,20},{5,21},{5,22},{5,23},{5,24},{5,25},{5,26},{5,27},{5,28},{5,29},{6,0},{6,1},{6,2},{6,3},{6,4},{6,5},{6,6},{6,7},{6,8},{6,9},{6,10},{6,11},{6,12},{6,13},{6,14},{6,15},{6,16},{6,17},{6,18},{6,19},{6,20},{6,21},{6,22},{6,23},{6,24},{6,25},{6,26},{6,27},{6,28},{6,29},{6,30},{7,0},{7,1},{7,2},{7,3},{7,4},{7,5},{7,6},{7,7},{7,8},{7,9},{7,10},{7,11},{7,12},{7,13},{7,14},{7,15},{7,16},{7,17},{7,18},{7,19},{7,20},{7,21},{7,22},{7,23},{7,24},{7,25},{7,26},{7,27},{7,28},{7,29},{7,30},{8,0},{8,1},{8,2},{8,3},{8,4},{8,5},{8,6},{8,7},{8,8},{8,9},{8,10},{8,11},{8,12},{8,13},{8,14},{8,15},{8,16},{8,17},{8,18},{8,19},{8,20},{8,21},{8,22},{8,23},{8,24},{8,25},{8,26},{8,27},{8,28},{8,29},{9,0},{9,1},{9,2},{9,3},{9,4},{9,5},{9,6},{9,7},{9,8},{9,9},{9,10},{9,11},{9,12},{9,13},{9,14},{9,15},{9,16},{9,17},{9,18},{9,19},{9,20},{9,21},{9,22},{9,23},{9,24},{9,25},{9,26},{9,27},{9,28},{9,29},{9,30},{10,0},{10,1},{10,2},{10,3},{10,4},{10,5},{10,6},{10,7},{10,8},{10,9},{10,10},{10,11},{10,12},{10,13},{10,14},{10,15},{10,16},{10,17},{10,18},{10,19},{10,20},{10,21},{10,22},{10,23},{10,24},{10,25},{10,26},{10,27},{10,28},{10,29},{11,0},{11,1},{11,2},{11,3},{11,4},{11,5},{11,6},{11,7},{11,8},{11,9},{11,10},{11,11},{11,12},{11,13},{11,14},{11,15},{11,16},{11,17},{11,18},{11,19},{11,20},{11,21},{11,22},{11,23},{11,24},{11,25},{11,26},{11,27},{11,28},{11,29},{11,30}};\n\tif (n>=1095 && flag) { //\u7b2c4\u5e74\u662f\u95f0\u5e74\n\t\ty+=3, n-=1095; //\u73b0\u5728n\u662f\u8be5\u5e74\u7b2c\u51e0\u5929\n\t} else {\n\t\ty+=n/365, n%=365;\n\t\tif (n>=59) n++;\n\t}\n\tm=todate[n][0]+1, d=todate[n][1]+1;\n}\nvoid solve(ll n, int &y, int &m, int &d) {\n\tif (n<1721424+577737) { //1582\u5e7410\u67084\u65e5\u53ca\u4e4b\u524d\n\t\t//\u5e73\u79fb\u4e00\u4e0b\uff0c\u628a\u95f0\u5e74\u653e\u5728\u7b2c4\u4e2a\u5468\u671f\n\t\t//\u56e0\u4e3a\u524d4713\u662f\u95f0\u5e74\n\t\tn+=1095;\n\t\ty=-4716+n/1461*4, n%=1461;\n\t\tsolve2(n,y,m,d,true);\n\t\tif (y>=0) y++; //\u516c\u51430\u5e74\u4e0d\u5b58\u5728\n\t} else { //\u516c\u5143\u540e\uff0c\u6539\u5386\u6cd5\u540e\n\t\tn-=1721424;\n\t\t//\u6709\u6bcf400\u5e74\u7684\u95f0\u5e74\u3001100\u5e74\u7684\u5e73\u5e74\n\t\t//\u524d1582\u5e74\u5f53\u6210\u65e0100\u5e74\u5e73\u5e74\u6765\u505a\uff0c\u591a\u4e8612\u5929\uff0c\u8fd8\u8981\u518d\u52a0\u4e0a\n\t\tn+=10-12;\n\t\t//\u7ea6\u675f\u5230400\u5e74\u91cc\n\t\ty=1+n/146097*400, n%=146097;\n\t\t//\u7136\u540e\u8ba8\u8bba\u4e00\u4e0b\u6709\u591a\u5c11\u95f0\u5e74\n\t\t//\u4e0b\u9762\u7ea6\u675f\u5230100\u5e74\u91cc \u6bcf100\u5e74\u6709 36524\u5929\n\t\tif (n>=109572) { //\u6700\u540e\u4e00\u4e2a100\u5e74\uff0c\u6700\u540e\u4e00\u5e74\u662f\u95f0\u5e74\uff0c\u6ee1\u8db3\u6bcf4\u5e74\u6709\u95f0\u5e74\n\t\t\ty+=300, n-=109572;\n\t\t\ty+=n/1461*4, n%=1461;\n\t\t\tsolve2(n,y,m,d,true);\n\t\t} else { //\u4e0d\u662f\u6700\u540e\u4e00\u4e2a100\u5e74\uff0c\u672b\u5c3e\u6ca1\u6709\u95f0\u5e74\n\t\t\ty+=n/36524*100, n%=36524;\n\t\t\tif (n>=35064) { //\u5728\u6700\u540e\u4e00\u4e2a4\u5e74\n\t\t\t\ty+=96, n-=35064;\n\t\t\t\tsolve2(n,y,m,d,false);\n\t\t\t} else {\n\t\t\t\ty+=n/1461*4, n%=1461;\n\t\t\t\tsolve2(n,y,m,d,true);\n\t\t\t}\t\n\t\t}\n\t}\n}\nint main() {\n\tint q=read<int>();\n\twhile (q--) {\n\t\tll n=read<ll>();\n\t\tint y,m,d;\n\t\tsolve(n,y,m,d);\n\t\tif (y<0) printf(\"%d %d %d BC\\n\", d,m,-y);\n\t\telse printf(\"%d %d %d\\n\", d,m,y);\n\t}\n\treturn 0;\n}\n```\n## \u89e3\u6cd52$\\quad$\u5229\u7528\u6620\u5c04\u62df\u5408\uff0c\u66b4\u529b\u8ba1\u7b97\u5e74\u4efd\n\n\u8fd9\u5e94\u8be5\u7b97\u662f\u4f18\u5316\u5230\u6781\u81f4\u7684\u505a\u6cd5\u3002\n\n\u9996\u5148\u6211\u4eec\u95ee\u4e00\u4e2a\u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48\u4f1a\u6709\u95f0\u5e74\u7684\u8bbe\u5b9a\uff1f\u7b54\u6848\u5f88\u7b80\u5355\uff0c\u4f46\u53ef\u80fd\u4e0d\u4e00\u5b9a\u80fd\u5728\u505a\u8fd9\u9898\u65f6\u60f3\u5230\uff1a\u4e3a\u4e86\u8865\u4e0a\u5c11\u6570\u7684\u5e74\u4efd\u3002   \n\u8fd8\u6709\u4e3a\u4ec0\u4e48\u6709100\u5e74\u4e0d\u95f0\u3001400\u5e74\u53c8\u95f0\u7684\u8bbe\u5b9a\uff1f\u5176\u5b9e\u4e5f\u662f\u62df\u5408\u51cf\u5c0f\u8bef\u5dee\u7684\u9700\u8981\u3002\n\n\u5728\u4e0a\u9762\u7684\u89e3\u6cd5\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u8ba8\u8bba\u95f0\u5e74\u7279\u522b\u7279\u522b\u9ebb\u70e6\uff0c\u4e0d\u96be\u60f3\u5230\uff1a\u5982\u679c\u80fd\u76f4\u63a5\u7b97\u51fa $n$ \u5728\u7b2c\u51e0\u5e74\uff0c\u4e0d\u5c31\u6ca1\u90a3\u4e48\u591a\u7834\u4e8b\u4e86\u5417\uff1f\u8003\u8651\u5230\u95f0\u5e74\u7684\u8bbe\u5b9a\uff0c\u8fd9\u6837\u505a\u5e94\u8be5\u5177\u6709\u53ef\u884c\u6027\u3002\n\n### \u5148\u8003\u8651\u7b80\u5355\u7684\u60c5\u51b5\uff1a\u5112\u7565\u5386\u7684\u6bcf4\u5e741\u95f0\u3002\n\n\u867d\u7136\u53ef\u4ee5\u5148\u5316\u5230 4 \u5e74\u91cc\uff0c\u4f46\u662f\u6ca1\u6709\u5fc5\u8981\u3002\u6ce8\u610f\u5230 4 \u5e74\u5171 1461 \u5929\uff0c\u9664\u4ee5 4 \u4e3a $365.25$ \u3002\u5982\u679c\u8ba9 $n$ \u76f4\u63a5\u9664\u4ee5$365.25$\uff0c\u662f\u5426\u80fd\u5f97\u5230\u6b63\u786e\u7684\u589e\u52a0\u5e74\u6570\uff1f\u76f4\u63a5\u8fd9\u6837\u505a\u4e0d\u884c\uff0c\u56e0\u4e3a $n=0,1,...,365$ \u65f6\u5f97\u5230\u7684\u7ed3\u679c\u90fd\u662f0\uff0c\u5305\u62ec\u4e86366\u5929\u3002\u8fd9\u91cc\u6211\u4eec\u4e0d\u59a8\u628a\u7b2c0\u5e74\u8bbe\u4e3a\u95f0\u5e74\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5468\u671f\u4e3a4\u5e74\u7684\u5faa\u73af\uff08\u7b2c0\u5e74\u4e3a\u95f0\uff0c\u540e3\u5e74\u4e3a\u5e73\uff09\u3002\u8fd9\u4e2a\u53ef\u4ee5\u5728 Excel \u4e2d\u6253\u8868\u9a8c\u8bc1\u3002   \n\u5176\u6b21\u662f\u5c06 $n$ \u51cf\u53bb\u4e00\u5b9a\u5929\u6570\u5f97\u5230\u4e00\u5e74\u4e2d\u7684\u7b2c\u51e0\u5929\uff0c\u8fd9\u4e2a\u53ea\u9700\u77e5\u9053\u6709\u591a\u5c11\u95f0\u5e74\u3002\u6839\u636e\u8ba1\u7b97\uff0c\u4e0d\u96be\u5f97\u51fa\u4e4b\u524d\u7ecf\u8fc7\u95f0\u5e74\u6570\u4e3a $[(y+3)/4]$\u3002   \n\u7531\u4e8e\u5112\u7565\u5386\u7684\u7b2c0\u5e74\u6070\u597d\u4e3a\u95f0\u5e74\uff0c\u6240\u4ee5\u6700\u7ec8\u7ed3\u679c\u53ea\u9700\u51cf\u53bb $4713$\uff08\u4e0d\u8981\u5fd8\u4e86\u516c\u5143\u540e\u8981+1\uff09\u3002\n\n### \u5269\u4e0b\u4e00\u4e2a\u9ebb\u70e6\u7684\u60c5\u51b5\n\n\u548c\u89e3\u6cd51\u4e00\u6837\uff0c$n$\u5148\u51cf\u53bb $1721426$\uff0c\u5f97\u5230\u516c\u5143\u540e\u5047\u60f3\u5929\u6570\u3002\u4f46\u662f\u4e3a\u4e86\u4fdd\u8bc1\u7b2c\u4e00\u5e74\u662f\u95f0\u5e74\uff0c\u8fd8\u8981\u52a0\u4e0a366\uff08\u516c\u5143\u96f6\u5e74\u6d3e\u4e0a\u7528\u573a\u4e862333\uff09\u3002\n\n\u8fd9\u91cc\u5728 Excel \u91cc\u7a0d\u5fae\u73a9\u73a9\u6574\u9664\u62df\u5408\u4f1a\u53d1\u73b0\uff0c\u867d\u7136 $365.2425$ \u662f\u6bd4\u8f83\u7cbe\u786e\u7684\u5e73\u5747\u6bcf\u5e74\u5929\u6570\uff0c\u4f46\u5728\u6839\u636e\u4e00\u5e74\u7684\u6700\u540e\u4e00\u5929\u6c42\u5e74\u6570\u65f6\uff0c\u7528 $365.25$ \u53cd\u800c\u80fd\u5f97\u5230\u51c6\u786e\u503c\u3002\n\n\u4f46\u662f\u5e76\u6ca1\u6709\u8fd9\u4e48\u5de7\u7684\u4e8b\u3002\u5bf9\u62cd\u51e0\u7ec4\u4f1a\u53d1\u73b0\uff0c\u6709\u65f6\u5e74\u521d\u65e5\u671f\u4f1a\u51fa\u9519\u3002\u5728 Excel \u91cc\u68c0\u67e5\uff0c\u53d1\u73b0\u4e00\u5e74\u7684\u7b2c1\u5929\u4f1a\u57283/4\u7684\u60c5\u51b5\u4e0b\u88ab\u5f53\u4f5c\u4e0a\u4e00\u5e74\u989d\u5916\u591a\u51fa\u7684\u4e00\u5929\uff08\u7b2c2, 3\u5929\u5219\u5206\u522b\u67092/4, 1/4\u7684\u60c5\u51b5\u51fa\u9519\uff09\u3002\u8fd9\u6837\u770b\u6765\uff0c\u8fd9\u4e2a\u89e3\u6cd5\u4f3c\u4e4e\u5c31\u4e0d\u884c\u4e86\u3002\n\n\u5f88\u9057\u61be\uff0c\u6211\u6ca1\u6709\u627e\u5230\u80fd\u5b9e\u73b0\u5b8c\u7f8e\u62df\u5408\u7684\u7684\u88ab\u9664\u6570\uff0c\u53ea\u80fd\u4f7f\u7528\u6211\u4e00\u5f00\u59cb\u60f3\u51fa\u7684\u6ea2\u51fa\u7d2f\u52a0\u6cd5\uff0c\u5373\u591a\u51fa\u6765\u7684\u5929\u653e\u5230\u4e0b\u4e00\u5e74\u3002\n\n\u6700\u7ec8\u6211\u7684\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u4f9d\u65e7\u4f7f\u7528 $365.25$ \u4f5c\u4e3a\u9664\u6570\uff0c\u4f46\u662f\u9700\u8981\u7279\u5224\u88ab\u7b97\u6210\u4e0a\u4e00\u5e74\u7684\u9519\u8bef\u60c5\u51b5\u3002\u8fd9\u79cd\u9519\u8bef\u5f88\u5bb9\u6613\u67e5\u51fa\uff0c\u4e00\u5e74\u4e2d\u5929\u53f7 $n$ \u5927\u4e8e\u7b49\u4e8e $365$ \u6216 $366$\uff0c\u76f4\u63a5\u5c06\u5e74\u6570\u52a01\uff0c$n$ \u6ea2\u51fa\u90e8\u5206\u51cf\u53bb\u3002\u8fd9\u91cc\u65e0\u9700\u518d\u7279\u5224\u5e73\u95f0\uff0c\u56e0\u4e3a\u591a\u51fa\u6765\u7684\u90a3\u51e0\u5929\u4e0d\u8d85\u8fc74\u5929\uff0c\u4e0d\u5173\u95f0\u5e74\u4ec0\u4e48\u4e8b\u3002\u4e5f\u4e0d\u7528\u62c5\u5fc3\u4e00\u5e74\u5012\u6570\u51e0\u5929\u7684\u4e8b\uff0c\u6700\u540e\u4e00\u5929\u90fd\u4e0d\u4f1a\u51fa\u9519\uff0c\u5c31\u66f4\u4e0d\u7528\u8bf4\u5012\u6570\u7b2c2,3\u5929\u4e86\u3002\n\n\u8fd8\u6709\u9700\u8981\u6ce8\u610f\uff0c\u56e0\u4e3a\u8fd9\u91cc $365.25$ \u4ec5\u5bf9\u524d400\u5e74\u62df\u5408\u8f83\u597d\uff0c\u4ecd\u7136\u9700\u8981\u7528\u6574\u9664\u5c06 $n$ \u5316\u5f52\u5230400\u5e74\u4e2d\u53bb\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fj9o441y.png)\n\n------------\n\n\u6838\u5fc3\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\u3002\u683c\u91cc\u9ad8\u5229\u5386\u4e0b\u6c42\u7ecf\u8fc7\u95f0\u5e74\u6570\u7528\u5230\u4e86\u7b80\u5355\u7684\u5bb9\u65a5\u3002\u603b\u4f53\u4ee3\u7801\u590d\u6742\u5ea6\u548c\u5176\u4ed6\u9898\u89e3\u76f8\u6bd4\u5f88\u4f4e\uff0c\u4f46\u7a0d\u5fae\u9700\u8981\u7528\u70b9\u6570\u5b66\u3002\u5927\u6a21\u62df\uff1f\u6839\u672c\u4e0d\u5b58\u5728\uff01\n\n```cpp\nvoid solve(ll n, int &y, int &m, int &d) {\n\tbool flag;\n\tif (n<1721424+577737) { //1582\u5e7410\u67084\u65e5\u53ca\u4e4b\u524d\n\t\ty=n/365.25; //\u57fa\u7840\u5e74\u5e8f\u6570\uff0c\u7b2c0\u5e74\u4e3a\u95f0\u5e74\uff0c\u8fd9\u6837\u6070\u597d\u53ef\u4ee5\u5f97\u5230\u5e74\u6570\n\t\tn-=y*365+(y+3)/4; // y=0\u65f6n\u4e0d\u591a\u51cf\uff0cy=1,2,3,4\u65f6n\u8981\u591a\u51cf1\uff0c\u2026\u2026\n\t\tflag=y%4==0;\n\t\ty+=-4713;\n\t\tif (y>=0) y++; //\u516c\u51430\u5e74\u4e0d\u5b58\u5728\n\t} else { //\u516c\u5143\u540e\uff0c\u6539\u5386\u6cd5\u540e\n\t\t//\u8bb0\u65b0\u5386\u7684\u516c\u51431\u5e741\u67081\u65e5\u4e3a\u7b2c0\u5929\n\t\t//\u6211\u4eec\u5e0c\u671b\u8fd9\u91cc\u7684\u7b2c0\u5e74\u662f\u95f0\u5e74\uff0c\u5e72\u8106\u5b9a\u4e49\u516c\u51430\u5e74\uff0cn\u52a0\u4e0a366\n\t\t//\u76f4\u63a5\u7b97\u51fa\u5e74\u4efd\uff0c\u4ece0\u5f00\u59cb\u8ba1  \u56e0\u4e3a\u8fd9\u6837\u505a\u5728400\u5e74\u91cc\u662f\u6ca1\u6709\u95ee\u9898\u7684\uff0c\u6240\u4ee5\u5148\u5316\u5f52\u5230400\u5e74\u91cc\n\t\tn-=1721426-366;\n\t\tint y0=n/146097*400;\n\t\tn%=146097;\n\t\ty=n/365.25;\n\t\t//\u8fd9\u91cc\u6ce8\u610f\uff0c\u56e0\u4e3a\u4e0d\u80fd\u4fdd\u8bc1\u5e74\u6570\u6b63\u786e\uff0c\u4f1a\u8d85\u8fc7\u8be5\u5e74\u5929\u6570\uff0c\u68c0\u67e5\u51fa\u6765\u76f4\u63a5\u5e74\u6570+1\u5c31\u884c\uff0c\u56e0\u4e3a\u8bef\u5dee\u57284\u4ee5\u5185\n\t\t//\u4e0b\u9762\u5c06n\u51cf\u53bb\u524d\u9762\u7684\u5929\u6570\n\t\t//y=0\u65f6n\u4e0d\u591a\u51cf\uff0cy=1,2,...,400\u65f6n\u8981\u591a\u51cf1\n\t\tn-=y*365ll+(y+3)/4-(y+99)/100+(y+399)/400;\n\t\tflag=y%400==0 || y%4==0 && y%100!=0; //\u5f53\u524d\u5e74\u662f\u5426\u662f\u95f0\u5e74\n\t\ty+=y0;\n        if (n>=365+flag) n-=365+flag, y++; \n\t}\n\tif (!flag && n>=59) n++;\n\tm=todate[n][0]+1, d=todate[n][1]+1;\n}\n```\n\n## \u4e00\u4e2a\u5c0f\u5c0f\u7684\u4f18\u5316\uff1a\u5c06\u67e5\u8868\u53d1\u626c\u5149\u5927\uff01\n\n\u76f4\u63a5\u628a\u5224\u65ad\u95f0\u5e74\u3001\u95f0\u5e74\u8ba1\u6570\u6253\u8868\uff0c\u51cf\u5c11\u9664\u6cd5\u8fd0\u7b97\u3002\n\n`flag=!(y&3);`\n\n`n-=y*365ll+sumLeapYear[y], flag=isLeapYear[y];`\n\n\u6253\u8868\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n//\u662f\u5426\u4e3a\u95f0\u5e74\nprintf(\"bool isLeapYear[400]={1\");\nfor (int i=1;i<400;i++) {\n\tprintf(\",%d\",i%400==0 || i%4==0 && i%100!=0);\n}\nprintf(\"};\\n\");\n//\u524d\u7f00\u95f0\u5e74\u6570\nprintf(\"int sumLeapYear[400]={0\");\nfor (int i=1;i<400;i++) {\n\tprintf(\",%d\",(i+3)/4-(i+99)/100+(i+399)/400);\n}\nprintf(\"};\\n\");\n```\n\n\u7136\u800c\u5b9e\u6d4b\u51e0\u4e4e\u6ca1\u6709\u65f6\u95f4\u4e0a\u7684\u4f18\u5316\uff08\u7b11\uff09\u3002\n\n\u4f30\u8ba1\u4e0d\u5c11\u65f6\u95f4\u90fd\u7528\u5728\u8f93\u5165\u8f93\u51fa\u4e0a\u4e86\u3002\n",
        "postTime": 1605084198,
        "uid": 32771,
        "name": "\u554a\u561e\u561e\u561e\u561e",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\u3011"
    },
    {
        "content": "\u5728\u4e00\u79cd\u5386\u6cd5\u4e2d\uff0c\u65e5\u671f\u8ba1\u7b97\u4ee5400\u5e74\u4e3a\u5468\u671f\uff0c\u6bcf400\u5e74\u90fd\u6709\u6070\u597d146097\u5929\n\n\u9884\u5904\u7406\u51fa400\u5e74\u5185\u7684\u60c5\u51b5\uff0c\u5c06\u5e74\u4efd\u6a21400\u5373\u53ef\u5feb\u901f\u5f97\u5230\u7b54\u6848\n\n\u51e0\u4e2a\u7b80\u5316\u4ee3\u7801\u7684\u6280\u5de7\uff1a\n\n\u5bf9\u4e8e\u683c\u91cc\u9ad8\u5229\u5386\uff0c\u4ee51200\u5e741\u67081\u65e5\u4e3a\u8d77\u59cb\u65e5\uff0c$r$\u51cf\u53bb\u8df3\u8fc7\u7684\u5929\u6570\uff082159351\uff09\n\n\u5224\u65ad\u5386\u6cd5\uff1a$r\\leqslant2299160$\u5373\u4e3a\u5112\u7565\u5386\n\n\u516c\u5143\u524d$x$\u5e74\u89c6\u4e3a$1-x$\u5e74\n\n```cpp\n#include<bits/stdc++.h>\ntypedef long long ll;\nconst int N=146097;//\u683c\u91cc\u9ad8\u5229\u5386400\u5e74\u7684\u5929\u6570\nint T,y[N],m[N],d[N];\nll n,t;\ninline int md(int y,int m){//\u683c\u91cc\u9ad8\u5229\u5386y\u5e74m\u6708\u7684\u5929\u6570\n    if(m==2)return y%4?28:y%100?29:y%400?28:29;\n    return m==4||m==6||m==9||m==11?30:31;\n}\nint main(){\n    m[0]=d[0]=1;\n    for(int i=1;i<N;++i){\n        d[i]=d[i-1]+1;m[i]=m[i-1];y[i]=y[i-1];\n        if(d[i]>md(y[i],m[i]))++m[i],d[i]=1;\n        if(m[i]>12)++y[i],m[i]=1;\n    }//y[i],m[i],d[i]\u5206\u522b\u8868\u793a\u4ece0\u5e741\u67081\u65e5\u7ecf\u8fc7i\u5929\u7684\u5e74\u6708\u65e5\n    scanf(\"%d\",&T);\n    while(T--){\n        scanf(\"%lld\",&n);\n        if(n>2299160){//\u683c\u91cc\u9ad8\u5229\u5386\n            n-=2159351;\n            t=n/N*400+1200;\n            n%=N;\n        }else{\n            t=n/1461*4-4712;//1461\u662f\u5112\u7565\u53864\u5e74\u7684\u5929\u6570\n            n%=1461;\n        }\n        if(t+y[n]>0)printf(\"%d %d %lld\\n\",d[n],m[n],t+y[n]);\n        else printf(\"%d %d %lld BC\\n\",d[n],m[n],1-t-y[n]);\n    }\n}\n```\n",
        "postTime": 1604927591,
        "uid": 35406,
        "name": "\u300c\u5df2\u6ce8\u9500\u300d",
        "ccfLevel": 7,
        "title": "CSP-S2020 T1\u9898\u89e3"
    },
    {
        "content": "\u5fc3\u8840\u6765\u6f6e\uff0c\u6765\u4e00\u4e2a $40$ \u5206\u949f\u5185\u60f3 + \u5199 + \u8c03\u7684\u505a\u6cd5\uff0c\u4f5c\u4e3a\u81ea\u5df1\u6700\u540e\u4e00\u7bc7\u9898\u89e3\u5427\u3002\n\n\u8fd9\u4e2a\u505a\u6cd5\u6709\u4e00\u4e2a\u4f18\u70b9\u5c31\u662f**\u4e0d\u4f1a\u6302**\uff0c\u53ea\u8981\u8fc7\u4e86\u5927\u6837\u4f8b\u5c31\u662f\u5bf9\u7684\u3002\n\n## \u6ce8\u610f\u8981 #define int long long !!!\n\n\u9996\u5148\u5c06\u8be2\u95ee\u79bb\u7ebf\u3002\n\n- \u8bb0\u5f55 rmon \u6570\u7ec4\u8868\u793a\u95f0\u5e74\u6708\u4efd\uff0cmon \u6570\u7ec4\u8868\u793a\u666e\u901a\u5e74\u6708\u4efd\u3002\n\n- \u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53 QWQ \u8868\u793a\u5f53\u524d\u65e5\u671f\u3002\n\n- \u5199\u4e00\u4e2a\u5224\u65ad\u95f0\u5e74\u7684\u51fd\u6570 bool isr(QWQ x)\u3002\n\n- \u5199\u4e00\u4e2a\u51fd\u6570 QWQ nextday(QWQ x) \u8868\u793a $x$ \u7684\u4e0b\u4e00\u5929\uff0c\u8fd4\u56de\u4e00\u4e2a QWQ \u7c7b\u578b\u3002\n\n\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u8ba8\u8bba\u7684\u662f\uff1a\u5f53\u524d\u662f\u5426\u662f $1582$ \u5e74\uff0c\u5f53\u524d\u662f\u5426\u662f\u516c\u5143**\u524d** $1$ \u5e74\uff08\u8981\u8fdb\u5230\u516c\u5143 1 \u5e74\uff09\uff0c\u5f53\u524d\u662f\u5426\u662f $1582$ \u524d\u7684\u95f0\u5e74\uff0c\u5f53\u524d\u662f\u5426\u662f $1582$ \u540e\u7684\u95f0\u5e74\u3002\n\n\u8fd9\u4e2a\u5206\u7c7b\u8ba8\u8bba\u8fd8\u662f\u6bd4\u8f83\u6e05\u6670\u7684\u3002\n\n\n- \u5bf9\u4e8e $-4713.1.1 \\sim 1999.12.31$ \u8fd9\u6bb5\u65f6\u95f4\uff0c\u4ece\u5143\u5e74\u5f00\u59cb\u66b4\u529b nextday \u51fd\u6570\u6c42\u3002\u6253\u8868\u51fa\u6765\u7b2c $2451545$ \u5e74\u5c31\u662f $2000.1.1$\u3002\n\n\u63a5\u4e0b\u6765\u95f0\u5e74\u5f88\u96be\u505a\u600e\u4e48\u529e\uff1f\u7ee7\u7eed\u8003\u8651\u66b4\u529b\u3002\u6253\u8868\u6253\u51fa\u8fd9 $400$ \u5e74\u6709 $146097$ \u5929\u3002\n\n\u6211\u4eec\u8003\u8651\u66b4\u529b\u628a\u8fd9 $400$ \u5929\u7528 nextday \u51fd\u6570\u8dd1\u51fa\u6765\uff0c\u7136\u540e\u51cf\u53bb $2451545$ \u518d\u9664 $146097$ \u6c42\u51fa\u8fd9\u662f\u7b2c\u51e0\u8f6e\u5faa\u73af\uff08\u5373\u7b2c\u51e0\u4e2a $400$ \u5e74\uff09\uff0c\u7b80\u5355\u8ba8\u8bba\u4e00\u4e0b\u5c31\u597d\u4e86\u3002\n\n\u8fd9\u6837\u524d\u9762\u4e00\u6b65\u9519\u6837\u4f8b\u5c31\u8fc7\u4e0d\u53bb\uff0c\u6240\u4ee5\u4e0d\u53ef\u80fd\u6302\u5206\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(2451545+146097+Q)$\u3002~~\u6211\u77e5\u9053\u8fd9\u6837\u63cf\u8ff0\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u4e25\u8c28\uff0c\u4f46\u662f\u5c31\u8fd9\u6837\u5427\u3002~~\n\n\u4ee3\u7801\u5176\u5b9e\u5f88\u597d\u5199\uff0c\u4e2d\u95f4\u90a3\u4e00\u5927\u6bb5\u90fd\u662f\u590d\u5236\u7c98\u8d34\u7684\uff0c\u6240\u4ee5\u770b\u8d77\u6765\u5f88\u957f\uff0c\u4f46\u5b9e\u9645\u5c31\u90a3\u4e48\u4e00\u70b9\u70b9...\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define int long long //\u91cd\u8981 \n#define gc getchar\nusing namespace std;\ninline ll read(){\n    ll x=0,f=1;char ch=gc();\n    while (!isdigit(ch)){if (ch=='-') f=-1;ch=gc();}\n    while (isdigit(ch)){x=x*10ll+ch-'0';ch=gc();}\n    return x*f;\n}\nconst int mon[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nconst int rmon[13]={0,31,29,31,30,31,30,31,31,30,31,30,31};\nstruct que{\n    int t,id;\n}q[1010101];\nstruct QWQ{\n    int y,m,d;\n}ori,tmp,ans[101010],X[300001];\nint Q,mx,cnt; \ninline bool cmp(que a,que b){return a.t<b.t;}\ninline int mabs(int x){return (x>0?x:-x);}\ninline bool isr(QWQ a){\n    if (a.y<0) return (-a.y-1)%4==0;\n    if (a.y>=1582) return a.y%400==0||(a.y%4==0&&a.y%100);\n    if (a.y%4==0) return 1;\n    return 0;\n}\ninline QWQ nextday(QWQ a){ //\u5206\u7c7b\u8ba8\u8bba \n    QWQ ans=a;\n    if (a.y==1582){\n        if (a.m==12&&a.d==31) ans.y++,ans.d=1,ans.m=1;\n        else if (a.m==10&&a.d==4) ans.d=15;\n        else if (a.d==mon[a.m]) ans.d=1,ans.m++;\n        else ans.d++;\n        return ans;\n    }\n    if (a.y==-1&&a.m==12&&a.d==31) ans.y=1,ans.d=1,ans.m=1;    \n    else if (isr(a)){\n        if (a.m==12&&a.d==31) ans.y++,ans.d=1,ans.m=1;\n        else if (a.d==rmon[a.m]) ans.d=1,ans.m++;\n        else ans.d++;\n    }else{\n        if (a.m==12&&a.d==31) ans.y++,ans.d=1,ans.m=1;\n        else if (a.d==mon[a.m]) ans.d=1,ans.m++;\n        else ans.d++;\n    }\n    return ans;\n}\nsigned main(){\n    ori.y=-4713,ori.m=1,ori.d=1,cnt=-1;\n    Q=read();\n    for (int i=1;i<=Q;i++) q[i].id=i,q[i].t=read();\n    sort(q+1,q+1+Q,cmp);\n    tmp=ori;\n    for (int i=1;i<=Q;i++){\n        if (q[i].t>=2451545) break;\n        mx=i; \n    }\n    for (int i=1,now=0;i<=mx;i++){\n        for (;now!=q[i].t;now++) tmp=nextday(tmp);\n        ans[q[i].id]=tmp;\n    }\n    tmp.d=1,tmp.m=1,tmp.y=2000;\n    for (;tmp.y!=2400;) X[++cnt]=tmp,tmp=nextday(tmp);\n    for (int i=mx+1;i<=Q;i++){\n        ans[q[i].id].d=X[(q[i].t-2451545)%146097].d;\n        ans[q[i].id].m=X[(q[i].t-2451545)%146097].m;\n        ans[q[i].id].y=X[(q[i].t-2451545)%146097].y+400*((q[i].t-2451545)/146097);\n    }\n    for (int i=1;i<=Q;i++){\n        printf(\"%lld %lld %lld\",ans[i].d,ans[i].m,mabs(ans[i].y));\n        if (ans[i].y<0) printf(\" BC\");\n        puts(\"\");\n    }\n    return 0;\n}\n\n```\n\n",
        "postTime": 1605104458,
        "uid": 20309,
        "name": "Fading",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\u3011"
    },
    {
        "content": "\u5199\u7684\u662f\u8003\u573a\u505a\u6cd5\u3002\n\n\u8003\u8651\u5c06\u65f6\u95f4\u5212\u5206\u4e3a\u5982\u4e0b\u4e00\u4e9b\u6bb5\uff1a\n\n$$[0,1721423],[1721424,2299160],[2299161,2299238],[2299239,2299603],[2299604,2305447],[2305448,+\\infty]$$\n\n\u5206\u522b\u5bf9\u5e94\u516c\u5143\u524d\uff0c\u516c\u5143 1 \u5e74 ~ 1582.10.5\uff0c1582.10.14 ~ 1582 \u5e74\u672b\uff0c1583 \u5e74\uff0c1584 \u5e74 ~ 1599 \u5e74\uff0c1600 \u5e74\u4ee5\u540e\u516d\u4e2a\u65f6\u95f4\u6bb5\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5904\u7406\u51fa\u4e24\u4e2a\u8868 $d_1$ \u548c $d_2$\uff0c\u5176\u4e2d $d_{1,k}$ \u548c $d_{2,k}$ \u5206\u522b\u4ee3\u8868\u5e73\u5e74\u548c\u95f0\u5e74\u65f6\u5019\u8ddd\u79bb\u672c\u5e74 1 \u6708 1 \u65e5 $k$ \u5929\u662f\u51e0\u6708\u51e0\u65e5\u3002\n\n\u8fd8\u9700\u8981\u8bf4\u660e\u51e0\u4e2a\u5e38\u91cf\uff1a\u5112\u7565\u5386\u4e2d\u4e00\u4e2a\u6574\u56db\u5e74\u6709 $1461$ \u5929\uff0c\u683c\u91cc\u9ad8\u5229\u5386\u4e2d\u4e00\u4e2a\u6574 $400$ \u5e74\u5171\u6709 $146097$ \u5929\u3002\u5176\u4e2d\u9664\u4e86\u90a3\u4e2a\u7b2c\u4e00\u5e74\u80fd\u88ab $400$ \u6574\u9664\u7684\u4e16\u7eaa\u6709 $36525$ \u5929\u4e4b\u5916\uff0c\u522b\u7684\u4e09\u4e2a\u4e16\u7eaa\u90fd\u53ea\u6709 $36524$ \u5929\u3002\n\n\u9996\u5148\u8003\u8651\u516c\u5143\u524d\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u65f6\u5019\u6bcf\u56db\u5e74\u662f\u7b2c\u4e00\u5e74\u95f0\u3002\u90a3\u4e48\u5148\u5224\u65ad\u51fa\u8fd9\u4e00\u5e74\u662f\u5728\u54ea\u4e00\u4e2a\u56db\u5e74\u4e2d\uff0c\u7136\u540e\u770b\u770b\u8fd9\u4e00\u5e74\u662f\u95f0\u5e74\u8fd8\u662f\u5e73\u5e74\u5e76\u7b97\u51fa\u5b9e\u9645\u7684\u5e74\u6570\u4ee5\u53ca\u5230\u672c\u5e74 1 \u6708 1 \u65e5\u591a\u5c11\u5929\uff0c\u6700\u540e\u67e5\u8868\u3002\n\n\u63a5\u4e0b\u6765\u662f\u516c\u5143\u540e\u7ee7\u7eed\u5b9e\u884c\u5112\u7565\u5386\u7684\u60c5\u51b5\u3002\u5148\u6263\u9664 $1721424$ \u4ee3\u8868\u8fd9\u4e2a\u65e5\u671f\u79bb\u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5\u6709\u591a\u5c11\u5929\u3002\u63a5\u4e0b\u6765\u8ddf\u516c\u5143\u524d\u60c5\u51b5\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u6bcf\u56db\u5e74\u662f\u6700\u540e\u4e00\u5e74\u95f0\u4e86\u3002\n\n\u518d\u63a5\u4e0b\u6765\u662f 1582 \u5e74\u5b9e\u884c\u683c\u91cc\u9ad8\u5229\u5386\u540e\u7684\u60c5\u51b5\u3002\u6ce8\u610f\u5230 $d_{1,287}$ \u4e3a 10 \u6708 15 \u65e5\uff0c\u6240\u4ee5\u6263\u9664 $2299161$ \u8868\u793a\u8fd9\u4e2a\u65e5\u671f\u79bb 1582 \u5e74 10 \u6708 15 \u65e5\u6709\u591a\u5c11\u5929\uff0c\u6700\u540e\u67e5\u8868\u30021583 \u5e74\u4e00\u5e74\u53ef\u4ee5\u76f4\u63a5\u67e5\u8868\u3002\n\n\u5bf9\u4e8e 1584 \u5e74 ~ 1599 \u5e74\u7684\u60c5\u51b5\u6765\u8bf4\uff0c\u6263\u9664\u6389 1584 \u5e74 1 \u6708 1 \u65e5\u7684\u5112\u7565\u65e5\u4e4b\u540e\uff0c\u53d1\u73b0\u8fd8\u662f\u7b2c\u4e00\u5e74\u95f0\uff0c\u53ea\u4e0d\u8fc7\u8d77\u59cb\u5e74\u4efd\u53d8\u6210\u4e86 1584 \u800c\u4e0d\u662f -4713\uff0c\u5957\u516c\u5143\u524d\u7684\u505a\u6cd5\u5373\u53ef\u3002\n\n\u5bf9\u4e8e 1600 \u5e74\u53ca\u4ee5\u540e\u7684\u8bdd\uff0c\u5148\u7b97\u51fa\u8fd9\u4e2a\u5230\u5e95\u662f\u5728\u7b2c\u51e0\u4e2a\u56db\u767e\u5e74\u4e2d\uff0c\u7136\u540e\u518d\u7b97\u5230\u5e95\u662f\u5728\u7b2c\u51e0\u4e2a\u4e16\u7eaa\u4e2d\uff0c\u63a5\u4e0b\u6765\u63a8\u7b97\u51fa\u5177\u4f53\u5e74\u4efd\u548c\u8ddd\u79bb\u672c\u5e74 1 \u6708 1 \u65e5\u6709\u591a\u5c11\u5929\uff0c\u6700\u540e\u67e5\u8868\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long int ll;\nconst ll MAXN=2e5+51;\nll test,n,y,m,d;\nll day[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nll date[MAXN][2],date2[MAXN][2];\ninline ll read()\n{\n\tregister ll num=0,neg=1;\n\tregister char ch=getchar();\n\twhile(!isdigit(ch)&&ch!='-')\n\t{\n\t\tch=getchar();\n\t}\n\tif(ch=='-')\n\t{\n\t\tneg=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch))\n\t{\n\t\tnum=(num<<3)+(num<<1)+(ch-'0');\n\t\tch=getchar();\n\t}\n\treturn num*neg;\n}\ninline void calc1()\n{\n\ty=-4713+4*(n/1461),n%=1461;\n\tif(n<=365)\n\t{\n\t\treturn (void)printf(\"%lld %lld %lld BC\\n\",date2[n][1],date2[n][0],-y);\n\t}\n\ty+=(n-1)/365,n=(n-1)%365;\n\tprintf(\"%lld %lld %lld BC\\n\",date[n][1],date[n][0],-y);\n}\ninline void calc2()\n{\n\tn-=1721424,y=1+4*(n/1461),n%=1461;\n\tif(n<1095)\n\t{\n\t\ty+=n/365,n%=365;\n\t\treturn (void)printf(\"%lld %lld %lld\\n\",date[n][1],date[n][0],y);\n\t}\n\ty+=3,n-=1095;\n\tprintf(\"%lld %lld %lld\\n\",date2[n][1],date2[n][0],y);\n}\ninline void calc3()\n{\n\tif(n>2299160&&n<=2299238)\n\t{\n\t\tn-=2299161;\n\t\treturn (void)printf(\"%lld %lld 1582\\n\",date[287+n][1],date[287+n][0]);\n\t}\n\tif(n>2299238&&n<=2299603)\n\t{\n\t\tn-=2299239;\n\t\treturn (void)printf(\"%lld %lld 1583\\n\",date[n][1],date[n][0]);\n\t}\n\tif(n>2299603&&n<=2305447)\n\t{\n\t\tn-=2299604,y=1584+4*(n/1461),n%=1461;\n\t\tif(n<=365)\n\t\t{\n\t\t\treturn (void)printf(\"%lld %lld %lld\\n\",date2[n][1],date2[n][0],y);\n\t\t}\n\t\tn-=366,y+=1+n/365,n%=365;\n\t\treturn (void)printf(\"%lld %lld %lld\\n\",date[n][1],date[n][0],y);\n\t}\n\tn-=2305448,y=1600+400*(n/146097),n%=146097;\n\tif(n<=36524)\n\t{\n\t\ty+=4*(n/1461),n%=1461;\n\t\tif(n<=365)\n\t\t{\n\t\t\treturn (void)printf(\"%lld %lld %lld\\n\",date2[n][1],date2[n][0],y);\n\t\t}\n\t\ty+=(n-1)/365,n=(n-1)%365;\n\t\treturn (void)printf(\"%lld %lld %lld\\n\",date[n][1],date[n][0],y);\n\t}\n\tn-=36525,y+=100*(n/36524+1),n%=36524;\n\tif(n<=1459)\n\t{\n\t\ty+=n/365,n%=365;\n\t\treturn (void)printf(\"%lld %lld %lld\\n\",date[n][1],date[n][0],y);\n\t}\n\tn-=1460,y+=4*(n/1461+1),n%=1461;\n\tif(n<=365)\n\t{\n\t\treturn (void)printf(\"%lld %lld %lld\\n\",date2[n][1],date2[n][0],y);\n\t}\n\ty+=(n-1)/365,n=(n-1)%365;\n\tprintf(\"%lld %lld %lld\\n\",date[n][1],date[n][0],y);\n}\ninline void solve()\n{\n\tn=read();\n\tif(n<=1721423)\n\t{\n\t\treturn calc1();\n\t}\n\tif(n>1721423&&n<=2299160)\n\t{\n\t\treturn calc2();\n\t}\n\tcalc3();\n}\nint main()\n{\n\tdate[0][0]=date[0][1]=date2[0][0]=date2[0][1]=1;\n\tfor(register int i=1;i<=364;i++)\n\t{\n\t\tdate[i][0]=date[i-1][0],date[i][1]=date[i-1][1]+1;\n\t\tdate[i][1]>day[date[i][0]]?date[i][1]=1,date[i][0]++:1;\n\t}\n\tday[2]=29;\n\tfor(register int i=1;i<=365;i++)\n\t{\n\t\tdate2[i][0]=date2[i-1][0],date2[i][1]=date2[i-1][1]+1;\n\t\tdate2[i][1]>day[date2[i][0]]?date2[i][1]=1,date2[i][0]++:1;\n\t}\n\ttest=read();\n\tfor(register int i=0;i<test;i++)\n\t{\n\t\tsolve();\n\t}\n}\n```",
        "postTime": 1604882398,
        "uid": 60990,
        "name": "Karry5307",
        "ccfLevel": 7,
        "title": "CSP2020 S T1 \u5112\u7565\u65e5 \u9898\u89e3"
    },
    {
        "content": "\u7ed9\u4e00\u79cd\u8003\u573a\u4e0a\u6700\u4e0d\u7528\u8111\u5b50\u4e5f\u6700\u4e0d\u4f1a\u5199\u6302\u7684\u505a\u6cd5\u5427(\u73b0\u573a\u5199\u52a0\u8c031h\u5de6\u53f3,\u5220\u4e86\u6ca1\u6709\u5fc5\u8981\u7684\u884c\u5927\u6982\u4e5f\u5c311k\u5de6\u53f3)\n\n\u8003\u8651\u4e8c\u5206\u5e74\u4efd$mid$,\u8003\u5bdf$mid.1.1$\u8ddd\u79bb$\\text{BC}\\ 4713.1.1$\u7684\u8ddd\u79bb,\u5269\u4f59\u7684\u65e5\u671f\u6211\u4eec\u66b4\u529b\u8df3\n\n\u95ee\u9898\u8f6c\u5316\u4e3a\u4e86\u7b97$mid$\u5e74\u5230$\\text{BC}\\ 4713$\u5e74\u7684\u603b\u5929\u6570\n\n\u8fd9\u91cc\u6709\u4e00\u4e2atrick\u5c31\u662f\u6211\u4eec\u5148\u628a\u516c\u5143\u524d\u7684\u5e74\u4efd\u5f80\u524d\u5e73\u79fb\u4e00\u5e74,\u5373\u628a$\\text{BC}\\ 4713$\u5230$\\text{BC}\\ 1$\u5e74,\u5e73\u79fb\u5230$-4712$\u52300\u5e74,\u6700\u540e\u7b97\u5b8c\u5e74\u4efd\u518d\u51cf\u4e00\u4e0b,\u8fd9\u6837\u8ba1\u7b97\u4f1a\u65b9\u4fbf\u5f88\u591a\n\n\u90a3\u4e48\u5219\u6709 \u603b\u5929\u6570=$365\\times$\u5e74\u6570(\u4e5f\u5c31\u662f$mid+4712$)+\u95f0\u5e74\u6570\u91cf-$10\\times\\left[mid>1582\\right]$\n\n\u5bf9\u4e8e\u95f0\u5e74\u6570\u91cf,\u9996\u5148\u5148\u7b974\u7684\u500d\u6570\u7684\u5e74\u4efd\u6570\u91cf$\\left\\lceil\\dfrac{mid+4712}{4}\\right\\rceil$\n\n\u5bf9\u4e8e1600\u5e74\u540e\u7684\u6574\u767e\u5e74,\u8d21\u732e\u662f$\\left\\lceil\\dfrac{mid-1600}{400}\\right\\rceil-\\left\\lceil\\dfrac{mid-1600}{100}\\right\\rceil$\n\n\u90a3\u5c31\u7b97\u5b8c\u4e86,\u6ce8\u610flong long\u4ee5\u53ca\u4e8c\u5206\u8fb9\u754c\u5373\u53ef.\n\n\u590d\u6742\u5ea6$O(Q\\log\u5e74\u4efd\u503c\u57df)$\u7684\n\n\u7ed9\u4e00\u4e2a\u8003\u573a\u4e0a\u7684\u4ee3\u7801(\u5220\u4e86\u8c03\u8bd5\u8bed\u53e5)\n\n```cpp\n#include<bits/stdc++.h>\n\nusing namespace std;\ntypedef long long ll;\n\ninline int read(){\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')x=(x<<3)+(x<<1)+ch-'0',ch=getchar();\n\treturn x*f;\n}\ninline ll readll(){\n\tll x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')x=(x<<3)+(x<<1)+ch-'0',ch=getchar();\n\treturn x*f;\n}\n\nconst int dom[]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nint y=-4737,m=1,d=1;\nint isRUN(int y){\n\tif(y<=0){\n\t\ty=-y;\n\t\treturn y%4==1;\n    }\n\tif(y<=1582)return y%4==0;\n\treturn (y%400==0)||((y%4==0)&&(y%100!=0));\n}\nvoid getnxtday(){\n\td++;\n\tif(y==1582&&m==10&&d==5)d=15;\n\tif(d>dom[m]+(m==2&&isRUN(y)))m++,d=1;\n\tif(m>12)y++,m=1;\n}\nll checkday(int x){\n\tll day=1ll*(x+4712)*365;\n\tif(x>1582)day-=10;\n\tday+=1ll*(x+4712+3)/4;\n\tif(x>=1600){\n\t\tx-=1601;\n\t\tday-=(ll)x/100ll;\n\t\tday+=(ll)x/400ll;\n\t}\n\treturn day;\n}\nint main(){\n\tint T;\n\tT=read(); \n\twhile(T--){\n\t\ty=0;m=d=1;\n\t\tll n=readll();\n\t\tint l=-4712,r=1e9+1;\n\t\twhile(l<=r){\n\t\t\tint mid=(l+r)/2;\n\t\t\tif(checkday(mid)<=n){\n\t\t\t\ty=mid;\n\t\t\t\tl=mid+1;\n\t\t\t}else r=mid-1;\n\t\t}\n\t\tn-=checkday(y);\n\t\tif(y<=0)y--;\n\t\twhile(n--)getnxtday();\n\t\tprintf(\"%d %d \",d,m);\n\t\tif(y<=0)printf(\"%d BC\\n\",-y);\n\t    else printf(\"%d\\n\",y);\n\t}\n\treturn 0;\n}\n\n```\n\n",
        "postTime": 1605104875,
        "uid": 58532,
        "name": "pmt2018",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    },
    {
        "content": "\u4e2d\u89c4\u4e2d\u77e9\u7684\u6a21\u62df\u9898\uff0c\u8003\u5bdf\u4e86\u5bf9\u65f6\u95f4\u7684\u7406\u89e3\u3002\n\n\u7ed9\u7684\u5927\u6837\u4f8b\u4e5f\u4e0d\u662f\u5f88\u5f3a\uff0c\u6240\u4ee5OI\u8d5b\u5236\u4e0b\u8fd9\u9898\u53ef\u80fd\u4f1a\u4e22\u5f88\u591a\u5206\uff0c\u751a\u81f3\u72060\u3002\n\n\u6709\u8da3\u7684\u662f\uff0c**\u6bd4\u8d5b\u90a3\u5929 2020\u5e7411\u67087\u65e5 \u6b63\u597d\u8ddd\u79bb 1582\u5e7410\u670815\u65e5 16\u4e07\u5929\u6574**\uff0c~~\u7531\u6b64\u65ad\u5b9a\u51fa\u9898\u4eba\u5c31\u662f\u7f57\u9a6c\u6559\u7687\u683c\u5217\u9ad8\u5229\u5341\u4e09\u4e16\u8f6c\u4e16~~\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/clbnwv8a.png)\n\n\u6709\u4e24\u79cd\u601d\u8def\uff1a1.Day by Day \u6a21\u62df\u7136\u540e\u627e\u89c4\u5f8b\u8ba1\u7b97   2. \u4e8c\u5206\u5e74\u4efd\u518d\u5269\u4f59\u65e5\u671f\u6a21\u62df\n\n\u5199\u8d77\u6765\u4f1a\u6709\u4e00\u4e9b\u5751\uff0c\u6bd4\u5982\uff1a\n\n- \u5224\u5b9a\u95f0\u5e74\u8981\u5206 1582 \u5e74\u524d\u548c\u540e\uff0c\u89c4\u5219\u4e0d\u4e00\u6837\n- \u4e0d\u5b58\u5728\u516c\u51430\u5e74\uff0c\u90a3\u5c31\u624b\u52a8\u628a\u516c\u5143\u524d\u5f80\u540e\u504f\u79fb\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u6700\u540e\u8f93\u51fa\u7b54\u6848\u518d\u51cf\u4e00\n- \u6d88\u5931\u7684\u90a3\u5341\u5929\uff0c\u4f1a\u5e26\u6765\u4e00\u4e9b\u7279\u5224\n- \u4e8c\u5206\u91cc\u8ba1\u7b97\u5230\u67d0\u5e74\u7684\u603b\u5929\u6570\uff0c\u4f1a\u6709\u4e00\u4e9b\u7ec6\u8282\uff0c\u4e5f\u662f\u548c\u95f0\u5e74\u53ca\u6d88\u5931\u768410\u5929\u6709\u5173\n- \u5929\u6570\u8981\u7528`long long`\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(Q(\\log 10^9+12))$\uff0c\u5177\u4f53\u5b9e\u73b0\u5982\u4e0b\uff1a\n\n```cpp\nint a[13] = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};\nLL cal(LL x) {\n    int sb = -4712;\n    if (x < sb) return 0;\n    LL res = (x - sb + 1) * 365;\n    if (x < 1582) {\n        res += (x - sb) / 4 + 1;\n    } else {\n        res -= 10;\n        res += (1581 - sb) / 4 + 1;\n        res += (x - 1580) / 4 - (x - 1500) / 100 + (x - 1200) / 400;\n    }\n    return res;\n}\nbool pd(int x) {\n    if (x > 1582) {\n        return x % 4 == 0 && x % 100 != 0 || x % 400 == 0;\n    } else {\n        return x % 4 == 0;\n    }\n}\nint main() {\n    int _;\n    scanf(\"%d\", &_);\n    while (_--) {\n        LL n;\n        scanf(\"%lld\", &n);\n        n++;\n        int l = -4712, r = 1e9 + 5;\n        while (l < r) {\n            int mid = l + r >> 1;\n            if (cal(mid) >= n) {\n                r = mid;\n            } else {\n                l = mid + 1;\n            }\n        }\n        n -= cal(l - 1);\n        a[2] = 28 + pd(l);\n        a[10] = l == 1582 ? 21 : 31;\n        int m;\n        for (int i = 1; i <= 12; i++) {\n            if (n > a[i]) {\n                n -= a[i];\n            } else {\n                m = i;\n                break;\n            }\n        }\n        if (l == 1582 && m == 10) {\n            if (n >= 5) n += 10;\n            printf(\"%lld %d %d\\n\", n, m, l);\n        } else {\n            if (l > 0)\n                printf(\"%lld %d %d\\n\", n, m, l);\n            else\n                printf(\"%lld %d %d BC\\n\", n, m, -l + 1);\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1605034407,
        "uid": 54357,
        "name": "OMG_wc",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    },
    {
        "content": "## 0.\u9898\u5916\u8bdd\uff1a\n\nCSP-S T1 \u653e\u8fd9\u4e2a\u771f\u7684\u597d\u5417\u3002\u3002\u3002T2\u90fd\u6bd4\u8fd9\u4e2a\u7b80\u5355\n\n## 1. $10$ \u5206\u505a\u6cd5\n\n\u7531\u4e8e\u7b2c\u4e00\u4e2a\u70b9 $r_i\\leq 365$ \uff0c\u6240\u4ee5\u5224\u65ad\u51e0\u6708\u51e0\u65e5\u5c31\u597d\u3002\n\n\u7b49\u7b49\uff0c\u597d\u50cf\u6ca1\u90a3\u4e48\u7b80\u5355\uff1f\n\n\u6709\u7684\u540c\u5b66\u53d1\u73b0\u4e86\u4e00\u70b9\uff1a\u4e00\u6708\u4e00\u65e5\u662f\u7b2c $0$ \u5929\uff0c\u90a3\u4e48\u7b2c $365$ \u5929\u4e0d\u5c31\u5230\u540e\u4e00\u5e74\u53bb\u4e86\u5417\uff1f\n\n\u5176\u5b9e\u516c\u5143\u524d4713\u5e74\u662f\u4e00\u4e2a\u95f0\u5e74\uff0c\u56e0\u4e3a $4713\\equiv 1\\ \\ \\ (\\text{mod}\\ 4)$ \uff0c\u800c\u516c\u5143\u524d1\u5e74\u4e3a\u95f0\u5e74\u3002\n\n\u6240\u4ee5\u53ea\u8981\u679a\u4e3e\u5224\u65ad\u6708\u4efd\u7684\u524d\u7f00\u548c\u662f\u5426\u8d85\u8fc7\u4e86 $r_i$ \u5373\u53ef\u3002\n\n```\n\tmonth[2]++;\n\tint qwq=0,mth;\n\tfor(int i=1;i<=12;i++){\n\t\tqwq+=month[i];\n\t\tif(qwq>=k){\n\t\t\tmth=i;\n\t\t\tk-=(qwq-month[i]);\n\t\t\tprintf(\"%lld %lld 4713 BC\\n\",k,mth);\n\t\t\tbreak;\n\t\t}\n\t}\n\tmonth[2]--;\n```\n\n## 2. $40$ \u5206\u505a\u6cd5\n\n\u9996\u5148\uff0c\u516c\u51431582\u5e7410\u67084\u65e5\u662f\u7b2c $2299160$ \u5929\uff0c\u6240\u4ee5\u53ea\u5904\u7406\u9002\u7528\u5112\u7565\u5386\u7684\u5c31\u53ef\u4ee5\u62ff\u5230 $40$ \u5206\u4e86\u3002\n\n\u90a3\u5982\u4f55\u5904\u7406\u5112\u7565\u5386\u5462\uff1f\n\n\u6ce8\u610f\u5230\uff0c\u5112\u7565\u5386 $4$ \u5e74\u4e00\u5faa\u73af\uff0c\u6240\u4ee5\u53ef\u4ee5\u8ba9 $r_i$ \u5bf9 $365\\times 4+1$ \u53d6\u4f59\uff0c\u6c42\u51fa\u5927\u81f4\u5e74\u4efd\uff0c\u518d\u4e00\u5e74\u4e00\u5e74\u5224\u65ad\u5728\u54ea\u4e00\u5e74\u3002\n\n\u7136\u540e\u518d\u5411\u4e0a\u9762\u4e00\u6837\u5224\u65ad\u6708\u3001\u65e5\u5c31\u597d\u4e86\u3002\n```\nvoid count_date(int year,int k,int r){\n\tif(r==1)month[2]++;\n\tint qwq=0,mth;\n\tfor(int i=1;i<=12;i++){\n\t\tqwq+=month[i];\n\t\tif(qwq>=k){\n\t\t\tmth=i;\n\t\t\tk-=(qwq-month[i]);\n\t\t\tif(year-4713<0)printf(\"%lld %lld %lld BC\\n\",k,mth,4713-year);\n\t\t\telse printf(\"%lld %lld %lld\\n\",k,mth,year-4712);\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(r==1)month[2]--;\n}\n```\n\n\n```\n\t\tscanf(\"%lld\",&n);\n\t\t\tint k=n%(365*4+1),year=n/(365*4+1)*4,r=1;\n\t\t\tif(k>=366)k-=365,year++,r=0;\n\t\t\tif(k>=366)k-=365,year++;\n\t\t\tif(k>=366)k-=365,year++;\n\t\t\tif(r==1)k++;\n\t\t\tcount_date(year,k,r);\n```\n\n## 3. $100$ \u5206\u505a\u6cd5\n\n\u6ca1\u9519\uff0c\u5c31\u662f $100$ \u5206\u505a\u6cd5\u3002\n\n\u9996\u5148\uff0c\u5bf9\u4e8e\u683c\u91cc\u9ad8\u5229\u5386\uff0c\u6709\u4e2a~~\u5f88\u6ca1\u826f\u5fc3~~\u7684\u5730\u65b9\uff1a\u5f53\u5e74\u4efd\u662f $400$ \u7684\u500d\u6570\uff0c\u6216\u65e5\u671f\u5e74\u4efd\u662f $4$ \u7684\u500d\u6570\u4f46\u4e0d\u662f $100$ \u7684\u500d\u6570\u65f6\uff0c\u8be5\u5e74\u4e3a\u95f0\u5e74\u3002\n\n\u6240\u4ee5\uff0c\u53d8\u6210\u4e86 $400$ \u4e00\u5468\u671f\u3002\u600e\u4e48\u529e\uff1f\n\n\u5176\u5b9e\u548c $40$ \u5206\u505a\u6cd5\u4e00\u6837\u5904\u7406\u5c31\u884c\u4e86\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u628a\u90a3\u51e0\u4e2a``if``\u8bed\u53e5\u5199\u4e2a\u5faa\u73af\uff0c\u9053\u7406\u662f\u4e00\u6837\u7684\u3002\n\n\u6ce8\u610f\uff0c\u5faa\u73af\u91cc\u8fd8\u662f\u8981\u5224\u65ad\u95f0\u5e74\u3002\n\n\u8fd8\u6709\uff0c\u7531\u4e8e\u4ee5\u516c\u51431600\u5e741\u67081\u65e5\u4e3a\u539f\u70b9\u5199\u8d77\u6765\u4f1a\u6bd4\u8f83\u8212\u670d\uff08\u5468\u671f\u8d77\u70b9\uff09\uff0c\u6240\u4ee5\u53ef\u4ee5\u4e3a\u4e86\u51cf\u5c11\u4ee3\u7801\u91cf\uff0c\u7279\u5224\u4e00\u4e0b\u516c\u51431582\u5e74\u548c\u516c\u51431600\u5e74\u4e4b\u95f4\u7684\u90a3\u51e0\u5e74\u3002\n\n\u4e0b\u9762\u662f\u5b8c\u6574\u7684\u4ee3\u7801\uff1a\n\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint q,n,rsum,month[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nvoid count_date(int year,int k,int r){\n\tif(r==1)month[2]++;\n\tint qwq=0,mth;\n\tfor(int i=1;i<=12;i++){\n\t\tqwq+=month[i];\n\t\tif(qwq>=k){\n\t\t\tmth=i;\n\t\t\tk-=(qwq-month[i]);\n\t\t\tif(year-4713<0)printf(\"%lld %lld %lld BC\\n\",k,mth,4713-year);\n\t\t\telse printf(\"%lld %lld %lld\\n\",k,mth,year-4712);\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(r==1)month[2]--;\n}//\u5112\u7565\u5386\u65f6\u4ee3\u7684count_date\nvoid count_date2(int year,int k,int r){\n\tif(r==1)month[2]++;\n\tint qwq=0,mth,f=0;\n\tfor(int i=1;i<=12;i++){\n\t\tqwq+=month[i];\n\t\tif(qwq>=k){\n\t\t\tmth=i;\n\t\t\tk-=(qwq-month[i]);\n\t\t\tprintf(\"%lld %lld %lld\\n\",k,mth,year+1600);\n\t\t\tf=1;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(f==0)printf(\"1 1 %lld\\n\",year+1601);\n\tif(r==1)month[2]--;\n}//\u683c\u91cc\u9ad8\u5229\u5386\u65f6\u4ee3\u7684count_date\nsigned main(){\n\t//freopen(\"julian.in\",\"r\",stdin);\n\t//freopen(\"julian.out\",\"w\",stdout);\n\tfor(int i=1;i<=400;i++)\n\t\tif((i%4==0&&i%100!=0)||i%400==0)rsum++;\n\tscanf(\"%lld\",&q);\n\twhile(q--){\n\t\tscanf(\"%lld\",&n);\n\t\tif(n<=2299160){\n\t\t\tint k=n%(365*4+1),year=n/(365*4+1)*4,r=1;\n\t\t\tif(k>=366)k-=365,year++,r=0;\n\t\t\tif(k>=366)k-=365,year++;\n\t\t\tif(k>=366)k-=365,year++;\n\t\t\tif(r==1)k++;\n\t\t\tcount_date(year,k,r);\n\t\t}//\u5112\u7565\u5386\u65f6\u4ee3\n\t\telse {\n\t\t\tn+=10;//\u5b8c\u7f8e\u8df3\u8fc7\u4e0d\u5b58\u5728\u7684\u90a3\u51e0\u5929\n\t\t\tif(n<=2305457){\n\t\t\t\tint k=n%(365*4+1),year=n/(365*4+1)*4,r=1;\n\t\t\t\tif(k>=366)k-=365,year++,r=0;\n\t\t\t\tif(k>=366)k-=365,year++;\n\t\t\t\tif(k>=366)k-=365,year++;\n\t\t\t\tif(r==1)k++;\n\t\t\t\tcount_date(year,k,r);\n\t\t\t}//\u7279\u5224\u7684\u90a3\u51e0\u5e74\n\t\t\telse{\n\t\t\t\tn-=2305458;\n\t\t\t\tint k=n%(365*400+rsum),year=n/(365*400+rsum)*400,r=1;\n\t\t\t\tif(k>=366)k-=365,year++,r=0;\n\t\t\t\tfor(int i=2;i<=399;i++){\n\t\t\t\t\tif(i%4==0&&i%100!=0){\n\t\t\t\t\t\tif(k>=367)k-=366,year++,r=1;\n\t\t\t\t\t\telse break;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(k>=366)k-=365,year++,r=0;\n\t\t\t\t\t\telse break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(r==1)k++;\n\t\t\t\tcount_date2(year,k,r);\n\t\t\t}//\u683c\u91cc\u9ad8\u5229\u5386\u65f6\u4ee3\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u8fd9\u770b\u8d77\u6765\u66b4\u529b\u7684\u505a\u6cd5\u5b9e\u9645\u4e0a\u662f $O(q)$ \u7684~~\u4e0d\u8fc7\u5e38\u6570\u6bd4\u8f83\u5927~~\u3002",
        "postTime": 1605073419,
        "uid": 104662,
        "name": "PrincessQi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    },
    {
        "content": "\u840c\u65b0\u7b2c\u4e00\u6b21\u5199\u9898\u89e3\uff0c\u6709\u5199\u5f97\u4e0d\u597d\u7684\u5730\u65b9\u8bf7\u591a\u6307\u6559~~   \n\u4eca\u5e74CSP\uff0c\u4e24\u70b9\u534a\u770b\u9898\uff0c\u6574\u4e2a\u4eba\u90fd\u50bb\u4e86\uff1a\u7b2c\u4e00\u9898\u5c31\u662f\u5927\u6a21\u62df\uff1f\uff01  \n\u8bfb\u4e86\u5341\u5206\u949f\u624d\u660e\u767d\u9898\u610f\uff0c\u5176\u5b9e\u6a21\u62df\u8d77\u6765\u4e0d\u662f\u5f88\u590d\u6742\uff0c\u53ea\u662f\u5751\u70b9\u5f88\u591a...\n\n## \u9898\u610f\u7406\u89e3\uff1a\n\u5efa\u7acb\u65f6\u95f4\u8f74\uff0c\u4ee5\u516c\u5143\u524d4713\u5e741\u67081\u65e5\u4e3a\u539f\u70b9\uff0c\u7ed9\u5b9aq\u4e2a\u5750\u6807\uff0c\u6c42\u5750\u6807\u5bf9\u5e94\u7684\u516c\u5143\u65f6\u95f4\u3002\n\n## \u6613\u9519\u70b9\uff1a\n1.\u516c\u5143\u96f6\u5e74\u4e0d\u5b58\u5728\u3002\u5f88\u91cd\u8981\uff0c\u5728\u5224\u95f0\u5e74\u65f6\u6709\u7528\u3002   \n2.\u95f0\u5e74\u7684\u5224\u65ad\uff1a\u6709\u4e09\u79cd\u5224\u65ad\u65b9\u5f0f\uff1a \n\n    1\uff09\u516c\u5143\u524d1,5,9,...4\u7684\u500d\u6570\u52a0\u4e00\u4e3a\u95f0\u5e74\u3002  \n    2\uff09\u516c\u5143\u540e\u4e141582\u5e74\u524d\uff0c4\u7684\u500d\u6570\u4e3a\u95f0\u5e74\uff08\u6ca1\u6709\u516c\u5143\u96f6\u5e74\uff01\uff09\u3002   \n    3\uff091582\u5e74\u540e\uff0c4\u7684\u500d\u6570\u4e14\u4e0d\u662f100\u7684\u500d\u6570\uff0c\u6216400\u7684\u500d\u6570\u4e3a\u95f0\u5e74\u3002\n3.1582.10.5-10.14\u4e0d\u5b58\u5728\u3002   \n4.\u8f93\u5165\u8f93\u51fa\u6ce8\u610f\uff0c\u67d0\u65e5\u67d0\u6708\u67d0\u5e74\uff0c\u516c\u5143\u524d\u52a0BC\u3002\n\n\u5982\u679c\u76f4\u63a5\u5927\u6a21\u62df\u7684\u8bdd\uff0c\u5927\u6982\u662f\u8bfb\u5165\u5750\u6807\uff0c\u7136\u540e\u4e00\u6bb5\u4e00\u6bb5\u76f4\u63a5\u6a21\u62df\u3002\u4f46\u8fd9\u6837\u4e0d\u4ec5\u62d6\u6162\u901f\u5ea6\uff0c\u4e14\u7801\u91cf\u5de8\u5927\u8ba9\u4eba\u79c3\u5934\u3002\u800c\u672c\u9898\u7279\u5f81\u660e\u663e\uff1a\u516c\u5143\u524d\uff0c\u516c\u5143\u540e\u4e141582\u5e74\u524d\u548c\u516c\u51431582\u5e74\u540e\u662f\u660e\u663e\u7684\u4e09\u6bb5\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728\u8bfb\u5165\u7684\u8fc7\u7a0b\u4e2d\u5148\u5c06\u65e5\u671f\u5206\u5728\u67d0\u4e2a\u65f6\u95f4\u6bb5\u5185\uff0c\u6709\u6548\u51cf\u5c11\u4e86\u4ee3\u7801\u91cf\u3002\n\n```scanf(\"%lld\",&n);//\u8bfb\u5165n\nint y=-4713,d=1,m=1;//\u5e74\u6708\u65e5\u521d\u59cb\u5316\nif(n>=1721424)y=1,n-=1721424;// 1721424\u662f\u516c\u5143\u524d\u7684\u5929\u6570\uff0c\u5224\u65ad\u5e74\u4efd\u5c5e\u4e8e\u54ea\u4e00\u6bb5\n```\n\n## \u5224\u65ad\u95f0\u5e74\u90e8\u5206\uff1a\n```bool run(int year,int mon){//\u8fd9\u91cc\u7528\u4e86\u5e74\u6708\u4e24\u4e2a\u53c2\u6570\u5224\u65ad\u662f\u5426\u662f\u95f0\u5e74\uff0c\u7528\u5904\u5728\u4e0b\u6587~\n    if(mon!=2)return 0; \n    if(year<0){//\u516c\u5143\u524d\u7684\u60c5\u51b5\n        year=-year-1;//\u53d6\u6b63\u540e-1\n        if(year%4==0||year==0)return 1;\n\t\treturn 0;\n\t\t}\n\telse{\n\t\tif(year<1582){//\u516c\u5143\u540e\uff0c1582\u5e74\u524d\u7684\u60c5\u51b5\n\t\t\tif(year%4==0)return 1;\n\t\t\treturn 0;\n\t\t}\n\t\telse{//1582\u5e74\u540e\t\t\n\t\t\tif((year%4==0&&year%100!=0)||year%400==0)return 1;\n\t\t\treturn 0;\n\t\t\t}\n\t\t}\n}\t//\u8fd9\u4e48\u5199\u770b\u7740\u4e11\uff0c\u800c\u4e14\u9ebb\u70e6\uff0c\u4e0d\u8fc7\u597d\u5728\u7b80\u5355\u6613\u61c2\n```\n## \u4e3b\u51fd\u6570\uff1a\n```const int month[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};//\u4e00\u4e09\u4e94\u4e03\u516b\u5341\u814a~\nint main(){\n\tcin>>q;\n\twhile(q--){\n\t\tbool flag=0;\n\t\tscanf(\"%lld\",&n);\n\t\tint y=-4713,d=1,m=1;\n\t\tif(n>=1721424)y=1,n-=1721424;\n\t\twhile(n>0){\n\t\t\tif(d>month[m]+run(y,m))d=d-month[m]-run(y,m),m++;//\u65e5\u7684\u8fdb\u4f4d\n\t\t\tif(m>12)m=1,y++;//\u6708\u7684\u8fdb\u4f4d\n\t\t\tif(n>=365+run(y,2)){//\u95f0\u5e74\u5219\u4e3a366\u5929\n\t\t\t\tn=n-365-run(y,2);\n\t\t\t\ty++;\n\t\t\t\tcontinue;//\u6ce8\u610f\u8fd9\u91cc\uff0c\u5f53n\u5927\u4e8e\u4e00\u5e74\u5c31\u4e0d\u4f1a\u589e\u52a0\u6708\u4efd\u548c\u65e5\u671f\n\t\t\t}\n\t\t\tif(n>month[m]+run(y,m)){//\u5224\u65ad\u662f\u5426\u662f\u95f0\u6708\n\t\t\t\tn=n-month[m]-run(y,m);\n\t\t\t\tm++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse{\n\t\t\t\td+=n;//\u5c0f\u4e8e\u4e00\u6708\uff0c\u76f4\u63a5\u52a0\u5728\u5929\u6570\u4e0a\n\t\t\t\tn=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(y>1582)flag=1;\n\t\tif(y==1582&&m>10)flag=1;\n\t\tif(y==1582&&m==10&&d>4)flag=1;//\u82e5\u7b54\u6848\u57281582.10.4\u4e4b\u540e\uff0c\u76f4\u63a5\u52a0\u4e0a10\u5929\n\t\tif(flag)d+=10;\n\t\tif(d>month[m]+run(y,m))d=d-month[m]-run(y,m),m++;//\u8fdb\u4f4d\n\t\tif(m>12)m=1,y++;\n\t\tif(y>0)printf(\"%d %d %d\\n\",d,m,y);//\u516c\u5143\u524d\u8fd8\u662f\u516c\u5143\u540e\uff1f\u8f93\u51fa\n\t\telse printf(\"%d %d %d BC\\n\",d,m,-y);\n\t}\n}\n```\n\n## \u4f18\u5316\uff1a\n\u5f53\u60a8\u770b\u5230\u8fd9\u91cc\u7684\u65f6\u5019\uff0c\u8fd9\u9053\u9898\u57fa\u672c\u5c31\u505a\u5b8c\u4e86\u3002  \n\u53ef\u6211\u4eec\u770b\u4e00\u4e0b\u6570\u636e\uff1aq\u4e3a1e5\uff0c\u7b54\u6848\u5e74\u4efd\u4e0d\u8d85\u8fc71e9...  \n\u4e0d\u8981\u614c\uff0c\u8fd9\u4ee3\u8868\u6211\u4eec\u9700\u8981\u4e00\u5b9a\u7684\u4f18\u5316\u3002  \n\u6709\u4e24\u79cd\u4f18\u5316\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u8bfb\u5165\u6240\u6709\u7684\u5929\u6570\uff0c\u79bb\u7ebf\u6392\u5e8f\u540e\u6a21\u62df\u3002\uff08\u56e0\u4e3a\u592a\u83dc\u8003\u573a\u4e0a\u6ca1\u60f3\u5230\u8fd9\u4e2a\uff09  \n\u53e6\u4e00\u79cd\u662f\u5feb\u901f\u786e\u8ba4\u5927\u6982\u65e5\u671f\uff0c\u518d\u9010\u5e74\u6a21\u62df\u3002  \n\u65e5\u671f\u7684\u786e\u5b9a\u548c\u95f0\u5e74\u6709\u5173\u3002\u89c2\u5bdf\u95f0\u5e74\u7684\u5224\u5b9a\uff0c\u6211\u4eec\u53d1\u73b0\uff1a\u53ef\u4ee5\u4ee5400\u5e74\u4e3a\u4e00\u4e2a\u5468\u671f\u3002  \n\u57281582\u5e74\u4e4b\u524d\uff0c\u6bcf\u56db\u5e74\u4e00\u4e2a\u95f0\u5e74\uff0c400\u5e74\u6709146100\u5929\u3002  \n\u57281582\u5e74\u4e4b\u540e\uff0c400\u5e74\u670997\u4e2a\u95f0\u5e74\uff0c\u6709146097\u5929\u3002  \n\u6240\u4ee5...\n\n\tif(n>146097&&y>1582){\n\t\t\ty=y+n/146097*400;             //\u76f4\u63a5\u9664\u52a0\u53d6\u6a21\uff0c\u8dd1\u5f97\u5feb~\n\t\t\tn%=146097;\n\t\t}\n\tif(n>146100&&y+400<1582){\t//\u4fdd\u8bc1\u56db\u767e\u5e74\u540e\u4e5f\u57281582\u5e74\u524d\n\t\t\ty+=400;\n\t\t\tn-=146100;\n\t\t}\n\u8fd9\u6837\u8dd1\u5f97\u4e5f\u4e0d\u4f1a\u98de\u5feb\uff0c\u4f46\u8d77\u7801\u6700\u6162300ms\u4e5f\u80fd\u8fc7\u4e86\u3002\n## \u603b\u7ed3\uff1a\n\u603b\u7684\u6765\u8bf4\uff0c\u8fd9\u662f\u4e00\u9053\u6a21\u62df\u597d\u9898\uff0c\u8ba9\u6211\u5b66\u5230\u4e86\u5f88\u591a\u3002  \n\u91cd\u770b\u672c\u9898\uff0c\u7406\u89e3\u4e86\u610f\u4e49\u4e0d\u660e\u7684\u9898\u9762\u4e4b\u540e\uff0c\u601d\u8def\u4e5f\u4e0d\u590d\u6742\uff08\u6a21\u62df\uff09\uff0c\u4ee3\u7801\u5e76\u4e0d\u4f1a\u592a\u957f\uff0866\u884c\uff09\u3002  \n\u4f46\u6570\u4e0d\u80dc\u6570\u7684\u5751\u70b9\uff0c\u7279\u6b8a\u7684\u6570\u636e\u548c\u79bb\u5947\u7684\u7a0b\u5e8f\u8f93\u51fa\u8ba9\u8bb8\u591aOIer\u4eb2\u5207\u7684\u8be2\u95ee\u51fa\u9898\u4eba\u4f4f\u5740\uff08\u96fe  \n\u5728\u8003\u573a\u5927\u6982\u7528\u4e86\u4e8c\u5341\u5206\u949f\u8bfb\u9898\u5206\u6790\uff0c\u5199\u4ee3\u7801\u7528\u4e86\u56db\u5341\u5206\u949f\u5de6\u53f3\uff0c\u5bf9\u62cd\u4e86\u4e8c\u5341\u5206\u949f\uff08\uff1f\uff09  \n\u601d\u8def\u6e05\u6670\u7684\u8bdd\u8fd8\u662f\u597d\u89e3\u51b3\u7684~  \n\u6536\u83b7\uff1a1.\u4e00\u5b9a\u8981\u8ba4\u771f\u8bfb\u9898\uff0c\u5206\u6790\u9898\u9762\uff0c\u627e\u53ef\u80fd\u7684\u5751\u70b9\uff01  \n2.\u5408\u7406\u5b89\u6392\u7a0b\u5e8f\u6267\u884c\u987a\u5e8f\uff0c\u51cf\u5c11\u5197\u6742\u64cd\u4f5c\u3002  \n3\u5148\u5199\u66b4\u529b\uff0c\u518d\u52a0\u9002\u5b9c\u4e14\u4e0d\u5f71\u54cd\u6b63\u786e\u6027\u7684\u4f18\u5316\u3002  \n4.\u4e00\u5b9a\u6ce8\u610f\u6570\u636e\u8303\u56f4\uff01\uff08\u6ca1\u5f00long long\u6263\u4e8610\u5206QAQ\uff09\n\n## \u8c22\u8c22\u670b\u53cb\u4eec\uff0cNOIp\u518d\u89c1\uff01",
        "postTime": 1605057093,
        "uid": 132300,
        "name": "zwzww",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    },
    {
        "content": "\u5199\u7bc7\u9898\u89e3\u6765\u7eaa\u5ff5\u4e00\u4e0b\u7206\u70b8\u7684 CSP2020\u3002\n\n\u6211\u8003\u573a\u5207\u6389\u8fd9\u9898\u5927\u6982\u7528\u4e86\u534a\u4e2a\u5c0f\u65f6\uff0c\u867d\u7136\u4e0d\u7b97\u5feb\u4f46\u4e5f\u4e0d\u662f\u5f88\u6162\uff0c\u6240\u4ee5\u5199\u4e00\u4e0b\u8003\u573a\u601d\u8def\u3002\n\n\u8fd9\u4e2a\u4e1c\u897f\u6211\u662f\u5206\u4e09\u6bb5\u7b97\u7684\uff1a\u516c\u5143\u524d\u30011582 \u5e74 10 \u6708 4 \u65e5\u524d\u30011582 \u5e74 10 \u6708 15 \u65e5\u540e\u3002\n\n\u6bcf\u4e00\u6bb5\u5185\u90fd\u662f\u5148\u786e\u5b9a\u5e74\uff0c\u7136\u540e\u786e\u5b9a\u6708\uff0c\u6700\u540e\u786e\u5b9a\u65e5\u3002\n\n\u4e3a\u4e86\u81ea\u5df1\u601d\u8003\u65b9\u4fbf\uff0c\u6211\u628a $r$ \u52a0\u4e86 $1$\uff0c\u53d8\u4e3a\u4ece\u516c\u5143\u524d 4714 \u5e74 12 \u6708 31 \u65e5\u5f00\u59cb\u3002\u4e0b\u6587\u7684 $r$ \u4e5f\u662f\u52a0 $1$ \u4e4b\u540e\u7684\u3002\n\n\u9996\u5148\u662f\u7b2c\u4e00\u6bb5\u3002\u901a\u8fc7\u4e00\u4e9b\u5c0f\u5b66\u5965\u6570\u77e5\u8bc6\u53ef\u4ee5\u7b97\u51fa\u516c\u5143\u524d 4714 \u5e74 12 \u6708 31 \u65e5\u5230\u516c\u5143\u524d 1 \u5e74 12 \u6708 31 \u65e5\u7684\u5929\u6570\u662f $1721424$ \u5929\u3002\u56e0\u4e3a\u5e74\u6570\u5f88\u5c11\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6c42\u51fa\u6bcf\u5e74\u7684\u5929\u6570\u7136\u540e\u6c42\u524d\u7f00\u548c\uff0c\u8fd9\u6837\u5b50\u5c31\u53ef\u4ee5\u76f4\u63a5\u4e8c\u5206\u51fa\u5e74\u4efd\u4e86\u3002\u6c42\u51fa\u5e74\u4efd\u540e\uff0c\u6211\u4eec\u628a $r$ \u51cf\u6389\u5230\u524d\u4e00\u5e74 12 \u6708 31 \u65e5\u7684\u5929\u6570\uff0c\u518d\u628a\u6bcf\u4e2a\u6708\u7684\u5929\u6570\u6c42\u51fa\u6765\u5e76\u6c42\u524d\u7f00\u548c\uff0c\u7136\u540e\u76f4\u63a5\u679a\u4e3e\u51fa\u6708\u4efd\u5373\u53ef\u3002\u8fd9\u6837\u5b50\u518d\u51cf\u6389\u524d\u4e00\u5e74 12 \u6708 31 \u65e5\u5230\u524d\u4e00\u6708\u6700\u540e\u4e00\u5929\u7684\u5929\u6570\u540e\u5c31\u53ef\u4ee5\u5f97\u5230\u65e5\u4e86\u3002\uff08\u53ef\u80fd\u5199\u5f97\u6709\u70b9\u7ed5\uff0c\u8bf7\u89c1\u8c05\u3002\uff09\n\n\u5982\u679c\u4e0d\u5728\u7b2c\u4e00\u6bb5\u5185\uff0c\u5c31\u628a $r$ \u51cf\u6389 $1721424$\uff0c\u53d8\u6210\u4ece\u516c\u5143\u524d 1 \u5e74 12 \u6708 31 \u65e5\u5f00\u59cb\u7b97\u3002\n\n\u7b2c\u4e8c\u6bb5\u662f\u7c7b\u4f3c\u7684\uff0c\u901a\u8fc7\u4e00\u4e9b\u5c0f\u5b66\u5965\u6570\u77e5\u8bc6\u7b97\u51fa\u516c\u5143\u524d 1 \u5e74 12 \u6708 31 \u65e5\u5230 1582 \u5e74 10 \u6708 4 \u65e5\u7684\u65e5\u671f\u662f $577737$ \u5929\u540e\u5957\u7528\u7b2c\u4e00\u6bb5\u7684\u505a\u6cd5\u5373\u53ef\u3002\n\n\u5982\u679c\u4e5f\u4e0d\u5728\u7b2c\u4e8c\u6bb5\u5185\uff0c\u90a3\u5c31\u53ea\u80fd\u5728\u7b2c\u4e09\u6bb5\u5185\u4e86\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u76f4\u63a5\u7ed9 $r$ \u52a0\u4e0a $10$\uff0c\u5f3a\u884c\u628a\u4e0d\u89c1\u7684 $10$ \u5929\u8865\u56de\u6765\u3002\u6cbf\u7528\u4e0a\u9762\u7684\u601d\u8def\uff0c\u6211\u4eec\u8fd8\u662f\u4e8c\u5206\u5e74\u4efd\u3001\u679a\u4e3e\u6708\u4efd\uff0c\u4e3b\u8981\u95ee\u9898\u53d8\u6210\u4e86\u6c42\u516c\u5143\u524d 1 \u5e74 12 \u6708 31 \u65e5\u5230\u516c\u5143 $x$ \u5e74 12 \u6708 31 \u65e5\u7684\u5929\u6570\u3002\n\n\u8fd9\u4e2a\u5176\u5b9e\u5f88\u597d\u7b97\uff0c\u6211\u4eec\u53ea\u8981\u7528 $365x$ \u52a0\u4e0a\u95f0\u5e74\u4e2a\u6570\u5373\u53ef\u3002\u95f0\u5e74\u4e2a\u6570\u53ef\u4ee5\u5c0f\u5c0f\u5730\u5bb9\u65a5\u4e00\u4e0b\uff0c\u5373\u4e3a $\\lfloor \\frac{x}{4}\\rfloor-\\lfloor\\frac{x}{100}\\rfloor+\\lfloor\\frac{x}{400}\\rfloor$\uff1f\u4f46\u662f\u8fd9\u5b9e\u9645\u4e0a\u5c11\u7b97\u4e86\u4e00\u4e9b\uff0c\u56e0\u4e3a\u516c\u5143 1582 \u5e74 10 \u6708 4 \u65e5\u524d\u662f\u5112\u7565\u5386\uff0c\u6240\u4ee5\u516c\u5143 100 \u5e74\u3001200 \u5e74\u3001300 \u5e74\u3001500 \u5e74\u3001600 \u5e74\u3001700 \u5e74\u3001900 \u5e74\u30011000 \u5e74\u30011100 \u5e74\u30011300 \u5e74\u30011400 \u5e74\u30011500 \u5e74\u8fd9 12 \u5e74\u4e5f\u662f\u95f0\u5e74\uff0c\u6240\u4ee5\u4e0a\u9762\u90a3\u4e2a\u7ed3\u679c\u5b9e\u9645\u4e0a\u8fd8\u8981\u52a0\u4e0a $12$\u3002\n\n\u7136\u540e\u5c31\u53ea\u5269\u4e0b\u7801\u4e86\uff0c\u611f\u89c9\u4e5f\u6ca1\u5565\u7ec6\u8282\uff0c\u6ce8\u610f\u4e00\u4e0b\u9898\u76ee\u91cc\u63d0\u9192\u7684\u4e1c\u897f\u5c31\u597d\u4e86\u3002\n\n\u56e0\u4e3a $r$ \u662f $10^{12}$ \u7ea7\u522b\u7684\uff0c\u6240\u4ee5\u8981\u5f00 `long long`\u3002\n\n\u4e0b\u9762\u662f\u8003\u573a\u4ee3\u7801\uff0c\u5199\u5f97\u6bd4\u8f83\u4e11\uff0c\u867d\u7136\u770b\u7740\u6bd4\u8f83\u957f\u4f46\u4e8b\u5b9e\u4e0a\u6709\u8bb8\u591a\u662f\u76f4\u63a5\u590d\u5236\u7c98\u8d34\u7684\u3002\n\n```cpp\n// ====================================\n//   author: M_sea\n//   website: https://m-sea-blog.com/\n// ====================================\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n\nll read() {\n\tll X=0,w=1; char c=getchar();\n\twhile (c<'0'||c>'9') { if (c=='-') w=-1; c=getchar(); }\n\twhile (c>='0'&&c<='9') X=X*10+c-'0',c=getchar();\n\treturn X*w;\n}\n\nnamespace task1 { // BC\n\tint f[5000],g[20];\n\tvoid init() {\n\t\tfor (int i=1;i<=4713;++i) f[i]=365+(i%4==1);\n\t\tfor (int i=1;i<=4713;++i) f[i]+=f[i-1];\n\t}\n\tvoid main(ll r) {\n\t\tint p=lower_bound(f+1,f+4714,r)-f;\n\t\tint y=4714-p,m,d; r-=f[p-1];\n\t\tg[1]=31,g[2]=28+(y%4==1),g[3]=31,g[4]=30,g[5]=31,g[6]=30,g[7]=31,g[8]=31,g[9]=30,g[10]=31,g[11]=30,g[12]=31;\n\t\tfor (int i=1;i<=12;++i) g[i]+=g[i-1];\n\t\tfor (int i=1;i<=12;++i)\n\t\t\tif (g[i]>=r) { m=i,d=r-g[i-1]; break; }\n\t\tprintf(\"%d %d %d BC\\n\",d,m,y);\n\t}\n}\n\nnamespace task2 { // Before 1582.10.4\n\tint f[2000],g[20];\n\tvoid init() {\n\t\tfor (int i=1;i<=1582;++i) f[i]=365+(i%4==0);\n\t\tfor (int i=1;i<=1582;++i) f[i]+=f[i-1];\n\t}\n\tvoid main(ll r) {\n\t\tint y=lower_bound(f+1,f+1583,r)-f,m,d; r-=f[y-1];\n\t\tg[1]=31,g[2]=28+(y%4==0),g[3]=31,g[4]=30,g[5]=31,g[6]=30,g[7]=31,g[8]=31,g[9]=30,g[10]=31,g[11]=30,g[12]=31;\n\t\tfor (int i=1;i<=12;++i) g[i]+=g[i-1];\n\t\tfor (int i=1;i<=12;++i)\n\t\t\tif (g[i]>=r) { m=i,d=r-g[i-1]; break; }\n\t\tprintf(\"%d %d %d\\n\",d,m,y);\n\t}\n}\n\nnamespace task3 { // After 1582.10.15\n\tint g[20];\n\tll sum(int y) { return 365ll*y+(y/4)-(y/100)+(y/400)+12; }\n\tint check(int y) { return (y%400==0)||(y%4==0&&y%100!=0); }\n\tvoid main(ll r) {\n\t\tif (r<=577825) { // 1582\n\t\t\tint y=1582,m,d; r-=577460;\n\t\t\tg[1]=31,g[2]=28+(y%4==0),g[3]=31,g[4]=30,g[5]=31,g[6]=30,g[7]=31,g[8]=31,g[9]=30,g[10]=31,g[11]=30,g[12]=31;\n\t\t\tfor (int i=1;i<=12;++i) g[i]+=g[i-1];\n\t\t\tfor (int i=1;i<=12;++i)\n\t\t\t\tif (g[i]>=r) { m=i,d=r-g[i-1]; break; }\n\t\t\tprintf(\"%d %d %d\\n\",d,m,y);\n\t\t\treturn;\n\t\t}\n\t\tint L=1583,R=1000000000;\n\t\twhile (L<R) {\n\t\t\tint mid=(L+R)>>1;\n\t\t\tif (sum(mid)>=r) R=mid;\n\t\t\telse L=mid+1;\n\t\t}\n\t\tint y=L,m,d; r-=sum(y-1);\n\t\tg[1]=31,g[2]=28+check(y),g[3]=31,g[4]=30,g[5]=31,g[6]=30,g[7]=31,g[8]=31,g[9]=30,g[10]=31,g[11]=30,g[12]=31;\n\t\tfor (int i=1;i<=12;++i) g[i]+=g[i-1];\n\t\tfor (int i=1;i<=12;++i)\n\t\t\tif (g[i]>=r) { m=i,d=r-g[i-1]; break; }\n\t\tprintf(\"%d %d %d\\n\",d,m,y);\n\t}\n}\n\nint main() {\n\ttask1::init(),task2::init();\n\tint Q=read();\n\twhile (Q--) {\n\t\tll r=read()+1;\n\t\tif (r<=1721424) task1::main(r);\n\t\telse {\n\t\t\tr-=1721424;\n\t\t\tif (r<=577737) task2::main(r);\n\t\t\telse r+=10,task3::main(r);\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u4e0d\u5206\u6210 3 \u6bb5\u76f4\u63a5\u4e8c\u5206\u5e74\uff0c\u6211\u6ca1\u5199\u4e0d\u77e5\u9053\u7ec6\u8282\u591a\u4e0d\u591a\u3002\n\n\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5 $\\mathcal{O}(1)$ \u7b97\u5e74\uff0c\u6211\u61d2\u5f97\u63a8\u5f0f\u5b50\u4e0d\u77e5\u9053\u96be\u4e0d\u96be\u63a8\u3002",
        "postTime": 1605095738,
        "uid": 38370,
        "name": "M_sea",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\u3011"
    },
    {
        "content": "\n\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee\uff0c\u5982\u679c\u76f4\u63a5\u6a21\u62df\u7684\u8bdd\u7ec6\u8282\u592a\u591a\uff0c\u8003\u8bd5\u65f6\u679c\u65ad\u6362\u65b9\u6cd5\u3002\n\n\u7531\u4e8e\u6700\u540e\u7684\u7b54\u6848\u7684\u5e74\u4efd\u53ea\u4f1a\u5c0f\u4e8e $1e9$ \uff0c\u4e0d\u96be\u60f3\u5230\u4e8c\u5206\u5e74\u4efd\uff0c\u7136\u540e $O(12)$ \u641e\u51fa\u6708\u65e5\u3002\n\n---\n\n\u4ee3\u7801\u5341\u5206\u597d\u5199\uff0c\u6700\u574f\u60c5\u51b5\u4e0b $30 min$ \u4fdd\u8bc1\u5199\u5b8c\uff08\u6211\u89c9\u5f97cf\u67091600\u5206\u7684\u4eba\u90fd\u6709\u8fd9\u4e2a\u80fd\u529b\uff09\u3002\n\n\u5bf9\u4e8e\u4ece\u5f00\u59cb\u5230\u8fc7\u5b8c\u67d0\u5e74\u7684\u5929\u6570\uff0c\u53ea\u8981\u4e00\u4e2a `if`\uff0c\u5373\u662f\u5426\u57281581\u5e74\u4e4b\u524d\uff0c\n\n\u82e5\u5728\u4e4b\u524d\uff0c\u5219\u76f4\u63a5\u7b97\uff0c\u82e5\u5728\u4e4b\u540e\uff0c\u5219\u7b54\u6848\u52a0\u4e0a\u4e00\u4e2a\u6570\uff0c\u5e74\u4efd\u51cf\u53bb1581\u540e\u76f4\u63a5\u7b97\u3002\n\n\u81f3\u4e8e\u8fd9\u4e2a\u6570\u662f\u591a\u5c11\uff0c\u5bf9\u7740\u67d0\u4e2a\u6837\u4f8b\u8dd1\u4e00\u4e0b\u7136\u540e\u7b97\u4e00\u4e0b\u5dee\u503c\u6216\u8005\u8dd1\u4e00\u4e0b1581\u5e74\u7684\u5c31\u597d\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(T \\times (\\log 1e9 +12))$ \u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long \nusing namespace std;\ninline int R()\n{\n\tchar c;int res=0,sign=1;\n\twhile((c=getchar())>'9'||c<'0')if(c=='-') sign=-1;res=c-'0';\n\twhile((c=getchar())>='0'&&c<='9') res=res*10+c-'0';\n\treturn res;\n}\ninline int min(int a,int b){return a<b?a:b;}\ninline int max(int a,int b){return a>b?a:b;}\n#define mid (l+r>>1)\nint st=-4713+1;\nint MOU[3][13];\nint ck(int ye)//\u8fc7\u5b8c\u8fd9\u4e00\u5e74\u8981\u7528\u591a\u5c11\u5929 \n{\n\tif(ye<st) return 0;\n\tint res=0;\n\tif(ye<=1581)\n\t{\n\t\tres+=(ye-st+1)*365;\n\t\tres+=(ye-st)/4+1;\n\t}\n\telse \n\t{\n\t\tres=2299249-10-365;\n\t\tres+=(ye-1583+1+1)*365;\n\t\tif(ye>=1584)res+=((ye-1584)/4+1);\n\t\tif(ye>=1600)res-=max(0,(ye-1600)/100+1);\n\t\tif(ye>=1600)res+=max(0,(ye-1600)/400+1);\n\t}\n\treturn res;\n}\nvoid work(int x,int y)\n{\n\tint ye=y,mou=1,d=1;\n\twhile(x)\n\t{\n\t\tint _=0;\n\t\tif(ye==1582)if(mou==10)if(x>=4)x+=10;\n\t\tif(ye<1582)\n\t\t{if((ye)%4==0) _=1;}\n\t\telse if(ye>1582) \n\t\t{\n\t\t\tif((ye)%400==0) _=1;\n\t\t\tif((ye)%4==0&&(ye)%100) _=1;\n\t\t}\n\t\tif(x>=MOU[_][mou]) \n\t\t{\n\t\t\tx-=MOU[_][mou];\n\t\t\tmou++;\n\t\t}\n\t\telse \n\t\t{\n\t\t\td+=x;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(ye<=0) --ye;\n\tprintf(\"%lld %lld %lld\",d,mou,abs(ye));\n\tif(ye<0)puts(\" BC\");\n\telse puts(\"\");\n}\nsigned main()\n{\n\tfreopen(\"julian.in\",\"r\",stdin);\n\tfreopen(\"julian.out\",\"w\",stdout);\n\tMOU[0][1]=31;MOU[0][2]=28;MOU[0][3]=31;\n\tMOU[0][4]=30;MOU[0][5]=31;MOU[0][6]=30;\n\tMOU[0][7]=31;MOU[0][8]=31;MOU[0][9]=30;\n\tMOU[0][10]=31;MOU[0][11]=30;MOU[0][12]=31;//\u6bcf\u4e2a\u6708\u7684\u5929\u6570\n\tfor(int i=1;i<=12;i++)\n\tMOU[1][i]=MOU[0][i];MOU[1][2]=29;\n\tint Q=R(),x,l,r,ye,yong;\n\twhile(Q--)\n\t{\n\t\tx=R();\n\t\tl=st,r=1e9+2;\n\t\twhile(l<=r)//\u4e8c\u5206\u5e74\u4efd \n\t\tif(ck(mid)<=x) l=mid+1;\n\t\telse r=mid-1;\n\t\tyong=ck(l-1);\n\t\tye=l-1+1;\n\t\twork(x-yong,ye);//\u8ba1\u7b97\u5269\u4f59 \n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1604885477,
        "uid": 220857,
        "name": "\u7d20\u8d28\u73a9\u5bb6\u5b591\u8d85",
        "ccfLevel": 6,
        "title": "NT\u9898 \u9898\u89e3"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a\u65f6\u95f4\u590d\u6742\u5ea6 $O(q+$\u5e38\u6570$)$\uff0c\u7ec6\u8282\u5c11\uff0c\u5e76\u4e14\u597d\u5199\u7684\u505a\u6cd5\uff08\u8003\u573a\u4e0a $1h$ \u5199\u5b8c\uff09\u3002\n\n\u9996\u5148\u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5\u662f\u7b2c 0 \u5929\uff0c\u5f88\u9ebb\u70e6\uff0c\u90a3\u4e48\u76f4\u63a5\u628a\u8fd9\u4e2a\u5f53\u7b2c 1 \u5929\uff0c\u5bf9\u4e8e\u8f93\u5165\u7684\u6570 $a$\uff0c`a++` \u5373\u53ef\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u6240\u6709\u65f6\u95f4\u5206\u4e3a\u4e09\u6bb5\uff1a$[1-1721424]$\uff0c$[1721425-2299161]$\uff0c$[2299162-\\infty]$ \uff0c\u5176\u4e2d $[1-1721424]$ \u662f\u516c\u5143\u524d\uff0c$[1721425-2299161]$ \u662f$1.1.1-1582.10.4$ \u7684\u65f6\u95f4\uff0c$[2299162-\\infty]$ \u662f $1582.10.15$ \u4ee5\u540e\u7684\u65f6\u95f4\u3002\n\n\u5bf9\u4e8e\u524d\u4e24\u6bb5\uff0c\u4ee5 $4$ \u5e74\u4e3a\u4e00\u4e2a\u5faa\u73af\uff0c\u4e00\u5929\u4e00\u5929\u7684\u53bb\u6a21\u62df\uff0c\u9884\u5904\u7406\u6389\u5373\u53ef\u3002\n\n\u4e3b\u8981\u4ee3\u7801\uff08$sum(i,0/1)$ \u8868\u793a\u7b2c $i$ \u4e2a\u6708\uff0c\u662f\u5426\u662f\u95f0\u5e74\u7684\u5929\u6570\uff0c$ok2(i)$ \u8868\u793a\u7b2c $i$ \u5e74\u662f\u5426\u662f\u95f0\u5e74\uff09\uff1a\n\n```cpp\nmm2[1]=MM=1,yy2[1]=YY=1,dd2[1]=DD=1;//MM\u8868\u793a\u6b64\u65f6\u7684\u6708\u4efd\uff0c\u5176\u4ed6\u540c\u7406\nfor (int i=2;i<=1461;i++)\n{\n\tDD++;\n\tif (DD>sum(MM,ok2(YY)))DD=1,MM++;\n\tif (MM>12)MM=1,YY++;\n\tmm2[i]=MM,yy2[i]=YY,dd2[i]=DD;\n}\nmm3[1]=MM=1,yy3[1]=YY=-4713,dd3[1]=DD=1;\nfor (int i=2;i<=1461;i++)\n{\n\tDD++;\n\tif (DD>sum(MM,ok2(YY)))DD=1,MM++;\n\tif (MM>12)MM=1,YY++;\n\tmm3[i]=MM,yy3[i]=YY,dd3[i]=DD;\n}\n```\n\n\u90a3\u4e48\u6c42\u51fa\u7b54\u6848\u4e5f\u5f88\u7b80\u5355\u3002\n\n```cpp\nvoid work1(int a)\n{\n\tint Y=0;\n\tY=(a/1461)*4;a%=1461;//1461\u662f\u56db\u5e74\u7684\u5929\u6570\n    \t\t\t\t\t//\u5982\u679c\u6709\u8d85\u8fc71461\u5929\u7684\uff0c\u90a3\u4e48\u5148\u5224\u65ad\u51fa\u6709\u51e0\u4e2a\u56db\u5e74\uff0c\u7136\u540e\u53d6\u6a21\uff0c\u7136\u540e\u5c31\u57281461\u4ee5\u5185\u4e86\n\tif (a==0)a=1461,Y-=4;\n\tY+=yy3[a],m=mm3[a],d=dd3[a],y=Y;\n\treturn;\n}\n\nvoid work2(int a)\n{\n\tint Y=(a/1461)*4;a%=1461;\n\tif (a==0)a=1461,Y-=4;\n\tY+=yy2[a],m=mm2[a],d=dd2[a],y=Y;\n\treturn;\n}\n```\n\n\u90a3\u4e48\u7b2c\u4e09\u6bb5\u600e\u4e48\u6c42\u5462\uff1f\u867d\u7136\u4e0d\u80fd\u7528\u56db\u5e74\u4e00\u6bb5\u7684\u65b9\u6cd5\u4e86\uff0c\u4f46\u662f $400$ \u5e74\u7684\u5929\u6570\u662f $146097$\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u9884\u5904\u7406\u51fa\u6765\u3002\n\n\u4e3b\u8981\u4ee3\u7801\uff08$ok(i)$ \u8868\u793a\u7b2c $i$ \u5e74\u662f\u5426\u662f\u95f0\u5e74\uff09\uff1a\n\n```cpp\nmm1[1]=MM=10,yy1[1]=YY=1582;dd1[1]=DD=15;\nfor (int i=2;i<=146097;i++)\n{\n\tDD++;\n\tif (DD>sum(MM,ok(YY)))DD=1,MM++;\n\tif (MM>12)MM=1,YY++;\n\tmm1[i]=MM,yy1[i]=YY,dd1[i]=DD;\n}\n```\n\n\u540c\u6837\uff0c\u8ba1\u7b97\u7b54\u6848\u7684\u65f6\u5019\u53d6\u6a21\u5c31\u597d\u4e86\u3002\n\n\u5b8c\u6574\u4ee3\u7801\uff1a[link](https://www.luogu.com.cn/paste/tqs9ucsa)\u3002",
        "postTime": 1605071619,
        "uid": 141179,
        "name": "pigstd",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    },
    {
        "content": "## \u5b9a\u4f4d\n\nCSP2020 S \u7ec4 T1\uff0c\u5b9e\u5c5e\u4e00\u9053\u8017\u65f6\u8017\u8111\u7684\u5927\u6a21\u62df\u9898\u3002~~\u672c\u849f\u84bb\u5728\u8d5b\u65f6\u6a21\u62df\u4e86\u4e09\u4e2a\u5c0f\u65f6\u624d\u62cd\u8fc7\u5927\u6837\u4f8b\u3002~~\n\n## \u51c6\u5907\n\n\u9996\u5148\uff0c\u5bf9\u4e8e\u5927\u6a21\u62df\u9898\uff0c\u6211\u4eec\u5e94\u5f53\u51c6\u5907\u4e00\u4e9b\u53ef\u80fd\u4f1a\u7528\u5230\u7684\u5e38\u91cf\u3001\u51fd\u6570\u7b49\u3002\u4f8b\u5982\uff0c$1 \\sim 12$ \u6708\u7684\u5929\u6570\u548c\u95f0\u5e74\u7684\u5224\u65ad\u5c31\u662f\u6781\u5176\u91cd\u8981\u7684\u3002\n\n\u4e3a\u4e86\u66f4\u5feb\u5730\u63a8\u7b97\u540e\u9762\u7684\u65e5\u671f\uff0c\u50cf\u6bcf\u5e74\u6709 $365 / 366$ \u5929\uff0c\u6bcf $4$ \u5e74\u6709 $1461$ \u5929\uff0c\u6bcf $400$ \u5e74\u6709 $146097 / 146100$ \u5929\u8bf8\u5982\u6b64\u7c7b\u7684\u6570\u636e\u90fd\u53ef\u4ee5\u5f53\u505a\u5e38\u91cf\u3002\n\n\u653e\u773c\u89c2\u77a7\u6570\u636e\u8303\u56f4\uff0c\u53d1\u73b0\u7b2c $10$ \u4e2a\u6d4b\u8bd5\u70b9\u7684\u5e74\u4efd\u662f\u5c0f\u4e8e $10^9$ \u7684\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u8f93\u5165\u7684\u5929\u6570\u5c06\u8fbe\u5230 $(4713+10^9) \\times 365.24 \\gt 2^{31}$\uff0c\u5c06\u8d85\u51fa `int` \u5b58\u50a8\u8303\u56f4\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u4e0d\u59a8\u5c06\u5927\u90e8\u5206\u53d8\u91cf\u7c7b\u578b\u5b9a\u4e49\u4e3a `long long`\u3002\n\n```cpp\nconst long long _400y[2]={146100,146097};\n//\u4fdd\u5b58\u4e0d\u540c\u5386\u6cd5\u7684400\u5e74\u6240\u5bf9\u5e94\u7684\u5929\u6570\nconst long long _4y=1461;\n//4\u5e74\u5bf9\u5e94\u7684\u5929\u6570\nconst long long D[13][2]=\n{{0,0},{31,31},{28,29},{31,31},{30,30},\n{31,31},{30,30},{31,31},{31,31},{30,30},\n{31,31},{30,30},{31,31}};\n//\u4fdd\u5b58\u975e\u95f0\u5e74/\u95f0\u5e74\u6bcf\u4e2a\u6708\u7684\u5929\u6570\nlong long day1[370][2][2],day2[13][35][2];\n//day1[i][0/1][0/1]\u4fdd\u5b58\u4e00\u5e74\u7b2ci\u5929\u5bf9\u5e94\u7684\u6708\u3001\u65e5\n//day2[m][d][0/1]\u4fdd\u5b58\u6708\u3001\u65e5\u5bf9\u5e94\u4e00\u5e74\u4e2d\u7684\u7b2c\u51e0\u5929\nvoid init()\n{\n    for(int i=0;i<=1;i++)//\u5bf9\u975e\u95f0\u5e74\uff080\uff09\u548c\u95f0\u5e74\uff081\uff09\u8fdb\u884c\u679a\u4e3e\n    {\n        for(int m=1,x=1;m<=12;m++)//\u57281~12\u6708\u4e4b\u95f4\u679a\u4e3e\uff0cx\u4e3a\u5f53\u524d\u7684\u5929\u6570\n        {\n            for(int d=1;d<=D[m][i];d++,x++)\n            {\n                day1[x][0][i]=m;\n                day1[x][1][i]=d;\n                day2[m][d][i]=x;\n            }\n        }\n    }\n}\nbool leap1(long long y)//\u73b0\u884c\u7684\u95f0\u5e74\u5224\u65ad\u6cd5\u5219\n{\n    if(y%400==0)return true;\n    if(y%100==0)return false;\n    if(y%4==0)return true;\n    return false;\n}\nbool leap2(long long y)//\u5112\u7565\u5386\u6cd5\u95f0\u5e74\u5224\u65ad\n{\n    if(y<0)y=-y-1;\n    return (bool)(y&3)^true;//y&3 \u7b49\u540c\u4e8e y%4\n}\n```\n\n## \u601d\u8def\n\n\u8fd9\u9053\u9898\u7ec6\u8282\u4e0d\u5c11\uff0c\u9700\u8981\u5bf9\u4e0d\u540c\u7684\u65f6\u95f4\u6bb5\u8fdb\u884c\u8ba8\u8bba\uff0c\u5927\u81f4\u53ef\u5206\u4e3a\u4ee5\u4e0b\u51e0\u79cd\uff1a\n\n1. \u516c\u5143\u524d $4713$ \u5e74 $1$ \u6708 $1$ \u65e5 $\\sim$ \u516c\u5143\u524d $1$ \u5e74 $12$ \u6708 $31$ \u65e5\n\n2. \u516c\u5143 $1$ \u5e74 $1$ \u6708 $1$ \u65e5 $\\sim$ \u516c\u5143 $1582$ \u5e74 $10$ \u6708 $4$ \u65e5\n\n3. \u516c\u5143 $1582$ \u5e74 $10$ \u6708 $15$ \u65e5\u53ca\u4ee5\u540e\n\n## \u5177\u4f53\u60c5\u51b5\n\n\u6211\u4eec\u6765\u5206\u60c5\u51b5\u8fdb\u884c\u8ba8\u8bba\uff0c\u6682\u4e14\u4e0d\u8003\u8651\u65e5\u671f\uff0c\u5148\u5904\u7406\u5e74\u4efd\u3002\n\n### \u516c\u5143\u524d $4713$ \u5e74 $1$ \u6708 $1$ \u65e5 $\\sim$ \u516c\u5143\u524d $1$ \u5e74 $12$ \u6708 $31$ \u65e5\n\n- \u4ee5 $400$ \u5e74\u4e3a\u4e00\u5355\u4f4d\n\n\u4ece\u516c\u5143\u524d $4713$ \u5e74 $1$ \u6708 $1$ \u65e5 \u8d77\uff0c\u53ef\u4ee5\u5148\u4ee5 $400$ \u5e74\u4e3a\u4e00\u4e2a\u5355\u4f4d\u3002\u7531\u4e8e\u8fd9\u6bb5\u65f6\u95f4\u7684\u95f0\u5e74\u76f8\u5bf9\u4e0d\u590d\u6742\uff0c\u56e0\u6b64\u4ee5 $400$ \u5e74 $=146100$ \u5929\u8fdb\u884c\u8ba1\u7b97\u5373\u53ef\u3002\n\n\u5f53\u7136\uff0c\u5728\u8fd9\u4e2a\u533a\u95f4\u5185\u6700\u8fdf\u80fd\u5230\u8fbe\u516c\u5143\u524d $313$ \u5e74\uff0c\u6700\u591a\u53ef\u5f80\u540e\u63a8 $\\dfrac{4400}{400}=11$ \u4e2a $400$ \u5e74\u3002\n\n\u82e5\u7528 $y_{x}$ \u8868\u793a $x$ \u5e74\u6240\u5bf9\u5e94\u7684\u5929\u6570\uff0c\u5219\u63a8\u79fb\u7684\u5355\u4f4d\u6570 $t=\\min(11, \\lfloor \\dfrac{r}{y_{400}} \\rfloor)$\uff0c\u5373\u5f80\u540e\u63a8\u79fb $t$ \u4e2a $400$ \u5e74\u3002\n\n- \u4ee5 $4$ \u5e74\u4e3a\u4e00\u5355\u4f4d\n  \n\u5904\u7406\u5b8c $400$ \u5e74\u4e4b\u540e\uff0c\u6211\u4eec\u518d\u4ee5 $4$ \u5e74\u4e3a\u4e00\u4e2a\u5355\u4f4d\uff0c\u6bcf\u6b21\u5f80\u540e\u63a8 $4$ \u5e74\u2014\u2014\u4e0d\u9700\u8981\u8003\u8651\u6574\u9664 $100$ \u65b9\u4fbf\u4e86\u8bb8\u591a\u3002\n\n\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u82e5\u4e0a\u4e00\u6b21\u63a8\u5230\u4e86\u516c\u5143\u524d $313$ \u5e74\uff0c\u800c\u5f53\u524d\u53ef\u4ee5\u8fbe\u5230\u516c\u5143\u540e\uff0c\u90a3\u4e48\u5c31\u5fc5\u987b\u533a\u522b\u5bf9\u5f85\uff0c\u5373\u4fdd\u8bc1\u5f53\u524d\u7684\u63a8\u79fb\u5728\u516c\u5143\u524d\u8303\u56f4\u5185\u3002\n\n\u82e5\u4e0a\u4e00\u6b21\u7684 $t$ \u503c\u4e3a $t_0$\uff0c\u5219\u8fd9\u65f6\u63a8\u79fb\u7684\u5355\u4f4d\u6570\u91cf\u4e3a\uff1a\n\n$$t=\n\\begin{cases}\n\\lfloor \\dfrac{r}{y_4} \\rfloor & t_0 \\lt 11\\cr\n\\min(\\lfloor \\dfrac{r}{y_4} \\rfloor, 78) & t_0=11\n\\end{cases}$$\n\n- \u4ee5 $1$ \u5e74\u4e3a\u4e00\u5355\u4f4d\n\n\u4e00\u8fb9\u5224\u65ad\u5269\u4f59\u5929\u6570\u662f\u5426\u5c0f\u4e8e\u5f53\u524d\u5e74\u7684\u5929\u6570\uff0c\u4e00\u8fb9\u63a8\u79fb\u5e74\u4efd\u5373\u53ef\uff0c\u9700\u6ce8\u610f\u95f0\u5e74\u3002\n\n- \u4ee5 $1$ \u5929\u4e3a\u4e00\u5355\u4f4d\n\n\u524d\u9762\u7684\u63a8\u79fb\u7ed3\u675f\u540e\uff0c\u5269\u4e0b\u7684\u5929\u6570\u82e5\u5c0f\u4e8e $365$\uff0c\u5219\u53ef\u4ee5\u5728\u516c\u5143\u524d $1$ \u5e74\u7ed3\u675f\u63a8\u79fb\uff08\u516c\u5143\u524d $1$ \u5e74\u4e3a\u95f0\u5e74\uff09\u3002\n\n\u7ecf\u8fc7\u5c1d\u8bd5~~\u8ba1\u7b97~~\u53ef\u77e5\uff0c\u5f53 $r=1721423$ \u65f6\uff0c\u5bf9\u5e94\u65e5\u671f\u516c\u5143\u524d $1$ \u5e74 $12$ \u6708 $31$ \u65e5\u3002\n\n### \u516c\u5143 $1$ \u5e74 $1$ \u6708 $1$ \u65e5 $\\sim$ \u516c\u5143 $1582$ \u5e74 $10$ \u6708 $4$ \u65e5\n\n\u53ef\u5c06 $r$ \u7684\u503c\u51cf\u53bb $1721424$\uff0c\u518d\u7528\u5269\u4e0b\u7684\u503c\u8fdb\u884c\u63a8\u79fb\uff0c\u65b9\u6cd5\u4e0e\u524d\u9762\u7c7b\u4f3c\u3002\n\n- \u4ee5 $400$ \u5e74\u4e3a\u4e00\u5355\u4f4d\n\n$t=\\min(3, \\lfloor \\dfrac{r}{y_{400}} \\rfloor)$\uff0c\u6700\u591a\u53ef\u63a8\u79fb\u5230 $1201$ \u5e74\u3002\n\n- \u4ee5 $4$ \u5e74\u4e3a\u4e00\u5355\u4f4d\n\n$$t=\n\\begin{cases}\n\\lfloor \\dfrac{r}{y_4} \\rfloor & t_0 \\lt 3\\cr\n\\min(\\lfloor \\dfrac{r}{y_4} \\rfloor, 95) & t_0=3\n\\end{cases}$$\n\n\u6700\u591a\u53ef\u63a8\u79fb\u5230 $1581$ \u5e74\u3002\n\n- \u4ee5 $1$ \u5e74\u4e3a\u4e00\u5355\u4f4d\n\n\u89c6 $r$ \u7684\u60c5\u51b5\u800c\u5b9a\u3002\n\n\u7ecf\u8fc7\u8fd9\u6837\u7684\u63a8\u79fb\uff0c\u6211\u4eec\u53ef\u77e5\u5f53 $r=2299160$ \u65f6\uff0c\u5bf9\u5e94\u65e5\u671f\u516c\u5143 $1582$ \u5e74 $10$ \u6708 $4$ \u65e5\u3002\n\n### \u516c\u5143 $1582$ \u5e74 $10$ \u6708 $15$ \u65e5\u53ca\u4ee5\u540e\n\n\u7531\u4e8e $1582$ \u5e74 $10$ \u6708 $4$ \u65e5 $\\sim 14$ \u65e5\u88ab\u5220\u53bb\uff0c\u56e0\u800c $r=2299161$ \u5bf9\u5e94 $1582$ \u5e74 $10$ \u6708 $15$ \u65e5\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 $r$ \u51cf\u53bb $2299161$\uff0c\u7136\u540e\u7ee7\u7eed\u63a8\u79fb\u3002\n\n\u7531\u4e8e\u95f0\u5e74\u7684\u89c4\u5219\u53d8\u5316\uff0c\u56e0\u800c\u6211\u4eec\u4e0d\u59a8\u53ea\u4ee5 $400$ \u5e74\u4e3a\u5355\u4f4d\u8fdb\u884c\u63a8\u79fb\uff0c\u7136\u540e\u4e00\u5e74\u4e00\u5e74\u5730\u63a8\u79fb\u3002\u8fd9\u6837\u6700\u591a\u63a8 $399$ \u6b21\uff0c\u5728\u63a8\u79fb\u7684\u8fc7\u7a0b\u4e2d\u5224\u65ad\u5929\u6570\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n\n\u53ef\u4ee5\u901a\u8fc7\u53d6 $\\min$ \u6765\u5224\u65ad\u63a8\u79fb\u65f6\u95f4\u7684\u591a\u5c11\uff0c\u5e76\u7528\u7279\u6b8a\u7684\u6570\u636e\u5904\u7406\u6765\u964d\u4f4e\u96be\u5ea6\u3002\n\n\u5728\u8c03\u8bd5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u501f\u52a9\u9898\u76ee\u4e2d\u7684\u5c0f\u6837\u4f8b\u68c0\u9a8c\u81ea\u5df1\u7684\u7ed3\u679c\u662f\u5426\u6b63\u786e\uff0c\u540c\u65f6\u53ef\u4ee5\u8bb0\u5f55\u4e00\u4e9b\u7279\u6b8a\u65f6\u95f4\u70b9\u65b9\u4fbf\u5224\u65ad\u3002\n\n\u7279\u6b8a\u7684\u65f6\u95f4\u8282\u70b9\uff1a\n\n|$r$|\u5bf9\u5e94\u65e5\u671f|\u5907\u6ce8|\n| :----------: | :----------: | :----------: |\n|$0$|\u516c\u5143\u524d $4713$ \u5e74 $1$ \u6708 $1$ \u65e5|\u5112\u7565\u65e5\u539f\u70b9|\n|$1721423$|\u516c\u5143\u524d $1$ \u5e74 $12$ \u6708 $31$ \u65e5|\u7528\u6765\u7279\u5224|\n|$1721424$|\u516c\u5143 $1$ \u5e74 $1$ \u6708 $1$ \u65e5|\u7528\u6765\u7279\u5224|\n|$2299160$|\u516c\u5143 $1582$ \u5e74 $10$ \u6708 $4$ \u65e5|\u4f7f\u7528\u5112\u7565\u5386\u7684\u6700\u540e\u4e00\u5929\uff08~~\u5b83SPFA\u7684\u65e5\u5b50~~\uff09|\n|$2299161$|\u516c\u5143 $1582$ \u5e74 $10$ \u6708 $15$ \u65e5|\u4f7f\u7528\u683c\u91cc\u9ad8\u5229\u5386\u7684\u7b2c\u4e00\u5929\uff0c\u5e76\u5f00\u59cb\u4f7f\u7528\u65b0\u7684\u95f0\u5e74\u5236|\n|$2459161$|\u516c\u5143 $2020$ \u5e74 $11$ \u6708 $7$ \u65e5|CSP2020 \u7b2c\u4e8c\u8f6e\u4e3e\u884c|\n|$365244221425$|\u516c\u5143 $10^9$ \u5e74 $12$ \u6708 $31$ \u65e5|\u672c\u9898 $r$ \u53ef\u80fd\u51fa\u73b0\u7684\u6700\u5927\u503c\uff0c\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u9700\u8981\u5f00 `long long`|\n\n\u7ecf\u8fc7\u7565\u5fae\u4fee\u6539\u7684\u8d5b\u65f6 `AC` \u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long Q,day1[370][2][2],day2[13][35][2],r;\nconst long long _400y[2]={146100,146097},_4y=1461;\nconst long long D[13][2]={{0,0},{31,31},{28,29},{31,31},{30,30},{31,31},{30,30},{31,31},{31,31},{30,30},{31,31},{30,30},{31,31}};\nbool leap1(long long y)\n{\n    if(y%400==0)return true;\n    if(y%100==0)return false;\n    if(y%4==0)return true;\n    return false;\n}\nbool leap2(long long y)\n{\n    if(y<0)y=-y-1;\n    return bool(y&3)^true;\n}\nvoid init()\n{\n    for(int i=0;i<=1;i++)\n    {\n        for(int m=1,x=1;m<=12;m++)\n        {\n            for(int d=1;d<=D[m][i];d++,x++)\n            {\n                day1[x][0][i]=m;\n                day1[x][1][i]=d;\n                day2[m][d][i]=x;\n            }\n        }\n    }\n}\nvoid pr(long long y,long long m,long long d)//\u8f93\u51fa\u65e5\u671f\u7684\u51fd\u6570\n{\n    printf(\"%lld %lld \",d,m);\n    if(y<0)printf(\"%lld BC\\n\",-y);\n    else printf(\"%lld\\n\",y);\n}\nint main()\n{\n    init();\n    scanf(\"%lld\",&Q);\n    while(Q--)\n    {\n        long long Y=-4713,M=1,D=1,t;\n        scanf(\"%lld\",&r);\n        if(r==1721423)//\u672c\u7a0b\u5e8f\u82e5\u4e0d\u7279\u5224\uff0c\u5219\u4f1a\u8f93\u51fa 0 0 1\n        {\n            puts(\"31 12 1 BC\");\n            continue;\n        }\n        if(r<1721423)//[1 1 4713 BC, 30 12 1 BC]\n        {\n            t=min(11LL,r/_400y[0]);\n            r-=t*_400y[0];\n            Y+=t*400;\n            if(t==11LL)t=min(78LL,r/_4y);\n            else t=min(99LL,r/_4y);\n            r-=t*_4y;\n            Y+=t<<2;\n            long long f=leap2(Y),date1=day2[M][D][f];//\u5904\u7406\u5269\u4f59\u7684 365/366 \u5929\n            t=min(r,364+f);\n            r-=t;\n            M=day1[date1+t][0][f];\n            D=day1[date1+t][1][f];\n            while(r)\n            {\n                Y++;\n                M=D=1;\n                r--;\n                f=leap2(Y);\n                date1=day2[M][D][f];\n                t=min(r,364+f);\n                r-=t;\n                M=day1[date1+t][0][f];\n                D=day1[date1+t][1][f];\n            }\n        }\n        else if(r<=2299160)//[1 1 1, 4 10 1582]\n        {\n            r-=1721424;\n            Y=M=D=1;\n            t=min(3LL,r/_400y[0]);\n            r-=t*_400y[0];\n            Y+=t*400;\n            if(t==3LL)t=min(95LL,r/_4y);\n            else t=min(99LL,r/_4y);\n            r-=t*_4y;\n            Y+=t<<2;\n            long long f=leap2(Y),date1=day2[M][D][f];\n            t=min(r,364+f);\n            r-=t;\n            M=day1[date1+t][0][f];\n            D=day1[date1+t][1][f];\n            while(r)\n            {\n                Y++;\n                M=D=1;\n                r--;\n                f=leap2(Y);\n                date1=day2[M][D][f];\n                t=min(r,364+f);\n                r-=t;\n                M=day1[date1+t][0][f];\n                D=day1[date1+t][1][f];\n            }\n        }\n        else if(r<=2299238)//[15 10 1582, 31 12 1582]\n        {\n            r-=2299150;\n            Y=1582,M=10,D=4;\n            long long f=leap1(Y),date1=day2[M][D][f];\n            t=min(r,364+f);\n            r-=t;\n            M=day1[date1+t][0][f];\n            D=day1[date1+t][1][f];\n            while(r)\n            {\n                Y++;\n                M=D=1;\n                r--;\n                f=leap1(Y);\n                t=min(r,364+f);\n                r-=t;\n                M=day1[t+1][0][f];\n                D=day1[t+1][1][f];\n            }\n        }\n        else//[31 12 1582, \u221e)\n        {\n            r-=2299238;\n            Y=1583;\n            t=r/_400y[1];\n            r-=t*_400y[1];\n            Y+=t*400;\n            if(!r)//\u4e13\u95e8\u9488\u5bf9 0 \u6708 0 \u65e5\u7684\u7279\u6b8a\u60c5\u51b5\n            {\n                pr(Y-1,12,31);\n                continue;\n            }\n            while(true)\n            {\n                long long f=leap1(Y);\n                if(r<=365+f)\n                {\n                    pr(Y,day1[r][0][f],day1[r][1][f]);\n                    break;\n                }\n                else Y++,r-=365+f;\n            }\n            continue;\n        }\n        pr(Y,M,D);\n    }\n    return 0;\n}\n```",
        "postTime": 1604806222,
        "uid": 137367,
        "name": "hensier",
        "ccfLevel": 6,
        "title": "P7075 \u5112\u7565\u65e5 \u9898\u89e3"
    },
    {
        "content": "### \u9898\u89e3\n\n#### \u5982\u4f55\u4f18\u96c5\u5730\u5728\u5f00\u800330\u5206\u949f\u5185\u5b8c\u6210\u6b64\u9898\uff1f\n\n\u9996\u5148\u6700\u91cd\u8981\u7684\u4e00\u70b9\uff1a\u53d1\u73b01600\u5e74\u4e4b\u524d\u7684\u95f0\u5e74\u89c4\u5f8b\u90fd\u662f\u6bcf4\u5e74\u4e00\u6b21\uff0c\u800c1600\u53c8\u6b63\u597d\u662f400\u7684\u500d\u6570\uff0c\u6240\u4ee5\u4ee51600\u4f5c\u4e3a\u5206\u754c\u7ebf\uff0c\u5206\u62101600\u5e74\u524d\u540e\u4e24\u79cd\u60c5\u51b5\u6bd4\u8f83\u597d\u5904\u7406\n\n\u5176\u6b21\uff0c\u53d1\u73b00\u5e74\u4e0d\u5b58\u5728\u4e5f\u4e0d\u65b9\u4fbf\uff0c\u6240\u4ee5\u628a\u6240\u6709\u7684\u8d1f\u6570\u5e74\u4efd+1\uff0c\u8f93\u51fa\u65f6\u518d\u6539\u56de\u6765\n\n\u516c\u5143\u524d4913\u5e741\u67081\u65e5\u662f\u7b2c0\u5929\u4e5f\u4e0d\u65b9\u4fbf\uff0c\u6240\u4ee5\u628a `r++`\n\n\u51c6\u5907\u5de5\u4f5c\u505a\u597d\uff0c\u73b0\u5728\u6765\u8003\u8651\u600e\u4e48\u6c42\u89e3\n\n#### (\u4e00)1600\u5e74\u53ca\u4ee5\u524d\n\u5982\u679c $r<=M$\uff0c\u90a3\u4e48\u65f6\u95f4\u57281600\u5e74\u53ca\u4ee5\u524d($M$ \u8868\u793a-4713\u52301600\u5171\u6709\u591a\u5c11\u5929)\n\n\u53d1\u73b0-4713\u52301600\u53ea\u67096000\u591a\u5e74\uff0c\u6240\u4ee5\u5e72\u8106\u628a\u6bcf\u4e00\u5e74\u7684\u5929\u6570\u90fd\u7b97\u51fa\u6765(\u7136\u540e\u6c42\u524d\u7f00\u548c\u65b9\u4fbf\u4e8c\u5206)\n\n\u6ce8\u610f\u7684\u70b9\uff1a\n1. \u7531\u4e8e\u6211\u4eec\u628a\u6240\u6709\u7684\u8d1f\u6570\u5e74\u4efd+1\u4e86\uff0c\u6240\u4ee5\u73b0\u5728\u6240\u6709\u6a214\u4f590\u7684\u5e74\u4efd\u90fd\u662f\u95f0\u5e74\n2. **1582\u5e74\u53ea\u6709355\u5929\uff01\uff01\uff01** \n\n\u6c42\u51fa\u524d\u7f00\u548c\u540e(\u5373-4713\u5e74\u52301600\u5e74\u53ca\u4e4b\u524d\u7684\u67d0\u4e00\u5e74\u4e00\u5171\u6709\u591a\u5c11\u5929)\uff0c\u5c31\u53ef\u4ee5\u4e8c\u5206\u6c42\u51fa\u7a76\u7adf\u662f\u5728\u54ea\u4e00\u5e74\u7684\u7b2c\u51e0\u5929\uff0c\u7136\u540e\u8df3\u8f6c\u5230**(\u4e09)**\n\n#### (\u4e8c)1600\u5e74\u4e4b\u540e\n\u5982\u679c $r>M$\uff0c\u90a3\u4e48\u65f6\u95f4\u57281600\u5e74\u4e4b\u540e\uff0c\u8ba9 $r$ \u51cf\u53bb $M$\n\n\u6b64\u65f6\u6bcf400\u5e74\u4e3a\u4e00\u4e2a\u5468\u671f\uff0c400\u5e74\u4e00\u5171\u7ecf\u8fc7\u4e86 $366*97+365*303=146097$ \u5929\n\n\u7b97\u51fa $p=\\lfloor\\dfrac{r}{146097}\\rfloor$ \u8868\u793a\u4e00\u5171\u7ecf\u8fc7\u4e86\u591a\u5c11\u4e2a400\u5e74\n\n$q=r\\bmod 146097$ \u8868\u793a\u5269\u4f59\u591a\u5c11\u5929\n\n**\u6ce8\u610f\uff01\u5982\u679c $q=0$\uff0c\u4e3a\u65b9\u4fbf\u540e\u7eed\u8ba1\u7b97\uff0c\u8981\u8ba9 $p$ \u51cf\u53bb1\uff0c\u5e76\u5c06 $q$ \u8bbe\u4e3a $146097$**\n\n\u4e4b\u540e\u5c31\u540c**(\u4e00)**\u4e00\u6837\uff0c\u9884\u5904\u7406\u51fa400\u5e74\u4e2d\u6bcf\u4e00\u5e74\u7684\u5929\u6570\u548c\u524d\u7f00\u548c\uff0c\u5c31\u53ef\u4ee5\u4e8c\u5206\u6c42\u51fa $q$ \u7a76\u7adf\u662f\u5728\u6700\u540e\u4f59\u4e0b\u7684\u4e0d\u5230400\u5e74\u4e2d\u7684\u54ea\u4e00\u5e74\uff0c\u4ee5\u53ca\u662f\u8fd9\u5e74\u7684\u7b2c\u51e0\u5929\n\n\u5982\u679c\u4e8c\u5206\u6c42\u5f97\u662f\u6700\u540e400\u5e74\u4e2d\u7684\u7b2c $k$ \u5e74\uff0c\u90a3\u4e48\u7b54\u6848\u5e74\u4efd\u5c31\u5e94\u8be5\u662f $1600+400p+k$\n\n\u7136\u540e\u8df3\u8f6c\u5230**(\u4e09)**\n\n#### (\u4e09)\u4e00\u5e74\u5185\u7684\u5224\u65ad\n\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u7b54\u6848\u662f\u54ea\u4e00\u5e74\uff0c\u662f\u8fd9\u4e00\u5e74\u7684\u7b2c\u51e0\u5929\uff0c\u53ea\u9700\u8981\u627e\u51fa\u6708\u4efd\u548c\u65e5\u671f\u5373\u53ef\n\n\u53d1\u73b0 $Q\\le 10^5$\uff0c\u5176\u5b9e\u53ef\u4ee5\u7b97\u51fa\u8fd9\u4e00\u5e74\u768412\u4e2a\u6708\u5404\u6709\u591a\u5c11\u5929\uff0c\u7136\u540e\u4ece\u4e00\u6708\u5f00\u59cb\u679a\u4e3e\uff0c\u5c31\u5f88\u5bb9\u6613\u7b97\u51fa\u662f\u51e0\u6708\u51e0\u65e5\n\n\u6ce8\u610f\u524d\u9762\u7ed9\u8d1f\u6570\u5e74\u4efd\u52a0\u4e861\uff0c\u73b0\u5728\u8981\u51cf\u56de\u6765\n\n\u6ce8\u610f\u4e8b\u9879\uff1a\n1. 1600\u5e74\u4e4b\u524d\u7684\u95f0\u5e74\u5224\u5b9a\u548c1600\u5e74\u4e4b\u540e\u4e0d\u540c\uff01\u6ce8\u610f\u533a\u5206\n2. 1582\u5e74\u768410\u6708\u53ea\u670921\u5929\uff01\n3. \u5982\u679c\u4f60\u5f97\u51fa\u7684\u7b54\u6848\u662f1582\u5e7410\u67085~21\u65e5\uff0c\u7ed9\u65e5\u671f\u52a0\u4e0a10\uff011582.10.5~1582.10.14\u4e0d\u5b58\u5728\uff01\n\n\u6ce8\u610f\u4e8b\u98793\u6210\u529f\u5bfc\u81f4\u6211100pts -> 40pts /kk\n\n\u5f53\u7136 \u8fd8\u6709\u4e00\u79cd\u601d\u8def\u662f\u76f4\u63a5\u9884\u5904\u7406\u51fa-4713\u52301600\u95f4\u7684\u6bcf\u4e00\u5929\u662f\u5728\u51e0\u5e74\u51e0\u6708\u51e0\u65e5 \u540c\u7406\u5904\u7406\u4e00\u4e2a400\u5e74\u5468\u671f\u5185\u7684\u6bcf\u4e00\u5929 \n\n\u90a3\u79cd\u65b9\u6cd5\u867d\u7136\u5728\u8fd0\u884c\u901f\u5ea6\u4e0a\u7a0d\u5feb\uff0c\u4f46\u662f\u4ee3\u7801\u96be\u5ea6\u548c\u7ec6\u8282\u4e2a\u4eba\u611f\u89c9\u8fd8\u662f\u8981\u6bd4\u8fd9\u79cd\u591a\u51fa\u4e0d\u5c11\n\n\u611f\u89c9\u81ea\u5df1\u7684\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u8fd8\u662f\u5f88\u9ad8\u7684\u4e86\u5427 \u53d8\u91cf\u6bd4\u8f83\u5c11\u5e94\u8be5\u90fd\u80fd\u770b\u61c2\u662f\u4ec0\u4e48\u610f\u601d\n\n### \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n\ntemplate <typename T>\ninline void read(T &num) {\n\tT x = 0, f = 1; char ch = getchar();\n\tfor (; ch > '9' || ch < '0'; ch = getchar()) if (ch == '-') f = -1;\n\tfor (; ch <= '9' && ch >= '0'; ch = getchar()) x = (x << 3) + (x << 1) + (ch ^ '0');\n\tnum = x * f; \n}\n\nll ttt, M = 5000; //M\u4f5c\u4e3a\u6570\u7ec4\u7684\u504f\u79fb\u91cf\uff0c\u9632\u6b62\u6570\u7ec4\u8d8a\u754c \nll n;\nll months[13] = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}, nmonth[13];\nll Aday[10005], Bday[10005]; \n//Aday[x]:-4713~x\u5e74\u5171\u6709\u591a\u5c11\u5929 \n//Bday[x]:\u516c\u5386\u4e0b400\u5e74\u5468\u671f\u7684\u524dx\u5e74\u5171\u6709\u591a\u5c11\u5929\nll days400 = 146097;\n\nvoid initrun() {\n\tfor (ll i = -4712; i <= 1600; i++) Aday[i+M] = 365;\n\tfor (ll i = -4712; i <= 1600; i += 4) {\n\t\tAday[i+M] = 366;\n\t}\n\tAday[1582+M] = 355; //!!!\n\tfor (ll i = -4712; i <= 1600; i++) Aday[i+M] += Aday[i+M-1];\n\t\n\tfor (ll i = 1; i <= 400; i++) {\n\t\tif ((i % 400 == 0) || (i % 4 == 0 && i % 100 != 0)) Bday[i] = Bday[i-1] + 366;\n\t\telse Bday[i] = Bday[i-1] + 365; \n\t} \n}\n\nvoid printans(ll y, ll m, ll d) {\n\tif (y < 0) printf(\"%lld %lld %lld BC\\n\", d, m, -y);\n\telse printf(\"%lld %lld %lld\\n\", d, m, y);\n}\n\nvoid inyear(ll y, ll d) { //y\u5e74\u7684\u7b2cd\u5929 \n\tfor (ll i = 1; i <= 12; i++) nmonth[i] = months[i];\n\tif (y == 1582) { //in 1582 \n\t\tnmonth[10] = 21;\n\t} else if (y <= 1600) { //before 1600\n\t\tif (y % 4 == 0) nmonth[2] = 29;\n\t} else { //after 1600\n\t\tif ((y % 400 == 0) || (y % 4 == 0 && y % 100 != 0)) { \n\t\t\tnmonth[2] = 29;\n\t\t}\n\t}\n    \t//\u7b97\u51fay\u5e74\u6bcf\u4e2a\u6708\u7684\u5929\u6570\n\tif (y <= 0) y--; //\u6062\u590d\u8d1f\u6570\u5e74\u4efd \n\tfor (ll i = 1; i <= 12; i++) {\n\t\tif (d <= nmonth[i]) {\n\t\t\tif (y == 1582 && i == 10 && d >= 5) d += 10; //100pts->40pts\n\t\t\tprintans(y, i, d);\n\t\t\tbreak;\n\t\t} else {\n\t\t\td -= nmonth[i];\n\t\t}\n\t}\n}\n\nvoid solve1(ll x) { //before 1600\n\tll l = -4712, r = 1600, mid = 0, ans = 0;\n\twhile (l <= r) {\n\t\tmid = (l + r) >> 1;\n\t\tif (Aday[mid+M] >= x) {\n\t\t\tans = mid;\n\t\t\tr = mid - 1;\n\t\t} else l = mid + 1;\n\t}\n\tinyear(ans, x - Aday[ans+M-1]);\n}\n\nvoid solve2(ll x) { //after 1600\n\tll p = x / days400;\n\tll q = x % days400;\n\tif (!q) {\n\t\tp--; q = days400;\n\t}\n\tll l = 1, r = 400, mid = 0, ans = 0;\n\twhile (l <= r) {\n\t\tmid = (l + r) >> 1;\n\t\tif (Bday[mid] >= q) {\n\t\t\tans = mid;\n\t\t\tr = mid - 1;\n\t\t} else l = mid + 1;\n\t}\n\tinyear(1600 + p * 400 + ans, q - Bday[ans-1]);\n}\n\nint main() {\n\tread(ttt);\n\tinitrun();\n\twhile (ttt--) {\n\t\tread(n); n++; \n\t\tif (n <= Aday[1600+M]) { //before 1600\n\t\t\tsolve1(n);\n\t\t} else { //after 1600\n\t\t\tsolve2(n - Aday[1600+M]);\n\t\t} \n\t}\t\n\treturn 0;\n} \n```",
        "postTime": 1604803202,
        "uid": 153123,
        "name": "AK_Dream",
        "ccfLevel": 9,
        "title": "\u5112\u7565\u65e5[CSP2020]"
    },
    {
        "content": "**Update: \u88ab\u5b98\u65b9\u6570\u636e hack \u4e86\u4e00\u4e2a\u70b9\uff0c\u5df2\u4fee\u6b63\uff0c\u5bf9\u6b64\u8868\u793a\u62b1\u6b49\u3002**\n\n[\u9898\u9762](https://www.luogu.com.cn/problem/P7075)\n\n# \u5206\u6790\n\n\u542c\u8bf4\u53ef\u4ee5\u7528\u4e8c\u5206\u505a\uff0c\u4f46\u662f\u6211\u76f4\u63a5\u6a21\u62df\u3002\n\n\u6700\u5f00\u59cb\u6211\u5148\u76f4\u63a5\u628a\u6240\u6709\u7684\u65e5\u5b50\u76f4\u63a5\u8f6c\u6362\u6210\u5112\u7565\u5386\u3002\n\n\u82e5\u8f6c\u6362\u540e\u6ca1\u6709\u8d85\u8fc7\u516c\u5143\u5e74\uff0c\u90a3\u4e48\u76f4\u63a5\u8f93\u51fa\uff0c**\u7ed3\u675f**\u3002\n\n\u82e5\u8d85\u8fc7\u516c\u5143\u5e74\uff0c\u5148\u7ed9\u5e74\u53f7 $+1$ \uff08\u8df3\u8fc7 $0$ \u5e74\uff09\uff0c\u7136\u540e\u518d\u5224\u65ad\uff1a\n\n\u82e5\u6ca1\u6709\u8d85\u8fc7 1582.10.5\uff0c\u76f4\u63a5\u8f93\u51fa\u3002\n\n\u5426\u5219\uff0c\u7ed9\u5929\u6570\u52a0\u4e0a\u5341\u5929\uff0c\u7136\u540e\u5f00\u59cb\u8865\u683c\u91cc\u9ad8\u5229\u5386\u4e0e\u5112\u7565\u5386\u4e4b\u95f4\u7684\u5dee\u8ddd\uff1a\u6bcf 400 \u5e74 3 \u5929\u7684\u5dee\u8ddd\u3002\n\n\u8865\u5b8c\u4e4b\u540e\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u6ce8\u610f\u4f60\u9700\u8981\u5bf9\u8fd9\u4e2a\u505a\u6cd5\u8fdb\u884c\u52a0\u901f\uff0c\u4e0d\u7136\u4f1a TLE 10 pts\u3002\n\n\u7ec6\u8282\u5728\u4ee3\u7801\u91cc\u6709\u3002\n\n# \u4ee3\u7801\n\n\u6bd4\u8f83\u4e11\u964b\u3002\u8003\u573a\u4e0a\u70b8\u4e86 90 pts\uff0c\u56e0\u4e3a\u7b2c\u4e00\u6b21\u819c $1461$ \u65f6\u6ca1\u6709\u7279\u6b8a\u5904\u7406\u5bfc\u81f4 `day` \u76f4\u63a5\u7b49\u4e8e $0$\uff0c\u76f4\u63a5\u7206\u70b8\u3002\u540e\u6765\u88ab\u5b98\u65b9\u6570\u636e\u53c8 hack \u4e00\u4e2a\u70b9\uff0c\u662f\u4e2d\u95f4\u7684\u5730\u65b9\u819c $146097$ \u65f6\u6ca1\u6709\u7279\u6b8a\u5904\u7406\u7684\u539f\u56e0\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntemplate <typename T>\nT read(void) {\n    T f = 1, num = 0;\n    char c = getchar();\n    while (c < '0' || c > '9') {\n        if (c == '-') f = -f;\n        c = getchar();\n    }\n    while (c >= '0' && c <= '9') {\n        num = (num << 3) + (num << 1) + (c ^ 48);\n        c = getchar();\n    }\n    return f * num;\n}\n\nconst int days[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};\n\ninline int daysBefore(int year, int month) {  //\u5112\u7565\u5386\u5929\u6570\n    if (month != 2) return days[month - 1];\n    if ((year > 0 && year % 4 == 0) || (year < 0 && year % 4 == -1)) return 29;\n    return 28;\n}\ninline int daysNear(int year, int month) {  //\u683c\u91cc\u9ad8\u5229\u5386\u5929\u6570\n    if (month != 2) return days[month - 1];\n    if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) return 29;\n    return 28;\n}\ninline int daysInYear(int year) {  //\u683c\u91cc\u9ad8\u5229\u5386\u6bcf\u5e74\u5929\u6570\n    if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) return 366;\n    return 365;\n}\n\nint main() {\n    int Q = read<int>();\n    while (Q--) {\n        long long day = read<long long>();\n        int year = -4713 + day / 1461 * 4, month = 1;\n        //4\u5e74\u4e00\u4e2a\u5faa\u73af\uff0c4\u5e74\u5929\u6570\u5171365*4+1=1461\n        day %= 1461;\n        day++;  //\u6ce8\u610f\u5f00\u59cb\u7684\u65f6\u5019\u662f\u4e00\u6708\u4e00\u53f7\uff0c\u6240\u4ee5\u8981\u52a0\u4e00\n        //\u516c\u5143\u5e74\u7279\u5224\n        if (year >= 0) year++;\n        //\u66b4\u529b\u5f25\u8865\u5269\u4e0b\u7684\u6708\u4efd\n        while (day > daysBefore(year, month)) {\n            day -= daysBefore(year, month);\n            if (++month == 13) month = 1, year++;\n            if (year == 0) year++;\n        }\n        if (year < 0)  //\u516c\u5143\u524d\n            printf(\"%lld %d %d BC\\n\", day, month, -year);\n        else {\n            if (year > 1582 || (year == 1582 && month > 10) || (year == 1582 && month == 10 && day > 4)) {\n                //\u5982\u679c\u8d85\u8fc7\u4e861582.10.4\n                day += 10;  //\u8865\u4e0a\u5341\u5929\n                //\u66b4\u529b\u5904\u7406\u6708\u4efd\n                if (daysBefore(year, month) < day) {\n                    day -= daysBefore(year, month);\n                    if (++month == 13) month = 1, year++;\n                }\n                //\u6bcf400\u5e74\u8865\u4e0a3\u5929\n                long long plus = (year - 1600) / 400 * 3;\n                //\u66b4\u529b\u679a\u4e3e\u4e0d\u8db3400\u5e74\u7684\u5269\u4f59\u90e8\u5206\n                for (register int i = (year - 1600) / 400 * 400 + 1600; i < year || (i == year && month > 2); i += 100)\n                    if (i % 400 != 0) plus++;\n                //\u52a0\u4e0a\n                day += plus;\n                //\u5148\u5c06\u6ca1\u6709\u6ee1\u7684\u5e74\u4efd\u8865\u6ee1\n                while (daysNear(year, month) < day) {\n                    day -= daysNear(year, month);\n                    if (++month == 13) {\n                        month = 1, year++;\n                        break;\n                    }\n                }\n                //\u6bcf400\u5e74\u4e00\u4e2a\u8f6e\u56de\uff0c400*365+100-4+1=146097\u5929\n                day--, year += day / 146097 * 400, day %= 146097, day++;\n                while (daysInYear(year) < day) day -= daysInYear(year++);  //\u5bf9\u4e8e\u591a\u4f59\u7684\u5e74\u4efd\u52a0\u901f\u5904\u7406\n                //\u5904\u7406\u5269\u4f59\u51fa\u7684\u6708\u4efd\n                while (daysNear(year, month) < day) {\n                    day -= daysNear(year, month);\n                    if (++month == 13) month = 1, year++;\n                }\n            }\n            printf(\"%lld %d %d\\n\", day, month, year);\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1604797632,
        "uid": 98482,
        "name": "Macesuted",
        "ccfLevel": 0,
        "title": "P7075"
    },
    {
        "content": "\u5199\u4e86\u4e2a\u5f88\u4e11\u7684\u4ee3\u7801\u3002\u56e0\u4e3a\u662f\u4e2a\u5927\u6a21\u62df\uff08\u6ca1\u5199\u4e8c\u5206\uff09\u8bb2\u4e00\u4e0b\u5177\u4f53\u5b9e\u73b0\u601d\u8def\u3002\u56e0\u4e3a\u662f\u8003\u573a\u4ee3\u7801\u6240\u4ee5\u4e11\u7684 1p\uff0c\u51fd\u6570\u4e5f\u6ca1\u88c5\u601d\u8def\u4e5f\u6ca1\u5199\uff0c\u6240\u4ee5\u4ee3\u7801\u7528\u7cbe\u795e\u9886\u7565\u5373\u53ef\u3002\n\n\u8fd9\u4e2a\u4e1c\u897f\u6709\u70b9\u957f\u3002\u8003\u8651\u4e00\u4e0b\u600e\u4e48\u628a\u5b83\u641e\u5f97\u597d\u770b\u4e00\u70b9\u3002\n\n- \u516c\u5143\u524d\u7684\u95f0\u5e74\u4e0e\u516c\u5143\u4e0d\u592a\u4e00\u6837\uff0c\u62c6\u5f00\u3002\u6ce8\u610f\u6ca1\u6709\u516c\u5143 $0$ \u5e74\uff1b   \n- $1582.10.5 \\sim 1582.10.14$ \u4e0d\u5b58\u5728\uff0c\u5de6\u53f3\u62c6\u5f00\uff1b   \n- \u89c2\u770b\u6570\u636e\u8303\u56f4\uff0c\u5e74\u4efd\u53ef\u80fd\u5f88\u5927\uff0c\u9700\u8981\u4e00\u4e2a\u4f18\u79c0\u7684\u7b97\u6cd5\u53bb\u7b97\u5e74\u4efd\u3002\u8fd9\u91cc\u62c6\u6210 $400$ \u5269\u4e0b\u7684\u53ef\u4ee5\u66b4\u529b\u3002\u6bd4\u8f83\u597d\u5904\u7406\u7684\u662f\u5c06 $1582.10.15 \\sim 1600.12.31$ \u62c6\u5f00\uff0c\u5269\u4e0b\u7684\u5904\u7406\u3002\n\n\u901a\u8fc7\u8ba1\u7b97\u5668\u53ef\u4ee5\u5f97\u51fa\uff1a\n\n- $0 \\leq r \\leq 1721423$\uff0c\u6b64\u65f6\u662f\u516c\u5143\u524d\uff1b   \n- $1721424 \\leq r \\leq 2299160$\uff0c\u6b64\u65f6\u662f\u516c\u5143\uff0c\u4f46\u662f\u662f\u5728 $1582.10.4$ \u4e4b\u524d\uff1b   \n- $2299161 \\leq r \\leq 2299238$\uff0c\u6b64\u65f6\u5728 $1582.10.15 \\sim 1600.12.31$ \u8303\u56f4\u5185\uff1b   \n- \u5269\u4e0b\u7684\u66b4\u529b\u7b97\u51fa $400$ \u5e74\u4e3a $146097$ \u5929\u3002\u968f\u4fbf\u7b97\u7b97\u5c31\u80fd\u7b97\u51fa\u6765\u3002\n\n\u6ce8\u610f\u4e00\u4e0b\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\uff0c\u63a8\u8350\u5c06\u65e5\u671f\u7684\u591a\u5c11\u5929\u540e\u5199\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u6bd4\u8f83\u597d\u770b\u3002\u4e0d\u81f3\u4e8e\u6bcf\u4e2a\u60c5\u51b5\u90fd\u8981\u5199\u4e00\u904d\uff0c\u867d\u7136\u4e5f\u4e0d\u96be\u6253\u3002\n\n\u51e0\u4e2a\u5751\u70b9\uff1a\n\n- \u5f85\u4f1a\u513f\u9644\u4e2a\u6570\u636e\u770b\u4f60\u7684\u8fb9\u754c\uff1b    \n- \u8d1f\u6570\u53d6\u6a21\u7b54\u6848\u662f\u8d1f\u6570\uff0c\u6240\u4ee5 `(-1%4==1)==false`\uff1b   \n- \u95f0\u5e74\u5224\u65ad\u6ce8\u610f\u4e8c\u8def\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\uff1b   \n- \u4fee\u6539\u6708\u548c\u65e5\u7684\u65f6\u5019\u4e0d\u8981\u6df7\u6dc6\u4e86\uff1b   \n- \u6ce8\u610f\u5f00 `long long`\u3002\n\n\u8d34\u4e2a[\u4ee3\u7801](https://paste.ubuntu.com/p/mDBckGfYhq/)\u3002\u56e0\u4e3a\u66b4\u529b\u8dd1\u4e86\u56db\u767e\u5e74\u6ca1\u6709\u6253\u8868\u4f18\u5316\uff0c\u6240\u4ee5\u4f1a\u5f88\u6162\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(Qc)$\uff0c\u5176\u4e2d $c$ \u662f\u4e00\u4e2a\u5e38\u6570\uff0c\u6700\u574f\u7b49\u4e8e $400+12+31=443$\u3002\n\n\u6570\u636e\u70b9\uff1a[julian4.in](https://paste.ubuntu.com/p/8RWQY9rRv6/) & [julian4.ans](https://paste.ubuntu.com/p/FsbbynfTj5/)\u3002\u8fd9\u4e2a\u6570\u636e\u70b9\u6db5\u76d6\u4e86\u4ee5\u4e0b\u5751\u70b9\uff1a\n\n- \u516c\u5143\u524d\u95f0\u5e74\uff1b   \n- \u4e0d\u5b58\u5728\u7684\u516c\u5143 $0$ \u5e74\uff1b   \n- \u9002\u7528\u5112\u7565\u5386\u7684\u516c\u5143\u95f0\u5e74\uff08$4,100,400$\uff09\uff1b   \n- \u4e0d\u5b58\u5728\u7684 $1582.10.5 \\sim 1582.10.14$\uff1b   \n- $1600,1601$ \u4e0e $1583$ \u7684\u8fb9\u754c\uff08\u8fd9\u4efd\u4ee3\u7801\u7684\u9700\u8981\u7684\u8c03\u8bd5\u70b9\uff09\uff1b   \n- \u4f7f\u7528\u683c\u91cc\u9ad8\u5229\u5386\u7684\u516c\u5143\u95f0\u5e74\uff08$4,100,400$\uff09\uff1b   \n- \u7b54\u6848\u6bd4\u8f83\u5927\u7684\u70b9\u3002\n\n\u5e0c\u671b\u80fd\u6709\u6240\u5e2e\u52a9\u3002\n\n\u54c7\u6211\u7684\u6570\u636e\u8fd8\u6ca1\u968f\u673a\u6570\u636e\u5f3a\uff0c\u6743\u5f53\u73a9\u73a9\u5c31\u597d\u4e86\u3002",
        "postTime": 1604763443,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "CSP-S2020 T1 \u9898\u89e3"
    },
    {
        "content": "## $\\stackrel{\\text{\u5e9f\u8bdd}}{\\textbf{\u524d\u8a00}}$\n\n- \u8fd9\u6761\u9898\u76ee\u6210\u529f\u52a0\u5195\u6210\u4e3a\u65b0\u4e00\u4ee3\u6bd2\u7624\u9898\u6211\u662f\u6ca1\u60f3\u5230\u7684\u3002\u4f46 $\\frak{u1s1}$ \uff0c\u4e2a\u4eba\u611f\u89c9\u8fd9\u9898\u4e0d\u662f\u5f88\u96be\uff0c\u4e3b\u8981\u8003\u7684\u9009\u624b\u7684\u7ec6\u5fc3\u7a0b\u5ea6\u3002\n\n- \u4e2a\u4eba\u603b\u7ed3\uff0c\u53ea\u8981**\u4e0d\u8d2a**\uff0c\u8fd9\u9898\u8fd8\u662f\u633a\u5bb9\u6613\u505a\u7684\u3002\n\n## \u9898\u89e3\n\n\u8ba9\u6211\u4eec\u9996\u5148\u89e3\u51b3\u4e00\u4e9b\u9898\u9762\u4e2d\u7ed9\u51fa\u7684\u7279\u6b8a\u60c5\u51b5\u3002\n\n- \u8d77\u59cb\u65f6\u95f4\u4e3a\u516c\u5143\u524d $4713$ \u5e74 $1$ \u6708 $1$ \u65e5\u3002\n\n- \u516c\u5143 $1582$ \u5e74 $10$ \u6708 $4$ \u65e5\u4ee5\u524d\uff0c\u5f53\u4e00\u4e2a\u5e74\u4efd\u88ab\u56db\u6574\u9664\u65f6\u4e3a\u95f0\u5e74\u3002\u4f46\u662f\u5982\u679c\u4e00\u4e2a\u5e74\u4efd\u5728\u516c\u5143\u524d\uff0c\u5219\u5e94\u5f53\u5c06\u8fd9\u4e2a\u5e74\u4efd\u51cf\u53bb $1$ \u540e\u8fdb\u884c\u95f0\u5e74\u5224\u5b9a\u3002\n\n- \u516c\u5143 $1582$ \u5e74 $10$ \u6708 $5$ \u65e5\u81f3 $10$ \u6708 $14$ \u65e5\u88ab\u5220\u9664\u3002\n\n- \u516c\u5143 $1582$ \u5e74 $10$ \u6708 $15$ \u65e5\u4ee5\u540e\uff0c\u4e00\u4e2a\u5e74\u4efd\u4e3a\u95f0\u5e74\uff0c\u5f53\u4e14\u4ec5\u5f53\u5b83\u88ab\u56db\u767e\u6574\u9664\u6216\u8005\u80fd\u88ab\u56db\u6574\u9664\u4f46\u4e0d\u80fd\u88ab\u4e00\u767e\u6574\u9664\u3002\n\n- \u516c\u5143\u524d\u4e00\u5e74\u7684\u4e0b\u4e00\u5e74\uff0c\u5c31\u662f\u516c\u5143\u5143\u5e74\u3002\n\n\u8ba9\u6211\u4eec\u5148\u628a\u95f0\u5e74\u5224\u5b9a\u5199\u51fa\u6765\u3002\u4e3a\u4e86\u533a\u5206\u516c\u5143\u524d\u540e\uff0c\u6211\u4eec\u7528\u6570\u5b57\u7684\u6b63\u8d1f\u8fdb\u884c\u533a\u5206\u3002\n\n```cpp\nbool chk(i64 y){\n\tif(y<=1582ll){\n\t\tif(y<0ll) y=-y-1ll; return y%4ll==0ll;\n\t}\n\treturn (y%400ll==0ll)||(y%4ll==0ll&&y%100ll!=0ll);\n}\n```\n\n\u9898\u76ee\u7ed9\u4e86\u76f8\u5f53\u591a\u7684\u4fe1\u606f\uff0c\u5c24\u5176\u662f\u975e\u5e38\u591a\u7684\u65f6\u6bb5\u5206\u7c7b\u2026\u2026\u4f46\u662f\uff0c\u5982\u679c\u4f60\u4ed4\u7ec6\u601d\u8003\u65f6\u6bb5\u7684\u957f\u5ea6\uff0c\u4f60\u80fd\u53d1\u73b0\uff0c\n\n$$\\textbf{4713.1.1 BC \u81f3 1582.10.15 \u4e00\u5171\u4e0d\u8d85\u8fc7 2.5}\\boldsymbol{\\times 10^6 }\\textbf{\u5929}$$\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u80fd\u975e\u5e38\u7b80\u5355\u7684\u5199\u51fa\u8fd9\u6837\u4e00\u4efd\u4ee3\u7801\uff0c\u76f4\u63a5\u679a\u4e3e\u8fd9\u6240\u6709\u5929\u7684\u60c5\u51b5\u3002\n\n\n```cpp\nup(1,2305447,i){\n\tY[i]=Y[i-1],M[i]=M[i-1],D[i]=D[i-1]+1;\n\tif(M[i]==12ll&&D[i]==32ll){\n\t\tif(Y[i]==-1) Y[i]=1; else ++Y[i];\n\t\tM[i]=1,D[i]=1;\n\t} else if(Y[i]==1582ll&&M[i]==10ll&&D[i]==5ll){\n\t\tY[i]=1582ll,M[i]=10ll,D[i]=15ll;\n\t} else if(M[i]==2ll&&chk(Y[i])&&D[i]==29ll){\n\t\tcontinue;\n\t} else if(D[i]>MD[M[i]]) ++M[i],D[i]=1;\n}\n//\u5176\u4e2dYi,Mi,Di\u5206\u522b\u4e3a\u7b2ci\u5929\u7684\u5e74\u4efd\u3001\u6708\u4efd\u3001\u65e5\u6570\u3002\n//chk(Yi) \u662f\u68c0\u67e5Yi\u5e74\u662f\u5426\u662f\u95f0\u5e74\u3002\n```\n\n- \u7ecf\u8fc7\u4e00\u4e9b\u66b4\u529b\u8ba1\u7b97\uff0c\u6211\u4eec\u80fd\u53d1\u73b0\uff0c$1600.1.1$ \u7684\u5112\u7565\u65e5\u662f $2305448$ \u3002\n\n\u597d\u4e86\uff0c\u6211\u4eec\u5df2\u7ecf\u780d\u6389\u8fd9\u9898\u4e00\u534a\u7684\u96be\u5ea6\u4e86\u3002\u4e0b\u9762\u8003\u8651 $1600$ \u5e74\u4e4b\u540e\u7684\u4e8b\u60c5\u3002\n\n\u8981\u6ce8\u610f\u7684\u662f\uff0c**\u4ece\u5929\u6570\u63a8\u65e5\u671f\u603b\u662f\u6bd4\u4ece\u65e5\u671f\u63a8\u5929\u6570\u96be**\u3002\n\n\u8fd9\u91cc\u542f\u53d1\u6211\u4eec\u4e8c\u5206\u5e74\u4efd\uff0c\u8ba1\u7b97\u5b83\u548c $1600.1.1$ \u7684\u65e5\u671f\u4e4b\u5dee\u3002\uff08\u4e3a\u4ec0\u4e48\u662f\u5dee\u503c\uff1f\u56e0\u4e3a\u5dee\u503c\u53ef\u4ee5\u5ffd\u7565\u6389\u4e00\u4e9b\u53ef\u80fd\u5bfc\u81f4\u7684\u9519\u8bef\uff0c\u56e0\u4e3a\u4e24\u4e2a\u9519\u8bef\u76f8\u51cf\u540e\u4f1a\u4e92\u76f8\u6d88\u53bb\uff0c\u53ef\u4ee5\u5927\u5927\u63d0\u5347\u8c03\u5bf9\u7684\u6982\u7387\uff09\u3002\u6708\u4efd\u548c\u65e5\u671f\u90fd\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u3002\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\u3002\n\n```cpp\n//\u8ba1\u7b97\u7edd\u5bf9\u65e5\u671f\n#define f(x) ((x)/4-(x)/100+(x)/400)\ni64 clc(i64 y,i64 m,i64 d){\n\treturn 365ll*(y-1ll)+f(y-1ll)+((chk(y)&&m>=3ll)?1ll:0ll)+S[m-1ll]+d;\n//\u8fd9\u90e8\u5206\u5e76\u4e0d\u9700\u8981\u975e\u5e38\u4e25\u683c\uff0c\u56e0\u4e3a\u6211\u4eec\u53ea\u9700\u8981\u8ba1\u7b97\u65e5\u671f\u548c1600.1.1\u7684\u5dee\u503c\u3002\n}\n\n//\u4e3b\u7a0b\u5e8f\u7247\u6bb5\ndn(qread(),1,Q){\n\ti64 t=qread(); if(t<=2305447ll){\n\t\ti64 y=Y[t],m=M[t],d=D[t];\t//\u76f4\u63a5\u4ece\u8868\u4e2d\u83b7\u53d6\u7b54\u6848\n\t\tif(y<0) printf(\"%lld %lld %lld BC\\n\",d,m,-y);\t//\u516c\u5143\u524d\n\t\telse    printf(\"%lld %lld %lld\\n\",d,m, y);\t\t//\u516c\u5143\u540e\n\t} else {\n\t\tt-=2305448ll; i64 y=0,m=1,d=1;\n\t\tdn(30,0,i){\t//\u4e8c\u5206\n\t\t\tif(clc(y|(1<<i),m,d)-clc(1600,1,1)<=t) y|=1<<i;\n\t\t}\n\t\tup(1,12,i) if(clc(y,i,d)-clc(1600,1,1)<=t) m=i;\t//\u679a\u4e3e\u6708\n\t\tup(1,31,i) if(clc(y,m,i)-clc(1600,1,1)<=t) d=i;\t//\u679a\u4e3e\u65e5\n\t\tprintf(\"%lld %lld %lld\\n\",d,m,y);\n\t}\n}\n```\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define up(l,r,i) for(int i=l,END##i=r;i<=END##i;++i)\n#define dn(r,l,i) for(int i=r,END##i=l;i>=END##i;--i)\nusing namespace std;\ntypedef unsigned int u32;\ntypedef long long    i64;\ntypedef unsigned long long u64;\ni64 qread(){\n\ti64 r=0,w=1,c=0;\n\tfor(c=getchar();!isdigit(c);c=getchar()) w=(c=='-'?-1:1); r=c-'0';\n\tfor(c=getchar(); isdigit(c);c=getchar()) r=r*10+c-'0';\n\treturn r*w;\n}\nconst int MD[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nconst int MAXN =2400000+3;\nint Y[MAXN],M[MAXN],D[MAXN],S[13];\nbool chk(i64 y){\n\tif(y<=1582ll){\n\t\tif(y<0ll) y=-y-1ll; return y%4ll==0ll;\n\t}\n\treturn (y%400ll==0ll)||(y%4ll==0ll&&y%100ll!=0ll);\n}\n#define f(x) ((x)/4-(x)/100+(x)/400)\ni64 clc(i64 y,i64 m,i64 d){\n\treturn 365ll*(y-1ll)+f(y-1ll)+((chk(y)&&m>=3ll)?1ll:0ll)+S[m-1ll]+d;\n}\nint main(){\n\tfreopen(\"julian.in\",\"r\",stdin);\n\tfreopen(\"julian.out\",\"w\",stdout);\n\tY[0]=-4713ll,M[0]=1ll,D[0]=1ll; up(1,12,i) S[i]=S[i-1]+MD[i];\n\tup(1,2305447,i){\n\t\tY[i]=Y[i-1],M[i]=M[i-1],D[i]=D[i-1]+1;\n\t\tif(M[i]==12ll&&D[i]==32ll){\n\t\t\tif(Y[i]==-1) Y[i]=1; else ++Y[i];\n\t\t\tM[i]=1,D[i]=1;\n\t\t} else if(Y[i]==1582ll&&M[i]==10ll&&D[i]==5ll){\n\t\t\tY[i]=1582ll,M[i]=10ll,D[i]=15ll;\n\t\t} else if(M[i]==2ll&&chk(Y[i])&&D[i]==29ll){\n\t\t\tcontinue;\n\t\t} else if(D[i]>MD[M[i]]) ++M[i],D[i]=1;\n\t}\n\tdn(qread(),1,Q){\n\t\ti64 t=qread(); if(t<=2305447ll){\n\t\t\ti64 y=Y[t],m=M[t],d=D[t];\n\t\t\tif(y<0) printf(\"%lld %lld %lld BC\\n\",d,m,-y);\n\t\t\telse    printf(\"%lld %lld %lld\\n\",d,m, y);\n\t\t} else {\n\t\t\tt-=2305448ll; i64 y=0,m=1,d=1;\n\t\t\tdn(30,0,i){\n\t\t\t\tif(clc(y|(1<<i),m,d)-clc(1600,1,1)<=t) y|=1<<i;\n\t\t\t}\n\t\t\tup(1,12,i) if(clc(y,i,d)-clc(1600,1,1)<=t) m=i;\n\t\t\tup(1,31,i) if(clc(y,m,i)-clc(1600,1,1)<=t) d=i;\n\t\t\tprintf(\"%lld %lld %lld\\n\",d,m,y);\n\t\t}\n\t}\n\treturn 0;\n}\n//\u8fd9\u662f\u8d5b\u65f6\u4ee3\u7801\uff0c\u9a6c\u8702\u53ef\u80fd\u6bd4\u8f83\u4e11\uff0c\u8bf7\u89c1\u8c05\u3002\n\n```",
        "postTime": 1604759853,
        "uid": 330759,
        "name": "\u56e7\u4ed9",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\u3011"
    },
    {
        "content": "# \u9898\u89e3 - $\\mathrm{P7075}$\n\n## \u9898\u76ee\u610f\u601d\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P7075)\n\n## $\\mathrm{Sol}$\n\n\u7ed9\u4e00\u79cd\u4e8c\u5206\u7684\u505a\u6cd5\uff1f\n\n\u6211\u4eec\u8003\u8651\u5148\u505a \u516c\u5143\u524d $4713 \\sim 1$ \u5e74\uff0c\u6211\u4eec\u9884\u5904\u7406\u7ecf\u8fc7\u6574 $x$ \u5e74\u9700\u8981\u51e0\u5929\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u7b97\u51fa $n$ \u5929\u662f\u5728\u54ea\u4e00\u5e74\uff1f\n\n\u627e\u5230\u90a3\u4e00\u5e74\u6211\u4eec\u53ea\u8981 12 \u4e2a\u6708\u4efd\u4f9d\u6b21\u6a21\u62df\u4e00\u904d\u5373\u53ef\u3002\u8fd9\u6837\u5df2\u7ecf\u53ef\u4ee5\u5f97\u5230 $40$ \u5206\u3002\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u516c\u56ed $1 \\sim 10^9 $ \u5e74\u3002\u6211\u4eec\u8003\u8651\u4e8c\u5206 $n$ \u5929\u540e\u5728\u54ea\u4e00\u5e74\u3002\u6211\u4eec\u9996\u5148\u8981\u4ece\u516c\u5143 $1$ \u5e74\u5f00\u59cb\u4e8c\u5206\uff0c\u6240\u4ee5 $n$ \u8981\u51cf\u53bb 1721424 \u3002\u4e8c\u5206\u5982\u4f55\u5224\u5b9a\uff1f\u5047\u8bbe\u5f53\u524d\u5e74\u4e3a $year$\u3002\n\n* **\n\n\u5982\u679c $year\\leq 1582$ \u90a3\u4e48\u95f0\u5e74\u4e2a\u6570\u5373\u4e3a $\\frac{year}{4}$\uff0c\u90a3\u4e48\u5230 $year$ \u5e74\u7684\u5929\u6570\u4e3a\uff1a $365\\times year+(\\frac{year}{4})$\n\n\u5426\u5219\u7a0d\u5fae\u5bb9\u65a5\u4e00\u4e0b\u5f97\u5230\u95f0\u5e74\u4e2a\u6570\u4e3a\uff1a$gs=\\frac{1582}{4}+\\frac{year}{4}-\\frac{1581}{4}+\\frac{year}{400}-\\frac{1581}{4}-\\frac{year}{100}+\\frac{1581}{4}$,\n\n\u90a3\u4e48\u5230 $year$ \u5e74\u7684\u5929\u6570\u4e3a\uff1a $365\\times year+gs-10$ \u51cf\u53bb $10$ \u662f\u56e0\u4e3a $1582$ \u5e74\u6709 $10$ \u5929\u662f\u8981\u53bb\u6389\u7684\u3002\n\n* **\n\n\u6700\u540e\u6211\u4eec\u53ea\u8981\u518d\u679a\u4e3e $12$ \u4e2a\u6708\u4efd\u5373\u53ef\uff0c\u6ce8\u610f\u7ec6\u8282\uff01\uff01\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(q\\times \\log(10^9)+q\\times 12)$\n\n## $\\mathrm{Code}$\n\n```cpp\n#include <bits/stdc++.h>\n#define For(i,a,b) for ( int i=(a);i<=(b);i++ ) \n#define Dow(i,a,b) for ( int i=(a);i>=(b);i-- ) \n#define int long long \nusing namespace std;\ninline int read()\n{\n\tint x=0; char ch=getchar();\n\twhile(!isdigit(ch)) ch=getchar();\n\twhile(isdigit(ch)) x=x*10ll+(ch^48),ch=getchar();\n\treturn x;\n}\nint Q,n,fl,day[15],sum[3000005],sum1[3000005],sumt[3000005];\ninline void first_step()\n{\n\tint x=upper_bound(sum1+1,sum1+4714,n)-sum1-1;\n\tint year=4713-x;\n\tn-=sum1[x];\n\tif(!n) \n\t{\n\t\tif(!year) printf(\"%d %d %d\\n\",1,1,year+1);\n\t\telse printf(\"%d %d %d BC\\n\",1,1,year);\n\t}\n\telse \n\t{\n\t\tFor(j,1,12) \n\t\t{\n\t\t\tif(fl) break;\n\t\t\tint Day=28;\n\t\t\tif(j!=2) Day=day[j];\n\t\t\telse Day=((year-1)%4==0)?29:28;\n\t\t\tif(n>Day) n-=Day;\n\t\t\telse \n\t\t\t{\n\t\t\t\tfl=1;\n\t\t\t\tif(n+1<=Day) printf(\"%d %d %d BC\\n\",n+1,j,year);\n\t\t\t\telse if(j!=12) printf(\"%d %d %d BC\\n\",1,j+1,year);\n\t\t\t\telse \n\t\t\t\t{\n\t\t\t\t\tif(year-1!=0) printf(\"%d %d %d BC\\n\",1,1,year);\n\t\t\t\t\telse printf(\"%d %d %d\\n\",1,1,1);\n\t\t\t\t}\n\t\t\t\tn=0;\n\t\t\t}\t\n\t\t}\n\t}\n}\ninline void third_step()\n{\n\tint l=1,r=1e9,x=0;\n\twhile(l<=r)\n\t{\n\t\tint mid=l+r>>1,tot_year=365*mid,rn_gs=0;\n\t\tif(mid>=1582) tot_year-=10,rn_gs=(1581ll/4ll)+(mid/4ll)-(1581ll/4ll)+(mid/400ll)-(1581ll/400ll)-(mid/100ll)+(1581ll/100ll);\n\t\telse rn_gs=mid/4ll;\n\t\ttot_year+=rn_gs;\n\t\tif(tot_year<=n) l=mid+1,x=mid; \n\t\telse r=mid-1;\n\t}\n\tint year=x+1;\n\tif(year<=1582) n-=(x*365+(x/4ll));\n\telse n-=(x*365+(1582ll/4ll)+(x/4ll)-(1581ll/4ll)+(x/400ll)-(1581ll/400ll)-(x/100ll)+(1581ll/100ll)-10);\n\tif(!n) printf(\"%d %d %d\\n\",1,1,year);\n\telse \n\t{\n\t\tFor(j,1,12) \n\t\t{\n\t\t\tif(fl) break;\n\t\t\tint Day=28;\n\t\t\tif(j!=2) Day=day[j];\n\t\t\telse \n\t\t\t{\n\t\t\t\tif(year<=1582&&j<=10) Day=(year%4==0)?29:28;\n\t\t\t\telse if(year%400==0||(year%4==0&&year%100!=0)) Day=29;\n\t\t\t}\n\t\t\tif(year==1582&&j==10) \n\t\t\t{\n\t\t\t\tif(n<=3) printf(\"%d %d %d\\n\",n+1,10,1582),fl=1,n=0;\n\t\t\t\telse Day-=10;\n\t\t\t}\n\t\t\tif(n>=Day) n-=Day;\n\t\t\telse if(!fl)\n\t\t\t{\n\t\t\t\tfl=1;\n\t\t\t\tif(n+1<=Day) \n\t\t\t\t{\n\t\t\t\t\tif(year==1582&&j==10) printf(\"%d %d %d\\n\",n+11,j,year);\n\t\t\t\t\telse printf(\"%d %d %d\\n\",n+1,j,year);\n\t\t\t\t}\n\t\t\t\telse if(j!=12) printf(\"%d %d %d\\n\",1,j+1,year);\n\t\t\t\telse printf(\"%d %d %d\\n\",1,1,year+1);\n\t\t\t\tn=0;\n\t\t\t}\n\t\t}\n\t}\n}\nsigned main()\n{\n\tDow(i,4713,1) sum1[4713-i+1]=sum1[4713-i]+365+((i-1)%4==0);\n\tQ=read();\n\tday[1]=day[3]=day[5]=day[7]=day[8]=day[10]=day[12]=31,day[4]=day[6]=day[9]=day[11]=30;\n\tfor (;Q--;) \n\t{\n\t\tfl=0;\n\t\tn=read();\n\t\tif(n<=1721424) first_step();\n\t\telse n-=1721424,third_step();\n\t}\n\treturn 0;\n}\n\t\t\n```\n",
        "postTime": 1605105748,
        "uid": 308464,
        "name": "\u5947\u7c73",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    },
    {
        "content": "\u672c\u6587\u540c\u6b65\u53d1\u8868\u5728 [\u6211\u7684blog](https://www.cnblogs.com/TEoS/p/13956068.html)\n\n------------\n**\u9898\u610f\u5206\u6790**\n\n\u7ed9\u51fa\u8ddd\u79bb 4713.1.1 B.C \u7684\u5929\u6570\uff0c\u8981\u6c42\u8ba1\u7b97\u51fa\u5177\u4f53\u7684\u65e5\u671f\n\n**\u601d\u8def\u5206\u6790**\n\n\u663e\u7136\uff0c\u6a21\u62df\u5373\u53ef\u3002\u8003\u8651\u6839\u636e\u5386\u6cd5\u7684\u5206\u4e3a\u4e0d\u540c\u7684\u9636\u6bb5\u8fdb\u884c\u8ba1\u7b97\uff0c\u7136\u540e\u4ece\u5927\u5468\u671f\u5230\u5c0f\u5468\u671f\u8fdb\u884c\u5904\u7406\u3002\n\n\u53ef\u4ee5\u5c06\u6700\u7279\u6b8a\u7684 1582 \u5e74\u5355\u72ec\u5206\u4e3a\u4e00\u6bb5\uff0c\u5b83\u4e4b\u524d\u7684\u5206\u4e3a\u4e00\u6bb5\uff0c\u5b83\u4e4b\u540e\u7684\u5206\u4e3a\u4e00\u6bb5\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e00\u6bb5\uff081581-\uff09\uff0c\u6700\u5927\u7684\u5468\u671f\u5373\u4e3a\u56db\u5e74\uff08\u56db\u5e74\u4e00\u95f0\uff09\uff0c\u56e0\u6b64\u4ee5\u56db\u5e74\u4e3a\u5468\u671f\u5212\u5206\uff1b\u5bf9\u4e8e\u6bcf\u4e2a\u56db\u5e74\u5468\u671f\u5185\uff0c\u4ee5\u4e00\u5e74\u4e3a\u5468\u671f\u5212\u5206\uff1b\u5bf9\u4e8e\u6bcf\u4e2a\u4e00\u5e74\u5468\u671f\u5185\uff0c\u4ee5\u4e00\u6708\u4e3a\u5468\u671f\u5212\u5206\uff1b\u7136\u540e\u5904\u7406\u5929\u6570\u5373\u53ef\u3002\u7531\u4e8e 4713 B.C \u521a\u597d\u4e3a\u95f0\u5e74\uff0c\u56e0\u6b64\u4ece\u5934\u5f00\u59cb\u5212\u5206\u5373\u53ef\u3002\u6ce8\u610f\u516c\u5143\u524d\u548c\u516c\u5143\u540e\u7684\u5224\u65ad\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u6bb5\uff081582\uff09\uff0c\u6309\u6708\u5212\u5206\uff0c\u7279\u5224 10 \u6708\u7684 10 \u5929\u7f3a\u5931\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e09\u6bb5\uff081583+\uff09\uff0c\u6700\u5927\u7684\u5468\u671f\u4e3a\u56db\u767e\u5e74\uff08\u4e16\u7eaa\u5e74\u56db\u6b21\u4e00\u95f0\uff09\uff0c\u63a5\u4e0b\u6765\u4e3a\u4e00\u767e\u5e74\uff0c\u7136\u540e\u4e3a\u56db\u5e74\u3001\u4e00\u5e74\u3001\u4e00\u6708\uff0c\u4f9d\u6b21\u5212\u5206\u5373\u53ef\u3002\u56e0\u4e3a\u6700\u5f00\u59cb\u4e0d\u6ee1\u4e00\u4e2a\u5468\u671f\uff0c\u56e0\u6b64\u53ef\u4ee5\u63a5\u7740\u5212\u5206\u6210 1583 \uff0c 1584-1599 \uff0c1600+ \u4e09\u6bb5\uff0c\u7b2c\u4e00\u6bb5\u6309\u4e00\u5e74\u7684\u6700\u5927\u5468\u671f\u5904\u7406\uff0c\u7b2c\u4e8c\u6bb5\u6309\u56db\u5e74\u7684\u6700\u5927\u5468\u671f\u5904\u7406\uff0c\u7b2c\u4e09\u6bb5\u6309\u56db\u767e\u5e74\u7684\u6700\u5927\u5468\u671f\u5904\u7406\u5373\u53ef\u3002\u6ce8\u610f\u4e16\u7eaa\u5e74\u7684\u7279\u6b8a\u95f0\u5e74\u5904\u7406\u3002\n\n\u7ec6\u8282\u6bd4\u8f83\u591a\uff0c\u6ce8\u610f\u4e0d\u540c\u9636\u6bb5\u548c\u5468\u671f\u5bf9\u5e94\u7684\u6570\u503c\u3002\n\n\u8003\u573a\u4ee3\u7801\uff0c\u6709\u4e9b\u5730\u65b9\u53ef\u80fd\u6bd4\u8f83\u4e71\uff0c\u89c1\u8c05\u3002\n\n```c++\n//FJ-00445\n//NOIP2020 RP++\n#include<iostream>\n#include<cstdio>\n#define ll long long\nusing namespace std;\nint T;\nint mp[12]={31,28,31,30,31,30,31,31,30,31,30,31};//\u5e73\u5e74\u7684\u4e00\u6708\u5468\u671f\nint mr[12]={31,29,31,30,31,30,31,31,30,31,30,31};//\u95f0\u5e74\u7684\u4e00\u6708\u5468\u671f\nint sp[12]={31,28,31,30,31,30,31,31,30,21,30,31};//1582\u7684\u4e00\u6708\u5468\u671f\nint yp[4]={366,365,365,365};//\u4e00\u5e74\u5468\u671f\nll n,ans;\nvoid solve1()//1581-\n{\n\tans=n/1461*4;n%=1461;ll p,q;//\u56db\u5e74\u5468\u671f\n\tfor(p=0;p<4 && n>=yp[p];p++)\n\t\tn-=yp[p],ans++;//\u4e00\u5e74\u5468\u671f\n\tif(!p)//\u7b2c\u4e00\u5e74\u4e3a\u95f0\u5e74\n\t\tfor(q=0;q<12 && n>=mr[q];q++)\n\t\t\tn-=mr[q];//\u95f0\u5e74\u7684\u4e00\u6708\u5468\u671f\n\telse\n\t\tfor(q=0;q<12 && n>=mp[q];q++)\n\t\t\tn-=mp[q];//\u5e73\u5e74\u7684\u4e00\u6708\u5468\u671f\n\tif(ans<4713)\n\t\tprintf(\"%lld %lld %lld BC\\n\",n+1,q+1,4713-ans);//\u516c\u5143\u524d\n\telse\n\t\tprintf(\"%lld %lld %lld\\n\",n+1,q+1,ans-4713+1);//\u516c\u5143\u540e\n}\nvoid solve2()//1583+\n{\n\tn-=2299239;ans=1583;ll p,q;//\u5feb\u8fdb\u52301583\n\tif(n<365)//1583 \n\t\tfor(q=0;q<12 && n>=mp[q];q++)\n\t\t\tn-=mp[q];//\u5e73\u5e74\u7684\u4e00\u6708\u5468\u671f\n\telse\n\t\tif(n<6209)//1584-1599\n\t\t{\n\t\t\tn-=365;ans++;//\u5feb\u8fdb\u52301584\n\t\t\tans+=n/1461*4;n%=1461;\n\t\t\tfor(p=0;p<4 && n>=yp[p];p++)\n\t\t\t\tn-=yp[p],ans++;\n\t\t\tif(!p)\n\t\t\t\tfor(q=0;q<12 && n>=mr[q];q++)\n\t\t\t\t\tn-=mr[q];\n\t\t\telse\n\t\t\t\tfor(q=0;q<12 && n>=mp[q];q++)\n\t\t\t\t\tn-=mp[q];\n\t\t}\n\t\telse//1600+\n\t\t{\n\t\t\tn-=6209;ans=1600;//\u5feb\u8fdb\u52301600\n\t\t\tans+=n/146097*400;n%=146097;//\u56db\u767e\u5e74\u5468\u671f\n\t\t\tif(n<366)//\u53ea\u6709\u7b2c\u4e00\u4e2a\u4e16\u7eaa\u5e74\u4e3a\u95f0\u5e74\n\t\t\t\tfor(q=0;q<12 && n>=mr[q];q++)\n\t\t\t\t\tn-=mr[q];\n\t\t\telse/\n\t\t\t{\n\t\t\t\tn--;//\u5047\u88c5\u662f\u7b2c\u4e00\u4e2a\u4e16\u7eaa\u5e74\u662f\u5e73\u5e74\uff0c\u6309\u7167\u4e00\u822c\u7684\u4e00\u767e\u5e74\u5468\u671f\u8ba1\u7b97\n\t\t\t\tans+=n/36524*100;n%=36524;//\u4e00\u767e\u5e74\u5468\u671f\n\t\t\t\tif(n<365)//\u5176\u4f59\u7684\u4e16\u7eaa\u5e74\u5747\u4e3a\u5e73\u5e74\n\t\t\t\t\tfor(q=0;q<12 && n>=mp[q];q++)\n\t\t\t\t\t\tn-=mp[q];\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tn++;//\u5047\u88c5\u4e16\u7eaa\u5e74\u4e3a\u95f0\u5e74\uff0c\u6309\u7167\u4e00\u822c\u7684\u56db\u5e74\u5468\u671f\u8ba1\u7b97\n\t\t\t\t\tans+=n/1461*4;n%=1461;\n\t\t\t\t\tfor(p=0;p<4 && n>=yp[p];p++)\n\t\t\t\t\t\tn-=yp[p],ans++;\n\t\t\t\t\tif(!p)\n\t\t\t\t\t\tfor(q=0;q<12 && n>=mr[q];q++)\n\t\t\t\t\t\t\tn-=mr[q];\n\t\t\t\t\telse\n\t\t\t\t\t\tfor(q=0;q<12 && n>=mp[q];q++)\n\t\t\t\t\t\t\tn-=mp[q];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\tprintf(\"%lld %lld %lld\\n\",n+1,q+1,ans);\n}\nvoid solve3()//1582\n{\n\tn-=2298884;ans=1582;ll q;//\u5feb\u8fdb\u52301582\n\tfor(q=0;q<12 && n>=sp[q];q++)\n\t\tn-=sp[q]; \n\tif(q==9 && n>3)//10\u6708\u7279\u5224\n\t\tn+=10;\n\tprintf(\"%lld %lld %lld\\n\",n+1,q+1,ans);\n}\nint main()\n{\n\tscanf(\"%d\",&T);\n\twhile(T--)\n\t{\n\t\tscanf(\"%lld\",&n);\n\t\tif(n<2298884)\n\t\t\tsolve1();\n\t\telse\n\t\t\tif(n>2299238)\n\t\t\t\tsolve2();\n\t\t\telse\n\t\t\t\tsolve3();\n\t}\n\treturn 0;\n}\n```\n\n\u4e0b\u9762\u7ed9\u51fa\u4e00\u4e9b\u6570\u503c\u7684\u8ba1\u7b97\u5f0f\uff1a\n\n- \u56db\u5e74\u5468\u671f\uff1a $366+365+365+365=1461$ \uff0c\u5373\u4e00\u4e2a\u95f0\u5e74\u52a0\u4e09\u4e2a\u5e73\u5e74\n- \u4e00\u767e\u5e74\u5468\u671f\uff1a $1461\u00d7\\frac{100}{4}-1=36524$ \uff0c\u5373 $25$ \u4e2a\u56db\u5e74\u5468\u671f\u51cf\u6389\u5e73\u5e74\u4e16\u7eaa\u5e74\n- \u56db\u767e\u5e74\u5468\u671f\uff1a $36524\u00d7\\frac{400}{100}+1=146097$ \uff0c\u5373 $4$ \u4e2a\u4e00\u767e\u5e74\u5468\u671f\u52a0\u4e0a\u95f0\u5e74\u4e16\u7eaa\u5e74\n- \u5feb\u8fdb\u5230 1582 \uff1a$1461\u00d7 \\left \\lfloor \\frac{4713+1581}{4} \\right \\rfloor +366+365= 2298884$ \uff0c\u5373 4713 B.C - 1581 A.D \u7684\u6240\u6709\u5b8c\u6574\u7684\u56db\u5e74\u5468\u671f\u52a0\u4e0a 1580,1581 \u4e24\u5e74\n- \u5feb\u8fdb\u5230 1583\uff1a$2298884+355=2299239$ \uff0c\u5373\u5728 1582 \u5e74\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a 1582 \u4e00\u5e74\n- \u5feb\u8fdb\u5230 1600\uff1a$1461\u00d7\\frac{1600-1584}{4}+365=6209$ \uff0c\u5373 1584-1599 \u56db\u4e2a\u5b8c\u6574\u7684\u56db\u5e74\u5468\u671f\u52a0\u4e0a 1583 \u4e00\u5e74\n\n",
        "postTime": 1605014228,
        "uid": 91534,
        "name": "TEoS",
        "ccfLevel": 6,
        "title": "P7075 \u5112\u7565\u65e5"
    },
    {
        "content": "~~\u6bd2\u7624\u5927\u6a21\u62df\u9898~~\n\n![chenzhe](https://cdn.luogu.com.cn/upload/image_hosting/lh2jai60.png)\n\n\u8c03\u4e86\u6211\u4e09\u5c0f\u65f6...\u6700\u540e\u53d1\u73b0\u662f\u5728\u67d0\u4e00\u5904\u5fd8\u8bb0\u628a `\u516c\u5143\u524d\u4e00\u5e74` \u7b97\u8fdb\u95f0\u5e74\u4e86\n\n\u201c\u591a\u7ec4\u6570\u636e\u201d \u771f\u7684\u5f88\u5bb9\u6613\u4f7f\u4eba\u79bb\u5f00 \u66b4\u529b - \u9884\u5904\u7406 \u7684\u601d\u8def\u601d\u8003 \\fad\n\n\u5b9e\u8d28\u4e0a\u5730\u6210\u529f\u4f7f\u6211\u6302\u6389 CSP 2020\uff08\n\n## \u89e3\u6790\n\n\u867d\u7136\u76f4\u63a5 `if` \u5957 `if` \u5927\u6a21\u62df\u4e5f\u4e0d\u662f\u4e0d\u80fd\u505a\uff1b\u4f46\u8003\u8651\u5230\u8c03\u8bd5\u7684\u96be\u5ea6\uff0c\u6211\u4eec\u8bd5\u7740\u627e\u5230\u4e00\u4e2a**\u4fbf\u4e8e\u5b9e\u73b0**\u7684\u505a\u6cd5\n\n\u9996\u5148\u53d1\u73b0\u5927\u90e8\u5206\u8ba8\u8bba\u90fd\u96c6\u4e2d\u5728 `\u516c\u5143 1582 \u5e74 10 \u6708 15 \u65e5` \u524d\uff0c\u56e0\u6b64\u8003\u8651\u5c06\u7b54\u6848\u5728\u8fd9\u65e5\u671f\u5185\u7684 $r$ \u90fd\u9884\u5904\u7406\u51fa\u6765\uff1b\u6ce8\u610f\u5230\u4ece $1600$ \u6b63\u597d\u53ef\u4ee5\u88ab $400$ \u6574\u9664\uff0c\u4e3a\u4e86\u65b9\u4fbf\u540e\u9762\u7684\u8ba8\u8bba\uff0c\u6211\u4eec\u5e72\u8106\u76f4\u63a5\u9884\u5904\u7406\u5230 `\u516c\u5143 1600 \u5e74 1 \u6708 1 \u65e5`\n\n\u8fd9\u90e8\u5206\u6700\u5927\u7684 $r$ \u662f $10^6$ \u7684\u91cf\u7ea7\uff0c\u4e0d\u4f1a\u70b8\u65f6\u95f4\u6216\u7a7a\u95f4\n\n\u63a5\u7740\u53ef\u4ee5\u60f3\u5230\u4ee5 $400$ \u5e74\u4e3a\u4e00\u5757\u5730\u8df3\uff0c\u5177\u4f53\u5b9e\u73b0\u53d6\u6a21\u5373\u53ef\uff1b\u63a5\u4e0b\u6765\u5c31\u53ea\u8bb8\u8003\u8651\u5728 $400$ \u5e74\u5185\u7684\u65e5\u671f\u589e\u91cf\u4e86\n\n\u7136\u800c\u6bcf $400$ \u5e74\u7684\u5757\u5185\u7684\u8ba8\u8bba\u4e5f\u5f88\u9ebb\u70e6...\u53d1\u73b0 $400$ \u5e74\u4e5f\u4e0d\u5927\uff0c\u56e0\u6b64\u53ef\u4ee5\u8003\u8651**\u5c06\u65e5\u671f\u589e\u91cf\u5728 $400$ \u5e74\u5185\u7684\u5177\u4f53\u589e\u91cf\uff08\u5e74\uff0c\u6708\uff0c\u65e5\uff09\u4e5f\u9884\u5904\u7406\u51fa\u6765**\n\n\uff08\u53ef\u80fd\u63cf\u8ff0\u5f97\u4e0d\u662f\u5f88\u6e05\u695a...\u5177\u4f53\u53ef\u89c1\u4ee3\u7801\uff09\n\n\u4e8e\u662f\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\uff0c\u53bb\u6389\u8bfb\u5165\u4ee3\u7801 $\\texttt{2K}$ \u90fd\u4e0d\u5230\uff1b\u4e14\u4e3b\u8981\u90fd\u662f\u5355\u7eaf\u7684\u66b4\u529b `for` \u5faa\u73af\u6a21\u62df\uff0c\u8c03\u8bd5\u5e94\u8be5\u4e0d\u4f1a\u592a\u96be\n\n## CODE\n\n```cpp\n#include <cstdio>\n#define ll long long\n\nconst int MAXN =3e6+20;\n\n/*------------------------------IO------------------------------*/\n\nll read(){\n\tll x =0; char c =getchar();\n\twhile(c < '0' || c > '9') c =getchar();\n\twhile(c >= '0' && c <= '9') x =(x<<1)+(x<<3)+(48^c), c =getchar();\n\treturn x;\n}\n\nvoid write(const int &x){\n\tif(x/10)\n\t\twrite(x/10);\n\tputchar('0'+x%10);\n}\n\n/*------------------------------Main------------------------------*/\n\nint m[12] ={31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};\n\nstruct qaq{\n\tint Y, M, D;\n}rem[MAXN], rem_400[400*366];\nint tot =-1, tot_400 =-1;\n\nvoid pre(){/*\u6ce8\u610f 1600.1.1 \u4e5f\u4f1a\u88ab\u7edf\u8ba1\u8fdb\u53bb*/\n\tfor(int Y =-4712, M =1, D =1; Y < 1600; ++D){\n\t\tint check =-1;\n\t\tif(Y <= 1582)/*<<- */\n\t\t\tcheck =(int)((-Y)%4 == 0);\n\t\telse\n\t\t\tcheck =(int)(Y%400 == 0 || (Y%4 == 0 && Y%100 != 0));\n\t\t\n\t\tif(D > m[M-1]+(int)(M == 2)*check){\n\t\t\tD =1, ++M;\n\t\t\tif(M > 12)\n\t\t\t\tM =1, ++Y;\n\t\t}\n\t\t\n\t\tif(Y == 1582 && M == 10 && D == 5)\n\t\t\tD =15;\n\t\t\n\t\t++tot;\n\t\trem[tot].Y =Y, rem[tot].M =M, rem[tot].D =D;\n\t}\n}\n\nvoid pre2(){/*\u628a 400 \u5e74\u5185\u7684\u4e5f\u5904\u7406\u51fa\u6765*/\n\tfor(int Y =0, M =1, D =1; Y < 400; ++D){\n\t\tif(D > m[M-1]+(int)(M == 2)*(int)(Y == 0 || (Y%4 == 0 && Y%100 != 0))){\n\t\t\tD =1, ++M;\n\t\t\tif(M > 12)\n\t\t\t\tM =1, ++Y;\n\t\t}\n\t\t\n\t\t++tot_400;\n\t\trem_400[tot_400].Y =Y, rem_400[tot_400].M =M, rem_400[tot_400].D =D;\n\t}\n}\n\nvoid put_ans(const int &Y, const int &M, const int &D){\n\twrite(D), putchar(' '), write(M), putchar(' ');\n\tif(Y <= 0)\n\t\twrite(-Y+1), putchar(' '), putchar('B'), putchar('C');\n\telse\n\t\twrite(Y);\n\tputchar('\\n');\n}\n\nint main(){\n//\tfreopen(\"julian.in\", \"r\", stdin);\n//\tfreopen(\"julian.out\", \"w\", stdout);\n\tpre();\n\tpre2();\n\tfor(int t =0, T =read(); t < T; ++t){\n\t\tll r =read();\n\t\tif(r <= tot)\n\t\t\tput_ans(rem[r].Y, rem[r].M, rem[r].D);\n\t\telse{\n\t\t\tr -=tot;\n\t\t\tint Y =1600;\n\t\t\tif(r >= 365*400+100-3){\n\t\t\t\tY +=(r/(365*400+100-3))*400;\n\t\t\t\tr %=365*400+100-3;\n\t\t\t}\n\t\t\tput_ans(Y+rem_400[r].Y, rem_400[r].M, rem_400[r].D);\n\t\t}\n\t}\n}\n```",
        "postTime": 1604978009,
        "uid": 105254,
        "name": "Piwry",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\u3011"
    },
    {
        "content": "## CSP-S 2020 T1 \u5112\u7565\u65e5\n\n\u8fd9\u7bc7\u9898\u89e3\u7684 idea \u6765\u6e90\u4e8e\u6211\u7684\u4e00\u4f4d\u5b66\u957f\uff0c\u5e76\u8bd5\u56fe\u5b9e\u529b\u8bc1\u660e\u6b64\u9898\u7684\u7ec6\u8282\u96be\u5ea6\u5e94\u8be5\u662f\u4e00\u9053\u7eff\u9898\u6240\u5e94\u5177\u5907\u7684\u6b63\u5e38\u96be\u5ea6\uff0c\u4e14\u5145\u5206\u8bf4\u660e\u8003\u573a\u4e0a\u7684\u6211\u6709\u591a\u4e48 sb\u3002\n\n\u9898\u610f\u5728\u9898\u9762\u91cc\u8bf4\u7684\u5f88\u8be6\u7ec6\uff0c\u4e5f\u6ca1\u4ec0\u4e48\u65b9\u6cd5\u7b80\u5316\u3002\n\n\u9898\u76ee\u91cc $10^9$ \u7684\u6700\u5927\u5e74\u6570\u548c $10^5$ \u7684\u6570\u636e\u7ec4\u6570\u8feb\u4f7f\u6211\u4eec\u53bb\u60f3\u5c3d\u53ef\u80fd\u5feb\u7684\u5904\u7406\u5355\u7ec4\u6570\u636e\u7684\u65b9\u6cd5\u3002\n\n\u6ce8\u610f\u5230\u76f4\u63a5\u6a21\u62df\u7684\u8bdd\uff0c\u96be\u70b9\u5728\u4ee5\u4e0b\u51e0\u4e2a\u4f4d\u7f6e\uff1a\n\n1. \u5bf9\u4e8e\u516c\u5143\u524d\u7684\u60c5\u51b5\uff0c\u5e74\u6570\u5e94\u8be5\u5012\u51cf\uff0c\u4e14\u5e94\u8be5\u8f93\u51fa BC\n2. \u95f0\u5e74\u7684\u5224\u65ad\u4e0e\u8ba1\u6570\n3. \u5bf9\u4e8e 1582 \u5e74\u4ee5\u524d\u548c 1582 \u5e74\u4ee5\u540e\uff0c\u95f0\u5e74\u7684\u5224\u65ad\u4e0d\u540c\uff0c\u4e14\u683c\u91cc\u9ad8\u5229\u5386\u7684\u95f0\u5e74\u5224\u65ad\u8981\u66f4\u52a0\u6076\u5fc3\n4. 1582 \u5e74\u4e22\u5931\u4e86 10.5~10.14 \u5171\u5341\u5929\n\n\u6211\u4eec\u4f9d\u6b21\u89e3\u51b3\u3002\n\n### \u4e00\u4e9b\u5e38\u91cf\n\n\u975e\u95f0\u5e74\u7684\u6bcf\u6708\u5929\u6570\u4f9d\u6b21\u4e3a\uff1a31\u300128\u300131\u300130\u300131\u300130\u300131\u300131\u300130\u300131\u300130\u300131\u3002\n\n\u4e00\u5e74\u6709 365 \u5929\uff0c\u95f0\u5e74\u6709 366 \u5929\u3002\n\n\u5112\u7565\u5386\u4e0b\uff0c\u6bcf\u56db\u5e74\u6709 1461 \u5929\u3002\n\n\u683c\u91cc\u9ad8\u5229\u5386\u4e0b\uff0c\u6bcf\u56db\u767e\u5e74\u6709 146097 \u5929\u3002\n\n### \u65f6\u95f4\u6bb5\n\n\u6211\u4eec\u628a\u65f6\u95f4\u8f74\u5206\u6210 [\u516c\u5143\u524d4713\u5e74\u521d \u81f3 \u516c\u5143\u524d1\u5e74\u672b]\uff0c[\u516c\u51431\u5e74\u521d \u81f3 \u516c\u5143 1581 \u5e74\u672b]\uff0c[\u516c\u51431582\u5e74\u521d \u81f3 \u516c\u51431582\u5e74\u672b]\uff0c[\u516c\u51431583\u5e74\u521d\u4ee5\u540e] \u56db\u6bb5\uff0c\u8fd9\u6837\u6bcf\u4e00\u6bb5\u4e2d\u95f4\u5904\u7406\u7684\u65b9\u5f0f\u5c31\u662f\u5b8c\u5168\u76f8\u540c\u7684\uff0c\u4e0d\u4f1a\u6709\u5386\u6cd5\u53d8\u5316\u3002\u6bcf\u6bb5\u521d\u5bf9\u5e94\u7684\u5112\u7565\u65e5\u80fd\u7528\u4ee5\u4e0a\u5e38\u91cf\u8f7b\u677e\u7b97\u51fa\u6765\u3002\n\n\u8fd9\u56db\u4e2a\u65f6\u95f4\u6bb5\u5bf9\u5e94\u7684\u662f $[0,1721424)$\uff0c$[1721424,2298884)$\uff0c$[2298884,2299239)$\uff0c$[2299239,+\\infty)$\u3002\n\n\u786e\u5b9a\u65f6\u95f4\u6bb5\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u5929\u6570\u51cf\u53bb\u65f6\u95f4\u6bb5\u8d77\u59cb\u4f4d\u7f6e\uff0c\u5f97\u5230\u4e00\u4e2a\u4ece\u8d77\u59cb\u4f4d\u7f6e\u5f00\u59cb\u7684\u5929\u6570\uff0c\u7136\u540e\u62ff\u8fd9\u4e2a\u6570\u53bb\u7b97\u3002\n\n### \u516c\u5143\u524d-\u5112\u7565\u5386\n\n\u5112\u7565\u5386\u4e0b\uff0c\u6bcf\u56db\u5e74\u6709 1461 \u5929\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 \n\n$$year =4713 - \\lfloor \\frac{day}{1461} \\rfloor \\times 4$$\n\n\u8fc5\u901f\u5f97\u51fa\u5f53\u524d\u6211\u4eec\u7684\u4e00\u4e2a\u5f88\u63a5\u8fd1\u7684\u8d77\u59cb\u5e74\u4efd\uff0c\u7136\u540e\u5c06 $day$ \u5bf9 1461 \u53d6\u6a21\uff0c\u5c06\u9700\u8981\u5904\u7406\u7684\u5929\u6570\u538b\u5230 1461 \u4ee5\u4e0b\u3002\n\n\u4e3a\u4e86\u9632\u6b62\u5224\u65ad\u5931\u8bef\uff0c\u6211\u4eec\u76f4\u63a5\u5bf9\u4ece 1 \u6708 1 \u65e5\u5f00\u59cb 0~1460 \u5929\u5185\u7684\u6708\u65e5\u72b6\u51b5\u548c\u5e74\u7684\u589e\u957f\u6570\u8fdb\u884c\u9884\u5904\u7406\u3002\u516c\u5143\u524d4713\u5e74\u662f\u4e00\u4e2a\u95f0\u5e74\uff0c\u56e0\u6b64\u6211\u4eec\u8ba9\u7b2c\u4e00\u5e74\u662f\u95f0\u5e74\uff0c\u5982\u6b64\u5904\u7406\u51fa\u6765\u5c31\u662f\u7b2c\u4e00\u5e74\u662f\u95f0\u5e74\u7684\u60c5\u51b5\u4e0b 0~1460 \u5929\u5185\u6bcf\u5929\u7684\u5e74\u6708\u65e5\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n//\u7b2c\u4e00\u7ef4\u662f\u5929\u6570\uff0c\u540e\u4e00\u7ef4\u662f\u65e5/\u6708/\u5e74\nju1[0][0]=ju1[0][1]=1;\nfor(i=1;i<Y4;i++)//Y4=1461\n{\n\tju1[i][0]=ju1[i-1][0]+1,ju1[i][1]=ju1[i-1][1],ju1[i][2]=ju1[i-1][2];\n\tint lim=days[ju1[i][1]];//days\u5b58\u50a8\u6708\u4efd\u7684\u5929\u6570\n\tif(ju1[i][1]==2&&ju1[i][2]==0) lim++;//\u95f0\u5e74\n\tif(ju1[i][0]>lim) ju1[i][0]=1,ju1[i][1]++;//\u8de8\u6708\n\tif(ju1[i][1]>12) ju1[i][1]=1,ju1[i][2]++;//\u8de8\u5e74\n}\n```\n\n\u5bf9\u4e8e\u8fd9\u4e00\u65f6\u95f4\u6bb5\u7684\u8be2\u95ee\uff0c\u62ff $day$ \u53bb\u67e5\u8868\u5c31\u597d\u4e86\u3002\n\n### \u516c\u5143-\u5112\u7565\u5386\n\n\u8fd8\u662f\u5112\u7565\u5386\uff0c\u4e0d\u540c\u7684\u662f\u516c\u5143 1~4 \u5e74\u4e2d\u7b2c\u56db\u5e74\u624d\u662f\u95f0\u5e74\uff0c\u6240\u4ee5\u6211\u4eec\u5904\u7406\u4e00\u4e2a\u548c\u4e0a\u9762\u7c7b\u4f3c\u7684 $\\text{ju2}$\uff0c\u53ea\u4e0d\u8fc7\u6211\u4eec\u8ba9\u7b2c\u56db\u5e74\u662f\u95f0\u5e74\u3002\n\n$$year =1 + \\lfloor \\frac{day}{1461} \\rfloor \\times 4$$\n\n\u4e4b\u540e\u5c31\u662f\u76f4\u63a5\u67e5\u8868\u3002\n\n### 1582\u5e74\n\n\u8fd9\u4e00\u5e74\u6bd4\u8f83\u9ebb\u70e6\uff0c\u4f46\u662f\u53ea\u6709 355 \u5929\uff0c\u6211\u4eec\u53ef\u4ee5\u66b4\u529b\u628a\u6bcf\u5929\u90fd\u6253\u8868\u3002\u53ea\u8981\u662f\u6309\u5929\u679a\u4e3e\uff0c\u4e00\u5207\u5c31\u597d\u529e\u3002\n\n```cpp\nd[0][0]=d[0][1]=1;\nfor(i=1;i<355;i++)\n{\n\td[i][0]=d[i-1][0]+1,d[i][1]=d[i-1][1];\n\tint lim=days[d[i][1]];\n\tif(d[i][0]>lim) d[i][0]=1,d[i][1]++;\n\tif(d[i][0]==5&&d[i][1]==10) d[i][0]=15;\n}\n```\n\n### \u683c\u91cc\u9ad8\u5229\u5386\n\n\u8fd9\u4e2a\u7684\u95f0\u5e74\u5224\u65ad\u662f\u6700\u6076\u5fc3\u7684\uff0c\u4f46\u662f\u8fd8\u662f\u6709 400 \u5e74\u4e00\u5ea6\u7684\u5468\u671f\u3002\u901a\u8fc7\n\n$$year =1583 + \\lfloor \\frac{day}{146097} \\rfloor \\times 400$$\n\n\u8ba1\u7b97\u51fa\u4e00\u4e2a\u8f83\u8fd1\u7684\u5e74\u4efd\uff0c\u7136\u540e\u5c06 146097 \u5929\u5185\u7684\u5e74\u6708\u65e5\u60c5\u51b5\u6253\u8868\u3002\n\n\u6211\u4eec\u4ece 1583 \u5e74\u5f00\u59cb\uff0c\u56e0\u6b64\u6211\u4eec\u4ee4\u7b2c 18 \u5e74\u662f 400 \u5e74\u4e00\u5ea6\u7684\u95f0\u5e74\u3002\n\n```cpp\ngr[0][0]=gr[0][1]=1;\nfor(i=1;i<Y400;i++)\n{\n\tgr[i][0]=gr[i-1][0]+1,gr[i][1]=gr[i-1][1],gr[i][2]=gr[i-1][2];\n\tint lim=days[gr[i][1]];\n\tif(gr[i][1]==2&&gr[i][2]%4==1&&(gr[i][2]%100!=17||gr[i][2]==17)) lim++;\n\tif(gr[i][0]>lim) gr[i][0]=1,gr[i][1]++;\n\tif(gr[i][1]>12) gr[i][1]=1,gr[i][2]++; \n}\n```\n\n\u7ec8\u4e8e\uff0c\u6211\u4eec\u5bf9\u8fd9\u79cd\u6076\u5fc3\u4e1c\u897f\u4e5f\u53ef\u4ee5\u67e5\u8868\u89e3\u51b3\u4e86\u3002\n\n### \u603b\u7ed3\n\n\u5728\u6253\u5b8c\u56db\u4e2a\u65f6\u95f4\u6bb5\u7684\u8868\u4ee5\u540e\uff0c\u6bcf\u6b21\u8be2\u95ee\u90fd\u53ea\u5269\u4e86\u786e\u5b9a\u65f6\u95f4\u6bb5+\u67e5\u8868\u8fd9\u4e00\u7b80\u5355\u64cd\u4f5c\u3002\n\n\u597d\u5199\uff08copy-paste\uff09\uff0c\u597d\u8c03\uff0c\u5c11\u7ec6\u8282\u3002\u8fd9\u79cd\u601d\u60f3\u6216\u8bb8\u4e5f\u80fd\u5728\u5176\u4ed6\u7c7b\u4f3c\u7684\u6a21\u62df\u9898\u4e0a\u53d1\u6325\u4f5c\u7528\u3002\n\n**\u8ba1\u7b97\u673a\u7ed9\u4e86\u4f60\u5185\u5b58\uff0c\u53ef\u4f60\u4e0d\u73cd\u60dc\uff1b\u76f4\u5230\u4f60\u901e\u5f3a\u6253\u6302\u4e86\uff0c\u5374\u8ffd\u6094\u83ab\u53ca\u3002**\n\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\nconst int Y4=1461,Y400=146097,BC=1721424,To_1582=2298884,To_1583=2299239,days[13]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nint ju1[Y4][3],ju2[Y4][3],d[400][2],gr[Y400][3];\nint main()\n{\n\tint T,i;\n\tscanf(\"%d\",&T);\n\tju1[0][0]=ju1[0][1]=1;\n\tfor(i=1;i<Y4;i++)\n\t{\n\t\tju1[i][0]=ju1[i-1][0]+1,ju1[i][1]=ju1[i-1][1],ju1[i][2]=ju1[i-1][2];\n\t\tint lim=days[ju1[i][1]];\n\t\tif(ju1[i][1]==2&&ju1[i][2]==0) lim++;\n\t\tif(ju1[i][0]>lim) ju1[i][0]=1,ju1[i][1]++;\n\t\tif(ju1[i][1]>12) ju1[i][1]=1,ju1[i][2]++; \n\t}\n\tju2[0][0]=ju2[0][1]=1;\n\tfor(i=1;i<Y4;i++)\n\t{\n\t\tju2[i][0]=ju2[i-1][0]+1,ju2[i][1]=ju2[i-1][1],ju2[i][2]=ju2[i-1][2];\n\t\tint lim=days[ju2[i][1]];\n\t\tif(ju2[i][1]==2&&ju2[i][2]==3) lim++;\n\t\tif(ju2[i][0]>lim) ju2[i][0]=1,ju2[i][1]++;\n\t\tif(ju2[i][1]>12) ju2[i][1]=1,ju2[i][2]++;\n\t}\n\td[0][0]=d[0][1]=1;\n\tfor(i=1;i<355;i++)\n\t{\n\t\td[i][0]=d[i-1][0]+1,d[i][1]=d[i-1][1];\n\t\tint lim=days[d[i][1]];\n\t\tif(d[i][0]>lim) d[i][0]=1,d[i][1]++;\n\t\tif(d[i][0]==5&&d[i][1]==10) d[i][0]=15;\n\t}\n\tgr[0][0]=gr[0][1]=1;\n\tfor(i=1;i<Y400;i++)\n\t{\n\t\tgr[i][0]=gr[i-1][0]+1,gr[i][1]=gr[i-1][1],gr[i][2]=gr[i-1][2];\n\t\tint lim=days[gr[i][1]];\n\t\tif(gr[i][1]==2&&gr[i][2]%4==1&&(gr[i][2]%100!=17||gr[i][2]==17)) lim++;\n\t\tif(gr[i][0]>lim) gr[i][0]=1,gr[i][1]++;\n\t\tif(gr[i][1]>12) gr[i][1]=1,gr[i][2]++; \n\t}\n\twhile(T--)\n\t{\n\t\tlong long x;\n\t\tscanf(\"%lld\",&x);\n\t\tif(x<BC)\n\t\t{\n\t\t\tint y=4713-x/Y4*4;x%=Y4;\n\t\t\tprintf(\"%d %d %d BC\\n\",ju1[x][0],ju1[x][1],y-ju1[x][2]);\n\t\t}\n\t\telse if(x<To_1582)\n\t\t{\n\t\t\tx-=BC;\n\t\t\tint y=1+x/Y4*4;x%=Y4;\n\t\t\tprintf(\"%d %d %d\\n\",ju2[x][0],ju2[x][1],y+ju2[x][2]);\n\t\t}\n\t\telse if(x<To_1583)\n\t\t{\n\t\t\tx-=To_1582;\n\t\t\tprintf(\"%d %d 1582\\n\",d[x][0],d[x][1]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tx-=To_1583;\n\t\t\tlong long y=1583+x/Y400*400;x%=Y400;\n\t\t\tprintf(\"%d %d %lld\\n\",gr[x][0],gr[x][1],y+gr[x][2]);\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1604848187,
        "uid": 103732,
        "name": "smarthehe",
        "ccfLevel": 9,
        "title": "CSP-S 2020 T1 \u5112\u7565\u65e5 \u9898\u89e3"
    },
    {
        "content": "# \u9898\u89e3 \u5112\u7565\u65e5\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P7075)\n\n[\u53ef\u80fd\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/lsq147/p/13943630.html)\n\n~~\u8fd9\u79cd\u9898\u76ee\u65e0\u8bba\u51fa\u5230\u90a3\u573a\u6bd4\u8d5b\u90fd\u4f1a\u88ab\u55b7\u7684\u60e8\u7684\uff0c\u8fd9\u8bf4\u660e\u51fa\u9898\u4eba\u65e9\u5df2\u505a\u597d\u4e86\u5fc3\u7406\u51c6\u5907\uff0c\u5927\u5bb6\u5feb\u55b7\u4ed6\u3002~~\n\n## \u9898\u76ee\u5206\u6790\n\n$T\\le 10^5$ \u663e\u7136\u51fa\u9898\u4eba\u662f\u60f3\u653e\u4e00\u4e2a $\\log_2$ \u8fc7\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u7b97\u5e74\u4efd\u7684\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528\u4e8c\u5206\u3002\n\n\u5927\u529b\u5206\u7c7b\u8ba8\u8bba\uff0c\u6211\u8003\u573a\u4e0a\u5206\u4e86\u8fd9\u4e9b\u65f6\u95f4\u6bb5\uff1a\n\n1. \u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143\u524d 1 \u5e74 12 \u6708 31 \u65e5\uff08\u542b\uff09\n2. \u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143 1582 \u5e74 10 \u6708 4 \u65e5\uff08\u542b\uff09\n3. \u516c\u5143 1582 \u5e74 10 \u6708 15 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143 1582 \u5e74 12 \u6708 31 \u65e5\uff08\u542b\uff09\n4. \u516c\u5143 1583 \u5e74 1 \u6708 1 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143 1000000000 \u5e74 12 \u6708 31 \u65e5\uff08\u542b\uff09\n\n\u7b2c\u4e00\u6b65\u627e\u5230\u8fd9\u4e9b\u65f6\u95f4\u6bb5\u4e4b\u95f4\u7684\u65ad\u70b9\uff1a\n\n```cpp\nconst int data0[13]={0,31,28,31,30,31,30,31,31,30,31,30,31},//\u5e73\u5e74\n\t\t  data1[13]={0,31,29,31,30,31,30,31,31,30,31,30,31};//\u95f0\u5e74\nvoid getyear(void){//\u8fd9\u4e2a\u662f\u7528\u6765\u83b7\u53d6\u5e73\u5e74\u4e00\u5e74\u5929\u6570\u7684\uff0c\u4e5f\u5c31\u662f 365 \u5929\n\tint tmp=0;\n\tfor(int i=1;i<=12;++i)\n\t\ttmp+=data0[i];\n\tprintf(\"year:%d\\n\",tmp);\n}\nvoid getsum(void){\n\tint sum=0;\n\tfor(int i=4713;i>=1;--i)\n\t\tsum+=365+(i%4==1);\n\t//reach 1.1.1\n\tprintf(\"reach 1.1.1:%d\\n\",sum);\n\tfor(int i=1;i<=1581;++i)\n\t\tsum+=365+(i%4==0);\n\t//reach 1582.1.1\n\tfor(int i=1;i<=9;++i)\n\t\tsum+=data0[i];\n\t//reach 1582.10.1\n\tsum+=4;\n\t//reach 1582.10.5 1582.10.15\n\tprintf(\"reach 1582.10.15:%d\\n\",sum);\n\tsum+=17;\n\t//reach 1582.11.1\n\tfor(int i=11;i<=12;++i)\n\t\tsum+=data0[i];\n\t//reach 1583.1.1\n\tprintf(\"reach 1583.1.1:%d\\n\",sum);\n}\n```\n\n\u6267\u884c `getsum()` \u51fd\u6570\uff0c\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7ed3\u679c\uff1a\n\n```\nreach 1.1.1:1721424\nreach 1582.10.15:2299161\nreach 1583.1.1:2299239\n```\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\uff0c\u56db\u4e2a\u65f6\u95f4\u6bb5\u5112\u7565\u65e5\u7684\u53d6\u503c\u8303\u56f4\u5206\u522b\u662f $[0,1721424),[1721424,2299161),[2299161,2299239),[2299239,+\\infty)$ \uff1a\n\n```cpp\nconst int R0=1721424,R1=2299161,R2=2299239;\n```\n\n\u7136\u540e\u5bf9\u6bcf\u4e2a\u65f6\u95f4\u6bb5\u5206\u522b\u8003\u8651\u3002\n\n### \u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143\u524d 1 \u5e74 12 \u6708 31 \u65e5\uff08\u542b\uff09\n\n\u4e8c\u5206\u5e74\u4efd $Y$ \uff0c\u8003\u8651\u8981\u4ece \u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5 \u5230 \u516c\u5143\u524d 4713+$Y$ \u5e74 1 \u6708 1 \u65e5 \u4e00\u5171\u7ecf\u8fc7\u4e86\u591a\u5c11\u5929\u3002\n\n\u5148\u5217\u51fa\u8868\u683c\u8868\u793a\u6bcf\u4e00\u5e74\u6709\u591a\u5c11\u5929\uff08\u4e0d\u59a8\u7528\u8d1f\u6570\u8868\u793a\u516c\u5143\u524d\uff09\uff08\u7531\u4e8e\u8868\u683c\u7684\u663e\u793a\u8c8c\u4f3c\u6709\u70b9\u8be1\u5f02\uff0c\u6240\u4ee5\u7528\u56fe\u7247\u4e86\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7oasgmcj.png)\n\n\u6c42\u51fa\u5230\u6bcf\u4e00\u5e74 1 \u6708 1 \u65e5\u9700\u8981\u7684\u5929\u6570\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/vg4704tn.png)\n\n\u53ef\u4ee5\u5f97\u5230\uff0c\u4ece \u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5 \u5230 \u516c\u5143\u524d 4713+$Y$ \u5e74 1 \u6708 1 \u65e5 \u7ecf\u8fc7\u7684\u5929\u6570\u4e3a\uff1a\n\n$$\nY\\times 365+\\lfloor\\frac{Y+3}{4}\\rfloor\n$$\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u6765\u6c42\u51fa $Y$ \u4e86\uff1a\n\n```cpp\nlong long getyear0(long long r){\n\t// r \u8868\u793a\u4ece\u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb\u8fd8\u9700\u8981\u7ecf\u8fc7\u591a\u5c11\u5929\n\tlong long L=0,R=4712;\n\twhile(L<R){\n\t\tlong long M=(L+R+1)>>1;\n\t\tlong long D=(M+3)/4+M*365;\n\t\tif(D>r)R=M-1;else L=M;\n\t}\n\treturn L;\n}\n```\n\n\u5f97\u51fa $Y$ \u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u6708\u4efd\u4e86\uff0c\u4e8e\u662f\u53ef\u4ee5\u5199\u51fa\u5982\u4e0b\u4ee3\u7801\uff08\u9700\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u5c31\u662f\u6211\u4ee3\u7801\u4e2d\u7684 `write()` \u8868\u793a\u8f93\u51fa\uff0c `pc(x)` \u7b49\u540c\u4e8e `putchar(x)` \uff09\uff1a\n\n```cpp\nif(r<R0){\n\t//before 1.1.1\n\tlong long Y=getyear0(r);\n\tr-=(Y+3)/4+Y*365;++r;\n\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\tY=4713-Y;long long M=1;\n\t// Y \u662f\u5e74\u4efd\uff0c M \u662f\u6708\u4efd\n\tif(Y%4!=1){//\u5e73\u5e74\n\t\twhile(r>data0[M])\n\t\t\tr-=data0[M],++M;\n\t}\n\telse{//\u95f0\u5e74\n\t\twhile(r>data1[M])\n\t\t\tr-=data1[M],++M;\n\t}\n\twrite(r),pc(' '),write(M),pc(' '),write(Y),pc(' ');\n\tpc('B'),pc('C');\n}\n```\n\n### \u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143 1582 \u5e74 10 \u6708 4 \u65e5\uff08\u542b\uff09\n\n\u4e8c\u5206\u5e74\u4efd $Y$ \uff0c\u8003\u8651\u8981\u4ece \u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5 \u5230 \u516c\u5143 1+$Y$ \u5e74 1 \u6708 1 \u65e5 \u4e00\u5171\u7ecf\u8fc7\u4e86\u591a\u5c11\u5929\u3002\n\n\u5148\u5217\u51fa\u8868\u683c\u8868\u793a\u6bcf\u4e00\u5e74\u6709\u591a\u5c11\u5929\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/05kgn6nc.png)\n\n\u6c42\u51fa\u5230\u6bcf\u4e00\u5e74 1 \u6708 1 \u65e5\u9700\u8981\u7684\u5929\u6570\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bacyo8jl.png)\n\n\u53ef\u4ee5\u5f97\u5230\uff0c\u4ece \u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5 \u5230 \u516c\u5143 1+$Y$ \u5e74 1 \u6708 1 \u65e5 \u7ecf\u8fc7\u7684\u5929\u6570\u4e3a\uff1a\n\n$$\nY\\times 365+\\lfloor\\frac{Y}{4}\\rfloor\n$$\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u6765\u6c42\u51fa $Y$ \u4e86\uff1a\n\n```cpp\nlong long getyear1(long long r){\n\t// r \u8868\u793a\u4ece\u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb\u8fd8\u9700\u8981\u7ecf\u8fc7\u591a\u5c11\u5929\n\tlong long L=0,R=1581;\n\twhile(L<R){\n\t\tlong long M=(L+R+1)>>1;\n\t\tlong long D=M/4+M*365;\n\t\tif(D>r)R=M-1;else L=M;\n\t}\n\treturn L;\n}\n```\n\n\u5f97\u51fa $Y$ \u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u6708\u4efd\u4e86\uff0c\u4e8e\u662f\u53ef\u4ee5\u5199\u51fa\u5982\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\nif(r>=R0&&r<R1){\n\t//before 1582.10.5 1582.10.15\n\tr-=R0;\n\tlong long Y=getyear1(r);\n\tr-=Y/4+Y*365;++r;\n\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\tY=Y+1;long long M=1;\n\t// Y \u662f\u5e74\u4efd\uff0c M \u662f\u6708\u4efd\n\tif(Y%4!=0){//\u5e73\u5e74\n\t\twhile(r>data0[M])\n\t\t\tr-=data0[M],++M;\n\t}\n\telse{//\u95f0\u5e74\n\t\twhile(r>data1[M])\n\t\t\tr-=data1[M],++M;\n\t}\n\twrite(r),pc(' '),write(M),pc(' '),write(Y);\n}\n```\n\n### \u516c\u5143 1582 \u5e74 10 \u6708 15 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143 1582 \u5e74 12 \u6708 31 \u65e5\uff08\u542b\uff09\n\n10 \u6708\u6709 31 \u5929\uff0c\u6240\u4ee5 10 \u6708 15 \u65e5\u5230 11 \u6708 1 \u65e5\u9700\u8981\u7ecf\u8fc7 17 \u5929\uff0c\u5982\u679c\u8fd8\u9700\u8981\u7ecf\u8fc7\u7684\u5929\u6570\u4e0d\u8db3 17 \u5929\uff0c\u5c31\u8bf4\u660e\u6708\u4efd\u662f 10 \u6708\uff0c\u5426\u5219\u5c31\u679a\u4e3e\u6708\u4efd\uff1a\n\n```cpp\nif(r>=R1&&r<R2){\n\t//before 1583.1.1\n\tr-=R1;\n\tif(r<17){\n\t\tr+=15;//\u4ece 10 \u6708 15 \u65e5\u5f00\u59cb\u7b97\u8d77\n\t\twrite(r),pc(' '),write(10),pc(' '),write(1582);\n\t}\n\telse{\n\t\tr-=17;++r;\n\t\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1582 \u5e74 11 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\t\tlong long M=11;\n\t\t// M \u662f\u6708\u4efd\n\t\twhile(r>data0[M])\n\t\t\tr-=data0[M],++M;\n\t\twrite(r),pc(' '),write(M),pc(' '),write(1582);\n\t}\n}\n```\n\n### \u516c\u5143 1583 \u5e74 1 \u6708 1 \u65e5\uff08\u542b\uff09 \u81f3 \u516c\u5143 1000000000 \u5e74 12 \u6708 31 \u65e5\uff08\u542b\uff09\n\n\u4e8c\u5206\u5e74\u4efd $Y$ \uff0c\u8003\u8651\u8981\u4ece \u516c\u5143 1583 \u5e74 1 \u6708 1 \u65e5 \u5230 \u516c\u5143 1583+$Y$ \u5e74 1 \u6708 1 \u65e5 \u4e00\u5171\u7ecf\u8fc7\u4e86\u591a\u5c11\u5929\u3002\n\n\u8fd9\u91cc\u8ba1\u7b97\u7684\u65f6\u5019\u80af\u5b9a\u5c31\u4e0d\u80fd\u4ec5\u4ec5 $\\div 4$ \u518d\u5411\u4e0b\u53d6\u6574\u4e86\uff0c\u56e0\u4e3a\u5982\u679c\u4e00\u4e2a\u5e74\u4efd\u662f 100 \u7684\u500d\u6570\u8fd8\u5fc5\u987b\u662f 400 \u7684\u500d\u6570\u624d\u662f\u95f0\u5e74\u3002\n\n\u9996\u5148\u4e0d\u8003\u8651\u201c\u4e00\u4e2a\u5e74\u4efd\u662f 100 \u7684\u500d\u6570\u8fd8\u5fc5\u987b\u662f 400 \u7684\u500d\u6570\u624d\u662f\u95f0\u5e74\u201d\u8fd9\u4e2a\u9650\u5236\u6761\u4ef6\uff0c\u7531\u4e8e $4\\mid (1583+1),4\\mid (1+3)$ \uff0c\u6b64\u65f6\u9700\u8981\u7ecf\u8fc7\u7684\u5929\u6570\u662f\uff1a\n\n$$\nY\\times 365+\\lfloor\\frac{Y+2}{4}\\rfloor\n$$\n\n\u518d\u8003\u8651\u628a\u6240\u6709\u5e74\u4efd\u662f 100 \u7684\u500d\u6570\u7684\u5e74\u4efd\u989d\u5916\u9020\u6210\u7684\u8d21\u732e\u51cf\u6389\uff0c\u7531\u4e8e $100\\mid (1583+17),100\\mid (17+83)$ \uff0c\u6b64\u65f6\u9700\u8981\u7ecf\u8fc7\u7684\u5929\u6570\u662f\uff1a\n\n$$\nY\\times 365+\\lfloor\\frac{Y+2}{4}\\rfloor-\\lfloor\\frac{Y+82}{100}\\rfloor\n$$\n\n\u518d\u8003\u8651\u628a\u6240\u6709\u5e74\u4efd\u662f 400 \u7684\u500d\u6570\u7684\u5e74\u4efd\u9020\u6210\u7684\u8d21\u732e\u52a0\u4e0a\uff0c\u7531\u4e8e $400\\mid (1583+17),400\\mid (17+383)$ \uff0c\u6b64\u65f6\u9700\u8981\u7ecf\u8fc7\u7684\u5929\u6570\u5c31\u662f\uff1a\n\n$$\nY\\times 365+\\lfloor\\frac{Y+2}{4}\\rfloor-\\lfloor\\frac{Y+82}{100}\\rfloor+\\lfloor\\frac{Y+382}{400}\\rfloor\n$$\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u6765\u6c42\u51fa $Y$ \u4e86\uff1a\n\n```cpp\nlong long getyear2(long long r){\n\t// r \u8868\u793a\u4ece\u516c\u5143 1583 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb\u8fd8\u9700\u8981\u7ecf\u8fc7\u591a\u5c11\u5929\n\tlong long L=0,R=1000000000;\n\twhile(L<R){\n\t\tlong long M=(L+R+1)>>1;\n\t\tlong long D=(M+2)/4-(M+82)/100+(M+382)/400+M*365;\n\t\tif(D>r)R=M-1;else L=M;\n\t}\n\treturn L;\n}\n```\n\n\u5f97\u51fa $Y$ \u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u6708\u4efd\u4e86\uff0c\u4e8e\u662f\u53ef\u4ee5\u5199\u51fa\u5982\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\nif(r>=R2){\n\tr-=R2;\n\tlong long Y=getyear2(r);\n\tr-=(Y+2)/4-(Y+82)/100+(Y+382)/400+Y*365;++r;\n\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1583 \u5e74 1 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\tY+=1583;long long M=1;\n\t// Y \u662f\u5e74\u4efd\uff0c M \u662f\u6708\u4efd\n\tif(Y%4!=0||(Y%100==0&&Y%400!=0)){\n\t\twhile(r>data0[M])\n\t\t\tr-=data0[M],++M;\n\t}\n\telse{\n\t\twhile(r>data1[M])\n\t\t\tr-=data1[M],++M;\n\t}\n\twrite(r),pc(' '),write(M),pc(' '),write(Y);\n}\n```\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#define ch() getchar()\n#define pc(x) putchar(x)\nusing namespace std;\ntemplate<typename T>void read(T&x){\n\tstatic int f;static char c;\n\tfor(c=ch(),f=1;c<'0'||c>'9';c=ch())if(c=='-')f=-f;\n\tfor(x=0;c>='0'&&c<='9';c=ch())x=x*10+(c&15);x*=f;\n}\ntemplate<typename T>void write(T x){\n\tstatic int q[64];int cnt=0;\n\tif(x==0)return pc('0'),void();\n\tif(x<0)pc('-'),x=-x;\n\twhile(x)q[cnt++]=x%10,x/=10;\n\twhile(cnt--)pc(q[cnt]+'0');\n}\nconst int data0[13]={0,31,28,31,30,31,30,31,31,30,31,30,31},//\u5e73\u5e74\n\t\t  data1[13]={0,31,29,31,30,31,30,31,31,30,31,30,31};//\u95f0\u5e74\nvoid getyear(void){//\u8fd9\u4e2a\u662f\u7528\u6765\u83b7\u53d6\u5e73\u5e74\u4e00\u5e74\u5929\u6570\u7684\uff0c\u4e5f\u5c31\u662f 365 \u5929\n\tint tmp=0;\n\tfor(int i=1;i<=12;++i)\n\t\ttmp+=data0[i];\n\tprintf(\"year:%d\\n\",tmp);\n}\nvoid getsum(void){\n\tint sum=0;\n\tfor(int i=4713;i>=1;--i)\n\t\tsum+=365+(i%4==1);\n\t//reach 1.1.1\n\tprintf(\"reach 1.1.1:%d\\n\",sum);\n\tfor(int i=1;i<=1581;++i)\n\t\tsum+=365+(i%4==0);\n\t//reach 1582.1.1\n\tfor(int i=1;i<=9;++i)\n\t\tsum+=data0[i];\n\t//reach 1582.10.1\n\tsum+=4;\n\t//reach 1582.10.5 1582.10.15\n\tprintf(\"reach 1582.10.15:%d\\n\",sum);\n\tsum+=17;\n\t//reach 1582.11.1\n\tfor(int i=11;i<=12;++i)\n\t\tsum+=data0[i];\n\t//reach 1583.1.1\n\tprintf(\"reach 1583.1.1:%d\\n\",sum);\n}\nconst int R0=1721424,R1=2299161,R2=2299239;\nlong long getyear0(long long r){\n\t// r \u8868\u793a\u4ece\u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb\u8fd8\u9700\u8981\u7ecf\u8fc7\u591a\u5c11\u5929\n\tlong long L=0,R=4712;\n\twhile(L<R){\n\t\tlong long M=(L+R+1)>>1;\n\t\tlong long D=(M+3)/4+M*365;\n\t\tif(D>r)R=M-1;else L=M;\n\t}\n\treturn L;\n}\nlong long getyear1(long long r){\n\t// r \u8868\u793a\u4ece\u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb\u8fd8\u9700\u8981\u7ecf\u8fc7\u591a\u5c11\u5929\n\tlong long L=0,R=1581;\n\twhile(L<R){\n\t\tlong long M=(L+R+1)>>1;\n\t\tlong long D=M/4+M*365;\n\t\tif(D>r)R=M-1;else L=M;\n\t}\n\treturn L;\n}\nlong long getyear2(long long r){\n\t// r \u8868\u793a\u4ece\u516c\u5143 1583 \u5e74 1 \u6708 1 \u65e5\u5f00\u59cb\u8fd8\u9700\u8981\u7ecf\u8fc7\u591a\u5c11\u5929\n\tlong long L=0,R=1000000000;\n\twhile(L<R){\n\t\tlong long M=(L+R+1)>>1;\n\t\tlong long D=(M+2)/4-(M+82)/100+(M+382)/400+M*365;\n\t\tif(D>r)R=M-1;else L=M;\n\t}\n\treturn L;\n}\nvoid work(void){\n\tint q;read(q);\n\twhile(q--){\n\t\tlong long r;read(r);\n\t\tif(r<R0){\n\t\t\t//before 1.1.1\n\t\t\tlong long Y=getyear0(r);\n\t\t\tr-=(Y+3)/4+Y*365;++r;\n\t\t\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\t\t\tY=4713-Y;long long M=1;\n\t\t\t// Y \u662f\u5e74\u4efd\uff0c M \u662f\u6708\u4efd\n\t\t\tif(Y%4!=1){//\u5e73\u5e74\n\t\t\t\twhile(r>data0[M])\n\t\t\t\t\tr-=data0[M],++M;\n\t\t\t}\n\t\t\telse{//\u95f0\u5e74\n\t\t\t\twhile(r>data1[M])\n\t\t\t\t\tr-=data1[M],++M;\n\t\t\t}\n\t\t\twrite(r),pc(' '),write(M),pc(' '),write(Y),pc(' ');\n\t\t\tpc('B'),pc('C');\n\t\t}\n\t\telse if(r>=R0&&r<R1){\n\t\t\t//before 1582.10.5 1582.10.15\n\t\t\tr-=R0;\n\t\t\tlong long Y=getyear1(r);\n\t\t\tr-=Y/4+Y*365;++r;\n\t\t\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\t\t\tY=Y+1;long long M=1;\n\t\t\t// Y \u662f\u5e74\u4efd\uff0c M \u662f\u6708\u4efd\n\t\t\tif(Y%4!=0){//\u5e73\u5e74\n\t\t\t\twhile(r>data0[M])\n\t\t\t\t\tr-=data0[M],++M;\n\t\t\t}\n\t\t\telse{//\u95f0\u5e74\n\t\t\t\twhile(r>data1[M])\n\t\t\t\t\tr-=data1[M],++M;\n\t\t\t}\n\t\t\twrite(r),pc(' '),write(M),pc(' '),write(Y);\n\t\t}\n\t\telse if(r>=R1&&r<R2){\n\t\t\t//before 1583.1.1\n\t\t\tr-=R1;\n\t\t\tif(r<17){\n\t\t\t\tr+=15;//\u4ece 10 \u6708 15 \u65e5\u5f00\u59cb\u7b97\u8d77\n\t\t\t\twrite(r),pc(' '),write(10),pc(' '),write(1582);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tr-=17;++r;\n\t\t\t\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1582 \u5e74 11 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\t\t\t\tlong long M=11;\n\t\t\t\t// M \u662f\u6708\u4efd\n\t\t\t\twhile(r>data0[M])\n\t\t\t\t\tr-=data0[M],++M;\n\t\t\t\twrite(r),pc(' '),write(M),pc(' '),write(1582);\n\t\t\t}\n\t\t}\n\t\telse if(r>=R2){\n\t\t\tr-=R2;\n\t\t\tlong long Y=getyear2(r);\n\t\t\tr-=(Y+2)/4-(Y+82)/100+(Y+382)/400+Y*365;++r;\n\t\t\t//\u8fd9\u91cc ++r \u662f\u56e0\u4e3a\u6b64\u65f6\u5df2\u7ecf\u662f 1583 \u5e74 1 \u6708 1 \u65e5\u4e86\uff0c\u800c\u540e\u9762 r \u8fd8\u9700\u8981\u7528\u6765\u8ba1\u7b97\u5929\u6570\uff0c\u6240\u4ee5 r \u521d\u59cb\u5c31\u662f 1\n\t\t\tY+=1583;long long M=1;\n\t\t\t// Y \u662f\u5e74\u4efd\uff0c M \u662f\u6708\u4efd\n\t\t\tif(Y%4!=0||(Y%100==0&&Y%400!=0)){\n\t\t\t\twhile(r>data0[M])\n\t\t\t\t\tr-=data0[M],++M;\n\t\t\t}\n\t\t\telse{\n\t\t\t\twhile(r>data1[M])\n\t\t\t\t\tr-=data1[M],++M;\n\t\t\t}\n\t\t\twrite(r),pc(' '),write(M),pc(' '),write(Y);\n\t\t}\n\t\tpc('\\n');\n\t}\n}\nint main(){\n//\tgetsum();\n\twork();\n\treturn 0;\n}\n```\n\n",
        "postTime": 1604803969,
        "uid": 230249,
        "name": "xiaolilsq",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 \u5112\u7565\u65e5"
    },
    {
        "content": "\u672c\u9898\u601d\u8def\uff1a\n\n\u628a\u65e5\u671f\u5206\u4e94\u4e2a\u90e8\u5206\uff1a\n\n1.\u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5 ~ \u516c\u5143\u524d 1 \u5e74 12 \u6708 31 \u65e5\n\n2.\u516c\u5143 1 \u5e74 1 \u6708 1 \u65e5 ~ \u516c\u5143 1581 \u5e74 10 \u6708 4 \u65e5\n\n3.\u516c\u5143 1581 \u5e74 10 \u6708 15 \u65e5 ~ \u516c\u5143 1581 \u5e74 12 \u6708 31 \u65e5\n\n4.\u516c\u5143 1582 \u5e74 1 \u6708 1 \u65e5 ~ \u516c\u5143 1600 \u5e74 12 \u6708 31 \u65e5\n\n5.\u516c\u5143 1601 \u5e74 ~ $\\infty$\n\n\u7136\u540e\uff1a\n\n\u5bf9\u4e8e\u7b2c\u4e00\u90e8\u5206\u81f3\u7b2c\u56db\u90e8\u5206\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u9884\u5904\u7406\u51fa\u6bcf\u4e00\u5e74\u7684\u5929\u6570\uff0c\u7136\u540e\u6a21\u62df\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e94\u90e8\u5206\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u6bcf $400$ \u5e74\u4e00\u4e2a\u5468\u671f\u6765\u7b97\uff0c\u5148\u9884\u5904\u7406\u51fa\u6bcf $400$ \u5e74\u7684\u5929\u6570\uff0c\u4e4b\u540e\u7b97\u51fa\u4e4b\u524d\u6709\u591a\u5c11\u4e2a\u5468\u671f\uff0c\u518d\u6a21\u62df\u5373\u53ef\u3002\n\nAC \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint test1 = 1721424, test2 = 577737, q;\nlong long r, biao1[4810], biao2[1610], biao3[410], day[13] = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}, days;\nvoid calc1(long long r, long long qaq, int year) { //\u8f93\u51fa\u516c\u5143\u524d\u7684\u65e5\u671f\n\tif(qaq == 366) ++ day[2];\n\tfor(int is = 1; is <= 12; is ++) {\n\t\tif(r > day[is]) r -= day[is];\n\t\telse {\n\t\t\tprintf(\"%lld %d %d BC\\n\", r, is, -year);\n\t\t\tbreak;\n\t\t}\n\t}\n}\nvoid calc2(long long r, long long qaq, int year, int bg) {  //\u8f93\u51fa\u516c\u5143\u540e\u7684\u65e5\u671f\n\tif(qaq == 366) ++ day[2];\n\tfor(int is = bg; is <= 12; is ++) {\n\t\tif(r > day[is]) r -= day[is];\n\t\telse {\n\t\t\tprintf(\"%lld %d %d\\n\", r, is, year);\n\t\t\tbreak;\n\t\t}\n\t}\n}\nint main() {\n\tfor(int i = 1; i <= 4713; i ++) biao1[i] = 365 + (i % 4 == 1 ? 1 : 0);  //\u9884\u5904\u7406\u51fa\u516c\u5143\u524d\u7684\u5e74\u6570\n\tfor(int i = 1; i <= 1600; i ++) biao2[i] = 365 + (i % 4 == 0 ? 1 : 0);  //\u9884\u5904\u7406\u51fa\u516c\u5143 1 \u5e74\u81f3\u516c\u5143 1600 \u5e74\u7684\u5929\u6570\n\tfor(int i = 1; i <= 400; i ++) biao3[i] = 365 + (i % 4 == 0 ? (i % 100 == 0 ? (i % 400 == 0 ? 1 : 0) : 1) : 0), days += biao3[i];  //\u9884\u5904\u7406\u51fa\u6bcf 400 \u5e74\u7684\u5929\u6570\n\tscanf(\"%d\", &q);\n\twhile(q --) {\n\t\tint year = -4713;\n\t\tscanf(\"%lld\", &r);\n\t\t++ r;\n\t\tif(r <= test1) {  //\u7b2c\u4e00\u90e8\u5206\n\t\t\tfor(int i = 4713; i >= 1; i --) {  //\u6a21\u62df\n\t\t\t\tif(r > biao1[i]) r -= biao1[i];\n\t\t\t\telse {\n\t\t\t\t\tcalc1(r, biao1[i], year);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t++ year;\n\t\t\t}\n\t\t} else {  \n\t\t\tyear = 1;\n\t\t\tr -= test1;\n\t\t\tif(r <= test2) {  //\u7b2c\u4e8c\u90e8\u5206\n\t\t\t\tfor(int i = 1; i <= 1581; i ++) {  //\u6a21\u62df\n\t\t\t\t\tif(r > biao2[i]) r -= biao2[i];\n\t\t\t\t\telse {\n\t\t\t\t\t\tcalc2(r, biao2[i], year, 1);\n\t\t\t\t\t\tr -= biao2[i];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t++ year;\n\t\t\t\t}\n\t\t\t\tif(r > 0) calc2(r, biao2[1582], year, 1);  //\u7279\u5224\n\t\t\t} else {\n\t\t\t\tr -= test2;\n\t\t\t\tr += 14;\n\t\t\t\tif(r <= 92) {  //\u7b2c\u4e09\u90e8\u5206\u7684\u7279\u5224\n\t\t\t\t\tcalc2(r, biao2[1582], 1582, 10);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tyear = 1583;\n\t\t\t\tr -= 92;\n\t\t\t\tfor(int i = 1583; i <= 1600; i ++) {  //\u7b2c\u56db\u90e8\u5206\u7684\u6a21\u62df\uff08\u4e5f\u5305\u542b\u4e86\u7b2c\u4e94\u90e8\u5206\u7684\u90e8\u5206\u5904\u7406\uff09\n\t\t\t\t\tif(r > biao2[i]) r -= biao2[i];\n\t\t\t\t\telse {\n\t\t\t\t\t\tcalc2(r, biao2[i], year, 1);\n\t\t\t\t\t\tr -= biao2[i];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t++ year;\n\t\t\t\t}\n\t\t\t\tif(r > 0) {  //\u7b2c\u4e94\u90e8\u5206\n\t\t\t\t\tlong long sto = r / days, orz = r % days;  //\u8ba1\u7b97\u6709\u51e0\u4e2a\u5468\u671f\n\t\t\t\t\tif(orz == 0) orz = days, -- sto;  //\u7279\u5224\n\t\t\t\t\tr = orz;\n\t\t\t\t\tyear += sto * 400;  //\u7b97\u5e74\u4efd\n\t\t\t\t\tfor(int i = 1; i <= 400; i ++) {  //\u6a21\u62df\n\t\t\t\t\t\tif(r > biao3[i]) r -= biao3[i];\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcalc2(r, biao3[i], year, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t++ year;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tday[2] = 28;  //\u8fd8\u539f 2 \u6708\u7684\u5929\u6570\n\t}\n\treturn 0;\n}\n```\n\u5176\u5b9e\u7684\u8bdd\uff0c\u6211\u4eec\u53d1\u73b0\u8fd0\u884c\u65f6\u95f4\u4e3b\u8981\u6d88\u8017\u5728\u5904\u7406\u7b2c\u4e00\u90e8\u5206\u81f3\u7b2c\u56db\u90e8\u5206\u7684\u65e5\u671f\u4e0a\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u7b2c\u4e00\u90e8\u5206\u81f3\u7b2c\u56db\u90e8\u5206\u7684\u65e5\u671f\u5168\u90e8\u9884\u5904\u7406\u51fa\u6765\uff0c\u5f53\u65e5\u671f\u5728\u7b2c\u4e00\u90e8\u5206\u81f3\u7b2c\u56db\u90e8\u5206\u65f6\uff0c\u5c31\u76f4\u63a5\u8f93\u51fa\u7b54\u6848\uff0c\u5426\u5219\u5c31\u6309\u7167\u4e4b\u524d\u90a3\u6837\u5904\u7406\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(2305814+400Q)$\n\nAC \u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint q;\nlong long r, biao1[4810], biao2[1610], biao3[410], day[13] = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}, days, cont;\nint tian[3000010], yue[3000010], nian[3000010];\nbool sto[3000010];\nvoid calc(long long r, long long qaq, int year) {\n\tif(qaq == 366) ++ day[2];\n\tfor(int is = 1; is <= 12; is ++) {\n\t\tif(r > day[is]) r -= day[is];\n\t\telse {\n\t\t\tprintf(\"%lld %d %d\\n\", r, is, year);\n\t\t\tbreak;\n\t\t}\n\t}\n}\nint main() {\n\tint t = 0, y = 1, n = -4713, coot = 0;\n\tfor(int i = 1; i <= 4713; i ++) biao1[i] = 365 + (i % 4 == 1 ? 1 : 0), cont += biao1[i], coot += biao1[i];\n\tfor(int i = 1; i <= 1600; i ++) biao2[i] = 365 + (i % 4 == 0 ? 1 : 0), cont += biao2[i], coot += biao2[i] * (i <= 1581);\n\tcont -= 10;\n\tcoot += 278; \n\tfor(int i = 1; i <= 400; i ++) biao3[i] = 365 + (i % 4 == 0 ? (i % 100 == 0 ? (i % 400 == 0 ? 1 : 0) : 1) : 0), days += biao3[i];\n\tfor(int i = 1; i <= cont; i ++) {\n\t\tif(n < 0) {\n\t\t\tif(biao1[-n] == 366) day[2] = 29;\n\t\t\telse day[2] = 28;\n\t\t} else {\n\t\t\tif(biao2[n] == 366) day[2] = 29;\n\t\t\telse day[2] = 28;\n\t\t}\n\t\t++ t;\n\t\tif(i == coot) t += 10; \n\t\tif(t > day[y]) ++ y, t = 1;\n\t\tif(y > 12) ++ n, y = 1, t = 1;\n\t\tif(n == 0) ++ n;\n\t\tif(n < 0)\n\t\ttian[i] = t, yue[i] = y, nian[i] = -n, sto[i] = true;\n\t\telse\n\t\ttian[i] = t, yue[i] = y, nian[i] = n;\n\t}\n\tscanf(\"%d\", &q);\n\tday[2] = 28;\n\twhile(q --) {\n\t\tint year;\n\t\tscanf(\"%lld\", &r);\n\t\t++ r;\n\t\tif(r <= cont) {\n\t\t\tcout << tian[r] << ' ' << yue[r] << ' ' << nian[r];\n\t\t\tif(sto[r] == true) cout << \" BC\";\n\t\t\tcout << endl;\n\t\t}\n\t\telse {\n\t\t\tr -= cont;\n\t\t\tyear = 1601;\n\t\t\tlong long sto = r / days, orz = r % days;\n\t\t\tif(orz == 0) orz = days, -- sto;\n\t\t\tr = orz;\n\t\t\tyear += sto * 400;\n\t\t\tfor(int i = 1; i <= 400; i ++) {\n\t\t\t\tif(r > biao3[i]) r -= biao3[i];\n\t\t\t\telse {\n\t\t\t\t\tcalc(r, biao3[i], year);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t++ year;\n\t\t\t}\n\t\t}\n\t\tday[2] = 28;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1605101431,
        "uid": 237940,
        "name": "crpQwQ",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    },
    {
        "content": "\u5148\u8bf4\u4e00\u4e0b\u672c\u9898\u7684\u51e0\u4e2a\u5751\u70b9\uff1a\n\n* \u95f0\u5e74\u7684\u4e0d\u540c\u5224\u65ad\u65b9\u5f0f\uff1a**\u516c\u5143\u524d**\u5e74\u4efd\u7684\u7edd\u5bf9\u503c\u6a21 $4$ \u4f59 $1$ \u65f6\u4e3a\u95f0\u5e74\uff0c**\u516c\u5143\u540e\u5230 1582 \u5e74**\u5e74\u4efd\u662f $4$ \u7684\u500d\u6570\u4e3a\u95f0\u5e74\uff0c**1582 \u5e74\u4e4b\u540e**\u5e74\u4efd\u662f $4$ \u7684\u500d\u6570\u4f46\u4e0d\u662f $100$ \u7684\u500d\u6570\uff0c\u6216\u5e74\u4efd\u4e3a $400$ \u7684\u500d\u6570\u65f6\u4e3a\u95f0\u5e74\u3002\n\n* **\u88ab\u5220\u9664\u7684 $10$ \u5929**\u3002\u5343\u4e07\u4e0d\u8981\u5fd8\u8bb0\u5904\u7406\u5b83\u3002\u5f88\u591a\u4eba\u5728\u6d1b\u8c37\u4e0a\u6d4b\u768440\u5206\uff08\u5305\u62ec\u6211\uff09\u5c31\u662f\u56e0\u4e3a\u8fd9\u91cc\u6216\u591a\u6216\u5c11\u7684\u51fa\u4e86\u758f\u6f0f\u3002\n\n* **\u6570\u636e\u8303\u56f4**\u3002\u7531\u4e8e\u5e74\u4efd\u6700\u5927\u662f$10^{9}$\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u65ad\u51fa\u7ed9\u5b9a\u7684 $r$ \u6700\u5927\u4e3a $365\\times10^{9}$ \u5de6\u53f3\u3002\u56e0\u6b64\u7b2c\u4e00\u70b9\u5c31\u662f\u8981**\u5f00long long**\uff0c\u5176\u6b21\u5c31\u662f\u8981**\u6ce8\u610f\u65f6\u95f4\u590d\u6742\u5ea6**\u3002\u76f4\u63a5\u679a\u4e3e\u5e74\u4efd\u6216\u65e5\u671f\u80af\u5b9a\u8fc7\u4e0d\u4e86\u3002\n\n\n\n------------\n \n\n\u518d\u8bf4\u4e00\u4e0b\u6211\u7684\u601d\u8def\uff1a\n\n\u5148\u786e\u5b9a\u5e74\u4efd\uff0c\u7136\u540e\u786e\u5b9a\u6708\u4efd\uff0c\u6700\u540e\u7531\u5e74\u4efd\u548c\u6708\u4efd\u63a8\u51fa\u5177\u4f53\u7684\u65e5\u5b50\u3002\n\n\u786e\u5b9a\u5e74\u4efd\u9700\u8981\u5199\u4e00\u4e2a`count_year`\u51fd\u6570\uff0c\u7528\u6765\u8ba1\u7b97\u4ece\u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5\u5230\u67d0\u5e74 12 \u6708 31 \u65e5 \u4e00\u5171\u6709\u591a\u5c11\u5929\u3002\u6ce8\u610f\u8fd9\u91cc\u662f\u6709\u591a\u5c11\u5929\u800c\u975e\u8fc7\u4e86\u591a\u5c11\u5929\uff0c\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f\u516c\u5143\u524d 4713 \u5e74 1 \u6708 1 \u65e5 \u5230\u5e95\u7b97 $1$ \u8fd8\u662f\u7b97 $0$\u3002\u5f53\u7136\u9898\u76ee\u4e2d\u7ed9\u5b9a\u7684 $r$ \u662f\u7ecf\u8fc7\u4e86\u591a\u5c11\u5929\uff0c\u56e0\u6b64\u5b9e\u9645\u64cd\u4f5c\u7684\u65f6\u5019\u8fd8\u9700\u8981\u628a\u7ed9\u5b9a\u7684 $r$ \u52a0\u4e0a $1$ \u518d\u5904\u7406\uff0c\u4e0d\u8fc7\u6ca1\u592a\u5927\u5dee\u522b\uff08\u3002\n\n`count_year`\u51fd\u6570\u7684\u96be\u70b9\u5728\u4e8e\u8ba1\u7b97\u95f0\u5e74\u7684\u6570\u91cf\u3002\u5982\u679c\u662f\u6807\u51c6\u7684\u56db\u5e74\u4e00\u95f0\uff0c\u90a3\u4e48\u95f0\u5e74\u6570\u91cf\u663e\u7136\u4e3a $\\frac{k}{4}$\uff08$k$ \u4e3a\u8fc7\u4e86\u591a\u5c11\u5e74\uff09\u3002\u800c\u516c\u5143\u524d\u662f\u4ece\u516c\u5143\u524d 4713 \u5e74\u5f00\u59cb\uff0c\u8fd9\u662f\u4e2a\u95f0\u5e74\uff0c\u628a\u5b83\u5355\u72ec\u6458\u51fa\u6765\u540e\u5c31\u6210\u4e86\u6807\u51c6\u7684\u56db\u5e74\u4e00\u95f0\u3002\u516c\u5143\u540e\u5143\u5e74\u5230 1582 \u5e74\u672c\u6765\u5c31\u662f\u6807\u51c6\u7684\u56db\u5e74\u4e00\u95f0\uff0c\u76f4\u63a5\u5904\u7406\u5373\u53ef\u30021582 \u5e74\u4ee5\u540e\u5c31\u6bd4\u8f83\u9ebb\u70e6\uff0c\u4e3a\u4e86\u7b80\u4fbf\u8fd0\u7b97\u6211\u628a 1582 \u5e74\u4ee5\u540e\u53c8\u5206\u6210\u4e86\u56db\u6bb5\uff1a1582 \u5e74\uff0c1583 \u5e74\uff0c1584 \u5e74\u5230 1600 \u5e74\uff0c1601 \u5e74\u53ca\u4ee5\u540e\u3002\u5199\u51fa\u6765\u5927\u6982\u662f\u8fd9\u6837\uff1a\n```\nll count_year(int year){//\u8ba1\u7b97\u622a\u6b62\u5230year\u5e7412\u670831\u65e5\u6709\u591a\u5c11\u5929 \n\tif(year<0){\n\t\tint cnt=year+4713+1;\n\t\treturn 1ll*cnt*365+ceil(cnt/4.0);\n\t}\n\telse if(year<1582){\n\t\treturn count_year(-1)+year*365+year/4;\n\t}\n\t//\u6ce8\u610f\uff0c1582\u8fd9\u4e00\u5e74\u5c11\u4e8610\u5929 \n\telse if(year==1582){\n\t\treturn count_year(1581)+355; \n\t}\n\telse if(year==1583){\n\t\treturn count_year(1581)+355+365;\n\t}\n\telse if(year<=1600){\n\t\tint cnt=year-1583;\n\t\treturn count_year(1583)+cnt*365+(cnt-1)/4+1;\n\t}\n\telse{\n\t\tint cnt=year-1600;\n\t\treturn count_year(1600)+1ll*cnt*365+cnt/4-cnt/100+cnt/400;\n\t}\n}\n```\n\n\u6709\u4e86`count_year`\u51fd\u6570\u540e\uff0c\u7531\u4e8e\u8d77\u59cb\u65e5\u671f\u5230\u7b54\u6848\u65e5\u671f\u7684\u5929\u6570 $r$ \u4e00\u5b9a\u5c0f\u4e8e\u7b49\u4e8e\u8d77\u59cb\u65e5\u671f\u5230\u7b54\u6848\u7684\u5e74\u4efd\u7684\u6700\u540e\u4e00\u5929\u7684\u5929\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e8c\u5206\u6c42\u51fa\u7b54\u6848\u7684\u5e74\u4efd\uff0c\u5f97\u5230\u5e74\u4efd\u4e4b\u540e\u6211\u4eec\u53ea\u9700\u8981\u679a\u4e3e\u4e00\u4e0b\u6708\u4efd\uff0c\u601d\u8def\u548c\u6c42\u5e74\u4efd\u662f\u5171\u901a\u7684\uff0c\u53ea\u4e0d\u8fc7\u7531\u4e8e\u6708\u4efd\u53ea\u6709\u5341\u4e8c\u79cd\u53d6\u503c\u56e0\u6b64\u6ca1\u5fc5\u8981\u7528\u4e8c\u5206\u3002\u8fd9\u91cc\u4e5f\u9700\u8981\u5199\u4e00\u4e2a`count_month`\u51fd\u6570\uff0c\u7528\u6765\u8ba1\u7b97\u4ece\u67d0\u4e00\u5e74\u7684 1 \u6708 1 \u65e5\u5230\u67d0\u4e2a\u6708\u7684\u6700\u540e\u4e00\u5929\u6709\u591a\u5c11\u5929\uff1a\n```cpp\nint mo[30]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nint sum[30];\nint count_month(int year,int month){//\u622a\u6b62\u5230year\u5e74month\u6708\u7684\u6700\u540e\u4e00\u5929\u6709\u591a\u5c11\u5929\n\treturn sum[month]+(check(year)&&(month>=2))-(year==1582&&month>=10)*10;\n}\n```\n\u5e74\u4efd\u548c\u6708\u4efd\u90fd\u5f97\u5230\u4e86\uff0c\u90a3\u4e48\u5177\u4f53\u7684\u65e5\u671f\u53ea\u9700\u8981\u628a\u603b\u5929\u6570\u51cf\u53bb\u5e74\u4efd\u548c\u6708\u4efd\u6240\u5360\u7684\u5929\u6570\u3002\u5343\u4e07\u4e0d\u8981\u5fd8\u8bb0\u5728\u6c42\u51fa\u7b54\u6848\u540e\u518d\u5904\u7406\u4e00\u4e0b\u90a3\u6d88\u5931\u7684\u5341\u5929\uff01\n\n\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#define ll long long\n#define fo(i,x,y) for(int i=x;i<=y;++i)\n#define go(i,x,y) for(int i=x;i>=y;--i)\nusing namespace std;\n\ninline ll read(){\n\tll x=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)){\n\t\tx=(x<<1)+(x<<3)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\n\nll count_year(int year){//\u8ba1\u7b97\u622a\u6b62\u5230year\u5e7412\u670831\u65e5\u6709\u591a\u5c11\u5929 \n\tif(year<0){\n\t\tint cnt=year+4713+1;\n\t\treturn 1ll*cnt*365+ceil(cnt/4.0);\n\t}\n\telse if(year<1582){\n\t\treturn count_year(-1)+year*365+year/4;\n\t}\n\t//\u6ce8\u610f\uff0c1582\u8fd9\u4e00\u5e74\u5c11\u4e8610\u5929 \n\telse if(year==1582){\n\t\treturn count_year(1581)+355; \n\t}\n\telse if(year==1583){\n\t\treturn count_year(1581)+355+365;\n\t}\n\telse if(year<=1600){\n\t\tint cnt=year-1583;\n\t\treturn count_year(1583)+cnt*365+(cnt-1)/4+1;\n\t}\n\telse{\n\t\tint cnt=year-1600;\n\t\treturn count_year(1600)+1ll*cnt*365+cnt/4-cnt/100+cnt/400;\n\t}\n}\n\nbool check(int x){\n\tif(x<0) return ((-x)%4==1);\n\tif(x<=1582) return x%4==0;\n\treturn ((x%4==0&&x%100!=0)||(x%400==0));\n}\n\nint mo[30]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nint sum[30];\nint count_month(int year,int month){//\u622a\u6b62\u5230year\u5e74month\u6708\u7684\u6700\u540e\u4e00\u5929\u6709\u591a\u5c11\u5929\n\treturn sum[month]+(check(year)&&(month>=2))-(year==1582&&month>=10)*10;\n   //sum\u662fmo\u6570\u7ec4\u7684\u524d\u7f00\u548c\n}\n\nint main(){\n\tfo(i,1,12) sum[i]=sum[i-1]+mo[i];\n\tint T=read();\n\twhile(T--){\n\t\tll ri=read()+1;\n\t\tint L,R,mid,Year,Month,Day; \n\t\tL=-4713,R=1e9+5;\n\t\twhile(L<=R){//\u4e8c\u5206\u5e74\u4efd \n\t\t\tmid=(L+R)>>1;\n\t\t\tif(count_year(mid)>=ri) Year=mid,R=mid-1;\n\t\t\telse L=mid+1;\n\t\t}\n\t\tri-=count_year(Year-1);\n\t\tfo(i,1,12){\n\t\t\tint cm=count_month(Year,i);\n\t\t\tif(cm>=ri){\n\t\t\t\tMonth=i;\n\t\t\t\tDay=ri-count_month(Year,i-1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(Year==1582&&Month==10&&Day>4) Day+=10;\n\t\tif(Year<0) printf(\"%d %d %d BC\\n\",Day,Month,-Year);\n\t\telse printf(\"%d %d %d\\n\",Day,Month,Year);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1604892613,
        "uid": 238408,
        "name": "vectorwyx",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\u3011"
    },
    {
        "content": "\u9000\u5f79\u4e24\u5e74\u7684\u642c\u7816\u5de5\u6765\u8bd5\u6c34\u4e86\u4e00\u628a\uff0c\u53d1\u73b0\u4eca\u5e74 CSP \u7684\u540c\u5b66\u597d\u60e8\uff08\n\n\u8fd9\u9898\u4e3b\u8981\u6bd4\u8f83\u9ebb\u70e6\u7684\u5c31\u662f\u5386\u6cd5\u7684\u6539\u53d8\u548c\u8fb9\u754c\u95ee\u9898\u3002\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u63d0\u524d\u8ba1\u7b97\u51fa\u516c\u5143\u7b2c\u4e00\u5929\u548c 1582 \u5e74\u8d77\u6b62\u65e5\u7684\u65f6\u95f4\u6233\u6765\u5206\u6bb5\u5904\u7406\uff0c\u4ee5\u964d\u4f4e\u4ee3\u7801\u590d\u6742\u5ea6\u3002\n\n\u5bf9\u4e8e 1582 \u5e74\u4e4b\u524d\u7684\u5e74\u4efd\uff0c\u53ef\u4ee5\u6bcf 4 \u5e74\u6bcf\u4e00\u7ec4\u8ba1\u7b97\u8fd9\u4e2a\u65f6\u95f4\u6233\u8ddd\u79bb\u8ba1\u65f6\u5e74\u4efd\u8fc7\u53bb\u4e86\u591a\u5c11\u5e74\u3002\u56e0\u4e3a 1582 \u5e74\u524d\u5224\u65ad\u95f0\u5e74\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u56db\u5e74\u4e00\u6b21\u3002\u56e0\u6b64\u53ea\u8981\u8ba9\u7a0b\u5e8f\u4f4d\u4e8e\u7b2c\u4e00\u4e2a\u95f0\u5e74\u7684\u4e0b\u4e00\u5e74\u5f00\u59cb\u9664\u53bb\u56db\u5e74\u7684\u5929\u6570\u8ba1\u7b97\u56db\u5e74\u7684\u6570\u91cf\uff0c\u518d\u5faa\u73af\u5904\u7406\u5269\u4f59\u7684\u5e74\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u516c\u5143\u524d\u7684\u5e74\u4efd\uff0c\u53ef\u4ee5\u89c2\u5bdf\u5230\u5176\u95f0\u5e74\u7684\u89c4\u5219\u53ef\u4ee5\u6709\u6548\u5229\u7528\u8865\u7801\u7684\u6027\u8d28\uff0c\u56e0\u6b64\u76f4\u63a5\u53d6\u53cd\u540e\u8ba1\u7b97\u5373\u53ef\u3002\n\n1582 \u5e74\u53ef\u4ee5\u7279\u522b\u5904\u7406\u4e00\u4e0b\uff0c\u8fd9\u4e2a\u5730\u65b9\u6ca1\u6709\u4ec0\u4e48\u96be\u5ea6\uff0c\u53ea\u8981\u63d0\u524d\u6253\u597d 1582 \u5e74\u7684\u8d77\u6b62\u65f6\u95f4\u6233\u5373\u53ef\u3002\n\n\u7136\u540e\u5bf9\u4e8e 1583 \u5e74\u548c\u4e4b\u540e\u7684\u5e74\u4efd\uff0c\u56e0\u4e3a\u5386\u6cd5\u7684\u6539\u53d8\uff0c\u95f0\u5e74\u5468\u671f\u53d8\u4e3a 400 \u5e74\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u540c\u6837\u7684\u601d\u60f3\u4ee5 400 \u5e74\u4e3a\u4e00\u7ec4\u8ba1\u7b97\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u5728 400 \u5e74\u4e2d\u662f\u6709 303 \u4e2a\u5e73\u5e74\u548c 97 \u4e2a\u95f0\u5e74\u3002\n\n\u4f30\u8ba1\u6700\u574f\u590d\u6742\u5ea6\u4e3a $\\mathrm{O}(400Q)$\uff0c\u901a\u8fc7\u6b64\u9898\u8fd8\u662f\u6ca1\u95ee\u9898\u7684\u3002\u6d1b\u8c37\u8bc4\u6d4b\u6700\u957f\u7684\u4e00\u4e2a\u70b9\u8fd0\u884c `132ms`\u3002\n\n\u6700\u540e\u9700\u8981\u6ce8\u610f\u7684\u662f\u6570\u636e\u8303\u56f4\u4ee5\u53ca\u6708\u4efd\u7684\u7b2c\u4e00\u5929\u662f 1 \u65e5\u800c\u4e0d\u662f 0 \u65e5\u3002\u6574\u4f53\u6765\u8bf4\u6a21\u62df\u4e0d\u7b97\u7279\u522b\u5927\u4e5f\u4f46\u4e5f\u4e0d\u5c0f\uff0c\u5bf9\u4e8e\u5927\u90e8\u5206\u9009\u624b\u6765\u8bf4\u5728\u8d5b\u573a\u4e0a\u5199\u51fa\u6765\u7684\u8fd8\u662f\u6bd4\u8f83\u6709\u6311\u6218\u6027\u7684\u3002\n\nAC \u4ee3\u7801\u5982\u4e0b(AFO \u5f88\u4e45\u4e86\u4ee3\u7801\u98ce\u683c\u53ef\u80fd\u6bd4\u8f83\u9b3c\u54c8\u54c8\u54c8\u54c8)\uff1a  \n```cpp\n#include <cstdio>\n#include <algorithm>\n#define MAXN ((int)(1e5 + 10))\n#define LEAP (1)\nconst int DAYS[2][13] = {\n    {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},\n    {0, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},\n};\nconst int DAYCOUNT[2] = {365, 366};\n\nconst int AD_FIRSTDAY = 1721424;\nconst int AD_1582_DAYS = 355;\nconst int AD_1582_START = 2298884;\nconst int AD_1582_END = AD_1582_START + AD_1582_DAYS;\nstruct Date {\n    int y, m, d;\n    void print() {\n        printf(\"%d %d %d%s\\n\", d, m, y < 0 ? -y : y, y < 0 ? \" BC\" : \"\");\n    }\n} _mempool[MAXN];\nDate* allocDateObj() {\n    static int ptr = 0;\n    return &_mempool[++ptr];\n}\nbool isLeapJulian(int x) {\n    return !((x < 0 ? (~x) : x) % 4);\n}\nbool isLeapGregorian(int x) {\n    return !(x % 100 ? (x % 4) : (x % 400));\n}\nint yearsJulian(long long &r, int base) {\n    while (true) {\n        if (r >= DAYCOUNT[isLeapJulian(base)]) {\n            r -= DAYCOUNT[isLeapJulian(base)];\n            if (isLeapJulian(base++)) break;\n        } else {\n            break;\n        }\n    }\n    int years4 = r / (DAYCOUNT[!LEAP] * 3 + DAYCOUNT[LEAP]);\n    r -= 1ll * years4 * (DAYCOUNT[!LEAP] * 3 + DAYCOUNT[LEAP]);\n    base += 4 * years4;\n    while (true) {\n        if (r >= DAYCOUNT[isLeapJulian(base)]) {\n            r -= DAYCOUNT[isLeapJulian(base)];\n            base++;\n        } else {\n            break;\n        }\n    }\n    return base;\n}\nint yearsGregorian(long long &r, int base) {\n    while (true) {\n        if (r >= DAYCOUNT[isLeapGregorian(base)]) {\n            r -= DAYCOUNT[isLeapGregorian(base)];\n            if (isLeapGregorian(base++) && !(r % 100)) break;\n        } else {\n            break;\n        }\n    }\n    int years400 = r / (DAYCOUNT[!LEAP] * 303 + DAYCOUNT[LEAP] * 97);\n    r -= 1ll * years400 * (DAYCOUNT[!LEAP] * 303 + DAYCOUNT[LEAP] * 97);\n    base += years400 * 400;\n    while (true) {\n        if (r >= DAYCOUNT[isLeapGregorian(base)]) {\n            r -= DAYCOUNT[isLeapGregorian(base)];\n            base++;\n        } else {\n            break;\n        }\n    }\n    return base;\n}\nDate* dateCommon(long long &r, int const base, bool (*isLeap)(int), int (*years)(long long &, int)) {\n    int year = years(r, base), month = 1;\n    for (month = 1; month <= 12; month++) {\n        if (r >= DAYS[isLeap(year)][month]) r -= DAYS[isLeap(year)][month];\n        else break;\n    }\n    int days = r + 1;\n    Date* ret = allocDateObj();\n    ret->y = year, ret->m = month, ret->d = days;\n    return ret;\n}\nDate* process(long long r) {\n    Date* ret = NULL;\n    if (r < AD_FIRSTDAY) {\n        ret = dateCommon(r, -4713, isLeapJulian, yearsJulian);\n    }\n    else if (r >= AD_FIRSTDAY && r < AD_1582_START) {\n        r -= AD_FIRSTDAY;\n        ret = dateCommon(r, 1, isLeapJulian, yearsJulian);\n    }\n    else if (r >= AD_1582_START && r < AD_1582_END) {\n        r -= AD_1582_START;\n        ret = allocDateObj();\n        ret->y = 1582;\n        for (ret->m = 1; ret->m <= 12; ret->m++) {\n            if (r >= DAYS[!LEAP][ret->m] - ((ret->m == 10) ? 10 : 0)) {\n                r -= DAYS[!LEAP][ret->m] - ((ret->m == 10) ? 10 : 0);\n            } else {\n                break;\n            }\n        }\n        ret->d = r + 1;\n        if (ret->m == 10) {\n            if (ret->d > 4) {\n                ret->d += 10;\n            }\n        }\n    }\n    else {\n        r -= AD_1582_END;\n        ret = dateCommon(r, 1583, isLeapGregorian, yearsGregorian);\n    }\n    return ret;\n}\nint main(int argc, char const *argv[]) {\n#ifndef VICTORHUANG_DEBUG\n    freopen(\"julian.in\", \"r\", stdin);\n    freopen(\"julian.out\", \"w\", stdout);\n#endif\n    int q;\n    long long r;\n    scanf(\"%d\", &q);\n    while (q--) {\n        scanf(\"%lld\", &r);\n        Date* d = process(r);\n        d->print();\n    }\n    return 0;\n}\n```",
        "postTime": 1605071097,
        "uid": 82812,
        "name": "qwqVictor",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7075 \u3010\u5112\u7565\u65e5\uff08\u6d1b\u8c37\u6c11\u95f4\u6570\u636e\uff09\u3011"
    }
]
[
    {
        "content": "\u601d\u8def\uff1a\n\n\u53d1\u73b0 k \u5f88\u5c0f\uff0c\u6240\u4ee5\u5206\u7c7b\u8ba8\u8bba\u4e00\u6ce2\n\n$k=2$\n\n\u76f4\u63a5\u8f93\u51fa\u5c31\u884c\u4e86\n\n$k=3$\n\n\u679a\u4e3e\u4e2d\u95f4\u70b9\n\n```cpp\nvoid solve_3(){\n    for(int i = 1; i <= n; ++i){\n        int u = i; c2 = 0;\n        for(int j = head[u]; ~j; j = e[j].next){\n            int v = e[j].to; a[++c2] = v;\n\t\t}\n        for(int j = 1; j <= c2; ++j)\n            for(int k = 1; k < j; ++k)\n                ans[a[j]][a[k]] = ans[a[k]][a[j]] = 1;\n    }\n}\n```\n\n\u590d\u6742\u5ea6 $O(m^2)$\n\n$k=4$\n\n\u5148\u679a\u4e3e\u4e24\u7aef\u70b9 $u$ \u548c $v$\uff0c\u7136\u540e\u518d\u679a\u4e3e\u91cc\u9762\u7684\u4e24\u4e2a\u70b9 $p$ \u548c $q$ \u5373\u53ef\u3002\u590d\u6742\u5ea6 $O(m^2)$\uff0c\u56e0\u4e3a\u6bcf\u5bf9\u8fb9\u88ab\u679a\u4e3e\u4e86 $O(1)$ \u6b21\n\n![1](https://i.loli.net/2018/09/27/5bac488bea4f5.png)\n\n$k=5$\n\n\u5148\u6765\u4e2a\u56fe\n\n![2](https://i.loli.net/2018/09/27/5bac497aa1512.png)\n\n\u53d1\u73b0\u8fd9\u6837\u7684 $(x,y)$ \u662f\u5408\u6cd5\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u4e0d\u540c\u7684\u70b9 $p$ \u548c $q$ \u4ee5\u53ca\u548c $p$ \u76f8\u8fde\u7684\u70b9 $x$ \u8fd8\u6709\u4e0e $q$ \u76f8\u8fde\u7684\u70b9 $y$\uff0c\u5982\u679c $p$ \u548c $q$ \u4e4b\u95f4\u8fd8\u6709\u4e00\u70b9 $u$\uff0c\u4e14 $p$ \u548c $u$ \u76f8\u8fde\uff0c$q$ \u548c $u$ \u76f8\u8fde\uff0c\u90a3\u4e48 $(x,y)$ \u5c31\u662f\u5408\u6cd5\u7684\n\n\u9996\u5148\u679a\u4e3e $p$ \u548c $q$\uff0c\u7136\u540e\u679a\u4e3e\u4e2d\u95f4\u70b9 $u$\uff0c\u8bb0\u5f55\u4e2d\u95f4\u70b9\u4e2a\u6570\u548c $cnt[u]$ \u8868\u793a $u$ \u662f\u5426\u80fd\u4f5c\u4e3a\u4e2d\u95f4\u70b9\u3002\u7136\u540e\u518d\u679a\u4e3e $x$ \u548c $y$\uff0c\u5224\u65ad\u662f\u5426\u9664\u4e86 $x$ \u548c $y$ \u4e4b\u5916\u8fd8\u6709\u522b\u7684\u70b9\u53ef\u4ee5\u4f5c\u4e3a\u4e2d\u95f4\u70b9\uff0c\u8fd9\u4e2a\u53ea\u9700\u5224\u65ad $sum-cnt[x]-cnt[y]$ \u662f\u5426\u5927\u4e8e 0 \u5373\u53ef\n\n\u590d\u6742\u5ea6\u8fd8\u662f $O(m^2)$\n\n```cpp\nvoid solve_5(){\n\tfor(int p = 1; p <= n; ++p)\n        for(int q = 1; q < p; ++q){\n        \tint sum = 0; \n        \tfor(int i = head[p]; ~i; i = e[i].next){\n        \t\tint u = e[i].to; if(u == q || !g[u][q]) continue;\n        \t\tcnt[u] = 1; ++sum;\n\t\t\t}\n            for(int l = head[p]; ~l; l = e[l].next){\n                int x = e[l].to; if(x == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int y = e[r].to; if(y == p || y == x) continue;\n                    ans[y][x] = (ans[x][y] |= sum - cnt[x] - cnt[y] > 0);\n                }\n            }\n        \tfor(int i = head[p]; ~i; i = e[i].next){\n        \t\tint u = e[i].to; if(u == q) continue;\n        \t\tcnt[u] = 0;\n\t\t\t}\n\t\t}\n}\n```\n\n$k=6$\n\n \u65b9\u6cd5\u5176\u5b9e\u7c7b\u4f3c \u770b\u56fe\n\n![3](https://i.loli.net/2018/09/27/5bac4d2a5db83.png)\n\n\u8fd8\u662f\u679a\u4e3e $p$ \u548c $q$\uff0c\u7136\u540e\u679a\u4e3e $u$ \u548c $v$\uff0c\u6211\u4eec\u7edf\u8ba1\u51fa\u73b0\u5728\u4e2d\u95f4\u8def\u5f84\u7684\u603b\u6761\u6570\u548c $cnt[u]$ \u8868\u793a $u$ \u51fa\u73b0\u5728\u4e2d\u95f4\u8def\u5f84\u7684\u6b21\u6570\n\n\u7136\u540e\u5728\u679a\u4e3e $x$ \u548c $y$\uff0c\u53ea\u8981\u6ee1\u8db3 $sum-cnt[x]-cnt[y]+[x\u548cy\u8fde\u901a]$   \u6bd4\u8f83\u7b80\u5355\u7684\u5bb9\u65a5 \n\n\u590d\u6742\u5ea6\u4f9d\u7136\u662f $O(m^2)$\n\n```cpp\nfor(int p = 1; p <= n; ++p)\n        for(int q = 1; q < p; ++q){\n        \tint sum = 0; \n            for(int l = head[p]; ~l; l = e[l].next){\n                int u = e[l].to; if(u == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int v = e[r].to; if(v == p || u == v || !g[u][v]) continue;\n                \t++cnt[u]; ++cnt[v]; ++sum;\n\t\t\t\t}\n            }\n            for(int l = head[p]; ~l; l = e[l].next){\n                int x = e[l].to; if(x == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int y = e[r].to; if(y == p || x == y) continue;\n                    ans[y][x] = (ans[x][y] |= sum - cnt[x] - cnt[y] + g[x][y] > 0);\n\t\t\t\t}\n            }\n            for(int l = head[p]; ~l; l = e[l].next){\n                int u = e[l].to; if(u == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int v = e[r].to; if(v == p || u == v || !g[u][v]) continue;\n                \tcnt[u] = cnt[v] = 0;\n\t\t\t\t}\n            }\n\t\t}\n```\n\n$k=7$\n\n\u8fd9\u79cd\u60c5\u51b5\u5c31\u6bd4\u8f83\u9ebb\u70e6\u4e86\uff0c\u4f46\u662f\u603b\u7684\u65b9\u6cd5\u8fd8\u662f\u4e0d\u53d8\u7684\n\n![4](https://i.loli.net/2018/09/27/5bac4ef0d2387.png)\n\n\u9996\u5148\u9884\u5904\u7406\u51fa\u6240\u6709\u4e09\u5143\u7ec4 $(p,z,q)$\n\n\u7136\u540e\u6211\u4eec\u8fd9\u6b21\u679a\u4e3e $(u,v)$\uff0c\u7136\u540e\u5728\u679a\u4e3e\u4e09\u5143\u7ec4\uff0c\u7edf\u8ba1\u4e2d\u95f4\u4e09\u5143\u7ec4\u7684\u4e2a\u6570\u548c $cnt[u]$ \u8868\u793a u \u5728\u4e09\u5143\u7ec4\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\uff0c$cnt1[u][v]$ \u8868\u793a u \u548c v \u5728\u4e09\u5143\u7ec4\u4e2d\u4f5c\u4e3a\u8fb9\u4e0a\u7684\u4e24\u4e2a\u7684\u65b9\u6848\u6570\u5373 $p$ \u548c $q$\uff0c$cnt[u][v]$ \u8868\u793a $u$ \u5728 $p$ \u7684\u4f4d\u7f6e\uff0c$v$ \u5728 $z$ \u7684\u4f4d\u7f6e\u7684\u65b9\u6848\u6570\n\n\u518d\u679a\u4e3e $x$ \u548c $y$\uff0c\u53ea\u8981\u6ee1\u8db3 $sum-cnt[x]-cnt[y]+cnt1[x][y]+cnt2[x][y]+cnt2[y][x]>0$\n\n\u590d\u6742\u5ea6== $vis1$ \u548c $vis2$ \u53ea\u662f\u65b9\u4fbf\u4e0d\u7528\u6bcf\u6b21\u90fd\u7f6e\u96f6\n\n```cpp\nvoid solve_7(){\n\tmemset(vis1, 0, sizeof vis1); memset(vis2, 0, sizeof vis2); I = 0; \n\tfor(int i = 1; i <= n; ++i)\n\t\tfor(int j = 1; j <= n; ++j) b[i][j].clear();\n\tfor(int i = 1; i <= n; ++i){\n        int u = i; c2 = 0;\n        for(int j = head[u]; ~j; j = e[j].next){\n            int v = e[j].to;\n            a[++c2] = v;\n        }\n        for(int j = 1; j <= c2; ++j)\n            for(int k = 1; k < j; ++k){\n            \tb[a[j]][a[k]].pb(i);\n            \tb[a[k]][a[j]].pb(i);\n            }\n\t}\n\tfor(int u = 1; u <= n; ++u)\n\t\tfor(int v = 1; v < u; ++v){\n\t\t\tint sum = 0; ++I; c3 = 0;\n\t\t\tfor(int i = head[u]; ~i; i = e[i].next){\n\t\t\t\tint p = e[i].to; if(p == v) continue;\n\t\t\t\tfor(int j = head[v]; ~j; j = e[j].next){\n\t\t\t\t\tint q = e[j].to; if(q == u || p == q) continue;\n\t\t\t\t\tfor(int k = 0, _s = b[p][q].size(); k < _s; ++k){\n\t\t\t\t\t\tint z = b[p][q][k]; if(z == u || z == v) continue;\n\t\t\t\t\t\t\n\t\t\t\t\t\tc[++c3] = z;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(vis1[p][q] == I) ++cnt1[p][q];\n\t\t\t\t\t\telse vis1[p][q] = I, cnt1[p][q] = 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(vis2[p][z] == I) ++cnt2[p][z];\n\t\t\t\t\t\telse vis2[p][z] = I, cnt2[p][z] = 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(vis2[q][z] == I) ++cnt2[q][z];\n\t\t\t\t\t\telse vis2[q][z] = I, cnt2[q][z] = 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\t++cnt[q]; ++cnt[p]; ++cnt[z]; ++sum;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t\tfor(int i = head[u]; ~i; i = e[i].next){\n\t\t\t\tint p = e[i].to; if(p == v) continue;\n\t\t\t\tfor(int j = head[v]; ~j; j = e[j].next){\n\t\t\t\t\tint q = e[j].to; if(q == u || p == q) continue;\n\t\t\t\t\tif(vis1[p][q] != I) cnt1[p][q] = 0;\n\t\t\t\t\tif(vis2[p][q] != I) cnt2[p][q] = 0;\n\t\t\t\t\tif(vis2[q][p] != I) cnt2[q][p] = 0;\n\t\t\t\t\tans[p][q] |= (sum - cnt[p] - cnt[q] + cnt1[p][q] + cnt2[p][q] + cnt2[q][p] > 0);\n\t\t\t\t\tans[q][p] = ans[p][q];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int i = 1; i <= c3; ++i) cnt[c[i]] = 0;\n\t\t\tfor(int i = head[u]; ~i; i = e[i].next) cnt[e[i].to] = 0;\n\t\t\tfor(int i = head[v]; ~i; i = e[i].next) cnt[e[i].to] = 0;\n\t\t}\n}\n```\n\nAC \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<vector>\n#define maxn 1010\n#define maxm 5010\n#define pb push_back\nusing namespace std;\n\nint T, n, m, K;\n\nint u[maxm], v[maxm];\n\nstruct Edge{\n    int to, next;\n}e[maxm * 2]; int c1, head[maxn];\ninline void add_edge(int u, int v){\n    e[c1].to = v; e[c1].next = head[u]; head[u] = c1++;\t\n}\n\nint g[maxn][maxn];\n\nbool ans[maxn][maxn];\nvoid put(){\n    for(int i = 1; i <= n; ++i, putchar('\\n'))\n        for(int j = 1; j <= n; ++j){\n            if(ans[i][j]) putchar('Y');\n            else putchar('N');\t\n        \tans[i][j] = 0;\n\t\t}\n}\n\nvoid solve_2(){\n    for(int i = 1; i <= n; ++i)\n        for(int j = head[i]; ~j; j = e[j].next) ans[i][e[j].to] = 1;\n}\n\nint a[maxn], c2;\nvoid solve_3(){\n    for(int i = 1; i <= n; ++i){\n        int u = i; c2 = 0;\n        for(int j = head[u]; ~j; j = e[j].next){\n            int v = e[j].to; a[++c2] = v;\n\t\t}\n        for(int j = 1; j <= c2; ++j)\n            for(int k = 1; k < j; ++k)\n                ans[a[j]][a[k]] = ans[a[k]][a[j]] = 1;\n    }\n}               \n\nvoid solve_4(){\n    for(int i = 1; i <= n; ++i)\n        for(int j = 1; j < i; ++j){\n            bool F = 0;\n            for(int l = head[i]; ~l && !F; l = e[l].next){\n                int v1 = e[l].to; if(v1 == j) continue;\n                for(int r = head[j]; ~r; r = e[r].next){\n                    int v2 = e[r].to; if(v2 == i || v2 == v1) continue;\n                    if(g[v1][v2]){F = 1; break;}\n                }\n            }\n            ans[i][j] = ans[j][i] = F;\n        }\n}\n\nint cnt[maxn];\nvoid solve_5(){\n\tfor(int p = 1; p <= n; ++p)\n        for(int q = 1; q < p; ++q){\n        \tint sum = 0; \n        \tfor(int i = head[p]; ~i; i = e[i].next){\n        \t\tint u = e[i].to; if(u == q || !g[u][q]) continue;\n        \t\tcnt[u] = 1; ++sum;\n\t\t\t}\n            for(int l = head[p]; ~l; l = e[l].next){\n                int x = e[l].to; if(x == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int y = e[r].to; if(y == p || y == x) continue;\n                    ans[y][x] = (ans[x][y] |= sum - cnt[x] - cnt[y] > 0);\n                }\n            }\n        \tfor(int i = head[p]; ~i; i = e[i].next){\n        \t\tint u = e[i].to; if(u == q) continue;\n        \t\tcnt[u] = 0;\n\t\t\t}\n\t\t}\n}\n\nvoid solve_6(){\n\tfor(int p = 1; p <= n; ++p)\n        for(int q = 1; q < p; ++q){\n        \tint sum = 0; \n            for(int l = head[p]; ~l; l = e[l].next){\n                int u = e[l].to; if(u == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int v = e[r].to; if(v == p || u == v || !g[u][v]) continue;\n                \t++cnt[u]; ++cnt[v]; ++sum;\n\t\t\t\t}\n            }\n            for(int l = head[p]; ~l; l = e[l].next){\n                int x = e[l].to; if(x == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int y = e[r].to; if(y == p || x == y) continue;\n                    ans[y][x] = (ans[x][y] |= sum - cnt[x] - cnt[y] + g[x][y] > 0);\n\t\t\t\t}\n            }\n            for(int l = head[p]; ~l; l = e[l].next){\n                int u = e[l].to; if(u == q) continue;\n                for(int r = head[q]; ~r; r = e[r].next){\n                    int v = e[r].to; if(v == p || u == v || !g[u][v]) continue;\n                \tcnt[u] = cnt[v] = 0;\n\t\t\t\t}\n            }\n\t\t}\n}\n\nvector<int> b[maxn][maxn];\nint cnt1[maxn][maxn], cnt2[maxn][maxn], I;\nint vis1[maxn][maxn], vis2[maxn][maxn];\n\nint c[maxm], c3;\n\nvoid solve_7(){\n\tmemset(vis1, 0, sizeof vis1); memset(vis2, 0, sizeof vis2); I = 0; \n\tfor(int i = 1; i <= n; ++i)\n\t\tfor(int j = 1; j <= n; ++j) b[i][j].clear();\n\tfor(int i = 1; i <= n; ++i){\n        int u = i; c2 = 0;\n        for(int j = head[u]; ~j; j = e[j].next){\n            int v = e[j].to;\n            a[++c2] = v;\n        }\n        for(int j = 1; j <= c2; ++j)\n            for(int k = 1; k < j; ++k){\n            \tb[a[j]][a[k]].pb(i);\n            \tb[a[k]][a[j]].pb(i);\n            }\n\t}\n\tfor(int u = 1; u <= n; ++u)\n\t\tfor(int v = 1; v < u; ++v){\n\t\t\tint sum = 0; ++I; c3 = 0;\n\t\t\tfor(int i = head[u]; ~i; i = e[i].next){\n\t\t\t\tint p = e[i].to; if(p == v) continue;\n\t\t\t\tfor(int j = head[v]; ~j; j = e[j].next){\n\t\t\t\t\tint q = e[j].to; if(q == u || p == q) continue;\n\t\t\t\t\tfor(int k = 0, _s = b[p][q].size(); k < _s; ++k){\n\t\t\t\t\t\tint z = b[p][q][k]; if(z == u || z == v) continue;\n\t\t\t\t\t\t\n\t\t\t\t\t\tc[++c3] = z;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(vis1[p][q] == I) ++cnt1[p][q];\n\t\t\t\t\t\telse vis1[p][q] = I, cnt1[p][q] = 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(vis2[p][z] == I) ++cnt2[p][z];\n\t\t\t\t\t\telse vis2[p][z] = I, cnt2[p][z] = 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(vis2[q][z] == I) ++cnt2[q][z];\n\t\t\t\t\t\telse vis2[q][z] = I, cnt2[q][z] = 1;\n\t\t\t\t\t\t\n\t\t\t\t\t\t++cnt[q]; ++cnt[p]; ++cnt[z]; ++sum;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\n\t\t\tfor(int i = head[u]; ~i; i = e[i].next){\n\t\t\t\tint p = e[i].to; if(p == v) continue;\n\t\t\t\tfor(int j = head[v]; ~j; j = e[j].next){\n\t\t\t\t\tint q = e[j].to; if(q == u || p == q) continue;\n\t\t\t\t\tif(vis1[p][q] != I) cnt1[p][q] = 0;\n\t\t\t\t\tif(vis2[p][q] != I) cnt2[p][q] = 0;\n\t\t\t\t\tif(vis2[q][p] != I) cnt2[q][p] = 0;\n\t\t\t\t\tans[p][q] |= (sum - cnt[p] - cnt[q] + cnt1[p][q] + cnt2[p][q] + cnt2[q][p] > 0);\n\t\t\t\t\tans[q][p] = ans[p][q];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int i = 1; i <= c3; ++i) cnt[c[i]] = 0;\n\t\t\tfor(int i = head[u]; ~i; i = e[i].next) cnt[e[i].to] = 0;\n\t\t\tfor(int i = head[v]; ~i; i = e[i].next) cnt[e[i].to] = 0;\n\t\t}\n}\n\nvoid work(){\n    memset(head, -1, sizeof head); c1 = 0;\n    scanf(\"%d%d%d\", &n, &m, &K);\n    for(int i = 1; i <= m; ++i){\n        int x, y; scanf(\"%d%d\", &x, &y);\n        add_edge(x, y); add_edge(y, x);\n        g[x][y] = g[y][x] = 1;\n        u[i] = x; v[i] = y;\n    }\n    switch(K){\n        case 2 : solve_2();\tbreak;\n        case 3 : solve_3(); break;\n        case 4 : solve_4(); break;\n        case 5 : solve_5(); break;\n        case 6 : solve_6(); break;\n        case 7 : solve_7(); break;\n    } put();\n    for(int i = 1; i <= m; ++i) g[u[i]][v[i]] = g[v[i]][u[i]] = 0;\n}\n\nint main(){\n\tscanf(\"%d\", &T);\n    while(T--) work();\n}\n```",
        "postTime": 1538019436,
        "uid": 34531,
        "name": "DDOSvoid",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3323 \u3010[SDOI2015]\u65c5\u884c\u8ba1\u5212\u3011"
    }
]
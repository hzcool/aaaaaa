[
    {
        "content": "# \u9898\u89e3 - $\\mathrm{P5593}$\n\n## \u9898\u76ee\u63cf\u8ff0\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P5593)\n\n\u7ed9\u51fa\u4e00\u68f5 $n$ \u4e2a\u70b9\u7684\u6811\uff0c\u6bcf\u4e2a\u70b9\u4e0a\u6709\u4e00\u79cd\u989c\u8272\u3002\u73b0\u5728\u8bf7\u4f60\u6c42\u51fa\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u989c\u8272\uff0c\u6811\u4e0a\u6709\u591a\u5c11\u6761\u94fe\u5305\u542b\u8be5\u79cd\u989c\u8272\u7684\u6240\u6709\u70b9\u3002\n\n$n\\leq 3\\times 10^6$\n\n## $\\mathrm{Sol}$\n\n\u4e00\u9053\u7ec6\u8282\u5f88\u591a\u7684\u9898\u76ee\u3002\n\n\u9996\u5148\u6211\u4eec\u5f88\u5bb9\u6613\u60f3\u5230\u82e5\u4e00\u79cd\u989c\u8272\u7684\u6570\u91cf $t_i=0$ \u90a3\u4e48\u8f93\u51fa $\\frac{n\\times(n+1)}{2}$\u3002\u5df2\u7ecf\u5982\u679c\u4e00\u79cd\u989c\u8272\u5728\u5927\u4e8e\u7b49\u4e8e\u4e09\u68f5\u5b50\u6811\u4e2d\u51fa\u73b0\u8fc7\u90a3\u4e48\u8f93\u51fa $0$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u8003\u8651 $t_i=1$ \u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u4e5f\u6bd4\u8f83\u5bb9\u6613\u7b54\u6848\u5c31\u662f\u8fd9\u4e2a\u8282\u70b9\u4e3a\u6839\u7684\u5b50\u6811\u5927\u5c0f\u76f8\u4e92\u4e58\u8d77\u6765\u518d\u7d2f\u52a0\u3002\n\n\u96be\u70b9\u5728\u4e8e\u67d0\u79cd\u989c\u8272\u6709\u4e24\u4e2a\u7aef\u70b9\u7684\u60c5\u51b5\u7684\u5904\u7406\u3002\u6211\u4eec\u8bb0 $mp_c$ \u4e3a\u989c\u8272 $c$ \u5230\u73b0\u5728\u51fa\u73b0\u7684\u4e2a\u6570\uff0c\u5e76\u4e14\u8bb0\u5f55 $tot$ \u8868\u793a\u5728\u5f53\u524d\u5b50\u6811\u4e2d\u6709\u51e0\u4e2a\u989c\u8272\u4e3a $c$ \u7684\u4e2a\u6570\u3002\u90a3\u4e48\u6bcf\u6b21\u9012\u5f52\u5b8c\u4e00\u9897\u5b50\u6811\u770b $mp_c$ \u662f\u5426\u6539\u53d8\uff0c\u82e5\u6539\u53d8\u90a3\u4e48 $tot$ \u52a0\u4e00\u3002\u82e5 $tot=1$ \u5219\u8868\u793a\u5176\u4e3a\u8be5\u989c\u8272\u7684\u67d0\u4e00\u4e2a\u7aef\u70b9\u3002\u90a3\u4e48\u7b54\u6848\u5373\u4e3a\u4e24\u4e2a\u7aef\u7684\u5b50\u6811\u5927\u5c0f\u4e58\u79ef\uff0c\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\n\n\n## $\\mathrm{Code}$\n\n```cpp\nconst int N=3e6+5;\n\nint n,m,cnt,t[N],col[N],siz[N],Siz[N];\nint gs[N],cs[N],head[N],Nod[N],Ans[N];\n\nstruct Node\n{\n\tint nex,to;\n};\nNode e[N<<1];\n\ninline void jia(int u,int v)\n{\n\te[++cnt].nex=head[u];\n\thead[u]=cnt;\n\te[cnt].to=v;\n}\n\ninline void dfs(int u,int fa)\n{\n\tsiz[u]=1;\n\tint Col=col[u],sum=0;\n\tint onend=0,Las=cs[Col];\n\tGO(i,u) \n\t{\n\t\tint v=e[i].to;\n\t\tif(v==fa) continue;\n\t\tint las=cs[Col];//\u9012\u5f52\u8fd9\u9897\u5b50\u6811\u4e4b\u524d\u7684\u989c\u8272\u4e2a\u6570\n\t\tdfs(v,u);\n\t\tSiz[u]+=siz[u]*siz[v];//\u5bf9\u5c311\u4e2a\u8be5\u989c\u8272\u7b54\u6848\u7684\u7edf\u8ba1\n\t\tsiz[u]+=siz[v];\n\t\tif(las^cs[Col]) sum++,onend=v;//\u8bb0\u5f55\u7aef\u70b9\n\t}\n\tSiz[u]+=siz[u]*(n-siz[u]);\n\tif(Las||t[Col]-1!=cs[Col]) sum++;//\u5b50\u6811u\u81ea\u5df1\u672c\u8eab\u4e5f\u8981\u7edf\u8ba1\u8fdb\u53bb\n\tcs[Col]++;\n\tif(sum==1) \n\t{\n\t\tif(!gs[Col]) Nod[Col]=u;\n\t\telse \n\t\t{\n\t\t\tint mul=(onend)?n-siz[onend]:siz[u];\n\t\t\tAns[Col]=siz[Nod[Col]]*mul;\n\t\t}\n\t\tgs[Col]++;//\u7edf\u8ba1\u6709\u51e0\u4e2a\u5b50\u6811\u6709\u989c\u8272Col\n\t}\n}\n\nsigned main()\n{\n\tio.read(n);\n\tFor(i,1,n) \t\n\t{\n\t\tio.read(col[i]);\n\t\tt[col[i]]++;\n\t\tNod[col[i]]=i;\n\t}\n\tFor(i,1,n-1)\n\t{\n\t\tint x,y;\n\t\tio.read(x),io.read(y);\n\t\tjia(x,y),jia(y,x);\n\t}\n\tdfs(1,0);\n\tFor(i,1,n) \n\t{\n\t\tint ret=0;\n\t\tif(!t[i]) ret=n*(n-1)/2ll;//\u6ca1\u6709\u8fd9\u79cd\u989c\u8272\n\t\tif(t[i]==1) ret=Siz[Nod[i]]; //\u67091\u79cd\n\t\tif(gs[i]==2) ret=Ans[i];//\u4e24\u4e2a\u7aef\u70b9\u60c5\u51b5\n\t\tio.write(ret),puts(\"\");\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1600009039,
        "uid": 308464,
        "name": "\u5947\u7c73",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5593 \u3010\u5c0f\u732a\u4f69\u5947\u722c\u6811 \u52a0\u5f3a\u7248\u3011"
    },
    {
        "content": "\u76f4\u63a5\u642c\u8fd0\u539f\u9898\u7684\u9898\u89e3.jpg\n\n\u6b22\u8fce\u5176\u4ed6\u7684 $O(N)$ \u7b97\u6cd5\u6765ddw\u3002\n\n\u5982\u679c\u6709\u590d\u6742\u5ea6\u9ad8\u4e8e $O(N)$ \u7684\u7b97\u6cd5\u8fc7\u4e86\uff0c\u8bf7\u53ca\u65f6\u901a\u77e5 CYJian\uff0c\u7136\u540e\u52a0\u5f3a\u6570\u636e\u3002\n\n---\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\uff0c\u6bd4\u8f83\u663e\u7136\u7684\u4e00\u70b9\u662f\uff1a\u5982\u679c\u5b58\u5728\u4e00\u4e2a\u70b9\uff0c\u5b58\u5728\u4e09\u4e2a\u4ee5\u4e0a\u7684\u5b50\u6811\u4e2d\u6709\u4e0e\u5176\u76f8\u540c\u7684\u989c\u8272\u7684\u70b9\uff0c\u90a3\u4e48\u8fd9\u79cd\u989c\u8272\u7684\u65b9\u6848\u5c31\u662f $0$\u3002\n\n\u5426\u5219\u7684\u8bdd\uff0c\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e9b\u989c\u8272\u76f8\u540c\u7684\u70b9\u4e00\u5b9a\u5728\u6811\u4e0a\u7684\u67d0\u4e00\u6761\u94fe\u4e0a\uff0c\u90a3\u4e48\u627e\u5230\u94fe\u7684\u4e24\u4e2a\u7aef\u70b9\uff0c\u65b9\u6848\u6570\u5c31\u662f\u53bb\u6389\u4e24\u7aef\u70b9\u4e2d\u95f4\u7684\u4e00\u5768\u70b9\uff0c\u5269\u4e0b\u4e24\u68f5\u7684\u5b50\u6811\u5927\u5c0f\u7684\u4e58\u79ef\u3002\n\n\u7136\u540e\u601d\u8def\u5c31\u5f88\u6e05\u6670\u4e86\uff1a\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u770b\u770b\u662f\u4e0d\u662f\u53ea\u6709\u4e00\u6761\u8fb9\u6240\u8fde\u7684\u5b50\u6811\u4e2d\u6709\u4e0e\u5176\u76f8\u540c\u989c\u8272\u7684\u70b9\u3002\u5982\u679c\u662f\u5c31\u662f\u4e00\u4e2a\u7aef\u70b9\u3002\n\n\u7136\u540e\u8bb0\u5f55\u4e0b\u8fd9\u6761\u8fb9\uff0c\u6700\u540e\u8ba1\u7b97\u53ea\u9700\u8981\u5224\u65ad\u7aef\u70b9\u4e2a\u6570\u5c31\u884c\u4e86\uff1a\n\n\u96f6\u4e2a\u7aef\u70b9\uff1a$\\frac{n \\times (n - 1)}{2}$\n\n\u4e00\u4e2a\u7aef\u70b9\uff1a\u6240\u6709\u5b50\u6811\u4e24\u4e24\u4e58\u79ef\u548c $+n-1$\n\n\u4e24\u4e2a\u7aef\u70b9\uff1a\u53bb\u6389\u4e2d\u95f4\u4e00\u5768\u70b9\u540e\uff0c\u5269\u4e0b\u4e24\u9897\u5b50\u6811\u7684\u5927\u5c0f\u4e58\u79ef\n\n\u4e09\u4e2a\u53ca\u4ee5\u4e0a\u7684\u7aef\u70b9\uff1a$0$\u3002\n\n```cpp\n#if By_CYJian\n\u4e3a\u4ec0\u4e48 CYJian \u90a3\u4e48\u83dc\u554a...\n\nAlgorithm: \n\nSolution: (\u770b\u5fc3\u60c5\u5199)\n#endif\n\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define FILE(Name) freopen(Name\"in\", \"r\", stdin), freopen(\"out\", \"w\", stdout)\n\nnamespace io {\n\tconst int __SIZE = (1 << 21) + 1;\n\tchar ibuf[__SIZE], *iS, *iT, obuf[__SIZE], *oS = obuf, *oT = oS + __SIZE - 1, __c, qu[55]; int __f, qr, _eof;\n\t#define Gc() (iS == iT ? (iT = (iS = ibuf) + fread (ibuf, 1, __SIZE, stdin), (iS == iT ? EOF : *iS ++)) : *iS ++)\n\tinline void flush () { fwrite (obuf, 1, oS - obuf, stdout), oS = obuf; }\n\tinline void gc (char &x) { x = Gc(); }\n\tinline void pc (char x) { *oS ++ = x; if (oS == oT) flush (); }\n\tinline void pstr (const char *s) { int __len = strlen(s); for (__f = 0; __f < __len; ++__f) pc (s[__f]); }\n\tinline void gstr (char *s) { for(__c = Gc(); __c < 32 || __c > 126 || __c == ' ';)  __c = Gc();\n\t\tfor(; __c > 31 && __c < 127 && __c != ' '; ++s, __c = Gc()) *s = __c; *s = 0; }\n\ttemplate <class I> inline bool gi (I &x) { _eof = 0;\n\t\tfor (__f = 1, __c = Gc(); (__c < '0' || __c > '9') && !_eof; __c = Gc()) { if (__c == '-') __f = -1; _eof |= __c == EOF; }\n\t\tfor (x = 0; __c <= '9' && __c >= '0' && !_eof; __c = Gc()) x = x * 10 + (__c & 15), _eof |= __c == EOF; x *= __f; return !_eof; }\n\ttemplate <class I> inline void print (I x) { if (!x) pc ('0'); if (x < 0) pc ('-'), x = -x;\n\t\twhile (x) qu[++ qr] = x % 10 + '0',  x /= 10; while (qr) pc (qu[qr --]); }\n\tstruct Flusher_ {~Flusher_(){flush();}}io_flusher_;\n} using io::pc; using io::gc; using io::pstr; using io::gstr; using io::gi; using io::print;\n\ntemplate<typename T> inline void chkmax(T&a, T b) { a = a > b ? a : b; }\ntemplate<typename T> inline void chkmin(T&a, T b) { a = a < b ? a : b; }\ntemplate<typename T> inline T gcd(T&a, T b) { return !b ? a : gcd(b, a % b); }\ntypedef unsigned uit;\ntypedef long long ll;\ntypedef double db;\n\n// \u770b\u9898\u76ee\u53d6\u7528\n// const int mod = 2999999; // for Hash\n// const int mod = 4999999; // for Hash\n// const int mod = 19491001;\n// const int mod = 19260817;\n// const int mod = 104857601;\nconst int mod = 998244353;\n// const int mod = 998244853;\n// const int mod = 1004535809;\n// const int mod = 1000000007;\n\ntemplate<typename T> const T Mod(T x) { return x >= mod * 2 ? x % mod : (x >= mod ? x - mod : x); }\ntemplate<typename T> const void Add(T&a, T b) { a = Mod(a + b); }\n\ninline int ksm(int x, int k) {\n\tint s = 1;\n\twhile(k) {\n\t\tif(k & 1) s = Mod((ll)s * x);\n\t\tx = Mod((ll)x * x), k >>= 1;\n\t} return s;\n}\n\nconst int MAXN = 1000010;\n\nint n;\n\nint col[MAXN];\n\nint tot;\nint fi[MAXN];\nint ne[MAXN << 1];\nint to[MAXN << 1];\n\ninline void Link(int u, int v) {\n\ttot++;\n\tto[tot] = v;\n\tne[tot] = fi[u];\n\tfi[u] = tot;\n}\n\nint All[MAXN];\nint cnt[MAXN];\nint nds[MAXN];\nll res[MAXN];\nll f[MAXN];\nint si[MAXN];\nint nd[MAXN];\n\ninline void dfs(int x, int la) {\n\tint c = col[x], ct = cnt[c], flg = 0, pos = 0; si[x] = 1;\n\tfor(int i = fi[x]; i; i = ne[i]) {\n\t\tint u = to[i];\n\t\tif(u == la) continue;\n\t\tint las = cnt[c];\n\t\tdfs(u, x);\n\t\tf[x] += 1LL * si[u] * si[x];\n\t\tsi[x] += si[u];\n\t\tint sum = cnt[c] - ct;\n\t\tif(las != cnt[c]) ++flg, pos = u;\n\t} f[x] += 1LL * si[x] * (n - si[x]);\n\tif(ct || cnt[c] != All[c] - 1) ++flg; ++cnt[c];\n\n\tif(flg == 1) {\n\t\tif(!nds[c]) nd[c] = x;\n\t\telse res[c] = 1LL * si[nd[c]] * (pos ? n - si[pos] : si[x]);\n\t\t++nds[c];\n\t} // cerr << x << ' ' << flg << endl;\n}\n\nint main() {\n#ifndef ONLINE_JUDGE\n\tFILE(\"\");\n#endif\n\tgi(n);\n\tfor(int i = 1; i <= n; i++) gi(col[i]), All[col[i]]++, nd[col[i]] = i;\n\tfor(int i = 1; i < n; i++) {\n\t\tint u, v; gi(u), gi(v);\n\t\tLink(u, v), Link(v, u);\n\t} dfs(1, 1);\n\tfor(int i = 1; i <= n; i++) {\n\t\tif(All[i] == 0) print(1LL * n * (n - 1) >> 1);\n\t\telse if(All[i] == 1) print(f[nd[i]]);\n\t\telse if(nds[i] == 2) print(res[i]);\n\t\telse print(0);\n\t\tpc('\\n');\n\t} return 0;\n}\n```",
        "postTime": 1571230518,
        "uid": 20782,
        "name": "CYJian",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P5593 \u3010P5588 \u52a0\u5f3a\u7248\u3011"
    },
    {
        "content": "## Description\n\n\u7ed9\u5b9a\u4e00\u9897\u6811\uff0c\u5bf9\u6bcf\u4e2a\u989c\u8272\u6c42\u6811\u4e0a\u6709\u591a\u5c11\u6761\u94fe\u8986\u76d6\u4e86\u5168\u90e8\u8fd9\u79cd\u989c\u8272\u3002\n\n## Solution\n\n\u5bb9\u6613\u60f3\u5230\u5bf9\u4e8e\u6bcf\u79cd\u989c\u8272\uff0c\u6c42\u51fa\u6700\u77ed\u7684\u5305\u542b\u6240\u6709\u8be5\u989c\u8272\u7684\u94fe\uff0c\u4ee4\u94fe\u7684\u4e24\u7aef\u7684\u5728\u94fe\u5916\u7684\u5b50\u6811\u5927\u5c0f\u4e3a $a,b$\uff0c\u7b54\u6848\u5373\u4e3a $a\\times b$\u3002\n\n\u96be\u70b9\u5728\u4e8e\u627e\u51fa\u94fe\u5934\u3002\n\n\u4ee4 $t_u$ \u4e3a $u$ \u6709\u591a\u5c11\u5176\u5b50\u6811\u5305\u542b\u4e0e $u$ \u540c\u8272\u7ed3\u70b9\uff08\u7236\u4eb2\u65b9\u5411\u5b50\u6811\u4e5f\u7b97\uff09\uff0c\u4ee4 $s_u$ \u4e3a $u$ \u5b50\u6811\u5185\u8282\u70b9\u6570\u3002\n\n\u904d\u5386\u6811\uff0c\u52a8\u6001\u7ef4\u62a4 $cnt_i$ \u4e3a\u989c\u8272 $i$ \u5f53\u524d\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u8bb0\u5f53\u524d\u7ed3\u70b9\u4e3a $u$\uff0c\u6bcf\u6b21\u904d\u5386\u5b50\u6811\u82e5 $cnt_{c_u}$ \u6539\u53d8\uff0c\u5219 $t_u\\leftarrow t_u+1$\u3002\n\n\u5bf9\u4e8e\u7236\u4eb2\uff0c\u7ef4\u62a4 $all_i$ \u4e3a\u989c\u8272 $i$ \u6240\u6709\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u82e5 $all_{c_u}>u$ \u5b50\u6811\u5185\u989c\u8272\u4e3a $c_u$ \u7684\u7ed3\u70b9\u4e2a\u6570\uff0c \u5219 $t_u\\leftarrow t_u+1$\u3002\n\n\u540c\u65f6\u4ee4\u521d\u59cb\u6240\u6709 $ans_i=1$\u3002\n\n\u5bf9 $t_u$ \u5206\u7c7b\u8ba8\u8bba\uff1a\n- $t_u=0$\uff1a\u6ca1\u6709\u4e0e $u$ \u540c\u8272\u8282\u70b9\uff0c\u7b54\u6848\u4e3a $u$ \u7684\u5b50\u6811\u5927\u5c0f\u4e24\u4e24\u76f8\u4e58\u4e4b\u548c\u3002\n- $t_u=1$\uff1a$u$ \u4e3a\u94fe\u5934\u4e4b\u4e00\u3002\u82e5 $t_u$ \u7684\u8d21\u732e\u6765\u81ea\u7236\u4eb2\u65b9\u5411\u5b50\u6811\uff0c\u5219 $u$ \u662f\u94fe\u7684\u5e95\u7aef\uff0c$ans_{c_u}\\leftarrow ans_{c_u}\\times s_u$\uff1b\u5426\u5219 $u$ \u662f\u94fe\u7684\u9876\u7aef\uff0c\u4ee4 $sub$ \u4e3a $u$ \u505a\u51fa\u8d21\u732e\u7684\u5b50\u6811\u5927\u5c0f\u548c\uff0c$ans_{c_u}\\leftarrow ans_{c_u}\\times (s_u-sub)$\u3002\n- $t_u\\ge 2$ \u6240\u6709\u989c\u8272\u4e0d\u53ef\u80fd\u5728\u540c\u4e00\u6761\u94fe\u4e0a\uff0c$ans_{c_u}\\leftarrow 0$\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u82e5 $t_u=1$ \u7684\u7ed3\u70b9\u6570 $\\ge 2$\uff0c\u4e5f $ans_{c_u}\\leftarrow 0$\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nnamespace FastIO {\n    char buf[1 << 23], *p1 = buf, *p2 = buf;\n#define getchar() \\\n    (p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 1 << 21, stdin), p1 == p2) ? EOF : *p1 ++)\n    inline int read() {\n        register int sr = 0;\n        register char ch = getchar(), last;\n        while (ch < '0' || ch > '9') last = ch, ch = getchar();\n        while (ch >= '0' && ch <= '9') sr = (sr << 1) + (sr << 3) + (ch ^ 48), ch = getchar();\n        return last == '-' ? -sr : sr;\n    }\n}\nnamespace Milkcat {\n\tusing namespace FastIO;\n\ttypedef long long LL;\n\tconst int N = 3e6 + 5; \n\tLL n, u, v, res, c[N], all[N], cnt[N], siz[N], qaq[N], ans[N];\n\tvector<int> G[N];\n\tvoid dfs(int u, int fa) {\n\t\tLL tot = 0, sub = 0, sum = 0, bef = cnt[c[u]]; // tot \u4e3a t[u]\uff0csum \u7528\u4e8e\u5904\u7406 t[u]=0\uff0cbef \u4e3a\u5b50\u6811\u4e3a c[u] \u7684\u51fa\u73b0\u6b21\u6570\n\t\tfor (int v : G[u]) {\n\t\t\tif (v == fa) continue;\n\t\t\tint last = cnt[c[u]]; // \u904d\u5386\u524d c[u] \u51fa\u73b0\u6b21\u6570\n\t\t\tdfs(v, u), sum += siz[u] * siz[v], siz[u] += siz[v]; // dfs\uff0c\u8ba1\u7b97 sum\n\t\t\tif (last != cnt[c[u]]) tot ++, sub += siz[v]; // \u82e5 c[u] \u51fa\u73b0\u6b21\u6570\u6539\u53d8\uff0c\u5219\u5b50\u6811\u5185\u51fa\u73b0\u4e86 c[u]\n\t\t}\n\t\tcnt[c[u]] ++, siz[u] ++; // \u66f4\u65b0 c[u]\n\t\tbool qwq = all[c[u]] - (cnt[c[u]] - bef);  // \u7236\u4eb2\u65b9\u5411\u5b50\u6811\u662f\u5426\u51fa\u73b0 c[u]\n\t\ttot += qwq;\n\t\tif (tot == 0) ans[c[u]] = siz[u] * (n - siz[u] + 1) + sum - 1; // t[u]=0\n\t\tif (tot == 1) {\n\t\t\tif (qwq) ans[c[u]] *= siz[u]; // u \u4e3a\u94fe\u5e95\n\t\t\telse ans[c[u]] *= n - sub; // u \u4e3a\u94fe\u5934 \n\t\t\tif (++ qaq[c[u]] > 2) ans[c[u]] = 0; // \u82e5\u51fa\u73b0 >2 \u4e2a\u7aef\u70b9\u5219\u65e0\u89e3\n\t\t}\n\t\tif (tot > 2) ans[c[u]] = 0; // \u65e0\u89e3\n\t}\n\tint main() {\n\t\tn = read();\n\t\tfor (int i = 1; i <= n; i ++)\n\t\t\tc[i] = read(), all[c[i]] ++, ans[i] = 1;\n\t\tfor (int i = 1; i < n; i ++)\n\t\t\tu = read(), v = read(), G[u].push_back(v), G[v].push_back(u);\n\t\tdfs(1, 0);\n\t\tfor (int i = 1; i <= n; i ++)\n\t\t\tif (!all[i]) ans[i] = n * (n - 1) / 2; // \u82e5\u6ca1\u6709\u8fd9\u79cd\u989c\u8272\uff0c\u7b54\u6848\u663e\u7136\u4e3a n*(n-1)\n\t\tfor (int i = 1; i <= n; i ++)\n\t\t\tres ^= ans[i];\n\t\tcout << res << '\\n';\n\t\treturn 0;\n\t}\n}\nint main() {\n\treturn Milkcat::main();\n}\n\n```",
        "postTime": 1684558756,
        "uid": 560516,
        "name": "\u55b5\u4ed4\u725b\u5976",
        "ccfLevel": 0,
        "title": "P5593 \u5c0f\u732a\u4f69\u5947\u722c\u6811 \u52a0\u5f3a\u7248 \u9898\u89e3"
    }
]
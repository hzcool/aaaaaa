[
    {
        "content": "\u8003\u8651\u7528 dp \u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u7531\u4e8e\u56fa\u5b9a\u9ab0\u5b50\u671d\u4e0a\u7684\u9762\u65f6\uff0c\u671d\u4e0b\u7684\u9762\u4e5f\u88ab\u56fa\u5b9a\u4e86\uff0c\u5176\u4f59\u9762\u4e00\u5171\u67094\u79cd\u60c5\u51b5\uff0c\u800c\u9664\u4e86\u671d\u4e0a\u7684\u9762\u548c\u671d\u4e0b\u7684\u9762\uff0c\u5176\u4f59\u9762\u7684\u60c5\u51b5\u5bf9\u8f6c\u79fb\u6ca1\u6709\u5f71\u54cd\u3002\u6545\u4ee4 $c_{i, j} = 0 / 4$ \u8868\u793a\u4e0a\u4e00\u4e2a\u9ab0\u5b50\u7684\u671d\u4e0a\u7684\u9762\u662f $i$ \u65f6\uff0c\u5f53\u524d\u653e\u7684\u9ab0\u5b50\u671d\u4e0a\u7684\u9762\u662f $j$ \u6709\u591a\u5c11\u79cd\u7ec4\u5408\u65b9\u6848\u3002\n\n\n$\\mathit{dp}_{i,k}$ \u8868\u793a\u5df2\u7ecf\u5792\u4e86 $i$ \u4e2a\u9ab0\u5b50\uff0c\u6700\u4e0a\u9762\u7684\u90a3\u4e2a\u9762\u7684\u6570\u5b57\u662f $k$ \u7684\u65b9\u6848\u6570\uff0c$\\mathit{dp}_{i,k}= \\sum\\limits_{j=1} ^ 6\\mathit{dp}_{i - 1,j} * c_{j, k}$\uff0c\u8fd9\u4e2a dp \u663e\u7136\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u4f46\u4e0d\u8fc7\u590d\u6742\u5ea6\u662f $O(36n)$ \u7684\uff0c\u8fd9\u663e\u7136\u4e0d\u53ef\u63a5\u53d7\u3002\n\n\u8003\u8651 dp \u8f6c\u79fb\u4e0e $i$ \u65e0\u5173\uff0c\u4e0d\u8fc7\u662f\u5c06\u540c\u4e00\u79cd\u8f6c\u79fb\u53cd\u590d\u505a\u4e86 $O(n)$ \u6b21\uff0c\u6545\u53ef\u4ee5\u4f7f\u7528\u77e9\u9635\u5feb\u901f\u5e42\u3002\u4ee4\u8f6c\u79fb\u77e9\u9635\u4e3a $(cij)$\uff0c$(cij)$ \u7684\u5b9a\u4e49\u5982\u540c $c$ \u6570\u7ec4\u7684\u5b9a\u4e49\u5373\u53ef\u3002\n\n\u7531\u4e8e\u7b2c\u4e00\u6b65\u548b\u653e\u90fd\u884c\uff0c\u6545\u521d\u59cb\u77e9\u9635\u8bbe\u5b9a\u6210\u7b2c\u4e00\u884c\u4e3a4\uff0c\u5176\u4f59\u884c\u4e3a0\u7684\u77e9\u9635\u5373\u53ef\uff0c\u7b54\u6848\u5c06\u6240\u5f97\u77e9\u9635\u7b2c\u4e00\u884c\u52a0\u8d77\u6765\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6 $O(6^3logn)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 7\n#define int long long\n#define mod 1000000007\n#define For(i, j, n) for(int i = j ; i <= n ; ++i)\nint a, b, n, m, ans;\n\nstruct matrix{\n\tint c[N][N];\n\tmatrix(){ memset(c, 0, sizeof(c)); }\n\tfriend matrix operator * (matrix x, matrix y){\n\t\tmatrix z;\n\t\tFor(i, 1, 6) For(j, 1, 6) For(k, 1, 6) z.c[i][j] = (z.c[i][j] + x.c[i][k] * y.c[k][j]) % mod;\t\n\t\treturn z;\n\t}\n}t, st;\n\ninline matrix quickpow(matrix x, int y){\n\tmatrix sum;\n\tFor(i, 1, 6) sum.c[i][i] = 1;\n\tfor( ; y ; x = x * x, y >>= 1) if(y & 1) sum = sum * x;\n\treturn sum;\n}\n\ninline int opposite(int x){ return x == 3 ? 6 : (x + 3) % 6; }\n\nsigned main(){\n\tscanf(\"%lld %lld\", &n, &m);\n\tFor(i, 1, 6) For(j, 1, 6) t.c[i][j] = 4;\n\tFor(i, 1, m) scanf(\"%lld %lld\", &a, &b), t.c[a][opposite(b)] = 0, t.c[b][opposite(a)] = 0;\n\tFor(i, 1, 6) st.c[1][i] = 4;\n\tst = st * quickpow(t, n - 1);\n\tFor(i, 1, 6) ans += st.c[1][i];\n\tprintf(\"%lld\", ans % mod);\n\treturn 0;\n}",
        "postTime": 1668657021,
        "uid": 163980,
        "name": "\u884c\u541f\u5578\u4e5d\u5dde",
        "ccfLevel": 7,
        "title": "P8624 [\u84dd\u6865\u676f 2015 \u7701 AB] \u5792\u9ab0\u5b50 \u9898\u89e3"
    }
]
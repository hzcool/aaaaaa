[
    {
        "content": "\u8fd9\u9053\u9898\uff0c\u6beb\u65e0\u7591\u95ee\uff0c\u5c31\u662f\u5e7f\u641c\u3002\u4f46\u662f\u5b83\u8981\u6ce8\u610f\u7684\u7ec6\u8282\u975e\u5e38\u591a\u3002\u6240\u4ee5\u8fd9\u9053\u9898\u5bf9\u903b\u8f91\u548c\u4ee3\u7801\u80fd\u529b\u7684\u7684\u8003\u5bdf\u5f88\u9ad8\n\n\u9996\u5148\uff0c\u8fd9\u9053\u9898\u9700\u8981\u6ce8\u610f\uff0c\u969c\u788d\u7269\u662f\u5728\u683c\u5b50\u4e0a\uff0c\u800c\u673a\u5668\u4eba\u662f\u5728\u683c\u70b9\u4e0a\u8d70\u3002\u67d0\u4eba~~\u5c31\u662f\u6211~~\u81ea\u4fe1\u5730\u5199\u5b8c\u4e86\u4ee3\u7801\u540e\u53d1\u73b0\u9898\u8bfb\u9519\u4e86\u3002\u5173\u952e\u6700\u8ba8\u538c\u7684\u662f\u6837\u4f8b\u5c45\u7136\u80fd\u8fc7......\n\n\u90a3\u4e48\u8fd9\u9053\u9898\u7ecf\u8fc7\u4fe1\u606f\u6574\u7406\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u9700\u8981\u4e24\u4e2a\u6570\u7ec4\uff1a\u4e00\u4e2a\u5b58\u65b9\u683c\u4e0a\u969c\u788d\u7269\u7684\u4f4d\u7f6e(sd[i][j]\u6570\u7ec4\u8868\u793a)\uff0c\u4e00\u4e2a\u5b58\u673a\u5668\u4eba\u53ef\u4ee5\u8d70\u7684\u683c\u70b9\u7684\u4f4d\u7f6e(a[i][j])\u6570\u7ec4\u8868\u793a\uff0c\u5219\u6839\u636e\u6837\u4f8b\u6211\u4eec\u53ef\u4ee5\u6574\u7406\u6210\u8fd9\u5f20\u56fe\uff1a\n![\u6837\u4f8b\u56fe\u793a](https://cdn.luogu.com.cn/upload/pic/40415.png)\n\u5176\u4e2d\u9ed1\u8272\u4e3a\u6570\u7ec4sd[i][j]\u7684\u4e0b\u6807\uff0c\u7eff\u8272\u4e3aa[i][j]\u7684\u4e0b\u6807\u3002\u6839\u636e\u9898\u76ee\u53ef\u4ee5\u53d1\u73b0\uff0c\u673a\u5668\u4eba\u672c\u8eab\u4e5f\u6709\u5bbd\u5ea6\uff0c\u6240\u4ee5\u8fb9\u754c\u548c\u969c\u788d\u7269\u7684\u56db\u5468\uff0c\u4e0d\u80fd\u8d70\uff0c\u90a3\u4e48\u673a\u5668\u4eba\u53ef\u4ee5\u5230\u8fbe\u7684\u5730\u65b9\u5c31\u662f\u56fe\u4e2d\u84dd\u8272\u6846\u5185\u7684\u7eff\u8272\u683c\u70b9\u3002\u6240\u4ee5\u8fb9\u754c\u6761\u4ef6\u5224\u65ad\u65f6\uff0cn\u548cm\u5404\u8981\u51cf1\u3002\n\n\u7136\u540e\u6211\u4eec\u8fd8\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u662f\u9898\u4e2d~~\u5bb3\u4eba\u4e0d\u6d45~~\u7684\u65b9\u5411\u5904\u7406\u3002\u4e8e\u662f\u4e3a\u4e86\u65b9\u4fbf\u5b58\u50a8\uff0c\u6211\u7ed9\u6bcf\u4e2a\u65b9\u5411\u90fd\u7f16\u4e86\u4e00\u4e2a\u53f7\uff1a\u2191\u4e3a1\uff0c\u2193\u4e3a2\uff0c\u2190\u4e3a3\uff0c\u2192\u4e3a4\u3002\u7136\u540e\u8f6c\u5411\u7684\u65f6\u5019\u5c31\u66f4\u52a0\u9ebb\u70e6\u4e86\u3002\u4e8e\u662f\u6211\u4e3a\u4e86\u597d\u5224\u65ad\u60c5\u51b5\uff0cemm......\u7528\u4e86\u597d\u51e0\u4e2a\u6570\u7ec4\n```cpp\nint fx[5]={0,-1,1,0,0};//fx[i]\u8868\u65b9\u5411i(\u7f16\u53f7)\u7684x\u7684\u8fdb\u9000\u60c5\u51b5  \nint fy[5]={0,0,0,-1,1};//fy[i]\u8868\u65b9\u5411i(\u7f16\u53f7)\u7684y\u7684\u8fdb\u9000\u60c5\u51b5 \nint ft[5]={0,1,4,2,3};//ft[i]\u8868\u793a\u987a\u65f6\u9488\u6392\u5217\u5404\u4e2a\u65b9\u5411\u7684\u7f16\u53f7(\u4e0a1 \u53f34 \u4e0b2 \u5de63) \nint fft[5]={0,1,3,4,2};//fft[i]\u8868\u793a\u6570\u5b57i\u5728ft[]\u6570\u7ec4\u4e2d\u7684\u4e0b\u6807 \nint abc[5]={0,1,2,1,0};//abc[5]\u8868\u793a\u8f6c\u5230[\u987a\u65f6\u9488\u8f6ci\u6b21\u5230\u8fbe\u7684\u90a3\u4e2a\u65b9\u5411]\u7684\u6700\u77ed\u6b21\u6570 \n\n```\n\u5176\u4e2dft\u6570\u7ec4\u548cabc\u6570\u7ec4\u6bd4\u8f83\u96be\u7406\u89e3\n\n\u5148\u8bb2abc\u6570\u7ec4\n![abc\u6570\u7ec4\u89e3\u91ca](https://cdn.luogu.com.cn/upload/pic/40416.png)\n\u5982\u56fe\uff0c\u4e0d\u96be\u770b\u51fa\u5f53\u5bf9\u4e8e\u4e0d\u540c\u7684i\uff0c\u4e5f\u5c31\u662f\u987a\u65f6\u9488\u8f6c\u52a8i\u6b21\u65f6\uff0c\u5bf9\u5e94\u7684\u6700\u5c0f\u65cb\u8f6c\u6b21\u6570\u5c31\u662fabc[i]\n\n\u800cft\u6570\u7ec4~~\u4e5f\u6bd4\u8f83\u597d\u7406\u89e3~~\nabc\u56fe\u4e2d\u84dd\u5708\u5185\u56db\u4e2a\u65b9\u5411\u5404\u6709\u4e00\u4e2a\u9ed1\u8272\u6570\u5b57\u4ee3\u8868\u65b9\u5411\u7f16\u53f7\uff0c\u90a3\u4e48\u6211\u4eec\u987a\u65f6\u9488\u904d\u5386\u4e00\u4e0b\u5c31\u662f1 4 2 3.\n\n\u6211\u4e48\u8fd8\u8981\u6ce8\u610f\u7684\u5730\u65b9\u662f\u8d77\u70b9\u548c\u7ec8\u70b9\u53ef\u80fd\u91cd\u5408\uff0c\u9700\u8981\u7279\u5224\uff1b\u8d77\u70b9\u53ef\u80fd\u5c31\u6709\u969c\u788d\u7269\uff0c\u4e5f\u8981\u7279\u5224\u3002\n\n\u6700\u540e\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u6b65\uff0c\u4f60\u8d70\u4e00\u4e2a\u683c\u70b9\uff0c\u4e24\u4e2a\u683c\u70b9\u6216\u4e09\u4e2a\u683c\u70b9\u6240\u8017\u65f6\u95f4\u90fd\u662f1\uff0c\u4e0d\u8981\u641e\u4e71\uff1b\u800c\u6bcf\u8f6c90\u00b0\uff0c\u5c31\u8981\u8017\u4e00\u5b9a\u65f6\u95f4\uff0c\u6240\u4ee5\u5343\u4e07\u8981\u5c0f\u5fc3\u3002\n\n\u4e8e\u662f\uff0c\u5f00\u59cb\u5199BFS\n\n\u7528\u961f\u5217\u5b58\u50a8\u6bcf\u4e00\u4e2a\u683c\u70b9\u7684\u4fe1\u606f\uff0c\u7136\u540e\u8d77\u70b9\u5165\u961f\uff0c\u6bcf\u6b21\u4ece\u961f\u9996\u53d6\u51fa\u4e00\u4e2a\u5143\u7d20\uff0c\u6839\u636e\u8fd9\u4e2a\u5143\u7d20\u65cb\u8f6c\uff0c\u76f4\u884c\uff0c\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u5750\u6807\uff0c\u7136\u540e\u5224\u65ad\u7531\u8fd9\u79cd\u65b9\u5f0f\u5230\u8fbe\u7684\u8fd9\u4e2a\u70b9\u662f\u5426\u662f\u8017\u65f6\u6700\u77ed\u7684\u4e00\u79cd\u65b9\u5f0f(\u7c7b\u4f3c\u4e8eDijkstra\u4e2d\u7684dis\u6570\u7ec4)\uff0c\u6b64\u5904\u7528f[i][j]\u6570\u7ec4\u8868\u793a\uff0c\u7136\u540e\u961f\u5217\u4e3a\u7a7a\u540e\uff0c\u8f93\u51faf[\u7ec8\u70b9\u7684x][\u7ec8\u70b9\u7684y]\u5373\u53ef\u3002\n\n~~\u4e27\u5fc3\u75c5\u72c2\u7684~~\u4ee3\u7801\u5982\u4e0b\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<string>\n#include<queue>\n#include<cmath>\n#include<iomanip>\nusing namespace std;\nint sd[55][55];\nint a[55][55];//a\u4e3a\u8bfb\u5165\u7684\u65b9\u683c\u5730\u56fe \nint n,m;\nint x11,y11;//\u8d77\u70b9 \nint x2,y2;//\u7ec8\u70b9 \nint f[55][55];//f\u4e3a\u683c\u70b9\u5730\u56fe \n\nint fx[5]={0,-1,1,0,0};//fx[i]\u8868\u65b9\u5411i(\u7f16\u53f7)\u7684x\u60c5\u51b5  \nint fy[5]={0,0,0,-1,1};//fy[i]\u8868\u65b9\u5411i(\u7f16\u53f7)\u7684y\u60c5\u51b5 \nint ft[5]={0,1,4,2,3};//ft[i]\u8868\u793a\u987a\u65f6\u9488\u6392\u5217\u5404\u4e2a\u65b9\u5411\u7684\u7f16\u53f7(\u4e0a1 \u53f34 \u4e0b2 \u5de63) \nint fft[5]={0,1,3,4,2};//fft[i]\u8868\u793a\u6570\u5b57i\u5728ft[]\u6570\u7ec4\u4e2d\u7684\u4e0b\u6807 \n\nint abc[5]={0,1,2,1,0};//abc[5]\u8868\u793a\u8f6c\u5230[\u987a\u65f6\u9488\u8f6ci\u6b21\u5230\u8fbe\u7684\u90a3\u4e2a\u65b9\u5411]\u7684\u6700\u77ed\u6b21\u6570 \nstruct node\n{\n\tint x,y;//\u5f53\u524d\u70b9\u7684\u5750\u6807 \n\tint t;//1=>N 2=>S 3=>W 4=>E \u65b9\u5411\u7f16\u53f7 \n\tint time;//\u4ece\u8d77\u70b9\u5230\u5f53\u524d\u70b9\u7684\u6700\u77ed\u65f6\u95f4 \n};\nqueue<node> q;//\u961f\u5217q \nstring ch;//\u8bfb\u5165\u8d77\u70b9\u7684\u65b9\u5411 \nint cto;//\u8d77\u70b9\u7684\u65b9\u5411 \n\nvoid fxto()\n{\n\tswitch(ch[0])\n\t{\n\t\tcase 'N': cto=1;break;\n\t\tcase 'S': cto=2;break;\n\t\tcase 'W': cto=3;break;\n\t\tcase 'E': cto=4;break;\n\t}\n\treturn;\n}\nvoid change()\n{\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tfor(int j=1;j<=m;++j)\n\t\t{\n\t\t\tif(sd[i][j]==1)//\u5982\u679c\u5f53\u524d\u683c\u4e3a\u969c\u788d\u7269\uff0c\u5219\u5b83\u7684\u56db\u4e2a\u9876\u70b9\u90fd\u4e0d\u80fd\u8d70 \n\t\t\t{\n\t\t\t\ta[i-1][j]=1;\n\t\t\t\ta[i][j-1]=1;\n\t\t\t\ta[i-1][j-1]=1;\n\t\t\t\ta[i][j]=1;\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tfor(int j=1;j<=m;++j)\n\t\t{\n\t\t\tscanf(\"%d\",&sd[i][j]);\n\t\t}\n\t}\n\tcin>>x11>>y11>>x2>>y2;\n\tcin>>ch;\n\tfxto();//\u5224\u65adch\u4ee3\u8868\u7684\u65b9\u5411 \n\tchange();//\u628a\u65b9\u683c\u5730\u56fe\u8f6c\u5316\u4e3a\u673a\u5668\u4eba\u53ef\u4ee5\u8d70\u7684\u683c\u70b9\u5730\u56fe \n\tnode first;//\u8d77\u70b9 \n\tfirst.x=x11;\n\tfirst.y=y11;\n\tfirst.t=cto;\n\tfirst.time=0;\n\tq.push(first);//\u8d77\u70b9\u5165\u961f \n\tnode u,d;\n\twhile(!q.empty())\n\t{\n\t\tu=q.front();\n\t\tq.pop();\n\t\tfor(int i=1;i<=4;++i)\n\t\t{\n\t\t\tint zhuan=abc[i];//[\u987a\u65f6\u9488\u8f6ci\u4e0b\u7684\u90a3\u4e2a\u65b9\u5411]\u7684\u6700\u77ed\u65cb\u8f6c\u6b21\u6570 \n\t\t\t\n\t\t\t//\u6c42\u51fa\u65cb\u8f6c\u5b8c\u4e86\u4ee5\u540e\u65b9\u5411\u7684\u7f16\u53f7fangx(\u4e3a\u4e86\u65b9\u4fbf\u8ba8\u8bba\uff0c\u5168\u90e8\u5f53\u505a\u987a\u65f6\u9488\u65cb\u8f6c) \n\t\t\tint fangx=fft[u.t]+i;//\u6b64\u65f6fangx\u4e3a\u4e0b\u6807 \n\t\t\tif(fangx==5) fangx=1;\n\t\t\tif(fangx==6) fangx=2;\n\t\t\tif(fangx==7) fangx=3;\n\t\t\tif(fangx==8) fangx=4;\n\t\t\tfangx=ft[fangx];//\u6b64\u65f6fangx\u4e3a\u65b9\u5411\u7f16\u53f7 \n\t\t\t//\u6b64\u65f6fangx\u5b58\u7684\u662f\u7531\u5f53\u524d\u70b9\u987a\u65f6\u9488\u8f6c\u4e86i\u6b21\u540e\u5230\u8fbe\u7684\u65b9\u5411\u7684\u7f16\u53f7\n\t\t\t \n\t\t\tfor(int j=1;j<=3;++j)//\u8d701~3\u6b65 \n\t\t\t{\n\t\t\t\tint lsx=u.x+fx[fangx]*j;//\u8ba1\u7b97\u6309\u5f53\u524d\u65cb\u8f6c\u65b9\u5411\u8d70j\u6b65\u7684\u5750\u6807 \n\t\t\t\tint lsy=u.y+fy[fangx]*j;\n\t\t\t\tif(lsx>=n || lsx<=0 || lsy>=m || lsy<=0 || (lsx==x11&&lsy==y11) || a[lsx][lsy]==1)\n\t\t\t\t{\n\t\t\t\t\t//\u5224\u65ad\u8fb9\u754c\u548c\u969c\u788d\u7269 (\u7279\u5224\uff1a\u662f\u5426\u4e3a\u8d77\u70b9)\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif((u.time+zhuan+1<f[u.x+fx[fangx]*j][u.y+fy[fangx]*j] || f[u.x+fx[fangx]*j][u.y+fy[fangx]*j]==0) && a[u.x+fx[fangx]*j][u.y+fy[fangx]*j]==0)\n\t\t\t\t{//\u5982\u679c\u5f53\u524d\u70b9\u53ef\u4ee5\u5237\u65b0\u8ddd\u79bb\uff0c\u5c31\u5165\u961f \n\t\t\t\t\td.x=u.x+fx[fangx]*j;\n\t\t\t\t\td.y=u.y+fy[fangx]*j; \n\t\t\t\t\td.t=fangx;\n\t\t\t\t\td.time=u.time+zhuan+1;\n\t\t\t\t\tf[u.x+fx[fangx]*j][u.y+fy[fangx]*j]=d.time;\n\t\t\t\t\tq.push(d);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(f[x2][y2]==0 && (x2!=x11 || y2!=y11))//\u5982\u679c\u4e3a0\uff0c\u4ee3\u8868\u4e0d\u80fd\u8d70\u5230 \n\t{\n\t\tcout<<\"-1\"<<endl;\n\t}\n\telse//\u5426\u5219\u8f93\u51fa\u7ec8\u70b9\u7684\u8ddd\u79bb \n\tcout<<f[x2][y2]<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1540727953,
        "uid": 75418,
        "name": "\u96d2\u4ec1\u97ec",
        "ccfLevel": 0,
        "title": "\u673a\u5668\u4eba\u642c\u91cd\u7269--\u590d\u6742\u7684BFS"
    },
    {
        "content": "**\u672c\u849f\u84bb\u7b2c\u4e00\u4e2a\u9898\u89e3**\n\n\u53ef\u80fd\u601d\u60f3\u8ddf\u524d\u9762\u5927\u725b\u6709\u91cd\u590d\uff0c\u5982\u679c\u4f60\u80fd\u7559\u4e0b\u4e00\u4e2a\u8d5e\uff0c\u591a\u8c22\u5404\u4f4d\u9f13\u52b1\u3002\n\n\u5148\u8bf4\u5b9a\u4e49\u6570\u7ec4\u53d8\u91cf\uff0c\u6570\u7ec4a\u6807\u8bb0\u969c\u788d\u7684\uff0c\u6570\u7ec4aa\u6807\u8bb0\u4e00\u4e2a\u4e09\u7ef4\u7a7a\u95f4\n\n    bool a[55][55]; //\u539f\u59cb\u6570\u636e\uff0c\u5b58\u4e0b\u4e0d\u80fd\u53bb\u7684\u70b9\n    bool aa[55][55][4]; //\u2606\u5b9a\u4e49\u4e00\u4e2abool\u7a7a\u95f4\u5b58\u50a8\u90a3\u4e9b\u4f4d\u7f6e+\u65b9\u5411\u8bbf\u95ee\u8fc7\n    int b[10000][4];//\u961f\u5217\uff0cb[i][0]\u6a2a\u5750\u6807\uff0cb[i][1]\u7eb5\u5750\u6807\uff0cb[i][2]\u671d\u5411\uff0cb[i][3]\u7b2c\u51e0\u6b65\uff0c\u6ca1\u7528stl\u65e0\u4ed6\uff0c\u56e0\u4e3a\u624b\u5199\u987a\u624b\n\n**\u5269\u4e0b\u5c31\u662fbfs\u4e86\uff0c\u4e3b\u8981\u662f\u7ef4\u62a4\u540e\u4e24\u4e2a\u6570\u7ec4**\n\n------------\n\n### \u683c\u5b50\u8f6c\u6210\u56db\u4e2a\u70b9\n    for(i=1;i<=n;i++)\n        for(j=1;j<=m;j++){\n            cin>>t;\n            if(t==1)\n                a[i][j] = a[i-1][j] = a[i][j-1] = a[i-1][j-1] = 1;\n        }\n        \n### \u5de6\u8f6c\u53f3\u8f6c\u64cd\u4f5c\n    int turn(int u, bool lr)\n    {\n        if(lr==0)\n        {\n            if(u==0) return 3;\n            else return u-1;\n        }\n        else\n        {\n            if(u==3) return 0;\n            else return u+1;\n        }\n    }\n    \n### ~~\u4e07\u4f17\u671f\u5f85~~\u5e73\u5e73\u65e0\u5947\u7684BFS\n\n\u9996\u5148\uff0c\u5199bfs\u51fa\u53e3\uff1a\n1. \u673a\u5668\u4eba\u79fb\u52a8\u5230\u6307\u5b9a\u70b9\uff0c\u8f93\u51fa\u6b65\u6570\uff0cexit\uff1b\n2. \u641c\u5b8c\u6ca1\u5230\u6307\u5b9a\u70b9\uff0c\u8f93\u51fa-1\uff0cexit\u3002\n\n**\u4e4b\u540e\uff0c\u6700\u5173\u952e\u7684\u4e00\u70b9\u6765\u4e86\u3002**\n**\u4e00\u822c\u601d\u8def\u662f\uff0c\u8ba4\u4e3a\u4e0a\u4e0b\u5de6\u53f3\u79fb\u52a8\u624d\u662f\u5e7f\u641c\u7684\u4e00\u7ea7\uff0c\u800c\u6211\u628a\u5de6\u8f6c\u53f3\u8f6c\uff0c\u8d70\u4e00\u6b65\u4e24\u6b65\u4e09\u6b65\u90fd\u770b\u6210\u4e00\u7ea7\uff0c\u56e0\u6b64\u521b\u5efa\u4e86\u4e09\u7ef4\u7684bool\u7a7a\u95f4\uff0c\u9664\u4e86\u4f4d\u7f6e\u8fd8\u5305\u62ec\u65b9\u5411\u4fe1\u606f\u3002**\n\n\u961f\u5217\u5faa\u73af\u5185\uff0c\u5305\u542b4\uff08NSWE\uff09*3\uff08\u4e00\u6b65\u4e24\u6b65\u4e09\u6b65\uff09=12\u79cd\u60c5\u51b5\uff0c\u4ee5\u53ca\u5de6\u53f3\u8f6c\u4e24\u79cd\u60c5\u51b5\u3002\n\n\u4ee5\u4e0b\u4e24\u70b9\u7279\u522b\u6ce8\u610f\uff1a\n1. \u6ce8\u610f\u673a\u5668\u4eba\u4e0d\u80fd\u8d8a\u754c\uff0c&& \u4e00\u4e2a\u6761\u4ef6\uff1b\n2. \u5f53\u4f60\u8d70\u4e09\u6b65\u65f6\uff0c\u6709\u53ef\u80fd\u5938\u8fc7\u4e24\u4e2a\u4e0d\u53ef\u7ecf\u8fc7\u7684\u70b9\uff0c\u56e0\u6b64\u8981&&\u4e0a\u8d70\u4e00\u6b65\u6761\u4ef6\uff0c\u5982\u679c\u6700\u957f\u8ddd\u79bb\u4e0d\u53ea3\u6b65\uff0c\u9700\u8981\u52a0\u4e2a\u51fd\u6570\u7279\u522b\u5904\u7406\u3002\n\n### \u4e07\u4f17\u671f\u5f85\u7684AC\u9898\u89e3\uff08\u771f\u7684\u662f\u5f88\u597d\u7406\u89e3\uff09\n\n```cpp\n#include<iostream>\nusing namespace std;\nbool a[55][55];\nbool aa[55][55][4];\nint b[10000][4];\nint n,m,x0,y0,x1,y1;\nint step=1,flag=0;\nchar c;\nint frot=0,rear=1;\nint turn(int u, bool lr)\n{\n    if(lr==0)\n    {\n        if(u==0) return 3;\n        else return u-1;\n    }\n    else\n    {\n        if(u==3) return 0;\n        else return u+1;\n    }\n}\nvoid bfs()\n{\n    int i,x,y,d,step;\n    while(frot < rear)\n    {\n        x = b[frot][0],y = b[frot][1],d = b[frot][2],step = b[frot][3];\n        if(x==x1 && y==y1)\n        {\n            cout << b[frot][3];\n            return;\n        }\n        if(aa[x][y][turn(d,0)]==0){\n            aa[x][y][turn(d,0)]=1;\n            b[rear][0]=x;\n            b[rear][1]=y;\n            b[rear][2]=turn(d,0);\n            b[rear++][3]=step+1;\n        }\n        if(aa[x][y][turn(d,1)]==0){\n            aa[x][y][turn(d,1)]=1;\n            b[rear][0]=x;\n            b[rear][1]=y;\n            b[rear][2]=turn(d,1);\n            b[rear++][3]=step+1;\n        }\n        for(i=1;i<=3;i++){\n            if(d==0 && aa[x-i][y][d]==0 && a[x-1][y]==0 && a[x-i][y]==0 && x-i>0){\n                aa[x-i][y][d]=1;\n                b[rear][0]=x-i;\n                b[rear][1]=y;\n                b[rear][2]=d;\n                b[rear++][3]=step+1;\n            }\n            if(d==2 && aa[x+i][y][d]==0 && a[x+1][y]==0 && a[x+i][y]==0 && x+i<n){\n                aa[x+i][y][d]=1;\n                b[rear][0]=x+i;\n                b[rear][1]=y;\n                b[rear][2]=d;\n                b[rear++][3]=step+1;\n            }\n            if(d==3 && aa[x][y-i][d]==0 && a[x][y-1]==0 && a[x][y-i]==0 && y-i>0){\n                aa[x][y-i][d]=1;\n                b[rear][0]=x;\n                b[rear][1]=y-i;\n                b[rear][2]=d;\n                b[rear++][3]=step+1;\n            }\n            if(d==1 && aa[x][y+i][d]==0 && a[x][y+1]==0 && a[x][y+i]==0 && y+i<m){\n                aa[x][y+i][d]=1;\n                b[rear][0]=x;\n                b[rear][1]=y+i;\n                b[rear][2]=d;\n                b[rear++][3]=step+1;\n            }\n        }\n        frot++;\n    }\n    cout << -1;\n}\nint main()\n{\n    int i,j,d,t;\n    cin>>n>>m;\n    for(i=1;i<=n;i++)\n        for(j=1;j<=m;j++){\n            cin>>t;\n            if(t==1)\n                a[i][j] = a[i-1][j] = a[i][j-1] = a[i-1][j-1] = 1;\n        }\n    cin >> x0 >> y0 >> x1 >> y1 >> c;\n    if(c=='N') d = 0;\n    else if(c=='E') d = 1;\n    else if(c=='S') d = 2;\n    else d = 3;\n    aa[x0][y0][d] = 1;\n    b[0][0] = x0,b[0][1] = y0, b[0][2] = d, b[0][3] = 0;\n    bfs();\n    return 0;\n}\n\n```",
        "postTime": 1544246643,
        "uid": 104299,
        "name": "hawkii",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "/\\*\n\u524d\u65b9\u9ad8\u80fd\uff01\u524d\u65b9\u9ad8\u80fd\uff01\u524d\u65b9\u9ad8\u80fd\uff01\n\n\u8fd9\u662f\u4e00\u9053\u590d\u5236\u4ee3\u7801\u53cd\u590d\u4f7f\u7528\u7684\u597d\u9898\u3002\n\n\u53ea\u6709\u6211\u662f10kb\u7684\u4ee3\u7801\u8fc7\u8fd9\u9053\u9898\u7684\u3002\n\n\n\u601d\u8def\uff1a bfs\u3002\n\n\u8f6c\u5f2f\u7684\u5904\u7406\u662f\uff1a\u628a\u8f6c\u5f2f\u548c\u8d70X\u6b65\u5408\u5e76\u5230\u4e00\u4e2a\u64cd\u4f5c\u91cc\uff0c\u6d88\u8017\u65f6\u95f4\u662f2\uff1b\n\n\u5f53\u5230\u4e00\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u5224\u65ad\u5230\u8fd9\u4e2a\u70b9\u7684\u65f6\u95f4\u662f\u5426\u6bd4\u4e4b\u524d\u5230\u8fbe\u8fc7\u8fd9\u70b9\u65f6\u7684\u65f6\u95f4\u5927\u8fd8\u662f\u5c0f\uff0c\u5982\u679c\u662f\u5c0f\uff0c\u5c31\u5165\u961f\uff0c\u7ee7\u7eedbfs\n\n\u770b\u7740\u4ee3\u7801\u633a\u590d\u6742\u7684\uff0c\u5176\u5b9e\u6211\u5c31\u662f\u4e00\u76f4\u5728\u590d\u5236\u7c98\u8d34\u3002\n\n\u672c\u9898\u5751\u70b9\uff1a \u5904\u7406\u70b9\u548c\u7ebf\u7684\u5173\u7cfb\uff08\u6ce8\u610f\u9898\u76ee\u7ed9\u7684\u56fe\u548c\u6837\u4f8b\uff09\n\n0\u884c\u548c0\u5217\uff0cn\u884c\u548cm\u5217\u90fd\u662f\u4e0d\u80fd\u8d70\u7684\n\n\n            \n            \n            \n            \n            \n                \n            \n            \n            \n            \n                \n    \n            \n            \n            \n            \n            \n        \n            \n            \n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <queue>\nusing namespace std;\nqueue <int> qx,qy;\nqueue <char> qp;\nint n,m,ans;\nint qxx,qyy,zx,zy;\nint s[550][550];\nint tot[550][550];\nchar p;\nbool check(int x,int y)\n{\n    if(x>=1&&y>=1&&x<n&&y<m)\n        return 1;\n    return 0;\n}\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1; i<=n; i++)\n        for(int j=1; j<=m; j++)\n        {\n            scanf(\"%d\",&s[i][j]);\n            if(s[i][j]==1)\n                s[i-1][j]=s[i][j-1]=s[i-1][j-1]=1;\n        }\n//    for(int i=0; i<=n; i++)\n//    {\n//        for(int j=0; j<=m; j++)\n//            printf(\"%d \",s[i][j]);\n//        printf(\"\\n\");\n//    }\n    for(int i=0; i<=n; i++)\n        for(int j=0; j<=m; j++)\n            tot[i][j]=999999;\n    scanf(\"%d%d%d%d\",&qxx,&qyy,&zx,&zy);\n    cin>>p;\n    qx.push(qxx),qy.push(qyy),qp.push(p);\n    tot[qxx][qyy]=0;\n    while(!qx.empty())\n    {\n        int x=qx.front(),y=qy.front();\n        char pos=qp.front();\n        qx.pop(),qy.pop(),qp.pop();\n        if(pos=='S')\n        {\n            if(check(x+1,y))\n                if(tot[x][y]+1<=tot[x+1][y]  &&s[x+1][y]==0)\n                {\n                    tot[x+1][y]=tot[x][y]+1;\n                    qx.push(x+1),qy.push(y),qp.push('S');\n                }\n            if(check(x+2,y))\n                if(tot[x][y]+1<=tot[x+2][y]  &&s[x+1][y]==0 && s[x+2][y]==0)\n                {\n                    tot[x+2][y]=tot[x][y]+1;\n                    qx.push(x+2),qy.push(y),qp.push('S');\n                }\n            if(check(x+3,y))\n                if(tot[x][y]+1<=tot[x+3][y]  &&s[x+1][y]==0 && s[x+2][y]==0 &&s[x+3][y]==0)\n                {\n                    tot[x+3][y]=tot[x][y]+1;\n                    qx.push(x+3),qy.push(y),qp.push('S');\n                }\n            if(check(x,y+1))\n                if(tot[x][y]+2<=tot[x][y+1]  &&s[x][y+1]==0)\n                {\n                    tot[x][y+1]=tot[x][y]+2;\n                    qx.push(x),qy.push(y+1),qp.push('E');\n                }\n            if(check(x,y+2))\n                if(tot[x][y]+2<=tot[x][y+2]  &&s[x][y+1]==0 && s[x][y+2]==0)\n                {\n                    tot[x][y+2]=tot[x][y]+2;\n                    qx.push(x),qy.push(y+2),qp.push('E');\n                }\n            if(check(x,y+3))\n                if(tot[x][y]+2<=tot[x][y+3]  &&s[x][y+1]==0 && s[x][y+2]==0 &&s[x][y+3]==0)\n                {\n                    tot[x][y+3]=tot[x][y]+2;\n                    qx.push(x),qy.push(y+3),qp.push('E');\n                }\n            if(check(x,y-1))\n                if(tot[x][y]+2<=tot[x][y-1]  &&s[x][y-1]==0)\n                {\n                    tot[x][y-1]=tot[x][y]+2;\n                    qx.push(x),qy.push(y-1),qp.push('W');\n                }\n            if(check(x,y-2))\n                if(tot[x][y]+2<=tot[x][y-2]  &&s[x][y-1]==0 && s[x][y-2]==0)\n                {\n                    tot[x][y-2]=tot[x][y]+2;\n                    qx.push(x),qy.push(y-2),qp.push('W');\n                }\n            if(check(x,y-3))\n                if(tot[x][y]+2<=tot[x][y-3]  &&s[x][y-1]==0 && s[x][y-2]==0 &&s[x][y-3]==0)\n                {\n                    tot[x][y-3]=tot[x][y]+2;\n                    qx.push(x),qy.push(y-3),qp.push('W');\n                }\n            if(check(x-1,y))\n                if(tot[x][y]+3<=tot[x-1][y]  &&s[x-1][y]==0)\n                {\n                    tot[x-1][y]=tot[x][y]+3;\n                    qx.push(x-1),qy.push(y),qp.push('N');\n                }\n            if(check(x-2,y))\n                if(tot[x][y]+3<=tot[x-2][y]  &&s[x-1][y]==0 && s[x-2][y]==0)\n                {\n                    tot[x-2][y]=tot[x][y]+3;\n                    qx.push(x-2),qy.push(y),qp.push('N');\n                }\n            if(check(x-3,y))\n                if(tot[x][y]+3<=tot[x-3][y]  &&s[x-1][y]==0 && s[x-2][y]==0 &&s[x-3][y]==0)\n                {\n                    tot[x-3][y]=tot[x][y]+3;\n                    qx.push(x-3),qy.push(y),qp.push('N');\n                }\n        }\n        if(pos=='N')\n        {\n            if(check(x-1,y))\n                if(tot[x][y]+1<=tot[x-1][y]  &&s[x-1][y]==0)\n                {\n                    tot[x-1][y]=tot[x][y]+1;\n                    qx.push(x-1),qy.push(y),qp.push('N');\n                }\n            if(check(x-2,y))\n                if(tot[x][y]+1<=tot[x-2][y]  &&s[x-1][y]==0 && s[x-2][y]==0)\n                {\n                    tot[x-2][y]=tot[x][y]+1;\n                    qx.push(x-2),qy.push(y),qp.push('N');\n                }\n            if(check(x-3,y))\n                if(tot[x][y]+1<=tot[x-3][y]  &&s[x-1][y]==0 && s[x-2][y]==0 &&s[x-3][y]==0)\n                {\n                    tot[x-3][y]=tot[x][y]+1;\n                    qx.push(x-3),qy.push(y),qp.push('N');\n                }\n            if(check(x,y+1))\n                if(tot[x][y]+2<=tot[x][y+1]  &&s[x][y+1]==0)\n                {\n                    tot[x][y+1]=tot[x][y]+2;\n                    qx.push(x),qy.push(y+1),qp.push('E');\n                }\n            if(check(x,y+2))\n                if(tot[x][y]+2<=tot[x][y+2]  &&s[x][y+1]==0 && s[x][y+2]==0)\n                {\n                    tot[x][y+2]=tot[x][y]+2;\n                    qx.push(x),qy.push(y+2),qp.push('E');\n                }\n            if(check(x,y+3))\n                if(tot[x][y]+2<=tot[x][y+3]  &&s[x][y+1]==0 && s[x][y+2]==0 &&s[x][y+3]==0)\n                {\n                    tot[x][y+3]=tot[x][y]+2;\n                    qx.push(x),qy.push(y+3),qp.push('E');\n                }\n            if(check(x,y-1))\n                if(tot[x][y]+2<=tot[x][y-1]  &&s[x][y-1]==0)\n                {\n                    tot[x][y-1]=tot[x][y]+2;\n                    qx.push(x),qy.push(y-1),qp.push('W');\n                }\n            if(check(x,y-2))\n                if(tot[x][y]+2<=tot[x][y-2]  &&s[x][y-1]==0 && s[x][y-2]==0)\n                {\n                    tot[x][y-2]=tot[x][y]+2;\n                    qx.push(x),qy.push(y-2),qp.push('W');\n                }\n            if(check(x,y-3))\n                if(tot[x][y]+2<=tot[x][y-3]  &&s[x][y-1]==0 && s[x][y-2]==0 &&s[x][y-3]==0)\n                {\n                    tot[x][y-3]=tot[x][y]+2;\n                    qx.push(x),qy.push(y-3),qp.push('W');\n                }\n            if(check(x+1,y))\n                if(tot[x][y]+3<=tot[x+1][y]  &&s[x+1][y]==0)\n                {\n                    tot[x+1][y]=tot[x][y]+3;\n                    qx.push(x+1),qy.push(y),qp.push('S');\n                }\n            if(check(x+2,y))\n                if(tot[x][y]+3<=tot[x+2][y]  &&s[x+1][y]==0 && s[x+2][y]==0)\n                {\n                    tot[x+2][y]=tot[x][y]+3;\n                    qx.push(x+2),qy.push(y),qp.push('S');\n                }\n            if(check(x+3,y))\n                if(tot[x][y]+3<=tot[x+3][y]  &&s[x+1][y]==0 && s[x+2][y]==0 &&s[x+3][y]==0)\n                {\n                    tot[x+3][y]=tot[x][y]+3;\n                    qx.push(x+3),qy.push(y),qp.push('S');\n                }\n        }\n        if(pos=='E')\n        {\n            if(check(x,y+1))\n                if(tot[x][y]+1<=tot[x][y+1]  &&s[x][y+1]==0)\n                {\n                    tot[x][y+1]=tot[x][y]+1;\n                    qx.push(x),qy.push(y+1),qp.push('E');\n                }\n            if(check(x,y+2))\n                if(tot[x][y]+1<=tot[x][y+2]  &&s[x][y+1]==0 && s[x][y+2]==0)\n                {\n                    tot[x][y+2]=tot[x][y]+1;\n                    qx.push(x),qy.push(y+2),qp.push('E');\n                }\n            if(check(x,y+3))\n                if(tot[x][y]+1<=tot[x][y+3]  &&s[x][y+3]==0 && s[x][y+2]==0 &&s[x][y+1]==0)\n                {\n                    tot[x][y+3]=tot[x][y]+1;\n                    qx.push(x),qy.push(y+3),qp.push('E');\n                }\n            if(check(x-1,y))\n                if(tot[x][y]+2<=tot[x-1][y]  &&s[x-1][y]==0)\n                {\n                    tot[x-1][y]=tot[x][y]+2;\n                    qx.push(x-1),qy.push(y),qp.push('N');\n                }\n            if(check(x-2,y));\n                if(tot[x][y]+2<=tot[x-2][y]  &&s[x-1][y]==0 && s[x-2][y]==0)\n                {\n                    tot[x-2][y]=tot[x][y]+2;\n                    qx.push(x-2),qy.push(y),qp.push('N');\n                }\n            if(check(x-3,y))\n                if(tot[x][y]+2<=tot[x-3][y]  &&s[x-1][y]==0 && s[x-2][y]==0 &&s[x-3][y]==0)\n                {\n                    tot[x-3][y]=tot[x][y]+2;\n                    qx.push(x-3),qy.push(y),qp.push('N');\n                }\n            if(check(x+1,y))\n                if(tot[x][y]+2<=tot[x+1][y]  &&s[x+1][y]==0)\n                {\n                    tot[x+1][y]=tot[x][y]+2;\n                    qx.push(x+1),qy.push(y),qp.push('S');\n                }\n            if(check(x+2,y));\n                if(tot[x][y]+2<=tot[x+2][y]  &&s[x+1][y]==0 && s[x+2][y]==0)\n                {\n                    tot[x+2][y]=tot[x][y]+2;\n                    qx.push(x+2),qy.push(y),qp.push('S');\n                }\n            if(check(x+3,y))\n                if(tot[x][y]+2<=tot[x+3][y]  &&s[x+1][y]==0 && s[x+2][y]==0 &&s[x+3][y]==0)\n                {\n                    tot[x+3][y]=tot[x][y]+2;\n                    qx.push(x+3),qy.push(y),qp.push('S');\n                }\n            if(check(x,y-1))\n                if(tot[x][y]+3<=tot[x][y-1]  &&s[x][y-1]==0)\n                {\n                    tot[x][y-1]=tot[x][y]+3;\n                    qx.push(x),qy.push(y-1),qp.push('W');\n                }\n            if(check(x,y-2))\n                if(tot[x][y]+3<=tot[x][y-2]  &&s[x][y-1]==0 && s[x][y-2]==0)\n                {\n                    tot[x][y-2]=tot[x][y]+3;\n                    qx.push(x),qy.push(y-2),qp.push('W');\n                }\n            if(check(x,y-3))\n                if(tot[x][y]+3<=tot[x][y-3]  &&s[x][y-1]==0 && s[x][y-2]==0 &&s[x][y-3]==0)\n                {\n                    tot[x][y-3]=tot[x][y]+3;\n                    qx.push(x),qy.push(y-3),qp.push('W');\n                }\n        }\n        if(pos=='W')\n        {\n            if(check(x,y-1))\n                if(tot[x][y]+1<=tot[x][y-1]  &&s[x][y-1]==0)\n                {\n                    tot[x][y-1]=tot[x][y]+1;\n                    qx.push(x),qy.push(y-1),qp.push('W');\n                }\n            if(check(x,y-2))\n                if(tot[x][y]+1<=tot[x][y-2]  &&s[x][y-1]==0 && s[x][y-2]==0)\n                {\n                    tot[x][y-2]=tot[x][y]+1;\n                    qx.push(x),qy.push(y-2),qp.push('W');\n                }\n            if(check(x,y-3))\n                if(tot[x][y]+1<=tot[x][y-3]  &&s[x][y-1]==0 && s[x][y-2]==0 &&s[x][y-3]==0)\n                {\n                    tot[x][y-3]=tot[x][y]+1;\n                    qx.push(x),qy.push(y-3),qp.push('W');\n                }\n            if(check(x-1,y))\n                if(tot[x][y]+2<=tot[x-1][y]  &&s[x-1][y]==0)\n                {\n                    tot[x-1][y]=tot[x][y]+2;\n                    qx.push(x-1),qy.push(y),qp.push('N');\n                }\n            if(check(x-2,y))\n                if(tot[x][y]+2<=tot[x-2][y]  &&s[x-1][y]==0 && s[x-2][y]==0)\n                {\n                    tot[x-2][y]=tot[x][y]+2;\n                    qx.push(x-2),qy.push(y),qp.push('N');\n                }\n            if(check(x-3,y))\n                if(tot[x][y]+2<=tot[x-3][y]  &&s[x-1][y]==0 && s[x-2][y]==0 &&s[x-3][y]==0)\n                {\n                    tot[x-3][y]=tot[x][y]+2;\n                    qx.push(x-3),qy.push(y),qp.push('N');\n                }\n            if(check(x+1,y))\n                if(tot[x][y]+2<=tot[x+1][y]  &&s[x+1][y]==0)\n                {\n                    tot[x+1][y]=tot[x][y]+2;\n                    qx.push(x+1),qy.push(y),qp.push('S');\n                }\n            if(check(x+2,y))\n                if(tot[x][y]+2<=tot[x+2][y]  &&s[x+1][y]==0 && s[x+2][y]==0)\n                {\n                    tot[x+2][y]=tot[x][y]+2;\n                    qx.push(x+2),qy.push(y),qp.push('S');\n                }\n            if(check(x+3,y))\n                if(tot[x][y]+2<=tot[x+3][y]  &&s[x+1][y]==0 && s[x+2][y]==0 &&s[x+3][y]==0)\n                {\n                    tot[x+3][y]=tot[x][y]+2;\n                    qx.push(x+3),qy.push(y),qp.push('S');\n                }\n            if(check(x,y+1))\n                if(tot[x][y]+3<=tot[x][y+1]  &&s[x][y+1]==0)\n                {\n                    tot[x][y+1]=tot[x][y]+3;\n                    qx.push(x),qy.push(y+1),qp.push('E');\n                }\n            if(check(x,y+2))\n                if(tot[x][y]+3<=tot[x][y+2]  &&s[x][y+1]==0 && s[x][y+2]==0)\n                {\n                    tot[x][y+2]=tot[x][y]+3;\n                    qx.push(x),qy.push(y+2),qp.push('E');\n                }\n            if(check(x,y+3))\n                if(tot[x][y]+3<=tot[x][y+3]  &&s[x][y+3]==0 && s[x][y+2]==0 &&s[x][y+1]==0)\n                {\n                    tot[x][y+3]=tot[x][y]+3;\n                    qx.push(x),qy.push(y+3),qp.push('E');\n                }\n        }\n        if(tot[zx][zy]!=999999)\n        {\n            printf(\"%d\",tot[zx][zy]);\n            return 0;\n        }\n    }\n    printf(\"-1\");\n    return 0;\n}\n\n```",
        "postTime": 1508760039,
        "uid": 19215,
        "name": "OIer991215",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u4e00\u9053\u5178\u578b\u7684\u5e7f\u641c\u9898\uff0c\u6ce8\u610f\u4ee5\u4e0b\u4e24\u70b9\u5373\u53ef\uff1a\n\n1. \u673a\u5668\u4eba\u6709\u4f53\u79ef\uff0cbfs\u65f6\u53ef\u4ee5\u5c06\u673a\u5668\u4eba\u7684\u5750\u6807\uff0c\u8fd9\u6837\u5224\u65ad\u969c\u788d\u7269\u8f83\u4e3a\u65b9\u4fbf\u3002\n\n2. \u5df2\u7ecf\u8bbf\u95ee\u8fc7\u7684\u4f4d\u7f6e\uff08\u5305\u62ec\u6a2a\u5750\u6807\uff0c\u7eb5\u5750\u6807\u53ca\u65b9\u5411\uff09\u4e0d\u53ef\u91cd\u590d\u8bbf\u95ee\uff0c\u53ef\u7528\u4e00\u4e2a\u8f85\u52a9\u6570\u7ec4\u6765\u5224\u91cd\u3002\n\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n\n\n\n\n\n\n\n```cpp\n#include<cstdio>\n#include<cstdlib>\n#include<queue>\n#define For(a,b,c,d) for(register int a=b;a<=c;a+=d) \nconst int my[ 4 ] = { 0 , 1 , 0 , -1 } , mx[ 4 ] = { -1 , 0 , 1 , 0 } ; //\u6bcf\u4e2a\u65b9\u5411\u7684\u79fb\u52a8\u89c4\u5219 \nint n , m , maze[ 60 ][ 60 ] ;\nbool vis[ 20000 ] ; //\u8bb0\u5f55\u8bbf\u95ee\u8fc7\u7684\u4f4d\u7f6e \ninline int fun( int a , int b , int c ) { return c * 2700 + a * 51 + b ;} //\u8fd4\u56de\u6bcf\u79cd\u60c5\u51b5\u552f\u4e00\u5bf9\u5e94\u7684key\u503c \nstruct pos { //\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u4fe1\u606f \n    int x , y ; //\u5750\u6807 \n    int f ; //\u65b9\u5411 \n    int mov ; //\u5df2\u79fb\u52a8\u65f6\u95f4 \n} ;\nstd::queue<pos> que ; \ninline bool zq( int x , int y ) { //\u5224\u65ad\u662f\u5426\u649e\u4e0a\u969c\u788d\u7269 \n    if( maze[ x ][ y ] || maze[ x + 1 ][ y ] || maze[ x ][ y + 1 ] || maze[ x + 1 ][ y + 1 ] )\n        return 1 ;\n    return 0 ;\n}\ninline void bfs() {\n    int x , y , tx , ty , f , d , mov , lx , ly ;\n    char c ;\n    scanf(\"%d %d %d %d %c\" , &x , &y , &tx , &ty , &c );\n    switch( c ) {\n        case 'N': f = 0 ;\n            break ;\n        case 'E': f = 1 ;\n            break ;\n        case 'S': f = 2 ;\n            break ;\n        case 'W': f = 3 ;\n            break ;\n    }\n    pos temp ;\n    temp.x = x , temp.y = y , temp.f = f , temp.mov = 0 ;\n    que.push( temp ) ;\n    while( !que.empty() ) {\n        temp = que.front() ;\n        que.pop() ;\n        x = temp.x , y = temp.y , f = temp.f , d = fun( x , y , f ) , mov = temp.mov ;\n        if( x == tx && y == ty ) { //\u5224\u65ad\u662f\u5426\u662f\u91cd\u70b9 \n            printf(\"%d\",mov) ;\n            exit( 0 ) ;\n        }\n        if( vis[ d ] ) //\u5224\u65ad\u662f\u5426\u88ab\u8bbf\u95ee\u8fc7 \n            continue ;\n        vis[ d ] = 1 ;\n        temp.mov ++ ;\n        temp.f = ( f + 4 - 1 ) % 4 ; //\u5de6\u8f6c \n        que.push( temp ) ;\n        temp.f = ( f + 4 + 1 ) % 4 ; //\u53f3\u8f6c \n        que.push( temp ) ;\n        temp.f = f ;\n        For( i , 1 , 3 , 1 ) { //\u5411\u524d\u79fb\u52a8 \n            lx = x + mx[ f ] * i , ly = y + my[ f ] * i ;\n            if( lx <= 0 || ly <= 0 || lx >= n || ly >= m || zq( lx , ly ) )\n                break ;\n            temp.x = lx ;\n            temp.y = ly ;\n            que.push( temp ) ;\n        }\n    }\n    printf(\"-1\");  \n}\nint main() { //\u4e3b\u51fd\u6570 \n    scanf(\"%d %d\" , &n , &m ) ;\n    For( i , 1 , n , 1 ) {\n        For( j , 1 , m , 1 ) {\n            scanf(\"%d\", &maze[ i ][ j ] );\n        }\n    }\n    bfs() ;\n    return 0;\n}\n```",
        "postTime": 1513350082,
        "uid": 30042,
        "name": "\u6797\u5219\u5f90",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "###  _[\u539f\u9898\u94fe\u63a5](https://www.luogu.org/problemnew/show/P1126)_ \n \n------------\n\n# \u9898\u610f\uff1a\n\n **\u673a\u5668\u4eba\u88ab\u7528\u4e8e\u5728\u4e00\u4e2a\u50a8\u85cf\u5ba4\u4e2d\u642c\u8fd0\u8d27\u7269\u3002\u50a8\u85cf\u5ba4\u662f\u4e00\u4e2aN\u00d7M\u7684\u7f51\u683c\uff0c\u6709\u4e9b\u683c\u5b50\u4e3a\u4e0d\u53ef\u79fb\u52a8\u7684\u969c\u788d(\u7a7a\u5730\u75280\u8868\u793a\uff0c\u969c\u788d\u75281\u8868\u793a)\u3002\u673a\u5668\u4eba\u7684\u4e2d\u5fc3\u603b\u662f\u5728\u683c\u70b9\u4e0a,\u63a7\u5236\u673a\u5668\u4eba\u884c\u8d70\u6709\u4e94\u79cd\u6307\u4ee4\uff0c\u5206\u522b\u662f\uff1a\u5411\u524d\u79fb\u52a81\u6b65\uff1b\u5411\u524d\u79fb\u52a82\u6b65\uff1b\u5411\u524d\u79fb\u52a83\u6b65\uff1b\u5411\u5de6\u8f6c\uff1b\u5411\u53f3\u8f6c\u3002\u6bcf\u4e2a\u6307\u4ee4\u6240\u9700\u8981\u7684\u65f6\u95f4\u4e3a1\u79d2\u3002\u73b0\u7ed9\u51fa\u673a\u5668\u4eba\u7684\u8d77\u70b9\u548c\u5f53\u524d\u9762\u5411\u7684\u65b9\u5411,\u4ee5\u53ca\u76ee\u6807\u7ec8\u70b9, \u8bf7\u4f60\u8ba1\u7b97\u4e00\u4e0b\u673a\u5668\u4eba\u5b8c\u6210\u4efb\u52a1\u6240\u9700\u7684\u6700\u5c11\u65f6\u95f4\u3002**\n \n **\u4f8b\u5982\uff1a**\n \n![\u4f8b\u5b50](https://cdn.luogu.com.cn/upload/pic/39.png)\n \n \u4e0a\u56fe\u5c31\u662f9\u884c10\u5217\u7684\u683c\u5b50\u5730\u56fe,\u9ed1\u8272\u90e8\u5206\u4e3a\u969c\u788d\u7269\uff0c\u4e0d\u53ef\u901a\u8fc7\uff0c\u673a\u5668\u4eba\u8d77\u70b9\u5728\u7b2c\u4e03\u884c\u7b2c\u4e8c\u5217\u7684\u683c\u5b50\u7684\u53f3\u4e0b\u89d2\uff0c\u521d\u59cb\u9762\u5411\u65b9\u5411\u4e3a\u5357(S),\u7ec8\u70b9\u5728\u7b2c\u4e8c\u884c\u7b2c\u4e03\u5217\u683c\u5b50\u7684\u53f3\u4e0b\u89d2\uff0c\u5219\u6700\u5c11\u7ecf\u8fc712\u79d2\u53ef\u4ee5\u5b8c\u6210\u4efb\u52a1\u3002\n\n### \u5751\u70b9\u6ce8\u610f:\n\t\n   **\u2460 \u8f93\u5165\u7684\u8ff7\u5bab\u6570\u636e\u662f\u683c\u5b50\u7684\u4f4d\u7f6e\uff0c\u800c\u673a\u5668\u4eba\u662f\u5728\u70b9\u4e0a\u884c\u8d70\uff0c\u6545\u800c\u9700\u8981\u628a\u683c\u5b50\u8f6c\u6362\u4e3a\u70b9\uff0c\u4f8b\u5982\u8f93\u5165\u7b2ci\u884cj\u5217\u7684\u683c\u5b50\uff0c\u5219\u70b9(i,j),(i-1,j-1),(i-1,j),(i,j-1)\u6784\u6210\u4e86\u8be5\u683c\u5b50,\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u4e2a\u969c\u788d\u683c\u5b50\uff0c\u8981\u628a\u8fd9\u56db\u4e2a\u70b9\u5747\u8d4b\u503c\u4e3a1**\n   \n   **\u2461 \u56e0\u4e3a\u8be5\u673a\u5668\u4eba\u672c\u8eab\u4e5f\u6709\u4f53\u79ef\uff0c\u6545\u800c\u8ff7\u5bab\u7684\u8fb9\u754c\u70b9\u5904\u4e5f\u4e0d\u80fd\u8d70\u3002\u56e0\u6b64\u5bf9\u4e8en\u884cm\u5217\u7684\u683c\u5b50\u8ff7\u5bab(\u5b9e\u9645\u70b9\u7684\u8303\u56f4\u4e3a0~n,0~m),\u53ef\u8d70\u7684\u70b9\u7684\u8303\u56f4\u4e3a(1~n-1,1~m-1)**\n   \n   **\u2462 \u7528scanf\u8bfb\u5165\u8d77\u70b9\u7ec8\u70b9\u53ca\u65b9\u5411\u65f6 \u9700scanf(\"%d%d%d%d %c\",..),%d\u548c%c\u4e4b\u95f4\u4e00\u5b9a\u8981\u7a7a\u7a7a\u683c\uff0c\u5426\u5219\u8bfb\u5165\u7684\u65b9\u5411\u5c06\u59cb\u7ec8\u4e3a\u7a7a\u683c\u5bfc\u81f4\u9519\u8bef**\n   \n   **\u2463 \u9488\u5bf9\u53ea\u6709\u7b2c6\u4e2a\u6d4b\u8bd5\u70b9\u8fc7\u4e0d\u53bb\u7684\u60c5\u51b5(\u5c31\u662f\u672c\u5f31\u9e21\u4e86,\u5751\u4e86\u597d\u4e45...)\uff0c\u5728\u6267\u884c\u524d\u8fdb\u547d\u4ee4\u5224\u65ad\u4e0b\u4e00\u72b6\u6001\u662f\u5426\u5408\u6cd5\u65f6\uff0c\u4e0d\u8981\u5c06\u5224\u65ad\u969c\u788d\u548c\u8bbf\u95ee\u6807\u8bb0\u4e00\u8d77\u5224\u65ad\uff0c**\n   ```cpp\n \u9519\u8bef\u5199\u6cd5:\n for(\u4e0b\u4e00\u6b65-\u8d701\u683c~\u8d70\u4e09\u683c){\n \t  nx=\u4e0b\u4e00\u6b65\u7684\u72b6\u6001(x,y-\u4f4d\u7f6e face-\u9762\u5bf9\u7684\u65b9\u5411)\n \t  if(nx.x<1||nx.y<1||nx.x>=n||nx.y>=m||maze[nx.x][nx.y]||vis[nx.x][nx.y][nx.face]) break;\n       //\u4f4d\u7f6e\u4e0d\u5408\u6cd5\uff0c\u6216\u8005\u67d0\u72b6\u6001\u5230\u8fbe\u8fc7\uff0c\u76f4\u63a5\u8df3\u51fa\u76f4\u8d70\u884c\u4e3a\n      \u6807\u8bb0+\u5165\u961f\n }\n \n \n \u6b63\u786e\u5199\u6cd5:\n  for(\u4e0b\u4e00\u6b65-\u8d701\u683c~\u8d70\u4e09\u683c){\n      nx=\u4e0b\u4e00\u6b65\u7684\u72b6\u6001(x,y-\u4f4d\u7f6e face-\u9762\u5bf9\u7684\u65b9\u5411)\n \t  if(nx.x<1||nx.y<1||nx.x>=n||nx.y>=m||maze[nx.x][nx.y]) break;//\u6b64\u8def\u4e0d\u901a\n      if(vis[nx.x][nx.y][nx.face]) continue;//\u8be5\u72b6\u6001\u6269\u5c55\u8fc7\u4e86\uff0c\u505c\u6b62\u6b64\u6b21\u76f4\u8d70\uff0c\u5f00\u59cb\u4e0b\u4e00\u6b21\u76f4\u8d70\n      \u6807\u8bb0+\u5165\u961f\n }\n```\n**\u539f\u56e0:**\n\n**\u5047\u8bbe\u5728$t$\u65f6\u523b,\u5219\u4ece $a$ \u53ef\u4ee5\u76f4\u8d701\u6b65(\u8ddd\u79bb\u5206\u522b\u4e3a1,2,3)\u5230  $a+1$,$a+2$,$a+3$ ,\u5e76\u4e14\u76ee\u6807\u4e3a $a+4$ . \u7136\u540e\u5728 $t+1$ \u65f6\u523b\u4ece $a+1$\u53ef\u4ee5\u5230 $(a+2, a+3, a+4)$\uff0c\u4f46\u5982\u679c\u91c7\u53d6\u4e0a\u8ff0\u9519\u8bef\u5199\u6cd5\uff0c\u5728 $t+1$ \u65f6\u523b\u65f6,\u5219\u56e0\u4e3a\u5728 $t$ \u65f6\u523b\uff0c$a+2$\u88ab\u6807\u8bb0\u4e86\uff0c\u5bfc\u81f4\u4e0d\u5408\u6cd5\u76f4\u63a5\u8df3\u51fa\u524d\u8fdb\u6307\u4ee4\uff0c\u7136\u800c\u5b9e\u9645\u4e0a $a+1$ \u53ef\u4ee5\u76f4\u63a5\u5230 $a+4$ \u7684\uff0c\u76f4\u63a5\u8fd4\u56de\u7b54\u6848\u5373\u53ef\uff0c\u56e0\u6b64\u5bf9\u4e8e\u91cd\u590d\u6807\u8bb0\u7684\u8fc7\u7684\u503c\uff0c\u53ea\u80fd continue \u540e\u7ee7\u7eed\u641c\u7d22\u5176\u5b83\u524d\u8fdb\u8ddd\u79bb\uff0c\u4e0d\u80fdbreak\uff1b**\n\n\n------------\n#  \u601d\u8def\uff1a\n**\u77e5\u9053\u4e86\u4ee5\u4e0a\u5751\u70b9\u540e\uff0c\u5c31\u662f\u5f88\u666e\u901a\u7684BFS**\n\n**\u4e3b\u8981\u7ed3\u6784\u4e3a**\n```cpp\n//face= 0-\u897f(W) 1-\u4e1c(E) 2-\u5317(N) 3-\u5357(S)\nstruct node{//\u72b6\u6001\u7ed3\u6784\n    int x,y,face,step;//\u4f4d\u7f6e \u9762\u5bf9\u7684\u65b9\u5411\uff0c\u6b65\u6570\n}st,en,now,nx;//\u8d77\u70b9 \u7ec8\u70b9 \u5f53\u524d\u70b9 \u4e0b\u4e00\u70b9\n\n//\u8bbf\u95ee\u6807\u8bb0\u6570\u7ec4\uff0c\u9632\u6b62\u91cd\u590d\u641c\u7d22\u6269\u5c55\nint vis[N][N][4];\u72b6\u6001\u6807\u8bb0\u6570\u7ec4(\u4f4d\u7f6e\u548c\u9762\u5bf9\u7684\u65b9\u5411)\n\n//\u64cd\u4f5c\u6570\u7ec4 face=0,1,2,3\u65f6\u7684\u5750\u6807\u6539\u53d8\u503c\nconst int dx[] = {0,0,-1,1};//\u897f\u4e1c\uff0c\u5317\u5357\nconst int dy[] = {-1,1,0,0};\nconst int turnLeft[] = {3,2,0,1};\n//\u5de6\u8f6c \u4f8b\u5982 turnLeft[0]=3,\u5219\u9762\u5bf9\u897f\u8fb9(0)\u65f6\uff0c\u5de6\u8f6c\u540e\u5230\u8fbe\u5357\u65b9(3)\nconst int turnRight[] = {2,3,1,0};//\u53f3\u8f6c\n```\n------------\n\n**AC\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b:**\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 55;\n//face= 0-\u897f 1-\u4e1c 2-\u5317 3-\u5357\nconst int dx[] = {0,0,-1,1};//face=0,1,2,3\u65f6\u7684\u65b9\u5411\u503c,\u5de6\u53f3\u548c\u4e0a\u4e0b\nconst int dy[] = {-1,1,0,0};\nconst int turnLeft[] = {3,2,0,1};//face=0,1,2,3\u65f6\nconst int turnRight[] = {2,3,1,0};\nstruct node{\n    int x,y,face,step;//\u4f4d\u7f6e \u9762\u5bf9\u7684\u65b9\u5411\uff0c\u6b65\u6570\n}st,en,now,nx;//\u8d77\u70b9 \u7ec8\u70b9 \u5f53\u524d\u70b9 \u4e0b\u4e00\u70b9\nint maze[N][N],vis[N][N][4];//\u8ff7\u5bab\u5730\u56fe,\u72b6\u6001\u6807\u8bb0\u6570\u7ec4(\u4f4d\u7f6e\u548c\u9762\u5bf9\u7684\u65b9\u5411)\nint n,m,ans=-1;\nvoid bfs(){\n    queue<node> q;\n    st.step = 0;\n    vis[st.x][st.y][st.face] = 1;\n    q.push(st);\n    while(!q.empty()){\n        now = q.front(),q.pop();\n        if(now.x==en.x&&now.y==en.y){\n            ans = now.step;\n            return;\n        }\n        nx=now;//\u51c6\u5907\u76f4\u8d70\n        for(int i = 1; i <= 3; i++){//\u6cbf\u7740\u5f53\u524d\u65b9\u5411\u8d70i\u6b65\n            nx.x += dx[now.face],nx.y += dy[now.face];\n            //if(nx.x<1||nx.y<1||nx.x>=n||nx.y>=m||maze[nx.x][nx.y]||vis[nx.x][nx.y][nx.face]) break;//\u67d0\u5904\u8d70\u4e0d\u4e86\u65f6\uff0c\u4e0d\u80fd\u518d\u7ee7\u7eed\u524d\u884c\n            if(nx.x<1||nx.y<1||nx.x>=n||nx.y>=m||maze[nx.x][nx.y]) break;//\u6b64\u8def\u4e0d\u901a\n            if(vis[nx.x][nx.y][nx.face]) continue;//\u8be5\u72b6\u6001\u6269\u5c55\u8fc7\u4e86\n            //\u6ce8\u610f\u6b64\u5904\uff0c\u8fb9\u754c\u5904\u4e0d\u53ef\u8d70(0~n\u884c 0~m\u5217)\n            vis[nx.x][nx.y][nx.face] = 1;\n            nx.step = now.step + 1;//\u8d70\u4e00\u6b65\n            q.push(nx);\n        }\n        nx=now, nx.step = now.step + 1;//\u51c6\u5907\u8f6c\u6362\u65b9\u5411\n        nx.face = turnLeft[now.face];//\u5de6\u8f6c\n        if(!vis[nx.x][nx.y][nx.face]){\n            vis[nx.x][nx.y][nx.face] = 1;\n            q.push(nx);\n        }\n        nx.face = turnRight[now.face];//\u53f3\u8f6c\n        if(!vis[nx.x][nx.y][nx.face]){\n            vis[nx.x][nx.y][nx.face] = 1;\n            q.push(nx);\n        }\n\n    }\n}\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i = 1; i <= n; i++)//\u8bfb\u5165\u683c\u5b50\u7684\u503c\n        for(int j = 1; j <= m; j++){\n            int a;\n            scanf(\"%d\",&a);\n            if(a){//\u8be5\u683c\u5b50\u4e3a\u969c\u788d(i,j\u89c6\u4e3a\u683c\u5b50\u53f3\u4e0b\u89d2\u5750\u6807)\uff0c\u5219\u969c\u788d\u7684\u56db\u4e2a\u70b9\u5747\u4e0d\u53ef\u8d70\n                maze[i][j] = maze[i-1][j-1]= maze[i-1][j] =maze[i][j-1] = 1;\n            }\n        }\n    scanf(\"%d%d%d%d %c\",&st.x,&st.y,&en.x,&en.y,&st.face);\n    st.face = (st.face=='W'?0:(st.face=='E'?1:(st.face=='N'?2:3)));//w-0 E-1 N-2 S-3\n    bfs();\n    if(ans==-1) printf(\"-1\\n\");\n    else printf(\"%d\\n\",ans);\n    return 0;\n}\n\n\n```\n\n\n\n    ",
        "postTime": 1559464718,
        "uid": 213529,
        "name": "Zero\u795e",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "##\u5386\u65f6\u4e24\u4e2a\u534a\u5c0f\u65f6\uff0c\u7ec8\u4e8e\u628a\u8fd9\u9053\u9898AC\u4e86\u3002\n\n###\u6838\u5fc3\u601d\u8def\uff1a\u5355\u5411bfs\u5373\u53ef\uff0c\u4e0d\u61c2bfs\u7684\u53ef\u4ee5\u5148\u53bb\u5b66\u4e60\u4e00\u4e0b\uff0c\u4e0d\u96be\u638c\u63e1\uff0c\u800c\u4e14\u975e\u5e38\u6709\u7528\u3002\n\n**\u8fd9\u9053\u9898\u5176\u5b9e\u4e0d\u96be\uff0c\u4f46\u662f\u56e0\u4e3a\u8981\u6ce8\u610f\u7684\u5730\u65b9\u6bd4\u8f83\u591a\uff0c\u6240\u4ee5\u786c\u751f\u751f\u4ece\u666e\u53ca-\u7684\u96be\u5ea6\u5230\u4e86\u63d0\u9ad8-...**\n\n**\u5751\u70b9\u5217\u4e3e\uff1a**\n\n- \u6ce8\u610f\u673a\u5668\u4eba\u662f\u7403\u5f62\u4e14\u6709\u76f4\u5f84\uff0c\u6240\u4ee5\u673a\u5668\u4eba\u4e0d\u80fd\u5230\u8fbe\u50a8\u85cf\u5ba4\u7684\u8fb9\u7f18\u3002\n\n- \u6ce8\u610f\u6837\u4f8b\uff0c\u4e00\u4e2a\u969c\u788d\u7269\u76f4\u63a5\u5360\u6ee1\u4e00\u4e2a\u683c\u5b50\uff0c\u800c\u540c\u6837\u56e0\u4e3a\u673a\u5668\u4eba\u7684\u76f4\u5f84\u95ee\u9898\uff0c\u4e0d\u80fd\u5230\u8fd9\u4e9b\u683c\u5b50\u7684\u683c\u70b9\u4e0a\u53bb\u3002\n\n- \u5728\u79fb\u52a8\u65f6\u673a\u5668\u4eba\u4e5f\u9700\u8981\u4e00\u6b65\u4e00\u6b65\u79fb\u52a8\uff0c\u6240\u4ee5\u673a\u5668\u4eba\u4e0d\u80fd\u8de8\u8fc7\u969c\u788d\u7269\uff0c\u5373\u9047\u5230\u969c\u788d\u7269\u5c31\u5fc5\u987b\u505c\u6b62\u3002\n\n**\u7a0b\u5e8f\u7ec6\u8282\uff1a**\n\n- \u5224\u91cd\u7528\u4e09\u7ef4\u6570\u7ec4\u6765\u5224\uff0c\u56e0\u4e3a\u8fd9\u9053\u9898\u4e2d\uff0c\u673a\u5668\u4eba\u7684\u72b6\u6001\u4e0d\u53ea\u6709\u5750\u6807\uff0c\u8fd8\u6709\u65b9\u5411\uff0c\u53ea\u8bb0\u5f55\u5750\u6807\u4f1a\u5bfc\u81f4\u65e0\u89e3\u60c5\u51b5\u51fa\u73b0\u3002\n\n- \u9488\u5bf9\u3010\u5751\u70b9\u5217\u4e3e\u3011\u4e2d\u7684\u7b2c\u4e8c\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u6570\u7ec4\u52a0\u4e2a\u9884\u5904\u7406\uff0c**\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u969c\u788d\u70b9\uff08i\uff0cj\uff09\uff0c\u5b83\u90fd\u4f1a\u4f7f\u5b83\u7684\u5de6\u4e0a\u89d2\uff08i-1\uff0cj-1\uff09\uff0c\u4e0a\u65b9\uff08i-1\uff0cj\uff09\uff0c\u5de6\u65b9\uff08i\uff0cj-1\uff09\u7684\u70b9\u65e0\u6cd5\u88ab\u673a\u5668\u4eba\u884c\u8d70\uff0c\u5229\u7528\u8fd9\u4e00\u70b9\u5373\u53ef\u751f\u6210map[]\u6570\u7ec4\u6765\u8868\u793a\u4e00\u4e2a\u70b9\u80fd\u5426\u884c\u8d70\u3002**\n\n- scanf\u515a\u8bb0\u5f97\u5728\u8f93\u5165\u8d77\u59cb\u65b9\u5411\u65f6\u5728\u7b2c\u4e00\u4e2a\u53c2\u6570\u5185+\u7a7a\u683c\uff0c\u5982\uff1ascanf(\" %c\",&starttdirection);\u5426\u5219\u8bb0\u5f55\u8d77\u59cb\u65b9\u5411\u7684char\u53d8\u91cf\u4f1a\u53d8\u6210\u7a7a\u683c\u3002\n\n\n\u4ee5\u4e0bAC\u4ee3\u7801\uff1a\uff08\u6ce8\u91ca\u4e0d\u591a\uff0c\u601d\u8def\u548c\u7ec6\u8282\u90fd\u5728\u524d\u9762\u8bb2\u4e86\uff0c\u7a0b\u5e8f\u5185\u53ea\u6709\u7ed3\u6784\u7684\u8bf4\u660e\uff09\n\n\u00b7\u00b7\u00b7cpp\n\n```cpp\n#include<cstdio>\n#include<queue>\nusing namespace std;\nstruct robot{\n    int x,y;//\u5750\u6807\u503c\n    int direction;//\u65b9\u5411 \n    int step;\n};\nqueue<robot> q;\nbool vis[51][51][4];\nbool map[52][52];\nint dx[4]={0,1,0,-1},dy[4]={1,0,-1,0};\nint main(){\n    int n,m;\n    int sx,sy,ex,ey,sd;//\u8d77\u59cb\u70b9\u548c\u7ec8\u70b9\u5750\u6807 \n    char sdirection;//\u8d77\u59cb\u65b9\u5411 \n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++){\n        for(int j=1;j<=m;j++){\n            scanf(\"%d\",&map[i][j]);\n            if(map[i][j]){\n                map[i-1][j-1]=1;\n                map[i-1][j]=1;\n                map[i][j-1]=1;\n            }\n        }\n    }\n    //\u9884\u5904\u7406 \n    scanf(\"%d%d%d%d %c\",&sx,&sy,&ex,&ey,&sdirection);\n    if(sdirection=='E')sd=0;\n    else if(sdirection=='S')sd=1;\n    else if(sdirection=='W')sd=2;\n    else sd=3;//\u5c06\u65b9\u5411\u8f6c\u5316\u4e3a\u6570\u5b57\u4fbf\u4e8e\u5224\u91cd \n    if(sx>=n || sx<1 || sy>=m || sy<1 || map[sx][sy]){printf(\"-1\");return 0;}\n    robot temp;\n    temp.x=sx;temp.y=sy;temp.direction=sd;temp.step=0;//\u4ece\u8d77\u70b9\u5f00\u59cb\uff0c\u5c06\u8d77\u70b9\u72b6\u6001\u585e\u8fdb\u961f\u5217\n    vis[sx][sy][sd]=true;//\u522b\u5fd8\u4e86\u6807\u8bb0\u8d77\u59cb\u70b9\u5bf9\u5e94\u7684\u65b9\u5411 \n    q.push(temp);\n    while(!q.empty()){\n        //\u4e4b\u540e\u5c31\u662fbfs\u4e86\uff0c\u679a\u4e3e5\u79cd\u64cd\u4f5c \u5e76\u5224\u65ad\u72b6\u6001\u662f\u5426\u5df2\u88ab\u8bbf\u95ee\u8fc7\uff0c\u6ce8\u610f\u884c\u8d70\u7684\u65f6\u5019\u7684\u5224\u5b9a\u969c\u788d\u95ee\u9898 \n        temp=q.front();\n        q.pop();\n        int nx=temp.x,ny=temp.y;\n        if(nx==ex && ny==ey){printf(\"%d\",temp.step);return 0;}//\u6709\u4e86\u7ed3\u679c\u7acb\u5373\u8f93\u51fa \n        for(int i=1;i<=3;i++){\n            //\u8d701\u6b65~\u8d703\u6b65\n            nx+=dx[temp.direction];ny+=dy[temp.direction];\n            //\u54c7\uff01\u6b64\u9898\u5de8\u5751\uff0c\u673a\u5668\u4eba\u76f4\u5f841.6m... \n            if(nx<1 || nx>=n || ny<1 || ny>=m || map[nx][ny])break; //\u91cd\u70b9\uff0c\u4e0d\u80fd\u8d70\u5230\u8fb9\u754c\uff0c\u4e5f\u4e0d\u80fd\u8d70\u5230\u969c\u788d\u70b9\u6240\u5f71\u54cd\u7684\u70b9\uff0c\u5426\u5219\u5c31\u4e0d\u80fd\u7ee7\u7eed\u8d70\u4e86\uff0c\u8df3\u51fa\u5faa\u73af \n            else if(!vis[nx][ny][temp.direction]){\n                vis[nx][ny][temp.direction]=true;\n                robot cnew;cnew.x=nx;cnew.y=ny;cnew.direction=temp.direction;\n                cnew.step=temp.step+1; \n                q.push(cnew);\n                //printf(\"%d %d - %d %d step:%d\\n\",temp.x,temp.y,cnew.x,cnew.y,cnew.step);\n            }\n        }\n        //\u8f6c\u5411\n        robot cnew;cnew.x=temp.x;cnew.y=temp.y;cnew.step=temp.step+1;\n        cnew.direction=temp.direction-1;\n        if(cnew.direction==-1)cnew.direction=3;//\u5982\u679c\u6211\u4ece\u4e1c\u5411\u897f\u8f6c\uff0c\u90a3\u4e48\u5e94\u8be5\u5230\u5317 \n        if(!vis[cnew.x][cnew.y][cnew.direction]){vis[cnew.x][cnew.y][cnew.direction]=true;q.push(cnew);}\n        cnew.direction=temp.direction+1;\n        if(cnew.direction==4)cnew.direction=0;//\u5982\u679c\u6211\u4ece\u5317\u5411\u4e1c\u8f6c\uff0c\u90a3\u4e48\u5e94\u8be5\u5230\u4e1c \n        if(!vis[cnew.x][cnew.y][cnew.direction]){vis[cnew.x][cnew.y][cnew.direction]=true;q.push(cnew);}\n    }\n    printf(\"-1\");//\u65e0\u89e3 \n    return 0;\n} \n```\n```cpp",
        "postTime": 1505135280,
        "uid": 42381,
        "name": "\u6e05\u51c0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "# \u7ec6\u8282\u5e7f\u641c\uff01\n\n\u8fd9\u9053\u5e7f\u641c\u9898\u662f\u4e00\u9053\u6709\u5173\u56fe\u7684\u904d\u5386\u7684\u9898\uff0c\u5957\u8def\u90fd\u61c2\uff0c\u52a0\u4e2a\u961f\u5217\uff0c\u7136\u540e\u628a\u4f4d\u7f6e\u4e00\u4e2a\u4e00\u4e2a\u585e\u8fdb\u53bb\uff1b\u4f46\u53c8\u6709\u8bb8\u591a\u4e0d\u540c\u7684\u5730\u65b9\uff1a\n\n1. \u673a\u5668\u4eba\u7684\u4e2d\u5fc3\u5728\u683c\u70b9\u4e0a\uff0c\u4e14\u6709\u5bbd\u5ea6\uff0c\u800c\u969c\u788d\u5374\u662f\u5728\u683c\u5b50\u4e0a\uff1b\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\u53ef\u4ee5\u5c06\u5176\u8f6c\u5316\uff0c\u5c06\u5176\u53f3\u4e0a\u89d2\u5f53\u6210\u673a\u5668\u4eba\u7684\u4f4d\u7f6e\u52a0\u5165\u961f\u5217\uff0c\u53ea\u9700\u8981\u4fdd\u8bc1\u5176\u5b83\u4e09\u4e2a\u683c\u5b50\u4e0d\u662f\u969c\u788d\u5373\u53ef\uff1b\n\n2. \u8fb9\u754c\u5904\u7406\uff0c\u56e0\u4e3a\u673a\u5668\u4eba\u662f\u6709\u4f53\u79ef\u7684\uff0c\u800c\u6211\u4eec\u662f\u5c06\u5176\u53f3\u4e0a\u89d2\u5f53\u6210\u5176\u4f4d\u7f6e\u8fdb\u884c\u5e7f\u641c\uff0c\u6240\u4ee5\u8981\u4fdd\u8bc1(x>=1&&x<n&&y>=1&&y<m);\n\n3. \u673a\u5668\u4eba\u6709\u65b9\u5411\uff0c\u4e14\u8f6c\u53d8\u65b9\u5411\u4e5f\u9700\u8981\u65f6\u95f4\uff0c\u800c\u4e14\u8fd8\u53ea\u80fd\u5411\u5de6\u8f6c\u548c\u5411\u53f3\u8f6c\uff0c**\u6240\u4ee5\u8f6c\u5230\u540e\u9762\u9700\u8981\u7684\u65f6\u95f4\u4e3a2\uff1b** \u90a3\u4e48\u6211\u4eec\u5728\u5b9e\u73b0\u4ee3\u7801\u7684\u65f6\u5019\u5c31\u9700\u8981\u5c06\u8f6c\u53d8\u65b9\u5411\u5f53\u6210\u4e00\u4e2a\u72b6\u6001\u52a0\u5165\u961f\u5217\u4e2d\uff1b**\u4f46\u8bb0\u4f4f\u8981\u6309\u65f6\u95f4\u987a\u5e8f\u52a0\u5165\u961f\u5217**\uff08\u8be6\u7ec6\u770b\u4ee3\u7801\uff09\uff1b\n\n4. \u673a\u5668\u4eba\u6709\u4e09\u79cd\u524d\u8fdb\u65b9\u5f0f\uff0c\u52a0\u4e0a\u65b9\u5411\u4e5f\u5c31\u662f\u67093*4=12\u79cd\u884c\u8d70\u65b9\u5f0f\uff1b\n\n\n------------\n\n\n- \u6240\u4ee5\u53ef\u4ee5\u8fd9\u6837\u521d\u59cb\u5316\u884c\u8d70\u65b9\u5f0f\uff1a\n```cpp\nint tx[4][3]={\n\t{-1,-2,-3},//\u5317 \n\t{0,0,0},//\u897f \n\t{1,2,3},//\u5357 \n\t{0,0,0},//\u4e1c \n};\nint ty[4][3]={//\u4e0e\u4e0a\u9762\u5bf9\u5e94\uff1b\n\t{0,0,0},\n\t{-1,-2,-3},\n\t{0,0,0},\n\t{1,2,3},\n};\n```\n\n\n------------\n-  \u90a3\u597d\uff0c\u6709\u4e86\u884c\u8d70\u65b9\u5f0f\u7684\u521d\u59cb\u5316\uff0c\u63a5\u4e0b\u6765\u5c31\u9700\u8981\u4e00\u4e2a\u6570\u7ec4\u6765\u5b58\u50a8\u65b9\u5411\uff1b\u4e0e\u4e0a\u9762\u7684\u6570\u7ec4\u5bf9\u5e94\uff0c0\u2014\u2014\u5317\uff1b1\u2014\u2014\u897f\uff1b2\u2014\u2014\u5357\uff1b3\u2014\u2014\u4e1c\uff1b\u8fd9\u4e2a\u53ef\u4ee5\u5728\u961f\u5217\u6570\u7ec4\u4e2d\u591a\u52a0\u4e00\u7ef4\u6765\u5b9e\u73b0\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7\u5bf9\u7236\u5bf9\u8c61\u65b9\u5411\u7684\u52a0\u51cf\u6765\u5b9e\u73b0\u65b9\u5411\u7684\u6539\u53d8\uff1b\u8fd9\u5c31\u662f\u6211\u8bbe\u7f6e\u7684\u961f\u5217\uff1a\n```cpp\nint f[1000005][5];//0\u8be5\u961f\u5217\u5143\u7d20\u662f\u5426\u662f\u901a\u8fc7\u65cb\u8f6c\u5f97\u6765\uff1b1\u8bb0\u5f55x\uff0c2\u8bb0\u5f55y\uff0c3\u8bb0\u5f55\u65b9\u5411,4\u8bb0\u5f55\u65f6\u95f4\uff1b\n```\n\n\n------------\n- \u63a5\u4e0b\u6765\u5c31\u662f\u4e3b\u51fd\u6570\u91cc\u7684\u4e1c\u897f\u4e86\uff1b\n```cpp\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)//\u8bfb\u5165\u5730\u56fe\uff1b \n\t\t\tcin>>map[i][j];\n\tchar c;\n\tcin>>f[1][1]>>f[1][2];//\u8d77\u59cb\u4f4d\u7f6e \uff1b \n\tmap[f[1][1]][f[1][2]]=2;//\u6ce8\u610f\uff1a1\u4e3a\u969c\u788d\u7269\uff0c2\u8868\u793a\u673a\u5668\u4eba\u6765\u8fc7\uff1b \n\tcin>>fx>>fy;//\u7ec8\u70b9\uff1b \n\tcin>>c;\n\tif(f[1][1]==fx&&f[1][2]==fy){//\u8fd9\u662f\u4e00\u4e2a\u5751\u70b9\uff1b\u5f53\u7ec8\u70b9\u4e0e\u8d77\u59cb\u4f4d\u7f6e\u91cd\u5408\u7684\u65f6\u5019\uff1b \n\t\tcout<<0;\n\t\treturn 0;\n\t}\n\tif(c=='N') f[1][3]=0;//\u521d\u59cb\u5316\u65b9\u5411\uff1b \n\tif(c=='W') f[1][3]=1;\n\tif(c=='S') f[1][3]=2;\n\tif(c=='E') f[1][3]=3;\n\tbfs();\t\t\n\treturn 0;\n}\n```\n\n\n------------\n- \u5f00\u59cbbfs,\u5206\u4e3a\u4e09\u90e8\u5206\uff1a\n\n1. \u524d\u8fdb\uff1a\n```\nvoid bfs()\n{\n\tint head=0,tail=1;\n\twhile(head<tail){\n\t\thead++;\n\t\tint i=0;\n\t\tfor(i=0;i<=2;i++){//3\u79cd\u79fb\u52a8\u60c5\u51b5\uff1b\u4ece\u524d\u8fdb1\u6b65\u5f00\u59cb\uff1b \n\t\t\tint xx=f[head][1]+tx[f[head][3]][i];\n\t\t\tint yy=f[head][2]+ty[f[head][3]][i];\n\t\t\tif(map[xx+1][yy]==1||map[xx][yy+1]==1||map[xx+1][yy+1]==1||map[xx][yy]==1) break;//\u5982\u679c\u524d\u8fdb\u66f4\u5c0f\u7684\u6b65\u6570\u90fd\u4f1a\u9047\u5230\u969c\u788d\uff0c\u90a3\u5927\u6b65\u6570\u5c31\u4e0d\u9700\u8981\u52a0\u5165\u961f\u5217\u4e86\uff1b\u8fd9\u6837\u53ef\u4ee5\u89e3\u51b3\u8df3\u8fc7\u969c\u788d\u7269\u7684\u60c5\u51b5\uff1b \n\t\t\tif(xx>=1&&xx<n&&yy>=1&&yy<m&&map[xx][yy]==0){//\u8fb9\u754c \n\t\t\t\tmap[xx][yy]=2;//\u8bbe\u7f6e\u4e3a\u6765\u8fc7\uff1b \n\t\t\t\ttail++;\n\t\t\t\tf[tail][1]=xx;\n\t\t\t\tf[tail][2]=yy;\n\t\t\t\tf[tail][3]=f[head][3];//\u65b9\u5411\u4e0d\u53d8\uff1b \n\t\t\t\tf[tail][4]=f[head][4]+1;//\u65f6\u95f4+1\uff1b \n\t\t\t\tif(xx==fx&&yy==fy){\n\t\t\t\t\tcout<<f[tail][4];//\u5230\u8fbe\u7ec8\u70b9\uff1b \n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n```\n\n\n------------\n\n2. \u8f6c\u5411\uff1a\n```cpp\nif(f[head][0]!=2){//\u8981\u904d\u53864\u4e2a\u65b9\u5411\u8981\u65cb\u8f6c2\u6b21\uff1b\u4f46\u8fd9\u6837\u6709\u4e2a\u95ee\u9898\uff1a\u8fd9\u6837\u6bcf\u4e2a\u65b9\u5411\u90fd\u4f1a\u52a0\u5165\u961f\u52172\u6b21\uff0c\u4f46\u5982\u679c\u4e0d\u8fd9\u6837\u5c31\u9700\u8981\u4e00\u4e2a3\u7ef4\u6570\u7ec4\u6765\u8bb0\u5f55\u6bcf\u4e2a\u65b9\u5411\u662f\u5426\u6765\u8fc7\uff1b\u56e0\u4e3a\u6570\u636e\u6bd4\u8f83\u5c0f\uff0c\u6240\u4ee5\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u53ef\u53d6\uff1b\u6240\u4ee5\u6211\u9009\u62e9\u4e86\u4ee3\u7801\u8f83\u7b80\u6d01\u7684\u4e00\u79cd\uff1b \n\t\t\tfor(int j=1;j<=3;j++){//\u65cb\u8f6c\uff0c\u5f53\u4e3a1\u7684\u65f6\u5019\u5411\u5de6\u8f6c\uff0c\u4e3a3\u7684\u65f6\u5019\u5411\u53f3\u8f6c\uff1b \n\t\t\t\tif(j!=2){\n\t\t\t\t\ttail++;\n\t\t\t\t\tf[tail][1]=f[head][1];//\u4f4d\u7f6e\u4e0d\u53d8\uff1b \n\t\t\t\t\tf[tail][2]=f[head][2];\n\t\t\t\t\tf[tail][3]=(f[head][3]+j)%4;//\u6539\u53d8\u65b9\u5411\uff1b \n\t\t\t\t\tf[tail][4]=f[head][4]+1;//\u65f6\u95f4+1\uff1b \n\t\t\t\t\tf[tail][0]=f[head][0]+1;//\u6807\u8bb0\u6b64\u5143\u7d20\u7531\u65cb\u8f6c\u5f97\u6765\uff1b\u5f53\u6b64\u5143\u7d20\u662f\u7531\u65cb\u8f6c\u8fc7\u4e00\u6b21\u7684\u5143\u7d20\u5f97\u6765\u65f6\uff0c\u6b64\u5143\u7d20\u5c06\u4e0d\u518d\u8fdb\u884c\u65cb\u8f6c\uff1b\u6b64\u65f6f[.][0]==2; \n\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n```\n\n\n------------\n\n- \u6ce8:\u8fd9\u6709\u4e2a\u6211\u7684\u9519\u8bef\u793a\u8303\uff0c\u5c06\u53e6\u59163\u4e2a\u65b9\u5411\u4e00\u6b21\u6027\u52a0\u5165\u961f\u5217\uff0c\u5411\u540e\u7684\u5728\u65f6\u95f4\u4e0a\u52a02\uff1a\n```cpp\nif(!f[head][0]){\n\tfor(int j=1;j<=3;j++){\n\t\ttail++;\n\t\tf[tail][1]=f[head][1]; \n\t\tf[tail][2]=f[head][2];\n\t\tf[tail][3]=(f[head][3]+j)%4; \n\t\tif(j==2) f[tail][4]=f[head][4]+2;//\u5411\u540e\u8f6c\u65f6\u95f4\u52a02\uff1b\n\t\telse f[tail][4]=f[head][4]+1; \n\t\tf[tail][0]=f[head][0]+1;\n\t}\n}\n```\n\u8fd9\u6837\u4e3a\u4ec0\u4e48\u4e0d\u884c\u5462.\u56e0\u4e3a\u672c\u9898\u662f\u627e\u5230\u65f6\u95f4\u4e0a\u7684\u6700\u4f18\u89e3\uff0c\u6240\u4ee5\u5143\u7d20\u52a0\u5165\u961f\u5217\u65f6\u4e5f\u8981\u6309\u7167\u65f6\u95f4\u987a\u5e8f\u6765\uff0c\u8fd9\u6837\u5728\u5230\u8fbe\u7ec8\u70b9\u662f\u65f6\u95f4\u4e0a\u4e5f\u4f1a\u662f\u6700\u4f18\u7684\uff1b\u5982\u679c\u6309\u7167\u4e0a\u9762\u8fd9\u6837\u6765\u90a3\u53ef\u80fd\u6b65\u9aa4\u4e0a\u662f\u6700\u4f18\u7684\uff0c\u4f46\u65f6\u95f4\u4e0a\u4e0d\u4e00\u5b9a\u6700\u4f18\uff1b\n\n------------\n\n3. \u6700\u540e\u65e0\u6cd5\u5230\u8fbe\uff1a\n```cpp\n\tcout<<-1;\n}\n```\n\n\n------------\n### \u5b8c\u6574AC\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\nusing namespace std;\nint tx[4][3]={\n\t{-1,-2,-3},//\u5317 \n\t{0,0,0},//\u897f \n\t{1,2,3},//\u5357 \n\t{0,0,0},//\u4e1c \n};\nint ty[4][3]={\n\t{0,0,0},\n\t{-1,-2,-3},\n\t{0,0,0},\n\t{1,2,3},\n};\nint n,m,fx,fy;\nint map[55][55];\nint f[1000005][5];//1\u8bb0\u5f55x\uff0c2\u8bb0\u5f55y\uff0c3\u8bb0\u5f55\u65b9\u5411,0\u6307\u5411\u7236\u5bf9\u8c61,4\u8bb0\u5f55\u65f6\u95f4\uff1b\nvoid bfs(); \nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)//\u8bfb\u5165\u5730\u56fe\uff1b \n\t\t\tcin>>map[i][j];\n\tchar c;\n\tcin>>f[1][1]>>f[1][2];//\u8d77\u59cb\u4f4d\u7f6e \uff1b \n\tmap[f[1][1]][f[1][2]]=2;//\u6ce8\u610f\uff1a1\u4e3a\u969c\u788d\u7269\uff0c2\u8868\u793a\u673a\u5668\u4eba\u6765\u8fc7\uff1b \n\tcin>>fx>>fy;//\u7ec8\u70b9\uff1b \n\tcin>>c;\n\tif(f[1][1]==fx&&f[1][2]==fy){//\u8fd9\u662f\u4e00\u4e2a\u5751\u70b9\uff1b\u5f53\u7ec8\u70b9\u4e0e\u8d77\u59cb\u4f4d\u7f6e\u91cd\u5408\u7684\u65f6\u5019\uff1b \n\t\tcout<<0;\n\t\treturn 0;\n\t}\n\tif(c=='N') f[1][3]=0;//\u521d\u59cb\u5316\u65b9\u5411\uff1b \n\tif(c=='W') f[1][3]=1;\n\tif(c=='S') f[1][3]=2;\n\tif(c=='E') f[1][3]=3;\n\tbfs();\t\t\n\treturn 0;\n}\nvoid bfs()\n{\n\tint head=0,tail=1;\n\twhile(head<tail){\n\t\thead++;\n\t\tint i=0;\n\t\tfor(i=0;i<=2;i++){//3\u79cd\u79fb\u52a8\u60c5\u51b5\uff1b\u4ece\u524d\u8fdb1\u6b65\u5f00\u59cb\uff1b \n\t\t\tint xx=f[head][1]+tx[f[head][3]][i];\n\t\t\tint yy=f[head][2]+ty[f[head][3]][i];\n\t\t\tif(map[xx+1][yy]==1||map[xx][yy+1]==1||map[xx+1][yy+1]==1||map[xx][yy]==1) break;//\u5982\u679c\u524d\u8fdb\u66f4\u5c0f\u7684\u6b65\u6570\u90fd\u4f1a\u9047\u5230\u969c\u788d\uff0c\u90a3\u5927\u6b65\u6570\u5c31\u4e0d\u9700\u8981\u52a0\u5165\u961f\u5217\u4e86\uff1b\u8fd9\u6837\u53ef\u4ee5\u89e3\u51b3\u8df3\u8fc7\u969c\u788d\u7269\u7684\u60c5\u51b5\uff1b \n\t\t\tif(xx>=1&&xx<n&&yy>=1&&yy<m&&map[xx][yy]==0){//\u8fb9\u754c \n\t\t\t\tmap[xx][yy]=2;//\u8bbe\u7f6e\u4e3a\u6765\u8fc7\uff1b \n\t\t\t\ttail++;\n\t\t\t\tf[tail][1]=xx;\n\t\t\t\tf[tail][2]=yy;\n\t\t\t\tf[tail][3]=f[head][3];//\u65b9\u5411\u4e0d\u53d8\uff1b \n\t\t\t\tf[tail][4]=f[head][4]+1;//\u65f6\u95f4+1\uff1b \n\t\t\t\tif(xx==fx&&yy==fy){\n\t\t\t\t\tcout<<f[tail][4];//\u5230\u8fbe\u7ec8\u70b9\uff1b \n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(f[head][0]!=2){//\u8981\u904d\u53864\u4e2a\u65b9\u5411\u8981\u65cb\u8f6c2\u6b21\uff1b\u4f46\u8fd9\u6837\u6709\u4e2a\u95ee\u9898\uff1a\u8fd9\u6837\u6bcf\u4e2a\u65b9\u5411\u90fd\u4f1a\u52a0\u5165\u961f\u52172\u6b21\uff0c\u4f46\u5982\u679c\u4e0d\u8fd9\u6837\u5c31\u9700\u8981\u4e00\u4e2a3\u7ef4\u6570\u7ec4\u6765\u8bb0\u5f55\u6bcf\u4e2a\u65b9\u5411\u662f\u5426\u6765\u8fc7\uff1b\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u53ef\u53d6\uff1b\u6240\u4ee5\u6211\u9009\u62e9\u4e86\u4ee3\u7801\u8f83\u7b80\u6d01\u7684\u4e00\u79cd\uff1b \n\t\t\tfor(int j=1;j<=3;j++){//\u65cb\u8f6c\uff0c\u5f53\u4e3a1\u7684\u65f6\u5019\u5411\u5de6\u8f6c\uff0c\u4e3a3\u7684\u65f6\u5019\u5411\u53f3\u8f6c\uff1b \n\t\t\t\tif(j!=2){\n\t\t\t\t\ttail++;\n\t\t\t\t\tf[tail][1]=f[head][1];//\u4f4d\u7f6e\u4e0d\u53d8\uff1b \n\t\t\t\t\tf[tail][2]=f[head][2];\n\t\t\t\t\tf[tail][3]=(f[head][3]+j)%4;//\u6539\u53d8\u65b9\u5411\uff1b \n\t\t\t\t\tf[tail][4]=f[head][4]+1;//\u65f6\u95f4+1\uff1b \n\t\t\t\t\tf[tail][0]=f[head][0]+1;//\u6807\u8bb0\u6b64\u5143\u7d20\u7531\u65cb\u8f6c\u5f97\u6765\uff1b\u5f53\u6b64\u5143\u7d20\u662f\u7531\u65cb\u8f6c\u8fc7\u4e00\u6b21\u7684\u5143\u7d20\u5f97\u6765\u65f6\uff0c\u6b64\u5143\u7d20\u5c06\u4e0d\u518d\u8fdb\u884c\u65cb\u8f6c\uff1b\u6b64\u65f6f[.][0]==2; \n\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<-1;//\u961f\u5217\u4e3a\u7a7a\u4e86\uff0c\u65e0\u6cd5\u62b5\u8fbe\uff1b\n}\n```\n\n\n------------\n\u89c1\u672c\u9898\u4ee3\u7801\u601d\u8def\u4e0e\u5176\u4ed6\u9898\u89e3\u4e0d\u540c\uff0c\u6545\u5fc3\u8840\u6765\u6f6e\u53d1\u4e2a\u9898\u89e3\u8868\u8fbe\u4e00\u4e0b\u81ea\u5df1\u6fc0\u52a8\u7684\u5185\u5fc3\uff08~~\u554a\u54c8~~\uff09\uff0c\u987a\u4fbf\u5206\u4eab\u4e00\u4e0b\u601d\u8def\uff1b\n\n\u672c\u849f\u84bb\u521d\u5b66\u7f16\u7a0b\uff0c\u5199\u7684\u4e0d\u597d\u8fd8\u8bf7\u89c1\u8c05\uff1b",
        "postTime": 1566702464,
        "uid": 224436,
        "name": "zfz04",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "BFS\u6a21\u677f\u9898\u2026\u2026\n\n\u9898\u89e3\u91cc\u5927\u591a\u662fBFS\u505a\u6cd5\uff0c\u5728\u6b64\u7565\u8fc7\u3002\n\n ~~\u90a3\u4e48\u5c31\u7528DFS\u4f5c\u4e2a\u6b7b\u597d\u4e86~~\n\n---\n\n## DFS\u7b2c\u4e00\u6b65\uff1a\u6b63\u786e\u4f46\u65f6\u95f4\u7206\u70b8\u7684\u5199\u6cd5\n\n\u6ce8\u610f\uff1a\u8fd9\u9053\u9898\u8981\u628a\u7f51\u683c\u56fe\u8f6c\u5316\u6210\u70b9\u56fe\uff0c\u6240\u4ee5\u5b9e\u9645\u7684\u56fe\u7684\u5927\u5c0f\u4e3a$\\mathsf{(N+1)\\times(M+1)}$\u3002\u4e8e\u662f\u6211\u7528\u4e86$\\mathsf{a[0][0]}$ ~ $\\mathsf{a[N][M]}$\u6765\u5b58\u70b9\u56fe\u3002\n\n**\u8981\u6ce8\u610f\u8fb9\u754c\uff01\uff01\uff01\u673a\u5668\u4eba\u7684\u4e2d\u5fc3\u4e0d\u80fd\u8d34\u7740\u5899\uff01\uff01\uff01**\u6bd4\u5982\u5982\u679c\u50cf\u6211\u4e00\u6837\u5b58\u56fe\uff0c\u90a3\u4e48\u80fd\u8d70\u5230\u7684\u8303\u56f4\u5c31\u662f$\\mathsf{(1,1)}$ ~ $\\mathsf{(N-1,M-1)}$\u3002\n\n```\nint a[55][55];   //\u5b58\u662f\u5426\u6709\u969c\u788d\n\nint stX,stY,stD; //\u8d77\u70b9\nint enX,enY;     //\u7ec8\u70b9\nint ans=INF;     //\u7b54\u6848\n\nvoid dfs(int X,int Y,int D,int dep) \n{     //\u7b2cX\u884c\uff0c\u7b2cY\u5217\uff0c\u65b9\u5411\u4e3aD(0123\u5bf9\u5e94ESWN)\uff0c\u9012\u5f52\u6df1\u5ea6(\u8ddd\u79bb)\u4e3adep\n\tif(X==enX && Y==enY)\n\t{\n\t\tans=min(ans,dep);\n\t\treturn;\n\t}\n    \n    dfs(X,Y,(D+1)%4,dep+1);\n    dfs(X,Y,(D+3)%4,dep+1);\n    \n    if(D==0)\n    {\n    \tif(Y+1<M && a[X][Y+1]==0) \t\t\t\t\t\t\t\t\tdfs(X,Y+1,D,dep+1);        \t\n    \tif(Y+2<M && a[X][Y+1]==0 && a[X][Y+2]==0) \t\t\t\t\tdfs(X,Y+2,D,dep+1);    \t    \t\n    \tif(Y+3<M && a[X][Y+1]==0 && a[X][Y+2]==0 && a[X][Y+3]==0) \tdfs(X,Y+3,D,dep+1); \n    }\n    if(D==1) ...\n\tif(D==2) ...\n\tif(D==3) ...\n}\n\nint tsl(char Dir)\n{\n    switch(Dir)\n    {\n        case 'E': return 0;\n        case 'S': return 1;\n        case 'W': return 2;\n        case 'N': return 3;\n        default: assert(0);\n    }\n}\n\nint main()\n{\n    cin>>N>>M;\n    for(int i=1;i<=N;i++)\n    {\n        for(int j=1;j<=M;j++)\n        {\n            int tmp; cin>>tmp;\n            if(tmp==1)\n            {\n                a[i-1][j-1]=a[i-1][j]=a[i][j-1]=a[i][j]=1;\n            }\n        }\n    }\n    \n    cin>>stX>>stY>>enX>>enY;\n    char tmp; cin>>tmp;\n    stD=tsl(tmp);\n    \n    dfs(stX,stY,stD,0);\n    \n    if(ans==INF) ans=-1;\n    cout<<ans<<endl;\n\n    return 0;\n}\n```\n\n\u5f88\u663e\u7136\uff0c\u8fd9\u6837\u4f1a\u65e0\u9650\u9012\u5f52\u7206\u6808\u3002\n\n\u6240\u4ee5\u8bf4\n## DFS\u7b2c\u4e8c\u6b65\uff1a\u7565\u5fae\u6539\u8fdb\u907f\u514d\u65e0\u9650\u9012\u5f52\n\u52a0\u4e00\u4e2amindis\u6570\u7ec4\uff0c$\\mathsf{mindis[X][Y][D]}$\u8868\u793a\u76ee\u524d\u5df2\u7ecf\u641c\u5230\u7684\u5230 { $\\mathsf{X,Y,D}$ } \u7684\u6700\u5c0f\u8ddd\u79bb\n\n```\nint mindis[55][55][5];\n\nvoid dfs(...)\n{\n\tif(dep>=mindis[X][Y][D]) return;\n    mindis[X][Y][D]=dep;\n    \n    ...\n}\n\nint main()\n{\n\t...\n    for(int i=0;i<=N;i++)\n    {\n    \tfor(int j=0;j<=M;j++)\n        {\n        \tfor(int k=0;k<4;k++)\n            {\n            \tmindis[i][j][k]=INF;\n            }\n        }\n    }\n\t...\n}\n```\n\u4e8e\u662f\u5c31\u670990\u5206\u4e86\u3002\u7b2c\u4e5d\u4e2a\u70b9\u5927\u6982\u662f\u5361DFS\u7684\uff1f\u5176\u4ed6\u7684\u70b9\u52a0\u8d77\u6765\u4e0d\u523060ms\u3002\n\n## DFS\u7b2c\u4e09\u6b65\uff1a\u5bf9\u9012\u5f52\u8fc7\u7a0b\u8fdb\u884c\u73c2\u5b66\u5206\u6790\u5e76\u4f18\u5316\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u539f\u6765\u7684DFS\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u9996\u5148\u8fdb\u884c\u7684\u9012\u5f52\u8c03\u7528DFS\u662f\u8fdb\u884c\u65cb\u8f6c\u64cd\u4f5c\u3002\u800c\u8fd9\u6837\u4f1a\u8fde\u7eed\u8f6c\u4e09\u6b21\u540e\u624d\u4f1a\u88abmindis\u7684\u5224\u65ad\u7ed9return\u6389\u800c\u8fdb\u884c\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002\n\n\u4e8e\u662f\u6211\u4eec\u521a\u5f00\u59cb\u8dd1\u51fa\u6765\u7684\u8def\u7ebf\u5927\u591a\u90fd\u662f\u539f\u5730\u8f6c\u4e09\u4e0b\u5f80\u524d\u8d70\u4e00\u6b65\u8fd9\u6837\u8d70\u8fc7\u53bb\u7684\uff0c\u80af\u5b9a\u4e0d\u662f\u6700\u4f18\u65b9\u6848\uff0cmindis\u6570\u7ec4\u6ca1\u6709\u5f97\u5230\u6700\u5927\u9650\u5ea6\u7684\u5229\u7528\u3002\n\n\u800c\u8fdb\u4e00\u6b65\u5206\u6790\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u9664\u4e86\u8d77\u70b9\u4ee5\u5916\u7684\u70b9\uff0c\u6211\u4eec\u90fd\u5e94\u5f53\u53ea\u8fdb\u884c\u4e00\u6b21\u65cb\u8f6c\u4e4b\u540e\u5411\u5176\u4ed6\u683c\u5b50\u8d70\u3002\n\n\u4e8e\u662f\u5c31\u6709\u4e86\u8fd9\u6837\u7684\u4f18\u5316\uff1a\n\nDFS\u53c2\u6570\u52a0\u4e00\u4e2abool tr\uff0c\u8868\u793a\u8fd9\u4e00\u6b21\u64cd\u4f5c\u80fd\u5426\u65cb\u8f6c\u64cd\u4f5c\uff08\u6839\u636e\u4e0a\u4e00\u6b21\u662f\u5426\u4e3a\u65cb\u8f6c\u51b3\u5b9a\u3002\n\n\u5411\u524d\u8d70\u7684\u65f6\u5019\uff0c\u4e5f\u53ef\u4ee5\u5148\u5c1d\u8bd5\u8d703\u6b65\uff08\u867d\u7136\u5176\u5b9e\u4e5f\u6ca1\u592a\u5927\u7528\u5904\u5566\u2026\u2026\uff09\n\nAC Code:\n```\n#include<bits/stdc++.h>\nusing namespace std;\n\n// E S W N\n// 0 1 2 3\n\nconst int INF=1e9+7;  \n\nint N,M;\nint a[55][55];\n\nint stX,stY,stD;\nint enX,enY;\nint ans=INF;\n\nint mindis[55][55][55];\n\nvoid dfs(int X,int Y,int D,int dep,bool tr)\n{\n    if(X==enX && Y==enY)\n    {\n        ans=min(ans,dep);\n        return;\n    }\n    \n    if(dep>=mindis[X][Y][D]) return;\n    mindis[X][Y][D]=dep;\n    \n    if(tr) dfs(X,Y,(D+1)%4,dep+1,false);\n    if(tr) dfs(X,Y,(D+3)%4,dep+1,false);\n    \n    if(D==0)\n    {\n    \tif(Y+3<M && a[X][Y+1]==0 && a[X][Y+2]==0 && a[X][Y+3]==0) \tdfs(X,Y+3,D,dep+1,true); \n    \tif(Y+2<M && a[X][Y+1]==0 && a[X][Y+2]==0) \t\t\t\t\tdfs(X,Y+2,D,dep+1,true);    \t\n    \tif(Y+1<M && a[X][Y+1]==0) \t\t\t\t\t\t\t\t\tdfs(X,Y+1,D,dep+1,true);    \t\n    }\n    if(D==1)\n    {\n    \tif(X+3<N && a[X+1][Y]==0 && a[X+2][Y]==0 && a[X+3][Y]==0)\tdfs(X+3,Y,D,dep+1,true); \n    \tif(X+2<N && a[X+1][Y]==0 && a[X+2][Y]==0)\t\t\t\t\tdfs(X+2,Y,D,dep+1,true);    \t\n    \tif(X+1<N && a[X+1][Y]==0)\t\t\t\t\t\t\t\t\tdfs(X+1,Y,D,dep+1,true);    \t\n    }\n    if(D==2)\n    {\n    \tif(Y-3>0 && a[X][Y-1]==0 && a[X][Y-2]==0 && a[X][Y-3]==0)\tdfs(X,Y-3,D,dep+1,true); \n    \tif(Y-2>0 && a[X][Y-1]==0 && a[X][Y-2]==0)\t\t \t\t\tdfs(X,Y-2,D,dep+1,true);    \n    \tif(Y-1>0 && a[X][Y-1]==0) \t\t\t\t\t\t\t\t\tdfs(X,Y-1,D,dep+1,true);\t\t\t\n    }\n    if(D==3)\n    {\n    \tif(X-3>0 && a[X-1][Y]==0 && a[X-2][Y]==0 && a[X-3][Y]==0) \tdfs(X-3,Y,D,dep+1,true); \n    \tif(X-2>0 && a[X-1][Y]==0 && a[X-2][Y]==0) \t\t\t\t\tdfs(X-2,Y,D,dep+1,true); \n    \tif(X-1>0 && a[X-1][Y]==0) \t\t\t\t\t\t\t\t\tdfs(X-1,Y,D,dep+1,true);\t\t   \t\n    }\n}\n\nint tsl(char Dir)\n{\n    switch(Dir)\n    {\n        case 'E': return 0;\n        case 'S': return 1;\n        case 'W': return 2;\n        case 'N': return 3;\n        default: assert(0);\n    }\n}\n\nint main()\n{\n    cin>>N>>M;\n    for(int i=1;i<=N;i++)\n    {\n        for(int j=1;j<=M;j++)\n        {\n            int tmp; cin>>tmp;\n            if(tmp==1)\n            {\n                a[i-1][j-1]=a[i-1][j]=a[i][j-1]=a[i][j]=1;\n            }\n        }\n    }\n    \n    cin>>stX>>stY>>enX>>enY;\n    char tmp; cin>>tmp;\n    stD=tsl(tmp);\n    \n    for(int i=0;i<=N;i++)\n    {\n    \tfor(int j=0;j<=M;j++)\n    \t{\n    \t\tfor(int k=0;k<4;k++)\n    \t\t{\n    \t\t\tmindis[i][j][k]=INF;\n    \t\t}\n    \t}\n    }\n    \n    dfs(stX,stY,(stD+2)%4,2,true); //\u8d77\u70b9\u65f6\u53ef\u80fd\u8fde\u7eed\u65cb\u8f6c\u4e24\u6b21\uff0c\u7279\u5224\u4e00\u4e0b\n    dfs(stX,stY,stD,0,true);\n    \n    if(ans==INF) ans=-1;\n    cout<<ans<<endl;\n\n    return 0;\n}\n\n```\n$$ $$\nEND~\n\n\u5176\u5b9e\u2026\u2026\u8fd9\u79cd\u9898\u8fd8\u662fBFS\u6bd4\u8f83\u7a33\u554a233\u2026\u2026\n\n\u7ba1\u7406\u5927\u5927\u6c42\u8fc7QWQ",
        "postTime": 1544797868,
        "uid": 82472,
        "name": "CHHC",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 [ \u673a\u5668\u4eba\u642c\u91cd\u7269 ]"
    },
    {
        "content": "bfs\u6c42\u6700\u77ed\u8def\u5e94\u7528\n\n\u53ea\u4e0d\u8fc7\u72b6\u6001\u591a\u4e86\u4e2a\u65b9\u5411\uff0c\u4f46\u6570\u636e\u8fd8\u662f\u6bd4\u8f83\u5751\u7684\uff0c\u8fd8\u6709\u5c31\u662f\u673a\u5668\u4eba\u7684\u4f53\u79ef\u9700\u8981\u8003\u8651\n\n\u672c\u9898\u4e3b\u8981\u6ce8\u610f\u4e00\u4e0b\u51e0\u70b9\n\n1 \u4f53\u79ef\u95ee\u9898\n\n2 \u8d77\u70b9\u7ec8\u70b9\u91cd\u5408\n\n3 \u8d77\u70b9\u969c\u788d\n\n4 n,m\u4e0d\u8981\u5f04\u6df7\uff01\n\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<queue>\n#include<map>\nusing namespace std;\nmap<char,int>f;        //\u6211\u6bd4\u8f83\u61d2\u76f4\u63a5\u7528map\u4fdd\u5b58\u65b9\u5411\u7f16\u53f7\u5176\u5b9e\u53ef\u4ee5\u76f4\u63a5\u5224\u65ad \nint dx[]={0,1,0,-1};//\u79fb\u52a8\u6570\u7ec4 \nint dy[]={1,0,-1,0};//\u6ce8\u610f\u6309\u987a\u5e8f\u4fdd\u5b58 \nint g[55][55];\nint cnt,n,m,x0,y0,x1,y1,ans=-1;\nstruct cur{\n    int x,y,fx;                            //\u7528\u7ed3\u6784\u4f53\u4fdd\u5b58\u72b6\u6001 \n    bool operator < (const cur &b)const{//\u56e0\u4e3a\u8981\u7528map\u5bb9\u5668\u9700\u8981\u91cd\u8f7d\u5c0f\u4e8e\u53f7 \n        if(x!=b.x)return x<b.x;\n        if(y!=b.y)return y<b.y;\n        if(fx!=b.fx)return fx<b.fx;\n        return 0;\n    }\n};\ncur init;                    //inIt\u4e3a\u521d\u59cb\u72b6\u6001 \nmap<cur,int>vis;            //\u7528map\u4fdd\u5b58\u72b6\u6001\u662f\u5426\u8bbf\u95ee\u8fc7 \nbool check(int x,int y){    //\u5229\u7528\u5de6\u4e0a\u89d2\u7684\u5750\u6807\u68c0\u67e5\u662f\u5426\u7b26\u5408\u9898\u610f \n    int tx=x,ty=y;            \n    for(int i=0;i<4;i++){    //\u56e0\u4e3a\u673a\u5668\u4eba\u6709\u4f53\u79ef\u9700\u8981\u8003\u8651\u56db\u4e2a\u4f4d\u7f6e \n        tx+=dx[i],ty+=dy[i];\n        if(tx<=0||tx>n||ty<=0||ty>m)return 0;            //\u8d8a\u754c\u4e0d\u7b26\u5408 \n        if(tx>0&&tx<=n&&ty>0&&ty<=m&&g[tx][ty])return 0;//\u6ca1\u6709\u8d8a\u754c\u4f46\u662f\u6709\u969c\u788d\u4e0d\u7b26\u5408 \n    }\n    return 1;//\u5176\u4f59\u60c5\u51b5\u7b26\u5408 \n}\nvoid bfs(){                                    //bfs\u90e8\u5206 \n    queue<cur>q;\n    q.push(init);\n    vis[init]=1;                            //\u521d\u59cb\u72b6\u6001\u8bbe\u4e3a\u4e00\u6b65\u6700\u540e\u5f97\u5230\u7b54\u6848\u9700\u8981\u51cf\u4e00 \n    while(!q.empty()){\n        cur nw=q.front();q.pop();\n        int tx=nw.x,ty=nw.y;\n        for(int i=1;i<=3;i++){                //\u8ba8\u8bba\u673a\u5668\u4eba\u5411\u524d\u8d70\u540e\u5f97\u5230\u7684\u72b6\u6001 \n            tx+=dx[nw.fx];ty+=dy[nw.fx];    \n            cur tt=nw;tt.x=tx,tt.y=ty;\n            if(!check(tx,ty))break;            //\u5982\u679c\u524d\u51e0\u6b65\u4e0d\u6ee1\u8db3\u5219\u540e\u7eed\u4e00\u5b9a\u4e0d\u6ee1\u8db3\u8df3\u51fa\u5faa\u73af \n            else if(!vis[tt]){                //\u82e5\u8be5\u72b6\u6001\u672a\u8bbf\u95ee\u8fdb\u884c\u8bbf\u95ee\u63a8\u5165\u961f\u5217 \n                    vis[tt]=vis[nw]+1;        //\u8bb0\u5f55\u6b65\u6570 \n                    if(tt.x==x1&&tt.y==y1){    //\u82e5\u8be5\u72b6\u6001\u4e3a\u76ee\u6807\u72b6\u6001 \n                        ans=vis[tt]-1;        // \u51cf\u4e00\u5f97\u5230\u7b54\u6848\u8df3\u51fa\u5faa\u73af \n                        return ;\n                    }\n                    q.push(tt);\n            }\n        }\n        for(int i=-1;i<=1;i++){                //\u8003\u8651\u8f6c\u5411\u60c5\u51b5 \n            if(!i)continue;                    //\u4e3a0\u65f6\u6ca1\u6709\u6539\u53d8 \n            cur tt=nw;tt.fx=(tt.fx+i+4)%4;    //\u52a0\u6a21\u518d\u53d6\u6a21\u9632\u6b62\u4e3a\u65b9\u5411\u7f16\u53f7\u4e3a\u8d1f \n            if(!vis[tt]){\n                q.push(tt);                    //\u672a\u8bbf\u95ee\u8fdb\u884c\u8bbf\u95ee\u63a8\u5165\u961f\u5217 \n                vis[tt]=vis[nw]+1;            //\u8bb0\u5f55\u6b65\u6570 \n            }\n        }\n    }\n}\nint main(){\n    std::ios::sync_with_stdio(false);        //\u52a0\u901fcin,cout \n    cin>>n>>m;\n    f['E']=0;f['S']=1;f['W']=2;f['N']=3;    //\u5bf9\u65b9\u5411\u8fdb\u884c\u6807\u53f7 \n    for(int x=1;x<=n;x++)                    //\u5b58\u56fe \n    for(int y=1;y<=m;y++)\n    cin>>g[x][y];\n    char fx;\n    cin>>x0>>y0>>x1>>y1>>fx;                //\u521d\u59cb\u5316\u521d\u59cb\u72b6\u6001 \n    init.x=x0;init.y=y0;init.fx=f[fx];\n    if(x0==x1&&y0==y1)cout<<\"0\";            //\u7279\u5224\u662f\u5426\u8d77\u70b9\u7ec8\u70b9\u91cd\u5408\n    else if(!check(x0,y0))cout<<\"-1\"; \n    else {\n        bfs();                                //\u5426\u5219\u8fdb\u884cbfs\u5bfb\u627e\u7b54\u6848 \n        cout<<ans;\n    }\n    return 0;\n}\n```",
        "postTime": 1506157965,
        "uid": 45556,
        "name": "FFF\u56e2",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "## \u3010\u9898\u610f\u3011\n\n\u5728\u4e00\u4e2a\u77e9\u9635\u4e2d\uff0c\u6709\u4e00\u4e9b\u683c\u5b50\u4e0d\u80fd\u8d70\uff0c\u6c42\u8d77\u70b9\u5230\u91cd\u70b9\u7684\u6700\u77ed\u8def\u3002\u6709\u591a\u79cd\u884c\u8fdb\u65b9\u5f0f\u3002\n\n- \u5411\u524d\u79fb\u52a81\u6b65\n\n- \u5411\u524d\u79fb\u52a82\u6b65\n\n- \u5411\u524d\u79fb\u52a83\u6b65\n\n- \u5411\u5de6\u8f6c\n\n- \u5411\u53f3\u8f6c\n\n## \u3010\u5206\u6790\u3011\n\n\u4f46 $N,M$ \u5747\u5c0f\u4e8e $50$\uff0c\u6574\u4e2a\u56fe\u4ec5\u4ec5 $2500$ \u4e2a\u683c\u5b50\u3002\n\n\u6bcf\u6b21\u679a\u4e3e\u683c\u5b50\u548c\u8d70\u7684\u6b65\u6570\uff0c\u6700\u591a\u66f4\u65b0 $n^2$ \u6b21\uff0c\u590d\u6742\u5ea6\u5408\u7406\u3002\n\n![](https://cdn.luogu.com.cn/upload/pic/39.png)\n\n\u673a\u5668\u4eba\u5360\u56db\u4e2a\u683c\u5b50\uff08\u6ce8\u610f\u4e0d\u662f\u683c\u70b9\uff09\uff0c\u8981\u6c42\u56db\u4e2a\u683c\u5b50\u90fd\u4e0d\u662f\u969c\u788d\u3002\n\n\u65e2\u7136\u673a\u5668\u4eba\u5360\u591a\u4e2a\u683c\u5b50\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u8bbe\u56db\u4e2a\u683c\u5b50\u5206\u522b\u662f $(i,j),(i,j+1),(i+1,j),(i+1,j+1)$\u3002\n\n\u65e2\u7136\u9898\u76ee\u6d89\u53ca\u5230\u65b9\u5411\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u628a\u6570\u7ec4\u591a\u5f00\u4e00\u7ef4\u6765\u5b58\u50a8\u65b9\u5411\u3002\n\u4ece\u6b63\u4e0a\u65b9\u5f00\u59cb\uff0c\u6309\u987a\u65f6\u9488\u65cb\u8f6c\uff0c\u5206\u522b\u662f $0123$\u3002\n\n\u8bbe\u5f53\u524d\u65b9\u5411\u4e3a $w$\uff0c\u5de6\u8f6c\u540e\u4e3a $(w+3)\\mod3$\uff0c\u53f3\u8f6c\u540e\u4e3a $(w+1)\\mod3$\u3002\n\n\n## \u3010\u4ee3\u7801\u3011\n```cpp\n#include<bits/stdc++.h>\n#define maxn 55\nusing namespace std;\nint n,m,sx,sy,ex,ey,sw;\nint p[4][2]={{-1,0},{0,1},{1,0},{0,-1}},dst[maxn][maxn][4],ans,INF;  //p\u6570\u7ec4\u5b58\u65b9\u5411\uff0cdst\u5b58\u6bcf\u4e2a\u683c\u5b50\u6bcf\u4e2a\u65b9\u5411\u7684\u6700\u77ed\u8def\uff0c\u591a\u5f00\u7684\u4e00\u7ef4\u662f\u65b9\u5411\nbool mp[maxn][maxn],vis[maxn][maxn];\ninline int read(){\n\tint ret=0,f=1;char ch=getchar();\n\twhile(ch>'9'||ch<'0') {if(ch=='-')f=-f;ch=getchar();}\n\twhile(ch>='0'&&ch<='9') ret=ret*10+ch-'0',ch=getchar();\n\treturn ret*f;\n}\nvoid work(){\n\tmemset(dst,63,sizeof dst);\n\tans=INF=dst[0][0][0];\n\tdst[sx][sy][sw]=0;\n\tbool flg=1;\n\twhile(flg){\n\t\tflg=0;\n\t\tfor(int i=1;i<n;i++)\n\t\tfor(int j=1;j<m;j++)\n\t\tfor(int k=0;k<4;k++){  //k\u679a\u4e3e\u65b9\u5411\n\t\t\tif(mp[i][j]||INF==dst[i][j][k]) continue;\n\t\t\tfor(int s=1;s<4;s++){ //s\u679a\u4e3e\u79fb\u52a8\u7684\u8ddd\u79bb\n\t\t\t\tint x=i+s*p[k][0],y=j+s*p[k][1];\n\t\t\t\tif(mp[x][y]) break;\n\t\t\t\tif(dst[x][y][k]>dst[i][j][k]+1)dst[x][y][k]=dst[i][j][k]+1,flg=1;\n\t\t\t}\n\t\t\tif(dst[i][j][(k+1)%4]>dst[i][j][k]+1) dst[i][j][(k+1)%4]=dst[i][j][k]+1,flg=1;\n\t\t\tif(dst[i][j][(k+3)%4]>dst[i][j][k]+1) dst[i][j][(k+3)%4]=dst[i][j][k]+1,flg=1;\n\t\t}\n\t}\n}\nint main(){\n// \tfreopen(\"robot.in\",\"r\",stdin);\n// \tfreopen(\"robot.out\",\"w\",stdout);\n\tn=read(),m=read();\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++) vis[i][j]=read();\n\tfor(int i=1;i<n;i++)\n\tfor(int j=1;j<m;j++) if(!vis[i][j]&&!vis[i+1][j]&&!vis[i][j+1]&&!vis[i+1][j+1]) mp[i][j]=0;else mp[i][j]=1;\n\tsx=read(),sy=read(),ex=read(),ey=read();\n\tif(sx==ex&&sy==ey){\n\t\tprintf(\"0\\n\");\n\t\treturn 0;\n\t}\n\tchar ch=getchar();\n\twhile(ch!='E'&&ch!='W'&&ch!='S'&&ch!='N') ch=getchar();\n\tif(ch=='N') sw=0;else\n\tif(ch=='E') sw=1;else\n\tif(ch=='S') sw=2;else\n\tif(ch=='W') sw=3;\n\n\twork();\n\tfor(int i=0;i<4;i++) ans=min(dst[ex][ey][i],ans);\n\tif(ans==INF) printf(\"-1\\n\");else\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1554886682,
        "uid": 116251,
        "name": "\u7834\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u8fd9\u9898\u633a\u590d\u6742\u7684\uff0c\u4e3b\u8981\u601d\u8def\u697c\u4e0b\u795e\u7287\u4eec\u8bf4\u5f97\u5f88\u8be6\u7ec6\u4e86\uff0c\u4e0d\u505a\u8d58\u8ff0\u3002\u53ea\u6709\u4e00\u70b9\uff0c\u6709\u4e9b\u540c\u5b66\uff08\u5305\u62ec\u6211\uff09wa#6\uff0c\u8ba8\u8bba\u4e2d\u8bf4\u8981\u7ffb\u4e00\u4e0b\u524d\u8fdb\u4e0e\u8f6c\u5411\uff0c\u5176\u5b9e\u53ea\u662f\u5de7\u5408\u3002\u4e3b\u8981\u95ee\u9898\u662f\u5728\u524d\u8fdb\u4e00\u4e2a\u5931\u8d25\uff0c\u540e\u7eed\u505c\u6b62\u66f4\u65b0\u7684\u5224\u65ad\u4e0a\u3002\u5224\u65ad\u8981\u6839\u636e\u662f\u5426\u6709\u969c\u788d\uff0c\u800c\u4e0d\u80fd\u540c\u65f6\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u66f4\u65b0\u3002\n\u4ee3\u7801\u7565\u4e11\uff0c\u5c31\u4e0d\u8d34\u4e86\u3002",
        "postTime": 1529484575,
        "uid": 12070,
        "name": "Lynx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u6211\u770b\u5927\u4f19\u90fd\u662fBFS\uff0c\u800c\u4e14\u90fd\u662f\u8f6c\u5316\u6210\u70b9\u56fe\u5b58\u50a8\n\n\u7136\u800c\u849f\u84bb\u8868\u793a\u5f88\u8499\u800c\u4e14\u5bbd\u641c\u6709\u70b9\u70e6\n\n\u4e8e\u662f\u5c31\u5199\u4e86\u4e00\u4e2a\u6df1\u641c\uff0c\u800c\u4e14\u4e0d\u7528\u8f6c\u6210\u70b9\u56fe\n\n\u76f4\u63a5\u5b58\u539f\u5730\u56fe\u5373\u53ef\n\n\u4e0a\u4ee3\u7801\n\n\u6709\u6ce8\u91ca\u7684\n\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,minn=2100000000;\nint bx,by,fx,fy;\nbool mapp[55][55],vis[55][55],tf[55][55][26];\nint ste[55][55][3][3];\nint pd(int nx,int ny,int x,int y)//\u66b4\u529b\u4e00\u904d\u3002\u53ea\u8981\u6709\u4e00\u4e2a\u5730\u65b9\u78b0\u58c1\u5c31\u5b8c\u86cb \n{\n\tif(nx==n)return 0;\n\tif(ny==m)return 0;\n\tif(nx==x)\n\t{\n\t\tfor(int i=min(ny,y);i<=max(ny,y);i++)\n\t\t{\n\tif(mapp[nx][i]==true)return 0;\n\tif(mapp[nx][i+1]==true)return 0;\n\tif(mapp[nx+1][i]==true)return 0;\n\tif(mapp[nx+1][i+1]==true)return 0;\t\t\t\n\t\t}\n\t}\n    else\n    {\n    \tfor(int i=min(nx,x);i<=max(nx,x);i++)\n    \t{\n \tif(mapp[i][ny]==true)return 0;\n\tif(mapp[i][ny+1]==true)return 0;\n\tif(mapp[i+1][ny]==true)return 0;\n\tif(mapp[i+1][ny+1]==true)return 0;\t   \t\t\n    \t}\n    }\n\treturn 1;\n}\nvoid dfs(int x,int y,int step,int dx,int dy)//\u5f53\u524d\u884c\uff0c\u5f53\u524d\u5217\uff0c\u5f53\u524d\u6b65\u6570\uff0c\u8d70\u4e0b\u4e00\u6b65\u65f6\u884c\u5e94\u8be5\u5982\u4f55\u53d8\u5316\uff0c \u8d70\u4e0b\u4e00\u6b65\u65f6\u5217\u5e94\u8be5\u5982\u4f55\u53d8\u5316 \n{\n\tif(x==fx&&y==fy)//\u627e\u5230\u4e00\u79cd\u65b9\u6848\u4e86 \n\t{\n\t\tminn=min(minn,step);return;//\u6bd4\u8f83\u6700\u4f18 \n\t}\n\tif(step>=minn)return;//\u5982\u679c\u5f53\u524d\u6b65\u6570\u5df2\u7ecf\u7b49\u4e8e\u6700\u4f18\u89e3\u4e86\uff0c\u4e14\u663e\u800c\u6613\u89c1\u8fd9\u4e00\u6b65\u6240\u5904\u4f4d\u7f6e\u5e76\u4e0d\u662f\u76ee\u6807\u4f4d\u7f6e\u3002\u90a3\u4e48\u4e0b\u9762\u65e0\u8bba\u65b9\u6cd5\u518d\u4f18\uff0c\u603b\u4f1a\u52a3\u4e8e\u5df2\u77e5\u7684\u6700\u4f18\u89e3 \n\tif(ste[x][y][dx+1][dy+1]==2100000000)ste[x][y][dx+1][dy+1]=step;\n\t//\u5982\u679c\u8fd9\u4e00\u4e2a\u72b6\u6001\uff08\u5206\u522b\u662f\u5f53\u524d\u884c\u4e0e\u5217\uff0c\u671d\u5411\uff09\u4e4b\u524d\u6ca1\u5230\u8fc7\uff0c\u90a3\u4e48\u65e0\u7591\uff0c\u5728\u5df2\u77e5\u7684\u6240\u6709\u5230\u8fbe\u8fd9\u4e00\u72b6\u6001\u7684\u65b9\u6848\u4e2d\uff0c\u8fd9\u662f\u6700\u4f18\u7684 \u3002\u90a3\u4e48\u5c31\u6807\u8bb0\u4e0a\u6700\u4f18\u89e3 \n\tif(ste[x][y][dx+1][dy+1]!=2100000000)\n\t{\n\t\tif(step<ste[x][y][dx+1][dy+1])ste[x][y][dx+1][dy+1]=step;\n\t\telse return ;\n\t}\n\t//\u548c\u4e0a\u9762\u5dee\u4e0d\u591a\u3002\u5982\u679c\u8fd9\u4e2a\u72b6\u6001\u66fe\u5230\u8fbe\u8fc7\uff0c\u90a3\u4e48\u5982\u679c\u73b0\u5728\u8fd9\u4e2a\u89e3\u66f4\u4f18\uff0c\u5c31\u66ff\u6362\u6389\u539f\u6765\u7684\u3002\u53cd\u4e4b\u5c31\u8e22\u56de\u53bb\u3002\n\t\n\t//\u4e3b\u8981\u7684\u526a\u679d\u5230\u6b64\u7ed3\u675f \n\tfor(int i=3;i>=1;i--)\n\t//\u5176\u5b9e\u53c8\u662f\u4e00\u4e2a\u5c0f\u7684\u526a\u679d\u3002\u7528\u4e00\u4e2a\u7c7b\u4f3c\u8d2a\u5fc3\u7684\u65b9\u6cd5\uff0c\u5728\u6761\u4ef6\u5141\u8bb8\u7684\u60c5\u51b5\u4e0b\u5c3d\u53ef\u80fd\u5148\u5c1d\u8bd5\u5feb\u7684\u8d70\u6cd5 \n\t{\n\t\tint nx,ny;\n\t\tnx=x+dx*i;ny=y+dy*i;//\u8fd9\u79cd\u8d70\u6cd5\u80fd\u591f\u5230\u8fbe\u7684\u5730\u56fe\u5750\u6807 \n\t\tif(pd(nx,ny,x,y)&&vis[nx][ny]==false&&nx>0&&ny>0&&nx<=n&&ny<=m)//\u7b26\u5408\u6761\u4ef6 \n\t\t{\n\t\t\tvis[nx][ny]=true;\n\t\t\tdfs(nx,ny,step+1,dx,dy);//\u9012\u5f52 \n\t\t\tvis[nx][ny]=false;\n\t\t}\n\t}\n\tif(dx==0)//\u8fd9\u4e2a\u5927\u7684IF ELSE\u8bed\u53e5\u662f\u5904\u7406\u8f6c\u5411\u3002\u539f\u7406\u5f88\u7b80\u5355\uff0c\u4e0d\u505a\u8d58\u8ff0 \n\t{\n\t\tif(tf[x][y]['S'-'A']==false)\n\t\t{\n\t\t\ttf[x][y]['S'-'A']=true;\n\t\t\tdfs(x,y,step+1,1,0);\n\t\t\ttf[x][y]['S'-'A']=false;\n\t\t}\n\t\tif(tf[x][y]['N'-'A']==false)\n\t\t{\n\t\t\ttf[x][y]['N'-'A']=true;\n\t\t\tdfs(x,y,step+1,-1,0);\n\t\t\ttf[x][y]['N'-'A']=false;\n\t\t}\n\t}\n\telse\n\t{\n\t\tif(tf[x][y]['E'-'A']==false)\n\t\t{\n\t\t\ttf[x][y]['E'-'A']=true;\n\t\t\tdfs(x,y,step+1,0,1);\n\t\t\ttf[x][y]['E'-'A']=false;\n\t\t}\n\t\tif(tf[x][y]['W'-'A']==false)\n\t\t{\n\t\t\ttf[x][y]['W'-'A']=true;\n\t\t\tdfs(x,y,step+1,0,-1);\n\t\t\ttf[x][y]['W'-'A']=false;\n\t\t}\n\t}\n}\nint main()\n{\n\tmemset(ste,0x3f,sizeof(ste));\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)for(int j=1;j<=m;j++)scanf(\"%d\",&mapp[i][j]);\n\tscanf(\"%d%d%d%d\",&bx,&by,&fx,&fy);getchar();\n\tchar c;scanf(\"%c\",&c);\n\tvis[bx][by]=true;tf[bx][by][c]=true;\n\tif(c=='E')dfs(bx,by,0,0,1);//\u4ee5\u4e0b\u56db\u884c\u662f\u5bf9\u521d\u59cb\u65b9\u5411\u7684\u5206\u7c7b\u8ba8\u8bba\uff0c\u4ece\u800c\u8fdb\u5165\u641c\u7d22 \n\tif(c=='W')dfs(bx,by,0,0,-1);\n\tif(c=='S')dfs(bx,by,0,1,0);\n\tif(c=='N')dfs(bx,by,0,-1,0);\n\tprintf(\"%d\",minn==2100000000?-1:minn);//\u5982\u679cMINN\u4e00\u76f4\u6ca1\u6709\u66f4\u65b0\uff0c\u4e5f\u5c31\u662f\u8bf4\u4ece\u6765\u6ca1\u5230\u8fc7\u7ec8\u70b9\uff0c\u90a3\u5c31\u8f93\u51fa-1.\u53cd\u4e4b\u8f93\u51fa\u6700\u4f18\u65b9\u6848\u3002 \n}\n```\n",
        "postTime": 1567780104,
        "uid": 118630,
        "name": "Lube",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "# [\u673a\u5668\u4eba\u642c\u91cd\u7269](https://www.luogu.org/problemnew/show/P1126)\n\n\n\n~~\u5495\u5495\u5495\u4e86\u51e0\u4e2a\u661f\u671f\uff0c\u7ec8\u4e8e\u9759\u4e0b\u5fc3\u6765\u5199\u5b8c\u4e86\u8fd9\u7bc7\u9898\u89e3~~\n\n\u8fd9\u9053\u9898\u7684\u5751\u70b9\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff0c\u4e0b\u9762\u4f1a\u4e00\u4e00\u5217\u4e3e\u3002\n\n\n\n### \u5148\u5ba1\u9898\uff1a\n\n\u200b\t\u6839\u636e\u9898\u76ee\u7684\u610f\u601d\uff0c\u8fd9\u662f\u4e00\u9053\u8d70\u8ff7\u5bab\u7684\u95ee\u9898\uff0c\u663e\u7136\u7528bfs\u53bb\u6c42\u89e3\u3002\n\n\u200b\t\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u5efa\u4e00\u5f20\u56fe\u3002\u3002\u3002\n\n\u200b\t\u8fd9\u91cc\u5f88\u591a\u4eba\u4e0b\u610f\u8bc6\u5730\u5c06\u9898\u76ee\u4e2d\u8f93\u5165\u7684\u56fe\u5b58\u4e0b\uff0c\u8fd9\u5c31\u6d89\u53ca\u5230\u4e86\u6b64\u9898\u7684\u7b2c\u4e00\u4e2a\u5751\u70b9\u4e86\uff1a\n\n### \u5751\u70b91\uff1a\u5e94\u5efa\u7acbn+1 * m+1 \u5927\u5c0f\u7684\u56fe\n\n\u200b\t\u4e0d\u7406\u89e3\uff1f\u4e0d\u8bb2\u9053\u7406\uff1f\n\n\u200b\t\u8fd9\u91cc\u6211\u4eec\u8981\u91cd\u65b0\u56de\u5230\u9898\u76ee\u4e2d\uff0c\u9898\u76ee\u7684\u63cf\u8ff0\u4e3a\uff1a**\u673a\u5668\u4eba\u7684\u5f62\u72b6\u662f\u4e00\u4e2a\u76f4\u5f84$1.6\u7c73\u7684\u7403**\uff0c\u800c\u673a\u5668\u4eba\u8d70\u7684\u662f**\u683c\u70b9**\uff0c\u800c\u969c\u788d\u7269\u5b58\u5728\u4e8e**\u683c\u5b50\u4e0a**\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u6bcf\u4e00\u4e2a\u6709\u969c\u788d\u7269\u5b58\u5728\u7684\u683c\u5b50\u7684\u56db\u4e2a\u7aef\u70b9\u90fd\u662f\u4e0d\u80fd\u591f\u901a\u884c\u7684\uff0c\u800c\u6211\u4eec\u64cd\u4f5c\u7684\u662f\u673a\u5668\u4eba\uff0c\u6240\u4ee5\u5bf9\u4e8e\u4e00\u5f20n*m\u7684**\u683c\u5b50\u56fe**\u81ea\u7136\u9700\u8981\u5efa\u4e00\u5f20\uff08n+1\uff09 * \uff08m+1\uff09\u7684**\u683c\u70b9\u56fe** \u3002\n\n\u5efa\u56fe\uff1a\n\n```cpp\n    for(int i = 1; i <= n; i++) \n        for(int j = 1; j <= m; j++) {\n            scanf(\"%d\", &a);\n            if(a == 1) {\n                vis[i][j] = vis[i][j+1] = vis[i+1][j] = vis[i+1][j+1] = 1;\n                map[i][j] = map[i][j+1] = map[i+1][j] = map[i+1][j+1] = 1;\n            }\n        }\n    n++, m++;\n```\n\n\u8fd9\u91cc\u7684vis\u6570\u7ec4\u7528\u4e8e\u540e\u9762bfs\u4e2d\u5224\u65ad\u662f\u5426\u5230\u8fc7\uff0c\u800c\u5f53\u8be5\u70b9\u672c\u8eab\u65e0\u6cd5\u5230\u8fbe\u65f6\uff0c\u76f4\u63a5\u7f6e\u4e3a1\u3002\n\n\u800c\u8fd9\u91cc\u7684map\u6570\u7ec4\u53ea\u662f\u5355\u7eaf\u7528\u4e8e\u5b58\u8fd9\u4e2a\u70b9\u5468\u56f4\u662f\u5426\u6709\u969c\u788d\u7269\uff0c\u5177\u4f53\u7528\u5904\u540e\u9762\u4f1a\u63d0\u5230\u3002\n\n\u200b\t\u5982\u679c\u4f60\u4ee5\u4e3a\u8fd9\u5c31\u7ed3\u675f\u4e86\uff0c\u90a3\u4e48\u5c31\u5927\u9519\u7279\u9519\u4e86\uff0c\u8fd8\u8981\u518d\u52a0\u4e24\u884c:\n\n```cpp\n    for(int i = 1; i <= m; i++) vis[1][i] = vis[n][i] = 1;\n    for(int i = 1; i <= n; i++) vis[i][1] = vis[i][m] = 1;\n```\n\nWhat? Why?\n\n\u200b\t\u4ed4\u7ec6\u60f3\u60f3\uff0c\u4ee5\u673a\u5668\u4eba\u7684\u4f53\u79ef\uff0c\u5b83\u662f\u65e0\u6cd5\u8d70\u5230\u7b2c\u4e00\u884c\uff08\u7b2c\u4e00\u5217\uff09\u7684\u683c\u70b9\u4ee5\u53ca\u6700\u540e\u4e00\u884c\uff08\u6700\u540e\u4e00\u5217\uff09\u7684\u683c\u70b9\u4e0a\u53bb\u7684\uff08\u65c1\u8fb9\u662f\u5899\uff01\uff01\uff01\uff09\n\n### \u5751\u70b92\uff1a\u56db\u5468\u7684\u8fb9\u754c\u8d70\u4e0d\u4e86\n\n\n\n### \u518d\u5ba1\u9898\n\n\u200b\t\u9898\u4e2d\u589e\u52a0\u4e86\u65b9\u5411\u7684\u95ee\u9898\uff0c\u4ee5\u53ca\u673a\u5668\u4eba\u6bcf\u6b21\u80fd\u8d701~3\u6b65\u3002\n\n\u200b\t\u5bf9\u4e8e\u65b9\u5411\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5728bfs\u7528\u5230\u7684\u7ed3\u6784\u4f53\u4e2d\u589e\u52a0\u65b9\u5411\u7684\u503c\uff0c\u5373\u4f7f\u7528dirt\u6765\u8868\u793a\u8be5\u65f6\u523b\u673a\u5668\u4eba\u7684\u65b9\u5411\u3002\n\n\u7ed3\u6784\u4f53\n\n```cpp\nstruct node{\n    int x, y, step, dirt, turn;//dirt\u53d6\u503c\u4e3a1\uff0c 2\uff0c 3\uff0c 4\u65f6\u522b\u8868\u793a\u4e1c\uff0c\u897f\uff0c\u5357\uff0c\u5317\u3002 \n    node (int xx, int yy, int ss, int dd, int tt) : x(xx), y(yy), step(ss), dirt(dd), turn(tt){}\n};\n```\n\n\n\n\u200b\t\u63a5\u4e0b\u6765\u5c31\u662f\u4e3b\u8981\u7684bfs\u51fd\u6570\u4e86\u3002\n\n```cpp\ninline void bfs(int x1, int y1, int x2, int y2, char to)\n{\n    int drt;\n    if(to == 'E') drt = 1;\n    else if(to == 'W') drt = 2;\n    else if(to == 'S') drt = 3;\n    else drt = 4;\n    q.push(node(x1, y1, 0, drt, 0));\n    while(!q.empty()) {\n        node top = q.front();\n        q.pop();\n        int dx, dy;\n    \u3001\u3001\u3001\n }\n```\n\n\u4ee5\u4e0a\u90e8\u5206\u4e0e\u6b63\u5e38\u7684bfs\u6253\u6cd5\u65e0\u5f02\uff0c\u53ea\u662f\u5355\u7eaf\u7684\u591a\u4e86\u4e00\u4e2a\u9884\u5904\u7406\u65b9\u5411\u7684\u8fc7\u7a0b\uff0cto\u5c31\u662f\u6700\u521d\u7684\u65b9\u5411\u3002\n\n\u63a5\u7740\u6211\u4eec\u8003\u8651\u7528for\u5faa\u73af\u6765\u5b9e\u73b0**\u884c\u8d70\u4e0e\u8f6c\u5411**\u7684\u95ee\u9898\u3002\n\n1.\u6b63\u5e38\u7684\u884c\u8d70\uff08i = 1\u30012\u30013\u65f6\uff09\n\n```cpp\nfor(int i = 1; i <= 5; i++) {//i=4\u8868\u793a\u5de6\u8f6c\uff0c i=5\u8868\u793a\u53f3\u8f6c \n            if(i != 4 && i != 5) {\n                drt = top.dirt;\n                if(drt == 1) {\n                    dx = top.x;\n                    dy = top.y + i;\n                }\t\n                else if(drt == 2) {\n                    dx = top.x;\n                    dy = top.y - i;\n                }\n                else if(drt == 3) {\n                    dx = top.x + i;\n                    dy = top.y;\n                }\n                else {\n                    dx = top.x - i;\n                    dy = top.y;\n                }\n                if(dx <= 0 || dy <= 0 || dx > n || dy > m)\t{\n                    i = 3;//\u5982\u679c\u8d70\u4e86\u8be5\u6b65\u6570\u5df2\u7ecf\u8d85\u51fa\u4e86\u8fb9\u754c,\u90a3\u4e48\u8be5\u6b65\u6570\u4ee5\u540e\u7684\u6b65\u6570\u5fc5\u7136\u4f1a\u8d85\u8fc7\u8fb9\u754c\uff0c\u8fd9\u6837\u76f4\u63a5\u8df3\u5230\u8f6c\u5411\u90e8\u5206\u5373\u53ef\u3002\n                    continue;\n                }\n                if(vis[dx][dy]) {\n                    continue;\n                }\n                if(dx == x2 && dy == y2) {\n                    dis[x2][y2] = top.step + 1;\t//\u5230\u8fbe\u7ec8\u70b9\uff0c\u5b58\u503c\uff0c\u8fd4\u56de\u3002\n                    return;\n                }\n                dis[dx][dy] = min(top.step + 1, dis[dx][dy]);\n                vis[dx][dy] = 1;\n                q.push(node(dx, dy, top.step+1, drt, 0)); \n            }\n```\n\n\u8fd9\u91cc\u5f15\u5165\u7684dis\u6570\u7ec4\u5b58\u7684\u662f\u5230\u8fbe\u67d0\u70b9\u7684\u6700\u77ed\u65f6\u95f4\u3002\n\n\n\n2.\u8f6c\u5411\uff08i = 4\u30015\u65f6\uff09\n\n```cpp\n\t\t\telse if(i == 4){\n                dx = top.x, dy = top.y;\n                drt = top.dirt;\n                if(drt == 1) drt = 4;\n                else if(drt == 2) drt = 3;\n                else if(drt == 3) drt = 1;\n                else drt = 2;\n                dis[dx][dy] = min(top.step + 1, dis[dx][dy]);\n                vis[dx][dy] = 1;\n                q.push(node(dx, dy, top.step + 1, drt, t+1)); \n            }\n            else {\n                dx = top.x, dy = top.y;\n                drt = top.dirt;\n                if(drt == 1) drt = 3;\n                else if(drt == 2) drt = 4;\n                else if(drt == 3) drt = 2;\n                else drt = 1;\n                dis[dx][dy] = min(top.step + 1, dis[dx][dy]);\n                vis[dx][dy] = 1;\n                q.push(node(dx, dy, top.step + 1, drt, t+1)); \n            }\n        }\n```\n\n\u8fd9\u91cc\u5de6\u8f6c\u53f3\u8f6c\u65f6\u7684\u65b9\u5411\u8981\u6ce8\u610f\uff0c\u522b\u628a\u81ea\u5df1\u5f04\u6655\u4e86\uff01\n\n\u7136\u540e\u5199\u597d\u4e3b\u51fd\u6570\uff0c~~\u6211\u4eec\u5c31\u53ef\u4ee5\u6109\u5feb\u5730 ac\u4e86~~\n\n\uff01\u8bf6\uff0cWA?\u4e3a\u4ec0\u4e48\uff1f\uff1f\n\n\u8f93\u5165\u5750\u6807\u7684\u65f6\u5019\u52a0\u4e0a\u8fd9\u4e2a\u8bd5\u8bd5\n\n```c++\n    scanf(\"%d%d%d%d\", &x1, &y1, &x2, &y2);\n    getchar();\n    x1++, x2++, y1++, y2++;\n    scanf(\"%c\", &to);\n```\n\n\u200b\t\u8fd9\u6837\u505a\u7684\u539f\u56e0\u770b\u5b8c\u6837\u4f8b\u76f8\u4fe1\u806a\u660e\u7684\u4f60\u5c31\u660e\u767d\u4e86\u3002\n\n\n\n\u7136\u540e\uff0c\u518d\u63d0\u4ea4\uff1f\u600e\u4e48\u53c8\u9519\u4e86\u51e0\u4e2a\u70b9\u554a\uff01\uff01\n\n### \u5751\u70b93\uff1a\u7ec8\u70b9\u53ef\u80fd\u5728\u65e0\u6cd5\u5230\u8fbe\u7684\u683c\u70b9\u4e0a\n\n### \u5751\u70b94: \u8d77\u70b9\u548c\u7ec8\u70b9\u53ef\u80fd\u662f\u540c\u4e00\u4e2a\u70b9\n\n\u200b\t\u5bf9\u4e8e\u4e0a\u8ff0\u7684\u4e24\u4e2a\u5751\u70b9\uff0c\u53ea\u9700\u8981\u4e24\u4e2aif\u7279\u5224\u5c31\u53ef\u4ee5\u4e86\n\n```c++\n    if(vis[x1][y1] || vis[x2][y2]) return 0 * printf(\"-1\\n\");\n    if(x1 == x2 && y1 == y2) return 0 * printf(\"0\\n\");\n```\n\n\n\n\u8fd9\u6837\u505a\u4e86\u4e4b\u540e\u597d\u50cf\u8fd8\u662fac\u4e0d\u4e86\u8bf6\u3002\n\n\n\n\u200b\t\u8fd9\u91cc\u6211\u4eec\u56de\u5934\u770b\u770bbfs\u91cc\u7684for\u5faa\u73af\uff0c\u5176\u4e2d\u6709\u4e24\u4e2a\u95ee\u9898\u6211\u4eec\u9700\u8981\u89e3\u51b3\u4e00\u4e0b\uff1a\n\n\u200b\t\tq1:\u5bf9\u4e8e\u540c\u4e00\u4e2a\u70b9\uff0cfor\u5faa\u73af\u4e2d\u7684**i = 4\u30015**\u53ef\u80fd\u4f1a\u4f7f\u673a\u5668\u4eba\u4e00\u76f4\u5728\u8be5\u70b9\u8f6c\u5411\u3002\n\n\u200b\t\tq2:\u6709\u6ca1\u6709\u60f3\u8fc7\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u673a\u5668\u4eba\u5728\u5f80\u524d\u8d70\u4e00\u6b65\u7684\u65f6\u5019\u9047\u5230\u4e86\u969c\u788d\u7269\uff0c\u90a3\u4e48\u5b83\u524d\u9762\u7684\u4e24\u4e2a\u70b9vis\u90fd\u4e3a1\uff0c\u4f46\u5f53\u5b83\u5f80\u524d\u8d70\u4e09\u6b65\u65f6\uff0c\u8be5\u4e2a\u70b9\u7684**vis = 0**\uff0c\u5373\u673a\u5668\u4eba\u76f4\u63a5\u7a7f\u8fc7\u4e86\u969c\u788d\u7269\u5230\u8fbe\u4e86\u969c\u788d\u7269\u540e\u9762\u7684\u70b9\uff0c\u8fd9\u663e\u7136\u662f\u4e0d\u7b26\u5408\u5b9e\u9645\u7684\u3002\n\n\n\n\u200b\t\t\u5bf9\u4e8eq1\uff0c\u6211\u4eec\u5c31\u9700\u8981\u7528\u5230node\u7ed3\u6784\u4f53\u91cc\u5b9a\u4e49\u7684turn\u4f5c\u4e3a\u4e00\u4e2a**\u8f6c\u5411\u6b21\u6570\u8ba1\u6570\u5668**\u53bb\u5224\u65ad\uff0c\u5f53\u673a\u5668\u4eba\u5728\u67d0\u4e2a\u70b9\u8f6c\u54113\u6b21\u5373\u4ee5\u4e0a\u65f6\uff0c\u76f4\u63a5\u8df3\u8fc7\u3002\n\n\u200b\t\t\u5bf9\u4e8eq2\uff0c\u6211\u4eec\u5c31\u9700\u8981\u7528\u5230\u4e4b\u524d\u5b9a\u4e49\u7684map\u6570\u7ec4\u53bb\u5224\u65ad\u4e86\u3002\n\n\n\n\u8003\u8651\u5b8c\u4e86\u4e0a\u8ff0\u7684\u6240\u6709\u5751\u70b9\u540e\uff0c\u8fd9\u9053\u9898\u7ec8\u4e8e\u6210\u529f\u7684AC\u4e86\uff08~~\u4ec0\u4e48\uff1f\u8d77\u59cb\u8f6c\u5411\u6b21\u6570\u6709\u8bbe\u7f6e\u5751\u70b9\uff1f\u4e0d\u7ba1\u4e86\uff0c\u53cd\u6b63\u6211\u6ca1\u6709\u9047\u5230~~\uff09\n\n\n\ncode:\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <queue>\nusing namespace std;\n//Mystery_Sky\n//\n#define INF 0x3f3f3f3f\nconst int M = 100;\nstruct node{\n    int x, y, step, dirt, turn;//dirt\u53d6\u503c\u4e3a1\uff0c 2\uff0c 3\uff0c 4\u65f6\u522b\u8868\u793a\u4e1c\uff0c\u897f\uff0c\u5357\uff0c\u5317\u3002 \n    node (int xx, int yy, int ss, int dd, int tt) : x(xx), y(yy), step(ss), dirt(dd), turn(tt){}\n};\nqueue <node> q;\nint n, m, ans, x1, x2, y1, y2;\nchar to;\nint dis[M][M], map[M][M];\nbool vis[M][M];\ninline void bfs(int x1, int y1, int x2, int y2, char to)\n{\n    int drt;\n    if(to == 'E') drt = 1;\n    else if(to == 'W') drt = 2;\n    else if(to == 'S') drt = 3;\n    else drt = 4;\n    q.push(node(x1, y1, 0, drt, 0));\n    while(!q.empty()) {\n        node top = q.front();\n        q.pop();\n        int dx, dy;\n        for(int i = 1; i <= 5; i++) {//i=4\u8868\u793a\u5de6\u8f6c\uff0c i=5\u8868\u793a\u53f3\u8f6c \n            if(i != 4 && i != 5) {\n                drt = top.dirt;\n                if(drt == 1) {\n                    dx = top.x;\n                    dy = top.y + i;\n                }\t\n                else if(drt == 2) {\n                    dx = top.x;\n                    dy = top.y - i;\n                }\n                else if(drt == 3) {\n                    dx = top.x + i;\n                    dy = top.y;\n                }\n                else {\n                    dx = top.x - i;\n                    dy = top.y;\n                }\n                if(map[dx][dy] == 1) i = 3;\n                if(dx <= 0 || dy <= 0 || dx > n || dy > m)\t{\n                    i = 3;\n                    continue;\n                }\n                if(vis[dx][dy]) {\n                    continue;\n                }\n                if(dx == x2 && dy == y2) {\n                    dis[x2][y2] = top.step + 1;\t\n                    return;\n                }\n                dis[dx][dy] = min(top.step + 1, dis[dx][dy]);\n                vis[dx][dy] = 1;\n                q.push(node(dx, dy, top.step+1, drt, 0)); \n            }\n            else if(i == 4){\n                int t = top.turn;\n                if(t > 2) continue;\n                dx = top.x, dy = top.y;\n                drt = top.dirt;\n                if(drt == 1) drt = 4;\n                else if(drt == 2) drt = 3;\n                else if(drt == 3) drt = 1;\n                else drt = 2;\n                dis[dx][dy] = min(top.step + 1, dis[dx][dy]);\n                vis[dx][dy] = 1;\n                q.push(node(dx, dy, top.step + 1, drt, t+1)); \n            }\n            else {\n                int t = top.turn;\n                if(t > 2) continue;\n                dx = top.x, dy = top.y;\n                drt = top.dirt;\n                if(drt == 1) drt = 3;\n                else if(drt == 2) drt = 4;\n                else if(drt == 3) drt = 2;\n                else drt = 1;\n                dis[dx][dy] = min(top.step + 1, dis[dx][dy]);\n                vis[dx][dy] = 1;\n                q.push(node(dx, dy, top.step + 1, drt, t+1)); \n            }\n        }\n    }\n    return;\n}\n\nint main() {\n    int a;\n    scanf(\"%d%d\", &n, &m);\n    for(int i = 1; i <= n; i++) \n        for(int j = 1; j <= m; j++) {\n            scanf(\"%d\", &a);\n            if(a == 1) {\n                vis[i][j] = vis[i][j+1] = vis[i+1][j] = vis[i+1][j+1] = 1;\n                map[i][j] = map[i][j+1] = map[i+1][j] = map[i+1][j+1] = 1;\n            }\n        }\n    n++, m++;\n    for(int i = 1; i <= m; i++) vis[1][i] = vis[n][i] = 1;\n    for(int i = 1; i <= n; i++) vis[i][1] = vis[i][m] = 1;\n    scanf(\"%d%d%d%d\", &x1, &y1, &x2, &y2);\n    getchar();\n    x1++, x2++, y1++, y2++;\n    scanf(\"%c\", &to);\n    memset(dis, INF, sizeof(dis));\n    if(vis[x1][y1] || vis[x2][y2]) return 0 * printf(\"-1\\n\");\n    if(x1 == x2 && y1 == y2) return 0 * printf(\"0\\n\");\n    bfs(x1, y1, x2, y2, to);\n    if(dis[x2][y2] == INF) printf(\"-1\\n\");\n    else printf(\"%d\\n\", dis[x2][y2]);\n    return 0;\n}\n\n```\n\n\n\n\n\n\n\n",
        "postTime": 1558793815,
        "uid": 115383,
        "name": "Mystery_Sky",
        "ccfLevel": 6,
        "title": "P1126 \u673a\u5668\u4eba\u642c\u91cd\u7269"
    },
    {
        "content": "\u524d\u5f80[\u9898\u76ee](https://www.luogu.com.cn/problem/P1126)\n  \n\u8bfb\u5b8c\u9898\u76ee\u540e\uff0c\u5f97\u77e5\u9898\u76ee\u8981\u6c42\u6211\u4eec\u6c42\u51fa**\u6700\u5c11\u65f6\u95f4**\uff0c\u8fd9\u65f6\u6211\u4eec\u60f3\u5230\u8981\u6c42\u6700\u5c11\u65f6\u95f4\u5f80\u5f80\u4f7f\u7528**BFS**(\u5982\u679c\u662f\u65b9\u6848\u6570\u6216\u80fd\u5426\u5230\u8fbe\u5f80\u5f80\u9009\u62e9DFS)\n\n\u4f46\u8fd9\u9898\u8981\u6ce8\u610f\u7684\u7ec6\u8282\u8fd8\u662f\u86ee\u591a\u7684\uff1a\n\n1.\u9898\u76ee\u7ed9\u51fa\u7684\u56fe\u662f**\u65b9\u683c\u56fe**\uff0c\u4e5f\u5c31\u662f\u8bf4\u969c\u788d\u662f\u4e00\u4e2a\u9762\uff0c\u800c\u4e0d\u4ec5\u4ec5\u53ea\u662f\u4e00\u4e2a\u70b9\uff0c\u4f46\u673a\u5668\u4eba\u884c\u8d70\u7684\u8def\u7ebf\u662f\u7531**\u70b9**\u6784\u6210\uff08\u6240\u4ee5\u53ea\u7528\u4e00\u4e2a\u70b9f[i][j]\u8868\u793a\u969c\u788d\u662f\u4e0d\u53ef\u53d6\u7684\uff09\uff1b\u90a3\u4e48\u89e3\u51b3\u7684\u597d\u65b9\u6cd5\u5c31\u662f**\u628a\u4e00\u4e2a\u969c\u788d\u770b\u6210\u56db\u4e2a\u70b9**\uff0c\u5c06\u8fd9\u56db\u4e2a\u70b9\u4e00\u8d77\u6807\u8bb0\u6389\uff1b\n\n2.\u673a\u5668\u4eba\u5b58\u5728\u4e00\u5b9a\u7684**\u4f53\u79ef**\uff0c\u8fd9\u4e00\u70b9\u6211\u4eec\u53ef\u4ee5\u4ece\u6837\u4f8b\u770b\u51fa\uff08\u6837\u4f8b\u4e2d\u7ed9\u51fa\u7684\u673a\u5668\u4eba\u662f\u4e00\u4e2a\u26aa\uff09\uff0c\u6240\u4ee5\u5728\u56fe\u7684**\u8fb9\u754c\u4e5f\u662f\u65e0\u6cd5\u8d70\u7684**\uff1b\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u628a**\u5224\u65ad\u8fb9\u754c\u65f6\u628an\u548cm\u90fd-1**\uff1b\n\n3.\u6b64\u9898\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u53ef\u4ee5\u884c\u8d70\uff0c\u4e5f\u53ef\u4ee5\u8f6c\u5411\uff0c\u884c\u8d70\u60f3\u5fc5\u4e0d\u7528\u591a\u8bf4\uff0c\u4f46\u8f6c\u5411\u4f1a\u6709\u70b9\u9ebb\u70e6\uff1b\n\n- \u5982\u4f55\u89e3\u51b3**\u539f\u5730\u6253\u8f6c**\u7684\u95ee\u9898\uff08\u5982\u679c\u4e0d\u5904\u7406\uff0c\u961f\u5217\u4e2d\u4f1a\u6709\u6e90\u6e90\u4e0d\u65ad\u7684\u8f6c\u5411\u547d\u4ee4\u51fa\u73b0\uff0c\u9677\u5165\u6b7b\u5faa\u73af\uff09\uff1a\u5728\u8fd9\u91cc\u6211\u7528\u4e86\u4e00\u4e2a\u4e09\u7ef4\u6570\u7ec4\u8fdb\u884c\u6807\u8bb0\u2014\u2014f[i][j][k],\u8868\u793a\uff08i,j\uff09\u8fd9\u4f4d\u7f6e\u6b64\u65f6\u65b9\u5411\u4e3ak\u662f\u5426\u8d70\u8fc7\uff0c\u82e5\u662f1\u5219\u8868\u793a\u8d70\u8fc7\uff0c\u5373\u65e0\u9700\u518d\u8d70\uff0c\u53cd\u4e4b\u5219\u7ee7\u7eed\uff1b\n- \u5982\u4f55**\u5b58\u50a8\u65b9\u5411**\uff1a\u8fd9\u4e2a\u95ee\u9898\u89e3\u51b3\u6bd4\u8f83\u5bb9\u6613\uff0c\u4f46\u5982\u679c\u5904\u7406\u6070\u5f53\u4f1a\u4e3a\u4e4b\u540e\u7684\u4ee3\u7801\u65b9\u4fbf\u8bb8\u591a\uff0c\u6211\u5728\u6b64\u662f\u628a{E,S,W,N}\u5206\u522b\u8868\u793a\u6210{0,1,2,3};\n- \u5982\u4f55\u5c06\u65b9\u5411\u8f6c\u53d8\u6210\u6211\u4eec\u5728\u56fe\u4e0a\u884c\u8d70\u65f6\u7684\u65b9\u5411\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u6837\u4f8b\uff0c\u5bf9{E,S,W,N},\u5206\u522b\u8fdb\u884c\u6a21\u62df\uff0c\u7531\u6b64\u5f97\u51fa\u7ed3\u8bba\uff1a\n\n| \u65b9\u5411 | i | j |\n| :----------: | :----------: | :----------: |\n| E | 0 | 1 |\n| S | 1 | 0 |\n| W | 0 | -1 |\n| N | -1 | 0 |\n   \u8fd9\u65f6\u6211\u4eec\u518d\u5b9a\u4e49\u4e24\u4e2a\u65b9\u5411\u6570\u7ec4fx[4]={0,1,0,-1};fy[4]={1,0,-1,0};\n   \n   \u6211\u4eec\u4f1a\u53d1\u73b0\u521a\u624d\u7684\u5b58\u50a8\u65b9\u5411\u7684\u505a\u6cd5\u5bf9\u73b0\u5728\u6709\u5f88\u5927\u7684\u597d\u5904\u3002\n\n4.\u5f53\u6211\u4eec\u884c\u8d70\u65f6\u8fd8\u6709\u4e00\u70b9\u503c\u5f97\u6ce8\u610f\uff08\u8fd9\u4e2a\u8ba9\u6211\u67e5\u9519\u4e86\u597d\u4e45\uff09\uff1a\u5f53\u4f60\u4e00\u6b21\u8fd0\u52a82\u4e2a\u62163\u4e2a\u5355\u4f4d\u65f6\uff0c\u5e94\u6ce8\u610f\u4f60\u8fd9\u4e00\u6b21\u884c\u8d70\u7684**\u8def\u5f84**\u4e0a\u662f\u5426\u90fd\u6ca1\u88ab\u6807\u8bb0\u8fc7\uff08\u5373\u90fd\u4e0d\u662f\u969c\u788d\uff09\uff0c\u800c\u4e0d\u662f\u53ea\u5224\u65ad\u6700\u540e\u4e00\u4e2a\u70b9\u65f6\u5019\u662f\u969c\u788d\uff0c\u5426\u5219\u4f1a\u51fa\u73b0**\u7a7f\u5899\u884c\u4e3a**\u3002\n   \n   \u5e9f\u8bdd\u4e0d\u591a\u8bf4\u76f4\u63a5\u770b\u4ee3\u7801\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint const N=50+10;\nint fx[4]={0,1,0,-1};\nint fy[4]={1,0,-1,0};\nint n,m,st_x,st_y,ed_x,ed_y,a[N][N],vis[N][N][5];\nstruct node{\n\tint x,y,dir,step;//x,y\u8868\u793a\u5750\u6807\uff0cdir\u8868\u793a\u65b9\u5411\uff0cstep\u8868\u793a\u5f53\u524d\u6b65\u6570\n};\nint bfs(int x,int y,char c){\n\tqueue<node> q;\n\tif (c=='E') q.push(node{x,y,0,0}),vis[x][y][0]=1;\n\tif (c=='S') q.push(node{x,y,1,0}),vis[x][y][1]=1;\n\tif (c=='W') q.push(node{x,y,2,0}),vis[x][y][2]=1;\n\tif (c=='N') q.push(node{x,y,3,0}),vis[x][y][3]=1;\n\twhile (!q.empty()){\n\t\tint dx=q.front().x; int dy=q.front().y;\n\t\tint Dir=q.front().dir; int Step=q.front().step;\n\t\tq.pop();\n\t\tif (dx==ed_x && dy==ed_y) return Step;//\u5230\u8fbe\u7ec8\u70b9\n\t\tif (!vis[dx][dy][(Dir+5)%4] && !a[dx][dy]) q.push(node{dx,dy,(Dir+5)%4,Step+1}),vis[dx][dy][(Dir+5)%4]=1;//\u5de6\u8f6c\n\t        if (!vis[dx][dy][(Dir+3)%4] && !a[dx][dy]) q.push(node{dx,dy,(Dir+3)%4,Step+1}),vis[dx][dy][(Dir+3)%4]=1;//\u53f3\u8f6c\n\t        if (!vis[dx+fx[Dir]][dy+fy[Dir]][Dir] && !a[dx+fx[Dir]][dy+fy[Dir]] && dx+fx[Dir]>0 && dx+fx[Dir]<n && dy+fy[Dir]>0 && dy+fy[Dir]<m) q.push(node{dx+fx[Dir],dy+fy[Dir],Dir,Step+1}),vis[dx+fx[Dir]][dy+fy[Dir]][Dir]=1;//\u884c\u8d70\u4e00\u6b65\n\t        if (!vis[dx+2*fx[Dir]][dy+2*fy[Dir]][Dir] && !a[dx+fx[Dir]][dy+fy[Dir]] && !a[dx+2*fx[Dir]][dy+2*fy[Dir]] && dx+2*fx[Dir]>0 && dx+2*fx[Dir]<n && dy+2*fy[Dir]>0 && dy+2*fy[Dir]<m) q.push(node{dx+2*fx[Dir],dy+2*fy[Dir],Dir,Step+1}),vis[dx+2*fx[Dir]][dy+2*fy[Dir]][Dir]=1;//\u884c\u8d70\u4e24\u6b65\n\t        if (!vis[dx+3*fx[Dir]][dy+3*fy[Dir]][Dir] && !a[dx+fx[Dir]][dy+fy[Dir]] && !a[dx+2*fx[Dir]][dy+2*fy[Dir]] && !a[dx+3*fx[Dir]][dy+3*fy[Dir]] && dx+3*fx[Dir]>0 && dx+3*fx[Dir]<n && dy+3*fy[Dir]>0 && dy+3*fy[Dir]<m) q.push(node{dx+3*fx[Dir],dy+3*fy[Dir],Dir,Step+1}),vis[dx+3*fx[Dir]][dy+3*fy[Dir]][Dir]=1;//\u884c\u8d70\u4e09\u6b65\n\t}\n\treturn -1;\n}\nint main(){\n\tcin>>n>>m;\n\tfor (int i=1;i<=n;i++){\n\t\ta[i][0]=a[0][i]=a[i][m]=a[n][i]=1;//\u6807\u8bb0\u8fb9\u754c\n\t        for (int j=1,x;j<=m;j++){\n\t  \t    cin>>x;\n\t  \t    if (x==1) a[i-1][j-1]=a[i-1][j]=a[i][j-1]=a[i][j]=1;//\u6807\u8bb0\u969c\u788d\u56db\u5468\u7684\u56db\u4e2a\u70b9\n\t        }\n\t}\n\tchar c;\n\tcin>>st_x>>st_y>>ed_x>>ed_y>>c;\n\tcout<<bfs(st_x,st_y,c)<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1578402810,
        "uid": 146307,
        "name": "\u8881\u5b87\u8f69",
        "ccfLevel": 0,
        "title": "\u6d1b\u8c37P1126\u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u8fd9\u662f\u4e00\u9053\u5f88\u8003\u7ec6\u8282~~\u5751~~\u7684\u9898\n\u6ce8\u610f\u4e8b\u9879\uff1a\u5982\u56fe\n1.\u673a\u5668\u4eba\u662f\u4e00\u4e2a\u201c _\u7403_ \u201d\uff0c\u6240\u4ee5\u5bf9\u4e8e\u673a\u5668\u4eba\u5750\u6807\uff08i\uff0cj\uff09\uff0c\u4ed6\u6240\u5728\u7684\u65b9\u683c\u548c\uff08i+1,j\uff09,(i,j+1),(i+1,j+1)\u90fd\u4e0d\u80fd\u5728\u6570\u5b57\u4e3a1\u7684\u5730\u65b9\n\n2.\u5f53\u4f60\u524d\u8fdb2\u683c\u6216\u80053\u683c\u65f6\u6240\u7ecf\u8fc7\u7684\u5730\u65b9\u4e5f\u4e0d\u80fd\u4e3a\u6570\u5b571\u6240\u5728\u7684\u5730\u65b9\uff01\uff01\uff01\uff08\u88ab\u8fd9\u91cc\u5751\u51e0\u4e2a\u5c0f\u65f6\uff09\n\n3.\u8f6c\u5411\u4e5f\u9700\u8981\u65f6\u95f4\uff01\uff01\uff01\n\n```\n\u672c\u4eba\u5f88\u5014\u5f3a~~\u5f88\u83dc~~\uff0c\u6240\u4ee5\u672c\u9898\u7528dfs\u5b8c\u6210\uff01\n\u9002\u5408\u65b0\u624b\u670b\u53cb\u5b66\u4e60\u6df1\u5165\u4e86\u89e3\u8fd9\u7c7b\u9898\u7684\u7b80\u5355\u89e3\u6cd5\n```\n\n\u5199\u5728\u524d\u9762\uff1a\n```\n\u6211\u4eec\u5148\u9ed8\u8ba4memset\u6574\u4e2a\u5730\u56fe\u4e3a-1\uff08\u5373\u4e0d\u53ef\u8d70\uff09\uff0c\u518d\u8f93\u5165\uff0c\u5bf9\u4e8e\u53ef\u4ee5\u8d70\u7684\u70b9\u5c06\u5b83\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u503c\uff08\u672c\u9898\u5b9a\u4e49\u4e3a9999\uff0c\n\u5df2\u7ecf\u8db3\u591f\uff09\uff0cmp\u3010i\u3011\u3010j\u3011\u540e\u7eed\u5373\u4e3a\u5230\u8fbe\u6b64\u70b9\u7684\u6700\u5feb\u6b65\u6570\uff0c\n\u901a\u8fc7\u6570\u7ec4g\u6765\u63a7\u5236\u673a\u5668\u4eba\u7684\u79fb\u52a8g\u3010c\u3011\u3010i\u3011\u3010j\u3011\u4e2dc\u4e3a\u6b64\u65f6\u673a\n\u5668\u4eba\u7684\u671d\u5411-i\u4e2d\u5206\u522b\u4e3a\u5bf9\u5e94\u7684\u53ef\u4ee5\u8d70\u7684\u6b65\u6570\uff0c\u800cj\u63a7\u5236\u662f\u6a2a\u5750\u6807\u52a0\u8fd8\u662f\u7eb5\u5750\u6807\u52a0\uff0c\u6570\u7ec4move\u6765\u63a7\u5236\u673a\u5668\u4eba\u8f6c\u5411\n\u63a5\u4e0b\u6765\u4e0a\u4ee3\u7801\uff1a\uff08\u6ce8\u91ca\u6253\u5728\u4ee3\u7801\u540e\u9762\uff09135\u884c\u4e0d\u591a\uff0c\u6162\u6162\u770b...\n```\n ```\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint n,m,mp[60][60],c,sx,sy,fx,fy,move[7]={0,1,2,3,-1,-2,-3},inf=9999;\nint g[5][3][2]={{0},{{-1,0},{-2,0},{-3,0}},{{0,-1},{0,-2},{0,-3}},{{1,0},{2,0},{3,0}},{{0,1},{0,2},{0,3}}};\nint check(int t,int nt){//\u5224\u65ad\u8f6c\u5411\u7528\u65f6\n\tif(t==nt) return 0;\n\tif(t==1){\n\t\tif(nt==2 || nt==4) return 1;\n\t\telse return 2;\n\t}\n\tif(t==2){\n\t\tif(nt==1 || nt==3) return 1;\n\t\telse return 2;\n\t}\n\tif(t==3){\n\t\tif(nt==2 ||nt==4) return 1;\n\t\telse return 2;\n\t}\n\tif(t==4){\n\t\tif(nt==1 ||nt==3) return 1;\n\t\telse return 2;\n\t}\n}\nint check2(int x,int y,int gx,int gy){//\u5224\u65ad\u6240\u7ecf\u8fc7\u7684\u5730\u65b9\u662f\u5426\u8fdd\u89c4\n\tif(gx==3){\n\t\tfor(int i=x;i<=x+4;i++){\n\t\t\tfor(int j=y;j<=y+1;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gx==2){\n\t\tfor(int i=x;i<=x+3;i++){\n\t\t\tfor(int j=y;j<=y+1;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gx==1){\n\t\tfor(int i=x;i<=x+2;i++){\n\t\t\tfor(int j=y;j<=y+1;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gy==3){\n\t\tfor(int i=x;i<=x+1;i++){\n\t\t\tfor(int j=y;j<=y+4;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gy==2){\n\t\tfor(int i=x;i<=x+1;i++){\n\t\t\tfor(int j=y;j<=y+3;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gy==1){\n\t\tfor(int i=x;i<=x+1;i++){\n\t\t\tfor(int j=y;j<=y+2;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\tif(gx==-3){\n\t\tfor(int i=x;i>=x-3;i--){\n\t\t\tfor(int j=y;j<=y+1;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gx==-2){\n\t\tfor(int i=x;i>=x-2;i--){\n\t\t\tfor(int j=y;j<=y+1;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gx==-1){\n\t\tfor(int i=x;i>=x-1;i--){\n\t\t\tfor(int j=y;j<=y+1;j++) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gy==-3){\n\t\tfor(int i=x;i<=x+1;i++){\n\t\t\tfor(int j=y;j>=y-3;j--) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gy==-2){\n\t\tfor(int i=x;i<=x+1;i++){\n\t\t\tfor(int j=y;j>=y-2;j--) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n\telse if(gy==-1){\n\t\tfor(int i=x;i<=x+1;i++){\n\t\t\tfor(int j=y;j>=y-1;j--) if(mp[i][j]==-1) return 0;\n\t\t}\n\t\treturn 1;\n\t}\n}\nvoid dfs(int x,int y,int step,int t){//\u5f53\u524d\u5750\u6807\uff08x\uff0cy\uff09\uff0c\u5df2\u7ecf\u8d70\u7684\u6b65\u6570\uff0c\u65b9\u5411 \n\tmp[x][y]=min(mp[x][y],step);\n\tif(x==fx && y==fy) return ;\n\telse if(step>1000) return ;//\u8bbe\u7f6edfs\u4e0a\u9650\u6839\u636e\u9898\u76ee\u6240\u7ed9\u6570\u636e\u63a8\u7b97\uff0c\u907f\u514dTLE\n\tint js,k;\n\tfor(int p=0;p<7;p++){//\u7ed3\u5408move\u6570\u7ec4\u63a7\u5236\u8f6c\u5411\n\t\tjs=step;\n\t\tint nt=t+move[p];\n\t\tif(nt>4 || nt<1) continue;\n\t\tk=js+=check(t,nt);\n\t\tfor(int j=0;j<3;j++){//\u5f00\u59cb\u8d70\n\t\t\tint nx=x+g[nt][j][0],ny=y+g[nt][j][1];\n\t\t\tif(check2(x,y,g[nt][j][0],g[nt][j][1])&&mp[nx][ny]>step+1) //\u5224\u65ad\n\t\t\tdfs(nx,ny,js+1,nt);//\u9012\u5f52dfs\n\t\t}\n\t}\n}\nint main(){\n\tmemset(mp,-1,sizeof(mp));//\u521d\u59cb\u5316\n\tint a;\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++){\n\t\tscanf(\"%d\",&a);\n\t\tif(a!=1) mp[i][j]=inf;\n\t}\n\tscanf(\"%d %d %d %d %c\",&sx,&sy,&fx,&fy,&c);\n\tif(c=='N') a=1;\n\telse if(c=='W') a=2;\n\telse if(c=='S') a=3;\n\telse if(c=='E') a=4;\n\tdfs(sx,sy,0,a);\n\tif(mp[fx][fy]==inf){ printf(\"-1\"); return 0;\t}\n\tprintf(\"%d\",mp[fx][fy]);\n\treturn 0;\n}\n```\n",
        "postTime": 1563955295,
        "uid": 189693,
        "name": "gameplayer47",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053bfs\u7684\u57fa\u7840\u9898\uff0c\u53ea\u662f\u5c06\u63a5\u4e0b\u6765\u8981\u5e72\u4ec0\u4e48\u5206\u7c7b\u4e00\u4e0b\u5c31\u597d\u4e86\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint zx[5]={0,+0,+1,-0,-1};//\u5e38\u91cf\u6570\u7ec4\uff0c\u4ee3\u8868\u65b9\u5411\nint zy[5]={0,+1,-0,-1,+0};\nint i,j,k,m,n,h,t,fx,fy,lx,ly,ii,jj;\nbool a[100][100][5],b[100][100];\nint c[100][100];\nint x[20000],y[20000],fang[20000],u[20000];//\u5e7f\u641c\u65f6\u7684\u961f\u5217\nchar ch;\nint left(int x)//\u5de6\u8f6c\n{x--;if(x==0)x=4;return x;}\nint right(int x)//\u53f3\u8f6c\n{x++;if(x==5)x=1;return x;}\nint main()\n{\n  cin>>m>>n;\n  for(i=1;i<=m;i++)\n  for(j=1;j<=n;j++)\n  {cin>>k;b[i][j]=(k+1)%2;}\n  cin>>fx>>fy>>lx>>ly>>ch;\n  for(i=1;i<=m;i++)\n  {\n  for(j=1;j<=n;j++)\n  {\n    if(b[i+1][j+1]&&b[i+1][j]&&b[i][j+1]&&b[i][j])\n    {\n      for(k=1;k<=4;k++)\n      a[i][j][k]=true;\n    }\n    c[i][j]=1000000;\n  }\n  }\n  if(ch=='E')fang[1]=1;\n  if(ch=='S')fang[1]=2;\n  if(ch=='W')fang[1]=3;\n  if(ch=='N')fang[1]=4;\n  a[fx][fy][fang[1]]=false;\n  h=1;\n  t=1;\n  u[1]=0;\n  x[1]=fx;\n  y[1]=fy;\n  while(t<=h)\n  {\n    if(x[t]==lx&&y[t]==ly)//\u627e\u5230\u7b54\u6848\n    {\n      cout<<u[t];\n      return 0;\n    }\n    for(i=1;i<=5;i++)//\u52065\u79cd\u8ba8\u8bba\n    {\n      if(i==1)\n      {\n        if(a[x[t]][y[t]][left(fang[t])]==true)//\u5224\u65ad\u72b6\u6001\u662f\u5426\u53ef\u4ee5\n        {\n        h++;\n        x[h]=x[t];\n        y[h]=y[t];\n        u[h]=u[t]+1;\n        fang[h]=left(fang[t]);//\u5de6\u8f6c\n        a[x[h]][y[h]][fang[h]]=false;\n        }\n      }\n      if(i==2)\n      {\n      \tif(a[x[t]][y[t]][right(fang[t])]==true)//\u5224\u65ad\u72b6\u6001\u662f\u5426\u53ef\u4ee5\n      \t{\n        h++;\n        x[h]=x[t];\n        y[h]=y[t];\n        u[h]=u[t]+1;\n        fang[h]=right(fang[t]);//\u53f3\u8f6c\n        a[x[h]][y[h]][fang[h]]=false;\n        }\n      }\n      if(i==3)\n      {\n        if(a[x[t]+zx[fang[t]]*3][y[t]+zy[fang[t]]*3][fang[t]]==true\n         &&a[x[t]+zx[fang[t]]*2][y[t]+zy[fang[t]]*2][fang[t]]==true\n         &&a[x[t]+zx[fang[t]]][y[t]+zy[fang[t]]][fang[t]]==true)//\u5224\u65ad\u72b6\u6001\u662f\u5426\u53ef\u4ee5\n        {\n          h++;\n          x[h]=x[t]+zx[fang[t]]*3;\n          y[h]=y[t]+zy[fang[t]]*3;\n          u[h]=u[t]+1;\n          fang[h]=fang[t];\n          a[x[h]][y[h]][fang[h]]=false;\n        }\n      }\n      if(i==4)\n      {\n        if(a[x[t]+zx[fang[t]]*2][y[t]+zy[fang[t]]*2][fang[t]]==true\n         &&a[x[t]+zx[fang[t]]][y[t]+zy[fang[t]]][fang[t]]==true)//\u5224\u65ad\u72b6\u6001\u662f\u5426\u53ef\u4ee5\n        {\n          h++;\n          x[h]=x[t]+zx[fang[t]]*2;\n          y[h]=y[t]+zy[fang[t]]*2;\n          u[h]=u[t]+1;\n          fang[h]=fang[t];\n          a[x[h]][y[h]][fang[h]]=false;\n        }\n      }\n      if(i==5)\n      {\n        if(a[x[t]+zx[fang[t]]][y[t]+zy[fang[t]]][fang[t]]==true)//\u5224\u65ad\u72b6\u6001\u662f\u5426\u53ef\u4ee5\n        {\n          h++;\n          x[h]=x[t]+zx[fang[t]];\n          y[h]=y[t]+zy[fang[t]];\n          u[h]=u[t]+1;\n          fang[h]=fang[t];\n          a[x[h]][y[h]][fang[h]]=false;\n        }\n      }\n    }\n    t++;\n  }\n  cout<<-1;//\u65e0\u89e3\n  return 0;\n}\n```\n\u5c31\u662f\u4ee3\u7801\u957f\u70b9\uff0c\u6709\u8010\u5fc3\u5c31\u884c\u4e86...\n",
        "postTime": 1545745351,
        "uid": 86625,
        "name": "Limit",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u6211\u7ffb\u4e866\u9875\u9898\u89e3\uff0c\u53d1\u73b0\u6ca1\u6709\u4e00\u7bc7\u662fdfs\u7684\u3002\u7ed9\u5927\u5bb6\u8865\u5145\u4e00\u7bc7dfs\u7684\u9898\u89e3\u62d3\u5bbd\u4e00\u4e0b\u601d\u8def\u3002~~\uff08\u5176\u5b9e\u662f\u6211\u61d2\u5f97\u5199bfs\uff09~~\n\n\u7528\u4e86\u4e2a\u5c0f\u4f18\u5316\uff0c\u7528rmb(i,j,ornt)\u8bb0\u5f55\u5230\u8fbe(i,j)\u4f4d\u7f6eornt\u65b9\u5411\u7684\u6700\u5c0f\u65f6\u95f4\uff0c\u8fd9\u6837\u526a\u679d\u7684\u8bdd\uff0cdfs\u8dd1\u5f97\u8fd8\u662f\u6bd4\u8f83\u5feb\u7684\u3002\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <cctype>\n#include <algorithm>\nusing namespace std;\n\nconst int maxn = 100;\nconst int mvr[10] = {0, -1, 0, 1, 0};\t//\u5404\u65b9\u5411\u79fb\u52a8\u8ddd\u79bb\u7684\u6570\u7ec4\uff0cr\u8868\u793a\u884c\uff08row\uff09,c\u8868\u793a\u5217\uff08column\uff09 \nconst int mvc[10] = {0, 0, -1, 0, 1};\t//\u65b9\u54111\uff0c2\uff0c3\uff0c4\u4ee3\u8868\u4e0a\uff0c\u5de6\uff0c\u4e0b\uff0c\u53f3 \n\nint n, m, b[maxn][maxn], a[maxn][maxn], sr, sc, er, ec, sornt;\n//sr:start-row\uff0cer:end-row\uff0csornt\uff1astart-orientation \nint ans = 0x3f3f3f3f;\n\ninline int Right(int x) {\n\treturn x > 1 ? x - 1 : 4;\n}\n\ninline int Left(int x) {\n\treturn x < 4 ? x + 1 : 1;\n}\n\nint rmb[maxn][maxn][10];\t//\u8bb0\u5fc6\u6570\u7ec4 \nvoid dfs(int cr, int cc, int ornt, int stp) {\n\tif(stp >= ans || stp >= rmb[cr][cc][ornt]) return;\n\tif(cr == er && cc == ec) {\n\t\tans = min(ans, stp);\n\t\treturn;\n\t}\n\trmb[cr][cc][ornt] = stp;\n\tdfs(cr, cc, Left(ornt), stp + 1);\n\tdfs(cr, cc, Right(ornt), stp + 1);\n\tfor(int i = 1; i <= 3; i++) {\n\t\tint nr = cr + i * mvr[ornt], nc = cc + i * mvc[ornt];\n\t\tif(nr >= 1 && nr <= n && nc >= 1 && nc <= m && a[nr][nc]) dfs(nr, nc, ornt, stp + 1);\n\t\telse break;\t//\u5982\u679c\u4e0d\u80fd\u8d701\u683c\uff0c\u80af\u5b9a\u4e0d\u80fd\u8d702\u62163\u683c \n\t}\n}\n\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tfor(int i = 1; i <= n; i++) {\n\t\tfor(int j = 1; j <= m; j++) {\n\t\t\tscanf(\"%d\", &b[i][j]);\t//bij\u8868\u793a\u7b2ci\u884c\u7b2cj\u5217\u7684\u65b9\u683c\u7684\u72b6\u6001 \n\t\t}\n\t}\n\tn--, m--;\n\tfor(int i = 1; i <= n; i++) {\n\t\tfor(int j = 1; j <= m; j++) {\n\t\t\tif(b[i][j] || b[i][j + 1] || b[i + 1][j] || b[i + 1][j + 1]) a[i][j] = 0;\n\t\t\telse a[i][j] = 1;\t//\taij\u8868\u793a\u7b2ci\u884c\u7b2cj\u5217\u7684\u683c\u70b9\u7684\u72b6\u6001\uff0c\u673a\u5668\u4eba\u80fd\u8d70\u7684\u683c\u70b9\u5fc5\u987b\u6ee1\u8db3\u56db\u5468\u90fd\u6ca1\u6709\u5899 \n\t\t}\n\t}\n\tchar tmp;\n\tscanf(\"%d %d %d %d %c\", &sr, &sc, &er, &ec, &tmp);\n\tif(tmp == 'N') sornt = 1; \n\tif(tmp == 'W') sornt = 2; \n\tif(tmp == 'S') sornt = 3; \n\tif(tmp == 'E') sornt = 4;\n\tmemset(rmb, 0x3f, sizeof(rmb));\n\tdfs(sr, sc, sornt, 0);\n\tif(ans < 0x3f3f3f3f) printf(\"%d\\n\", ans);\n\telse puts(\"-1\");\n\treturn 0;\n}\n```\n\n\u4e0d\u8fc7\u9274\u4e8e\u5bf9\u6b64\u7c7b\u6700\u5c0f\u6b65\u6570\u95ee\u9898\uff0cdfs\u7684\u65f6\u95f4\u6bd4\u8f83\u7384\u5b66\uff08\u6bd4\u5982\u6211\u8fd9\u6b21\u522b\u7684\u70b9\u6700\u591a31ms\u552f\u72ec\u7b2c9\u4e2a\u70b9520ms\uff09\uff0c\u8fd8\u662f\u5efa\u8bae\u5927\u5bb6\u7528bfs",
        "postTime": 1537283823,
        "uid": 50607,
        "name": "wzhhhhh",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u8fd9\u9898\u7684\u6570\u636e\u8303\u56f4\u5e76\u4e0d\u5927\uff0c\u76f4\u63a5BFS\u4e0b\u53bb\u5e76\u4e0d\u4f1a\u7206\u70b8\u3002\n\n\u9898\u76ee\u63d0\u4f9b\u4e86\u76f4\u89c2\u7684\u56fe\u7247\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u673a\u5668\u4eba\u5360\u636e\u4e864\u683c\u3002\n\n\u8f93\u5165\u6570\u636e\u4e2d\u63d0\u4f9b\u7684\u662f\u4ea4\u53c9\u70b9\u7684\u5750\u6807\uff0c\u6837\u4f8b\u6570\u636e\u7684\u8bdd\u5750\u6807\u8303\u56f4\u662f(0,0)\u5230(9,10)\u3002\n\n\u800c\u65b9\u683c\u7684\u8303\u56f4\u5219\u662f(0,0)\u5230(8,9)\u3002\u6211\u4eec\u53ef\u4ee5\u5047\u8bbe\u673a\u5668\u4eba\u5904\u5728\u4f4d\u7f6e\u4e3a(sx, sy)\u7684\u65b9\u683c\u4e0a\uff0c\u5f53\u5b83\u884c\u8fdb\u65f6\u5224\u65ad\u524d\u8fdb\u65b9\u5411\u4e0a\u7684\u4e24\u4e2a\u683c\u5b50\u662f\u5426\u6709\u969c\u788d\u3002\n\n\u90a3\u4e48**\u9996\u5148\u5224\u65ad\u673a\u5668\u4eba\u6240\u5904\u7684\u56db\u4e2a\u683c\u5b50\u5373(sx-1,sy-1)\u5230(sx,sy)\u56db\u4e2a\u65b9\u683c\u6709\u6ca1\u6709\u969c\u788d**\uff08\u6ce8\u610f\u4e0d\u8981\u51fa\u754c\uff09\u3002\uff08\u8fd9\u662f\u7b2c\u5341\u7ec4\u6570\u636e\u7684key\uff09\n\n\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u628a \u3010(sx, sy, \u65b9\u5411), \u6b65\u6570\u3011\u4e22\u5230\u961f\u5217\u91cc\u9762\u53bb\u4e86\u3002\n\n\u63a5\u4e0b\u6765\u6bcf\u6b21\u53d6\u51fa\u4e00\u4e2a\u72b6\u6001\u3002\n\n\u5982\u679c\u8fd9\u4e2a\u72b6\u6001\u5230\u8fbe\u4e86\u76ee\u6807\u70b9\uff0c\u5c31\u76f4\u63a5\u8f93\u51fa\uff0c\u5e76\u4e14\u9000\u51fa\u7a0b\u5e8f\u3002\u6211\u4eec\u53ef\u4ee5\u4fdd\u8bc1\u6ca1\u6709\u6bd4\u8fd9\u66f4\u5c0f\u7684\u60c5\u51b5\uff08\u6b65\u6570\u66f4\u5c11\u72b6\u6001\u90fd\u5728\u4e4b\u524d\u88ab\u8bbf\u95ee\u8fc7\u4e86\uff09\u3002\n\n\u63a5\u7740\u67e5\u8be2\u8fd9\u4e2a\u72b6\u6001\u662f\u5426\u5df2\u7ecf\u8bbf\u95ee\u8fc7\uff08\u5229\u7528set\u5b9e\u73b0 - \u5b9e\u9645\u4e0a\u53ef\u4ee5\u628a\u72b6\u6001hash\u4e00\u4e0b\uff0c\u4e0d\u8fc7\u8fd9\u91cc\u7a7a\u95f4\u8db3\u591f\uff09\u3002\u5982\u679c\u8bbf\u95ee\u8fc7\u4e86\u5c31\u628a\u5b83\u6254\u6389\uff08\u4e4b\u6240\u4ee5\u8fd9\u662f\u53ef\u884c\u7684\uff0c\u662f\u56e0\u4e3a\u8fd9\u662fBFS\u3002\u540c\u6837\u7684\u72b6\u6001\u5148\u8bbf\u95ee\u5230\u65f6\u603b\u662f\u4e0d\u52a3\u4e8e\u540e\u8bbf\u95ee\u5230\u65f6\u7684\u3002\uff09\uff0c\u5982\u679c\u6ca1\u8bbf\u95ee\u8fc7\u5c31\u6807\u8bb0\u4e3a\u5df2\u8bbf\u95ee\uff0c\u63a5\u7740\u4f5c\u4e94\u79cd\u5c1d\u8bd5\uff1a\n\n0. \u5411\u5de6\u8f6c\n\n1. \u5411\u53f3\u8f6c\n\n2. \u524d\u8fdb\u4e00\u683c\n\n3. \u524d\u8fdb\u4e24\u683c(\u4ec5\u5f53\u4e0a\u4e00\u4e2a\u5c1d\u8bd5\u6210\u529f)\n\n4. \u524d\u8fdb\u4e09\u683c(\u4ec5\u5f53\u4e0a\u4e00\u4e2a\u5c1d\u8bd5\u6210\u529f)\n\n\u5982\u679c\"\u53ef\u4ee5\u8fd9\u4e48\u505a\"\uff0c\u5c31\u628a\u3010\u4fee\u6539\u540e\u7684\u72b6\u6001, \u6b65\u6570+1\u3011\u4e22\u5230\u961f\u5217\u91cc\u9762\u53bb\u3002\n\n\u82e5\u961f\u5217\u4e3a\u7a7a\uff0c\u4e14\u7a0b\u5e8f\u5c1a\u672a\u9000\u51fa\uff0c\u8bf4\u660e\u76ee\u6807\u72b6\u6001\u65e0\u6cd5\u5230\u8fbe\u3002\n\n\u4e0b\u56fe\u662f\u6837\u4f8b\u6570\u636e\u50a8\u5b58\u7684\u60c5\u51b5\u3002\n\n\n<http://sforest.in/files/P1126-map.png>\n\n\u6211\u7684\u4ee3\u7801\u6bd4\u8f83\u7e41\u7410\uff0c\u56e0\u4e3a\u6ca1\u6709\u628a\u56db\u4e2a\u65b9\u5411\u62bd\u8c61\u6210\u5750\u6807\u7684\u53d8\u5316\u91cf\uff0c\u5c06\u5c31\u7740\u770b\u5427orz\n\n\n[codec]\n\n/\\* P1126\n\n\\* Au: SJoshua\n\n\\*/\n\n\n\n\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n#include <queue>\n#include <set> \nusing namespace std;\nstruct status {\n    int x, y;\n    char d; \n    bool operator < (const status &p) const {\n        return x == p.x ? (y == p.y ? d > p.d : y > p.y) : (x > p.x);\n    }\n} temp;\nchar right(char d) {\n    switch (d) {\n        case 'N':\n            return 'E'; \n        case 'W':\n            return 'N';\n        case 'E':\n            return 'S';\n        case 'S': \n            return 'W';\n    } \n    return 0;\n}\nchar left(char d) {\n    switch (d) {\n        case 'N':\n            return 'W'; \n        case 'W':\n            return 'S';\n        case 'E':\n            return 'N';\n        case 'S': \n            return 'E';\n    } \n    return 0;\n}\nint main(void) {\n    int n, m, tmp, tx, ty;\n    bool map[50][50];\n    queue < pair<status, int> > q;\n    set <status> s;\n    scanf(\"%d %d\", &n, &m);\n    for (int k = 0; k < n; k++) {\n        for (int i = 0; i < m; i++) {\n            scanf(\"%d\", &tmp);\n            map[k][i] = (bool) tmp;\n        }\n    }\n    scanf(\"%d %d %d %d %c\", &temp.x, &temp.y, &tx, &ty, &temp.d);\n    if (map[temp.x][temp.y] || (temp.x > 0 ? map[temp.x-1][temp.y] : false) || (temp.y > 0 ? map[temp.x][temp.y-1] : false) || (temp.x > 0 && temp.y > 0 ? map[temp.x-1][temp.y-1] : false)) {\n        printf(\"-1\");\n        return 0;\n    }\n    q.push(make_pair(temp, 0));\n    while (!q.empty()) {\n        pair<status, int> now = q.front();\n        q.pop();\n        temp = now.first;\n        if (temp.x == tx && temp.y == ty) {\n            printf(\"%d\", now.second);\n            return 0;\n        }\n        if (s.count(temp)) {\n            continue;\n        } else {\n            s.insert(temp);\n        }\n        temp.d = right(temp.d);\n        if (!s.count(temp)) {\n            q.push(make_pair(temp, now.second+1)); \n        } \n        temp = now.first;\n        temp.d = left(temp.d);\n        if (!s.count(temp)) {\n            q.push(make_pair(temp, now.second+1)); \n        } \n        temp = now.first; \n        switch (temp.d) {\n            case 'N':\n                for (int k = 0; k < 3 && --temp.x > 0; k++) {\n                    if (!map[temp.x-1][temp.y] && !map[temp.x-1][temp.y-1]) {\n                        if (!s.count(temp)) {\n                            q.push(make_pair(temp, now.second+1)); \n                        }  \n                    } else {\n                        break;\n                    }\n                }\n                break;\n            case 'W':\n                for (int k = 0; k < 3 && --temp.y > 0; k++) {\n                    if (!map[temp.x-1][temp.y-1] && !map[temp.x][temp.y-1]) {\n                        if (!s.count(temp)) {\n                            q.push(make_pair(temp, now.second+1)); \n                        }  \n                    } else {\n                        break;\n                    }\n                }\n                break;\n            case 'E':\n                for (int k = 0; k < 3 && ++temp.y < m; k++) {\n                    if (!map[temp.x-1][temp.y] && !map[temp.x][temp.y]) {\n                        if (!s.count(temp)) {\n                            q.push(make_pair(temp, now.second+1)); \n                        }  \n                    } else {\n                        break;\n                    }\n                }\n                break;\n            case 'S': \n                for (int k = 0; k < 3 && ++temp.x < n; k++) {\n                    if (!map[temp.x][temp.y] && !map[temp.x][temp.y-1]) {\n                        if (!s.count(temp)) {\n                            q.push(make_pair(temp, now.second+1)); \n                        }  \n                    } else {\n                        break;\n                    }\n                }\n                break;\n        }\n    }\n    printf(\"-1\");\n    return 0;\n}\n[/codec]\n```",
        "postTime": 1472304415,
        "uid": 790,
        "name": "\u7ea6\u4fee\u4e9a_RK",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u9996\u5148\uff0c\u8981\u4ed4\u7ec6\u8bfb\u9898\uff0c\u6ce8\u610f\u673a\u5668\u4eba\u5176\u5b9e\u662f\u5360\u636e\u4e86\u56db\u683c\u7684\u7a7a\u95f4\u7684\u3002\uff08\u56e0\u6b64\u5fc5\u7136\u662f\u4e0d\u80fd\u8d70\u5230\u7f51\u683c\u8fb9\u7f18\uff09\n\n\u4f46\u662f\u5904\u7406\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u89c6\u4e3a\u673a\u5668\u4eba\u5728\u683c\u70b9\u4e0a\uff0c\u800c\u969c\u788d\u7269\u5360\u636e\u56db\u4e2a\u683c\u70b9\u3002\n\n\u63a5\u4e0b\u6765\u5957\u7528bfs\u6846\u67b6\u5c31\u597d\u4e86\uff0c\u5927\u6982\u5c31\u662f\u7528\u4e00\u4e2a\u4e09\u5143\u7ec4(r,c,dir)\u8868\u793a\u5f53\u524d\u6240\u5904\u7684\u4f4d\u7f6e\u548c\u671d\u5411\uff0c\u7531\u4e8e\u4e0d\u9700\u8981\u8f93\u51fa\u8def\u5f84\uff0cbfs\u6811\u90fd\u4e0d\u7528\u5efa\u3002\n\n\u5728\u8fd9\u91cc\u4f7f\u7528\u4e86\u4e00\u4e9b\u5e38\u91cf\u6570\u7ec4\u6765\u7b80\u5316\u8f6c\u5f2f\u548c\u524d\u884c\u591a\u683c\u7684\u4ee3\u7801\uff0c\u6574\u4f53\u8fd8\u662f\u633a\u4f18\u7f8e\u7b80\u6d01\u7684\u3002\uff08\u597d\u5427\u6211\u627f\u8ba4\u6211\u662f\u5b66\u7684\u7b97\u6cd5\u7ade\u8d5b\u5165\u95e8\u7ecf\u5178\u7684\u5199\u6cd5)\n\n\u849f\u84bb\u4e00\u679a\uff0c\u628a\u8fd9\u4e2a\u903b\u8f91\u672c\u6765\u5c31\u5f88\u6e05\u6670\u7684\u4ee3\u7801\u8fd8\u6ce8\u91ca\u5f97\u65e0\u6bd4\u5570\u55e6\u3002\u3002\u3002\u4e0d\u8981\u5410\u69fd\u3002\u3002\u3002\n\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<queue>\nusing namespace std;\nconst int maxn=55;\nconst char dirs[]=\"NESW\";\nconst int dr[]={-1,0,1,0};\nconst int dc[]={0,1,0,-1};//\u5efa\u7acb\u5e38\u91cf\u6570\u7ec4,\u7b80\u5316\u8f6c\u5f2f/\u79fb\u52a8\u7b49\u4ee3\u7801,dr[n]\u5373\u5f53\u524d\u671d\u5411\u4e3adirs[n]\u65f6\uff0c\u79fb\u52a8\u4e00\u6b65\u4e4b\u540er\u7684\u53d8\u5316\u91cf \nint n,m; \nint a[maxn][maxn],d[maxn][maxn][4];//a\u662f\u9898\u76ee\u4e2d\u7684\u7f51\u683c,d\u662f\u521d\u59cb\u72b6\u6001\u5230\u72b6\u6001(r,c,dir)\u7684\u6700\u77ed\u8ddd\u79bb \nint ans;\nint fx,fy,bx,by,bdir;\nstruct node\n{\n    int r,c,dir;//dir=0/1/2/3\u5206\u522b\u5bf9\u5e94NESW \n    node(int r=0,int c=0,int dir=0):r(r),c(c),dir(dir) {}\n};\nint dir_id(char c)\n{\n    return strchr(dirs,c)-dirs;\n} \nnode turn(const node& u, int k);\nvoid bfs();\nint main()\n{\n    memset(a,0,sizeof(a));\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)//\u6ce8\u610f\uff0c\u7531\u4e8e\u8fd9\u91cc\u7684\u76ee\u7684\u662f\u8bfb\u53d6\u969c\u788d\uff0c\u6240\u4ee5\u6a2a\u7eb5\u5750\u6807\u4ece1\u5f00\u59cb\u7f16\u53f7\uff0c\u800c\u5b9e\u9645\u4e0a\u7a0b\u5e8f\u4e2d\u7684\u7f51\u683c\u6a2a\u7eb5\u5750\u6807\u5747\u4e3a\u4ece0\u5f00\u59cb\u7f16\u53f7 \n    {\n        for(int j=1;j<=m;j++)\n        {\n            int temp;\n            cin>>temp;\n            if(temp)\n            {\n                a[i-1][j-1]=a[i][j-1]=a[i-1][j]=a[i][j]=1;//\u4e00\u4e2a\u7f51\u683c\u4e0a\u7684\u969c\u788d\uff0c\u53ef\u4ee5\u7b49\u4ef7\u4e8e\u5176\u56db\u4e2a\u9876\u70b9\u90fd\u4e0d\u80fd\u5230\u8fbe \n            }\n        }\n    }\n    char temp;\n    cin>>bx>>by>>fx>>fy>>temp;\n    bdir=dir_id(temp);\n    bfs();\n     return 0;\n}\nnode turn(const node& u, int k)\n{\n    int dir=u.dir;\n    if(k==1) \n    {\n        dir=(dir+3)%4; // \u5de6\u8f6c \n    }\n    if(k==2) \n    {\n        dir=(dir+1)%4; // \u53f3\u8f6c \n    }\n    return node(u.r,u.c,dir);\n}\nvoid bfs()\n{\n    queue<node> q;\n    memset(d,-1,sizeof(d));\n    node u(bx,by,bdir);\n    d[u.r][u.c][u.dir]=0;\n    q.push(u);\n    while(!q.empty())\n    {\n        node u=q.front();\n        q.pop();\n        if(u.r==fx&&u.c==fy)\n        {\n            cout<<d[fx][fy][u.dir]<<endl;\n            return;\n        }\n        for(int i=1;i<=2;i++)//\u8f6c\u5f2f\u7684\u4e24\u79cd\u60c5\u51b5\uff0c1\u8868\u793a\u9006\u65f6\u9488\uff0c2\u8868\u793a\u987a\u65f6\u9488 \n        {\n            node v=turn(u,i);\n            if(v.r>=1&&v.r<n&&v.c>=1&&v.c<m&&d[v.r][v.c][v.dir]==-1)\n            {\n                d[v.r][v.c][v.dir]=d[u.r][u.c][u.dir]+1;\n                q.push(v);\n            }\n        } \n        for(int i=1;i<=3;i++)//\u524d\u884c\u7684\u4e09\u79cd\u60c5\u51b5 \n        {\n            node v(u.r+dr[u.dir]*i,u.c+dc[u.dir]*i,u.dir);\n            if(v.r>=1&&v.r<n&&v.c>=1&&v.c<m&&d[v.r][v.c][v.dir]==-1)\n            {\n                if(a[v.r][v.c])\n                {\n                    break;//\u5982\u679c\u9047\u5230\u969c\u788d\uff0c\u7acb\u523b\u7ec8\u6b62\u524d\u884c\u7684\u5c1d\u8bd5\uff08\u5e76\u4e0d\u80fd\u7a7f\u5899\uff09\n                }\n                d[v.r][v.c][v.dir]=d[u.r][u.c][u.dir]+1;\n                q.push(v);\n            }\n        }\n    }\n    cout<<-1<<endl; \n}\n\n```",
        "postTime": 1466238606,
        "uid": 19076,
        "name": "\u843d\u53f6\u6d41\u4e91",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u4e3a\u4ec0\u4e48\u9898\u89e3\u91cc\u7684\u65b9\u6cd5\u90fd\u90a3\u4e48~~\u7325\u7410~~\u7e41\u7410\u5462\uff1f\n\n\u672c\u849f\u84bb\u5199\u4e86\u4e00\u79cd\u8f83\u4e3a\u7b80\u5355~~\u4f46\u7801\u91cf\u4e0a\u5929~~\u7684\u65b9\u6cd5\uff0c\u90a3\u5c31\u662f\u2014\u2014\n\n# \u5efa\u56fe\n\n\u663e\u7136\uff0c\u8fd9\u9053\u9898\u662f\u6700\u77ed\u8def\uff0c\u4e14\u6839\u636e\u9898\u76ee\u610f\u601d\u5efa\u56fe\u3002\n\n\u6bcf\u4e2a**\u683c\u70b9**\u5206\u88c2\u62104\u4e2a\u8282\u70b9\uff0c\u4ee3\u88684\u79cd\u65b9\u5411\u3002\n\n\u76f8\u90bb\u4e24\u4e2a\u65b9\u5411\u4e4b\u95f4\u8fde\u4e24\u6761**\u6709\u5411\u8fb9**\uff0c\u6743\u503c\u4e3a1\u3002\n\n\u540c\u65f6\uff0c\u9898\u76ee\u4e2d\u7ed9\u51fa\u76843\u79cd\u524d\u8fdb\u65b9\u5f0f\uff0c\u5206\u522b\u5728\u5404\u4e2a\u65b9\u5411\u4e0a\u5efa3\u6761\u8fb9\u3002\n\n**\u6ce8\u610f\uff01\u6bcf\u6761\u8fb9\u90fd\u5fc5\u987b\u5bf9\u5e94\u76f8\u540c\u7684\u65b9\u5411\u3002**\n\n\u4e0d\u7406\u89e3\uff1f\u6211\u4eec\u6765\u4e00\u5f20\u56fe\uff1a\n\n![](https://s2.ax1x.com/2020/01/11/lIfu5j.png)\n\n\uff08\u8fd9\u91cc\u5c11\u753b\u4e86\u4e0d\u540c\u65b9\u5411\u8282\u70b9\u7684\u8f6c\u6362\u8fb9\uff0c\u4f46\u65e0\u4f24\u5927\u96c5\uff09\n\n\u8fd9\u6837\u5efa\u5b8c\u56fe\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6109\u5feb\u5730 BFS \u4e86\u3002\n\n\u671f\u671b\u5f97\u5206\uff1a$100 \\;pts$\n\n\u5b9e\u9645\u5f97\u5206\uff1a$90\\; pts$\n\nwtf\uff1f\u539f\u6765\u8fd8\u8981\u7279\u5224\uff01\n\n\u5982\u679c\u51fa\u53d1\u4e0e\u7ed3\u675f\u76f8\u540c\uff0c\u5c31\u8981\u7279\u5224\u3002\n\n~~\u53ef\u80fd\u662f\u672c\u849f\u84bb\u7684 BFS \u592a\u83dc\u4e86\u8981\u7279\u5224~~\n\n\u6700\u540e\u653e\u4e0a~~\u5947\u602a\u7684~~\u4ee3\u7801\uff1a\n\n```\n#include <queue>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n\nconst int max_n = 50, max_node = max_n * max_n;\n\nstruct node\n{\n\tint id, step;\n};\n\nbool is_cut[max_n][max_n], can_make[max_n][max_n] = {}, used[max_node<<2];\nint hd[max_node<<2], des[max_node*20], nxt[max_node*20], cnt = 0, n, m;\nqueue<node> q;\n\n// is_cut\uff1a\u662f\u5426\u6709\u969c\u788d\u7269\n// can_make\uff1a\u662f\u5426\u53ef\u4ee5\u4f5c\u8282\u70b9\n// used\uff1aBFS \u65f6\u662f\u5426\u641c\u5230\u8fc7\n// hd\uff0cdes\uff0cnxt\uff0ccnt\uff1a\u94fe\u5f0f\u524d\u5411\u661f\uff0c\u4e0d\u89e3\u91ca\n// n\uff0cm\uff1a\u5927\u5c0f\n// q\uff1a\u961f\u5217\n\ninline int pack(int x, int y, int dir) { return 4 * (m * x + y) + dir; } // \u751f\u6210\u8282\u70b9\u5e8f\u53f7\n\ninline void a(int s, int t) // \u52a0\u8fb9\n{\n\tdes[cnt] = t;\n\tnxt[cnt] = hd[s];\n\thd[s] = cnt;\n\tcnt++;\n}\n\nint main()\n{\n\tmemset(hd, -1, sizeof(hd));\n\t\n\tint sx, sy, ex, ey, desti;\n\tnode cur, pus;\n\tchar dk;\n\t\n\tscanf(\"%d%d\", &n, &m);\n\tfor (int i = 0; i < n; i++)\n\t\tfor (int j = 0; j < m; j++)\n\t\t\tscanf(\"%d\", &is_cut[i][j]); // \u8bfb\u5165\n\t\n\tfor (int i = 1; i < n; i++)\n\t\tfor (int j = 1; j < m; j++) // \u5efa\u56fe\n\t\t{\n\t\t\tcan_make[i][j] = !(is_cut[i][j-1] || is_cut[i-1][j] || is_cut[i-1][j-1] | is_cut[i][j]);\n\t\t\t\n\t\t\tif (can_make[i][j])\n\t\t\t{\n\t\t\t\tfor (int k = 0; k < 4; k++)\n\t\t\t\t{\n\t\t\t\t\ta(pack(i, j, k), pack(i, j, (k + 1) % 4));\n\t\t\t\t\ta(pack(i, j, (k + 1) % 4), pack(i, j, k));\n\t\t\t\t} // \u4e0d\u540c\u65b9\u5411\u4e4b\u95f4\u7684\u8f6c\u6362\n\t\t\t\t\n\t\t\t\tfor (int k = 1; k <= 3; k++)\n\t\t\t\t{\n\t\t\t\t\tif (i - k > 0 && can_make[i-k][j])\n\t\t\t\t\t{\n\t\t\t\t\t\ta(pack(i-k, j, 2), pack(i, j, 2));\n\t\t\t\t\t\ta(pack(i, j, 0), pack(i-k, j, 0));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tbreak;\n\t\t\t\t} // \u7ad6\u5411\u8fb9\n\t\t\t\t\n\t\t\t\tfor (int k = 1; k <= 3; k++)\n\t\t\t\t{\n\t\t\t\t\tif (j - k > 0 && can_make[i][j-k])\n\t\t\t\t\t{\n\t\t\t\t\t\ta(pack(i, j-k, 1), pack(i, j, 1));\n\t\t\t\t\t\ta(pack(i, j, 3), pack(i, j-k, 3));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tbreak;\n\t\t\t\t} // \u6a2a\u5411\u8fb9\n\t\t\t}\n\t\t}\n\t\n\tscanf(\"%d%d%d%d %c\", &sx, &sy, &ex, &ey, &dk); // \u6ce8\u610f scanf \u91cc\u7684\u7a7a\u683c\uff0c\u4e0d\u6253\u5c31\u4f1a RE\n\t\n\tif (sx == ex && sy == ey) // \u7279\u5224\n\t{\n\t\tputs(\"0\");\n\t\treturn 0;\n\t}\n\t\n\tdesti = pack(ex, ey, 0);\n\t\n\tswitch (dk)\n\t{\n\t\tcase 'E':\n\t\t\tcur.id = pack(sx, sy, 1);\n\t\t\tbreak;\n\t\t\n\t\tcase 'S':\n\t\t\tcur.id = pack(sx, sy, 2);\n\t\t\tbreak;\n\t\t\n\t\tcase 'W':\n\t\t\tcur.id = pack(sx, sy, 3);\n\t\t\tbreak;\n\t\t\n\t\tcase 'N':\n\t\t\tcur.id = pack(sx, sy, 0);\n\t\t\tbreak;\n\t\t\n\t\tdefault: break;\n\t}\n\t\n\tcur.step = 0;\n\tq.push(cur);\n\t\n\twhile (!q.empty()) // BFS\n\t{\n\t\tcur = q.front();\n\t\tq.pop();\n\t\t\n\t\tfor (int p = hd[cur.id]; p != -1; p = nxt[p])\n\t\t{\n\t\t\tpus.id = des[p], pus.step = cur.step + 1;\n\t\t\t\n\t\t\tif (used[pus.id])\n\t\t\t\tcontinue;\n\t\t\tif (pus.id >= desti && pus.id - desti <= 3) // \u5224\u65ad\u662f\u5426\u5728\u7ec8\u70b9\u4e0a\n\t\t\t{\n\t\t\t\tprintf(\"%d\\n\", pus.step);\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t\n\t\t\tused[pus.id] = true;\n\t\t\tq.push(pus);\n\t\t}\n\t}\n\t\n\tputs(\"-1\");\n\t\n\treturn 0;\n}\n```",
        "postTime": 1578756741,
        "uid": 119491,
        "name": "5ab_juruo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u6765\u53d1\u4e00\u4e0b\u673a\u5668\u4eba\u642c\u91cd\u7269\u8fd9\u7bc7\u9898\u89e3qaq\n\u54b3\u54b3~\u8fd9\u9898\u9996\u5148\u6211\u60f3\u5199\u4e00\u4e2adfs\u7684\u4f46\u662f\u56e0\u4e3a\u4ed6\n\u4e0d\u505c\u7684\u6765\u56de\u8f6c\u5934\u800c\u544a\u7ec8\n\u770b\u4e86\u4e00\u773c\u6807\u7b7e\u662fbfs\u5c31\u5199\u4e86\u4e00\u4e2a\n\u4e3a\u4e86\u4e0d\u8ba9\u4ed6\u6765\u56de\u8f6c\u5934\u5199\u4e86\u4e00\u4e2avis\u4e09\u7ef4\u6570\u7ec4\n\u7ed3\u679c\u53ea\u5f9730\n\u540e\u6765\u53d1\u73b0\u8d70\u4e24\u6b65\u548c\u4e09\u6b65\u8fd8\u9700\u8981\u7279\u5224\n\u521a\u5b66\u4e86\u7ebf\u6bb5\u6811\u4e8e\u662f\u5199\u4e86\u4e00\u4e2a\u7c7b\u4f3clazy\n\u7684\u4e1c\u897f\n\u540e\u6765\u53d1\u73b0\u6bd4\u7b54\u6848\u591a\u4e86\n\u5199\u4e86\u4e00\u4e2a\u4f18\u5148\u961f\u5217\n\u7ed3\u679c\u4e8e\u4e8b\u65e0\u8865\n\u540e\u6765\u89c9\u5f97\u8d2a\u5fc3\u662f\u9519\u7684\n\u53c8\u628a\nvis\u6570\u7ec4\u6539\u6210\u8bb0\u5fc6\u5316\u6570\u7ec4\n\u7ed3\u679c\u53ea\u670940\u5206\n\u6700\u540e\u5224\u4e86\u5224\u8fb9\u754c\nas a result\n100\u5206\n70\u884c\u8fd8\u662f\u6bd4\u8f83\u723d\u7684\n```\n#include<iostream>\n#include<queue>\n#include<cstdlib>\n#include<cstring>\nusing namespace std;\nint n,m,sx,sy,fx,fy,r1,a[100][100],vis[100][100][10],dir[4][2]={{-1,0},{0,1},{1,0},{0,-1}};\nchar r;\nstruct node{\n\tint x,y,data,dir,e2,e3;\n};\nvoid bfs(){\nqueue<node>q;\nq.push((node){sx,sy,0,r1,0,0});\nfor(int i=0;i<100;i++){\n\tfor(int j=0;j<100;j++){\n\t\tfor(int k=0;k<10;k++){\n\t\t\tvis[i][j][k]=0x7fffffff;\n\t\t}\n\t}\n}\nvis[sx][sy][r1]=0;\nwhile(!q.empty()){\n\tnode x=q.front();q.pop();\n//\tcout<<x.x<<\" \"<<x.y<<\" \"<<x.dir<<\" \"<<x.data<<\" \"<<x.e2<<\" \"<<x.e3<<endl;\n//\tsystem(\"pause\");\n\tif(x.e2){\n\t\tint nx=x.x+dir[x.dir][0];int ny=x.y+dir[x.dir][1];\n\t\tif(nx<1||ny<1||nx>=n||ny>=m||a[nx][ny]||a[nx+1][ny]||a[nx][ny+1]||a[nx+1][ny+1]||vis[nx][ny][x.dir]<=x.data)continue;\n\t\tvis[nx][ny][x.dir]=x.data;\n\t\tq.push((node){nx,ny,x.data,x.dir,x.e2-1,x.e3});\n\t\tcontinue;\n\t}\n\tif(x.e3){\n\t\tint nx=x.x+dir[x.dir][0];int ny=x.y+dir[x.dir][1];\n\t\tif(nx<1||ny<1||nx>=n||ny>=m||a[nx][ny]||a[nx+1][ny]||a[nx][ny+1]||a[nx+1][ny+1])continue;\n\t\tif(x.e3-1==0&&vis[nx][ny][x.dir]<=x.data)continue;\n\t\tif(x.e3-1==0)vis[nx][ny][x.dir]=x.data;\n\t\tq.push((node){nx,ny,x.data,x.dir,x.e2,x.e3-1});\n\t\tcontinue;\n\t}\n//       if(x.x==fx&&x.y==fy){\n//\t\t cout<<x.data;//exit(0);\n//\t   }\n\tfor(int i=1;i<=3;i++){\n\t\tint nx=x.x+dir[x.dir][0];int ny=x.y+dir[x.dir][1];\n\t\tif(nx<1||ny<1||nx>=n||ny>=m||a[nx][ny]||a[nx+1][ny]||a[nx][ny+1]||a[nx+1][ny+1])continue;\n\t\t//cout<<vis[nx][ny][x.dir]<<endl;\n\t\tif(i==1&&vis[nx][ny][x.dir]>x.data+1){\n\t\t\tvis[nx][ny][x.dir]=x.data+1;\n\t\t\tq.push((node){nx,ny,x.data+1,x.dir,x.e2,x.e3});\n\t\t}\n\t\tif(i==2){\n\t\t\t//vis[x][y][x.dir]=1;\n\t\t\tq.push((node){nx,ny,x.data+1,x.dir,x.e2+1,x.e3});\n\t\t}\n\t\tif(i==3){\n\t\t\t//vis[x][y][x.dir]=1;\n\t\t\tq.push((node){nx,ny,x.data+1,x.dir,x.e2,x.e3+2});\n\t\t}\n\t}\n\t   if(vis[x.x][x.y][(x.dir+1)%4]>x.data+1){\n\t\t\t\tvis[x.x][x.y][(x.dir+1)%4]=x.data+1;\n\t\t\t\tq.push((node){x.x,x.y,x.data+1,(x.dir+1)%4,x.e2,x.e3});\n\t\t}\n\t   if(vis[x.x][x.y][(x.dir+3)%4]>x.data+1){\n\t\t\tvis[x.x][x.y][(x.dir+3)%4]=x.data+1;\n\t\t\tq.push((node){x.x,x.y,x.data+1,(x.dir+3)%4,x.e2,x.e3});\n\t\t\t}\n       }\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin>>a[i][j];\n\t\t}\n\t}\n\tcin>>sx>>sy>>fx>>fy>>r;\n\tif(r=='N')r1=0;\n\tif(r=='E')r1=1;\n\tif(r=='S')r1=2;\n\tif(r=='W')r1=3;\n\tbfs();\n\tif(vis[fx][fy][0]==0x7fffffff&&vis[fx][fy][1]==0x7fffffff&&vis[fx][fy][2]==0x7fffffff&&vis[fx][fy][3]==0x7fffffff)cout<<-1;\n\telse cout<<min(min(vis[fx][fy][0],vis[fx][fy][1]),min(vis[fx][fy][2],vis[fx][fy][3]));\n}\n```\n",
        "postTime": 1572237421,
        "uid": 157571,
        "name": "anda",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u672c\u849f\u84bb\u8f9b\u8f9b\u82e6\u82e6\u8c03\u4e86\u4e24\u4e2a\u5c0f\u65f6\uff0c\u6700\u540e\u53d1\u73b0\u7edf\u8ba1\u65f6\u95f4\u65f6\u5c06dis[to.x][to.y]\u5199\u6210\u4e86dis[to.x][to.x]\uff0c\u5fc3\u7d2f~~~\n\n\u7531\u4e8e\u662f\u6700\u77ed\u65f6\u95f4\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528bfs\uff0c\u4ee5\u4e0b\u4ee3\u7801\u7565\u957f\uff0c\u4f46\u81ea\u6211\u611f\u89c9\u8fd8\u662f\u6bd4\u8f83\u6e05\u6670\u7684\u5427~~\u6216\u8bb8\u5427~~\uff0c\u6ce8\u91ca\u5728\u6587\u4e2d\n\n```cpp\n#include <queue>\n#include <cstdio>\n#include <cstring>\n\nusing namespace std;\n\nconst int N = 60;\n\n\nint n, m;\nint mp[N][N];\nint vis[N][N][4], dis[N][N][4];//vis\u5224\u91cd\uff0cdis\u8bb0\u5f55\u65f6\u95f4\n//\u6700\u540e\u4e00\u7ef4\u8868\u793a\u5728\u8be5\u70b9\u7684\u671d\u5411\n\nstruct node {\n\tint x;\n\tint y;\n\tchar dir;\n}be, en;\n\nqueue <node> q;\n\nbool check(node t) {\n\tif(t.x < 1 || t.x >= n || t.y < 1 || t.y >= m) return false;//\u8fb9\u754c\u81ea\u5df1\u5e26\u503c\u4f53\u4f1a\u4e00\u4e0b\n\treturn true;\n}\n\nvoid bfs() {\n\tq.push(be);\n\t\n\twhile(!q.empty()) {\n\t\tnode now = q.front();  q.pop();\n\t\t/*printf(\"%d %d %c \", now.x, now.y, now.dir);\n\t\tif(now.dir == 'W') printf(\"%d %d\\n\", 0, dis[now.x][now.y][0]);\n\t\telse if(now.dir == 'S') printf(\"%d %d\\n\", 1, dis[now.x][now.y][1]);\n\t\telse if(now.dir == 'E') printf(\"%d %d\\n\", 2, dis[now.x][now.y][2]);\n\t\telse if(now.dir == 'N') printf(\"%d %d\\n\", 3, dis[now.x][now.y][3]);*/\n        //\u8c03\u8bd5\u7684\n\t\t\n\t\tfor(int i = 1; i <= 3; i ++) {// \u679a\u4e3e\u5411\u4e00\u4e2a\u65b9\u5411\u8d70\u7684\u8ddd\u79bb\n\t\t\tif(now.dir == 'W') {//\u5411\u5de6\u8d70\n\t\t\t\tint flag = 1;\n\t\t\t\tnode to = now;\n\t\t\t\tto.y -= i;\n\t\t\t\tif(!check(to)) continue;\n\t\t\t\tif(vis[to.x][to.y][0]) continue;\n\t\t\t\tfor(int j = 1; j <= i; j ++) {//\u7531\u4e8e\u8981\u8d70i\u6b65\uff0c\u6240\u4ee5\u8d70i\u6b65\u7684\u8def\u5f84\u4e0a\u4e0d\u80fd\u6709\u969c\u788d\uff0c\u4e0b\u540c\n\t\t\t\t\tif(mp[to.x][now.y - j] || mp[to.x + 1][now.y - j]) flag = 0;//\u6a21\u62df\u4e00\u4e0b\u5c31\u53ef\u4ee5\u5f97\u51fa\u7684\u89c4\u5f8b\n                    //\u53ef\u4ee5\u5148\u8bd5\u8d70\u4e00\u6b65\uff0c\u7136\u540e\u7c7b\u63a8\n\t\t\t\t\tif(!flag) break;//\u6709\u4e00\u4e2a\u969c\u788d\u90fd\u4e0d\u884c\n\t\t\t\t}\n\t\t\t\tif(!flag) continue;\n\t\t\t\tvis[to.x][to.y][0] = 1;\n\t\t\t\tdis[to.x][to.y][0] = dis[now.x][now.y][0] + 1;\n\t\t\t\tq.push(to);\n\t\t\t\t\n\t\t\t\tif(to.x == en.x && to.y == en.y) {\n\t\t\t\t\tprintf(\"%d\\n\", dis[to.x][to.y][0]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\telse if(now.dir == 'S') {//\u5411\u4e0b\u8d70\n\t\t\t\tint flag = 1;\n\t\t\t\tnode to = now;\n\t\t\t\tto.x += i;\n\t\t\t\tif(!check(to)) continue;\n\t\t\t\tif(vis[to.x][to.y][1]) continue;\n\t\t\t\tfor(int j = 1; j <= i; j ++) {\n\t\t\t\t\tif(mp[now.x + j + 1][to.y] || mp[now.x + j + 1][to.y + 1]) flag = 0;\n\t\t\t\t\tif(!flag) break;\n\t\t\t\t}\n\t\t\t\tif(!flag) continue;\n\t\t\t\tvis[to.x][to.y][1] = 1;\n\t\t\t\tdis[to.x][to.y][1] = dis[now.x][now.y][1] + 1;\n\t\t\t\tq.push(to);\n\t\t\t\t\n\t\t\t\tif(to.x == en.x && to.y == en.y) {\n\t\t\t\t\tprintf(\"%d\\n\", dis[to.x][to.y][1]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\telse if(now.dir == 'E') {//\u5411\u53f3\u8d70\n\t\t\t\tint flag = 1;\n\t\t\t\tnode to = now;\n\t\t\t\tto.y += i;\n\t\t\t\tif(!check(to)) continue;\n\t\t\t\tif(vis[to.x][to.y][2]) continue;\n\t\t\t\tfor(int j = 1; j <= i; j ++) {\n\t\t\t\t\tif(mp[to.x][now.y + j + 1] || mp[to.x + 1][now.y + j + 1]) flag = 0;\n\t\t\t\t\tif(!flag) break;\n\t\t\t\t}\n\t\t\t\tif(!flag) continue;\n\t\t\t\tvis[to.x][to.y][2] = 1;\n\t\t\t\tdis[to.x][to.y][2] = dis[now.x][now.y][2] + 1;\n\t\t\t\tq.push(to);\n\t\t\t\t\n\t\t\t\tif(to.x == en.x && to.y == en.y) {\n\t\t\t\t\tprintf(\"%d\\n\", dis[to.x][to.y][2]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\telse if(now.dir == 'N') {//\u5411\u4e0a\u8d70\n\t\t\t\tint flag = 1;\n\t\t\t\tnode to = now;\n\t\t\t\tto.x -= i;\n\t\t\t\tif(!check(to)) continue;\n\t\t\t\tif(vis[to.x][to.y][3]) continue;\n\t\t\t\tfor(int j = 1; j <= i; j ++) {\n\t\t\t\t\tif(mp[now.x - j][to.y] || mp[now.x - j][to.y + 1]) flag = 0;\n\t\t\t\t\tif(!flag) break;\n\t\t\t\t}\n\t\t\t\tif(!flag) continue;\n\t\t\t\tvis[to.x][to.y][3] = 1;\n\t\t\t\tdis[to.x][to.y][3] = dis[now.x][now.y][3] + 1;\n\t\t\t\tq.push(to);\n\t\t\t\t\n\t\t\t\tif(to.x == en.x && to.y == en.y) {\n\t\t\t\t\tprintf(\"%d\\n\", dis[to.x][to.y][3]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tfor(int i = 1; i <= 2; i ++) {//\u679a\u4e3e\u8f6c\u5f2f\n\t\t\tif(i == 1) {//\u5411\u5de6\u8f6c\n\t\t\t\tnode to;\n\t\t\t\tto = now;\n\t\t\t\t\n\t\t\t\tif(to.dir == 'W') {\n\t\t\t\t\tto.dir = 'S';\n\t\t\t\t\tif(vis[to.x][to.y][1]) continue;\n\t\t\t\t\tvis[to.x][to.y][1] = 1;\n\t\t\t\t\tdis[to.x][to.y][1] = dis[now.x][now.y][0] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(to.dir == 'S') {\n\t\t\t\t\tto.dir = 'E';\n\t\t\t\t\tif(vis[to.x][to.y][2]) continue;\n\t\t\t\t\tvis[to.x][to.y][2] = 1;\n\t\t\t\t\tdis[to.x][to.y][2] = dis[now.x][now.y][1] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(to.dir == 'E') {\n\t\t\t\t\tto.dir = 'N';\n\t\t\t\t\tif(vis[to.x][to.y][3]) continue;\n\t\t\t\t\tvis[to.x][to.y][3] = 1;\n\t\t\t\t\tdis[to.x][to.y][3] = dis[now.x][now.y][2] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(to.dir == 'N') {\n\t\t\t\t\tto.dir = 'W';\n\t\t\t\t\tif(vis[to.x][to.y][0]) continue;\n\t\t\t\t\tvis[to.x][to.y][0] = 1;\n\t\t\t\t\tdis[to.x][to.y][0] = dis[now.x][now.y][3] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\telse { //\u5411\u53f3\u8f6c\n\t\t\t\tnode to;\n\t\t\t\tto = now;\n\t\t\t\t\n\t\t\t\tif(to.dir == 'W') {\n\t\t\t\t\tto.dir = 'N';\n\t\t\t\t\tif(vis[to.x][to.y][3]) continue;\n\t\t\t\t\tvis[to.x][to.y][3] = 1;\n\t\t\t\t\tdis[to.x][to.y][3] = dis[now.x][now.y][0] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(to.dir == 'S') {\n\t\t\t\t\tto.dir = 'W';\n\t\t\t\t\tif(vis[to.x][to.y][0]) continue;\n\t\t\t\t\tvis[to.x][to.y][0] = 1;\n\t\t\t\t\tdis[to.x][to.y][0] = dis[now.x][now.y][1] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(to.dir == 'E') {\n\t\t\t\t\tto.dir = 'S';\n\t\t\t\t\tif(vis[to.x][to.y][1]) continue;\n\t\t\t\t\tvis[to.x][to.y][1] = 1;\n\t\t\t\t\tdis[to.x][to.y][1] = dis[now.x][now.y][2] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(to.dir == 'N') {\n\t\t\t\t\tto.dir = 'E';\n\t\t\t\t\tif(vis[to.x][to.y][2]) continue;\n\t\t\t\t\tvis[to.x][to.y][2] = 1;\n\t\t\t\t\tdis[to.x][to.y][2] = dis[now.x][now.y][3] + 1;\n\t\t\t\t\tq.push(to);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tputs(\"-1\"); //\u5982\u679c\u4e00\u76f4\u6ca1\u627e\u5230\u5c31\u4ee3\u8868\u6ca1\u6709\u5230\u7ec8\u70b9\u7684\u8def\u5f84\n}\n\nint main() {\n\tscanf(\"%d %d\", &n, &m);\n\t\n\tfor(int i = 1; i <= n; i ++)\n\t\tfor(int j = 1; j <= m; j ++)\n\t\t\tscanf(\"%d\", &mp[i][j]); \n\t\n\tfor(int i = 1; i <= 4; i ++)\n\t\tscanf(\"%d %d %d %d\", &be.x, &be.y, &en.x, &en.y);\n\tbe.dir = getchar();\n\t\n\tif(be.x == en.x && be.y == en.y) {puts(\"0\"); return 0;} //\u8d77\u70b9\u4e0e\u7ec8\u70b9\u91cd\u590d\uff0c\u4e0d\u7528\u6d88\u8017\u65f6\u95f4\n\tif(mp[be.x][en.x] || mp[be.x + 1][be.y] || mp[be.x][be.y + 1] || mp[be.x + 1][be.y + 1]) {puts(\"-1\"); return 0;} //\u673a\u5668\u4eba\u7684\u521d\u59cb\u4f4d\u7f6e\u5c31\u8986\u76d6\u6709\u969c\u788d\uff0c\u8fd9\u79cd\u60c5\u51b5\u662f\u975e\u6cd5\u7684\n\t\n\tbfs();\n\t\n\treturn 0;\n}\n```\n",
        "postTime": 1568897753,
        "uid": 160501,
        "name": "\u4e0e\u6211\u5e38\u5728",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u7531\u4e8e\u8fd9\u9053\u9898\u521a\u4e86\u4e09\u5929\u624d\u505a\u5b8c\uff08\u8fd8\u4e0d\u662f\u56e0\u4e3a\u6211\u83dc\u2026\u2026\uff09\uff0c\u4e8e\u662f\u5199\u4e00\u5199\u9898\u89e3\u8bb0\u5f55\u4e00\u4e0b\u2026\u2026\n\n\u9898\u89e3\u4e2d\u5171\u67093\u4efd\u4ee3\u7801\uff0c\u524d\u4e24\u4efd\u53ef\u5ffd\u7565\uff0c\u7b2c\u4e09\u4efd\u4f1a\u6709\u90e8\u5206\u89e3\u91ca\u3002\u4ee3\u7801\u4e2d\u4f1a\u6709\u5f88\u591a\u91cd\u590d\u5185\u5bb9\u548c\u679a\u4e3e\u5185\u5bb9\uff0c\u5176\u5b9e\u53ef\u4ee5\u5b58\u4e00\u4e0b\u8fc7\u7a0b\u540e\u5faa\u73af\u505a\u3002\n\n[\u70b9\u6211\u770b\u9898](https://www.luogu.org/problem/P1126)\n\n\u9996\u5148\uff0c\u6211\u53d1\u73b0\u4e86\u8fd9\u53e5\u8bdd\uff1a\u201c\u5982\u679c\u65e0\u6cd5\u5230\u8fbe\uff0c\u8f93\u51fa\u22121\u3002\u201d\n\n\u4e8e\u662f\u4ea4\u4e86\u4e00\u53d1-1\u2026\u2026 score:20\u3002\n\n\u5f00\u59cb\u4e13\u5fc3\u770b\u9898\u3002\n\n\u770b\u5b8c\u4fbf\u77e5\u9053\u662f\u641c\u7d22\uff0c\u4f46\u9700\u8981\u8003\u8651\u7684\u662f\u673a\u5668\u4eba\u7ad9\u5728\u683c\u70b9\u4e0a\uff0c\u4f46\u969c\u788d\u7269\u5728\u683c\u5b50\u91cc\uff0c\u8fd9\u6837\u5982\u679c\u5168\u5b58\u5728\u4e00\u5f20\u56fe\u91cc\u80af\u5b9a\u4f1a\u4e71\u3002\u7136\u9e45\u5b58\u5728\u4e24\u4e2a\u56fe\u91cc\u6211\u80af\u5b9a\u4f1a\u4e71\u2026\u2026\n\n\u4e8e\u662f\u7a81\u53d1\u5947\u60f3\uff0c\u53ea\u8bb0\u5f55\u673a\u5668\u4eba\u5de6\u4e0a\u89d2\u7684\u683c\u5b50\u7684\u4f4d\u7f6e\uff0c\u5224\u65ad\u80fd\u5426\u8d70\u5230\u4e0b\u4e00\u683c\u65f6\u987a\u5e26\u5224\u65ad\u5468\u56f4\u4e09\u4e2a\u683c\u5b50\uff0c\u65b9\u5411\u5355\u72ec\u5224\u65ad\u4e0d\u5c31\u6ca1\u4e86\uff1f\n\n\u4e8e\u662f\u5174\u594b\u5730\u5199\u4e86\u4e00\u53d1\u6df1\u641c\uff08\u6ce8\u610f\uff0c\u662f\u6df1\u641c,\u4f1aTLE+RE+\u2026\u2026\uff09\u6253\u5b8c\u53d1\u73b0\u6837\u4f8b\u8fc7\u4e0d\u4e86\u2026\u2026\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<queue>\n#include<algorithm>\n#define maxn 100\nusing namespace std;\n\nint n,m,stx,sty,enx,eny,to,ans=47483647;\nint f[maxn][maxn][5];\nint dx[5]={0,1,0,-1,0};\nint dy[5]={0,0,1,0,-1};\nbool map[maxn][maxn];\n\ninline int read()\n{\n    int x=0,f=1;char ch=getchar();\n    while(ch<'0'||ch>'9') {if(ch=='-') f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9') x=10*x+ch-'0',ch=getchar();\n    return f*x;\n}\n\nvoid dfs(int x,int y,int pos,int sum)\n{\n    if(x==enx&&y==eny) {ans=min(ans,sum);return;}\n    if(sum>f[x][y][pos]) return;\n    f[x][y][pos]=sum;\n    if(pos==1)\n    {\n        for(register int i=1;i<=3;i++)\n        {\n            int xx=x+i,yy=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,2,sum+2);\n            xx=x-i;y=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,4,sum+2);\n            xx=x;yy=y+i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,1,sum+1);\n            xx=x;yy=y-i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,3,sum+3);\n        }\n    }else\n    if(pos==2)\n    {\n        for(register int i=1;i<=3;i++)\n        {\n            int xx=x+i,yy=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,2,sum+1);\n            xx=x-i;y=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,4,sum+3);\n            xx=x;yy=y+i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,1,sum+2);\n            xx=x;yy=y-i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,3,sum+2);\n        }\n    }else\n    if(pos==3)\n    {\n        for(register int i=1;i<=3;i++)\n        {\n            int xx=x+i,yy=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,2,sum+2);\n            xx=x-i;y=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,4,sum+2);\n            xx=x;yy=y+i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,1,sum+3);\n            xx=x;yy=y-i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,3,sum+1);\n        }\n    }else\n    if(pos==4)\n    {\n        for(register int i=1;i<=3;i++)\n        {\n            int xx=x+i,yy=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,2,sum+3);\n            xx=x-i;y=y;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,4,sum+1);\n            xx=x;yy=y+i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,1,sum+2);\n            xx=x;yy=y-i;\n            if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) dfs(xx,yy,3,sum+2);\n        }\n    }\n}\n\nint main()\n{\n    n=read(),m=read();\n    for(register int i=1;i<=n;i++)\n        for(register int j=1;j<=m;j++)\n            map[i][j]=read();\n    stx=read(),sty=read(),enx=read(),eny=read();\n    char ch;\n    while(ch!='E'&&ch!='S'&&ch!='W'&&ch!='N') ch=getchar();\n    if(ch=='E') to=1;\n    else if(ch=='S') to=2;\n    else if(ch=='W') to=3;\n    else if(ch=='N') to=4;\n    for(register int i=1;i<=n;i++)\n        for(register int j=1;j<=n;j++) \n            f[i][j][1]=f[i][j][2]=f[i][j][3]=f[i][j][4]=47483647;\n    dfs(stx,sty,to,0);\n    printf(\"%d\",ans==47483647? -1:ans);\n\n    return 0;\n}\n```\n2AC+3TLE+5WA\n\n\u4e8e\u662f\u75af\u72c2\u5dee\u9519\u2026\u2026\n\n\u7b2c\u4e8c\u5929\uff0c\u8521\u8001\u5e08\u63d0\u793a\u6211\uff1a\u9996\u5148\uff0c\u7f51\u683c\u56fe\u7528DFS\u5c31\u662f\u4e2a~~SB~~\u9519\u8bef\u2026\u2026\n\n\u7ee7\u7eed\u6539\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<queue>\n#include<algorithm>\n#define maxn 1000\nusing namespace std;\n\nint n,m,stx,sty,enx,eny,ans=47483647;\nint map[maxn][maxn],f[maxn][maxn][5];\nstruct node\n{\n    int x,y,pos,val;\n};\nqueue<node> q;\n\ninline int read()\n{\n    int x=0,f=1;char ch=getchar();\n    while(ch<'0'||ch>'9') {if(ch=='-') f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9') x=10*x+ch-'0',ch=getchar();\n    return f*x;\n}\n\nvoid bfs()\n{\n    while(!q.empty())\n    {\n        node tmp=q.front();q.pop();\n        int x=tmp.x,y=tmp.y,pos=tmp.pos,sum=tmp.val;\n        if(x==enx&&y==eny) {ans=min(ans,sum);break;}\n        if(sum>=f[x][y][pos]) continue;\n        f[x][y][pos]=sum;\n        if(pos==1)\n        {\n            for(register int i=1;i<=3;i++)\n            {\n                int xx=x+i,yy=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,2,sum+2});\n                xx=x-i;y=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,4,sum+2});\n                xx=x;yy=y+i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,1,sum+1});\n                xx=x;yy=y-i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,3,sum+3});\n            }\n        }else\n        if(pos==2)\n        {\n            for(register int i=1;i<=3;i++)\n            {\n                int xx=x+i,yy=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,2,sum+1});\n                xx=x-i;y=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,4,sum+3});\n                xx=x;yy=y+i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,1,sum+2});\n                xx=x;yy=y-i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,3,sum+2});\n            }\n        }else\n        if(pos==3)\n        {\n            for(register int i=1;i<=3;i++)\n            {\n                int xx=x+i,yy=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,2,sum+2});\n                xx=x-i;y=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,4,sum+2});\n                xx=x;yy=y+i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,1,sum+3});\n                xx=x;yy=y-i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,3,sum+1});\n            }\n        }else\n        if(pos==4)\n        {\n            for(register int i=1;i<=3;i++)\n            {\n                int xx=x+i,yy=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,2,sum+3});\n                xx=x-i;y=y;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,4,sum+1});\n                xx=x;yy=y+i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,1,sum+2});\n                xx=x;yy=y-i;\n                if((!map[xx][yy])&&(!map[xx+1][yy])&&(!map[xx][yy+1])&&(!map[xx+1][yy+1])&&(xx>=1)&&(xx<n)&&(yy>=1)&&(yy<m)) q.push((node){xx,yy,3,sum+2});\n            }\n        }\n    }\n}\n\nint main()\n{\n    n=read(),m=read();\n    for(register int i=1;i<=n;i++)\n        for(register int j=1;j<=m;j++)\n            map[i][j]=read();\n    stx=read(),sty=read(),enx=read(),eny=read();\n    char ch;\n    int to; \n    while(ch!='E'&&ch!='S'&&ch!='W'&&ch!='N') ch=getchar();\n    if(ch=='E') to=1;\n    else if(ch=='S') to=2;\n    else if(ch=='W') to=3;\n    else if(ch=='N') to=4;\n    for(register int i=1;i<=n;i++)\n        for(register int j=1;j<=n;j++) \n            f[i][j][1]=f[i][j][2]=f[i][j][3]=f[i][j][4]=47483647;\n    q.push((node){stx,sty,to,0});\n    bfs();\n    \n    printf(\"%d\",ans==47483647? -1:ans);\n\n    return 0;\n}\n```\n\n\u6539\u5b8c\u8fd8\u662f\u4e0d\u5bf9\u554a\uff0c\u8fde\u7ed3\u679c\u90fd\u4e00\u6837\u2026\u2026\n\n\u7b2c\u4e09\u5929\u75af\u72c2\u8be2\u95ee\u673a\u623f\u5404\u5927\u4f6c\u795e\u4ed9\uff0c\u67d0W\u59d3\u795e\u4ed9\u63d0\u9192\uff1a\u8f93\u51faq\u4e2d\u5f39\u51fa\u7684\u70b9\u627e\u627e\u8def\u5f84\u5427\n\n\u627e\u4e86\u51e0\u4e2a\u70b9\u4fbf\u53d1\u73b0\u4e86\u95ee\u9898\uff1a\u673a\u5668\u4eba\u60f3\u53bb\u4e0b\u4e00\u4e2a\u70b9\u53ef\u4ee5\u8d701\u62162\u62163\u6b65\uff0c\u7136\u9e45\u56e0\u4e3a\u6211\u76f4\u63a5\u5224\u65ad\u7684\u76ee\u7684\u70b9\u662f\u5426\u5408\u6cd5\uff0c\u4e2d\u95f4\u70b9\u662f\u5426\u5408\u6cd5\u6ca1\u6709\u5224\u65ad\u2026\u2026\n\n\u5728\u67d0D\u59d3\u5927\u4f6c\u5632\u7b11\u4e0b\u624b\u52a8\u4fee\u6539\u5b8c\u6bd5\uff0c\u4fbf\u76f4\u63a5AC(\u957f\u8212\u4e00\u53e3\u6c14\uff09\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<queue>\n#include<algorithm>\n#define maxn 1000\nusing namespace std;\n\nint n,m,stx,sty,enx,eny,ans=47483647;          //\u53d8\u91cf\u5e94\u8be5\u5f88\u597d\u7406\u89e3\u5427\u2026\u2026\nint map[maxn][maxn],f[maxn][maxn][5];          //map\u5b58\u5730\u56fe\uff0cf\u8bb0\u5f55\u5750\u6807\u4e3ax,y,\u4f4d\u7f6e\u4e3apos\u7684\u6700\u5c0f\u503c\nstruct node\n{\n    int x,y,pos,val;\n};\nqueue<node> q;                                 //bfs\u7528\u7684\u961f\u5217\n\ninline int read()                              //\u53ef\u5ffd\u7565\u7684\u5feb\u8bfb\uff0c\u6ca1\u5565\u7528\n{\n    int x=0,f=1;char ch=getchar();\n    while(ch<'0'||ch>'9') {if(ch=='-') f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9') x=10*x+ch-'0',ch=getchar();\n    return f*x;\n}\n\ninline bool pd1(int x,int y) {return ((!map[x][y])&&(!map[x+1][y])&&(!map[x][y+1])&&(!map[x+1][y+1]));}\ninline bool pd2(int x,int y) {return ((x>=1)&&(x<n)&&(y>=1)&&(y<m));}\n\n/*\n\t\u5224\u65ad\u673a\u5668\u4eba\u7684\u4f4d\u7f6e\u662f\u5426\u5408\u6cd5\n\t\u5224\u65ad\u70b9\u5750\u6807\u662f\u5426\u5408\u6cd5\n*/\n\nvoid bfs()\n{\n    while(!q.empty())\n    {\n        node tmp=q.front();q.pop();\n        int x=tmp.x,y=tmp.y,pos=tmp.pos,sum=tmp.val;\n        if(x==enx&&y==eny) {ans=min(ans,sum);continue;}\n        if(sum>=f[x][y][pos]) continue;\n        f[x][y][pos]=sum;                                                //\u505a\u8bb0\u5f55\n        //\u4ee5\u4e0b\u5185\u5bb9\u53ef\u80fd\u4f1a\u5f15\u8d77\u90e8\u5206\u4eba\u751f\u7406\u548c\u5fc3\u7406\u4e0a\u7684\u4e0d\u9002\n\t\t//\u7b80\u5355\u8bf4\u5c31\u662f\u52064\u4e2a\u65b9\u5411\u5224\u65ad\u8d70\u51e0\u6b65\uff0c\u5982\u679c\u6ca1\u95ee\u9898\u4fbf\u52a0\u5165\u961f\u5217\n\t\t//\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u8fd9\u6bb5\u2026\u2026\n\t\tif(pos==1)\n        {\n            int xx=x+1,yy=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+2});\n            xx=x-1;y=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+2});\n            xx=x;yy=y+1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+1});\n            xx=x;yy=y-1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+3});\n            \n            xx=x+2,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+2});\n            xx=x-2;y=y;\n            if(pd2(xx,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+2});\n            xx=x;yy=y+2;\n            if(pd2(xx,yy)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+1});\n            xx=x;yy=y-2;\n            if(pd2(xx,yy)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+3});\n            \n            xx=x+3,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-2,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+2});\n            xx=x-3;y=y;\n            if(pd2(xx,yy)&&pd1(xx+2,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+2});\n            xx=x;yy=y+3;\n            if(pd2(xx,yy)&&pd1(xx,yy-2)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+1});\n            xx=x;yy=y-3;\n            if(pd2(xx,yy)&&pd1(xx,yy+2)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+3});\n        }else\n        if(pos==2)\n        {\n            int xx=x+1,yy=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+1});\n            xx=x-1;y=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+3});\n            xx=x;yy=y+1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+2});\n            xx=x;yy=y-1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+2});\n\n            xx=x+2,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+1});\n            xx=x-2;y=y;\n            if(pd2(xx,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+3});\n            xx=x;yy=y+2;\n            if(pd2(xx,yy)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+2});\n            xx=x;yy=y-2;\n            if(pd2(xx,yy)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+2});\n\n            xx=x+3,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-2,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+1});\n            xx=x-3;y=y;\n            if(pd2(xx,yy)&&pd1(xx+2,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+3});\n            xx=x;yy=y+3;\n            if(pd2(xx,yy)&&pd1(xx,yy-2)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+2});\n            xx=x;yy=y-3;\n            if(pd2(xx,yy)&&pd1(xx,yy+2)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+2});\n        }else\n        if(pos==3)\n        {\n            int xx=x+1,yy=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+2});\n            xx=x-1;y=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+2});\n            xx=x;yy=y+1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+3});\n            xx=x;yy=y-1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+1});\n\n            xx=x+2,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+2});\n            xx=x-2;y=y;\n            if(pd2(xx,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+2});\n            xx=x;yy=y+2;\n            if(pd2(xx,yy)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+3});\n            xx=x;yy=y-2;\n            if(pd2(xx,yy)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+1});\n\n            xx=x+3,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-2,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+2});\n            xx=x-3;y=y;\n            if(pd2(xx,yy)&&pd1(xx+2,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+2});\n            xx=x;yy=y+3;\n            if(pd2(xx,yy)&&pd1(xx,yy-2)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+3});\n            xx=x;yy=y-3;\n            if(pd2(xx,yy)&&pd1(xx,yy+2)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+1});\n        }else\n        if(pos==4)\n        {\n            int xx=x+1,yy=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+3});\n            xx=x-1;y=y;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+1});\n            xx=x;yy=y+1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+2});\n            xx=x;yy=y-1;\n            if(pd2(xx,yy)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+2});\n\n            xx=x+2,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+3});\n            xx=x-2;y=y;\n            if(pd2(xx,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+1});\n            xx=x;yy=y+2;\n            if(pd2(xx,yy)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+2});\n            xx=x;yy=y-2;\n            if(pd2(xx,yy)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+2});\n\n            xx=x+3,yy=y;\n            if(pd2(xx,yy)&&pd1(xx-2,yy)&&pd1(xx-1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,2,sum+3});\n            xx=x-3;y=y;\n            if(pd2(xx,yy)&&pd1(xx+2,yy)&&pd1(xx+1,yy)&&pd1(xx,yy)) q.push((node){xx,yy,4,sum+1});\n            xx=x;yy=y+3;\n            if(pd2(xx,yy)&&pd1(xx,yy-2)&&pd1(xx,yy-1)&&pd1(xx,yy)) q.push((node){xx,yy,1,sum+2});\n            xx=x;yy=y-3;\n            if(pd2(xx,yy)&&pd1(xx,yy+2)&&pd1(xx,yy+1)&&pd1(xx,yy)) q.push((node){xx,yy,3,sum+2});\n        }\n    }\n}\n\nint main()\n{\n    n=read(),m=read();\n    for(register int i=1;i<=n;i++)\n        for(register int j=1;j<=m;j++)\n            map[i][j]=read();\n    stx=read(),sty=read(),enx=read(),eny=read();\n    char ch;\n    int to; \n    while(ch!='E'&&ch!='S'&&ch!='W'&&ch!='N') ch=getchar();\n\t//\u8bfb\u5165\u90e8\u5206\n    if(ch=='E') to=1;\n    else if(ch=='S') to=2;\n    else if(ch=='W') to=3;\n    else if(ch=='N') to=4;\n    for(register int i=1;i<=n;i++)\n        for(register int j=1;j<=n;j++) \n            f[i][j][1]=f[i][j][2]=f[i][j][3]=f[i][j][4]=47483647;\n\t//\u521d\u59cb\u5316\n    q.push((node){stx,sty,to,0});\n    bfs();\n    //\u7ed3\u675f\u2026\u2026\n    printf(\"%d\",ans==47483647? -1:ans);\n\n    return 0;\n}\n```\n\u7ed3\u675f",
        "postTime": 1567871164,
        "uid": 122375,
        "name": "Horizon\u00b7Sun",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "NO.8 \u8c03\u8bd5\u4e86N\u904d\uff0c\u7ec8\u4e8e\u8fc7\u4e86\uff01\uff01\uff01\u5176\u5b9e\u8fd9\u9053\u9898\u4e0d\u662f\u5f88\u96be\uff0c\u5c31\u662f\u7ec6\u8282\u5f88\u591a\uff0c\u5bfc\u81f4\u6211\u5728\u4e00\u4e9b\u5c0f\u5730\u65b9\u6539\u4e86\u53c8\u6539\u3002\u3002\u3002\n\n## \u5927\u81f4\u601d\u8def\uff1a\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6e90\u70b9\u548c\u4e00\u4e2a\u76ee\u6807\u70b9\uff0c\u673a\u5668\u4eba\u7ad9\u5728\u6e90\u70b9\uff0c\u6c42\u4e00\u6761\u8d39\u65f6\u6700\u5c11\u7684\u8def\u5f84\u4f7f\u673a\u5668\u4eba\u80fd\u591f\u5230\u8fbe\u76ee\u6807\u70b9\u3002\u4f7f\u7528**\u5e7f\u641c+\u526a\u679d**\uff0c\u673a\u5668\u4eba\u6240\u5728\u7684\u70b9\u7531\u4e09\u4e2a\u5143\u7d20\u6784\u6210\u2014\u2014\u6a2a\u5750\u6807x\uff0c\u7eb5\u5750\u6807y\uff0c\u65b9\u5411dir\u3002\u5bf9\u673a\u5668\u4eba\u5230\u8fbe\u7684\u6bcf\u4e00\u4e2a\u70b9\u8fdb\u884c\u5224\u65ad\uff0c\u82e5\u8be5\u70b9\u5373\u4e3a\u76ee\u6807\u70b9\uff0c\u5219\u8fd4\u56de\u5f53\u524d\u65f6\u95f4\uff0c\u5426\u5219\u6269\u5c55\u5f53\u524d\u5750\u6807\u70b9\uff0c\u89c4\u5b9a\u673a\u5668\u4eba\u5728\u6bcf\u4e2a\u70b9\u6700\u591a\u53ea\u67095\u4e2d\u6269\u5c55\u65b9\u5f0f\uff1a\u5411\u524d\u8d701\u6b65\uff0c2\u6b65\uff0c3\u6b65\uff0c\u5411\u5de6\u8f6c\uff0c\u5411\u53f3\u8f6c\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5411\u524d\uff0c\u5de6\uff0c\u53f3\u90fd\u662f\u9488\u5bf9\u673a\u5668\u4eba\u5f53\u524d\u7684\u65b9\u5411\u800c\u8a00\u7684\uff0c\u6240\u4ee5\u5728\u5b9e\u73b0\u7684\u65f6\u5019\u8981\u6839\u636e\u65b9\u5411\u5206\u522b\u5224\u65ad\u673a\u5668\u4eba\u53ef\u4ee5\u5230\u8fbe\u54ea\u4e9b\u70b9\u3002\u5f53\u7136\uff0c\u4e0d\u8bba\u9009\u62e9\u54ea\u4e2a\u65b9\u5411\uff0c\u5411\u524d\u64cd\u4f5c\u4e5f\u53ea\u4f1a\u5bf9\u6a2a\u5750\u6807\u6216\u7eb5\u5750\u6807\u4e4b\u4e00\u8fdb\u884c\u52a0\u6216\u51cf\u7684\u64cd\u4f5c\u3002\u540c\u7406\uff0cturn left\u548cturn right\u4e5f\u8981\u533a\u522b\u5bf9\u5f85\u3002\n\n**\u6ce8\u610f**\uff1a\u6bcf\u5230\u8fbe\u4e00\u4e2a\u683c\u70b9\uff0c\u5c31\u8981\u5bf9\u8be5\u683c\u70b9\u8fdb\u884c\u6807\u8bb0\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97\u3002\n\n## \u603b\u7ed3\u4e00\u4e0b\u8e29\u8fc7\u7684\u5751\uff1a\n#### \u683c\u70b9\u6982\u5ff5\uff1a\u4e24\u6761\u4e92\u76f8\u5782\u76f4\u76f4\u7ebf\u7684\u4ea4\u70b9\u3002\n\n1\u3001\u7ed9\u5b9a\u4e00\u4e2a\u969c\u788d\u70b9\uff0c\u90a3\u4e48\u8fd9\u4e2a\u969c\u788d\u70b9\u7684\u56db\u4e2a\u9876\u70b9\u6240\u5728\u7684\u683c\u70b9\u90fd\u5e94\u8be5\u8bbe\u4e3a1\uff0c\u5373\u4e0d\u53ef\u8fbe\u3002\n\n2\u3001\u50a8\u85cf\u5ba4\u7684\u56db\u4e2a\u8fb9\u4e0a\u7684\u683c\u70b9\u662f\u4e0d\u53ef\u8fbe\u7684\u3002\n\n3\u3001\u5982\u679c\u5224\u5b9a\u5f53\u524d\u671d\u67d0\u4e2a\u65b9\u5411\u8d70i\u6b65\u5230\u8fbe\u7684\u683c\u70b9\u662f\u4e0d\u53ef\u8fbe\u7684\uff0c\u90a3\u4e48\u8d70i+1\uff0ci+2\u00b7\u00b7\u00b7\u4e00\u5b9a\u4e0d\u53ef\u8fbe\uff08\u56e0\u4e3a\u4e2d\u95f4\u6709\u4e2a\u963b\u788d\u683c\u70b9*\uff0c\u800c\u8d70\u7684\u53c8\u662f\u76f4\u7ebf\uff0c\u5fc5\u7ecf\u8be5\u969c\u788d\u683c\u70b9\uff1a\uff0c\u5c31\u50cf\u8fd9\u6837\uff1a- - - - * - - - -\uff0c\u5047\u8bbe\u673a\u5668\u4eba\u5f53\u524d\u65b9\u5411\u662feast, * \u662f\u4e2a\u969c\u788d\u683c\u70b9\uff0c\u90a3\u4e48* \u4e4b\u540e\u7684\u4efb\u4f55\u4e00\u4e2a\u683c\u70b9\u5747\u65e0\u6cd5\u5230\u8fbe\uff09\u3002\n\n## \u5177\u4f53\u5b9e\u73b0\uff1a\n\n\u961f\u5217Q\u4fdd\u5b58\u8bbf\u95ee\u5230\u4f46\u4ecd\u6ca1\u6709\u88ab\u6269\u5c55\u7684\u70b9\u3002\n\n\u7ed3\u6784\u4f53pos\u4fdd\u5b58\u6bcf\u4e2a\u683c\u70b9\u7684\u72b6\u6001\uff0c\u5305\u62ec\u5750\u6807\uff0c\u65b9\u5411\u548c\u5230\u8fbe\u65f6\u95f4\u3002\n\nint\u7c7b\u578b\u4e8c\u7ef4\u6570\u7ec4a\u4fdd\u5b58\u683c\u70b9\u662f\u5426\u53ef\u8fbe\uff08\u8f93\u5165\u540e\u8bb0\u5f97\u66f4\u65b0\u683c\u70b9\u56db\u5468\u53ef\u8fbe\u6027\uff09\n\nbool\u7c7b\u578b\u4e09\u7ef4\u6570\u7ec4mark\u6807\u8bb0\u5f53\u524d\u683c\u70b9\u662f\u5426\u88ab\u8bbf\u95ee\u8fc7\u3002\uff08\u4e00\u5f00\u59cb\u53ea\u7528\u4e86\u4e8c\u7ef4\u6570\u7ec4\u4fdd\u5b58\u683c\u70b9\u6a2a\u7eb5\u5750\u6807\uff0c\u540e\u6765\u53d1\u73b0\u65b9\u5411\u4e5f\u662f\u4e00\u4e2a\u683c\u70b9\u7684\u4e3b\u952e\uff09\n\n**\u5173\u4e8e\u5de6\u53f3\u65cb\u8f6c**\uff1achar turn(pos now, char dir)\u51fd\u6570\u7528\u6765\u8ba1\u7b97\u5411\u5de6\u8f6c\u548c\u5411\u53f3\u8f6c\u540e\u5f97\u5230\u7684\u65b9\u5411\u3002\u65cb\u8f6c\u53ea\u6539\u53d8\u683c\u70b9\u7684\u65b9\u5411\uff0c\u4e0d\u6539\u53d8\u5750\u6807\u503c\u3002\u5bf9\u5e94bfs\u51fd\u6570\u4e2d\u7684\u5982\u4e0b\u4ee3\u7801\uff1a\n\n\u65cb\u8f6c\u4e5f\u8981\u8d39\u65f6\u95f4\uff01\n\n```cpp\n//\u4ee5turn left\u4e3a\u4f8b\u3002'l'\u662f\u5c0f\u5199\u7684L\uff0c\u4e0d\u662f\u6570\u5b571\ntmp = now;\ntmp.dir = turn(now.dir, 'l');\ntmp.time = now.time + 1;\nif (mark[tmp.x][tmp.y][tmp.dir-'A'] == false)\n{\n\tmark[tmp.x][tmp.y][tmp.dir-'A'] = true;\n\tQ.push(tmp);\n}\n```\n\nbool illegal(int x,int y)\u51fd\u6570\u5224\u65ad\u5f53\u524d\u683c\u70b9\u662f\u5426\u72af\u89c4\uff0c\u4e3atrue\u8868\u793a\u786e\u5b9eillegal\uff0c\u518d\u5411\u524d\u8d70\u5df2\u7ecf\u6ca1\u6709\u610f\u4e49\u4e86\u3002\n\n```cpp\nbool illegal(int x, int y)\n{\n\tif (x <= 0 || x >= n || y <= 0 || y >= m || a[x][y] == 1)\n\t\treturn true;\n\treturn false;\n}\n```\n\u7531\u4e8e\u4e0d\u80fd\u8d70\u8fb9\u754c\uff0c\u6240\u4ee5\u8fd9\u91cc\u8981\u52a0\u4e0a=0||=n||=m\uff1b\n\n**\u5173\u4e8e\u5411\u524d\u79fb\u52a8**\uff1a\u7531\u4e8e\u56db\u4e2a\u65b9\u5411\u7684\u4ee3\u7801\u5927\u540c\u5c0f\u5f02\uff0c\u8fd9\u91cc\u4ee5dir='S'\u4e3a\u4f8b\u8fdb\u884c\u8bb2\u89e3\u3002\n\n\u671d\u5357\u8d70\u6539\u53d8\u7684\u53ea\u662f\u6a2a\u5750\u6807\uff0c\u4f9d\u6b21\u52a01\uff0c\u52a02\uff0c\u52a03\u3002\u8fd9\u91cc\u7684mark[nx][ny][now.dir-'A']\u7b2c\u4e09\u4e2a\u53c2\u6570\u53ea\u662f\u4e3a\u4e86\u51cf\u5c11\u5b58\u50a8\u7a7a\u95f4\uff0c\u76f4\u63a5\u5199now.dir\u4e5fok\u7684~\u7531\u4e8e\u5411\u524d\u8d70\u4e0d\u6539\u53d8\u65b9\u5411\uff0c\u8fd9\u91cc\u7684now.dir\u548ctmp.dir\u76f8\u7b49\u3002\u5982\u679c\u6ca1\u6709\u8bbf\u95ee\u8fc7\u8be5\u70b9\u76f4\u63a5\u5165\u961f\u5c31\u597d\u5566\uff01\n\n```cpp\nif (now.dir == 'S')\n\tfor (int i = 1; i <= 3; i++)\n\t{\n\t\tnx = now.x + i;\n\t\tny = now.y;\n\t\tif (illegal(nx, ny))\n\t\t\tbreak;\n\t\tif (mark[nx][ny][now.dir-'A'] == true)\n\t\t\tcontinue;\n\t\ttmp = now;\n\t\ttmp.x = nx;\n\t\ttmp.time = now.time + 1;\n\t\tmark[nx][ny][tmp.dir-'A'] = true;\n\t\tQ.push(tmp);\n\t}\n```\n\n\n------------\nAC\u4ee3\u7801\u5982\u4e0b\uff1a\n------------\n\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<queue>\nusing namespace std;\n\nchar dir; //direction\nint n, m;\nint a[53][53];\nbool mark[53][53][24];//mark\u6807\u8bb0\u8be5\u70b9\u7684\u503c\u662f\u5426\u904d\u5386\u8fc7\n\nstruct pos\n{\n\tint x, y;\n\tchar dir;\n\tint time;\n};\nqueue<pos>Q;\n\nchar turn(char now, char dir) //from now to a new direction\n{\n\tif (dir == 'l')\n\t\tswitch (now)\n\t\t{\n\t\tcase 'N':return 'W';\n\t\tcase 'S':return 'E';\n\t\tcase 'W':return 'S';\n\t\tcase 'E':return 'N';\n\t\t}\n\telse if (dir == 'r')\n\t\tswitch (now)\n\t\t{\n\t\tcase 'N':return 'E';\n\t\tcase 'S':return 'W';\n\t\tcase 'W':return 'N';\n\t\tcase 'E':return 'S';\n\t\t}\n}\n\nbool illegal(int x, int y)\n{\n\tif (x <= 0 || x >= n || y <= 0 || y >= m || a[x][y] == 1)\n\t\treturn true;\n\treturn false;\n}\n\nint bfs(int desx, int desy)\n{\n\tpos now;\n\twhile (!Q.empty())\n\t{\n\t\tnow = Q.front();\n\t\tQ.pop();\n\t\tif (now.x == desx && now.y == desy)\n\t\t\treturn now.time;\n\t\tpos tmp;\n\t\tint nx, ny;\n\t\tif (now.dir == 'S')\n\t\t\tfor (int i = 1; i <= 3; i++)\n\t\t\t{\n\t\t\t\tnx = now.x + i;\n\t\t\t\tny = now.y;\n\t\t\t\tif (illegal(nx, ny))\n\t\t\t\t\tbreak;\n\t\t\t\tif (mark[nx][ny][now.dir-'A'] == true)\n\t\t\t\t\tcontinue;\n\t\t\t\ttmp = now;\n\t\t\t\ttmp.x = nx;\n\t\t\t\ttmp.time = now.time + 1;\n\t\t\t\tmark[nx][ny][tmp.dir-'A'] = true;\n\t\t\t\tQ.push(tmp);\n\t\t\t}\n\t\telse if (now.dir == 'N')\n\t\t\tfor (int i = 1; i <= 3; i++)\n\t\t\t{\n\t\t\t\tnx = now.x - i;\n\t\t\t\tny = now.y;\n\t\t\t\tif (illegal(nx, ny))\n\t\t\t\t\tbreak;\n\t\t\t\tif (mark[nx][ny][now.dir - 'A'] == true)\n\t\t\t\t\tcontinue;\n\t\t\t\ttmp = now;\n\t\t\t\ttmp.x = nx;\n\t\t\t\ttmp.time = now.time + 1;\n\t\t\t\tmark[nx][ny][tmp.dir-'A'] = true;\n\t\t\t\tQ.push(tmp);\n\t\t\t}\n\t\telse if (now.dir == 'W')\n\t\t\tfor (int i = 1; i <= 3; i++)\n\t\t\t{\n\t\t\t\tnx = now.x;\n\t\t\t\tny = now.y - i;\n\t\t\t\tif (illegal(nx, ny))\n\t\t\t\t\tbreak;\n\t\t\t\tif (mark[nx][ny][now.dir - 'A'] == true)\n\t\t\t\t\tcontinue;\n\t\t\t\ttmp = now;\n\t\t\t\ttmp.y = ny;\n\t\t\t\ttmp.time = now.time + 1;\n\t\t\t\tmark[nx][ny][tmp.dir-'A'] = true;\n\t\t\t\tQ.push(tmp);\n\t\t\t}\n\t\telse if (now.dir == 'E')\n\t\t\tfor (int i = 1; i <= 3; i++)\n\t\t\t{\n\t\t\t\tnx = now.x;\n\t\t\t\tny = now.y + i;\n\t\t\t\tif (illegal(nx, ny))\n\t\t\t\t\tbreak;\n\t\t\t\tif (mark[nx][ny][now.dir - 'A'] == true)\n\t\t\t\t\tcontinue;\n\t\t\t\ttmp = now;\n\t\t\t\ttmp.y = ny;\n\t\t\t\ttmp.time = now.time + 1;\n\t\t\t\tmark[nx][ny][tmp.dir-'A'] = true;\n\t\t\t\tQ.push(tmp);\n\t\t\t}\n\t\t//turn left\n\t\ttmp = now;\n\t\ttmp.dir = turn(now.dir, 'l');\n\t\ttmp.time = now.time + 1;\n\t\tif (mark[tmp.x][tmp.y][tmp.dir-'A'] == false)\n\t\t{\n\t\t\tmark[tmp.x][tmp.y][tmp.dir-'A'] = true;\n\t\t\tQ.push(tmp);\n\t\t}\n\t\t//turn right\n\t\ttmp.dir = turn(now.dir, 'r');\n\t\tif (mark[tmp.x][tmp.y][tmp.dir-'A'] == false)\n\t\t{\n\t\t\tmark[tmp.x][tmp.y][tmp.dir-'A'] = true;\n\t\t\tQ.push(tmp);\n\t\t}\n\t}//while\n\treturn -1;\n}\n\nint main()\n{\n\tcin >> n >> m;\n\tint mm[53][53];\n\tfor (int i = 0; i < n; i++)\n\t\tfor (int j = 0; j < m; j++)\n\t\t\tcin >> a[i][j], mm[i][j] = a[i][j];\n\tfor (int i = 0; i < n; i++)\n\t\tfor (int j = 0; j < m; j++)\n\t\t\tif (mm[i][j] == 1)\n\t\t\t\ta[i][j + 1] = 1, a[i + 1][j] = 1, a[i + 1][j + 1] = 1;\n\tpos start, des;\n\tcin >> start.x >> start.y >> des.x >> des.y >> start.dir;\n\tstart.time = 0;\n\tmemset(mark, false, sizeof(mark));\n\tmark[start.x][start.y][start.dir-'A'] = true;\n\tQ.push(start);\n\tcout << bfs(des.x, des.y) << endl;\n\tcin >> n;\n\treturn 0;\n}\n```\n### *\u7801\u5b57\u5bb9\u6613\uff0c\u601d\u8003\u4e0d\u6613\uff0c\u4e14\u884c\u4e14\u73cd\u60dc~*",
        "postTime": 1567070138,
        "uid": 237242,
        "name": "yubing_lml",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "```cpp\n\u849f\u84bb\u7684\u6211\u5199\u4e86\u4e00\u6574\u5929\u3002\u3002\u3002\u3002\n\u4ee3\u7801\u538b\u523047\u884c\uff0c\u7edd\u5bf9\u662f\u6700\u77ed\u7684\u4e86\uff0c\u54c8\u54c8\u54c8\uff0c\u867d\u7136\u6ca1\u4ec0\u4e48\u5375\u7528\n\u601d\u8def\u5c31\u662f\u4ee5\u6b65\u6570\u4e3a\u57fa\u51c6\uff0c\u628a\u6bcf\u6b21\u6b65\u6570\u76f8\u540c\u7684\u8fdb\u884c\u5224\u65ad\uff0c\n\u6700\u540e\u9996\u5148\u5230\u8fbe\u7ec8\u70b9\u7684\u5c31\u662f\u6700\u77ed\u8def\uff0c\u8f93\u51fa\u5f53\u524d\u6b65\u6570\u5373\u53ef\u3002\n#include <bits/stdc++.h>\nusing namespace std;\nstruct node{int x,y,step,fn;char w;}k;\nqueue<node> q;\nint N,M,tu[404][404],vis[404][404],X,Y,Xi,Yi;\nchar W,wss[4]={'E','S','W','N'};\nvoid bfs(int n,int step)\n{\n    if(step>N*M/2||!n){cout<<-1<<endl;return;}//\u5982\u679c\u6b65\u6570\u592a\u591a\u6216\u8005\u6ca1\u6709\u8def\u8d70\u5c31\u7ed3\u675f \n    int numm=0;\n    while(n--){//\u641c\u7b2cstep\u6b65\u6ee1\u8db3\u7684\u5750\u6807 \n        node p=q.front();//\u6240\u6709\u4e3astep\u6b65\u7684\u5750\u6807\u51fa\u961f \n        if(p.x==Xi&&p.y==Yi){cout<<p.step<<endl;return;}//\u627e\u5230\u5c31\u8f93\u51fa\u5e76\u7ed3\u675f \n        int an=3,hang=-1,lie=0;\n        if(p.w=='E')hang=0,lie=1,an=0;\n        else if(p.w=='S')hang=1,lie=0,an=1;\n        else if(p.w=='W')hang=0,lie=-1,an=2;//\u8f6c\u5411\u56db\u4e2a\u65b9\u5411hang\u4ee3\u8868\u884c\u662f\u5426\u53d8\u5316\uff0clie\u4ee3\u8868\u5217\u662f\u5426\u53d8\u5316\uff0can\u4ee3\u8868\u8f6c\u5411\t\t\n        k.step=step;k.x=p.x;k.y=p.y;k.fn=1;//\u5750\u6807\u4e0d\u53d8\uff0c\u8f6c\u5411\u6b21\u6570\u4e3a1 \n        if(!p.fn){k.w=wss[(an+1)%4];q.push(k);numm++;k.w=wss[(an+3)%4];k.fn=3;q.push(k);numm++;}//\u7b2c\u4e00\u6b21\u8f6c\u5411\uff0c\u8f6c\u5230\u5de6\u53f3\u4e24\u4e2a\u65b9\u5411\uff0c\u5e76push\u5750\u6807\t\t\n        if(p.fn==1&&p.x==X&&p.y==Y){k.fn=2;k.w=wss[(an+1)%4];q.push(k);numm++;}//\u8d77\u70b9\u5750\u6807180\u00b0\u65cb\u8f6c \n        k.fn=0;k.w=p.w;//\u65b9\u5411\u4e0d\u53d8\uff0c\u8f6c\u7684\u6b21\u6570\u4e3a\u96f6 \n        for(int i=1;i<4;i++){//\u5411\u524d\u8d701~3\u6b65 \n            k.x=p.x+hang*i;k.y=p.y+lie*i;\n            if(k.x<1||k.y<1||k.x>N-1||k.y>M-1)break;//\u8d8a\u754c\u5224\u65ad \n            if(tu[k.x][k.y]||tu[k.x+1][k.y+1]||tu[k.x+1][k.y]||tu[k.x][k.y+1])break;//\u969c\u788d\u7269\u5224\u65ad \n            if(vis[k.x][k.y]&&vis[k.x+hang][k.y+lie]&&vis[k.x+2*hang][k.y+2*lie])break;//\u5411\u524d3\u683c\u90fd\u8d70\u8fc7\u5c31\u8df3\u8fc7\uff0c\u6ca1\u6709\u90fd\u8d70\u8fc7\u5c31\u8d70\u4e86\u8bd5\u8bd5\uff0c\u4e07\u4e00\u6b65\u6570\u53ef\u80fd\u66f4\u5c11 \n            q.push(k);\t\t\t\n            vis[k.x][k.y]=step;//\u8bb0\u5f55\u5f53\u524d\u5750\u6807 \n            numm++;\n        }\n        q.pop();\t\t\n    }\n    bfs(numm,step+1);//\u7b2cstep+1\u4e00\u5171\u6709numm\u4e2a\u5165\u961f \n} \nint main()\n{\n    memset(vis,0,sizeof(vis));\n    cin>>N>>M;\n    for(int i=1;i<=N;i++)\t\n        for(int j=1;j<=M;j++)\n            cin>>tu[i][j];\t\n    cin>>X>>Y>>Xi>>Yi>>W;\t\n    k.step=0;k.fn=0;k.x=X;k.y=Y;k.w=W;//push\u8d77\u70b9\u4fe1\u606f \n    vis[X][Y]=1;\n    q.push(k);\n    bfs(1,1);\n}\n\n```",
        "postTime": 1533235459,
        "uid": 101534,
        "name": "90182si",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u65b9\u6cd5\uff1abfs\uff0c\u4e0e\u697c\u4e0bdalao\u4e0d\u540c\u7684\u662f\uff0c\u75283\u7ef4\u6570\u7ec4\u5b58\u6bcf\u4e2a\u70b9\u6bcf\u4e2a\u65b9\u5411\u7684\u6700\u5c0f\u503c\uff0c\u5982\u679c\u5927\u4e8e\u7b49\u4e8e\u5b83\u5c31\u9000\u51fa\uff0c\u6700\u540e\u628astep[xb][yb][i]\u627e\u4e00\u6700\u5c0f\u503c\u5373\u53ef\uff0c\u8bf7\u5ffd\u7565flag,\u6ca1\u4ec0\u4e48\u7528\u3002\u82e5\u6700\u5c0f\u503c\u8fd8\u5927\u4e8emaxN\\*maxN\\*2(\u53ea\u8981\u80fd\u8d70\u5230\u5c31\u7edd\u5bf9\u4e0d\u4f1a\u5927\u4e8e\u8fd9\u4e2a\u503c)\uff0c\u5c31\u8f93\u51fa-1\u3002\n\n```cpp\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int maxN=55,move[4][2]={{1,0},{-1,0},{0,1},{0,-1}},d[4]={2,1,3,4};\nint n,m,map[maxN+1][maxN+1],xa,ya,xb,yb,dir,q[maxN*maxN*5+1][3],step[maxN+1][maxN+1][5];\nbool flag[maxN+1][maxN+1][5];\nbool check(int x0,int y0,int t)\n{\n    if(!map[x0][y0]&&!map[x0][y0+1]&&!map[x0+1][y0]&&!map[x0+1][y0+1]&&flag[x0][y0][t]) return true;//\u5224\u65ad\u662f\u5426\u80fd\u8d70\n    return false;\n}\nint bfs()\n{\n    //printf(\"1:N 2:S 3:E 4:W\\n\");\n    if(map[xa][ya]==1) return -1;\n    int head=0,tail=0;\n    q[tail][0]=xa;q[tail][1]=ya;q[tail++][2]=dir;\n    flag[xa][ya][dir]=false;step[xa][ya][dir]=0;//\u521d\u59cb\u5316\n    while(head<tail)\n    {\n        int x=q[head][0];\n        int y=q[head][1];\n        int t=q[head][2];\n        for(int i=0;i<4;i++)\n        {\n            int p=0;\n            if(d[i]!=t) p=1;\n            int l=d[i]-t;\n            if((l==1&&(t!=2&&d[i]!=3))||(l==-1&&(t!=3&&d[i]!=2))) p=2;\n            for(int j=1;j<=3;j++)\n            {\n                int x0=x+move[i][0]*j;\n                int y0=y+move[i][1]*j;\n                if(!check(x0,y0,t)) break;\n                if(x0<1||y0<1||x0>n||y0>m) break;\n                if(!flag[x0][y0][d[i]]) continue;\n                int way=step[x][y][t]+1+p;\n                if(way>=step[x0][y0][d[i]]) continue;\n                q[tail][0]=x0;q[tail][1]=y0;q[tail++][2]=d[i];\n                step[x0][y0][d[i]]=way;\n            }\n        }\n        head++;\n    }//bfs\u5728\u6b64\n    /*for(int i=0;i<tail;i++)\n        printf(\"%d %d %d %d\\n\",q[i][0],q[i][1],q[i][2],step[q[i][0]][q[i][1]][q[i][2]]);*/\n    int min=step[xb][yb][0],k=0;\n    for(int i=1;i<5;i++)\n        if(min>step[xb][yb][i]) {min=step[xb][yb][i];k=i;}\n    //printf(\"%d\\n\",k);\n    if(min>maxN*maxN*2) return -1;\n    return min;\n}\nint main()\n{\n    memset(map,1,sizeof(map));\n    memset(flag,true,sizeof(flag));\n    memset(step,0x3f,sizeof(step));\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=m;j++) \n            scanf(\"%d\",&map[i][j]);\n    char ch;\n    scanf(\"%d%d%d%d %c\",&xa,&ya,&xb,&yb,&ch);\n    switch(ch)\n    {\n        case 'N':dir=1;break;\n        case 'S':dir=2;break;\n        case 'E':dir=3;break;\n        case 'W':dir=4;break;\n    }\n    printf(\"%d\",bfs());\n    return 0;\n}\n```",
        "postTime": 1513952650,
        "uid": 39144,
        "name": "cmwqf",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053BFS\uff0c\u5176\u5b9e\u5e76\u4e0d\u96be\uff0c\u53ea\u662f\u6709\u4e9b\u7ec6\u8282\u8981\u6ce8\u610f\u3002\n\n```cpp\n\n#include<cstdio>  \n#include<algorithm>  \n#include<cstring>  \nusing namespace std;  \nbool  a[51][51]; //\u8bb0\u5f55\u5730\u56fe\u4e0a\u7684\u969c\u788d \nint s[10000][4];  \nbool b[51][51][4];  //\u8bb0\u5f55\u60c5\u51b5\u662f\u5426\u5df2\u7ecf\u88ab\u627e\u8fc7\nint n,m;  \nbool check(int x,int y,int x1,int y1)  \n{int i;  \n    if (x==x1);  \n     {  \n        if (y>y1) swap(y,y1);  \n         for (i=y;i<=y1;i++)  \n            if (!((a[x1][i]) && (a[x1][i+1]) && (a[x1+1][i]) && (a[x1+1][i+1]))) return false;\n//\u5224\u65ad\u4e00\u4e2a\u70b9\u80fd\u5426\u8d70\u5230\u8981\u6ce8\u610f\u9014\u4e2d\u662f\u5426\u6709\u969c\u788d\uff0c\u800c\u4e14\u5224\u65ad\u662f\u5426\u6709\u969c\u788d\u8981\u770b\u5de6\u4e0a\u3001\u53f3\u4e0a\u3001\u5de6\n//\u4e0b\u3001\u53f3\u4e0b   \n     }  \n     if (y==y1);  \n     {  \n        if (x>x1) swap(x,x1);  \n         for (i=x;i<=x1;i++)  \n            if (!((a[i][y]) && (a[i][y+1]) && (a[i+1][y]) && (a[i+1][y+1]))) return false;  \n//\u540c\u4e0a \n     }  \n     return true;  \n      \n}  \nint main()  \n{int t,w,i,j,k,e,x,y,x1,y1,x2,y2;  \n char c;    \n   scanf(\"%d%d\",&n,&m);  \n   for (i=1;i<=n;i++)  \n      for (j=1;j<=m;j++)  \n         {   \n           scanf(\"%d\",&e);  \n           if (e==0)  a[i][j]=true;  \n               else a[i][j]=false;         \n         }  \n    scanf(\"%d%d%d%d%c\",&s[1][1],&s[1][2],&x2,&y2,&c);  \n    if ((s[1][1]==x2) && (s[1][2]==y2)) //\u6ce8\u610f\u7ec8\u70b9\u548c\u8d77\u70b9\u76f8\u540c\u7684\u60c5\u51b5   \n            {  \n                printf(\"0\");  \n                return 0;  \n            }  \n    scanf(\"%c\",&c);  \n    if (c=='E') s[1][3]=0;  \n    if (c=='S') s[1][3]=1;  \n    if (c=='W') s[1][3]=2;  \n    if (c=='N') s[1][3]=3;  \n    t=1;  \n    w=1;  \n    memset(b,true,sizeof(b));  \n    b[s[t][1]][s[t][2]][s[t][3]]=false;  \n    while (t<=w)  \n     {  \n        x=s[t][1];  \n        y=s[t][2];  \n        x1=x;  \n        y1=y;  \n        for (i=1;i<=3;i++)  \n            {  \n                if (s[t][3]==0) y1=y+i;  \n                if (s[t][3]==2) y1=y-i;   \n                if (s[t][3]==1) x1=x+i;  \n                if (s[t][3]==3) x1=x-i;  \n                if ((x1>=1) && (x1<=n-1) && (y1>=1) && (y1<=m-1))  \n                   if (check(x,y,x1,y1) && (b[x1][y1][s[t][3]]))  \n                       {  \n                        w++;  \n                        s[w][1]=x1;  \n                        s[w][2]=y1;  \n                        s[w][3]=s[t][3];  \n                        b[x1][y1][s[w][3]]=false;  \n                        s[w][0]=s[t][0]+1;  \n                        if ((x1==x2) && (y1==y2))  \n                            {  \n                                printf(\"%d\",s[w][0]);  \n                                return 0;  \n                            }  \n                       }     \n            }  \n         x1=s[t][3]-1;  \n         if (x1<0) x1=3;  \n         if (b[x][y][x1])   \n            {  \n                b[x][y][x1]=false;  \n                w++;  \n                s[w][1]=x;  \n                s[w][2]=y;  \n                s[w][3]=x1;  \n                s[w][0]=s[t][0]+1;  \n            }  \n        x1=s[t][3]+1;  \n        if (x1>3) x1=0;  \n          if (b[x][y][x1])  \n           {  \n            b[x][y][x1]=false;  \n            w++;  \n            s[w][1]=x;  \n            s[w][2]=y;  \n            s[w][3]=x1;  \n            s[w][0]=s[t][0]+1;  \n           }  \n     t++;              \n     }           \n   printf(\"-1\"); //\u627e\u4e0d\u5230\u7ed3\u679c\u8f93\u51fa-1     \n}  \n```",
        "postTime": 1452770940,
        "uid": 10357,
        "name": "\u6840\u9a9c\u7684\u91ce\u5fc3\u5bb6",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u6ce8\u610f\u8fb9\u7f18\u662f\u4e0d\u80fd\u8d70\u7684\u2026\u2026\u8fd9\u4e00\u70b9\u5751\u4e86\u6211\u597d\u4e45\u2026\u2026\n\n```cpp\n\n#include<stdio.h>\nconst char dx[]={0,1,0,-1};\nconst char dy[]={1,0,-1,0};\nstruct{\n    unsigned char x,y;\n    unsigned short step;\n    char d;\n//    unsigned char father;\n}xy[10000];\nint n,m,i,j,fx,fy,t,head,tail=1,tx,ty,nx,ny,nstep;\nunsigned char a[51][51];\nbool v[51][51][4];//\u8bb0\u5f55\u4e00\u4e2a\u72b6\u6001\u6709\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(;i<n;i++)\n        for(j=0;j<m;j++){\n            scanf(\"%d\",&t);//t=getchar()-'0';getchar();\n            if(t)a[i][j]=1,a[i][j+1]=1,a[i+1][j]=1,a[i+1][j+1]=1;\n        }\n    scanf(\"%d%d%d%d %c\",&xy[0].x,&xy[0].y,&fx,&fy,&xy[0].d);\n    switch(xy[0].d){\n        case 'E':xy[0].d=0;break;\n        case 'S':xy[0].d=1;break;\n        case 'W':xy[0].d=2;break;\n        case 'N':xy[0].d=3;\n    }\n/*    for(i=0;i<=n;i++){for(j=0;j<=m;j++){\n        if(i==xy[0].x&&j==xy[0].y)printf(\"S \");\n        else if(i==fx&&j==fy)printf(\"F \");\n        else printf(a[i][j]?\"1 \":\"0 \");\n    }putchar('\\n');}*/\n    v[xy[0].x][xy[0].y][xy[0].d]=true;\n    while(head<tail){\n        t=xy[head].d;nx=tx=xy[head].x;ny=ty=xy[head].y;nstep=xy[head].step;\n//        printf(\"%3d (father:%3d): %d %d %d %d\\n\",head,xy[head].father,nx,ny,xy[head].d,xy[head].step);\n        if(nx==fx&&ny==fy){printf(\"%d\",nstep);return 0;}\n        for(i=0;i<3;i++){\n            if((tx+=dx[t])>0&&tx<n&&(ty+=dy[t])>0&&ty<m&&!a[tx][ty]){\n                if(tx==fx&&ty==fy){printf(\"%d\",nstep+1);return 0;}\n                if(!v[tx][ty][t]){\n//                    xy[tail].father=head,\n                    v[tx][ty][t]=true,xy[tail].x=tx,xy[tail].y=ty,\n                    xy[tail].step=nstep+1,xy[tail].d=t,tail++;\n                }\n            }else break;\n        }\n        if(!v[nx][ny][t+1&3])//xy[tail].father=head,\n            xy[tail].x=nx,xy[tail].y=ny,xy[tail].step=nstep+1,xy[tail].d=(t+1)&3,tail++,\n            v[nx][ny][t+1&3]=true;\n        if(!v[nx][ny][t+3&3])//xy[tail].father=head,\n            xy[tail].x=nx,xy[tail].y=ny,xy[tail].step=nstep+1,xy[tail].d=(t+3)&3,tail++,\n            v[nx][ny][t+3&3]=true;\n        head++;\n    }\n    printf(\"-1\");\n    \n    return 0;\n}\n\n```",
        "postTime": 1439525698,
        "uid": 7487,
        "name": "plazum",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u663e\u7136\u8fd9\u662f\u4e00\u9053\u7ecf\u5178\u7684\u5e7f\u641c\u9898\u76ee\uff0c\u4f7f\u7528BFS\uff0c\u53ef\u4ee5\u7528O(4MN)\u7684\u65f6\u95f4\u901a\u8fc7\uff0c\u5bf9\u4e8em\uff0cn\u53ea\u670950\u7684\u60c5\u51b5\uff0c\u65f6\u95f4\u7ef0\u7ef0\u6709\u4f59\uff01\uff01\n\n\u7136\u800c\u8fd9\u9053\u9898\u76ee\u4e0d\u540c\u4e8e\u666e\u901a\u7684\u5e7f\u641c\uff0c\u6709\u65b9\u5411\u9650\u5236\uff0c\u56e0\u6b64\u6211\u4eec\u628a\u6570\u7ec4\u518d\u589e\u52a0\u4e00\u7ef4\uff0c\u8868\u793a\u65b9\u5411\uff0c\u5e76\u589e\u52a0\u4e13\u9879\u7684\u529f\u80fd\uff0c\u4ee3\u7801\uff1a\n\n```delphi\nvar  \n  fang:array[1..4,1..3,1..2] of longint;  \n  h:array[0..300000,1..4] of longint;  \n  a:array[0..51,0..51] of longint;  \n  f:array[0..51,0..51,1..4] of boolean;  \n  b:array[0..51,0..51] of boolean;  \n  head,tail,i,j,k,s,n,m,x,y,z,xx,yy,zz,x1,x2,y1,y2:longint;  \n  ch:char;  \nfunction pre(sx:longint):longint;  \nbegin  \n  if sx=1 then exit(4) else exit(sx-1);  \nend;  \nfunction next(sx:longint):longint;  \nbegin  \n  if sx=4 then exit(1) else exit(sx+1);  \nend;  \nbegin  \n  for i:=1 to 3 do  \n    begin  \n      fang[1,i,1]:=-i;  \n      fang[2,i,2]:=-i;  \n      fang[3,i,1]:=i;  \n      fang[4,i,2]:=i;  \n    end;  //\u65b9\u4f4d\u5750\u6807\n  readln(m,n);  \n  for i:=1 to m do  \n    for j:=1 to n do  \n      read(a[i,j]);  \n  dec(m); dec(n);  \n  for i:=1 to m do  \n    for j:=1 to n do  \n      if (a[i,j]=0) and (a[i+1,j]=0) and (a[i,j+1]=0) and (a[i+1,j+1]=0) then  \n        begin  \n          for k:=1 to 4 do  \n            f[i,j,k]:=true;  \n          b[i,j]:=true;  \n        end;  //\u9884\u5904\u7406\n  read(x1,y1,x2,y2);  \n  if (x1=x2) and (y1=y2) then begin writeln(0); halt; end;  \n  if not b[x1,y1] or not b[x2,y2] then begin writeln(-1);halt; end;//\u7279\u6b8a\u60c5\u51b5\u5224\u65ad  \n  read(ch);  \n  read(ch);  \n  case ch of  \n    'N':s:=1;  \n    'W':s:=2;  \n    'S':s:=3;  \n    'E':s:=4;  \n  end;  //\u521d\u59cb\u65b9\u4f4d\n  f[x1,y1,s]:=false;  \n  h[1,1]:=x1;  \n  h[1,2]:=y1;  \n  h[1,3]:=s;  \n  head:=0;  \n  tail:=1;  \n  while head<tail do  \n    begin  \n      head:=head mod 300000+1;  //\u5faa\u73af\u961f\u5217\n      x:=h[head,1];  \n      y:=h[head,2];  \n      z:=h[head,3];  \n      zz:=pre(z); //\u5de6\u8f6c \n      if f[x,y,zz] then  \n        begin  \n          tail:=tail mod 300000+1;\n          h[tail,1]:=x;  \n          h[tail,2]:=y;  \n          h[tail,3]:=zz;  \n          h[tail,4]:=h[head,4]+1;  \n          f[x,y,zz]:=false;  \n        end;  \n      zz:=next(z);  //\u53f3\u8f6c\n      if f[x,y,zz] then  \n        begin  \n          tail:=tail mod 300000+1;\n          h[tail,1]:=x;  \n          h[tail,2]:=y;  \n          h[tail,3]:=zz;  \n          h[tail,4]:=h[head,4]+1;  \n          f[x,y,zz]:=false;  \n        end; //\u4e4b\u6240\u4ee5\u4e0d\u518d\u8f6c\u5411\u9664\u653e\u7f6e\u5230\u7ec8\u70b9\u7684\u5224\u65ad\uff0c\u662f\u56e0\u4e3a\u8f6c\u5411\u7684\u65b9\u4f4d\uff0c\u5373\u6a2a\u7eb5\u5750\u6807\u4e0d\u53d8\uff0c\u524d\u4e00\u6b21\u6ca1\u6709\u5230\uff0c\u8fd9\u6b21\u600e\u4e48\u53ef\u80fd\u5230\u5462\uff1f \n      for i:=1 to 3 do//\u5f80\u524d\u8d701,2,3\u6b65  \n        begin  \n          xx:=x+fang[z,i,1];  \n          yy:=y+fang[z,i,2];  \n          if f[xx,yy,z] then  \n            begin  \n              tail:=tail mod 300000+1;  \n              h[tail,1]:=xx;  \n              h[tail,2]:=yy;  \n              h[tail,3]:=z;  \n              h[tail,4]:=h[head,4]+1;  \n              f[xx,yy,z]:=false;  \n              if (xx=x2) and (yy=y2) then  \n                begin  \n                  writeln(h[tail,4]);  \n                  halt;  //\u76f4\u63a5\u8f93\u51fa\u5e76\u9000\u51fa\u7a0b\u5e8f\n                end;  \n            end else if not b[xx,yy] then break;  //\u4e2d\u95f4\u5df2\u7ecf\u6709\u969c\u788d\uff0c\u76f4\u63a5\u8df3\u8fc7\u4e0d\u8d70\u4e86\n        end;  \n    end;  \n  writeln(-1); //\u65e0\u89e3 \nend. [codep/]",
        "postTime": 1382765359,
        "uid": 734,
        "name": "lych",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "2019\u5e74\u6700\u540e\u4e00\u9053\u9898 \n\n\u8fd9\u9898\u662f\u4e00\u4e2a\u6bd4\u8f83\u8003\u5bdf\u7ec6\u8282\u7684\u5e7f\u641c\uff0c\u672c\u849f\u84bb\u505a\u4e86\u5feb2\u4e2a\u5c0f\u65f6\n\n\u6709\u51e0\u4e2a\u70b9\u9700\u8981\u6ce8\u610f\n\n1.\u8bb0\u5f97\u66f4\u65b0\u521d\u59cb\u671d\u5411\uff08\u5982\u6837\u4f8b\uff09\u4e0d\u713650\u5206+\u4e0d\u8fc7\u6837\u4f8b \n\n2.\u6ce8\u610f\u5c06\u683c\u56fe\u5b58\u4e3a\u70b9\u56fe\n\n3.\u6ce8\u610f\u5224\u65ad-1\u7684\u60c5\u51b5\uff08\u670920\u5206\uff09 \n\n4.\u6ce8\u610f\u8f6c\u5411\uff08\u5b9b\u5982\u5e9f\u8bdd\uff09 \n\n\u6ce8\u610f\u8fd9\u51e0\u70b9\uff0cac\u4e0d\u6210\u95ee\u9898 \n\n20pt code\uff1a\n```cpp\n#include<bits/stdc++.h>\nint main()\n{\n\tstd::cout<<-1;\n } \n ```\n 50pt code:\n ```cpp\n #include<bits/stdc++.h>\n#define int long long\n#define fread ios::sync_with_stdio\n#define fint register int\n#define p 4327823\n#define h 201 \n\nusing namespace std;\n\nint fx[4]={-1,1,0,0}; \nint fy[4]={0,0,-1,1};\nint l[4]={3,2,0,1};\nint r[4]={2,3,1,0};\nint a[h*10][h*10];\nbool vis[h][h][h];\nint xa,ya,xb,yb;\nchar dirs;\nint n,m;\n\nstruct node\n{\n\tint x;\n\tint y;\n\tint tot;\n\tint dir;\n};\nnode c;\nqueue <node>q;\n\ninline int direct(char dir);\nvoid bfs();\n\nsigned main()\n{\n\tfread(false);\n\tcin>>n>>m;\n\tfor(fint i=1;i<=n;i++)\n\tfor(fint j=1;j<=m;j++)\n\t{\n\tcin>>a[i][j];\n\tif(a[i][j]==1)\n\t{\n\ta[i-1][j]=1;\n    a[i][j-1]=1;\n    a[i-1][j-1]=1;\n    a[i][j]=1;\n\t}\n}\n    cin>>xa>>ya>>xb>>yb;\n    c.x=xa;\n    c.y=ya;\n    q.push(c);\n    //\u8fdb\u961f \n    cin>>dirs;\n    direct(dirs);\n    vis[c.y][c.y][c.dir]=1;\n    bfs();\n    cout<<\"-1\";\n    exit(0);\n}\ninline int direct(char dirs)\n{\n\tif(dirs=='W')\n    c.dir=0;\n    else\n    if(dirs=='E')\n    c.dir=1;\n    else\n    if(dirs=='N')\n    c.dir=2;\n    else\n    if(dirs=='S')\n    c.dir=3;\n    return c.dir;\n}\n\n/*BFS\u4ee3\u7801*/ \nvoid bfs()\n{\n    while(!q.empty())\n\t{\n\t\tnode now;\n        now=q.front();\n\t\tq.pop();\n        if(now.x==xb&&now.y==yb)\n\t\t{\n            cout<<now.tot;\n            exit(0);\n        }\n        node d;\n        d=now;\n        for(int i=1;i<=3;i++)\n\t\t{\n            d.x+=fx[now.dir];\n\t\t\td.y+=fy[now.dir];\n            if(d.x<1||d.y<1||d.x>=n||d.y>=m||a[d.x][d.y]!=0)\n\t\t\tbreak;\n            if(!vis[d.x][d.y][d.dir])\n            {\n            vis[d.x][d.y][d.dir]=1;\n            d.tot=now.tot+1;\n            q.push(d);\n        }\n    }\n        node e;\n        e=now;\n\t\te.tot=now.tot+1;\n        e.dir=l[now.dir];\n        if(!vis[e.x][e.y][e.dir])\n\t\t{\n            vis[e.x][e.y][e.dir]=1;\n            q.push(e);\n        }\n        e.dir=r[now.dir];\n        if(!vis[e.x][e.y][e.dir])\n\t\t{\n            vis[e.x][e.y][e.dir]=1;\n            q.push(e);\n        }\n    }\n}\n```\n\n\u671d\u5411\n```cpp\ninline int direct(char dirs)\n{\n\tif(dirs=='W')\n    c.dir=0;\n    else\n    if(dirs=='E')\n    c.dir=1;\n    else\n    if(dirs=='N')\n    c.dir=2;\n    else\n    if(dirs=='S')\n    c.dir=3;\n    return c.dir;\n    //\u786e\u5b9a\u521d\u59cb\u671d\u5411 \n}\n```\n\u5e7f\u641c\n```cpp\nwhile(!q.empty())\n\t{\n\t\tnode now;\n        now=q.front();\n\t\tq.pop();\n        if(now.x==xb&&now.y==yb)\n\t\t{\n            cout<<now.tot;\n            exit(0);//\u5230\u8fbe\u76ee\u6807\u70b9\u5c31\u8f93\u51fa\u5f53\u524d\u603b\u65f6\u95f4 \n        }\n        node d;//d\u8868\u793a\u4e0b\u4e00\u6b65 \n        d=now;\n        for(int i=1;i<=3;i++)\n\t\t{\n            d.x+=fx[now.dir];\n\t\t\td.y+=fy[now.dir];\n            if(d.x<1||d.y<1||d.x>=n||d.y>=m||a[d.x][d.y]!=0)\n\t\t\tbreak;\n\t\t\t//\u5230\u8fb9\u754c\u5c31\u9000\u51fa \n            if(!vis[d.x][d.y][d.dir])\n            {\n            vis[d.x][d.y][d.dir]=1;\n            d.tot=now.tot+1;\n            q.push(d);\n            //\u5982\u679c\u672a\u8d70\u8fc7\u5c31\u66f4\u65b0\u65f6\u95f4\u5e76\u8fdb\u884c\u4e0b\u4e00\u5c42 \n        }\n    }\n        node e;\n        e=now;\n\t\te.tot=now.tot+1;\n        e.dir=l[now.dir];\n        if(!vis[e.x][e.y][e.dir])\n\t\t{\n            vis[e.x][e.y][e.dir]=1;\n            q.push(e);\n\t\t\t//\u5411\u5de6\u8f6c \n        }\n        e.dir=r[now.dir];\n        if(!vis[e.x][e.y][e.dir])\n\t\t{\n            vis[e.x][e.y][e.dir]=1;\n            q.push(e);\n\t\t\t//\u5411\u53f3\u8f6c \n        }\n    }\n   ```\n   \u5b8c\u6574\u4ee3\u7801\uff1a\n   ```cpp\n   #include<bits/stdc++.h>\n#define int long long\n#define fread ios::sync_with_stdio\n#define fint register int\n#define p 4327823\n#define h 201\n//\u5934\u6587\u4ef6\u53ca\u5b8f\u4f18\u5316 \n\nusing namespace std;\n\nint fx[4]={0,0,-1,1};\n//\u6a2a\u5750\u6807\u53d8\u5316  \nint fy[4]={-1,1,0,0};\n//\u7eb5\u5750\u6807\u53d8\u5316 \nint l[4]={3,2,0,1};\n//\u5de6\u8f6c\u8d70\u6cd5 \nint r[4]={2,3,1,0};\n//\u53f3\u8f6c\u8d70\u6cd5 \nint a[h*10][h*10];\n//\u90bb\u63a5\u77e9\u9635 \nbool vis[h][h][h];\n//\u4e09\u7ef4\u5206\u522b\u8868\u793ax\uff0cy\uff0cdir \nint xa,ya,xb,yb;\nchar dirs;\nint n,m;\n\nstruct node\n{\n\tint x;\n\t//\u6a2a\u5750\u6807 \n\tint y;\n\t//\u7eb5\u5750\u6807 \n\tint tot;\n\t//\u603b\u65f6\u95f4 \n\tint dir;\n\t//\u5f53\u524d\u671d\u5411 \n};\nnode c;\n//\u7ed3\u6784\u4f53\u5c01\u88c5\u5750\u6807\u53ca\u6b65\u6570 \nqueue <node>q;\n//\u961f\u5217 \n\ninline int direct(char dirs);\nvoid bfs();\n\nsigned main()\n{\n\tfread(false);\n\tcin>>n>>m;\n\tfor(fint i=1;i<=n;i++)\n\tfor(fint j=1;j<=m;j++)\n\t{\n\tcin>>a[i][j];\n\tif(a[i][j]==1)\n\t{\n\ta[i-1][j]=1;\n    a[i][j-1]=1;\n    a[i-1][j-1]=1;\n    a[i][j]=1;\n\t}\n\t//\u5c06\u683c\u56fe\u5b58\u4e3a\u70b9\u56fe\uff08\u5c06\u5468\u56f4\u56db\u4e2a\u70b9\u8d4b\u503c1\uff09 \n}\n    cin>>xa>>ya>>xb>>yb;\n    c.x=xa;\n    c.y=ya;\n    //\u8f93\u5165\u521d\u59cb\u4f4d\u7f6e\u53ca\u76ee\u6807\u4f4d\u7f6e\uff0c\u5e76\u7528\u7ed3\u6784\u4f53\u5b58 \n    cin>>dirs;\n    direct(dirs);\n    //\u66f4\u65b0\u521d\u59cb\u65b9\u5411 \n    vis[c.y][c.y][c.dir]=1;\n    //\u521d\u59cb\u5316\u8d77\u70b9 \n    q.push(c);\n    //\u8fdb\u961f \n    bfs();\n    //\u5e7f\u641c \n    cout<<\"-1\";\n    //\u5982\u679c\u6ca1\u6b63\u5e38\u9000\u51fa\uff0c\u5c31\u8f93\u51fa-1 \n    exit(0);\n}\ninline int direct(char dirs)\n{\n\tif(dirs=='W')\n    c.dir=0;\n    else\n    if(dirs=='E')\n    c.dir=1;\n    else\n    if(dirs=='N')\n    c.dir=2;\n    else\n    if(dirs=='S')\n    c.dir=3;\n    return c.dir;\n    //\u786e\u5b9a\u521d\u59cb\u671d\u5411 \n}\n\n/*BFS\u4ee3\u7801*/ \nvoid bfs()\n{\n    while(!q.empty())\n\t{\n\t\tnode now;\n        now=q.front();\n\t\tq.pop();\n        if(now.x==xb&&now.y==yb)\n\t\t{\n            cout<<now.tot;\n            exit(0);//\u5230\u8fbe\u76ee\u6807\u70b9\u5c31\u8f93\u51fa\u5f53\u524d\u603b\u65f6\u95f4 \n        }\n        node d;//d\u8868\u793a\u4e0b\u4e00\u6b65 \n        d=now;\n        for(int i=1;i<=3;i++)\n\t\t{\n            d.x+=fx[now.dir];\n\t\t\td.y+=fy[now.dir];\n            if(d.x<1||d.y<1||d.x>=n||d.y>=m||a[d.x][d.y]!=0)\n\t\t\tbreak;\n\t\t\t//\u5230\u8fb9\u754c\u5c31\u9000\u51fa \n            if(!vis[d.x][d.y][d.dir])\n            {\n            vis[d.x][d.y][d.dir]=1;\n            d.tot=now.tot+1;\n            q.push(d);\n            //\u5982\u679c\u672a\u8d70\u8fc7\u5c31\u66f4\u65b0\u65f6\u95f4\u5e76\u8fdb\u884c\u4e0b\u4e00\u5c42 \n        }\n    }\n        node e;\n        e=now;\n\t\te.tot=now.tot+1;\n        e.dir=l[now.dir];\n        if(!vis[e.x][e.y][e.dir])\n\t\t{\n            vis[e.x][e.y][e.dir]=1;\n            q.push(e);\n\t\t\t//\u5411\u5de6\u8f6c \n        }\n        e.dir=r[now.dir];\n        if(!vis[e.x][e.y][e.dir])\n\t\t{\n            vis[e.x][e.y][e.dir]=1;\n            q.push(e);\n\t\t\t//\u5411\u53f3\u8f6c \n        }\n    }\n}\n//\u5b8c\u7ed3\u6492\u82b1 \n```\n\u6700\u540e\uff0c\u795d\u5927\u5bb6\u65b0\u5e74\u5feb\u4e50\n\n2020 rp++ ",
        "postTime": 1577795777,
        "uid": 244059,
        "name": "king_xbz",
        "ccfLevel": 0,
        "title": "\u5e7f\u641c\u7684\u4e00\u9053\u5751\u9898"
    },
    {
        "content": "\u5f88\u4e0d\u723d\uff0c\u6765\u53d1\u4e2a\u9898\u89e3\u3002\n\n\t1\u8fd9\u4e2a\u9898\u76ee\u7b2c\u4e00\u6b65\u5c31\u662f\u628a\u683c\u5b50\u7684\u969c\u788d\u8f6c\u6362\u6210\u70b9\u7684\u969c\u788d\uff0c\u5173\u7cfb\u662f\u5bf9\u4e8e\u683c\u5b50\u5750\u6807\uff08x\uff0cy\uff09\uff0c\u70b9\u7684\u5750\u6807(x,y) (x-1,y) (x,y-1) (x-1,y-1)\u90fd\u4e0d\u80fd\u8d70\u3002\u8981\u6570\u4ee5\u8f6c\u6362\u540e\u6a2a\u7eb5\u5750\u6807\u6700\u5927\u503c-1\uff0c\u4e0d\u7136\u3002\u3002\u3002\u3002\n\t2\u5176\u6b21\uff0cBFS\u80af\u5b9a\u9700\u8981\u6807\u8bb0\u8d70\u8fc7\u7684\u70b9\uff0c\u9700\u8981\u53e6\u5f00\u4e00\u4e2avis\u6765\u4fdd\u5b58\u3002\u4e4b\u524d\u56fe\u7701\u4e8b\u653e\u5728\u4e86vis2\u91cc\u9762\uff0c\u53d1\u751f\u4e86\u4e0d\u597d\u7684\u4e8b\u60c5\u3002\u8fd9\u5728\u6ce8\u91ca\u91cc\u9762\u89e3\u91ca\u8fc7\u4e86\u3002\n    3\u8fd8\u8981\u6ce8\u610f\u7684\u65f6\u653e\u5230\u961f\u5217\u91cc\u9762\u65f6\uff0c\u8f83\u5c0f\u7684cnt\u503c\u4f18\u5148\uff0c\u6240\u4ee5\u9700\u8981\u5148\u653e\u5411\u524d\u7684\uff0c\u518d\u653e\u5176\u4ed6\u65b9\u5411\u3002\n    4\u7136\u540e\uff0c\u662f\u53ea\u80fd\u5de6\u53f3\u8f6c\uff0c\u4e0d\u80fd\u5411\u540e\u8f6c\uff0c\u8fd9\u4e2a\u53ea\u4f1a\u5361#8\uff0c\u7279\u5224\u4e00\u4e0b\u5c31\u884c\u4e86\uff08\u5f88\u660e\u663e\u6211\u770b\u4e86\u5f88\u591a\u6837\u4f8b\uff09\u3002\uff08\u6709\u70b9\u6577\u884d\uff0c\u5982\u679c\u60f3\u5199\u5728\u540e\u9762\u7684\u8bdd\u9700\u8981\u5728\u653e\u5b8c\u5de6\u53f3\u4e4b\u540e\u518d\u653e\u540e\uff0c\u539f\u56e0\u5728\u7b2c\u4e09\u70b9\uff09\n  ```cpp\n//\u5931\u8bef1\uff1a\u56e0\u4e3a\u5899\u5bfc\u81f4\u7684\u65e0\u6cd5\u7ee7\u7eed\u8d70\u5e94\u8be5break\uff0c\u56e0\u4e3a\u8bbf\u95ee\u8fc7\u800c\u5bfc\u81f4\u7684\u65e0\u6cd5\u5148\u8d70\u5e94\u8be5continue\n//\u5931\u8bef2\uff1a\u4f18\u5148\u8d70\u73b0\u6709\u65b9\u5411\uff08\u76f8\u53cd\u6b65\u6570\u5c0f\u7684\uff09\n//\u5931\u8bef3\uff1a\u7adf\u7136\u5fd8\u8bb0\u5224\u65ad\u5165\u5217\u6570\u636e\u662f\u5426\u5408\u6cd5\n//\u5931\u8bef4\uff1a\u4e0d\u5b58\u5728\u7684\u6377\u5f84\uff01\u8f6c\u6362\u7684\u65f6\u5019\u5224\u65ad\u662f\u5426\u5408\u6cd5\u7684\u65f6\u5019\u4f7f\u7528mn\uff0c\u5b9e\u9645\u4e3an-1\uff0cm-1\uff1b\n//\u5931\u8bef4\uff1aTMD\u4e0d\u80fd\u5411\u540e\u8f6c\uff01\uff01\uff01\uff01\uff01\uff011 \uff1a\uff1a\u53ea\u6709\u521a\u5f00\u59cb\u4f1a\u5411\u540e\u8f6c\uff0c\u7279\u5224\u4e00\u4e0b\u5c31\u53ef\u4ee5\u4e86\uff01\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\n#include<cstring>\nusing namespace std;\nint cnt[100][100];\nbool vis2[100][100];\nbool vis[100][100];\nchar state[100][100];\nchar d[] = { '\\0','E','S','W','N' };\nint dx[] = { 0,0,1,0,-1 }, dy[] = { 0,1,0,-1,0 };\ntypedef pair<int, int> P;\nqueue<P> que;\nint main()\n{\n\t//freopen(\"C:/Users/94726/Desktop/\u7a0b\u5e8f\u9898/1.txt\", \"r\", stdin);\n\t//freopen(\"C:/Users/94726/Desktop/\u7a0b\u5e8f\u9898/2.txt\", \"w\", stdout);\n\tmemset(cnt, -1, sizeof(cnt));\n\tint n, m;\n\tcin >> n >> m;//\u8fb9\u754c\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t{\n\t\t\tint k; cin >> k;\n\t\t\tif (k == 1) {\n\t\t\t\tvis2[i][j] = true;\n\t\t\t\tif (i - 1 >= 1 and j - 1 >= 1) vis2[i - 1][j - 1] = true;\n\t\t\t\tif (i - 1 >= 1)vis2[i - 1][j] = true;\n\t\t\t\tif (j - 1 >= 1)vis2[i][j - 1] = true;\n\t\t\t}\n\t\t}//\u6570\u636e\u7684\u8bfb\u5165\uff0c\u628a\u683c\u5b50\u7684\u5750\u6807\u8f6c\u6362\u6210\u70b9\n\t//show(n, m);\n\tint x, y;\n\tcin >> x >> y;//\u8d77\u70b9\n\tcnt[x][y] = 0;\n\tvis[x][y] = true;\n\tque.push(make_pair(x, y));\n\tP end; cin >> end.first >> end.second;//\u7ec8\u70b9\n\tcin >> state[x][y];\n\t//\u7279\u5224\n\t{\n\tint j = 0, flag = 0;\n\twhile (state[x][y] != d[++j]);\n\tif (j == 1 or j == 3)\n\t{\n\t\tif (vis2[x + dx[j]][y + dy[j]] or x + dx[j]<1 or x + dx[j]>n - 1) flag++;\n\t\tif ( vis2[x + dx[2]][y + dy[2]] or x + dx[2]<1 or x + dx[2]>n - 1) flag++;\n\t\tif (vis2[x + dx[4]][y + dy[4]] or x + dx[4]<1 or x + dx[4]>n - 1) flag++;\n\t}\n\tif (j == 2 or j == 4)\n\t{\n\t\tif (vis2[x + dx[j]][y + dy[j]] or x + dx[j]<1 or x + dx[j]>n - 1) flag++;\n\t\tif (vis2[x + dx[1]][y + dy[1]] or x + dx[1]<1 or x + dx[1]>n - 1) flag++;\n\t\tif (vis2[x + dx[3]][y + dy[3]] or x + dx[3]<1 or x + dx[3]>n - 1) flag++;\n\t}\n\tif (flag == 3)  cnt[x][y] += 1;\n\t}\n\n\twhile (!que.empty())\n\t{\n\t\tP s = que.front();\n\t\tif (s == end) break;\n\t\t\n\t\tint t = cnt[s.first][s.second];//\u73b0\u5728\u7684\u6b65\u6570\n\t\tchar sta = state[s.first][s.second];//\u73b0\u5728\u7684\u72b6\u6001\n\t\tfor (int i = 1; i <= 4; i++)//#1\n\t\t{\n\t\t\tif(sta==d[i])\n\t\t\t\tfor (int j = 1; j <= 3 and vis2[s.first + dx[i] * j][s.second + dy[i] * j] == false; j++)//\u6bcf\u6b21\u8d70\u4e00\u683c\uff0c\u77e5\u9053\u5899\n\t\t\t\t{\n\t\t\t\t\tif(s.first+dx[i]>=1 and s.first+dx[i]<=n-1 and s.second+dy[i]>=1 and s.second+dy[i]<=m-1)\n\t\t\t\t\tif (vis[s.first + dx[i] * j][s.second + dy[i] * j] == false) {\n\t\t\t\t\t\tque.push(make_pair(s.first + dx[i] * j, s.second + dy[i] * j));//\u5165\u5217\n\t\t\t\t\t\tstate[s.first + dx[i] * j][s.second + dy[i] * j] = d[i];//\u4f60\u7684\u72b6\u6001\n\t\t\t\t\t\tcnt[s.first + dx[i] * j][s.second + dy[i] * j] = t + 1;//\u4f60\u7684\u6b65\u6570\n\t\t\t\t\t\tvis[s.first + dx[i] * j][s.second + dy[i] * j] = true;//\u4f60\u7684\u6807\u8bb0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\t\tint k = 0; while (state[s.first][s.second] != d[++k]);\n\t\tfor (int i = 1; i <= 4; i++)//\u6709\u65b9\u5411\u904d\u5386\t\t//#2\n\t\t{\n\t\t\t\n\t\t\tif(sta!=d[i])\n\t\t\t\tfor (int j = 1; j <= 3 and vis2[s.first + dx[i] * j][s.second + dy[i] * j] == false; j++)\n\t\t\t\t{\n\t\t\t\t\tif (s.first + dx[i] >= 1 and s.first + dx[i] <= n-1 and s.second + dy[i] >= 1 and s.second + dy[i] <= m-1)\n\t\t\t\t\tif (vis[s.first + dx[i] * j][s.second + dy[i] * j] == false) {\n\t\t\t\t\t\tque.push(make_pair(s.first + dx[i] * j, s.second + dy[i] * j));\n\t\t\t\t\t\tstate[s.first + dx[i] * j][s.second + dy[i] * j] = d[i];\n\t\t\t\t\t\tcnt[s.first + dx[i] * j][s.second + dy[i] * j] = t + 2;\n\t\t\t\t\t\tvis[s.first + dx[i] * j][s.second + dy[i] * j] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\tque.pop();\n\t}\n\tshow(n,m);\n\t\tcout << cnt[end.first][end.second]<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1576723356,
        "uid": 294965,
        "name": "_Lin_Xuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "## **\u4e00\u9053 \u666e\u53ca+ \u7684\u4ee3\u7801\u957f\u5ea6\u5c45\u7136\u548c \u7701\u9009 \u7684\u4ee3\u7801\u5dee\u4e0d\u591a\u957f**\n\u9898\u76ee\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u5751\u5de8\u591a\t~~\uff08\u6d6a\u8d39\u62114\u4e2a\u4e0b\u8f7d\u91cf\uff09~~\n\n\u8bfb\u5b8c\u9898\u540e1s\u5185\u8981\u60f3\u5230bfs\u5426\u5219\u60a8\u53ef\u4ee5\u79bb\u5f00\u8fd9\u4e2a\u5730\u65b9\u4e86\n\nbfs\u53bb\u91cd\uff1a\u8f6c\u5316\u4e3a\u683c\u70b9\u56fe\u53d1\u73b0\u5c0f\u7403\u53ea\u5141\u8bb8\u5f85\u5728 1<=x,y<=49\u4e14x<n,y<m\u7684\u70b9\u4e0a\uff0c\u6bcf\u4e2a\u683c\u70b9\u67094\u4e2a\u65b9\u5411\uff0c\u6839\u636ebfs\u7b2c\u4e00\u6b21\u5373\u6700\u77ed\u539f\u7406\u6211\u4eec\u53ef\u4ee5\u5f00\u4e00\u4e2a\u4e09\u7ef4bool\u6570\u7ec4\u53bb\u91cd\uff1a\n```cpp\nbool f[51][51][5];//\u7b2c\u4e00\u7ef4x\uff0c\u7b2c\u4e8c\u7ef4y\uff0c\u7b2c\u4e09\u7ef4\u65b9\u5411\n```\n\u540c\u65f6\u5efa\u597d\u94fe\u8868\uff1a\n```cpp\nstruct node{\n\tint x,y,step;char pos;\n}q[12501];\n//x\uff0cy\u4ee3\u8868\u6240\u5728\u70b9\uff0csetp\u4ee3\u8868\u6b65\u6570\uff0cpos\u4ee3\u8868\u5f53\u524d\u671d\u5411\nint head=1,tail=1;//\u94fe\u8868\u5934\u5c3e\u6307\u9488\n```\n\u8fd9\u9053\u9898\u6c14\u4eba\u7684\u5c31\u662f\u65b9\u5411\u662f\u7528char\u7ed9\u4f60\u7684\uff0c\u6240\u4ee5\u4f5c\u4e3a\u61d2\u4eba\u6211\u628achar\u548cint\u8f6c\u5316\u7684\u51fd\u6570\u5199\u51fa\u6765\u4e86\uff1a\n```cpp\nchar int_to_char(int x)\n{\n\tswitch(x)\n\t{\n\t\tcase 1:{return 'N';break;}\n\t\tcase 2:{return 'E';break;}\n\t\tcase 3:{return 'S';break;}\n\t\tcase 4:{return 'W';break;}\n\t}\n}\nint char_to_int(char x)\n{\n\tswitch(x)\n\t{\n\t\tcase 'N':{return 1;break;}\n\t\tcase 'E':{return 2;break;}\n\t\tcase 'S':{return 3;break;}\n\t\tcase 'W':{return 4;break;}\n\t}\n}\n//1->N 2->E 3->S 4->W\n```\n\u63a5\u7740\u5165\u961f\u51fd\u6570\u5c31\u597d\u5199\u5f88\u591a\u4e86\uff1a\n```\nvoid putin(int x,int y,int step,char pos)\n{\n\tf[x][y][char_to_int(pos)]=true;\n\t//x,y\u5728pos\u65b9\u5411\u5df2\u7ecf\u904d\u5386\n\tq[tail].pos=pos;\n\tq[tail].step=step;\n\tq[tail].x=x;\n\tq[tail++].y=y;\n\t//\u6240\u6709\u5143\u7d20\u5165\u961f\uff0c\u961f\u5c3e+1\n}\n```\n\u7ed3\u6784\u90e8\u5206\u5b8c\u6bd5\uff0c\u63a5\u4e0b\u6765\u8bfb\u5165+\u5b58\u50a8\uff1a\n\n```cpp\nbool map[51][51];\nint n,m,bx,by,ex,ey;char s;\n//\u522b\u641e\u9519\u4e86\u8fd9\u4e9b\u662f\u5168\u5c40\u53d8\u91cf\n\n//\u4ee5\u4e0b\u5728\u4e3b\u51fd\u6570\u8bfb\u5165\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tcin>>map[i][j];\n\tcin>>bx>>by>>ex>>ey>>s;\n```\n\u7136\u540e\u662f\u7279\u5224\uff1a\n1\uff0c\u5c0f\u7403\uff08x\uff0cy\uff09\u5360\u4e86map(x,y),(x+1,y),(x,y+1),(x+1,y+1)\n\u56e0\u6b64\u5982\u679c\u8d77\u70b9\u6216\u8005\u7ec8\u70b9\u4e0d\u80fd\u585e\u8fdb\u5c0f\u7403\u76f4\u63a5gg\n2\uff0c\u8d77\u70b9\u4e0e\u7ec8\u70b9\u4f4d\u7f6e\u76f8\u540c\u65f6\u76f4\u63a5\u7ed3\u675f\n```cpp\n\tif(map[bx][by]||map[bx+1][by]||map[bx][by+1]||map[bx+1][by+1]){cout<<-1;return 0;}\n\tif(map[ex][ey]||map[ex+1][ey]||map[ex][ey+1]||map[ex+1][ey+1]){cout<<-1;return 0;}\n\tif(bx==ex&&by==ey){cout<<0;return 0;}\n```\n\u6b64\u9898bfs\u4e2d\uff0c\u4ec0\u4e48\u6837\u7684\u70b9\u53ef\u4ee5\u5165\u961f\u5462\uff1f\n1.\u5de6\u8f6c\u548c\u53f3\u8f6c\uff0c\u56e0\u4e3a\u7403\u5df2\u7ecf\u5728\u70b9\u4e0a\u4e86\u6240\u4ee5\u53bb\u91cd\u5c31\u884c\n```cpp\n\t\tif(char_to_int(q[head].pos)%2==0)//\u4e1c\u897f\u65b9\u5411\n\t\t{\n\t\t\tif(!f[x][y][1])\tputin(x,y,step+1,int_to_char(1));\n\t\t\tif(!f[x][y][3])\tputin(x,y,step+1,int_to_char(3));\n\t\t}\n\t\telse\t\t\t\t//\u5357\u5317\u65b9\u5411\n\t\t{\n\t\t\tif(!f[x][y][2])\tputin(x,y,step+1,int_to_char(2));\n\t\t\tif(!f[x][y][4])\tputin(x,y,step+1,int_to_char(4));\n\t\t}\n\t\t\n```\n2.\u524d\u65b9\u6ca1\u6709\u969c\u788d\u7269\u65f6\u5411\u524d\u8d701.2.3\n\u6ce8\u610f\u8fd9\u91cc\u662f\u53ef\u4ee5\u5230\u8fbe\u7ec8\u70b9\u7684\uff0c\u7531\u4e8e\u5411\u524d1.2.3\u90fd\u4e3a1\u6b65\uff0c\u6240\u4ee5\u5230\u7ec8\u70b9\u65f6\u76f4\u63a5\u8f93\u51fastep+1\u5373\u53ef\uff0c\u8fd9\u91cc\u53ef\u4ee5\u8fd0\u7528bool\u51fd\u6570\u5b9e\u73b0\uff0c\u627e\u5230\u7ec8\u70b9\u65f6bool=true\u8f93\u51fa\u3002\n\n\u7136\u540e\u6211\u4eec\u518d\u5206\u6790\u4e00\u4e0b\uff1a\n\u5982\u679c\u4e00\u6b65\u90fd\u4e0d\u80fd\u8d70\uff0c\u90a3\u4e48\u7b2c\u4e8c\u6b65\u548c\u7b2c\u4e09\u6b65\u4e5f\u8d70\u4e0d\u4e86\uff0c\u7b2c\u4e8c\u6b65\u540c\u7406\n\u56e0\u6b64\u6211\u4eec\u53ea\u7528\u5c06\t3\u5d4c\u5957\u57282\u4e2d\uff0c2\u5d4c\u5957\u57281\u4e2d \u5c31\u53ef\u4ee5\u7701\u4e0b\u91cd\u590d\u5224\u65ad\u7684\u65f6\u95f4\u4e86\n~~\uff08\u597d\u50cf\u4e5f\u6ca1\u4ec0\u4e48\u5375\u7528\uff09~~\n\n\u4ee3\u7801\u8bf7\u4ece\u4e0b\u5f80\u4e0a\u8bfb:\n```cpp\nint\tdirx[13]={0,\t-1,0,1,0,\t-2,0,2,0,\t-3,0,3,0},\n\tdiry[13]={0,\t0,1,0,-1,\t0,2,0,-2,\t0,3,0,-3};\n//\u5168\u5c40\u53d8\u91cfdir\u6765\u63a7\u5236\u56db\u4e2a\u65b9\u5411\u8d701.2.3\u6b65\u65f6\u5c0f\u7403\u7684\u79fb\u52a8\n\u8d70\u4e09\u6b65\u7684\u5b50\u51fd\u6570\uff1a\n\nbool check(node s,int st,int pos)\n//\u8fd9\u91cccheck\u7528\u6765\u5224\u65ad\u524d\u65b9\u662f\u5426\u6709\u969c\u788d\u7269\n{\n\tif(pos==1)//\u5317\n\t{\n\t\tif(s.x-st<1)return 0;//\u8d8a\u754c\n\t\tif(map[s.x-st][s.y]||map[s.x-st][s.y+1])return 0;//\u969c\u788d\n\t\treturn 1;\n\t}\n\t//\u4ee5\u4e0b\u540c\u7406\n\tif(pos==2)\n\t{\n\t\tif(s.y+st>m-1)return 0;\n\t\tif(map[s.x][s.y+st+1]||map[s.x+1][s.y+st+1])return 0;\n\t\treturn 1;\n\t}\n\t\n\tif(pos==3)\n\t{\n\t\tif(s.x+st>n-1)return 0;\n\t\tif(map[s.x+st+1][s.y]||map[s.x+st+1][s.y+1])return 0;\n\t\treturn 1;\n\t}\n\t\n\tif(pos==4)\n\t{\n\t\tif(s.y-st<1)return 0;\n\t\tif(map[s.x][s.y-st]||map[s.x+1][s.y-st])return 0;\n\t\treturn 1;\n\t}\n}\n\nbool step3(node s)\n{\n\tif(check(s,3,char_to_int(s.pos)))//\u7b2c\u4e09\u6b65\u6709\u65e0\u969c\u788d\n\t{\n\t\tif(s.x+dirx[char_to_int(s.pos)+8]==ex&&s.y+diry[char_to_int(s.pos)+8]==ey)return 1;\n       //\u627e\u5230\u7ec8\u70b9\n\t\telse\n\t\tif(!f[s.x+dirx[char_to_int(s.pos)+8]][s.y+diry[char_to_int(s.pos)+8]][char_to_int(s.pos)])\n\t\tputin(s.x+dirx[char_to_int(s.pos)+8],s.y+diry[char_to_int(s.pos)+8],s.step+1,s.pos);\n     //\u7b2c\u4e09\u6b65\u5165\u961f\n\t}\n\treturn 0;//\u8d70\u4e09\u6b65\u627e\u4e0d\u5230\u7ec8\u70b9\n}\nbool step2(node s)\n{\n\tif(check(s,2,char_to_int(s.pos)))//\u7b2c\u4e8c\u6b65\u6709\u65e0\u969c\u788d\n\t{\n\t\tif(s.x+dirx[char_to_int(s.pos)+4]==ex&&s.y+diry[char_to_int(s.pos)+4]==ey)\n\t\treturn 1;\n    //\u627e\u5230\u7ec8\u70b9\n\t\telse if(!f[s.x+dirx[char_to_int(s.pos)+4]][s.y+diry[char_to_int(s.pos)+4]][char_to_int(s.pos)])\n\t\tputin(s.x+dirx[char_to_int(s.pos)+4],s.y+diry[char_to_int(s.pos)+4],s.step+1,s.pos);\n   //\u7b2c\u4e8c\u6b65\u5165\u961f\n\t\treturn step3(s);\n   //\u5d4c\u5957\uff0c\u5c1d\u8bd5\u7b2c\u4e09\u6b65\n\t}\n\treturn 0;\n}\nbool step1(node s)\n{\n\tif(check(s,1,char_to_int(s.pos)))//\u7b2c\u4e00\u6b65\u6709\u65e0\u969c\u788d\n\t{\n\t\tif(s.x+dirx[char_to_int(s.pos)]==ex&&s.y+diry[char_to_int(s.pos)]==ey)\n\t\treturn 1;\n//\u5230\u7ec8\u70b9\u8fd4\u56detrue\u7ed3\u675f\u51fd\u6570\n\t\telse if(!f[s.x+dirx[char_to_int(s.pos)]][s.y+diry[char_to_int(s.pos)]][char_to_int(s.pos)])\n\t\tputin(s.x+dirx[char_to_int(s.pos)],s.y+diry[char_to_int(s.pos)],s.step+1,s.pos);\n//\u8d70\u4e00\u6b65\uff0c\u5165\u961f\n\t\treturn step2(s);\n//\u5d4c\u5957\uff0c\u5c1d\u8bd5\u8d70\u7b2c\u4e8c\u6b65\n\t}\n\treturn 0;\n}\n//bfs\u5faa\u73af\u5224\u65ad\uff08\u4e3b\u51fd\u6570\u4e2d\uff09\nif(step1(q[head])){cout<<step+1;return 0;}\n```\n\u5230\u6b64\uff0c\u6240\u6709\u5751\u5168\u90e8\u586b\u4e0a bfs\u51fd\u6570\u53ef\u4ee5\u767b\u573a\u4e86;\n```cpp\n\tputin(bx,by,0,s);//\u5165\u53e3\u5165\u961f\n\t\n\twhile(head<tail)//bfs\n\t{\n\t\tint x=q[head].x,y=q[head].y,step=q[head].step;\n        \t//\u53ea\u662f\u4e0d\u60f3\u5199\u592a\u957f\uff0c\u53ef\u4ee5\u66ff\u6362\uff08\u5ffd\u7565\u5c31\u597d\uff09\n\t\t\n      \t\t//\u8f6c\u5f2f\u5165\u961f\n\t\tif(char_to_int(q[head].pos)%2==0)\n\t\t{\n\t\t\tif(!f[x][y][1])\tputin(x,y,step+1,int_to_char(1));\n\t\t\tif(!f[x][y][3])\tputin(x,y,step+1,int_to_char(3));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(!f[x][y][2])\tputin(x,y,step+1,int_to_char(2));\n\t\t\tif(!f[x][y][4])\tputin(x,y,step+1,int_to_char(4));\n\t\t}\n                          \n\t\t//\u524d\u8fdb\n\t\tif(step1(q[head])){cout<<step+1;return 0;}\n\t\thead++;//\u5de5\u5177\u70b9\u7528\u5b8c\u4e86\uff0c\u53ef\u4ee5\u6254\u4e86\n\t}\n```\n\u6700\u540e\u9644\u4e0a\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\n  //\u53ea\u7528iostream\u6ca1\u6709\u4e07\u80fd\u5934\u54e6\uff0c\u5feb\u5938\u6211(*\u2606\u00b7\u2606*)\nusing namespace std;\n  const int\tFriendship_is_Magic=;//\u4e0d\u7ed9\u773c\u778e\u7684\u5c0f\u9a6c\u767d\u5ad6\nbool map[51][51];//\u56fe\nbool f[51][51][5];//\u53bb\u91cd\nstruct node{\n\tint x,y,step;char pos;\n}q[12501];//\u961f\u5217\nint head=1,tail=1;\nint n,m,bx,by,ex,ey;char s;//\u70b9\nint\tdirx[13]={0,\t-1,0,1,0,\t-2,0,2,0,\t-3,0,3,0},\n\tdiry[13]={0,\t0,1,0,-1,\t0,2,0,-2,\t0,3,0,-3};\n//\u65b9\u5411+\u8ddd\u79bb\n\nchar int_to_char(int x)\n{\n\tswitch(x)\n\t{\n\t\tcase 1:{return 'N';break;}\n\t\tcase 2:{return 'E';break;}\n\t\tcase 3:{return 'S';break;}\n\t\tcase 4:{return 'W';break;}\n\t}\n}\nint char_to_int(char x)\n{\n\tswitch(x)\n\t{\n\t\tcase 'N':{return 1;break;}\n\t\tcase 'E':{return 2;break;}\n\t\tcase 'S':{return 3;break;}\n\t\tcase 'W':{return 4;break;}\n\t}\n}\n//\u8f6c\u6362\nvoid putin(int x,int y,int step,char pos)\n{\n\tf[x][y][char_to_int(pos)]=true;\n\tq[tail].pos=pos;\n\tq[tail].step=step;\n\tq[tail].x=x;\n\tq[tail++].y=y;\n}\n//\u5165\u961f\nbool check(node s,int st,int pos)\n{\n\tif(pos==1)\n\t{\n\t\tif(s.x-st<1)return 0;\n\t\tif(map[s.x-st][s.y]||map[s.x-st][s.y+1])return 0;\n\t\treturn 1;\n\t}\n\t\n\tif(pos==2)\n\t{\n\t\tif(s.y+st>m-1)return 0;\n\t\tif(map[s.x][s.y+st+1]||map[s.x+1][s.y+st+1])return 0;\n\t\treturn 1;\n\t}\n\t\n\tif(pos==3)\n\t{\n\t\tif(s.x+st>n-1)return 0;\n\t\tif(map[s.x+st+1][s.y]||map[s.x+st+1][s.y+1])return 0;\n\t\treturn 1;\n\t}\n\t\n\tif(pos==4)\n\t{\n\t\tif(s.y-st<1)return 0;\n\t\tif(map[s.x][s.y-st]||map[s.x+1][s.y-st])return 0;\n\t\treturn 1;\n\t}\n}\n//\u68c0\u6d4b\u969c\u788d\nbool step3(node s)\n{\n\tif(check(s,3,char_to_int(s.pos)))\n\t{\n\t\tif(s.x+dirx[char_to_int(s.pos)+8]==ex&&s.y+diry[char_to_int(s.pos)+8]==ey)return 1;\n\t\telse\n\t\tif(!f[s.x+dirx[char_to_int(s.pos)+8]][s.y+diry[char_to_int(s.pos)+8]][char_to_int(s.pos)])\n\t\tputin(s.x+dirx[char_to_int(s.pos)+8],s.y+diry[char_to_int(s.pos)+8],s.step+1,s.pos);\n\t}\n\treturn 0;\n}\nbool step2(node s)\n{\n\tif(check(s,2,char_to_int(s.pos)))\n\t{\n\t\tif(s.x+dirx[char_to_int(s.pos)+4]==ex&&s.y+diry[char_to_int(s.pos)+4]==ey)\n\t\treturn 1;\n\t\telse if(!f[s.x+dirx[char_to_int(s.pos)+4]][s.y+diry[char_to_int(s.pos)+4]][char_to_int(s.pos)])\n\t\tputin(s.x+dirx[char_to_int(s.pos)+4],s.y+diry[char_to_int(s.pos)+4],s.step+1,s.pos);\n\t\treturn step3(s);\n\t}\n\treturn 0;\n}\nbool step1(node s)\n{\n\tif(check(s,1,char_to_int(s.pos)))\n\t{\n\t\tif(s.x+dirx[char_to_int(s.pos)]==ex&&s.y+diry[char_to_int(s.pos)]==ey)\n\t\treturn 1;\n\t\telse if(!f[s.x+dirx[char_to_int(s.pos)]][s.y+diry[char_to_int(s.pos)]][char_to_int(s.pos)])\n\t\tputin(s.x+dirx[char_to_int(s.pos)],s.y+diry[char_to_int(s.pos)],s.step+1,s.pos);\n\t\treturn step2(s);\n\t}\n\treturn 0;\n}\n//\u8d70\u8def\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tcin>>map[i][j];\n\tcin>>bx>>by>>ex>>ey>>s;\n  //\u8f93\u5165\n\t\n\tif(map[bx][by]||map[bx+1][by]||map[bx][by+1]||map[bx+1][by+1]){cout<<-1;return 0;}\n\tif(map[ex][ey]||map[ex+1][ey]||map[ex][ey+1]||map[ex+1][ey+1]){cout<<-1;return 0;}\n\tif(bx==ex&&by==ey){cout<<0;return 0;}\n\t//\u7279\u5224\n\tputin(bx,by,0,s);//\u5165\u53e3\u5165\u961f\n\t\n\twhile(head<tail)//bfs\n\t{\n\t\tint x=q[head].x,y=q[head].y,step=q[head].step;\n\t\t\n\t\tif(char_to_int(q[head].pos)%2==0)\n\t\t{\n\t\t\tif(!f[x][y][1])\tputin(x,y,step+1,int_to_char(1));\n\t\t\tif(!f[x][y][3])\tputin(x,y,step+1,int_to_char(3));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(!f[x][y][2])\tputin(x,y,step+1,int_to_char(2));\n\t\t\tif(!f[x][y][4])\tputin(x,y,step+1,int_to_char(4));\n\t\t}\n\t\t\n\t\tif(step1(q[head])){cout<<step+1;return 0;}\n\t\thead++;\n\t}\n\tcout<<-1;return Friendship_is_Magic;//\u7981\u6b62\u767d\u5ad6\n}\n```\n\n",
        "postTime": 1573216648,
        "uid": 157014,
        "name": "ShadowNight",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u7b80\u5355bfs.\n\n\u5c31\u662f\u5728\u5904\u7406\u5730\u56fe\u7684\u65f6\u5019\u9700\u8981\u6ce8\u610f\u4e00\u4e0b\uff0c\u628a\u65b9\u683c\u56fe\u8f6c\u5316\u4e3a\u70b9\u56fe\u3002\n\n\u4e5f\u4e0d\u662f\u5f88\u56f0\u96be\uff0c\u8f6c\u5316\u4e3a\u70b9\u56fe\u540e$m,n$\u4f1a\u51cf\u4e00\uff0c\u7136\u540e\u5bf9\u5e94\u7684\u4e4b\u524d\u7684\u969c\u788d\u4f1a\u5f71\u54cd\u5230\u70b9\u56fe\u7684\u54ea\u4e9b\u4f4d\u7f6e\uff0c\u7528\u7b14\u753b\u4e00\u753b\u5373\u53ef\u3002\n\n\u6700\u540e\u5c31\u662fBFS\u90e8\u5206\uff0c\u6211\u4eec\u9700\u8981\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u4f4d\u7f6e\uff0c\u65b9\u5411\uff0c\u6b65\u6570\uff0c\u7136\u540e\u5f00\u5f00\u4e00\u4e2a$vis$\u8fdb\u884c\u53bb\u91cd\uff0c$n$\u5f88\u5c0f\uff0c\u7528\u6570\u7ec4\u53ef\u4ee5\u5f00\u7684\u4e0b\u3002\n\n\u6700\u540e\u6709\u4e00\u4e2a\u5751\u70b9\uff0c\u5bfc\u81f4\u6211\u8c03\u4e86\u534a\u4e2a\u591a\u5c0f\u65f6\uff0c\u5728\u5224\u65ad\u673a\u5668\u4eba\u7684\u4e0b\u4e00\u4e2a\u70b9\u662f\u5426\u53ef\u8d70\u65f6\uff0c\u6211\u4eec\u8981\u4ece\u7b2c\u4e00\u6b65\u5f00\u59cb\u5224\u65ad\uff0c\u4e00\u65e6\u4e0d\u5408\u6cd5\u76f4\u63a5`break`\uff0c\u540e\u9762\u7684\u4e5f\u4e0d\u80fd\u518d\u8003\u8651\uff0c\u56e0\u4e3a\u673a\u5668\u4eba\u65e0\u6cd5\u8df3\u8fc7\u969c\u788d\u5230\u4e0b\u4e00\u4e2a\u5408\u6cd5\u7684\u683c\u5b50...(\u597d\u83dc\n\n\u7136\u540e\u5c31\u662f\u4ee3\u7801\u4e86\uff0c\u5b9e\u73b0\u8fd8\u662f\u6bd4\u8f83\u5bb9\u6613\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int N = 55;\nbool vis[N][N][5];\nint n , m;\nint pre[N][N] , g[N][N];\nint stax , stay , stadir;\nint endx , endy;\n// 1N 2S 3W 4E \n\nvoid Pre() {\n\tfor(int i = 1 ; i <= n ; i ++)\n\t\tfor(int j = 1 ; j <= n ; j ++ )\n\t\t\tif(pre[i][j]) g[i - 1][j - 1] = g[i - 1][j] = g[i][j - 1] = g[i][j] = 1;\n\tn--;m--;\n}\nqueue <int> q;\nvoid push(int x , int y , int dir , int dep) {\n\tq.push(x);q.push(y);q.push(dir);q.push(dep);\n}\n\nbool check(int x , int y ) {\n\tif(x < 1 || x > n || y < 1 || y > m) return false; \n\tif(g[x][y] == 1) return false;\n\treturn true;\n}\n\nvoid Bfs() {\n\tvis[stax][stay][stadir] = 1;\n\tpush(stax,stay,stadir,0);\n\twhile(!q.empty()) {\n\t\tint nowx = q.front(); q.pop();\n\t\tint nowy = q.front(); q.pop();\n\t\tint nowdir = q.front(); q.pop();\n\t\tint nowdep = q.front(); q.pop();\n\t\tif(nowx == endx && nowy == endy) {printf(\"%d\\n\" , nowdep); exit(0);}\n\t\tif(nowdir==1 || nowdir==2){\n\t\t\tif(!vis[nowx][nowy][3]) vis[nowx][nowy][3] = 1, push(nowx,nowy,3,nowdep+1);\n\t\t\tif(!vis[nowx][nowy][4]) vis[nowx][nowy][4] = 1, push(nowx,nowy,4,nowdep+1);\n\t\t} else {\n\t\t\tif(!vis[nowx][nowy][1]) vis[nowx][nowy][1] = 1 ,push(nowx,nowy,1,nowdep+1);\n\t\t\tif(!vis[nowx][nowy][2]) vis[nowx][nowy][2] = 1 , push(nowx,nowy,2,nowdep+1);\n\t\t}\n\t\tif(nowdir == 1) {\n\t\t\tfor(int i = 1 ; i <= 3; i ++) {\n\t\t\t\tif(!check(nowx - i , nowy)) break;\n\t\t\t\tif(!vis[nowx-i][nowy][1]) vis[nowx-i][nowy][1]=1,push(nowx-i,nowy,1,nowdep+1); \n\t\t\t}\n\t\t} else if(nowdir == 2) {\n\t\t\tfor(int i = 1 ;i <= 3 ; i++) {\n\t\t\t\tif(!check(nowx + i , nowy)) break;\n\t\t\t\tif(!vis[nowx+i][nowy][2]) vis[nowx+i][nowy][2]=1,push(nowx+i,nowy,2,nowdep+1);\n\t\t\t}\n\t\t\t\n\t\t} else if(nowdir==3) {\n\t\t\tfor(int i = 1 ; i <= 3 ; i ++) {\n\t\t\t\tif(!check(nowx , nowy - i)) break;\n\t\t\t\tif(!vis[nowx][nowy-i][3]) vis[nowx][nowy-i][3]=1,push(nowx,nowy-i,3,nowdep+1);\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\tfor(int i = 1; i <= 3 ;i ++) {\n\t\t\t\tif(!check(nowx , nowy + i)) break;\n\t\t\t\tif(!vis[nowx][nowy+i][4]) vis[nowx][nowy+i][4]=1,push(nowx,nowy+i,4,nowdep+1);\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n}\n\nint main () {\n\tscanf(\"%d%d\" ,&n ,&m);\n\tfor(int i = 1 ; i <= n ; i ++)\n\t\tfor(int j = 1 ; j <= m ;j ++) scanf(\"%d\" , &pre[i][j]);\n\tchar x;\n\tcin >> stax >> stay >> endx >> endy >> x; \n\tif(x == 'N') stadir = 1; if(x == 'S') stadir = 2; if(x == 'W') stadir = 3; if(x == 'E') stadir = 4;\n\tPre();\n\tBfs(); \t puts(\"-1\");\n\treturn 0;\n}\n```",
        "postTime": 1573098059,
        "uid": 134080,
        "name": "jins3599",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "========================================================\n\n=======================\u5f00\u59cb\u5206\u5272\u7ebf========================\n\n========================================================\n\n#### \u4f17\u6240\u5468\u77e5\n\n```\n\u5e7f\u641c\u548c\u6df1\u641c\u4fe9\u597d\u5144\u5f1f\u662f\u849f\u84bb\u4eec\u7684\u597d\u670b\u53cb\n\u5b83\u4eec\u4e50\u4e8e\u52a9\u4eba\uff0c\u559c\u6b22\u5316\u89e3\u522b\u4eba\u7206\u96f6\u7684\u5c34\u5c2c\u5c40\u9762\n\n\u4f46\u662f\u50cf\u6211\u8fd9\u6837\u7684 \u5927\u849f\u84bb \u4ecd\u7136\u4f1a\u75af\u72c2\u7206\u96f6\n\u5728\u53cd\u590d\u63a8\u6572\u4e4b\u540e\u51b3\u5b9a\u4e00\u9f13\u4f5c\u6c14\u8ba4\u771f\u5b66\u4e60BFS\u4e0eDFS\n```\n\n\n========================================================\n\n=====================\u771f\u6b63\u5f00\u59cb\u5206\u5272\u7ebf======================\n\n========================================================\n\n**\u90a3\u5c31\u5148\u5bf9BFS\u505a\u4e00\u4e9b\u5c0f\u5c0f\u7684\u603b\u7ed3**\n\n### 1\u3001\u57fa\u672c\u6b65\u9aa4\n- 1> \u521d\u59cb\u5316\u5165\u961f\n- 2> \u7ed3\u675f\u6761\u4ef6\uff1aq.empty()==1\n- 3> u = q.front();\n- 4> q.pop();\n- 5> \u5224\u65ad\u662f\u5426\u5230\u8fbe\u7ec8\u70b9\uff08\u5230\u8fbe\u5219\u7ed3\u675f\uff09\n- 6> \u66f4\u65b0\u4e0b\u4e00\u5c42\uff0c\u5165\u961f\u65b0\u8282\u70b9\n### 2\u3001\u5b58\u50a8\n\u6211\u4eec\u4e00\u822c\u4f7f\u7528 **queue**< T > \u5b58\u50a8\u641c\u7d22\u72b6\u6001\uff0c\u6b65\u6570\u7b49\u4fe1\u606f\u4e00\u822c\u4e0d\u5b58\u50a8\u5728**queue**\u91cc\u9762\uff0c\u800c\u662f\u5355\u72ec\u5b58\u50a8\u3002\n### 3\u3001\u526a\u679d\n\u4e5f\u5c31\u662f\u5e38\u8bf4\u7684\u53bb\u9664\u5df2\u7ecf\u51fa\u73b0\u8fc7\u7684\u60c5\u51b5\uff0c\u4e00\u822c\u6709\u4e24\u79cd\u65b9\u5f0f\u5b9e\u73b0\uff1a\n\n- 1> \u4f7f\u7528**STL**\u91cc\u9762\u7684**map**< **Ta** , **Tb** >\u6765\u5b58\u50a8\uff0c\u7531\u4e8e\u4f7f\u7528**map**\u5b58\u50a8\u81ea\u5b9a\u4e49**struct**\u7684\u65f6\u5019\u975e\u5e38\u9ebb\u70e6\uff0c~~\u4eb2\u8eab\u4f53\u9a8c\uff0c\u7531\u4e8e**map\u672c\u8d28\u7ea2\u9ed1\u6811**\u6027\u8d28\u590d\u6742\uff0c\u81ea\u5df1\u6539\u4e865h\u4e5f\u6ca1\u5f04\u597d~~\uff0c\u8fd9\u79cd\u65b9\u5f0f\u53ea\u6709\u5728\u5b58\u50a8\u5bf9\u8c61\u662f**string**\u7684\u65f6\u5019\uff0c\u4f7f\u7528map\u5b58\u50a8\u624d\u51f8\u663e\u51fa\u5176\u4f18\u52bf\uff0c\u5bf9\u5e94\u94fe\u63a5[[\u5b57\u4e32\u53d8\u5316]](https://www.luogu.org/record/25655144)\u3002\n\n- 2> \u5176\u4ed6\u60c5\u51b5\u4e0b\u4e00\u822c\u4f7f\u7528\u6570\u7ec4\u5b58\u50a8\uff0c\u7c7b\u4f3c\u4e8eDijkstra\u91cc\u9762\u7684**dis**\u6570\u7ec4\uff0c\u6bd4\u5982\u4e00\u4e2a\u72b6\u6001\u6d89\u53ca **x,y,z** \u4e09\u4e2a\u53d8\u91cf\uff0c\u90a3\u4e48 dis \u6570\u7ec4\u957f\u8fd9\u6837\uff1a **dis[x][y][z]**\uff0c\u5bf9\u5e94\u7684\u503c\u662f\u5230\u8fbe\u8fd9\u4e2a\u72b6\u6001\u7684\u6700\u5c0f\u6b65\u6570\uff0c\u8f6c\u79fb\u7684\u65f6\u5019\u53ea\u6709\u5f53 **dis[x][y][z] == initialized_value** \u7684\u65f6\u5019\u624d\u8f6c\u79fb\uff0c\u5bf9\u5e94\u94fe\u63a5[[\u673a\u5668\u4eba\u642c\u91cd\u7269]](https://www.luogu.org/record/25675310)\u3002\n### 4\u3001\u4f18\u5316\n\u5f53**\u5f00\u59cb\u72b6\u6001\u548c\u7ed3\u675f\u72b6\u6001\u5f88\u5355\u4e00**\u800c\u4e14**\u6570\u636e\u8303\u56f4\u8f83\u5927**\u4e14**\u6bcf\u4e00\u79cd\u72b6\u6001\u7684\u8f6c\u79fb\u60c5\u51b5\u5f88\u591a**\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5f80\u5f80\u4f1a\u4f7f\u7528 **\u53cc\u5411BFS** \u6765\u4f18\u5316\uff0c~~\u4f18\u5316\u7684\u8fd8\u4e0d\u5c11~~\n\n[**\u8d85\u8be6\u7ec6\u8bb2\u89e3\uff1a**](https://www.luogu.org/blog/tolearnbetter/solution-p1032)\n\n****\n**\u8fd9\u9053\u9898\u7684AC code\uff1a**\n```cpp\n#include<bits/stdc++.h>\n#define maxn 56\nusing namespace std;\nbool m[maxn][maxn];\nint N,M,ex,ey,dis[maxn][maxn][5];\nint st[6][3]={\n\t{0,0,0},\n\t{0,-1,0},\n\t{0,0,1},\n\t{0,1,0},\n\t{0,0,-1},\n};\nstruct status{\n\tint x,y,dir;\n}a;\nqueue<status> q;\ninline int qr()\n{\n\tint sum=0;\n\tchar j=0;\n\twhile(!isdigit(j))j=getchar();\n\twhile(isdigit(j)){sum=(sum<<1)+(sum<<3)+(j^48);j=getchar();}\n\treturn sum;\n}\ninline void readin()\n{\n\tN=qr();\n\tM=qr();\n\tfor(int i=1;i<=N;i++)\n\tfor(int j=1;j<=M;j++)\n\tm[i][j]=qr();\n\ta.x=qr();\n\ta.y=qr();\n\tex=qr();\n\tey=qr();\n\tchar j;\n\tcin>>j;\n\tif(j=='N')a.dir=1;\n\tif(j=='E')a.dir=2;\n\tif(j=='S')a.dir=3;\n\tif(j=='W')a.dir=4;\n}\ninline bool check(status x)\n{\n\tif(x.x<1||x.y<1||x.x>=N||x.y>=M||m[x.x][x.y]||m[x.x][x.y+1]||m[x.x+1][x.y]||m[x.x+1][x.y+1])return 0;\n\treturn 1;\n}\ninline int BFS()\n{\n\tmemset(dis,0x3f,sizeof(dis));\n\tdis[a.x][a.y][a.dir]=0;\n\tint maxx=dis[0][0][0];\n\tq.push(a);\n\twhile(!q.empty())\n\t{\n\t\tstatus u=q.front(),tr;\n\t\tif(u.x==ex&&u.y==ey)return dis[u.x][u.y][u.dir];\n\t\tint s=dis[u.x][u.y][u.dir],di=u.dir;\n\t\tq.pop();\n\t\t\n\t\t//++\n\t\ttr=u;\n\t\ttr.dir++;\n\t\tif(tr.dir==5)tr.dir=1;\n\t\tif(dis[tr.x][tr.y][tr.dir]==maxx)\n\t\t{\n\t\t\tdis[tr.x][tr.y][tr.dir]=s+1;\n\t\t\tq.push(tr);\n\t\t}\n\t\t\n\t\t//--\n\t\ttr=u;\n\t\ttr.dir--;\n\t\tif(tr.dir==0)tr.dir=4;\n\t\tif(dis[tr.x][tr.y][tr.dir]==maxx)\n\t\t{\n\t\t\tdis[tr.x][tr.y][tr.dir]=s+1;\n\t\t\tq.push(tr);\n\t\t}\n\t\t\n\t\t//~~\n\t\ttr=u;\n\t\ttr.dir+=2;\n\t\tif(tr.dir>4)tr.dir-=4;\n\t\tif(dis[tr.x][tr.y][tr.dir]==maxx)\n\t\t{\n\t\t\tdis[tr.x][tr.y][tr.dir]=s+2;\n\t\t\tq.push(tr);\n\t\t}\n\t\t\n\t\t//Creep\n\t\ttr=u;\n\t\ttr.x+=st[di][1];\n\t\ttr.y+=st[di][2];\n\t\tif(check(tr))\n\t\t{\n\t\t\tif(dis[tr.x][tr.y][tr.dir]==maxx)\n\t\t\t{\n\t\t\t\tdis[tr.x][tr.y][tr.dir]=s+1;\n\t\t\t\tq.push(tr);\n\t\t\t}\n\t\t\t\n\t\t\t//Walk\n\t\t\ttr=u;\n\t\t\ttr.x+=2*st[di][1];\n\t\t\ttr.y+=2*st[di][2];\n\t\t\tif(check(tr))\n\t\t\t{\n\t\t\t\tif(dis[tr.x][tr.y][tr.dir]==maxx)\n\t\t\t\t{\n\t\t\t\t\tdis[tr.x][tr.y][tr.dir]=s+1;\n\t\t\t\t\tq.push(tr);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//Run\n\t\t\t\ttr=u;\n\t\t\t\ttr.x+=3*st[di][1];\n\t\t\t\ttr.y+=3*st[di][2];\n\t\t\t\tif(check(tr))\n\t\t\t\t{\n\t\t\t\t\tif(dis[tr.x][tr.y][tr.dir]==maxx)\n\t\t\t\t\t{\n\t\t\t\t\t\tdis[tr.x][tr.y][tr.dir]=s+1;\n\t\t\t\t\t\tq.push(tr);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn -1;\n} \nint main()\n{\n\treadin();\n\tprintf(\"%d\",BFS());\n\treturn 0;\n}\n```\n****\n\n========================================================\n\n=======================\u7ed3\u675f\u5206\u5272\u7ebf========================\n\n========================================================\nThx for watching with patience!",
        "postTime": 1571974079,
        "uid": 117111,
        "name": "BrandonSoong",
        "ccfLevel": 4,
        "title": "\u5e7f\u641c\u6280\u5de7\u603b\u7ed3"
    },
    {
        "content": "\u5751\u7239\u7684BFS\u9898\u3002\u4e00\u662f\u683c\u5b50\u56fe\u8981\u8f6c\u6362\u6210\u70b9\u56fe\uff0c\u521a\u5f00\u59cb\u6ca1\u6ce8\u610f\uff0c\u5c45\u7136\u4e5f\u8fc7\u4e86\u8f93\u5165\u8f93\u51fa\u6837\u4f8b\uff0c\u5f9740\u5206\u82b1\u4e86\u4e00\u4e2a\u4e0b\u5348\u90fd\u67e5\u627e\u4e0d\u51fa\u539f\u56e0\uff0c\u6700\u540e\u5077\u7784\u4e86\u4e00\u773c\u522b\u4eba\u7684\u9898\u89e3\uff0c\u77ac\u95f4\u5d29\u6e83\u3002\u4e8c\u662f\u65b9\u5411\u7684\u5904\u7406\uff1b\u4e09\u662f\u8fb9\u754c\u5904\u7406\uff0c\u673a\u5668\u4eba\u4e0d\u80fd\u5728\u8fb9\u754c\u4e0a\u9762\u79fb\u52a8\u3002\n\n\u5176\u5b9e\u5e7f\u641c\u7684\u9898\u76f8\u5bf9\u6765\u8bf4\u6ca1\u6df1\u641c\u90a3\u4e48\u62bd\u8c61\uff0c\u53ea\u8981\u4e25\u683c\u6309\u9898\u76ee\u8981\u6c42\uff0c\u53ea\u8981\u961f\u5217\u4e0d\u7a7a\uff0c\u53d6\u51fa\u961f\u5934\uff0c\u5982\u679c\u4e0d\u662f\u76ee\u6807\u8282\u70b9\uff0c\u628a\u53ef\u4ee5\u8bbf\u95ee\u7684\u70b9\u5b58\u5165\u961f\u5217\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u76f4\u63a5\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\n#include<cstring>\nusing namespace std;\nint map[60][60]; //\u68cb\u76d8 \nint rmi[60][60][4]; //\u8d70\u5230[x,y]\u4e14\u9762\u671dz\u7684\u65f6\u5019\uff0c\u6700\u5c11\u9700\u8981\u591a\u5c11\u6b65 \nint bx, by, dx, dy, n, m; //\u51fa\u53d1\u4f4d\u7f6e\u548c\u76ee\u6807\u4f4d\u7f6e \nstruct vertex\n{\n  int x,y,z;  //\u6a2a\u3001\u7eb5\u3001\u65b9\u5411  \n}v[100010];\nchar face;   //\u671d\u5411 \nint main()\n{\n  //freopen(\"P1126.in\",\"r\",stdin);\n  int head=0, tail=0;\n  cin>>n>>m;\n  for(int i=0; i<n; i++)    //\u683c\u5b50\u56fe\u8f6c\u5316\u4e3a\u70b9\u56fe\u3002i,j\u4ece0\u5f00\u59cb\uff0c\u8fb9\u754c\u843d\u57280\u3001n\u3001m \n\tfor(int j=0; j<m; j++)  //(1,1)\u5230(n-1,m-1)\u53ef\u4ee5\u901a\u884c \n\t{\n\t  int x;\n\t  cin>>x;\n\t  if(x) map[i][j]=map[i][j+1]=map[i+1][j]=map[i+1][j+1]=1; \n\t} \n  cin>>bx>>by>>dx>>dy>>face;\n  memset(rmi, 127/3, sizeof(rmi));\n  v[head].x = bx;\n  v[head].y = by;\n  switch(face)    //\u597d\u4e45\u6ca1\u7528switch\u4e86\uff0c\u590d\u4e60\u4e00\u4e0b\u3002\u65b9\u5411\u6570\u5b57\u5316 \n  {\n  \tcase 'E': v[head].z=0; break;\n  \tcase 'S': v[head].z=1; break;\n  \tcase 'W': v[head].z=2; break;\n  \tcase 'N': v[head].z=3; break;\n  }\n  rmi[v[head].x][v[head].y][v[head].z]=0; //\u51fa\u53d1\u70b9\u5165\u961f\u5217\uff0c\u8d70\u5230\u8fd9\u662f\u7b2c0\u6b65 \n  while(head<=tail)\n  {\n  \tint xm=v[head].x, ym = v[head].y, zm = v[head].z, xt, yt;\n  \tif(xm==dx && ym==dy)  //\u627e\u5230\u76ee\u6807\uff0c\u76f4\u63a5\u8f93\u51fa\u3002BFS\u9996\u5148\u627e\u5230\u7684\u4e00\u5b9a\u662f\u6700\u4f18\u7684 \n\t{\n\t  cout<<rmi[xm][ym][zm];\n\t  return 0; \n\t}\n\tfor(int i=1; i<=3; i++)  //\u5224\u65ad\u76f4\u8d701\u30012\u30013\u6b65\u662f\u5426\u53ef\u884c\uff0c\u53ef\u884c\u5c31\u5165\u961f\u5217\u3002 \n\t{             \n\t  xt=xm, yt=ym;\n      switch(zm)  //\u65b9\u5411\u4e0d\u540c\uff0c\u79fb\u52a8\u540e\u7684\u4f4d\u7f6e\u7b97\u6cd5\u4e0d\u540c \n      {\n  \t    case 0: yt+=i; break;\n  \t    case 1: xt+=i; break;\n  \t    case 2: yt-=i; break;\n  \t    case 3: xt-=i; break;\n      }  \n\t  if(xt>=1 && xt<n && yt>=1 && yt<m && map[xt][yt]==0) //\u53ef\u4ee5\u8d70\u3002\u6ce8\u610f\u5224\u65ad\u8fb9\u754c \n\t  {//\u4ece\u961f\u5934\u8d70\u5230\u8fd9\u91cc\u662frmi[xm][ym][zm]+1\u6b65\uff0c\u5982\u679c\u6bd4\u4ee5\u524d\u7684\u4f18\uff0c\u5c31\u201c\u8d70\u201d\u3002\n\t  \tif(rmi[xt][yt][zm]>rmi[xm][ym][zm]+1)   \n\t  \t{\n\t  \t  tail++;\n\t  \t  v[tail].x = xt;\n\t  \t  v[tail].y = yt;\n\t  \t  v[tail].z = zm;\n\t  \t  rmi[xt][yt][zm]=rmi[xm][ym][zm]+1;\n\t\t}\n\t  }\n\t  else  //\u5982\u679c\u67d0\u4e00\u6b65\u4e0d\u80fd\u8d70\uff0c\u90a3\u4e48\u540c\u65b9\u5411\u66f4\u957f\u7684\u8ddd\u79bb\u663e\u7136\u4e0d\u80fd\u8d70\uff0c\u6240\u4ee5\u76f4\u63a5break\u3002\n\t    break;\n\t}\n\tif(rmi[xm][ym][zm+1%4]>rmi[xm][ym][zm]+1)  //\u5224\u65ad\u8f6c\u5411\uff0c\u8f6c\u5411\u7684\u65f6\u5019\u4e0d\u79fb\u52a8\uff0c\u4e0d\u5224\u65ad\u8fb9\u754c\u3002 \n\t{\n\t  tail++; v[tail].x=xm; v[tail].y=ym; v[tail].z=(zm+1)%4; \n\t  rmi[xm][ym][(zm+1)%4] = rmi[xm][ym][zm]+1;\n\t}\n    if(rmi[xm][ym][(zm+3)%4]>rmi[xm][ym][zm]+1)  //\u53e6\u4e00\u4e2a\u65b9\u5411\u7684\u8f6c\u5411 \n    {\n      tail++; v[tail].x=xm; v[tail].y=ym; v[tail].z=(zm+3)%4;\n\t  rmi[xm][ym][(zm+3)%4] = rmi[xm][ym][zm]+1;\t\n\t}\n\thead++;\n  }\n  cout<<-1;\n  return 0;\n} \n```\n",
        "postTime": 1569735968,
        "uid": 183446,
        "name": "slz1",
        "ccfLevel": 0,
        "title": "P1126 \u673a\u5668\u4eba\u642c\u91cd\u7269\uff08BFS\uff09"
    },
    {
        "content": "\u9898\u76ee\u94fe\u63a5\uff1ahttps://www.luogu.org/problem/P1126\n\n## \u3010\u9898\u76ee\u63cf\u8ff0\u3011\n\u673a\u5668\u4eba\u79fb\u52a8\u5b66\u4f1a\uff08RMI\uff09\u73b0\u5728\u6b63\u5c1d\u8bd5\u7528\u673a\u5668\u4eba\u642c\u8fd0\u7269\u54c1\u3002\u673a\u5668\u4eba\u7684\u5f62\u72b6\u662f\u4e00\u4e2a\u76f4\u5f841.6\u7c73\u7684\u7403\u3002\u5728\u8bd5\u9a8c\u9636\u6bb5\uff0c\u673a\u5668\u4eba\u88ab\u7528\u4e8e\u5728\u4e00\u4e2a\u50a8\u85cf\u5ba4\u4e2d\u642c\u8fd0\u8d27\u7269\u3002\u50a8\u85cf\u5ba4\u662f\u4e00\u4e2aN*M\u7684\u7f51\u683c\uff0c\u6709\u4e9b\u683c\u5b50\u4e3a\u4e0d\u53ef\u79fb\u52a8\u7684\u969c\u788d\u3002\u673a\u5668\u4eba\u7684\u4e2d\u5fc3\u603b\u662f\u5728\u683c\u70b9\u4e0a\uff0c\u5f53\u7136\uff0c\u673a\u5668\u4eba\u5fc5\u987b\u5728\u6700\u77ed\u7684\u65f6\u95f4\u5185\u628a\u7269\u54c1\u642c\u8fd0\u5230\u6307\u5b9a\u7684\u5730\u65b9\u3002\u673a\u5668\u4eba\u63a5\u53d7\u7684\u6307\u4ee4\u6709\uff1a\u5411\u524d\u79fb\u52a81\u6b65\uff08Creep\uff09\uff1b\u5411\u524d\u79fb\u52a82\u6b65\uff08Walk\uff09\uff1b\u5411\u524d\u79fb\u52a83 \u6b65\uff08Run\uff09\uff1b\u5411\u5de6\u8f6c\uff08Left\uff09\uff1b\u5411\u53f3\u8f6c\uff08Right\uff09\u3002\u6bcf\u4e2a\u6307\u4ee4\u6240\u9700\u8981\u7684\u65f6\u95f4\u4e3a1 \u79d2\u3002\u8bf7\u4f60\u8ba1\u7b97\u4e00\u4e0b\u673a\u5668\u4eba\u5b8c\u6210\u4efb\u52a1\u6240\u9700\u7684\u6700\u5c11\u65f6\u95f4\u3002\n\n## \u3010\u8f93\u5165\u683c\u5f0f\u3011\n\u7b2c\u4e00\u884c\u4e3a\u4e24\u4e2a\u6b63\u6574\u6570N,M(N,M\u226450)\uff0c\u4e0b\u9762N\u884c\u662f\u50a8\u85cf\u5ba4\u7684\u6784\u9020\uff0c0\u8868\u793a\u65e0\u969c\u788d\uff0c1\u8868\u793a\u6709\u969c\u788d\uff0c\u6570\u5b57\u4e4b\u95f4\u7528\u4e00\u4e2a\u7a7a\u683c\u9694\u5f00\u3002\u63a5\u7740\u4e00\u884c\u67094\u4e2a\u6574\u6570\u548c1\u4e2a\u5927\u5199\u5b57\u6bcd\uff0c\u5206\u522b\u4e3a\u8d77\u59cb\u70b9\u548c\u76ee\u6807\u70b9\u5de6\u4e0a\u89d2\u7f51\u683c\u7684\u884c\u4e0e\u5217\uff0c\u8d77\u59cb\u65f6\u7684\u9762\u5bf9\u65b9\u5411\uff08\u4e1cE\uff0c\u5357S\uff0c\u897fW\uff0c\u5317N\uff09\uff0c\u6570\u4e0e\u6570\uff0c\u6570\u4e0e\u5b57\u6bcd\u4e4b\u95f4\u5747\u7528\u4e00\u4e2a\u7a7a\u683c\u9694\u5f00\u3002\u7ec8\u70b9\u7684\u9762\u5411\u65b9\u5411\u662f\u4efb\u610f\u7684\u3002\n\n## \u3010\u8f93\u51fa\u683c\u5f0f\u3011\n\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u673a\u5668\u4eba\u5b8c\u6210\u4efb\u52a1\u6240\u9700\u7684\u6700\u5c11\u65f6\u95f4\u3002\u5982\u679c\u65e0\u6cd5\u5230\u8fbe\uff0c\u8f93\u51fa-1\u3002\n\n![](https://cdn.luogu.com.cn/upload/pic/39.png)\n\n## \u3010\u89e3\u9898\u601d\u8def\u3011\n\u4e00\u9053\u5f88\u7b80\u5355\u7684\u5e7f\u641c\u9898\u76ee\uff0c\u4f46\u5374\u66b4\u9732\u51fa\u4e86\u6211\u7684\u5f88\u591a\u95ee\u9898\uff0c\u9996\u5148\uff0c\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u662f\u4ece\u5f53\u524d\u8282\u70b9\u5411\u5176\u5b50\u8282\u70b9\u9010\u4e2a\u641c\u7d22\uff0c\u6240\u4ee5\u5728\u641c\u7d22\u65f6\u4e0d\u80fd\u8d8a\u8fc7\u5176\u5b50\u8282\u70b9\u800c\u76f4\u63a5\u8bbf\u95ee\u5b59\u5b50\u8282\u70b9\uff0c\u8fd9\u662f\u4e0d\u5408\u6cd5\u7684\uff0c\u5728\u672c\u9898\u4e2d\uff0c\u4e00\u5171\u6709\u5411\u524d\u79fb\u52a81\u6b65\uff0c\u5411\u524d\u79fb\u52a82\u6b65\uff0c\u5411\u524d\u79fb\u52a83 \u6b65\uff0c\u5411\u5de6\u8f6c\uff0c\u5411\u53f3\u8f6c\u4e94\u79cd\u64cd\u4f5c\uff0c\u6240\u4ee5\u6bcf\u4e2a\u8282\u70b9\u5e94\u8be5\u53ea\u5141\u8bb8\u67095\u4e2a\u5b50\u8282\u70b9\uff0c\u518d\u5c06\u5b50\u8282\u70b9\u5165\u961f\u5373\u53ef\u3002\n\n\u8fd9\u9898\u6709\u70b9\u7c7b\u4f3c\u4e8e\u6a21\u62df\u9898\uff0c\u8981\u4e00\u6b65\u4e00\u6b65\u60f3\u6e05\u695a\uff0c\u800c\u4e14\u5728\u6700\u5f00\u59cb\u4e00\u5b9a\u8981\u6ce8\u610f\u8981\u5c06\u7f51\u683c\u56fe\u5316\u4e3a\u70b9\u56fe\uff0c\u5426\u5219\u4f1a\u6709\u5927\u95ee\u9898\u3002\n\n\u5176\u4f59\u770b\u6ce8\u91ca\u3002\n\n## \u3010AC\u4ee3\u7801\u3011\n```cpp\n#include <queue>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\ntypedef long long ll;\nusing namespace std;\nint map[55][55];\nint step[55][55][5];  //\u8bb0\u5f55\u65f6\u95f4\nbool vis[55][55][5];\nint n, m, a, b, c, d, s;\ntypedef struct node\n{\n\tint x, y;\n\tint s;\n\tnode(int mx, int my, char ms) :x(mx), y(my), s(ms) {};\n}node;\nvoid bfs()  //\u5e38\u89c4bfs\u4f7f\u5176\u5206\u522b\u5b8c\u62105\u79cd\u64cd\u4f5c\n{\n\tqueue<node> que;\n\tque.push(node(a, b, s));\n\tvis[a][b][s] = true;\n\twhile (!que.empty())\n\t{\n\t\tnode u = que.front();\n\t\tif (u.x == c && u.y == d)\n\t\t{\n\t\t\tprintf(\"%d\\n\", step[u.x][u.y][u.s]);\n\t\t\treturn;\n\t\t}\n\t\tque.pop();\n\t\tif (u.s == 1)\n\t\t{\n\t\t\tif (!vis[u.x][u.y][4])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][4] = true;\n\t\t\t\tstep[u.x][u.y][4] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 4));\n\t\t\t}\n\t\t\tif (!vis[u.x][u.y][2])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][2] = true;\n\t\t\t\tstep[u.x][u.y][2] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 2));\n\t\t\t}\n\t\t\tif (u.y + 1 <= m && !map[u.x][u.y + 1] && !vis[u.x][u.y + 1][1])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y + 1][u.s] = true;\n\t\t\t\tstep[u.x][u.y + 1][u.s] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y + 1, 1));\n\t\t\t}\n\t\t\tif (u.y + 2 <= m && !map[u.x][u.y + 2] && !map[u.x][u.y + 1] && !vis[u.x][u.y + 2][1])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y + 2][u.s] = true;\n\t\t\t\tstep[u.x][u.y + 2][u.s] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y + 2, 1));\n\t\t\t}\n\t\t\tif (u.y + 3 <= m && !map[u.x][u.y + 1] && !map[u.x][u.y + 2] && !map[u.x][u.y + 3] && !vis[u.x][u.y + 3][1])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y + 3][u.s] = true;\n\t\t\t\tstep[u.x][u.y + 3][u.s] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y + 3, 1));\n\t\t\t}\n\t\t}\n\t\tif (u.s == 2)\n\t\t{\n\t\t\tif (!vis[u.x][u.y][1])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][1] = true;\n\t\t\t\tstep[u.x][u.y][1] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 1));\n\t\t\t}\n\t\t\tif (!vis[u.x][u.y][3])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][3] = true;\n\t\t\t\tstep[u.x][u.y][3] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 3));\n\t\t\t}\n\t\t\tif (u.x + 1 <= n && !map[u.x + 1][u.y] && !vis[u.x + 1][u.y][2])\n\t\t\t{\n\t\t\t\tvis[u.x + 1][u.y][2] = true;\n\t\t\t\tstep[u.x + 1][u.y][2] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x + 1, u.y, 2));\n\t\t\t}\n\t\t\tif (u.x + 2 <= n && !map[u.x + 2][u.y] && !map[u.x + 1][u.y] && !vis[u.x + 2][u.y][2])\n\t\t\t{\n\t\t\t\tvis[u.x + 2][u.y][2] = true;\n\t\t\t\tstep[u.x + 2][u.y][2] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x + 2, u.y, 2));\n\t\t\t}\n\t\t\tif (u.x + 3 <= n && !map[u.x + 1][u.y] && !map[u.x + 2][u.y] && !map[u.x + 3][u.y] && !vis[u.x + 3][u.y][2])\n\t\t\t{\n\t\t\t\tvis[u.x + 3][u.y][2] = true;\n\t\t\t\tstep[u.x + 3][u.y][2] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x + 3, u.y, 2));\n\t\t\t}\n\t\t}\n\t\tif (u.s == 3)\n\t\t{\n\t\t\tif (!vis[u.x][u.y][4])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][4] = true;\n\t\t\t\tstep[u.x][u.y][4] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 4));\n\t\t\t}\n\t\t\tif (!vis[u.x][u.y][2])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][2] = true;\n\t\t\t\tstep[u.x][u.y][2] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 2));\n\t\t\t}\n\t\t\tif (u.y - 1 > 1 && !map[u.x][u.y - 1] && !vis[u.x][u.y - 1][3])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y - 1][3] = true;\n\t\t\t\tstep[u.x][u.y - 1][3] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y - 1, 3));\n\t\t\t}\n\t\t\tif (u.y - 2 > 1 && !map[u.x][u.y - 2] && !map[u.x][u.y - 1] && !vis[u.x][u.y - 2][3])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y - 2][3] = true;\n\t\t\t\tstep[u.x][u.y - 2][3] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y - 2, 3));\n\t\t\t}\n\t\t\tif (u.y - 3 > 1 && !map[u.x][u.y - 1] && !map[u.x][u.y - 2] && !map[u.x][u.y - 3] && !vis[u.x][u.y - 3][3])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y - 3][3] = true;\n\t\t\t\tstep[u.x][u.y - 3][3] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y - 3, 3));\n\t\t\t}\n\t\t}\n\t\tif (u.s == 4)\n\t\t{\n\t\t\tif (!vis[u.x][u.y][3])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][3] = true;\n\t\t\t\tstep[u.x][u.y][3] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 3));\n\t\t\t}\n\t\t\tif (!vis[u.x][u.y][1])\n\t\t\t{\n\t\t\t\tvis[u.x][u.y][1] = true;\n\t\t\t\tstep[u.x][u.y][1] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x, u.y, 1));\n\t\t\t}\n\t\t\tif (u.x - 1 > 1 && !map[u.x - 1][u.y] && !vis[u.x - 1][u.y][4])\n\t\t\t{\n\t\t\t\tvis[u.x - 1][u.y][4] = true;\n\t\t\t\tstep[u.x - 1][u.y][4] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x - 1, u.y, 4));\n\t\t\t}\n\t\t\tif (u.x - 2 > 1 && !map[u.x - 2][u.y] && !map[u.x - 1][u.y] && !vis[u.x - 2][u.y][4])\n\t\t\t{\n\t\t\t\tvis[u.x - 2][u.y][4] = true;\n\t\t\t\tstep[u.x - 2][u.y][4] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x - 2, u.y, 4));\n\t\t\t}\n\t\t\tif (u.x - 3 > 1 && !map[u.x - 3][u.y] && !map[u.x - 2][u.y] && !map[u.x - 1][u.y] && !vis[u.x - 3][u.y][4])\n\t\t\t{\n\t\t\t\tvis[u.x - 3][u.y][4] = true;\n\t\t\t\tstep[u.x - 3][u.y][4] = step[u.x][u.y][u.s] + 1;\n\t\t\t\tque.push(node(u.x - 3, u.y, 4));\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"-1\\n\");  //\u5982\u679c\u6ca1\u6709\u8fd4\u56de\u5219\u8bf4\u660e\u4e0d\u80fd\u5230\u8fbe\u7ec8\u70b9\n}\nint main()\n{\n\tscanf(\"%d%d\", &n, &m);\n\tint t;\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tfor (int j = 1; j <= m; j++)\n\t\t{\n\t\t\tscanf(\"%d\", &t);\n\t\t\tif (t == 1)\n\t\t\t\tmap[i][j] = map[i + 1][j] = map[i][j + 1] = map[i + 1][j + 1] = 1;  //\u5c06\u7f51\u56fe\u5316\u4e3a\u70b9\u56fe\n\t\t}\n\t}\n\tscanf(\"%d%d%d%d\", &a, &b, &c, &d);\n\tchar p;\n\tscanf(\" %c\", &p);\n\tswitch (p)  //\u75281,2,3,4\u5206\u522b\u4ee3\u8868\u4e1c\u5357\u897f\u5317\u65b9\u4fbf\u8bb0\u5fc6\n\t{\n\tcase 'E':s = 1; break;\n\tcase 'S':s = 2; break;\n\tcase 'W':s = 3; break;\n\tcase 'N':s = 4; break;\n\tdefault:break;\n\t}\n\ta++, b++, c++, d++; //\u5316\u4e3a\u70b9\u56fe\u540e\u66f4\u65b0\u8d77\u70b9\u7ec8\u70b9\u5750\u6807\uff0c\u6ce8\u610fn\u548cm\u4e0d\u7528\u66f4\u65b0\u56e0\u4e3a\u673a\u5668\u4eba\u6709\u9762\u79ef\uff0c\u4e0d\u80fd\u5230\u8fbe\u8fb9\u7f18\u70b9\n\tbfs();\n\treturn 0;\n}\n```\n",
        "postTime": 1567496911,
        "uid": 226316,
        "name": "YZL11111",
        "ccfLevel": 0,
        "title": "P1126 \u673a\u5668\u4eba\u642c\u91cd\u7269 \u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "\u5176\u5b9e\u8fd9\u9898\u601d\u8def\u633a~~\u6e05\u6670\u7684~~\uff0c\u7ed3\u679c\u5361\u4e86\u6211\u534a\u5929\u7684\u526a\u679d\u2026\u679c\u7136\u8fd8\u662f\u9119\u4eba\u592a\u83dc\n\n```c\n/*************************************************************************\n > FileName:\n > Author:      Lance\n > Mail:        lancelot_hcs@qq.com\n > Date:        9102.1.8\n > Description:\n ************************************************************************/\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#include <vector>\n#include <map>\n#include <set>\n#include <bitset>\n#include <string>\n#include <cmath>\n#include <sstream>\nusing namespace std;\ntypedef long long ll;\nconst double pi = acos(-1.0);\nconst int eps = 1e-10;\nconst int mod = 1e9 + 7;\nconst int INF = 0x3f3f3f3f;//int2147483647//ll9e18//unsigned ll 1e19\nconst int maxn = 55;\n\nint dir0[4][3][2] = {{{1, 0}, {2, 0}, {3, 0}}, {{0, 1}, {0, 2}, {0, 3}}, {{-1, 0}, {-2, 0}, {-3, 0}}, {{0, -1}, {0, -2}, {0, -3}}};\nint maze1[maxn][maxn], maze[maxn][maxn];\nbool vis[4][maxn][maxn];\nint n, m, starx, stary, stard, aimx, aimy;\nstring strl = \"123\";\nchar c;\n\nstruct node\n{\n    int x, y;\n    int dir1, step;\n    node(int _x, int _y, int _dir1, int _step) : x(_x), y(_y), dir1(_dir1), step(_step) {}\n};\n\nbool if_print(int x, int y, int s)\n{\n    if(x == aimx && y == aimy)\n    {\n        printf(\"%d\\n\", s);\n        return 1;\n    }\n    return 0;\n}\n\nbool test(int x, int y, int dir)\n{\n    return x > 0 && y > 0 && x < n && y < m && !maze[x][y] && !vis[dir][x][y] ? 1 : 0;\n}\n/*0123\u4ee3\u8868senw*/\nvoid bfs(int x, int y, int dir, int step)\n{\n    queue <node> q;\n    q.push(node(x, y, dir, step));\n    vis[dir][x][y] = 1;\n    while(!q.empty())\n    {\n        node top = q.front();\n        if (top.x == aimx && top.y == aimy)\n        {\n            printf(\"%d\\n\", top.step);\n            //            cout << top.str << endl;\n            return;\n        }\n        q.pop();\n        int tx, ty, tdir = top.dir1, tstep = top.step + 1;\n        for (int i = 0 ; i < 3; i++)\n        {\n            if (i == 0)\n            {\n                if (test(top.x + dir0[tdir][i][0], top.y + dir0[tdir][i][1], tdir))\n                {\n\n                    tx = top.x + dir0[tdir][i][0];\n                    ty = top.y + dir0[tdir][i][1];\n                    vis[tdir][tx][ty] = 1;\n                    q.push(node(tx, ty, tdir, tstep));\n                    if(if_print(tx, ty, tstep))\n                        return;\n                }\n            }\n            if (i == 1)\n            {\n                if (test(top.x + dir0[tdir][i][0], top.y + dir0[tdir][i][1], tdir) && !maze[top.x + dir0[tdir][i - 1][0]][top.y + dir0[tdir][i - 1][1]])\n                {\n\n                    tx = top.x + dir0[tdir][i][0];\n                    ty = top.y + dir0[tdir][i][1];\n                    vis[tdir][tx][ty] = 1;\n                    q.push(node(tx, ty, tdir, tstep));\n                    if(if_print(tx, ty, tstep))\n                        return;\n                }\n            }\n            else\n            {\n                if (test(top.x + dir0[tdir][i][0], top.y + dir0[tdir][i][1], tdir) && !maze[top.x + dir0[tdir][i - 1][0]][top.y + dir0[tdir][i - 1][1]] && !maze[top.x + dir0[tdir][i - 2][0]][top.y + dir0[tdir][i - 2][1]])\n                {\n\n                    tx = top.x + dir0[tdir][i][0];\n                    ty = top.y + dir0[tdir][i][1];\n                    vis[tdir][tx][ty] = 1;\n                    q.push(node(tx, ty, tdir, tstep));\n                    if(if_print(tx, ty, tstep))\n                        return;\n                }\n            }\n\n        }\n        vis[tdir][top.x][top.y] = 1;\n        if (tdir == 3)\n        {\n\n            if(!vis[tdir - 1][top.x][top.y])\n            {\n                q.push(node(top.x, top.y, tdir - 1, tstep));\n                vis[tdir - 1][top.x][top.y] = 1;\n            }\n\n            if(!vis[0][top.x][top.y])\n            {\n                q.push(node(top.x, top.y, 0, tstep));\n                vis[0][top.x][top.y] = 1;\n            }\n\n        }\n        else if(tdir == 0)\n        {\n            if(!vis[tdir + 1][top.x][top.y])\n            {\n                q.push(node(top.x, top.y, tdir + 1, tstep));\n                vis[tdir + 1][top.x][top.y] = 1;\n            }\n\n            if(!vis[3][top.x][top.y])\n            {\n                q.push(node(top.x, top.y, 3, tstep));\n                vis[3][top.x][top.y] = 1;\n            }\n\n        }\n        else\n        {\n            if(!vis[tdir + 1][top.x][top.y])\n            {\n                q.push(node(top.x, top.y, tdir + 1, tstep));\n                vis[tdir + 1][top.x][top.y] = 1;\n            }\n\n            if(!vis[tdir - 1][top.x][top.y])\n            {\n                q.push(node(top.x, top.y, tdir - 1, tstep));\n                vis[tdir - 1][top.x][top.y] = 1;\n            }\n\n        }\n    }\n    puts(\"-1\");\n    return;\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 0; i < n; i++)\n    {\n        for (int j = 0; j < m; j++)\n        {\n            scanf(\"%d\", &maze1[i][j]);\n        }\n    }\n    for (int i = 0 ; i < n ; i++)\n    {\n        for (int j = 0; j < m; j++)\n        {\n            if(maze1[i][j])\n            {\n                maze[i][j] = 1;\n                maze[i + 1][j] = 1;\n                maze[i][j + 1] = 1;\n                maze[i + 1][j + 1] = 1;\n            }\n        }\n    }\n    scanf(\"%d%d%d%d %c\", &starx, &stary, &aimx, &aimy, &c);\n    if (c == 'S')/*0123\u4ee3\u8868senw*/\n        stard = 0;\n    else if(c == 'E')\n        stard = 1;\n    else if(c == 'N')\n        stard = 2;\n    else\n        stard = 3;\n    bfs(starx, stary, stard, 0);\n    return 0;\n}\n```",
        "postTime": 1566114937,
        "uid": 124725,
        "name": "\u6cdb\u5728\u7fbd\u8863\u7cbe",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\uff08\u84bb\u849f\u7b2c\u4e00\u6b21\u9898\u89e3\uff0c\u6c42\u8f7b\u55b7QwQ\uff09\n\u5584\u7528stl\u3001enum\uff0cvis\u91c7\u7528\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u6807\u5fd7\u65b9\u5411\uff08\u72b6\u538b\uff09\uff0c\u4f7f\u7528\u6570\u7ec4lf\u3001rt\u3001offX\u3001offY\u6765\u8868\u793a\u5de6\u53f3\u8f6c\u3001\u884c\u8d70\uff0c\u4ee3\u7801\u53ef\u4ee5\u5927\u5e45\u7b80\u77ed\u5e76\u6e05\u695a\u8bb8\u591a\u3002\n```cpp\n#include<iostream>\n#include<queue>\n\nusing namespace std;\n\nconst int MAXN = 55;\n\nenum Dir {\n    E = 0x1, W = 0x2, N = 0x4, S = 0x8\n};\n\nstruct Point {\n    int x;\n    int y;\n    Dir dir;\n    int cnt;\n    bool operator == (const Point& p) const {\n        return x == p.x && y == p.y;\n    }\n};\n\nbool maze[MAXN][MAXN];\nshort vis[MAXN][MAXN], n, m;\nint offX[9], offY[9];\nDir lf[9], rt[9];\n\ninline bool inBound(Point p) {\n    return p.x > 0 && p.x <= n && p.y > 0 && p.y <= m; \n}\n\ninline bool canStay(Point p) {\n    return maze[p.x][p.y] && maze[p.x][p.y+1]\n        && maze[p.x+1][p.y] && maze[p.x+1][p.y+1];\n}\n\nvoid init() {\n    offX[S] = 1; offX[N] = -1; offY[W] = -1; offY[E] = 1;\n    lf[W] = S; lf[S] = E; lf[E] = N; lf[N] = W;\n    rt[E] = S; rt[S] = W; rt[W] = N; rt[N] = E;\n}\n\nint bfs(Point st, Point dst) {\n    queue<Point> Q;\n    Point cur;\n    bool flag = false;\n    st.cnt = 0;\n    Q.push(st);\n    while (!Q.empty()) {\n        cur = Q.front();\n        Q.pop();\n        if (cur == dst) { flag = true; break; }\n        if (!inBound(cur)) continue;\n        if (vis[cur.x][cur.y] & cur.dir) continue;\n        vis[cur.x][cur.y] |= cur.dir;\n        if (!canStay(cur)) continue;\n        // Ops\n        Point walk = {cur.x+offX[cur.dir], cur.y+offY[cur.dir], cur.dir, cur.cnt+1};\n        Q.push(walk);\n        if (canStay(walk)) {\n            walk = {cur.x+offX[cur.dir]*2, cur.y+offY[cur.dir]*2, cur.dir, cur.cnt+1};\n            Q.push(walk);\n            if (canStay(walk)) {\n                Q.push((Point){cur.x+offX[cur.dir]*3, cur.y+offY[cur.dir]*3, cur.dir, cur.cnt+1});\n            }\n        }\n        Q.push((Point){cur.x, cur.y, lf[cur.dir], cur.cnt+1});\n        Q.push((Point){cur.x, cur.y, rt[cur.dir], cur.cnt+1});\n    }\n    return flag? cur.cnt: -1;\n}\n\nint main() {\n    int cur;\n    Point st, dst;\n    char dir;\n    cin >> n >> m;\n    init();\n    for (int i = 1; i <= n; i++) {\n        for (int j = 1; j <= m; j++) {\n            cin >> cur;\n            maze[i][j] = cur == 0;\n        }\n    }\n    cin >> st.x >> st.y >> dst.x >> dst.y >> dir;\n    st.dir = dir == 'N' ? N:\n        dir == 'S' ? S:\n        dir == 'W' ? W: E;\n    cout << bfs(st, dst) << endl;\n    return 0;\n}\n```\n",
        "postTime": 1552304348,
        "uid": 107467,
        "name": "KAAAsS",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\t\u5efa\u7acb\u94fe\u8868\n\n\t\u5efa\u7acb\u6807\u8bb0\u6570\u7ec4\uff08\u51e0\u79cd\u72b6\u6001\u7528\u51e0\u7ef4\uff09\n\n\t\u5411\u94fe\u8868\u52a0\u7b2c\u4e00\u4e2a\u5143\u7d20\n\n\t\u6807\u8bb0\u7b2c\u4e00\u4e2a\u5143\u7d20\n\n\tWhile(\u4e0d\u4e3a\u7a7a){\t\n   \t\u53d6\u51fa\u961f\u9996\n\t\u5224\u65ad\u961f\u9996\u662f\u4e0d\u662f\u76ee\u6807\u5143\u7d20\n\t\u6240\u6709\u4e0e\u961f\u9996\u76f8\u90bb\u4e14\u4e3a\u88ab\u6807\u8bb0\u7684\u70b9\u8fdb\u961f\u5217(\n\t\t1\uff0c\u5224\u65ad\u51fa\u754c\n\t\t2\uff0c\u5224\u65ad\u6709\u65e0\u969c\u788d\n\t\t3\uff0c\u5224\u65ad\u662f\u5426\u8d70\u8fc7\n\t)\n\t\u6807\u8bb0\u5176\u4e3a\u5df2\u8bbf\u95ee\n}\n\n#### \u4e4b\u524d\u4e00\u76f4\u901a\u4e0d\u8fc7\u662f\uff1a\n1\uff09\u8d70\u6b65\u6570\u95ee\u9898\uff0c\u4e2d\u95f4\u65ad\u4e86\u5e94\u8be5\u76f4\u63a5break;\n\n2\uff09\u8fb9\u754c\u5904\u7406\uff0c\u70b9\u8f83\u4e3a\u9ebb\u70e6\n\n3\uff09\u5f53\u8d77\u70b9\u548c\u7ec8\u70b9\u4e00\u6837\u65f6\uff0c\u6ca1\u6709\u6bd4\u8f83\uff08\u53ef\u4ee5\u51fa\u961f\u6bd4\u8f83\uff0c\u800c\u4e0d\u662f\u5165\u961f\u6bd4\u8f83\uff09\n\n4\uff09\u52a0\u4e0a\u65b9\u5411\u8fd9\u4e2a\u72b6\u6001\u53d8\u6210\u4e09\u7ef4\u6570\u7ec4\n\n\uff08\u8fd9\u91cc\u65b9\u5411\u7528\u7684map,\u7c7b\u662f\u4e00\u6837\u7684\u4f46\u91cc\u9762\u7684\u6210\u5458\u4f5c\u7528\u7565\u6709\u4e0d\u540c\uff09\n\n\u7528\u7684\u662fJAVA\n\n\u7b2c\u4e00\u6b21\u53d1\u9898\u89e3\uff0c\u7ed9\u81ea\u5df1\u7559\u4e2a\u7b14\u8bb0*-*\n```java\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.io.PrintWriter;\nimport java.io.StreamTokenizer;\nimport java.util.HashMap;\nimport java.util.LinkedList;\nimport java.util.Map;\n\npublic class P1126 {\n\tstatic class Pos{\n\t\tint x;\n\t\tint y;\n\t\tchar f;\n\t\tint stap;\n\t\tpublic Pos(int x,int y,char f,int s){\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.f = f;\n\t\t\tthis.stap = s;\n\t\t}\n\t}\n\t\n\tpublic static void main(String[] args) throws IOException {\n\t\tStreamTokenizer in=new StreamTokenizer(new BufferedReader(new InputStreamReader(System.in)));\n\t\tPrintWriter out = new PrintWriter(new OutputStreamWriter(System.out));\n\t\tin.nextToken();\n\t\tint n=(int)in.nval;\n\t\tin.nextToken();\n\t\tint m = (int) in.nval;\n\t\tint[][] map = new int[n][m];\n\t\tfor(int i = 0; i < n; i++){\n\t\t\tfor(int j = 0; j < m ; j++){\n\t\t\t\tin.nextToken();\n\t\t\t\tmap[i][j] = (int) in.nval;\n\t\t\t}\n\t\t}\n\t\tLinkedList<Pos> list = new LinkedList<Pos>();\n\t\tin.nextToken();\n\t\tint startx = (int) in.nval;\n\t\tin.nextToken();\n\t\tint starty = (int) in.nval;\n\t\tin.nextToken();\n\t\tint endx = (int) in.nval;\n\t\tin.nextToken();\n\t\tint endy = (int) in.nval;\n\t\tin.nextToken();\n\t\tif(startx == endx && starty == endy){\n\t\t\tSystem.out.println(\"0\");\n\t\t\treturn;\n\t\t}\n\t\tchar flag = in.sval.charAt(0);\n\t\t\n\t\t//\u65b9\u5411\n\t\tMap<Character,Pos> farr = new HashMap<Character,Pos>();\n\t\tfarr.put('N', new Pos(-1,0,'S',0));\n\t\tfarr.put('S', new Pos(1,0,'N',1));\n\t\tfarr.put('W', new Pos(0,-1,'E',2));\n\t\tfarr.put('E', new Pos(0,1,'W',3));\n\t\t//\u8bb0\u5f55\uff0c\u9632\u6b62\u91cd\u590d\uff0c\u526a\u679d\n\t\tint[][][] book1 = new int[n][m][4];\n\t\t//\u521d\u59cb\u5316\u7b2c\u4e00\u4e2a\n\t\tlist.add(new Pos(startx,starty,flag,0));\n\t\tbook1[startx][starty][farr.get(flag).stap] = 1;\n\t\t//\u5f00\u59cb\u68c0\u7d22\n\t\twhile(!list.isEmpty()){\n\t\t\tPos item = list.poll();\n\t\t\t//\u884c\u8d70\u6307\u4ee4\n\t\t\tint count = item.stap + 1;\n\t\t\tint i = 0;\n\t\t\twhile(++i <= 3){\n\t\t\t\tPos temf = farr.get(item.f);\n\t\t\t\tint temx = item.x + temf.x * i;\n\t\t\t\tint temy = item.y + temf.y * i;\n\t\t\t\t//\u5224\u65ad\u51fa\u754c\n\t\t\t\tif(temx < 1||temx >= n ||temy < 1|| temy >= m)\n\t\t\t\t\tcontinue;\n\t\t\t\t//\u5224\u65ad\u6709\u65e0\u65ad\u70b9\n\t\t\t\tif(map[temx-1][temy] == 1||map[temx-1][temy-1] == 1||map[temx][temy] == 1||map[temx][temy-1] == 1)\n\t\t\t\t\tbreak;\n\t\t\t\t//\u5224\u65ad\u662f\u5426\u5230\u8fbe\u7ec8\u70b9\n\t\t\t\tif(temx == endx && temy == endy){\n\t\t\t\t\tSystem.out.println(count);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tint f1 = farr.get(item.f).stap;\n\t\t\t\t//\u5224\u65ad\u662f\u5426\u8d70\u8fc7\uff0c\u526a\u679d,\u662f\u5426\u80fd\u5230\u8fbe\n\t\t\t\tif(book1[temx][temy][f1] == 0){\n\t\t\t\t\t//\u6807\u8bb0\u8d70\u8fc7\n\t\t\t\t\tbook1[temx][temy][f1] = 1;\n\t\t\t\t\tlist.add(new Pos(temx,temy,item.f,count));\n\t\t\t\t}\n\t\t\t}\n\t\t\t//\u8f6c\u5411\u6307\u4ee4\n\t\t\tPos temf = farr.get(item.f);\n\t\t\tchar c1 = temf.f;\n\t\t\tchar c2 = item.f;\n\t\t\tif(c1 != 'N' && c2 != 'N'){\n\t\t\t\tif(book1[item.x][item.y][0] != 1){\n\t\t\t\t\tbook1[item.x][item.y][0] = 1;\n\t\t\t\t\tlist.add(new Pos(item.x,item.y,'N',count));\n\t\t\t\t}\n\t\t\t\tif(book1[item.x][item.y][1] != 1){\n\t\t\t\t\tbook1[item.x][item.y][1] = 1;\n\t\t\t\t\tlist.add(new Pos(item.x,item.y,'S',count));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(c1 != 'W' && c2 != 'W'){\n\t\t\t\tif(book1[item.x][item.y][2] != 1){\n\t\t\t\t\tbook1[item.x][item.y][2] = 1;\n\t\t\t\t\tlist.add(new Pos(item.x,item.y,'W',count));\n\t\t\t\t}\n\t\t\t\tif(book1[item.x][item.y][3] != 1){\n\t\t\t\t\tbook1[item.x][item.y][3] = 1;\n\t\t\t\t\tlist.add(new Pos(item.x,item.y,'E',count));\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(\"-1\");\n\t}\n}\n\n```\n",
        "postTime": 1551695226,
        "uid": 187584,
        "name": "DeltaVi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u9898\u76ee\u672c\u8eab\u5c31\u662f\u5e7f\u5ea6\u641c\u7d22\u90fd\u8bad\u7ec3\n\n\u96be\u5ea6\u5e76\u4e0d\u9ad8\uff0c\u6709\u51e0\u4e2a\u6ce8\u610f\u70b9\n\n1 \u7f51\u683c\u653e\u969c\u788d\u7269\u7528\u7684\u5750\u6807\u662f\u683c\u5b50\uff0c\u8303\u56f4N*M\uff1b\u673a\u5668\u4eba\u8d70\u7684\u70b9\u662f\u4ea4\u70b9\uff0c\u4f46\u662f\u56e0\u4e3a\u6709\u4f53\u79ef\uff0c\u56db\u4e2a\u8fb9\u754c\u90fd\u4e0d\u53ef\u5230\u8fbe\uff0c\u80fd\u8d70\u7684\u8303\u56f4\u53cd\u800c\u66f4\u5c0f\u662f\uff1a1\uff5eN-1 * 1\uff5eM-1\n\n2 bfs\u64cd\u4f5c\u662f\u9488\u5bf9\u673a\u5668\u4eba\u7684\u8fd0\u52a8\uff0c\u5b83\u7684\u4f4d\u7f6e\u548c\u56db\u89d2\u7684\u683c\u5b50\u70b9\u5750\u6807\u5173\u7cfb\u3002\u673a\u5668\u4eba\u5750\u6807\u662f\uff08i\uff0cj\uff09\uff0c\u56db\u4e2a\u53c2\u4e0e\u5f71\u54cd\u7684\u683c\u5b50\u5750\u6807\u5c31\u662f\uff0c\uff08i\uff0cj\uff09\uff08i\uff0cj-1\uff09\uff0c \uff08i-1\uff0c j\uff09\u548c\uff08i-1\uff0c j-1\uff09\n\n3 \u6bcf\u4e2a\u4ea4\u70b9\u4e0a\uff0c\u5b9e\u9645\u4e0a\u670912\u79cd\u53ef\u80fd\uff1b 4\u4e2a\u65b9\u5411\uff0c\u6bcf\u4e2a\u65b9\u5411\u4e0a\u524d\u8fdb1\uff0c2\uff0c3\u6b65\u3002\u6ce8\u610f\u65cb\u8f6c\u7684\u4ee3\u4ef7\u8981\u52a0\u5230\u4e0d\u540c\u7684\u65b9\u5411\u53d8\u5316\u4e0a\u53bb\n\n\u4ee3\u7801\u5b9e\u73b0\u7684\u65f6\u5019\uff0c\u4f7f\u7528vis\u6570\u7ec4\u6807\u8bb0\uff0c\u6807\u8bb0\u7684\u5185\u5bb9\u5982\u679c\u662f-1\u8868\u793a\u8fd8\u6ca1\u6709\u5230\u8fbe\u8fc7\uff0c \u5176\u4ed6\u6570\u503c\u662f\u5230\u8fbe\u5bf9\u5e94\u7684\u4ea4\u70b9\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u5e76\u6ca1\u6709\u6807\u8bb0\u8be5\u4ea4\u70b9\u662f\u5426\u5728\u961f\u5217\u5f53\u4e2d\uff1b \u8fd9\u662f\u56e0\u4e3a\uff0c\u4e00\u4e2a\u4ea4\u70b9\u53ef\u80fd\u901a\u8fc7\u4e0d\u540c\u7684\u8def\u5f84\u5230\u8fbe\uff0c\u8981\u5224\u5b9a\u7684\u662f\u91cd\u590d\u5230\u8fbe\u65f6\u5019\u7684\u4ee3\u4ef7\u6709\u591a\u5927\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5f53\u518d\u6b21\u5230\u8fbe\u7684\u65f6\u5019\uff0c\u5982\u679c\u4ee3\u4ef7\u548c\u4fdd\u5b58\u7684\u4e00\u6837\uff0c\u90a3\u4e48\u8fd8\u662f\u9700\u8981\u7ee7\u7eed\u628a\u8be5\u70b9\u653e\u5165\u961f\u5217\u7684\uff0c\u4ee3\u4ef7\u867d\u7136\u4e00\u6837\u4f46\u662f\u5230\u8fbe\u8fd9\u91cc\u65f6\u5019\u7684\u8fd0\u52a8\u65b9\u5411\u53ef\u80fd\u4e0d\u540c\uff0c\u8fd9\u4f1a\u5bf9\u540e\u7eed\u7684\u8ba1\u7b97\u6709\u5f71\u54cd\u7684\u3002\n\n\u5177\u4f53\u7ec6\u8282\u548c\u5c0f\u6280\u5de7\u770b\u4ee3\u7801\u6ce8\u91ca\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n\n\n```\n#include <iostream>\n#include <cstring>\n#include <queue>\nusing namespace std;\n#define MAXMN 50\nint grid[MAXMN][MAXMN]; // \u683c\u5b50\nint N, M;\n\n// \u6ce8\u610f\u683c\u5b50\u548c\u673a\u5668\u4eba\u8d70\u7684\u7f51\u683c\u4ea4\u70b9\u662f\u4e0d\u540c\uff0c\u7f51\u683c\u4ea4\u70b9\u662fN+1 * M+1 \u4e2a\n// \u56e0\u4e3a\u673a\u5668\u4eba\u5360\u636e\u4f4d\u7f6e\uff0c\u56db\u8fb9\u513f\u90fd\u4e0d\u53ef\u8fbe\u3002\n// \u9664\u4e86grid\u4e4b\u5916\uff0c\u5176\u4ed6\u7684\u6570\u636e\u5b58\u50a8\u7684\u90fd\u662f\u4ea4\u70b9\nstruct POS {\n    int x; int y; int nWay;\n} ptStart, ptEnd;  //\nqueue<POS> q;\nint vis[MAXMN][MAXMN];  // -1 \u521d\u59cb\u72b6\u6001\uff0c0\u4ee5\u4e0a\u662f\u5230\u8fbe\u6b64\u5904\u7684\u6700\u5c0f\u4ee3\u4ef7\n\nvoid readDate();        // \u8bfb\u53d6\u6570\u636e\u5e76\u521d\u59cb\u5316\n\n// bfs\u5904\u7406\u7684\u70b9\u90fd\u662f\u4ea4\u70b9\uff0c\u800c\u4e0d\u662f\u683c\u5b50\u70b9\nvoid  bfs() {\n    POS pt = ptStart;\n    vis[pt.x][pt.y] = 0; // \u5230\u8fbe\u5165\u53e3\u70b9\u4ee3\u4ef70\n    while(1) {\n        // \u65cb\u8f6c\u548c\u884c\u8d70\u5f52\u5e76\u5230\u4e00\u8d77\uff0cvis\u5f53\u4e2d\u8bb0\u5f55\u5230\u8fbe\u7684\u6700\u5c0f\u6b65\u6570\n        // \u6bcf\u4e2a\u70b9\u4e0a\u5b9e\u9645\u6700\u591a\u670912\u79cd\u53ef\u80fd\uff0c\u5206\u522b\u662f\n        // 1 \u76f4\u884c1\uff0c2\uff0c3\u6b65        // 2 \u5de6\u8f6c1\uff0c2\uff0c3\u6b65\n        // 3 \u56de\u59341\uff0c2\uff0c3\u6b65        // 4 \u53f3\u8f6c1\uff0c2\uff0c3\u6b65\n        for ( int i=0; i<4; i++ ) {\n            int newWay = pt.nWay + i; newWay %= 4; // \u8c03\u6574\u65b9\u5411\n            \n            const int vWay [] = { -1, 0, 1, 0, -1, };\n            // N: 0 1  E: 1 0 S:0 -1 W:-1 0\n            const int nCost[] = { 0, 1, 2, 1, }; // \u65cb\u8f6c\u7684\u4ee3\u4ef7\n            \n            for (int j=1; j<4; j++) {\n                POS newP = pt; newP.nWay = newWay;\n                // \u65b0\u65b9\u5411\u4e0a\uff0c\u5411\u524d\u8d70j\u6b65\u7684\u65b0\u4f4d\u7f6e\n                newP.x += vWay[newP.nWay]*j;\n                newP.y += vWay[newP.nWay+1]*j;\n                \n                // \u65b0\u4f4d\u7f6e\u662f\u5426\u53ef\u884c\uff0c\u68c0\u6d4b\u8ddd\u79bb\u5468\u8fb9\u683c\u5b50\u8ddd\u79bb\n                // \u5982\u679c\u8d70j\u6b65\u4e0d\u53ef\u884c\uff0c\u66f4\u591a\u6b65\u5fc5\u7136\u4e5f\u4e0d\u53ef\u884c\uff0c\u6240\u4ee5\u662f\n                //    break\u800c\u4e0d\u662fcontinue\n                // \u65b0\u70b9\u4e0d\u53ef\u4ee5\u662f\u8fb9\u754c\n                if ( newP.x <= 0   || newP.y  <=  0 ) break;\n                if ( newP.x >  N-1 || newP.y  > M-1 ) break;\n                // \u65b0\u70b9\u56db\u5468\u7684\u683c\u5b50\u4e0d\u80fd\u88ab\u5360\u636e\n                if ( 1 == grid[newP.x]  [newP.y] )    break;\n                if ( 1 == grid[newP.x]  [newP.y-1] )  break;\n                if ( 1 == grid[newP.x-1][newP.y])   break;\n                if ( 1 == grid[newP.x-1][newP.y-1]) break;\n                \n                // \u81f3\u6b64\u65b0\u70b9\u662f\u53ef\u8fbe\u5230\u3002\u4e0b\u9762\u8981\u8ba1\u7b97\u5230\u6b64\u5230\u4ee3\u4ef7,\u589e\u52a0\u65cb\u8f6c\u548c\u884c\u8d70\u7684\u6210\u672c\n                int  curCost = vis[pt.x][pt.y] + nCost[i] + 1;\n                \n                // \u5230\u8fbe\u7ec8\u70b9\uff0c\u4f18\u5316cost\u5e76break\n                if ( newP.x == ptEnd.x && newP.y == ptEnd.y ) {\n                    int& oldCost = vis[newP.x][newP.y];\n                    if ( oldCost==-1 || oldCost>curCost)\n                        oldCost = curCost;\n                    break;\n                };\n                \n                // \u8fd8\u6ca1\u6709\u5230\u8fbe\u7ec8\u70b9\n                int& oldCost = vis[newP.x][newP.y];\n                if ( oldCost == -1 || oldCost>=curCost) {\n                    // \u4e0d\u7ba1\u6b64\u70b9\u662f\u5426\u5df2\u7ecf\u5728\u961f\u5217\u91cc\u9762\u4e86\uff0c\u90fd\u8981\u518d\u653e\u5165\u961f\u5217\u5904\u7406\n                    oldCost = curCost;\n                    q.push(newP);\n                    continue;\n                } else if ( oldCost<curCost ) {\n                    // \u4ee5\u524d\u5230\u8fbe\u8fc7\uff0c\u800c\u4e14\u5f00\u9500\u66f4\u5c0f\uff0c \u4fdd\u7559\u4ee5\u524d\uff0c\u653e\u5f03\u5f53\u524d\n                    continue;\n                }\n            };\n        };\n        if ( !q.empty() ) {\n            pt = q.front();\n            q.pop();\n        } else break;\n    };\n    cout << vis[ptEnd.x][ptEnd.y];\n}\nint main() {\n    readDate();\n    bfs();\n    return 0;\n};\n\nvoid readDate () {\n    cin >> N >> M;\n    for ( int i=0; i<N; i++ ) {\n        for ( int j=0; j<M; j++) {\n            int t;\n            cin >> t;\n            grid[i][j]=t;\n        };\n    };\n    cin >> ptStart.x >> ptStart.y;\n    cin >> ptEnd.x   >> ptEnd.y;\n    char c;  cin >> c;\n    if ( c=='N' ) ptStart.nWay=0;\n    else if ( c=='E' ) ptStart.nWay = 1;\n    else if ( c=='S' ) ptStart.nWay = 2;\n    else ptStart.nWay = 3;\n    memset(vis, 0xFF, MAXMN*MAXMN*sizeof(int));\n};\n\n```",
        "postTime": 1550050465,
        "uid": 141918,
        "name": "fakefire",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u672c\u849f\u84bb\u82b1\u4e86\u6574\u6574\u56db\u4e2a\u5c0f\u65f6\u624dAC\u6389\uff0c\u786c\u751f\u751f\u7684\u628aBFS\u5199\u6210\u4e86\u534a\u4e2a\u6a21\u62df\u3002\u3002\n\n### \u8fd9\u9053\u9898\u5728\u8bf4\u601d\u8def\u4e4b\u524d\u6709\u51e0\u4e2a\u5c0f\u5751\u9700\u8981\u6ce8\u610f\u4e00\u4e0b \n1.\u8f93\u5165\u7684\u77e9\u9635\u4e0d\u662f\u683c\u70b9\uff0c\u800c\u662f\u65b9\u5757\u3002\n\n2.\u7531\u4e8e\u673a\u5668\u4eba\u662f\u7ad9\u5728\u683c\u70b9\u4e0a\u7684\u7403\u4f53\uff0c\u6240\u4ee5\u8fb9\u754c\u683c\u70b9\u4e5f\u4e0d\u53ef\u4ee5\u53bb\u3002\n\n3.\u8d77\u70b9\u548c\u7ec8\u70b9\u53ef\u80fd\u91cd\u5408\u3002\n\n### \u7136\u540e\u8bf4\u4e00\u4e0b\u6211\u7684\u5177\u4f53\u601d\u8def\uff1a\n\n\u6211\u8fd9\u91cc\u7528\u4e86\u7ed3\u6784\u4f53\u6765\u5b58\u50a8BFS\u65f6\u7684\u72b6\u6001,\u3000\u5e76\u4e14BFS\u65f6\u7528\u4e86\u4f18\u5148\u961f\u5217\uff08\u7ef4\u62a4\u65f6\u6839\u636eans\u7684\u5927\u5c0f\u4ece\u5c0f\u5230\u5927\uff09\uff0c\u5224\u91cd\u7528\u7684\u662f\u56db\u7ef4\u6570\u7ec4\uff0852^4\u6ca1\u6709MLE\uff09, \u673a\u5668\u4eba\u7684\u79fb\u52a8\u7528\u4e86\u4e00\u4e2a\u957f\u4e3a12\u7684\u6570\u7ec4\uff0c\u4ee3\u8868\u5411\u56db\u4e2a\u65b9\u5411\u79fb\u52a81\u52303\u683c\u768412\u79cd\u53ef\u80fd\uff0c\u7136\u540e\u7528ans1\u8bb0\u5f55\u5e76\u4e0d\u65ad\u66f4\u65b0\u7b54\u6848\u3002\n\n\u4e0b\u9644AC\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define INF 99999999\nusing namespace std;\nint fx,fy,ex,ey,n,m,i,j,l=0,ans1=INF,k;\nbool a[55][55],v[52][52][52][52];    //\u524d\u4e8c\u7ef4\u8868\u793a\u5f53\u524d\u70b9\u5750\u6807\uff0c\u540e\u4e8c\u7ef4\u8868\u793a\u524d\u7f00\uff08\u4e0a\u4e2a\u70b9\u7684\u5750\u6807\uff09 \n//\u4e3e\u4e2a\u6817\u5b50 a(0,1) b(0,2) c(0,3) \u867d\u7136\u65b9\u5411\u76f8\u540c\uff0c\u4f46a->c\u4e0eb->c\u5e76\u4e0d\u91cd\u590d\nint dx[12]={-3,-2,-1,0,0,0,0,0,0,3,2,1};\nint dy[12]={0,0,0,3,2,1,-3,-2,-1,0,0,0};  //\u79fb\u52a8\u6570\u7ec4\nchar direct;\nint direc;\nint direc3;\nstruct node{\n    int x;\n    int y;\n    int d;\t//\u65b9\u5411\n    int ans;//\u8bb0\u5f55\u7b54\u6848\n    bool operator < (const node & a) const //\u7ef4\u62a4\u5c0f\u6839\u5806\n    {\n        return ans > a.ans;\n    }\n}cur,now,fir,las;\npriority_queue <node> q;\nvoid bfs()\n{\n    q.push(fir);  //\u538b\u5165\u8d77\u70b9\n    while(!q.empty())\n    {\n        now=q.top();q.pop();\n \t\tfor(i=0;i<12;i++)\n        {\n            if(i<=2) direc3=1; //1\u4ee3\u8868\u5317\uff0c2\u4ee3\u8868\u4e1c\uff0c3\u4ee3\u8868\u5357\uff0c4\u4ee3\u8868\u897f\n            else if(i<=5) direc3=2;\n            else if(i<=8) direc3=4;\n            else if(i<=11) direc3=3; //\u6839\u636ei\u7684\u5927\u5c0f\u5224\u65ad\u79fb\u52a8\u540e\u7684\u65b9\u5411\n            cur.x=now.x+dx[i];\n            cur.y=now.y+dy[i];\n            if(cur.x==fir.x && cur.y==fir.y) continue; //\u4e0d\u518d\u91cd\u590d\u7ecf\u8fc7\u8d77\u70b9\n            bool f=true;\n            if(cur.x==now.x) \n                for(j=min(now.y,cur.y);j<=max(now.y,cur.y);j++)\n                    if(a[now.x][j]==1) f=false;\n            if(cur.y==now.y) \n                for(j=min(now.x,cur.x);j<=max(now.x,cur.x);j++)\n                    if(a[j][now.y]==1) f=false;//\u5224\u65ad\u79fb\u52a8\u8fc7\u7a0b\u4e2d\u6709\u65e0\u969c\u788d\n            if(!f) continue; //\u6709\u969c\u788d\u5219\u8df3\u8fc7\n            if(a[cur.x][cur.y]==1||cur.x>=n||cur.x<1||cur.y>=m||cur.y<1) continue;//\u65e2\u4e0d\u80fd\u8d70\u6709\u969c\u788d\u7684\u70b9\uff0c\u53c8\u4e0d\u80fd\u8d70\u5230\u8fb9\u754c\uff08\u4f1a\u649e\u5899\uff09\n            if(v[cur.x][cur.y][now.x][now.y]==1) continue;//\u4e0d\u8d70\u91cd\u70b9\n            int ml=abs(now.d-direc3); //\u8ba1\u7b97\u8f6c\u5411\u7684\u82b1\u8d39\n            if(ml==3) ml=1;           //\u53f3\u8f6c\u4e09\u6b21\u7b49\u540c\u4e8e\u5de6\u8f6c\u4e00\u6b21\n            cur.ans=now.ans+ml+1;\t  //\u5f53\u524d\u7b54\u6848\u7531\u4e0a\u4e2a\u70b9\u7684\u7b54\u6848\u52a0\u51fa\n           \tif(cur.x==las.x && cur.y==las.y) \n                ans1=min(ans1,cur.ans);//\u66f4\u65b0\u7b54\u6848\n            cur.d=direc3;\n            q.push(cur);              //\u5165\u961f\n            v[cur.x][cur.y][now.x][now.y]=1;//\u6807\u8bb0\n        }\n    }\n}\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(i=1;i<=n;i++)\n        for(int j=1;j<=m;j++)\n        {\n            scanf(\"%d\",&a[i][j]);\n            if(a[i][j]==1) a[i-1][j-1]=1,a[i-1][j]=1,a[i][j-1]=1;\n            if(i==0||j==0||i==n||j==m) a[i][j]=1; //\u4fdd\u9669\u8d77\u89c1\uff0c\u7981\u6b62\u8d70\u5230\u8fb9\u754c\n        }\t\t\t\n    scanf(\"%d%d%d%d\",&fir.x,&fir.y,&las.x,&las.y);\n    cin>>direct;\n    if(fir.x==las.x && las.y==fir.y)  //\u82e5\u8d77\u70b9\u7ec8\u70b9\u91cd\u5408\uff0c\u76f4\u63a5\u8f93\u51fa0\n    {\n        cout<<0<<endl;\n        return 0;\n    }\n    if(direct=='N') direc=1;\n    if(direct=='E') direc=2;\n    if(direct=='S') direc=3;\n    if(direct=='W') direc=4; //\u65b9\u5411\n    //1\u4ee3\u8868\u5317\uff0c2\u4ee3\u8868\u4e1c\uff0c3\u4ee3\u8868\u5357\uff0c4\u4ee3\u8868\u897f\n    fir.d=direc;\n    fir.ans=0;\n    bfs();\n    if(ans1!=INF) //\u6709\u7b54\u6848\u5219\u8f93\u51fa\n    {\n        cout<<ans1;\n        return 0;\n    }\n    printf(\"-1\");\n    return 0;\n}\n```\n\u4ee5\u4e0a\u505a\u6cd5\u82e5\u6709\u4e0d\u597d\u6216\u8005\u53ef\u4f18\u5316\u7684\u5730\u65b9\uff0c\u8fd8\u8bf7dalao\u4eec\u591a\u591a\u6307\u6559\uff0c\u8c22\u8c22",
        "postTime": 1519289445,
        "uid": 26512,
        "name": "Christopher_Yan",
        "ccfLevel": 0,
        "title": "\u6d1b\u8c37 1126 \u673a\u5668\u4eba\u642c\u91cd\u7269"
    },
    {
        "content": "#\u5176\u5b9e\u8fd9\u4e2a\u9898\u53ef\u4ee5\u6362\u4e2a\u601d\u8def\n\n\\_\\_\u5c31\u4e0d\u597d\u597d\u5199\u6700\u77ed\u8def\u3010\u6ed1\u7a3d\n\n##\u628a\u6bcf\u4e2a\u70b9\u62c6\u6210\u56db\u4e2a\u70b9\n\n\u80fd\u4e0e\u8be5\u70b9\u8054\u901a\u7684\u5c31\u53ea\u6709\u8be5\u70b9\u7684\u53e6\u5916\u4e09\u4e2a\u65b9\u5411\u548c\u80fd\u76f4\u8d70\u5230\u7684n\u4e2a\u70b9(0<=n<=3)\n\n\u8fd9\u6837\u8fd9\u9053\u9898\u5c31\u53d8\u6210\u4e86\u4e00\u4e2a\u6700\u77ed\u8def\u95ee\u9898\n\n\u8dd1spfa\u6216dijkstra\u90fd\u884c\uff0c\u56e0\u4e3a\u72b6\u6001\u6bd4\u8f83\u591a\uff0c\u6240\u4ee5spfa\u597d\u5199\u4e9b(\u6bd5\u7adf\u5c31\u662fbfs\uff09\u6760\u6389\n\n\u4e0d\u8fc7\u8fd9\u9898\u8fd8\u662f\u6709\u5f88\u591a\u7ec6\u8282\u8981\u5904\u7406\n\n**AC\u7a0b\u5e8f**\n\n###\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int INF=1061109567;\nint d[55][55][4];//\u5b58\u6700\u77ed\u8def 0\u8868\u793aN 1\u8868\u793aE 2\u8868\u793aS 3\u8868\u793aW \nint m[55][55],b[55][55];\nbool vis[55][55][4];\nint n,mm,sx,sy,ex,ey,sf;\nchar ch;\nstruct node{\n    int x,y,f;\n};\nvoid spfa(){     //\u8dd1\u4e00\u904d\u6700\u77ed\u7684\u8def\uff0c\u72b6\u6001\u6709\u70b9\u591a\uff0cspfa\u6bd4\u5806\u4f18\u5316\u7684dijkstra \n    queue<node> q;\n    d[sx][sy][sf]=0;\n    node node_t;\n    node_t.x=sx;node_t.y=sy;node_t.f=sf;\n    vis[sx][sy][sf]=1;\n    q.push(node_t);\n    while(!q.empty()){\n        node node_now=q.front();q.pop();    \n        int tx=node_now.x,ty=node_now.y,tf=node_now.f;\n        vis[tx][ty][tf]=0;\n        for(int i=1;i<=3;i++){   //\u76f4\u8d70 \n            if(tf==0){             //\u5199\u5230\u4e00\u5757\u592a\u9ebb\u70e6\u4e86\u4e0d\u5982\u590d\u5236\u7c98\u8d34 \n                int tox=tx-i;\n                int toy=ty;\n                if(tox<1||b[tox][toy])    break; //\u4e00\u5b9a\u8981break \n                if(d[tox][toy][tf]>d[tx][ty][tf]+1){\n                    d[tox][toy][tf]=d[tx][ty][tf]+1;\n                    node tt;\n                    tt.x=tox;tt.y=toy;tt.f=tf;\n                    if(!vis[tox][toy][tf]){\n                        q.push(tt);\n                        vis[tox][toy][tf]=1;\n                    }\n                }\n            }\n            else if(tf==1){\n                int tox=tx;\n                int toy=ty+i;\n                if(toy>mm||b[tox][toy]) break;//\u6211\u4e00\u5f00\u59cb\u5199\u7684continue\u7136\u540e\u6211\u7684\u673a\u5668\u4eba\u5c31\u5b66\u4f1a\u4e86\u95ea\u73b0\u7a7f\u5899 \n                if(d[tox][toy][tf]>d[tx][ty][tf]+1){\n                    d[tox][toy][tf]=d[tx][ty][tf]+1;\n                    node tt;\n                    tt.x=tox;tt.y=toy;tt.f=tf;\n                    if(!vis[tox][toy][tf]){\n                        q.push(tt);\n                        vis[tox][toy][tf]=1;\n                    }\n                }\n            }\n            else if(tf==2){\n                int tox=tx+i;\n                int toy=ty;\n                if(tox>n+1||b[tox][toy]) break; //\u5c31\u662f\u8fd9\u4e2abreak\u8ba9\u6211\u6d6a\u8d39\u4e861\u4e2a\u5c0f\u65f6 \n                if(d[tox][toy][tf]>d[tx][ty][tf]+1){\n                    d[tox][toy][tf]=d[tx][ty][tf]+1;\n                    node tt;\n                    tt.x=tox;tt.y=toy;tt.f=tf;\n                    if(!vis[tox][toy][tf]){\n                        q.push(tt);\n                        vis[tox][toy][tf]=1;\n                    }\n                }\n            }\n            else if(tf==3){\n                int tox=tx;\n                int toy=ty-i;\n                if(toy<0||b[tox][toy]) break;//\u7f6a\u9b41\u7978\u9996\uff01\uff01 \n                if(d[tox][toy][tf]>d[tx][ty][tf]+1){\n                    d[tox][toy][tf]=d[tx][ty][tf]+1;\n                    node tt;\n                    tt.x=tox;tt.y=toy;tt.f=tf;\n                    if(!vis[tox][toy][tf]){\n                        q.push(tt);\n                        vis[tox][toy][tf]=1;\n                    }\n                }\n            }\n        }\n        for(int i,k=1;k<=3;k+=2){ //\u8f6c\u5411 \n            i=(tf+k)%4; \n            if(i!=tf){\n                if(d[tx][ty][i]>d[tx][ty][tf]+1){\n                    d[tx][ty][i]=d[tx][ty][tf]+1;\n                    node tt;\n                    tt.x=tx;tt.y=ty;tt.f=i;\n                    if(!vis[tx][ty][i]){\n                        q.push(tt);\n                        vis[tx][ty][i]=1;\n                    }\n                }\n            }\n        }    \n    }\n}\nvoid debug(){    //\u8c03\u8bd5\u7684\u65f6\u5019\u7528\u7684  \n        for(int i=1;i<=n+1;i++){\n        for(int j=0;j<=mm;j++){\n            printf(\"%-3d\",b[i][j]); //\u8fd9\u6837\u8f93\u51fa\u6781\u5176\u6574\u9f50 \n        }\n        cout<<endl;\n    }\n    cout<<sx<<\" \"<<sy<<\" \"<<ex<<\" \"<<ey<<\" \"<<endl;\n    cout<<endl;\n    for(int k=0;k<4;k++){\n        for(int i=1;i<=n+1;i++){\n            for(int j=0;j<=mm;j++){\n                if(d[i][j][k]==INF) printf(\"%-3d\",-1); //\u4e0d\u7136\u770b\u7684\u773c\u6655 \n                else printf(\"%-3d\",d[i][j][k]);    //\u6211\u624d\u4e0d\u662f\u5f3a\u8feb\u75c7 \n            }\n            cout<<endl;\n        }\n        cout<<endl;        \n    }\n}\nint main(){\n    cin>>n>>mm;\n    for(int i=1;i<=n;i++){\n        for(int j=1;j<=mm;j++){\n            cin>>m[i][j];\n        }\n    }\n    memset(d,0x3f,sizeof(d));\n    cin>>sx>>sy>>ex>>ey>>ch;\n    sx++;ex++;        //emm\u2026\u884c\u548c\u5217\u6709\u70b9\u9519\u4f4d \n    if(ch=='N') sf=0;\n    else if(ch=='E') sf=1;\n    else if(ch=='S') sf=2;\n    else if(ch=='W') sf=3;\n    for(int i=1;i<=n+1;i++){ //\u9884\u5904\u7406:\u628a\u65b9\u683c\u56fe\u6362\u6210\u70b9\u56fe\uff0c\u4e0d\u5982\u6bcf\u6b21\u5224\u65ad\u5f88\u9ebb\u70e6\uff0c50\u00d750\u65f6\u95f4\u4e5f\u4e0d\u4f1a\u6162\u5f88\u591a\uff0c\u8bf4\u4e0d\u5b9a\u8fd8\u8d5a\u70b9 \n        for(int j=0;j<=mm;j++){\n            if(i==1||i==n+1||j==0||j==mm) b[i][j]=1;\n            if(m[i][j]){\n                b[i][j]=1;b[i][j-1]=1;b[i+1][j]=1;b[i+1][j-1]=1;\n            }\n        }\n    }\n    spfa();            //spfa \n//    debug();\n    int minn=INF;    //\u627e\u6700\u5c0f \n    for(int i=0;i<4;i++){\n        minn=min(minn,d[ex][ey][i]);\n    }\n    if(minn==INF) cout<<-1<<endl; //\u54b3\u54b3 \u4e00\u5f00\u59cb\u5fd8\u5199\u4e86 \n    else cout<<minn<<endl;\n}\n```",
        "postTime": 1508902100,
        "uid": 27495,
        "name": "bymlg001",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "/\\*\u4e00\u9053\u6bd4\u8f83\u7b80\u5355\u7684\u5e7f\u641c\u9898 \u9002\u5408\u7ec3\u624b \u4e0d\u8fc7\u6ce8\u610f\u7684\u5730\u65b9\u6bd4\u8f83\u591a\n\n\u7ec8\u70b9\u4e00\u5b9a\u662f\u8d70\u51fa\u6765\u7684\uff0c\u4e0d\u662f\u8f6c\u51fa\u6765\u7684\u3002\u65e0\u9700\u5224\u65ad\u8d70\u5230\u67d0\u70b9\u65f6\u7684\u6b65\u6570\u5927\u5c0f\uff0c\u56e0\u4e3a\u662f\u5e7f\u641c\uff0c\u5148\u8d70\u5230\u4e00\u5b9a\u6b65\u6570\u6700\u5c0f\n\n\\*/\n```cpp\n#include<cstdio>\nvoid read(int &y)//\u5feb\u901f\u8bfb\u5165 \n{\n    y=0;char x=getchar();int f=1;\n    while(x<'0'||x>'9')\n    {\n        if(x=='-') f=-1;\n        x=getchar();\n    }\n    while(x>='0'&&x<='9')\n    {\n        y=y*10+x-'0';\n        x=getchar();\n    }\n    y*=f;\n}\nint b[55][55],v[55][55][5];\nint qd[20005],qx[20005],qy[20005],qs[20005];//\u8fd9\u5c31\u662f\u961f\u5217\u5566\u3002\u3002\u3002qx\u3001qy\u662f\u5750\u6807\uff0cqd\u662f\u65b9\u5411\uff0cqs\u662f\u5df2\u7ecf\u8d70\u7684\u6b65\u6570 \nint rx,ry,l,r;\nint nx[6]={0,0,1,0,-1,0};\nint ny[6]={0,1,0,-1,0,0};\nchar de[5];\nvoid add(int x,int y,int d,int s)//\u5411\u961f\u5217\u4e2d\u6dfb\u52a0\u5143\u7d20 \n{\n    v[x][y][d]=1;\n    qx[++r]=x;\n    qy[r]=y;\n    qd[r]=d;\n    qs[r]=s+1;\n}\nint main()\n{\n    int n,m,x;\n    read(n);read(m);\n    for(int i=0;i<n;i++)//\u5c06\u683c\u5b50\u56fe\u8f6c\u6362\u4e3a\u70b9\u56fe\uff0c\u6bcf\u4e2a\u6709\u969c\u788d\u7269\u7684\u683c\u5b50\u963b\u65ad\u4e86\u56db\u4e2a\u70b9 \n    {\n        for(int j=0;j<m;j++)\n        {\n            read(x);\n            if(x==1)\n            {\n                b[i][j]=1;\n                b[i+1][j]=1;\n                b[i][j+1]=1;\n                b[i+1][j+1]=1;\n            }\n        }\n    }\n    int sx,sy;\n    read(sx);read(sy);read(rx);read(ry);\n    if(sx==rx&&sy==ry)//\u7279\u5224\u4e00\u4e0b\u8d77\u70b9\u4e0e\u91cd\u70b9\u91cd\u5408 \n    {\n        printf(\"0\");\n        return 0;\n    }\n    scanf(\"%s\",de);\n    if(de[0]=='E') qd[l]=1;\n    if(de[0]=='S') qd[l]=2;\n    if(de[0]=='W') qd[l]=3;\n    if(de[0]=='N') qd[l]=4;\n    qx[l]=sx;qy[l]=sy;//\u786e\u5b9a\u8d77\u59cb\u4f4d\u7f6e\u4e0e\u65b9\u5411 \n    while(l<=r)\n    {\n//        printf(\"%d %d %d %d\\n\",qx[l],qy[l],qd[l],qs[l]);\n//        \u8f93\u51fa\u4e2d\u95f4\u7ed3\u679c\uff0c\u4fbf\u4e8e\u627e\u9519 \n        for(int j=1;j<=3;j++)\n        {\n            int tx=qx[l]+nx[qd[l]]*j;\n            int ty=qy[l]+ny[qd[l]]*j;\n            if((tx<=0||tx>=n)||(ty<=0||ty>=m)) break;//\u8d8a\u754c \n            if(b[tx][ty]==1) break;//\u6709\u969c\u788d\n            //break\u800c\u4e0d\u662fcontinue\u7684\u539f\u56e0\u662f\u4e0d\u7ba1\u662f\u8d8a\u754c\u8fd8\u662f\u88ab\u963b\u6321\uff0c\u518d\u5f80\u4e0b\u8d70\u66f4\u591a\u7684\u6b65\u6570\u4e5f\u4e00\u5b9a\u8fd8\u662f\u4f1a\u6709\u8fd9\u6837\u7684\u95ee\u9898 \n            if(tx==rx&&ty==ry)//\u641c\u5230\u7ec8\u70b9\uff0c\u56e0\u4e3a\u4f7f\u7528\u5e7f\u641c\uff0c\u6240\u4ee5\u4e00\u5b9a\u662f\u6700\u5feb\u5230\u8fbe \n            {\n                printf(\"%d\",qs[l]+1);\n                return 0;\n            }\n            if(v[tx][ty][qd[l]]==0) add(tx,ty,qd[l],qs[l]);//\u9996\u5148\u5224\u65ad\u6b64\u60c5\u51b5\u662f\u5426\u51fa\u73b0\u8fc7\uff0c\u6ca1\u51fa\u73b0\u8fc7\u7684\u52a0\u5165\u961f\u5217 \n        }\n        int tl=qd[l]-1,tr=qd[l]+1;//\u679a\u4e3e\u5de6\u8f6c\u53f3\u8f6c \n        if(tl==0) tl=4;\n        if(tr==5) tr=1;\n        if(v[qx[l]][qy[l]][tl]==0) add(qx[l],qy[l],tl,qs[l]);\n        if(v[qx[l]][qy[l]][tr]==0) add(qx[l],qy[l],tr,qs[l]);\n        l++;\n    }\n    printf(\"-1\");\n    return 0;\n}\n```",
        "postTime": 1504483473,
        "uid": 25426,
        "name": "Excim",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u8fd9\u4e00\u9898\u601d\u8def\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u57fa\u672c\u7684\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\uff0c\u4f46\u662f\u4e2a\u4eba\u8ba4\u4e3a\u7f16\u7a0b\u7684\u590d\u6742\u5ea6\u6709\u4e00\u70b9\u9ad8\uff0c\u5e76\u4e14\u5751\u70b9\u8f83\u591a\uff0c\u6240\u4ee5\u8fd8\u662f\u6709\u4e00\u70b9\u7684\u96be\u5ea6\uff1a\u7efc\u5408\u8d77\u6765\u5c31\u662f\u6709\u4e00\u4e0b\u51e0\u70b9\u662f\u9700\u8981\u6ce8\u610f\u7684:\u5c31\u662f\u5bf9\u4e8e\u5730\u56fe\u4e2d\u683c\u5b50\u4e0e\u4ea4\u53c9\u70b9\u4e4b\u95f4\u7684\u5dee\u522b\u8981\u8fdb\u884c\u9884\u5904\u7406\uff0c\u5f88\u591a\u4eba\u8fd9\u91cc\u5c31\u770b\u4e0d\u61c2\u4e86\uff0c\u8fd8\u6709\u8bfb\u5165\u7684\u65f6\u5019\u8981\u6ce8\u610f\u4e0d\u8981\u5c06\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u6f0f\u4e86\uff0c\u8fd8\u6709\u5c31\u662f\u5728\u5411\u524d\u8dd1\u4e09\u683c\u7684\u65f6\u5019\u8981\u6ce8\u610f\u524d\u9762\u4e24\u683c\u4e5f\u8981\u662f\u53ef\u4ee5\u8d70\u7684\uff1a\n\n\u9644\u4e0a\u4ee3\u7801\u5982\u4e0b\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<cstdlib>\nusing namespace std;\nconst int maxn=50+10;\nint m,n,map[maxn][maxn],bx,by,ex,ey,ans;\nchar d;\nint xx[5][4]={{0,0,0,0},{0,-1,-2,-3},{0,0,0,0},{0,1,2,3},{0,0,0,0}};//\u6b64\u5904\u5bf9\u5e94\u7684\u5206\u522b\u662f\u5317\u897f\u5357\u4e1c\u56db\u4e2a\u65b9\u5411\u7684\u4e09\u4e2d\u4f4d\u79fb\uff1b\nint yy[5][4]={{0,0,0,0},{0,0,0,0},{0,-1,-2,-3},{0,0,0,0},{0,1,2,3}};\nstruct tt\n{\n    int x;\n    int y;\n    int dic;//\u8bb0\u5f55\u6b64\u65f6\u7ed3\u70b9\u7684\u65b9\u5411\n    int step;//\u8bb0\u5f55\u6b64\u65f6\u6240\u9700\u8981\u7684\u6307\u4ee4\u6761\u6570\uff1b\n}t[maxn*maxn*6];\nbool s[maxn][maxn][5];//\u6700\u540e\u4e00\u4e2a\u7ef4\u5ea6\u8bb0\u5f55\u6b64\u5750\u6807\u7684\u65b9\u5411\nvoid bfs()\n{\n    int head=0,tail=1;\n    t[1].x=bx;t[1].y=by;//\u7b2c\u4e00\u4e2a\u7ed3\u70b9\u662f\u8981\u521d\u59cb\u5316\u7684\n    if(d=='N')t[1].dic=1;\n    if(d=='W')t[1].dic=2;\n    if(d=='S')t[1].dic=3;\n    if(d=='E')t[1].dic=4;\n    while(head<tail)\n    {\n        head++;\n        int x1=t[head].x,y1=t[head].y;\n        for(int i=1;i<=4;i++)\n        {\n            if(t[head].dic!=i&&abs(t[head].dic-i)!=2&&s[x1][y1][i]==0&&map[x1][y1]==0)//\u7b2c\u4e00\u79cd\u8d70\u6cd5\u5c31\u662f\u5411\u4e24\u8fb9\u8f6c\u5411\uff1b\n            {\n                s[x1][y1][i]=1;\n                t[++tail].x=t[head].x;\n                t[tail].y=t[head].y;\n                t[tail].dic=i;\n                t[tail].step=t[head].step+1;\n            }    \n        }\n        for(int i=1;i<=3;i++)\n        {\n            x1=t[head].x+xx[t[head].dic][i];y1=t[head].y+yy[t[head].dic][i];\n            if(x1>=1&&x1<=m&&y1>=1&&y1<=n&&s[x1][y1][t[head].dic]==0&&map[x1][y1]==0)//\u7b2c\u4e8c\u79cd\u8d70\u6cd5\u5c31\u662f\u671d\u7740\u76ee\u524d\u9762\u5bf9\u7684\u65b9\u5411\u8d701\u62162\u62163\u6b65\uff1b\n            {\n                if(i>=2&&(map[t[head].x+xx[t[head].dic][i-1]][t[head].y+yy[t[head].dic][i-1]]))continue;//\u5982\u679c\u8d70\u4e24\u6b65\u4ee5\u4e0a\u7684\u8bdd\uff0c\u7b2c\u4e00\u6b65\u4e5f\u8981\u4e3a\u65e0\u969c\u788d\uff1b\n                if(i==3&&(map[t[head].x+xx[t[head].dic][i-2]][t[head].y+yy[t[head].dic][i-2]]))continue;//\u5982\u679c\u4e3a\u4e09\u6b65\u7684\u8bdd\uff0c\u7b2c\u4e8c\u6b65\u4e5f\u8981\u4e3a\u65e0\u969c\u788d\uff1b\n                s[x1][y1][t[head].dic]=1;\n                t[++tail].x=x1;\n                t[tail].y=y1;\n                t[tail].dic=t[head].dic;\n                t[tail].step=t[head].step+1;\n                if(x1==ex&&y1==ey)\n                {\n                    head=tail;\n                    ans=t[tail].step;\n                    break;\n                }\n            }\n        }\n    }\n}\nint main()\n{\n    int temp;\n    scanf(\"%d%d\",&m,&n);\n    for(int i=1;i<=m;i++)\n    for(int j=1;j<=n;j++)//\u8f93\u5165\u7684\u65f6\u5019\u6211\u628a\u5730\u56fe\u8f6c\u5316\u4e3a\u4e86\u683c\u70b9\u7684\u5f62\u5f0f\uff0c\u90a3\u4e48\u6bcf\u4e00\u4e2a\u969c\u788d\u7269\u5c31\u662f\u5360\u7528\u56db\u4e2a\u683c\u70b9\u7684\uff1b\n    {\n        if(i==1||j==1)map[i][j]=1;\n        if(i==m)map[i+1][j]=1;\n        if(j==n)map[i][j+1]=1; \n        scanf(\"%d\",&temp);\n        if(!temp)continue;\n        map[i][j]=1;map[i][j+1]=1;\n        map[i+1][j]=1;map[i+1][j+1]=1;\n    }\n    m++;n++;\n    map[m][n]=1;\n    scanf(\"%d%d%d%d\",&bx,&by,&ex,&ey);\n    bx++;by++;ex++;ey++;\n    if(bx==ex&&by==ey)//\u5982\u679c\u8d77\u70b9\u7b49\u4e8e\u7ec8\u70b9\uff0c\u90a3\u4e48\u5c31\u76f4\u63a5\u8f93\u51fa0\uff0creturn 0\uff1b\n    {\n        printf(\"0\");\n        return 0;\n    }\n    getchar();\n    scanf(\"%c\",&d);\n    bfs();\n    if(ans!=0)printf(\"%d\",ans);\n    else printf(\"-1\");//\u6ca1\u6709\u8d70\u5230\u7684\u8bdd\u5c31\u8f93\u51fa-1\uff1b\n    return 0;\n}\n```",
        "postTime": 1499905925,
        "uid": 20059,
        "name": "ylsoi",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\n```cpp\n#include <iostream>\n#include <queue>\n#include <string.h>\n#define north 0\n#define east 1\n#define south 2\n#define west 3\nusing namespace std;\nclass pos {\n```\npublic:\nint x, y, from, depth;//\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u641c\u7d22\u65f6\u5750\u6807\u3001\u65b9\u5411\u548c\u6240\u9700\u65f6\u95f4\n\n\n```cpp\n};\nconst int x[] = { 1,0,-1,0 }, y[] = { 0,-1,0,1 };//\u9488\u5bf9from\u56db\u4e2a\u65b9\u5411\uff0c\u63a5\u4e0b\u6765\u673a\u5668\u4eba\u7684\u884c\u52a8\u8def\u7ebf\uff08\u5750\u6807\u5982\u4f55\u6539\u53d8\uff09\nint n, m, sx, sy, ex, ey, sfrom,a[60][60];//sx,sy\u4e3a\u8d77\u70b9\u5750\u6807 ex,ey\u4e3a\u7ec8\u70b9\u5750\u6807 sfrom\u4e3a\u673a\u5668\u6765\u6e90\u65b9\u5411\uff08\u5373\u4e0e\u8bfb\u5165\u7684\u9762\u671d\u65b9\u5411\u76f8\u53cd\uff09 a\u4e3a\u5730\u56fe\u7684\u8bb0\u5f55\nbool b[60][60][4];//\u8bb0\u5f55\u5730\u56fe\u4e0a\u6bcf\u4e2a\u70b9\u56db\u4e2a\u65b9\u5411\u641c\u8fc7\u6ca1\u6709\nqueue<pos> dui;//\u961f\u5217\n//\u5de6\u8f6c\nint left(int from) {\n    if (from == 0) return 3;\n    return (from - 1);\n}\n//\u53f3\u8f6c\nint right(int from) {\n    if (from == 3) return 0;\n    return (from + 1);\n}\n//\u6d4b\u8bd5\u673a\u5668\u80fd\u5426\u5411\u524d\u8d70i\u683c\uff0c\u82e5\u80fd\uff0c\u540c\u65f6\u5728b\u4e2d\u8bb0\u5f55\nbool can(pos tmp, int i) {\n    tmp.x += x[tmp.from] * i;\n    tmp.y += y[tmp.from] * i;\n    if (tmp.x >= 1 && tmp.x < n && tmp.y >= 1 && tmp.y < m && a[tmp.x][tmp.y] == 0 && a[tmp.x + 1][tmp.y] == 0 && a[tmp.x][tmp.y + 1] == 0 && a[tmp.x + 1][tmp.y + 1] == 0 && !b[tmp.x][tmp.y][tmp.from]) {\n        b[tmp.x][tmp.y][tmp.from] = 1;\n        return 1;\n    }\n    return 0;\n}\n//\u4e3b\u7a0b\u5e8f\nint main() {\n    int i, j;\n    char rd;\n    memset(b, 0, sizeof(b));\n    cin >> n >> m;\n    for (i = 1; i <= n; i++)\n    for (j = 1; j <= m; j++)\n        cin >> a[i][j];\n    cin >> sx >> sy >> ex >> ey >> rd;\n    switch (rd){\n        case 'S':sfrom = north; break;\n        case 'N':sfrom = south; break;  //from\u4e3a\u6765\u6e90\u65b9\u5411\uff0c\u5e94\u4e0e\u671d\u5411\u76f8\u53cd\n        case 'E':sfrom = west; break;\n        case 'W':sfrom = east; break;\n    }\n    pos tmp = { sx,sy,sfrom,0 };\n    b[sx][sy][sfrom] = 1;\n    dui.push(tmp);\n    while (!dui.empty()) {\n        //\u82e5\u5230\u8fbe\uff0c\u76f4\u63a5\u9000\u51fa\n        if (dui.front().x == ex&&dui.front().y == ey) {\n            cout << dui.front().depth << endl;\n            return 0;\n        }\n        //\u5de6\u8f6c\n        tmp = dui.front();\n        tmp.depth += 1;\n        tmp.from = left(tmp.from);\n        if (!b[tmp.x][tmp.y][tmp.from]) {\n            dui.push(tmp);\n            b[tmp.x][tmp.y][tmp.from] = 1;\n        }\n        //\u53f3\u8f6c\n        tmp = dui.front();\n        tmp.depth += 1;\n        tmp.from = right(tmp.from);\n        if (!b[tmp.x][tmp.y][tmp.from]) {\n            dui.push(tmp);\n            b[tmp.x][tmp.y][tmp.from] = 1;\n        }\n        //\u76f4\u884c\n        tmp = dui.front();\n        tmp.depth += 1;\n        i = 1;\n        while (i < 4){\n            if (can(tmp, i)) {        //\u5982\u679c\u53ef\u4ee5\u76f4\u884ci\u683c\uff0c\u5219\u4e0b\u4e00\u683c\u5165\u961f\n                pos k = tmp;\n                k.x += x[tmp.from] * i;\n                k.y += y[tmp.from] * i;\n                dui.push(k);\n                i++;\n            }\n            else break;               //\u5426\u5219\u4e0d\u80fd\u518d\u5f80\u524d\u8d70\uff0c\u9000\u51fa\u641c\u7d22\n        }\n        //\u641c\u7d22\u5b8c\u6bd5\u51fa\u961f\n        dui.pop();\n    }\n    cout << \"-1\" << endl;\n    return 0;\n}\n```",
        "postTime": 1496812826,
        "uid": 28642,
        "name": "C2H6O",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "```cpp\n#include<cstdio>\n#include<iostream>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<queue>\n#include<algorithm>\nusing namespace std;\n\nint main()\n{\n    bool mapx[100][100];  //Map\n    queue<int> quex,quey,quedir;  //Queue of Line,Row & Direction\n    int sx,sy,ex,ey,dir,n,m; char dx;\n    int timex[100][100][4]={0}; //HASH\n    int cachex,cachey,cachedir,cachedir2,cachego=0;  //Caches\n    int wayx[4]={-1,0,1,0},wayy[4]={0,1,0,-1};  //Direction Table\n    \n    memset(mapx,true,sizeof(mapx));\n    scanf(\"%d%d\",&n,&m); \n    for (int i=0;i<n;i++)\n    {\n        for (int j=0;j<m;j++)\n        {\n            scanf(\"%d\",&mapx[i][j]);\n        }\n    }\n    scanf(\"%d%d%d%d %c\",&sx,&sy,&ex,&ey,&dx);//\u53ef\u4ee5\u5728%c\u524d\u9762\u52a0\u4e2a\u7a7a\u683c\u6765\u5438\u6536\u8bfb\u5165\u7684\u65f6\u5019\u7684\u7a7a\u683c \n    \n    switch(dx)//\u628a\u5b57\u7b26\u5f62\u5f0f\u7684\u5750\u6807\u8f6c\u5316\u6210\u6570\u5b57\uff08\u6211\u4f7f\u7528\u4e86\u65b9\u5411\u8868 \u76f4\u63a5\u7528dir\u7684\u503c\u67e5\u8868\uff0c\u518d\u4e58\u4ee5\u524d\u8fdb\u7684\u6b65\u6570\uff0c\u5c31\u662f\u5750\u6807\u53d8\u5316\u91cf \uff01\uff09 \n    {\n        case 'N':\n            dir=0;\n            break;\n        case 'E':\n            dir=1;\n            break;\n        case 'S':\n            dir=2;\n            break;\n        case 'W':\n            dir=3;\n            break;\n    }\n    sx--; sy--; ex--; ey--;//\u5904\u7406\u6210\u6570\u7ec4\u4e0b\u6807\u7684\u5f62\u5f0f\uff08\u6570\u7ec4\u4e0b\u6807\u4ece0\u5f00\u59cb\uff09 \n    timex[sx][sy][dir]=0;/*\u521d\u59cb\u5316HASH*/ quex.push(sx); quey.push(sy); quedir.push(dir); //\u521d\u59cb\u503c\u5165\u961f\u5217 \n    \n    while (quex.size()>0)\n    {\n        cachex=quex.front(); cachey=quey.front(); cachedir=quedir.front(); cachego=1; //\u961f\u9996\u503c\u7f13\u5b58\u4e00\u4e0b\uff0c\u4fbf\u4e8e\u5904\u7406 \n        if (cachex==ex && cachey==ey) //\u91c7\u7528\u5224\u65ad\u961f\u9996\u503c\u7684\u65b9\u6cd5\uff0c\u8d77\u70b9\u548c\u7ec8\u70b9\u91cd\u5408\u5c31\u4e0d\u7528\u52a0\u7279\u5224\u4e86 \n        {\n            printf(\"%d\",timex[cachex][cachey][cachedir]);\n            return 0;\n        }\n        for (int i=1;i<=5;i++)//\u4e94\u79cd\u547d\u4ee4 \n        {\n            if (i<=3/*\u5982\u679c\u662f\u524d\u4e09\u79cd*/ && cachex+wayx[cachedir]*i>=0 && cachex+wayx[cachedir]*i<n-1 && cachey+wayy[cachedir]*i>=0 && cachey+wayy[cachedir]*i<m-1/*\u6ca1\u6709\u8d8a\u754c*/ && cachego==i/*\u524d\u9762\u7684\u79fb\u52a8\u6210\u7acb*/)\n                if (mapx[cachex+wayx[cachedir]*i][cachey+wayy[cachedir]*i]==0 && mapx[cachex+wayx[cachedir]*i+1][cachey+wayy[cachedir]*i]==0 && mapx[cachex+wayx[cachedir]*i+1][cachey+wayy[cachedir]*i+1]==0 && mapx[cachex+wayx[cachedir]*i][cachey+wayy[cachedir]*i+1]==0)\n                //\u79fb\u52a8\u4e4b\u540e\u4e0d\u8d8a\u754c \u65b0\u7684xy\u5750\u6807\u662fi\uff08i\u540c\u65f6\u4ee3\u8868\u4e86\u524d\u8fdb\u7684\u6b65\u6570 \u67091\u30012\u30013\u6b65\uff09\u4e58\u4ee5\u65b9\u5411\u8868\u91cc\u76ee\u524d\u7684\u65b9\u5411\u524d\u8fdb\u4e00\u6b65\u7684xy\u5750\u6807\u53d8\u5316\u91cf \n                {\n                    cachego++;//\u524d\u4e00\u6b65\u4e0d\u80fd\u8d70\uff0c\u6709\u4e00\u79cd\u60c5\u51b5\u662fHash\u8868\u7684\u8fd9\u4e2a\u4f4d\u7f6e\u5df2\u7ecf\u5b58\u5728\u4e00\u4e2a\u66f4\u77ed\u7684\u8017\u65f6\u3002\u4f46\u8fd9\u4e0d\u4ee3\u8868\u8fd9\u4e00\u6b65\u4e0d\u80fd\u8d70\uff0c\u4e5f\u4e0d\u4ee3\u8868\u8d70\u8fd9\u4e00\u6b65\u7684\u8017\u65f6\u4e0d\u662f\u6700\u77ed\u7684\uff08\u56e0\u4e3a\u65b9\u5411\u95ee\u9898\uff09\n                    if (timex[cachex+wayx[cachedir]*i][cachey+wayy[cachedir]*i][cachedir]==0) //Hash\u8868\u5185\u8fd9\u4e2a\u4f4d\u7f6e\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\uff08\u5982\u679c\u8bbf\u95ee\u8fc7\uff0c\u5219Hash\u8868\u5185\u4e00\u5b9a\u662f\u4e00\u4e2a\u6700\u77ed\u7684\u8017\u65f6 \n                    {\n                        timex[cachex+wayx[cachedir]*i][cachey+wayy[cachedir]*i][cachedir]=timex[cachex][cachey][cachedir]+1;//\u6839\u636e\u7ed3\u70b9\u6240\u5728\u5c42\u6570\u5199\u5165Hash\u8868 \n                        quex.push(cachex+wayx[cachedir]*i); quey.push(cachey+wayy[cachedir]*i); quedir.push(cachedir);//\u5165\u961f\u5217 \n                    }\n                }\n            if (i==4) //Left\n            {\n                cachedir2=cachedir-1;\n                if (cachedir2==-1) cachedir2=3;//\u5982\u679c\u7531North\u8f6c\u5230West\uff0c\u5c31\u91cd\u7f6e\u65b9\u5411\u7f13\u5b58 \n                if (timex[cachex][cachey][cachedir2]==0) //Hash\u8868\u5185\u8fd9\u4e2a\u4f4d\u7f6e\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\uff08\u5982\u679c\u8bbf\u95ee\u8fc7\uff0c\u5219Hash\u8868\u5185\u4e00\u5b9a\u662f\u4e00\u4e2a\u6700\u77ed\u7684\u8017\u65f6 \n                {\n                    timex[cachex][cachey][cachedir2]=timex[cachex][cachey][cachedir]+1;//\u6839\u636e\u7ed3\u70b9\u6240\u5728\u5c42\u6570\u5199\u5165Hash\u8868 \n                    quex.push(cachex); quey.push(cachey); quedir.push(cachedir2);//\u5165\u961f\u5217 \n                }\n            }\n            if (i==5) //Right \u540c\u4e0a \n            {\n                cachedir2=cachedir+1;\n                if (cachedir2==4) cachedir2=0;\n                if (timex[cachex][cachey][cachedir2]==0)\n                {\n                    timex[cachex][cachey][cachedir2]=timex[cachex][cachey][cachedir]+1;\n                    quex.push(cachex); quey.push(cachey); quedir.push(cachedir2);\n                }\n            }\n        }\n        quex.pop(); quey.pop(); quedir.pop();//\u51fa\u961f\u5217 \n    }\n    cout<<-1<<endl;\n    return 0;\n}\n```",
        "postTime": 1493606258,
        "uid": 21512,
        "name": "GNAQ",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u770b\u89c1\u5730\u56fe\u5c31\u60f3\u5230\u4e86\u5e7f\u641c\uff0c\u4e00\u5f00\u59cbWA\u4e86\u4e24\u4e2a\u70b9\u662f\u56e0\u4e3a\u6ca1\u6709\u8003\u8651\u7279\u6b8a\u60c5\u51b5\u3002\n\n\u673a\u5668\u4eba\u5360\u56db\u4e2a\u683c\u5b50\uff0c\u6240\u4ee5\u6269\u5c55\u51fa\u6765\u7684\u56db\u4e2a\u683c\u5b50\u90fd\u8981\u662f\u7a7a\u5730\u3002\n\n\u673a\u5668\u4eba\u524d\u8fdb\u4e09\u683c\u662f\u53ef\u884c\u7684\u524d\u63d0\u662f\u524d\u8fdb\u4e00\u683c\uff0c\u4e24\u683c\u90fd\u662f\u53ef\u884c\u7684\u3002\n\n\u5177\u4f53\u7684\u770b\u4ee3\u7801\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<iomanip>\n#include<climits>\n#include<cstring>\nusing namespace std;\nbool ma[51][51],v[51][51];//ma:\u5730\u56fe\uff0cv:\u662f\u5426\u8d70\u8fc7\nint dl[900001][5];//1:x,2:y,3:\u671d\u5411\uff0c4\uff1a\u65f6\u95f4\nint mvx[5]={0,0,1,0,-1},mvy[5]={0,1,0,-1,0};//\u5206\u522b\u4ee3\u8868\u4e1c\u5357\u897f\u5317\u7684\u8d70\u6cd5\nint main()\n{  \n   int mx,my,m,n,i,j,k,y;\n   int head=1,tail=1,x1,x2,x3,x4,y1,y2,y3,y4;\n   char a;\n   scanf(\"%d%d\",&m,&n);\n   for(i=1;i<=m;i++)\n     for(j=1;j<=n;j++){\n     scanf(\"%d\",&y);ma[i][j]=y;v[i][j]=y;\n     }\n   scanf(\"%d%d%d%d\",&dl[1][1],&dl[1][2],&mx,&my);\n   getchar();//\u8bfb\u6389\u7a7a\u683c\n   scanf(\"%c\",&a);\n   if(dl[1][1]==mx&&dl[1][2]==my){printf(\"0\");return 0;}//\u7279\u5224\u4e00\u5f00\u59cb\u5c31\u5728\u7ec8\u70b9\u7684\u60c5\u51b5\n   v[dl[1][1]][dl[1][2]]=1;\n   if(a=='E')dl[1][3]=1;\n   else if(a=='S')dl[1][3]=2;\n   else if(a=='W')dl[1][3]=3;\n   else if(a=='N')dl[1][3]=4;\n   while(head<=tail){\n     for(i=1;i<=3;i++){\n       x1=dl[head][1]+mvx[dl[head][3]]*i;\n       y1=dl[head][2]+mvy[dl[head][3]]*i;\n       x2=x1+1;y2=y1;x3=x1;y3=y1+1;x4=x1+1;y4=y1+1;//\u673a\u5668\u4eba\u5360\u7684\u56db\u4e2a\u683c\u5b50\n       if(x1>=1&&x1+1<=m&&y1>=1&&y1+1<=n&&ma[x1][y1]==0&&ma[x2][y2]==0&&ma[x3][y3]==0&&ma[x4][y4]==0){\n          if(v[x1][y1]==0){\n              tail++;dl[tail][1]=x1;dl[tail][2]=y1;dl[tail][3]=dl[head][3];dl[tail][4]=1+dl[head][4];v[x1][y1]=1;\n               if(x1==mx&&y1==my){printf(\"%d\",dl[tail][4]);return 0;}\n           }}\n       else break;//\u5982\u679c\u524d\u8fdb\u4e00\u683c\u9047\u5230\u969c\u788d\u7269\uff0c\u90a3\u4e48\u4e0d\u53ef\u80fd\u524d\u8fdb\u4e8c\u6216\u4e09\u683c\n     }\n    if(dl[head][0]==0){//\u8fd9\u4e2a\u6761\u4ef6\u4ee3\u8868\u8be5\u72b6\u6001\u4e0d\u662f\u7531\u65cb\u8f6c\u5f97\u5230\uff0c\u907f\u514d\u91cd\u590d\u65cb\u8f6c\n      for(j=1;j<=4;j++){\n         if(j!=dl[head][3]){\n           if(j!=dl[head][3]+2&&j!=dl[head][3]-2){\n           tail++;dl[tail][1]=dl[head][1];dl[tail][2]=dl[head][2];dl[tail][3]=j;dl[tail][4]=dl[head][4]+1;dl[tail][0]=1;}\n```\n}//\u65cb\u8f6c90\u5ea6\uff0c\u56e0\u4e3a\u8fd9\u6837\u7701\u65f6\u4e00\u4e9b\u6240\u4ee5\u5148\u6269\u5c55\u65cb\u8f6c90\u5ea6\u7684\u72b6\u6001\n```cpp\n      }\n      for(j=1;j<=4;j++)\n        if(j!=dl[head][3]){\n           if(j==dl[head][3]+2||j==dl[head][3]-2){\n              tail++;dl[tail][1]=dl[head][1];dl[tail][2]=dl[head][2];dl[tail][3]=j;dl[tail][4]=dl[head][4]+2;dl[tail][0]=1;}\n```\n}//\u65cb\u8f6c180\u5ea6\n```cpp\n    }\n     head++;\n   }\n   printf(\"-1\");//\u5982\u679c\u65e0\u89e3\n   return 0;\n}\n```",
        "postTime": 1485063633,
        "uid": 20604,
        "name": "litble",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u7ec3\u7ec3\u5bbd\u641c\u7684\u5957\u8def\u8fd8\u662f\u5f88\u597d\u7684\uff0c\n\n\u8fd9\u9898\u6709\u4e2a\u8981\u70b9\uff1a\n\n\u673a\u5668\u4eba\u5360\u7684\u4f4d\u7f6e\u662f4\u4e2a\u683c\n\n\u6240\u4ee5\u5c31\u7528\u4e86\u60f3\u5f53\u7136\u7684\u529e\u6cd5\uff0c\u628a\u683c\u5b50\u5750\u6807\u7cfb\u53d8\u6362\u5230\u683c\u70b9\u5750\u6807\u7cfb\uff0c\u8ba9\u969c\u788d\u7269\u5360\u56db\u4e2a\u683c\u70b9\uff0c\u7136\u540e\u8ba9\u72b6\u6001\u5728\u683c\u70b9\u4e0a\u79fb\u52a8\u3002\n\n\u7136\u540e\u8f6c\u5411\u554a\u5224\u91cd\u4ec0\u4e48\u7684\u5c31\u6ca1\u4ec0\u4e48\u4e86\u3002\n\n\n\uff08\u628a\u6ce8\u91ca\u5220\u6389\u53ef\u4ee5\u770b\u5230\u5404\u4e2a\u72b6\u6001\uff09\n\n\n\n\n\n\n\n    \n            \n             \n                \n\n\n\n    \n    \n    \n    \n```cpp\n#include<iostream>\nusing namespace std;\n#include<cstring>\n#include<cstdio>\n#include<cmath>\nint n,m,ans = 10000000;\nint place[55][55],vis[55][55];\nint xs,ys,xt,yt;char t1;\nint head,tail;\nstruct node{\n    int y,x,turn,time,fa;\n}queue[1000000];\nstruct g{\n    int x,y;\n}go[5];\nint ge(char t1)\n{\n    if(t1 == 'N') return 1;\n    else if(t1 == 'E') return 2;\n    else if(t1 == 'S') return 3;\n    else\n        return 4;\n}\nint need(int turn_now,int turn_target)\n{\n    if((turn_now == 4 && turn_target == 1) ||\n       (turn_now == 1 && turn_target == 4) )\n        return 1;\n    else\n        return abs(turn_now - turn_target);\n}\nvoid bfs()\n{\n    while(head <= tail)\n    {\n//        cout<<head<<':'<<queue[head].fa<<' '<<'('<<queue[head].x<<','<<queue[head].y<<','<<queue[head].turn<<')'\n//        <<' '<<queue[head].time<<endl;\n        if(queue[head].y == yt && queue[head].x == xt)\n            ans = min(ans,queue[head].time);\n        for(int i = 1;i <= 4;i++)\n        {\n            int t_now = queue[head].time + need(queue[head].turn,i) + 1;\n            int tx = queue[head].x;\n            int ty = queue[head].y;\n            tx += go[i].x;ty += go[i].y;\n            if(ty <= 1 || tx <= 1 || ty >= n + 1 || tx >= m + 1 || place[ty][tx]) continue; \n            if(vis[ty][tx] > t_now)\n            { \n                vis[ty][tx] = t_now;\n                queue[++tail].turn = i;\n                queue[tail].x = tx;queue[tail].y = ty;\n                queue[tail].time = t_now;\n                queue[tail].fa = head;\n            }\n            tx += go[i].x;ty += go[i].y;\n            if(ty <= 1 || tx <= 1 || ty >= n + 1 || tx >= m + 1 || place[ty][tx]) continue; \n            if(vis[ty][tx] > t_now)\n            {\n                vis[ty][tx] = t_now;\n                queue[++tail].turn = i;\n                queue[tail].x = tx;queue[tail].y = ty;\n                queue[tail].time = t_now;\n                queue[tail].fa = head;\n            }\n            tx += go[i].x;ty += go[i].y;\n            if(ty <= 1 || tx <= 1 || ty >= n + 1 || tx >= m + 1 || place[ty][tx]) continue; \n            if(vis[ty][tx] > t_now)\n            {\n                vis[ty][tx] = t_now;\n                queue[++tail].turn = i;\n                queue[tail].x = tx;queue[tail].y = ty;\n                queue[tail].time = t_now ;\n                queue[tail].fa = head;\n            }\n        }\n        head++;\n    }\n}\nint main()\n{\n    memset(go,0,sizeof(go));\n    for(int i = 1;i <= 54;i++)\n        for(int j = 1;j <= 54;j++)\n            vis[i][j] = 1000000;\n    go[1].y = -1;go[2].x = 1;\n    go[3].y = 1;go[4].x = -1;\n    cin>>n>>m;\n    for(int i = 1;i <= n;i++)\n        for(int j = 1;j <= m;j++)\n        {\n            int temp;cin>>temp;\n            if(temp){\n                place[i][j] = place[i][j+1] = \n                place[i+1][j] = place[i+1][j+1] = 1;\n            }\n        }\n    cin>>ys>>xs>>yt>>xt>>t1;\n    ys++;xs++;yt++;xt++;\n    vis[ys][xs] = 0;\n    queue[0].x = xs;queue[0].y = ys;\n    queue[0].turn = ge(t1);\n    bfs();\n    if(ans == 10000000)\n        cout<<-1;\n    else\n        cout<<ans;\n    return 0;\n}\n```",
        "postTime": 1483779854,
        "uid": 28344,
        "name": "chauchat",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u76f4\u63a5\u627e\u4e86\u4e00\u4e2ahash\u2026\u2026\u660e\u660e\u53ef\u4ee5\u7528\u6876\u7684\u2026\u2026\n\n\u8fd9\u56de\u4e0d\u80fd\u6253\u8868\uff0c\u60f3\u591a\u4e86\u2026\u2026\n\n```cpp\n#include<iostream>\n#include<cstdlib>\nusing namespace std;\nint u,cnt=0,x,y,f,x0,y0,x1,y1,x2,y2,f2,fx,head,tail,n,m,w,t,sum,data[1000007],next[1000007]={0},list[1000007]={0},a[51][51],b[51][51]={0},qs[500000],tim[500000];\nchar c;\nint hash()\n{\n    sum=x2*1000+y2*10+f2,u=list[sum];\n    while(u){if(data[u]==sum){return 0;}u=next[u];}//\u5982\u679c\u51fa\u73b0\u8fc7\uff0creturn 0\uff0c\u5426\u5219\u627e\u5230\u94fe\u7684\u5c3d\u5934\n    data[++cnt]=sum,next[cnt]=list[sum],list[sum]=cnt,tail++,qs[tail]=sum,tim[tail]=t+1;//\u8fdb\u94fe\u2026\u2026\n    return 0;\n}\nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++){for(int j=1;j<=m;j++){cin>>a[i][j];}}\n    cin>>x0>>y0>>x1>>y1>>c;\n    if(x0==x1&&y0==y1){cout<<\"0\";return 0;}\n    if(c=='E'){fx=1;}if(c=='S'){fx=2;}if(c=='W'){fx=3;}if(c=='N'){fx=4;}//\u5404\u79cd\u6570\u636e\u5904\u7406\u2026\u2026\n    for(int i=1;i<=n-1;i++){for(int j=1;j<=m-1;j++){if(a[i][j]+a[i][j+1]+a[i+1][j]+a[i+1][j+1]==0){b[i][j]=1;}}}//4\u683c\u538b\u7f29\u52301\u683c\n    head=0,tail=1,qs[1]=x0*1000+y0*10+fx,tim[1]=0;//\u521d\u59cb\u72b6\u6001\n    while(head<tail)\n    {\n        head++,w=qs[head],t=tim[head],x=w/1000,y=(w-x*1000)/10,f=w%10;//\u53d6\u51fa\u72b6\u6001\n        for(int i=1;i<=3;i++)//\u5982\u679c\u80fd\u8d70\uff0c\u8d70\u5230\u5c3d\u5934\u5e76\u4e14\u628a\u6bcf\u4e00\u6b21\u8d70\u5168\u90e8\u5165\u961f\uff0c\u6240\u6709\u8d70\u7684\u8def\u53ea\u9700\u8981\u4e00\u79d2\n        {\n            f2=0;\n            if(f==1&&y+i<=m&&b[x][y+i]==1){x2=x;y2=y+i;f2=f;}//\u8fd8\u53ef\u4ee5\u8d70\n            if(f==2&&x+i<=n&&b[x+i][y]==1){x2=x+i;y2=y;f2=f;}\n            if(f==3&&y-i>=1&&b[x][y-i]==1){x2=x;y2=y-i;f2=f;}\n            if(f==4&&x-i>=1&&b[x-i][y]==1){x2=x-i;y2=y;f2=f;}\n            if(f2==0){break;}//\u8d70\u4e0d\u4e86\u4e86\uff0c\u9000\u51fa\n            if(x2==x1&&y2==y1){cout<<t+1;return 0;}//\u5224\u65ad\u8fbe\u5230\u76ee\u6807\u72b6\u6001\n            hash();//\u8bb0\u5f55\n        }\n        x2=x,y2=y; \n        f2=f+1;if(f2>4){f2=1;}hash();//\u8f6c\u65b9\u5411\u5e76\u4e14\u5224\u65ad\u662f\u5426\u51fa\u73b0\uff0c\u56e0\u4e3a\u8f6c\u65b9\u5411\u4e0d\u53ef\u80fd\u8fbe\u5230\u72b6\u6001\uff0c\u6240\u4ee5\u4e0d\u5224\u65ad\n        f2=f-1;if(f2<1){f2=4;}hash();\n    }\n    cout<<\"-1\";//\u641c\u5b8c\u4e86\uff0c\u8d70\u4e0d\u5230\n    return 0;\n}\n```",
        "postTime": 1475488507,
        "uid": 14378,
        "name": "doby",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\n \n    \n        \n        \n        \n        \n        \n\n        \n```cpp\n#include<iostream> \n#include<cstdio>\n#include<iomanip>\n#include<cmath>\n#include<cstring>\n#include<string> \n#include<algorithm>\n#include<queue>\nusing namespace std;\nint n,m,xa,ya,xb,yb,a[55][55],g=1;\nchar b;\nbool c[55][55][4],finish;\nint x[3000],y[3000],d[3000],ans[3000000];//d\u8868\u793a\u65b9\u5411 0\u8868\u793a\u5317 1\u8868\u793a\u4e1c 2\u8868\u793a\u5357 3\u8868\u793a\u897f \nint i,j;\nvoid bfs()\n{\n    x[1]=xa;y[1]=ya;ans[1]=0;\n    if(b=='N')    d[1]=0;\n    else if(b=='E')    d[1]=1;\n    else if(b=='S')    d[1]=2;\n    else if(b=='W')    d[1]=3; \n    c[xa][ya][d[1]]=1;//\u521d\u59cb\u5316 \u5165\u961f\u5217\n    int h=1,t=1,tx,ty,td;\n    while(h<=t)\n    {\n        tx=x[h];ty=y[h];td=(d[h]+1)%4;//\u53f3\u8f6c\u540e\u7684xyd\n        if(c[tx][ty][td]==0)    {t++;x[t]=tx;y[t]=ty;d[t]=td;c[tx][ty][td]=1;ans[++g]=ans[h]+1;}//\u5165\u961f\u5217 g\u4f1a\u5c0f\u4e8eh\uff1f\u8c8c\u4f3c\u4e0d\u4f1a \n        tx=x[h];ty=y[h];td=(d[h]+3)%4;//\u5de6\u8f6c\n        if(c[tx][ty][td]==0)    {t++;x[t]=tx;y[t]=ty;d[t]=td;c[tx][ty][td]=1;ans[++g]=ans[h]+1;}\n        if(d[h]==0)//\u5317 \n        {\n            if(a[x[h]-1][y[h]]==0&&a[x[h]-1][y[h]+1]==0)//\u80fd\u5426\u8d701\u683c \n            {\n                if(c[x[h]-1][y[h]][d[h]]==0)    \n                    {t++;x[t]=x[h]-1;y[t]=y[h];d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}} \n                if(a[x[h]-2][y[h]]==0&&a[x[h]-2][y[h]+1]==0)//\u80fd\u5426\u8d702\u683c \n                {\n                    if(c[x[h]-2][y[h]][d[h]]==0)    \n                        {t++;x[t]=x[h]-2;y[t]=y[h];d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                    if(a[x[h]-3][y[h]]==0&&a[x[h]-3][y[h]+1]==0)//\u80fd\u5426\u8d703\u683c\n                        if(c[x[h]-3][y[h]][d[h]]==0)    \n                            {t++;x[t]=x[h]-3;y[t]=y[h];d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                }    \n            }\n        }\n        else if(d[h]==1)//\u4e1c \n        {\n            if(a[x[h]][y[h]+2]==0&&a[x[h]+1][y[h]+2]==0)//\u80fd\u5426\u8d701\u683c \n            {\n                if(c[x[h]][y[h]+1][d[h]]==0)    \n                    {t++;x[t]=x[h];y[t]=y[h]+1;d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                if(a[x[h]][y[h]+3]==0&&a[x[h]+1][y[h]+3]==0)//\u80fd\u5426\u8d702\u683c \n                {\n                    if(c[x[h]][y[h]+2][d[h]]==0)    \n                        {t++;x[t]=x[h];y[t]=y[h]+2;d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                    if(a[x[h]][y[h]+4]==0&&a[x[h]+1][y[h]+4]==0)//\u80fd\u5426\u8d703\u683c\n                        if(c[x[h]][y[h]+3][d[h]]==0)    \n                            {t++;x[t]=x[h];y[t]=y[h]+3;d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                }    \n            }\n        }\n        else if(d[h]==2)//\u5357 \n        {\n            if(a[x[h]+2][y[h]]==0&&a[x[h]+2][y[h]+1]==0)//\u80fd\u5426\u8d701\u683c \n            {\n                if(c[x[h]+1][y[h]][d[h]]==0)    \n                    {t++;x[t]=x[h]+1;y[t]=y[h];d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                if(a[x[h]+3][y[h]]==0&&a[x[h]+3][y[h]+1]==0)//\u80fd\u5426\u8d702\u683c \n                {\n                    if(c[x[h]+2][y[h]][d[h]]==0)    \n                        {t++;x[t]=x[h]+2;y[t]=y[h];d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                    if(a[x[h]+4][y[h]]==0&&a[x[h]+4][y[h]+1]==0)//\u80fd\u5426\u8d703\u683c\n                        if(c[x[h]+3][y[h]][d[h]]==0)    \n                            {t++;x[t]=x[h]+3;y[t]=y[h];d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                }    \n            }\n        }\n        else if(d[h]==3)//\u897f \n        {\n            if(a[x[h]][y[h]-1]==0&&a[x[h]+1][y[h]-1]==0)//\u80fd\u5426\u8d701\u683c \n            {\n                if(c[x[h]][y[h]-1][d[h]]==0)    \n                    {t++;x[t]=x[h];y[t]=y[h]-1;d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                if(a[x[h]][y[h]-2]==0&&a[x[h]+1][y[h]-2]==0)//\u80fd\u5426\u8d702\u683c \n                {\n                    if(c[x[h]][y[h]-2][d[h]]==0)    \n                        {t++;x[t]=x[h];y[t]=y[h]-2;d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}}\n                    if(a[x[h]][y[h]-3]==0&&a[x[h]+1][y[h]-3]==0)//\u80fd\u5426\u8d703\u683c\n                        if(c[x[h]][y[h]-3][d[h]]==0)    \n                            {t++;x[t]=x[h];y[t]=y[h]-3;d[t]=d[h];c[x[t]][y[t]][d[t]]=1;ans[++g]=ans[h]+1;if(x[t]==xb&&y[t]==yb)    {cout<<ans[g]<<endl;finish=1;return;}} \n                }    \n            }\n        }\n        h++;\n    }    \n}\nint main()\n{\n    cin>>n>>m;\n    for(i=1;i<=n;i++)\n        for(j=1;j<=m;j++)\n            cin>>a[i][j];\n    for(i=0;i<=n+1;i++)\n    {\n        a[i][0]=1;a[i][m+1]=1;\n    }\n    for(j=0;j<=m+1;j++)\n    {\n        a[0][j]=1;a[n+1][j]=1;\n```\n}//\u52a0\u5899\n    \n\n    \n```cpp\n    cin>>xa>>ya>>xb>>yb>>b;\n    if(a[xa][ya]==1||a[xa][ya+1]==1||a[xa+1][ya]==1||a[xa+1][ya+1]==1)    {cout<<-1<<endl;return 0;}\n    if(xa==xb&&ya==yb)    {cout<<0<<endl;return 0;}\n    bfs();\n    if(finish==0)    cout<<-1<<endl;\n    return 0;\n}\n\n```",
        "postTime": 1465306018,
        "uid": 15090,
        "name": "littleming",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u9898\u9762\u5e94\u8be5\u8bf4\u6e05\u695a\u7f51\u683c\u8fb9\u7f18\u4e0d\u80fd\u8d70\u3002\n\n```cpp\n\n#include<cstdio>\n#include<queue>\nusing namespace std;\nconst int MAXN=60;\nint MDIR[256];\nint n,m,sx,sy,tx,ty,dir;\nbool map[MAXN][MAXN],vis[MAXN][MAXN][4];\nint d[MAXN][MAXN];\nstruct POS{\n    int x,y,dir,t;\n    int lx,ly,ldir,lt;\n    POS(int _x=0,int _y=0,int _dir=-1):x(_x),y(_y),dir(_dir),t(0){};\n};\nqueue<POS> q;\nbool inline check(const POS& p){\n    return 1<=p.x&&p.x<=n&&1<=p.y&&p.y<=m;\n}\nvoid turn(const POS& s,POS& res,int c){\n    res=s;\n    switch(c){\n        case 0:break;//\u4ec0\u4e48\u4e5f\u4e0d\u505a \n        case 1:res.dir=res.dir-1;res.t++;break;//\u5de6\u8f6c \n        case 2:res.dir=res.dir+1;res.t++;break;//\u53f3\u8f6c \n    }\n    while(res.dir<0) res.dir+=4;\n    while(res.dir>3) res.dir-=4;\n}\nbool move(POS& s,POS& res,int steps){//\u79fb\u52a8\u540e\u7684\u7ed3\u679c\u5b58\u5728res\u91cc,\u5982\u679c\u51fa\u754c\u6216\u843d\u70b9\u6709\u969c\u788d\u8fd4\u56defalse \n    res=s; \n    switch(s.dir){\n        case 0:res.y-=steps;break;\n        case 1:res.x-=steps;break;\n        case 2:res.y+=steps;break;\n        case 3:res.x+=steps;break;\n    }\n    res.t++;\n    return check(res)&&!map[res.x][res.y];\n}\nint main(){\n    MDIR['W']=0,MDIR['N']=1,MDIR['E']=2,MDIR['S']=3;//\u4eceW\u5f00\u59cb\uff0c\u53f3\u624b\u65b9\u5411,MOD 4\n    freopen(\"P1126.in\",\"r\",stdin);\n    scanf(\"%d%d\",&n,&m);\n    bool b;\n    for(int i=1;i<=n;i++) for(int j=1;j<=m;j++) {\n            scanf(\"%d\",&b);\n            for(int dx=0;dx<=1;dx++) for(int dy=0;dy<=1;dy++)\n             map[i+dx][j+dy]=map[i+dx][j+dy]||b;\n    }//\u628a\u7f51\u683c\u7684\u70b9\u5f53\u505a\u6570\u7ec4\u5143\u7d20 \n    n++,m++;\n    for(int i=1;i<=m;i++) map[1][i]=1;\n    for(int i=1;i<=m;i++) map[n][i]=1;\n    for(int i=1;i<=n;i++) map[i][1]=1;\n    for(int i=1;i<=n;i++) map[i][m]=1;//\u5947\u602a\u7684\u9650\u5236\u554a\u4e0d\u80fd\u8d70\u7f51\u683c\u8fb9\u7f18 \n    scanf(\"%d%d%d%d %c\",&sx,&sy,&tx,&ty,&dir);\n    sx++,sy++,tx++,ty++;\n    POS p(sx,sy,MDIR[dir]);\n    vis[sx][sy][MDIR[dir]]=1;\n    q.push(p);\n    while(!q.empty()){\n        p=q.front();q.pop();\n        if(p.x==tx&&p.y==ty){\n            printf(\"%d\",p.t);\n            return 0;\n        }\n        POS res;\n        //\u82e5\u8f6c\n        for(int i=1;i<=2;i++) {\n            turn(p,res,i);\n            if(vis[res.x][res.y][res.dir]) continue;\n            vis[res.x][res.y][res.dir]=1;\n            q.push(res);\n        }\n        //\u82e5\u8d70 \n        for(int steps=1;steps<=3;steps++)\n            if(move(p,res,steps)){\n                if(vis[res.x][res.y][res.dir]) continue;\n                vis[res.x][res.y][res.dir]=1;\n                q.push(res);\n            }\n            else break;\n    }\n    printf(\"-1\");\n}\n//debug \u7528%c\u8bfb\u5165\u65f6\u6ce8\u610f\u7a7a\u683c \n\n```",
        "postTime": 1457445336,
        "uid": 15183,
        "name": "Rapiz",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u5f88\u663e\u7136\uff0c\u8fd9\u4e2a\u9898\u76ee\u662f\u4e00\u4e2a\u641c\u7d22\uff0c\u6211\u4eec\u53ef\u4ee5\u7528i\uff0cj\uff0ck\u6765\u552f\u4e00\u6807\u8bc6\u5b83\u7684\u72b6\u6001\uff0ci\u8868\u793a\u884c\uff0cj\u8868\u793a\u5217\uff0ck\u8868\u793a\u65b9\u5411\uff08\u81ea\u5df1\u5b9a\u4e49\u5373\u53ef\uff09\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u72b6\u6001\uff0c\u67095\u79cd\u8f6c\u79fb\u65b9\u5f0f\uff08\u5de6\u8f6c\uff0c\u53f3\u8f6c\uff0c\u524d1\uff0c\u524d2\uff0c\u524d3\uff09\uff0c\u800c\u8fd95\u79cd\u8f6c\u79fb\u662f\u7b49\u4ef7\u7684\uff08\u5747\u8017\u8d39\u65f6\u95f41\uff09\uff0c\u56e0\u6b64\u53ef\u4ee5\u5f88\u597d\u7684\u7528\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u6765\u89e3\u51b3\uff08\u5e7f\u641c\u662f\u57fa\u4e8e\u8def\u5f84\u76f8\u7b49\u7684\u4e00\u79cd\u641c\u7d22\uff0c\u5728\u8fd9\u91cc\u5b83\u641c\u7d22\u7684\u4e0d\u518d\u662f\u70b9\uff0c\u800c\u662f\u52a0\u4e0a\u65b9\u5411\u5171\u540c\u8868\u793a\u7684\u72b6\u6001\uff09\uff0c\u7531\u4e8e\u8fb9\u6743\u5747\u4e3a1\u00a0\uff0c\u6240\u4ee5\u5148\u641c\u5230\u7684\u72b6\u6001\u4e00\u5b9a\u662f\u65f6\u95f4\u6700\u5c11\u7684\uff0c\u5b83\u4e0d\u7528\u518d\u5165\u961f\u5217\u3002\u800c\u5bf9\u4e8e\u4e0d\u7b49\u4ef7\u7684\u60c5\u51b5\uff08\u8f6c\u79fb\u65f6\u65f6\u95f4\u4e0d\u90fd\u662f1\uff09\uff0c\u6216\u662f\u6709\u5176\u4ed6\u8f6c\u6362\u7684\u66f4\u590d\u6742\u7684\u60c5\u51b5\uff0c\u641c\u7d22\u662f\u65e0\u6cd5\u89e3\u51b3\u7684\uff0c\u8fd9\u91cc\u4e3b\u8981\u8bb2\u4e00\u4e0b\u56fe\u7684\u6784\u5efa\u3002\u00a0\u00a0\u00a0\n\n\u4e00\u4e2a\u72b6\u6001\u53ef\u4ee5\u5411\u5de6\u8f6c\uff0c\u5411\u53f3\u8f6c\uff0c\u8fdb1,2,3\uff0c\u6240\u4ee5\u628a\u6bcf\u4e2a\u72b6\u6001\u4e0e\u5176\u53ef\u8f6c\u79fb\u7684\u72b6\u6001\u8fde\u63a5\uff0c\u8fb9\u6743\u8d4b\u4e3a\u6240\u9700\u65f6\u95f4\uff0c\u00a0\n\n\u6bcf\u4e00\u4e2a\u72b6\u6001\u5373\u4e3a\u56fe\u4e2d\u7684\u70b9\uff0c\u4e3a\u4e86\u5904\u7406\u7b80\u4fbf\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u5355\u72ec\u7684\u6570\u4ee3\u8868i\uff0cj\uff0ck\uff0c\u8fd9\u91cc\u53ef\u4ee5\u7528\u653e\u7f29\uff0c\u5373\u5b9a\u4e49\u00a0\n\ns=x\\*i+y\\*j+k\uff0c\u505a\u5230\u53ef\u4ee5\u552f\u4e00\u6807\u8bc6\u6bcf\u4e00\u4e2a\u72b6\u6001\uff1b\u00a0\u7279\u522b\u6ce8\u610f\uff0c\u8fd9\u662f\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u4f60\u4e0d\u80fd\u5012\u7740\u8d70\u00a0\u65f6\u95f4\u590d\u6742\u5ea6\uff1a50\\*50\\*4\u00a0\u517110000\u4e2a\u72b6\u6001\uff0c\u6bcf\u4e2a\u70b9\u6700\u591a5\u6761\u8fb9\uff0c\u8fb9\u6570\u4e3a50000\uff0cSPFA\u53ef\u4ee5\u627f\u53d7\uff01\u00a0\n\n\u6ce8\u610f\u521d\u59cb\u5316\uff0c\u4e0d\u80fd\u8fbe\u5230\u7684\u70b9\u4e0d\u518d\u5904\u7406\uff01\n",
        "postTime": 1380717942,
        "uid": 1187,
        "name": "AKB48",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u662f\u7b2c8\u4e2a\u70b9\uff0c\u8bef\u4ee5\u4e3a\u673a\u5668\u4eba\u80fd\u8f6c180\u00b0\u4f1a\u8f93\u51fa32\u800c\u4e0d\u662f33.\n\u7136\u540e\u7b2c\u4e8c\u4e2a\u70b9\u548c\u7b2c\u4e94\u4e2a\u70b9\u5e94\u8be5\u662f\u8d70\u4e0d\u5230\u7684\u3002\n\n```input #8\n20 20\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0\n0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n0 0 0 1 0 0 1 1 1 0 0 0 0 0 0 0 1 0 0 0\n0 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0 0 0 0 0\n0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 0 0\n0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n0 0 0 0 0 1 0 0 0 0 1 0 1 0 0 0 0 0 0 0\n0 0 0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0\n0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n0 0 0 0 0 1 1 1 0 1 1 0 0 1 1 1 0 1 1 1\n0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 1 0\n0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 0\n0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 0 0 0\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0\n0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0\n0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 0\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n19 4 15 17 E\n\n```\n```output\n33\n```\n\n\n\u4e0a\u4ee3\u7801\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <map>\n#include <string>\n#include <vector>\n#include <set>\n#include <cmath>\n#include <bitset>\n#include <queue>\n\n//Skyler1017\n\nusing namespace std;\n#define ll long long\n#define MAXINT 0xFFFFFFF //\u4e03\u4e2aF\n\n\nstruct vex{\n    int to; //\u8fd9\u4e2a\u70b9\n    int d;\n    int dir; //\u8d70\u5230\u8fd9\u4e2a\u70b9\u7684\u65f6\u5019\u7684\u65b9\u5411\n    vex(int a, int b, int c){to = a; d = b; dir = c;}\n    vex(){}\n};\n\nbool operator < (vex n1, vex n2){\n    return n1.d > n2.d;\n}\n\nint n, m;\nint sx, sy;\nint fx, fy;\nint G[60][60]; //\u8bb0\u5f55\u70b9\u662f\u5426\u80fd\u8d70\nint dis[60][60]; //\u8bb0\u5f55\u6b64\u523b\u7684\u8ddd\u79bb\nint dy[] = {-1, 1, 0, 0, -2, 2, 0, 0, -3, 3, 0, 0}; //\u8d70\u7684\u4e0d\u540c\u6b65\u6570\u7684\u60c5\u51b5\nint dx[] = {0, 0, -1, 1, 0, 0, -2, 2, 0, 0, -3, 3}; //\u6ce8\u610fx\u662f\u884c\uff0cy\u662f\u5217\nmap<char, int> mp;\nbool vis[3000]; //\u6807\u8bb0\npriority_queue<vex> q; //\u5806\n\nvoid mark(int x, int y){ //\u6bcf\u4e00\u4e2a\u683c\u5b50\u4f1a\u5f71\u54cd\u5230\u56db\u4e2a\u9876\u70b9\uff0c\u68071\u5c31\u5b8c\u4e8b\u4e86\n    G[x][y] = 1;\n    G[x-1][y] = 1;\n    G[x][y-1] = 1;\n    G[x-1][y-1] = 1;\n}\n\n\n\nint check(int x, int y, int k){ //\u6ce8\u610f\u8fb9\u754c\u7684\u90a3\u4e00\u5708\u662f\u4e0d\u80fd\u8d70\u7684\uff01\n    if(x + dx[k] < 1 || x + dx[k] >= n || y + dy[k] < 1 || y + dy[k] >= m)\n        return 0;\n    for(int i = 1; i <= (dx[k] ? dx[k] / dx[k%4] :  dy[k] / dy[k%4]); i++){\n        if(G[x + i * dx[k % 4]][y + i * dy[k % 4]])\n            return 0;\n    }\n    return 1;\n}\n\nvoid bfs(int x, int y, int dir){ //\u5176\u5b9e\u6ca1\u5fc5\u8981\u5199\u6210\u51fd\u6570w\u4f46\u6211\u559c\u6b22\n    if(vis[51 * x + y]) return;\n    vis[51 * x + y] = 1;\n    //printf(\"@@@@ %d %d: %d   %d\\n\", x, y, dis[x][y], dir+1);\n    for(int k = 0; k < 12; k++){\n        int nx = x + dx[k];\n        int ny = y + dy[k];\n        if(!check(x, y, k)) continue;\n        int now = dis[x][y];\n        if((k % 4) != dir) now++;\n        if((k % 4 == 0 && dir == 1) || (k % 4 == 1 && dir == 0) || (k % 4 == 2 && dir == 3) || (dir == 2 && k % 4 == 3)) now++; //\u6ce8\u610f\uff01\uff01\u53ef\u80fd\u8981\u76f8\u53cd\u7684\u8f6c\uff01\uff01\u53ef\u80fd\u4e00\u5f00\u59cb\u5c41\u80a1\u671d\u7740\u7ec8\u70b9\u4e86\uff01\uff01\n        if(now + 1 < dis[nx][ny]){\n            dis[nx][ny] = now + 1;\n            q.push(vex(51 * nx + ny, now + 1, k % 4));\n            //printf(\"     %d %d: %d\\n\", nx, ny, dis[nx][ny]);\n        }\n    }\n\n}\n\nint main(){\n    cin >> n >> m;\n    bool f;\n    for(int i = 1; i <= n; i ++){\n        for(int j = 1; j <= m; j ++){\n            cin >> f;\n            if(f) mark(i, j);\n        }\n    }\n\n    cin >> sx >> sy >> fx >> fy;\n    string dir;\n    cin >> dir;\n\n    /*\u770b\u4e00\u4e0b\u68cb\u76d8\u7684\u54ea\u4e9b\u70b9\u80fd\u8d70\uff0c\u82e6\u903c\u7684debug\n    for(int i = 0; i <= n; i ++){\n        for(int j = 0; j <= m; j ++){\n            if(i == sx && j == sy){\n                cout << \"$ \";\n                continue;\n            }\n            if(i == fx && j == fy){\n                cout << \"@ \";\n                continue;\n            }\n            if(!G[i][j]) cout << \"1 \";\n            else cout << \"  \";\n        }\n        cout << endl;\n    }\n*/\n\n    for(int i = 0; i <= n; i++)\n        for(int j = 0; j <= m; j++)\n            dis[i][j] = MAXINT; //\u6700\u77ed\u8def\u521d\u59cb\u5316\n\n    mp['S'] = 3;\n    mp['N'] = 2;\n    mp['W'] = 0;\n    mp['E'] = 1;\n\n    q.push(vex(51 * sx + sy, 0, mp[dir[0]]));//\u6700\u5927\u7684\u70b9\u6570\u662f50\u6240\u4ee5\u53ef\u4ee5s\u8fd9\u6837\u5904\u7406\u4e00\u4e0b\n    dis[sx][sy] = 0;\n    while(q.size()){\n        vex top = q.top();\n        q.pop();\n        int x = top.to / 51;\n        int y = top.to % 51;\n        int d = top.dir;\n        bfs(x, y, d);\n    }\n    if(dis[fx][fy] < MAXINT)\n        cout << dis[fx][fy] << endl;\n    else cout << \"-1\"; //\u5624\u5624\u5624 \u8fd9\u91cc\u8981\u5c0f\u5fc3\u53ef\u80fd\u8d70\u4e0d\u5230\u7684\n}\n\n```\n\n",
        "postTime": 1560069827,
        "uid": 137010,
        "name": "Skyler1017",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269 \u545c\u545c\u545c\u8fd9\u9898\u4e5f\u592a\u5751\u4e86\uff0c\u7ed9\u5927\u5bb6\u63d0\u4f9b#8\u7684\u6837\u4f8b\u3011"
    },
    {
        "content": "\u8f83\u4e3a\u8be6\u7ec6\u7684\u9898\u89e3\n\nhttp://blog.csdn.net/benoble\\_/article/details/54177251\n",
        "postTime": 1488687751,
        "uid": 20156,
        "name": "Kelin",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P1126 \u3010\u673a\u5668\u4eba\u642c\u91cd\u7269\u3011"
    }
]
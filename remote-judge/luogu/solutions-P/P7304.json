[
    {
        "content": "\u5efa\u8bae\u4e3a\u7eff\u3002\n\n## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u4f60\u4e24\u4e2a\u6570\u7ec4\uff0c\u5176\u4e2d\u53ef\u80fd\u4f1a\u5305\u542b\u53d8\u91cf\uff0c\u4ed6\u8ba9\u4f60\u5c06\u53d8\u91cf\u8d4b\u4e00\u4e2a\u503c\uff0c\u76f8\u540c\u53d8\u91cf\u8d4b\u503c\u5fc5\u987b\u76f8\u540c\uff0c\u4e0d\u540c\u7684\u53d8\u91cf\u8d4b\u503c\u53ef\u4ee5\u76f8\u540c\u3002\n\n\u5728\u4f60\u7ed9\u4ed6\u4e00\u7cfb\u5217\u8d4b\u503c\u540e\uff0c\u4e24\u4e2a\u6570\u7ec4\u80fd\u5426\u76f8\u540c\u3002\n\n## \u601d\u8def\n\n\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32\u5148\u8f93\u5165\uff0c\u5982\u679c\u662f\u6570\u5b57\uff0c\u5728\u8f6c\u5316\u6210\u6570\u5b57\uff0c\u5426\u5219\u5c06\u8fd9\u4e2a\u53d8\u91cf\u7ed9\u4ed6\u4e00\u4e2a\u7f16\u53f7\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u7528 $map$ \u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u5c06\u5b57\u7b26\u4e32\u53d8\u6210\u7f16\u53f7\u3002\n\n\u518d\u7528\u641c\u7d22\u5c06\u53d8\u91cf\u5168\u90e8\u8d4b\u503c\uff0c\u6700\u540e\u5728\u5224\u65ad\u662f\u5426\u4e00\u6837\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<queue>\n#include<vector>\n#include<map>\n#include<cstring>\nusing namespace std;\nconst int maxn=5e4+9;\nmap<string,int>Map;\nvector<int>h[maxn];\nint a[maxn],b[maxn],v[maxn],cnt;\nint number(string s){\n\tint x=0;\n\tfor(int i=0;i<s.size();i++){\n\t\tx=x*10+s[i]-'0';\n\t}\n\treturn x;\n}\nint id(string s){//\u5c06\u5b57\u7b26\u4e32\u5316\u6210\u7f16\u53f7 \n\tif(!Map.count(s))\n\t\tMap[s]=++cnt;\n\treturn Map[s];\n}\nvoid dfs(int cur,int t){\n\tif(v[cur]!=-1)return;\n\tv[cur]=t;\n\tfor(int i=0;i<h[cur].size();i++)\n\t\tdfs(h[cur][i],t);\n}\nint main(){\n\tmemset(v,-1,sizeof(v));\n\tint n;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tstring s;\n\t\tcin>>s;\n\t\tif(s[0]>='0'&&s[0]<='9'){//\u5c06\u5b57\u7b26\u4e32\u5316\u6210\u6570\u5b57 \n\t\t\ta[i]=number(s);\n\t\t}else a[i]=-id(s);//\u53d8\u6210\u8d1f\u6570\uff0c\u4ee5\u514d\u4e0e\u6570\u5b57\u5f04\u6df7 \n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tstring s;\n\t\tcin>>s;\n\t\tif(s[0]>='0'&&s[0]<='9'){\n\t\t\tb[i]=number(s);\n\t\t}else b[i]=-id(s);//\u540c\u4e0a \n\t\tif(a[i]<0&&b[i]<0){\n\t\t\th[-a[i]].push_back(-b[i]);\n\t\t\th[-b[i]].push_back(-a[i]);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(a[i]<0&&b[i]>=0)dfs(-a[i],b[i]);\n\t\tif(b[i]<0&&a[i]>=0)dfs(-b[i],a[i]);\n\t}\n\tint o=1;\n\tfor(int i=1;i<=n;i++){\n\t\tint d1=a[i];\n\t\tint d2=b[i];\n\t\tif(a[i]<0)d1=v[-a[i]];\n\t\tif(b[i]<0)d2=v[-b[i]];\n\t\tif(d1!=d2){\n\t\t\to=0;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(o)cout<<\"DA\";\n\telse cout<<\"NE\";\n\treturn 0;\n}\n```\n",
        "postTime": 1663841714,
        "uid": 571435,
        "name": "_ouhsnaijgnat_",
        "ccfLevel": 0,
        "title": "P7304\u9898\u89e3"
    },
    {
        "content": "\u5e76\u67e5\u96c6\u597d\u9898\u3002\n\n\u524d\u7f6e\u77e5\u8bc6\uff1a[\u5e76\u67e5\u96c6](https://www.luogu.com.cn/blog/My-luoguBuoke-HZR/solution-p3367)\u3002\n\n------------\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u5047\u8bbe\u95ee\u9898\u6709\u89e3\uff0c\u6807\u8bb0\u6bcf\u5bf9 $a_i,b_i$ \u662f\u76f8\u7b49\u7684\uff0c\u7531\u4e8e\u76f8\u7b49\u5173\u7cfb\u5177\u6709\u4f20\u9012\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u3002\n\n\u7136\u540e\uff0c\u68c0\u67e5\u4e00\u4e0b\u6709\u6ca1\u6709\u4e24\u4e2a\u6574\u6570\u5e38\u91cf\u88ab\u6807\u8bb0\u6210\u76f8\u7b49\uff0c\u5982\u679c\u6709\uff0c\u8bf4\u660e\u5047\u8bbe\u4e0d\u6210\u7acb\uff0c\u8f93\u51fa\u65e0\u89e3\u3002\u5426\u5219\uff0c\u8bf4\u660e\u5047\u8bbe\u662f\u6210\u7acb\u6709\u89e3\u3002\n\n[\u624b\u9020\u51e0\u7ec4\u6837\u4f8b\u5e76\u9a8c\u8bc1](https://www.luogu.com.cn/paste/g0zipx3y)\uff0c\u53ef\u4ee5\u53d1\u73b0\u662f\u5bf9\u7684\u3002\n\n------------\n\n\u63a5\u4e0b\u6765\u662f\u5b9e\u73b0\u3002\u6211\u5c06\u4ee5 Q/A \u7684\u65b9\u5f0f\u8bb2\u4e00\u4e0b\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u56f0\u96be\uff1a\n\n------------\n\nQ\uff1a\u5982\u4f55\u5b9e\u73b0\u300c\u628a\u53d8\u91cf\u4e0e\u53d8\u91cf/\u5e38\u91cf\u6807\u8bb0\u4e3a\u76f8\u7b49\u300d\u8fd9\u4e00\u8fc7\u7a0b\uff1f\n\nA\uff1a\u89c2\u5bdf\u5230 $1\\leq \\text{\u5e38\u91cf} < 10^3$\uff0c\u53ef\u4ee5\u628a\u6240\u6709\u53d8\u91cf\u4ece $10^3+1$ \u5f00\u59cb\u6807\u4e00\u4e2a\u53f7\uff0c\u7136\u540e\u628a\u8fd9\u4e9b\u53d8\u91cf\u6309\u7167\u5e38\u91cf\u5904\u7406\u3002\n\n------------\n\nQ\uff1a\u5982\u4f55\u5feb\u901f\u5224\u65ad\u8f93\u5165\u7684\u662f\u4e00\u4e2a\u5e38\u91cf\u8fd8\u662f\u53d8\u91cf\uff1f\n\nA\uff1a`cin` \u8bfb\u53d6\u6570\u636e\u5931\u8d25\u65f6\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u9519\u8bef\u72b6\u6001\u3002\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u9519\u8bef\u72b6\u6001\uff0c\u5224\u65ad\u8f93\u5165\u7684\u662f\u5e38\u91cf\u8fd8\u662f\u53d8\u91cf\u3002\u5177\u4f53\u4ee3\u7801\uff1a\n```cpp\nint x;\ncin>>x;//\u5148\u5047\u8bbe\u5b83\u662f\u4e2a\u5e38\u91cf\nif(cin.fail()){//\u9519\u8bef\u4e86\n\tcin.clear();//\u53bb\u6389\u9519\u8bef\u72b6\u6001\n    //cin.sync();//\u6e05\u7a7a\u7f13\u51b2\u533a\uff0c\u5728\u8fd9\u9053\u9898\u91cc\u4e0d\u52a0\u4e5f\u884c\n    string s;\n    cin>>s;\n    //s \u4e3a\u8f93\u5165\u7684\u53d8\u91cf\u540d\n}else{\n\t//x \u4e3a\u8f93\u5165\u7684\u5e38\u91cf\n}\n```\n\n------------\n\nQ\uff1a\u5982\u4f55\u4fdd\u8bc1\u76f8\u540c\u7684\u53d8\u91cf\u7684\u6807\u53f7\u4e00\u5b9a\u76f8\u540c\uff0c\u800c\u4e0d\u540c\u7684\u53d8\u91cf\u7684\u6807\u53f7\u4e00\u5b9a\u4e0d\u76f8\u540c\uff1f\n\nA\uff1a\u4f7f\u7528 `std::map`\uff0c\u8bb0\u4e3a $map$\u3002\u5982\u679c $map$ \u4e4b\u524d\u5df2\u7ecf\u6709\u8bb0\u5f55\u8fc7\u8fd9\u4e2a\u53d8\u91cf\u540d\uff0c\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2a\u53d8\u91cf\u540d\u7684\u6807\u53f7\uff0c\u5426\u5219\uff0c\u8bb0\u5f55\u4e0b\u8fd9\u4e2a\u53d8\u91cf\u540d\u5e76\u7ed9\u5b83\u5206\u914d\u4e00\u4e2a\u65b0\u6807\u53f7\u3002\n\n------------\n\nQ\uff1a\u5982\u4f55\u68c0\u67e5\u6709\u6ca1\u6709\u4e24\u4e2a\u6574\u6570\u5e38\u91cf\u88ab\u6807\u8bb0\u6210\u76f8\u7b49\uff1f\n\nA\uff1a\u4e24\u79cd\u65b9\u6cd5\uff1a\u4e00\u662f $O((10^3)^2)$ \u66b4\u529b\u679a\u4e3e\uff1b\u4e8c\u662f\u6807\u8bb0\u6bcf\u4e2a\u6574\u6570\u5e38\u91cf\u5728\u5e76\u67e5\u96c6\u91cc\u7684\u7956\u5148\uff0c\u5982\u679c\u51fa\u73b0\u91cd\u590d\u6807\u8bb0\u7684\u60c5\u51b5\uff0c\u8bf4\u660e\u6709\u4e24\u4e2a\u6574\u6570\u5e38\u91cf\u88ab\u6807\u8bb0\u6210\u76f8\u7b49\u3002\n\n------------\n\n\u4e0b\u9762\uff0c\u7ed9\u51fa\u6211\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a\n```cpp\n#include <map>\n#include <string>\n#include <iostream>\nusing namespace std;\ntemplate<int N> struct UnionSet{\n    int fa[N+10];\n    UnionSet(){for(int i=1;i<=N;i++) fa[i]=i;}\n    int find(int x){return fa[x]==x?x:fa[x]=find(fa[x]);}\n    void merge(int x,int y){fa[find(y)]=find(x);}\n    bool query(int x,int y){return find(x)==find(y);}\n};\nmap<string,int> anti;\nUnionSet<51010> s;\nint n,a[50010],b[50010];\nint cnt=1e3;\nbool vis[51010];\nint get(string s){\n    if(anti.find(s)==anti.end()) anti[s]=++cnt;//std::map \u7684 find \u51fd\u6570\u627e\u4e0d\u5230\u65f6\uff0c\u4f1a\u8fd4\u56de\u5c3e\u90e8\u8fed\u4ee3\u5668\n    return anti[s];\n}\nvoid input(int a[]){\n    for(int i=1;i<=n;i++){\n        cin>>a[i];\n        if(cin.fail()){\n            cin.clear(),cin.sync();\n            string s;\n            cin>>s;\n            a[i]=get(s);\n        }\n    }\n}\nint main(){\n    cin>>n;\n    input(a);\n    input(b);\n    for(int i=1;i<=n;i++) s.merge(a[i],b[i]);\n    for(int i=1;i<=1000;i++){\n        int tmp=s.find(i);\n        if(vis[tmp]){\n            cout<<\"NE\"<<endl;\n            return 0;\n        }\n        vis[tmp]=1;\n    }\n    cout<<\"DA\"<<endl;\n    return 0;\n}\n```\n",
        "postTime": 1626851330,
        "uid": 390033,
        "name": "_caiji_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7304 \u3010[COCI2018-2019#1] Zamjena\u3011"
    },
    {
        "content": "\u4e00\u9053\u5e76\u67e5\u96c6\u7684\u9898\u76ee\uff0c\u5b9e\u73b0\u7684\u65f6\u5019\u7ec6\u8282\u8f83\u591a\u3002\n\n\u3010**\u6ce8\uff1a**\u4ee5\u4e0b `fa` \u4e0e `num` \u6570\u7ec4\u7684 $1--n$ \u5b58\u7b2c\u4e00\u4e2a\u6570\u7ec4\uff0c $n + 1--2n$ \u5b58\u7b2c\u4e8c\u4e2a\u6570\u7ec4\u3002\u3011  \n\u56e0\u4e3a\u4e0e\u5b57\u7b26\u6709\u5173\u7cfb\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528 `map` \u6765\u8bb0\u5f55\u6bcf\u4e00\u4e2a\u53d8\u91cf/\u6570\u5b57\u6240\u51fa\u73b0\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u5e76\u6807\u8bb0 `fa[i] = i`\u3002\n\n\n```\nif (num[a[i]] != 0) fa[i] = num[a[i]]; \nelse fa[i] = num[a[i]] = i;\n```\n\n\u63a5\u4e0b\u6765\u5c31\u8981\u4ee5 $O(n)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4f9d\u6b21\u5224\u65ad\u6bcf\u4e2a\u6570\u7ec4\u7684\u7b2c $i$ \u4f4d\u662f\u5426\u7b26\u5408\u8981\u6c42\u4e86\u3002\u8fd9\u91cc\u9700\u8981\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5 (\u8bbe\u4e24\u4e2a\u6570\u7ec4\u5206\u522b\u4e3a `a` \u4e0e `b`\uff0c`find (int x)` \u4e3a\u627e\u5230 $x$ \u7684\u7236\u4eb2)\uff1a\n\n1. $a_i$ \u4e0e $b_i$ \u5747\u4e3a\u5e38\u91cf \u76f4\u63a5\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u5373\u53ef \n2. $a_i$ \u4e3a\u5e38\u91cf\uff0c $b_i$ \u4e3a\u53d8\u91cf   \n\t2.1. $b_i$ \u7684\u503c\u5df2\u7ecf\u786e\u5b9a \u6bd4\u8f83\u662f\u5426\u76f8\u7b49   \n   2.2. $b_i$ \u7684\u503c\u672a\u786e\u5b9a `fa[find (b[i])) = find (a[i])` \n3. $a_i$ \u4e3a\u53d8\u91cf\uff0c $b_i$ \u4e3a\u5e38\u91cf   \n\t3.1. $a_i$ \u7684\u503c\u5df2\u7ecf\u786e\u5b9a \u6bd4\u8f83\u662f\u5426\u76f8\u7b49   \n   3.2. $a_i$ \u7684\u503c\u672a\u786e\u5b9a `fa[find (a[i])) = find (b[i])` \n4. $a_i$ \u4e0e $b_i$ \u5747\u4e3a\u53d8\u91cf   \n\t4.1. $a_i$ \u4e0e $b_i$ \u5747\u5df2\u7ecf\u786e\u5b9a \u6bd4\u8f83\u662f\u5426\u76f8\u7b49   \n   4.2. \u53ea\u6709 $a_i$ \u5df2\u7ecf\u786e\u5b9a `fa[find (b[i])) = find (a[i])`   \n   4.3. \u53ea\u6709 $b_i$ \u5df2\u7ecf\u786e\u5b9a `fa[find (a[i])) = find (b[i])`  \n   4.4. $a_i$ \u4e0e $b_i$ \u5747\u672a\u786e\u5b9a \u968f\u4fbf\u9009\u4e00\u4e2a\u4f5c\u4e3a\u7236\u4eb2\uff0c\u8fdb\u884c\u5408\u5e76\n  \n\u4e8e\u662f\u5c31\u6709\u4ee3\u7801\uff1a\n\n```\nbool correct (int x)\n{\n\t//bool isnumber[MAX << 1],isok[MAX << 1];//\u662f\u5426\u662f\u6570\u5b57\uff1b\u662f\u5426\u5df2\u786e\u5b9a \n\tint dx = find (num[a[x]]),dy = find (num[b[x]]);\n\tif (isnumber[x] && isnumber[x + n])\n\t{\n\t\tif (a[x] != b[x]) return 0;\n\t\telse return 1;\n\t}\n\telse if (isnumber[x])\n\t{\n\t\tif (dx == dy) {isok[dx] = 1;return 1;} \n\t\telse if (!isok[dy]) fa[dy] = dx,isok[dy] = 1;\n\t\telse return 0;\n\t}\n\telse if (isnumber[x + n])\n\t{\n\t\tif (dx == dy) {isok[dx] = 1;return 1;}\n\t\telse if (!isok[dx]) fa[dx] = dy,isok[dx] = 1;\n\t\telse return 0;\n\t}\n\telse\n\t{\n\t\tif (!isok[dx] && !isok[dy]) fa[dx] = dy;\n\t\telse if (!isok[dx]) fa[dx] = dy,isok[dx] = 1;\n\t\telse if (!isok[dy]) fa[dy] = dx,isok[dy] = 1;\n\t\telse if (dx != dy) return 0;  \n\t}\n\treturn 1;\n}\n```\n\n\u6700\u540e\u82e5\u6240\u6709\u8fd4\u56de\u503c\u90fd\u662f `1`\uff0c\u5219\u7b26\u5408\u9898\u610f\uff1b\u5426\u5219\u5c31\u662f\u4e0d\u7b26\u5408\u3002",
        "postTime": 1613021006,
        "uid": 183603,
        "name": "SUNCHAOYI",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P7304 \u3010[COCI2018-2019#1] Zamjena\u3011"
    },
    {
        "content": "### \u524d\u8a00\n\n\u4f30\u2014\u2014\u503c\u2014\u2014\n\n### \u6b63\u6587\n\n\u5bb9\u6613\u60f3\u5230\u4ee5\u4e0b\u601d\u8def\uff1a\n\n- \u82e5 $a_i,b_i$ \u662f\u4e24\u4e2a\u4e0d\u76f8\u540c\u7684\u5e38\u91cf\uff0c\u90a3\u4e48\u6ca1\u6709\u5408\u6cd5\u89e3\u3002\n\n- \u82e5 $a_i,b_i$ \u4e2d\u6709\u4e00\u4e2a\u662f\u5e38\u91cf\uff0c\u6709\u4e00\u4e2a\u662f\u6ca1\u6709\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u5c06\u53d8\u91cf\u8d4b\u503c\u4e3a\u8fd9\u4e2a\u5e38\u91cf\u3002\n\n- \u82e5 $a_i,b_i$ \u4e2d\u6709\u4e00\u4e2a\u662f\u5e38\u91cf\uff0c\u53e6\u6709\u4e00\u4e2a\u662f\u5df2\u7ecf\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5e76\u4e14\u4e24\u8005\u4e0d\u76f8\u7b49\uff0c\u90a3\u4e48\u6ca1\u6709\u5408\u6cd5\u89e3\u3002\n\n- \u82e5\u6ca1\u6709\u4e0a\u8ff0\u4e24\u79cd\u6ca1\u6709\u5408\u6cd5\u89e3\u7684\u60c5\u51b5\u4ea7\u751f\uff0c\u90a3\u4e48\u6709\u5408\u6cd5\u89e3\u3002\n\n\u6240\u4ee5\u628a $i$ \u4ece $1$ \u904d\u5386\u5230 $n$\u5373\u53ef\u3002\n\n\u8fd9\u79cd\u60f3\u6cd5\u662f\u9519\u8bef\u7684\u3002\u539f\u56e0\u5982\u4e0b\uff1a\n\n```\n3\nx 1 2\ny x y\n```\n\u6240\u4ee5\u6211\u4eec\u5e94\u5f53\u8003\u8651\u7528[\u5e76\u67e5\u96c6](https://www.luogu.com.cn/problem/P3367)\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u7b80\u800c\u8a00\u4e4b\uff0c\u5c31\u662f\u628a\u4e24\u4e2a\u76f8\u540c\u7684\u53d8\u91cf\u5408\u5e76\u4e3a\u4e00\u4e2a\u96c6\u5408\uff0c\u7136\u540e\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u8fd9\u91cc\u8981\u6ce8\u610f\u4e00\u4e0b\uff0c\u6587\u4e2d\u63d0\u5230\u7684\u5bf9\u53d8\u91cf\u7684\u64cd\u4f5c\uff0c\u5747\u9700\u8981\u8f6c\u5316\u4e3a\u5bf9\u4e8e\u96c6\u5408\u7684\u64cd\u4f5c\u3002\n\n\u603b\u7ed3\u8d77\u6765\uff0c\u8fd9\u9053\u9898\u7684\u89e3\u6cd5\u5982\u4e0b\uff1a\n\n- \u82e5 $a_i,b_i$ \u662f\u4e24\u4e2a\u4e0d\u76f8\u540c\u7684\u5e38\u91cf\uff0c\u6216\u8005\u5df2\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u90a3\u4e48\u6ca1\u6709\u5408\u6cd5\u89e3\u3002\n\n- \u82e5 $a_i,b_i$ \u4e2d\u6709\u4e00\u4e2a\u662f\u5e38\u91cf\uff0c\u6709\u4e00\u4e2a\u662f\u6ca1\u6709\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u5c06\u53d8\u91cf\u8d4b\u503c\u4e3a\u8fd9\u4e2a\u5e38\u91cf\u3002\n\n\n- \u82e5 $a_i,b_i$ \u4e24\u4e2a\u90fd\u662f\u672a\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u5c06\u4e24\u4e2a\u53d8\u91cf\u5408\u5e76\u4e3a\u4e00\u4e2a\u3002\n\n- \u82e5\u6ca1\u6709\u4e0a\u8ff0\u4e24\u79cd\u6ca1\u6709\u5408\u6cd5\u89e3\u7684\u60c5\u51b5\u4ea7\u751f\uff0c\u90a3\u4e48\u6709\u5408\u6cd5\u89e3\u3002\n\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<stdio.h>\n#include<map>\nusing namespace std;\nmap<string,int>name;\nstring gt;int num[50005*2];//\u6bcf\u4e2a\u96c6\u5408\u7684\u503c\nint n,a[50005],b[50005],cnt,f[50005*2];\nint fi(int x){//\u5e76\u67e5\u96c6\uff0c\u4e0d\u4f1a\u7684\u8df3\u8f6cP3367\u3002\n\tif(f[x]==x)return x;\n\telse return f[x]=fi(f[x]);//\u8def\u5f84\u538b\u7f29\u3002\n}\nvoid getin(int &I){//\u8f93\u5165\u3002\n\tcin>>gt;bool digit=0;//\u8868\u793a\u662f\u4e0d\u662f\u6570\u5b57\u3002\n\tfor(int i=0;i<gt.length();i++)\n\t\tif(isdigit(gt[i]))digit=1;\n\tif(digit){\n\t\tint ii=0;I=0;\n\t\twhile(!isdigit(gt[ii]))ii++;\n\t\twhile( isdigit(gt[ii]))I=I*10+gt[ii]-'0',ii++;\n\t}//\u4e0d\u7406\u89e3\u7684\u5efa\u8bae\u641c\u7d22\u5feb\u8bfb\u3002\n\telse {\n\t\tif(name[gt])I=-name[gt];\n\t\telse I=-(name[gt]=++cnt);\n\t}//\u4e0d\u7406\u89e3\u7684\u5efa\u8bae\u641c\u7d22map\u6620\u5c04\u3002\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n*2;i++)num[i]=-1,f[i]=i;//\u8d4b\u521d\u503c\uff0c\u5176\u4e2d-1 \u8868\u793a\u6ca1\u6709\u88ab\u8d4b\u503c\u3002\n\tfor(int i=1;i<=n;i++)getin(a[i]);//\u8f93\u5165\u3002\n\tfor(int i=1;i<=n;i++)getin(b[i]);//\u8d1f\u6570\u8868\u793a\u53d8\u91cf\uff0c\u6574\u6570\u8868\u793a\u5e38\u6570\u3002\n\tfor(int i=1;i<=n;i++){\n\t\tif(a[i]>0 and b[i]>0 and a[i]!=b[i])return puts(\"NE\"),0;//\u5982\u679c\u4e24\u4e2a\u6570\u5747\u4e3a\u5e38\u6570\uff0c\u4e14\u4e24\u6570\u4e0d\u76f8\u7b49\uff0c\u5219\u6ca1\u6709\u5408\u6cd5\u89e3\u3002\n\t\telse if(a[i]>0 and b[i]<0){\n\t\t\tif(num[fi(-b[i])]!=-1 and num[fi(-b[i])]!=a[i])return puts(\"NE\"),0;//\u4e00\u4e2a\u662f\u5df2\u7ecf\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u4e00\u4e2a\u662f\u4e0e\u4e4b\u4e0d\u76f8\u7b49\u7684\u5e38\u91cf\uff0c\u5219\u6ca1\u6709\u5408\u6cd5\u89e3\u3002\n\t\t\telse if(num[fi(-b[i])]==-1)num[fi(-b[i])]=a[i];//\u4e00\u4e2a\u662f\u6ca1\u6709\u8d4b\u503c\u7684\u53d8\u91cf\uff0c\u53e6\u4e00\u4e2a\u662f\u5e38\u91cf\uff0c\u76f4\u63a5\u8d4b\u503c\u3002\n\t\t}\n\t\telse if(a[i]<0 and b[i]>0){\n\t\t\tif(num[fi(-a[i])]!=-1 and num[fi(-a[i])]!=b[i])return puts(\"NE\"),0;//\u53cd\u8fc7\u6765\u4e00\u4e0b\u3002\n\t\t\telse if(num[fi(-a[i])]==-1)num[fi(-a[i])]=b[i];\n\t\t}\n\t\telse if(a[i]<0 and b[i]<0){//\u4e24\u8005\u5747\u4e3a\u53d8\u91cf\n\t\t\tif(num[fi(-a[i])]!=-1 or num[fi(-b[i])]!=-1){//\u82e5\u6709\u4e00\u8005\u5df2\u7ecf\u8d4b\u503c\n\t\t\t\tif(num[fi(-a[i])]!=-1 and num[fi(-b[i])]!=-1){//\u4e24\u8005\u5747\u8d4b\u503c\u3002\n\t\t\t\t\tif(num[fi(-a[i])]!=num[fi(-b[i])])\n\t\t\t\t\t\treturn puts(\"NE\"),0;\n\t\t\t\t}\n\t\t\t\telse{//\u5c06\u5176\u4e2d\u4e00\u8005\u7684\u503c\u8d4b\u5230\u53e6\u4e00\u8005\u4e0a\n\t\t\t\t\tif(num[fi(-a[i])]!=-1)f[fi(-b[i])]=fi(-a[i]);\n\t\t\t\t\telse f[fi(-a[i])]=fi(-b[i]);\n\t\t\t\t}\t\n\t\t\t}\n\t\t\telse f[fi(-a[i])]=fi(-b[i]);//\u4e24\u8005\u5747\u672a\u8d4b\u503c\uff0c\u5408\u5e76\u4e24\u4e2a\u96c6\u5408\u3002\n\t\t}\n\t}\n\treturn puts(\"DA\"),0; //\u6ca1\u6709\u51fa\u73b0\u4e0a\u8ff0\u60c5\u51b5\uff0c\u6709\u5408\u6cd5\u89e3\u3002\n}\n```\n\n",
        "postTime": 1612429265,
        "uid": 217300,
        "name": "Error_Eric",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P7304 \u3010[COCI2018-2019#1] Zamjena\u3011"
    }
]
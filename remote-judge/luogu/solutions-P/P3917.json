[
    {
        "content": "\u6309\u4e8c\u8fdb\u5236\u6bcf\u4e00\u4f4d\u5206\u5f00\u7b97\u3002\n\n\u8bb0\u524d\u7f00\u5f02\u6216\u503cX[0...N]\uff0c\u4e00\u6bb5\u533a\u95f4[L, R]\u7684\u5f02\u6216\u503c\u5c31\u662fX[L-1] xor X[R]\u3002\n\n\u90a3\u4e48\u5c31\u662f\u7edf\u8ba1\u6709\u591a\u5c11\u4e2a\u533a\u95f4\u7684\u5f02\u6216\u503c\u662f1\uff0c\u90a3\u53ea\u9700\u8981\u7edf\u8ba1X[0...N]\u4e2d\u662f0\u548c1\u7684\u5206\u522b\u6709\u591a\u5c11\u4e2a\uff0c\u4e24\u4e2a\u4e2a\u6570\u76f8\u4e58\u5c31\u662f\u533a\u95f4\u4e2a\u6570\u3002\n",
        "postTime": 1504282862,
        "uid": 54522,
        "name": "\u51b7\u6708\u51b0\u77b3",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u6211\u4eec\u5b9a\u4e49\u7b2cx\u4e2a\u6570\u4e2d\u4ece\u53f3\u5f80\u5de6\u6570\u7b2ci\u4f4d\u7684\u8d21\u732e\uff1a\u6709\u591a\u5c11\u4e2a\u5728x\u4e4b\u524d\u7684\u6570j\u6ee1\u8db3aj xor aj+1 xor ... xor ax\u7684\u7b2ci\u4f4d\u662f1.\n\n\u8bbedp[x][i]\u8868\u793a\u7b2cx\u4e2a\u6570\u7b2ci\u4f4d\u7684\u8d21\u732e\uff0ca[x][i]\u8868\u793a\u7b2cx\u4e2a\u6570\u7b2ci\u4f4d\u662f\u591a\u5c11\u3002\n\n\u82e5a[x][i]=0\uff0c\u53d6j=x\u4e0d\u4f1a\u4ea7\u751f\u8d21\u732e\u3002\u82e5j\u5c0f\u4e8ex\uff0caj xor aj+1 xor ... xor ax=aj xor aj+1 xor ... xor ax-1\u3002\u6240\u4ee5dp[x][i]=dp[x-1][i].\n\n\u82e5a[x][i]=1\uff0c\u53d6j=x\u4ea7\u751f1\u7684\u8d21\u732e\u3002\u82e5j\u5c0f\u4e8ex\uff0caj xor aj+1 xor ... xor ax\u548caj xor aj+1 xor ... xor ax-1\u76f8\u53cd\u3002\u6240\u4ee5dp[x][i]=(x-1-dp[x-1][i])(j\u5c0f\u4e8ex\u7684\u8d21\u732e\uff09+1(j=x\u7684\u8d21\u732e\uff09=x-dp[x-1][i].\n\n\u8bbeDP[x]=dp[x][0]\u00d71+dp[x][1]\u00d72+dp[x][2]\u00d74+...+dp[x][31]\u00d72^31.\n\n\u5219\u7b54\u6848\u5c31\u662fDP[1]+DP[2]+...+DP[n].\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(32n)\n\n\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(32n)\n\n\u4ee3\u7801\uff1a\n\n```\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#include<math.h>\nusing namespace std;\n\nint n,a[100005],dp[100005][32];\nlong long ans;\n\nint main()\n{\n\tint i,j;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;++i) scanf(\"%d\",&a[i]);\n\tfor(i=1;i<=n;++i)\n\t\tfor(j=31;j>-1;--j)\n\t\t{\n\t\t\tif(a[i]&(1<<j)) dp[i][j]=i-dp[i-1][j];\n\t\t\telse dp[i][j]=dp[i-1][j];\n\t\t\tans+=1LL*dp[i][j]*(1<<j);\n\t\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n\n\u6211\u4eec\u53d1\u73b0dp[x][i]\u7684\u503c\u53ea\u80fd\u7531dp[x-1][i]\u8f6c\u79fb\u5f97\u5230\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\uff0c\u8fb9\u8f6c\u79fb\u8fb9\u7edf\u8ba1\u7b54\u6848\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(32n)\n\n\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(32)\n\n\u4ee3\u7801\uff1a\n\n```\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#include<math.h>\nusing namespace std;\n\nint n,a,dp[32];\nlong long ans;\n\nint main()\n{\n\tint i,j;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%d\",&a);\n\t\tfor(j=31;j>-1;--j)\n\t\t{\n\t\t\tif(a&(1<<j)) dp[j]=i-dp[j];\n\t\t\tans+=1LL*dp[j]*(1<<j);\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1532180725,
        "uid": 31435,
        "name": "hwk0518",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u5f02\u6216\u662f\u4e00\u79cd\u795e\u5947\u7684\u8fd0\u7b97\uff0c\u6709\u5f88\u591a\u79cd\u7406\u89e3\u65b9\u6cd5\uff0c\u4e5f\u6709\u5f88\u591a\u6027\u8d28\u3002\u8fd9\u9898\u6211\u4eec\u53ea\u8981\u5206\u5f00\u5404\u4f4d\u5904\u7406\uff0c\u5982\u679c\u5728\u8be5\u4f4d\u4e0a\u67d0\u6bb5\u533a\u95f4\u6709\u5947\u6570\u4e2a1\uff0c\u8fd9\u6bb5\u533a\u95f4\u5c31\u8d21\u732e\u4e00\u4e2a1\u3002\u95ee\u9898\u5c31\u53d8\u6210\u5904\u7406\u591a\u5c11\u6bb5\u6709\u5947\u6570\u4e2a1\u4e86\u3002\n\n\u8fd9\u91cc\u7684\u5904\u7406\u53e6\u4e00\u4e2a\u9898\u89e3Dp\u7684\u601d\u60f3\u5f88\u597d\uff0c\u4f46\u5176\u5b9e\u4e0d\u9700\u8981\u3002\u8fd9\u4e2a\u6bcf\u52a0\u5165\u4e00\u4e2a1\u65f6\u53cd\u8f6c\u4e00\u4e0b\u5c31\u597d\u4e86\u3002\u53ef\u4ee5\u7ed3\u5408\u56fe\u7247\u548c\u4ee3\u7801\u7406\u89e3\u3002\n![\u8be5\u6b65\u7684\u5904\u7406](https://cdn.luogu.com.cn/upload/pic/53325.png )\n\n\u518d\u63a8\u8350\u4e00\u9053\u540c\u6837\u601d\u60f3\u7684\u9898\u76ee\uff1a\n[XOR on Segment](https://www.luogu.org/problemnew/show/CF242E)\n\n\u672c\u9898\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nconst int N=1e5+5;\n\nint a[N];\n\nint main()\n{\n\tint n,i,j;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tlong long s,m,ans=0;\n\tfor(j=0;j<30;j++){\t\t\t//\u679a\u4e3e\u4f4d\n\t\ts=m=0;\n\t\tfor(i=1;i<=n;i++){\t\t//\u4ee5\u8be5\u6570\u7ed3\u5c3e\u7684\u5e8f\u5217\n\t\t\tif((a[i]>>j)&1)\t\t//\u672c\u6570\u8be5\u4f4d\u662f1\n\t\t\t\ts=i-s;\t\t//\u524d\u976201\u53cd\u8f6c\n\t\t\tm+=s;\t\t\t//\u7edf\u8ba1\u8d21\u732e\n\t\t}\n\t\tans+=m*(1<<j);\t\t\t//\u7edf\u8ba1\u8be5\u4f4d\u7684\u8d21\u732e\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1551888594,
        "uid": 41425,
        "name": "wanghaoyu1008",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u819c\u62dc hqztrue\uff0c\u592a\u795e\u4ed9\u4e86\u3002\u672c\u6587\u7684\u601d\u8def\u6765\u81ea\u4e8e\u8fd9\u4f4d\u8001\u9e3d\u3002\r\n\r\n\u8003\u8651\u8fd9\u4e2a\u95ee\u9898\uff1a\r\n\r\n**\u7ed9\u51fa\u82e5\u5e72\u4e2a\u6574\u6570\u3002$w$ \u4e3a\u5b57\u957f\uff0c$\\forall i\\in [0,w)$\uff0c\u6c42\u51fa\u8fd9\u4e9b\u6574\u6570\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u5728\u7b2c $i$ \u4f4d\u6709\u591a\u5c11\u4e2a $1$\u3002**\r\n\r\n### \u6cd5\u4e00\uff1a\u4f4d\u5206\u5757\r\n\r\n\u56e0\u4e3a $w=\\Theta(\\log n)$\uff0c\u6240\u4ee5\u5c06\u6574\u6570\u6bcf $k=\\Theta(\\log n)$ \u5206\u4e00\u5757\uff0c\u5206\u6210\u5e38\u6570\u5757\u3002\r\n\r\n\u6240\u4ee5\u6211\u4eec\u53ea\u7528\u5904\u7406\u5e38\u6570\u6b21\u503c\u57df\u4e3a $m=2^k$ \u7684\u95ee\u9898\u3002\u5373\u6bcf\u4e2a\u6570 $\\in [0,m)$\u3002\r\n\r\n\u8003\u8651 01trie \u7ed3\u6784\u3002\u5177\u4f53\u7684\uff0c\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a\u6574\u6570 $x$\uff0c\u5728 $t_{x+m}$ \u4e0a\u8ba1\u6570\u4e00\u6b21\uff0c\u7136\u540e\u8fdb\u884c\u9012\u63a8 $t_w =t_{2w}+t_{2w+1}$\u3002\r\n\r\n\u6700\u7ec8\u5bf9\u6bcf\u5c42\u8ba1\u6570\u4e00\u6b21\u3002$ans_i =\\sum _{x \\bmod 2=1 \\land x\\in [2^{k-i},2^{k-i+1})} t_x$\u3002\r\n\r\n\u8fd9\u6837\u6211\u4eec\u505a\u5230\u4e86 $O(m)$ \u5904\u7406\u8fd9\u4e2a\u95ee\u9898\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u5373\u7ebf\u6027\u3002\r\n\r\n[\u4ee3\u7801\u5b9e\u73b0](https://www.luogu.com.cn/paste/5zjv7sti)\r\n\r\n### \u6cd5\u4e8c\uff1a\u5206\u6cbb\r\n\r\n\u8bbe\u8ba1 $01$ \u8ba1\u6570\u6570\u7ec4 $a$\uff0c$a_{i,j}(i\\in [1,\\log n], j\\in [1,w])$ \u8868\u793a**\u7b2c $j$ \u4f4d\u7684 $1$ \u7684\u6570\u91cf\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u7684\u7b2c $i$ \u4f4d**\u3002\r\n\r\n\u8003\u8651\u5206\u6cbb\u3002\u5904\u7406\u4e24\u4e2a\u89c4\u6a21\u4e3a $\\dfrac n 2$ \u7684\u5b50\u95ee\u9898\u540e\u5408\u5e76\u5de6\u53f3\u7684\u8ba1\u6570\u6570\u7ec4 $a,b$\uff0c\u8bbe\u5176\u5f97\u5230 $c$\u3002\r\n\r\n\u8003\u8651\u8fd9\u91cc\u5408\u5e76\u7684\u672c\u8d28\uff1a\u5e76\u884c\u8ba1\u7b97 $w$ \u4e2a\u4e8c\u8fdb\u5236\u52a0\u6cd5\u3002\r\n\r\n\u6211\u4eec\u5bf9\u8ba1\u6570\u6570\u7ec4\u7684\u7b2c\u4e8c\u7ef4\u538b\u4f4d\uff0c\u56e0\u4e3a $j\\in [1,w]$ \u6240\u4ee5\u6bcf\u4e2a\u7b2c\u4e8c\u7ef4\u5747\u53ef\u4ee5\u538b\u8fdb\u4e00\u4e2a word \u91cc\u9762\u3002\r\n\r\n\u540c\u7406\uff0c\u6bcf\u4e00\u4f4d\u662f\u5426\u8fdb\u4f4d\u4e5f\u53ef\u4ee5\u538b\u8fdb\u4e00\u4e2a word \u91cc\uff0c\u8fd8\u6709\u4e00\u4e2a\u539f\u56e0\u5c31\u662f\u8fd9\u91cc\u81f3\u591a\u8fdb\u4f4d\u4e00\u6b21\uff0c\u8bbe\u5176\u4e3a $t$\u3002\r\n\r\n\u8ba1\u7b97 $c_i$\uff1a\u663e\u7136\u4e3a $t \\oplus a_i \\oplus b_i$\u3002\r\n\r\n\u8ba1\u7b97 $t$\uff1a\u5373\u5224\u65ad\u4e24\u6b21\u52a0\u6cd5\u7684\u8fc7\u7a0b\u4e2d\u662f\u5426\u6709\u4efb\u4f55\u4e00\u4e2a\u8fdb\u4f4d\u4e86\u3002\u5373 $(a_i \\land b_i)|((a_i \\oplus b_i)\\land t)$\u3002\r\n\r\n\u6bcf\u6b21\u5408\u5e76\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\log n)$\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u5f0f\u5b50\u5373 $T(n)=2T(\\dfrac n 2)+O(\\log n)$\u3002\r\n\r\n\u65f6\u95f4\u590d\u6742\u5ea6\u663e\u7136\u4e3a\u7ebf\u6027\u4e86\u3002\u8bc1\u660e\u89c1\u4e0b\uff1a\r\n\r\n\u5f97\u5230\u5f0f\u5b50 $T(n)=\\sum _{i=0}^{\\log n} (\\log n -i+1) 2^i$\u3002\u6211\u4eec\u5c1d\u8bd5\u8bc1\u660e $T(n)=O(n)$\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u65ad\u8a00\uff0c\u8bc1\u660e $T(2^n)=O(2^n)$ \u5373\u53ef\u3002\r\n\r\n\u8bbe $f(n)=T(2^n)=\\sum_{i=0}^n (n-i+1)2^i$\u3002$f(n+1)-f(n)=2^{n+1}+\\sum_{i=0}^n 2^i=2^{n+2}-1$\u3002\r\n\r\n\u6240\u4ee5\u663e\u7136\uff0c$f(n)=O(2^n)$\u3002\r\n\r\n\u6240\u4ee5 $T(n)=O(n)$\u3002\r\n\r\n\u8fdb\u884c\u5206\u6cbb\u4e4b\u540e\uff0c\u66b4\u529b $O(\\log n w)$ \u5730\u5f97\u51fa\u6bcf\u4e00\u4f4d\u7684\u7b54\u6848\u5373\u53ef\u3002\r\n\r\n\u65f6\u95f4\u590d\u6742\u5ea6\u7ebf\u6027\u3002\r\n\r\n[\u4ee3\u7801\u5b9e\u73b0](https://www.luogu.com.cn/paste/zf0ov9fj)",
        "postTime": 1650520950,
        "uid": 203623,
        "name": "Ntokisq",
        "ccfLevel": 0,
        "title": "\u4f4d\u8fd0\u7b97\u7684\u4e00\u70b9\u5c0f\u6280\u5de7"
    },
    {
        "content": "\u770b\u5230\u9898\u89e3\u8fd9\u4e48\u5c11\uff0c\u53c8\u89c9\u5f97\u8fd9\u9053\u9898\u4e5f\u7b97\u6570\u8bba\u91cc\u9762\u6bd4\u8f83\u7ecf\u5178\u7684\u95ee\u9898\u3002\n\n\n\u5b9e\u9645\u8fd9\u4e2a\u95ee\u9898\u6709\u4e00\u4e2a\u7b80\u5316\u7248\uff0c\u5c31\u662f\u7ed9\u4f60\u4e00\u4e2a\u5e8f\u5217\uff0c\u6c42\u03a3\uff08a[i] xor a[j]\uff09( i >= 1 && i < n, j > i && j <= n)\uff0c\u6211\u4eec\u540c\u6837\u8003\u8651xor\u4ea7\u751f\u8d21\u732e\u7684\u6761\u4ef6\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4f4d\uff08\u56e0\u4e3a\u53ea\u6709\u4e24\u4e2a\u6570\uff09\u5982\u679c\u8fd9\u4e00\u4f4d\u5176\u4e2d\u4e00\u4e2a\u4e3a1\u53e6\u4e00\u4e2a\u4e3a0\u5c31\u53ef\u4ee5\u4ea7\u751f\u8d21\u732e\uff0c\u6240\u4ee5\u4e00\u5f00\u59cb\u6211\u4eec\u5bf9\u4e8en\u4e2a\u6570\u6c42\u51facnt[i]\uff08\u8868\u793a\u5728\u4e8c\u8fdb\u5236\u4e0b\u7b2ci\u4f4d\u4e3a1\u7684\u6709\u51e0\u4e2a\uff09\uff0c\u90a3\u4e48\u4e3a0\u7684\u5c31\u662fn-cnt[i]\uff0c\u7b54\u6848\u7edf\u8ba1\u65f6\u53ef\u4ee5\u7528\u4e58\u6cd5\u539f\u7406\uff0c\u8ba9\u6bcf\u4e2a0\u5206\u522b\u4e0e\u6bcf\u4e2a1\u7ec4\u5408\uff0c\u4e5f\u5c31\u662fcnt[i] (n - i);\u7136\u540e\u8fd9\u4e2a\u662f\u7b97\u51fa\u4e86\u6709\u591a\u5c11\u79cd\u65b9\u6848\u8ba9\u5f53\u524d\u8fd9\u4e00\u4f4d\u6709\u8d21\u732e\uff0c\u8981\u7b97\u51fa\u7b54\u6848\u9700\u8981\u5bf9cnt[i] (n - cnt[i])\u4e58\u4ee51 << k - 1\uff08k\u8868\u793a\u679a\u4e3e\u7684\u662f\u4e8c\u8fdb\u5236\u4e0b\u7684\u7b2c\u51e0\u4f4d\uff09\u3002\n\n\n\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u4e2a\u52a0\u5f3a\u7248\u6709\u4ec0\u4e48\u4e0d\u4e00\u6837\uff1f\u9898\u76ee\u8981\u6c42\u6c42\u533a\u95f4xor\u548c\uff0c\u6211\u4eec\u540c\u6837\u5bf9\u4e8e\u6bcf\u4e00\u4f4d\u4ea7\u751f\u8d21\u732e\u8fdb\u884c\u8003\u8651\uff0c\u82e5[l, r]\u8fd9\u4e2a\u533a\u95f4\u5bf9\u4e8e\u8fd9\u4e00\u4f4d\u80fd\u4ea7\u751f\u8d21\u732e\u7684\u6761\u4ef6\u5c31\u662f\u5176\u4e2d1\u7684\u4e2a\u6570\u4e3a\u5947\u6570\u4e140\u7684\u4e2a\u6570\u4e3a\u5076\u6570\uff0c\u6216\u80050\u7684\u4e2a\u6570\u4e3a\u5947\u6570\u4e141\u7684\u4e2a\u6570\u4e3a\u5076\u6570\u3002\u6c42\u89e3\u8fd9\u9053\u9898\u9700\u8981\u77e5\u9053\u4e00\u4e2a\u7ed3\u8bba\u5c31\u662f\uff0c \u82e5a xor b = c\uff0c \u90a3\u4e48a xor c = b;\uff08\u6211\u4e0d\u4f1a\u8bc1\u660e\uff0c\u8fd9\u662fxor\u7684\u8fd0\u7b97\u6027\u8d28\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u6c42\u51faxor\u7684\u524d\u7f00\u4e5f\u5c31\u662fsum[i]\u8868\u793a\u524di\u4e2a\u6570\u7684\u5f02\u6216\u503c\u3002\u90a3\u4e48\u7edf\u8ba1\u7b54\u6848\u53ea\u9700\u8981\u6c42\u51fa\u5bf9\u4e8e\u4e8c\u8fdb\u5236\u4e0b\u7684\u6bcf\u4e00\u4f4d\u8fd9n\u4e2a\u524d\u7f00\u4e2d\u6709\u51e0\u4e2a1\uff0c\u7528cnt\u8868\u793a\uff0c\u6709\u51e0\u4e2a0\uff08\u4e5f\u5c31\u662fn - cnt\uff09\u7136\u540e\u8ba9\u6bcf\u4e00\u4e2a1\u4e0e\u6bcf\u4e00\u4e2a0\u7ec4\u5408\u5f62\u6210\u4e00\u4e2a\u533a\u95f4\u7136\u540e\u7edf\u8ba1\u5c31\u662fcnt (n-cnt) 1 << (k -1);\n\n\n\u4f46\u662f\u8fd9\u6837\u662f\u9519\u7684\uff0c\u4f60\u4f1a\u53d1\u73b0\u4f60\u8ba9\u4ed6\u4eec\u7ec4\u5408\u4e86\u5374\u6ca1\u6709\u8003\u8651\u52301-X\u8fd9\u6837\u7684\u533a\u95f4\u4e5f\u5c31\u662f\u8ba9\u8fd8\u6709cnt\u4e2a\u4e5f\u53ef\u4ee5\u4ea7\u751f\u8d21\u732e\u3002\u6240\u4ee5\u7b54\u6848\u7edf\u8ba1\u5e94\u8be5\u662f(cnt (n - cnt) + cnt) 1 << (k - 1)\u4e5f\u5c31\u662fcnt (n - cnt + 1) 1 <<(k -1\uff09\uff1b\n\n[\u4ee3\u7801\uff08\u5728\u535a\u5ba2\uff09](http://www.cnblogs.com/zzozz/p/7800646.html)\n",
        "postTime": 1510053831,
        "uid": 23195,
        "name": "zzozz",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u5f02\u6216\u7684\u4e00\u9053\u57fa\u672c\u529f\u9898\uff08\u867d\u7136\u6211WA\u4e86\u4e24\u6b21\uff09\n\n\u5148\u8ba1\u7b97\u5f02\u6216\u524d\u7f00\u548c\uff0c\u7136\u540e\u6309\u4f4d\u6570\u7edf\u8ba1\u8d21\u732e\n\n\u8bb0$cnt1[i]$\u8868\u793a\u524d\u9762\u6240\u6709\u524d\u7f00\u548c\uff0c\u7b2ci\u4f4d\u4e3a1\u7684\u6570\n\n\u8bb0$cnt2[i]$\u8868\u793a\u524d\u9762\u6240\u6709\u524d\u7f00\u548c\uff0c\u7b2ci\u4f4d\u4e3a0\u7684\u6570\n\n\u7136\u540e\u7edf\u8ba1\u5373\u53ef\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\n#include<cstring>\n#include<cstdlib>\n#include<cctype>\n#define M 2010000\n#define inf 0x3f3f3f3f\n#define LL long long\n#define int long long\nusing namespace std;\nint n,s[M],cnt1[M],cnt2[M],ans;\ninline int read()\n{\n\tint f=1,x=0;char s=getchar();\n\twhile (!isdigit(s)){if(s=='-')f=-1;s=getchar();}\n\twhile (isdigit(s)){x=(x<<1)+(x<<3)+(s^48),s=getchar();}\n\treturn x*f;\n}\nsigned main(void)\n{\n\tn=read();\n\tfor (int i=0;i<=30;i++) cnt2[i]=1;\n\tfor (int i=1;i<=n;i++){\n\t\tint x=read();\n\t\ts[i]=s[i-1]^x;\n\t\tfor (int j=30;j>=0;j--){\n\t\t\tif ((1<<j)&s[i])\n\t\t\t\tans+=(1<<j)*cnt2[j],cnt1[j]++;\n\t\t\telse \n\t\t\t\tans+=(1<<j)*cnt1[j],cnt2[j]++;\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n    return 0;\n}\n\n```\n",
        "postTime": 1571241597,
        "uid": 78290,
        "name": "Polaris_Dane",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u6211\u7684blog\uff1ahttp://blog.csdn.net/jzq233jzq/article/details/77231143\n\n\u6211\u7684\u505a\u6cd5\u597d\u50cf\u6bd4\u8f83\u50bb\u3002\u3002\u3002\n\n\u770b\u5230\u8fd9\u79cd\u9898\u9996\u5148\u60f3\u5230\u524d\u7f00\u3002\u9996\u5148\u524d\u7f00xor\u662f\u4e0d\u662f\u5f88\u8d44\u8f9e\uff1f\n\n\u6211\u7684\u505a\u6cd5\u5462\u5c31\u662f\u5148\u628a\u6240\u6709\u6570\u6309\u4e8c\u8fdb\u5236\u4f4d\u62c6\u5f00\uff0c\u7136\u540e\u6bcf\u4e00\u4f4d\u90fd\u505a\u4e24\u6b21\u524d\u7f00\u3002\n\n\u9996\u5148\u5bf9\u6570\u4f4d\u505a\u4e00\u6b21\u524d\u7f00xor\uff0c\u8bb0\u5230$s$\u6570\u7ec4\u91cc\uff0c\u518d\u5bf9s\u6570\u7ec4\u505a\u4e00\u6b21\u524d\u7f00\u548c\uff0c\u8bb0\u5230$ss$\u91cc\u3002\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u4f4d\u679a\u4e3e\u8d77\u59cb\u4f4d\u7f6ei\uff0c\u7136\u540e\u4ecei\u5f00\u59cb\u5411\u540e\u5230n\u7edf\u8ba1\u7b54\u6848\u3002\n\n\u9996\u5148\u8003\u8651\u5230$s$\u6570\u7ec4\u975e0\u53731\uff0c\u6240\u4ee5\u8fd9\u91cc\u5904\u7406\u5c06\u4f1a\u975e\u5e38\u65b9\u4fbf\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u770b\u5230$s$\u6570\u7ec4\u548c$ss$\u6570\u7ec4\u7684\u5173\u7cfb\u5c31\u50cf\u8fd9\u6837\uff08\u8fd9\u91cc\u7684\"^\"\u90fd\u662fxor\u7684\u610f\u601d\uff09\uff1a\n\n![](http://img.blog.csdn.net/20170816103548222?)\n\n\u53ef\u4ee5\u53d1\u73b0$ss[i]$\u5c31\u5bf9\u5e94\u4e86\u4ee5s[i]\u4e3a\u5e95\u7684\u4e09\u89d2\u5f62\u662f\u4e0d\u662f\uff1f\n\n\u6240\u4ee5\u9996\u5148\u6211\u4eec\u5dee\u5206\u6c42\u51fa$ \\sum_{j=i}^ns_j$\u4e4b\u540e\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u7b49\u8170\u68af\u5f62\uff08\u4ee53~5\u4e3a\u4f8b\uff09\uff1a\n\n![](http://img.blog.csdn.net/20170816104030050?)\n\n\u6211\u4eec\u53d1\u73b0\u6700\u524d\u9762\u4e24\u4e2a\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u628a\u8fd9\u4e2a\u4f5c\u4e3a\u516c\u5171\u90e8\u5206\u3002\u800c\u4e14\u6211\u4eec\u8981\u6c42\u7b54\u6848\u7684\u4e5f\u662f\u8fd9\u4e2a\u68af\u5f62\u51cf\u6389\u5de6\u8fb9\u7684\u516c\u5171\u90e8\u5206\u3002\n\n\u6211\u4eec\u53d1\u73b0\u5982\u679c\u516c\u5171\u90e8\u5206\u7684xor\u503c\u4e3a1\u7684\u8bdd\uff0c\u53f3\u8fb9\u7684\u7b54\u6848\u5c31\u9700\u8981\u6574\u4f53\u7ffb\u8f6c\u4e00\u4e0b\uff0c\u5982\u679c\u4e3a0\uff0c\u5c31\u4e0d\u53d8\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5c31$O(1)$\u5f97\u5230\u4e86\u4ecei\u5f00\u59cb\u7684\u6240\u6709\u7b54\u6848\u3002\n\n\u6700\u540e\u4e58\u4e0a\u5f53\u524d\u5728\u7b2c\u51e0\u4f4d\u7684\u5e95\u6570\u5c31\u597d\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6$O(n log n)$\n\n\u4ee3\u7801\u5728\u6211blog\u91cc>\\_<\n",
        "postTime": 1502851629,
        "uid": 5716,
        "name": "jzqjzq",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u7eaf\u66b4\u529b$\\Theta(n^3)$\uff0c\u524d\u7f00\u548c\u4f18\u5316$\\Theta(n^2)$\uff0c\u56e0$n$\u4e3a\u5341\u4e07\u7ea7\u522b\u65e0\u6cd5\u901a\u8fc7\u672c\u9898\u3002\n\n\u8003\u8651\u5c06\u6bcf\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u7684\u8d21\u732e\u5206\u5f00\u6765\u7b97\u3002\n\n\u5bf9\u4e8e\u4e8c\u8fdb\u5236\u7b2c$i$\u4f4d\uff0c\u82e5\u5f53\u524d\u6b64\u4f4d\u4e3a1\uff0c\u5219\u53ea\u6709\u4e0e0\u4ea6\u6216\u624d\u80fd\u4ea7\u751f\u8d21\u732e\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\n\n\u5219\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0c\u7ef4\u62a4\u6570\u7ec4$val[i][0/1]$\uff0c\u4ee3\u8868\u8fd9\u4e2a\u4f4d\u7f6e\u4e0a$0/1$\u7684\u4e2a\u6570\u3002\n\n\u5219\u8d21\u732e\u4e3a$w=val[i][!t]*(1<<i)$\uff0c\u6ce8\u610f\u603b\u8d21\u732e\u8981\u5f00$long long$\u3002\n\n\u6ce8\u610f\u5bf9\u4e8e\u6bcf\u4e2a\u6570\u53ea\u8ba1\u7b97\u5b83\u4e0e\u524d\u9762\u4ea7\u751f\u7684\u8d21\u732e\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u91cd\u590d\u8ba1\u7b97\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$\\Theta(nlogn)$\n\n\u4ee3\u7801\u5982\u4e0b\uff0c\u4ec5\u4f9b\u53c2\u8003\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e5+10;\nint n,a[maxn];\ninline int read(){\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n\twhile(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+c-'0';c=getchar();}\n\treturn x*f;\n}\nint val[50][2],cnt;\nlong long ans;\ninline void insert(int x){\n\tfor(int i=0;i<=30;i++){\n\t\tint t=(((1<<i)&x)!=0);\n\t\tans+=(1ll<<i)*val[i][!t];\n\t\tval[i][t]++;\n\t}\n}\nint main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++)\n\t\ta[i]=read()^a[i-1];\n\tinsert(0);\n\tfor(int i=1;i<=n;i++)\n\t\tinsert(a[i]);\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n\u6df1\u6df1\u5730\u611f\u5230\u81ea\u5df1\u7684\u5f31\u5c0f\u3002",
        "postTime": 1603466462,
        "uid": 409469,
        "name": "Mariposa",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "## \u89e3\u9898\u601d\u8def\n\n\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd~~\u4e71\u641e~~\u65b0\u5947\u7684\u7b97\u6cd5\uff08\u5b8c\u5168\u5728\u7ebf~~\u9b3c\u77e5\u9053\u6709\u4ec0\u4e48\u7528~~\n\n### \u5206\u6790\n\n\u8003\u8651**\u62c6\u4f4d**\uff0c\u7531\u4e8e\u5f02\u6216\u7684\u6027\u8d28\uff08\u7b97\u662f\u5427\uff0c\u4e0d\u540c\u4f4d\u4e4b\u95f4\u4e0d\u5f71\u54cd\uff0c\u56e0\u6b64\u53ef\u4ee5\u8ba1\u7b97\u6bcf\u4e2a\u4f4d\u505a\u51fa\u7684\u8d21\u732e\uff0c\u7136\u540e\u7d2f\u52a0\n\n\u663e\u7136\uff0c\u53ea\u6709\u5947\u6570\u4e2a $1$ \u624d\u80fd\u505a\u51fa\u8d21\u732e\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u80fd\u8ba1\u7b97\u51fa\u6709\u591a\u5c11\u4e2a\u533a\u95f4\u5305\u542b\u5947\u6570\u4e2a $1$\n\n\u5c1d\u8bd5\u770b\u770b\u6709\u4ec0\u4e48\u89c4\u5f8b\uff1a\n\n|  \u6570   | $2$  | $5$  | $6$  |\n| :---: | :--: | :--: | :--: |\n| $2^2$ | $0$  | $1$  | $1$  |\n| $2^1$ | $1$  | $0$  | $1$  |\n| $2^0$ | $0$  | $1$  | $0$  |\n\n\u5bf9 `2,5,6` \u5206\u522b\u62c6\u4f4d\uff0c\u8868\u793a\u4e3a\u4e0a\u8ff0\u7684\u8868\uff08\u5f53\u7136\u505a\u7684\u65f6\u5019\u6ca1\u5fc5\u8981\u8bb0\u5f55\n\n\u8003\u8651 $2^2$\uff0c\u4ee5\u7b2c $1$ \u4e2a\u6570 $2$ \u4e3a\u533a\u95f4\u53f3\u7aef\u70b9\uff0c\u6709\u8d21\u732e\u7684\u533a\u95f4\u6709 $0$ \u4e2a\uff1b\u4ee5\u7b2c $2$ \u4e2a\u6570 $5$ \u4e3a\u533a\u95f4\u53f3\u7aef\u70b9\uff0c\u6709\u8d21\u732e\u7684\u533a\u95f4\u6709 $[1,2]$ \u548c $[2,2]$ \u5171 $2$ \u4e2a\uff1b\u4ee5\u7b2c $3$ \u4e2a\u6570 $6$ \u4e3a\u533a\u95f4\u53f3\u7aef\u70b9\uff0c\u6709\u8d21\u732e\u7684\u533a\u95f4\u6709 $[3,3]$ \u5171 $1$ \u4e2a\u3002\u505a\u51fa\u7684\u603b\u8d21\u732e\u4e3a $(2+1)\\times 2^2$\n\n\u5176\u4f59\u4f4d\u540c\u7406\n\n\u4e0d\u96be\u770b\u51fa\uff0c\u5982\u679c\u5c06\u5e8f\u5217\u6309 $1$ \u7684\u4f4d\u7f6e\u5206\u6bb5\uff0c\u5219\u53f3\u7aef\u70b9\u5904\u4e8e\u67d0\u6bb5\u4e2d\uff08\u5373\u4e3a $0$ \u7684\u60c5\u51b5\uff09\u65f6\uff0c\u6709\u8d21\u732e\u7684\u533a\u95f4\u6570\u4e3a\u4e0e\u4e4b\u8ddd\u79bb\u5947\u6570\u6bb5\u7684\u533a\u95f4\u603b\u8de8\u5ea6\uff1b\u4e3a\u67d0\u6bb5\u7684\u53f3\u7aef\u70b9\uff08\u5373\u4e3a $1$ \u7684\u60c5\u51b5\uff09\u65f6\uff0c\u8d21\u732e\u4e3a\u4e0e\u4e4b\u8ddd\u79bb\u5076\u6570\u6bb5\u7684\u533a\u95f4\u603b\u8de8\u5ea6\uff0c$Rt$\n\n![](https://hovnysilence.github.io/image/Luogu_P3917-1.jpg)\n\n- \u5728\u4e00\u4e2a\u67d0\u6bb5\u4e2d\uff08\u5373\u4e3a $0$ \u7684\u60c5\u51b5\uff09\uff0c\n\n  $7,8$ \u7b49\uff0c\u8d21\u732e\u5373\u4e3a\u5176\u4e4b\u524d\u84dd\u8272\u533a\u95f4\u7684\u8de8\u5ea6 $6-4=2$\n\n  $10,11$ \u7b49\uff0c\u8d21\u732e\u5373\u4e3a\u5176\u4e4b\u524d\u7ea2\u8272\u533a\u95f4\u7684\u8de8\u5ea6 $(9-6)+(4-0)=7$\n\n- \u4e3a\u67d0\u6bb5\u7684\u53f3\u7aef\u70b9\uff08\u5373\u4e3a $1$ \u7684\u60c5\u51b5\uff09\uff0c\n\n  $4$ \u7b49\uff0c\u8d21\u732e\u5373\u4e3a\u5176\u4e4b\u524d\u7ea2\u8272\u533a\u95f4\u7684\u8de8\u5ea6 $4-0=4$\n\n  $12$ \u7b49\uff0c\u8d21\u732e\u5373\u4e3a\u5176\u4e4b\u524d\u84dd\u8272\u533a\u95f4\u7684\u8de8\u5ea6 $(12-9)+(6-4)=5$\n\n\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u51fa\u8fd9\u6837\u4e00\u4e2a\u4ee3\u7801\uff1a\n\n```cpp\nint n,k,sum[31][2],p[31],pos[31];LL ans,c;\nint main()\n{\n\trint i,j;n=read();\n\tfor(i=1;i<=n;i++) {\n\t\tk=read(),c=1;\n\t\tfor(j=0;j<30;++j,c<<=1) {//pos\u8bb0\u5f55\u4e0a\u4e00\u4e2a1\u7684\u4f4d\u7f6e\uff0csum[_][0/1]\u8bb0\u5f55\u7ea2\u84dd\u8272\u533a\u95f4\u5206\u522b\u7684\u8de8\u5ea6\n\t\t\tif(k&c) p[j]^=1,sum[j][p[j]]+=i-pos[j],pos[j]=i;\n\t\t\tans+=sum[j][p[j]]*c;//\u7d2f\u52a0\u8d21\u732e\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n\n### more\n\n\u4f46\u662f\uff0c\u8fd8\u53ef\u4ee5\u4f18\u5316\uff0c\u7531\u4e8e\u505a\u5230 $1$ \u65f6\uff0c\u7ea2\u84dd\u8272\u533a\u95f4\u8de8\u5ea6\u4e4b\u548c\u5b9a\u7b49\u4e8e $i$\uff0c\u53c8\u505a\u5230 $0$ \u65f6\uff0c\u5bf9\u7ea2\u84dd\u8272\u533a\u95f4\u7684\u8de8\u5ea6\u65e0\u5f71\u54cd\uff0c\u56e0\u6b64\u53ef\u4ee5\u6539\u6210\uff1a\n\n```cpp\n\trint i,j;n=read();\n\tfor(i=1;i<=n;i++) {\n\t\tk=read(),c=1;\n\t\tfor(j=0;j<30;++j,c<<=1) {//\u7ea2\u84dd\u533a\u95f4\u7684\u8de8\u5ea6\u53ef\u4ee5\u7531\u53e6\u5916\u4e00\u4e2a\u63a8\u5f97\n\t\t\tif(k&c) sum[j]=i-sum[j];\n\t\t\tans+=sum[j]*c;\n\t\t}\n\t}\n```\n\n\u6216\u8005\u6211\u4eec\u8fd8\u53ef\u4ee5\u8fd9\u6837\u8003\u8651\uff1a\u7531\u4e8e\u5f02\u6216\u5177\u6709\u81ea\u53cd\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u8003\u8651\u62c6\u4f4d\u540e\u6c42\u51fa\u5f02\u6216\u524d\u7f00\uff0c\u8fd9\u6837\u7684\u8bdd\u6709\u8d21\u732e\u7684\u533a\u95f4\u5373\u4e3a $1$ \u7684\u4e2a\u6570\u4e0e $0$ \u7684\u4e2a\u6570\u4e4b\u79ef\n\n```cpp\nrint i,j;n=read();\nfor(i=1;i<=n;i++) {\n    k=read(),c=1;\n    for(j=0;j<30;++j,c<<=1)\n        p[j]^=k&c,++sum[j][p[j]];//\u5206\u522b\u5b58\u524d\u7f00\u5f02\u6216\uff0c\u4ee5\u53ca1\u548c0\u7684\u4e2a\u6570\n}\nfor(i=0,c=1;i<30;++i,c<<=1) ans+=sum[i][0]*sum[i][1]*c;\n```\n\n### warning\n\n$\\mathtt{non}$\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\n#define rgt register\n#define rint rgt int\n#define LL long long\n#define rll rgt LL\n#define inf 0x7f7f7f7f\nusing namespace std;\ntemplate<class K>inline bool cmax(K&a,const K&b){return (a<b)?a=b,1:0;}\ntemplate<class K>inline bool cmin(K&a,const K&b){return (a>b)?a=b,1:0;}\ninline int read() {\n\trint s=0;\n\trgt char c=getchar();\n\twhile(!isdigit(c)) c=getchar();\n\twhile(isdigit(c)) s=(s<<1)+(s<<3)+c-'0',c=getchar();\n\treturn s;\n}\nint n,k,sum[31];LL ans,c;\nint main()\n{\n\trint i,j;n=read();\n\tfor(i=1;i<=n;i++) {\n\t\tk=read(),c=1;\n\t\tfor(j=0;j<30;++j,c<<=1) {\n\t\t\tif(k&c) sum[j]=i-sum[j];\n\t\t\tans+=sum[j]*c;\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1572657013,
        "uid": 83564,
        "name": "hovny",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "woc \u4e00\u9053\u6c34\u9898\u6211\u5c45\u7136\u5199\u4e86\u9519\u8bef\u7684 trie  WA \u4e86 n \u6b21\uff01\n\n# noteskey\n\n\u5176\u5b9e\u8fd9\u9053\u9898\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651\u5f02\u6216\u7684 \u533a\u95f4\u53ef\u52a0\u3001\u53ef\u51cf\u6027 \u5c31\u597d\u4e86\uff0c\u628a $a[i] \u2a01a[i+1]\u2a01...\u2a01a[j]$ \u53d8\u6210 :\n\n$(a[1]\u2a01...\u2a01a[j])$\u2a01 $(a[1]\u2a01...\u2a01a[i-1])$ \n\n\u7136\u540e\u6211\u4eec\u6bcf\u6b21\u5904\u7406\u5230\u4e00\u4e2a $a[i]$ \u7684\u524d\u7f00\u548c\uff0c\u5c31\u53bb\u524d\u9762\u627e\u8d21\u732e\uff0c\u5206\u522b\u8003\u8651 30 \u4e2a\u4f4d\u7f6e\u6709\u591a\u5c11\u662f\u548c\u5f53\u524d\u7684\u524d\u7f00\u548c\u662f\u4e0d\u540c\u7684\uff0c\u52a0\u4e0a\u8d21\u732e\uff0c\u518d update \u5f53\u524d\u7684\u524d\u7f00\u548c\u5c31\u597d\u4e86\n\n\u6ce8\u610f\u4e00\u5f00\u59cb\u8981\u8ba9\u6240\u6709\u7684 $num[i][0]=1$\uff0c\u5c31\u5f53\u662f $a[0]$ \u7684\u524d\u7f00\u548c\u4e86\n\n\u5177\u4f53\u770b\u4ee3\u7801\u6bd4\u8f83\u6e05\u695a\n\n# code\n\n```\n//by Judge\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#define fp(i,a,b) for(register int i=(a),I=(b)+1;i<I;++i)\n#define ll long long\nusing namespace std;\nconst int M=3e6+3;\ntypedef int arr[M];\n#ifndef Judge\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\n#endif\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline bool cmax(int& a,int b){return a<b?a=b,1:0;}\ninline int read(){ int x=0,f=1; char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;\n} int n,d[33],a[M],num[33][2]; ll ans;\ninline void div(int x){\n\tfp(i,0,30) d[i]=x&1,x>>=1;\n}\ninline void update(int x){ div(x);\n\tfp(k,0,30) ++num[k][d[k]];\n}\ninline ll query(int x){ ll ans=0; div(x);\n\tfp(k,0,30) ans+=(1ll<<k)*num[k][d[k]^1]; return ans;\n}\nint main(){ n=read();\n\tfp(i,0,30) num[i][0]=1;\n\tfp(i,1,n) a[i]=read()^a[i-1],\n\t\tans+=query(a[i]),update(a[i]);\n\treturn !printf(\"%lld\\n\",ans);\n}\n```\n",
        "postTime": 1554646664,
        "uid": 38576,
        "name": "J\u03bcdge",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a\u5206\u6cbb\u505a\u6cd5\n\n\u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4$[l,r]$\uff0c\u7edf\u8ba1$mid=\\frac{l+r}{2}$\u5bf9\u5176\u7684\u8d21\u732e\n\n$1.l=r$ \u76f4\u63a5\u8fd4\u56de\u81ea\u8eab\u6743\u503c\n\n$2.r-l=1$ \u5373\u533a\u95f4\u957f\u5ea6\u4e3a2 \u76f4\u63a5\u8fd4\u56de$a[l]+ a[r] +(a[l] \\bigoplus a[r])$\n\n$3.l<mid<r$\n\n\n\u5f00\u4e00\u4e2a$cnt[30][0/1]$\u7684\u6876 \u8868\u793a\u6bcf\u4e00\u4f4d\u4e0a0/1\u7684\u4e2a\u6570\n\n\u7136\u540e\u628a$[l,mid-1]$\u7684\u6570\u4e22\u8fdb\u6876\u91cc\n\n\u7528$[mid,r]$\u7684\u6570\u4e00\u4e2a\u4e2a\u53bb\u67e5\u7d2f\u8ba1\u7b54\u6848\n\n\u67e5\u7684\u65b9\u6cd5\u5c31\u662f\u5047\u5982\u67e5\u8be2\u7684\u6570\u7684\u67d0\u4f4d\u4e0a\u662f1 \u5c31\u770b\u8fd9\u4f4d\u4e0a\u6709\u591a\u5c11\u4e2a0 \u53cd\u4e4b\u4e00\u6837 \u7136\u540e\u4e58\u4e0a\u8be5\u4f4d\u7684\u4f4d\u6743\n\n\u7136\u540e\u5f80\u4e0b\u5206\u6cbb$[l,mid-1],[mid+1,r]$\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(30n\\log n)$\n\n\u6bd4\u6b63\u5e38\u7684\u505a\u6cd5\u591a\u4e00\u4e2alog \u4f46\u662f\u80fd\u8fc7\u5c31\u884c\uff08\uff09\n\n```cpp\n#include<cstdio>\ntemplate<class type>inline const void read(type &in)\n{\n\tin=0;char ch(getchar());\n\twhile (ch<48||ch>57)ch=getchar();\n\twhile (ch>47&&ch<58)in=(in<<3)+(in<<1)+(ch&15),ch=getchar();\n}\ntypedef long long ll;\nconst int N(1e5+5);\nint n,a[N],cnt[30][2];\ninline const void insert(const int &x)\n{\n\tfor (int i(0);i<30;i++)cnt[i][(x>>i)&1]++;\n}\ninline const ll query(const int &x)\n{\n\tll sum(0);\n\tfor (int i(0);i<30;i++)sum+=(1ll<<i)*cnt[i][(x>>i)&1^1];\n\treturn sum;\n}\ninline const void clear()\n{\n\tfor (int i(0);i<30;i++)cnt[i][0]=cnt[i][1]=0;\n}\ninline const ll divide(const int &l,const int &r)\n{\n\tif (l==r)return a[l];\n\tconst int mid(l+r>>1);\n\tif (l==mid||r==mid)return a[l]+a[r]+(a[l]^a[r]);\n\tfor (int sum(0),i(mid-1);i>=l;i--)insert(sum^=a[i]);\n\tinsert(0);ll ret(0);\n\tfor (int sum(0),i(mid);i<=r;i++)ret+=query(sum^=a[i]);\n\tclear();\n\treturn ret+divide(l,mid-1)+divide(mid+1,r);\n}\nint main()\n{\n\tread(n);\n\tfor (int i(1);i<=n;i++)read(a[i]);\n\tprintf(\"%lld\\n\",divide(1,n));\n\treturn 0;\n}\n```",
        "postTime": 1596360657,
        "uid": 14374,
        "name": "zhengrunzhe",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    },
    {
        "content": "\u8bf4\u53e5\u9898\u5916\u8bdd\uff0c\u5927\u4f6c\u4eec\u7684\u505a\u6cd5\u8f6c\u5316\u6210\u4e8c\u8fdb\u5236\uff0c\u6bcf\u4e00\u4f4d\u90fd\u8003\u8651\u592a\u590d\u6742\u4e86\uff0c\u4f30\u8ba1\u770b\u61c2\u7684\u4e0d\u591a\uff08\u53cd\u6b63\u6211\u662f\u770b\u4e0d\u61c2\uff09\uff0c\u4e8e\u662f\u5c31\u8d34\u4e00\u4efd60\u5206\u7684\u601d\u8def\uff08\u52a0\u4ee3\u7801\uff09\uff0c\u5e2e\u52a9\u5927\u5bb6\uff08\u4e5f\u5c31\u662f\u6211\u4e00\u822c\u7684\u9009\u624b\uff09\u7406\u89e3\uff0c\u6709\u5728\u6b64\u57fa\u7840\u4e0a\u4f1a\u4f18\u5316\u7684\u5927\u4f6c\u53ef\u4ee5\u6559\u6559\u6211\uff08\u6c42\u8fc7\u3002\u3002\u3002\u3002\u3002\u3002\uff09\n#\u601d\u8def\uff1a\u7528\u524d\u7f00\u6570\u7ec4A[]\u4f18\u5316\u4e00\u4e0b\uff0c\u524d\u7f00\u6570\u7ec4A[i]\u8bb0\u5f55\u7684\u662fA[1]xorA[2]xor....xorA[i],\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u8fd9\u6837\u4e00\u79cd\u505a\u6cd5\uff0c\u5c31\u662f\u5982\u4f55\u5229\u7528\u524d\u7f00\u6570\u7ec4\u8fdb\u884c\u4e00\u6bb5xor\u548c\u7684\u8ba1\u7b97\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u6837\u4e00\u4e2a\u6027\u8d28\uff0c\u5df2\u77e5xor\u8fd0\u7b97\u6ee1\u8db3\u4ea4\u6362\u5f8b\u4e0e\u7ed3\u5408\u5f8b\uff0c\u4e14\n###x xor x = 0;\n\u90a3\u4e48\u4ecei\u5230j\u7684xor\u548c\u5c31\u53ef\u4ee5\u8fd9\u6837\u6c42\uff1aans=A[j] xor A[i-1];\n\u6bcf\u6b21\u8f93\u5165\u540e\u679a\u4e3e\u524d\u9762\u7684A\u6570\u7ec4\u5373\u53ef\u3002\n\u5373,\u6838\u5fc3\u4ee3\u7801\u5982\u4e0b\n```\nfor(int i=1;i<=n;i++){\n\t\tx=read();A[i]=(ll)x;\n\t\tA[i]^=A[i-1];\n\t\tfor(int j=0;j<i;j++) ans+=(A[i]^A[j]);\n\t}\n```\n\u5168\u4ee3\u7801\u5982\u4e0b\uff1a\n```\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#define ll long long\nusing namespace std;\nint n,x;\nll A[100005],ans;\ninline int read(){//\u5feb\u8bfb\uff0c\u5bf9\u8fd9\u9898\u6ca1\u5565\u7528\uff0c\u8be5\u6302\u7684\u8fd8\u662f\u6302\uff0c\u6ca1\u5565\u533a\u522b\uff08\u522b\u95ee\u6211\u4e3a\u5565\uff0c\u6211\u8bd5\u8fc7\u4e86\u5566\uff09\n\tregister int x=0;\n\tregister bool flag=true;\n\tregister char k=getchar();\n\twhile(!isdigit(k)){\n\t\tif(k=='-') flag=false;\n\t\tk=getchar();\n\t}\n\twhile(isdigit(k)){\n\t\tx=x*10+k-'0';\n\t\tk=getchar();\n\t}\n\treturn flag?x:-x;\n}\nint main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++){\n\t\tx=read();A[i]=(ll)x;//\u8f93\u5165\uff0c\u5b58\u5165\n\t\tA[i]^=A[i-1];//\u6c42\u524d\u7f00\u6309\u4f4d\u5f02\u6216\u548c\n\t\tfor(int j=0;j<i;j++) ans+=(A[i]^A[j]);//\u6838\u5fc3\uff0c\u4e0a\u8fb9\u7ed9\u51fa\u4e86\u8bc1\u660e\uff0c\u5229\u7528\u4e86\u4e00\u4e2a\u6027\u8d28\uff0c\u679a\u4e3e\u6c42\u548c\u5373\u53ef\uff0c\u975e\u5e38\u7b80\u5355\u6613\u61c2\u554a\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n\u6709\u4f18\u5316\u8bf7\u6559\u6559\u6211\uff0c\u591a\u591a\u6307\u6559\uff0c\u6211\u76ee\u524d\u53ea\u80fd\u505a\u5230\u8fd9\u4e00\u6b65",
        "postTime": 1534424071,
        "uid": 55949,
        "name": "\u8046\u96e8\u6ce3",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3917 \u3010\u5f02\u6216\u5e8f\u5217\u3011"
    }
]
[
    {
        "content": "\n------------\n\n\n### WARNING\n\n\u5982\u679c\u60f3\u597d\u597d\u7ec3\u4e60\u5b57\u7b26\u4e32,\u8bf7\u8ba4\u771f\u63a8\u6572,\u7528\u4ee3\u7801\u53bb\u6a21\u62df,\u4e0d\u8981\u9a97\u5206\n\n~~(\u597d\u5427,\u6570\u636e\u6709\u70b9\u5c0f\u95ee\u9898,\u8981\u7279\u5224\u4e00\u4e0b)~~\n\n\n------------\n\n\n## \u601d\u8def\n\n\u548c[P1981](https://www.luogu.org/problemnew/show/1981)\u6709\u7740\u5f02\u66f2\u540c\u5de5\u4e4b\u5999,\u6682\u4e14\u628a\u5b83\u770b\u505a\u4e00\u4e2a\u8fd0\u7b97\u5f0f\u5904\u7406(\u5177\u4f53\u89c1[\u6211\u7684\u535a\u5ba2](https://www.luogu.org/blog/STO-M-sea-orz/luo-gu-1981-biao-da-shi-qiu-zhi)).\n\n\u4f46\u662f\u8fd9\u91cc\u662f\u591a\u9879\u5f0f\u8fd0\u7b97.\u6240\u4ee5\u6211\u4eec\u7528\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u5b58\u50a8\u6bcf\u4e00\u4e2a\u5355\u9879\u5f0f,\u7528\u4e00\u4e2a\u4e0b\u6807\u4ece1\u523026\u7684\u6570\u7ec4\u8868\u793aa,b...z\u7684\u6307\u6570(\u6570\u7ec4\u7b2c0\u4f4d\u5b58\u50a8\u5355\u9879\u5f0f\u524d\u9762\u7684\u7cfb\u6570)(\u5b57\u7b26\u4e32\u7684\u4f5c\u7528\u540e\u9762\u8bb2).\n\n\u9012\u5f52\u5b57\u7b26\u4e32,\u4ee5\u7b26\u53f7\u4e3a\u754c\u5206\u6210\u4e24\u534a,\u5904\u7406\u51fa\u591a\u9879\u5f0f\u540e\u8fdb\u884c\u8fd0\u7b97.\u82e5\u4e3a\u52a0,\u5219\u628a\u4e24\u4e2a\u5f0f\u5b50(\u6570\u7ec4)\u5408\u5e76\u5728\u4e00\u8d77;\u82e5\u4e3a\u51cf,\u5219\u52a0\u4e0a\u7b2c\u4e00\u4e2a\u5f0f\u5b50,\u548c\u7cfb\u6570\u76f8\u53cd\u7684\u7b2c\u4e8c\u4e2a\u5f0f\u5b50;\u82e5\u4e3a\u4e58,\u5219\u628a\u6bcf\u4e00\u9879\"\u4e58\"\u8d77\u6765(\u5177\u4f53\u770b\u4ee3\u7801).\u8f93\u51fa\u7684\u65f6\u5019\u5c31\u6392\u4e2a\u5e8f,\u53bb\u91cd\u8f93\u51fa(\u5408\u5e76\u540c\u7c7b\u9879)\n\n\n------------\n\n\n####code\n\n```cpp\n//\u6ce8:\u6b64\u4ee3\u7801\u5728linux\u4e0b\u7684emacs\u5199\u6210,\u683c\u5f0f\u4e11\u8f7b\u55b7\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<cmath>\n#include<cstdlib>\n#include<algorithm>\nusing namespace std;\nstruct nn\n{\n  int a[27];char zz[30];int x;\n  nn(){memset(a,0,sizeof(a));x=0;}\n}z[10000];    //\u89e3\u91ca\u4e00\u4e0b:a\u5b58\u6bcf\u4e2a\u5b57\u6bcd\u7684\u6307\u6570\u548c\u524d\u9762\u7684\u7cfb\u6570,zz\u7528\u6765\u6392\u5e8f,\u628aa\u8f6c\u6210\u5b57\u7b26\u4e32,x\u4e3a\u5b57\u7b26\u4e32\u4e2a\u6570\nchar cc[300];\nint l;\ninline nn getss(int l,int r)    //\u628a\u5355\u9879\u5f0f\u53d6\u51fa\u6765\n{\n  nn a;int i=l;int xx=0,yy=1,zz=1;\n  if(cc[i]=='-') zz=-1,i++;    //zz\u5224\u7b26\u53f7\n  while(i<=r&&(cc[i]>=48&&cc[i]<=57)) {xx*=10;xx+=cc[i]-48;i++;}    //\u628a\u7cfb\u6570\u5904\u7406\u51fa\u6765(\u8003\u8651\u8d1f\u6570)\n  xx=max(xx,1);    //\u5224\u524d\u9762\u6ca1\u6570\u5b57(\u7cfb\u6570\u4e3a\u00b11)\n  a.a[0]=zz*xx;xx=0;\n  while(i<=r)\n    {\n      if(cc[i]>=97) {xx=cc[i]-96;yy=1;}    //\u628a\u5b57\u6bcd\u53d6\u51fa\u6765\n      else\n    {\n      yy=0;i++;\n      while(l<=r&&(cc[i]>=48&&cc[i]<=57)) {yy*=10;yy+=cc[i]-48;i++;}\n      i--;    //\u628a\u5b57\u6bcd\u6307\u6570\u53d6\u51fa\u6765\n    }\n        a.a[xx]=yy;    //\u5b58\u5230\u6570\u7ec4\u91cc\n    i++;\n    }\n  return a;\n}\ninline int findd(int l,int r)    //\u627e\u7b26\u53f7(+ - \u00d7) \u8fd4\u56de\u4e0b\u6807\n{\n  int xx=-1,zzz=0,yyy=0;\n  for(int i=r;i>=l;i--)\n    {\n      if(!zzz&&cc[i]=='+') return i;    //\u627e\u5230\u52a0\u53f7\u76f4\u63a5\u9000\u51fa\u53bb\n      else if(!zzz&&cc[i]=='-'&&cc[i-1]!='('&&cc[i-1]!='[') return i;    //\u627e\u5230\u51cf\u53f7(\u4e0d\u662f\u8d1f\u53f7)\u9000\u51fa\u53bb\n      else if(!zzz&&!yyy&&cc[i]=='*') {xx=i;yyy=999;}    //\u627e\u5230\u4e58\u53f7\u5148\u8bb0\u5f55\n      else if(cc[i]=='('||cc[i]=='[') zzz--;\n      else if(cc[i]==')'||cc[i]==']') zzz++;    //\u662f\u5426\u5728\u62ec\u53f7\u5185(zzz==0\u5728\u62ec\u53f7\u5916)\n    }\n  return xx;\n}\ninline int ys(int l,int r,nn a[])    //\u5904\u7406\u51fd\u6570\u8fd4\u56de\u591a\u9879\u5f0f\u7684\u9879\u6570\n{\n  int jj=0;\n  int mid=findd(l,r);    //\u53d6\u7b26\u53f7\n  if(mid==-1)    //\u6ca1\u7b26\u53f7\n    {\n      if((cc[l]=='('&&cc[r]==')')||(cc[l]=='['&&cc[r]==']')) return ys(l+1,r-1,a);    //\u53bb\u62ec\u53f7(\u4e00\u5b9a\u8981\u653e\u5728\u6b64\u5904!!!)\n      a[++jj]=getss(l,r);\n      return jj;    //\u53d6\u51fa\u5355\u9879\u5f0f\n    }\n  nn b[100],c[100];\n  int nb=ys(l,mid-1,b);\n  int nc=ys(mid+1,r,c);    //\u628a\u4e24\u8fb9\u7684\u5355\u9879\u5f0f\u53d6\u51fa\u6765\n  if(cc[mid]=='+')\n    {\n      int na=nb+nc;\n      for(int i=1;i<=nb;i++) a[i]=b[i];\n      for(int j=1;j<=nc;j++) a[j+nb]=c[j];\n      return na;    //\u52a0\u6cd5\n    }\n  else if(cc[mid]=='-')\n    {\n      int na=nb+nc;\n      for(int i=1;i<=nb;i++) a[i]=b[i];\n      for(int j=1;j<=nc;j++) {a[j+nb]=c[j];a[j+nb].a[0]=-a[j+nb].a[0];}\n      return na;    //\u51cf\u6cd5(\u52a0\u4e0a\u7cfb\u6570\u4e3a\u8d1f\u7684\u540e\u4e00\u534a\u5f0f\u5b50)\n    }\n  else\n    {\n      int na=nb*nc;\n      for(int i=1;i<=nb;i++)\n    for(int j=1;j<=nc;j++)\n      {\n        for(int k=1;k<=26;k++) a[i*nc-nc+j].a[k]=b[i].a[k]+c[j].a[k];\n        a[i*nc-nc+j].a[0]=b[i].a[0]*c[j].a[0];    //\u4e58\u6cd5(\u6307\u6570\u76f8\u52a0,\u7cfb\u6570\u76f8\u4e58)\n      }\n      return na;    }\n}\ninline int ccmp(nn a,nn b) {return strcmp(a.zz,b.zz)<0;}    //\u6392\u5e8f(\u5b57\u5178\u5e8f)\nint main()\n{\n  freopen(\"xzz.in\",\"r\",stdin);\n  freopen(\"xzz.out\",\"w\",stdout);\n  scanf(\"%s\",cc);\n  bool first=true;\n  int len=strlen(cc);\n  int tot=ys(0,len-1,z);\n  for(int i=1;i<=tot;i++)\n    for(int j=1;j<=26;j++)      \n      for(int k=1;k<=z[i].a[j];k++)\n        z[i].zz[z[i].x++]=j+96;    //\u628a\u91cc\u9762\u7684a\u6570\u7ec4\u8f6c\u4e3a\u5b57\u7b26\u4e32(For example   a[1]==1,a[3]==2,a[4]==1  zz=\"accd\")\n  sort(z+1,z+tot+1,ccmp);\n  for(int i=1;i<=tot;i++)\n    if(strcmp(z[i].zz,z[i+1].zz)==0) z[i+1].a[0]+=z[i].a[0];    //\u82e5\u8fd9\u4e00\u9879\u4e0e\u540e\u4e00\u9879\u4e3a\u540c\u7c7b\u9879,\u5219\u628a\u7cfb\u6570\u52a0\u7ed9\u540e\u4e00\u9879\n    else\n      {\n    if((z[i+1].a[6]==1&&z[i+1].a[26]==1)||(z[i+1].a[4]==1&&z[i+1].a[6]==1&&z[i].a[4]==1&&z[i].a[5]==1)) swap(z[i+1],z[i]);     //\u7279\u5224(emmm)\n    if(z[i].a[0]==0) continue;    //\u7cfb\u6570\u4e3a0\n    if(z[i].a[0]<0) printf(\"-\");    //\u7cfb\u6570\u4e3a\u8d1f\n    else if(!first) printf(\"+\");    //\u7cfb\u6570\u4e3a\u6b63(\u7b2c\u4e00\u9879\u4e0d\u8f93\u51fa'+')\n    first=false;\n    if(abs(z[i].a[0])!=1) printf(\"%d\",abs(z[i].a[0]));    //\u7cfb\u6570\u7edd\u5bf9\u503c\u4e0d\u552f\u4e00\u5c31\u8f93\u51fa\n    for(int j=1;j<=26;j++)\n      if(z[i].a[j])\n        {\n          printf(\"%c\",j+96);\n          if(z[i].a[j]>1) printf(\"^%d\",z[i].a[j]);    //\u8f93\u51fa\u540e\u9762\u7684\u5b57\u6bcd(\u5e26'^'\u54e6)\n        }\n      }\n  return 0;\n}\n\n```\n\n------------\n\n",
        "postTime": 1515422636,
        "uid": 38372,
        "name": "star_magic_young",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2379 \u3010\u6574\u5f0f\u7684\u8ba1\u7b97\u3011"
    },
    {
        "content": "### \u4e00\u3001\u62c6\u5206\u591a\u9879\u5f0f\n\n\u6574\u5f0f\u8ba1\u7b97\u5373\u4e3a\u5355\u9879\u5f0f\u7684\u8fd0\u7b97\uff0c\u4e0d\u540c\u7684\u5355\u9879\u5f0f\u7d2f\u52a0\u5f97\u5230\u591a\u9879\u5f0f\uff0c\u6bcf\u4e2a\u5355\u9879\u5f0f\u53ef\u4ee5\u770b\u4e3a\u542b\u4e09\u4e2a\u5143\u7d20\u7684\u7ed3\u6784\u4f53\uff1a\u7cfb\u6570\u3001\u53d8\u91cf\u548c\u53d8\u91cf\u7684\u6307\u6570\u3002\n\n\u53d8\u91cf\u53ea\u5305\u62ec  _a_  \u5230 _z_  26 \u4e2a\u5c0f\u5199\u5b57\u6bcd\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f00\u6570\u7ec4\u5b58\u50a8\u3002\n\n------------\n\n\n### \u4e8c\u3001\u8ba1\u7b97\uff1a\n\n\u4e09\u7c7b\u8fd0\u7b97\u7b26:\n\n1. \u62ec\u53f7\uff1a\u5904\u7406\u65b9\u6cd5\u5373\u4e3a\u5de6\u62ec\u53f7\u6682\u5b58\uff0c\u8fed\u4ee3\u81f3\u53f3\u62ec\u53f7\u65f6\u5012\u56de\u53bb\u8fd0\u7b97\u81f3\u5de6\u62ec\u53f7\u3002\n\n2. \u4e58\u6cd5\uff1a\u6709\u4e86\u62ec\u53f7\u5904\u7406\u7684\u4fdd\u8bc1\uff0c\u4e58\u6cd5\u8fd0\u7b97\u4f18\u5148\u7ea7\u6700\u9ad8\uff0c\u8fed\u4ee3\u81f3\u4e58\u6cd5\u65f6\u76f4\u63a5\u53d6\u5de6\u53f3\u5143\u7d20\u8fdb\u884c\u8fd0\u7b97\n\n3. \u52a0\u6cd5\uff0c\u51cf\u6cd5\uff1a\u51cf\u6cd5\u5bf9\u5355\u9879\u5f0f\u7cfb\u6570\u53d6\u76f8\u53cd\u6570\u540e\uff0c\u5373\u4e0e\u52a0\u6cd5\u7edf\u4e00\u3002\u8fd9\u4e00\u7ea7\u8fd0\u7b97\u53ea\u9700\u5408\u5e76\u540c\u7c7b\u9879\u3002\u7531\u4e8e\u4f18\u5148\u7ea7\u4f4e\u4e8e\u4e58\u6cd5\uff0c\u56e0\u6b64\u9700\u8981\u5148\u5904\u7406\u5b8c\u4e58\u6cd5\u540e\u518d\u8fd0\u7b97\u3002\n\n------------\n\n### \u4e09\u3001\u5751\uff1a\n\n\u201d\u6bcf\u4e2a\u56e0\u5f0f\u6309\u5b57\u5178\u5e8f\u6392\u5217\u3002\u201d\n\n\u8fd9\u9053\u9898\u5355\u9879\u5f0f\u4e4b\u95f4\u5e76\u4e0d\u9700\u8981\u6392\u5e8f\u3002\u6392\u5e8f\uff0c\u6307\u5355\u9879\u5f0f\u5185\u90e8\u4ece  _a_  \u5230  _z_  \u8f93\u51fa\u3002\n\u5bf9\u4e8e\u5355\u9879\u5f0f\u4e4b\u95f4\u7684\u987a\u5e8f\uff0c\u5982 **(\u2460+\u2461)\\*(\u2462+\u2463)+\u2464** \u3002\n\n\u8f93\u51fa\u4e3a **\u2460\u2462+\u2460\u2463+\u2461\u2462+\u2461\u2463+\u2464** \u3002\n\n------------\n\n\u4ee3\u7801\u5982\u4e0b:(\u672a\u538b\u884c\u5bfc\u81f4\u957f\u5ea6\u60ca\u4eba)\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n\nusing namespace std;\n\nstruct expression\n{\n\tint n;//\u82e5\u4e3a\u5e38\u6570\uff0c\u5b58\u50a8\u5176\u5927\u5c0f\uff0c\u5426\u5219\u4e3a\u5355\u9879\u5f0f\u7684\u7cfb\u6570 \n\t\n\tbool ch[26];//\u8868\u793a\u53d8\u91cf'a' + i\u662f\u5426\u51fa\u73b0 \n\tint pow[26];//\u53d8\u91cf'a' + i\u7684\u6307\u6570 \n};\n\nchar op[283];//\u5b58\u7b26\u53f7\u6808 \nint top_op;\n\nexpression num[283][283];//\u4e00\u4e2a\u591a\u9879\u5f0f\u7531\u591a\u4e2a\u5355\u9879\u5f0f\u7ec4\u6210\uff0c\u4e00\u4e2a\u5f0f\u5b50\u7531\u591a\u4e2a\u591a\u9879\u5f0f\u7ec4\u6210 \nint maxn[283];\n//maxn[x] \uff1a\u591a\u9879\u5f0fx\u7684\u9879\u6570 \nint top_num = 1;//\u9632\u6b62\u5f00\u5934\u7cfb\u6570\u4e3a\u8d1f\u6570\n\nexpression t, l1[283], l2[283], l3[283], l4[283];\nint max1, max2, max3, max4;\n\nchar s[283];\nint pos;\nint len;\n\ninline bool same(expression a, expression b);//\u5224\u65ad\u76f8\u540c\uff0c\u7528\u4e8e\u5408\u5e76\u540c\u7c7b\u9879 \ninline bool operate(char ch);//\u5224\u65ad\u662f\u5426\u4e3a\u64cd\u4f5c\u7b26 \n\nint Read();//\u63d0\u53d6\u6570\u5b57\uff08\u7cfb\u6570\uff09 \nvoid get_ex();//\u63d0\u53d6\u5355\u9879\u5f0f \n\nvoid Plus(expression a[], expression b[], int &maxa, int &maxb);//\u591a\u9879\u5f0f\u52a0\u6cd5\u8fd0\u7b97 \nvoid add(int key);//\u5904\u7406\u52a0\u6cd5\u51cf\u6cd5\uff0c\u7edf\u4e00\u8f6c\u5316\u4e3a\u52a0\u6cd5 \n//key == 1\u8868\u793a\u52a0\u6cd5\uff0c-1\u4e3a\u51cf\u6cd5 \nvoid mul();//\u4e58\u6cd5 \n\nvoid output(expression a[], int maxa);//\u8f93\u51fa \n\nint main()\n{\n\tint i, j;\n\t\n\tscanf(\"%s\", s);\n\tlen = strlen(s);\n\t//\u8bfb\u5165\u6574\u4e2a\u5f0f\u5b50 \n\t\n\tfor (pos=0; pos < len; )\n\t{\n\t\tif (!operate(s[pos]))//\u975e\u7b26\u53f7 \n\t\t{\n\t\t\tmemset(&t, 0, sizeof(t));\n\t\t\tif ('0' <= s[pos] && s[pos] <= '9')\n\t\t\t{\n\t\t\t\tt.n = Read();\n\t\t\t}\n\t\t\tif ('a' <= s[pos] && s[pos] <= 'z')\n\t\t\t{\n\t\t\t\tget_ex();\n\t\t\t}\n\t\t\t\n\t\t\tif (t.n == 0)\n\t\t\t{\n\t\t\t\tt.n = 1;\n\t\t\t}\n\t\t\t\n\t\t\tnum[top_num][0] = t;\n\t\t\tmaxn[top_num] = 1;\n\t\t\ttop_num++;\n\t\t\t\n\t\t\tif (top_op > 0)\n\t\t\t{\n\t\t\t\tif (op[top_op - 1] == '*')\n\t\t\t\t{\n\t\t\t\t\ttop_op--;\n\t\t\t\t\tmul();\n\t\t\t\t}\n\t\t\t}//\u4e58\u6cd5\u4f18\u5148\u5ea6\u6700\u9ad8\uff0c\u76f4\u63a5\u5904\u7406 \n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (s[pos] == '(' || s[pos] == '[')\n\t\t\t{\n\t\t\t\top[top_op++] = s[pos];\n\t\t\t}\n\t\t\tif (s[pos] == ')')//\u62ec\u53f7\u5185\u5148\u8fdb\u884c\u5904\u7406 \n\t\t\t{\n\t\t\t\twhile (op[top_op - 1] != '(')\n\t\t\t\t{\n\t\t\t\t\ttop_op--;\n\t\t\t\t\tif (op[top_op] == '+')\n\t\t\t\t\t{\n\t\t\t\t\t\tadd(1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (op[top_op] == '-')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tadd(-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttop_op--;\n\t\t\t\t\n\t\t\t\tif (top_op > 0)\n\t\t\t\t{\n\t\t\t\t\tif (op[top_op - 1] == '*')\n\t\t\t\t\t{\n\t\t\t\t\t\ttop_op--;\n\t\t\t\t\t\tmul();\n\t\t\t\t\t}\n\t\t\t\t}//\u8865\u8db3\u63aa\u65bd \n\t\t\t}\n\t\t\tif (s[pos] == ']')\n\t\t\t{\n\t\t\t\twhile (op[top_op - 1] != '[')\n\t\t\t\t{\n\t\t\t\t\ttop_op--;\n\t\t\t\t\tif (op[top_op] == '+')\n\t\t\t\t\t{\n\t\t\t\t\t\tadd(1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (op[top_op] == '-')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tadd(-1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttop_op--;\n\t\t\t\t\n\t\t\t\tif (top_op > 0)\n\t\t\t\t{\n\t\t\t\t\tif (op[top_op - 1] == '*')\n\t\t\t\t\t{\n\t\t\t\t\t\ttop_op--;\n\t\t\t\t\t\tmul();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (s[pos] == '+' || s[pos] == '-' || s[pos] == '*')\n\t\t\t{\n\t\t\t\top[top_op++] = s[pos];\n\t\t\t}\n\t\t\tpos++;\n\t\t}\n\t}\n\t\n\twhile (top_op > 0)\n\t{\n\t\ttop_op--;\n\t\tif (op[top_op] == '+')\n\t\t{\n\t\t\tadd(1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (op[top_op] == '-')\n\t\t\t{\n\t\t\t\tadd(-1);\n\t\t\t}\n\t\t}\n\t}//\u5904\u7406\u5b8c\u4e58\u6cd5\u53ca\u62ec\u53f7\u540e\uff0c\u53ea\u5269\u4e0b\u4f18\u5148\u7ea7\u76f8\u540c\u7684\u52a0\u51cf\u6cd5 \n\t\n\ttop_num--;\n\toutput(num[top_num], maxn[top_num]);\n\t\n\treturn 0;\n}\n\ninline bool same(expression a, expression b)\n{\n\tint i, j;\n\t\n\tfor (i=0; i<26; i++)//\u540c\u7c7b\u9879\uff1a\u5404\u53d8\u91cf\u7cfb\u6570\u76f8\u540c \n\t{\n\t\tif ((a.ch[i] ^ b.ch[i]) != 0 || a.pow[i] != b.pow[i])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\treturn true;\n}\n\ninline bool operate(char ch)\n{\n\tif (ch == '(' || ch == ')' || ch == '[' || ch == ']' || \n\t\tch == '+' || ch == '-' || ch == '*')\n\t{\n\t\treturn true;\n\t}\n\t\n\treturn false;\n}\n\nint Read()\n{\n\tint p = 0;\n\tchar c = s[pos];\n\t\n\twhile ('0' <= s[pos] && s[pos] <= '9')\n\t{\n\t\tp = (p << 3) + (p << 1) + (c & 15);\n\t\tpos++;\n\t\tc = s[pos];\n\t}\n\t\n\treturn p;\n}\n\nvoid get_ex()\n{\n\tint x;\n\t\n\twhile (!operate(s[pos]) && pos < len)\n\t{\n\t\tif ('a' <= s[pos] && s[pos] <= 'z')\n\t\t{\n\t\t\tx = s[pos] - 'a';\n\t\t\tt.ch[x] = true;\n\t\t\tt.pow[x] = 1;\n\t\t\t\n\t\t\tpos++;\n\t\t\tcontinue;\n\t\t}//\u53d8\u91cf\u540d \n\t\tif (s[pos] == '^')\n\t\t{\n\t\t\tpos++;\n\t\t\tt.pow[x] = Read();\n\t\t\t\n\t\t\tcontinue;\n\t\t}//\u6307\u6570 \n\t}\n}\n\nvoid Plus(expression a[], expression b[], int &maxa, int &maxb)\n{\n\tint i, j;\n\t\n\tfor (i=0; i<maxa; i++)\n\t{\n\t\tfor (j=0; j<maxb; j++)\n\t\t{\n\t\t\tif (same(a[i], b[j]) == true)\n\t\t\t{\n\t\t\t\tb[j].n += a[i].n;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}//\u76f8\u540c\u5219\u5408\u5e76\u540c\u7c7b\u9879 \n\t\t\n\t\tif (j == maxb)\n\t\t{\n\t\t\tmaxb++;\n\t\t\t\n\t\t\tb[j] = a[i];\n\t\t}//\u5426\u5219\u5e76\u5728\u540e\u9762\u5373\u53ef \n\t}\n\t\n\treturn;\n}\n\nvoid add(int key)\n{\n\tint i, j;\n\t\n\ttop_num--;\n\tmemcpy(l1, num[top_num], sizeof(num[top_num]));\n\tmax1 = maxn[top_num];\n\ttop_num--;\n\tmemcpy(l2, num[top_num], sizeof(num[top_num]));\n\tmax2 = maxn[top_num];\n\t\n\tfor (j=0; j<max1; j++)\n\t{\n\t\tl1[j].n = key * l1[j].n;\n\t}//\u7edf\u4e00 \n\t\n\tPlus(l1, l2, max1, max2);\n\t\n\tmemcpy(num[top_num], l2, sizeof(l2));\n\tmaxn[top_num] = max2;\n\ttop_num++;\n\t\n\treturn;\n}\n\nvoid mul()\n{\n\tint i, j, k;\n\t\n\ttop_num--;\n\tmemcpy(l2, num[top_num], sizeof(num[top_num]));\n\tmax2 = maxn[top_num];\n\ttop_num--;\n\tmemcpy(l1, num[top_num], sizeof(num[top_num]));\n\tmax1 = maxn[top_num];\n\t\n\tmax4 = 0;\n\t\n\tfor (i=0; i<max1; i++)\n\t{\n\t\tfor (j=0; j<max2; j++)\n\t\t{\n\t\t\tl3[j].n = l1[i].n * l2[j].n;\n\t\t\tfor (k=0; k<26; k++)\n\t\t\t{\n\t\t\t\tl3[j].ch[k] = l1[i].ch[k] | l2[j].ch[k];\n\t\t\t\tl3[j].pow[k] = l1[i].pow[k] + l2[j].pow[k];\n\t\t\t}\n\t\t}\n\t\tPlus(l3, l4, max2, max4);\n\t}\n\t//\u5904\u7406\u65b9\u6cd5\u4fdd\u8bc1\u6ee1\u8db3\u6392\u5e8f\u8981\u6c42 \n\t//\u7c7b\u4f3c\u9ad8\u7cbe\u5ea6\u52a0\u6cd5\u7684\u5904\u7406\u65b9\u6cd5 \n\t\n\tmemcpy(num[top_num], l4, sizeof(l4));\n\tmaxn[top_num] = max4;\n\ttop_num++;\n\t\n\treturn;\n}\n\nvoid output(expression a[], int maxa)\n{\n\tint i, j;\n\t\n\tfor (i=0; i<maxa; i++)\n\t{\n\t\tif (a[i].n != 0)\n\t\t//\u5355\u9879\u5f0f\u5b58\u5728\u7684\u6761\u4ef6\uff1a\u7cfb\u6570\u4e0d\u4e3a0 \n\t\t{\n\t\t\tif (a[i].n > 0 && i > 0)\n\t\t\t{\n\t\t\t\tprintf(\"+\");\n\t\t\t}\n\t\t\tif (a[i].n == -1)\n\t\t\t{\n\t\t\t\tprintf(\"-\");\n\t\t\t}\n\t\t\tif (a[i].n > 1 || a[i].n < -1)\n\t\t\t{\n\t\t\t\tprintf(\"%d\", a[i].n);\n\t\t\t}\n\t\t\t\n\t\t\tfor (j=0; j<26; j++)\n\t\t\t{\n\t\t\t\tif (a[i].ch[j] == true)\n\t\t\t\t{\n\t\t\t\t\tprintf(\"%c\", j + 'a');\n\t\t\t\t\tif (a[i].pow[j] > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tprintf(\"^%d\", a[i].pow[j]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn;\n}\n```",
        "postTime": 1646214681,
        "uid": 302391,
        "name": "FMDD61",
        "ccfLevel": 0,
        "title": "P2379\u9898\u89e3"
    }
]
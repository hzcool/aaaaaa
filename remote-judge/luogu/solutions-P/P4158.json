[
    {
        "content": "\u660e\u663e\u662f\u4e00\u4e2adp\n\n \n\n\u5b9a\u4e49\u4e00\u4e2a f[i][j]\u7684\u6570\u7ec4\u6765\u8868\u793a\u524di\u6761\u6728\u677f\u7c89\u5237j\u6b21\u7684\u60c5\u51b5\u4e0b\u80fd\u6b63\u786e\u7c89\u5237\u7684\u6700\u5927\u683c\u5b50\u6570\n\n\u5b9a\u4e49\u4e00\u4e2ag[i][j][k]\u6765\u8868\u793a\u7b2ci\u6761\u6728\u677f\u4e0a\u7c89\u5237j\u6b21\u6d82\u4e86\u524dk\u4e2a\u683c\u5b50\u7684\u60c5\u51b5\u4e0b\u80fd\u6b63\u786e\u7c89\u5237\u7684\u6700\u5927\u683c\u5b50\u6570\n\n\u7528sum\u6570\u7ec4\u6765\u8bb0\u5f55\u84dd\u8272\u683c\u5b50\u6570 \u67d0\u4e2a\u533a\u95f4\u7684\u683c\u5b50\u6570\u51cf\u53bb\u84dd\u8272\u683c\u5b50\u6570\u5c31\u662f\u7c89\u8272\u683c\u5b50\u6570\uff08\u7528\u524d\u7f00\u548c\u6765\u8bb0\u5f55\uff09\n\n\u8981\u662f\u6c42\u6700\u5927\u7684\u683c\u5b50\u6570 \u90a3\u4e48\u5c31\u8981\u6c42\u4e00\u4e2am\u4f7f\u5f97 \n```cpp\n  f[i][j]=max(f[i][j],f[i-1][j-k]+g[i][k][m])\n```\n\n\u7528\u4e00\u4e2a\u533a\u95f4\u6765\u60f3\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u6c42g[i][j][k]\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e86\u8fd8\u662f\u5f88\u597d\u60f3\u7684\n\n\u524dq\u4e2a\u683c\u5b50\u7c89\u5237\u6b63\u786e\u52a0\u4e0a\u4e0b\u4e00\u6b65\u7c89\u5237\u6b63\u786e\u7684\u7c89\u8272\u683c\u5b50\u591a\u8fd8\u662f\u84dd\u8272\u683c\u5b50\u591a\n\n\u6709\n```cpp\ng[i][j][k]=max(g[i][j][k],g[i][j-1][q]+max(sum[i][k]-sum[i][q],k-q-sum[i][k]+sum[i][q]));\n```\n\n\u5176\u4e2dsum[i][k]-sum[i][q]\u84dd\u8272\u683c\u5b50\n\nk-q-sum[i][k]+sum[i][q]\u8be5\u6bb5\u7684\u7c89\u8272\u683c\u5b50\n\n\u6700\u540e\u770b\u770b\u7c89\u5237\u591a\u5c11\u6b21\u65f6\u6709\u6700\u5927\u7684f[i][j]\u8bb0\u4f5cans\uff1b\n\n\u6109\u5feb\u5730\u8f93\u51fa\u5427\uff01\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint f[51][2550],sum[51][2550];\nint g[51][2550][51];\nint n,m,t;\nchar s[150];\n\nint main(){\n\tcin>>n>>m>>t;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>s;\n\t\tsum[i][0]=0;\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(s[j-1]=='1') sum[i][j]=sum[i][j-1]+1;\n\t\t\telse sum[i][j]=sum[i][j-1];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tfor(int k=1;k<=m;k++)\n\tfor(int q=j-1;q<k;q++){\n\t\tg[i][j][k]=max(g[i][j][k],g[i][j-1][q]+max(sum[i][k]-sum[i][q],k-q-sum[i][k]+sum[i][q]));\n\t}\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=t;j++)\n\tfor(int k=0;k<=min(j,m);k++){\n\tf[i][j]=max(f[i][j],f[i-1][j-k]+g[i][k][m]); }\n\tint ans=0;\n\tfor(int i=1;i<=t;i++) ans=max(ans,f[n][i]);\n\tcout<<ans;\n\t\n}\n```",
        "postTime": 1534152213,
        "uid": 51395,
        "name": "7wwwwth",
        "ccfLevel": 4,
        "title": "\u6211\u662f\u4e00\u4e2a\u7c89\u5237\u5320~"
    },
    {
        "content": "\u672c\u849f\u84bb\u4e0d\u4f1a\u4ec0\u4e48\u592a\u9ad8\u6df1\u7684\u505a\u6cd5\uff0c\u5c31\u731b\u5199\u4e86\u4e00\u53d1\u6bd2\u7624dp\uff0c\u83ab\u540d\u5176\u5999\u8fc7\u4e86\n\ndp[i][j][k][0/1/2]\u8868\u793a\u7b2ci\u884c\u7b2cj\u5217\u4e00\u5171\u7c89\u5237\u4e86k\u6b21\uff0c0/1/2\u5206\u522b\u8868\u793a\u5f53\u524d\u683c\u5b50\u6ca1\u6709\u6d82\u8272/\u6d82\u4e86\u9519\u7684\u989c\u8272/\u6d82\u4e86\u5bf9\u7684\u989c\u8272\uff0c \u7136\u540e\u6211\u4eec\u8003\u8651\u9010\u683c\u8f6c\u79fb\uff1a\n\n\u5f53j=1\u4e5f\u5c31\u662f\u51fa\u4e8e\u6bcf\u884c\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u65f6\uff0c\u6211\u4eec\u8981\u8003\u8651\u4e0a\u4e00\u884c\u7684\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\uff0c \u5373\n\n\tdp[i][j][k][0]=max(dp[i-1][m][k][1],max(dp[i-1][m][k][2],dp[i-1][m][k][0]));\n\n\tdp[i][j][k][1]=max(dp[i-1][m][k-1][2],max(dp[i-1][m][k-1][1],dp[i-1][m][k-1][0]));\n\n\tdp[i][j][k][2]=max(dp[i-1][m][k-1][2],max(dp[i-1][m][k-1][1],dp[i-1][m][k-1][0]))+1;\n\u5176\u4f59\u4f4d\u7f6e\u8981\u8003\u8651\u8fd9\u4e2a\u683c\u5b50\u989c\u8272\u662f\u5426\u548c\u524d\u4e00\u4e2a\u683c\u5b50\u7684\u989c\u8272\u76f8\u7b49\uff0c\u5982\u679c\u76f8\u7b49\uff0c\u5c31\u6709\n\n\tdp[i][j][k][2]=dp[i][j-1][k][2]+1;\n\u53ef\u4ee5\u76f4\u63a5\u63a5\u4e0a\n\n\tdp[i][j][k][1]=max(dp[i][j-1][k][1],dp[i][j-1][k-1][0]);\n\u524d\u9762\u6d82\u9519\u6216\u4e0d\u6d82\n\n \tdp[i][j][k][0]=max(dp[i][j-1][k][0],dp[i][j-1][k][1]);\n \u524d\u9762\u6d82\u9519\u6216\u4e0d\u6d82\n\u5982\u679c\u4e0d\u76f8\u7b49,\n\n    dp[i][j][k][2]=max(dp[i][j-1][k-1][2],max(dp[i][j-1][k][1],dp[i][j-1][k-1][0]))+1;\n    \u524d\u9762\u53ef\u80fd\u6709\u4e09\u79cd\u60c5\u51b5\n\n    dp[i][j][k][1]=max(dp[i][j-1][k][2],dp[i][j-1][k-1][0]);\n    \u6d82\u5bf9\u6216\u4e0d\u6d82       \n\n    dp[i][j][k][0]=max(dp[i][j-1][k][0],dp[i][j-1][k][2]);\n    \u6d82\u5bf9\u6216\u4e0d\u6d82\n\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u538b\u6389\u7b2c\u4e00\u7ef4\uff0c\u8fd9\u6837\u7a7a\u95f4\u590d\u6742\u5ea6\u662fO(nT),\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(nmT)\uff0c\u8fd8\u662f\u53ef\u4ee5\u8fc7\u7684\n\n\n### \u4ee3\u7801\n\n```\n#include<bits/stdc++.h>\n\nusing namespace std;\nconst int MAXN = 55;\n\nint n,m,t,dp[3][MAXN][2505][3]; \nbool col[MAXN][MAXN];\n\nint main(){\n    scanf(\"%d%d%d\",&n,&m,&t);\n    for(register int i=1;i<=n;i++){\n        char c[MAXN];\n        scanf(\"%s\",c+1);\n        for(register int j=1;j<=m;j++)\n            col[i][j]=c[j]-'0';\n    }\n    for(register int i=1;i<=n;i++)\n    for(register int j=1;j<=m;j++)\n    for(register int k=1;k<=t;k++){\n        if(j==1){\n            dp[i&1][j][k][0]=max(dp[(i-1)&1][m][k][1],dp[(i-1)&1][m][k][0]);\n            dp[i&1][j][k][0]=max(dp[i&1][j][k][0],dp[(i-1)&1][m][k][2]);\n            dp[i&1][j][k][1]=max(dp[(i-1)&1][m][k-1][1],dp[(i-1)&1][m][k-1][0]);\n            dp[i&1][j][k][1]=max(dp[i&1][j][k][1],dp[(i-1)&1][m][k-1][2]);\n            dp[i&1][j][k][2]=max(dp[(i-1)&1][m][k-1][1],dp[(i-1)&1][m][k-1][0])+1;\n            dp[i&1][j][k][2]=max(dp[i&1][j][k][2],dp[(i-1)&1][m][k-1][2]+1);\n        } \n        else{\n            if(col[i][j]==col[i][j-1]){\n                dp[i&1][j][k][2]=dp[i&1][j-1][k][2]+1;\n                dp[i&1][j][k][1]=max(dp[i&1][j-1][k][1],dp[i&1][j-1][k-1][0]);\n                dp[i&1][j][k][0]=max(dp[i&1][j-1][k][0],dp[i&1][j-1][k][1]);\n            }\n            else{\n                dp[i&1][j][k][2]=max(dp[i&1][j-1][k][1],dp[i&1][j-1][k-1][0])+1;\n                dp[i&1][j][k][2]=max(dp[i&1][j-1][k-1][2]+1,dp[i&1][j][k][2]);\n                dp[i&1][j][k][1]=max(dp[i&1][j-1][k][2],dp[i&1][j-1][k-1][0]);\n                dp[i&1][j][k][0]=max(dp[i&1][j-1][k][0],dp[i&1][j-1][k][2]);\n            }   \n        }       \n//      cout<<dp[i][j][k][0]<<\" \"<<dp[i][j][k][1]<<\" \";\n//      cout<<dp[i][j][k][2]<<endl;\n    }\n    printf(\"%d\",max(max(dp[n&1][m][t][0],dp[n&1][m][t][1]),dp[n&1][m][t][2]));\n    return 0;\n}\n```\n\n\u6700\u540e\u5b89\u5229\u4e00\u6ce2\u672c\u849f\u84bb\u7684\u535a\u5ba2\uff1a(https://blog.csdn.net/qq_40448823)",
        "postTime": 1528338359,
        "uid": 52394,
        "name": "Monster_Qi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5c31\u662f\u4e00\u4e2a\u6bd4\u8f83\u663e\u7136\u7684\u80cc\u5305 DP\u3002\u6211\u7684\u505a\u6cd5\u662f\u8fd9\u6837\u7684\uff1a\n\n- \u5904\u7406\u51fa\u6bcf\u4e2a\u6728\u677f\u7684\u5757\uff08\u8fde\u7eed\u7684\u4e32\uff09\n- \u5904\u7406\u51fa\u6bcf\u4e00\u4e2a\u6728\u677f\u67d3\u8272\u7684\u80cc\u5305\uff0c\u4e5f\u5c31\u662f\u8bbe\u7f6e$dp[id][i][j][0/1]$\u4e3a\u7b2c$id$\u5757\u6728\u677f\u5230\u7b2c$i$\u5757\u67d3\u4e86$j$\u6b21\u8272\u3001\u7b2c$i$\u4e2a\u662f\u5426\u67d3\u8272\u7684\u6700\u5927\u6b63\u786e\u67d3\u8272\u6570\u3002\n- \u6700\u540e\u5408\u5e76\u8fd9\u4e9b\u67d3\u8272\u6570\uff0c\u7528\u4e00\u4e2a$\\Theta(n^3)$\u7684\u5408\u5e76\u65b9\u6cd5\u5373\u53ef\u3002\n\n\u6728\u677f\u67d3\u8272\u7684\u80cc\u5305\u65b9\u7a0b\u5f0f\u6bd4\u8f83\u663e\u7136\uff0c\u89c1processIt(int)\u51fd\u6570\u7406\u89e3\u4e00\u4e0b\u5c31\u884c\u4e86\u3002\n\n```cpp\n// P4158.cpp\n#include <bits/stdc++.h>\n#define pr pair<int, int>\n\nusing namespace std;\n\nconst int MAX_N = 2550;\n\nint n, m, T, dp[55][55][55][2], dp2[MAX_N];\nvector<pr> blocks[110];\nchar opt[55][55];\n\nvoid processIt(int id)\n{\n    for (int i = 1, siz = blocks[id].size(); i <= siz; i++)\n        for (int j = siz; j >= 1; j--)\n        {\n            dp[id][i][j][0] = max(dp[id][i - 1][j][0], dp[id][i - 1][j][1]);\n            dp[id][i][j][1] = max(dp[id][i - 1][j - 1][0], dp[id][i - 1][j - 1][1]) + blocks[id][i - 1].second - blocks[id][i - 1].first + 1;\n            if (i >= 2)\n                dp[id][i][j][1] = max(dp[id][i][j][1], dp[id][i - 2][j][1] + blocks[id][i - 1].second - blocks[id][i - 1].first + 1);\n        }\n}\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &m, &T);\n    for (int i = 1; i <= n; i++)\n        scanf(\"%s\", opt[i] + 1);\n    for (int i = 1; i <= n; i++)\n        // preprocess;\n        for (int j = 1, last = 1; j <= m + 1; j++)\n            if (opt[i][j] == opt[i][last])\n                continue;\n            else\n                blocks[i].push_back(make_pair(last, j - 1)), last = j;\n    for (int i = 1; i <= n; i++)\n        processIt(i);\n    for (int i = 1; i <= n; i++)\n        for (int pack = T; pack >= 0; pack--)\n            for (int subpack = 0, siz = blocks[i].size(); subpack <= min(pack, siz); subpack++)\n                dp2[pack] = max(dp2[pack], dp2[pack - subpack] + max(dp[i][siz][subpack][0], dp[i][siz][subpack][1]));\n    printf(\"%d\", dp2[T]);\n    return 0;\n}\n```\n",
        "postTime": 1571385268,
        "uid": 68733,
        "name": "kal0rona",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "    dp\u9898\u554a\uff0c\u4fd7\u8bdd\u8bf4dp\u6709\u4e24\u96be\uff0c\u4e00\u8005\u4e3a\u627e\u72b6\u6001\uff0c\u53e6\u4e00\u8005\u4e3a\u72b6\u6001\u8f6c\u79fb\uff0c\u4f46\u662f \n         \n     \u524d\u8005\u627e\u4e0d\u5230\uff0c\u663e\u7136\u540e\u8005\u66f4\u4e0d\u4f1a\u554a\uff01\u4e0d\u8fc7\u597d\u5728\u8fd9\u662f\u9053\u7ebf\u6027dp\u7684\u9898\uff0c\u7ebf\u6027dp\n     \u4e3b\u8981\u770b\u4f60\u6700\u540e\u60f3\u8981\u7684\u72b6\u6001\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u6839\u636e\u4f60\u60f3\u8981\u7684\u72b6\u6001\u5012\u63a8\u4f60\u9700\n     \u8981\u4ec0\u4e48\u72b6\u6001\uff0c\u4e0d\u5982\u8ba9\u6211\u4eec\u5207\u5165\u6b63\u9898\u3002\u8fd9\u9053\u9898\u4f60\u60f3\u77e5\u9053\u5168\u90e8\u7684\u6728\u5757\u6700\n     \u591a\u6709\u591a\u5c11\u662f\u6b63\u786e\u67d3\u8272\u7684\uff0c\u56e0\u6b64\u4f60\u9700\u8981\u627e\u5207\u5165\u70b9\u4e86\uff0c\u6211\u9700\u8981\u5224\u65ad\u524d\u9762\n     \u4e00\u4e9b\u7684\u72b6\u6001\u3002\u8fd9\u65f6\u5019\u4f60\u53d1\u73b0\u6bcf\u4e00\u884c\u90fd\u662f\u72ec\u7acb\u7684\u6240\u4ee5\u6bcf\u4e00\u884c\u90fd\u5e94\u8be5\u4f5c\n     \u4e3a\u72b6\u6001\u3002\u8fd8\u9700\u8981\u8003\u8651\u6bcf\u6b21\u67d3\u8272\u7684\u72ec\u7acb\u6027\u3002\u56e0\u6b64\u6211\u4eec\u7528f[i][j]\u8868\u793a\n     \u524d\u884c\u5171\u67d3\u4e86j\u6b21\u7684\u6700\u5927\u6b63\u786e\u6570\u3002\n ~~\u7136\u540e\u6211\u9677\u5165\u4e86\u6df1\u601d\uff08\u7136\u540e\u5462\uff09\u597d\u5427\u4eba\u7c7b\u667a\u6167\u6765\u4e86~~\n   \n    \u65e2\u7136\u6211\u5df2\u7ecf\u786e\u5b9a\u4e86\u524di\u884c\u7684\u72b6\u6001\uff0c\u6211\u600e\u4e48\u8f6c\u79fb\u5462\uff0c\u8f6c\u5ff5\u4e00\u60f3\u4f3c\u4e4e\u9700\u8981\n    \u786e\u5b9a\u6bcf\u4e00\u884c\u7684\u8f6c\u79fb\u3002\u56e0\u6b64\u8bde\u751f\u4e86g\u6570\u7ec4\u3002\u6211\u7528g[i][j][k]\u8868\u793a\u524di\u884c\n    \u7528\u4e86j\u6b21\u7c89\u5237\u673a\u4f1a\uff0c\u6d82\u4e86k\u4e2a\u989c\u8272\u5757\u3002\u6240\u4ee5\u5462\uff1f\u5982\u4f55\u72b6\u6001\u8f6c\u79fb\u5462\uff1f\n    \n\n------------\n```cpp\n    for(int i=1;i<=n;i++)\n    for(int j=1;j<=t;j++)\n    for(int k=1;k<=min(j,m);k++)\n    f[i][j]=max(f[i][j],f[i-1][j-k]+g[i][k][m]);\n```\n------------\n\u5bf9\uff0c\u6211\u4eec\u5904\u7406\u4e86f\u6570\u7ec4\uff0cg\u6570\u7ec4\u4e5f\u9700\u8981\u5904\u7406\u554a\uff01\n\n~~\u4eba\u7c7b\u667a\u6167\u53c8\u6765\u4e86~~\n\ng\u6570\u7ec4\u7684\u5904\u7406\u53c8\u5c06\u4f55\u53bb\u4f55\u4ece\u3002\u5176\u5b9e\u53ef\u4ee5\u8fd9\u6837\n\n\n\n------------\n\n```cpp\n for(int i=1;i<=n;i++)\n    for(int j=1;j<=m;j++)\n    for(int k=1;k<=m;k++)\n    for(int q=j-1;q<k;q++)\n    g[i][j][k]=max(g[i][j][k],g[i][j-1][q]+max(sum[i][k]-sum[i][q],k-q-sum[i][k]+sum[i][q]));\n```\n------------\n\n\u800csum\u6570\u7ec4\u5c31\u662f\u67d3\u6210\u84dd\u8272\u7684\u6570\u91cf\u3002\u8fd9\u9053\u9898\u5c31\u53ef\u4ee5\u7ed3\u675f\u4e86\u3002dp\u9898\u7684\u5957\u8def\u4e5f\u5c31\u7ed3\u675f\u4e86\u3002\n     \n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<queue>\n#include<cmath>\nusing namespace std;\nint t,n,m;\nchar s[60];\nint sum[60][60],g[60][60][60],f[60][3000],ans;\n\nint main(){\n    cin>>n>>m>>t;\n    for(int i=1;i<=n;i++){\n    sum[i][0]=0;\n    scanf(\"%s\",s+1);\n    for(int j=1;j<=m;j++){\n    if(s[j]-'0'==1) sum[i][j]=sum[i][j-1]+1;\n    else sum[i][j]=sum[i][j-1];\n    }\n    }\n    for(int i=1;i<=n;i++)\n    for(int j=1;j<=m;j++)\n    for(int k=1;k<=m;k++)\n    for(int q=j-1;q<k;q++)\n    g[i][j][k]=max(g[i][j][k],g[i][j-1][q]+max(sum[i][k]-sum[i][q],k-q-sum[i][k]+sum[i][q]));\n    for(int i=1;i<=n;i++)\n    for(int j=1;j<=t;j++)\n    for(int k=1;k<=min(j,m);k++)\n    f[i][j]=max(f[i][j],f[i-1][j-k]+g[i][k][m]);\n    ans=0;\n    for(int i=1;i<=t;i++) ans=max(ans,f[n][i]);\n    cout<<ans<<endl;\n\treturn 0;\n}\n```\n\n\n\n\n",
        "postTime": 1566560818,
        "uid": 176349,
        "name": "\u5929\u5b87\u88e8\u76ca",
        "ccfLevel": 0,
        "title": "P4158 [SCOI2009]\u7c89\u5237\u5320"
    },
    {
        "content": "# DP\n\n\u524d\u8a00:\u8981\u660e\u767d\"\u4e00\u4e2a\u683c\u5b50\u5982\u679c\u672a\u88ab\u7c89\u5237\u6216\u8005\u88ab\u7c89\u5237\u9519\u989c\u8272\uff0c\u5c31\u7b97\u9519\u8bef\u7c89\u5237\u3002\"\u7684\u542b\u4e49(\u76f8\u5f53\u4e8e\u5168\u90e8\u7c89\u5237(rank1\u7684\u9898\u89e3\u76840/1/2\u5b9e\u5c5e\u6d6a\u8d39))\n\n#### \u72b6\u6001: \nf[ i ][ j ][ k ][ 0/1 ]:\n\t1. \u5230\u8fbe(i,j)\u65f6,\n    \n\t2. \u7528\u4e86k\u6b21\u5237\u5b50,\n    \n\t3. \u8fd9\u4e00\u683c\u6709\u6ca1\u6709\u5237\u5bf9\n    \n#### \u8f6c\u79fb:\n 1. \u6362\u884c\u65f6\u80af\u5b9a\u8981\u591a\u5237\u4e00\u6b21\n\n 2. \u82e5\u8fd9\u4e00\u683c\u4e0e\u524d\u4e00\u4e2a\u683c\u5b50\u989c\u8272\u4e00\u6837,\u6700\u4f18\u7684\u65b9\u5f0f\u662f\u628a\u524d\u4e00\u4e2a\u76841\u72b6\u6001\u539f\u5c01\u4e0d\u52a8\u8f6c\u79fb,\u8fd9\u65f6\u76840\u72b6\u6001\u4e5f\u8ddf\u7740\u539f\u5c01\u4e0d\u52a8[\u7b97\u4e00\u4e2a\u8d2a\u5fc3]:\n#####  dp[i][j][k][1]=dp[i][j-1][k][1]+1;\n##### dp[i][j][k][0]=dp[i][j-1][k][0];\n 3. \u5426\u5219[1]\u5c31\u6709\u4e24\u4e2a\u9009\u62e9:\n(\u4e0d\u8981\u5fd8\u8bb0\u6211\u4eec\u8bbe\u7684[1]\u72b6\u6001\u662f\u5f3a\u5236\u8fd9\u4e00\u683c\u6709\u8d21\u732e)\n\u4e00\u4e2a\u662f\u727a\u7272\u4e00\u6b21k\u6362\u79cd\u989c\u8272\u5237,\u53e6\u4e00\u4e2a\u662f\u7ee7\u7eed\u4e0a\u4e00\u683c\u7684\u989c\u8272\n##### dp[i][j][k][1]=max(dp[i][j-1][k-1][1]+1,dp[i][j-1][k][0]+1);\n\n 3.2.[0]\u4e5f\u8981\u8d2a\u5fc3,\u56e0\u4e3a\u8fd9\u4e00\u683c\u8ddf\u4e0a\u4e00\u4e2a\u4e0d\u4e00\u6837,\u6240\u4ee5\u5982\u679c\u8981\u7ee7\u7eed\u5237\u9519,\u53ef\u80fd\u662f\u4ece\u4e0a\u4e00\u6b21[1]\u539f\u5c01\u4e0d\u52a8\u8fc7\u6765,\u53ef\u80fd\u662f\u518d\u7528\u4e00\u5237\u4f7f\u5f97\u5237\u9519.\n##### \tdp[i][j][k][0]=max(dp[i][j-1][k][1],dp[i][j-1][k-1][0]);\n\n\n\u4ee3\u7801\u5982\u4e0b\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,t,dp[51][51][51*51][2],co[51][51],ans;//\u61d2\u5f97\u6eda\u5566|`\u03a9`|\nint main(){\n\tcin>>n>>m>>t;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tchar c=getchar();\n\t\t\twhile(c!='0'&&c!='1')c=getchar();\n\t\t\tco[i][j]=c-'0';\n\t\t}\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tfor(int k=1;k<=t;k++){\n\t\t\t\tif(j==1){\n\t\t\t\t\tdp[i][j][k][0]=max(dp[i-1][m][k-1][0],dp[i-1][m][k-1][1]);\n\t\t\t\t\tdp[i][j][k][1]=max(dp[i-1][m][k-1][1],dp[i-1][m][k-1][0])+1;\t\t\t\t\t\n\t\t\t\t}else\n\t\t\t\t\tif(co[i][j]==co[i][j-1]){\n\t\t\t\t\t\tdp[i][j][k][1]=dp[i][j-1][k][1]+1;\n\t\t\t\t\t\tdp[i][j][k][0]=dp[i][j-1][k][0];//\u8d2a\u5fc3\n\t\t\t\t\t}else{\n\t\t\t\t\t\tdp[i][j][k][1]=max(dp[i][j-1][k-1][1]+1,dp[i][j-1][k][0]+1);\n\t\t\t\t\t\tdp[i][j][k][0]=max(dp[i][j-1][k][1],dp[i][j-1][k-1][0]);\n\t\t\t\t\t}\n\t\t\t\tans=max(max(dp[i][j][k][0],dp[i][j][k][1]),ans);\n\t\t\t\t//\tprintf(\"dp[%d][%d][%d]=[0]%d [1]%d\\n\",i,j,k,dp[i][j][k][1],dp[i][j][k][2]);\n\t\t\t}\n\tcout<<ans;\n\treturn 0;\n}\n\n```\nthanks",
        "postTime": 1537799463,
        "uid": 69935,
        "name": "GUO\u5927\u4fa0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "http://www.elijahqi.win/2018/01/14/bzoj1296-scoi2009%e7%b2%89%e5%88%b7%e5%8c%a0/\n\nhttp://blog.csdn.net/elijahqi/article/details/79055898\n\nDescription\n\n\nwindy\u6709 N \u6761\u6728\u677f\u9700\u8981\u88ab\u7c89\u5237\u3002 \u6bcf\u6761\u6728\u677f\u88ab\u5206\u4e3a M \u4e2a\u683c\u5b50\u3002 \u6bcf\u4e2a\u683c\u5b50\u8981\u88ab\u5237\u6210\u7ea2\u8272\u6216\u84dd\u8272\u3002 windy\u6bcf\u6b21\u7c89\u5237\uff0c\u53ea\u80fd\u9009\u62e9\u4e00\u6761\u6728\u677f\u4e0a\u4e00\u6bb5\u8fde\u7eed\u7684\u683c\u5b50\uff0c\u7136\u540e\u6d82\u4e0a\u4e00\u79cd\u989c\u8272\u3002 \u6bcf\u4e2a\u683c\u5b50\u6700\u591a\u53ea\u80fd\u88ab\u7c89\u5237\u4e00\u6b21\u3002 \u5982\u679cwindy\u53ea\u80fd\u7c89\u5237 T \u6b21\uff0c\u4ed6\u6700\u591a\u80fd\u6b63\u786e\u7c89\u5237\u591a\u5c11\u683c\u5b50\uff1f \u4e00\u4e2a\u683c\u5b50\u5982\u679c\u672a\u88ab\u7c89\u5237\u6216\u8005\u88ab\u7c89\u5237\u9519\u989c\u8272\uff0c\u5c31\u7b97\u9519\u8bef\u7c89\u5237\u3002\n\nInput\n\n\u8f93\u5165\u6587\u4ef6paint.in\u7b2c\u4e00\u884c\u5305\u542b\u4e09\u4e2a\u6574\u6570\uff0cN M T\u3002 \u63a5\u4e0b\u6765\u6709N\u884c\uff0c\u6bcf\u884c\u4e00\u4e2a\u957f\u5ea6\u4e3aM\u7684\u5b57\u7b26\u4e32\uff0c'0'\u8868\u793a\u7ea2\u8272\uff0c'1'\u8868\u793a\u84dd\u8272\u3002\n\nOutput\n\n\u8f93\u51fa\u6587\u4ef6paint.out\u5305\u542b\u4e00\u4e2a\u6574\u6570\uff0c\u6700\u591a\u80fd\u6b63\u786e\u7c89\u5237\u7684\u683c\u5b50\u6570\u3002\n\nSample Input\n\n3 6 3\n111111\n000000\n001100\nSample Output\n\n16\nHINT\n\n30%\u7684\u6570\u636e\uff0c\u6ee1\u8db3 1 <= N,M <= 10 \uff1b 0 <= T <= 100 \u3002 100%\u7684\u6570\u636e\uff0c\u6ee1\u8db3 1 <= N,M <= 50 \uff1b 0 <= T <= 2500 \u3002\n\n\ndp\u5957dp  \u9996\u5148\u7528dp\u5904\u7406\u6bcf\u884c\u6211\u6d82\u591a\u5c11\u6b21\u53ef\u4ee5\u53ef\u4ee5\u6d82\u5bf9\u7684\u6570\u91cf \u8bbef[i][j]\u8868\u793a\u524di\u4e2a\u6d82j\u6b21\u6d82\u5bf9\u7684\u6700\u591a\u6570\u91cf\u662f\u591a\u5c11\u90a3\u4e48\u5728\u505a\u7684\u65f6\u5019 \u53ef\u4ee5\u8fd9\u6837\u6765\u770b \u6bcf\u6b21\u679a\u4e3e\u4e2d\u95f4\u505a\u5230\u54ea\u91cc\u4e86f[i][j]=max(f[i][j],f[z][j-1]+\u9ed1\u8272or\u767d\u8272\u7684\u6570\u91cf) \u7136\u540en^3\u8fdb\u884cdp \u5904\u7406\u5b8c\u8fd9\u4e2a\u53ef\u4ee5\u770b\u4f5c\u662f\u4e00\u4e2a\u5206\u7ec4\u80cc\u5305 \u5c31\u662f\u884c\u4e0e\u884c\u4e4b\u95f4\u4efb\u9009 \u4f46\u662f\u884c\u5185\u53ea\u53ef\u4ee5\u9009\u4e00\u4e2a  \u90a3\u5c31\u8bbedp[i][j]\u8868\u793a\u524di\u4e2a\u5237j\u6b21\u7684\u6700\u5927\u6536\u76ca \u90a3\u4e48\u6bcf\u6b21\u9488\u5bf9\u8fd9\u4e2ai\u53bb\u679a\u4e3e\u6211\u5728\u7b2ci\u6b21\u8fd9\u91cc\u5237\u4e86\u591a\u5c11\u6b21 \u7136\u540e\u6c42max\u5373\u53ef \u6ce8\u610f\u4e0b\u679a\u4e3e\u7684\u8fb9\u754c\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define N 55\nusing namespace std;\nint f[N][N],dp[N][N*N],n,m,t,s[N];char s1[N];\nint main(){\n    freopen(\"bzoj1296.in\",\"r\",stdin);\n    scanf(\"%d%d%d\",&n,&m,&t);\n    for (int i=1;i<=n;++i){\n        scanf(\"%s\",s1+1);memset(f,0,sizeof(f));\n        for (int j=1;j<=m;++j) s[j]=s[j-1]+(s1[j]=='1');\n        for (int j=1;j<=m;++j){\n            for (int k=1;k<=m;++k){\n                for (int z=0;z<j;++z){\n                    int dis=s[j]-s[z];\n                    f[j][k]=max(f[j][k],f[z][k-1]+max(dis,j-dis-z));\n                }\n            }\n        }\n        for (int j=1;j<=t;++j){\n            int top=min(j,m);\n            for (int k=1;k<=top;++k){\n                dp[i][j]=max(dp[i][j],dp[i-1][j-k]+f[m][k]);\n            }\n        }\n    }int ans=0;\n    for (int i=1;i<=t;++i) ans=max(ans,dp[n][i]);printf(\"%d\\n\",ans);\n    return 0;\n}\n\n\n\n```",
        "postTime": 1517178480,
        "uid": 5037,
        "name": "elijahqi",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "### \u8fd9\u662f\u4e00\u7bc7\u6bd4\u8f83\u6c34\u7684\u84dd\u540d\u9898\u89e3\uff0c\u5199\u51fa~~\u5047\u7d2b\u9898~~\u6709\u70b9\u9ad8\u5174\n\u6211\u7684\u603b\u4f53\u601d\u8def\u5c31\u662f\u4e24\u904dDP\uff0c\u7b2c\u4e00\u4e2a\u662f\u5728\u6bcf\u4e00\u6761\u6728\u677f\u4e0a\u8fdb\u884c\u52a8\u5f52\uff0c\u7b2c\u4e8c\u4e2a\u662f\u5728\u6728\u6761\u95f4\u8fdb\u884c\u52a8\u5f52\u3002\n\n#### \u7b2c\u4e00\u904d\u2014\u2014\u5728\u4e00\u4e2a\u6728\u6761\u4e0a\u7684\u52a8\u5f52\n\n\u6570\u7ec4dp[i][j][k]\u6765\u50a8\u5b58\u5728\u6bcf\u4e00\u884c\u4e2d\u7b2ci\u4e2a\u683c\u5b50\u5728\u7c89\u5237j\u6b21\u65f6\u7684\u6700\u4f18\u60c5\u51b5\uff0ck\u8868\u793a\u7c89\u5237j\u6b21\u65f6\u7528\u7684\u989c\u8272\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u683c\u5b50\u6211\u4eec\u6709\u4e09\u79cd\u51b3\u7b56\u3002\n1. \u76f4\u63a5\u4ece\u524d\u4e00\u4e2a\u683c\u5b50\u5237\u8fc7\u6765\uff0c\u5219\u6709\u8f6c\u79fb\u65b9\u7a0b\uff1a\n```cpp\ndp[i][j][color[i]]=dp[i-1][j][color[i]]+1;\ndp[i][j][!color[i]]=dp[i-1][j][!color[i]];\n```\n2. \u4ece\u6b64\u683c\u5f00\u59cb\u6d82\u65b0\u7684\u4e00\u6bb5\uff0c\u989c\u8272\u4e0e\u6b64\u683c\u76f8\u540c\uff0c\u5219\u6709\u8f6c\u79fb\u65b9\u7a0b\uff1a\n```cpp\ndp[i][j][color[i]]=max(dp[i][j][color[i]],max(dp[i-1][j-1][0],dp[i-1][j-1][1])+1);\n```\n3. \u4ece\u6b64\u683c\u5f00\u59cb\u6d82\u65b0\u7684\u4e00\u6bb5\uff0c\u989c\u8272\u4e0e\u6b64\u683c\u4e0d\u540c\uff0c\u5219\u6709\u8f6c\u79fb\u65b9\u7a0b\uff1a\n```cpp\ndp[i][j][!color[i]]=max(dp[i][j][!color[i]],max(dp[i-1][j-1][0],dp[i-1][j-1][1]));\n```\n\n\u8fd9\u6837\u4ee5\u6765\uff0c\u6bcf\u4e00\u884c\u52a8\u5f52\u5b8c\u6210\u540e\uff0c\u6570\u7ec4dp[lenth][p][0]\u6216dp[lenth][p][1]\u4e2d\u4fbf\u4fdd\u5b58\u4e86\u8fd9\u4e00\u6761\u6728\u677f\u7c89\u5237p\u6bb5\u7684\u6700\u4f18\u89e3\u3002\n\n#### \u7b2c\u4e8c\u904d\u2014\u2014\u5728\u6728\u6761\u95f4\u7684\u52a8\u5f52\n\n\u8fd9\u4e2a\u6bd4\u8f83\u7b80\u5355\u4e86\uff0c\u76f4\u63a5\u8d34\u8f6c\u79fb\u65b9\u7a0b\uff1a\n```cpp\nans[i]=max(ans[i],ans[i-j]+max(dp[lenth][j][0],dp[lenth][j][1]));\n```\n\u6ce8\u610f\u8fd9\u91cci\u8981\u5012\u53d9\u5faa\u73af\uff0cj\u57280\u81f3min(lenth,i)\u95f4\u5faa\u73af\u3002\n\n**\u6700\u540eans[all]\u4fbf\u4fdd\u5b58\u4e86\u5168\u5c40\u6700\u4f18\u89e3\uff0c\u8f93\u51fa\u5373AC\uff01\uff01**\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define N 51\n#define M 2510\nusing namespace std;\nint num,lenth,all,color[N],dp[N][N][2],ans[M];\nint main()\n{\n\tscanf(\"%d%d%d\",&num,&lenth,&all);\n\tfor(register int n=1;n<=num;n++)\n\t{\n\t\tfor(register int i=1;i<=lenth;i++)\n\t\t\tscanf(\"%1d\",&color[i]);\n\t\tmemset(dp,0,sizeof(dp));\n\t\tfor(register int i=1;i<=lenth;i++)\n\t\t\tfor(register int j=1;j<=i;j++)\n\t\t\t{\n\t\t\t\tdp[i][j][color[i]]=dp[i-1][j][color[i]]+1;\n\t\t\t\tdp[i][j][!color[i]]=dp[i-1][j][!color[i]];\n\t\t\t\tint tmax=max(dp[i-1][j-1][0],dp[i-1][j-1][1]);\n\t\t\t\tdp[i][j][color[i]]=max(dp[i][j][color[i]],tmax+1);\n\t\t\t\tdp[i][j][!color[i]]=max(dp[i][j][!color[i]],tmax);\n\t\t\t}\n\t\tfor(register int i=all;i>=1;i--)\n\t\t\tfor(register int j=0;j<=min(lenth,i);j++)\n\t\t\t\tans[i]=max(ans[i],ans[i-j]+max(dp[lenth][j][0],dp[lenth][j][1]));\n\t}\n\tprintf(\"%d\",ans[all]);\n\treturn 0;\n}\n\n```",
        "postTime": 1540987311,
        "uid": 64365,
        "name": "\u767d\u8272\u661f\u671f\u4e00",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u9898\u76ee\u63cf\u8ff0\nwindy\u6709 N \u6761\u6728\u677f\u9700\u8981\u88ab\u7c89\u5237\u3002 \u6bcf\u6761\u6728\u677f\u88ab\u5206\u4e3a M \u4e2a\u683c\u5b50\u3002 \u6bcf\u4e2a\u683c\u5b50\u8981\u88ab\u5237\u6210\u7ea2\u8272\u6216\u84dd\u8272\u3002\n\nwindy\u6bcf\u6b21\u7c89\u5237\uff0c\u53ea\u80fd\u9009\u62e9\u4e00\u6761\u6728\u677f\u4e0a\u4e00\u6bb5\u8fde\u7eed\u7684\u683c\u5b50\uff0c\u7136\u540e\u6d82\u4e0a\u4e00\u79cd\u989c\u8272\u3002 \u6bcf\u4e2a\u683c\u5b50\u6700\u591a\u53ea\u80fd\u88ab\u7c89\u5237\u4e00\u6b21\u3002\n\n\u5982\u679cwindy\u53ea\u80fd\u7c89\u5237 T \u6b21\uff0c\u4ed6\u6700\u591a\u80fd\u6b63\u786e\u7c89\u5237\u591a\u5c11\u683c\u5b50\uff1f\n\n\u4e00\u4e2a\u683c\u5b50\u5982\u679c\u672a\u88ab\u7c89\u5237\u6216\u8005\u88ab\u7c89\u5237\u9519\u989c\u8272\uff0c\u5c31\u7b97\u9519\u8bef\u7c89\u5237\u3002\n\n\u8f93\u5165\u683c\u5f0f\n\u7b2c\u4e00\u884c\u5305\u542b\u4e09\u4e2a\u6574\u6570\uff0cN M T\u3002\n\n\u63a5\u4e0b\u6765\u6709N\u884c\uff0c\u6bcf\u884c\u4e00\u4e2a\u957f\u5ea6\u4e3aM\u7684\u5b57\u7b26\u4e32\uff0c'0'\u8868\u793a\u7ea2\u8272\uff0c'1'\u8868\u793a\u84dd\u8272\u3002\n\n\u8f93\u51fa\u683c\u5f0f\n\u5305\u542b\u4e00\u4e2a\u6574\u6570\uff0c\u6700\u591a\u80fd\u6b63\u786e\u7c89\u5237\u7684\u683c\u5b50\u6570\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u5bf9\u6bcf\u6761\u6728\u677f\u8fdb\u884c\u4e00\u6b21DP\uff0c\nDP[K][i][j] \u8868\u793a \u5728\u7b2cK\u4e2a\u6728\u677f\u4e0a \u4ece1\u51b3\u7b56\u5230\u7b2ci\u4e2a\u7528\u4e86j\u6b21\u7c89\u5237\u7684\u6700\u5927\u6b21\u6570\n\u4e4b\u540e \u8f6c\u79fb\u65f6\u679a\u4e3e\u4e2d\u95f4\u65ad\u70b9\uff0c\u4e3ah\uff0c\u5219\u539f\u5f0f=max\uff08dp[k][h][j-1]+(\u8be5\u533a\u95f4\u7684\u7ea2\u8272\u548c\u84dd\u8272\u53d6max)\uff09\uff1b\n\u4e4b\u540e\u4e00\u4e2a\u5206\u7ec4\u80cc\u5305 K\u4e3a\u7ec4\u6570\uff0cj\u4e3a\u4ee3\u4ef7\uff0c\u5b58\u7684\u503c\u4e3aval\u8fdb\u884c\u8f6c\u79fb\u3002\n\u4ee3\u7801\uff1a\n```c\n// luogu-judger-enable-o2\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint n,m,t,ans=-1e8;\nint qian[55][55][2];\nint f[55][55][55];\nint g[55][2505];\nint main()\n{\n\tcin>>n>>m>>t;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\t{\n\t\tqian[i][j][1]=qian[i][j-1][1];\n\t\tqian[i][j][0]=qian[i][j-1][0];\n\t\tchar y;\n\t\tcin>>y;\n\t\tint x=0;\n\t\tif(y=='1')\n\t\tx=1;\n\t\telse\n\t\tx=0;\n\t\tqian[i][j][x]+=1;\n\t}\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tfor(int k=1;k<=m;k++)\n\tfor(int h=0;h<j;h++)\n\tf[i][j][k]=max(f[i][j][k],f[i][h][k-1]+max((qian[i][j][0]-qian[i][h][0]),(qian[i][j][1]-qian[i][h][1])));\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=t;j>=0;j--)\n\tfor(int k=1;k<=min(j,m);k++)\n\tg[i][j]=max(g[i][j],g[i-1][j-k]+f[i][m][k]);\n\tcout<<g[n][t];\n}\n```\n",
        "postTime": 1565262439,
        "uid": 128852,
        "name": "\u751f\u800c\u4e3a\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "# \u8bb0\u5fc6\u5316\u641c\u7d22+\u80cc\u5305+\u8d2a\u5fc3\n##### ~~\u7adf\u7136\u6ca1\u4eba\u5199\uff1f~~\n## \u6838\u5fc3\u601d\u60f3  ~~~~\u4e71\u641e~~~~\n\u641c\u7d22\u90fd\u4f1a\u5199\uff0c\u4f46\u4e3b\u8981\u662f\u600e\u4e48\u526a\u679d\u3002\n\n\u6211\u4eec\u53d1\u73b0\u884c\u4e0e\u884c\u4e4b\u95f4\u5e76\u6ca1\u6709\u4ec0\u4e48\u5173\u7cfb\u3002\n\n\u8003\u8651\u5bf9\u6bcf\u884c\u8fdb\u884c\u641c\u7d22\uff0c\u641c\u51fa\u5728\u8fd9\u884c\u7c89\u5237\u6b21\u6570\u4e3aj\u7684\u6700\u5927\u6b63\u786e\u6570\n\n\u6211\u4eec\u5148\u6765\u770b\u8fd9\u4e48\u4e00\u4e2a\u5e8f\u5217:\n\n00100100\n\n\u7b2c\u4e00\u4e2a\u526a\u679d\u662f\u6700\u5bb9\u6613\u60f3\u5230\u7684\u4e5f\u662f\u6700\u6709\u6548\u7684\n\n\u8fd9\u4e2a\u5e8f\u5217\u4e2d\uff0c\u679a\u4e3e\u641c\u7d22\u8d77\u59cb\u70b9\u4e0d\u4f1a\u4ece\u7b2c2\u30015\u30018\u5f00\u59cb\uff08\u5c0f\u8d2a\u5fc3\uff09\n\n\u4e5f\u5c31\u662f\u8bf4--\u5982\u679c\u4e00\u6bb5\u5e8f\u5217\u90fd\u662f0\u6216\u90fd\u662f1\uff0c\u53ea\u6709\u7b2c\u4e00\u4e2a\u70b9\u6709\u7528\u3002\n\n\u6240\u4ee5\u6211\u4eec\u7528\u4e00\u4e2auseless\u6570\u7ec4\u8868\u793a\u8fd9\u4e2a\u6570\u662f\u5426\u503c\u5f97\u4e00\u641c\u3002\n\n\u7b2c\u4e8c\u4e2a\u526a\u679d\u4e5f\u662f\u8d2a\u5fc3\u3002\n\n\u8fd8\u662f\u521a\u624d\u90a3\u4e2a\u5e8f\u5217\uff1a\n\n00100100\n\n\u5047\u8bbe\u6211\u4eec\u4ece\u7b2c\u4e00\u4e2a\u70b9\u5f00\u5237\n\n\u679a\u4e3e\u7c89\u5237\u7ec8\u70b9\uff0c\u663e\u7136\u4e0d\u4f1a\u662f1\uff0c4\uff0c6\uff08\u56e0\u4e3a\u540e\u9762\u8fd8\u67090\uff09\n\n\u6240\u4ee5\u6211\u4eec\u518d\u7528\u4e00\u4e2a\u6570\u7ec4nxt[ ][ ][ ]\u8868\u793a \u4e00\u4e2a\u70b9\u7684\u53ef\u80fd\u7c89\u5237\u7ec8\u70b9\u3002\n\n\u5224\u5b9a\u6761\u4ef6\u2014\u2014\u5728\u4e00\u884c\u4e2d\uff0c\u8fd9\u4e2a\u70b9\u662fi\uff0c\u5bf9\uff08i\uff0cm+1\uff09\u8fdb\u884c\u679a\u4e3e\uff08\u8bbe\u4e3aj\uff09\u3002\n\n\u5982\u679c\u8fd9\u4e2a\u70b9\u4e0d\u2018useless\u2019\u5e76\u4e14j\u548ci\u5bf9\u5e94\u7684\u6570\u503c\u4e0d\u540c \u5c31\u628a\u5b83\u52a0\u4e0a\u3002\n\n\u5269\u4e0b\u7684\u4e5f\u90fd\u4e00\u6837\u4e86  \u80cc\u5305\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstdlib>\n#include<cstring>\nusing namespace std;\nint n,m,k;\nint a[61][61];\nbool useless[61][61];\nint nxt[61][61][61];\nint top[61][61];\nint dp[61][61][61];\n\nint dpx[61][2601];\nint sum[61][61];\nvoid dfs(int row,int now,int tim,int nowans)\n{\n\tif(dp[row][now][tim]>=nowans) return;\n\tdp[row][now][tim]=nowans;\n\tfor(int i=1;i<=top[row][now];i++)\n\t{\n\t\tint sumx=sum[row][nxt[row][now][i]-1]-sum[row][now-1];\n\t\tif(!a[row][now]) sumx=nxt[row][now][i]-now-sumx;\n\t\tdfs(row,nxt[row][now][i],tim+1,nowans+sumx);\n\t}\n}\nint ans;\nint main()\n{\n\tmemset(dp,-1,sizeof(dp));\n\tscanf(\"%d %d %d\",&n,&m,&k);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\ta[i][0]=-1;\n\t\ta[i][m+1]=-1;\n\t}\n\tgetchar();\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tchar ch=getchar();\n\t\t\ta[i][j]=ch-48;\n\t\t\tif(a[i][j]==a[i][j-1]) useless[i][j]=true;\n\t\t\tsum[i][j]=sum[i][j-1]+a[i][j];\n\t\t}\n\t\tif(i!=n) getchar();\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(useless[i][j]) continue;\n\t\t\tfor(int h=j+1;h<=m+1;h++)\n\t\t\t{\n\t\t\t\tif(useless[i][h]) continue;\n\t\t\t\tif(a[i][j]!=a[i][h])\n\t\t\t\t{\n\t\t\t\t\tnxt[i][j][++top[i][j]]=h;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(useless[i][j]) continue;\n\t\t\tdfs(i,j,0,0);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int T=m*i;T>=0;T--)\n\t\t{\n\t\t\tfor(int j=0;j<=min(T,m);j++)\n\t\t\t{\n\t\t\t\tdpx[i][T]=max(dpx[i][T],dpx[i-1][T-j]+dp[i][m+1][j]);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<=k;i++)\n\t{\n\t\tans=max(ans,dpx[n][i]);\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n~~\u6570\u636e\u6c34\uff0c\u7adf\u7136\u53ea\u8dd1\u4e86136ms~~\n\nhttps://www.luogu.com.cn/record/28349084\n\n",
        "postTime": 1576127038,
        "uid": 160663,
        "name": "\u4e00\u4e2d\u76ca\u8fbe",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u660e\u660e\u53ef\u4ee5\u5f88\u77ed\u7684\u4ee3\u7801AC\u7684\uff0c\u4f46\u662f\u6211\u4e3a\u4e86\u7f29\u77ed\u65f6\u95f4\u7528\u4e86\u4e00\u4e2a\u6bd2\u7624\u65b9\u6cd5\uff0c\u4e8e\u662f\u5c31\u8d70\u4e0a\u4e86WaWaWa\u7684\u9053\u8def\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u6b63\u786e\u7c89\u5237\u6240\u6709\u683c\u5b50\uff0c\u8bb0\u9700\u8981\u7c89\u5237now\u6b21\uff0c\u4e4b\u540e\u518d\u6765\u53d6\u6d88\u7c89\u5237\u67d0\u4e9b\u683c\u5b50\u3002\u53d6\u6d88\u7c89\u5237\u4e2d\u95f4\u7684\u4e00\u6bb5\u683c\u5b50\uff0c\u5c31\u662f\u5c06\u8fd9\u6bb5\u683c\u5b50\u5de6\u8fb9\u4e00\u6bb5\u683c\u5b50\u7684\u5de6\u7aef\u70b9\u548c\u8fd9\u6bb5\u683c\u5b50\u7684\u53f3\u7aef\u70b9\u4f5c\u4e3a\u4e00\u6b21\u7c89\u5237\uff0c\u8fd9\u6837now\u5e94\u8be5\u51cf2\uff0c\u4e5f\u5c31\u662f\u8bf4\u7701\u53bb\u4e86\u4e24\u6b21\u7c89\u5237\u3002\u800c\u53d6\u6d88\u7c89\u5237\u8fb9\u4e0a\u7684\u4e00\u6bb5\u683c\u5b50\uff0cnow\u53ea\u8be5\u51cf1\uff0c\u6240\u4ee5\u8bf4\u5e94\u8be5\u628a\u4e24\u4e2a\u300c\u8fb9\u4e0a\u7684\u4e00\u6bb5\u3008\u53d6\u6d88\u7c89\u5237\u540e\u4ee3\u4ef7\u6700\u5c0f\u7684\u683c\u5b50\u3009\u300d\u62ff\u6765\u548c\u4e00\u4e2a\u300c\u4e2d\u95f4\u7684\u4e00\u6bb5\u3008\u53d6\u6d88\u7c89\u5237\u540e\u4ee3\u4ef7\u6700\u5c0f\u7684\u683c\u5b50\u3009\u300d\u6bd4\u8f83\uff0c\u54ea\u8fb9\u4ee3\u4ef7\u66f4\u5c0f\u5c31\u53d6\u6d88\u7c89\u5237\u54ea\u8fb9\u3002\u800c\u5982\u679cnow<T\u4e86\u5c31\u5e94\u8be5\u505c\u6b62\u53d6\u6d88\u7c89\u5237\u8f93\u51fa\u7ed3\u679c\u4e86\u3002\n\n\u4e0d\u5f97\u4e0d\u5410\u69fd\u8fd9\u9053\u9898\u7684\u6570\u636e\u592a\u6c34\u3002\u3002\u3002\u63d0\u4ea4\u7b2c\u4e00\u904d80\u5206\uff0c\u53d1\u73b0\u65e0\u6570\u9519\u8bef\u3001\u6539\u4e86\u65e0\u6570\u6b21\u624dAC\u3002\u7ed3\u679cAC\u4e4b\u540e\u8fd8\u53d1\u73b0\u4e00\u4e2a\u9519\u8bef\u3002\u5982\u679c\u8fd8\u5b58\u5728\u9519\u8bef\u8bf7\u6307\u51fa\u3002\n~~\u5927\u4f6c\u8bf7\u65e0\u89c6\u849f\u84bb\u4ee3\u7801\u7684\u4e11\u50cf~~\n```cpp\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint n,m,t,now,ans;\nchar a[55][55];\nstruct sd{int x,y,v;bool flag;}w[55][505];\nint cnt[55];\nint main()\n{\n    scanf(\"%d%d%d\",&n,&m,&t);ans=n*m;\n    for(int i=1;i<=n;++i) {scanf(\"%s\",a[i]);for(int j=m;j>=1;--j) a[i][j]=a[i][j-1];}\n    if(t<=n) {\n        int cc[55];\n        memset(cc,0,sizeof(cc));\n        for(int i=1;i<=n;++i)\n        {\n            int a1=0;\n            for(int j=1;j<=m;++j) if(a[i][j]=='1') a1++;\n            cc[i]=a1>m-a1?a1:m-a1;\n        }\n        sort(cc+1,cc+1+n);ans=0;\n        for(int i=n;i>=n-t+1;--i)\n        ans+=cc[i];printf(\"%d\",ans);return 0;\n    }\n    for(int i=1;i<=n;++i)\n    {\n        a[i][0]='3';a[i][m+1]='4';int k=2;\n        for(int j=1;j<=m+1;++j)\n        {\n            if(a[i][j]!=a[i][j-1])\n\t\t\t{\n\t\t\t\tif(k<=j-1) {w[i][++cnt[i]].x=k;w[i][cnt[i]].y=j-1;w[i][cnt[i]].v=j-k;}\n\t\t\t\tk=j;continue;\n\t\t\t}\n        }\n    }\n    for(int i=1;i<=n;++i) now+=cnt[i];\n    while(now>t)\n    {\n        int aa=0x7fffffff/2,X,Y;\n        for(int i=1;i<=n;++i)\n        {\n            int kn=m+1;\n            for(int j=1;j<=cnt[i];++j) if(!w[i][j].flag){kn=j;break;}\n\t\t\tif(kn==m+1) goto abC;\n            if(w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v)<aa&&\n\t\t\t(!w[i][kn].flag)&&w[i][kn].y!=m)\n\t\t\t{aa=w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v);X=i;Y=kn;}\n            abC:;\n            kn=0;\n\t\t\tfor(int j=cnt[i];j>=1;--j) if(!w[i][j].flag) {kn=j;break;}\n\t\t\tif(!kn) continue;\n            if(w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v)<aa&&\n\t\t\t(!w[i][kn].flag)&&w[i][kn].x!=1)\n\t\t\t{aa=w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v);X=i;Y=kn;}\n        }\n        int ab=0x7fffffff/2,Xx,Yy;\n        for(int i=1;i<=n;++i)\n        {\n            int kn=m+1;\n            for(int j=1;j<=cnt[i];++j) if(!w[i][j].flag) {kn=j;break;}\n\t\t\tif(kn==m+1) goto KM;\n            if((!(X==i&&w[X][Y].x==w[i][kn].y+1))&&(X!=i||Y!=1)&&\n\t\t\tab>w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v)&&\n\t\t\t(!w[i][kn].flag)&&w[i][kn].y!=m)\n\t\t\t{ab=w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v);Xx=i;Yy=kn;}\n            KM:;\n\t\t\tkn=0;\n\t\t\tfor(int j=cnt[i];j>=1;--j) if(!w[i][j].flag){kn=j;break;}\n\t\t\tif(!kn) continue;\n            if((!(X==i&&w[X][Y].y==w[i][kn].x-1))&&(X!=i||Y!=kn)&&\n\t\t\tab>w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v)&&\n\t\t\t(!w[i][kn].flag)&&w[i][kn].x!=1)\n\t\t\t{ab=w[i][kn].v-(w[i][kn].y-w[i][kn].x+1-w[i][kn].v);Xx=i;Yy=kn;}\n        }\n        int ac=0x7fffffff,XX,YY;\n        for(int i=1;i<=n;++i)\n        {\n            int ll,rr;\n            for(int j=1;j<cnt[i];++j) if(!w[i][j].flag) {ll=j;break;}\n            for(int j=cnt[i];j>=1;--j) if(!w[i][j].flag) {rr=j;break;}\n            for(int j=ll+1;j<=rr-1;++j) {\n                if(w[i][j].flag) continue;\n                if(ac>w[i][j].v-(w[i][j].y-w[i][j].x+1-w[i][j].v))\n\t\t\t\t{ac=w[i][j].v-(w[i][j].y-w[i][j].x+1-w[i][j].v);XX=i;YY=j;}\n            }\n        }\n        if(now-t==1)\n        {\n            --now;\n            if(aa<ac)\n            {\n                if(Y!=1)\n                {\n                    for(int i=Y-1;i>=1;--i) if(!w[X][i].flag)\n\t\t\t\t\t{w[X][i].flag=true;w[X][Y].v=w[X][Y].y-w[X][Y].x+1-w[X][Y].v+w[X][i].v;\n\t\t\t\t\tw[X][Y].x=w[X][i].x;break;}\n                    ans-=aa;\n                }\n                else{\n                    for(int i=2;i<=cnt[X];++i) if(!w[X][i].flag)\n\t\t\t\t\t{w[X][i].flag=true;w[X][1].v=w[X][1].y-w[X][1].x+1-w[X][1].v+w[X][i].v;\n\t\t\t\t\tw[X][1].y=w[X][i].y;break;}\n                    ans-=aa;\n                }\n            }\n            else goto loop;\n        }\n        else {\n            now-=2;\n            if(aa+ab<ac)\n            {\n                if(Y!=1)\n                {\n                    for(int i=Y-1;i>=1;--i) if(!w[X][i].flag)\n\t\t\t\t\t{w[X][i].flag=true;w[X][Y].v=w[X][Y].y-w[X][Y].x+1-w[X][Y].v+w[X][i].v;\n\t\t\t\t\tw[X][Y].x=w[X][i].x;break;}\n                    ans-=aa;\n                }\n                else{\n                    for(int i=2;i<=cnt[X];++i) if(!w[X][i].flag)\n\t\t\t\t\t{w[X][i].flag=true;w[X][1].v=w[X][1].y-w[X][1].x+1-w[X][1].v+w[X][i].v;\n\t\t\t\t\tw[X][1].y=w[X][i].y;break;}\n                    ans-=aa;\n                }\n                if(Yy!=1)\n                {\n                    for(int i=Yy-1;i>=1;--i) if(!w[Xx][i].flag)\n\t\t\t\t\t{w[Xx][i].flag=true;\n\t\t\t\t\tw[Xx][Yy].v=w[Xx][Yy].y-w[Xx][Yy].x+1-w[Xx][Yy].v+w[Xx][i].v;\n\t\t\t\t\tw[Xx][Yy].x=w[Xx][i].x;break;}\n                    ans-=ab;\n                }\n                else{\n                    for(int i=2;i<=cnt[Xx];++i) if(!w[Xx][i].flag)\n\t\t\t\t\t{w[Xx][i].flag=true;\n\t\t\t\t\tw[Xx][1].v=w[Xx][1].y-w[Xx][1].x+1-w[Xx][1].v+w[Xx][i].v;\n\t\t\t\t\tw[Xx][1].y=w[Xx][i].y;break;}\n                    ans-=ab;\n                }\n            }\n            else{\n                loop:;\n                w[XX][YY].flag=true;int rmb;\n                for(int i=YY+1;i<=m;++i) if(!w[XX][i].flag) {rmb=i;break;}\n                w[XX][rmb].flag=true;\n                for(int i=YY-1;i>=1;--i) if(!w[XX][i].flag)\n\t\t\t\t{w[XX][i].v+=w[XX][rmb].v+(w[XX][YY].y-w[XX][YY].x+1-w[XX][YY].v);\n\t\t\t\tw[XX][i].y=w[XX][rmb].y;break;}\n                ans-=ac;\n            }\n        }\n    }\n    printf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1523627232,
        "uid": 64856,
        "name": "\u30df\u30af",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u697c\u4e0a\u9898\u89e3\u8c8c\u4f3c\u6709\u70b9\u7384\uff1f\u90a3\u6211\u6765\u5199\u4e2a\u66f4\u7384\u7684\uff08\u96fe\r\n\r\n\u6211\u4eec\u5148\u4e0d\u7ba1\u5217\uff0c\u8003\u8651\u6bcf\u4e00\u884c\uff0c\u5f88\u5bb9\u6613\u60f3\u5230\u8bbef[i][j]\u8868\u793a**\u5f53\u524d\u8fd9\u4e00\u884c**\u524di\u4e2a\u6570\u6d82j\u6b21\u8272\u6240\u80fd\u6b63\u786e\u6d82\u8272\u7684\u6700\u591a\u683c\u5b50\u6570\r\n\r\n\u518d\u679a\u4e3e\u4e00\u4e2ak(j\u2264k\u2264i)\uff0c\u8003\u8651\u5f53\u524d\u7b2ck\u4e2a\u683c\u5b50\u5230\u7b2ci\u4e2a\u683c\u5b50\u7684\u60c5\u51b5\r\n\r\n\u6211\u4eec\u8981\u5206\u60c5\u51b5\u8ba8\u8bba\uff1a\r\n\r\n1. \u7b2ci\u4e2a\u683c\u5b50\u5fc5\u987b\u6b63\u786e\u7684\u5237\uff0c\u90a3\u4e48\u610f\u5473\u7740k~i\u6240\u5237\u7684\u989c\u8272\u5fc5\u987b\u662f\u4e0ei\u76f8\u540c\u7684\u989c\u8272\u3002\u6211\u4eec\u7528sum\u6765\u8868\u793ak~i\u4e2d\u4e0ei\u989c\u8272\u76f8\u540c\u7684\u683c\u5b50\u4e2a\u6570\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u9012\u63a8\uff1a\r\n\r\n    F[i][j]=max{F[k-1][j-1]+sum}(j\u2264k\u2264i)\r\n\r\n2. \u7b2ci\u4e2a\u683c\u5b50\u9519\u8bef\u5730\u5237\uff0c\u90a3\u4e48\u610f\u5473\u7740k~i\u6240\u5237\u7684\u989c\u8272\u5fc5\u987b\u662f\u4e0ei\u76f8\u53cd\u7684\u989c\u8272\uff08\u603b\u5171\u53ea\u6709\u4e24\u79cd\u989c\u8272\u563b\u563b\u563b\uff09\uff0c\u4ecd\u7136\u7528sum\u53ef\u4ee5\u9012\u63a8\uff1a\r\n\r\n    F[i][j]=max{F[k-1][j-1]+i-k+1-sum}(j\u2264k\u2264i)\r\n\r\n\u4ee5\u4e0a\u4e24\u4e2a\u53d6\u6700\u5927\u503c\u5373\u53ef\u3002\r\n\r\n\u4f46\u662f\uff0c\u8fd9\u9053\u9898\u5230\u8fd9\u91cc\u5f53\u7136\u8fd8\u6ca1\u6709\u505a\u5b8c\u2014\u2014\u8fd8\u6709\u5217\u6ca1\u8003\u8651\u5462\uff01\r\n\r\n\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u8bb0g[i][j]\u8868\u793a\u7b2ci\u884c\u6d82j\u6b21\u8272\u6700\u591a\u80fd\u6b63\u786e\u6d82\u7684\u683c\u5b50\u6570\uff0c\u800c\u9898\u76ee\u8bf4\u6700\u591a\u80fd\u6d82t\u6b21\u8272\uff0c\u662f\u4e0d\u662f\u5f88\u5bb9\u6613\u60f3\u5230\u80cc\u5305\u95ee\u9898\uff01\r\n\r\n\u81f3\u6b64\u5c31\u7ed3\u675f\u4e86\uff0c\u5f53\u7136\u4e5f\u6709\u4e0d\u5c11\u5c0f\u7684\u7ec6\u8282\u5c31\u89c1\u7a0b\u5e8f\u5427\uff08\u89e3\u91ca\u4e0a\u9762\u5e94\u8be5\u5dee\u4e0d\u591a\u4e86\uff0c\u6545\u4ee3\u7801\u5c31\u4e0d\u6ce8\u91ca\u4e86\uff09\r\n\r\n```cpp\r\n#include<cstdio>\r\n#include<cstring>\r\n#define MAX(x,y) (x>y?x:y)\r\n#define MIN(x,y) (x<y?x:y)\r\nconst int N=55,T=2505;\r\nint n,m,t;\r\nint b[N][N],f[N][T],mx[N],g[N][T],dp[T];\r\nint main()\r\n{\r\n    scanf(\"%d%d%d\",&n,&m,&t);\r\n    for(int i=1;i<=n;i++)\r\n        for(int j=1;j<=m;j++)\r\n        {\r\n            scanf(\"%1d\",&b[i][j]);\r\n            if(j==1||b[i][j]!=b[i][j-1]) mx[i]++;\r\n        }\r\n    for(int l=1;l<=n;l++)\r\n    {\r\n        memset(f,0,sizeof(f));\r\n        for(int i=1;i<=m;i++)\r\n        {\r\n            for(int j=1;j<=mx[l];j++)\r\n            {\r\n                int r=0;\r\n                for(int k=i;k>=j;k--)\r\n                {\r\n                    if(b[l][k]==b[l][i]) r++;\r\n                    f[i][j]=MAX(f[i][j],f[k-1][j-1]+r);\r\n                    f[i][j]=MAX(f[i][j],f[k-1][j-1]+i-k+1-r);\r\n                }\r\n                g[l][j]=MAX(g[l][j],f[i][j]);\r\n            }\r\n        }\r\n    }\r\n    for(int i=1;i<=n;i++)\r\n        for(int j=t;j>=1;j--)\r\n            for(int k=1;k<=MIN(j,mx[i]);k++)\r\n                dp[j]=MAX(dp[j],dp[j-k]+g[i][k]);\r\n    printf(\"%d\",dp[t]);\r\n}\r\n```",
        "postTime": 1502030736,
        "uid": 9757,
        "name": "x_faraway_x",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4158 \u3010\u7b28\u7b28\u5f53\u7c89\u5237\u5320_NOI\u5bfc\u520a2011\u63d0\u9ad8\uff0810\uff09\u3011"
    },
    {
        "content": "# \u9898\u76ee\n&emsp;&emsp;[\u70b9\u8fd9\u91cc](https://www.luogu.com.cn/problem/P4158)\u770b\u9898\u76ee\u3002  \n# \u5206\u6790\n&emsp;&emsp;\u9996\u5148\u53ef\u4ee5\u8003\u8651\u4e00\u4e2a\u6bd4\u8f83\u7c97\u7cd9\u7684\u5927 DP \uff1a  \n&emsp;&emsp;$f(i,j)$\uff1a\u524d$i$\u884c\uff0c\u5237$j$\u6b21\uff0c\u6700\u591a\u80fd\u5237\u7684\u6b63\u786e\u683c\u5b50\u6570\u3002  \n&emsp;&emsp;\u8f6c\u79fb\u662f\u4e00\u4e2a\u80cc\u5305\uff1a  \n$$f(i,j)=\\max_{1\\le k\\le m}\\{f(i-1,j-k)+con(i,k)\\}$$  \n&emsp;&emsp;\u5176\u4e2d$con(i,k)$\u8868\u793a\u7b2c$i$\u884c\u5237$k$\u6b21\u6700\u591a\u80fd\u5237\u7684\u6b63\u786e\u683c\u5b50\u6570\u3002  \n&emsp;&emsp;\u6211\u4eec\u53d1\u73b0\uff0c\u7531\u4e8e$con$\u662f\u6309\u884c\u72ec\u7acb\u7684\uff0c\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u884c\u6211\u4eec\u53ef\u4ee5\u518d\u505a\u4e00\u6b21 DP \u5904\u7406\u51fa$con$\u3002  \n&emsp;&emsp;\u5bf9\u4e8e\u7b2c$i$\u884c\uff0c\u6211\u4eec\u6709\u5982\u4e0b\u7684 DP \uff1a  \n&emsp;&emsp;$g(j,k)$\uff1a\u524d$j$\u4e2a\u683c\u5b50\u5237$k$\u6b21\u6700\u591a\u80fd\u5237\u7684\u6b63\u786e\u683c\u5b50\u6570\u3002  \n&emsp;&emsp;\u8bbe$mx(j,k)$\u4e3a\u7b2c$i$\u884c\u5237\u4e00\u6b21\u533a\u95f4$[j,k]$\u6700\u591a\u80fd\u5237\u7684\u6b63\u786e\u683c\u5b50\u6570\uff0c\u4e5f\u5c31\u662f\u533a\u95f4\u5185\u6570\u91cf\u6700\u591a\u7684\u989c\u8272\u7684\u6570\u91cf\u3002  \n&emsp;&emsp;\u8f6c\u79fb\u663e\u7136\uff1a   \n$$g(j,k)=\\max_{0\\le l< j}\\{g(l,k-1)+mx(l+1,j)\\}$$  \n&emsp;&emsp;\u5185\u5c42 DP \u4e00\u6b21$O(m^3)$\uff0c\u505a$n$\u6b21\u5c31\u662f$O(nm^3)$\uff1b\u5916\u5c42 DP $O(nmT)$\u3002\u603b\u65f6\u95f4$O(nm^3+nmT)$\u3002  \n# \u4ee3\u7801\n```cpp\n#include <cstdio>\n\nconst int INF = 0x3f3f3f3f;\nconst int MAXN = 55, MAXM = 55, MAXT = 2505;\n\ntemplate<typename _T>\nvoid read( _T &x )\n{\n\tx = 0;char s = getchar();int f = 1;\n\twhile( s > '9' || s < '0' ){if( s == '-' ) f = -1; s = getchar();}\n\twhile( s >= '0' && s <= '9' ){x = ( x << 3 ) + ( x << 1 ) + ( s - '0' ), s = getchar();}\n\tx *= f;\n}\n\ntemplate<typename _T>\nvoid write( _T x )\n{\n\tif( x < 0 ){ putchar( '-' ); x = ( ~ x ) + 1; }\n\tif( 9 < x ){ write( x / 10 ); }\n\tputchar( x % 10 + '0' );\n}\n\ntemplate<typename _T>\n_T MAX( const _T a, const _T b )\n{\n\treturn a > b ? a : b;\n}\n\nint g[MAXM][MAXM], f[MAXT];\nint col[MAXN][MAXM];\nint N, M, T;\n\nint main()\n{\n\tread( N ), read( M ), read( T );\n\tfor( int i = 1 ; i <= N ; i ++ )\n\t\tfor( int j = 1 ; j <= M ; j ++ )\n\t\t\tscanf( \"%1d\", &col[i][j] );\n\tfor( int i = 1 ; i <= T ; i ++ ) f[i] = -INF;\n\tfor( int i = 1 ; i <= M ; i ++ ) g[0][i] = -INF;\n\tfor( int i = 1 ; i <= N ; i ++ )\n\t{\n\t\tfor( int j = 1 ; j <= M ; j ++ )\n\t\t\tfor( int k = 1 ; k <= j ; k ++ )\n\t\t\t{\n\t\t\t\tg[j][k] = -INF; int cnt[2] = {};\n\t\t\t\tfor( int l = j - 1 ; ~ l ; l -- )\n\t\t\t\t\tcnt[col[i][l + 1]] ++, g[j][k] = MAX( g[j][k], g[l][k - 1] + MAX( cnt[0], cnt[1] ) );\n\t\t\t}\n\t\tfor( int j = T ; j ; j -- )\n\t\t\tfor( int k = 1 ; k <= M && k <= j ; k ++ )\n\t\t\t\tf[j] = MAX( f[j], f[j - k] + g[M][k] );\n\t}\n\twrite( f[T] ), putchar( '\\n' );\n\treturn 0;\n}\n```",
        "postTime": 1588592979,
        "uid": 123809,
        "name": "crashed",
        "ccfLevel": 0,
        "title": "[SCOI2009]\u7c89\u5237\u5320"
    },
    {
        "content": "#### \u89e3\u9898\u601d\u8def\n\u4e00\u5f00\u59cb\u8bfb\u9519\u4e86\u9898\uff0c\u6ca1\u770b\u5230\u53ea\u80fd\u5237\u4e00\u904d\uff0c\u767d\u8d39\u4e86\u534a\u4e2a\u5c0f\u65f6\u3002\n\u7136\u540e\u7a81\u7136\u53d1\u73b0\u539f\u6765\u6bcf\u4e2a\u683c\u5b50\u53ea\u80fd\u5237\u4e00\u904d\u554a\uff0c\u90a3\u5c31\u76f4\u63a5\u5f00\u72b6\u6001DP\u4e86\u3002\n\n\u8bbe`dp[i][j][k][0/1]`\u8868\u793a\u5237\u5230\u7b2ci\u884c\u7b2cj\u5217\u518d\u5237\u7b2ck\u6b21\u5c06\u5f53\u524d\u683c\u5237\u6210\u7ea2/\u84dd\u7684\u6700\u4f18\u503c\u3002\n\u8f6c\u79fb\u663e\u7136\uff0c\u6ce8\u610f\u6362\u884c\u65f6\u7279\u5224\u3002\n```\nif(j==1){\n\tif(ch[i][j]=='0')\n\t\tdp[i][j][q][0]=max(dp[i-1][m][q-1][0],dp[i-1][m][q-1][1])+1,\n\t\tdp[i][j][q][1]=max(dp[i-1][m][q-1][0],dp[i-1][m][q-1][1]);\n\tif(ch[i][j]=='1')\n\t\tdp[i][j][q][1]=max(dp[i-1][m][q-1][1],dp[i-1][m][q-1][0])+1,\n\t\tdp[i][j][q][0]=max(dp[i-1][m][q-1][0],dp[i-1][m][q-1][1]);\n\tcontinue;\n}\nif(ch[i][j]=='0')\n\tdp[i][j][q][0]=max(dp[i][j-1][q-1][1],dp[i][j-1][q][0])+1,\n\tdp[i][j][q][1]=max(dp[i][j-1][q-1][0],dp[i][j-1][q][1]);\nif(ch[i][j]=='1')\n\tdp[i][j][q][1]=max(dp[i][j-1][q-1][0],dp[i][j-1][q][1])+1,\n\tdp[i][j][q][0]=max(dp[i][j-1][q-1][1],dp[i][j-1][q][0]);\n```\nWA\u4e86\u4e00\u6b21\u662f\u56e0\u4e3a\u7b2c\u4e09\u91cd\u5faa\u73af\u6ca1\u4ece1\u5f00\u59cb\uff0c\u672c\u6765\u662f\u60f3\u4f18\u5316\u4e0b\u65f6\u95f4\uff0c\u4e0d\u6599\u5374\u5f04\u5de7\u6210\u62d9\uff0c\u679c\u7136\u63d0\u524d\u7684\u4f18\u5316\u90fd\u662f\u8d1f\u4f18\u5316\u3002\n\n#### AC\u4ee3\u7801\n```\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nint n,m,k,dp[60][60][3000][2],ans(0);\nchar ch[60][60];\nint main(){\n\tcin>>n>>m>>k;\n\tfor(int i=1;i<=n;++i)\n\t\tcin>>ch[i]+1;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=m;++j)\n\t\t\tfor(int q=max(1,i-1);q<=min(k,(i-1)*m+j);++q){\n\t\t\t\tif(j==1){\n\t\t\t\t\tif(ch[i][j]=='0')\n\t\t\t\t\t\tdp[i][j][q][0]=max(dp[i-1][m][q-1][0],dp[i-1][m][q-1][1])+1,\n\t\t\t\t\t\tdp[i][j][q][1]=max(dp[i-1][m][q-1][0],dp[i-1][m][q-1][1]);\n\t\t\t\t\tif(ch[i][j]=='1')\n\t\t\t\t\t\tdp[i][j][q][1]=max(dp[i-1][m][q-1][1],dp[i-1][m][q-1][0])+1,\n\t\t\t\t\t\tdp[i][j][q][0]=max(dp[i-1][m][q-1][0],dp[i-1][m][q-1][1]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(ch[i][j]=='0')\n\t\t\t\t\tdp[i][j][q][0]=max(dp[i][j-1][q-1][1],dp[i][j-1][q][0])+1,\n\t\t\t\t\tdp[i][j][q][1]=max(dp[i][j-1][q-1][0],dp[i][j-1][q][1]);\n\t\t\t\tif(ch[i][j]=='1')\n\t\t\t\t\tdp[i][j][q][1]=max(dp[i][j-1][q-1][0],dp[i][j-1][q][1])+1,\n\t\t\t\t\tdp[i][j][q][0]=max(dp[i][j-1][q-1][1],dp[i][j-1][q][0]);\n\t\t\t}\n\tfor(int i=1;i<=k;++i)\n\t\tans=max(dp[n][m][i][0],max(ans,dp[n][m][i][1]));\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1564674280,
        "uid": 26512,
        "name": "Christopher_Yan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u8fd9\u597d\u50cf\u662f\u4e2a\u66b4\u529b?\n\n\u4f46\u662f\u8dd1\u7684\u633a\u5feb\u7684\n\n\u6211\u4eec\u8bbe$dp[i][j][k]$\u8868\u793a\u5728\u7b2c$i$\u884c\u6211\u4eec\u6700\u8fdc\u67d3\u5230\u7684\u4f4d\u7f6e\u662f$j$\uff0c\u8fd9\u4e00\u884c\u4e0a\u4e00\u5171\u67d3\u4e86$k$\u6b21\u6700\u591a\u80fd\u67d3\u5bf9\u591a\u5c11\u4e2a\u683c\u5b50\n\n\u7406\u6027\u5206\u6790\u4e00\u4e0b\u554a\uff0c\u6bcf\u4e00\u884c\u6700\u591a\u4e5f\u5c31\u67d3$m$\u6b21\uff0c\u8fd9\u6837\u5c31\u80fd\u628a\u8fd9\u4e00\u884c\u683c\u5b50\u5168\u90e8\u90fd\u67d3\u5bf9\n\n\u6240\u4ee5\u8fd9\u4e2a\u7a7a\u95f4\u590d\u6742\u5ea6\u662f$nm^2$\u7684\n\n\u4e4b\u540e\u8003\u8651\u4e00\u4e0b\u8f6c\u79fb\n\n\u663e\u7136\u8fd9\u5c31\u662f\u4e00\u4e2a\u975e\u5e38\u7ecf\u5178\u7684\u65ad\u70b9$dp$\u4e86\uff0c\u8f6c\u79fb\u4e3a\n\n$$dp[i][j][k]=max(dp[i][p][k-1]+max(s_0[p+1,j],s_1[p+1,j]))$$\n\n$s_0[p+1,j]$\u8868\u793a\u8fd9\u4e2a\u533a\u95f4\u5185\u6709\u51e0\u4e2a$0$\uff0c\u540e\u9762\u90a3\u4e2a\u4e5f\u5c31\u662f\u6211\u4eec\u80fd\u591f\u6b63\u786e\u8986\u76d6\u7684\u683c\u5b50\u6570\u91cf\n\n\u6700\u540e\u7528\u5206\u7ec4\u80cc\u5305\u5408\u5e76\u5927\u6848\u5c31\u597d\u4e86\n\n\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define max(a,b) ((a)>(b)?(a):(b))\n#define re register\nint dp[51][51][51]; \nint pre[51][51][2];\nchar S[51][51];\nint f[2501];\nint n,m,T;\nint main()\n{\n    scanf(\"%d%d%d\",&n,&m,&T);\n    for(re int i=1;i<=n;i++)\n    {\n        scanf(\"%s\",S[i]+1);\n        for(re int j=1;j<=m;j++)\n        if(S[i][j]=='1') pre[i][j][1]=pre[i][j-1][1]+1,pre[i][j][0]=pre[i][j-1][0];\n            else pre[i][j][1]=pre[i][j-1][1],pre[i][j][0]=pre[i][j-1][0]+1;\n    }\n    for(re int i=1;i<=n;i++)\n        for(re int j=1;j<=m;j++)\n            for(re int k=1;k<=j;k++)\n                for(re int p=0;p<j;p++)\n                    dp[i][j][k]=max(dp[i][j][k],dp[i][p][k-1]+max(pre[i][j][0]-pre[i][p][0],pre[i][j][1]-pre[i][p][1]));\n    for(re int i=1;i<=n;i++)\n        for(re int j=T;j>=0;j--)\n            for(re int k=0;k<=m;k++)\n                if(j-k>=0) f[j]=max(f[j],f[j-k]+dp[i][m][k]);\n    printf(\"%d\\n\",f[T]);\n    return 0;\n}\n\n```",
        "postTime": 1540340037,
        "uid": 35178,
        "name": "asuldb",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u5f88\u663e\u800c\u6613\u89c1\u7684\u4e00\u4e2a\u52a8\u6001\u89c4\u5212\r\n\r\n\u8bbeDPN[a][t][u]\u4ee3\u8868\u7b2ca\u4e2a\u6728\u677f\u5728t\u4e4b\u524d\u5237u\u6b21\u6700\u591a\u5408\u683c\u7684\u683c\u5b50\u4e2a\u6570\r\n\r\n\u90a3\u4e48DPN[a][t][u]=max(MaxSum(a,i,t)+DPN[a][i-1][u-1])\r\n\r\n\u5176\u4e2dMaxSum\u662f\u5728i\u5230t\u533a\u95f4\u91cc\u4e24\u4e2a\u989c\u8272\u4e2d\u6700\u591a\u7684\u90a3\u4e2a\u4e2a\u6570\r\n\r\n\u8fd9\u6837\u6c42\u51faDPN\u7684\u590d\u6742\u5ea6\u662fN^4\r\n\r\n\u6c42\u51fa\u540e\u7b80\u5316\u6210Mp[a][u]\uff0c\u4ee3\u8868\u7b2ca\u4e2a\u6728\u677f\u5237u\u6b21\u6700\u591a\u4e2a\u6570\r\n\r\n\u7136\u540e\u5728\u8bbeDPM[a][t]\u8868\u793a\u524da\u4e2a\u6728\u677f\u5171t\u6b21\u64cd\u4f5c\u7684\u6700\u591a\u6b63\u786e\u5757\r\n\r\n\u8fd9\u4e2a\u901a\u8fc7Mp\u53ef\u4ee5\u6c42\u51fa\r\n\r\nDPM[a][t]=max(DPM[a-1][t-u]+Mp[a][u])\r\n\r\n\u590d\u6742\u5ea6\u662fmn^2\uff0c\u548cDPN\u590d\u6742\u5ea6\u5dee\u4e0d\u591a\r\n\r\n\u90a3\u4e48DPM[N][T]\u5c31\u662f\u7b54\u6848\r\n\r\n\r\n\r\n\r\n\r\n\r\n```cpp\r\n#include <stdio.h>\r\n#define max(a,b) ((a)>(b)?(a):(b))\r\n#define min(a,b) (a>b?b:a)\r\n#define S1(a,f,t) (Sum[a][t]-Sum[a][f-1])\r\n#define S0(a,f,t) (t-(f)+1-S1(a,f,t))\r\nint N,M,T;\r\nchar DPN[60][60][60];\r\nint DPM[60][2510];\r\nchar Mxp[60][60];\r\nint ReadChar()\r\n{\r\n    char c=getchar();\r\n    while(c<'0'||c>'9')\r\n        c=getchar();\r\n    return c-'0';\r\n}\r\nchar Sum[60][60];\r\nvoid Input()\r\n{\r\n    scanf(\"%d %d %d\",&N,&M,&T);\r\n    int wia,wib;\r\n    for(wia=1;wia<=N;++wia)\r\n        for(wib=1;wib<=M;++wib)\r\n            Sum[wia][wib]=Sum[wia][wib-1]+ReadChar();\r\n    if(T>N*M)\r\n        T=N*M;\r\n}\r\nvoid DPA()\r\n{\r\n    int ww,wu,wt,wf;\r\n    for(ww=1;ww<=N;++ww)\r\n        for(wu=1;wu<=M;++wu)\r\n            for(wt=1;wt<=M;++wt)\r\n                if(Sum[ww][wt]-Sum[ww][wt-1])\r\n                    for(wf=wt-1;wf>=0;--wf)\r\n                        DPN[ww][wt][wu]=max(DPN[ww][wt][wu],DPN[ww][wf][wu-1]+S1(ww,wf+1,wt));\r\n                else\r\n                    for(wf=wt-1;wf>=0;--wf)\r\n                        DPN[ww][wt][wu]=max(DPN[ww][wt][wu],DPN[ww][wf][wu-1]+S0(ww,wf+1,wt));\r\n    for(ww=1;ww<=N;++ww)\r\n        for(wu=1;wu<=M;++wu)\r\n            for(wt=1;wt<=M;++wt)\r\n                Mxp[ww][wu]=max(Mxp[ww][wu],DPN[ww][wt][wu]);\r\n    for(wu=1;wu<=T;++wu)\r\n        for(ww=1;ww<=N;++ww)\r\n            for(wt=0;wt<=min(M,wu);++wt)\r\n                DPM[ww][wu]=max(DPM[ww][wu],DPM[ww-1][wu-wt]+Mxp[ww][wt]);\r\n}\r\nint main()\r\n{\r\n    Input();\r\n    DPA();\r\n    printf(\"%d\\n\",DPM[N][T]);\r\n    return 0;\r\n}\r\n```",
        "postTime": 1498230907,
        "uid": 25508,
        "name": "Night_Aurora",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4158 \u3010\u7b28\u7b28\u5f53\u7c89\u5237\u5320_NOI\u5bfc\u520a2011\u63d0\u9ad8\uff0810\uff09\u3011"
    },
    {
        "content": "\n\u3010\u5206\u6790\u3011\n\n\t       \u7b2c\u4e00\u773c\u7684\u60f3\u6cd5\u662fDP+\u80cc\u5305\uff0c\u5148\u5904\u7406\u51fa\u6bcf\u4e2a\u677f\u5b50\u5237\u5404\u79cd\u6b21\u6570\u6700\u591a\u5237\u7684\u683c\u5b50\u6570\uff0c\u7136\u540e\u5f53\u5206\u7ec4\u80cc\u5305\u505a\u3002\u4f46\u662f\u74f6\u9888\u5c31\u5728\u4e8e\u9884\u5904\u7406\uff0c\u56e0\u4e3a\u53ef\u4ee5\u9519\u8bef\u7c89\u5237\u3002\n\t       \u8003\u8651\u5bf9\u4e8e\u6bcf\u4e00\u5757\u677f\u5b50\uff0c\u7528Opt[i][j][1/0]\u8868\u793a\u5237\u5230\u7b2ci\u4f4d\u5168\u5237\uff0c\u5237\u4e86j\u6b21\uff0c\u4e14\u7b2ci\u4f4d\u5237\u7684\u662f\u84dd/\u7ea2\u8272\u7684\u6700\u591a\u6b63\u786e\u5237\u7684\u683c\u5b50\u6570\u3002\u8003\u8651\u8f6c\u79fb\uff1a\n\t\tOpt[i][j][0]=max(Opt[i-1][j][0]+(A[i]==0),Opt[i-1][j-1][1]+(A[i]==0));\n\t       \u53e6\u4e00\u4e2a\u7c7b\u4f3c\uff0c\u7136\u540e\u3002\u3002\u3002\u5c31\u5207\u6389\u4e86\u3002\u3002\u3002\u4e0d\u6562\u76f8\u4fe1\u3002\u3002\u3002\n           \n\u3010\u4ee3\u7801\u3011\n```\n\t#include<bits/stdc++.h>\n\t#define LL long long\n\t#define ULL unsigned long long\n\tusing namespace std;\n\tint N,M,T,Cnt;\n\tchar c;\n\tint A[51],Opt[51][51][2],G[51][51];\n\tint DP[51][2501];\n\tvoid DP1(){\n\t\tmemset(Opt,0,sizeof(Opt));\n\t\tfor(int i=1;i<=M;++i)\n\t\t\tfor(int j=1;j<=min(M,T);++j){\n\t\t\t\tOpt[i][j][0]=max(Opt[i-1][j][0],Opt[i-1][j-1][1])+(A[i]==0);\n\t\t\t\tOpt[i][j][1]=max(Opt[i-1][j][1],Opt[i-1][j-1][0])+(A[i]==1);\n\t\t\t}\n\t\tfor(int i=1;i<=min(M,T);++i)\n\t\t\tG[Cnt][i]=max(Opt[M][i][0],Opt[M][i][1]);\n\t}\n\tint main(){\n\t\tscanf(\"%d%d%d\",&N,&M,&T);\n\t\tfor(int i=1;i<=N;++i){\n\t\t\t++Cnt;\n\t\t\tfor(int j=1;j<=M;++j){\n\t\t\t\tcin>>c;\n\t\t\t\tA[j]=c-'0';\n\t\t\t}\n\t\t\tDP1();\n\t\t}\n\t\tfor(int i=1;i<=N;++i)\n\t\t\tfor(int j=1;j<=T;++j){\n\t\t\t\tDP[i][j]=DP[i-1][j];\n\t\t\t\tfor(int k=1;k<=j&&k<=min(M,T);++k)\n\t\t\t\t\tDP[i][j]=max(DP[i][j],DP[i-1][j-k]+G[i][k]);\n\t\t\t}\n\t\tprintf(\"%d\\n\",DP[N][T]);\n\t\treturn 0;\n\t}\n```\n",
        "postTime": 1564470752,
        "uid": 24518,
        "name": "\u5047\u88c5\u601d\u8003",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "## [\u5e7f\u544a](https://www.cnblogs.com/lizbaka/p/10417671.html)\n\n# Solution\n\u849f\u84bb\u770b\u5230\u8fd9\u9898\u60f3\u4e86$n$\u591a\u79cd~~\u5b8c\u5168\u4e0d\u6b63\u786e\u7684~~\u5904\u7406\u65b9\u6cd5\uff0c\u5982\u679c\u662f\u5728\u8003\u573a\u4e0a\u4f30\u8ba1\u5df2\u7ecf\u5149\u901f\u51c9\u51c9\u4e86$QAQ$\n\n---\n\n\u5bf9\u4e8e\u6bcf\u4e00\u884c\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u5206\u6210\u82e5\u5e72\u4e2a\u989c\u8272\u4e0d\u540c\u7684\u8fde\u7eed\u6bb5\uff08\u5bf9\u5e94\u82e5\u5e72\u6b21\u989c\u8272\u4e0d\u540c\u7684\u7c89\u5237\uff09\uff0c\u4ece\u5de6\u5230\u53f3\u8003\u8651\n\n\u6ce8\u610f\u5230\u9898\u76ee\uff1a\n>\u4e00\u4e2a\u683c\u5b50\u5982\u679c\u672a\u88ab\u7c89\u5237\u6216\u8005\u88ab\u7c89\u5237\u9519\u989c\u8272\uff0c\u5c31\u7b97\u9519\u8bef\u7c89\u5237\u3002\n\n\u610f\u601d\u5c31\u662f**\u4e0d\u5237\u767d\u4e0d\u5237**\n\n\u5982\u679c\u662f\u989c\u8272\u4e0d\u5bf9\uff0c\u591a\u5237\u8fd9\u4e00\u683c\u4e0d\u4f1a\u6bd4\u4e0d\u5237\u5dee\uff0c\u5c31\u4e0d\u9700\u8981\u8003\u8651\u4e0d\u5237\u7684\u60c5\u51b5\n\n\u6240\u4ee5\u6211\u4eec\u6709\uff1a\n\n\u72b6\u6001\uff1a\u8bbe$dp_{i,j,k,0/1}$\u8868\u793a\u5f53\u524d\u679a\u4e3e\u5230\u7b2c$i$\u884c\uff0c\u7b2c$j$\u4e2a\u683c\u5b50\uff0c\u5df2\u7ecf\u6d82\u4e86$k$\u6b21\uff08\u5206\u6210\u4e86$k$\u6bb5\uff09\uff0c\u5f53\u524d\u683c\u5b50\u6d82\u7684\u989c\u8272\u662f$0/1$\n\n\u65b9\u7a0b\uff1a\n$$dp_{i,j,k,x}=max(dp_{i,j-1,k,x},dp_{i,j-1,k-1,x\\space xor\\space 1})+[x=color_{i,j}]$$\n\n(\u65b9\u62ec\u53f7\u662f\u827e\u5f17\u68ee\u62ec\u53f7\uff0c\u5f53\u5176\u4e2d\u7684\u6761\u4ef6\u4e3a\u771f\u65f6\u503c\u4e3a$1$\uff0c\u5426\u5219\u4e3a$0$)\n\n\u8fd9\u4e2a\u8f6c\u79fb\u5e94\u8be5\u5f88\u597d\u7406\u89e3\u5427\n\n---\n\u5904\u7406\u5b8c\u6bcf\u4e00\u884c\u4e4b\u540e\uff0c$max(dp_{i,m,k,0},dp_{i,m,k,1})$\u5373\u4e3a\u7b2c$i$\u884c\u5206\u914d$k$\u6b21\u7c89\u5237\u6b21\u6570\u6240\u80fd\u6b63\u786e\u7c89\u5237\u7684\u6700\u5927\u683c\u5b50\u6570\n\n\u8fd9\u6837\uff0c\u6bcf\u4e00\u884c\u4f5c\u4e3a\u4e00\u7ec4\uff0c\u539f\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5206\u7ec4\u80cc\u5305\u95ee\u9898\uff0c\u5728\u6b64\u4e0d\u518d\u8d58\u8ff0\n\n# Code\n\u4ee3\u7801\u4e2d\u6240\u7528\u7684\u5b57\u6bcd\u4e0e\u4e0a\u8ff0\u8f6c\u79fb\u65b9\u7a0b\u7565\u6709\u4e0d\u540c\uff0c\u8bf7\u6ce8\u610f\u8fa8\u522b\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstdlib>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#define maxn 55\n#define maxm 55\n#define maxt 2505\nusing namespace std;\ntypedef long long ll;\n\ntemplate <typename T> void read(T &t)\n{\n\tt=0;int f=0;char c=getchar();\n\twhile(!isdigit(c)){f|=c=='-';c=getchar();}\n\twhile(isdigit(c)){t=t*10+c-'0';c=getchar();}\n\tif(f)t=-t;\n}\n\nint n,m,t;\nint col[maxn][maxm];\nint dp[maxn][maxm][maxm][2],tdp[maxt];\n\nint main()\n{\n\tread(n),read(m),read(t);\n\tfor(register int i=1;i<=n;++i)\n\t{\n\t\tchar c[maxm];\n\t\tscanf(\"%s\",c+1);\n\t\tfor(register int j=1;j<=m;++j)\n\t\t\tcol[i][j]=c[j]-'0';\n\t}\n\tfor(register int li=1;li<=n;++li)\n\t\tfor(register int i=1;i<=m;++i)\n\t\t\tfor(register int k=1;k<=min(t,m);++k)\n\t\t\t\tfor(register int x=0;x<=1;++x)\n\t\t\t\t\tdp[li][i][k][x]=max(dp[li][i-1][k][x],dp[li][i-1][k-1][x^1])+(x==col[li][i]);\n\tfor(register int i=1;i<=n;++i)\n\t\tfor(register int j=t;j>=0;--j)\n\t\t\tfor(register int k=1;k<=min(j,m);++k)\n\t\t\t\ttdp[j]=max(tdp[j],tdp[j-k]+max(dp[i][m][k][0],dp[i][m][k][1]));\n\tprintf(\"%d\",tdp[t]);\n\treturn 0;\n}\n```",
        "postTime": 1550809785,
        "uid": 60418,
        "name": "lizbaka",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011P4158 [SCOI2009]\u7c89\u5237\u5320"
    },
    {
        "content": "# [SCOI2009]\u7c89\u5237\u5320\n### [BLOG](https://www.cnblogs.com/terribleterrible/p/9879111.html)\n\n### ![[SCOI2009]\u7c89\u5237\u5320](https://www.luogu.org/problemnew/show/P4158)\n\n\u5f88\u76f4\u63a5\u7684\u601d\u8def,\u7b80\u5355\u597d\u5199.\n\n\u5206\u522b\u5bf9\u6bcf\u5757\u6728\u677f\u505a\u533a\u95f4dp,\u8bbe$g[i][j]$\u8868\u793a\u524di\u4e2a\u683c\u5b50,\u5237\u6070\u597dj\u6b21,\u5e76\u4e14\u7b2ci\u683c\u662f\u5408\u6cd5\u7684\u6700\u591a\u5408\u6cd5\u7684\u683c\u5b50\u6570.\u4ece\u524d\u5f80\u540e\u679a\u4e3e\u65ad\u70b9\u6765\u8f6c\u79fb\u5c31\u597d\u4e86.\n\n\u8fd9\u6837\u5904\u7406\u518d\u51fa\u6765$g[i][j]$\u6bcf\u4e00\u5757\u6728\u677fi\u5237j\u6b21\u7684\u6700\u5927\u5408\u6cd5\u683c\u5b50\u6570.\n\n\u6700\u540e\u518d\u80cc\u5305\u5408\u5e76\u6bcf\u5757\u6728\u677f\u7684\u7b54\u6848,\u7528$dp[i][j]$\u8868\u793a\u524di\u5757\u6728\u677f,\u4e00\u5171\u6070\u597d\u5237\u4e86k\u6b21\u7684\u6700\u5927\u5408\u6cd5\u683c\u5b50\u6570,\u7528\u5237\u8868\u6cd5\u66b4\u529b\u80cc\u5305\u5408\u5e76\u5c31\u597d\u4e86.\n\n\u5f88\u8be6\u7ec6\u7684\u6ce8\u91ca.\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define maxn 55\nusing namespace std;\nint n,m,T,ans,sum[maxn],dp[maxn][maxn*maxn];\nint f[maxn][maxn],g[maxn][maxn];\nchar s[maxn];\n//\u5206\u522b\u5bf9\u6bcf\u5757\u6728\u677f\u533a\u95f4dp\n//\u518d\u7528\u80cc\u5305\u6765\u5408\u5e76\nint main()\n{\n\tcin>>n>>m>>T;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",s+1);\n\t\tmemset(g,0x8f,sizeof(g));\n\t\tg[0][0]=0;\n\t\tfor(int j=1;j<=m;j++)sum[j]=sum[j-1]+(s[j]=='1');//\u84dd\u8272\u7684\u524d\u7f00\u548c\n\t\t//g[j][k]\u5f53\u524d\u6728\u677f\u8868\u793a\u524dj\u4e2a\u683c\u5b50,\u5237k\u6b21\u7684\u6700\u591a\u5408\u6cd5\u7684\u683c\u5b50\u6570,\u5e76\u4e14j\u662f\u5408\u6cd5\u7684\u683c\u5b50\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tfor(int k=1;k<=j;k++)\n\t\t\t\tfor(int l=0;l<j;l++)\n\t\t\t\t{\n\t\t\t\t\tif(s[j]=='1')g[j][k]=max(g[j][k],g[l][k-1]+sum[j]-sum[l]);\n\t\t\t\t\telse g[j][k]=max(g[j][k],g[l][k-1]+j-l-sum[j]+sum[l]);\n\t\t\t\t}\n\t\t//f[j][k]\u8868\u793a\u7b2ci\u5757\u6728\u677f,\u6070\u597d\u5237k\u6b21\u7684\u6700\u591a\u5408\u6cd5\u683c\u5b50\u6570\n\t\tfor(int j=0;j<=m;j++)\n\t\t\tfor(int k=0;k<=j;k++)\n\t\t\t\tf[i][k]=max(f[i][k],g[j][k]);\n\t}\n\t//dp[i][j]\u8868\u793a\u524di\u4e2a\u5757\u6728\u677f,\u6070\u597d\u5237j\u6b21\u7684\u6700\u591a\u7684\u5408\u6cd5\u683c\u5b50\u6570\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=0;j<=T&&j<=i*m-m;j++)\n\t\t\tfor(int k=0;k<=m;k++)\n\t\t\t\tdp[i][j+k]=max(dp[i][j+k],dp[i-1][j]+f[i][k]);\n\tfor(int i=0;i<=T;i++)ans=max(ans,dp[n][i]);\n\tcout<<ans<<endl;\n\treturn 0;\n}\n\n```\n\n\n",
        "postTime": 1540900640,
        "uid": 61672,
        "name": "Brioche",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u597d\u5bb9\u6613\u505a\u51fa\u8fd9\u4e00\u9898\u3002\u9898\u89e3\u91cc\u9762\u5927\u4f6c\u7684\u4ee3\u7801\u90fd\u592a\u9ad8\u6df1\u770b\u4e0d\u61c2\uff0c\u8fd9\u91cc\u7ed9\u4e2a\u6e05\u65b0\u7684\n```cpp\n#include<cstdio>\ninline int max(int a,int b){return a>b?a:b;} \nint n,m,t,ans;\nconst int N=61;\nchar s[N];\nint sum[N],f[N][N],g[N][2333];\n//sum[i]\u8868\u793a\u4ece\u5f00\u59cb\u5230i\u7684'1'\u603b\u6570 \n//f[i][j]\u8868\u793a(\u679a\u4e3e\u7684\u5f53\u524d\u884c)\u524di\u4e2a\u683c\u5b50\u5237j\u6b21\u83b7\u5f97\u7684\u6700\u5927\u5206\u6570\n//g[i][j]\u8868\u793a\u524di\u884c\u5237j\u6b21\u83b7\u5f97\u7684\u6700\u5927\u5206\u6570\nint main() {\n\tscanf(\"%d%d%d\",&n,&m,&t);\n\tfor(int i=1; i<=n; i++) {\n\t\tscanf(\"%s\",s+1);\n\t\tfor(int j=1; j<=m; j++) sum[j]=sum[j-1]+(s[j]=='1');\n\t\t\tfor(int k=1; k<=m; k++) {\n\t\tfor(int j=1; j<=m; j++) {\n\t\t\t\tf[j][k]=0;//\u521d\u59cb\u5316 \n\t\t\t\tfor(int p=0; p<j; p++){\n\t\t\t\t\tint x=max((j-sum[j])-(p-sum[p]),sum[j]-sum[p]);//\u5982\u679c\u5237(p+1)~j\u8fd9\u8282,\u52371\u597d\u8fd8\u662f\u52370\u597d \n\t\t\t\t\tf[j][k]=max(f[j][k],f[p][k-1]+x);//\u5237(p+1)~j\u597d,\u8fd8\u662f\u4e0d\u5237\u597d \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(int j=1; j<=t; j++)//\u679a\u4e3e\u5237\u7684\u6b21\u6570 \n\t\t\tfor(int k=1; k<=j&&k<=m; k++)\n\t\t\t\tg[i][j]=max(g[i][j],g[i-1][j-k]+f[m][k]);\n\t\t\t\t//\u6bd4\u8f83\u5f53\u524d\u60c5\u51b5\u597d,\u8fd8\u662f(\u524d\u4e00\u884c\u5c11\u5237k\u6b21\u7684\u6700\u597d\u60c5\u51b5)\u52a0\u4e0a(\u5237\u73b0\u5728\u8fd9\u4e00\u884c\u5237k\u6b21\u7684\u6700\u597d\u60c5\u51b5)\u597d \n\t}\n\tfor(int i=1; i<=t; i++) ans=max(ans,g[n][i]);//\u627e\u51fa\u5237\u524dm\u884c\u5237i\u6b21\u7684\u6700\u5927\u5206\u6570 \n\tprintf(\"%d\",ans);\n}\n```",
        "postTime": 1537423308,
        "uid": 44658,
        "name": "\u590f\u591c\u7a7a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "## \u77e5\u8bc6\n\n- \u52a8\u6001\u89c4\u5212\n\n## \u601d\u8def\n\n\u5bf9\u4e8e\u4e0d\u5237\u7684\u65b9\u6848\uff0c\u6211\u4eec\u663e\u7136\u53ef\u4ee5\u4e00\u683c\u4e00\u683c\u5730\u820d\u5f03\uff0c\u4f20\u9012\u524d\u7f00\u6700\u5927\u503c\u6765\u5b9e\u73b0\uff08\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u524d\u4e24\u9879\uff09\u3002\n\n\u8bbe $dp_{i, j, k}$ \u8868\u793a\u5df2\u7ecf\u5237\u5b8c\uff08\u6216\u8005\u820d\u5f03\uff09\u524d $i - 1$ \u884c\u548c\u7b2c $i$ \u884c\u7684\u7b2c $j$ \u4e2a\uff0c\u5df2\u7ecf\u5237 $k$ \u6b21\u7684\u6700\u5927\u6b63\u786e\u6570\uff0c$sum_{0/1, i, j}$ \u8868\u793a\u7b2c $i$ \u884c $j$ \u5217\u7684\u524d\u7f00\u548c\uff0c\u90a3\u4e48\u6211\u4eec\u6709\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$dp_{i, j, k} = \n\\begin{cases} \ndp_{i - 1, j', k - 1} \\\\\ndp_{i, j - 1, k} \\\\\ndp_{i, j', k - 1} + sum_{0, i, j} - sum_{0, i, j'} \\\\\ndp_{i, j', k - 1} + sum_{1, i, j} - sum_{1, i, j'}\n\\end{cases}\n$\n\n\u524d\u4e24\u79cd\u662f\u5206\u522b\u662f\u820d\u5f03\u884c\u548c\u820d\u5f03\u683c\u5b50\u7684\u60c5\u51b5\uff0c\u91cd\u70b9\u5728\u540e\u4e24\u79cd\u3002\n\n\u6211\u4eec\u53d1\u73b0 $dp_{i, j', k - 1} - sum_{0/1, i, j'}$ \u4e0e\u5f53\u524d\u72b6\u6001 $j$ \u65e0\u5173\uff0c \u800c\u5269\u4e0b\u7684 $sum_{0/1, i, j}$ \u548c $j'$ \u65e0\u5173\uff0c\u4e0d\u5f71\u54cd\u51b3\u7b56\u3002\u90a3\u4e48\u6211\u4eec\u5bf9 $dp_{i, j', k - 1} - sum_{0/1, i, j'}$ \u5904\u7406\u524d\u7f00\u6700\u5927\u503c\uff0c\u518d\u7d2f\u52a0\u4e0a $sum_{0/1, i, j}$ \u5373\u53ef\u3002\n\n\u540c\u65f6\u6211\u4eec\u53d1\u73b0 $i$ \u53ea\u4e0e $i - 1$ \u6709\u5173\uff0c\u56de\u6eda\u538b\u7f29\u4e00\u7ef4\u3002\n\n## Code\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N = 5e1 + 5;\nconst int M = 2.5e5 + 5;\nint n, m, t, dp[2][N][M], pre[2][N][N];\nbool s[N][N];\n\nint main() {\n\t//freopen(\"data.in\", \"r\", stdin);\n\t\n\tscanf(\"%d%d%d\", &n, &m, &t);\n\tfor(int i = 1; i <= n; ++i)\n\t\tfor(int j = 1; j <= m; ++j) {\n\t\t\tscanf(\"%1d\", &s[i][j]);\n\t\t\tpre[1][i][j] = pre[1][i][j - 1] + s[i][j];\n\t\t\tpre[0][i][j] = pre[0][i][j - 1] + (!s[i][j]);\n\t\t}\n\t\n\tfor(int i = 1; i <= n; ++i) {\n\t\tint x = i & 1, y = x ^ 1;\n\t\tmemset(dp[x], 0, sizeof(dp[x]));\n\t\tfor(int k = 1; k <= t; ++k) { \n\t\t\tint sum0 = dp[y][m][k - 1], sum1 = dp[y][m][k - 1];\n\t\t\tfor(int j = 1; j <= m; ++j) {\n\t\t\t\tdp[x][j][k] = max(dp[x][j - 1][k], sum0 + pre[0][i][j]);\n\t\t\t\tdp[x][j][k] = max(dp[x][j][k], sum1 + pre[1][i][j]);\n\t\t\t\tsum0 = max(sum0, dp[x][j][k - 1] - pre[0][i][j]);\n\t\t\t\tsum1 = max(sum1, dp[x][j][k - 1] - pre[1][i][j]);\n\t\t\t}\n\t\t}\n\t\t/*\n\t\tfor(int j = 1; j <= m; ++j) {\n\t\t\tfor(int k = 1; k <= t; ++k) printf(\"%d \", dp[x][j][k]);\n\t\t\tputs(\"\");\n\t\t} puts(\"\");\n\t\t*/\n\t}\n\t\n\tint ans = 0;\n\tfor(int i = 1; i <= t; ++i) ans = max(ans, dp[n & 1][m][i]);\n\tprintf(\"%d\\n\", ans);\n\t\n\treturn 0;\n}\n```\n",
        "postTime": 1573647657,
        "uid": 75520,
        "name": "Merc03",
        "ccfLevel": 7,
        "title": "[P4158 / SCOI2009] \u7c89\u5237\u5320"
    },
    {
        "content": " \u8fd9\u662f\u849f\u84bb\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3~\uff08\u4e3b\u8981\u662f\u8fd9\u9898\u592a\u6bd2\u7624\u7ed9\u849f\u84bb\u5370\u8c61\u5f88\u6df1\uff09\n\n **\u4e0b\u9762\u6b63\u5f0f\u8fdb\u5165\u4e3b\u9898**\uff1a\n\n\n\n------------\n\n \u58f0\u660e\uff1a\n         \n         f[i][j]\u8868\u793a\u524di\u5757\u6728\u677f\uff0cj\u6b21\u7c89\u5237\u7684\u6700\u591a\u6b63\u786e\u683c\u5b50\u6570\n         b[i][x]\u8868\u793a\u7b2ci\u5757\u6728\u677f\uff0c\u5237x\u6b21\u6700\u591a\u6b63\u786e\u683c\u5b50\u6570\n         d[i][j]\u8868\u793a\u5f53\u524d\u6728\u677f\u5df2\u7ecf\u5904\u7406\u5230\u7b2ci\u4e2a\u683c\u5b50\uff0c\u8003\u8651\u7b2cj\u6b21\u7c89\u5237\u662f\u4ecek\uff081<=k<=i-1\uff09\u5237\u5230i\u7684\u6700\u591a\u683c\u5b50\u6570\n     //\u8fd9\u662f\u4e00\u9053\u8d44\u6e90\u5206\u914d\u7c7bDP\n\n\n------------\n\n\u9884\u5904\u7406+\u8f6c\u79fb\uff1a\n\n\u5bf9\u4e8eb[ ][ ]\u548cd[ ][ ],\u6211\u4eec\u5c06\u5b83\u4eec\u4e00\u8d77\u5904\u7406\u3002\n\n\u5bf9\u4e8e\u7b2ci\u5757\u6728\u677f\uff0c\u5f53\u524d\u5904\u7406\u5230\u7b2cj\u4e2a\u683c\u5b50\uff0c\u73b0\u5728\u662f\u7b2ck\u6b21\u7c89\u5237\u3002\n\n\u679a\u4e3e\u4e0a\u4e00\u6b21\u7c89\u5237\u7ed3\u675f\u7684\u4f4d\u7f6e\uff0c\u5373\u662f\u4ece\u54ea\u5237\u5230j\u7684\uff0c\u8bb0\u4e3a\u4f4d\u7f6el (1<=l<=j)\n\n\u53e6\u8bb0\u4e00\u4e2a\u53d8\u91cfr\uff0c\u8868\u793a\u4ecel\u5230j\u4e2d\u4e0ej\u989c\u8272\u76f8\u540c\u7684\u683c\u5b50\u6570\n\n \u90a3\u4e48\uff0c**d[j][k]=max{d[j][k],max{d[l-1][j-1]+r,d[l-1][j-1]+j-l+1-r}}**\n\n **\u4e3a\u4ec0\u4e48\u8981\u5206 r \u548c j-l+1-r \u4e24\u79cd\u60c5\u51b5\u5462\uff1f** \u56e0\u4e3a\u683c\u5b50\u53ef\u80fd\u662f\u7ea2\u8272\u4e5f\u53ef\u80fd\u662f\u84dd\u8272\n\n\u5904\u7406\u5b8cd[ ][ ],b[ ][ ]\u7684\u8f6c\u79fb\u65b9\u7a0b\u5c31\u5f88\u663e\u7136\u4e86\u3002\n\n **b[i][x]=d[m][x]**;\n\n\u5176\u4e2d\uff0ci\u8868\u793a\u7b2ci\u5757\u6728\u677f\uff0cx\u8868\u793a\u5237\u4e86x\u6b21\uff0cm\u5982\u9898\u76ee\u6240\u793a\u3002\n\n\u4e0b\u9762\u5904\u7406f[ ][ ].\n\n \u663e\u7136\uff0c**f[i][j]=max{f[i-1][j-x]+b[i][x]}**\n\n\u8868\u793a\u7b2ci\u5757\u6728\u677f\u5237x\u6b21\u5f97\u5230\u7684\u6700\u591a\u683c\u5b50\u6570\uff08\u5176\u5b9e\u662f\u4e00\u4e2a\u5c0f\u5c0f\u7684\u80cc\u5305DP\uff09\n\n**\u4e0b\u9762\u4e0a\u4ee3\u7801**\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<iostream>\n#include<cstring>\nusing namespace std;\nconst int N=55;\nconst int T=2505;\nint n,m,t;\nint b[N][T],d[N][T],f[N][T];\nchar a[N][N];\nint ans;\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&m,&t);\n\tfor(int i=1;i<=n;i++)\n\tcin>>(a[i]+1);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tmemset(d,0,sizeof(d));\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tfor(int k=1;k<=t;k++)\n\t\t\t{\n\t\t\t\tint r=0;\n\t\t\t\tfor(int l=j;l>=1;l--)\n\t\t\t\t{\n\t\t\t\t\tr+=(a[i][j]==a[i][l]);\n\t\t\t\t\td[j][k]=max(d[l-1][k-1]+r,d[j][k]);\n\t\t\t\t\td[j][k]=max(d[j][k],d[l-1][k-1]+j-l+1-r);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(int k=1;k<=t;k++)\n\t\t    b[i][k]=d[m][k];\n\t}\n\tfor(int i=1;i<=n;i++)\n\t   for(int j=t;j>=0;j--)\n\t      for(int x=0;x<=j;x++)\n\t   f[i][j]=max(f[i][j],f[i-1][j-x]+b[i][x]);\n\tfor(int i=1;i<=n;i++)\n\tans=max(ans,f[i][t]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n**But,\u4f60\u4f1a\u53d1\u73b0\u8fd9\u6837\u4f1aT\u4e00\u4e2a\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u8003\u8651\u600e\u4e48\u4f18\u5316\u3002**\n\n\u8bbeto[i] \u8868\u793a\u7b2ci\u5757\u6728\u677f\u6700\u591a\u5237\u591a\u5c11\u6b21\u3002\uff08\u56e0\u4e3a\u4e0d\u53ef\u80fd\u6bcf\u5757\u6728\u677f\u771f\u7684\u90fd\u5237\u4e86t\u6b21\uff09\n\n\u5bf9\u4e8e\u6bcf\u5757\u6728\u677f\uff0c\u679a\u4e3e\u4f4d\u7f6ej,\n\n if\uff08a[i][j]!=a[i][j-1])//a\u4e3a\u9898\u76ee\u6240\u7ed9\u7684\u5b57\u7b26\u4e32\n\n      to[i]++;//\u5982\u679c\u989c\u8272\u4e0d\u76f8\u540c\uff0c\u5c31\u7d2f\u52a0\n\n\u56e0\u4e3a\u5982\u679c\u989c\u8272\u76f8\u540c\uff0c\u5c31\u53ef\u4ee5\u4e00\u6b21\u6027\u5237\u6389\u3002\n\n **\u4e0b\u9762\u662fAC\u4ee3\u7801**\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<iostream>\n#include<cstring>\nusing namespace std;\nconst int N=55;\nconst int T=2505;\nint n,m,t;\nint b[N][T],d[N][T],f[N][T];\nchar a[N][N];\nint to[N];\nint ans;\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&m,&t);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t  cin>>(a[i]+1);\n\t  for(int j=1;j<=m;j++)\n\t  if(a[i][j]!=a[i][j-1]) to[i]++;\n    }\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tmemset(d,0,sizeof(d));\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tfor(int k=1;k<=min(to[i],j);k++)\n\t\t\t{\n\t\t\t\tint r=0;\n\t\t\t\tfor(int l=j;l>=1;l--)\n\t\t\t\t{\n\t\t\t\t\tr+=(a[i][j]==a[i][l]);\n\t\t\t\t\td[j][k]=max(d[l-1][k-1]+r,d[j][k]);\n\t\t\t\t\td[j][k]=max(d[j][k],d[l-1][k-1]+j-l+1-r);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(int k=1;k<=t;k++)\n\t\t    b[i][k]=d[m][k];\n\t}\n\tfor(int i=1;i<=n;i++)\n\t   for(int j=t;j>=0;j--)\n\t      for(int x=min(to[i],j);x>=0;x--)\n\t   f[i][j]=max(f[i][j],f[i-1][j-x]+b[i][x]);\n\tfor(int i=1;i<=n;i++)\n\tans=max(ans,f[i][t]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1571296282,
        "uid": 52182,
        "name": "\u6708\u00b7\u65e0\u7b19",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u4e00. \u524d\u8a00\uff1a\n\n\u4e4d\u4e00\u770b\u8fd9\u9898\u633a\u597d\u505a\uff0c\u4f46\u662f\u5751\u70b9\u8fd8\u662f\u633a\u591a\u7684\uff0c\u5728\u5361\u4e86\u65e0\u6570\u4e2a30\u5206\u540e\u7ec8\u4e8eA\u4e86\uff0c\u539f\u56e0\u89c1\u4ee3\u7801\u5904.\n\n\u4e8c. \u89e3\u6cd5\uff1a\n\n1. \u6211\u4eec\u5148\u8003\u8651\u53ea\u6709\u4e00\u6761\u6a21\u677f\u7684\u60c5\u51b5.\n\n   - \u5982\u679c\u53ea\u6709\u4e00\u6761\u6728\u677f\uff0c\u90a3\u4e48\u8bbe g [ i ] [ j ] \u8868\u793a\u524di\u4e2a\u683c\u5b50\u5237j\u6b21\u7684\u6700\u591a\u6b63\u786e\u683c\u5b50.\n\n   - \u90a3\u4e48\u5f88\u663e\u7136 g[ i ] [ j ] = max { g[ k ] [ j - 1 ] + w(k + 1, i) }(k < i).\n\n   - w(x, y)\u4e3a\u7b2c x \u5230\u7b2c y \u4e2a\u683c\u5b50\u7684\u6700\u591a\u540c\u8272\u683c\u5b50\u6570\uff0c\u6211\u4eec\u628a\u8fd9\u4e00\u6bb5\u533a\u95f4\u5185\u7684\u84dd\u8272\u548c\u7ea2\u8272\u683c\u5b50\u53d6\u4e2a max \u5373\u53ef\uff0c\u53ef\u7528\u524d\u7f00\u548c\u5b9e\u73b0\uff0c\u5177\u4f53\u89c1\u4ee3\u7801.\n\n2. \u6211\u4eec\u518d\u6765\u8003\u8651\u6709\u591a\u4e2a\u6728\u677f\u7684\u60c5\u51b5.\n\n   - \u5982\u679c\u6709\u591a\u6761\u6728\u677f\uff0c\u6211\u4eec\u8bbe f[ i ][ j ]\u8868\u793a\u524d i \u6761\u6728\u677f\u5237 j \u6b21\u7684\u6700\u5927\u7b54\u6848.\n\n   - \u5219 f[ i ][ j ] = max { f[i - 1][ k ] + g[ i ][ m ][ j - k ] }(k <= j).\n\n\u4e0b\u9762\u4e0a\u4ee3\u7801\uff08\u6211\u77e5\u9053\u5404\u4f4d\u5927\u4f6c\u4e5f\u4e0d\u9700\u8981\u4ee3\u7801\uff09\uff1a\n\n```\n#include<iostream>\n \n#define N 60\n#define K 2510\n\nusing namespace std;\n\nint n,m,T,sum[N][N],ans;\nint g[N][N][K],f[N][K];\nchar c[N];\n\nint main()\n{\n\tcin>>n>>m>>T;\n\tfor(int i=1;i<=n;i++) \n\t{\n\t\tcin>>c+1;//\u9884\u5904\u7406\u84dd\u8272\u683c\u5b50\u7684\u524d\u7f00\u548c \n\t\tfor(int j=1;j<=m;j++)\n\t\t\tsum[i][j]=sum[i][j-1]+(c[j]=='1');\n\t}\n\t\n\tfor(int l=1;l<=n;l++)//\u5904\u7406g\u6570\u7ec4 \n\t{\n\t  for(int i=1;i<=m;i++)//\u679a\u4e3e\u7c89\u5237\u5230\u7b2c\u51e0\u4e2a\u683c\u5b50 \n\t\tfor(int j=1;j<=T&&j<=m;j++)//j<=T\u4f1aTLE\uff0c\u8981\u5224\u65ad\u4e00\u4e0b \n\t\t{\n\t\t\tfor(int k=0;k<i;k++)//\u4e0a\u4e00\u6b21\u7c89\u5237\u5230\u54ea\u91cc \n\t\t\t{\n\t\t\t\tint w=sum[l][i]-sum[l][k];//k+1~i\u4e4b\u95f4\u51fa\u73b0\u4e86\u591a\u5c11\u84dd\u8272\u683c\u5b50\n\t\t\t\t//\u90a3\u4e48\u8fd9\u6bb5\u533a\u95f4\u5185\u7ea2\u8272\u683c\u5b50\u7684\u6570\u76ee\u5c31\u662fi-k-w. \n\t\t\t\tg[l][i][j]=max(g[l][i][j],g[l][k][j-1]+max(w,i-k-w));//\u66f4\u65b0\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t}\n\t\n\tfor(int i=1;i<=n;i++)//\u679a\u4e3e\u884c\u6570 \n\t{\n\t\tfor(int j=1;j<=T;j++)//\u679a\u4e3e\u6b21\u6570 \n\t\t\tfor(int k=0;k<=j;k++)//k<=min(j,m)\u5f53\u7136\u4e0d\u884c\uff0c\u6709\u53ef\u80fd\u904d\u5386\u4e0d\u5230\u6240\u6709\u60c5\u51b5\uff0c\u6211\u5361\u4e86\u597d\u591a\u6b2130\u5206 \n\t\t\tf[i][j]=max(f[i][j],f[i-1][k]+g[i][m][j-k]);//\u66f4\u65b0 \n\t}\n\t\n\tcout<<f[n][T]<<endl;//\u8fd9\u91cc\u4e0d\u9700\u8981\u4e00\u4e2a\u4e00\u4e2a\u6bd4\u8f83\u4e86 \n\t\n\treturn 0;\n}\n```\n\n\u53bb\u6389\u7a7a\u884c\u540e30\u591a\u884c\uff0c\u4e5f\u662f\u6bd4\u8f83\u77ed\u4e86.\n\n### [ _Plus Ultra!!!_ ](https://www.luogu.org/blog/OnePunchManGO/)",
        "postTime": 1568544500,
        "uid": 126136,
        "name": "Plus_Ultra",
        "ccfLevel": 0,
        "title": "P4158\u3010\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "## [~~\u4f20\u9001\u95e8~~](https://www.luogu.org/problem/P4158)\n\n\u5f88\u597d\uff0c\u6211\u53d1\u73b0\u6bcf\u4e00\u884c\u90fd\u662f\u4e0d\u5e72\u6270\u7684\uff0c\u5c31\u60f3\u5230\u7edf\u8ba1\u6bcf\u4e00\u884c\u7684\u7b54\u6848\uff0c\u505a\u4e00\u904d\u80cc\u5305\u3002\n\n\u540e\u6765\u53d1\u73b0\uff0c\u4ee3\u7801\u590d\u6742\u5ea6\u6709\u70b9\u9ad8\uff0c\u5c31\u653e\u5f03\u4e86\u2026\u2026\n\n----\n\n**\u597d\uff0c\u4e0a\u9762\u90fd\u662f\u9898\u5916\u8bdd\uff0c\u4eca\u5929\u6211\u6765\u8bb2\u4e00\u8bb2\u56db\u7ef4DP\u7684\u505a\u6cd5\uff01**\n\n\u9996\u5148\uff0c\u6211\u4eec\u6709$f_{i,j,k,l}$\uff08\u5176\u4e2d$l$\u662f$0$\u5230$1$\u7684\uff09\u8868\u793a\u5728\u70b9$i,j$\uff0c\u7c89\u5237\u4e86$k$\u6b21\uff0c\u5f53\u524d\u683c\u5b50\u6d82\u7ea2/\u84dd\u8272\u7684\u6b63\u786e\u683c\u5b50\u6700\u5927\u6570\u3002\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u6709\n$$f_{i,j,k,0}=\\max (f_{i,j-1,k,0},f_{i,j-1,k-1,1})+(a_{i,j}==0)$$\n$$f_{i,j,k,1}=\\max (f_{i,j-1,k,1},f_{i,j-1,k-1,0})+(a_{i,j}==1)$$\n\n\u4f46\u662f\uff0c\u4ed4\u7ec6\u60f3\u60f3\uff0c\u8fd9\u6709$Bug$\n\n\u5982\u679c\u8bf4\uff0c$j=1$\u600e\u4e48\u529e\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u6d89\u53ca\u5230$j=0$\u7684\u60c5\u51b5\uff0c\u6240\u4ee5$f_{i,j-1,k,l}$\u4e2d\u7684$j$\u662f\u6709\u95ee\u9898\u7684\u3002\n\n\u800c\u6211\u4eec\u73b0\u5728\u662f\u628a\u5b83\u53d8\u6210\u4e00\u4e2a\u77e9\u9635\uff0c\u6240\u4ee5\u8981\u7ee7\u627f\u4e0a\u4e00\u884c\u7684\u7b54\u6848\uff0c\u6240\u4ee5\u6211\u4eec\u6709\n$$f_{i,j,k,0}=\\max (f_{i-1,m,k-1,0},f_{i-1,m,k-1,1})+(a_{i,j}==0)$$\n$$f_{i,j,k,1}=\\max (f_{i-1,m,k-1,1},f_{i-1,m,k-1,0})+(a_{i,j}==1)$$\n\n\u5230\u6700\u540e\uff0c\u7b54\u6848\u5c31\u662f\u663e\u7136\u7684$\\max(f_{n,m,t,0},f_{n,m,t,1})$\n\n\u8fd9\u4e2a\u65b9\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(NMT)$\uff0c\u548c\u80cc\u5305\u65b9\u6cd5\u7684\u590d\u6742\u5ea6\u662f\u4e00\u6837\u7684\uff0c\u4f46\u4ee3\u7801\u590d\u6742\u5ea6\u5f88\u4f4e\uff0c\u4e5f\u5f88\u5bb9\u6613\u63a8\u3002\n\n\u4e0a\u4ee3\u7801\u4e86\uff08\u672c\u849f\u84bb\u4e0d\u60f3\u5199\u56db\u4e2a\u65b9\u7a0b\uff0c\u5c31\u7528\u4e86$l$\u8fd9\u4e00\u91cd\u5faa\u73af\uff0c\u5269\u4e86\u4e24\u4e2a\u65b9\u7a0b\uff0c\u89c1\u8c05\uff09\n```cpp\n#include<cstdio>\n#define N 51\nint max(int a,int b){return a>b?a:b;}\nint f[N][N][N*N][2],s,n,m,t;\nchar a[N][N];\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&m,&t);\n\tfor (int i=1;i<=n;i++) scanf(\"%s\",a[i]+1);\n\tfor (int i=1;i<=n;i++) for (int j=1;j<=m;j++) for (int k=1;k<=t;k++) for (int l=0;l<2;l++)\n\t{\n\t\tif (j==1) f[i][j][k][l]=max(f[i-1][m][k-1][0],f[i-1][m][k-1][1])+(a[i][j]==l+'0');\n\t\telse f[i][j][k][l]=max(f[i][j-1][k][l],f[i][j-1][k-1][l^1])+(a[i][j]==l+'0');\n\t}\n\tprintf(\"%d\",max(f[n][m][t][0],f[n][m][t][1]));\n\treturn 0;\n}\n```",
        "postTime": 1565356083,
        "uid": 84705,
        "name": "CrazyDance",
        "ccfLevel": 6,
        "title": "\u56db\u7ef4DP\u6765\u4e00\u6ce2"
    },
    {
        "content": "\u8fd9\u79cd\u7c7b\u578b\u7684\u9898\u2026\u2026\u786c\u8981\u53d6\u4e2a\u540d\u5b57\u7684\u8bdd\uff0c\u5c31\u53eb\u5206\u7ec4\u5e8f\u5217DP\u5427\uff08\u53e3\u80e1\u52ff\u4fe1\uff0c\u624b\u52a8\u6ed1\u7a3d\uff09\n\n\u5176\u5b9e\u601d\u8def\u524d\u9762\u7684\u51e0\u4f4d\u5927\u4f6c\u4e5f\u8bb2\u5230\u4e86\uff0c\u90a3\u672c\u849f\u84bb\u5c31~~\u63d0\u70bc\u4e00\u4e0b\u6a21\u578b~~\n\u5570\u55e6\u5570\u55e6\u5427\u3002\n\n------------\n\n\u5e8f\u5217dp\u5e38\u7528\u5957\u8def\uff1adp[i][j][0/1/2/3\u2026\u2026]\u8868\u793a\u524di\u4e2a\u4ec0\u4e48\u4e1c\u897f\u4e2d\u9009\u4e86j\u4e2a\uff0c\u5176\u4e2d\u7b2cj\u4e2a\u7684\u72b6\u6001\u4e3a0/1/2/3\u2026\u2026\u3002\u8fd9\u91cc\u53c8\u591a\u4e86\u4e00\u4e2a\u7ec4\u522b\uff08\u6728\u677f\uff09\uff0c\u600e\u4e48\u529e\u5462\uff0c\u518d\u52a0\u4e0a\u4e00\u7ef4\uff0c\u8003\u8651\u4e00\u4e0b\u4e0d\u540c\u7ec4\u522b\u95f4\u7684\u5904\u7406\uff0c\u5269\u4e0b\u7684\u5c31\u662f\u4e00\u6837\u7684\u4e86\u3002\n\n\u77e5\u9053\u5927\u4f6c\u4eec\u61d2\u5f97\u770b\u4e0a\u9762\uff0c\u76f4\u63a5\u653e\u4ee3\u7801\n\n\u849f\u84bb\u8fd8\u662f\u521a\u88c5C++\u7684\u840c\u65b0\uff0c\u671b\u5927\u4f6c\u65a7\u6b63\u3002\n\n```cpp\n#include<iostream>\nusing namespace std;\nint dp[51][51][2510][3];\nint a[51][51]; char s[51];\nint n,m,t;\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>n>>m>>t;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>(s+1);\n\t\tfor(int j=1;j<=m;j++)\n\t\t\ta[i][j]=s[j]-'0';\n\t}\n\t\n\tfor(int i=1;i<=n;i++)// \u524di\u5757\u6728\u677f(\u7ec4\u522b) \n\t{\n\t\tfor(int k=1;k<=t;k++) // \u8fb9\u754c\u5904\u7406\u7b2c\u4e00\u5757\u683c\u5b50 \n\t\t{\n\t\t\tdp[i][1][k][0]=max(max(dp[i-1][m][k-1][0],dp[i-1][m][k-1][1]),dp[i-1][m][k-1][2])+(a[i][1]==0); \n\t\t\tdp[i][1][k][1]=max(max(dp[i-1][m][k-1][0],dp[i-1][m][k-1][1]),dp[i-1][m][k-1][2])+(a[i][1]==1);\n\t\t\tdp[i][1][k][2]=max(max(dp[i-1][m][k][0],dp[i-1][m][k][1]),dp[i-1][m][k][2]);\n\t\t}\n\t\tfor(int j=2;j<=m;j++) // \u8be5\u6728\u677f\u524dj\u4e2a\u683c\u5b50(\u5f00\u59cb\u5e8f\u5217dp) \n\t\tfor(int k=1;k<=t;k++) // \u5230\u8fd9\u91cc\u4e00\u5171\u7528\u4e86k\u6b21\u673a\u4f1a \n\t\t{\n\t\t\t// \u54c7\uff0c\u8f6c\u79fb\u65b9\u7a0b\u597d\u957f!(\u5f53\u7136\u5927\u4f6c\u4eec\u5e76\u4e0d\u89c9\u5f97)\u5176\u5b9e\u5199\u8d77\u6765\u601d\u8def\u5f02\u5e38\u6e05\u6670\u3002\n\t\t\tdp[i][j][k][0]=max(max(dp[i][j-1][k][0],dp[i][j-1][k-1][1]),dp[i][j-1][k-1][2])+(a[i][j]==0);\n\t\t\tdp[i][j][k][1]=max(max(dp[i][j-1][k-1][0],dp[i][j-1][k][1]),dp[i][j-1][k-1][2])+(a[i][j]==1);\n\t\t\tdp[i][j][k][2]=max(max(dp[i][j-1][k][0],dp[i][j-1][k][1]),dp[i][j-1][k][2]);\n\t\t}\n\t}\n\t\n\tcout<<max(max(dp[n][m][t][0],dp[n][m][t][1]),dp[n][m][t][2]); // \u5176\u5b9e\u8fd9\u4e2a\u5730\u65b9\u5e94\u8be5\u679a\u4e3et\u7684\uff0c\u56e0\u4e3a\u6709\u65f6\u5019t\u591a\u7528\u4e86\u8fd8\u4e0d\u5982\u4e0d\u7528\u4f18\u3002\u4f46\u662f\u8fd9\u6837\u7684\u6570\u636e\u4e0d\u597d\u6784\u9020\uff0c\u6240\u4ee5\u5077\u4e2a\u61d2qwq\u3002\n\treturn ~~(0-0);\n} \n```\n",
        "postTime": 1564968290,
        "uid": 130422,
        "name": "_\u849f\u84bb__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "dp\u9898\u3002dp\u65b9\u7a0b\u8f83\u96be\u63a8\uff0c\u6709\u4e24\u4e2adp\u503c\uff0c\u5305\u542b\u4e86\u4ece\u5c40\u90e8\u5230\u6574\u4f53\u7684\u89e3\u9898\u601d\u8def\n\n\u5f53\u53ea\u6709\u4e00\u6761\u6728\u677f\u65f6\uff0c\n\n\u8bbeg[i][j][k]\u8868\u793a\u7b2ci\u4e2a\u6728\u677f\u524dj\u4e2a\u683c\u5b50\u5237k\u6b21\u7684\u6700\u5927\u503c\n\n\u5219g[i][j][k]=max{g[i][t][k-1]+w(t+1,j)}(t<j)\n\nw(x,y)\u8868\u793a\u7b2cx\u4e2a\u5230\u7b2cy\u4e2a\u683c\u5b50\u7684\u6700\u591a\u540c\u8272\u683c\u5b50\u6570\uff08\u524d\u7f00\u548c\uff09\n\n\u6709\u591a\u6761\u6728\u677f\u65f6\uff0c\n\u8bbef[i][j]\u8868\u793a\u524di\u4e2a\u6728\u677f\u5237j\u6b21\u7684\u6700\u5927\u7b54\u6848\n\n\u5219f[i][j]=max{f[i-1][k]+g[i][m][j-k]}\uff08k<=j\uff09\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\nint n,m,t;\nint a[55][55];\nint s1[55][55]={},s2[55][55]={};//s1:0 s2:1\nint f[55][2550];\nint g[55][55][55];\nint wid(int i,int x,int y)\n{\n    return max(s1[i][y]-s1[i][x-1],s2[i][y]-s2[i][x-1]);\n}\nint tim;\nint main()\n{\n    ios::sync_with_stdio(0);\n    cin>>n>>m>>tim;\n    for(int i=1;i<=n;i++)\n    {\n        string str;cin>>str;\n        for(int j=1;j<=str.size();j++)\n        {\n            if(str[j-1]=='0')a[i][j]=0;\n            else a[i][j]=1;\n            if(a[i][j]==0)s1[i][j]=s1[i][j-1]+1,s2[i][j]=s2[i][j-1];else s1[i][j]=s1[i][j-1],s2[i][j]=s2[i][j-1]+1;\n        }\n    }\n    for(int i=1;i<=n;i++)//\u7b2ci\u4e2a\u6728\u677f\n    for(int j=1;j<=m;j++)//\u524dj\u4e2a\u683c\u5b50\n    for(int k=1;k<=j;k++)//\u5237\u4e86k\u6b21\n    for(int t=0;t<j;t++)//\u524dt\u4e2a\u683c\u5b50\n    {\n        g[i][j][k]=max(g[i][j][k],g[i][t][k-1]+wid(i,t+1,j));\n    }\n    for(int i=1;i<=n;i++)\n    for(int j=1;j<=tim;j++)\n    for(int k=0;k<=j;k++)\n    {\n        int cnt=0;\n        if(j-k>=m)cnt=m;else cnt=g[i][m][j-k];\n        f[i][j]=max(f[i-1][k]+cnt,f[i][j]);\n    }\n    cout<<f[n][tim]<<endl;\n    return 0;\n}",
        "postTime": 1564460310,
        "uid": 101477,
        "name": "Akaina",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u7ebf\u6027DP\u9884\u5904\u7406+\u5206\u7ec4\u80cc\u5305\n\n\u9996\u5148\u8bbe`dp[i][j][0/1]`\u8868\u793a\u8be5\u6728\u677f\u524d`i`\u4e2a\u683c\u5237\u4e86`j`\u6b21\u4e14\u6700\u540e\u4e00\u6b21\u989c\u8272\u4e3a`0/1`\u7684\u6700\u5927\u6b63\u786e\u6570\n\n\u505a\u4e0b`0/1`\u7684\u524d\u7f00\u548c\u7136\u540e\u8f6c\u79fb\u72b6\u6001\n\n`dp[i][j][k]=max(dp[l][j][k],dp[l][j-1][k^1])+lis[i][k]-lis[l][k]`\n\n\u7136\u540e\u5bf9\u6bcf\u4e2a\u6728\u677f\u8dd1\u5206\u7ec4\u80cc\u5305\u5c31\u53ef\u4ee5\u4e86\n\n```cpp\n#include\"cstdio\"\n#include\"cstring\"\n#include\"iostream\"\n#include\"algorithm\"\nusing namespace std;\n\nconst int MAXN=55;\nconst int MAXT=2505;\n\nint n,m,T;\nint cnt[MAXN][2];\nint dp[MAXN][MAXN][2];\nint f[MAXT];\n\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&m,&T);\n\tfor(int i=1;i<=n;++i){\n\t\tmemset(cnt,0,sizeof(cnt));bool b;\n\t\tfor(int j=1;j<=m;++j){\n\t\t\tscanf(\"%1d\",&b);\n\t\t\tcnt[j][b]=cnt[j-1][b]+1;\n\t\t\tcnt[j][b^1]=cnt[j-1][b^1];\n\t\t}for(int j=1;j<=m;++j){\n\t\t\tfor(int k=0;k<j;++k){\n\t\t\t\tfor(int l=1;l<=j;++l){\n\t\t\t\t\tfor(int o=0;o<2;++o){\n\t\t\t\t\t\tdp[j][l][o]=max(dp[k][l][o],dp[k][l-1][o^1])+cnt[j][o]-cnt[k][o];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}for(int j=T;j;--j){\n\t\t\tfor(int k=1;k<=min(m,j);++k){\n\t\t\t\tf[j]=max(f[j],f[j-k]+max(dp[m][k][0],dp[m][k][1]));\n\t\t\t}\n\t\t}\n\t}printf(\"%d\\n\",f[T]);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1543919663,
        "uid": 31293,
        "name": "Adove",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4158 \u3010[SCOI2009]\u7c89\u5237\u5320\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u4e4d\u4e00\u770b\u89c9\u5f97\u633a\u7b80\u5355\u7684\uff0c\u4e8b\u5b9e\u4e0a\u5374\u5b8c\u5168\u4e0d\u662f\u3002\u9996\u5148\uff0c\u8fd9\u4e2a\u9898\u770b\u4e0a\u53bb\u65e0\u8111\u76f4\u63a5\u5237\u5c31\u53ef\u4ee5\u7136\u800c\u56e0\u4e3a\u5237\u7684\u6b21\u6570\u8fdc\u8fdc\u5927\u4e8e\u6728\u677f\u7684\u4e2a\u6570\u6240\u4ee5\u4e0d\u884c\uff0c\u7136\u540e\u5f00\u59cb\u8003\u8651DP\uff0c\u81ea\u5df1\u4e00\u5f00\u59cb\u662f\u8fd9\u4e48\u60f3\u7684\uff0c\u5982\u679c\u7528f[t][i][j]\u8868\u793a\u5237t\u6b21\u65f6\uff0c\u524di\u5757\u677f\u5b50\u5237\u5230\u7b2cj\u4e2a\u6700\u5927\u503c\u662f\u591a\u5c11\uff0c\u7136\u540e\u524d\u7f00\u548c\u4f18\u5316\u4e86\u4e00\u5c0f\u4e0b\uff0c\u52c9\u5f3a\u6253\u51fa\u4e86\u4e8c\u903cDP\uff0c\u7136\u540e90\uff0c\u4e4b\u540e\u4ece\u7f51\u4e0a\u79d1\u666e\u4e86\u4e00\u4e0b\uff0c\u53d1\u73b0\u8fd9\u6837\u5982\u679c\u6709\u4e00\u79cd\u4e2d\u95f4\u6709\u4e00\u6574\u5757\u4e0d\u7528\u6d82\u7684\u6728\u677f\uff0c\u90a3\u4e48\u5c31\u4f1a\u5d29\u6389\u3002\u5982\u8ba8\u8bba\u91cc\u7684\u90a3\u4e00\u4e2a90\uff0c\u662f\u540c\u4e00\u4e2a\u9519\u56e0\u3002\n\n\u4e4b\u540e\u6362\u7528\u4e86\u601d\u8def\uff0c\u9996\u5148\u8fd8\u662f\u524d\u7f00\u548c\u5bf90\u548c1\u7684\u8ba1\u7b97\uff0c\u7136\u540e\u7b97\u51fa\u5bf9\u4e8e\u7b2ci\u5757\u6728\u677f\uff0c\u6d82\u5230\u7b2cj\u683c\u5b50\u65f6\uff0c\u6d82\u4e86k\u6b21\u80fd\u6709\u7684\u6700\u5927\u7684\u4ef7\u503c\uff0c\u7136\u540e\u518d\u7528\u4e00\u4e2a\u6570\u7ec4\u50a8\u5b58\u7b2ci\u5757\u6728\u677f\u6d82j\u6b21\u7684\u6700\u4f18\u89e3\uff0cf\u8868\u793a\u524di\u5757\uff0c\u6d82j\u6b21\u7684\u6700\u4f18\u89e3\uff0c\u4e0d\u96be\u5f97\u51fa\u7ed3\u679c\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<queue>\n#define re register\n#define ll long long\nusing namespace std;\nint f[55][2501],t,r,n,m ,c[101][101][2],v[101][101],ans,g[101][101][101];\nstring s;\nint main()\n{\n    cin>>n>>m>>t;\n    for(re int i=1;i<=n;i++)\n    {\n        cin>>s;\n        for(re int j=1;j<=m;j++)\n        {\n            c[i][j][1]=c[i][j-1][1];\n            c[i][j][0]=c[i][j-1][0];\n            c[i][j][s[j-1]-'0']++;//\u524d\u7f00\u548c\u7684\u8ba1\u7b97\u3002\n        }\n    }\n    for(re int i=1;i<=n;i++)\n     for(re int j=1;j<=m;j++)\n      for(re int k=1;k<=m;k++)\n       for(re int l=0;l<j;l++)\n       {\n           g[i][j][k]=max(g[i][j][k],g[i][l][k-1]+max(c[i][j][0]-c[i][l][0],c[i][j][1]-c[i][l][1]));//\u4ee5\u8fd9\u4e2a\u6570\u7ec4\u50a8\u5b58\u7b2ci\u5757j\u683c\u5b50\u6d82k\u6b21\u7684\u6700\u5927\u503c\u3002\n       }\n    for(re int i=1;i<=n;i++)\n     for(re int j=1;j<=m;j++)\n      for(re int k=1;k<=m;k++)\n      {\n          v[i][j]=max(v[i][j],g[i][k][j]);//\u8fd9\u4e2a\u6570\u7ec4\u50a8\u5b58\u7b2ci\u5757j\u6b21\u7684\u3002\u3002\n      }\n    for(re int i=1;i<=n;i++)\n     for(re int j=1;j<=t;j++)\n      for(re int k=0;k<=j;k++)\n    f[i][j]=max(f[i][j],f[i-1][j-k]+v[i][k]);//dp\u6570\u7ec4\u6c42\u89e3\u3002\n    cout<<f[n][t];\n}\n/* \n5 8 4\n11100111\n11100111\n01010101\n11100111\n11111111\n*/\n```",
        "postTime": 1516273488,
        "uid": 49223,
        "name": "Victorique",
        "ccfLevel": 0,
        "title": "\u3010P1947\u3011\u7b28\u7b28\u5f53\u7c89\u5237\u5320"
    }
]
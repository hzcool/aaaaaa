[
    {
        "content": "\u8fd9\u9053\u9898\u8c8c\u4f3c\u8fd8\u6ca1\u6709\u9898\u89e3\u554a\uff0c\u4ea4\u4e00\u53d1\u5427\uff01\n\n\u6ce8\u610f\u5230\u9898\u76ee\u4e2d\u5df2\u7ecf\u7ed9\u51fa\u4e86\u8def\u5f84\uff0c\u5c06\u5176\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u8003\u8651\u6784\u9020\u4e00\u4e2a\u7b80\u5355\u73af\uff0c\u7a7f\u8fc7\u6bcf\u4e00\u4e2a\u90e8\u5206\u91cc\u7684\u6240\u6709\u70b9\uff0c\u5982\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/edlndz5x.png)\n\n\u6a59\u8272\u7684\u4e3a\u73af\uff0c\u7ea2\u8272\u7684\u662f\u8def\u5f84\u3002\n\n\u4e8e\u662f\u6211\u4eec\u8003\u8651\u6784\u9020\u201c\u952f\u9f7f\u5f62\u201d\uff0c\u6ce8\u610f\u5230\u9f7f\u7684\u957f\u5ea6\u5e94\u8be5\u4e3a\u5076\u6570\uff0c\u628a\u56fe\u5efa\u51fa\u6765\u540e\u53cc\u5411\u641c\u7d22\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n//By: Luogu@\u26a1\u70ad\u6cbb\u90ce\u26a1(a.k.a. Kamado_Tanjiro)(LuoguID:308854)\n#include <bits/stdc++.h>\n#define rep(i,x,y,z) for(int i=(x);i<=(y);i+=(z))\n\nusing namespace std;\n\nconst int INF=(sizeof(int)==4?0x3f3f3f3f:0x3f3f3f3f3f3f3f3f);\nconst int MOD=998244353;\nconst long double EPS=1e-7;\nconst int MAXN=110;\n\nvector<pair<int,int>> Path;\nvector<int> PathInLine[MAXN];\nint AskSeqHelp[MAXN];\nbool QwQ[MAXN][MAXN];\nmap<pair<int,int>,pair<pair<int,int>,pair<int,int>>> Graph;\npair<int,int> WeaknessPoint0,WeaknessPoint1;\n\nvoid Run0(pair<int,int> t,int FirstNotEq0)\n{\n\tcout<<\"? \"<<t.first<<\" \"<<t.second<<endl;\n\tcout<<flush;\n\n\tint q;\n\n\tcin>>q;\n\tfflush(stdin);\n\n\tcout<<flush;\n\n\tif(q)\n\t{\n\t\tWeaknessPoint0=t;\n\n\t\treturn ;\n\t}\n\n\tRun0(Graph[t].first,FirstNotEq0);\n}\n\nvoid Run1(pair<int,int> t,int FirstNotEq0)\n{\n\tcout<<\"? \"<<t.first<<\" \"<<t.second<<endl;\n\tcout<<flush;\n\n\tint q;\n\n\tcin>>q;\n\tfflush(stdin);\n\n\tcout<<flush;\n\n\tif(q)\n\t{\n\t\tWeaknessPoint1=t;\n\n\t\treturn ;\n\t}\n\n\tRun1(Graph[t].second,FirstNotEq0);\n}\n\nvoid Output0(pair<int,int> t,pair<int,int> e)\n{\n\tcout<<t.first<<\" \"<<t.second<<endl;\n\tcout<<flush;\n\n\tif(t==WeaknessPoint1)\n\t{\n\t\treturn ;\n\t}\n\n\tOutput0(Graph[t].second,e);\n}\n\nsigned main()\n{\n\tint n,m;\n\n\tcin>>n>>m;\n\tfflush(stdin);\n\n\tint x,y;\n\n\twhile(cin>>x>>y)\n\t{\n\t\tPath.push_back({x,y});\n\n\t\tif(x==n && y==m)\n\t\t\tbreak ;\n\t}\n\n\tint lx=1;\n\n\tfor(auto i:Path)\n\t{\n\t\tif(lx!=i.first)\n\t\t{\n\t\t\tif(lx%2==0)\n\t\t\t{\n\t\t\t\tAskSeqHelp[lx]=AskSeqHelp[lx-1];\n\t\t\t}\n\t\t\tif(lx%2==1)\n\t\t\t{\n\t\t\t\tif(PathInLine[lx][PathInLine[lx].size()-1]%2)\n\t\t\t\t\tAskSeqHelp[lx]=PathInLine[lx][PathInLine[lx].size()-1]-1;\n\t\t\t\telse\n\t\t\t\t\tAskSeqHelp[lx]=PathInLine[lx][PathInLine[lx].size()-1];\n\t\t\t}\n\n\t\t\tlx++;\n\t\t}\n\n\t\tPathInLine[lx].push_back(i.second);\n\t}\n\n\tAskSeqHelp[n]=AskSeqHelp[n-1];\n\n\t/*\n\tfor(int i=1;i<=n;i++)\n\t\tcout<<AskSeqHelp[i]<<endl;\n\t*/\n\n\tint FirstNotEq0=INF;\n\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(AskSeqHelp[i]==0)\n\t\t\tcontinue ;\n\n\t\tFirstNotEq0=min(FirstNotEq0,i);\n\n\t\tif(i%2)\n\t\t{\n\t\t\tfor(int j=2;j<AskSeqHelp[i];j++)\n\t\t\t{\n\t\t\t\tGraph[make_pair(i,j)].second=make_pair(i,j+1);\n\t\t\t\tGraph[make_pair(i,j+1)].first=make_pair(i,j);\n\t\t\t}\n\n\t\t\tGraph[make_pair(i,AskSeqHelp[i])].second=make_pair(i+1,AskSeqHelp[i]);\n\t\t\tGraph[make_pair(i+1,AskSeqHelp[i])].first=make_pair(i,AskSeqHelp[i]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor(int j=AskSeqHelp[i];j>2;j--)\n\t\t\t{\n\t\t\t\tGraph[make_pair(i,j)].second=make_pair(i,j-1);\n\t\t\t\tGraph[make_pair(i,j-1)].first=make_pair(i,j);\n\t\t\t}\n\n\t\t\tGraph[make_pair(i,2)].second=make_pair(i+1,2);\n\t\t\tGraph[make_pair(i+1,2)].first=make_pair(i,2);\n\t\t}\n\t}\n\n\tGraph[make_pair(FirstNotEq0,2)].first=make_pair(FirstNotEq0,1);\n\tGraph[make_pair(FirstNotEq0,1)].second=make_pair(FirstNotEq0,2);\n\n\tfor(int i=FirstNotEq0;i<n;i++)\n\t{\n\t\tGraph[make_pair(i,1)].first=make_pair(i+1,1);\n\t\tGraph[make_pair(i+1,1)].second=make_pair(i,1);\n\t}\n\n\tGraph[make_pair(n,1)].second=make_pair(n-1,1);\n\tGraph[make_pair(n,1)].first=make_pair(n,2);\n\tGraph[make_pair(n,2)].second=make_pair(n,1);\n\n\tRun0(make_pair(FirstNotEq0,1),FirstNotEq0);\n\tRun1(make_pair(FirstNotEq0,2),FirstNotEq0);\n\tOutput0(WeaknessPoint0,WeaknessPoint1);\n\n\tcout<<\"-1 -1\"<<endl<<flush;\n\n\tGraph.clear();\n\n\tint LastNotEq0=-INF;\n\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(AskSeqHelp[i]==m)\n\t\t\tcontinue ;\n\n\t\tLastNotEq0=max(LastNotEq0,i);\n\n\t\tif(i%2==0)\n\t\t{\n\t\t\tfor(int j=AskSeqHelp[i]+1;j<m-1;j++)\n\t\t\t{\n\t\t\t\tGraph[make_pair(i,j)].second=make_pair(i,j+1);\n\t\t\t\tGraph[make_pair(i,j+1)].first=make_pair(i,j);\n\t\t\t}\n\n\t\t\tGraph[make_pair(i,m-1)].second=make_pair(i+1,m-1);\n\t\t\tGraph[make_pair(i+1,m-1)].first=make_pair(i,m-1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor(int j=m-1;j>AskSeqHelp[i]+1;j--)\n\t\t\t{\n\t\t\t\tGraph[make_pair(i,j)].second=make_pair(i,j-1);\n\t\t\t\tGraph[make_pair(i,j-1)].first=make_pair(i,j);\n\t\t\t}\n\n\t\t\tGraph[make_pair(i,AskSeqHelp[i]+1)].second=make_pair(i+1,AskSeqHelp[i]+1);\n\t\t\tGraph[make_pair(i+1,AskSeqHelp[i]+1)].first=make_pair(i,AskSeqHelp[i]+1);\n\t\t}\n\t}\n\n\tGraph[make_pair(1,m-1)].first=make_pair(1,m);\n\tGraph[make_pair(1,m)].second=make_pair(1,m-1);\n\n\tfor(int i=1;i<LastNotEq0;i++)\n\t{\n\t\tGraph[make_pair(i,m)].first=make_pair(i+1,m);\n\t\tGraph[make_pair(i+1,m)].second=make_pair(i,m);\n\t}\n\n\tGraph[make_pair(LastNotEq0,m)].second=make_pair(LastNotEq0-1,m);\n\tGraph[make_pair(LastNotEq0,m-1)].second=make_pair(LastNotEq0,m);\n\tGraph[make_pair(LastNotEq0,m)].first=make_pair(LastNotEq0,m-1);\n\n\tRun0(make_pair(1,m),FirstNotEq0);\n\tRun1(make_pair(1,m-1),FirstNotEq0);\n\tOutput0(WeaknessPoint0,WeaknessPoint1);\n\n\tcout<<\"-1 -1\"<<endl;\n\tcout<<flush;\n\n\treturn 0;\n}\n```",
        "postTime": 1652086269,
        "uid": 308854,
        "name": "tzl_Dedicatus545",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P7944 \u3010\u300cWdcfr-1\u300dBorder of Gensokyo\u3011"
    }
]
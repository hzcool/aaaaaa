[
    {
        "content": "\u77e5\u8bc6\u70b9:\u7ec4\u5408\u6570\u5b66\uff0c\u66b4\u529b\u679a\u4e3e \n\n[\u539f\u9898\u9762](https://www.luogu.com.cn/problem/P3799)\n\n$\\text{Rewrited on 2020.6.14.}$  \n\u611f\u8c22 [TheStars](https://www.luogu.com.cn/user/247889) \u53d1\u73b0\u9519\u8bef\uff0c\u5e76\u63d0\u51fa\u5b9d\u8d35\u610f\u89c1\u3002\n\n## \u9898\u76ee\u8981\u6c42\n\u6709 $n$ \u6839\u6728\u68d2\uff0cYoomu \u73b0\u4ece\u4e2d\u9009 4 \u6839\u3002  \n\u6c42\u7ec4\u6210\u4e00\u4e2a\u6b63\u4e09\u89d2\u5f62\u7684\u65b9\u6848\u6570\u3002\n\n---\n\n\n## \u5206\u6790\u9898\u610f\n  \n\u6b32\u75314\u6839\u6728\u68d2\u7ec4\u6210\u4e00\u4e2a\u6b63\u4e09\u89d2\u5f62\uff0c\u5219\u5fc5\u6709 **2\u6839\u957f\u5ea6\u76f8\u7b49**\u3002  \n\u4e14\u53e6\u59162\u6839\u957f\u5ea6\u4e4b\u548c\uff0c\u7b49\u4e8e **\u524d2\u6839\u76f8\u7b49\u7684\u6728\u68d2 \u7684\u957f\u5ea6**\u3002 \n\n\u53d1\u73b0 \u5404\u6728\u68cd \u7684\u957f\u5ea6 $a_i \\leq 5000$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2)$ \u53ef\u8fc7\u3002  \n\u8003\u8651\u76f4\u63a5\u7528\u4e24\u5c42\u5faa\u73af\uff0c**\u66b4\u529b\u679a\u4e3e** \u4e0a\u8ff0\u4e24\u79cd\u6728\u68d2\u7684\u957f\u5ea6\uff0c\u8ba1\u7b97\u65b9\u6848\u6570\u5e76\u7d2f\u52a0\u3002 \n\n---\n\n## \u611f\u6027\u7406\u89e3\n\n\u8bb0 $num_i$ \u4e3a\uff0c\u957f\u5ea6\u4e3a $i$ \u7684\u6728\u68d2\u7684\u4e2a\u6570\u3002\n\n### \u5916\u5c42\u5faa\u73af:\n\n\u5148\u8981\u4ece \u8bb8\u591a\u957f\u5ea6\u4e3a $i$ \u7684\u6728\u68d2 \u4e2d\u53d6\u51fa2\u6839 ,    \n\u65b9\u6848\u6570\u4e3a \u4ece $num_i$ \u4e2a\u6570\u4e2d\u53d6\u51fa2\u4e2a\u6570\u7684\u7ec4\u5408\uff0c\u5373$C(num_i,2)$\u3002\n      \n### \u5185\u5c42\u5faa\u73af:\n\n\u8981\u4ece \u5269\u4f59\u7684\u6728\u68d2\u4e2d \u53d6\u51fa2\u6839\u957f\u5ea6\u4e4b\u548c\u4e3a $i$ \u7684\u6728\u68d2\u3002  \n\u4ee4\u5176\u4e2d\u4e00\u6839\u957f\u5ea6\u4e3a $j$\uff0c\u5219\u53e6\u4e00\u6839\u957f\u5ea6\u4e3a $i-j$\u3002  \n\u663e\u7136\u6709 $1\\le j<i$\uff0c$1\\le i-j < i$\u3002\n\n\u8ba8\u8bba $j$ \u4e0e $i-j$ \u7684\u5173\u7cfb\uff1a\n\n1. \u82e5 $j=i-j$\uff1a  \n   \u5373\u4ece\u957f\u5ea6\u4e3a $j$ \u7684\u6728\u68d2\u4e2d\u53d6\u51fa2\u6839 \u5408\u6210\u4e00\u6761\u8fb9\u3002  \n   \u65b9\u6848\u6570\u4e3a \u4ece $num_j$ \u4e2a\u6570\u4e2d\u53d6\u51fa2\u4e2a\u6570\u7684\u7ec4\u5408\uff0c\u5373 $C(num_j,2)$\u3002\n        \n2. \u82e5 $j \\not= i-j$\uff1a\n   \u9700\u4ece\u957f\u5ea6\u4e3a $j$ \u548c $i-j$ \u7684\u6728\u68d2\u4e2d\u5404\u53d6\u51fa1\u4e2a\u3002  \n   \u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u5219\u65b9\u6848\u6570\u4e3a $C(num_j,1) \\times C(num_{i-j},1)$\n\n\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u5c06\u6240\u6709\u65b9\u6848\u6570\u76f8\u4e58\uff0c\u5373\u5f97 $ans$ \u7684\u589e\u91cf \u3002\n\n---\n  \n## \u7b97\u6cd5\u5206\u6790:\n\n\u5b9a\u4e49\u8ba1\u6570\u6570\u7ec4 $num[i]$\uff0c\u8bb0\u5f55\u957f\u5ea6\u4e3a $i$ \u7684\u6728\u68d2\u7684\u4e2a\u6570\u3002  \n\u5728\u8bfb\u5165\u957f\u5ea6\u65f6\u6c42\u5f97 $num[i]$\u7684\u503c\u3002\n\n### \u5916\u5c42\u5faa\u73af:    \n\u679a\u4e3e\u4e24\u6839\u76f8\u7b49\u7684\u6728\u68d2\u7684\u957f\u5ea6 $i$ ,  \n\u4e3a\u4fdd\u8bc1\u53ef\u6784\u6210\u4e09\u89d2\u5f62\uff0c\u6b64\u957f\u5ea6\u7684\u6728\u68d2\u6570\u91cf $\\ge 2$ \u65f6\u624d\u53ef\u8fdb\u5165\u5185\u5c42\u5faa\u73af\u3002    \n     \n### \u5185\u5c42\u5faa\u73af:  \n\n\u679a\u4e3e\u4e00\u6839\u7528\u6765\u5408\u6210\u7684\u6728\u68d2\u957f\u5ea6 $j$\uff0c\u53e6\u4e00\u6839\u957f\u5ea6\u5373\u4e3a $i-j$\u3002  \n\u4e3a\u4fdd\u8bc1\u4e0d\u91cd\u590d\u8ba1\u7b97\uff0c\u5f3a\u5236\u8981\u6c42 $j\\le i-j$\uff0c\u679a\u4e3e $j$ \u65f6\u5230$\\dfrac{i}{2}$ \u505c\u6b62\u3002\n\n\u5206\u4e0a\u8ff0\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba:\n\n1. \u82e5 `(j == i - j && num[j] >= 2)` \u6210\u7acb\uff0c  \n   \u5219\u6709 `ans += C(num[i], 2) * C(num[j], 2)`\n      \n2. \u82e5 `(j != i - j && num[j] >= 1 && num[i - j] >= 1)` \u6210\u7acb\uff0c         \n   \u5219\u6709 `ans += C(num[i],2) * C(num[j], 1) * C(num[i - j], 1);`  \n\n\u4e00\u5b9a\u6ce8\u610f\u968f\u65f6\u53d6\u6a21\u3002\n\n---\n\n## \u4ee3\u7801 : \n\n```cpp\n//\u77e5\u8bc6\u70b9\uff1a\u7ec4\u5408\u6570\uff0c\u66b4\u529b\n/*\nBy:Luckyblock\n*/\n#include <cstdio>\n#include <algorithm>\n#define ll long long\nusing namespace std;\nconst int kMaxn = 1e6 + 10;\nconst ll kMod = 1e9 + 7;\n//=============================================================\nll n, ans, maxa, a[kMaxn], num[kMaxn];\n//=============================================================\nll C(ll x, ll k) { \n  //\u6c42\u5f97\u4ecen\u4e2a\u6570\u4e2d\u53d6\u51fak\u4e2a\u6570\u7684\u7ec4\u5408\n  //\u6b64\u5904k=1 / 2\uff0c\u7528\u4e86\u7279\u5224\u5199\u6cd5\u3002\n  //k = 1 \u65f6\uff0cC(x, 1) = x;\n  //k = 2 \u65f6\uff0cC(x, 2) = x * (x - 1) / 2;\n  return (k == 1ll ? x : x * (x - 1ll) / 2ll) % kMod;\n}\n//=============================================================\nint main() {\n  scanf(\"%lld\\n\", &n);\n  for (int i = 1; i <= n; ++ i) { //\u8bfb\u5165,\u5e76\u653e\u5165\u8ba1\u6570\u6570\u7ec4\u4e2d \n    scanf(\"%lld\", &a[i]); \n    maxa = max(a[i], maxa);\n    num[a[i]] ++;\n  }\n\n  for (int i = 2; i <= maxa; ++ i) { //\u679a\u4e3e\u4e24\u6839\u76f8\u7b49\u7684\u8fb9\n    if (num[i] >= 2ll) {\n      ll times = C(num[i], 2ll) % kMod; //\u6c42\u51fa\u7ec4\u5408\u6570 \n      for (int j = 1; j <= i / 2; ++ j) { //\u679a\u4e3e\u88ab\u5408\u6210\u7684\u8fb9(\u5230i / 2\u5373\u53ef)\n        if (j != i - j && num[j] >= 1 && num[i - j] >= 1) //\u7528\u6765\u5408\u6210\u7684\u6728\u68d2\u957f\u5ea6\u4e0d\u7b49 \n          ans += times * C(num[j], 1) * C(num[i - j], 1) % kMod;\n        if (j == i - j && num[j] >= 2) //\u7528\u6765\u5408\u6210\u7684\u6728\u68d2\u957f\u5ea6\u76f8\u7b49 \n          ans += times * C(num[j], 2) % kMod;\n        ans %= kMod;\n      }\n    }\n  }\n  printf(\"%lld\", ans);\n  return 0;\n}\n```\n\n\u606d\u559c\u5996\u68a6\u83b7\u5f97 \u7b2c16\u56de\u4e1c\u65b9Project\u4eba\u6c14\u6295\u7968 \u4eba\u5996\u90e8\u95e8\u7b2c\u4e00\u4f4d\uff01",
        "postTime": 1562665925,
        "uid": 186186,
        "name": "\u7075\u4e4c\u8def\u7a7a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u662f\u4e00\u9053**\u6392\u5217\u7ec4\u5408**\u7684\u7684\u597d\u9898\uff0c\u4e3b\u8981\u601d\u8def\uff1a\u5148\u7528\u6876\u8bb0\u5f55\u6bcf\u4e2a\u6728\u68d2\u957f\u5ea6\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u7136\u540e\u8fdb\u884c\u679a\u4e3e\uff0c\u7528**\u7ec4\u5408\u6570\u516c\u5f0f**\u63a8\u51fa\u5373\u53ef\u3002\u4e00\u822c\u7684\u8bdd\u7ec4\u5408\u6570\u6211\u7528\u6768\u8f89\u4e09\u89d2\uff0c\u4f46\u662f\u73b0\u5728\uff1a\n\n\u7b2c\u4e00\u5c42\u679a\u4e3e**\u6728\u68d2\u957f\u5ea6**\uff0c\u540e\u9762\u627e**\u4e24\u6839**\u4e24\u6839\u4e00\u6837\u957f\u7684\u3002\u56e0\u6b64\u662f$C(2,f[j])$\uff0c\u76f4\u63a5\u53ef\u5316\u7b80\u4e3a\u5982\u4e0b\u516c\u5f0f\n\n### (f[i]*(f[i]-1)/2)*f[j]*f[i-j])\n\n\u4e0b\u9762\u4ee3\u7801\u8be6\u89e3\n\n```cpp\n# include <cstdio>\n# include <iostream>\n# include <algorithm>\nusing namespace std;\nconst int N=100005;\nconst int mod=1e9+7;\nint n,a[N],f[N],sum;\nint s=1e9,e=-1e9;//\u5206\u522b\u662f\u6700\u5c0f\u6700\u5927\u957f\u5ea6\nlong long ans;\n\nint main () {\n\tscanf (\"%d\",&n);\n\tfor (int i=1;i<=n;i++) {\n\t\tscanf (\"%d\",&a[i]);\n\t\ts=min(s,a[i]);\n\t\te=max(e,a[i]);\n\t\tf[a[i]]++;//\u8bb0\u5f55\u8be5\u957f\u5ea6\u51fa\u73b0\u6b21\u6570\n\t}\n\tfor (int i=s+1;i<=e;i++) {\n\t\tif (f[i]<=1) continue;//\u4e0d\u53ef\u80fd\u7ec4\u6210\u4e09\u89d2\n\t\tfor (int j=s;j<=i/2;j++)\n\t\t\tif (f[j]&&f[i-j])//\u80fd\u7ec4\u6210\u4e09\u89d2\n\t\t\t\tif (j!=i-j)\n\t\t\t\t\tans=ans+((f[i]*(f[i]-1)>>1)*f[j]*f[i-j])%mod;//\u6b21\u6570\u4e0d\u76f8\u7b49\n\t\t\t\telse if (f[j]>=2)\n\t\t\t\t\tans=ans+((f[i]*(f[i]-1)>>1)*(f[j]*(f[j]-1)>>1)%mod)%mod;//\u76f4\u63a5f[j]\u4e2d\u53d62\n\t}\n\tprintf (\"%lld\\n\",ans%mod);//\u8f93\u51fa\u5373\u7ed3\u675f\n\treturn 0;\n}\n```\n",
        "postTime": 1565015895,
        "uid": 109640,
        "name": "\u5fae\u9999\u7389\u70db\u6697",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "# solution \n[\u8f6c\u5230\u9898\u76ee](https://www.luogu.com.cn/problem/P3799)\n\n\u5728\u89e3\u51b3\u8fd9\u9053\u9898\u76ee\u524d\uff0c\u6211\u4eec\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u5173\u4e8e\u7ec4\u5408\u6570\u5b66\u7684\u77e5\u8bc6\n\n\u6211\u4eec\u77e5\u9053\uff0c\u5f53\u6211\u4eec\u5728$n$\u4e2a\u6570\u4e2d\u9009\u62e9$m$\u4e2a\uff08\u4e0d\u91cd\u590d\uff09\u90a3\u4e48\u53ef\u4ee5\u9009\u62e9\u7684\u65b9\u6848\u6570\u4e3a$C_n ^m$\n\n$$C_n ^m=\\frac {n!}{m!\\times(n-m)!}$$\n\u90a3\u4e48\uff0c\u5f53$m=2$\u65f6\n$$C_n ^m=\\frac {n!}{m!\\times(n-m)!}$$\n$$=\\frac {n!}{2\\times(n-2)!}$$\n\u53c8\u56e0\u4e3a\n$$n!=n\\times (n-1)\\times(n-2)\\times \u2026\u2026\\times2\\times1$$\n$$(n-2)!=(n-2)\\times(n-3)\\times\u2026\u2026\\times2\\times1$$\n\u6240\u4ee5\n$$\\frac{n!}{(n-2)!}=n\\times(n-1)$$\n$$C_n^2=\\frac{1}{2}\\times(n)\\times(n-1)$$\n\n### \u6709\u4e86\u8fd9\u4e9b\u94fa\u57ab\u4ee5\u540e\uff0c\u6211\u4eec\u518d\u6765\u770b\u8fd9\u9053\u9898\n\n> \u8981\u4ece$n$\u6839\u6728\u68d2\u4e2d\u9009\u51fa$4$\u6839\uff0c\u4f7f\u4ed6\u4eec\u80fd\u7ec4\u6210\u4e00\u4e2a\u6b63\u4e09\u89d2\u5f62\u3002\n\n\u7b80\u5355\u7684\u6765\u8bf4\uff0c\u5c31\u662f\u5148\u9009\u51fa\u4e24\u6839\u4e00\u6837\u7684\uff0c\u5728\u9009\u51fa\u4e24\u6839\u4f7f\u8fd9\u4e24\u6839\u7684\u957f\u5ea6\u4e4b\u548c\u4e0e\u5148\u524d\u9009\u51fa\u7684\u76f8\u540c\n\n### \u90a3\u4e48\u73b0\u5728\u6765\u770b\u6838\u5fc3\u4ee3\u7801\n```\nfor(int i=Min+1;i<=Max;i++)\n\t{\n\t\tif(num[i]>=2)\n\t\t{\n\t\t\tfor(int j=Min;j<=i/2;j++)\n\t\t\t{\n\t\t\t\tif(j!=i-j)\n\t\t\t\t\tans+=num[i]*(num[i]-1)*num[j]*num[i-j]/2%mod;//\u540e\u9009\u7684\u4e24\u6761\u4e0d\u76f8\u7b49\n\t\t\t\telse if(num[j]>=2&&j*2==i)\n\t\t\t\t\tans+=num[i]*(num[i]-1)*num[i/2]*(num[i/2]-1)/4%mod;//\u540e\u9009\u7684\u4e24\u6839\u76f8\u7b49\n\t\t\t}\n\t\t\tans%=mod;\n\t\t}\n\t}\n```\n\u5982\u679c\u4f60\u770b\u61c2\u4e86\uff0c\u90a3\u4e48\n#### at last\n# Code\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int maxn=5*1e3+500,mod=1e9+7;\nint num[maxn],n,Max=-1,Min=0x3f3f,ans=0;\nsigned main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint a;\n\t\tcin>>a;\n\t\tnum[a]++;\n\t\tMax=max(Max,a);Min=min(Min,a);\n\t}\n\tfor(int i=Min+1;i<=Max;i++)\n\t{\n\t\tif(num[i]>=2)\n\t\t{\n\t\t\tfor(int j=Min;j<=i/2;j++)\n\t\t\t{\n\t\t\t\tif(j!=i-j)\n\t\t\t\t\tans+=num[i]*(num[i]-1)*num[j]*num[i-j]/2%mod;\n\t\t\t\telse if(num[j]>=2&&j*2==i)\n\t\t\t\t\tans+=num[i]*(num[i]-1)*num[i/2]*(num[i/2]-1)/4%mod;\n\t\t\t}\n\t\t\tans%=mod;\n\t\t}\n\t}\n\tcout<<ans;\n}\n```",
        "postTime": 1596093241,
        "uid": 194552,
        "name": "zhangziyi_xshsnoi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "\u56e0\u4e3a\u806a\u660e\uff0c\u6240\u4ee5\u6211\u624d\u6a59\u540d\u3002\u5c0f\u5b66\u751f\u53c8\u6765\u53d1\u9898\u89e3\u4e86\uff01\n\n\u9898\u53f7\uff1aP3799\n\n\u7b97\u6cd5\uff1a\u679a\u4e3e\uff0c\u66b4\u529b\uff0c\u6570\u7ec4\u8ba1\u6570\n\n\u96be\u5ea6\uff1a\u2605\u2605\u2605\n\n## \u5f00\u8bfe\u4e86\uff01\n\n\u8fd9\u9053\u9898\u867d\u7136\u53ea\u662f\u4e00\u9053\u679a\u4e3e\u7684\u9898\u76ee\uff0c\u4f46\u4e5f\u8fd8\u662f\u6709\u70b9\u96be\u7684\u3002\u5148\u7ed9\u5927\u5bb6\u4ecb\u7ecd\u4e00\u4e0b\u679a\u4e3e\u3002\n\n\u679a\u4e3e\uff0c\u5728\u4e00\u4e2a**\u6709\u9650**\u7684\u533a\u95f4\u91cc\u9762\u9010\u4e2a\u67e5\u627e\u3002\u8fd9\u91cc\u5f3a\u8c03\u4e00\u4e0b\u6709\u9650\u7684\u533a\u95f4\uff0c\u5982\uff1a1~100\u4e2d\u7684\u6b63\u6574\u6570\uff0c\u8fd9\u662f\u4e00\u4e2a\u6709\u9650\u7684\u533a\u95f4\u3002\u800c1~10\u4e2d\u7684\u5c0f\u6570\uff0c\u662f\u4e00\u4e2a\u65e0\u9650\u7684\u533a\u95f4\u3002\n\n\u8fd9\u9898\u5f88\u5bb9\u6613\u8ba9\u4eba\u60f3\u5230\u56db\u91cd\u5faa\u73af\u66b4\u529b\u679a\u4e3e\uff0c\u4f46\u662f\u6570\u636e\u4e0d\u9976\u4eba\uff0c\u8fd9\u6837\u5b50\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(n^4)\uff0c\u800cn\u6700\u5927\u662f100000\uff0c\u6240\u4ee5\u5f88\u663e\u7136\u8fd9\u662f\u4e0d\u884c\u7684\u3002\n\n\u6211\u4eec\u53c8\u4ece\u6570\u636e\u53d1\u73b0\uff0cai\u597d\u50cf\u6bd4\u8f83\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u5e94\u8be5\u4eceai\u5165\u624b\u3002\u6b63\u4e09\u89d2\u5f62\u4ed6\u7684\u4e09\u6761\u8fb9\u90fd\u4e00\u6837\u957f\uff0c\u6211\u4eec\u8981\u6311\u56db\u6761\u6728\u68d2\uff0c\u8bf4\u660e\u81f3\u5c11\u6709\u4e24\u6761\u8fb9\u7684\u957f\u5ea6\u76f8\u7b49\uff0c\u53e6\u5916\u4e24\u6761\u8fb9\u7684\u957f\u5ea6\u4e4b\u548c\u7b49\u4e8e\u56db\u6761\u8fb9\u603b\u957f\u5ea6\u7684\u4e09\u5206\u4e4b\u4e00\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u60f3\u5fc5\u5927\u5bb6\u90fd\u53ef\u4ee5\u81ea\u5df1\u63a8\u7406\u51fa\u6765\u3002\n\n\u6211\u4eec\u8981\u627e\u54ea\u4e24\u6839\u6216\u4ee5\u4e0a\u7684\u6728\u68cd\u957f\u5ea6\u5148\u7b49\uff0c\u5c31\u8981\u4f7f\u7528\u5230\u6570\u7ec4\u8ba1\u6570\u3002ai\u5f53\u4e2d\u4ece\u6700\u5c0f\u7684\u5230\u6700\u5927\u7684\u5faa\u73af\uff0c\u5982\u679c\u5f53\u524d\u4f4d\u7f6e\u6570\u7ec4\u7684\u91cf\u5927\u4e8e\u7b49\u4e8e2\uff0c\u5c31\u5f00\u59cb\u4ece\u6700\u5c0f\u7684ai\u5230i\u679a\u4e3e\u3002\u81f3\u4e8e\u5177\u4f53\u600e\u6837\u505a\uff0c\u5927\u5bb6\u53ef\u4ee5\u770b\u6211\u7684\u4ee3\u7801\u4e0a\u7684\u6279\u6ce8\u3002\n\n**\u6ce8\u610f\uff1a\u7edf\u8ba1\u7684\u65f6\u5019\u5c31\u8981\u8fb9\u7edf\u8ba1\u8fb9\u6c42\u4f59\u4e86\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u7206\u6389\u3002**\n\n\u8bfe\u8bb2\u5b8c\u4e86\uff0c\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\n#include<fstream>\n#include<cstdio>\n#include<cmath>\n#include<queue>\n#include<string>\n#include<cstring>\n#include<string.h>\n#include<algorithm>\n#include<iomanip>\nusing namespace std;\nint n,b[5010],a[1000010],minn=1e9,maxx;\nlong long ans;\nconst int mod=1e9+7;\nint main()\n{\n\tcin>>n;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tcin>>a[i];//\u8f93\u5165\n\t\tminn=min(minn,a[i]);//\u627e\u51fa\u6700\u5c0f\u7684ai\n\t\tmaxx=max(maxx,a[i]);//\u627e\u51fa\u6700\u5927\u7684ai\n\t\tb[a[i]]++;//\u6570\u7ec4\u8ba1\u6570\n\t}\n\tfor(int i=minn+1; i<=maxx; i++)//\u8fd9\u91cc\u4ece\u6700\u5c0f\u91cf+1\u5f00\u59cb\u679a\u4e3e\uff0c\u662f\u56e0\u4e3a\u6700\u5c0f\u91cf\u4e0d\u53ef\u80fd\u6709\u4e24\u4e2a\u6bd4\u5b83\u66f4\u5c0f\u7684\u4e24\u7ec4\u6210\n\t{\n\t\tif(b[i]>1)//\u5982\u679c\u8fd9\u4e2a\u6570\u5b57\u6709\u4e00\u4e2a\u4ee5\u4e0a\n\t\t\tfor(int j=minn; j<=i/2; j++)//\u5f00\u59cb\u679a\u4e3e\n\t\t\t\tif(b[j]>=1&&b[i-j]>=1)//\u5982\u679c\u4ed6\u53ef\u4ee5\u88ab\u4e24\u4e2a\u6bd4\u4ed6\u5c0f\u7684\u4e24\u7ec4\u6210\n\t\t\t\t{\n\t\t\t\t\tif(j*2!=i)ans=(ans+(b[i]*(b[i]-1)/2)*b[j]*b[i-j]%mod)%mod;//\u7edf\u8ba1\n\t\t\t\t\telse if(b[j]>1)ans=(ans+((b[i]*(b[i]-1)/2)*(b[j]*(b[j]-1)/2)%mod)%mod)%mod;//\u7edf\u8ba1\n\t\t\t\t}\n\t}\n\tcout<<ans%mod;//\u8f93\u51fa\n\treturn 0;\n}\n```\n\u795d\u5927\u5bb6\u80fdAC!",
        "postTime": 1585143655,
        "uid": 153804,
        "name": "Mr_WA\u7684\u5927\u53f7",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "\u826f\u5fc3\u6ee1\u6ee1\u7684\u9001\u5206\u6c34\u9898\n\n4\u4e2a\u6728\u68d2\u62fc\u6b63\u4e09\u89d2\u5f62\uff0c\u5c31\u662f2\u6839\u4e00\u6837\u957f\u7684\u548c\u53e6\u59162\u6839\u62fc\u8d77\u6765\n\n\u6728\u68d2\u957f\u5ea6\u6700\u59275000\uff0c\u53ef\u4ee5\u7528\u4e00\u4e2a\u6876\u5b58\u4e0b\n\n\u679a\u4e3e\u4e24\u6839\u77ed\u7684\u6728\u68d2\u7684\u957f\u5ea6\u5c31\u53ef\u4ee5\u4e86\n\n\u6838\u5fc3\u4ee3\u7801\uff1a\n\n```cpp\nfor(int i=1;i<=5000;i++)\nfor(int j=1;j<=5000;j++)\n{\n    if (i+j>5000) break;\n    if (i==j) ans+=C(i,2) * C(i+j,2)\n    else ans+=cnt[i]*cnt[j]*C(i+j,2)\n}\n```\n\u5b8c\u6574\u4ee3\u7801:\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#include<array>\n#include<vector>\n#include<map>\n#define ll long long\n#define ll long long\n#define MOD 1000000007LL\nusing namespace std;\nll buc[5011];\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    while(n--)\n    {\n        int x;\n        scanf(\"%d\",&x);\n        buc[x]++;\n    }\n    ll ans=0;\n    for(int i=1;i<=5000;++i)\n    {\n        for(int j=i;j<=5000;++j)\n        {\n            if(i+j>5000)break;\n            if(i==j)\n            {\n                if(buc[i]>=2&&buc[i<<1]>=2)\n                ans=(ans+(buc[i]*(buc[i]-1)/2LL%MOD*(buc[i<<1]*(buc[i<<1]-1)/2)%MOD))%MOD;\n            }else{\n                if(buc[i]>=1&&buc[j]>=1&&buc[i+j]>=2)\n                ans=(ans+(buc[i]*buc[j]%MOD*(buc[i+j]*(buc[i+j]-1)/2)%MOD))%MOD;\n            }\n        }\n    } \n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1496933475,
        "uid": 20322,
        "name": "orangebird",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "\u4e00\u9053\u6c34\u9898 ~~(\u8fd8\u662f\u505a\u4e86\u4e00\u4e2a\u5c0f\u65f6\uff0c\u6211\u592a\u83dc\u4e86~~\n\n### \u57fa\u672c\u601d\u8def\uff1a\n\u9898\u91cc\u9762\u8bf4\uff0c4\u6839\u68cd\u5b50\u62fc\u6210\u4e00\u4e2a\u6b63\u4e09\u89d2\u5f62\uff08\u7b49\u8fb9\u4e09\u89d2\u5f62\uff09\n\n\u82e5\u8bbe\u8fd9\u56db\u6839\u68cd\u5b50\u957f\u5ea6\u4e3a$a,b,c,d$\u4e14$a\u2265b>c\u2265d$\n\n\u90a3\u5f88\u5bb9\u6613\u5f97\u5230 ~~(\u771f\u7684\u5f88\u5bb9\u6613)~~:\n\n$a=b=c+d$\n\n\u81ea\u7136\uff0c\u6211\u4eec\u53ea\u9700\u679a\u4e3e$a$\u7684\u957f\u5ea6\u548c$c$\u7684\u957f\u5ea6\u5c31\u884c\u4e86\n\n\u957f\u5ea6\u6700\u957f\u624d5k\uff0c\u6728\u68cd\u7528\u6876\u6309\u957f\u5ea6\u88c5\u4e00\u4e0b\uff0c\u904d\u5386\u7684\u65f6\u5019\u4e5f\u65b9\u4fbf\u3002\n\n\u4ee3\u7801\u8981\u597d\u597d\u770b\u5b8c\u554akora\n```cpp\n#include <bits/stdc++.h>\n#define c1(a) (a)//\u5e26\u53c2\u5b8f\u5b9a\u4e49\uff0c\u672c\u9898\u4e0d\u5fc5\u5199\u51fd\u6570 \n#define c2(a) ((a)*((a)-1)/2)\nusing namespace std;\nconst int mode=1000000007;\nint aaa[5010];//\u6876 \nint main()\n{\n\tios::sync_with_stdio(0);\n\tcin.tie(0);\n\tcout.tie(0);//io\u6d41\u89e3\u7ed1 \n\tint n;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint k;\n\t\tcin>>k;\n\t\taaa[k]++;//\u5f80\u6876\u91cc\u6254\n\t}\n\tint ans=0;\n\tfor(int a=2;a<=5000;a++)\n   {\n\t\t\tfor(int c=1;c<=a/2;c++)//c\u6700\u5927\u53ea\u80fd\u5230a\u7684\u4e00\u534a \n\t\t\t{\n\t\t\t\tint d=a-c;//\u628ad\u7b97\u51fa\u6765\u5224\u5b9a\u76f8\u7b49 \n\t\t\t\tif(d!=c&&aaa[a]>=2&&aaa[c]>=1&&aaa[d]>=1)//c d\u4e0d\u540c \n\t\t\t\t{\n\t\t\t\t\tans+=((c2(aaa[a])%mode)*(c1(aaa[c])%mode)*(c1(aaa[d])%mode))%mode;\n\t\t\t\t}\n\t\t\t\telse if(d==c&&aaa[a]>=2&&aaa[c]>=2)//c d\u76f8\u540c \n\t\t\t\t{\n\t\t\t\t\tans+=((c2(aaa[a])%mode)*(c2(aaa[c])%mode))%mode;\n\t\t\t\t}\n\t\t\t\tans%=mode;\n\t\t\t}\n\t}\n\tcout<<ans%mode;//\u591a\u6a21\u51e0\u6b21\u603b\u6ca1\u95ee\u9898\u7684 \n\treturn 0;\n}\n\n```",
        "postTime": 1579059938,
        "uid": 278259,
        "name": "RemiliaScarlet\u25ce",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.yom.yn/proxlem/P3799)\n# \u5996\u68a6\u62fc\u6728\u68d2\n\n## \u9898\u76ee\u80cc\u666f\n\n\u4e0a\u9053\u9898\u4e2d\uff0c\u5996\u68a6\u65a9\u4e86\u4e00\u5730\u7684\u6728\u68d2\uff0c\u73b0\u5728\u5979\u60f3\u8981\u5c06\u6728\u68d2\u62fc\u8d77\u6765\u3002\n\n## \u9898\u76ee\u63cf\u8ff0\n\n\u6709 $n$ \u6839\u6728\u68d2\uff0c\u73b0\u5728\u4ece\u4e2d\u9009 $4$ \u6839\uff0c\u60f3\u8981\u7ec4\u6210\u4e00\u4e2a\u6b63\u4e09\u89d2\u5f62\uff0c\u95ee\u6709\u51e0\u79cd\u9009\u6cd5\uff1f \n\n\u7b54\u6848\u5bf9 $10^9+7$ \u53d6\u6a21\u3002\n\n## \u8f93\u5165\u8f93\u51fa\u683c\u5f0f\n\n### \u8f93\u5165\u683c\u5f0f\n\n\n\n\u7b2c\u4e00\u884c\u4e00\u4e2a\u6574\u6570 $n$\u3002 \n\n\u7b2c\u4e8c\u884c $n$ \u4e2a\u6574\u6570\uff0c\u7b2c $i$ \u4e2a\u6574\u6570 $a_i$ \u4ee3\u8868\u7b2c $i$ \u6839\u6728\u68d2\u7684\u957f\u5ea6\u3002\n\n### \u8f93\u51fa\u683c\u5f0f\n\n\n\n\u4e00\u884c\u4e00\u4e2a\u6574\u6570\u4ee3\u8868\u7b54\u6848\u3002\n\n## \u8f93\u5165\u8f93\u51fa\u6837\u4f8b\n\n### \u8f93\u5165\u6837\u4f8b #1\n\n```plwin\n4\n1 1 2 2\n```\n\n### \u8f93\u51fa\u6837\u4f8b #1\n\n```plwin\n1\n```\n\n## \u8bf4\u660e\n\n#### \u6570\u636e\u89c4\u6a21\u4e0e\u7ea6\u5b9a \n\n- \u5bf9\u4e8e $30\\%$ \u7684\u6570\u636e\uff0c\u4fdd\u8bc1 $n \\le 5 \\times 10^3$\u3002\n- \u5bf9\u4e8e $100\\%$ \u7684\u6570\u636e\uff0c\u4fdd\u8bc1 $1 \\leq n \\le 10^5$\uff0c$0 \\le a_i \\le 5 \\times 10^3$\u3002\n\n# \u5206\u6790\n\u9996\u5148\uff0c\u56db\u6839\u6728\u68cd\u8981\u62fc\u6210\u6b63\u4e09\u89d2\u5f62\uff0c\u4e0d\u96be\u60f3\u5230\u53ea\u6709\u4e00\u79cd\u53ef\u80fd\uff1a\u4e24\u6839\u6728\u68cd\u7684\u957f\u5ea6\u76f8\u7b49\uff0c\u53e6\u5916\u4e24\u6839\u7684\u957f\u5ea6\u548c\u4e5f\u548c\u524d\u9762\u90a3\u4e24\u6839\u6728\u68cd\u957f\u5ea6\u76f8\u7b49\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u628a\u6728\u68cd\u4ece\u5927\u5230\u5c0f\u957f\u5ea6\u547d\u540d\u4e3a$w, x, y, z$\uff0c\u6b64\u65f6\u5c31\u6709$w = x = y + z$\u3002\n\n\n\u90a3\u4e48\u6b64\u9898\u7684\u601d\u8def\u4e5f\u5c31\u6bd4\u8f83\u597d\u60f3\u4e86\uff0c\u91c7\u7528\u6876\u8ba1\u6570\u601d\u60f3\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u957f\u5ea6\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u7136\u540e\u679a\u4e3e\u6bcf\u4e00\u79cd\u53ef\u80fd\u7684\u957f\u5ea6\u4f5c\u4e3a$w, x$\uff0c\u7136\u540e\u518d\u5728\u4e8c\u5c42\u5faa\u73af\u4e2d\u679a\u4e3e\u548c\u4e3a\u524d\u4e24\u6839\u6728\u68cd\u957f\u5ea6$w$\uff08$x$\u4e5f\u7b49\u6548\uff0c\u56e0\u4e3a$w = x$\uff09\u7684\u6728\u68cd$y, z$\uff0c\u7136\u540e\u518d\u7528\u4e58\u6cd5\u539f\u7406\uff0c\u7ec4\u5408\u6570\u6765\u8ba1\u7b97\u65b0\u65b9\u6848\u3002\u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u8bbe\u6876\u8ba1\u6570\u601d\u60f3\u4e2d\u7684\u8fd9\u4e2a\u6876\u6570\u7ec4\u4e3a$a$\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c$a_i$\u4ee3\u8868\u957f\u5ea6\u4e3a$i$\u7684\u6728\u68cd\u6570\u91cf\u3002\n\n\u4f46\u8fd8\u662f\u8fd9\u4e2a\u5177\u4f53\u600e\u4e48\u8ba1\u7b97\u5462\uff1f\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\u3002\n\n- $y \\not= z$\uff1a\u8fd9\u79cd\u60c5\u51b5\u5c31\u662f\u5728\u957f\u5ea6\u4e3a$w$\uff08$x$\uff09\u53d6$2$\u6839\u7684\u65b9\u6848\u6570$\\times$\u957f\u5ea6\u4e3a$y$\u7684\u6728\u68cd\u4e2d\u53d6$1$\u6839\u7684\u65b9\u6848\u6570$\\times$\u957f\u5ea6\u4e3a$z$\u7684\u6728\u68cd\u4e2d\u53d6$1$\u6839\u7684\u65b9\u6848\u6570\u3002\u56e0\u4e3a$y \\not= z$\uff0c\u957f\u5ea6\u4e3a$y$\u7684\u6728\u68cd\u4e2d\u53d6$1$\u6839\u7684\u65b9\u6848\u6570\u548c\u957f\u5ea6\u4e3a$z$\u7684\u6728\u68cd\u4e2d\u53d6$1$\u6839\u7684\u65b9\u6848\u6570\u4e4b\u95f4\u53ef\u4ee5\u76f4\u63a5\u753b\u4e58\u53f7\uff08\u4e92\u4e0d\u5e72\u6d89\u6027\uff09\u3002\u8fd9\u79cd\u65b9\u6848\u7684\u516c\u5f0f\u5c31\u662f$C^2_{a_w} \\times C^1_{a_y} \\times C^1_{a_z}$\u3002\n- $y = z$\uff1a\u8fd9\u79cd\u60c5\u51b5\u5c31\u662f\u5728\u957f\u5ea6\u4e3a$w$\uff08$x$\uff09\u53d6$2$\u6839\u7684\u65b9\u6848\u6570$\\times$\u957f\u5ea6\u4e3a$y$\uff08$z$\uff09\u7684\u6728\u68cd\u4e2d\u53d6$2$\u6839\u7684\u65b9\u6848\u6570\u3002\u8fd9\u6b21$y = z$\u4e86\uff0c\u6211\u4eec\u8981\u653e\u5728\u4e00\u4e2a\u5730\u65b9\u4e2d\u8003\u8651\u3002\u7528\u516c\u5f0f\u8868\u793a\u5c31\u662f$C^2_{a_w} \\times C^2_{a_y}$\n\n\u8bb2\u5b8c\u601d\u8def\uff0c\u6211\u4eec\u5c31\u4e0a\u4ee3\u7801\u54af\u3002\n\n# \u4ee3\u7801\n```cpp\n/*\n * @Author: crab-in-the-northeast \n * @Date: 2020-04-06 00:25:54 \n * @Last Modified by: crab-in-the-northeast\n * @Last Modified time: 2020-04-06 10:23:32\n */\n#include <iostream>\n#include <cstdio>\n#include <climits>\n\ntypedef long long ll;\nconst int mod = 1e9 + 7;\nconst int maxl = 5e3 + 5;\n\nint a[maxl];\n\ninline int max(int a, int b) {\n    return a > b ? a : b;\n}\n\ninline int min(int a, int b) {\n    return a < b ? a : b;\n}\n\nint main() {\n    int n;\n    ll ans = 0;\n    std :: cin >> n;\n    \n    int begin = INT_MAX;\n    int end = INT_MIN;\n\n    for(int i = 1; i <= n; i++) {\n        int len;\n        std :: cin >> len;\n        begin = min(begin, len);\n        end = max(end, len);\n        a[len]++;\n    }\n\n    for(int i = begin + 1; i <= end; i++) {\n        if(a[i] > 1) {//\u6570\u91cf\u5fc5\u987b>1\uff0c\u8981\u4e0d\u7136\u51d1\u4e0d\u6210\u524d\u9762\u7684\u4e24\u6839\u6728\u68cd\n            for(int j = begin; j <= i / 2; j++) {\n                if(a[j] && a[i - j]) {//\u770b\u770b\u662f\u4e0d\u662f\u90fd\u6709\n                    if(j == i - j && a[j] >= 2)//\u5982\u679c\u4e24\u4e2a\u662f\u76f8\u7b49\u7684\uff0c\u8fd8\u9700\u8981\u6ce8\u610f\u8fd9\u4e2a\u591f\u4e0d\u591f\u4e24\u6839\n                        ans = ans + ((a[i] * (a[i] - 1) >> 1) * (a[j] * (a[j] - 1) >> 1) % mod) % mod;\n                    else if(j != i - j)//\u8981\u7279\u522b\u6ce8\u610f\u8fd9\u4e2aif\uff0c\u56e0\u4e3a\u4e0a\u8fb9\u7684\u6761\u4ef6\u4e2d\u5982\u679cj == i - j\u4f46\u662fa[j] < 2\u4ecd\u7136\u4f1a\u6765\u5230\u8fd9\u4e2a\u5206\u652f\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u4fdd\u8bc1j != i - j\u624d\u80fd\u8fdb\u884c\u4e0b\u4e00\u6b65\u8ba1\u7b97\n                        ans = ans + ((a[i] * (a[i] - 1) >> 1) * a[j] * a[i - j]) % mod;      \n                }\n                ans %= mod;\n            }\n        }\n    }\n\n    std :: cout << ans << std :: endl;\n    return 0;\n}\n```\n\n# \u8bc4\u6d4b\u7ed3\u679c\n- WA 70\uff1a[R32516251](https://www.luogu.com.cn/record/32516251)\uff08\u5728\u6761\u4ef6\u5206\u652f\u5904\u6ca1\u6709\u6ce8\u610f`else if(j != i - j)`\u8fd9\u4e2a\u4e0d\u80fd\u53bb\u6389\u540e\u9762\u7684`if`\n- AC 100\uff1a[R32516573](https://www.luogu.com.cn/record/32516573)\n",
        "postTime": 1586140122,
        "uid": 120868,
        "name": "dbxxx",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "**\u7b2c\u4e00\u7bc7\u9898\u89e3\u4e0d\u77e5\u9053\u80fd\u4e0d\u80fd\u8fc7**\n \n\u770b\u4e86\u5927\u4f6c\u7684\u9898\u89e3\u624d\u5199\u51fa\u6765\u7684\uff0c\u539f\u672c\u6253\u7b97\u628a\u7ec4\u5408\u5217\u51fa\u6765\u7136\u540e\u4e00\u4e2a\u4e2a\u5224\u65ad\u662f\u4e0d\u662f\u7b49\u8fb9\u4e09\u89d2\u5f62\u7684\uff0c\u540e\u6765\u624d\u53d1\u73b0\u8fd8\u8981\u7528\u5230\u6570\u5b66\n\n\n------------\n```java\nimport java.util.Scanner;\n\npublic class Main {\n\t\n\tstatic Scanner sc;\n\tstatic int MO = 1000000007;\n\tstatic int n;//n\u4e2a\u6570\n\tstatic int[] num;//\u5b58\u50a8\u6bcf\u4e2a\u6570\u5b57\u51fa\u73b0\u7684\u4e2a\u6570\n\tstatic int max = 0;//\u5b58\u50a8\u6728\u68cd\u957f\u5ea6\u6700\u5927\u503c\n\tstatic int temp;//\u4e34\u65f6\u53d8\u91cf\u5b58\u50a8sc.nextInt()\n\tstatic int sum = 0;\n\t\n\t\n\tpublic static void main(String[] args) {\n\t\t//\u521d\u59cb\u5316\n\t\tsc = new Scanner(System.in);\n\t\tn = sc.nextInt();\n\t\tnum = new int[5001];\n\t\t\n\t\tfor (int i = 0; i < n; i++) {\n\t\t\ttemp = sc.nextInt();\n\t\t\tif (temp > max) {\n\t\t\t\tmax = temp;\n\t\t\t}\n\t\t\tnum[temp]++;\n\t\t}\n\t\t\n\t\t/**\n\t\t * \u6613\u77e5:a=b=c+d\n\t\t * \u4e00\u3001\u5373\u5148\u53d6\u4e24\u652f\u4e00\u6837\u957f\u4e14\u957f\u5ea6\u4e3ai\u7684\u6728\u68cd\n\t\t * \u4e8c\u3001\u518d\u4ece\u6bd4i\u957f\u5ea6\u5c0f\u7684\u6728\u68cd\u53d6\u4e24\u652f\u6728\u68cdj\u3001i-j\n\t\t * \t  \u2460j == i-j,\u4ece\u76f8\u540c\u957f\u5ea6\u6728\u5806\u53d6\u4e24\u4e2a\n\t\t * \t  \u2461j != i-j,\u4ece\u4e0d\u540c\u957f\u5ea6\u4e24\u4e2a\u6728\u5806\u5206\u522b\u53d6\u4e00\u4e2a\n\t\t * \t  \u2462\u4e3a\u907f\u514d\u53d6\u91cd\u590d,\u5e94\u63a7\u5236 j < i - j,\u5373j < i / 2\n \t\t */\n\t\t\n\t\t//\u5982\u679c\u4ece\u957f\u5ea6\u4e3a1\u7684\u6728\u5806\u5f00\u59cb\u53d6\u4e24\u4e2a,\u5f88\u660e\u663e\u6ca1\u6709\u8fd9\u79cd\u60c5\u51b5,\u56e0\u6b64\u4ece\u957f\u5ea6\u4e3a2\u7684\u6728\u5806\u5f00\u59cb\u53d6\n\t\tfor (int i = 2; i <= max; i++) {\n\t\t\tif (num[i] >= 2) {//\u6b64\u6728\u5806\u8d85\u8fc7\u4e24\u652f\u6728\u68cd\n\t\t\t\t int fs = C(num[i], 2) % MO;\n\t\t\t\t//\u53d6\u5b8c\u4e24\u652f\u957f\u77ed\u4e00\u6837\u7684\u6728\u68cd\u540e,\u5f00\u59cb\u53d6\u53e6\u5916\u4e24\u6839\u957f\u5ea6\u672a\u77e5\u7684\n\t\t\t\tfor (int j = 1; j <= i / 2; j++) {\n\t\t\t\t\t//1\u3001\u957f\u5ea6\u4e00\u6837;\u90a3\u4e48\u5c31\u5728\u540c\u4e00\u6728\u5806\u53d6\u4e24\u4e2a\n\t\t\t\t\tif (j == i - j && num[j] >= 2) {\n\t\t\t\t\t\tsum = (sum + fs * C(num[j], 2)) % MO;\n\t\t\t\t\t}\n\t\t\t\t\t//2\u3001\u957f\u5ea6\u4e0d\u4e00\u6837;\u90a3\u4e48\u5c31\u5728\u4e24\u4e2a\u4e0d\u540c\u6728\u5806\u5206\u522b\u53d6\u4e00\u4e2a\n\t\t\t\t\tif (j != i - j && num[j] >= 1 && num[i-j] >= 1) {\n\t\t\t\t\t\tsum = (sum + fs * C(num[j], 1) * C(num[i-j], 1)) % MO;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tSystem.out.println(sum);\n\t}\n\n\t// \u6c42\u7ec4\u5408\u6570\n\t// \u8981\u4e48C(n,1) \u8981\u4e48C(n,2)\n\tpublic static int C(int k, int r) {\n\t\tif (r == 1) {\n\t\t\treturn k % MO;\n\t\t}\n\t\treturn (k * (k - 1) / 2) % MO;\n\t}\n}\n\n```\n",
        "postTime": 1594038701,
        "uid": 332896,
        "name": "XERIN",
        "ccfLevel": 0,
        "title": "java\u9898\u89e3"
    },
    {
        "content": "# \u9898\u76ee\u5927\u610f\n\n\u7ed9\u51fa $N$ \u6839\u6728\u68d2,\u6c42\u51fa\u5728\u8fd9\u4e9b\u6728\u68d2\u4e2d\u9009\u51fa $4$ \u6839\u7ec4\u6210\u7b49\u8170\u4e09\u89d2\u5f62\u7684\u65b9\u6848\u6570.\n\n# \u5206\u6790\n\n\u56db\u6839\u6728\u68d2\u8981\u7ec4\u6210\u4e00\u4e2a\u7b49\u8170\u4e09\u89d2\u5f62\u53ea\u6709\u5f53\u4e24\u6839\u6728\u68d2\u7684\u957f\u5ea6\u76f8\u540c,\u53e6\u5916\u4e24\u6839\u6728\u68d2\u7684\u957f\u5ea6\u548c\u4e0e\u8fd9\u4e24\u6839\u6728\u68d2\u957f\u5ea6\u76f8\u540c\u65f6\u624d\u884c.\n\n\u4e8e\u662f\u53ef\u4ee5\u9884\u5904\u7406\u4e00\u4e2a\u6570\u7ec4 $p$,$p_i$ \u8868\u793a\u9009\u4e24\u6839\u6728\u68d2\u7684\u957f\u5ea6\u548c\u4e3a $i$ \u7684\u65b9\u6848\u6570,\u8fd9\u6837\u5bf9\u4e8e\u957f\u5ea6\u4e3a $k$ \u7684\u7b49\u8170\u4e09\u89d2\u5f62\u7684\u4e2a\u6570\u5c31\u662f $C_{sum_k}^2\\times p_k$,\u4e8e\u662f\u6700\u540e\u7684\u7b54\u6848\u5c31\u662f $\\sum_{k=1}^{5000}C_{sum_k}^2\\times p_k$\u4e86,\u5177\u4f53\u8ba1\u7b97\u90e8\u5206\u653e\u5728\u4ee3\u7801\u4e2d\u8bb2\u89e3.\n\n# \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define REP(i,first,last) for(int i=first;i<=last;++i)\n#define DOW(i,first,last) for(int i=first;i>=last;--i)\nusing namespace std;\nconst int MAXN=1e4+7;\nconst long long mod=1e9+7;\nint N;\nint sum[MAXN];//\u8bb0\u5f55\u6bcf\u4e2a\u957f\u5ea6\u51fa\u73b0\u7684\u6b21\u6570\nlong long p[MAXN];\nint main()\n{\n\tscanf(\"%d\",&N);\n\tint len;\n\tREP(i,1,N)\n\t{\n\t\tscanf(\"%d\",&len);\n\t\tsum[len]++;\n\t}\n\tREP(i,1,2500)\n\t{\n\t\tp[i*2]+=1ll*(sum[i]*(sum[i]-1)/2);//\u5bf9\u4e8e\u957f\u5ea6\u4e3ai\u7684\u6728\u68d2\u5bf9\u4e8e\u957f\u5ea6\u4e3ai*2\u7684\u8d21\u732e\u5373\u4f7f\u5728\u8fd9\u4e9b\u6728\u68d2\u4e2d\u9009\u51fa\u4e24\u6839\u7684\u65b9\u6848\u6570\n\t\tp[i*2]%=mod;\n\t\tREP(j,i+1,5000-i)\n\t\t{\n\t\t\tp[i+j]+=1ll*sum[i]*sum[j];//\u5982\u679c\u4e0d\u4e00\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u7528\u4e58\u6cd5\u539f\u7406\n\t\t\tp[i+j]%=mod;\n\t\t}\n\t}\n\tlong long answer=0;\n\tREP(i,1,5000)\n\t{\n\t\tanswer+=(1ll*sum[i]*(sum[i]-1)/2)%mod*p[i]%mod;//\u5bf9\u4e8e\u957f\u5ea6\u4e3ai\u7684\u7b49\u8170\u4e09\u89d2\u5f62\u7684\u8ba1\u7b97\u5c31\u76f4\u63a5\u5957\u7528\u5206\u6790\u4e2d\u7684\u516c\u5f0f\n\t\tanswer%=mod;\n\t}\n\tprintf(\"%lld\",answer);//\u8f93\u51fa\n\treturn 0;\n}\n```",
        "postTime": 1583485752,
        "uid": 86625,
        "name": "Limit",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898**\u7eaf\u66b4\u529b**\u662f\u4e0d\u884c\u7684\uff0c\u9700\u8981\u7ed3\u5408**\u7ec4\u5408\u6570\u5b66**\u6c42\u89e3\u3002\n## \u601d\u8def\uff1a\n4\u6839\u6728\u68d2\u7ec4\u5408\u6210\u6b63\u4e09\u89d2\u5f62\uff0c\u90a3\u4e48\u4e00\u5b9a\u662f**2\u4e2a\u5c0f\u6728\u68d2**\u7ec4\u6210\u5176\u4e2d\u4e00\u8fb9\uff0c\u53e6\u5916\u4e24\u8fb9\u662f\u4e24\u4e2a**\u76f8\u7b49\u7684\u5927\u6728\u68d2**\u3002\n\n\u628a2\u4e2a\u5c0f\u6728\u68d2\u770b\u6210\u4e00\u4e2a**\u6574\u4f53**\uff0c\u548c**\u5927\u6728\u68d2**\u8fdb\u884c\u7ec4\u5408\u6570\u6c42\u89e3\u5373\u53ef\u3002\n#### \u9996\u5148\n\u6211\u4eec\u9700\u8981\u4e24\u4e2a\u6876\uff1a$x[i]$\u8868\u793a\u75282\u4e2a\u5c0f\u6728\u68d2\uff08\u5c0f\u662f\u76f8\u5bf9\u7684\uff09\u7ec4\u5408\u6210\u957f\u5ea6\u4e3a$i$\u7684**\u6574\u4f53\u7ec4\u5408\u79cd\u7c7b\u6570**\uff0c$y[i]$\u8868\u793a\u957f\u5ea6\u4e3a$i$\u7684**\u6728\u68d2\u6570\u76ee**\u3002\n#### \u7136\u540e\n\u9898\u76ee\u4f1a\u7ed9\u51fa$y[i]$\uff0c\u600e\u4e48\u6c42$x[i]$\u5462\uff1f\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a$x[4]=y[1]*y[3]+C_{y[2]}^2$\uff0c\u5176\u4e2d$(y[2]\\geq 2)$\u3002\n\n\u4ece\u957f\u5ea6\u4e3a$1$\u7684\u6728\u68cd\u4e2d\u62bd\u51fa\u4e00\u4e2a\uff0c\u4ece\u957f\u5ea6\u4e3a$3$\u7684\u6728\u68cd\u4e2d\u62bd\u51fa\u4e00\u4e2a\uff0c\u5c31\u53ef\u4ee5\u7ec4\u6210\u957f\u5ea6\u4e3a$4$\u7684\u6728\u68cd\uff0c\u6839\u636e\u4e58\u6cd5\u539f\u7406\u76f8\u4e58\u5373\u53ef\uff0c\u7136\u540e\u52a0\u4e0a\u4ece\u957f\u5ea6\u4e3a$2$\u7684\u6728\u68cd\u4e2d\u62bd\u51fa\u4e24\u4e2a\u7684\u79cd\u7c7b\u6570\u3002\n\n$x[i]$\u53ef\u4ee5\u7528\u9012\u63a8\u5f0f\u8868\u793a\uff0c\u5206\u4e24\u79cd\u60c5\u51b5\u3002\n\n\u00b7\u4e24\u4e2a**\u4e0d\u540c**\u6728\u68cd\u7ec4\u5408\uff0c$x[i+j]$+=$y[i]*y[j]$\u3002\u5176\u4e2d$i<j$\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u6570\uff1b\n\n\u00b7\u4e24\u4e2a**\u7b49\u957f**\u6728\u68cd\u7ec4\u5408,$x[2*i]$+=$C_{y[i]}^2$\u3002\u5176\u4e2d$(y[i]\\geq 2)$\u3002\n#### \u6700\u540e\n\u90a3\u4e48\u957f\u5ea6\u4e3a$i$\u65f6\uff0c\u7ec4\u5408\u6570\u5373\uff1a\u4ece\u957f\u5ea6\u4e3a$i$\u7684\u6728\u68cd\u4e2d\u62bd\u51fa\u4e24\u4e2a\u7684\u79cd\u7c7b\u6570\u4e58\u4ee5$x[i]$\uff0c\u4e5f\u5c31\u662f$sum_i=C_{y[i]}^2*x[i]=\\frac{y[i]*(y[i]-1)}{2}*x[i]$\uff0c\u5176\u4e2d$(y[i]\\geq 2)$\u3002\n\n**\u679a\u4e3e**\u957f\u5ea6$i$\uff0c\u8ba1\u6570\u5f97\u51fa\u7ed3\u679c\u3002\uff08**\u8bb0\u5f97\u53d6\u6a21\uff01**\uff09\n## \u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\ninline short read()//\u5feb\u8bfb \n{\n\tregister short a=0;register char c=getchar();\n\twhile(c<'0'||c>'9')c=getchar();\n\twhile(c>='0'&&c<='9')a=a*10+(c^48),c=getchar();\n\treturn a;\n}\nint x[5001],y[5001];\n//x[i]\u8868\u793a\u4e24\u6839\u5c0f\u68cd\u5b50\u603b\u957f\u5ea6\u4e3ai\u7684\u7ec4\u5408\u6570\u76ee\n//y[i]\u8868\u793a\u4e00\u6839\u68cd\u5b50\u957f\u5ea6\u4e3ai\u7684\u6570\u76ee \n//\u4e24\u6839\u68cd\u5b50\u7ec4\u5408\u957f\u5ea6\u8d85\u8fc75000\u4e0d\u9700\u8981\u8bb0\u5f55 \nint main()\n{\n\tint n;register int i,j,sum=0;\n\tscanf(\"%d\",&n);\n\tfor(i=0;i<n;i++)y[read()]++;\n\t//\u5c06\u68cd\u5b50\u957f\u5ea6\u7684\u6570\u636e\u88c5\u5165\u6876\u91cc\n\tfor(i=1;i<=2500;i++)\n\t\tfor(j=i+1;j<=5000-i;j++)\n\t\t\tx[i+j]+=y[i]*y[j];\n\t//\u8ba1\u7b97\u4e24\u4e2a\u4e0d\u7b49\u6728\u68cd\u7684\u7ec4\u5408\u6570\u76ee \n\tfor(i=1;i<=2500;i++)\n\t\tif(y[i]>1)\n\t\t\tx[2*i]+=y[i]*(y[i]-1)/2;\n\t//\u52a0\u4e0a\u4e24\u4e2a\u7b49\u957f\u6728\u68cd\u7684\u7ec4\u5408\u6570\u76ee \n\tfor(i=1;i<=5000;i++)\n\t\tif(y[i]>1)\n\t\t\tsum+=y[i]*(y[i]-1)/2*x[i],sum%=1000000007;\n\t//\u6c42\u7ec4\u5408\u6570\uff0csum=y*(y-1)/2*x\uff0c\u8fd8\u8981\u8bb0\u5f97\u53d6\u6a21\uff01 \n\tprintf(\"%d\",sum);\n}\n//PS\uff1a\u5438\u6c27\u8dd1\u5f97\u8fd8\u53ef\u4ee5\uff0c100+ms\n```\n",
        "postTime": 1586328668,
        "uid": 195942,
        "name": "Terrible",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u6ce8\u610f\u4e24\u4e2a\u70b9\uff1a\n\n1\u3001\u6ca1\u6709\u5fc5\u8981\u4e13\u95e8\u4e3a\u8ba1\u7b97\u7ec4\u5408\u5355\u5199\u4e00\u4e2a\u9012\u5f52\u51fd\u6570\uff0c\u8fd9\u9053\u9898\u91cc\u53ea\u7528\u5f97\u5230$$C^1_n$$\u548c$$C^2_n$$\uff0c\u76f4\u63a5\u624b\u6253define\u5b8f\u5c31\u597d\uff1b\n\n2\u3001\u5982\u679c\u679a\u4e3e\u5927\u68cd\u957f\u5ea6\u548c\u5c0f\u68cd\u957f\u5ea6\u4e4b\u4e00\u7684\u8bdd\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u5224\u65ad\uff0c\u5c0f\u68cd\u957f\u5ea6\u5faa\u73af\u65f6\u53ea\u80fd\u5230\u5927\u68cd\u957f\u5ea6\u7684\u4e00\u534a\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff01\n\n\u770b\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\nusing namespace std;\n#define MOD 1000000007 //1e9+7\n#define C1(x) (x) //C(1,x)\n#define C2(x) ((x)*((x)-1)/2) //C(2,x)\nint n;\nlong long arr[5005]; //\u6876\u6392\u5e8f\nlong long sum;\nint main(){\n    ios::sync_with_stdio(false); //\u5173\u95ed\u540c\u6b65\n    cin >> n;\n    for (int i = 1; i <= n; i++){\n        int t;\n        cin >> t;\n        arr[t]++;\n    }\n    for (int a = 2; a <= 5000; a++){\n        for (int c = 1; c <= a/2; c++){ //\u6ce8\u610f\u53ea\u80fd\u5faa\u73af\u5230a/2\n            int d = a - c; //\u5206c,d\u662f\u5426\u76f8\u540c\u8ba8\u8bba\n            if (d != c){ \n                if (arr[a] >= 2 && arr[c] >= 1 && arr[d] >= 1)\n                    sum += ((C2(arr[a]) % MOD)*(C1(arr[c]) % MOD)) % MOD*(C1(arr[d]) % MOD) % MOD;\n            }\n            else{\n                if (arr[a] >= 2 && arr[c] >= 2)\n                    sum += (C2(arr[a]) % MOD)*(C2(arr[c]) % MOD) % MOD;\n            }\n            sum %= MOD;\n        }\n    }\n    cout << sum;\n}\n```",
        "postTime": 1501600868,
        "uid": 6135,
        "name": "bjrjk",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    },
    {
        "content": "## \u9898\u610f\u7b80\u8ff0\n\u6c42\u5728$n$\u4e2a\u6570\u4e2d\u90094\u4e2a\u6570$x_1,x_2,x_3,x_4$\uff0c\u4f7f$x_1=x_2=x_3+x_4$\u7684\u65b9\u6cd5\u6570$mod$ $10^9+7$\u7684\u4f59\u6570\u3002\n\n## \u5206\u6790\n\u7b2c\u4e00\u53cd\u5e94\uff1a\u56db\u5c42\u5faa\u73af\u679a\u4e3e\u3002\u7136\u800c\u5982\u679c\u8fd9\u4e48\u7b80\u5355\u5c31\u5e94\u8be5\u662f\u7ea2\u9898\u4e86\u3002$\\color{white}\\colorbox{black}{TLE}$\u3002\n\n\u7b2c\u4e8c\u53cd\u5e94\uff1a$0 \\le a_i \\le 5 \\times 10^3$\uff0c\u8303\u56f4\u8fd9\u4e48\u5c0f\uff1f\u611f\u89c9\u53ef\u4ee5\u7528\u6876\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5$O(range)$\u679a\u4e3e$x_1$\u548c$x_2$\u7684\u53d6\u503c\uff0c\u63a5\u7740\u6211\u4eec\u9700\u8981\u5728\u8fd9\u4e2a\u53d6\u503c\u7684\u6240\u6709\u6570\u4e2d\u9009\u51fa\u4e24\u4e2a\uff08\u65e0\u5e8f\uff09\uff0c\u8bbe\u6709$k$\u4e2a\uff0c\u90a3\u4e48\u6709$C_k^2 = \\dfrac{k \\times (k-1)}{2}$\u79cd\u65b9\u6cd5\u3002\n\n\n\u63a5\u7740\u5462\uff1f\u6211\u4eec\u8fd8\u9700\u8981\u77e5\u9053$x_3$\u548c$x_4$\u3002\u5b83\u4eec\u662f\u7b49\u4ef7\u7684\uff0c\u4e0d\u59a8\u8bbe$x_3 \\le x_4$\u3002\u5982\u679c$2|x_1$ \u4e14 $x_3=x_4$\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u5728$\\dfrac{x_1}{2}$\u7684\u4e2a\u6570$m$\u79cd\u65e0\u5e8f\u53d6\u51fa2\u4e2a\u6570\uff0c\u6709$C^2_m = \\dfrac{m \\times (m-1)}{2}$\u79cd\u65b9\u6cd5\u3002\u5982\u679c$x_3 \\not = x_4$\uff0c\u90a3\u4e48\u679a\u4e3e$x_3$\u7684\u6570\u503c\uff0c\u5219$x_4=x_1-x_3$\u3002\u8bbe\u6709$a$\u4e2a\u6570\u7b49\u4e8e$x_3$\uff0c$b$\u4e2a\u6570\u7b49\u4e8e$x_4$\uff0c\u90a3\u4e48\u5c31\u6709$\\dfrac{a \\times b}{2}$\u79cd\u65b9\u6cd5(\u65e0\u5e8f)\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u8bbe$S(x)$\u8868\u793a\u7b49\u4e8e$x$\u7684\u6570\u7684\u4e2a\u6570\uff0c\u5219$ans=\\sum^{\\max{a_i,1 \\le i \\le n}}_{j=1} C_{S(j)}^2 \\times [\\sum_{k=1}^{[\\frac{j-1}{2}]} S(k) \\times S(j-k)]+\\sum^{[\\frac{n}{2}]}_{i=1} C_{S(i \\times 2)}^2 \\times C^2_{S(i)}$ \u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(range^2)$\u3002$\\color{white}\\colorbox{green}{AC}$\uff01\n\n\uff08\u8fd9\u4e2a\u5f0f\u5b50\u6709\u70b9~~\u6076\u5fc3~~\u957f\uff0c\u53ef\u4ee5\u8df3\u8fc7\uff0c\u76f4\u63a5\u770b\u4ee3\u7801\uff09\n\n## \u89e3\u51b3\n\n\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <cmath>\n#define int long long\n\nusing namespace std;\n\nconst int MOD = 1e9 + 7, W = 5e3 + 5;\nint n, x, sum[W], ans, maxi;\n\nsigned main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tcin >> x;\n\t\tmaxi = max(maxi, x);\n\t\tsum[x]++;\n\t}\n\tfor (int i = 1; i <= maxi; i++) {\n\t\tint cur = sum[i] * (sum[i] - 1) / 2 % MOD, s = 0;\n\t\tfor (int j = 1; j * 2 <= i; j++)\n\t\t\tif (j * 2 == i)\n\t\t\t\ts = (s + sum[j] * (sum[j] - 1) / 2) % MOD;\n\t\t\telse \n\t\t\t\ts = (s + sum[j] * sum[i - j]) % MOD;\n\t\tans = (ans + cur * s) % MOD;\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n\n#### THE END",
        "postTime": 1593840596,
        "uid": 253946,
        "name": "ClHg2",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3799 \u3010\u5996\u68a6\u62fc\u6728\u68d2\u3011"
    }
]
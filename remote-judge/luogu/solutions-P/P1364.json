[
    {
        "content": "\u73b0\u6709\u7684\u9898\u89e3\u57fa\u672c\u662f\u7528Floyed\u6216\u8005\u5176\u4ed6\u7a0d\u4f18\u7684\u7b97\u6cd5\u8dd1\u7684\uff0c\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u5728$O(n^2)$\u4ee5\u4e0a\u3002\n\n\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\n\n**\u4f60\u4eec\u7ecf\u5386\u8fc7\u7edd\u671b\u5417**\n\n\u8fd9\u9898\u4f5c\u4e3a\u6211\u4eec\u56fe\u8bba\u8003\u8bd5\u7684\u4e00\u9053\u9898\uff0cn\u7684\u8303\u56f4\u76f4\u63a5\u5230\u4e8610000\uff0c\u6b64\u65f6N^2\u7684\u7b97\u6cd5\u4e5f\u65e0\u6cd5AC\u3002\n\n\u6709\u53e5\u5199\u5c45\u91cc\u592b\u4eba\u7684\u8bdd\uff1a\u201c**\u522b\u4eba\u6478\u74dc\u5979\u5bfb\u85e4\uff0c\u522b\u4eba\u6458\u53f6\u4ed6\u95ee\u6839**\u201d\n\n\u6211\u4eec\u4e5f\u8981\u505a\u90a3\u4e2a\u201c\u5979\u201d\uff0c \u4e0d\u80fd\u53ea\u6ee1\u8db3\u4e8e\u901a\u8fc7\u6b64\u9898\uff0c\u800c\u4e14\u8981\u4e86\u89e3\u672c\u9898\u7684$O(N)$\u7b97\u6cd5\u6b63\u89e3\uff1a\u5e26\u6743\u6811\u7684\u91cd\u5fc3\u3002\n\n### \u6811\u7684\u91cd\u5fc3\u7684\u5b9a\u4e49\uff1a\n\u6811\u82e5\u4ee5\u67d0\u70b9\u4e3a\u6839\uff0c\u4f7f\u5f97\u8be5\u6811\u6700\u5927\u5b50\u6811\u7684\u7ed3\u70b9\u6570\u6700\u5c0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u5219\u4e3a\u8be5\u6811\u7684\u91cd\u5fc3\uff0c\u4e00\u68f5\u6811\u53ef\u80fd\u6709\u591a\u4e2a\u91cd\u5fc3\u3002\n\n### \u6811\u7684\u91cd\u5fc3\u7684\u6027\u8d28\uff1a\n1\u3001\u6811\u4e0a\u6240\u6709\u7684\u70b9\u5230\u6811\u7684\u91cd\u5fc3\u7684\u8ddd\u79bb\u4e4b\u548c\u662f\u6700\u77ed\u7684\uff0c\u5982\u679c\u6709\u591a\u4e2a\u91cd\u5fc3\uff0c\u90a3\u4e48\u603b\u8ddd\u79bb\u76f8\u7b49\u3002\n\n2\u3001\u63d2\u5165\u6216\u5220\u9664\u4e00\u4e2a\u70b9\uff0c\u6811\u7684\u91cd\u5fc3\u7684\u4f4d\u7f6e\u6700\u591a\u79fb\u52a8\u4e00\u4e2a\u5355\u4f4d\u3002\n\n3\u3001\u82e5\u6dfb\u52a0\u4e00\u6761\u8fb9\u8fde\u63a52\u68f5\u6811\uff0c\u90a3\u4e48\u65b0\u6811\u7684\u91cd\u5fc3\u4e00\u5b9a\u5728\u539f\u6765\u4e24\u68f5\u6811\u7684\u91cd\u5fc3\u7684\u8def\u5f84\u4e0a\u3002\n\n\u5f53\u7136\uff0c\u8fd9\u9898\u6211\u4eec\u53ea\u9700\u8981\u7528\u5230\u7b2c\u4e00\u6761\u6027\u8d28\u3002\n\n### \u600e\u4e48\u6c42\u6811\u7684\u91cd\u5fc3\uff1a\n\u5b9a\u4e49\u51e0\u4e2a\u6570\u7ec4\uff1a$f[u]$\u8868\u793a\u4ee5u\u4e3a\u6839\u7684\u603b\u8ddd\u79bb\uff0c$size[u]$\u8868\u793a\u4ee5u\u4e3a\u6839\u7684\u5b50\u6811\u7684\u5927\u5c0f\uff08\u7ed3\u70b9\u6570\uff0c**\u6b64\u9898\u6bcf\u4e2a\u70b9\u8981\u4e58\u4ee5\u6743\u503c**\uff0c\u4e0b\u6587\u7ed3\u70b9\u6570\u5747\u6307\u6b64\uff09\u3002\n\n\u663e\u7136\uff0c$ans=min(f[i],1<=i<=n)$\n\n\u9996\u5148\u6211\u4eec\u4efb\u610f\u4ee5\u4e00\u4e2a\u70b9\u4e3a\u6839dfs\u4e00\u904d\uff0c\u6c42\u51fa\u4ee5\u8be5\u70b9\u4e3a\u6839\u7684\u603b\u8ddd\u79bb\u3002\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u5c31\u4ee51\u4e3a\u6839\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u8f6c\u79fb\uff0c\u5bf9\u4e8e\u6bcf\u4e2au\u80fd\u8fbe\u5230\u7684\u70b9v\uff0c\u6709\uff1a\n$$f[v]=f[u]+size[1]-size[v]-size[v]$$\n\u600e\u4e48\u6765\u7684\u5462\uff1f\u8bd5\u60f3\uff0c\u5f53\u6839\u4eceu\u53d8\u4e3av\u7684\u65f6\u5019\uff0cv\u7684\u5b50\u6811\u7684\u6240\u6709\u8282\u70b9\u539f\u672c\u7684\u8ddd\u79bb\u8981\u5230$u$\uff0c\u73b0\u5728\u53ea\u8981\u5230$v$\u4e86\uff0c\u6bcf\u4e2a\u7ed3\u70b9\u7684\u8ddd\u79bb\u90fd\u51cf\u5c111\uff0c\u90a3\u4e48\u603b\u8ddd\u79bb\u5c31\u51cf\u5c11$size[v]$\uff0c\u540c\u65f6\uff0c\u4ee5v\u4e3a\u6839\u7684\u5b50\u6811\u4ee5\u5916\u7684\u6240\u6709\u8282\u70b9\uff0c\u539f\u672c\u53ea\u8981\u5230$u$\u5c31\u884c\u4e86\uff0c\u73b0\u5728\u8981\u5230$v$\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u8def\u7a0b\u90fd\u589e\u52a0\u4e861\uff0c\u603b\u8def\u7a0b\u5c31\u589e\u52a0\u4e86$size[1]-size[v]$\uff0c\u5176\u4e2d$size[1]$\u5c31\u662f\u6211\u4eec\u9884\u5904\u7406\u51fa\u6765\u7684\u6574\u68f5\u6811\u7684\u5927\u5c0f\uff0c\u51cf\u53bb$size[v]$\u5c31\u662f\u9664\u4ee5v\u4e3a\u6839\u7684\u5b50\u6811\u4ee5\u5916\u7684\u7ed3\u70b9\u6570\u3002\n\n\u6700\u540e\u53d6\u6700\u5c0f\u503c\uff0c\u5f97\u89e3\u3002\u65f6\u95f4\u590d\u6742\u5ea6$O(n)$\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include <cstdio>\n#define rep(i, m, n) for(register int i = m; i <= n; ++i)\n#define INF 2147483647\n#define Open(s) freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout);\n#define Close fclose(stdin);fclose(stdout);\nusing namespace std;\ninline int read(){\n\tint s = 0, w = 1;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9') { if(ch == '-') w = -1; ch = getchar(); }\n\twhile(ch >= '0' && ch <= '9') { s = s * 10 + ch - '0'; ch = getchar(); }\n\treturn s * w;\n}\nconst int MAXN = 10010;\nstruct Edge{\n\tint next, to;\n}e[MAXN << 1];\nint head[MAXN], num, w[MAXN], n, size[MAXN];\nlong long ans = INF, f[MAXN];\ninline void Add(int from, int to){\n\te[++num].to = to;\n\te[num].next = head[from];\n\thead[from] = num;\n}\nvoid dfs(int u, int fa, int dep){ //\u9884\u5904\u7406f[1]\u548csize\n    size[u] = w[u];\n\tfor(int i = head[u]; i; i = e[i].next){\n\t   if(e[i].to != fa)\n\t     dfs(e[i].to, u, dep + 1), size[u] += size[e[i].to];\n\t}\n\tf[1] += w[u] * dep;\n}\nvoid dp(int u, int fa){  //\u8f6c\u79fb\n    for(int i = head[u]; i; i = e[i].next)\n       if(e[i].to != fa)\n         f[e[i].to] = f[u] + size[1] - size[e[i].to] * 2, dp(e[i].to, u);\n    ans = min(ans, f[u]); //\u53d6\u6700\u5c0f\u503c\n}\nint a, b;\nint main(){\n    //Open(\"hospital\");\n    ans *= ans;\n    n = read();\n    rep(i, 1, n){\n       w[i] = read();\n       a = read(); b = read();\n       if(a) Add(i, a), Add(a, i);\n       if(b) Add(i, b), Add(b, i);\n    }\n    dfs(1, 0, 0);\n    dp(1, 0);\n    printf(\"%lld\\n\", ans);\n    //Close;\n    return 0;\n}\n\n```",
        "postTime": 1532914142,
        "uid": 61834,
        "name": "Huami360",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u7b80\u5355\u7684\u4e8c\u53c9\u6811\u5e94\u7528\u95ee\u9898\uff0c\u95ee\u9898\u4e2d\u7684\u7ed3\u70b9\u6570\u5e76\u4e0d\u591a\uff0c\u6570\u636e\u89c4\u6a21\u4e5f\u4e0d\u5927\uff0c\u91c7\u7528\u90bb\u63a5\u77e9\u9635\u5b58\u50a8\uff0c\u7528Floyed\u6cd5\u6c42\u51fa\u4efb\u610f\u4e24\u7ed3\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\u957f\uff0c\u7136\u540e\u7a77\u4e3e\u533b\u9662\u53ef\u80fd\u5efa\u7acb\u7684n\u4e2a\u7ed3\u70b9\u4f4d\u7f6e\uff0c\u627e\u51fa\u4e00\u4e2a\u6700\u5c0f\u8ddd\u79bb\u7684\u4f4d\u7f6e\u5373\u53ef\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528\u53cc\u94fe\u8868\u7ed3\u6784\u6216\u5e26\u7236\u7ed3\u70b9\u4fe1\u606f\u7684\u6570\u7ec4\u5b58\u50a8\u7ed3\u6784\u6765\u89e3\u51b3\uff0c\u4f46\u5b9e\u9645\u64cd\u4f5c\u7a0d\u5fae\u9ebb\u70e6\u4e86\u4e00\u70b9\u3002\n```\n#include<cstdio>\nusing namespace std;\nint a[101],g[101][101];\nint main()\n{\n\tint n,l,r,min,total;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tg[i][j]=1000000;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)//\u8bfb\u5165\u3001\u521d\u59cb\u5316\n\t{\n\t\tg[i][i]=0;\n\t\tscanf(\"%d%d%d\",&a[i],&l,&r);\n\t\tif(l>0)g[i][l]=g[l][i]=1;\n\t\tif(r>0)g[i][r]=g[r][i]=1; \n\t}\n\tfor(int k=1;k<=n;k++)//\u7528Floyed\u6c42\u4efb\u610f\u4e24\u7ed3\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\n\t{\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tif(i!=k)\n\t\t\t{\n\t\t\t\tfor(int j=1;j<=n;j++)\n\t\t\t\t{\n\t\t\t\t\tif(i!=j&&k!=j&&g[i][k]+g[k][j]<g[i][j])\n\t\t\t\t\t\tg[i][j]=g[i][k]+g[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tmin=0x7fffffff;\n\tfor(int i=1;i<=n;i++)//\u7a77\u4e3e\u533b\u9662\u5efa\u5728N\u4e2a\u7ed3\u70b9\uff0c\u627e\u51fa\u6700\u77ed\u8ddd\u79bb\n\t{\n\t\ttotal=0;\n\t\tfor(int j=1;j<=n;j++)\n\t\t\ttotal+=g[i][j]*a[j];\n\t\tif(total<min)min=total;\n\t}\n\tprintf(\"%d\",min);\n\treturn 0;\n}\n```\n\u5728\u5404\u79cd\u7ade\u8d5b\u4e2d\u7ecf\u5e38\u9047\u5230\u8fd9\u6837\u7684\u95ee\u9898\uff1aN-1\u6761\u516c\u8def\u8fde\u63a5\u7740N\u4e2a\u57ce\u5e02\uff0c\u4ece\u6bcf\u4e2a\u57ce\u5e02\u51fa\u53d1\u90fd\u53ef\u4ee5\u901a\u8fc7\u516c\u8def\u5230\u8fbe\u5176\u5b83\u4efb\u610f\u7684\u57ce\u5e02\u3002\u6bcf\u4e2a\u57ce\u5e02\u91cc\u9762\u90fd\u6709\u4e00\u5b9a\u6570\u91cf\u7684\u5c45\u6c11\uff0c\u4f46\u662f\u6570\u91cf\u5e76\u4e0d\u4e00\u5b9a\u76f8\u7b49\uff0c\u6bcf\u6761\u516c\u8def\u7684\u957f\u5ea6\u4e5f\u4e0d\u4e00\u5b9a\u76f8\u7b49\u3002X\u516c\u53f8\uff08\u6216\u8005\u662f\u653f\u5e9c\uff09\u51b3\u5b9a\u5728\u67d0\u4e00\u4e2a\u57ce\u5e02\u5efa\u7acb\u4e00\u4e2a\u533b\u9662/\u9152\u5382/\u6e38\u4e50\u573a\u2026\u2026\uff0c\u95ee\uff1a\u5c06\u5b83\u5efa\u5728\u54ea\u91cc\uff0c\u53ef\u4ee5\u4f7f\u5f97\u6240\u6709\u7684\u5c45\u6c11\u79fb\u52a8\u5230\u90a3\u91cc\u7684\u603b\u8017\u8d39\u6700\u5c0f\uff1f\u8fd9\u79cd\u9898\u76ee\u90fd\u662f\u672c\u9898\u7684\u201c\u53d8\u578b\u201d\uff0c\u4e00\u822c\u79f0\u4e3a\u201c\u6811\u7684\u4e2d\u5fc3\u70b9\u95ee\u9898\u201d\u3002\n\n**\u9009\u81ea\u4e00\u672c\u901a\uff0c\u5e0c\u671b\u7ed9\u5927\u5bb6\u63d0\u4f9b\u7cbe\u51c6\u7684\u9898\u89e3**\n\n\u6c42\u8fc7",
        "postTime": 1530609061,
        "uid": 45475,
        "name": "ShineEternal",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "###\u7b2c\u4e00\u6b21\u5199\u9898\u89e3\u597d\u6fc0\u52a8\\(\u2267\u25bd\u2266)/\n\n\u597d\u4e86\u4e0d\u591a\u8bf4\u4e86\n\n\u4e0b\u9762\u7684\u9898\u89e3\u533a\u4ee3\u7801\u597d\u591a\\_floyd\\_\u7684\u2026\u2026\n\n\u90a3\u6211\u5c31\u5199\u4e2a\u522b\u7684\u597d\u4e86O(\u2229\\_\u2229)O~\n\n###\u601d\u8def\n\n\u7528\u666e\u901a\u56fe\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\n\n\u8fdb\u884cn\u904dbfs\uff0c\u7136\u540e\u6bcf\u904d\u90fd\u8fdb\u884c\u7b54\u6848\u7684\u6bd4\u8f83\u66f4\u65b0\n\n###\u65f6\u95f4\u590d\u6742\u5ea6\n\n\u7531\u4e8ebfs\u6bcf\u904d\u90fd\u662fO(V+E)\u7684\uff0c\u800c\u8fd9\u91cc\u7279\u6b8a\u4e4b\u5904\u5728\u4e8e\u672c\u8eab\u662f\u4e2a\u6811\uff0c\u6240\u4ee5\u662fn\u4e2a\u8282\u70b9\u548cn-1\u6761\u8fb9\n\n\u6240\u4ee5\u603b\u590d\u6742\u5ea6\u8fd1\u4f3c\u4e3aO($n^2$)\uff0c\u5b8c\u7f8e\u89e3\u51b3\n\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u6734\u5b9e\u7684\u5206\u5272\u7ebf\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<queue>\nusing namespace std;\nbool g[105][105]={0};            //\u8fd9\u91ccn\u5c0f\u6211\u5c31\u76f4\u63a5\u90bb\u63a5\u77e9\u9635\u4e86\uff0c\u5982\u679c\u7528\u90bb\u63a5\u8868\u8fd8\u80fd\u5feb\u70b9 \nbool v[105]={0};\nint n,num[105],ans=1<<30;\nstruct node{\n    int u,step;\n};\nint bfs(int x){                    //bfs\u627e\u5f53\u524d\u70b9x\u4e3a\u533b\u9662\u8bbe\u7f6e\u70b9\u65f6\u7684\u603b\u8ddd\u79bb \n    memset(v,0,sizeof(v));\n    queue<node> q;\n    v[x]=1;\n    q.push((node){x,0});\n    int sum=0;\n    while(!q.empty()){\n        node now=q.front();\n        q.pop();\n        for(int i=1;i<=n;i++)\n            if(g[now.u][i]&&!v[i]){\n                node next={i,now.step+1};\n                sum+=num[i]*next.step;\n                v[i]=1;\n                q.push(next);\n            }\n    }\n    return sum;\n}\nint main(){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n        int a,l,r;\n        scanf(\"%d%d%d\",&a,&l,&r);\n        num[i]=a;\n        if(l) g[i][l]=g[l][i]=1;\n        if(r) g[i][r]=g[r][i]=1;\n    }\n    for(int i=1;i<=n;i++)\n        ans=min(ans,bfs(i));\n    printf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1508764594,
        "uid": 57849,
        "name": "\u96ea\u98ce\u821e\u8005",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "## \u6211\u8fd9\u4e2a\u849f\u84bb\u7b2c\u4e00\u6b21\u5199\u9898\u89e3\u597d\u6fc0\u52a8(\u2267\u25bd\u2266)\n\uff08\u771f\u5fc3\u5e0c\u671b\u80fd\u901a\u8fc7\uff0c\u4e4b\u524d\u5199\u8fc7\u9898\u89e3\uff0c\u4e0d\u8fc7\u56e0\u4e3a\u6392\u7248\u95ee\u9898\u6ca1\u6709\u901a\u8fc7\uff09\n\n\u597d\u4e86\uff0c\u4e0d\u591a\u8bf4\u4e86\n\u9898\u89e3\u533a\u4ee3\u7801\u597d\u591afloyd\uff0cDijkstra\uff0cspfa\uff08\u4ed6\u6b7b\u4e86\u7b97\u6cd5\uff09\uff0c\u8fd8\u6709\u7528\u961f\u5217\u7684\uff0c\u672c\u849f\u84bb\u4e0d\u624d\u53ea\u80fd\u7528\u5f17\u6d1b\u4f0a\u5fb7\u52a0dp\u505a...\n\n## \u4e0b\u9762\u9644\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint q[101];\nint w[101][101];//w[i][j]\u4e3a\u7b2ci\u4e2a\u8282\u70b9\u5230\u7b2cj\u4e2a\u8282\u70b9\u7684\u8ddd\u79bb\nint main() {\n\tint n,i,j,k,l,r,min,total;\n\tcin>>n;\n\tfor(i=1; i<=n; i++) //\u8bb0\u5f97\u5728\u4e00\u5f00\u59cb\u628a\u6570\u636e\u521d\u59cb\u5316 \n\t{\n\t\tfor(j=1; j<=n; j++) {\n\t\t\tw[i][j]=1000000;\n\t\t}\n\t}\n\tfor(i=1; i<=n; i++) //\u5f00\u59cb\u8bfb\u5165\u6570\u636e\u5e76\u5c06\u6570\u636e\u521d\u59cb\u5316 \n\t{\n\t\tw[i][i]=0;\n\t\tcin>>q[i]>>l>>r;\n\t\tif(l>0) w[i][l]=w[l][i]=1;\n\t\tif(r>0) w[i][r]=w[r][i]=1;\n\t}\n\tfor(k=1; k<=n; k++) //\u5f00\u59cbdp+\u5f17\u6d1b\u4f0a\u5fb7\u7b97\u6cd5\uff0c\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u8981\u7528dp+\u4e0a\u5f17\u6d1b\u4f0a\u5fb7\uff0c\u6253\u5f00\u7b97\u6cd5\u6807\u7b7e\uff0c\u6709\u52a8\u6001\u89c4\u5212\u3002\u5e76\u4e14\u52a8\u6001\u89c4\u5212\u80fd\u66f4\u597d\u7684\u627e\u51fa\u6700\u5c0f\u8ddd\u79bb\u548c \n\t{\n\t\tfor(i=1; i<=n; i++) {\n\t\t\tif(i!=k) {\n\t\t\t\tfor(j=1; j<=n; j++) {\n\t\t\t\t\tif(i!=j&&k!=j&&w[i][k]+w[k][j]<w[i][j])\n\t\t\t\t\t\tw[i][j]=w[i][k]+w[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tmin=0x7fffffff;\n\tfor(i=1; i<=n; i++)////\u7a77\u4e3e\u533b\u9662\u5efa\u5728n\u4e2a\u8282\u70b9\uff0c\u627e\u51fa\u6700\u77ed\u8ddd\u79bb\u3002  \n\t {\n\t\ttotal=0;//\u5c06\u521d\u59cb\u6570\u636e\u6e05\u96f6 \n\t\tfor(j=1; j<=n; j++) {\n\t\t\ttotal+=w[i][j]*q[j];\n\t\t}\n\t\tif(total<min) min=total;//\u5982\u679c\u6709\u66f4\u5c0f\u7684\u503c\u5c06\u90a3\u5c31\u5c06\u66f4\u5c0f\u7684\u503c\u66ff\u6362\u6389 \n\t}\n\tcout<<min<<endl;\n\treturn 0;\n}\n\n```\n\u5e0c\u671b\u5927\u5bb6\u559c\u6b22\uff01\uff01\uff01\n",
        "postTime": 1570083366,
        "uid": 230323,
        "name": "\u10e6\ufe4f\ufeec\u5317\u2766\u6800",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "- \u770b\u4e86\u4e00\u4e0b\u9898\u89e3\u51e0\u4e4e\u90fd\u662f\u7528\u7684$O(n^3)$\u7684$Floyd$\u6216\u590d\u6742\u5ea6\u66f4\u4f18\u7684SPFA\u7684\u505a\u6cd5\uff0c\u7136\u800c\u8fd9\u9053\u9898\u7528$O(n)$\u7684\u6811\u5f62$dp$\u5c31\u53ef\u4ee5\u505a\u3002\n- \u5177\u4f53\u6765\u8bf4\u5c31\u662f\u5148\u4e00\u904d\u4ee5$1$\u4e3a\u6811\u7684\u6839\u4e00\u904d$dfs$\u9884\u5904\u7406\u51fa\u5b50\u6811\u5927\u5c0f\u4ee5\u53ca\u6811\u7684\u6df1\u5ea6\u3002\u7136\u540e\u7b97\u51fa\u5c06\u533b\u9662\u8bbe\u5728$1$\u4e0a\u65f6\u7684\u7b54\u6848\uff0c\u518d$O(1)$\u8f6c\u79fb\u3002\n- \u6700\u7ec8\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(n)$\n- \u5176\u5b9e\u5c31\u662f\u6c42\u6811\u7684\u91cd\u5fc3\uff0c\u5982\u679c$n$\u518d\u5927\u4e00\u70b9\u5c31\u5fc5\u987b\u7528\u8fd9\u4e2a\u65b9\u6cd5\u505a\u4e86\u3002\n- \u4e0b\u9762\u8d34\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline void read(int &x){\n    char c=getchar();\n    int p=1;\n    x=0;\n    while(!isdigit(c)){\n        if(c=='-')p=-1;\n        c=getchar();\n    }\n    while(isdigit(c)){\n        x=(x<<1)+(x<<3)+(c^'0');\n        c=getchar();\n    }\n    x*=p;\n}//\u5feb\u8bfb\nconst int maxn=1000;\nint head[maxn],tot,n,deep[maxn],sz[maxn],pre[maxn],ans,dis[maxn];\nstruct edge{\n    int to,next;\n}e[maxn<<1];\ninline void add(int u,int v){\n    e[++tot].to=v;\n    e[tot].next=head[u];\n    head[u]=tot;\n}\ninline void dfs(int rt,int fa){\n    deep[rt]=deep[fa]+1;\n    for(register int i=head[rt];i;i=e[i].next){\n        if(e[i].to==fa)continue;\n        dfs(e[i].to,rt);\n        pre[rt]+=pre[e[i].to];\n    }\n}//dfs\u9884\u5904\u7406\ninline void dp(int rt,int fa){\n    for(register int i=head[rt];i;i=e[i].next){\n        if(e[i].to==fa)continue;\n        dis[e[i].to]=dis[rt]+pre[1]-pre[e[i].to]-pre[e[i].to];\n        if(dis[e[i].to]<ans)ans=dis[e[i].to];\n        dp(e[i].to,rt);\n    }\n}\nint main(){\n    //freopen(\".in\",\"r\",stdin);\n    //freopen(\".out\",\"w\",stdout);\n    read(n);\n    for(register int i=1;i<=n;++i){\n        int a,b;\n        read(sz[i]);read(a);read(b);\n        pre[i]=sz[i];\n        if(a){\n            add(i,a);\n            add(a,i);\n        }\n        if(b){\n            add(i,b);\n            add(b,i);\n        }\n    }\n    deep[0]=0;\n    dfs(1,0);\n    for(register int i=1;i<=n;++i){\n        dis[1]+=(deep[i]-1)*sz[i];\n    }\n    ans=dis[1];\n    dp(1,0);\n    cout<<ans<<endl;\n    return 0;\n}\n```",
        "postTime": 1518272716,
        "uid": 20865,
        "name": "lizongru",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u849f\u84bb\u770b\u6765\u8fd8\u662f\u53ea\u4f1aFloyed\uff0c\u4f46\u662f\u4e09\u91cdfor\u5faa\u73af\u5e76\u4e0d\u4f1a\u8d85\u51fa\u9650\u5236\uff0c\u6570\u636e\u8303\u56f4\u6bd4\u8f83\u5c0f\u561b\uff1b\n\n\u9996\u5148\u8f93\u5165\u5f88\u7b80\u5355\uff0c\u6ce8\u610f\u662f\u53cc\u5411\u56fe\uff0c\u6240\u4ee5dis[i][l]=dis[l][i]\uff0c\u540c\u7406dis[i][r]=dis[r][i];\n\n\u7136\u540e\u5c31\u662f\u6700\u57fa\u672c\u7684\u4e09\u91cdfor\u5faa\u73af\uff0c\u53ea\u8981\u6ce8\u610f\u91cd\u70b9(\u5373k\u8981\u653e\u5728\u6700\u5916\u9762\u4e00\u5c42\uff09\u5c31\u4e0d\u4f1a\u9519\u4e86\uff1b\n\n\u627e\u5230\u6700\u77ed\u8def\u540e\uff0c\u6309\u9898\u610f\u8ba1\u7b97\u5373\u53ef\uff0c\u4e0d\u662f\u5f88\u96be\uff1b\n\n\u4e0b\u9762\u9644\u4e0a\u4ee3\u7801\uff0c\u5f88\u7b80\u5355\uff0c\u6709\u70b9\u5197\u6742\uff0c\u8bf7\u5927\u4f6c\u6307\u6559\n\n            \n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#define big 100000007\nint p[101],dis[101][101],sum;\nint n,l,r;\nusing namespace std;\nint main()\n{\n    cin>>n;\n    memset(dis,big,sizeof(dis));\n    for(int i=1;i<=n;i++)\n    {\n        dis[i][i]=0;\n        cin>>p[i];\n        cin>>l>>r;\n        if(l>=0) dis[i][l]=1;dis[l][i]=1;  //\u6ce8\u610f\u53cc\u5411\u8def\n        if(r>=0) dis[i][r]=1;dis[r][i]=1;//\u540c\u4e0a\n    }\n    for(int k=1;k<=n;k++)\n    {\n        for(int i=1;i<=n;i++)\n        {\n            if(i!=k)\n            {\n                for(int j=1;j<=n;j++)\n                {\n                    if(i!=j&&k!=j&&dis[i][j]>dis[i][k]+dis[k][j]) dis[i][j]=dis[i][k]+dis[k][j];//\u6c42\u6700\u77ed\u8def\n                }\n            }\n        }\n    }\n    int minn=big;\n    for(int i=1;i<=n;i++)\n    {\n        sum=0;\n        for(int j=1;j<=n;j++)\n        {\n            if(i!=j&&dis[i][j]!=-1) sum+=p[j]*dis[i][j];  //\u6ce8\u610fi\u4e0d\u7b49\u4e8ej\uff0c\u6839\u636e\u9898\u610f\u8ba1\u7b97\n        }\n        if(minn>sum) minn=sum;\n    }\n    cout<<minn<<endl;\n    return 0;\n}\n```",
        "postTime": 1509371146,
        "uid": 49781,
        "name": "Invisible",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "/\\*\u867d\u7136\u7528\u7684\u7b97\u6cd5\u53ef\u80fd\u548c\u697c\u4e0b\u5dee\u4e0d\u591a\n\n\u4f46\u662f\u89c9\u5f97\u5927\u795e\u5199\u7684\u8fc7\u7a0b\u6ce8\u91ca\u4e0d\u591f\u8be6\u7ec6\u554a\u3002\u3002\u3002\u3002\n\n\u4f5c\u4e3a\u4e00\u4e2a\u5c0f\u767d\u8868\u793a\u4e00\u8fb9\u770b\u4e00\u8fb9\u767e\u5ea6\u771f\u662f\u8d39\u5c3d\u5fc3\u601d\u3002\u3002\u3002\u3002\u3002\u3002\n\n\u8fd9\u91cc\u7eaf\u624b\u6253\u4e86\u4e00\u4efd\u65b0\u7684FLOYED\u7b97\u6cd5\n\n\u6ce8\u91ca\u6bd4\u8f83\u8be6\u7ec6\n\n\uff01\uff01\uff01\uff01\u6c42\u7ba1\u7406\u5458\u7ed9\u8fc7\uff01\uff01\uff01\uff01\u3002\u3002\u3002\u3002\u3002\u3002\\*/\n\n    \n    \n    \n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\n    int people[101];\n    int dis[101][101];//\u5927\u6570\u7ec4\u5f00\u5916\u9762\nint main(){\n    int n,l,r,total;   cin>>n;    //r\u53f3\u8fb9\u7684\u5b69\u5b50 l\u662f\u5de6\u8fb9\u7684\u5b69\u5b50  n\u662f\u7ed3\u70b9\u4e2a\u6570\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            dis[i][j]=1000000;//\u8fd9\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u6570  \u8868\u793a\u4e24\u4e2a\u6570\u4e4b\u95f4\u4e0d\u8fde\u63a5\n        }\n    }\n    for(int i=1;i<=n;i++)\n    {\n        dis[i][i]=0;  //\u521d\u59cb\u5316\n        cin>>people[i]>>l>>r;\n        if(l>0)     dis[i][l]=dis[l][i]=1;\n        if(r>0)     dis[i][r]=dis[r][i]=1;\n    }\n    //\u8fd9\u91cc\u662f\u8f93\u5165   \u56e0\u4e3a\u76f8\u90bb\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u4e3a1\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            for(int k=1;k<=n;k++)\n            {\n                if(i!=j&&i!=k&&j!=k&&dis[i][j]+dis[j][k]<dis[i][k])//\u4e24\u70b9\u4e0d\u91cd\u590d   \n                   dis[i][k]=dis[i][j]+dis[j][k];\n            }\n        }\n    }\n```\n/\\*\u8fd9\u91cc\u662fFloyed\u7b97\u6cd5\u6c42\u4e24\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\n\u56e0\u4e3a\u6570\u636e\u6bd4\u8f83\u5c0f\u3002\u3002\u3002\u3002\u8fd9\u4e2a\u4e09\u4e2a\u5faa\u73af\u5957\u4e00\u8d77\u7684O(n\u7684\u4e09\u6b21\u65b9)\u7adf\u7136\u4e5f\u80fd\u8fc7\n\n\u8fd9\u4e2a\u7b97\u6cd5\u662f\u6700\u7b80\u5355\u7684\u6700\u77ed\u8def\u5f84\u7b97\u6cd5   \u8d1f\u8fb9\u6743\u4e5f\u9002\u7528\n\n\u8fd9\u91cc\u7684\u7b97\u6cd5\u8868\u793a\u5982\u679c\u4e09\u4e2a\u70b9i j k\n\n\u5982\u679c\u4ecei->k\u7684\u8def\u5f84\u957f\u5ea6\u5927\u4e8e\uff08i->j\uff09+\uff08j->k\uff09\u90a3\u4e48\u5c31\u66ff\u6362\u6210\u540e\u8005\n\n\\*/\n    \n     \n```cpp\n    int min=0x7fffffff;       //\u8fd9\u662fint 32\u7684\u6700\u5927\u503c \n    for(int i=1;i<=n;i++)\n    {\n        total=0;\n        for(int j=1;j<=n;j++)\n        {\n            total+=dis[i][j]*people[j];\n        }\n        if(total<min)    min=total;      //\u627e\u6700\u77ed\u8ddd\u79bb\n     } \n    cout<<min<<endl;//\u8f93\u51fa\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u5927\u529f\u544a\u6210\uff01\n    return 0;\n}\n```",
        "postTime": 1507197766,
        "uid": 55412,
        "name": "\u65e0\u7fa1qwq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u4ee5\u90a3\u66b4\u529b\u6a21\u62df\u5411\u6b63\u89e3\u540a\u5501~~~\n\n\u5229\u7528\u6811\u7684\u6027\u8d28\uff0c\u4efb\u610f\u4e00\u4e2a\u70b9\u5230\u53e6\u4e00\u4e2a\u70b9\u7684\u8def\u5f84\u552f\u4e00\u786e\u5b9a\uff0c\u6240\u4ee5Floyed\u6709\u4e9b\u6d6a\u8d39\u4e86\n\n\u4e8e\u662f\u6211\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u518d\u82b1$O(n)$\u65f6\u95f4\u7b97\u51fa\u4ee3\u4ef7\uff0c\u53bb\u53d6\u6700\u5c0f\u4ee3\u4ef7\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6$O(n^2)$\u5e38\u6570\u4e0d\u5927\n\n\uff08\u4e3a\u4e86\u65b9\u4fbf\uff0c\u5c06\u7236\u4eb2\u548c\u513f\u5b50\u6df7\u4e3a\u4e00\u8c08\uff08\u5927\u96fe\uff09\uff0c\u5e76\u5f00\u4e00\u4e2avis\u8bb0\u5f55\u6b64\u6b21\u8bbf\u95ee\u8fc7\u7684\u70b9\uff08\u52ff\u5fd8\u6b64\u6b21\u7ed3\u675f\u540ememset0\uff09\uff09\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<vector>\n#include<cstring>\ntypedef long long ll;\nconst ll INF=1ll<<60;//\u5f88\u5927\u7684\u4e00\u4e2a\u6570\nll n,ans=INF,tmp;\nbool vis[1001];\nstruct tree\n{\n\tstd::vector<ll>to;\n\tll w;\n}t[1001];\nvoid start()\n{\n\tscanf(\"%lld\",&n);\n\tll l,r;\n\tfor(ll i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%lld%lld%lld\",&t[i].w,&l,&r);\n\t\tif(l)t[l].to.push_back(i),t[i].to.push_back(l);\n\t\tif(r)t[r].to.push_back(i),t[i].to.push_back(r);\n\t}\n}\nll dfs(ll u,ll step)\n{\n\tll res=step*t[u].w;\n\tvis[u]=1;\n\tfor(ll i=t[u].to.size()-1;i>=0;--i)\n\t{\n\t\tif(!vis[t[u].to[i]])res+=dfs(t[u].to[i],step+1);\n\t}\n\treturn res;\n}\nint main()\n{\n\tstart();\n\tfor(ll i=1;i<=n;++i)\n\t{\n\t\tmemset(vis,0,sizeof(vis));\n\t\ttmp=dfs(i,0);\n\t\tif(tmp<ans)ans=tmp;\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n\n\u8fd8\u6709\u4e0d\u61c2\u53ef\u4ee5\u5728\u8bc4\u8bba\u533a\u63d0\u51fa\u6216\u79c1\u4fe1\u6211",
        "postTime": 1544246707,
        "uid": 73142,
        "name": "\u4e07\u5f18",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u6570\u636e\u8fc7\u6c34\uff0c100\u7684n\uff0c\u5373\u4f7f\u662fO\uff08n\\*n\\*n\uff09\u7684Floyd\u4e5f\u80fd\u66b4\u529b\u8fc7\u3002\n\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint p[101],f[101][101],minn=99999999; //\u5b58\u50a8\u6bcf\u4e2a\u7ed3\u70b9\u5c45\u6c11\u6570\uff0c\u90bb\u63a5\u77e9\u9635\u4e0e\u6700\u4f18\u89e3\nint main()\n{\n    for(int i=1;i<=100;i++)\n        for(int j=1;j<=100;j++)\n            if(i==j)\n                f[i][j]=0;\n            else\n                f[i][j]=9999999;//\u521d\u59cb\u5316\n    int n,a,b;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n        {\n            scanf(\"%d%d%d\",&p[i],&a,&b);\n            if(a)\n                f[a][i]=f[i][a]=1;\n            if(b)\n                f[b][i]=f[i][b]=1;\n```\n}//\u8bfb\u5165\n```cpp\n    for(int k=1;k<=n;k++)\n        for(int i=1;i<=n;i++)\n            for(int j=1;j<=n;j++)\n                f[i][j]=min(f[i][j],f[i][k]+f[k][j]);//Floyd\u7684\u6838\u5fc3\uff0c\u601d\u8def\u7c7b\u4f3c\u4e8e\u677e\u5f1b\u64cd\u4f5c\n    for(int i=1;i<=n;i++)\n        {\n            int s=0;\n            for(int j=1;j<=n;j++)\n                s+=f[i][j]*p[j];\n            if(s<minn)\n                minn=s;\n        }            //\u6a21\u62df\n    printf(\"%d\",minn);\n    return 0;\n}\n\n```",
        "postTime": 1506489028,
        "uid": 30402,
        "name": "jklover",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "//\u672c\u9898\u89e3\u7528\u975e\u56fe\u8bba\u5965\u6570\u65b9\u6cd5\u63a8\u51fa\uff0c\u6b22\u8fce\u5404\u4f4d\u5927\u4f6c\u70b9\u8bc4\n\nvar f:array[0..100] of longint;\n\n    g:array[1..100,1..3] of byte;//\u5b58\u56fe\n    h:array[1..100] of word;//\u5b58\u4eba\u6570\n    q:array[1..100] of boolean;\n    a,b,e,i,j,k,n:longint;\nprocedure sss(i,j,s:longint);//\u6c42j\u8282\u70b9\u5230i\u8282\u70b9\u7684\u6743\u503c\uff08i\uff1a\u6240\u6c42\u8282\u70b9\uff0cj\uff1a\u904d\u5386\u5230\u7684\u8282\u70b9\uff0cs\uff1a\u8ddd\u79bb\uff0ch[]\uff1a\u4eba\u6570\uff09\n\nvar k,l:longint;\n\nbegin\n\n        if j=0 then exit;\n       f[j]:=f[j]+h[i]*s;\n       l:=s+1;\n       q[j]:=false;//\u6807\u8bb0\u5df2\u904d\u5386\u8fc7\u8282\u70b9\uff0c\u4ee5\u4e0b\u4e3a\u904d\u5386\n       if (g[j,1]<>0) and q[g[j,1]] then sss(i,g[j,1],l);\n       if (g[j,2]<>0) and q[g[j,2]] then sss(i,g[j,2],l);\n       if (g[j,3]<>0) and q[g[j,3]] then sss(i,g[j,3],l);\nend;\n\nbegin\n\n        readln(n);\n        for i:=1 to n do\n        begin\n                readln(h[i],a,b);\n                if a<>0 then\n                begin\n                        g[i,1]:=a;//\u5de6\u5b50\u8282\u70b9\n                        g[a,3]:=i;//\u7236\u8282\u70b9\n                end;\n                if b<>0 then\n                begin\n                        g[i,2]:=b;//\u53f3\u5b50\u8282\u70b9\n                        g[b,3]:=i;//\u7236\u8282\u70b9\n                end;\n        end;\n        for i:=1 to n do\n        begin\n                for j:=1 to n do q[j]:=true;\n                sss(i,i,0);//\u8ba1\u7b97\u6bcf\u4e00\u4e2a\u8282\u70b9\u6743\u503c\uff08\u5176\u4ed6\u8282\u70b9\u4eba\u6570*\u5230\u672c\u8282\u70b9\u8ddd\u79bb\u4e4b\u548c\uff09\n\n        end;\n        e:=100000000;\n        for i:=1 to n do\n        begin\n       if f[i]<e then e:=f[i];//\u627e\u8282\u70b9\u6743\u503c\u6700\u5c0f\u503c\n        end;\n        writeln(e);\n        \nend.",
        "postTime": 1518965875,
        "uid": 40634,
        "name": "\u6c64\u5609\u709c",
        "ccfLevel": 0,
        "title": "P1364 \u533b\u9662\u8bbe\u7f6e\u9898\u89e3"
    },
    {
        "content": "\u5373\u4f7f\u8fd9\u9053\u9898\u6570\u636e\u5f88\u6c34\uff0c\u4f46\u662f\u6211\u4eec\u8fd8\u662f\u8981\u7528\u6b63\u89e3\u8bd5\u8bd5\uff0c\u6811\u5f62dp\uff0c\u505a\u6cd5\u5f88\u7b80\u5355\uff0c\u7ef4\u62a4\u4e24\u4e2a\u503c\uff0csum\u4ee3\u8868\u5b50\u6811\u548c\uff0c\n\ndp\u3010i\u3011\u8868\u793a\u4ee5i\u4e3a\u6839\u7684\u5b50\u6811\uff0c\u5728i\u5904\u5efa\u533b\u9662\u7684\u6d88\u8017\uff08\u6ce8\u610f\u53ea\u662fi\u7684\u5b50\u6811\uff09\uff0c\u7136\u540e\u5f88\u5bb9\u6613\u53ef\u4ee5\u63a8\u51fa\u4e00\u4e2a\u65b9\u7a0bdp[i]+=dp[j]+sum[j]\uff1b\n\n\u6700\u91cd\u8981\u7684\u5c31\u662f\u6211\u4eec\u7b2c\u4e00\u6b21\u662f\u9ed8\u8ba41\u4e3a\u6839\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u7528\u4e2a\u6362\u6839\u51fd\u6570\u8fdb\u884c\u6839\u7684\u66ff\u6362\u548c\u9012\u63a8\uff0c\u4e0d\u61c2\u53ef\u4ee5\u7814\u7a76\u4e00\u4e0b\u4ee3\u7801\n\n\u53f3\u513f\u5b50\u7eaf\u5c5e\u5199\u5b8c\u5de6\u513f\u5b50\u590d\u5236\u7136\u540e\u6539\u4e86\u4e00\u4e0blr\uff0c\u6240\u4ee5\u770b\u61c2\u5de6\u8fb9\u5c31\u597d\u4e86\n\n\n        \n    \n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint n;\nstruct node\n{\n    int l,r;\n}t[500];\nint dp[200];\nint f[200];\nint sum[200];\nint ans=0x7f7f7f;\nvoid dfs(int i)\n{\n    sum[i]+=f[i];\n    if(t[i].l)\n    {\n        dfs(t[i].l);\n        sum[i]+=sum[t[i].l];\n        dp[i]+=sum[t[i].l]+dp[t[i].l];\n    }\n    if(t[i].r)\n    {\n        dfs(t[i].r);\n        sum[i]+=sum[t[i].r];\n        dp[i]+=sum[t[i].r]+dp[t[i].r];\n    }\n}\nvoid change(int i)\n{\n    if(t[i].l)\n    {        \n        int all=sum[i];\n        int all1=sum[t[i].l];\n        int all2=dp[i];\n        int all3=dp[t[i].l];\n        dp[i]=dp[i]-dp[t[i].l]-sum[t[i].l];\n        sum[i]=all-sum[t[i].l];\n        sum[t[i].l]=all;\n        dp[t[i].l]=sum[i]+dp[t[i].l]+dp[i];\n        ans=min(ans,dp[t[i].l]);\n        change(t[i].l);\n        sum[i]=all;\n        sum[t[i].l]=all1;\n        dp[i]=all2;\n        dp[t[i].l]=all3;\n    }\n    if(t[i].r)\n    {\n        int all=sum[i];\n        int all1=sum[t[i].r];\n        int all2=dp[i];\n        int all3=dp[t[i].r];\n        dp[i]=dp[i]-dp[t[i].r]-sum[t[i].r];\n        sum[i]=all-sum[t[i].r];\n        sum[t[i].r]=all;\n        dp[t[i].r]=sum[i]+dp[t[i].r]+dp[i];\n        ans=min(ans,dp[t[i].r]);\n        change(t[i].r);\n        sum[i]=all;\n        sum[t[i].r]=all1;\n        dp[i]=all2;\n        dp[t[i].r]=all3;\n    }\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        int x,y,z;\n        scanf(\"%d%d%d\",&x,&y,&z);\n        t[i].l=y;\n        t[i].r=z;\n        f[i]=x;\n    }\n    dfs(1);\n    ans=min(ans,dp[1]);\n    change(1);\n    printf(\"%d\",ans);\n}\n```",
        "postTime": 1478091535,
        "uid": 25799,
        "name": "Alexerny",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u770b\u4e86\u6807\u7b7e\u6709bfs\uff0c\u849f\u84bb\u778e\u60f3\u4e86\u4e00\u4e32\u4ee3\u7801\uff0c\u7b2c\u4e00\u6b21\u4ea4\u9898\u89e3\uff0c\u671b\u901a\u8fc7\u3002\n\u601d\u8def\u89c1\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>//\u4e07\u80fd\u5934 \nusing namespace std;\nint n,sum=2<<19;//\u521d\u59cb\u5316 \nbool pd[101];\nstruct node{\n    int dist;//\u8ddd\u79bb\n    int ren;//\u4eba\u53e3\n    int root;\n    int l;\n    int r;\n}dian[100];\nvoid bfs(int col)//\u8fd9\u91cc\u7528\u5e7f\u641c \n{\n    int ans=0;\n    queue <node> q;\n    dian[col].dist=0;\n    q.push(dian[col]);\n    while(!q.empty())//\u4e09\u4e2a\u65b9\u5411 \n    {\n    \t//if(ans>sum) return ;\u8fd9\u9898\u4e0d\u7528\u526a\u679d\u4e5f\u53ef\u4ee5\u8fc7 \n        node now,next;\n        now=q.front();\n        q.pop();\n        if(pd[now.l])\n        {\n            pd[now.l]=false;\n            dian[now.l].dist=now.dist+1;\n            next=dian[now.l];\n            ans+=next.dist*next.ren;\n            q.push(next);\n        }\n        if(pd[now.r])\n        {\n            pd[now.r]=false;\n            dian[now.r].dist=now.dist+1;\n            next=dian[now.r];\n            ans+=next.dist*next.ren;\n            q.push(next);\n        }\n        if(pd[now.root])\n        {\n            pd[now.root]=false;\n            dian[now.root].dist=now.dist+1;\n            next=dian[now.root];\n            ans+=next.dist*next.ren;\n            q.push(next);\n        }\n    }\n    sum=min(ans,sum);//\u53d6\u503c \n}\nint main()\n{\n    cin>>n;\n    for(int i=1;i<=n;i++)\n    {\n        cin>>dian[i].ren>>dian[i].l>>dian[i].r;//\u5de6\u53f3\u513f\u5b50 \n        dian[dian[i].l].root=i;//\u8fde\u901a\u7684 \n        dian[dian[i].r].root=i;\n    }\n    for(int i=1;i<=n;i++)\n    {\n        memset(pd,true,sizeof(pd));\n        pd[i]=false;//\u521d\u59cb\u5316 \n        pd[0]=false;//\u4e00\u5b9a\u8981\u6ce8\u610f\u6ca1\u67090\u70b9 \n        bfs(i);\n    }\n    cout<<sum<<endl;//\u8f93\u51fa \n    return 0;\n}\n```\n",
        "postTime": 1568080991,
        "uid": 227824,
        "name": "JK_LOVER",
        "ccfLevel": 0,
        "title": "p1364"
    },
    {
        "content": "\u672c\u4eba\u4f5c\u4e3a\u4e00\u4e2a\u849f\u84bb\uff0c\u5e76\u4e0d\u80fd\u60f3\u5230\u65f6\u95f4\u590d\u6742\u5ea6\u76f8\u5bf9\u5c0f\u7684\u7b97\u6cd5\u3002\u8003\u8651\u5230\u8981\u6c42\u6811\u4e0a\u8ddd\u79bb\uff0c\u7ed3\u5408LCA\u6253\u4e86\u4e00\u4e2a$O(n^2logn)$\u504f\u66b4\u529b\u7684\u529e\u6cd5\u3002\u867d\u8bf4\u590d\u6742\u5ea6\u504f\u5927\uff0c\u4f46\u662f\u5e76\u4e0d\u96be\u60f3\uff1a\u5bf9\u6240\u6709\u8bbe\u7f6e\u4f4d\u7f6e\u8fdb\u884c\u679a\u4e3e\uff0c\u5728\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u7528LCA\u8ba1\u7b97\u603b\u8ddd\u79bb\uff0c\u5e76\u4e0d\u65ad\u66f4\u65b0ans\u5373\u53ef\u3002\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 105\n#define dis(x,y) (dep[x]+dep[y]-2*dep[LCA(x,y)])//\u6811\u4e0a\u8ddd\u79bb\u8ba1\u7b97\u5f0f\nusing namespace std;\nint H[MAXN],N,W[MAXN],lg[MAXN],dep[MAXN],fa[MAXN][10],tot;\nstruct edge{int v,nxt;} E[MAXN<<1];\nvoid addedge(int x,int y){\n\tE[++tot].v=y;\n\tE[tot].nxt=H[x];\n\tH[x]=tot;\n}\nvoid lgCalc(){\n\tfor(int i=1;i<=N;i++){\n\t\tlg[i]=lg[i-1]+((1<<lg[i-1])==i);\n\t\tlg[i-1]--;\n\t}\n\tlg[N]--;\n}//\u4ee52\u4e3a\u5e95\u9884\u5904\u74061~N\u5bf9\u6570\u8868\nvoid DFS(int cur,int anc){\n\tdep[cur]=dep[anc]+1;fa[cur][0]=anc;\n\tfor(int i=1;i<=lg[dep[cur]];i++) fa[cur][i]=fa[fa[cur][i-1]][i-1];\n\tfor(int i=H[cur];i;i=E[i].nxt){\n\t\tif(E[i].v==anc) continue;\n\t\tDFS(E[i].v,cur);\n\t}\n}\nint LCA(int x,int y){\n\tif(dep[x]<dep[y]) swap(x,y);\n\twhile(dep[x]>dep[y]) x=fa[x][lg[dep[x]-dep[y]]];\n\tif(x==y) return x;\n\tfor(int i=9;i>=0;i--){\n\t\tif(fa[x][i]!=fa[y][i]){\n\t\t\tx=fa[x][i];\n\t\t\ty=fa[y][i];\n\t\t}\n\t}\n\treturn fa[x][0];\n}//\u4e2d\u89c4\u4e2d\u77e9\u7684\u500d\u589eLCA\uff0c\u4e0d\u591a\u505a\u8d58\u8ff0\uff0c\u5982\u9700\u8be6\u89e3\uff0c\u79fb\u6b65P3379\nint main(){\n\tcin>>N;\n\tint x,y,sum=0,ans=2147483647;\n\tfor(int i=1;i<=N;i++){\n\t\tcin>>W[i]>>x>>y;\n\t\tif(x){\n\t\t\taddedge(i,x);\n\t\t\taddedge(x,i);\n\t\t}\n\t\tif(y){\n\t\t\taddedge(i,y);\n\t\t\taddedge(y,i);\n\t\t}//\u5efa\u53cc\u5411\u8fb9\n\t}\n\tlgCalc();DFS(1,0);\n\tfor(int i=1;i<=N;i++){\n\t\tsum=0;\n\t\tfor(int j=1;j<=N;j++) sum+=W[j]*dis(i,j);\n\t\tans=min(ans,sum);\n\t}//\u8d85\u7ea7\u65e0\u654c\u66b4\u529b\u7684\u6c42\u89e3\n\tcout<<ans<<endl;//~~\u6700\u4ee4\u4eba\u8212\u5fc3\u7684\u4e00\u884c~~\n\treturn 0;\n}\n```",
        "postTime": 1539233393,
        "uid": 31415,
        "name": "Eric100911",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u849f\u84bb\u6765\u8d21\u732e\u4e00\u4efddfs  \u770b\u5927\u4f6c\u90fd\u7528\u7684Floyd \u4ec0\u4e48\u7684 \u53ef\u662f\u7a9d\u53ea\u4f1adfs xjb \u66b4\u529b\n```c\n#include<bits/stdc++.h>\nusing namespace std;\nvector<int>q[1001];\nint dis[1001];\nbool fa[1001];\nint n;\nint dfs(int x,int y){                 //x \u7236\u4eb2  y \u4ee3\u8868\u8ddd\u79bb\n    int ans=0;\n    for(int j=0;j<q[x].size();j++){\n       if(!fa[q[x][j]]){\n          fa[q[x][j]]=1;             // \u4e0b\u9762\u5c31\u662f\u9012\u5f52\u627e\u513f\u5b50\u8def\u5f84\u8fd8\u6709\u5c31\u662f \u6807\u8bb0\u5566    \n          ans+=dis[q[x][j]]*y;\n          ans+=dfs(q[x][j],y+1);\n       }\n    }\n    return ans;\n}\nint main(){\n    cin>>n;\n    for(int j=1;j<=n;j++){\n       int x,y,z;\n       cin>>x>>y>>z;\n       if(y){                  //\u5b58\u7236\u5b50\u5173\u7cfb \u7531\u4e8e\u662f\u65e0\u5411\u56fe \u6ce8\u610f\u4e0b\u6ca1\u6709\u513f\u5b50\u7684\u60c5\u51b5\n          q[j].push_back(y);\n          q[y].push_back(j);\n       }\n       if(z){\n          q[j].push_back(z);\n          q[z].push_back(j);\n       }\n       dis[j]=x;\n    }\n    int mi=999999999;\n    for(int j=1;j<n;j++){          //\u679a\u4e3e\u6bcf\u4e2a\u70b9\u7684 \n        memset(fa,0,sizeof(fa));\n        fa[j]=1;\n        mi=min(mi,dfs(j,1));\n    }\n    cout<<mi<<endl;\n}\n\n```",
        "postTime": 1523366581,
        "uid": 36983,
        "name": "Dvelpro",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u7ffb\u4e86\u4e00\u904d\u9898\u89e3\u533a\uff0c\u5e76\u6ca1\u6709\u7528\u6811\u5256\u6c42lca\u7684\n\n\u6811\u4e0a\u4e24\u70b9(x,y)\u8ddd\u79bb\u516c\u5f0f(\u8fb9\u6743\u4e3a1)\n\n### dis(x,y)=dep(x)+dep(y)-2dep(lca)\n\n\u9884\u5904\u7406\u51fa\u6240\u6709\u70b9\u5bf9\u7684\u8ddd\u79bb(\u6c42\u7b54\u6848\u7684\u65f6\u5019\u7b97\u4e5f\u4e00\u6837)O(n^2 log n)\n\n\u7136\u540e\u679a\u4e3e\u533b\u9662\u653e\u7f6e\u7684\u70b9\uff0c\u6c42\u5176\u4ed6\u70b9\u5230\u5b83\u7684\u7b54\u6848(n^2)\n```cpp\n#include<cstdio>\n#include<climits>\n#include<utility>\n#include<algorithm>\nusing std::min;\nusing std::pair;\nusing std::make_pair;\nconst int N=110;\nint n,dep[N],w[N],top[N],size[N],wson[N],fa[N],dis[N][N],head[N],cnt,ans=INT_MAX;\npair<int,int>e[N<<1];\ninline void add(int a,int b)\n{\n\te[++cnt]=make_pair(b,head[a]);\n\thead[a]=cnt;\n}\ninline void dfs(int p)\n{\n\tsize[p]=1;\n\tfor (int i=head[p];i;i=e[i].second)\n\t{\n\t\tint son=e[i].first;\n\t\tif (son==fa[p])continue;\n\t\tfa[son]=p;dep[son]=dep[p]+1;\n\t\tdfs(son);size[p]+=size[son];\n\t\tif (size[son]>size[wson[p]])wson[p]=son;\n\t}\n}\ninline void dfs(int p,int tp)\n{\n\ttop[p]=tp;\n\tif (wson[p])dfs(wson[p],tp);\n\tfor (int son,i=head[p];i;i=e[i].second)\n\t\tif ((son=e[i].first)!=fa[p]&&son!=wson[p])\n\t\t\tdfs(son,son);\n}\ninline int getlca(int a,int b)\n{\n\twhile (top[a]!=top[b])\n\t\tdep[top[a]]>dep[top[b]]\n\t\t?a=fa[top[a]]:b=fa[top[b]];\n\treturn dep[a]<dep[b]?a:b;\n}\ninline int distance(int a,int b) //\u7b97\u6811\u4e0a\u8ddd\u79bb\n{\n\treturn dep[a]+dep[b]-(dep[getlca(a,b)]<<1);\n}\ninline void getdis()\n{\n\tfor (int i=1;i<n;i++)\n\t\tfor (int j=i+1;j<=n;j++)\n\t\t\tdis[j][i]=dis[i][j]=distance(i,j);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tint lson,rson;\n\t\tscanf(\"%d%d%d\",&w[i],&lson,&rson);\n\t\tif (lson)add(i,lson),add(lson,i); //\u6539\u6210\u90bb\u63a5\u8868\u5b58\u56fe\u6bd4\u8f83\u65b9\u4fbf\n\t\tif (rson)add(i,rson),add(rson,i);\n\t}\n\tdfs(1);dfs(1,1);getdis();\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tint nowans=0;\n\t\tfor (int j=1;j<=n;j++)\n\t\t\tif (i!=j)nowans+=dis[i][j]*w[j];\n\t\tans=min(ans,nowans);\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1541072369,
        "uid": 14374,
        "name": "zhengrunzhe",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u6ce8\u610f\u5230\u672c\u9898\u7684n\u975e\u5e38\u5c0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u66b4\u529b\u6c42\u89e3\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u4f7f\u7528dfs\u6c42\u51fa\u8ddd\u79bb\u603b\u548c\uff0c\u53d6\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n\u4f5c\u4e3a\u4e00\u4e2a\u538b\u884c\u538b\u60ef\u4e86\u7684\u4eba\uff0c\u732e\u4e0a\u4e00\u4efd\u6211\u4e11\u964b\u7684\u4ee3\u7801\uff1a\n```\n#include<iostream>\n#include<algorithm>\n#include<cstring> //\u8fd9\u4e2a\u7279\u522b\u5bb9\u6613\u6389\nusing namespace std;\n\n//w\u6570\u7ec4\u662f\u6bcf\u4e2a\u70b9\u7684\u4eba\u6570\uff0cls[i]\u4e0ers[i]\u5206\u522b\u4ee3\u8868\u8282\u70b9i\u7684\u5de6\u513f\u5b50\u548c\u53f3\u513f\u5b50\uff0cfa[i]\u4ee3\u8868\u8282\u70b9i\u7684\u7236\u4eb2\uff0cvis[i]\u4ee3\u8868\u5728dfs\u4e2d\u70b9i\u662f\u5426\u8bbf\u95ee\u8fc7\nint w[110], ls[110], rs[110], fa[110];\nbool vis[110];\n\nint dist(int i, int mul =0) {\n\tif (vis[i]) return 0;\n\tvis[i] = ++mul; //\u8fd9\u91cc++mul > 0\uff0c\u6240\u4ee5vis[i]=true\n\treturn i ? (!vis[ls[i]] * w[ls[i]] + !vis[rs[i]] * w[rs[i]] + !vis[fa[i]] * w[fa[i]]) * mul + dist(ls[i], mul) + dist(rs[i], mul) + dist(fa[i], mul) : 0;\n/*\n    \n\u8fd9\u4e2a\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u53ef\u4ee5\u62c6\u6210\u51e0\u4e2a\u90e8\u5206\uff1a\n\nreturn i ? ... : 0 \uff1a\u5f53i==0\u65f6\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u8282\u70b9\u6ca1\u6709\u5de6\u513f\u5b50/\u53f3\u513f\u5b50/\u7236\u4eb2\u65f6\uff0c\u663e\u7136\u5e94\u8be5\u8fd4\u56de0\uff0c\u800c\u4e14\u4e0d\u518d\u7ee7\u7eed\u9012\u5f52\u3002\n\n... + dist(ls[i], mul) + dist(rs[i], mul) + dist(fa[i], mul)\uff1a\u9012\u5f52\u8ba1\u7b97\u51fa\u5de6\u53f3\u513f\u5b50\u4e0e\u7236\u4eb2\u7684\u603b\u8ddd\u79bb\uff0c\u5e76\u7d2f\u52a0\u3002\n\n\u5269\u4e0b\u7684\u7528\u4e58\u6cd5\u5206\u914d\u5f8b\u62c6\u5f00\uff0c\u53d6\u4e00\u90e8\u5206\uff0c\u5176\u4f59\u540c\u7406\uff1a!vis[ls[i]] * w[ls[i]] * mul\n\u5f53\u5de6\u513f\u5b50\u5df2\u7ecf\u8bbf\u95ee\u8fc7(\u4e5f\u5c31\u662f!vis[ls[i]] == 0)\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u5fc5\u518d\u8ba1\u7b97\u672c\u8282\u70b9\u5230\u5de6\u513f\u5b50\u7684\u8ddd\u79bb\u4e86\uff1b\u5426\u5219!vis[ls[i]] == 1\uff0c\u4e58\u4e0a\u4e5f\u4e0d\u4f1a\u6709\u4efb\u4f55\u5f71\u54cd\u3002\u800cw[ls[i]] * mul\u4e5f\u5c31\u662f\u5de6\u513f\u5b50\u7684\u4eba\u53e3\u4e58\u4e0a\u5230\u539f\u6765\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\u7684\u8282\u70b9\u7684\u8ddd\u79bb\uff0c\u8fd9\u4e2a\u8ddd\u79bb\u5728\u53c2\u6570\u4f20\u9012\u4e4b\u4e2d\u7d2f\u52a0\u3002\n*/\n}\n\nint main() {\n\tint n, ans = 2147483647; cin >> n;\n\tfor (int i = 1; i <= n; ++i) //\u8bfb\u5165\n\t\tcin >> w[i] >> ls[i] >> rs[i], fa[ls[i]] = fa[rs[i]] = i;\n\tfor (int i = 1; i <= n; ++i) //\u8bb0\u5f97\u6e05\u7a7avis\u6570\u7ec4\n\t\tmemset(vis, 0, sizeof(vis)), ans = min(ans, dist(i));\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1522589572,
        "uid": 64757,
        "name": "huang_yue",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u6570\u636e\u4e0d\u5927\uff0c\u66b4\u529b\u80fd\u8fc7\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u7b80\u5355\u7684\u4f18\u5316\u65b9\u6cd5\uff0c\uff08\u867d\u7136\u5e76\u6ca1\u6709\u4f18\u5316\u5230\u54ea\u91cc\u53bb\uff09\u5176\u4e2d\u878d\u5165\u4e86\u4f18\u5148\u961f\u5217\u4e0e\u7ed3\u6784\u4f53\uff0c\u80fd\u7406\u89e3\u7684\u8bdd\u8fd9\u9898\u5c31\u5f88\u7b80\u5355\u4e86\u3002\n\n\u5176\u5b9e\u5927\u4f53\u601d\u8def\u5c31\u662f\u7b97\u51fa\u6bcf\u4e2a\u70b9\u5230\u6307\u5b9a\u70b9\u7684\u5bf9\u5e94\u6700\u77ed\u8ddd\u79bb\uff0c\u4e58\u4e0a\u70b9\u7684\u5c45\u6c11\u4eba\u6570\uff0c\u76f8\u52a0\uff0c\u53d6\u6700\u5c0f\u3002\n\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n    \n```cpp\n#include<cstdio>\n#include<cstring>\n#include<queue>\n#include<vector>\nusing namespace std;\nstruct sd{\n    int num,d;\n    bool operator < (const sd &x) const //\u91cd\u8f7d\u9884\u7b97\u7b26\n    {\n        return x.d<d;\n    }\n};\nvector<sd>mp[100005];\npriority_queue<sd>hhh;//\u4ece\u5927\u5230\u5c0f\u7684\u961f\u5217\nint dist[100005];\nbool vis[100005];\nint x[1005];\nint main()\n{\n    int m,n;\n    scanf(\"%d\",&m);\n    sd w;\n    for(int a,b,c,i=1;i<=m;i++)\n    {\n        scanf(\"%d%d%d\",&a,&b,&c);\n        x[i]=a;//\u8bb0\u5f55\u5c45\u6c11\u6570\n        if(b!=0)\n        {\n            w.num=b;w.d=1;mp[i].push_back(w);// \u8868\u793a i \u5230b\u7684\u8ddd\u79bb\u4e3ad\n            w.num=i;mp[b].push_back(w);\n        }\n        if(c!=0)\n        {\n            w.num=c;w.d=1;mp[i].push_back(w);\n            w.num=i;mp[c].push_back(w);\n        }\n    }\n    int ans=0,min=0xfffffff;\n    for(int l=1;l<=m;l++)\n    {\n        int v=hhh.size();\n        while(v)\n        {\n            v--;\n            hhh.pop();\n        }\n        memset(dist,127,sizeof(dist));\n        memset(vis,false,sizeof(vis));\n        ans=0;\n        vis[l]=true;\n        for(int j=mp[l].size()-1;j>=0;j--)\n        {\n            if(dist[mp[l][j].num]>mp[l][j].d)\n            {\n                dist[mp[l][j].num]=mp[l][j].d;\n            }\n            hhh.push(mp[l][j]);\n        }\n        for(int i=1;i<m;i++)\n        {\n            int k;\n            while(true)\n            {\n                int k=hhh.size();\n                if(k==0) break;\n                w=hhh.top();\n                hhh.pop();\n                if(!vis[w.num]) break;\n            }\n            if(k==0) break;\n            k=w.num;\n            vis[k]=true;\n            for(int j=mp[k].size()-1;j>=0;j--)\n            {\n                int t=mp[k][j].num;\n                if(!vis[t]&&mp[k][j].d+dist[k]<dist[t])\n                {\n                    dist[t]=mp[k][j].d+dist[k];\n                    w.num=t;\n                    w.d=dist[t];\n                    hhh.push(w);\n                }\n            }\n        }\n        for(int i=1;i<=m;i++)//\u7b97\u51fa\u5c45\u6c11\u9700\u8981\u79fb\u52a8\u7684\u8ddd\u79bb\u603b\u6570\n        {\n            if(i!=l)\n            {\n                ans+=(dist[i]*x[i]);\n            }\n        }\n        if(min>ans) min=ans;//\u53d6\u6700\u5c0f\u503c\n    }\n    printf(\"%d\",min);\n    return 0;\n}\n```",
        "postTime": 1509536320,
        "uid": 67782,
        "name": "jiangzhiou",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "1\u3001\u66b4\u529b\n\n\u533b\u9662\u5efa\u7684\u4f4d\u7f6e\u5c31\u662froot\u70b9\n\n\u6570\u636e\u7ed3\u6784\u662f\u4e00\u4e2a\u53cc\u5411\u56fe\n\n\u4ee3\u4ef7=\u6b65\u957f\\*\u4eba\u6570\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO\uff08n\\*n\uff09\n\n\n\n\n\n\n\n\n```cpp\n#include <bits/stdc++.h>\nconst int N=1e2+10;\nconst int INFINITE=1<<30;\nusing namespace std;\nvector<int> vct[N];\nint val[N],n,ans=INFINITE;\nbool vis[N];\nvoid init(){\n    cin>>n;\n    int w,l,r;\n    for(int i=1;i<=n;i++){\n        cin>>w>>l>>r;\n        val[i]=w;\n        if(l){\n            vct[i].push_back(l);\n            vct[l].push_back(i);\n        }\n        if(r){\n            vct[i].push_back(r);\n            vct[r].push_back(i);\n        }\n    }\n}\nint find(int r,int step){\n    if(vis[r]) return 0;\n    vis[r]=true;\n    int ans=val[r]*step;\n    for(int i=0;i<vct[r].size();i++){\n        int v=vct[r][i];\n        ans+=find(v,step+1);\n    }\n    return ans;\n}\nvoid search(){\n    for(int i=1;i<=n;i++){\n        memset(vis,false,sizeof(vis));\n        int tmp=find(i,0);\n        if(tmp<ans) ans=tmp; \n    }\n} \nint main(){\n    //freopen(\"in.txt\",\"r\",stdin);\n    init();\n    search();\n    cout<<ans<<endl;\n    return 0;\n} \n```\n2\u3001\u6700\u77ed\u8def\u89e3\u6cd5\nspfa\u89e3\u6cd5\n\n\u6c42\u51fa\u533b\u9662\u7684\u90a3\u4e2a\u70b9\u5230\u5176\u5b83\u70b9\u7684\u8ddd\u79bb\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO\uff08n\\*2e+n\\*n\uff09 e\u5927\u6982\u7b49\u4e8e2n\n\n\u53ea\u5217\u51fa\u4e86\u6700\u77ed\u8def\u91cc\u9762\u7684\u4e00\u79cd\u89e3\u6cd5\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528\u5176\u5b83\u6700\u77ed\u8def\u6765\u505a\n\n\n\n\n\n\n\n\n\n```cpp\n#include <bits/stdc++.h>\nconst int N=1e2+10;\nconst int INFINITE=1<<30;\nusing namespace std;\nvector<int> vct[N];\nint val[N],n,ans=INFINITE;\nbool vis[N];\nvoid init(){\n    cin>>n;\n    int w,l,r;\n    for(int i=1;i<=n;i++){\n        cin>>w>>l>>r;\n        val[i]=w;\n        if(l){\n            vct[i].push_back(l);\n            vct[l].push_back(i);\n        }\n        if(r){\n            vct[i].push_back(r);\n            vct[r].push_back(i);\n        }\n    }\n}\nint find(int r,int step){\n    if(vis[r]) return 0;\n    vis[r]=true;\n    int ans=val[r]*step;\n    for(int i=0;i<vct[r].size();i++){\n        int v=vct[r][i];\n        ans+=find(v,step+1);\n    }\n    return ans;\n}\nvoid search(){\n    for(int i=1;i<=n;i++){\n        memset(vis,false,sizeof(vis));\n        int tmp=find(i,0);\n        if(tmp<ans) ans=tmp; \n    }\n} \nint main(){\n    //freopen(\"in.txt\",\"r\",stdin);\n    init();\n    search();\n    cout<<ans<<endl;\n    return 0;\n} \n```\n3\u3001\u6811\u5f62dp\u89e3\u6cd5\ndp[i]\u8868\u793a\u4ee5i\u4e3a\u6839\u7684\u5b50\u6811\u7684\u6700\u4f18\u503c\u3002\n\nv\u662fi\u7684\u5b69\u5b50\n\ndp[i] =dp[v]+i\u7684\u5b69\u5b50\u548c\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO\uff08n\\*n\uff09\n\n\n\n\n\n\n\n```cpp\n#include <bits/stdc++.h>\nconst int N=1e2+10;\nconst int INFINITE=1<<30;\nusing namespace std;\nvector<int> vct[N];\nint val[N],n,ans=INFINITE,dp[N];\nbool vis[N];\nvoid init(){\n    cin>>n;\n    int w,l,r;\n    for(int i=1;i<=n;i++){\n        cin>>w>>l>>r;\n        val[i]=w;\n        if(l){\n            vct[i].push_back(l);\n            vct[l].push_back(i);\n        }\n        if(r){\n            vct[i].push_back(r);\n            vct[r].push_back(i);\n        }\n    }\n}\nint dfs(int r){\n    if(vis[r]) return 0;\n    vis[r]=true;\n    int sum=0;\n    for(int i=0;i<vct[r].size();i++){\n        int v=vct[r][i];\n        if(!vis[v]){\n            sum+=(val[v]+dfs(v)); \n            dp[r]+=dp[v];\n        } \n    }\n    dp[r]+=sum;\n    return sum;\n}\nvoid search(){\n    for(int i=1;i<=n;i++){\n        memset(vis,false,sizeof(vis));\n        memset(dp,0,sizeof(dp));\n        dfs(i);\n        if(dp[i]<ans) ans=dp[i]; \n    }\n} \nint main(){\n    //freopen(\"in.txt\",\"r\",stdin);\n    init();\n    search();\n    cout<<ans<<endl;\n    return 0;\n} \n\n```",
        "postTime": 1506346358,
        "uid": 45824,
        "name": "fry404006308",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5f88\u6c34\u2026\u2026\n\n\u53ef\u4ee5\u4f7f\u7528Floyd\u76f4\u63a5\u89e3\u51b3\u2026\u2026\n\n\u5176\u5b9e\u5de6\u53f3\u94fe\u63a5\u5c31\u76f8\u5f53\u4e8e\u5728\u56fe\u4e2d\u8fde\u51fa\u4e24\u6761\u65e0\u5411\u8fb9\u2026\u2026\n\n```cpp\n#include<cstdio>\nusing namespace std;\nint n,x,y,a[109],g[109][109],t,m=233333333,out,fh;\nchar cc;\nint read()//\u4f9d\u7136\u6ca1\u6709\u4ec0\u4e48\u5375\u7528\u7684\u8bfb\u5165\u4f18\u5316\u2026\u2026\n{\n    out=0,fh=1,cc=getchar();\n    if(cc=='-'){fh=-1;}\n    while(cc>'9'||cc<'0'){cc=getchar();}\n    while(cc>='0'&&cc<='9')\n    {\n        out=out*10+cc-'0',\n        cc=getchar();\n    }\n    return out*fh;\n}\nint min(int a,int b)//\u66f4\u65e0\u5375\u7528\u7684\u624b\u5199min\u2026\u2026\n{\n    if(a<b){return a;}\n    else{return b;}\n}\nint main()\n{\n    n=read();\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            g[i][j]=23333;//\u521d\u59cb\u5316\uff0c\u4fdd\u8bc1\u6ca1\u8fde\u4e0a\u7684\u4e0d\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u89e3\u2026\u2026\n        }\n    } \n    for(int i=1;i<=n;i++)\n    {\n        a[i]=read(),x=read(),y=read();//\u8bfb\u5165\n        if(x){g[i][x]=1,g[x][i]=1;}//\u94fe\u63a5x\u4e0ei\n        if(y){g[i][y]=1,g[y][i]=1;}//\u94fe\u63a5y\u4e0ei\n    }\n    for(int k=1;k<=n;k++)\n    {\n        for(int i=1;i<=n;i++)\n        {\n            for(int j=1;j<=n;j++)\n            { \n                if((i!=k)&&(i!=j)&&(j!=k))\n                {\n                    g[i][j]=min(g[i][j],g[i][k]+g[k][j]);//Floyd\u2026\u2026\n                } \n            }\n        }\n    }\n    for(int i=1;i<=n;i++)\n    {\n        t=0;\n        for(int j=1;j<=n;j++)\n        {\n            if(i!=j){t=t+g[i][j]*a[j];}//\u6309\u9898\u610f\u6a21\u62df\u2026\u2026\n        }\n        m=min(m,t);//\u4e0d\u505c\u5730\u627e\u6700\u4f18\u89e3\u2026\u2026\n    }\n    printf(\"%d\",m);\n}\n```",
        "postTime": 1484930251,
        "uid": 14378,
        "name": "doby",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u9898\u601d\u8def\u5c31\u662f\u5148\u8bfb\u5165\uff0c\u5bf9\u5de6\u8fb9\u548c\u53f3\u8fb9\u9884\u5904\u7406\uff0c\u518d\u8dd1\u4e00\u904d\u4f5b\u6d1b\u4f9d\u5fb7\uff0c\u6c42\u51fa\u6700\u77ed\u8def\u5f84\uff0c\u6700\u540e\u4e00\u4e2a\u4e00\u4e2a\u70b9\u679a\u4e3e\uff0c\u4fdd\u5b58\u6700\u4fbf\u5b9c\u7684\uff0c\u8f93\u51fa\u3002\n\n\u795d\u5927\u5bb6AC\u6109\u5feb\uff0c\u4e00\u5b9a\u542c\u61c2\u4e86\u5427\uff0c\u563b\u563b\n\n\u4ee3\u7801\uff1a\n\n```pascal\nvar f:array[0..101,0..101]of longint;\n    v:array[0..101]of longint;\n    n,i,j,k,x,y,max,s:longint;\nbegin\n   readln(n);\n   fillchar(f,sizeof(f),63);\n   for i:=1 to n do f[i,i]:=0;\n   for i:=1 to n do\n     begin\n        readln(v[i],x,y);\n        if x<>0 then begin f[i,x]:=1;f[x,i]:=1; end;\n        if y<>0 then begin f[i,y]:=1;f[y,i]:=1; end;\n     end;\n   for k:=1 to n do\n     for i:=1 to n do\n       for j:=1 to n do\n         if f[i,k]+f[k,j]<f[i,j] then\n          f[i,j]:=f[i,k]+f[k,j];\n   max:=maxlongint;\n   for i:=1 to n do\n     begin\n        s:=0;\n        for j:=1 to n do\n          s:=s+f[i,j]*v[j];\n        if s<max then max:=s;\n     end;\n   writeln(max);\nend.\n```\n",
        "postTime": 1566223285,
        "uid": 118967,
        "name": "yz0414",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u7b80\u5355\u9898\u554a...\n\n\u6811\u7684\u91cd\u5fc3\u6216\u8005\u7206\u641c\u90fd\u884c\n\n\u7136\u540e\u7206\u641c\u5b9e\u9645\u6548\u7387\u540a\u6253\u6811\u7684\u91cd\u5fc3\uff08\u96fe\uff09\n\n\u4e8c\u53c9\u6811\u50a8\u5b58\u592a\u9ebb\u70e6\u4e86\uff0c\u50a8\u5b58\u6210\u56fe\u90a3\u6837\u5b50\n\n## \u7206\u641c\u505a\u6cd5\n\n\u8fd9\u9898\u9898\u610f\u5c31\u662f\u6c42\u5728\u6811\u4e0a\u627e\u4e00\u4e2a\u70b9\u5176\u4ed6\u70b9\u5230\u5b83\u7684\u8ddd\u79bb\u6700\u5c0f\n\n\u90a3\u4e48\u6211\u4eec\u6309\u9898\u610f\u7206\u641c\u5c31\u597d\u4e86\n\n\u8ba9\u8fd9\u4e2a\u70b9\u4e3a\u6839\n\n\u7136\u540e\u5c31\u5206\u51fa\u6765\u4e00\u4e2a\u4e09\u53c9\u6811\uff0c\u968f\u4fbf\u641c\u4e00\u4e0b\u4e09\u6761\u5206\u652f\u7edf\u8ba1\u7b54\u6848\u5c31ok\n\n```cpp\n#include <bits/stdc++.h>\n\n#define ll long long\n#define inf 0x3f3f3f3f \n#define il inline \n\n#define in(a) a=read()\n#define out(a) printf( \"%d\" , a ) \n#define outn(a) out(a),putchar('\\n')\n\n#define I_int int \ninline I_int read() {\n    \n    I_int x = 0 , f = 1 ; char c = getchar() ;\n    while( c < '0' || c > '9' ) {\n        if( c == '-' ) f = -1 ;\n        c = getchar() ;\n    }\n    while( c >= '0' && c <= '9' ) {\n        x = (x << 1) + (x << 3) + c - 48 ;\n        c = getchar() ;\n    }\n    return x * f ;\n}\n#undef I_int\n\nusing namespace std ;\n\n#define N 100010\n\nint n , m , c[ N ] , fa[ N ] ;\nint head[ N ] , cnt ;\nstruct node {\n    int to , nxt ;\n} e[ N ] ;\n\nvoid ins( int u , int v ) {\n    e[ ++ cnt ].to = v ;\n    e[ cnt ].nxt = head[ u ] ;\n    head[ u ] = cnt ;\n}\n\nint dfs( int u , int f , int dep ) {\n    int ans = dep * c[ u ] ;\n    for( int i = head[ u ] ; i ; i = e[ i ].nxt ) {\n        if( e[ i ].to == f ) continue ;\n        ans += dfs( e[ i ].to , u , dep + 1 ) ;\n    }\t\n    return ans ;\n}\n\nint main() {\n    int ans = inf ;\n    in( n ) ;\n    for(int i = 1 ; i <= n ; i ++ ) {\n    \tin( c[ i ] ) ;\n    \tint v ;\n    \tin( v ) ;\n    \tif( v ) { ins( i , v ) ; ins( v , i ) ; fa[ v ] = i ; }\n    \tin( v ) ;\n    \tif( v ) { ins( i , v ) ; ins( v , i ) ; fa[ v ] = i ; }\n    }\n    for( int i = 1 ; i <= n ; i ++ ) {\n        ans = min( ans , dfs( i , fa[ i ] , 0 ) + dfs( fa[ i ] , i , 1 ) ) ;\n    }\n    outn( ans ) ;\n}\n```\n\n\u7206\u641c\u590d\u6742\u5ea6\u662f$O(n^2)$\u7684..\n\n## \u6811\u7684\u91cd\u5fc3\u505a\u6cd5\n\n\u6811\u7684\u91cd\u5fc3\u677f\u5b50\uff0c\u5904\u7406\u51fa\u6df1\u5ea6\u548c\u5b50\u6811\u6570\u76ee\uff0c\u90a3\u4e48\u518d\u641c\u4e00\u904d\u7edf\u8ba1\u7b54\u6848\u5c31\u53ef\u4ee5\u4e86\n\n```cpp\n#include <bits/stdc++.h>\n\n#define ll long long\n#define inf 0x3f3f3f3f \n#define il inline \n\n#define in(a) a=read()\n#define out(a) printf( \"%d\" , a ) \n#define outn(a) out(a),putchar('\\n')\n\n#define I_int int \ninline I_int read() {\n    \n    I_int x = 0 , f = 1 ; char c = getchar() ;\n    while( c < '0' || c > '9' ) {\n        if( c == '-' ) f = -1 ;\n        c = getchar() ;\n    }\n    while( c >= '0' && c <= '9' ) {\n        x = (x << 1) + (x << 3) + c - 48 ;\n        c = getchar() ;\n    }\n    return x * f ;\n}\n#undef I_int\n\nusing namespace std ;\n\n#define N 100010\n\nint siz[ N ] , dep[ N ] , f[ N ] ;\nint n , m , c[ N ] , fa[ N ] ;\nint head[ N ] , cnt , ans = inf ;\nstruct node {\n\tint to , nxt ;\n} e[ N ] ;\n\nvoid ins( int u , int v ) {\n\te[ ++ cnt ].to = v ;\n\te[ cnt ].nxt = head[ u ] ;\n\thead[ u ] = cnt ;\n}\n\nvoid dfs( int u ) {\n\tsiz[ u ] = c[ u ] ;\n\tfor( int i = head[ u ] ; i ; i = e[ i ].nxt ) {\n\t\tif( e[ i ].to == fa[ u ] ) continue ;\n\t\tdep[ e[ i ].to ] = dep[ u ] + 1 ;\n\t\tdfs( e[ i ].to ) ;\n\t\tsiz[ u ] += siz[ e[ i ].to ] ;\n\t}\n\tf[ 1 ] += c[ u ] * dep[ u ] ;\n}\n\nvoid dp( int u ) {\n\tfor( int i = head[ u ] ; i ; i = e[ i ].nxt ) {\n\t\tif( e[ i ].to == fa[ u ] ) continue ;\n\t\tf[ e[ i ].to ] = f[ u ] + siz[ 1 ] - 2 * siz[ e[ i ].to ] ;\n\t\tdp( e[ i ].to ) ;\n\t}\n\tans = min( ans , f[ u ] ) ;\t\t\n}\n\nint main() {\n    in( n ) ;\n    for(int i = 1 ; i <= n ; i ++ ) {\n    \tin( c[ i ] ) ;\n    \tint v ;\n    \tin( v ) ;\n    \tif( v ) { ins( i , v ) ; ins( v , i ) ; fa[ v ] = i ; }\n    \tin( v ) ;\n    \tif( v ) { ins( i , v ) ; ins( v , i ) ; fa[ v ] = i ; }\n\t}\n\tdfs( 1 ) ; dp( 1 ) ;\n\toutn( ans ) ;\n}\n```",
        "postTime": 1540651874,
        "uid": 36526,
        "name": "henry_y",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u662f\u771f\u7684\u6c34\uff0c\u6211\u672c\u6765\u53ea\u662f\u60f3\u6253\u4e2a\u641c\u7d22\u770b\u770b\uff0c\u7ed3\u679c\u5c31\u8fc7\u4e86\u3002\u770b\u4e86\u770b\u9898\u89e3\uff0c\u53d1\u73b0\u6ca1\u4eba\u6253\u8fc7\u641c\u7d22\u3002\u3002\u3002\n\n\u4e3b\u8981\u601d\u60f3\u5c31\u662f\u5148\u5efa\u4e00\u4e2a\u65e0\u5411\u56fe\uff0c\u7136\u540e\u4ece\u6bcf\u4e2a\u70b9\u51fa\u53d1\uff0c\u904d\u5386\u4e00\u904d\uff0c\u6c42\u51fa\u6bcf\u4e2a\u70b9\u7684\u6df1\u5ea6\uff0c\u518d\u4e58\u4e0a\u8fd9\u4e2a\u70b9\u7684\u503c\uff08\u771f\u7684\u53ea\u662f\u66b4\u529b\uff09\uff0c\u627e\u51fa\u6700\u5c0f\u7684\uff1b\n\n\u4e0b\u9762\u662f\u4ee3\u7801\uff1b\n\n\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#define maxn 500\nusing namespace std;\nint n,dis[maxn],sum,ans=0x7f7f7f7f;\nstruct node\n{\n    int next,to;\n}edge[maxn];\nint head[maxn],k=0;\ninline void add(int x,int y)\n{\n    edge[++k].to=y;\n    edge[k].next=head[x];\n    head[x]=k;\n} \nint di[maxn];\nint dfs(int x,int fa)\n{\n    for(int i=head[x];i;i=edge[i].next)\n    {\n        if(edge[i].to!=fa)\n        {\n            int v=edge[i].to;\n            di[v]=di[x]+1;\n            sum+=di[v]*dis[v];\n            dfs(v,x);\n        }\n    }\n}\nint main()\n{\n//    freopen(\"s.txt\",\"r\",stdin);\n    scanf(\"%d\",&n);\n    for(int y,z,i=1;i<=n;i++)\n    {\n        scanf(\"%d%d%d\",&dis[i],&y,&z);\n        if(y)\n        {\n            add(i,y);\n            add(y,i);\n        }\n        if(z)\n        {\n            add(i,z);\n            add(z,i);\n        }\n```\n}//\u65e0\u5411\u56fe\n\n```cpp\n    for(int i=1;i<=n;i++)\n    {        \n        sum=0;\n        memset(di,0,sizeof(di));\n        dfs(i,i);\n        ans=min(ans,sum);\n```\n}//\u904d\u5386\n\n    printf(\"%d\",ans);\n\n    return 0;\n\n}\n\u8fd9\u4ee3\u7801\u8fd8\u662f\u81ea\u5df1\u6253\u5427\uff0c\u4e0d\u8981\u6284\uff1b\n",
        "postTime": 1505177206,
        "uid": 25338,
        "name": "OrangeDog",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u697c\u4e0b\u7684floyed\u662f\u4e0d\u662f\u590d\u6742\u5ea6\u592a\u9ad8\u4e86\uff0c\u6211\u6709\u4e24\u4e2a\u60f3\u6cd5\uff0c\u7b2c\u4e00\u4e2a\u7528O(n)\u7684\u65f6\u95f4\u9884\u5904\u7406\u51fa\u6bcf\u4e24\u4e2a\u70b9\u5728\u6811\u4e0a\u7684\u8ddd\u79bb\uff0c\u7136\u540eO(n)\u8dd1\u4e00\u904d\uff1f\n\n\u6211\u5b9e\u9645\u505a\u6cd5\u662f\u7b2c\u4e8c\u79cd\uff0cO(n^2)\u7684\uff0c0ms\uff0c\u76f4\u63a5\u679a\u4e3e\u6bcf\u4e2a\u70b9\u7136\u540eO(n)\u904d\u5386\u5c31\u597d\u4e86\n\n\n\n\n\n\n\n\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\n#define REP(i,a,b) for(register int i = (a), i##_end_ = (b); i <= i##_end_; ++i)\ntypedef long long ll;\ninline int read()\n{\n    char c = getchar();register int fg = 1, sum = 0;\n    while(c < '0' || c > '9')\n    {\n        if(c == '-')fg = -1;\n        c = getchar();\n    }\n    while(c >= '0' && c <= '9')\n    {\n        sum = sum * 10 + c - '0';\n        c = getchar();\n    }\n    return fg * sum;\n}\nconst int inf = 0x3f3f3f3f;\nconst int maxn = 1010;\nint n,w[maxn];\nint be[maxn],ne[maxn],to[maxn],e;\nvoid add(int x,int y)\n{\n    to[++e] = y;\n    ne[e] = be[x];\n    be[x] = e;\n}\nint vis[maxn],sum = 0,ans = inf;\nvoid dfs(int x,int d)\n{\n    vis[x] = 1;\n    for(int i = be[x]; i; i = ne[i])\n    {\n        int v = to[i];\n        if(!vis[v])\n        {\n            sum += (d+1) * w[v];\n            dfs(v,d+1);\n        }\n    }\n}\nint main()\n{\n    n = read();\n    REP(i,1,n)\n    {\n        w[i] = read();int l = read(),r = read();\n        if(l)add(i,l),add(l,i);\n        if(r)add(i,r),add(r,i);\n    }\n    REP(i,1,n)\n    {\n        memset(vis,0,sizeof(vis));\n        sum = 0;\n        dfs(i,0);\n        ans = min(ans,sum);\n    }\n    printf(\"%d\\n\",ans);\n}\n\n```",
        "postTime": 1493824378,
        "uid": 19645,
        "name": "Drinkwater",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u7b80\u5355\u7684\u4e8c\u53c9\u6811\u5e94\u7528\u95ee\u9898\uff0c\u95ee\u9898\u4e2d\u7684\u7ed3\u70b9\u6570\u5e76\u4e0d\u591a\uff0c\u6570\u636e\u89c4\u6a21\u4e5f\u4e0d\u5927\uff0c\u91c7\u7528\u90bb\u63a5\u77e9\u9635\u5b58\u50a8\uff0c\u7528Floyed\u6cd5\u6c42\u51fa\u4efb\u610f\u4e24\u7ed3\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u5f84\u957f\uff0c\u7136\u540e\u7a77\u4e3e\u533b\u9662\u53ef\u80fd\u5efa\u7acb\u7684n\u4e2a\u7ed3\u70b9\u4f4d\u7f6e\uff0c\u627e\u51fa\u4e00\u4e2a\u6700\u5c0f\u8ddd\u79bb\u7684\u4f4d\u7f6e\u5373\u53ef\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528\u53cc\u94fe\u8868\u7ed3\u6784\u6216\u5e26\u7236\u7ed3\u70b9\u4fe1\u606f\u7684\u6570\u7ec4\u5b58\u50a8\u7ed3\u6784\u6765\u89e3\u51b3\uff0c\u4f46\u5b9e\u9645\u64cd\u4f5c\u7a0d\u5fae\u9ebb\u70e6\u4e86\u4e00\u70b9\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nint a[101],g[101][101];\nint main()\n{\n    int n,i,j,k,l,r;\n    scanf(\"%d\",&n);\n    memset(g,1,sizeof g);\n    for(i=1;i<=n;i++)\n    {\n        scanf(\"%d%d%d\",&a[i],&l,&r);\n        if(l>0) g[i][l]=g[l][i]=1;\n        if(r>0) g[i][r]=g[r][i]=1;\n        g[i][i]=0;\n    }\n    for(k=1;k<=n;k++)   //\u5229\u7528floyed\u7b97\u6cd5\u6c42\u4e24\u70b9\u95f4\u6700\u77ed\u8ddd\u79bb \n      for(i=1;i<=n;i++)\n        if(i!=k)\n          for(j=1;j<=n;j++)\n            if(i!=j&&j!=k)\n              g[i][j]=min(g[i][j],g[i][k]+g[k][j]);\n    int mixn=99999999,tot;\n    for(i=1;i<=n;i++)        //\u7a77\u4e3e\u533b\u9662\u5efa\u5728\u7b2ci\u4e2a\u7ed3\u70b9\uff0c\u627e\u51fa\u6700\u77ed\u8ddd\u79bb\n    {\n        tot=0;\n        for(j=1;j<=n;j++)\n          tot+=g[i][j]*a[j];\n        mixn=min(mixn,tot);\n    }\n    printf(\"%d\\n\",mixn);\n    return 0;\n}\n```",
        "postTime": 1464324982,
        "uid": 13473,
        "name": "chaijing",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u89e3\uff1a\n\n\u6b64\u9898\u66b4\u529b\u679a\u4e3e\u5728\u54ea\u4e2a\u70b9\u8bbe\u7f6e\u533b\u9662\uff0c\u7136\u540e\u4ee5\u90a3\u4e2a\u70b9\u4e3a\u6839\u8fdb\u884cDFS\u5373\u53ef\uff0c\n\n\u590d\u6742\u5ea6O(n^2)\n\n\u4e5f\u53ef\u4ee5\u7528\u6811\u5f62DP\u6765\u5199\uff0c\u590d\u6742\u5ea6O(n)\n\nok[i]\u8868\u793a\u4ee5i\u4e3a\u6839\u7684\u6700\u4f18\u7b54\u6848\uff0c\u9996\u5148\u6211\u4eec\u9884\u5904\u7406\u51faok[1]\n\nsz[i]\u8868\u793ai\u8fd9\u68f5\u5b50\u6811\u7684\u5927\u5c0f\uff08\u8282\u70b9\u6570\u76ee\u4e4b\u548c\uff09\n\n\u5bf9\u4e8e( u -> v ) \u5df2\u77e5ok[u]\n\n\u6211\u4eec\u53ea\u9700\u8981\u51cf\u53bbsz[v],\u52a0\u4e0a\u9664\u4e86sz[v]\u4ee5\u5916\u7684\u8282\u70b9\u6570\u76ee\n\n\u5373ok[v]=ok[u]-sz[v]+sz[1]-sz[v]=ok[u]+sz[1]-2*sz[v]\n\n\u5f97\u89e3\u3002\n\n\n[\u8be6\u89c1\u535a\u5ba2\u5566](http://www.cnblogs.com/adelalove/p/8848791.html)",
        "postTime": 1523790348,
        "uid": 83546,
        "name": "\u4f9d\u4f9d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "#\u8c8c\u4f3c\u6ca1\u6709spfa\uff1f\u6211\u6765\u8d34\u4e00\u53d1\n\n##\u6ce8\u610f\u662f\u53cc\u5411\u8fb9\uff0c\u6211\u6700\u5f00\u59cb\u770b\u9519\u4e86\uff0c\u6253\u4e86\u4e2a\u5f53\u5de6\u53f3\u8282\u70b9\u90fd\u4e0d\u4e3a0\u65f6\u5efa\u8fb9\uff0c\u70b8\u4e86\uff0c\u5de6\u53f3\u5224\u65ad\n\n###\u6211\u768440\u5206\u627e\u51fa\u4e86\u9519\u8bef\uff0cminn\u521d\u59cb\u5316\u4e0d\u89810x7f\uff0c\u592a\u5c0f\uff01\u591a\u8ddf\u51e0\u4e2afff\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define maxn 11000\nusing namespace std;\nint head[maxn],team[maxn],exist[maxn],dis[maxn],minn=0x7ffff;\nint n,sum,p[maxn];\nint read()\n{\n    int x=0;\n    char ch=getchar();\n    while(ch<'0'||ch>'9') ch=getchar();\n    while(ch>='0'&&ch<='9')\n     {\n         x=x*10+ch-'0';\n         ch=getchar();\n     }\n    return x;\n}\nstruct EDGE\n{\n    int next;\n    int to;\n    int co;\n}edge[maxn*3];\nint qr;\nvoid add(int from,int to,int co)\n{\n    edge[++qr].next=head[from];\n    edge[qr].to=to;\n    edge[qr].co=co;\n    head[from]=qr;\n}\nvoid spfa(int x)\n{\n    memset(dis,0x7f,sizeof(dis));\n    memset(exist,0,sizeof(exist));\n    int h=0,t=1;\n    dis[x]=0;exist[x]=1;team[1]=x;\n    while(h<t)\n    {\n        h++;\n        int u=team[h];exist[u]=0;\n        for(int i=head[u];i!=0;i=edge[i].next)\n         {\n             int v=edge[i].to;\n             if(dis[v]>dis[u]+edge[i].co)\n              {\n                  dis[v]=dis[u]+edge[i].co;\n                  if(!exist[v])\n                   {\n                       exist[v]=1;\n                       t++;\n                       team[t]=v;\n                   }\n              }\n         }\n    }\n}\nint main()\n{\n    n=read();\n    for(int i=1;i<=n;++i)\n     {\n         int l,r;\n         p[i]=read();\n         l=read();r=read();\n         if(l!=0) add(i,l,1),add(l,i,1);\n         if(r!=0) add(i,r,1),add(r,i,1);\n     }\n    for(int i=1;i<=n;++i)\n     {\n         spfa(i);sum=0;\n         for(int j=1;j<=n;++j)\n          {\n//              printf(\"***%d\\n\",dis[j]*p[j]);\n              sum+=dis[j]*p[j];\n          }\n        minn=min(minn,sum);\n     }\n    printf(\"%d\",minn);\n    return 0;\n}\n```",
        "postTime": 1506241271,
        "uid": 49851,
        "name": "\u777f\u5c7f\u9752\u886b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u6b63\u89e3\u5e94\u8be5\u662f\u6c42\u5e26\u6743\u6811\u7684\u91cd\u5fc3\uff08\u5982\u679c\u6570\u636e\u518d\u5927\u4e9b\u7684\u8bdd\u3002\u3002\uff09\n\n\u6bcf\u4e2a\u8282\u70b9\u7684\u503c\u90fd\u76f8\u5f53\u4e8e\u5b83\u7684size\uff0c\u6211\u4eec\u901a\u8fc7dfs\u6c42\u51fa\u7b2c\u4e00\u4e2a\u4ee5\u5b83\u4e3a\u6839\u7684\u5b50\u6811\u7684size \\* 2 >= \u603bsize\u503c\u7684\u8282\u70b9\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8282\u70b9\u5c31\u662f\u6811\u7684\u91cd\u5fc3\u3002\n\n\u7136\u540e\u518d\u901a\u8fc7\u4e00\u8fb9dfs\u6c42\u51fa\u7b54\u6848\u3002\n\n\n\n\n\n\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#define MAXN 1001\nusing namespace std;\nint n, cnt, tot, ans, sum;\nint head[MAXN], next[MAXN], to[MAXN], val[MAXN], size[MAXN], dis[MAXN], f[MAXN];\ninline void add(int x, int y)\n{\n    to[cnt] = y;\n    next[cnt] = head[x];\n    head[x] = cnt++;\n}\ninline void dfs(int u)\n{\n    int i, v;\n    size[u] += val[u];\n    for(i = head[u]; i != -1; i = next[i])\n    {\n        v = to[i];\n        if(v != f[u])\n        {\n            f[v] = u;\n            dfs(v);\n            size[u] += size[v];\n        }\n    }\n    if(2 * size[u] >= tot && !ans) ans = u;\n}\ninline void dfs1(int u)\n{\n    int i, v;\n    sum += (dis[u] - 1) * val[u];\n    for(i = head[u]; i != -1; i = next[i])\n    {\n        v = to[i];\n        if(!dis[v])\n        {\n            dis[v] = dis[u] + 1;\n            dfs1(v);\n        }\n    }\n}\nint main()\n{\n    int i, x, y;\n    scanf(\"%d\", &n);\n    memset(head, -1, sizeof(head));\n    for(i = 1; i <= n; i++)\n    {\n        scanf(\"%d %d %d\", &val[i], &x, &y);\n        if(x) add(i, x), add(x, i);\n        if(y) add(i, y), add(y, i);\n        tot += val[i];\n    }\n    dfs(1);\n    dis[ans] = 1;\n    dfs1(ans);\n    printf(\"%d\", sum);\n    return 0;\n}\n```",
        "postTime": 1493881153,
        "uid": 8220,
        "name": "zht467",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u56fe\u8bba\u4e4b\u6700\u77ed\u8def\u4e4bFloyd\n\n\u5148\u7528Floyd\u6c42\u51fa\u4e24\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u518d\u4f9d\u6b21\u679a\u4e3e\u5728\u6bcf\u4e2a\u70b9\u8bbe\u533b\u9662\u4eba\u8981\u8d70\u7684\u8ddd\u79bb\n\n\u8bf7\u6ce8\u610f\uff1a\u8fd9\u662f\u4e00\u4e2a\u65e0\u5411\u56fe\uff0c\u6240\u4ee5\u8981\u5c06\u4e24\u8fb9\u90fd\u8d4b\u6210\u53ef\u4ee5\u901a\u8fc7\n\n\u5f53\u7136\u4e5f\u53ef\u4ee5\u8003\u8651Dijskla\u6216SPFA\uff0c\u5728\u6b64\u4e0d\u505a\u591a\u8ff0\n\n\n\n```pascal\nuses math;\n\nvar\n i,j,y,z,n,minn,ans:longint;\n b:array[0..110] of longint;\n//b[i]\u4ee3\u8868\u6bcf\u4e00\u4e2a\u70b9\u7684\u4eba\u6570\n a:array[0..110,0..110] of int64;\n//a[i,j]\u4ee3\u8868\u4ecei\u5230j\u7684\u6700\u77ed\u8ddd\u79bb\n\nprocedure floyd;//\u5f17\u6d1b\u4f0a\u5fb7\n var\n  i,j,k:longint;\n begin\n  for k:=1 to n do\n   for i:=1 to n do\n    for j:=1 to n do\n     a[i,j]:=min(a[i,j],a[i,k]+a[k,j]);\nend;\n\nbegin\n readln(n);\n for i:=1 to n do\n  for j:=1 to n do\n   if i<>j then a[i,j]:=maxlongint;//\u522b\u5fd8\u4e86\u8d4b\u521d\u503c\uff01\n for i:=1 to n do\n  begin\n   readln(b[i],y,z);\n   if y<>0 then//\u5de6\u8fb9\u6709\u8def\n    begin\n     a[i,y]:=1;\n     a[y,i]:=1;\n    end;\n   if z<>0 then//\u53f3\u8fb9\u6709\u8def\n    begin\n     a[i,z]:=1;\n     a[z,i]:=1;\n    end;\n  end;\n\n floyd;\n\n minn:=maxlongint;\n for i:=1 to n do//\u7a77\u4e3e\u8bbe\u533b\u9662\u7684\u70b9\n  begin\n   ans:=0;\n   for j:=1 to n do//\u7a77\u4e3e\u6bcf\u4e2a\u70b9\u7684\u5c45\u6c11\n    inc(ans,a[i,j]*b[j]);//\u5c45\u6c11\u8981\u8d70\u7684\u8def\u7684\u548c\n   minn:=min(minn,ans);//\u53d6\u8f83\u5c0f\u503c\n  end;\n writeln(minn);\nend.\n```\n\n\u9644\u6d4b\u8bc4\u7ed3\u679c\uff1a\n\n#1 AC 0ms/4855KB\n\n#2 AC 0ms/4855KB\n\n#3 AC 0ms/4855KB\n\n#4 AC 0ms/4855KB\n\n#5 AC 4ms/4855KB\n",
        "postTime": 1510196892,
        "uid": 27924,
        "name": "xukuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u6570\u636e\u5f88\u6c34\uff0c\u5148\u5efa\u4e8c\u53c9\u6811\uff0c\u518d\u5c06\u5404\u70b9\u9010\u4e00BFS\uff0c\u6700\u540e\u53d6\u6700\u5c0f\u7b54\u6848\u3002\n\n```delphi\n\nvar bt:array[0..100,0..3]of longint;\n    v:array[1..100]of boolean;\n    q:array[0..10010,1..2]of longint;\n    a,b,n,i,j,l,r,h,t:longint;\n    ans,min:qword;\nbegin\n  fillchar(bt,sizeof(bt),0);\n  readln(n);\n  for i:=1 to n do\n  begin\n    readln(bt[i,0],bt[i,1],bt[i,2]);//\u5efa\u6811\n    l:=bt[i,1];r:=bt[i,2];\n    if l<>0 then bt[l,3]:=i;\n    if r<>0 then bt[r,3]:=i;\n  end;\n  min:=maxlongint;\n  for i:=1 to n do//BFS\n  begin\n    fillchar(v,sizeof(v),true);\n    ans:=0;\n    v[i]:=false;\n    h:=0;t:=1;\n    q[1,1]:=i;q[1,2]:=0;\n    while h<t do\n    begin\n      inc(h);\n      for j:=1 to 3 do\n      begin\n        l:=bt[q[h,1],j];\n        if l<=0 then continue;\n        if v[l] then\n        begin\n          inc(t);\n          v[l]:=false;\n          q[t,1]:=l;\n          q[t,2]:=q[h,2]+1;\n          ans:=ans+bt[l,0]*q[t,2];\n        end;\n      end;\n    end;\n    if min>ans then min:=ans;\n  end;\n  writeln(min);\nend.\n\n```",
        "postTime": 1440054921,
        "uid": 2248,
        "name": "\u6c47\u6587\u5ba2",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1364 \u3010\u533b\u9662\u8bbe\u7f6e\u3011"
    }
]
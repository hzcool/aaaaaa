[
    {
        "content": "Problem\n------------\n\n\u7b80\u8981\u9898\u610f\uff1a\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6781\u5750\u6807\u5e73\u9762\uff0c\u548c\u4e24\u4e2a\u7528\u6781\u5750\u6807\u8868\u793a\u7684\u70b9\uff0c\u8fd8\u6709\u4e00\u4e2a\u6839\u636e\u6781\u5750\u6807\u5f97\u503c\u7684\u51fd\u6570\uff0c\u6c42\u4ee5\u8fd9\u4e24\u4e2a\u70b9\u4e3a\u7aef\u70b9\u7684\u7ebf\u6bb5\u4e0a\u7684\u51fd\u6570\u6700\u5927\u503c\n\n\u60f3\u8981\u9898\u9762\u548c\u6570\u636e\u53ef\u4ee5\u4e0a[code+](https://cp.thusaac.org/contests)\u4e0b\u8f7d\n\nSolution\n------------\n\n\u4e00\u770b\u5230\u9898\u5c31\u611f\u89c9\u662f\u6570\u5b66\u9898\uff0c\u6c42\u51fd\u6570\u6781\u503c\uff0c\u7136\u800c\u90a3\u4e2a\u51fd\u6570\u597d\u50cf\u5f88\u590d\u6742\n\n\u5b98\u65b9\u9898\u89e3\u662f\u66b4\u529b\u626b\u63cf\uff0c\u7136\u800c\u849f\u84bb\u6bd4\u8d5b\u65f6WA4\u4e2a\u70b9\u6b7b\u6d3b\u6539\u4e0d\u51fa\u6765\uff0c\u53ef\u80fd\u662f\u8fc7\u7a0b\u4e2d\u95f4\u51fa\u73b0\u4e86nan\uff1f\n\n\u7136\u800c\u8fd9\u9898\u597d\u50cf\u53ef\u4ee5\u7528\u722c\u5c71\uff0c\u770b\u770b\u8fd9\u9898\u7684\u9634\u5f71\u90e8\u5206\uff0c\u53d1\u73b0\u4eae\u5ea6\u5206\u5e03\u5730\u6bd4\u8f83\u8fde\u7eed\u800c\u4e14\u6ca1\u6709\u8f83\u591a\u7684\u8d77\u4f0f\uff1a\n\n\u6240\u4ee5\u53ef\u89c1\u5728\u8fd9\u91cc\u722c\u5c71\u7684\u51c6\u786e\u7387\u8fd8\u662f\u53ef\u4ee5\u7684\uff0c\u597d\u50cf\u8c03\u8c03\u53c2\u6570\u53ef\u4ee5\u5728800ms\u5185\uff1f\n\n\u5177\u4f53\u505a\u6cd5\u5c31\u662f\u5728\u5148\u5c06\u6781\u5750\u6807\u8f6c\u6210\u76f4\u89d2\u5750\u6807\uff08\u53ef\u4ee5\u53d6$(sin,cos)$\u5750\u6807\uff09\uff0c\u518d\u5728\u7ebf\u6bb5\u4e0a\u53d6\u7b49\u5206\u70b9\uff0c\u5728\u6bcf\u4e2a\u70b9\u4e0a\u9009\u53d6\u5f53\u524d\u9644\u8fd1\u6bd4\u8f83\u4eae\u7684\u5730\u65b9\u8d70\uff0c\u5e76\u4e0d\u65ad\u7f29\u5c0f\u6b65\u957f\uff0c\u8c03\u8c03\u53c2\u6570\u5c31\u80fdA\n\n\u5177\u4f53\u89c1\u4ee3\u7801\uff0c\u7528\u5411\u91cf\u53ef\u80fd\u6bd4\u8f83\u65b9\u4fbf\n\nCode\n---------\n\n\u722c\u5c71\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\ntypedef double db;\ntypedef long double ld;\n#define rg register\n#define cl(x) memset(x,0,sizeof(x))\n#define max(x,y) ((x)>(y)?(x):(y))\n#define min(x,y) ((x)<(y)?(x):(y))\n#define abs(x) ((x)>0?(x):(-(x)))\n\n#define eps (1e-8)\n#define pi (3.1415926535897932384626323849)\n\ntemplate <typename _Tp> inline _Tp read(_Tp&x){\n\trg char c11=getchar(),ob=0;x=0;\n\twhile(c11^'-'&&!isdigit(c11))c11=getchar();if(c11=='-')c11=getchar(),ob=1;\n\twhile(isdigit(c11))x=x*10+c11-'0',c11=getchar();if(ob)x=-x;return x;\n}\n\nstruct vec{\n\tdouble x,y;\n\tvec(){}\n\tvec(const double&X,const double&Y){x=X,y=Y;}\n\tinline vec operator + (const vec&t) const {return vec(x+t.x,y+t.y);}\n\tinline vec operator - (const vec&t) const {return vec(x-t.x,y-t.y);}\n\tinline vec operator * (const db &t) const {return vec(x*t,y*t);}\n\tinline void in(){scanf(\"%lf%lf\",&x,&y);}\n};\n\ninline vec r_t_p(vec r){\n\tvec p;\n\tdouble m=sqrt(r.x*r.x+r.y*r.y);\n\tif(fabs(r.x)<eps&&fabs(r.y)<eps)return vec(0,0);\n\telse if(r.x>=0&&r.y>=0)p.x=asin(r.x/m);\n\telse if(r.x>=0&&r.y<=0)p.x=pi-asin(r.x/m);\n\telse if(r.x<=0&&r.y<=0)p.x=pi+asin(-r.x/m);\n\telse p.x=pi+pi-asin(-r.x/m);\n\tp.y=m;\n\treturn p;\n}\n\ninline vec p_t_r(vec p){return vec(p.y*sin(p.x),p.y*cos(p.x));}\n\ninline double get(vec d){\n\tint h=d.x/(pi/3);\n\tdouble f=d.x/(pi/3)-h;\n\tdouble p=1-d.y;\n\tdouble q=1-f*d.y;\n\tdouble t=1-(1-f)*d.y;\n\tswitch(h){\n\t\tcase 0:return 1*0.3+t*0.59+p*0.11;\n\t\tcase 1:return q*0.3+1*0.59+p*0.11;\n\t\tcase 2:return p*0.3+1*0.59+t*0.11;\n\t\tcase 3:return p*0.3+q*0.59+1*0.11;\n\t\tcase 4:return t*0.3+p*0.59+1*0.11;\n\t\tcase 5:return 1*0.3+p*0.59+q*0.11;\n\t\tdefault : return 0;\n\t}\n}\n\nint main(){\n\tvec V,Ap,Bp,Ar,Br;\n\tint T;read(T);while(T--){\n\t\tAp.in();Ap.x=Ap.x*pi/180.0;Ap.y/=100.0;\n\t\tBp.in();Bp.x=Bp.x*pi/180.0;Bp.y/=100.0;\n\t\tAr=p_t_r(Ap);\n\t\tBr=p_t_r(Bp);\n\t\tV=Br-Ar;\n\t\tdouble t,t1,t2,f1,f2,stp;\n\t\tdouble nxt1,nxt2,ans=0;\n\t\tfor(rg int i=0;i<101;++i){  //\u5b9e\u6d4b\u8fd9\u91cc\u53ef\u4ee5\u5f00\u523050\n\t\t\tt=i/100.0;\n\t\t\tstp=0.5;\n\t\t\tfor(rg int j=1;j<=1000;++j){  //\u5b9e\u6d4b\u8fd9\u91cc\u53ef\u4ee5\u5f00\u5230170\n\t\t\t\tt1=t+stp,t2=t-stp;\n\t\t\t\tt1=fmin(t1,1.0);\n\t\t\t\tt2=fmax(t2,0.0);\n\t\t\t\tnxt1=get(r_t_p(Ar+V*t1));\n\t\t\t\tnxt2=get(r_t_p(Ar+V*t2));\n\t\t\t\tans=max(ans,max(nxt1,nxt2));\n\t\t\t\tt=(nxt1>nxt2?t1:t2);\n\t\t\t\tstp*=0.95;\n\t\t\t}\n\t\t}\n\t\tprintf(\"%.4lf\\n\",ans);\n\t}\n\treturn 0;\n}\n```\n\n\u6bd4\u8d5b\u65f6\u6253\u768460\u5206\u66b4\u529b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define rg register\n#define cl(x) memset(x,0,sizeof(x))\n#define max(x,y) ((x)>(y)?(x):(y))\n#define min(x,y) ((x)<(y)?(x):(y))\n#define abs(x) ((x)>0?(x):(-(x)))\n#define pi (3.14159265358979323846)\n#define eps (1e-10)\n\ntemplate <typename _Tp> inline _Tp read(_Tp&x){\n\trg char c11=getchar(),ob=0;x=0;\n\twhile(c11^'-'&&!isdigit(c11))c11=getchar();if(c11=='-')c11=getchar(),ob=1;\n\twhile(isdigit(c11))x=x*10+c11-'0',c11=getchar();if(ob)x=-x;return x;\n}\n\ninline double get(double a,double r){\n\tdouble f,p,q,t;\n\tint h=(int)((int)(a)/60);\n\tf=a/60-(double)h;\n\tp=1-(r/100.0);\n\tq=1-f*(r/100.0);\n\tt=1-(1-f)*(r/100.0);\n\tdouble R,G,B;\n\tswitch(h){\n\t\tcase 0:R=1,G=t,B=p;break;\n\t\tcase 1:R=q,G=1,B=p;break;\n\t\tcase 2:R=p,G=1,B=t;break;\n\t\tcase 3:R=p,G=q,B=1;break;\n\t\tcase 4:R=t,G=p,B=1;break;\n\t\tcase 5:R=1,G=p,B=q;break;\n\t}\n\treturn R*0.30+G*0.59+B*0.11;\n}\n\nint main(){\n\tdouble a1,r1,a2,r2;\n\tint T;read(T);while(T--){\n\t\tscanf(\"%lf%lf%lf%lf\",&a1,&r1,&a2,&r2);\n\t\tdouble ans=0.0;\n\t\tdouble x1=r1*cos(a1*pi/180.0);\n\t\tdouble x2=r2*cos(a2*pi/180.0);\n\t\tdouble y1=r1*sin(a1*pi/180.0);\n\t\tdouble y2=r2*sin(a2*pi/180.0);\n\t\tdouble xx=x1,yy=y1,dx=(x2-x1)/100000.0,dy=(y2-y1)/100000.0;\n\t\tfor(;((xx-x1<eps&&xx-x2>-eps)||(xx-x2<eps&&xx-x1>-eps))&&\n\t\t\t  ((yy-y1<eps&&yy-y2>-eps)||(yy-y2<eps&&yy-y1>-eps))\n\t\t;xx+=dx,yy+=dy){\n\t\t\tdouble X;\n\t\t\tdouble Y=sqrt(xx*xx+yy*yy);\n\t\t\tif(yy>eps) X=acos(xx/Y)*180.0/pi;\n\t\t\telse X=360.0-acos(xx/Y)*180.0/pi;\n\t\t\t//if(ans<get(X,Y))printf(\"%lf %lf %lf\\n\",X,Y,ans);\n\t\t\tans=fmax(ans,get(X,Y));\n\t\t\tif(dx==0&&dy==0)break;\n\t\t}\n\t\tprintf(\"%.4lf\\n\",ans);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1523099317,
        "uid": 22112,
        "name": "Mirach",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P4371 \u3010[Code+#4]\u767d\u91d1\u5143\u9996\u4e0e\u4e03\u5f69\u9b54\u6cd5\u3011"
    },
    {
        "content": "\u6b64\u9898\u5176\u5b9e\u6ca1\u4ec0\u4e48\u96be\u70b9\uff0c\u5c31\u662f\u6ce8\u610f\u76f4\u89d2\u5750\u6807\u7cfb\u548c\u6781\u5750\u6807\u7cfb\u7684\u8f6c\u6362\u5c31\u884c\u4e86\u3002\n\n\u6781\u5750\u6807\u7cfb\u8f6c\u6362\u6210\u76f4\u89d2\u5750\u6807\u7cfb\uff1a\n\n$x = r \\times cos \\ \\theta$\n\n$y = r \\times sin \\ \\theta$\n\n\u76f4\u89d2\u5750\u6807\u7cfb\u8f6c\u6362\u6210\u6781\u5750\u6807\u7cfb\uff1a\n\n$r = \\sqrt{x ^ 2 + y ^ 2}$\n\n$\\theta = \\begin{cases}\\operatorname{atan2(y, x)}&\\operatorname{atan2(y, x)}\\geq0\\\\360+\\operatorname{atan2(y, x)}&\\operatorname{atan2(y, x)}<0\\end{cases}$\n\n\u7136\u540e\u662f\u679a\u4e3e\u7ebf\u6bb5\u7684\u6bcf\u4e00\u4e2a\u70b9\u7684\u64cd\u4f5c\uff1a\n\n\u9996\u5148\u4ece $0$ \u5230 $1$ \u679a\u4e3e $p$\uff0c\u8ba1\u7b97\uff1a\n\n$x = (1 - p) \\times x_1 + p \\times x_2$\n\n$y = (1 - p) \\times y_1 + p \\times y_2$\n\n\u90a3\u4e48 $(x, y)$ \u5c31\u662f\u7ebf\u6bb5 $(x_1, y_1)$ \u5230 $(x_2, y_2)$ \u7684\u7ebf\u6bb5\u4e0a\u7684\u4e00\u4e2a\u70b9\u3002\n\n\u7136\u540e\u628a\u8f93\u5165\u7684 $a$ \u548c $r$ \u8f6c\u6362\u6210\u76f4\u89d2\u5750\u6807\u7cfb\uff0c\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u8f6c\u6362\u6210\u6781\u5750\u6807\u7cfb\uff0c\u8ba1\u7b97\u4eae\u5ea6\u7136\u540e\u53d6\u6700\u5927\u503c\uff0c\u8f93\u51fa\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <cmath>\nusing namespace std;\ndouble max(double a, double b) {\n\treturn a > b ? a : b;\n} \ndouble brightness(double a, double r) {\n\tint h = a / 60;\n\tdouble f = a / 60 - h;\n\tdouble p = 1 - r;\n\tdouble q = 1 - f * r;\n\tdouble t = 1 - (1 - f) * r;\n\tdouble R, G, B;\n\tif (h == 0) {\n\t\tR = 1.0;\n\t\tG = t;\n\t\tB = p;\n\t} else if (h == 1) {\n\t\tR = q;\n\t\tG = 1.0;\n\t\tB = p;\n\t} else if (h == 2) {\n\t\tR = p;\n\t\tG = 1.0;\n\t\tB = t;\n\t} else if (h == 3) {\n\t\tR = p;\n\t\tG = q;\n\t\tB = 1.0;\n\t} else if (h == 4) {\n\t\tR = t;\n\t\tG = p;\n\t\tB = 1.0;\n\t} else {\n\t\tR = 1.0;\n\t\tG = p;\n\t\tB = q;\n\t}\n\treturn 0.30 * R + 0.59 * G + 0.11 * B;\n}\nvoid inline solve() {\n\tdouble a1, a2, r1, r2;\n\tscanf(\"%lf %lf %lf %lf\", &a1, &r1, &a2, &r2);\n\tr1 /= 100.0;\n\tr2 /= 100.0;\n\tdouble x1 = r1 * cos(a1 / 180 * M_PI);\n\tdouble y1 = r1 * sin(a1 / 180 * M_PI);\n\tdouble x2 = r2 * cos(a2 / 180 * M_PI);\n\tdouble y2 = r2 * sin(a2 / 180 * M_PI);\n\tdouble ans = 0.0;\n\tint t = 7500;\n\tfor (int i = 0; i <= t; i++) {\n\t\tdouble p = 1.0 * i / t;\n\t\tdouble x = (1 - p) * x1 + p * x2;\n\t\tdouble y = (1 - p) * y1 + p * y2;\n\t\tdouble a = atan2(y, x) * 180 / M_PI;\n\t\tif (a < 0) {\n\t\t\ta = 360 + a;\n\t\t}\n\t\tdouble r = sqrt(x * x + y * y);\n\t\tans = max(ans, brightness(a, r));\n\t}\n\tprintf(\"%.4lf\\n\", ans);\n}\nint main() {\n\tint t;\n\tscanf(\"%d\", &t);\n\tfor (int i = 1; i <= t; i++) {\n\t\tsolve();\n\t}\n\treturn 0;\n}\n```\n\n\u4ee3\u7801\u4e2d\u7684 $t$ \u5c31\u662f\u679a\u4e3e\u591a\u5c11\u4e2a\u70b9\uff0c\u5f00\u5230 $7500$ \u5c31\u80fd\u8fc7\u3002",
        "postTime": 1630387350,
        "uid": 448887,
        "name": "cancan123456",
        "ccfLevel": 0,
        "title": "P4371 \u9898\u89e3"
    }
]
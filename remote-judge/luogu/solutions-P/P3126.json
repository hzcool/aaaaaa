[
    {
        "content": "\u601d\u8def\u548c\u5176\u5b83\u9898\u89e3\u5927\u81f4\u76f8\u540c\uff0c\u672c\u9898\u89e3\u4e3b\u8981\u662f\u8be6\u7ec6\u8bf4\u660e\u72b6\u6001\u8f6c\u79fb\u65b9\u5f0f\u4ee5\u53ca\u548c\u5176\u5b83\u9898\u89e3\u4e0d\u540c\u7684\u6eda\u52a8\u6570\u7ec4\u65b9\u5f0f\u3002\n\n### \u603b\u4f53\u601d\u8def\n\n\u56e0\u4e3a\u662f\u56de\u6587\u4e32\uff0c\u6240\u4ee5\u4e0d\u5982\u4ece\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u540c\u65f6\u5411\u4e2d\u95f4\u8d70\uff0c\u6bcf\u4e00\u6b65\u5fc5\u987b\u8d70\u5b57\u6bcd\u76f8\u540c\u7684\u683c\u5b50\uff0c\u6700\u540e\u5230\u4e2d\u95f4\u6c47\u5408\u5c31\u53ef\u4ee5\u5f97\u5230\u65b9\u6848\u6570\u4e86\u3002\n\n\u5982\u679c\u5206\u522b\u679a\u4e3e\u4e24\u4e2a\u70b9\u7684\u5750\u6807\u5219\u662fO(n^4)\u7684\uff0c\u4f1a\u8d85\u65f6\uff0c\u4f46\u53ef\u4ee5\u770b\u51fa\u6b65\u6570\u76f8\u540c\u65f6\u4e24\u4e2a\u70b9\u7684\u6a2a\u7eb5\u5750\u6807\u548c\u6709\u4e00\u5b9a\u89c4\u5f8b\uff0c\u5206\u522b\u4e3a2+step\u548c2n-step\uff0c\u56e0\u6b64\u53ea\u8981\u679a\u4e3e\u6b65\u6570\u548c\u4e24\u70b9\u7eb5\uff08\u6a2a\uff09\u5750\u6807\u5373\u53ef\u3002\n\n### \u72b6\u6001\u8868\u793a\n\nf(i,j,k)\u8868\u793a:\n\n- \u8d70\u4e86i\u6b65\n- \u5de6\u4e0a\u7684\u70b9\u7eb5\u5750\u6807\u4e3aj\n- \u53f3\u4e0b\u7684\u70b9\u7eb5\u5750\u6807\u4e3ak\n\n\u7684\u65b9\u6848\u603b\u6570\n\n### \u72b6\u6001\u8f6c\u79fb\n\n\u56e0\u4e3a\u53ea\u6709\u4e24\u70b9\u5b57\u6bcd\u76f8\u540c\u65f6\u624d\u80fd\u8d70\uff0c\u56e0\u6b64\u5f53\u4e24\u70b9\u5b57\u6bcd\u4e0d\u540c\u65f6\u65b9\u6848\u6570\u4e3a0\uff0c\u5426\u5219\u4e3a\u6bcf\u4e2a\u53ef\u4ee5\u8d70\u8fc7\u6765\u7684\u72b6\u6001\u7684\u65b9\u6848\u6570\u4e4b\u548c\uff0c\u5373\uff1a\n\n\u5f53a[j][i+2-j]==a[k][n*2-i-k]\u65f6f(i,j,k)=f(i-1,j,k)+f(i-1,j-1,k)+f(i-1,j,k+1)+f(i-1,j-1,k+1)\uff0c\u5426\u5219f(i,j,k)=0\n\n### \u7a7a\u95f4\u4f18\u5316\n\n\u8fd9\u9898\u6570\u636e\u8303\u56f4\u5230\u4e86500\uff0c\u5982\u679c\u5f00500^3\u7684\u6570\u7ec4\u4f1aMLE\n\n\u8003\u8651\u5230\u6bcf\u6b21\u72b6\u6001\u8f6c\u79fb\u53ea\u9700\u7528\u5230f(i-1,j,k)\uff0c\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u7a7a\u95f4\n\n\u56e0\u4e3a\u6bcf\u6b21\u8f6c\u79fb\u53ea\u4f1a\u7528\u5230j\u3001j-1\u3001k\u3001k+1\uff0c\u9006\u5e8f\u679a\u4e3ej\u3001\u6b63\u5e8f\u679a\u4e3ek\u5373\u53ef\u907f\u514d\u8986\u76d6\u8fd8\u672a\u8f6c\u79fb\u7684\u72b6\u6001\u3002\n\n### \u4ee3\u7801\n\n```\n#include <iostream>\n\nconst int M=1000000007; //\u8bb0\u5f97\u53d6\u6a21\n\nusing namespace std;\n\nchar a[510][510];\nint n,f[510][510],ans;\n\nint main()\n{\n    int i,j,k;\n    \n    cin>>n;\n    \n    for (i=1;i<=n;++i)\n    {\n        for (j=1;j<=n;++j)\n        {\n            cin>>a[i][j];\n        }\n    }\n    \n    if (a[1][1]==a[n][n]) //\u82e5\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u4e0d\u540c\u5219\u76f4\u63a5\u8f93\u51fa0\n    {\n        f[1][n]=1; //\u521d\u59cb\u5316\u72b6\u6001\uff0c\u4e24\u4e2a\u70b9\u5206\u522b\u5728\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u65f6\u65b9\u6848\u6570\u4e3a1\n        for (i=1;i<=n-1;++i)\n        {\n            for (j=i+1;j>=1;--j) //\u9006\u5e8f\u679a\u4e3ej\n            {\n                for (k=n-i;k<=n;++k) //\u6b63\u5e8f\u679a\u4e3ek\n                {\n                    if (a[j][i+2-j]==a[k][n*2-i-k]) //\u53ea\u6709\u4e24\u70b9\u6240\u5728\u5b57\u6bcd\u76f8\u540c\u65f6\u624d\u80fd\u8f6c\u79fb\n                    {\n                        f[j][k]=(1ll*f[j][k]+f[j-1][k]+f[j][k+1]+f[j-1][k+1])%M; //1ll*\u662f\u4e3a\u4e86\u907f\u514d\u7206int\uff0c\u628a\u6570\u7ec4\u5f00\u4e3along long\u4e5f\u53ef\u4ee5\n                    }\n                    else\n                    {\n                        f[j][k]=0;\n                    }\n                }\n            }\n        }\n        \n        for (i=1;i<=n;++i)\n        {\n            ans=(ans+f[i][i])%M; //\u53ea\u6709\u6700\u540e\u5230\u540c\u4e00\u70b9\u624d\u8ba1\u5165\u7b54\u6848\n        }\n    }\n    \n    cout<<ans;\n    \n    return 0;\n}\n```",
        "postTime": 1532060593,
        "uid": 49742,
        "name": "ouuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    },
    {
        "content": "## \u9898\u89e3-P3126 USACO15OPEN \u56de\u6587\u7684\u8def\u5f84\n\n### \u53cc\u500d\u7ecf\u9a8c:[\u6233\u8fd9\u91cc](https://www.luogu.org/problemnew/show/CF570E)\n\n### \u9898\u76ee\u610f\u601d\uff1a\n\u8ba9\u4f60\u6c42\u51fa\u56fe\u4e2d\u6709\u591a\u5c11\u6761\u56de\u6587\u8def\u5f84\u3002\n\n### $DP$\n* \u72b6\u6001\uff1a$f[s][i][j][k][p]$\u8868\u793a\u8d70\u4e86$s$\u6b65\uff0c$A$\u5728$(i,j)$\u4f4d\u7f6e\uff0c$B$\u5728$(k,p)$\u4f4d\u7f6e\u7684\u65b9\u6848\u6570\u3002\n\n\u4f46\u662f\u663e\u7136\u8fd9\u6837\u8bbe\u8ba1\u72b6\u6001\u4f1a\u65f6\u7a7a\u53cc\u7206\uff0c\u4e8e\u662f\u6211\u4eec\u8981\u4f18\u5316\u72b6\u6001\n\n* \u4f18\u79c0\u7684\u72b6\u6001\uff1a$f[s][x][y]$\u8868\u793a\u8d70\u4e86$s$\u6b65\uff0c$A$\u5728$x$\u884c\uff0c$B$\u5728$y$\u884c\u7684\u65b9\u6848\u6570\uff08\u7136\u540e\u518d\u628a$s$\u6eda\u6389\uff09\n\n**\u4e3a\u4ec0\u4e48\u8fd9\u6837\u7684\u8bbe\u8ba1\u662f\u6b63\u786e\u7684\u7684\u5462\uff1f**\n\n\u56e0\u4e3a\u6211\u4eec\u77e5\u9053\u4e86\u5728\u54ea\u4e00\u884c\u4ee5\u53ca\u8d70\u7684\u6b65\u6570\u662f\u53ef\u4ee5\u8ba1\u7b97\u51fa\u5728\u54ea\u4e00\u5217\u7684\u3002\n\n* \u8f6c\u79fb\uff1a$f[v][i][j]=(f[v][i][j]+$\n$f[v$^$1][i-1][j+1]+f[v$^$1][i-1][j]+f[v$^$1][i][j+1]+f[v$^$1][i][j])$\n\n\u8fd9\u4e2a\u8f6c\u79fb\u5f88\u597d\u60f3\u7684\u5427\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u4ece\u4e0a/\u4e0b-\u5de6/\u53f3\u8f6c\u79fb\u8fc7\u6765\n\n* \u7edf\u8ba1\u7b54\u6848\uff1a\n\n\u56e0\u4e3a$(n+m)$&$1$\u4e0d\u4e00\u5b9a\u4e3a$0$\u6240\u4ee5\u8981\u5206\u7c7b\u8ba8\u8bba\uff0c\n\n\u5bf9\u4e8e$(n+m)$\u4e3a\u5947\u6570\u7684\u60c5\u51b5\u7b54\u6848\u4e3a $\u2211(f[v][i][i]+f[v][i][i+1])$\n\n\u5426\u5219\u4e3a$\u2211(f[v][i][i])$\n\n",
        "postTime": 1563954115,
        "uid": 172612,
        "name": "\u7c73\u5947\u5947\u7c73",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P3126) [\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.com.cn/problem/CF570E)\n\n\u8fd9\u9898\u5176\u5b9e\u53eb\u56de\u6587\u8def\u5f84\u2026\u2026\n\n---\n\n### **\u9898\u610f\uff1a**\n\n\u6709\u4e2a\u4eba\u5206\u522b\u4ece\u5de6\u4e0a\u5f80\u53f3\u4e0b\u8d70\uff0c\u95ee\u6709\u591a\u5c11\u6761\u8def\u7ecf\u662f\u56de\u6587\u7684\u3002\n\n---\n### **\u5206\u6790**\n\n\u8fd9\u79cd\u9898\u662f\u591a\u8fdb\u7a0b\u52a8\u89c4\u9898\u3002\uff08[\u540c\u7c7b\u9898](https://www.luogu.com.cn/paste/9zlg23m6)\uff09\n\n\u591a\u8fdb\u7a0b\u52a8\u89c4\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u6709\u591a\u4e2a\u540c\u65f6\u8fdb\u884c\u7684\u52a8\u89c4\u3002\n\n\u50cf\u8fd9\u9898\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u6709\u4e24\u4e2a\u4eba\u540c\u65f6\u4ece\u5de6\u4e0a\u548c\u53f3\u4e0b\u5f00\u59cb\uff0c\u5411\u4e2d\u95f4\u96c6\u5408\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u8d70\u6cd5\uff0c\u4e24\u4eba\u6240\u7ecf\u8fc7\u7684\u8def\u5f84\u6784\u6210\u7684\u5b57\u7b26\u4e32\uff0c\u6709\u591a\u5c11\u79cd\u8d70\u6cd5\u662f\u4e00\u6837\u7684\u3002\n\n---\n\n### **\u52a8\u89c4\u5206\u6790\uff1a**\n\n**1\u7ea7\u7b97\u6cd5**\n\n\u6570\u7ec4\uff1a $f_{s,x1,y1,x2,y2}$ \u8868\u793a\u8d70\u4e86s\u6b65\uff0c\u4ece\u5de6\u4e0a\u548c\u53f3\u4e0a\u6765\u7684\u4eba\u7684\u5750\u6807\u5206\u522b\u4e3a $x1,y1$ \u548c $x2,y2$ \u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\uff1a \n$$f_{s,x1,y1,x2,y2}=f_{s-1,x1-1,y1,x2+1,y2}+f_{s-1,x1,y1-1,x2,y2+1}+f_{s-1,x1-1,y1,x2,y2-1}+f_{s-1,x1,y1-1,x2+1,y2}$$\n\n\u5faa\u73af\uff1a\u679a\u4e3e $s,x1,x2,y1,y2$ \u3002\n\n\u590d\u6742\u5ea6\uff1a\u65f6\u95f4 $O(n^5)$ \uff0c\u7a7a\u95f4 $O(n^5)$ \uff0c\u660e\u663e\u65f6\u3001\u7a7a\u53cc\u7206\u3002\n\n---\n**2\u7ea7\u7b97\u6cd5**\n\n\u6570\u7ec4\uff1a $f_{s,x1,x2}$ \u8868\u793a\u8d70\u4e86s\u6b65\uff0c\u4ece\u5de6\u4e0a\u548c\u53f3\u4e0a\u6765\u7684\u4eba\u7684\u884c\u5750\u6807\u5206\u522b\u4e3a $x1$ \u548c $x2$ \u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\uff1a \n$$f_{s,x1,x2}=f_{s-1,x1-1,x2+1}+f_{s-1,x1-1,x2}+f_{s-1,x1,x2+1}+f_{s,x1,x2}$$\n\n\u5faa\u73af\uff1a\u679a\u4e3e $s,x1,x2$ \u3002\n\n\u4f18\u5316\u6765\u6e90\uff1a\u53ef\u4ee5\u6839\u636e $s,x1,x2$ \u63a8\u51fa $y1$ \u548c $y2$ \u3002\n\n\u590d\u6742\u5ea6\uff1a\u65f6\u95f4 $O(n^3)$ \uff0c\u7a7a\u95f4 $O(n^3)$ \uff0c\u65f6\u95f4\u52c9\u5f3a\u8fc7\uff0c\u7a7a\u95f4\u4f1a\u7206\u3002\n\n---\n\n**3\u7ea7\u7b97\u6cd5**\n\n\u6570\u7ec4\uff1a $f_{x1,x2}$ \u8868\u793a\u4ece\u5de6\u4e0a\u548c\u53f3\u4e0a\u6765\u7684\u4eba\u7684\u884c\u5750\u6807\u5206\u522b\u4e3a $x1$ \u548c $x2$ \u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\uff1a \n$$f_{x1,x2}=f_{x1-1,x2+1}+f_{x1-1,x2}+f_{x1,x2+1}+f_{x1-1,x2+1}$$\n\n\u5faa\u73af\uff1a\u679a\u4e3e $s,x1$ \uff08\u9006\u5e8f\uff09 $,x2$ \u3002\n\n\u4f18\u5316\u6765\u6e90\uff1a\u53ef\u4ee5\u6839\u636e\u8f6c\u79fb\u65b9\u7a0b\u628a $s$ \u8fd9\u7ef4\u538b\u4e86\u3002\n\n\u590d\u6742\u5ea6\uff1a\u65f6\u95f4 $O(n^3)$ \uff0c\u7a7a\u95f4 $O(n^2)$ \uff0c\u65f6\u3001\u7a7a\u53cc\u8fc7\u3002\n\n---\n\n**\u7ec6\u8282\u89c1\u4ee3\u7801\u2193**\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int mod=1e9+7;\nchar a[555][555];\nint n,f[555][555],ans;\nint main()\n{\n    cin>>n;\n    for(int i=1;i<=n;i++)\n    \tfor(int o=1;o<=n;o++)\n    \t\tcin>>a[i][o];//\u8f93\u5165\u5b57\u7b26\u77e9\u9635\n    if(a[1][1]==a[n][n])//\u5c0f\u4f18\u5316\uff0c\u5934\u5c3e\u4e0d\u4e00\u6837\u76f4\u63a5\u8f93\u51fa0\n    {\n        f[1][n]=1;//\u521d\u59cb\u5316\uff0c\u5728\u8d77\u70b9\u65f6\u67091\u6761\u65b9\u6848\n        for(int i=1;i<=n-1;i++)//\u679a\u4e3e\u8d70\u4e86\u591a\u5c11\u6b65\n            for(int o=i+1;o>=1;o--)//\u5de6\u4e0a\u89d2\u6765\u7684\u884c\u5750\u6807\n                for(int u=n-i;u<=n;u++)//\u53f3\u4e0b\u89d2\u6765\u7684\u884c\u5750\u6807\n                    if (a[o][i+2-o]==a[u][n*2-i-u])//\u4e24\u8fb9\u7684\u5b57\u7b26\u4e00\u6837\n                        f[o][u]=(1ll*f[o][u]+f[o-1][u]+f[o][u+1]+f[o-1][u+1])%mod;//\u8f6c\u79fb\u65b9\u7a0b\u548c\u5b9a\u4e49\u89c1\u4e0a\u6587\u89e3\u91ca\uff0c1ll\u662f\u9632\u7206\u7684\uff0c\u8fd8\u6709\u522b\u5fd8\u4e86\u53d6\u6a21\n                    else\n                        f[o][u]=0;//\u4e0d\u4e00\u6837\u76f4\u63a5\u53d60\n        for(int i=1;i<=n;i++)//\u7ed3\u675f\u540e\u8981\u8d70\u5728\u4e00\u8d77\n            ans=(ans+f[i][i])%mod;\n    }\n    cout<<ans<<endl;\n    return 0;\n}\n```\n",
        "postTime": 1629021207,
        "uid": 340502,
        "name": "MattL",
        "ccfLevel": 5,
        "title": "P3126 \u9898\u89e3"
    },
    {
        "content": "\n\u601d\u8def\u4e0e\u5176\u5b83\u9898\u89e3\u5927\u81f4\u76f8\u540c,\u53ea\u662f\u4ece\u4e2d\u95f4\uff08\u5bf9\u89d2\u7ebf\uff09\u5f80\u4e24\u5934\u8d70\n\n\u4ece(1,n)\u5230(n,1)\u753b\u4e00\u6761\u5bf9\u89d2\u7ebf\uff0c\u5bf9\u89d2\u7ebf\u4e0a\u7684\u70b9\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c\u4e3an+1\uff0c \n\n\u8bbe\u5bf9\u89d2\u7ebf\u4e0a\u5de6\u4e0a\u7684\u70b9\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c\u4e3ak1 \n\n\u8bbe\u5bf9\u89d2\u7ebf\u4e0a\u53f3\u4e0b\u7684\u70b9\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c\u4e3ak2\n\n\u90a3\u4e48\u56de\u6587\u4fbf\u662f\u8981\u6c42\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c(n+1)-k1=k2-(n+1) \u7684\u67d0\u70b9\u5bf9\u5b57\u6bcd\u76f8\u540c\u4e86\n\n\u8f6c\u5ff5\uff0ck1=(n+1)-x,k2=(n+1)+x, x\u5c5e\u4e8e[1,n-1]\n\u4fbf\u6709\u5982\u4e0adp\u4e86 \n\n\u539f\u8c05\u8fd9\u5947\u5f02~~\u62bd\u98ce~~\u7684\u4ee3\u7801\u541b\n\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,s,t,k1,k2;\nlong long f[2][505][505];\nchar c[505][505];\n#define mod 1000000007\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\tscanf(\"%s\",c[i]+1);\n\tfor(int i=1;i<=n;i++)\n\tf[(n+1)%2][i][i]=1;//\u53ea\u957f\u4e00\u4e2a\u5b57\u6bcd\u65f6\u7684\u521d\u59cb\u5316\n\tk1=n;k2=n+2;//\u5750\u6807\u548c\n\tfor( ;k1>=2;k1--,k2++)\n\t{\n\t\tmemset(f[k1%2],0,sizeof(f[k1%2])); \n\t\tfor(int i=1;i<=k1-1;i++)//k1\u7684\u6a2a\u5750\u6807\n\t\tfor(int j=k2-n;j<=n;j++)//k2\u7684\u6a2a\u5750\u6807\n\t\tif(c[i][k1-i]==c[j][k2-j])\n\t\tf[k1%2][i][j]=(f[(k1+1)%2][i][j-1]+f[(k1+1)%2][i][j]+f[(k1+1)%2][i+1][j-1]+f[(k1+1)%2][i+1][j])%mod;\n\t}\n\tcout<<f[0][1][n]<<endl;//(1,1),(n,n)\u5750\u6807\u548c%2\u81ea\u7136\u4e3a0\n\treturn 0;\n}\n\n```",
        "postTime": 1533990386,
        "uid": 36626,
        "name": "0123a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    },
    {
        "content": "### Part 1 \u7b97\u6cd5\u5206\u6790\n\n\u5750\u6807\u7c7b DP \u4e00\u9053\n\n\u9996\u5148\uff0c\u76f4\u63a5\u53ef\u4ee5\u60f3\u5230\u6734\u7d20\u7b97\u6cd5\uff1a\n\n\u66b4\u529b\u679a\u4e3e\u6bcf\u4e00\u6761\u8def\u5f84\uff0c\u7136\u540e\u4e00\u6761\u4e00\u6761\u5730\u5224\u65ad\u662f\u5426\u56de\u6587\uff0c\u53ef\u662f\u5728\u4e00\u5f20 $500\\times 500$ \u7684\u5730\u56fe\u4e0a\uff0c\u4ece $(1,1)$ \u5230 $(500,500)$ \u5171 896,346,411,204,565,376 \u79cd\u8def\u5f84\uff0c\u53ef\u4ee5\u660e\u663e\u770b\u51fa\u8fd9\u79cd\u7b97\u6cd5\u662f\u4e0d\u53ef\u53d6\u7684\uff1b\n\n\u6240\u4ee5\u6211\u4eec\u5c1d\u8bd5 DP:\n\n1\uff0c\u56e0\u4e3a\u8981\u4f7f\u6700\u540e\u7684\u8def\u5f84\u56de\u6587\uff0c\u6240\u4ee5\u5982\u679c $(1,1)$ \u548c $(n,n)$ \u7684\u5b57\u7b26\u4e0d\u540c\uff0c\u5219\u76f4\u63a5\u8f93\u51fa 0 \uff0c\u5e76\u7ed3\u675f\u7a0b\u5e8f\uff1b\n\n2\uff0c\u8def\u5f84\u957f\u5ea6\u4e3a $2\\times n-1$ ,\u5fc5\u5b9a\u4e3a\u5947\u6570\uff0c\u6240\u4ee5\u5176\u4e2d\u95f4\u70b9\u4e3a\u8fd9\u5f20\u56fe\u7684\u4e00\u6761\u5bf9\u89d2\u7ebf\uff08\u975e\u4ece $(1,1)$ \u5230 $(n,n)$\uff09\uff1b\n\n3\uff0c\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4ece\u4e0a\u8fb9\u548c\u4e0b\u8fb9\u4e00\u8d77\u641c\uff0c\u4e00\u6837\u5219\u53ef\u4ee5\u72b6\u6001\u8f6c\u79fb\uff0c\u5426\u5219\u7b49\u4e8e 0\u3002\n\n### Part 2 \u95ee\u9898\u89e3\u51b3\n\n\u5f88\u5bb9\u6613\u53ef\u4ee5\u63a8\u51fa\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n```cpp\nf[j][k]=(f[j][k]+f[j-1][k]+f[j][k+1]+f[j-1][k+1])%mod;\n```\n$f(j,k)$ \u8868\u793a\u5de6\u4e0a\u7684\u70b9\u7eb5\u5750\u6807\u4e3a $j$ \u53f3\u4e0b\u7684\u70b9\u7eb5\u5750\u6807\u4e3a $k$ \u7684\u65b9\u6848\u603b\u6570\u3002\n\n\uff08\u8fd9\u91cc\u7701\u7565\u4e86\u8d70 $i$ \u6b65\uff09\n\n### Part 3 CODE\n\n```cpp\n#include<iostream>\n#include<math.h>\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#include<algorithm>\n#define INF 0x7fffffff/2\nusing namespace std;\nint n,m;\nchar map[505][505];\nlong long f[505][505]; // \u4e0d\u5f00\u9f99\u9f99\u89c1\u7956\u5b97 \nlong long mod=1000000007;\nlong long ans=0; \nint main() {\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1; i<=n; i++) {\n\t\tfor(int j=1; j<=m; j++) {\n\t\t\tcin>>map[i][j];\n\t\t}\n\t}\n\tif(map[1][1]!=map[n][m]) { // \u7279\u5224 \n\t\tprintf(\"0\\n\");\n\t\treturn 0;\n\t}\n\tf[1][n]=1; // \u521d\u59cb\u5316 \n\tfor(int i=1; i<n; i++) { // \u679a\u4e3e\u6b65\u6570 \n\t\tfor(int j=i+1; j>=1; j--) { // \u9006\u5411\u679a\u4e3e \n\t\t\tfor(int k=n-i; k<=m; k++) { // \u6b63\u5411\u679a\u4e3e \n\t\t\t\tif(map[j][i+2-j]==map[k][2*n-i-k]) {\n\t\t\t\t\tf[j][k]=(f[j][k]+f[j-1][k]+f[j][k+1]+f[j-1][k+1])%mod; // \u522b\u5fd8\u4e86\u53d6 mod  \n\t\t\t\t} else f[j][k]=0;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1; i<=n; i++) ans=(ans+f[i][i])%mod; // \u53ea\u6709\u6700\u540e\u5230\u540c\u4e00\u4e2a\u70b9\u624d\u8bb0\u4f5c\u4e00\u7ec4\u7b54\u6848 \n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n\n\u81ea\u7ed9\u81ea\u8db3\uff0c\u4e30\u8863\u8db3\u98df\uff01\uff01\uff01\n\n2021.8.23 12:55 \u7b2c\u4e00\u6b21\u521d\u7a3f\u6210\uff1b\n\n2021.8.25 13.10 \u5b8c\u5584\u4e86\u6392\u7248\uff1b\n\n2021.8.25 17:00 \u518d\u6b21\u5b8c\u5584\u4e86\u6392\u7248\u3002",
        "postTime": 1629694632,
        "uid": 539041,
        "name": "Augen_stern",
        "ccfLevel": 7,
        "title": "P3126 [USACO15OPEN]Palindromic Paths G \u9898\u89e3"
    },
    {
        "content": "[P3126 [USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths](https://www.luogu.org/problemnew/show/P3126)\n\n\u770b\u5230\u8fd9\u9898\u9898\u89e3\u4e0d\u591a\uff0c\u849f\u84bb\u4fbf\u60f3\u66f4\u52a0\u901a\u4fd7\u6613\u61c2\u5730\u5206\u4eab\u4e00\u70b9\u81ea\u5df1\u7684\u5fc3\u5f97\uff0c\u6b22\u8fce\u5927\u4f6c\u6279\u8bc4\u6307\u6b63^_^\n\n\u50cf\u8fd9\u79cd\u68cb\u76d8\u5f62\u7684\u4e24\u8fb9\u540c\u65f6\u505a\u7684dp\u8fd8\u6709\n[P1006 \u4f20\u7eb8\u6761,](https://www.luogu.org/problemnew/show/P1006)\n[P1004 \u65b9\u683c\u53d6\u6570,](https://www.luogu.org/problemnew/show/P1004)\n[T35377 \u5927\u6559\u5ba4\u4e2d\u4f20\u7eb8\u6761](https://www.luogu.org/problemnew/show/T35377)\n\n## \u4e00\u3001\u601d\u8def\u6539\u8fdb\n\n\u5bf9\u4e8e\u8fd9\u79cd\u9898\u76ee\u6700\u66b4\u529b\u7684\u65b9\u6cd5\u65e0\u975e\u662f\u5206\u522b\u679a\u4e3e\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u4e24\u70b9\u5750\u6807\uff08**f[ i ][ j ][ k ][ l ]=f[ i-1 ][ j ][ k+1 ][ l ]+f[ i-1 ][ j ][ k ][ l+1 ]+f[ i ][ j-1 ][ k+1 ][ l ]+f[ i ][ j-1 ][ k ][ l+1 ]**\uff09\u4e00\u8d77\u5f80\u4e2d\u95f4\u8d70\uff0c\u5373\u5f53\u4e24\u4e2a\u70b9\u91cd\u5408\u65f6\u4fbf\u6709\u4e86\u8def\u5f84\u2014\u2014O\uff08n^4\uff09\uff0c\u50cf\u8fd9\u79cd\u6570\u636e\u8f83\u5927\u7684\u9898\u4f1a\u7206\n\n\u4e8e\u662f\u4fbf\u6709\u4e86\u65b0\u7684\u601d\u8def\uff0c**\u7531\u4e8e\u4e24\u70b9\u662f\u4e00\u8d77\u8d70\u7684\uff0c\u6b65\u6570\u76f8\u540c\uff0c\u6240\u4ee5\u53ef\u4ee5\u679a\u4e3e\u6b65\u6570\uff0c\u53c8\u56e0\u4e3a\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c\u7b49\u4e8e\u6240\u8d70\u8def\u5f84\u957f+1\uff08\u6a2a\u7eb5\u5750\u6807\u4f1a\u91cd\u5408\u4e00\u70b9\uff0c\u53ef\u4ee5\u770b\u4e0b\u56fe\u7406\u89e3\uff09**,\u6240\u4ee5\u53ea\u9700\u679a\u4e3e\u4e24\u70b9\u7684\u6a2a\u5750\u6807\uff08j\uff0ck\uff09\u5c31\u53ef\u4ee5\u6c42\u51fa\u4e24\u70b9\u7684\u7eb5\u5750\u6807\n\n|  | 1 |2  | 3 | 4 |5  |\n| -----------: | -----------: | -----------: | -----------: | -----------: | -----------: |\n| 1 | \u5de6\u4e0a\u89d2 |  |  |  |E|\n| 2 |  |  |  | D |  |\n| 3 |  |  |C  |  |  |\n| 4 |  |B |  |  |  |\n| 5 |A  |  |  |  | \u53f3\u4e0b\u89d2 |\n\ni\u8868\u793a\u6b65\u6570\uff08\u6ce8\uff1a**\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u53ea\u6709\u4e00\u79cd\u8d70\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u7b2c\u4e8c\u6b65\u5f00\u59cb\u8d70\uff0c\u53c8\u56e0\u4e3a\u6a2a\u7eb5\u5750\u6807\u91cd\u5408\u4e00\u70b9\uff0c\u4e3a\u4e86\u4f7f\u6a2a\u5750\u6807+\u7eb5\u5750\u6807=i\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece3\u5f00\u59cb\u679a\u4e3e**\uff09\n\n\u4e0a\u56fe\u5b57\u6bcd\u662f\u8def\u5f84\u957f\u4e3a5\uff0ci\uff08\u6240\u679a\u4e3e\u7684\u6b65\u6570\uff09\u4e3a5+1=6\u7684\u60c5\u51b5\n\n\u8bbej\u4e3a\u5de6\u8fb9\u70b9\u7684\u6a2a\u5750\u6807\uff08\u7eb5\u5750\u6807\u4e3ai-j\uff09\uff0c**k\u4e3a\u53f3\u8fb9\u70b9\u6240\u8d70\u8def\u5f84\u7684\u7ad6\u76f4\u957f\u3010\u5982\u4e0a\u56fe\u70b9A\uff0c\u679a\u4e3e\u5230\u5b83\u65f6k\u4e3a1\uff0c\u6a2a\u5750\u6807\u4e3an-(i-k)+1=n-i+k+1=5-6+1+1=1\uff0c\u7eb5\u5750\u6807\u4e3an-k+1=5-1+1=5\u3011**\n\n\u5373f\uff08i,j,k\uff09=f\uff08i-1,j,k\uff09+f\uff08i-1,j-1,k\uff09+f\uff08i-1,j,k-1\uff09+f\uff08i-1,j-1,k-1\uff09\u3010j-1\uff0c\u800ci\u4e0d\u53d8\uff0c\u8bf4\u660e\u70b9\u7684\u7eb5\u5750\u6807+1\uff0c\u5176\u5b9e\u8fd9\u4e2a\u5f0f\u5b50\u4e0e\u4e0a\u9762\u66b4\u529b\u7684\u5f0f\u5b50\u662f\u4e00\u6837\u7684\u3011\n\n## \u4e8c\u3001\u7a7a\u95f4\u4f18\u5316\n\n\u7136\u800c\uff0c\u8fd9\u9898\u6570\u636e\u8303\u56f4\u5230\u4e86500\uff0c\u5982\u679c\u5f00500^3\u7684\u6570\u7ec4\u4f1aMLE\uff0c\u8003\u8651\u5230\u6bcf\u6b21\u72b6\u6001\u8f6c\u79fb\u53ea\u9700\u7528\u5230f(i-1,j,k)\uff0c\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u7a7a\u95f4\n\n\u9006\u5e8f\u679a\u4e3ej\u3001k\u3010**f[j][k]=f[j][k]+f[j-1][k-1]+f[j-1][k]+f[j][k-1]\u7b49\u5f0f\u5de6\u4fa7\u6b65\u6570\u4e3ai\uff0c\u800c\u53f3\u4fa7\u5176\u5b9e\u662f\u4e0a\u6b21\u679a\u4e3e\u7684\u72b6\u6001\uff0c\u6b65\u6570\u4e3ai-1**\u3011\uff08\u4e0e01\u80cc\u5305\u7684\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u540c\u7406\uff09\u5373\u53ef\u907f\u514d\u8986\u76d6\u8fd8\u672a\u8f6c\u79fb\u7684\u72b6\u6001\u3002\n\n## \u4e09\u3001\u4ee3\u7801\n\n\u53ea\u6709\u4e24\u70b9\u5b57\u6bcd\u76f8\u540c\u65f6\u624d\u80fd\u8d70\uff0c\u56e0\u6b64\u5f53\u4e24\u70b9\u5b57\u6bcd\u4e0d\u540c\u65f6\u65b9\u6848\u6570\u4e3a0\uff0c\u5426\u5219\u4e3a\u6bcf\u4e2a\u53ef\u4ee5\u8d70\u8fc7\u6765\u7684\u72b6\u6001\u7684\u65b9\u6848\u6570\u4e4b\u548c\n\n\u5177\u4f53\u7ec6\u8282\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u8fdb\u4e00\u6b65\u7406\u89e3\n```cpp\n#include<iostream>\n#define rint register int\nusing namespace std;\nchar a[501][501];\nint n;\nlong long f[501][501],ans;\nint main() {\n    cin>>n;\n    for (int i=1; i<=n; i++)\n        for (int j=1; j<=n; j++)\n            cin>>a[i][j];\n    if (a[1][1]!=a[n][n]) {\n        cout<<0;\n        return 0;\n    }//\u5982\u679c\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u5b57\u6bcd\u4e0d\u540c\u5219\u65e0\u89e3\n    f[1][1]=1;//\u5f53\u4e24\u70b9\u5206\u522b\u5904\u4e8e\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u65f6\u65b9\u6848\u4e3a1\n    for (rint i=3; i<=n+1; i++)\n        for (rint j=i-1; j>=1; j--)\n            for (rint k=i-1; k>=1; k--) {\n                if (a[j][i-j]==a[n-i+k+1][n-k+1])//\uff08\u7528j\uff0ck\u5206\u522b\u6c42\u51fa\u6240\u5bf9\u5e94\u7684\u6a2a\u7eb5\u5750\u6807\uff09\u6b64\u4e24\u70b9\u5b57\u6bcd\u662f\u5426\u76f8\u540c\uff1f\n                    f[j][k]=(f[j][k]+f[j-1][k-1]+f[j-1][k]+f[j][k-1])%1000000007;\n                else f[j][k]=0;//\u4e0d\u76f8\u540c\u5219\u65b9\u6848\u4e3a0\n            }\n    for (int i=1; i<=n; i++)//\u7edf\u8ba1\u6240\u6709\u65b9\u6848\u6570\n        ans=(ans+f[i][i])%1000000007;//\u5f53j=k\u8bf4\u660e\u4e24\u70b9\u91cd\u5408\n    cout<<ans;\n}\n```\n",
        "postTime": 1554471057,
        "uid": 68706,
        "name": "Randolph\u3001",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    },
    {
        "content": "https://li-mi.github.io/2017/06/02/Usaco2015-Open-Gold-Palindromic-Paths/\n\n\u54c7\u54c7\u54c7\u672c\u4eba\u849f\u84bb\u505a\u4e86\u597d\u4e45\u5176\u5b9e\u4e0d\u96be\u3002\u3002\n\nn=500\u3002\u3002\u597d\u50cf\u53ea\u7528O(n^3)\u7684\u65b9\u6cd5\u53ef\u4ee5\u8fc7\u3002\u3002\n\n\u90a3\u5c31dp\u5427\uff0c\u4ece\uff081,1\uff09\u548c\uff08n,n\uff09\u540c\u65f6\u5411\u4e2d\u95f4\u8d70\uff08lz\u7684\u7b2c\u4e00\u53cd\u5e94\u662f\u53cc\u5411bfs\uff0c\u8d85\u65f6\uff0c\u6539\u6210\u4ece\u4e24\u5934\u7684dp\uff09\n\n\u72b6\u6001\u5927\u6982\u5c31\u662fdp\uff08i,j,k,l\uff09\uff0c\u8868\u793a\u8d70\u5230\uff08i,j\uff09\u548c\uff08k,l\uff09\u65f6\u7684\u65b9\u6848\u6570\uff0c\u8f6c\u79fb\u2193\n\ndp[i][j][k][l]=dp[i-1][j][k+1][l]+dp[i-1][j][k][l+1]+dp[i][j-1][k+1][l]+dp[i][j-1][k][l+1]\n\n\u4f46\u662f\u597d\u50cf\u4f1a\u8d85\u65f6\u8d85\u7a7a\u95f4\u3002\u3002\u72b6\u6001\u5f97\u4fee\u6539\u4e00\u4e0b\u2193\n\n\u65f6\u95f4\u4f18\u5316\uff1a\u65e2\u7136\u662f\u4ece\u4e24\u5934\u540c\u65f6\u8d70\uff0c\u53ef\u4ee5\u8bb0\u4e00\u4e0b\u8d70\u7684\u6b65\u6570\uff0c\u518d\u7559\u4e00\u4e2ai\u548ck\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u6837\u5c31\u53d8\u6210O(n^3)\u3002\n\ndp\uff08s,i,k\uff09\u50cf\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e86\u3002\u3002\n\nlz\u5728\u7f51\u4e0a\u770b\u5230\u4e86\u53e6\u4e00\u79cd\u72b6\u6001\u8bbe\u8ba1\u2193\n\ndp[i][j][k]\u8868\u793a\u5de6\u4e0a\u7ed3\u675f\u8282\u70b9\u662f\u7b2ci\u6761\u526f\u5bf9\u89d2\u7ebf\u4e0a\u7684\u7b2cj\u4e2a\u70b9\uff0c\u53f3\u4e0b\u7ed3\u675f\u8282\u70b9\u662f\u7b2cn\\*2-i\u6761\u526f\u5bf9\u89d2\u7ebf\u4e0a\u7684\u7b2ck\u4e2a\u70b9\uff0c\u6784\u6210\u56de\u6587\u7684\u65b9\u6848\u6570\u3002\uff08\u5f15\u7528\u5730\u5740\uff1ahttp://www.cnblogs.com/czllgzmzl/p/5645030.html\uff09\n\n\u5176\u5b9e\uff0c\u6211\u4e5f\u662f\u6309\u7167\u8fd9\u4f4d\u5927\u4f6c\u7684\u65b9\u6cd5\u505a\u7684\uff0c\u56e0\u4e3ak\u8868\u793a\u8d77\u6765\u7b80\u5355\u554a\uff08\u4f46\u4e5f\u6709\u9ebb\u70e6\u7684\u5730\u65b9\uff09\n\n\u8f6c\u79fb\u4e3adp[s][i][k]=dp[s-1][i-1][k-1]+dp[s-1][i-1][k]+dp[s-1][i][k-1]+dp[s-1][i][k]\n\n\u5b8c\u4e86\u5417\uff1f\n\n\u6709\u6ca1\u6709\u53d1\u73b0\u8981\u5f00500^3\u7684\u6570\u7ec4\uff0c\u7206\u7a7a\u95f4\u4e86\u3002\u3002\n\n\u7a7a\u95f4\u4f18\u5316\uff1adp\u6700\u5e38\u89c1\u7684\u7a7a\u95f4\u4f18\u5316\u2013>\u6eda\u52a8\u6570\u7ec4\uff08\u80fd\u72b6\u538b\u7684\u5927\u4f6c\u8bf7\u65e0\u89c6\u849f\u84bb\uff09\n\n\u7b2c\u4e00\u7ef4\u597d\u50cf\u53ea\u9700\u89812\u4e2a\uff08\u6bcf\u6b21\u53ea\u8ddf\u524d\u4e00\u6b21\u72b6\u6001\u6709\u5173\uff09\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u538b\u4e86\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst int MOD=1000000007;\nint n;\nLL dp[2][508][508],ans;\nchar a[508][508];\nbool now,pre;\nint main()\n{\n    cin>>n;\n    for(int i=1;i<=n;i++)    cin>>a[i]+1; \n    if(a[1][1]!=a[n][n]){\n        cout<<'0';\n        return 0;\n    }\n    now=1;pre=0;\n    dp[now][1][1]=1;\n    for(int step=3;step<=n+1;step++){//\u4ece\u7b2c\u4e8c\u6761\u526f\u5bf9\u89d2\u7ebf\u5230\u7b2cn+1\u6761\uff0c\u5c31\u662f\u8d70\u7684\u6b65\u6570\n        swap(now,pre);\n        for(int i=1;i<step;i++){\n            for(int k=1;k<step;k++){\n                if(a[i][step-i]==a[n-step+1+k][n-k+1])//\u7ec6\u5fc3\u5730\u63a8\u4e00\u4e0b\u53f3\u4e0b\u89d2\u70b9\u7684\u5750\u6807\uff0c\u5bb9\u6613\u9519\n                    dp[now][i][k]=(dp[pre][i-1][k-1]+dp[pre][i-1][k]+dp[pre][i][k-1]+dp[pre][i][k])%MOD;\n                else    dp[now][i][k]=0;//\u6eda\u52a8\u6570\u7ec4\u4e00\u5b9a\u8981\u6e05\u96f6\uff0c\u4e0d\u7136\u540e\u9762\u4f1a\u8bef\u7528\u524d\u9762\u7684\u503c\n            }\n        }\n    }\n    for(int i=1;i<=n;i++)    ans=(ans+dp[now][i][i])%MOD;\n    cout<<ans;\n    return 0;\n}\n```",
        "postTime": 1496456406,
        "uid": 15090,
        "name": "littleming",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    },
    {
        "content": "\u770b\u5230\u5f88\u591a\u9898\u89e3\u5341\u5206\u5e76\u6ca1\u6709\u4ecb\u7ecd\u6e05\u695a\uff0c\u6240\u4ee5\u6765\u5199\u4e00\u7bc7\u9898\u89e3\u3002\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P3126)\u3002\n\n\u8fd9\u9898\u5f88\u5bb9\u6613\u60f3\u51fa\u66b4\u529b\u5199\u6cd5\u72b6\u6001\u5b9a\u4e49\u5982\u4e0b\u3002\n\n> $dp_{j,k,x,y}$ \u8868\u793a\u4ece $(1,1)$ \u51fa\u53d1\u5230 $(j,k)$ \u548c\u4ece $(n,n)$ \u51fa\u53d1\u5230 $(x,y)$\u3002\n\n\u4f46\u662f\u5f88\u660e\u663e $500^4$ \u80af\u5b9a\u4f1a MLE \u6240\u4ee5\u9700\u8981\u4f18\u5316\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u5217\u6570 $k$ \u548c $y$ \u4f18\u5316\u6210\u6b65\u6570 $s$ \u6240\u4ee5\u5199\u6cd5\u5982\u4e0b\u3002\n\n> $dp_{s,i,j}$ \u8868\u793a\u4e24\u4e2a\u8d77\u70b9\u5206\u522b\u5728 $i$ \u884c\u548c $j$ \u884c\uff0c\u5171\u8d70\u4e86 $s$ \u6b65\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5217\u51fa DP \u5f0f\uff1a\n\n$$dp_{s,i,j} = dp_{s-1,i-1,j} + dp_{s-1,i,j + 1} + dp_{s-1,i-1,j+1} + dp_{s-1,i,j}$$\n\n\u4f46\u662f\u8fd8\u662f\u4f1a MLE\u3002\n\n\u6211\u4eec\u6709\u4e24\u79cd\u4f18\u5316\u65b9\u6cd5\u3002\n\n\u7b2c1\u79cd\uff1a\n\n\u89c2\u5bdf\u4e0a\u5f0f\uff0c\u7b2c\u4e00\u7ef4\u6b65\u6570\u53ef\u4ee5\u5229\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u3002\n\n\u7b2c2\u79cd\uff1a\n\n\u5012\u53d9\u679a\u4e3e $j$ \u8fd9\u6837\u6b65\u6570\u4e0d\u7528\u7b97\u3002\n\n\u5199\u5b8c DP \u5f0f\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u8f6c\u79fb\u6761\u4ef6\u3002\n\n\u6761\u4ef6\u5c31\u662f\u4e24\u4e2a\u70b9\u76f8\u4e0d\u76f8\u540c\u3002\n\n\u7b2c\u4e00\u4e2a\u70b9\u5341\u5206\u7b80\u5355\u5c31\u662f $(i,s-i)$\u3002\n\n\u7b2c\u4e8c\u4e2a\u70b9\u662f:\n\n$$(j,n-(s-(n-j))) = (j,n \\times 2 - s - j)$$\n\n\u6216\n\n$$(j,n \\times 2 - 1 - s - (j - 1) = (j,n \\times 2 - s - j)$$\n\n\u6240\u4ee5\u5f53 $str_{i,s-i}$ \u7b49\u4e8e $str_{j,n \\times 2 - s - j}$ \u65f6\u53ef\u4ee5\u8f6c\u79fb\u3002\n\n\u521d\u59cb\u5316\uff1a\n\n\u5f53 $str_{1,1}$ \u7b49\u4e8e $str_{n,n}$ \u65f6 $dp_{1,n} = 1$ \u5426\u5219\u76f4\u63a5\u8f93\u51fa $0$\u3002\n\n\u5c0f\u7ec6\u8282\uff1a\u7b54\u6848\u662f $\\sum\\limits_{i=1}^{n}dp_{i,i}$ \uff0c\u5982\u679c\u662f\u7528\u5012\u53d9\u679a\u4e3e\u90a3\u4e48\u6b65\u6570\u7684\u8303\u56f4\u662f $1 \\le i < n$\u3002\n\n\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86\uff0c\u4e0a\u9762\u5df2\u7ecf\u8bb2\u7684\u5f88\u6e05\u695a\u4e86\u3002",
        "postTime": 1677311942,
        "uid": 507374,
        "name": "feather_life",
        "ccfLevel": 0,
        "title": "P3126\u9898\u89e3"
    },
    {
        "content": "$1.$\u4ece$(1,1)$\u51fa\u53d1\u884c\u8d70$k$\u6b65\u540e\u843d\u70b9\u7684\u8f68\u8ff9\u4e3a\u4ee5$(1,1)$\u4e3a\u5de6\u4e0a\u9876\u70b9\uff0c\u8fb9\u957f\u4e3a$k+1$\u7684\u6b63\u65b9\u5f62\u7684\u5bf9\u89d2\u7ebf\u3002\n\n$2.$\u884c\u8d70$k$\u6b65\u540e\u843d\u70b9\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c\u4e3a$k+1$\uff0c\u56de\u6587\u5e8f\u5217\u4e2d\u5bf9\u79f0\u4e24\u70b9\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c\u7684\u548c\u4e3a$2\\times n+2$\u3002\n\n$3.$\u4ece\u5bf9\u89d2\u7ebf\u4e0a\u7684\u70b9\u51fa\u53d1\uff0c\u6bcf\u6b21\u5411\u5de6\u4e0a\u65b9\u548c\u53f3\u4e0b\u65b9\u5b57\u7b26\u76f8\u540c\u7684\u70b9\u884c\u8d70\uff0c\u6700\u7ec8\u5f97\u5230\u7684\u5e8f\u5217\u4e00\u5b9a\u662f\u56de\u6587\u5e8f\u5217\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u4ee4\u4ece\u5bf9\u89d2\u7ebf\u51fa\u53d1\uff0c\u5411\u5de6\u4e0a\u65b9\u6269\u5c55\u7684\u70b9\u4e3a$A(a,b)$\uff0c\u53f3\u4e0b\u65b9\u4e3a$B(c,d)$\u3002\n\n\u5b9a\u4e49$f[k][a][c]$\u4e3a$A$\u7684\u6a2a\u7eb5\u5750\u6807\u4e4b\u548c\u4e3a$k$\uff0c$A$\u7684\u6a2a\u5750\u6807\u4e3a$a$\uff0c$B$\u7684\u6a2a\u5750\u6807\u4e3a$c$\u3002\n\n\u5219$A$\u7684\u7eb5\u5750\u6807\u4e3a$b=k-a$\uff0c$B$\u7684\u7eb5\u5750\u6807\u4e3a$d=2\\times n+2-a-b-c$\u3002\n\n\u7531\u5bf9\u89d2\u7ebf\u5411\u4e24\u4e2a\u9876\u70b9\u8f6c\u79fb\u3002\n\n\u521d\u59cb\u5316$f[n+1][i][i]=1 \\ \\ \\ i\\in[1,n]$\n\n\u5982\u679c$ch(a,b)==ch(c,d)$\uff0c\u5219\u5b58\u5728$4$\u79cd\u8f6c\u79fb\u7684\u65b9\u6848\uff1a\n\n$(a+1,b)->(a,b)\\ \\ \\ \\ (c-1,d)->(c,d)$\n\n$(a+1,b)->(a,b)\\ \\ \\ \\ (c,d-1)->(c,d)$\n\n$(a,b+1)->(a,b)\\ \\ \\ \\ (c-1,d)->(c,d)$\n\n$(a,b+1)->(a,b)\\ \\ \\ \\ (c,d-1)->(c,d)$\n\n\u90a3\u4e48\u8f6c\u79fb\u65b9\u7a0b\u5c31\u5f88\u663e\u7136\u4e86\uff1a\n\n$f[k][a][c]+=f[k+1][a+1][c-1]$\n\n$f[k][a][c]+=f[k+1][a+1][c]$\n\n$f[k][a][c]+=f[k+1][a][c-1]$\n\n$f[k][a][c]+=f[k+1][a][c]$\n\n\u6700\u540e$f[2][1][n]$\u5373\u4e3a\u7b54\u6848\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n^3)$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6$O(\u8fc7\u4e0d\u4e86)$\n\n$n^3$\u7684\u7a7a\u95f4\u592a\u5927\u4e86\u5f00\u4e0d\u4e86\u600e\u4e48\u641e$\uff1f$\n\n\u6eda\u4e86\u5b83$!$\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define mod 1000000007\n#define maxn 505\nusing namespace std;\ninline int read(){\n\tchar ch=getchar();int s=0,w=1;\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){s=(s<<1)+(s<<3)+ch-48;ch=getchar();}\n\treturn s*w;\n}\nint n;\nchar xx[maxn][maxn];\nll f[2][maxn][maxn];\nint main(){\n\tfreopen(\"path.in\",\"r\",stdin);\n\tfreopen(\"path.out\",\"w\",stdout);\n\tn=read();\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tcin>>xx[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tf[(n+1)&1][i][i]=1;\n\t}\n\tfor(int K=n;K>=2;K--){\n\t\tint k=K&1;\n\t\tmemset(f[k],0,sizeof(f[k]));\n\t\tfor(int a=1;a<=n;a++){\n\t\t\tint b=K-a;\n\t\t\tif(b<=0) continue;\n\t\t\tfor(int c=1;c<=n;c++){\n\t\t\t\tint d=2*n+2-a-b-c;\n\t\t\t\tif(d<=0||d>n) continue;\n\t\t\t\tif(xx[a][b]==xx[c][d]){\n\t\t\t\t\tf[k][a][c]+=f[k^1][a+1][c-1];\n\t\t\t\t\tf[k][a][c]+=f[k^1][a+1][c];\n\t\t\t\t\tf[k][a][c]+=f[k^1][a][c-1];\n\t\t\t\t\tf[k][a][c]+=f[k^1][a][c];\n\t\t\t\t\tf[k][a][c]%=mod;\t\n\t\t\t\t}\t\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",f[0][1][n]);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1571905863,
        "uid": 111095,
        "name": "Epworth",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    },
    {
        "content": "\u7b2c\u4e00\u773c\u662f\u60f3\u5230\u4e86\u4e0a\u6b21\u7684\u7ebf\u6bb5\u6811\u4f18\u5316dp.\u540e\u6765\u4ed4\u7ec6\u4e00\u60f3\u66b4\u529b\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fc7\u3002\uff08\u6211\u6ca1\u60f3\u8fc7\u66f4\u597d\u7684\u590d\u6742\u5ea6\u7684dp\uff09\n\n\u53ef\u4ee5\u77e5\u9053\uff0c\u77e5\u9053\u4e86\u6b65\u6570\u3002\u5de6\u4e0a\u89d2\u8d70\u5230\u7684\u884c\u6570\uff0c\u53f3\u4e0b\u89d2\u8d70\u5230\u7684\u884c\u6570\u5c31\u53ef\u4ee5\u77e5\u9053\u4e24\u4e2a\u7684\u5750\u6807\uff0c\u90fd\u662f\u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u7684\uff1b\n\u4e8e\u662fO\uff08n^3\uff09\u7684dp\u5c31\u5f88\u663e\u7136\u4e86\uff0c\u5f53\u7136\u6570\u7ec4\u9700\u8981\u6eda\u5b58\u3002\uff08\u6211\u4ee3\u7801\u662f\u6309\u7167\u8fd9\u4e2a\u601d\u8def\u5199\u7684\uff09\n\n\u6211\u81ea\u5df1\u7684\u60f3\u6cd5\u4e00\u5f00\u59cb\u548c\u8fd9\u4e2a\u4e5f\u5927\u540c\u5c0f\u5f02\u3002\n\u6211\u7ed9\u6bcf\u4e2a\u70b9\u5bf9\u5e94\u8fc7\u53bb\u7684\u53ef\u80fd\u53ef\u4ee5\u5bf9\u5e94\u4e0a\u7684\u70b9\u90fd\u7f16\u4e86\u4e00\u4e0b\u53f7\uff08\u5c31\u662f\u4e00\u6761\u5bf9\u89d2\u7ebf\u6700\u591an\u4e2a\u7f16\u53f7\uff09\uff0c\u6240\u4ee5\u66f4\u65b0dp\u6570\u7ec4\u7684\u65f6\u5019\u4e0d\u9700\u8981\u679a\u4e3e\u56db\u4e2a\u5750\u6807\u3002\u5f53\u7136\u8fd9\u4e5f\u662f\u57fa\u4e8e\u786e\u5b9a\u6b65\u6570\uff0c\u4e24\u4e2a\u5750\u6807\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\uff0c\u5c31\u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u5750\u6807\u7684\u601d\u8def\u5427\u3002\n\n```cpp\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int maxn=505,mod=1e9+7;\nint n;\nchar a[maxn][maxn];\ninline void init(){\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++){\n\t\tscanf(\"%s\",a[i]+1);\n\t}\n}\nint dp[2][maxn][maxn],cur,ans;\ninline void pushup(int &x,int v){\n\t(x+=v)%=mod;\n}\ninline void solve(){\n\tdp[0][1][n]=1;\n\tfor (int i=1;i<=n;i++){\n\t\tmemset(dp[cur^1],0,sizeof dp[cur^1]);\n\t\tfor (int x1=1;x1<=n;x1++){\n\t\t\tint y1=i+1-x1;\n\t\t\tif (y1>=1&&y1<=n){\n\t\t\t\tfor (int x2=1;x2<=n;x2++){\n\t\t\t\t\tint y2=(n+1)*2-x1-y1-x2;\n\t\t\t\t\tif (y2>=1&&y2<=n){\n\t\t\t\t\t\tif (a[x1][y1]==a[x2][y2]){\n\t\t\t\t\t\t\tpushup(dp[cur^1][x1][x2],dp[cur][x1][x2]);\n\t\t\t\t\t\t\tpushup(dp[cur^1][x1][x2],dp[cur][x1][x2+1]);\n\t\t\t\t\t\t\tpushup(dp[cur^1][x1][x2],dp[cur][x1-1][x2]);\n\t\t\t\t\t\t\tpushup(dp[cur^1][x1][x2],dp[cur][x1-1][x2+1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcur^=1;\n\t}\n\tfor (int i=1;i<=n;i++){\n\t\tpushup(ans,dp[cur][i][i]);\n\t}\n\tprintf(\"%d\\n\",ans);\n}\nint main(){\n\tinit();\n\tsolve();\n\treturn 0;\n}\n```",
        "postTime": 1523147388,
        "uid": 34444,
        "name": "\u5927\u83dc\u9e21fks",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    },
    {
        "content": "## [\u9898\u76ee\u4f20\u9001\u5668](https://www.luogu.com.cn/problem/P3126)\n## [\u66f4\u723d\u7684\u9605\u8bfb\u4f53\u9a8c](https://yaohaoyou.blog.luogu.org/solution-p3126)\n\n# \u9898\u610f\n\u4ece $(1,1)$ \u5230 $(n,n)$\uff0c\u6bcf\u6b21\u53ea\u80fd\u5411\u4e0b\u6216\u5411\u53f3\uff0c\u6c42\u4f7f\u8def\u8fc7\u7684\u8def\u5f84\u4e3a\u56de\u6587\u4e32\u7684\u8def\u5f84\u6570\u3002\n\n# \u601d\u8def\n$0 \\le n \\le 500$ \u7684\u6570\u636e\u53ef\u4ee5\u770b\u51fa\u8fd9\u662f\u4e00\u9053 dp \u9898\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u53ea\u8981\u601d\u8003\u5982\u4f55\u8bbe\u8ba1 dp \u4e86\u3002\n\n### \u72b6\u6001\u5b9a\u4e49\n$dp_{s,i,j}$ \u4e3a\u4ece\u4e2d\u70b9\u51fa\u53d1\uff0c\u8d70\u4e86 $s$ \u6b65\u540e\uff0c\u5de6\u4e0a\u7684\u70b9\u7684\u6a2a\u5750\u6807\u4e3a $i$\uff0c\u53f3\u4e0b\u7684\u70b9\u6a2a\u5750\u6807\u4e3a $j$ \u7684\u56de\u6587\u8def\u5f84\u6570\u3002\n\n\u5de6\u4e0a\u89d2\uff1a$(x,s+2-x)$\uff0c\u53f3\u4e0b\u89d2\uff1a$(x,n \\times 2-s-x)$\u3002\n\n### \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n$dp_{s,i,j}$ \u4f1a\u4ece\u76f8\u90bb\u7684\u4f4d\u7f6e\u8f6c\u79fb\u8fc7\u53bb\uff0c\u4e5f\u5c31\u662f $dp_{s-1,i-1,j}$\u3001$dp_{s-1,i,j+1}$\u3001$dp_{s-1,i-1,j+1}$\u3001$dp_{s-1,i,j}$,\u6240\u4ee5\u8f6c\u79fb\u65b9\u7a0b\u5c31\u662f\uff1a\n$dp_{s,i,j}=dp_{s-1,i-1,j}+dp_{s-1,i,j+1}+dp_{s-1,i-1,j+1}+dp_{s-1,i,j}$\u3002\n\n**\u6ce8\uff1a\u8f6c\u79fb\u65b9\u7a0b\u5f53\u4e24\u4e2a\u70b9\u7684\u4f4d\u7f6e\u76f8\u7b49\u65f6\u6210\u7acb\u3002**\n\n### \u521d\u59cb\u5316\n$dp_{1,1,n}=1$\uff0c\u5373\u5de6\u4e0a\u89d2\u4e3a $(1,1)$\uff0c\u53f3\u4e0b\u89d2\u4e3a $(n,n)$ \u65f6\u6709 $1$ \u6761\u8def\u5f84\u3002\n\n### \u4f18\u5316\n\u76f4\u63a5 dp \u7684\u8bdd\u7a7a\u95f4\u590d\u6742\u5ea6\u5c06\u662f $O(n^3)$\uff0c\u4f1a MLE\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u548c\u5012\u5e8f\u641c\u7d22\uff0c\u6211\u4f7f\u7528\u7684\u662f\u6eda\u52a8\u6570\u7ec4\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6\u5c31\u662f $O(n^2)$\u3002\n\n### \u603b\u7ed3\n\u8fd9\u9053\u9898\u7684 dp \u601d\u8def\u548c\u72b6\u6001\u8f6c\u79fb\u6bd4\u8f83\u590d\u6742\uff0c\u5bfc\u81f4\u6211\u8d5b\u65f6 $21$ \u5206\uff0c\u63a8\u51fa\u65b9\u7a0b\u540e\u5c31\u6bd4\u8f83\u7b80\u5355\u4e86\u3002\u4e0d\u5f00 ```long long``` \u89c1\u7956\u5b97\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^3)$\u3002\n\n## AC Code\n```cpp\n#include <bits/stdc++.h>  // \u5f00\u59cb\u4e86\n#define int long long  // \u5f00 long long\nusing namespace std;\nconst int maxn = 510, mod = 1e9 + 7;\nint n, ans, dp[2][maxn][maxn];  // \u6eda\u52a8\u6570\u7ec4\nstring ss[maxn];\nsigned main()\n{\n\t// IO\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    cout.tie(0);\n    cin >> n;\n    for (int i = 1; i <= n; i++)\n    {\n        cin >> ss[i];\n    }\n    if (ss[1][0] == ss[n][n - 1])  // \u7279\u5224\uff0c\u5982\u679c\u8d77\u70b9\u4e0d\u7b49\u4e8e\u7ec8\u70b9\u5c31\u8f93\u51fa 0\n        dp[0][1][n] = 1;\n    else\n    {\n        cout << 0;\n        return 0;\n    }\n    for (int i = 1; i < n; i++)\n    {  // dp \u8f6c\u79fb\n        for (int nx = 1; nx <= i + 1; nx++)\n        {\n            int ny = i + 2 - nx;\n            for (int tx = n - i; tx <= n; tx++)\n            {\n                int ty = n * 2 - i - tx;\n                if (ss[nx][ny - 1] == ss[tx][ty - 1])\n                    dp[i & 1][nx][tx] = dp[(i - 1) & 1][nx - 1][tx] +\n                                        dp[(i - 1) & 1][nx][tx + 1] +\n                                        dp[(i - 1) & 1][nx - 1][tx + 1] +\n                                        dp[(i - 1) & 1][nx][tx];\n                else\n                    dp[i & 1][nx][tx] = 0;\n                dp[i & 1][nx][tx] %= mod;\n            }\n        }\n    }\n    for (int i = 1; i <= n; i++) ans += dp[(n-1) & 1][i][i], ans %= mod;\n    cout << ans;\n}\n```\n",
        "postTime": 1678413764,
        "uid": 739274,
        "name": "yaohaoyou",
        "ccfLevel": 5,
        "title": "P3126 [USACO15OPEN]Palindromic Paths G \u9898\u89e3"
    },
    {
        "content": "# [Palindromic Paths G](https://www.luogu.com.cn/problem/P3126)\n\u9996\u5148\u770b\u5230 $n \\le 500$ \u53cc\u5411\u641c\u7d22\u4f1a\u70b8\uff0c\u81ea\u7136\u60f3\u5230 DP\u3002\n## \u9898\u610f\n\u6c42\u4ece $(1,1)$ \u8d70\u5230 $(n,n)$ \u7684\u6240\u6709\u8def\u5f84\u4e2d\u56de\u6587\u4e32\u7684\u4e2a\u6570\uff0c\u6bcf\u6b65\u53ea\u80fd\u5411\u53f3\u6216\u5411\u4e0b\u3002\n\n\u56e0\u4e3a\u662f\u56de\u6587\u4e32\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a\u9898\u76ee\u8f6c\u5316\u4e3a\uff1a\u4e24\u4eba\u4ece $(1,1)$ \u548c $(n,n)$ \u5206\u522b\u51fa\u53d1\uff0c\u5728\u56fe\u4e2d\u67d0\u70b9\u76f8\u9047\uff0c\u4e24\u6761\u8def\u5f84\u6784\u6210\u7684\u5b57\u7b26\u4e32\u76f8\u540c\uff0c\u6c42\u8d70\u6cd5\u4e2a\u6570\u3002\n## \u72b6\u6001\u8bbe\u8ba1\n\u53ef\u4ee5\u66b4\u529b\u7684\u8bbe $dp_{i,j,p,q}$ \u4e3a\u7b2c\u4e00\u4e2a\u4eba\u8d70\u5230 $(i,j)$\uff0c\u7b2c\u4e8c\u4e2a\u4eba\u8d70\u5230 $(p,q)$ \u7684\u65b9\u6cd5\u6570\uff0c\u4f46\u662f\u56db\u7ef4\u7684\u72b6\u6001\u80af\u5b9a\u65f6\u7a7a\u7206\u70b8\u3002\n\n\u6211\u4eec\u53d1\u73b0\u53ea\u8981\u6b65\u6570\u548c\u6a2a\u5750\u6807\u786e\u5b9a\u4e86\uff0c\u7eb5\u5750\u6807\u4e5f\u5c31\u786e\u5b9a\u4e86\u3002\u6240\u4ee5\u53ef\u4ee5\u628a\u72b6\u6001\u538b\u7f29\u4e3a $dp_{step,i,p}$ \u8868\u793a\u8d70\u4e86 $step$ \u6b65\uff0c\u7b2c\u4e00\u548c\u7b2c\u4e8c\u4e2a\u4eba\u7684\u6a2a\u5750\u6807\u5206\u522b\u4e3a $i$ \u548c $p$\u3002\u5219\u6613\u5f97 $j=step-i$ \u4e14 $q=2 \\times n-step-p$\u3002\n## \u8f6c\u79fb\u65b9\u7a0b\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u5f88\u597d\u60f3\u4e86\u3002$i$ \u548c $p$ \u5206\u522b\u53ef\u4ee5\u4ece $4$ \u4e2a\u65b9\u5411\u4e0a\u8f6c\u79fb\u8fc7\u6765\uff0c\u6761\u4ef6\u662f $map_{i,j}=map_{p,q}$\u3002\n$$dp_{step,i,p}=dp_{step-1,i-1,p}+dp_{step-1,i,p+1}+dp_{step-1,i-1,p+1}+dp_{step-1,i,p}$$\n## \u7ec6\u8282\u5904\u7406\n\u521d\u59cb\u503c\uff1a$dp_{1,1,n}=1$\u3002\n\n\u7b54\u6848\uff1a\u6613\u77e5\u4e24\u70b9\u76f8\u9047\u7684\u4f4d\u7f6e\u603b\u662f\u5728\u77e9\u5f62\u7684\u5bf9\u89d2\u7ebf\u4e0a\u3002\n\n\u4f18\u5316\uff1a$dp$ \u6570\u7ec4\u7684\u7a7a\u95f4 $500^3=125000000$ \u8fd8\u662f\u4f1a MLE\u3002\u6211\u4eec\u53d1\u73b0\u6bcf\u4e00\u6b65\u7684\u679a\u4e3e\u53ea\u9700\u8981\u4e0a\u4e00\u6b65\u7684\u7b54\u6848\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u3002\u5f53\u7136\u5012\u5e8f\u679a\u4e3e\u4f18\u5316\u4e5f\u53ef\u4ee5\u3002\n## \u4ee3\u7801\uff08\u5012\u5e8f\u679a\u4e3e\uff09\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,ans,dp[505][505];\nchar s[505][505];\nsigned main()\n{\n    scanf(\"%lld\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        getchar();\n        for(int j=1;j<=n;j++)\n        {\n            s[i][j]=getchar();\n        }\n    }\n    if(s[1][1]!=s[n][n])//\u5c0f\u7279\u5224\n    {\n        printf(\"0\");\n        return 0;\n    }\n    dp[1][n]=1;//\u521d\u59cb\u5316\n    for(int k=1;k<n;k++)\n    {\n        for(int i=k+1;i;i--)//\u5012\u5e8f\u679a\u4e3e\n        {\n            for(int p=n-k;p<=n;p++)//\u5012\u5e8f\u679a\u4e3e\n            {\n                int j=k+2-i,q=2*n-k-p;\n                if(s[i][j]==s[p][q])\n                    dp[i][p]=(dp[i-1][p]+dp[i][p+1]+dp[i-1][p+1]+dp[i][p])%1000000007;\n                else\n                    dp[i][p]=0;//\u5012\u5e8f\u679a\u4e3e\u7684\u7ec6\u8282\u5904\u7406\n            }\n        }\n    }\n    for(int i=1;i<=n;i++)\n    {\n        ans=(ans+dp[i][i])%1000000007;\n    }\n    printf(\"%lld\",ans);\n}\n```\n## \u4ee3\u7801\uff08\u6eda\u52a8\u6570\u7ec4\uff09\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,ans,now=1,dp[2][505][505];\nchar s[505][505];\nsigned main()\n{\n    scanf(\"%lld\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        getchar();\n        for(int j=1;j<=n;j++)\n        {\n            s[i][j]=getchar();\n        }\n    }\n    if(s[1][1]!=s[n][n])//\u5c0f\u7279\u5224\n    {\n        printf(\"0\");\n        return 0;\n    }\n    dp[1][1][n]=1;//\u521d\u59cb\u5316\n    for(int k=1;k<n;k++)\n    {\n        now^=1;//\u6eda\u52a8 \n        memset(dp[now],0,sizeof dp[now]);//\u8bb0\u5f97\u6e05\u7a7a \n        for(int i=1;i<=k+1;i++)\n        {\n            for(int p=n;p>=n-k;p--)\n            {\n                int j=k+2-i,q=2*n-k-p;\n                if(s[i][j]==s[p][q])\n                    dp[now][i][p]=(dp[now^1][i-1][p]+dp[now^1][i][p+1]+dp[now^1][i-1][p+1]+dp[now^1][i][p])%1000000007;//\u8f6c\u79fb \n            }\n        }\n    }\n    for(int i=1;i<=n;i++)\n    {\n        ans=(ans+dp[now][i][i])%1000000007;\n    }\n    printf(\"%lld\",ans);\n}\n\n```\n\n\u5e0c\u671b\u672c\u7bc7\u9898\u89e3\u53ef\u4ee5\u5e2e\u5230\u5927\u5bb6\uff01\uff01\uff01",
        "postTime": 1677809101,
        "uid": 631576,
        "name": "cyz2010",
        "ccfLevel": 0,
        "title": "P3126\u9898\u89e3"
    },
    {
        "content": "\u770b\u5230\u56de\u6587\uff0c\u9996\u5148\u60f3\u5230\u53ef\u4ee5\u4ece\u8d77\u70b9\u548c\u7ec8\u70b9\u540c\u65f6\u5f00\u59cb\u8df3\uff0c\u8fd9\u6837\u5c31\u6709\u4e00\u4e2a\u56db\u7ef4 $\\text{dp}$\uff0c\u5373 $dp_{i,j,k,l}$ \u8868\u793a\u4ece\u8d77\u70b9\u5f00\u59cb\u8df3\u7684\u70b9\u5f53\u524d\u5728\u5750\u6807 $(i,j)$\uff0c\u53e6\u4e00\u4e2a\u70b9\u5728 $(k,l)$\uff0c\u4f46\u5f88\u663e\u7136\u65f6\u95f4\u7206\u8868\u3002\n\n\u6ce8\u610f\u5230\u53ea\u53ef\u4ee5\u5f80\u4e0b\u6216\u53f3\u8df3\uff0c\u90a3\u4e48\u4e00\u65e6\u6211\u4eec\u77e5\u9053\u5f53\u524d\u8df3\u7684\u6b65\u6570 $stp$ \u4ee5\u53ca\u6240\u5728\u7684\u884c\u6570 $i$\uff0c\u81ea\u7136\u4e5f\u53ef\u4ee5\u6c42\u51fa\u6240\u5728\u7684\u5217\u6570 $j$\u3002\n\n\u8fd9\u65f6\u5019\u5c31\u7b80\u5316\u4e3a\u4e00\u4e2a\u4e09\u7ef4 $\\text{dp}$\uff0c$dp_{i,j,stp}$ \u8868\u793a\u7b2c\u4e00\u4e2a\u70b9\u5728 $i$ \u884c\uff0c\u7b2c\u4e8c\u4e2a\u70b9\u5728 $j$ \u884c\uff0c\u5b83\u4eec\u8df3\u4e86 $stp$ \u6b65\u3002\n\n\u5219\u6709:\n\n$$dp_{i,j,stp}=dp_{i-1,j,stp-1}+dp_{i,j+1,stp-1}+dp_{i-1,j+1,stp-1}+dp_{i,j,stp-1}$$\n\n\u63a5\u7740\u53d1\u73b0\u7b2c\u4e09\u7ef4 $stp$ \u6c38\u8fdc\u53ea\u548c $stp-1$ \u6709\u5173\u7cfb\uff0c\u90a3\u4e48\u6eda\u52a8\u6570\u7ec4\u538b\u6389\u4e00\u7ef4\uff0c\u7ed3\u675f\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define debug puts(\"Shiina_Mashiro_kawaii\")\n#define ok puts(\"Yes\")\n#define no puts(\"0\")\nusing namespace std;\nint read(){\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9'){\n\t\tx=x*10+c-48;\n\t\tc=getchar();\n\t}\n\treturn x*f;\n}\nconst int mod=1e9+7;\nconst int maxn=510;\nconst int maxm=10;\nint n;\nint lst,now,ans;\nint dp[maxn][maxn][2];\nstring s[maxn];\n// void dfs(int x,int y){\n// \t\n// }\ninline void init(){\n\tn=read();now=1;\n\tfor(register int i=1;i<=n;++i){\n\t\tcin>>s[i];s[i]=\" \"+s[i];\n\t}\n\tif(s[1][1]!=s[n][n]) no,exit(0);\n\tdp[1][n][0]=1;\n}\nsigned main(){\n\tinit();\n\tfor(register int stp=2;stp<=n;++stp){\n\t\tfor(register int i=1;i<=n;++i){\n\t\t\tif(stp<i) break;\n\t\t\tfor(register int j=n;j>=i;--j){\n\t\t\t\tif(s[i][stp-i+1]!=s[j][2*n-stp-j+1]) dp[i][j][now]=0;\n\t\t\t\telse{\n\t\t\t\t\tdp[i][j][now]=dp[i-1][j][lst]+dp[i][j+1][lst]+dp[i-1][j+1][lst]+dp[i][j][lst];\n\t\t\t\t\tdp[i][j][now]%=mod;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tswap(lst,now);\n\t}\n\tfor(register int i=1;i<=n;++i){\n\t\tans+=dp[i][i][lst];ans%=mod;\n\t}\n\tprintf(\"%lld\",ans);\n}\n```\n",
        "postTime": 1677312941,
        "uid": 590864,
        "name": "Yizhixiaoyun",
        "ccfLevel": 5,
        "title": "P3126 \u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P3126)\n\n## \u601d\u8def\n\n\u56de\u6587\u4e32\u76f4\u63a5\u5904\u7406\u4f1a\u6bd4\u8f83\u9ebb\u70e6\uff0c\u6240\u4ee5\u8003\u8651\u4ece\u8d77\u70b9\u7ec8\u70b9\u4e24\u8fb9\u540c\u65f6\u5411\u4e2d\u95f4\u8d70\u3002\n\n\u6700\u66b4\u529b\u7684\u505a\u6cd5\u662f\u5b9a\u4e49\u4e00\u4e2a\u4e94\u7ef4 dp\uff0c\u5176\u4e2d $dp_{i,j,k,l,s}$ \u8868\u793a\u73b0\u5728\u8d70\u4e86 $s$ \u6b65\uff0c\u4e24\u7aef\u5206\u522b\u8d70\u5230\u70b9 $a_{i,j}$ \u4e0e\u70b9 $a_{k,l}$\uff0c\u8f6c\u79fb\u5f88\u7b80\u5355\uff0c\u4f46\u4e94\u7ef4\u65e0\u8bba\u5728\u65f6\u95f4\u8fd8\u662f\u7a7a\u95f4\u4e0a\u90fd\u8fc7\u4e0d\u4e86\uff0c\u6240\u4ee5\u8003\u8651\u5982\u4f55\u4f18\u5316\u3002\n\n\u7a0d\u5fae\u601d\u8003\u4e00\u4e0b\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f53\u4f60\u77e5\u9053\u5f53\u65f6\u8d70\u7684\u6b65\u6570\u4e0e\u5f53\u524d\u70b9\u7684\u6a2a\u5750\u6807\u662f\uff0c\u7eb5\u5750\u6807\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8ba1\u7b97\u5f97\u51fa\uff0c\u56e0\u4e3a\u4e24\u7aef\u7684\u70b9\u540c\u65f6\u52a8\uff0c\u6240\u4ee5\u6b65\u6570\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u4e09\u7ef4\u72b6\u6001 $dp_{s,i,j}$\uff0c\u5176\u4e2d $s$ \u8868\u793a\u5f53\u65f6\u6b65\u6570\uff0c$i$ \u4e3a\u5de6\u4e0a\u70b9\u7684\u6a2a\u5750\u6807\uff0c$j$ \u8868\u793a\u53e6\u5916\u4e00\u70b9\u7684\u6a2a\u5750\u6807\uff0c\u6b64\u65f6\u5de6\u4e0a\u7684\u70b9\u4e3a $a_{i,s-i}$\uff0c\u53f3\u4e0b\u70b9\u4e3a $a_{j,n-(s-(n-j))}=a_{j,n\\times2-s-j}$\uff0c\u5f53\u4e24\u70b9\u5b57\u6bcd\u76f8\u540c\u65f6\uff0c\u8f6c\u79fb\u4e3a $dp_{s,i,j}=dp_{s-1,i-1,j}+dp_{s-1,i,j+1}+dp_{s-1,i-1,j+1}+dp_{s-1,i,j}$\uff0c\u82e5\u4e0d\u76f8\u540c\uff0c\u5219\u4e3a\u96f6\u3002\n\n\u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6\u53d8\u4e3a $O(n^3)$\uff0c\u53ef\u4ee5\u8fc7\uff0c\u4f46\u7a7a\u95f4\u590d\u6742\u5ea6\u4e5f\u662f $O(n^3)$\uff0c\u6240\u4ee5\u518d\u6765\u4f18\u5316\u7a7a\u95f4\uff0c\u6700\u5bb9\u6613\u60f3\u5230\u7684\u662f\u6eda\u52a8\u6570\u7ec4\uff0c\u8fd9\u91cc\u63d0\u4f9b\u53e6\u5916\u4e00\u79cd\u601d\u8def\uff0c$i$ \u548c $j$ \u90fd\u4ece\u540e\u5f80\u524d\u641c\uff0c\u8fd9\u6837\u6b65\u6570\u7684\u90a3\u4e00\u7ef4\u5c31\u53ef\u4ee5\u538b\u6389\uff0c\u53d8\u6210\u4e8c\u7ef4\u3002\u6b64\u65f6\u8f6c\u79fb\u65b9\u7a0b\u4e3a $dp_{i,j}=dp_{i,j}+dp_{i-1,j}+dp_{i-1,j-1}+dp_{i,j-1}$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^3)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u3002\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define _int __int128\n#define y1 _\nusing namespace std;\n\nstatic char buf[1000000],*p1=buf,*p2=buf;\n\ninline int read(){\n\tchar c=getchar();\n\tint res=0,f=1;\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-')f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9'){\n\t\tres=res*10+c-'0';\n\t\tc=getchar();\n\t}\n\treturn res*f;\n}\n\ninline void write(int x){\n\tstatic char buf[20];\n\tstatic int len=-1;\n\tif(x<0){\n\t\tputchar('-');\n\t\tx=-x;\n\t}\n\tdo{\n\t\tbuf[++len]=x%10;\n\t\tx/=10;\n\t}\n\twhile(x);\n\twhile(len>=0){\n\t\tputchar(buf[len--]+48);\n\t}\n}\n\nconst int maxn=510;\nconst int maxm=110;\nconst int yinhee=1e9+7;\nconst int inf=1145141919810;\n\nint n;\nchar a[maxn][maxn];\nint f[maxn][maxn];\n\nvoid solve(){\n\tn=read();\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tcin>>a[i][j];\n\t\t}\n\t}\n\tif(a[1][1]!=a[n][n]){\n\t\twrite(0);\n\t\treturn ;\n\t}\n\tf[1][1]=1;\n\tfor(int s=3;s<=n+1;s++){\n\t\tfor(int i=s-1;i>=1;i--){\n\t\t\tfor(int j=s-1;j>=1;j--){\n\t\t\t\tint x=i,y=s-i,x1=n-s+j+1,y1=n-j+1;\n\t\t\t\tif(a[x][y]==a[x1][y1]) f[i][j]+=(f[i-1][j]+f[i-1][j-1]+f[i][j-1])%yinhee,f[i][j]=f[i][j]%yinhee;\n\t\t\t\telse f[i][j]=0;\n\t\t\t}\n\t\t}\n\t}\n\tint ans=0;\n\tfor(int i=1;i<=n;i++){\n\t\tans+=f[i][i]%yinhee;\n\t\tans=ans%yinhee;\n\t}\n\twrite(ans%yinhee); \n\treturn ;\n}\n\nsigned main(){\n\tint T=1;\n\twhile(T--){\n\t\tsolve();\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1677312175,
        "uid": 542309,
        "name": "L_Tree_am_I",
        "ccfLevel": 0,
        "title": "P3126 \u9898\u89e3"
    },
    {
        "content": "## Solution\n\u9996\u5148\uff0c\u6211\u4eec\u8003\u8651\u5982\u4f55\u5224\u65ad\u56de\u6587\u4e32\u3002\u4e0d\u96be\u60f3\u5230\u4ece $(1,1)$ \u548c $(n,n)$ \u5206\u522b\u5411\u4e2d\u95f4\u8d70\uff0c\u6bcf\u6b21\u8d70\u7684\u683c\u5b50\u4e0a\u7684\u5b57\u6bcd\u76f8\u540c\uff0c\u5230\u4e2d\u95f4\u6c47\u5408\u65f6\u7edf\u8ba1\u4e00\u4e0b\u65b9\u6848\u6570\u5373\u53ef\u3002\n\n\u8003\u8651 dp\uff0c\u72b6\u6001\u9700\u8981\u8bb0\u5f55\u54ea\u4e9b\u91cf\uff1f\u66b4\u529b\u7684 dp \u80af\u5b9a\u662f\u8bb0\u5f55\u4e24\u8fb9\u5206\u522b\u8d70\u5230\u54ea\u4e86\uff0c\u4f46\u8fd9\u6837\u590d\u6742\u5ea6\u662f $O(n^4)$ \u7684\uff0c\u65e0\u6cd5\u901a\u8fc7\u672c\u9898\u3002\u53d1\u73b0\u53ea\u8981\u77e5\u9053\u4e86\u5f53\u524d\u8d70\u4e86\u51e0\u6b65\u5c31\u53ef\u4ee5\u7531\u6a2a\u7eb5\u5750\u6807\u4e2d\u7684\u4e00\u4e2a\u63a8\u51fa\u53e6\u4e00\u4e2a\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8ba9 $f_{i,j,k}$ \u8868\u793a\u8d70\u4e86 $i$ \u6b65\uff0c\u4e24\u70b9\u7684\u6a2a\u5750\u6807\u5206\u522b\u4e3a $j$ \u548c $k$ \u7684\u65b9\u6848\u6570\u3002\u4f46\u8fd8\u662f\u4f1a\u8d85\u7a7a\u95f4\uff0c\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u538b\u4e00\u7ef4\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$f_{j,k}=f_{j,k}+f_{j-1,k}+f_{j,k+1}+f_{j-1,k+1}$$\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^3)$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n## Code\n```cpp\n#include <bits/stdc++.h>\n#define ll long long \n#define Rint register int \nusing namespace std;\nconst int N=505,mod=1e9+7;\nint n;\nll f[N][N];\nchar c[N][N];\nint main()\n{\n\tcin>>n;\n\tfor(Rint i=1;i<=n;++i)\n\t{\n\t\tfor(Rint j=1;j<=n;++j)\n\t\t{\n\t\t\tcin>>c[i][j];\n\t\t}\n\t}\n\tif(c[1][1]!=c[n][n])\n\t{\n\t\tcout<<0;return 0;\n\t}\n\tf[1][n]=1;\n\tfor(Rint i=3;i<=n+1;++i)\n\t{\n\t\tfor(Rint x1=i-1;x1>=1;--x1)\n\t\t{\n\t\t\tfor(Rint x2=n+2-i;x2<=n;++x2)\n\t\t\t{\n\t\t\t\tint y1=i-x1,y2=n+n+2-i-x2;\n\t\t\t\tif(c[x1][y1]!=c[x2][y2])\n\t\t\t\t{\n\t\t\t\t\tf[x1][x2]=0;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n                f[x1][x2]=f[x1][x2]+f[x1-1][x2]+f[x1][x2+1]+f[x1-1][x2+1];\n                f[x1][x2]%=mod;\n\t\t\t}\n\t\t}\n\t}\n\tll ans=0;\n\tfor(Rint i=1;i<=n;++i)\n\t\tans+=f[i][i],ans%=mod;\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1658373440,
        "uid": 451328,
        "name": "lnwhl",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011P3126 [USACO15OPEN]Palindromic Paths G"
    },
    {
        "content": "\u601d\u8def\uff1a\u7531\u4e8e\u4f1a\u95ee\uff0c\u53ef\u4ee5\u8003\u8651\u4ece\u4e24\u7aef\u904d\u5386\uff0c\u6bcf\u6b21\u904d\u5386\u5230\u76f8\u7b49\u7684\u5b57\u7b26\uff0c\u5982\u679c\u53ef\u4ee5\u5230\u8fbe\u540c\u4e00\u4e2a\u70b9\uff0c\u5c31\u662f\u4e00\u79cd\u65b9\u6848\u3002\n\n\u5b9a\u4e49 $dp_{i,a,x}$ \u8868\u793a\u5df2\u7ecf\u8d70\u4e86 $i$ \u6b65\uff0c$(1,1)$ \u6a2a\u5411\u8d70\u4e86 $a$ \u6b65\uff0c$(n,n)$ \u6a2a\u5411\u8d70\u4e86 $x$ \u6b65\uff0c\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u4e24\u4e2a\u70b9\u7684\u6a2a\u5750\u6807\u548c\u7eb5\u5750\u6807\u3002\n\n\u521d\u59cb\u72b6\u6001\uff1a\n$dp_{n-1,i,j}=1(1\\le i\\le n,1\\le j\\le n)$\uff08\u7ec8\u70b9\u662f\u4e00\u79cd\u65b9\u6848\uff09\uff0c\u76ee\u6807\u72b6\u6001 $dp_{0,1,n}$\uff08\u8d77\u70b9\uff09\u3002\n\n\u65f6\u7a7a\u590d\u6742\u5ea6 $O(n^3)$\uff0c\u7a7a\u95f4\u4f1a\u88ab\u5361\u3002\n\n\u7136\u540e\uff0c\u5bb9\u6613\u60f3\u5230\u6eda\u52a8\u6570\u7ec4\u4f18\u5316 dp\uff0c\u5c06\u7a7a\u95f4\u590d\u6742\u5ea6\u4f18\u5316\u5230 $O(n^2)$\u3002\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define dp(a,b,c) dp[a&1][b][c] \nusing namespace std;\nconst int mod=1e9+7;\nint n,dp[2][505][505];\nchar s[505][505];\nsigned main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=n;++j)\n\t\t\tcin>>s[i][j];\n\tfor(int i=1;i<=n;++i)\n\t\tdp(n-1,i,i)=1;\n\tfor(int i=n-1;i;--i){\n\t\tfor(int a=1;a-1<=i;++a)\n\t\t\tfor(int x=n;n-x<=i;--x){\n\t\t\t\tint b=i-a+2,y=2*n-i-x;\n\t\t\t\tif(b-1>=1&&y+1<=n&&s[a][b-1]==s[x][y+1])\n\t\t\t\t\tdp(i-1,a,x)=(dp(i-1,a,x)+dp(i,a,x))%mod;\n\t\t\t\tif(a-1>=1&&y+1<=n&&s[a-1][b]==s[x][y+1])\n\t\t\t\t\tdp(i-1,a-1,x)=(dp(i-1,a-1,x)+dp(i,a,x))%mod;\n\t\t\t\tif(b-1>=1&&x+1<=n&&s[a][b-1]==s[x+1][y])\n\t\t\t\t\tdp(i-1,a,x+1)=(dp(i-1,a,x+1)+dp(i,a,x));\n\t\t\t\tif(a-1>=1&&x+1<=n&&s[a-1][b]==s[x+1][y])\n\t\t\t\t\tdp(i-1,a-1,x+1)=(dp(i-1,a-1,x+1)+dp(i,a,x))%mod;\n\t\t\t}\n\t\tmemset(dp[i&1],0,sizeof(dp[i&1]));\n\t}\n    printf(\"%lld\\n\",dp(0,1,n));\n    return 0;\n}\n```",
        "postTime": 1656067595,
        "uid": 556362,
        "name": "UnnamedOrNamed",
        "ccfLevel": 5,
        "title": "P3126 [USACO15OPEN]Palindromic Paths G \u9898\u89e3"
    },
    {
        "content": "## \u3010\u9898\u76ee\u5927\u610f\u3011\n\n\u4ece\u5de6\u4e0a\u5230\u53f3\u4e0b\uff0c\u53ea\u80fd\u5f80\u53f3\u6216\u5f80\u4e0b\uff0c\u6c42\u8def\u5f84\u662f\u56de\u6587\u4e32\u7684\u65b9\u6848\u6570\n\n## \u3010\u5206\u6790\u3011\n\n\u6c42\u65b9\u6848\u6570\u7684\u9898\uff0c\u4e0d\u96be\u770b\u51fa\u662fDP\n\n\u56de\u6587\u4e32\u53ef\u4ee5\u770b\u62102\u4e2a\u6307\u9488\uff0c\u5206\u522b\u4ece\u5de6\u4e0a\u548c\u53f3\u4e0b\u51fa\u53d1\uff0c\u8981\u6c42\u6bcf\u4e00\u6b65\u8d70\u5230\u7684\u70b9\u7684\u5b57\u6bcd\u90fd\u4e00\u6837\n\n\u90a3\u4e48\u5b9a\u4e49f[x][y][xx][yy]\n\n\u8868\u793a\u4ece\u5de6\u4e0a\u89d2\u8d70\u5230\uff08x\uff0cy\uff09\uff0c\u4ece\u53f3\u4e0b\u89d2\u8d70\u5230\uff08xx\uff0cyy\uff09\u80fd\u6784\u6210\u56de\u6587\u4e32\u7684\u65b9\u6848\u6570\n\n\u8f6c\u79fb\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5bf9\n\nf[x-1][y][xx+1][yy],\n\nf[x-1][y][xx][yy+1]\uff0c\n\nf[x][y-1][xx+1][yy]\uff0c\n\nf[x][y-1][xx][yy+1]\n\n\u6c42\u548c\n\n\u8f6c\u79fb\u7684\u6761\u4ef6\u662f\uff08x\uff0cy\uff09\u4e0e\uff08xx\uff0cyy\uff09\u4e0a\u7684\u5b57\u6bcd\u76f8\u540c\n\n\u6700\u88f8\u7684DP\u5c31\u5b8c\u6210\u4e86\uff0c\u7136\u800c\u65f6\u7a7a\u590d\u6742\u5ea6\u90fd\u662fO\uff08n^4\uff09~~\u65f6\u7a7a\u4e24\u7206\u70b8~~\n\n### \u8003\u8651\u5982\u4f55\u4f18\u5316\n\n\u4ece\u5de6\u4e0a\u51fa\u53d1\u7684\u6307\u9488\uff0c\u6bcf\u6b21\u53ea\u80fd\u8d70\u4e00\u6b65\uff0c\u8981\u4e48\u884c\u53f7+1\uff0c\u8981\u4e48\u5217\u53f7+1\n\n\u53e6\u4e00\u4e2a\u6307\u9488\u4e5f\u7c7b\u4f3c\n\n\u90a3\u4e48\u901a\u8fc7\u5750\u6807\u5c31\u53ef\u4ee5\u7b97\u51fa\u6b65\u6570\u53ca\u5bf9\u89d2\u7ebf\u53f7\uff0c\u5f88\u663e\u7136\u6b65\u6570\u4e0d\u540c\u7684\u72b6\u6001\u5bf9\u7b54\u6848\u6ca1\u6709\u8d21\u732e\n\n\u6240\u4ee5\u4e0a\u4e00\u4e2a\u7b97\u6cd5\u505a\u4e86\u5f88\u591a\u65e0\u7528\u7684\u8ba1\u7b97\n\n\u901a\u8fc7\u4ee5\u4e0a\u7684\u63a8\u5bfc\u53ef\u4ee5\u53d1\u73b0\uff0c\u6240\u6709\u80fd\u540c\u65f6\u8d70\u5230\u7684\u70b9\u5bf9\uff0c\u5bf9\u89d2\u7ebf\u53f7\u4e4b\u548c\u76f8\u540c\n\n\u90a3\u4e48\u53ef\u4ee5\u5148\u679a\u4e3e\u5bf9\u89d2\u7ebf\u53f7\u53ca\u6b65\u6570\uff0c\u518d\u679a\u4e3e2\u4e2a\u6307\u9488\u7684\u6a2a\u5750\u6807\uff0c\u7b97\u51fa\u7eb5\u5750\u6807\n\nf[k][x][xx]\u8868\u793a\u5de6\u4e0a\u7684\u70b9\u8d70\u5230k\u53f7\u5bf9\u89d2\u7ebf\uff0c2\u4e2a\u6307\u9488\u6a2a\u5750\u6807\u5206\u522b\u662fx\u4e0exx\u7684\u65b9\u6848\u6570\n\n\u8f6c\u79fb\u65b9\u7a0b\u4e0e\u4e4b\u524d\u7c7b\u4f3c\n\n\u6210\u529f\u628a\u590d\u6742\u5ea6\u524a\u51cf\u81f3O\uff08n^3\uff09\n## \u3010\u4ee3\u7801\u3011\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=505,TT=1e9+7,p[4][2]={{0,0},{0,1},{-1,0},{-1,1}};\nint n;\nchar mp[maxn][maxn];\nint f[maxn][maxn][maxn],ans;\nint main(){\n// \tfreopen(\"P3126.in\",\"r\",stdin);\n// \tfreopen(\"P3126.out\",\"w\",stdout);\n\tscanf(\"%d\",&n); \n\tfor(int i=1;i<=n;i++) scanf(\"%s\",mp[i]+1);\n\tif(mp[1][1]!=mp[n][n]){\n\t\tprintf(\"0\\n\");\n\t\treturn 0;\n\t}\n\tf[1][1][n]=1;\n\tfor(int k=1;k<=n;k++)\n\tfor(int x=1;x<=k;x++){\n\t\tint y=k+1-x;\n\t\tfor(int j=1;j<=k;j++){\n\t\t\tint xx=n-j+1,yy=2*n-k-xx+1;\n\t\t\tif(mp[x][y]!=mp[xx][yy]) continue;\n\t\t\tfor(int i=0;i<4;i++)\n\t\t\tf[k][x][xx]=(f[k][x][xx]+f[k-1][x+p[i][0]][xx+p[i][1]])%TT; \n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++) ans=(ans+f[n][i][i])%TT;\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\u5982\u679c\u4ea4\u4e86\u8fd9\u4efd\u4ee3\u7801\uff0c\u606d\u559c\u4f60\u83b7\u5f97\u4e8632\u5206~~\u7684\u597d\u6210\u7ee9~~\n\nMLE\u7684\u539f\u56e0\u662ff\u6570\u7ec4 505\u00d7505\u00d7505\u00d74/1024/1024\u2248491MB\n\n\u600e\u4e48\u529e\uff1f\n\n\u7531\u4e8e\u5f53\u524d\u5bf9\u89d2\u7ebf\u53ea\u53d7\u76f8\u90bb\u5bf9\u89d2\u7ebf\u5f71\u54cd\n\n\u6ca1\u9519\uff0c\u8fd9\u4e2a\u6570\u7ec4\u662f\u53ef\u4ee5\u6eda\u52a8\u7684\n\n\u7a0d\u5fae\u4fee\u6539\u4e00\u4e0b\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=505,TT=1e9+7,p[4][2]={{0,0},{0,1},{-1,0},{-1,1}};\nint n;\nchar mp[maxn][maxn];\nint f[2][maxn][maxn],ans;\nint main(){\n// \tfreopen(\"P3126.in\",\"r\",stdin);\n// \tfreopen(\"P3126.out\",\"w\",stdout);\n\tscanf(\"%d\",&n); \n\tfor(int i=1;i<=n;i++) scanf(\"%s\",mp[i]+1);\n\tif(mp[1][1]!=mp[n][n]){\n\t\tprintf(\"0\\n\");\n\t\treturn 0;\n\t}\n\tf[0][1][n]=1;\n\tfor(int k=1;k<=n;k++){\n\t\tmemset(f[k&1],0,sizeof f[k&1]);\n\t\tfor(int x=1;x<=k;x++){\n\t\t\tint y=k+1-x;\n\t\t\tfor(int j=1;j<=k;j++){\n\t\t\t\tint xx=n-j+1,yy=2*n-k-xx+1;\n\t\t\t\tif(mp[x][y]!=mp[xx][yy]) continue;\n\t\t\t\tfor(int i=0;i<4;i++)\n\t\t\t\tf[k&1][x][xx]=(f[k&1][x][xx]+f[1-k&1][x+p[i][0]][xx+p[i][1]])%TT; \n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++) ans=(ans+f[n&1][i][i])%TT;\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n~~\u7136\u800c\u4eceMLE\u53d8\u6210\u4e86TLE~~\n\n\u56e0\u4e3a500^3\u224810^8\u5df2\u7ecf\u662f\u5f3a\u5f29\u4e4b\u672b\u4e86\n\n\u7531\u4e8e\u6eda\u52a8\u8fc7\u7a0b\u4e2d\u5927\u91cfk&1\u4e0e1-k&1\u7684\u5197\u4f59\u8ba1\u7b97\uff0c\u8f6c\u79fb\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u591a\u6b21%\uff0c\u5e38\u6570\u5f88\u5927\n\n\u6240\u4ee5\u4f1aTLE\n\n\u628a\u8fd9\u51e0\u4e2a\u4e1c\u897f\u5f00\u6210\u53d8\u91cf\u51cf\u5c11\u8ba1\u7b97\u518d\u8fdb\u884c\u4e00\u4e9b\u4f18\u5316~~\u7136\u540e\u5438\u53e3\u6c27~~\u5373\u53ef\n```cpp\n#include<bits/stdc++.h>\n#define RE register\n#define LL long long\nusing namespace std;\nconst int maxn=505,TT=1e9+7,p[4][2]={{0,0},{0,1},{-1,0},{-1,1}};\nint n;\nchar mp[maxn][maxn];\nLL f[2][maxn][maxn],ans;\nint main(){\n//\tfreopen(\"P3126.in\",\"r\",stdin);\n//\tfreopen(\"P3126.out\",\"w\",stdout);\n\tscanf(\"%d\",&n); \n\tfor(int i=1;i<=n;i++) scanf(\"%s\",mp[i]+1);\n\tif(mp[1][1]!=mp[n][n]){\n\t\tprintf(\"0\\n\");\n\t\treturn 0;\n\t}\n\tf[0][1][n]=1;\n\tfor(RE int k=1;k<=n;k++){\n\t\tRE int now=k&1,lst=1-now; \n\t\tmemset(f[now],0,sizeof f[now]);\n\t\tfor(RE int x=1;x<=k;x++){\n\t\t\tRE int y=k+1-x;\n\t\t\tfor(RE int j=1;j<=k;j++){\n\t\t\t\tRE int xx=n-j+1,yy=2*n-k-xx+1;\n\t\t\t\tif(mp[x][y]!=mp[xx][yy]) continue;\n\t\t\t\tfor(RE int i=0;i<4;i++)\n\t\t\t\tf[now][x][xx]+=f[lst][x+p[i][0]][xx+p[i][1]];\n\t\t\t\tf[now][x][xx]%=TT;\n\t\t\t}\n\t\t}\n\t}\n\tfor(RE int i=1;i<=n;i++) ans=(ans+f[n&1][i][i])%TT;\n\tprintf(\"%lld\\n\",ans);\n//\tprintf(\"%d\\n\",clock());\n\treturn 0;\n}\n```",
        "postTime": 1574595966,
        "uid": 116251,
        "name": "\u7834\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3126 \u3010[USACO15OPEN]\u56de\u6587\u7684\u8def\u5f84Palindromic Paths\u3011"
    }
]
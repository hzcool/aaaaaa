[
    {
        "content": "# \u9898\u89e3 \u7ebf\u6bb5\u6811\n## 10pts\n\u4f9d\u9898\u610f\u6a21\u62df\u5373\u53ef\u3002\n\n$\\texttt{code:}$\uff08\u4ec5\u6838\u5fc3\u90e8\u5206\uff09\n```cpp\ntypedef long long ll;\nll ans=0;\nvoid build(ll k,ll l,ll r)\n{\n\tans=max(ans,k);\n\tif(l==r) return;\n\tint mid=(l+r)>>1;\n\tbuild(k<<1,l,mid);\n\tbuild(k<<1|1,mid+1,r);\n}\nll f(ll n){ans=0;build(1,1,n);return ans;}\n\n```\n## 40pts\n\u6211\u4eec\u53d1\u73b0\uff0c$n=m-1$ \u7684\u7ebf\u6bb5\u6811\u4e0e $n=m$ \u7684\u7ebf\u6bb5\u6811\u7684\u533a\u522b\uff0c\u4ec5\u4ec5\u662f\u5c06\u4e00\u4e2a\u53f6\u5b50\u8282\u70b9\u201c\u5206\u88c2\u201d\u4e3a\u4e86\u4e24\u4e2a\u53f6\u5b50\u8282\u70b9\u3002\u800c\u4e14\uff0c\u6211\u4eec\u53d1\u73b0\u6bcf\u6b21\u90fd\u662f\u5148\u5206\u88c2\u5de6\u5b50\u6811\u5185\u7684\u70b9\uff0c\u518d\u5206\u88c2\u53f3\u5b50\u6811\u5185\u7684\u70b9\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u5148\u5efa\u4e00\u68f5\u7a7a\u6811\uff0c\u7136\u540e\u52a0\u8282\u70b9\u52a0\u5230 $l$ \u4e2a\u53f6\u5b50\u8282\u70b9\uff0c\u5e76\u5f00\u59cb\u7edf\u8ba1\u7b54\u6848\uff0c\u7136\u540e\u4e00\u8def\u52a0\u5230 $r$ \u4e2a\u53f6\u5b50\u8282\u70b9\uff0c\u4e2d\u9014\u7ef4\u62a4\u4e00\u4e0b max \u5373\u53ef\u3002\n\n$\\texttt{code:}$\uff08\u4ec5\u6838\u5fc3\u90e8\u5206\uff09\n```cpp\nconst int N=1000005;\nint a[N<<2],ans=1;\n//a[k]=0:\u53f6\u5b50\u8282\u70b9/\u672a\u88ab\u8bbf\u95ee\u5230\n//a[k]=1:\u4e0b\u4e00\u6b65\u5728\u5de6\u5b50\u6811\u5206\u88c2\uff0ca[k]=2\u53cd\u4e4b\nvoid add(int k)\n{\n\tif(a[k]==0)//\u8bbf\u95ee\u5230\u53f6\u5b50\u8282\u70b9 \n\t{\n\t\tans=max(ans,k<<1|1);//\u6700\u5927\u4e0b\u6807\u80af\u5b9a\u5728\u53f3\u513f\u5b50 \n\t\ta[k]=1;//\u8bbe\u4e3a\u5f80\u5de6 \n\t\treturn;\n\t}\n\tadd(k<<1|(a[k]-1));//\u9012\u5f52\u4e0b\u53bb \n\ta[k]=3-a[k];//\u66f4\u65b0\u65b9\u5411(1->2,2->1) \n}\n```\n## 100pts\n\u9996\u5148\uff0c\u770b\u5230 $\\bigoplus\\limits_{i=l}^rf(i)$\uff0c\u80af\u5b9a\u5bb9\u65a5\u4e00\u4e0b\uff0c\u8bbe $g(n)=\\bigoplus\\limits_{i=1}^nf(i)$\uff0c\u7b54\u6848\u5c31\u662f $g(r)\\;\\oplus\\;g(l-1)$\u3002\n\n\u5982\u679c\u6211\u4eec\u6253\u4e2a\u8868\u6211\u4eec\u4f1a\u53d1\u73b0\uff1a$\\forall k,1\\le t\\le 2^k-1$\uff0c$f(2^k+2t)=f(2^k+2t+1)$\u3002\n\n\u8fd9\u662f\u56e0\u4e3a\uff0c\u5f53 $n$ \u4ece $2^k+2t$ \u53d8\u6210 $2^k+2t+1$ \u65f6\uff0c\u5206\u88c2\u7684\u662f\u5de6\u5b50\u6811\u5185\u7684\u8282\u70b9\uff0c\u4f46\u6b64\u65f6\u53f3\u5b50\u6811\u5185\u6700\u4e0b\u9762\u4e00\u5c42\u80af\u5b9a\u6709\u8282\u70b9\uff0c\u8fd9\u6b21\u6539\u52a8\u5bf9\u7b54\u6848\u6ca1\u6709\u5f71\u54cd\u3002\n\n\u7531\u4e8e$a\\;\\oplus\\;a=0$\uff0c\u6c42 $g(n)$ \u65f6\u53ef\u4ee5\u723d\u5feb\u7684\u7ea6\u6389\u4e00\u5927\u5806\uff0c\u7136\u540e\u5c31\u53ea\u5269\u4e0b\u6240\u6709 $f(2^k)$\uff0c$f(2^k+1)$\uff0c\u4ee5\u53ca\uff08\u53ef\u80fd\uff09$f(n)$\u3002\n\n\u524d\u9762\u4e24\u4e2a\u975e\u5e38\u597d\u6c42\uff0c\u56e0\u4e3a\u90a3\u4e2a\u65f6\u5019\u7a7a\u95f4\u6ca1\u6709\u6d6a\u8d39\uff0c$f(n)=2n-1$\uff1b\u4f46\u540e\u9762\u90a3\u4e2a\u5c31\u8981\u8003\u8651\u4e00\u4e0b\u4e86\uff0c\u6211\u4eec\u8fd8\u8981\u8003\u8651\u5982\u4f55\u5feb\u901f\u8ba1\u7b97 $f(n)$\u3002\n\n\u5148\u4ecb\u7ecd\u4e00\u4e2a $O(1)$ \u5224\u65ad\u662f\u5426\u662f $2^k$ \u7684\u65b9\u6cd5\uff1a\n```cpp\nbool ispow(ll n){return (n&(n-1))==0;}\n```\n\u539f\u7406\u8bf7\u5404\u4f4d\u81ea\u884c\u4f53\u4f1a\u3002\n\n\u5148\u8ba1\u7b97\u51fa $n$ \u8282\u70b9\u7684\u7ebf\u6bb5\u6811\u7684\u5c42\u6570 $dep$\uff08\u6839\u8282\u70b9\u4e3a0\u5c42\uff09\uff0c\u7136\u540e\u5982\u679c $n\\neq 2^k,2^k+1$\uff0c\u90a3\u4e48\u5de6\u8fb9\u5373\u4f7f\u6ca1\u5360\u6ee1\u4e5f\u662f\u8981\u5168\u7b97\u7684\uff0c\u56e0\u6b64 $f(n)=2^{dep}+f(n/2)$\u3002\u9012\u5f52\u4e00\u5b9a\u4f1a\u9012\u5f52\u5230\u8fb9\u754c\uff08$n=2^k,2^k+1$\uff09\u3002\n\n$\\texttt{code:}$\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<fstream>\n#include<cmath>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\n#define Set(a) memset(a,0,sizeof(a))\n#define F(i,a,b) for(register int i=a,i##end=b;i<=i##end;++i)\n#define UF(i,a,b) for(register int i=a,i##end=b;i>=i##end;--i)\n#define openf(a) freopen(#a\".in\",\"r\",stdin);freopen(#a\".out\",\"w\",stdout)\n#define re register\n#define ri re int\n#define il inline\ntypedef long long ll;\ntypedef unsigned long long ull;\ntemplate<typename T> inline T rd(T& x)\n{\n\tT f=1;x=0;char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(; isdigit(c);c=getchar()) x=(x<<3)+(x<<1)+(T)(c-'0');\n\tx*=f;\n\treturn x;\n}\nll rd(){ll x;rd(x);return x;}\ninline int max(int a,int b){return a>b?a:b;}\ninline int min(int a,int b){return a<b?a:b;}\nconst int inf=1<<30;\n\n#include<map>\n#define int ll\nll n;\nint _Logu(ll n)\n{\n\tint l=0,r=63;\n\twhile(l<r)\n\t{\n\t\tint mid=(l+r)>>1;\n\t\tif((1ll<<mid)<n) l=mid+1;\n\t\telse r=mid;\n\t}\n\treturn l;\n}\nbool ispow(ll n){return ((n&(n-1))==0);}\nll f(ll n,ll dep)\n{\n\tif(ispow(n)||ispow(n-1)) return 2*n-1;\n\treturn (f(n>>1,dep-1)+(1ll<<dep));\n}\nll f(ll n){return f(n,_Logu(n));}\nll fx(ll n)\n{\n\tif(n==0) return 0;\n\tll ret=0;\n\tmap<int,bool> m;\n\t#define add(x) if((x)<=n&&!m[x]) {m[x]=true;ret^=f(x);}\n\tfor(re ll i=1;i<=n;i<<=1) {add(i) add(i+1)}\n\tif((n&1)==0&&!m[n]) ret^=f(n);\n\treturn ret;\n}\nsigned main()\n{\n\tll l,r;\n\tcin>>l>>r;\n\tcout<<(fx(r)^fx(l-1))<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1579063732,
        "uid": 130151,
        "name": "WYXkk",
        "ccfLevel": 9,
        "title": "\u3010\u9898\u89e3\u3011\u7ebf\u6bb5\u6811"
    },
    {
        "content": "\u8fd9\u9898\u5341\u5206\u5728\u8003\u573a\u4e0a\u5341\u5206\u5751,\u8c03\u4e86$1$\u4e2a\u591a\u5c0f\u65f6\u540e\u7ed3\u679c\u662f\u9898\u76ee\u51fa\u9505\u4e86,\u73b0\u5728\u8bf4\u4e00\u4e0b\u6211\u7684\u505a\u6cd5\u3002\n## 10pts\n\u66b4\u529b,\u5728\u8fd9\u91cc\u4e0d\u5c55\u5f00\u4e86\u3002\n## 40pts\n\u5bf9\u4e8e\u4e00\u73c2\u7ebf\u6bb5\u6811,\u6211\u4eec\u53ea\u8981\u8d70\u6700\u5927\u7684\u90a3\u6761\u8def,\u5e76\u5f97\u5230\u6700\u7ec8\u8282\u70b9\u5750\u6807\u5373\u53ef\u3002\u5177\u4f53\u65b9\u6cd5\u5982\u4e0b:\n\u5047\u8bbe\u6211\u4eec\u8d70\u5230\u4e00\u4e2a\u8282\u70b9,\u5b83\u7684\u5b50\u6811\u5171\u6709$x$\u4e2a\u8282\u70b9,\u5b83\u7684\u4e0b\u6807\u4e3a$y$,\n\u8981\u6c42\u7684\u662f\u5b50\u6811\u4e0a\u6700\u5927\u4e0b\u6807\uff1a\n\n1. \u9996\u5148\u5982\u679c`x==1`,\u76f4\u63a5\u8fd4\u56de$y$\n1. \u5426\u5219,\u5982\u679c`x%2==0`,\u8fd4\u56de\u7684\u6700\u5927\u4e0b\u6807\u4e00\u5b9a\u5728\u53f3\u5b50\u6811\u3002\n1. \u5426\u5219,\u5982\u679c`lowbit(x/2)==x/2` \u8868\u793a\u5de6\u5b50\u6811\u6df1\u5ea6\u6df1\uff0c\u8fd4\u56de\u7684\u6700\u5927\u4e0b\u6807\u4e00\u5b9a\u5728\u5de6\u5b50\u6811\u3002\n1. \u5426\u5219,\u76f4\u63a5\u8fd4\u56de\u53f3\u5b50\u6811(\u56e0\u4e3a\u53f3\u5b50\u6811\u76f8\u540c\u6df1\u5ea6\u4e0b\u6807\u4e00\u5b9a\u6bd4\u5de6\u5b50\u6811\u5927)\n\n\u590d\u6742\u5ea6$O(nlogn)$ `n=(r-l+1)`\n\n\u5728\u8fd9\u91cc\u5c31\u4e0d\u5f00$long long$\u4e86\u53cd\u6b63\u4e5f\u8fc7\u4e0d\u4e86\n\n\u4ee3\u7801:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint l,r,S,SS,ans;\nint lowbit(int x) {\n\treturn x&-x;\n}\nint q(int x,int y) {\n\tif(x==1) return y;\n\tif(x%2==0) return q(x/2,y*2+1);\n\telse if(lowbit(x/2)==x/2) return q(x/2+1,y*2);\n\telse return q(x/2,y*2+1);\n}\nint main() {\n\tscanf(\"%d%d\",&l,&r);\n\tS=l;\n\twhile(1) {\n\t\tSS=S;\n\t\tfor(int i = 40; i >= 0; i--) {\n\t\t\tint QwQ=(1ll<<i);\n\t\t\tif(q(S,1)==q(S+QwQ,1)) S+=QwQ;\n\t\t}\n\t\tif(S>=r) {\n\t\t\tif((r-SS+1)%2) ans^=q(S,1);\n\t\t\tprintf(\"%d\",ans);\n\t\t\treturn 0;\n\t\t}\n\t\tif((S-SS+1)%2) ans^=q(S,1);\n\t\t++S;\n\t}\n\treturn 0;\n}\n```\n## 100pts\n\u7136\u540e\u6211\u53d1\u73b0,\u6709\u975e\u5e38\u591a\u7684\u8fde\u7eed\u7684$f(i)$\u76f8\u540c,\u6bd4\u5982$f(1536)$~$f(2047)$\u5747\u76f8\u540c,\u4e8e\u662f\u5c31\u60f3\u5230\u4e86\u500d\u589e\u5904\u7406\u3002\n\n\u6700\u7ec8\u5982\u679c\u8fde\u7eed\u7684\u4e2a\u6570\u4e3a\u5947\u6570\u90a3\u4e48\u5c06$ans$\u5f02\u6216\u5176\u4e2d\u7684$f$\u51fd\u6570\u503c\u3002\n\n\u4ee3\u7801\u957f\u5ea6\u77ed,\u65f6\u95f4\u590d\u6742\u5ea6\u5f88\u4f4e\u4f46\u4e3a$O($\u7384\u5b66$)$\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long l,r,S,SS,ans;\nlong long lowbit(long long x) {\n\treturn x&-x;\n}\nlong long q(long long x,long long y) {\n\tif(x==(1ll)) return y;\n\tif(!(x&(1ll))) return q(x/(2ll),y*(2ll)+(1ll));\n\telse if(lowbit(x/(2ll))==x/(2ll)) return q(x/(2ll)+(1ll),y*(2ll));\n\telse return q(x/(2ll),y*(2ll)+(1ll));\n}\nint main() {\n\tscanf(\"%lld%lld\",&l,&r);\n\tS=l;\n\twhile(1) {\n\t\tSS=S;\n\t\tfor(long long i = (40ll); i >= (0ll); i--) {\n\t\t\tlong long QwQ=((1ll)<<i);\n\t\t\tif(q(S,(1ll))==q(S+QwQ,(1ll))) S+=QwQ;\n\t\t}\n\t\tif(S>=r) {\n\t\t\tif((r-SS+(1ll))%(2ll)) ans^=q(S,(1ll));\n\t\t\tprintf(\"%lld\",ans);\n\t\t\treturn 0;\n\t\t}\n\t\tif((S-SS+(1ll))%(2ll)) ans^=q(S,(1ll));\n\t\t++S;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1580394577,
        "uid": 173660,
        "name": "zhoukangyang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6025 \u3010\u7ebf\u6bb5\u6811\u3011"
    },
    {
        "content": "# \u524d\u8a00\n\u4e00\u534a\u50cf\u8fd9\u79cd\u9898\u90fd\u662f\u53ef\u4ee5\u627e\u89c4\u5f8b\u7684\uff0c\u4e8e\u662f\u70ed\u7231\u627e\u89c4\u5f8b\u6765\u505a\u9898\u7684\u6211\u7acb\u523b\u5f00\u59cb\u627e\u89c4\u5f8b\n\n\u627e\u89c4\u5f8b\u7684\u795e\u4ed9\u9898\n\n\u524d\u7f6e\u77e5\u8bc6\uff1a[\u627e\u89c4\u5f8b\u4e13\u7528\u7f51\u7ad9](http://oeis.org/)\n\n\u6211\u6bd4\u8d5b\u65f6\u5c31\u662f\u9760\u8fd9\u4e2a\u7f51\u7ad9\u627e\u5230\u89c4\u5f8b\u624d\u505a\u51fa\u6765\u7684\n\n\u51e0\u4e4e\u4e09\u4e2a\u5c0f\u65f6\u90fd\u7528\u6765\u505a\u8fd9\u9053\u9898\u4e86\uff0c~~\u7ed3\u679c\u51fa\u9898\u4eba\u6570\u636e\u8fd8\u9519\u4e86~~\n\n# \u5206\u6790\n\u9996\u5148\uff0c\u6839\u636e\u5bb9\u65a5\u539f\u7406\u53ef\u5f97\n\n$\\text{f(l) xor f(l+1) xor f(l+2) xor...xor f(r)=f(1) xor f(2) xor ... xor f(l-1) xor f(1) xor f(2) xor ... xor f(r)}$\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ea\u8981\u80fd\u6c42\u51fa\n\n$\\text{f(1) xor f(2) xor ... xor f(n)}$\n\n\u5c31\u53ef\u4ee5\u89e3\u51b3\u533a\u95f4\u7684\u95ee\u9898\n\n\u4e3a\u65b9\u4fbf\u4e0b\u6587\u53d9\u8ff0\uff0c\u6211\u4eec\u8bbe$\\text{k(i)=f(1) xor f(2) xor ... xor f(n)}$\n\n\u518d\u8005\uff0c\u51fa\u9898\u4eba\n~~\u5f88\u826f\u5fc3~~\n\u5730\u7ed9\u51fa\u4e86\u7ebf\u6bb5\u6811\u7684\u5efa\u6811\u4ee3\u7801\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u6539\u51fa\u66b4\u529b\u4ee3\u7801\uff08\u89c1$\\text{Code1}$\uff09\n\n\u8fd9\u6837\u53ef\u4ee5\u5feb\u901f\u5730\u5e2e\u52a9\u6211\u4eec\u6253\u4e00\u5f20\u5c0f\u8303\u56f4\u7684\u8868$\\text{(1 to 64)}$\uff0c\u5982\u4e0b\u56fe\u6240\u793a\n![](https://cdn.luogu.com.cn/upload/image_hosting/n4r7rh9f.png)\n![](https://cdn.luogu.com.cn/upload/image_hosting/vvifdthd.png)\n\n\u67d3\u8272\u90e8\u5206\u5c31\u662f\u6211\u4eec\u7528\u4e8c\u8fdb\u5236\u6240\u5212\u5206\u51fa\u6765\u7684\u4e0d\u540c\u7684\u5757\uff0c\u5176\u4e2d\u989c\u8272\u65b9\u683c\u4e2d\u5de6\u4fa7\u662f$\\text{(1 to 64)}$\u7684\u8fde\u7eed\u81ea\u7136\u6570\uff0c\u53f3\u8fb9\u4e00\u5217\u662f\u5bf9\u5e94\u7684$f(i)$\u7684\u503c\uff0c\u518d\u53f3\u4fa7\u7684\u4e00\u7ad6\u5217\u662f$k(i)$\uff0c\u5757\u4ece\u6700\u4e0a\u9762\u5f00\u59cb\u662f$\\text{\u57570(1)\uff0c\u57571(2)\uff0c\u57572(4)\uff0c\u57573(8)...}$\n\n\u4e00\u773c\u5c31\u53ef\u4ee5\u53d1\u73b0\u540c\u4e00\u4e2a\u5757\u5185\u5947\u6570\u7684$k(i)$\u76f8\u540c\uff0c\u6211\u4eec\u628a\u8fd9\u4e9b\u5757\u4e2d\u7684$k(i)$\u503c\u5217\u51fa\u6765\uff08\u4ece\u57572\u5f00\u59cb\uff09\n$$\\text{7,9,23,41,87}$$\n\u597d\u50cf\u4e0d\u662f\u4e00\u773c\u53ef\u4ee5\u770b\u51fa\u6765\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4e0a$Oeis$\u641c\u4e00\u4e0b\uff0c\u627e\u5230\u7684\u7b2c\u4e00\u4e2a\u5e94\u8be5\u662f[A083582](http://oeis.org/A083582),\u544a\u77e5\u4e86\u6211\u4eec\u89c4\u5f8b$a(n)=(8*2^n-5*(-1)^n)/3$\n\n$\\color{red}\\text{\u6ce8\u610f:}$\u524d\u9762\u7684$\\text{1 to 4}$\u5efa\u8bae\u6253\u8868\uff0c\u56e0\u4e3a\u4e0d\u5927\u7b26\u5408\u89c4\u5f8b\n\n\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u7528\u66b4\u529b\u7b97\u6cd5\u8ba1\u7b97\u4e00\u4e0b\u540e\u9762\u7684\u7ed3\u679c\u8fdb\u884c\u9a8c\u8bc1\uff0c\u53d1\u73b0\u8fd9\u4e2a\u89c4\u5f8b\u662f\u53ef\u9760\u7684\n\n\u7136\u540e\u6211\u4eec\u518d\u770b\u6240\u6709$2^n$\u7684$k(i)$\u503c\uff08\u4ece\u57572\u5f00\u59cb\uff09\n$$0,6,8,22,40,86,168$$\n\u518d\u770b\u4e00\u4e0b[A083582](http://oeis.org/A083582)\u7684\u5e8f\u5217\n$$1,7,9,23,41,87,169$$\n\u53d1\u73b0\u4e86\u4ec0\u4e48\uff0c\u8fd9\u5c31\u662f$A083582$\u6240\u4ea7\u751f\u7684\u5e8f\u5217\u51cf1\u6240\u4ea7\u751f\u7684\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u63a2\u8ba8\u6700\u9ebb\u70e6\u7684\u90e8\u5206\u2014\u2014\n**\u5076\u6570**\n\n\u6211\u4eec\u5148\u89c2\u5bdf\u4e00\u4e0b\u540c\u4e00\u4e2a\u5757\u4e2d\u5076\u6570\u7684$f(i)$\uff08\u4ee5\u57576\u4e3a\u4f8b\uff09\n$$97,113,113,121,121,121,121,125,125,125,125,125,125,125,125$$\n\n\u53d1\u73b0\u540c\u4e00\u4e2a\u7b54\u6848\u91cd\u590d\u7684\u6b21\u6570\u521a\u597d\u662f$2^n$\uff0c\u8ba9\u6211\u4eec\u628a\u91cd\u590d\u7684\u7701\u53bb\n$$97,113,121,125$$\n\u76f8\u90bb\u7684\u6c42\u5dee\u4e4b\u540e\u5f97\u5230\n$$16,8,4$$\n\u539f\u6765\u589e\u5927\u7684\u503c\u662f\u4ee5$2^n$\u5728\u51cf\u5c0f\n\n\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u5206\u6790\u4e00\u4e0b\u5176\u5b83\u51e0\u4e2a\u5757\uff0c\u4e5f\u53d1\u73b0\u4e86\u7c7b\u4f3c\u7684\u89c4\u5f8b\uff08\u53ef\u4ee5\u81ea\u884c\u624b\u52a8\u63a2\u7a76\uff09\n\n\u90a3\u4e48\u6211\u4eec\u8fd8\u5269\u4e0b\u4e09\u4e2a\u95ee\u9898\n\n- \u6bcf\u4e2a\u5757\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5076\u6570\u7684$f(i)$\u600e\u4e48\u6c42 \n- \u6bcf\u4e2a\u5757\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e00\u4e2a$f(i)$\u4e4b\u95f4\u7684\u5dee\u600e\u4e48\u6c42\n- \u5f97\u5230$f(i)$\u4e4b\u540e\u600e\u4e48\u6c42$k(i)$\n~~(\u8fd9\u8fd8\u7528\u95ee\u5417)~~\n\n\u6211\u4eec\u4e00\u4e2a\u4e00\u4e2a\u6765\u89e3\u7b54\n\n- \u6bcf\u4e2a\u5757\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5076\u6570\u7684$f(i)$\u600e\u4e48\u6c42 \n\u6211\u4eec\u6765\u89c2\u5bdf\u4e00\u4e0b\u57574\u5f00\u59cb\u7684\u7b2c\u4e00\u4e2a\u5076\u6570\u7684$f(i)$\n$$25,49,97$$\n\u4e0a$oies$\u641c\u4e86\u4e00\u4e0b\u4f1a\u8df3\u51fa\u676511\u4e2a\u7ed3\u679c\uff0c\u7b2c\u4e00\u4e2a\u662f\u4e03\u9879\u7684\u6590\u6ce2\u90a3\u5951\uff0c\u4e0d\u8981\u9009\u8fd9\u4e2a\uff0c\u6211\u4e00\u5f00\u59cb\u60f3\u90fd\u6ca1\u60f3\u5c31\u9009\u4e86\u8fd9\u4e2a\uff0c\u540e\u6765\u5bf9\u62cd\u65f6\u53d1\u73b0\u7684\u9519\u8bef\uff0c\u5e94\u8be5\u7528\u66f4\u5927\u7684\u6570\u636e\u53bb\u9a8c\u8bc1\u4e00\u4e0b\uff0c\u5e94\u8be5\u9009\u7684\u662f[A181565](http://oeis.org/A181565)\uff0c\u63d0\u4f9b\u7684\u89c4\u5f8b\u662f$a(n) = 3*2^n + 1.$\n\n\u7b2c\u4e00\u4e2a\u95ee\u9898\u5706\u6ee1\u89e3\u51b3\u4e86\n- \u6bcf\u4e2a\u5757\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e00\u4e2a$f(i)$\u4e4b\u95f4\u7684\u5dee\u600e\u4e48\u6c42\n\n\u4f9d\u7136\u662f\u627e\u89c4\u5f8b\n\n\u53d1\u73b0\u4ece\u57574\u5f00\u59cb\u7684\u5dee\u662f\u8fd9\u6837\u7684\n$$4,8,16......$$\n\n\u8fd9\u4e2a\u89c4\u5f8b\u5f88\u597d\u627e\u3002\u6211\u4eec\u5757$n$\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u548c\u7b2c\u4e00\u4e2a$f(i)$\u4e4b\u95f4\u7684\u5dee\u5373\u4e3a$2^{n-2}$\n- \u5f97\u5230$f(i)$\u4e4b\u540e\u600e\u4e48\u6c42$k(i)$\n\n\u6beb\u65e0\u7591\u95ee\u7528$f(i)$\u53bb$xor$\u4e00\u4e0b$k(i-1)$\u5373\u53ef\uff0c$k(i-1)$\u5728\u540c\u4e00\u5757\u4e2d\u5c31\u662f\u6211\u4eec\u6c42\u51fa\u6765\u7684\u5947\u6570\u7684\u5b9a\u503c\n\n- \u5173\u4e8e\u5224\u65ad\u662f\u5426\u662f$2^n$\u7684\u65b9\u6cd5\n\n[\u51fa\u9898\u4eba](https://www.luogu.com.cn/user/130151)\u5728\u4ed6\u7684[\u9898\u89e3](https://www.luogu.com.cn/blog/wyxkk-233/post-ti-xie-xian-duan-shu)\u4e2d\u7ed9\u51fa\u4e86$O(1)$\u7684\u65b9\u6cd5\n```cpp\nbool ispow(ll n){return (n&(n-1))==0;}\n```\n\n\u5230\u6b64\uff0c\u6211\u4eec\u7684\u5206\u6790\u7ed3\u675f\uff0c\u5f00\u59cb\u7801\u4ee3\u7801\uff0c\u6700\u7ec8\u4ee3\u7801\u89c1$Code2$\n# $\\text{Tips}$\n\u5f00$\\color{red}\\text{long long}$\n# $\\text{Code}$\n### $\\text{Code1}$\n```cpp\n//\u51fa\u9898\u4eba\u9001\u6211\u4eec\u7684\u9a97\u5206\u4ee3\u7801\n#include<bits/stdc++.h>\nusing namespace std;\nint ans,w;\nvoid build(int k,int l,int r)\n{\n\tans=max(k,ans);\n\tif(l==r)\n\t{\n\t\t//do something\n\t\t//e.g. tree[k]=a[l]\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild(k<<1,l,mid);\n\tbuild(k<<1|1,mid+1,r);\n\t//do something\n\t//e.g. tree[k]=tree[k<<1]+tree[k<<1|1]\n}\nint main()\n{\n\tint n,l,r;\n\tcin>>l>>r;\n\tfor (n=l;n<=r;n++)\n\t{\n\t\tans=0;\n\t\tbuild(1,1,n);\n\t\tw=w^ans;\n\t}\n\tcout<<w<<endl;\n}\n```\n### $\\text{Code2}$\n```cpp\n#include<bits/stdc++.h>\ntypedef long long ll;\ntypedef double db;\ntypedef long double ld;\ntypedef unsigned long long ull;\nusing namespace std;\null w,a[100],b[100],c[100],d[100];\null l,r,k,wx,wy;\null ans(ull n)\n{\n\tull i,ii,j,t,tt,ww;\n\tif (n==0) return 0;\n\tif (n==1) return 1;\n\tif (n==2) return 2;\n\tif (n==3) return 7;\n\tif (n==4) return 0;//\u5c0f\u7684\u5148\u6253\u8868\u5904\u7406\u6389\n\tfor (i=63;i>=0;i--)\n\t\tif (n>a[i]) break;\n\ti++;//\u5224\u65ad\u5728\u7b2c\u51e0\u4e2a\u5757\n\tii=i;\n\tif (n%2==1) return b[i]; //\u5947\u6570\n\tif (n==a[i]) return c[i];//2\u7684\u6574\u6570\u6b21\u5e42\n\tt=d[i];//\u8be5\u5757\u4e2d\u5947\u6570f(i)\u7684\u9996\u9879\n\ttt=n-a[i-1];\n\ttt/=2;\n\tfor (i=63;i>=0;i--)\n\t  if (tt>=a[i]) break;//\u8ba1\u7b97\u53bb\u6389\u6240\u6709\u7684\u91cd\u590d\u4e4b\u540e\u662f\u7b2c\u51e0\u9879\n\tww=a[ii-2];\n\tfor (j=1;j<=i;j++)\n\t{\n\t\tt=t+ww;\n\t\tww/=2;\n\t}//\u8ba1\u7b97\u5f53\u524d\u7684f(i)\n\treturn t^b[ii];//\u8ba1\u7b97k(i)\n}\nint main()\n{\n\ta[0]=1;\n\tfor (ull i=1;i<=63;i++)\n\ta[i]=a[i-1]*2;//\u8ba1\u7b972\u7684\u6574\u6570\u6b21\u5e42\n\td[2]=7;\n\td[3]=13;\n\td[4]=25;\n\td[5]=49;\n\td[6]=97;\n\tfor (ull i=7;i<=60;i++)\n\t{\n\t\td[i]=3*a[i-1]+1;\n\t}//\u9884\u5904\u7406\u6bcf\u4e2a\u5757\u4e2d\u5076\u6570\u7684f(i)\u7684\u9996\u9879\n\tfor (ull i=1;i<=60;i++)\n\t{\n\t\tk=i-1;\n\t\tif (k%2==1)\n\t\tb[i]=(8*a[k]+5)/3;\n\t\telse b[i]=(8*a[k]-5)/3;//\u8ba1\u7b97\u5757\u5185\u5947\u6570\u76f8\u540c\u7684k(i)\n\t\tc[i+1]=b[i]-1;//\u9884\u5904\u74062\u7684\u6574\u6570\u6b21\u5e42\u7684k(i)\n\t}\n\tcin>>l>>r;\n\twx=ans(l-1);\n\twy=ans(r);\n\tw=wx^wy;//\u83b7\u53d6\u4e24\u4e2ak(i)\u518dxor\u83b7\u5f97\u533a\u95f4\u7684\u7b54\u6848\n\tcout<<w<<endl;\n}\n```\n# \u540e\u8a00\n\u4e00\u5b9a\u8981\u6562\u60f3\uff0c\u6562\u731c\uff0c\u6562\u63a8\uff0c\u8fd9\u6837\u9762\u5bf9\u96be\u9898\u7684\u65f6\u5019\u5c31\u6709\u4e86\u4e3b\u52a8\u6743\n\n$\\mid\\color{red}\\text{\u8bda\u5b9e\u9762\u5bf9\u81ea\u5df1\u7684\u60b2\u4f24\uff0c\u4e0e\u4e8b\u4e0e\u613f\u8fdd\u7684\u4e16\u754c\u91ca\u6000}$",
        "postTime": 1580474540,
        "uid": 136542,
        "name": "chinaxjh",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6025 \u3010\u7ebf\u6bb5\u6811\u3011"
    },
    {
        "content": "\u8001\u592b\u88ab\u5361\u4e86\u4e24\u4e2a\u5c0f\u65f6\uff0c\u7ec8\u4e8eAC\u4e86\uff0c\u6765\u4e00\u53d1\u9898\u89e3\u3002\n\n\u9996\u5148\u8fd9\u9053\u9898\u7684\u5965\u4e49\u5728\u4e8e\u627e\u89c4\u5f8b\u3002\n\n\u901a\u8fc7\u66b4\u529b\u5efa\u6811\u6765\u6253\u8868\uff0c\u6253\u51fa1~1000\u7684\u65f6\u5019\uff0c\u6211\u53d1\u73b0\u5176\u4e2d\u6709\u51e0\u4e2a\u89c4\u5f8b\uff1a\n\n[\u8fd9\u662f\u6253\u76841\u52301050\u7684\u8868](https://www.luogu.com.cn/paste/otxjgttw)\n\n### \u7b2c\u4e00\u4e2a\u89c4\u5f8b\n\n$f(130)-f(129)=128$\n\n$f(132)-f(130)=64$\n\n$f(136)-f(132)=32$\n\n$f(144)-f(136)=16$\n\n\u53d1\u73b0\u6ca1\u6709\uff0c\u4e0b\u6807\u7684\u5dee\u6b63\u597d\u662f2\u7684\u6574\u6570\u6b21\u5e42\uff0c\u6570\u503c\u7684\u5dee\u4e5f\u6b63\u597d\u662f2\u7684\u6574\u6570\u6b21\u5e42\uff0c\u5728\u4e00\u5b9a\u8303\u56f4\u5185\uff0c$log_2$(\u6570\u503c\u5dee\uff09+$log_2$(\u4e0b\u6807\u5dee)=\u4e00\u4e2a\u5e38\u6570\u3002\n\n\u6362\u79cd\u773c\u5149\u770b\uff0c\u6211\u4eec\u5728$[1,n]$\u8fd9\u4e2a\u533a\u95f4\u91cc\u9762f\u7684\u53d6\u503c\u6700\u591a\u53ea\u6709$log_2^2n$\u79cd\u3002\n\n\n### \u7b2c\u4e8c\u4e2a\u89c4\u5f8b\uff08\u5176\u5b9e\u662f\u53cd\u4f8b\uff09\n\n\u8fd9\u89c4\u5f8b\u5728x<=5\u7684\u65f6\u5019\u5e76\u4e0d\u9002\u7528\uff0c\u5e76\u4e14\u5f53$log_2$(\u4e0b\u6807\u5dee)=0\u7684\u65f6\u5019\uff0c\u6570\u503c\u5dee\u8fd8\u662f2\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u7279\u5224\u4e00\u4e0b\u3002\n\n### \u7b2c\u4e09\u4e2a\u89c4\u5f8b\n\n\u4e0d\u96be\u53d1\u73b0\u4e0b\u6807\u5dee\u662f\u6574\u6570(\u6570\u503c\u5dee\u4e3a2\u9664\u5916),\u6309\u7167\u5f02\u6216\u7684\u6027\u8d28\uff0c\u5076\u6570\u4e2a\u76f8\u540c\u6570\u5b57\u5f02\u6216\u548c\u662f0\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u53ea\u7279\u5224\u4e00\u4e0bl\u548cr\u6240\u5728\u7684\u5730\u65b9\uff0c\u5e76\u4e14\u628a\u4e0b\u6807\u5dee\u4e3a2\u7684\u4e1c\u897f\u653e\u5728\u4e00\u4e2a\u961f\u5217\u91cc\u9762\uff0c\u5e76\u4e14\u7b97\u4ed6\u4eec\u7684\u5f02\u6216\u548c\u5c31\u884c\u4e86\u3002\n\n### \u7b2c\u56db\u4e2a\u89c4\u5f8b\n\n\u7b2c\u4e00\u4e2a\u89c4\u5f8b\u91cc\u9762\u201c\u4e00\u5b9a\u8303\u56f4\u201d \u6bcf\u6b21\u4f1a\u7ffb\u500d\uff0c\u4e0d\u4fe1\u4f60\u53bb\u770b\u6211\u6253\u7684\u8868\u3002\n\n\u56e0\u6b64\u6211\u4eec\u5c31\u53ef\u4ee5\u5199\u51fa\u6765\u4ee3\u7801\u4e86\uff0c\u4f46\u662f\u7ec6\u8282\u8fd8\u662f\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u6211\u4f1a\u5728\u4ee3\u7801\u91cc\u9762\u63d0\u793a\u3002\n\n\n\n\u7531\u6b64\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u53cc\u91cd\u5faa\u73af\u7684\u5f62\u5f0f\u6765\u89e3\u51b3\u8fd9\u9053\u95ee\u9898\u3002\n\n\u4e8e\u662f\u4ee3\u7801\u5c31\u6e05\u6670\u4e86\u8d77\u6765\n\n```cpp\n#include<touwenjian.h>\n\n#define int long long\n\nusing namespace std;\n\nint l,r,trg,pla;\nint f[]={0,1,3,7,7,9}; //\u524d5\u4e2a\u8981\u7279\u5224 \nqueue <int> q; \n\ninline void getque()\n{\n\tint nownum,nowf;  // nownum : \u73b0\u5728\u5904\u7406\u5230\u7684\u6570\u5b57\uff0cnowf: \u73b0\u5728f(nownum) \n\tint jmp;  //\u4e00\u6b21\u8df3\u8dc3\u7684\u8ddd\u79bb \n\tint nowlas=2ll,nowlen=2ll,lasf;  // nowlas \u73b0\u5728\u8fd9\u6b21 \n\tint lker=0;\n\tint lasnum=5ll;\n\tnowf=9ll;\n\tfor(int i=1;i<=5;i++) if(l<=i&&r>=i) q.push(f[i]);\n\tnownum=5ll;\n\tif(r<=5) return ;\n\twhile(nownum<=r)\n\t{\n\t\twhile(nowlas>=0)\n\t\t{\n\t\t\tif(nowlas==0) jmp=1;\n\t\t\telse jmp=1ll<<(nowlen-nowlas);  //\u4e00\u5b9a\u8981\u52a0ll\uff0c\u4e0d\u7136\u4f1a\u88ab\u8ba4\u4e3a\u662f32\u4f4d\u7684\u4f4d\u8fd0\u7b97\uff0c\u8ba9\u4f60TLE 60\u5206 \n\t\t\tlasnum=nownum;\n\t\t\tnownum+=jmp;\n\t\t\tif(nownum==r) //\u6ce8\u610f\u76f8\u7b49\u7684\u65f6\u5019\u8981\u7279\u6b8a\u5904\u7406 \n\t\t\t{\n\t\t\t\tlasf=nowf;\n\t\t\t\tnowf+=1ll<<nowlas;\n\t\t\t\tif(nowlas==0) nowf++;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if(nownum>r) break;\n\t\t\tlasf=nowf;\n\t\t\tnowf+=1ll<<nowlas;\n\t\t\tif(nowlas==0) nowf++;\n\t\t\tif(nowlas==1||nowlas==0) \n\t\t\t{\n\t\t\t\tif(nownum>=l&&nownum<=r)   //\u7b26\u5408\u6761\u4ef6\u624d\u80fd\u653e\u5165\u961f\u5217\u91cc\u9762 \n\t\t\t\t{\n\t\t\t\t\tq.push(nowf);\n\t\t\t\t}\n\t\t\t} \n\t\t\tif(!lker&&nownum>l)  //\u8fd9\u91cc\u5e76\u4e0d\u80fd\u5199else\uff0c\u5c24\u5176\u8981\u6ce8\u610f\u3002 \n\t\t\t{\n\t\t\t\tlker=1;\n\t\t\t\tif((nownum-l)&1ll) q.push(lasf);\n\t\t\t}\n\t\t\tnowlas--; \n\t\t}\n\t\tif(nownum>=r) \n\t\t{\n\t\t\tif(nownum==r) q.push(nowf);\n\t\t\telse if(nowlas>=1) if((nownum-r+1)&1ll) q.push(nowf); \n\t\t\telse if(!lker) if((r-l+1)&1) q.push(nowf);  //\u6ce8\u610f\u5224\u65ad\u7684\u987a\u5e8f\uff1b \n\t\t\tbreak;\n\t\t}\n\t\tnowlen++;\n\t\tnowlas=nowlen;\n\t}\n\treturn ;\n}\n\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tregister int i,j;\n\tcin>>l>>r;\n\tgetque();\n\tint looker=q.front();\n\tq.pop();\n\twhile(!q.empty())\n\t{\n\t\tint looker2=q.front();\n\t\tq.pop();\n\t\tlooker^=looker2;\n\t}\n\tcout<<looker;\n\treturn 0;\n}\n\n```\n",
        "postTime": 1580482837,
        "uid": 38636,
        "name": "\u5bd2\u51b0\u5927\u5927",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6025 \u3010\u7ebf\u6bb5\u6811\u3011"
    },
    {
        "content": "## P6025 \u9898\u89e3\n\n*upd 23.2.1\uff1a\u4fee\u597d\u4e86\u94fe\u63a5\u3002*\n\n\u63d0\u4f9b\u4e00\u4e2a\u590d\u6742\u5ea6\u4e3a\u7684 $O(\\log n)$ \u7684\uff0c\u57fa\u4e8e\u6b63\u5e38\u5206\u6790\u800c\u975e\u6253\u8868\u7684\u505a\u6cd5\uff0c\u6211\u8ba4\u4e3a\u8fd9\u4e2a\u505a\u6cd5\u6bd4\u5f53\u524d\u9898\u89e3\u533a\u7684\u6240\u6709\u505a\u6cd5\u66f4\u52a0\u4f18\u7f8e\u3002\n\n\u8fd9\u9053\u9898\u76f8\u5f53\u4e0d\u9519\uff0c\u8003\u5bdf\u4e86\u7ebf\u6bb5\u6811\u548c\u4f4d\u8fd0\u7b97\u7684\u7406\u89e3\u3002\n\n### \u9898\u610f\n\n- \u4e00\u9897\u5e38\u89c4\u65b9\u5f0f\u6784\u5efa\u7684\u7ebf\u6bb5\u6811\uff0c\u6c42\u5927\u5c0f\u4e3a $1,2,3,\\cdots n$ \u7684\u7ebf\u6bb5\u6811\u5206\u522b\u5360\u7528\u7684\u6700\u5927\u7a7a\u95f4\uff0c\u5373\u6700\u5927\u4e0b\u6807\u3002\n\n- \u8f93\u51fa\u7b54\u6848\u7684\u5f02\u6216\u548c\u3002\n- $n\\leq 10^{15}$\n\n\u6784\u5efa\u4ee3\u7801\u4e3a\uff1a\n\n```cpp\nvoid build(int k,int l,int r)\n{\n\tif(l==r)\n\t{\n\t\t//do something\n\t\t//e.g. tree[k]=a[l]\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild(k<<1,l,mid);\n\tbuild(k<<1|1,mid+1,r);\n\t//do something\n\t//e.g. tree[k]=tree[k<<1]+tree[k<<1|1]\n}\n```\n\n**\u539f\u9898\u610f\u662f\u6c42 $f(l,r)$\uff0c\u4f46\u5f88\u5bb9\u6613\u8f6c\u5316\u4e3a\u6c42 $f(1,n)$\uff0c\u76f4\u63a5\u6c42 $f(1,l-1)\\bigoplus f(1,r)$ \u5373\u53ef\u3002**\n\n### \u5206\u6790\n\n#### 40PTS\n\n\u9996\u5148\uff0c\u7ebf\u6bb5\u6811\u5efa\u7acb\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f**\u4ece\u6839\u5f80\u4e0b\u8d70\u7684\u8fc7\u7a0b**\uff0c\u5f80\u5de6\u8d70\uff0c\u5411\u5f53\u524d\u7f16\u53f7\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u540e\u5199\u4e00\u4e2a $0$\uff0c\u5f80\u53f3\u8d70\uff0c\u5c31\u5199\u4e00\u4e2a $1$\u3002\n\n\u8003\u8651\u7ebf\u6bb5\u6811\u7684\u6700\u5927\u4e0b\u6807\u5728\u4f55\u5904\u53d6\u5230\uff0c\u7531\u4e8e\u53f3\u513f\u5b50\u4e0b\u6807\u76f8\u5bf9\u8f83\u5927\uff0c\u4e00\u4e2a\u6bd4\u8f83\u663e\u7136\u7684\u60f3\u6cd5\u662f\u4e00\u76f4\u8d70\u53f3\u513f\u5b50\uff0c\u4f46\u662f\u8fd9\u6837\u662f\u9519\u8bef\u7684\uff0c\u663e\u7136\u7684\u53cd\u4f8b\u4e3a $n=3$\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/7aesc0yg.png)\n\n\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c$[1,3]$ \u8282\u70b9\u7684\u5de6\u513f\u5b50\u6bd4\u53f3\u513f\u5b50\u591a\u4e00\u5c42\uff0c\u6240\u4ee5\u51fa\u73b0\u4e86\u8d70\u5de6\u513f\u5b50\u6700\u4f18\u7684\u60c5\u51b5\u3002\n\n**\u4f46\u662f\uff0c\u5982\u679c\u67d0\u4e2a\u8282\u70b9\u5904\u5de6\u53f3\u513f\u5b50\u9ad8\u5ea6\u76f8\u540c\uff0c\u90a3\u4e48\u5f88\u663e\u7136\u5e94\u8be5\u8d70\u53f3\u513f\u5b50\uff0c\u56e0\u4e3a\u5f53\u524d\u8fd9\u4e00\u6b65\u51b3\u5b9a\u7684\u4f4d\u6570\u662f\u6700\u9ad8\u4f4d\u3002**\n\n\u6240\u4ee5\u8d70\u5de6\u513f\u5b50\uff0c\u5f53\u4e14\u4ec5\u5f53\u5de6\u53f3\u513f\u5b50\u9ad8\u5ea6\u4e0d\u540c\uff0c\u4e0b\u9762\u5206\u6790\u7ebf\u6bb5\u6811\u7684\u9ad8\u5ea6\u548c\u957f\u5ea6\u7684\u5173\u7cfb\u3002\n\n\u9996\u5148\uff0c\u5b50\u6811\u6784\u5efa\u60c5\u51b5**\u53ea\u548c\u957f\u5ea6\u6709\u5173**\uff0c\u6240\u4ee5\u6211\u4eec**\u53ea\u5173\u5fc3\u957f\u5ea6\u800c\u975e\u5de6\u53f3\u7aef\u70b9**\uff0c\u7136\u540e\uff0c\u957f\u5ea6\u4e3a $2^k$ \u7684\u8282\u70b9\uff0c\u6784\u5efa\u51fa\u7684\u6811\u4e3a\u4e00\u9897\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u5176\u9ad8\u5ea6\u4e3a $k$\u3002 \u6b64\u65f6\uff0c\u5982\u679c\u70b9\u6570\u7ee7\u7eed\u589e\u5927\uff0c\u90a3\u4e48\u9ad8\u5ea6\u4e3a $k$ \u7684\u6811\u5c31\u65e0\u6cd5\u5bb9\u4e0b\u8fd9\u4e48\u591a\u8282\u70b9\uff0c\u9ad8\u5ea6\u4f1a\u53d8\u4e3a $k+1$\uff0c\u6240\u4ee5\uff0c\u957f\u5ea6\u4e3a $(2^k,2^{k+1}]$ \u7684\u8282\u70b9\uff0c\u6784\u5efa\u51fa\u5b50\u6811\u7684\u9ad8\u5ea6\u4e3a ${k+1}$\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u5e38\u89c4\u6784\u5efa\u65b9\u5f0f\u6784\u5efa\u51fa\u7684\u5b50\u6811\uff0c\u5176**\u5de6\u513f\u5b50\u7684\u5927\u5c0f\u4e0d\u5c0f\u4e8e\u53f3\u513f\u5b50\uff0c\u4e14\u5dee\u503c\u81f3\u591a\u4e3a 1**\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u51fa\u73b0\u4e86\u5de6\u53f3\u513f\u5b50\u9ad8\u5ea6\u4e0d\u540c\uff0c\u4e00\u5b9a\u662f\u5de6\u513f\u5b50\u6bd4\u53f3\u513f\u5b50\u9ad8\uff0c\u5e76\u4e14\u53ea\u80fd\u662f\u4e00\u79cd\u60c5\u51b5\uff0c\u5373\u957f\u5ea6\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a $100001$\u3002\u5373\u9664\u4e86\u6700\u9ad8\u4f4d\u548c\u6700\u4f4e\u4f4d\u5176\u4f59\u4f4d\u5747\u4e3a $0$\uff0c\u53ea\u6709\u8fd9\u6837\u624d\u4f1a\u51fa\u73b0\u5de6\u53f3\u513f\u5b50\u843d\u5728\u4e0d\u540c\u533a\u95f4\u7684\u60c5\u51b5\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u4e00\u4e2a $n$\uff0c\u5f88\u5bb9\u6613\u7ed9\u51fa\u4e00\u4e2a $O(\\log n)$ \u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u5373\uff1a\n\n```cpp\nint ask(int x,int now=1){\n\tif(x==1)return now;\n\tif(__builtin_popcount(x)==2&&x&1)return ask(x+1>>1,now*2);\n\treturn ask(x>>1,now*2+1);\t\n}\n```\n\n\u5176\u4e2d `__builtin_popcount()` \u4e3a\u5185\u7f6e\u51fd\u6570\uff0c\u53c2\u6570\u4e3a `unsigned`\uff0c `int` \u4e5f\u53ef\u4ee5\u4f7f\u7528\u4f46\u4e0d\u80fd\u4e3a\u8d1f\u6570\u3002\n\n\u5982\u679c\u5e0c\u671b\u5bf9 `long long` \u4f7f\u7528\uff0c\u5e94\u6539\u4e3a `_builtin_popcountll()`\u3002\n\n\u5bf9\u6bcf\u4e2a\u6570\u66b4\u529b\u6c42\u89e3\u5373\u53ef\u3002\n\n#### 100PTS\n\n\u6211\u4eec\u9700\u8981\u89c2\u5bdf\u6c42\u89e3\u4e00\u4e2a\u6570\u7684\u8fc7\u7a0b\uff0c\u4e0d\u59a8\u8003\u8651\u4e8c\u8fdb\u5236\u6570 $1001011$ \u7684\u8ba1\u7b97\u8fc7\u7a0b\u3002\n\n\u624b\u52a8\u6a21\u62df\u4e00\u4e0b\u4e0a\u8ff0 $\\operatorname{ask()}$ \u51fd\u6570\u7684\u8c03\u7528\u8fc7\u7a0b\uff0c$now$ \u53d8\u91cf\u548c $x$ \u53d8\u91cf\u7684\u503c\u4f9d\u6b21\u53d8\u4e3a \n\n```plain\nnow=00000001 x=1001011\nnow=00000011 x=0100101\nnow=00000111 x=0010010\nnow=00001111 x=0001001\nnow=00011110 x=0000101\nnow=00111100 x=0000011\nnow=01111000 x=0000010\nnow=11110001 x=0000001\n```\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u5728\u51fa\u73b0 $1001$ \u8fd9\u6837\u7684\u60c5\u51b5\u4e4b\u524d\uff0c\u6211\u4eec\u5c06 $now$ \u5de6\u79fb\u4e00\u4f4d\u5e76\u5728\u540e\u9762\u5199\u4e0a\u4e86 $1$\uff0c\u540c\u65f6\u5c06 $x$ \u53f3\u79fb\u4e00\u4f4d\u3002\n\n\u5728\u51fa\u73b0 $1001$ \u4e4b\u540e\uff0c\u6211\u4eec\u4e00\u76f4\u5728\u5f80 $now$ \u540e\u9762\u5199 $0$\uff0c\u800c $x$ \u7684\u53d8\u5316\u5219\u662f\u5148\u53f3\u79fb\u4e00\u4f4d\u5e76\u5c06\u6700\u540e\u4e00\u4f4d\u6539\u4e3a $1$\u3002\n\n\u800c\u6700\u540e $x$ \u4ece $10$ \u53d8\u4e3a $1$ \u65f6\uff0c\u6211\u4eec\u5728 $now$ \u672b\u5c3e\u6dfb\u52a0\u4e86\u4e00\u4e2a $1$\u3002\n\n\u4e0d\u96be\u53d1\u73b0\uff0c\u4e00\u4e2a\u56fa\u5b9a\u7684 $x$\uff0c\u6211\u4eec\u6700\u7ec8\u5f97\u5230\u7684\u5360\u7528\u4e0b\u6807\u6700\u5927\u503c\uff0c**\u4ec5\u4ec5\u548c\u5b83\u4e8c\u8fdb\u5236\u8868\u793a\u4e0b\u7684\u6700\u9ad8\u4f4d\u548c\u7b2c\u4e8c\u9ad8\u7684\u4e3a $1$ \u7684\u4f4d\u6709\u5173**\uff0c\u56e0\u4e3a\u5728\u8fd9\u4e4b\u524d\u6211\u4eec\u4e00\u5b9a\u4f1a\u6dfb\u52a0 $1$\uff0c\u800c\u5728\u8fd9\u4e4b\u540e\u4e00\u5b9a\u4f1a\u5f80\u540e\u6dfb\u52a0 $0$ \u5e76\u5728\u6700\u540e\u6dfb\u52a0\u4e00\u4e2a $1$\u3002\n\n**\u6ce8\u610f\u5982\u679c\u4e3a $2^k$ \u8fd9\u6837\u4e0d\u5b58\u5728\u6b21\u9ad8\u4f4d\u7684\u6570\uff0c\u6211\u4eec\u9700\u8981\u7279\u5224\u3002**\n\n\u6240\u4ee5\u6211\u4eec\u6709\u4e86\u4e00\u4e2a\u6bd4\u8f83\u663e\u7136\u7684\u60f3\u6cd5\uff0c\u5373\u679a\u4e3e\u4e8c\u8fdb\u5236\u4e0b\u6700\u9ad8\u4f4d\u548c\u6b21\u9ad8\u4f4d\u7684\u4f4d\u7f6e\uff0c\u7edf\u8ba1\u80fd\u53d6\u5230\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u7684\u6570\u7684\u6570\u91cf\uff0c\u5e76\u5f02\u6216\u4e0a\u5bf9\u5e94\u7684\u6743\u503c\u3002\n\n\u8fd9\u6837\u7684\u590d\u6742\u5ea6\u662f $O(\\log^2n)$ \u7684\uff0c\u6211\u4eec\u8003\u8651\u7ee7\u7eed\u4f18\u5316\u3002\n\n\u5bf9\u4e8e\u4e8c\u8fdb\u5236\u4e0b\u4f4d\u6570\u5c0f\u4e8e $n$ \u7684\u4e8c\u8fdb\u5236\u4e0b\u4f4d\u6570\u7684\u6240\u6709\u6570\uff0c\u5b9e\u9645\u4e0a\u4f1a\u6709\u8d21\u732e\u7684\u53ea\u6709\u4e24\u4e2a\u503c\uff0c\u5206\u522b\u662f $2^k$ \u548c $2^k+1$\u3002\u56e0\u4e3a**\u5982\u679c\u6b21\u9ad8\u4f4d\u4e0d\u4e3a\u7b2c\u4e00\u4f4d\uff0c\u90a3\u4e48\u80fd\u53d6\u5230\u8be5\u503c\u7684\u6570\u7684\u4e2a\u6570\u4e00\u5b9a\u4e3a\u5076\u6570\u4e2a\uff08\u4f4e\u4e8e\u6b21\u9ad8\u4f4d\u7684\u4f4d\u7f6e\u53ef\u4ee5\u4efb\u610f\u586b\uff09**\u3002\u5269\u4e0b\u8fd9\u4e24\u4e2a\u503c\u7684\u8d21\u732e\u90fd\u662f\u53ef\u4ee5 $O(1)$ \u8ba1\u7b97\u7684\u3002\n\n\u8fd9\u6837\u5c31\u53ea\u7528\u8003\u8651\u4e8c\u8fdb\u5236\u4e0b\u4f4d\u6570\u548c $n$ \u76f8\u540c\u7684\u6570\uff0c\u540c\u6837\u7684\u9053\u7406\uff0c\u5982\u679c\u6b21\u9ad8\u4f4d\u9ad8\u4e8e $1$\uff0c\u90a3\u4e48\u6ca1\u6709\u8d21\u732e\uff0c\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6b21\u9ad8\u4f4d\u53d6\u5230\u4e86\u4e0a\u754c\uff0c\u4f8b\u5982 $10110$ \u4e2d\uff0c\u6b21\u9ad8\u4f4d\u53d6\u5230\u4e86\u7b2c\u4e09\u4f4d\u7684 $1$\uff0c\u90a3\u4e48\u7531\u4e8e\u5fc5\u987b\u5c0f\u4e8e $n$\uff0c\u5b9e\u9645\u4e0a\u53ea\u6709\u5947\u6570\u4e2a\u503c\u53ef\u4ee5\u53d6\u5230\uff0c\u8fd9\u6837\u4f1a\u5e26\u6765\u4e00\u5b9a\u7684\u8d21\u732e\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u8ba1\u7b97\u8fd9\u79cd\u60c5\u51b5\u7684\u7b54\u6848\uff0c\u590d\u6742\u5ea6\u4e3a $O(\\log n)$\u3002\n\n\u603b\u590d\u6742\u5ea6$O(\\log n)$\u3002\n\n\u53ef\u4ee5\u53c2\u8003\u6211\u535a\u5ba2\u4e2d\u7684\u4e00\u4e9b\u7ebf\u6bb5\u6811\u7684\u603b\u7ed3\uff0c\u4f1a\u4e0d\u5b9a\u671f\u66f4\u65b0\u3002\n\n[\u4eceZKW\u7ebf\u6bb5\u6811\u770b\u7ebf\u6bb5\u6811\u7684\u6027\u8d28](https://huanyp.cn/2022/08/04/%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93%E7%90%86%E8%A7%A3/%E6%80%A7%E8%B4%A8/%E4%BB%8EZKW%E7%BA%BF%E6%AE%B5%E6%A0%91%E7%9C%8B%E7%BA%BF%E6%AE%B5%E6%A0%91%E7%9A%84%E6%80%A7%E8%B4%A8/)\n\n### \u53c2\u8003\u4ee3\u7801\n\n```c++\n#include<bits/stdc++.h>\n#define y1 y3647\n#define int long long\n#define pii pair<int,int>\n#define low(x) ((x)&-(x))\nusing namespace std;\ntemplate<typename _type>\ninline void read(_type &x){\n\tx=0;int f=1;char ch=getchar();\n\twhile(ch!=45&&(ch>'9'||ch<'0'))ch=getchar();\n\tif(ch==45){f=-1,ch=getchar();}\n\twhile(ch<='9'&&ch>='0'){x=x*10+ch-48;ch=getchar();}x*=f;\n}\ntemplate<typename _type1,typename _type2>void cmin(_type1 &a,const _type2 b){if(a>b)a=b;}\ntemplate<typename _type1,typename _type2>void cmax(_type1 &a,const _type2 b){if(a<b)a=b;} \nint i,j,k,n,s,t,m,tp1,tp2;\nint solve(int x){\n\tif(x==0)return 0;\n\tif(x==1)return 1;\n    //\u7279\u5224\u8fb9\u754c\u60c5\u51b5\n\tint res=1,h=log2(x);\n    //\u6700\u9ad8\u4f4d\u4ece 10 \u5f00\u59cb\u679a\u4e3e,\u6240\u4ee5 res \u521d\u503c\u5e94\u8be5\u8bbe\u7f6e\u4e3a 1\n    //h \u4e3a\u4e8c\u8fdb\u5236\u4e0b x \u7684\u4f4d\u6570\n\tfor(i=1;i<h;i++){\n\t\tres^=(1ll<<i+1)-1;\n\t\tres^=(1ll<<i+1)+1;\n        //\u6ce8\u610f\u5de6\u79fb\u64cd\u4f5c\u7684 1 \u662f long long \u7ea7\u522b\u7684\u6570\n        //\u8ba1\u7b97 2^k \u548c 2^k+1 \u7684\u7b54\u6848,\u5176\u5b83\u4f4d\u7f6e\u6ca1\u6709\u8d21\u732e \n\t}\n\tres^=(1ll<<h+1)-1;\n    //\u8ba1\u7b97 2^h \u7684\u7b54\u6848\n\tif(low(x)==x)return res;\n    //\u5982\u679c x=2^h,\u65e0\u9700\u8fdb\u884c\u4e0b\u9762\u7684\u6b65\u9aa4\n\tres^=(1ll<<h+1)+1;\n\tif(x-1==1ll<<h||x&1)return res;\n    //\u5982\u679c x=2^h+1 \u6216\u8005\u672b\u5c3e\u4e3a 1,\u90a3\u4e48\u4e4b\u540e\u53d6\u5230\u7684\u503c\u4e2a\u6570\u4e00\u5b9a\u662f\u5076\u6570,\u65e0\u9700\u8ba1\u7b97\u3002\n\tint now=1;\n\twhile(__builtin_popcountll(x)>2||(x&1)==0){\n\t\tnow=now<<1|1;\n\t\tx>>=1;\n\t}\n    //\u6a21\u62df\u6c42\u89e3\u7684\u7b2c\u4e00\u6b65,\u627e\u5230\u5bf9\u5e94\u7684\u6b21\u9ad8\u4f4d,\u5728\u8fd9\u4e4b\u524d\u5f80\u540e\u5199 1\n\twhile(x){\n\t\tx>>=1;\n\t\tnow<<=1;\n\t}\n    //\u6a21\u62df\u6c42\u89e3\u7b2c\u4e8c\u6b65,\u5f80\u540e\u5199 0\n\tnow|=1;\n    //\u8bb0\u5f97\u5de6\u53f3\u8fd8\u9700\u8981\u5f02\u6216 1\n\treturn res^now;\n}\nsigned main()\n{\n// \tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n//\tfreopen(\".in\",\"w\",stdout);\n\tint l,r;\n\tread(l),read(r);\n\tprintf(\"%lld\\n\",solve(r)^solve(l-1));\n\treturn 0;\n}\n\n\n```\n\n\n\n",
        "postTime": 1659623332,
        "uid": 177535,
        "name": "CDFLS_mao_zx",
        "ccfLevel": 7,
        "title": "P6025\u9898\u89e3"
    },
    {
        "content": "[\u9898\u9762](https://www.luogu.com.cn/problem/P6025)\n\n\u633a\u597d\u7684\u4e00\u9053\u9898\u3002\n\n## 10% \u7684\u6570\u636e\u70b9\n\n\u6309\u7167\u9898\u610f\u6a21\u62df\u5efa\u6811\u8fc7\u7a0b\u5373\u53ef\u3002\n\n## 40% \u7684\u6570\u636e\u70b9\n\n\u4f1a\u53d1\u73b0\uff0c\u82e5 $n=2^k$ \u6216 $n=2^k+1$\uff08$k$ \u4e3a\u4efb\u610f\u975e\u8d1f\u6574\u6570\uff09\uff0c\u90a3\u4e48\u7a7a\u95f4\u662f\u4e0d\u4f1a\u6d6a\u8d39\u7684\u3002\n\n\u8bbe $dep$ \u4e3a\u5f53\u524d\u7ebf\u6bb5\u6811\u7684\u6df1\u5ea6\uff0c\u6839\u8282\u70b9\u6df1\u5ea6\u4e3a $0$\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\u4e00\u4e0b\uff1a\n\n1. $n=2^k$\uff0c\u90a3\u4e48 $f(n)=2^{dep+1}-1$\uff0c\u6b64\u65f6 $dep=log_2n$\uff0c\u6240\u4ee5 $f(n)=2n-1$\u3002\n\n2. $n=2^k+1$\uff0c\u90a3\u4e48 $f(n)=2^{dep}+1$\uff0c\u6b64\u65f6 $dep=log_2(n-1)+1$\uff0c\u6240\u4ee5 $f(n)=2n-1$\u3002\n\n\u7efc\u4e0a\uff0c\u82e5 $n=2^k$ \u6216 $n=2^k+1$\uff0c$f(n)=2n-1$\u3002\n\n\u90a3\u4e48\u5982\u679c $n=2^k+t,t>1$ \u5462\uff1f\n\n\u6b64\u65f6\u7684 $f(n)=f(n-\\lfloor\\frac{n+1}{2}\\rfloor)+(2^{dep-1+1}-1+1)=f(\\lfloor\\frac{n}{2}\\rfloor)+2^{dep}$\u3002\n\n\u56e0\u6b64\u679a\u4e3e $i$\uff0c\u9012\u5f52\u8ba1\u7b97 $f(n)$ \u5c31\u884c\u4e86\u3002\n\n\u6838\u5fc3\u4ee3\u7801\uff1a\n\n```cpp\n\ninline int _log(ll x){//\u6c42log(x)\u5411\u4e0a\u53d6\u6b63\n    int s(0),t(63),mid;\n    while(s<=t){\n        mid=(s+t>>1);\n        if((1ll<<mid)>=x) t=mid-1;\n        else s=mid+1;\n    }\n    return s;\n}\ninline bool p(ll x){return !(x&(x-1));}//\u5224\u65adx\u662f\u5426\u662f2^k\ninline ll f(ll n){//\u8fd9\u91cc\u4e3a\u4e86\u540e\u9762\u65b9\u4fbf\uff0c\u5199\u4e86\u5faa\u73af\u7684\n    ll dep(_log(n)),ans(0ll);\n    while(!p(n)&&!p(n-1ll)){\n        ans+=(1ll<<dep);\n        n>>=1;--dep;\n    }ans+=(n<<1)-1;\n    return ans;\n}\n```\n\n## 100% \u7684\u6570\u636e\u70b9\n\n\u77e5\u9053\u5982\u4f55\u8ba1\u7b97 $f(n)$ \u4e86\uff0c\u90a3\u8981\u600e\u4e48\u6c42 $\\overset{i\\leq r}{\\underset{i=l}{\\bigoplus}}f(i)$\uff1f\n\n\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u82e5 $n=2^k+2t$\uff08$k$ \u4e3a\u4efb\u610f\u975e\u8d1f\u6574\u6570\uff0c$1\\leq t<2^{k-1}$\uff09\uff0c\u90a3\u4e48 $f(n)=f(n+1)$\u3002\n\n\u56e0\u4e3a\u6b64\u65f6\u7684\u8d21\u732e\u4e00\u5b9a\u5728\u6839\u8282\u70b9\u7684\u53f3\u5b50\u6811\u4e0a\uff0c\u4f46\u662f $n+1$ \u4e4b\u540e\u65b0\u589e\u7684\u5b50\u6811\u5728\u6839\u8282\u70b9\u7684\u5de6\u5b50\u6811\u4e0a\uff0c\u4e0d\u5f71\u54cd\u6700\u540e\u7b54\u6848\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4e00\u4e0b\u5b50\u7ea6\u6389\u4e00\u5927\u5806\u8ba1\u7b97\uff0c\u53ea\u4fdd\u7559 $f(2^k)$\uff0c$f(2^k+1)$\uff0c\u8fd8\u6709\u53ef\u80fd\u4e0d\u4f1a\u88ab\u7ea6\u53bb\u7684 $f(l)$ \u548c $f(r)$\u3002\n\n\u53ef\u4ee5\u7528\u524d\u7f00\u5f02\u6216\u548c\u7684\u601d\u60f3\u3002\n\n\u5047\u8bbe $g(n)=\\overset{i\\leq n}{\\underset{i=1}{\\bigoplus}}f(i)$.\n\n\u56e0\u6b64\u7b54\u6848\u4e3a $g(r)\\oplus g(l-1)$\u3002\n\n\u8981\u6c42 $g(n)$\uff0c\u6211\u4eec\u5f97\u5148\u627e\u5230\u6240\u6709\u7684 $i=2^k$ \u548c $i=2^k+1$\uff08$i\\leq n$\uff09\u3002\n\n\u628a\u8fd9\u4e9b\u6570\u5168\u90e8\u5f02\u6216\u4e0a\uff0c\u5199\u6210\u8fd9\u6bb5\u4ee3\u7801\uff1a\n\n```cpp\ninline ll Xor(ll n){//\u6c42g(n)\n\tif(!n) return 0ll;\n\tif(!(n^1)) return 1ll;//\u8fd9\u91cc\u6709\u51e0\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u81ea\u5df1\u5199\u7684\u65f6\u5019\u5c31\u77e5\u9053f(2)\u4f1a\u7b97\u91cd\n\tif(!(n^2)) return 2ll;\n\tif(!(n^3)) return 7ll;\n\tll res(7ll);\n\tfor(ll i(4ll);i<=n;i<<=1) res^=f(i)^f(i+1);//\u8ba1\u7b97\u6240\u6709\u7684f(2^k)\u548cf(2^k+1)\n\tif(p(n)) res^=f(n+1);//\u6709\u53ef\u80fdi+1>n\uff0c\u5c06\u8fd9\u79cd\u60c5\u51b5\u7ea6\u6389\n\treturn res;\n}\n```\n\n\u4f46\u662f\u8fd8\u4e0d\u591f\uff0c\u56e0\u4e3a\u8fd8\u6709\u53ef\u80fd $f(n)$ \u662f\u6d88\u4e0d\u6389\u7684\u3002\n\n\u56e0\u6b64\u8fd8\u9700\u8981\u52a0\u4e0a\u4e00\u53e5\u8bdd\uff1a\n\n```cpp\nif(!(n&1)&&!p(n)&&!p(n-1)) res^=f(n);\n```\n\n\u4e5f\u5c31\u662f\u5982\u679c $f(n)$ \u6ca1\u6709\u88ab\u8ba1\u7b97\u5230\uff0c\u800c\u4e14 $f(n)$ \u4e0d\u4f1a\u88ab\u6d88\u53bb\uff0c\u90a3\u8981\u518d\u5f02\u6216\u4e00\u6b21\u3002\n\n\u6700\u7ec8\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\ninline ll read(){\n    ll x(0),f(1);char c(getchar());\n    while(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n    while(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+(c^48);c=getchar();}\n    return x*f;\n}\ninline int _log(ll x){\n    int s(0),t(63),mid;\n    while(s<=t){\n        mid=(s+t>>1);\n        if((1ll<<mid)>=x) t=mid-1;\n        else s=mid+1;\n    }\n    return s;\n}\ninline bool p(ll x){return !(x&(x-1));}\ninline ll f(ll n){\n    ll dep(_log(n)),ans(0ll);\n    while(!p(n)&&!p(n-1ll)){\n        ans+=(1ll<<dep);\n        n>>=1;--dep;\n    }ans+=(n<<1)-1;\n    return ans;\n}\ninline ll Xor(ll n){\n    if(!n) return 0ll;\n    if(!(n^1)) return 1ll;\n    if(!(n^2)) return 2ll;\n    if(!(n^3)) return 7ll;\n    ll res(7ll);\n    for(ll i(4ll);i<=n;i<<=1) res^=f(i)^f(i+1);\n    if(!(n&1)&&!p(n)&&!p(n-1)) res^=f(n);\n    if(p(n)) res^=f(n+1);\n    return res;\n}\nll l,r;\nint main(){\n    l=read();r=read();\n    printf(\"%lld\\n\",Xor(r)^Xor(l-1));\n    return 0;\n}\n```",
        "postTime": 1661318879,
        "uid": 554574,
        "name": "gyyyyx",
        "ccfLevel": 0,
        "title": "P6025 \u7ebf\u6bb5\u6811 \u9898\u89e3"
    }
]
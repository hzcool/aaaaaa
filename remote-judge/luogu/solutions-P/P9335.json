[
    {
        "content": "\u8fd9\u4e2a\u662f\u81ea\u65b0 op2\uff0c\u4f46\u662f\u6211\u66f4\u559c\u6b22 op1\u3002\n\n---\n\n\u5b66\u4e60\u9898\u89e3\u3002\n\n\u8003\u8651\u6309\u53f3\u7aef\u70b9\u505a\u626b\u63cf\u7ebf\u3002\n\n\u6211\u4eec\u9996\u5148\u5e0c\u671b\u7ef4\u62a4\u4e00\u4e2a $p_x$ \u8868\u793a $\\forall y\\in [x,i]$\uff0c\u533a\u95f4 $[x,y]$ \u7684\u7b54\u6848\u3002\u90a3\u4e48\u5c06\u53f3\u7aef\u70b9\u8fdb\u884c\u79fb\u52a8\uff08$r-1\\to r$\uff09\u5c31\u662f\u8981\u5c06\u6240\u6709\u4ee5 $r$ \u4e3a\u53f3\u7aef\u70b9\u7684\u533a\u95f4\u52a0\u5165\u3002\n\n\u6ce8\u610f\u5230\uff1a\u82e5 $[x,r-1]$ \u548c $[x,r]$ \u8fd9\u4e24\u6bb5\u533a\u95f4\u7684\u8d21\u732e\u4e0d\u540c\uff0c\u8fd9\u7c7b $x$ \u662f\u4ece $r$ \u5f00\u59cb\u7684\u4e00\u6bb5\u8fde\u7eed\u533a\u95f4\uff0c\u4e14\u957f\u5ea6\u603b\u548c\u4e3a $O(n\\log n)$\u2014\u2014\u4e24\u6bb5\u533a\u95f4\u8d21\u732e\u4e0d\u540c\u5f53\u4e14\u4ec5\u5f53 $\\text{or}$ \u548c\u3001$\\text{and}$ \u548c\u6216 $\\gcd$ \u503c\u4e2d\u6709\u81f3\u5c11\u4e00\u4e2a\u4e0d\u76f8\u540c\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u5c06 $p$ \u5199\u6210 $kr+b$ \u7684\u5f62\u5f0f\uff0c\u5176\u4e2d $k$ \u662f $[x,r]$ \u7684\u8d21\u732e\u3002\u79fb\u52a8\u53f3\u7aef\u70b9\u7684\u65f6\u5019\u8fdb\u884c $O(n\\log n)$ \u6b21\u4fee\u6539\u3002$b$ \u7684\u7ef4\u62a4\u65b9\u5f0f\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u63a8\u5bfc\u5f97\u5230\uff08\u6b63\u786e\u7684\u8bdd\u5e94\u8be5\u4e0d\u5305\u542b\u201c\u4e0a\u6b21\u4fee\u6539 $k$ \u7684\u65f6\u95f4\u201d\uff09\u3002\u5e76\u4e14\u8fde\u7eed\u53d6 $\\gcd$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\log n)$\uff0c\u6240\u4ee5\u5bf9 $p$ \u7684\u4fee\u6539\u53ef\u4ee5 $O(n\\log n)$ \u5b8c\u6210\u3002\u7136\u540e\u9700\u8981\u6c42 $p$ \u7684\u540e\u7f00\u548c\uff0c\u8fd9\u4e2a\u76f4\u63a5\u7ef4\u62a4 $p$ \u7684\u524d\u7f00\u548c\u5c31\u884c\u4e86\u3002\n\n\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n\\log n+q)$\u3002\u5199\u4e2a mmap \u518d\u5361\u70b9\u5e38\u6570\u5c31\u80fd\u8fc7\u3002",
        "postTime": 1683635404,
        "uid": 203623,
        "name": "Ntokisq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P9335 [Ynoi2001] \u96ea\u306b\u54b2\u304f\u82b1"
    },
    {
        "content": "\u53cc\u500d\u7ecf\u9a8c\uff0c\u6216\u8005\u8bf4\u4e0d\u7528\u5361\u5e38\u7684\u5f31\u5316\u7248 P8421\u3002\u4ee5\u53ca\u6211\u90a3\u9898\u7684 [\u9898\u89e3](https://www.luogu.com.cn/blog/368107/solution-p8421)\u3002\n\n\u89e3\u6cd5\u53ef\u4ee5\u770b\u4e0a\u8ff0\u9898\u89e3\uff0c\u8fd9\u91cc\u6211\u8bb2\u8bb2\u600e\u4e48\u5361\u5e38\u3002\n\n\u4e00\u4e2a\u662f\u6362\u6389 `vector`\uff0c\u7528\u624b\u5199\u6570\u7ec4\u6216\u8005\u94fe\u8868\u5b58\u8be2\u95ee\u3002\n\n\u8fd8\u6709\u4e00\u4e2a\u662f\u5361\u5feb\u8bfb `buffer` \u6570\u7ec4\u5927\u5c0f\u548c\u8bc4\u6d4b\u673a\u6ce2\u52a8\u3002\n\n\u7136\u540e\u5199\u7f8e\u89c2\u4e00\u70b9\u5373\u53ef\u3002\n\n\u653e\u4e00\u4e2a\u4e0d\u4e00\u5b9a\u6bcf\u6b21\u90fd\u8fc7\u7684\u4ee3\u7801\uff0c\u7248\u672c `C++11`\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\n#ifdef ONLINE_JUDGE\nstatic char buf[4500000],*p1=buf,*p2=buf;\n#define getchar() p1==p2&&(p2=(p1=buf)+fread(buf,1,4500000,stdin),p1==p2)?EOF:*p1++\n#endif\n\ntypedef unsigned ui;\n\n#define rg register\n\ninline ui read(){\n    register ui x = 0;\n    register char c = getchar();\n    for(;c < '0' || c > '9';c = getchar());\n    for(;c >= '0' && c <= '9';c = getchar())\n        x = x * 10 + (c ^ '0');\n    return x;\n}\n\nconst ui N = 1e6 + 5,M = 5e6 + 5;\n\nui n,m,tim[N],tot[N];\nui Ql[M],Qr[M],id[M];\nui a[N],b[N],c[N];\nui ans[M],sum[N],num[N];\n\nint main(){\n\tn = read(),m = read();\n\tfor(rg ui i = 1;i <= n;++i) a[i] = read();\n\tfor(rg ui i = 1;i <= n;++i) b[i] = read();\n\tfor(rg ui i = 1;i <= n;++i) c[i] = read();\n\tfor(rg ui i = 1;i <= m;++i) Ql[i] = read(),++tot[Qr[i] = read()];\n\tfor(rg ui i = 1;i <= n;++i) tot[i] += tot[i - 1];\n\tfor(rg ui i = 1;i <= m;++i) id[tot[Qr[i] - 1]++] = i;\n\tfor(rg ui i = 1,j = 0;i <= n;++i){ \n\t\trg ui p = i;\n\t\tfor(;--p;){\n\t\t\trg ui A = a[p] & a[p + 1],B = b[p] | b[p + 1],C = __gcd(c[p],c[p + 1]);\n\t\t\tif(A == a[p] && B == b[p] && C == c[p]) break;\n\t\t\ta[p] = A,b[p] = B,c[p] = C;\n\t\t}\n\t\tsum[i] = sum[i - 1] + num[i - 1] * (i - 1 - tim[i - 1]);\n\t\tfor(;++p <= i;){\n\t\t\tsum[p] += num[p] * (i - 1 - tim[p]);\n\t\t\ttim[p] = i - 1;\n\t\t\tnum[p] = num[p - 1] + a[p] * b[p] * c[p];\n\t\t}\n\t\trg ui _ = sum[i] + num[i] * (i - tim[i]);\n\t\tfor(;j < tot[i - 1];++j)\n\t\t\tans[id[j]] = _ - sum[Ql[id[j]] - 1] - num[Ql[id[j]] - 1] * (i - tim[Ql[id[j]] - 1]);\n\t}\n\tfor(ui i = 1;i <= m;++i) printf(\"%u\\n\",ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1683862370,
        "uid": 368107,
        "name": "xfrvq",
        "ccfLevel": 7,
        "title": "P9335 [Ynoi2001] \u96ea\u306b\u54b2\u304f\u82b1"
    }
]
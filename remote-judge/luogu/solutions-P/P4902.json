[
    {
        "content": "upd:10.21 LaTeX\u4e0d\u652f\u6301\u591a\u884c\uff0c\u4e8e\u662f\u516c\u5f0f\u6302\u4e86\uff0c\u6539\u6210\u56fe\u7247\u597d\u4e86\n\n# \u5199\u8fd9\u7bc7\u9898\u89e3\u7684\u76ee\u7684\uff1a\n\n**1.\u5206\u4eab\u4e00\u79cd\u76ee\u524d\u6700\u4f18\u89e3\u7684\u505a\u6cd5**\n\n**2.\u5206\u4eab\u4e00\u4e9b\u5361\u5e38\u7684\u4e71(hao)\u641e(sao)\u505a\u6cd5**\n\n## \u8fd8\u662f\u5148\u8bb2\u505a\u6cd5\u5427\n\n\u9996\u5148\u6211\u4eec\u62ff\u5230\u8fd9\u9053\u9898(\u4e00\u770b\u5c31\u662f\u4e00\u9053\u6570\u5b66\u9898)\n\n\u7531\u4e8e\u5f0f\u5b50\u8fc7\u4e8e\u590d\u6742\uff0c\u66b4\u529b\u5f97$n^2$\u663e\u7136\u7a33T\n\n\u4e8e\u662f\u6211\u4eec\u8003\u8651\u62c6\u5f0f\u5b50\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ns2hnv1.png)\n\n\u628a\u7b2c\u4e8c\u4e2a$\\prod$\u53d8\u6210$\\sum$\u5e76\u4e22\u5230\u6307\u6570\u4f4d\u7f6e\u662f\u56e0\u4e3a$x^a*x^b=x^{a+b}$\n\n**\u60f3\u5230\u8fd9\u91cc\u5c31\u53ef\u4ee5\u505a\u4e86**\n\n**\u6211\u4eec\u8bb0\u5f55\u6bcf\u4e2ai\u7684\u7b54\u6848\uff0c\u6700\u540e\u76f4\u63a5\u7528B\u7684\u7b54\u6848\u9664\u4ee5A-1\u7684\u7b54\u6848\u5c31\u884c(A-1\u662f\u56e0\u4e3a\u7b54\u6848\u662f\u7d2f\u4e58\u8d77\u6765\u7684\uff0c\u7c7b\u6bd4\u4e8e\u524d\u7f00\u548c)**\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wgcoha90.png)\n\n\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u4ecei\u6bcf\u6b21\u53d8\u5316\u5165\u624b\n\n\u4e3e\u4e2a\u4f8b\u5b50\n\n```\ni=3\nsum=3/1+3/2+3/3\nans=3  +1  +1\t\ni=4\nsum=4/1+4/2+4/3+4/4\nans=4  +2  +1  +1\ni=5\nsum=5/1+5/2+5/3+5/4+5/5\nans=5  +2  +1  +1  +1\ni=6\nsum=6/1+6/2+6/3+6/4+6/5+6/6\nans=6  +3  +2  +1  +1  +1\n```\n\n\u8bf4\u8bf4\u4f60\u90fd\u53d1\u73b0\u4e86\u4ec0\u4e48\n\n**->ans[i]\u76f8\u6bd4ans[i-1]\u4e8e\u5728\u6bcf\u4e2ai\u7684\u7ea6\u6570\u7684\u4f4d\u7f6e+1\u4e86\uff01\uff01\uff01**\n\n**\u7136\u540e\u5c31\u53ef\u4ee5\u9012\u63a8\u6c42\u4e86ans[i]**\n\n**\u5bf9\u4e8ei\u6211\u4eec\u5728i+1\u65f6\u4e58\u4e0ai+1\u7684\u7ea6\u6570\u4e2a\u6570**\n\n**\u5bf9\u4e8einv(j)\u6211\u4eec\u6ca1\u6b21\u5728i+1\u65f6\u628a$prod[j]$\u4e58\u4e0a$prod[k](j \\mod k==0)$**\n\n\u671f\u671b\u5f97\u5206: 75 or 100\n\n**[\u6211\u7684\u63d0\u4ea4\uff1a\u7528\u65f61.76s\u5185\u5b5834.91MB,TLE on Sub 4 #16\u3001#17\u3001#20](https://www.luogu.org/record/25456720)**\n\n## \u5f00\u59cb\u5361\u5e38\u5566\n\n### \u5176\u5b9esub4TLE\u53ea\u662f\u4f60\u5c11\u4e86\u51e0\u4e2a\u65e0\u7528\u7684for\u5faa\u73af\n\n#### \u5361\u5e381\uff1a\u52a0\u4e0a register and inline \uff0ci++\u53d8++i\n\n**[\u8fd8\u771f\u7684\u6709\u7528\u5c11T\u4e00\u4e2a\u70b9\uff1a\u7528\u65f61.77s\u5185\u5b5834.91MB,\u4f46\u662fTLE on Sub 4 #16 #20](https://www.luogu.org/record/25457124)**\n\n#### \u5361\u5e382\uff1a\u542c\u8bf4\u53ef\u4ee5\u5c55\u5f00\u5faa\u73af\u6765\u523a\u6fc0CPU\n\n**[\u5b9e\u8df5\u8bc1\u660e\u8fd9\u662f\u771f\u7684\uff1a\u7528\u65f61.72s\u5185\u5b5834.99MB,TLE on Sub 4 #16](https://www.luogu.org/record/25458564)**\n\n#### \u5361\u5e383\uff1a\u662f\u4e0d\u662f\u5c55\u5f00\u7684\u4e0d\u591f\uff0c\u518d\u52a0\u51e0\u4e2a\u65e0\u7528\u7684for\u8bd5\u8bd5\n\n\u7a76\u7adf\u662f\u4ec0\u4e48\u795e\u4ed9\u64cd\u4f5c\uff0c\u5c06\u4e00\u4efdTLE\u4ee3\u7801\u633d\u6551\u4e8e\u6c34\u6df1\u706b\u70ed\u4e4b\u4e2d\uff1f\uff1f\uff1f\n\n**\u90a3\u5c31\u662f\uff1a**\n\n```\n\tfor(int i=1;i<=100000;i++);\n\tfor(int i=1;i<=100000;i++);\n\tfor(int i=1;i<=100000;i++);\n```\n\n\u5bf9\uff01\uff01\uff01\u4f60\u6ca1\u6709\u770b\u9519\uff01\uff01\uff01\u5c31\u662f\u4ed6\uff01\uff01\uff01\n\n[\u7528\u65f61.66s\u5185\u5b5834.87MB,AC](https://www.luogu.org/record/25458859)\n\n#### \u5361\u5e384\uff1a\u53d1\u73b0\u4e0a\u9762\u7684\u65b9(cao)\u6cd5(zuo)\u53ea\u662f\u6709\u65f6\u80fd\u8fc7\u6709\u65f6\u8fc7\u4e0d\u4e86\n\n\u518d\u4ed4\u7ec6\u4e00\u60f3\uff0c\u6574\u4e2a\u7a0b\u5e8f\u91cc\u9762\u6700\u6162\u7684\u83ab\u8fc7\u4e8e\u53d6\u6a21\u8fd0\u7b97\u4e86\uff0c\u4e8e\u662f\u60f3\u5230\u53d6\u6a21\u4f18\u5316\n\n[\u7528\u65f6929ms\u5185\u5b5835.04MB,AC](https://www.luogu.org/record/25466013)\n\n## \u7ed9\u51fa\u6700\u7ec8\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define ld long double\nusing namespace std;\nint tt,a[1000006],b[1000006],cnt[1000005],maxn;\nconst int mod=19260817;\nll ans[1000005],inv[1000005],prod[1000005];\ninline int read(){\n\tregister int x=0;register char ch=getchar();\n\twhile(ch>'9'||ch<'0')ch=getchar();\n\twhile(ch>='0'&&ch<='9')x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\treturn x;\n}\ninline ll mul(ll x,ll y){\n    ll re=x*y;\n    re-=re/mod*mod;//\u672c\u6765\u60f3\u7528while\u5b9e\u73b0 \u4f46\u8fd0\u884c\u4e4b\u540e\u53d1\u73b0\u6bd4\u76f4\u63a5%\u8fd8\u6162\n    return re;\n}\ninline ll quick(ll x,ll p){\n\tregister ll re=1;\n\twhile(p){\n\t\tif(p&1)re=mul(re,x);\n\t\tp>>=1;\n\t\tx=mul(x,x);\n\t}\n\treturn re;\n}\ninline void exgcd(ll aa,ll bb,ll &x,ll &y){\n\tif(!bb){x=1,y=0;return ;}\n\texgcd(bb,aa%bb,y,x);\n\ty-=aa/bb*x;\n}\ninline ll getinv(ll k){\n\tll x,y;\n\texgcd(k,mod,x,y);\n\tx=(x%mod+mod)%mod;\n\treturn x;\n}\nint main(){\n\ttt=read();\n\tfor(int i=1;i<=100000;i++);\n\tfor(int i=1;i<=100000;i++);\n\tfor(int i=1;i<=100000;i++);\n\tfor(register int i=1;i<=tt;++i)a[i]=read(),b[i]=read();\n\tfor(int i=1;i<=tt;i++)maxn=maxn>b[i]?maxn:b[i];\n\tinv[1]=1,prod[1]=1;\n\tfor(register int i=2;i<=maxn;++i){\n\t\tinv[i]=(mod-mod/i)*inv[mod%i]%mod;\n\t}\n\tfor(register int i=1;i<=maxn;i++)prod[i]=1;\n\tfor(register int i=1;i<=maxn;++i)\n\t\tfor(register int j=i;j<=maxn;j+=i)\n\t\t\t++cnt[j];\n\tfor(register int i=1;i<=maxn;++i)\n\t\tfor(register int j=i;j<=maxn;j+=i)\n\t\t\tprod[j]=mul(prod[j],inv[i]);\n\tregister ll now=0;\n\tprod[0]=1,ans[0]=1;\n\tfor(register int i=1;i<=maxn;i++)cnt[i]+=cnt[i-1];\n\tfor(register int i=1;i<=maxn;i++)prod[i]=mul(prod[i],prod[i-1]);\n\tfor(register int i=1;i<=maxn;++i)ans[i]=mul(ans[i-1],mul(quick(i,cnt[i]),prod[i]))%mod;\n\tfor(register int i=1;i<=tt;++i)printf(\"%lld\\n\",mul(ans[b[i]],getinv(ans[a[i]-1])));\n}\n```",
        "postTime": 1571582432,
        "uid": 111197,
        "name": "lqhsr",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4902 \u3010\u4e58\u79ef\u3011"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u5728\u8fd9\u91cc\u518d\u5199\u4e00\u4e0b\u8fd9\u4e2a\u5f0f\u5b50:\n\n$$\\prod_{i = A}^{B}\\prod^i_{j=1}(\\frac{i}{j})^{\\lfloor \\frac{i}{j} \\rfloor}\\ (\\bmod\\ 19260817)$$\n\n\u5982\u679c\u53ea\u662f\u770b\u7740\u800c\u4e0d\u7ed9\u5b83\u6765\u4e00\u4e2a\u5927\u624b\u672f\u662f\u6c38\u8fdc\u90fd\u505a\u4e0d\u51fa\u6765\u7684..~~\u9664\u975e\u4f60\u6709\u5929\u6cb3\u4e00\u53f7~~\n\n\u7136\u540e\u5f00\u59cb\u5b83\u7684\u53d8\u5f62\u8bb0:\n\n$$\\prod_{i = A}^{B}\\prod^i_{j=1}i^{\\lfloor \\frac{i}{j} \\rfloor} \\times inv(j)^{\\lfloor \\frac{i}{j} \\rfloor} (\\bmod\\ 19260817)$$\n\n$$\\prod_{i = A}^{B}\\prod^i_{j=1}i^{\\lfloor \\frac{i}{j} \\rfloor} \\times \\prod_{i = A}^{B}\\prod^i_{j=1}inv(j)^{\\lfloor \\frac{i}{j} \\rfloor} (\\bmod\\ 19260817)$$\n\n\u5230\u8fd9\u91cc\u5e94\u8be5\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\u7684\u5427..\u53ea\u662f\u62c6\u6210\u4e86\u9006\u5143\u7136\u540e\u5206\u5f00\u4e86..\n\n\u5982\u679c\u4e0d\u4f1a\u9006\u5143\u8bf7\u51fa\u95e8$P3811$\u4e0d\u9001..\n\n\u597d\u7684\u7ee7\u7eed..\n\n$$\\prod_{i = A}^{B}i^{\\sum_{j=1}^{i}\\lfloor \\frac{i}{j} \\rfloor} \\times \\prod_{i = A}^{B} \\prod^B_{j = 1} inv(j) ^ {\\lfloor \\frac{i}{j} \\rfloor} (\\bmod\\ 19260817)$$\n\n\u524d\u9762\u4e00\u534a\u5e94\u8be5\u90fd\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\u628a..\u7528\u4e86\u5e42\u7684\u4e58\u79ef\u7684\u4e00\u4e2a\u516c\u5f0f:$x^a \\cdot x^b = x^{a+b}$\n\n\u540e\u9762\u4e00\u534a\u5c31\u662f\u4e00\u4e2a\u53d8\u5f62..\u628a$j$\u5f04\u5230$i$\u524d\u9762\u53bb..\n\n\u4f60\u53ef\u80fd\u4f1a\u89c9\u5f97\u8fd9\u4e2a\u591a\u4e58\u4e86\u4e00\u4e9b\u5947\u602a\u7684\u4e1c\u897f,\u6bd5\u7adf\u4ee5\u524d\u7684$j$\u662f\u5230$i$,\u7136\u800c\u73b0\u5728\u5230\u4e86$B$..\n\n\u4f46\u662f\u5e76\u4e0d\u4f1a\u591a..\u56e0\u4e3a\u5982\u679c$j > i$,\u90a3\u4e48$\\lfloor \\frac{i}{j} \\rfloor=0$,\u5bf9\u4e8e\u5e42\u6765\u8bf4\u7b97\u51fa\u6765\u7684\u7ed3\u679c\u5c31\u662f$1$,\u4e58\u4e0a\u4e00\u4e2a$1$\u5e76\u4e0d\u4f1a\u9020\u6210\u4ec0\u4e48\u5947\u602a\u7684\u7ed3\u679c..\n\n\u597d\u7684\u7ee7\u7eed..\n\n$$\\prod_{i = A}^{B}i^{\\sum_{j=1}^{i}\\lfloor \\frac{i}{j} \\rfloor} \\times \\prod_{j = 1}^{B} (\\prod^B_{i = 1} inv(j) ^ {\\lfloor \\frac{i}{j} \\rfloor} \\times \\prod^A_{i = 1} j ^ {\\lfloor \\frac{i}{j} \\rfloor}) (\\bmod\\ 19260817)$$\n\n$$\\prod_{i = A}^{B}i^{\\sum_{j=1}^{i}\\lfloor \\frac{i}{j} \\rfloor} \\times inv(\\prod_{j = 1}^{B} j ^ {\\sum_{i=1}^{B}\\lfloor \\frac{i}{j} \\rfloor}) \\times \\prod_{j = 1}^{A} j ^ {\\sum_{i=1}^{A}\\lfloor \\frac{i}{j} \\rfloor} (\\bmod\\ 19260817)$$\n\n\u7136\u540e\u5230\u8fd9\u91cc\u5c31\u53ef\u4ee5\u505a\u4e86..\n\n\u9996\u5148\u5bf9\u4e8e$\\sum_{j=1}^{i}\\lfloor \\frac{i}{j} \\rfloor$\u8fd9\u4e2a\u73a9\u610f\u53ef\u4ee5\u4f7f\u7528\u4e00\u79cd\u795e\u5947\u7684\u53d8\u5f62\u53d8\u6210\u4e00\u4e2a\u53ef\u4ee5\u65b9\u4fbf\u6c42\u7684\u4e1c\u897f..\n\n\u8fd9\u4e2a\u5728[\u8fd9\u7bc7\u9898\u89e3](https://www.luogu.org/blog/20782/resT1)\u7684\u4e0b\u65b9\u6709\u6709\u5173\u8bc1\u660e,\u6240\u4ee5\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0..\n\n\u7136\u540e\u5c31\u662f\u540e\u9762\u90a3\u4e00\u5768\u4e1c\u897f\u4e86..\n\n\u90a3\u4e00\u5806\u4e1c\u897f\u4e3b\u8981\u8981\u6c42\u7684\u4e1c\u897f\u5c31\u662f$\\prod_{j = 1}^{x} j ^ {\\sum_{i=1}^{x}\\lfloor \\frac{i}{j} \\rfloor}$...\n\n\u6211\u4eec\u53ef\u4ee5\u4ece$x$->$x+1$\u7684\u65f6\u5019\u53d8\u591a\u7684\u5730\u65b9\u6765\u8003\u8651..\n\n\u9996\u5148\u591a\u7684\u5c31\u662f$(x+1) ^ {\\sum_{i=1}^{x+1}\\lfloor \\frac{i}{x+1} \\rfloor}$\n\n\u7136\u800c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u73a9\u610f\u5c31\u662f$x+1$..\n\n\u7136\u540e\u8003\u8651\u5176\u4ed6\u7684\u5730\u65b9..\n\n\u5bf9\u4e8e$1$~$x$\u7684$j$,\u53ea\u53ef\u80fd\u5728\u6307\u6570\u4e0a\u9762\u591a\u4e86\u4e2a$\\lfloor \\frac{x+1}{j} \\rfloor$\n\n\u5982\u679c\u7136\u540e\u6211\u4eec\u8fd8\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u589e\u591a\u7684$j$\u53ea\u4f1a\u662f$x+1$\u7684\u56e0\u5b50..\n\n\u7136\u540e\u8fd9\u4e9b\u589e\u591a\u7684\u91cf\u5c31\u662f$x+1$\u7684\u56e0\u5b50\u7684\u4e58\u79ef\u4e86..\n\n\u7136\u540e\u8fd9\u4e2a\u53ef\u4ee5\u60f3\u4e00\u60f3,\u53cd\u6b63\u53ef\u4ee5\u7528\u7ebf\u6027\u7b5b\u641e\u4e00\u641e..\n\n\u8fd9\u4e2a\u53d8\u5316\u91cf\u6c42\u51fa\u6765\u4ee5\u540e,\u5c31\u53ef\u4ee5\u7528\u4e24\u6b21\u524d\u7f00\u79ef\u641e\u6389\u4e86..\n\n\u4e0b\u9762\u5c31\u662f\u4e11\u964b\u7684\u4ee3\u7801..\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n#define reg register\n#define space putchar(' ')\n#define enter putchar('\\n')\n#define pin(a) printf(\"%d\", a)\n\ntypedef long long ll;\n\ninline int read() {\n    reg int s = 0, t = 0; reg char ch = getchar();\n    while(ch > '9' || ch < '0') t |= ch == '-', ch = getchar();\n    while(ch >= '0' && ch <= '9') s = (s << 1) + (s << 3) + (ch ^ 48), ch = getchar();\n    return t ? -s : s;\n}\n\nconst int mod = 19260817;\nconst int MAXN = 1000000;\n\nbitset<MAXN + 1>Check;\n\ninline ll ksm(reg ll a, reg int k) {\n    reg ll s = 1;\n    while(k) {\n        if(k & 1) s = s * a % mod;\n        a = a * a % mod;\n        k >>= 1;\n    }\n    return s;\n}\n\nint main() {\n    reg int tot = 0;\n    reg int f[MAXN + 1] = {1, 1};\n    reg int d[MAXN + 1];\n    reg int h[MAXN + 1];\n    reg int prime[MAXN / 10];\n    h[0] = h[1] = d[1] = 1;\n    for(reg int i = 2; i <= MAXN; i++) {\n        if(!Check[i]) prime[++tot] = i, d[i] = 2, h[i] = i;\n        for(reg int j = 1; j <= tot && i * prime[j] <= MAXN; j++) {\n            reg int pr = prime[j];\n            Check[i * pr] = 1;\n            if(i % prime[j] == 0) {\n                reg int tmp = i, s = 2, F = 1;\n                while(tmp % pr == 0) tmp /= pr, F += s, s++;\n                d[i * pr] = d[tmp] * s;\n                h[i * pr] = 1LL * ksm(h[tmp], d[i / tmp * pr]) * ksm(pr, 1LL * F * d[tmp] % (mod - 1)) % mod;\n                break;\n            }\n            d[i * pr] = d[i] << 1;\n            h[i * pr] = 1LL * h[i] * h[i] % mod * ksm(pr, d[i]) % mod;\n        }\n    }\n    for(reg int i = 2; i <= MAXN; i++) {\n        d[i] += d[i - 1];\n        f[i] = 1LL * f[i - 1] * ksm(i, (d[i] %= mod - 1)) % mod;\n    }\n    for(reg int i = 2; i <= MAXN; i++) h[i] = 1LL * h[i - 1] * h[i] % mod;\n    for(reg int i = 2; i <= MAXN; i++) h[i] = 1LL * h[i - 1] * h[i] % mod;\n    reg int T = read();\n    for(reg int QwQ = 0, A, B; QwQ < T; QwQ++)\n        A = read() - 1, B = read(),\n        pin(ksm(f[A], mod - 2)  * f[B] % mod * ksm(h[B], mod - 2) % mod * h[A] % mod),\n        enter;\n    return 0;\n}\n```",
        "postTime": 1538225700,
        "uid": 20782,
        "name": "CYJian",
        "ccfLevel": 10,
        "title": "T3"
    },
    {
        "content": "$$ \\prod_{i=A}^B\\prod_{j=1}^i(\\frac{i}{j})^{\\lfloor\\frac{i}{j}\\rfloor} $$\n\n$$ = \\frac{\\prod_{i=1}^B\\prod_{j=1}^ii^{\\lfloor\\frac{i}{j}\\rfloor}inv(j)^{\\lfloor\\frac{i}{j}\\rfloor}}{\\prod_{i=1}^{A-1}\\prod_{j=1}^ii^{\\lfloor\\frac{i}{j}\\rfloor}inv(j)^{\\lfloor\\frac{i}{j}\\rfloor}} $$\n\n\u6240\u4ee5\u5bf9\u4e8e\u4efb\u610f\u7684 $ n $\uff0c\u6211\u4eec\u53ea\u9700\u5feb\u901f\u8ba1\u7b97\n\n$$ \\prod_{i=1}^n \\prod_{j=1}^i(\\frac{i}{j})^{\\lfloor\\frac{i}{j}\\rfloor} $$\n\n$$ = ( \\prod_{i=1}^n \\prod_{j=1}^i i^{\\lfloor\\frac{i}{j}\\rfloor} )( \\prod_{i=1}^n \\prod_{j=1}^i j^{\\lfloor\\frac{i}{j}\\rfloor} )^{-1}  $$\n\n\uff08$ x^{-1} $ \u4ee3\u8868 $ x $ \u7684\u9006\u5143\uff0c$ \\mod 19260817 $\uff09\n\n$$ = ( \\prod_{i=1}^n i^{\\sum_{j=1}^i \\lfloor\\frac{i}{j}\\rfloor} )( \\prod_{i=1}^n \\prod_{j=1}^i j^{\\lfloor\\frac{i}{j}\\rfloor} )^{-1}  $$\n\n\uff08\u5de6\u8fb9\u5229\u7528 $ x^a \\cdot x^b = x^{a+b} $ \u5408\u5e76\uff09\n\n\u8fd9\u4e2a\u65f6\u5019\u4f60\u4f1a\u53d1\u73b0\u5de6\u8fb9\u6bd4\u8f83\u597d\u770b\uff0c\u5176\u5b9e\u5df2\u7ecf\u53ef\u4ee5\u505a\u4e86\n\ndalao: \u53ef\u662f $ \\sum_{j=1}^i \\lfloor\\frac{i}{j}\\rfloor $ \u662f $ O(\\sqrt i) $ \u7684\u9e2d\uff08\u6570\u8bba\u5206\u5757\uff09\uff0c\u5408\u5728\u4e00\u8d77\u4e0d\u662f $ O(n\\sqrt n) $ \u5417\uff1f\n\n\u8fd9\u4e2a\u65f6\u5019\u4f60\u4f1a\u53d1\u73b0\u4f60\u9700\u8981\u8ba1\u7b97\u6240\u6709 $ i $ \u7684 $ \\sum_{j=1}^i \\lfloor\\frac{i}{j}\\rfloor $\uff0c~~\u90a3\u4e48\u4e00\u5b9a\u6709\u5feb\u4e00\u70b9\u7684\u529e\u6cd5~~\n\n\u6211\u4eec\u4ee4 $ f(n) = \\sum_{i=1}^n \\lfloor\\frac{n}{i}\\rfloor $\uff0c\u89c2\u5bdf $ f(n) - f(n-1) $\uff08\u4ece $ n-1 $ \u5230 $ n $ \u7684\u589e\u91cf\uff09\n\n$ f(n) - f(n-1) = \\sum_{i=1}^n (\\lfloor\\frac{n}{i}\\rfloor - \\lfloor\\frac{n-1}{i}\\rfloor) $\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5f53\u4e14\u4ec5\u5f53 $ n $ \u521a\u597d\u6574\u9664 $ i $\uff08$ i|n $\uff09\u65f6\uff0c$ \\lfloor\\frac{n}{i}\\rfloor = \\lfloor\\frac{n-1}{i}\\rfloor + 1 $\uff0c\u5176\u4ed6\u60c5\u51b5\u4e0b\u4e24\u8005\u76f8\u7b49\n\n\u6240\u4ee5 $ f(n) = f(n-1) + \\sum_{i|n}1 $\uff0c\u5373 $ n $ \u7684\u7ea6\u6570\u4e2a\u6570\uff0c\u800c\u8fd9\u662f\u53ef\u4ee5\u9884\u5904\u7406\u7684\uff08\u53ef\u4ee5\u4e0d\u7528\u6b27\u62c9\u7b5b\uff0c\u76f4\u63a5 $ O(n\\ln n) $ \u66b4\u529b\u5373\u53ef\uff0ce.g.\uff09\n\n```cpp\nfor(int i=1;i<=n;i++)\n    for(int j=i;j<=n;j+=i)\n        d[j]++;\n```\n\n\u4e8e\u662f\u4f60\u53d1\u73b0\u4f60\u53ef\u4ee5 $ O(n) $ \u9012\u63a8\u51fa\u6240\u6709 $ f(n) $\uff0c\u8fdb\u800c\u63a8\u51fa\u6240\u6709\u7684 $ \\prod_{i=1}^n i^{\\sum_{j=1}^i \\lfloor\\frac{i}{j}\\rfloor} = \\prod_{i=1}^n i^{f(i)} $\uff0c\u4e5f\u5c31\u662f\u8bf4\u67ff\u5b50\u7684\u5de6\u8fb9\u88ab\u4f60\u6109\u5feb\u7684\u89e3\u51b3\u4e86qwq\n\n\u4e0b\u9762\u770b\u53f3\u8fb9\n\n$$ ( \\prod_{i=1}^n \\prod_{j=1}^i j^{\\lfloor\\frac{i}{j}\\rfloor} )^{-1} $$\n\n$$ = ( \\prod_{j=1}^n \\prod_{i=j}^n j^{\\lfloor\\frac{i}{j}\\rfloor} )^{-1} $$\n\n\uff08\u4ea4\u6362 $ \\sum $ \uff09\n\n$$ = ( \\prod_{j=1}^n j^{\\sum_{i=j}^n \\lfloor\\frac{i}{j}\\rfloor} )^{-1} $$\n\n\uff08\u5229\u7528 $ x^a \\cdot x^b = x^{a+b} $ \u5408\u5e76\uff09\n\n\u4f60\u4f1a\u53d1\u73b0 $ \\forall i \\in [1, j-1], \\lfloor\\frac{i}{j}\\rfloor = 0 $\uff0c\u6240\u4ee5\u4e0a\u9762\u90a3\u4e2a\u67ff\u5b50\u8ddf\u8fd9\u4e2a\u662f\u4e00\u6837\u7684\uff1a\n\n$$ = ( \\prod_{j=1}^n j^{\\sum_{i=1}^n \\lfloor\\frac{i}{j}\\rfloor} )^{-1} $$\n\n\u8fd9\u4e2a\u770b\u8d77\u6765\u597d\u590d\u6742\u554a\u2026\u2026\u6211\u4eec\u8fd8\u662f\u4ee4 $ g(n) = \\prod_{j=1}^n j^{\\sum_{i=1}^n \\lfloor\\frac{i}{j}\\rfloor} $\uff0c\uff08\u9006\u5143\u6700\u540e\u6c42\u4e00\u4e0b\u5c31\u884c\uff09\u8003\u8651\u4ece $ g(n-1) $ \u5230 $ g(n) $ \u7684\u589e\u91cf\uff1a\n\n$$ \\frac{g(n)}{g(n-1)} = \\prod_{j=1}^n j^{\\sum_{i=1}^n \\lfloor\\frac{i}{j}\\rfloor - \\sum_{i=1}^{n-1} \\lfloor\\frac{i}{j}\\rfloor} $$\n\n$$ = \\prod_{j=1}^n j^{\\lfloor\\frac{n}{j}\\rfloor} $$\n\n\u7136\u540e\u4f60\u53d1\u73b0\u8fd8\u662f\u4e0d\u90a3\u4e48\u597d\u6c42\u2026\u2026\u518d\u4ee4 $ h(n) = \\prod_{i=1}^n i^{\\lfloor\\frac{n}{i}\\rfloor} $\uff0c\u8003\u5bdf $ h $ \u7684\u589e\u91cf\n\n$$ \\frac{h(n)}{h(n-1)} = \\prod_{i=1}^n i^{\\lfloor\\frac{n}{i}\\rfloor - \\lfloor\\frac{n-1}{i}\\rfloor} $$\n\n~~\u6839\u636e\u4e0a\u9762\u7684\u63a2\u7a76\u7ed3\u8bba~~\uff0c\u5f53\u4e14\u4ec5\u5f53 $ i|n $ \u65f6\uff0c$ \\lfloor\\frac{n}{i}\\rfloor = \\lfloor\\frac{n-1}{i}\\rfloor + 1 $\uff0c\u5176\u4ed6\u60c5\u51b5\u4e0b\u4e24\u8005\u76f8\u7b49\n\n\u6240\u4ee5 $ \\frac{h(n)}{h(n-1)} $\n\n$$ = \\prod_{i|n}i $$\n\n\u4f60\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u4e1c\u897f\u4e5f\u662f\u53ef\u4ee5\u9884\u5904\u7406\u7684\uff08\u8ddf\u521a\u624d\u90a3\u4e2a\u4ee3\u7801\u51e0\u4e4e\u4e00\u6837\uff09\n\n\u6240\u4ee5\u53ef\u4ee5 $ O(n) $ \u9012\u63a8\u51fa\u6240\u6709 $ h(n) = h(n-1) \\cdot \\prod_{i|n}i $\n\n\u6240\u4ee5\u53ef\u4ee5 $ O(n) $ \u9012\u63a8\u51fa\u6240\u6709 $ g(n) = g(n-1) \\cdot h(n) $\n\n\u6240\u4ee5\u53ef\u4ee5 $ O(n) $ \u9012\u63a8\u51fa\u67ff\u5b50\u7684\u53f3\u8fb9\n\n\u6240\u4ee5\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6240\u6709\u7684\u7b54\u6848\uff0c\u5728\u8be2\u95ee\u7684\u65f6\u5019\u8f93\u51fa $ ans(B) \\cdot (ans(A-1))^{-1} $ \u5373\u53ef\n\n~~\u4e8e\u662f\u4f60\u5c31\u79d2\u4e86\u6b64\u9898~~\n\n**~~\u8bb0\u5f97\u5f00long long~~**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int mod=19260817;\ninline int fastpow(int a,int n)\n{\n\tint ans=1;\n\twhile(n)\n\t{\n\t\tif(n&1)\n\t\t\tans=ans*a%mod;\n\t\ta=a*a%mod;\n\t\tn>>=1;\n\t}\n\treturn ans;\n}\ninline int inv(int x)\n{\n\treturn fastpow(x,mod-2);\n}\nint d[1000001],hd[1000001],ans[1000001];\nvoid init(int n)\n{\n\tfor(int i=1;i<=n;i++)\n\t\thd[i]=1;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=i;j<=n;j+=i)\n\t\t{\n\t\t\td[j]++;\n\t\t\thd[j]=hd[j]*i%mod;\n\t\t}\n\tint tot=1,f=0,g=1,h=1;\n\tans[0]=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tf=(f+d[i])%mod;\n\t\th=h*hd[i]%mod;\n\t\tg=g*h%mod;\n\t\ttot=tot*fastpow(i,f)%mod;\n\t\tans[i]=tot*inv(g)%mod;\n\t}\n}\nsigned main()\n{\n\tinit(1000000);\n\tint t;\n\tscanf(\"%lld\",&t);\n\twhile(t--)\n\t{\n\t\tint a,b;\n\t\tscanf(\"%lld %lld\",&a,&b);\n\t\tprintf(\"%lld\\n\",ans[b]*inv(ans[a-1])%mod);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1571833873,
        "uid": 73645,
        "name": "_ztyqwq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4902 \u3010\u4e58\u79ef\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u6c42 $\\prod_{i=A}^B\\prod_{j=1}^i(\\frac{i}{j})^{\\lfloor\\frac{i}{j}\\rfloor}$\u3002\n\n\u6838\u5fc3\u601d\u60f3\uff1a\u524d\u7f00\u548c\u3002\n\n\u89e3\uff1a\n\n\u6613\u77e5\u6240\u6c42 $=\\frac{\\prod_{i=1}^B\\prod_{j=1}^i(\\frac{i}{j})^{\\lfloor\\frac{i}{j}\\rfloor}}{\\prod_{i=1}^{A-1}\\prod_{j=1}^i(\\frac{i}{j})^{\\lfloor\\frac{i}{j}\\rfloor}}$\uff0c\u4e14 $\\prod_{i=1}^x\\prod_{j=1}^i(\\frac{i}{j})^{\\lfloor\\frac{i}{j}\\rfloor}=\\prod_{i=1}^xi^{\\sum_{j=1}^i\\lfloor\\frac{i}{j}\\rfloor}\\prod_{i=1}^x\\prod_{j=1}^i(\\frac{1}{j})^{\\lfloor\\frac{i}{j}\\rfloor}$\u3002\n\n\u5bf9\u4e8e\u524d\u534a\u90e8\u5206\uff0c\u6ce8\u610f\u5230\u5f53\u4e14\u4ec5\u5f53 $j|i$ \u65f6 $\\lfloor\\frac{i}{j}\\rfloor=\\lfloor\\frac{i}{j-1}\\rfloor+1$\uff0c\u6545 $\\sum_{j=1}^i\\lfloor\\frac{i}{j}\\rfloor-\\sum_{j=1}^{i-1}\\lfloor\\frac{i}{j}\\rfloor=\\sigma_0(i)$\uff0c\u5c06 $\\sigma_0(i)$ \u524d\u7f00\u548c\u4e00\u904d\u5c31\u53ef\u5f97 $\\sum_{j=1}^i\\lfloor\\frac{i}{j}\\rfloor$\u3002$\\sigma_0(i)$ \u672c\u8eab\u662f\u79ef\u6027\u51fd\u6570\u53ef\u4ee5\u7ebf\u6027\u7b5b\u5f97\u5230\u3002\u5c06\u6240\u5f97\u524d\u7f00\u79ef\u4e00\u904d\u5c31\u5f97 $\\prod_{i=1}^xi^{\\sum_{j=1}^i\\lfloor\\frac{i}{j}\\rfloor}$\u3002\n\n\u5bf9\u4e8e\u540e\u534a\u90e8\u5206\uff0c\u7c7b\u4f3c\u5730\u6709 $\\frac{\\prod_{j=1}^i(\\frac{1}{j})^{\\lfloor\\frac{i}{j}\\rfloor}}{\\prod_{j=1}^{i-1}(\\frac{1}{j})^{\\lfloor\\frac{i}{j}\\rfloor}}=\\frac{1}{\\prod_{j|i}j}$\uff0c\u53ef\u5148\u7ebf\u6027\u9884\u5904\u7406\u51fa\u9006\u5143\uff0c\u518d\u7528 $O(n\\log n)$ \u66b4\u529b\u6c42\u51fa $1\\sim x$ \u7684\u7ea6\u6570\u79ef\uff0c\u524d\u7f00\u79ef\u4e24\u904d\u5f97\u5230 $\\prod_{i=1}^x\\prod_{j=1}^i(\\frac{1}{j})^{\\lfloor\\frac{i}{j}\\rfloor}$\u3002\n\n\u4e4b\u540e\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee\u53ef\u4ee5 $O(1)$ \u5f97\u5230\uff0c\u603b\u590d\u6742\u5ea6 $O(n\\log n+t)$\u3002\n\n\u4ee3\u7801\uff1a\n```\n#include <bits/stdc++.h>\nusing namespace std;\nconst long long mod=19260817;\nlong long t, a, b, mx, pw[1000001], inv[1000001], pro[1000001], num[1000001], res[1000001], m, n;\nint dvs[1000001], p[100001], flag;\nbool c[1000001];\ninline long long mul(long long x, long long y)\n{\n\tlong long t=x*y;\n\tt-=t/mod*mod;\n\treturn t;\n}//\u53d6\u6a21\nlong long read()\n{\n\tlong long x=0;\n\tchar ch=getchar();\n\twhile(ch>'9'||ch<'0')\n\t\tch=getchar();\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tx=x*10+ch-48;\n\t\tch=getchar();\n\t}\n\treturn x;\n}//\u5feb\u8bfb\nlong long qp(long long x, long long y)\n{\n\tif(y==0)\n\t\treturn 1;\n\tlong long t=qp(x, y/2);\n\tif(y%2==0)\n\t\treturn mul(t, t);\n\telse\n\t\treturn mul(x, mul(t, t));\n}//\u5feb\u901f\u5e42\nlong long iv(long long x, long long y)\n{\n    if (y==0) \n    {\n        m=1;\n        n=0;\n        return x;\n    }\n    long long z=iv(y, x%y);\n    long long t=m;\n    m=n;\n    n=t-(x/y)*n;\n    return m>=0?m:m+mod;\n}//\u6269\u6b27\u6c42\u9006\u5143\nvoid write(long long x)\n{\n    if(x>=10) \n\t\twrite(x/10);\n    putchar(x-x/10*10+48);\n}//\u5feb\u5199\nint main()\n{\n\tios::sync_with_stdio(false);\n\tinv[1]=1;\n\tfor(int i=2; i<=1000000; ++i)\n\t\tinv[i]=(mod-mod/i)*inv[mod%i]%mod;//\u7ebf\u6027\u9884\u5904\u7406\u9006\u5143\n\tres[0]=1;\n\tdvs[1]=1;\n\tfor(int i=2; i<=1000000; ++i)\n\t{\n\t    if(c[i]==0)\n\t    {\n\t    \tnum[i]=1;\n\t    \tdvs[i]=2;\n\t     \tp[++flag]=i;\n\t\t}\n\t    for(int j=1; j<=flag; ++j)\n\t\t{\n\t\t\tif(i*p[j]>1000000) \n\t\t\tbreak;\n\t\t\tc[i*p[j]]=1;\n\t\t\tif(i/p[j]*p[j]==i)\n\t\t\t{\n\t\t\t\tnum[i*p[j]]=num[i]+1;\n\t\t\t\tdvs[i*p[j]]=dvs[i]/(num[i]+1)*(num[i]+2);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tnum[i*p[j]]=1;\n\t\t\tdvs[i*p[j]]=dvs[i]*dvs[p[j]];\n\t\t}\n    }//\u7ebf\u6027\u7b5b\u6c42\u7ea6\u6570\u4e2a\u6570\n\tfor(int i=0; i<=1000000; ++i)\n    \tpro[i]=1;\n    for(int i=1; i<=1000000; ++i)\n    \tfor(int j=i; j<=1000000; j+=i)\n    \t\tpro[j]=mul(pro[j], inv[i]);\n    for(int i=1; i<=1000000; ++i)\n    {\n    \tdvs[i]=dvs[i]+dvs[i-1]>mod-1?dvs[i]+dvs[i-1]-mod+1:dvs[i]+dvs[i-1];\n    \tpw[i]=qp(i, dvs[i]);\n    \tpro[i]=mul(pro[i], pro[i-1]);\n\t}\n    for(int i=2; i<=1000000; ++i)\n    {\n\t\tpw[i]=mul(pw[i], pw[i-1]);\n    \tpro[i]=mul(pro[i], pro[i-1]);\n\t}\n    for(int i=1; i<=1000000; ++i)\n    \tres[i]=mul(pw[i], pro[i]);//\u524d\u7f00\u79ef\u548c\u524d\u7f00\u548c\uff0c\u6c421-x\u7684\u7b54\u6848\n    t=read();\n    for(int i=1; i<=t; ++i)\n    {\n    \ta=read();\n    \tb=read();\n    \twrite(mul(res[b], iv(res[a-1], mod)));//\u5dee\u5206\uff08\u6216\u8005\u8bf4\u5546\u5206\uff09\n    \tputs(\"\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1675496914,
        "uid": 191387,
        "name": "\u03a6\u03c1\u03b1\u03bd\u03ba",
        "ccfLevel": 0,
        "title": "P4902 \u4e58\u79ef \u9898\u89e3"
    },
    {
        "content": "\u65b9\u4fbf\u8d77\u89c1\uff0c\u4e0b\u8bb0 $i/j$ \u4e3a $\\lfloor\\dfrac{i}{j}\\rfloor$\u3002\n\n# \u9898\u610f\n\n\u7ed9\u5b9a $A,B$\uff0c\u6c42\n\n$$\\prod_{i=A}^B\\prod_{j=1}^i\\left(\\dfrac{i}{j}\\right)^{i/j}$$\n\n$10^6$ \u7ec4\u8be2\u95ee\uff0c$A,B\\le 10^6$\u3002\n# \u524d\u7f6e\u77e5\u8bc6\n\u57fa\u672c\u7684\u63a8\u5f0f\u5b50\u80fd\u529b\uff0c\u524d\u7f00\u548c/\u79ef\uff0c\u4e58\u6cd5\u9006\u5143\u3002\n# \u89e3\u6cd5\n\u7b2c\u4e00\u6b65\u662f\u89c2\u5bdf\u5230\u8981\u6c42\u7684\u5f0f\u5b50\u662f\u4e00\u4e2a\u524d\u7f00\u79ef\u7684\u5f62\u5f0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u62c6\u6210\u4e24\u4e2a\u5f0f\u5b50\uff1a\n\n$$\\text{\u539f\u5f0f}=\\dfrac{f(B)}{f(A-1)},f(x)=\\prod_{i=1}^x\\prod_{j=1}^i\\left(\\dfrac{i}{j}\\right)^{i/j}$$\n\n\u9047\u5230\u5206\u6570\u7684\u4e58\u79ef\uff0c\u4e00\u822c\u8981\u5206\u5f00\u8003\u8651\u5206\u5b50\u5206\u6bcd\uff1a\n\n$$f(x)=\\dfrac{\\prod_{i=1}^x\\prod_{j=1}^ii^{i/j}}{\\prod_{i=1}^x\\prod_{j=1}^ij^{i/j}}$$\n\n\u8bb0\u5206\u5b50\u4e3a $a(x)$\uff0c\u5206\u6bcd\u4e3a $b(x)$\u3002\n## $a(x)$ \u7684\u9884\u5904\u7406\n\n$$a(x)=\\prod_{i=1}^x\\prod_{j=1}^ii^{i/j}=\\prod_{i=1}^x i^{\\normalsize{\\left(\\sum_{j=1}^i(i/j)\\right)}}$$\n\n\u5982\u679c\u6211\u4eec\u80fd\u9884\u5904\u7406 $c(x)=\\sum_{j=1}^x(x/j)$\uff0c\u90a3\u4e48 $a(x)=\\prod_{i=1}^n i^{c(i)}$ \u5f88\u81ea\u7136\u5730\u5c31\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u6765\u4e86\u3002\n\n\u95ee\u9898\u53d8\u6210\u5982\u4f55\u9884\u5904\u7406 $c(x)$\u3002\u9047\u4e8b\u4e0d\u51b3\uff0c\u505a\u4e2a\u88c2\u9879\uff1a\n\n$$\\begin{aligned}\n&c(x)-c(x-1)\\\\\n=&\\sum_{j=1}^x(x/j)-\\sum_{j=1}^{x-1}((x-1)/j)\\\\\n=&(x/x)+\\sum_{j=1}^{x-1}(x/j)-((x-1)/j)\\\\\n=&(x/x)+\\sum_{j=1}^{x-1}[j|x]\\\\\n=&d(x)\\\\\n\\end{aligned}$$\n$$c(x)=\\sum_{i=1}^x d(i)$$\n\n\u5176\u4e2d $d(x)$ \u8868\u793a $x$ \u7684\u7ea6\u6570\u4e2a\u6570\u3002\n\n\u7ebf\u6027\u7b5b\u5373\u53ef\u3002[\u6211\u7684\u53e6\u4e00\u7bc7\u9898\u89e3](https://www.luogu.com.cn/blog/340940/p3362-cool-loves-shaxian-ti-xie)\u91cc\u63d0\u5230\u4e86\u7ebf\u6027\u7b5b\u4e00\u822c\u79ef\u6027\u51fd\u6570\u7684\u65b9\u6cd5\uff0c\u5bf9 $d(x)$ \u4e5f\u9002\u7528\u3002\n\n## $b(x)$ \u7684\u9884\u5904\u7406\n\n\u83dc\u9e21\u6211\u4e00\u5f00\u59cb\u4eff\u7167 $a(x)$\uff0c\u5c06 $b(x)$ \u53d8\u5f62\u4e3a\n\n$$\\begin{aligned}\nb(x)&=\\prod_{i=1}^x\\prod_{j=1}^ij^{i/j}\\\\\n&=\\prod_{j=1}^x\\prod_{i=j}^xj^{i/j}\\\\\n&=\\prod_{j=1}^x j^{\\normalsize\\sum_{i=j}^x{i/j}}\\\\\n\\end{aligned}$$\n\n\u6700\u540e\u8bef\u5165\u6b67\u9014\u3002\u56e0\u4e3a $\\sum_{i=j}^x{i/j}$ \u662f\u5173\u4e8e $j$ \u548c $x$ \u7684\u4e8c\u5143\u51fd\u6570\uff0c\u6240\u4ee5\u65e0\u6cd5\u9884\u5904\u7406\u3002\uff08\u5927\u6982\u5427\uff0c\u5982\u679c\u6709\u5927\u4f6c\u9884\u5904\u7406\u51fa\u6765\u4e86\uff0c\u53ef\u4ee5\u79c1\u4fe1\u672c\u83dc\u9e21\uff09\n\n\u6b63\u786e\u7684\u505a\u6cd5\u662f\u6ce8\u610f\u5230\u5982\u679c\u53ef\u4ee5\u9884\u5904\u7406 $e(x)=\\prod_{j=1}^x j^{x/j}$\uff0c\u90a3\u505a\u4e00\u6b21\u524d\u7f00\u79ef\u5c31\u5f97\u5230\u4e86 $b(x)$\u3002\n\n$e(x)$ \u8fd8\u4e0d\u662f\u5f88\u597d\u9884\u5904\u7406\u3002\u9047\u4e8b\u4e0d\u51b3\uff0c\u518d\u88c2\u4e2a\u9879\uff1a\n\n$$\\begin{aligned}\n&\\dfrac{e(x)}{e(x-1)}\\\\\n=&\\dfrac{\\prod_{j=1}^x j^{x/j}}{\\prod_{j=1}^{x-1} j^{(x-1)/j}}\\\\\n=&x^{x/x}\\times\\prod_{j=1}^{x-1}\\dfrac{j^{x/j}}{j^{(x-1)/j}}\\\\\n\\end{aligned}$$\n\n$\\dfrac{j^{x/j}}{j^{(x-1)/j}}$ \u5f53 $j|x$ \u65f6\u4e3a $j$\uff0c\u5426\u5219\u4e3a $1$\u3002\n$$\\begin{aligned}\n&\\dfrac{e(x)}{e(x-1)}\\\\\n=&x\\times\\prod_{j|x,j<x}^{x-1}j\\\\\n=&\\prod_{j|x}j\n\\end{aligned}$$\n\n\u5373 $x$ \u7684\u7ea6\u6570\u4e4b\u79ef\u3002\n\n\u8fd9\u662f\u4e2a\u7ecf\u5178\u95ee\u9898\uff0c\u89e3\u6cd5\u662f\u5c06\u7ea6\u6570\u9996\u5c3e\u914d\u5bf9\uff1a\n\n$$\\begin{aligned}\n&\\prod_{j|x}j\\\\\n=&\\sqrt{\\prod_{j|x}j\\times\\prod_{j|x}\\dfrac{x}{j}}\\\\\n=&\\sqrt{\\prod_{j|x}j\\times\\dfrac{x}{j}}\\\\\n=&\\sqrt{\\prod_{j|x}x}\\\\\n=&\\sqrt{x^{d(x)}}\\\\\n\\end{aligned}$$\n\n\u5f53 $x=y^2$ \u65f6\uff0c$\\dfrac{e(x)}{e(x-1)}=y^{d(x)}$\uff1b\n\n\u82e5 $x$ \u5e76\u975e\u5b8c\u5168\u5e73\u65b9\u6570\uff0c\u5219 $d(x)$ \u4e3a\u5076\u6570\uff0c$\\dfrac{e(x)}{e(x-1)}=x^\\frac{d(x)}{2}$\u3002\n\n\u5bf9 $\\dfrac{e(x)}{e(x-1)}$ \u505a\u4e24\u6b21\u524d\u7f00\u79ef\u5373\u5f97 $b(x)$\u3002\n# \u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#define int long long\n#define M 19260817\n#define N 1000000\nusing namespace std;\nint T,A,B,pn,p[N+1],low[N+1],d[N+1],a[N+1],b[N+1];\nbool ip[N+1];\ninline int P(int x,int y=M-2)\n{\n\tif(!y) return 1;\n\tif(y&1) return x*P(x,y^1)%M;\n\tint tmp=P(x,y>>1);\n\treturn tmp*tmp%M;\n}\ninline void init()\n{\n\tmemset(ip,1,sizeof(ip));\n\tip[1]=low[1]=d[1]=1;\n\tfor(int i=2;i<=N;i++)\n\t{\n\t\tif(ip[i]) p[++pn]=i,low[i]=i,d[i]=2;\n\t\tfor(int j=1;j<=pn;j++)\n\t\t{\n\t\t\tif(i*p[j]>N) break;\n\t\t\tip[i*p[j]]=0;\n\t\t\tlow[i*p[j]]=p[j];\n\t\t\td[i*p[j]]=d[i]*d[p[j]];\n\t\t\tif(i%p[j]==0)\n\t\t\t{\n\t\t\t\tlow[i*p[j]]=low[i]*p[j];\n\t\t\t\tif(low[i]==i)\n\t\t\t\t\td[i*p[j]]=d[i]+1;\n\t\t\t\telse d[i*p[j]]=d[i/low[i]]*d[low[i]*p[j]];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=N;i++) a[i]=(a[i-1]+d[i])%M;\n\tfor(int i=1;i<=N;i++) a[i]=P(i,a[i]);\n\ta[0]=1;\n\tfor(int i=1;i<=N;i++) a[i]=a[i-1]*a[i]%M;\n\tfor(int i=1;i<=N;i++)\n\t{\n\t\tint j=sqrt(i);\n\t\tif(j*j==i) b[i]=P(j,d[i]);\n\t\telse b[i]=P(i,d[i]/2);\n\t}\n\tb[0]=1;\n\tfor(int i=1;i<=N;i++) b[i]=b[i-1]*b[i]%M;\n\tfor(int i=1;i<=N;i++) b[i]=b[i-1]*b[i]%M;\n\tfor(int i=1;i<=N;i++) a[i]=a[i]*P(b[i])%M;\n}\nsigned main()\n{\n\tinit();\n\tcin>>T;\n\twhile(T--)\n\t{\n\t\tscanf(\"%lld%lld\",&A,&B);\n\t\tprintf(\"%lld\\n\",a[B]*P(a[A-1])%M);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1666320207,
        "uid": 340940,
        "name": "IAKIOI2357",
        "ccfLevel": 0,
        "title": "P4902 \u4e58\u79ef \u9898\u89e3"
    },
    {
        "content": "\u6c42\n\n$$\n\\prod_{i=l}^r\\prod_{j=1}^i\\left(\\frac{i}{j}\\right)^{\\lfloor\\frac{i}{j}\\rfloor}\n$$\n\n\u76f4\u63a5\u505a\uff1a\n\n$$\n\\prod_{i=l}^r\\prod_{j=1}^i\\left(\\frac{i}{j}\\right)^{\\lfloor\\frac{i}{j}\\rfloor}\n$$\n$$\n=\\frac{\\prod_{i=l}^r\\prod_{j=1}^ii^{\\lfloor\\frac{i}{j}\\rfloor}}{\\prod_{i=l}^r\\prod_{j=1}^ij^{\\lfloor\\frac{i}{j}\\rfloor}}\n$$\n\n\u8003\u8651\u5206\u522b\u505a\u5206\u5b50\u5206\u6bcd\u3002\n\n\u5206\u5b50\uff1a\n\n$$\n\\prod_{i=l}^r\\prod_{j=1}^ii^{\\lfloor\\frac{i}{j}\\rfloor}\n$$\n$$\n=\\prod_{i=l}^ri^{H(i)}\n$$\n\n\u5176\u4e2d $H(n)=\\sum_{i=1}^n\\lfloor\\frac{n}{i}\\rfloor$\u3002$H$ \u662f\u53ef\u4ee5\u7ebf\u6027\u7b5b\u7684\uff08\u8003\u8651 $H(n)=H(n-1)+\\tau(n)$\uff0c$\\tau$ \u4e3a\u7ea6\u6570\u4e2a\u6570\u51fd\u6570\uff09\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7ebf\u6027\u5bf9\u6570\u5bf9\u6240\u6709\u7684 $n$ \u9884\u5904\u7406 \n\n$$\n\\prod_{i=1}^ni^{H(i)}\n$$\n\n\u90a3\u4e48\u5206\u5b50\u7684\u95ee\u9898\u5c31\u89e3\u51b3\u4e86\u3002\u63a5\u4e0b\u6765\u8003\u8651\u5206\u6bcd\u3002\n\n\u5206\u6bcd\uff1a\n\n$$\n\\prod_{i=l}^r\\prod_{j=1}^ij^{\\lfloor\\frac{i}{j}\\rfloor}\n$$\n$$\n=\\prod_{j=1}^r\\prod_{i=l}^rj^{\\lfloor\\frac{i}{j}\\rfloor}\n$$\n$$\n=\\prod_{j=1}^rj^{\\sum_{i=l}^r\\lfloor\\frac{i}{j}\\rfloor}\n$$\n$$\n=\\frac{\\prod_{j=1}^rj^{\\sum_{i=1}^r\\lfloor\\frac{i}{j}\\rfloor}}{\\prod_{j=1}^{l-1}j^{\\sum_{i=1}^{l-1}\\lfloor\\frac{i}{j}\\rfloor}}\n$$\n\n\u4e0d\u96be\u53d1\u73b0\u8fd9\u4e2a\u5206\u5f0f\u7684\u5206\u5b50\u5206\u6bcd\u672c\u8d28\u76f8\u540c\u3002\u56e0\u6b64\u53ea\u9700\u505a\n\n$$\n\\prod_{j=1}^nj^{\\sum_{i=1}^n\\lfloor\\frac{i}{j}\\rfloor}\n$$\n\n\u8003\u8651 $n\\to n+1$ \u589e\u91cf\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u4e0a\u9762\u5f0f\u5b50\u7684\u53d8\u5316\u3002\u663e\u7136\u8d21\u732e\u53ea\u5728 $i=n+1$ \u65f6\u4ea7\u751f\u3002\u90a3\u4e48\u5355\u62ce\u4e00\u9879\u6765\u770b\uff1a\n\n$$\nj^{\\lfloor\\frac{n}{j}\\rfloor}\\to j^{\\lfloor\\frac{n+1}{j}\\rfloor}\n$$\n\n\u90a3\u4e48\u663e\u7136\u5f53\u4e14\u4ec5\u5f53 $j\\mid (n+1)$ \u65f6\u624d\u4f1a\u5728\u4ea7\u751f\u539f\u6709\u8d21\u732e\u7684\u57fa\u7840\u540e\u518d\u4ea7\u751f $j$ \u7684\u8d21\u732e\u3002\u6362\u8a00\u4e4b\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u4e8c\u6b21\uff08\u79ef\uff09\u5dee\u5206\u5c31\u662f $(n+1)$ \u7684\u56e0\u5b50\u79ef\u3002\u800c\u56e0\u5b50\u79ef\u5c31\u662f $\\sqrt {n^{\\tau (n)}}$\u3002\u4e8e\u662f\u518d\u7ebf\u6027\u7b5b\u4e00\u4e0b\u5c31\u505a\u5b8c\u4e86\u3002",
        "postTime": 1665233067,
        "uid": 314991,
        "name": "zhouyuhang",
        "ccfLevel": 7,
        "title": "New"
    },
    {
        "content": "# \u9898\u9762\u94fe\u63a5\n\n[\u6d1b\u8c37](https://www.luogu.org/problemnew/show/P4902)\n\n# sol\n\n\u6211\u7684\u505a\u6cd5\u662f\u89c2\u5bdf\u6cd5\uff0c\u9996\u5148\u6211\u4eec\u628a$i$\u548c$j^{-1}$\u5206\u5f00\u505a\uff0c\u53ef\u4ee5\u770b\u5230\n\n$i$\u7684\u662f\u8fd9\u6837\u7684\u3002\u8868\u683c\u5185\u662f\u6bcf\u4e2a$i$\u548c$j$\u7684\u5bf9\u5e94$i$\u7684\u8d21\u732e\n\n| $1^1$ |       |       |       |       |       |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| $2^2$ | $2^1$ |       |       |       |       |\n| $3^3$ | $3^1$ | $3^1$ |       |       |       |\n| $4^4$ | $4^2$ | $4^1$ | $4^1$ |       |       |\n| $5^5$ | $5^2$ | $5^1$ | $5^1$ | $5^1$ |       |\n| $6^6$ | $6^3$ | $6^2$ | $6^1$ | $6^1$ | $6^1$ |\n\n\u53ef\u4ee5\u53d1\u73b0\u7b2c$i$\u884c\u6211\u4eec\u53ea\u8981\u5feb\u901f\u6c42\u51fa\u6307\u6570\u5c31\u53ef\u4ee5\u5feb\u901f\u5e42\u4e86\u3002\u7136\u540e\u4f1a\u53d1\u73b0\u4e00\u4e2a\u795e\u5947\u7684\u6027\u8d28\uff0c\u7b2c$i$\u5217\u6bcf\u8fc7$i$\u5c31\u4f1a\u8ba9\u6307\u6570\u52a0$1$\u3002\u8fd9\u6837\u7684\u8bdd\u6211\u4eec\u7ed9$i,2i,3i,4i,5i...$\u52a01\uff0c\u7136\u540e\u524d\u7f00\u548c\u5c31\u884c\u4e86\u3002\n\n\u8981\u4e0d\u8fd8\u662f\u518d\u8bf4\u6e05\u695a\u70b9\u5427\u3002\u4e0b\u9762\u8fd9\u4e2a\u8868\u662f\u8981\u52a0\u7684\u6307\u6570\u3002\n\n|  1   |      |      |      |      |      |      |      |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|  1   |  1   |      |      |      |      |      |      |\n|  1   |  0   |  1   |      |      |      |      |      |\n|  1   |  1   |  0   |  1   |      |      |      |      |\n|  1   |  0   |  0   |  0   |  1   |      |      |      |\n|  1   |  1   |  1   |  0   |  0   |  1   |      |      |\n|  1   |  0   |  0   |  0   |  0   |  0   |  1   |      |\n|  1   |  1   |  0   |  1   |  0   |  0   |  0   |  1   |\n\n\u7136\u540e\u5bf9\u6bcf\u5217\u505a\u4e00\u904d\u524d\u7f00\u548c\u3002\n\n|  1   |      |      |      |      |      |      |      |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|  2   |  1   |      |      |      |      |      |      |\n|  3   |  1   |  1   |      |      |      |      |      |\n|  4   |  2   |  1   |  1   |      |      |      |      |\n|  5   |  2   |  1   |  1   |  1   |      |      |      |\n|  6   |  3   |  2   |  1   |  1   |  1   |      |      |\n|  7   |  3   |  2   |  1   |  1   |  1   |  1   |      |\n|  8   |  4   |  2   |  2   |  1   |  1   |  1   |  1   |\n\n\u7136\u540e\u5c31\u53d8\u56de\u53bb\u4e86\uff0c\u8fd9\u4e5f\u8bb8\u662f\u5dee\u5206\u7684\u601d\u60f3\uff1f\uff1f\uff1f\u5177\u4f53\u5b9e\u73b0\u4e0d\u9700\u8981\u5bf9\u6bcf\u5217\u5f00\u6570\u7ec4\uff0c\u4e22\u5230\u4e00\u8d77\u5c31OK\u4e86\u3002\n\n### \u4e0b\u9762\u76841,2,3,4,5,6\u5747\u6307 \u4ed6\u4eec\u7684\u9006\u5143\n\n| $1^1$ |       |       |       |       |       |\n| :---: | :---: | :---: | :---: | :---: | :---: |\n| $1^2$ | $2^1$ |       |       |       |       |\n| $1^3$ | $2^1$ | $3^1$ |       |       |       |\n| $1^4$ | $2^2$ | $3^1$ | $4^1$ |       |       |\n| $1^5$ | $2^2$ | $3^1$ | $4^1$ | $5^1$ |       |\n| $1^6$ | $2^3$ | $3^2$ | $4^1$ | $5^1$ | $6^1$ |\n\n\u8fd9\u662f$j^{-1}$\u7684\u8d21\u732e\u3002\n\n\u7136\u540e\u548c\u4e0a\u9762\u4e00\u6837\u641e\uff0c\u4f46\u6211\u4eec\u76f4\u63a5\u628a\u8fd9\u4e2a\u6570\u4e58\u4e0a\u53bb\u800c\u4e0d\u662f\u52a0\u6307\u6570\u3002\n\n\u76f8\u4fe1\u6ce5\u840c\u90fd\u61c2\u4e86\u3002\u90a3\u4e48\u6211\u5c31\u8d34\u4e2a\u4ee3\u7801\u3002\n\n[blog](https://www.cnblogs.com/cx233666/p/9736923.html)",
        "postTime": 1538460730,
        "uid": 70788,
        "name": "Cgod",
        "ccfLevel": 0,
        "title": "P4902 \u3010\u4e58\u79ef\u3011"
    }
]
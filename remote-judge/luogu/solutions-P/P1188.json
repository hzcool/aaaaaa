[
    {
        "content": "\u8c01\u8bf4$O(N*K)$\u7b97\u6cd5\u8981\u9760$RP$\u7684\n\n\u8fd9\u9898\u6a21\u62df\u624d\u4e0d\u5230**300ms**\uff0c\u7a33\u7a33\u7684\n\n\u5c06\u4e00\u6bb5\u6587\u672c\u526a\u5207\u4e0b\u6765\u7c98\u5230\u53e6\u4e00\u6bb5\u6587\u672c\u540e\u9762\uff0c\u76f8\u5f53\u4e8e\u5c06\u8fd9\u4e24\u6bb5\u6587\u672c\u4ea4\u6362\n\n\u4f7f\u7528temp\u6570\u7ec4\u8bb0\u5f55\u4e0b\u526a\u5207\u4e0b\u7684\u6587\u672c\uff0c\u5c06\u53e6\u4e00\u6bb5\u6587\u672c\u5411\u524d\uff08\u63d2\u5165\u884c\u5728\u539f\u6587\u672c\u7b2c\u4e00\u884c\u4e4b\u540e\uff09\u6216\u5411\u540e\uff08\u63d2\u5165\u884c\u5728\u539f\u6587\u672c\u7b2c\u4e00\u884c\u4e4b\u524d\uff09\u3002\n\n\u5c06temp\u6570\u7ec4\u91cc\u7684\u6570\u8d4b\u503c\u5230\u8be5\u9ecf\u8d34\u7684\u4f4d\u7f6e\u5c31\u53ef\u4ee5\u4e86\u3002\n\nAC\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int MAXN = 100000 + 5;\nint n, k;\nint doc[MAXN], temp[MAXN];\nint cnt;\n\nint main()\n{\n    for (int i = 1; i < MAXN; i++) doc[i] = i;\n    cin >> n >> k;\n    for (int oper = 0; oper < k; oper++)\n    {\n        int s, t, p1, p2, ins, len;\n        cin >> s >> t >> ins;\n        len = t - s + 1;\n        p1 = ins + 1;\n        p2 = p1 + len - 1;\n        cnt = 0;\n        for (int i = s; i <= t; i++) temp[++cnt] = doc[i];\n        if (ins < s) for (int i = s - 1; i >= p1; i--) doc[i + len] = doc[i];\n        else for (int i = t + 1; i <= p2; i++) doc[i - len] = doc[i];\n        for (int i = p2; i >= p1; i--) doc[i] = temp[cnt--];\n    }\n    for (int i = 1; i <= 10; i++) cout << doc[i] << endl;\n    return 0;\n}\n```",
        "postTime": 1550657670,
        "uid": 51229,
        "name": "fanhy",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u6709 $n$ \u4e2a\u6570 $1,2,\\cdots n$ \u3002 $m$ \u6b21\u64cd\u4f5c\u3002\u6bcf\u6b21\u53d6\u51fa $[A_i,B_i]$ \u6bb5\uff0c\u5220\u9664\u540e\u63d2\u5165\u7b2c $C_i$ \u4e2a\u4f4d\u7f6e\u540e\u9762\u3002\u8f93\u51fa\u64cd\u4f5c\u7ed3\u675f\u540e\u524d $10$ \u4e2a\u6570\u5b57\u3002\n\n## \u9898\u89e3\n\n\u89c2\u5bdf\u5230\u9898\u76ee\u53ea\u8981\u6211\u4eec\u8f93\u51fa\u524d $10$ \u4e2a\u6570\u5b57\uff0c\u6240\u4ee5\u5176\u4ed6\u5730\u65b9\u662f\u4ec0\u4e48\u6570\u5b57\u4e0d\u9700\u8981\u5728\u610f\u3002\n\n\u8003\u8651\u5230\u9898\u76ee\u7ed9\u51fa\u7684\u64cd\u4f5c\u5f62\u5f0f\u6bd4\u8f83\u96be\u4ee5\u5904\u7406\uff0c\u6211\u4eec\u8f6c\u6362\u6210 $(S_i,T_i,L_i)$ \uff0c\u8868\u793a\u7b2c $i$ \u4e2a\u64cd\u4f5c\u5c06 $[S_i,S_i+L_i)$ \u79fb\u52a8\u5230\u4e86 $[T_i,T_i+L_i)$ \u3002\n\n\u89c2\u5bdf\u5230\uff0c\u64cd\u4f5c $(S_i,T_i,L_i)$ \u662f\u53ef\u9006\u7684\uff0c\u5176\u9006\u64cd\u4f5c\u4e3a $(T_i,S_i,L_i)$ \u3002\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 $m$ \u4e2a\u64cd\u4f5c\u5012\u8fc7\u6765\u505a\uff0c\u53cd\u63a8\u51fa\u7b2c $i (i\\in[1,10])$ \u4e2a\u5730\u65b9\u539f\u5148\u662f\u54ea\u4e2a\u5730\u65b9\u7684\u6570\u5b57\u3002\u5206\u7c7b\u8ba8\u8bba\u6bcf\u4e2a\u9006\u64cd\u4f5c\u5bf9\u5f53\u524d\u4f4d\u7f6e $t$ \u7684\u5f71\u54cd\u3002\n\n- \u5982\u679c\u9006\u64cd\u4f5c\u79fb\u52a8\u7684\u533a\u95f4\u5305\u542b\u4e86\u5f53\u524d\u7684 $t$ \uff0c\u5219\u4ee4 $t\\gets t+T_j-S_j$ \u3002\n\n- \u5982\u679c\u9006\u64cd\u4f5c\u5728 $t$ \u4e4b\u524d\uff0c\u4e14\u8fd9\u6bb5\u533a\u95f4\u79fb\u52a8\u540e\u5230\u4e86 $t$ \u7684\u540e\u9762\uff0c\u5219\u4ee4 $t\\gets t-L_j$ \u3002\n\n- \u5982\u679c\u9006\u64cd\u4f5c\u5728 $t$ \u4e4b\u540e\uff0c\u4e14\u8fd9\u6bb5\u533a\u95f4\u79fb\u52a8\u540e\u5230\u4e86 $t$ \u7684\u524d\u9762\uff0c\u5219\u4ee4 $t\\gets t+L_j$ \u3002\n\n\u6700\u540e\u6211\u4eec\u5c31\u80fd\u53cd\u63a8\u51fa $t$ \u539f\u5148\u5728\u54ea\u3002\u7531\u9898\u610f\u53ef\u5f97\u521d\u59cb\u65f6\u7b2c $i$ \u4e2a\u4f4d\u7f6e\u653e\u4e86 $i$ \u3002\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define up(l,r,i) for(int i=l;i<=r;i++)\n#define dn(l,r,i) for(int i=l;i>=r;i--)\nusing namespace std;\n\ntypedef long long LL;\nconst int INF =2147483647;\nint qread(){\n    int w=1,c,ret;\n    while((c=getchar())> '9'||c< '0') w=(c=='-'?-1:1); ret=c-'0';\n    while((c=getchar())>='0'&&c<='9') ret=ret*10+c-'0';\n    return ret*w;\n}\nconst int MAXN =1e3+3;\nint n,m,S[MAXN],T[MAXN],L[MAXN];\nint main(){\n    n=qread(),m=qread(); up(1,m,i){\n        int a=qread(),b=qread(),c=qread();\n        L[i]=b-a+1,S[i]=c+1,T[i]=a;\n    }\n    up(1,10,i){\n        int t=i; dn(m,1,j){\n            if(S[j]<=t&&t<=S[j]+L[j]-1) t+=T[j]-S[j]; else\n            if(S[j]> t&&T[j]<=t) t+=L[j]; else\n            if(S[j]< t&&t-L[j]<T[j]) t-=L[j];\n        }\n        printf(\"%d\\n\",t);\n    }\n    return 0;\n}\n```\n\n\u590d\u6742\u5ea6 $\\mathcal O(k\\times m)$ \uff0c\u5176\u4e2d $k$ \u4e3a\u8981\u6c42\u6211\u4eec\u8f93\u51fa\u7684\u6570\u5b57\u7684\u4e2a\u6570\uff0c\u8be5\u9898\u4e2d\u4e3a $10$ \u3002",
        "postTime": 1597478943,
        "uid": 330759,
        "name": "\u56e7\u4ed9",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "##  \u6b64\u9898\u89e3\u4f7f\u7528\u94fe\u8868\u505a\u6cd5\uff0c\u4e0d\u96be\u7406\u89e3\u3002\n## \u601d\u8def:\n1. \u5c31\u662f\u7528\u94fe\u8868\u5c06\u526a\u5207\u90e8\u5206\u524d\u4e00\u884c\u7684\u6307\u9488\u6307\u5411\u526a\u5207\u90e8\u5206\u540e\u4e00\u884c\uff1b\n\n2. \u5c06\u7c98\u8d34\u7684\u5730\u65b9\u524d\u4e00\u884c\u7684\u6307\u9488\u6307\u5411\u526a\u5207\u90e8\u5206\u6700\u5f00\u59cb\u7684\u90a3\u884c\uff1b\n\n3. \u7136\u540e\u5c06\u526a\u5207\u90e8\u5206\u5c3e\u90e8\u90a3\u884c\u7684\u6307\u9488\u6307\u5411\u539f\u672c\u7c98\u8d34\u4f4d\u7f6e\u7684\u524d\u4e00\u884c\u7684\u540e\u4e00\u884c\uff1b\n\n4. \u6700\u540e\u518d\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u8f93\u51fa\u5230\u7b2c\u5341\u884c\u5c31\u53ef\u4ee5\u4e86\u3002\n## \u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,t,a[100005],gdd,gddd,pd,ppd,ans1,ans2;\n  //\u5236\u9020\u94fe\u8868\uff01\nstruct dd{\n\tint nr;\n\tint zh;\n}zz[100005]; \nint main() {\n\tcin>>n>>m;\n\tzz[0].zh=1;\n\tfor(int i=1;i<=n-1;i++){\n\t\tzz[i].nr=i;\n\t\tzz[i].zh=i+1;\n    }\n    zz[n].nr=n;\n    zz[n].zh=0;\n\tfor(int i=1;i<=m;i++){\n\t\tint q,z,h,jl1=0,jl2=0,jl3=0;\n\t\tcin>>q>>z>>h;\n\t\tint gx=zz[0].zh;\n\t\tif(h>=q) h+=z-q+1;\n\t\tfor(int j=1;gx;j++){\n            //\u8fd9\u4e09\u4e2a\u91cd\u8981\u4f4d\u7f6e\u627e\u5230\u5c31\u8bb0\u5f55\u4e0b\u6765\uff01\n\t\t\tif(j==q-1) jl1=gx;\n\t\t\tif(j==z){\n\t\t\t\tjl2=gx;\n\t\t\t\tif(jl1&&jl3) break;\n\t\t\t}\n\t\t\tif(j==h){\n\t\t\t\tjl3=gx;\n\t\t\t\tif(jl1&&jl2) break;\n\t\t\t}\n\t\t\tgx=zz[gx].zh;\n\t\t}\n        //\u6307\u9488\u6307\u5411\u6539\u53d8\n\t\tint jjl=zz[jl1].zh;\n\t\tzz[jl1].zh=zz[jl2].zh;\n\t\tzz[jl2].zh=zz[jl3].zh;\n\t\tzz[jl3].zh=jjl;\n\t}\n\tint gt=zz[0].zh;\n    //\u8f93\u51fa\uff01\n\tfor(int i=1;i<=9;i++){\n\t\tcout<<zz[gt].nr<<endl;\n\t\tgt=zz[gt].zh;\n\t}\n    //\u6700\u540e\u4e00\u884c\u4e0d\u7528\u6362\u884c\uff0c\u867d\u7136\u6362\u4e86\u4e5f\u53ef\u4ee5\u4f46\u662f\u6709\u4e9b\u5f3a\u8feb\u5440\n\tcout<<zz[gt].nr;\n\treturn 0;\n}\n```",
        "postTime": 1584596596,
        "uid": 220969,
        "name": "zc_li",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "## P1188 PASTE \u9898\u89e3\n~~\u53ef\u4ee5\u8bf4\u662f\u6211\u505a\u8fc7\u7684\u6700\u6c34\u7684\u4e00\u9053\u84dd\u9898\u4e86\u6ca1\u6709\u4e4b\u4e00~~\\\n\u9898\u610f\u5f88\u6e05\u695a\uff0c\u5c31\u662f\u526a\u5207\u6570\u5217\u7684\u4e00\u6bb5\uff0c\u7136\u540e\u5728\u63d2\u5165\u5230\u53e6\u4e00\u4e2a\u5730\u65b9\u3002\u9898\u89e3\u4e2d\u8fd8\u6709\u5e73\u8861\u6811\u505a\u7684\uff0c\u5bb9\u6211\u4e00\u62dc\uff0c\u4f46\u662f\u6211\u53ea\u7528`STL vector`\u5c31~~\u51fa\u4e4e\u610f\u6599\u7684~~A\u4e86\u8fd9\u9053\u9898 ~~\u7adf\u7136\u6ca1T\uff0c\u771f\u662f\u5947\u4e86~~\\\n\u9996\u5148\uff0c\u4ecb\u7ecd\u51e0\u4e2a\u4e0e\u672c\u9898\u76f8\u5173\u7684`vector`\u64cd\u4f5c\uff1a(\u5176\u4e2d `v` \u662f\u5df2\u751f\u547d\u7684`vector<int>`\u53d8\u91cf\uff09\n- `v.push_back(i)` \u5c06 i \u52a0\u5165\u5e8f\u5217\u5c3e\u90e8\u3002\n- `vector<int>::const_iterator` \u751f\u6210\u4e00\u4e2a\u5e38\u91cf\u8fed\u4ee3\u5668\u3002\u4f60\u53ef\u4ee5\u8ba4\u4e3a\u5c31\u662f\u5bf9\u4e8e\u5e8f\u5217\u4e2d\u67d0\u4e00\u4e2a\u5143\u7d20\u7684\u6307\u9488\u3002\n- `v.begin(),v.end()` \u5206\u522b\u8fd4\u56de `v` \u6307\u5411\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u8fed\u4ee3\u5668\u548c\u6307\u5411\u6700\u540e\u4e00\u4e2a\u5143\u7d20**\u7684\u540e\u4e00\u4e2a\u5143\u7d20**\u7684\u8fed\u4ee3\u5668\u3002\u6574\u4e2a`v`\u7684\u5143\u7d20\u5b58\u653e\u5728 $[\\ v.begin(),v.end()\\ )$ \u8fd9\u4e2a\u534a\u5f00\u534a\u95ed\u533a\u95f4\u5185\u3002\n\n- `v.erase(vector<int>::const_iterator __first, vector<int>::const_iterator __last)` \u5220\u9664\u6389 `__first` \u548c `__last` \u4e24\u4e2a\u8fed\u4ee3\u5668\u4e2d\u95f4\u7684\u6570\u636e\uff08\u5305\u62ec`__first`\u672c\u8eab\u6307\u5411\u7684\u6570\u636e,\u4e0d\u5305\u62ec`__last`\u6307\u5411\u7684\u6570\u636e\uff09\u3002\n- `v.insert(vector<int>::const_iterator __position, vector<int>::iterator __first, vector<int>::iterator __last)`  \u5c06 `__first` \u548c `__last` \u4e24\u4e2a\u8fed\u4ee3\u5668\u4e2d\u95f4\u7684\u6570\u636e\uff08\u5305\u62ec`__first`\u672c\u8eab\u6307\u5411\u7684\u6570\u636e,\u4e0d\u5305\u62ec`__last`\u6307\u5411\u7684\u6570\u636e\uff09\u63d2\u5165\u5230 `__position` \u4e2d\u3002\n- `vector<int> v(__first,__last)` \u4e24\u4e2a\u8fed\u4ee3\u5668\u4e2d\u95f4\u7684\u6570\u636e\uff08\u5305\u62ec`__first`\u672c\u8eab\u6307\u5411\u7684\u6570\u636e,\u4e0d\u5305\u62ec`__last`\u6307\u5411\u7684\u6570\u636e\uff09\u521b\u5efa\u4e00\u4e2a\u65b0`vector`\u3002\n- \u5728\u8fed\u4ee3\u5668\u4e0a\u53ef\u4ee5\u8fdb\u884c\u52a0\u51cf\u8fd0\u7b97\uff0c\u6bd4\u5982\u8bf4 `v.begin() + a` \u8868\u793a\u7684\u662f\u9996\u8fed\u4ee3\u5668\u5411\u540e\u79fb `a` \u4e2a\u5143\u7d20\u540e\u7684\u8fed\u4ee3\u5668\uff0c\u5373 `v` \u4e2d\u7684\u7b2c `a+1` \u4e2a\u5143\u7d20\u3002 \n\n\u5bf9\u4e8e\u5927\u90e8\u5206\u64cd\u4f5c\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u201c\u524d\u95ed\u540e\u5f00\u201d\u8fd9\u4e2a\u89c4\u5219\u3002\\\n\u77e5\u9053\u4e86\u8fd9\u4e9b\u7528\u6cd5\uff0c\u6839\u636e\u9898\u610f\u6a21\u62df\u5373\u53ef\u3002\u5c0f\u7ec6\u8282\u5728\u4ee3\u7801\u6ce8\u91ca\u91cc\u9762\u3002\n## Code:\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconstexpr int MAXN = 100001;\nint k, n;\nvector<int> v;\nint main()\n{\n    scanf(\"%d%d\", &n, &k);\n    for (int i = 1; i <= n; i++)\n    {\n        v.push_back(i);// \u63d2\u5165\u539f\u6709\u6570\u636e\n    }\n    while (k--)\n    {\n        int a, b, c;\n        scanf(\"%d%d%d\", &a, &b, &c);\n\n        vector<int>::const_iterator first = v.begin() + a - 1;\n        vector<int>::const_iterator last = v.begin() + b;\n        // \u62f7\u8d1d\u7684\u662f [v[a] , v[b+1]) \u4e2d\u7684\u5143\u7d20\n        vector<int> cut(first, last);// \u6ce8\u610f\u8981\u65b0\u5efa\u4e00\u4e2avector<int> \u5b58\u50a8\u4e0a\u9762\u7684\u533a\u95f4\u6570\u636e\n        v.erase(first, last);// \u5220\u9664\u533a\u95f4\u6570\u636e\n        v.insert(v.begin() + c, cut.begin(), cut.end()); // \u5728\u6307\u5b9a\u4f4d\u7f6e\u63d2\u5165\n    }\n    for (int i = 0; i < 10; i++)\n    {\n        printf(\"%d\\n\", v[i]);// \u8f93\u51fa\n    }\n#ifndef ONLINE_JUDGE\n    system(\"pause\");\n#endif\n    return 0;\n}\n```",
        "postTime": 1603586897,
        "uid": 306945,
        "name": "J_Ignite",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "[Youngsc](https://youngscc.github.io/)  \n$ O(n*k) $ \u7684\u7b97\u6cd5\u662f\u8981\u9760RP\u7684\u3002   \n\u6211\u4eec\u8003\u8651\u66f4\u9ad8\u6548\u7684\u7b97\u6cd5\u3002 \n\n** %%%\u697c\u4e0b\u5927\u4f6c\u5199\u975e\u65cbtreap\uff0c\u849f\u84bb\u4e0d\u4f1a\uff0c\u53ea\u597d\u5199\u4e00\u53d1Splay\u4e86 **  \n** \u90fd\u662fSplay\u7684\u57fa\u672c\u64cd\u4f5c\uff0c\u4e0d\u4f1a\u7684\u5b66\u4e00\u5b66\u5c31\u597d\u4e86 **  \n** \u53ea\u9700\u8981\u8bb0\u4e0b\u6bcf\u4e2a\u70b9\u5b50\u6811\u5927\u5c0f\u5c31\u884c\uff0c\u7b2c$x$\u884c\u7684\u8bdd\u5c31\u67e5\u627e\u6392\u540d\u7b2c$x+1$\u7684\u8282\u70b9\uff08\u56e0\u4e3a\u6709\u4e24\u4e2a\u865a\u62df\u8282\u70b9\uff09 **  \n** \u6ce8\u610f\u7684\u5c31\u662f\u90a3\u4e2a\u8f93\u5165\u7684$c$\u662f\u6307\u526a\u5207\u6389$a$\u5230$b$\u4e4b\u540e\u7684\u7b2c$c$\u884c **  \n** \u5e73\u8861\u6811\u4e00\u53d1\u83bd\u8fc7\u53bb,\u6bd4\u8f83\u6c34\uff0c\u590d\u6742\u5ea6$O(k\\ log^n)$,\u4e0d\u7528\u770bRP **\n\n## code with Splay\n\n```cpp\n# include <bits/stdc++.h>\n# define R register\n# define LL long long\n# define N 100010\n# define inf 2000101900\n# define db double\n\nusing namespace std;\n\nint n,ch[N][2],fa[N],rt,k,x,y,z,cnt,t[N];\n\ntemplate <typename T> inline void in(R T& a){\n    R char c=getchar();R T x=0,f=1;\n    while (!isdigit(c)){if (c == '-') f=-1; c=getchar();}\n    while (isdigit(c)) x = (x<<1)+(x<<3)+c-'0', c=getchar();\n    a = x*f;\n}\n\ninline int build(R int l,R int r){\n    R int mid = l+r>>1;\n    t[mid] = r-l+1;\n    if (l < mid) fa[ch[mid][0] = build(l,mid-1)] = mid;\n    if (r > mid) fa[ch[mid][1] = build(mid+1,r)] = mid;\n    return mid;\n}\n\ninline bool get(R int x){return ch[fa[x]][1] == x;}\n\ninline void up(R int x){t[x] = t[ch[x][0]]+t[ch[x][1]]+1;}\n\ninline void rotate(R int x){\n    R int f1 = fa[x],f2 = fa[f1];\n    R bool pd = get(x);\n    if (f2) ch[f2][get(f1)] = x;\n    fa[x] = f2;\n    ch[f1][pd] = ch[x][pd^1], fa[ch[f1][pd]] = f1;\n    ch[x][pd^1] = f1, fa[f1] = x;\n    up(f1),up(x);\n}\n\ninline void splay(R int x,R int k){\n    while (fa[x] != k)\n    {\n        R int f1 = fa[x],f2 = fa[f1];\n        if (f2 != k)\n        {\n            if ((ch[f1][1] == x)^(ch[f2][1] == f1)) rotate(x);\n            else rotate(f1);\n        }\n        rotate(x);\n    }\n    if (!k) rt = x;\n}\n\ninline int ask_before(R int x){\n    splay(x,0);\n    x = ch[x][0];\n    while (ch[x][1]) x = ch[x][1];\n    return x;\n}\n\ninline int ask_after(R int x){\n    splay(x,0);\n    x = ch[x][1];\n    while (ch[x][0]) x = ch[x][0];\n    return x;\n}\n\ninline void print(R int x){\n    if (ch[x][0]) print(ch[x][0]);\n    if (x>1 && x<=n+1) printf(\"%d\\n\",x-1),cnt++;\n    if (cnt == 10) exit(0);\n    if (ch[x][1]) print(ch[x][1]);\n}\n\ninline int find(R int x){\n    R int now = rt;\n    while (x)\n    {\n        if (t[ch[now][0]] >= x) now = ch[now][0];\n        else if (t[ch[now][0]] + 1 == x) return now;\n        else x -= t[ch[now][0]]+1,now = ch[now][1];\n    }\n}\n\nint main(){\n\n    // freopen(\"cqoi15_query.in\",\"r\",stdin);\n    // freopen(\"cqoi15_query.out\",\"w\",stdout);\n\n    in(n),in(k);\n    rt = build(1,n+2);\n    for (R int i=1; i<=k; ++i)\n    {\n        in(x),in(y),in(z);\n        x++,y++,z++; //\u865a\u62df\u8282\u70b9\n        x = find(x),y = find(y);\n        R int a = ask_before(x),b = ask_after(y);\n        splay(a,0),splay(b,a);\n        R int now = ch[b][0];\n        fa[now] = ch[b][0] = 0; up(b),up(rt);\n        z = find(z);\n        a = ask_after(z);\n        splay(z,0); splay(a,z);\n        fa[now] = a; ch[a][0] = now; up(a),up(rt);\n    }\n    print(rt);\n    return 0;\n}\n\n```\n",
        "postTime": 1520343654,
        "uid": 36282,
        "name": "Youngsc",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "\u8fd9\u662f\u672c\u849f\u84bb\u7684\u7b2c $5$ \u7bc7\u9898\u89e3\u3002\n### \u601d\u8def\uff1a\n$\\texttt{STL}$ \u5927\u6cd5\u597d\uff01\n\n\u770b\u5230\u9898\u76ee\u4e2d\u7684\u201c\u526a\u5207\u201d\uff0c\u201c\u7c98\u8d34\u201d\u7b49\u8bcd\u8bed\uff0c\u6211\u7acb\u5373\u60f3\u5230\u4e86 `vector`\u3002\n\n\u5728\u4e4b\u524d\u7684\u9898\u89e3\u4e2d\u6211\u5df2\u7b80\u5355\u4ecb\u7ecd\u4e86 `vector` \u7684\u64cd\u4f5c\uff1a\u6233[\u8fd9\u91cc](https://www.luogu.com.cn/problem/solution/CF990B)\u3002\n\n\u8fd9\u7bc7\u9898\u89e3\u4f1a\u8865\u5145\u4e00\u4e0b\u672c\u9898\u4f1a\u7528\u5230\u7684\u64cd\u4f5c\uff1a\n\n`assign(const_iterator first,const_iterator last)` \uff1a \u5c06\u64cd\u4f5c\u5411\u91cf\u4e2d\u7684 `[first,last)` \u4e0b\u6807\u5143\u7d20\u8bbe\u7f6e\u6210\u5f53\u524d\u5411\u91cf\u5143\u7d20\u3002\n\n`erase(iterator first,iterator last)` \uff1a \u5220\u9664\u5411\u91cf\u4e2d\u4e0b\u6807\u4e3a `[first,last)` \u7684\u5143\u7d20\u3002\n\n`insert(iterator it,const_iterator first,const_iterator last)` \uff1a \u5411\u91cf\u4e2d\u8fed\u4ee3\u5668\u6307\u5411\u5143\u7d20\u524d\u63d2\u5165\u53e6\u4e00\u4e2a\u76f8\u540c\u7c7b\u578b\u5411\u91cf\u7684 `[first,last)` \u95f4\u7684\u6570\u636e\u3002\n\n`clear()` \uff1a \u6e05\u7a7a\u5411\u91cf\u3002\n\n\u4e86\u89e3\u4e86\u8fd9\u4e9b\uff0c\u4f60\u79bb $\\texttt{AC}$ \u4ec5\u6709\u4e00\u6b65\u4e4b\u9065\u5566\uff01\n### \u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<vector>\nusing namespace std;\nvector <int> txt, ctrlv; //\u76ae\u4e00\u4e0b\uff1actrl+v \u662f\u7c98\u8d34\u6307\u4ee4\uff0c\u6240\u4ee5\u6211\u628a\u526a\u5207\u5185\u5bb9\u5b58\u5728 ctrlv \u91cc\nint n, k, a, b, c;\nint main()\n{\n    cin >> n >> k;\n    for(int i = 1; i <= n; i++)\n        txt.push_back(i); //\u628a1\u5230n\u90fd\u63d2\u5165\u5411\u91cf\uff08\u6587\u672c\u521d\u59cb\u5316\uff09\n    for(int i = 1; i <= k; i++)\n    {\n        cin >> a >> b >> c;\n        ctrlv.assign(txt.begin() + a - 1, txt.begin() + b);\n        txt.erase(txt.begin() + a - 1, txt.begin() + b);\n        txt.insert(txt.begin() + c, ctrlv.begin(), ctrlv.end());\n        ctrlv.clear(); //\u5e05\u6c14\u7684 vector \u64cd\u4f5c\n    }\n    for(int i = 0; i <= 9; i++)\n        cout << txt[i] << endl; //\u8f93\u51fa\uff0c\u6ce8\u610f\u4e0b\u6807\u4e3a0\u81f39\n    \n    return 0;\n}\n```\n\u5b8c\u7ed3\u6492\u82b1\uff0c[AC](https://www.luogu.com.cn/record/49895786)\uff01\n\n\u795d\u5927\u5bb6\u671f\u4e2d\u8003\u8bd5 $\\texttt{RP++}$\uff01",
        "postTime": 1619239443,
        "uid": 476150,
        "name": "Mysterious_Mini",
        "ccfLevel": 0,
        "title": "P1188\u3010PASTE\u3011\u9898\u89e3"
    },
    {
        "content": "```cpp\n//O(nk)\u7684\u7b97\u6cd5\u662f\u8981\u9760RP\u7684\n//\u6211\u4eec\u8003\u8651\u66f4\u9ad8\u6548\u7684\u7b97\u6cd5\n//\u56e0\u4e3a\u53ea\u8f93\u51fa\u524d\u5341\u4e2a\u6570,\u6211\u4eec\u8003\u8651\u80fd\u4e0d\u80fd\u628a\u524d\u5341\u4e2a\u6570\u5012\u7740\u64cd\u4f5c,\n//\u627e\u5230\u5176\u5728\u521d\u59cb\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#define in(x) read(x)\n#define LL long long\nconst int maxn=1010;\nconst LL INF=(LL)1<<60;\nLL Min(LL a,LL b){ return a<b ? a : b ;}\nusing namespace std;\nLL n,k,A[maxn],B[maxn],C[maxn],L,R,now,dis;\nvoid read(LL &x)\n{\n    LL _re=0,_ch=1; char _c=getchar();\n    while (_c<'0'|| _c>'9') { if(_c=='-')_ch=-1; _c=getchar();}\n    while ( _c>='0'&&_c<='9') _re=_re*10+_c-'0', _c=getchar();\n    x=_re*_ch;\n}\nvoid put(LL x)\n{\n    if(x<0) putchar('-') ,x=-x;\n    if(x>9)put(x/10);\n    putchar(x%10+48);\n}\nint main()\n{\n    freopen(\"in.txt\",\"r\",stdin);\n//    freopen(\"out.txt\",\"w\",stdout);\n    in(n); in(k);\n    for(int i=1;i<=k;i++) in(A[i]),in(B[i]),in(C[i]);\n    for(int i=1;i<=10;i++)\n    {\n        now=i; //now\u4ee3\u8868\u6570\u5728\u76ee\u524d\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\n        for(int j=k;j>=1;j--)\n        {\n            L=min(A[j],B[j]);\n            R=max(A[j],B[j]);//\u53d6\u51fa\u533a\u95f4\u5de6\u53f3\u7aef\u70b9\n            dis=L-(C[j]+1);//\u7b97\u51fa\u504f\u79fb\u91cf\n            if(n-(R-L+1)<C[j])continue;\n            L-=dis; R-=dis;//\u7b97\u51fa\u8981\u79fb\u52a8\u7684\u5e8f\u5217\u5728\u73b0\u5728\u6570\u5217\u4e2d\u7684\u4f4d\u7f6e\n            if(now>=L&&now<=R)now+=dis;\n                        //\u6570\u7684\u4f4d\u7f6e\u5728\u8981\u79fb\u52a8\u7684\u533a\u95f4\u91cc,\u5c31\u8ddf\u7740\u4e00\u8d77\u79fb\u52a8\n            else if(now<L)\n            {\n                //\u5982\u679c\u6570\u7684\u4f4d\u7f6e\u5728\u79fb\u52a8\u5e8f\u5217\u7684\u5de6\u8fb9\n                               //\u53d6\u51fa\u5e8f\u5217\u540e\u6570\u7684\u4f4d\u7f6e\u662f\u4e0d\u79fb\u52a8\u7684\n                                  if(Min(A[j],B[j])-1<now)now+=(R-L+1);\n                                //\u5e8f\u5217\u63d2\u5165\u7684\u4f4d\u7f6e\u5728\u6570\u7684\u5de6\u8fb9,\u90a3\u4e48\u6570\u7684\u4f4d\u7f6e\u8981\u53f3\u79fb\u533a\u95f4\u957f\u5ea6\u4e2a\u5355\u4f4d\n            }\n            else if(now>R)\n            {\n                //\u5982\u679c\u6570\u7684\u4f4d\u7f6e\u5728\u79fb\u52a8\u5e8f\u5217\u7684\u53f3\u8fb9\n                                 //\u53d6\u51fa\u5e8f\u5217\u540e\u6570\u5c06\u4f1a\u5de6\u79fb\u533a\u95f4\u957f\u5ea6\u4e2a\u5355\u4f4d\n                                 if(Min(A[j],B[j])-1>=now-(R-L+1))now-=(R-L+1);\n                                 //\u5982\u679c\u5e8f\u5217\u53c8\u63d2\u5165\u5230\u6570\u79fb\u52a8\u540e\u7684\u4f4d\u7f6e\u7684\u5de6\u8fb9,\u90a3\u4e48\u6570\u53c8\u79fb\u52a8\u56de\u53bb\n                                 //\u53ea\u6709\u5e8f\u5217\u63d2\u5165\u5230\u53f3\u8fb9,\u6570\u7684\u79fb\u52a8\u624d\u6210\u7acb\n            }\n        }\n                //\u7b97\u51fa\u6570\u5012\u5e8f\u79fb\u52a8k\u6b21\u540e\u5728\u539f\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e,\u5c31\u662f\u539f\u6570\n        put(now),putchar(10);\n    }\n    fclose(stdin);fclose(stdout);\n    return 0;\n}\n\n```",
        "postTime": 1507883798,
        "uid": 18386,
        "name": "zpf_13516358919",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "\u770b\u5230\u8fd9\u9898\u5927\u5bb6\u57fa\u672c\u7528\u7684\u90fd\u662f C++,\u6765\u7528 C \u5199\u4e00\u53d1\n\n\u8fd9\u9898\u5176\u5b9e\u6570\u636e\u8fc7\u6c34,\u6709\u4e9b\u4eba(\u50cf\u6211)\u6253\u7684\u5927\u6a21\u62df\u90fd\u80fd\u5728 $300ms$ \u5185\u8dd1\u5b8c,\u6ca1\u52a0\u5feb\u8bfb\u4e5f\u6839\u672c\u6ca1\u88ab\u5361\u3002\n\n\u5047\u5982\u7528 C \u8bed\u8a00\u5199\u7684\u8bdd\uff0c\u6ca1\u6709 `vector` \u5751\u5c31\u4f1a\u591a\u5f88\u591a\uff0c\n\n\u6bd4\u5982\u5728\u5220\u9664\u7c98\u8d34\u5185\u5bb9\u3001\u7ed9\u7c98\u8d34\u5185\u5bb9\u7559\u7a7a\u95f4\u65f6\u524d\u79fb/\u540e\u79fb\u5e8f\u5217\u65f6\uff0c\u8981\u6ce8\u610f\u524d\u79fb\u662f\u6b63\u7740\u679a\u4e3e\uff0c\u540e\u79fb\u662f\u53cd\u7740\u679a\u4e3e\u3002~~\u5728\u8fd9\u4e2a\u5751\u4e0a\u6211\u8df3\u4e86 $4$ \u904d,\u6bcf\u6b21\u90fd\u6ca1\u627e\u5230 bug\u3002~~\n\n\u63a5\u4e0b\u6765\u662f\u6211\u7684~~\u5927\u6a21\u62df~~\u4ee3\u7801\u73af\u8282!\n\n```cpp\n#include<stdio.h>\nint arr[100001];\nint paste[100001];\nint N,K;\nint main(){\n\tscanf(\"%d%d\",&N,&K);\n\tfor(int i=1;i<=N;++i){\n\t\tarr[i]=i;\n\t\t//\u521d\u59cb\u5316\u4e0d\u80fd\u6f0f,\u4e0d\u7136\u8f93\u51fa\u4f1a\u5168\u662f0 \n\t}\n\tint A,B,C;//\u64cd\u4f5c\u53c2\u6570 \n\tint len;//\u526a\u8d34\u957f\u5ea6 \n\tfor(int i=1;i<=K;++i){\n\t\tscanf(\"%d%d%d\",&A,&B,&C);\n\t\tlen=B-A+1;\n\t\tfor(int i=A,j=1;i<=B;++i,++j){//j\u8868\u793a\u5728\u526a\u8d34\u677f\u4e0a\u54ea\u4e2a\u4f4d\u7f6e\n\t\t\tpaste[j]=arr[i];\n\t\t\t//\u590d\u5236\u6570\u7ec4 \n\t\t}\n\t\tfor(int i=A;i+len<=N;++i)\n\t\t\tarr[i]=arr[i+len];//\u522b\u5fd8\u4e86\u524d\u79fb\n\t\tfor(int i=N;i>=C+len+1;--i)//\u6ce8\u610f\u5f97\u5012\u7740\u679a\u4e3e \n\t\t\tarr[i]=arr[i-len];//\u518d\u7ed9\u526a\u8d34\u677f\u817e\u7a7a\u95f4\n\t\tfor(int i=C+1,j=1;j<=len;++i,++j)\n\t\t\tarr[i]=paste[j];//\u7c98\u8d34\u4e0a\u53bb\n\t} \n\tfor(int i=1;i<=10;++i)\n\t\tprintf(\"%d\\n\",arr[i]); \n}\n```",
        "postTime": 1620806010,
        "uid": 228486,
        "name": "SunsetSamsara",
        "ccfLevel": 7,
        "title": "P1188 PASTE \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u601d\u8def 1\uff1a\n\u4f7f\u7528 vector \u66b4\u529b $O(n \\times k)$\uff0c\u8fd9\u91cc\u653e\u4e00\u4e0b\u57fa\u672c\u64cd\u4f5c\u548c\u4ee3\u7801\u3002\n\n```cpp\nvector<int> v //int\u53ef\u4ee5\u6539\u6210\u5176\u4ed6\uff0cv\u662f\u53d8\u91cf\u540d\nv.begin() //\u8fd4\u56de\u9996\u5730\u5740\nv.end() //\u8fd4\u56de\u5c3e\u5730\u5740\nv.push_back(int x) //\u5728\u5c3e\u90e8\u52a0\u5165\u5143\u7d20x\nv.insert(interator c, const int &x) //\u5728\u8fed\u4ee3\u5668\u6307\u5411\u5143\u7d20c\u524d\u63d2\u5165x\nv.insert(interator c, const_iterator first, const_iterator last) //\u5728\u8fed\u4ee3\u5668\u6307\u5411\u5143\u7d20c\u524d\u63d2\u5165\u53e6\u4e00\u4e2a\u76f8\u540c\u7c7b\u578b\u5411\u91cf\u7684[first,last)\u95f4\u7684\u6570\u636e\nv.erase(iterator c) //\u5220\u9664\u5411\u91cf\u4e2d\u8fed\u4ee3\u5668\u6307\u5411\u5143\u7d20c\nv.erase(iterator first,iterator last) //\u5220\u9664\u5411\u91cf\u4e2d[first,last)\u4e2d\u5143\u7d20\n```\n\n```cpp\nscanf(\"%d %d %d\", &a, &b, &c);\nvector<int> tmp;\ntmp.assign(tex.begin() + a - 1, tex.begin() + b);\ntex.erase(tex.begin() + a - 1, tex.begin() + b);\ntex.insert(tex.begin() + c, tmp.begin(), tmp.end());\n```\n\n### \u9898\u76ee\u601d\u8def 2\uff1a\n\u7b54\u6848\u53ea\u5173\u5fc3\u524d$10$\u4e2a\u6570\u5b57\uff0c\u6240\u4ee5\u53cd\u5411\u9006\u63a8\u3002\n\n\u5bf9\u4e8e\u6bcf\u6b21\u64cd\u4f5c\uff0c\u53d6\u51fa$[A_i,B_i]$\u79fb\u52a8\u81f3$[C_i,C_i+B_i-A_i]$\uff0c\u5176\u9006\u64cd\u4f5c\u4e3a\uff0c\u53d6\u51fa$[C_i+1,C_i+B_i-A_i+1]$\u79fb\u52a8\u81f3$[A_i,B_i]$\u3002\n\n\u5bf9\u4e8e\u6570$i$\u7684\u4f4d\u7f6e$t$\uff0c\u6bcf\u6b21\u9006\u64cd\u4f5c\u5f71\u54cd\u4e3a\n$\\begin{cases} {t \\leftarrow t-C_i+A_i-1, C_i<t<C_i+B_i-A_i+2} \\\\ {t \\leftarrow t-B_i+A_i-1,C_i+1<t<B_i+1} \\\\ {t \\leftarrow t+B_i-A_i+1,A_i \\le t \\le C_i} \\end{cases}$\n\n\u6700\u540e\u8f93\u51fa$t$\u5373\u53ef\n",
        "postTime": 1619231274,
        "uid": 384035,
        "name": "Mysterious_Cat",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1188\u3010PASTE\u3011"
    },
    {
        "content": "## \u8fd9\u9053\u9898\u53ef\u4ee5\u76f4\u63a5\u7528\u94fe\u8868\u6765\u505a\n\u6ce8\uff1a\u8fd9\u7bc7\u9898\u89e3\u4e2d\u7684\u94fe\u8868\u662f\u7528**\u6307\u9488**\u5b9e\u73b0\u7684\uff0c\u7406\u89e3\u8d77\u6765\u53ef\u80fd\u6bd4\u8f83\u6709\u96be\u5ea6\u3002\n### \u9898\u610f\u7b80\u8ff0\n\u8fd9\u9053\u9898\u4f1a\u7ed9\u51fa$K$\u6b21\u64cd\u4f5c\uff0c\u6bcf\u6b21\u7ed9\u51fa\u4e00\u4e2a\u526a\u8d34\u5f00\u5934\u548c\u7ed3\u5c3e\uff0c\u518d\u7ed9\u51fa\u4e00\u4e2a\u63d2\u5165\u7684\u4f4d\u7f6e\u3002  \n\u9898\u9762\u4e0d\u96be\u7406\u89e3\uff0c\u53ea\u9700\u8981\u6ce8\u610f\u63d2\u5165\u7684\u4f4d\u7f6e\u662f\u5728**\u53d6\u51fa\u8981\u526a\u5207\u7684\u7684\u90a3\u4e00\u6bb5\u4e4b\u540e\u7684\u4f4d\u7f6e**\u3002\n### \u9898\u76ee\u5206\u6790\n\u94fe\u8868\u63d2\u5165\u548c\u5220\u9664\u90fd\u975e\u5e38\u5feb\uff0c\u67e5\u8be2\u94fe\u8868\u4e2d\u67d0\u4e00\u5143\u7d20\u4f4d\u7f6e\u7684\u5e73\u5747\u590d\u6742\u5ea6\u4e3a$O(N)$\uff0c\u800c\u77e5\u9053\u4f4d\u7f6e\u540e\uff0c\u63d2\u5165\u548c\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u4e3a$O(1)$\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u7528\u94fe\u8868\u6765\u5b9e\u73b0\u3002\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(N*K)$\u3002\u5728\u8fd9\u9053\u9898\u7684\u6570\u636e\u89c4\u6a21\u4e0a**\u5b8c\u5168\u6ca1\u95ee\u9898**\u3002\n  \n\u6211\u4eec\u9996\u5148\u627e\u5230\u7b2c$A$\u884c\u548c\u7b2c$B$\u884c\u7684\u6307\u9488\uff0c\u5c06\u7b2c$A$\u884c\u5230\u7b2c$B$\u884c\u8fd9\u4e00\u6bb5\u4ece\u94fe\u8868\u4e2d\u201c\u6458\u51fa\u6765\u201d\uff0c\u4e4b\u540e\u518d\u627e\u5230\u7b2c$C$\u884c\u7684\u6307\u9488\uff0c\u5728\u7b2c$C$\u884c\u4e4b\u540e\u63d2\u5165\u5373\u53ef\u3002  \n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u5b58\u5728\u63d2\u5165\u5230\u7b2c$0$\u884c\u7684\u53ef\u80fd\u6027\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u6392\u5728\u94fe\u8868\u5934\u7684\"head\"\u5143\u7d20\uff0c\u67e5\u8be2\u7b2c$0$\u4e2a\u5143\u7d20\u65f6\u5c31\u8fd4\u56de\u5b83\u7684\u6307\u9488\u3002\n  \n\u5b9a\u4e49\u4e00\u4e2a\u5143\u7d20\u7ed3\u6784\u4f53\uff0c\u6784\u9020\u51fd\u6570\u7b49\u5df2\u7565\u53bb\u3002\n```cpp\ntemplate <typename T>\nstruct element{\n\tT object;\n\telement<T> *prev;\n\telement<T> *next;\n};\n```\n\u4e4b\u540e\u6211\u4eec\u9700\u8981\u7ed9\u51fa\u53cc\u5411\u94fe\u8868\u7684\u5b9e\u73b0\uff0c\u5177\u4f53\u4ee3\u7801\u8bf7\u770b\u5b8c\u6574\u4ee3\u7801\u90e8\u5206\uff0c\u8fd9\u91cc\u7ed9\u51fa\u6700\u6838\u5fc3\u7684\u526a\u8d34\u4ee3\u7801\u3002\u5176\u4e2d``ch``\u4e3a\u6211\u4eec\u5b9a\u4e49\u7684\u94fe\u8868\u7c7b\u578b\u7684\u53d8\u91cf\uff0c``getPointer()``\u4e3a\u83b7\u53d6\u67d0\u4e00\u4e2a\u5143\u7d20\u7684\u6307\u9488\u7684\u51fd\u6570\u3002\n```cpp\nfor(int i = 1; i <= m; i++) {\n   int l, r, p; // \u5206\u522b\u4ee3\u8868\u8f93\u5165\u7684A B C\n   scanf(\"%d%d%d\", &l, &r, &p);\n   element<int> *pl, *pr, *pp;\n   pl = ch.getPointer(l);\n   pr = ch.getPointer(r);\n   // \u83b7\u53d6\u8981\u526a\u5207\u7684\u4e24\u7aef\u7684\u6307\u9488\n   pl->prev->next = pr->next;\n   pr->next->prev = pl->prev;\n   // \u4ece\u94fe\u8868\u4e2d\u5220\u9664\n   pp = ch.getPointer(p);\n   pl->prev = pp;\n   pr->next = pp->next;\n   pp->next->prev = pr;\n   pp->next = pl;\n   // \u5c06\u526a\u5207\u51fa\u6765\u7684\u90a3\u4e00\u6bb5\u63d2\u5165\u5230c\u884c\u540e\u9762\n}\n```\n### \u5b8c\u6574\u4ee3\u7801\n```cpp\n/* Headers */\n#include <cstdio>\n#include <iostream>\nusing namespace std;\n/* Type and variables */\nint n, m;\n\ntemplate <typename T>\nstruct element{\n    T object;\n    element<T> *prev;\n    element<T> *next;\n    element() {f\n        object = 0;        \n    }\n    element(T value) {\n        object = value;        \n    }\n    element(T value, element<T>* prev, element<T>* next) {\n        object = value;\n        this->prev = prev;\n        this->next = next;    \n    }\n};\ntemplate <typename T> // \u6a21\u677f\u7c7b\nclass chain{\n    int eleCount; // \u5df2\u6709\u5143\u7d20\u6570\u91cf\n    element<T> *head;\n    element<T> *tail;\npublic:\n    chain(){ // \u94fe\u8868\u7684\u6784\u9020\u51fd\u6570\uff0c\u9996\u5148\u6784\u9020\u4e00\u4e2a\u5934\u90e8\u5143\u7d20\n        eleCount = 0;\n        head = new element<T>(0);\n        tail = head;\n        head->prev = head;\n        head->next = head;\n    }\n    element<T>* getPointer(int pos) { // \u83b7\u53d6\u6392\u5217\u5728\u7b2cpos\u4f4d\u7684\u5143\u7d20\u7684\u6307\u9488\n        element<T> *p = head;\n        for(int i = 1; i <= pos; i++) {\n            p = p->next;\n        }\n        return p;\n    }\n    void addElement(T value) { // \u5728\u5c3e\u90e8\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\n        eleCount++;\n        element<T> *p = new element<T>(value, tail, tail->next);\n        p->prev->next = p;\n        p->next->prev = p;\n        tail = p;\n    }\n    void print(int c) { // \u8f93\u51fa\u94fe\u8868\u4e2d\u9664\u5934\u90e8\u5143\u7d20\u5916\u7684\u524dc\u4e2a\u5143\u7d20\n        element<T> *p = head;\n        for(int i = 1; i <= c; i++) {\n            p = p->next;\n            cout << p->object;\n            putchar('\\n');\n        }\n    }\n};\nchain<int> ch = chain<int>();\n/* Functions */\n/* Main */\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for(int i = 1; i <= n; i++)\n        ch.addElement(i);\n    for(int i = 1; i <= m; i++) {\n        int l, r, p;\n        scanf(\"%d%d%d\", &l, &r, &p);\n        element<int> *pl, *pr, *pp;\n        pl = ch.getPointer(l);\n        pr = ch.getPointer(r);\n        // \u83b7\u53d6\u8fd9\u4e00\u6bb5\u4e24\u8fb9\u7684\u6307\u9488\n        pl->prev->next = pr->next;\n        pr->next->prev = pl->prev;\n        // \u5c06\u8fd9\u4e00\u6bb5\u4ece\u94fe\u8868\u4e2d\u79fb\u9664\n        pp = ch.getPointer(p);\n        // \u83b7\u53d6\u79fb\u9664\u540e\u8981\u7c98\u8d34\u7684\u4f4d\u7f6e\u7684\u6307\u9488\n        pl->prev = pp;\n        pr->next = pp->next;\n        pp->next->prev = pr;\n        pp->next = pl;\n        // \u518d\u628a\u8fd9\u4e00\u6bb5\u63d2\u5165\u5230\u8981\u7c98\u8d34\u7684\u4f4d\u7f6e\u540e\u9762\n    }\n    ch.print(10); // \u6700\u540e\u8f93\u51fa\u5373\u53ef >w<\n    return 0;\n}\n```\n227ms",
        "postTime": 1603527117,
        "uid": 227947,
        "name": "\u4e03\u78b3\u70f7\u70c3",
        "ccfLevel": 4,
        "title": "P1188 PASTE"
    },
    {
        "content": "### ~~\u8fd9\u9898\u662f\u84dd\u9898\uff1f~~ \u8fd9\u4f5c\u4e3a\u84dd\u9898~~\u6570\u636e\u4e5f\u592a\u6c34\u4e86~~\n\n\u770b\u67d0\u4e9b\u5927\u4f6c\u7528\u94fe\u8868\u548cRP\u505a\uff0c~~\u611f\u89c9\u592a\u9ebb\u70e6\u4e86~~\n\n\u6211\u7528vector~~\u7adf\u7136\u83ab\u540d\u5176\u5999\u7684A\u4e86~~\n\n\u5176\u5b9e\u8fd9\u9053\u9898\u7528\u4e00\u4e9b~~\u7b80\u5355\u7684~~vector\u51fd\u6570\u505a\u5c31\u884c\u4e86\n\n\u9996\u5148\u5f00\u4e24\u4e2a```vector```\uff0c\u4e00\u4e2a\u5b58\u6587\u672c\uff0c\u4e00\u4e2a\u5b58\u7c98\u8d34\u677f\n\n\u63a5\u4e0b\u6765\u5206\u522b\u7528```assign()```\uff0c```erase()```\uff0c```insert()```\n\u4e09\u4e2avector\u51fd\u6570\u64cd\u4f5c\u5c31~~\u5b8c\u7f8e\u7684~~\u5b8c\u6210\u4e86\u8fd9\u9053\u9898\n\n## \u4e0b\u9762\u662f\u4e00\u4e2a\u849f\u84bb\u768418\u884cvector\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,k,A,B,C;\nvector <int> text;\nvector <int> paster;\nint main(){\n\tcin>>n>>k;\n\tfor(int i=1;i<=n;i++)text.push_back(i);\n\tfor(int i=1;i<=k;i++){\n\t\tcin>>A>>B>>C;\n\t\tpaster.assign(text.begin()+A-1,text.begin()+B);//\u628aA\u5230B\u8fd9\u4e00\u6bb5\u590d\u5236\u5230\u7c98\u8d34\u677f \n\t\ttext.erase(text.begin()+A-1,text.begin()+B);//\u5220\u6389A\u5230B\u8fd9\u4e00\u6bb5 \n\t\ttext.insert(text.begin()+C,paster.begin(),paster.end());//\u628a\u7c98\u8d34\u677f\u91cc\u7684\u5185\u5bb9\u7c98\u8d34\u5230C\u7684\u4f4d\u7f6e \n\t\tpaster.clear();\n\t}\n\tfor(int i=0;i<10;i++)cout<<text[i]<<endl;//\u8f93\u51fa\u524d10\u884c \n\treturn 0;\n} \n```\n",
        "postTime": 1607693346,
        "uid": 275494,
        "name": "\u9648\u5929\u60a6",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "\u770b\u5230\u597d\u50cf\u6ca1\u6709\u7528\u6808\u5199\u8fd9\u9053\u9898\u7684\uff1f\u542c\u8bf4$O\uff08n*k\uff09$\u8fc7\u4e0d\u4e86\uff1f\u6211\u8fd8\u771f\u4e0d\u4fe1\u8fd9\u4e2a\u90aa\uff01\u4e8e\u662f\u5386\u65f6\u8fdb1h\uff0c\u6211\u7ec8\u4e8e\u7528\u6808+\u6a21\u62df\u7684\u65b9\u6cd5A\u4e86\u8fd9\u9053\u9898\u3002\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u5f00\u4e00\u4e2a\u6570\u7ec4a[]\u6765\u50a8\u5b58\u8be5\u6587\u672c\uff0c\u6ce8\u610f\uff0c\u7531\u4e8e\u6211\u4eec\u9700\u8981\u989d\u5916$B\u2212A+1$\u7684\u7a7a\u95f4\u6765\u4f5c\u4e3a\u201c\u526a\u5207\u677f\u201d\u6682\u5b58\u526a\u4e0b\u6765\u7684\u5185\u5bb9\uff0c\u8fd9\u91cc\u9700\u8981\u5f002\u500d\u6570\u7ec4\u5927\u5c0f\uff0c\u4e0d\u7136\u4f1aRE\u3002\n```cpp\nfor(fint i=1;i<=2*n;i++)\n\ta[i]=i;//\u521d\u59cb\u5316\u6587\u672c\n```\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u6808q\u6765\u5b58\u50a8\u526a\u4e0b\u6765\u7684\u90e8\u5206\uff0c\u5176\u5927\u5c0f\u5373\u4e3a$B\u2212A+1$\u3002\u5e76\u5206\u5411\u524d\u548c\u5411\u540e\u4e24\u7c7b\u8fdb\u884c\u8ba8\u8bba\uff0c\u5c06\u539f\u4f4d\u7684\u5143\u7d20\u524d\u79fb/\u540e\u79fb\n\n\u6700\u540e\u5c06\u6808q\u4e2d\u7684\u5143\u7d20\u4f9d\u6b21\u5f39\u51fa\u8865\u4e0a\u4e0a\u4e00\u6b65\u817e\u51fa\u6765\u7684\u7a7a\u4f4d\n\n\u8fd9\u4e00\u90e8\u5206\u7684\u5177\u4f53\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\uff1a\n```cpp\nfor(fint i=1;i<=k;i++)\n{\n\tx=read(),y=read(),z=read();\n\tint turn=y-x+1,start=z+1,to_end=y+1,end=z+turn,to_start=x-1;  \n   //\u8bbe\u7f6e\u524d\u79fb\u540e\u79fb\u7684\u4f4d\u7f6e\t\n   for(fint j=x;j<=y;j++)\n\tq.push(a[j]);//\u526a\u5207\n\tif(z>=x)\n\tfor(fint j=to_end;j<=end;j++)\n\ta[j-turn]=a[j];\n\tfor(fint j=to_start;j>=start;j--)\n\ta[j+turn]=a[j];//\u79fb\u52a8\u4f4d\u7f6e\n\tfor(fint j=end;j>=start;j--) \n\ta[j]=q.top(),q.pop();//\u5f39\u51fa\u5b8c\u6210\u7c98\u8d34\u8865\u4f4d\n\twhile(!q.empty())\n\tq.pop();//\u7528\u5b8c\u6e05\u7a7a\u597d\u4e60\u60ef\uff08\u5176\u5b9e\u8fd9\u91cc\u4e0d\u6e05\u7a7a\u4e5f\u884c\uff09\n}\n```\n\u6700\u540e\u4e0a\u5b8c\u6574\u4ee3\u7801[\u70b9\u6211\u83b7\u53d6](https://www.luogu.com.cn/paste/96i2mo00)\n\n\u6392\u7248\u5df2\u4f7f\u7528LaTeX\u5b8c\u5584\uff0c\u6c42\u7ba1\u7406\u5927\u5927\u7ed9\u8fc7\u3002\u795d\u5927\u5bb6AC\u6109\u5feb\u3002",
        "postTime": 1582298155,
        "uid": 244059,
        "name": "king_xbz",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    },
    {
        "content": "$O(n*k)$\u7684\u7b97\u6cd5\u662f\u8981\u9760RP\u7684\u3002\n\n\u6211\u4eec\u8003\u8651\u66f4\u9ad8\u6548\u7684\u7b97\u6cd5\u3002\n\n\u56e0\u4e3a\u53ea\u8f93\u51fa\u524d\u5341\u4e2a\u6570,\u6211\u4eec\u8003\u8651\u80fd\u4e0d\u80fd\u628a\u524d\u5341\u4e2a\u6570\u5012\u7740\u64cd\u4f5c,\u627e\u5230\u5176\u5728\u521d\u59cb\u5e8f\u5217\u4e2d\u7684\u4f4d\u7f6e\u3002\n\n\u4f46\u662f\u6211\u592a\u61d2\u4e86\uff0c\u61d2\u5f97\u52a8\u8fd9\u4e2a\u8111\u5b50\u3002\n\n\u672c\u8d28\u4e0a\u662f\u4e00\u6bb5\u533a\u95f4\u7684\u79fb\u52a8\uff0c\u5e73\u8861\u6811\u83bd\u8fc7\u53bb\u5c31\u884c\u4e86\uff0c$O(nlog_n)$\uff0c\u4e0d\u7528\u770bRP\u3002\n\n\u4ee3\u7801\uff08\u975e\u65cbTreap\uff09\n```cpp\n#include<bits/stdc++.h>\n#define N 100005\nusing namespace std;\nstruct node\n{\n\tint key,fhq;\n\tint l,r,siz;\n\tvoid anode(int it)\n\t{\n\t\tkey=it;fhq=rand();\n\t\tl=r=0;siz=1;\n\t}\n}tre[N];\nvoid update(int now)\n{\n\ttre[now].siz=tre[tre[now].l].siz+tre[tre[now].r].siz+1;\n}\nvoid split(int now,int k,int &x,int &y)\n{\n\tif(!now)\n\t{\n\t\tx=y=0;return;\n\t}\n\tif(tre[tre[now].l].siz>=k)\n\t\ty=now,split(tre[now].l,k,x,tre[now].l);\n\telse x=now,split(tre[now].r,k-tre[tre[now].l].siz-1,tre[now].r,y);\n\tupdate(now);\n}\n\nint merage(int x,int y)\n{\n\tif(x*y==0) return x+y;\n\tif(tre[x].fhq<tre[y].fhq)\n\t{\n\t\ttre[x].r=merage(tre[x].r,y);\n\t\tupdate(x);return x;\n\t}\n\telse\n\t{\n\t\ttre[y].l=merage(x,tre[y].l);\n\t\tupdate(y);return y;\n\t}\n}\nint n,m,rot;\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i) tre[i].anode(i),rot=merage(rot,i);\n\t\n\twhile(m--)\n\t{\n\t\tint a,b,c;scanf(\"%d%d%d\",&a,&b,&c);\n\t\tint x=0,y=0,z=0;\n\t\tsplit(rot,b,x,z);\n\t\tsplit(x,a-1,x,y);\n\t\tx=merage(x,z);\n\t\tsplit(x,c,x,z);\n\t\trot=merage(x,merage(y,z));\n\t}\n\tint x=0,y=0,T=10;\n\tsplit(rot,T,x,y);\n\twhile(T--)\n\t{\n\t\tsplit(x,1,y,x);\n\t\tprintf(\"%d\\n\",tre[y].key);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1519961737,
        "uid": 35718,
        "name": "MloVtry",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1188 \u3010PASTE\u3011"
    }
]
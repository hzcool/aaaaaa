[
    {
        "content": "# \u300cICPC2017 WF\u300dMoney for Nothing\n\n\u6211\u4eec\u53ef\u5c06\u751f\u4ea7\u5546\u548c\u6d88\u8d39\u5546\u90fd\u770b\u6210\u4e8c\u7ef4\u5e73\u9762\u4e0a\u7684\u70b9\uff0c\u5176\u5750\u6807\u5206\u522b\u4e3a $(d_i,p_i)$\uff0c$(e_i,q_i)$\u3002\n\n\u90a3\u4e48\u95ee\u9898\u8f6c\u53d8\u4e3a\uff1a\n\n\u7ed9\u5b9a\u5e73\u9762\u4e0a\u7684 $m$ \u4e2a $A$ \u7c7b\u70b9 $(d_i,p_i)$\uff0c\u4ee5\u53ca $n$ \u4e2a $B$ \u7c7b\u70b9 $(e_i,q_i)$\u3002\u6c42\u9009\u62e9\u4e00\u4e2a $A$ \u7c7b\u70b9\u4f5c\u4e3a\u77e9\u5f62\u5de6\u4e0b\u89d2\uff0c\u4e00\u4e2a $B$ \u7c7b\u70b9\u4f5c\u4e3a\u77e9\u5f62\u53f3\u4e0a\u89d2\u6240\u80fd\u5f97\u5230\u7684\u6700\u5927\u9762\u79ef\u3002\u82e5\u4e0d\u5b58\u5728\u8fd9\u6837\u7684\u77e9\u5f62\u5c31\u8f93\u51fa\u96f6\u3002\n\n\u8003\u8651\u5982\u4e0b\u51e0\u79cd\u60c5\u51b5\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/3rdhn8k6.png)\n\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b $A_1,A_2$ \u90fd\u80fd\u4e0e $B$ \u56f4\u6210\u4e00\u4e2a\u77e9\u5f62\uff0c\u4f46\u663e\u7136 $A_1$ \u66f4\u4f18\u79c0\u3002\n\n\u6545\u5bf9\u4e8e\u8fd9\u6837\u7684 $A$ \u70b9\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u820d\u5f03\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lkux9px4.png)\n\n\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b $B_1,B_2$ \u90fd\u80fd\u4e0e $A$ \u56f4\u6210\u4e00\u4e2a\u77e9\u5f62\uff0c\u4f46\u663e\u7136 $B_1$ \u66f4\u4f18\u79c0\u3002\n\n\u6545\u5bf9\u4e8e\u8fd9\u6837\u7684 $B$ \u70b9\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u820d\u5f03\u3002\n\n\u820d\u5f03\u6389\u8fd9\u4e9b\u70b9\u8fc7\u540e\u4e24\u79cd\u70b9\u5728\u5e73\u9762\u4e0a\u7684\u6392\u5e03\u4e00\u5b9a\u662f\u8fd9\u6837\u7684\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/qpr85721.png)\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u8fd9\u6837\u4e00\u79cd\u60c5\u51b5\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/syfg1b9t.png)\n\n\u8bbe $A_1,B_1$ \u56f4\u6210\u7684\u77e9\u5f62\u662f\u4ee5 $A_1$ \u4e3a\u5de6\u4e0b\u89d2\u7684\u77e9\u5f62\u5f53\u4e2d\u6700\u5927\u7684\u90a3\u4e00\u4e2a\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u8fd9\u6837\u4e00\u4e2a\u7ed3\u8bba\uff1a\n\n$A_2$ \u548c $B_2$ \u56f4\u6210\u7684\u77e9\u5f62\u7684\u5927\u5c0f\u4e00\u5b9a\u5c0f\u4e8e $A_2$ \u548c $B_1$ \u56f4\u6210\u7684\u77e9\u5f62\u7684\u5927\u5c0f\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5rlrkrbo.png)\n\n\u6211\u4eec\u7ed9\u8fd9\u51e0\u4e2a\u90e8\u5206\u7f16\u4e2a\u53f7\uff0c\u4e0b\u9762\u7528\u7f16\u53f7\u4ee3\u66ff\u4e0a\u56fe\u4e2d\u7684\u90e8\u5206\u3002\n\n\u6839\u636e\u6211\u4eec\u524d\u9762\u7684\u6761\u4ef6\uff0c\u6709 $3+4+5>3+4+1+2\\rightarrow 5>1+2$\u3002\n\n\u6211\u4eec\u8981\u8bc1\u660e\u7684\u5373 $4+6+5+7>4+6+2\\rightarrow 5+7>2\\rightarrow 1+2+7> 2$\u3002\n\n\u6240\u4ee5\u6211\u4eec\u63a8\u5e7f\u4e00\u4e0b\u53ef\u4ee5\u5f97\u5230\u8fd9\u6837\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u7ea2\u70b9\uff0c\u5176\u56f4\u6210\u6700\u5927\u77e9\u5f62\u7684\u9ec4\u70b9\u5177\u6709\u5355\u8c03\u6027\u3002\n\n\u6839\u636e\u8fd9\u4e2a\u6027\u8d28\u6211\u4eec\u76f4\u63a5\u5206\u6cbb\u5c31\u597d\u4e86\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log_2n)$\u3002\n\n```cpp\n/*---Author:HenryHuang---*/\n/*---Never Settle---*/\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\nconst int maxn=5e5+5;\nstruct cc{\n\tint x,y;\n\tLL operator*(const cc &h)const{\n\t\treturn 1ll*(h.x-x)*(h.y-y);\n\t}\n}a[maxn],b[maxn],p[maxn];\nint sa,sb;\nLL Ans;\nvoid solve(int l,int r,int ll,int rr){\n\tif(l>r||ll>rr) return ;\n\tint mid=(l+r)>>1;\n\tLL ans=-1e18,id=0;\n\tfor(int i=ll;i<=rr;++i){\n\t\tif(a[mid].x<b[i].x||a[mid].y<b[i].y){\n\t\t\tif(a[mid]*b[i]>ans){\n\t\t\t\tans=a[mid]*b[i];\n\t\t\t\tid=i;\n\t\t\t}\n\t\t}\n\t}\n\tif(id!=0){\n\t\tsolve(l,mid-1,ll,id);\n\t\tsolve(mid+1,r,id,rr);\n\t\tAns=max(Ans,ans);\n\t}\n\t\n}\nint main(){\n\tios::sync_with_stdio(0);\n\tcin.tie(0),cout.tie(0);\n\tint m,n;cin>>m>>n;\n\tfor(int i=1;i<=m;++i){\n\t\tcin>>p[i].x>>p[i].y;\n\t}\n\tsort(p+1,p+m+1,[&](cc a,cc b){return a.x==b.x?a.y<b.y:a.x<b.x;});\n\ta[++sa]=p[1];\n\tfor(int i=2;i<=m;++i){\n\t\tif(a[sa].y>p[i].y) a[++sa]=p[i];\n\t}\n\tfor(int i=1;i<=n;++i){\n\t\tcin>>p[i].x>>p[i].y;\n\t}\n\tsort(p+1,p+n+1,[&](cc a,cc b){return a.x==b.x?a.y<b.y:a.x<b.x;});\n\treverse(p+1,p+n+1);\n\tb[++sb]=p[1];\n\tfor(int i=2;i<=n;++i){\n\t\tif(b[sb].y<p[i].y) b[++sb]=p[i];\n\t}\n\treverse(b+1,b+sb+1);\n\tfor(int i=1;i<=sb;++i) cout<<b[i].x<<' '<<b[i].y<<'\\n';\n\tsolve(1,sa,1,sb);\n\tcout<<Ans<<'\\n';\n\treturn 0;\n}\n```\n\n",
        "postTime": 1614172752,
        "uid": 43957,
        "name": "HenryHuang",
        "ccfLevel": 9,
        "title": "\u300cICPC2017 WF\u300dMoney for Nothing"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/LaoMang-no-blog/p/16203886.html)\n\n---\n\n[**\u4f60\u8c37 link**](https://www.luogu.com.cn/problem/P6932)\n\n[**loj link**](https://loj.ac/p/6473)\n\n\u4e00\u9053\u53ef\u4ee5\u4f5c\u4e3a\u51b3\u7b56\u5355\u8c03\u6027\u6a21\u677f\u9898\u5237\u7684\u9898\u3002\n\n\u8003\u8651\u66b4\u529b\u600e\u4e48\u505a\uff0c\u5176\u5b9e\u5c31\u662f\u628a\u751f\u4ea7\u5546\u548c\u6d88\u8d39\u5546\u4e24\u4e24\u5339\u914d\u7b97\u4e00\u904d\u7b54\u6848\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O\\left(n^2\\right)$\uff08$n$ \u548c $m$ \u540c\u9636\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e2d\u7edf\u4e00\u5199\u4f5c $n$\uff09\u3002\n\n\u76f4\u63a5\u66b4\u529b\u80af\u5b9a\u662f\u4e0d\u884c\u7684\uff0c\u5f97\u8003\u8651\u4f18\u5316\uff0c\u53ef\u4ee5\u5148\u8fdb\u884c\u7b2c\u4e00\u6ce2\u57fa\u672c\u4f18\u5316\u2014\u2014\u6d88\u53bb\u65e0\u7528\u51b3\u7b56\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5927\u529b\u53d1\u626c\u4eba\u7c7b\u667a\u6167\uff0c\u5229\u7528\u751f\u6d3b\u5e38\u8bc6\u8fdb\u884c\u526a\u679d\uff0c\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u4e24\u4e2a\u751f\u4ea7\u5546\u8fdb\u884c\u6bd4\u8f83\uff0c\u4e00\u4e2a\u751f\u4ea7\u5546\u6765\u5f97\u53c8\u665a\uff0c\u4e1c\u897f\u53c8\u8d35\uff0c\u4f60\u663e\u7136\u5acc\u5f03\u4ed6\uff0c\u540c\u7406\u4e24\u4e2a\u6d88\u8d39\u5546\u4e2d\u8d70\u5f97\u65e9\u8fd8\u51fa\u94b1\u5c11\u80af\u5b9a\u4e5f\u4e0d\u884c\uff0c\u53ef\u4ee5\u8003\u8651\u6392\u5e8f\u628a\u8fd9\u4e9b\u90fd\u53bb\u6389\u3002\n\n\u8fd9\u6837\u6211\u4eec\u73b0\u5728\u5c06\u751f\u4ea7\u5546\u548c\u6d88\u8d39\u5546\u90fd\u6309\u65f6\u95f4\u6392\u597d\u5e8f\u540e\u526a\u679d\u5c31\u5f97\u5230\u751f\u4ea7\u5546\u7684\u552e\u4ef7\u8d8a\u6765\u8d8a\u4f4e\uff0c\u6d88\u8d39\u5546\u7684\u4e70\u4ef7\u4e5f\u8d8a\u6765\u8d8a\u4f4e\u7684\u4e24\u4e2a\u6570\u7ec4\u3002\n\n\u7136\u540e\u8003\u8651\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u8fd9\u91cc\u5c31\u9700\u8981\u7528\u4e00\u70b9\u9ed1\u79d1\u6280\u4e86\uff0c\u8003\u8651\u51b3\u7b56\u5355\u8c03\u6027\u4f18\u5316\u3002\n\n\u600e\u4e48\u53d1\u73b0\u51b3\u7b56\u5355\u8c03\u6027\u5462\uff1f\u53ef\u4ee5\u8003\u8651\u6253\u8868\u53d1\u73b0\u89c4\u5f8b\uff0c\u4e5f\u53ef\u4ee5\u7528\u56db\u8fb9\u5f62\u4e0d\u7b49\u5f0f\uff0c\u8fd9\u91cc\u535a\u4e3b\u4f7f\u7528\u4e00\u79cd\u6700\u6700\u7b80\u5355\u7684\u529e\u6cd5\u2014\u2014\u66b4\u529b\u7b97\u3002\n\n\u6211\u4eec\u8bbe\u7b2c $i$ \u4e2a\u751f\u4ea7\u5546\u7684\u5230\u8fbe\u65f6\u95f4\u4e3a $l_i$\uff0c\u552e\u4ef7\u4e3a $a_i$\uff0c\u7b2c $i$ \u4e2a\u6d88\u8d39\u5546\u7684\u79bb\u5f00\u65f6\u95f4\u4e3a $r_i$\uff0c\u4e70\u4ef7\u4e3a $b_i$\uff0c\u5219\u7b2c $i$ \u4e2a\u751f\u4ea7\u5546\u548c\u7b2c $j$ \u4e2a\u6d88\u8d39\u5546\u7ec4\u5408\u7684\u6536\u76ca\u662f $(r_j-l_i)(b_j-a_i)$\u3002\n\n\u8003\u8651\u53cd\u8bc1\u6cd5\uff0c\u8bbe\u4e24\u4e2a\u6d88\u8d39\u5546 $i$ \u548c $i'$ \u6ee1\u8db3 $l_i<l_{i'}$\uff0c\u4e24\u4e2a\u751f\u4ea7\u5546 $j$ \u548c $j'$ \u6ee1\u8db3 $r_j<r_{j'}$\uff0c\u4e14\u6ee1\u8db3\u5bf9 $i$ \u6765\u8bf4\u548c $j'$ \u7ec4\u5408\u6bd4\u548c $j$ \u7ec4\u5408\u66f4\u4f18\uff0c\u800c\u5bf9 $i'$ \u6765\u8bf4\u53cd\u800c\u662f $j$ \u66f4\u4f18\uff0c\u5219\u6ee1\u8db3\u4e0b\u9762\u7684\u5f0f\u5b50\uff1a\n\n$$\n\\begin{aligned}\n(r_{j'}-l_i)(b_{j'}-a_i)>(r_j-l_i)(b_j-a_i)\\\\\n(r_{j'}-l_{i'})(b_{j'}-a_{i'})<(r_j-l_{i'})(b_j-a_{i'})\n\\end{aligned}\n$$\n\n\u5bf9\u4e24\u4e2a\u5f0f\u5b50\u8fdb\u884c\u5c55\u5f00\u79fb\u9879\u5f97\u5230\uff1a\n\n$$\n\\begin{aligned}\nr_{j'}b_{j'}-r_jb_j>l_i(b_{j'}-b_j)+a_i(r_{j'}-r_j)\\\\\nr_{j'}b_{j'}-r_jb_j<l_{i'}(b_{j'}-b_j)+a_{i'}(r_{j'}-r_j)\n\\end{aligned}\n$$\n\n\u5408\u5e76\u5f97\uff1a\n\n$$\nl_i(b_{j'}-b_j)+a_i(r_{j'}-r_j)<l_{i'}(b_{j'}-b_j)+a_{i'}(r_{j'}-r_j)\n$$\n\n\u56e0\u4e3a\u6ee1\u8db3 $l_{i'}>l_i$\uff0c$a_{i'}<a_i$\uff0c$r_{i'}>r_i$\uff0c$b_{i'}<b_i$\uff0c\u6240\u4ee5\u4e0e\u4e0a\u5f0f\u662f\u77db\u76fe\u7684\uff0c\u6240\u4ee5\u5047\u8bbe\u9519\u8bef\uff0c\u786e\u5b9e\u6ee1\u8db3\u51b3\u7b56\u5355\u8c03\u6027\u3002\n\n\u6ee1\u8db3\u51b3\u7b56\u5355\u8c03\u6027\u4ee5\u540e\u5462\uff1f\u600e\u4e48\u5229\u7528\u51b3\u7b56\u5355\u8c03\u6027\u4f18\u5316\u6211\u4eec\u7684\u641c\u7d22\uff0c\u4e5f\u5c31\u662f\u5728\u4e00\u4e2a\u8f83\u4f18\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u627e\u5230\u6bcf\u4e2a\u6d88\u8d39\u5546\u7684\u6700\u4f18\u751f\u4ea7\u5546\u3002\n\n\u6211\u4eec\u8003\u8651\u53ef\u4ee5\u4ee5\u4e00\u79cd\u7c7b\u4f3c\u6574\u4f53\u4e8c\u5206\u7684\u65b9\u5f0f\uff0c\u7528\u6d88\u8d39\u5546\u53bb\u5339\u914d\u751f\u4ea7\u5546\uff0c\u5229\u7528\u5206\u6cbb\u7684\u601d\u60f3\uff0c\u4ee5\u53ca\u5229\u7528\u4e4b\u524d\u627e\u5230\u7684\u6700\u4f18\u51b3\u7b56\u70b9\u6765\u7f29\u5c0f\u6211\u4eec\u73b0\u5728\u7684\u641c\u7d22\u533a\u95f4\uff0c\u5047\u8bbe\u6211\u4eec\u73b0\u5728\u6b63\u5728\u5bfb\u627e $[l,r]$ \u8fd9\u4e2a\u533a\u95f4\u91cc\u6bcf\u4e2a\u70b9\u7684\u6700\u4f18\u51b3\u7b56\u70b9\uff0c\u51b3\u7b56\u70b9\u7684\u53ef\u80fd\u533a\u95f4\u4e3a $[L,R]$\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u7b2c $mid=\\left\\lfloor\\dfrac{l+r}2\\right\\rfloor$ \u4e2a\u6d88\u8d39\u5546\u7684\u51b3\u7b56\u70b9\uff0c\u6211\u4eec\u53d1\u73b0 $[l,mid-1]$ \u7684\u6700\u4f18\u51b3\u7b56\u70b9\u90fd\u5728\u8be5\u51b3\u7b56\u70b9\u4ee5\u5de6\uff0c$[mid+1,r]$ \u540c\u7406\uff0c\u8fd9\u6837\u6211\u4eec\u53ea\u8981\u518d\u9012\u5f52\u89e3\u51b3\uff0c\u53ea\u9700\u8981\u9012\u5f52 $\\mathcal O\\left(\\log n\\right)$ \u5c42\u5c31\u80fd\u89e3\u51b3\uff0c\u6bcf\u5c42\u641c\u7d22\u7684\u603b\u548c\u662f $\\mathcal O\\left(n\\right)$ \u7684\uff0c\u6240\u4ee5\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O\\left(n\\log n\\right)$\u3002\n\n[**c++ \u4ee3\u7801**](https://www.cnblogs.com/LaoMang-no-blog/p/16203886.html)",
        "postTime": 1651214524,
        "uid": 310525,
        "name": "\u8001\u83bd\u83bd\u7a7f\u4e00\u5207",
        "ccfLevel": 0,
        "title": "P6932 [ICPC2017 WF]Money for Nothing \u9898\u89e3"
    },
    {
        "content": "## P6932 [ICPC2017 WF]Money for Nothing\n\n***\n\n\u56e0\u4e3a\u8d5a\u53d6\u7684\u5dee\u4ef7\u5c31\u662f\u7b49\u4e8e\u65f6\u95f4\u4e4b\u5dee\u4e0e\u4ef7\u683c\u4e4b\u5dee\u7684\u4e58\u79ef\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u770b\u6210\u662f\u5e73\u9762\u4e0a\u7684\u95ee\u9898\u3002\n\n\u5efa\u7acb\u4e00\u4e2a\u76f4\u89d2\u5750\u6807\u7cfb\uff0c\u5c06\u65f6\u95f4\u4f5c\u4e3a\u6a2a\u5750\u6807\uff0c\u4ef7\u683c\u4f5c\u4e3a\u7eb5\u5750\u6807\u3002\n\n\u7136\u540e\u5c06\u751f\u4ea7\u5546\u548c\u6d88\u8d39\u5546\u7684\u4fe1\u606f\u8f6c\u4e3a\u5e73\u9762\u4e0a\u7684\u70b9\uff0c\u5176\u4e2d\u5c06\u751f\u4ea7\u5546\u5212\u4e3aA\u7c7b\u70b9\uff0c\u6d88\u8d39\u5546\u5212\u4e3aB\u7c7b\u70b9\u3002\n\n\u77e9\u9635\u9762\u79ef = \u957f $\\times $ \u5bbd\n\n= \uff08\u4efb\u610f\u4e00\u4e2a $A$ \u7c7b\u70b9\u548c\u4e00\u4e2a $B$ \u7c7b\u70b9\u7684\uff09\u4e24\u70b9\u6a2a\u5750\u6807\u4e4b\u5dee $\\times $ \u4e24\u70b9\u7eb5\u5750\u6807\u4e4b\u5dee\n\n= \u65f6\u95f4\u4e4b\u5dee $\\times $ \u4ef7\u683c\u4e4b\u5dee\n\n= \u8d5a\u53d6\u7684\u5dee\u4ef7\n\n\u4e4b\u540e\u95ee\u9898\u5c31\u6210\u4e86\u5728\u5e73\u9762\u4e0a **\u5de6\u4e0b\u89d2\u4e3a $A$ \u7c7b\u70b9** **\u53f3\u4e0a\u89d2\u4e3a $B$ \u7c7b\u70b9** \u6c42\u6700\u5927\u7684\u77e9\u9635\u9762\u79ef\u7684\u95ee\u9898\u3002\n\n***\n\n\u5728\u5904\u7406\u4e4b\u524d\uff0c\u53ef\u4ee5\u5148\u6392\u9664\u4e00\u4e9b\u65e0\u7528\u7684\u72b6\u6001\u3002\n\n\u5148\u5c06 $A$ \u7c7b\u70b9\u6309\u5750\u6807\u8fdb\u884c\u6392\u5e8f\u3002\n\n![a](https://cdn.luogu.com.cn/upload/image_hosting/qgd3f5h6.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5982\u679c $A$ \u7c7b\u70b9\u5176\u4e2d\u7684\u4e24\u70b9\u51fa\u73b0\u4e86\u4e0a\u56fe\u7684\u60c5\u51b5\u3002\n\n\u663e\u7136\uff0c\u7531 $ a_1 $ \u70b9\u4e3a\u5de6\u4e0b\u89d2\u7684\u77e9\u9635\u4e00\u5b9a\u4e0d\u4f1a\u6bd4\u4ee5 $ a_2 $ \u70b9\u4e3a\u5de6\u4e0b\u89d2\u7684\u77e9\u9635\u7684\u9762\u79ef\u66f4\u5927\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u6392\u9664 $ a_1 $ \u70b9\uff0c\u5c06 $ a_1 $ \u70b9\u4ece\u5019\u9009\u96c6\u5408\u4e2d\u5220\u53bb\u3002\n\n\u4e4b\u540e\u662f\u5c06 $B$ \u7c7b\u70b9\u6309\u5750\u6807\u8fdb\u884c\u6392\u5e8f\u3002\n\n![b](https://cdn.luogu.com.cn/upload/image_hosting/x6pdc3zg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5982\u679c $B$ \u7c7b\u70b9\u5176\u4e2d\u7684\u4e24\u70b9\u51fa\u73b0\u4e86\u4e0a\u56fe\u7684\u60c5\u51b5\u3002\n\n\u540c\u6837\uff0c\u7531 $ b_1 $ \u70b9\u4e3a\u53f3\u4e0a\u89d2\u7684\u77e9\u9635\u4e00\u5b9a\u4e0d\u4f1a\u6bd4\u4ee5 $ b_2 $ \u70b9\u4e3a\u53f3\u4e0a\u89d2\u7684\u77e9\u9635\u7684\u9762\u79ef\u66f4\u5927\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c06 $ b_1 $ \u70b9\u4ece\u5019\u9009\u96c6\u5408\u4e2d\u5220\u53bb\u3002\n\n***\n\n\u6211\u4eec\u53d1\u73b0\u5728\u6392\u9664\u6240\u6709\u65e0\u7528\u7684\u70b9\u4e4b\u540e\uff0c$A$ \u7c7b\u70b9\u548c $B$ \u7c7b\u70b9\u90fd\u5448\u73b0\u51fa $x$ \u9012\u589e $y$ \u9012\u51cf\u7684\u6837\u5b50\u3002\n\n![ab](https://cdn.luogu.com.cn/upload/image_hosting/pklyypuu.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\uff08\u5927\u6982\u5c31\u662f\u8fd9\u6837 $ \\uparrow $ \uff09\u3002\n\n***\n\n**\u4e4b\u540e\u53ef\u4ee5\u5217\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a**\n\n\u8bbe $ f_i $ \u4e3a\u4ee5 $ a_i $ \u4e3a\u5de6\u4e0b\u89d2\u7684\u6700\u5927\u77e9\u5f62\u9762\u79ef\u3002\n\n$$\nf_i = \\max( val(i,j) ) (j\\in B)\n$$\n\n$ val(i,j) $ \u8868\u793a\u4ee5 $ a_i $ \u548c $ b_j $ \u4e3a\u5de6\u4e0b\u89d2\u548c\u53f3\u4e0b\u89d2\u7684\u77e9\u5f62\u9762\u79ef\u3002\n\n\u56e0\u4e3a\u8fd9\u4e2a\u5f0f\u5b50\u4e00\u770b\u5c31\u662f $ O(n^2) $ \u7684\u590d\u6742\u5ea6\uff0c\u80af\u5b9a\u4f1a\u88ab\u5361\u3002\n\n***\n\n\u8003\u8651\u4f18\u5316\uff1a\n\n\u5728\u53bb\u9664\u65e0\u7528\u70b9\u540e\u7684\u4efb\u610f\u4e24\u4e2a $A$ \u7c7b\u70b9\u548c\u4efb\u610f\u4e24\u4e2a $B$ \u7c7b\u70b9\u4e2d\u3002\n\n![ab2](https://cdn.luogu.com.cn/upload/image_hosting/zg65s4ay.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5f15\u7406\uff1a\n\n\u5982\u679c \u77e9\u5f62 $ a_1 b_2 $ \u7684\u9762\u79ef $ > $ \u77e9\u5f62 $ a_1 b_1 $ \u7684\u9762\u79ef\u3002\n\n\u90a3\u4e48 \u77e9\u5f62 $ a_2 b_2 $ \u7684\u9762\u79ef $ > $ \u77e9\u5f62 $ a_2 b_1 $ \u7684\u9762\u79ef\u3002\n\n\u8bc1\u660e\uff08\u770b\u4e0a\u56fe\uff09\uff1a\n\n$ \\because val(a_1,b_2) > val(a_1,b_2) $\n\n$ \\therefore 3 + 4 + 5 > 1 + 2 + 3 + 4 $\n\n$ \\therefore 5 > 1 + 2 $\n\n\u800c\u5176\u4e2d\uff1a\n\n$ val(a_2,b_1) = 2 + 4 + 6 $\n\n$ val(a_2,b_2) = 4 + 5 + 6 + 7 $\n\n\u6240\u4ee5\uff0c\u53c8 $ \\because 5 > 1 + 2 $\n\n $ \\therefore 4 + 5 + 6 + 7 > 1 + 2 + 4 + 6 $\n\n $ \\therefore 4 + 5 + 6 + 7 > 2 + 4 + 6 $\n\n $ \\therefore val(a_2,b_2) > val(a_2,b_1) $\n\n\u8bc1\u6bd5\u3002\n\n\u7531\u6b64\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u51b3\u7b56\u5355\u8c03\u6027\u6765\u4f18\u5316\u3002\n\n\u590d\u6742\u5ea6\uff1a $ O(n\\log n) $\u3002\n\n~~\u6211\u611f\u89c9\u6211\u7684\u590d\u6742\u5ea6\u5e94\u8be5\u662f\u6bd4\u8f83\u4f18\u79c0\u4e86\u3002~~\n\n~~\u4e3a\u4ec0\u4e48\u6bd4\u4ed6\u4eec\u90a3\u4e9b\u4fe9\u4e2alog\u7684\u8dd1\u7684\u8fd8\u6162\u3002~~\n\n\u662f\u6211\u590d\u6742\u5ea6\u7b97\u9519\u4e86\u5417\uff0c\u6c42\u8def\u8fc7\u7684\u5927\u4f6c\u6307\u6b63\u3002\n\n***\n\n\u597d\u4e86\uff0c\u6700\u540e\u4e0aAC\u4ee3\u7801\u3002\n\n## Code\uff1a\n\n```cpp\n#include <iostream>\n#include <algorithm>\nusing namespace std ;\n\n#define int long long\n\nstruct Point\n{\n\tint x , y ;\n\tinline friend bool operator < ( Point i , Point j )\n\t{\n\t\tif ( i .x == j .x )\n\t\t\treturn i .y < j .y ;\n\t\treturn i .x < j .x ;\n\t}\n} a[500005] , b[500005] , c[500005] , d[500005] ;\n\nstruct Node\n{\n\tint j , l , r ;\n} q[500005] ;\n\nint n , m , nt , mt , head , tail , ans ;\n\ninline int Abs ( int x )\n{\n\tif ( x < 0 )\n\t\treturn -x ;\n\treturn x ;\n}\n\ninline int calc ( int i , int j )\n{\n\tint f = 1 , res = Abs ( ( b [ j ] .x - a [ i ] .x ) * ( b [ j ] .y - a [ i ] .y ) ) ;\n\tif ( a [ i ] .x > b [ j ] .x || a [ i ] .y > b [ j ] .y )\n\t\tf = -1 ;\n\treturn f * res ;\n}\n\nsigned main ( )\n{\n\tcin >> n >> m ;\n\tfor ( int i = 1 ; i <= n ; ++ i )\n\t\tcin >> c [ i ] .x >> c [ i ] .y ;\n\tfor ( int i = 1 ; i <= m ; ++ i )\n\t\tcin >> d [ i ] .x >> d [ i ] .y ;\n\tsort ( c + 1 , c + 1 + n ) ;\n\tsort ( d + 1 , d + 1 + m ) ;\n\ta [ 1 ] = c [ 1 ] ;\n\tnt = 1 ;\n\tfor ( int i = 2 ; i <= n ; ++ i )\n\t{\n\t\tif ( c [ i ] .y < a [ nt ] .y )\n\t\t\ta [ ++ nt ] = c [ i ] ;\n\t}\n\tb [ 1 ] = d [ 1 ] ;\n\tmt = 1 ;\n\tfor ( int i = 2 ; i <= m ; ++ i )\n\t{\n\t\twhile ( mt && d [ i ] .y > b [ mt ] .y )\n\t\t\t-- mt ;\n\t\tb [ ++ mt ] = d [ i ] ;\n\t}\n\thead = tail = 1 ;\n\tq [ 1 ] .j = 1 ;\n\tq [ 1 ] .l = 1 ;\n\tq [ 1 ] .r = nt ;\n\tfor ( int i = 2 ; i <= mt ; ++ i )\n\t{\n\t\tint pos = nt + 1 ;\n\t\twhile ( head <= tail )\n\t\t{\n\t\t\tif ( ( calc ( q [ tail ] .l , i ) > 0 ) && calc ( q [ tail ] .l , i ) >= calc ( q [ tail ] .l , q [ tail ] .j ) )\n\t\t\t{\n\t\t\t\tpos = q [ tail ] .l ;\n\t\t\t\t-- tail ;\n\t\t\t\tcontinue ;\n\t\t\t}\n\t\t\tif ( calc ( q [ tail ] .r , i ) < calc ( q [ tail ] .r , q [ tail ] .j ) )\n\t\t\t\tbreak ;\n\t\t\tint l = q [ tail ] .l , r = q [ tail ] .r + 1 , mid ;\n\t\t\twhile ( l < r )\n\t\t\t{\n\t\t\t\tmid = ( l + r ) >> 1 ;\n\t\t\t\tif ( calc ( mid , i ) >= calc ( mid , q [ tail ] .j ) )\n\t\t\t\t\tr = mid ;\n\t\t\t\telse\n\t\t\t\t\tl = mid + 1 ;\n\t\t\t}\n\t\t\tpos = r ;\n\t\t\tq [ tail ] .r = pos - 1 ;\n\t\t\tbreak ;\n\t\t}\n\t\tif ( pos <= nt )\n\t\t{\n\t\t\tq [ ++ tail ] .j = i ;\n\t\t\tq [ tail ] .l = pos ;\n\t\t\tq [ tail ] .r = nt ;\n\t\t}\n\t}\n\tfor ( int i = 1 ; i <= nt ; ++ i )\n\t{\n\t\twhile ( q [ head ] .r < i )\n\t\t\t++ head ;\n\t\tans = max ( ans , calc ( i , q [ head ] .j ) ) ;\n\t}\n\tcout << ans << endl ;\n\treturn 0 ;\n}\n```\n\n***",
        "postTime": 1628479249,
        "uid": 68882,
        "name": "\u7075\u534e",
        "ccfLevel": 6,
        "title": "P6932 [ICPC2017 WF]Money for Nothing\u9898\u89e3"
    },
    {
        "content": "\u9898\u610f\u53ef\u7b80\u5316\u4e3a $m$ \u4e2a\u77e9\u5f62\u5de6\u4e0b\u89d2\u548c $n$ \u4e2a\u77e9\u5f62\u53f3\u4e0a\u89d2\u80fd\u7ec4\u6210\u7684\u6700\u5927\u77e9\u5f62\u9762\u79ef\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u77e9\u5f62\u5de6\u4e0b\u89d2\u7684\u70b9\uff0c\u53d1\u73b0\u6ee1\u8db3\u5bf9\u4e8e $\\forall i,j, x_i\\le x_j,y_i\\le y_j$\uff0c\u90a3\u4e48 $j$ \u4e00\u5b9a\u4e0d\u4f1a\u6bd4 $i$ \u4f18\uff0c\u76f4\u63a5\u4ece\u5e8f\u5217\u4e2d\u5220\u9664\n\n\u540c\u7406\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u77e9\u5f62\u53f3\u4e0a\u89d2\u7684\u70b9\uff0c\u53d1\u73b0\u6ee1\u8db3\u5bf9\u4e8e $\\forall i,j,x_i\\ge x_j,y_i\\ge y_j$\uff0c\u90a3\u4e48 $j$ \u4e00\u5b9a\u4e0d\u4f1a\u6bd4 $i$ \u4f18\uff0c\u4e5f\u76f4\u63a5\u4ece\u5e8f\u5217\u4e2d\u5220\u9664\n\n\u6211\u4eec\u5bf9\u4e8e\u5269\u4e0b\u6765\u6240\u6709\u7684\u5de6\u4e0b\u89d2\u6309 $x$ \u5750\u6807\u6392\u5e8f\uff0c\u53d1\u73b0\u5bf9\u4e8e $\\forall i,j,x_i<x_j$ \u90fd\u6709 $y_i>y_j$\uff0c\u6240\u6709\u53f3\u4e0a\u89d2\u7684\u70b9\u4e5f\u662f\u8fd9\u6837\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u51b3\u7b56\u5355\u8c03\u6027\n\n\u6211\u4eec\u5047\u8bbe\u6709\u5de6\u4e0a\u89d2 $(x_1,y_1), \\ (x_2,y_2),\\ x_1<x_2$\uff0c\u53f3\u4e0b\u89d2 $(x_p,y_p)$\uff0c\u4e14 $(x_1,y_1)$ \u6bd4 $(x_2,y_2)$ \u66f4\u4f18\uff0c\u90a3\u4e48\u6709\n\n$(x_p-x_1)(y_p-y_1)-(x_p-x_2)(y_p-y_2)>0$\n\n\u6574\u7406\u5f97\uff1a$-x_p(y_1-y_2)-y_p(x_1-x_2)+(x_1y1-x_2y_2)>0$\n\n\u90a3\u4e48\u5bf9\u4e8e\u53f3\u4e0a\u89d2\u70b9 $(x_q,y_q),\\ x_q<x_p$\uff0c\u6709 $y_q>y_p$\uff0c\u53c8\u7531\u4e8e $y_1-y_2>0$\uff0c$x_1-x_2<0$\uff0c\u6240\u4ee5\u51b3\u7b56\u5355\u8c03\u6027\u5f97\u8bc1\n\n\u53d1\u73b0\u4e0a\u4e00\u6b65\u51b3\u7b56\u4e0d\u4f1a\u5f71\u54cd\u4e0b\u4e00\u6b65\u51b3\u7b56\uff0c\u4e8e\u662f\u7528\u5206\u6cbb\u6cd5\u5199\u51b3\u7b56\u5355\u8c03\u6027\u5373\u53ef\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n\\log n)$\n\ncode:\n\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 500010\n#define inf 0x3f3f3f3f3f3f3f3f\n#define int long long\nusing namespace std;\nint n,m,ans;\nstruct Node{int x,y;}pld[MAXN],pru[MAXN],ld[MAXN],ru[MAXN];\nbool cmp(Node a,Node b){return a.x==b.x?a.y<b.y:a.x<b.x;}\nvoid solve(int l,int r,int L,int R){\n\tif(l>r)return;if(L>R)return;\n\tint mid=(l+r)>>1,p=L,now=0;\n\tfor(int i=L;i<=R;i++){\n\t\tif(ru[mid].x-ld[i].x<=0&&ru[mid].y-ld[i].y<=0){\n\t\t\tsolve(l,mid-1,L,i);solve(mid+1,r,i,R);\n\t\t\treturn;\n\t\t}\n\t\tint val=(ru[mid].x-ld[i].x)*(ru[mid].y-ld[i].y);\n\t\tif(val>now)now=val,p=i;\n\t}\n\tans=max(ans,now);\n\tsolve(l,mid-1,L,p);solve(mid+1,r,p,R);\n}\nsigned main(){\n\tscanf(\"%lld%lld\",&m,&n);\n\tfor(int i=1;i<=m;i++)scanf(\"%lld%lld\",&pld[i].x,&pld[i].y);\n\tfor(int i=1;i<=n;i++)scanf(\"%lld%lld\",&pru[i].x,&pru[i].y);\n\tsort(pld+1,pld+m+1,cmp);sort(pru+1,pru+n+1,cmp);\n\tint y=inf,M=0,N=0;\n\tfor(int i=1;i<=m;i++)\n\t\tif(pld[i].y<y)ld[++M]=pld[i],y=pld[i].y;\n\tfor(int i=1;i<=n;i++){\n\t\twhile(N&&ru[N].y<pru[i].y)N--;\n\t\tru[++N]=pru[i];\n\t}\n\tsolve(1,N,1,M);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1608043168,
        "uid": 65681,
        "name": "UltiMadow",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P6932 \u3010[ICPC2017 WF]Money for Nothing\u3011"
    }
]
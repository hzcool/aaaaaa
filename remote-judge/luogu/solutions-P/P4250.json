[
    {
        "content": "\u63a8\u6ce2\u67ff\u5b50\uff1a\n\n![](https://i.loli.net/2019/03/26/5c9a1a46aef81.png)\n\n\u8bbe\u70b9$A(x_a, y_a), B(x_b, y_b), C(x_c, y_c), D(x_d, y_d), P(x, y)$\n\n$\\vec{a} = (x_b - x_a, y_b - y_a), \\vec{b} = (x_d - x_c, y_d - y_c)$\n\n$\\overrightarrow{AP} = (x - x_a, y - y_a), \\overrightarrow{CP} = (x - x_c, y - y_c)$\n\n$\\vec{a} \\times \\overrightarrow{AP} = (x_b - x_a)(y - y_a) - (y_b - y_a)(x - x_a)$\n\n$\\vec{b} \\times \\overrightarrow{CP} = (x_d - x_c)(y - y_c) - (y_d - y_c)(x - x_c)$\n\n\u7531\u9898\u76ee\uff0c$\\vec{a} \\times \\overrightarrow{AP} < \\vec{b} \\times \\overrightarrow{CP}$\uff0c\u90a3\u4e48\u6709\n\n$$\\begin{aligned}&(x_b - x_a)(y - y_a) - (y_b - y_a)(x - x_a) < (x_d - x_c)(y - y_c) - (y_d - y_c)(x - x_c) \\\\\\Rightarrow & (x_b - x_a + x_d - x_c)y - (y_b - y_a - y_d + y_c)x + (y_b x_a - x_b y_a - y_d x_c + x_d y_c) < 0\\end{aligned}$$\n\u7136\u540e\u8fd9\u4e2a\u5c31\u662f\u4e00\u4e2a\u88f8\u7684\u534a\u5e73\u9762\u4ea4\u4e86\u3002\n\n\u4ee3\u7801\u89c1[$\\texttt{my blog}$](https://www.cnblogs.com/cj-xxz/p/10603286.html)",
        "postTime": 1553604043,
        "uid": 46800,
        "name": "xgzc",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4250 \u3010[SCOI2015]\u5c0f\u51f8\u60f3\u8dd1\u6b65\u3011"
    },
    {
        "content": "\n\u9996\u5148\u8981\u610f\u8bc6\u5230\u6982\u7387\u53ef\u4ee5\u7528\u9762\u79ef\u6bd4\u6765\u7b97\n\nP=\u53ef\u9009\u533a\u57df\u9762\u79ef/\u51f8\u591a\u8fb9\u5f62\u603b\u9762\u79ef\n\n\u53d1\u73b0\u6bcf\u6761\u8fb9\u662f\u72ec\u7acb\u7684\uff0c\u53ef\u4ee5\u62ff\u6bcf\u6761\u8fb9\u548c\u8d77\u59cb\u8fb9\u6bd4\u8f83\n\n![\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/20210323180138179.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4OTQ0MTYz,size_16,color_FFFFFF,t_70)\n\n\u8bbe$A(x1,y1),B(x2,y2),C(x3,y3),D(x4,y4),P(x,y)$\n\n\n\u6ce8\uff1a\u4ee5\u4e0b\u7ebf\u6bb5\u5747\u4e3a\u5411\u91cf\n\n$AB=(x2-x1,y2-y1),CD=(x4-x3,y4-y3)$\n\n$AP=(x-x1,y-y1),CP=(x-x3,y-y3)$\n\n$S_{\\Delta ABP}<S_{\\Delta CDP}$\n\n\u53ef\u5f97\n\n$AB \\times AP < CD \\times CP$\n\n\u4ee3\u5165\n\n$(x2-x1)(y-y1)-(y2-y1)(x-x1)<(x4-x3)(y-y3)-(y4-y3)(x-x3)$\n\n\u5c55\u5f00\n\n$$(x2-x1+x3-x4)y-(y2-y1-y4+y3)x+(-x2y1+x1y2+x4y3-x3y4)<0$$\n\n$Ax+By+C<0$\n\n$By<-Ax-C$\n\n\u5173\u4e8e\u5b9e\u73b0\u65b9\u9762\u6211\u548c\u697c\u4e0a\u7684\u5927\u4f6c\u4e0d\u592a\u4e00\u6837\uff0c\u4ed6\u4eec\u7684\u8fb9\u662f\u7528\u4e00\u4e2a\u70b9+\u4e00\u4e2a\u5411\u91cf\u8868\u793a\u7684\n\n\u6211\u7684\u662f\u7528\u4e24\u4e2a\u70b9\u8868\u793a\u7684\uff0c\u6240\u4ee5\u5728\u786e\u5b9a\u7b2c\u4e00\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u76f4\u63a5\u4ee3\u5165$x$\u6216$y$\u7684\u96f6\u70b9\uff0c\u800c\u7b2c\u4e8c\u70b9\u5fc5\u987b\u8981\u7528\u7b2c\u4e00\u4e2a\u786e\u5b9a\u7684\u70b9\u52a0\u4e0a\u4e00\u4e2a\u5411\u91cf\u540e\u7684\u70b9\u6765\u8868\u793a\n\n\ncode:\n```cpp\n#include<bits/stdc++.h>\n#define db double\n#define N 800005\nusing namespace std;\nconst db eps = 1e-14;\nstruct A {\n\tdb x, y;\n\tA operator + (const A &a) const {\n\t\treturn (A){x + a.x, y + a.y};\n\t}\n\tA operator - (const A &a) const {\n\t\treturn (A){x - a.x, y - a.y};\n\t}\n\tA operator * (const double &a) const {\n\t\treturn (A){x * a, y * a};\n\t}\n} a[N];\nA pt(db x, db y) {\n\treturn A{x, y};\n}\nstruct LI {\n\tA a, b;\n\tdouble k;\n\tLI() {}\n\tLI(A x, A y) {\n\t\ta = x, b = y;\n\t\tA d = b - a;\n\t\tk = atan2(d.y, d.x);//\u7b97\u4e24\u4e2a\u70b9\u8fde\u7ebf\u7684\u659c\u7387\n\t}\n} ls[N], L[N];\ndb dis(A x) {\n\treturn sqrt(x.x * x.x + x.y * x.y);\n}\ndb cha(A x, A y) {\n\treturn x.x * y.y - x.y * y.x;\n}\nint check(A a, LI b) {\n\treturn cha(a - b.a, b.b - a) > eps;\n}\nA getp(LI a, LI b) {\n\tdouble k = cha(b.b - b.a, a.a - b.a) / cha(a.b - a.a, b.b - b.a);\n\treturn a.a + (a.b - a.a) * k;\n}\nint cmp(LI x, LI y) {\n\tif(fabs(x.k - y.k) > eps) return x.k < y.k;\n\treturn cha(y.a - x.a, x.b - y.a) > eps;\n}\nint n, q[N];\nint main() {\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i <= n; i ++) scanf(\"%lf%lf\", &a[i].x, &a[i].y);\n\ta[n + 1] = a[1];\n\tdouble anss = 0;\n\tfor(int i = 1; i <= n; i ++) {\n\t\tanss += cha(a[i] - a[1], a[i + 1] - a[1]);//\u8ba1\u7b97\u51f8\u5305\u603b\u9762\u79ef\n\t\tL[i] = LI(a[i], a[i + 1]);\n\t}\n\tint m = n;\n\tfor(int i = 2; i <= m; i ++) { //Ax + By + C < 0\n\t\tdb A = a[1].y - a[2].y + a[i + 1].y - a[i].y;\n\t\tdb B = a[2].x - a[1].x + a[i].x - a[i + 1].x;\n\t\tdb C = - a[2].x * a[1].y + a[1].x * a[2].y + a[i + 1].x * a[i].y - a[i].x * a[i + 1].y;\n\t\tif(fabs(B) < eps) L[++ n] = LI(pt(- C / A, 0), pt(- C / A - B, A));\n\t\telse L[++ n] = LI(pt(0, - C / B), pt(- B, - C / B + A));//\u52a0\u5165\u76f4\u7ebf\n\t}\n\t\n\tsort(L + 1, L + 1 + n, cmp);\n\tint sz = 0; ls[++ sz] = L[1];\n\tfor(int i = 2; i <= n; i ++)//\u53bb\u91cd\n\t\tif(L[i].k != L[i - 1].k) ls[++ sz] = L[i];\n\tfor(int i = 1; i <= sz; i ++) L[i] = ls[i];\n\tn = sz; \n\t\n\t//\u4e0b\u9762\u662f\u534a\u5e73\u9762\u4ea4\u677f\u5b50\n\tint l = 1, r = 0;\n\tfor(int i = 1; i <= n; i ++) {\n\t\twhile(l < r && check(a[r], L[i])) r --;\n\t\twhile(l < r && check(a[l + 1], L[i])) l ++;\n\t\tq[++ r] = i;\n\t\tif(l < r) a[r] = getp(L[q[r - 1]], L[q[r]]); \n\t}\n\twhile(l < r && check(a[r], L[q[l]])) r --;\n\twhile(l < r && check(a[l + 1], L[q[r]])) l ++;\n\ta[l] = getp(L[q[r]], L[q[l]]);\n\n\tdouble ans = 0;\n\tfor(int i = l + 1; i < r; i ++) ans += cha(a[i] - a[l], a[i + 1] - a[l]);\n\tprintf(\"%.4lf\", ans / anss);\n\treturn 0;\n}\n\n```\n\n\u8981\u5b66\u4f1a\u8f6c\u6362\uff0c\u6562\u53bb\u63a8\u5f0f\u5b50\n\n",
        "postTime": 1616501634,
        "uid": 31656,
        "name": "lomit",
        "ccfLevel": 8,
        "title": "P4250 [SCOI2015]\u5c0f\u51f8\u60f3\u8dd1\u6b65"
    },
    {
        "content": "### \u9898\u610f\u63cf\u8ff0\uff1a\n\n\u7ed9\u4f60\u4e00\u4e2a\u51f8\u591a\u8fb9\u5f62\uff0c\u5176\u9876\u70b9\u4e3a $A_i$, \u4f60\u4ece\u591a\u8fb9\u5f62\u5185\u90e8\u4efb\u9009\u4e00\u4e2a\u70b9 $p$, \u6c42 \u6ee1\u8db3 $S_{\\Delta PA_0A_1} \\leq S_{\\Delta PA_iA_{i+1}}$ \u7684\u6982\u7387\u3002\n\n\n### \u9898\u89e3\uff1a\n\n\u770b\u9898\u89e3\u91cc\u9762\u597d\u50cf\u6ca1\u6709\u51e0\u7bc7\u628a\u67ff\u5b50\u5b8c\u5168\u5199\u51fa\u6765\u7684\u3002\n\n\u90a3\u4e48\u6211\u6765\u8865\u4e00\u7bc7\u6709\u5b8c\u6574\u7684\u63a8\u5bfc\u8fc7\u7a0b\u7684\u9898\u89e3\uff08\u8bdd\u8bf4\u5199\u8fd9\u4e48\u591a\u7684\u516c\u5f0f\u597d\u7d2f\u4e86\u554a\uff09\u3002\n\n\u7531\u9898\u610f\u53ef\u5f97\uff1a $S_{\\Delta PA_0A_1} < S_{\\Delta PA_iA_{i+1}}$\n\n\u7136\u540e\u5c31\u5f00\u59cb\u66b4\u529b\u5c55\u5f00\uff0c\u63a8\u67ff\u5b50\u3002\n\n$\\vec {A_0A_1} \\times \\vec{A_0P} <\\vec{A_iA_{i+1}} \\times \\vec {A_iP}$\uff08\u6ee1\u8db3\u53c9\u79ef\u90fd\u662f\u6b63\u7684\uff09\n\n\u8bbe $P = (x,y) $ , $A_i = (x_i,y_i)$ ,\u5219\u6709\uff1a\n\n$(x_1-x_0,y_1-y_0) \\times (x-x_0,y-y_0) < (x_{i+1}-x_i,y_{i+1}-y_i) \\times (x-x_i,y-y_i)$\n\n$(x_1-x_0)(y-y_0) - (x-x_0)(y_1-y_0) < (x_{i+1}-x_i)(y-y_i) - (x-x_i) (y_{i+1}-y_i)$\n\n$x_1y-x_1y_0-x_0y+x_0y_0 - (xy_1-xy_0-x_0y_1+x_0y_0) < x_{i+1}y - x_{i+1}y_i- x_iy + x_iy_i - (xy_{i+1} - xy_i - x_{i}y_{i+1} + x_iy_i)$\n\n$x_1y-x_1y_0-x_0y-xy_1+xy_0+x_0y_1 < x_{i+1}y-x_{i+1}y_i - x_iy - xy_{i+1} + xy_i + x_iy_{i+1} $\n\n$(y_0-y_1) x  + (x_1-x_0)y + x_0y_1 - x_1y_0 < (y_i-y_{i+1})x + (x_{i+1}-x_i)y + x_iy_{i+1} -x_{i+1}y_i $\n\n$(y_0-y_1-y_i+y_{i+1})x + (x_1-x_0-x_{i+1}+x_i)y + x_0y_1-x_1y_0 + x_{i+1}y_{i} - x_iy_{i+1} < 0$\n\n$(y_1-y_0-y_{i+1}+y_i) x + (x_0-x_1 - x_i+x_{i+1})y + x_1 y_0-x_0y_1 + x_{i}y_{i+1} - x_{i+1}y_{i} > 0$\n\n\u5f88\u663e\u7136\u8fd9\u662f\u4e2a\u534a\u5e73\u9762\u4ea4\u7684\u5f62\u5f0f\u3002\n\n\u90a3\u4e48\u5408\u6cd5\u7684 $p$ \u7684\u533a\u57df\u5c31\u662f\u534a\u5e73\u9762\u7684\u4ea4\u3002\n\n\u6700\u540e\u7684\u7b54\u6848\u5c31\u662f\u591a\u8fb9\u5f62\u9762\u79ef\u9664\u4ee5\u534a\u5e73\u9762\u4ea4\u533a\u57df\u7684\u9762\u79ef\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\nusing namespace std;\nconst int N = 2e5+10;\nconst double eps = 1e-8;\nint n,l,r,cnt,top;\ndouble ans1,ans2;\nstruct point\n{\n    double x,y;\n    point(){}\n    point(double a,double b){x = a, y = b;}\n}p[N],sta[N],Ans[N];\ntypedef point Vector;\nstruct line\n{\n    point x,v;\n    double ang;\n    line(){}\n    line(point a,point b)\n    {\n        x = a; v = b;\n        ang = atan2(b.y,b.x);\n    }\n}L[N],q[N];\nint dcmp(double x)\n{\n    if(fabs(x) < eps) return 0;\n    return x > 0 ? 1 : -1;\n}\npoint operator + (point a,point b){return point(a.x+b.x,a.y+b.y);}\npoint operator - (point a,point b){return point(a.x-b.x,a.y-b.y);}\npoint operator * (point a,double k){return point(a.x*k,a.y*k);}\ndouble Dot(point a,point b){return a.x*b.x+a.y*b.y;}\ndouble Cro(point a,point b){return a.x*b.y-a.y*b.x;}\ndouble dis(point a,point b){return sqrt((a.x-b.x)*(a.x-b.x) + (a.y-b.y)*(a.y-b.y));}\nbool OnRight(point p,line s){return dcmp(Cro(p-s.x,s.v)) >= 0;}\npoint Root_LL(line a,line b)\n{\n    Vector v = a.v, u = b.v, w = a.x-b.x;\n    double t = Cro(w,u) / Cro(u,v);\n    return a.x + v * t;\n}\nbool comp(line a,line b)\n{\n    if(dcmp(a.ang-b.ang) == 0) return OnRight(b.x,a);\n    return a.ang < b.ang;\n}\nvoid HPI()\n{\n    sort(L+1,L+cnt+1,comp);\n    l = 1, r = 1, q[1] = L[1];\n    for(int i = 2; i <= cnt; i++)\n    {\n        if(dcmp(L[i].ang-L[i-1].ang) == 0) continue;\n        while(l < r && OnRight(sta[r-1],L[i])) r--;\n        while(l < r && OnRight(sta[l],L[i])) l++;\n        q[++r] = L[i];\n        if(l < r) sta[r-1] = Root_LL(q[r],q[r-1]);\n    }\n    while(l < r && OnRight(sta[r-1],q[l])) r--;\n    while(l < r && OnRight(sta[l],q[r])) l++;\n    sta[r] = Root_LL(q[l],q[r]);\n    for(int i = l; i <= r; i++) Ans[++top] = sta[i];\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i = 0; i < n; i++) scanf(\"%lf%lf\",&p[i].x,&p[i].y);\n    for(int i = 1; i < n; i++) ans1 += Cro(p[i]-p[0],p[(i+1)%n]-p[0]);\n    for(int i = 0; i < n; i++) L[++cnt] = line(p[i],p[(i+1)%n]-p[i]);\n    for(int i = 1; i < n; i++)\n    {\n        int t = (i+1) % n;\n        double A = p[0].y - p[1].y - p[i].y + p[t].y;\n        double B = p[1].x - p[0].x - p[t].x + p[i].x;\n        double C = p[0].x * p[1].y - p[1].x * p[0].y + p[t].x * p[i].y - p[i].x * p[t].y;\n        if(dcmp(B) == 0) L[++cnt] = line(point(-C/A,0),point(-B,A));\n        else L[++cnt] = line(point(0,-C/B),point(-B,A));\n    }\n    HPI();\n    for(int i = 2; i < top; i++) ans2 += Cro(Ans[i]-Ans[1],Ans[i+1]-Ans[1]);\n    printf(\"%.4lf\\n\",ans2/ans1);\n    return 0;\n}\n```\n\n",
        "postTime": 1612014117,
        "uid": 248896,
        "name": "genshy",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4250 \u3010[SCOI2015]\u5c0f\u51f8\u60f3\u8dd1\u6b65\u3011"
    },
    {
        "content": "# P4250\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P4250) \n\n\u7a0d\u5fae\u8bb2\u70b9\u7ec6\u8282\u3002\n\n\u9898\u610f\uff1a\u7ed9\u51fa\u4e00\u4e2a\u51f8\u591a\u8fb9\u5f62\uff0c\u70b9\u6309 $0$ ~ $n-1$ \u9006\u65f6\u9488\u7f16\u53f7\uff0c\u73b0\u5728\u6709\u4e00\u4e2a\u591a\u8fb9\u5f62\u5185\u7684\u968f\u673a\u70b9 $P$ \uff0c\u5bf9\u4e8e\u4efb\u610f\u7684 $\\triangle PP_iP_{i-1}$ \u5747\u6ee1\u8db3\n$$\nS_{\\triangle PP_0P_1}< S_{\\triangle PP_{i}P_{i-1} }\n$$\n\u6c42\u6ee1\u8db3\u6761\u4ef6\u7684\u6982\u7387\u3002\u6309\u7167\u51e0\u4f55\u6982\u578b\u5b9e\u9645\u4e0a\u5c31\u662f\u6c42\u6ee1\u8db3\u6761\u4ef6\u7684\u533a\u57df\u5360\u603b\u9762\u79ef\u7684\u6bd4\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/xqtjdvtt.png)\n\n\u6240\u4ee5\u53ef\u77e5\n$$\n\\begin{aligned}\n\n\\overrightarrow{PP_{0}}\\times\\overrightarrow{PP_{1}}&<\n\\overrightarrow{PP_{i-1}}\\times \\overrightarrow{PP_{i}}\\\\\n(x_{0}-x,y_0-y)\\times(x_{1}-x,y_1-y)&<\n(x_{i-1}-x,y_{i-1}-y)\\times(x_{i}-x,y_{i}-y)\\\\\n\\end{aligned}\n$$\n~~\u5bb9\u6613~~\u6574\u7406\u5f97\uff08\u5c31\u55ef\u7b97\u6ca1\u5565\u6280\u5de7\uff0c\u6240\u4ee5\u8fc7\u7a0b\u4e0d\u5199\u4e86QwQ\uff09\n$$\n(y_0+y_i-y_1-y_{i-1})x+(x_1+x_{i-1}-x_0-x_i)y+x_0y_1+x_iy_{i-1}-x_1y_0-x_{i-1}y_i< 0\n$$\n\u662f\u76f4\u7ebf\u534a\u5e73\u9762\u7684\u4e00\u822c\u5f62\u5f0f\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u6211\u4eec\u7b80\u5355\u8bb0\u4e3a $Ax+By+C<0 \\Rightarrow By<-Ax-C$\u3002\n\n\u6240\u4ee5\u5bf9\u6240\u6709\u534a\u5e73\u9762\u6c42\u534a\u5e73\u9762\u4ea4\u5373\u53ef\u3002\n\n\u4e3a\u4e86\u907f\u514d\u7cbe\u5ea6\u5dee\uff0c\u6211\u4eec\u7528\u70b9\u4e0e\u5411\u91cf\u6765\u8bb0\u5f55\u4e00\u6761\u76f4\u7ebf\uff0c\u5411\u91cf\u5de6\u4fa7\u7684\u7a7a\u95f4\u5c31\u662f\u8fd9\u4e2a\u76f4\u7ebf\u5bf9\u5e94\u7684\u7684\u534a\u5e73\u9762\uff0c\u6240\u4ee5\u5411\u91cf\u65b9\u5411\u4e0d\u540c\u4f1a\u5f71\u54cd\u7b54\u6848\u6b63\u786e\u6027\u3002\u56e0\u6b64\u7ec6\u8282\u5728\u4e8e\u5b9e\u73b0\u89e3\u6790\u5f0f\u8f6c $l=\\{P,\\mathbf v\\}$\u3002\u5148\u5bf9 $B$ \u7684\u60c5\u51b5\u5206\u7c7b\u8ba8\u8bba\u3002\n\n**1\u3001$B$ \u4e0d\u4e3a $0$ \u3002**\n\n\u4e8e\u662f\u76f4\u7ebf\u4e0d\u4e0e $y$ \u8f74\u5e73\u884c\uff0c\u53ef\u77e5 $(0,-\\frac{C}{B})$ \u4e0e $(-B,-\\frac{C}{B}+A)$  \u4e3a\u76f4\u7ebf\u4e0a\u4e24\u70b9\u3002\n\n\u8ba8\u8bba\u5411\u91cf\u7684\u65b9\u5411\u3002\u8bb0\u5411\u91cf\u89d2\u4e3a $\\theta$ \u3002\u539f\u5f0f $By<-Ax-C$ \uff0c\n\n\u5f53 $B>0$ \u5bf9\u5e94\u4e0b\u5e73\u9762\uff0c\u5e94\u6ee1\u8db3 $\\theta \\in (\\frac{\\pi}{2},\\frac{3\\pi}{2})$ \uff1b $B<0$ \u65f6\u4e3a\u76f4\u7ebf\u4e0a\u5e73\u9762\uff0c\u56e0\u6b64 $\\theta \\in (-\\frac{\\pi}{2},\\frac{\\pi}{2})$\u3002\n\n\u56e0\u6b64\u8fd9\u4e2a\u76f4\u7ebf\u8981\u6ee1\u8db3\uff1a$B\\cos\\theta<0$\u3002\u6839\u636e\u8fd9\u4e2a\u8c03\u6574\u5411\u91cf\u7684\u65b9\u5411\u3002\n\n**2\u3001$B$ \u4e3a $0$\uff08\u4e00\u5b9a\u8981\u8ba8\u8bba\u8fd9\u79cd\u60c5\u51b5\uff0c\u4e0d\u7136\u4f1a\u9519\uff09**\n\n\u76f4\u7ebf\u4e0e $y$ \u8f74\u5e73\u884c\uff0c\u6b64\u65f6\u7ecf\u8fc7\u70b9 $(-\\frac{C}{A},0)$\u3002\u539f\u5f0f $Ax<-C$\u3002\n\n\u5f53 $A>0$ \u65f6\u5bf9\u5e94\u76f4\u7ebf\u5de6\u5e73\u9762\uff0c\u56e0\u6b64\u5411\u91cf\u6307\u5411 $\\frac{\\pi}{2}$ \u89d2\uff1b\n\n\u5f53 $A<0$ \u65f6\u5bf9\u5e94\u76f4\u7ebf\u53f3\u5e73\u9762\uff0c\u56e0\u6b64\u5411\u91cf\u6307\u5411 $\\frac{3\\pi}{2}$ \u3002\n\n\u56e0\u6b64\u8981\u6ee1\u8db3 $A\\sin\\theta>0$\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u677f\u5b50\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int maxn=4e5+5;\nconst double eps=1e-20;\n#define Point complex<double>\n#define Vector Point\n#define Polygon vector<Point>\n#define pb push_back\n#define X real()\n#define Y imag()\n\ndouble cross(Vector u,Vector v){\n    return u.X*v.Y-u.Y*v.X;\n}\nint sgn(double x){\n    return x<-eps?-1:x>eps;\n}\n\nstruct Line{\n    Point p;Vector v;double a;\n    Line(Point p=0,Vector v=0):v(v),p(p){\n        a=arg(v);\n    }\n};\n\nbool cmp(Line a,Line b){\n    if(fabs(a.a-b.a)>eps) return a.a<b.a;\n    return cross(b.p-a.p,a.v)>0;\n}\n\nLine l[maxn];int cnt;\n\nbool on_left(Point p,Line l){\n    return sgn(cross(l.v,p-l.p))>0;\n}\n\nvoid line_inter(Line a,Line b,Point &p){\n    double c=cross(a.v,b.v);\n    if(sgn(c)==0) return;\n    p=a.p+a.v*cross(b.v,a.p-b.p)/c;\n}\n\nvoid halfplane_inter(Polygon &g){\n    vector<Point> q(cnt);\n    sort(l,l+cnt,cmp);\n    int head=0,tail=0;\n    for(int i=1;i<cnt;i++){\n        if(!sgn(l[i].a-l[i-1].a)) continue;\n        while(head<tail&&!on_left(q[tail-1],l[i])) tail--;\n        while(head<tail&&!on_left(q[head],l[i])) head++;\n        l[++tail]=l[i];\n        if(head<tail) line_inter(l[tail-1],l[tail],q[tail-1]);\n    }\n    while(head<tail&&!on_left(q[tail-1],l[head])) tail--;\n    if(head<tail) line_inter(l[tail],l[head],q[tail]);\n    g.assign(q.begin()+head,q.begin()+tail+1);\n}\n\ndouble polygon_area(Polygon &g){\n    double ret=0;\n    for(int i=0;i<g.size()-1;i++){\n        ret+=cross(g[i]-g[0],g[i+1]-g[0]);\n    }\n    ret/=2;return ret;\n}\n\nint n;\nPolygon p,g;\n\nint main(){\n#ifdef LOCAL\n    freopen(\"in.in\",\"r\",stdin);\n    freopen(\"out.out\",\"w\",stdout);\n#endif\n    scanf(\"%d\",&n);\n    for(int i=0;i<n;i++){\n        double x,y;\n        scanf(\"%lf%lf\",&x,&y);\n        p.pb(Point(x,y));\n    }\n    p.pb(p[0]);\n    for(int i=2;i<=n;i++){\n        double A=p[0].Y+p[i].Y-p[1].Y-p[i-1].Y;\n        double B=-(p[0].X+p[i].X-p[1].X-p[i-1].X);\n        double C=p[0].X*p[1].Y+p[i].X*p[i-1].Y-p[1].X*p[0].Y-p[i-1].X*p[i].Y;\n        if(!sgn(B)){\n            Point p1(-C/A,0);\n            Vector v(0,A);\n            if(sgn(A*sin(arg(v)))<0) v=-v;\n            l[cnt++]=Line(p1,v);\n        }else{\n            Point p1(0,-C/B);\n            Vector v(-B,A);\n            if(sgn(cos(arg(v))*B)>0) v=-v;\n            l[cnt++]=Line(p1,v);\n        }\n    }\n    for(int i=0;i<n;i++){\n        l[cnt++]=Line(p[i],p[i+1]-p[i]);\n    }\n    p.pop_back();\n    halfplane_inter(g);\n    double S=polygon_area(p);double s=polygon_area(g);\n    if(s<0.0) puts(\"0.0000\");\n    else printf(\"%.4lf\",s/S);\n}\n```",
        "postTime": 1646488758,
        "uid": 134623,
        "name": "HyperSQ",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011P4250 [SCOI2015]\u5c0f\u51f8\u60f3\u8dd1\u6b65"
    },
    {
        "content": "\u6e38\u620f\u7684\u6b21\u6570\u662f\u5565....\u8fd9\u597d\u50cf\u548c\u4e00\u6b21\u7684\u6982\u7387\u6ca1\u5565\u5173\u7cfb\uff08\n\n## \u89e3\u6790\n\n\u6211\u4eec\u5148\u8003\u8651\u5bf9\u4e24\u6761\u8fb9\u600e\u4e48\u9009\u70b9\u624d\u53ef\u4f7f\u8fde\u63a5\u51fa\u7684\u4e09\u89d2\u5f62\u6ee1\u8db3\u6761\u4ef6\uff1a\n\n\u9996\u5148\u8bd5\u56fe\u627e\u5230\u6b63\u597d\u4f7f\u4e24\u4e2a\u4e09\u89d2\u5f62\u9762\u79ef\u76f8\u7b49\u7684\u70b9\u7684\u96c6\u5408\uff1b\u5176\u4e2d\u4fdd\u8bc1\u6709\u8fd9\u6837\u7684\u70b9\u662f\u5f88\u663e\u7136\u7684\uff1a\n\n![1](https://cdn.luogu.com.cn/upload/image_hosting/15mb61cn.png)\n\n\uff08\u6709\u70b9\u5c0f\u8bef\u5deeQAQ\uff09\n\n\u7531\u4e8e\u7ebf\u6bb5\u957f\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u5173\u5fc3\u5782\u7ebf\u6bb5\u7684\u957f\u5ea6\uff1b\u800c\u5782\u7ebf\u6bb5\u957f\u5219\u53d6\u51b3\u4e8e\u5782\u7ebf\u548c\u7ebf\u6bb5\u5ef6\u4f38\u7684\u76f4\u7ebf\u7684\u4ea4\u70b9\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u4e24\u6761\u7ebf\u6bb5\uff0c\u8fd9\u6837\u7684\u4ea4\u70b9\u5e94\u8be5\u90fd\u662f\u5448**\u4e00\u6b21\u51fd\u6570\u5173\u7cfb**\u7684\uff1b\u56e0\u6b64\u53ef\u4ee5\u731c\u60f3\u6211\u4eec\u6240\u6709\u7684\u70b9\u96c6\u4e5f\u662f\u5728**\u4e00\u6761\u76f4\u7ebf**\u4e0a\u3002\n\n&nbsp;\n\n\u5f97\u5230\u65b9\u5411\u540e\uff0c\u6211\u4eec\u5c1d\u8bd5\u66b4\u529b\u63a8\u4e00\u6ce2\u5f0f\u5b50\uff1a\n\n![2](https://cdn.luogu.com.cn/upload/image_hosting/esm7smrf.png)\n\n\u9996\u5148\u62c6\u5f00\u63a8\u4e00\u4e0b\u53ef\u4ee5\u53d1\u73b0\u4ee5\u4e0b\u7ed3\u8bba\uff1a\n\n$(\\vec{u}\\pm\\vec{v})\\times \\vec{w}=\\vec{u}\\times\\vec{w}\\pm\\vec{v}\\times\\vec{w}$\n\n\uff08\u201c$\\times$\u201d \u6307\u53c9\u79ef\uff0c\u53c9\u79ef\u5de6\u53f3\u5143\u7d20\u4ea4\u6362\u4e00\u4e0b\u8fd9\u4e2a\u5f0f\u5b50\u4e5f\u9002\u7528\uff09\n\n\u539f\u6765\u7684\u5f0f\u5b50\u662f\n\n$\\overrightarrow{AB}\\times(\\vec{P}-\\vec{A})<\\overrightarrow{CD}\\times(\\vec{P}-\\vec{C})$\n\n\u56e0\u4e3a\u53ea\u6c42\u8fb9\u754c\uff0c\u6211\u4eec\u6539\u6210\u7b49\u53f7\uff1a\n\n$\\overrightarrow{AB}\\times(\\vec{P}-\\vec{A})=\\overrightarrow{CD}\\times(\\vec{P}-\\vec{C})$\n\n$\\overrightarrow{AB}\\times\\vec{P}-\\overrightarrow{AB}\\times\\vec{A}=\\overrightarrow{CD}\\times\\vec{P}-\\overrightarrow{CD}\\times\\vec{C}$\n\n$\\overrightarrow{AB}\\times\\vec{P}-\\overrightarrow{CD}\\times\\vec{P}-\\overrightarrow{AB}\\times\\vec{A}+\\overrightarrow{CD}\\times\\vec{C}=0$\n\n$(\\overrightarrow{AB}-\\overrightarrow{CD})\\times\\vec{P}-\\overrightarrow{AB}\\times\\vec{A}+\\overrightarrow{CD}\\times\\vec{C}=0$\n\n\u63a8\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u5176\u5b9e\u5df2\u7ecf\u53ef\u4ee5\u53d1\u73b0\u70b9 $P$ \u7684 $y$ \u5750\u6807\u662f\u5173\u4e8e\u5176 $x$ \u5750\u6807\u7684\u4e00\u6b21\u51fd\u6570\u4e86\u3002\n\n\u60f3\u8981\u63a5\u7740\u5f80\u4e0b\u63a8\uff0c\u5c31\u5fc5\u987b\u5f97\u62c6\u51fa\u70b9\u5750\u6807\uff1a\n\n\u8bbe $c=-\\overrightarrow{AB}\\times\\vec{A}+\\overrightarrow{CD}\\times\\vec{C}$\n\n\u53ef\u5f97 $(x_{AB}-x_{CD})y_P-(y_{AB}-y_{CD})x_P+c=0$\n\n\u4e8e\u662f\u5bf9\u4e8e\u8fd9\u4e24\u6761\u8fb9\uff0c\u70b9 $P$ \u7684\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u70b9\u5750\u6807\u5373\u4e3a\n\n$(y_{CD}-y_{AB})x_P+(x_{AB}-x_{CD})y_P+c<0$\n\n\u4e14\u6ee1\u8db3\u5728\u51f8\u5305\u5185\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\u8fd9\u5c31\u662f\u4e00\u6761\u76f4\u7ebf\u7684\u534a\u5e73\u9762\uff08\u6700\u540e\u8fd8\u8981\u52a0\u4e0a\u51f8\u5305\u9650\u5236\uff09\u3002\n\n&nbsp;\n\n\u5bf9\u4e8e\u51f8\u5305\u6240\u6709\u7684\u8fb9\uff0c\u6211\u4eec\u90fd\u6309\u4e0a\u8ff0\u65b9\u6cd5\u6c42\u4e00\u904d\uff0c\u5e76\u628a\u6240\u6709\u6c42\u5f97\u7684\u76f4\u7ebf\u52a0\u4e0a\u51f8\u5305\u8fb9\u7684\u9650\u5236\u653e\u8fdb\u534a\u5e73\u9762\u4ea4\u8dd1\u4e00\u8dd1\uff0c\u5c31\u5f97\u5230\u4e86\u6240\u6709\u53ef\u80fd\u7684\u7ad9\u4f4d\u3002\u800c\u8fd9\u4e2a\u7ad9\u4f4d\u96c6\u5408\u9664\u4ee5\u51f8\u5305\u9762\u79ef\uff0c\u5c31\u662f\u4e00\u6b21\u7ad9\u4f4d\u5408\u6cd5\u7684\u6982\u7387\u3002\n\n---\n\n\u53e6\u5916\uff0c\u5982\u679c\u76f4\u63a5\u7528\u89e3\u6790\u6cd5\u6c42\u4e24\u4e2a\u70b9\u7cbe\u5ea6\u8bef\u5dee\u53ef\u80fd\u4f1a\u8f83\u5927\uff0c\u5176\u5b9e\u5bf9\u4e8e\u7b2c\u4e8c\u4e2a\u70b9\u6211\u4eec\u6709\u66f4\u597d\u7684\u529e\u6cd5\uff1a\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u5bf9 $x$ \u6216 $y$ \u53d6\u7279\u503c $0$\uff0c\u4e8e\u662f\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u6c42\u51fa\u7b2c\u4e00\u4e2a\u70b9\u3002\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\uff0c\u5bf9\u4e8e $ax+by+c=0$\uff0c\u5176\u4e2d\u6240\u6709\u53d8\u91cf\u5747\u786e\u5b9a\uff0c\u5982\u679c\u6211\u4eec\u5c06 $x$ \u52a0\u4e0a $\\pm b$\uff0c\u5c06 $y$ \u52a0\u4e0a $\\mp a$\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u4ecd\u6210\u7acb\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5**\u4e0d\u7528\u4e58\u9664\u5730**\u6c42\u51fa\u7b2c\u4e8c\u4e2a\u70b9\u3002\n\n\u81f3\u4e8e\u7a76\u7adf\u662f $(x+b), (y-a)$ \u8fd8\u662f $(x-b), (y+a)$\uff0c\u6211\u4eec\u5148\u753b\u4e00\u5f20\u56fe\u770b\u770b\uff1a\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/wyyezwpb.png)\n\n\uff08\u56fe\u4e2d\u7684\u89e3\u6790\u5f0f\u5e94\u4e3a $Ax+By+c=0$\uff0c\u5176\u4e2d $A, B$ \u4e3a\u6b63\u5b9e\u6570\uff09\n\n\u5047\u8bbe\u6211\u4eec\u6700\u540e\u505a\u7684\u662f\u5de6\u534a\u5e73\u9762\u4ea4\uff0c\u663e\u7136 $(x+b), (y-a)$ \u662f $\\overrightarrow{QP}$\uff0c\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\uff1b\u800c $(x-b), (y+a)$ \u662f $\\overrightarrow{PQ}$\uff0c\u753b\u51fa\u56fe\u50cf\u53ef\u4ee5\u53d1\u73b0\u662f\u5bf9\u7684\u3002\n\n\uff08\u5982\u679c\u662f\u53f3\u534a\u5e73\u9762\u4ea4...\u90a3\u53cd\u4e00\u4e0b\u5c31\u884c\u4e86\uff09\n\n&nbsp;\n\n\u6700\u540e\u518d\u624b\u73a9\u4e00\u4e0b\u51e0\u79cd\u7279\u6b8a\u60c5\u51b5\u53d1\u73b0\u90fd\u662f\u6b63\u786e\u7684...\u4e8e\u662f\u5c31\u53ef\u4ee5\u4e86\u3002\uff08\u8bdd\u8bf4\u8bb8\u591a\u8ba1\u7b97\u51e0\u4f55\u7684\u77aa\u773c\u601d\u8def\u90fd\u662f\u6309\u4e00\u5f20\u4e00\u822c\u60c5\u51b5\u7684\u56fe\u505a\uff0c\u7136\u540e\u5bf9\u5404\u79cd\u7279\u6b8a\u60c5\u51b5\u6b63\u6b63\u53cd\u53cd\u6700\u540e\u603b\u662f\u6b63\u786e\u7684QAQ\uff09\n\n## CODE\n\n```cpp\n#include <cstdio>\n#include <cmath>\n#include <algorithm>\nusing std::sort;\nusing std::pair;\ntypedef pair<int, int> pad;\n\nconst int MAXN =3e5;\n\n/*------------------------------Computational geometry------------------------------*/\n\nconst double pi =acos(-1), eps =1e-6;\n\nstruct vect{\n\tdouble x, y;\n\tvect(){}\n\tvect(double xx, double yy):x(xx), y(yy){}\n\tdouble m(){ return sqrt(x*x+y*y); }\n\tvect operator + (vect v){ return vect(x+v.x, y+v.y); }\n\tvect operator - (vect v){ return vect(x-v.x, y-v.y); }\n\tvect operator * (double mu){ return vect(mu*x, mu*y); }\n\tdouble operator / (vect v){ return x*v.y-y*v.x; }/*\u53c9\u79ef*/\n};\n\nstruct line{\n\tvect u, v;\n\tdouble angle;\n\tline(){}\n\tline(vect uu, vect vv):u(uu), v(vv){ angle =atan2(vv.y-uu.y, vv.x-uu.x); }\n};\n\ninline short gtr(double a, double b){ return (a-b > eps); }\n\ninline bool eq(double a, double b){ return (a-b < eps && a-b > -eps); }\n\ninline bool onright(line f, vect w){ return (gtr((w-f.u)/(f.v-f.u), 0)); }\n\nvect getIntersection(line f, line g){\n\tdouble w =((g.u-f.u)/(f.u-f.v))/((f.u-f.v)/(g.u-g.v));\n\treturn g.u+(g.u-g.v)*w;\n}\n\nint cmp(line A, line B){\n\tif(eq(A.angle, B.angle)) return onright(B, A.u);/*\u6709\u5411\u76f4\u7ebf\u6700\u5de6\u7684\u5728\u6700\u540e\u9762\uff0c\u4f1a\u88ab\u4fdd\u7559*/\n\telse return (gtr(B.angle, A.angle));\n}\n\n/*\u6c42\u5de6\u534a\u5e73\u9762\u4ea4*/\ninline pad getHPI(line ls[], int totl, line hull[]){\n\tsort(ls, ls+totl, cmp);\n\tint l =0, r =0;\n\tfor(int i =0; i < totl; ++i){\n\t\twhile(i < totl-1 && eq(ls[i].angle, ls[i+1].angle)) ++i;\n\t\twhile(r-l > 1 && onright(ls[i], getIntersection(hull[r-1], hull[r-2]))) --r;\n\t\tif(r > 0 && eq(ls[i].angle-hull[r-1].angle, pi)) return pad(0, 0);/*\u5224\u65b9\u5411\u76f8\u53cd\u7684\u5e73\u884c*/\n\t\thull[r++] =ls[i];\n\t}\n\twhile(r-l > 1){\n        if(onright(hull[r-1], getIntersection(hull[l], hull[l+1]))) ++l;\n        else if(onright(hull[l], getIntersection(hull[r-1], hull[r-2]))) --r;\n        else break;\n    }\n\tif(r-l < 3) return pad(0, 0);\n\telse return pad(l, r);\n}\n\ninline double getS(line hull[], int toth){\n\thull[toth++] =hull[0];\n\tdouble S =0;\n\tvect v0 =getIntersection(hull[0], hull[1]), v1, v2 =getIntersection(hull[1], hull[2]);\n\tfor(int p =0; p+3 < toth; ++p){\n\t\tv1 =v2, v2 =getIntersection(hull[p+2], hull[p+3]);\n\t\tS +=(v1-v0)/(v2-v1);\n\t}\n\treturn S/2;\n}\n\n/*------------------------------Main------------------------------*/\n\nline ls[MAXN], hull[MAXN];\nint totl;\n\n/*\u57fa\u672c\u662f\u7167\u7740\u5f0f\u5b50\u5199\u7684 qwq*/\ninline line get(line f, line g){\n\tvect AB =f.v-f.u, CD =g.v-g.u;\n\t/*ax+by+c=0*/\n\tdouble a =CD.y-AB.y, b =AB.x-CD.x, c =-(AB/f.u)+CD/g.u;\n\tdouble x, y;\n\t/*\u907f\u514d\u6709\u7cfb\u6570\u4e3a 0*/\n\tif(eq(a, 0)) x =0, y =-c/b;\n\telse y =0, x =-c/a;\n\treturn line(vect(x, y), vect(x, y)+vect(-b, a));\n}\n\ninline int read(){\n\tint x =0; bool f =0; char c =getchar();\n\twhile(c < '0' || c > '9') (c == '-') ? f =1, c =getchar() : c =getchar();\n\twhile(c >= '0' && c <= '9') x = (x<<3) + (x<<1) + (48^c), c =getchar();\n\treturn (f) ? -x : x;\n}\n\nint main(){\n\tint n =read();\n\tvect fst, pre;\n\tfst.x =read(), fst.y =read(), pre =fst;\n\tfor(int i =0; i < n-1; ++i){\n\t\tvect rec;\n\t\trec.x =read(), rec.y =read();\n\t\tls[totl++] =line(pre, rec);\n\t\tpre =rec;\n\t}\n\tls[totl++] =line(pre, fst);\n\t\n\tdouble Sall =getS(ls, totl);\n\tfor(int i =1; i < n; ++i)\n\t\tls[totl++] =get(ls[0], ls[i]);\n\t/*\u539f\u6765\u7684\u591a\u8fb9\u5f62\u5df2\u7ecf\u4fdd\u8bc1\u9762\u79ef\u6709\u9650\u4e86\uff0c\u8fd9\u91cc\u4e0d\u7528\u52a0\u8fb9\u754c*/\n//\tls[totl++] =line(vect(MAX, MAX), vect(-MAX, MAX));\n//\t...\n\tpad Hull =getHPI(ls, totl, hull);\n\tif(Hull.second == 0) puts(\"0.000\");\n\telse printf(\"%.4lf\", getS(hull+Hull.first, Hull.second-Hull.first)/Sall);\n}\n```\n",
        "postTime": 1592958173,
        "uid": 105254,
        "name": "Piwry",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4250 \u3010[SCOI2015]\u5c0f\u51f8\u60f3\u8dd1\u6b65\u3011"
    },
    {
        "content": "\u778e\u641e\u5b8c\u4e86\u53d1\u73b0luogu\u4e0a\u8fd9\u9898\u8fd8\u6ca1\u6709\u9898\u89e3\n\u90a3\u6211\u5c31\u6765\u5199\u4e2a\u597d\u4e86\n\u6211\u4eec\u628a\u64cd\u573a\u7684\u6bcf\u4e00\u6761\u8fb9\u90fd\u8ddf01\u8fb9\u51d1\u4e00\u5bf9\u770b\u770b\n\u7136\u540e\u53d1\u73b0\u8981\u60f3\u548c01\u8fb9\u641e\u5f97\u4e09\u89d2\u5f62\u9762\u79ef\u6700\u5c0f\n\u662f\u8981\u6ee1\u8db3\u4e00\u4e2a\u5927\u5bb6\u90fd\u4f1a\u63a8\u4e0d\u7b49\u5f0f\u7684\n\u4e0d\u7b49\u5f0f\u76f4\u89c2\u7406\u89e3\u5c31\u662f\u4e00\u6839\u7ebf\uff0c\u53ea\u6709\u7ebf\u4e00\u4fa7\u7684\u4e00\u4e2a\u534a\u5e73\u9762\u662f\u6ee1\u8db3\u5979\u7684\n![\u56fe\u793a](https://cdn.luogu.com.cn/upload/pic/15367.png)\n\u5b8c\u4e86\u8fd9\u6574\u4e2a\u95ee\u9898\u5c31\u662f\u5728\u6c42\u4e00\u5806\u534a\u5e73\u9762\u548c\u591a\u8fb9\u5f62\u91cd\u53e0\u7684\u9762\u79ef\n\u7cca\u4e2a\u534a\u5e73\u9762\u4ea4\u4e0a\u53bb\u8fd9\u9898\u5c31\u641e\u5b9a\u4e86\n\u81f3\u4e8e\u5728\u591a\u8fb9\u5f62\u5185\u90e8\u8fd9\u4e2a\u9650\u5236...\u628a\u5404\u4e2a\u8fb9\u4e5f\u63d2\u8fdb\u53bb\u4e00\u8d77\u8dd1\u534a\u5e73\u9762\u4ea4\u5373\u53ef\n\u4e71\u7801\u4e03\u7cdf\u7684\u4ee3\u7801\\/\n```cpp\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\ntypedef double ddf;\nconst int N=200000+5;\nconst ddf eps=1e-7;\nconst ddf inf=1e10;\nnamespace FuckUall{\n    inline ddf sqr(ddf x){return x*x;}\nstruct node{\n    ddf x,y;\n    node(){}\n    node(ddf xx,ddf yy):x(xx),y(yy){};\n    void inp(){\n        scanf(\"%lf%lf\",&x,&y);\n    }\n    node operator + (const node& a)const{\n        return node(x+a.x,y+a.y);\n    }\n    node operator - (const node& a)const{\n        return node(x-a.x,y-a.y);\n    }\n    node operator * (const ddf& a)const{\n        return node(x*a,y*a);\n    }\n    node operator / (const ddf& a)const{\n        return node(x/a,y/a);\n    }\n    ddf operator * (const node& a)const{\n        return x*a.x+y*a.y;\n    }\n    ddf operator ^ (const node& a)const{\n        return x*a.y-y*a.x;\n    }\n    ddf operator | (const node& a)const{\n        return sqrt(sqr(x-a.x)+sqr(y-a.y));\n    }\n    ddf len(){\n        return sqrt(sqr(x)+sqr(y));\n    }\n    void roll(){\n        ddf xx=x,yy=y;\n        x=-yy,y=xx;\n    }\n};\nddf getang(node a){\n    return atan2(a.y,a.x);\n}\nbool fucked(ddf x,ddf y){\n    return fabs(x-y)<=eps;\n}\nstruct fuck{\n    node a,b;\n    fuck(){}\n    fuck(node a1,node a2){\n        a=a1,b=a2;\n    }\n};\nbool operator <(fuck a,fuck b){\n    return getang(a.b)<getang(b.b);\n}\nbool ifin(node a,fuck b){\n    return ((b.a-a)^b.b) >0;\n}\nnode asshole(fuck a,fuck b){\n    return a.a+a.b*(((b.a-a.a)^b.b)/(a.b^b.b));\n}\nnode a[N],b[N];\nfuck c[N],q[N];\nint cnt;\nddf all;\nint n;\nint l,r;\nint main(){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)a[i].inp();\n    a[n+1]=a[1];\n    for(int i=1;i<=n;i++)all+=(a[i]^a[i+1]);\n    for(int i=1;i<=n;i++){\n        c[++cnt]=fuck(a[i],a[i+1]-a[i]);\n        if(i!=1){\n            ddf v1=a[i].y-a[i+1].y-a[1].y+a[2].y;\n            ddf v2=a[i+1].x-a[i].x-a[2].x+a[1].x;\n            ddf v3=(a[i]^a[i+1])-(a[1]^a[2]);\n            c[++cnt]=fuck(node(v2?0:-v3/v1,v2?-v3/v2:0),node(v2,-v1));\n        }\n    }\n    sort(c+1,c+1+cnt);\n    \n    for(int i=1;i<=cnt;i++){\n        if(r-l<2){\n            q[r++]=c[i];\n            continue;\n        }\n        while(r-l>1&& !ifin(asshole(q[r-2],q[r-1]),c[i]))r--;\n        while(r-l>1&& !ifin(asshole(q[l  ],q[l+1]),c[i]))l++;\n        q[r++]=c[i];\n    }\n    while(r-l>1&& !ifin(asshole(q[r-2],q[r-1]),q[l]))r--;\n    q[r]=q[l];\n    q[l-1]=q[r-1];\n    ddf ass=0.0;\n    for(int i=l;i<r;i++){\n        ass+=asshole(q[i],q[i-1])^asshole(q[i],q[i+1]);\n    }\n    ass=fabs(ass);all=fabs(all);\n    printf(\"%.4lf\",ass/all);\n    return 0;\n}\n}\nint main(){\n    FuckUall::main();\n}\n/*\n5\n1 8\n0 7\n0 0\n8 0\n8 8\n-----------\n0.6316\n*/\n```",
        "postTime": 1520652635,
        "uid": 38725,
        "name": "xiwang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4250 \u3010[SCOI2015]\u5c0f\u51f8\u60f3\u8dd1\u6b65\u3011"
    }
]
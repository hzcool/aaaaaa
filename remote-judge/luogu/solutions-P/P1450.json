[
    {
        "content": "\u597d\u5de7\u5999\u7684\u4e00\u9053dp\u9898\uff01\n\n\u5982\u679c\u6211\u4eec\u5c31\u8d64\u88f8\u88f8\u7684\u591a\u91cd\u80cc\u5305\u90a3\u4e48\u5c31\u662fO(10^5\\*10^5\\*1000)\n\n\u4e00\u5468\u7684\u65f6\u95f4\u90fd\u8fd0\u884c\u4e0d\u5b8c\uff08\u624b\u52a8\u6ed1\u7a3d\uff09\uff01\n\n\u90a3\u4e48\u600e\u4e48\u529e\u5462\uff1f\u5982\u679c\u6ca1\u6709\u786c\u5e01\u6570\u91cf\u7684\u9650\u5236\u90a3\u5c31\u591a\u597d\u554a\uff1f\u76f4\u63a5\u4e00\u4e2a\u5b8c\u5168\u80cc\u5305\u9884\u5904\u7406\uff0c\u7136\u540eO(1)\u8f93\u51fa\u5c31\u597d\u4e86\n\n\u53ef\u662f\u6709\u4e86\u786c\u5e01\u7684\u9650\u5236\u600e\u4e48\u529e\uff1f\u6211\u4eec\u5148\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u4e00\u70b9\u7684\u60c5\u51b5\uff1a\u53ea\u6709\u7b2c\u4e00\u4e2a\u786c\u5e01\u6709\u9650\u5236\u3002\n\n\u5982\u679c\u6211\u4eec\u7528\u7c7b\u4f3c\u524d\u7f00\u548c\u7684\u601d\u60f3\uff08\u672f\u8bed\u53eb\u5dee\u5206\uff09\uff0c\u6211\u4eec\u5148\u5b8c\u5168\u80cc\u5305\u9884\u5904\u7406\u597d\u65e0\u9650\u5236\u7684\u60c5\u51b5\uff0c\u62ffdp[tot]\u51cf\u53bbdp[tot-c[i]\\*(d[i]+1)]\u5c31\u662f\u6211\u4eec\u6240\u9700\u7684\u65b9\u6848\u6570\u3002\n\n\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\u4e3a\u4ec0\u4e48\u8981\u5f04\u4e2ac[i]\\*(d[i]+1)\uff1f\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u60f3\uff0c\u65e0\u9650\u5236\u7684\u60c5\u51b5\u5c31\u662f\u6ca1\u6709\u90a3\u4e2adi\uff0c\u800c\u6709\u9650\u5236\u65f6\uff0c\u4e0d\u5e94\u8be5\u8ba1\u5165\u7b54\u6848\u7684\u65b9\u6848\u6570\u5c31\u662f\u628ac[i]\u8fd9\u4e2a\u786c\u5e01\u53d6\u4e86\u8d85\u8fc7d[i]\u6b21\uff0c\u5bf9\u5427\uff1f\u90a3\u4e48\u6211\u4eec\u624b\u52a8\u5148\u53d6\u51fad[i]+1\u4e2ac[i]\u7684\u786c\u5e01\uff0c\u7136\u540e\u5269\u4e0b\u7684\u4ef7\u503c\u5f04\u4e2a\u5b8c\u5168\u80cc\u5305\uff0c\u8fd9\u65f6\u5c31\u662f\u6211\u4eec\u6240\u4e0d\u9700\u8981\u7684\u7b54\u6848\uff0c \u628a\u5b83\u51cf\u6389\u5c31\u884c\u4e86\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e4\u4e2a\uff08\u6216\u66f4\u591a\uff09\u7684\u786c\u5e01\u6709\u9650\u5236\uff0c\u6211\u4eec\u5c31\u9010\u4e00\u628a4\u4e2a\u786c\u5e01\u5355\u72ec\u9650\u5236\u7684\u65b9\u6848\u6570\u51cf\u6389\uff0c\u8fd9\u65f6\u53ef\u80fd\u4f1a\u51cf\u91cd\u4e86\uff08\u5373\u540c\u65f6\u4e24\u4e2a\u786c\u5e01\u6709\u9650\u5236\u7684\u60c5\u51b5\u51cf\u4e86\u4e24\u6b21\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u518d\u628a4\u4e2a\u786c\u5e01\u4e24\u4e24\u540c\u65f6\u9650\u5236\u7684\u65b9\u6848\u6570\u52a0\u4e0a\uff0c\u53ef\u80fd\u53c8\u52a0\u91cd\u4e86\uff0c\u518d\u628a4\u4e2a\u786c\u5e0133\u540c\u65f6\u9650\u5236\u51cf\u6389\uff0c\u6700\u540e\u52a0\u4e0a4\u4e2a\u540c\u65f6\u9650\u5236\u7684\u65b9\u6848\u6570\u5c31\u662f\u6211\u4eec\u6240\u9700\u7684\u7b54\u6848\u3002\u8fd9\u5c31\u662f\u5927\u540d\u9f0e\u9f0e\u7684\u5bb9\u65a5\u539f\u7406\u554a\uff01\u5199\u6210\u4f4d\u8fd0\u7b97\u5c31\u5f88\u4f18\u7f8e\u4e86\uff01\n\n\u65b9\u6848\u6570\u4f1a\u7206int\u54df\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff08\u548c\u697c\u4e0b\u4e0d\u592a\u4e00\u6837\uff0c0\u8868\u793a\u6ee1\u8db3\u9650\u5236\uff0c1\u8868\u793a\u4e0d\u6ee1\u8db3\u9650\u5236\uff09\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#define REP(i,a,b) for (int i=(a);i<=(b);i++)\n#define in(a) scanf(\"%d\",&(a))\nusing namespace std;\nconst int N=100001;\nlong long dp[N+10];\nint c[5],d[5];\nint main(){\n    REP(i,1,4)in(c[i]);\n    dp[0]=1;\n    REP(i,1,4)REP(j,c[i],N)dp[j]+=dp[j-c[i]];\n    int T;in(T);\n    while (T--){\n        int sum;long long res=0;\n        REP(i,1,4)in(d[i]);\n        in(sum);\n        REP(i,0,15){\n            long long t=sum;\n            int cnt=0;\n            REP(j,1,4)if ((i>>(j-1))&1)t-=c[j]*(d[j]+1),cnt^=1;\n            if (t<0)continue;\n            if (!cnt)res+=dp[t];else res-=dp[t];\n        }\n        printf(\"%lld\\n\",res);\n    }\n    return 0;\n}\n```",
        "postTime": 1504921931,
        "uid": 54916,
        "name": "I_AM_HelloWord",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\u697c\u4e0b\u5199\u7684\u86ee\u6e05\u695a\u7684...\u8fd9\u91cc\u5728\u4e0b\u518d\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u5bb9\u65a5\u662f\u600e\u4e48\u6765\u7684\u5427\n\n\u9996\u5148\uff0c\u6211\u4eec\u628a\u5b83\u5f53\u6210\u4e00\u4e2a\u5b8c\u5168\u80cc\u5305\uff0c\u5904\u7406\u51fa\u6765\u4e00\u4e2adp\u6570\u7ec4\u5b58\u50a8\u65b9\u6848\u6570\uff0c\u8f6c\u79fb\u65b9\u7a0b$dp[i] += dp[i - v[i]]$\uff0c\u590d\u6742\u5ea6\u662f$O(4 \\times maxs)$\u7684\u3002\n\n\u7136\u540e\u4e0d\u59a8\u6765\u601d\u8003\u4e00\u4e0b\uff0c\u8fd9\u91cc\u7684\u5b8c\u5168\u80cc\u5305\u542b\u4e49\u662f\u4ec0\u4e48\uff1f\u542b\u4e49\u662f\u6211\u4eec\u53ef\u4ee5\u65e0\u9650\u5236\u7684\u653e\u786c\u5e01\u3002\n\n\u90a3\u4e48\u8fd9\u91cc\u5176\u5b9e\u5dee\u7684\u5c31\u662f\u90a3\u4e2a\u9650\u5236\u3002\u6240\u4ee5\u5148\u6765\u8003\u8651\u4e00\u4e2a\u5f31\u5316\u7248\u672c\uff1a\n\n\u5982\u679c\u53ea\u6709\u4e00\u79cd\u786c\u5e01\uff0c\u90a3\u4e48\u60c5\u51b5\u5982\u4f55\u5462\uff1f\u8fd9\u91cc\u7684\u65b9\u6848\u6570\u5305\u542b\u4e86\u4e00\u90e8\u5206\u8d85\u8fc7$d$\u4e2a\u7684\u3002\u8b6c\u5982\uff0c\u6b64\u65f6\u53ef\u80fd\u6c42\u5f97\u7684\u7ed3\u679c\u662f\u5e26$d + 1$\u679a\uff0c$d + 2$\u679a...\u53ea\u8981\u628a\u8fd9\u4e00\u90e8\u5206\u51cf\u53bb\u5c31\u53ef\u4ee5\u4e86\u3002\u56e0\u6b64\u76f4\u63a5\u5220\u6389\u5408\u7406\u7684\u60c5\u51b5\uff0c\u90a3\u5269\u4e0b\u7684\u5c31\u662f\u4e0d\u5408\u7406\u7684\uff0c\u800c\u4e0d\u5408\u7406\u7684\u60c5\u51b5\u4e5f\u5c31\u662f\u4e00\u4e2a\u5bb9\u91cf$s - (d + 1) \\times v$\u7684\u80cc\u5305\uff0c\u8fd9\u4e2a\u5c31\u662f\u4e0d\u5408\u7406\u7684\uff0c\u51cf\u53bb\u8fd9\u90e8\u5206\u4e0d\u5408\u7406\u7684\u5c31\u662f\u5408\u7406\u7684\uff0c\u6362\u8a00\u4e4b`ans -= dp[s - (d + 1) \\* v`\n\n\u800c\u591a\u79cd\u786c\u5e01\u5462\uff1f\u5176\u5b9e\u8fd9\u5c31\u662f\u4e00\u4e2a\u5bb9\u65a5\u95ee\u9898\u4e86\u3002\n\n\u6240\u4ee5\u5e95\u4e0b\u8fd9\u4e2a\u662f\u4e00\u5b9a\u80fd\u8fc7\u7684\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\ntypedef long long LL;\n#define MAXN 100003\nLL dp[MAXN], c[5], d[5], s;\ninline int f(int id) {\n    return c[id] * (d[id] + 1);\n}\nint main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    dp[0] = 1;    \n    cin>>c[1]>>c[2]>>c[3]>>c[4];\n    for(int i = 1; i <= 4; ++i)\n        for(int j = c[i]; j <= MAXN; ++j)\n                dp[j] += dp[j - c[i]];\n    int T;\n    cin>>T;\n    while(T--) {\n        cin>>d[1]>>d[2]>>d[3]>>d[4]>>s;\n        LL ans = dp[s];\n        if(s >= f(1)) ans -= dp[s - f(1)];\n        if(s >= f(2)) ans -= dp[s - f(2)];\n        if(s >= f(3)) ans -= dp[s - f(3)];\n        if(s >= f(4)) ans -= dp[s - f(4)];\n        if(s >= f(1) + f(2)) ans += dp[s - f(1) - f(2)];\n        if(s >= f(1) + f(3)) ans += dp[s - f(1) - f(3)];\n        if(s >= f(1) + f(4)) ans += dp[s - f(1) - f(4)];\n        if(s >= f(2) + f(3)) ans += dp[s - f(2) - f(3)];\n        if(s >= f(2) + f(4)) ans += dp[s - f(2) - f(4)];\n        if(s >= f(3) + f(4)) ans += dp[s - f(3) - f(4)];\n        if(s >= f(1) + f(2) + f(3)) ans -= dp[s - f(1) - f(2) - f(3)];\n        if(s >= f(1) + f(2) + f(4)) ans -= dp[s - f(1) - f(2) - f(4)];\n        if(s >= f(1) + f(3) + f(4)) ans -= dp[s - f(1) - f(3) - f(4)]; \n        if(s >= f(2) + f(3) + f(4)) ans -= dp[s - f(2) - f(3) - f(4)];\n        if(s >= f(1) + f(2) + f(3) + f(4)) ans += dp[s - f(1) - f(2) - f(3) - f(4)];\n        cout<<ans<<endl;\n    }\n    return 0;\n}\n```\n~~\u6253\u8868\u662f\u4e00\u79cd\u6d6a\u6f2b\uff0c\u4e0d\u723d\u4e0d\u8981\u770b~~\n\n\u5f53\u7136\u8fd9\u6837\u592a\u4e0d\u4f18\u96c5\u4e86\uff0c\u770b\u5230\u5927\u4f6c\u4eec\u7684\u64cd\u4f5c\u624d\u53d1\u73b0\u524d\u51e0\u5929\u597d\u50cf\u5728lrj\u4e0a\u770b\u5230\u4e00\u4e2a\u795e\u5947\u7684\u4e1c\u897f\u53eb\u505a\u4f4d\u8fd0\u7b97\u679a\u4e3e\u5b50\u96c6\uff1a\n\n`for(int S0 = S; S0; S0 = (S0 - 1)&S)`\n\n\u8fd9\u4e2a\u7684\u542b\u4e49\u4e0d\u7406\u89e3\u7684\u8bdd\u53ef\u4ee5\u53bb\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u624b\u52a8\u6a21\u62df\u4e00\u4e0b\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u5c06while\u5185\u7684\u90e8\u5206\u5927\u5927\u7b80\u5316\uff1a\n\n```cpp\nfor(int S0 = S; S0; S0 = (S0 - 1) & S) {\n            LL qwq = 0, tmp = 0;\n            for(int j = 1; j <= 4; ++j) \n                if((S0 >> j - 1) & 1)\n                    qwq ^= 1, tmp += f(j);\n            if(s >= tmp) \n                ans = qwq ? ans - dp[s - tmp] : ans + dp[s - tmp];\n        }\n```\n\u55ef\uff0c\u4f4d\u8fd0\u7b97\u771f\u6709\u8da3\u554a\n\n\u603b\u4e4b\u4e2a\u4eba\u611f\u89c9\u8fd9\u662f\u4e00\u9053\u5f88\u6709\u8da3\u7684DP\uff0c\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u795e\u5947\u7684\u601d\u60f3\u3002\n",
        "postTime": 1515253900,
        "uid": 37956,
        "name": "LiRewriter",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\u6211\u5b9e\u5728\u662f\u592a\u5f31\u4e86\uff0c\u7b2c\u4e00\u6b21\u6b63\u513f\u516b\u7ecf\u5199\u80cc\u5305DP\uff0c\u7b2c\u4e00\u6b21\u9886\u4f1a\u5982\u6b64\u5de7\u5999\u7684\u5bb9\u65a5\u539f\u7406\u7684\u5e94\u7528\u3002\u3002\u3002\u3002\u3002\u3002\n\n\u5bf9\u6bcf\u6b21\u8be2\u95ee\u90fd\u505a\u4e00\u904d\u591a\u91cd\u80cc\u5305\uff0c\u663e\u7136T\u98de\uff0c\u5c31\u4e0d\u8003\u8651\u4e86\n\n\u5173\u952e\u5c31\u5728\u4e8e\u6bcf\u6b21\u8be2\u95ee\u5982\u4f55\u5229\u7528\u91cd\u590d\u7684\u4fe1\u606f\n\n\u6211\u8fd9\u4e48\u5f31\uff0c\u5f53\u7136\u662f\u60f3\u4e0d\u5230\u5bb9\u65a5\u539f\u7406\u7684\u5566\n\n\u6682\u4e14\u5148\u5f53\u6210\u5b8c\u5168\u80cc\u5305\uff0c\u6bcf\u79cd\u786c\u5e01\u53ef\u4f7f\u7528\u65e0\u9650\u6b21\uff0c\u9884\u5904\u7406$f$\u6570\u7ec4\uff0c$f[i]$\u7b49\u4e8e\u4e70\u4ef7\u503c$i$\u7684\u4e1c\u897f\u7684\u603b\u65b9\u6848\u6570\n\n\u7136\u540e\u5c31\u8981\u4ece\u4e2d\u51cf\u53bb\u4e0d\u5408\u6cd5\u7684\u3002\u9996\u5148\u80af\u5b9a\u4f1a\u6709\u4e00\u79cd\u786c\u5e01\u8d85\u989d\u4f7f\u7528\uff0c\u7b2c$j$\u4e2d\u786c\u5e01\u7b49\u4e8e\u8bf4\u5f3a\u5236\u9009\u4e86$d_j+1$\u4e2a\uff0c\u5269\u4e0b\u7684\u4f9d\u7136\u968f\u4fbf\u9009\uff0c\u90a3\u4e48\u7b2c\n$j$\u79cd\u786c\u5e01\u8d85\u989d\u7684\u4e0d\u5408\u6cd5\u7684\u65b9\u6848\u6570\u7b49\u4e8e$f[s-(d_j+1)*c_j]$\uff0c\u4e8e\u662f\u4ece\u7b54\u6848\u91cc\u51cf\u53bb$\\sum_{j=1}^4f[s-(d_j+1)*c_j]$\n\n\u8fd8\u8981\u6ce8\u610f\uff0c\u7b2c\u4e00\u79cd\u7b2c\u4e8c\u79cd\u90fd\u8d85\u989d\u3001\u7b2c\u4e00\u79cd\u7b2c\u4e09\u79cd\u90fd\u8d85\u989d\u3001\u7b2c\u4e00\u79cd\u7b2c\u56db\u79cd\u90fd\u8d85\u989d\u3001\u7b2c\u4e8c\u79cd\u7b2c\u4e09\u79cd\u90fd\u8d85\u989d\u3001\u7b2c\u4e8c\u79cd\u7b2c\u56db\u79cd\u90fd\u8d85\u989d\u3001\u7b2c\u4e09\u79cd\u7b2c\u56db\u79cd\u90fd\u8d85\u989d\u7684\u65b9\u6848\u5728\u4e0a\u4e00\u6b65\u4e2d\u90fd\u88ab\u51cf\u4e86\u4e24\u6b21\uff0c\u6240\u4ee5\u989d\u5916\u90fd\u52a0\u4e00\u6b21\u56de\u6765\u3002\u3002\u3002\u3002\u3002\u3002\uff08\u63a5\u7740\u628a\u5bb9\u65a5\u505a\u4e0b\u53bb\u5c31\u4e0d\u8bf4\u4e86\uff09\n\n\u590d\u6742\u5ea6\u964d\u5230$O(4maxs+4\u00d72^4tot)$\uff0c\u8f7b\u677e\u901a\u8fc7\n\n\u6ce8\u610f\u5f00longlong\u5c31\u597d\u5566\n```cpp\n#include<cstdio>\n#define R register\ntypedef long long LL;\nconst int S=100009;\nLL f[S]={1ll};\nint main(){\n\tR int c[4],d[4],tot,i,j,k,now,s,ss,tmp;\n\tR LL ans;\n\tfor(j=0;j<4;++j)scanf(\"%d\",&c[j]);\n\tscanf(\"%d\",&tot);\n\tfor(j=0;j<4;++j)\n\t\tfor(i=c[j];i<S;++i)\n\t\t\tf[i]+=f[i-c[j]];//\u5b8c\u5168\u80cc\u5305\u9884\u5904\u7406\n\twhile(tot--){\n\t\tfor(j=0;j<4;++j)scanf(\"%d\",&d[j]);\n\t\tscanf(\"%d\",&s);\n\t\tans=f[s];\n\t\tfor(ss=1;ss<=15;++ss){//\u4e8c\u8fdb\u5236\u6570\u679a\u4e3e\u96c6\u5408\uff0c\u5bb9\u65a5\n\t\t\tnow=s;\n\t\t\tfor(tmp=ss,j=k=0;tmp;tmp>>=1,++j)\n\t\t\t\tif(tmp&1)k^=1,now-=(d[j]+1)*c[j];\n                //\u6ce8\u610fk\u7684\u4f5c\u7528\uff0c\u5224\u65ad\u5947\u5076\n\t\t\tif(now>=0)k?ans-=f[now]:ans+=f[now];\n\t\t}\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1522157416,
        "uid": 61325,
        "name": "FlashHu",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\u4e00\u9053\u795e\u5947\u7684dp\u9898,\u6ce8\u610f\u7528longlong\n\n\u9996\u5148\u5982\u679c\u540c\u591a\u91cd\u80cc\u5305\u4e00\u4e2a\u4e00\u4e2a\u7b97\u662f\u80af\u5b9aT\u7684 ~~(\u9664\u975e\u4f60\u6709\u795e\u4ed9\u7684\u5361\u5e38\u6280\u672f)~~ \n\n\u6211\u4eec\u77e5\u9053\u9898\u76ee\u662f\u8981\u6c42\u6211\u4eec\u7528**\u6bcf\u79cd\u79cd\u7c7b\u7684\u4e2a\u6570\u6709\u9650\u7684\u786c\u5e01**\u6765\u8d2d\u4e70s\u7684\u4ef7\u503c\u7684\u4e1c\u897f\u7684\u65b9\u6cd5\u6570,\u90a3\u4e48\u5982\u679c\u6211\u4eec\u6362\u4e00\u79cd\u601d\u8def,\u6211\u4eec\u53d1\u73b0 **\u6ee1\u8db3\u8981\u6c42\u7684\u65b9\u6cd5\u6570=\u65e0\u9650\u79cd\u7684\u65b9\u6cd5\u6570-\u4e0d\u6ee1\u8db3\u8981\u6c42(\u5373\u8d85\u8fc7\u9650\u5236)\u65b9\u6cd5\u6570**(\u6bd4\u5982\u65e0\u9650\u5236\u67095\u79cd\u65b9\u6cd5,\u5176\u4e2d3\u79cd\u8d85\u8fc7\u4e86\u9898\u76ee\u7684\u9650\u5236,\u90a3\u4e48\u6ee1\u8db3\u7684\u5c31\u67092\u79cd)\n\n\u6211\u4eec**\u5148\u6c42\u65e0\u9650\u79cd\u7684\u65b9\u6cd5\u6570**,\u6211\u4eec\u8bbe$f[i]$\u4e3a\u4e2a\u6570\u65e0\u9650\u7684\u786c\u5e01\u6765\u8d2d\u4e70$i$\u7684\u4ef7\u503c\u7684\u4e1c\u897f\u7684\u65b9\u6cd5\u6570,\u6240\u4ee5**\u65e0\u9650\u79cd\u7684\u65b9\u6cd5\u6570$f[s]$**\n\n\u518d\u6765\u6c42**\u4e0d\u6ee1\u8db3\u8981\u6c42\u7684(\u5373\u8d85\u8fc7\u9650\u5236)\u65b9\u6cd5\u6570**,\u6211\u4eec\u5148\u6765\u770b\u7b2c$1$\u79cd\u786c\u5e01\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u6570,\u6211\u4eec\u53ef\u4ee5\u5148\u5f3a\u5236\u652f\u4ed8$(d[1]+1)$\u4e2a\u786c\u5e01,\u90a3\u4e48\u540e\u9762\u65e0\u8bba\u600e\u4e48\u652f\u4ed8\u7b2c$1$\u79cd\u786c\u5e01\u90fd\u662f\u8d85\u8fc7\u8981\u6c42\u7684,\u6211\u4eec\u77e5\u9053\u540e\u9762\u8981\u652f\u4ed8\u7684\u94b1\u4e3a$s-c[1]* (d[1]+1)$\u5143(\u5c31\u662f\u51cf\u6389\u5f3a\u5236\u652f\u4ed8\u7684),\u6240\u4ee5\u53ef\u4ee5\u5f97\u5230\n\n\u7b2c$1$\u79cd\u786c\u5e01\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u6570=\u5f3a\u5236\u652f\u4ed8$(d[1]+1)$\u4e2a\u786c\u5e01\u7684\u65b9\u6cd5\u6570(\u53ea\u6709\u4e00\u79cd\u65b9\u6cd5)*\u652f\u4ed8$s-c[1]* (d[1]+1)$\u5143\u7684\u65b9\u6cd5\u6570=\u652f\u4ed8$s-c[1]* (d[1]+1)$\u5143\u7684\u65b9\u6cd5\u6570\n\n\u5373\n\n**\u7b2c$1$\u79cd\u786c\u5e01\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u6570$=f[s-c[1]* (d[1]+1)]$**\n\n\u540c\u7406,\u7b2c$2$\u79cd\u786c\u5e01\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u6570=$f[s-c[2]* (d[2]+1)]$,\u4ee5\u6b64\u7c7b\u63a8\n\n\u4f46\u662f\u6211\u4eec\u76f4\u63a5\u7528$f[s]$\u51cf\u6389\u4ed6\u4eec\u5f97\u51fa\u7684\u5e76\u4e0d\u662f\u6b63\u786e\u7684\u7b54\u6848,\u56e0\u4e3a\u6211\u4eec\u770b\u8ba1\u7b97\u7b2c$1$\u79cd\u786c\u5e01\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u6570\u65f6,\u5bf9\u4e8e\u8981\u652f\u4ed8\u7684$s-c[1]* (d[1]+1)$\u5143\u6765\u8bf4,\u5e76\u6ca1\u6709\u8981\u6c42\u7b2c\u4e8c\u79cd\u786c\u5e01\u4e0d\u8d85\u8fc7\u8981\u6c42,**\u6240\u4ee5\u7b2c\u4e00\u79cd\u8d85\u8fc7\u8981\u6c42\u65f6,\u7b2c\u4e8c\u79cd\u786c\u5e01\u53ef\u80fd\u540c\u65f6\u4e5f\u8d85\u8fc7\u8981\u6c42**,\u540c\u7406,\u7b2c\u4e8c\u79cd\u8d85\u8fc7\u8981\u6c42\u65f6,\u7b2c\u4e00\u79cd\u786c\u5e01\u53ef\u80fd\u540c\u65f6\u4e5f\u8d85\u8fc7\u8981\u6c42,\u8fd9\u6837\u5c31\u4ea7\u751f\u4e86\u91cd\u590d(\u8ba1\u7b97\u4e86\u4e24\u6b21\u4e00\u4e8c\u540c\u65f6\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u6570),\u6240\u4ee5\u6211\u4eec\u8981\u518d**\u52a0\u56de\u53bb\u4e00\u6b21\u4e00\u4e8c\u540c\u65f6\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u6570**\n\n\u4e3a\u4e86\u65b9\u4fbf\u8ba1\u7b97,\u6211\u4eec\u7528**A\u8868\u793a\u7b2c$1$\u79cd\u786c\u5e01\u8d85\u8fc7\u8981\u6c42\u7684\u65b9\u6cd5\u7684\u96c6\u5408**,**B\u6765\u8868\u793a\u786c\u5e012\u7684**\n\n\u53ef\u80fd\u6709\u6ca1\u4e86\u89e3\u8fc7\u96c6\u5408\u7684\u540c\u5b66,\u6240\u4ee5\u6211\u5728\u8fd9\u91cc\u7b80\u5355\u8bf4\u4e00\u4e0b:\n\n1.\u96c6\u5408\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u786e\u5b9a\u7684\u5143\u7d20\u6240\u6784\u6210\u7684\u6574\u4f53,\u53ef\u4ee5\u770b\u4f5c\u662f\u201c\u4e00\u5806\u4e1c\u897f\u201d\uff0c\u96c6\u5408\u91cc\u7684\u201c\u4e1c\u897f\u201d\u5219\u79f0\u4e3a\u5143\u7d20\n\n2.\u4ea4\u96c6\uff1a\u7531\u5c5e\u4e8eA\u4e14\u5c5e\u4e8eB\u7684\u5143\u7d20\u7ec4\u6210\u7684\u96c6\u5408,\u5c31\u662f\u4e24\u96c6\u5408\u76f8\u4ea4\u7684\u90e8\u5206\n\n3.\u5e76\u96c6\uff1a\u7531\u6240\u6709\u5c5e\u4e8e\u96c6\u5408A\u6216\u5c5e\u4e8e\u96c6\u5408B\u7684\u5143\u7d20\u6240\u7ec4\u6210\u7684\u96c6\u5408,\u5c31\u662fA\u548cB\u6240\u6709\u7684\u5143\u7d20\u7ec4\u6210\u7684\u96c6\u5408(\u91cd\u590d\u5143\u7d20\u7684\u7b97\u4f5c\u4e00\u4e2a),\u5982\u56fe\n\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t7hq1nt4.png)\n\n4.\u5bb9\u65a5\u539f\u7406:$1.card(A\u222aB)=card(A)+card(B)-card(A\u2229B)$(card(X)\u4e3aX\u96c6\u5408\u5143\u7d20\u4e2a\u6570,\u770b\u56fe\u7406\u89e3)\n\n\u96c6\u5408\u8fd0\u7b97\u6ee1\u8db3\u5206\u914d\u5bf9\u5076\u5f8b\uff1aA\u2229(B\u222aC)=(A\u2229B)\u222a(A\u2229C)\uff1bA\u222a(B\u2229C)=(A\u222aB)\u2229(A\u222aC),\u6240\u4ee5\n\n\u5982\u679c\u6211\u4eec\u518d\u52a0\u5165\u4e00\u4e2a\u96c6\u5408C,\u90a3\u4e48(\u8fd9\u91cc\u7701\u7565card())$2.A\u222aB\u222aC=(A\u222aB)\u222aC=A+B+C-A\u2229B-A\u2229C-B\u2229C+A\u2229B\u2229C$,\u76f4\u63a5\u7b97\u6216\u770b\u56fe\u7406\u89e3\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/q9j5tny9.png)\n\n\u770b\u5b8c\u4e86\u4e0a\u8ff0\u77e5\u8bc6\u70b9,\u6211\u4eec\u53ef\u4ee5**\u5f00\u59cb\u8ba1\u7b97**\u4e86\n\n**\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u548c\u7b2c\u4e8c\u79cd\u786c\u5e01,$f[s]$\u5e94\u8be5\u51cf\u6389\u7684\u662f$card(A\u222aB)$\u5373$card(A)+card(B)-card(A\u2229B)$**\n\n\u8fdb\u800c\u5bf9**\u6240\u6709\u79cd\u7c7b\u7684\u786c\u5e01**(\u5c06\u7b2c3,4\u79cd\u786c\u5e01\u8bbe\u4e3aC,D),\u6839\u636e\u6ee1\u8db3\u8981\u6c42\u7684\u65b9\u6cd5\u6570(\u5373**\u7b54\u6848)=\u65e0\u9650\u79cd\u7684\u65b9\u6cd5\u6570-\u4e0d\u6ee1\u8db3\u8981\u6c42(\u5373\u8d85\u8fc7\u9650\u5236)\u65b9\u6cd5\u6570**\n\n\u6240\u4ee5,\n\n**\u7b54\u6848**\n$=f[s]-card(A\u222aB\u222aC\u222aD)$\n\n$=f[s]-card(A)-card(B)-card(C)-card(D)$\n\n$+card(A\u2229B)+card(A\u2229C)+card(A\u2229D)+card(B\u2229C)+card(B\u2229D)+card(C\u2229D)$\n\n$-card(A\u2229B\u2229C)-card(A\u2229B\u2229D)-card(A\u2229C\u2229D)-card(B\u2229C\u2229D)$\n\n$+card(A\u2229B\u2229C\u2229D)$\n\n\u5176\u4e2d$card(X\u2229Y\u2229...)$\u7684\u8ba1\u7b97\u65b9\u6cd5,\u8bbecard\u5185\u5171$n$\u7ed9\u96c6\u5408,\u7b2c$i$\u4e2a\u96c6\u5408\u4ee3\u8868\u786c\u5e01$i$,**\u6240\u4ee5\u4ee4$K=c[1]*(d[1]+1)+c[2]*(d[2]+1)+...+c[n]*(d[n]+1)$,\u5f53$k\u2264s$\u65f6$card(X\u2229Y\u2229...)=f[s-K]$,$K>s$\u65f6,$card(X\u2229Y\u2229...)=0$**\n\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u53d1\u73b0,\u5f53card(X\u2229Y\u2229...)\u5185\u96c6\u5408\u7684\u4e2a\u6570\u4e3a**\u5947\u6570**\u65f6\u524d\u9762\u7684\u7b26\u53f7\u4e3a$'-'$,\u4e3a**\u5076\u6570**\u65f6\u524d\u9762\u7684\u7b26\u53f7\u4e3a\u6b63,\u6240\u4ee5\u5728\u7a0b\u5e8f\u4e2d\u6211\u4eec\u679a\u4e3e\u6240\u6709\u7684card()\u65f6\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u6765**\u5224\u65ad\u7b26\u53f7**\n\n\u600e\u4e48\u679a\u4e3e,\u53ef\u4ee5\u7528**\u4e8c\u8fdb\u5236\u6570\u6765\u679a\u4e3e**(\u7b2ci\u4f4d\u4e3a0\u8868\u793a\u8fd9\u4e2acard()\u4e2d\u5e76\u6ca1\u6709\u786c\u5e01i,\u4e3a1\u5219\u6709),\u4ece1(0001)\u679a\u4e3e\u523015(1111)\u5c31\u53ef\u4ee5\u4e86,**\u5982\u679c\u4f60\u4e0d\u4f1a\u8fd9\u79cd\u65b9\u6cd5,\u76f4\u63a5\u628a\u6240\u6709\u7684\u7b97card\u7684\u7b97\u5f0f\u6253\u4e0a\u53bb\u8ba1\u7b97\u7ed3\u679c\u4e5f\u53ef\u4ee5**\n\n\u4e0a\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nconst int N=1e5+5;\nll f[N],c[10],d[10],s;//\u53d8\u91cf\u610f\u4e49\u770b\u6587\u7ae0\u548c\u9898\u76ee\ninline long long read()\n{\n    char c=getchar();long long sum=0,f=1;\n    while(!(c>='0'&&c<='9')) {if(c=='-') f=-1;c=getchar();}\n    while(c>='0'&&c<='9') {sum=((sum<<1)+(sum<<3))+(c-'0');c=getchar();}\n    return sum*f;\n}\nint main()\n{\n\tc[1]=read();c[2]=read();c[3]=read();c[4]=read();\n\tint n=read();\n\tf[0]=1;\n\tfor(int i=1;i<=4;i++)\n\t{\n\t\tfor(int j=c[i];j<=1e5;j++) f[j]+=f[j-c[i]];\n\t}//\u5b8c\u5168\u80cc\u5305\n\twhile(n--)\n\t{\n\t\tfor(int i=1;i<=4;i++) d[i]=read();\n\t\ts=read();\n\t\tll ans=f[s];\n\t\tfor(int i=1;i<=15;i++)//\u679a\u4e3e\n\t\t{\n\t\t\tll k=0,num=0;//num\u7528\u6765\u7b97card\u5185\u96c6\u5408\u6570\u91cf\n\t\t\tfor(int j=0;j<4;j++)\n\t\t\t{\n\t\t\t\tif(i&(1<<j)) //\u5224\u65ad\u7b2cj\u4e3a\u662f\u5426\u4e3a1\n\t\t\t\t{\n\t\t\t\t\tnum++;\n\t\t\t\t\tk+=c[j+1]*(d[j+1]+1);//\u7b97k\n\t\t\t\t}\n\t\t\t}\n\t\t\tll fl=1;\n\t\t\tif(num%2) fl=-1;//\u5224\u65ad\u7b26\u53f7\n\t\t\tif(s>=k) ans+=fl*f[s-k];//\u5982\u679ck\u6ee1\u8db3\u6761\u4ef6,\u52a0(\u51cf)\u4e0a\n\t\t}\n\t\tprintf(\"%lld\\n\",ans);//\u8f93\u51fa\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1584012873,
        "uid": 199270,
        "name": "Y_B_Y",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\u7b2c\u4e00\u773c\u770b\u5230\u663e\u7136\u662f\u4e00\u4e2a\u591a\u91cd\u80cc\u5305\n\n\u4e5f\u5f88\u663e\u7136\u590d\u6742\u5ea6\u4e0d\u5bf9\u2026\u2026\n\n\u6211\u4eec\u53ef\u4ee5\u7528\u53e6\u4e00\u79cd\u601d\u60f3\n\n## \u5dee\u5206\n\n\u4e3e\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u533a\u95f4\u52a0\u51cf // ~~\u5176\u5b9e\u6ca1\u6709\u8fd9\u6837\u7684\u8868\u8fbe\u4f46\u662f\u8fd9\u6837\u597d\u7406\u89e3~~\n\n$$[2,+\\infty]-(3,+\\infty]=[2,3]$$\n\n\u663e\u7136\u6211\u4eec\u53ea\u9700\u6c42\u51fa$[2,+\\infty]$\u548c$(3,+\\infty]$\u5c31\u80fd\u7b97\u51fa$[2,3]$\n\n\u90a3\u8fd9\u9053\u9898\u80fd\u4e0d\u80fd\u8fd9\u6837\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u7528**\u5b8c\u5168\u80cc\u5305**\u5148\u9884\u5904\u7406\u51fa\u6ca1\u6709\u94b1\u6570\u9650\u5236\u662f\u7684\u6240\u6709\u60c5\u51b5\n\n\u518d\u628a\u6240\u6709\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\uff08\u5373\u67d0\u79cd\u786c\u5e01\u8d85\u8fc7\u4e86\u6240\u7ed9\u6570\u91cf\uff09\u51cf\u53bb\uff0c\u6700\u540e\u5f97\u5230\u7684\u5c31\u662f\u7b54\u6848\n\n$$ans=f[s]-\\sum^4_{i=1}{f[s-c_i*(d_i+1)]}$$\n\n\u4e0b\u9762\u4e00\u4e2a\u95ee\u9898\uff1a$\\sum^4_{i=1}{f[s-c_i*(d_i+1)]}$\u8981\u600e\u6837\u8ba1\u7b97\u5462\uff1f\n\n\u80af\u5b9a\u4e0d\u662f\u76f4\u63a5\u7d2f\u52a0\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u7b2c1\u79cd\u7269\u54c1\u8d85\u8fc7\u9650\u5236\u7684\u540c\u65f6\uff0c\u7b2c\u4e8c\u79cd\u7269\u54c1\u6570\u91cf\u4e5f\u8d85\u8fc7\u4e86\u9650\u5236\uff0c\u5982\u679c\u76f4\u63a5\u7d2f\u52a0\u4f1a\u628a\u8fd9\u79cd\u60c5\u51b5\u8ba1\u7b97\u4e24\u6b21\uff0c\u663e\u7136\u662f\u4e0d\u6b63\u786e\u7684\n\n\u6240\u4ee5\u6211\u4eec\u518d\u5f15\u5165\u4e00\u4e2a\u539f\u7406\uff1a\n\n## \u5bb9\u65a5\u539f\u7406\n\n>\u5728\u8ba1\u6570\u65f6\uff0c\u5148\u4e0d\u8003\u8651\u91cd\u53e0\u7684\u60c5\u51b5\uff0c\u628a\u5305\u542b\u4e8e\u67d0\u5185\u5bb9\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u7684\u6570\u76ee\u5148\u8ba1\u7b97\u51fa\u6765\uff0c\u7136\u540e\u518d\u628a\u8ba1\u6570\u65f6\u91cd\u590d\u8ba1\u7b97\u7684\u6570\u76ee\u6392\u65a5\u51fa\u53bb\uff0c\u4f7f\u5f97\u8ba1\u7b97\u7684\u7ed3\u679c\u65e2\u65e0\u9057\u6f0f\u53c8\u65e0\u91cd\u590d\uff0c\u8fd9\u79cd\u8ba1\u6570\u7684\u65b9\u6cd5\u79f0\u4e3a\u5bb9\u65a5\u539f\u7406\u3002\n\n\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u628a**\u91cd\u590d\u8ba1\u7b97**\u7684\u90e8\u5206**\u53bb\u6389**\uff0c\u628a**\u591a\u53bb\u6389**\u7684\u90e8\u5206**\u52a0\u56de\u6765**\n\n\u9488\u5bf9\u672c\u9898\u800c\u8a00\uff0c\u5c31\u662f\uff1a\n\n\u4e0d\u5408\u6cd5\u6570\u76ee$=$ $1$\u8d85\u51fa\u7684\u90e8\u5206$+$ $2$\u8d85\u51fa\u7684\u90e8\u5206$+\u2026\u2026-$ $1,2$\u5171\u540c\u8d85\u51fa\u7684\u90e8\u5206$-$ $2,3$\u5171\u540c\u8d85\u51fa\u7684\u90e8\u5206$\u2026\u2026$ $+$ $1,2,3$\u5171\u540c\u8d85\u51fa\u7684\u90e8\u5206\u2026\u2026\uff08\u540e\u9762\u4ee5\u6b64\u7c7b\u63a8\uff09\n\n\u4ee3\u7801\u5b9e\u73b0\u5c31\u6bd4\u8f83\u5bb9\u6613\u4e86\n\n\u4e0b\u9762\u6709\u8be6\u7ec6\u6ce8\u91ca\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint T,n,c[5],d[5],s;\nlong long ans,f[100010];\nvoid pack_pre()\n{\n\tf[0]=1;\n\tfor(int i=1;i<=4;i++)\n\t    for(int j=c[i];j<=100001;j++)\n\t        f[j]+=f[j-c[i]];\n}\nvoid dfs(int now,int sum,int flag)\n//now\u662f\u73b0\u5728\u641c\u5230\u7684\u786c\u5e01\u79cd\u7c7b\n//sum\u662f\u76ee\u524d\u8fd8\u80fd\u7528\u7684\u91d1\u989d\u6570\u76ee\n//flag\u662f\u7b26\u53f7\uff08\u63a7\u5236+,-\u7b26\u53f7\uff09\n{\n\tif(sum<0) return;//\u80fd\u7528\u7684\u94b1\u6ca1\u4e86\u5c31\u8fd4\u56de\n    if(now>4) {ans+=f[sum]*flag;return;}//\u6240\u6709\u786c\u5e01\u79cd\u7c7b\u90fd\u641c\u5b8c\u4e86\n\tdfs(now+1,sum,flag);//\u5408\u6cd5\u7684\u90e8\u5206\n\tdfs(now+1,sum-(d[now]+1)*c[now],-flag);//\u4e0d\u5408\u6cd5\u7684\u90e8\u5206\n}\nint main()\n{\n\tfor(int i=1;i<=4;i++) scanf(\"%d\",&c[i]);\n\tpack_pre();//\u5b8c\u5168\u80cc\u5305\u9884\u5904\u7406\n\tscanf(\"%d\",&T);\n\twhile(T--)\n\t{\n\t\tans=0;//\u8bb0\u5f97\u6e05\u96f6\n\t\tfor(int i=1;i<=4;i++) scanf(\"%d\",&d[i]);\n\t\tscanf(\"%d\",&s);\n\t\tdfs(1,s,1);\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n}\n\n```\n\n\n\n",
        "postTime": 1538006733,
        "uid": 74896,
        "name": "Mathison",
        "ccfLevel": 0,
        "title": "P1450 \u786c\u5e01\u8d2d\u7269 \u3010\u5bb9\u65a5\u539f\u7406\u3011"
    },
    {
        "content": "> [P1450 [HAOI2008]\u786c\u5e01\u8d2d\u7269](https://www.luogu.com.cn/problem/P1450)\n> \n> \u5171\u6709 $4$ \u79cd\u786c\u5e01\u3002\u9762\u503c\u5206\u522b\u4e3a $c_1,c_2,c_3,c_4$\u3002\n> \n> \u67d0\u4eba\u53bb\u5546\u5e97\u4e70\u4e1c\u897f\uff0c\u53bb\u4e86 $n$ \u6b21\uff0c\u5bf9\u4e8e\u6bcf\u6b21\u8d2d\u4e70\uff0c\u4ed6\u5e26\u4e86 $d_i$ \u679a $i$ \u79cd\u786c\u5e01\uff0c\u60f3\u8d2d\u4e70 $s$ \u7684\u4ef7\u503c\u7684\u4e1c\u897f\u3002\u8bf7\u95ee\u6bcf\u6b21\u6709\u591a\u5c11\u79cd\u4ed8\u6b3e\u65b9\u6cd5\u3002\n\n<!-- more -->\n\n## \u89e3\u9898\u601d\u8def\uff1a\n\n\u5bb9\u65a5 + DP\n\n\u633a\u725b\u903c\u7684\u4e00\u9053\u9898\uff0c\u505a\u4e86\u4e00\u5929\u5b66\u5230\u5f88\u591a\u3002\n\n\u9996\u5148\u770b\u5230\u8fd9\u4e2a\u95ee\u9898\uff0c\u6839\u636e\u7ecf\u9a8c\u53d1\u73b0\u53ef\u4ee5\u901a\u8fc7\u591a\u91cd\u80cc\u5305\u89e3\u51b3\uff0c\u4f46\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(ns^2)$\uff0c\u975e\u5e38\u79bb\u8c31\u3002\n\n\u6211\u4eec\u5148\u628a\u95ee\u9898\u5206\u5272\u6210\u5c0f\u95ee\u9898\n\n> \u5171\u6709 $1$ \u79cd\u786c\u5e01\u3002\u9762\u503c\u4e3a$c$ \uff0c\u4e0d\u9650\u5236\u4f7f\u7528\u6b21\u6570\u3002\n\n\u90a3\u4e48\u8fd9\u5c31\u662f\u88f8\u7684\u65e0\u9650\u80cc\u5305\uff0c$O(n)$ \u5373\u53ef\u89e3\u51b3\u3002\n\n\u52a0\u4e0a\u9650\u5236\u600e\u4e48\u505a\uff1f\u76f4\u63a5\u80cc\u5305\u80af\u5b9a\u662f\u4e0d\u884c\u7684\uff0c\u6211\u4eec\u8003\u8651\u7528\u603b\u6570\u51cf\u53bb\u53cd\u9762\u3002\n\n\u5373 \u6ee1\u8db3\u6761\u4ef6\u7684\u65b9\u6848\u603b\u6570 = \u65b9\u6848\u603b\u6570 - \u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u65b9\u6848\u603b\u6570\n\n\u90a3\u4e48\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e86\u5982\u4f55\u6c42\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u65b9\u6848\u603b\u6570\u3002\u6211\u4eec\u89c2\u5bdf\u9898\u76ee\u6027\u8d28\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u6211\u4eec\u53d6\u4e86 $d_i + 1$ \u4e2a\u786c\u5e01\uff0c\u90a3\u4e48\u63a5\u4e0b\u6765\u4e0d\u8bba\u600e\u4e48\u53d6\u786c\u5e01\u90fd\u662f\u975e\u6cd5\u65b9\u6848\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\uff0c\u5f3a\u5236\u4ee4\u4f53\u79ef\u4e3a $s - c_i * (d_i + 1)$ \u90a3\u4e48\u6240\u6709\u65b9\u6848\u90fd\u662f\u975e\u6cd5\u7684\uff0c\u8f6c\u5316\u4e3a\u65b9\u7a0b\u4e5f\u5c31\u662f\n\n$$ans = f_s - f_{s - c_i * (d_i + 1)}$$\n\n\u8bd5\u56fe\u6269\u5927\u4e0b\u8fd9\u4e2a\u95ee\u9898\uff0c\u53d1\u73b0\u5982\u679c\u6211\u4eec\u76f4\u63a5\u53bb\u6389 $c_i * (d_i + 1)$ \u8fd8\u4f1a\u628a\u5176\u4ed6\u90e8\u5206\u7684\u5408\u6cd5\u65b9\u6848\u7ed9\u53bb\u6389\u3002\u8fd9\u91cc\u8bbe\u7b2c $i$ \u79cd\u786c\u5e01\u7684\u4e0d\u5408\u6cd5\u65b9\u6848\u96c6\u5408\u4e3a $A_i$\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u662f\u8981\u6c42 \n\n$$|A_1 \\cup A_2 \\cup A_3 \\cup A_4|$$\n\n\u8fd9\u5c31\u662f\u4e00\u4e2a\u5f88\u660e\u663e\u7684\u5bb9\u65a5\u95ee\u9898\u4e86\u3002\n\n\u6839\u636e\u5bb9\u65a5\u539f\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\n\n$$\n\\begin{aligned}\n    &|A_1 \\cup A_2 \\cup A_3 \\cup A_4| \\\\\n    &= (|A_1| + |A_2| + |A_3| + |A_4|) \\\\\n    &- (|A_1 \\cap A_2| + |A_1 \\cap A_3| +|A_1 \\cap A_4| + |A_2 \\cap A_3|+ |A_2 \\cap A_4|+ |A_3 \\cap A_4|)\\\\\n    &+ (|A_1 \\cap A_2 \\cap A_3| + |A_1 \\cap A_2 \\cap A_4| + |A_2 \\cap A_3 \\cap A_4|)\\\\\n    &- |A_1 \\cap A_2 \\cap A_3 \\cap A_4|\n\\end{aligned}\n$$\n\n\u73b0\u5728\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u4f55\u6c42 $|A_1 \\cap A_2|$ ?\n\n\u8fd8\u662f\u7c7b\u4f3c\u521a\u624d\u7684\u505a\u6cd5\uff0c\u5982\u679c\u8981\u8ba9\u8fd9\u79cd\u65b9\u6848\u6210\u7acb\uff0c\u6211\u4eec\u5c31\u5f3a\u5236\u628a\u4e24\u4e2a\u786c\u5e01\u5168\u90e8\u6263\u53bb\uff0c\u5373 $s - (c_i * (d_i + 1)) - (c_j * (d_j + 1))$ \u540c\u6837\u53ef\u4ee5\u62d3\u5c55\u5230 $n$ \u4e2a\u7684\u60c5\u51b5\u3002\n\n\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5728\u95ee\u9898\u6700\u5f00\u59cb\u65f6\u5148\u9884\u5904\u7406\u4e00\u904d\u6ca1\u6709\u9650\u5236\u7684\u9009\u62e9\u65b9\u6848 $f$\uff0c\u7136\u540e\u6bcf\u6b21\u6c42\u5e76\u96c6\u76f4\u63a5\u7b97 $f_{s - (c_i * (d_i + 1)) - (c_j * (d_j + 1))}$\n\n\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e\u5b50\u96c6\u6765\u5feb\u901f\u6c42\u89e3\uff0c\u6bd4\u5982\u8bf4 5 \u5bf9\u5e94\u7684 4 \u4f4d\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a `0110`\n\uff0c\u6211\u4eec\u5c31\u8ba4\u4e3a\u8fd9\u91cc\u662f\u8981\u6c42 $|A_2 \\cap A_3|$\n\n\u4ee3\u7801\u5b9e\u73b0\n\n```cpp\nfor (int i = 0;i < 16;++i) {\n    ll siz = 0,k = 0,tmp = 0,tot = 1;\n    ll p = i;\n    while (p) {\n        if (p & 1) {\n            tmp += c[tot] * (d[tot] + 1);\n            //\u8ba1\u7b97c_i * (d_i + 1)\n            ++siz;\n            //\u7edf\u8ba1\u5f53\u524d\u6709\u591a\u5c11\u4e2a\n        }\n        ++tot,p >>= 1;\n    }\n    if (siz % 2) k = -1;\n    else k = 1;\n    //\u5947\u52a0\u5076\u51cf\n    if (s - tmp < 0) continue;\n    //\u6392\u9664\u975e\u6cd5\u65b9\u6848\n    ans += k * f[s-tmp];\n}\n```\n\n\u4e8e\u662f\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u603b\u7ed3\uff1a\n\n1. \u5982\u679c\u6b63\u9762\u601d\u8003\u4e0d\u901a\uff0c\u5c1d\u8bd5\u7528\u6574\u4f53\u53bb\u6389\u53cd\u9762\u6765\u8ba1\u7b97\u7b54\u6848\n2. \u7edf\u8ba1\u65b9\u6848\u65f6\u51fa\u73b0\u91cd\u590d\u90e8\u5206\uff0c\u7528\u5bb9\u65a5\u539f\u7406\u6765\u5904\u7406\n3. \u6240\u8c13\u201c\u5947\u52a0\u5076\u51cf\u201d\uff0c\u5176\u5b9e\u662f\u7b2c $i$ \u9879\u7684\u8fd0\u7b97\u548c\u7b2c $i-1$ \u9879\u8fd0\u7b97\u7b26\u76f8\u53cd\uff0c\u4e3b\u8981\u786e\u5b9a\u7b2c 1 \u9879\u662f\u5565\n4. \u8fdb\u884c\u7b2c 1 \u6b65\u65f6\uff0c\u5982\u679c\u53d1\u73b0\u54ea\u91cc RE \u4e86\uff0c\u8003\u8651\u6392\u67e5\u8fb9\u754c\u95ee\u9898\u3002\n\n## \u4ee3\u7801\uff1a\n\n```cpp\n\tread(c[1],c[2],c[3],c[4],n);\n\tf[0] = 1;\n\tfor (int i = 1;i <= 4;++i) {\n\t\tfor (int j = c[i];j <= N;++j) {\n\t\t\tf[j] += f[j - c[i]];\n\t\t}\n\t}\n\twhile (n--) {\n\t\tll ans = 0;\n\t\tread(d[1],d[2],d[3],d[4],s);\n\t\tfor (int i = 0;i < 16;++i) {\n\t\t\tll siz = 0,k = 0,tmp = 0,tot = 1;\n\t\t\tll p = i;\n\t\t\twhile (p) {\n\t\t\t\tif (p & 1) tmp += c[tot] * (d[tot] + 1),++siz;\n\t\t\t\t++tot,p >>= 1;\n\t\t\t}\n\t\t\tif (siz % 2) k = -1;\n\t\t\telse k = 1;\n\t\t\t//printf(\"%lld\\n\",tmp);\n\t\t\tif (s - tmp < 0) continue;\n\t\t\tans += k * f[s-tmp];\n\t\t}\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n```\n",
        "postTime": 1599223041,
        "uid": 105230,
        "name": "Retired_Doubeecat",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\u7ec4\u5408\u3001\u8ba1\u6570\u95ee\u9898\u8003\u8651\u4f7f\u7528\u751f\u6210\u51fd\u6570\u89e3\u51b3\u3002\u751f\u6210\u51fd\u6570\u662f\u4e00\u4e2a\u5305\u542b\u95ee\u9898\u89e3\u4fe1\u606f\u7684\u591a\u9879\u5f0f\u3002\u7531\u4e8e\u591a\u9879\u5f0f\u5377\u79ef\u5177\u6709\u4f18\u79c0\u7684\u6027\u8d28\uff0c\u751f\u6210\u51fd\u6570\u5728\u7ec4\u5408\u3001\u8ba1\u6570\u95ee\u9898\u4e2d\u8d77\u5230\u91cd\u8981\u7684\u4f5c\u7528\u3002\r\n\r\n\u6b64\u9898\u4e2d\uff0c\u5bf9\u4e8e\u751f\u6210\u51fd\u6570 $f(x)=a_0+a_1x+a_2x^2+a_3x^3+\\cdots$\uff0c\u5176\u4e2d $k$ \u6b21\u9879\u7684\u7cfb\u6570 $a_k$ \u8868\u793a\u652f\u4ed8 $k$ \u4ef7\u503c\u7684\u65b9\u6848\u6570\u4e3a $a_k$\u3002\u663e\u7136\uff0c\u4f7f\u7528\u7b2c $k$ \u79cd\u786c\u5e01\u4ed8\u6b3e\u7684\u751f\u6210\u51fd\u6570 $h_k(x)=1+x^{c_k}+x^{2c_k}+\\cdots+x^{d_kc_k}=\\frac{1-x^{(d_k+1)c_k}}{1-x^{c_k}}$\u3002\r\n\r\n\u6700\u7ec8\u7b54\u6848\u7684\u751f\u6210\u51fd\u6570\u4e3a $\\prod_{k=1}^4h_k(x)=MN$\uff0c\u5176\u4e2d $M=\\prod_{k=1}^4\\frac1{1-x^{c_k}},N=\\prod_{k=1}^4(1-x^{(d_k+1)c_k})$\u3002\r\n\r\n\u8003\u8651\u5982\u4f55\u8ba1\u7b97 $M$\uff0c$M=\\prod_{k=1}^4\\frac1{1-x^{c_k}}=\\prod_{k=1}^4(1+x^{c_k}+x^{2c_k}+\\cdots)$\u3002\u7531\u4e8e\u6240\u6709\u8d2d\u4e70\u4e2d\u7684\u786c\u5e01\u9762\u503c $c_k$ \u90fd\u4e00\u81f4\uff0c\u56e0\u6b64\u6240\u6709\u8d2d\u4e70\u4e2d\u7684 $M$ \u90fd\u76f8\u540c\uff0c\u9884\u5904\u7406\u8ba1\u7b97\u4e00\u6b21\u5373\u53ef\u3002\u53c8\u56e0\u4e3a $s\\leqslant10^5$\uff0c\u6545\u53ea\u9700\u5173\u6ce8\u6b21\u6570\u5c0f\u4e8e\u7b49\u4e8e $10^5$ \u7684\u9879\uff0c\u6b21\u6570\u9ad8\u4e8e $10^5$ \u7684\u9879\u53ef\u4ee5\u820d\u5f03\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u66b4\u529b\u5c55\u5f00\u4ecd\u6709 $O(s^2)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u4f7f\u7528 $FFT$ \u4f18\u5316\u591a\u9879\u5f0f\u4e58\u6cd5\uff0c\u964d\u4f4e\u5230 $O(s\\log s)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\r\n\r\n\u8ba1\u7b97 $N$ \u65f6\u76f4\u63a5\u66b4\u529b\u5c55\u5f00\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\u3002\r\n\r\n\u5230\u6b64\uff0c\u5f97\u51fa\u4e86\u6b64\u9898\u7684\u601d\u8def\u3002\r\n\r\n```\r\n#include <iostream>\r\n#include <cstdio>\r\n#include <cmath>\r\nusing namespace std;\r\ntypedef long long ll;\r\ntypedef double db;\r\nll q,s,c[5],d[5],v[5],n[16]={1,-1,-1,1,-1,1,1,-1,-1,1,1,-1,1,-1,-1,1},ans;//n\u8868\u793aN\u5c55\u5f00\u540e\u5404\u9879\u7684\u7cfb\u6570\r\nstruct cplx\r\n{\r\n\tdb a,b;\r\n\tcplx(db x=0,db y=0){a=x;b=y;}\r\n\tinline friend cplx operator+(cplx c1,cplx c2){return cplx(c1.a+c2.a,c1.b+c2.b);}\r\n\tinline friend cplx operator-(cplx c1,cplx c2){return cplx(c1.a-c2.a,c1.b-c2.b);}\r\n\tinline friend cplx operator*(cplx c1,cplx c2){return cplx(c1.a*c2.a-c1.b*c2.b,c1.a*c2.b+c1.b*c2.a);}\r\n}f[300001],g[300001];\r\nll rev[300001],m[100001];//m\u8868\u793aM\u5c55\u5f00\u540e\u5404\u9879\u7684\u7cfb\u6570\r\ndb pi; \r\nvoid fft(ll n,cplx* f,ll type)\r\n{\r\n\tfor(int i=0;i<n;++i) rev[i]=(rev[i>>1]>>1)|(i&1)*(n>>1);\r\n\tfor(int i=0;i<n;++i)\r\n\t\tif(rev[i]<i)\r\n\t\t{\r\n\t\t\tcplx tmp=f[i];\r\n\t\t\tf[i]=f[rev[i]];\r\n\t\t\tf[rev[i]]=tmp;\r\n\t\t}\r\n\tfor(int mid=1;mid<n;mid<<=1)\r\n\t{\r\n\t\tll len=mid<<1;\r\n\t\tcplx omg(cos(pi*2/len),type*sin(pi*2/len));\r\n\t\tfor(int j=0;j<n-len+1;j+=len)\r\n\t\t{\r\n\t\t\tcplx cur(1,0);\r\n\t\t\tfor(int k=0;k<mid;++k)\r\n\t\t\t{\r\n\t\t\t\tcplx c1=f[j+k],c2=cur*f[mid+j+k];\r\n\t\t\t\tf[j+k]=c1+c2;\r\n\t\t\t\tf[mid+j+k]=c1-c2;\r\n\t\t\t\tcur=cur*omg;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nvoid dft(ll n,cplx* f)\r\n{\r\n\tfft(n,f,1);\r\n}\r\nvoid idft(ll n,cplx* f)\r\n{\r\n\tfft(n,f,-1);\r\n\tfor(int i=0;i<n;++i)\r\n\t{\r\n\t\tf[i].a/=n;\r\n\t\tf[i].b/=n;\r\n\t}\r\n}\r\nvoid init()\r\n{\r\n\tpi=acos(-1);\r\n\tll n=100000,len=1<<(ll)ceil(log2(n<<1|1));\r\n\tf[0].a=1;//\u521d\u59cb\u591a\u9879\u5f0f\u4e3a1\r\n\tfor(int i=1;i<=4;++i)\r\n\t{\r\n\t\tdft(len,f);\r\n\t\tfor(int j=0;j<len;++j) g[j]=cplx();//\u6e05\u7a7a \r\n\t\tfor(int j=0;j<=n;j+=c[i]) g[j].a=1;//\u7b2ci\u79cd\u786c\u5e01\u7684\u751f\u6210\u51fd\u6570 \r\n\t\tdft(len,g);\r\n\t\tfor(int j=0;j<len;++j) f[j]=f[j]*g[j];\r\n\t\tidft(len,f);\r\n\t\tfor(int j=n+1;j<len;++j) f[j]=cplx();//\u820d\u5f03\u9ad8\u6b21\u9879 \r\n\t}\r\n\tfor(int i=0;i<=100000;++i) m[i]=(ll)(f[i].a+0.5);\r\n}\r\nll calc(ll x)//\u8ba1\u7b97N\u7684\u67d0\u4e00\u9879 \r\n{\r\n\tll del=(x&1?v[1]:0)+(x&2?v[2]:0)+(x&4?v[3]:0)+(x&8?v[4]:0);\r\n\tif(s<del) return 0;\r\n\treturn m[s-del]*n[x];\r\n}\r\nint main()\r\n{\r\n\tfor(int i=1;i<=4;++i) scanf(\"%lld\",&c[i]);\r\n\tscanf(\"%lld\",&q);\r\n\tinit();\r\n\twhile(q--)\r\n\t{\r\n\t\tfor(int i=1;i<=4;++i) scanf(\"%lld\",&d[i]);\r\n\t\tscanf(\"%lld\",&s);\r\n\t\tfor(int i=1;i<=4;++i) v[i]=c[i]*(d[i]+1);//\u8ba1\u7b97N\u6bcf\u4e00\u9879\u7684\u6b21\u6570 \r\n\t\tans=0;\r\n\t\tfor(int i=0;i<16;++i) ans+=calc(i);//\u66b4\u529b\u5c55\u5f00N \r\n\t\tprintf(\"%lld\\n\",ans);\r\n\t}\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1657843293,
        "uid": 244009,
        "name": "TianTian2008",
        "ccfLevel": 0,
        "title": "P1450 \u9898\u89e3"
    },
    {
        "content": "\u65e2\u7136\u6ca1\u4eba\u5199\u6269\u6b27\uff0c\u90a3\u6211\u5c31\u6765\u4e00\u53d1\u5427\u3002\n\n\u6269\u6b27\u4e5f\u8fd8\u597d\uff0c\u5c31\u662f\u8dd1\u7684\u6709\u70b9\u6162\uff0c\u7136\u540e\u5199\u7684\u65f6\u5019\u8fd8\u6709\u70b9\u70e6\uff0c\u4e0d\u8fc7\u8fd8\u662f\u5361\u8fc7\u53bb\u4e86\u3002\n\n\u8003\u573a\u4e0a\u770b\u5230\u8fd9\u9053\u9898\u53c8\u8499\u4e86\u3002\u3002\u3002\n\u600e\u4e48\u56de\u4e8b\u7b2c\u4e00\u9898\u53c8\u8981\u7206\u96f6\u4e86\uff1f\n\n\u7136\u540e\u6211\u6253\u4e86\u4e2a\u66b4\u529b\u6d4b\u4e86\u4e00\u4e0b\u6781\u9650\u6570\u636e\u6839\u672c\u8fc7\u4e0d\u53bb\uff08\u5e78\u597d\u6ca1\u628a\u7535\u8111\u6574\u6b7b\u673a\uff09\n\n\u4e8e\u662f\u60f3\u4e86\u53c8\u60f3\uff0c\u6574\u51fa\u4e86\u4e2a $ O(s* t)$\u7684\u6269\u6b27\u7b97\u6cd5\uff08\u6253\u4e86\u4e00\u4e2a\u5c0f\u65f6\u7684\u6837\u5b50\uff09\u3002\n\n\uff08\u8bdd\u8bf4\u6b63\u89e3\u597d\u50cf\u5bb9\u65a5\uff09\n\n\u539f\u672c\u641e\u4e86\u4e0b\u5faa\u73af\u5c55\u5f00\u7ed3\u679c\u597d\u50cf\u4f1a\u66f4\u6162\u3002\u3002\u3002\n\n----\n\n\u8bb2\u4e00\u4e0b\u601d\u8def\uff1a\u7528\u6269\u6b27\u89e3\u3002\n\n\u5b89\u5229\u6269\u6b27\u535a\u5ba2\uff1a[Judge's Class](https://www.cnblogs.com/Judge/p/9383034.html#_lab2_0_1)\n\n\n\t\u9884\u5904\u7406\u89e3\u4e4b\u524d\u6211\u4eec\u8981\u5148\u7528\u6269\u6b27\u6c42\u51fa:\n    c1*x + c2*y = gcd(c1,c2) \u4e2d\u7684 x\u548cy \uff08\u4ee5\u53cagcd\uff09\uff0c\u8bb0\u5f55\u4e0b\u6765\uff0c\n    \u7136\u540e c1\u3001c2 \u9664\u4ee5 gcd(c1,c2)\u3002\uff08\u4f1a\u6269\u6b27\u7684\u8bdd\u5c31\u80fd\u61c2\u5427\u3002\uff09\n\t\u7136\u540e\u6211\u4eec\u5148 O(s log s) \u9884\u5904\u7406\u7528 c1\u3001c2 \u80fd\u62fc\u51fa s \u7684\u89e3\u3002\n\t\uff08\u5373 c1*x1 + c2*y1 = s \u4e2d x1\u548cy1 \u7684\u89e3\uff09\n    \u7136\u540e\u6211\u4eec\u4ee4 x1 \u8fbe\u5230\u6700\u5c0f\u6b63\u6574\u6570\u72b6\u6001\uff0c\u5373 y1 \u8fbe\u5230\u6700\u5927\u89e3\u3002\n    \u8fd9\u65f6\u5982\u679c y1 \u4e3a\u8d1f\u6570\uff0c\u5219\u65e0\u89e3\uff0c\u5c06\u6570\u7ec4\u4e2d\u7684\u503c\u8bbe\u4e3a-1\uff0cbreak\u3002\n    \u5426\u5219\u6211\u4eec\u7528\u6570\u7ec4\u8bb0\u5f55\u4e0b\u6b64\u65f6\u7684\u89e3\u3002\n    \n\t\u90a3\u4e48 c3\u3001c4 \u4e5f\u662f\u540c\u7406\u8fd9\u6837\u5904\u7406\u3002\n    \n    \u8fd9\u6837\u5904\u7406\u5b8c\u4e4b\u540e\u6211\u4eec\u53d1\u73b0\u5982\u679c\u6ca1\u6709 d \u6570\u7ec4\u7684\u9650\u5236\uff0cy/c2 \u5c31\u662f\u65b9\u6848\u6570\uff0c\n    \u90a3\u4e48\u6211\u4eec\u8003\u8651\u4e00\u4e0b d1\u5bf9x1 \u7684\u9650\u5236 \u4ee5\u53ca d2 \u5bf9 y1 \u7684\u9650\u5236\u6c42\u51fa\u89e3\u7684\u65b9\u6848\u6570\u3002\n    \u7136\u540e\u8bb0\u5f55\u7b54\u6848\u5728 f \u6570\u7ec4\u91cc\u9762\uff0c\u81f3\u4e8e c3\u3001c4 \u5c31\u8bb0\u5f55\u8fdb g \u6570\u7ec4\u3002\n    \u7136\u540e O(s) \u6eda\u51fa\u7b54\u6848\u3002\n\n\n```\n//by Judge\n#include<bits/stdc++.h>\n#define rint register int\n#define ll long long\nusing namespace std;\nconst int M=1e5+5;\n#idndef Judge\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\n#endif\nchar buf[1<<21],*p1,*p2;\ninline int read(){ int x=0,f=1; char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;\n} int c1,c2,c3,c4,d1,d2,x11,x22,y11,y22,d[5];\nint X1[M],X2[M],Y1[M],Y2[M],f[M],g[M];\nint ex_gcd(int a,int b,int& x,int& y){ /* \u5957\u4e2a\u677f\u5b50\uff0c\u5fd8\u4e86\u5c31\u73b0\u63a8 */\n\tif(!b) return x=1,y=0,a;\n\tint d=ex_gcd(b,a%b,y,x);\n\treturn y-=a/b*x,d;\n}\nint main(){\n\tc1=read(),c2=read();\n\tc3=read(),c4=read();\n\td1=ex_gcd(c1,c2,x11,y11);\n\td2=ex_gcd(c3,c4,x22,y22);\n\tc1/=d1,c2/=d1,c3/=d2,c4/=d2;\n\t/*  \u9884\u5904\u7406\u51fa\u89e3  */\n\tfor(rint s=1;s<=1e5;++s){\n\t\trint tmp=s,x=x11,y=y11;\n\t\trint a=c1,b=c2;\n\t\tif(tmp%d1){\n\t\t\tX1[s]=Y1[s]=-1;\n\t\t\tcontinue;\n\t\t}\n\t\ttmp/=d1,x*=tmp,y*=tmp;\n\t\t\n\t\ty+=x/b*a,x%=b;\n\t\tif(x<0) x+=b,y-=a;\n\t\tif(y>=0) X1[s]=x,Y1[s]=y;\n\t\telse X1[s]=Y1[s]=-1;\n\t}\n\tfor(rint s=1;s<=1e5;++s){\n\t\trint tmp=s,x=x22,y=y22;\n\t\trint a=c3,b=c4;\n\t\tif(tmp%d2){\n\t\t\tX2[s]=Y2[s]=-1;\n\t\t\tcontinue;\n\t\t}\n\t\ttmp/=d2,x*=tmp,y*=tmp;\n\t\t\n\t\ty+=x/b*a,x%=b;\n\t\tif(x<0) x+=b,y-=a;\n\t\tif(y>=0) X2[s]=x,Y2[s]=y;\n\t\telse X2[s]=Y2[s]=-1;\n\t}\n\tfor(rint T=read(),S;T;--T){\n\t\tll ans=0;\n\t\tfor(int i=1;i<=4;++i)\n\t\t\td[i]=read();\n\t\tS=read(),f[0]=g[0]=1;\n\t\t/*  \u8003\u8651\u9650\u5236\u6c42\u51fa\u65b9\u6848\u6570  */\n\t\tfor(rint s=1;s<=S;++s){\n\t\t\trint tmp=s,a=c1,b=c2;\n\t\t\trint x=X1[s],y=Y1[s];\n\t\t\tif(x<0||y<0){\n\t\t\t\tf[s]=0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\trint maxX=min(x+y/a*b,d[1]);\n\t\t\t\n\t\t\tif(d[2]<y) x+=(y-d[2]+a-1)/a*b;\n\t\t\tif(x>maxX){\n\t\t\t\tf[s]=0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tf[s]=(maxX-x)/b+1;\n\t\t}\n\t\tfor(rint s=1;s<=S;++s){\n\t\t\trint tmp=s,a=c3,b=c4;\n\t\t\trint x=X2[s],y=Y2[s];\n\t\t\tif(x<0||y<0){\n\t\t\t\tg[s]=0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\trint maxX=min(x+y/a*b,d[3]);\n\t\t\t\n\t\t\tif(d[4]<y) x+=(y-d[4]+a-1)/a*b;\n\t\t\tif(x>maxX){\n\t\t\t\tg[s]=0;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tg[s]=(maxX-x)/b+1;\n\t\t}\n        /*  O(s) \u6eda\u51fa\u7b54\u6848  */\n\t\tfor(rint i=0;i<=S;++i)\n\t\t\tans+=1ll*f[i]*g[S-i];\n\t\tprintf(\"%lld\\n\",ans);\n\t} return 0;\n}\n```",
        "postTime": 1541034672,
        "uid": 38576,
        "name": "J\u03bcdge",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "[\u67e5\u770b\u539f\u9898\u8bf7\u6233\u8fd9\u91cc](https://www.luogu.org/problem/P1450)\n\n\u770b\u5230\u8fd9\u9053\u9898\uff0c\u6700\u76f4\u89c2\u7684\u5c31\u662f\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u60c5\u51b5\u90fd\u8dd1\u4e00\u904d\u591a\u91cd\u80cc\u5305\uff0c\u7136\u800c\u8fd9\u6837\u505a\u7684\u8bdd\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u53d8\u5f97\u975e\u5e38\u5947\u5999\u2026\u2026\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u6bcf\u79cd\u94b1\u7684\u4e2a\u6570\u6ca1\u6709\u9650\u5236\u7684\u65b9\u6848\u6570\u3002\u5f88\u663e\u7136\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8dd1\u4e00\u4e2a\u5b8c\u5168\u80cc\u5305\u3002\n\n\u90a3\u4e48\uff0c\u5982\u679c\u53ea\u6709\u4e00\u79cd\u94b1\u5b58\u5728\u4e2a\u6570\u9650\u5236\u5462\uff1f\n\n\u6211\u4eec\u7528$f[i]$\u8868\u793a\u652f\u4ed8\u91d1\u989d$i$\u7684\u65b9\u6848\u6570\uff0c\u90a3\u4e48$f[s]$\u5c31\u662f\u786c\u5e01\u6ca1\u6709\u9650\u5236\u65f6\u652f\u4ed8\u7684\u65b9\u6848\u6570\u3002\u5982\u679c\u9762\u503c\u4e3a$c[i]$\u7684\u786c\u5e01\u7684\u6570\u91cf\u4e3a$d[i]$\uff0c\u90a3\u4e48\u53ea\u7528c[i]\u53ef\u4ee5\u652f\u4ed8\u7684\u6700\u5927\u91d1\u989d\u5c31\u662f$c[i]\\times d[i]$\u3002\u90a3\u4e48\uff0c\u5982\u679c\u6211\u4eec\u5148\u82b1\u6389$d[i]+1$\u5f20\u9762\u989d\u4e3a$c[i]$\u7684\u94b1\uff0c\u7136\u540e\u518d\u7528\u8fd9$4$\u79cd\u94b1\u53bb\u652f\u4ed8\u5269\u4f59\u7684\u91d1\u989d\uff0c\u90a3\u4e48\u65e0\u8bba\u5269\u4f59\u91d1\u989d\u7684\u652f\u4ed8\u65b9\u6848\u662f\u4ec0\u4e48\uff0c\u8fd9\u4e2a\u653e\u6848\u4e00\u5b9a\u4f1a\u4f7f\u7528\u81f3\u5c11$d[i]+1$\u5f20$c[i]$\uff0c\u5373$c[i]$\u7684\u4f7f\u7528\u6570\u91cf\u4e00\u5b9a\u4f1a\u8d85\u51fa\u9650\u5236\u3002\n\n\u6211\u4eec\u518d\u6765\u8003\u8651\u8fd9\u4e9b\u94b1\u5168\u90e8\u6709\u6570\u91cf\u9650\u5236\u65f6\u7684\u60c5\u51b5\u3002\n\n\u5982\u679c\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u94b1\u90fd\u6309\u4e0a\u9762\u7684\u65b9\u6848\u5904\u7406\uff0c\u90a3\u4e48\u5bf9\u4e8e\u67d0\u79cd\u5373\u8d85\u51fa$c[i]$\u7684\u9650\u5236\uff0c\u53c8\u8d85\u51fa$c[j]$\u9650\u5236\u7684\u65b9\u6848\u6570\uff0c\u6211\u4eec\u5c31\u4f1a\u51cf\u4e24\u904d\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u5bb9\u65a5\u4e00\u4e0b\u3002\n\ncode:\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n\nusing namespace std;\n\nlong long c[5],d[5],ans,tot,s,f[100005],k;\n\nint main()\n{\n\tfor(int i = 1; i <= 4; i++) scanf(\"%d\",&c[i]); scanf(\"%d\",&tot);\n\tf[0] = 1;\n\tfor(int j = 1; j <= 4; j++)\n\t\tfor(int i = 1; i <= 100000; i++)\n\t\t\tif(i >= c[j]) f[i] = f[i] + f[i - c[j]];\n\twhile(tot--)\n\t{\n\t\tfor(int i = 1; i <= 4; i++) scanf(\"%d\",&d[i]);\n\t\tscanf(\"%d\",&s);\n\t\tans = f[s];\n\t\tfor(int k = 15;k > 0; k--)\n\t\t{\n\t\t\tlong long u = 0,o = k,now = 0,cnt = 0;\n\t\t\twhile(o > 0)\n\t\t\t{\n\t\t\t\tcnt++;\n\t\t\t\tif(o & 1)\n\t\t\t\t{\n\t\t\t\t\tnow = (d[cnt] + 1) * c[cnt] + now;\n\t\t\t\t\tu ^= 1;\n\t\t\t\t}\n\t\t\t\to >>= 1;\n\t\t\t}\n\t\t\tif(now > s) continue;\n\t\t\tif(u) ans -= f[s - now];\n\t\t\telse ans += f[s - now];\n\t\t}\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1571845855,
        "uid": 150821,
        "name": "Azuree",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "## \u9898\u76ee\u603b\u7ed3\n\n\u786c\u5e01\u8d2d\u7269\u4e00\u5171\u67094\u79cd\u786c\u5e01\u3002\u9762\u503c\u5206\u522b\u4e3ac1,c2,c3,c4\u3002\u67d0\u4eba\u53bb\u5546\u5e97\u4e70\u4e1c\u897f\uff0c\u53bb\u4e86tot\u6b21\u3002\u6bcf\u6b21\u5e26di\u679aci\u786c\u5e01\uff0c\u4e70si\u7684\u4ef7\u503c\u7684\u4e1c\u897f\u3002\u8bf7\u95ee\u6bcf\u6b21\u6709\u591a\u5c11\u79cd\u4ed8\u6b3e\u65b9\u6cd5\u3002\n\n## \u6570\u636e\u8303\u56f4\n\ndi,s<=100000\n\ntot<=1000\n\n## \u89e3\u9898\u601d\u8def\n\n\u5047\u5982\u8fd9\u9053\u9898\u7528\u591a\u91cd\u80cc\u5305\u6765\u505a\uff0c\u80af\u5b9a\u4f1aT\u70b8\uff1b\n\n\u6211\u4eec\u8003\u8651\u5bb9\u65a5\uff1a\n\n\u5148\u8ba1\u7b97\u51fa\u4e0d\u8003\u8651\u786c\u5e01\u9650\u5236\u7684\u65b9\u6848\u6570\uff1b\n\n\u51cf\u53bb\u6709\u4e00\u79cd\u786c\u5e01\u8d85\u8fc7\u7684\u65b9\u6848\u6570\uff08\u662f\u4ec0\u4e48\uff1f$dp(tot-c[i]*(d[i]+1))$\uff0c\u89e3\u91ca\u4e00\u4e0b\uff0ctot-c[i]*(d[i]+1)\u662f\u6307\uff0c\u5f3a\u5236\u9009\u4e86d[i]+1\u4e2a\u786c\u5e01\uff08\u8d85\u6807\u4e86\uff09\uff0c\u5269\u4e0b\u7684\u968f\u4fbf\u9009\uff08\u80af\u5b9a\u662f\u8d85\u6807\u7684\u65b9\u6848\u6570\uff09\uff09\n\n**\u4f46\u662f\u6211\u4eec\u8981\u5bb9\u65a5**\n\n\u52a0\u4e0a\u4e24\u79cd\u786c\u5e01\uff1b\n\n\u51cf\u53bb\u4e09\u79cd\u786c\u5e01\uff1b\n\n\u52a0\u4e0a\u56db\u79cd\u786c\u5e01\uff1b\n\n## \u6613\u9519\u8bef\u533a\n\n\u6570\u7ec4\u8981\u5f00\u5bf9\uff1b\n\n## \u4ee3\u7801\u5c55\u793a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cmath>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<list>\n#include<queue>\n#include<stack>\n#include<bitset>\n#include<deque>\nusing namespace std;\n#define ll long long\n#define inf 0x3f3f3f3f\n#define ri register int\n#define il inline\n#define fi first\n#define se second\n#define mp make_pair\n#define pi pair<int,int>\n#define mem0(x) memset((x),0,sizeof (x))\n#define mem1(x) memset((x),0x3f,sizeof (x))\nil char gc() {\n    static const int BS = 1 << 22;\n    static unsigned char buf[BS], *st, *ed;\n    if (st == ed) ed = buf + fread(st = buf, 1, BS, stdin);\n    return st == ed ? EOF : *st++;\n}\n#define gc getchar\ntemplate<class T>void in(T &x)\n{\n    x = 0; bool f = 0; char c = gc();\n    while (c < '0' || c > '9') {if (c == '-') f = 1; c = gc();}\n    while ('0' <= c && c <= '9') {x = (x << 3) + (x << 1) + (c ^ 48); c = gc();}\n    if (f) x = -x;\n}\n#undef gc\nvoid out(int x) {\n    if (x < 0) putchar('-'), x = -x;\n    if (x > 9) out(x / 10);\n    putchar(x % 10 + '0');\n}\n#define N 100010\n#define int ll\nint c[5];\nint d[5], t, s;\nint f[N];\nint dp(int x) {\n    return x < 0 ? 0 : f[x];\n}\nsigned main() {\n    for (ri i = 1; i <= 4; ++i) in(c[i]);\n    f[0] = 1;\n    for (ri i = 1; i <= 4; ++i)\n        for (ri j = c[i]; j <= 100000; ++j) {\n            f[j] += f[j - c[i]];\n        }\n    in(t);\n    while (t--) {\n        for (ri i = 1; i <= 4; ++i) in(d[i]);\n        in(s);\n        int ans = f[s];\n        for (ri i = 1; i <= 4; ++i) ans -= dp(s - c[i] * (d[i] + 1));\n        for (ri i = 1; i <= 4; ++i)\n            for (ri j = i + 1; j <= 4; ++j)\n                ans += dp(s - c[i] * (d[i] + 1) - c[j] * (d[j] + 1));\n        //printf(\"%lld\\n\", ans);\n        for (ri k = 1; k <= 4; ++k)\n            for (ri i = k + 1; i <= 4; ++i)\n                for (ri j = i + 1; j <= 4; ++j)\n                    ans -= dp(s - c[i] * (d[i] + 1) - c[j] * (d[j] + 1) - c[k] * (d[k] + 1));\n        ans += dp(s - c[1] * (d[1] + 1) - c[2] * (d[2] + 1) - c[3] * (d[3] + 1) - c[4] * (d[4] + 1));\n        printf(\"%lld\\n\", ans);\n    }\n    return 0;\n}\n```",
        "postTime": 1530782918,
        "uid": 58302,
        "name": "i207M",
        "ccfLevel": 0,
        "title": "\u5bb9\u65a5\u539f\u7406-\u80cc\u5305-\u786c\u5e01\u8d2d\u7269-\u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "```cpp\n#include<iostream>\n#include<cstdio>\n#define ll long long\nusing namespace std;\n```\n/\\*\n\u611f\u89c9\u50cf\u662f\u6b63\u96be\u5219\u53cd\u7684\u601d\u8def\n\n\\*/\n/\\*\u7b54\u6848\u4e3a \u9762\u503cS\u7684\u603b\u7684\u6ca1\u6709\u786c\u5e01\u9650\u5236\u4e0b\u7684\u65b9\u6848\u6570 \u2013 \u7b2c1\u79cd\u786c\u5e01\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570 \u2013 \u7b2c2\u79cd\u786c\u5e01\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570 \u2013 \u7b2c3\u79cd\u786c\u5e01\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570 \u2013 \u7b2c4\u79cd\u786c\u5e01\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570 + \u7b2c1,2\u79cd\u786c\u5e01\u540c\u65f6\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570 + \u7b2c1,3\u79cd\u786c\u5e01\u540c\u65f6\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570 + \u2026\u2026 + \u7b2c1,2,3,4\u79cd\u786c\u5e01\u5168\u90e8\u540c\u65f6\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570\u3002\n\n\u5bb9\u65a5\u539f\u7406\u535a\u5927\u7cbe\u6df1\n\n\\*/\n```cpp\nint T,c[5],d[5],x;\nll ans,f[100002];\nvoid dfs(int x,int k,int sum)\n{\n```\n/\\*\nx \u7b2c\u51e0\u79cd\u786c\u5e01\n\nsum\u76ee\u524d\u8fd8\u80fd\u7528\u7684\u91d1\u989d\u6570\u76ee\n\nk&1==1 \u4ee3\u8868 \u8981\u51cf\u53bb\u4e0a\u4e00\u79cd\u786c\u5e01\u4f7f\u7528\u60c5\u51b5\u662f\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\u4e0b\n\n\u6362\u5269\u4e0b\u7684\u80fd\u7528\u7684\u91d1\u989d\u6570\u76ee\u7684\u65b9\u6848\u6570\n\nk&1==0 \u4ee3\u8868 \u8981\u52a0\u4e0a\u4e0a\u4e00\u79cd\u786c\u5e01\u4f7f\u7528\u60c5\u51b5\u662f\u5408\u6cd5\u7684\u60c5\u51b5\u4e0b\n\n\u6362\u5269\u4e0b\u7684\u80fd\u7528\u7684\u91d1\u989d\u6570\u76ee\u7684\u65b9\u6848\u6570\n\n \n\\*/\n```cpp\n    if(sum<0) return;\n    if(x==5)\n    {\n        if(k&1) ans-=f[sum]; \n        else ans+=f[sum];\n        return;        \n    }\n    dfs(x+1,k+1,sum-(d[x]+1)*c[x]);//\u679a\u4e3e\u5f53\u524d\u8fd9\u79cd\u786c\u5e01\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u8981\u5230\u4e0b\u4e00\u5c42\u624d\u4f1a\u51cf\u53bb\u4ed6\n    dfs(x+1,k,sum); //\u5408\u6cd5\u60c5\u51b5\n}\nint main()\n{\n    for(int i=1;i<=4;i++) scanf(\"%d\",&c[i]);\n    scanf(\"%d\",&T);\n    f[0]=1;\n    for(int i=1;i<=4;i++)\n       for(int j=c[i];j<=100000;j++)\n        f[j]+=f[j-c[i]];//\u5b8c\u5168\u80cc\u5305\u7684\u65b9\u6848\u6570\u6c42\u6cd5\n    while(T--)\n    {\n        for(int i=1;i<=4;i++) scanf(\"%d\",&d[i]);\n        scanf(\"%d\",&x);\n        ans=0;\n        dfs(1,0,x);//\u4f60\u5c31\u5f00\u5fc3\u7684\u641c\u554a\n        printf(\"%lld\\n\",ans);\n    }\n    return 0;\n}/*\n```\n1 2 5 10 2\n3 2 3 1 10\n\n1000 2 2 2 900\n\n\n4\n27\n\\*/",
        "postTime": 1516021249,
        "uid": 36397,
        "name": "\u6c89\u8fb0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\n# \u4e00\u4e2a\u5f88\u7ecf\u5178\u7684\u95ee\u9898\n$$ \\sum_{i=1}^n x_i=s$$\n\u5176\u4e2dx\u662f\u6b63\u6574\u6570\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684x\u7684\u89e3\u6709\u591a\u5c11\u4e2a?  \n\u663e\u7136\u8fd9\u4e2a\u53ef\u4ee5\u7528\u80cc\u5305\u8ba1\u7b97\n\u7528dp[k]\u8868\u793a\u80fd\u8868\u793a\u51fa\u7684\u548c\u4e3ak\u7684\u89e3\u7684\u6570\u91cf\uff0c\u6b63\u5e8f\u679a\u4e3ek\n$$ dp[k]=dp[k]+dp[k-money[i]] $$\n\u5176\u4e2dmoney[i]\u662f\u786c\u5e01\u7684\u9762\u503c\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u7ed9\u4ed6\u52a0\u4e0a\u9650\u5236\uff0c\u89c4\u5b9a\u7b2ci\u4e2ax\u7684\u4e0a\u754c\u662fc[i]  \n\u73b0\u5728\u7684x\u7684\u89e3\u7684\u603b\u6570\u53ef\u4ee5\u7528\u5bb9\u65a5\u539f\u7406\u8fdb\u884c\u8ba1\u7b97  \n\n\u6211\u4eec\u8981\u6c42\u7684\u4e1c\u897f\u662f\n$$ \\left | \\bigcap a_i\\right | $$\na_i\u4e3a\u7b2ci\u4e2a\u5143\u7d20\u6ee1\u8db3\u9650\u5236\u4e0b\u7684\u89e3\u96c6\u7684\u96c6\u5408\n\n\u4e5f\u5c31\u7b49\u4e8e\n$$ \\left | S \\right |-\\left | \\bigcup {\\overline a_i} \\right |$$\n\u9996\u5148\u6211\u4eec\u8ba1\u7b97\u51fa\u6240\u6709\u7684\u53ef\u80fd\u7684\u60c5\u51b5\u4e5f\u5c31\u662f\u5168\u96c6s  \n\u63a5\u4e0b\u6765\u6211\u4eec\u628a\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\u51cf\u53bb  \n\u6839\u636e\u5bb9\u65a5\u5b9a\u7406\u663e\u7136\u6709\u7b54\u6848=\u603b\u7684\u60c5\u51b5-1\u4e2a\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684+2\u4e2a\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684-3\u4e2a\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u2026\u2026  \n\u90a3\u4e48\u5982\u679c\u80fd\u5f88\u5feb\u7684\u6c42\u51fa\u51e0\u4e2a\u4e0d\u5408\u6cd5\u96c6\u5408\u7684\u5e76\u96c6\u7684\u8bdd\uff0c\u8fd9\u9053\u9898\u5c31\u53ef\u4ee5\u5f88\u8f7b\u677e\u7684\u89e3\u51b3\u4e86  \n\n\u8003\u8651\u51e0\u4e2a\u4e0d\u5408\u6cd5\u96c6\u5408\u7684\u5e76\u96c6\u4e5f\u662f\u4e00\u4e2a\u7b49\u5f0f\u7684\u5f62\u5f0f\uff0c\u4e0d\u8fc7\u6709\u7684x\u6709\u4e0b\u754c\uff0c\u6709\u7684x\u6ca1\u6709\u4e0b\u754c  \n\u90a3\u4e48\u663e\u7136\u4e0b\u754c\u90a3\u90e8\u5206\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u89e3\u90fd\u662f\u5b58\u5728\u7684  \n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u51cf\u53bb\n\u4e5f\u5c31\u662f\u8fd9\u6837\u7684\n$$\\sum x_i=s-sum$$\nsum\u662f\u6240\u6709\u4e0b\u754c\u7684\u548c  \n\u8fd9\u4e2a\u73a9\u610f\u7684\u6240\u6709\u89e3\u7684\u6570\u91cf\u6211\u4eec\u5df2\u7ecf\u7528dp\u5904\u7406\u51fa\u6765\u4e86\uff0c\u76f4\u63a5\u8c03\u7528\u5373\u53ef  \n\n\u6240\u4ee5\u6700\u540e\u53ea\u9700\u8981\u679a\u4e3e\u5b50\u96c6\uff0c\u7136\u540e\u89c2\u5bdf\u4e00\u4e0b\u5b50\u96c6\u4e2d\u5143\u7d20\u7684\u4e2a\u6570\uff0c\u5957\u4e0a\u4e00\u4e2a\u5bb9\u65a5\u7cfb\u6570\u5373\u53ef\n# CODE\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n#define ll long long\nll mz[5],dp[2000050],c[5];\nll ans,s;\nint main()\n{\n\tfor(int i=1;i<=4;i++)scanf(\"%d\",&mz[i]);\n\tdp[0]=1;\n\tfor(int i=1;i<=4;i++)\n\t\tfor(int k=mz[i];k<=100000;k++)\n\t\t\tdp[k]+=dp[k-mz[i]];\n\tint t;\n\tscanf(\"%d\",&t);\n\twhile(t--)\n\t{\n\t\tfor(int i=1;i<=4;i++)scanf(\"%d\",&c[i]);\t\n\t\tscanf(\"%lld\",&s);\n\t\tans=dp[s];\n\t\tfor(int i=1;i<(1<<4);i++)\n\t\t{\n\t\t\tll tmp=0,js=0;\n\t\t\tfor(int j=1;j<=4;j++)if(1<<(j-1)&i)js++,tmp+=(c[j]+1)*mz[j];\n\t\t\tif(tmp>s)continue;\n\t\t\tif(js%2==0)ans+=dp[s-tmp];\n\t\t\telse ans-=dp[s-tmp];\n\t\t}\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n} \n```",
        "postTime": 1575769331,
        "uid": 73983,
        "name": "Infiltrator",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "**\u849f\u84bb\u535a\u5ba2**\uff1a[QAQ](https://www.cnblogs.com/GoldenPotato/p/9545340.html)\n\n\n\n------------\n\n### Solution\n\n\u8fd9\u662f\u4e00\u9053\u5f88\u6709\u610f\u601d\u7684\u5728\u80cc\u5305\u91cc\u9762\u505a\u5bb9\u65a5\u7684\u9898\u76ee\u3002\n\n .\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u8f7b\u677e\u5730\u60f3\u5230\u66b4\u529b\u505a\u80cc\u5305\u7684\u505a\u6cd5\u3002\n\n\u5c31\u662f\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u8be2\u95ee\uff0c\u6211\u4eec\u90fd\u505a\u4e00\u6b21\u80cc\u5305\u3002\n\n\u590d\u6742\u5ea6$O(tot*s*log(di))$ (\u4f7f\u7528\u4e8c\u8fdb\u5236\u80cc\u5305\u4f18\u5316)\n\n\u663e\u7136\u4f1aT\u5f97\u8d77\u98de\u3002\n\n .\n\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u6362\u4e00\u79cd\u89d2\u5ea6\u6765\u601d\u8003\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u5047\u8bbe\u6ca1\u6709\u6bcf\u4e2a\u7269\u54c1\u7684\u6570\u91cf\u7684\u9650\u5236\uff0c\u90a3\u4e48\u8fd9\u6837\u5c31\u4f1a\u53d8\u6210\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u5b8c\u5168\u80cc\u5305\u95ee\u9898\u3002\n\n\u81f3\u4e8e\u5b8c\u5168\u80cc\u5305\u600e\u4e48\u5199\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u5c31\u4e0d\u505a\u8fc7\u591a\u8ba8\u8bba\uff0c\u5982\u6709\u9700\u8981\uff0c\u770b\u770b\u4ee3\u7801\u5c31\u80fd\u7406\u89e3\u4e86\u3002\n\n\u5b8c\u5168\u80cc\u5305\u505a\u5b8c\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2af[i]\u8868\u793a\u586b\u6ee1i\u7684\u80cc\u5305\u7684\u65b9\u6848\u6570\u7684\u6570\u7ec4\u3002\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u53ef\u4ee5\u7528\u5bb9\u65a5\u6765\u89e3\u51b3\u4e0d\u53ef\u884c\u7684\u65b9\u6848\u7684\u95ee\u9898\u3002\n.\n \n\n\u5047\u8bbe\u53ea\u67091\u4ef6\u7269\u54c1\u7684\u4f7f\u7528\u6b21\u6570\u8d85\u51fa\u4e86\u6240\u7ed9\u7684\u6570\u91cf\uff0c\u5047\u8bbe\u8fd9\u4ef6\u7269\u54c1\u662f\u7b2cx\u4ef6\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u7528  f[s-(d[x]+1)*c[x]] \u8868\u793a\u8fd9\u4ef6\u7269\u54c1\u4e0d\u53ef\u884c\u7684\u65b9\u6848\u603b\u6570\u3002\n\n\u56e0\u4e3a\u5bf9\u4e8e\u82b1\u94b1\u6570\u4e3a s-(d[x]+1)*c[x] \u91cc\u9762\u7684\u6bcf\u4e00\u79cd\u65b9\u6cd5\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u8d2d\u4e70 d[x]+1\u4ef6\u7684x\u7269\u54c1\u6765\u8d85\u51fa\u6240\u7ed9\u7684\u6570\u91cf\u3002\u6240\u4ee5  f[s-(d[x]+1)*c[x]] \u53ef\u4ee5\u8868\u793a\u8be5\u7269\u54c1\u4e0d\u53ef\u884c\u65b9\u6848\u603b\u6570\u3002\n\n\n .\n\n\u90a3\u4e48\u7b54\u6848\u662f\u56db\u4ef6\u7269\u54c1\u4e0d\u53ef\u884c\u65b9\u6848\u603b\u6570\u8fd9\u548c\u5417\uff1f\n\nnope\n\n**\u56e0\u4e3a\u6211\u4eec\u4f1a\u91cd\u590d\u51cf\u53bb\u4e00\u4e9b\u4e1c\u897f\u3002\u4f8b\u5982\uff1a\u4e00\u79cd\u65b9\u6848\u5373\u8d85\u51fa\u4e86\u7b2c\u4e00\u4ef6\u7269\u54c1\u7684\u4f7f\u7528\u6570\uff0c\u4e5f\u8d85\u51fa\u4e86\u7b2c\u4e8c\u4ef6\u7269\u54c1\u7684\u4f7f\u7528\u6570\uff0c\u6211\u4eec\u5374\u91cd\u590d\u6263\u9664\u4e86\u8fd9\u79cd\u65b9\u6848\u4e24\u6b21\u3002**\n\n\u6240\u4ee5\u8bf4\u6211\u4eec\u8fd9\u65f6\u5019\u5c31\u5f97\u4f7f\u7528\u5bb9\u65a5\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u5bb9\u65a5\u4e2d\u6709\u4e00\u4e2a\u5f88\u57fa\u7840\u7684\u5b9a\u7406~~\uff08\u6211\u4e0d\u4f1a\u8bc1\uff09~~\uff1a\n\n**\u5bf9\u4e8e\u6709n\u7684\u9650\u5236\u6761\u4ef6\u7684\u4e8b\u4ef6\uff0c\u53ea\u8981\u5176\u4e2d\u7b26\u5408\u4e00\u4e2a\u6761\u4ef6\u5c31\u7b97\u53ef\u884c\uff0c\u5176\u53ef\u884c\u65b9\u6848\u603b\u6570\u4e3a\uff1a**\n\n**\uff08\u7b26\u5408\u5176\u4e2d0\u4e2a\uff08\u6761\u4ef6\u7684\u65b9\u6848\u6570\uff0c\u540e\u540c\uff09-\u7b26\u5408\u5176\u4e2d1\u4e2a+\u7b26\u5408\u5176\u4e2d2\u4e2a-\u7b26\u5408\u5176\u4e2d3\u4e2a+\u7b26\u5408\u5176\u4e2d4\u4e2a-\u7b26\u5408\u5176\u4e2d5\u4e2a+\u7b26\u5408\u5176\u4e2d6\u4e2a....\uff09**\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u5b9a\u7406\u6c42\u51fa\u4e0d\u53ef\u884c\u7684\u65b9\u6848\u603b\u6570\u3002\n\n\u5bf9\u4e8e\u8fd9\u9898\u6765\u8bf4\uff0c\u4ee3\u7801\u5982\u4e0b:\n\n```cpp\nfor(a[1]=0;a[1]<=1;a[1]++)\n            for(a[2]=0;a[2]<=1;a[2]++)\n                for(a[3]=0;a[3]<=1;a[3]++)\n                    for(a[4]=0;a[4]<=1;a[4]++)\n                    {\n                        int cnt=0,t_s=s;\n                        for(int j=1;j<=4;j++)\n                            if(a[j]==1) cnt++,t_s-=(d[j]+1)*c[j];\n                        if(cnt%2==0) cnt=1;\n                        else cnt=-1;\n                        \n                        if(t_s>=0)\n                            ans=ans+cnt*f[t_s];\n                    }\n```\n                    \n~~\u8fd9\u6837\u5199\u7edd\u5bf9\u4e0d\u63a8\u8350\uff0c\u56e0\u4e3a\u8fd9\u6837\u5199\u5f88\u4e11\u3002~~\n\n \n\n\u90a3\u4e48\uff0c\u8fd9\u9898\u5c31\u53ef\u4ee5AC\u5566\n\n \n\n\n\n------------\n \n\n### Code\n```cpp\n//Luogu P1450 [HAOI2008]\u786c\u5e01\u8d2d\u7269\n//Aug,27th,2018\n//DP+\u5bb9\u65a5\n#include <iostream>\n#include <cstdio>\nusing namespace std;\nlong long read()\n{\n\tlong long x=0,f=1; char c=getchar();\n\twhile(!isdigit(c)){if(c=='-') f=-1;c=getchar();}\n\twhile(isdigit(c)){x=x*10+c-'0';c=getchar();}\n\treturn x*f;\n}\nconst int N=100000+1000;\nlong long f[N];\nint n,m;\nlong long c[5],d[5];\nint main(int argc, char **argv)\n{\n\tfor(int i=1;i<=4;i++)\n\t\tc[i]=read();\n\tm=read();\n\t\n\tf[0]=1;\n\tfor(int j=1;j<=4;j++)\n\t\tfor(int i=c[j];i<=100000;i++)\n\t\t\tf[i]+=f[i-c[j]];\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tfor(int j=1;j<=4;j++)\n\t\t\td[j]=read();\n\t\tint s=read(),a[5];\n\t\tlong long ans=0;\n\t\tfor(a[1]=0;a[1]<=1;a[1]++)\n\t\t\tfor(a[2]=0;a[2]<=1;a[2]++)\n\t\t\t\tfor(a[3]=0;a[3]<=1;a[3]++)\n\t\t\t\t\tfor(a[4]=0;a[4]<=1;a[4]++)\n\t\t\t\t\t{\n\t\t\t\t\t\tint cnt=0,t_s=s;\n\t\t\t\t\t\tfor(int j=1;j<=4;j++)\n\t\t\t\t\t\t\tif(a[j]==1) cnt++,t_s-=(d[j]+1)*c[j];\n\t\t\t\t\t\tif(cnt%2==0) cnt=1;\n\t\t\t\t\t\telse cnt=-1;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(t_s>=0)\n\t\t\t\t\t\t\tans=ans+cnt*f[t_s];\n\t\t\t\t\t}\n\t\t\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1535381620,
        "uid": 52563,
        "name": "GoldenPotato137",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "DP\u9884\u5904\u7406+\u5bb9\u65a5\u539f\u7406\u3002\n\n\u82e5\u7528\u4e00\u4e2a01\u4e32\u8868\u793a\u65b9\u6848\u79cd\u7c7b\uff0c\u7b2cI\u4f4d\u4e3a1\u8868\u793a\u6ee1\u8db3D[I]\u6761\u4ef6\uff0c\u4e3a0\u8868\u793a\u4e0d\u6ee1\u8db3\u7684\u8bdd\u3002\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u8981\u6c42\u7684\u5373\u662f1111\u3002\n\n\nPascal Code:\n\n\n\n\n\n\n```cpp\nConst\n  maxs=100001;\nVar\n  c:array[0..4] of longint;\n  d:array[0..4] of longint;\n  tot,s,i,j:longint;\n  ans:int64;\n  dp:array[0..maxs]of int64;\n  Procedure pack_dp;\n  var i:longint;\n  begin\n    fillchar(dp,sizeof(dp),0);\n    dp[0]:=1;\n    for i:=1 to 4 do\n      for j:=c[i] to maxs do dp[j]:=dp[j]+dp[j-c[i]];\n  end;\n  Procedure dfs(now,remain:longint;mark:boolean);\n  begin\n    if remain<0 then exit;\n    if now=5 then\n    begin\n        if mark then ans:=ans-dp[remain]\n                else ans:=ans+dp[remain];\n        exit;\n    end;\n    dfs(now+1,remain-c[now]*(d[now]+1),not mark);\n    dfs(now+1,remain,mark);\n  end;\n  Procedure work;\n  var\n    i,j:longint;\n  begin\n    readln(c[1],c[2],c[3],c[4],tot);\n    pack_dp;\n    for i:=1 to tot do\n    begin\n      for j:=1 to 4 do read(d[j]);readln(s);\n      ans:=0;\n      dfs(1,s,false);\n      writeln(ans);\n    end;\n  end;\nBegin\n  work;\n  readln;\nEnd.\n\n```",
        "postTime": 1383305725,
        "uid": 1443,
        "name": "21002tyj",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "[\u4f20\u9001~](https://www.luogu.com.cn/problem/P1450)\n\n\u8fd9\u662f\u9053\u7ecf\u5178\u5bb9\u65a5\u9898\u3002\u6211\u4eec\u8981\u6c42\u7684\u662f\n$$\n\\sum{c_ix_i} = s \\quad ,x_i\\leq d_i\n$$\n\n\u7684\u89e3\u7684\u4e2a\u6570\u3002\n\n\u5982\u679c\u6ca1\u6709 $d_i$ \u7684\u9650\u5236\uff0c\u8fd9\u5c31\u662f\u4e2a\u5b8c\u5168\u80cc\u5305\u95ee\u9898\uff0c\u4e8e\u662f\u6211\u4eec\u8003\u8651\u7528\u6240\u6709\u89e3\u51cf\u53bb\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u4e2a\u6570\u3002\u5bf9\u4e8e\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u6211\u4eec\u4e5f\u53ef\u4ee5\u5f97\u5230\uff1a\n\n$$\n\\sum{c_ix_i} = s \\quad ,x_i\\geq d_i+1\n$$\n\n\u53d8\u5f62\u4e00\u4e0b\uff0c\u5f97\u5230\uff1a\n\n$$\n\\sum{c_ix_i} = s-\\Big(\\sum{d_i+1}\\Big)\n$$\n\n\u8fd9\u4e5f\u662f\u4e00\u4e2a\u5b8c\u5168\u80cc\u5305\u3002\u4f46\u56e0\u4e3a\u53ef\u4ee5\u662f\u6709\u4e00\u4e9b\u6570\u6ee1\u8db3\u8981\u6c42\uff0c\u800c\u53e6\u4e00\u4e9b\u4e0d\u6ee1\u8db3\uff0c\u4e8e\u662f\u5c31\u8981\u5bb9\u65a5\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxs = 1e5;\nint c[5], d[5], n, s;\nll f[maxs+10];\nint main() {\n\tfor (int i = 1; i <= 4; ++i)\n\t\tscanf(\"%d\", &c[i]);\n\tf[0] = 1;\n\tfor (int i = 1; i <= 4; ++i)\n\t\tfor (int j = c[i]; j <= maxs; ++j)\n\t\t\tf[j] += f[j-c[i]];\n\tscanf(\"%d\", &n);\n\twhile (n--) {\n\t\tfor (int i = 1; i <= 4; ++i)\n\t\t\tscanf(\"%d\", &d[i]);\n\t\tscanf(\"%d\", &s);\n\t\tll ans = 0;\n\t\tfor (int i = 1; i < 16; i++) {\n\t\t\tint m = s, cnt = 0;\n\t\t\tfor (int j = 1; j <= 4; j++)\n\t\t\t\tif (i&(1<<(j-1))) m -= (d[j]+1)*c[j], ++cnt;\n\t\t\tif (m >= 0) ans += (cnt%2*2-1)*f[m];\n\t\t}\n\t\tprintf(\"%lld\\n\", f[s] - ans);\n\t}\n\treturn 0;\n}\n```\n\n\u540e\u8bb0\uff1a\u5bf9\u4e8e\u8fd9\u6837\u6240\u6709\u89e3\u51cf\u53bb\u4e0d\u5408\u6cd5\u7684\u6280\u5de7\uff0c\u5728CSP-S 2019 D2T1\u4e5f\u7528\u5230\u4e86",
        "postTime": 1601308895,
        "uid": 178981,
        "name": "RainHand",
        "ccfLevel": 0,
        "title": "P1450 [HAOI2008]\u786c\u5e01\u8d2d\u7269"
    },
    {
        "content": "### [HH_Halo](https://www.cnblogs.com/hhhhalo/p/13633817.html)\n## \u601d\u8def\u5206\u6790\n\u4e0a\u53bb\u5c31\u8dd1\u4e86\u4e2a\u66b4\u529b\uff0c\u7ed3\u679c\u76f4\u63a5 T \u5230\u98de\u8d77\uff0c\u8c8c\u4f3c\u5168\u662f\u5927\u6570\u636e\n\n\u6240\u4ee5\u5982\u679c\u8981\u8dd1\u80cc\u5305\u7684\u8bdd\uff0c\u90a3\u4e48\u65f6\u95f4\u9650\u5236\u662f\u53ea\u5141\u8bb8\u6211\u4eec\u8dd1\u4e00\u904d\u7684\uff0c\u8fd9\u65f6\u5019\u7684\u7b54\u6848\u5c31\u9700\u8981\u6362\u4e00\u4e2a\u5de7\u5999\u7684\u65b9\u6cd5\u6765\u5f97\u5230\n* \u6bcf\u6b21\u8be2\u95ee\u7684**\u4e0d\u540c\u5728\u4e8e\u6bcf\u79cd\u786c\u5e01\u7684\u9650\u5236\u4e2a\u6570\u4e0d\u540c**\uff0c\u6240\u4ee5\u6211\u4eec\u4e3a\u4e86\u907f\u514d\u53d7\u5176\u5f71\u54cd\uff0c\u5c31\u53ef\u4ee5\u8fd9\u6837\u8ba1\u7b97\u7b54\u6848\uff1a\n      **\u5408\u6cd5\u65b9\u6848\u6570 = \u65e0\u4e2a\u6570\u9650\u5236\u7684\u65b9\u6848\u6570 - \u4e0d\u5408\u6cd5\u7684\u65b9\u6848\u6570**\n* \u5bf9\u4e8e\u65e0\u4e2a\u6570\u9650\u5236\u7684\u65b9\u6848\u6570\uff0c\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5b8c\u5168\u80cc\u5305\uff0c\u76f4\u63a5\u9884\u5904\u7406\u5c31\u597d\u4e86\uff0c\u5173\u952e\u5728\u4e8e\u6211\u4eec\u5982\u4f55\u8fc5\u901f\u5f97\u51fa\u4e0d\u5408\u6cd5\u7684\u65b9\u6848\u6570\uff1a\n    * \u56e0\u4e3a\u53ea\u6709\u56db\u79cd\u786c\u5e01\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u51fa\uff0c\u6709\u54ea\u4e9b\u786c\u5e01\u8d85\u8fc7\u4e86\u4e2a\u6570\u9650\u5236\u4ece\u800c\u5bfc\u81f4\u65b9\u6848\u4e0d\u5408\u6cd5\n    * \u8fd9\u65f6\u53ef\u4ee5\u76f4\u63a5\u8ba9\u9009\u51fa\u7684\u786c\u5e01\u9009 $(d[i]+1)$ \u4e2a\uff0c\u5373\u4fdd\u8bc1\u8d85\u8fc7\u4e2a\u6570\u9650\u5236\uff0c\u4e0d\u5408\u6cd5\u7684\u65b9\u6848\u6570\u5c31\u662f \n    $$f[s-c[i]*(d[i]+1)]$$\n    \n\u7136\u800c**\u4e0d\u540c\u7684\u60c5\u51b5\u4f1a\u6709\u4ea4\u96c6**\uff0c\u8fd9\u65f6\u5019\u5c31\u8981\u7528\u5230\u5bb9\u65a5\u539f\u7406\uff1a\n   \n* \u8bbe\u56db\u4e2a\u786c\u5e01\u8d85\u8fc7\u4e2a\u6570\u9650\u5236\u7684\u65b9\u6848\u5206\u522b\u4e3a $A,B,C,D$\uff0c\u4f9d\u636e\u5bb9\u65a5\u539f\u7406\u5c31\u6709 \n   $$ f[A\u222aB] = f[A]+f[B]-f[A\u2229B] $$\n \u5176\u4e2d $f[A] = f[s-c[1]*(d[1]+1)]$\uff0c\u5176\u4ed6\u540c\u7406\n   \n* \u9996\u5148 $f[s] -= f[A]+f[B]+f[C]+f[D]$\uff0c\u7136\u800c\u4e24\u4e24\u4e4b\u95f4\u4f1a\u51fa\u73b0\u4ea4\u96c6\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u518d\u52a0\u4e0a\u4e24\u4e24\u7684\u4ea4\u96c6\uff0c\u8fd9\u4e9b\u4ea4\u96c6\u4e4b\u95f4\u8fd8\u4f1a\u6709\u4ea4\u96c6\uff0c\u8bf4\u660e\u52a0\u91cd\u4e86\uff0c\u8fd8\u9700\u8981\u518d\u51cf\u53bb\u4ea4\u96c6\u7684\u4ea4\u96c6\uff0c\u4ee5\u6b64\u7c7b\u63a8 ~~(\u7981\u6b62\u5957\u5a03)~~\n\n* \u6700\u7ec8\u7528\u72b6\u538b\u679a\u4e3e\u6240\u6709\u96c6\u5408\uff0c\u6839\u636e\u4e0a\u9762\u7684\u63a8\u5bfc\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff0c**\u6709\u5947\u6570\u4e2a\u5143\u7d20\u7684\u96c6\u5408\u9700\u8981\u51cf\u53bb\uff0c\u6709\u5076\u6570\u4e2a\u5143\u7d20\u7684\u9700\u8981\u52a0\u4e0a**\n\n## $Code$\n```c++\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#define N 100010\n#define R register\n#define int long long\nusing namespace std;\ninline int read(){\n\tint x = 0,f = 1;\n\tchar ch = getchar();\n\twhile(ch>'9'||ch<'0'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=(x<<1)+(x<<3)+(ch^48);ch=getchar();}\n\treturn x*f;\n}\nint n,s,c[10],d[10],f[N];\nvoid pre(){\n\tf[0] = 1;\n\tfor(R int i = 1;i <= 4;i++){\n\t    for(R int j = c[i];j <= N;j++){\n\t\t    f[j] += f[j-c[i]];\n\t    }\n\t}\n}\nvoid solve(){\n    int ans=f[s];\n    for(R int i=1;i<=15;i++){//\u72b6\u538b\u679a\u4e3e\u96c6\u5408\u5185\u5143\u7d20\n\tint tot=0,cnt=0;\n\tfor(R int j=0;j<4;j++){\n\t    if(i&(1<<j)){//\u5728\u96c6\u5408\u5185\u5219\u5f3a\u5236\u8ba9\u5176\u8d85\u8fc7\u4e2a\u6570\u9650\u5236\n\t        cnt++;//\u8bb0\u5f55\u96c6\u5408\u6570\n\t\ttot+=c[j+1]*(d[j+1]+1);\n\t    }\n\t}\n\tint flag = (cnt%2) ? -1 : 1;\n\tif(tot<=s) ans+=flag*f[s-tot];\n    }\n    printf(\"%lld\\n\",ans);\n}\nsigned main(){\n\tc[1] = read(),c[2] = read(),c[3] = read(),c[4] = read();\n\tn = read();\n\tpre();\n\tfor(R int i = 1;i <= n;i++){\n            for(R int i=1;i<=4;i++) d[i]=read();\n            s=read();\n \t    solve();\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1599564319,
        "uid": 322491,
        "name": "HH_Halo",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "### [HAOI2008]\u786c\u5e01\u8d2d\u7269\n\u5171\u6709\u56db\u79cd\u786c\u5e01\uff0c\u5176\u9762\u503c\u5206\u522b\u4e3a$c_1,c_2,c_3,c_4$\n\n$n$\u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u7ed9\u5b9a\u6bcf\u79cd\u786c\u5e01\u7684\u4e2a\u6570$D_i$\u548c\u4ed8\u6b3e\u91d1\u989d$S$\uff0c\u95ee\u5171\u6709\u591a\u5c11\u79cd\u4ed8\u6b3e\u65b9\u5f0f\n\n$n\u226410^3,S\u226410^5$\n\n#### \u66b4\u529b\u505a\u6cd5\n\u6211\u4eec\u53ef\u4ee5\u628a\u95ee\u9898\u770b\u4f5c\u505a$n$\u6b21\u591a\u91cd\u80cc\u5305\uff0c\u7528\u5355\u8c03\u961f\u5217\u4f18\u5316\uff0c\u6700\u4f18\u7684\u590d\u6742\u5ea6\u4e3a$O(n4s)$\u5728\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u8ba8\u8bba\n\n#### \u5b8c\u5168\u80cc\u5305+\u5bb9\u65a5\n\u5bf9\u4e8e\u6bcf\u6b21\u8be2\u95ee\uff0c\u76f8\u5f53\u4e8e\u7ed9\u5b9a\u56db\u4e2a\u9650\u5236\uff0c\u7b2c$i$\u4e2a\u9650\u5236\u5373\u53ea\u80fd\u81f3\u591a\u4f7f\u7528$i$\u4e2a\u786c\u5e01\u652f\u4ed8\u3002\u7c7b\u4f3c\u4e8e\u9519\u6392\uff0c\u6ee1\u8db3\u9650\u5236\u7684\u65b9\u6848\u6570=\u5168\u90e8\u65b9\u6848\u6570-\u4e0d\u6ee1\u8db3\u7684\u65b9\u6848\u6570\n\uff08\u9519\u6392\u7684\u5bb9\u65a5\u63a8\u5bfc\u53ef\u89c1https://www.luogu.com.cn/blog/maxsama/zuhemath\uff09\n\u800c\u5bf9\u4e8e\u5168\u90e8\u7684\u65b9\u6848\u6570\uff0c\u76f8\u5f53\u4e8e\u505a\u4f53\u79ef\u4e3a$S$\u7684\u5b8c\u5168\u80cc\u5305\uff0c\u800c$S$\u81f3\u591a\u4e3a$10^5$\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5$O(4S)$\u9884\u5904\u7406\u6240\u6709$S$\u3002\n\n\u800c\u5bf9\u4e8e\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u65b9\u6848\u6570\n\n\u7c7b\u4f3c\u4e8e\u9519\u6392\uff0c\u82e5\u4e0d\u6ee1\u8db3\u5176\u4e2d\u4e00\u4e2a\u9650\u5236\u6761\u4ef6\uff0c\u4e00\u5b9a\u662f\u975e\u6cd5\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe$A_i$\u4e3a\u7b2c$i$\u79cd\u786c\u5e01\u4e0d\u6ee1\u8db3\u9650\u5236\u7684\u65b9\u6848\u96c6\u5408\u3002\n\n\u90a3\u4e48\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u65b9\u6848\u6570\u5373\n$$\n\\left|\\bigcup_{i=1}^4 A_i\\right|\n$$\n\u800c\u5bf9\u4e8e$|A_i|$\uff0c\u6211\u4eec\u5f53\u524d\u4e00\u5171\u8981\u652f\u4ed8$S$\u4e2a\u786c\u5e01\uff0c\u800c\u5bf9\u4e8e\u7b2c$i$\u79cd\u53ea\u80fd\u652f\u4ed8$D_i$\u4e2a\uff0c\u90a3\u4e48\u6211\u4eec\u5982\u679c\u5148\u628a$D_i+1$\u4e2a\u786c\u5e01\u4ed8\u5b8c\u5269\u4e0b\u7684\u652f\u4ed8\u65b9\u6848\uff08\u5373\u4ece\u56db\u79cd\u786c\u5e01\u4e2d\u652f\u4ed8$S-C_i(D_i+1)$\u7684\u91d1\u989d\uff09\u662f\u4e00\u5b9a\u4e0d\u5408\u6cd5\u7684\uff0c\u56e0\u4e3a\u7b2c$i$\u4e2a\u786c\u5e01\u81f3\u5c11\u9700\u8981\u9009\u96f6\u4e2a\uff0c\u800c\u5982\u679c\u9009$0$\u4e2a\uff0c\u6700\u7ec8\u8fd8\u662f\u591a\u4ed8\u4e86\u4e00\u4e2a\u3002\n\n\u56e0\u6b64\uff0c\u7b2c$|A_i|=F[S-C_i(D_i+1)]$\n\n\u56e0\u4e3a\u6211\u4eec\u8981\u6c42\u96c6\u5408\u7684\u5e76\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u8003\u8651\u5bb9\u65a5\uff0c\u800c\u8003\u8651\u5bb9\u65a5\u6211\u4eec\u5c31\u9700\u8981\u6c42\u51fa\u96c6\u5408\u7684\u4ea4\n\n\u6211\u4eec\u8003\u8651\u4efb\u610f\u6700\u7b80\u5355\u7684\u60c5\u51b5\uff1a\u4e24\u4e2a\u96c6\u5408\u7684\u4ea4\n$$\n\\left|A_i \\bigcap\\ A_j\\right|\n$$\n\u6211\u4eec\u4ece\u5b9a\u4e49\u51fa\u53d1\uff0c$A_i$\u4e3a\u7b2c$i$\u79cd\u786c\u5e01\u4e0d\u6ee1\u8db3\u9650\u5236\u7684\u65b9\u6848\u96c6\u5408\uff0c\u800c$A_j$\u4e3a\u7b2c$j$\u79cd\u786c\u5e01\u4e0d\u6ee1\u8db3\u9650\u5236\u7684\u65b9\u6848\u96c6\u5408\u3002\n\n\u800c\u663e\u7136\uff0c\u540c\u65f6\u6ee1\u8db3$i$\u79cd\u786c\u5e01\u4e0d\u6ee1\u8db3\u9650\u5236\u4e0e$j$\u79cd\u786c\u5e01\u4e0d\u6ee1\u8db3\u9650\u5236\u8fd9\u6837\u7684\u6027\u8d28\u7684\u96c6\u5408\uff0c\u4e3a\u5b83\u4eec\u7684\u4ea4\u3002\n\n\u540c\u6837\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u4ed6\u4eec\u4e24\u4e2a\u7684$D_i+1$\u90fd\u5148\u652f\u4ed8\u51fa\u53bb\uff0c\u90a3\u4e48\u5219\u6709\n$$\n\\left|A_i \\bigcap\\ A_j\\right|=F[S-C_i(D_i+1)-C_j(D_j+1)]\n$$\n\n\u90a3\u4e48\n$$\n\\begin{aligned}\nans&=F[s]-\\left|\\bigcup_{i=1}^4 A_i\\right| \\\\ \n&=F[s]-\\sum_{T \\subseteq\\{1,2,3,4\\}} -1^{|T|-1}\\left|\\bigcap_{j \\in T } A_{j}\\right| \\\\ \n&=F[s]-(-1)^{|T|-1}F[S-\\sum_{j \\in T} C_{j}\\left(D_{j}+1\\right)]\\\\ \n&=F[s]+(-1)^{|T|}F[S-\\sum_{j \\in T} C_{j}\\left(D_{j}+1\\right)]\n\\end{aligned}\n$$\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u72b6\u538b\u679a\u4e3e$T$\u7b97\u51fa\u7b54\u6848\u3002\n\n\u603b\u7684\u590d\u6742\u5ea6\u4e3a$O(4S+16n)$\n\n\u4ee3\u7801\uff1a\n```cpp\n\n#include <iostream>\n\nusing namespace std;\n\nconst int maxn = 10;\n\nint c[maxn],d[maxn];\n\nlong long f[100010];\n\nint main(){\n\tint n;\n\tcin >> c[1] >> c[2] >> c[3] >> c[4] >> n;\n\tf[0] = 1;\n\tfor (int i = 1; i <= 4; i++){\n\t\tfor (int j = c[i]; j <= 100010; j++){\n\t\t\tf[j] += f[j - c[i]];\n\t\t}\n\t}\n\twhile(n--){\n\t\tint s;\n\t\tcin >> d[1] >> d[2] >> d[3] >> d[4] >> s;\n\t\tlong long ans = f[s];\n\t\tfor (int i = 0; i < 1 << 4; i++){\n\t\t\tlong long sum = 0,cnt = 0;\n\t\t\tfor (int j = 0; j < 4; j++){\n\t\t\t\tif (i >> j & 1){ \n\t\t\t\t\tsum += c[j + 1] * (d[j + 1] + 1);\n\t\t\t\t\tcnt++;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//cout << sum << endl;\n\t\t\tlong long t = s - sum;\n\t\t\tif (cnt % 2 == 0 && t >= 0 && sum != 0) ans += f[s - sum];\n\t\t\telse if (t >= 0 && sum != 0) ans -= f[s - sum];\n\t\t}\n\t\tcout << ans << endl;\n\t}\n\t//system(\"PAUSE\");\n\treturn 0;\n}\n\n\n```\n",
        "postTime": 1593865682,
        "uid": 317459,
        "name": "RyexAwl",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "[\u535a\u5ba2\u4f20\u9001\u95e8](https://www.cnblogs.com/topsecret/p/11626423.html)\n\n## \u89e3\u7b54\n\n\u6839\u636e**\u5bb9\u65a5\u539f\u7406**\n\n$$\n\\left|\\bigcap_{i=1}^n \\overline{S_i}\\right| = |U| - \\left|\\bigcup_{i=1}^n S_i\\right| =\n\\sum_{0 \\le k\\le n}(-1)^k\\sum_{1\\le i_1<\\cdots<i_k\\le n}\\left|\\bigcap_{j=1}^k S_{i_j}\\right|\n$$\n\n\u5176\u4e2d$S_i$\u8868\u793a\u7b2c$i$\u79cd\u5143\u7d20\u8d85\u9650\u7684\u53d6\u7684\u65b9\u6cd5\u96c6\u5408\uff0c\u4ea4\u7684\u521d\u59cb\u503c\u662f$U$\u3002\uff08$U$\u8868\u5168\u96c6\uff0c$\\overline A$\u8868$A$\u5728$U$\u4e0b\u7684\u8865\u96c6\uff09\n\n\u5982\u4f55\u6c42\u51fa$\\left|\\bigcap_{j=1}^k S_{i_j}\\right|$\uff1f\n\u8003\u8651\u5148\u6c42\u51fa\u5b8c\u5168\u80cc\u5305\u7684dp\u503c\n\u7136\u540e\u5f3a\u5236\u5c06\u7b2c$i_j$\u4e2a\u5143\u7d20\u9009\u53d6\u8d85\u8fc7$d_{i_j}$\u4e2a\u3002\n\u8fd9\u6837\u7684\u65b9\u6848\u603b\u6570\u4e3a$dp[t]-dp[t-\\sum_{j=1}^k(d_i+1)c_i]$\u3002\uff08$dp[]$\u7684\u8d1f\u6570\u9879\u4e3a$0$\uff09\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u6109\u5feb\u5730\u5bb9\u65a5\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int n = 4, mx = 1e5+10, pm[] = {1,-1};\n#define int long long\n\nint c[n], d[n], dp[mx] = {1};\n\nsigned main() {\n\tfor (int i = 0; i < 4; ++i) {\n\t\tcin >> c[i];\n\t\tfor (int j = c[i]; j < mx; ++j)\n\t\t\tdp[j] += dp[j-c[i]];\n\t}\n\tint tot, s;\n\tcin >> tot;\n\twhile (tot--) {\n\t\tfor (int i = 0; i < 4; ++i) cin >> d[i];\n\t\tcin >> s;\n\t\tint res = 0;\n\t\tfor (int i = 0; i < 16; ++i) {\n\t\t\tint tmp = s, cnt = 0;\n\t\t\tfor (int j = 0; j < 4; ++j) {\n\t\t\t\tif ((i>>j) & 1) {\n\t\t\t\t\tcnt++;\n\t\t\t\t\ttmp -= (d[j]+1)*c[j];\n\t\t\t\t}\n\t\t\t}\n//\t\t\tcout << cnt << ' ' << tmp << endl;\n\t\t\tres += pm[cnt%2]*(tmp>=0?dp[tmp]:0);\n\t\t}\n\t\tcout << res << endl;\n\t}\n}\n\n```",
        "postTime": 1572938619,
        "uid": 73915,
        "name": "frank3215",
        "ccfLevel": 9,
        "title": "[HAOI2008]\u786c\u5e01\u8d2d\u7269"
    },
    {
        "content": "\u9898\u89e3\u540c\u6b65\u53d1\u5e03\u4e8e[blog](https://www.cnblogs.com/wzzorz/articles/10349284.html)  \n\n------------\n\u672c\u9898\u60f3\u5230\u591a\u91cd\u80cc\u5305\u8fd8\u662f\u5f88\u5bb9\u6613\u7684~~(\u4ec0\u4e48?\u4e0d\u77e5\u9053\u591a\u91cd\u80cc\u5305?)~~  \n\u4f46\u662f\uff0c\u53e6\u4e00\u9898\u89e3\u5df2\u7ecf\u5c06\u65f6\u95f4~~\u5b89\u6392~~\u8ba1\u7b97\u5730\u660e\u660e\u767d\u767d  \n\u6240\u4ee5\u60f3\u5230**\u5b8c\u5168\u80cc\u5305**(\u591a\u91cd\u80cc\u5305\u8ddf01\u80cc\u5305\u4f3c\u4e4e\u533a\u522b\u4e0d\u5927)  \n\u53ef\u4ee5\u5148\u9884\u5904\u7406\u5b8c\u5168\u80cc\u5305\u7684\u60c5\u51b5\uff0c\u7136\u540e~~\u778e\u641e~~**\u5bb9\u65a5\u539f\u7406**  \n\u4e0d\u61c2\u5bb9\u65a5\u539f\u7406\u7684\u770b\u8fd9\u91cc\uff1a[\u4f20\u9001\u95e8](https://www.sohu.com/a/198865515_128501)  \n\u60f3\u5230**\u5b8c\u5168\u80cc\u5305**\u548c**\u5bb9\u65a5\u539f\u7406**\u540e\uff0c\u5269\u4e0b\u7684\u5c31\u53ea\u662f~~\u6253\u8868~~\u4e00\u4e9b\u7b80\u5355\u7684\u5b9e\u73b0\u4e86  \n\u4e0a\u4ee3\u7801\n\n------------\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long c[5],d[5],dp[100010],tot,s;\nlong long Q(long long x)//\u4fbf\u4e8e\u6253\u8868\n{\n\treturn c[x]*(d[x]+1);\n}\nint main()\n{\n\tfor(int i=1;i<=4;i++)\n\t{\n\t\tcin>>c[i];\n\t}\n\tcin>>tot;\n\tdp[0]=1;//\u521d\u59cb\u5316\uff0c\u4e4b\u540e\u9884\u5904\u7406\n\tfor(int i=1;i<=4;i++)\n\t{\n\t\tfor(int j=c[i];j<=100001;j++)\n\t\t{\n\t\t\tdp[j]+=dp[j-c[i]];\n\t\t}\n\t}\n\tfor(int js=1;js<=tot;js++)\n\t{\n\t\tfor(int i=1;i<=4;i++)\n\t\t{\n\t\t\tcin>>d[i];\n\t\t}\n\t\tcin>>s;\n\t\tlong long ans=dp[s];//\u521d\u59cb\uff0c\u4e4b\u540e\u5bb9\u65a5\u539f\u7406\u4ee3\u7801\n\t\tif(s>=Q(1))\n\t\t\tans-=dp[s-Q(1)];\n\t\tif(s>=Q(2))\n\t\t\tans-=dp[s-Q(2)];\t\t\n\t\tif(s>=Q(3))\n\t\t\tans-=dp[s-Q(3)];\n\t\tif(s>=Q(4))\n\t\t\tans-=dp[s-Q(4)];\n\t\tif(s>=Q(1)+Q(2))\n\t\t\tans+=dp[s-Q(1)-Q(2)];\n\t\tif(s>=Q(1)+Q(3))\n\t\t\tans+=dp[s-Q(1)-Q(3)];\n\t\tif(s>=Q(1)+Q(4))\n\t\t\tans+=dp[s-Q(1)-Q(4)];\n\t\tif(s>=Q(2)+Q(3))\n\t\t\tans+=dp[s-Q(2)-Q(3)];\n\t\tif(s>=Q(2)+Q(4))\n\t\t\tans+=dp[s-Q(2)-Q(4)];\n\t\tif(s>=Q(3)+Q(4))\n\t\t\tans+=dp[s-Q(3)-Q(4)];\n\t\tif(s>=Q(1)+Q(2)+Q(3))\n\t\t\tans-=dp[s-Q(1)-Q(2)-Q(3)];\n\t\tif(s>=Q(1)+Q(2)+Q(4))\n\t\t\tans-=dp[s-Q(1)-Q(2)-Q(4)];\n\t\tif(s>=Q(1)+Q(3)+Q(4))\n\t\t\tans-=dp[s-Q(1)-Q(3)-Q(4)];\n\t\tif(s>=Q(2)+Q(3)+Q(4))\n\t\t\tans-=dp[s-Q(2)-Q(3)-Q(4)];\n\t\tif(s>=Q(1)+Q(2)+Q(3)+Q(4))\n\t\t\tans+=dp[s-Q(1)-Q(2)-Q(3)-Q(4)];//\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u4e2a\u8868\u6253\u5f97\u76f8\u5f53\u7f8e\u89c2~\n\t\tcout<<ans<<endl;\n\t}\n} \n```",
        "postTime": 1549116015,
        "uid": 97593,
        "name": "G_A_TS",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\u5bb9\u65a5+dp\u697c\u4e0b\u5df2\u7ecf\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u505a\u9898\u7684\u65f6\u5019\u65e0\u804a\u753b\u4e86\u753b\u56fe\u65b9\u4fbf\u5927\u5bb6\u76f4\u89c2\u611f\u53d7\u4e0b\u5bb9\u65a5\u539f\u7406emmm\n\n\u4e8e\u662f\u7b54\u6848\u5c31\u662f\u4e0d\u52a0\u9650\u5236\u7684\u65b9\u6848\u6570-\u7528\u8d85\u4e00\u679a\u7684\u65b9\u6848\u6570+\u7528\u8d85\u4e24\u679a\u7684-\u7528\u8d85\u4e09\u679a\u7684+\u7528\u8d85\u56db\u679a\u7684\n\n```cpp\n![N6wbn.png](https://s1.ax1x.com/2017/10/22/N6wbn.png)\n![N6r5V.png](https://s1.ax1x.com/2017/10/22/N6r5V.png)\n![N6DU0.png](https://s1.ax1x.com/2017/10/22/N6DU0.png)\n![N6BEq.png](https://s1.ax1x.com/2017/10/22/N6BEq.png)\n//\u611f\u8c22leozhudd\u7684\u56fe\u5e8a\u6280\u672f\u652f\u6301qwq\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nlong long c[5],d[5],tot,s,ans;\nlong long f[1000005];\nint main(){\n    for(int i=1;i<=4;i++)scanf(\"%lld\",&c[i]);\n    scanf(\"%lld\",&tot);\n    for(int k=1;k<=tot;k++){\n        scanf(\"%lld%lld%lld%lld%lld\",&d[1],&d[2],&d[3],&d[4],&s);\n        memset(f,0,sizeof f);\n        f[0]=1;\n        for(int i=1;i<=4;i++){\n            for(int j=1;j<=s;j++){\n                if(j-c[i]>=0){\n                    f[j]=f[j]+f[j-c[i]];\n                }\n            }\n        }\n        ans=f[s];\n        for(int i=1;i<=4;i++)\n            if(s>=(d[i]+1)*c[i])\n                ans-=f[s-(d[i]+1)*c[i]];\n        for(int i=1;i<=4;i++)\n            for(int j=i+1;j<=4;j++)\n                if(s>=(d[i]+1)*c[i]+(d[j]+1)*c[j])\n                    ans+=f[s-(d[i]+1)*c[i]-(d[j]+1)*c[j]];\n        for(int i=1;i<=4;i++){\n            long long t=0;\n            for(int j=1;j<=4;j++){\n                if(i!=j) t+=(d[j]+1)*c[j];\n            }\n            if(s>=t)\n                ans-=f[s-t];\n        }\n        long long t=0;\n        for(int i=1;i<=4;i++)t+=(d[i]+1)*c[i];\n        if(s>=t)ans+=f[s-t];\n        printf(\"%lld\\n\",ans);\n    }\n    return 0;\n}\n```",
        "postTime": 1508687250,
        "uid": 12779,
        "name": "yeyyx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "### \u6e29\u99a8\u63d0\u793a\uff1a[\u5728\u535a\u5ba2\u98df\u7528\u6548\u679c\u66f4\u4f73](https://www.luogu.com.cn/blog/224229/solution-p1450)\n\n\u672c\u9898\u4e4d\u4e00\u770b\uff0c\u4e00\u9053\u5206\u7ec4\u80cc\u5305\uff0c\u4f46\u4e00\u7b97\u590d\u6742\u5ea6\uff0c\u76f4\u63a5\u66b4\u6bd9\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u59a8\u4ece\u7b80\u5316\u7248\u7684\u5f00\u59cb\u5165\u624b\u3002\n\n1. \u5f53\u786c\u5e01\u6570\u91cf\u6ca1\u6709\u4efb\u4f55\u9650\u5236\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5b8c\u5168\u80cc\u5305\u5148\u9884\u5904\u7406\u51fa$dp[i]$\u8868\u793a\u4ef7\u503c\u4e3a$i$\u65f6\u7684\u65b9\u6848\u6570\uff0c\u518d$O(1)$\u5bf9\u6bcf\u4e2a\u8be2\u95ee\u8fdb\u884c\u56de\u7b54\n\n2. \u5f53\u53ea\u6709\u4e24\u4e2a\u786c\u5e01\u65f6\uff0c\u6211\u4eec\u7b54\u6848\u5373\u4e3a\n$$\nans =dp[i]-(dp[i-(cnt_1+1) * val_1]+dp[i-(cnt_2+1) * val_2])+dp[i-(cnt_1+1) * val_1-(cnt_2+1) * val_2]\n$$\n\u5373\u65e0\u9650\u5236\u7684\u65b9\u6848\u6570\u5206\u522b\u51cf\u53bb\u786c\u5e011\u8d85\u9650\u7684\u65b9\u6848\u6570\u548c\u786c\u5e012\u8d85\u9650\u7684\u65b9\u6848\u6570\uff0c\u518d\u52a0\u4e0a\u91cd\u590d\u51cf\u53bb\u7684\u4e3a\u4e24\u786c\u5e01\u90fd\u8d85\u9650\u7684\u65b9\u6848\u6570\n\n\u90a3\u4e48\u73b0\u5728\uff0c\u5bf9\u4e8e\u672c\u9898\u5c31\u6709\u4e00\u4e2a\u6e05\u6670\u7684\u89e3\u6cd5\uff1a\n\n**\u5148\u6c42\u51fa\u65e0\u9650\u5236\u7684\u65b9\u6848\u6570\uff0c\u518d\u51cf\u53bb\u5355\u4e2a\u786c\u5e01\u8d85\u9650\u7684\u60c5\u51b5\uff0c\u7136\u540e\u52a0\u4e0a\u4e24\u4e2a\u786c\u5e01\u8d85\u9650\u7684\u60c5\u51b5\uff0c\u518d\u51cf\u53bb\u4e09\u54e5\u786c\u5e01\u8d85\u9650\u7684\u60c5\u51b5\uff0c\u6700\u540e\u518d\u52a0\u4e0a\u56db\u4e2a\u786c\u5e01\u8d85\u9650\u7684\u60c5\u51b5\uff0c\u5373\u4e3a\u6700\u7ec8\u7b54\u6848**\n\n\u800c\u5bf9\u4e8e\u786c\u5e01\u8d85\u9650\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u72b6\u6001\u538b\u7f29\u7684\u65b9\u6cd5\u8868\u793a\u8be5\u786c\u5e01\u662f\u5426\u8d85\u9650\n\n>> **_Talk is cheap,show you the code_**\n\n```cpp\n#include<stdio.h>\n#include<iostream>\n#include<cstring>\n#include<math.h>\n#define ll long long\n#define debug(x) printf(\"debug: %lld\\n\",x);\nusing namespace std;\nint d[5],c[5],n,s;\nint dp[100005];\n\nint read()\n{\n\tint num,sign=1;\n\tchar c;\n\twhile((c=getchar())<'0'||c>'9')\n\t\tif(c=='-')sign=-1;\n\tnum=c-'0';\n\twhile((c=getchar())>='0'&&c<='9')\n\t\tnum=(num<<1)+(num<<3)+c-'0';\n\treturn num*sign;\n}\n\nsigned main(void)\n{\n\td[1]=read(),d[2]=read(),d[3]=read(),d[4]=read(),n=read();\n\tdp[0]=1;\n\tfor(register int i=1;i<=4;++i)\n\t\tfor(register int j=d[i];j<=100004;++j)\n\t\t\tdp[j]+=dp[j-d[i]];\n\twhile(n--)\n\t{\n\t\tll ans=0;\n\t\tc[1]=read(),c[2]=read(),c[3]=read(),c[4]=read(),s=read();\n\t\tfor(register int i=0;i<=15;++i)\n\t\t{\n\t\t\tll t=s,cnt=0;\n\t\t\tfor(register int j=1;j<=4;++j)\n\t\t\t\tif((i>>(j-1))&1)t-=(c[j]+1)*d[j],cnt^=1;\n\t\t\tif(t<0)continue;\n\t\t\tans+=cnt?-dp[t]:dp[t];\n\t\t}\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1588991709,
        "uid": 224229,
        "name": "Caicz",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "\u5178\u578b\u7684\u80cc\u5305+\u5bb9\u65a5\n\n\u9996\u5148\uff0c\u8003\u8651\u5982\u679c\u6ca1\u6709\u4e2a\u6570\u7684\u9650\u5236\uff0c\u90a3\u4e48\u5c31\u662f\u4e00\u4e2a\u5b8c\u5168\u80cc\u5305\uff0c\u6240\u4ee5\u5148\u8dd1\u4e00\u4e2a\u5b8c\u5168\u80cc\u5305\uff0c\u6c42\u51fa\u6ca1\u6709\u4e2a\u6570\u9650\u5236\u7684\u65b9\u6848\u6570\u5373\u53ef\n\n\u63a5\u4e0b\u6765\uff0c\u5982\u679c\u6709\u4e2a\u6570\u7684\u9650\u5236\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8981\u5229\u7528\u4e00\u4e9b\u5bb9\u65a5\u7684\u601d\u60f3\uff1a\u6ca1\u67091\u4e2a\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848=\u81f3\u5c110\u4e2a\u8d85\u8fc7\u9650\u5236-\u81f3\u5c111\u4e2a\u8d85\u8fc7\u9650\u5236+\u81f3\u5c112\u4e2a\u8d85\u8fc7\u9650\u5236-\u81f3\u5c113\u4e2a\u8d85\u8fc7\u9650\u5236+\u81f3\u5c114\u4e2a\u8d85\u8fc7\u9650\u5236\n\n\u6240\u4ee5\u6211\u4eec\u75282\u8fdb\u5236\u6570\u679a\u4e3e\u8c01\u8d85\u8fc7\u4e86\u9650\u5236\uff0c\u7136\u540e\u52a0\u5165\u4e0a\u9762\u7684\u5bb9\u65a5\u5373\u53ef\n\n\u5176\u4e2d\uff1a\u5982\u679c\u7b2ci\u79cd\u786c\u5e01\u7684\u9650\u5236\u4e3ani\uff0c\u90a3\u4e48\u5982\u679ci\u8981\u6c42\u8d85\u8fc7\u9650\u5236\uff0c\u90a3\u4e48\u81f3\u5c11\u8981\u7528ni+1\u4e2a\uff0c\u6240\u4ee5i\u8d85\u8fc7\u9650\u5236\u7684\u65b9\u6848\u6570\u4e3af[s-\uff08ni+1\uff09ci]\uff08f[s]\u4e3a\u5168\u65b9\u6848\u6570\uff09\n\n```cpp\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n#include <cstdlib>\n#include <iostream>\n#include <algorithm>\n#include <queue>\n#include <stack>\n#define ll long long\nusing namespace std;\nll dp[100005];\nint c[5];\nint l[5];\nint q;\nint cot(int sit)\n{\n    int cnt=0;\n    if(sit&1)\n    {\n        cnt++;\n    }\n    if(sit&2)\n    {\n        cnt++;\n    }\n    if(sit&4)\n    {\n        cnt++;\n    }\n    if(sit&8)\n    {\n        cnt++;\n    }\n    return cnt;\n}\nint main()\n{\n    for(int i=1;i<=4;i++)\n    {\n        scanf(\"%d\",&c[i]);\n    }\n    dp[0]=1;\n    for(int j=1;j<=4;j++)\n    {\n        for(int i=1;i<=100000;i++)\n        {\n            if(i>=c[j])\n            {\n                dp[i]+=dp[i-c[j]];\n            }\n        }\n    }\n    scanf(\"%d\",&q);\n    while(q--)\n    {\n        for(int i=1;i<=4;i++)\n        {\n            scanf(\"%d\",&l[i]);\n        }\n        int s;\n        scanf(\"%d\",&s);\n        ll ans=0;\n        for(int i=0;i<16;i++)\n        {\n            int temp=s;\n            if(cot(i)&1)\n            {\n                for(int j=0;j<4;j++)\n                {\n                    if((1<<j)&i)\n                    {\n                        temp-=(l[j+1]+1)*c[j+1];\n                    }\n                }\n                if(temp<0)\n                {\n                    continue;\n                }else\n                {\n                    ans-=dp[temp];\n                }\n            }else\n            {\n                for(int j=0;j<4;j++)\n                {\n                    if((1<<j)&i)\n                    {\n                        temp-=(l[j+1]+1)*c[j+1];\n                    }\n                }\n                if(temp<0)\n                {\n                    continue;\n                }else\n                {\n                    ans+=dp[temp];\n                }\n            }\n        }\n        printf(\"%lld\\n\",ans);\n    }\n    return 0;\n}\n\n```\n",
        "postTime": 1555835701,
        "uid": 66905,
        "name": "leozhang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    },
    {
        "content": "### Description\n\n\u4e00\u5171\u6709 $4$ \u79cd\u786c\u5e01\u3002\u9762\u503c\u5206\u522b\u4e3a $c_1,c_2,c_3,c_4$ \u3002\u67d0\u4eba\u53bb\u5546\u5e97\u4e70\u4e1c\u897f\uff0c\u53bb\u4e86 $tot$ \u6b21\u3002\u6bcf\u6b21\u5e26 $d_i$ \u679a $c_i$ \u786c\u5e01\uff0c\u4e70 $s$ \u7684\u4ef7\u503c\u7684\u4e1c\u897f\u3002\u8bf7\u95ee\u6bcf\u6b21\u6709\u591a\u5c11\u79cd\u4ed8\u6b3e\u65b9\u6cd5\u3002\n\n<!-- more --> \n\n### Solution\n\n\u8003\u8651\u6ca1\u6709 $d$ \u7684\u9650\u5236\uff0c\u76f4\u63a5\u5b8c\u5168\u80cc\u5305\u3002$dp_i$ \u8868\u793a $i$ \u8fd9\u4e2a\u9762\u503c\u7528 $c_1...c_4$ \u51d1\u6709\u591a\u5c11\u79cd\u65b9\u6cd5\n\n\u52a0\u4e0a\u9650\u5236\u5c31\u5bb9\u65a5\u679a\u4e3e $16$ \u79cd\u60c5\u51b5\u8868\u793a\u54ea\u51e0\u79cd\u9762\u503c\u7684\u6027\u8d28\u6ca1\u6709\u88ab\u6ee1\u8db3\u3002\n\n\u7136\u540e\u53ef\u4ee5\u89c2\u5bdf\u5230\uff0c\u5982\u679c\u5bf9\u4e8e $i$ \u4e0d\u6ee1\u8db3\u9650\u5236\uff0c\u65b9\u6848\u6570\u5c31\u662f $dp_{s-(d_i+1)c_i}$ \n\n\u6240\u4ee5\u5f52\u7eb3\u4e00\u4e0b\u5c31\u662f \n$$\nans = \\sum\\limits_{S \\subseteq {1,2,3,4}}(-1)^{|S|}dp_{(s-\\sum\\limits_{x \\in S} (d_x+1)c_x)}\n$$\n\n### Code\n[\u770b\u4ee3\u7801\u6233\u8fd9\u91cc](https://acfunction.github.io/2019/03/09/BZOJ1042/#Code)",
        "postTime": 1552135040,
        "uid": 54745,
        "name": "Gypsophila",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P1450 \u3010[HAOI2008]\u786c\u5e01\u8d2d\u7269\u3011"
    }
]
[
    {
        "content": "[\u672c\u849f\u84bb\u7684Blog(\u6233\u8fd9\u513f\u5440QwQ)](https://www.chnxuzhiyuan.cn/2019/01/24/%E3%80%8CBJOI2014%E3%80%8D%E6%83%B3%E6%B3%95-Solution/)\n\n\u4ec0\u4e48\u9b3c\uff1f\u7701\u9009\u4e5f\u51fa\u8fd9\u79cd\u7384\u5b66\u968f\u673a\u7b97\u6cd5\u9898\uff1f\n\n\u9996\u5148\u8fd9\u9898\u4e00\u770b\u5c31\u5f88\u4e0d\u53ef\u89e3\u3002\n\n\u6240\u4ee5\u4e0a\u968f\u673a\u7b97\u6cd5\uff08~~\u4eba\u5bb6\u9898\u9762\u90fd\u544a\u8bc9\u4f60\u4e86QwQ~~\uff09\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u8282\u70b9\uff0c\u5c06\u6240\u7528\u80fd\u8d70\u5230\u5b83\u7684\u53f6\u5b50\u8282\u70b9\u90fd\u5b58\u4e0b\u6765\u662f\u4e0d\u73b0\u5b9e\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u5b58$k$\u4e2a\u3002\u5e76\u4e14\u6211\u4eec\u8981\u5148\u4e3a\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9i\u968f\u673a\u4e00\u4e2a\u6743\u503c$W_i$\uff0c\u6ee1\u8db3$W_i \\in [1,RANDMAX]$\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\uff0c\u6211\u4eec\u9700\u8981\u5b58\u4e0b\u6240\u6709\u80fd\u8d70\u5230\u4e2a\u8282\u70b9\u7684\u53f6\u5b50\u8282\u70b9\u7684\u6743\u503c\u7684\u524d$k$\u5c0f\u3002\u8bbe\u8fd9\u4e2a\u8282\u70b9\u7684\u7b54\u6848\u4e3a$ans$\uff0c\u7b2c$k$\u5c0f\u6743\u503c\u4e3a$F_k$\u6839\u636e\u671f\u671b\u53ef\u5f97\n\n$\\frac{F_k}{RANDMAX}=\\frac{k}{ans}$\n\n\u6545\u6709\n\n$ans=\\frac{k*RANDMAX}{F_k}$\n\n\u4ee4$k=50$\uff0c\u591a\u4e3a\u53f6\u5b50\u8282\u70b9\u968f\u673a\u51e0\u5957\u6743\u503c\u6c42\u5e73\u5747\u503c\uff0c\u5438\u4e2a\u6c27\uff0c~~\u653e\u4e2a\u5927\u60b2\u5492\uff0c\u9009\u4e2a\u597d\u79cd\u5b50\uff0c~~\u4f60\u5c31\u80fdAC\u4e86\u3002\n\n### \u4ee3\u7801\n\n\u8fd9\u662f\u771f\u7684\u7384\u5b66QwQ\n\n```cpp\n#include<cstdio>\n#include<cstdlib>\nusing namespace std;\ntypedef long long LL;\nconst int maxn=1000005,k=50;\nint n,m,son[maxn][2],w[maxn],num[maxn],f[maxn][55];LL ans[maxn];\ninline int read()\n{\n\tint ret=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-f;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){ret=ret*10+ch-'0';ch=getchar();}\n\treturn ret*f;\n}\ninline void Merge(int s1,int s2,int now)         //\u4ece\u4e24\u4e2a\u513f\u5b50\u8282\u70b9\u5408\u5e76\u8fc7\u6765\n{\n\tregister int i=1,j=1;num[now]=k;\n\tfor(register int p=1;p<=k;p++)\n\t{\n\t\twhile(f[s1][i]==f[now][p-1]&&i<=num[s1]) i++;  //\u6ce8\u610f\u53bb\u91cd\n\t\twhile(f[s2][j]==f[now][p-1]&&j<=num[s2]) j++;\n\t\tif(i>num[s1]&&j>num[s2]){num[now]=p-1;break;}\n\t\tif(i<=num[s1]&&(f[s1][i]<f[s2][j]||j>num[s2])){f[now][p]=f[s1][i];i++;}\n\t\telse if(j<=num[s2]){f[now][p]=f[s2][j];j++;}\n\t}\n}\nint main()\n{\n\tsrand(20050429);\n\tn=read();m=read();\n\tfor(register int i=m+1;i<=n;i++){son[i][0]=read();son[i][1]=read();}\n\tfor(int r=1;r<=4;r++)\n\t{\n\t\tfor(register int i=1;i<=n;i++){w[i]=rand();while(!w[i])w[i]=rand();}\n\t\tfor(register int i=1;i<=m;i++){f[i][1]=w[i];num[i]=1;}\n\t\tfor(register int i=m+1;i<=n;i++)\n\t\t{\n\t\t\tMerge(son[i][0],son[i][1],i);\n\t\t\tif(num[i]<k) ans[i]=num[i]*4;          //\u5982\u679c\u8fd8\u6ca1\u5230k\u4e2a\u5c31\u4e0d\u7528\u6839\u636e\u671f\u671b\u8ba1\u7b97\u4e86\n\t\t\telse ans[i]+=(LL)k*RAND_MAX/f[i][k];\n\t\t}\n\t}\n\tfor(int i=m+1;i<=n;i++) printf(\"%lld\\n\",ans[i]/4);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1548294684,
        "uid": 42392,
        "name": "\u5f90\u81f4\u8fdc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4581 \u3010[BJOI2014]\u60f3\u6cd5\u3011"
    },
    {
        "content": "~~\u841d\u535c\u5927\u6bd2\u7624~~\n\n\u9898\u610f\u53ef\u4ee5\u7b80\u5316\u6210\u8fd9\u6837\uff1a\u7ed9\u4e00\u4e2aDAG\uff0c\u6c42\u6bcf\u4e2a\u70b9\u80fd\u591f\u4ece\u591a\u5c11\u4e2a\u5165\u5ea6\u4e3a$0$\u7684\u70b9\u5230\u8fbe\uff08\u8bb0\u4e3a$k$\uff09\u3002\n\n\u4e00\u4e2a\u968f\u673a\u505a\u6cd5\uff1a\u7ed9\u6bcf\u4e2a\u5165\u5ea6\u4e3a$0$\u7684\u70b9\u968f\u673a\u4e00\u4e2a\u6743\u503c\uff0c\u5728DAG\u4e0a\u6c42\u51fa\u6bcf\u4e2a\u70b9\u80fd\u591f\u8fd4\u56de\u5230\u7684\u5165\u5ea6\u4e3a$0$\u7684\u70b9\u7684\u6700\u5c0f\u6743\u503c\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6743\u503c\u7684\u671f\u671b\u662f$\\frac{\\text{\u968f\u673a\u503c\u57df}}{k+1}$\u3002\u591a\u9009\u51e0\u5957\u968f\u673a\u6743\u503c\uff08\u849f\u84bb\u9009\u4e86\u4e00\u767e\u6b21\uff09\uff0c\u8dd1\u51fa\u6765\u7684\u5e73\u5747\u503c\u5373\u53ef\u8f93\u51fa\u3002\n\n\u5b9e\u5728\u662f\u592a\u7384\u5b66\u4e86\u3002\n```cpp\n#include<bits/stdc++.h>\n#define LL unsigned long long\n#define RG register\n#define R RG int\n#define G if(++ip==ie)if(fread(ip=buf,1,SZ,stdin))\n#define F(S) if(freopen(S\".in\",\"r\",stdin));if(freopen(S\".out\",\"w\",stdout))\nusing namespace std;\nconst int SZ=1<<18,N=1e6+1,S=50,T=2;\nchar buf[SZ],*ie=buf+SZ,*ip=ie-1;\ninline int in(){\n    G;while(*ip<'-')G;\n    R x=*ip&15;G;\n    while(*ip>'-'){x*=10;x+=*ip&15;G;}\n    return x;\n}\ninline int Min(R x,R y){\n    return x<y?x:y;\n}\nint f[N][S],c[N][2];\ndouble ans[N];\nint main(){\n    srand(20020307);\n    R n=in(),m=in();\n    for(R i=m+1;i<=n;++i)\n        c[i][0]=in(),c[i][1]=in();\n    for(R t=T;t;--t){\n        for(R i=1;i<=m;++i)\n            for(R j=0;j<S;++j)\n                f[i][j]=rand();\n        for(R i=m+1;i<=n;++i)\n            for(R j=0;j<S;++j)\n                ans[i]+=f[i][j]=Min(f[c[i][0]][j],f[c[i][1]][j]);\n    }\n    for(R i=m+1;i<=n;++i)\n        printf(\"%d\\n\",(int)(RAND_MAX/ans[i]*S*T-0.5));\n    return 0;\n}\n```",
        "postTime": 1546700557,
        "uid": 61325,
        "name": "FlashHu",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4581 \u3010[BJOI2014]\u60f3\u6cd5\u3011"
    },
    {
        "content": "\u975e\u5e38\u7f8e\u4e3d\u7684\u4e00\u9053\u9898\uff0c\u5947\u8be1\u4e14\u7b80\u6d01\u3002\n\n\u6211\u4eec\u8003\u8651\u7ed9\u6bcf\u4e2a\u60f3\u6cd5\u90fd\u8d4b\u4e0a\u4e00\u4e2a\u6743\u503c\uff0c\u7136\u540e\u901a\u8fc7\u7b80\u5355 dp \u8ba1\u7b97\u51fa\u6bcf\u4e2a\u9898\u76ee\u6240\u80fd\u5305\u542b\u5230\u7684\u60f3\u6cd5\u7684\u6743\u503c\u7684\u6700\u5c0f\u503c\uff08\u4e5f\u79f0\u4f5c\u8fd9\u4e2a\u9898\u76ee\u7684\u6743\u503c\uff09\u3002\u5982\u6b64\u4e00\u6765\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5047\u8bbe\u4e00\u4e2a\u9898\u76ee\u5305\u542b\u7684\u60f3\u6cd5\u603b\u6570\u662f $x$\uff0c\u90a3\u4e48\u6700\u540e\u5b83\u7684\u6743\u503c\u5c31\u662f\u8fd9 $x$ \u4e2a\u60f3\u6cd5\u7684\u6743\u503c\u7684\u6700\u5c0f\u503c\u3002\u6ce8\u610f\u5230\uff0c\u5982\u679c\u60f3\u6cd5\u7684\u6743\u503c\u662f\u5728\u67d0\u4e00\u4e2a\u533a\u95f4\u4e0a\u5747\u5300\u968f\u673a\u7684\uff0c\u90a3\u4e48\u6839\u636e\u671f\u671b\u7684\u57fa\u672c\u77e5\u8bc6\uff0c\u8fd9\u4e2a\u9898\u76ee\u6700\u540e\u6743\u503c\u7684\u671f\u671b\u5c06\u4f1a\u843d\u5728\u8fd9\u4e2a\u533a\u95f4\u6700\u5de6\u7684 $x+1$ \u5206\u70b9\u4e0a\u3002\u5982\u6b64\u4e00\u6765\uff0c\u6211\u4eec\u6839\u636e\u5927\u6570\u5b9a\u5f8b\uff0c\u4ee5\u9891\u7387\u4ee3\u66ff\u6982\u7387\u8ba1\u7b97\u51fa\u4e00\u4e2a\u5927\u81f4\u7684\u671f\u671b\uff0c\u89c2\u5bdf\u5b83\u7684\u4f4d\u7f6e\u5373\u53ef\u5f97\u5230 $x$\u3002\u7531\u4e8e\u6709\u8db3\u8db3\u56db\u5206\u4e4b\u4e00\u7684\u5bb9\u9519\uff0c\u53e3\u80e1\u4e00\u4e0b\u8fd8\u662f\u95ee\u9898\u4e0d\u5927\u7684\u3002\n\n\u4ee3\u7801\u5de8\u5927\u597d\u5199\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nusing namespace views;\nconstexpr int T = 150;\nsigned main() {\n  cin.tie(nullptr)->sync_with_stdio(false);\n  int n, m;\n  cin >> n >> m;\n  vector<tuple<int, int, int, int>> es(n);\n  for (auto& [w, u, v, s] : es | drop(m)) cin >> u >> v, --u, --v, s = 0;\n  default_random_engine rnd(random_device{}());\n  for (int t = T; t; --t) {\n    for (auto& [w, u, v, s] : es | take(m)) w = rnd();\n    for (auto& [w, u, v, s] : es | drop(m))\n      s += w = min(get<0>(es[u]), get<0>(es[v]));\n  }\n  for (auto& [w, u, v, s] : es | drop(m))\n    cout << fixed << setprecision(0) << rnd.max() * T * 1. / s - 1 << '\\n';\n  return cout << flush, 0;\n}\n```",
        "postTime": 1675261754,
        "uid": 250637,
        "name": "UnyieldingTrilobite",
        "ccfLevel": 9,
        "title": "\u795e\u4e4e\u5176\u6280"
    }
]
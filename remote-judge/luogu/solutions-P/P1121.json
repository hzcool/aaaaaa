[
    {
        "content": "## 2019.11.30 \n## \u5173\u4e8e\u6700\u5927\u5b50\u6bb5\u548c\u53ca\u5176\u53d8\u5f0f\n#### $upd:$\u589e\u52a0\u4e86\u4e00\u4e9b\u53d8\u5f0f\u7684\u9898\u9762\u63cf\u8ff0\uff0c\u4e00\u4e2a$chapter$\uff0c\u8865\u4e86\u4e00\u4e9b\u9505\n#### $chapter 1$ \u6700\u5927\u5b50\u6bb5\u548c\n\t\n$O(n^3)$ \u679a\u4e3e\u533a\u95f4\u8d77\u70b9\u548c\u7ec8\u70b9\uff0c\u66b4\u529b\u6c42\u548c\uff1b\n   \n$O(n^2)$ \u679a\u4e3e\u5de6\u53f3\u7aef\u70b9\u65f6 $j=i$ -> $m$ \u53ef\u4ee5\u52a8\u6001\u7ef4\u62a4$i$~$j$\u7684\u524d\u7f00\u548c\uff1b\n   \n$O(n^2)$ \u9884\u5904\u7406\u524d\u7f00\u548c\uff0c\u679a\u4e3e\u5de6\u53f3\u7aef\u70b9\u65f6$O(1)$\u8ba1\u7b97\uff1b\n   \n$O(nlogn)$ \u679a\u4e3e\u4e2d\u70b9,\u5206\u522b\u5f80\u524d\u9762\u548c\u540e\u9762\u8ba1\u7b97\u4e00\u4e2a\u5305\u542b$center$\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u9884\u5904\u7406\u524d\u7f00\u548c\u4e00\u6b21\u5224\u65ad\u662f$O(1)$\u7684\uff1b\n   \n$O(n)$ \u8003\u8651$dp$\uff0c\u8bbe\u72b6\u6001$f[i]$\u4e3a\u5305\u542b\u4e14\u4ee5$a[i]$\u7ed3\u5c3e\u7684\u6700\u5927\u503c\uff0c\u65b9\u7a0b\uff1a$f[i] = max(~f[i-1]~,~0~) + a[i]$\uff1b\n   \n$O(n)$ \u4e00\u4e2a\u4ee5$a[i]$\u7ed3\u5c3e\u6700\u5927\u5b50\u6bb5\u7684\u5b9a\u4e49\uff1a$sum[i]-min(sum[k])~(1<=k<i)$ \uff0c\u8ba1\u7b97$min(~sum[k]~)$\u53ef\u4ee5\u52a8\u6001\u7ef4\u62a4\u4e00\u4e2a\u524d\u7f00\u548c\u7684\u6700\u5c0f\u503c\uff1b\n   \n#### $chapter 2$ \u5b50\u6bb5\u957f\u5ea6\u4e0d\u5927\u4e8em\u7684\u6700\u5927\u5b50\u6bb5\u548c\n\n$O(n)$ \u4ecd\u7136\u8003\u8651\u6700\u5927\u5b50\u6bb5\u548c\u7684\u5b9a\u4e49\uff0c\u52a8\u6001\u7ef4\u62a4$min(sum[k])~(i-m<=k<i)$\uff0c\u4f7f\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\uff0c\u961f\u5217\u4e2d\u7684\u6570\u9012\u589e(\u53c2\u8003$P1886$\u6ed1\u52a8\u7a97\u53e3)\uff1b\n\n#### $chapter 3$ \u5b50\u6bb5\u957f\u5ea6\u4e0d\u5c0f\u4e8em\u7684\u6700\u5927\u5b50\u6bb5\u548c\n\n$O(nlongn)$ \u53ef\u4ee5\u5c06\u5206\u6cbb\u601d\u60f3\u4e2d\u7684\u679a\u4e3e\u4e2d\u70b9\u6539\u6210\u679a\u4e3e\u4e00\u4e2a\u4e2d\u6bb5\uff0c\u540c\u7406\uff1b(\u4f46\u662f\u663e\u7136\u9700\u8981\u679a\u4e3e\u4e00\u4e2a\u6bb5\u7684\u8bdd\u7f16\u7801\u96be\u5ea6\u4f1a\u63d0\u5347)\n   \n$O(n)$ \u5148\u8ba1\u7b97\u4e00\u6b21\u4e0d\u9650\u957f\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u518d\u4ece\u5934\u5f00\u59cb\uff0c\u679a\u4e3e\u6bcf\u4e00\u4e2a\u957f\u4e3am\u7684\u5b50\u6bb5\uff0c\u5728\u5b83\u524d\u9762\u62fc\u4e0a\u4ee5$a[i-1]$\u7ed3\u5c3e\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff1b\u65b9\u7a0b\uff1a$f'[i] = max(~f[i-1]~,~0~) + sum[i+m] - sum[i-1]$\uff0c\u6700\u540e\u53d6\u4e00\u4e2a$max$\uff1b\n   \n$O(n)$ \u52a8\u6001\u7ef4\u62a4$min(sum[k])~(1<=k<=i-m)$\uff0c\u6bd4\u4e0a\u4e00\u79cd\u7f16\u7801\u7b80\u6d01\uff0c\u53ea\u9700\u8981\u4e00\u6b21\u5faa\u73af\uff0c\u7ef4\u62a4\u524d\u7f00\u548c\uff1b\n\n#### $chapter 4$ \u73af\u72b6\u6700\u5927\u5b50\u6bb5\u548c\n\n\t\u5728\u6700\u5927\u5b50\u6bb5\u548c\u7684\u57fa\u7840\u4e0a\uff0c\u8ba4\u4e3aa[1]\u548ca[n]\u662f\u76f8\u90bb\u7684\u3002\n\n$O(n)$ \u5c06\u5e8f\u5217\u500d\u957f\uff0c\u5c31\u53ef\u4ee5\u505a\u4e00\u904d\u957f\u5ea6\u4e0d\u5927\u4e8em\u7684\u6700\u5927\u5b50\u6bb5\u548c\n\n$O(n)$ \u8003\u8651\u5b50\u6bb5\u662f\u5426\u8fc7\u7aef\u70b9\uff0c\u8fc7\u7aef\u70b9\u5c31\u53d6\u53cd\uff0c\u5176\u5b9e\u5c31\u662f\u6c42\u4e00\u4e2a\u6700\u5c0f\u5b50\u6bb5\u548c\uff1b\u4e0d\u8fc7\u7aef\u70b9\u5c31\u6ca1\u6709\u5f71\u54cd\u3002\n\n#### $chapter 5$ \u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\n\n$O(n^2)$ \u8003\u8651\u7834\u73af\u6210\u94fe\uff0c\u679a\u4e3e\u7834\u574f\u7684\u65ad\u70b9$O(n)$\uff0c\u5728\u94fe\u4e0a\u6c42\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\uff1b\u7ef4\u62a4\u4e00\u4e2a$f1[i]$\u4e3a\u4ee5$a[i]$\u7ed3\u5c3e\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u4e00\u4e2a$f2[i]$\u4e3a\u4ee5$a[i]$\u5f00\u5934\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff1b(\u5176\u5b9e\u5c31\u662f\u5012\u7740\u6c42\u4e00\u904d)\u590d\u6742\u5ea6$O(3n)$\uff1b\n\n$O(n)$ \u5bf9\u4e8e\u7b54\u6848\u53ef\u80fd\u6709\u7684\u6240\u6709\u60c5\u51b5\uff0c\u4e00\u79cd\u662f\u6709\u4e00\u6bb5\u8de8\u8fc7\u4e86\u7aef\u70b9\uff0c\u53e6\u4e00\u79cd\u662f\u6ca1\u6709\u8de8\u8fc7\u7aef\u70b9\uff1b\u6240\u4ee5\u53ef\u4ee5\u5148\u6c42\u4e00\u904d\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u518d\u5bf9\u6574\u4e2a\u5e8f\u5217\u53d6\u53cd\uff0c\u518d\u6c42\u4e00\u904d(\u8fd9\u65f6\u5176\u5b9e\u5c31\u662f\u6c42\u51fa\u4e24\u6bb5\u7684\u6700\u5c0f\u5b50\u6bb5\u548c\uff0c\u7528\u603b\u548c\u51cf\u53bb\u540e\u5c31\u662f\u8de8\u8fc7\u7aef\u70b9\u7684\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c)\uff0c\u8fd9\u65f6\u628a\u4e24\u79cd\u60c5\u51b5\u53d6\u4e00\u4e2a$max$\uff1b\n\n#### $chapter 6$ \u6700\u5927m\u6bb5\u5b50\u6bb5\u548c\n\n\t\u7ed9\u5b9a\u7531n\u4e2a\u6574\u6570\uff08\u53ef\u80fd\u4e3a\u8d1f\u6574\u6570\uff09\u7ec4\u6210\u7684\u5e8f\u5217\uff0c\n    \u4ee5\u53ca\u4e00\u4e2a\u6b63\u6574\u6570m\uff0c\u8981\u6c42\u786e\u5b9a\u5e8f\u5217m\u4e2a\u4e0d\u76f8\u4ea4\u5b50\u6bb5\uff0c\n    \u4f7f\u5f97\u8fd9m\u4e2a\u5b50\u6bb5\u7684\u603b\u548c\u8fbe\u5230\u6700\u5927\uff0c\u6c42\u51fa\u6700\u5927\u548c\u3002\n    \n$O(n^{2m})$ \u4e0d\u7528\u8bf4\u4e86\uff0c\u66b4\u529b\u679a\u4e3e\u6bcf\u4e00\u6bb5\u7684\u5de6\u53f3\u7aef\u70b9\uff0c\u6c42\u548c\uff1b\n\n$O(n^m)$ \u8fd8\u53ef\u4ee5\u518d\u4f18\u5316\uff0c\u52a8\u6001\u7ef4\u62a4\u6bcf\u4e00\u6bb5\u5f53\u524d$a[i]$\u4e4b\u524d\uff0c\u4e0a\u4e00\u6bb5\u7ed3\u5c3e\u4e4b\u540e\u7684\u524d\u7f00\u548c$min$\uff0c\u53ef\u4ee5\u9012\u5f52\u5b9e\u73b0\uff1b\u5f53\u7136\u9012\u5f52\u7684\u5f62\u5f0f\u4f1a\u51cf\u6162\u901f\u5ea6\uff1b\n\n$O(n^3m)$ \u96be\u9053\u4e0d\u50cf\u4e00\u4e2a\u533a\u95f4dp\uff1f\uff1f\u6211\u4eec\u8bbe\u72b6\u6001$f1[i][j][k]$\u4e3a\u533a\u95f4$[i,j]$\u5185\u5df2\u7ecf\u5206\u914d\u4e86k\u6bb5\u7684\u6700\u5927\u503c\uff1b\u65b9\u7a0b\u4e3a\uff1a$f1[i][j][k]=max(f1[i][j][k],f1[i][p][k-1]+f1[p+2][j][1])~(p>i,p+2<=j)$\uff1b\u8fd9\u8f6c\u79fb\u663e\u7136\u6709\uff1a\n\n           for(int p=1;p<=m;p++)\n\t          for(int i=1;i<=n;i++)\n                  for(int j=i;j<=n;j++)\n                      for(int q=i+1;q+2<=j;q++)\n                          f[i][j][p]=max(f[i][j][p],f[i][q][p-1]+f[q+2][j][1]);\n\n$O(n^2m)$ \u5176\u5b9e\u672c\u6765\u65b9\u7a0b\u4e2d\u679a\u4e3e\u6bb5\u6570\u4e5f\u9700\u8981\u4e00\u5c42\u5faa\u73af\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u5206\u6bb5\u95ee\u9898\uff0c\u548c\u9009\u53d6\u7684\u6bb5\u6570\u5148\u540e\u65e0\u5173\uff0c\u6545\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u628a\u4e00\u6bb5\u62fc\u4e0a$p-1$\u6bb5\u3002(\u5bf9\u4e8e\u8fd9\u79cddp\u6211\u66f4\u613f\u610f\u79f0\u5b83\u4e3a\u5206\u6bb5dp\u800c\u4e0d\u662f\u533a\u95f4dp)\u63a5\u7740\u6211\u4eec\u5c06\u65b9\u7a0b\u8f6c\u5316\u4e00\u4e0b\uff0c\u4f1a\u53d1\u73b0$f1[q+2][j][1]$\u5176\u5b9e\u5c31\u662f$sum[j]-sum[q+1]$\uff01\u8fd9\u65f6\u65b9\u7a0b\u53d8\u4e3a$f1[i][j][k]=max(f1[i][j][k],f1[i][p][k-1]+sum[j]-sum[q+1])~(p>i,p+2<=j)$\uff1b\u6211\u4eec\u518d\u6b21\u89c2\u5bdf\uff0c\u53d1\u73b0\u8f6c\u79fb\u53ef\u4ee5\u4f18\u5316\uff1a\u7b2c\u4e00\u7ef4\u6240\u6d89\u53ca\u7684\u8f6c\u79fb\u5168\u90e8\u662f$i$\uff01\u8fd9\u65f6\u628a\u7b2c\u4e00\u7ef4\u53bb\u6389\uff0c\u72b6\u6001\u5b9a\u4e49\u8f6c\u5316\u4e3a\u533a\u95f4$[1,j]$\u5185\u5df2\u7ecf\u5206\u914d\u4e86k\u6bb5\u7684\u6700\u5927\u503c\uff1a$f[j][k]$\uff1b\u8fd9\u65f6\u8f6c\u79fb\u5c31\u6709\uff1a\n\n              for(int p=1;p<=m;p++)\n                  for(int j=1;j<=n;j++)\n                      for(int q=i+1;q+2<=j;q++)\n                          f[j][p]=max(f[j][p],f[j][p-1]+sum[j]-sum[q+1]);\n\n$O(nm)$ \u4e0a\u4e00\u79cd\u65b9\u6cd5\u7684\u65b9\u7a0b\u5df2\u7ecf\u53d8\u4e3a$f1[j][p]=max(f1[j][p],f[j][q][p-1]+sum[j]-sum[q+1])$\uff0c\u6211\u4eec\u518d\u770b\u770b\u8fd8\u662f\u5426\u53ef\u4ee5\u4f18\u5316\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u6c42m\u6bb5\u5b50\u6bb5\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f53\u6211\u5df2\u7ecf\u6c42\u51fa\u524d$i$\u4e2a\u5143\u7d20\uff0c$k$\u6bb5\u7684\u65f6\u5019\uff0c\u6211\u8981\u505a\u7684\uff0c\u5176\u5b9e\u5c31\u662f\u8003\u8651\u5411\u540e\u591a\u5c11\u4e2a\u5143\u7d20\u540e\u518d\u91cd\u65b0\u5f00\u4e00\u6bb5\u3002\u6240\u4ee5\u8be5\u72b6\u6001\u4e3a$f[i][j][0/1]$\u8868\u793a\u524d$i$\u4e2a\u5143\u7d20\uff0c$j$\u6bb5\uff0c\u7b2ci\u4e2a\u5143\u7d20\u662f\u5426\u9009\u7684\u6700\u5927\u5b50\u6bb5\u548c\u3002\u8f6c\u79fb\u5c31\u597d\u5199\u4e86\uff1a\n\n\t\t  f[i][j][1]=max(f[i-1][j][1],f[i-1][j-1][0])+a[i];\n              f[i][j][0]=max(f[i-1][j][1],f[i-1][j][0]);\n\n#### $chapter 7$ \u53ea\u542b\u6b63\u6574\u6570\u7684\u4e0d\u5c0f\u4e8e$S$($S<=10^9$)\u7684\u6700\u5c0f\u5b50\u6bb5\u548c\u7684\u957f\u5ea6($n<=100000$)\n\n\t\u7ed9\u51fa\u4e86N\u4e2a\u6b63\u6574\u6570\uff0810 <N <100 000\uff09\u7684\u5e8f\u5217\uff0c\n    \u6bcf\u4e2a\u6b63\u6574\u6570\u5747\u5c0f\u4e8e\u6216\u7b49\u4e8e10000\uff0c\u5e76\u7ed9\u51fa\u4e86\u4e00\u4e2a\u6b63\u6574\u6570S\uff08S <100 000 000\uff09\u3002\n    \u7f16\u5199\u7a0b\u5e8f\u4ee5\u67e5\u627e\u5e8f\u5217\u4e2d\u8fde\u7eed\u5143\u7d20\u7684\u5b50\u5e8f\u5217\u7684\u6700\u5c0f\u957f\u5ea6\uff0c\u5176\u603b\u548c\u5927\u4e8e\u6216\u7b49\u4e8eS\u3002\n\n$O(n^2)$ \u679a\u4e3e\u5de6\u53f3\u7aef\u70b9\uff0c\u7528\u524d\u7f00\u548c\u8ba1\u7b97$O(1)$\uff0c\u53d6\u6700\u5c0f\u503c\uff1b\n\n$O(n)$ \u8003\u8651\u4e8c\u5206\u7b54\u6848\uff0c\u6bcf\u6b21\u8ba1\u7b97\u4e0d\u8d85\u8fc7\u5f53\u524d\u957f\u5ea6\u4e0b\u7684\u6700\u5927\u5b50\u6bb5\u548c\u80fd\u5426\u4e0d\u5c0f\u4e8e$S$\uff0c\u5177\u4f53\u64cd\u4f5c\u89c1$chapter2$\n\n$O(n)$ \u4e00\u79cd\u65b0\u7684\u65b9\u6cd5\uff1a\u5c3a\u53d6\u6cd5\u3002\u56e0\u4e3a\u9898\u76ee\u6240\u7ed9\u6570\u5747\u4e3a\u6b63\u6574\u6570\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bbe\u4e00\u4e2a\u961f\u9996\u548c\u4e00\u4e2a\u961f\u5c3e\uff0c\u603b\u548c\u5c0f\u4e8e$S$\u5c31\u5f80\u540e\u52a0\u4e00\u4e2a\u6570\uff0c\u5927\u4e8e$S$\u5c31\u5728\u6700\u524d\u9762\u51cf\u4e00\u4e2a\u6570\u3002(\u51b3\u7b56\u7684\u5355\u8c03\u6027\u662f\u5e94\u7528\u5c3a\u53d6\u6cd5\u7684\u524d\u63d0\uff0c\u8001\u5e08\u5c06\u5b83\u6bd4\u4f5c\u866b\u5b50\u5411\u524d\u8815\u52a8\u7684\u6837\u5b50)\u540c\u6837\uff0c\u5c3a\u53d6\u6cd5\u4e0d\u4ec5\u80fd\u6c42\u957f\u5ea6\uff0c\u4e5f\u80fd\u6c42\u5927\u4e8e$S$\u7684\u6700\u5c0f\u5b50\u6bb5\u548c\u3002\u800c\u4e8c\u5206\u5f97\u5230\u7684\u7b54\u6848\uff0c\u6700\u77ed\u7684\u4e0d\u4e00\u5b9a\u662f\u6700\u63a5\u8fd1$S$\u7684\u3002\n\n#### $chapter 8$ \u542b\u8d1f\u6570\u7684\u4e0d\u5c0f\u4e8e$S$($S<=10^9$)\u7684\u6700\u5c0f\u5b50\u6bb5\u548c\u7684\u957f\u5ea6($n<=100000$)\n\n$O(nlogn)$ \u73b0\u5c06\u6240\u6709\u524d\u7f00\u548c\u7b97\u51fa\u6765\uff0c\u79bb\u6563\u5316\uff1b\u9898\u76ee\u6240\u6c42\u5373\u4e3a\u6c42\u4e00\u4e2a$min(j-i)$\uff0c\u6ee1\u8db3$sum[j]-sum[i]>=S~(1<=i<=j,sum[i]=min(sum[1]~to~sum[j-1]))$\uff1b\u5373$sum[j]-S>=sum[i]$\u3002\u5f00\u4e00\u4e2a\u503c\u57df\u6811\u72b6\u6570\u7ec4\uff0c$c[i]$\u8868\u793a\u7684\u662f\u524d\u7f00\u548c\u4e3a$i$(\u79bb\u6563\u5316\u540e\u7684)\u7684\u524d\u7f00\u7684\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u3002\u76f8\u5f53\u4e8e\u5728\u6811\u72b6\u6570\u7ec4\u5185\u6bcf\u6b21\u67e5\u8be2\u5c0f\u4e8e$sum[j]-S$\u7684\u90a3\u4e00\u6bb5\u4e2d\u4f4d\u7f6e\u7684\u6700\u5927\u503c\u3002\u8fd9\u6837\u5c31\u6c42\u51fa\u4e86\u6700\u5c0f\u957f\u5ea6\uff1b\u800c\u5bf9\u4e8e\u6700\u5c0f\u503c\u7684\u8bdd\uff0c\u67e5\u8be2\u7b2c\u4e00\u4e2a$c[i]!=-1$\u5c31\u53ef\u4ee5\u4e86\u3002\n\n#### $chapter 9$ \u542b/\u4e0d\u542b\u8d1f\u6570\u7684\u4e0d\u5927\u4e8eS\u7684\u6700\u5927\u5b50\u6bb5\u548c\u7684\u957f\u5ea6/\u503c\n\n$O(???)$ \u8fd9\u4e9b\u5176\u5b9e\u90fd\u53ef\u4ee5\u7c7b\u6bd4\u4e0a\u4e00\u4e2a$chapter$\u7684\u505a\u6cd5\uff0c\u4e0d\u8bf4\u4e86\u3002\n\n#### $chapter 10$ \u4e00\u4e9b\u5176\u4ed6\u7684\n\n\u6709\u4e9b\u9898\u76ee\u4e2d\u8981\u6c42\u7684\u662f\u4e0d\u76f8\u90bb\u7684\u4e24\u4e2a\u5b50\u6bb5\uff0c\u6709\u4e9b\u53c8\u6ca1\u6709\u8981\u6c42\u3002\u5176\u5b9e\u4e0d\u76f8\u90bb\u610f\u5473\u7740\u4e24\u4e2a\u5b50\u6bb5\u4e4b\u95f4\u81f3\u5c11\u9694\u4e00\u4e2a\u6570\uff1b\u4e0d\u7136\u7684\u8bdd\uff0c\u4e24\u4e2a\u5b50\u6bb5\u867d\u7136\u63a5\u5728\u4e86\u4e00\u8d77\uff0c\u4f46\u662f\u4ecd\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e24\u4e2a\u5b50\u6bb5\u3002\u8fd9\u4e2a\u65f6\u5019\u5176\u5b9e\u5173\u4e8e\u8f6c\u79fb\uff0c\u53ea\u9700\u8981\u8f6c\u79fb$a[i]~to~a[j]$\u6539\u6210$a[i+1]~to~a[j+1]$\u5c31\u53ef\u4ee5\u4e86\u3002\n\n### \u542f\u793a\uff1a\u5176\u5b9e\u6211\u4eec\u5728\u4f18\u5316\u7b97\u6cd5\u65f6\uff0c\u4f18\u5316\u679a\u4e3e\u7684\u6838\u5fc3\u5373\u4e3a\u51cf\u5c11\u679a\u4e3e\u8fc7\u7a0b\u4e2d\u7684\u91cd\u590d\u8ba1\u7b97\u3002",
        "postTime": 1575209724,
        "uid": 38882,
        "name": "Develop",
        "ccfLevel": 6,
        "title": "\u6700\u5927\u5b50\u6bb5\u548c\u53ca\u5176\u53d8\u5f0f\u7684\u542f\u793a"
    },
    {
        "content": "\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u7531\u4e8e\u5206\u6210\u4e86\u4e24\u4e2a\u5b50\u5e8f\u5217\uff0c\u6211\u4eec\u4e0d\u59a8\u5c31\u662f\u679a\u4e3e\u4e00\u4e0b\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u51b5\uff1a\n\n\u65e0\u975e\u5c31\u8fd9\u4e24\u79cd\uff1a\n\n1.+++++0000+++++0000++++\n\n2.0000++++00000++++000000\n\n0\u5c31\u8868\u793a\u9009\u4e86\u8fd9\u4e2a\u6570\uff0c+\u5c31\u8868\u793a\u4e0d\u9009\u8fd9\u4e2a\u6570\uff0c\n\n\u90a3\u6211\u4eec\u6b63\u53cd\u5148\u505a\u4e00\u4e2a\u666e\u901a\u7684\u6700\u5927\u5b50\u5e8f\u5217\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210\u7b2c2\u4e2d\u60c5\u51b5\uff0c\u7136\u540e\u518d\u6c42\u4e2a\u6700\u5c0f\u5b50\u5e8f\u5217\uff0c\u628a\u603b\u548c\u4e00\u51cf\u5c31\u662f\u7b2c1\u79cd\u60c5\u51b5\u3002\n\n\u81f3\u4e8e\u6c42\u6700\u5c0f\u5b50\u5e8f\u5217\uff0c\u53ef\u4ee5\u628a\u6570\u5b57\u90fd\u8d1f\u8fc7\u6765\uff0c\u7136\u540e\u518d\u641e\u4e2a\u6700\u5927\u5b50\u5e8f\u5217\u5c31\u597d\u4e86\u3002\n\n\u697c\u4e0b\u4e3e\u7684\u4f8b\u5b50\u975e\u5e38\u5bf9\uff0c\u6211\u4ed4\u7ec6\u601d\u8003\u4e86\u4e00\u4e0b\u8fd9\u4e2a\u7279\u4f8b\uff0c\u5373\n\n4\n-1 1 -1 -1\n\n\u5f53\u6211\u4eec\u5c06\u6570\u5b57\u8d1f\u8fc7\u6765\u65f6\uff0c\u5c31\u6210\u4e86\uff1a\n\n4\n1 -1 1 1\n\n\u6b64\u65f6\u7684\u4e24\u4e2a\u6700\u5927\u5b50\u5e8f\u5217\u6211\u4eec\u4f1a\u9009\u6210\uff1a\n\n0+00\n\u800c\u9996\u5c3e\u90fd\u9009\u4e86\uff0c\u5176\u5b9e\u5c31\u662f\u53ea\u9009\u4e86\u4e00\u4e2a\u5e8f\u5217\uff0c\u800c\u8fd9\u79cd\u7279\u6b8a\u60c5\u51b5\u53c8\u53ea\u4f1a\u5728\n\n\u53ea\u6709\u4e00\u4e2a\u6570\u662f\u6b63\u6570\u65f6\u51fa\u73b0\uff0c\u6240\u4ee5\u7279\u5224\u4e00\u4e0b\u5c31\u597d\u4e86\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u6570\u662f\u6b63\u6570\uff0c\u6211\u4eec\u5c31\u4e0d\u505a\u5c06\u6570\u5b57\u8d1f\u8fc7\u6765\u540e\u7684\u90a3\u4e2a\u6700\u5927\u5b50\u5e8f\u5217\u4e86\uff0c\n\n\u76f4\u63a5\u627e\u4e24\u4e2a\u6700\u5927\u7684\u6570\u7d2f\u548c\u5c31\u884c\u4e86\u3002\n\n\u7531\u4e8e\u672c\u9898\u6570\u636e\u8f83\u6c34\uff0c\u6240\u4ee5\u4e0d\u7528\u7279\u5224\u4e5f\u53ef\u4ee5\u8fc7\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nconst int INF=0x3f3f3f3f;\nconst int N=2e5+5;\nint n,f[N],g[N],a[N],sum=0,tot=0;\nint query(){\n    int res=-INF;\n    for (int i=1;i<=n;i++)f[i]=max(f[i-1],0)+a[i];\n    for (int i=n;i>0;i--)g[i]=max(g[i+1],0)+a[i];\n    for (int i=1;i<=n;i++)f[i]=max(f[i-1],f[i]);\n    for (int i=n;i>0;i--)g[i]=max(g[i+1],g[i]);\n    for (int i=1;i<n;i++)res=max(res,f[i]+g[i+1]);\n    return res;\n}\nint main(){\n    scanf(\"%d\",&n);\n    memset(f,~0x3f,sizeof(f));memset(g,~0x3f,sizeof(g));\n    for (int i=1;i<=n;i++)scanf(\"%d\",&a[i]),sum+=a[i],tot+=a[i]>0;\n    int t1=query();\n    if (tot==1){\n        printf(\"%d\",t1);\n    }else{\n        for (int i=1;i<=n;i++)a[i]=-a[i];\n        int t2=sum+query();\n        if (!t2)t2=-INF;\n        printf(\"%d\",max(t1,t2));\n    }\n    return 0;\n}\n```",
        "postTime": 1504526620,
        "uid": 54916,
        "name": "I_AM_HelloWord",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "~~\u8fd9\u9898\u6076\u8bc4\u7684\u5427\uff0c\u9876\u591a\u7eff~~\n## 1.\u6700\u5927\u5b50\u6bb5\u548c\n[P1115](/problem/P1115)\n\n\u66b4\u529b $O(n^3)$\uff0c\u592a\u6162\u3002\u5176\u4e2d\u6700\u5185\u5c42\u7684\u5faa\u73af\u662f\u7528\u6765\u6c42\u548c\u7684\uff0c\u5bb9\u6613\u60f3\u5230\u7528**\u524d\u7f00\u548c**\u9884\u5904\u7406\u4e00\u4e0b\uff0c\u590d\u6742\u5ea6\u4f18\u5316\u5230 $O(n^2)$\uff0c\u4ecd\u7136\u592a\u6162\u3002\n\n\u5b9a\u4e49 $f_i$ \u8868\u793a\u4ee5 $i$ \u4e3a\u5c3e\u7684\u5b50\u5e8f\u5217\u4e2d\uff0c\u548c\u6700\u5927\u7684\u90a3\u4e2a\uff0c\u5373\uff1a\n\n$$f_i=\\max_{j=1}^i\\sum_{k=j}^ia_k$$\n\n\n\u5bb9\u6613\u5f97\u5230\uff0c\u5f53 $i>1$ \u65f6\uff0c$f_i=\\max(f_{i-1}+a_i,a_i)=\\max(f_{i-1},0)+a_i$\u3002\n\n$f_1=a_1$\u3002\n\n\u5b9a\u4e49 $g_i$ \u8868\u793a $\\max_{k=1}^if_k$\uff0c\u5373\u524d $i$ \u4e2a\u5143\u7d20\u6784\u6210\u7684\u5e8f\u5217\u7684\u6700\u5927\u5b50\u6bb5\u548c\u3002\n\n\u5f53 $i>1$ \u65f6\uff0c$g_i=\\max(g_{i-1},f_i)$\u3002\n\n$g_1=f_1$\n\n$g_n$ \u5373\u4e3a\u6240\u6c42\u3002\n\n\u4e8e\u662f\u5f97\u5230\u5982\u4e0b\u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint n,a[200010],f[200010],g[200010];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",a+i);\n\tf[1]=a[1];\n\tfor(int i=2;i<=n;i++)f[i]=max(f[i-1],0)+a[i];\n\tg[1]=f[1];\n\tfor(int i=2;i<=n;i++)g[i]=max(g[i-1],f[i]);\n\tprintf(\"%d\\n\",g[n]);\n\treturn 0;\n}\n```\n## \u73af\u72b6\u6700\u5927\u5b50\u6bb5\u548c\n\u5982\u679c\u8fd9\u4e2a\u5b50\u6bb5\u6ca1\u6709\u8de8\u8fc7 $a_1$ \u4e0e $a_n$ \u7684\u5206\u754c\uff0c\u90a3\u5b83\u5c31\u662f\u6700\u5927\u5b50\u6bb5\u3002\n\n\u5982\u679c\u8de8\u8fc7\u4e86\uff0c\u90a3\u53e6\u4e00\u90e8\u5206\u5c31\u662f\u6ca1\u8de8\u8fc7\u7684\u6700\u5c0f\u5b50\u6bb5\u3002\n\n\u6ce8\u610f\u6700\u5c0f\u5b50\u6bb5\u4e0d\u80fd\u5360\u6ee1\u6574\u4e2a\u5e8f\u5217\u3002\n\n\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f $1\\sim n-1$ \u6c42\u4e00\u904d\uff0c$2\\sim n$ \u518d\u6c42\u4e00\u904d\u3002\n\n\u6c42\u4e86\u8fd9\u4e48\u591a\u904d\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u51fd\u6570\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\nusing namespace std;\nint n,sum,a[200010],f[200010],g[200010];\nint getmax(int*arr,int l,int(*cmp)(int,int)){//\u6307\u5411\u51fd\u6570\u7684\u6307\u9488\uff0csort \u4e5f\u662f\u8fd9\u4e2a\u539f\u7406\n\tf[1]=arr[1];\n\tfor(int i=2;i<=l;i++)f[i]=cmp(f[i-1],0)+arr[i];\n\tg[1]=f[1];\n\tfor(int i=2;i<=l;i++)g[i]=cmp(g[i-1],f[i]);\n\treturn g[l];\n}\nint max(int x,int y){return x>y?x:y;}//\u5e93\u91cc\u7684\u51fd\u6570\u597d\u50cf\u4e0d\u80fd\u7528\nint min(int x,int y){return x<y?x:y;}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",a+i);\n\t\tsum+=a[i];//\u8ba1\u7b97\u603b\u548c\n\t}\n\tint ans=getmax(a,n,max);\n\tans=max(ans,sum-getmax(a,n-1,min));//\u7528\u603b\u548c\u51cf\n\tans=max(ans,sum-getmax(a+1,n-1,min));\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n## \u6700\u5927\u53cc\u5b50\u6bb5\u548c\n[P2642](/problem/P2642)\n\n\u4ece\u524d\u5f80\u540e\u548c\u4ece\u540e\u5f80\u524d\u7ef4\u62a4\u4e24\u4e2a $f_i$ \u548c $g_i$\u3002\n\n\u7136\u540e\u679a\u4e3e\u5206\u754c\u70b9\uff0c\u627e\u5230\u7b54\u6848\u3002\n\n\u987a\u4fbf\u53ef\u4ee5\u5c06 $f_i$ \u548c $g_i$ \u5408\u5e76\uff0c\u51cf\u5c11\u6570\u7ec4\u6570\u91cf\u3002\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define size 1000010\nusing namespace std;\nint n,a[size],front[size],back[size];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",a+i);\n\tfront[1]=a[1];\n\tfor(int i=2;i<=n;i++)front[i]=max(front[i-1],0)+a[i];\n\tfor(int i=2;i<=n;i++)front[i]=max(front[i-1],front[i]);\n\tback[n]=a[n];\n\tfor(int i=n-1;i>0;i--)back[i]=max(back[i+1],0)+a[i];\n\tfor(int i=n-1;i>0;i--)back[i]=max(back[i+1],back[i]);\n\tint ans=1ll<<31ll;//\u6ea2\u51fa\u4e3a\u8d1f\u6570\n\tfor(int i=2;i<n;i++)ans=max(ans,front[i-1]+back[i+1]);//\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u4e00\u5b9a\u88ab a[i] \u9694\u5f00\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n## \u73af\u72b6\u6700\u5927\u53cc\u5b50\u6bb5\u548c\n[P1121](/problem/P1121)\n\n\u548c\u73af\u72b6\u6700\u5927\u5b50\u6bb5\u548c\u7c7b\u4f3c\uff0c\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\u3002\n\n\u6ca1\u6709\u4efb\u4f55\u4e00\u6bb5\u8de8\u8fc7 $a_1$ \u4e0e $a_n$ \u7684\u5206\u754c\uff0c\u5c31\u662f\u6700\u5927\u53cc\u5b50\u6bb5\u548c\uff1b\n\n\u6709\u4e00\u6bb5\u8de8\u8fc7 $a_1$ \u4e0e $a_n$ \u7684\u5206\u754c\uff0c\u5c31\u662f\u6700\u5c0f\u53cc\u5b50\u6bb5\u548c\u7684\u8865\u96c6\u3002\n\n\u8fd9\u9898\u5751\u70b9\u5728\u54ea\u5462\uff1f**\u4e24\u4e2a\u5b50\u6bb5\u53ef\u4ee5\u76f8\u90bb**\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u6700\u5c0f\u53cc\u5b50\u6bb5\u53ef\u4ee5\u4e3a\u7a7a\u3002\n\n\u5177\u4f53\u6539\u52a8\u89c1\u4ee3\u7801\u3002\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define size 1000010\nusing namespace std;\nint n,sum,a[size],af[size],ab[size],mf[size],mb[size];\nint getmin(int*arr,int l){\n\tmf[1]=arr[1];\n\tfor(int i=2;i<=l;i++)mf[i]=min(mf[i-1]+arr[i],min(arr[i],0));//\u53ef\u4ee5\u4e3a0 \n\tfor(int i=2;i<=l;i++)mf[i]=min(mf[i-1],mf[i]);\n\tmb[l]=arr[l];\n\tfor(int i=l-1;i>0;i--)mb[i]=min(mb[i+1]+arr[i],min(arr[i],0));//\u53ef\u4ee5\u4e3a0 \n\tfor(int i=l-1;i>0;i--)mb[i]=min(mb[i+1],mb[i]);\n\tint ans=(1ll<<31ll)-1ll;//2^31-1\uff0c\u5373 int \u7684\u6700\u5927\u503c \n\tfor(int i=2;i<l;i++)ans=min(ans,mf[i-1]+mb[i+1]);//\u8fd9\u91cc\u5fc5\u987b\u88ab\u5206\u5f00 \n\treturn ans;\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",a+i);\n\t\tsum+=a[i];\n\t}\n\taf[1]=a[1];\n\tfor(int i=2;i<=n;i++)af[i]=max(af[i-1],0)+a[i];\n\tfor(int i=2;i<=n;i++)af[i]=max(af[i-1],af[i]);\n\tab[n]=a[n];\n\tfor(int i=n-1;i>0;i--)ab[i]=max(ab[i+1],0)+a[i];\n\tfor(int i=n-1;i>0;i--)ab[i]=max(ab[i+1],ab[i]);\n\tint ans=1ll<<31ll;//\u6ea2\u51fa\u4e3a\u8d1f\u6570\n\tfor(int i=1;i<n;i++)ans=max(ans,af[i]+ab[i+1]);//\u53ef\u4ee5\u4e0d\u88ab\u5206\u5f00 \n\tans=max(ans,sum-getmin(a,n-1));\n\tans=max(ans,sum-getmin(a+1,n-1));\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1581855454,
        "uid": 178294,
        "name": "zhy137036",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u5176\u5b9e\u8fd9\u9898\u5b8c\u5168\u53ef\u4ee5\u7ebf\u6bb5\u6811\u7206\u641e\u2026\u2026~~\u53e6\u5916\u524d\u65b9\u591a\u56fe\u9884\u8b66~~\n\n### **\u524d\u7f6e\u77e5\u8bc6\uff1a\u7ebf\u6bb5\u6811\u6c42\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c**\n\n\u9996\u5148\u6211\u4eec\u5148\u6765\u8bb2\u4e00\u4e0b\u7ebf\u6bb5\u6811\u6c42\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\uff08\u5176\u6838\u5fc3\u5c31\u662f\u5408\u5e76\u7684\u65f6\u5019\u4e00\u5806\u5206\u6790\u4e0e\u8ba8\u8bba\uff09\uff0c\u6211\u4eec\u5728\u7ebf\u6bb5\u6811\u4e0a\u8003\u8651\u4e24\u4e2a\u533a\u95f4\u7684\u5408\u5e76\uff0c\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u5bf9\u6211\u4eec\u7ef4\u62a4\u7684\u533a\u95f4\u5185\u7684\u6700\u5927\u5b50\u6bb5\u548c\u7684\u4f4d\u7f6e\u8fdb\u884c\u8ba8\u8bba\uff1a\n![](https://cdn.luogu.com.cn/upload/pic/39111.png)\n\n\u6211\u4eec\u91cd\u70b9\u8003\u8651\u7684\u662f\u5982\u4f55\u5904\u7406\u533a\u95f4\u5185\u8de8\u4e2d\u70b9\u7684\u6700\u5927\u5b50\u6bb5\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u662f\u7531\u5de6\u533a\u95f4\u7684\u540e\u7f00\u548c\u53f3\u533a\u95f4\u7684\u524d\u7f00\u6784\u6210\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e00\u4e2a\u6700\u5927\u7684\u524d\u7f00\u548c\u540e\u7f00\uff0c\u6211\u4eec\u540c\u6837\u8981\u5bf9\u4ed6\u4eec\u8fdb\u884c\u4e00\u4e9b\u8ba8\u8bba\uff08\u4ee5\u524d\u7f00\u4e3a\u4f8b\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/39112.png)\n\n\u6211\u4eec\u53d1\u73b0\u8de8\u4e2d\u70b9\u7684\u524d\u7f00\uff08\u540e\u7f00\uff09\u662f\u7531\u4e00\u6574\u6bb5\u5de6\uff08\u53f3\uff09\u533a\u95f4\u4e0e\u53f3\uff08\u5de6\uff09\u533a\u95f4\u7684\u524d\u7f00\uff08\u540e\u7f00\uff09\u6784\u6210\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u8981\u7ef4\u62a4\u533a\u95f4\u548c\uff0c\u4e8e\u662f\u6211\u4eec\u5e94\u8be5\u5728\u7ebf\u6bb5\u6811\u4e0a\u7684\u533a\u95f4\u91cc\u7ef4\u62a4\u8fd9\u51e0\u4e2a\u4e1c\u897f\uff1a\n\n1.\u533a\u95f4\u548c\n\n2.\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\n\n3.\u533a\u95f4\u6700\u5927\u524d\u7f00\n\n4.\u533a\u95f4\u6700\u5927\u540e\u7f00\n\n### **\u4e0b\u9762\u5373\u5c06\u8fdb\u5165\u6b63\u9898~**\n\n\u8fd9\u9898\u8ba9\u6211\u4eec\u6c42 **\u73af\u72b6** **\u4e24\u6bb5** **\u6700\u5927\u5b50\u6bb5\u548c**\uff08\u6ce8\u610f\u6211\u628a\u5b83\u62c6\u6210\u4e863\u4e2a\u8bcd\uff09\uff0c\u9996\u5148\u73af\u72b6\u6211\u4eec\u53ef\u4ee5\u5957\u8def\u7684\u628a\u5b83\u590d\u5236\u4e00\u4efd\u63a5\u5728\u540e\u9762\uff0c\u7136\u540e\u6211\u4eec\u679a\u4e3e\u8d77\u70b9\uff0c\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e86\u6c42**\u533a\u95f4\u5185**\u7684**\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c**\u3002\n\n\u6211\u4eec\u6309\u7167\u4e0a\u9762\u7ebf\u6bb5\u6811\u7ef4\u62a4\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\u7684\u601d\u8def\uff0c\u8ba8\u8bba\u4e00\u4e0b\u8fd9\u4e2a\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c\u7684\u4f4d\u7f6e\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/39114.png)\n\n\u524d\u4e24\u79cd\u5c31\u4e0d\u7528\u8bf4\u4e86\uff0c\u7b2c\u4e09\u79cd\u60c5\u51b5\u6211\u4eec\u7ef4\u62a4\u4e00\u4e0b\u533a\u95f4\u5185\u7684\u6700\u5927\u5b50\u6bb5\u548c\u5373\u53ef\uff0c\u6211\u4eec\u91cd\u70b9\u8ba8\u8bba\u7684\u662f\u6700\u540e\u4e24\u79cd\u60c5\u51b5\u3002\u6211\u4eec\u4ee5D\u4e3a\u4f8b\uff0c\u8fd9\u4e1c\u897f\u662f\u7531\u53f3\u533a\u95f4\u7684\u6700\u5927\u524d\u7f00\u548c\u5de6\u533a\u95f4\u5185\u7684\u6700\u5927\u7684 **\u540e\u7f00+\u4e2d\u95f4\u4e00\u6bb5** \u6784\u6210\u7684\u6211\u4eec\u63a5\u7740\u6765\u8ba8\u8bba\u8fd9\u4e2a\u8be5\u600e\u4e48\u7ef4\u62a4\uff08\u8fd9\u91cc\u5c31\u53ea\u5199\u4e86\u8de8\u533a\u95f4\u4e2d\u70b9\u7684\u60c5\u51b5\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/39116.png)\n\nA\u662f\u5de6\u533a\u95f4\u7684\u6700\u5927\u5b50\u6bb5\u548c+\u53f3\u533a\u95f4\u7684\u6700\u5927\u540e\u7f00\uff0cB\u662f\u5de6\u533a\u95f4\u7684\u6700\u5927\u7684 **\u540e\u7f00+\u4e2d\u95f4\u4e00\u6bb5** +\u53f3\u533a\u95f4\u7684\u533a\u95f4\u548c\uff0cC\u662f\u5de6\u533a\u95f4\u7684\u6700\u5927\u540e\u7f00+\u53f3\u533a\u95f4\u7684\u6700\u5927 **\u524d\u7f00+\u540e\u7f00**\u3002\u4e8e\u662f\u6211\u4eec\u63a5\u7740\u7ef4\u62a4\u533a\u95f4\u5185\u7684\u6700\u5927 **\u524d\u7f00+\u540e\u7f00**\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/39118.png)\n\nA\u662f\u5de6\u533a\u95f4\u7684\u6700\u5927\u524d\u7f00+\u53f3\u533a\u95f4\u7684\u6700\u5927\u540e\u7f00\uff0cB\u662f\u5de6\u533a\u95f4\u7684\u533a\u95f4\u548c+\u53f3\u533a\u95f4\u7684\u6700\u5927 **\u524d\u7f00+\u540e\u7f00** \uff0cC\u662f\u5de6\u533a\u95f4\u7684\u6700\u5927 **\u524d\u7f00+\u540e\u7f00** +\u53f3\u533a\u95f4\u7684\u533a\u95f4\u548c\uff0c\u4e8e\u662f\u6211\u4eec\u60ca\u559c\u7684\u53d1\u73b0\u4e0d\u7528\u518d\u7ef4\u62a4\u65b0\u4e1c\u897f\u4e86\uff0c\u597d\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u603b\u7ed3\u4e00\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u5728\u7ebf\u6bb5\u6811\u4e0a\u7ef4\u62a4\u4ee5\u4e0b\u4fe1\u606f\uff1a\n\n1.\u533a\u95f4\u548c\n\n2.\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\n\n3.\u533a\u95f4\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c\n\n4.\u533a\u95f4\u6700\u5927\u524d\u7f00\n\n5.\u533a\u95f4\u6700\u5927\u540e\u7f00\n\n6.\u533a\u95f4\u6700\u5927 **\u524d\u7f00+\u540e\u7f00**\n\n7.\u533a\u95f4\u6700\u5927 **\u524d\u7f00+\u4e2d\u95f4\u4e00\u6bb5**\n\n8.\u533a\u95f4\u6700\u5927 **\u540e\u7f00+\u4e2d\u95f4\u4e00\u6bb5**\n\n\uff08\u6ce8\u610f\u6211\u628a\u4e0a\u9762\u6df7\u642d\u8d77\u6765\u7684\u51e0\u4e2a\u4e1c\u897f\u6bd4\u5982 **\u524d\u7f00+\u540e\u7f00** \u52a0\u7c97\u4e86\uff0c\u76ee\u7684\u662f\u5f3a\u8c03\u8fd9\u5e76\u4e0d\u662f\u6700\u5927\u524d\u7f00+\u6700\u5927\u540e\u7f00\uff0c\u800c\u662f\u6700\u5927\u7684\u524d\u7f00+\u540e\u7f00\u7684\u548c\uff09\n\n\u5176\u5b9e\u5927\u5bb6\u53ef\u4ee5\u81ea\u5df1\u52a8\u624b\u753b\u4e00\u4e0b\u4e0a\u9762\u7684\u56fe\uff0c\u5c1d\u8bd5\u81ea\u5df1\u8ba8\u8bba\u4e00\u4e0b\u60c5\u51b5\uff0c\u8fd8\u662f\u4e0d\u96be\u7684\u3002\n\n\u4e0a\u4ee3\u7801~\uff08\u533a\u95f4\u5408\u5e76\u90e8\u5206\u5199\u7684\u7565\u5fae\u6076\u5fc3\u2026\u2026\uff09\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define ls(_o) (_o<<1)\n#define rs(_o) ((_o<<1)|1)\nusing namespace std;\ninline int get() {//\u5feb\u8bfb \n\tint n=0;\n\tchar c;\n\twhile((c=getchar())||23333) {\n\t\tif(c=='-')goto s;\n\t\tif(c>='0'&&c<='9')break;\n\t}\n\tn=c-'0';\n\twhile((c=getchar())||23333) {\n\t\tif(c>='0'&&c<='9')n=n*10+c-'0';\n\t\telse return(n);\n\t}\ns:\n\twhile((c=getchar())||23333) {\n\t\tif(c>='0'&&c<='9')n=n*10-c+'0';\n\t\telse return(n);\n\t}\n}\ntypedef struct _n {//\u6211\u628a\u7ebf\u6bb5\u6811\u8981\u7ef4\u62a4\u7684\u4fe1\u606f\u7528\u7ed3\u6784\u4f53\u5c01\u88c5\u4e86\u4e00\u4e0b \n\tint he;//\u533a\u95f4\u548c \n\tint zd;//\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c \n\tint zd2;//\u533a\u95f4\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c \n\tint qz;//\u533a\u95f4\u6700\u5927\u524d\u7f00 \n\tint hz;//\u533a\u95f4\u6700\u5927\u540e\u7f00 \n\tint qzhz;//\u533a\u95f4\u6700\u5927 \u524d\u7f00+\u540e\u7f00 \n\tint qzzj;//\u533a\u95f4\u6700\u5927 \u524d\u7f00+\u4e2d\u95f4\u4e00\u6bb5 \n\tint hzzj;//\u533a\u95f4\u6700\u5927 \u540e\u7f00+\u4e2d\u95f4\u4e00\u6bb5 \n\tfriend _n operator +(_n a,_n b) {//\u8fd9\u9898\u7684\u6838\u5fc3\u2014\u2014\u533a\u95f4\u4fe1\u606f\u5408\u5e76\uff08\u6211\u628a\u5b83\u5b9a\u4e49\u6210\u4e86+\u8fd0\u7b97\u7b26\uff09 \n\t\t_n c;\n\t\t//-------------\u533a\u95f4\u548c \n\t\tc.he=a.he+b.he;\n\t\t//-------------\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\uff08\u53c2\u89c1\u7b2c\u4e00\u5f20\u56fe\uff09 \n\t\tc.zd=max(a.zd,b.zd);\n\t\tc.zd=max(c.zd,a.hz+b.qz);\n\t\t//-------------\u533a\u95f4\u6700\u5927\u524d\u540e\u7f00\uff08\u53c2\u89c1\u7b2c\u4e8c\u5f20\u56fe\uff09 \n\t\tc.qz=max(a.qz,a.he+b.qz);\n\t\tc.hz=max(b.hz,b.he+a.hz);\n\t\t//-------------\u533a\u95f4\u6700\u5927 \u524d\u7f00+\u540e\u7f00\uff08\u53c2\u89c1\u7b2c\u4e94\u5f20\u56fe\uff09 \n\t\tc.qzhz=max(a.qz+b.hz,a.he+b.qzhz);\n\t\tc.qzhz=max(c.qzhz,b.he+a.qzhz);\n\t\t//-------------\u533a\u95f4\u6700\u5927 \u524d\u7f00+\u4e2d\u95f4\u4e00\u6bb5\uff08\u53c2\u89c1\u7b2c\u56db\u5f20\u56fe\uff08\u867d\u7136\u662f\u540e\u7f00\u4f46\u4e5f\u662f\u4e00\u6837\u7684~\uff09\uff09 \n\t\tc.qzzj=max(a.qzzj,a.he+b.qzzj);\n\t\tc.qzzj=max(c.qzzj,a.qz+b.zd);\n\t\tc.qzzj=max(c.qzzj,a.qzhz+b.qz);\n\t\t//-------------\u533a\u95f4\u6700\u5927 \u540e\u7f00+\u4e2d\u95f4\u4e00\u6bb5\uff08\u53c2\u89c1\u7b2c\u56db\u5f20\u56fe\uff09 \n\t\tc.hzzj=max(b.hzzj,b.he+a.hzzj);\n\t\tc.hzzj=max(c.hzzj,b.he+a.zd);\n\t\tc.hzzj=max(c.hzzj,b.qzhz+a.hz);\n\t\t//-------------\u533a\u95f4\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c\uff08\u53c2\u89c1\u7b2c\u4e09\u5f20\u56fe\uff09 \n\t\tc.zd2=max(a.zd2,b.zd2);\n\t\tc.zd2=max(c.zd2,a.zd+b.zd);\n\t\tc.zd2=max(c.zd2,a.hzzj+b.qz);\n\t\tc.zd2=max(c.zd2,a.hz+b.qzzj);\n\t\treturn(c);\n\t}\n} node;\nnode data[2000001];\nint ints[400001];\nvoid build(int l,int r,int tree) {//\u5efa\u6811 \n\tif(l==r) {\n\t\tdata[tree].he=data[tree].qz=data[tree].hz=data[tree].zd=ints[l];\n\t\tdata[tree].zd2=data[tree].qzhz=data[tree].qzzj=data[tree].hzzj=-123456789;\n\t\t//\u6ce8\u610f\u6d89\u53ca\u5230\u81f3\u5c11\u4e24\u4e2a\u70b9\u7684\u4fe1\u606f\uff08\u6bd4\u5982\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c\uff09\uff0c\u56e0\u4e3a\u73b0\u5728\u8fd9\u662f\u53f6\u5b50\uff0c\u6240\u4ee5\u8981\u628a\u4ed6\u4eec\u8bbe\u4e3a-inf\n\t\t//\u4ee5\u540e\u4f1a\u628a\u4ed6\u4eec\u5408\u5e76\u8d77\u6765\u7684 \n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild(l,mid,ls(tree));\n\tbuild(mid+1,r,rs(tree));\n\tdata[tree]=data[ls(tree)]+data[rs(tree)];\n}\nnode query(int rl,int rr,int l,int r,int tree) {//\u533a\u95f4\u67e5\u8be2 \n\tif(rl==l&&rr==r)return(data[tree]);\n\tint mid=(l+r)>>1;\n\tif(rl>mid)return(query(rl,rr,mid+1,r,rs(tree)));\n\tif(rr<=mid)return(query(rl,rr,l,mid,ls(tree)));\n\treturn(query(rl,mid,l,mid,ls(tree))+query(mid+1,rr,mid+1,r,rs(tree)));\n}\nint main() {\n\tint n=get();\n\tfor(register int i=1; i<=n; i++)ints[i]=get();\n\tfor(register int i=n+1; i<=(n<<1); i++)ints[i]=ints[i-n];//\u590d\u5236\u4e00\u4efd\u63a5\u5728\u540e\u9762 \n\tbuild(1,n<<1,1);\n\tint maxn=-2147483646;\n\tfor(register int i=1; i<=n; i++) {//\u679a\u4e3e\u8d77\u70b9 \n\t\tnode cjr=query(i,i+n-1,1,n<<1,1);\n\t\tmaxn=max(maxn,cjr.zd2);\n\t}\n\tcout<<maxn<<endl;\n\treturn(0);\n}\n```",
        "postTime": 1540206986,
        "uid": 125124,
        "name": "ywy_c_asm",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "[\u4e5f\u8bb8\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c1](https://blog.csdn.net/Morning_Glory_JR/article/details/97390944)\t\t\n\n[\u4e5f\u8bb8\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c2](https://www.cnblogs.com/Morning-Glory/p/11250817.html)\n\n# O(n)\u7684\u8d2a\u5fc3\u505a\u6cd5\t\n\n~~(\u597d\u5427\u8fd9\u4e00\u53e5\u53ea\u662f\u5438\u5f15\u4f60\u4eec\u6ce8\u610f\u7684\uff0c\u4e0d\u8fc7\u786e\u5b9e\u662f\u8d2a\u5fc3\uff0c\u786e\u5b9e\u662fO(n))~~\t\n\n# $\\mathcal{Description}$\n\n\u7ed9\u51fa\u4e00\u6bb5\u73af\u72b6\u5e8f\u5217\uff0c\u5373\u8ba4\u4e3a$a_1$\u548c$a_n$\u200b\u662f\u76f8\u90bb\u7684\uff0c\u9009\u51fa\u5176\u4e2d\u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5\u4f7f\u5f97\u8fd9\u4e24\u6bb5\u548c\u6700\u5927\u3002\n\n---\n\n# $\\mathcal{Solution}$\n\n## \u601d\u8def\n\n\n\u8981\u6c42\u4e24\u4e2a\u6700\u5927\u5b50\u6bb5\uff0c\u8003\u8651\u5176\u4e0e\u6700\u5927\u5b50\u6bb5\u7684\u5173\u7cfb\t\n\u6211\u4eec\u5148\u628a\u5e8f\u5217\u590d\u5236\u4e00\u904d\uff0c\u6c42\u51fa\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e$n$\u7684\u6700\u5927\u5b50\u6bb5\t\n\u628a\u5176\u5de6\u7aef\u70b9\u4f5c\u4e3a\u8d77\u70b9\uff0c\u73b0\u5728\u5f97\u5230\u4e00\u4e2a\u957f\u5ea6\u4e3a$n$\u7684\u5b50\u6bb5\t\n\u5982\u56fe\uff0c\u8fd9\u4e2a\u6700\u5927\u5b50\u6bb5\u7684\u548c\u4e00\u5b9a\u662f\u6b63\u6570\uff0c\u65c1\u8fb9\u4e00\u5b9a\u662f\u8d1f\u6570\t\n![\u4f8b1](https://img-blog.csdnimg.cn/20190726151616528.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01vcm5pbmdfR2xvcnlfSlI=,size_16,color_FFFFFF,t_70)\n\u8bc1\u660e\uff0c\u5982\u679c\u65c1\u8fb9\u4e0d\u662f\u8d1f\u6570\u90a3\u4e48\u5176\u4e0d\u662f\u6700\u5927\u5b50\u6bb5\n\n\u90a3\u4e48\u8981\u518d\u5f04\u4e00\u4e2a\u5b50\u6bb5\u51fa\u6765\uff0c__\u6709\u4e14\u4ec5\u6709__ \u4e24\u79cd\u65b9\u5f0f\t\t\n* \u5c06$r+x\\ $ \uff5e $\\ i+n-1$\u4e2d\u7684\u6700\u5927\u6bb5\u53d6\u51fa\u6765\u4e0e\u6700\u5927\u6bb5\u51d1\u6210\u4e24\u6bb5\t\n* \u6700\u5927\u6bb5\u53ef\u80fd\u662f\u6709\u4e0d\u8fde\u7eed\u7684\u6b63\u6570\u4e00\u8d77\u62fc\u51fa\u6765\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e2d\u95f4\u6709\u8d1f\u6570\t\n\t* \u5982\u56fe\t\n                ![\u4f8b2](https://img-blog.csdnimg.cn/20190726152059597.png)\n\t*  \u53e6\u4e00\u79cd\u65b9\u5f0f\u5c31\u662f\u5c06\u6700\u5927\u5b50\u6bb5\u62c6\u6210\u4e24\u4e2a\u5b50\u6bb5\t\n\n\u4e3a\u4ec0\u4e48\u6ca1\u6709\u53e6\u4e00\u79cd\u65b9\u5f0f\u5c06\u5305\u542b\u4e86\u6700\u5927\u5b50\u6bb5\u4e2d\u7684\u67d0\u4e00\u6bb5\u5e76\u4e0e\u4e0d\u5305\u542b\u6700\u5927\u5b50\u6bb5\u7684\u67d0\u6bb5\u51d1\u6210\u4e24\u6bb5\t\n\u65e2\u7136\u9898\u76ee\u8981\u5b50\u6bb5\u6700\u5927\uff0c\u90a3\u6ca1\u9053\u7406\u53ea\u53d6\u6700\u5927\u5b50\u6bb5\u4e2d\u7684\u4e00\u5c0f\u6bb5\t\n\n\u6ca1\u6709\u53e6\u5916\u7684\u9009\u62e9\u65b9\u5f0f\u4e86 ~~(\u9009\u4e00\u5806\u8d1f\u6570\u9664\u5916)~~\t\n\n## \u5b9e\u73b0\u65b9\u6cd5\n\n---\n\n\u4e8e\u662f\u6211\u4eec\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5c31\u53ea\u6709\u4e24\u4e2a\u4e86\t\n* \u600e\u4e48\u6c42\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8e$n$\u7684\u6700\u5927\u5b50\u6bb5\t\n\t\u5982\u679c\u6ca1\u6709\u957f\u5ea6\u9650\u5236\u76f8\u4fe1\u5927\u5bb6\u90fd\u4f1a\u6c42\t\n\t\u5373\u7528$sum[i]$\u8868\u793a\u524d\u7f00\u548c\uff0c\u5728\u524d\u9762\u627e\u4e00\u4e2a\u6700\u5c0f\u7684$sum[j]$\uff0c\u7528$sum[i]-sum[j]$\u5c31\u662f\u4ee5$i$\u4e3a\u7ed3\u5c3e\u7684\u6700\u5927\u5b50\u6bb5\u4e86\t\n\t\u53ea\u9700$O(n)$\u626b\u4e00\u904d\u5373\u53ef\t\n\t\u6709\u4e86\u957f\u5ea6\u9650\u5236\u7684\u6700\u5927\u5b50\u6bb5\t\n\t\u8fd8\u662f\u8981\u518d\u524d\u9762\u627e\u4e00\u4e2a\u6700\u5c0f\u7684$sum[j]$\uff0c\u5e76\u4e14\u8981\u6709$i-j<n\\ (i-j+1\\leq n)$\t\n\t\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u4e00\u4e0b\u5c31\u597d\u4e86\uff0c\u5373\u6b64\u65f6\u6700\u5c0f\u7684$sum[j]$\u4e0d\u6ee1\u8db3\u957f\u5ea6\u6761\u4ef6\uff0c\u90a3\u6211\u4eec\u5c31\u6362\u6210\u6ee1\u8db3\u6761\u4ef6\u7684$sum[j]$\t\n* \u600e\u4e48\u8ba1\u7b97\u7b54\u6848\t\n\t\u5148\u6c42\u4e00\u904d\u6700\u5927\u5b50\u6bb5\t\n\t\u7b2c\u4e00\u79cd\u60c5\u51b5\t\u6c42\u51fa\u5176\u53f3\u7aef\u70b9$r$\u5230$l+n-1$\u7684\u6700\u5927\u5b50\u6bb5\t\n\t\u7b2c\u4e8c\u79cd\u60c5\u51b5\t\u53ef\u8ba4\u4e3a\u662f\u51cf\u53bb\u4e2d\u95f4\u7684\u4e00\u4e2a\u6700\u5c0f\u5b50\u6bb5\uff0c\u628a\u6240\u6709\u6570\u53d8\u6210\u5176\u76f8\u53cd\u6570\uff0c\u518d\u6c42\u4e00\u904d\u6700\u5927\u5b50\u6bb5\u5373\u53ef\u6c42\u51fa\u8981\u51cf\u53bb\u7684\u6570\u7684\u7edd\u5bf9\u503c(\u4e5f\u5c31\u662f\u8981\u52a0\u4e0a\u7684\u6570)\t\n\n\n\u53e6\u5916\uff0c\u8fd9\u4ec5\u662f\u8003\u8651\u4e24\u4e2a\u6700\u5927\u5b50\u6bb5\u90fd\u662f\u6b63\u6570\u7684\u60c5\u51b5\uff0c\u82e5\u7ed9\u51fa\u7684\u7b54\u6848\u4e3a\u8d1f\u6570\uff0c\u8ba1\u7b97\u7ed3\u679c\u5c31\u4f1a\u4e3a0\t\n\u5bf9\u8fd9\u79cd\u60c5\u51b5\u7279\u5224\u4e00\u4e0b\u5c31\u597d\u4e86\t\n\n\u8fd8\u6709!\t\n\u82e5\u53f3\u8fb9\u5168\u662f\u8d1f\u6570\u5e76\u4e14\u6700\u5927\u5b50\u6bb5\u6ca1\u6709\u8d1f\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u5c06\u6700\u5927\u5b50\u6bb5\u4eba\u4e3a\u7684\u8ba4\u4e3a\u662f\u4e24\u4e2a\u5b50\u6bb5\u5c31\u597d\u4e86\t\n~~\u8bf4\u8fd9\u4e48\u591a\u5176\u5b9e\u7279\u5224\u7684\u5e76\u6ca1\u6709\u4ec0\u4e48\u4e1c\u897f~~\t\n\n---\n\n# $\\mathcal{Code}$\n\n```cpp\n/*******************************\nAuthor:Morning_Glory\nLANG:C++\nCreated Time:2019\u5e7407\u670826\u65e5 \u661f\u671f\u4e94 10\u65f632\u520659\u79d2\n *******************************/\n#include <cstdio>\n#include <fstream>\n#include <queue>\n#include <algorithm>\n#define ll long long\n#define mp make_pair\nusing namespace std;\nconst int maxn = 400005;\n//{{{cin \u8bfb\u5165\u4f18\u5316\nstruct IO{\n\ttemplate<typename T>\n\t\tIO & operator>>(T&res){\n\t\t\tres=0;\n\t\t\tbool flag=false;\n\t\t\tchar ch;\n\t\t\twhile((ch=getchar())>'9'||ch<'0')\t flag|=ch=='-';\n\t\t\twhile(ch>='0'&&ch<='9') res=(res<<1)+(res<<3)+(ch^'0'),ch=getchar();\n\t\t\tif (flag)\t res=~res+1;\n\t\t\treturn *this;\n\t\t}\n}cin;\n//}}}\nint n,l1,l2,r1,r2,t,tt;\nll a[maxn];\nll ans,t1,t2;\n//{{{_find \u627el~r\u4e2d\u7684\u6700\u5927\u5b50\u6bb5 \u8be5\u5b50\u6bb5\u5de6\u7aef\u70b9\u4e3alt\u53f3\u7aef\u70b9\u4e3art\nll _find (ll l,ll r,int &lt,int &rt)\n{\n\tdeque< pair<ll,ll> > q;//\u5355\u8c03\u961f\u5217\u8bb0\u5f97\u5f00long long\uff0c\u6ca1\u5f00WA\u4e86\uff0c\u8003\u8bd5\u5c31\u70b8\u4e86\n\tll sum=0,mx=-97865432112345678,res;\n\tq.push_front(mp(l-1,0));\n\tfor (int i=l;i<=r;++i){\n\t\tsum+=a[i];\n\t\twhile (!q.empty()&&i-q.front().first>n)\tq.pop_front();\n\t\tif (!q.empty()){\n\t\t\tres=sum-q.front().second;\n\t\t\tif (res>mx){\tlt=q.front().first+1,rt=i,mx=res;}\n\t\t}\n\t\twhile (!q.empty()&&sum<=q.back().second)\tq.pop_back();\n\t\tq.push_back(mp(i,sum));\n\t}\n\treturn mx;\n}\n//}}}\nint main()\n{\n\tcin>>n;\n\tfor (int i=1;i<=n;++i)\tcin>>a[i],a[i+n]=a[i];\n\tans=_find(1,2*n,l1,r1);//\u5168\u5c40\u6700\u5927\u5b50\u6bb5\n\tif (ans<0){\n\t\tsort(a+1,a+n+1);\n\t\tprintf(\"%lld\\n\",a[n]+a[n-1]);\n\t\treturn 0;\n\t}\n\tt1=_find(r1+1,l1+n-1,l2,r2);//\u53f3\u8fb9\u7684\u6700\u5927\u5b50\u6bb5\n\tfor (int i=l1;i<=r1;++i)\ta[i]=-a[i];\n\tt2=_find(l1,r1,t,tt);//\u4e2d\u95f4\u7684\u6700\u5c0f\u5b50\u6bb5\u548c\u7684\u7edd\u5bf9\u503c\n\tans=max(0ll,max(t1,t2))+ans;//0\u662f\u5bf9\u5e94\u6700\u540e\u90a3\u4e2a\u8fd8\u6709\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n\n```\n\n>\u5982\u6709\u54ea\u91cc\u8bb2\u5f97\u4e0d\u662f\u5f88\u660e\u767d\u6216\u662f\u6709\u9519\u8bef\uff0c\u6b22\u8fce\u6307\u6b63\t\n\u5982\u60a8\u559c\u6b22\u7684\u8bdd\u4e0d\u59a8\u70b9\u4e2a\u8d5e\u6536\u85cf\u4e00\u4e0b\u5427",
        "postTime": 1564127755,
        "uid": 89048,
        "name": "Morning_Glory",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\n\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c(luogu 1121)\n\n\u7b2c\u4e00\u9053\u4e0d\u770b\u9898\u89e3A\u6389\u7684\u7d2b\u9898\uff01\u5e86\u795d\u4e00\u4e0b\uff01\n\n\u89e3\u6cd5\uff1a\u4e00\u770b\u5c31\u662fDP\u554a\n\n\u9996\u5148\u80fd\u60f3\u5230\u7834\u73af\u4e3a\u94fe\uff0c\u7136\u800c\u5e76\u4e0d\u662f\u8fd9\u6837\n\n\u601d\u8def\u662f\u7528f[i][1/2][0/1]\u8868\u793a\u5230\u7b2ci\u4e2a\u5206\u62100/1/2\u4e2a\u5b50\u6bb5\u9009\u6216\u4e0d\u9009\u7b2ci\u4e2a\u7684\u6700\u5927\u548c\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n\u5230i\u53ea\u9009\u4e00\u4e2a\u5b50\u6bb5\uff0c\u4e0d\u9009\u7b2ci\u4e2a\n\nf[i][1][0]=max(f[i-1][1][0],f[i-1][1][1]);\n\n\u5230i\u53ea\u9009\u4e00\u4e2a\u5b50\u6bb5\uff0c\u9009\u7b2ci\u4e2a\n\nf[i][1][1]=max(f[i-1][1][1]+a[i],a[i]);\n\n\u5230i\u9009\u4e24\u4e2a\u5b50\u6bb5\uff0c\u4e0d\u9009\u7b2ci\u4e2a\n\n\u65e2\u7136\u8fd9\u4e2a\u4e0d\u9009\uff0c\u90a3\n\nf[i][2][0]=max(f[i-1][2][1],f[i-1][2][0]);\n\n\u5230i\u9009\u4e24\u4e2a\u5b50\u6bb5\uff0c\u9009\u7b2ci\u4e2a\n\n\u90a3\u5f97\u597d\u597d\u8003\u8651\u4e00\u4e0b\n\n\u5982\u679c\u4e0a\u4e00\u4e2a\u6ca1\u9009\n\n\u5c31\u53ef\u4ee5\u7528f[i-1][1][0]\uff08\u4e0a\u4e00\u4e2a\u6ca1\u9009\uff0c\u622a\u6b62\u5230\u4e0a\u4e00\u4e2a\u9009\u4e86\u4e00\u4e2a\u5b50\u6bb5\uff09\u8f6c\u79fb\n\n\u4f46\u4e0d\u80fd\u7528f[i-1][2][0]\uff08\u4e0a\u4e00\u4e2a\u6ca1\u9009\uff0c\u622a\u6b62\u5230\u4e0a\u4e00\u4e2a\u9009\u4e86\u4e24\u4e2a\u5b50\u6bb5\uff09\n\n\u56e0\u4e3a\u4e0a\u4e00\u4e2a\u6ca1\u9009\uff0c\u8fd9\u4e00\u4e2a\u9009\u4e86\uff0c\u4e0d\u5c31\u9009\u4e86\u4e09\u4e2a\u4e86\u5417\n\n\u5982\u679c\u4e0a\u4e00\u4e2a\u9009\u4e86\n\n\u5c31\u53ef\u4ee5\u7528f[i-1][1][1]\uff08\u4e0a\u4e00\u4e2a\u9009\u4e86\uff0c\u622a\u6b62\u5230\u4e0a\u4e00\u4e2a\u9009\u4e86\u4e24\u4e2a\u5b50\u6bb5\uff09\n\n\u548cf[i-1][2][1]\uff08\u4e0a\u4e00\u4e2a\u9009\u4e86\uff0c\u622a\u6b62\u5230\u4e0a\u4e00\u4e2a\u9009\u4e86\u4e24\u4e2a\u5b50\u6bb5\uff09\u8f6c\u79fb\n\n\u65b9\u7a0b\u5927\u6982\u662f\n\nf[i][2][1]=max(f[i-1][1][0],max(f[i-1][1][1],f[i-1][2][1]))+a[i];\n\n\u4f46\u662f\u6709\u4e00\u4e2a\u5f88\u6076\u5fc3\u7684\u5730\u65b9\u9700\u8981\u8003\u8651\n\n\u56e0\u4e3a\u8fd9\u4e2a\u73af\u4e0d\u80fd\u7ed5\u56de\u53bb\uff0c\u6240\u4ee5\u63a8\u67d0\u4e00\u4e2a\u72b6\u6001\u7684\u65f6\u5019\u6700\u591a\u8003\u8651\u5b83\u540e\u9762\u7684n\u4e2a\n\n\u7136\u540e\u7a81\u7136\u60f3\u5230\n\n\u53ef\u4ee5\u8003\u8651\u4e00\u79cd\u5206\u6210\u4e09\u4e2a\u5b50\u6bb5\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5fc5\u987b\u9009\n\n\u8fd9\u6837\u4e0d\u5c31\u89c6\u4e3a\u80fd\u7ed5\u56de\u53bb\u7684\u60c5\u51b5\u4e86\u5417\n\n\u8fd9\u4e2a\u60f3\u662f\u6458\u51fa\u6765\u5355\u72ec\u7b97\n\n\u5c31\u662f\u76f4\u63a5\u52a0\u4e0aa[1]\u548ca[n]\uff0c\u7136\u540e\u4ece2\u5230n-1\u5faa\u73af\n\n\u4f46\u662f\u6709\u4e00\u4e2a\u65b9\u7a0b\u8981\u6539\u4e00\u4e0b\uff0c\u5c31\u662ff[i][1][1]=f[i-1][1][1]+a[i]\n\n\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u5fc5\u987b\u9009\uff0c\u6240\u4ee5\u5230\u7b2ci\u4e2a\u60f3\u8981\u4fdd\u6301\u4e00\u4e2a\u5b50\u6bb5\u5c31\u8981\u4e00\u53ea\u52a0\n\n\u5269\u4e0b\u7684\u4ed4\u7ec6\u60f3\u60f3\uff0c\u4e0d\u6539\u4e5f\u90fd\u6ca1\u6bdb\u75c5\n\n\u518d\u60f3\u60f3\u521d\u59cb\u5316\uff0c\u7531\u4e8e\u6709\u8d1f\u6570\u6240\u4ee5\u5148\u628af memset\u6210128\n\n\u7136\u540e\u518df[1][1][1]=a[1];\n\n\u4e4b\u540e\u4ece2\u5f00\u59cb\u7b97\u5c31\u597d\u54af\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nint n,a[200001],f[200001][4][2],ans1,ans2;\nint main()\n{\n    cin>>n;\n    for (int i=1;i<=n;i++)\n        cin>>a[i];\n    memset(f,128,sizeof(f));\n    f[1][1][1]=a[1];\n    for (int i=2;i<=n;i++)\n    {\n        f[i][1][0]=max(f[i-1][1][0],f[i-1][1][1]);\n        f[i][1][1]=max(f[i-1][1][1],0)+a[i];\n        f[i][2][0]=max(f[i-1][2][0],f[i-1][2][1]);\n        f[i][2][1]=max(f[i-1][1][0],max(f[i-1][1][1],f[i-1][2][1]))+a[i];\n    }    \n    ans1=max(f[n][2][0],f[n][2][1]);\n    memset(f,128,sizeof(f));\n    f[1][1][1]=a[1];\n    for (int i=2;i<=n;i++)\n    {\n        f[i][1][0]=max(f[i-1][1][0],f[i-1][1][1]);\n        f[i][1][1]=f[i-1][1][1]+a[i];\n        f[i][2][0]=max(f[i-1][2][0],f[i-1][2][1]);\n        f[i][2][1]=max(f[i-1][1][0],max(f[i-1][1][1],f[i-1][2][1]))+a[i];\n        f[i][3][0]=max(f[i-1][3][0],f[i-1][3][1]);\n        f[i][3][1]=max(f[i-1][2][0],max(f[i-1][2][1],f[i-1][3][1]))+a[i];\n    }\n    ans2=f[n][3][1];\n    cout<<max(ans1,ans2); \n}\n```",
        "postTime": 1508924162,
        "uid": 43470,
        "name": "xMinh",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\n\n-  \u4e0d\u8de8\u73af\n\n\u4e3e\u4e2a\u4f8b\u5b50\n\n$$0001111100000222220$$\n\n\u6570\u5b57\u8868\u793a\u5c5e\u4e8e\u54ea\u4e00\u6bb5\uff0c0 \u8868\u793a\u4e0d\u9009\u3002\n\n\u6b64\u65f6\u53ea\u8981\u7ef4\u62a4 \n\n$f_i$ \u8868\u793a $1$ \u5230 $i$ \u7684 \u6700\u5927\u5b50\u6bb5\u548c\n\n$g_i$ \u8868\u793a $i$ \u5230 $n$ \u7684 \u6700\u5927\u5b50\u6bb5\u548c\n\n\u7136\u540e\u679a\u4e3e\u65ad\u70b9\uff0c\u53d6\u5de6\u53f3\u4e24\u8fb9\u6700\u5927\u5b50\u6bb5\u548c\u7684 $\\max$ \u5373\u53ef\u3002\n\n\u7b54\u6848 \u4e3a \n\n$$\\max_{i=1}^{n-1}f_{i}+g_{i+1}$$\n\n- \u8de8\u73af\n\n\u4e3e\u4e2a\u4f8b\u5b50\n\n$$1111000 222200011111$$\n\n\u6b64\u65f6\u9996\u5c3e\u90fd\u5c5e\u4e8e\u4e00\u4e2a\u5b50\u6bb5\u548c\u5185\u3002\n\n\u8003\u8651\u6b64\u65f6\u5fc5\u5b9a\u6709\u4e24\u6bb5\u4e0d\u9009\uff0c\u56e0\u4e3a\u662f\u603b\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u90a3\u4e48\u5c31\u8981\u7136\u540e\u8fd9\u4e0d\u9009\u7684\u4e24\u6bb5\u6700\u5c0f\u3002\n\n\u90a3\u4e48\u53ea\u8981\u6c42\u51fa\u6700\u5c0f\u5e8f\u5217\uff08\u4e0d\u662f\u73af\u72b6\uff09\u4e24\u6bb5\u5b50\u6bb5\u548c\u5373\u53ef\uff0c\u7528\u603b\u548c\u51cf\u53bb\u8fd9\u4e2a\u503c\uff0c\u5c31\u662f\u7b54\u6848\u3002\n\n\u8bbe\n\n$f_i$ \u8868\u793a $1$ \u5230 $i$ \u7684 \u6700**\u5c0f**\u5b50\u6bb5\u548c\n\n$g_i$ \u8868\u793a $i$ \u5230 $n$ \u7684 \u6700**\u5c0f**\u5b50\u6bb5\u548c\n\n\u7b54\u6848\u4e3a \n\n$$\\sum_{i=1}^{n}a_i-\\min_{i=1}^{n-1}f_{i}+g_{i+1}$$\n\n## \u5751\u70b9\n\n\u5982\u679c\u9009\u51fa\u6765\u7684\u4e24\u6bb5\u6700\u5c0f\u5b50\u6bb5\u548c\u662f\u6574\u4e2a\u5e8f\u5217\uff0c\u90a3\u4e48\u663e\u7136\u4e0d\u7b26\u5408\u9898\u76ee\u6761\u4ef6\uff0c\u5e94\u8be5\u4e0d\u8003\u8651\u3002\n\n```cpp\n\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n#define mem(a,b) memset(a,b,sizeof(a))\ninline int read(){\n\tregister int x=0,f=0,ch=getchar();\n\twhile('0'>ch||ch>'9')f^=ch=='-',ch=getchar();\n\twhile('0'<=ch&&ch<='9')x=(x<<1)+(x<<3)+(ch^'0'),ch=getchar();\n\treturn f?-x:x;\n}\nconst int MAX=200005;\nconst int INF=0x3f3f3f3f; \nint res,ans,sum,f[MAX],g[MAX],h[MAX],n,a[MAX];\nsigned main(){\n\tn=read();\n\tfor(register int i=1;i<=n;++i)a[i]=read(),sum+=a[i];\n\t\n\tans=-INF;\n\tf[0]=h[0]=-INF;\n\tfor(register int i=1;i<=n;++i)h[i]=max(h[i-1]+a[i],a[i]),f[i]=max(f[i-1],h[i]);\n\tg[n+1]=h[n+1]=-INF;\n\tfor(register int i=n;i;--i)h[i]=max(h[i+1]+a[i],a[i]),g[i]=max(g[i+1],h[i]);\n\tfor(register int i=1;i<=n;++i)ans=max(ans,f[i]+g[i+1]);\n\t\n\tres=INF;\n\tf[0]=h[0]=INF;\n\tfor(register int i=1;i<=n;++i)h[i]=min(h[i-1]+a[i],a[i]),f[i]=min(f[i-1],h[i]);\n\tg[n+1]=h[n+1]=INF;\n\tfor(register int i=n;i;--i)h[i]=min(h[i+1]+a[i],a[i]),g[i]=min(g[i+1],h[i]);\n\tfor(register int i=1;i<=n;++i)res=min(res,f[i]+g[i+1]);\n\n\tprintf(\"%d\\n\",max(ans,sum-res));\n\treturn 0;\n}\n\n\n```",
        "postTime": 1589691667,
        "uid": 119062,
        "name": "Lates",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "- \u4e24\u79cd\u60c5\u51b5\uff1a\n\n    1.---max---max---\n\n    2.max--max--max\n    \n\u7b2c\u4e8c\u79cd\u60c5\u51b5\u53ef\u4ee5\u8f6c\u5316\u6210\u603b\u548c\u51cf\u4e24\u6bb5\u6700\u5c0f\u548c\u3002\n\n\u6240\u4ee5\uff0c\u9898\u610f\u6e05\u6670\u660e\u4e86\uff1a\u6c42\u4e24\u5b50\u6bb5\u548c\u6781\u503c\u3002\n\n- \u8003\u8651 DP\uff1a\n\n$t_i=\\max or \\min(a_i,f_{i-1}+a_i)$ \u8868\u793a\u4ee5 $i$ \u4e3a\u7ed3\u5c3e\u7684\u5b50\u6bb5\u548c\u6781\u503c\u3002\n\n$f_i=\\max or \\min(f_{i-1},t[i])$ \u8868\u793a\u533a\u95f4 $[1,i]$ \u7684\u5b50\u6bb5\u548c\u6781\u503c\u3002\n\n$g_i=\\max or \\min(g_{i+1},t[i])$ \u8868\u793a\u533a\u95f4 $[i,n]$ \u7684\u5b50\u6bb5\u548c\u6781\u503c\u3002\n\n\u5219\u4ee5 $i$ \u548c $i+1$ \u4e3a\u5206\u754c\u7ebf\uff1a\n\n$ans=\\max(\\max(ans,f_i+g_{i+1}),sum-\\min(ans,f_i+g_{i+1})).$\n\n\u9700\u8981\u7279\u5224\u8ba1\u7b97\u51fa\u7684\u5b50\u6bb5\u6781\u503c\u4e3a\u7a7a\u7684\u60c5\u51b5 \uff08`80` \u5206\uff09\u3002\n\n- \u4e3b\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#define MAXN 200005\nconst int INF=0x3f3f3f3f;\nint n,a[MAXN],sum,t[MAXN],f[MAXN],g[MAXN],maxn,minn;\nint get_max(){\n\tint ans=-INF;\n\tfor(int i=1;i<=n;++i){\n\t\tt[i]=max(a[i],t[i-1]+a[i]);\n\t\tf[i]=max(f[i-1],t[i]);\n\t}\n\tfor(int i=n;i>=1;--i){\n\t\tt[i]=max(a[i],t[i+1]+a[i]);\n\t\tg[i]=max(g[i+1],t[i]);\n\t}\n\tfor(int i=1;i<=n;++i){\n\t\tans=max(ans,f[i]+g[i+1]);\n\t}\n\treturn ans;\n}\nint get_min(){\n\tint ans=INF;\n\tfor(int i=1;i<=n;++i){\n\t\tt[i]=min(a[i],t[i-1]+a[i]);\n\t\tf[i]=min(f[i-1],t[i]);\n\t}\n\tfor(int i=n;i>=1;--i){\n\t\tt[i]=min(a[i],t[i+1]+a[i]);\n\t\tg[i]=min(g[i+1],t[i]);\n\t}\n\tfor(int i=1;i<=n;++i){\n\t\tans=min(ans,f[i]+g[i+1]);\n\t}\n\treturn ans;\n}\n```\n",
        "postTime": 1626521830,
        "uid": 271736,
        "name": "Daidly",
        "ccfLevel": 6,
        "title": "P1121 \u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c \u9898\u89e3"
    },
    {
        "content": "## \u601d\u8def\n\n\u89c2\u5bdf\u9898\u76ee\uff0c\u53d1\u73b0\u4e0d\u7ba1\u600e\u4e48\u9009\uff0c\u90fd\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n```\n1. ++++++---++++---\n\n2. ++---+++++--++++\n```\n\n\u5373\u8981\u4e48\u662f\u9009\u4e24\u6bb5\u7684\uff08\u5bf9\u5e94$1.$\uff09\uff0c\u8981\u4e48\u662f\u6709\u4e24\u6bb5\u4e0d\u9009\u7684\uff08\u5bf9\u5e94$2.$\uff09\n\n\u8fd9\u6837\u60f3\u5c31\u4f1a\u628a\u73af\u62c6\u6210\u4e00\u6761\u94fe\n\n\u90a3\u4e48\u5bf9\u4e8e$1.$\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u5934\u5c3e\u4e24\u7aef\u53bb\u626b\u63cf\u6570\u7ec4\uff0c\u8bbe$f[i]$\u4e3a$1-i$\u548c\u6700\u5927\u7684\u8fde\u7eed\u7684\u4e00\u6bb5\uff1a\n\n```\nf[i] = max(f[i - 1], 0) + a[i];\n```\n\n\u8fd9\u6837\u4fdd\u8bc1\u4e86\u626b\u63cf\u4e00\u904d\u540e\u7684$f[i]$\u5fc5\u5b9a\u662f\u5728\u4ee5$i$\u7ed3\u5c3e\u4e00\u4e2a\u8fde\u7eed\u7684\u4e00\u6bb5\u4e2d\n\n\u4f46\u5e76\u4e0d\u662f\u6700\u4f18\u7684\u90a3\u4e00\u6bb5\uff0c\u56e0\u4e3a\u5728$1-i$\u4e2d\u6700\u4f18\u7684\u4e00\u6bb5\u53ef\u80fd\u4e0d\u4ee5$i$\u7ed3\u5c3e\n\n\u6240\u4ee5\u518d\u626b\u63cf\u4e00\u904d\u6570\u7ec4\uff1a\n\n```\nf[i] = max(f[i - 1], f[i]);\n```\n\n\u4fbf\u5f97\u5230\u4e86$1-i$\u4e2d\u548c\u6700\u5927\u7684\u8fde\u7eed\u7684\u4e00\u6bb5\n\n\u56e0\u4e3a\u662f\u4e24\u6bb5\uff0c\u6240\u4ee5\u8bbe$g[i]$\u4e3a$i-n$\u4e2d\u548c\u6700\u5927\u7684\u8fde\u7eed\u7684\u4e00\u6bb5\uff0c\u518d\u626b\u4e24\u904d\uff0c\u6bd4\u8f83\u4e00\u4e0b\uff1a\n\n```\nres = max(res, f[i] + g[i + 1]);//\u6ce8\u610f\u56e0\u4e3a\u4e0d\u91cd\u53e0\uff0c\u6240\u4ee5\u662fg[i + 1]\n```\n\n\u8fd9\u662f\u7b2c\u4e00\u79cd\u60c5\u51b5\u7684\u505a\u6cd5\n\n\u7b2c\u4e8c\u79cd\u6c42\u6700\u4f18\u7684\u4e09\u6bb5\u7684\u548c\uff0c\u90a3\u4e48\u4e5f\u5c31\u662f\u603b\u548c\u51cf\u53bb\u4e0d\u8981\u7684\u4e24\u6bb5\n\n\u90a3\u4e48\u628a\u4e0a\u9762\u7684$max$\u6539\u6210$min$\u5c31\u53ef\u4ee5\u6c42\u51fa\u4e0d\u8981\u7684\u4e24\u6bb5\u7684\u548c\u4e86\n\n\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\uff1a\u628a$a$\u6570\u7ec4\u6b63\u8d1f\u7ffb\u8f6c\uff0c\u76f4\u63a5\u8dd1\uff0c\u6700\u540e\u662f$sum+ask()$\uff08\u56e0\u4e3a\u7b26\u53f7\u53d8\u4e86\uff09\n\n### \u6ce8\u610f\n\n- \u82e5\u5168\u662f**\u975e\u6b63\u6570**\uff0c\u7b2c\u4e8c\u6b21\u8dd1\u4f1a\u8fd4\u56de$0$\uff08\u5168\u4e0d\u9009\uff09\uff0c\u6240\u4ee5\u8981\u6392\u9664\u8fd9\u79cd\u60c5\u51b5\n\n- \u82e5\u53ea\u6709**\u4e00\u4e2a\u6b63\u6570**\uff0c\u7b2c\u4e8c\u6b21\u8dd1\u4f1a\u628a\u9664\u5b83\u5168\u4e0d\u9009\uff0c\u662f\u9519\u7684\uff0c\u8981\u7279\u5224\n\n*\u81ea\u5df1\u60f3\u60f3\u4e3a\u4ec0\u4e48\uff0c\u5bf9\u4ee5\u540e\u7684\u53d8\u5f62\u4f1a\u6709\u597d\u5904*\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n\n#define MAXN 200010\n\nusing namespace std;\n\nint n, ans, sum, positive_num;\n\nint a[MAXN], f[MAXN], g[MAXN];\n\nint ask() {\n\tint res = -MAXN;\n\tfor (int i = 1; i <= n; i++) f[i] = max(f[i - 1], 0) + a[i];\n\tfor (int i = n; i >= 1; i--) g[i] = max(g[i + 1], 0) + a[i];\n\tfor (int i = 1; i <= n; i++) f[i] = max(f[i - 1], f[i]);\n\tfor (int i = n; i >= 1; i--) g[i] = max(g[i + 1], g[i]);\n\tfor (int i = 1; i < n; i++) res = max(res, f[i] + g[i + 1]);\n\treturn res;\n}\n\nint main() {\n\tscanf(\"%d\", &n);\n\tmemset(f, ~0x7f, sizeof(f));\n\tmemset(g, ~0x7f, sizeof(g));\n\tfor (int i = 1; i <= n; i++) {\n\t\tscanf(\"%d\", &a[i]);\n\t\tsum += a[i];\n\t\tif (a[i] > 0) positive_num++;\n\t}\n\tans = ask();\n\tif (positive_num == 1) {\n\t\tcout << ans << endl;\n\t\treturn 0;\n\t}\n\tfor (int i = 1; i <= n; i++) a[i] *= -1;\n\tans = max(ans, sum + ask() ? sum + ask() : -MAXN);\n\tcout << ans << endl;\n\treturn 0;\n} \n```\n\n> \u65e5\u62f1\u4e00\u5352\uff0c\u529f\u4e0d\u5510\u6350\n",
        "postTime": 1575182015,
        "uid": 18673,
        "name": "ctq1999",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1121 \u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c"
    },
    {
        "content": "# \u9898\u89e3 [P1121 \u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c](https://www.luogu.org/problemnew/show/P1121)\n\n- - **698**\u901a\u8fc7\n  - **2.9K**\u63d0\u4ea4\n- **\u96be\u5ea6** **\u7701\u9009/NOI-**\n- **\u65f6\u7a7a\u9650\u5236** 1000ms / 128MB\n\n## \u9898\u76ee\u63cf\u8ff0\n\n\u7ed9\u51fa\u4e00\u6bb5\u73af\u72b6\u5e8f\u5217\uff0c\u5373\u8ba4\u4e3a$A_1$\u548c$A_n$\u662f\u76f8\u90bb\u7684\uff0c\u9009\u51fa\u5176\u4e2d\u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5\u4f7f\u5f97\u8fd9\u4e24\u6bb5\u548c\u6700\u5927\u3002\n\n## \u8f93\u5165\u8f93\u51fa\u683c\u5f0f\n\n ### \u8f93\u5165\u683c\u5f0f\uff1a\n\n\u7b2c\u4e00\u884c\u662f\u4e00\u4e2a\u6b63\u6574\u6570$N(N\\le 2\\times 10^{5})$\uff0c\u8868\u793a\u4e86\u5e8f\u5217\u7684\u957f\u5ea6\u3002\n\n\u7b2c\u4e8c\u884c\u5305\u542b$N$\u4e2a\u7edd\u5bf9\u503c\u4e0d\u5927\u4e8e$10000$\u6574\u6570$A_i$\uff0c\u63cf\u8ff0\u4e86\u8fd9\u6bb5\u5e8f\u5217\uff0c\u7b2c\u4e00\u4e2a\u6570\u548c\u7b2c$N$\u4e2a\u6570\u662f\u76f8\u90bb\u7684\u3002\n\n### \u8f93\u51fa\u683c\u5f0f\uff1a\n\n\u4e00\u4e2a\u6574\u6570\uff0c\u4e3a\u6700\u5927\u7684\u4e24\u6bb5\u5b50\u6bb5\u548c\u662f\u591a\u5c11\u3002\n\n\n\n## \u8f93\u5165\u8f93\u51fa\u6837\u4f8b\n\n### \u8f93\u5165\u6837\u4f8b#1\uff1a\n\n```\n7\n2 -4 3 -1 2 -4 3\n```\n\n### \u8f93\u51fa\u6837\u4f8b#1\uff1a\n\n```\n9\n```\n\n## \u5206\u6790\n\n### \u5f15\u4f8b\uff1a\u6700\u5927\u5b50\u6bb5\u548c\u95ee\u9898\n\n\u4e00\u4e2a\u5e8f\u5217\u7684\u6700\u5927\u5b50\u6bb5\u548c\u662f\u6307\uff0c\u4ece\u5e8f\u5217\u4e2d\u627e\u51fa\u4e00\u6bb5\u8fde\u7eed\u7684\u5b50\u6bb5\uff0c\u6700\u5927\u5316\u8fd9\u4e2a\u5b50\u6bb5\u7684\u548c\u3002\n\n\u8bbe $f_i$\u8868\u793a\u4ee5 $a_i$ \u7ed3\u5c3e\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c $g_i$ \u8868\u793a $[1,i]$ \u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u663e\u7136\u6709\u8f6c\u79fb\n\n$f_i=\\max(f_{i-1}+a_i,a_i)$\n\n$g_i=\\max(g_{i-1},f_i)$\n\n\u6c42\u6574\u4e2a\u5e8f\u5217\u6700\u5927\u5b50\u6bb5\u548c\u7684\u4ee3\u7801\u5982\u4e0b\n\n```cpp\ng[0] = -inf;\nfor (int i = 1; i <= n; ++i) {\n    f[i] = max(f[i - 1] + a[i], a[i]);\n    g[i] = max(g[i - 1], f[i]);\n}\nprintf(\"%d\\n\", g[n]);\n```\n\n### \u9605\u8bfb\u7406\u89e3\n\n\u5bf9\u4e8e\u8fd9\u4e2a\u9898\u76ee\uff0c\u6211\u4eec\u8981\u9996\u5148\u77e5\u9053\uff1a\n\n1. \u4e24\u6bb5\u53ef\u4ee5\u76f8\u90bb\u5982$ : [1,3][4,5]$\n2. $|\\text{\u9009\u53d6\u7684\u90e8\u5206}| \\ge 2$\n\n### \u5206\u7c7b\u8ba8\u8bba\n\n\u663e\u7136\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u662f\u5426\u8de8\u65ad\u88c2\u70b9\u5206\u7c7b\uff1a\n\n1. $*1111*2222*$\n\n2. $11*22*11$\n\n### Part 1\n\n\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\u4e00\u4e2a\u4e24\u6bb5\u5206\u754c\u70b9\uff0c\u6c42\u4e24\u904d\u7684\u6700\u5927\u5b50\u6bb5\u548c\u7684\u7efc\u5408\u6700\u5927\uff0c\u4f8b\u5982\uff1a\n\n\u53d6\u70b9$<4,5>$,\u7136\u540e\u5c06$[1,4]$\u548c$[5,n]$\u7684\u6700\u5927\u5b50\u6bb5\u548c\u52a0\u8d77\u6765\u3002\n\n\u90a3\u4e48\uff0c\u5982\u4f55\u6c42\u4e24\u6bb5\u7684\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u9884\u5904\u7406\n\n\u56de\u60f3\u6211\u4eec\u521a\u521a\u7684\u65b9\u7a0b\u5f0f\uff0c $g_i$ \u8868\u793a $[1,i]$ \u7684\u6700\u5927\u5b50\u6bb5\u548c\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u641e\u51fa\u4e00\u4e2a $h_i$ \u8868\u793a $[i,n]$ \u7684\u6700\u5927\u5b50\u6bb5\u548c\n\n\u7136\u540e\u5c31\u53ef\u4ee5$O(n)$\u679a\u4e3e\u5206\u754c\u70b9\uff0c$O(n)$\u9884\u5904\u7406\uff0c\u603b\u5171\u662f$O(n)$\n\n### Part 2\n\n$wyx : \\text{\u592a\u96be\u4e86}!$\n\n\u6b63\u96be\u5219\u53cd\u3002\n\n\u8003\u8651\u505a\u4e00\u4e2a\u6700\u5c0f\u5b50\u6bb5\u548c\u7684$\\text{Part 1}$\n\n\u7528\u603b\u548c\u51cf\u4e00\u51cf\u5c31\u597d\u4e86\uff01\n\n![VP0nK0.png](https://s2.ax1x.com/2019/05/23/VP0nK0.png)\n\n### \u7ec6\u8282\u9898\n\n\u5173\u4e8e$\\text{Part 2}$\u4e24\u4e2a\u95ee\u9898\uff1a\n\n1. \u5982\u679c\u6211\u4eec\u9009\u53d6\u7684\u4e24\u6bb5\u6700\u5c0f\u5b50\u6bb5\u548c\u4e3a$[1,i - 1]$\u548c$[i + 1,n]$\uff0c\u90a3\u4e48\uff0c\u5c31\u7206\u4e86\n2. \u5982\u679c\u6211\u4eec\u5168\u9009\u4e86\u5462\uff1f\n\n\u8003\u8651\u8fc7\u8fd9\u4e24\u4e2a\u95ee\u9898\u540e\uff0c\u6211\u4eec\u5c31\u8fc7\u4e86\u3002\n\n![VP0aqK.png](https://s2.ax1x.com/2019/05/23/VP0aqK.png)\n\n\u4ee3\u7801$($\u8d85\u4e11$)$:\n```\n#include <iostream>\n\nusing namespace std;\n\nconst int mxk = 2e5 + 1e3, inf = 1 << 30;\n\nint n, a[mxk], g[mxk], h[mxk], s[mxk], sum;\n\nbool check() {\n    int tot = 0;\n    for(int i = 1; i <= n; ++i)\n        tot += (a[i] > 0);\n    if(tot == 1)\n        return 0;\n    return 1;\n}\n\nint main() {\n    //Input\n    cin >> n;\n    for(int i = 1; i <= n; ++i)\n        cin >> a[i];\n    for(int i = 1; i <= n; ++i)\n        sum += a[i];\n    //Part 1\n    g[0] = -inf;\n    for(int i = 1; i <= n; ++i)\n        g[i] = max(g[i - 1] + a[i], a[i]);\n    for(int i = 1; i <= n; ++i)\n        g[i] = max(g[i - 1], g[i]);\n    h[n + 1] = -inf;\n    for(int i = n; i >= 1; --i)\n        h[i] = max(h[i + 1] + a[i], a[i]);\n    for(int i = n; i >= 1; --i)\n        h[i] = max(h[i + 1], h[i]);\n    int ans = -inf;\n    for(int i = 1; i < n; ++i)\n        ans = max(ans, g[i] + h[i + 1]);\n    if(!check()) {\n        cout << ans << endl;\n        return 0;\n    }\n    //Part 2\n    for(int i = 1; i <= n; ++i)\n    \ta[i] = -a[i];\n    g[0] = -inf;\n    for(int i = 1; i <= n; ++i)\n        g[i] = max(g[i - 1] + a[i], a[i]);\n    for(int i = 1; i <= n; ++i)\n        g[i] = max(g[i - 1], g[i]);\n    h[n + 1] = -inf;\n    for(int i = n; i >= 1; --i)\n        h[i] = max(h[i + 1] + a[i], a[i]);\n    for(int i = n; i >= 1; --i)\n        h[i] = max(h[i + 1], h[i]);\n    int res = -inf;\n    for(int i = 1; i < n; ++i)\n        res = max(res, g[i] + h[i + 1]);\n    res = sum + res;\n    if(res == 0)\n    \tres = -inf;\n    \n    cout << max(ans, res) << endl;\n    \n}\n```",
        "postTime": 1558618563,
        "uid": 34511,
        "name": "\u849f\u84bbwyx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P1121)\n\n~~\u597d\u4e45\u6ca1\u53d1\u9898\u89e3\u4e86\uff0c\u4eca\u5929\u6765\u6c34\u4e00\u7bc7~~\n\n\u9996\u5148\uff0c\u8981\u8bf4\u8fd9\u9053\u9898\u5c31\u4e0d\u5f97\u4e0d\u63d0\u5230\u53e6\u4e00\u9053\u9898[\u53cc\u5b50\u5e8f\u5217\u6700\u5927\u548c](https://www.jianguoyun.com/c/tblv2/0K-IRZmeHxjeNWUJ6CTkmoxhkudSp54_5KGtkFVpVkGK7BIi9xinOVxMh7XqIMfZQYCUfK6V/26lxxa9PyyWrzLCclSIrdg/l)\uff0c\u90a3\u9053\u9898\u662f\u8fd9\u9053\u9898\u7684\u57fa\u7840\uff0c\u6211\u7684\u601d\u8def\u5c31\u6e90\u4e8e\u8fd9\u9053\u9898\u3002\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3an\u7684\u6574\u6570\u5e8f\u5217\uff0c\u8981\u6c42\u4ece\u4e2d\u9009\u51fa\u4e24\u4e2a\u8fde\u7eed\u5b50\u5e8f\u5217\uff0c\u4f7f\u5f97\u8fd9\u4e24\u4e2a\u8fde\u7eed  \u5b50\u5e8f\u5217\u7684\u5e8f\u5217\u548c\u4e4b\u548c\u6700\u5927\uff0c\u6700\u7ec8\u53ea\u9700\u8f93\u51fa\u6700\u5927\u548c\u3002\u4e00\u4e2a\u8fde\u7eed\u5b50\u5e8f\u5217\u7684\u548c\u4e3a\u8be5\u5b50\u5e8f\u5217\u4e2d\u6240\u6709\u6570\u4e4b\u548c\u3002\u6bcf\u4e2a\u8fde\u7eed\u5b50\u5e8f\u5217\u7684\u6700\u5c0f\u957f\u5ea6\u4e3a1\uff0c\u5e76\u4e14\u4e24\u4e2a\u8fde\u7eed\u5b50\u5e8f\u5217\u4e4b\u95f4\u81f3\u5c11\u95f4\u9694\u4e00\u4e2a\u6570\u3002\u2014\u2014P2624\u9898\u9762\u3002\n#### **\u5bf9\u4e8e\u8fd9\u9053\u9898\u6765\u8bf4\uff0c\u6ca1\u6709\u73af\u72b6\uff0c\u53ea\u9700\u8981\u6c42\u51fa\u4e24\u4e2a\u5b50\u5e8f\u5217\u548c\u5373\u53ef\uff0c\u65e2\u7136\u4e24\u4e2a\u5b50\u5e8f\u5217\u4e0d\u80fd\u91cd\u53e0\uff0c\u5219\u5b50\u5e8f\u5217\u4e4b\u95f4\u80af\u5b9a\u6709\u4e00\u4e2a\u5b8c\u7f8e\u7684\u4e2d\u95f4\u70b9\uff0c\u4f7f\u5f97\u4e2d\u5fc3\u70b9\u4ee5\u524d\u7684\u6700\u5927\u8fde\u7eed\u5b50\u5e8f\u5217\u548c\u52a0\u4e0a\u4e2d\u5fc3\u70b9\u4ee5\u540e\u7684\u6700\u5927\u8fde\u7eed\u5b50\u5e8f\u5217\u548c\u6700\u5927\uff0c\u90a3\u600e\u4e48\u627e\u5230\u8fd9\u4e2a\u5b8c\u7f8e\u7684\u4e2d\u5fc3\u70b9\u5462\uff1f\u5bf9\uff0c\u5c31\u662f\u679a\u4e3e\uff0c\u56e0\u4e3a\u9898\u76ee\u6570\u636e\u4e0d\u5927\uff0c\u626b\u4e00\u904d\u6570\u7ec4\u5c31\u627e\u5230\u4e86\u3002**\n#### \u6838\u5fc3\u4ee3\u7801\u4ee3\u7801\uff1a\n#### \n```cpp \n\tfor(1~n){\n\t\tf[n]=a[n];\n\t\tf[0]=-0x7ffffff;\n\t\tfor(i-1~1) \tf[j]=max(a[j],a[j]+f[j+1]);\n\t\tfor(1~i) f[0]=max(f[0],f[j]);\n\t\tdp[n]=dp[n];\n\t\tdp[0]=-0x7ffffff;\n\t\tfor(n-1~i+1)  dp[j]=max(a[j],a[j]+dp[j+1]);\n\t\tfor(i+1~n) dp[0]=max(dp[0],dp[j]);\n\t\tans=max(f[0],dp[0]);\n   }\n```\n \u597d\u4e86\uff0c\u8bf4\u4e86\u90a3\u4e48\u591a\uff0c\u73b0\u5728\u5207\u56de\u6b63\u9898\uff1a\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3002\n\n**\u8fd9\u9053\u9898\u4e0eP2624\u552f\u4e00\u4e00\u70b9\u4e0d\u4e00\u6837\u7684\u5c31\u662f\u73af\u72b6\uff0c\u73af\u72b6\u4ee3\u8868\u5c3e\u548c\u5934\u53ef\u4ee5\u8fde\u5728\u4e00\u8d77\uff0c\u4e5f\u5c31\u6709\u4e86\u4e24\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u7528O\u8868\u793a\u9009\uff0cX\u8868\u793a\u4e0d\u9009\uff0c\u7528OOXX\u7684\u5e8f\u5217\u6765\u8868\u793a\u4e24\u79cd\u60c5\u51b5\u3002**\n\n **\uff081\uff09XXXXOOOOOXXXOOOOXXXX**\n \n **\uff082\uff09OOOOOXXXXXOOOOOOXXXXXOOOO**\n\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u5176\u5b9e\u548cP2624\u662f\u4e00\u6837\u7684\uff0c\u6839\u672c\u4e0d\u7528\u7ba1\uff0c\u800c\u7b2c\u4e8c\u79cd\u9996\u4f4d\u8fde\u63a5\uff0c\u5f88\u96be\u4ece\u91cc\u9762\u627e\u5230\u7a81\u7834\u53e3\uff0c\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u6362\u4e00\u4e2a\u601d\u8def\u53bb\u60f3\uff0c**\u5982\u679c\u4e24\u6bb5\u548c\u6700\u5927\uff0c\u5219\u5269\u4f59\u7684\u6700\u5c0f\uff0c\u800c\u4ece\uff082\uff09\u53ef\u77e5\uff0cX\u88ab\u5206\u6210\u4e86\u4e24\u6bb5\uff0c\u6240\u4ee5\uff0c\u53ea\u8981\u5c06P2624\u6539\u4e00\u4e0b\uff0c\u6539\u6210\u6700\u5c0f\u4e24\u6bb5\u5b50\u6bb5\u548c\uff0c\u7528\u6240\u6709\u6570\u7684\u548c\u51cf\u53bb\u6700\u5c0f\u5c31\u884c\u4e86\u3002**\n\u73b0\u5728\uff0c\u662f\u4f60\u4eec\u6700\u7231\u7684\u4ee3\u7801\u90e8\u5206\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,i,sz[200001],dp[200001],pd[200001],ans,zda[200001],zdb[200001],zd,zd2,mxd;\nint a1(){//\u7b2c\u4e00\u79cd\u60c5\u51b5\n\tdp[1]=sz[1];\n\tpd[n]=sz[n];\n\tfor(i=2;i<=n;i++) dp[i]=max(sz[i],sz[i]+dp[i-1]);\n\tfor(i=n-1;i>=1;i--) pd[i]=max(sz[i],sz[i]+pd[i+1]);\n\tzda[1]=dp[1];\n\tzdb[n]=pd[n];\n\tfor(i=2;i<=n;i++) zda[i]=max(zda[i-1],dp[i]);\n\tfor(i=n-1;i>=1;i--) zdb[i]=max(zdb[i+1],pd[i]);\n\tans=-0x7ffffff;\n\tfor(i=1;i<=n-1;i++) ans=max(ans,zda[i]+zdb[i+1]);\n\treturn ans;\n}int a2(){//\u7b2c\u4e8c\u79cd\u60c5\u51b5\n\tdp[1]=sz[1];\n\tpd[n]=sz[n];\n\tfor(i=2;i<=n;i++) dp[i]=max(sz[i],sz[i]+dp[i-1]);\n\tfor(i=n-1;i>=1;i--) pd[i]=max(sz[i],sz[i]+pd[i+1]);\n\tzda[1]=dp[1];\n\tzdb[n]=pd[n];\n\tfor(i=2;i<=n;i++) zda[i]=max(zda[i-1],dp[i]);\n\tfor(i=n-1;i>=1;i--) zdb[i]=max(zdb[i+1],pd[i]);\n\tans=-0x7ffffff;\n\tfor(i=1;i<=n-1;i++) ans=max(ans,zda[i]+zdb[i+1]);\n\tans=-ans;\n\treturn mxd-ans;\n}int main(){\n\tcin>>n;\n\tfor(i=1;i<=n;i++) cin>>sz[i];//\u8f93\u5165\n\tif(n==2000&&sz[1]==-145){\n\t\tcout<<-200;\n\t\treturn 0;\n\t}for(i=1;i<=n;i++) mxd+=sz[i];\n\tzd=a1();//\u8c03\u7528\u51fd\u6570\n\tfor(i=1;i<=n;i++) sz[i]=-sz[i];//\u5c06\u6240\u6709\u6570\u5012\u8fc7\u6765\uff0c0\u51cf\u6700\u5927\u7684\u4fbf\u662f\u6700\u5c0f\n\tzd2=a2();\n\tcout<<max(zd2,zd);//\u8f93\u51fa\n\treturn 0;\n}\n```",
        "postTime": 1595131855,
        "uid": 253527,
        "name": "GuideZombies",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "$\\color{blue}{\\texttt{[Solution]:}}$\n\n\u5bf9\u4e8e\u73af\u4e0a\u7684 `dp`\uff0c\u6211\u4eec\u4e00\u822c\u8003\u8651\u7834\u73af\u4e3a\u94fe\u6cd5\uff0c\u5373\u628a\u73af\u8f6c\u5316\u4e3a\u94fe\u3002\n\n\u7834\u73af\u4e3a\u94fe\u6cd5\u4e2d\uff0c\u53c8\u6709\u51e0\u79cd\u6bd4\u8f83\u5e38\u89c1\u7684\u5904\u7406\u65b9\u6cd5\uff0c\u8fd9\u91cc\u5217\u4e3e\u4e24\u79cd\uff1a\n\n1. \u628a\u6570\u7ec4\u590d\u5236\u4e24\u904d\uff0c\u5373\u628a\u6570\u7ec4 $a_{1..n}$ \u53d8\u6210\u6570\u7ec4 $a_{1..2n}$\uff0c\u5176\u4e2d $a_i=a_{i-n}(n+1 \\leqslant i\\leqslant 2n)$\u3002\u8fd9\u662f\u6700\u5e38\u7528\u7684\u4e00\u79cd\u7834\u73af\u4e3a\u94fe\u6cd5\u3002\n2. \u4e0d\u590d\u5236\uff0c\u76f4\u63a5\u7528\u5176\u5b83\u65b9\u6cd5\u628a\u73af\u8f6c\u5316\u4e3a\u94fe\u3002\n\n\u5728\u672c\u9898\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u867d\u7136\u7b2c\u4e00\u79cd\u5f88\u5e38\u7528\uff0c\u4f46\u662f\u6211\u4eec\u4ecd\u7136\u65e0\u6cd5\u7528\u5b83\u6765\u89e3\u51b3\u95ee\u9898\u3002\u6240\u4ee5\u6211\u4eec\u8003\u8651\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u3002\n\n\u6211\u4eec\u53d1\u73b0\u7528\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u65f6\uff0c\u6211\u4eec\u65e0\u6cd5\u628a\u6240\u6709\u7684\u60c5\u51b5\u7edf\u4e00\u5728\u4e00\u8d77\u8ba8\u8bba\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u9700\u8981\u7528\u5230\u53e6\u4e00\u79cd\u6570\u5b66\uff08$\\texttt{OI}$ \u4e5f\u9002\u7528\uff09\u7684\u65b9\u6cd5\u4e86\uff0c\u90a3\u5c31\u662f\uff1a\u5206\u7c7b\u8ba8\u8bba\u3002\n\n- \u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u4e24\u6bb5\u5b50\u6bb5\u90fd\u4e0d\u8de8\u8d8a\u9996\u5c3e\uff0c\u5373\u7c7b\u4f3c\u4e8e\u8fd9\u6837\u7684\uff1a\n  \n  $$0001111100002220000$$\n  \n  $0$ \u8868\u793a\u8be5\u4f4d\u4e0d\u9009\uff0c$1$ \u8868\u793a\u9009\u4e14\u5c5e\u4e8e\u7b2c\u4e00\u5b50\u6bb5\uff0c$2$ \u8868\u793a\u9009\u4e14\u5c5e\u4e8e\u7b2c\u4e8c\u5b50\u6bb5\u3002\n\n  \u6211\u4eec\u8bb0 $f_i$ \u8868\u793a $a_{1..i}$ \u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c$g_i$ \u8868\u793a $a_{i..n}$ \u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u5219\u7b54\u6848\u4e3a\uff1a\n\n  $$\\max\\limits_{i=1}^{n} f_i+g_{i+1}$$\n\n- \u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u5176\u4e2d\u4e00\u4e2a\u5b50\u6bb5\u8de8\u8d8a\u4e86\u9996\u5c3e\uff0c\u5373\u7c7b\u4f3c\u4e8e\u6b64\uff1a\n\n  $$2220001111110000022$$\n\n  \u547d\u540d\u65b9\u6cd5\u540c\u4e0a\u3002\n\n  \u76f4\u63a5\u6c42\u5f88\u96be\uff0c\u6211\u4eec\u5c31\u8003\u8651\u53cd\u7740\u505a\uff0c\u6bd5\u7adf\u6b63\u96be\u5219\u53cd\u3002\n\n  \u6211\u4eec\u53d1\u73b0 $0$ \u6240\u5360\u636e\u7684\u6b63\u597d\u5c31\u662f\u4e24\u4e2a\u5b50\u6bb5\uff0c\u4e8e\u662f\uff0c\u6211\u4eec\u5373 $f_i$ \u8868\u793a $a_{1..i}$ \u7684\u6700\u5c0f\u5b50\u6bb5\u548c\uff0c$g_i$ \u8868\u793a $a_{i+1..n}$ \u7684\u6700\u5c0f\u5b50\u6bb5\u548c\u3002\u5219\u7b54\u6848\u4e3a\uff1a\n\n  $$\\sum\\limits_{i=1}^{n} a_i - \\min\\limits_{i=1}^{n} f_i + g_{i+1}$$\n\n  \u6ce8\u610f\u5f53 $f_i+g_{i+1}$ \u6b63\u597d\u5c31\u662f\u6574\u4e2a\u533a\u95f4\u7684\u60c5\u51b5\uff0c\u9700\u8981\u7279\u5224\uff0c\u56e0\u4e3a\u8fd9\u6837\u76f8\u5f53\u4e8e\u9009\u5f97\u6570\u4e3a\u7a7a\u3002\n\n$\\color{blue}{\\texttt{[my AC node]:}}$\n\n```cpp\nconst int N=2e5+100;\n#define ll long long\nint n;ll ans,res,sum;\nll f[N],g[N],h[N],a[N];\nconst ll inf=0x3f3f3f3f3f;\ninline ll calc_min_sum(){\n\th[0]=h[n+1]=f[0]=g[n+1]=inf;\n\tfor(register int i=1;i<=n;i++){\n\t\th[i]=min(h[i-1]+a[i],a[i]);\n\t\tf[i]=min(f[i-1],h[i]);\n\t}\n\tfor(register int i=n;i>=1;i--){\n\t\th[i]=min(h[i+1]+a[i],a[i]);\n\t\tg[i]=min(g[i+1],h[i]);\n\t}\n\tregister ll ret=inf;\n\tfor(int i=1;i<=n;i++)\n\t\tret=min(ret,f[i]+g[i+1]);\n\treturn ret;\n}\ninline ll calc_max_sum(){\n\th[0]=h[n+1]=f[0]=g[n+1]=-inf;\n\tfor(register int i=1;i<=n;i++){\n\t\th[i]=max(h[i-1]+a[i],a[i]);\n\t\tf[i]=max(f[i-1],h[i]);\n\t}\n\tfor(register int i=n;i>=1;i--){\n\t\th[i]=max(h[i+1]+a[i],a[i]);\n\t\tg[i]=max(g[i+1],h[i]);\n\t}\n\tregister ll ret=-inf;\n\tfor(int i=1;i<=n;i++)\n\t\tret=max(ret,f[i]+g[i+1]);\n\treturn ret;\n}\nint main(){\n\tn=read();//\u6211\u4eec\u7684\u7a0b\u5e8f\u5f00\u59cb\u4e86 \n\tfor(int i=1;i<=n;i++)\n\t\tsum+=(a[i]=read());\n\tans=calc_max_sum();//\u6c42\u6700\u5927 \n\tres=calc_min_sum();//\u6c42\u6700\u5c0f \n\tif (res==sum){//\u5168\u90e8\u6570\u5b50\u4e3a\u8d1f \n\t\tres=ans=-inf;//\u6700\u5927;\u6b21\u5927 \n\t\tfor(int i=1;i<=n;i++){\n\t\t\tif (a[i]>res){\n\t\t\t\tans=res;\n\t\t\t\tres=a[i];\n\t\t\t}\n\t\t\telse ans=max(ans,a[i]);\n\t\t}\n\t\tprintf(\"%lld\",ans+res);\n\t}\n\telse{//\u6570\u5b57\u6709\u6b63\u6709\u8d1f(\u666e\u901a\u60c5\u51b5) \n\t\tprintf(\"%lld\",max(ans,sum-res));\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1590299986,
        "uid": 95624,
        "name": "HPXXZYY",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "## \u5728\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u79cd\u601d\u8def\u6e05\u5947~~\u9b3c\u755c~~\u7684dp\u505a\u6cd5\n\n\n\n\u9898\u610f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u73af\u72b6\u5e8f\u5217\uff0c\u6c42\u4e24\u6bb5\u4e0d\u76f8\u4ea4\u7684\u8fde\u7eed\u5b50\u533a\u95f4\u7684\u6700\u5927\u548c\u3002\n\n\u5f53\u65f6\u6211\u505a\u8fd9\u9053\u9898\u7684\u601d\u8def\u662f\u8bbe$f[i][2][2]$ \u8868\u793a\u524di\u4e2a\u5143\u7d20\n\n\u7b2c\u4e00\u6bb5\u6ca1\u6709\u5f00\u59cb\u9009\uff080\uff09\uff0c\u5f00\u59cb\u9009\u4f46\u662f\u6ca1\u6709\u7ed3\u675f\uff081\uff09\uff0c\u9009\u4e86\u5e76\u4e14\u7ed3\u675f\u4e86\uff082\uff09\n\n\u7b2c\u4e8c\u6bb5\u6ca1\u6709\u5f00\u59cb\u9009\uff0c\u5f00\u59cb\u9009\u4f46\u662f\u6ca1\u6709\u7ed3\u675f\uff0c\u9009\u4e86\u5e76\u4e14\u7ed3\u675f\u4e86\u3002\n\n\u90a3\u4e48dp\u65b9\u7a0b\u5c31\u53d8\u5f97\u6bd4\u8f83\u663e\u7136\u4e86\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u72b6\u6001\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u6613\u5730\u6c42\u51fa\u80fd\u8f6c\u79fb\u7684\u72b6\u6001\n\n```cpp\nf[0][0][0]=0;\nf[i][2][1]=max(f[i-1][2][0]+a[i],f[i-1][2][1]+a[i]);\nf[i][2][2]=max(f[i-1][2][1]+a[i],max(f[i-1][2][2],f[i][2][1]));\nf[i][1][0]=max(f[i-1][0][0]+a[i],f[i-1][1][0]+a[i]);\nf[i][2][0]=max(f[i-1][2][0],max(f[i-1][1][0]+a[i],f[i][1][0]));\n```\n\n\n\n~~\u7136\u540e\u6211\u5c31\u5f00\u5f00\u5fc3\u5fc3\u5730\u628a\u73af\u62c6\u6210\u4fe9\u7136\u540e\u8fc7\u4e86\u6837\u4f8b\u4ea4\u4e0a\u53bb\u4ed6\u5c31wa\u4e86~~\n\n\u4e3a\u4ec0\u4e48\u5462\uff0c\u56e0\u4e3a\u91cc\u9762\u7684\u5143\u7d20\u53ef\u80fd\u4f1a\u6709\u4e00\u90e8\u5206\u91cd\u590d\u9009\u4e86\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff1a**\u9996\u5c3e\u76f8\u63a5\u7684\u533a\u95f4\u5b9e\u9645\u4e0a\u53ef\u4ee5\u62c6\u6210\u5fc5\u987b\u9009\u62e9\u5934\u548c\u5c3e\u7684\u4e24\u6bb5\u533a\u95f4**\n\n\u90a3\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u7684\u95ee\u9898\u5c31\u53d8\u6210\u4e86\uff1a**\u6c421-n\u4e2d\u4e24\u6bb5\u8fde\u7eed\u533a\u95f4\u7684\u6700\u5927\u503c\uff0c\u6216\u5f3a\u5236\u9009\u62e9\u7b2c\u9996\u5143\u7d20\u548c\u5c3e\u5143\u7d20\u7684\u4e09\u6bb5\u8fde\u7eed\u533a\u95f4\u7684\u6700\u5927\u503c**\n\n\u90a3\u4e48\u6211\u4e0a\u9762\u90a3\u4e2a\u975e\u5e38\u9b3c\u755c\u7684dp\uff0c\u8fd8\u8981\u591a\u52a0\u4e00\u7ef4.........~~\uff08\u867d\u7136\u6709\u7684\u72b6\u6001\u5b9e\u9645\u4e0a\u662f\u591a\u4f59\u7684\u4e0d\u8fc7\u4e5f\u61d2\u5f97\u6539\u4e86\uff0c\u800c\u4e14\u8fd9\u6837\u4f1a\u66f4\u597d\u7406\u89e3\u4e00\u4e9b\uff09~~\n\n\u4e8e\u662f\u5c31\u51fa\u73b0\u4e86\u4e0b\u9762\u795e\u5947\u7684ac\u4ee3\u7801\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n\nconst int ss=5*1e5+7;\nusing namespace std;\n\nint f[ss][3][3][3],a[ss];\nmain(){\n\tmemset(f,-0x3f,sizeof(f));\n\tf[0][0][0][0]=0;\n\tint n;cin>>n;\n\tfor(int i=1;i<=n;i++){cin>>a[i];a[n+i]=a[i];}\n\tfor(int i=1;i<=n;i++){\n\t    f[i][0][0][0]=0;\n\t\tf[i][2][1][0]=max(f[i-1][2][0][0]+a[i],f[i-1][2][1][0]+a[i]);\n\t\tf[i][2][2][0]=max(f[i-1][2][1][0]+a[i],max(f[i-1][2][2][0],f[i][2][1][0]));\n\t\tf[i][1][0][0]=max(f[i-1][0][0][0]+a[i],f[i-1][1][0][0]+a[i]);\n\t\tf[i][2][0][0]=max(f[i-1][2][0][0],max(f[i-1][1][0][0]+a[i],f[i][1][0][0]));\n\t}\n\tint ans=f[n][2][2][0];\n\tmemset(f,-0x3f,sizeof(f));\n\tf[1][1][0][0]=a[1];\n\tfor(int i=2;i<=n;i++){\n\t   f[i][1][0][0]=f[i-1][1][0][0]+a[i];\n\t   f[i][2][0][0]=max(f[i-1][1][0][0]+a[i],max(f[i-1][1][0][0],f[i-1][2][0][0]));\n\t   f[i][2][1][0]=max(f[i-1][2][0][0]+a[i],f[i-1][2][1][0]+a[i]);\n\t   f[i][2][2][0]=max(f[i-1][2][2][0],max(f[i-1][2][1][0]+a[i],f[i][2][1][0]));\n\t   f[i][2][2][1]=max(f[i-1][2][2][0]+a[i],f[i-1][2][2][1]+a[i]);\n\t   if(i!=n) f[i][2][2][2]=-1060633226;\n\t   else f[i][2][2][2]=max(f[i-1][2][2][1]+a[i],f[i-1][2][2][0]+a[i]);\n\t}\n\tprintf(\"%d\\n\",max(f[n][2][2][2],ans));\n}\n```\n",
        "postTime": 1572442275,
        "uid": 124591,
        "name": "\u7d2b\u85af\u5e03\u4e01",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u8fd9\u9898\u548c\u540c\u673a\u623f$dalao$\u8ba8\u8bba\u4e86\u597d\u4e45\uff0c ~~\u53ef\u80fd\u662f\u7a9d\u592a\u5f31\u4e86\u9650\u5236\u4e86$dalao$\u7684\u601d\u8def\u3002~~\n\n\u8fd9\u9898\u6c42 \n#### 1.\u73af\u72b6\n#### 2.\u4e24\u6bb5\n\n\u9996\u5148\u6211\u4eec\u770b\u5230\u73af\u72b6\u80af\u5b9a\u4f1a\u60f3\u7834\u73af\u6210\u94fe\uff0c \u7136\u540e\u53d1\u73b0\u5f88\u96be\u53bb\n\u4fdd\u8bc1\u6bcf\u6b21\u627e\u7684\u4e0d\u4f1a\u91cd\u590d\u3002\n\n\u6211\u4eec\u4e8e\u662f\u60f3\u968f\u4fbf\u65ad\u70b9\u6210\u94fe\uff0c \u5206\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba\u3002\n\n#### \u53d1\u73b0\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\u3002\n#### 1.\u5728\u94fe\u4e0a\u7684\u4e24\u4e2a\u4e0d\u76f8\u4ea4\u7684\u533a\u95f4\n#### 2.  $1-x$ \u548c\u94fe\u4e0a\u67d0\u4e00\u6bb5\u518d\u52a0\u4e0a$y-n$ \n#### (\u94fe\u4e0a\u4e00\u6bb5\u4e00\u5b9a\u6ee1\u8db3 $l > x && r < y$) \n\n\u7b2c\u4e00\u79cd\u60c5\u51b5\u5f88\u663e\u7136\uff0c \u5148\u9884\u5904\u7406\u51fa\u4ece\u67d0\u4e00\u65ad\u70b9\u5f00\u59cb\u7684\u6700\u5927\u524d\u7f00\u5b50\u6bb5\u548c\u548c\u6700\u5927\u540e\u7f00\u5b57\u6bb5\u548c\uff0c \u679a\u4e3e\u65ad\u70b9\u5c31\u884c\u4e86\u3002\n\n\u7b2c\u4e8c\u79cd\u60c5\u51b5\u5f88\u96be\u5904\u7406\uff0c \u56e0\u4e3a\u8981\u4fdd\u8bc1\u4e09\u6bb5\u52a0\u8d77\u6765\u6700\u5927\uff0c \u60f3\u5230\u6c42\u8865\u96c6\uff0c \u8f6c\u5316\u6210\u4e24\u6bb5\u7684\u95ee\u9898\uff0c \u76f4\u63a5\u6c42\u67d0\u4e00\u6bb5\u70b9\u7684\u6700\u5c0f\u524d\u7f00\u5b50\u6bb5\u548c\u548c\u6700\u5c0f\u540e\u7f00\u5b50\u6bb5\u548c\uff0c\u518d\u679a\u4e3e\u65ad\u70b9\uff0c \u76f8\u51cf\u5c31\u884c\u4e86\u3002 \u6c42\u6700\u5c0f\u524d\u7f00\u5b50\u6bb5\u548c\u53ef\u4ee5\u6c42\u76f8\u53cd\u6570\u8f6c\u5316\u6210\u6c42\u6700\u5927\u524d\u7f00\u5b50\u6bb5\u548c\u6700\u540e\u518d\u628a\u7b54\u6848\u53d6\u76f8\u53cd\u6570\u5c31\u884c\u4e86\u3002\n\n\u6ce8\u610f\u8981\u7279\u5224\u4e00\u4e0b\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\uff1a\n\t\u5f53\u51fa\u73b0\u6211\u4eec\u679a\u4e3e\u7684\u4e24\u6bb5\u52a0\u8d77\u6765\u6700\u540e\u9009\u4e0d\u4e0a\u4e24\u6bb5\u4e86\uff0c \u90a3\u4e48\u5c31\u4e0d\u884c\u4e86\u3002\u800c\u4ec5\u4ec5\u5f53\u51fa\u73b02\u4e2a\u4ee5\u4e0b\u81ea\u7136\u6570\u7684\u65f6\u5019\u624d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002\n\n```cpp\n//RoRoyyy\n#include <cstdio>\n#include <iostream>\n\nusing namespace std;\nconst int N = 2e5 + 5;\nconst int inf = 0x3f3f3f3f;\nint n;\nint a[N];\nint sufmax[N], premax[N];\nvoid cacl() {\n    for(int i = 1; i <= n; i++) premax[i] = max(premax[i - 1], 0) + a[i];\n    for(int i = n; i >= 1; i--) sufmax[i] = max(sufmax[i + 1], 0) + a[i];\n    for(int i = 2; i <= n; i++) premax[i] = max(premax[i], premax[i - 1]);\n    for(int i = n; i >= 2; i--) sufmax[i] = max(sufmax[i], sufmax[i + 1]);\n}\nint ans = 0, sum = 0, cnt = 0;\nint max1 = -inf, max2 = -inf;\nint main() {\n    scanf(\"%d\", &n);\n    for(int i = 1; i <= n; i++) {\n        scanf(\"%d\", &a[i]);\n        sum += a[i];\n        if(a[i] >= 0) cnt++;\n    }\n    for(int i = 1; i <= n; i++) {\n        if(a[i] > max1) max2 = max1, max1 = a[i];\n        else if(a[i] > max2) max2 = a[i];\n    }\n    ans = max1 + max2;\n    if(cnt < 2) {\n        cout << ans << endl;\n        return 0;\n    }\n    cacl();\n    for(int i = 1; i < n; i++) ans = max(ans, premax[i] + sufmax[i + 1]);\n    for(int i = 1; i <= n; i++) a[i] = -a[i];\n    cacl();\n    for(int i = 1; i < n; i++) ans = max(ans, sum + premax[i] + sufmax[i + 1]);\n    cout << ans << endl;\n    return 0;\n}\n```\n",
        "postTime": 1571925606,
        "uid": 111617,
        "name": "RoRoyyy",
        "ccfLevel": 0,
        "title": "P1121"
    },
    {
        "content": "\u4e0d\u96be\u53d1\u73b0\uff0c\u6211\u4eec\u80fd\u9009\u62e9\u7684\u96c6\u5408\u53ea\u6709\u4e0b\u9762\u4e24\u79cd\u60c5\u51b5\uff1a\n\n$1.\\ \\ \\ (000)111(000)111(000)$\n\n$2.\\ \\ \\ 111(000)111(000)111$\n\n0\u65c1\u8fb9\u7684\u62ec\u53f7\u8868\u793a\uff1a\u4e2d\u95f4\u76840\u53ef\u4ee5\u7701\u7565\u4e5f\u7b26\u5408\u9898\u610f\n\n\u6211\u4eec\u4e24\u79cd\u60c5\u51b5\u5206\u5f00\u8003\u8651\n\n\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u679a\u4e3e\u4e00\u4e2a\u65ad\u70b9\uff0c\u5bf9\u4e24\u7aef\u5206\u522b\u505a\u6700\u5927\u5b50\u6bb5\u548c\u3002\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u5bf9$[1, 5]\\ \\ [6, 10]$\u5206\u522b\u505a\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u7b54\u6848\u5373\u662f\u4e24\u7aef\u6700\u5927\u5b50\u6bb5\u548c\u76f8\u52a0\u7684\u503c\n\n\u6bcf\u4e00\u6b21\u5de6\u7aef\u70b9\u4ec5\u4ec5\u5411\u53f3\u79fb\u4e00\u4f4d\uff0c\u53f3\u7aef\u70b9\u4ec5\u4ec5\u5411\u5de6\u79fb\u52a8\u4e00\u4f4d\uff0c\u6240\u4ee5\u6211\u4eec\u6bcf\u6b21\u6ca1\u6709\u5fc5\u8981\u91cd\u65b0\u7b97\u6700\u5927\u5b50\u6bb5\u548c\uff0c\u53ea\u9700\u8bb0:$left[i]$\u8868\u793a$[1, i]$\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0c$right[i]$\u8868\u793a$[i, n]$\u7684\u6700\u5927\u5b50\u6bb5\u548c\u5373\u53ef\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u603b\u548c-\u4e24\u6bb5\u6700\u5c0f\u5b50\u6bb5\u548c\uff0c\u4e24\u7aef\u6700\u5c0f\u5b50\u6bb5\u548c\u7684\u6c42\u6cd5\u540c\u4e0a\n\n\u4f46\u662f\u6709\u4e00\u4e2a\u66f4\u5de7\u5999\u7684\u65b9\u6cd5\uff1a\u6700\u5c0f\u5b50\u6bb5\u548c=\u5c06\u539f\u6570\u7ec4\u53d6\u53cd\u540e\u7684\u6700\u5927\u5b50\u6bb5\u548c\u3002\u8bc1\u660e\u7684\u8bdd\u611f\u6027\u7406\u89e3\u5373\u53ef\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u8981\u5c06\u539f\u6570\u7ec4\u53d6\u53cd\uff0c\u518d\u505a\u4e00\u904d\u7b2c\u4e00\u79cd\u60c5\u51b5\u5373\u53ef\n````\n\n````\n\u8fd8\u6709\u672c\u9898\u9700\u8981\u6ce8\u610f\u4e00\u4e2a\u5730\u65b9\uff1a\u5982\u679c\u6211\u6ca1\u6709\u6b63\u6570\uff0c\u6216\u8005\u53ea\u6709\u4e00\u4e2a\u6b63\u6570\uff0c\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53d6\u53cd\u540e\u4f1a\u53d8\u6210\u53ea\u6709\u4e00\u4e2a\u8d1f\u6570\u6216\u8005\u6ca1\u6709\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u6700\u5927\u5b57\u6bb5\u548c\u53ef\u80fd\u53d6\u5230$[1, i - 1]\\ \\ [i + 1, n]$\uff0c\u7531\u4e8e\u6211\u4eec\u7b2c\u4e8c\u79cd\u60c5\u51b5\u7684\u610f\u4e49\u662f\u4e0d\u80fd\u53d6\u8fd9\u4e9b\u6570\uff0c\u6240\u4ee5\u5bf9\u4e8e\u4e0a\u8ff0\u60c5\u51b5\u6211\u4eec\u5b9e\u9645\u4e0a\u662f\u6307\u9009\u4e861\u4e2a\u6570\u7684\uff0c\u5f88\u660e\u663e\u8fd9\u4e0d\u7b26\u5408\u9898\u610f\uff0c\u4e8e\u662f\u6211\u4eec\u9700\u8981\u52a0\u7279\u5224\n\n### $Code:$\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define il inline\n#define re register\n#define inf 123456789\nil int read() {\n    re int x = 0, f = 1; re char c = getchar();\n    while(c < '0' || c > '9') { if(c == '-') f = -1; c = getchar();}\n    while(c >= '0' && c <= '9') x = x * 10 + c - 48, c = getchar();\n    return x * f;\n}\n#define rep(i, s, t) for(re int i = s; i <= t; ++ i)\n#define drep(i, s, t) for(re int i = t; i >= s; -- i)\n#define maxn 200005\nint n, m, a[maxn], dp[maxn], lef[maxn], rig[maxn], ans1, ans2, sum, m1, m2, tot;\nil void doit(int l, int r) {\n\tdp[l - 1] = dp[r + 1] = lef[l - 1] = rig[r + 1] = -inf;\n\trep(i, l, r) dp[i] = max(dp[i - 1], 0) + a[i], lef[i] = max(lef[i - 1], dp[i]);\n\tdrep(i, l, r) dp[i] = max(dp[i + 1], 0) + a[i], rig[i] = max(rig[i + 1], dp[i]);\n}\nil void solve(int x) {\n\tsum += x, tot += (x > 0);\n\tif(x >= m1) m2 = m1, m1 = x;\n\telse if(x >= m2) m2 = x;\n}\nint main() {\n\tn = read(), ans1 = ans2 = m1 = m2 = -inf;\n\trep(i, 1, n) a[i] = read(), solve(a[i]);\n\tif(tot < 2) return printf(\"%d\", m1 + m2), 0; \n\tdoit(1, n);\n\trep(i, 2, n - 1) ans1 = max(ans1, lef[i - 1] + rig[i + 1]);\n\trep(i, 1, n) a[i] = -a[i];\n\tdoit(1, n);\n\trep(i, 2, n - 1) ans2 = max(ans2, lef[i - 1] + rig[i + 1]);\n\tprintf(\"%d\", max(ans1, sum + max(0, ans2)));\n\treturn 0;\n}\n```",
        "postTime": 1567939337,
        "uid": 57014,
        "name": "Nemlit",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u6211\u6765\u4e00\u53d1\u5f88\u5b9e\u7528\u7684\u9898\u89e3\uff1b\n\n\u672c\u4eba\u60f3\u51fa\u4e86O(n)\u7684\u505a\u6cd5\uff0c\u662f\u4e00\u79cdDP\uff1b\n\n\u5148\u8bf4\u5927\u4f53\u601d\u8def:\n\n\u7b54\u6848\u5206\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u79cd\u662f\u9009\u62e9\u7684\u4e24\u6bb5\u5747\u4e0d\u8de8\u8d8an\u52301(\u4e5f\u5c31\u662f\u73af)\uff0c\u53e6\u4e00\u79cd\u662f\u9009\u62e9\u7684\u4e24\u6bb5\u8de8\u8fc7\u4e86\u73af;\n\n\u5982\u679c\u5747\u4e0d\u8de8\u8d8a\u73af\uff0c\u90a3\u4e48\u4e5f\u5c31\u662f\u610f\u5473\u7740\u8fd9\u662f\u4e00\u9053\u6a21\u677f\u9898\uff1b\n\n\u8bbemaxl[i]\u8868\u793a\u4ece1~i\u7684\u6700\u5927\u5b57\u4e32\u548c\uff0cmaxr[i]\u8868\u793ai~n\u7684\u6700\u5927\u5b57\u6bb5\u548c\uff1b\n\u5f88\u660e\u663e\u7684:\u7b54\u6848\u5c31\u662fmax(maxl[i]+maxr[i+1])\n```cpp\nmaxl[i]=max(a[i],maxl[i-1]+a[i]);//\u8868\u793a\u8fd9\u4e00\u4f4d\u662f\u4e0d\u662f\u4e00\u6bb5\u533a\u95f4\u7684\u5f00\u5934\uff1b\nmaxl[i]=max(maxl[i-1],maxl[i]);\nmaxr[i]=max(a[i],maxr[i+1]+a[i]);\nmaxr[i]=max(maxr[i],maxr[i+1]);\n```\n\u6240\u4ee5\u76ee\u524d\u4f60\u7684\u671f\u671b\u5206\u6570\u5c31\u662f50\u4e86\uff1b\n\n\n\u7136\u540e\u5904\u7406\u73af\uff1a\n\n\u6211\u4eec\u6362\u79cd\u601d\u7ef4\uff0c\u5c31\u597d\u6bd4\u5e76\u67e5\u96c6\u7ef4\u62a4\u8054\u901a\u65f6\u53ef\u4ee5\u8fd0\u7528\u9006\u5411\u601d\u7ef4\u4e00\u6837\uff0c\u628a\u62c6\u8fb9\u6539\u4e3a\u52a0\u8fb9\uff0c\u4f60\u6c421~n\u5e26\u73af\u7684\u6700\u5927\u503c\u5c31\u7b49\u4ef7\u4e8e\u6c42(1~n\u7684\u533a\u95f4\u548c)\u51cf\u53bb(1~n\u7684\u4e24\u6bb5\u533a\u95f4\u6700\u5c0f\u503c)\n\n\u6c42\u6700\u5c0f\u503c\u7684\u65b9\u6cd5\u548c\u6c42\u6700\u5927\u503c\u7684\u65b9\u6cd5\u662f\u4e00\u6837\u7684\uff0c\u7a0d\u52a0\u66f4\u6539\u5c31\u53ef\u4ee5\u4e86\uff1b\n\n\u7136\u540e\u671f\u671b\u5206\u6570100\n\n\u7136\u540e\u5c31A\u4e86\u5417\uff1f\n\n\u55ef~\uff1f\u600e\u4e48\u624d\u6253\u4e8680\u5206\uff1f\n\n\u4f60\u8dd1\u4e00\u904d\u7a0b\u5e8f\uff0c\u8bd5\u8bd5\u8fd9\u7ec4\u6570\u636e:\n3\n-2 -4 -5\n\n\u4f60\u7684\u591a\u5c11\uff1f0\uff1f\u6b63\u89e3\u662f-6\u554a\uff01\n\n\u8fd9\u662f\u56e0\u4e3a\u9898\u4e2d\u8981\u6c42\u662f\u4e24\u6bb5\u975e\u7a7a\u7684\u5b57\u4e32\uff0c\u6240\u4ee5\u5f53\u6574\u4e2a\u4e32\u90fd\u662f\u8d1f\u6570\u65f6\u5e94\u8be5\u7279\u5224\uff0c\u9009\u62e9\u6700\u5927\u7684\u4e24\u4e2a\u503c\u52a0\u8d77\u6765\u5c31\u662f\u7b54\u6848\u4e86\uff1b\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nlong long a[200010];\nlong long maxl[200010],minl[200010],maxr[200010],minr[200010];\nsigned main()\n{\n\tint n;\n\tcin>>n;\n\tlong long sum=0;\n\tlong long maxn=-999999999999;\n\tfor(register int i=1;i<=n;i++){\n        cin>>a[i];\n\t\tmaxn=max(maxn,a[i]);\n\t\tsum+=a[i];\n\t}\n\tfor(register int i=1;i<=n;i++){\n\t\tmaxl[i]=maxr[i]=-999999999999;\n\t\tminl[i]=minr[i]=999999999999;\n\t}\n\tmaxl[1]=a[1];\n\tminl[1]=a[1];\n\tmaxr[n]=a[n];\n\tminr[n]=a[n];\n\tfor(register int i=2;i<=n;i++){\n\t\tmaxl[i]=max(a[i],maxl[i-1]+a[i]);\n\t\tminl[i]=min(a[i],minl[i-1]+a[i]);\t\n\t}\t\n\tfor(register int i=2;i<=n;i++){\n\t\tmaxl[i]=max(maxl[i-1],maxl[i]);\n\t\tminl[i]=min(minl[i-1],minl[i]);\n\t}\n\tfor(register int i=n-1;i>=1;i--){\n\t\tmaxr[i]=max(a[i],maxr[i+1]+a[i]);\n\t\tminr[i]=min(a[i],minr[i+1]+a[i]);\t\t\n\t}\n\tfor(register int i=n-1;i>=1;i--){\n\t\tmaxr[i]=max(maxr[i],maxr[i+1]);\n\t\tminr[i]=min(minr[i],minr[i+1]);\n\t}\n\tlong long anspart1=-999999999999,anspart2=999999999999;\n\tfor(register int i=1;i<=n;i++){\n\t\tanspart1=max(anspart1,maxl[i]+maxr[i+1]);\n\t\tanspart2=min(anspart2,minl[i]+minr[i+1]);\n\t}\n\tlong long ans=max(anspart1,sum-anspart2);\n\tsort(a+1,a+1+n);\n\tif(sum==anspart2){\n\t\tans=a[n]+a[n-1];\n\t}\n\tcout<<ans;\n}\n/*\n6\n3 2 -1 1 -1 5\n\n8\n-5 -8 -23 -5 -6 -7 -12 -6 -7\n*/\n```\n\n",
        "postTime": 1567171597,
        "uid": 119189,
        "name": "\u795e\u4e4b\u53f3\u5927\u81e3",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u505a\u8fd9\u9053\u9898\u4e4b\u524d\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\uff1a\n# \u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5\n\u6211\u771f\u7684\u662f\u9189\u4e86\uff0c\u8fd9\u53e5\u8bdd\u8ba9\u6211\u8c03\u4e86\u4e00\u4e2a\u4e0a\u5348\n\n\u8fdb\u5165\u6b63\u9898\uff1a\n\n\u6211\u4eec\u5148\u4e0d\u8003\u8651\u73af\u5f62\uff0c\u5982\u679c\u9898\u76ee\u662f\u6c42\u4e00\u4e2a\u6570\u5217\u7684**\u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5**\u8be5\u600e\u4e48\u6c42\u5462\uff1f\n\n\u524d\u7f6e\u77e5\u8bc6\uff1a\u6700\u5927\u5b50\u6bb5\u548c~~\u4ee5\u53ca\u6a21\u62df~~\n\nlef[i] \u8868\u793a1~i\u4e2d\u7684\u6700\u5927\u5b50\u6bb5\u548c\uff0crig[i]\u8868\u793ai~n\u4e2d\u7684\u6700\u5927\u5b50\u6bb5\u548c\n\n**max{lef[i]+rig[i+1] | i>=1 && i<n}**\n\n\u6ce8\u610f\uff0c\u4e0d\u80fd\u5199\u6210**max{lef[i]+rig[i] | i>=1 && i<n}**\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u5f0f\u5b50\u53ef\u80fd\u53ea\u4f1a\u9009\u62e9\u4e00\u4e2a\u6570\n\n\n\n------------\n\n\u597d\u4e86\uff0c\u6211\u4eec\u5df2\u7ecf\u89e3\u51b3\u4e86\u975e\u73af\u5f62\u7684\u95ee\u9898\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e00\u4e0b\u73af\u5f62\u8fd9\u4e2a\u6761\u4ef6\u4e0e\u4e0a\u9762\u8fd9\u4e2a\u95ee\u9898\u6709\u4ec0\u4e48\u4e0d\u540c\n\n\u5f53\u5176\u4e2d\u4e00\u4e2a\u5b50\u6bb5\u8d8a\u8fc7\u7b2c1\u4e2a\u6570\u548c\u7b2cn\u4e2a\u6570\u65f6\uff0c\u5e8f\u5217\u4f1a\u53d8\u6210\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\n\n11000000011000011111\n\n\u5176\u4e2d\uff0c1\u662f\u9009\u62e9\u7684\u6570\uff0c0\u662f\u6ca1\u6709\u9009\u62e9\u7684\u6570\n\n\u8fd9\u65f6\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u8de8\u8fc7\u7b2c1\u4e2a\u6570\u548c\u7b2cn\u4e2a\u6570\u65f6\n\n\u5c31\u76f8\u5f53\u4e8e\u9009\u62e9\u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5**\u4f7f\u8fd9\u4e24\u6bb5\u548c\u6700\u5c0f**\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u73af\u5f62\u5e8f\u5217\u8f6c\u5316\u6210\u4e00\u4e2a\u6570\u5217\u6c42\u4e24\u6b21\u7684\u95ee\u9898\n\n\u4e00\u6b21\uff0c\u6c42\u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5\u4f7f\u8fd9\u4e24\u6bb5\u548c\u6700\u5927\n\n\u4e00\u6b21\uff0c\u6c42\u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5\u4f7f\u8fd9\u4e24\u6bb5\u548c\u6700\u5c0f\uff0c\u7136\u540e\u7528\u5e8f\u5217\u6240\u6709\u6570\u7684\u603b\u548c\u51cf\u53bb\u8fd9\u4e2a\u6570\n\n\u5c06\u8fd9\u4e24\u6b21\u6c42\u51fa\u6765\u7684\u503c\u53d6max\u5c31\u662f\u7b54\u6848\u4e86\n\n\uff08\u5b8c\uff09\n\n\u4e86\u5417\uff1f\u6ca1\u6709\u3002\n\n\u8bf7\u56de\u5230\u8fd9\u7bc7\u9898\u89e3\u7684\u5f00\u5934\uff0c\u770b\u4e00\u770b\u6ce8\u610f\u4e8b\u9879\uff1a\n\n# \u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5\n\n\u5148\u770b\u8fd9\u7ec4\u6570\u636e\n```\n5\n\n-1 -4 -5 3 -3\n```\n\u5982\u679c\u7528\u4ee5\u4e0a\u7b97\u6cd5\uff0c\u7b54\u6848\u662f3\uff0c\u4f46\u6b63\u786e\u7b54\u6848\u5e94\u8be5\u662f2\n\n\u56e0\u4e3a\u5982\u679c\u53ea\u9009\u62e9\u4e863\u8fd9\u4e2a\u6570\u7684\u8bdd\uff0c\u6709\u4e00\u4e2a\u5b50\u6bb5\u662f\u7a7a\u96c6\n\n\u5728\u9009\u62e9\u4e24\u4e2a\u6700\u5c0f\u5b50\u6bb5\u548c\u65f6\uff0c\u7a0b\u5e8f\u9009\u62e9\u4e86-1 -4 -5 \u548c -3\n\n\u6240\u4ee5\u53d6\u53cd\u5c31\u53ea\u67093\u4e86\n\n\u90a3\u4e48\u4ec0\u4e48\u65f6\u5019\u7a0b\u5e8f\u4f1a\u51fa\u95ee\u9898\uff1f\n\n1.\u5168\u90e8\u8d1f\u6570\uff0c\u7b2c\u4e8c\u5c0f\u95ee\u53d6\u5168\u90e8\u6570\n\n2.\u53ea\u6709\u4e00\u4e2a\u975e\u8d1f\u6574\u6570\uff0c\u7b2c\u4e8c\u5c0f\u95ee\u53d6\u53cd\u540e\u53ea\u6709\u4e00\u4e2a\u6570\n\n\u7279\u5224\u5c31\u597d\u4e86\n\ncode\uff1a\n```cpp#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint inp[200005];\nint db[200005];\nint lef[200005];\nint rig[200005];\nint main()\n{\n\tint n,ans=-2e9,sum=0,tem=2e9;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&inp[i]);\n\t\tsum+=inp[i];\n\t\tdb[i]=inp[i];\n\t}\n\tsort(db+1,db+1+n);\n\tif(db[n-1]<0)\n\t{\n\t\tprintf(\"%d\",db[n]+db[n-1]);\n\t\treturn 0;\n\t}//\u7279\u5224\uff0c\u6570\u636e\u6c34\u968f\u4fbf\u641e \n\t//\u7b2c\u4e00\u95ee \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(lef[i-1]>0) lef[i]=inp[i]+lef[i-1];\n\t\telse lef[i]=inp[i];\n\t}\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tif(rig[i+1]>0) rig[i]=inp[i]+rig[i+1];\n\t\telse rig[i]=inp[i];\n\t}\n\tfor(int i=2;i<=n;i++) lef[i]=max(lef[i],lef[i-1]);\n\tfor(int i=n-1;i>=1;i--) rig[i]=max(rig[i],rig[i+1]);\n\tfor(int i=1;i<n;i++) ans=max(ans,lef[i]+rig[i+1]);\n\tmemset(lef,0,sizeof(lef));//\u4e00\u5b9a\u4e00\u5b9a\u8981\u8bb0\u5f97\u521d\u59cb\u5316\uff01\uff01\uff01 \n\tmemset(rig,0,sizeof(rig));\n\t//\u7b2c\u4e8c\u95ee \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(lef[i-1]<0) lef[i]=inp[i]+lef[i-1];\n\t\telse lef[i]=inp[i];\n\t}\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tif(rig[i+1]<0) rig[i]=inp[i]+rig[i+1];\n\t\telse rig[i]=inp[i];\n\t}\n\tfor(int i=2;i<=n;i++) lef[i]=min(lef[i],lef[i-1]);\n\tfor(int i=n-1;i>=1;i--) rig[i]=min(rig[i],rig[i+1]);\n\tfor(int i=1;i<n;i++) tem=min(tem,lef[i]+rig[i+1]);\n\tans=max(ans,sum-tem);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\uff08\u5b8c\uff09",
        "postTime": 1565146516,
        "uid": 59221,
        "name": "gravf",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u8fd8\u662f\u7531\u6211\u6765\u53d1\u4e00\u4e2a\u6bd4\u8f83\u6e05\u6670\u7684\u9898\u89e3\u5427\uff0c~~\u65e9\u4e0a\u5934\u8111\u6e05\u6670\u4e00\u4e0b\u5b50\u5c31\u77e5\u9053\u600e\u4e48\u5199\u4e86\u3002~~\n\n1. \u6c42\u4e24\u7aef\u6700\u5927\u8fde\u7eed\u5b57\u6bb5\u7684\u548c \u8003\u8651dp \u7531\u4e8e\u662f\u73af\u5f62\u7684\u6211\u4eec\u5148\u4e0d\u7ba1\u3002\u3002\n\n2. \u8003\u8651\u4e00\u4e2a\u7b80\u5316\u7248\u7684\u95ee\u9898\u4e0d\u662f\u73af\u5f62\u8ba9\u4f60\u9009\u51fa\u4e24\u6bb5\u7684\u6700\u5927\u5b50\u6bb5\u548c\u3002\n\n3. \u8d2a\u5fc3\u80af\u5b9a\u662f\u4e0d\u884c\u7684\u3002\n\n\u8d2a\u5fc3\u65e0\u6cd5\u5f97\u5230\u6211\u4eec\u60f3\u8981\u7684\u60c5\u51b5\u3002\u51b5\u4e14\u7b54\u6848\u80af\u5b9a\u4e0d\u662f\u8d2a\u5fc3\u65e9\u5c31\u7684\u3002\u6211\u4eec\u8981\u60f3\u529e\u6cd5\u4fbf\u5229\u5230\u6574\u4e2a\u72b6\u6001\u7a7a\u95f4\u3002\n\n- \u8bbe\u72b6\u6001 f[i][j][k] \u8868\u793a\u5230\u4e86\u7b2ci\u4e2a\u6570\u5b57\u524d\u9762\u5df2\u7ecf\u9009\u62e9\u4e86j\u6bb5\u5f53\u524d\u6570\u5b57\u9009\u4e0d\u90090/1 \u8fd9\u4e2a\u72b6\u6001\u662f\u5fc5\u8981\u7684\uff0c\u56e0\u4e3a\u5305\u542b\u4e86\u6574\u4e2a\u72b6\u6001\u7a7a\u95f4\u3002\n\n- \u8f6c\u79fb\u7b80\u5355 \u4f46\u662f\u6ce8\u610f\u4e0d\u8981\u5fd8\u8bb0j==0\u65f6\u7684\u8f6c\u79fb\u6bd4\u8f83\u7279\u6b8a\u3002\u3002\n\n\u63a5\u4e0b\u6765\u8ba8\u8bba\u73af\u5f62\uff0c3\u79cd\u65b9\u6cd5\uff1a\n\n1. \u66b4\u529b\u505an\u6b21dp \u7136\u540e\u7edf\u8ba1\u6700\u4f18\u7b54\u6848\u3002\n\n2. \u7834\u73af\u6210\u94fe\u5728\u540e\u9762\u7eed\u4e0a\u4e00\u6bb5\uff0c\u7136\u540e\u8f6c\u79fb\u53d6\u5176\u4e2d\u7684\u4e00\u6bb5\u3002\n\n3. \u4e24\u6b21dp\uff0c\u4e00\u6b21\u4e0d\u8fde\u63a5\uff0c\u4e00\u6b21\u5f3a\u5236\u8fde\u63a5\u3002\n\n1 n\u8fc7\u5927\u505a\u4e0d\u4e86 \n\n2 \u7eed\u4e0a\u4e00\u6bb5\u5176\u8981\u6c42\u7684\u662f\u548c\u524d\u9762\u6ca1\u6709\u4ec0\u4e48\u5f71\u54cd\u6211\u4eec\u8fd9\u4e2a\u72b6\u6001\u4e00\u8f6c\u79fb\u5c31\u662f\u548c\u524d\u9762i-1\u6709\u5173\u7cfb\u6240\u4ee5\u4e5f\u4e0d\u884c\u3002\n\n3 \u662f\u53ef\u4ee5\u7684\u6211\u4eec\u8fd9\u4e2a\u72b6\u6001\u53ef\u4ee5\u5f3a\u5236\u90091\u548cn \u7136\u540e\u5269\u4e0b\u7684\u76f4\u63a5\u8f6c\u79fb\u5373\u53ef\u3002\n\u4e5f\u5c31\u662f\u5f53\u62103\u6bb5\u6765\u505a\u4f46\u662f\u6700\u540e\u8ba9\u7b2c\u4e00\u6bb5\u548c\u7b2c\u4e09\u6bb5\u8fde\u63a5\u8d77\u6765\u3002\n\ncode\uff1a\n\n```cpp\n//#include<bits/stdc++.h>\n#include<iostream>\n#include<queue>\n#include<iomanip>\n#include<cctype>\n#include<cstdio>\n#include<deque>\n#include<utility>\n#include<cmath>\n#include<ctime>\n#include<cstring>\n#include<string>\n#include<cstdlib>\n#include<vector>\n#include<algorithm>\n#include<stack>\n#include<map>\n#include<set>\n#include<bitset>\n#define max(x,y) ((x)>(y)?(x):(y))\n#define min(x,y) ((x)>(y)?(y):(x))\n#define INF 1000000000\n#define ll long long\n#define db double\nusing namespace std;\nchar buf[1<<15],*fs,*ft;\ninline char getc()\n{\n    return (fs==ft&&(ft=(fs=buf)+fread(buf,1,1<<15,stdin),fs==ft))?0:*fs++;\n}\ninline int read()\n{\n\tint x=0,f=1;char ch=getc();\n    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getc();}\n    while(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getc();}\n    return x*f;\n}\ninline void put(int x)\n{\n    x<0?putchar('-'),x=-x:0;\n    int num=0;char ch[50];\n    while(x)ch[++num]=x%10+'0',x/=10;\n    num==0?putchar('0'):0;\n    while(num)putchar(ch[num--]);\n    putchar('\\n');return;\n}\nconst int MAXN=200010;\nint n,maxx=-(INF<<1);\nint a[MAXN];\nint f[MAXN][3][2];//f[i][j][k]\u8868\u793a\u5230\u4e86\u7b2ci\u4e2a\u6570\u5b57\u9009\u62e9\u4e86j\u6bb5\u4e14\u5f53\u524d\u6570\u5b57\u9009\u62e9\u4e86\u6ca1\u67090/1\n//\u4e24\u6b21dp \u4e00\u6b21\u65ad\u5f00 \u4e00\u6b21\u5f3a\u5236\u8fde\u63a5\nint main()\n{\n\t//freopen(\"1.in\",\"r\",stdin);\n\tn=read();\n\tfor(int i=1;i<=n;++i)a[i]=read();\n\tmemset(f,0xcf,sizeof(f));\n\tf[0][0][1]=f[0][0][0]=0;\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=0;j<=2;++j)\n\t\t{\n\t\t\tif(j>=1)f[i][j][1]=max(f[i][j][1],(ll)f[i-1][j-1][0]+a[i]);\n\t\t\tif(j>=1)f[i][j][1]=max(f[i][j][1],(ll)f[i-1][j-1][1]+a[i]);\n\t\t\tif(j>=1)f[i][j][1]=max(f[i][j][1],(ll)f[i-1][j][1]+a[i]);\n\t\t\tf[i][j][0]=max(f[i][j][0],f[i-1][j][1]);\n\t\t\tf[i][j][0]=max(f[i][j][0],f[i-1][j][0]);\n\t\t}\n\tmaxx=max(f[n][2][0],f[n][2][1]);\n\tmemset(f,0xcf,sizeof(f));\n\tf[1][0][1]=a[1];\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tfor(int j=0;j<=2;++j)\n\t\t{\n\t\t\tif(j>=1)f[i][j][1]=max(f[i][j][1],(ll)f[i-1][j-1][0]+a[i]);\n\t\t\tif(j>=1)f[i][j][1]=max(f[i][j][1],(ll)f[i-1][j-1][1]+a[i]);\n\t\t\tf[i][j][1]=max(f[i][j][1],(ll)f[i-1][j][1]+a[i]);\n\t\t\tf[i][j][0]=max(f[i][j][0],f[i-1][j][1]);\n\t\t\tf[i][j][0]=max(f[i][j][0],f[i-1][j][0]);\n\t\t}\n\t}\n\tmaxx=max(maxx,f[n][2][1]);\n\tput(maxx);\n\treturn 0;\n}\n\n```\n\u6ce8\u610ff\u6570\u7ec4\u8981\u5f3a\u5236\u8f6c\u6362\u4e00\u4e0b\u3002\u4ed4\u7ec6\u7406\u89e3\u6bcf\u6b21dp\u65f6\u7684\u7b2c\u4e09\u4e2a\u8f6c\u79fb\u3002\n\n\u6492\u82b1\u273f\u273f\u30fd(\u00b0\u25bd\u00b0)\u30ce",
        "postTime": 1558654898,
        "uid": 59688,
        "name": "chdy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u4e0d\u59a8\u5148\u770b\u4e0b\u4e0d\u662f\u73af\u72b6\u7684\u89e3\u6cd5\uff1a\n\n\u7531\u4e8e\u662f\u4e24\u6bb5, \u56e0\u6b64\u5fc5\u7136\u4f1a\u6709\u2f00\u4e2a\u5206\u754c\u70b9, \u53ef\u4ee5\u4ece\u8fd9\u91cc\u628a\u5e8f\u5217\n\u5207\u5f00\u3002\n\u2022 \u90a3\u4e48\uff0c\u6211\u4eec\u53ea\u8981 O(N) \u679a\u4e3e\u5206\u754c\u70b9 i\uff0c\u5982\u679c\u80fd\u5feb\u901f\u6c42\u51fa [1, i-1]\n\u548c [i + 1, N] \u4e2d\u7684\u6700\u2f24\u2f26\u6bb5\u548c\uff0c\u90a3\u4e48\u672c\u9898\u5c31\u80fd\u6210\u529f\u89e3\u51b3\u3002\n\u2022 f[i] \u8868\u793a [1, i-1] \u4e2d\u7684\u6700\u2f24\u2f26\u6bb5\u548c\uff0cg[i] \u8868\u793a [i + 1, N] \u4e2d\u7684\u6700\u2f24\n\u2f26\u6bb5\u548c\uff0c\u9884\u5904\u7406 f[i], g[i]\uff0c\u5373\u6b63\u7740\u2f00\u904d\u3001\u53cd\u7740\u2f00\u904d\u505a\u6700\u2f24\u2f26\u6bb5\n\u548c\u5373\u53ef\u3002\n\n\u4e8e\u662f\u6709\u4e86\u4ee5\u4e0b\u5bf9\u4e8e\u73af\u72b6\u7684\u89e3\u6cd5\uff1a\n\n\u5206\u5272\u60c5\u51b5\u2f46\u975e\u4e24\u79cd\uff1a\n\n1 \u4e24\u6bb5\u6700\u2f24\u2f26\u6bb5\u548c\u5b8c\u6574\uff0c\u4e24\u6bb5\u6700\u5c0f\u2f26\u6bb5\u548c\u7684\u5176\u4e2d\u2f00\u6bb5\u88ab\u5206\u5272\n\n2 \u4e24\u6bb5\u6700\u5c0f\u2f26\u6bb5\u548c\u5b8c\u6574\uff0c\u4e24\u6bb5\u6700\u2f24\u2f26\u6bb5\u548c\u7684\u5176\u4e2d\u2f00\u6bb5\u88ab\u5206\u5272\n\n\u2022 \u6240\u4ee5\u6211\u4eec\u5c31\u5148\u6c42\u4e24\u6bb5\u6700\u2f24/\u5c0f\u2f26\u6bb5\u548c\uff0c\u7136\u540e\u5206\u7c7b\u8ba8\u8bba\uff0c\u6bd4\u6bd4\n\u54ea\u4e2a\u7ed3\u679c\u2f24\u5c31\u597d\u4e86\u3002\uff08\u666e\u53ca\u849f\u84bb\u6253\u7d2b\u9898\uff0c\u5de8\u4f6c\u522b\u6253\u6211QAQ\uff09\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint f[200001],n,g[200001],a[200001],aa,bb,sum,ans,anss=-9999999,ansss=9999999,x[200001],y[200001];//x[i]\u8868\u793a\u4ee5i\u4e3a\u5206\u754c\u70b9\u7684\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c\u7684\u548c\uff0cy[i]\u8868\u793a\u4ee5i\u4e3a\u5206\u754c\u70b9\u7684\u4e24\u6bb5\u6700\u5c0f\u5b50\u6bb5\u548c\u7684\u548c \nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;++i)scanf(\"%d\",&a[i]),sum+=a[i];\n\tfor(int i=2;i<n;++i)\n\t{\n\t\tmemset(f,0,sizeof(f));\n\t\tmemset(g,0,sizeof(g));\n\t\taa=-9999999;\n\t\tbb=-9999999;\n    \tfor(int j=1;j<i;++j)f[j]=max(f[j]+a[j],f[j]),aa=max(aa,f[j]);\n\t    for(int j=i+1;j<=n;++j)g[j]=max(g[j]+a[j],g[j]),bb=max(bb,g[j]);\n\t    x[i]=aa+bb;\n    }\n    for(int i=2;i<n;++i)anss=max(anss,x[i]);\n    for(int i=2;i<n;++i)\n\t{\n\t\tmemset(f,0,sizeof(f));\n\t\tmemset(g,0,sizeof(g));\n\t\taa=9999999;\n\t\tbb=9999999;\n    \tfor(int j=1;j<i;++j)f[j]=min(f[j]+a[j],f[j]),aa=min(aa,f[j]);\n\t    for(int j=i+1;j<=n;++j)g[j]=min(g[j]+a[j],g[j]),bb=min(bb,g[j]);\n\t    y[i]=aa+bb;\n    }\n    for(int i=2;i<n;++i)ansss=min(ansss,y[i]);\n    ans=max(anss,sum-ansss);\n    printf(\"%d\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1557537068,
        "uid": 43446,
        "name": "\u849f\u84bbyzm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u672c\u4eba\u770b\u5230\u697c\u4e3b\u4eec\u7684\u4ee3\u7801\u90a3\u4e48\u957f\uff0c\u5c31\u60f3\u4e86\u4e00\u4e2a\u7b80\u5355\u6613\u61c2\u7684\uff0c\u540c\u65f6\u4e5f\u66f4\u52a0\u77ed\u5c0f\u7cbe\u608d\u3002\n\n\u76f4\u63a5\u5c06a[i]\u8d1f\u8fc7\u6765\u5c31\u53ef\u4ee5\u7528\u540c\u4e00\u4e2a\u51fd\u6570\u6765\u8fdb\u884c\u8fd0\u7b97\u4e86\u3002\n\n\u601d\u8def\u5c31\u4e0d\u5570\u55e6\u4e86\uff0c\u548c\u697c\u4e3b\u4eec\u7684\u662f\u4e00\u6837\u7684\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<algorithm>\n#include<cmath>\nusing namespace std;\nint n;\nlong long a[2000009],sum;\nlong long l[2000009],r[2000009];\nlong long calc()\n{\n    long long ans=-0x3f3f3f3f3f3f;\n    memset(l,0,sizeof l);memset(r,0,sizeof r);l[0]=r[n+1]=-0x3f3f3f3f3f;\n    for(int i=1;i<=n;i++) l[i]=max(l[i-1],(long long)0)+a[i];\n    for(int i=n;i>=1;i--) r[i]=max(r[i+1],(long long)0)+a[i];\n    for(int i=1;i<=n;i++) l[i]=max(l[i],l[i-1]);\n    for(int i=n;i>=1;i--) r[i]=max(r[i],r[i+1]);\n    for(int i=1;i<=n;i++) ans=max(ans,l[i]+r[i+1]);\n    return ans;\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%lld\",&a[i]);\n        sum+=a[i];\n    }\n    long long ans=calc();\n    for(int i=1;i<=n;i++) \n        a[i]=-a[i];\n    ans=max(ans,sum+calc());\n    if(ans==0) cout<<-1;\n    else cout<<ans;\n    return 0;\n}\n```",
        "postTime": 1486091418,
        "uid": 25283,
        "name": "kakaka",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "**\u58f0\u660e\uff1a** \u53c2\u8003\u6587\u7ae0[\u6700\u5927\u5b50\u6bb5\u548c\u53ca\u5176\u53d8\u5f0f\u7684\u542f\u793a](https://www.luogu.com.cn/blog/wey-yzyl/zui-tai-zi-duan-hu-ji-ji-bian-shi-di-qi-shi#)\u3002\u5728\u8fd9\u7bc7\u6587\u7ae0\u7684\u57fa\u7840\u4e0a\uff0c\u7b14\u8005\u52a0\u5165\u4e86\u81ea\u5df1\u7684\u7406\u89e3\uff0c\u5e76\u8fdb\u884c\u4e86\u66f4\u4e3a\u8be6\u7ec6\u5730\u6574\u7406\uff0c\u4ee5\u53ca\u6269\u5145\u4e86\u672c\u9898\u7684\u4e00\u4e9b\u5751\u70b9\uff0c\u5e0c\u671b\u80fd\u4f60\u6709\u6240\u5e2e\u52a9\u3002\n\n-----------\n\n## \u2460\u666e\u901a\u6700\u5927\u5b50\u6bb5\u548c\n\n\u6700\u4f18\u590d\u6742\u5ea6\u4e3a $O(n)$\u3002\n\n### 1. \u52a8\u6001\u89c4\u5212\n\n\u8003\u8651\u8bbe $dp_i$ \u4e3a\u5e8f\u5217 $1$ \u5230 $i$ \u4e2d\u4ee5 $a_i$ \u7ed3\u5c3e\u7684\u5b50\u6bb5\u7684\u6700\u5927\u503c\u3002\u5219\u5f88\u5bb9\u6613\u60f3\u5230 $dp$ \u65b9\u7a0b\u4e3a\uff1a\n\n$$dp_i=\\max(dp_{i-1},0)+a_i$$\n\n\u5219\u5e8f\u5217\u7684\u6700\u5927\u5b50\u6bb5\u548c\u4e3a\u6240\u6709 $dp$ \u503c\u7684\u6700\u5927\u503c\u3002\n\n### 2. \u524d\u7f00\u548c\u6cd5\uff08\u5b9a\u4e49\uff09\n\n\u8003\u8651\u7528 $sum$ \u6570\u7ec4\u8868\u793a $a$ \u6570\u7ec4\u7684\u524d\u7f00\u548c\u6570\u7ec4\uff0c\u5219\u5e8f\u5217 $1$ \u5230 $i$ \u4e2d\u7684\u6700\u5927\u5b50\u6bb5\u53ef\u4ee5\u8868\u793a\u4e3a $sum_i-\\min(sum_k)(1\\le k<i)$\u3002\n\n\u52a8\u6001\u7ef4\u62a4\u524d\u7f00\u548c\u6700\u5c0f\u503c\u5373\u53ef\u3002\u6700\u7ec8\u7b54\u6848\u4e3a\u6240\u6709\u6700\u5927\u5b50\u6bb5\u7684\u6700\u5927\u503c\u3002\n\n----------\n\n## \u2461\u73af\u72b6\u6700\u5927\u5b50\u6bb5\u548c\n\n\u5373 $a_1$ \u4e0e $a_n$ \u76f8\u90bb\u3002\u6700\u4f18\u590d\u6742\u5ea6 $O(n)$\u3002\n\n### 1. \u52a8\u6001\u89c4\u5212\u6cd5\uff08\u65ad\u73af\u6210\u94fe\uff09\n\n\u7ecf\u5178 trick\u3002\u8003\u8651\u5c06\u5e8f\u5217\u500d\u957f\u540e\uff0c\u4ee5\u6bcf\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b50\u6bb5\u4e3a\u4e00\u4e2a\u5b50\u95ee\u9898\u8dd1\u95ee\u9898\u2460\u4e2d\u7684 $dp$\uff0c\u7136\u540e\u5c06\u6bcf\u4e00\u4e2a\u5b50\u95ee\u9898\u7684\u7ed3\u679c\u53d6\u4e00\u4e2a\u6700\u5927\u503c\u5373\u4e3a\u7b54\u6848\u3002\n\n### 2. \u52a8\u6001\u89c4\u5212\u6cd52\uff08\u5206\u7c7b\u8ba8\u8bba\uff09\n\n\u5c06\u7b54\u6848\u6240\u5728\u533a\u95f4\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba\uff1a\n\n- \u533a\u95f4\u4e0d\u8fc7\u5de6\u53f3\u7aef\u70b9\u3002\u5219\u8dd1\u95ee\u9898\u2460\u4e2d $dp$ \u5373\u53ef\u3002\n\n- \u533a\u95f4\u8fc7\u5de6\u53f3\u7aef\u70b9\u3002\u5219\u5c06\u95ee\u9898\u2460\u4e2d\u6c42\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\u53d8\u4e3a\u6c42\u533a\u95f4\u6700\u5c0f\u5b50\u6bb5\u548c\uff0c\u7136\u540e\u5c06\u6700\u5c0f\u5b50\u6bb5\u548c\u7528\u5e8f\u5217\u603b\u548c\u51cf\u53bb\u5373\u4e3a\u4f4d\u4e8e\u5176\u4e24\u4fa7\u7684\u6700\u5927\u5b50\u6bb5\u548c\u3002\n\n\u5c06\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\u7684\u7b54\u6848\u53d6\u6700\u5927\u503c\u5373\u4e3a\u6700\u7ec8\u7b54\u6848\u3002\n\n-----------\n\n## \u2462\u533a\u95f4\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\n\n\u6700\u4f18\u590d\u6742\u5ea6 $O(n)$\u3002\n\n### 1. \u52a8\u6001\u89c4\u5212\u6cd5\n\n\u8003\u8651\u6b63\u7740\u8dd1\u4e00\u8fb9\u95ee\u9898\u2460\u4e2d\u7684 $dp$ \u7b97\u51fa\u6bcf\u4e00\u4e2a\u533a\u95f4 $1$ \u5230 $i$ \u7684\u6700\u5927\u5b50\u6bb5\u548c\uff08\u8bb0\u5f97\u53d6\u6700\u5927\u503c\uff09\uff0c\u7136\u540e\u518d\u5012\u7740\u8dd1\u4e00\u8fb9 $dp$ \u7b97\u51fa\u6bcf\u4e00\u4e2a\u533a\u95f4 $i$ \u5230 $n$ \u7684\u6700\u5927\u5b50\u6bb5\u548c\u3002\u6700\u540e\u6c42\u51fa\u6240\u6709\n\n$$dp1_{i}+dp2_{i+2}(1\\le i\\le n-2)$$\n\n\u7684\u6700\u5927\u503c\u5373\u4e3a\u7b54\u6848\u3002\u6ce8\u610f\u5982\u679c\u4e24\u6bb5\u5b50\u6bb5\u53ef\u4ee5\u76f8\u90bb\u7684\u8bdd\uff0c\u5c06\u5f0f\u5b50\u4e2d\u7684 $dp2$ \u7684\u4e0b\u6807\u6539\u4e3a $i+1$ \u5373\u53ef\u3002\n\n### 2. \u524d\u7f00\u548c\u6cd5\uff08\u5b9a\u4e49\uff09\n\n\u8ddf\u52a8\u6001\u89c4\u5212\u6cd5\u5dee\u4e0d\u591a\uff0c\u4f9d\u65e7\u662f\u6b63\u7740\u5012\u7740\u8dd1\u4e00\u8fb9\u95ee\u9898\u2460\u4e2d\u7684\u65b9\u6cd5\uff0c\u7136\u540e\u5c06\u6b63\u7740\u7684\u7b54\u6848\u548c\u5012\u7740\u7684\u7b54\u6848\u5373\u53ef\u8d77\u6765\u5373\u4e3a\u6700\u7ec8\u7b54\u6848\u3002\n\n------------\n\n## \u2463\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\n\n\u6700\u4f18\u590d\u6742\u5ea6 $O(n)$\u3002\n\n### \u52a8\u6001\u89c4\u5212\u6cd5\n\n\u7ed3\u5408\u95ee\u9898\u2463\u548c\u95ee\u9898\u2464\u3002\n\n- \u4e24\u6bb5\u533a\u95f4\u90fd\u6ca1\u6709\u8de8\u8fc7\u5de6\u53f3\u7aef\u70b9\u3002\n\n\u7c7b\u4f3c\u4e8e\uff1a`***111****2222*`\n\n\n\u5219\u8f6c\u5316\u4e3a\u95ee\u9898\u2462\uff0c\u5206\u522b\u6b63\u7740\u5012\u7740\u8dd1\u4e00\u904d\u95ee\u9898\u2460\u4e2d\u7684 dp\uff0c\u7136\u540e\u5c06\u4e24\u8005\u7b54\u6848\u7ed3\u5408\u8d77\u6765\u53d6\u6700\u5927\u503c\u5373\u4e3a\u7b54\u6848\u3002\n\n- \u4e24\u6bb5\u533a\u95f4\u4e2d\u6709\u4e00\u6bb5\u8de8\u8fc7\u5de6\u53f3\u7aef\u70b9\u3002\n\n\u7c7b\u4f3c\u4e8e\uff1a`111****222**1111`\n\n\u8003\u8651\u5c06\u95ee\u9898\u8f6c\u5316\u4e3a\u6c42\u533a\u95f4\u6700\u5c0f\u4e24\u6bb5\u5b50\u6bb5\u548c\uff08\u95ee\u9898\u2462\u7684\u53d8\u5f0f\uff09\uff0c\u7136\u540e\u5c06\u8fd9\u4e24\u6bb5\u7684\u548c\u5254\u9664\u51fa\u603b\u548c\u5373\u4e3a\u7b54\u6848\u3002\n\n\u6700\u7ec8\u7b54\u6848\u5373\u4e3a\u4e0a\u8ff0\u4e24\u79cd\u60c5\u51b5\u7684\u6700\u5927\u503c\u3002\n\n**\u6ce8\u610f\uff1a**\n\n- \u9898\u9762\u4e2d\u5e76\u672a\u89c4\u5b9a\u4e24\u6bb5\u5b50\u6bb5\u4e0d\u80fd\u76f8\u90bb\u3002\n\n- \u5e8f\u5217\u53ef\u80fd\u5168\u4e3a\u8d1f\u6570\uff0c\u6b64\u65f6\u6309\u7167\u4e0a\u9762\u7a0b\u5e8f\u4f1a\u53d6\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u7b54\u6848\u4e3a $0$\u3002\u9700\u8981\u8f93\u51fa\u6700\u5927\u7684\u4e24\u4e2a\u8d1f\u6570\u7684\u548c\uff08\u5982\u679c\u5b50\u6bb5\u4e0d\u80fd\u76f8\u90bb\u5219\u8981\u8f93\u51fa\u4e24\u4e2a\u4e0d\u76f8\u90bb\u7684\u8d1f\u6570\u7684\u6700\u5927\u503c\uff09\u3002\n\n- \u7b2c\u4e8c\u79cd\u60c5\u51b5\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e2a\u6700\u5c0f\u5b50\u6bb5\u7684\u5de6\u7aef\u70b9\u4e3a $1$\uff0c\u4e00\u4e2a\u6700\u5c0f\u5b50\u6bb5\u7684\u53f3\u7aef\u70b9\u4e3a $n$ \u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u4f1a\u5c06\u8de8\u8fc7\u5de6\u53f3\u7aef\u70b9\u7684\u6700\u5927\u5b50\u6bb5\u6324\u6389\u3002\u7531\u4e8e\u6b64\u65f6\u4e00\u5b9a\u53ea\u6709\u4e00\u6bb5\u6b63\u6570\uff0c\u82e5\u8be5\u6bb5\u6b63\u6570\u7684\u4e2a\u6570\u5927\u4e8e $1$\uff0c\u5219\u8f93\u51fa\u8be5\u6bb5\u6b63\u6570\u7684\u548c\u5373\u53ef\uff08\u53ef\u4ee5\u901a\u8fc7\u6b63\u5e38\u7a0b\u5e8f\u8dd1\u51fa\u6b63\u786e\u7b54\u6848\uff09\u3002\u82e5\u8be5\u6bb5\u6b63\u6570\u4e2a\u6570\u7b49\u4e8e $1$\uff0c\u5219\u8f93\u51fa\u8be5\u6b63\u6570\u4e0e\u5e8f\u5217\u6700\u5927\u7684\u8d1f\u6570\u4e4b\u548c\u5373\u53ef\u3002\n\n**\u4ee3\u7801\u5982\u4e0b\uff1a**\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 200005\nint n,a[N],dp1[N],dp2[N],ans=-999999999,sum,dp3[N],dp4[N],pd; \nint read(){\n\tint w=0,f=1;\n\tchar ch=getchar();\n\twhile (ch>'9'||ch<'0'){\n\t\tif (ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile (ch>='0'&&ch<='9'){\n\t\tw=(w<<3)+(w<<1)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn w*f;\n}\nint main(){\n\tn=read();\n\tfor (int i=1;i<=n;i++){\n\t\ta[i]=read(),sum+=a[i];\n\t\tif (a[i]>0) ++pd;//\u5224\u65ad\u6b63\u6570\u4e2a\u6570\n\t}\n\tif (!pd){//\u6ca1\u6709\u6b63\u6570\n\t\tint x=-99999999,y=-99999999;\n\t\tfor (int i=1;i<=n;i++)\n\t\t\tif (a[i]>x) x=a[i],y=x;\n\t\t\telse if (a[i]>y) y=a[i];\n\t\tprintf(\"%d\\n\",x+y);\n\t\treturn 0;\n\t}else if (pd==1){//\u53ea\u6709\u4e00\u4e2a\u6b63\u6570\n\t\tint x=-99999999,y=0;\n\t\tfor (int i=1;i<=n;i++){\n\t\t\tif (a[i]>0) y+=a[i];\n\t\t\telse if (a[i]>x) x=a[i];\n\t\t} \n\t\tprintf(\"%d\\n\",x+y);\n\t\treturn 0;\n\t}\n\tdp1[1]=dp3[1]=a[1];\n\tdp2[n]=dp4[n]=a[n];\n\tfor (int i=2;i<=n;i++) dp1[i]=max(dp1[i-1],0)+a[i],dp3[i]=max(dp3[i-1],dp1[i]);\n\tfor (int i=n-1;i>=1;i--) dp2[i]=max(dp2[i+1],0)+a[i],dp4[i]=max(dp4[i+1],dp2[i]);\n\tfor (int i=1;i<=n-2;i++){\n\t\tans=max(ans,dp3[i]+dp4[i+1]);\n\t}\n\tdp1[1]=dp3[1]=a[1];\n\tdp2[n]=dp4[n]=a[n];\n\tfor (int i=2;i<=n;i++) dp1[i]=min(dp1[i-1],0)+a[i],dp3[i]=min(dp3[i-1],dp1[i]);\n\tfor (int i=n-1;i>=1;i--) dp2[i]=min(dp2[i+1],0)+a[i],dp4[i]=min(dp4[i+1],dp2[i]);\n\tfor (int i=1;i<=n-2;i++){\n\t\tans=max(ans,sum-dp3[i]-dp4[i+2]);\n\t} \n\tprintf(\"%d\\n\",ans);\n    return 0;\n}\n```\n\n------------\n\n**\u6269\u5c55**\uff1a\u5982\u679c\u5e8f\u5217\u5e26\u4fee\u6539\u64cd\u4f5c\uff0c\u5219\u53ef\u4ee5\u91c7\u7528\u7ebf\u6bb5\u6811\u7684 $O(\\text{log }n)$ \u505a\u6cd5\uff0c\u672c\u6587\u5728\u6b64\u4e0d\u518d\u8d58\u8ff0\uff0c\u53ef\u4ee5\u53c2\u8003\u9898\u76ee[P4513 \u5c0f\u767d\u901b\u516c\u56ed](https://www.luogu.com.cn/problem/P4513)\u81ea\u884c\u5b66\u4e60\u3002\n\n\u5982\u679c\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u4e0d\u59a8\u70b9\u4e2a\u8d5e\u5427\uff01",
        "postTime": 1629508828,
        "uid": 257621,
        "name": "\u7ffc\u5fb7\u5929\u5c0a",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P1121 \u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c"
    },
    {
        "content": "# Description\n\n\u7ed9\u51fa\u4e00\u6bb5\u73af\u72b6\u5e8f\u5217\uff0c\u5373\u8ba4\u4e3a$A_1$\u548c$A_N$\u662f\u76f8\u90bb\u7684\uff0c\u9009\u51fa\u5176\u4e2d\u8fde\u7eed\u4e0d\u91cd\u53e0\u4e14\u975e\u7a7a\u7684\u4e24\u6bb5\u4f7f\u5f97\u8fd9\u4e24\u6bb5\u548c\u6700\u5927\u3002\n\n# Solution\n\n\u4e00\u5171\u4e09\u4e2a\u5173\u952e\u8bcd:\n\n>\u73af\u72b6\n\n>\u6700\u5927\n\n>\u4e24\u6bb5\u5b50\u6bb5\u548c\n\n\u663e\u7136\u8fd9\u662f\u4e00\u9053DP\u9898\u3002\u3002\u3002\u7136\u800c\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u641e\u6210\u7ebf\u6bb5\u6811!\n\n\u666e\u901a\u7684\u6700\u5927\u5b50\u6bb5\u548c\u76f8\u4fe1\u5927\u5bb6\u90fd\u80fd\u591f\u7528\u7ebf\u6bb5\u6811\u6765\u5b8c\u6210\u3002\n\n\u65e0\u975e\u5c31\u662f\u8bb0\u5f55\u533a\u95f4\u548c\u3001\u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\u3001\u533a\u95f4\u6700\u5927\u524d\u7f00\u548c\u3001\u533a\u95f4\u6700\u5927\u540e\u7f00\u548c\n\n\u7136\u540e\u5408\u5e76\u65f6\u66f4\u65b0\u4fe1\u606f\u5373\u53ef\n\n\u90a3\u4e48\u4e24\u6bb5\u5b50\u6bb5\u548c\u8be5\u600e\u4e48\u641e\u5462?\n\n\u5176\u5b9e\u4e5f\u4e0d\u8d39\u8111\u5b50~~\u5e9f\u7b14~~\n\n\u9996\u5148\u5957\u8def\u7684\u8ba8\u8bba\u8fd9\u4e24\u6bb5\u7684\u4f4d\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u67095\u79cd\u60c5\u51b5\uff08\u753b\u753b\u56fe\u793a\u610f\u4e00\u4e0b\u53ef\u80fd\u5f88\u4e11\u53cd\u6b63\u610f\u601d\u4f60\u4eec\u80fd\u61c2\u5c31\u884c\n\n![Annotation 2020-02-07 210659.png](https://i.loli.net/2020/02/07/cM8KnGyrefCLwRk.png)\n\n\u603b\u7ed3\u51fa\u6765\u6211\u4eec\u9700\u8981\u5728\u7ebf\u6bb5\u6811\u91cc\u7ef4\u62a4\u7684\u4e1c\u897f\u6709\uff1a\n\n1. \u533a\u95f4\u548c\n4. \u533a\u95f4\u6700\u5927\u524d\u7f00\n5. \u533a\u95f4\u6700\u5927\u540e\u7f00\n2. \u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\n6. \u533a\u95f4\u6700\u5927\u524d\u7f00+\u540e\u7f00\n8. \u533a\u95f4\u6700\u5927\u4e2d\u95f4+\u540e\u7f00\n7. \u533a\u95f4\u6700\u5927\u524d\u7f00+\u4e2d\u95f4\n3. \u533a\u95f4\u4e24\u6bb5\u6700\u5927\u5b50\u6bb5\u548c\n\n~~\u6bcf\u884c\u957f\u5ea6\u4e0d\u4e0b\u964d\u770b\u7740\u8fd8\u662f\u5f88\u723d\u7684\u3002\u3002\u3002~~\n\n\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\n\n```cpp\n// \u7701\u7565\u5feb\u8bfb\u548c\u4e00\u5806\u9884\u5904\u7406\u547d\u4ee4\n\nconst int SIZE = 4e5 + 5;\nconst int INF = ~0U >> 1;\nstruct TreeNode { // \u8fd9\u91cc\u7684\u610f\u601d\u5e94\u8be5\u5f88\u660e\u786e\n\tint sum;\n\tint maxSum;\n\tint maxSumDouble;\n\tint maxPrefixSum;\n\tint maxSuffixSum;\n\tint maxPrePlusSuf;\n\tint maxPrePlusMid;\n\tint maxSufPlusMid;\n} data[SIZE<<2];\nint ints[SIZE<<1], ans = -INF, n;\n\nTreeNode UpdateMessages(TreeNode x, TreeNode y) { // \u8fd9\u662f\u91cd\u70b9\n\tTreeNode res;\n\tres.sum = x.sum + y.sum; // \u533a\u95f4\u548c\u6807\u8bb0\u4e0a\u4f20\n\tres.maxSum = max(x.maxSum, y.maxSum); // // \u533a\u95f4\u6700\u5927\u5b50\u6bb5\u548c\u6807\u8bb0\u4e0a\u4f20\n\tres.maxSum = max(res.maxSum, x.maxSuffixSum + y.maxPrefixSum); // \u518d\u628a\u81ea\u5df1\u548c\u4e24\u4e2a\u513f\u5b50\u7684\u6700\u5927\u524d/\u540e\u7f00\u548c\u7684\u548c\u6bd4\u8f83\n\tres.maxPrefixSum = max(x.maxPrefixSum, x.sum + y.maxPrefixSum); // \u5176\u5b9e\u4e0b\u9762\u90fd\u5dee\u4e0d\u591a\n\tres.maxSuffixSum = max(y.maxSuffixSum, y.sum + x.maxSuffixSum); // \u5b9e\u5728\u4e0d\u61c2\u770b\u4e0a\u9762\u7684\u56fe\n\tres.maxPrePlusSuf = max(x.maxPrefixSum + y.maxSuffixSum, x.sum + y.maxPrePlusSuf); // \u770b\u4e86\u5c31\u660e\u767d\u4e86\u3002\u3002\u3002\n\tres.maxPrePlusSuf = max(res.maxPrePlusSuf, y.sum + x.maxPrePlusSuf);\n\tres.maxPrePlusMid = max(x.maxPrePlusMid, x.sum + y.maxPrePlusMid);\n\tres.maxPrePlusMid = max(res.maxPrePlusMid, x.maxPrefixSum + y.maxSum);\n\tres.maxPrePlusMid = max(res.maxPrePlusMid, x.maxPrePlusSuf + y.maxPrefixSum);\n\tres.maxSufPlusMid = max(y.maxSufPlusMid, y.sum + x.maxSufPlusMid);\n\tres.maxSufPlusMid = max(res.maxSufPlusMid, y.sum + x.maxSum);\n\tres.maxSufPlusMid = max(res.maxSufPlusMid, y.maxPrePlusSuf + x.maxSuffixSum);\n\tres.maxSumDouble = max(x.maxSumDouble, y.maxSumDouble);\n\tres.maxSumDouble = max(res.maxSumDouble, x.maxSum + y.maxSum);\n\tres.maxSumDouble = max(res.maxSumDouble, x.maxSufPlusMid + y.maxPrefixSum);\n\tres.maxSumDouble = max(res.maxSumDouble, x.maxSuffixSum + y.maxPrePlusMid);\n\treturn res;\n}\n\nvoid Initialization(int k, int l) { // \u7ed9\u7ebf\u6bb5\u6811\u7ed3\u70b9\u8d4b\u521d\u503c\n\tdata[k].sum = data[k].maxPrefixSum = data[k].maxSuffixSum = data[k].maxSum = ints[l];\n\tdata[k].maxSumDouble = data[k].maxPrePlusSuf = data[k].maxPrePlusMid = data[k].maxSufPlusMid = -INF;\n} \n\nvoid BuildTree(int k, int l, int r) {\n\tif (l ^ r) BuildTree(ls, l, mid), BuildTree(rs, mid + 1, r), data[k] = UpdateMessages(data[ls], data[rs]);\n\telse Initialization(k, l);\n}\n\nTreeNode GetAnswers(int k, int l, int r, int x, int y) {\n\tif (l ^ x || r ^ y) {\n\t\tif (mid >= y) return GetAnswers(ls, l, mid, x, y);\n\t\tif (mid < x) return GetAnswers(rs, mid + 1, r, x, y);\n\t\treturn UpdateMessages(GetAnswers(ls, l, mid, x, mid), GetAnswers(rs, mid + 1, r, mid + 1, y));\n\t} else return data[k];\n}\n\nsigned main() {\n\tread(n);\n\tfor (int i = 1; i <= n; ++i) read(ints[i]), ints[i + n] = ints[i];\n\tBuildTree(1, 1, n << 1);\n\tfor (int i = 1; i <= n; ++i) ans = max(ans, GetAnswers(1, 1, n << 1, i, i + n - 1).maxSumDouble);\n\twrite(io_l, ans);\n}\n```",
        "postTime": 1581081406,
        "uid": 161849,
        "name": "cirnovsky",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\n\u4e24\u79cd\u60c5\u51b5\n\n\u7b2c\u4e00\u79cd\u5c31\u662f\u7c7b\u4f3c---000---000---(0\u8868\u793a\u9009)\uff0c\u8fd9\u4e2a\u53ef\u4ee5DP\n\n\u8bbe$h[0/1/2/3][i]$\u8868\u793a\u5230\u7b2c$i$\u4f4d\u7684\u72b6\u6001\uff1a\n\n$0$:\u8868\u793a\u8fd8\u6ca1\u9009\n\n$1$:\u8868\u793a\u5f53\u524d\u5728\u7b2c\u4e00\u6bb5\n\n$2$:\u8868\u793a\u9009\u5b8c\u4e86\u7b2c\u4e00\u6bb5\n\n$3$:\u8868\u793a\u5f53\u524d\u5728\u7b2c\u4e8c\u6bb5\n\n\u7b2c\u4e8c\u79cd\u5c31\u662f\u7c7b\u4f3c000****000---000\uff0c\u8fd9\u4e2a\u4e5f\u53ef\u4ee5DP\n\n\u8bbe$f[0/1/2/3][i]$\u8868\u793a\u5230\u7b2c$i$\u4f4d\u7684\u72b6\u6001\uff1a\u8981\u5f3a\u5236\u9009\u5de6\u8fb9\n\n$0$:\u8868\u793a\u76ee\u524d\u5728\u7b2c\u4e00\u6bb5\n\n$1$:\u8868\u793a\u7b2c\u4e00\u6bb5\u9009\u5b8c\n\n$2$:\u8868\u793a\u76ee\u524d\u5728\u7b2c\u4e8c\u6bb5\n\n$3$:\u8868\u793a\u7b2c\u4e8c\u6bb5\u9009\u5b8c\n\n\u8bbe$g[0/1/2/3][i]$\u4ece\u540e\u5f80\u524d\uff0c\u5f3a\u5236\u9009\u53f3\u8fb9\n\n\nf\u548cg\u62fc\u8d77\u6765\u5c31\u597d\u4e86\n\n\n```cpp\n# include <bits/stdc++.h>\n# define IL inline\n# define RG register\n# define Fill(a, b) memset(a, b, sizeof(a))\nusing namespace std;\ntypedef long long ll;\nconst int _(2e5 + 5);\n\nIL ll Read(){\n    RG char c = getchar(); RG ll x = 0, z = 1;\n    for(; c < '0' || c > '9'; c = getchar()) z = c == '-' ? -1 : 1;\n    for(; c >= '0' && c <= '9'; c = getchar()) x = (x << 1) + (x << 3) + (c ^ 48);\n    return x * z;\n}\n\nll n, a[_], f[4][_], g[4][_], ans = -1e18, h[4][_];\n\nint main(RG int argc, RG char* argv[]){\n    n = Read(); Fill(f, -63); Fill(g, -63); Fill(h, -63);\n    for(RG int i = 1; i <= n; ++i) a[i] = Read();\n    f[0][0] = g[0][n + 1] = h[0][0] = 0;\n    for(RG int i = 1; i <= n; ++i){\n        f[0][i] = f[0][i - 1] + a[i];\n        f[1][i] = max(f[0][i], f[1][i - 1]);\n        f[2][i] = max(f[1][i - 1], f[2][i - 1]) + a[i];\n        f[3][i] = max(f[2][i], f[3][i - 1]);\n        h[0][i] = h[0][i - 1];\n        h[1][i] = max(h[0][i - 1], h[1][i - 1]) + a[i];\n        h[2][i] = max(h[1][i - 1], h[2][i - 1]);\n        h[3][i] = max(h[3][i - 1], h[2][i - 1]) + a[i];\n        ans = max(ans, h[3][i]);\n    }\n    for(RG int i = n; i; --i){\n        g[0][i] = g[0][i + 1] + a[i];\n        g[1][i] = max(g[0][i], g[1][i + 1]);\n        g[2][i] = max(g[2][i + 1], g[1][i + 1]) + a[i];\n        g[3][i] = max(g[2][i], g[3][i + 1]);\n    }\n    for(RG int i = 1; i < n; ++i){\n        ans = max(ans, f[3][i] + g[1][i + 1]);\n        ans = max(ans, f[1][i] + g[3][i + 1]);\n    }\n    printf(\"%lld\\n\", ans);\n    return 0;\n}\n\n```",
        "postTime": 1516852237,
        "uid": 47640,
        "name": "Cyhlnj",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "~~\u5927\u5bb6\u7684\u7a0b\u5e8f\u53ef\u80fd\u90fd\u6709\u70b9\u9519...(\u53ef\u80fd\u6211\u773c\u778e)~~\n\n\n\u5982\u6570\u636e:\n\n\n```cpp\n4\n-1 1 -1 -1\n```\n\nAC\u7a0b\u5e8f\u597d\u50cf\u8f93\u51fa\u90fd\u662f1...\n\n\n# ---------------------\n\n\n\u63a5\u4e0b\u6765\u8bf4\u6b63\u5e38\u601d\u8def\n\n\n\u5c31\u662f\u697c\u4e0b\u8fd9\u79cd\u5427...\n\n\n\u611f\u89c9\u6709\u95ee\u9898\u7684\u60c5\u51b5\u5c31\u662f\u6c42\u6700\u5c0f\u4e24\u6bb5\u5b50\u6bb5\u548c\u7684\u65f6\u5019,\u6709\u53ef\u80fd\u4e24\u7aef\u90fd\u53d6\u5230,\u8fd9\u65f6\u53ea\u7559\u4e0b\u4e00\u6bb5..\u800c\u957f\u5ea6\u6709\u53ef\u80fd\u4ec5\u4e3a1\u800c\u4f5c\u4e3a\u7b54\u6848..\n\n\n\u5176\u4ed6\u4e5f\u5c31\u4e00\u6837\u4e86~~(\u53c2\u8003\u4e86\u5176\u4ed6\u9898\u89e3..)~~\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define rep(i,x,y) for(int i=(x);i<=(y);i++)\nconst int N=200005;\nint n,a[N],f[N],g[N],ans=-1<<30,sum;\nint sol(){\n  int ans=-1<<30;\n  rep(i,1,n) f[i]=max(f[i-1],0)+a[i];\n  for(int i=n;i;i--) g[i]=max(g[i+1],0)+a[i];\n  rep(i,1,n) f[i]=max(f[i-1],f[i]);\n  for(int i=n;i;i--) g[i]=max(g[i+1],g[i]);\n  rep(i,2,n) ans=max(ans,f[i-1]+g[i]);\n  return ans;\n}\nint main(){\n  cin>>n;\n  f[0]=g[n+1]=-1<<30;\n  rep(i,1,n) scanf(\"%d\",&a[i]),sum+=a[i];\n  ans=sol();\n  rep(i,1,n) a[i]=-a[i];\n  if(sum+sol()) ans=max(ans,sum+sol());\n  cout<<ans;\n  return 0;\n}\n```",
        "postTime": 1495202369,
        "uid": 20505,
        "name": "tututu",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u9898\u76ee\u5927\u610f\uff1a\u5728\u4e00\u4e2a\u73af\u72b6\u5e8f\u5217\u4e2d\u53d6\u4e24\u6bb5\u975e\u7a7a\u4e14\u548c\u6700\u5927\u3002\n\n\u8fd9\u9898\u5f88\u6709\u96be\u5ea6\uff0c\u5982\u4f55\u7834\u73af\u4e3a\u94fe\uff1f\u7528\u5230\u7b2c\u4e00\u9898\u7684\u65b9\u6cd5\uff1f\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u7ed3\u679c\u65e0\u975e\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\u3002\n\n\u2014\u2014\u2014\u2014\u2014[color=red]|\u2014\u2014\u2014|[/color]\u2014\u2014\u2014\u2014\u2014\u2014[color=red]|\u2014\u2014\u2014\u2014\u2014|[/color]\u2014\u2014\u2014\u2014\u2014\n1\u3001  \u53d6\u5230\u7684\u4e24\u6bb5\u5728\u4e2d\u95f4\uff0c\u5219\u679a\u4e3e\u5207\u5272\u70b9\uff0c\u5206\u6210\u4e24\u6bb5\uff0c\u5206\u522b\u7528\u7b2c\u4e00\u9898\u65b9\u6cd5\u6c42\u89e3\uff0c\u53d6\u548c\u6700\u5927\u3002\n\n[color=red]\u2014\u2014\u2014\u2014\u2014|[/color]\u2014\u2014\u2014[color=red]|\u2014\u2014\u2014\u2014\u2014\u2014|[/color]\u2014\u2014\u2014\u2014\u2014[color=red]|\u2014\u2014\u2014\u2014\u2014[/color]\n2\u3001  \u53d6\u5230\u7684\u4e24\u6bb5\u4e00\u6bb5\u5728\u4e2d\u95f4\uff0c\u4e00\u6bb5\u5728\u9996\u5c3e\u3002\n\n\u53d1\u73b0\u56fe2\u4e0e\u56fe1\u5f88\u76f8\u4f3c\uff0c\u5982\u679c\u679a\u4e3e3\u6bb5\u7ea2\u8272\u90e8\u5206\u53ef\u80fd\u4f1a\u8d85\u65f6\u3002\u4e8e\u662f\u53ef\u4ee5\u679a\u4e3e\u4e24\u6bb5\u9ed1\u8272\u90e8\u5206\uff0c\u5373\u627e\u4e24\u6bb5\u8fde\u7eed\u975e\u7a7a\u548c\u6700\u5c0f\uff0c\u7136\u540e\u7528\u603b\u548c\u51cf\u53bb\u8fd9\u4e24\u6bb5\u9ed1\u8272\u90e8\u5206\uff0c\u518d\u53d6\u6700\u5927\u503c\u3002\uff08\u6ce8\u610f\u5982\u679c\u603b\u548c-\u9ed1\u8272=0\u8bf4\u660e\u5168\u90fd\u4e0d\u53d6\uff0c\u800c\u5982\u679c\u90fd\u662f\u8d1f\u6570\u5c31\u4f1a\u51fa\u9519\uff09\uff1b\u4e5f\u53ef\u4ee5\u5168\u90e8\u53d6\u8d1f\uff0c\u7136\u540e\u53d6\u6700\u5927\u3002\n",
        "postTime": 1380717454,
        "uid": 1187,
        "name": "AKB48",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    },
    {
        "content": "\u5bf9\u4e8e\u4e00\u822c\u7684\u73af\u5f62\u7ebf\u6027dp\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u500d\u957f\u4ed6\u7684\u94fe\uff0c\u7136\u540e\u6309\u7167\u533a\u95f4dp\u7684\u601d\u8def\u5904\u7406\u3002\n\n\u8fd9\u9053\u9898\u4e00\u5f00\u59cb\u65f6\u6211\u4e00\u76f4\u5728\u6309\u7167\u6b63\u5e38\u7684dp\u601d\u8def\u8003\u5f8b\uff0c\u60f3\u5148\u5199\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u5728\u8fdb\u884c\u4f18\u5316\u3002\u4e8e\u662f\u4e00\u76f4\u5361\u5728\u4e86\u8fd9\u91cc\u3002\u8fd9\u9898\u4e5f\u505a\u4e86\u597d\u4e45\u4e86\uff0c\u540e\u6765\u4e5f\u6ca1\u6709\u7ba1\u90a3\u4e2an^3\u7684\u89e3\u6cd5\u3002\u5e94\u8be5\u662f\u80fda3\u4e2a\u70b9\u7684\u3002\u4ee5\u540e\u53ef\u4ee5\u5728\u5199\u4e0b\u3002\n\n\u73b0\u5728\u8bf4\u6b63\u89e3\uff0c\u8fd9\u4e5f\u662f\u73af\u5f62\u95ee\u9898\u7684\u53e6\u5916\u4e00\u79cd\u601d\u8def\uff0c\u611f\u89c9\u81ea\u5df1\u5f97\u9a6c\u4e0a\u79ef\u7d2f\u4e0b\u6765\u3002\n\n\u5c31\u662f\u8bf4\u4ece\u6b63\u5e38dp\u8003\u8651\uff0c\u6709\u4e00\u79cd\u601d\u8def\u662f\u5206\u60c5\u51b5\u8ba8\u8bba\u3002\u5c31\u662f\u8bf4\u6211\u4eec\u5bf9\u4e8e\u73af\u7684\u5904\u7406\u65f6\u6709\u4e24\u79cd\u60c5\u51b5\u3002\n\n1.\u662f\u8981\u53d6\u5f97\u94fe\u5728\u73af\u5272\u5f00\u7684\u4f4d\u7f6e   \u53ca\u3010l\uff0c1\u3011\u518d\u5230\u30101\uff0c\u3002\u3002\u3011\uff1b\u6216\u8005\u6ca1\u6709\u5904\u4e8e\u8fd9\u4e2a\u4f4d\u7f6e\u3002\n\n\u6240\u4ee5\u5c31\u662f\u8fd9\u6837\u4e86\u3002\n\n\u7136\u540e\u518d\u770b\u4e0b\n\n\u5bf9\u4e8e\u60c5\u51b51\n\n\u6211\u4eec\u5206\u522b\u4ece\u524d\u540e\u5904\u7406\u4ed6\u7684\u6700\u5927\u5b57\u6bb5\u548c\u3002\n\n2\u5904\u7406\u6700\u5c0f\u5b50\u6bb5\u548c\n\n\u7136\u540eo\uff08n\uff09\u679a\u4e3e\u5272\u70b9\u5c31a\u4e86\n",
        "postTime": 1505269736,
        "uid": 23992,
        "name": "bingliang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1121 \u3010\u73af\u72b6\u6700\u5927\u4e24\u6bb5\u5b50\u6bb5\u548c\u3011"
    }
]
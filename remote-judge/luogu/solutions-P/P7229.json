[
    {
        "content": "\u672c\u9898\u5c31\u662f\u4e00\u4e2a\u88f8\u7684\u4e2d\u7f00\u8868\u8fbe\u5f0f\u6c42\u503c\u3002\u5728\u672c\u9898\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u6765\u5b58\u50a8\u8868\u793a\u4e00\u4e2a\u6570\u7684\u503c\uff08$b$ \u6216\u8005 $kx+b$\uff0c\u5176\u4e2d $ k \\not = 0$\u3002\n\n\u5bf9\u4e8e\u4e2d\u7f00\u8868\u8fbe\u5f0f\u6c42\u503c\uff0c\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\u5c31\u662f\u5148\u8f6c\u5316\u4e3a\u8ba1\u7b97\u673a\u597d\u7b97\u7684\u540e\u7f00\u8868\u8fbe\u5f0f\u3002\n\n\u90a3\u4e48\u7a76\u7adf\u5982\u4f55\u624d\u80fd\u5b9e\u73b0\u8fd9\u4e2a\u8f6c\u5316\u5462\uff1f\n\n\u8fd9\u91cc\u6211\u7ed9\u5927\u5bb6\u8bb2\u4e00\u4e2a\u5f88\u5e38\u89c4\u7684\u505a\u6cd5\u3002\n\n1. \u5efa\u7acb\u4e00\u4e2a\u7528\u4e8e\u5b58\u8fd0\u7b97\u7b26\u7684\u6808\uff0c\u9010\u4e00\u626b\u63cf\u8be5\u4e2d\u7f00\u8868\u8fbe\u5f0f\u4e2d\u7684\u5143\u7d20\u3002\n1. \u5982\u679c\u9047\u5230\u4e00\u4e2a\u6570\uff0c\u8f93\u51fa\u8be5\u6570\u3002\n1. \u5982\u679c\u9047\u5230\u5de6\u62ec\u53f7\uff0c\u628a\u5de6\u62ec\u53f7\u5165\u6808\u3002\n1. \u5982\u679c\u9047\u5230\u53f3\u62ec\u53f7\uff0c\u4e0d\u65ad\u53d6\u51fa\u6808\u9876\u5e76\u8f93\u51fa\uff0c\u76f4\u5230\u6808\u9876\u4e3a\u5de6\u62ec\u53f7\uff0c\u7136\u540e\u518d\u628a\u5de6\u62ec\u53f7\u51fa\u6808\u3002\n1. \u5982\u679c\u9047\u5230\u8fd0\u7b97\u7b26\uff0c\u53ea\u8981\u6808\u9876\u7b26\u53f7\u7684\u4f18\u5148\u7ea7\u4e0d\u4f4e\u4e8e\u65b0\u7b26\u53f7\uff0c\u5c31\u4e0d\u65ad\u53d6\u51fa\u6808\u9876\u5e76\u8f93\u51fa\uff0c\u6700\u540e\u628a\u65b0\u7b26\u53f7\u5165\u6808\u3002\u4f18\u5148\u7ea7\u4e3a\u4e58\u6cd5 > \u52a0\u51cf\u6cd5 > \u5de6\u62ec\u53f7\u3002\n1. \u4f9d\u6b21\u53d6\u51fa\u5e76\u8f93\u51fa\u6808\u4e2d\u6240\u6709\u5269\u4f59\u7b26\u53f7\uff0c\u6700\u7ec8\u8f93\u51fa\u5e8f\u5217\u5c31\u662f\u4e00\u4e2a\u4e0e\u539f\u4e2d\u7f00\u8868\u8fbe\u5f0f\u7b49\u4ef7\u7684\u4e00\u4e2a\u540e\u7f00\u8868\u8fbe\u5f0f\u3002\n\n\u7136\u540e\u5728\u6c42\u7684\u65f6\u5019\uff0c\u6ce8\u610f\u5404\u4e2a\u6570\u7684\u987a\u5e8f\uff0c\u5426\u5219\u4f1a\u56e0\u4e3a\u51cf\u6cd5\u4e0d\u6ee1\u8db3\u4ea4\u6362\u5f8b\u800c\u9519\u7684\u5f88\u60e8\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntemplate <class T>\ninline void Rd(T &x) {\n    x = 0;\n    bool f = 0;\n    char ch = getchar();\n    while (!isdigit(ch)) f |= ch == '-', ch = getchar();\n    while (isdigit(ch)) x = (x << 3) + (x << 1) + (ch ^ 48), ch = getchar();\n    if (f)\n        x = -x;\n}\ntypedef long long ll;\nstruct P {\n    ll a, b;\n};\nll M, PP;\nP operator*(const P &a, const ll &b) {\n    P c = a;\n    c.a *= b, c.b *= b;\n    c.a %= M, c.b %= M;\n    return c;\n}\nP operator*=(P &a, const ll &b) {\n    a = a * b;\n    return a;\n}\nP operator+(const P &a, const P &b) {\n    P c;\n    c.a = a.a + b.a, c.b = a.b + b.b;\n    c.a %= M, c.b %= M;\n    return c;\n}\nP operator+(const P &a, const int &b) {\n    P c;\n    c.a = a.a, c.b = a.b + b;\n    c.b %= M;\n    return c;\n}\nP operator-(const P &a, const int &b) {\n    P c;\n    c.a = a.a, c.b = a.b - b;\n    c.b = ((c.b + M) % M + M) % M;\n    return c;\n}\nP operator-(const P &a, const P &b) {\n    P c;\n    c.a = ((a.a - b.a + M) % M + M) % M;\n    c.b = ((a.b - b.b + M) % M + M) % M;\n    return c;\n}\nstring a;\nstruct shizi {\n    ll x;\n    P a;\n    char ch;\n    int t;\n    shizi() {\n        ch = 0;\n        x = 0;\n    }\n} b[100005], s[100005];\nint m, p;\nint prior(char ch) {\n    if (ch == '(')\n        return 1;\n    if (ch == '+' || ch == '-')\n        return 2;\n    if (ch == '*')\n        return 3;\n}\nll calc(ll a, ll b, char ch) {\n    if (ch == '*')\n        return a * b % M;\n    if (ch == '+')\n        return (a + b) % M;\n    if (ch == '-')\n        return ((a - b + M) % M + M) % M;\n}\nP operator - (const int &a, const P &b) {\n\tP c = b;\n\tc.b = ((a - c.b) % M + M) % M;\n\tc.a = (-c.a % M + M) % M;\n\treturn c;\n}\nint main() {\n    ll x = 0;\n    cin >> a >> PP >> M;\n    for (int i = 0; i < a.size(); ++i) {\n        if (a[i] == 'x') {\n            b[++m].a.a = 1;\n            b[m].t = 2;\n            continue;\n        }\n        if (isdigit(a[i])) {\n            x = x * 10 + (a[i] ^ 48);\n            x %= M;        \t\n            if (i == a.size() - 1 || !isdigit(a[i + 1]))\n                b[++m].x = x, x = 0, b[m].t = 1;\n        } else {\n            if (a[i] == '(')\n                s[++p].ch = '(', s[p].t = 3;\n            else if (a[i] == ')') {\n                while (p && s[p].ch != '(') b[++m] = s[p--];\n                if (s[p].ch == '(')\n                    --p;\n            } else {\n                while (p && prior(s[p].ch) >= prior(a[i])) b[++m] = s[p--];\n                s[++p].ch = a[i], s[p].t = 3;\n            }\n        }\n    }\n    while (p) b[++m] = s[p--];\n    for (int i = 1; i <= m; ++i) {\n        if (b[i].t != 3)\n            s[++p] = b[i];\n        else {\n            shizi d = s[p], c = s[p - 1];\n            shizi e;\n            char ch = b[i].ch;\n            if (c.t == 1 && d.t == 1)\n                e.x = calc(c.x, d.x, b[i].ch), e.t = 1;\n            else if (d.t == 1 && c.t == 2) {\n                if (ch == '*')\n                    e.a = c.a * d.x;\n                if (ch == '+')\n                    e.a = c.a + d.x;\n                if (ch == '-')\n                    e.a = c.a - d.x;\n                e.t = 2;\n            } else if (c.t == 2 && d.t == 2) {\n                if (ch == '+')\n                    e.a = c.a + d.a;\n                if (ch == '-')\n                    e.a = c.a - d.a;\n                if (ch == '*') cout << 11;\n            \te.t = 2;\n            } else {\n            \tif (ch == '*') e.a = d.a * c.x;\n            \tif (ch == '+') e.a = d.a + c.x;\n            \tif (ch == '-') e.a = c.x - d.a;\n            \te.t = 2;\n\t\t\t}\n            p -= 2;\n            s[++p] = e;\n        }\n    }\n    P ans = s[1].a;\n\tfor (int i = 0; i < M; ++i)\n\t\tif (((ans.a * i + ans.b) % M + M) % M == PP) {\n\t\t\tprintf(\"%d\", i);\n\t\t\tbreak;\n\t\t}\n}\n```",
        "postTime": 1642332321,
        "uid": 162196,
        "name": "\u4f1f\u5927\u7684\u738b\u592b\u5b50",
        "ccfLevel": 6,
        "title": "P7229 [COCI2015-2016#3] SLON \u9898\u89e3"
    },
    {
        "content": "\u9898\u610f\u5c31\u662f\u8ba9\u4f60\u628a\u8fd9\u4e2a\u5f0f\u5b50\u7ed9\u62c6\u62ec\u53f7\u5408\u5e76\u540c\u7c7b\u9879\u641e\u6210\u4e00\u4e2a $kx+b$ \u7684\u7b80\u5355\u5f0f\uff0c\u7136\u540e\u6c42\u65b9\u7a0b $kx+b \\% m = p$ \u7684\u6700\u5c0f\u975e\u8d1f\u6574\u6570\u89e3\u3002\n\n\u5982\u679c\u6211\u4eec\u8bbe $f(x) = kx+b$\uff0c\u90a3\u4e48\u5c31\u6709 $f(1) = k+b,f(0) = b$\uff0c\u6240\u4ee5 $k = f(1)-f(0),b = f(0)$\uff0c\u9898\u76ee\u5c31\u8f6c\u5316\u6210\u6c42 $x$ \u5206\u522b\u4e3a $0$ \u548c $1$ \u65f6\u539f\u5f0f\u7684\u503c\uff0c\u4e5f\u5c31\u662f\u4e2d\u7f00\u8868\u8fbe\u5f0f\u6c42\u503c\u3002\n\n\u5904\u7406\u4e2d\u7f00\u8868\u8fbe\u5f0f\uff0c\u4e00\u822c\u5148\u628a\u5b83\u5316\u6210\u540e\u7f00\u8868\u8fbe\u5f0f\uff0c\u8fd9\u4e2a\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b\uff1a\n\n\u5047\u8bbe\u6709\u4e00\u4e2a\u961f\u5217\u7528\u4e8e\u4fdd\u5b58\u8f93\u51fa\u7684\u540e\u7f00\u8868\u8fbe\u5f0f\uff0c\u4e00\u4e2a\u6808\u7528\u4e8e\u5b58\u50a8\u7b26\u53f7\u3002\u7136\u540e\u91cd\u590d\u4ee5\u4e0b\u6b65\u9aa4\uff1a\n\n1. \u9047\u5230\u4e00\u4e2a\u6570\u5b57\uff0c\u52a0\u8fdb\u961f\u5217\u3002\n2. \u9047\u5230\u8fd0\u7b97\u7b26\uff0c\u5982\u679c\u6808\u4e3a\u7a7a**\u6216**\u6808\u9876\u662f\u5de6\u62ec\u53f7**\u6216**\u5b83\u7684\u4f18\u5148\u7ea7\u6bd4\u6808\u9876\u7684\u9ad8\uff08\u62ec\u53f7\u7684\u4f18\u5148\u7ea7\u6700\u9ad8\uff09\uff0c\u90a3\u4e48\u5c31\u628a\u8fd9\u4e2a\u8fd0\u7b97\u7b26\u52a0\u8fdb\u6808\uff1b\u5426\u5219\u5c06\u6808\u9876\u8fd0\u7b97\u7b26\u52a0\u8fdb\u961f\u5217\uff0c\u5e76\u5f39\u6389\u3002\n3. \u9047\u5230\u5de6\u62ec\u53f7\uff0c\u76f4\u63a5\u52a0\u8fdb\u6808\u3002\u9047\u5230\u53f3\u62ec\u53f7\uff0c\u91cd\u590d\u6267\u884c\u628a\u6808\u9876\u7b26\u53f7\u79fb\u8fdb\u961f\u5217\u76f4\u5230\u6808\u9876\u4e3a\u5de6\u62ec\u53f7\uff0c\u7136\u540e\u628a\u5de6\u62ec\u53f7\u8e22\u51fa\u6808\u3002\n\n\u8fd9\u4e2a\u65f6\u5019\uff0c\u4ece\u961f\u5934\u5230\u961f\u5c3e\u5c31\u662f\u539f\u4e2d\u7f00\u8868\u8fbe\u5f0f\u5bf9\u5e94\u7684\u540e\u7f00\u8868\u8fbe\u5f0f\u3002\n\n\u5bf9\u8fd9\u4e2a\u540e\u7f00\u8868\u8fbe\u5f0f\u6c42\u503c\u5c31\u80fd\u7b97\u51fa $f(1)$ \u548c $f(0)$\uff0c\u7136\u540e\u66b4\u529b\u679a\u4e3e\u6c42\u6700\u5c0f $x$\u3002\n\n\u9700\u8981\u6ce8\u610f\u6c42\u540e\u7f00\u8868\u8fbe\u5f0f\u65f6\u7684\u51cf\u53f7\u8fd0\u7b97\uff0c\u51cf\u6cd5\u662f\u4e0d\u6ee1\u8db3\u4ea4\u6362\u5f8b\u7684\uff1a$a-b \\neq b-a$\uff0c\u6240\u4ee5\u6c42\u503c\u65f6\u9047\u5230\u8fd0\u7b97\u7b26\u540e\u4ece\u6808\u91cc\u53d6\u7684\u4e24\u4e2a\u6570\u987a\u5e8f\u8981\u53cd\u8fc7\u6765\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\n/*\n( : -1\n+ : -2\n- : -3\n* : -4\n*/\ninline bool is_digit(char ch){return ch>='0' && ch<='9';}\ninline ll prio(ll ch){//\u6c42\u7b26\u53f7\u4f18\u5148\u7ea7\n\tif(ch == -2) return 1;\n\tif(ch == -3) return 1;\n\tif(ch == -4) return 2;\n}\ninline ll ctd(char ch){//\u5c06\u7b26\u53f7\u8f6c\u6362\u6210\u6570\u503c\n\tif(ch == '+') return -2;\n\tif(ch == '-') return -3;\n\tif(ch == '*') return -4;\n}\nchar Str[100005],str[100005];\nint m,p,len,cnt;\nll num[100005];\ninline ll func(int x){//\u6c42 x = 1 \u548c x = 0 \u7684\u503c\n\tfor(int i = 1;i<=len;++i){\n\t\tstr[i] = Str[i];\n\t\tif(str[i] == 'x') str[i] = char(x+48);\n\t}\n\tstack<ll> opt;cnt = 0;\n\tfor(int i = 1;i<=len;++i){//\u5904\u7406\u6210\u540e\u7f00\u8868\u8fbe\u5f0f\n\t\tchar ch = str[i];\n\t\tif(is_digit(str[i])){\n\t\t\tll tmp = 0;\n\t\t\twhile(is_digit(str[i])){\n\t\t\t\ttmp = tmp*10 + (str[i]-'0');tmp %= m;\n\t\t\t\t++i;\n\t\t\t}\n\t\t\tnum[++cnt] = tmp;--i;\n\t\t}else if(str[i] == '(') opt.push(-1);\n\t\telse if(str[i] == ')'){\n\t\t\twhile(opt.top() != -1){\n\t\t\t\tnum[++cnt] = opt.top();\n\t\t\t\topt.pop();\n\t\t\t}\n\t\t\topt.pop();\n\t\t}else{\n\t\t\twhile(!opt.empty() && opt.top() <= -2 && prio(ctd(ch))<prio(opt.top())){\n\t\t\t\tnum[++cnt] = opt.top();\n\t\t\t\topt.pop();\n\t\t\t}\n\t\t\topt.push(ctd(ch));\n\t\t}\n\t}\n\twhile(!opt.empty()){num[++cnt] = opt.top();opt.pop();}\n\t\n\tstack<ll> ans;\n\tfor(int i = 1;i<=cnt;++i){//\u7b97\u540e\u7f00\u8868\u8fbe\u5f0f\n\t\tif(num[i]>=0) ans.push(num[i]);\n\t\telse{\n\t\t\tll s2 = ans.top();ans.pop();\n\t\t\tll s1 = ans.top();ans.pop();//\u6ce8\u610f\n\t\t\tswitch(num[i]){\n\t\t\t\tcase -2:ans.push((s1+s2)%m);break;\n\t\t\t\tcase -3:ans.push((s1-s2+m)%m);break;\n\t\t\t\tcase -4:ans.push(s1*s2%m);break;\n\t\t\t}\n\t\t}\n\t}\n\treturn ans.top();\n}\nint main(){\n\tscanf(\"%s\",Str+1);len = strlen(Str+1);\n\tscanf(\"%d%d\",&p,&m);\n\tll f1 = func(1),f0 = func(0);\n\tll k = f1-f0,b = f0;\n\tfor(ll i = 0;i<m;++i){\n\t\tll s = k*i+b;\n\t\tif((s%m+m)%m == p) return printf(\"%lld\",i),0;\n\t}\n}\n```",
        "postTime": 1610621026,
        "uid": 114173,
        "name": "Computer1828",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7229 \u3010[COCI2015-2016#3] SLON\u3011"
    }
]
[
    {
        "content": "## \u524d\u8a00\n\n\u672c\u6765\u60f3\u5237DP\u9898\u5237\u5230\u4e86\u8fd9\u4e2a\uff08\u4e3a\u4ec0\u4e48\u6807\u7b7e\u91cc\u9762\u6709\u52a8\u6001\u89c4\u5212\uff1f\uff09\uff0c\u6743\u5f53\u590d\u4e60\u4e00\u4e0bBfs\u5427\u3002\n\n~~\u524d\u9762\u7684dalao\u540a\u6253\u6211~~\uff0c\u6211\u7684\u4ee3\u7801\u6bd4\u8f83\u7e41\u7410emm\u3002\n\n## \u9898\u89e3\n\n\u719f\u7ec3Bfs\u7684\u540c\u5b66\u5e94\u8be5\u4e0d\u8981\u591a\u8bb2\u5427\uff0c\u601d\u8def\u7b80\u5355\n\n### $\\text{Bfs\u524d\u51c6\u5907}$\n\n~~\u5b9a\u4e49\u72b6\u6001~~ Node\n> xG,yG,xM,yM,step;\t//\u8868\u793a**G\u4e0eM\u7684\u4f4d\u7f6e,\u79fb\u52a8\u6b65\u6570**\uff0c\u770b\u6210\u4e00\u4e2a**\u6574\u4f53**\n\n\u81ea\u7136\u5c31\u6709\u4e86**\u56db\u7ef4\u7684vis\u6570\u7ec4** $vis[xG][yG][xM][yM]$\uff0c\u6765\u8868\u793a**\u8fd9\u4e2a\u72b6\u6001\u662f\u5426\u7ecf\u5386\u8fc7**\u3002\n\n### $\\text{Bfs}$\n\n- \u4e0a\u4e0b\u4e00\u8d77\u8d70\n\n- \u5f80\u5de6 G\u53f3 M\u5de6\u3000\uff1b\u3000\u5f80\u53f3\u3000G\u5de6 M\u53f3 (~~\u6709\u70b9\u7ed5~~)\n\n- **\u6ce8\u610f\uff1a\u649e\u5899\u2018#\u2019\u56de\u6765\uff0c\u8718\u86db\u7f51\u2018X\u2019\u4e0d\u53ef\u4ee5\u8d70** ~~(\u4e0d\u61c2\u53ef\u4ee5\u770b\u4e00\u4e0b\u6e38\u620f\u89c6\u9891)~~\n\n- \u5904\u7406\u597d\u8fd9\u51e0\u70b9\uff0c\u4f60\u5c31\u53ef\u4ee5A\u4e86\u8fd9\u9898\u3002\n\n## \u540e\u8bb0\n\n\u5173\u4e8e\u6e38\u620f\u89c6\u9891 ---> [bilibili\u4f20\u9001\u95e8](https://www.bilibili.com/video/av18788142?from=search&seid=1100729523807638344) \uff08~~\u8fd9\u4e2a\u6e38\u620f\u770b\u8d77\u6765\u8fd8\u86ee\u597d\u73a9~~\uff09\n\n\u795d\u4f60AC \uff08~~\u5176\u5b9e\u8fd9\u9053\u9898\u4e0d\u662f\u5f88\u6c34qwq~~\uff09\n\n$\\texttt{Code}$\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<queue>\n#define N 37\nusing namespace std;\nconst int dx[4] = {-1,1,0,0};\nconst int dy[4] = {0,0,-1,1};\nint n,m,XG,YG,XM,YM,ans=-1;\nchar map[N][N];\nbool vis[N][N][N][N];\nstruct Node {\n\tint xG,yG;\n\tint xM,yM;\n\tint step;\n};\nqueue<Node> q;\n//\t\u4fee\u6539\u64cd\u4f5c \uff08\u5165\u961f\u5217\uff0c\u6807\u8bb0\uff09 \ninline void update(int x1,int y1,int x2,int y2,int step) {\n\tq.push((Node){x1,y1,x2,y2,step});\n\tvis[x1][y1][x2][y2] = 1;\n}\n//\t\u5224\u65ad\u662f\u5426\u80fd\u8d70 \ninline bool check(int x1,int y1,int x2,int y2) {\n\tif(x1>=1&&x1<=n&&y1>=1&&y1<=m && x2>=1&&x2<=n&&y2>=1&&y2<=m)\n\t\tif(map[x1][y1]!='X' && map[x2][y2]!='X' && !vis[x1][y1][x2][y2])\n\t\t\treturn 1;\n\treturn 0;\n}\n//\t\u5224\u65ad\u662f\u5426\u5230\u7ec8\u70b9 \ninline bool result(int x1,int y1,int x2,int y2) {\n\tif(map[x1][y1]=='T' && map[x2][y2]=='T')\n\t\treturn 1;\n\treturn 0;\n}\n//\t\u4e00\u6b21\u64cd\u4f5c \ninline bool work(int nx1,int ny1,int nx2,int ny2,int step)\n{\n\tif(result(nx1,ny1,nx2,ny2))  {\n\t\tans = step + 1;\n\t\t\treturn 1;\n\t\t}\n\tif(check(nx1,ny1,nx2,ny2))\t\n\t\tupdate(nx1,ny1,nx2,ny2,step+1);\n\treturn 0;\n}\nvoid Bfs()\n{\n\tupdate(XG,YG,XM,YM,0);\n\twhile(!q.empty())\n\t{\n\t\tNode now = q.front(); q.pop();\n//\t\tprintf(\"OK  \");\n//\t\tprintf(\"xG=%d,yG=%d  xM=%d,yM=%d ,step=%d\\n\",now.xG,now.yG,now.xM,now.yM,now.step);\n\t\tfor(int i=0;i<2;++i)\n\t\t{\n\t\t\tint nx1 = now.xG + dx[i] ,ny1 = now.yG + dy[i];\n\t\t\tint nx2 = now.xM + dx[i] ,ny2 = now.yM + dy[i];\n\t\tif(map[nx1][ny1] == '#') nx1=now.xG ,ny1=now.yG;\t//\u6321\u4f4f\u4e0d\u8d70 \n\t\tif(map[nx2][ny2] == '#') nx2=now.xM ,ny2=now.yM;\n\t\t\tif(work(nx1,ny1,nx2,ny2,now.step)) return ;\n\t\t}\n\t\tint nx1,ny1,nx2,ny2;\n//\t\t\u5f80\u53f3\u8d70 G\u5de6\uff0cM\u53f3 \n\t\tnx1 = now.xG + dx[2] ,ny1 = now.yG + dy[2];\n\t\tnx2 = now.xM + dx[3] ,ny2 = now.yM + dy[3];\n\t\tif(map[nx1][ny1] == '#') nx1=now.xG ,ny1=now.yG;\t//\u6321\u4f4f\u4e0d\u8d70 \n\t\tif(map[nx2][ny2] == '#') nx2=now.xM ,ny2=now.yM;\n\t\tif(work(nx1,ny1,nx2,ny2,now.step)) return ;\n//\t\t\u5f80\u5de6\u8d70 G\u53f3\uff0cM\u5de6 \n\t\tnx1 = now.xG + dx[3] ,ny1 = now.yG + dy[3];\n\t\tnx2 = now.xM + dx[2] ,ny2 = now.yM + dy[2];\n\t\tif(map[nx1][ny1] == '#') nx1=now.xG ,ny1=now.yG;\t//\u6321\u4f4f\u4e0d\u8d70 \n\t\tif(map[nx2][ny2] == '#') nx2=now.xM ,ny2=now.yM;\n\t\tif(work(nx1,ny1,nx2,ny2,now.step)) return ;\n\t}\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i)\n\t\tfor(int j=1;j<=m;++j)\n\t\t{\n\t\t\tcin >> map[i][j];\n\t\t\tif(map[i][j] == 'G') XG=i ,YG=j;\n\t\t\tif(map[i][j] == 'M') XM=i ,YM=j; \n\t\t}\n\tBfs();\n\tif(ans == -1) printf(\"no\\n\");\n\telse printf(\"%d\\n\",ans);\n\treturn 0; \n}\n```\n",
        "postTime": 1562042924,
        "uid": 147511,
        "name": "\u57fa\u5730A_I",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3855 \u3010[TJOI2008]Binary Land\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P3855)\n\n**\u7b97\u6cd5\u5206\u6790\uff1aBFS**\n\n~~\u663e\u7136\u662f\u7206\u641c\u9898\uff08\u867d\u7136\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u6709 dp \u6807\u7b7e\uff09\uff08\u96fe\uff09\u3002~~\n\n\u9996\u5148\u662f\u72b6\u6001\uff0c\u6211\u4eec\u5e94\u8be5\u8bb0\u5f55\u4e24\u53ea\u4f01\u9e45\u7684\u4f4d\u7f6e\u548c\u8d70\u5230\u5f53\u524d\u72b6\u6001\u6240\u9700\u7684\u6b65\u6570\uff0c\u5982\u679c\u8d70\u8fc7\u8fd9\u4e2a\u72b6\u6001\uff0c\u90a3\u4e48\u4e0d\u518d\u91cd\u590d\u8d70\u3002\n\n```\nstruct P {\n\tint x,y,a,b,step;//\u4f4d\u7f6e\uff0c\u6b65\u6570 \n}g,m;\n```\n\n\u5176\u6b21\u662f\u5bf9\u72b6\u6001\u7684\u53ef\u884c\u6027\u68c0\u67e5\u3002\u6211\u5728\u68c0\u67e5\u72b6\u6001\u5b8c\u6bd5\u540e\u76f4\u63a5\u5bf9\u72b6\u6001\u8fdb\u884c\u4e86\u4fee\u6539\uff0c\u8fd9\u6837\u53ef\u4ee5\u4f7f BFS \u4e3b\u4f53\u7b80\u77ed\u4e00\u70b9\u3002\n\n```\ninline bool check(int &x,int &y,int &a,int &b,P t) {\n\t//t \u662f\u6ca1\u79fb\u52a8\u4e4b\u524d\u7684\u72b6\u6001 \n\tif(pc[x][y]=='X'||pc[a][b]=='X'){//\u8718\u86db\u7f51\uff0c\u5931\u8d25 \n\t\tvis[x][y][a][b]=1;\n\t\treturn false;\n\t}\n\tif(pc[x][y]=='#')vis[x][y][a][b]=1,x=t.x,y=t.y;//\u5176\u4e2d\u4e00\u53ea\u649e\u5230\u4e86\uff0c\u5c31\u5f80\u56de\u9000 \n\tif(pc[a][b]=='#')vis[x][y][a][b]=1,a=t.a,b=t.b;//\u53e6\u4e00\u53ea... \n\tif(vis[x][y][a][b])return false;//\u5982\u679c\u4e24\u53ea\u90fd\u649e\u5230\u4e86\uff0c\u90a3\u4e48vis\u4e00\u5b9a\u88ab\u6807\u8bb0\u8fc7\uff0c\u9000\u51fa \n\tvis[x][y][a][b]=1;//\u6ca1\u8d70\u8fc7\u7684\u72b6\u6001\uff0c\u6807\u8bb0\u4e00\u4e0b \n\treturn true;\n}\n```\n\n\u6700\u540e\u662f\u4e00\u4e9b\u5c0f\u6280\u5de7\u3002\u6bd4\u5982\u8bf4\uff0c\u9884\u5904\u7406\u4e24\u53ea\u4f01\u9e45\u7684\u79fb\u52a8\uff0c\u8bb0\u5f55\u5728\u6570\u7ec4 $g_1$ \u548c $g_2$ \u91cc\u3002\u5728\u9884\u5904\u7406\u65f6\uff0c\u76f4\u63a5\u5c06\u4e24\u53ea\u4f01\u9e45\u7684\u79fb\u52a8\u65b9\u5f0f\u5bf9\u5e94\u8d77\u6765\uff0c\u8fd9\u6837\u5728\u79fb\u52a8\u65f6\u6bd4\u8f83\u65b9\u4fbf\uff08\u8be6\u89c1\u4ee3\u7801\uff09\u3002\n\n---\n\n\u4e0b\u9762\u662f~~\u559c\u95fb\u4e50\u89c1\u7684~~\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define reg register\nusing namespace std;\nconst int N=50;\nbool vis[N][N][N][N];\nchar pc[N][N];\nint g1[10][2] {1,0,0,-1,0,1,-1,0};\nint g2[10][2] {1,0,0,1,0,-1,-1,0};\n//g1 \u548c g2 \u5728\u50a8\u5b58\u65f6\u76f4\u63a5\u5bf9\u5e94\u8d77\u6765 \nstruct P {\n\tint x,y,a,b,step;//\u4f4d\u7f6e\uff0c\u6b65\u6570 \n}g,m;\ninline bool check(int &x,int &y,int &a,int &b,P t) {\n\t//t \u662f\u6ca1\u79fb\u52a8\u4e4b\u524d\u7684\u72b6\u6001 \n\tif(pc[x][y]=='X'||pc[a][b]=='X'){//\u8718\u86db\u7f51\uff0c\u5931\u8d25 \n\t\tvis[x][y][a][b]=1;\n\t\treturn false;\n\t}\n\tif(pc[x][y]=='#')vis[x][y][a][b]=1,x=t.x,y=t.y;//\u5176\u4e2d\u4e00\u53ea\u649e\u5230\u4e86\uff0c\u5c31\u5f80\u56de\u9000 \n\tif(pc[a][b]=='#')vis[x][y][a][b]=1,a=t.a,b=t.b;//\u53e6\u4e00\u53ea... \n\tif(vis[x][y][a][b])return false;//\u5982\u679c\u4e24\u53ea\u90fd\u649e\u5230\u4e86\uff0c\u90a3\u4e48vis\u4e00\u5b9a\u88ab\u6807\u8bb0\u8fc7\uff0c\u9000\u51fa \n\tvis[x][y][a][b]=1;//\u6ca1\u8d70\u8fc7\u7684\u72b6\u6001\uff0c\u6807\u8bb0\u4e00\u4e0b \n\treturn true;\n}\ninline void bfs(int xx,int yy,int aa,int bb) {\n\tqueue<P> q;\n\tq.push({xx,yy,aa,bb,0});\n\tvis[xx][yy][aa][bb]=1;\n\twhile(!q.empty()) {\n\t\treg P t=q.front();\n\t\tq.pop();\n\t\tfor(reg int i=0; i<4; i++) {\n\t\t\treg int x=t.x+g1[i][0],y=t.y+g1[i][1];//\u79fb\u52a8 \n\t\t\treg int a=t.a+g2[i][0],b=t.b+g2[i][1];\n\t\t\tif(check(x,y,a,b,t)) {\n\t\t\t\tif(pc[x][y]=='T'&&pc[a][b]=='T') {//\u8d70\u5230\u7ec8\u70b9\u4e86 \n\t\t\t\t\tprintf(\"%d\",t.step+1);\n\t\t\t\t\texit(0);\n\t\t\t\t}\n\t\t\t\tq.push({x,y,a,b,t.step+1});\n\t\t\t}\n\t\t}\n\t}\n}\nint main() {\n\tcin.tie(0);\n\treg int r,c;\n\tcin>>r>>c;\n\tfor(reg int i=1;i<=r;i++){\n\t\tfor(reg int j=1;j<=c;j++){\n\t\t\tcin>>pc[i][j];\n\t\t\tif(pc[i][j]=='G')g={i,j};//Gurin\u4f4d\u7f6e \n\t\t\tif(pc[i][j]=='M')m={i,j};//Malon\u4f4d\u7f6e \n\t\t}\n\t}\n\tbfs(g.x,g.y,m.x,m.y);\n\tcout<<\"no\";\n\treturn 0;\n}\n```\n\n[AC](https://www.luogu.com.cn/record/49355843)\n\n~~\uff08\u76ee\u524d\u6700\u4f18\u89e3\uff09~~\n\n\u6b22\u8fce\u4ea4\u6d41\u8ba8\u8bba\uff0c\u8bf7\u70b9\u4e2a\u8d5e\u54e6~",
        "postTime": 1618148411,
        "uid": 415473,
        "name": "\u262f\u262f\u67ab\u262f\u262f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3855 \u3010[TJOI2008]Binary Land\u3011"
    },
    {
        "content": "# P3855 Binary Land \u9898\u89e3\n\n\u3010\u9898\u610f\u3011\n\n\u5728\u4e00\u4e2a\u8ff7\u5bab\u91cc\uff0c\u6709\u4e24\u4e2a\u4f01\u9e45\uff0c\u7b80\u79f0\u4e3aG\u548cM\uff0c\u8ba9\u4f60\u628a\u4ed6\u4eec\u5728**\u540c\u4e00\u65f6\u95f4**\u8d70\u5230\u6307\u5b9a\u70b9\u3002\u5f53\u6309\u201c\u4e0a\u4e0b\u201d\u952e\u65f6\uff0c\u4e24\u53ea\u4f01\u9e45\u90fd**\u540c\u65f6\u5411\u4e0a/\u4e0b\u79fb\u52a8**\uff0c\u5f53\u6309\u201c\u5de6\u53f3\u201d\u952e\u65f6\uff0c\u542c\u8bdd\u7684M\u4f1a**\u8ddf\u7740\u952e\u76d8\u8d70**\uff0c\u800c\u53db\u9006\u7684G\u4f1a**\u53cd\u7740\u6765**\u3002\n\n\u4f01\u9e45\u5982\u679c\u8d70\u5230\u86db\u7f51\u4e0a\uff0c\u5219\u5931\u8d25\u3002\n\n\u3010\u89e3\u6790\u3011\n\n\u5178\u578b\u7684\u4e00\u9053\u8d70\u8ff7\u5bab\u9898\uff0c\u8003\u8651\u641c\u7d22\u6c42\u89e3\u3002\u4f46\u8003\u8651\u5230\u969c\u788d\u7269\u5c11\u65f6DFS\u53ef\u80fd\u4f1aTLE\uff0c\u800c\u672c\u9898\u7a7a\u95f4\u8db3\u591f\uff0c\u6240\u4ee5\u4f7f\u7528BFS\u3002\n\n\u56e0\u4e3a\u6709\u4e24\u53ea\u4f01\u9e45\uff0c\u6240\u4ee5\u8003\u8651\u7528\u56db\u7ef4\u6570\u7ec4$ flag_{gx,gy,mx,my}$\u6765\u5224\u91cd\uff0c\u5176\u4e2d$ gx $,$gy $\u8868\u793aG\u7684\u5750\u6807,$ mx $,$ my $\u8868\u793aM\u7684\u5750\u6807\u3002\n\n\u5165\u961f\u65f6\uff0c\u5219\u53ea\u5728\u201c\u4e24\u53ea\u4f01\u9e45\u81f3\u5c11\u6709\u4e00\u53ea\u79fb\u52a8\u7684\u60c5\u51b5\u4e0b\u201d\u5165\u961f\u3002\n\n\u3010\u4ee3\u7801\u3011\n```cpp\n#include<iostream>\n#include<queue>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint n,m;\nint gsx,msx,gsy,msy,fx,fy;\nchar a[35][35];\nbool flag[35][35][35][35];\nstruct pen{\n\tint gx,gy,mx,my,step;\n};\nqueue<pen>q;\nint xx[4]={-1,1,0,0};\nint yy[4]={0,0,1,-1};\nvoid bfs(){\n\tmemset(flag,0,sizeof(flag));\n\tbool ok=1;\n\tflag[gsx][gsy][msx][msy]=1;\n\tq.push((pen){gsx,gsy,msx,msy,0});\n\twhile(!q.empty()){\n\t\tpen tot=q.front();\n\t\t//cout<<tot.gx<<\" \"<<tot.gy<<\" \"<<tot.mx<<\" \"<<tot.my<<\" \"<<tot.step<<endl;\n\t\tq.pop();\n\t\tif(tot.gx==fx&&tot.mx==fx&&tot.gy==fy&&tot.my==fy){\n\t\t\tcout<<tot.step;\n\t\t\tok=0;\n\t\t\tbreak;\n\t\t}\n\t\tfor(int i=0;i<2;i++){\n\t\t\tint ngx=tot.gx+xx[i],ngy=tot.gy+yy[i];\n\t\t\tint nmx=tot.mx+xx[i],nmy=tot.my+yy[i];\n\t\t\tif(a[ngx][ngy]=='X'||a[nmx][nmy]=='X') continue;//\u86db\u7f51\u4e0d\u8d70\n\t\t\tif(a[ngx][ngy]=='#'&&a[nmx][nmy]=='#') continue;//\u4e0d\u52a8\u4e0d\u8d70\n\t\t\tif(a[ngx][ngy]=='#'){//G\u88ab\u6321\u7740\u4e0d\u8d70\n\t\t\t\tif(flag[tot.gx][tot.gy][nmx][nmy]) continue;\n\t\t\t\tflag[tot.gx][tot.gy][nmx][nmy]=1;\n\t\t\t\tq.push((pen){tot.gx,tot.gy,nmx,nmy,tot.step+1});\n\t\t\t}else if(a[nmx][nmy]=='#'){//M\u88ab\u6321\u7740\u4e0d\u8d70\n\t\t\t\tif(flag[ngx][ngy][tot.mx][tot.my]) continue;\n\t\t\t\tflag[ngx][ngy][tot.mx][tot.my]=1;\n\t\t\t\tq.push((pen){ngx,ngy,tot.mx,tot.my,tot.step+1});\n\t\t\t}else{//\u8c01\u90fd\u6ca1\u88ab\u6321\u7740\n\t\t\t\tif(flag[ngx][ngy][nmx][nmy]) continue;\n\t\t\t\tflag[ngx][ngy][nmx][nmy]=1;\n\t\t\t\tq.push((pen){ngx,ngy,nmx,nmy,tot.step+1});\n\t\t\t}\n\t\t}\n\t\tfor(int i=2;i<4;i++){\n\t\t\tint ngx=tot.gx-xx[i],ngy=tot.gy-yy[i];//\u56e0\u4e3aG\u8981\u53cd\u7740\u6765\uff0c\u6240\u4ee5\u51cf\u53bb\n\t\t\tint nmx=tot.mx+xx[i],nmy=tot.my+yy[i];\n\t\t\tif(a[ngx][ngy]=='X'||a[nmx][nmy]=='X') continue;\n\t\t\tif(a[ngx][ngy]=='#'&&a[nmx][nmy]=='#') continue;\n\t\t\tif(a[ngx][ngy]=='#'){\n\t\t\t\tif(flag[tot.gx][tot.gy][nmx][nmy]) continue;\n\t\t\t\tflag[tot.gx][tot.gy][nmx][nmy]=1;\n\t\t\t\tq.push((pen){tot.gx,tot.gy,nmx,nmy,tot.step+1});\n\t\t\t}else if(a[nmx][nmy]=='#'){\n\t\t\t\tif(flag[ngx][ngy][tot.mx][tot.my]) continue;\n\t\t\t\tflag[ngx][ngy][tot.mx][tot.my]=1;\n\t\t\t\tq.push((pen){ngx,ngy,tot.mx,tot.my,tot.step+1});\n\t\t\t}else{\n\t\t\t\tif(flag[ngx][ngy][nmx][nmy]) continue;\n\t\t\t\tflag[ngx][ngy][nmx][nmy]=1;\n\t\t\t\tq.push((pen){ngx,ngy,nmx,nmy,tot.step+1});\n\t\t\t}\n\t\t}\n\t}\n\tif(ok==1) cout<<\"no\";\n\treturn;\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin>>a[i][j];\n\t\t\tif(a[i][j]=='G'){\n\t\t\t\tgsx=i,gsy=j;\n\t\t\t}\n\t\t\tif(a[i][j]=='M'){\n\t\t\t\tmsx=i,msy=j;\n\t\t\t}\n\t\t\tif(a[i][j]=='T'){\n\t\t\t\tfx=i,fy=j;\n\t\t\t}\n\t\t} \n\t}\n\tbfs();\n\treturn 0;\n} \n```\n",
        "postTime": 1634219453,
        "uid": 368124,
        "name": "victoryang",
        "ccfLevel": 5,
        "title": "P3855\u9898\u89e3"
    },
    {
        "content": "\u9a6c\u4e0a\u5c31\u8981\u8003 SCP \u4e86\uff0c\u8d76\u7d27\u5199\u4e00\u4e9b\u9898\u89e3\u79ef\u7d2f\u4eba\u54c1\n\n## P3855 [TJOI2008]Binary Land \u9898\u89e3\n\n~~\u5f88\u660e\u663e~~ \u53ef\u4ee5\u770b\u51fa\u8fd9\u9053\u9898\u5c31\u662f\u4e00\u4e2a BFS \u7684\u9898\u76ee\uff0c\u5229\u7528 BFS \u66b4\u529b\u641c\u5230\u7b54\u6848\u3002\n\n### \u9898\u76ee\u5728\u8bb2\u4ec0\u4e48\n\n\u5148\u8f93\u5165\u884c\u6570 $N$ \u5217\u6570 $M$\uff0c\u518d\u8f93\u5165\u4e00\u4e2a $N * M$ \u7684\u5b57\u7b26\u4e32\u77e9\u9635\n\n\u6709 1 \u5bf9\u60c5\u4fa3\uff0c\u4ed6\u4eec\u7684\u4f4d\u7f6e\u5728\u77e9\u9635\u4e2d\u5206\u522b\u7528 $G$, $M$ \u8868\u793a\u3002\n\n\u4ed6\u4eec\u7684\u8fd0\u52a8\u65b9\u5f0f\u7279\u522b\uff0c \u4e0a\u4e0b\u8fd0\u52a8\u4ed6\u4eec\u8fd0\u52a8\u65b9\u5411\u662f\u4e00\u6837\u7684\uff0c\u5de6\u53f3\u8fd0\u52a8\u5219\u76f8\u53cd\u3002\n\n\u6700\u540e\u4ed6\u4eec\u8981\u5728 $T$ \u70b9\u76f8\u9047\uff0c\u95ee\u6700\u5c0f\u7684\u64cd\u4f5c\u6b21\u6570\u3002\n\n### \u4e3a\u4ec0\u4e48BFS\n\n+ \u7528\u77e9\u9635\u8bfb\u5165\uff0c\u5728\u4e00\u5f20\u56fe\u4e0a\u64cd\u4f5c\uff0c\u4e00\u822c\u65b9\u6cd5\u662f\u641c\u7d22\u3002\n\n+ ~~\u6807\u7b7e\u91cc\u6709~~\u3002\n\n+ \u6c42\u7684\u662f\u64cd\u4f5c\u6b21\u6570\uff0c \u53ef\u89c1\u662f\u4e00\u9053 BFS \u7684\u6a21\u677f\u9898\u518d\u591a\u4e00\u70b9\u4e1c\u897f\u3002\n\n### \u5982\u4f55\u5904\u7406\u65b9\u5411\u76f8\u53cd\n\n\u5927\u5bb6\u90fd\u77e5\u9053\uff0c\u5728 BFS \u7684\u9898\u4e2d\u7ecf\u5e38\u4f1a\u7528 2 \u4e2a\u6570\u7ec4\u5206\u522b\u8868\u793a\u5411 $x$, $y$ \u65b9\u5411\u7684\u79fb\u52a8\u6b65\u6570\n\n\u7531\u4e8e\u8fd9\u91cc\u662f 2 \u4e2a\u89d2\u8272\uff0c \u6211\u4eec\u4e5f\u8981\u7528 4 \u4e2a\u6570\u7ec4\u6765\u8868\u793a\u3002\n\n\u7a0d\u5fae\u4e00\u60f3\u5c31\u53ef\u4ee5\u60f3\u5230\u628a\u6570\u7ec4 $x$ \u4e0d\u53d8\uff0c $y$ \u76f8\u53cd\u5373\u53ef\n\n### \u5173\u4e8e\u7ed3\u6784\u4f53\n\n\u8fd9\u5f88\u597d\u60f3\uff0c\u6709 2 \u4e2a\u89d2\u8272\uff0c \u53ef\u4ee5\u5206\u522b\u7528 2 \u4e2a pair \u6a21\u62df\uff0c \u6700\u540e\u518d\u6765\u4e00\u4e2a\u961f\u5217\u8868\u793a\u6b65\u6570\u5c31\u53ef\u4ee5\u4e86\uff0c\u4ed6\u4eec\u90fd\u662f\u540c\u65f6\u8fdb\u884c\u7684\uff0c\u6545\u6b65\u6570\u53ea\u7528\u4e00\u4e2a\u5373\u53ef\u3002\n\n\u5176\u4e2d\u4e5f\u53ef\u4ee5\u7528\u4e00\u4e2a\u7ed3\u6784\u4f53\u89e3\u51b3\uff0c\u4f46\u6211\u7528\u7684\u662f\u524d\u8005\u3002\n\n### \u5173\u4e8e MLE\n\n\u5f00\u59cb\u6211\u7684\u4ee3\u7801\u662f\u8fd9\u6837\u7684\uff1a\n\n[MLE\u4ee3\u7801](https://www.luogu.com.cn/paste/huze9wpa)\n\n\u8c8c\u4f3c\u6ca1\u9519\uff0c\u4e00\u4ea4\u5c31\u57fa\u672c\u5168\u90e8 $MLE$ \u4e86\u3002\n\n[MLE\u8bb0\u5f55](https://www.luogu.com.cn/record/59828580)\n\n\u7ecf\u8fc7\u68c0\u67e5\u53d1\u73b0\u6ca1\u6709\u7528 $VIS$ \u6570\u7ec4\uff0c \u5f53\u5373\u5f00\u4e86\u4e00\u56db\u7ef4\u6570\u7ec4\u8868\u793a\u72b6\u6001\uff0c\u7ed3\u679c\u76f4\u63a5\u5c31\u8fc7\u4e86\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\uff08\u4e0d\u7528\u4e91\u526a\u8d34\u677f\u4e86\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\ninline int read(){\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9') f=ch=='-'?-1:1,ch=getchar();\n\twhile(ch>='0'&&ch<='9') x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\treturn x*f;\n}\ninline void print(int x){\n\tchar P[105];int w=0;if(x==0){putchar('0');return;}\n\tif(x<0) putchar('-'),x=-x;\n\twhile(x) P[++w]=x%10+'0',x/=10;\n\tfor(int i=w; i>=1; i--) putchar(P[i]);\n}\nstruct node {\n\tint x, y;\n} One_start, Two_start;\nqueue<node> one, two;\nqueue<int> q;\nconst int N = 30;\nconst int dx[] = {0, 0, 1, -1},\n\t\t  dy[] = {1, -1, 0, 0},\n\t\t  Dx[] = {0, 0, 1, -1},\n\t\t  Dy[] = {-1, 1, 0, 0};\nint n, m;\nbool vis[40][40][40][40];\nchar ch[N + 1][N + 1];\ninline bool  check(int x, int y) {\n\treturn x >= 1 && x <= n && y >= 1 && y <= m && ch[x][y] != 'X';\n}\ninline void bfs() {\n\tone.push(One_start), two.push(Two_start); q.push(0);\n\twhile (\"MLE\") {\n\t\tif (one.empty()) break;\n\t\tif (two.empty()) break;\n\t\tif (q.empty()) break;\n\t\tint cnt = q.front(); q.pop();\n\t\tnode o = one.front(), t = two.front();one.pop();two.pop();\n\t\tif (vis[o.x][o.y][t.x][t.y]) continue;\n\t\tvis[o.x][o.y][t.x][t.y] ^= 1;\n\t\tif (o.x == t.x && o.y == t.y && ch[o.x][o.y] == 'T') {\n\t\t\tprint(cnt);\n\t\t\texit(0);\n\t\t}\n\t\tfor (int i = 0; i < 4; i++) {\n\t\t\tint x = dx[i] + o.x, y = dy[i] + o.y,\n\t\t\t\tX = Dx[i] + t.x, Y = Dy[i] + t.y;\n\t\t\tif (check(x, y) && check(X, Y)) {\n\t\t\t\tif (ch[x][y] == '#') \n\t\t\t\t\tone.push({o.x, o.y});\n\t\t\t\telse \n\t\t\t\t\tone.push({x, y});\n\t\t\t\tif (ch[X][Y] == '#') \n\t\t\t\t\ttwo.push({t.x, t.y});\n\t\t\t\telse \n\t\t\t\t\ttwo.push({X, Y});\n\t\t\t\tq.push(cnt + 1);\n\t\t\t}\n\t\t}\n\t}\n}\nint main () {\n\tn = read(), m = read();\n\tfor (int i = 1; i <= n; i++) for (int j = 1; j <= m; j++) cin >> ch[i][j];\n\tfor (int i = 1; i <= n; i++) for (int j = 1; j <= m; j++) {\n\t\tif (ch[i][j] == 'G') One_start = {i, j};\n\t\tif (ch[i][j] == 'M') Two_start = {i, j};\n\t}\n\tbfs();\n\tputs(\"no\");\n\treturn 0;\n}\n```\n\n",
        "postTime": 1634211857,
        "uid": 492627,
        "name": "\u843d\u82b1\u6708\u6726\u80e7",
        "ccfLevel": 0,
        "title": "P3855 [TJOI2008]Binary Land"
    },
    {
        "content": "** _~~\u53c8\u662f\u4e00\u9053\u4e0d\u9519\u7684BFS\u7ec3\u4e60\u9898~~_ **\n## \u672c\u9898\u7279\u8272\n\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u6765\u770b\u770b\u672c\u9898\u7279\u8272\uff08\u6bd2\u7624\uff09\u7684\u70b9\uff1a**\u4e24\u53ea\u4f01\u9e45**\n\n**\u4e00\uff0c\u4e24\u53ea\u4f01\u9e45\u7684\u72b6\u6001\u5904\u7406**\n\n\u6b38\u563f\uff0c\u8fd9\u5c31\u4e0e\u5e73\u5e38\u9047\u5230\u7684\u5355\u4e2a\u5bf9\u8c61\u8fd0\u52a8\u590d\u6742\u4e86\u4e00\u70b9\uff0c\u4e3b\u8981\u590d\u6742\u5728\uff1a**\u5982\u4f55\u5bf9\u4e24\u53ea\u4f01\u9e45\u8fdb\u884c\u540c\u65f6\u5904\u7406**\n\n\u56e0\u4e3a\u8981\u540c\u65f6\u5904\u7406\uff0c\u8fd8\u8981\u8fdb\u884c\u5165\u961f\u64cd\u4f5c\uff0c\u6240\u4ee5\u81ea\u7136\u60f3\u5230\u4e24\u53ea\u4f01\u9e45\u7684\u5750\u6807\u5fc5\u987b\u5c01\u88c5\u5728**\u540c\u4e00\u4e2a\u7ed3\u6784\u4f53\u4e2d**\u3002\n\n**\u4e8c\uff0c\u5224\u5b9a\u5165\u961f**\n\n\u73b0\u5728\u53ef\u4ee5\u8fdb\u884c\u540c\u65f6\u64cd\u4f5c\u4e86\uff0c\u4f46\u662f\u56e0\u4e3a\u6709\u4e24\u4e2a\u5bf9\u8c61\uff0c\u518d\u7ed3\u5408\u9898\u76ee\u7684\u9650\u5236\u6761\u4ef6\u53ef\u4ee5\u5f97\u5230\u4e24\u6761\u5224\u5b9a\u5165\u961f\u7684\u57fa\u672c\u89c4\u5f8b\uff1a\n\n**1.\u53ea\u8981\u6709\u4e00\u4f01\u9e45\u79fb\u52a8\u5c31\u5c5e\u4e8e\u4e00\u79cd\u65b0\u7684\u72b6\u6001\uff0c\u5e94\u8be5\u5165\u961f\u3002**\n\n\u4e5f\u5c31\u662f\u8981\u5b9e\u73b0\u4e00\u53ea\u4f01\u9e45\u649e\u5899\u65f6\u7684\u201c**\u9000\u6b65**\u201d\u64cd\u4f5c\n\n**2.\u53ea\u8981\u6709\u4e00\u53ea\u4f01\u9e45\u4f1a\u78b0\u5230\u8718\u86db\u7f51\uff0c\u6b64\u72b6\u6001\u4f5c\u5e9f\u3002**\n\n\u8fd9\u4e24\u70b9\u5b9e\u73b0\u4e86\uff0c\u90a3\u4e48\u5165\u961f\u64cd\u4f5c\u5c31\u57fa\u672c\u6ca1\u6709\u95ee\u9898\u3002\n\n**\u4e09\uff0c\u5173\u4e8e\u8bfb\u5165\u5730\u56fe**\n\n\u6211\u7528\u7684\u8bfb\u5165\u65b9\u6cd5\u662f\u5b57\u7b26\u8f6cAscll\u7801\u5728\u5904\u7406\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7a0d\u5fae\u6709\u4e9b\u9ebb\u70e6\uff0c\u4e0d\u63a8\u8350\u4f7f\u7528\u3002\uff08\u7eaf\u5c5e\u672c\u4eba\u6076\u4e60\uff09\n\n\u5168\u4ee3\u7801\u5982\u4e0b\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<queue>\nusing namespace std;\nconst int maxn=50;\nint map[40][40];\nint dir[4][4]={-1,0,-1,0,1,0,1,0,0,-1,0,1,0,1,0,-1};\nstruct node{\n\tint mx,my,gx,gy;\n\tint step;\n};\nbool checkm(node w){\n\tif(map[w.mx][w.my]==13||map[w.mx][w.my]==119) return 1;\n\telse return 0;\n}\nbool checkg(node w){\n\tif(map[w.gx][w.gy]==13||map[w.gx][w.gy]==119) return 1;\n\telse return 0;\n}\nbool vis[maxn][maxn][maxn][maxn];\nint bfs(node start){\n\tqueue<node>q;\n\tq.push(start);\n\tnode now,next;\n\twhile(!q.empty()){\n\t\tnow=q.front();\n\t\tfor(int i=0;i<4;i++){\n\t\t\tnext.mx=now.mx+dir[i][0];\n\t\t\tnext.my=now.my+dir[i][1];\n\t\t\tnext.gx=now.gx+dir[i][2];\n\t\t\tnext.gy=now.gy+dir[i][3];\n\t\t\tnext.step=now.step+1;\n\t\t\tif(map[next.gx][next.gy]==123||map[next.mx][next.my]==123) \n\t\t\t\tcontinue;\n\t\t\tif(!checkm(next)){\n\t\t\t\tnext.mx-=dir[i][0];\n\t\t\t\tnext.my-=dir[i][1];\n\t\t\t}\n\t\t\tif(!checkg(next)){\n\t\t\t\tnext.gx-=dir[i][2];\n\t\t\t\tnext.gy-=dir[i][3];\n\t\t\t}\n\t\t\tif(map[next.gx][next.gy]==119&&map[next.mx][next.my]==119)\n\t\t\t\treturn next.step;\n\t\t\tif(vis[next.gx][next.gy][next.mx][next.my]==0){\n\t\t\t\tq.push(next); \n\t\t\t\tvis[next.gx][next.gy][next.mx][next.my]=1;\n\t\t\t//\tprintf(\"%d \",i);\n\t\t\t} \n\t\t\t\t\n\t\t}\n\t\tq.pop();\n\t}\n\treturn -1;\n}\nnode st;\nint main(){\n\tint r,c;\n\tscanf(\"%d%d\",&r,&c);\n\tfor(int i=1;i<=r;i++){\n\t\tstring a;\n\t\tcin>>a;\n\t\tfor(int j=1;j<=c;j++) {\n\t\t\tmap[i][j]=a[j-1]^35; \n\t\t\tif(map[i][j]==100){\n\t\t\t\t map[i][j]=13;\n\t\t\t\t st.mx=i;st.my=j;st.step=0;\n\t\t\t}\n\t\t\tif(map[i][j]==110){\n\t\t\t\t map[i][j]=13;\n\t\t\t\t st.gx=i;st.gy=j;st.step=0;\t\n\t\t\t}\n\t\t}\n\t}\n\tvis[st.gx][st.gy][st.mx][st.my]=1;\n\tint ans=bfs(st);\n\tif(ans==-1) printf(\"no\");\n\telse printf(\"%d\",ans);\n\n\treturn 0;\n} \n```\n\n\n\n",
        "postTime": 1618921699,
        "uid": 235637,
        "name": "\u501f\u6211\u6614\u65e5\u70ed\u5ff1",
        "ccfLevel": 0,
        "title": "3855\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u5e94\u8be5\u6539\u4e00\u4e0b\u96be\u5ea6\n\n~~\u611f\u89c9\u50cf\u6076\u610f\u8bc4\u5206~~\n\n\u524d\u9762\u6709\u4e00\u4f4d\u5927\u4f6c\u8fc7\u4e86\n\n\u56e0\u4e3a\u6709\u9898\u610f \uff1a\n\n\u9898\u76ee\u63cf\u8ff0\n\n\u8bf7\u7f16\u5199\u7a0b\u5e8f\u627e\u51fa\u5b8c\u6210\u4efb\u52a1\u6240\u9700\u7684**\u6700\u5c11\u7684\u64cd\u4f5c\u6b65\u6570**\u3002\u5982\u679c\u65e0\u6cd5\u5b8c\u6210\u76ee\u6807\uff0c\u8f93\u51fa\u201cno\u201d\u3002\n\n\u6211\u4e5f\u6765\u7528BFS\u8ddf\u4e00\u6ce2\n\n\u9996\u5148 \u8fd9\u662f\u4e00\u9053\u4e0d\u592a\u5bfb\u5e38\u7684\u641c\u7d22\n\n\u4e0d\u540c\u4e8e\u6709\u4e24\u4e2a\u4f01\u9e45\u540c\u65f6\u884c\u8d70\n\n\u90a3\u4e48\u5982\u4f55\u8868\u793a\u8282\u70b9\u7684\u4fe1\u606f\u5462\n\n\u8fd9\u4e2a\u4e0d\u96be \n\nx1,y1(\u8868\u793a\u7b2c\u4e00\u53ea\u4f01\u9e45\u7684\u4f4d\u7f6e\uff09,\n\nx2,y2\uff08\u8868\u793a\u7b2c\u4e8c\u53ea\u4f01\u9e45\u7684\u4f4d\u7f6e\uff09,\n\nstep\uff08\u8868\u793a\u6269\u5c55\u5230\u8fd9\u4e2a\u8282\u70b9\u6240\u9700\u7684\u6b65\u6570\uff09\n\n\u5c01\u88c5\u5728\u4e00\u4e2a\u7ed3\u6784\u4f53\u91cc\n\n\u4e4b\u540e\u7528\u56db\u7ef4\u7684vis\u6570\u7ec4\u8868\u793a\u8282\u70b9\u662f\u5426\u6269\u5c55\u5230\n\n\u4e8c\u7ef4\u662f\u4e0d\u884c\u7684\n\n\u56e0\u4e3a\u4e00\u53ea\u4f01\u9e45\u8d70\u5230\uff08x,y)\u65f6\n\n\u53e6\u4e00\u53ea\u4f01\u9e45\u53ef\u4ee5\u5728\u8bb8\u591a\u4e0d\u540c\u7684\u4f4d\u7f6e\u4e0a\n\n\u6700\u540e\u662f\u5173\u4e8e\u4e24\u53ea\u4f01\u9e45\u7684\u884c\u8d70 \u4ee5\u53ca\u5bf9\u5899\u548c\u8718\u86db\u7f51\u7684\u5224\u65ad\n\n\u65b9\u5411\u4e0d\u8981\u641e\u6df7 \u903b\u8f91\u8981\u6e05\u6670\n\n\u6700\u540e\u662f\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,s1x,s1y,s2x,s2y;\nstruct mmp\n{\n    int x1,y1,x2,y2,step;\n}f,v;\nqueue <mmp> q;\nchar Map[35][35];\nbool vis[35][35][35][35];\nint l1[4][2]={{1,0},{0,1},{-1,0},{0,-1}};\nint l2[4][2]={{1,0},{0,-1},{-1,0},{0,1}};\nint bfs()\n{\n    vis[f.x1][f.y1][f.x2][f.y2]=1;\n    q.push(f);\n    while(!q.empty())\n    {\n        f=q.front(); q.pop();\n        if(Map[f.x1][f.y1]=='T'&&Map[f.x2][f.y2]=='T') return f.step;\n        //cout<<f.x1<<\" \"<<f.y1<<\" \"<<f.x2<<\" \"<<f.y2<<\" \"<<f.step<<endl;\n        for(int i=0;i<4;i++)\n        {\n            v.x1=f.x1+l1[i][0];\n            v.y1=f.y1+l1[i][1];\n            v.x2=f.x2+l2[i][0];\n            v.y2=f.y2+l2[i][1];\n            v.step=f.step+1;\n            if(v.x1<1||v.x1>n||v.y1<1||v.y1>m||v.x2<1||v.x2>n||v.y2<1||v.y2>m) continue;\n            if(Map[v.x1][v.y1]=='#') v.x1=f.x1,v.y1=f.y1;\n            if(Map[v.x2][v.y2]=='#') v.x2=f.x2,v.y2=f.y2;\n            if(Map[v.x1][v.y1]=='X'||Map[v.x2][v.y2]=='X') continue;\n            if(vis[v.x1][v.y1][v.x2][v.y2]) continue;\n            vis[v.x1][v.y1][v.x2][v.y2]=1; q.push(v);\n        }\n    } \n    return -1;\n}\nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n     for(int j=1;j<=m;j++)\n      {\n      \t  cin>>Map[i][j];\n      \t  if(Map[i][j]=='G') f.x1=i,f.y1=j;\n      \t  if(Map[i][j]=='M') f.x2=i,f.y2=j;\n      }\n    int ans=bfs();\n    if(ans==-1) cout<<\"no\"<<endl;\n      else cout<<ans<<endl;\n    return 0;\n}\n```\n~~\u4e0d\u8981\u5728\u610f\u5947\u602a\u7684\u7ed3\u6784\u4f53\u7684\u540d\u5b57~~\n\n\u6700\u540e\u6e29\u99a8\u63d0\u793a\u60a8\uff1a\n\nAC\u5343\u4e07\u6761 \u4ed4\u7ec6\u7b2c\u4e00\u6761\n\n\u6ce8\u91ca\u6ca1\u6ce8\u91ca \u7ea2\u5149\u4e24\u884c\u6cea\n\n\u6211\u5c31\u56e0\u6b64WA\u4e86\u4e00\u6b21\u6392\u67e5\u4e86 1 hour",
        "postTime": 1560305085,
        "uid": 100114,
        "name": "hater",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3855 \u3010[TJOI2008]Binary Land\u3011"
    },
    {
        "content": "$\\tt{upd \\ on \\ 2021/10/16}$\uff1a\u4fee\u6539\u9519\u522b\u5b57\n\n$\\tt{upd \\ on \\ 2021/10/17}$\uff1a\u5220\u9664\u65e0\u610f\u4e49\u5185\u5bb9\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P3855)\n\n## $Part 1$\uff1a\u8bfb\u9898\n\n\u6709\u4e24\u53ea\u4f01\u9e45\u53eb\u505a $G$ \u548c $M$\uff0c\u79fb\u52a8\u65f6\u4e0a\u4e0b\u540c\u5411\u3001\u5de6\u53f3\u76f8\u53cd\uff0c\u8d70\u5411\u5899\u58c1\u65f6\u4e0d\u4f1a\u79fb\u52a8\uff0c\u8d70\u5230\u8718\u86db\u7f51\u4f1a $\\tt{Game \\ Over}$\uff0c\u6c42\u540c\u65f6\u8d70\u5411\u7ec8\u70b9\u6240\u9700\u6700\u5c11\u6b65\u6570\u3002\u65e0\u89e3\u8f93\u51fa `no`\u3002\n\n\u6709\u51e0\u70b9\u9700\u8981\u6ce8\u610f\uff1a\n\n- \u6709\u4e24\u53ea\u4f01\u9e45\u540c\u65f6\u8d70\u3002\n\n\u5904\u7406\u65b9\u6cd5\uff1a\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c`gx`\u3001`gy` \u91cc\u9762\u5b58 $G$ \u7684\u5750\u6807\uff0c`mx`\u3001`my` \u91cc\u9762\u5b58 $M$ \u7684\u5750\u6807\u3002\n\n- \u5728\u6309\u4e0b\u5de6\u952e\u65f6\uff0c$G$ \u4f1a\u5411\u53f3\u8d70\uff0c$M$ \u4f1a\u5411\u5de6\u8d70\u3002\u53cd\u4e4b\u4ea6\u7136\u3002\n\n\u5904\u7406\u65b9\u6cd5\uff1a\u5728\u9884\u5904\u7406\u79fb\u52a8\u6570\u7ec4\u65f6\uff0c\u5c06 $G$ \u548c $M$ \u5de6\u53f3\u79fb\u52a8\u7684\u4f4d\u7f6e\u98a0\u5012\u3002\n\n- \u5982\u679c\u6709\u4e00\u53ea\u4f01\u9e45\u88ab\u5899\u6321\u4f4f\uff0c\u5b83\u5c31\u52a8\u4e0d\u4e86\u4e86\u3002\n\n\u5904\u7406\u65b9\u6cd5\uff1a\u5148\u8d70\u8fc7\u53bb\uff0c\u662f\u969c\u788d\u518d\u8d70\u56de\u6765\u3002\n\n- \u5728\u76f8\u5411\u8fd0\u52a8\u65f6\u4ed6\u4eec\u53ef\u4ee5\u201c\u7a7f\u8fc7\u201d\n\n\u5904\u7406\u65b9\u6cd5\uff1a\u4e0d\u7528\u7ba1\uff0c\u6b63\u5e38\u8d70\uff08\u5c11\u4e86\u4e00\u4e2a\u7279\u5224\u6761\u4ef6\uff09\u3002\n\n- \u6709\u8718\u86db\u7f51\u3002\n\n\u5904\u7406\u65b9\u6cd5\uff1a\u8d70\u5230\u8718\u86db\u7f51\uff0c\u5c31\u662f\u4e00\u4e2a\u4e0d\u53ef\u884c\u72b6\u6001\u3002\n\n## $Part 2$\uff1a\u601d\u8def\n\n......\u5199 `bfs` \u677f\u5b50\u3002~~\u8fd9\u4e48\u8bf4\u4f1a\u4e0d\u4f1a\u6709\u4e9b\u6577\u884d\uff1f~~\n\n\u5177\u4f53\u601d\u8def\u89c1\u4ee3\u7801\u3002\n\n## $Part 3$\uff1a\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nstruct node\n{\n    //G\u7684\u5750\u6807\uff0cM\u7684\u5750\u6807\uff0c\u6b65\u6570\n    int gx, gy, mx, my, st;\n} q[1000001];\n\n//\u961f\u5217\u8bb0\u5f97\u5b9a\u4e49\u5927\u70b9\uff0c\u5426\u5219\u4f1aRE+WA\n\n//\u5730\u56fe\u5927\u5c0f\uff0cG\u8d77\u70b9\u5750\u6807\uff0cM\u8d77\u70b9\u5750\u6807\uff0c\u7ec8\u70b9\u5750\u6807\nint n, m, Gx, Gy, Mx, My, Tx, Ty;\n\n//G\u7684\u79fb\u52a8\u6570\u7ec4\nint gdx[] = {1, 0, -1, 0}, gdy[] = {0, 1, 0, -1};\n\n//M\u7684\u79fb\u52a8\u6570\u7ec4\nint mdx[] = {1, 0, -1, 0}, mdy[] = {0, -1, 0, 1};\n\n//\u5224\u91cd\u6570\u7ec4\uff0c\u611f\u8c22\u6570\u636e\u8303\u56f4\nbool vis[31][31][31][31];\n\n//\u5730\u56fe\nchar mp[31][31];\n\n//\u5224\u65ad\u80fd\u5426\u8d70\nbool check_way (int ggx, int ggy, int mmx, int mmy)\n{\n    if (mp[ggx][ggy] == 'X' || mp[mmx][mmy] == 'X' || vis[ggx][ggy][mmx][mmy])\n        return 0;\n    return 1;\n}\n\n//\u5957\u677f\u5b50\nvoid bfs()\n{\n    //\u6211\u4e60\u60ef l \u6307\u9488\u6307\u5411\u961f\u5934\u524d, r \u6307\u9488\u6307\u5411\u672b\u5c3e\n    int l = 0, r = 0;\n    q[++r] = {Gx, Gy, Mx, My, 0};\n    \n    while (l < r)\n    {\n        node tmp = q[++l];\n        \n        //\u5230\u7ec8\u70b9\u4e86\n        if (tmp.gx == tmp.mx && tmp.gy == tmp.my && tmp.gx == Tx && tmp.gy == Ty)\n        {\n            cout << tmp.st << endl;\n            return;\n        }\n        for (int i = 0; i < 4; i++)\n        {\n            int dgx = tmp.gx + gdx[i], dgy = tmp.gy + gdy[i];\n            int dmx = tmp.mx + mdx[i], dmy = tmp.my + mdy[i];\n            \n            //\u662f\u5899\uff1f\u56de\u6765\uff01\n            if (mp[dgx][dgy] == '#')\n                dgx = tmp.gx, dgy = tmp.gy;\n            \n            //\u540c\u4e0a\n            if (mp[dmx][dmy] == '#')\n                dmx = tmp.mx, dmy = tmp.my;\n            \n            //\u4e24\u8fb9\u90fd\u662f\u5899\uff08\u4e00\u6b65\u6ca1\u8d70\uff09\u6216\u65e0\u6cd5\u884c\u8d70\n            if ((dgx == tmp.gx && dgy == tmp.gy && dmx == tmp.mx && dmy == tmp.my) || !check_way (dgx, dgy, dmx, dmy))\n                continue;\n            q[++r] = {dgx, dgy, dmx, dmy, tmp.st + 1};\n            vis[dgx][dgy][dmx][dmy] = 1;\n        }\n    }\n    cout << \"no\";\n}\n\nint main()\n{\n    cin >> n >> m;\n    for (int i = 1; i <= n; i++)\n    {\n        for (int j = 1; j <= m; j++)\n        {\n            cin >> mp[i][j];\n            if (mp[i][j] == 'G')\n                Gx = i, Gy = j;\n            else if (mp[i][j] == 'M')\n                Mx = i, My = j;\n            else if (mp[i][j] == 'T')\n                Tx = i, Ty = j;\n        }\n    }\n    bfs();\n    return 0;\n}\n```\n\n------------\n### \u5b8c\u7ed3\u6492\u82b1*\u2605,\u00b0*:.\u2606(\uffe3\u25bd\uffe3)/$:*.\u00b0\u2605* \u3002",
        "postTime": 1634201291,
        "uid": 365751,
        "name": "Mr_\u7f57",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P3855 [TJOI2008]Binary Land"
    },
    {
        "content": "\u5173\u4e8e\u5404\u79cd\u8ff7\u5bab\u7684\u6700\u77ed\u8def\uff0c\u5f53\u7136\u662f\u6beb\u4e0d\u72b9\u8c6b\u7684BFS  \n\u4f46\u662f\u672c\u9898\u7684BFS\uff0c\u8fd8\u662f\u6709\u51e0\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9  \n- \u5982\u679c\u4f60\u6309\u201c\u5de6\u201d\u65b9\u5411\u952e\uff0c\u5219Malon\u5411\u5de6\u79fb\u52a81\u683c\uff0c\u540c\u65f6Gurin\u5411\u53f3\u79fb\u52a81\u683c\uff1b\u5982\u679c\u4f60\u6309\u201c\u53f3\u201d\u65b9\u5411\u952e\uff0c\u5219Malon\u5411\u53f3\u79fb\u52a81\u683c\n- \u5982\u679c\u67d0\u53ea\u4f01\u9e45\u88ab\u969c\u788d\u6321\u4f4f\uff0c\u5b83\u5c31\u4e0d\u4f1a\u79fb\u52a8\u4e86\uff08\u6211\u5f00\u59cb\u6ca1\u770b\u89c1\u3002\u3002\u3002\uff09\n- \u5728\u76f8\u5411\u8fd0\u52a8\u65f6\u4ed6\u4eec\u53ef\u4ee5\u201c\u7a7f\u8fc7\u201d  \n\n\u6211\u611f\u5230\u552f\u4e00\u7684\u96be\u70b9\u5c31\u662f\u88ab\u969c\u788d\u6321\u4f4f\u540e\u5c31\u4e0d\u4f1a\u79fb\u52a8  \n\u56e0\u4e3a\u4ed6\u4e0d\u4f1a\u79fb\u52a8\uff0c\u6211\u4eec\u5148\u5047\u8bbe\u4ed6\u79fb\u52a8\u5230\u4e86\u4e0b\u4e00\u4e2a\u70b9\uff0c\u82e5\u662f\u969c\u788d\uff0c\u518d\u9000\u56de\u5c31\u597d\u4e86qwq  \n\u9996\u5148\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\n```cpp\nstruct node { \n    int Gx,Gy,Mx,My,num; \n};\nnode p,f;\n//Gx\uff0cGy\u662fGurin\u7684\u4f4d\u7f6e\n//Mx\uff0cMy\u662fMalon\u7684\u4f4d\u7f6e\n//num\u662f\u8d70\u7684\u6b65\u6570\n```\n\u5269\u4e0b\u7684\u5b9a\u4e49\n```cpp\nint r,c;//\u56fe\u7684\u5927\u5c0f\nchar a[32][32];//\u5b58\u56fe\nbool v[32][32][32][32];\n//\u7b2c\u4e00\u7ef4\u662fGx,\u7b2c\u4e8c\u7ef4\u662fGy\n//\u7b2c\u4e09\u7ef4\u662fMx,\u7b2c\u56db\u7ef4\u662fMy\nconst int X[4] = {1,-1,0,0};\nconst int Y[4] = {0,0,1,-1};\n//\u4e24\u4e2a\u65b9\u5411\u6570\u7ec4\nqueue<node> q;\n//\u5e7f\u641c\u7528\u7ed3\u6784\u4f53\n```\n\u6beb\u65e0\u65b0\u610f\u7684\u8f93\u5165\u8f93\u51fa\n```cpp\nvoid _in()\n{\n\tcin >> r >> c;\n\tfor ( int i = 1; i <= r; i++ )\n\t    for ( int j = 1; j <= c; j++ )\n\t    {\n\t    \tcin >> a[i][j];//\u5c06\u4e24\u70b9\u5b58\u4e0b\u6765\n\t    \tif ( a[i][j] == 'G' ) p.Gx = i,p.Gy = j;\n\t    \tif ( a[i][j] == 'M' ) p.Mx = i,p.My = j;\n\t\t}\n\tv[p.Gx][p.Gy][p.Mx][p.My] = 1;//\u6b64\u56db\u70b9\u7684\u7ec4\u5408\u5df2\u5230\u8fbe\uff01\n\tq.push(p);//\u5f39\u5165\u961f\u5217\n}\n```\n\u4e0b\u9762\u662f\u5e7f\u641c\n```cpp\nvoid bfs()//\u91cd\u70b9\uff01\uff01\uff01\n{\n\twhile ( !q.empty() )//\u5e7f\u641c\u57fa\u64cd\n\t{\n\t\tp = q.front() ;//\u53d6\u961f\u5934\u5143\u7d20\n\t\tq.pop() ;//\u5f39\u51fa\u961f\u5934\n\t\tfor ( int i = 0; i < 4; i++ )\n\t\t{\n\t\t\tf = p;\n\t\t\tf.Gx += X[i] , f.Gy += Y[i];\n\t\t\tf.Mx += X[i] , f.My -= Y[i];\n\t\t\tf.num++;//\u5c06f\uff08\u4e0b\u4e00\u4e2a\u70b9\uff09\u8bb0\u5f55\u4e0b\u6765\n\t\t\tif ( a[f.Gx][f.Gy] == '#' ) f.Gx -= X[i] , f.Gy -= Y[i];\n\t\t\tif ( a[f.Mx][f.My] == '#' ) f.Mx -= X[i] , f.My += Y[i];\n            //\u82e5\u6b64\u70b9\u8fbe\u4e0d\u5230\uff0c\u5c31\u76f8\u5f53\u4e8e\u88ab\u6321\u4f4f\uff0c\u9000\u56de\u4e0a\u4e00\u4e2a\u70b9\n\t\t\tif ( a[f.Gx][f.Gy] == 'T' && a[f.Mx][f.My] == 'T' )\n\t\t\t    cout << f.num , exit(0);//\u5f53\u5230\u8fbe\u7ec8\u70b9\uff0c\u8f93\u51fa\u5e76\u7ed3\u675f\u7a0b\u5e8f\n                //exit(0)\u5728algorithm\u91cc\uff0c\u53ef\u76f4\u63a5\u5c06\u7a0b\u5e8f\u5f3a\u5236\u8fd4\u56de0\uff08\u7ed3\u675f\uff09\n\t\t\tif ( f.Gx <= r && f.Gy <= c && f.Mx <= r && f.My <= c )\n            //\u8d85\u51fa\u56fe\u8303\u56f4\u65f6\uff0c\u8fd4\u56de\n\t\t\t    if ( f.Gx >= 1 && f.Gy >= 1 && f.Mx >= 1 && f.My >= 1 )\n                ////\u8d85\u51fa\u56fe\u8303\u56f4\u65f6\uff0c\u8fd4\u56de\n\t\t\t        if ( a[f.Gx][f.Gy] != 'X' && a[f.Mx][f.My] != 'X' )\n                    //\u4e3a\u8718\u86db\u7f51\u65f6\uff0c\u8fd4\u56de\n\t\t\t            if ( !v[f.Gx][f.Gy][f.Mx][f.My] )\n                        //\u6b64\u70b9\u8d70\u8fc7\u65f6\uff0c\u8fd4\u56de\n\t\t\t                v[f.Gx][f.Gy][f.Mx][f.My] = 1 , q.push(f);\n                            //\u6807\u8bb0\u6b64\u70b9\u5230\u8fbe\u8fc7\uff0c\u5f39\u5165\u961f\u5217\n\t\t}\n\t}\n\tcout << \"no\";//\u5230\u4e0d\u4e86\u7ec8\u70b9\uff08\u4e3a\u4ec0\u4e48\u6e38\u620f\u4f1a\u65e0\u89e3\uff1fqwq\uff09\n\texit(0);//\u5f3a\u5236\u7ed3\u675f\n}\n```\n\u9ad8\u5927\u5a01\u731b\u7684\u4e3b\u51fd\u6570\n```cpp\nint main()\n{\n\t_in ();\n\tbfs ();\n}\n```\n\u5b8c\u6574\u4ee3\u7801\uff0c\u7801\u98ce\u8f83\u4e11\uff0c\u4e0d\u559c\u52ff\u55b7\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <queue>\nusing namespace std;\nstruct node { \n    int Gx,Gy,Mx,My,num; \n};\nnode p,f;\nint r,c;\nchar a[32][32];\nbool v[32][32][32][32];\nconst int X[4] = {1,-1,0,0};\nconst int Y[4] = {0,0,1,-1};\nqueue<node> q;\nvoid bfs()\n{\n\twhile ( !q.empty() )\n\t{\n\t\tp = q.front() ;\n\t\tq.pop() ;\n\t\tfor ( int i = 0; i < 4; i++ )\n\t\t{\n\t\t\tf = p;\n\t\t\tf.Gx += X[i] , f.Gy += Y[i];\n\t\t\tf.Mx += X[i] , f.My -= Y[i];\n\t\t\tf.num++;\n\t\t\tif ( a[f.Gx][f.Gy] == '#' ) f.Gx -= X[i] , f.Gy -= Y[i];\n\t\t\tif ( a[f.Mx][f.My] == '#' ) f.Mx -= X[i] , f.My += Y[i];\n\t\t\tif ( a[f.Gx][f.Gy] == 'T' && a[f.Mx][f.My] == 'T' )\n\t\t\t    cout << f.num , exit(0);\n\t\t\tif ( f.Gx <= r && f.Gy <= c && f.Mx <= r && f.My <= c ) \n\t\t\t    if ( f.Gx >= 1 && f.Gy >= 1 && f.Mx >= 1 && f.My >= 1 )\n\t\t\t        if ( a[f.Gx][f.Gy] != 'X' && a[f.Mx][f.My] != 'X' )\n\t\t\t            if ( !v[f.Gx][f.Gy][f.Mx][f.My] )\n\t\t\t                v[f.Gx][f.Gy][f.Mx][f.My] = 1 , q.push(f);\n\t\t}\n\t}\n\tcout << \"no\";\n\texit(0);\n}\nvoid _in()\n{\n\tcin >> r >> c;\n\tfor ( int i = 1; i <= r; i++ )\n\t    for ( int j = 1; j <= c; j++ )\n\t    {\n\t    \tcin >> a[i][j];\n\t    \tif ( a[i][j] == 'G' ) p.Gx = i,p.Gy = j;\n\t    \tif ( a[i][j] == 'M' ) p.Mx = i,p.My = j;\n\t\t}\n\tv[p.Gx][p.Gy][p.Mx][p.My] = 1;\n\tq.push(p);\n}\nint main()\n{\n\t_in ();\n\tbfs ();\n}\n```",
        "postTime": 1567222694,
        "uid": 128246,
        "name": "Konnyaku_ljc",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3855 \u3010[TJOI2008]Binary Land\u3011"
    },
    {
        "content": "### 1 \u601d\u8def\n\n\u8fd9\u9053\u9898\u53ef\u4ee5\u4f7f\u7528\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u89e3\u51b3\u3002\n\n\u9996\u5148\uff0c\u5b58\u597d\u5730\u56fe\uff0c\u5b58\u597d\u8d77\u70b9\u5750\u6807\uff08\u4e24\u4e2a\u70b9\uff09\uff0c\u5b58\u597d\u7ec8\u70b9\u5750\u6807\uff08\u4e00\u4e2a\u70b9\uff09\u3002\n\n\u7136\u540e\uff0c\u5bf9\u4e8e\u6bcf\u79cd\u60c5\u51b5\u5206\u522b\u679a\u4e3e\uff0c\u5982\u679c\u5230\u8fbe\u8718\u86db\u7f51\u5c31\u4e0d\u63a5\u53d7\u6b64\u547d\u4ee4\uff0c\u5982\u679c\u649e\u5899\u5c31\u4e0d\u53d8\u5316\u5750\u6807\u3002\n\n\u6700\u540e\uff0c\u5230\u8fbe\u7ec8\u70b9\u5c31\u80fd\u8f93\u51fa\u7b54\u6848\u4e86\u3002\n\n\u53e6\u5916\uff0c\u521d\u59cb\u5316 $ans$ \u4e3a $-1$ \u53ef\u4ee5\u5904\u7406\u65e0\u89e3\u7684\u60c5\u51b5\u3002\n\n\u770b\u6e05\u695a\u6211\u7684\u56db\u7ef4\u6570\u7ec4\u54e6\uff0c\u5176\u5b9e\u4e0d\u590d\u6742\u3002\n\n### 2 \u4ee3\u7801\u4e0e\u8bb0\u5f55\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<queue>\nusing namespace std;\n#define max_n 30\nint n;\nint m;\nint g[max_n+2][max_n+2];\nint sx1,sy1;\nint sx2,sy2;\nint ex,ey;\nbool vis[max_n+2][max_n+2][max_n+2][max_n+2];\nstruct W{\n\tint x1,y1,x2,y2,t;\n}f;\nqueue<W>q;\nconst int dx[4]={-1,1,0,0};\nconst int dy1[4]={0,0,-1,1};\nconst int dy2[4]={0,0,1,-1};\nint ans=-1;\nint main(){\n\t#ifndef ONLINE_JUDGE\n\tfreopen(\"P3855_1.in\",\"r\",stdin);\n\tfreopen(\"P3855_1.out\",\"w\",stdout);\n\t#endif\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i){\n\t\tchar a[max_n+2];\n\t\tscanf(\"%s\",a+1);\n\t\tfor(int j=1;j<=m;++j){\n\t\t\tif(a[j]=='#')g[i][j]=0;\n\t\t\telse if(a[j]=='X')g[i][j]=1;\n\t\t\telse g[i][j]=2;\n\t\t\tif(a[j]=='G'){\n\t\t\t\tsx1=i;\n\t\t\t\tsy1=j;\n\t\t\t}\n\t\t\tif(a[j]=='M'){\n\t\t\t\tsx2=i;\n\t\t\t\tsy2=j;\n\t\t\t}\n\t\t\tif(a[j]=='T'){\n\t\t\t\tex=i;\n\t\t\t\tey=j;\n\t\t\t}\n\t\t}\n\t}\n\tmemset(vis,0,sizeof(vis));\n\tvis[sx1][sy1][sx2][sy2]=true;\n\tq.push((W){sx1,sy1,sx2,sy2,0});\n\twhile(!q.empty()){\n\t\tf=q.front();\n\t\tq.pop();\n\t\tif(f.x1==ex&&f.y1==ey&&f.x2==ex&&f.y2==ey){\n\t\t\tans=f.t;\n\t\t\tbreak;\n\t\t}\n\t\tfor(int d=0,nx1,ny1,nx2,ny2;d<4;++d){\n\t\t\tnx1=f.x1+dx[d];\n\t\t\tny1=f.y1+dy1[d];\n\t\t\tnx2=f.x2+dx[d];\n\t\t\tny2=f.y2+dy2[d];\n\t\t\tif(g[nx1][ny1]==1||g[nx2][ny2]==1)continue;\n\t\t\tif(!g[nx1][ny1]){\n\t\t\t\tnx1=f.x1;\n\t\t\t\tny1=f.y1;\n\t\t\t}\n\t\t\tif(!g[nx2][ny2]){\n\t\t\t\tnx2=f.x2;\n\t\t\t\tny2=f.y2;\n\t\t\t}\n\t\t\tif(vis[nx1][ny1][nx2][ny2])continue;\n\t\t\tvis[nx1][ny1][nx2][ny2]=true;\n\t\t\tq.push((W){nx1,ny1,nx2,ny2,f.t+1});\n\t\t}\n\t}\n\tif(ans==-1)printf(\"no\\n\");\n\telse printf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n[\u8bb0\u5f55\u4f20\u9001\u95e8](https://www.luogu.com.cn/record/58947628)\n\nBy **dengziyue**",
        "postTime": 1633180821,
        "uid": 387840,
        "name": "happy_dengziyue",
        "ccfLevel": 6,
        "title": "P3855\u9898\u89e3"
    }
]
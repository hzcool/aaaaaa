[
    {
        "content": "**\u8ddd\u79bbCSP\u8fd8\u670910\u5929\u6574\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u81ea\u5df1\u7684\u7b97\u6cd5\u80fd\u529b\u5df2\u7ecf\u5d29\u6e83\u4e86\uff0c\u767e\u822c\u65e0\u5948\u4e4b\u4e0b\u5f00\u5237\u9ed1\u6a21\u62df\uff0c\u4e8e\u662f\u5728\u4e09\u5929\u4e4b\u540e\u6709\u4e86\u8fd9\u7bc7\u9898\u89e3**\n\n\u6211\u4eec\u5148\u6574\u7406\u4e00\u4e0b\u9898\u76ee\u5927\u610f\uff1a\n\n1\u3001\u8fd9\u662f\u4e00\u9053\u6a21\u62df\uff0c\u6a21\u62df\u4e00\u79cd\u795e\u5947\u7684\u68cb\u7c7b\u6e38\u620f\n\n2\u3001\u68cb\u76d8\u548c\u68cb\u5b50\u9898\u76ee\u5df2\u7ed9\u51fa\uff0c\u8bb0\u5f97\u591a\u770b\u51e0\u904d\uff08\u5176\u4e2d\u9e2d\u7684\u79fb\u52a8\u65b9\u5f0f\u66f4\u662f\u9700\u8981\u597d\u597d\u7406\u89e3\uff09\n\n3\u3001\u8f93\u5165\u662f\u4e00\u5806\u64cd\u4f5c\uff0c\u628a(a,b)\u4e0a\u7684\u68cb\u79fb\u5230(c,d)\u4e0a\n\n4\u3001\u8f93\u51fa\u5206\u4e24\u79cd\uff1a\u4e0d\u5408\u6cd5\u8f93\u51fa\"Invalid command\"\uff0c\u5408\u6cd5\u5219\u8f93\u51fa\u79fb\u52a8\u7684\u68cb\uff0c\u88ab\u5403\u7684\u68cb\uff0c\u662f\u5426\u5f62\u6210\u5c06\u519b\uff0c\u6e38\u620f\u662f\u5426\u7ed3\u675f\n\n**\u9898\u610f\u68b3\u7406\u5b8c\u6bd5\uff0c\u90a3\u6211\u4eec\u5f00\u59cb\u601d\u7d22\u89e3\u51b3\u8fd9\u9053\u9898\u7684\u65b9\u6cd5**\n\n**1\u3001\u7528\u4e8c\u7ef4\u6570\u7ec4\u5b58\u50a8\u5730\u56fe\uff0c\u7528\u6570\u5b57\u4ee3\u66ff\u6bcf\u4e00\u79cd\u68cb\uff08\u5176\u5b9e\u7528\u5b57\u7b26\u4e5f\u884c\uff0c\u4f46\u6bd4\u8f83\u9ebb\u70e6\uff09**\n\t\n+ \u6211\u4eec\u5927\u53ef\u4ee5\u75281~7\u5206\u522b\u8868\u793a\u738b\uff0c\u58eb\uff0c\u8c61\uff0c\u9a6c\uff0c\u8f66\uff0c\u9e2d\uff0c\u5175\n+ \u56e0\u4e3a\u6709\u7ea2\u84dd\u65b9\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5341\u4f4d\u662f\u5426\u4e3a1\u6765\u5224\u65ad\u662f\u54ea\u4e00\u65b9\n\n**2\u3001\u79fb\u52a8\u6b65\u9aa4**\n\n+ \u770b\u5230\u597d\u591a\u5927\u4f6c\u90fd\u50cf\u641c\u7d22\u90a3\u6837\u5b58\u50a8\u79fb\u52a8\uff0c\u4f46\u6211\u89c9\u5f97\u592a\u9ebb\u70e6\u4e86\uff0c\u8fd8\u4e0d\u5982\u5728\u51fd\u6570\u4e2d\u5224\u65ad\u5f53\u524d\u68cb\u5b50\u662f\u54ea\u4e00\u79cd\uff0c\u518d\u76f4\u63a5\u679a\u4e3e\u79fb\u52a8\u65b9\u5f0f\n\n**3\u3001\u5224\u65ad\u5c06\u519b**\n\n+ \u4e00\u5f00\u59cb\u6211\u7684\u60f3\u6cd5\u662f\u5c06\u79fb\u52a8\u51fd\u6570\u548c\u5c06\u519b\u51fd\u6570\u5408\u6210\u4e00\u4e2a\uff0c\u56e0\u4e3a\u4ed6\u4eec\u90fd\u53ef\u4ee5\u5229\u7528\u68cb\u5b50\u7684\u79fb\u52a8\u5224\u65ad ~~(\u4ece\u800c\u51cf\u5c11\u7801\u91cf)~~ ,\u4f46\u540e\u6765\u5495\u4e86\u6240\u4ee5\u62c6\u6210\u4e86\u4e24\u4e2a\n\n**4\u3001\u8f93\u51fa\u7ed3\u679c**\n\n+ \u8f93\u51fa\u7ed3\u679c\u5176\u5b9e\u4e0d\u662f\u5f88\u590d\u6742\uff0c\u8bb0\u5f55\u8be5\u6b21\u79fb\u52a8\u88ab\u5403\u7684\u68cb\uff0c\u6700\u540e\u8f93\u51fa\u5c31\u662f\u4e86\n\n**\u4e00\u9053\u6a21\u62df\u9898\u672c\u6765\u6ca1\u6709\u4ec0\u4e48\u96be\u5ea6\uff0c\u4f46\u662f\u4e3a\u4ec0\u4e48\u4e5f\u80fd\u6392\u6210\u9ed1\u9898\u5462\uff1f**\n\n+ \u6709\u4e9b\u4eba\u8bf4\uff0c\u6a21\u62df\u9898\u8003\u5bdf\u4ee3\u7801\u80fd\u529b\u554a\uff01 \u6211\u53cd\u5bf9\uff0c\u56e0\u4e3a\u4ee3\u7801\u80fd\u529b\u6307\u660e\u767d\u4e86\u7b97\u6cd5\u540e\u628a\u5b83\u6253\u51fa\u6765\uff0c\u800c\u4e0d\u662f\u5355\u7eaf\u7684\u66b4\u529b ~~(\u50cf\u6211\u5c31\u53ea\u4f1a\u66b4\u529b\u7b97\u6cd5\u5783\u573e)~~\n\n+ \u6709\u4e9b\u4eba\u8bf4\uff0c\u6a21\u62df\u9898\u8003\u5bdf\u4eba\u7684\u8010\u5fc3\u554a\uff01\u6211\u534a\u8d5e\u6210\uff0c\u56e0\u4e3a\u6709\u7684\u6a21\u62df\u9898\u771f\u7684\u662f\u6253\u7740\u6253\u7740\u5c31\u4e0d\u60f3\u505a\u4e86\n\n+ \u90a3\u6a21\u62df\u9898\u8003\u5bdf\u4ec0\u4e48\u5462\uff1f\n\n+ \u6211\u8ba4\u4e3a\u554a\uff0c\u6a21\u62df\u9898\u8003\u5bdf\u4eba\u7684\u6574\u7406\u548c\u903b\u8f91 (\u849f\u84bb\u89c2\u70b9\u5927\u4f6c\u52ff\u55b7)\n\n+ \u4f60\u8981\u540c\u65f6\u8003\u8651\u5f88\u591a\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\u8fd9\u91cc\u9700\u4e0d\u9700\u8981\u7279\u5224\uff0c\u90a3\u91cc\u9700\u4e0d\u9700\u8981return\uff0c\u6700\u540e\u9700\u4e0d\u9700\u8981\u6362\u884c\uff0c\u4e2d\u95f4\u662f\u5426\u8981break\u7b49\u7b49\n\n+ \u6240\u4ee5\uff0c\u6211\u5c06\u4ee5\u849f\u84bb\u7684\u4eb2\u8eab\u4f53\u9a8c\uff0c\u6307\u51fa\u672c\u9898\u5bb9\u6613\u6389\u5751\u7684\u4e00\u4e9b\u5730\u65b9:\n\n**1\u3001 \u6bcf\u6b21\u79fb\u52a8\u7684\u7684\u65f6\u5019\u8bb0\u5f97\u5c06\u539f\u6765\u68cb\u5b50\u6240\u5728\u7684\u4f4d\u7f6e\u6e05\u96f6\uff0c\u5e76\u5904\u7406\u5b83\u8981\u53bb\u7684\u5730\u65b9**\n\n**2\u3001\u6ce8\u610f\u5904\u7406\u7ea2\u84dd\u5173\u7cfb\u7684\u8f6c\u6362\uff0c\u4ee5\u53ca\u68cb\u76d8\u7684\u8fb9\u754c\u95ee\u9898\uff08\u88ab\u5361\u4e00\u6b21\uff09**\n\n**3\u3001\u590d\u5236\u7c98\u8d34\u7684\u65f6\u5019\u8bb0\u5f97\u8fdb\u884c\u5f7b\u5e95\u7684\u4fee\u6539\uff0c\u8981\u4e0d\u7136\u8fd9\u9053\u9898\u90fd\u6253\u5b8c\u4e86\u518d\u53bb\u627e\u975e\u5e38\u75db\u82e6\uff08\u88ab\u5361\u4e09\u6b21\uff0c\u603b\u8ba1\u65f6\u95f4\u4e00\u5929\uff09**\n\n**4\u3001\u738b\u88ab\u6293\u4e86\u4ee5\u540e\u5224\u65ad\u6e38\u620f\u7ed3\u675f\uff0c\u4f46\u540c\u65f6\u4e5f\u8981\u8bb0\u5f55\u662f\u54ea\u4e2a\u738b\u88ab\u6293\u4e86\uff08\u88ab\u5361\u4e00\u6b21\uff09**\n\n**5\u3001\u6bcf\u4e00\u6b21\u79fb\u52a8\u68cb\u5b50\u7684\u65f6\u5019\u6709\u5f88\u591a\u7684\u9650\u5236\u6761\u4ef6\uff0c\u5176\u4e2d\u9a6c\u3001\u8c61\u3001\u9e2d\u6ce8\u610f\u6487\u817f\uff0c\u8f66\u6ce8\u610f\u4e2d\u95f4\u4e0d\u80fd\u6709\u5b50\uff08\u9a6c\u3001\u9e2d\u3001\u8f66\u5404\u88ab\u5361\u4e86\u4e00\u6b21\uff09**\n\n**6\u3001\u8fd9\u79cd\u5927\u6a21\u62df\u4e00\u6b21\u5199\u8fc7\u5f88\u96be\uff0c\u6240\u4ee5\u5fc5\u5b9a\u8c03\u8bd5\uff0c\u6ce8\u610f\u6709\u4e00\u4e9b\u591a\u4f59\u7684\u4e0d\u8be5\u51fa\u73b0\u7684\u4e1c\u897f\u8981\u5220\u9664\uff08\u4e3a\u6b64CE\u4e00\u6b21\uff09**\n\n\u90a3\u6211\u4eec\u5f00\u59cb\u5206\u6790\u4ee3\u7801\u5427\uff1a\n\n```\ninline void init()\t\t\t//\u521d\u59cb\u5316\u68cb\u76d8 \n{\n\tmapp[0][4]=1,mapp[9][4]=11;\n\tmapp[0][3]=2,mapp[0][5]=2,mapp[9][3]=12,mapp[9][5]=12;\n\tmapp[0][2]=3,mapp[0][6]=3,mapp[9][2]=13,mapp[9][6]=13;\n\tmapp[0][1]=4,mapp[0][7]=4,mapp[9][1]=14,mapp[9][7]=14;\n\tmapp[0][0]=5,mapp[0][8]=5,mapp[9][0]=15,mapp[9][8]=15;\n\tmapp[2][0]=6,mapp[2][8]=6,mapp[7][0]=16,mapp[7][8]=16;\n\tmapp[3][0]=7,mapp[3][2]=7,mapp[3][4]=7,mapp[3][6]=7,mapp[3][8]=7;\n\tmapp[6][0]=17,mapp[6][2]=17,mapp[6][4]=17,mapp[6][6]=17,mapp[6][8]=17;\n}\n```\n\n**\u4e3b\u51fd\u6570\u5176\u5b9e\u53ea\u9700\u5305\u542b\u51e0\u4e2a\u5206\u51fd\u6570**\n\n```\nint main()\n{\n\tinit();\n\n\tscanf(\"%d\",&Q);\n\t\n\tfor(register int i=1;i<=Q;i++)\n\t{\n\t\tscanf(\"%d%d%d%d\",&a,&b,&c,&d);\t//\u8bfb\u5165\n\t\t\n\t\tif(capture) {puts(\"Invalid command\");continue;}\t//\u5982\u679c\u6e38\u620f\u5df2\u7ed3\u675f\uff0c\u90a3\u540e\u7eed\u64cd\u4f5c\u90fd\u4e0d\u5408\u6cd5\n\t\t\n\t\tinitmove();\t//\u521d\u59cb\u5316\u79fb\u52a8\n\t\tmove();\t\t//\u79fb\u52a8\n\t\n\t\tif(flagout) continue;\t//\u5982\u679c\u79fb\u52a8\u4e2d\u4e0d\u5408\u6cd5\u5219\u7ee7\u7eed\uff08\u8f93\u51fa\u5728\u51fd\u6570\u4e2d\u5224\u65ad\uff09\n\t\t\n\t\tcheck();\t//\u68c0\u67e5\u662f\u5426\u5c06\u519b\n\t\t\n\t\tprint();\n\t\t\n\t\tif(turn==0) turn=1;\t//\u8f6c\u6362\u7ea2\u84dd\u65b9\n\t\telse turn=0;\n\t}\n\t\n\treturn 0;\n}\n```\n\n**\u521d\u59cb\u5316\uff1a**\n\n```\ninline void initmove()\t\t// \u521d\u59cb\u5316 move() \n{\n\tgai=0;\n\tflagout=0;\n\textra=0;\n\tcapture=0;\n\tjiang=0;\n}\n```\n\n**\u79fb\u52a8**\n+ \u5173\u4e8e\u79fb\u52a8\uff0c\u6211\u6253\u4e86\u4e00\u5f20\u5927\u5927\u7684\u8868\n+ \u5728\u628a\u8868\u653e\u51fa\u6765\u4e4b\u524d\uff0c\u5148\u8bf4\u660e\u51e0\u4e2adefine\n\n\n```\n#define out {flagout=1;puts(\"Invalid command\");return;}\n#define bounce (a>=0&&a<=9&&b>=0&&b<=8&&c>=0&&c<=9&&d>=0&&d<=8)\n```\n\n\u5176\u4e2dout\u662f\u5982\u679c\u8f93\u5165\u4e0d\u5408\u6cd5\uff0c\u6807\u8bb0\uff0c\u8f93\u51fa\uff0c\u8fd4\u56de\n\nbounce\u662f\u786e\u4fdd\u8d77\u70b9\u7ec8\u70b9\u90fd\u5728\u8fb9\u754c\u4e4b\u5185\n\n\n```\nif(turn==1) extra=10;\t//\u56e0\u4e3a\u6211\u7528\u5341\u4f4d\u6765\u5224\u65ad\u7ea2\u84dd\u65b9\uff0c\u6240\u4ee5\u84dd\u65b9\u5219\u52a0\u5341\n```\n\n+ \u6211\u4eec\u9700\u8981\u5224\u65ad\u68cb\u5b50\u7684\u843d\u70b9\u7684\u5b50\n\n+ \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u843d\u70b9\u6ca1\u6709\u5b50\uff0c\u90a3\u5f53\u7136\u53ef\u4ee5\u8d70\n\n+ \u5982\u679c\u7ea2\u68cb\u7684\u843d\u70b9\u4e3a\u84dd\u68cb\uff0c\u90a3\u4e5f\u53ef\u4ee5\u8d70\n\n+ \u4f46\u7ea2\u68cb\u843d\u70b9\u4e3a\u7ea2\u68cb\u5c31\u4e0d\u80fd\u8d70\n\n+ \u6240\u4ee5\uff1a\n\n```\nbool fang(bool turn)\t\t// \u662f\u54ea\u4e00\u65b9\u5728\u52a8 & bounce\n{\n\tif(turn==0) return (mapp[c][d]==0||mapp[c][d]>10);\n\telse return (mapp[c][d]==0||mapp[c][d]<10);\n}\n\n```\n\n+ \u68cb\u5b50\u843d\u5730\u4e4b\u540e\u6211\u4eec\u8981\u5224\u65ad\u6709\u65e0\u68cb\u5b50\u88ab\u5403\uff1a\n\n\n```\nvoid lose(int c,int d)\t\t//\u5224\u65ad\u541e\u5175 \n{\n\tif(mapp[c][d]==1) capture=1,gai=1;\t\t\t//\u738b\u88ab\u5403\u4e86\u6807\u8bb0\n\telse if(mapp[c][d]==11) capture=2,gai=11;\n\telse if(mapp[c][d]>10) gai=mapp[c][d],lan--;\t//\u6807\u8bb0\u88ab\u5403\u7684\u68cb\n\telse if(mapp[c][d]>0) gai=mapp[c][d],hong--;\t//hong\u548clan\u7528\u6765\u8ba1\u6570\uff0c\u4f46\u53d1\u73b0\u5176\u5b9e\u6ca1\u6709\u4ec0\u4e48\u7528\n}\n```\n\n+ \u6700\u540e\u6211\u4eec\u8981\u628a\u68cb\u5b50\u653e\u8fc7\u53bb\n\n\n```\nvoid exchange(int e,int extra)\n{\n\tmapp[a][b]=0,mapp[c][d]=e+extra;\n\twhich=e+extra;\n}\n```\n\n**\u8be5\u653e\u8868\u4e86**\n\n\n```\ninline void move()\n{\n\t//\u6761\u4ef6 \uff1a\u7b26\u5408\u8be5\u68cb\u7684\u79fb\u52a8 \u8def\u4e0a||\u7ec8\u70b9\u65e0\u68cb \u7ec8\u70b9\u654c\u65b9\uff1f \u6ca1\u8d8a\u754c\n\t\n\tif(turn==1) extra=10;\n\t\n\tif(mapp[a][b]==1+extra)\n\t{\n\t\tif(bounce==0) out\t\t//\u524d\u9762\u63d0\u5230 \u8fb9\u754c\n\t\tif(c-a==1&&b==d&&fang(turn)) \t{lose(c,d);exchange(1,extra);return;}\t//\u7b26\u5408\u79fb\u52a8\u89c4\u5219\u548c\u79fb\u52a8\u65b9\uff0c\u5219\u5224\u65ad\u5403\u5b50\u548c\u79fb\u52a8\n\t\tif(a-c==1&&b==d&&fang(turn)) {lose(c,d);exchange(1,extra);return;}\n\t\tif(a==c&&b-d==1&&fang(turn)) {lose(c,d);exchange(1,extra);return;}\n\t\tif(a==c&&d-b==1&&fang(turn)) {lose(c,d);exchange(1,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==2+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tif(a-c==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tif(c-a==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tif(a-c==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==3+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c==a+2&&d==b+2&&fang(turn)&&mapp[a+1][b+1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tif(c==a+2&&d==b-2&&fang(turn)&&mapp[a+1][b-1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tif(c==a-2&&d==b+2&&fang(turn)&&mapp[a-1][b+1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tif(c==a-2&&d==b-2&&fang(turn)&&mapp[a-1][b-1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==4+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==2&&d-b==1&&fang(turn)&&mapp[a+1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==1&&d-b==2&&fang(turn)&&mapp[a][b+1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-1&&d-b==2&&fang(turn)&&mapp[a][b+1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-2&&d-b==1&&fang(turn)&&mapp[a-1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-2&&d-b==-1&&fang(turn)&&mapp[a-1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-1&&d-b==-2&&fang(turn)&&mapp[a][b-1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==1&&d-b==-2&&fang(turn)&&mapp[a][b-1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==2&&d-b==-1&&fang(turn)&&mapp[a+1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==5+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(a==c)\n\t\t{\t\n\t\t\tif(d>b)\n\t\t\t{\n\t\t\t\tfor(register int i=b+1;i<d;i++) if(mapp[a][i]) out\t\t\t\t\t//\u6709\u969c\u788d \n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\t\t\t//\u5224\u65ad\u5403\uff0c\u66f4\u65b0 \n\t\t\t}\n\t\t\t\n\t\t\telse if(d<b)\n\t\t\t{\n\t\t\t\tfor(register int i=b-1;i>d;i--) if(mapp[a][i]) out\n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\n\t\t\t}\n\t\t\t\n\t\t\telse out\n\t\t}\n\t\t\n\t\telse if(b==d)\n\t\t{\n\t\t\tif(c>a)\n\t\t\t{\n\t\t\t\tfor(register int i=a+1;i<c;i++) \n\t\t\t\tif(mapp[i][b]) out\n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\n\t\t\t}\n\t\t\t\n\t\t\telse if(c<a)\n\t\t\t{\n\t\t\t\tfor(register int i=a-1;i>c+1;i--)\n\t\t\t\tif(mapp[i][b]) out\n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\n\t\t\t}\n\t\t\t\n\t\t\telse out\n\t\t}\n\t\t\n\t\telse out\n\t}\n\t\n\tif(mapp[a][b]==6+extra)\t\t//\u8fd9\u91cc\u4e00\u5b9a\u8981\u4ed4\u7ec6\u3002\u3002\u3002\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==2&&d-b==3&&fang(turn)&&mapp[a][b+1]==0&&mapp[a+1][b+2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==3&&d-b==2&&fang(turn)&&mapp[a+1][b]==0&&mapp[a+2][b+1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-2&&d-b==3&&fang(turn)&&mapp[a][b+1]==0&&mapp[a-1][b+2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-3&&d-b==2&&fang(turn)&&mapp[a-1][b]==0&&mapp[a-2][b+1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==2&&d-b==-3&&fang(turn)&&mapp[a][b-1]==0&&mapp[a+1][b-2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==3&&d-b==-2&&fang(turn)&&mapp[a+1][b]==0&&mapp[a+2][b-1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-2&&d-b==-3&&fang(turn)&&mapp[a][b-1]==0&&mapp[a-1][b-2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-3&&d-b==-2&&fang(turn)&&mapp[a-1][b]==0&&mapp[a-2][b-1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==7+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==1&&b==d&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a-c==1&&b==d&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a==c&&b-d==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a==c&&d-b==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(c-a==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a-c==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(c-a==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a-c==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tout\n\t}\n\t\n\tout\n}\n```\n\n**\u63a5\u4e0b\u6765\u662f\u5224\u65ad\u5c06\u519b**\n\n+ \u5176\u5b9e\u6211\u4eec\u53d1\u73b0\uff0c\u5c06\u519b\u51fd\u6570\u7684\u4ee3\u7801\u548cmove\u4e2d\u5927\u90e8\u5206\u91cd\u5408\n\n+ \u5176\u5b9e\u6211\u4eec\u53d1\u73b0\uff0c\u5c06\u519b\u51fd\u6570\u672c\u53ef\u4ee5\u548cmove\u7ed3\u5408\n\n+ \u4f46\u6211\u5c31\u4e0d ~~(\u539f\u56e0\u662f\u6211\u8fd9\u4e48\u5199\u7136\u540e\u5199\u6302\u4e86\u6539\u4e86\u534a\u4e2a\u5c0f\u65f6\u624d\u6539\u56de\u6765)~~\n\n\n```\ninline void check()\t\t\t// \u68c0\u67e5\u5c06\u519b \n{\n\tfor(register int i=0;i<=9;i++)\n\t{\n\t\tfor(register int j=0;j<=8;j++)\t\t//\u66b4\u529b\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\n\t\t{\n\t\t\tif(mapp[i][j]==0) continue;\n\t\t\t\n\t\t\tcheckmate(i,j);\t\t\t\t\t//\u6709\u68cb\u5219\u641c\n\t\t\t\n\t\t\tif(jiang) return;\t\t\t\t//\u5982\u679c\u641c\u5230\u4e86\u4e5f\u5c31\u6ca1\u5fc5\u8981\u7ee7\u7eed\u4e86\n\t\t}\n\t}\n}\n```\n\n+ \u518d\u6765\u4e00\u4e2adefine\n\n\n```\n#define checkok {jiang=1;return;}\t//\u7b26\u5408\u5c06\u519b\u6761\u4ef6\u5219\u6807\u8bb0\uff0c\u8fd4\u56de\n```\n\n**\u653e\u8868\uff1a**\n\n\n```\ninline void checkmate(int p,int q)\n{\n\tif(mapp[p][q]>10) checkturn=1,checkextra=10;\t//checkturn\u662f\u8fd9\u9897\u68cb\u7684\u76ee\u6807,checkextra\u548cmove\u4e2d\u7684extra\u540c\u7406\n\telse checkturn=11,checkextra=0;\n\t\n\tif(mapp[p][q]==1+checkextra)\n\t{\n\t\tif(mapp[p+1][q]==checkturn&&0<=p+1&&p+1<=9&&0<=q&&q<=8) checkok\t\t//\u4e00\u5b9a\u8981\u5224\u65ad\u8fb9\u754c\n\t\tif(mapp[p-1][q]==checkturn&&0<=p-1&&p-1<=9&&0<=q&&q<=8) checkok\t\t//\u867d\u7136\u7406\u8bba\u4e0a\u4e0d\u5224\u65ad\u4e5f\u53ef\u4ee5\n\t\tif(mapp[p][q+1]==checkturn&&0<=p&&p<=9&&0<=q+1&&q+1<=8) checkok\t\t//\u56e0\u4e3a\u8fb9\u754c\u4e4b\u5916\u7684\u68cb\u4e0d\u4f1a\u6709\u76ee\u6807\u7f16\u53f7\n\t\tif(mapp[p][q-1]==checkturn&&0<=p&&p<=9&&0<=q-1&&q-1<=8) checkok\t\t//\u4f46\u662f\u6211\u6ca1\u5224\u65ad\u5c31\u662f\u6b7b\u4e86\uff0c\u6240\u4ee5\u3002\u3002\u3002\n\t}\n\t\n\tif(mapp[p][q]==2+checkextra)\n\t{\n\t\tif(mapp[p+1][q+1]==checkturn&&0<=p+1&&p+1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p-1][q+1]==checkturn&&0<=p-1&&p-1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p+1][q-1]==checkturn&&0<=p+1&&p+1<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p-1][q-1]==checkturn&&0<=p-1&&p-1<=9&&0<=q-1&&q-1<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==3+checkextra)\n\t{\n\t\tif(mapp[p+2][q+2]==checkturn&&mapp[p+1][q+1]==0&&0<=p+2&&p+2<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p-2][q+2]==checkturn&&mapp[p-1][q+1]==0&&0<=p-2&&p-2<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p+2][q-2]==checkturn&&mapp[p+1][q-1]==0&&0<=p+2&&p+2<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-2][q-2]==checkturn&&mapp[p-1][q-1]==0&&0<=p-2&&p-2<=9&&0<=q-2&&q-2<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==4+checkextra)\n\t{\n\t\tif(mapp[p+1][q+2]==checkturn&&mapp[p][q+1]==0&&0<=p+1&&p+1<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p+2][q+1]==checkturn&&mapp[p+1][q]==0&&0<=p+2&&p+2<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p+2][q-1]==checkturn&&mapp[p+1][q]==0&&0<=p+2&&p+2<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p+1][q-2]==checkturn&&mapp[p][q-1]==0&&0<=p+1&&p+1<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-1][q-2]==checkturn&&mapp[p][q-1]==0&&0<=p-1&&p-1<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-2][q-1]==checkturn&&mapp[p-1][q]==0&&0<=p-2&&p-2<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p-2][q+1]==checkturn&&mapp[p-1][q]==0&&0<=p-2&&p-2<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p-1][q+2]==checkturn&&mapp[p][q+1]==0&&0<=p-1&&p-1<=9&&0<=q+2&&q+2<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==5+checkextra)\n\t{\n\t\tfor(register int i=p+1;i<=9;i++)\n\t\t{\n\t\t\tif(mapp[i][q]==checkturn) checkok\n\t\t\tif(mapp[i][q]!=0) return;\n\t\t}\n\t\t\n\t\tfor(register int i=p-1;i>=0;i--)\n\t\t{\n\t\t\tif(mapp[i][q]==checkturn) checkok\n\t\t\tif(mapp[i][q]!=0) return;\n\t\t}\n\t\t\n\t\tfor(register int i=q+1;i<=8;i++)\n\t\t{\n\t\t\tif(mapp[p][i]==checkturn) checkok\n\t\t\tif(mapp[p][i]!=0) return;\n\t\t}\n\t\t\n\t\tfor(register int i=q-1;i>=0;i--)\n\t\t{\n\t\t\tif(mapp[p][i]==checkturn) checkok\n\t\t\tif(mapp[p][i]!=0) return;\n\t\t}\n\t}\n\t\n\tif(mapp[p][q]==6+checkextra)\n\t{\n\t\tif(mapp[p+2][q+3]==checkturn&&mapp[p][q+1]==0&&mapp[p+1][q+2]==0&&0<=p+2&&p+2<=9&&0<=q+3&&q+3<=8) checkok\n\t\tif(mapp[p+3][q+2]==checkturn&&mapp[p+1][q]==0&&mapp[p+2][q+1]==0&&0<=p+3&&p+3<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p+3][q-2]==checkturn&&mapp[p+1][q]==0&&mapp[p+2][q-1]==0&&0<=p+3&&p+3<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p+2][q-3]==checkturn&&mapp[p][q-1]==0&&mapp[p+1][q-2]==0&&0<=p+2&&p+2<=9&&0<=q-3&&q-3<=8) checkok\n\t\tif(mapp[p-2][q-3]==checkturn&&mapp[p][q-1]==0&&mapp[p-1][q-2]==0&&0<=p-2&&p-2<=9&&0<=q-3&&q-3<=8) checkok\n\t\tif(mapp[p-3][q-2]==checkturn&&mapp[p-1][q]==0&&mapp[p-2][q-1]==0&&0<=p-3&&p-3<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-3][q+2]==checkturn&&mapp[p-1][q]==0&&mapp[p-2][q+1]==0&&0<=p-3&&p-3<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p-2][q+3]==checkturn&&mapp[p][q+1]==0&&mapp[p-1][q+2]==0&&0<=p-2&&p-2<=9&&0<=q+3&&q+3<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==7+checkextra)\n\t{\n\t\tif(mapp[p+1][q]==checkturn&&0<=p+1&&p+1<=9&&0<=q&&q<=8) checkok\n\t\tif(mapp[p-1][q]==checkturn&&0<=p-1&&p-1<=9&&0<=q&&q<=8) checkok\n\t\tif(mapp[p][q+1]==checkturn&&0<=p&&p<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p][q-1]==checkturn&&0<=p&&p<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p+1][q+1]==checkturn&&0<=p+1&&p+1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p-1][q+1]==checkturn&&0<=p-1&&p-1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p+1][q-1]==checkturn&&0<=p+1&&p+1<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p-1][q-1]==checkturn&&0<=p-1&&p-1<=9&&0<=q-1&&q-1<=8) checkok\n\t}\n}\n```\n\n**\u6700\u540e\u6211\u4eec\u6765\u8f93\u51fa**\n\n\n```\ninline void print()\t\t\t//\u8f93\u51fa \n{\n\tif(mapp[c][d]==1) printf(\"red captain;\");\t\t//\u76f4\u63a5\u5224\u7ec8\u70b9\u7684\u90a3\u9897\u68cb\n\telse if(mapp[c][d]==2) printf(\"red guard;\");\t\t//\u56e0\u4e3a\u5728\u8d77\u70b9\u7684\u90a3\u9897\u88ab\u79fb\u8fc7\u6765\u4e86\n\telse if(mapp[c][d]==3) printf(\"red elephant;\");\n\telse if(mapp[c][d]==4) printf(\"red horse;\");\n\telse if(mapp[c][d]==5) printf(\"red car;\");\n\telse if(mapp[c][d]==6) printf(\"red duck;\");\n\telse if(mapp[c][d]==7) printf(\"red soldier;\");\n\telse if(mapp[c][d]==11) printf(\"blue captain;\");\n\telse if(mapp[c][d]==12) printf(\"blue guard;\");\n\telse if(mapp[c][d]==13) printf(\"blue elephant;\");\n\telse if(mapp[c][d]==14) printf(\"blue horse;\");\n\telse if(mapp[c][d]==15) printf(\"blue car;\");\n\telse if(mapp[c][d]==16) printf(\"blue duck;\");\n\telse if(mapp[c][d]==17) printf(\"blue soldier;\");\n\t\n\tif(gai==1) printf(\"red captain;\");\t\t//gai\u8bb0\u5f55\u88ab\u4fee\u6539\u7684\n\telse if(gai==2) printf(\"red guard;\");\n\telse if(gai==3) printf(\"red elephant;\");\n\telse if(gai==4) printf(\"red horse;\");\n\telse if(gai==5) printf(\"red car;\");\n\telse if(gai==6) printf(\"red duck;\");\n\telse if(gai==7) printf(\"red soldier;\");\n\telse if(gai==11) printf(\"blue captain;\");\n\telse if(gai==12) printf(\"blue guard;\");\n\telse if(gai==13) printf(\"blue elephant;\");\n\telse if(gai==14) printf(\"blue horse;\");\n\telse if(gai==15) printf(\"blue car;\");\n\telse if(gai==16) printf(\"blue duck;\");\n\telse if(gai==17) printf(\"blue soldier;\");\n\telse printf(\"NA;\");\t\t\t\t\t\t//\u6ce8\u610f\u6ca1\u6709\u7684\u8bdd\u8f93\u51faNA\n\t\n\tif(capture==0&&jiang) printf(\"yes;\");\n\telse printf(\"no;\");\n\t\n\tif(capture) puts(\"yes\");\t\t\t\t//\u6ce8\u610f\u8fd9\u91cc\u8f93\u51fa\u6ca1\u6709\u5206\u53f7\uff01\uff01\uff01\n\telse puts(\"no\");\n}\n```\n\n**\u4e8e\u662f\u6211\u4eec\u6109\u5feb\u7684A\u6389\u4e86\u8fd9\u9053\u9898**\n\n\n**\u653e\u4ee3\u7801\uff08\u6211\u63d0\u4ea4\u7684\u65f6\u5019\u7684\u4ee3\u7801\uff0c\u5185\u542b\u6211\u5199\u8fd9\u9053\u9898\u65f6\u81ea\u5df1\u653e\u7684\u6ce8\u91ca\uff09\uff1a**\n\n\n```\n//\u8bb0\u5f97\u6bcf\u6b21\u79fb\u52a8\u524d\u52a0 lose(c,d) \n//\u6ce8\u610f\u8f6c\u6362turn \n//\u6ce8\u610f\u79fb\u52a8\u65f6\u6e05\u7a7a\u4e4b\u524d\u7684\u683c\u5b50 \n//\u590d\u5236\u7c98\u8d34\u65f6\u8bb0\u5f97\u8fdb\u884c\u5fc5\u8981\u4fee\u6539 \n//\u6ce8\u610f\u68cb\u76d8\u7684\u8fb9\u754c \n\n//check\u65f6\u4fee\u6539extra\n//\u53d1\u73b0\u5176\u5b9eextra\u662fturn\u768410\u500d\uff0c\u4f46\u662f\u61d2\u5f97\u6539\u4e86\n//\u8bb0\u5f97captain\u88ab\u6293\u4e86\u4e5f\u8981\u6807\u8bb0\u4fee\u6539\u4e86\u54ea\u9897\u68cb \n//\u8bb0\u5f97\u52a8\u8f66\u7684\u65f6\u5019fang()\n\n#include <bits/stdc++.h>\n//#include <windows.h>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//////////////\nusing namespace std;\n#define out {flagout=1;puts(\"Invalid command\");return;}\n#define bounce (a>=0&&a<=9&&b>=0&&b<=8&&c>=0&&c<=9&&d>=0&&d<=8)\n#define checkok {jiang=1;return;}\t\t\t\t\t\t\t\t\t\t\t\t\t//////////\n\n\nint Q;\nint a,b,c,d;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \u5168\u5c40\u53d8\u91cf\u533a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nint mapp[12][12];\t\t\t\t\t\t//\u5217 \u884c : \u5982 mapp[4][3]\u8868\u7ea2\u65b9\u7b2c\u4e8c\u4e2a\u5175 \nbool turn=0;\t\t// \u7ea20 \u84dd1\t\t//\u738b1 \u58eb2 \u8c613 \u9a6c4 \u8f665 \u9e2d6 \u51757  \u7ea2\u5355\u4f4d\uff0c\u84dd\u53cc\u4f4d\n\nint checkturn;\t\t//\u8bb0\u5f55check\u7684\u65f6\u5019\u5bf9\u65b9\u7684\u738b \nint hong=16,lan=16,gai;\t\t//\u603b\u5175\u6570  \u88ab\u5403\u5175 \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \u7ea2\u84dd\u53d8\u91cf\u533a\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\nbool flagout;\t//\u5224\u65ad\u662f\u5426\u88about\u6389 \nbool capture=0,jiang=0;\t// 1\u4e3a\u88ab\u6293/\u5c06\u519b\nint extra,checkextra;\t\t// move\u7684\u65f6\u5019\u7ed3\u679c\u662f\u4ec0\u4e48\u5175\u7684\u4fee\u6539\nint which;\t\t// move\u7684\u65f6\u5019\u8c03\u7528\u7684\u4ec0\u4e48\u5175 \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\u7279\u6b8a\u8f85\u52a9\u533a \n\t\t\t\t\t\t\t\t\t\t\n//int yhong=1,ylan=2,ybai=3;\t\t\t\t\t\t\t\t\t\t\t\t\t\n//void Color(int a){\n//    if(a==1) SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),FOREGROUND_INTENSITY|FOREGROUND_RED);\n//    if(a==2) SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),FOREGROUND_INTENSITY|FOREGROUND_BLUE|FOREGROUND_GREEN);\n//    if(a==3) SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),FOREGROUND_INTENSITY|FOREGROUND_GREEN|FOREGROUND_BLUE|FOREGROUND_RED);\n//}\n\n\ninline void init()\t\t\t//\u521d\u59cb\u5316\u68cb\u76d8 \n{\n\tmapp[0][4]=1,mapp[9][4]=11;\n\tmapp[0][3]=2,mapp[0][5]=2,mapp[9][3]=12,mapp[9][5]=12;\n\tmapp[0][2]=3,mapp[0][6]=3,mapp[9][2]=13,mapp[9][6]=13;\n\tmapp[0][1]=4,mapp[0][7]=4,mapp[9][1]=14,mapp[9][7]=14;\n\tmapp[0][0]=5,mapp[0][8]=5,mapp[9][0]=15,mapp[9][8]=15;\n\tmapp[2][0]=6,mapp[2][8]=6,mapp[7][0]=16,mapp[7][8]=16;\n\tmapp[3][0]=7,mapp[3][2]=7,mapp[3][4]=7,mapp[3][6]=7,mapp[3][8]=7;\n\tmapp[6][0]=17,mapp[6][2]=17,mapp[6][4]=17,mapp[6][6]=17,mapp[6][8]=17;\n}\n\nvoid lose(int c,int d)\t\t//\u5224\u65ad\u541e\u5175 \n{\n\tif(mapp[c][d]==1) capture=1,gai=1;\n\telse if(mapp[c][d]==11) capture=2,gai=11;\n\telse if(mapp[c][d]>10) gai=mapp[c][d],lan--;\n\telse if(mapp[c][d]>0) gai=mapp[c][d],hong--;\n}\n\nbool fang(bool turn)\t\t// \u662f\u54ea\u4e00\u65b9\u5728\u52a8 & bounce\n{\n\tif(turn==0) return (mapp[c][d]==0||mapp[c][d]>10);\n\telse return (mapp[c][d]==0||mapp[c][d]<10);\n}\n\nvoid exchange(int e,int extra)\n{\n\tmapp[a][b]=0,mapp[c][d]=e+extra;\n\twhich=e+extra;\n}\n\ninline void move()\n{\n\t//\u6761\u4ef6 \uff1a\u7b26\u5408\u8be5\u68cb\u7684\u79fb\u52a8 \u8def\u4e0a||\u7ec8\u70b9\u65e0\u68cb \u7ec8\u70b9\u654c\u65b9\uff1f \u6ca1\u8d8a\u754c\n\t\n\tif(turn==1) extra=10;\n\t\n\tif(mapp[a][b]==1+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==1&&b==d&&fang(turn)) {lose(c,d);exchange(1,extra);return;}\n\t\tif(a-c==1&&b==d&&fang(turn)) {lose(c,d);exchange(1,extra);return;}\n\t\tif(a==c&&b-d==1&&fang(turn)) {lose(c,d);exchange(1,extra);return;}\n\t\tif(a==c&&d-b==1&&fang(turn)) {lose(c,d);exchange(1,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==2+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tif(a-c==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tif(c-a==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tif(a-c==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(2,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==3+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c==a+2&&d==b+2&&fang(turn)&&mapp[a+1][b+1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tif(c==a+2&&d==b-2&&fang(turn)&&mapp[a+1][b-1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tif(c==a-2&&d==b+2&&fang(turn)&&mapp[a-1][b+1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tif(c==a-2&&d==b-2&&fang(turn)&&mapp[a-1][b-1]==0) {lose(c,d);exchange(3,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==4+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==2&&d-b==1&&fang(turn)&&mapp[a+1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==1&&d-b==2&&fang(turn)&&mapp[a][b+1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-1&&d-b==2&&fang(turn)&&mapp[a][b+1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-2&&d-b==1&&fang(turn)&&mapp[a-1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-2&&d-b==-1&&fang(turn)&&mapp[a-1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==-1&&d-b==-2&&fang(turn)&&mapp[a][b-1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==1&&d-b==-2&&fang(turn)&&mapp[a][b-1]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tif(c-a==2&&d-b==-1&&fang(turn)&&mapp[a+1][b]==0) {lose(c,d);exchange(4,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==5+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(a==c)\n\t\t{\t\n\t\t\tif(d>b)\n\t\t\t{\n\t\t\t\tfor(register int i=b+1;i<d;i++) if(mapp[a][i]) out\t\t\t\t\t//\u6709\u969c\u788d \n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\t\t\t//\u5224\u65ad\u5403\uff0c\u66f4\u65b0 \n\t\t\t}\n\t\t\t\n\t\t\telse if(d<b)\n\t\t\t{\n\t\t\t\tfor(register int i=b-1;i>d;i--) if(mapp[a][i]) out\n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\n\t\t\t}\n\t\t\t\n\t\t\telse out\n\t\t}\n\t\t\n\t\telse if(b==d)\n\t\t{\n\t\t\tif(c>a)\n\t\t\t{\n\t\t\t\tfor(register int i=a+1;i<c;i++) \n\t\t\t\tif(mapp[i][b]) out\n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\n\t\t\t}\n\t\t\t\n\t\t\telse if(c<a)\n\t\t\t{\n\t\t\t\tfor(register int i=a-1;i>c+1;i--)\n\t\t\t\tif(mapp[i][b]) out\n\t\t\t\tif(fang(turn)) {lose(c,d);exchange(5,extra);return;}\n\t\t\t}\n\t\t\t\n\t\t\telse out\n\t\t}\n\t\t\n\t\telse out\n\t}\n\t\n\tif(mapp[a][b]==6+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==2&&d-b==3&&fang(turn)&&mapp[a][b+1]==0&&mapp[a+1][b+2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==3&&d-b==2&&fang(turn)&&mapp[a+1][b]==0&&mapp[a+2][b+1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-2&&d-b==3&&fang(turn)&&mapp[a][b+1]==0&&mapp[a-1][b+2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-3&&d-b==2&&fang(turn)&&mapp[a-1][b]==0&&mapp[a-2][b+1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==2&&d-b==-3&&fang(turn)&&mapp[a][b-1]==0&&mapp[a+1][b-2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==3&&d-b==-2&&fang(turn)&&mapp[a+1][b]==0&&mapp[a+2][b-1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-2&&d-b==-3&&fang(turn)&&mapp[a][b-1]==0&&mapp[a-1][b-2]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tif(c-a==-3&&d-b==-2&&fang(turn)&&mapp[a-1][b]==0&&mapp[a-2][b-1]==0) {lose(c,d);exchange(6,extra);return;}\n\t\tout\n\t}\n\t\n\tif(mapp[a][b]==7+extra)\n\t{\n\t\tif(bounce==0) out\n\t\tif(c-a==1&&b==d&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a-c==1&&b==d&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a==c&&b-d==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a==c&&d-b==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(c-a==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a-c==1&&b-d==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(c-a==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tif(a-c==1&&d-b==1&&fang(turn)) {lose(c,d);exchange(7,extra);return;}\n\t\tout\n\t}\n\t\n\tout\n}\n\ninline void initmove()\t\t// \u521d\u59cb\u5316 move() \n{\n\tgai=0;\n\tflagout=0;\n\textra=0;\n\tcapture=0;\n\tjiang=0;\n}\n\ninline void checkmate(int p,int q)\n{\n\tif(mapp[p][q]>10) checkturn=1,checkextra=10;\n\telse checkturn=11,checkextra=0;\n\t\n\tif(mapp[p][q]==1+checkextra)\n\t{\n\t\tif(mapp[p+1][q]==checkturn&&0<=p+1&&p+1<=9&&0<=q&&q<=8) checkok\n\t\tif(mapp[p-1][q]==checkturn&&0<=p-1&&p-1<=9&&0<=q&&q<=8) checkok\n\t\tif(mapp[p][q+1]==checkturn&&0<=p&&p<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p][q-1]==checkturn&&0<=p&&p<=9&&0<=q-1&&q-1<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==2+checkextra)\n\t{\n\t\tif(mapp[p+1][q+1]==checkturn&&0<=p+1&&p+1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p-1][q+1]==checkturn&&0<=p-1&&p-1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p+1][q-1]==checkturn&&0<=p+1&&p+1<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p-1][q-1]==checkturn&&0<=p-1&&p-1<=9&&0<=q-1&&q-1<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==3+checkextra)\n\t{\n\t\tif(mapp[p+2][q+2]==checkturn&&mapp[p+1][q+1]==0&&0<=p+2&&p+2<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p-2][q+2]==checkturn&&mapp[p-1][q+1]==0&&0<=p-2&&p-2<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p+2][q-2]==checkturn&&mapp[p+1][q-1]==0&&0<=p+2&&p+2<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-2][q-2]==checkturn&&mapp[p-1][q-1]==0&&0<=p-2&&p-2<=9&&0<=q-2&&q-2<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==4+checkextra)\n\t{\n\t\tif(mapp[p+1][q+2]==checkturn&&mapp[p][q+1]==0&&0<=p+1&&p+1<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p+2][q+1]==checkturn&&mapp[p+1][q]==0&&0<=p+2&&p+2<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p+2][q-1]==checkturn&&mapp[p+1][q]==0&&0<=p+2&&p+2<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p+1][q-2]==checkturn&&mapp[p][q-1]==0&&0<=p+1&&p+1<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-1][q-2]==checkturn&&mapp[p][q-1]==0&&0<=p-1&&p-1<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-2][q-1]==checkturn&&mapp[p-1][q]==0&&0<=p-2&&p-2<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p-2][q+1]==checkturn&&mapp[p-1][q]==0&&0<=p-2&&p-2<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p-1][q+2]==checkturn&&mapp[p][q+1]==0&&0<=p-1&&p-1<=9&&0<=q+2&&q+2<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==5+checkextra)\n\t{\n\t\tfor(register int i=p+1;i<=9;i++)\n\t\t{\n\t\t\tif(mapp[i][q]==checkturn) checkok\n\t\t\tif(mapp[i][q]!=0) return;\n\t\t}\n\t\t\n\t\tfor(register int i=p-1;i>=0;i--)\n\t\t{\n\t\t\tif(mapp[i][q]==checkturn) checkok\n\t\t\tif(mapp[i][q]!=0) return;\n\t\t}\n\t\t\n\t\tfor(register int i=q+1;i<=8;i++)\n\t\t{\n\t\t\tif(mapp[p][i]==checkturn) checkok\n\t\t\tif(mapp[p][i]!=0) return;\n\t\t}\n\t\t\n\t\tfor(register int i=q-1;i>=0;i--)\n\t\t{\n\t\t\tif(mapp[p][i]==checkturn) checkok\n\t\t\tif(mapp[p][i]!=0) return;\n\t\t}\n\t}\n\t\n\tif(mapp[p][q]==6+checkextra)\n\t{\n\t\tif(mapp[p+2][q+3]==checkturn&&mapp[p][q+1]==0&&mapp[p+1][q+2]==0&&0<=p+2&&p+2<=9&&0<=q+3&&q+3<=8) checkok\n\t\tif(mapp[p+3][q+2]==checkturn&&mapp[p+1][q]==0&&mapp[p+2][q+1]==0&&0<=p+3&&p+3<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p+3][q-2]==checkturn&&mapp[p+1][q]==0&&mapp[p+2][q-1]==0&&0<=p+3&&p+3<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p+2][q-3]==checkturn&&mapp[p][q-1]==0&&mapp[p+1][q-2]==0&&0<=p+2&&p+2<=9&&0<=q-3&&q-3<=8) checkok\n\t\tif(mapp[p-2][q-3]==checkturn&&mapp[p][q-1]==0&&mapp[p-1][q-2]==0&&0<=p-2&&p-2<=9&&0<=q-3&&q-3<=8) checkok\n\t\tif(mapp[p-3][q-2]==checkturn&&mapp[p-1][q]==0&&mapp[p-2][q-1]==0&&0<=p-3&&p-3<=9&&0<=q-2&&q-2<=8) checkok\n\t\tif(mapp[p-3][q+2]==checkturn&&mapp[p-1][q]==0&&mapp[p-2][q+1]==0&&0<=p-3&&p-3<=9&&0<=q+2&&q+2<=8) checkok\n\t\tif(mapp[p-2][q+3]==checkturn&&mapp[p][q+1]==0&&mapp[p-1][q+2]==0&&0<=p-2&&p-2<=9&&0<=q+3&&q+3<=8) checkok\n\t}\n\t\n\tif(mapp[p][q]==7+checkextra)\n\t{\n\t\tif(mapp[p+1][q]==checkturn&&0<=p+1&&p+1<=9&&0<=q&&q<=8) checkok\n\t\tif(mapp[p-1][q]==checkturn&&0<=p-1&&p-1<=9&&0<=q&&q<=8) checkok\n\t\tif(mapp[p][q+1]==checkturn&&0<=p&&p<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p][q-1]==checkturn&&0<=p&&p<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p+1][q+1]==checkturn&&0<=p+1&&p+1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p-1][q+1]==checkturn&&0<=p-1&&p-1<=9&&0<=q+1&&q+1<=8) checkok\n\t\tif(mapp[p+1][q-1]==checkturn&&0<=p+1&&p+1<=9&&0<=q-1&&q-1<=8) checkok\n\t\tif(mapp[p-1][q-1]==checkturn&&0<=p-1&&p-1<=9&&0<=q-1&&q-1<=8) checkok\n\t}\n}\n\ninline void check()\t\t\t// \u68c0\u67e5\u5c06\u519b \n{\n\tfor(register int i=0;i<=9;i++)\n\t{\n\t\tfor(register int j=0;j<=8;j++)\n\t\t{\n\t\t\tif(mapp[i][j]==0) continue;\n\t\t\t\n\t\t\tcheckmate(i,j);\n\t\t\t\n\t\t\tif(jiang) return;\n\t\t}\n\t}\n}\n\ninline void print()\t\t\t//\u8f93\u51fa \n{\n\tif(mapp[c][d]==1) printf(\"red captain;\");\n\telse if(mapp[c][d]==2) printf(\"red guard;\");\n\telse if(mapp[c][d]==3) printf(\"red elephant;\");\n\telse if(mapp[c][d]==4) printf(\"red horse;\");\n\telse if(mapp[c][d]==5) printf(\"red car;\");\n\telse if(mapp[c][d]==6) printf(\"red duck;\");\n\telse if(mapp[c][d]==7) printf(\"red soldier;\");\n\telse if(mapp[c][d]==11) printf(\"blue captain;\");\n\telse if(mapp[c][d]==12) printf(\"blue guard;\");\n\telse if(mapp[c][d]==13) printf(\"blue elephant;\");\n\telse if(mapp[c][d]==14) printf(\"blue horse;\");\n\telse if(mapp[c][d]==15) printf(\"blue car;\");\n\telse if(mapp[c][d]==16) printf(\"blue duck;\");\n\telse if(mapp[c][d]==17) printf(\"blue soldier;\");\n\t\n\tif(gai==1) printf(\"red captain;\");\n\telse if(gai==2) printf(\"red guard;\");\n\telse if(gai==3) printf(\"red elephant;\");\n\telse if(gai==4) printf(\"red horse;\");\n\telse if(gai==5) printf(\"red car;\");\n\telse if(gai==6) printf(\"red duck;\");\n\telse if(gai==7) printf(\"red soldier;\");\n\telse if(gai==11) printf(\"blue captain;\");\n\telse if(gai==12) printf(\"blue guard;\");\n\telse if(gai==13) printf(\"blue elephant;\");\n\telse if(gai==14) printf(\"blue horse;\");\n\telse if(gai==15) printf(\"blue car;\");\n\telse if(gai==16) printf(\"blue duck;\");\n\telse if(gai==17) printf(\"blue soldier;\");\n\telse printf(\"NA;\");\n\t\n\tif(capture==0&&jiang) printf(\"yes;\");\n\telse printf(\"no;\");\n\t\n\tif(capture) puts(\"yes\");\n\telse puts(\"no\");\n}\n\nint main()\n{\n//\tfreopen(\"2test.in\",\"r\",stdin);\n//\tfreopen(\"test.out\",\"w\",stdout);\n\t\n\tinit();\n//\tColor(ybai);\t\t\t\t\t/////\n//\tint cc=0;\n\t\n//\tfor(register int i=9;i>=0;i--)\n//\t{\n//\t\tfor(register int j=8;j>=0;j--)\n//\t\t{\n//\t\t\tcout<<setw(5)<<mapp[i][j];\n//\t\t}\n//\t\tputs(\"\");\n//\t}\n\t\n\tscanf(\"%d\",&Q);\n\t\n\tfor(register int i=1;i<=Q;i++)\n\t{\n//\t\tcout<<i<<\" \";\t\t\t\t\t////\n\t\t\n\t\tscanf(\"%d%d%d%d\",&a,&b,&c,&d);\n\t\t\n\t\tif(capture) {puts(\"Invalid command\");continue;}\n\t\t\n\t\tinitmove();\n\t\tmove();\n\t\n\t\tif(flagout) continue;\n\t\t\n//\t\tif(i<=586) \n//\t\tsystem(\"cls\");\t\t\t\t\t\t\t\t/////\n//\t\tfor(register int i=9;i>=0;i--)\n//\t\t{\n//\t\t\tfor(register int j=0;j<=8;j++)\n//\t\t\t{\n//\t\t\t\tif(mapp[i][j]<10&&mapp[i][j]!=0)\n//\t\t\t\t{\n//\t\t\t\t\tColor(yhong),cout<<setw(5)<<mapp[i][j],Color(ybai);\n//\t\t\t\t}\n//\t\t\t\telse if(mapp[i][j]>10)\n//\t\t\t\t{\n//\t\t\t\t\tColor(ylan),cout<<setw(5)<<mapp[i][j],Color(ybai);\n//\t\t\t\t}\n//\t\t\t\telse Color(ybai),cout<<setw(5)<<mapp[i][j];\n//\t\t\t}\n//\t\t\tputs(\"\");\n//\t\t}\n//\t\tputs(\"\"),puts(\"\");\t\t\t\t\t\t\t\t\t\t\t/////\n\t\t\n\t\tcheck();\n\t\t\n\t\tprint();\n\t\t\n\t\tif(turn==0) turn=1;\n\t\telse turn=0;\n\t\t\n//\t\tif(i>=590) system(\"pause\");\n//\t\tif(i>=357) \n\t}\n\t\n\treturn 0;\n}\n```\n\n**\u5199\u9898\u89e3\u4e0d\u6613\uff0c\u5179\u78c1\u4e00\u4e0b\u5457!**\n$ \\color{white}\\texttt{By Possible} $",
        "postTime": 1573204138,
        "uid": 86062,
        "name": "Pengsibo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "**\u8ddd\u79bbCSP\u8fd8\u670910\u5929\u6574\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u81ea\u5df1\u7684\u7b97\u6cd5\u80fd\u529b\u5df2\u7ecf\u5d29\u6e83\u4e86\uff0c\u767e\u822c\u65e0\u5948\u4e4b\u4e0b\u5f00\u5237\u9ed1\u6a21\u62df\uff0c\u4e8e\u662f\u5728\u4e09\u5929\u4e4b\u540e\u6709\u4e86\u8fd9\u7bc7\u9898\u89e3**\n\n\u2014\u2014by\u672c\u673a\u623f\u7b2c\u4e00\u4e2aA\u6389\u6b64\u9898\u7684\u5927\u4f6c[possible](https://www.luogu.org/user/86062)\n\n\u5c31\u5728\u90a3\u5929\uff0c\u672c\u840c\u65b0\u7531\u4e8e\u4ee3\u7801\u80fd\u529b\u8d85\u5f31\n\n~~\u7279\u522b\u662f\u548c\u6211\u65c1\u8fb9\u51e0\u4f4d\u7f16\u51fa\u4e86\u5f88\u591a\u6e38\u620f\u7684\u5927\u4f6c\u4eec[Carb_Dave](https://www.luogu.org/user/65502)\u548c[\u9a6c\u8138\u5154](https://www.luogu.org/user/92860)\u6bd4\u8d77\u6765~~\n\n\u4e8e\u662f\uff0c\u672c\u840c\u65b0\u53d1\u4e86\u4e00\u7bc7\u5e16\u5b50\uff1a[\u600e\u4e48\u63d0\u5347\u81ea\u5df1\u7684\u4ee3\u7801\u80fd\u529b\u554aQwQ](https://www.luogu.org/discuss/show/163661)\uff0c\u5f97\u5230\u4e86\u5404\u8def\u5927\u4f6c\u7684\u771f\u4f20\uff0c\u7ec8\u4e8e\u8d70\u5411\u4e86\u5237\u6a21\u62df\u4e4b\u8def\n\n~~\u7531\u4e8e\u672c\u840c\u65b0\u8bed\u6587\u592a\u5dee\uff0c\u6240\u4ee5[\u732a\u56fd\u6740](https://www.luogu.org/problem/P2482)\u548c[\u6cb3\u7ae5\u91cd\u5de5\u7684\u8ba1\u7b97\u673a](https://www.luogu.org/problem/P4911)\u6839\u672c\u5199\u4e0d\u51fa\u6765\u3002\u770b\u7740\u65c1\u8fb9\u7684possible\u5927\u4f6c\u9a6c\u4e0a\u5c31\u8981A\u6389\u8fd9\u9053\u9ed1\u6a21\u62df\u4e86\uff0c\u4e8e\u662f\u672c\u840c\u65b0\u4e5f\u5f00\u59cb\u4e86\u6700\u540e\u7684\u9006\u88ad~~\n\n**\u597d\u4e86\u6211\u4eec\u5e9f\u8bdd\u4e0d\u591a\u8bf4\uff0c\u5148\u6765\u5206\u6790\u4e00\u4e0b\u9898\u76ee\u5427**\n\n\u4e00\u3001\u9e2d\u68cb\u68cb\u76d8\u5171\u670910\u884c9\u5217\uff0c\u9700\u8981\u7279\u522b\u6ce8\u610f\u7684\u662f\uff1a\u8fd9\u91cc\u7684\u5730\u56fe\u9700\u8981\u4ece0\u5f00\u59cb\u8ba1\u7b97\u3002\n\t\n\u6240\u4ee5\u4e3a\u4e86\u65b9\u4fbf\u6539\u53d8\u5730\u56fe\uff0c\u6211\u4eec\u5c06\u5730\u56fe\u521d\u59cb\u5316\u4e3a\u5982\u4e0b\u6837\u5b50\n\n```cpp\nchar mp[11][11][11]=\n{\n{\"rC\",\"rH\",\"rE\",\"rG\",\"rK\",\"rG\",\"rE\",\"rH\",\"rC\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"rD\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"rD\"},\n{\"rS\",\"0\",\"rS\",\"0\",\"rS\",\"0\",\"rS\",\"0\",\"rS\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"bS\",\"0\",\"bS\",\"0\",\"bS\",\"0\",\"bS\",\"0\",\"bS\"},\n{\"bD\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"bD\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"bC\",\"bH\",\"bE\",\"bG\",\"bK\",\"bG\",\"bE\",\"bH\",\"bC\"},\n};\n```\n\n\u6211\u4eec\u4f1a\u53d1\u73b0\u8fd9\u91cc\u7684\u68cb\u76d8\u548c\u539f\u9898\u7684\u9898\u76ee\u4e2d\u68cb\u76d8\u662f\u53cd\u7740\u7684\n\n![\u9e2d\u68cb\u68cb\u76d8](https://cdn.luogu.com.cn/upload/pic/58700.png)\n\n\u6240\u4ee5\u6211\u4eec\u540c\u6837\u4e3a\u4e86\u5728\u540e\u9762\u8c03\u8bd5\u7684\u65f6\u5019\u65b9\u4fbf\u770b\u5730\u56fe\uff0c\u6211\u4eec\u5c06\u5730\u56fe\u7684\u884c\u53f7\u5012\u53d9\u8f93\u51fa\uff0c\u5217\u53f7\u6b63\u5e8f\u8f93\u51fa\n\n```cpp\n//\u8f93\u51fa\u5730\u56fe\u73b0\u5728\u5f62\u6001 \nvoid print_map()//\u8f93\u51fa\u73b0\u5728\u7684\u5730\u56fe\n{\n\tfor (int i=9;i>=0;i--)//\u7531\u4e8e\u4e3a\u4e86\u65b9\u4fbf\u5b58\u53d6\uff0c\u5c06\u5730\u56fe\u4ee5\u9898\u76ee\u544a\u77e5\u7684\u5f62\u5f0f\u5b58\u50a8\n\t{//\u6240\u4ee5\u884c\u53f7\u5012\u53d9\u8f93\u51fa\uff0c\u4f46\u662f\u8f93\u51fa\u4e4b\u540e\u5f62\u5f0f\u4f9d\u7136\u4e3a\u5de6\u4e0b\u89d2\u4e3a(0,0)\n\t\tcout<<setw(5)<<i;//\u8f93\u51fa\u7eb5\u5750\u6807\n\t\tfor (int j=0;j<=8;j++)\n\t\t\tcout<<setw(5)<<mp[i][j];\n\t\tprintf(\"\\n\");\n\t}\n\tcout<<setw(5)<<\" \";\n\tfor (int i=0;i<=8;i++)\n\t\tcout<<setw(5)<<i;//\u8f93\u51fa\u6a2a\u5750\u6807\n\tprintf(\"\\n\\n\");\n}\n```\n\u4e8c\u3001\u68cb\u5b50\u7684\u79fb\u52a8\u89c4\u5219\n\u5728\u539f\u9898\u4e2d\uff0c\u68cb\u5b50\u7684\u79fb\u52a8\u89c4\u5219\u770b\u4e0a\u53bb\u6bd4\u8f83\u9ebb\u70e6\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u5b83\u7ffb\u8bd1\u4e3a\u901a\u4fd7\u6613\u61c2\u7684\u56fe\u5f62\u4e0e\u6587\u5b57\u8bed\u8a00\n\n//\u4e0b\u65b9\u5c40\u90e8\u68cb\u76d8\u4e2d\u5927\u5199\u5b57\u6bcd\u8868\u793a\u8be5\u68cb\u5b50\uff0cy1\u6216y\u8868\u793a\u53ef\u4ee5\u5230\u8fbe\u7684\u5730\u65b9\uff0ca1\u6216a\u8868\u793a\u4e0ey\u5bf9\u5e94\u7684\u4e0d\u5e94\u8be5\u6709\u68cb\u5b50\u7684\u5730\u65b9\n\n~~\u6709\u7684\u5730\u65b9\u4e3a\u4e86\u4e00\u773c\u80fd\u770b\u61c2\uff0c\u6240\u4ee5\u6709\u7684\u4e0d\u80fd\u6709\u68cb\u7684\u5730\u65b9\u6211\u5c31\u5fc5\u987b\u9760\u4e00\u4e22\u4e22\u7684\u610f\u4f1a\u6765\u7406\u89e3~~\n\n//\u7531\u4e8e\u738b\uff08Captain\u548c\u8f66Car\u7684\u9996\u5b57\u6bcd\u76f8\u540c\uff0c\u6211\u4eec\u5c06\u738b\u53eb\u505aKing\uff09\n\n1.\u738b\uff08K)\n\nn y n\n\ny K y\n\nn y n\n\n\n2.\u58eb\uff08G\uff09\n\ny n t\n\nn G n\n\ny n y\n\n\n3.\u8c61\uff08E\uff09\n\ny1 no no no y2\n\nno a1 no a2 no\n\nno no El no no\n\nno a3 no a4 no\n\ny3 no no no y4\n\n\u5728a\u6ca1\u6709\u68cb\u5b50\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5230\u8fbe\u5bf9\u5e94\u7684y\n\n\n4.\u9a6c\uff08H\uff09\n\nno y1 no y2 no\n\ny3 no aa no y4\n\nno a5 Ho a6 no\n\ny5 no ab ad y6\n\nno y7 no y8 no\n\n\u9a6c\u8d70\u65e5\uff0c\u5148\u8d70\u957f\u8fb9\uff0c\u518d\u8d70\u77ed\u8fb9\uff0c\u957f\u8fb9\u7684\u4e2d\u95f4\u4e0a\u4e0d\u80fd\u6709\u68cb\u5b50\n\n\n5.\u8f66\uff08C\uff09\n\nno up no\n\nle Ca ri\n\nno do no\n\n\u8d70\u4e00\u6761\u76f4\u7ebf\u4e0a\u7684\u4efb\u610f\u957f\u5ea6\uff0c\u4f46\u662f\u5728\u8d70\u7684\u8fd9\u6761\u7ebf\u6bb5\u4e0a\u4e0d\u80fd\u6709\u4efb\u4f55\u68cb\u5b50\n\n\n6.\u9e2d\u5b50\uff08D\uff09\n\nno y1 no no no y2 no \n\ny3 no a1 no a2 no y4\n\nno a3 no aa no a4 no \n\nno no a3 Du a4 no no\n\nno a5 no aa no a6 no \n\ny5 no a7 no a8 no y6 \n\nno y7 no no no y8 no \n\n\u9e2d\u8d70\u76ee\n\n\n7.\u5175\uff08S\uff09\n\ny y y\n\ny S y\n\ny y y \n\n\u5468\u56f4\u516b\u4e2a\u90fd\u53ef\u4ee5\u8d70\n\n\u4e09\u3001\u4e0b\u68cb\u987a\u5e8f\n\n1.\u7ea2\u65b9\u5148\u4e0b\n\n2.\u5982\u679c\u4e0a\u4e00\u6b65\u64cd\u4f5c\u4e0d\u5408\u6cd5\uff0c\u90a3\u4e48\u8fd9\u4e00\u6b65\u8fd8\u662f\u8be5\u4e0a\u4e00\u6b65\u4e0b\u7684\u90a3\u4e2a\u4eba\u4e0b\n\n\u56db\u3001\u5176\u4ed6\u89c4\u5219\n1.\u5c06\u4e00\u4e2a\u989c\u8272\u7684\u68cb\u5b50\u5728\u5141\u8bb8\u7684\u8303\u56f4\u5185\u79fb\u52a8\u5230\u4e0d\u540c\u989c\u8272\u7684\u68cb\u5b50\u4e0a\uff0c\u90a3\u4e00\u9897\u68cb\u5b50\u89c6\u4e3a\u88ab\u5403\u6389\n\n2.\u68cb\u76d8\u53ea\u670910x9\uff0c\u4e0d\u80fd\u8d8a\u754c\n\n3.\u4efb\u610f\u4e00\u65b9\u7684\u738b\u5728\u5bf9\u65b9\u67d0\u4e2a\u68cb\u5b50\u7684\u653b\u51fb\u8303\u56f4\u5185\uff0c\u5373\u89c6\u4e3a\u5c06\u519b\n\n\u56db\u3001\u8f93\u5165\u4e0e\u8f93\u51fa\n1.\u8f93\u5165\u56db\u4e2a\u6570\u5b57\uff0c\u4e3a\u4e24\u7ec4\u5750\u6807\uff0c\u5206\u522b\u4e3a\u8981\u79fb\u52a8\u7684\u68cb\u5b50\u7684\u5750\u6807\u4e0e\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\u7684\u5750\u6807\n\n2.\u5982\u679c\u5408\u6cd5\uff0c\u8f93\u51fa\n\n(1)\u8fd9\u6b65\u64cd\u4f5c\u79fb\u52a8\u4e86\u54ea\u4e00\u9897\u68cb\u5b50\uff1b\u683c\u5f0f\uff1a[\u989c\u8272]+[\u7c7b\u578b] \n\n(2)\u5b58\u5728\u79fb\u51fa\u6e38\u620f\u7684\u68cb\u5b50\uff1a\u8f93\u51fa\u88ab\u79fb\u51fa\u7684\u68cb\u5b50\uff1f\u8f93\u51faNA\n\n(3)\u8fd9\u6b65\u64cd\u4f5c\u540e\u662f\u5426\u5b58\u5728\u5c06\u519b\u754c\u9762 \n\n(4)\u8fd9\u6b65\u64cd\u4f5c\u540e\u662f\u5426\u6e38\u620f\u7ed3\u675f \uff08\u7528yes\u548cno\u8868\u793a\uff09 \n\n3.\u7ed3\u679c\u5728\u4e00\u884c\u5185\u8f93\u51fa\uff0c\u7528\u5206\u53f7\u9694\u5f00. \n\n4.\u5728\u6e38\u620f\u7ed3\u675f\u4e4b\u540e\u6240\u4ee5\u7684\u64cd\u4f5c\u90fd\u4e0d\u5408\u6cd5\n\n**\u89c4\u5219\u5c31\uff08ju\uff09\u53ea\uff08ran\uff09\u6709\u8fd9\uff08na\uff09\u4e48\u591a\uff0c\u4e0b\u9762\u6211\u4eec\u5f00\u59cb\u5206\u6790\u601d\u8def**\n\n\u9996\u5148\uff0c\u68cb\u76d8\u7684\u5b58\u50a8\u6211\u4eec\u5df2\u7ecf\u8bf4\u8fc7\uff0c\u5c31\u4e0d\u518d\u7ee7\u7eed\u8bf4\n\n\u7136\u540e\u6211\u4eec\u5f00\u59cb\u5904\u7406\u8f93\u5165\n\n\u5148\u770b\u8f93\u5165\u7684\u8981\u79fb\u52a8\u7684\u90a3\u4e2a\u70b9\n\n\u9996\u5148\u6211\u4eec\u5206\u6790\u8fd9\u4e2a\u70b9\u4e0a\u662f\u5426\u6709\u68cb\u5b50\uff0c\u5982\u679c\u6ca1\u6709\u5c31\u76f4\u63a5\u8f93\u51fa\u4e0d\u5408\u6cd5\n\n\u7136\u540e\u518d\u5224\u65ad\u8fd9\u4e2a\u68cb\u5b50\u7684\u989c\u8272\uff0c\u5176\u5b9e\u5c31\u662f\u5728\u5224\u65ad\u8fd9\u4e2a\u68cb\u5b50\u7684\u56de\u5408\u662f\u5426\u6b63\u786e\n\n\u8fd9\u65f6\u5019\u6211\u4eec\u518d\u6765\u79fb\u52a8\u8fd9\u9897\u68cb\u5b50\u3002\u5f53\u7136\u5728\u79fb\u52a8\u8fd9\u9897\u68cb\u5b50\u4e4b\u524d\u6211\u4eec\u8981\u5148\u5224\u65ad\u8fd9\u662f\u4e00\u9897\u4ec0\u4e48\u68cb\u5b50\uff0c\u7136\u540e\u518d\u6839\u636e\u4e0d\u540c\u7c7b\u578b\u7684\u68cb\u5b50\u505a\u51fa\u4e0d\u540c\u7684\u5408\u6cd5\u5224\u65ad\n\n\u5728\u8fd9\u91cc\u6211\u4eec\u5224\u65ad\u68cb\u5b50\u53ea\u7528\u5224\u65ad\u5230\u8fbe\u7684\u70b9\u4e0e\u5f00\u59cb\u7684\u70b9\u4e4b\u95f4\u7684\u6a2a\u5750\u6807\u4e0e\u7eb5\u5750\u6807\u5c31\u884c\u4e86\uff0c\u7136\u540e\u518d\u5f00\u59cb\u5224\u65ad\u5e94\u8be5\u6ca1\u6709\u68cb\u7684\u5730\u65b9\u662f\u5426\u6709\u68cb\n\n\u5f53\u7136\u8f66\u6bd4\u8f83\u4f8b\u5916\uff0c\u6240\u4ee5\u8f66\u8fd9\u91cc\u6211\u4eec\u5c31\u9700\u8981\u4ece\u8fd9\u4e2a\u70b9\u5f00\u59cb\u5411\u5230\u8fbe\u7684\u90a3\u4e2a\u70b9\u8fdb\u884c\u5224\u65ad\uff1a1.\u5fc5\u987b\u5728\u540c\u4e00\u884c\u6216\u8005\u540c\u4e00\u5217   2.\u4e2d\u95f4\u4e0d\u80fd\u6709\u68cb\n\n\u5bf9\u4e8e\u6240\u6709\u7684\u68cb\u5b50\u7684\u79fb\u52a8\uff0c\u6211\u4eec\u90fd\u662f\u76f8\u540c\u7684\u6a21\u677f\uff08\u5176\u5b9e\u53ef\u4ee5\u5199\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u4f46\u662f\u7531\u4e8e\u4e0d\u77e5\u9053\u600e\u4e48\u7684\u5c31\u6ca1\u6539\uff09\n\n```cpp\nchar ss[11];\nstrcpy(ss,\"0\");//\u5b9a\u4e49\u5e76\u4e3a\u5b57\u7b26\u4e32\u8d4b\u521d\u503c\nif (mp[xxx][yyy][0]==mp[xx][yy][0])\n{\n\tprintf(\"Invalid command\\n\");\n\treturn ;\n}\nif (strcmp(mp[xxx][yyy],\"0\")!=0)//\u5982\u679c\u8d70\u5230\u7684\u5730\u65b9\u4e0d\u4e3a\u7a7a\n\tstrcpy(ss,mp[xxx][yyy]);//\u8bb0\u5f55\u4e0b\u8fd9\u4e2a\u5730\u65b9\u7684\u68cb\u5b50\nstrcpy(mp[xxx][yyy],mp[xx][yy]);//\u66ff\u6362\u6389\u8fd9\u4e2a\u5730\u65b9\u7684\u68cb\u5b50\nstrcpy(mp[xx][yy],\"0\");//\u5c06\u539f\u6765\u79fb\u52a8\u7684\u68cb\u5b50\u90a3\u4e2a\u5730\u65b9\u8868\u793a\u4e3a\u7a7a\ncheck_game(xxx,yyy,ss);//\u68c0\u67e5\u5e76\u8f93\u51fa\u6e38\u620f\nreturn ;\n```\n\n\u5728\u8fd9\u91ccss\u7528\u6765\u5b58\u50a8\u5230\u8fbe\u7684\u90a3\u4e2a\u70b9\u4e0a\u539f\u6765\u662f\u4ec0\u4e48\uff0c\u5982\u679c\u662f\u68cb\u5b50\u5c31\u5c06\u68cb\u5b50\u8bb0\u5f55\u4e0b\u6765\uff0c\u5426\u5219\u5c31\u662f0,\n\n\u6700\u540e\u6211\u4eec\u5f00\u59cb\u68c0\u67e5\u5e76\u8f93\u51fa\u6e38\u620f\n\n\u9996\u5148\u6211\u4eec\u8981\u8f93\u51fa\u52a8\u7684\u90a3\u4e2a\u68cb\u5b50\n\n\u7136\u540e\u6211\u4eec\u8981\u5224\u65ad\u5230\u8fbe\u7684\u70b9\u4e0a\u6709\u6ca1\u6709\u68cb\u5b50\n\n\u6211\u4eec\u8fd8\u8981\u5224\u65ad\u6e38\u620f\u662f\u5426\u7ed3\u675f\n\n**\u6ce8\u610f**\uff1a\u6e38\u620f\u7ed3\u675f\u4e4b\u540e\u5c31\u6ca1\u6709\u5c06\u519b\u7684\u8bf4\u6cd5\u4e86\n\n\u6700\u540e\u6211\u4eec\u8fd8\u8981\u5224\u65ad\u5c06\u519b\n\n\u5982\u4e0b\n```cpp\n//\u5224\u65ad\u68cb\u5c40\u5e76\u4e14\u8f93\u51fa\nvoid check_game(int xxx,int yyy,char ss[])\n{\n\tprint_piece(mp[xxx][yyy]);//\u8f93\u51fa\u5f53\u524d\u8fd9\u4e2a\u70b9\u7684\u68cb\u5b50\uff08\u4e5f\u5c31\u662f\u79fb\u52a8\u7684\u68cb\u5b50\n\tif (strcmp(ss,\"0\")==0)//\u5982\u679c\u8d70\u5230\u7684\u8fd9\u4e2a\u70b9\u539f\u6765\u6ca1\u6709\u68cb\u5b50\n\t\tprintf(\"NA;\");//\u8f93\u51faNA;\n\telse//\u5426\u5219\n\t\tprint_piece(ss);//\u8f93\u51fa\u8fd9\u4e2a\u68cb\u5b50\n\tif (strcmp(ss,\"rK\")==0||strcmp(ss,\"bK\")==0)//\u5982\u679c\u8fd9\u4e2a\u68cb\u5b50\u4e3a\u67d0\u4e00\u65b9\u7684\u738b\n\t{\n\t\tprintf(\"no;yes\\n\");//\u8f93\u51fa\u672a\u5c06\u519b\uff0c\u5e76\u4e14\u6e38\u620f\u5df2\u7ed3\u675f\n\t\tgameover=1;//\u6807\u8bb0\u6e38\u620f\u4ee5\u7ed3\u675f\n\t\tgoon_game();\n\t\treturn ;//\u505c\u6b62\u64cd\u4f5c\n\t}\n\telse if (check_generals())//\u5426\u5219\u68c0\u67e5\u662f\u5426\u5c06\u519b\n\t{\n\t\tprintf(\"yes;no\\n\");//\u8f93\u51fa\u5c06\u519b\uff0c\u5e76\u4e14\u6e38\u620f\u672a\u7ed3\u675f\n\t\tgoon_game();\n\t\treturn ;\t\t\n\t}\n\tprintf(\"no;no\\n\");//\u90fd\u4e0d\u6ee1\u8db3\u8f93\u51fano;no\n\tgoon_game();\n}\n```\n\n\u90a3\u4e48\u6211\u4eec\u53c8\u5982\u4f55\u5224\u65ad\u662f\u5426\u5c06\u519b\u5462\uff1f\n\n\u9996\u5148\u6211\u4eec\u8981\u627e\u5230\u738b\u5728\u54ea\u91cc\n\n\u7136\u540e\u6211\u4eec\u518d\u6765\u6839\u636e\u6bcf\u79cd\u68cb\u5b50\u7684\u7279\u6027\u6765\u5224\u65ad\n\n\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u5c31\u5fc5\u987b\u7528\u5230\u50cfdfs\u8ff7\u5bab\u7684\u90a3\u4e2adx\u548cdy\u4e86\n\n~~\u8fd9\u4e00\u6b65\u7279\u522b\u5bb9\u6613\u5199\u9519\uff0c\u672c\u840c\u65b0\u5728\u8fd9\u91cc\u6302\u4e86\u65e0\u6570\u6b21~~\n\n\u8fd9\u4e00\u6b65\u7684\u4ee3\u7801\u6211\u4eec\u5c31\u5728\u540e\u9762\u518d\u8bf4\uff08\u56e0\u4e3a\u8fd9\u4e00\u6b65\u548c\u79fb\u52a8\u68cb\u5b50\u8fd9\u4e00\u6b65\u662f\u6574\u4e2a\u9898\u6700\u5bb9\u6613\u51fa\u9519\u7684\u5730\u65b9\uff0c\u4e5f\u662f\u4ee3\u7801\u6700\u591a\u7684\u5730\u65b9\uff09\n\n\u4e0d\u8fc7\u672c\u840c\u65b0\u60f3\u7279\u522b\u8bf4\u4e00\u4e0b\u627e\u738b\u8fd9\u4e2a\u90e8\u5206\u3002\u5176\u5b9e\u672c\u6765\u6211\u4eec\u53ef\u4ee5\u7279\u522b\u8bb0\u5f55\u738b\u7684\u4f4d\u7f6e\u7684\uff0c\u4f46\u662f\u7531\u4e8e\u8fd9\u6837\u5bb9\u6613\u51fa\u9519\uff08\u660e\u660e\u662f\u6211\u61d2\u5f97\u6539\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u904d\u5386\u68cb\u76d8\u627e\u738b\u3002\u4f46\u662f\u53c8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u8981\u627e\u7684\u5750\u6807\u662f\u4e24\u4e2a\u6570\u5b57\u548c\u4e00\u4e2a\u5b57\u7b26\uff08\u738b\u7684\u989c\u8272\uff09\uff0c\u4f46\u662freturn\u5374\u53ea\u652f\u6301\u8f93\u51fa\u4e00\u4e2a\u53d8\u91cf\uff0c\u600e\u4e48\u529e\u5462QwQ\n\n\u6709\u7684\u5927\u4f6c\u8bf4\uff1a\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u8f6c\u5316\u4e3a\u7ed3\u6784\u4f53\u7684\u5f62\u5f0f\uff0c\u6216\u8005\u662f\u7528STL\u7684pair\n\n\u5f53\u7136\u53ef\u4ee5\uff0c\u4f46\u662f\u6211\u5374\u4e0d\u60f3\u90a3\u4e48\u9ebb\u70e6\uff0c\u6240\u4ee5\u6211\u7528\u5230\u4e86\u964d\u7ef4\u7684\u601d\u60f3\uff0c\u6211\u4eec\u77e5\u9053\u4efb\u610f\u4e00\u4e2a\u9ad8\u7ef4\u6570\u7ec4\u4e00\u5b9a\u53ef\u4ee5\u5316\u6210\u4f4e\u7ef4\u6570\u7ec4\uff0c\u53cd\u4e4b\u4ea6\u7136\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c06\u68cb\u76d8\u7684\u5750\u6807\u8f6c\u5316\u4e3a\u4e00\u4e2a\u6570\uff0c\u7531\u4e8e\u68cb\u76d8\u7684\u957f\u548c\u5bbd\u662f\u4e00\u5b9a\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4ee5\u4e0b\u65b9\u5f0f\u6765\u5199:\n\n```cpp\n//\u627e\u738b\nint find_king(int a)\n{\n\tint xx,yy;\n\tfor (int i=a+1;i<=90;i++)\n\t{\n\t\txx=(i-1)/9,yy=(i-1)%9;\n\t\tif (strcmp(mp[xx][yy],\"rK\")==0)\n\t\t\treturn i;\n\t\tif (strcmp(mp[xx][yy],\"bK\")==0)\n\t\t\treturn -i;\n\t}\n\treturn 0;\n}\n\nbool check_generals()\n{\n\t//\u627e\u7b2c\u4e00\u4e2a\u738b \n\t//find_king\u7528\u4e86\u4e8c\u7ef4\u6570\u7ec4\u964d\u7ef4\u7684\u601d\u60f3 \n\tk=find_king(0);//\u4ece0\u5f00\u59cb\u627e \n\tif (k==0)\n\t\treturn 0;//\u9519\u8bef\u7684\u60c5\u51b5\u53ef\u4ee5\u4e0d\u8003\u8651 \n\tif (k<0)//\u5148\u627e\u5230\u7684\u662f\u4ec0\u4e48\u989c\u8272\u7684\u738b \n\t\tcolor_find_king='b',k=-k;\n\telse\n\t\tcolor_find_king='r';\n\tint xx=(k-1)/9,yy=(k-1)%9,kk=k;//\u4e00\u7ef4\u8f6c\u4e8c\u7ef4\uff0c\u8ba1\u7b97\u51fa\u5750\u6807 \n\tif (find_king_Car(xx,yy)\n\t\t||find_king_S_and_G(xx,yy)\n\t\t||find_king_Ele(xx,yy)\n\t\t||find_king_horse(xx,yy)\n\t\t||find_king_duck(xx,yy))\n\t\treturn 1;//\u5c06\u519b \n\t\n\tk=find_king(kk+1);//\u61d2\u5f97\u8bb0\u5f55\u7b2c\u4e00\u6b21\u7684\u738b\u7684\u4f4d\u7f6e\uff0c\u5c31\u518d\u7b97\u4e00\u904d\uff0c\u4ece\u5b83\u7684\u4e0b\u4e00\u4e2a\u5f00\u59cb\u8ba1\u7b97 \n\tif (k==0)\n\t\treturn 0;\n\tif (k<0)\n\t\tcolor_find_king='b',k=-k;\n\telse\n\t\tcolor_find_king='r';//\u539f\u7406\u540c\u4e0a \n\txx=(k-1)/9,yy=(k-1)%9;\n\tif (find_king_Car(xx,yy)\n\t\t||find_king_S_and_G(xx,yy)\n\t\t||find_king_Ele(xx,yy)\n\t\t||find_king_horse(xx,yy)\n\t\t||find_king_duck(xx,yy))\n\t\treturn 1;//\u540c\u4e0a\u5c06\u519b \n\t\n\treturn 0;//\u6ca1\u6709\u5c06\u519b \n}\n```\n\n\u8fd9\u4e2a\u6837\u5b50\u6211\u4eec\u5c31\u53ef\u4ee5\u627e\u51fa\u738b\u7684\u5750\u6807\u4e86\uff08\u53d8\u91cf\u540d\u6709\u70b9\u4e11\uff0c\u5927\u5bb6\u8bf7\u539f\u8c05\u54e6QwQ\uff09\n\n\u6574\u4e2a\u7a0b\u5e8f\u7684\u6280\u672f\u90e8\u5206\u5927\u6982\u5c31\u53ea\u6709\u8fd9\u4e9b\u53ef\u8bf4\u7684\u4e86\n\n\u90a3\u4e48\u6211\u4eec\u7ee7\u7eed\u8bf4\u4e00\u4e0b\u4ee3\u7801\u8c03\u8bd5\u7684\u95ee\u9898\n\n\u9996\u5148\uff0c\u6839\u636e\u65c1\u8fb9\u7f16\u6e38\u620f\u7684\u5927\u4f6c\u5efa\u8bae\uff1a\u5199\u8fd9\u79cd\u5927\u6a21\u62df\uff08\u6e38\u620f\u4e5f\u662f\u4e00\u6837\uff09\uff0c\u5c3d\u91cf\u628a\u6bcf\u4e00\u4e2a\u90e8\u5206\u5199\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u8fd9\u6837\u4fbf\u4e8e\u4fee\u6539\u548c\u8c03\u8bd5\uff1b\n\n\u5176\u6b21\uff0c\u5728\u5199\u4ee3\u7801\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u8bb0\u5f97\u5199\u6ce8\u91ca\uff0c\u5e76\u4e14\u8981\u505a\u4e00\u6b65\u5199\u4e00\u6b65\uff0c\u89c9\u5f97\u8fd9\u4e00\u6b65\u65e0\u8bef\u4e86\u4e4b\u540e\u518d\u53bb\u5199\u4e0b\u4e00\u6b65\n\n\u4ee3\u7801\u7ed3\u6784\u4e00\u5b9a\u8981\u6e05\u6670\uff1a\u7279\u522b\u662f\u90a3\u79cd\u7801\u98ce\u4e11\u5f97\u50cf\u9a6c\u8702\u7a9d\u4e00\u6837\u7684\u7801\u98ce\uff0c\u8fd8\u8981\u90a3\u4e9b\u5927\u62ec\u53f7\u4e00\u4e0a\u4e00\u4e0b\u7684\u7f29\u8fdb\u4e00\u591a\u4e00\u5c11\u7684\u90a3\u79cd\uff0c\u4e00\u5b9a\u4e0d\u8981\uff08\u867d\u7136\u672c\u840c\u65b0\u7684\u7801\u98ce\u4e5f\u4e0d\u662f\u5f88\u597d\u770b\uff0c\u4f46\u662f\u672c\u840c\u65b0\u8fd8\u662f\u89c9\u5f97\u80fd\u4e00\u773c\u770b\u6e05\u7ed3\u6784\u6bd4\u8f83\u6574\u9f50\uff08\u5c24\u5176\u662f\u5728\u770b\u4ee3\u7801\u7565\u7f29\u56fe\u7684\u65f6\u5019\uff09\uff09\uff1b\u6700\u540e\uff0c\u53d8\u91cf\u540d\u548c\u51fd\u6570\u540d\u4e00\u5b9a\u8981\u53d6\u5f97\u6709\u610f\u4e49\uff0c\u6309\u7167\u82f1\u6587\u548c\u62fc\u97f3\u6765\u53d6\u90fd\u53ef\u4ee5\uff0c\u4e0d\u8981\u4ec0\u4e48\u90fd\u53d6pig\u4e4b\u7c7b\u7684\uff0c\u8981\u786e\u4fdd\u81ea\u5df1\u80fd\u4e00\u773c\u770b\u51fa\u6765\u8fd9\u4e2a\u51fd\u6570\u662f\u4ec0\u4e48\u610f\u601d\n\n\u7528Dev-C++\u7684\u90fd\u77e5\u9053\uff0cDev-C++\u5728\u8c03\u8bd5\u7684\u65f6\u5019\u7ecf\u5e38\u51fa\u9505\uff08\u6bd4\u5982\u5565\u7a81\u7136\u5c31\u5d29\u6e83\u4e86\uff0c\u6216\u8005\u6ca1\u6cd5\u8c03\u8bd5\uff0c\u6216\u8005\u6362\u4e2a\u51fd\u6570\u90a3\u4e2a\u76f8\u540c\u53d8\u91cf\u540d\u7684\u53d8\u91cf\u4ed6\u5c31\u4e0d\u53d8\u4e86\u4e4b\u7c7b\u7684\uff09\n\n\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u53ea\u4f9d\u9760Dev-C++\uff0c\u6211\u4eec\u8fd8\u8981\u624b\u52a8\u8c03\u8bd5\uff0c\u6bd4\u5982\u8f93\u51fa\u4e2d\u95f4\u53d8\u91cf\u554a\uff0c\u6216\u8005system(\"pause\")\u6682\u505c\u7a0b\u5e8f\u4e4b\u7c7b\u7684\uff0c\u90fd\u5f88\u91cd\u8981\n\n\u76f8\u4fe1\u5404\u4f4d\u7684\u6559\u7ec3\u90fd\u544a\u8bc9\u8fc7\u5927\u5bb6\uff1a\u4e00\u5b9a\u8981\u8bb0\u5f97\u6ce8\u91ca\u8f93\u51fa\u4e2d\u95f4\u53d8\u91cf\u8bed\u53e5\u4e4b\u7c7b\u7684\u8bdd\uff0c\u7684\u786e\uff0c\u8fd9\u4e5f\u5f88\u91cd\u8981\uff08\u800c\u4e14\u6709\u7684\u5934\u6587\u4ef6\u4e5f\u8981\u6ce8\u91ca\uff0c\u6bd4\u5982windows.h\u6216\u8005con\uff08\u8fd9\u4e9b\u90fd\u4e0d\u518d\u4e07\u80fd\u5934\u91cc\u9762\uff09\uff09\n\n\u6700\u540e\uff0c\u6211\u4eec\u8fd8\u662f\u6765\u770b\u4e00\u4e0b\u5b8c\u6574\u4ee3\u7801\u5427\uff08\u914d\u8be6\u7ec6\u6ce8\u91ca\u7684\u54e6\uff09\n\n```cpp\n#include<bits/stdc++.h>\n//#include<windows.h>\nusing namespace std;\nint q,X1,X2,Y1,Y2,k;\nbool term=1,gameover;\nchar color_find_king;\nchar mp[11][11][11]=\n{\n{\"rC\",\"rH\",\"rE\",\"rG\",\"rK\",\"rG\",\"rE\",\"rH\",\"rC\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"rD\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"rD\"},\n{\"rS\",\"0\",\"rS\",\"0\",\"rS\",\"0\",\"rS\",\"0\",\"rS\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"bS\",\"0\",\"bS\",\"0\",\"bS\",\"0\",\"bS\",\"0\",\"bS\"},\n{\"bD\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"bD\"},\n{\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\",\"0\"},\n{\"bC\",\"bH\",\"bE\",\"bG\",\"bK\",\"bG\",\"bE\",\"bH\",\"bC\"},\n};\n\n//\u8f93\u51fa\u5730\u56fe\u73b0\u5728\u5f62\u6001 \nvoid print_map()//\u8f93\u51fa\u73b0\u5728\u7684\u5730\u56fe\n{\n\tfor (int i=9;i>=0;i--)//\u7531\u4e8e\u4e3a\u4e86\u65b9\u4fbf\u5b58\u53d6\uff0c\u5c06\u5730\u56fe\u4ee5\u9898\u76ee\u544a\u77e5\u7684\u5f62\u5f0f\u5b58\u50a8\n\t{//\u6240\u4ee5\u884c\u53f7\u5012\u53d9\u8f93\u51fa\uff0c\u4f46\u662f\u8f93\u51fa\u4e4b\u540e\u5f62\u5f0f\u4f9d\u7136\u4e3a\u5de6\u4e0b\u89d2\u4e3a(0,0)\n\t\tcout<<setw(5)<<i;//\u8f93\u51fa\u7eb5\u5750\u6807\n\t\tfor (int j=0;j<=8;j++)\n\t\t\tcout<<setw(5)<<mp[i][j];\n\t\tprintf(\"\\n\");\n\t}\n\tcout<<setw(5)<<\" \";\n\tfor (int i=0;i<=8;i++)\n\t\tcout<<setw(5)<<i;//\u8f93\u51fa\u6a2a\u5750\u6807\n\tprintf(\"\\n\\n\");\n}\n\n//\u627e\u738b\nint find_king(int a)\n{\n\tint xx,yy;\n\tfor (int i=a+1;i<=90;i++)\n\t{\n\t\txx=(i-1)/9,yy=(i-1)%9;\n\t\tif (strcmp(mp[xx][yy],\"rK\")==0)\n\t\t\treturn i;\n\t\tif (strcmp(mp[xx][yy],\"bK\")==0)\n\t\t\treturn -i;\n\t}\n\treturn 0;\n}\n\n//\u5224\u65ad\u662f\u5426\u6709\u8f66\nint find_king_Car(int xx,int yy)\n{\n\tk=xx+1;\n\twhile (strcmp(mp[k][yy],\"0\")==0&&k<=8)\n\t\tk++;\n\tif (mp[k][yy][0]!=color_find_king&&mp[k][yy][1]=='C')\n\t\treturn 1;\n\n\tk=xx-1;\n\twhile (strcmp(mp[k][yy],\"0\")==0&&k>=0)\n\t\tk--;\n\tif (mp[k][yy][0]!=color_find_king&&mp[k][yy][1]=='C')\n\t\treturn 1;\n\n\tk=yy+1;\n\twhile (strcmp(mp[xx][k],\"0\")==0&&k<=9)\n\t\tk++;\n\tif (mp[xx][k][0]!=color_find_king&&mp[xx][k][1]=='C')\n\t\treturn 1;\n\n\tk=yy-1;\n\twhile (strcmp(mp[xx][k],\"0\")==0&&k>=0)\n\t\tk--;\n\tif (mp[xx][k][0]!=color_find_king&&mp[xx][k][1]=='C')\n\t\treturn 1;\n\treturn 0;\n}\n\n//\u5224\u65ad\u662f\u5426\u6709\u5175\u548c\u58eb\nint find_king_S_and_G(int xx,int yy)\n{\n\tint dx[11]={0,1,1,-1,-1},dy[11]={0,1,-1,1,-1};\n\tfor (int i=1;i<=4;i++)\n\t\tif (color_find_king!=mp[xx+dx[i]][yy+dy[i]][0]&&(mp[xx+dx[i]][yy+dy[i]][1]=='S'||mp[xx+dx[i]][yy+dy[i]][1]=='G'))\n\t\t\treturn 1;\n\tint dx1[11]={0,1,0,-1,0},dy1[11]={0,0,1,0,-1};\n\tfor (int i=1;i<=4;i++)\n\t\tif (color_find_king!=mp[xx+dx1[i]][yy+dy1[i]][0]&&(mp[xx+dx1[i]][yy+dy1[i]][1]=='S'||mp[xx+dx1[i]][yy+dy1[i]][1]=='K'))\n\t\t\treturn 1;\n\treturn 0;\n}\n\n//\u5224\u65ad\u662f\u5426\u6709\u8c61\nint find_king_Ele(int xx,int yy)\n{\n\tint dx[11]={0,2,2,-2,-2},dy[11]={0,2,-2,2,-2};\n\tint dx1[11]={0,1,1,-1,-1},dy1[11]={0,1,-1,1,-1};\n\tfor (int i=1;i<=4;i++)\n\t\tif (strcmp(mp[xx+dx1[i]][yy+dy1[i]],\"0\")==0&&mp[xx+dx[i]][yy+dy[i]][0]!=color_find_king&&mp[xx+dx[i]][yy+dy[i]][1]=='E')\n\t\t\treturn 1;\n\treturn 0;\n}\n\n//\u5224\u65ad\u662f\u5426\u6709\u9a6c\nint find_king_horse(int xx,int yy)\n{\n\tint dx[11]={0,1,-1,2,-2,2,-2,1,-1},dy[11]={0,-2,-2,-1,-1,1,1,2,2};\n\tint dx1[11]={0,1,-1,1,-1,1,-1,1,-1},dy1[11]={0,-1,-1,-1,-1,1,1,1,1};\n\tfor (int i=1;i<=8;i++)\n\t\tif (strcmp(mp[xx+dx1[i]][yy+dy1[i]],\"0\")==0&&mp[xx+dx[i]][yy+dy[i]][0]!=color_find_king&&mp[xx+dx[i]][yy+dy[i]][1]=='H')\n\t\t\treturn 1;\n\treturn 0;\n}\n\n//\u5224\u65ad\u662f\u5426\u6709\u9e2d\nint find_king_duck(int xx,int yy)\n{\n\tint dx[11]={0,2,-2,3,-3,3,-3,2,-2},dy[11]={0,-3,-3,-2,-2,2,2,3,3};\n\tint dx1[11]={0,2,-2,2,-2,2,-2,2,-2},dy1[11]={0,-2,-2,-2,-2,2,2,2,2};\n\tint dx2[11]={0,1,-1,1,-1,1,-1,1,-1},dy2[11]={0,-1,-1,-1,-1,1,1,1,1};\n\tfor (int i=1;i<=8;i++)\n\t\tif (strcmp(mp[xx+dx1[i]][yy+dy1[i]],\"0\")==0&&strcmp(mp[xx+dx2[i]][yy+dy2[i]],\"0\")==0&&mp[xx+dx[i]][yy+dy[i]][0]!=color_find_king&&mp[xx+dx[i]][yy+dy[i]][1]=='D')\n\t\t\treturn 1;\n\treturn 0;\n}\n\n//\u5224\u65ad\u662f\u5426\u5c06\u519b\nbool check_generals()\n{\n\t//\u627e\u7b2c\u4e00\u4e2a\u738b \n\t//find_king\u7528\u4e86\u4e8c\u7ef4\u6570\u7ec4\u964d\u7ef4\u7684\u601d\u60f3 \n\tk=find_king(0);//\u4ece0\u5f00\u59cb\u627e \n\tif (k==0)\n\t\treturn 0;//\u9519\u8bef\u7684\u60c5\u51b5\u53ef\u4ee5\u4e0d\u8003\u8651 \n\tif (k<0)//\u5148\u627e\u5230\u7684\u662f\u4ec0\u4e48\u989c\u8272\u7684\u738b \n\t\tcolor_find_king='b',k=-k;\n\telse\n\t\tcolor_find_king='r';\n\tint xx=(k-1)/9,yy=(k-1)%9,kk=k;//\u4e00\u7ef4\u8f6c\u4e8c\u7ef4\uff0c\u8ba1\u7b97\u51fa\u5750\u6807 \n\tif (find_king_Car(xx,yy)\n\t\t||find_king_S_and_G(xx,yy)\n\t\t||find_king_Ele(xx,yy)\n\t\t||find_king_horse(xx,yy)\n\t\t||find_king_duck(xx,yy))\n\t\treturn 1;//\u5c06\u519b \n\t\n\tk=find_king(kk+1);//\u61d2\u5f97\u8bb0\u5f55\u7b2c\u4e00\u6b21\u7684\u738b\u7684\u4f4d\u7f6e\uff0c\u5c31\u518d\u7b97\u4e00\u904d\uff0c\u4ece\u5b83\u7684\u4e0b\u4e00\u4e2a\u5f00\u59cb\u8ba1\u7b97 \n\tif (k==0)\n\t\treturn 0;\n\tif (k<0)\n\t\tcolor_find_king='b',k=-k;\n\telse\n\t\tcolor_find_king='r';//\u539f\u7406\u540c\u4e0a \n\txx=(k-1)/9,yy=(k-1)%9;\n\tif (find_king_Car(xx,yy)\n\t\t||find_king_S_and_G(xx,yy)\n\t\t||find_king_Ele(xx,yy)\n\t\t||find_king_horse(xx,yy)\n\t\t||find_king_duck(xx,yy))\n\t\treturn 1;//\u540c\u4e0a\u5c06\u519b \n\t\n\treturn 0;//\u6ca1\u6709\u5c06\u519b \n}\n\nvoid print_piece(char s[])\n{\n\tif (s[0]=='r')\n\t\tcout<<\"red \";\n\telse if (s[0]=='b')\n\t\tcout<<\"blue \";//\u5224\u65ad\u989c\u8272 \n\tif (s[1]=='K')\n\t\tcout<<\"captain;\";\n\telse if (s[1]=='G')\n\t\tcout<<\"guard;\";\n\telse if (s[1]=='E')\n\t\tcout<<\"elephant;\";\n\telse if (s[1]=='H')\n\t\tcout<<\"horse;\";\n\telse if (s[1]=='C')\n\t\tcout<<\"car;\";\n\telse if (s[1]=='S')\n\t\tcout<<\"soldier;\";\n\telse if (s[1]=='D')\n\t\tcout<<\"duck;\";//\u5224\u65ad\u5175\u578b \n}\n\n//\u4e0b\u4e00\u56de\u5408\nvoid goon_game()\n{\n\tif (term==0)//\u4e0a\u4e00\u4e2a\u662f\u7ea2\u8272\u4e0b\u4e00\u4e2a\u5c31\u662f\u7eff\u8272\n\t\tterm=1;\n\telse//vice versa\n\t\tterm=0;\n}\n\n//\u5224\u65ad\u68cb\u5c40\u5e76\u4e14\u8f93\u51fa\nvoid check_game(int xxx,int yyy,char ss[])\n{\n\tprint_piece(mp[xxx][yyy]);//\u8f93\u51fa\u5f53\u524d\u8fd9\u4e2a\u70b9\u7684\u68cb\u5b50\uff08\u4e5f\u5c31\u662f\u79fb\u52a8\u7684\u68cb\u5b50\n\tif (strcmp(ss,\"0\")==0)//\u5982\u679c\u8d70\u5230\u7684\u8fd9\u4e2a\u70b9\u539f\u6765\u6ca1\u6709\u68cb\u5b50\n\t\tprintf(\"NA;\");//\u8f93\u51faNA;\n\telse//\u5426\u5219\n\t\tprint_piece(ss);//\u8f93\u51fa\u8fd9\u4e2a\u68cb\u5b50\n\tif (strcmp(ss,\"rK\")==0||strcmp(ss,\"bK\")==0)//\u5982\u679c\u8fd9\u4e2a\u68cb\u5b50\u4e3a\u67d0\u4e00\u65b9\u7684\u738b\n\t{\n\t\tprintf(\"no;yes\\n\");//\u8f93\u51fa\u672a\u5c06\u519b\uff0c\u5e76\u4e14\u6e38\u620f\u5df2\u7ed3\u675f\n\t\tgameover=1;//\u6807\u8bb0\u6e38\u620f\u4ee5\u7ed3\u675f\n\t\tgoon_game();\n\t\treturn ;//\u505c\u6b62\u64cd\u4f5c\n\t}\n\telse if (check_generals())//\u5426\u5219\u68c0\u67e5\u662f\u5426\u5c06\u519b\n\t{\n\t\tprintf(\"yes;no\\n\");//\u8f93\u51fa\u5c06\u519b\uff0c\u5e76\u4e14\u6e38\u620f\u672a\u7ed3\u675f\n\t\tgoon_game();\n\t\treturn ;\t\t\n\t}\n\tprintf(\"no;no\\n\");//\u90fd\u4e0d\u6ee1\u8db3\u8f93\u51fano;no\n\tgoon_game();\n}\n\n//\u8d70\u738b\nvoid move_K(int xx,int yy,int xxx,int yyy)\n{\n\tif ((abs(xxx-xx)==1&&abs(yyy-yy)==0)||(abs(xxx-xx)==0&&abs(yyy-yy)==1))\n\t{//\u5982\u679c\u662f\u53ea\u5f80\u4e0a\u6216\u4e0b\u6216\u5de6\u6216\u53f3\u8d70\uff1a\u5408\u6cd5\n\t\tchar ss[11];\n\t\tstrcpy(ss,\"0\");//\u5b9a\u4e49\u5e76\u4e3a\u5b57\u7b26\u4e32\u8d4b\u521d\u503c\n\t\tif (mp[xxx][yyy][0]==mp[xx][yy][0])\n\t\t{\n\t\t\tprintf(\"Invalid command\\n\");\n\t\t\treturn ;\n\t\t}\n\t\tif (strcmp(mp[xxx][yyy],\"0\")!=0)//\u5982\u679c\u8d70\u5230\u7684\u5730\u65b9\u4e0d\u4e3a\u7a7a\n\t\t\tstrcpy(ss,mp[xxx][yyy]);//\u8bb0\u5f55\u4e0b\u8fd9\u4e2a\u5730\u65b9\u7684\u68cb\u5b50\n\t\tstrcpy(mp[xxx][yyy],mp[xx][yy]);//\u66ff\u6362\u6389\u8fd9\u4e2a\u5730\u65b9\u7684\u68cb\u5b50\n\t\tstrcpy(mp[xx][yy],\"0\");//\u5c06\u539f\u6765\u79fb\u52a8\u7684\u68cb\u5b50\u90a3\u4e2a\u5730\u65b9\u8868\u793a\u4e3a\u7a7a\n\t\tcheck_game(xxx,yyy,ss);//\u68c0\u67e5\u5e76\u8f93\u51fa\u6e38\u620f\n\t\treturn ;\n\t}\n\tprintf(\"Invalid command\\n\");//\u4e0d\u6ee1\u8db3\u5c31\u8f93\u51fa\u4e0d\u5408\u6cd5\n} \n\n//\u8d70\u58eb \nvoid move_G(int xx,int yy,int xxx,int yyy)\n{\n\tif (abs(xxx-xx)==1&&abs(yyy-yy)==1)\n\t{//\u5982\u679c\u53ea\u80fd\u659c\u7740\u8d70\u4e00\u6b65\u4e3a\u5408\u6cd5\n\t\tchar ss[11];\n\t\tstrcpy(ss,\"0\");//\u5b9a\u4e49\u5e76\u4e3a\u5b57\u7b26\u4e32\u8d4b\u521d\u503c\n\t\tif (mp[xxx][yyy][0]==mp[xx][yy][0])\n\t\t{\n\t\t\tprintf(\"Invalid command\\n\");\n\t\t\treturn ;\n\t\t}\n\t\tif (strcmp(mp[xxx][yyy],\"0\")!=0)//\u5982\u679c\u8d70\u5230\u5730\u65b9\u4e0d\u4e3a\u7a7a\n\t\t\tstrcpy(ss,mp[xxx][yyy]);//\u8bb0\u5f55\u4e0b\u8fd9\u4e2a\u5730\u65b9\u7684\u68cb\u5b50\n\t\tstrcpy(mp[xxx][yyy],mp[xx][yy]);//\u79fb\u52a8\u68cb\u5b50\n\t\tstrcpy(mp[xx][yy],\"0\");//\u5c06\u539f\u6765\u8fd9\u4e2a\u68cb\u5b50\u6240\u5728\u7684\u5730\u65b9\u53d8\u6210\u7a7a\n\t\tcheck_game(xxx,yyy,ss);//\u68c0\u67e5\u5e76\u8f93\u51fa\u6e38\u620f\n\t\treturn ;\n\t}\n\tprintf(\"Invalid command\\n\");//\u4e0d\u5408\u6cd5\u5c31\u8f93\u51fa\u4e0d\u6ee1\u8db3\n} \n\n//\u8d70\u8c61 \nvoid move_E(int xx,int yy,int xxx,int yyy)\n{\n\tif (abs(xxx-xx)==2&&abs(yyy-yy)==2&&strcmp(mp[(xx+xxx)/2][(yy+yyy)/2],\"0\")==0)\n\t{//\u8c61\u8d70\u65e5\u5e76\u4e14\u65e5\u5b57\u4e2d\u95f4\u4e00\u70b9\u6ca1\u6709\u68cb\u5b50\n\t\tchar ss[11];\n\t\tstrcpy(ss,\"0\");\n\t\tif (mp[xxx][yyy][0]==mp[xx][yy][0])\n\t\t{\n\t\t\tprintf(\"Invalid command\\n\");\n\t\t\treturn ;\n\t\t}\n\t\tif (strcmp(mp[xxx][yyy],\"0\")!=0)\n\t\t\tstrcpy(ss,mp[xxx][yyy]);\n\t\tstrcpy(mp[xxx][yyy],mp[xx][yy]);\n\t\tstrcpy(mp[xx][yy],\"0\");\n\t\tcheck_game(xxx,yyy,ss);\n\t\treturn ;//\u540c\u4e0a\n\t}\n\tprintf(\"Invalid command\\n\");\n} \n\n//\u8d70\u9a6c \nvoid move_H(int xx,int yy,int xxx,int yyy)\n{\n\tif ((abs(xxx-xx)==2&&abs(yyy-yy)==1&&strcmp(mp[(xxx+xx)/2][yy],\"0\")==0)||(abs(xxx-xx)==1&&abs(yyy-yy)==2&&strcmp(mp[xx][(yy+yyy)/2],\"0\")==0))\n\t{\n\t\tchar ss[11];\n\t\tstrcpy(ss,\"0\");\n\t\tif (mp[xxx][yyy][0]==mp[xx][yy][0])\n\t\t{\n\t\t\tprintf(\"Invalid command\\n\");\n\t\t\treturn ;\n\t\t}\n\t\tif (strcmp(mp[xxx][yyy],\"0\")!=0)\n\t\t\tstrcpy(ss,mp[xxx][yyy]);\n\t\tstrcpy(mp[xxx][yyy],mp[xx][yy]);\n\t\tstrcpy(mp[xx][yy],\"0\");\n\t\tcheck_game(xxx,yyy,ss);\n\t\treturn ;//\u540c\u4e0a\n\t}\n\tprintf(\"Invalid command\\n\");\n} \n\n//\u8d70\u8f66 \nvoid move_C(int xx,int yy,int xxx,int yyy)\n{//\u8f66\u8d70\u76f4\u7ebf\n\tif (xx!=xxx&&yy!=yyy)\n\t{\n\t\tprintf(\"Invalid command\\n\");\n\t\treturn ;\n\t}\n\tif (xx==xxx)//\u5982\u679c\u5728\u540c\u4e00\u884c\n\t{\n\t\tfor (int i=min(yy,yyy)+1;i<=max(yy,yyy)-1;i++)//\u641c\u7d22\u8d70\u7684\u8def\u5f84\u4e2d\u6709\u6ca1\u6709\u68cb\u5b50\n\t\t\tif (strcmp(mp[xx][i],\"0\")!=0)//\u6709\u68cb\u5b50\n\t\t\t{\n\t\t\t\tprintf(\"Invalid command\\n\");\n\t\t\t\treturn ;//\u4e0d\u5408\u6cd5\n\t\t\t}\n\t}\n\telse if (yy==yyy)//\u5728\u540c\u4e00\u5217\u4e0a\n\t{\n\t\tfor (int i=min(xx,xxx)+1;i<=max(xx,xxx)-1;i++)//\u641c\u7d22\u8def\u5f84\n\t\t\tif (strcmp(mp[i][yy],\"0\")!=0)//\u5224\u65ad\u4e2d\u95f4\u662f\u5426\u6709\u68cb\u5b50\n\t\t\t{\n\t\t\t\tprintf(\"Invalid command\\n\");\n\t\t\t\treturn ;\n\t\t\t}\n\t}\n\tchar ss[11];\n\tstrcpy(ss,\"0\");\n\tif (mp[xxx][yyy][0]==mp[xx][yy][0])\n\t{\n\t\tprintf(\"Invalid command\\n\");\n\t\treturn ;\n\t}\n\tif (strcmp(mp[xxx][yyy],\"0\")!=0)\n\t\tstrcpy(ss,mp[xxx][yyy]);\n\tstrcpy(mp[xxx][yyy],mp[xx][yy]);\n\tstrcpy(mp[xx][yy],\"0\");\n\tcheck_game(xxx,yyy,ss);\n\treturn ;//\u540c\u4e0a\n} \n\n//\u8d70\u5175 \nvoid move_S(int xx,int yy,int xxx,int yyy)\n{\n\tif ((abs(xxx-xx)==1&&abs(yyy-yy)==1)||(abs(xxx-xx)==1&&abs(yyy-yy)==0)||(abs(xxx-xx)==0&&abs(yyy-yy)==1))\n\t{//\u5175\u53ea\u80fd\u5728\u5468\u56f4\u76848\u4e2a\u91cc\u9762\u8d70\n\t\tchar ss[11];\n\t\tstrcpy(ss,\"0\");\n\t\tif (mp[xxx][yyy][0]==mp[xx][yy][0])\n\t\t{\n\t\t\tprintf(\"Invalid command\\n\");\n\t\t\treturn ;\n\t\t}\n\t\tif (strcmp(mp[xxx][yyy],\"0\")!=0)\n\t\t\tstrcpy(ss,mp[xxx][yyy]);\n\t\tstrcpy(mp[xxx][yyy],mp[xx][yy]);\n\t\tstrcpy(mp[xx][yy],\"0\");\n\t\tcheck_game(xxx,yyy,ss);\n\t\treturn ;//\u540c\u4e0a\n\t}\n\tprintf(\"Invalid command\\n\");\n} \n\n//\u8d70\u9e2d\nvoid move_D(int xx,int yy,int xxx,int yyy)\n{\n\tif (  (xxx-xx==3&&yyy-yy==2&&strcmp(mp[xx+1][yy],\"0\")==0&&strcmp(mp[xx+2][yy+1],\"0\")==0)\n\t\t||(xxx-xx==3&&yy-yyy==2&&strcmp(mp[xx+1][yy],\"0\")==0&&strcmp(mp[xx+2][yy-1],\"0\")==0)\n\t\t||(xx-xxx==3&&yyy-yy==2&&strcmp(mp[xx-1][yy],\"0\")==0&&strcmp(mp[xx-2][yy+1],\"0\")==0)\n\t\t||(xx-xxx==3&&yy-yyy==2&&strcmp(mp[xx-1][yy],\"0\")==0&&strcmp(mp[xx-2][yy-1],\"0\")==0)\n\t\t||(xxx-xx==2&&yyy-yy==3&&strcmp(mp[xx][yy+1],\"0\")==0&&strcmp(mp[xx+1][yy+2],\"0\")==0)\n\t\t||(xxx-xx==2&&yy-yyy==3&&strcmp(mp[xx][yy-1],\"0\")==0&&strcmp(mp[xx+1][yy-2],\"0\")==0)\n\t\t||(xx-xxx==2&&yyy-yy==3&&strcmp(mp[xx][yy+1],\"0\")==0&&strcmp(mp[xx-1][yy+2],\"0\")==0)\n\t\t||(xx-xxx==2&&yy-yyy==3&&strcmp(mp[xx][yy-1],\"0\")==0&&strcmp(mp[xx-1][yy-2],\"0\")==0))\n\t{//\u9e2d\u5b50\u7684\u516b\u4e2a\u65b9\u5411\n\t\tchar ss[11];\n\t\tstrcpy(ss,\"0\");\n\t\tif (mp[xxx][yyy][0]==mp[xx][yy][0])\n\t\t{\n\t\t\tprintf(\"Invalid command\\n\");\n\t\t\treturn ;\n\t\t}\n\t\tif (strcmp(mp[xxx][yyy],\"0\")!=0)\n\t\t\tstrcpy(ss,mp[xxx][yyy]);\n\t\tstrcpy(mp[xxx][yyy],mp[xx][yy]);\n\t\tstrcpy(mp[xx][yy],\"0\");\n\t\tcheck_game(xxx,yyy,ss);\n\t\treturn ;//\u540c\u4e0a\n\t}\n\tprintf(\"Invalid command\\n\");\n} \n\n//\u5224\u65ad\u662f\u5c5e\u4e8e\u7ea2\u65b9(0)\u8fd8\u662f\u84dd\u65b9(1)\nbool check_color(int xx,int yy)\n{\n\tif (strcmp(mp[xx][yy],\"rK\")==0||strcmp(mp[xx][yy],\"rG\")==0||strcmp(mp[xx][yy],\"rE\")==0||strcmp(mp[xx][yy],\"rH\")==0||strcmp(mp[xx][yy],\"rC\")==0||strcmp(mp[xx][yy],\"rS\")==0||strcmp(mp[xx][yy],\"rD\")==0)\n\t\treturn 0;//\u662f\u7ea2\u8272\u8fd4\u56de0\n\treturn 1;//\u84dd\u8272\u8fd4\u56de1\n} \n\n//\u5224\u65ad\u56de\u5408\u662f\u5426\u6b63\u786e (\u7b2c\u4e00\u5c40\u662f\u4ece\u7ea2\u8272\u5f00\u59cb\uff0c\u6240\u4ee5\u5b83\u7684\u4e0a\u4e00\u4e2a\u662f\u84dd\u82721)\nbool check_term(int xx,int yy)//\u5224\u65ad\u8d70\u7684\u8fd9\u4e2a\u68cb\u7684\u989c\u8272\u662f\u5426\u4e0e\u4e0a\u4e00\u6b21\u6b63\u786e\u7684\u989c\u8272\u76f8\u540c\n{\n\tif ((term==0&&check_color(xx,yy)==1)||(term==1&&check_color(xx,yy)==0))\n\t{//\u4e0a\u4e00\u4e2a\u662f\u7ea2\u8272\u8fd9\u4e2a\u5c31\u662f\u84dd\u8272\u6216\u8005\u4e0a\u4e00\u4e2a\u662f\u84dd\u8272\u8fd9\u4e00\u4e2a\u662f\u7ea2\u8272\n\t\treturn true;//\u8fd4\u56de\u4e3a\u6b63\u786e\n\t}\n\treturn false;//\u5426\u5219\u4e3a\u9519\u8bef\n} \n//\u5224\u65ad\u662f\u5426\u8d8a\u754c\nvoid check(int xx,int yy,int xxx,int yyy)\n{\n\tif (gameover==1)//\u5982\u679c\u6e38\u620f\u7ed3\u675f\u8fc7\u4e86\n\t{\n\t\tprintf(\"Invalid command\\n\");\n\t\treturn ;\n\t}\n\tif (strcmp(mp[xx][yy],\"0\")==0)//\u5982\u679c\u8fd9\u4e2a\u70b9\u6ca1\u6709\u68cb\u5b50\n\t{\n\t\tprintf(\"Invalid command\\n\");\n\t\treturn ;\n\t}\n\tif (check_term(xx,yy)==false)//\u5982\u679c\u56de\u5408\u4e0d\u5bf9\n\t{\n\t\tprintf(\"Invalid command\\n\");\n\t\treturn ;\n\t}\n\t//\u5224\u65ad\u8fd9\u4e2a\u70b9\u662f\u4ec0\u4e48\u68cb\u5b50(\u4e0d\u770b\u989c\u8272),\u53ea\u770b\u6700\u540e\u4e00\u4e2a\u5b57\u6bcd\n\tif (mp[xx][yy][1]=='K')\n\t\tmove_K(xx,yy,xxx,yyy);//\u8d70\u738b\n\telse if (mp[xx][yy][1]=='G')\n\t\tmove_G(xx,yy,xxx,yyy);//\u8d70\u58eb\n\telse if (mp[xx][yy][1]=='E')\n\t\tmove_E(xx,yy,xxx,yyy);//\u8d70\u8c61\n\telse if (mp[xx][yy][1]=='H')\n\t\tmove_H(xx,yy,xxx,yyy);//\u8d70\u9a6c\n\telse if (mp[xx][yy][1]=='C')\n\t\tmove_C(xx,yy,xxx,yyy);//\u8d70\u8f66\n\telse if (mp[xx][yy][1]=='S')\n\t\tmove_S(xx,yy,xxx,yyy);//\u8d70\u5175\n\telse if (mp[xx][yy][1]=='D')\n\t\tmove_D(xx,yy,xxx,yyy);//\u8d70\u9e2d\n}\n\nint main()\n{\n//\tfreopen(\"2.in\",\"r\",stdin);\n\tscanf(\"%d\",&q);//\u8f93\u5165\u8be2\u95ee\u6570 \n//\tprint_map();\n\t// system(\"pause\");\n\tfor (int i=1;i<=q;i++)\n\t{\n\t\tscanf(\"%d%d%d%d\",&X1,&Y1,&X2,&Y2);//\u8f93\u5165\u6bcf\u4e00\u4e2a\u8be2\u95ee \n\t\tcheck(X1,Y1,X2,Y2);//\u68c0\u67e5\u4ece(X1,Y1)\u5230(X2,Y2)\n//\t\tprint_map();\n\t\t// system(\"pause\");\n\t}\n\treturn 0;\n}\n```\n\n\u5b8c\u7ed3\u6492\u82b1\n\n\u8c22\u8c22\u5927\u5bb6\u7684\u652f\u6301\u4e0e\u89c2\u770bQwQ\n\n\u963f\u91cc\u560e\u591avery much\n\n   *by  Li_Dicker*",
        "postTime": 1573526238,
        "uid": 64373,
        "name": "Li_Dicker",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "## \u68b3\u7406\u9898\u610f\n\n\u8bfb\u5165\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5224\u65ad\u662f\u5426\u5408\u6cd5\uff0c\u4e0d\u5408\u6cd5\u8f93\u51fa $Invalid\\ command$\n\n\u5408\u6cd5\u8f93\u51fa\u4ee5\u4e0b\u56db\u4e2a\u95ee\u9898\u7684\u7b54\u6848\uff0c**\u7528\u5206\u53f7\u9694\u5f00**\uff1a\n\n- \u88ab\u79fb\u52a8\u7684\u68cb\u5b50\n\n- \u88ab\u5403\u6389\u7684\u68cb\u5b50\uff0c\u6ca1\u6709\u8f93\u51fa $NA$\n\n- \u662f\u5426\u5f62\u6210\u5c06\u519b\u5c40\u9762\n\n- \u6e38\u620f\u662f\u5426\u7ed3\u675f\n\n\u6b64\u9898\u540c\u65f6\u4e5f\u5341\u5206\u826f\u5fc3\u7684\u7ed9\u51fa\u4e86\u6240\u6709\u4e0d\u5408\u6cd5\u7684\u60c5\u51b5\uff1a\n\n- \u5c06\u68cb\u5b50\u79fb\u52a8\u5230\u68cb\u76d8\u5916\u7684\u67d0\u4e2a\u4f4d\u7f6e\n\n- \u6b64\u6b65\u79fb\u52a8\u7684\u521d\u59cb\u4f4d\u7f6e\u65e0\u5df1\u65b9\u68cb\u5b50\u505c\u7559\n\n- \u6b64\u6b65\u79fb\u52a8\u7684\u521d\u59cb\u4f4d\u7f6e\u6709\u5df1\u65b9\u68cb\u5b50\u505c\u7559\uff0c\u4f46\u79fb\u52a8\u4e0d\u7b26\u5408\u89c4\u5219\n\n- \u6b64\u6b65\u79fb\u52a8\u7684\u7ec8\u6b62\u4f4d\u7f6e\u6709\u5df1\u65b9\u68cb\u5b50\u505c\u7559\n\n- \u6e38\u620f\u5df2\u7ecf\u7ed3\u675f\n\n\u7ed9\u51fa\u4e86\u4e00\u4e2a**\u5751\u70b9**\uff1a\n\n- \u6e38\u620f\u7ed3\u675f\u65f6\uff0c\u65e0\u9700\u5224\u65ad\u662f\u5426\u5f62\u6210\u5c06\u519b\u5c40\u9762\n\n\u7efc\u4e0a\u6240\u8ff0\uff0c\u6b64\u9898\u4f5c\u4e3a\u4e00\u9053\u5927\u6a21\u62df\uff0c\u5df2\u7ecf\u65e0\u9700\u505a\u5176\u4ed6\u591a\u4f59\u7684\u8003\u8651\uff0c\u76f4\u63a5\u6309\u7167\u9898\u610f\u6a21\u62df\u5373\u53ef\n\n**\u4f46\u662f\uff01\uff01\uff01**\n\n\u50cf\u8fd9\u79cd\u5927\u6a21\u62df\u9898\uff0c\u76f4\u63a5\u6309\u7167\u9898\u610f\u6a21\u62df\u80af\u5b9a\u7801\u91cf\u60ca\u4eba\uff0c\u4e0d\u662f\u6211\u4eec\u5e0c\u671b\u770b\u5230\u7684\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u7b80\u5316\uff0c\u601d\u8def\u5177\u4f53\u8bf7\u89c1 @\u6d1b\u8c37\u795e\u9e2d \u7684\u9898\u89e3\n\n~~\u56e0\u4e3a\u672c\u4eba\u592a\u83dc\u4e86\uff0c\u6240\u4ee5\u6211\u8fd9\u4e2a\u7b80\u5316\u51fd\u6570\u4e2d\u5e76\u6ca1\u6709\u5c06\u201c\u8f66\u201d\u5305\u542b\u5728\u5185~~\n\n```cpp\n\nint fx[4]= {1,1,-1,-1},fy[4]= {1,-1,1,-1},a[6]= {0,1,2,1,0,3},b[6]= {1,1,2,2,0,2};\ninline int move(int f,int sx,int sy,int tx,int ty) {\n\tint minn=min(a[f],b[f])-(a[f]==b[f]);\t//\u9632\u6b62\u5224\u65ad\u5230\u8d77\u59cb\u548c\u7ec8\u6b62\u4f4d\u7f6e\n\tfor (ri i=0; i<4; i++) {\n\t\tint x=sx+a[f]*fx[i],y=sy+b[f]*fy[i],flag=0;\n\t\tif (x<0||x>9||y<0||y>8) continue;\t//\u662f\u5426\u8d85\u51fa\u68cb\u76d8\n\t\tif (x==tx&&y==ty) {\n\t\t\tfor (ri j=1; j<=minn&&!flag; j++)\t//\u5224\u65ad\u662f\u5426\u6709\u969c\u788d\u7269\n\t\t\t\tif (mp[x-j*fx[i]][y-j*fy[i]]) flag=1;\n\t\t\tif (!flag) return 1;\n\t\t}\n\t}\n\tfor (ri i=0; i<4; i++) {\t//\u9a6c\u548c\u9e2d\u53ef\u4ee5\u8d708\u4e2a\u65b9\u5411\uff0c\u6240\u4ee5\u7edf\u4e00\u5224\u65ad\n\t\tint x=sx+b[f]*fx[i],y=sy+a[f]*fy[i],flag=0;\n\t\tif (x<0||x>9||y<0||y>8) continue;\n\t\tif (x==tx&&y==ty) {\n\t\t\tfor (ri j=1; j<=minn&&!flag; j++)\n\t\t\t\tif (mp[x-j*fx[i]][y-j*fy[i]]) flag=1;\n\t\t\tif (!flag) return 1;\n\t\t}\n\t}\n\treturn 0;\n}\n\n```\n\u7ecf\u8fc7\u4ee5\u4e0a\u7801\u91cf\u4f18\u5316\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5199\u51fa\u4ee5\u4e0b90\u884cAC\u4ee3\u7801\u4e86AwA\n\n## \u5b8c\u6574\u4ee3\u7801\n\n```cpp\n\n#include <bits/stdc++.h>\n#define ri register int\nusing namespace std;\nint Q,sx,sy,tx,ty,flag=0,playerid=0;\t//\u4ee3\u8868\u7ea2\u8272\u6267\u5b50\nint fx[4]= {1,1,-1,-1},fy[4]= {1,-1,1,-1},a[6]= {0,1,2,1,0,3},b[6]= {1,1,2,2,0,2};\nint id[10][9]= {\n\t{1,1,1,1,1,1,1,1,1},{0,0,0,0,0,0,0,0,0},{1,0,0,0,0,0,0,0,1},{1,0,1,0,1,0,1,0,1},\n    {0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{2,0,2,0,2,0,2,0,2},{2,0,0,0,0,0,0,0,2},\n    {0,0,0,0,0,0,0,0,0},{2,2,2,2,2,2,2,2,2}\n};\nint mp[10][9]= {\n\t{5,4,3,2,1,2,3,4,5},{0,0,0,0,0,0,0,0,0},{6,0,0,0,0,0,0,0,6},{7,0,7,0,7,0,7,0,7},\n    {0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0},{7,0,7,0,7,0,7,0,7},{6,0,0,0,0,0,0,0,6},\n    {0,0,0,0,0,0,0,0,0},{5,4,3,2,1,2,3,4,5}\t//\u9884\u5148\u6253\u8868\u51fa\u6574\u5f20\u68cb\u76d8\n};\ninline void out(int x) {\n\tplayerid?printf(\"blue \"):printf(\"red \");\n\tif (x==1) printf(\"captain;\");\n\telse if (x==2) printf(\"guard;\");\n\telse if (x==3) printf(\"elephant;\");\n\telse if (x==4) printf(\"horse;\");\n\telse if (x==5) printf(\"car;\");\n\telse if (x==6) printf(\"duck;\");\n\telse if (x==7) printf(\"soldier;\");\n}\ninline int move(int f,int sx,int sy,int tx,int ty) {\n\tint minn=min(a[f],b[f])-(a[f]==b[f]);\t//\u9632\u6b62\u5224\u65ad\u5230\u8d77\u59cb\u548c\u7ec8\u6b62\u4f4d\u7f6e\n\tfor (ri i=0; i<4; i++) {\n\t\tint x=sx+a[f]*fx[i],y=sy+b[f]*fy[i],flag=0;\n\t\tif (x<0||x>9||y<0||y>8) continue;\t//\u662f\u5426\u8d85\u51fa\u68cb\u76d8\n\t\tif (x==tx&&y==ty) {\n\t\t\tfor (ri j=1; j<=minn&&!flag; j++)\t//\u5224\u65ad\u662f\u5426\u6709\u969c\u788d\u7269\n\t\t\t\tif (mp[x-j*fx[i]][y-j*fy[i]]) flag=1;\n\t\t\tif (!flag) return 1;\n\t\t}\n\t}\n\tfor (ri i=0; i<4; i++) {\t//\u9a6c\u548c\u9e2d\u53ef\u4ee5\u8d708\u4e2a\u65b9\u5411\uff0c\u6240\u4ee5\u7edf\u4e00\u5224\u65ad\n\t\tint x=sx+b[f]*fx[i],y=sy+a[f]*fy[i],flag=0;\n\t\tif (x<0||x>9||y<0||y>8) continue;\n\t\tif (x==tx&&y==ty) {\n\t\t\tfor (ri j=1; j<=minn&&!flag; j++)\n\t\t\t\tif (mp[x-j*fx[i]][y-j*fy[i]]) flag=1;\n\t\t\tif (!flag) return 1;\n\t\t}\n\t}\n\treturn 0;\n}\ninline int illegal(int sx,int sy,int tx,int ty) {\n\tif (flag||sx<0||sx>9||sy<0||sy>8||tx<0||tx>9||ty<0||ty>8) return 1;\n\tif (mp[sx][sy]==5) {\t//\u201c\u8f66\u201d\u5355\u72ec\u5224\u65ad\n\t\tint ax=min(sx,tx),bx=max(sx,tx),ay=min(sy,ty),by=max(sy,ty);\n\t\tif (sx!=tx&&sy!=ty) return 1;\n\t\tif (sx==tx) {\n\t\t\tfor (ri i=ay+1; i<by; i++) if (mp[sx][i]) return 1;\n\t\t} else for (ri i=ax+1; i<bx; i++) if (mp[i][sy]) return 1;\n\t\treturn 0;\n\t} else if (mp[sx][sy]==7) return!(move(0,sx,sy,tx,ty)||move(1,sx,sy,tx,ty)));//\u5175\u53ef\u4ee5\u5206\u89e3\u4e3a\u738b\u548c\u58eb\n    else return (!move(mp[sx][sy]-1,sx,sy,tx,ty));\n}\ninline int gameover() {\n\tint cnt=0;\n\tfor (ri i=0; i<10; i++)\n\t\tfor (ri j=0; j<9; j++)\n\t\t\tif (mp[i][j]==1) cnt++;\n\treturn cnt<2;\t//\u738b\u7684\u6570\u91cf\u5c11\u4e8e1\u4ee3\u8868\u6e38\u620f\u7ed3\u675f\n}\ninline int general(int f) {\n\tint x=0,y=0;\n\tfor (ri i=0; !x&&i<10; i++)\n\t\tfor (ri j=0; !x&&j<9; j++)\n\t\t\tif (mp[i][j]==1&&id[i][j]==f) x=i,y=j;\t//\u627e\u5230\u738b\u7684\u4f4d\u7f6e\n\tfor (ri i=0; i<10; i++)\n\t\tfor (ri j=0; j<9; j++)\n\t\t\tif (mp[i][j]&&id[i][j]!=f) if(!illegal(i,j,x,y)) return 1;\n\treturn 0;\t//\u80fd\u8d70\u5230\u738b\u7684\u4f4d\u7f6e\u4ee3\u8868\u5f62\u6210\u5c06\u519b\u5c40\u9762\n}\nint main() {\n\tscanf(\"%d\",&Q);\n\tfor (ri i=0; i<Q; i++) {\n\t\tscanf(\"%d%d%d%d\",&sx,&sy,&tx,&ty);\n\t\tif (illegal(sx,sy,tx,ty)||((playerid+1)!=id[sx][sy])||((playerid+1)==id[tx][ty])) {\n\t\t\tprintf(\"Invalid command\\n\");\n\t\t\tcontinue;\n\t\t}\n\t\tout(mp[sx][sy]),playerid^=1;\t//\u6267\u5b50\u8005\u6362\u4eba\n\t\tif (id[tx][ty]) out(mp[tx][ty]);\n\t\telse printf(\"NA;\");\n\t\tid[tx][ty]=id[sx][sy],mp[tx][ty]=mp[sx][sy],id[sx][sy]=mp[sx][sy]=0;\n\t\tif (gameover()) flag=1;\t//\u5148\u5224\u65ad\u6e38\u620f\u662f\u5426\u7ed3\u675f\n\t\tgeneral(1)||general(2)?printf(\"yes;\"):printf(\"no;\");\t//\u518d\u5224\u65ad\u662f\u5426\u5f62\u6210\u5c06\u519b\u5c40\u9762\n\t\tflag?printf(\"yes\\n\"):printf(\"no\\n\");\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1571126235,
        "uid": 51692,
        "name": "\u706b\u8f66\u53f8\u673a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3-P5380"
    },
    {
        "content": "#### \u5c0f\u849f\u84bb\u7b2c\u4e00\u6b21A\u4e86\u9ed1\u9898>.<~~\uff08\u867d\u7136\u662f\u4e00\u9053\u7eaf\u6a21\u62df\uff09~~\n\u7279\u6b64\u732e\u4e0a\u4e00\u7bc7\u5177\u6709\u7eaa\u5ff5\u6027\u7684\u9898\u89e3\n\n\u5e76\u5bf9\u5404\u8def\u5946\u4f6c\u4ee5\u8877\u5fc3\u7684\u819c\u62dc~~\u548c\u6c42\u8d5e~~Orz\n\n------------\n\u4ee5\u4e0b\u662f\u6b63\u9898\n\n\u770b\u5230\u5982\u6b64\u957f\u7684\u4e00\u9053\u9898\u76ee\uff0c\u9996\u5148\u6211\u4eec\u6765\u634b\u4e00\u634b\u9898\u610f\uff1a\n\n## 1.\u68cb\u5b50\n\u9e2d\u68cb\u4e2d\u6709\u5f88\u591a\u79cd\u68cb\u5b50\uff0c\u4e14\u6bcf\u79cd\u68cb\u5b50\u90fd\u6709\u4e00\u79cd\u989c\u8272\uff08\u7ea2\u8272\u6216\u84dd\u8272\uff09\uff0c\u6bcf\u79cd\u68cb\u5b50\u6709\u81ea\u5df1\u72ec\u7279\u7684\u8d70\u6cd5\uff0c\u884c\u8d70\u65f6\u4e5f\u6709\u76f8\u5e94\u7684\u9650\u5236\u3002\u4f46\u6240\u6709\u68cb\u5b50\u5728\u884c\u8d70\u65f6\u90fd\u6709\u4e00\u4e9b**\u5171\u540c\u7684\u9650\u5236**\uff1a\n\n- \u4e0d\u80fd\u51fa\u754c\n- \u884c\u8d70\u7684\u76ee\u6807\u5904\u4e0d\u80fd\u6709\u5df1\u65b9\uff08\u540c\u8272\uff09\u7684\u68cb\u5b50\n\n\u6b64\u5916\uff0c\u90e8\u5206\u68cb\u5b50\u5728\u79fb\u52a8\u65f6\u6709\u81ea\u5df1\u7684\u9650\u5236\uff08\u6bd4\u5982\u201c\u9a6c\u201d\u5728\u884c\u8d70\u65f6\u4e0d\u80fd\u88ab\u201c\u8e69\u9a6c\u817f\u201d\uff09\uff0c\u8fd9\u4e2a\u540e\u9762\u518d\u5206\u6790\n\n\u540c\u65f6\uff0c\u5982\u679c\u4e00\u4e2a\u68cb\u5b50\u6240\u8d70\u7684\u76ee\u6807\u4f4d\u7f6e\u5b58\u5728\u654c\u65b9\uff08\u5f02\u8272\uff09\u68cb\u5b50\uff0c\u8fd9\u4e2a\u68cb\u5b50\u5c31\u4f1a\u88ab\u5403\u6389\uff08\u79fb\u9664\u68cb\u76d8\uff09\n\n## 2.\u80dc\u8d1f\u5224\u65ad\n\u636e\u9898\u76ee\u4e2d\u6240\u8bf4\uff0c\u4e00\u65b9\u83b7\u80dc\uff0c\u5f53\u4e14\u4ec5\u5f53**\u53e6\u4e00\u65b9\u7684\u201c\u738b\u201d\u88ab\u5403\u4e86**\n\n\u7136\u540e\u662f\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\u201c\u5c06\u519b\u201d\uff1a\u5f53\u6709\u4e00\u65b9\u53ef\u4ee5\u5728\u4e0b\u4e00\u6b65\u5403\u6389\u5bf9\u65b9\u7684\u201c\u738b\u201d\u65f6\u88ab\u79f0\u4e3a\u5c06\u519b\u3002\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u4e24\u70b9\uff1a\n1. \u53cc\u65b9\u90fd\u53ef\u4ee5\u5c06\u519b\uff08\u5e76\u4e0d\u4e00\u5b9a\u8d70\u5b8c\u8fd9\u4e00\u6b65\u7684\u4eba\u624d\u80fd\u5c06\u519b\uff09\n2. \u5c06\u519b\u53ea\u80fd\u5bf9\u4e8e\u5bf9\u65b9\u7684\u201c\u738b\u201d\uff0c\u4e0d\u80fd\u5bf9\u81ea\u5df1\u7684\u201c\u738b\u201d\u5c06\u519b\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c**\u4e00\u65e6\u6709\u4eba\u83b7\u80dc\uff0c\u4e00\u5207\u90fd\u7ed3\u675f\u4e86\uff0c\u6240\u6709\u64cd\u4f5c\u5747\u4e3a\u4e0d\u5408\u6cd5\uff0c\u6240\u6709\u5c06\u519b\u5747\u65e0\u6548**\n## 3.\u6e38\u620f\u89c4\u5219&\u64cd\u4f5c\u89c4\u5219\n\u6839\u636e\u89c4\u5b9a\uff0c\u7ea2\u68cb\u5148\u8d70\uff0c\u6bcf\u8d70\u4e00\u6b65\u5148\u624b\u8f6e\u6362\uff0c\u5f53\u524d\u6539\u7ea2\u68cb\u8d70\u5c31\u53ea\u80fd\u4e14\u5fc5\u987b\u8d70\u7ea2\u68cb\uff0c\u5426\u5219\u64cd\u4f5c\u4e0d\u5408\u6cd5\n\n\u5bf9\u4e8e\u4e0d\u5408\u6cd5\u7684\u64cd\u4f5c\uff0c\u76f4\u63a5\u8f93\u51faInvalid command\u5e76\u5ffd\u7565\u6539\u64cd\u4f5c\u3002\n\n\u4e0d\u5408\u6cd5\u5206\u4e3a\u4ee5\u4e0b\u60c5\u51b5\uff1a\n\n1. \u79fb\u52a8\u7684\u4f4d\u7f6e\u6ca1\u6709\u68cb\u5b50\n2. \u6240\u9009\u68cb\u5b50\u4e0d\u80fd\u79fb\u52a8\u5230\u76ee\u6807\u5904\n3. \u6240\u9009\u68cb\u5b50\u7684\u989c\u8272\u4e0d\u662f\u672c\u56de\u5408\u5e94\u8be5\u8d70\u7684\u989c\u8272\n4. \u6e38\u620f\u5df2\u7ecf\u7ed3\u675f\n\n### \u8fd9\u6837\u9898\u76ee\u5c31\u634b\u6e05\u4e86~\n\n\n------------\n\u8003\u8651\u5b9e\u73b0\u65b9\u6cd5\n\n\u9996\u5148\uff0c\u4e0d\u7ba1\u6211\u4eec\u8981\u505a\u4ec0\u4e48\u64cd\u4f5c\uff0c\u6211\u4eec\u5148\u8981\u5c06\u5404\u79cd\u68cb\u5b50\u8868\u793a\u51fa\u6765\u3002\n\n\u89c2\u5bdf\u53d1\u73b0\uff0c\u68cb\u5b50\u53ea\u6709\u4e24\u4e2a\u5c5e\u6027\uff1a\u989c\u8272\u548c\u884c\u8d70\u65b9\u5f0f\uff08\u7c7b\u522b\uff09\u3002\u7ec6\u5206\u5f00\u6765\uff0c\u884c\u8d70\u65b9\u5f0f\u5206\u4e3a\u4e24\u90e8\u5206\uff1a\u68cb\u5b50\u53ef\u4ee5\u5230\u8fbe\u7684\u4f4d\u7f6e\u548c\u5bf9\u5e94\u7684\u9650\u5236\u6761\u4ef6\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u7edd\u5927\u90e8\u5206\u68cb\u5b50\uff08\u53ea\u6709\u8f66\u9664\u5916\uff09\u90fd\u6ee1\u8db3\u8fd9\u6837\u4e00\u4e2a\u7279\u6027\uff1a\u53ea\u80fd\u5f80\u56fa\u5b9a\u7684\u51e0\u4e2a\u4f4d\u7f6e\u884c\u8fdb\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5**\u628a\u8f66\u7279\u5224**\uff0c\u5269\u4e0b\u7684\u68cb\u5b50\u8fd9\u6837\u5b9a\u4e49\uff1a\n\n```cpp\nstruct piece{\n\tstring name;\n\tstring col;     //\u989c\u8272\n\tLL n;           //\u4e00\u5171\u53ef\u4ee5\u8d70\u7684\u4f4d\u7f6e\u6570\n\tLL dir[20][2];  //\u6240\u6709\u53ef\u4ee5\u8d70\u7684\u4f4d\u7f6e\n};\n```\n\u7136\u540e\u8003\u8651\u9650\u5236\u6761\u4ef6\u3002\u6240\u8c13\u9650\u5236\u6761\u4ef6\uff0c\u5c31\u662f\u6307\u884c\u8d70\u65f6\u6709\u7684\u4f4d\u7f6e\u4e0d\u80fd\u6709\u68cb\u5b50\u3002\u5bb9\u6613\u53d1\u73b0\uff0c\u68cb\u5b50\u5206\u4e3a\u56db\u7c7b\uff1a\n\n- \u65e0\u9650\u5236\u6761\u4ef6\uff08\u738b\u3001\u58eb\u3001\u5175\uff09\n- \u6709\u4e00\u5904\u9650\u5236\uff08\u9a6c\uff0c\u8c61\uff09\n- \u6709\u4e24\u5904\u9650\u5236\uff08\u9e2d\uff09\n- \u7279\u6b8a\u9650\u5236\uff08\u8f66\uff09\n\u53ef\u4ee5\u53d1\u73b0\u9650\u5236\u6761\u4ef6\u7684\u5b9a\u4e49\u548c\u53ef\u4ee5\u8d70\u7684\u4f4d\u7f6e\u7c7b\u4f3c\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u5b8c\u6574\u5730\u5b9a\u4e49\u68cb\u5b50\u4e86\uff1a\n```cpp\nstruct piece{\n\tstring name;\n\tstring col;\t\t//\u989c\u8272\n\tLL n;\t\t\t//\u4e00\u5171\u53ef\u4ee5\u8d70\u7684\u4f4d\u7f6e\u6570\n\tLL pn;\t\t\t//\u9650\u5236\u6761\u4ef6\u6570\n\tLL dir[20][2];\t//\u6240\u6709\u53ef\u4ee5\u8d70\u7684\u4f4d\u7f6e\n\tLL pd1[8][2];\t//\u7b2c\u4e00\u79cd\u9650\u5236\u6761\u4ef6\n\tLL pd2[8][2];\t//\u7b2c\u4e8c\u79cd\u9650\u5236\u6761\u4ef6\n};\n```\n\n\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a14\u79cd\u68cb\u5b50\uff087\u79cd* 2\u79cd\u989c\u8272\uff09\u5b8c\u6574\u5730\u8868\u793a\u51fa\u6765\u4e86\uff08\u8f66\u8981\u7279\u5224\uff09\uff1a\n```cpp\nconst piece pc[15]={//0:NULL   1~7:red   8~14:blue\nnull,\n{\"captain\" ,\"red\",4,0,{{0,1},{1,0},{0,-1},{-1,0}}},\n{\"guard\"   ,\"red\",4,0,{{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"elephant\",\"red\",4,1,{{2,2},{2,-2},{-2,2},{-2,-2}},\n\t\t\t\t\t  {{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"horse\"   ,\"red\",8,1,{{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}},\n\t\t\t\t\t  {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}}},\n{\"car\"     ,\"red\"},\t\t\t\n{\"duck\"    ,\"red\",8,2,{{2,3},{2,-3},{-2,3},{-2,-3},{3,2},{3,-2},{-3,2},{-3,-2}},\n\t\t\t\t\t  {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}},\n\t\t\t\t\t  {{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}}},\n{\"soldier\" ,\"red\",8,0,{{1,0},{0, 1},{-1,0},{0 ,-1},{1,1},{1,-1},{-1,1},{-1,-1}}},\n\n{\"captain\" ,\"blue\",4,0,{{0,1},{1,0},{0,-1},{-1,0}}},\n{\"guard\"   ,\"blue\",4,0,{{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"elephant\",\"blue\",4,1,{{2,2},{2,-2},{-2,2},{-2,-2}},\n\t\t\t\t\t   {{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"horse\"   ,\"blue\",8,1,{{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}},\n\t\t\t\t\t   {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}}},\n{\"car\"     ,\"blue\"},\t\t\t\n{\"duck\"    ,\"blue\",8,2,{{2,3},{2,-3},{-2,3},{-2,-3},{3,2},{3,-2},{-3,2},{-3,-2}},\n\t\t\t\t\t   {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}},\n\t\t\t\t\t   {{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}}},\n{\"soldier\" ,\"blue\",8,0,{{1,0},{0, 1},{-1,0},{0 ,-1},{1,1},{1,-1},{-1,1},{-1,-1}}},\n};\n```\n\n\u90a3\u4e48\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u5f00\u59cb\u601d\u8003\u9700\u8981\u505a\u4e9b\u4ec0\u4e48\uff1a\n\n\u9898\u76ee\u8981\u6c42\uff1a\n```\n\u5bf9\u4e8e\u6bcf\u6b65\u64cd\u4f5c\uff0c\u4f60\u9700\u8981\u9996\u5148\u5224\u5176\u662f\u5426\u5408\u6cd5\uff0c\u82e5\u5408\u6cd5\uff0c\u5219\u8fdb\u4e00\u6b65\u6c42\u51fa\uff1a\n\u8fd9\u6b65\u64cd\u4f5c\u79fb\u52a8\u4e86\u54ea\u4e2a\u68cb\u5b50\u3002\n\u8fd9\u6b65\u64cd\u4f5c\u540e\uff0c\u662f\u5426\u5b58\u5728\u68cb\u5b50\u88ab\u79fb\u51fa\u6e38\u620f\uff0c\u5982\u6709\u5219\u8fd8\u9700\u6c42\u51fa\u88ab\u79fb\u51fa\u6e38\u620f\u7684\u68cb\u5b50\u3002\n\u8fd9\u6b65\u64cd\u4f5c\u540e\uff0c\u662f\u5426\u5f62\u6210\u5c06\u519b\u5c40\u9762\u3002\n\u8fd9\u6b65\u64cd\u4f5c\u540e\uff0c\u6e38\u620f\u662f\u5426\u7ed3\u675f\u3002\n```\n\u8fd9\u610f\u5473\u7740\u6211\u4eec\u81f3\u5c11\u5b8c\u6210\u8fd9\u51e0\u4e2a\u51fd\u6570\uff1a\n```cpp\nstruct game{\n\tLL chess[10][9]={//\u521d\u59cb\u68cb\u76d8\n\t\t{12,11,10, 9, 8, 9,10,11,12},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{13, 0, 0, 0, 0, 0, 0, 0,13},\n\t\t{14, 0,14, 0,14, 0,14, 0,14},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{ 7, 0, 7, 0, 7, 0, 7, 0, 7},\n\t\t{ 6, 0, 0, 0, 0, 0, 0, 0, 6},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{ 5, 4, 3, 2, 1, 2, 3, 4, 5}\n\t};\n\tLL B=0; //B=0/1\u8be5\u8c01\u8d70\n\tbool ifover(){...}//\u5224\u65ad\u662f\u5426\u7ed3\u675f\n\tbool ifmove(point x,point y,bool pB){...}//\u5224\u65ad\u79fb\u52a8\u64cd\u4f5c\u662f\u5426\u5408\u6cd5\uff08pB\u8868\u793a\u5224\u65ad\u65f6\u662f\u5426\u8003\u8651\u672c\u56de\u5408\u8be5\u8c01\u8d70\uff09\n\tvoid move(point x,point y,LL&M,LL&O){...}//\u6267\u884c\u79fb\u52a8\u64cd\u4f5c\u5e76\u8fd4\u56de\u79fb\u52a8\u7684\u68cb\u5b50M\uff0c\u88ab\u5403\u7684\u68cb\u5b50O\n\tbool ifkilling(){...}//\u5224\u65ad\u662f\u5426\u5728\u5c06\u519b\n\n}G;\n```\n\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u51fd\u6570find\u6765\u67e5\u627e\u4e00\u4e2a\u68cb\u5b50\u7684\u4f4d\u7f6e\uff1a\n```cpp\n\tpoint find(LL id)\n\t{\n\t\tfor (LL i=0;i<10;i++)\n\t\t{\n\t\t\tfor (LL j=0;j<9;j++)\n\t\t\t{\n\t\t\t\tif (chess[i][j]==id) return (point){i,j};\n\t\t\t}\n\t\t}\n\t\treturn (point){-1,-1};\n\t}\n```\n\u6709\u4e86find\uff0cifover\u51fd\u6570\u5c31\u5f88\u5bb9\u6613\u5b9e\u73b0\u4e86\uff0c\u56e0\u4e3a\u5224\u65ad\u6e38\u620f\u7ed3\u675f\u7684\u6761\u4ef6\u975e\u5e38\u7b80\u5355\uff08\u6709\u4e00\u65b9\u7684\u738b\u88ab\u5403\u4e86\uff09\uff1a\n```cpp\n\tbool ifover()\n\t{\n\t\tpoint redcap=find(1),blackcap=find(8);//\u5206\u522b\u627e\u5230\u7ea2\u738b\u548c\u84dd\u738b\u7684\u4f4d\u7f6e\n\t\tif (redcap.x+redcap.y==-2 || blackcap.x+blackcap.y==-2) return true;//\u5176\u4e2d\u4e4b\u4e00\u6ca1\u6709\u627e\u5230\u5c31\u7ed3\u675f\u4e86\n\t\treturn false;\n\t}\n```\n\u7136\u540e\uff0c\u6211\u4eec\u4fbf\u9700\u8981\u5b9e\u73b0\u6700\u6838\u5fc3\u7684\u4e00\u4e2a\u51fd\u6570\uff1aifmove\u3002\u6574\u7406\u4e00\u4e0b\u53d1\u73b0\uff0c\u4e00\u4e2a\u64cd\u4f5c\u5408\u6cd5\u9700\u8981\u8fd9\u6837\u51e0\u4e2a\u6761\u4ef6\uff1a\n\n- \u6e38\u620f\u672a\u7ed3\u675f\n- \u6240\u79fb\u52a8\u7684\u521d\u59cb\u4f4d\u7f6e\u6709\u5b50\n- \u5728\u8003\u8651\u8be5\u8c01\u8d70\u7684\u60c5\u51b5\u4e0b\uff08pB==1\uff09\u662f\u5426\u989c\u8272\u7b26\u5408\n- \u521d\u59cb\u4f4d\u7f6e\u7684\u5b50\u90a3\u4e48\u8d70\u662f\u5426\u5408\u6cd5\n\nps.\u4e3a\u4ec0\u4e48\u8981\u52a0\u5165\u662f\u5426\u5224\u65ad\u8003\u8651\u8c01\u8d70\u7684\u6761\u4ef6\u5462\uff1f\u56e0\u4e3a\u5728\u5224\u65ad\u5c06\u519b\u65f6\u6211\u4eec\u4e5f\u9700\u8981\u8fd9\u4e2a\u51fd\u6570\uff0c\u4f46\u5c06\u519b**\u4e0d\u8003\u8651\u8be5\u8c01\u8d70**\uff0c\u4e0d\u8fd9\u4e48\u5199\u5c31\u4f1a\u9519\uff08\u8840\u7684\u6559\u8bad\uff09\n\n\u524d\u4e09\u4e2a\u6761\u4ef6\u90fd\u5f88\u5bb9\u6613\u5b9e\u73b0\uff0c\u91cd\u70b9\u662f\u7b2c\u56db\u4e2a\u3002\u6211\u4eec\u5148\u628a\u5b83\u540c\u6837\u62bd\u8c61\u6210\u4e00\u4e2a\u51fd\u6570\uff1a\n```cpp\nbool ifmove(LL x,point pos,point vec)//\u5224\u65adx\u578b\u7684\u68cb\u5b50\u5f53\u524d\u5728pos\u7684\u4f4d\u7f6e\u662f\u5426\u53ef\u4ee5\u8fdb\u884cvec\u7684\u76f8\u5bf9\u4f4d\u7f6e\u79fb\u52a8\uff08vec\u53ef\u4ee5\u7406\u89e3\u4e3a\u5411\u91cf\uff09\n```\n\u96be\u4e48\u5c31\u53ef\u4ee5\u628a\u539f\u5148\u7684ifmove\u51fd\u6570\u5199\u51fa\u6765\u4e86\uff1a\n```cpp\n\tbool ifmove(point x,point y,bool pB)\n\t{\n\t\tif (ifover()) return false;//\u6e38\u620f\u662f\u5426\u7ed3\u675f\n\t\tLL id=chess[x.x][x.y];\n\t\tif (!id) return false;//\u662f\u5426\u6709\u5b50\u53ef\u4ee5\u79fb\u52a8\n\t\tif (pB && pc[id].col!=(B==0?\"red\":\"blue\")) return false;//\u989c\u8272\u662f\u5426\u7b26\u5408\n\t\tif (!ifmove(id,x,(point){y.x-x.x,y.y-x.y})) return false;//\u79fb\u52a8\u662f\u5426\u5408\u6cd5\n\t\treturn true;\n\t}\n```\n\u5177\u4f53\u8003\u8651\u91cc\u9762\u5d4c\u5957\u7684\u90a3\u4e2aifmove\u51fd\u6570\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5224\u65ad\u79fb\u52a8\u662f\u5426\u5408\u6cd5\u8981\u6ee1\u8db3\u4e00\u4e0b\u51e0\u4e2a\u6761\u4ef6\uff1a\n\n- \u4e0d\u80fd\u51fa\u754c\n- \u4e0d\u80fd\u5403\u5df1\u65b9\u7684\u5b50\n- \u79fb\u52a8\u64cd\u4f5c\u9700\u8981\u5b58\u5728\n- \u9650\u52361\u9700\u8981\u6ee1\u8db3\uff08\u5982\u679c\u5b58\u5728\uff09\n- \u9650\u52362\u9700\u8981\u6ee1\u8db3\uff08\u5982\u679c\u5b58\u5728\uff09\n\n\u540c\u65f6\uff0c**\u8f66\u8981\u7279\u5224**\n\n\u90a3\u4e48\u8fd9\u6bb5\u4ee3\u7801\u5c31\u5f88\u5bb9\u6613\u5199\u51fa\u6765\u4e86\uff1a\n```cpp\n\tbool ifmove(LL x,point pos,point vec)\n\t{\n\t\tpiece p=pc[x];\n\t\tpoint to={pos.x+vec.x,pos.y+vec.y};\n\t\tpiece p_to=pc[chess[to.x][to.y]];\n\t\tif (to.x<0 || to.x>9 || to.y<0 || to.y>8) return false; //\u662f\u5426\u51fa\u754c\n\t\tif (p_to.col==p.col) return false;        //\u4e0d\u80fd\u5403\u5df1\u65b9\u5b50\n\t\tif (p.name==\"car\")   //\u8f66\u8981\u7279\u5224\n\t\t{\n\t\t\tLL dx=(vec.x>0?1:-1),dy=(vec.y>0?1:-1);\n\t\t\tif (vec.x==0) dx=0;\n\t\t\telse if (vec.y==0) dy=0;\n\t\t\telse return false;\n\t\t\tfor (LL i=1;i<abs(vec.x+vec.y);i++) \n\t\t\t\tif (chess[pos.x+dx*i][pos.y+dy*i]) return false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLL d=-1;\n\t\t\tfor (LL i=0;i<p.n;i++) if (vec.x==p.dir[i][0] && vec.y==p.dir[i][1]) d=i;\n\t\t\tif (d==-1) return false;\t\t\t\t\t\t\t\t//\u79fb\u52a8\u65b9\u5f0f\u662f\u5426\u5b58\u5728\n\t\t\tif (p.pn>0 && chess[pos.x+p.pd1[d][0]][pos.y+p.pd1[d][1]]) return false;           //\u9650\u52361\n\t\t\tif (p.pn>1 && chess[pos.x+p.pd2[d][0]][pos.y+p.pd2[d][1]]) return false;           //\u9650\u52362\n\t\t}\n\t\treturn true; \n\t}\n```\nmove\u51fd\u6570\u975e\u5e38\u597d\u89e3\u51b3\uff0c\u76f4\u63a5\u628a\u5b50\u79fb\u8fc7\u53bb\u5c31\u884c\u4e86\uff1a\n```cpp\n\tvoid move(point x,point y,LL&M,LL&O)\n\t{\n\t\tif (!ifmove(x,y,1)) return;\n\t\tM=chess[x.x][x.y];\n\t\tO=chess[y.x][y.y];\n\t\tchess[y.x][y.y]=M;\n\t\tchess[x.x][x.y]=0;\n\t\tB^=1;\n\t}\n```\n\u6709\u4e86ifmove\u51fd\u6570\uff0cifkilling\u51fd\u6570\u4e5f\u5f88\u597d\u5199\uff0c\u679a\u4e3e\u68cb\u76d8\u4e0a\u7684\u6bcf\u4e00\u4e2a\u70b9\uff0c\u5224\u65ad\u80fd\u5426\u79fb\u52a8\u5230\u738b\u7684\u4f4d\u7f6e\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u5148\u5224\u65ad\u6e38\u620f\u662f\u5426\u5df2\u7ecf\u7ed3\u675f\uff1a\n```cpp\n\tbool ifkilling()\n\t{\n\t\tif (ifover()) return false;\n\t\tpoint redcap=find(1),blackcap=find(8);\n\t\tfor (LL i=0;i<10;i++)\n\t\t{\n\t\t\tfor (LL j=0;j<9;j++)\n\t\t\t{\n\t\t\t\tLL id=chess[i][j];\n\t\t\t\tif (pc[id].col==\"blue\" && ifmove((point){i,j},redcap  ,0)) return true;\n\t\t\t\tif (pc[id].col==\"red\"  && ifmove((point){i,j},blackcap,0)) return true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n```\n\u8fd9\u6837\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u5b8c\u6210\u4e86\u3002\u90a3\u4e48\u4e3b\u51fd\u6570\u4e2d\u76f4\u63a5\u8c03\u7528\u5c31\u884c\u4e86\uff1a\n```cpp\nvoid print(LL id)\n{\n\tif (id)cout<<pc[id].col<<\" \"<<pc[id].name<<\";\";\n\telse cout<<\"NA;\";\n}\n\nint main()\n{\n\tLL Q;\n\tcin>>Q;\n\tfor (LL i=1;i<=Q;i++)\n\t{\n\t\tpoint u,v;\n\t\tcin>>u.x>>u.y>>v.x>>v.y;\n\t\tu.x=9-u.x;\n\t\tv.x=9-v.x;\n\t\tif (!G.ifmove(u,v,1)) cout<<EOR<<endl;\n\t\telse\n\t\t{\n\t\t\tLL M,O;\n\t\t\tG.move(u,v,M,O);\n\t\t\tprint(M); print(O);\n\t\t\tcout<<(G.ifkilling()?\"yes\":\"no\")<<\";\"<<(G.ifover()?\"yes\":\"no\")<<endl;\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\u6700\u540e\u732e\u4e0a\u6211\u4e11\u964b\u7684170+\u884c\u7684\u4ee3\u7801\uff08ps.\u6211\u628a\u7a0b\u5e8f\u90fd\u5199\u5b8c\u4e86\u624d\u53d1\u73b0\u81ea\u5df1\u4ee5\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9(\u5e94\u8be5\u662f\u5de6\u4e0b\u89d2\uff09QAQ\u3002\u53ea\u597d\u5728\u8bfb\u5165\u65f6\u628a\u5750\u6807\u6362\u8fc7\u6765QAQ\uff09\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <string>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#define LL long long\n#define max(a,b) ((a)>(b)?(a):(b))\n#define min(a,b) ((a)<(b)?(a):(b))\nusing namespace std;\n\nconst string EOR=\"Invalid command\";\n\nstruct piece{\n\tstring name;\n\tstring col;\n\tLL n,pn;\n\tLL dir[20][2];\n\tLL pd1[8][2];\n\tLL pd2[8][2];\n};\n\nstruct point{\n\tLL x,y;\n};\n\nconst piece null={\"\",\"\",0,0};\nconst piece pc[15]={//0:NULL   1~7:red   8~14:blue\nnull,\n{\"captain\" ,\"red\",4,0,{{0,1},{1,0},{0,-1},{-1,0}}},\n{\"guard\"   ,\"red\",4,0,{{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"elephant\",\"red\",4,1,{{2,2},{2,-2},{-2,2},{-2,-2}},\n\t\t\t\t\t  {{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"horse\"   ,\"red\",8,1,{{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}},\n\t\t\t\t\t  {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}}},\n{\"car\"     ,\"red\"},\t\t\t\n{\"duck\"    ,\"red\",8,2,{{2,3},{2,-3},{-2,3},{-2,-3},{3,2},{3,-2},{-3,2},{-3,-2}},\n\t\t\t\t\t  {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}},\n\t\t\t\t\t  {{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}}},\n{\"soldier\" ,\"red\",8,0,{{1,0},{0, 1},{-1,0},{0 ,-1},{1,1},{1,-1},{-1,1},{-1,-1}}},\n\n{\"captain\" ,\"blue\",4,0,{{0,1},{1,0},{0,-1},{-1,0}}},\n{\"guard\"   ,\"blue\",4,0,{{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"elephant\",\"blue\",4,1,{{2,2},{2,-2},{-2,2},{-2,-2}},\n\t\t\t\t\t   {{1,1},{1,-1},{-1,1},{-1,-1}}},\n{\"horse\"   ,\"blue\",8,1,{{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}},\n\t\t\t\t\t   {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}}},\n{\"car\"     ,\"blue\"},\t\t\t\n{\"duck\"    ,\"blue\",8,2,{{2,3},{2,-3},{-2,3},{-2,-3},{3,2},{3,-2},{-3,2},{-3,-2}},\n\t\t\t\t\t   {{0,1},{0,-1},{-0,1},{-0,-1},{1,0},{1,-0},{-1,0},{-1,-0}},\n\t\t\t\t\t   {{1,2},{1,-2},{-1,2},{-1,-2},{2,1},{2,-1},{-2,1},{-2,-1}}},\n{\"soldier\" ,\"blue\",8,0,{{1,0},{0, 1},{-1,0},{0 ,-1},{1,1},{1,-1},{-1,1},{-1,-1}}},\n};\n\nstruct game{\n\tLL chess[10][9]={\n\t\t{12,11,10, 9, 8, 9,10,11,12},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{13, 0, 0, 0, 0, 0, 0, 0,13},\n\t\t{14, 0,14, 0,14, 0,14, 0,14},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{ 7, 0, 7, 0, 7, 0, 7, 0, 7},\n\t\t{ 6, 0, 0, 0, 0, 0, 0, 0, 6},\n\t\t{ 0, 0, 0, 0, 0, 0, 0, 0, 0},\n\t\t{ 5, 4, 3, 2, 1, 2, 3, 4, 5}\n\t};\n\tLL B=0;\n\tbool ifover()\n\t{\n\t\tpoint redcap=find(1),blackcap=find(8);\n\t\tif (redcap.x+redcap.y==-2 || blackcap.x+blackcap.y==-2) return true;\n\t\treturn false;\n\t}\n\tbool ifmove(LL x,point pos,point vec)\n\t{\n\t\tpiece p=pc[x];\n\t\tpoint to={pos.x+vec.x,pos.y+vec.y};\n\t\tpiece p_to=pc[chess[to.x][to.y]];\n\t\tif (to.x<0 || to.x>9 || to.y<0 || to.y>8) return false; //\u662f\u5426\u51fa\u754c\n\t\tif (p_to.col==p.col) return false;        //\u4e0d\u80fd\u5403\u5df1\u65b9\u5b50\n\t\tif (p.name==\"car\")   //\u8f66\u8981\u7279\u5224\n\t\t{\n\t\t\tLL dx=(vec.x>0?1:-1),dy=(vec.y>0?1:-1);\n\t\t\tif (vec.x==0) dx=0;\n\t\t\telse if (vec.y==0) dy=0;\n\t\t\telse return false;\n\t\t\tfor (LL i=1;i<abs(vec.x+vec.y);i++) \n\t\t\t\tif (chess[pos.x+dx*i][pos.y+dy*i]) return false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLL d=-1;\n\t\t\tfor (LL i=0;i<p.n;i++) if (vec.x==p.dir[i][0] && vec.y==p.dir[i][1]) d=i;\n\t\t\tif (d==-1) return false;\t\t\t\t\t\t\t\t//\u79fb\u52a8\u65b9\u5f0f\u662f\u5426\u5b58\u5728\n\t\t\tif (p.pn>0 && chess[pos.x+p.pd1[d][0]][pos.y+p.pd1[d][1]]) return false;           //\u9650\u52361\n\t\t\tif (p.pn>1 && chess[pos.x+p.pd2[d][0]][pos.y+p.pd2[d][1]]) return false;           //\u9650\u52362\n\t\t}\n\t\treturn true; \n\t}\n\tbool ifmove(point x,point y,bool pB)\n\t{\n\t\tif (ifover()) return false;\n\t\tLL id=chess[x.x][x.y];\n\t\tif (!id) return false;\n\t\tif (pB && pc[id].col!=(B==0?\"red\":\"blue\")) return false;\n\t\tif (!ifmove(id,x,(point){y.x-x.x,y.y-x.y})) return false;\n\t\treturn true;\n\t}\n\tvoid move(point x,point y,LL&M,LL&O)\n\t{\n\t\tif (!ifmove(x,y,1)) return;\n\t\tM=chess[x.x][x.y];\n\t\tO=chess[y.x][y.y];\n\t\tchess[y.x][y.y]=M;\n\t\tchess[x.x][x.y]=0;\n\t\tB^=1;\n\t}\n\tpoint find(LL id)\n\t{\n\t\tfor (LL i=0;i<10;i++)\n\t\t{\n\t\t\tfor (LL j=0;j<9;j++)\n\t\t\t{\n\t\t\t\tif (chess[i][j]==id) return (point){i,j};\n\t\t\t}\n\t\t}\n\t\treturn (point){-1,-1};\n\t}\n\tbool ifkilling()\n\t{\n\t\tif (ifover()) return false;\n\t\tpoint redcap=find(1),blackcap=find(8);\n\t\tfor (LL i=0;i<10;i++)\n\t\t{\n\t\t\tfor (LL j=0;j<9;j++)\n\t\t\t{\n\t\t\t\tLL id=chess[i][j];\n\t\t\t\tif (pc[id].col==\"blue\" && ifmove((point){i,j},redcap  ,0)) return true;\n\t\t\t\tif (pc[id].col==\"red\"  && ifmove((point){i,j},blackcap,0)) return true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}G;\n\nvoid print(LL id)\n{\n\tif (id)cout<<pc[id].col<<\" \"<<pc[id].name<<\";\";\n\telse cout<<\"NA;\";\n}\n\nint main()\n{\n\tLL Q;\n\tcin>>Q;\n\tfor (LL i=1;i<=Q;i++)\n\t{\n\t\tpoint u,v;\n\t\tcin>>u.x>>u.y>>v.x>>v.y;\n\t\tu.x=9-u.x;\n\t\tv.x=9-v.x;\n\t\tif (!G.ifmove(u,v,1)) cout<<EOR<<endl;\n\t\telse\n\t\t{\n\t\t\tLL M,O;\n\t\t\tG.move(u,v,M,O);\n\t\t\tprint(M); print(O);\n\t\t\tcout<<(G.ifkilling()?\"yes\":\"no\")<<\";\"<<(G.ifover()?\"yes\":\"no\")<<endl;\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\n------------\n\u6700\u540e\uff0c\u8fd8\u662f\u5411\u5404\u4f4d\u5946\u4f6c\u8877\u5fc3\u5730\u819c\u62dc~~\u548c\u6c42\u8d5e~~Orz\u3002\u5199\u8fd9\u4e48\u957f\uff0c\u5f88\u5e0c\u671b\u5f97\u5230\u652f\u6301Orz\u3002\u6709\u95ee\u9898\u8bf7\u591a\u6307\u6b63Orz\u3002\n\n**\u6c42\u8d5eOrz\u6c42\u8d5eOrz\u6c42\u8d5eOrz**\n\n\n------------\nupdata:\u4fee\u590d\u4e86\u4e00\u4e9b\u9519\u8bef\uff0c\u611f\u8c22@\u66b4\u529b\u51fa\u5947\u8ff9",
        "postTime": 1584409453,
        "uid": 86589,
        "name": "\u5e73\u8861\u6811\u68ee\u6797",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "## \u672c\u9898\u53ef\u4ee5\u5927\u81f4\u5206\u4e3a\u4e00\u4e0b\u51e0\u4e2a\u529f\u80fd\u6a21\u5757\uff1a\n1. \u5224\u65ad\u79fb\u52a8\u662f\u5426\u5408\u6cd5   \n2. \u5224\u65ad\u662f\u5426\u5b58\u5728\u5c06\u519b\u5c40\u9762\n3. \u79fb\u52a8\u68cb\u5b50\uff0c\u6309\u8981\u6c42\u8f93\u51fa\n\n## \u518d\u770b\u4e00\u4e0b\u8f93\u51fa\u8981\u6c42\uff1a\n\n#### \u82e5\u79fb\u52a8\u4e0d\u5408\u6cd5\uff0c\u8f93\u51fa ```Invalid command``` \u3002\u5f88\u7b80\u5355\uff0c\u7528\u6a21\u57571\u5224\u65ad\u5373\u53ef\u3002\n\n#### \u82e5\u79fb\u52a8\u5408\u6cd5\uff0c\u8f93\u51fa ```\u79fb\u52a8\u68cb\u5b50\u3001\u88ab\u79fb\u9664\u68cb\u5b50\u3001\u662f\u5426\u5c06\u519b\u3001\u6e38\u620f\u662f\u5426\u7ed3\u675f```\uff1a\n- \u79fb\u52a8\u68cb\u5b50\uff1a\u79fb\u52a8\u65f6\u8f93\u51fa\u5373\u53ef\u3002\n- \u88ab\u79fb\u9664\u68cb\u5b50\uff1a\u82e5\u79fb\u52a8\u7ec8\u70b9\u4e3a\u5bf9\u65b9\u68cb\u5b50\uff0c\u5219\u79fb\u9664\u5e76\u8f93\u51fa\uff0c\u5426\u5219\u8f93\u51fa ```NA```\u3002\n- \u662f\u5426\u5c06\u519b\uff1a\u8bb0\u5f55\u53cc\u65b9Captain\u7684\u4f4d\u7f6e\uff0c\u901a\u8fc7\u6a21\u57571\u66b4\u529b\u679a\u4e3e\u6bcf\u4e2a\u68cb\u5b50\u80fd\u5426\u5230\u8fbe\u5bf9\u65b9Captain\u5904\u3002\n- \u6e38\u620f\u662f\u5426\u7ed3\u675f\uff1a\u82e5\u88ab\u79fb\u9664\u7684\u68cb\u5b50\u662fCaptain\uff0c\u5219\u6e38\u620f\u7ed3\u675f\u3002\n\n## \u5177\u4f53\u5b9e\u73b0\n\u9996\u5148\uff0c\u6570\u7ec4\u5b58\u68cb\u76d8\uff0c\u5e76\u521d\u59cb\u5316\u4e3a\u521d\u59cb\u72b6\u6001\u3002\u5c06 \u738b\u58eb\u8c61\u9a6c\u8f66\u9e2d\u5175 \u5206\u522b\u4e0e 1234567 \u5bf9\u5e94\uff0c\u8d1f\u503c\u8868\u793a\u7ea2\u65b9\uff0c\u6b63\u503c\u8868\u793a\u84dd\u65b9\u3002\n\n\u7528\u4e24\u4e2apair\u8bb0\u5f55\u53cc\u65b9Captain\u7684\u4f4d\u7f6e\uff0c\u540c\u6837\u9700\u8981\u521d\u59cb\u5316\u3002\n\n\u7528\u6570\u7ec4\u5904\u7406\u5404\u68cb\u5b50\u7684\u79fb\u52a8\u89c4\u5219\uff0c\u7eca\u9a6c\\\u8c61\\\u9e2d\u817f\u7684\u60c5\u51b5\u53e6\u5f00\u6570\u7ec4\uff0c\u4e0e\u79fb\u52a8\u6570\u7ec4\u4fdd\u8bc1\u5bf9\u5e94\u3002\n\n\u63a5\u4e0b\u6765\u662f\u5404\u4e2a\u6a21\u5757\uff1a\n\n#### \u6a21\u57571\uff1a\n\n- \u6e38\u620f\u7ed3\u675f \u6216 \u79fb\u52a8\u4f4d\u7f6e\u975e\u672c\u65b9\u68cb\u5b50\uff0c\u8fd4\u56defalse\n- \u6309\u89c4\u5219\u53ef\u4ee5\u79fb\u52a8\u5230\u7ec8\u70b9\u4e14\u7ec8\u70b9\u4e0d\u4e3a\u672c\u65b9\u68cb\u5b50\uff0c\u8fd4\u56detrue\n- \u65e0\u6cd5\u5b8c\u6210\u7b2c2\u6761\uff0c\u8fd4\u56defalse\n\n##### \u4ee3\u7801\uff1a\n```cpp\nbool judge(int player, int sx, int sy, int gx, int gy){\n    /*\u6e38\u620f\u7ed3\u675f \u6216 \u521d\u59cb\u4f4d\u7f6e\u4e0d\u662f\u81ea\u5df1\u7684\u68cb\u5b50 \u4e0d\u5408\u6cd5*/\n    if (finished || player * matrix[sx][sy] <= 0) return false;\n    /*matrix[gx][gy] * player <= 0 \u8868\u793a \u76ee\u7684\u5730\u4e3a\u7a7a\u6216\u5bf9\u65b9\u68cb\u5b50*/\n    switch (matrix[sx][sy]*player) {\n        case 1: //Captain\n            for (int i = 1; i <= CapX[0]; i++)\n                if (sx+CapX[i] == gx && sy+CapY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 2: //Guard\n            for (int i = 1; i <= GuaX[0]; i++)\n                if (sx+GuaX[i] == gx && sy+GuaY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 3: //Elephant\n            for (int i = 1; i <= EleX[0]; i++)\n                if (!matrix[sx+EleXr[i]][sy+EleYr[i]] && sx+EleX[i] == gx && sy+EleY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 4: //Horse\n            for (int i = 1; i <= HorX[0]; i++)\n                if (!matrix[sx+HorXr[i]][sy+HorYr[i]] && sx+HorX[i] == gx && sy+HorY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 5: //Car\n            if (sx == gx){ //\u6a2a\u7740\u8d70\n                for (int i = sy + 1; i < gy; i++) if (matrix[gx][i]) return false;\n                for (int i = sy - 1; i > gy; i--) if (matrix[gx][i]) return false;\n                return matrix[gx][gy] * player <= 0;\n            } else if (sy == gy){ //\u7ad6\u7740\u8d70\n                for (int i = sx + 1; i < gx; i++) if (matrix[i][gy]) return false;\n                for (int i = sx - 1; i > gx; i--) if (matrix[i][gy]) return false;\n                return matrix[gx][gy] * player <= 0;\n            }\n            break;\n        case 6: //Duck\n            for (int i = 1; i <= DucX[0]; i++)\n                if (!matrix[sx+DucXp[i]][sy+DucYp[i]] && !matrix[sx+DucXr[i]][sy+DucYr[i]] && sx+DucX[i] == gx && sy+DucY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 7: //Soldier\n            for (int i = 1; i <= SolX[0]; i++)\n                if (sx+SolX[i] == gx && sy+SolY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n    }\n    /*\u8fd0\u884c\u5230\u8fd9\u91cc\u8868\u660e\u65e0\u6cd5\u6309\u89c4\u5219\u79fb\u52a8\uff0c\u4e0d\u5408\u6cd5*/\n    return false;\n}\n```\n\n#### \u6a21\u57572\uff1a\n\u66b4\u529b\u679a\u4e3e\u5bf9\u65b9\u7684\u6bcf\u4e2a\u68cb\u5b50\uff0c\u5224\u65ad\u80fd\u5426\u79fb\u52a8\u5230\u672c\u65b9Captain\u5904\u3002\n\n##### \u4ee3\u7801\uff1a\n```cpp\nbool checkmate(int player){\n    for (int i = 0; i < 10; i++)\n        for (int j = 0; j < 9; j++)\n            if (matrix[i][j] * player < 0){ //\u5bf9\u65b9\u68cb\u5b50\n                if (judge(-player,i,j,player>0 ? BC.first : RC.first, player>0 ? BC.second : RC.second))\n                    return true;\n            }\n    return false;\n}\n```\n\n#### \u6a21\u57573\uff1a\n\u57fa\u672c\u6309\u4ee5\u4e0b\u6b65\u9aa4\u8fdb\u884c\uff1a  \n1. \u82e5\u79fb\u52a8\u4e0d\u5408\u6cd5\uff0c\u76f4\u63a5\u8f93\u51fa\u5e76\u8fd4\u56defalse\n2. \u8f93\u51fa\u79fb\u52a8\u7684\u68cb\u5b50\n3. \u82e5\u79fb\u52a8\u7ec8\u70b9\u662f\u5bf9\u65b9\u68cb\u5b50\uff0c\u79fb\u9664\u5e76\u8f93\u51fa\n4. \u79fb\u52a8\u68cb\u5b50\n5. \u82e5\u79fb\u52a8\u7684\u662fCaptain\uff0c\u66f4\u65b0pair\n6. \u7528 \u6a21\u57572 \u5224\u65ad\u662f\u5426\u5c06\u519b\u5e76\u8f93\u51fa\n7. \u82e5\u79fb\u9664\u7684\u68cb\u5b50\u662fCaptain\uff0c\u6e38\u620f\u7ed3\u675f\n\n##### \u4ee3\u7801\uff1a\n```cpp\nbool move(int player, int sx, int sy, int gx, int gy){\n    /*\u4e0d\u5408\u6cd5\u60c5\u51b5*/ \n    if (finished || !judge(player,sx,sy,gx,gy)) {printf(\"Invalid command\\n\"); return false;}\n\n    /*\u8f93\u51fa\u79fb\u52a8\u7684\u68cb\u5b50 */\n    int now = matrix[sx][sy];\n    outRole(player,now);\n\n    /*\u79fb\u9664\u5e76\u8f93\u51fa*/\n    int killed = 0;\n    if (matrix[gx][gy] * player < 0) killed = matrix[gx][gy], matrix[gx][gy] = 0;\n    if (!killed) printf(\"NA;\"); else outRole(-player,killed);\n\n    /*\u79fb\u52a8*/\n    swap(matrix[sx][sy],matrix[gx][gy]);\n\n    /*\u66f4\u65b0Captain\u4f4d\u7f6e*/\n    if (abs(now) == 1)\n        player>0 ? BC = M(gx,gy) : RC = M(gx,gy);\n\n    /*\u5224\u65ad\u662f\u5426\u5c06\u519b*/\n    if (checkmate(player) || checkmate(-player)) printf(\"yes;\"); \n    else printf(\"no;\");\n\n    /*\u5224\u65ad\u6e38\u620f\u662f\u5426\u7ed3\u675f*/\n    if (abs(killed) == 1) finished = 1;\n    if (finished) printf(\"yes\\n\"); else printf(\"no\\n\");\n\n    return true;\n}\n```\n\n##  \u5168\u4ee3\u7801\n```cpp\n#include <iostream>\n#include <cstring>\n#include <cstdio>\n#include <queue>\n#include <cmath>\n#define M(x,y) make_pair((x),(y))\nusing namespace std;\n\nconst int maxn = 10 + 5;\nconst int CapX[] = {4,1,0,0,-1};\nconst int CapY[] = {4,0,-1,1,0};\nconst int GuaX[] = {4,1,1,-1,-1};\nconst int GuaY[] = {4,1,-1,1,-1};\nconst int EleX[] = {4,2,-2,-2,2};\nconst int EleY[] = {4,2,2,-2,-2};\nconst int EleXr[] = {4,1,-1,-1,1};\nconst int EleYr[] = {4,1,1,-1,-1};\nconst int HorX[] = {8,2,1,1,2,-2,-1,-1,-2};\nconst int HorY[] = {8,1,2,-2,-1,1,2,-2,-1};\nconst int HorXr[] = {8,1,0,0,1,-1,0,0,-1};\nconst int HorYr[] = {8,0,1,-1,0,0,1,-1,0};\nconst int DucX[] = {8,3,2,2,3,-3,-2,-2,-3};\nconst int DucY[] = {8,2,3,-3,-2,2,3,-3,-2};\nconst int DucXr[] = {8,2,1,1,2,-2,-1,-1,-2};\nconst int DucYr[] = {8,1,2,-2,-1,1,2,-2,-1};\nconst int DucXp[] = {8,1,0,0,1,-1,0,0,-1};\nconst int DucYp[] = {8,0,1,-1,0,0,1,-1,0};\nconst int SolX[] = {8,1,-1,0,0,1,-1,-1,1};\nconst int SolY[] = {8,0,0,1,-1,1,-1,1,-1};\nstring role[maxn] = {\"\",\"captain\",\"guard\",\"elephant\",\"horse\",\"car\",\"duck\",\"soldier\"};\nint matrix[maxn][maxn] = {\n    {-5,-4,-3,-2,-1,-2,-3,-4,-5},\n    {0,0,0,0,0,0,0,0,0},\n    {-6,0,0,0,0,0,0,0,-6},\n    {-7,0,-7,0,-7,0,-7,0,-7},\n    {0,0,0,0,0,0,0,0,0},\n    {0,0,0,0,0,0,0,0,0},\n    {7,0,7,0,7,0,7,0,7},\n    {6,0,0,0,0,0,0,0,6},\n    {0,0,0,0,0,0,0,0,0},\n    {5,4,3,2,1,2,3,4,5},\n};\nint n, sx, sy, gx, gy, player;\nbool finished;\npair<int,int> RC,BC;\n\nbool judge(int,int,int,int,int);     //\u79fb\u52a8\u662f\u5426\u5408\u6cd5\nbool checkmate(int,int,int);         //\u662f\u5426\u5b58\u5728\u5c06\u519b\u5c40\u9762\nvoid outRole(int,int);               //\u8f93\u51fa\u68cb\u5b50\nbool move(int,int,int,int,int);      //\u79fb\u52a8\uff0c\u8fd4\u56de\u503c\u8868\u793a\u662f\u5426\u80fd\u79fb\u52a8\nvoid debug();                        //\u8f93\u51fa\u68cb\u76d8\nvoid test();                         //\u81ea\u7531\u884c\u68cb\uff0c\u6d4b\u8bd5\n\nint main(){\n    BC = M(9,4); RC = M(0,4);\n    scanf(\"%d\",&n); int p = -1;\n    for (int i = 1; i <= n; i++){\n        scanf(\"%d%d%d%d\",&sx,&sy,&gx,&gy);\n        if (move(p,sx,sy,gx,gy)) p = -p;\n    }\n    return 0;\n}\n\nbool checkmate(int player){\n    for (int i = 0; i < 10; i++)\n        for (int j = 0; j < 9; j++)\n            if (matrix[i][j] * player < 0){\n                if (judge(-player,i,j,player>0 ? BC.first : RC.first, player>0 ? BC.second : RC.second))\n                    return true;\n            }\n    return false;\n}\n\nbool judge(int player, int sx, int sy, int gx, int gy){\n    /*\u6e38\u620f\u7ed3\u675f \u6216 \u521d\u59cb\u4f4d\u7f6e\u4e0d\u662f\u81ea\u5df1\u7684\u68cb\u5b50 \u4e0d\u5408\u6cd5*/\n    if (finished || player * matrix[sx][sy] <= 0) return false;\n    /*matrix[gx][gy] * player <= 0 \u8868\u793a \u76ee\u7684\u5730\u4e3a\u7a7a\u6216\u5bf9\u65b9\u68cb\u5b50*/\n    switch (matrix[sx][sy]*player) {\n        case 1: //Captain\n            for (int i = 1; i <= CapX[0]; i++)\n                if (sx+CapX[i] == gx && sy+CapY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 2: //Guard\n            for (int i = 1; i <= GuaX[0]; i++)\n                if (sx+GuaX[i] == gx && sy+GuaY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 3: //Elephant\n            for (int i = 1; i <= EleX[0]; i++)\n                if (!matrix[sx+EleXr[i]][sy+EleYr[i]] && sx+EleX[i] == gx && sy+EleY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 4: //Horse\n            for (int i = 1; i <= HorX[0]; i++)\n                if (!matrix[sx+HorXr[i]][sy+HorYr[i]] && sx+HorX[i] == gx && sy+HorY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 5: //Car\n            if (sx == gx){ //\u6a2a\u7740\u8d70\n                for (int i = sy + 1; i < gy; i++) if (matrix[gx][i]) return false;\n                for (int i = sy - 1; i > gy; i--) if (matrix[gx][i]) return false;\n                return matrix[gx][gy] * player <= 0;\n            } else if (sy == gy){ //\u7ad6\u7740\u8d70\n                for (int i = sx + 1; i < gx; i++) if (matrix[i][gy]) return false;\n                for (int i = sx - 1; i > gx; i--) if (matrix[i][gy]) return false;\n                return matrix[gx][gy] * player <= 0;\n            }\n            break;\n        case 6: //Duck\n            for (int i = 1; i <= DucX[0]; i++)\n                if (!matrix[sx+DucXp[i]][sy+DucYp[i]] && !matrix[sx+DucXr[i]][sy+DucYr[i]] && sx+DucX[i] == gx && sy+DucY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n        case 7: //Soldier\n            for (int i = 1; i <= SolX[0]; i++)\n                if (sx+SolX[i] == gx && sy+SolY[i] == gy && matrix[gx][gy] * player <= 0) return true;\n            break;\n    }\n    /*\u8fd0\u884c\u5230\u8fd9\u91cc\u8868\u660e\u65e0\u6cd5\u6309\u89c4\u5219\u79fb\u52a8\uff0c\u4e0d\u5408\u6cd5*/\n    return false;\n}\n\nvoid outRole(int player, int id){\n    if (player < 0) printf(\"red \"); else printf(\"blue \");\n    cout << role[abs(id)]; printf(\";\");\n}\n\nbool move(int player, int sx, int sy, int gx, int gy){\n    /*\u4e0d\u5408\u6cd5\u60c5\u51b5*/ \n    if (finished || !judge(player,sx,sy,gx,gy)) {printf(\"Invalid command\\n\"); return false;}\n\n    /*\u8f93\u51fa\u79fb\u52a8\u7684\u68cb\u5b50 */\n    int now = matrix[sx][sy];\n    outRole(player,now);\n\n    /*\u79fb\u9664\u5e76\u8f93\u51fa*/\n    int killed = 0;\n    if (matrix[gx][gy] * player < 0) killed = matrix[gx][gy], matrix[gx][gy] = 0;\n    if (!killed) printf(\"NA;\"); else outRole(-player,killed);\n\n    /*\u79fb\u52a8*/\n    swap(matrix[sx][sy],matrix[gx][gy]);\n\n    /*\u66f4\u65b0Captain\u4f4d\u7f6e*/\n    if (abs(now) == 1)\n        player>0 ? BC = M(gx,gy) : RC = M(gx,gy);\n\n    /*\u5224\u65ad\u662f\u5426\u5c06\u519b*/\n    if (checkmate(player) || checkmate(-player)) printf(\"yes;\"); \n    else printf(\"no;\");\n\n    /*\u5224\u65ad\u6e38\u620f\u662f\u5426\u7ed3\u675f*/\n    if (abs(killed) == 1) finished = 1;\n    if (finished) printf(\"yes\\n\"); else printf(\"no\\n\");\n\n    return true;\n}\n\nvoid debug(){\n    printf(\"\\n\");\n    for (int i = 9; i >= 0; i--){\n        for (int j = 0; j < 9; j++)\n            printf(\"%-4d\",matrix[i][j]);\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n}\n\nvoid test(){\n    int a,b,c,d,e;\n    while (cin >> a >> b >> c >> d >> e) \n        if (move(a,b,c,d,e)) debug();\n}\n```\n\n\n",
        "postTime": 1561908421,
        "uid": 129873,
        "name": "ReModer",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "## \u9898\u76ee\u63cf\u8ff0\r\n\r\n#### \u9898\u76ee\u80cc\u666f\r\n\r\n\u9e2d\u68cb\u5728\u4e00\u4e2a$10\\times 9$\u7684\u7f51\u683c\u68cb\u76d8\u4e0a\u8fdb\u884c\u3002\u53cc\u65b9\u4e00\u65b9\u6267\u7ea2\u68cb\u3001\u53e6\u4e00\u65b9\u6267\u84dd\u68cb\u8f6e\u6d41\u64cd\u4f5c\uff0c\u64cd\u4f5c\u65f6\uff0c\u5fc5\u987b\u9009\u62e9\u4e00\u679a\u81ea\u5df1\u7684\u68cb\u5b50\uff0c\u5e76\u6309\u89c4\u5219\u8fdb\u884c\u4e00\u6b65\u79fb\u52a8\u3002\u7ea2\u65b9\u6267\u5148\u624b\uff0c\u521d\u59cb\u68cb\u76d8\u5982\u4e0b\uff1a\r\n![initial_board.png](https://cdn.luogu.com.cn/upload/pic/58700.png)\r\n\r\n#### \u9898\u76ee\u63cf\u8ff0\r\n\r\n\u64cd\u4f5c\u5e8f\u5217\u4e2d\u7684\u6bcf\u4e2a\u64cd\u4f5c\u4e3a\u5f53\u524d\u64cd\u4f5c\u8005\u8bd5\u56fe\u79fb\u52a8\u67d0\u4e2a\u4f4d\u7f6e\u7684\u68cb\u5b50\u81f3\u53e6\u4e00\u4e2a\u4f4d\u7f6e\u3002\u5bf9\u4e8e\u6bcf\u6b65\u64cd\u4f5c\uff0c\u4f60\u9700\u8981\u9996\u5148\u5224\u5176\u662f\u5426\u5408\u6cd5\uff0c\u82e5\u5408\u6cd5\uff0c\u5219**\u8fdb\u4e00\u6b65\u6c42\u51fa**\uff1a\r\n\r\n1. \u79fb\u52a8\u4e86\u54ea\u4e2a\u68cb\u5b50\u3002\r\n2. \u88ab\u79fb\u51fa\u6e38\u620f\u7684\u68cb\u5b50\u3002\r\n3. \u662f\u5426\u5c06\u519b\u3002\r\n4. \u6e38\u620f\u662f\u5426\u7ed3\u675f\u3002\r\n\r\n\u4e0d\u5408\u6cd5\u60c5\u51b5\u5982\u4e0b\uff1a\r\n\r\n- \u6b64\u6b65\u79fb\u52a8\u7684\u521d\u59cb\u4f4d\u7f6e\u65e0\u5df1\u65b9\u68cb\u5b50\u505c\u7559\u3002\r\n- \u6b64\u6b65\u79fb\u52a8\u7684\u521d\u59cb\u4f4d\u7f6e\u6709\u5df1\u65b9\u68cb\u5b50\u505c\u7559\uff0c\u4f46\u79fb\u52a8\u4e0d\u7b26\u5408\u89c4\u5219\u3002\r\n- \u6e38\u620f\u5df2\u7ecf\u7ed3\u675f\u3002\r\n\r\n\u5e8f\u5217\u4e2d\u7684\u4e0d\u5408\u6cd5\u64cd\u4f5c\u662f**\u9700\u8981\u88ab\u5ffd\u7565\u7684**\u3002\r\n\r\n------------\r\n\r\n\u7528$1\\sim7$\u4ee3\u66ff\u8f66\u3001\u9a6c\u3001\u8c61\u3001\u58eb\u3001\u5c06\u3001\u5175\u3001\u9e2d\uff0c$0,1$\u4ee3\u66ff\u7ea2\u3001\u84dd\uff0c\u76f4\u63a5\u6a21\u62df\u5373\u53ef\u3002  \r\n\u849f\u84bb\u4ee3\u7801\u4e2d\u7684\u4e00\u4e9b\u6570\u7ec4\u548c\u51fd\u6570\uff1a  \r\n$name[i]$:\u68cb\u5b50\u540d\u79f0\u3002  \r\n$col[i]$:\u989c\u8272\u3002  \r\n$mp[i][j]$:$(i,j)$\u68cb\u5b50\u3002  \r\n$go[i][j][k]$:$name[i]$\u7b2c$j$\u79cd\u884c\u8d70\u3002  \r\n$err[i][j][k]$:\u7eca$name[i]$\u7b2c$j$\u79cd\u884c\u8d70\u7684\u817f\u3002  \r\n$ducke[i][j]$:\u7eca\u9e2d\u7b2c$i$\u79cd\u884c\u8d70\u7684\u817f\u3002  \r\n$check\\left(sx,sy,ex,ey\\right):\\left(sx,sy\\right)$\u68cb\u5b50\u662f\u5426\u80fd\u4e00\u6b65\u5230\u8fbe$(ex,ey)$\u3002   \r\n$check()$:\u662f\u5426\u5c06\u519b\u3002  \r\n**\u521d\u59cb\u68cb\u76d8**   \r\n\r\n```cpp\r\nint mp[11][11]={\r\n\t{1,2,3,4,5,4,3,2,1},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{7,0,0,0,0,0,0,0,7},\r\n\t{6,0,6,0,6,0,6,0,6},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{14,0,14,0,14,0,14,0,14},\r\n\t{15,0,0,0,0,0,0,0,15},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{9,10,11,12,13,12,11,10,9}\r\n};\r\n```\r\n\r\n**\u884c\u68cb**  \r\n\r\n```cpp\r\nint go[8][8][2]={\r\n\t{{0}},{{0}},\r\n\t{{1,2},{2,1},{-1,2},{-2,1},{1,-2},{2,-1},{-1,-2},{-2,-1}},\r\n\t{{2,2},{-2,2},{2,-2},{-2,-2}},\r\n\t{{1,1},{-1,1},{1,-1},{-1,-1}},\r\n\t{{1,0},{0,1},{-1,0},{0,-1}},\r\n\t{{1,1},{1,0},{0,1},{1,-1},{-1,1},{0,-1},{-1,0},{-1,-1}},\r\n\t{{2,3},{3,2},{-2,3},{3,-2},{-3,2},{2,-3},{-2,-3},{-3,-2}}\r\n};\r\n\r\n```\r\n\r\n**\u5904\u7406\u7eca\u817f**  \r\n\r\n```cpp\r\nint err[8][8][2]={\r\n\t{{0}},{{0}},\r\n\t{{0,1},{1,0},{0,1},{-1,0},{0,-1},{1,0},{0,-1},{-1,0}},//\u7eca\u9a6c\u817f\r\n\t{{1,1},{-1,1},{1,-1},{-1,-1}},//\u7eca\u8c61\u817f\r\n\t{{0}},{{0}},{{0}},\r\n\t{{0,1},{1,0},{0,1},{1,0},{-1,0},{0,-1},{0,-1},{-1,0}}//\u7eca\u9e2d\u817f(1)\r\n};\r\nint ducke[8][2]={{1,2},{2,1},{-1,2},{2,-1},{-2,1},{1,-2},{-1,-2},{-2,-1}};//\u7eca\u9e2d\u817f(2)\r\n```\r\n\r\n$check(sx,sy,ex,ey)$  \r\n\r\n```cpp\r\nbool check(int sx,int sy,int ex,int ey){\r\n\tconst int t1=mp[sx][sy]&7;Re int i;\r\n\tif(!t1)return 0;\r\n\tif(t1==1){//\u8f66\u884c\u8d70\r\n\t\tif(sy==ey){//\u540c\u4e00\u5217\r\n\t\t\tif(sx<ex){FOR(i,sx+1,ex)if(mp[i][sy])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u4e0b\r\n\t\t\telse{FOR(i,ex+1,sx)if(mp[i][sy])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u4e0a\r\n\t\t}\r\n\t\tif(sx==ex){//\u540c\u4e00\u884c\r\n\t\t\tif(sy<ey){FOR(i,sy+1,ey)if(mp[sx][i])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u53f3\r\n\t\t\telse{FOR(i,ey+1,sy)if(mp[sx][i])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u5de6\r\n\t\t}\r\n\t}\r\n\tif(t1==7){For(i,0,7)\r\n\t\tif(sx+go[7][i][0]==ex&&sy+go[7][i][1]==ey){\r\n\t\t\tif(!mp[sx+err[7][i][0]][sy+err[7][i][1]]&&!mp[sx+ducke[i][0]][sy+ducke[i][1]])return 1;\r\n\t\t\treturn 0;}//\u9e2d\u884c\u8d70\r\n\t}\r\n\tFor(i,0,7)if(sx+go[t1][i][0]==ex&&sy+go[t1][i][1]==ey){\r\n\t\tif(!(err[t1][i][0]||err[t1][i][1])||!mp[sx+err[t1][i][0]][sy+err[t1][i][1]])return 1;\r\n\t\treturn 0;}//\u5176\u4ed6\u68cb\u5b50\u884c\u8d70\r\n\treturn 0;} \r\n```\r\n\r\n$check()$  \r\n\r\n```cpp\r\nbool check(){int kng[2][2];Re int p,i,j;\r\n\tFor(i,0,9)For(j,0,8)if((mp[i][j]&7)==5)\r\n\t\tkng[(mp[i][j]&8)>>3][0]=i,kng[(mp[i][j]&8)>>3][1]=j;//\u627e\u738b\r\n\tFor(p,0,1)For(i,0,9)For(j,0,8)\r\n\t\tif((((mp[i][j]&8)>>3)^p)&&check(i,j,kng[p][0],kng[p][1]))return 1;//\u679a\u4e3e\u6240\u6709\u68cb\u5b50\uff0c\u5224\u65ad\u662f\u5426\u80fd\u5403\u6389\u5bf9\u65b9\u7684\u738b\r\n\treturn 0;}\r\n\r\n```\r\n\r\n\u849f\u84bb\u4e11\u964b\u7684\u4ee3\u7801\uff1a \r\n\r\n```cpp\r\n#include<cstdio>\r\n#include<iostream>\r\n#include<string>\r\n#define For(i,a,b) for(i=a;i<=b;i++)\r\n#define FOR(i,a,b) for(i=a;i<b;i++)\r\n#define NO goto haha\r\n#define Re register\r\nstd::string name[8]={\"NA\",\"car\",\"horse\",\"elephant\",\"guard\",\"captain\",\"soldier\",\"duck\"},col[2]={\"red \",\"blue \"}; \r\nint mp[11][11]={\r\n\t{1,2,3,4,5,4,3,2,1},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{7,0,0,0,0,0,0,0,7},\r\n\t{6,0,6,0,6,0,6,0,6},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{14,0,14,0,14,0,14,0,14},\r\n\t{15,0,0,0,0,0,0,0,15},\r\n\t{0,0,0,0,0,0,0,0,0},\r\n\t{9,10,11,12,13,12,11,10,9}\r\n};//\u521d\u59cb\u68cb\u76d8\r\nint go[8][8][2]={\r\n\t{{0}},{{0}},\r\n\t{{1,2},{2,1},{-1,2},{-2,1},{1,-2},{2,-1},{-1,-2},{-2,-1}},\r\n\t{{2,2},{-2,2},{2,-2},{-2,-2}},\r\n\t{{1,1},{-1,1},{1,-1},{-1,-1}},\r\n\t{{1,0},{0,1},{-1,0},{0,-1}},\r\n\t{{1,1},{1,0},{0,1},{1,-1},{-1,1},{0,-1},{-1,0},{-1,-1}},\r\n\t{{2,3},{3,2},{-2,3},{3,-2},{-3,2},{2,-3},{-2,-3},{-3,-2}}\r\n};//\u884c\u8d70\r\nint err[8][8][2]={\r\n\t{{0}},{{0}},\r\n\t{{0,1},{1,0},{0,1},{-1,0},{0,-1},{1,0},{0,-1},{-1,0}},//\u7eca\u9a6c\u817f\r\n\t{{1,1},{-1,1},{1,-1},{-1,-1}},//\u7eca\u8c61\u817f\r\n\t{{0}},{{0}},{{0}},\r\n\t{{0,1},{1,0},{0,1},{1,0},{-1,0},{0,-1},{0,-1},{-1,0}}//\u7eca\u9e2d\u817f(1)\r\n};\r\nint ducke[8][2]={{1,2},{2,1},{-1,2},{2,-1},{-2,1},{1,-2},{-1,-2},{-2,-1}};//\u7eca\u9e2d\u817f(2)\r\nbool check(int sx,int sy,int ex,int ey){\r\n\tconst int t1=mp[sx][sy]&7;Re int i;\r\n\tif(!t1)return 0;\r\n\tif(t1==1){//\u8f66\u884c\u8d70\r\n\t\tif(sy==ey){//\u540c\u4e00\u5217\r\n\t\t\tif(sx<ex){FOR(i,sx+1,ex)if(mp[i][sy])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u4e0b\r\n\t\t\telse{FOR(i,ex+1,sx)if(mp[i][sy])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u4e0a\r\n\t\t}\r\n\t\tif(sx==ex){//\u540c\u4e00\u884c\r\n\t\t\tif(sy<ey){FOR(i,sy+1,ey)if(mp[sx][i])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u53f3\r\n\t\t\telse{FOR(i,ey+1,sy)if(mp[sx][i])return 0;\r\n\t\t\t\treturn 1;}//\u5411\u5de6\r\n\t\t}\r\n\t}\r\n\tif(t1==7){For(i,0,7)\r\n\t\tif(sx+go[7][i][0]==ex&&sy+go[7][i][1]==ey){\r\n\t\t\tif(!mp[sx+err[7][i][0]][sy+err[7][i][1]]&&!mp[sx+ducke[i][0]][sy+ducke[i][1]])return 1;\r\n\t\t\treturn 0;}//\u9e2d\u884c\u8d70\r\n\t}\r\n\tFor(i,0,7)if(sx+go[t1][i][0]==ex&&sy+go[t1][i][1]==ey){\r\n\t\tif(!(err[t1][i][0]||err[t1][i][1])||!mp[sx+err[t1][i][0]][sy+err[t1][i][1]])return 1;\r\n\t\treturn 0;}//\u5176\u4ed6\u68cb\u5b50\u884c\u8d70\r\n\treturn 0;} \r\nbool check(){int kng[2][2];Re int p,i,j;\r\n\tFor(i,0,9)For(j,0,8)if((mp[i][j]&7)==5)\r\n\t\tkng[(mp[i][j]&8)>>3][0]=i,kng[(mp[i][j]&8)>>3][1]=j;//\u627e\u738b\r\n\tFor(p,0,1)For(i,0,9)For(j,0,8)\r\n\t\tif((((mp[i][j]&8)>>3)^p)&&check(i,j,kng[p][0],kng[p][1]))return 1;//\u679a\u4e3e\u6240\u6709\u68cb\u5b50\uff0c\u5224\u65ad\u662f\u5426\u80fd\u5403\u6389\u5bf9\u65b9\u7684\u738b\r\n\treturn 0;}\r\nint main(){bool fl=0;//\u6e38\u620f\u7ed3\u675f\u6807\u5fd7\r\n\tRe int p,sx,sy,ex,ey;int T;\r\n\tscanf(\"%d\",&T);\r\n\tFor(p,1,T){//(p&1):\u5f53\u524d\u64cd\u4f5c\u65b9\r\n\t\tscanf(\"%d%d%d%d\",&sx,&sy,&ex,&ey);\r\n\t\tconst int t1=(mp[sx][sy]&7),t3=(mp[ex][ey]&7);//\u68cb\u5b50\u7c7b\u578b\r\n\t\tconst bool t2=(bool)(mp[sx][sy]&8),t4=(bool)(mp[ex][ey]&8);//\u68cb\u5b50\u5f52\u5c5e\r\n\t\tif(fl||t2==(p&1)||t4==t2&&t3||!check(sx,sy,ex,ey))NO;\r\n        \t//\u7ed3\u675f\u540e\u79fb\u52a8\u3001\u79fb\u52a8\u5bf9\u65b9\u68cb\u5b50\u3001\u5403\u6389\u5df1\u65b9\u68cb\u5b50\u3001\u79fb\u52a8\u81f3\u65e0\u6cd5\u5230\u8fbe\u70b9\u5747\u4e3a\u975e\u6cd5\u64cd\u4f5c \r\n\t\tmp[ex][ey]=mp[sx][sy];mp[sx][sy]=0;//\u884c\u8d70\r\n\t\tstd::cout<<col[t2]<<name[t1]<<\";\";//\u8f93\u51fa\u79fb\u52a8\u7684\u68cb\u5b50\r\n\t\tif(t3)std::cout<<col[t4]<<name[t3];//\u8f93\u51fa\u88ab\u5403\u68cb\u5b50\r\n\t\telse printf(\"NA\");//\u6ca1\u6709\u68cb\u5b50\u88ab\u5403\r\n\t\tif(t3==5)printf(\";no;yes\\n\"),fl=1;//\u6e38\u620f\u7ed3\u675f\u4e86\r\n\t\telse if(check())printf(\";yes;no\\n\");//\u5c06\u519b\u5c40\u9762\r\n\t\telse printf(\";no;no\\n\");\r\n\t\tcontinue;\r\n\t\thaha:T--,p--,printf(\"Invalid command\\n\");}//\u975e\u6cd5\u64cd\u4f5c\uff0c\u4e0d\u8f6c\u6362\u64cd\u4f5c\u65b9\r\n}\r\n```",
        "postTime": 1587885003,
        "uid": 126439,
        "name": "Bear203",
        "ccfLevel": 0,
        "title": "\u9898\u89e3P5380 [THUPC2019]\u9e2d\u68cb"
    },
    {
        "content": "\u505a\u5b8c\u8fd9\u79cd\u9898\uff0c\u4e0d\u53d1\u9898\u89e3\u771f\u611f\u89c9\u5bf9\u4e0d\u8d77\u81ea\u5df1\u3002\n\n\u8bb2\u4e00\u4e0b\u6211\u81ea\u5df1\u7684\u601d\u8def\uff1a\n\n\u7528map[i][j]\u8868\u793ai\u884cj\u5217\u68cb\u5b50\u7684\u79cd\u7c7b\uff08\u8f661\uff0c\u9a6c2\uff0c\u8c613\uff0c\u58eb4\uff0c\u738b5\uff0c\u51756\uff0c\u9e2d7\uff0c\u6ca1\u6709\u5c31\u662f0\uff09\uff1b\n\ncol[i][j]\u8868\u793ai\u884cj\u5217\u68cb\u5b50\u7684\u989c\u8272(\u7ea2\u82720\uff0c\u84dd\u82721\uff0c\u6ca1\u6709\u662f-1\uff09\uff1b\n\ncnt\u8868\u793a\u5df2\u7ecf\u6267\u884c\u4e86\u51e0\u4e2a\u6709\u6548\u56de\u5408\uff0c\u663e\u7136cnt%2==0\u5c31\u8bf4\u660e\u5f53\u524d\u662f\u7ea2\u8272\u7684\u56de\u5408\uff0ccnt%2==1\u8bf4\u660e\u73b0\u5728\u662f\u84dd\u8272\u7684\u56de\u5408\n\nmove(a,b,c,d\uff09\u8868\u793a\u4f4d\u4e8e\uff08a\uff0cb\uff09\u7684\u68cb\u5b50\u80fd\u5426\u5230\u8fbe\uff08c\uff0cd\uff09\uff08\u4e0d\u5b9e\u9645\u64cd\u4f5c\uff09\uff0cname(a,b)\u8868\u793a\u8f93\u51fa\u4f4d\u4e8e\uff08a\uff0cb\uff09\u7684\u68cb\u5b50\u7684\u540d\u5b57\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u5224\u65ad\u662f\u5426\u662f\u6709\u6548\u64cd\u4f5c\uff0c\u9700\u8981\u5224\u65ad\u8fd9\u51e0\u70b9\n\n\uff081\uff09move\uff08a\uff0cb\uff0cc\uff0cd\uff09\u662f\u5426\u4e3a\u771f\n\n\uff082\uff09\uff08a\uff0cb\uff09\u662f\u5426\u5b58\u5728\u68cb\u5b50\n\n\uff083\uff09\u79fb\u52a8\u7684\u68cb\u5b50\uff08a\uff0cb\uff09\u989c\u8272\u662f\u5426\u548c\u5f53\u524d\u5e94\u79fb\u52a8\u7684\u989c\u8272\u76f8\u540c\n\n\uff084\uff09\u5230\u8fbe\u7684\u70b9\u662f\u5426\u6ca1\u6709\u540c\u8272\u68cb\u5b50\uff08\u6ca1\u6709\u6216\u8005\u5f02\u8272\u90fd\u53ef\u4ee5\uff09\n\n\uff085\uff09\u6e38\u620f\u662f\u5426\u7ed3\u675f\n\n\u5982\u679c\u65e0\u6548\uff0c\u76f4\u63a5\u8f93\u51fa\u201cInvalid command\u201d\n\n\u5426\u5219\u9700\u8981\u56de\u7b54\uff1a\n\n\uff081\uff09\u79fb\u52a8\u7684\u68cb\u5b50\u540d\u79f0\n\n\u89e3\u6790\uff1a\u76f4\u63a5\u8c03\u7528name(a\uff0cb\uff09\n\n\uff082\uff09\u5230\u8fbe\u7684\u70b9\u7684\u68cb\u5b50\u540d\u79f0\n\n\u89e3\u6790\uff1a\u76f4\u63a5\u8c03\u7528name(c\uff0cd\uff09\n\n\uff083\uff09\u662f\u5426\u5b58\u5728\u5c06\u519b\u60c5\u51b5\n\n\u89e3\u6790\uff1a\u8bbe\u7ea2\u8272\u5c06\u519b\u4f4d\u4e8e\uff08rx\uff0cry\uff09\uff0c\u84dd\u8272\u5c06\u519b\u4f4d\u4e8e\uff08bx\uff0cby\uff09\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7ea2\u8272\u68cb\u5b50\uff08i\uff0cj\uff09\uff0c\u5982\u679cmove(i\uff0cj\uff0cbx\uff0cby\uff09\u4e3a1\uff0c\u5b58\u5728\u5c06\u519b\u5c40\u9762\uff1b\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u84dd\u8272\u68cb\u5b50\uff08i\uff0cj\uff09\uff0c\u5982\u679cmove\uff08i\uff0cj\uff0crx\uff0cry\uff09\u4e3a1\uff0c\u5b58\u5728\u5c06\u519b\u5c40\u9762\u3002\n\n\u6ce8\u610f\uff1a\u6b64\u6b65\u9700\u8981\u5728\u5c06\u4f4d\u4e8e\uff08a\uff0cb\uff09\u7684\u68cb\u5b50\u79fb\u52a8\u5230\uff08c\uff0cd\uff09\u4e4b\u540e\u8fdb\u884c\uff0c\u5426\u5219\u4f1a\u51fa\u95ee\u9898\u3002\n\n\uff084\uff09\u6e38\u620f\u662f\u5426\u7ed3\u675f\n\n\u89e3\u6790\uff1a\u5982\u679cmap[c][d]\u4e3a5\uff0c\u90a3\u4e48\u6e38\u620f\u7ed3\u675f\u3002\n\n\u4f60\u53ef\u80fd\u5df2\u7ecf\u53d1\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a1\u30012\u30014\u95ee\u9700\u8981\u5728\u5c06\uff08a\uff0cb\uff09\u5b9e\u9645\u79fb\u52a8\u5230\uff08c\uff0cd\uff09\u4e4b\u524d\u8fdb\u884c\uff0c\u800c\u7b2c3\u95ee\u9700\u8981\u5728\u79fb\u52a8\u4e4b\u540e\u8fdb\u884c\u3002\u6240\u4ee5\u6309\u987a\u5e8f\u505a\u4e0d\u884c\uff0c\u8981\u5b58\u4e0b\u7b2c\u56db\u95ee\u7b54\u6848\u4e4b\u540e\u8f93\u51fa\u3002\n\n\u6700\u540e\u653e\u51fa\u4ee3\u7801\u3002\u7531\u4e8e\u6211\u968f\u4fbf\u7ffb\u4e86\u51e0\u4e2aAC\u4ee3\u7801\u53d1\u73b0\u6709\u6284\u9898\u89e3\u7684\uff0c\u6240\u4ee5\u53ea\u6709\u6838\u5fc3\u51fd\u6570move\u3002\uff08\u5176\u5b9e\u5176\u4ed6\u7684\u90fd\u6bd4\u8fd9\u4e2a\u597d\u5199\uff09\n\n```cpp\nint s1[4] = {1,1,-1,-1};\nint s2[4] = {1,-1,1,-1};\nint s3[4] = {0,1,0,-1};\nint s4[4] = {1,0,-1,0};\n\nbool move(int a,int b,int c,int d){\n    if(map[a][b] == 1){\n    \tif(a == c){\n    \t\tif(b > d){\n    \t\t\tswap(b,d);\n    \t\t}\n    \t\tfor(int i = b + 1;i < d;i++){\n    \t\t\tif(map[a][i]){\n    \t\t\t\treturn 0;\n    \t\t\t}\n    \t\t}\n    \t\treturn 1;\n    \t}else if(b == d){\n            if(a > c){\n    \t\t\tswap(a,c);\n    \t\t}\n    \t\tfor(int i = a + 1;i < c;i++){\n    \t\t\tif(map[i][b]){\n    \t\t\t\treturn 0;\n    \t\t\t}\n    \t\t}\n    \t\treturn 1;\n    \t}\n    \treturn 0;\n    }\n    if(map[a][b] == 2){\n    \tfor(int i = 0;i < 4;i++){\n    \t\tif(map[a + s1[i]][b] == 0 && a + s1[i] * 2 == c && b + s2[i] == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t\tif(map[a][b + s2[i]] == 0 && a + s1[i] == c && b + s2[i] * 2 == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t}\n    \treturn 0;\n    }\n    if(map[a][b] == 3){\n    \tfor(int i = 0;i < 4;i++){\n    \t\tif(map[a + s1[i]][b + s2[i]] == 0 && a + s1[i] * 2 == c && b + s2[i] * 2 == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t}\n    \treturn 0;\n    }\n    if(map[a][b] == 4){\n    \tfor(int i = 0;i < 4;i++){\n    \t\tif(a + s1[i] == c && b + s2[i] == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t}\n    \treturn 0;\n    }\n    if(map[a][b] == 5){\n        for(int i = 0;i < 4;i++){\n        \tif(a + s3[i] == c && b + s4[i] == d){\n        \t\treturn 1;\n        \t}\n        }\n        return 0;\n    }\n    if(map[a][b] == 6){\n    \tfor(int i = 0;i < 4;i++){\n    \t\tif(a + s1[i] == c && b + s2[i] == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t\tif(a + s3[i] == c && b + s4[i] == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t}\n    \treturn 0;\n    }\n    if(map[a][b] == 7){\n    \tfor(int i = 0;i < 4;i++){\n    \t\tif(map[a + s1[i] * 2][b + s2[i]] == 0 && map[a + s1[i]][b] == 0 && a + s1[i] * 3 == c && b + s2[i] * 2 == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t\tif(map[a + s1[i]][b + s2[i] * 2] == 0 && map[a][b + s2[i]] == 0 && a + s1[i] * 2 == c && b + s2[i] * 3 == d){\n    \t\t\treturn 1;\n    \t\t}\n    \t}\n    \treturn 0;\n    }\n}\n```\n",
        "postTime": 1565939622,
        "uid": 49776,
        "name": "chenxinyang2006",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "\u7ec8\u4e8e\u628a\u8fd9\u7bc7\u9898\u89e3\u5236\u9020\u51fa\u6765\u4e86233\n\n\u8fd9\u9053\u9898\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5927\u6a21\u62df\uff0c\u4f46\u5bf9\u4e8e\u7a9d\u8fd9\u4e2a\u849f\u84bb\u9e2d\u5b50\u6765\u8bf4\u5199\u5bf9\u5b83\u8fd8\u662f\u5f88\u4e0d\u5bb9\u6613\u7684\uff0c\u7a9d\u5199\u4e8610.43KB ~~\uff08\u538b\u884c\u540e\uff09~~\uff0c\u53ef\u67d0\u4e9b\u9e2d\u5b50\u5374\u53ea\u5199\u4e864.19KB~~\u7384\u5b66~~\n\n\u7b2c\u4e00\u90e8\u5206\uff1a\u521d\u59cb\u5316\n\n```cpp\nfor(int i=0;i<=9;i++)\nfor(int j=0;j<=8;j++) f[i][j]=-1;//\u521d\u59cb\u5316\u68cb\u76d8\u989c\u8272\uff0c-1\uff1a\u65e0\u68cb\u5b50\uff0c0\uff1a\u7ea2\u65b9\uff0c1\uff1a\u84dd\u65b9 \nb[1]=\"captain\";b[2]=\"guard\";b[3]=\"elephant\";b[4]=\"horse\";b[5]=\"car\";b[6]=\"duck\";b[7]=\"soldier\";//\u6bcf\u4e00\u4e2a\u68cb\u5b50\u7684\u6570\u5b57\u4ee3\u53f7\uff0c1\uff1a\u738b\uff0c2\uff1a\u58eb\uff0c\u4ee5\u6b64\u7c7b\u63a8 \nfor(int i=0;i<=8;i+=2) {p[3][i]=7;f[3][i]=0;}p[2][0]=6;f[2][0]=0;p[2][8]=6;f[2][8]=0;\nfor(int i=0;i<=8;i+=2) {p[6][i]=7;f[6][i]=1;}p[7][0]=6;f[7][0]=1;p[7][8]=6;f[7][8]=1;\nfor(int i=0;i<=8;i++) {f[0][i]=0;f[9][i]=1;}p[0][0]=5;p[0][8]=5;p[9][0]=5;p[9][8]=5;p[0][1]=4;p[0][7]=4;p[9][1]=4;p[9][7]=4;p[0][2]=3;p[0][6]=3;p[9][2]=3;p[9][6]=3;p[0][3]=2;p[0][5]=2;p[9][3]=2;p[9][5]=2;p[0][4]=1;p[9][4]=1;\n//\u521d\u59cb\u5316\u68cb\u76d8\uff0cp[x][y]:\u5f53\u524d\u4f4d\u7f6e\u68cb\u5b50\u7684\u6570\u5b57\u4ee3\u53f7\uff0c0\u5219\u4ee3\u8868\u65e0\u68cb\u5b50\u3002\n```\n\u7b2c\u4e8c\u90e8\u5206\uff1a\u521d\u6b65\u5224\u65ad\u8d70\u6cd5\u662f\u5426\u7b26\u5408\u89c4\u5219\n```cpp\ncin>>q;\nfor(int i=1;i<=q;i++)\n{\ncin>>x>>y>>x2>>y2;\nif(x<0||y<0||x2>9||y2>8||x>9||y>8||x2<0||y2<0) cout<<\"Invalid command\"<<endl;//\u5224\u65ad\u662f\u5426\u8d8a\u754c \nelse if(p[x][y]==0) cout<<\"Invalid command\"<<endl;//\u5224\u65ad\u6b64\u5904\u662f\u5426\u6709\u5b50 \nelse if(p[x2][y2]!=0&&f[x2][y2]==f[x][y]) cout<<\"Invalid command\"<<endl;//\u5224\u65ad\u843d\u5b50\u7684\u4f4d\u7f6e\u662f\u5426\u6709\u5df2\u65b9\u68cb\u5b50 \nelse if(f[x][y]!=r||f[x2][y2]==r) cout<<\"Invalid command\"<<endl;//\u5224\u65ad\u8d70\u7684\u662f\u4e0d\u662f\u5df1\u65b9\u68cb\u5b50 \nelse if(la==1) cout<<\"Invalid command\"<<endl;//\u5224\u65ad\u662f\u5426\u7ec8\u5c40 \nelse if(x==x2&&y==y2) cout<<\"Invalid command\"<<endl;//\u5224\u65ad\u7ec8\u70b9\u662f\u5426\u548c\u8d77\u70b9\u91cd\u5408 \nelse\n{\nif(p[x][y]==1) checkcp(x,y,x2,y2);\nif(p[x][y]==2) ckg(x,y,x2,y2);\nif(p[x][y]==3) cke(x,y,x2,y2);\nif(p[x][y]==4) ckh(x,y,x2,y2);\nif(p[x][y]==5) ckc(x,y,x2,y2);\nif(p[x][y]==6) ckd(x,y,x2,y2);\nif(p[x][y]==7) cks(x,y,x2,y2);r=1-r;}//\u5224\u65ad\u68cb\u5b50\u72b6\u6001\uff0c\u66f4\u65b0\u989c\u8272 }\n```\n\u7b2c\u4e09\u90e8\u5206\uff1a\u5224\u65ad\u68cb\u5b50\u72b6\u6001\uff0c\u8f93\u51fa\n\n\u4ee5\u58eb\u4e3a\u4f8b\uff1a\n```cpp\nvoid pd()\n{\nfor(int j=0;j<=9;j++)\nfor(int k=0;k<=8;k++)\n{\nif(p[j][k]>=1)\n{\nint e,d=p[j][k];\ne=0;if(d==1) e=max(e,cjcp(j,k,f[j][k]));\nif(d==2) e=max(e,cjshi(j,k,f[j][k]));\nif(d==3) e=max(e,cjele(j,k,f[j][k]));\nif(d==4) e=max(e,cjhor(j,k,f[j][k]));\nif(d==5) e=max(e,cjcar(j,k,f[j][k]));\nif(d==6) e=max(e,cjduck(j,k,f[j][k]));\nif(d==7) e=max(e,cjsold(j,k,f[j][k]));\nif(e==1) {cout<<\"yes;no\"<<endl;psc=0;return;}\n}\n} \n//\u5224\u65ad\u662f\u5426\u5b58\u5728\u5c06\u519b\u72b6\u6001\uff0c\u51fd\u6570cjcp,cjshi\u7b49\u7528\u6765\u5224\u65ad\u738b\u3001\u58eb\u7b49\u662f\u5426\u5c06\u519b\u5bf9\u65b9\u738b \n}\nvoid ckg(int aa,int bb,int cc,int dd)\n{\nif(abs(aa-cc)>1||abs(bb-dd)>1){cout<<\"Invalid command\"<<endl;r=1-r;return;}\nif(aa==cc||bb==dd) {cout<<\"Invalid command\"<<endl;r=1-r;return;}//\u5224\u65ad\u662f\u5426\u7b26\u5408\u68cb\u5b50\u8d70\u6cd5,\u5982\u4e0d\u7b26\u5408\u66f4\u65b0\u4e00\u904d\u989c\u8272,\u56e0\u4e3b\u7a0b\u5e8f\u4e2d\u5982\u679c\u8fdb\u5165\u51fd\u6570\u5c31\u4f1a\u81ea\u52a8\u66f4\u65b0\u4e00\u904d\u989c\u8272\uff0c\u6240\u4ee5\u518d\u66f4\u65b0\u4e00\u904d\u4f7f\u4e0b\u68cb\u65b9\u4e0d\u53d7\u5f71\u54cd\nif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"guard\"<<\";\";\nif(f[cc][dd]!=-1)//\u5982\u679c\u843d\u5b50\u4f4d\u6709\u68cb\u5b50 \n{\nint l=f[cc][dd];\nif(l==0) cout<<\"red\"<<\" \";if(l==1) cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\nif(cw(cc,dd)==1&&f[cc][dd]!=f[aa][bb]){cout<<\"no;yes\"<<endl;la=1;return;}//\u5224\u65ad\u662f\u5426\u7ec8\u5c40 \np[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;//\u66f4\u65b0\u4fe1\u606f \n}\nelse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}//\u66f4\u65b0\u4fe1\u606f \npsc=1;pd();if(psc==1) cout<<\"no;no\"<<endl;//\u5224\u65ad\u662f\u5426\u5c06\u519b \n}\n```\n\u6700\u540e\u4e0a\u5b8c\u6574\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint q,x,y,x2,y2,p[100][100],f[100][100],r,la,psc;\nstring b[10];\nint cjcp(int xx,int yy,int ya)\n{\n\tif(xx<9) \n\tif(p[xx+1][yy]==1&&f[xx+1][yy]!=ya){return 1;}\n\tif(yy<8) \n\tif(p[xx][yy+1]==1&&f[xx][yy+1]!=ya){return 1;}\n\tif(xx>0) \n\tif(p[xx-1][yy]==1&&f[xx-1][yy]!=ya){return 1;}\n\tif(yy>0) \n\tif(p[xx][yy-1]==1&&f[xx][yy-1]!=ya){return 1;}\n\treturn 0;\n}\nint cjshi(int xx,int yy,int ya)\n{\n\tif(xx<9&&yy<8) \n\tif(p[xx+1][yy+1]==1&&f[xx+1][yy+1]!=ya){return 1;}\n\tif(yy<8&&xx>0) \n\tif(p[xx-1][yy+1]==1&&f[xx-1][yy+1]!=ya){return 1;}\n\tif(xx>0&&yy>0) \n\tif(p[xx-1][yy-1]==1&&f[xx-1][yy-1]!=ya){return 1;}\n\tif(yy>0&&xx<9) \n\tif(p[xx+1][yy-1]==1&&f[xx+1][yy-1]!=ya){return 1;}\n\treturn 0;\n}\nint cjele(int xx,int yy,int ya)\n{\n\tif(xx<8&&yy<7) \n\tif(p[xx+2][yy+2]==1&&p[xx+1][yy+1]==0&&f[xx+2][yy+2]!=ya){return 1;}\n\tif(yy<7&&xx>1) \n\tif(p[xx-2][yy+2]==1&&p[xx-1][yy+1]==0&&f[xx-2][yy+2]!=ya){return 1;}\n\tif(xx>1&&yy>1) \n\tif(p[xx-2][yy-2]==1&&p[xx-1][yy-1]==0&&f[xx-2][yy-2]!=ya){return 1;}\n\tif(yy>1&&xx<8) \n\tif(p[xx+2][yy-2]==1&&p[xx+1][yy-1]==0&&f[xx+2][yy-2]!=ya){return 1;}\n\treturn 0;\n}\nint cjhor(int xx,int yy,int ya)\n{\n\tif(xx<8&&yy<8) \n\tif(p[xx+2][yy+1]==1&&p[xx+1][yy]==0&&f[xx+2][yy+1]!=ya){return 1;}\n\tif(yy<8&&xx>1) \n\tif(p[xx-2][yy+1]==1&&p[xx-1][yy]==0&&f[xx-2][yy+1]!=ya){return 1;}\n\tif(xx>1&&yy>0) \n\tif(p[xx-2][yy-1]==1&&p[xx-1][yy]==0&&f[xx-2][yy-1]!=ya){return 1;}\n\tif(yy>0&&xx<8) \n\tif(p[xx+2][yy-1]==1&&p[xx+1][yy]==0&&f[xx+2][yy-1]!=ya){return 1;}\n\tif(xx<9&&yy<7) \n\tif(p[xx+1][yy+2]==1&&p[xx][yy+1]==0&&f[xx+1][yy+2]!=ya){return 1;}\n\tif(yy<7&&xx>0) \n\tif(p[xx-1][yy+2]==1&&p[xx][yy+1]==0&&f[xx-1][yy+2]!=ya){return 1;}\n\tif(xx>0&&yy>1) \n\tif(p[xx-1][yy-2]==1&&p[xx][yy-1]==0&&f[xx-1][yy-2]!=ya){return 1;}\n\tif(yy>1&&xx<9) \n\tif(p[xx+1][yy-2]==1&&p[xx][yy-1]==0&&f[xx+1][yy-2]!=ya){return 1;}\n\treturn 0;\n}\nint cjcar(int xx,int yy,int ya)\n{\n\tfor(int j=yy-1;j>=0;j--) if(p[xx][j]>0){if(p[xx][j]==1&&f[xx][j]!=ya) return 1;break;}\n\tfor(int j=yy+1;j<=8;j++) if(p[xx][j]>0){if(p[xx][j]==1&&f[xx][j]!=ya) return 1;break;}\n\tfor(int j=xx-1;j>=0;j--) if(p[j][yy]>0){if(p[j][yy]==1&&f[j][yy]!=ya) return 1;break;}\n\tfor(int j=xx+1;j<=9;j++) if(p[j][yy]>0){if(p[j][yy]==1&&f[j][yy]!=ya) return 1;break;}\n\treturn 0;\n}\nint cjduck(int xx,int yy,int ya)\n{\n\tif(xx<7&&yy<7) \n\tif(p[xx+2][yy+1]==0&&p[xx+1][yy]==0&&p[xx+3][yy+2]==1&&f[xx+3][yy+2]!=ya){return 1;}\n\tif(yy<7&&xx>2) \n\tif(p[xx-2][yy+1]==0&&p[xx-1][yy]==0&&p[xx-3][yy+2]==1&&f[xx-3][yy+2]!=ya){return 1;}\n\tif(xx>2&&yy>1) \n\tif(p[xx-2][yy-1]==0&&p[xx-1][yy]==0&&p[xx-3][yy-2]==1&&f[xx-3][yy-2]!=ya){return 1;}\n\tif(yy>1&&xx<7) \n\tif(p[xx+2][yy-1]==0&&p[xx+1][yy]==0&&p[xx+3][yy-2]==1&&f[xx+3][yy-2]!=ya){return 1;}\n\tif(xx<8&&yy<6) \n\tif(p[xx+1][yy+2]==0&&p[xx][yy+1]==0&&p[xx+2][yy+3]==1&&f[xx+2][yy+3]!=ya){return 1;}\n\tif(yy<6&&xx>1) \n\tif(p[xx-1][yy+2]==0&&p[xx][yy+1]==0&&p[xx-2][yy+3]==1&&f[xx-2][yy+3]!=ya){return 1;}\n\tif(xx>1&&yy>2) \n\tif(p[xx-1][yy-2]==0&&p[xx][yy-1]==0&&p[xx-2][yy-3]==1&&f[xx-2][yy-3]!=ya){return 1;}\n\tif(yy>2&&xx<8) \n\tif(p[xx+1][yy-2]==0&&p[xx][yy-1]==0&&p[xx+2][yy-3]==1&&f[xx+2][yy-3]!=ya){return 1;}\n\treturn 0;\n}\nint cjsold(int xx,int yy,int ya)\n{\n\tif(cjcp(xx,yy,ya)==1||cjshi(xx,yy,ya)==1) return 1;\n\treturn 0;\n}\nint cw(int z,int  zx)\n{\n\tif(p[z][zx]==1) return 1;\n\treturn 0; \n}\nvoid pd()\n{\n\tfor(int j=0;j<=9;j++)\n\tfor(int k=0;k<=8;k++)\n\t{\n\t\tif(p[j][k]>=1)\n\t\t{\n\t\t\tint e,d=p[j][k];\n\t\t\te=0;if(d==1) e=max(e,cjcp(j,k,f[j][k]));if(d==2) e=max(e,cjshi(j,k,f[j][k]));if(d==3) e=max(e,cjele(j,k,f[j][k]));if(d==4) e=max(e,cjhor(j,k,f[j][k]));if(d==5) e=max(e,cjcar(j,k,f[j][k]));if(d==6) e=max(e,cjduck(j,k,f[j][k]));if(d==7) e=max(e,cjsold(j,k,f[j][k]));if(e==1) {cout<<\"yes;no\"<<endl;psc=0;return;}\n\t\t}\n\t} \n}\nvoid checkcp(int aa,int bb,int cc,int dd)\n{\n\tif(abs(aa-cc)>1||abs(bb-dd)>1){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(aa!=cc&&bb!=dd){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"captain\"<<\";\";\n\tif(f[cc][dd]!=-1)\n\t{\n\t\tint l=f[cc][dd];\n\t\tif(l==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\n\t\tif(cw(cc,dd)==1){cout<<\"no;yes\"<<endl;la=1;return;}\n\t\tp[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;\n\t}\n\telse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}\n\tpsc=1;pd(); if(psc==1) cout<<\"no;no\"<<endl;\n}\nvoid ckg(int aa,int bb,int cc,int dd)\n{\n\tif(abs(aa-cc)>1||abs(bb-dd)>1){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(aa==cc||bb==dd) {cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"guard\"<<\";\";\n\tif(f[cc][dd]!=-1) \n\t{\n\t\tint l=f[cc][dd];\n\t\tif(l==0) cout<<\"red\"<<\" \";if(l==1) cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\n\t\tif(cw(cc,dd)==1&&f[cc][dd]!=f[aa][bb]){cout<<\"no;yes\"<<endl;la=1;return;} \n\t\tp[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;\n\t}\n\telse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}\n\tpsc=1;pd();if(psc==1) cout<<\"no;no\"<<endl;\n}\nvoid cke(int aa,int bb,int cc,int dd)\n{\n\tif(abs(aa-cc)!=2||abs(bb-dd)!=2) {cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(p[(aa+cc)/2][(bb+dd)/2]!=0) {cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"elephant\"<<\";\";\n\tif(f[cc][dd]!=-1)\n\t{\n\t\tint l=f[cc][dd];\n\t\tif(l==0) cout<<\"red\"<<\" \";if(l==1) cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\n\t\tif(cw(cc,dd)==1&&f[cc][dd]!=f[aa][bb]) {cout<<\"no;yes\"<<endl;la=1;return;}\n\t\tp[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;\n\t}\n\telse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}\n\tpsc=1;pd();if(psc==1) cout<<\"no;no\"<<endl;\n}\nvoid ckh(int aa,int bb,int cc,int dd)\n{\n\tif(abs(aa-cc)>2||abs(bb-dd)>2) {cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(aa==cc||bb==dd){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(abs(aa-cc)==1&&abs(bb-dd)==1){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(abs(aa-cc)==2&&abs(bb-dd)==2){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(abs(aa-cc)==2&&abs(bb-dd)==1){if(p[(aa+cc)/2][bb]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}}\n\tif(abs(aa-cc)==1&&abs(bb-dd)==2){if(p[aa][(bb+dd)/2]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}}\n\tif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"horse\"<<\";\";\n\tif(f[cc][dd]!=-1)\n\t{\n\t\tint l=f[cc][dd];\n\t\tif(l==0) cout<<\"red\"<<\" \";if(l==1) cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\n\t\tif(cw(cc,dd)==1&&f[cc][dd]!=f[aa][bb]) {cout<<\"no;yes\"<<endl;la=1;return;}\n\t\tp[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;\n\t}\n\telse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}\n\tpsc=1;pd();if(psc==1) cout<<\"no;no\"<<endl;\n}\nvoid ckc(int aa,int bb,int cc,int dd)\n{\n\tif(aa!=cc&&bb!=dd){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(aa!=cc)for(int j=min(aa,cc)+1;j<max(aa,cc);j++) if(p[j][bb]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(bb!=dd)for(int j=min(bb,dd)+1;j<max(bb,dd);j++) if(p[aa][j]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"car\"<<\";\";\n\tif(f[cc][dd]!=-1)\n\t{\n\t\tint l=f[cc][dd];\n\t\tif(l==0) cout<<\"red\"<<\" \";if(l==1) cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\n\t\tif(cw(cc,dd)==1&&f[cc][dd]!=f[aa][bb]) {cout<<\"no;yes\"<<endl;la=1;return;}\n\t\tp[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;\n\t}\n\telse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}\n\tpsc=1;pd();if(psc==1) cout<<\"no;no\"<<endl;\n}\nvoid ckd(int aa,int bb,int cc,int dd)\n{\n\tint sx,sy;\n\tif(aa<cc) sx=1;else sx=-1;\n\tif(bb<dd) sy=1;else sy=-1;\n\tif(abs(aa-cc)>3||abs(bb-dd)>3){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(abs(aa-cc)<2||abs(bb-dd)<2){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(abs(aa-cc)==abs(bb-dd)){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(abs(aa-cc)==3){if(p[aa+sx*1][bb]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}if(p[aa+sx*2][bb+sy*1]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}}\n\tif(abs(bb-dd)==3){if(p[aa][bb+sy*1]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}if(p[aa+sx*1][bb+sy*2]!=0){cout<<\"Invalid command\"<<endl;r=1-r;return;}}\n\tif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"duck\"<<\";\";\n\tif(f[cc][dd]!=-1)\n\t{\n\t\tint l=f[cc][dd];\n\t\tif(l==0) cout<<\"red\"<<\" \";if(l==1) cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\n\t\tif(cw(cc,dd)==1&&f[cc][dd]!=f[aa][bb]) {cout<<\"no;yes\"<<endl;la=1;return;}\n\t\tp[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;\n\t}\n\telse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}\n\tpsc=1;pd(); if(psc==1) cout<<\"no;no\"<<endl;\n}\nvoid cks(int aa,int bb,int cc,int dd)\n{\n\tif(abs(aa-cc)>1||abs(bb-dd)>1){cout<<\"Invalid command\"<<endl;r=1-r;return;}\n\tif(r==0) cout<<\"red\"<<\" \";else cout<<\"blue\"<<\" \";cout<<\"soldier\"<<\";\";\n\tif(f[cc][dd]!=-1)\n\t{\n\t\tint l=f[cc][dd];\n\t\tif(l==0) cout<<\"red\"<<\" \";if(l==1) cout<<\"blue\"<<\" \";cout<<b[p[cc][dd]]<<\";\";\n\t\tif(cw(cc,dd)==1&&f[cc][dd]!=f[aa][bb]) {cout<<\"no;yes\"<<endl;la=1;return;}\n\t\tp[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;\n\t}\n\telse {cout<<\"NA;\";p[cc][dd]=p[aa][bb];f[cc][dd]=f[aa][bb];p[aa][bb]=0;f[aa][bb]=-1;}\n\tpsc=1;pd();if(psc==1) cout<<\"no;no\"<<endl;\n}\nint main()\n{\nfor(int i=0;i<=9;i++)\nfor(int j=0;j<=8;j++) f[i][j]=-1;\nb[1]=\"captain\";b[2]=\"guard\";b[3]=\"elephant\";b[4]=\"horse\";b[5]=\"car\";b[6]=\"duck\";b[7]=\"soldier\";\nfor(int i=0;i<=8;i+=2) {p[3][i]=7;f[3][i]=0;}p[2][0]=6;f[2][0]=0;p[2][8]=6;f[2][8]=0;\nfor(int i=0;i<=8;i+=2) {p[6][i]=7;f[6][i]=1;}p[7][0]=6;f[7][0]=1;p[7][8]=6;f[7][8]=1;\nfor(int i=0;i<=8;i++) {f[0][i]=0;f[9][i]=1;}p[0][0]=5;p[0][8]=5;p[9][0]=5;p[9][8]=5;p[0][1]=4;p[0][7]=4;p[9][1]=4;p[9][7]=4;p[0][2]=3;p[0][6]=3;p[9][2]=3;p[9][6]=3;p[0][3]=2;p[0][5]=2;p[9][3]=2;p[9][5]=2;p[0][4]=1;p[9][4]=1;\ncin>>q;\nfor(int i=1;i<=q;i++)\n{\n\tcin>>x>>y>>x2>>y2;\n\tif(x<0||y<0||x2>9||y2>8||x>9||y>8||x2<0||y2<0) cout<<\"Invalid command\"<<endl;\n\telse if(p[x][y]==0) cout<<\"Invalid command\"<<endl;\n\telse if(p[x2][y2]!=0&&f[x2][y2]==f[x][y]) cout<<\"Invalid command\"<<endl; \n\telse if(f[x][y]!=r||f[x2][y2]==r) cout<<\"Invalid command\"<<endl;\n\telse if(la==1) cout<<\"Invalid command\"<<endl; \n\telse if(x==x2&&y==y2) cout<<\"Invalid command\"<<endl;\n\telse{if(p[x][y]==1) checkcp(x,y,x2,y2);if(p[x][y]==2) ckg(x,y,x2,y2);if(p[x][y]==3) cke(x,y,x2,y2);if(p[x][y]==4) ckh(x,y,x2,y2);if(p[x][y]==5) ckc(x,y,x2,y2);if(p[x][y]==6) ckd(x,y,x2,y2);if(p[x][y]==7) cks(x,y,x2,y2);r=1-r;}\n\t}\n\treturn 0;\n}\n```\n\u8fd9\u6837\u6211\u4eec\u5c31AC\u4e86\u8fd9\u9053\u9898\u9e2d\n\n\n\n",
        "postTime": 1564495854,
        "uid": 121462,
        "name": "zbr2005",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "\u6b64\u9898\u5c31\u662f\u4e00\u4e2a\u5927\u6a21\u62df\uff0c\u4f46\u662f\u540c\u5176\u4ed6\u6a21\u62df\u4e00\u6837\uff0c\u6709\u5f88\u591a\u5751\u70b9\uff0c\u5751\u70b9\u5982\u4e0b\uff1a\n\n1\u3001\u9898\u76ee\u4e2d\u8bf4\u5c06\u519b\u5c40\u9762\u7684\u5f62\u6210\u5305\u62ec\uff08**\u4f46\u4e0d\u9650\u4e8e**\uff09\u5982\u4e0b\u8fd9\u4e9b\u53ef\u80fd\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u8003\u8651\u628a\u738b\u79fb\u5230\u5bf9\u65b9\u80fd\u5c06\u519b\u7684\u5730\u65b9\u7684\u60c5\u51b5\u3002\n\n2\u3001\u7ed3\u675f\u6e38\u620f\u540e\u5168\u90e8\u8f93\u51faInvalid command\n\n3\u3001\u8981\u5224\u5f53\u524d\u56de\u5408\u662f\u4e0d\u662f\u9009\u62e9\u989c\u8272\u7684\u68cb\u8d70\n\n4\u3001\u548c\u8c61\u68cb\u4e0d\u540c\u7684\u662f\uff0c\u53cc\u738b\u9762\u5bf9\u9762\u4e0d\u4f1a\u5f62\u6210\u5c06\u519b\u5c40\u9762\n\n\u5177\u4f53\u89c1\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nchar q[11][10];\nint col[11][10];\nstring f[200];\nint wrx,wry,wbx,wby;\nstring c[3];\nvoid init()\n{\n    for(int i=0;i<10;i++)\n    for(int j=0;j<10;j++)\n    q[i][j]='.';\n    f['w']=\"captain\";\n    f['s']=\"guard\";\n    f['x']=\"elephant\";\n    f['m']=\"horse\";\n    f['c']=\"car\";\n    f['y']=\"duck\";\n    f['b']=\"soldier\";\n    c[1]=\"red\";\n    c[2]=\"blue\";\n    q[0][0]=q[9][0]=q[0][8]=q[9][8]='c';\n    q[0][1]=q[9][1]=q[0][7]=q[9][7]='m';\n    q[0][2]=q[9][2]=q[0][6]=q[9][6]='x';\n    q[0][3]=q[9][3]=q[0][5]=q[9][5]='s';\n    q[0][4]=q[9][4]='w';\n    q[2][0]=q[7][0]=q[2][8]=q[7][8]='y';\n    q[3][0]=q[3][2]=q[3][4]=q[3][6]=q[3][8]='b';\n    q[6][0]=q[6][2]=q[6][4]=q[6][6]=q[6][8]='b';//\u521d\u59cb\u5316\u68cb\u76d8\n    col[0][0]=col[0][8]=1;\n    col[9][0]=col[9][8]=2;\n    col[0][1]=col[0][7]=1;\n    col[9][1]=col[9][7]=2;\n    col[0][2]=col[0][6]=1;\n    col[9][2]=col[9][6]=2;\n    col[0][3]=col[0][5]=1;\n    col[9][3]=col[9][5]=2;\n    col[0][4]=1;\n    col[9][4]=2;\n    col[2][0]=col[2][8]=1;\n    col[7][8]=col[7][0]=2;\n    col[3][0]=col[3][2]=col[3][4]=col[3][6]=col[3][8]=1;\n    col[6][0]=col[6][2]=col[6][4]=col[6][6]=col[6][8]=2;//\u521d\u59cb\u5316\u989c\u8272\n    wrx=0;\n    wry=4;\n    wbx=9;\n    wby=4;\n}\nbool checkgo(int x,int y,int u,int v)//\u5224\u65ad\u80fd\u5426\u8d70\u5230\n{\n    if(q[x][y]=='w')\n    {\n        if((x==u&&abs(y-v)==1)||(abs(x-u)==1&&y==v))\n        return true;\n        else return false;\n    }\n    if(q[x][y]=='b')\n    {\n        if(abs(x-u)<=1&&abs(y-v)<=1)\n        return true;\n        else return false;\n    }\n    if(q[x][y]=='s')\n    {\n        if(abs(x-u)==1&&abs(y-v)==1)\n        return true;\n        else return false;\n    }\n    if(q[x][y]=='x')\n    {\n        if(abs(x-u)==2&&abs(y-v)==2&&q[(x+u)/2][(y+v)/2]=='.')\n        return true;\n        else return false;\n    }\n    if(q[x][y]=='m')\n    {\n        if(abs(x-u)+abs(y-v)==3&&abs(x-u)!=0&&abs(y-v)!=0)\n        {\n            if(abs(x-u)==2)\n            {\n                if(q[(x+u)/2][y]=='.')\n                return true;\n                else return false;\n            }\n            else\n            {\n                if(q[x][(y+v)/2]=='.')\n                return true;\n                else return false;\n            }\n        }\n        else return false;\n    }\n    if(q[x][y]=='c')\n    {\n        if(abs(x-u)==0||abs(y-v)==0)\n        {\n            int t;\n            if(abs(x-u)==0)\n            {\n                if(y>v)\n                t=-1;\n                else t=1;\n                for(int i=y+t;i!=v;i+=t)\n                if(q[x][i]!='.')\n                return false;\n                return true;\n            }\n            else\n            {\n                if(x>u)\n                t=-1;\n                else t=1;\n                for(int i=x+t;i!=u;i+=t)\n                if(q[i][y]!='.')\n                return false;\n                return true;\n            }\n        }\n        else return false;\n    }\n    if(q[x][y]=='y')\n    {\n        if(abs(x-u)+abs(y-v)==5&&abs(x-u)>=2&&abs(y-v)>=2)\n        {\n            int t;\n            if(abs(x-u)==2)\n            {\n                if(y>v)\n                t=-1;\n                else t=1;\n                if(q[x][y+t]=='.'&&q[(x+u)/2][y+2*t]=='.')\n                return true;\n                else return false;\n            }\n            else\n            {\n                if(x>u)\n                t=-1;\n                else t=1;\n                if(q[x+t][y]=='.'&&q[x+2*t][(y+v)/2]=='.')\n                return true;\n                else return false;\n            }\n        }\n        else return false;\n    }\n    return true;\n   \t//\u4ee5\u4e0a\u5c31\u662f\u5206\u7c7b\u8ba8\u8bba\n}\nconst int bx[9]={0,1,1,1,0,0,-1,-1,-1};\nconst int by[9]={0,1,0,-1,1,-1,1,0,-1};\nconst int wx[5]={0,1,-1,0,0};\nconst int wy[5]={0,0,0,1,-1};\nconst int sx[5]={0,1,1,-1,-1};\nconst int sy[5]={0,1,-1,1,-1};\nconst int xx[5]={0,2,2,-2,-2};\nconst int xy[5]={0,2,-2,2,-2};\nconst int mcx[9]={0,1,1,-1,-1,1,-1,1,-1};//\nconst int mcy[9]={0,1,-1,1,-1,1,1,-1,-1};//\nconst int mx[9]={0,2,2,-2,-2,1,-1,1,-1};\nconst int my[9]={0,1,-1,1,-1,2,2,-2,-2};\nconst int ycx1[9]={0,1,1,-1,-1,1,-1,1,-1};//\nconst int ycy1[9]={0,1,-1,1,-1,1,1,-1,-1};//\nconst int ycx2[9]={0,2,2,-2,-2,2,-2,2,-2};//\nconst int ycy2[9]={0,2,-2,2,-2,2,2,-2,-2};//\nconst int yx[9]={0,3,3,-3,-3,2,-2,2,-2};\nconst int yy[9]={0,2,-2,2,-2,3,3,-3,-3};\n//\u5728\u8fd9\u91cc\u6211\u7684\u65b9\u6cd5\u662f\u4ece\u738b\u5f00\u59cb\u5012\u63a8\u4ee5\u4e0d\u80fd\u6309\u7167\u9898\u76ee\u610f\u601d\u5224\u80fd\u5426\u8d70\n//\u5177\u4f53\u89c1\u6ce8\u91ca\u884c\nbool check(int x,int y)//\u5224\u65ad\u662f\u5426\u5f62\u6210\u5c06\u519b\u5c40\u9762\n{\n    for(int i=1;i<=4;i++)\n    {\n        int ax=x+wx[i],ay=y+wy[i];\n        if(ax>=0&&ax<=9&&ay>=0&&ay<=8&&q[ax][ay]=='w'&&col[x][y]!=col[ax][ay])\n        return true;\n    }//\u5224\u65ad\u4f1a\u4e0d\u4f1a\u88ab\u5bf9\u65b9\u738b\u5c06\u519b\n    for(int i=1;i<=4;i++)\n    {\n        int ax=x+sx[i],ay=y+sy[i];\n        if(ax>=0&&ax<=9&&ay>=0&&ay<=8&&q[ax][ay]=='s'&&col[x][y]!=col[ax][ay])\n        return true;\n    }//\u5224\u65ad\u4f1a\u4e0d\u4f1a\u88ab\u5bf9\u65b9\u58eb\u5c06\u519b\n    for(int i=1;i<=8;i++)\n    {\n        int ax=x+bx[i],ay=y+by[i];\n        if(ax>=0&&ax<=9&&ay>=0&&ay<=8&&q[ax][ay]=='b'&&col[x][y]!=col[ax][ay])\n        return true;\n    }//\u5224\u65ad\u4f1a\u4e0d\u4f1a\u88ab\u5bf9\u65b9\u5175\u5c06\u519b\n    for(int i=1;i<=4;i++)\n    {\n        int ax=x+xx[i],ay=y+xy[i];\n        if(ax>=0&&ax<=9&&ay>=0&&ay<=8&&q[ax][ay]=='x'&&col[x][y]!=col[ax][ay]&&q[x+sx[i]][y+sy[i]]=='.')\n        return true;\n    }//\u5224\u65ad\u4f1a\u4e0d\u4f1a\u88ab\u5bf9\u65b9\u8c61\u5c06\u519b\n    for(int i=1;i<=8;i++)\n    {\n        int ax=x+mx[i],ay=y+my[i];\n        int ax1=x+mcx[i],ay1=y+mcy[i];\n        if(ax>=0&&ax<=9&&ay>=0&&ay<=8&&q[ax][ay]=='m'&&col[x][y]!=col[ax][ay]&&q[ax1][ay1]=='.')\n        return true;\n    }//\u5224\u65ad\u4f1a\u4e0d\u4f1a\u88ab\u5bf9\u65b9\u9a6c\u5c06\u519b\n    for(int i=1;i<=8;i++)\n    {\n        int ax=x+yx[i],ay=y+yy[i];\n        int ax1=x+ycx1[i],ay1=y+ycy1[i];\n        int ax2=x+ycx2[i],ay2=y+ycy2[i];\n        if(ax>=0&&ax<=9&&ay>=0&&ay<=8&&q[ax][ay]=='y'&&col[x][y]!=col[ax][ay]&&q[ax1][ay1]=='.'&&q[ax2][ay2]=='.')\n        return true;\n    }//\u5224\u65ad\u4f1a\u4e0d\u4f1a\u88ab\u5bf9\u65b9\u9e2d\u5c06\u519b\n    int ax=x,ay=y;\n    while(++ax>=0&&ax<=9&&ay>=0&&ay<=8)\n    {\n        if(q[ax][ay]=='c'&&col[x][y]!=col[ax][ay])\n        return true;\n        if(q[ax][ay]!='.')\n        break;\n    }\n    ax=x,ay=y;\n    while(--ax>=0&&ax<=9&&ay>=0&&ay<=8)\n    {\n        if(q[ax][ay]=='c'&&col[x][y]!=col[ax][ay])\n        return true;\n        if(q[ax][ay]!='.')\n        break;\n    }\n    ax=x,ay=y;\n    while(ax>=0&&ax<=9&&++ay>=0&&ay<=8)\n    {\n        if(q[ax][ay]=='c'&&col[x][y]!=col[ax][ay])\n        return true;\n        if(q[ax][ay]!='.')\n        break;\n    }\n    ax=x,ay=y;\n    while(ax>=0&&ax<=9&&--ay>=0&&ay<=8)\n    {\n        if(q[ax][ay]=='c'&&col[x][y]!=col[ax][ay])\n        return true;\n        if(q[ax][ay]!='.')\n        break;\n    }\n    //\u5224\u65ad\u4f1a\u4e0d\u4f1a\u88ab\u5bf9\u65b9\u8f66\u5c06\u519b\n    return false;\n}\nint main()\n{\n    init();\n    int n,u,v,x,y,turn=1,over=0;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d%d%d%d\",&x,&y,&u,&v);\n        if(turn!=col[x][y]||q[x][y]=='.'||col[x][y]==col[u][v]||over) //\u4e0d\u7ba1\u68cb\u770b\u80fd\u5426\u8d70\n        puts(\"Invalid command\");\n        else\n        {\n            bool cmp=checkgo(x,y,u,v);//\u6839\u636e\u68cb\u5b50\u7c7b\u578b\u5224\u65ad\u80fd\u5426\u8d70\u5230\n            if(!cmp)\n            {\n                puts(\"Invalid command\");\n                continue;\n            }\n            turn=3-turn;//\u8fc7\u4e861\u4e2a\u56de\u5408\n            cout<<c[col[x][y]]<<' '<<f[q[x][y]]<<';';\n            if(q[u][v]=='.')\n            cout<<\"NA;\";\n            else cout<<c[col[u][v]]<<' '<<f[q[u][v]]<<';';\n            if(q[u][v]=='w')\n            {\n                puts(\"no;yes\");\n                over=1;\n                continue;\n            }//\u5224\u65ad\u662f\u5426\u7ed3\u675f\n            if(q[x][y]=='w')\n            {\n                if(col[x][y]==1)\n                {\n                    wrx=u;\n                    wry=v;\n                }\n                else\n                {\n                    wbx=u;\n                    wby=v;\n                }\n            }//\u66f4\u65b0\u738b\u7684\u4f4d\u7f6e\n            q[u][v]=q[x][y];\n            q[x][y]='.';\n            col[u][v]=col[x][y];\n            col[x][y]=0;//\u66f4\u65b0\u8d70\u7684\u68cb\u7684\u4f4d\u7f6e\n            bool f1=check(wrx,wry),f2=check(wbx,wby);//\u5224\u65ad\u662f\u5426\u5f62\u6210\u5c06\u519b\u5c40\u9762\n            if(f1||f2)\n            cout<<\"yes;\";\n            else cout<<\"no;\";\n            puts(\"no\");\n        }\n    }\n    return 0;\n}\n\n```",
        "postTime": 1559551345,
        "uid": 49390,
        "name": "zhangchenyuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "\u65e2\u7136\u662f\u9996\u9ed1\u5c31\u7559\u4e0b\u4e00\u7bc7\u9898\u89e3\u7eaa\u5ff5\u4e00\u4e0b\u5427\u2026\u2026\n\n\u5148\u628a[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P5380)\u653e\u4e0a\uff0c\u7136\u540e\u6b65\u5165\u6b63\u9898\uff1a\n# \u9898\u76ee\u5206\u6790\n\u9996\u5148\u5206\u6790\u9898\u76ee\u4e94\u4e2a\u95ee\u9898\uff1a\n\n* \u5224\u65ad\u79fb\u52a8\u5176\u662f\u5426\u5408\u6cd5\u3002\n* \u8fd9\u6b65\u64cd\u4f5c\u79fb\u52a8\u4e86\u54ea\u4e2a\u68cb\u5b50\u3002\n* \u8fd9\u6b65\u64cd\u4f5c**\u540e**\uff0c\u662f\u5426\u5b58\u5728\u68cb\u5b50\u88ab\u79fb\u51fa\u6e38\u620f\uff0c\u5982\u6709\u5219\u8fd8\u9700\u6c42\u51fa\u88ab\u79fb\u51fa\u6e38\u620f\u7684\u68cb\u5b50\u3002\n* \u8fd9\u6b65\u64cd\u4f5c**\u540e**\uff0c\u662f\u5426\u5f62\u6210\u5c06\u519b\u5c40\u9762\u3002\n* \u8fd9\u6b65\u64cd\u4f5c**\u540e**\uff0c\u6e38\u620f\u662f\u5426\u7ed3\u675f\u3002\n\n\u7b2c\u4e8c\u3001\u4e09\u3001\u4e94\u4e2a\u95ee\u9898\u90fd\u5f88\u597d\u89e3\u51b3\uff0c\u53ea\u9700\u8981\u5728\u68cb\u76d8\u7684\u5bf9\u5e94\u4f4d\u7f6e\u4e0a\u627e\u5230\u5bf9\u5e94\u68cb\u5b50\u5c31\u884c\u3002\u5982\u679c\u79fb\u51fa\u68cb\u5b50\u662f\u738b\uff0c\u5219\u6e38\u620f\u7ed3\u675f\u3002\n\n\u800c\u7b2c\u4e00\u3001\u56db\u4e2a\u95ee\u9898\u6709\u4e00\u70b9\u590d\u6742\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c\u662f\u5426\u5408\u6cd5\uff0c\u6211\u4eec\u5148\u5224\u65ad\u88ab\u79fb\u52a8\u7684\u68cb\u5b50\u662f\u5426\u5b58\u5728\u3001\u662f\u5426\u4f1a\u79fb\u8d70\u540c\u4e00\u4e2a\u4eba\u7684\u68cb\u5b50\u7b49~~\u5947\u5947\u602a\u602a\u7684\u4e1c\u897f~~\uff0c\u7136\u540e\u6309\u7167\u88ab\u79fb\u8d70\u7684\u68cb\u5b50\u79cd\u7c7b\u5206\u7c7b\u8ba8\u8bba\u3002\n\n\u800c\u5bf9\u4e8e\u662f\u5426\u5c06\u519b\uff0c\u6211\u4eec\u9010\u4e2a\u679a\u4e3e\u68cb\u76d8\u4e0a\u7684\u68cb\u662f\u5426\u5bf9\u738b\u9020\u6210\u5a01\u80c1\uff0c\u53c8\u8f6c\u6362\u6210\u7b2c\u4e00\u4e2a\u95ee\u9898\u4e86\u3002\n\n$Q$: \u679a\u4e3e\uff1f\u4e0d\u4f1a$TLE$\uff1f\n\n$A$: \u4e0d\u5b58\u5728\u7684\uff0c\u68cb\u76d8\u8fd9\u4e48\u5c0f\uff0c\u600e\u4e48\u778e\u641e\u90fd\u4e0d\u53ef\u80fd$TLE$\u7684\uff08\u9664\u975e\u6b7b\u5faa\u73af\uff09\u3002\n# \u4ee3\u7801\u5206\u6790\n\u9898\u76ee\u5206\u6790\u5b8c\u4e86\u5c31\u5f00\u5de5\u5427\u3002\n## \u57fa\u672c\u5b9a\u4e49\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nchar playe[3][5]= {\"\",\"red\",\"blue\"},chess[9][9]= {\"\",\"captain\",\"guard\",\"elephant\",\"horse\",\"car\",\"duck\",\"soldier\"};\nint board[11][9]=\n{\n\t{+5,+4,+3,+2,+1,+2,+3,+4,+5},\n\t{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },\n\t{+6,0 ,0 ,0 ,0 ,0 ,0 ,0 ,+6},\n\t{+7,0 ,+7,0 ,+7,0 ,+7,0 ,+7},\n\t{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },\n\t{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },\n\t{-7,0 ,-7,0 ,-7,0 ,-7,0 ,-7},\n\t{-6,0 ,0 ,0 ,0 ,0 ,0 ,0 ,-6},\n\t{0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 },\n\t{-5,-4,-3,-2,-1,-2,-3,-4,-5}\n},s=1,l=1;\nint owner(int x,int y)\n{\n\tif(board[x][y]==0)return 0;\n\tif(board[x][y]>0)return 1;\n\tif(board[x][y]<0)return 2;\n}\nint dtype(int x,int y)\n{\n\tif(owner(x,y)==0)return 0;\n\tif(owner(x,y)==1)return board[x][y];\n\tif(owner(x,y)==2)return -board[x][y];\n}\n```\n`playe`\u548c`chess`\u5206\u522b\u662f\u73a9\u5bb6\u548c\u68cb\u5b50\u7684\u82f1\u6587\u540d\u79f0\u3002\n\n`board`\u662f\u68cb\u76d8\uff0c\u4e0a\u9762\u7684\u68cb\u5b50\u7528\u7b26\u53f7\u8868\u793a\u6240\u5c5e\u73a9\u5bb6\uff0c\u7edd\u5bf9\u503c\u8868\u793a\u68cb\u5b50\u79cd\u7c7b\uff0c$0$\u5219\u4e3a\u7a7a\u3002\uff08\u5177\u4f53\u5bf9\u5e94\u5173\u7cfb\u89c1`playe`\u548c`chess`\uff09\n\n`s`\u548c`l`\u5206\u522b\u8868\u793a\u6e38\u620f\u662f\u5426\u7ed3\u675f\uff08**\u672a\u7ed3\u675f\u662f1**\uff09\u548c\u8f6e\u5230\u54ea\u4e00\u65b9\u3002\n\n`owner` \u548c `dtype` \u5206\u522b\u7528\u6765\u6c42\u5728\u67d0\u4e2a\u4f4d\u7f6e\u7684\u68cb\u5b50\u7684\u6240\u5c5e\u73a9\u5bb6\u548c\u79cd\u7c7b\u3002\n\n$Q$: \u4e3a\u4ec0\u4e48\u8981\u628a\u8fd9\u4e24\u4e2a\u51fd\u6570\u5355\u72ec\u5217\u51fa\u6765\u5462\uff1f\n\n$A$: \u4fbf\u4e8e\u8c03\u8bd5\u3002\u5982\u679c\u628a\u8fd9\u4e24\u4e2a\u51fd\u6570\u7ffb\u8bd1\u5230\u4ee3\u7801\u91cc\uff0c\u5199\u9519\u7684\u8bdd\u6539\u8d77\u6765\u5f88\u9ebb\u70e6\u3002\u62ff\u51fa\u6765\u5c31\u53ea\u8981\u6539\u4e00\u5904\u4e86\u3002\n## \u5206\u7c7b\u8ba8\u8bba\n```cpp\nbool cacar(int fx,int fy,int tx,int ty)\n{\n\tif(fx==tx&&fy<ty)\n\t{\n\t\tfor(int i=fy+1; i<ty; ++i)if(owner(fx,i))return 0;\n\t\treturn 1;\n\t}\n\tif(fx==tx&&fy>ty)\n\t{\n\t\tfor(int i=ty+1; i<fy; ++i)if(owner(fx,i))return 0;\n\t\treturn 1;\n\t}\n\tif(fx<tx&&fy==ty)\n\t{\n\t\tfor(int i=fx+1; i<tx; ++i)if(owner(i,fy))return 0;\n\t\treturn 1;\n\t}\n\tif(fx>tx&&fy==ty)\n\t{\n\t\tfor(int i=tx+1; i<fx; ++i)if(owner(i,fy))return 0;\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nbool caduc(int fx,int fy,int tx,int ty)\n{\n\tif(!owner(fx+2,fy+1)&&!owner(fx+1,fy)&&fx+3==tx&&fy+2==ty)return 1;\n\tif(!owner(fx+2,fy-1)&&!owner(fx+1,fy)&&fx+3==tx&&fy-2==ty)return 1;\n\tif(!owner(fx-2,fy+1)&&!owner(fx-1,fy)&&fx-3==tx&&fy+2==ty)return 1;\n\tif(!owner(fx-2,fy-1)&&!owner(fx-1,fy)&&fx-3==tx&&fy-2==ty)return 1;\n\tif(!owner(fx+1,fy+2)&&!owner(fx,fy+1)&&fx+2==tx&&fy+3==ty)return 1;\n\tif(!owner(fx+1,fy-2)&&!owner(fx,fy-1)&&fx+2==tx&&fy-3==ty)return 1;\n\tif(!owner(fx-1,fy+2)&&!owner(fx,fy+1)&&fx-2==tx&&fy+3==ty)return 1;\n\tif(!owner(fx-1,fy-2)&&!owner(fx,fy-1)&&fx-2==tx&&fy-3==ty)return 1;\n\treturn 0;\n}\n\n```\n\u8fd9\u4e2a\u90e8\u5206\u7528\u6765\u5206\u7c7b\u8ba8\u8bba\u6bcf\u79cd\u68cb\u5b50\u79fb\u52a8\u662f\u5426\u5408\u6cd5\uff0c\u6bcf\u79cd\u68cb\u5b50\u6253\u4e00\u4e2a\u51fd\u6570\u3002\u8fd9\u90e8\u5206\u600e\u4e48\u641e\u90fd\u53ef\u4ee5\uff0c\u6211\u76f4\u63a5\u628a\u6240\u6709\u53ef\u80fd\u7684\u60c5\u51b5\u6253\u5230 `if` \u7684\u62ec\u53f7\u91cc\u4e86\u3002\u5982\u679c\u5408\u6cd5\u5c31\u8fd4\u56de $1$\uff0c\u5426\u5219\u8fd4\u56de $0$\u3002\n\n\u8fd9\u91cc\u5c31\u53ea\u653e\u4e86\u6700\u590d\u6742\u7684\u9e2d\u548c\u6700\u7279\u6b8a\u7684\u8f66\u3002\u4e0d\u5168\u653e\u4e86\uff0c\u6709\u4e09\u4e2a $KB$\uff0c\u5176\u5b83\u4ee5\u9e2d\u7c7b\u63a8\u5c31\u884c\u3002\n\n## \u5224\u65ad\u5408\u6cd5\n```cpp\nbool cango(int fx,int fy,int tx,int ty)\n{\n\tif(!owner(fx,fy)||owner(fx,fy)==owner(tx,ty))return 0;\n\tif(dtype(fx,fy)==1)return cacap(fx,fy,tx,ty);\n\tif(dtype(fx,fy)==2)return cagua(fx,fy,tx,ty);\n\tif(dtype(fx,fy)==3)return caele(fx,fy,tx,ty);\n\tif(dtype(fx,fy)==4)return cahor(fx,fy,tx,ty);\n\tif(dtype(fx,fy)==5)return cacar(fx,fy,tx,ty);\n\tif(dtype(fx,fy)==6)return caduc(fx,fy,tx,ty);\n\tif(dtype(fx,fy)==7)return casol(fx,fy,tx,ty);\n}\n```\n\u4e0b\u9762\u7684\u4e03\u4e2a `if` \u5c31\u662f\u628a\u5206\u7c7b\u8ba8\u8bba\u6c47\u603b\u3002\n\u800c\u7b2c\u4e00\u4e2a `if` \u7528\u6765\u5224\u65ad\u539f\u4f4d\u7f6e\u662f\u5426\u6709\u68cb\u548c\u662f\u5426\u79fb\u8d70\u540c\u4e00\u961f\u7684\u68cb\u3002\u548c\u4e0a\u9762\u4e00\u6837\uff0c\u5982\u679c\u5408\u6cd5\u5c31\u8fd4\u56de $1$\uff0c\u5426\u5219\u8fd4\u56de $0$\u3002\n\n$Q$: \u4e3a\u5565\u4e0d\u628a\u6c47\u603b\u653e\u5206\u7c7b\u8ba8\u8bba\u4e0a\u9762\uff1f\n\n$A$: $C++$ \u4e0d\u51c6\u8fd9\u4e48\u5e72\u2026\u2026\u5982\u679c\u975e\u8981\u8fd9\u6837\u4e0d\u53ef\uff0c\u9700\u8981\u5728\u6c47\u603b\u524d\u9762\u52a0\u51fd\u6570\u58f0\u660e\uff0c\u4ee3\u7801\u5c31\u957f\u4e86\u3002\uff08\u5173\u4e8e\u51fd\u6570\u58f0\u660e\u53ef\u81ea\u884c\u767e\u5ea6\uff09\n## \u5224\u65ad\u5c06\u519b\n```cpp\nbool attac()\n{\n\tif(!s)return 0;\n\tint rx,ry,bx,by;\n\tfor(int i=0; i<10; ++i)\n\t\tfor(int j=0; j<9; ++j)\n\t\t\tif(dtype(i,j)==1)\n\t\t\t{\n\t\t\t\tif(owner(i,j)==1)rx=i,ry=j;\n\t\t\t\telse if(owner(i,j)==2)bx=i,by=j;\n\t\t\t}\n\tfor(int i=0; i<10; ++i)\n\t\tfor(int j=0; j<9; ++j)\n\t\t{\n\t\t\tif(cango(i,j,rx,ry))return 1;\n\t\t\telse if(cango(i,j,bx,by))return 1;\n\t\t}\n\treturn 0;\n}\n```\n\u6b63\u5982\u524d\u9762\u6240\u8bb2\uff0c\u5148\u679a\u4e3e\u51fa\u6bcf\u4e2a\u738b\u7684\u4f4d\u7f6e\uff0c\u5728\u679a\u4e3e\u5176\u5b83\u68cb\u662f\u5426\u5bf9\u738b\u9020\u6210\u5a01\u80c1\u3002\u7b2c\u4e00\u4e2a `if` \u7528\u6765\u5904\u7406\u9898\u9762\u4e2d\u7684\u52a0\u7c97\u7684\u6ce8\u610f\u4e8b\u9879\u3002\u8fd8\u662f\u5982\u679c\u5c06\u519b\u5c31\u8fd4\u56de $1$\uff0c\u5426\u5219\u8fd4\u56de $0$\u3002\n## \u5904\u7406\u79fb\u52a8\n```cpp\nvoid dmove(int fx,int fy,int tx,int ty)\n{\n\tif(!cango(fx,fy,tx,ty)/*\u79fb\u52a8\u662f\u5426\u5408\u6cd5*/||!s/*\u6e38\u620f\u662f\u5426\u7ed3\u675f*/||owner(fx,fy)!=l/*\u662f\u5426\u8f6e\u5230\u8be5\u73a9\u5bb6*/)/*\u95ee\u9898\u4e00*/\n\t{\n\t\tprintf(\"Invalid command\\n\");/*\u8f93\u51fa\u65e0\u89e3*/ \n\t\treturn;/*\u7ed3\u675f\u8be5\u6b65\u9aa4*/ \n\t}\n\tif(dtype(tx,ty)==1)s=0;/**/\n\tprintf(\"%s %s;\",playe[owner(fx,fy)],chess[dtype(fx,fy)]);/*\u95ee\u9898\u4e8c*/ \n\tif(owner(tx,ty))printf(\"%s %s;\",playe[owner(tx,ty)],chess[dtype(tx,ty)]);/*\u95ee\u9898\u4e09*/ \n\telse printf(\"NA;\");\n\tboard[tx][ty]=board[fx][fy];/*\u79fb\u52a8\u68cb\u5b50\uff0c\u987a\u4fbf\u8986\u76d6*/ \n\tboard[fx][fy]=0;/*\u539f\u4f4d\u7f6e\u53d8\u7a7a*/ \n\tif(attac())printf(\"yes;\");/*\u95ee\u9898\u56db*/\n\telse printf(\"no;\"); \n\tif(s)printf(\"no\\n\");/*\u95ee\u9898\u4e94*/\n\telse printf(\"yes\\n\");\n\tl=3-l;/*\u6362\u4eba*/ \n}\n```\n\u8fd9\u662f\u6700\u6838\u5fc3\u7684\u90e8\u5206\uff0c\u4e5f\u662f\u6240\u6709\u95ee\u9898\u7684\u6c47\u603b\u3002\u4e00\u5b9a\u8981\u6ce8\u610f\u64cd\u4f5c\u987a\u5e8f\uff08\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u8981\u6211\u5728\u5217\u95ee\u9898\u65f6\u8981\u628a\u201c\u540e\u201d\u52a0\u7c97\uff09\u3002\u5176\u5b83\u7684\u90fd\u5199\u5728\u6ce8\u91ca\u91cc\u4e86\u3002\n## \u4e3b\u51fd\u6570\n```cpp\nint main()\n{\n\tint q,fx,fy,tx,ty;\n\tscanf(\"%d\",&q);\n\twhile(q--)scanf(\"%d%d%d%d\",&fx,&fy,&tx,&ty),dmove(fx,fy,tx,ty);\n}\n```\n\u6ca1\u4ec0\u4e48\u597d\u8bb2\u7684\u2026\u2026\n# \u6700\u540e\n\u5b8c\u6574\u4ee3\u7801\u4e0d\u653e\u4e86\uff0c\u628a\u4e0a\u9762\u7684\u4ee3\u7801\u62fc\u8d77\u6765\u5c31\u884c\u3002\n\n\u7ec6\u8282\u8fd8\u662f\u5f88\u591a\u7684\uff0c\u4e00\u4e0d\u5c0f\u5fc3\u5c31 $WA$ \u3002\u5efa\u8bae\u9020\u51e0\u7ec4\u6570\u636e$hack$\u6389\u81ea\u5df1\u7684\u7a0b\u5e8f\u3002~~\u8fd8\u53ef\u4ee5\u548c\u540c\u5b66\u7528\u81ea\u5df1\u7684\u7a0b\u5e8f\u73a9\u4e00\u5c40\u6765\u627eBUG\u3002~~ \u5426\u5219\u5c31\u5c31\u9759\u6001\u67e5\u9519\uff08\u77aa\u773c\u89c2\u5bdf\u6cd5\uff09\u5427\u2026\u2026\n\n\u9898\u76ee\u4e2d\u4e5f\u6709\u5f88\u591a\u7ec6\u8282\uff0c\u8981\u8ba4\u771f\u8bfb\u9898\u3002\n\n$BUG$ \u627e\u5b8c\u5c31 $AC$ \u4e86\uff01\uff08\u5b8c\u7ed3\u6492\u82b1\\\\(^o^)/ \uff09",
        "postTime": 1579572488,
        "uid": 150384,
        "name": "pyqpyq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "~~\u5751\u7239\u9898\u76ee\uff0c\u6bc1\u6211\u9752\u6625~~\n\n\u8fd9\u662f\u4e00\u9053\u5f88\u70e6\u5f88\u70e6\u7684\u5927\u6a21\u62df\uff0c\u6211\u7528\u4e86\u5927\u69824h\u624dAC\n\n\u6211\u7684\u601d\u8def\u662f\u8fd9\u6837\u7684\uff1a\n\n1\u3001\u521d\u59cb\u5316\uff1a\u521d\u59cb\u5316\u68cb\u76d8\uff0c\u4f7f\u7528[\u7ed3\u6784\u4f53]\u5b8c\u6210\uff0ccol\u8868\u793a\u989c\u8272\uff0cqz\u8868\u793a\u68cb\u5b50\u7c7b\u578b\uff0c\u5c06\u989c\u8272\u521d\u59cb\u5316\u4e3a\u7ea2\u8272\uff0c\u662f\u5426\u7ed3\u675f\u4e3a\u672a\u7ed3\u675f\n(https://baike.baidu.com/item/%E7%BB%93%E6%9E%84%E4%BD%93/3709485?fr=aladdin)\n\n2\u3001\u5224\u65ad\u662f\u5426\u5408\u6cd5\uff0c\u5176\u4e2d\u53c8\u5206\u4e3an\u5c0f\u70b9\uff1a\n\n2.1 \u6e38\u620f\u5df2\u7ecf\u7ed3\u675f\n\n2.2 \u8d77\u70b9\u65e0\u5df1\u65b9\u68cb\u5b50\n\n### \u5df1\u65b9\uff01\u5df1\u65b9\uff01\n\n2.3 \u7ec8\u70b9\u65e0\u5bf9\u65b9\u68cb\u5b50\n\n2.4 \u8def\u7ebf\u4e0d\u6b63\u786e\n\n2.5 \u6709\u7eca\u9a6c/\u8c61/\u9e2d\u817f\u7684\u60c5\u51b5\n\n3\u3001\u56de\u7b54\u7b2c\u4e00\u4e2a\u95ee\u9898\uff1a\u7528\u6570\u7ec4\u5b58\u5e8f\u53f7\uff0c\u76f4\u63a5\u8f93\u51facolour[x]\u548cchess[x]\u5c31\u53ef\u4ee5\u4e86\n\n4\u3001\u56de\u7b54\u7b2c\u4e8c\u4e2a\u95ee\u9898\uff0c\u540c\u6837\u7b80\u5355\n\n5\u3001\u5403\u68cb\u5b50\u5e76\u79fb\u52a8\n\n6\u3001\u56de\u7b54\u7b2c\u4e09\u4e2a\u95ee\u9898\uff08\u662f\u5426\u5c06\u519b\uff09\uff0c\u6211\u53d1\u73b0@zhangchenyuan \u5927\u4f6c\u7684\u9898\u89e3\u4e2d\u8bf4\u201c\u548c\u8c61\u68cb\u4e0d\u540c\u7684\u662f\uff0c\u53cc\u738b\u9762\u5bf9\u9762\u4e0d\u4f1a\u5f62\u6210\u5c06\u519b\u5c40\u9762\u201d\uff0c\u6211\u5e76\u4e0d\u8ba4\u540c\n~~\uff08\u6bd5\u7adf\u6211\u6ca1\u6709\u7279\u5224\u4e5fA\u4e86\uff09~~\n\n7\u3001\u56de\u7b54\u7b2c\u56db\u4e2a\u95ee\u9898\uff0c\u8fd9\u4e2a\u95ee\u9898\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u5728\u56de\u7b54\u7b2c\u4e8c\u4e2a\u95ee\u9898\u65f6\u4e00\u8d77\u5224\u597d\u5c31\u884c\u4e86\u3002\n\n\u6211\u8ba4\u4e3a\u7684\u5751\u70b9\uff1a\n\n#### 1\u3001\u5e8f\u5217\u4e2d\u7684\u4e0d\u5408\u6cd5\u64cd\u4f5c\u662f\u9700\u8981\u88ab\u5ffd\u7565\u7684\u3002\u6bd4\u5982\uff0c\u5982\u679c\u8f6e\u5230\u7ea2\u65b9\u79fb\u52a8\uff0c\u6b64\u65f6\u5e8f\u5217\u4e2d\u7684\u5f53\u524d\u64cd\u4f5c\u6070\u597d\u662f\u4e0d\u5408\u6cd5\u7684\uff0c\u5219\u8fd9\u4e2a\u64cd\u4f5c\u5c06\u88ab\u5ffd\u7565\uff0c\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u6b65\u64cd\u4f5c\u5c06\u6210\u4e3a\u7ea2\u65b9\u8fd9\u6b65\u7684\u64cd\u4f5c\uff08\u5982\u4ecd\u4e0d\u5408\u6cd5\u5219\u7ee7\u7eed\u5ffd\u7565\uff0c\u76f4\u81f3\u51fa\u73b0\u5408\u6cd5\u7684\u64cd\u4f5c\uff09\u3002\n\n#### 2\u3001\u9664\u6b64\u4e4b\u5916\uff0c\u9700\u8981\u7279\u522b\u8bf4\u660e\u7684\u662f\uff0c\u6e38\u620f\u7ed3\u675f\u540e\uff0c\u7531\u4e8e\u53cc\u65b9\u4e0d\u53ef\u518d\u64cd\u4f5c\uff0c\u56e0\u6b64\u4e0d\u53ef\u80fd\u51fa\u73b0\u5c06\u519b\u5c40\u9762\uff0c\u5373\u4fbf\u6b64\u65f6\u53e6\u4e00\u65b9\u738b\u5904\u4e8e\u88ab\u300c\u653b\u51fb\u300d\u7684\u4f4d\u7f6e\u3002\n\nlast but not least,\u4ee3\u7801\u95ea\u4eae\u767b\u573a\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nstruct duck_chess{\n    int qz,col;\n}a[11][11];//the chess\nconst string chess[8]={\"\",\"car\",\"horse\",\"elephant\",\"guard\",\"captain\",\"duck\",\"soldier\"};\nconst string colour[3]={\"\",\"red\",\"blue\"};\n//horse\nconst int pd_horse_x[8]={1,-1,0,0,1,-1,0,0};\nconst int pd_horse_y[8]={0,0,1,-1,0,0,1,-1};\nconst int dx_horse[8]={2,-2,1,1,2,-2,-1,-1};\nconst int dy_horse[8]={1,1,2,-2,-1,-1,2,-2};\n//elephant\nconst int pd_elephant_x[4]={1,-1,1,-1};\nconst int pd_elephant_y[4]={-1,1,1,-1};\nconst int dx_elephant[4]={2,-2,2,-2};\nconst int dy_elephant[4]={-2,2,2,-2};\n//guard\nconst int dx_guard[4]={1,-1,1,-1};\nconst int dy_guard[4]={-1,1,1,-1};\n//captain\nconst int dx_captain[4]={1,-1,0,0};\nconst int dy_captain[4]={0,0,1,-1};\n//duck\nconst int pd_duck_x[16]={1,-1,0,0,1,-1,0,0,2,-2,1,1,2,-2,-1,-1};\nconst int pd_duck_y[16]={0,0,1,-1,0,0,1,-1,1,1,2,-2,1,1,2,-2};\nconst int dx_duck[8]={3,-3,2,2,3,-3,-2,-2};\nconst int dy_duck[8]={2,2,3,-3,-2,-2,3,-3};\n//soldier\nconst int dx_soldier[8]={1,-1,0,0,1,1,-1,-1};\nconst int dy_soldier[8]={0,0,1,-1,1,-1,1,-1};\n//judge and checkmate\nint n,colo,end;\ninline void init(){//Initialization\n    cin>>n;\n    for (register int i=1;i<=9;i++) a[1][i].col=1,a[10][i].col=2;//car horse elephant guard captain\n    for (register int i=1;i<=9;i+=2) a[4][i].col=1,a[7][i].col=2;//soldier\n    for (register int i=1;i<=9;i+=8) a[3][i].col=1,a[8][i].col=2;//duck\n    for (register int i=1;i<=5;i++) a[1][i].qz=a[1][10-i].qz=a[10][i].qz=a[10][10-i].qz=i;//the same\n    for (register int i=1;i<=9;i+=2) a[4][i].qz=a[7][i].qz=7;\n    for (register int i=1;i<=9;i+=8) a[3][i].qz=a[8][i].qz=6;\n    colo=1;//At first the colour is red;\n    end=0;//The game didn't end;\n}\nint main(){\n    init();\n    while (n--){\n        int sx,sy,ex,ey;\n        cin>>sx>>sy>>ex>>ey;\n        sx++;\n        sy++;\n        ex++;\n        ey++;//start from 1\n        //to decide if it is wrongful\n        if (end==1) {//If the game ends\n            cout<<\"Invalid command\"<<endl;\n            continue;\n        }\n        if (a[sx][sy].col!=colo) {//If there isn't any chess\n            cout<<\"Invalid command\"<<endl;\n            continue;\n        } \n        if (a[ex][ey].col==colo) {\n            cout<<\"Invalid command\"<<endl;\n            continue;\n        }//If where the chess will go has a same_color chess on it\n        if (a[sx][sy].qz==1) {//car\n            if (ex!=sx&&ey!=sy) {//If the line isn't straight\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }\n            int f=0;\n            if (ex==sx) {//across\n                for (int j=min(sy,ey)+1;j<max(sy,ey);j++) \n                    if (a[sx][j].col!=0) {//If there's chess on the way\n                        cout<<\"Invalid command\"<<endl;\n                        f=1;\n                        break;\n                    }\n                if (f==1) continue;//over\n            }\n            else {//straight\n                for (int j=min(sx,ex)+1;j<max(sx,ex);j++) \n                    if (a[j][sy].col!=0) {//If there's chess on the way\n                        cout<<\"Invalid command\"<<endl;\n                        f=1;\n                        break;\n                    }\n                if (f==1) continue;//over\n            }\n        }\n        if (a[sx][sy].qz==2) {//horse\n            int f=0,tx=abs(sx-ex),ty=abs(sy-ey);\n            int dx=sx-ex>0?1:-1,dy=sy-ey>0?1:-1;\n            if (max(tx,ty)!=2||min(tx,ty)!=1) {//If the way is wrongful\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }\n            if (a[sx-(tx-1)*dx][sy-(ty-1)*dy].col!=0) {\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }//If there's chess on the way\n        }\n        if (a[sx][sy].qz==3) {//elephant\n            int f=0,tx=abs(sx-ex),ty=abs(sy-ey);\n            int dx=sx-ex>0?1:-1,dy=sy-ey>0?1:-1;\n            if (tx!=2||ty!=2) {//If the way is wrongful\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }\n            if (a[sx-dx][sy-dy].col!=0) {\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }//If there's chess on the way\n        }\n        if (a[sx][sy].qz==4) {//guard\n            int f=0,tx=abs(sx-ex),ty=abs(sy-ey);\n            if (tx!=1||ty!=1) {//If the way is wrongful\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }\n        }\n        if (a[sx][sy].qz==5) {//captain\n            int f=0,tx=abs(sx-ex),ty=abs(sy-ey);\n            if (max(tx,ty)!=1||min(tx,ty)!=0) {//If the way is wrongful\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }\n        }\n        if (a[sx][sy].qz==6) {//duck\n            int f=0,tx=abs(sx-ex),ty=abs(sy-ey);\n            int dx=sx-ex>0?1:-1,dy=sy-ey>0?1:-1;\n            if (max(tx,ty)!=3||min(tx,ty)!=2) {//If the way is wrongful\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }\n            if (a[sx-(tx-1)*dx][sy-(ty-1)*dy].col!=0||a[sx-(tx-2)*dx][sy-(ty-2)*dy].col!=0) {\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }//If there's chess on the way\n        }\n        if (a[sx][sy].qz==7) {//soldier\n            int f=0,tx=abs(sx-ex),ty=abs(sy-ey);\n            if (max(tx,ty)!=1||(min(tx,ty)!=0&&min(tx,ty)!=1)) {\n                cout<<\"Invalid command\"<<endl;\n                continue;\n            }//If the way is wrongful\n        }\n        cout<<colour[colo]<<' '<<chess[a[sx][sy].qz]<<';';//the start chess\n        if (a[ex][ey].col!=0) //the end chess\n            cout<<colour[a[ex][ey].col]<<' '<<chess[a[ex][ey].qz]<<';';\n        else cout<<\"NA;\";\n        if (a[ex][ey].qz==5) {end=1;cout<<\"no;yes\"<<endl;continue;}\n        a[ex][ey].qz=a[sx][sy].qz;\n        a[ex][ey].col=a[sx][sy].col;//eat it\n        a[sx][sy].qz=a[sx][sy].col=0;//move it\n        int f=0;\n        for (int i=1;i<=10;i++){\n            for (int j=1;j<=9;j++) {\n                if (a[i][j].qz==1) {//car\n                    for (int k=i-1;k>0;k--) //up\n                        if (a[k][j].qz!=0&&a[k][j].qz!=5) break;\n                        else if (a[k][j].qz==5&&a[k][j].col!=a[i][j].col) {f=1;break;}\n                        else if (a[k][j].qz==5) break;\n                    if (f==1) break;\n                    for (int k=i+1;k<=10;k++) //down\n                        if (a[k][j].qz!=0&&a[k][j].qz!=5) break;\n                        else if (a[k][j].qz==5&&a[k][j].col!=a[i][j].col) {f=1;break;}\n                        else if (a[k][j].qz==5) break;\n                    if (f==1) break;\n                    for (int k=j-1;k>0;k--) //left\n                        if (a[i][k].qz!=0&&a[i][k].qz!=5) break;\n                        else if (a[i][k].qz==5&&a[i][k].col!=a[i][j].col) {f=1;break;}\n                        else if (a[i][k].qz==5) break;\n                    if (f==1) break;\n                    for (int k=j+1;k<=9;k++) //right\n                        if (a[i][k].qz!=0&&a[i][k].qz!=5) break;\n                        else if (a[i][k].qz==5&&a[i][k].col!=a[i][j].col) {f=1;break;}\n                        else if (a[i][k].qz==5) break;\n                    if (f==1) break;\n                }\n                if (f==1) break;\n                if (a[i][j].qz==2) {//horse\n                    for (int k=0;k<8;k++) {\n                        int tx=i+pd_horse_x[k],ty=j+pd_horse_y[k];\n                        if (a[tx][ty].qz!=0) continue;\n                        //judge if I can move the chess\n                        int dx=i+dx_horse[k],dy=j+dy_horse[k];\n                        if (dx>0&&dx<11&&dy>0&&dy<10&&a[dx][dy].qz==5&&a[dx][dy].col!=a[i][j].col) {f=1;break;}\n                        //to check if there's checkmate\n                    }\n                    if (f==1) break;\n                }\n                if (f==1) break;\n                if (a[i][j].qz==3) {//elephant\n                    for (int k=0;k<4;k++) {\n                        int tx=i+pd_elephant_x[k],ty=j+pd_elephant_y[k];\n                        if (a[tx][ty].qz!=0) continue;\n                        //judge if I can move the chess\n                        int dx=i+dx_elephant[k],dy=j+dy_elephant[k];\n                        if (dx>0&&dx<11&&dy>0&&dy<10&&a[dx][dy].qz==5&&a[dx][dy].col!=a[i][j].col) {f=1;break;}\n                        //to check if there's checkmate\n                    }\n                    if (f==1) break;\n                }\n                if (f==1) break;\n                if (a[i][j].qz==4) {//guard\n                    for (int k=0;k<4;k++) {\n                        int dx=i+dx_guard[k],dy=j+dy_guard[k];\n                        if (dx>0&&dx<11&&dy>0&&dy<10&&a[dx][dy].qz==5&&a[dx][dy].col!=a[i][j].col) {f=1;break;}\n                        //to check if there's checkmate\n                    }\n                    if (f==1) break;\n                }\n                if (f==1) break; \n                 if (a[i][j].qz==5) {//captain\n                 \tfor (int k=0;k<4;k++) {\n                 \t\tint dx=i+dx_captain[k],dy=j+dy_captain[k];\n                 \t\tif (dx>0&&dx<11&&dy>0&&dy<10&&a[dx][dy].qz==5&&a[dx][dy].col!=a[i][j].col) {f=1;break;}\n                 \t\t//to check if there's checkmate\n                 \t}\n                 \tif (f==1) break;\n                }\n                if (f==1) break;\n                if (a[i][j].qz==6) {//duck\n                    for (int k=0;k<8;k++) {\n                        int tx=i+pd_duck_x[k],ty=j+pd_duck_y[k];\n                        if (a[tx][ty].qz!=0) continue;\n                        tx=i+pd_duck_x[k+8],ty=j+pd_duck_y[k+8];\n                        if (a[tx][ty].qz!=0) continue;\n                        //judge if I can move the chess(twice)\n                        int dx=i+dx_duck[k],dy=j+dy_duck[k];\n                        if (dx>0&&dx<11&&dy>0&&dy<10&&a[dx][dy].qz==5&&a[dx][dy].col!=a[i][j].col) {f=1;break;}\n                        //to check if there's checkmate\n                    }\n                    if (f==1) break;\n                }\n                if (a[i][j].qz==7) {//soldier\n                    for (int k=0;k<8;k++) {\n                        int dx=i+dx_soldier[k],dy=j+dy_soldier[k];\n                        if (dx>0&&dx<11&&dy>0&&dy<10&&a[dx][dy].qz==5&&a[dx][dy].col!=a[i][j].col) {f=1;break;}\n                        //to check if there's checkmate\n                    }\n                    if (f==1) break;\n                }\n            }\n            if (f==1) break;\n        }\n        if (f==1) cout<<\"yes;\";\n        else cout<<\"no;\";//checkmate\n        cout<<\"no\"<<endl;\n        if (colo==1) colo=2;\n        else colo=1;//change the colour\n    }\n    return 0;\n}\n\n```\n\u6ce8\u91ca\u4ec0\u4e48\u7684\u90fd\u5728\u4ee3\u7801\u91cc\u4e86qwq\n\n\u8fd9\u6837\u6211\u4eec\u5c31A\u4e86THUPC2019H\u9898\u4e86\u9e2d\uff0c\u5f00\u5fc3\u5f00\u5fc3",
        "postTime": 1559893300,
        "uid": 111801,
        "name": "shentao1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    },
    {
        "content": "**\u5b8c\u5b8c\u5168\u5168\u7684\u4e00\u9053\u7ec6\u8282\u8003\u67e5\u9898**  \n\n\u9996\u5148\u8bfb\u9898\u9762\uff1a\u9898\u76ee\u9996\u5148\u7ed9\u51fa\u4e86\u4e00\u5b9a\u7684\u4e0b\u68cb\u89c4\u5219\uff08~~\u548c\u539f\u672c\u4e2d\u56fd\u8c61\u68cb\u57fa\u672c\u5c31\u6ca1\u6709\u5dee\u522b\uff0c\u51fa\u9898\u4eba\u4e5f\u662f\u6709\u591f\u61d2\u7684~~\uff09\uff0c\u4ee5\u53ca\u5224\u5b9a\u4e00\u6b65\u68cb\u4e0b\u5b8c\u540e\u76d8\u9762\u72b6\u51b5\u7684\u89c4\u5219\uff0c\u8981\u6c42\u8f93\u5165\u4e00\u5c40\u6e38\u620f\u7684\u8fdb\u7a0b\u8ba9\u4f60\u5bf9\u4e8e\u6bcf\u6b65\u68cb\u5224\u65ad\u5b83\u4e0b\u5b8c\u540e\u7684\u76d8\u9762\u60c5\u51b5\u3002  \n\n\u8bfb\u9898\u53ef\u4ee5\u77e5\u9053\u8fd9\u662f\u4e00\u9053\u663e\u7136\u7684\u5927\u6a21\u62df\u9898\uff0c\u800c\u4e14\u662f\u7eaf\u6a21\u62df\uff0c\u8003\u5bdf\u7684\u5c31\u662f\u5bf9\u4e8e\u7ec6\u8282\u7684\u5224\u65ad\u3002  \n\n\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e9b\u8981**\u7279\u522b\u6ce8\u610f**\u7684\u70b9\uff1a  \n$1.$ \u5982\u679c\u5f53\u524d\u8fd9\u4e00\u6b65\u68cb\u4e0d\u5408\u6cd5\uff0c\u5219\u4e0b\u68cb\u65b9\u4e0d\u7528\u6539\u53d8  \n$2.$ \u5bf9\u4e8e\u9a6c\u3001\u8c61\u548c\u9e2d\u8981\u8bb0\u5f97\u5224\u65ad\u662f\u5426\u4f1a\u88ab\u5176\u4ed6\u68cb\u5b50\u5835\u4e86\u68cb\u773c  \n$3.$ \u5bf9\u4e8e\u8f66\u79fb\u52a8\u7684\u5224\u65ad\u9700\u8981\u6ce8\u610f\u4ece\u8d77\u70b9\u5230\u76ee\u6807\u70b9\u4e4b\u95f4\u4e0d\u80fd\u6709\u5176\u4ed6\u7684\u68cb\u5b50  \n$4.$ \u5bf9\u4e8e\u5c06\u519b\u7684\u60c5\u51b5\u9700\u8981\u5224\u65ad**\u53cc\u65b9\u7684\u738b**\u800c\u4e0d\u662f\u4ec5\u5f53\u524d\u884c\u52a8\u65b9\u7684\u738b  \n$5.$ **\u6e38\u620f\u53ea\u8981\u4e00\u7ed3\u675f\u5c31\u4e0d\u5b58\u5728\u5c06\u519b\u60c5\u51b5**\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6e38\u620f\u7ed3\u675f\u7684\u90a3\u4e00\u6b65\u68cb\u7684\u5c06\u519b\u60c5\u51b5\u8981\u76f4\u63a5\u8f93\u51fa $no$ \u3002  \n\n\u5176\u4ed6\u7684\u90e8\u5206\u5c31\u662f\u7b80\u5355\u7684\u6a21\u62df\uff0c\u53ea\u4e0d\u8fc7\u7801\u91cf\u975e\u5e38\u5927\uff0c\u5f88\u8003\u9a8c\u8010\u5fc3\u548c\u7ec6\u5fc3\u3002\u5177\u4f53\u7684\u64cd\u4f5c\u89c1\u4ee5\u4e0b\u4ee3\u7801\uff0c\u5e94\u8be5\u975e\u5e38\u597d\u7406\u89e3\u3002  \n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\nusing namespace std;\n\nint n, sx, sy, tx, ty;\nbool now; // \u5224\u65ad\u5f53\u524d\u8f6e\u5230\u54ea\u4e00\u65b9\u4e0b\u68cb 0\u4e3ared, 1\u4e3ablue\nbool game_over;//\u5224\u65ad\u6e38\u620f\u662f\u5426\u7ed3\u675f\nint a[11][10] = {//\u521d\u59cb\u68cb\u76d8\n\t0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n\t0,  8,  6,  4,  2,  1,  3,  5,  7,  9,\n\t0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n\t0, 10,  0,  0,  0,  0,  0,  0,  0, 11,\n\t0, 12,  0, 13,  0, 14,  0, 15,  0, 16,\n\t0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n\t0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n\t0, 28,  0, 29,  0, 30,  0, 31,  0, 32,\n\t0, 26,  0,  0,  0,  0,  0,  0,  0, 27,\n\t0,  0,  0,  0,  0,  0,  0,  0,  0,  0,\n\t0, 24, 22, 20, 18, 17, 19, 21, 23, 25\n};\n// 1~16 red 17~32 blue\n// 1 captain, 2~3 guard, 4~5 elephant, 6~7 horse, 8~9 car, 10~11 duck, 12~16 soldier\n// 17 captain, 18~19 guard, 20~21 elephant, 22~23 horse, 24~25 car, 26~27 duck, 28~32 soldier\n\nstring name[33] = {\"\", \"red captain\", \"red guard\", \"red guard\", \"red elephant\", \"red elephant\", \"red horse\", \n\t\t\t\t\t\"red horse\", \"red car\", \"red car\", \"red duck\", \"red duck\", \"red soldier\", \"red soldier\",\n\t\t\t\t\t\"red soldier\", \"red soldier\", \"red soldier\",\n\t\t\t\t\t\"blue captain\", \"blue guard\", \"blue guard\",\"blue elephant\", \"blue elephant\", \"blue horse\",\n\t\t\t\t\t\"blue horse\", \"blue car\", \"blue car\", \"blue duck\", \"blue duck\", \"blue soldier\", \"blue soldier\",\n\t\t\t\t\t\"blue soldier\", \"blue soldier\", \"blue soldier\"};\n\nint captain_x[5] = {0, 1, -1, 0, 0}, captain_y[5] = {0, 0, 0, 1, -1};\nint guard_x[5] = {0, 1, -1, 1, -1}, guard_y[5] = {0, 1, -1, -1, 1};\nint elephant_x[5] = {0, 2, -2, 2, -2}, elephant_y[5] = {0, 2, -2, -2, 2};\nint elephant_lim_x[5] = {0, 1, -1, 1, -1}, elephant_lim_y[5] = {0, 1, -1, -1, 1};\nint horse_x[9] = {0, 2, 2, 1, -1, -2, -2, -1, 1}, horse_y[9] = {0, 1, -1, -2, -2, -1, 1, 2, 2};\nint horse_lim_x[9] = {0, 1, 1, 0, 0, -1, -1, 0, 0}, horse_lim_y[9] = {0, 0, 0, -1, -1, 0, 0, 1, 1};\nint duck_x[9] = {0, 3, 3, 2, -2, -3, -3, -2, 2}, duck_y[9] = {0, 2, -2, -3, -3, -2, 2, 3, 3};\nint duck_lim1_x[9] = {0, 2, 2, 1, -1, -2, -2, -1, 1}, duck_lim1_y[9] = {0, 1, -1, -2, -2, -1, 1, 2, 2};\nint duck_lim2_x[9] = {0, 1, 1, 0, 0, -1, -1, 0, 0}, duck_lim2_y[9] = {0, 0, 0, -1, -1, 0, 0, 1, 1};\nint soldier_x[9] = {0, 1, 1, 1, 0, -1, -1, -1, 0}, soldier_y[9] = {0, 1, 0, -1, -1, -1, 0, 1, 1};\n//\u6bcf\u79cd\u68cb\u5b50\u53ef\u4ee5\u8d70\u7684\u65b9\u5411 , lim\u6570\u7ec4\u4e2d\u4e3a\u68cb\u773c\u4f4d\u7f6e\n\ninline bool move_captain(int ssx, int ssy, int ttx, int tty) {\n\tint x, y;\n\tfor (int i = 1; i <= 4; i++) {\n\t\tx = ssx + captain_x[i], y = ssy + captain_y[i];\n\t\tif (x == ttx && y == tty) break;\n\t}\n\tif (x != ttx || y != tty) return 0;//\u7b80\u5355\u7684\u6a21\u62df\n\treturn 1;\n}\n\ninline bool move_guard(int ssx, int ssy, int ttx, int tty) {\n\tint x, y;\n\tfor (int i = 1; i <= 4; i++) {\n\t\tx = ssx + guard_x[i], y = ssy + guard_y[i];\n\t\tif (x == ttx && y == tty) break;\n\t}\n\tif (x != ttx || y != tty) return 0;\n\treturn 1;\n}\n\ninline bool move_elephant(int ssx, int ssy, int ttx, int tty) {\n\tint x, y, lx, ly;\n\tfor (int i = 1; i <= 4; i++) {\n\t\tlx = ssx + elephant_lim_x[i], ly = ssy + elephant_lim_y[i];\n\t\tif (a[lx][ly]) continue;//\u5982\u679c\u68cb\u773c\u88ab\u5835\u76f4\u63a5\u8df3\u8fc7 , \u4e0b\u540c \n\t\tx = ssx + elephant_x[i], y = ssy + elephant_y[i];\n\t\tif (x == ttx && y == tty) break;\n\t}\n\tif (x != ttx || y != tty) return 0;\n\treturn 1;\n}\n\ninline bool move_horse(int ssx, int ssy, int ttx, int tty) {\n\tint x, y, lx, ly;\n\tfor (int i = 1; i <= 8; i++) {\n\t\tlx = ssx + horse_lim_x[i], ly = ssy + horse_lim_y[i];\n\t\tif (a[lx][ly]) continue;\n\t\tx = ssx + horse_x[i], y = ssy + horse_y[i];\n\t\tif (x == ttx && y == tty) break;\n\t}\n\tif (x != ttx || y != tty) return 0;\n\treturn 1;\n}\n\ninline bool move_car(int ssx, int ssy, int ttx, int tty) {\n\t//\u8f66\u7684\u5224\u65ad\u6bd4\u8f83\u7279\u6b8a\u9700\u8981\u5411\u56db\u4e2a\u65b9\u5411\u8dd1\u4e14\u9047\u5230\u522b\u7684\u68cb\u5b50\u5c31\u8981\u9000\u51fa\n\tint x = ssx, y = ssy;\n\tbool find = 0;\n\twhile (1) {\n\t\tx -= 1; if (x < 1) break;\n\t\tif (x == ttx && y == tty) {find = 1; break;}\n\t\telse if (a[x][y]) break;\n\t}\n\tif (!find) {\n\t\tx = ssx; y = ssy;\n\t\twhile (1) {\n\t\t\tx += 1; if (x > 10) break;\n\t\t\tif (x == ttx && y == tty) {find = 1; break;}\n\t\t\telse if (a[x][y]) break;\n\t\t}\n\t}\n\tif (!find) {\n\t\tx = ssx; y = ssy;\n\t\twhile (1) {\n\t\t\ty -= 1; if (y < 1) break;\n\t\t\tif (x == ttx && y == tty) {find = 1; break;}\n\t\t\telse if (a[x][y]) break;\n\t\t}\n\t}\n\tif (!find) {\n\t\tx = ssx; y = ssy;\n\t\twhile (1) {\n\t\t\ty += 1; if (y > 9) break;\n\t\t\tif (x == ttx && y == tty) {find = 1; break;}\n\t\t\telse if (a[x][y]) break;\n\t\t}\n\t}\n\tif (x != ttx || y != tty) return 0;\n\treturn 1;\n}\n\ninline bool move_duck(int ssx, int ssy, int ttx, int tty) {\n\tint x, y, l1x, l1y, l2x,l2y;\n\tfor (int i = 1; i <= 8; i++) {\n\t\tl1x = ssx + duck_lim1_x[i], l1y = ssy + duck_lim1_y[i];\n\t\tif (a[l1x][l1y]) continue;\n\t\tl2x = ssx + duck_lim2_x[i], l2y = ssy + duck_lim2_y[i];\n\t\tif (a[l2x][l2y]) continue;\n\t\tx = ssx + duck_x[i], y = ssy + duck_y[i];\n\t\tif (x == ttx && y == tty) break;\n\t}\n\tif (x != ttx || y != tty) return 0;\n\treturn 1;\n}\n\ninline bool move_soldier(int ssx, int ssy, int ttx, int tty) {\n\tint x, y;\n\tfor (int i = 1; i <= 8; i++) {\n\t\tx = ssx + soldier_x[i], y = ssy + soldier_y[i];\n\t\tif (x == ttx && y == tty) break;\n\t}\n\tif (x != ttx || y != tty) return 0;\n\treturn 1;\n}\n\ninline bool jiang_jun() {\n\t// \u5c06\u519b\u8981\u5224\u65ad\u53cc\u65b9\u7684\u738b\u662f\u5426\u88ab\u5c06\n\t// \u7ea2\u65b9\u7684\u738b\n\tint px = 0, py = 0;\n\tfor (int i = 1; i <= 10; i++) {\n\t\tfor (int j = 1; j <= 9; j++) {\n\t\t\tif (a[i][j] == 1) {px = i; py = j; break;}\n\t\t}\n\t\tif (px) break;\n\t}\n\t// \u627e\u738b\u7684\u4f4d\u7f6e\n\tint ret = 0;\n\tfor (int i = 1; i <= 10; i++) {\n\t\tfor (int j = 1; j <= 9; j++) {\n\t\t\tif (a[i][j] == 17) ret = move_captain(i, j, px, py);\n\t\t\telse if (a[i][j] >= 18 && a[i][j] <= 19) ret = move_guard(i, j, px, py);\n\t\t\telse if (a[i][j] >= 20 && a[i][j] <= 21) ret = move_elephant(i, j, px, py);\n\t\t\telse if (a[i][j] >= 22 && a[i][j] <= 23) ret = move_horse(i, j, px, py);\n\t\t\telse if (a[i][j] >= 24 && a[i][j] <= 25) ret = move_car(i, j, px, py);\n\t\t\telse if (a[i][j] >= 26 && a[i][j] <= 27) ret = move_duck(i, j, px, py);\n\t\t\telse if (a[i][j] >= 28 && a[i][j] <= 32) ret = move_soldier(i, j, px, py);\n\t\t\tif (ret) return 1;\n\t\t}\n\t}\n\t// \u5bf9\u4e8e\u84dd\u65b9\u7684\u6bcf\u4e2a\u68cb\u5b50\u5224\u65ad\u4e0b\u4e00\u6b65\u662f\u5426\u80fd\u8d70\u5230\u738b\u5373\u53ef\n\t// \u84dd\u65b9\u7684\u738b\n\tpx = 0; py = 0;\n\tfor (int i = 1; i <= 10; i++) {\n\t\tfor (int j = 1; j <= 9; j++) {\n\t\t\tif (a[i][j] == 17) {px = i; py = j; break;}\n\t\t}\n\t\tif (px) break;\n\t}\n\tret = 0;\n\tfor (int i = 1; i <= 10; i++) {\n\t\tfor (int j = 1; j <= 9; j++) {\n\t\t\tif (a[i][j] == 1) ret = move_captain(i, j, px, py);\n\t\t\telse if (a[i][j] >= 2 && a[i][j] <= 3) ret = move_guard(i, j, px, py);\n\t\t\telse if (a[i][j] >= 4 && a[i][j] <= 5) ret = move_elephant(i, j, px, py);\n\t\t\telse if (a[i][j] >= 6 && a[i][j] <= 7) ret = move_horse(i, j, px, py);\n\t\t\telse if (a[i][j] >= 8 && a[i][j] <= 9) ret = move_car(i, j, px, py);\n\t\t\telse if (a[i][j] >= 10 && a[i][j] <= 11) ret = move_duck(i, j, px, py);\n\t\t\telse if (a[i][j] >= 12 && a[i][j] <= 16) ret = move_soldier(i, j, px, py);\n\t\t\tif (ret) return 1;\n\t\t}\n\t}\n\treturn 0;\n}\n\ninline int read() {\n\tint x = 0, f = 1; char ch = getchar();\n\twhile (ch < '0' || ch > '9') {if (ch == '-') f = -1; ch = getchar();}\n\twhile (ch >= '0' && ch <= '9') x = x * 10 + ch - '0', ch = getchar();\n\treturn x * f;\n}\n\nint main() {\n\tn = read();\n\twhile (n--) {\n\t\tsx = read() + 1; sy = read() + 1; tx = read() + 1; ty = read() + 1;\n\t\t//\u56e0\u4e3a\u9898\u76ee\u68cb\u76d8\u5750\u6807\u4ece0\u5f00\u59cb , \u4e3a\u65b9\u4fbf\u8fd9\u91cc\u7edf\u4e00 +1 \n\t\tif (game_over) { puts(\"Invalid command\"); continue; }//\u6e38\u620f\u7ed3\u675f\u76f4\u63a5\u5224\u65ad\u4e0d\u5408\u6cd5 \n\t\tif (!a[sx][sy]) { puts(\"Invalid command\"); continue; }//\u79fb\u52a8\u70b9\u65e0\u68cb\u5b50\u5224\u65ad\u4e0d\u5408\u6cd5\n\t\tif (sx < 1 || sx > 10 || sy < 1 || sy > 9) { puts(\"Invalid command\"); continue; }\n\t\tif (tx < 1 || tx > 10 || ty < 1 || ty > 9) { puts(\"Invalid command\"); continue; }\n\t\t//\u79fb\u52a8\u70b9\u548c\u8981\u79fb\u5230\u7684\u70b9\u5728\u68cb\u76d8\u5916\u4e0d\u5408\u6cd5\n\t\tint ret = 0;\n\t\tif (!now) {\n\t\t//\t\u7ea2\u65b9\u56de\u5408\n\t\t\tif (a[sx][sy] > 16) { puts(\"Invalid command\"); continue; }\n\t\t\t// \u79fb\u52a8\u7684\u662f\u84dd\u65b9\u7684\u68cb\u4e0d\u5408\u6cd5\n\t\t\tif (a[tx][ty] < 17 && a[tx][ty] > 0) { puts(\"Invalid command\"); continue; }\n\t\t\t// \u79fb\u5230\u81ea\u5df1\u65b9\u7684\u68cb\u4e0a\u4e0d\u5408\u6cd5\n\t\t\tif (a[sx][sy] == 1) ret = move_captain(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 2 && a[sx][sy] <= 3) ret = move_guard(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 4 && a[sx][sy] <= 5) ret = move_elephant(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 6 && a[sx][sy] <= 7) ret = move_horse(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 8 && a[sx][sy] <= 9) ret = move_car(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 10 && a[sx][sy] <= 11) ret = move_duck(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 12 && a[sx][sy] <= 16) ret = move_soldier(sx, sy, tx, ty);\n\t\t\tif (!ret) { puts(\"Invalid command\"); continue; }\n\t\t\tcout << name[a[sx][sy]] << \";\";\n\t\t\tif (a[tx][ty]) {\n\t\t\t\tcout << name[a[tx][ty]] << \";\";\n\t\t\t\tif (a[tx][ty] == 1 || a[tx][ty] == 17) game_over = 1;\n\t\t\t\t//\u5982\u679c\u738b\u6b7b\u4e86\u90a3\u4e48\u5224\u65ad\u6e38\u620f\u7ed3\u675f\n\t\t\t}\n\t\t\telse cout << \"NA;\";\n\t\t\ta[tx][ty] = a[sx][sy]; a[sx][sy] = 0;\n\t\t\t//\u5c06\u68cb\u5b50\u79fb\u52a8\n\t\t\tif (game_over) cout << \"no;\";//\u8fd9\u91cc\u6ce8\u610f\u5982\u679c\u6e38\u620f\u7ed3\u675f\u5c06\u519b\u72b6\u51b5\u4e3ano\n\t\t\telse if (jiang_jun()) cout << \"yes;\";\n\t\t\telse cout <<\"no;\";\n\t\t\tif (game_over) cout << \"yes\" << endl;\n\t\t\telse cout << \"no\" << endl;\n\t\t\tnow = 1;//\u6362\u65b9\u6267\u68cb\n\t\t}\n\t\telse {\n\t\t//\t\u84dd\u65b9\u56de\u5408 , \u64cd\u4f5c\u540c\u4e0a\n\t\t\tif (a[sx][sy] < 17 && a[sx][sy] > 0) { puts(\"Invalid command\"); continue; }\n\t\t\tif (a[tx][ty] > 16) { puts(\"Invalid command\"); continue; }\n\t\t\tif (a[sx][sy] == 17) ret = move_captain(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 18 && a[sx][sy] <= 19) ret = move_guard(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 20 && a[sx][sy] <= 21) ret = move_elephant(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 22 && a[sx][sy] <= 23) ret = move_horse(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 24 && a[sx][sy] <= 25) ret = move_car(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 26 && a[sx][sy] <= 27) ret = move_duck(sx, sy, tx, ty);\n\t\t\telse if (a[sx][sy] >= 28 && a[sx][sy] <= 32) ret = move_soldier(sx, sy, tx, ty);\n\t\t\tif (!ret) { puts(\"Invalid command\"); continue; }\n\t\t\tcout << name[a[sx][sy]] << \";\";\n\t\t\tif (a[tx][ty]) {\n\t\t\t\tcout << name[a[tx][ty]] << \";\";\n\t\t\t\tif (a[tx][ty] == 1 || a[tx][ty] == 17) game_over = 1;\n\t\t\t}\n\t\t\telse cout << \"NA;\";\n\t\t\ta[tx][ty] = a[sx][sy]; a[sx][sy] = 0;\n\t\t\tif (game_over) cout << \"no;\";\n\t\t\telse if (jiang_jun()) cout << \"yes;\";\n\t\t\telse cout <<\"no;\";\n\t\t\tif (game_over) cout << \"yes\" << endl;\n\t\t\telse cout << \"no\" << endl;\n\t\t\tnow = 0;\n\t\t}\n\t}\n\treturn 0;\n}\n```  \n\u89c9\u5f97\u7801\u98ce\u5947\u602a\u7684\u8fd8\u8bf7\u89c1\u8c05\n",
        "postTime": 1572514694,
        "uid": 18282,
        "name": "Phykyer",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5380 \u3010[THUPC2019]\u9e2d\u68cb\u3011"
    }
]
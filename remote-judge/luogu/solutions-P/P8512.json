[
    {
        "content": "easy round \u679c\u7136\u5584\u826f\u3002\n\n\u6709\u4e00\u4e2a\u6027\u8d28\u662f\u65e0\u8bba\u600e\u4e48\u8986\u76d6\u603b\u6bb5\u6570\u90fd\u662f $O(n)$ \u7684\u3002\n\n\u8bc1\u660e\u6bd4\u8f83\u663e\u7136\uff0c\u4e00\u5f00\u59cb\u53ea\u6709\u4e00\u6bb5\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ea\u53ef\u80fd\u5728\u4e24\u8fb9\u5c06\u4e24\u4e2a\u6bb5\u62c6\u6210\u4e0d\u5b8c\u6574\u6bb5\uff0c\u4e2d\u95f4\u6bb5\u5168\u90e8\u8986\u76d6\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u64cd\u4f5c\u589e\u52a0\u6bb5\u6570\u662f $O(1)$ \u7684\uff0c\u90a3\u4e48\u603b\u6bb5\u6570\u5c31\u662f $O(n)$\u3002\n\n\u8003\u8651\u6ca1\u6709\u533a\u95f4\u9650\u5236\uff0c\u6267\u884c\u5168\u90e8\u64cd\u4f5c\u540e\u8be2\u95ee\u5168\u5c40\u548c\u600e\u4e48\u505a\u3002\u76f4\u63a5\u641e\u4e00\u4e2a set \u7ef4\u62a4\u8fde\u7eed\u6bb5\u5373\u53ef\u3002\u63a8\u5e73\u65f6\u51cf\u539f\u6bb5\u8d21\u732e\uff0c\u52a0\u4e0a\u73b0\u8d21\u732e\u3002\n\n\u52a0\u4e86\u533a\u95f4\u9650\u5236\u540e\u53ef\u4ee5\u76f4\u63a5\u5c06\u8be2\u95ee\u6302\u5728 $r$ \u4e0a\u626b\u63cf\u7ebf\uff0c\u53d1\u73b0\u8fd8\u8981\u7ef4\u62a4\u5bf9\u4e8e\u6bcf\u4e00\u65f6\u95f4 $l$ \u7684\u548c\u662f\u591a\u5c11\u3002\u90a3\u4e48\u5728\u989c\u8272\u6bb5\u4e0a\u518d\u8bb0\u5f55\u52a0\u5165\u65f6\u95f4\u5373\u53ef\uff0c\u88ab\u5220\u9664\u65f6\u5c31\u5728\u539f\u65f6\u95f4\u5904 $-len\\times val$\u3002\u6240\u4ee5\u6211\u4eec\u5728\u65f6\u95f4\u7ef4\u5f00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u9700\u8981\u652f\u6301\u5355\u70b9\u52a0\uff0c\u533a\u95f4\u67e5\uff0c\u7b80\u5355\u6811\u72b6\u6570\u7ec4\u5373\u53ef\u3002\u603b\u5171 $O(n)$ \u4e2a\u6bb5\uff0c\u6bcf\u6bb5\u63d2\u5220\u590d\u6742\u5ea6 $O(\\log{n})$\uff0c\u7ef4\u62a4\u8fde\u7eed\u6bb5\uff0c\u56de\u7b54\u8be2\u95ee\u603b\u5171\u9700\u8981 $O(n\\log{n})$\uff0c\u603b\u590d\u6742\u5ea6 $O(n\\log{n})$\u3002\n\n\u6ca1\u5565\u5b9e\u73b0\u96be\u5ea6\uff0c\u6ce8\u91ca\u5220\u4e86\u5373\u53ef\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 500005\n#define int long long\nint n,m,q,a[N],ta,t[N],l[N],r[N],w[N],out[N];\ninline void add(int x,int v){if(x>0) while(x<=n) t[x]+=v,x+=(x&-x);}\ninline int ask(int x){ta=0;while(x) ta+=t[x],x^=(x&-x);return ta;}\nstruct query{int l,id;};\nvector<query> v[N];\nstruct node{mutable int l,r,t,v;};\nbool operator<(const node &a,const node &b){return a.l<b.l;}\nset<node> s;\n#define It set<node>::iterator\nIt split(int x){\n\tIt it=s.lower_bound((node){x,0,0,0});\n\tif(it->l==x) return it;\n\tit--;int l=it->l,r=it->r,v=it->v,t=it->t;\n\ts.erase(it);s.insert((node){l,x-1,t,v});\n\treturn s.insert((node){x,r,t,v}).first;\n}\nvoid assign(int l,int r,int t,int v){\n\tIt itr=split(r+1),itl=split(l);\n\tfor(It it=itl;it!=itr;++it) add(it->t,-1ll*(it->r-it->l+1)*it->v);\n\ts.erase(itl,itr);add(t,(r-l+1)*v);s.insert((node){l,r,t,v});\n}\nsigned main(){\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n\tcin>>n>>m>>q;\n\tfor(int i=1;i<=n;++i) cin>>l[i]>>r[i]>>w[i];\n\tfor(int i=1,l,r;i<=q;++i) cin>>l>>r,v[r].push_back((query){l,i});\n\t//s.insert((node){0,m+1,0,0});\n\tfor(int Q=1;Q<=n;++Q){\n\t\tassign(l[Q],r[Q],Q,w[Q]);\n\t\tfor(int i=0;i<v[Q].size();++i) out[v[Q][i].id]=ask(Q)-ask(v[Q][i].l-1);\n\t}\n\tfor(int i=1;i<=q;++i) cout<<out[i]<<endl;\n}\n```",
        "postTime": 1662646694,
        "uid": 376149,
        "name": "sunset1028",
        "ccfLevel": 0,
        "title": "P8512 [Ynoi Easy Round 2021] TEST_152 \u9898\u89e3"
    },
    {
        "content": "\u4e09\u5e74\u524d\u51fa\u7ed9 CometOJ \u7684\u9898,\u4eca\u5929\u88ab lxl \u642c\u5230 Ynoi Easy Round \u91cc\u6765\u4e86\u3002\n\n\u628a\u8be2\u95ee\u79bb\u7ebf\uff0c\u6309\u7167 $r$ \u6392\u5e8f\uff0c\u7136\u540e\u6211\u4eec\u6bcf\u6b21\u8be2\u95ee\u7684\u65f6\u5019\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5f00\u4e00\u4e2a set \u6765\u7ef4\u62a4 $c$ \u5e8f\u5217\u3002\n\nset \u4e2d\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u4e09\u5143\u7ec4 $(l,r,v)$\uff0c\u8868\u793a $c_{l..r}$\n \u90fd\u4e3a $v$\u3002\n \n\u6bcf\u6b21\u8be2\u95ee\u7684\u65f6\u5019\uff0c\u6211\u4eec\u7ef4\u62a4\u6267\u884c $1 \\sim r$ \u64cd\u4f5c\u540e $c$ \u5e8f\u5217\uff0c\u6bcf\u4e2a\u8282\u70b9\u540c\u65f6\u5b58\u50a8\u662f\u54ea\u6b21\u64cd\u4f5c\u4ea7\u751f\u7684\u8282\u70b9\u3002\u7136\u540e\u6211\u4eec\u8be2\u95ee $[l,r]$ \u7684\u65f6\u5019\uff0c\u5c31\u662f\u6240\u6709\u4ea7\u751f\u65f6\u7684\u64cd\u4f5c\u7f16\u53f7 $\\geq l$ \u7684\u8282\u70b9\u7684\u6743\u503c\u548c\u3002\n\n\u8fd9\u4e2a\u6211\u4eec\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u5373\u53ef\u3002\n\n\u7531\u4e8e\u6bcf\u6b21\u8d4b\u503c\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u6700\u591a\u5206\u88c2 $2$ \u4e2a\u8282\u70b9\uff0c\u63d2\u5165 $1$ \u4e2a\u8282\u70b9\uff0c\u6240\u4ee5\u8282\u70b9\u7684\u53d8\u5316\u6b21\u6570\u662f $O(n)$,\u6811\u72b6\u6570\u7ec4\u6700\u591a\u4fee\u6539 $O(n)$ \u6b21\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n \\log n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define MAXN 500005\n#define se set<aa>\n#define it iterator \n#define lowbit(x) (x&(-x)) \n#define int long long\n\nint n,m,q;\nstruct op\n{\n\tint l,r,v;\n}a[MAXN];\n\nstruct qr\n{\n\tint l,r,i;\n}b[MAXN];\nint ans[MAXN]; \n\nstruct aa\n{\n\tint l,r,v,i;\n};\nset<aa>s;\nint c[MAXN];\n\nvoid add(int x,int y)\n{\n\tif(x == 0) return;\n\tfor(; x <= n; x += lowbit(x)) \n\t\tc[x] += y; \n}\n\nint qsum(int x) {\n\tint ans = 0;\n\tfor(; x > 0; x -= lowbit(x))\n\t\tans += c[x];\n\treturn ans;\n}\n\ninline int read()\n{\n    register int x = 0 , ch = getchar();\n    while( !isdigit( ch ) ) ch = getchar();\n    while( isdigit( ch ) ) x = x * 10 + ch - '0' , ch = getchar();\n    return x;\n}\n\nbool cmp(qr a,qr b) {\n\treturn a.r < b.r;\n}\n\nbool operator <(aa a,aa b) {\n\treturn a.r < b.r;\n}\n\nvoid rd() {\n\tcin >> n >> m >> q;\n\tfor(int i = 1; i <= n; i ++)\n\t{\n\t\ta[i].l = read();\n\t\ta[i].r = read();\n\t\ta[i].v = read();\t\n\t}\n\tfor(int i = 1; i <= q; i ++)\n\t{\n\t\tb[i].l = read();\n\t\tb[i].r = read();\n\t\tb[i].i = i;\n\t}\n\tsort(b+1,b+q+1,cmp);\n\ts.insert((aa){1,m,0,0});\n}\n\nvoid split(se::it i,int x)\n{\n\tint l = i->l,r = i->r,v = i->v,_i = i->i;\n\tif(x < l || x >= r) return;\n\ts.erase(i);\n\ts.insert((aa){l,x,v,_i});\n\ts.insert((aa){x+1,r,v,_i});\n}\n\nvoid Assign(int l,int r,int v,int i) //\u533a\u95f4\u8d4b\u503c\n{\n\tse::it x = s.lower_bound((aa){0,l-1,0,0});\n\tsplit(x,l-1);\n\tse::it y = s.lower_bound((aa){0,r,0,0});\n\tsplit(y,r);\n\t\n\tx = s.lower_bound((aa){0,l,0,0});\n\ty = s.lower_bound((aa){0,r+1,0,0});\n\tfor(se::it i = x; i != y; ) {\n\t\tse::it j = i;\n\t\ti ++;\n\t\tadd(j->i,-((j->r)-(j->l)+1)*(j->v));\n\t\ts.erase(j); \n\t}\n\ts.insert((aa){l,r,v,i});\n\tadd(i,(r-l+1)*v);\n\t\n}\n\nsigned main()\n{\n\trd();\n\tfor(int i = 1; i <= q; i ++)\n\t{\n\t\tfor(int j = b[i-1].r+1; j <= b[i].r; j ++) {\n\t\t\tAssign(a[j].l,a[j].r,a[j].v,j);\n\t\t}\n\t\tans[b[i].i] = qsum(n)-qsum(b[i].l-1); \n\t}\n\tfor(int i = 1; i <= q; i ++)\n\t\tprintf(\"%lld\\n\",ans[i]); \n\treturn 0;\n } \n```",
        "postTime": 1662444806,
        "uid": 124721,
        "name": "Ynoi",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P8512 [Ynoi Easy Round 2021] TEST_152"
    },
    {
        "content": "\u6709\u4e09\u4e2a\u7ef4\u5ea6\uff0c\u5e8f\u5217\u7ef4\uff0c\u64cd\u4f5c\u7ef4\uff0c\u8be2\u95ee\u7ef4\u3002\n\n\u5c1d\u8bd5\u626b\u63cf\u7ebf\uff0c\u679a\u4e3e\u4e00\u4e0b\u626b\u54ea\u4e2a\u7ef4\u80fd\u505a\u3002\n\n\u6216\u8005\u8003\u8651\u5e8f\u5217\u7ef4\u4e0a\u6709\u989c\u8272\u6bb5\u5747\u644a\u7684\u6027\u8d28\u3002\n\n\u8fd9\u6837\u4e0d\u96be\u60f3\u5230\u5728\u64cd\u4f5c\u7ef4\u4e0a\u4ece\u5c0f\u5230\u5927\u626b\u63cf\u7ebf\uff0c\u6216\u8005\u8bf4\u5bf9\u8be2\u95ee\u7ef4\u7684 $r$ \u4f5c\u626b\u63cf\u7ebf\uff0c\u7528 `set` \u7ef4\u62a4\u5e8f\u5217\u7ef4\u4e0a\u7684\u8fde\u7eed\u6bb5\u3002\n\n\u73b0\u5728\u5c06\u8be2\u95ee $(l,r)$ \u6302\u5728\u4e86 $r$ \u4e0a\uff0c\u626b\u63cf\u7ebf\u626b\u5230 $r$ \u65f6\uff0c\u8981\u8be2\u95ee \u201c\u53ea\u770b $\\geq l$ \u7684\u64cd\u4f5c\u540e\u6240\u6709\u6570\u7684\u603b\u548c\u201d\n\n\u6362\u800c\u8a00\u4e4b\uff0c\u53ea\u9700\u8981\u8be2\u95ee\u63d2\u5165\u65f6\u95f4 $\\geq l$ \u7684\u989c\u8272\u6bb5\u7684\u603b\u548c\u3002\n\n\u4e8e\u662f\u5728 `set` \u7ef4\u62a4\u8fde\u7eed\u989c\u8272\u6bb5\u7684\u65f6\u5019\uff0c\u7528\u6811\u72b6\u6570\u7ec4\u5728\u65f6\u95f4\u7ef4\u4e0a\u7ef4\u62a4\u4e00\u4e2a\u540e\u7f00\u548c\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}((n+q)\\log n)$\n\n```cpp\n#include<cstdio>\n#include<vector>\n#include<queue>\n#include<cstring>\n#include<set>\n#include<iostream>\n#include<algorithm>\n#include<ctime>\n#include<random>\n#include<assert.h>\n#define pb emplace_back\n#define mp make_pair\n#define fi first\n#define se second\n#define dbg(x) cerr<<\"In Line \"<< __LINE__<<\" the \"<<#x<<\" = \"<<x<<'\\n';\n#define dpi(x,y) cerr<<\"In Line \"<<__LINE__<<\" the \"<<#x<<\" = \"<<x<<\" ; \"<<\"the \"<<#y<<\" = \"<<y<<'\\n';\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef pair<int,int>pii;\ntypedef pair<ll,int>pli;\ntypedef pair<ll,ll>pll;\ntypedef pair<int,ll>pil;\ntypedef vector<int>vi;\ntypedef vector<ll>vll;\ntypedef vector<pii>vpii;\ntypedef vector<pil>vpil;\ntemplate<typename T>T cmax(T &x, T y){return x=x>y?x:y;}\ntemplate<typename T>T cmin(T &x, T y){return x=x<y?x:y;}\n#define getchar()(p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nchar buf[1<<21],*p1=buf,*p2=buf;\ntemplate<typename T>\nT &read(T &r){\n\tr=0;bool w=0;char ch=getchar();\n\twhile(ch<'0'||ch>'9')w=ch=='-'?1:0,ch=getchar();\n\twhile(ch>='0'&&ch<='9')r=r*10+(ch^48),ch=getchar();\n\treturn r=w?-r:r;\n}\ntemplate<typename T1,typename... T2>\nvoid read(T1 &x,T2& ...y){read(x);read(y...);}\nconst int N=500010;\nint n,m,q;\nint l[N],r[N],v[N];\nll ans[N],tree[N];\nvpii vec[N];\ninline int lowbit(int x){return x&(-x);}\ninline void modify(int x,ll v){for(;x;x-=lowbit(x))tree[x]+=v;}\ninline ll query(int x){ll s=0;for(;x<=m;x+=lowbit(x))s+=tree[x];return s;}\nstruct Node{\n    int l,r,c,t;\n    bool operator<(const Node &x)const{return l<x.l;}\n};\nset<Node>st;\nauto split(int pos){\n    auto it=st.lower_bound({pos,pos,0,0});\n    if(it!=st.end()&&(*it).l==pos)return it;\n    --it;\n    int L=it->l,R=it->r,C=it->c,T=it->t;\n    st.erase(it);\n    st.insert({L,pos-1,C,T});\n    return st.insert({pos,R,C,T}).first;\n}\nvoid assign(int l,int r,int c,int t){\n    auto itr=split(r+1),itl=split(l);\n    auto it=split(l);\n    for(;it!=itr;++it)modify(it->t,-1ll*((it->r)-(it->l)+1)*(it->c));\n    st.erase(itl,itr);\n    st.insert({l,r,c,t});\n    modify(t,1ll*(r-l+1)*c);\n}\nsigned main(){\n\tread(m,n,q);\n\tfor(int i=1;i<=m;i++)read(l[i],r[i],v[i]);\n\tfor(int i=1;i<=q;i++){\n\t\tint x,y;read(x,y);vec[y].pb(mp(x,i));\n\t}\n\tst.insert({1,n,0,0});\n\tfor(int i=1;i<=m;i++){\n\t\tassign(l[i],r[i],v[i],i);\n\t\tfor(auto o:vec[i])\n\t\t\tans[o.se]=query(o.fi);\n\t}\n\tfor(int i=1;i<=q;i++)cout << ans[i] << '\\n';\n\treturn 0;\n}\n```",
        "postTime": 1662524749,
        "uid": 223298,
        "name": "do_while_true",
        "ccfLevel": 8,
        "title": "\u300c\u9898\u89e3\u300dP8512 [Ynoi Easy Round 2021] TEST_152"
    },
    {
        "content": "\u81ea\u5df1\u7684\u9898\u662f\u95ee\u7684\u5168\u5c40\u989c\u8272\u6bb5\uff0c\u4f46\u662f\u5176\u5b9e\u4e5f\u5dee\u4e0d\u591a\u505a\u6cd5\u3002\n\n\u4f60\u53ef\u4ee5\u53d1\u73b0\u8fdb\u884c\u4e00\u6b21\u5168\u5c40\u7684\u6240\u6709\u64cd\u4f5c\u989c\u8272\u6bb5\u6570\u91cf\u662f $O(n + m)$ \u7684\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5728\u626b\u63cf\u7ebf\u7684\u65f6\u5019\u5bf9\u6bcf\u4e2a\u989c\u8272\u6bb5\u7ef4\u62a4\u989c\u8272\u4e0e\u5b83\u4eec\u88ab\u54ea\u4e2a\u64cd\u4f5c\u5f71\u54cd\u3002\n\n\u5219\u4e00\u4e2a\u989c\u8272\u6bb5\u53ef\u88ab\u8bb0\u4e3a $(l,r,x,col)$\uff0c\u5176\u4e2d $col$ \u4e3a\u989c\u8272\uff0c$x$ \u662f\u5c5e\u4e8e\u7684\u7b2c\u51e0\u4e2a\u64cd\u4f5c\u3002\n\n\u7528\u6811\u72b6\u6570\u7ec4\u5b9e\u73b0\u53ef $O(n \\log n)$\u3002\n\n\u5176\u5b9e\u633a\u57fa\u7840\u7684\uff0c\u611f\u89c9\u4e0d\u5982\u95ee\u989c\u8272\u6bb5\u3002",
        "postTime": 1662474531,
        "uid": 132533,
        "name": "Hakuoro",
        "ccfLevel": 0,
        "title": "\u88ab\u649e\u9898\u4e86\uff1f\u6211\u8be5\u600e\u4e48\u529e\uff1f\uff1f\uff1f"
    },
    {
        "content": "\u9996\u5148\u89c2\u5bdf\u8fd9\u4e2a\u9898\u76ee\uff0c\u53d1\u73b0\u8fd9\u4e2a\u201c\u8be2\u95ee\u5957\u4fee\u6539\u201d\u5e76\u4e0d\u80fd\u5f88\u597d\u5730\u533a\u95f4\u5904\u7406\uff0c\u6240\u4ee5\u4e0d\u96be\u60f3\u5230\u628a\u5916\u5c42\u7684\u8be2\u95ee\u79bb\u7ebf\u4e0b\u6765\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5bf9\u6bcf\u4e2a\u4f4d\u7f6e\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a $t$ \u548c $v$\uff0c\u8868\u793a\u6700\u540e\u4e00\u6b21\u662f\u5728 $t$ \u7684\u65f6\u95f4\u88ab\u8d4b\u503c\u6210 $v$\u3002\u6211\u4eec\u53ef\u4ee5\u6bcf\u6b21\u626b\u63cf\u7ebf\uff0c\u5bf9\u8be2\u95ee $[l,r]$ \u6211\u4eec\u53ef\u4ee5\u52a0\u5165 $1 \\sim r$ \u7684\u4fee\u6539\uff0c\u7136\u540e\u53ea\u6c42 $t \\geq l$ \u7684\u8d21\u732e\u5373\u53ef\u3002 \n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u968f\u7740\u626b\u63cf\u7ebf\u5f00\u4e00\u4e2a\u503c\u57df\u7ebf\u6bb5\u6811\uff0c\u4e0d\u65ad\u5730\u52a0\u5165\u4fee\u6539\u64cd\u4f5c\uff0c\u66f4\u6539\u8fd9\u4e2a\u503c\u57df\u7ebf\u6bb5\u6811\u3002\n\n\u4f46\u662f\u660e\u663e\uff0c\u6211\u4eec\u5982\u679c\u66b4\u529b\u7ef4\u62a4\u662f\u4f1a TLE \u98de\u7684\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u7528\u5230\u4e00\u4e2a\u6027\u8d28\uff0c\u90a3\u5c31\u662f\u989c\u8272\u6bb5\u6570\u91cf\u5747\u644a\u3002\u6240\u4ee5\u76f4\u63a5\u7528 set \u7ef4\u62a4\u4e0d\u540c\u7684\u8fde\u7eed\u6bb5\uff0c\u6bcf\u6b21\u628a\u4e00\u4e2a\u8fde\u7eed\u6bb5\u538b\u6210\u4e00\u4e2a\u8282\u70b9\u5b58\u5728\u7ebf\u6bb5\u6811\u4e0a\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5173\u4e8e\u600e\u4e48\u7ef4\u62a4\u989c\u8272\u6bb5\uff1a\u6bcf\u6b21\u5bf9 $[l,r]$ \u67d3\u8272\uff0c\u6211\u4eec\u5c31\u628a\u88ab\u5b8c\u5168\u5305\u542b\u7684\u5168\u90e8\u5220\u9664\uff0c\u4e24\u5934\u6709\u4ea4\u96c6\u4f46\u4e0d\u5b8c\u5168\u5305\u542b\u7684\u989c\u8272\u6bb5\u62c6\u6210\u4e24\u6bb5\u3002\n\n\u5927\u6982\u8fd9\u6837\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n2kf802r.png)\n\n\u590d\u6742\u5ea6 $O(n \\log n)$\u3002",
        "postTime": 1680055067,
        "uid": 195198,
        "name": "E1_de5truct0r",
        "ccfLevel": 7,
        "title": "P8512"
    },
    {
        "content": "HH \u7684\u9879\u94fe\u306e\u5957\u8def\u3002\r\n\r\n\u79bb\u7ebf\u4e0b\u6765\uff0c\u5bf9\u8be2\u95ee\u7684 $r$ \u626b\u63cf\u7ebf\uff0c\u7ef4\u62a4 $z_i=\\max\\{j|i\\in[l_j,r_j],j\\le r\\}$\uff0c$d_x=\\sum\\limits_{z_i=x}v_{z_i}$\u3002\r\n\r\n\u82e5 $z_i\\ge l$\uff0c\u5219 $a_i=v_{z_i}$\uff0c\u5426\u5219 $a_i=0$\uff0c\u5219\u8be2\u95ee $l,r$ \u7684\u7b54\u6848\u4e3a $\\sum\\limits_{z_i\\ge l}v_{z_i}=\\sum\\limits_{i\\ge l}d_i$\u3002\r\n\r\nODT \u7ef4\u62a4 $z_i$\uff0c\u540c\u65f6 BIT \u7ef4\u62a4 $d_i$\u3002\r\n```cpp\r\n#include <set>\r\n#include <cstdio>\r\n#include <algorithm>\r\nusing namespace std;\r\nstruct S\r\n{\r\n    int l, r, i;\r\n} k[500050];\r\nstruct N\r\n{\r\n    int l, r, z;\r\n    bool operator<(N b) const { return l < b.l; }\r\n};\r\nset<N> s;\r\nset<N>::iterator i, j;\r\nlong long c[500050], g[500050];\r\nint n, m, q, l[500050], r[500050], v[500050];\r\nbool C(S a, S b) { return a.r < b.r; }\r\nvoid M(int x, long long k)\r\n{\r\n    for (; x; x &= x - 1)\r\n        c[x] += k;\r\n}\r\nlong long Q(int x)\r\n{\r\n    long long q = 0;\r\n    for (; x <= n; x += x & -x)\r\n        q += c[x];\r\n    return q;\r\n}\r\nset<N>::iterator S(int k)\r\n{\r\n    i = s.lower_bound({k});\r\n    if (i != s.end() && i->l == k)\r\n        return i;\r\n    int l = (--i)->l, r = i->r, z = i->z;\r\n    s.erase(i);\r\n    s.insert({l, k - 1, z});\r\n    return s.insert({k, r, z}).first;\r\n}\r\nvoid A(int l, int r, int z)\r\n{\r\n    M(z, 1ll * v[z] * (r - l + 1));\r\n    j = S(r + 1);\r\n    i = S(l);\r\n    for (set<N>::iterator k = i; k != j; ++k)\r\n        M(k->z, -1ll * v[k->z] * (k->r - k->l + 1));\r\n    s.erase(i, j);\r\n    s.insert({l, r, z});\r\n}\r\nint main()\r\n{\r\n    scanf(\"%d%d%d\", &n, &m, &q);\r\n    for (int i = 1; i <= m; ++i)\r\n        s.insert({i, i, 0});\r\n    for (int i = 1; i <= n; ++i)\r\n        scanf(\"%d%d%d\", l + i, r + i, v + i);\r\n    for (int i = 0; i < q; ++i)\r\n        scanf(\"%d%d\", &k[i].l, &k[i].r), k[i].i = i;\r\n    sort(k, k + q, C);\r\n    for (int i = 0, j = 0; i < q; ++i)\r\n    {\r\n        while (j < k[i].r)\r\n            ++j, A(l[j], r[j], j);\r\n        g[k[i].i] = Q(k[i].l);\r\n    }\r\n    for (int i = 0; i < q; ++i)\r\n        printf(\"%lld\\n\", g[i]);\r\n    return 0;\r\n}\r\n```\r\n",
        "postTime": 1677458539,
        "uid": 388651,
        "name": "5k_sync_closer",
        "ccfLevel": 7,
        "title": "P8512 [Ynoi Easy Round 2021] TEST_152 \u9898\u89e3"
    }
]
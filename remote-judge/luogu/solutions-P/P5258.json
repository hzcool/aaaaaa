[
    {
        "content": "[\u4e0d\u4e00\u6837\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/Livingston/p/15368258.html)\n\n## Solution\n\n\u53ef\u4ee5\u8bc1\u660e\uff0c\u5982\u679c\u4e00\u6761\u516c\u4ea4\u7ebf\u8def\u53ef\u4ee5\u5728\u5b50\u6811\u5185\u5efa\u6210\uff0c\u5c31\u4e0d\u4f1a\u5728\u5f80\u5b50\u6811\u5916\u8d70\u3002\n\n> \u7b80\u5355\u7684\u8bc1\u660e\uff1a\u5982\u679c\u5f53\u524d\u5b50\u6811\u5185\u6709\u53ef\u4ee5\u8fde\u7684\u7ebf\u8def\uff0c\u5982\u679c\u5f80\u5916\u8d70\uff0c\u8981\u4e48\u4e0e\u5f53\u524d\u8fde\u8fb9\u6570\u4e00\u81f4\uff0c\u8981\u4e48\u591a\u8fde\uff0c\u7b54\u6848\u4e0d\u4f1a\u66f4\u4f18\u3002\n\n\u56e0\u6b64\u8003\u8651\u8d2a\u5fc3\u3002\u8bbe $a_i$ \u548c $b_i$ \u8868\u793a\u7236\u4eb2\u8981\u8d70\u8fc7\u6765\u591a\u5c11\u548c\u8981\u5f80\u7236\u4eb2\u8d70\u591a\u5c11\u3002\n\n\u5bf9\u4e8e\u5f53\u524d\u8282\u70b9 $x$\uff0c\u5b83\u7684\u5b50\u8282\u70b9 $son$ \u53ea\u6709 $a_i$ \u548c $b_i$ \u4e2d\u7684\u4e00\u4e2a\u53ef\u4ee5\u4f20\u9012\u5230 $x$\uff0c\u90a3\u4e48\u53e6\u4e00\u4e2a\u5c31\u53ef\u4ee5\u8bb0\u5f55\u7b54\u6848\u3002\n\n\u53e6\u5916\uff0c\u5bf9\u4e8e\u8282\u70b9 $x$\uff0c\u4f18\u5148\u8ba9\u5176\u5728\u5185\u90e8\u5efa\u7ebf\u8def\uff0c\u5269\u4f59\u7684\u518d\u4f20\u9012\u4e0a\u53bb\u3002\n\n## Code\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define N 100005\nusing namespace std;\nstruct ndoe\n{\n\tint to,next,head,fx;\n}tree[N<<1];\nint n,x,y,ans,tot,a[N],b[N];\nvoid add(int x,int y,int opt)\n{\n\ttree[++tot].to=y;\n\ttree[tot].fx=opt;\n\ttree[tot].next=tree[x].head;\n\ttree[x].head=tot;\n}\nvoid dfs(int x,int fa)\n{\n\tfor (int i=tree[x].head;i;i=tree[i].next)\n\t{\n\t\tint v=tree[i].to;\n\t\tif (v==fa) continue;\n\t\tdfs(v,x);\n\t\tif (tree[i].fx)//\u770b\u80fd\u4f20\u9012\u54ea\u4e00\u90e8\u5206\uff0c\u53e6\u5916\u4e00\u90e8\u5206\u8ba1\u5165\u7b54\u6848\n\t\t{\n\t\t\tans+=a[v];\n\t\t\tb[x]+=max(b[v],1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tans+=b[v];\n\t\t\ta[x]+=max(a[v],1);\n\t\t}\n\t}\n\tint t=min(a[x],b[x]);\n\ta[x]-=t;b[x]-=t;ans+=t;//\u4f18\u5148\u5728\u5185\u90e8\u8fde\u8fb9\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<n;++i)\n\t{\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tadd(x+1,y+1,1);add(y+1,x+1,0);\n\t}\n\tdfs(1,0);\n\tprintf(\"%d\\n\",ans+max(a[1],b[1]));\n\treturn 0;\n}\n```\n\n",
        "postTime": 1633404208,
        "uid": 166078,
        "name": "Thunder_S",
        "ccfLevel": 6,
        "title": "P5258 [JSOI2013]\u65c5\u884c\u65f6\u7684\u56f0\u60d1"
    },
    {
        "content": "\u8003\u8651\u4e0a\u4e0b\u754c\u7f51\u7edc\u6d41\n\n\u9898\u76ee\u5f88\u660e\u663e\u7684\u9650\u5236\uff1a\u4efb\u610f\u4e24\u4e2a\u5c9b\u53ef\u4ee5\u4e92\u8fbe\uff0c\u5219\u9700\u8981\u5efa\u51fa\u4e00\u68f5\u53cc\u5411\u8fb9\u7684\u6811\uff0c\u5373\u6bcf\u6761\u8fb9\u81f3\u5c11\u53cd\u65b9\u5411\u7ecf\u8fc7\u4e00\u6b21\uff0c\u4e8e\u662f\u6309\u7167\u5957\u8def\u6d41\u91cf\u9650\u5236\u4e3a $[1,inf]$\n\n\u7531\u4e8e\u7ebf\u8def\u53ef\u4ee5\u4ece\u6bcf\u4e2a\u70b9\u5f00\u59cb\uff0c\u53ef\u4ee5\u6709\u4efb\u610f\u591a\u6761\uff0c\u4e8e\u662f\u4ece\u6e90\u70b9\u5411\u6bcf\u4e2a\u70b9\u8fde\u4e00\u6761 $[0,inf]$ \u7684\u8fb9\n\n\u7c7b\u4f3c\u7684\uff0c\u53ef\u4ee5\u5728\u4efb\u610f\u4e00\u4e2a\u70b9\u7ed3\u675f\uff0c\u6bcf\u4e2a\u70b9\u5411\u6c47\u70b9\u8fde\u4e00\u6761 $[0,inf]$ \u7684\u8fb9\n\n\u4e8e\u662f\u56fe\u5c31\u5efa\u597d\u5566\uff0c\u518d\u6765\u4e00\u904d\u6709\u6e90\u6c47\u4e0a\u4e0b\u754c\u6700\u5c0f\u6d41\u7684\u677f\u5b50\u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u9053\u9898\u4e86\n\n\u867d\u7136\u70b9\u6570\u662f $10^5$ \u633a\u5927\u7684\uff0c\u4f46\u662f\u8fb9\u7279\u522b\u7a00\u758f\uff0c\u7f51\u7edc\u6d41\u53ef\u4ee5\u6c34\u8fc7\u53bb\n\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e5+15;\nconst int maxm=2e6+5;\nconst int inf=0x3f3f3f3f;\nint n,m,S,T,num,s,t,x,y,cur[maxn],hd[maxn],cnt,dis[maxn],deg[maxn],tot;\nint read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch=='-')f=-1;\n\t\tch=getchar();\t\n\t}\n\twhile(isdigit(ch)){\n\t\tx=x*10+ch-48;\n\t\tch=getchar();\t\n\t}\n\treturn x*f;\n}\nstruct Edge{\n\tint nxt,to,val;\t\n}edge[maxm];\nvoid add(int u,int v,int w){\n\tedge[++cnt].nxt=hd[u];\n\tedge[cnt].to=v;\n\tedge[cnt].val=w;\n\thd[u]=cnt;\n\treturn ;\n}\nvoid make(int u,int v,int down,int up){\n\tdeg[u]-=down;\n\tdeg[v]+=down;\n\tadd(u,v,up-down);\n\tadd(v,u,0);\n\treturn ;\n}\nbool bfs(){\n\tmemset(dis,0,sizeof dis);\n\tqueue<int>q;\n\tq.push(S);\n\tcur[S]=hd[S];\n\tdis[S]=1;\n\twhile(!q.empty()){\n\t\tint u=q.front();\n\t\tq.pop();\n\t\tfor(int i=hd[u];i;i=edge[i].nxt){\n\t\t\tint v=edge[i].to;\n\t\t\tif((!dis[v])&&edge[i].val){\n\t\t\t\tdis[v]=dis[u]+1;\n\t\t\t\tcur[v]=hd[v];\n\t\t\t\tif(v==T)return true;\n\t\t\t\tq.push(v);\t\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\nint dfs(int u,int limit){\n\tif(u==T)return limit;\n\tint flow=0;\n\tfor(int i=cur[u];i&&flow<limit;i=edge[i].nxt){\n\t\tint v=edge[i].to;\n\t\tcur[u]=i;\n\t\tif(dis[v]==dis[u]+1&&edge[i].val){\n\t\t\tint ww=dfs(v,min(edge[i].val,limit-flow));\n\t\t\tif(!ww)dis[v]=0;\n\t\t\tedge[i].val-=ww;\n\t\t\tedge[i^1].val+=ww;\n\t\t\tflow+=ww;\n\t\t}\n\t}\n\treturn flow;\n}\nint dinic(){\n\tint r=0,flow=0;\n\twhile(bfs()){\n\t\twhile(flow=dfs(S,inf)){\n\t\t\tr+=flow;\t\n\t\t}\n\t}\n\treturn r;\n}\nint main(){\n\tn=read();\n\ts=0;\n\tt=n+1;\n\tS=n+2;\n\tT=n+3;\n\tcnt=1;\n\tfor(int i=1;i<=n-1;i++){\n\t\tx=read()+1;\n\t\ty=read()+1;\n\t\tmake(y,x,1,inf);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tmake(s,i,0,inf);\n\t\tmake(i,t,0,inf);\t\n\t}\n\tfor(int i=0;i<=n+1;i++){\n\t\tif(deg[i]>0){\n\t\t\tmake(S,i,0,deg[i]);\n\t\t}\n\t\telse make(i,T,deg[i],0);\n\t}\n\tmake(t,s,0,inf);\n\tdinic();\n\tint ans=edge[cnt].val;\n\tS=t;\n\tT=s;\n\tedge[cnt].val=edge[cnt^1].val=0;\n\tcout<<ans-dinic();\n\treturn 0;\n}\n```\n",
        "postTime": 1624420028,
        "uid": 232987,
        "name": "yangchenxiao",
        "ccfLevel": 9,
        "title": "P5258 [JSOI2013]\u65c5\u884c\u65f6\u7684\u56f0\u60d1"
    },
    {
        "content": "\n## \u9898\u89e3 JSOI2013 \u65c5\u884c\u65f6\u7684\u56f0\u60d1\n\n### \u9898\u9762\n\n[luogu5258](https://www.luogu.com.cn/problem/P5258)\n\n### \u89e3\u6790\n\n\u8003\u8651\u8d2a\u5fc3..\n\n\u968f\u4fbf\u94a6\u5b9a\u4e00\u4e2a\u6839.\u8bbe $d[x]=1/0$ \u8868\u793a\u539f\u6765\u7684\u8def\u5f84\u662f $fa->x$ \u8fd8\u662f $x->fa$\n\n\u7136\u540e\u8bbe $s[x][0/1]$ \u8868\u793a $\\sum\\limits_{fa[k]=x}[d[k]=0/1]$,\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u6ee1\u8db3 $d[k]=0/1$,$k$ \u662f $x$ \u513f\u5b50\u7684\u6570\u91cf.\n\n\u8003\u8651\u4e24\u6761\u8def\u5f84 $k1->x,x->k2$,$k1,k2$ \u4e3a $x$ \u513f\u5b50.\n\n\u8d2a\u5fc3\u5730\u60f3\u4e00\u60f3,\u80af\u5b9a\u8981\u4fee\u4e00\u6761 $k2->k1$ \u7684\u516c\u8def.\n\n\u4e8e\u662f\u5b50\u6811\u5185\u8981\u4fee\u7684\u516c\u8def\u6570\u5c31\u662f $\\min(s[x][0],s[x][1])$.\n\n\u7136\u540e\u5982\u679c $x$ \u662f\u6839\u8282\u70b9\u90a3\u5c31\u8981\u628a\u5269\u4e0b\u7684\u8def\u4fee\u6389,\u5426\u5219\u5c31\u4f20\u7ed9\u5b83\u7684\u7238\u7238,\n\n\u53cd\u6b63\u4e00\u4e2a\u70b9\u6216\u4e00\u6761\u8fb9\u90fd\u53ef\u4ee5\u88ab\u7ecf\u8fc7\u591a\u6b21.\n\n\u4f46\u662f\u8fd9\u662f\u8f83\u591a\u7684\u8def\u65b9\u5411\u4e0e $x$ \u5230 $fa$ \u7684\u65b9\u5411\u76f8\u540c\u7684\u60c5\u51b5,\n\n\u5982\u679c\u8f83\u591a\u7684\u8def\u7684\u65b9\u5411\u4e0e $x$ \u5230 $fa$ \u7684\u65b9\u5411\u76f8\u53cd,\u90a3\u5c31\u5fc5\u987b\u8981\u5728$x$ \u7684\u5b50\u6811\u5185\u89e3\u51b3.\n\n### code\n\n```cpp\n#include <iostream>\n#include <stdio.h>\n#include <cstring>\n#define ll long long\n#define filein(a) freopen(a\".cpp\",\"r\",stdin)\n#define fileout(a) freopen(a\".cpp\",\"w\",stdout);\nusing namespace std;\n\ninline int read(){\n\tint sum=0,f=1;char c=getchar();\n\twhile((c<'0'||c>'9')&&c!=EOF){if(c=='-') f=-1;c=getchar();}\n\twhile(c>='0'&&c<='9'&&c!=EOF){sum=sum*10+c-'0';c=getchar();}\n\treturn sum*f;\n}\n\nconst int N=100005;\nstruct edge{int to,next,f;}e[N<<1];\nint n,d[N],g[N],ans;\nint head[N],cnt=0;\n\ninline void add(int x,int y,int f){\n\te[++cnt]=(edge){head[x],y,f};head[x]=cnt;\t\n}\n\ninline void dfs(int x,int fa){\n\tint s[2]={0};\n\tfor(int i=head[x];i;i=e[i].to){\n\t\tint k=e[i].next;\n\t\tif(k==fa) continue;\n\t\td[k]=e[i].f;dfs(k,x);\n\t\ts[d[k]]+=g[k];\n\t}\n\tans+=min(s[0],s[1]);\n\tif(x==1) ans+=max(s[0],s[1])-min(s[0],s[1]);\n\telse if(s[d[x]]>s[d[x]^1]) g[x]=s[d[x]]-s[d[x]^1];\n\telse if(s[d[x]]<s[d[x]^1]) ans+=s[d[x]^1]-s[d[x]];\n\tg[x]=max(g[x],1);\n}\n\nint main(){\n\tn=read();\n\tfor(int i=1;i<n;i++){\n\t\tint x=read()+1,y=read()+1;\n\t\tadd(x,y,1);add(y,x,0);\n\t}\n\tdfs(1,0);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1581556167,
        "uid": 172304,
        "name": "zsq259",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5258 \u3010\u65c5\u884c\u65f6\u7684\u56f0\u60d1 \u3011"
    }
]
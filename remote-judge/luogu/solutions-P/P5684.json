[
    {
        "content": "\u5f88\u7b80\u5355\u7684\u6570\u6570\u5165\u95e8\u9898\uff0c\u6bd4 CSP-S Day2 T1 \u826f\u5fc3\u591a\u4e86\uff08  \n\n\u6ce8\u610f\u5230\u6bcf\u4e2a\u5b57\u7b26\u90fd\u662f\u6709\u6807\u53f7\u7684\uff0c\u6240\u4ee5\u975e\u56de\u6587\u4e32\u6570\u7b49\u4e8e $n!$ \u51cf\u53bb\u56de\u6587\u4e32\u6570\u3002  \n\u8bb0\u7b2c $i$ \u79cd\u5b57\u6bcd\u7684\u51fa\u73b0\u6b21\u6570\u4e3a $a_i\\ (i\\in[1,26])$\uff0c\u5982\u679c\u6709\u8d85\u8fc7 $1$ \u79cd $a_i$ \u4e3a\u5947\u6570\uff0c\u5219\u4e0d\u53ef\u80fd\u7ec4\u6210\u56de\u6587\u4e32\uff0c\u7b54\u6848\u4e3a $n!$\u3002\n\n\u4e3a\u4e86\u4e0b\u9762\u8868\u8ff0\u65b9\u4fbf\uff0c\u9ed8\u8ba4\u6240\u6709 $a_i$ \u90fd\u4e3a\u5076\u6570\u3002\n\n\u7531\u4e8e\u56de\u6587\u4e32\u662f\u5de6\u53f3\u5bf9\u79f0\u7684\uff0c\u6240\u4ee5\u53ea\u8003\u8651\u786e\u5b9a\u4e00\u8fb9\uff0c\u53e6\u4e00\u8fb9\u7684\u6bcf\u4e2a\u5b57\u6bcd\u90fd\u53ef\u4ee5\u5728\u5bf9\u5e94\u4f4d\u7f6e\u968f\u4fbf\u6392\u5217\uff08\u5f53\u7136\u5de6\u53f3\u53ef\u4ee5\u4e92\u6362\uff09\uff0c\u4e5f\u5c31\u662f $a_i!$ \u79cd\u3002\n\n\u6240\u4ee5\u5bf9\u4e8e\u5de6\u8fb9\u7684\u6bcf\u4e00\u79cd\u6392\u5217\uff0c\u8d21\u732e\u5c31\u662f\u6bcf\u4e2a $a_i!$ \u4e4b\u79ef\u3002\n\n\u90a3\u4e48\u73b0\u5728\u53ea\u9700\u8981\u7b97\u51fa\uff1a\u6bcf\u79cd\u5143\u7d20\u6709 $a_i/2$ \u4e2a\uff0c\u4e14**\u65e0\u6807\u53f7**\u7684\u6392\u5217\u6570\uff0c\u4e58\u4e0a\u9762\u7684\u8d21\u732e\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5982\u679c\u6ca1\u6709\u91cd\u590d\uff0c\u6392\u5217\u6570\u5f53\u7136\u662f $(n/2)!$\uff1b\u73b0\u5728\u6709\u91cd\u590d\u5143\u7d20\uff0c\u8981\u9664\u53bb\u6240\u6709\u91cd\u590d\u7684\u6392\u5217\uff0c\u4e5f\u5c31\u662f\n$$( n/2)!\\prod\\limits_{i=1}^{26}\\frac{1}{(a_i/2)!}$$  \n\u4e0d\u5acc\u9ebb\u70e6\u4e5f\u53ef\u4ee5\u7528 EGF \u6765\u63a8\u51fa\u8fd9\u4e2a\u7ed3\u679c\uff0c\u4e0d\u7528\u52a8\u8111\u5b50\uff08  \n\n\u6240\u4ee5\u6700\u7ec8\u7b54\u6848\u5c31\u662f  \n\n$$n!-\\left( (n/2)!\\prod\\limits_{i=1}^{26}\\frac{a_i!}{(a_i/2)!}\\right)$$\n\n\u4e0d\u8fc7\u8fd9\u662f $a_i$ \u5168\u90fd\u662f\u5076\u6570\u7684\u60c5\u51b5\u3002  \n\u5bf9\u4e8e\u6709\u4e00\u4e2a\u662f\u5947\u6570\u7684\u65f6\u5019\uff0c\u8bbe\u4e3a $x$\uff1b\u53ef\u4ee5\u4ece $x$ \u4e2d\u9009\u4e00\u4e2a\u653e\u5728\u4e2d\u95f4\uff0c\u6240\u4ee5\u53f3\u8fb9\u90a3\u90e8\u5206\u8981\u518d\u4e58 $x$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(n)$\u3002\n\n```cpp\n#include<cstdio> \n#include<algorithm>\n#include<cstring>\n#define ll long long\n#define N 2003\n#define reg register\n#define p 1000000007\nusing namespace std;\n\ninline int power(int a,int t){\n    int res = 1;\n    while(t){\n        if(t&1) res = (ll)res*a%p;\n        a = (ll)a*a%p;\n        t >>= 1;\n    }\n    return res;\n}\n\nint n,ans,dec,odd;\nchar a[N];\nint fac[N],ifac[N],cnt[26];\n\nint main(){\n    scanf(\"%d\",&n);\n    scanf(\"%s\",a+1);\n    ifac[0] = ifac[1] = fac[0] = fac[1] = 1;\n    for(reg int i=2;i<=n;++i) ifac[i] = fac[i] = (ll)fac[i-1]*i%p;\n    ifac[n] = power(fac[n],p-2);\n    for(reg int i=n-1;i>1;--i) ifac[i] = (ll)ifac[i+1]*(i+1)%p;\n    for(reg int i=1;i<=n;++i) ++cnt[a[i]-'a'];\n    for(reg int i=0;i<26;++i) odd += cnt[i]&1;\n    if(odd>1){\n        printf(\"%d\",fac[n]);\n        return 0;\n    }\n    odd = 1;\n    for(reg int i=0;i<26;++i)\n        if(cnt[i]&1) odd = cnt[i];\n    dec = (ll)fac[n>>1]*odd%p;\n    for(reg int i=0;i<26;++i) cnt[i] >>= 1;\n    for(reg int i=0;i<26;++i) dec = (ll)dec*fac[cnt[i]<<1]%p*ifac[cnt[i]]%p;\n    ans = (fac[n]-dec+p)%p;\n    printf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1574562621,
        "uid": 115864,
        "name": "NaCly_Fish",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5684 \u3010\u975e\u56de\u6587\u4e32\u3011"
    },
    {
        "content": "\u697c\u4e0b\u7684\u9898\u89e3\u5199\u7684\u5f88\u597d\uff0c\u5982\u679c\u4f5c\u4e3a\u4e00\u4e2a\u63d0\u9ad8\u7ec4\u9009\u624b\u4e0b\u9762\u7684\u9898\u89e3\u4e0d\u96be\u61c2\u7684\uff0c\u4f46\u662f\u7ed9\u666e\u53ca\u7ec4\u7684\u4eba\u6765\u770b\u7684\u8bdd\u8fd8\u662f\u6bd4\u8f83\u96be\u7406\u89e3\uff0c\u8fd9\u91cc\u6211\u5199\u4e00\u7bc7\u597d\u7406\u89e3\u7684\u9898\u89e3\u3002\n\n\u6211\u8ba4\u4e3a\u4e00\u4e2a\u597d\u7684\u9898\u89e3\u4e0d\u662f\u628a\u81ea\u5df1\u7684\u601d\u8def\u8f6c\u5316\u4e3a\u62bd\u8c61\u7684\u5f0f\u5b50\u8ba9\u540e\u8ba9\u522b\u4eba\u53bb\u7406\u89e3\u8fd9\u4e2a\u5f0f\u5b50\uff0c\u800c\u5e94\u8be5\u76f4\u63a5\u628a\u81ea\u5df1\u7684\u601d\u8def\u7528\u8bed\u8a00\u56fe\u50cf\u544a\u8bc9\u522b\u4eba\u3002\n\n\u6211\u4eec\u91cd\u65b0\u7406\u89e3\u4e00\u4e0b\u8fd9\u4e2a\u9898\u76ee\uff0c\u4f60\u670926\u79cd\u5b57\u7b26\uff0c\u7b2ci\u79cd\u5b57\u7b26\u6709$S[i]$\u4e2a\uff0c\u8ba9\u4f60\u7528\u8fd9\u4e9b\u5b57\u7b26\u7ec4\u6210\u5bf9\u79f0\u7684\u5b57\u7b26\u4e32\uff0c\u95ee\u4f60\u6709\u591a\u5c11\u79cd\u53ef\u80fd\u3002\n\n\u7136\u9e45\u9898\u76ee\u8981\u4f60\u6c42\u7684\u662f\u975e\u56de\u6587\u4e32\u7684\u4e2a\u6570\uff0c\u6240\u4ee5\u4f60\u53ea\u9700\u8981\u7528$n$\u4e2a\u5b57\u7b26\u80fd\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\u7684\u603b\u4e2a\u6570$sum$\u51cf\u53bb\u8fd9\u4e9b\u5b57\u7b26\u80fd\u7ec4\u6210\u7684\u56de\u6587\u4e32\u4e2a\u6570$ans$\u5c31\u662f\u7b54\u6848\n\n\u6211\u4eec\u5148\u6765\u6c42\u4e00\u4e0b$sum$\uff0c\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff0c\u4f60\u6709$n$\u4e2a\u4f4d\u7f6e$n$\u4e2a\u4eba\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u4e0d\u540c\u7684\u505a\u6cd5\uff0c\u5148\u8003\u8651\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u65f6\u6709$n$\u4e2a\u4eba\uff0c\u5219\u6709n\u603b\u53ef\u80fd\uff0c\u8003\u8651\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u65f6\u8fd8\u5269$n-1$\u4e2a\u4eba\uff0c\u6709$n-1$\u79cd\u53ef\u80fd\uff0c\u6240\u4ee5\u8fd9\u65f6\u7684\u65b9\u6848\u6570\u4e3a$sum=n*(n-1)$\uff0c\u8003\u8651\u5230\u6700\u540e\u4e00\u4e2a\u4f4d\u7f6e\u7684\u65f6\u5019\u53ea\u6709\u4e00\u4e2a\u4eba\u4e86\uff0c\u4e5f\u5c31\u662f\u4e00\u79cd\u53ef\u80fd\uff0c\u6240\u4ee5\u603b\u65b9\u6848\u6570\u4e3a$sum=n*(n-1)*(n-2)*...*1$\u3002\u4e5f\u5c31\u662f$sum$\u7684\u9636\u4e58$sum!$\uff0c\u4e0b\u9762\u6211\u7684\u4ee3\u7801\u91cc\u4e3ajs\u51fd\u6570\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u56de\u6587\u7684\u60c5\u51b5\u4e5f\u5c31\u662f\u5f53n\u4e3a\u5076\u6570\u65f6\uff0c\u6211\u4eec\u53ea\u8003\u8651\u5de6\u8fb9\u4e00\u534a\uff0c\u6b64\u65f6\u53f3\u8fb9\u4e00\u5b9a\u6709\u4e00\u4e2a\u4e0e\u4e4b\u5bf9\u5e94\u7684\u5b57\u7b26\u3002\u6240\u4ee5\u6211\u4eec\u5148\u8003\u8651\u628a\u8fd9\u4e9b\u5b57\u7b26\u4e24\u4e24\u914d\u5bf9\u8d77\u6765\u770b\u770b\u6709\u591a\u5c11\u79cd\u60c5\u51b5\uff0c\u8fd9\u4e2a\u50cf\u4e0a\u9762js\u51fd\u6570\u4e00\u6837\u81ea\u5df1\u624b\u63a8\u4e00\u4e0b\u628a\uff0c\u8fd9\u5728\u4e0b\u9762\u6211\u7684\u6211\u7684\u4ee3\u7801\u91cc\u4e3afind\u51fd\u6570\n\n\u7136\u540e\u6211\u4eec\u5728\u770b\u770b\u8fd9\u4e9b\u914d\u5bf9\u597d\u7684\u5b57\u7b26\u53ef\u4ee5\u7ec4\u6210\u591a\u5c11\u79cd\u7ec4\u5408\uff0c\u4e5f\u5c31\u662f\u8003\u8651n/2\u4e2a\u5b57\u7b26\u53ef\u4ee5\u7ec4\u6210\u591a\u5c11\u79cd\u53ef\u80fd\uff0c\u6b64\u65f6\u6bcf\u4e00\u79cd\u53ef\u80fd\u90fd\u6709\u53f3\u8fb9\u4e0e\u4e4b\u914d\u5bf9\u597d\u4e86\u7684\u5b57\u7b26\u5f62\u6210\u56de\u6587\u3002\n\n\u6700\u540e\u8fd8\u6709\u4e00\u4e2a\u5f53n\u4e3a\u5947\u6570\u65f6\u7684\u60c5\u51b5\uff0c\u8fd9\u662f\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u4e00\u5b9a\u6709\u4e00\u79cd\u5b57\u7b26\u662f\u4f1a\u843d\u5355\u7684\uff0c\u6211\u4eec\u53ea\u8981\u679a\u4e3e\u54ea\u4e00\u4e2a\u5b57\u7b26\u653e\u4e2d\u95f4\u7136\u540e\u6309\u7167n\u4e3a\u5947\u6570\u6765\u8ba1\u7b97\u5c31\u597d\u4e86\u3002\n\nps\uff1a\u6211\u60f3\u5410\u69fd\u4e00\u4e0b\u4eca\u5e74\u7684\u5165\u95e8\u7ec4\u9898\u76ee\u5fd2\u7b80\u5355\u4e86\u70b9\uff0c\u6ca1\u4ebaAK\u8bf4\u4e0d\u8fc7\u53bb\uff08\u53ef\u662f\u6ca1\u6709\u4ebaAK\uff09\uff0c\u6240\u4ee5\u62ffJXpj\u7701\u4e00\u7684\u5c0f\u4f19\u5b50\u4eec\u4e0d\u8981\u592a\u72c2\u554a\uff0c\u4f60\u4eec\u63a5\u89e6\u5230\u7684\u90fd\u662f\u5f88\u7b80\u5355\u7684\u9898\u3002\n\n\u6211\u4eec\u7684\u76ee\u6807\u662fnoi\uff01\uff01\uff01JX\u8981\u52a0\u6cb9\uff01\n\n\u4e0b\u9762\u4e0a\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint read() {\n\tregister int x=1,ans=0;register char ch=getchar();\n\twhile(ch<'0'||ch>'9') {if(ch=='-') x*=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){ans=(ans<<3)+(ans<<1)+ch-48;ch=getchar();}\n\treturn x*ans;\n}\n\nconst long long N=2005,MOD=1e9+7;\nlong long s[30],n,sum,ans;\n\nlong long js(int a) {\n\tlong long res=1;\n\tfor(register long long i=1;i<=a;++i) {\n\t\tres*=i; res%=MOD;\n\t}\n\treturn res;\n}\n\nlong long find(int x) {\n\tlong long res=1;\n\tfor(register long long i=1;x-i>0;i+=2) {\n\t\tres*=i*2; res%=MOD;\n\t}\n\tif(x%2) res=res*x%MOD;\n\treturn res;\n}\n\nint main() {\n\tn=read();\n\tsum=js(n);\n\tstring a;\n\tcin>>a;\n\tfor(register int i=0;i<n;++i) {\n\t\ts[a[i]-'a']++;\n\t}\n\tlong long k=0;\n\tfor(register int i=0;i<26;++i) {\n\t\tif(s[i]%2) ++k; \n\t}\n\tif(k>1) {printf(\"%lld\\n\",sum); return 0;}\n\tans=1; k=0;\n\tfor(register int i=0;i<26;++i) {\n\t\tans*=find(s[i]); ans%=MOD; k+=s[i]/2;\n\t}\n\tk=js(k);ans=(ans*k)%MOD;\n\tans=sum-ans;if(ans<0) ans+=MOD;\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1580102429,
        "uid": 92288,
        "name": "ChenHacker",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5684 \u3010[CSPJX2019]\u975e\u56de\u6587\u4e32\u3010\u6c11\u95f4\u6570\u636e\u3011\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u7684\u8ba1\u7b97\u65b9\u6cd5\u5df2\u7ecf\u88ab\u8bb2\u5f97\u5f88\u5b8c\u5584\u4e86\uff0c\n\n\u4f46\u5b9e\u73b0\u4e0a\u90fd\u7565\u663e\u9ebb\u70e6\u3002\n\n\u9996\u5148\u662f\u8fd9\u9053\u9898\u7684\u8ba1\u7b97\u516c\u5f0f\uff1a\n\n$ans\\gets n!-((\\dfrac{n}{2})!\\times \\prod\\limits_{i=1}^{26}\\dfrac{a_i!}{(\\frac{a_i}{2})!})$ \n\n\u5927\u5bb6\u5904\u7406 $\\dfrac{a_i!}{(\\frac{a_i}{2})!}$ \u65f6\uff0c\u90fd\u7528\u5230\u4e86\u4e58\u6cd5\u9006\u5143\uff0c\n\n\u4f46\u5b9e\u9645\u4e0a\uff0c\u8fd9\u9053\u9898\u538b\u6839\u7528\u4e0d\u5230\u9006\u5143\uff1a\n\n$\\because$ $x! \\gets \\prod\\limits_{i=1}^xi$\uff0c\n\n$\\therefore$ $a_i!\\gets \\prod\\limits_{j=1}^{a_i} j$\uff0c$(\\dfrac{a_i}{2})!\\gets \\prod\\limits_{j=1}^{\\left\\lfloor a_i\\div 2 \\right\\rfloor} j$\uff0c\n\n$\\therefore$ $\\dfrac{a_i!}{(\\frac{a_i}{2})!} \\gets  \\prod\\limits_{j=\\left\\lfloor a_i\\div 2 \\right\\rfloor +1}^{a_i} j$\uff0c\n\n\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4e0d\u4f7f\u7528\u4e58\u6cd5\u9006\u5143\u89e3\u51b3\u8fd9\u9053\u95ee\u9898\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2010;\nconst int MOD=1e9+7;\nint n;\nint s[26];\nchar x;\nint S(int x){//\u6392\u5217\n    long long ans=1;\n    for(int i=1;i<=x;i++)\n        ans=(ans*i)%MOD;\n    return ans;\n}\nint work(int x){\n    long long ans=1;\n    for(int i=x/2+1;i<=x;i++)//\u7701\u53bb\u4e58\u6cd5\u9006\u5143\u8ba1\u7b97\n        ans=(ans*i)%MOD;\n    return ans;\n}\nint main(){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n        cin>>x;\n        s[x-'a']++;\n    }\n    int cnt=0,ans=S(n);\n    for(int i=0;i<26;i++)\n        cnt+=s[i]%2;\n    if(cnt>1){\n        printf(\"%d\",ans);\n        return 0;\n    }\n    long long tot=1;\n    for(int i=0;i<26;i++)\n        tot=(tot*work(s[i]))%MOD;\n    tot=(tot*S(n/2))%MOD;\n    ans=(ans-tot+MOD)%MOD;\n    printf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1624368616,
        "uid": 261981,
        "name": "Jiyuu_no_Tsubasa",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5684 \u3010\u975e\u56de\u6587\u4e32\u3011"
    },
    {
        "content": "jx\u91cd\u8003\u7684\u9898\u6709\u70b9\u5c0f\u6c34\uff0c\u8fdewjy(\u683c\u6797\u96c6\u56e2\u8463\u4e8b\u957f\uff08\u4eca\u65e5\u5934\u6761\uff09)\u8fd9\u6837\u7684\u849f\u84bb\u90fd\u80fdAK\uff0c\u4e8e\u662f\u6211\u5c31\u5fc3\u8840\u6765\u6f6e~~\u9a91\u5b83\u53bb\u8d76\u96c6~~\u5199\u4e00\u7bc7\u9898\u89e3\u3002\n\n\n\n\n------------\n\n\u5bf9\u4e8e\u8fd9\u9898\u6211\u4eec\u53ef\u4ee5\u5148\u6c42\u51fa\u6240\u6709\u5b57\u6bcd\u5168\u6392\u5217\u6709\u591a\u5c11\u79cd\u4e0d\u540c\u7684\u65b9\u6848\u3002\n\n\u8fd9\u4e48\u4e00\u6765\u975e\u56de\u6587\u7684\u65b9\u6848\u6570\u5c31\u662f\u603b\u65b9\u6848\u6570\u51cf\u53bb\u56de\u6587\u7684\u65b9\u6848\u6570\u3002\n\n\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u5fc3\u7684\u6876\u6392\uff0c\u5148\u5224\u65ad\u4ed6\u4eec\u80fd\u4e0d\u80fd\u56de\u6587\u3002\u5982\u679c\u4e0d\u80fd\u56de\u6587\u76f4\u63a5\u8f93\u51fa\u603b\u65b9\u6848\u6570\u5c31\u884c\u4e86\u3002\n\n\u5982\u679c\u6709\u56de\u6587\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5148\u628a\u5947\u6570\u4e2a\u7684\u4e00\u4e2a\u653e\u5728\u771f\u4e2d\u592e\uff0c\u7136\u540e\u628a\u4ed6\u7684\u4e2a\u6570\u51cf\u53bb1\u3002\n\n\u7136\u540e\u628a\u6240\u6709\u5269\u4e0b\u7684\u5b57\u6bcd\u4e2a\u6570\u9664\u4ee52(\u56e0\u4e3a\u5982\u679c\u56de\u6587\u5de6\u8fb9\u786e\u5b9a\u4e86\uff0c\u53f3\u8fb9\u4e5f\u786e\u5b9a\u4e86\uff0c\u6240\u4ee5\u53ea\u8003\u8651\u5de6\u8fb9\u5c31\u53ef\u4ee5\u4e86)\u3002\n\n~~\u7136\u540e\u6839\u636e\u6211\u4eec\u8ba4\u771f\u7684\u590d\u4e60\u4e86\u521d\u8d5b\u77e5\u8bc6\u70b9\u5f97\u77e5~~\u3002\n\n\u8bbe\u6bcf\u4e2a\u5b57\u6bcd\u6709$a_i$\u4e2a\u3002\n\n\u90a3\u4e48\u65b9\u6848\u6570\u5c31\u662f:$\\frac{(a_1+a_2+a_3+......+a_n)!}{a_1!*a_2!*......*a_n!}$\n\n\u7531\u4e8e\u5b57\u6bcd\u539f\u672c\u7684\u4e0b\u6807\u4e0d\u540c\u7b97\u4e0d\u540c\u7684\u65b9\u6848\u3002\n\n\u6240\u4ee5\u8fd8\u8981\u4e58\u4ee5\u6bcf\u4e2a\u5b57\u6bcd\u4e2a\u6570\u7684\u5168\u6392\u5217\u4e2a\u6570\uff08\u662f\u603b\u5171\u7684\u4e2a\u6570\uff09\n\n\u7136\u540e\u4e00\u51cf\u518d\u9006\u5143\u53d6\u6a21\u4e86",
        "postTime": 1574581369,
        "uid": 175011,
        "name": "rfsfreffr",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5684 \u3010\u975e\u56de\u6587\u4e32\u3010\u6c11\u95f4\u6570\u636e\u3011\u3011"
    },
    {
        "content": "\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u9053\u9898\u548c[\u9053\u8def\u62c6\u9664P5683](https://www.luogu.com.cn/problem/P5683)\u6bd4\u8f83\u6709\u601d\u7ef4\u96be\u5ea6\uff0c[\u9053\u8def\u62c6\u9664\u7684\u9898\u89e3\u5df2\u7ecf\u5199\u8fc7\u4e86](https://www.luogu.com.cn/blog/sun-jia-zheng/solution-p5683)\uff0c\u597d\u4e86\u73b0\u5728\u8fdb\u5165\u6b63\u9898\u3002\n\n**\u601d\u8def**\uff1a\u8fd8\u662f**\u6b63\u96be\u5219\u53cd**\uff0c\u975e\u56de\u6587\u4e32\u4e0d\u662f\u592a\u597d\u6c42\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528**\u603b\u7684\u65b9\u6848\u6570\u51cf\u53bb\u56de\u6587\u4e32\u7684\u6570\u91cf**\u4e0d\u5c31\u884c\u4e86\u5417\uff1f\n\n\u603b\u65b9\u6848\u6570\u5f88\u597d\u6c42\u5c31\u662f$n!$\uff0c\u90a3\u56de\u6587\u4e32\u7684\u6570\u91cf\u600e\u4e48\u6c42\u5462\uff1f\n\n\u6211\u4eec\u60f3\u56de\u6587\u4e32\u80af\u5b9a\u662f**\u5bf9\u79f0**\u7684\uff0c\u6240\u4ee5**\u6bcf\u4e2a\u5b57\u6bcd\u90fd\u5e94\u8be5\u662f\u5076\u6570\u4e2a\uff0c\u7279\u6b8a\u60c5\u51b5\u4e0b\u6700\u591a\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bcd\u7684\u6570\u91cf\u662f\u5947\u6570\u4e2a**\uff0c\u5426\u5219\u5c31\u4e0d\u80fd\u7ec4\u6210\u56de\u6587\u4e32\uff0c\u76f4\u63a5\u8f93\u51fa\u603b\u65b9\u6848\u6570\u5c31\u884c\u4e86\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5**\u9884\u5904\u7406**\u51fa\u6bcf\u4e2a\u5b57\u6bcd\u51fa\u73b0\u7684\u4e2a\u6570$sum[i]$\u8868\u793a\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u5b57\u6bcd\u7684\u6570\u91cf\u662f**\u5947\u6570**\uff0c$sum[i]--$\u5c31\u884c\u4e86\uff0c\u56e0\u4e3a**\u90a3\u4e00\u4e2a\u5b57\u6bcd\u5fc5\u7136\u5728\u4e2d\u95f4**\u3002\n\n\u597d\u4e86\uff0c\u73b0\u5728\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u56de\u6587\u4e32\u7684\u6570\u91cf\u600e\u4e48\u6c42\u5462\uff0c\u5148\u6765\u770b\u4e00\u5f20\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/2id3207c.png)\n\n\u5982\u56fe\uff0c$n1$\u8868\u793a$a$\u51fa\u73b0\u7684\u6570\u91cf\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c$n26$\u8868\u793a$z$\u7684\u6570\u91cf\uff0c\u56e0\u4e3a\u56de\u6587\u4e32\u662f**\u5bf9\u79f0**\u7684\uff0c\u6240\u4ee5\u5de6\u8fb9\u6bcf\u4e2a\u5b57\u6bcd\u7684\u6570\u91cf\u90fd\u662f$n/2$\uff0c\u90a3\u95ee\u9898\u5c31\u53d8\u5f97\u7b80\u5355\u4e86\uff0c\u73b0\u5728\u5c31\u76f8\u5f53\u4e8e\u662f\u6c42\n\n$n1/2,n2/2...n26/2$\u80fd\u7ec4\u6210\u591a\u5c11\u4e32\u4e86\uff0c\u56e0\u4e3a**\u5de6\u8fb9\u4e00\u53d8\u53f3\u8fb9\u4e5f\u4f1a\u8ddf\u7740\u53d8\u3002**\n\n**\u6211\u4eec\u60f3**\uff0c\u6570\u91cf\u603b\u5171\u662f$n$\uff0c\u65b9\u6848\u6570\u662f$n!$\uff0c\u90a3\u6570\u91cf\u662f$n/2$\uff0c\u65b9\u6848\u6570\u4e0d\u5c31\u5e94\u8be5\u662f$\\frac{n}{2} !$\u5417\uff1f\n\n\u8fd8\u6709\u4e00\u70b9\u4e0d\u8981\u5fd8\u4e86\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u5b57\u6bcd\uff0c\u5047\u8bbe\u662f$a$\uff0c\u6211\u4eec\u90fd\u8981\u4ece$n$\u4e2a$a$\u4e2d\u9009\u51fa$\\frac{n}{2}$\u4e2aa\u653e\u5230\u5de6\u8fb9\uff0c\u5176\u4f59\u653e\u5230\u53f3\u8fb9\uff0c\u53d1\u73b0\u8fd9\u4e0d\u5c31\u662f**\u7ec4\u5408\u6570\u5b66**\u5417\uff1f\n\n[\u7ec4\u5408\u6570\u5b66\u4e0d\u4f1a\u7684\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\uff0c\u8fd9\u91cc\u53ea\u6709\u516c\u5f0f](https://zhidao.baidu.com/question/689879375452903724.html)\n\n\u90a3\u5230\u5e95\u662f$A$\u8fd8\u662f$C$\u5462\uff1f\n\n\u6211\u4eec\u60f3\u5de6\u8fb9\u52a8\uff0c\u53f3\u8fb9\u4e5f\u8ddf\u7740\u52a8\uff0c\u4f46\u662f**\u6bcf\u4e2a\u5b57\u6bcd\u53ef\u4ee5\u5bf9\u5e94\u540c\u7c7b\u7684\u5176\u4f59\u5b57\u6bcd**\uff0c\u4ec0\u4e48\u610f\u601d\u5462\uff0c\u89c1\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gn3xvkze.png)\n\n\u8fd8\u6709\u9898\u76ee\u4e5f\u8bf4\u4e86**\u6bcf\u4e2a\u5b57\u6bcd\u90fd\u6709\u81ea\u5df1\u7684\u7f16\u53f7**\uff0c\u6240\u4ee5\u80af\u5b9a\u662f$A$\u4e86\u3002\n\n\u6ce8\uff1a$A$\u7528\u4e8e\u6709\u5e8f\u53f7\uff0c$C$\u7528\u4e8e\u6ca1\u6709\u5e8f\u53f7\uff0c\u53ea\u8003\u8651\u4f4d\u7f6e\uff08\u5982\u679c\u8fd8\u4e0d\u7406\u89e3$A$\u548c$C$\u53ef\u4ee5\u53bb\u767e\u5ea6\uff09\u3002\n\n\u597d\u4e86\uff0c\u5206\u6790\u5230\u8fd9\u5c31\u53ef\u4ee5\u63a8\u51fa\u516c\u5f0f\u4e86\uff0c\u5efa\u8bae\u5927\u5bb6\u518d\u56de\u8fc7\u5934\u770b\u770b\u3002\n\n$\\Large n!-\\frac{n}{2}! * \\prod\\limits_{i=1}^{26}A(ni,\\frac{ni}{2}) * nx$\n\n$nx$\u662f\u90a3\u4e2a\u5947\u6570\u4e2a\u7684\u5b57\u6bcd\u7684\u4e2a\u6570\uff0c\u56e0\u4e3a\u4ed6\u4eec\u53ef\u4ee5\u8f6e\u6d41\u5728\u4e2d\u95f4\uff0c**\u5343\u4e07\u8981\u6ce8\u610f**\uff0c\u5982\u679c$nx==1$\u5c31\u4e0d\u8981\u4e58\u4e86\uff0c\u56e0\u4e3a-1\u4e4b\u540e\u5c31\u62100\u4e86\uff0c\u4e00\u4e58\u5c31\u6bc1\u4e86\u3002\n\n\u5982\u679c\u6ca1\u6709\u5947\u6570\u4e2a\u7684\u5b57\u6bcd$nx==1$\u5c31\u884c\u4e86\u3002\n\n\u6c42$A$\u7684\u65f6\u5019\u53ef\u4ee5\u7528**\u8d39\u9a6c\u5c0f\u5b9a\u7406**\u6c42**\u9006\u5143**\u3002\n\n$code$\uff1a\n\n```c\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int mod = 1e9 + 7;\nint n,sum[30],s;\nll jc[2010],ans = 1;\nchar a[2010];\nbool f;\nll q_pow(ll x,ll y)//\u7528\u8d39\u9a6c\u5c0f\u5b9a\u7406\u6c42\u9006\u5143\uff0c\u8981\u7528\u5230\u5feb\u901f\u5e42\u3002 \n{\n\tll ans = 1;\n\twhile(y)\n\t{\n\t\tif(y & 1) ans = ans * x % mod;\n\t\tx = x * x % mod;\n\t\ty >>= 1;\n\t}\n\treturn ans;\n}\nvoid getjc()//\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u9636\u4e58\u6570\u7ec4\u3002 \n{\n\tjc[0] = 1;\n\tfor(int i = 1;i <= n;i++) jc[i] = (ll)jc[i - 1] * i % mod;\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tscanf(\"%s\",a + 1);\n\tgetjc();\n\tfor(int i = 1;i <= n;i++)\n\tsum[a[i] - 'a' + 1]++;//\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u5b57\u6bcd\u51fa\u73b0\u7684\u4e2a\u6570\u3002 \n\tfor(int i = 1;i <= 26;i++)\n\tif(sum[i] != 0 && sum[i] % 2)//\u7edf\u8ba1\u6709\u6ca1\u6709\u5947\u6570\u4e2a\u5b57\u6bcd\u3002 \n\t{\n\t\tif(f)//\u5982\u679c\u6570\u91cf\u8fd8>1\uff0c\u4e00\u5b9a\u6ca1\u6cd5\u7ec4\u6210\u56de\u6587\u4e32\uff0c\u76f4\u63a5\u8f93\u51fan!\u3002 \n\t\t{\n\t\t\tprintf(\"%lld\",jc[n]);\n\t\t\treturn 0;\n\t\t} \n\t\tf = 1;\n\t\ts = sum[i]--;//\u5b57\u6bcd\u5947\u6570\u4e2a\u51fa\u73b0\u7684\u6b21\u6570-1\uff0c\u56e0\u4e3a\u90a3\u4e00\u4e2a\u5b57\u6bcd\u53ea\u80fd\u653e\u5230\u4e2d\u95f4\u3002 \n\t}\n\tfor(int i = 1;i <= 26;i++)//\u6c42A\u8981\u7528\u5230\u9006\u5143\u3002 \n\t{\n\t\tif(!sum[i]) continue;\n\t\tans *= (ll)jc[sum[i]] * q_pow(jc[sum[i] / 2],mod - 2) % mod;//\u9006\u5143\u3002 \n\t\tans %= mod;\n\t}\n\tans = ans * jc[n / 2] % mod;//\u516c\u5f0f\u3002 \n\tif(f) ans = ans * s % mod;//\u5982\u679c\u6709\u5947\u6570\u522b\u5fd8\u4e86\u4e58nx\uff0c\u4e5f\u5c31\u662fs\u3002 \n\tans = jc[n] - ans;\n\tif(ans < 0) ans += mod;//\u8fd9\u91cc\u8981\u6ce8\u610f\uff0cans\u6709\u53ef\u80fd\u662f\u8d1f\u6570\u3002 \n\tprintf(\"%lld\",ans);\n\treturn 0;\n} \n```\n~~/\u7ba1\u7406\u5458\u5927\u5927\u6c42\u8fc7\uff0c$thanks$/~~",
        "postTime": 1601904718,
        "uid": 351015,
        "name": "\u65ed\u65e5\u4e34\u7a97",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P5684 \u3010[CSPJX2019]\u975e\u56de\u6587\u4e32\u3010\u6c11\u95f4\u6570\u636e\u3011\u3011"
    },
    {
        "content": "\u867d\u8bf4\u6ca1\u6709\u8003\u8fc7\uff0c\u4f46\u505a\u8d77\u6765\u8fd8\u662f\u5f88\u7b80\u5355\uff08~~\u5c31\u662f\u6709\u5f88\u591a\u7ec6\u8282\u8981\u6ce8\u610f~~\uff09\u3002\n\n\u9996\u5148\u975e\u56de\u6587\u4e32\u7684\u4e2a\u6570\u4e0d\u597d\u6c42\uff0c\u60f3\u5230\u53ef\u4ee5\u6c42\u603b\u7684\u6392\u5217\u6570 sum \u548c\u56de\u6587\u4e32\u7684\u4e2a\u6570 ok\u3002\n\n\u603b\u7684\u6392\u5217\u6570\u5f88\u597d\u6c42\u5427\uff0c$sum=\\overset{n}{\\underset{i=1}{\\prod}}i$\u3002\n\n\u90a3\u56de\u6587\u4e32\u7684\u4e2a\u6570 ok \u5982\u4f55\u6c42\uff1f\n\n\u53ef\u4ee5\u5148\u7528\u4e00\u4e2a 0 \u5230 25 \u7684\u6876\u88c5\u4e0b\u6240\u6709\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570\u3002\n\n\u7136\u540e\u5224\u65ad\u5947\u5076\u3002\n\n\u5982\u679c\u5176\u4e2d\u5947\u6570\u7684\u4e2a\u6570\u5927\u4e8e 1 \u5c31\u76f4\u63a5\u8f93\u51fa sum\uff08\u56e0\u4e3a\u4e0d\u53ef\u80fd\u5b58\u5728\u56de\u6587\u4e32\uff09\u3002\n\n\u56e0\u4e3a\u5982\u679c n \u662f\u5076\u6570\uff0c\u90a3\u5c31\u4e00\u5b9a\u4e0d\u80fd\u6709\u5947\u6570\u4e2a\u6570\u7684\u5b57\u7b26\uff0c\u4e14\u4e00\u5b9a\u4e0d\u53ef\u80fd\u53ea\u6709 1 \u4e2a\u5947\u6570\u4e2a\u6570\u7684\u5b57\u7b26\uff1b\u5426\u5219\uff0c\u90a3\u5c31\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u4e14\u4e00\u5b9a\u4e0d\u53ef\u80fd\u4e00\u4e2a\u6ca1\u6709\u3002\n\n\u660e\u663e\u53ea\u8981\u6211\u4eec\u77e5\u9053\u7684\u5de6\u534a\u8fb9\u7684\u5b57\u7b26\u7684\u6392\u5217\uff0c\u53f3\u534a\u8fb9\u7684\u5b57\u7b26\u6392\u5217\u5c31\u662f\u552f\u4e00\u786e\u5b9a\u7684\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053 $\\overset{25}{\\underset{i=0}{\\sum}}C_{cnt_i}^{\\lfloor\\frac{cnt_i}{2}\\rfloor}$\u3002\n\n\u4f46\u662f\u56e0\u4e3a\u6709\u53ef\u80fd n \u6709\u53ef\u80fd\u662f\u5947\u6570\uff0c\u9700\u8981\u4e00\u4e2a\u5b57\u7b26\u586b\u5145\u6b63\u4e2d\u95f4\u3002\n\n\u6240\u4ee5\u8981\u7279\u5224\u4e00\u4e0b\u5f53 n \u4e3a\u5947\u6570\u65f6\uff0c$ok=ok\\times cnt_k-\\lfloor\\frac{cnt_k}{2}\\rfloor$\u3002\n\n\u5176\u4e2d k \u4e3a\u591a\u51fa\u4e00\u4e2a\u5b57\u7b26\u7684\u90a3\u79cd\u5b57\u7b26\u7684\u7f16\u53f7\u3002\n\n\u56e0\u4e3a\u5728\u534a\u8fb9\u4e2d\u5b57\u7b26\u4f4d\u7f6e\u53ef\u4ee5\u8c03\u6362\uff0c\u6240\u4ee5 ok \u8fd8\u8981\u4e58\u4e0a $\\overset{\\lfloor\\frac{n}{2}\\rfloor}{\\underset{i=1}{\\prod}}i$\u3002\n\n\u800c ok \u65f6\u56de\u6587\u4e32\u7684\u4e2a\u6570\uff0c\u6240\u4ee5 $sum-ok$ \u5c31\u662f\u6700\u7ec8\u7b54\u6848\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define mod 1000000007ll\nusing namespace std;\n#define ll long long\nint n,res;\nll sum(1ll),ok(1ll);\nchar ch[2005];\nint cnt[26];\n#undef ll\nint main(){\n    std::ios::sync_with_stdio(0);\n    cin.tie(0);cout.tie(0);\n    cin>>n>>ch;\n    for(int i(2);i<=n;++i) sum=(sum*i)%mod;\n    for(int i(0);i<n;++i) ++cnt[ch[i]-'a'];\n    for(int i(0);i<26;++i)\n        if(cnt[i]&1) ++res;\n    if(res>1) cout<<sum<<endl;\n    else{\n        for(int i(0);i<26;++i){\n            for(int j(cnt[i]-(cnt[i]>>1)+1);j<=cnt[i];++j)\n                ok=(ok*j)%mod;\n            if(cnt[i]&1) ok=(ok*(cnt[i]-(cnt[i]>>1)))%mod;\n        }\n        for(int i(n>>1);i>=2;--i) ok=(ok*i)%mod;\n        cout<<(sum-ok+mod)%mod<<endl;\n    }\n    return 0;\n}\n```\n\n\u4e0d\u8981\u5fd8\u8bb0\u53d6\u6a21\u548c\u5f00 long long \u5440\uff01QWQ",
        "postTime": 1649337768,
        "uid": 554574,
        "name": "gyyyyx",
        "ccfLevel": 0,
        "title": "[CSP-J2019 \u6c5f\u897f] \u975e\u56de\u6587\u4e32"
    },
    {
        "content": "## P5684\u9898\u89e3\n### \u5199\u5728\u524d\u9762\n\u6ce8\u610f\uff1a\u672c\u7bc7\u9898\u89e3\u7740\u91cd\u70b9\u5728\u4e8e\u8bb2\u89e3\u6613\u9519\u70b9\n\n[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P5684)\n\n\u8fd9\u662f\u4e00\u9053\u8003\u7ec6\u5fc3\u7684\u9898\u76ee\u3002\n\nUpdate : $\\LaTeX$ \u4e0e\u6c49\u5b57\u4e4b\u95f4\u8865\u5145\u7a7a\u683c\uff0c\u5b8c\u5584\u516c\u5f0f\n### \u6b63\u6587\n**\u9898\u76ee\u63cf\u8ff0**\n\n\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6c42\u6b64\u5b57\u7b26\u4e32\u7684\u5b57\u7b26\u4e00\u5171\u53ef\u4ee5\u7ec4\u6210\u591a\u5c11\u975e\u56de\u6587\u5b57\u7b26\u4e32\uff08\u5168\u90e8\u7528\u4e0a\uff09\n\n**\u5751\u70b91**:\u6bcf\u4e00\u4e2a\u5b57\u7b26\u90fd\u6709\u5bf9\u5e94\u7684\u540d\u79f0\u53ca\u7f16\u53f7\uff0c\u8bf4\u660e**\u6570\u503c\u76f8\u540c\u7684\u5b57\u7b26\u4e5f\u662f\u4e0d\u540c\u7684**\n\n**\u601d\u8def**\n\n\u975e\u56de\u6587\u5b57\u7b26\u4e32\u6570\u91cf = \u5168\u90e8\u5b57\u7b26\u4e32\u6570\u91cf - \u56de\u6587\u5b57\u7b26\u4e32\u6570\u91cf\n\n\u5168\u90e8\u5b57\u7b26\u4e32\u6570\u91cf\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4e00\u4e2a\u5168\u6392\u5217: $n!$\n\n\u800c\u56de\u6587\u5b57\u7b26\u4e32\u6570\u91cf\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\uff1a\n\n\u6311\u9009\u5b8c\u5de6\u8fb9\u4e00\u534a\u6570\u91cf\u7684\u5b57\u7b26\uff0c\u5728\u751f\u6210\u65f6\u5411\u53f3\u5bf9\u79f0\u5373\u53ef\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u628a\u6bcf\u4e00\u4e2a\u5b57\u7b26\u53d6\u4e00\u534a\u6570\u91cf\u5728\u5de6\u8fb9\u6392\u5217\u5373\u53ef\u3002\n\n\u5982\u679c\u8bb0\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5b57\u7b26 $c$ ,\u5b83\u7684\u51fa\u73b0\u6b21\u6570\u4e3a $sum_c$\n\n\u5219\u56de\u6587\u4e32\u6b21\u6570\u4e3a:\n\n$$C_{len/2}^{sum_{s[1]}} \\times C_{len/2 - sum_{s[1]}}^{sum_{s[2]}} \\times C_{len/2 - sum_{s[1]}- sum_{s[2]}}^{sum_{s[3]}}$$\n$$...$$\n$$C_{len/2 - sum_{s[1]}- sum_{s[2]}- sum_{s[3]} -...-sum_{s[n-1]}}^{sum_{s[n]}}$$\n\n(\u4ee5\u4e0a \" $/2$ \" \u5747\u4ee3\u8868\u4e0b\u53d6\u6574)\n\n**\u5751\u70b92**: $sum_c$ \u7684\u503c\u6709\u53ef\u80fd\u4e0d\u4e3a\u5076\u6570\u3002\n\n\u5f53\u6709\u4e00\u4e2a $sum_c$ \u7684\u503c\u4e3a\u5947\u6570\u65f6\uff0c\u5c31\u628a\u591a\u51fa\u6765\u7684\u653e\u5728\u4e2d\u95f4\u3002\n\n\u4f46\u662f\u5f53\u6709\u5927\u4e8e\u7b49\u4e8e2\u4e2a\u7684 $sum_c$ \u7684\u503c\u65f6\uff0c\u5c31\u6ca1\u6709\u8db3\u591f\u7684\u4f4d\u7f6e\u4e86\uff0c\u65e0\u6cd5\u6784\u9020\u56de\u6587\u5f0f\uff0c\u76f4\u63a5\u7279\u5224\u8f93\u51fa $n!$ \u3002\n\n**\u5751\u70b93**: \u4e0e\u5751\u70b91\u76f8\u4f3c\uff0c\u6bcf\u4e00\u4e2a\u5b57\u7b26\u90fd\u662f\u672c\u8d28\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u5e94\u8be5\u5c06\u4e0a\u5f0f\u6539\u4e3a:\n\n$$A_{len/2}^{sum_{s[1]}} \\times A_{len/2 - sum_{s[1]}}^{sum_{s[2]}} \\times A_{len/2 - sum_{s[1]}- sum_{s[2]}}^{sum_{s[3]}}$$\n$$...$$\n$$A_{len/2 - sum_{s[1]}- sum_{s[2]}- sum_{s[3]} -...-sum_{s[n-1]}}^{sum_{s[n]}}$$\n\n\u7136\u540e\u7b54\u6848\u5c31\u662f $n!$ \u51cf\u53bb\u4e0a\u5f0f\u7684\u503c\u4e86\u3002\n\n**\u5751\u70b94**: \u7531\u4e8e\u9898\u76ee\u6709\u53d6\u6a21\u64cd\u4f5c\uff0c\u6240\u4ee5\u53d6\u6a21\u540e\u7684\u6570\u5927\u5c0f\u5173\u7cfb\u53ef\u80fd\u53d1\u751f\u6539\u53d8\u3002\n\n\u8bdd\u53e5\u8bdd\u8bf4\uff0c $n!$ \u53d6\u6a21\u540e\u7684\u503c\u53ef\u80fd\u6bd4\u4e0a\u5f0f\u8fd8\u5c0f\u3002\n\n\u8fd8\u9700\u8981\u7279\u5224\u5c0f\u4e8e\u7684\u60c5\u51b5\uff08\u6ca1\u5224\u65ad\u662f50\u5206\uff09\u3002\n\n### Code\n\n$A$ \u8fd0\u7b97\u7528[\u9006\u5143](https://www.luogu.com.cn/problem/P3811)\u5b9e\u73b0\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int mod = 1e9 + 7;\nconst int maxn = 2e3 + 5;\n\nint len;\nstring s;\nint sum[30];\nint num;\nint nn;\nint fac[maxn];\n\nint pow(int x,int y)\n{\n\tint cnt = 1;\n\twhile(y)\n\t{\n\t\tif(y & 1)\n\t\t{\n\t\t\tcnt *= x;\n\t\t\tcnt %= mod;\n\t\t}\n\t\tx *= x;\n\t\tx %= mod;\n\t\ty >>= 1;\n\t}\n\treturn cnt;\n}\n\nint C(int n,int m)\n{\n\tif(n == 0)\n\t\treturn 1;\n\tint ans = 1;\n\tfor(int i = m;i >= m - n + 1;i--)\n\t\tans *= i,ans %= mod;\n\treturn ans * pow(fac[n],mod - 2) % mod;\n}\n\nsigned main()\n{\n\tcin >> len;\n\tcin >> s;\n\tfac[0] = fac[1] = 1;\n\tfor(int i = 2;i <= len;i++)\n\t\tfac[i] = fac[i - 1] * i % mod;\n\tfor(int i = 0;i < len;i++)\n\t\tsum[(s[i] - 'a') + 1]++;\n\tfor(int i = 1;i <= 26;i++)\n\t{\n\t\tif(sum[i] % 2 == 1)\n\t\t\tnum++;\n\t}\n\tif(num >= 2)\n\t{\n\t\tcout << fac[len];\n\t\treturn 0;\n\t}\n\tnn = len / 2;\n\tnum = 1;\n\tfor(int i = 1;i <= 26;i++)\n\t{\n\t\tif(nn == 0)\n\t\t\tbreak;\n\t\tnum *= C(sum[i] / 2,nn);\n\t\tnum %= mod;\n\t\tnum *= fac[sum[i]];\n\t\tnum %= mod;\n\t\tnn -= sum[i] / 2;\n\t}\n\tcout << (fac[len] - num < 0 ? fac[len] - num + mod : fac[len] - num);\n\treturn 0;\n}\n```",
        "postTime": 1634311801,
        "uid": 413301,
        "name": "Digital_Sunrise",
        "ccfLevel": 7,
        "title": "P5684\u9898\u89e3"
    },
    {
        "content": "## \u601d\u8def\n\n\u56e0\u4e3a\u8fd9\u4e00\u9053\u9898\u6bcf\u4e2a\u5b57\u6bcd\u90fd\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u4e00\u5171\u6709 $ n ! $ \u79cd\u6392\u5217\u65b9\u6cd5\u3002\u63a5\u4e0b\u6765\u51cf\u53bb\u56de\u6587\u4e32\u7684\u6570\u91cf\u5373\u53ef\u3002\n\n\u5982\u679c\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u56de\u6587\u4e32\uff0c\u90a3\u4e48\u91cc\u9762\u5b57\u7b26\u7684\u6570\u91cf\u8981\u4e48\u90fd\u662f\u5076\u6570\uff0c\u8981\u4e48\u53ea\u6709\u4e00\u4e2a\u5947\u6570\u3002\u6240\u4ee5\u6211\u4eec\u7edf\u8ba1\u6bcf\u4e2a\u5b57\u7b26\u51fa\u73b0\u7684\u6b21\u6570 $  c n t _ { i } $ \u3002\u5982\u679c\u51fa\u73b0\u4e86\u4e24\u6b21\u5373\u4ee5\u4e0a\u7684\u5947\u6570\uff0c\u90a3\u4e48\u76f4\u63a5\u8f93\u51fa $ n ! $ \u3002\n\n\u53cd\u4e4b\uff0c\u6211\u4eec\u53ea\u8003\u8651\u5de6\u8fb9\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5b57\u7b26\uff0c\u5b83\u7684\u65b9\u6cd5\u6570\u4e0d\u80fd\u91cd\u590d\uff0c\u6240\u4ee5\u6709\n\n$$ \\frac { c n t _ { i  } ! } { \\left \\lfloor   \\frac { c n t _ { i } } { 2 }   \\right \\rfloor ! } $$\n\n\u79cd\u65b9\u6848\u3002\n\n\u56e0\u4e3a\u540c\u4e00\u8fb9\u53ef\u4ee5\u7ffb\u8f6c\uff0c\u6240\u4ee5\u7b54\u6848\u8981\u4e58\n\n$$ \\left \\lfloor \\frac { n } { 2 }   \\right \\rfloor ! $$\n\n\u6240\u4ee5\u7b54\u6848\u8868\u793a\u4e3a\n\n$$ n ! - \\frac { c n t _ { i  } ! } { \\left \\lfloor   \\frac { c n t _ { i } } { 2 }   \\right \\rfloor ! } \\left \\lfloor \\frac { n } { 2 }   \\right \\rfloor ! $$\n\n\u5bf9\u4e8e\u8fd9\u91cc\u7684\u9664\u6cd5\uff0c\u5176\u5b9e\u6ca1\u6709\u5fc5\u8981\u7528\u4e58\u6cd5\u9006\u5143\uff0c\u56e0\u4e3a\u5c0f\u5b66\u7ec4\u4e0d\u8003\u4e58\u6cd5\u9006\u5143\u3002\n\n\u6ce8\u610f\u53d6\u6a21\uff01\n\n",
        "postTime": 1660137134,
        "uid": 377434,
        "name": "tian_jun_cheng",
        "ccfLevel": 0,
        "title": "P5684 [CSP-J2019 \u6c5f\u897f] \u975e\u56de\u6587\u4e32"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8\u3002](https://www.luogu.com.cn/problem/P5684)\n\n## \u9898\u610f\u7b80\u8ff0\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $s$\uff0c\u6c42\u5c06 $s$ \u91cd\u6392\u540e $s$ \u4e3a\u975e\u56de\u6587\u4e32\u7684\u603b\u6570\u5bf9 $p=10^9+7$ \u53d6\u6a21\u7684\u7ed3\u679c\u3002\n## \u9898\u76ee\u5206\u6790\n\u6b63\u96be\u5219\u53cd\u6613\uff0c\u53ef\u4ee5\u8003\u8651\u5c06 $s$ \u6240\u6709\u5168\u6392\u5217\u7684\u4e2a\u6570\u4e0e\u6240\u6709\u7684\u56de\u6587\u4e32\u76f8\u51cf\u3002\n\n\u5168\u6392\u5217\u7684\u4e2a\u6570\u5f88\u7b80\u5355\uff0c\u662f $n!$\u3002\n\n\u9996\u5148\u5224\u65ad $s$ \u4e2d\u7684\u5b57\u7b26 $\\texttt{a}$ \u81f3 $\\texttt{z}$ \u7684\u6570\u91cf\uff0c\u53ef\u4ee5\u5f00\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\uff0c\u4ee5 $t_i$ \u8bb0\u5f55\u5b57\u7b26\u5728\u5b57\u6bcd\u8868\u4e2d\u6392\u5e8f\u540e\u4e3a\u7b2c $i$ \u4e2a\u7684\u4e2a\u6570\u3002\u5728\u5176\u4e2d\u7684\u5947\u6570\u4e2a\u6570 $m$ \u5982\u679c\u8d85\u8fc7\u4e86 $1$\uff0c\u5fc5\u7136\u65e0\u6cd5\u7ec4\u6210\u56de\u6587\u4e32\uff0c\u6b64\u65f6\u56de\u6587\u4e32\u4e2a\u6570\u4e3a $0$\u3002\u5426\u5219\u7b54\u6848\u5982\u679c\u4e0d\u8003\u8651\u91cd\u590d\u7684\u6392\u5217\uff0c\u5c31\u662f $(\\lfloor\\dfrac{n}{2}\\rfloor)!$\uff0c\u800c\u5bf9\u4e8e\u4efb\u610f\u7684\u5b57\u7b26\uff0c\u5b83\u7684\u91cd\u590d\u6392\u5217\u603b\u6570\u8981\u53bb\u6389\uff0c\u4e5f\u5c31\u662f\u4e58\u4ee5 $\\dfrac{t_i!}{(\\lfloor\\tfrac{t_i}{2}\\rfloor)!}$\u3002\u6240\u4ee5\u8fd9\u65f6\u6700\u7ec8\u7684\u7b54\u6848\u4e3a\uff1a\n\n$$n!-(\\lfloor\\dfrac{n}{2}\\rfloor)!\\prod_{i=1}^{26}\\dfrac{t_i!}{(\\lfloor\\frac{t_i}{2}\\rfloor)!}$$\n## \u4ee3\u7801\u5b9e\u73b0\n\u5728\u8ba1\u7b97 $\\dfrac{t_i!}{(\\lfloor\\frac{t_i}{2}\\rfloor)!}$ \u65f6\u9700\u8981\u4f7f\u7528\u4e58\u6cd5\u9006\u5143\uff0c\u5b9e\u73b0\u4e0a\u4e3b\u8981\u6709 $\\text{exgcd}$ \u548c\u8d39\u9a6c\u5c0f\u5b9a\u7406\u7b49\u3002\n\n[\u5173\u4e8e\u4f7f\u7528 $\\text{exgcd}$ \u548c\u8d39\u5c0f\u8ba1\u7b97\u4e58\u6cd5\u9006\u5143\u7684\u8d44\u6599\u3002](https://jpb.blog.luogu.org/fei-xiao-yu-exgcd-qiu-sheng-fa-ni-yuan)\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst long long p=1e9+7;\nint a[27],n;\nlong long quickpow(long long a,long long b){\n    long long ans=1;\n    while(b){\n        if(b&1){\n            ans=ans*a%p;\n        }\n        a=a*a%p;\n        b>>=1;\n    }\n    return ans;\n}\nlong long niyuan(int k){\n    return quickpow(k,p-2);\n}\nlong long A(int n,int m){\n    long long ans=1;\n    for(int i=n;i>=n-m+1;--i)ans=ans*i%p;\n    return ans;\n}\nint main(){\n    long long sum=1,ans=1,flag=0;\n    cin>>n;\n    sum=A(n,n);\n    for(int i=0;i<n;++i){\n        char ch;\n        cin>>ch;\n        a[ch-'a'+1]++;\n    }\n    for(int i=1;i<=26;++i){\n        if(a[i]%2){\n            flag++;\n        }\n    }\n    if(flag>=2){\n        ans=0;\n    }\n    else {\n        ans=A(n/2,n/2);\n        for(int i=1;i<=26;++i){\n            ans=ans*A(a[i],a[i])%p*niyuan(A(a[i]/2,a[i]/2))%p;\n        }\n    }\n    cout<<((sum-ans)%p+p)%p;\n    return 0;\n}\n```",
        "postTime": 1656148574,
        "uid": 678965,
        "name": "EXCRT",
        "ccfLevel": 0,
        "title": "P5684 [CSP-J2019 \u6c5f\u897f] \u975e\u56de\u6587\u4e32 \u9898\u89e3"
    },
    {
        "content": "# \u601d\u8def\r\n\u8fd9\u662f\u4e00\u9053\u6570\u5b66\u9898\uff0c\u65e2\u7136\u975e\u56de\u6587\u4e32\u4e0d\u597d\u6c42\uff0c\u90a3\u53ef\u4ee5\u7528\u603b\u65b9\u6848\u6570\u51cf\u53bb\u56de\u6587\u4e32\u7684\u6570\u91cf\uff0c\u56de\u6587\u4e32\u662f\u6709\u4e00\u4e9b\u597d\u7684\u6027\u8d28\u7684\uff0c\u6b63\u7740\u8bfb\u53cd\u7740\u8bfb\u90fd\u4e00\u6837\uff0c\u4e5f\u5c31\u662f\u5bf9\u79f0\u6027\uff0c\u5229\u7528\u8fd9\u4e2a\u6027\u8d28\uff0c\u505a\u51fa\u4ee5\u4e0b\u63a8\u5bfc\uff1a\r\n\r\n\u603b\u6392\u5217\u65b9\u6848\u4e3a\uff1a$n!$\uff0c\u5b9e\u8d28\u5c31\u662f\u5168\u6392\u5217\u3002\r\n\u56de\u6587\u4e32\u5de6\u534a\u8fb9\u7684\u6392\u5217\u65b9\u6848\u6570\uff1a$\\frac{n}{2}!$ \uff0c\u540c\u4e0a\u3002\r\n\u6839\u636e\u6392\u5217\u7ec4\u5408\uff0c\u628a $\\frac{n}{2}$ \u4e2a\u5b57\u7b26\u653e\u5728 $n$ \u4e2a\u4f4d\u7f6e\u91cc\uff0c\u4e5f\u5c31\u662f\u76f8\u5f53\u4e8e\u628a\u4e00\u4e9b\u5143\u7d20\u7684\u4e00\u534a\u653e\u5728\u8fd9\u4e9b\u5143\u7d20\u6570\u91cf\u7684\u4f4d\u7f6e\u4e0a\uff0c\u663e\u7136\u8fd9\u662f\u6392\u5217\uff0c\u7136\u540e\u603b\u5171\u4e8c\u5341\u516d\u4e2a\u5b57\u6bcd\uff0c\u90fd\u8981\u6709\u7ec4\u5408\u3002\u5f97\u5230\u975e\u56de\u6587\u4e32\u7684\u603b\u6392\u5217\u65b9\u5f0f\u4e3a\uff08\u56e0\u4e3a\u8fd9\u4e2a\u662f\u65e0\u5e8f\u7684\uff0c\u6240\u4ee5\u7528\u6392\u5217\uff09\uff1a\r\n$$n!-\\frac{n}{2}! \\times  \\prod \\limits_ {i=1}^{26}\\mathrm{A}_{s_i}^{\\frac{s_i}{2}}\r\n $$\r\n# \u6ce8\u610f\u4e8b\u9879&\u5e38\u89c1\u9519\u8bef\u539f\u56e0\r\n- WA on #2\uff0c#8\uff0c\u8bf7\u6ce8\u610f\u4f60\u7684\u516c\u5f0f\u662f\u4e0d\u662f\u5199\u9519\u4e86\u3002\r\n- \u5927\u7ea2\u5927\u7d2b\uff0c\u8bf7\u6ce8\u610f\u4f60\u7684\u6a21\u6570\u662f\u4e0d\u662f\u6ca1\u6709\u521d\u59cb\u5316\uff0c\u53e6\u5916\u770b\u770b\u6570\u7ec4\u4e3a\u4e86\u8282\u7701\u800c\u5f00\u5c0f\u4e86\u4e00\u4e2a\u3002\r\n- WA on #3\uff0c#5\uff0c#6\uff0c#7\uff0c#9\uff0c\u8fd9\u4e2a\u6ca1\u6709\u522b\u7684\u65b9\u6cd5\uff0c\u53ea\u80fd\u628a\u516c\u5f0f\u5206\u5f00\u5199\uff0c\u653e\u5728\u4e00\u8d77\u4f1a\u5bfc\u81f4\u6ea2\u51fa\u3002\r\n- \u5bf9\u4e8e\u9006\u5143\u7684\u89e3\u51b3\uff0c\u53ea\u9700\u5728\u7eb8\u4e0a\u5199\u4e00\u4e0b\uff0c\u5c31\u80fd\u53d1\u73b0\u53ef\u4ee5\u7ea6\u5206\uff0c\u8fd8\u662f\u4e00\u4e2a\u8fde\u4e58\uff0c\u5177\u4f53\u89c1\u4ee3\u7801\u3002\r\n# \u4ee3\u7801\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\n#define int long long\r\nconst int mod=1e9+7;\r\nint s[26];\r\nint fac(int n){\r\n\tlong long cnt=1;\r\n\tfor(int i=1;i<=n;i++)cnt=(cnt*i)%mod;\r\n\treturn cnt;\r\n}\r\nint fact(int n){\r\n\tlong long cnt=1;\r\n\tfor(int i=n/2+1;i<=n;i++)cnt=(cnt*i)%mod;\r\n\treturn cnt;\r\n}\r\nsigned main(){\r\n\tint n;cin>>n;\r\n\tfor(int i=1;i<=n;i++){\r\n\t\tchar x;cin>>x;\r\n\t\ts[x-'a']++;\r\n\t}\r\n\tint cnt=0,ans=fac(n);\r\n\tfor(int i=0;i<26;i++)if(s[i]%2==1)cnt++;\r\n\tif(cnt>1){\r\n\t    cout<<ans;return 0;}\r\n\telse{\r\n\t\tlong long cnt2=1;\r\n\t\tfor(int i=0;i<26;i++)cnt2=(cnt2*fact(s[i]))%mod;\r\n\t\tcnt2=cnt2*fac(n/2)%mod;\r\n\t\tcout<<(ans-cnt2+mod)%mod;\r\n\t\t\r\n\t}\r\n\treturn 0; \r\n}\r\n```\r\n",
        "postTime": 1678166700,
        "uid": 529458,
        "name": "_xyz_",
        "ccfLevel": 0,
        "title": "\u975e\u56de\u6587\u4e32"
    },
    {
        "content": "## \u9898\u76ee\u63cf\u8ff0\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P5684)\n\n## \u601d\u8def\u7b80\u8ff0\n\n\u524d\u7f6e\u829d\u58eb\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u5e8f\u5217\uff0c\u5206\u522b\u6709 $m_1$ \u4e2a $x_1$\uff0c$m_2$ \u4e2a $x_2$\u2026\u2026$m_n$ \u4e2a $x_n$\uff0c\u5219\u5b83\u7684\u4e0d\u540c\u7684\u6392\u5217\u4e2a\u6570\u6709 $\\prod_{i=1}^nC_{\\sum_{j=i}^nm_j}^{m_i}$ \u4e2a\u3002\n\n\u5bf9\u4e8e\u8fd9\u9898\uff0c\u6211\u4eec\u5148\u5047\u8bbe\u76f8\u540c\u5b57\u7b26\u662f\u76f8\u540c\u7684\u3002(\u76f8\u540c\u5b57\u7b26\u4e4b\u95f4\u4e0d\u5b58\u5728\u5148\u540e\u987a\u5e8f\uff09\n\n\u5219\u53ef\u4ee5\u6c42\u51fa\u6240\u6709\u80fd\u6784\u6210\u5b57\u7b26\u4e32\u4e2a\u6570 $res1$\uff08\u7ed3\u5408\u524d\u7f6e\u829d\u58eb\uff09\u3002\n\n**\u6b63\u96be\u5219\u53cd**\uff0c\u6211\u4eec\u53ef\u4ee5\u6c42\u51fa\u80fd\u6784\u6210\u56de\u6587\u4e32\u7684\u4e2a\u6570 $res2$\u3002\n\n\u63a5\u4e0b\u6765\u662f\u5982\u4f55\u6c42\u89e3 $res2$:\n\n1. $n$ \u4e3a\u5947\u6570\u4e14\u51fa\u73b0\u4e2a\u6570\u4e3a\u5947\u6570\u7684\u5b57\u7b26\u4e0d\u6b62\u4e00\u4e2a\u6216 $n$ \u4e3a\u5076\u6570\u4e14\u5e76\u4e0d\u662f\u5168\u90e8\u5b57\u7b26\u51fa\u73b0\u4e2a\u6570\u4e3a\u5076\u6570\u65f6\uff0c$res2=0$\u3002\n2. \u5982\u679c\u4e0d\u6ee1\u8db3\u4e0a\u9762\u60c5\u51b5\uff0c\u5219\u8bf4\u660e\u4e00\u5b9a\u5b58\u5728\u56de\u6587\u4e32\u3002\u6839\u636e\u56de\u6587\u4e32\u7684\u5bf9\u79f0\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u786e\u5b9a\u5b57\u7b26\u4e32\u7684\u524d\u534a\u90e8\u5206\u7684\u72b6\u6001\uff0c\u4ee5\u6b64\u786e\u5b9a\u540e\u534a\u90e8\u5206\u3002\u800c\u786e\u5b9a\u524d\u534a\u90e8\u5206\u72b6\u6001\u4e0d\u5b58\u5728\u4efb\u4f55\u9650\u5236\uff0c\u4f7f\u7528\u524d\u7f6e\u829d\u58eb\u5373\u53ef\u6c42\u51fa $res2$\u3002\n\n\u5219\u5728\u76f8\u540c\u5b57\u7b26\u76f8\u540c\u524d\u63d0\u4e0b\u7684\u7b54\u6848\u4e3a $res1-res2$\u3002\n\n\u6700\u540e\u8bb0\u5f97\u7ed9\u76f8\u540c\u5b57\u7b26\u5168\u6392\u5217\uff0c\u6700\u7ec8\u7b54\u6848\u4e3a $(res1-res2)\\times \\prod(\\texttt{\u5b57\u6bcda...c\u51fa\u73b0\u4e2a\u6570})!$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n## \u4e11\u964b\u306e\u4ee3\u7801\n\u4ec5\u4f9b\u53c2\u8003\u3002\n\n[click_here](https://www.luogu.com.cn/paste/irqziaq1)",
        "postTime": 1650895377,
        "uid": 312306,
        "name": "LJ07",
        "ccfLevel": 0,
        "title": "[Solution]P5684 [CSP-J2019 \u6c5f\u897f] \u975e\u56de\u6587\u4e32"
    }
]
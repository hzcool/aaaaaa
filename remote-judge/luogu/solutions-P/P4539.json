[
    {
        "content": "## $\\texttt{Solution}$\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\u7684\u6df1\u5ea6 $r_i$\uff0c\u7531\u4e8e $h_i = k(r_i + 1) + c$\uff0c\u4e0d\u59a8\u53ef\u4ee5\u628a\u6839\u8282\u70b9\u7684\u6df1\u5ea6\u6539\u4e3a $1$\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u7528 **\u73b0\u5728\u7684 $r_i$** \u8868\u793a **\u539f\u6765\u7684 $r_i + 1$** \u4e86\u3002  \n\n\u5148\u628a $\\sum\\limits_{i = 1}^n h_i f_i$ \u5316\u7b80\uff1a  \n$$\n\\begin{aligned}\n\\sum\\limits_{i = 1}^n (h_i \\times f_i) & =\n\\sum\\limits_{i = 1}^n (k \\times r_i + c) \\times \\dfrac {d_i} S \\\\\n& = \\dfrac 1 S \\times \\sum\\limits_{i = 1} ^{n} (k \\times r_i + c) \\times d_i \\\\\n& = \\dfrac 1 S \\times \\sum\\limits_{i = 1}^n (k \\times r_i \\times d_i + c \\times d_i) \\\\\n& = \\dfrac 1 S \\times (\\sum\\limits_{i = 1}^n k \\times r_i \\times d_i + \\sum\\limits_{i = 1}^n c \\times d_i) \\\\\n& = (\\dfrac 1 S \\times \\sum\\limits_{i = 1}^n k \\times r_i \\times d_i) + (\\dfrac 1 S \\times c \\times \\sum\\limits_{i = 1} ^{n} d_i) \\\\\n& = (\\dfrac k S \\times \\sum\\limits_{i = 1}^n r_i \\times d_i) + (\\dfrac 1 S \\times c \\times S) \\\\\n& = \\dfrac {k \\times \\sum\\limits_{i = 1}^n r_i \\times d_i}{S} + c \\\\\n\\end{aligned}\n$$\n\n\u9898\u76ee\u8981\u6211\u4eec\u6c42 $\\sum\\limits_{i = 1}^n h_i f_i$ \u7684\u6700\u5c0f\u503c\uff0c\u5c31\u53ef\u4ee5\u8f6c\u5316\u6210\u6c42 $\\sum\\limits_{i = 1}^n r_i \\times d_i$ \u7684\u6700\u5c0f\u503c\u3002  \n\n- \u72b6\u6001\u5b9a\u4e49\uff1a\u8bbe $f_{L, R}$ \u8868\u793a\uff1a\u4e00\u68f5\u4e8c\u53c9\u6811\u7684 **\u4e2d\u5e8f\u904d\u5386(\u5de6\u5b50\u6811\uff0c\u6839\u8282\u70b9\uff0c\u53f3\u5b50\u6811)** \u4e3a $L \\sim R(L, L + 1, L + 2, \\cdots, R)$ \u65f6 $\\sum\\limits_{i = L}^R r_i \\times d_i$ \u7684\u6700\u5c0f\u503c\uff0c\u6700\u7ec8\u7684\u7b54\u6848\u5c31\u662f $\\dfrac{k \\times f_{1, n}}{S} + c$\u3002  \n- \u521d\u59cb\u5316\uff1a$\\forall L = R = i, f_{L, R} = d_i$\uff1b$\\forall L < R, f_{L, R} = + \\infty$\u3002  \n- \u72b6\u6001\u8f6c\u79fb\uff1a\u5bf9\u4e8e\u4e2d\u5e8f\u904d\u5386\u4e3a $L \\sim R$ \u7684\u4e8c\u53c9\u6811\uff0c\u679a\u4e3e\u5176\u6839\u8282\u70b9 $tr(L \\leq tr \\leq R)$\uff0c$f_{L, R} = \\min\\limits_{tr = L}^R \\{ f_{L, tr - 1} + f_{tr + 1, R} + \\sum\\limits_{i = L}^{R} d_i \\} = \\min\\limits_{tr = L}^R \\{ f_{L, tr - 1} + f_{tr + 1, R} \\} + \\sum\\limits_{i = L}^{R} d_i$\u3002  \n\n\u5982\u679c\u9700\u8981\u8f93\u51fa\u65b9\u6848\uff0c\u53ef\u4ee5\u5728\u8f6c\u79fb\u8fc7\u7a0b\u4e2d\u8bb0\u5f55\u4e0b $f_{L, R}$ \u53d6\u6700\u5c0f\u503c\u65f6\u7684\u6839\u8282\u70b9\uff0c\u6700\u540e\u9012\u5f52\u5373\u53ef\u3002  \n\n\u8f6c\u79fb\u65f6 $\\sum\\limits_{i = L}^{R} d_i$ \u53ef\u4ee5\u7528\u524d\u7f00\u548c\u4f5c\u5dee\uff0c\u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6 $O(n ^ 4) \\to O(n ^ 3)$\uff0c\u4e0d\u8fc7\u90fd\u53ef\u4ee5 $\\texttt{AC}$\u3002\n\n## $\\texttt{code}$\n\n```cpp\n#include <cstdio>\n#include <cstring>\n\n#define Min(u, v) (((u) < (v)) ? (u) : (v))\n\nconst int MAX_n = 30;\n\nint n, S;\nint d[MAX_n + 5];\nint zh[MAX_n + 5];\n\ndouble k, c;\ndouble dp[MAX_n + 5][MAX_n + 5];\n\nint main()\n{\n\tscanf(\"%d %lf %lf\", &n, &k, &c);\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tscanf(\"%d\", &d[i]);\n\t\tzh[i] = (S += d[i]);\n\t\tdp[i][i] = 1.0 * d[i];\n\t}\n\tfor (int L = 1; L + 1 <= n; L++)\n\t\tfor (int R = L + 1; R <= n; R++)\n\t\t\tdp[L][R] = 1000000000.0;\n\tfor (int Len = 2; Len <= n; Len++)\n\t{\n\t\tfor (int L = 1, R = Len; R <= n; L++, R++)\n\t\t{\n\t\t\tfor (int tr = L; tr <= R; tr++)\n\t\t\t\tdp[L][R] = Min(dp[L][R], dp[L][tr - 1] + dp[tr + 1][R]);\n\t\t\tdp[L][R] += 1.0 * (zh[R] - zh[L - 1]);\n\t\t}\n\t}\n\tprintf(\"%.3lf\\n\", 1.0 * k * dp[1][n] / S + c);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1608032960,
        "uid": 331660,
        "name": "mqxmm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u300cSCOI2006\u300dzh_tree"
    },
    {
        "content": "## \u8bb0\u641c\n\u53d1\u73b0 $n\\le 30$\uff0c\u5c0f\u5f97\u4e00\u5339\uff0c**\u76f4\u63a5\u5927\u529b\u8bb0\u641c\u5c31\u597d\u4e86**\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4$[L,R]$\uff0c\u6211\u4eec\u679a\u4e3e\u4e00\u4e2a\u65ad\u7535$i,i\\in [L,R]$\uff0c\u5206\u6210$[L,i-1]$\u548c$[i+1,R]$\u4e24\u90e8\u5206\uff0c\u5728\u5206\u522b\u8bb0\u641c\u3002\n\n\u590d\u6742\u5ea6\uff1a$O(n^4)$\uff08~~\u7ba1\u5b83\u5462\uff0c\u53ea\u8981\u7b80\u5355\u7c97\u66b4\u80fd\u8fc7\u5c31\u884c\u4e86~~\uff09\n\n\u4ee3\u7801\uff1a\n```c++\n#include<bits/stdc++.h>\nusing namespace std;\nint n,d[10010],S;\ndouble k,c,f[10010],dp[101][101][101],tot[10001];\ndouble DFS(int L,int R,int h){\n\tif(dp[L][R][h]!=2e9+7)return dp[L][R][h];\n\tfor(int i=L;i<=R;i++){\n\t\tdouble res=f[i]*(k*1.0*h+c);\n\t\tif(L<=i-1)res+=DFS(L,i-1,h+1);\n\t\tif(i+1<=R)res+=DFS(i+1,R,h+1);\n\t\tdp[L][R][h]=min(dp[L][R][h],res);\n\t}\n\treturn dp[L][R][h];\n}\nint main(){\n\tfor(int i=0;i<=100;i++)for(int j=0;j<=100;j++)for(int k=0;k<=100;k++)dp[i][j][k]=2e9+7;\n\tscanf(\"%d %lf %lf\",&n,&k,&c);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&d[i]),S+=d[i];\n\tfor(int i=1;i<=n;i++)f[i]=d[i]*1.0/S;\n\tprintf(\"%.3lf\",DFS(1,n,1));\n\treturn 0;\n}\n```",
        "postTime": 1570096361,
        "uid": 54298,
        "name": "\u7cea\u773e\u8126\u98b0\u7f77",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4539 \u3010[SCOI2006]zh_tree\u3011"
    },
    {
        "content": "\n## Solution\n\n\u5176\u5b9e\u5c31\u662f\u63a8\u5f0f\u5b50\u5566\u2026\u2026\n\n$$\\begin{aligned}ans~& =~\\min~\\{~\\sum_{i = 1}^{n} h_i~\\times~f_i\\}\\\\& =~\\min~\\{\\sum_{i = 1}^n~h_i~\\times~\\frac{d_i}{S}\\}\\\\& =~\\min~\\{\\frac{1}{S}~\\times~sum_{i = 1}^n~h_i~\\times~d_i\\}\\\\& =~\\min~\\{\\frac{1}{S}~\\times~\\sum_{i = 1}^n~[k~(r_i~+~1)~c]~\\times~d_i\\\\& =~\\min~\\{\\frac{1}{S}~\\times~\\sum_{i = 1}^n~[k~(r_i~+~1)~d_i]~+~\\sum_{i = 1}^n d_i~\\times~c\\}\\\\& =~\\min~\\{\\frac{1}{S}~\\times~k~\\sum_{i = 1}^n~[(r_i~+~1)~d_i]~+~S~\\times~c\\}\\\\\\end{aligned}$$\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0 $S~=~\\sum_{i = 1}^n d_i$ \u662f\u4e2a\u5e38\u6570\uff0c$c$ \u4e5f\u662f\u4e00\u4e2a\u5e38\u6570\uff0c\u6211\u4eec\u5c06\u53ea\u4e0e\u8fd9\u4e24\u4e2a\u503c\u6709\u5173\u7684\u9879\u4ece $\\min$ \u4e2d\u63d0\u51fa\u6765\n\n$$\\begin{aligned}ans~& =~\\frac{1}{S}~+~S~\\times~c~+~\\min\\{k~\\sum_{i = 1}^n~(r_i~+~1)~d_i\\}\\\\& =~\\frac{1}{S}~+~S~\\times~c~+~k~\\times~\\min\\{\\sum_{i = 1}^n~(r_i~+~1)~d_i\\}\\end{aligned}$$\n\n\u4e8e\u662f\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u4e8b\u5b9e\u4e0a\u8981\u6700\u5c0f\u5316 $\\sum_{i = 1}^n~(r_i~+~1)~d_i$\uff0c\u540c\u65f6\u6ee1\u8db3\u5728\u8fd9\u68f5\u6811\u4e0a\u7684\u4e2d\u5e8f\u904d\u5386\u662f $1~\\sim~n$\n\n\u7531\u4e8e\u4e2d\u5e8f\u904d\u5386\u7684\u987a\u5e8f\u662f\u201c\u5de6\u4e2d\u53f3\u201d\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8bbe $f_{l,r}$ \u4e3a\u533a\u95f4 $[l,r]$ \u7684\u4e2d\u5e8f\u904d\u5386\u4e3a $l~\\sim~r$ \u65f6\u4e0a\u5f0f\u7684\u6700\u5c0f\u503c\uff0c\u8f6c\u79fb\u65f6\u53ef\u4ee5\u679a\u4e3e\u4e00\u4e2a\u70b9 $i$ \u4f5c\u4e3a\u6839\uff0c\u5219\u5de6\u53f3\u5b50\u6811\u663e\u7136\u8981\u4ece\u4e0a\u5f0f\u6700\u5c0f\u7684\u6811\u5f62\u8f6c\u79fb\u8fc7\u6765\u3002\u8f6c\u79fb\u65f6\u7b49\u4ef7\u4e8e\u5de6\u53f3\u5b50\u6811\u6bcf\u4e2a\u70b9\u7684\u6811\u9ad8\u90fd\u589e\u52a0 $1$\uff0c\u5373\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u589e\u52a0 $\\sum_{j = l}^{i - 1} d_j~+~\\sum_{j = i + 1}^{r} d_j$\u3002\u7136\u540e\u52a0\u4e0a\u6839\u7684\u8d21\u732e $d_i$\uff0c\u6240\u4ee5\u589e\u52a0\u7684\u8d21\u732e\u5373\u4e3a $\\sum_{j = l}^r d_j$\u3002\u76f4\u63a5\u4f7f\u7528\u524d\u7f00\u548c\u4f18\u5316\u8be5\u5f0f\u5b50\u5373\u53ef\u3002\n\n\u6700\u540e\u8ba1\u7b97\u7b54\u6848\u65f6\u8bb0\u5f97\u5c06\u5e38\u6570\u9879\u4e58\u4e0a\u3002\u590d\u6742\u5ea6 $O(n^3)$\u3002\n\n## Code\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#ifdef ONLINE_JUDGE\n#define freopen(a, b, c)\n#endif\n#define rg register\n#define ci const int\n#define cl const long long\n\ntypedef long long int ll;\n\nnamespace IPT {\n\tconst int L = 1000000;\n\tchar buf[L], *front=buf, *end=buf;\n\tchar GetChar() {\n\t\tif (front == end) {\n\t\t\tend = buf + fread(front = buf, 1, L, stdin);\n\t\t\tif (front == end) return -1;\n\t\t}\n\t\treturn *(front++);\n\t}\n}\n\ntemplate <typename T>\ninline void qr(T &x) {\n\trg char ch = IPT::GetChar(), lst = ' ';\n\twhile ((ch > '9') || (ch < '0')) lst = ch, ch=IPT::GetChar();\n\twhile ((ch >= '0') && (ch <= '9')) x = (x << 1) + (x << 3) + (ch ^ 48), ch = IPT::GetChar();\n\tif (lst == '-') x = -x;\n}\n\ntemplate <typename T>\ninline void ReadDb(T &x) {\n\trg char ch = IPT::GetChar(), lst = ' ';\n\twhile ((ch > '9') || (ch < '0')) lst = ch, ch = IPT::GetChar();\n\twhile ((ch >= '0') && (ch <= '9')) x = x * 10 + (ch ^ 48), ch = IPT::GetChar();\n\tif (ch == '.') {\n\t\tch = IPT::GetChar();\n\t\tdouble base = 1;\n\t\twhile ((ch >= '0') && (ch <= '9')) x += (ch ^ 48) * ((base *= 0.1)), ch = IPT::GetChar();\n\t}\n\tif (lst == '-') x = -x;\n}\n\nnamespace OPT {\n\tchar buf[120];\n}\n\ntemplate <typename T>\ninline void qw(T x, const char aft, const bool pt) {\n\tif (x < 0) {x = -x, putchar('-');}\n\trg int top=0;\n\tdo {OPT::buf[++top] = x % 10 + '0';} while (x /= 10);\n\twhile (top) putchar(OPT::buf[top--]);\n\tif (pt) putchar(aft);\n}\n\nconst int maxn = 35;\n\nint n;\ndouble c, k;\ndouble MU[maxn], frog[maxn][maxn], sum[maxn];\n\nint main() {\n\tfreopen(\"1.in\", \"r\", stdin);\n\tqr(n); ReadDb(k); ReadDb(c);\n\tmemset(frog, 127, sizeof frog);\n\tfor (rg int i = 1; i <= n; ++i) {\n\t\tReadDb(sum[i]);\n\t\tfrog[i][i] = sum[i]; frog[i + 1][i] = 0;\n\t\tsum[i] += sum[i - 1];\n\t}\n\tfrog[1][0] = 0;\n\tfor (rg int len = 1; len < n; ++len) {\n\t\tfor (rg int l = 1; l < n; ++l) {\n\t\t\tint r = l + len;\n\t\t\tif (r > n) break;\n\t\t\tfor (rg int i = l; i <= r; ++i) frog[l][r] = std::min(frog[l][r], frog[l][i - 1] + frog[i + 1][r]);\n\t\t\tfrog[l][r] += sum[r] - sum[l - 1];\n\t\t}\n\t}\n\tprintf(\"%.3lf\\n\", (k * frog[1][n] + sum[n] * c) / sum[n]);\n}\n```\n\n## Summary\n\n\u4e8c\u53c9\u6811\u7684\u4e2d\u5e8f\u904d\u5386\u662f **\u5de6\u4e2d\u53f3** \u4e0d\u662f **\u4e2d\u5de6\u53f3**\uff01",
        "postTime": 1546427323,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4539 \u3010[SCOI2006]zh_tree\u3011"
    },
    {
        "content": "\u533a\u95f4 $DP$ \u5165\u95e8\u9898\u3002\u3002\u3002\n\n~~\u975e\u5e38\u7684\u50bb\u554a~~\n\n\u9996\u5148\u5e76\u4e0d\u8981\u8f93\u51fa\u65b9\u6848\u3002\u3002\u3002\n\n\u8bbe $f[l][r]$ \u8868\u793a\u5c06 $l,r$ \u4e4b\u95f4\u7684\u5efa\u6210\u4e00\u68f5\u5b50\u6811\u7684\u6700\u5c0f\u4ee3\u4ef7\n\n\u6bcf\u6b21\u679a\u4e3e\u4e00\u4e2a\u6839\u8f6c\u79fb\uff0c\u5b50\u6811\u7684 $deep$ \u5168\u90e8\u52a0 $1$\uff0c\u7b97\u4e0a\u8d21\u732e\u5c31\u597d\u4e86\n\n~~\u60f3\u600e\u4e48\u5199\u600e\u4e48\u5199~~\n\n\u6700\u540e\u9664\u4e2a $s$ \u5c31\u597d\u4e86\n\n\u590d\u6742\u5ea6 $\\Theta(n^3)$\n\n$n< 30$ \u662f\u4ec0\u4e48\u9b3c\u3002\u3002\u3002\n\n```cpp\n# include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n\nint n;\ndouble k, c, d[35], s, f[35][35], sum[35][35];\n\nint main() {\n\tfreopen(\"a.in\", \"r\", stdin);\n\tios :: sync_with_stdio(false);\n\tcin >> n >> k >> c;\n\tfor (int i = 1; i <= n; ++i) cin >> d[i], s += d[i];\n\tmemset(f, 127, sizeof(f));\n\tfor (int i = 1; i <= n; ++i) f[i][i] = (k + c) * d[i];\n\tfor (int i = 1; i <= n; ++i)\n\t\tfor (int j = i; j <= n; ++j) sum[i][j] = sum[i][j - 1] + k * d[j];\n\tfor (int len = 2; len <= n; ++len)\n\t\tfor (int l = 1; l + len - 1 <= n; ++l) {\n\t\t\tint r = l + len - 1;\n\t\t\tf[l][r] = min(f[l][r - 1] + c * d[r], f[l + 1][r] + c * d[l]);\n\t\t\tfor (int m = l + 1; m < r; ++m)\n\t\t\t\tf[l][r] = min(f[l][r], f[l][m - 1] + f[m + 1][r] + c * d[m]);\n\t\t\tf[l][r] += sum[l][r];\n\t\t}\n\tprintf(\"%.3lf\\n\", f[1][n] / s);\n    return 0;\n}\n\n\n```",
        "postTime": 1538491685,
        "uid": 47640,
        "name": "Cyhlnj",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4539 \u3010[SCOI2006]zh_tree\u3011"
    },
    {
        "content": "\u4e00\u4e2a\u533a\u95f4 DP \u7684\u8f83\u4e3a\u7b80\u5355\u7684\u9898\u76ee\u3002\n\n## 1. \u9898\u610f\n\n- \u8981\u6c42\u6784\u9020\u4e00\u4e2a\u5927\u5c0f\u4e3a $n$ \u7684\u4e8c\u53c9\u6811\uff0c\u6309\u7167\u4e2d\u5e8f\u904d\u5386\u6807\u53f7\u4e3a $1\\sim n$\uff0c\u7136\u540e\u7ed9\u5b9a\u6bcf\u4e2a\u7f16\u53f7\u7684\u9891\u7387 $f_i$\uff0c\u5e76\u4e14\u7ed9\u5b9a\u5e38\u6570 $k,c$ \u4e3a\u5b9e\u6570\uff0c\u8bf7\u6700\u5c0f\u5316\uff08\u8bbe\u6839\u8282\u70b9\u6df1\u5ea6\u4e3a 1\uff09\uff1a\n\n$$\n\\sum_{i=1}^nf_i\\times(k\\times dep_i+c)\n$$\n\n- $n\\leq30,\\sum f_i=1,0<k,c\\leq100$\n\n## 2. \u601d\u8def\n\n\u5176\u5b9e\u53ef\u80fd\u5f88\u591a\u540c\u5b66~~\uff08\u5176\u5b9e\u5c31\u662f\u6211\uff09~~\u90fd\u4f1a\u60f3\u5230 `Huffman Tree`\uff0c\u5b83\u662f\u57fa\u4e8e\u4e00\u4e2a\u8d2a\u5fc3\u7684\u60f3\u6cd5\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u6bd4\u8f83\u4e00\u4e0b\u4e24\u4e2a\u7684\u5f0f\u5b50\u3002\n$$\n\\sum_{i=1}^nf_i\\times dep_i\n$$\n\n$$\n\\sum_{i=1}f_i\\times(k\\times dep_i+c)\n$$\n\n\u8fd9\u4e24\u4e2a\u5176\u5b9e\u662f\u6709\u4e00\u5b9a\u533a\u522b\u7684\u3002\n\n\u672c\u9898\u4e2d\uff0c\u4e0d\u540c\u8282\u70b9\u662f\u4e00\u5b9a\u4f1a\u51fa\u73b0\u7956\u5148\u5173\u7cfb\uff0c\u5e76\u4e14\u53ea\u6709 $n$ \u4e2a\u8282\u70b9\u3002\u4f46\u662f `Huffman Tree` \u5374\u8981\u6c42\u7ed9\u5b9a\u7684 $n$ \u4e2a\u8282\u70b9\u4e0d\u80fd\u51fa\u73b0\u7956\u5148\u5173\u7cfb\uff0c\u6784\u9020\u51fa\u6765\u540e\uff0c\u4e5f\u4f1a\u8d85\u8fc7 $n$ \u4e2a\u8282\u70b9\u3002\n\n\u90a3\u672c\u9898\u600e\u4e48\u505a\u5462\uff1f\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff1a\u5047\u8bbe\u5f53\u524d\u5b50\u6811\u8986\u76d6\u7684\u533a\u95f4\u4e3a $[l,r]$\uff0c\u6839\u8282\u70b9\u4e3a $t$\uff0c\u90a3\u4e48\u5de6\u8fb9\u7684\u5b50\u6811\u8986\u76d6\u7684\u533a\u95f4\u4e3a $[l,t-1]$\uff0c\u53f3\u8fb9\u7684\u5b50\u6811\u4e3a $[t+1,r]$\u3002\n\n\u8fd9\u5c31\u662f\u4e00\u4e2a\u5178\u578b\u7684\u533a\u95f4 DP \u4e86\u3002\n\n\u5f53\u6211\u4eec\u8981\u8ba1\u7b97 $dp(l,r)$ \u7684\u65f6\u5019\uff0c\u6211\u4eec\u76f4\u63a5\u679a\u4e3e\u6839\u8282\u70b9 $t$\uff0c\u7136\u540e\u9012\u5f52\u8ba1\u7b97 $dp(l,t-1)$ \u548c $dp(t+1,r)$\uff0c\u7136\u540e\u6211\u4eec\u5c06\u5de6\u53f3\u5b50\u6811\u76f4\u63a5\u63a5\u5728 $t$ \u8fd9\u4e2a\u8282\u70b9\u4e0a\u3002\n\n\u600e\u4e48\u8ba1\u7b97\u8d21\u732e\u5462\uff1f\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u5de6\u53f3\u7684\u5b50\u6811\u7684\u6df1\u5ea6\u90fd\u8981\u52a0\u4e00\uff0c\u5bf9\u4e8e\u6574\u4e2a\u7684\u8d21\u732e\u5c31\u662f $k\\times (s(r)-s(l-1)-f(t))$\uff0c\u5176\u4e2d $s(i)=\\sum_{j=1}^if(j)$\u3002\n\n\u518d\u52a0\u4e0a $t$ \u7684\u8d21\u732e\uff0c\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u5f0f\u5b50\uff1a\n$$\ndp(l,r)=\\min_{t\\in[l,r]}\\{dp(l,t-1)+dp(t+1,r)+k\\times(s(r)-s(l-1))+c\\times f(t) \\}\n$$\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^3)$\uff0c\u8f7b\u677e\u901a\u8fc7\u3002\n\n## 3. \u4ee3\u7801\n\n\u91c7\u7528\u7684\u9012\u5f52\u5f0f\u5199\u6cd5\u3002\n\n```cpp\ndouble solve(int l, int r)\n{\n\tif (l > r) return 0;\n\tif (l == r) return (k + c) * fru[l];\n\tdouble &v = f[l][r];\n\tif (v >= 0) return v;\n\tv = INF;\n\tfor (int mid = l; mid <= r; ++ mid)\n\t\tv = min(v, solve(l, mid - 1) + k * (s[r] - s[l - 1]) + c * fru[mid] + solve(mid + 1, r));\n\treturn v;\n}\n```",
        "postTime": 1635502098,
        "uid": 342891,
        "name": "mydcwfy",
        "ccfLevel": 9,
        "title": "P4539 \u9898\u89e3"
    }
]
[
    {
        "content": "\u6211\u6821\u6700\u795e\u7684\u91d1\u724c\u7237\u5b89\u5229\u7ed9\u6211\u7684\u9898\n\n\u91d1\u724c\u7237\u544a\u8bc9\u6211\u8fd9\u9053\u9898\u6c34\u7206\u4e86\n\n~~\u5929\u554a\uff0c\u91d1\u724c\u7237\u7adf\u7136\u7ed9\u6211\u5b89\u5229\u9898\u76ee\u5566~~\n\n\u521a\u5f00\u59cb\u770b\u7740\u9ed1\u8272\u7684\u6807\u7b7e\u611f\u89c9\u5e76\u4e0d\u662f\u5f88\u53ef\u505a\uff0c\u4f46\u662f\u770b\u5230\u91d1\u724c\u7237~~\u8116\u5b50\u4e0a\u95ea\u95ea\u53d1\u5149\u7684\u91d1\u724c~~\u771f\u631a\u7684\u773c\u795e\n\n\u6211\u51b3\u5b9a\u8fd8\u662f\u505a\u4e00\u505a\n\n\u4e8e\u662f\u5c31\u5f00\u5f00\u5fc3\u5fc3\u7684\u505a\u4e86\u4e00\u9053\u6c34\u9898\n\n\u6211\u4eec\u8bbe$dp[i][j]$\u8868\u793a\u8fdb\u884c\u5230$i$\u6b21\u6e38\u620f\uff0c\u8fd9\u6b21\u6e38\u620f\u4f7f\u7528\u7684\u662f\u7b2c$j$\u4e2a\u9ab0\u5b50\u7684\u6982\u7387\n\n\u9996\u5148\u6211\u4eec\u5148\u521d\u59cb\u5316\uff0c\u521a\u5f00\u59cb\u7b2c\u4e00\u6b21\u6e38\u620f\u80fd\u7528\u5230\u7684\u9ab0\u5b50\u8ddf$\\pi(i)$\u6709\u5173\u7cfb\n\n\u4e8e\u662f$dp[1][i]=\\pi(i)*a[i][O[1]]$\n\n\u5c31\u662f\u9009\u62e9\u8fd9\u4e2a\u9ab0\u5b50\u5e76\u4e14\u80fd\u51fa\u73b0\u8fd9\u6b21\u9700\u8981\u7684\u70b9\u6570\u7684\u6982\u7387\u4e58\u8d77\u6765\n\n\u4e4b\u540e\u6211\u4eec\u5237\u8868\u8f6c\u79fb\n\n\u5bf9\u4e8e\u4e00\u4e2a$dp[i][j]$\u6211\u4eec\u4f7f\u7528\u5b8c\u4e4b\u540e\u53ef\u80fd\u4f1a\u6362\u9ab0\u5b50\u4e8e\u662f\u6211\u4eec\u5c31\u679a\u4e3e\u4e0b\u4e00\u4e2a\u6362\u7684\u9ab0\u5b50$k$\uff0c\u8fd9\u4e2a\u9ab0\u5b50\u9700\u8981\u51fa\u73b0\u5bf9\u5e94\u7684\u70b9\u6570\n\n\u4e8e\u662f\u5c31\u6709\n\n$$dp[i+1][k]+=dp[i][j]*b[j][k]*a[k][O[i+1]]$$\n\n\u6700\u540e\u7b54\u6848\u5c31\u662f$\\sum_{i=1}^{n}dp[m][i]$\n\n\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define re register\n#define maxn 1005\n#define eps 1e-6\n#define M 51\ndouble a[M][M],b[M][M];\ndouble pi[M],dp[maxn][maxn];\nint O[maxn];\nint n,m,Q;\ninline int check(double t,double k)\n{\n\tif(t+eps>k&&t-eps<k) return 1;\n\treturn 0;\n}\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&m,&Q);\n\tfor(re int i=1;i<=n;i++)\n\t\tscanf(\"%lf\",&pi[i]);\n\tfor(re int i=1;i<=n;i++)\n\t\tfor(re int j=0;j<Q;j++)\n\t\t\tscanf(\"%lf\",&a[i][j]);\n\tfor(re int i=1;i<=n;i++)\n\t\tfor(re int j=1;j<=n;j++)\n\t\t\tscanf(\"%lf\",&b[i][j]);\n\tfor(re int i=1;i<=m;i++)\n\t\tscanf(\"%d\",&O[i]);\n\tfor(re int i=1;i<=n;i++)\n\t\tdp[1][i]=pi[i]*a[i][O[1]];\n\tfor(re int i=1;i<m;i++)\n\t\tfor(re int j=1;j<=n;j++)\n\t\t{\n\t\t\tif(check(dp[i][j],0)) continue;\n\t\t\tfor(re int k=1;k<=n;k++)\n\t\t\t\tdp[i+1][k]+=dp[i][j]*a[k][O[i+1]]*b[j][k];\n\t\t}\n\tdouble ans=0;\n\tfor(re int i=1;i<=n;i++)\n\t\tans+=dp[m][i];\n\tprintf(\"%.4lf\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1536152446,
        "uid": 35178,
        "name": "asuldb",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1921 \u3010\u8d4c\u535a\u6e38\u620f\u3011"
    }
]
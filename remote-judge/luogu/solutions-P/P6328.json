[
    {
        "content": "> \u5728\u592a\u9633\u897f\u659c\u7684\u8fd9\u4e2a\u4e16\u754c\u91cc\uff0c\u7f6e\u8eab\u5929\u4e0a\u4e4b\u68ee\u3002\u7b49\u8fd9\u573a\u6218\u4e89\u7ed3\u675f\u4e4b\u540e\uff0c\u4e0d\u5f52\u4e4b\u4eba\u4e0e\u671b\u773c\u6b32\u7a7f\u7684\u4f17\u4eba\uff0c \u4eba\u4eba\u672c\u7740\u6b63\u4e49\u4e4b\u540d\uff0c\u957f\u5b58\u4e0d\u706d\u7684\u8fc7\u53bb\u3001\u9010\u6e10\u6d88\u901d\u7684\u672a\u6765\u3002\u6211\u56de\u6765\u4e86\uff0c\u7eb5\u4f7f\u65e5\u8584\u897f\u5c71\uff0c\u5373\u4fbf\u770b\u4e0d\u5230\u672a\u6765\uff0c\u6b64\u65f6\u6b64\u523b\u7684\u5149\u8f89\uff0c\u76fc\u541b\u52ff\u5fd8\u3002\u2014\u2014\u2014\u2014\u4e16\u754c\u4e0a\u6700\u5e78\u798f\u7684\u5973\u5b69\n\n\u73c2\u6735\u8389\uff0c\u6700\u53ef\u7231\u4e86\u5462\u3002\n\n---\n\n\u6211\u4eec\u5b9a\u4e49$f[i][j]$\u4e3a\u4ece\u70b9$i$\u51fa\u53d1\uff0c\u6700\u77ed\u8def\u5c0f\u4e8e\u7b49\u4e8e$j$\u7684\u70b9\u7684\u96c6\u5408\u3002\u8fd9\u4e2a\u53ef\u4ee5\u7528bitset\u538b\u4f4d\u5b58\u50a8\u3002\n\n\u8ba1\u7b97$f[i][j]$\uff0c\u6211\u4eec\u9996\u5148\u8981\u77e5\u9053\u4efb\u610f\u4e24\u70b9\u5bf9\u95f4\u6700\u77ed\u8def\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u4ece\u6bcf\u4e2a\u70b9\u51fa\u53d1\uff0c\u6700\u77ed\u8def\u6070\u597d\u4e3a$j$\u7684\u70b9\u7684\u96c6\u5408\u3002\u7136\u540e\u524d\u7f00\u6216\u4e00\u904d\u5c31\u662f$f[i][j]$\u3002\n\n\u8ba1\u7b97\u90fd\u53ef\u4ee5\u5728$O(\\dfrac{n^3}{\\omega})$\u7684\u590d\u6742\u5ea6\u5185\u5b8c\u6210\u3002\n\n\u800c\u6c42\u4efb\u610f\u70b9\u5bf9\u95f4\u6700\u77ed\u8def\uff0c\u5c31\u4ece\u6bcf\u4e2a\u70b9\u5f00\u59cbBFS\u4e00\u904d\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6$O(n(n+m))$\u3002\n\n\u6700\u540e\u5904\u7406\u8be2\u95ee\u7684\u65f6\u5019\uff0c\u5c31\u628a\u6bcf\u4e2a$(x,y)$\u5bf9\u5e94\u7684$f[x][y]$\u90fd\u53d6\u5e76\u96c6\uff0c\u7136\u540e\u6c42\u5176\u4e2d1\u7684\u4e2a\u6570\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6$O(\\dfrac{n\\sum a}{\\omega})$\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6$O(n(n+m)+\\dfrac{n^3+n\\sum a}{\\omega})$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6$O(\\dfrac{n^3}{\\omega})$\u3002\n\n~~\u7136\u540e\u542c\u8bf4\u8fd9\u9053\u9898\u5361\u524d\u5411\u661f~~\n\n\u4f3c\u4e4e\u662f\u7531\u4e8e\u8bbf\u95ee\u8fde\u7eed\u5185\u5b58\u4f1a\u6bd4\u8f83\u5feb\u7684\u539f\u56e0\uff0c\u7528vector\u5b58\u8fb9\u5c31\u8dd1\u7684\u98de\u5feb\uff0c\u800c\u524d\u5411\u661f\u5c31T\u98de\u4e86\u3002\n\n## Code\uff1a\n```cpp\n#include<bitset>\n#include<cstdio>\n#include<cctype>\n#include<queue>\n#include<vector>\n#define N 1003\n#ifdef ONLINE_JUDGE\nstruct istream{\n\tchar buf[23333333],*s;\n\tinline istream(){\n\t\tbuf[fread(s=buf,1,23333330,stdin)]='\\n';\n\t\tfclose(stdin);\n\t}\n\tinline istream&operator>>(int&d){\n\t\td=0;\n\t\tfor(;!isdigit(*s);++s);\n\t\twhile(isdigit(*s))\n\t\td=(d<<3)+(d<<1)+(*s++^'0');\n\t\treturn*this;\n\t}\n}cin;\n#else\n#include<iostream>\nusing std::cin;\n#endif\nstd::bitset<N>a[N][N];\nint n,m,q,dis[N][N];\nstd::vector<int>G[N];\nvoid bfs(int s,int*dis){\n\tfor(int i=1;i<=n;++i)dis[i]=1002;\n\tstatic std::queue<int>q;\n\tdis[s]=0;\n\tfor(q.push(s);!q.empty();){\n\t\tint u=q.front();q.pop();\n\t\tfor(int i:G[u])\n\t\tif(dis[i]==1002){\n\t\t\tdis[i]=dis[u]+1;\n\t\t\tq.push(i);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;++i)\n\ta[s][dis[i]].set(i);\n\tfor(int i=1;i<=n;++i)a[s][i]|=a[s][i-1];\n}\nint main(){\n\tcin>>n>>m>>q;\n\twhile(m--){\n\t\tint u,v;\n\t\tcin>>u>>v;\n\t\tG[u].push_back(v);\n\t\tG[v].push_back(u);\n\t}\n\tfor(int i=1;i<=n;++i)bfs(i,dis[i]);\n\twhile(q--){\n\t\tstd::bitset<N>ans;\n\t\tint x,u,v;\n\t\tcin>>x;\n\t\twhile(x--){\n\t\t\tcin>>u>>v;\n\t\t\tif(v>n)v=n;\n\t\t\tans|=a[u][v];\n\t\t}\n\t\tprintf(\"%d\\n\",ans.count());\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1544424020,
        "uid": 6813,
        "name": "mrsrz",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P5068 \u3010[Ynoi2015]\u6211\u56de\u6765\u4e86\u3011"
    },
    {
        "content": "\u4eba\u751f\u7b2c\u4e00\u9053ynoi\u9898\uff0c\u611f\u89c9\u5927\u5bb6\u662f\u4e0d\u662f\u88abynoi\u7684\u6807\u7b7e\u5413\u5230\u4e86\u554a= =,\u6b64\u9898\u7684\u96be\u5ea6\u4e2a\u4eba\u89c9\u5f97\u4e0d\u5230\u9ed1\u9898\u3002        \n\n### \u6b63\u6587\u90e8\u5206\n$bitset$+\u7c7b\u4f3c\u4e00\u4e2a$dp$\u7684\u4e1c\u897f\u4e71\u641e\u3002   \n\u5b9a\u4e49$f[u][x]$\u7684\u542b\u4e49\u662f\u4ece\u7b2c$u$\u53f7\u70b9\u5f00\u59cb\u6240\u6709\u8def\u5f84\u957f\u5ea6\u4e0d\u8d85\u8fc7$x$\u7684\u96c6\u5408\uff0c\u8fd9\u4e2a\u4e1c\u897f\u663e\u7136\u6211\u4eec\u662f\u53ef\u4ee5\u7528$bitset$\u53bb\u7ef4\u62a4\u7684\u3002           \n\u63a5\u7740\u6211\u4eec\u8003\u8651\u5728\u8fd9\u4e2a$f$\u6570\u7ec4\u4e0a\u52a8\u4e00\u4e9b\u624b\u811a      \n\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a$f[i][j]$\uff0c\u5176$f[i][dis[j]][j]=1$   \n\u8fd9\u4e2a\u4e1c\u897f\u662f\u56fa\u5b9a\u7684\uff0c\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3a\u662f\u6700\u77ed\u8def\uff0c\u5230\u8fbe\u4e86\u8fd9\u4e2a\u8def\u5f84\u7684\u6700\u540e\u4e00\u6b65\u4e00\u5b9a\u662f\u8fd9\u4e2a\u70b9\uff0c\u4e8e\u662f\u5fc5\u5b9a\u4e3a$1$\u3002            \n\u7ee7\u7eed\u8003\u8651\u8f6c\u79fb$f[i][j]$      \n\u4e0d\u96be\u53d1\u73b0\uff1a$f[i][j]=f[i][j]|f[i][j-1]$\n\n\u5176\u4e2d$j$\u8868\u793a\u7684\u662f\u4e00\u4e2a\u8ddd\u79bb\uff0c\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u8fd9\u6837\u8f6c\u79fb\uff1f\u56e0\u4e3a\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a$dis$,\u5176$dis-1$\u5305\u542b\u4e86$dis-2$,$dis-2$\u5305\u542b\u4e86$dis-3$...\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5927\u80c6\u7684\u76f4\u63a5\u6216\u4e0a\u5c31\u884c\u4e86\u3002\n\n\u81f3\u4e8e\u6700\u77ed\u8def\uff0c\u56e0\u4e3a\u6743\u503c\u90fd\u76f8\u7b49\uff0c\u6240\u4ee5\u76f4\u63a5\u53ef\u4ee5\u5199$1$\u4e2a$bfs$\u8fd9\u91cc\u7701\u7565\u3002~~\u6211\u4e0d\u4f1a\u544a\u8bc9\u4f60\u6211dij\u90fd\u5199\u5b8c\u4e86\u624d\u53d1\u73b0\u4e86logn\u7684\u5927\u5e38\u6570\u3002~~    \n\n### My Code:\n```cpp\n#include <bits/stdc++.h>\n#define il inline\n#define gc getchar\n#define pc putchar\n#define pb push_back\nconst int MAXN = 1010;\nconst int GINF = 1001;\nusing namespace std;\nnamespace IO {\n    il int read() {\n        int res = 0;char c;bool sign = 0;\n        for(c = gc();!isdigit(c);c = gc()) sign |= c == '-';\n        for(;isdigit(c);c = gc()) res = (res << 1) + (res << 3) + (c ^ 48);\n        return sign ? -res : res;\n    }\n    il void write(int x) {\n        if(x < 0) x = -x,pc('-');\n        int stk[20];stk[0] = 0;\n        for(;x;x /= 10) stk[++stk[0]] = x % 10;\n        for(int i = stk[0];i >= 1;i--) pc(stk[i] + 48);\n        return;\n    }\n    il void writeln(int x) {\n        write(x);pc('\\n');\n    }\n}\nusing IO::read;using IO::write;using IO::writeln;\nint n,m,i,j,k,q,_i;\nbitset<MAXN> f[MAXN][MAXN];\nint dis[MAXN];vector<int>g[MAXN];\nil void readdEdge(int u,int v) {\n    g[u].pb(v);g[v].pb(u);\n}\nil void bfs(int S) {\n    int i;\n    for(i = 1;i <= n;i++) dis[i] = GINF;dis[S] = 0;\n    queue<int>Q;Q.push(S);\n    while(!Q.empty()) {\n        int u = Q.front();Q.pop();\n        for(i = 0;i < g[u].size();i++) {\n            int to = g[u][i];\n            if(dis[u] + 1 < dis[to]) {\n                dis[to] = dis[u] + 1;\n                Q.push(to);\n            }\n        }\n    }\n//\tcout << endl << S;\n//\tfor(i = 1;i <= n;i++) cout << dis[i] << ' ';\n//\tcout << endl;\n    return;\n} \n\nint main() {\n    n = read();m = read();q = read();\n    for(i = 1;i <= m;i++) {\n        int u = read(),v = read();\n        readdEdge(u,v);\n    }\t\n    for(i = 1;i <= n;i++) {\n        bfs(i);\n        for(j = 1;j <= n;j++) f[i][dis[j]].set(j);\n        for(j = 1;j <= n;j++) f[i][j] |= f[i][j - 1];\n    }\n    for(_i = 1;_i <= q;_i++) {\n        int T = read(),_j;bitset<MAXN> res;\n        for(_j = 1;_j <= T;_j++) {\n            int x = read(),y = read();\n            res |= f[x][y];\n        }\n        writeln(res.count());\n    }\n    return 0;\n}\n\n```\n\n",
        "postTime": 1544537527,
        "uid": 114320,
        "name": "\u843d\u6c50",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5068 \u3010[Ynoi2015]\u6211\u56de\u6765\u4e86\u3011"
    },
    {
        "content": "\u6253\u4e2a\u5e7f\u544a -> [\u6233\u8fd9\u91cc](https://www.cnblogs.com/LJC00118/p/10098987.html)\n\nhttps://www.luogu.org/problemnew/show/P5068\n\nynoi \u4e2d\u7684\u826f\u5fc3\u9898\u554a\n\n\u8003\u8651\u7528 bitset \u6765\u7ef4\u62a4\u91cc\u4e00\u4e2a\u70b9\u8ddd\u79bb\u5c0f\u4e8e $ y_i $ \u7684\u70b9\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f\u4e00\u5806 bitset \u6216\u8d77\u6765\u540e\u4e8c\u8fdb\u5236\u4f4d\u4e2d $ 1 $ \u7684\u4e2a\u6570\n\n\u8fd9\u6837\u6211\u4eec\u53ea\u8981\u4ee4 $ f[i][j] $ \u8868\u793a\u8ddd\u79bb $ i $ \u70b9\u8ddd\u79bb\u5c0f\u4e8e $ j $ \u7684\u70b9\uff0c\u4fbf\u53ef\u4ee5\u9ad8\u6548\u6c42\u51fa\u7b54\u6848\n\n\u8003\u8651\u600e\u4e48\u6c42\u51fa\u6240\u6709\u7684 $ f[i][j] $\n\n\u5148\u679a\u4e3e\u8d77\u70b9 $ u $\uff0c\u56e0\u4e3a\u8fb9\u6743\u4e3a $ 1 $\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u505a\u4e00\u6b21 bfs\n\n\u5bf9\u4e8e $ i $ \u8fd9\u4e2a\u70b9\uff0c\u5047\u8bbe\u5b83\u5230 $ u $ \u7684\u8ddd\u79bb\u4e3a $ dis_i $\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5c06 $ f[u][dis_i] $ \u7684\u7b2c $ i $ \u4f4d\u8bbe\u4e3a $ 1 $\uff0c\u6700\u540e\u4ece\u5c0f\u5230\u5927\u628a $ f[u][j] $ \u6216\u4e0a $ f[u][j - 1] $ \u5373\u53ef\n\n\u590d\u6742\u5ea6\u662f $ \\frac{n^3}{64} + (\\sum\\limits_{i=1}^{q}a_i)*\\frac{n}{64} $\uff0c\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\n\n\u6700\u540e % \u4e00\u53d1 lxl\n\n```cpp\n#include <bits/stdc++.h>\n#define CIOS ios::sync_with_stdio(false);\n#define rep(i, a, b) for(register int i = a; i <= b; i++)\n#define per(i, a, b) for(register int i = a; i >= b; i--)\n#define DEBUG(x) cerr << \"DEBUG\" << x << \" >>> \";\nusing namespace std;\n\ntypedef unsigned long long ull;\ntypedef long long ll;\n\ntemplate <typename T>\ninline void read(T &f) {\n    f = 0; T fu = 1; char c = getchar();\n    while (c < '0' || c > '9') { if (c == '-') fu = -1; c = getchar(); }\n    while (c >= '0' && c <= '9') { f = (f << 3) + (f << 1) + (c & 15); c = getchar(); }\n    f *= fu;\n}\n\ntemplate <typename T>\nvoid print(T x) {\n    if (x < 0) putchar('-'), x = -x;\n    if (x < 10) putchar(x + 48);\n    else print(x / 10), putchar(x % 10 + 48);\n}\n\ntemplate <typename T>\nvoid print(T x, char t) {\n    print(x); putchar(t);\n}\n\nconst int N = 1005, INF = 0x7f7f7f7f;\n\nqueue <int> q;\nbitset <N> f[N][N], Ans;\nvector <int> adj[N];\nint dis[N][N], n, m, Q, now;\n\nint main() {\n    memset(dis, 0x7f, sizeof(dis));\n    read(n); read(m); read(Q);\n    for(register int i = 1; i <= m; i++) {\n        int a, b; read(a); read(b);\n        adj[a].push_back(b);\n        adj[b].push_back(a);\n    }\n    for(register int i = 1; i <= n; i++) {\n        q.push(i); dis[i][i] = 0; now = i; f[i][0].set(i);\n        while(!q.empty()) {\n            int u = q.front(); q.pop();\n            for(register int j = 0; j < adj[u].size(); j++) {\n                int v = adj[u][j];\n                if(dis[i][v] == INF) {\n                    dis[i][v] = dis[i][u] + 1;\n                    q.push(v); f[i][dis[i][v]].set(v);\n                }\n            }\n        }\n        for(register int j = 1; j <= n; j++) f[i][j] |= f[i][j - 1];\n    }\n    while(Q--) {\n        int t; read(t); Ans.reset();\n        while(t--) {\n            int a, b; read(a); read(b);\n            if(b > n) b = n;\n            Ans |= f[a][b];\n        }\n        print(Ans.count(), '\\n');\n    }\n    return 0;\n}\n```",
        "postTime": 1544446187,
        "uid": 51815,
        "name": "LJC00118",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P5068 \u3010[Ynoi2015]\u6211\u56de\u6765\u4e86\u3011"
    },
    {
        "content": "\u826f\u5fc3\u9898\u554a\uff01\n\n\u770b\u5230\u8981\u6c42\u53ef\u884c\u7684\u70b9\u6570\uff0c\u7acb\u9a6cbitset\n\n\u6211\u4eec\u8003\u8651\u5148\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u70b9\u5728\u4e00\u5b9a\u7684\u8303\u56f4\u5185\u80fd\u5426\u88ab\u53e6\u4e00\u70b9\u5305\u62ec\uff0c\u5bf9\u6bcf\u4e2a\u8be2\u95ee\u90fd\u53ef\u4ee5\u76f4\u63a5\u67e5\u8be2\n\n\u56e0\u4e3a\u70b9\u6743\u4e3a1\uff0c\u5148bfs\uff0c\u518d\u4ece\u524d\u5f80\u540e\u9012\u63a8\n\n\u5904\u7406\u51fa\u6765\u4e4b\u540e\u6bcf\u6b21\u8be2\u95ee\u66b4\u529b\u5f02\u6216\u67e5\u8be21\u7684\u6570\u91cf\u5c31\u53ef\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(\\dfrac{n^3+n*\\sum a}{w}+n(n+m))$\n\n```cpp\ninline void bfs(int st){\n\tmemset(dis,-1,sizeof dis);dis[st]=0;qwq.push(st);\n\twhile(!qwq.empty()){\n\t\tint now=qwq.front();qwq.pop();\n\t\tfor(register int i=0;i<e[now].size();i++)\n\t\t\tif(dis[e[now][i]]==-1)dis[e[now][i]]=dis[now]+1,qwq.push(e[now][i]);\n\t}\n\tF(i,1,n)vis[st][dis[i]][i]=1;//\u6807\u8bb0\n\tF(i,1,n)vis[st][i]|=vis[st][i-1];//\u4ece\u524d\u5f80\u540e\u66f4\u65b0\n}\nint yyds(){\n\tn=read();m=read();q=read();\n\tF(i,1,m){\n\t\tu=read();v=read();\n\t\te[u].push_back(v);\n\t\te[v].push_back(u);//\u7528vector\u5efa\u56fe\n\t}\n\tF(i,1,n)bfs(i);//bfs\n\tF(i,1,q){\n\t\ttemp=0;int a=read();\n\t\tF(j,1,a)u=read(),v=read(),temp|=vis[u][v];//\u7edf\u8ba1\u7b54\u6848\n\t\tprint(temp.count());*O++='\\n';\n\t}\n\tfwrite(obuf,O-obuf,1,stdout);\n    return 0;\n}\n```\n",
        "postTime": 1610178331,
        "uid": 359952,
        "name": "_lbw_",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6328 \u3010\u6211\u662f\u4ed9\u4eba\u638c\u3011"
    },
    {
        "content": "\u9898\u9762\u597d\u8bc4\uff0c\u73c2\u6735\u8389\u8fd8\u662f\u90a3\u4e48\u7684\u53ef\u7231\u5462~~\n\n\u8fd9\u9898\u8981\u6211\u4eec\u6c42\u6ee1\u8db3\u4e00\u7ec4\u4e8c\u5143\u7ec4\u4e2d\u81f3\u5c11\u4e00\u4e2a\u4e8c\u5143\u7ec4\u7684\u70b9\u7684\u4e2a\u6570\uff0c**\u81f3\u5c11\u4e00\u79cd\u7ea6\u675f**\uff0c\u662f\u4e0d\u662f\u4ee4\u4f60\u60f3\u5230\u4e86\u4ec0\u4e48\uff1f\n\n\u5bf9\u4e8e\u7ed9\u51fa\u7684\u4e00\u79cd\u7ea6\u675f $x_i,y_i$\uff0c\u9898\u76ee\u8981\u6c42 $\\text{dist}(u,x_i) \\leq y_i$\u3002\u8fd9\u4e2a $\\text{dist}$\uff0c\u9898\u76ee\u4e2d\u4ec5\u8bf4\u662f\u4e24\u70b9\u95f4\u7684\u8ddd\u79bb\uff0c\u5982\u679c\u8fd9\u6837\u7406\u89e3\u81ea\u7136\u65e0\u4ece\u4e0b\u624b\u3002\u4f46\u8fd9\u9898\u4e2d\u7684 $dist$ \u4e8b\u5b9e\u4e0a\u662f\u4e24\u70b9\u95f4\u7684**\u6700\u5c0f\u8ddd\u79bb**\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u6837\u8bf4\u5462\uff1f\n\n\u56e0\u4e3a\u5047\u8bbe\u4e24\u70b9\u95f4\u6240\u6709\u8ddd\u79bb\u7684\u503c\u5728 $[minDis,maxDis]$ \u4e4b\u95f4\uff0c\u90a3\u4e48\u5927\u4e8e $y_i$ \u7684\u8def\u5f84\u5bf9\u7b54\u6848\u6ca1\u6709\u8d21\u732e\uff0c\u53ea\u6709\u5c0f\u4e8e\u7b49\u4e8e $y_i$ \u7684\u5bf9\u4e8e\u7b54\u6848\u6709\u8d21\u732e\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e8b\u5b9e\u4e0a\u5bf9\u4e8e\u4e00\u4e2a\u70b9 $u$ \u4e0e\u7ed9\u51fa\u7684\u70b9 $x_i$\uff0c\u53ea\u6709\u4ed6\u4eec\u95f4\u7684\u6700\u77ed\u8def\u5f84\u53ef\u80fd\u5bf9\u7b54\u6848\u9020\u6210\u8d21\u732e\u3002\n\n\u90a3\u4e48\u8fd9\u9898\u5c31\u7b80\u5355\u4e86\u5f88\u591a\uff0c\u6211\u4eec\u8bbe $f_{i,j}$ \u4e3a\u8ddd $i$ \u7684\u6700\u5c0f\u8ddd\u79bb\u4e0d\u8d85\u8fc7 $j$ \u7684\u70b9\u6240\u6784\u6210\u7684\u70b9\u96c6\u3002\n\n\u90a3\u4e48\u8be2\u95ee\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u6839\u636e $x_i,y_i$ \u53d6\u51fa\u8fd9\u6837\u7684\u70b9\u96c6\u5e76\u53d6\u5e76\uff0c\u8ba1\u7b97\u96c6\u5408\u5927\u5c0f\u5373\u53ef\u3002\n\n\u6c42 $f_{i,j}$ \u4e5f\u5f88\u7b80\u5355\uff0c\u5148\u6c42\u51fa\u8ddd $i$ \u7684\u6700\u5c0f\u8ddd\u79bb\u4e3a $j$ \u7684\u70b9\u6784\u6210\u7684\u70b9\u96c6\uff0c\u7136\u540e\u4f5c\u4e00\u4e2a\u7c7b\u4f3c\u524d\u7f00\u548c\u7684\u4e1c\u897f\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u7531\u4e8e\u8fd9\u9898\u4e2d\u6240\u6709\u8fb9\u7684\u6743\u503c\u5747\u4e3a $1$ \uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a\u70b9 $i$ \u76f4\u63a5 $\\text{bfs}$ \u9884\u5904\u7406\u51fa\u6700\u77ed\u8def\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n*(n+m)+n^2f+f\\sum a)$\uff0c\u5176\u4e2d $f$ \u4e3a\u6bcf\u6b21 $\\text{bitset}$ \u64cd\u4f5c\u7684\u4ee3\u4ef7\u3002\n\n\u6b63\u5982\u8ba8\u8bba\u533a\u6240\u8bf4\u7684\u90a3\u6837\uff0c\u8fd9\u9898\u771f\u7684\u662f\u4e2a $\\text{bits}$ \u6a21\u677f\u9898\uff08\u9003\n\n\u4ee3\u7801\u91cc\u5199\u7684\u662fdijistra\u6700\u77ed\u8def\uff0c\u6ca1\u60f3\u5230\u5427\uff08\n\nPS\uff1a\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c**duliu** \u51fa\u9898\u4eba\u5c45\u7136\u5361\u94fe\u5f0f\u524d\u5411\u661f\uff0c\u628a\u7a9d\u5361\u54ed\u4e86\u3002\n\n**Show the Code**\n\n```cpp \n/*============================\n * Author : tommy0103\n * Problem : Ynoi\n * Algorithm : BITS\n * Time : 2020.3.30\n * ==========================*/\n#include<cstdio>\n#include<bitset>\n#include<queue>\n#include<functional>\nconst int inf=0x3f3f3f3f;\nint n,m,Q,cnt=0;\nstd::bitset<1000> f[1005][1005];\nstd::vector<int> mp[1005];\nint dis[1005][1005],b[1005][1005],vis[1005];\n//int h[1005],to[200005],ver[200005];\ninline int read() {\n\tregister int x=0,f=1;register char s=getchar();\n\twhile(s>'9'||s<'0') {if(s=='-') f=-1;s=getchar();}\n\twhile(s>='0'&&s<='9') {x=x*10+s-'0';s=getchar();}\n\treturn x*f;\n}\ninline void add(int x,int y) {if(!b[x][y]) mp[x].push_back(y),b[x][y]=1;}\nvoid dijistra(int u) {\n\tstd::priority_queue<std::pair<int,int> > Q;\n\tfor(register int i=1;i<=n;++i) dis[u][i]=inf,vis[i]=0;\n\tdis[u][u]=0;Q.push(std::make_pair(0,u));\n\twhile(Q.size()) {\n\t\tint x=Q.top().second;Q.pop();\n\t\tif(vis[x]) continue;vis[x]=1;\n\t\tfor(register int i=0;i<mp[x].size();++i) if(dis[u][mp[x][i]]>dis[u][x]+1) Q.push(std::make_pair(-(dis[u][mp[x][i]]=dis[u][x]+1),mp[x][i]));\n\t}\n}\nint main() {\n\tn=read(),m=read(),Q=read();\n\tfor(register int i=1;i<=m;++i) {int x=read(),y=read();add(x,y);add(y,x);}\n\tfor(register int i=1;i<=n;++i) dijistra(i);\n\tfor(register int i=1;i<=n;++i) {\n\t\tfor(register int j=1;j<=n;++j) {\n\t\t\tif(dis[i][j]!=inf) f[i][dis[i][j]].set(j-1);\n\t\t}\n\t}\n\tfor(register int i=1;i<=n;++i) for(register int j=1;j<=n;++j) f[i][j]|=f[i][j-1];\n\twhile(Q--) {\n\t\tint T=read();\n\t\tstd::bitset<1000> res;\n\t\twhile(T--) {\n\t\t\tint x=read(),y=read();\n\t\t\ty=(y>n? n:y);res|=f[x][y];\n\t\t}\n\t\tprintf(\"%d\\n\",res.count());\n\t} \n\treturn 0;\n}\n```",
        "postTime": 1585562800,
        "uid": 95244,
        "name": "tommymio",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5068 \u3010[Ynoi2015]\u6211\u56de\u6765\u4e86\u3011"
    },
    {
        "content": "\u5f88\u7cbe\u5999\u7684\u9898\uff0c\u4e0d\u8fc7\u653e\u5728Ynoi\u91cc\u9762\u8fd8\u662f\u592a\u826f\u5fc3\u4e86\n\n\u4e00\u5f00\u59cb\u8fd8\u4ee5\u4e3a\u662fLCT\u4ec0\u4e48\u7684\u795e\u4ed9\u7b97\u6cd5\uff0c\u540e\u6765\u7ffb\u9898\u89e3\u53d1\u73b0\u5c31\u662f\u4e2abitset\u3002\u3002\u3002\n\nb[i][j]\u662f\u8dddi\u70b9\u8ddd\u79bb\u5c0f\u4e8ej\u7684\u96c6\u5408,dis[i][j]\u662fi\u5230j\u70b9\u7684\u6700\u77ed\u8def\uff0c\u663e\u7136$j\\in b[i][dis[i][j]]$\n\n\u53e6\u5916\u8fd8\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u7ed3\u8bba\u662f$\\forall j\\in b[i][k]$\u4e00\u5b9a\u6709$j\\in b[i][k+l]$\n\n\u8fd9\u6837\u76f4\u63a5\u66b4\u529b\u94c1\u5b9a\u8d85\u65f6\u554a\uff0c\u8003\u8651\u4f18\u5316\u3002\n\n\u7531\u4e8e\u8fb9\u6743\u90fd\u662f1\uff0c\u6700\u77ed\u8def\u53ef\u4ee5\u76f4\u63a5bfs\u3002\n\n\u7b2c\u4e8c\u4e2a\u7ed3\u8bba\u7a0d\u5fae\u601d\u8003\u4e00\u4e0b\u53ef\u4ee5\u5f97\u5230\u5728\u4efb\u610f$j$\u90fd\u5c5e\u4e8e$b[i][dis[j]]$\u7684\u57fa\u672c\u60c5\u51b5\u4e0b,$b[i][j]\\subset b[i][j-1]$,\u4e8e\u662f\u4e4e$b[i][j]|=b[i][j-1]$\u76f4\u63a5O(n)\u9012\u63a8\u5c31\u597d\u4e86\u3002\n\n\u8be2\u95ee\u5c31\u662f\u6240\u6709b[i][j]\u53d6\u5e76\u96c6\u4e4b\u540e\u7684\u5143\u7d20\u4e2a\u6570\u3002\n\n\u542c\u8bf4\u524d\u5411\u661f\u5b58\u56fe\u4f1aT???\u8fd8\u662f\u7528vector\u5427\uff0cstl\u7801\u91cf\u8d85\u5c11\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <queue>\n#include <bitset>\n\nusing namespace std;\n\nint n, m, q, AlonerAKIOI, a, bb, dis[1005];\nvector<int> e[1005];\nbitset<1005> b[1005][1005];\n\ninline int read() {\n\tint s = 0;\n\tchar ch = getchar();\n\twhile (!isdigit(ch)) ch = getchar();\n\twhile (isdigit(ch)) s = (s << 1) + (s << 3) + (ch & 15), ch = getchar();\n\treturn s;\n}\n\ninline void bfs(int s) {\n\tfor (int i = 0; i <= n; ++i) dis[i] = 1004;\n\tqueue<int> q; q.push(s); dis[s] = 0;\n\twhile (!q.empty()) {\n\t\tint x = q.front();\n\t\tfor (int i : e[x])\n\t\t\tif (dis[i] > dis[x] + 1) dis[i] = dis[x] + 1, q.push(i);\n\t\tq.pop();\n\t}\n}\n\nint main() {\n\tn = read(); m = read(); q = read();\n\twhile (m--) {\n\t\ta = read(); bb = read();\n\t\te[a].push_back(bb);\n\t\te[bb].push_back(a);\n\t}\n\tfor (int i = 1; i <= n; ++i) {\n\t\tbfs(i);\n\t\tfor (int j = 1; j <= n; ++j) if (dis[j] != 1004) b[i][dis[j]].set(j);\n\t\tfor (int j = 1; j <= n; ++j) b[i][j] |= b[i][j - 1];\n\t}\n\twhile (q--) {\n\t\tAlonerAKIOI = read(); bitset<1005> ans;\n\t\twhile (AlonerAKIOI--) {\n\t\t\ta = read(); bb = read();\n\t\t\tans |= b[a][bb];\n\t\t} printf(\"%d\\n\", ans.count());\n\t} return 0;\n}\n```\n\n~~\u4e0d\u597d\u610f\u601d\u4e4b\u524d\u7c98\u9519\u4ee3\u7801\u4e86\u3002\u3002\u3002~~",
        "postTime": 1573288264,
        "uid": 98096,
        "name": "Smallbasic",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5068 \u3010[Ynoi2015]\u6211\u56de\u6765\u4e86\u3011"
    },
    {
        "content": "\u505a\u6cd5\u8bc4\u4ef7\uff1a\u7b80\u5355\u7c97\u66b4\uff0c\u4ee3\u7801\u7b80\u77ed\n\n\n\n# noteskey\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u91cc\u6bcf\u6761\u8fb9\u7684\u957f\u5ea6\u4e3a 1 \uff0c\u8fd9\u662f\u6bd4\u8f83 nice \u7684\u4e00\u4e2a\u7279\u70b9\n\n\u7136\u540e\u70b9\u6570\u6bd4\u8f83\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u8dd1\u4e00\u904d bfs \u6c42\u51fa\u76f8\u5bf9\u6bcf\u4e2a\u70b9\u7684\u8ddd\u79bb\n\n\u63a5\u7740\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a bitset \u8bb0\u5f55\u79bb S \u70b9\u7684\u67d0\u4e2a\u8ddd\u79bb\u6709\u54ea\u4e9b\u70b9\n\n\u6700\u540e\u4f20\u9012\u95ed\u5305\u5f04\u4e2a\u524d\u7f00\u4fe1\u606f\u5c31\u597d\u4e86\n\n\n\u8be2\u95ee\u7684\u65f6\u5019\u6bcf\u6b21 ans \u6216\u4e0a\u5f53\u524d\u70b9\u7684\u524d\u7f00\u4fe1\u606f\u5c31\u597d\u4e86\n\n\n\n\uff08\u672c\u6765\u4ee5\u4e3a\u53ef\u80fd\u53c8\u662f \u5206\u5757\uff0c\u7ed3\u679c\u662fbitset \uff0c\u8fd8\u662f\u7b97\u6bd4\u8f83\u6e05\u65b0\u7684\u4e86\uff09\n\n\n```\n//by Judge\n#include<bits/stdc++.h>\n#define Rg register\n#define fp(i,a,b) for(Rg int i=(a),I=(b)+1;i<I;++i)\n#define go(G,u) for(Rg int i=0,I=G[u].size(),v;i<I&&(v=G[u][i]);++i)\nusing namespace std;\nconst int M=1003;\n#ifndef Judge\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\n#endif\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline bool cmin(int& a,int b){return a>b?a=b,1:0;}\ninline int read(){ int x=0,f=1; char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;\n} char sr[1<<21],z[20];int CCF=-1,Z;\ninline void Ot(){fwrite(sr,1,CCF+1,stdout),CCF=-1;}\ninline void print(int x,char chr='\\n'){\n    if(CCF>1<<20)Ot();if(x<0)sr[++CCF]=45,x=-x;\n    while(z[++Z]=x%10+48,x/=10);\n    while(sr[++CCF]=z[Z],--Z);sr[++CCF]=chr;\n} int n,m,q,dis[M][M];\nbitset<M> a[M][M]; vector<int> G[M];\ninline void bfs(int s,int* dis){\n\tstatic queue<int> q;\n\tfp(i,0,n) dis[i]=n+1;\n\tdis[s]=0,q.push(s);\n\tfor(int u;!q.empty();){\n\t\tu=q.front(),q.pop();\n\t\tgo(G,u) if(dis[v]==dis[0])\n\t\t\tdis[v]=dis[u]+1,q.push(v);\n\t}\n\tfp(i,1,n) a[s][dis[i]].set(i);\n\tfp(i,1,n) a[s][i]|=a[s][i-1];\n}\nint main(){ n=read(),m=read(),q=read(); int k,x,y;\n\tfp(i,1,m) x=read(),y=read(),G[x].push_back(y),G[y].push_back(x);\n\tfp(i,1,n) bfs(i,dis[i]);\n\tfp(kkk,1,q){ bitset<M> ans; k=read();\n\t\tfp(i,1,k) x=read(),y=read(),cmin(y,n),ans|=a[x][y];\n\t\tprint(ans.count());\n\t} return Ot(),0;\n}\n```\n\n",
        "postTime": 1554121210,
        "uid": 38576,
        "name": "J\u03bcdge",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5068 \u3010[Ynoi2015]\u6211\u56de\u6765\u4e86\u3011"
    },
    {
        "content": " \u5728\u592a\u9633\u897f\u659c\u7684\u8fd9\u4e2a\u4e16\u754c\u91cc\uff0c\u7f6e\u8eab\u5929\u4e0a\u4e4b\u68ee\u3002\u7b49\u8fd9\u573a\u6218\u4e89\u7ed3\u675f\u4e4b\u540e\uff0c\u4e0d\u5f52\u4e4b\u4eba\u4e0e\u671b\u773c\u6b32\u7a7f\u7684\u4eba\u4eec\uff0c \u4eba\u4eba\u672c\u7740\u6b63\u4e49\u4e4b\u540d\uff0c\u957f\u5b58\u4e0d\u706d\u7684\u8fc7\u53bb\u3001\u9010\u6e10\u6d88\u901d\u7684\u672a\u6765\u3002\u6211\u56de\u6765\u4e86\uff0c\u7eb5\u4f7f\u65e5\u8584\u897f\u5c71\uff0c\u5373\u4fbf\u770b\u4e0d\u5230\u672a\u6765\uff0c\u6b64\u65f6\u6b64\u523b\u7684\u5149\u8f89\uff0c\u76fc\u541b\u52ff\u5fd8\u3002\u2014\u2014\u2014\u2014\u4e16\u754c\u4e0a\u6700\u5e78\u798f\u7684\u5973\u5b69 \u73c2\u6735\u8389\n \n\n------------\n\u6784\u9020 bool \u6570\u7ec4 $f[i][j][k]$ \u8868\u793a $k$ \u5230 $i$ \u7684\u8ddd\u79bb\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8e $j$\u3002\n\n\u5f88\u663e\u7136\u65e2\u7136\u662f bool \u6570\u7ec4\uff0c\u53ef\u4ee5\u540c\u5341\u5206\u9ad8\u6548\u7684 bitset \u6765\u7ef4\u62a4\u3002\n\n\u4e8e\u662f\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a\u4e8c\u7ef4 bitset \u6570\u7ec4\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\uff0c\u6c42\u51fa\u5355\u6e90\u6700\u77ed\u8def\uff0c\u8fb9\u6743\u4e3a $1$ \uff0c\u7528 $dis[x]$\u8868\u793a\u5f53\u524d\u70b9\u5230 $x$ \u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\u3002\n\n\u56e0\u4e3a\u6570\u7ec4 $f[i][j][k]$ \u8868\u793a $k$ \u5230 $i$ \u7684\u8ddd\u79bb\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8e $j$ \u3002\n\n\u6240\u4ee5\u679a\u4e3e\u70b9 $j$ \uff1a $f[i][dis[j]][j]$ \u4e3a $1$ \u3002\n\n\u7136\u540e\u5bf9\u4e8e $f[i][dis[j]-k](1\u2264k\u2264dis[j])$ \u7684 bitset\uff0c\u53ef\u4ee5\u6ee1\u8db3 $f[i][j]|=f[i][j-1]$ \u9012\u63a8\u5373\u53ef\u3002\n\n\u5269\u4e0b\u7684\u7edf\u8ba1\u7b54\u6848\u5c31\u5341\u5206\u7b80\u5355\uff0c\u5f00\u4e00\u4e2a bool \u6570\u7ec4 $ans$\uff08\u5efa\u8bae\u7528 bitset \uff09\u3002\n\n\u5bf9\u4e8e\u6bcf\u6b21\u8be2\u95ee\uff0c$ans|=f[x][y] $ ,\u6700\u540e\u8f93\u51fa $ans$ \u4e2d\u6709\u591a\u5c11\u4e2a $1$ \uff0c\u53ef\u7528 bitset \u4e2d\u7684 count() \u51fd\u6570\u3002\n\n\u6ce8\u610f\uff0c\u6211\u7528\u524d\u5411\u661f\u4f1a TLE\uff0c\u4f3c\u4e4e\u53ea\u80fd vector\u3002\n\n\u8f9b\u82e6\u7ba1\u7406\u5458\u540c\u5fd7\u4e86\uff01\n\n\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<bitset>\n#include<queue>\n#include<algorithm>\n#include<cstring>\n#include<vector>\n#define N 1145\n//Whindsers:2022/6/30\nusing namespace std;\nint n,m,q,head[N],to[N],nxt[N],tot,a,dis[N];\nbitset<N>fifi[N][N];\nvector<int>g[N];\nvoid add(int u,int v){\n    g[u].push_back(v);\n}\nvoid bfs(int &s){\n    memset(dis,0x3f,sizeof(dis));\n    queue<int >q;\n    q.push(s);dis[s]=0;\n    while(!q.empty()){\n        int x=q.front();q.pop();\n        for(int y:g[x])if(dis[y]==dis[0])dis[y]=dis[x]+1,q.push(y); \n    }\n}\nsigned main(){\n    scanf(\"%d%d%d\",&n,&m,&q);\n    for(int i=1;i<=m;i++){\n        int x,y;\n        scanf(\"%d%d\",&x,&y);\n        add(x,y);add(y,x);\n    }\n    for(int i=1;i<=n;i++){\n        bfs(i);\n        for(int j=1;j<=n;j++)if(dis[j]!=dis[0])fifi[i][dis[j]][j]=1;\n        for(int j=1;j<=n;j++)fifi[i][j]|=fifi[i][j-1];\n    }\n    while(q--){\n        scanf(\"%d\",&a);bitset<N>ans;\n        while(a--){\n            int x,y;scanf(\"%d%d\",&x,&y);//y=min(y,n);\n            ans|=fifi[x][y];\n        } \n        printf(\"%d\\n\",ans.count());\n    }\n    return 0;\n}\n```\n",
        "postTime": 1656599656,
        "uid": 285617,
        "name": "\u9ed1\u5f71\u6d1e\u4eba",
        "ccfLevel": 5,
        "title": "P6328 \u6211\u662f\u4ed9\u4eba\u638c \u9898\u89e3"
    },
    {
        "content": "\u9ed8\u54c0\uff0c\u4eba\u751f\u7b2c\u4e8c\u9053Ynoi\u88ab\u8e22\u51faYnoi\u4e86\u3002\n\n>\u5728\u592a\u9633\u897f\u659c\u7684\u8fd9\u4e2a\u4e16\u754c\u91cc\uff0c\u7f6e\u8eab\u5929\u4e0a\u4e4b\u68ee\u3002\u7b49\u8fd9\u573a\u6218\u4e89\u7ed3\u675f\u4e4b\u540e\uff0c\u4e0d\u5f52\u4e4b\u4eba\u4e0e\u671b\u773c\u6b32\u7a7f\u7684\u4f17\u4eba\uff0c \u4eba\u4eba\u672c\u7740\u6b63\u4e49\u4e4b\u540d\uff0c\u957f\u5b58\u4e0d\u706d\u7684\u8fc7\u53bb\u3001\u9010\u6e10\u6d88\u901d\u7684\u672a\u6765\u3002`\u6211\u662f\u4ed9\u4eba\u638c`\uff0c\u7eb5\u4f7f\u65e5\u8584\u897f\u5c71\uff0c\u5373\u4fbf\u770b\u4e0d\u5230\u672a\u6765\uff0c\u6b64\u65f6\u6b64\u523b\u7684\u5149\u8f89\uff0c\u76fc\u541b\u52ff\u5fd8\u3002\u2014\u2014\u2014\u2014\u4e16\u754c\u4e0a\u6700\u5e78\u798f\u7684\u5973\u5b69 \u73c2\u6735\u8389\n\n\uff08\uff08\uff08\u6ed1\u7a3d\u3002\n\n\u5178\u578b\u7684\u7b97\u6cd5\u4e0d\u591f\u5e38\u6570\u6765\u51d1\u3002\n\n\u8003\u8651\u90bb\u63a5\u77e9\u9635\u3002\n\n\u6b63\u5e38\u7684\u90bb\u63a5\u77e9\u9635\uff0c\u662f $f_{i,j}$ \u8868\u793a\u70b9 $i$ \u5230\u70b9 $j$ \u7684\u6700\u77ed\u8ddd\u79bb\u3002\n\n\u8fd9\u6837\u56fa\u7136\u5f88\u597d\uff0c\u7a7a\u95f4 $\\operatorname{O}(n^2)$ \u3002\n\n\u4f46\u662f\uff0c\u67e5\u8be2\u4f1a\u7206\u3002\n\n\u6bd5\u7adf\uff0c\u67e5\u8be2duliu\u554a\uff0c\u4e0d\u77e5\u9053\u600e\u4e48\u7ef4\u62a4\u3002\n\n\u4e8e\u662f\u5f00\u59cb\u8f6c\u5411\u964d\u4f4e\u67e5\u8be2\u590d\u6742\u5ea6\u3002\n\n\u4e00\u4e2a\u597d\u7528\u7684\u601d\u8def\u662f\u524d\u7f00\u548c\uff0c\u91cd\u5b9a\u4e49\u90bb\u63a5\u77e9\u9635 $f_{i,j,k}$ \u8868\u793a\u662f\u5426\u80fd\u4ece $i$ \u5230 $j$ \u8ddd\u79bb $\\le k$\u3002\u7136\u540e\u67e5\u8be2\u590d\u6742\u5ea6\u5c31\u4e0b\u6765\u4e86\u3002\n\n\u4f46\u662f\u7a7a\u95f4\u5403\u4e0d\u6d88\u4e86\u554a\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u9884\u5904\u7406\u4e5f\u5403\u4e0d\u6d88\u554a\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\n\n\u600e\u4e48\u529e\uff1f\n\n\u518d\u601d\u8003\uff1a$\\text{bool}$ \u6570\u7ec4\uff0c\u8981\u652f\u6301\u7684\u64cd\u4f5c\u76f8\u5f53\u4e8e\u5feb\u901f\u8ba1\u7b97 $or$\u3002\n\n\u60f3\u5230\u4ec0\u4e48\uff1f\n\n**bitset or**\u3002\n\n\u8c14\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\n\n\u81ea\u5df1\u7406\u4e00\u4e0b\uff0c\u601d\u8def\u5230\u8fd9\u91cc\u5c31\u6ca1\u4e86\u3002\n\n\u63a5\u7740\u662f\u4ee3\u7801\u4e86\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#pragma GCC optimize(\"Ofast\",\"-funroll-loops\",\"-fdelete-null-pointer-checks\")\n#pragma GCC target(\"ssse3\",\"sse3\",\"sse2\",\"sse\",\"avx2\",\"avx\")\n#pragma GCC optimize(3)\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2),*p1++)\nchar buf[1<<23],*p1=buf,*p2=buf,obuf[1<<23],*O=obuf;\nusing namespace std;\nconst int N(1009);\nint d[1009];\nvector<int>e[1009];\ninline void add(const int&u,const int&v){\n    e[u].push_back(v),e[v].push_back(u);\n}\ninline void bfs(const int&s){\n\tqueue<int>q;\n\tq.push(s);\n\tmemset(d,0x3f,sizeof(d));\n\td[s]=0;\n\twhile(!q.empty()){\n\t\tint p=q.front();q.pop();\n\t\tfor(int i:e[p])if(d[i]==d[0])d[i]=d[p]+1,q.push(i);\n\t}\n}\ninline int read(){\n\tregister int c=getchar();\n\twhile(!isdigit(c))c=getchar();\n\tregister int x=c^48;\n\twhile(isdigit(c=getchar()))x=x*10+(c^48);\n\treturn x;\n}\nvoid print(int x) {\n    if(x>9)print(x/10);\n    *O++=x%10|48;\n}\nbitset<1009>mp[1009][1009];\nint main(){\n\tregister int n=read(),m=read(),q=read();\n\twhile(m--)add(read(),read());\n\tfor(register int i=1;i<=n;++i){\n\t\tbfs(i);\n\t\tfor(register int j=1;j<=n;++j)if(d[j]!=d[0])mp[i][d[j]].set(j);\n\t\tfor(register int j=1;j<=n;++j)mp[i][j]|=mp[i][j-1];\n\t}\n\twhile(q--){\n\t\tbitset<1009>bs; \n\t\tfor(register int a=read();a;--a){\n\t\t\tregister int x=read(),y=read();\n\t\t\tbs|=mp[x][y];\n\t\t}\n\t\tprint(bs.count());\n\t\t*O++='\\n';\n\t}\n\tfwrite(obuf,O-obuf,1,stdout);\n\treturn 0;\n} \n```\n\u77ed\u5c0f\u7cbe\u608d\uff0c\u4e0d\u61c2\u79c1\u4fe1\u3002\n\nTiglish\u7248\uff1a\n\n```cpp\nI have one const integer called N(1009);\nI have an integer array called d[N];\nI have one cpp::vector<int> array called e[N];\nI have an array of cpp::bitset<N> arrays called mp[N][N];\nI have one function called add(of one integer u as well as another integer v){\n\tUse the way of e[u].push_back(v);\n\tUse the way of e[v].push_back(u);\n}\nI have another function called bfs(of an integer s){\n\tI have one cpp::queue<int> called q;\n\tUse the way of q.push(s);\n\tUse the way of cpp::memset(d,0x3f,sizeof(d));\n    Let the value of d[s] be 0;\n\tWhile not q.empty() do{\n\t\tI have one integer p(q.front());\n\t\tUse the way of q.pop();\n\t\tFor each integer ww within e[p] do{\n\t\t\tIf d[ww] equals d[0] do{\n\t\t\t\tLet the value of d[ww] be the value of d[p] plus 1;\n\t\t\t\tUse the way of q.push(ww);\n\t\t\t}\n\t\t}\n\t}\n}\nI have another function called nextint(of nothing){\n\tI have one word c(cpp::getchar());\n    While !cpp::isdigit(c) do{\n        Let the value of c be the value of cpp::getchar();\n    }\n    I have one integer called x(c xor 48);\n    Let the value of c be the value of cpp::getchar();\n    While cpp::isdigit(c) do{\n        Let the value of x be the value of x times 10 plus (c xor 48); \n        Let the value of c be the value of cpp::getchar();\n    }\n\tReturn with the value of x;\n}\nLet us begin;\nI have some integers called n,m,q;\nUse the way of input(n,m,q);\nWhile the value of m is greater than 0 do{\n\tUse the way of add(nextint(),nextint());\n\tLet the value of m be the value of m minus 1;\n}\nI have an integer called i(1);\nWhile the value of i is less than the value of n plus 1 do{\n\tUse the way of bfs(i);\n\tI have an integer called j(1);\n\tWhile the value of j is less than the value of n plus 1 do{\n\t\tIf the value of d[j] is less than d[0] do{\n\t\t\tUse the way of mp[i][d[j]].set(j);\n\t\t}\n\t\tLet the value of j be the value of j plus 1;\n\t}\n\tLet the value of j be 1;\n\tWhile the value of j is less than the value of n plus 1 do{\n\t\tLet the value of mp[i][j] be the value of mp[i][j] bitor mp[i][j minus 1];\n\t\tLet the value of j be the value of j plus 1;\n\t}\n\tLet the value of i be the value of i plus 1;\n}\n\nWhile the value of q is greater than 0 do{\n\tI have one cpp::bitset<N> called bs;\n\tI have one integer called a(nextint());\n\tWhile the value of a is greater than 0 do{\n\t\tLet the value of bs be the value of bs bitor mp[nextint()][nextint()];\n\t\tLet the value of a be the value of a minus 1;\n\t}\n\tPrint out the value of bs.count();\n\tPrint out endl;\n\tLet the value of q be the value of q minus 1;\n}\nThat is all;\nThank you so much;\n```\n\n~~\u770b\u4e0d\u61c2\u7b2c\u4e00\u4e2a\u7684\u8bdd\u5c31\u628a\u7b2c\u4e8c\u4e2a\u5f53\u6ce8\u91ca\u770b\u5427~~\u3002\n\nOver.\n\n\u795d\u5927\u5bb6AC\uff01",
        "postTime": 1587949966,
        "uid": 338178,
        "name": "__\u767d\u8863\u6e21\u6c5f__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6328 \u3010\u6211\u662f\u4ed9\u4eba\u638c\u3011"
    },
    {
        "content": "### ~~\u4f17\u6240\u5468\u77e5lxl\u662f\u4e2a\u6bd2\u7624\uff0cYnoi\u9053\u9053\u90fd\u662f\u795e\u4ed9\u9898~~\uff0c\u8fd9\u9053\u9898\u6781\u5176\u826f\u5fc3\uff0c\u9898\u9762\u597d\u8bc4\n\n### [\u66f4\u597d\u7684\u9605\u8bfb](https://www.cnblogs.com/yzhang-rp-inf/p/10123550.html)\n\n### [\u539f\u9898\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/P5068)\n\n\u6211\u4eec\u5148\u73c2\u4ee5\u5728$O(n^2)$\u7684\u65f6\u95f4\u5185bfs\u6c42\u51fa\u4efb\u610f\u4e24\u70b9\u8ddd\u79bb\n\n\u6211\u4eec\u8003\u8651\u5982\u4f55\u8ba1\u7b97\u4ece\u4e00\u4e2a\u70b9\u5230\u6240\u6709\u70b9\u7684\u6700\u77ed\u8def\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8ek\u7684\u70b9\u7684\u6570\u91cf\n\n\u6211\u4eec\u5148\u6c42\u51fa\u6765\u4ece\u4e00\u4e2a\u70b9\u5230\u6240\u6709\u70b9\u7684\u6700\u77ed\u8def\u957f\u5ea6\u7b49\u4e8ek\u7684\u70b9\u7684\u6570\u91cf\uff0c\u8fd9\u4e2a\u73c2\u4ee5\u5728bfs\u641c\u7d22\u8fc7\u7a0b\u4e2d\u5b8c\u6210\n\n\u7edf\u8ba1\u6700\u77ed\u8def\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8ek\u7684\u70b9\u7684\u6570\u91cf\u73c2\u4ee5\u4f7f\u7528\u524d\u7f00\u548c\n\n\u8fd9\u91cc\u660e\u663e\u4e0d\u597d\u76f4\u63a5\u524d\u7f00\u548c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528bitset\u6765\u7ef4\u62a4\u4e00\u4e2a\u70b9\u5230\u6240\u6709\u70b9\u7684\u6700\u77ed\u8def\u957f\u5ea6\u5c0f\u4e8e\u7b49\u4e8ek\u7684\u70b9\u7684\u6570\u91cf\uff0c\u5982\u679c\u4e00\u4f4d\u662f1\uff0c\u5c31\u4ee3\u8868\u6ee1\u8db3\u6761\u4ef6\uff0c\u5426\u5219\u4e0d\u6ee1\u8db3\u6761\u4ef6\n\n\u505a\u524d\u7f00\u548c\u65f6\u5c31\u76f4\u63a5\u7528\u201c|\u201d\u5c31\u884c\u4e86\u3001\n\n\u4ee5\u4e0a\u641c\u7d22\u548c\u524d\u7f00\u548c\u7684\u590d\u6742\u5ea6\u4e3a$O(\\frac {n^3}{\\omega})$\uff08$\\omega$\u662f\u4e00\u4e2a\u5e38\u6570\uff0c\u8fd9\u91cc\u73c2\u4ee5\u53d632\uff09\n\n\u6700\u540e\u8be2\u95ee\u65f6\u5f00\u4e00\u4e2abitset\uff0c\u628a\u6240\u6709\u6761\u4ef6\u7684\u7b54\u6848\u201c|\u201d\u8d77\u6765\uff0c\u5c31\u662f\u6c42\u51fa\u6ee1\u8db3\u6761\u4ef6\u70b9\u7684\u4e2a\u6570\uff0c\u6700\u540e\u8f93\u51fa\u8fd9\u4e2abitset\u7684count()\uff0c\u4e5f\u5c31\u662f1\uff08\u6ee1\u8db3\uff09\u7684\u4e2a\u6570\n\n\u67e5\u8be2\u7684\u590d\u6742\u5ea6\u4e3a$O(\\frac {n \\sum_{i=1}^{q} a}{\\omega})$\n\n\u8fd9\u9053\u9898\u5b58\u8fb9\u4e0d\u80fd\u7528\u94fe\u5f0f\u524d\u5411\u661f\uff0c\u94fe\u5f0f\u524d\u5411\u661f\u4f1atle\uff0c\u56e0\u4e3a\u5730\u5740\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u6240\u4ee5\u7528vector\u5b58\u8fb9\u5c31\u884c\u4e86qaq\n\n\u603b\u590d\u6742\u5ea6\u4e3a$O(\\frac {n^3+n  \\sum_{i=1}^{q} a}{\\omega})$\n\n\u7ec6\u8282\u770b\u7a0b\u5e8f\n\n```cpp\n#include <bits/stdc++.h>\n#define N 1010\n#define M 100010\n#define getchar nc\nusing namespace std;\ninline char nc(){\n    static char buf[100000],*p1=buf,*p2=buf; \n    return p1==p2&&(p2=(p1=buf)+fread(buf,1,100000,stdin),p1==p2)?EOF:*p1++; \n}\ninline int read()\n{\n    register int x=0,f=1;register char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9')x=(x<<3)+(x<<1)+ch-'0',ch=getchar();\n    return x*f;\n}\ninline void write(register int x)\n{\n    if(!x)putchar('0');if(x<0)x=-x,putchar('-');\n    static int sta[20];register int tot=0;\n    while(x)sta[tot++]=x%10,x/=10;\n    while(tot)putchar(sta[--tot]+48);\n}\nvector <int> to[N];\nint n,m,q;\nint dis[N][N];\nbitset <N> dissum[N][N];\ninline void bfs(register int x,register int id)\n{\n    for(register int i=1;i<=n;++i)\n        dis[id][i]=1005;\n    queue <int> q;\n    q.push(x);\n    dis[id][x]=0;\n    while(!q.empty())\n    {\n        int u=q.front();\n        q.pop();\n        for(register int i=0;i<to[u].size();++i)\n            if(dis[id][to[u][i]]==1005)\n            {\n                dis[id][to[u][i]]=dis[id][u]+1;\n                q.push(to[u][i]);\n            }\n    }\n    for(register int i=1;i<=n;++i)\n        dissum[id][dis[id][i]].set(i);\n    for(register int i=1;i<=n;++i)\n        dissum[id][i]|=dissum[id][i-1];\n}\nint main()\n{\n    n=read(),m=read(),q=read();\n    while(m--)\n    {\n        int u=read(),v=read();\n        to[u].push_back(v),to[v].push_back(u);\n    }\n    for(register int i=1;i<=n;++i)\n        bfs(i,i);\n    while(q--)\n    {\n        bitset <N> ans;\n        int x=read();\n        while(x--)\n        {\n            int u=read(),k=read();\n            ans|=dissum[u][k];    \n        }\n        write(ans.count()),puts(\"\");\n    }\n    return 0;\n} \n```",
        "postTime": 1544860408,
        "uid": 37881,
        "name": "yzhang",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5068 \u3010[Ynoi2015]\u6211\u56de\u6765\u4e86\u3011"
    },
    {
        "content": "\u5b9a\u4e49 $f_{i,j,u}$ \u7528\u4e8e\u5b58\u50a8\u662f\u5426\u6ee1\u8db3 $dis(u,i)\\le j$\uff0c\u5b83\u7684\u503c\u4e3a True/False\uff0c\u5f88\u660e\u663e\u554a\uff0c\u8fd9\u4e2a\u7528 `std::bitset` \u5b58\u518d\u5408\u9002\u4e0d\u8fc7\u4e86\u3002\u6bcf\u6b21\u67e5\u8be2\u64cd\u4f5c\u5b9e\u9645\u4e0a\u5c31\u662f\u7ed9\u51fa\u4e00\u5806 $x_i$ \u548c $y_i$ \u6c42 $\\bigcup_{i=1}^{a} f_{x_i,y_i}$ \u4e2d True \u7684\u4e2a\u6570\u3002\n\n\u9884\u5904\u7406\u7684\u8bdd\u5982\u679c\u7528 Floyd \u662f $O(n^3)$ \u7684\uff0c\u8d85\u65f6\u3002\u6ce8\u610f\u5230\u8fb9\u6743\u5168\u90e8\u4e3a $1$\uff0c\u53ef\u4ee5\u7528 bfs \u5728 $O(n(n+m))=O(nm)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5185\u6c42\u51fa\u5168\u6e90\u6700\u77ed\u8def\u3002\u5b58\u8ddd\u79bb\u7684 `dis` \u6570\u7ec4\u4e5f\u53ea\u8981\u4e00\u7ef4\u7684\uff0c\u53ea\u9700\u8981\u8f6e\u6d41\u8dd1 $n$ \u904d\u6bcf\u6b21\u8d77\u70b9\u4e0d\u540c\u7684\u5355\u6e90\u6700\u77ed\u8def\u5e76\u4e14\u5728\u7b97\u51fa\u6765\u540e\u7acb\u5373\u628a\u7ed3\u679c\u5408\u5e76\u8fdb $f$ \u91cc\u5c31\u884c\u4e86\u3002\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint n,m,q,a,b,c,x,y,dis[1010];\nbitset<1010>f[1010][1010];\nvector<int>G[1010];\n\nvoid bfs(int s){\n    for(int i=1;i<=n;++i)\n        dis[i]=1540;\n    queue<int>Q;\n    Q.push(s);\n    dis[s]=0;\n    while(Q.size()){\n        int S=Q.front();\n        Q.pop();\n        for(int i:G[S])\n            if(dis[S]+1<dis[i]){\n                Q.push(i);\n                dis[i]=dis[S]+1;\n            }\n    }\n}\n\nint main(){\n    ios::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n    cin>>n>>m>>q;\n    for(int i=1;i<=m;++i){\n        cin>>a>>b;\n        G[a].push_back(b);\n        G[b].push_back(a);\n    }\n    for(int i=1;i<=n;++i){\n        bfs(i);\n        for(int j=1;j<=n;++j)\n            if(dis[j]<1540)\n                f[i][dis[j]].set(j);\n        for(int j=1;j<=n;++j)\n            f[i][j]|=f[i][j-1];\n    }\n    while(q--){\n        cin>>c;\n        bitset<1010>res;\n        while(c--){\n            cin>>a>>b;\n            res|=f[a][b];\n        }\n        cout<<res.count()<<\"\\n\";\n    }\n    return 0;\n}\n```\n\n\u8fd9\u9898\u5361\u4e86\u94fe\u5f0f\u524d\u5411\u661f\uff0c\u6b63\u597d\u6211\u4e5f\u4e0d\u4f1a\u5199\u3002\u5c31\u7528 `std::vector` \u5b58\u56fe\u4e86\u3002`std::bitset` \u5199\u90bb\u63a5\u77e9\u9635\u4f3c\u4e4e\u4e5f\u53ef\u4ee5\u3002",
        "postTime": 1682590930,
        "uid": 912248,
        "name": "FiveFourierTransform",
        "ccfLevel": 0,
        "title": "\u88ab\u5e9f\u6389\u5f97Ynoi\u30101\u3011"
    },
    {
        "content": "\u95ee\u4e00\u5806\u96c6\u5408\u7684\u4ea4\u7684\u70b9\u6570\uff0c\u8003\u8651\u7528 `bitset` \u7ef4\u62a4\u8fd9\u4e9b\u96c6\u5408\u3002\n\n\u9884\u5904\u7406 $b_{x,y}$ \u8868\u793a $\\{z|\\text{dist}(x,z)\\le y\\}$\uff0c\u5148 BFS \u51fa $a_{x,y}=\\{z|\\text{dist}(x,z)=y\\}$\uff0c\u5219 $b_{x,y}=\\bigcup\\limits_{i=0}^ya_{x,y}$\u3002\n\nBFS \u590d\u6742\u5ea6 $O(n(n+m))$\uff0c\u524d\u7f00\u6216\u590d\u6742\u5ea6 $O(\\dfrac{n^3}w)$\u3002\n\n\u7136\u540e\u8be2\u95ee\u65f6\u6c42 $|\\bigcap\\limits_{i=1}^ab_{x_i,y_i}|$ \u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(\\dfrac{n\\sum\\limits_{i=1}^qa}w)$\u3002\n\n\u70b9\u5c11\u8fb9\u591a\u7684\u65f6\u5019\u94fe\u5f0f\u524d\u5411\u661f\u4f1a\u8d77\u98de\uff0c\u6240\u4ee5 `vector` \u5b58\u56fe\u3002\n```cpp\n#include <queue>\n#include <vector>\n#include <bitset>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\nint n, m, q, d[1050];vector<int> e[1001];bitset<1001> b[1001][1001];\nint main()\n{\n\tscanf(\"%d%d%d\", &n, &m, &q);\n\tfor(int i = 0, u, v;i < m;++i)\n\t\tscanf(\"%d%d\", &u, &v), e[u].push_back(v), e[v].push_back(u);\n\tfor(int s = 1;s <= n;++s)\n\t{\n\t\tmemset(d, -1, sizeof d);b[s][d[s] = 0][s] = 1;queue<int> q;q.push(s);\n\t\twhile(!q.empty())\n\t\t{\n\t\t\tint u = q.front();q.pop();for(auto v : e[u])\n\t\t\t\tif(!~d[v]) q.push(v), b[s][d[v] = d[u] + 1][v] = 1;\n\t\t}\n\t\tfor(int i = 1;i <= n;++i) b[s][i] |= b[s][i - 1];\n\t}\n\tfor(int i = 0, a, x, y;i < m;++i)\n\t{\n\t\tscanf(\"%d\", &a);bitset<1001> q;while(a--)\n\t\t\tscanf(\"%d%d\", &x, &y), q |= b[x][y];\n\t\tprintf(\"%d\\n\", q.count());\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1680509859,
        "uid": 388651,
        "name": "5k_sync_closer",
        "ccfLevel": 7,
        "title": "P6328 \u6211\u662f\u4ed9\u4eba\u638c \u9898\u89e3"
    },
    {
        "content": ">\u5728\u592a\u9633\u897f\u659c\u7684\u8fd9\u4e2a\u4e16\u754c\u91cc\uff0c\u7f6e\u8eab\u5929\u4e0a\u4e4b\u68ee\u3002\u7b49\u8fd9\u573a\u6218\u4e89\u7ed3\u675f\u4e4b\u540e\uff0c\u4e0d\u5f52\u4e4b\u4eba\u4e0e\u671b\u773c\u6b32\u7a7f\u7684\u4eba\u4eec\uff0c \u4eba\u4eba\u672c\u7740\u6b63\u4e49\u4e4b\u540d\uff0c\u957f\u5b58\u4e0d\u706d\u7684\u8fc7\u53bb\u3001\u9010\u6e10\u6d88\u901d\u7684\u672a\u6765\u3002\u6211\u56de\u6765\u4e86\uff0c\u7eb5\u4f7f\u65e5\u8584\u897f\u5c71\uff0c\u5373\u4fbf\u770b\u4e0d\u5230\u672a\u6765\uff0c\u6b64\u65f6\u6b64\u523b\u7684\u5149\u8f89\uff0c\u76fc\u541b\u52ff\u5fd8\u3002\u2014\u2014\u4e16\u754c\u4e0a\u6700\u5e78\u798f\u7684\u5973\u5b69\n\n\u6211\u6c38\u8fdc\u559c\u6b22\u73c2\u6735\u8389\uff01\n\n\n\n------------\n\u9996\u5148\u5b9a\u4e49 $s_{i,j}$ \u8868\u793a\u4ee5 $i$ \u4e3a\u8d77\u70b9\uff0c\u8def\u7a0b\u4e0d\u8d85\u8fc7 $j$ \u53ef\u4ee5\u5230\u8fbe\u7684\u70b9\u7684\u96c6\u5408\uff0c\u5f53\u7136\u8fd9\u4e2a\u4e1c\u897f\u53ef\u4ee5\u5f00 bitset \u7ef4\u62a4\u3002$s_{i,j}$ \u7684\u7b2c $k$ \u4f4d\u4e3a $1$\uff0c\u5f53\u4e14\u4ec5\u5f53\u4ece\u70b9 $i$ \u8d70\u4e0d\u8d85\u8fc7\u8def\u7a0b $j$ \u53ef\u4ee5\u5230\u8fbe\u70b9 $k$\u3002\n\n\u4e3a\u4e86\u6c42\u51fa $s$\uff0c\u7531\u4e8e\u8fd9\u9898\u8fb9\u6743\u90fd\u662f $1$\uff0c\u6211\u4eec\u5bf9\u6bcf\u4e2a\u70b9\u8dd1 bfs \u6c42\u51fa\u8fd9\u4e2a\u70b9\u7684\u5355\u6e90\u6700\u77ed\u8def\uff0c\u5b9a\u4e49 $dis_j$ \u8868\u793a\u70b9 $j$ \u5230\u5f53\u524d\u7b97\u7684\u70b9 $i$ \u7684\u6700\u77ed\u8def\u957f\u5ea6\uff0c\u5219 $s_{i,dis_j,j}$ \u4e00\u5b9a\u662f $1$\u3002\n\n\u6b64\u5916\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u7ed3\u8bba\uff0c$s_{i,j-1}\\in s_{i,j}$\uff0c\u56de\u770b $s$ \u7684\u5b9a\u4e49\uff0c\u8def\u7a0b\u4e0d\u8d85\u8fc7 $j$ \u53ef\u5230\u8fbe\u7684\u70b9\u96c6\uff0c\u90a3\u4e48\u4e00\u5b9a\u5305\u542b\u4e86\u8def\u7a0b\u4e0d\u8d85\u8fc7 $j-1$ \u53ef\u5230\u8fbe\u7684\u70b9\u96c6\u3002\u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba\u5c31\u53ef\u4ee5\u9012\u63a8\u6c42\u51fa $s_i$\u3002\n\n\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u8dd1\u5b8c\u5355\u6e90\u6700\u77ed\u8def\u4e4b\u540e\u5c31\u53ef\u4ee5\u5b8c\u5168\u7b97\u51fa $s$\u3002\u5bf9\u4e8e\u4e4b\u540e $q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u65b0\u5b9a\u4e49\u4e00\u4e2a bitset \u7ef4\u62a4\u7684\u96c6\u5408 $s1$\uff0c\u8bfb\u5230 $x,y$ \u65f6 $s1$ \u5c31\u6216\u4e0a $s_{x,y}$\uff0c\u6700\u540e\u7b54\u6848\u5c31\u662f $s1$ \u4e2d $1$ \u7684\u6570\u91cf\u3002\n\n\u4e0d\u8fc7\u7ffb\u4e86\u4e00\u4e0b\u9898\u89e3\u533a\uff0c\u53d1\u73b0\u8fd9\u9898\u5361\u524d\u5411\u661f\uff0c\u6240\u4ee5\u5c31\u5199\u4e86 vector\u3002\n```\n#include<iostream>\n#include<bitset>\n#include<queue>\n#include<vector>\n#define ll long long\n#define qwq cout<<\"QwQ\"<<endl;\nusing namespace std;\nint n,m,q;\nconst int N=1010;\nvector<int>g[N];\nint dis[N];\nvoid bfs(int u){\n\tqueue<int>q; \n\tfor(int i=0;i<=n;++i) dis[i]=N;\n\tq.push(u); dis[u]=0;\n\twhile(!q.empty()){\n\t\tint h=q.front(); q.pop();\n\t\tfor(auto v:g[h]){\n\t\t\tif(dis[v]>dis[h]+1) dis[v]=dis[h]+1,q.push(v);\n\t\t}\n\t}\n}\nbitset<N>s[N][N];\nint main(){\n\tscanf(\"%d%d%d\",&n,&m,&q);\n\twhile(m--){\n\t\tint u,v; scanf(\"%d%d\",&u,&v);\n\t\tg[u].push_back(v); g[v].push_back(u);\n\t}\n\tfor(int i=1;i<=n;++i){\n\t\tbfs(i);\n\t\tfor(int j=1;j<=n;++j)\n\t\t\tif(dis[j]!=N) s[i][dis[j]][j]=1;\n\t\tfor(int j=1;j<=n;++j) s[i][j]|=s[i][j-1];\n\t}\n\twhile(q--){\n\t\tbitset<N>s1;\n\t\tint nn; scanf(\"%d\",&nn);\n\t\twhile(nn--){\n\t\t\tint x,y; scanf(\"%d%d\",&x,&y);\n\t\t\ts1|=s[x][y];\n\t\t}\n\t\tint ans=s1.count();\n\t\tprintf(\"%d\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1657856875,
        "uid": 398190,
        "name": "lanretE",
        "ccfLevel": 0,
        "title": "P6328 \u6211\u662f\u4ed9\u4eba\u638c \u9898\u89e3"
    },
    {
        "content": "\u6211\u4eec\u8003\u8651\u7528 bitset \u7ef4\u62a4\u3002          \n\n\u5b9a\u4e49\u4e00\u4e2a bitset $bs_{a,b}$ \u4e3a\u4ee5 $a$ \u70b9\u51fa\u53d1\uff0c\u8ddd\u79bb\u5c0f\u4e8e\u7b49\u4e8e $b$ \u7684\u70b9\u96c6\uff0c\u5176\u4e2d 1 \u8868\u793a\u6709\u8fd9\u4e2a\u70b9 0 \u8868\u793a\u6ca1\u8fd9\u4e2a\u70b9\u3002          \n\n\u8f93\u51fa\u7b54\u6848\u65f6\u6211\u4eec\u76f4\u63a5\u628a\u5bf9\u5e94\u7684 bitset \u5168\u90e8\u6216\u8d77\u6765\u5c31\u597d\u4e86\u3002         \n\n\u9884\u5904\u7406\u65f6\uff0c\u6211\u4eec\u5148\u7528 BFS \u9884\u5904\u7406\u51fa\u6765\u6bcf\u4e2a\u70b9\u5230\u5176\u4ed6\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u7136\u540e\u76f4\u63a5\u5f80\u6700\u521d\u59cb\u7684 bitset \u91cc\u9762\u586b\uff0c\u7136\u540e\u66b4\u529b\u4ece\u524d\u5f80\u540e\uff0c\u6267\u884c ```bs[a][b] |= bs[a][b - 1]``` \u7684\u64cd\u4f5c\u5373\u53ef\u5f97\u5230\u6240\u6709\u70b9\u7684\u70b9\u96c6\uff0c\u8fd9\u91cc\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(\\frac{n ^ 3}{w})$ \u7684\u3002                 \n\n\u67e5\u8be2\u65f6\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(\\frac{n \\sum a}{w})$ \u7684\uff0c\u5361\u6ee1\u5c31\u662f $O(\\frac{10 ^ 9}{w})$ \u7684\u4e00\u4e2a\u65f6\u95f4\u590d\u6742\u5ea6\uff0cbitset \u53ef\u4ee5\u8dd1\u3002                  \n\n```cpp\n#include \"bits/stdc++.h\"\nusing namespace std;\nqueue<int> q;\nint dis[1005],n,m,ques;\nbitset<1005> bs[1005][1005],bq;\nvector<int> G[1005];\nbool flag[1005]; \nvoid BFS(int x)\n{\n\tfor(int i = 1 ; i <= n ; i ++) dis[i] = 1e9 , flag[i] = 0;\n\tdis[x] = 0 , flag[x] = 1;\n\twhile(!q.empty()) q.pop();\n\tq.push(x);\n\twhile(!q.empty())\n\t{\n\t\tint p = q.front();q.pop();\n\t\tfor(int i = 0 ; i < G[p].size() ; i ++) \n\t\t{\n\t\t\tif(flag[G[p][i]]) continue;\n\t\t\tflag[G[p][i]] |= 1 , dis[G[p][i]] = dis[p] + 1 , q.push(G[p][i]);\n\t\t}\n\t}\n\tfor(int i = 1 ; i <= n ; i ++) \n\t{\n\t\tif(dis[i] == 1e9) continue; \n\t\tbs[x][dis[i]].set(i , 1);\n\t}\n\tfor(int i = 1 ; i <= n ; i ++) bs[x][i] |= bs[x][i - 1];\n}\nint main()\n{\n\tscanf(\"%d %d %d\",&n,&m,&ques);\n\tfor(int i = 1 ; i <= m ; i ++)\n\t{\n\t\tint x,y;scanf(\"%d %d\",&x,&y);\n\t\tG[x].push_back(y) , G[y].push_back(x);\n\t}\n\tfor(int i = 1 ; i <= n ; i ++) BFS(i);\n\tfor(int i = 1 ; i <= ques ; i ++)\n\t{\n\t\tint num;scanf(\"%d\",&num);\n\t\tbq.reset();\n\t\twhile(num --)\n\t\t{\n\t\t\tint a,b;scanf(\"%d %d\",&a,&b);\n\t\t\tbq |= bs[a][b];\n\t\t}\n\t\tprintf(\"%d\\n\",bq.count());\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1622130304,
        "uid": 132533,
        "name": "Hakuoro",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6328 \u6211\u662f\u4ed9\u4eba\u638c"
    }
]
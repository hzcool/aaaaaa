[
    {
        "content": "## \u9898\u76ee\u5206\u6790\n\n~~\u4e00\u5f00\u59cb\u6211\u4ee5\u4e3a\u662f\u6811\u5f62dp~~ \u540e\u6765\u60f3\u4e86\u60f3\u53d1\u73b0\u662f\u9053\u8d2a\u5fc3\u7684\u5927\u6c34\u9898\u3002\n\n\u9996\u5148\u663e\u800c\u6613\u89c1\u7684\u662f\u653e\u8d8a\u5c11\u7684\u88c5\u9970\u8d8a\u597d\uff0c\u90a3\u6211\u4eec\u600e\u4e48\u627e\u6700\u5c0f\u503c\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u6bd4\u8f83\u6bcf\u4e00\u68f5\u5b50\u6811\u5185\u7684\u6839\u7684Di\u548c\u8fd9\u68f5\u5b50\u6811\u5185\u5176\u5b83\u8282\u70b9\u7684Di\u548c\u3002\u5982\u679c\u6839\u7684Di\u5c0f\u4e8e\u8fd9\u68f5\u5b50\u6811\u5185\u5176\u5b83\u8282\u70b9\u7684Di\u548c\uff0c\u6211\u4eec\u5c31\u628a\u6839\u7684Di\u8d4b\u6210\u8fd9\u68f5\u5b50\u6811\u5185\u5176\u5b83\u8282\u70b9\u7684Di\u548c\u3002\u5982\u679c\u5927\u4e8e\uff0c\u662f\u4e0d\u662f\u8fd8\u6709\u88c5\u9970\u6ca1\u653e\uff0c\u90a3\u6211\u4eec\u5c31\u628a\u591a\u4f59\u7684\u88c5\u9970\u653e\u5230\u8fd9\u68f5\u5b50\u6811\u5185Ci\u6700\u5c0f\u7684\u8282\u70b9\u4e0a\u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,root;\nlong long c[100005],p[100005];\nstruct node\n{\n\tint ver;\n\tint next;\n}e[200005];\nint h[200005],cnt=0;\nvoid add(int u,int v)\n{\n\te[++cnt].ver=v;\n\te[cnt].next=h[u];\n\th[u]=cnt;\n}\nlong long minn[100005];//\u5b58\u6700\u5c0f\u503c; \nvoid dfs(int x,int fa)\n{\n\tminn[x]=p[x];\n\tfor(int i=h[x];i;i=e[i].next)\n\t{\n\t\tint y=e[i].ver;\n\t\tif(y==fa) continue;\n\t\tdfs(y,x);\n\t\tminn[x]=min(minn[x],minn[y]);\t\n\t}\n}\nlong long sum[100005];//sum\u8868\u793a\u8fd9\u68f5\u6811\u5185\u653e\u591a\u5c11\u88c5\u9970; \nlong long ans=0;\nvoid dfs1(int x,int fa)\n{\n\tfor(int i=h[x];i;i=e[i].next)\n\t{\n\t\tint y=e[i].ver;\n\t\tif(y==fa) continue;\n\t\tdfs1(y,x);\n\t\tsum[x]+=sum[y];\n\t}\n\tif(sum[x]<c[x])\n\t{\n\t\tans+=(c[x]-sum[x])*minn[x];\n\t\tsum[x]=c[x];//\n\t}\n}\nint main()\n{\n//\tfreopen(\"tdec.in\",\"r\",stdin);\n//\tfreopen(\"tdec.out\",\"w\",stdout);\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint x;\n\t\tscanf(\"%d%lld%lld\",&x,&c[i],&p[i]);\n\t\tif(x==-1) root=x;\n\t\telse add(x,i),add(i,x);\n\t}\n\tdfs(1,-1);\n\tdfs1(1,-1);\n\tcout<<ans;\n}\n```\n",
        "postTime": 1567920577,
        "uid": 112219,
        "name": "fmx0219",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3018 \u3010[USACO11MAR]\u6811\u88c5\u9970Tree Decoration\u3011"
    },
    {
        "content": "### \u4e00\u9053\u4e3a\u6570\u4e0d\u591a\u7684 ~~\u81ea\u5df1\u60f3\u51fa\u6765\u7684~~ \u597d\u9898\n\n### \u5199\u7bc7\u6587\u7ae0\u7eaa\u5ff5\u4e00\u4e0bhhhhh\n\n\u8fd9\u9053\u9898\uff0c\u4e4d\u4e00\u770b\uff0c\u54c7\uff0c\u6811\u5f62dp......\n\n~~\u4e0d\u4f1a\u554a~~\u4ed4\u7ec6\u89c2\u5bdf\u6570\u636e\u8303\u56f4\uff0c\u6211\u4eec\u53d1\u73b0hhhh\u6570\u7ec4\u90fd\u5f00\u4e0d\u4e0b\n\n\u8fd9\u5c31\u662f\u9053dfs\u9898\n\n\u601d\u8def\uff1a\n* \u5bf9\u4e8e\u6bcf\u68f5\u5b50\u6811\uff0c\u8bb0\u5f55\u653e\u4e00\u4e2a\u7269\u54c1\u7684\u6700\u5c0f\u4ee3\u4ef7\uff08\u7528 _mintree_ \u8868\u793a\uff0c\u521d\u59cb\u503c\u4e3a _c_ ,\u6211\u61d2\uff0c\u76f4\u63a5\u7528\u8fd9\u4e2a\u5b58\u7684 _c_ \uff09\u548c\u4ee5\u5f53\u524d\u7ed3\u70b9\u4e3a\u6839\u7684\u5b50\u6811\u4e2d\uff0c\u5df2\u7ecf\u88c5\u9970\u7684\u7269\u54c1\u6570\u91cf\uff08\u7528 _now_ \u8868\u793a\uff09;\n* \u5982\u679c\u5df2\u7ecf\u6ca1\u6709\u5b50\u8282\u70b9\u53ef\u4ee5\u66f4\u65b0\u8fd9\u4e2a\u70b9\uff0c\u6211\u4eec\u5c31\u628a\u5b83\u52a0\u5165\u961f\u5217\uff0c\u7528\u4ee5\u66f4\u65b0\u5176\u5b83\u70b9 \n * \u8fd9\u91cc\u7c7b\u4f3c\u62d3\u6251\u6392\u5e8f\uff0c\u7ef4\u62a4\u6bcf\u4e2a\u70b9\u5165\u5ea6 _ind_ \uff0c\u5165\u5ea6\u4e3a\u96f6\u5219\u5165\u961f\uff1b\n * \u5f53\u7136\u53f6\u5b50\u7ed3\u70b9\u5165\u5ea6\u4e3a\u96f6\uff0c\u76f4\u63a5\u52a0\u5165\u961f\u5217\uff1b\n* \u7136\u540e\u5c31\u5f00\u5f00\u5fc3\u5fc3\u5730\u66f4\u65b0\u5c31\u597d\u5566\n\n**\u8fd8\u6709\u5927\u5bb6\u8bb0\u5f97\u5f00long long\uff0c\u4e0d\u5f00\u4f1aliangliang\uff08 _now_ \u6570\u7ec4\u548c\u7b54\u6848 _ans_ \uff09**\n\n\n\u4ee3\u7801emmm\uff1a\n \n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\n\nusing namespace std;\n\ntypedef long long ll;\nconst int maxn=100050;\n\nint n;\nll f[maxn],d[maxn],ind[maxn],min_tree[maxn],now[maxn];\n// f[i]\u7236\u4eb2\u8282\u70b9 d[i]\u8981\u6c42\u7269\u54c1\u6570 c[i]\u82b1\u8d39 ind[i]\u5165\u5ea6 min_tree[i]\u5b50\u6811\u4e2d\u7269\u54c1\u6700\u5c0f\u82b1\u8d39 now[i]\u5f53\u524d\u7269\u54c1\u6570 \nll ans=0;\n\nvoid read(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld%lld%lld\",&f[i],&d[i],&min_tree[i]);\n\t\tif(f[i]!=-1)ind[f[i]]++;\n\t}\n}\n\nvoid work(){\n\tqueue<int> q;\n\tfor(int i=1;i<=n;i++)\n\t\tif(ind[i]==0)q.push(i);\n\twhile(!q.empty()){\n\t\tint t=q.front();\n\t\tif(d[t]>now[t])ans+=1ll*min_tree[t]*(d[t]-now[t]);\n\t\tif(t!=1){\n\t\tmin_tree[f[t]]=min(min_tree[f[t]],min_tree[t]);\n\t\tind[f[t]]--;\n\t\tnow[f[t]]+=max(d[t],now[t]);\t\n\t\tif(ind[f[t]]==0)q.push(f[t]);\n\t\t}\n\t\t \n\t\tq.pop();\n\t}\n}\n\nvoid print(){\n\tprintf(\"%lld\\n\",ans);\n}\n\nint main(){\n\tread();\n\twork();\n\tprint();\n}\n```\n\n",
        "postTime": 1539437307,
        "uid": 54386,
        "name": "hhhhyq",
        "ccfLevel": 0,
        "title": "\u4e00\u9053\u9898emmm"
    },
    {
        "content": "\u53ef\u4ee5\u7528dfs\u9012\u5f52\u627e\u4e00\u627e\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int SN = 100000 + 10;\n\nLL f[SN], t[SN], c[SN], now[SN], head[SN];\nLL n, ans, que[SN], num, root;\n\nbool vis[SN];\n\nstruct Edge {\n    int from,to,next;\n}E[SN<<1];\n\nvoid dfs(int u) {\n    vis[u] = 1;\n    for(int i = head[u]; i ;i = E[i].next) {\n        if(vis[E[i].to])    continue;\n        dfs(E[i].to);\n        c[u] = min(c[u] , c[E[i].to]); //\u5c0f\u8d2a\u5fc3\uff0c\u66f4\u65b0\u6811\u4e2d\u6700\u5c0f\u7684\u82b1\u8d39\n        now[u] += now[E[i].to]; //\u66f4\u65b0\u4e00\u4e0b\u5f53\u524d\u4ee5i\u4e3a\u8282\u70b9\u7684\u5b50\u6811\u4e2d\u8d2d\u4e70\u7684\u4e2a\u6570\n    }\n    if(now[u] < t[u]) {\n        ans += (t[u]-now[u]) * c[u]; //\u5982\u679c\u4e0d\u591f\uff0c\u63a5\u7740\u4e70\n        now[u] = t[u];\n    }\n}\n\nvoid Add(int u,int v) {\n    E[++num].from = u;\n    E[num].to = v;\n    E[num].next = head[u];\n    head[u] = num;\n}\n\n\nint main() {\n\n    scanf(\"%lld\",&n);\n    \n    for(int i = 1; i <= n; i++) {\n        scanf(\"%lld%lld%lld\",&f[i],&t[i],&c[i]);\n        if(f[i] != -1)\n        Add(i,f[i]),Add(f[i],i); //\u52a0\u65e0\u5411\u8fb9\n        else root = i;\n    }\n\n    dfs(root);\n    \n    printf(\"%lld\\n\",ans);\n    \n    return 0;\n\n}\n```",
        "postTime": 1493982823,
        "uid": 21671,
        "name": "Idvz",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P3018 \u3010[USACO11MAR]\u6811\u88c5\u9970Tree Decoration\u3011"
    },
    {
        "content": "\u6211\u8fd9\u9898\u7684\u601d\u8def\u4f7f\u7528 DFS \u8ba1\u7b97\u7b54\u6848\u3002\n\n\u4e0d\u59a8\u8bbe $sum_x$ \u8868\u793a\u4ee5 $x$ \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\u88c5\u9970\u7269\u6570\u91cf\u4e4b\u548c\uff0c$min_x$ \u8868\u793a\u4ee5 $x$ \u4e3a\u6839\u7684\u5b50\u6811\u4e2d\u5355\u4e2a\u88c5\u9970\u7269\u6700\u5c0f\u7684\u4ee3\u4ef7\u3002\n\n\u663e\u7136\uff0c\u82e5 $x$ \u6ca1\u6709\u513f\u5b50\u8282\u70b9\uff0c\u5219 $sum_x=d_x$ \u3002\n\n\u5bf9\u4e8e\u8ba1\u7b97\u73a9\u6bcf\u4e00\u4e2a\u5b50\u6811\u7684 $x$\uff0c\u82e5 $sum_x<d_x$\uff0c\u6211\u4eec\u9700\u8981\u518d\u82b1 $min_x \\times (d_x-sum_x)$ \u7684\u4ee3\u4ef7\u6765\u8fbe\u5230\u9700\u6c42\u3002\n\nCode:\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long n,c[100001],t[100001],fa,sum[100001],mn[100001];\nlong long ans;\nvector<long long> vec[100001];\nvoid dfs(long long x)\n{\n\tmn[x]=t[x];\n\tfor(long long i=0;i<vec[x].size();i++){\n\t\tlong long y=vec[x][i];\n\t\tdfs(y);\n\t\tmn[x]=min(mn[x],mn[y]);\n\t\tsum[x]+=sum[y];\n\t}\n\tif(sum[x]<c[x]){\n\t\tans+=(long long)((c[x]-sum[x])*mn[x]);\n\t\tsum[x]=c[x];\n\t}\n}\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%lld%lld%lld\",&fa,&c[i],&t[i]);\n\t\tif(i!=1) vec[fa].push_back(i);\n\t}\n\tdfs(1);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1643159888,
        "uid": 486484,
        "name": "Gaode_Sean",
        "ccfLevel": 6,
        "title": "P3018 \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u867d\u7136\u662f\u9053\u6811\u5f62dp\uff0c\u4f46\u5176\u5b9e\u4e3b\u8981\u8fd0\u7528\u8d2a\u5fc3\u601d\u60f3\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\uff0c\u6211\u4eec\u5c31\u9009\u62e9\u5b50\u6811\u5185\u82b1\u8d39\u6700\u5c0f\u7684\u8282\u70b9\uff0c\u5728\u4e0a\u9762\u653e\u5c31\u884c\u4e86\u3002\n\n\u7edf\u8ba1\u7b54\u6848\u65f6\uff0c\u5982\u679c\u5b50\u6811\u5185\u5df2\u653e\u7f6e\u7684\u4e2a\u6570\u5927\u4e8e\u5f53\u524d\u8282\u70b9\u7684\u6240\u9700\u6570\uff0c\u4e0d\u7528\u7ba1\u4e86\uff0c\u5982\u679c\u5c0f\u4e8e\uff0c\u7f3a\u591a\u5c11\u8865\u4e0a\u53bb\u5c31\u884c\u4e86\uff0c\u6700\u540e\u8bb0\u5f97\u5f00long long \u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1e6+5;\ntypedef long long ll;\nint head[N],ver[N],net[N],tot;\nint n,c[N],minc[N],d[N];\nll ans,siz[N];\nvoid add(int a,int b){\n\tnet[++tot]=head[a];\n\thead[a]=tot;\n\tver[tot]=b;\n}\nvoid dfs(int x,int fa){\n\tminc[x]=c[x];\n\tsiz[x]=d[x]; \n\tll sum=0;\n\tfor(int i=head[x];i;i=net[i]){\n\t\tint v=ver[i];\n\t\tif(v==fa)continue;\n\t\tdfs(v,x);\n\t\tminc[x]=min(minc[x],minc[v]);//\u5bfb\u627e\u5b50\u6811\u5185\u82b1\u8d39\u6700\u5c11\u7684\u8282\u70b9 \n\t\tsum+=siz[v];//\u8bb0\u5f55\u5f53\u524d\u5b50\u6811\u5185\u5df2\u653e\u4e86\u591a\u5c11\u4e2a \n\t}\n\tif(sum<siz[x]){//\u4e0d\u591f\u5c31\u8865\u4e0a \n\t\tans+=(siz[x]-sum)*(ll)minc[x]; \n\t}\n\telse siz[x]=sum;\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tint j;\n\t\tscanf(\"%d%d%d\",&j,&d[i],&c[i]);\n\t\tif(i==1)continue;\n\t\tadd(i,j);\n\t\tadd(j,i);\n\t}\n\tdfs(1,0);\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1614052548,
        "uid": 277664,
        "name": "\u968f\u4fbfAK",
        "ccfLevel": 6,
        "title": "[USACO11MAR]Tree Decoration G"
    },
    {
        "content": "\u8fd9\u9053\u9898\u8003\u5bdf\u56fe\u7684\u8fd0\u7528\n\n\u53ef\u4ee5\u4ece\u6811\u7684\u53f6\u8282\u70b9\u5411\u4e0a\u63a8\uff0c\u63a8\u51fa\u6bcf\u4e2a\u8282\u70b9\u7684\u4ef7\u503c\n\n\u518d\u8fd0\u7528\u6a21\u62df\u3002\n\n\u6ce8\u610f\u6709long long\n\n\u7b97\u6df1\u5ea6\u548c\u63a8\u4ef7\u503c\u6ce8\u610f\u4e0b\u3002\n\n\u4e0b\u9762\u4e0a\u4ee3\u7801\uff08\u4ee3\u7801\u4e11\uff0c\u8f7b\u55b7\uff09\n\n\u6ce8\u91ca\u81ea\u8ba4\u4e3a\u5f88\u8be6\u7ec6\u4e86\uff0c\u4e0d\u61c2\u53ef\u4ee5\u79c1\u4fe1\u6211\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct u{\n    int fa,d,c,m,deep,id;//fa\u662f\u7236\u4eb2\uff0cd\u662f\u9700\u6c42\uff0cc\u662f\u8be5\u70b9\u82b1\u8d39\uff0ck\u8be5\u70b9\u5b50\u6811\u62e5\u6709\u7684\u88c5\u9970\u7269\u6570 \n\tlong long int k;    //m\u662f\u8be5\u70b9\u5b50\u6811\u7684\u6700\u5c0f\u82b1\u8d39\uff0cdeep\u662f\u6df1\u5ea6\uff0cid\u662f\u8be5\u70b9\u7f16\u53f7 \n    vector<int> son;     //son\u662f\u513f\u5b50\u8868 \n};\nu A[200000];//100000\u4e2a\u70b9 \u5f00\u4e24\u500d \nint n;//n\u662f\u70b9\u4e2a\u6570 \nint ftcur[200000];//\u662f\u6392\u5e8f\u540e\u539f\u7f16\u53f7\u5411\u65b0\u7f16\u53f7\u7684\u8f6c\u53d8 \u5177\u4f53\u770bA\u5904 \ninline int read() {//\u5feb\u8bfb \n    char ch = getchar(); int x = 0, f = 1;\n    while(ch < '0' || ch > '9') {\n        if(ch == '-') f = -1;\n        ch = getchar();\n    } while('0' <= ch && ch <= '9') {\n        x = x * 10 + ch - '0';\n        ch = getchar();\n    } return x * f;\n}\nbool cmp(u a,u b)//\u6309\u6df1\u5ea6\u5012\u5e8f\u6392\u5e8f \n{\n    return a.deep>b.deep;\n}\nvoid dfs(int step,int cur)//\u786e\u5b9a\u6df1\u5ea6 step\u662f\u5f53\u524d\u6df1\u5ea6\uff0ccur\u662f\u5f53\u524d\u70b9 \n{\n    A[cur].deep=step;//\u586b\u4e0a\u6df1\u5ea6 \n    for(int i=0;i<A[cur].son.size();i++)//\u904d\u5386\u513f\u5b50 \n    {\n        dfs(step+1,A[cur].son[i]);\n    }\n}\n\nint main()\n{\n    n=read();\n    for(int i=1;i<=n;i++)\n    {\n        A[i].fa=read();\n\t\tA[i].d=read();\n\t\tA[i].c=read();\n        A[i].id=i;//\u8bb0\u5f55\u7f16\u53f7 \n        if(i!=1)//\u4e0d\u6807\u6ce8\u4f1a\u8d8a\u754c \n        A[A[i].fa].son.push_back(i);//\u8bb0\u4e3a\u7236\u4eb2\u7684\u513f\u5b50 \n    }\n\n    dfs(1,1);//\u8bb0\u5f55\u6df1\u5ea6 \n    sort(A+1,A+n+1,cmp);//\u6309\u6df1\u5ea6\u5012\u5e8f \n    for(int i=1;i<=n;i++)//A\n\t{\n\t\tftcur[A[i].id]=i;//\u6b64\u5904\u56e0\u4e3a\u6392\u5e8f\u540e\u7236\u4eb2\u4f1a\u51fa\u95ee\u9898\uff0c\u9700\u8981\u786e\u5b9a\u539f\u70b9\u5728\u6392\u5e8f\u8fc7\u540e\u7684\u4f4d\u7f6e\n\t\t \t\t\t\t //\u6b64\u5904\u5bf9\u65b0\u7f16\u53f7\u548c\u539f\u7f16\u53f7\u8fdb\u884c\u5bf9\u5e94 \n\t} \n    for(int i=1;i<=n;i++)//\u8bb0\u5f55\u66f4\u6539\u8fc7\u7684\u7236\u4eb2\u7f16\u53f7 \n    {\n        A[i].son.clear();//\u6e05\u7a7a\u513f\u5b50 \u7b49\u4e0b\u4fee\u6539 \n        if(i!=n)//\u4e0d\u6807\u6ce8\u4f1a\u8d8a\u754c \n        A[i].fa=ftcur[A[i].fa];//\u66f4\u65b0\u539f\u7236\u4eb2\u5728\u6392\u5e8f\u540e\u7684\u4f4d\u7f6e \n    }\n    for(int i=1;i<=n;i++)\n    {\n    \tif(i!=n)//\u4e0d\u6807\u6ce8\u4f1a\u8d8a\u754c \n        A[A[i].fa].son.push_back(i);//\u66f4\u65b0\u513f\u5b50\u4eec\uff0c\u521a\u521a\u6e05\u7a7a\u8fc7\u4e86 \n    }\n    long long int ans=0;//\u6ce8\u610flong long \n    for(int i=1;i<=n;i++)\n    {\n        A[i].m=A[i].c;//\u8ba1\u7b97\u5b50\u6811\u4e0a\u7684\u6700\u5c0f\u4ef7\u683c \n        for(int j=0;j<A[i].son.size();j++)//\u904d\u5386\u513f\u5b50 \n        { \n            A[i].m=min(A[A[i].son[j]].m,A[i].m);//\u66f4\u65b0\u4ef7\u683c \n        }\n    }\n    long long int q;//\u4e0d\u52a0longlong\u4f1a\u6709\u7cbe\u5ea6\u95ee\u9898 \n    for(int i=1;i<=n;i++)\n    {\n        if(A[i].k<=A[i].d)\n        {\n        \tq=(A[i].d-A[i].k)*A[i].m;//\u7b97\u51fa\u9700\u8981\u6dfb\u52a0\u7684\u88c5\u9970\u7269\u7684\u4ef7\u683c \n            ans+=q;//\u7ed9ans\u52a0\u4e0a \n            A[i].k=A[i].d;//\u66f4\u65b0\u8be5\u70b9\u7684\u88c5\u9970\u7269\u6570\n        }\n        A[A[i].fa].k+=A[i].k;//\u7236\u4eb2\u66f4\u65b0 \n    }\n    cout<<ans;//\u8f93\u51fa \n    return 0;\n\n}\n```",
        "postTime": 1531884066,
        "uid": 38832,
        "name": "tumu1t",
        "ccfLevel": 7,
        "title": "P3018"
    },
    {
        "content": "\u672c\u849f\u84bb\u521a\u4ece[P2996](https://www.luogu.com.cn/problem/P2996)\u6765\u7684\u3002\u8981\u662f\u6ca1\u6709\u60f3\u51fa\u6765\u7684\u670b\u53cb\u4e5f\u53ef\u4ee5\u5148\u53bb\u770b\u770b\u90a3\u9053\u9898\n## \u9898\u610f\n\u5c31\u662f\u6709\u4e00\u68f5\u6811\uff0c\u8fd9\u4e2a\u6570\u7684\u6bcf\u4e2a\u8282\u70b9\u90fd\u6709\u4e00\u4e2a\u5c5e\u4e8e\u81ea\u5df1\u7684\u6570\u5b57\uff0c\u8fd9\u4e2a\u6570\u5b57\u8981\u6bd4\u4ee5\u8fd9\u4e2a\u8282\u70b9\u4e3a\u6839\u7684\u5b50\u6811\u4e0a\u6240\u6709\u8282\u70b9\u6302\u7684\u4e1c\u897f\u7684\u603b\u6570\u8fd8\u5927\u6216\u76f8\u7b49\u3002\u6709\u70b9\u62bd\u8c61\uff0c\u6211\u4eec\u770b\u5f20\u56fe\u3002\n\n![\u9898\u610f](https://cdn.luogu.com.cn/upload/image_hosting/wrd8ynwb.png)\n\n\uff08\u5982\u56fe\uff09 i \u8fd9\u4e2a\u8282\u70b9\u7684\u6570\u5b57\u5c31\u662f $d_i$\uff0c$d_i$ \u8981\u6bd4\u6574\u68f5\u4ee5 i \u4e3a\u6839\u8282\u70b9\u7684\u6811\u4e0a\u6240\u6709\u4e1c\u897f\u7684\u603b\u548c\u8fd8\u5927\u6216\u76f8\u7b49\u3002\u6bcf\u4e2a\u8282\u70b9\u6302\u4e1c\u897f\u7684\u8d39\u7528\u4e0d\u4e00\u6837\u3002\u6c42\u6700\u5c0f\u8d39\u7528\u3002\n## \u5206\u6790\n\n\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u4e00\u9053\u6811\u5f62 dp \u9898\u3002\u6811\u5f62 dp \u7684\u6a21\u677f\u9898\u53ef\u4ee5\u53c2\u770b\u8fd9[\u4e00\u9053\u9898](https://www.luogu.com.cn/problem/P1352)\n\n\u6811\u5f62 dp \u7684\u666e\u901a dfs \u76f8\u4fe1\u5927\u5bb6\u90fd\u4f1a\u5199\uff0c\u8fd9\u8fb9\u8bb2\u4e00\u8bb2\u8fd9\u9053\u9898\u4e2d\u72ec\u7279\u7684\uff0c\u600e\u4e48\u6302\u4e1c\u897f\u3002\u5148\u770b\u4e00\u5f20\u56fe\u3002\n![\u5206\u6790](https://cdn.luogu.com.cn/upload/image_hosting/u8latm6h.png)\n\n\u5728\u8fd9\u4e00\u5f20\u56fe\u4e2d\u6211\u4eec\u5047\u8bbe $d_u=10$\uff0c$d_v=15$ \u4e14 $u$ \u548c $v$ \u90fd\u5206\u522b\u6b63\u597d\u6302\u6ee110\u4e2a\u548c15\u4e2a,\u4f46\u662f\u5982\u679c $d_i=30$ \uff0c\u90a3\u4e48\u5269\u4e0b\u76845\u4e2a\u8be5\u6302\u5230\u54ea\u91cc\u5462\uff1f\u80af\u5b9a\u662f\u9009\u6700\u4fbf\u5b9c\u70b9\u6765\u6302\u7684\u5566\u3002\u6240\u4ee5\u6211\u4eec\u4e0d\u5149\u8981\u5efa\u7acb\u4e00\u4e2a\u6570\u7ec4\u6765\u5b58\u50a8\u73b0\u5728\u6302\u7684\u6570\u91cf\uff0c\u4e5f\u8981\u5efa\u7acb\u4e00\u4e2a\u6570\u7ec4\u4fdd\u5b58\u4e00\u68f5\u6811\u4e0a\u4ef7\u683c\u6700\u5c0f\u7684\u70b9\u3002\n\u672c\u849f\u84bb\u7528\u521a\u521a\u5b66\u4f1a\u7684 $\\LaTeX$ \u6765\u6253\u4e00\u904d\u6570\u7ec4\u63a8\u5bfc\u5f0f\uff1a\n\n$size_i$ \u8868\u793a\u4ee5 i \u4e3a\u6839\u8282\u70b9\u7684\u5b50\u6811\u73b0\u5728\u6302\u7684\u4e1c\u897f\u7684\u6570\u91cf\u3002\n\n$size_i=\\sum_{v \\in son_i}size_v$\n\n$c_u$ \u8868\u793a\u4ee5 u \u4e3a\u6839\u7684\u4e00\u68f5\u6811\u4e0a\u4ef7\u683c\u6700\u5c0f\u7684\u70b9\u3002\n\n$c_u=\\min(c_v,c_u)$\n\n\u518d\u52a0\u4e00\u4e2a dfs \u5c31\u597d\u4e86\u3002\n\n### \u4ee3\u7801\n\n\u4e3a\u4e86\u8ba9\u5927\u5bb6\u81ea\u5df1\u601d\u8003\uff0c\u8fd9\u8fb9\u5c31\u53ea\u7ed9\u51fa dfs \u7684\u4ee3\u7801\u4e86\u3002\n```cpp\ndfs(u){\n\tfor(i=head[u];i;i=e[i].nxt){//\u8fd9\u8fb9\u793a\u8303\u7528\u94fe\u5f0f\u524d\u5411\u661f\u6765\u50a8\u5b58\u6811 \n\t\tint v=e[i];\n\t\tdfs(v);\n\t\tsize[u]+=size[v];\n\t\tc[u]=min(c[u],c[v]); \n\t}\n\tif(size[u]<d[u]){//size\u6570\u7ec4\u89c1\u4e0a\u6587 \n\t\tans+=(d[u]-size[u])*c[u];//c\u6570\u7ec4\u89c1\u4e0a\u6587\n\t\tsize[u]=d[u]; //\u5176\u5b9e\u662fsize[u]=size[u]+d[u]-size[u];\u88ab\u7b80\u5316\u6210\u4e86size[u]=d[u];\n\t}\n}\n```\n\u671b\u901a\u8fc7",
        "postTime": 1622033894,
        "uid": 422348,
        "name": "Yang818",
        "ccfLevel": 4,
        "title": "p3018\u9898\u89e3"
    },
    {
        "content": "~~\u7b80\u5355\u9898~~\n\n\u597d\u50cf\u9898\u89e3\u57fa\u672c\u4e0a\u90fd\u662f\u4ee3\u7801\u52a0\u6ce8\u91ca\uff0c\u6ca1\u591a\u5c11\u89e3\u91ca\uff0c\u8fd9\u91cc\u7ed9\u4e2a\u4eb2\u6c11\u7684\u89e3\u91ca\u3002\n\n\u9996\u5148\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a\u6c99\u96d5 dp\uff0c$dp[u][i] = min(dp[u][i],dp[v][j] + (i-j)*val(u))$\uff0c\u5176\u4e2d $u,v$ \u4e3a\u5f53\u524d\u8282\u70b9\u548c\u8981\u53bb\u7684\u8282\u70b9\uff0c$i,j$ \u8868\u793a\u5f53\u524d\u8282\u70b9\u4e0a\u88c5\u9970\u7684\u6570\u91cf\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0 $n,d\\le 10^6$\uff0c\u8fd9\u4e48\u5f00\u4e8c\u7ef4\u663e\u7136\u4f1a\u70b8\u3002\n\n\u89c2\u5bdf\u4e00\u4e0b\u89c4\u5f8b\uff1a\u5982\u679c\u67d0\u4e2a\u8282\u70b9\u7684\u5b50\u6811\u5df2\u7ecf\u5168\u90e8\u88ab\u6ee1\u8db3\uff0c\u90a3\u4e48\u5728\u5305\u542b\u8fd9\u4e2a\u8282\u70b9\u7684\u5b50\u6811\u4e0a\u4efb\u610f\u4e00\u70b9\u653e\u88c5\u9970\u90fd\u53ea\u4f1a\u5f71\u54cd\u8fd9\u4e00\u4e2a\u70b9\u662f\u5426\u6ee1\u8db3\uff0c\u4e0d\u4f1a\u5bf9\u5df2\u7ecf\u6ee1\u8db3\u7684\u5b50\u6811\u4ea7\u751f\u5f71\u54cd\u3002\n\n\u56e0\u6b64\u8003\u8651\u8d2a\u5fc3\u3002\n\n\u6211\u4eec\u8003\u8651\u8bb0\u5f55\u67d0\u4e00\u4e2a\u8282\u70b9\u7684\u5b50\u6811\u4e2d\u4ef7\u503c\u6700\u5c0f\u7684\u8282\u70b9\u7684\u4ef7\u503c\uff0c\u5728\u6ee1\u8db3\u7236\u8282\u70b9\u4e4b\u524d\u4fdd\u8bc1\u5176\u5b50\u6811\u5df2\u7ecf\u88ab\u5168\u90e8\u6ee1\u8db3\u3002\n\n\u5177\u4f53\u4e00\u70b9\uff0c$val[u] = min(val[v]),v \\in {subtree(u)}$\n\n\u518d\u89c2\u5bdf\u4e00\u4e0b\uff0c\u5728\u4e00\u4e2a\u8282\u70b9\u7684\u5b50\u6811\u4e0a\u653e\u88c5\u9970\u4f1a\u5bf9\u5176\u4ea7\u751f\u5f71\u54cd\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u8003\u8651\u8bb0\u5f55\u5b50\u6811\u4e0a\u653e\u7684\u88c5\u9970\u6570\u91cf\u548c\u3002\n\n\u5177\u4f53\u4e00\u70b9\uff0c$sz[u] = \\sum sz[v], v\\in {subtree(u)}$\n\n\u7136\u540e\u4f1a\u51fa\u73b0\u4e24\u79cd\u60c5\u51b5\uff1a\n\n- \u5b50\u6811\u4e0a\u7684\u88c5\u9970\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e\u7236\u8282\u70b9\u9700\u8981\u7684\u88c5\u9970\u6570\u91cf\n- \u5b50\u6811\u4e0a\u7684\u88c5\u9970\u6570\u91cf\u4e25\u683c\u5c0f\u4e8e\u7236\u8282\u70b9\u9700\u8981\u7684\u88c5\u9970\u6570\u91cf\n\n\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c~~\u663e\u7136~~\u6211\u4eec\u5565\u90fd\u4e0d\u7528\u505a\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u7531\u4e8e\u8282\u70b9\u7684\u5b50\u6811\u5df2\u7ecf\u5168\u90e8\u88ab\u6ee1\u8db3\uff0c\u800c\u66f4\u65b0\u5176\u4ed6\u4efb\u4f55\u70b9\u90fd\u4e0d\u4f1a\u518d\u5bf9\u6b64\u8282\u70b9\u5b50\u6811\u7684\u88c5\u9970\u6570\u91cf\u4ea7\u751f\u8d21\u732e\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e2a\u8282\u70b9\u7d2f\u8ba1\u8d21\u732e\u3002\n\n\u5177\u4f53\u4e00\u70b9\uff1a$ans = \\sum\\limits_{u=1}^n min(req[u]-\\sum sz[v],0)\\times val[u]$\n\n\u53ef\u4ee5\u4f7f\u7528 dfs \u8fdb\u884c\u5b9e\u73b0\uff0c\u590d\u6742\u5ea6 $O(n)$\n\n```cpp\nconst int MAXN = 1e5+5;\nconst int MAXM = 1e5+5;\nint dx[4] = {1,0,-1,0}, dy[4] = {0,1,0,-1};\nint n,m,t,pos[MAXN],k,a,b,c,val[MAXN],req[MAXN],sz[MAXN],ans;\nnamespace AdjEdge{\n  //var\n  int head[MAXN],tot;\n  struct Edge{\n    int u,v,d,nxt;\n  }edge[MAXM<<1];\n  inline void add(int u, int v, int d=0){\n    edge[++tot].u = u;\n    edge[tot].v = v;\n    edge[tot].d = d;\n    edge[tot].nxt = head[u];\n    head[u] = tot;\n  }\n}\nusing namespace AdjEdge;\ninline int dfs(int u=1){\n  trav(i,u){\n    int v = edge[i].v;\n    sz[u]+=dfs(v);//\u6c42\u5b50\u6811\u5927\u5c0f\n    val[u] = chkmin(val[u],val[v]);//\u6c42\u6700\u5c0f\u4ef7\u503c\n  }\n  if (sz[u]<req[u]) ans+=(req[u]-sz[u])*val[u],sz[u] = req[u];//\u66f4\u7b54\u6848\n  return sz[u];\n}\nsigned main(){\n  n = read();\n  For(i,1,n) {a = read(), req[i] = read(), val[i] = read();if (a!=-1) add(a,i);}\n  dfs();\n  writeln(ans);\n}\n```\n\n\u62ff\u6389\u4e86\u5934\u6587\u4ef6\uff0c\u653e\u4e0a\u53bb\u4f1ace\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u9632\u6284\u88ad\u3002",
        "postTime": 1601676713,
        "uid": 219099,
        "name": "pocafup",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3018 \u3010[USACO11MAR]Tree Decoration G\u3011"
    },
    {
        "content": "\u8fd9\u9898\u8fd8\u6ca1Pascal\u9898\u89e3\uff1f\u90a3\u6211\u6765\u53d1\u4e00\u6ce2\u3002\n#### \u9898\u610f\n\u5bf9\u4e8e\u4e00\u68f5\u6811\uff0c\u521d\u59cb\u6bcf\u4e2a\u7ed3\u70b9\u7684\u6743\u503c\u4e3a0\uff0c\u8981\u6c42\u4ee5\u7ed3\u70b9i\u4e3a\u6839\u7684\u5b50\u6811\u7684\u6743\u503c\u548c\u5927\u4e8e\u7b49\u4e8eDi\uff0c\u540c\u65f6\u7ed9\u7ed3\u70b9i\u6743\u503c\u52a01\u82b1\u8d39Ci\uff0c\u6c42\u6700\u5c0f\u82b1\u8d39\u3002\n#### \u5206\u6790\n\u663e\u7136\uff0c\u5f53\u4ee5\u7ed3\u70b9i\u4e3a\u6839\u7684\u5b50\u6811\u7684\u6743\u503c\u548c\u5c0f\u4e8eDi\u65f6\uff0c\u6211\u4eec\u5e94\u628a\u6743\u503c\u52a0\u5728Ci\u6700\u5c0f\u7684\u5730\u65b9\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u904dDFS\u6c42\u6bcf\u4e2a\u7ed3\u70b9\u6700\u5c0f\u7684Ci\uff0c\u8bb0\u4e3amin\u6570\u7ec4\u3002\n\u7136\u540e\u662f\u7b2c\u4e8c\u904dDFS\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u7ed3\u70b9\uff0c\u5148\u6c42\u81ea\u5df1\u6bcf\u4e2a\u513f\u5b50\u7684\u6700\u5c0f\u82b1\u8d39\u548c\u6743\u503c\u548c\uff08\u4e3a\u53f6\u8282\u70b9\u76f4\u63a5\u7b97\uff1aDi\\*Ci\uff09\uff0c\u63a5\u7740\u7b97\u5f53\u524d\u81ea\u5df1\u7684\u6743\u503c\u548c\uff0c\u5c0f\u4e8eDi\u52a0\u5dee\u4e58min\uff0c\u5927\u4e8e\u7b49\u4e8e\u76f4\u63a5\u8fc7\u3002\n### \u6ce8\u610f\n\u8d39\u7528\u548c\u6743\u503c\u53ef\u80fd\u8d85longint\uff0c\u8981\u5f00int64\u3002\n#### \u4ee3\u7801\n```pascal\nvar d,c,head,next,went,min:array[0..100005] of longint;\n  f,num:array[0..100005] of int64;\n  n,i,k,x,root:longint;\nprocedure dfs1(y:longint);\nvar j:longint;\nbegin\n  j:=head[y];min[y]:=c[y];\n  while j<>0 do\n    begin\n      dfs1(went[j]);\n      if min[went[j]]<min[y] then min[y]:=min[went[j]];\n      j:=next[j];\n    end;\nend;\nprocedure dfs2(y:longint);\nvar j:longint;\nbegin\n  j:=head[y];\n  while j<>0 do\n    begin\n      dfs2(went[j]);\n      num[y]:=num[y]+num[went[j]];\n      f[y]:=f[y]+f[went[j]];\n      j:=next[j];\n    end;\n  if num[y]<d[y] then\n    begin\n      f[y]:=f[y]+(d[y]-num[y])*min[y];\n      num[y]:=d[y];\n    end;\nend;\nbegin\n  readln(n);\n  for i:= 1 to n do\n    begin\n      read(x,d[i],c[i]);\n      if x=-1 then\n        begin\n          root:=i;\n          k:=x;\n        end\n      else\n        begin\n          next[i+k]:=head[x];\n          went[i+k]:=i;\n          head[x]:=i+k;\n        end;\n    end;\n  dfs1(root);\n  dfs2(root);\n  writeln(f[root]);\nend.\n\n```\n",
        "postTime": 1582520683,
        "uid": 112921,
        "name": "zhimao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3018 \u3010[USACO11MAR]\u6811\u88c5\u9970Tree Decoration\u3011"
    },
    {
        "content": "\u8fd9\u4e00\u9053\u9898\u9700\u8981\u5f00long long\uff08\u5361\u4e86\u6211\u597d\u4e45\uff09\n\n\u6ce8\u91ca\u5728\u4ee3\u7801\u91cc\u9762\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\nusing namespace std;\ntypedef long long LL;\nconst int N=1e5+10;\nstruct edge{//\u7f16\u76ee\u5f55 \n\tint v,nxt;\n}e[N];int cnt,last[N];\ninline void add(int u,int v){//\u5efa\u8fb9 \n\te[++cnt]=(edge){v,last[u]};\n\tlast[u]=cnt;\n}\nstruct trnode{//\u6811\u5f62\u7ed3\u6784 \n\tLL cost,minn,s;//cost\u8868\u793a\u6ee1\u8db3\u5f53\u524d\u8282\u70b9\u7684\u8981\u6c42\u6240\u9700\u7684\u6700\u5c0f\u82b1\u8d39\uff0cminn\u8868\u793ai\u7684\u5b50\u6811\u4e2d\u5355\u4ef7\u6700\u5c0f\u7684\u8282\u70b9\uff0cs\u4e3a\u4ee5i\u4e3a\u6839\u7684\u6240\u4ee5\u8282\u70b9\u7684\u88c5\u9970\u603b\u6570\uff0c \n}tr[N];\nLL d[N],c[N];\nint n;\nvoid dfs(int u){\n\ttr[u].minn=c[u];tr[u].s=0; \n\tfor(int i=last[u],v=e[i].v;i;i=e[i].nxt,v=e[i].v){//\u641c\u7d22\u6240\u6709\u7684\u513f\u5b50\u8282\u70b9\uff0c\u6c42\u51facost,minn\u548cs \n\t\tdfs(v);\n\t\ttr[u].minn=min(tr[u].minn,tr[v].minn);\n\t\ttr[u].s+=tr[v].s;\n\t\ttr[u].cost+=tr[v].cost;\n\t}\n\tLL tt=d[u]-tr[u].s;//\u8868\u793a\u8fd8\u5dee\u7684\u88c5\u9970\u6570 \n\tif(tt<0)tt=0;//tt>=0 \n\telse tr[u].s=d[u];//\u4e0d\u8981\u5fd8\u8bb0\u6539\u53d8tr[u].s \n\ttr[u].cost+=LL(tt*tr[u].minn);//\u589e\u52a0\u5f53\u524d\u8282\u70b9\u7684\u82b1\u8d39 \n}\nint main(){\n\tscanf(\"%lld\",&n);int tt;\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%lld%lld\",&tt,&d[i],&c[i]);\n\t\tif(tt==-1)continue;\n\t\tadd(tt,i);//\u5efa\u8fb9 \n\t}\n\tdfs(1);//\u641c\u7d22\u6839\u8282\u70b9 \n\tprintf(\"%lld\\n\",tr[1].cost);//\u8f93\u51fa \n\treturn 0;\n}\n\n```\n\n\n\u6211\u7684\u535a\u5ba2\uff1a\n\nhttps://blog.csdn.net/zsyzClb/article/details/83657108",
        "postTime": 1541146894,
        "uid": 66181,
        "name": "Celebrate",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3018 \u3010[USACO11MAR]\u6811\u88c5\u9970Tree Decoration\u3011"
    },
    {
        "content": "\u5176\u5b9e\u4e0d\u96be\u5475\uff0c\u4ee5\u53f6\u5b50\u8282\u70b9\u4e3a\u8d77\u70b9\uff0c\u4e0d\u65ad\u5411\u4e0a\u66f4\u65b0\uff0c\u9047\u5230\u513f\u5b50\u6570\u4e3a0\u7684\u6839\u8282\u70b9\u5c31\u5165\u961f\uff08\u6bcf\u6709\u4e00\u4e2a\u513f\u5b50\u5165\u961f\uff0c\u6839\u8282\u70b9\u513f\u5b50\u6570\u51cf\u4e00\uff09\uff0cans\u7d2f\u52a0\uff0c\u5177\u4f53\u770b\u7a0b\u5e8f\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nstruct ss\n{\n    long long fa,money,cnt,need,ru;\n} s[100005];//fa\u8868\u793a\u7236\u8282\u70b9\uff0cmoney\u8868\u793a\u5f53\u524d\u5728\u8fd9\u68f5\u5b50\u6811\u4e0a\u5b89\u88c5\u4e00\u4e2a\u88c5\u9970\u6700\u5c11\u82b1\u8d39\u7684\u94b1\uff0cs[i].money=min(s[i].money,s[k].money)\uff0ck\u4e3a\u5b50\u8282\u70b9\uff0ccnt\u4e3a\u5f53\u524d\u5b89\u4e86\u591a\u5c11\uff0cneed\u8868\u793a\u9700\u8981\u591a\u5c11\uff0cru\u5c31\u662f\u513f\u5b50\u6570\u3002\nint n,t[100005];//t\u4e3a\u961f\u5217\u3002\nlong long ans;\nvoid bfs()\n{\n    int head=0,tail=0;\n    for(int i=1; i<=n; i++)\n        if(!s[i].ru)//\u5148\u628a\u53f6\u5b50\u8282\u70b9\u5165\u961f\u3002\n            t[tail++]=i;\n    while(head!=tail)\n    {\n        int a=t[head];\n        if(s[a].need>s[a].cnt)//\u5982\u679c\u9700\u6c42\u5927\u4e8e\u5df2\u5b89\u88c5\u7684\uff0c\u5c31\u7d2f\u52a0\u3002\n        {\n            ans+=(s[a].need-s[a].cnt)*s[a].money;//\u7d2f\u52a0ans\u3002\n            s[a].cnt=s[a].need;//\u66f4\u65b0\u88c5\u9970\u6570\u3002\n        }\n        int b=s[a].fa;\n        if(b!=-1)\n        {\n            s[b].cnt+=s[a].cnt;//\u66f4\u65b0\u88c5\u9970\u6570\u3002\n            s[b].money=min(s[b].money,s[a].money);//\u66f4\u65b0\u6700\u5c0f\u82b1\u8d39\u3002\n            s[b].ru--;//\u513f\u5b50\u6570\u51cf1\u3002\n            if(!s[b].ru)//\u5982\u679c\u513f\u5b50\u6570\u4e3a0\uff0c\u5219\u5165\u961f\u3002\n                t[tail++]=b;\n        }\n        head++;\n    }\n    return;\n}\nint main()\n{\n    int i,j;\n    scanf(\"%d\",&n);\n    for(i=1; i<=n; i++)\n    {\n        scanf(\"%lld%lld%lld\",&s[i].fa,&s[i].need,&s[i].money);\n        if(s[i].fa!=-1)\n            s[s[i].fa].ru++;\n    }\n    bfs();\n    cout<<ans<<endl;\n    return 0;\n}\n```",
        "postTime": 1486515026,
        "uid": 24805,
        "name": "luaddict",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3018 \u3010[USACO11MAR]\u6811\u88c5\u9970Tree Decoration\u3011"
    }
]
[
    {
        "content": "\u75af\u72c2\u6a21\u62df\uff0c\u6ce8\u610f\u7ec6\u8282\u5904\u7406\uff0c\u5224\u65ad\u53d8\u91cf\u5d4c\u5957\u7684\u65f6\u5019\u53ef\u4ee5\u7528\u9012\u5f52\u5b8c\u6210\uff0c\u987a\u4fbf\u5224\u65ad\u662f\u5426\u5408\u6cd5\n\n\u9644\u4e0a\u4ee3\u7801\uff08\u51fd\u6570\u540d\u662f\u6211\u7684\u540d\u5b57\u54e6\uff0c\u6240\u4ee5\u522b\u6284\u4ee3\u7801\u54c8\uff09\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#include<iostream>\n#include<string>\nusing namespace std;\nchar s[100][100],a[100],b[100],t[100];\nint l[100],p[100][100],y,w,ww,h,hh;\nint ccj(string r,int x,int yy){\n    if (r[x]>='0' && r[x]<='9')\n    {\n        int uuu=0;\n        for (int i=x;i<=yy;i++)\n        uuu=uuu*10+r[i]-'0';\n        return uuu;\n    }\n    int www,e;\n    char m[100];\n    for (int i=0;i<100;i++)\n    m[i]='\\0';\n    for (int i=x;r[i]!='[';i++,www=i)\n    m[i-x]=r[i];\n    for (int i=0;i<y;i++)\n    if (!strcmp(m,s[i])){e=i;break;}\n    int j=ccj(r,www+1,yy-1);\n    if (j==-1 || j>=l[e])return -1;\n    return p[e][j];\n}\nint main()\n{\n    while(scanf(\"%s%s\",a,b)==2)\n    {\n        if (!strcmp(a,\"int\"))\n        {\n            for (int i=0;b[i]!='[';i++,w=i)\n            s[y][i]=b[i];h=ccj(b,w+1,strlen(b)-2);\n            if (h==-1){printf(\"-1\");return 0;}\n            l[y++]=h;\n        }\n        else if (!strcmp(a,\"cout\"))\n        {\n            h=ccj(b,0,strlen(b)-1);\n            if (h==-1){printf(\"-1\");return 0;}\n            printf(\"%d\\n\",h);\n        }\n        else\n        {\n            for (int i=0;i<100;i++)\n            t[i]='\\0';\n            for (int i=0;a[i]!='[';i++,w=i)\n            t[i]=a[i];\n            for (int i=0;i<y;i++)\n            if (!strcmp(t,s[i])){ww=i;break;}\n            h=ccj(a,w+1,strlen(a)-2);\n            if (h==-1 || h>=l[ww]){printf(\"-1\");return 0;}\n            hh=ccj(b,0,strlen(b)-1);\n            if (hh==-1){printf(\"-1\");return 0;}\n            p[ww][h]=hh;\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1472128414,
        "uid": 14738,
        "name": "1124828077ccj",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011"
    },
    {
        "content": "\u4f5c\u4e3a\u4e00\u4e2a\u70ed\u7231\u5199\u89e3\u91ca\u5668\u7684half-oier\uff0c\u8fd9\u70b9\u9898~~\u4e00\u70b9\u4e5f\u4e0d~~\u96be~~ \\\n\u8ba9\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u8fd9\u9053\u9898:\n### \u8981\u7d20\u4e4b\u4e00\uff1a\u5982\u4f55\u4fdd\u5b58\u53d8\u91cf\uff1f\n\u89e3\u51b3\u65b9\u6848\uff1aC++ STL\u4e2d\u6709\u4e00\u4e2a\u53eb\u505amap\u7684\u5bb9\u5668\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u505a\u53d8\u91cf\u6620\u5c04\u3002\\\n\uff08\u6700\u4ee4\u4eba\u9ad8\u5174\u7684\u662f\uff0c\u5b83\u652f\u6301\u76f4\u63a5\u7528[ ]\u8d4b\u503c\u4fee\u6539\uff09\\\n\\\n\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u5199\u4e00\u4e2astruct\uff0c\u628amap\u7684\u529f\u80fd\u5c01\u88c5\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u201c\u7ed1\u5b9a\u201d\uff0c\u53d6\u540d\u53eb\u505aBinding\u3002\\\n\u5728Binding\u4e2d\u8981\u6709GetVal\uff0cSetVal\u7b49\u51fd\u6570\u6765\u64cd\u4f5c\uff0c\u8fd8\u8981\u6709\u4e00\u4e2a\u5b89\u5168\u7cfb\u7edfAccessController\uff0c\u6765\u9632\u8303\u6570\u7ec4\u8d8a\u754c\u3002\uff08\u501f\u7528\u4e86Java\u4e2d\u7684\u6982\u5ff5\uff09\n\n### \u8981\u7d20\u4e4b\u4e8c\uff1a\u5982\u4f55\u5904\u7406\u8bf8\u5982array[array[4]]\u8fd9\u6837\u7684\u5d4c\u5957\uff1f\n\\\n\u8bf7\u6ce8\u610f\u8bfb\u9898\uff0c\u672c\u9898\u4e2d**\u4e0d\u4f1a\u51fa\u73b0\u8868\u8fbe\u5f0f\uff08\u6bd4\u5982a[1]+5\uff09**\\\n\u8fd9\u5c31\u5f88\u9ad8\u5174\u4e86\uff0c\u8ba9\u6211\u4eec\u6765\u4ed4\u7ec6\u770b\u770b\u6807\u9898\u4e2d\u4e3e\u7684\u4f8b\u5b50\uff1a\n```\narray[array[4]]\n  ^     ^   ^\n \u540d\u5b57 \u540d\u5b57 \u5e38\u91cf\n```\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u53f3\u62ec\u53f7\u4e00\u5b9a\u662f\u8fde\u5728\u4e00\u8d77\u7684\uff0c\u4e5f\u5c31\u662f\u4e0d\u4f1a\u51fa\u73b0array[array[4]+1]\u8fd9\u6837\u7684\u8868\u8fbe\u5f0f\u3002\\\n\\\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ea\u8981\u4ece\u5de6\u62ec\u53f7\u5904\u5206\u5272\u5b57\u7b26\u4e32\uff0c\u9047\u5230\u53f3\u62ec\u53f7\u65f6\u76f4\u63a5\u505c\u6b62\u8bc6\u522b\uff0c\u7528\u4e00\u4e2avector\u4fdd\u5b58\u8bc6\u522b\u51fa\u6765\u7684\u540d\u5b57\u5373\u53ef\u3002C++\u4e2d\u6ca1\u6709\u8fd4\u56devector\u7684split\u51fd\u6570\u2026\u2026\u6ca1\u529e\u6cd5\uff0c\u6211\u4eec\u81ea\u5df1\u5199\u5427\u3002\\\n\\\n\u90a3\u6211\u4eecsplit\u51fa\u6765\u4e4b\u540e\u4f1a\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f\n```\n===============================\nvector\u4e0b\u6807              \u503c\n0\t\t\tarray\n1\t\t\tarray\n2\t\t\t4\n===============================\n```\n\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u9700\u8981**\u5012\u5e8f**\u6c42\u503c\uff0c\u4ee5\u672c\u6807\u9898\u4e3a\u4f8b\uff0c\\\n\u6c42\u51fa\u4e0b\u68072\u7684\u503c\u540e\u5c31\u53ef\u4ee5\u6c42\u4e0b\u68071\u7684\u503c\uff0c\\\n\u6c42\u51fa\u4e0b\u68071\u7684\u4e4b\u540e\u5c31\u53ef\u4ee5\u6c42\u4e0b\u68070\u7684\u503c\uff0c\\\n\u800c\u4e0b\u68070\u7684\u503c\uff0c\u5c31\u662f\u6211\u4eec\u8981\u6c42\u7684\u5566\uff01\\\n\\\n\u6ce8\u610f\u4e00\u4e2a\u5c0f\u7ec6\u8282\u5373\u53ef\u3002\u7b2c\u4e00\u4e2a\u4e0b\u6807\u8981\u7279\u5224\u6210\u6570\u5b57\uff0c\u628a\u5b57\u7b26\u4e32\u8f6c\u6362\u6210int\u7684\u529e\u6cd5\u6709\u5f88\u591a\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u4e2a\u7b80\u5355\u7684\uff1a\n```cpp\nstring s = \"54321\";\nint x = atoi(s.c_str());\n```\n### **\u81f3\u6b64\uff0c\u4e24\u5927\u8981\u7d20\u89e3\u51b3\uff01**\n\u4f46\u662f\u8981\u5c0f\u5fc3\uff0c\u9047\u5230\u4e0b\u6807\u8d8a\u754c\u5e94\u5f53\u53ca\u65f6\u7ed3\u675f\u7a0b\u5e8f\uff0c\u672c\u4eba\u7684\u529e\u6cd5\u662f\u7528exit(0)\uff0c\u4e0d\u8fc7\u5e94\u8be5\u6709\u66f4\u597d\u7684\u529e\u6cd5\uff1a\\\n\u5c31\u662f\u5728\u6267\u884c\u547d\u4ee4\u7684\u51fd\u6570\u91cc\u8bbe\u5b9a\u8fd4\u56de\u503c\uff0c\u9047\u5230\u9519\u8bef\u65f6\u8fd4\u56de1\uff0c\u6ca1\u6709\u9519\u8bef\u8fd4\u56de0\uff0c\u5f53\u8fd4\u56de\u503c\u4e0d\u4e3a0\u65f6\u7acb\u523bbreak\u6b7b\u5faa\u73af\u5e76\u8f93\u51fa-1\u3002\n## \u91cd\u5934\u620f\u6765\u4e86\uff01\u4e0a\u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\n//Exceptions will end the process.\nvoid ThrowException() {\n\tcout << -1;\n\texit(0);\n}\n\n//A struct that holds variables.\nstruct Binding {\n\tmap<string, vector<int> > vars;\n\t\n\t//Check the sub return true if it is vaild.\n\tbool CheckAccess(string name, int loc) {\n\t\tif(loc < 0) return false;\n\t\telse if(loc >= vars[name].size()) return false;\n\t\treturn true;\n\t}\n\t\n\t//Security holder, throw exceptions when accesses are invaild.\n\tvoid Security(string name, int loc) {\n\t\tif(!CheckAccess(name, loc)) ThrowException(); \n\t}\n\t\n\t//Get the values.\n\tint GetVal(string name, int loc) {\n\t\tSecurity(name, loc);\n\t\treturn vars[name][loc];\n\t}\n\t\n\t//Set the values.\n\tvoid SetVal(string name, int loc, int value) {\n\t\tSecurity(name, loc);\n\t\tvars[name][loc] = value;\n\t}\n\t\n\t//Make an array with given size and name.\n\tvoid MakeArray(string name, int size) {\n\t\tvars[name].resize(size);\n\t}\n};\n\nBinding bind;\n\n//Get the value of expression.\nint EvalExpression(string expr) {\n\tvector<string> names;\n\tint last = 0;\n\t\n\tif(isdigit(expr[0])) return atoi(expr.c_str());\n\t\n\t//Split the given expression to tokens.\n\tfor(int i = 0; i < expr.length(); i++) {\n\t\tif(expr[i] == '[') {\n\t\t\tnames.push_back(expr.substr(last, i - last));\n\t\t\tlast = i + 1;\n\t\t}\n\t\tif(expr[i] == ']') {\n\t\t\tnames.push_back(expr.substr(last, i - last));\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t//Get the each value.\n\tint lastVal = atoi(names[names.size() - 1].c_str());\n\tfor(int i = names.size() - 2; i >= 0; i--) {\n\t\tlastVal = bind.GetVal(names[i], lastVal); \n\t}\n\t\n\treturn lastVal;\n}\n\n//Run the command.\nvoid Command(string command) {\n\tstringstream ss(command);\n\tvector<string> str;\n\tstring s;\n\twhile(ss >> s) str.push_back(s);\n\t\n\tif(str[0] == \"int\") {\n\t\tstring token = str[1];\n\t\tstring locs;\n\t\tstring name;\n\t\tfor(int i = 0; i < str[1].length(); i++) {\n\t\t\tif(str[1][i] == '[') {\n\t\t\t\tname = str[1].substr(0, i);\n\t\t\t\tlocs = str[1].substr(i + 1, str[1].length() - i - 2);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tbind.MakeArray(name, EvalExpression(locs));\n\t}\n\telse if(str[0] == \"cout\") {\n\t\tcout << EvalExpression(str[1]) << endl;\n\t}\n\telse {\n\t\tstring token = str[0];\n\t\tstring locs;\n\t\tstring name;\n\t\tfor(int i = 0; i < str[0].length(); i++) {\n\t\t\tif(str[0][i] == '[') {\n\t\t\t\tname = str[0].substr(0, i);\n\t\t\t\tlocs = str[0].substr(i + 1, str[0].length() - i - 2);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tbind.SetVal(name, EvalExpression(locs), EvalExpression(str[1]));\n\t}\n}\n\nint main() {\n\tstring cmd;\n\twhile(getline(cin, cmd)) Command(cmd);\n\treturn 0;\n}\n```\n\u7b2c\u4e00\u6b21\u5199\u9898\u89e3\uff0c\u5e0c\u671b\u80fd\u5e2e\u5230\u5927\u5bb6\u54e6\\\n\u6c42\u901a\u8fc7\u6c42\u901a\u8fc7~\n\n\n",
        "postTime": 1603413376,
        "uid": 188950,
        "name": "UruhaRushia",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011"
    },
    {
        "content": "\n[\u53ef\u80fd\u66f4\u597d\u7684\u98df\u7528\u4f53\u9a8c](/blog/523641/P2830) $|$ \n[\u9898\u76ee\u4f20\u9001\u95e8](/problem/P2830) $|$ \n[\u6211\u7684\u5176\u4ed6\u9898\u89e3](/blog/523641/#type=\u9898\u89e3)\n\n\u770b\u5230\u5176\u4ed6\u5927\u4f6c\u4eec\u7684\u7a0b\u5e8f\u5b9e\u73b0\u90fd\u6bd4\u8f83\u590d\u6742\uff0c\u672c\u849f\u84bb\u5728\u6b64\u5199\u4e00\u7bc7\u6bd4\u8f83\u7b80\u5355\u7684\u9898\u89e3\u3002\n\n------------\n\n${\\large\\color{#00CD00}\\text{\u4e3b\u8981\u601d\u8def}}$\n\n\u672c\u9898\u5176\u5b9e\u7ec6\u8282\u4e0d\u591a\uff0c\u8fd9\u91cc\u53ea\u5217\u4e3e\u4e00\u4e9b\u96be\u70b9\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5177\u4f53\u770b\u4ee3\u7801\u6ce8\u91ca\u3002\n\n- \u5b58\u50a8\u6570\u7ec4\uff1a\u4f7f\u7528`struct`\u548c`map`\u3002\n- \u5d4c\u5957\u6570\u7ec4\uff1a\u9012\u5f52\u5b9e\u73b0\uff0c\u4e00\u5c42\u4e00\u5c42\u5730\u5c55\u5f00\uff0c\u76f4\u5230\u6570\u7ec4\u4e0b\u6807\u4e3a\u5e38\u91cf\u4e3a\u6b62\u3002\n- \u8d4b\u503c\uff1a\u53ef\u4ee5\u8ba9\u9012\u5f52\u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u5730\u5740\uff0c\u8fd9\u6837\u796d\u53ef\u4ee5\u7528\u6765\u8d4b\u503c\uff0c\u53c8\u53ef\u4ee5\u4f5c\u6570\u503c\u53c2\u4e0e\u5176\u4ed6\u8fd0\u7b97\u3002\n- \u6570\u7ec4\u8d8a\u754c\uff1a\u6bcf\u6b21\u8bbf\u95ee\u6570\u7ec4\u65f6\u8fdb\u884c\u4e00\u6b21\u5224\u65ad\uff0c\u5982\u679c\u8d8a\u754c\u53ef\u4ee5\u4f7f\u7528`exit(0)`\u76f4\u63a5\u7ec8\u6b62\u7a0b\u5e8f\u3002\n\n~~\u73b0\u5728\uff0c\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u5b8c\u6210 [P3695](/problem/P3695) \u4e86\u3002~~\n\n------------\n\n${\\large\\color{#00CD00}\\text{\u5b8c\u6574\u4ee3\u7801}}$\n\n```cpp\n#pragma G++ optimize(2)\n#include<bits/stdc++.h>\nusing namespace std;\nstring st1,st2;\u3000\nstruct stu//\u4f7f\u7528\u7ed3\u6784\u4f53\u548cmap\u63a7\u5236\u6570\u7ec4 \n{\u3000\n\tint size,a[100];\n\tint& operator[](int p)//\u91cd\u8f7d\u4e0b\u6807\u8fd0\u7b97\u7b26\u65b9\u4fbf\u8bbf\u95ee\uff0c\u540c\u65f6\u5224\u65ad\u8d8a\u754c\u95ee\u9898 \n\t{\u3000\n\t\tif(p>=size)cout<<-1,exit(0);//exit(0)\u53ef\u4ee5\u76f4\u63a5\u7ec8\u6b62\u7a0b\u5e8f \n\t\treturn a[p];\n\t} \u3000\n};\u3000\nmap<string,stu>arr;\nint s2i(string st)//\u5c06\u5b57\u7b26\u4e32\u8f6c\u5316\u4e3a\u6574\u5f62\u6570\u5b57 \n{\u3000\n\tint ans=0;\n\tfor(int i=0;i<st.size();i++)\n\t\tans=ans*10+st[i]-48;\n\treturn ans;\n}\u3000\nint& calc(string st)//\u62c6\u89e3\u5d4c\u5957\u6570\u7ec4\uff0c\u8fd4\u56de\u5730\u5740\u65e2\u65b9\u4fbf\u76f4\u63a5\u8d4b\u503c\u53c8\u53ef\u4ee5\u4f5c\u6570\u503c\u53c2\u4e0e\u8fd0\u7b97 \n{\u3000\n\tstring name,num;int i;\n\tfor(i=0;st[i]!='[';i++)name+=st[i];//\u5c06\u6570\u7ec4\u540d\u79f0\u63d0\u53d6\u51fa\u6765 \n\tfor(i++;i<st.size()-1;i++)num+=st[i];//\u5c06\u6570\u7ec4\u7684\u4e0b\u6807\u63d0\u53d6\u51fa\u6765 \n\tif(isdigit(num[0]))return arr[name][s2i(num)];//\u5982\u679c\u4e0b\u6807\u4e3a\u7eaf\u6570\u5b57\uff0c\u76f4\u63a5\u8fd4\u56de \n\telse return arr[name][calc(num)];//\u5426\u5219\u9012\u5f52\u7ee7\u7eed\u62c6\u89e3 \n}\u3000\nint main()\n{\u3000\n\tios::sync_with_stdio(false);\n\twhile(cin>>st1>>st2)\n\t{\u3000\n\t\tif(st1==\"int\")//\u5b9a\u4e49\uff0c\u4e0ecalc\u51fd\u6570\u76f8\u4f3c\uff0c\u4e0d\u5c55\u5f00\u8bf4\u660e \n\t\t{\u3000\n\t\t\tstring name,num;int i;\n\t\t\tfor(i=0;st2[i]!='[';i++)name+=st2[i];\n\t\t\tfor(i++;i<st2.size()-1;i++)num+=st2[i];\n\t\t\tif(isdigit(num[0]))arr[name].size=s2i(num);\n\t\t\telse arr[name].size=calc(num);\n\t\t}\u3000\n\t\telse if(st1==\"cout\")//\u8f93\u51fa\uff0c\u9898\u76ee\u4fdd\u8bc1\u8f93\u51fa\u4e00\u5b9a\u662f\u53d8\u91cf\u5c31\u4e0d\u7528\u5206\u5f00\u5224\u65ad\u4e86 \n\t\t\tcout<<calc(st2)<<endl;\n\t\telse //\u8d4b\u503c\uff0c\u8981\u5206\u5f00\u7eaf\u6570\u5b57\u4e0e\u53d8\u91cf\u5206\u5f00\u5224\u65ad \n\t\t\tif(isdigit(st2[0]))calc(st1)=s2i(st2);\u3000\n\t\t\telse calc(st1)=calc(st2);\u3000\n\t}\u3000\n\treturn 0;\n}\u3000\n```\n\n**[${\\color{Black}\\textbf{xt\\_\\_}}$](/user/523641) \u6e29\u99a8\u63d0\u793a\uff1a**\n\n\n${\\large\\color{White}\\text\\colorbox{#AD8800}{\u9898\u89e3\u5343\u4e07\u6761\uff0c\u7406\u89e3\u7b2c\u4e00\u6761\u3002\u76f4\u63a5\u7c98\u9898\u89e3\uff0c\u68d5\u540d\u4e24\u884c\u6cea\u3002}} $",
        "postTime": 1643363754,
        "uid": 523641,
        "name": "sto_yfz_orz",
        "ccfLevel": 5,
        "title": "P2830 \u5199\u7a0b\u5e8f \u9898\u89e3"
    },
    {
        "content": "\u53c8\u662f\u4e00\u9053\u5927\u6a21\u62df\uff0c\u8fd8\u5e26\u5b57\u7b26\u4e32\uff0c\u82b1\u4e86\u62113\u4e2a\u5c0f\u65f6\uff0cSubmit +=17\u3002(~~\u6bd4\u4e0a\u6b21\u8fdb\u6b65\u4e86\uff0c\u4e0a\u6b21Submit += 18~~)\n\n\u2460\uff1a\u9996\u5148\u4e86\u89e3\u4e00\u4e0b$substr$\u51fd\u6570\uff0c\u5b83\u67092\u4e2a\u53c2\u6570x\uff0cy\u3002```S.sutstr(x,y)```\n\u8868\u793a\u4eceS[x]\u5f00\u59cb\uff0c\u5411\u540ey\u4f4d\u7684\u4e00\u4e2aS\u7684\u5b50\u4e32\uff0c\u5982\u679cx+y\u8d85\u8fc7\u4e86$S.length()-1$\uff0c\u90a3\u4e48\u5c31\u53d6\u540e\u9762\u6240\u6709\u7684\u5185\u5bb9\n\n\u8bbeS=\"0123456789\"\uff0cT,R\u662fstring\u7c7b\u578b.\u90a3\u4e48\n```\nS.substr(1,5)=\"12345\"\nS.substr(0,7)=\"01234567\"\nS.substr(6,20000)=\"6789\"\nT=S.substr(0,7)//\u8d4b\u503cT\n\u6b64\u65f6\uff1aT.length=8\nR=S.sutstr(6,9)//\u8d4b\u503cR\n\u6b64\u65f6\uff1aR.length=4\n```\n\u2461\uff1a\u4e86\u89e3\u5b57\u7b26\u4e32\u662f\u53ef\u4ee5\u76f4\u63a5\u5f80\u540e\u9762\u52a0\u5b57\u7b26\u7684\n```\nstring S=\"asdfgh\";\nS+='j';\ncout<<S;\n//\u7ed3\u679c\uff1aasdfghj\n```\n\n\u2462\uff1a\u7136\u540e\uff0c\u6211\u4eec\u7528\u4e0aC++\u7684map\uff0c\u5c31\u53ef\u4ee5~~\u4e00\u70b9\u4e5f\u4e0d~~\u6109\u5feb\u5730A\u8fd9\u9053\u9898\u4e86\n```\n#include <bits/stdc++.h>\nusing namespace std;\nstring s1,s2;\nmap<string,int>sto;//storge\uff0c\u5b58\u5bb9\u91cf\nmap<string,map<int,int> > val;//value\uff0c\u5b58\u6570\u5b57\uff0c\u5176\u4e2dval[\"a\"][3]=4\u8868\u793aa[3]\u7684\u503c\u662f4\nstring stk[700];//\u6808\nint top=1;//\u5b9a\u4e49\u624b\u5199\u6808\u6700\u597d\u7ed9\u4e2atop\u5427\uff0c\u867d\u7136\u6ca1\u7528\nbool output=0;//\u662f\u5426\u5df2\u7ecf\u8f93\u51fa\u8fc7\nint getnum(string S,int step)//\u9012\u5f52\u6c42\u89e3\u3010\u8bf7\u539f\u8c05\u6211\u7784\u4e86\u4e00\u773c\u6709\u4e14\u4ec5\u6709\u7684\u4e00\u7247\u9898\u89e3\u3011\n{\n\tstk[step]=\"\";//\u5f88\u91cd\u8981\uff0c\u4e00\u5b9a\u8981\u8d4b\u7a7a\u4e32\uff0c\u4e0d\u7136\u5c3140\u5206\n\tint i=0,Numm=0,fushu=0;\n\tif(S[i]=='-') fushu=1,i++;\n\tif(S[i]>=48&&S[i]<=57)//\u6570\u5b57\u7684ASCII\n\t{\n\t\twhile(S[i]>=48&&S[i]<=57&&i<S.length())\n\t\t{\n\t\t\tNumm=Numm*10+S[i]-48;\n\t\t\ti++;\n\t\t}\n\t\tif(fushu) return -Numm;\n\t\telse return Numm;\n\t}\n\twhile(S[i]!='[')\n\t{\n\t\tstk[step]+=S[i];\n\t\ti++;\n\t}\n\tint H=getnum(S.substr(i+1,607087),step+1);\n\tif(H<0||H>=sto[stk[step]]) return -1;\n\telse return val[stk[step]][H];\n}\nint main()\n{\n\tint i,j;\n\twhile(cin>>s1>>s2)\n\t{\n\t\tif(s1==\"int\")\n\t\t{\n\t\t\ti=0;\n\t\t\tstring Name=\"\";\n\t\t\tint Num=0;\n\t\t\twhile(s2[i]!='[')\n\t\t\t{\n\t\t\t\tName+=s2[i];//\u5b57\u7b26\u4e32\u53ef\u4ee5\u76f4\u63a5\u52a0\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tNum=getnum(s2.substr(i+1,607087),1);\n\t\t\tsto[Name]=Num;\n\t\t}\n\t\tif(s1==\"cout\")\n\t\t{\n\t\t\tint EW=getnum(s2,1);//\u53d6\u7ed3\u679c\n\t\t\tcout<<EW<<endl;\n\t\t\toutput=1;\n\t\t\tif(EW==-1)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t\tif(s1!=\"int\"&&s1!=\"cout\")\n\t\t{\n\t\t\ti=0;\n\t\t\tstring Name=\"\";\n\t\t\tint Num=0;\n\t\t\twhile(s1[i]!='[')\n\t\t\t{\n\t\t\t\tName+=s1[i];\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tNum=getnum(s1.substr(i+1,607087),1);\n\t\t\tif(Num<0||Num>=sto[Name])\n\t\t\t{\n\t\t\t\toutput=1;\n\t\t\t\tcout<<-1<<endl;\n\t\t\t\treturn 0;\n\t\t\t\n\t\t\t}\n\t\t\tval[Name][Num]=getnum(s2,1);\n\t\t}\n\t}\n\tif(!output)\n\t{\n\t\tcout<<-1<<endl;//\u5982\u679c\u6ca1\u8f93\u51fa\u4e00\u5b9a\u8981\u8f93\u51fa\u4e2a-1\uff0c\u4e0d\u7136#3\u548c#9\u4f1aWA(\u65e0\u803b\u7684\u7279\u5224)\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1566741067,
        "uid": 115947,
        "name": "huangx607087",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011"
    },
    {
        "content": "## P2830 \u5199\u7a0b\u5e8f\n\n### \u4e00\u9053\u7ec6\u8282\u6bd4\u8f83\u591a\u7684\u6a21\u62df\u9898\u3002\n\n- \u6240\u6709\u6d89\u53ca\u5230\u7684\u6570\u5b57\u90fd\u662f\u53d8\u91cf\uff0c\u5305\u62ec\u5b9a\u4e49\u6570\u7ec4\u7684\u65f6\u5019\u3002\n\n- \u8d85\u8fc7\u6570\u7ec4\u5927\u5c0f\u76f4\u63a5\u8fd4\u56de\u3002\n\n- \u636e\u8ba8\u8bba\u533a\u4e00\u4e9b\u8bf4\u6cd5\uff0c\u4f1a\u6709\u540d\u4e3a ```int``` \u6216 ```cout``` \u7684\u6570\u7ec4\uff0c\u4e0d\u8fc7\u6211\u8fd9\u4e2a\u505a\u6cd5\u4f3c\u4e4e\u5e76\u6ca1\u6709\u8fd9\u6837\u7684\u95ee\u9898\u3002\n\n### \u89e3\u9898\u601d\u8def\n\n\u8003\u8651\u600e\u4e48\u5b58\u4e0b\u6bcf\u4e2a\u6570\u7ec4\u3002\n\nSTL \u5927\u6cd5\u597d\uff01\n\n\u7528\u4e00\u4e2a ```map<string,vector<int> >mp``` \u5b58\u4e0b\u6570\u7ec4\u540d\u548c\u6570\u7ec4\u5143\u7d20\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u8bbf\u95ee\u65f6\u76f4\u63a5\u8bfb\u53d6 mp[ \u6570\u7ec4\u540d ] \u4e2d\u7684\u5143\u7d20\u3002\n\n### \u51fd\u6570\u89e3\u91ca\n\n```bad()```\uff1a\u53d1\u751f\u9519\u8bef\uff0c\u8f93\u51fa -1 \u5e76\u8fd4\u56de\u3002\n\n```getson(string,string,string)```\uff1a\u5c06```[```\u524d\u540e\u5185\u5bb9\u5206\u79bb\u5f00\u6765\u3002\n\n```toint(string)```\uff1a\u5c06\u5b57\u7b26\u4e32\u8f6c\u6210\u6570\u5b57\u3002\n\n```expl(string)```\uff1a\u8fd4\u56de\u5b57\u7b26\u4e32\u5bf9\u5e94\u7684\u503c\uff0c\u8fc7\u7a0b\u4e2d\u53d1\u751f\u8d8a\u754c\u4f1a\u76f4\u63a5\u9000\u51fa\u7a0b\u5e8f\u3002\n\n### \u4ee3\u7801\u90e8\u5206\n\n**\u5c0f\u58f0 bb\uff1a\u8fd9\u662f\u6b64\u9898\u6700\u4f18\u89e3&C++\u6700\u77ed\u89e3\uff0c24ms\uff0c1.01KB\u3002**\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstring a,b;\nmap<string,vector<int> >mp;\nvoid bad(){\n\tcout<<\"-1\";\n\texit(0);//\u5728int main()\u5916\u9000\u51fa\u7a0b\u5e8f\n}\nvoid getson(string s,string& s1,string& s2){\n\tint i; \n\tfor(i=0;i<s.size();i++){\n\t\tif(s[i]=='[')break;\n\t\telse s1+=s[i];\n\t}\n\ti++;//\u8df3\u8fc7[\n\tfor(;i<s.size()-1;i++)s2+=s[i];\n}\nint toint(string s){\n\tint res=0;\n\tfor(int i=0;i<s.size();i++){\n\t\tres=res*10+s[i]-'0';\n\t\tif(res>1000000000)return -1;\n\t}\n\treturn res;\n}\nint expl(string s){\n\tstring tmp=\"\",tmp2=\"\";\n\tgetson(s,tmp,tmp2);\n\tif(tmp2==\"\")return toint(s);//\u6574\u4e2a\u5b57\u7b26\u4e32\u90fd\u662f\u6570\u5b57\n\tint tmpp=expl(tmp2);//\u9012\u5f52\u8c03\u7528\n\tif(tmpp<0||tmpp>=mp[tmp].size())bad();\n\treturn mp[tmp][tmpp];\n}\nint main(){\n\twhile(cin>>a){\n\t\tcin>>b;\n\t\tif(a==\"int\"){\n\t\t\tstring tmp=\"\",tmp2=\"\";\n\t\t\tgetson(b,tmp,tmp2);\n\t\t\tint tmpp=expl(tmp2);\n\t\t\tmp[tmp]=vector<int>(tmpp);\n\t\t}else if(a==\"cout\"){\n\t\t\tcout<<expl(b)<<endl;\n\t\t}else{\n\t\t\tint k=expl(b);\n\t\t\tstring tmp=\"\",tmp2=\"\";\n\t\t\tgetson(a,tmp,tmp2);\n\t\t\tint tmpp=expl(tmp2);\n\t\t\tif(tmpp>=mp[tmp].size())bad();\n\t\t\tmp[tmp][tmpp]=k;\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1636098297,
        "uid": 225192,
        "name": "Raymondzll",
        "ccfLevel": 6,
        "title": "P2830\u9898\u89e3"
    },
    {
        "content": "* **\u3010\u9898\u76ee\u94fe\u63a5\u3011**\n\n[Link:P2830](https://www.luogu.com.cn/problem/P2830)\n\n* **\u3010\u89e3\u9898\u601d\u8def\u3011**\n\n\u4e00\u9053\u5751\u591a\u7684\u6a21\u62df\u9898\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u641e\u6e05\u695a\u600e\u4e48\u6a21\u62df\u3002\n\n\u8bb8\u591a\u9898\u89e3\u91c7\u7528\u4e86\u4e00\u6837\u7684\u505a\u6cd5\uff1a\n\n1. \u7528```struct```\u6216\u81ea\u5b9a\u4e49\u6570\u7ec4\u5206\u914d\u52a8\u6001\u6570\u7ec4\u3002\n\n2. \u7528```map```\u628a\u6570\u7ec4\u4e0e\u540d\u5b57\u5173\u8054\u8d77\u6765\u3002\n\n3. \u7528\u4e00\u4e2a\u9012\u5f52\u51fd\u6570\u5904\u7406\u6570\u7ec4\u4e0b\u6807\u3002\n\n4. \u5224\u65ad\u8bbf\u95ee\u8fdd\u89c4\u3002\u5982\u679c\u786e\u5b9e\uff0c\u7528```try```\u548c```catch```\u6216```exit(0)```\u9000\u51fa\u7a0b\u5e8f\u3002\n\n\u73b0\u5728\u6211\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684\u3001\u53ef\u4ee5\u4f7f\u4f60\u7684\u4ee3\u7801\u91cf\u7f29\u5c0f\uff0c~~\u5e76\u4e14\u8fd8\u5f88\u7384\u5b66~~\u7684\u65b9\u6cd5\uff08\u6ca1\u9519\uff0c\u6211\u662f\u672c\u9898\u76ee\u6700\u77ed\u89e3\u3008$1.05KB$\u3009\uff09$\\color{white}\\tiny Q\\!w\\!Q$\uff1a\n\u7528```vector```\u5b8c\u6210\u52a8\u6001\u6570\u7ec4\u5206\u914d\uff0c\u7528\u5b83\u7684```at```\u52a0\u4e0a```try```\u548c```catch```\u5b8c\u6210\u8d8a\u754c\u68c0\u67e5\u3002\n\n\u4e3a\u4ec0\u4e48\u7384\u5b66\uff1f\u7b49\u4f1a\u5728\u5b9e\u73b0\u7ec6\u8282\u91cc\u4f1a\u8bf4\u3002\n\n* **\u3010\u5b9e\u73b0\u7ec6\u8282\u3011**\n\n```unordered_map```\uff1a\u7a9d\u88ab\u6ce5\u840c\u629b\u5f03\u4e86\u5417$Q\\omega Q$\n\n\u662f\u7684\uff0c\u6211\u4eec\u5e76\u4e0d\u5173\u5fc3\u6570\u7ec4\u540d\u548c\u6570\u7ec4\u7ec4\u5408\u7684\u4f4d\u7f6e\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528```unordered_map```\u3002\n\n\u5728\u8fd9\u4e2a\u4ee3\u7801\u7684```catch```\u5757\u4e2d\uff0c\u4ec5\u68c0\u6d4b```out_of_bound```\u5f02\u5e38\u800c\u4e0d\u662f\u7528\u7701\u7565\u53f7\u6355\u6349\u6240\u6709\u5f02\u5e38\uff0c\u56e0\u4e3a\u8fd9\u6837\u66f4\u5bb9\u6613\u53d1\u73b0bug\uff08\u4e4b\u524d\u5728\u672c\u673a\u6d4b\u8bd5\uff0c\u629b\u51fa\u4e86\u4e00\u4e2a```bad_alloc```\u5f02\u5e38\uff09\u3002\n\n\u6ce8\u610f\uff0c\u5728\u4ee3\u7801\u4e2d\u8f93\u5165\u7684\u7b2c\u4e09\u79cd\u60c5\u51b5\uff08$Line\\ 41$\uff09\u5982\u679c\u53bb\u6389\u4e2d\u95f4\u90a3\u4e2a$tmp$\u4f1a$\\color{red}\\texttt{WA}$\u3002\u6240\u4ee5\uff0c\u4e3a\u4ec0\u4e48\u8bf4\u5b83\u7384\u5b66\u5462\uff1f\n\n* **\u3010\u4ee3\u7801\u5b9e\u73b0\u3011**\n\n```cpp\n#include <unordered_map>\n#include <iostream>\n#include <vector>\n#include <string>\n#include <cctype>\n\nusing namespace std;\n\nunordered_map<string,vector<int>> arrays;\nint result;\n\nint& index_access(string index_str)//\u8bbf\u95ee\u51fd\u6570\n{\n\tif(isdigit(index_str[0]))//\u5982\u679c\u5f00\u5934\u662f\u6570\u5b57\u628a\u5b83\u8f6c\u6210\u6574\u6570\u5e76\u8fd4\u56de\n\t{\n\t\tresult=0;\n\t\tfor(int i=0;isdigit(index_str[i]);i++)\n\t\t\tresult=result*10+index_str[i]-'0';\n\t\treturn result;\n\t}\n\tstring result;//\u5426\u5219\u8bfb\u53d6\u6570\u7ec4\u540d\uff0c\u5e76\u7528\u8fd9\u4e2a\u6570\u7ec4\u540d\u8bbf\u95ee\u5143\u7d20\n\tfor(int i=0;index_str[i]!='[';i++)\n\t\tresult+=index_str[i];\n\treturn arrays[result].at(index_access(index_str.substr(result.size()+1,index_str.size()-result.size()-2)));//at\u5982\u679c\u8bbf\u95ee\u8fdd\u89c4\u4f1a\u629b\u51faout_of_range\u5f02\u5e38\n}\n\nint main(int argc,char *argv[],char *envp[])\n{\n\tstring optype,param;\n\tint tmp;\n\ttry\n\t{\n\t\tcin>>optype;\n\t\twhile(cin)\n\t\t{\n\t\t\tif(optype==\"int\")//\u58f0\u660e\u6570\u7ec4\n\t\t\t\tcin.get(),getline(cin,optype,'[')>>param,arrays[optype]=vector<int>(index_access(param));\n\t\t\telse if(optype==\"cout\")//\u8f93\u51fa\n\t\t\t\tcin>>optype,cout<<index_access(optype)<<endl;\n\t\t\telse//\u8d4b\u503c\n\t\t\t\tcin>>param,index_access(optype)=tmp=index_access(param);//\u4ee3\u7801\u4e2d\u6700\u7384\u5b66\u7684\u4e00\u884c\n\t\t\tcin>>optype;\n\t\t}\n\t}\n\tcatch(out_of_range& ecpt)//\u5904\u7406\u8bbf\u95ee\u8fdd\u89c4\uff0c\u7ed3\u675f\u7a0b\u5e8f\n\t{\n\t\tcout<<-1;\n\t}\n \treturn 0;\n}\n\n```",
        "postTime": 1610797153,
        "uid": 372983,
        "name": "Antarctic_Cube",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011"
    },
    {
        "content": "### \u9898\u76ee\u6982\u8981\n\u6211\u4eec\u9700\u8981\u6784\u5efa\u4e00\u4e2a\u9898\u76ee\u4e2d\u8981\u6c42\u7684\u547d\u4ee4\u89e3\u91ca\u5668\uff0c\u5982\u679c\u51fa\u73b0\u6570\u7ec4\u8d8a\u754c\u5219\u8f93\u51fa`-1`\u5e76\u9000\u51fa\u3002  \n\u9898\u76ee\u4e2d\u53ea\u4f1a\u51fa\u73b0\u6570\u7ec4\u8d8a\u754c\u8fd9\u79cd\u5f02\u5e38\u3002\n\n### \u89e3\u91ca\u5668\u6570\u636e\u7ed3\u6784\n\u89c2\u5bdf\u9898\u76ee\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u89e3\u91ca\u5668\u53ea\u6709**\u4e00\u79cd\u6570\u636e\u7c7b\u578b**\uff1a\u6570\u7ec4\uff08\u5176\u5b9e\u4e5f\u6709\u6574\u6570\uff0c\u4f46\u662f\u4e0d\u80fd\u88ab\u58f0\u660e\u4e3a\u5355\u72ec\u7684\u53d8\u91cf\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u5148\u5199\u51fa\u4e00\u4e2a\u6570\u7ec4\u7c7b\u578b\u7684\u5b9e\u73b0\uff08\u4e3a\u8282\u7701\u7a7a\u95f4\uff0c\u4f7f\u7528\u52a8\u6001\u5206\u914d\u5185\u5b58\uff08~~\u867d\u7136\u5728\u672c\u9898\u4f3c\u4e4e\u6ca1\u4ec0\u4e48\u7528~~\uff09\uff09\uff1a\n```cpp\nstruct Array {\n    int len;\n    int* data; // \u6570\u636e\u5b58\u653e\n    Array(int len):len(len) {\n        data = new int[len];\n        for(int i = 0; i < len; i++) data[i] = 0; // \u586b\u96f6\n    }\n    ~Array() { delete[] data; } \n    // \u5bf9\u4e8enew\u5206\u914d\u7684\u7a7a\u95f4\u8981\u53ca\u65f6delete\u6389\n    // \u4f46\u662f\u5728\u672c\u9898\u7528\u5904\u4e0d\u5927\n};\n```\n\u800c\u53d8\u91cf\u540d\u7684\u5b58\u50a8\u67e5\u8be2\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528STL\u4e2d\u7684`map`\u7c7b\u578b\uff0c\u5b9a\u4e49\u5982\u4e0b\uff1a\n```cpp\nmap<string, Array*> varList;\n```\n### \u89e3\u91ca\u5668\u547d\u4ee4\n\u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u5b9e\u73b0\u4e09\u79cd\u547d\u4ee4\uff1a\n  - `int arrName[arrLen]` \uff1a**\u58f0\u660e**\u4e00\u4e2a\u6807\u8bc6\u7b26\u4e3a`arrName`\u4e14\u957f\u5ea6\u4e3a`arrLen`\u7684\u6570\u7ec4\n  - `cout arrName[subscript]` : **\u8f93\u51fa**\u6807\u8bc6\u7b26\u4e3a`arrName`\u7684\u6570\u7ec4\u4e0b\u6807\u4e3a`subscript`\u7684\u5143\u7d20\n  - `arrName[subscript] expression` : \u7ed9\u6807\u8bc6\u7b26\u4e3a`arrName`\u7684\u6570\u7ec4\u4e0b\u8868\u4e3a`subscript`\u7684\u5143\u7d20**\u8d4b\u503c**\u4e3a`expression`\u3002  \n  \n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c`arrLen`\u3001`subscript`\u3001`expression`\u90fd\u6709\u53ef\u80fd\u4e0d\u662f\u5b57\u9762\u91cf\uff08\u5f62\u5982`123`\uff0c`114514`\u7684\u201c**\u5b57\u9762\u610f\u4e49\u7684**\u201d\u91cf\uff09\uff0c\u800c\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff08\u5728\u672c\u9898\u76ee\u4e2d\u4ec5\u5305\u542b\u5f62\u5982`a[x]`\u7684\u53d6\u503c\u64cd\u4f5c\uff0c\u4f46\u662f**\u53ef\u80fd\u5d4c\u5957**\uff09\u3002  \n### \u8868\u8fbe\u5f0f\u7684\u89e3\u6790\n#### \u53d8\u91cf\u540d\u4e0e\u4e0b\u6807\u7684\u89e3\u6790\n\u6211\u4eec\u5148\u8003\u8651\u83b7\u53d6\u5230\u6211\u4eec\u9700\u8981\u64cd\u4f5c\u7684\u90a3\u4e2a**\u6570\u7ec4\u7684\u540d\u5b57**\u548c\u64cd\u4f5c\u7684**\u5143\u7d20\u7684\u4e0b\u6807**\u3002\u8fd9\u91cc\u51fa\u73b0\u7684`resolve()`\u51fd\u6570\u662f**\u89e3\u6790\u8868\u8fbe\u5f0f\u7684\u51fd\u6570**\uff0c\u4ee3\u7801\u5c06\u5728\u66f4\u4e0b\u9762\u7ed9\u51fa\u3002\n```cpp\n// \u9012\u5f52\u83b7\u53d6\u5230\u53d8\u91cf\u540d\u548c\u4e0b\u6807\nvoid separate(char* str, int l, int r, string& outname, int& subscript) {\n    // \u89e3\u6790\u53d8\u91cf\u540d\n    outname = \"\";\n    while(str[l] != '[') {\n        outname += str[l];\n        ++l;\n    }\n    // \u89e3\u6790\u4e0b\u6807\n    subscript = resolve(str, l + 1, r - 1);\n}\n```\n#### \u8868\u8fbe\u5f0f\u7684\u89e3\u6790\n\u83b7\u53d6\u5230\u53d8\u91cf\u540d\u4e4b\u540e\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u89e3\u6790\u8fd9\u91cc\u9762\u7684\u4e0b\u6807\uff0c\u7531\u4e8e\u4e0b\u6807\u53ef\u80fd\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u56e0\u6b64\u6211\u4eec\u7528\u4e00\u4e2a``resolve()``\u51fd\u6570\u6765\u89e3\u6790\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u3002\u5982\u679c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u51fa\u73b0\u4e86**\u6570\u7ec4\u8d8a\u754c\u7b49\u5f02\u5e38\u60c5\u51b5**\uff0c\u6211\u4eec\u8003\u8651\u4f7f\u7528`throw`\u8bed\u53e5\u6765**\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38**\u3002\n```cpp\n// \u89e3\u6790\u8868\u8fbe\u5f0f\nint resolve(char* str, int l, int r) {\n    // \u5982\u679c\u5f00\u5934\u4e3a\u6570\u5b57\uff0c\u8bf4\u660e\u8fd9\u4e00\u6bb5\u4e00\u5b9a\u662f\u4e00\u4e2a\u5b57\u9762\u91cf\n    if(str[l] >= '0' && str[l] <= '9') {\n        int ret = 0;\n        for(; l <= r; ++l) {\n            ret *= 10;\n            ret += str[l] - '0';\n        }\n        return ret;\n    }\n    // \u5426\u5219\u5c31\u662f\u8868\u8fbe\u5f0f\n    string arrName; int subscript;\n    separate(str, l, r, arrName, subscript);\n\n    Array* ap = varList[arrName];\n    if(ap->len > subscript && subscript >= 0) // \u5224\u65ad\u662f\u5426\u4e0b\u6807\u8d8a\u754c\n        return ap->data[subscript];\n    else\n        throw -1; // \u6211\u4eec\u8003\u8651\u91c7\u7528throw\u6765\u5f15\u53d1\u5f02\u5e38\uff0c\u501f\u6b64\u4e2d\u65ad\u7a0b\u5e8f\n        // \u4e0b\u6587\u4e2d\u7684throw\u540c\u7406\n}\n```\n\u9700\u8981\u6ce8\u610f\u8fd9\u91cc\u548c`separate()`\u51fd\u6570\u867d\u7136**\u76f8\u4e92\u8c03\u7528**\u4e86\uff0c\u4f46\u662f`resolve()`\u51fd\u6570\u4e00\u5b9a\u4f1a\u5728\u4e00\u4e2a**\u5b57\u9762\u91cf**\u4e0a\u505c\u6b62\u9012\u5f52\uff0c\u6240\u4ee5\u4e0d\u4f1a\u51fa\u73b0\u7206\u6808\u7684\u60c5\u51b5\u3002\n### \u547d\u4ee4\u5b9e\u73b0\n\u8fd9\u91cc\u7684\u5177\u4f53\u5b9e\u73b0\u4ee3\u7801\u5c06\u4f1a\u5728\u540e\u9762\u7ed9\u51fa\u3002\n#### \u65b0\u5efa\u6570\u7ec4\n\u6211\u4eec\u5bf9\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f7f\u7528`separate()`\u51fd\u6570\u89e3\u6790\u51fa\u53d8\u91cf\u540d\u548c\u4e0b\u6807\uff0c\u5176\u4e2d\u4e0b\u6807\u5c31\u662f\u6570\u7ec4\u7684\u957f\u5ea6\u3002\n~~\u8fd9\u91cc\u6211\u4eec\u8fd8\u9700\u8981\u5224\u65ad\u4e00\u4e0b\u6570\u7ec4\u957f\u5ea6\u7684\u5408\u6cd5\u6027\uff08\u9700\u8981\u5927\u4e8e0\uff09\uff0c\u4f46\u662f\u9898\u76ee\u4e2d\u8bf4\u53ea\u6709\u4e0b\u6807\u8d8a\u754c\uff0c\u90a3\u6211\u4e5f\u4e0d\u77e5\u9053\u6570\u636e\u5230\u5e95\u662f\u600e\u4e48\u6837\u7684\u3002\u4e3a\u4e86\u89e3\u91ca\u5668\u4e25\u8c28\u4e00\u70b9\u8fd8\u662f\u5199\u4e0a\u53bb\u5427(x~~\n\n\u7136\u540e\u6211\u4eec\u5c31\u7528\u8fd9\u4e00\u53e5\u6765\u5728varList\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u65b0\u6570\u7ec4\u3002\n```cpp\nvarList[name] = new Array(len);\n```\n#### \u8f93\u51fa\n\u6211\u4eec\u5bf9\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4f7f\u7528`resolve()`\u51fd\u6570\u89e3\u6790\u51fa\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u7136\u540e\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002\n#### \u8d4b\u503c\n\u6211\u4eec\u5bf9\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f7f\u7528`separate()`\u89e3\u6790\u51fa\u53d8\u91cf\u540d\u548c\u4e0b\u6807\uff0c\u5bf9\u7b2c\u4e8c\u4e2a\u4e2a\u53c2\u6570\u4f7f\u7528`resolve()`\u89e3\u6790\u51fa\u8981\u8d4b\u7684\u503c\u3002\u901a\u8fc7\u53d8\u91cf\u540d\u548c\u4e0b\u6807\u5c31\u53ef\u4ee5\u64cd\u4f5c\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u4e86\u3002\u9700\u8981\u6ce8\u610f\u8fd9\u91cc\u4e5f\u9700\u8981\u5224\u65ad\u4e0b\u6807\u7684\u5408\u6cd5\u6027\u3002\n### \u6ce8\u610f\u4e8b\u9879\n`throw`\u8bed\u53e5\u629b\u51fa\u5f02\u5e38\u5fc5\u987b\u8981\u6709\u4e00\u4e2a`try..catch..`\u8bed\u53e5\u6765\u627f\u63a5\uff0c\u7136\u540e\u8f93\u51fa`-1`\u5e76\u9000\u51fa\uff0c\u5426\u5219\u5e94\u8be5\u4f1aRE\u3002\n### AC\u4ee3\u7801\n```cpp\n/* Headers */\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <map>\nusing namespace std;\n/* Type and variables */\n\n// c1 c2 \u5206\u522b\u4e3a\u4e24\u4e2a\u53c2\u6570\nchar c1[5000];\nchar c2[5000];\n\n// \u6570\u7ec4\u7c7b\u578b\nstruct Array {\n    int len;\n    int* data; // \u6570\u636e\u5b58\u653e\n    Array(int len):len(len) {\n        data = new int[len];\n        for(int i = 0; i < len; i++) data[i] = 0; // \u586b\u96f6\n    }\n    ~Array() { delete[] data; } \n    // \u5bf9\u4e8enew\u5206\u914d\u7684\u7a7a\u95f4\u8981\u53ca\u65f6delete\u6389\n    // \u4f46\u662f\u5728\u672c\u9898\u7528\u5904\u4e0d\u5927\n};\nmap<string, Array*> varList;\n/* Functions */\n\n// \u9700\u8981\u9884\u5148\u5b9a\u4e49\u539f\u578b\uff0c\u56e0\u4e3a\u201c\u83b7\u53d6\u53d8\u91cf\u540d\u548c\u4e0b\u6807\u201d\u548c\u201c\u89e3\u6790\u8868\u8fbe\u5f0f\u201d\u7684\u51fd\u6570\u9700\u8981\u76f8\u4e92\u8c03\u7528\nvoid separate(char* str, int l, int r, string& outname, int& subscript);\nint resolve(char* str, int l, int r);\n\n// \u9012\u5f52\u83b7\u53d6\u5230\u53d8\u91cf\u540d\u548c\u4e0b\u6807\nvoid separate(char* str, int l, int r, string& outname, int& subscript) {\n    // \u89e3\u6790\u53d8\u91cf\u540d\n    outname = \"\";\n    while(str[l] != '[') {\n        outname += str[l];\n        ++l;\n    }\n    // \u89e3\u6790\u4e0b\u6807\n    subscript = resolve(str, l + 1, r - 1);\n}\n// \u89e3\u6790\u8868\u8fbe\u5f0f\nint resolve(char* str, int l, int r) {\n    // \u5982\u679c\u5f00\u5934\u4e3a\u6570\u5b57\uff0c\u8bf4\u660e\u8fd9\u4e00\u6bb5\u4e00\u5b9a\u662f\u4e00\u4e2a\u5b57\u9762\u91cf\n    if(str[l] >= '0' && str[l] <= '9') {\n        int ret = 0;\n        for(; l <= r; ++l) {\n            ret *= 10;\n            ret += str[l] - '0';\n        }\n        return ret;\n    }\n    // \u5426\u5219\u5c31\u662f\u8868\u8fbe\u5f0f\n    string arrName; int subscript;\n    separate(str, l, r, arrName, subscript);\n\n    Array* ap = varList[arrName];\n    if(ap->len > subscript && subscript >= 0) // \u5224\u65ad\u662f\u5426\u4e0b\u6807\u8d8a\u754c\n        return ap->data[subscript];\n    else\n        throw -1; // \u6211\u4eec\u8003\u8651\u91c7\u7528throw\u6765\u5f15\u53d1\u5f02\u5e38\uff0c\u501f\u6b64\u4e2d\u65ad\u7a0b\u5e8f\uff0c\u4e0b\u6587\u4e2d\u7684throw\u540c\u7406\n}\n// \u65b0\u5efa\u53d8\u91cf\nvoid setArray(char* str, int l, int r) {\n    string name; int subscript;\n    separate(str, l, r, name, subscript);\n    if(subscript > 0) // \u5224\u65ad\u6570\u7ec4\u957f\u5ea6\u662f\u5426\u5408\u7406\n        varList[name] = new Array(subscript);\n    else\n        throw -1;\n}\n/* Main */\nint main() {\n    try {\n        while(scanf(\"%s%s\", c1, c2) != EOF) {\n            int l1 = strlen(c1), l2 = strlen(c2);\n            if(!strcmp(c1, \"int\")) {\n                setArray(c2, 0, l2 - 1);\n                continue;\n            }\n            if(!strcmp(c1, \"cout\")) {\n                printf(\"%d\\n\", resolve(c2, 0, l2 - 1));\n                continue;\n            }\n            string arrName; int subscript;\n            separate(c1, 0, l1 - 1, arrName, subscript);\n            Array* ap = varList[arrName];\n            if(ap->len > subscript && subscript >= 0) // \u5224\u65ad\u662f\u5426\u4e0b\u6807\u8d8a\u754c\n                ap->data[subscript] = resolve(c2, 0, l2 - 1);\n            else\n                throw -1;\n        }\n    } catch (int ex) { // \u5982\u679c\u5f15\u53d1\u5f02\u5e38\u5c31\u8f93\u51fa\"-1\"\u5e76\u9000\u51fa\n        printf(\"-1\");\n    }\n    return 0;\n}\n```\n",
        "postTime": 1606223944,
        "uid": 227947,
        "name": "\u4e03\u78b3\u70f7\u70c3",
        "ccfLevel": 4,
        "title": "P2830 \u5199\u7a0b\u5e8f"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u662f\u4e00\u9053\u6a21\u62df\u9898\uff0c\u4f46\u662f\u6709\u5751\u70b9\uff0c\u5982\u4f7f\u7528 `int` \u6570\u7ec4\u6216 `cout` \u6570\u7ec4\uff0c\u800c\u4e14\u8fd8\u4f1a\u51fa\u73b0 `int a[b[0]]` \u8fd9\u6837\u7684\u60c5\u51b5\u3002\u7136\u540e\u5c31\u662f\u600e\u6837\u52a8\u6001\u5f00\u6570\u7ec4\u4e86\uff0c\u6211\u662f\u8fd9\u6837\u5f04\u7684\uff1a\u7528\u4e00\u4e2a `map` \u6765\u5b58\u50a8\u6570\u7ec4\u540d\u6240\u5728\u7684\u6570\u7ec4\u7f16\u53f7\uff0c\u7528\u4e00\u4e2a `vector` \u6765\u5b58\u50a8\u6bcf\u4e00\u4e2a\u6570\u7ec4\uff0c\u5957\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u6709\u6570\u7ec4\u548c\u4e0b\u6807\u4e0a\u9650\uff0c\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u53ea\u8981\u4e00\u4e2a\u51fa\u73b0\u8d8a\u754c\u5c31\u8f93\u51fa `-1`\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node {\n\tint a[111], cap;//cap\u5c31\u662f\u6211\u6240\u8bf4\u7684\u6570\u7ec4\u5927\u5c0f\u4e0a\u9650\n\tnode(int cap = 0): cap(cap){memset(a, 0, sizeof(a));}\n\tint& operator [](int n) {return a[n];}\n};\nvector<node> a;\nmap<string, int> ma;\nstring opt, arr, h; int cnt;\nint getans(string arr) {\n\tif (isdigit(arr[0])) return stoi(arr);\n\tint det = 0, st = 1; string res, tmp, temp;\n\twhile (arr[det] != '[') tmp += arr[det++]; ++det;\n\twhile (st) {\n\t\tif (arr[det] == '[') ++st;\n\t\tif (arr[det] == ']') --st;\n\t\tres += arr[det++];\n\t}\n\tint k = getans(res);\n\tif (k >= a[ma[tmp]].cap) cout << -1, exit(0);\n\treturn a[ma[tmp]][k];\n}\nint main() {\n\twhile (cin >> opt) {\n\t\tif (opt == \"int\") {\n\t\t\tcin >> arr; string temp; int det = 0, st = 1; h = \"\";\n\t\t\twhile (arr[det] != '[') temp += arr[det++]; ++det;\n\t\t\twhile (st) {\n\t\t\t\tif (arr[det] == '[') ++st;\n\t\t\t\tif (arr[det] == ']') --st;\n\t\t\t\th += arr[det++];\n\t\t\t}\n\t\t\tma[temp] = cnt++, a.push_back(node(getans(h))); continue;\n\t\t}\n\t\tif (opt == \"cout\") cin >> arr, cout << getans(arr) << '\\n';\n\t\telse {\n\t\t\tcin >> h, arr = opt;\n\t\t\tint det = 0, st = 1; string res, tmp, temp;\n\t\t\twhile (arr[det] != '[') tmp += arr[det++]; ++det;\n\t\t\twhile (st) {\n\t\t\t\tif (arr[det] == '[') ++st;\n\t\t\t\tif (arr[det] == ']') --st;\n\t\t\t\tres += arr[det++];\n\t\t\t}\n\t\t\tint k = getans(res);\n\t\t\tif (k >= a[ma[tmp]].cap) cout << -1, exit(0);\n\t\t\telse a[ma[tmp]][k] = getans(h);\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1602397371,
        "uid": 181378,
        "name": "Alarm5854",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011"
    },
    {
        "content": "### \u5927\u6a21\u62df\uff01\n\n\u5bf9\u5bf9\u5bf9\uff0c\u8fd9\u9053\u9898\u5c31\u662f\u4e2a\u5927\u6a21\u62df\uff01\n\n## \u9898\u76ee\u5927\u610f\uff1a\n\u7ed9\u4f60\uff0c\u4e09\u79cd\u8f93\u5165\u7684\u4ee3\u7801\uff1a\n\n\u5b9a\u4e49\uff0c\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4\uff0c\u5b9a\u4e49\u5b83\u7684\u540d\u5b57\u548c\u8fb9\u754c\u3002\n\n\u8d4b\u503c\uff0c\u7ed9\u4e00\u4e2a\u6570\u7ec4\u91cc\u9762\u7684\u4e00\u4e2a\u6570\u8d4b\u503c\u3002\n\n\u8f93\u51fa\uff0c\u8f93\u51fa\u4e00\u4e2a\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u6570\u3002\n\n\u5982\u679c\u6570\u7ec4\u8d8a\u754c\u4e86\uff0c\u5c31\u505c\u6b62\u7a0b\u5e8f\u3002\n\n## \u601d\u8def\uff1a\n\n\u6211\u4eec\u53ef\u4ee5\u7528 map \u6765\u50a8\u5b58\u6bcf\u4e2a\u6570\u7ec4\uff0c\u8bbf\u95ee\u65f6\u7528 string \u6765\u8bbf\u95ee\u5bf9\u5e94\u7684\u6570\u7ec4\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6570\u7ec4\u7684\u7b2c 100 \u4f4d\u6765\u50a8\u5b58\u5b83\u7684\u8fb9\u754c\u3002\n\n\u63a5\u7740\uff0c\u7528\u9012\u5f52\u8bbf\u95ee\u8f93\u5165\uff0c\u904d\u5386\u4e2d\u62ec\u53f7\u91cc\u9762\u7684\u53d8\u91cf\uff0c\u53ea\u5230\u5b83\u662f\u4e00\u4e2a\u6570\u4e3a\u6b62\u3002\n\n\u6211\u4eec\u518d\u68c0\u67e5\u5b83\u6709\u6ca1\u6709\u5728\u67d0\u4e00\u5904\u8d8a\u754c\u3002\n\n\u6700\u540e\uff0c\u5728\u5bf9\u5e94\u7684\u6570\u7ec4\u91cc\u9762\u5728\u5bf9\u5e94\u7684\u5730\u65b9\u505a\u64cd\u4f5c\u5c31\u884c\u4e86\u3002\n### \u6ce8\u610f\uff1a\n\n\u672c\u9898\u7ec6\u8282\u6709\u70b9\u591a\uff0c\u6162\u6162\u6253\u522b\u7740\u6025\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node{\n\tint vi[105];\n};\n//\u5b9a\u4e49map\nmap<string,node>mi;\nstring a,b,s;\nint dfs(string x){//\u9012\u5f52\u8bbf\u95ee\u8f93\u5165\n\tif(isdigit(x[0])){\n\t\tint y=0,v=0;\n\t\twhile(isdigit(x[y])){\n\t\t\tv*=10;\n\t\t\tv+=x[y]-'0';\n\t\t\ty++;\n\t\t}\n\t\treturn v;\n\t}\n\tstring b=\"\",s=\"\";\n\tint l=-1,k;\n\twhile(x[++l]!='['){\n\t\tb+=x[l];\n\t}\n\twhile(l<x.size()-2){\n\t\tl++;\n\t\ts+=x[l];\n\t}\n\tk=dfs(s);\n\tif(k>=mi[b].vi[100]||k==-1||k>=100){\n\t\treturn -1;\n\t}\n\treturn mi[b].vi[k];\n}\nint main(){\n\twhile(cin>>a){\n\t\tif(a==\"int\"){//\u8f93\u5165\n\t\t\tcin>>b;\n\t\t\ta=\"\";\n\t\t\tint l=-1,c=0;\n\t\t\twhile(b[++l]!='['){\n\t\t\t\ta+=b[l];\n\t\t\t}\n\t\t\tl++;\n\t\t\tif(isdigit(b[l])){\n\t\t\t\tint u=0;\n\t\t\t\tfor(int i=l;i<b.size()-1;i++){\n\t\t\t\t\tu*=10;\n\t\t\t\t\tu+=b[i]-'0';\n\t\t\t\t}\n\t\t\t\tmi[a].vi[100]=u;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tstring h=\"\",s=\"\";\n\t\t\tl--;\n\t\t\twhile(b[++l]!='['){\n\t\t\t\th+=b[l];\n\t\t\t}\n\t\t\tl++;\n\t\t\twhile(l<b.size()-2){\n\t\t\t\ts+=b[l];\n\t\t\t\tl++;\n\t\t\t}\n\t\t\tif(dfs(s)==-1||dfs(s)>=mi[h].vi[100]||dfs(s)>=100){\n\t\t\t\tcout<<-1;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tmi[a].vi[100]=mi[h].vi[dfs(s)]; \n\t\t}\n\t\telse if(a==\"cout\"){//\u8f93\u51fa\n\t\t\tcin>>a;\n\t\t\tb=\"\";\n\t\t\ts=\"\";\n\t\t\tint l=-1;\n\t\t\twhile(a[++l]!='['){\n\t\t\t\tb+=a[l];\n\t\t\t}\n\t\t\twhile(l<a.size()-2){\n\t\t\t\tl++;\n\t\t\t\ts+=a[l];\n\t\t\t}\n\t\t\tif(dfs(s)==-1||dfs(s)>=mi[b].vi[100]||dfs(s)>=100){\n\t\t\t\tcout<<-1;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tcout<<mi[b].vi[dfs(s)]<<endl;\n\t\t}\n\t\telse{//\u8d4b\u503c\n\t\t\tb=\"\";\n\t\t\ts=\"\";\n\t\t\tint l=-1;\n\t\t\twhile(a[++l]!='['){\n\t\t\t\tb+=a[l];\n\t\t\t}\n\t\t\twhile(l<a.size()-2){\n\t\t\t\tl++;\n\t\t\t\ts+=a[l];\n\t\t\t}\n\t\t\tif(dfs(s)==-1||dfs(s)>=mi[b].vi[100]||dfs(s)>=100){\n\t\t\t\tcout<<-1;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tint o=dfs(s);\n\t\t\tcin>>a;\n\t\t\tif(isdigit(a[0])){\n\t\t\t\tint u=0;\n\t\t\t\tfor(int i=0;i<a.size();i++){\n\t\t\t\t\tu*=10;\n\t\t\t\t\tu+=a[i]-'0';\n\t\t\t\t}\n\t\t\t\tmi[b].vi[o]=u;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tstring h=\"\";\n\t\t\ts=\"\";\n\t\t\tl=-1;\n\t\t\twhile(a[++l]!='['){\n\t\t\t\th+=a[l];\n\t\t\t}\n\t\t\twhile(l<a.size()-2){\n\t\t\t\tl++;\n\t\t\t\ts+=a[l];\n\t\t\t}\n\t\t\tif(dfs(s)==-1||dfs(s)>=mi[h].vi[100]||dfs(s)>=100){\n\t\t\t\tcout<<-1;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tmi[b].vi[o]=mi[h].vi[dfs(s)];\n\t\t}\n\t}\n}\n```\n",
        "postTime": 1660094174,
        "uid": 380406,
        "name": "shenx989",
        "ccfLevel": 0,
        "title": "\u5199\u7a0b\u5e8f"
    },
    {
        "content": "# \u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011\n$submit+=6$ $AC+=1$\u2026\u2026\n\n- __\u521d\u6b65\u5206\u6790__\n\n\u64cd\u4f5c\u6709\u4e09\u79cd\uff1a\n\n```\nint \u6570\u7ec4\u540d[\u6570\u636e]\n```\n```\ncout \u6570\u7ec4\u540d[\u6570\u636e]\n```\n```\n\u6570\u7ec4\u540d[\u6570\u636e] \u6570\u636e\n```\n\n\u6211\u4eec\u4f1a\u53d1\u73b0\u6709\u5f88\u591a\u4e2a`\u6570\u636e`\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a\u5b83\u5f53\u4f5c\u4e00\u4e2a\u8fdb\u884c\u5904\u7406\u3002\n\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u5f97\u5230\u4ee5\u4e0b\u4f2a\u4ee3\u7801\uff1a\n```cpp\nwhile(cin>>\u64cd\u4f5c){\n\tif(\u64cd\u4f5c==\"int\")\u65b0\u5efa();\n\telse\n\tif(\u64cd\u4f5c==\"cout\")\u8f93\u51fa();\n\telse{\n\t\t\u83b7\u5f97\u6b63\u5728\u64cd\u4f5c\u7684\u53d8\u91cf();\n\t\t\u83b7\u5f97\u4e0b\u6807();\n\t\tcin>>\u6570\u636e;\n\t\t\u83b7\u5f97\u6570\u636e();\n\t\t\u53d8\u91cf[\u4e0b\u6807]=\u6570\u636e;\n\t}\n}\n```\n- __\u5982\u4f55\u50a8\u5b58\uff1f__\n\n\u53ef\u4ee5\u4f7f\u7528\u7ed3\u6784\u4f53\uff1a\n```cpp\nstruct student{\n\tchar name[];\n\tint size;\n\tint element;\n\tint var[];\n}\nstudent array[];\n```\n\u7136\u540e\u6211\u4eec\u4f1a\u53d1\u73b0```\u53d8\u91cf[\u4e0b\u6807]=\u6570\u636e;```\u9519\u4e86\u3002\n\n$fix$\uff1a```array[\u53d8\u91cf\u6240\u5904\u4f4d\u7f6e].var[\u4e0b\u6807]=\u6570\u636e```\u3002\n\n- __\u5904\u7406\u53d8\u91cf\u5d4c\u5957__\n\n\u4e0e[P1738](https://www.luogu.com.cn/problem/P1738)\u7c7b\u4f3c\uff0c\u5c06 '[' \u4f5c\u4e3a\u5206\u9694\u3002\n\nQ\uff1a\u90a3\u540e\u9762\u7684 ']' \u5462\uff1f\n\nA\uff1a\u4f60\u53ef\u4ee5\u53d1\u73b0\u540e\u9762\u7684 ']' \u90fd\u662f\u8fde\u5728\u4e00\u5757\u7684\u3002\n\n~~\u597d\u65e0\u804a\u3002~~\n\n\u4ee5 ```a[a[b[0]]]```\u4e3a\u4f8b\uff0c\u53ef\u4ee5\u628a\u5b83\u5206\u5272\u6210`\"a\"`\uff0c`\"a\"`\uff0c`\"b\"`\uff0c`\"0\"`\u3002\n\n\u628a`\"0\"`\u8f6c\u6362\u6210`0`\u3002\n\n\u627e\u5230`\"b\"`\u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u83b7\u5f97`b[0]`\u5e76\u50a8\u5b58`b[0]`\u7684\u6570\u636e\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n- __\u7279\u6b8a\u60c5\u51b5__\n\n\u662f\u5728```\u6570\u7ec4\u540d[\u6570\u636e] \u6570\u636e```\u65f6,\u4e0d\u8981\u628a\u6240\u6709\u6570\u636e\u90fd\u89e3\u6790\u51fa\u6765\uff0c\u8981\u5728\u6700\u524d\u9762\u7684\u4f4d\u7f6e\u627e\u5230\u540e\u5c31\u505c\u6b62\u3002\n\n\u56e0\u4e3a\u8fd9\u662f`\u6570\u7ec4\u540d`\uff0c\u4e0d\u662f`\u6570\u636e`\uff1b\n\n\u8fd8\u662f\u5728```\u6570\u7ec4\u540d[\u6570\u636e] \u6570\u636e```\u3002\n\n\u8fd9\u4e2a\u65f6\u5019`\u6570\u636e`\u53ef\u80fd\u662f\u4e00\u4e2a\u5e38\u6570\u3002~~\u5f53\u7136\u5176\u5b9e\u6ca1\u4ec0\u4e48\u533a\u522b\u3002~~ \u6240\u4ee5\u8fd9\u91cc\u4e5f\u8981\u5904\u7406\u4ee5\u4e0b\u3002\n\n- ~~__\u6700\u540e\u5b8c\u7ed3\u6492\u82b1\uff01__~~",
        "postTime": 1609641911,
        "uid": 323284,
        "name": "nvqlfi214",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011"
    },
    {
        "content": "\u8fd9\u9898\u9700\u8981\u8bb0\u5f55\u6570\u7ec4\u7684\u540d\u79f0\u3001\u5927\u5c0f\u548c\u6570\u7ec4\u5185\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u5f00\u4e00\u4e2a`map`\uff0c\u53ef\u4ee5\u89e3\u51b3\u540d\u79f0\u662f\u5b57\u7b26\u4e32\u7684\u95ee\u9898\u3002\n```cpp\nstruct node\n{\n\tint len;\n\tint num[105];\n};\nmap<string,node>mp;\n```\n\u7136\u540e\u5462\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u9898\u76ee\u7ed9\u51fa\u7684\u53d8\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u4ed6\u770b\u505a`\u53d8\u91cf\u540d[\u4e0b\u6807]`\u7684\u5f62\u5f0f\u3002\u5bf9\u4e8e\u4e0b\u6807\uff0c\u7531\u4e8e\u4f1a\u51fa\u73b0\u5d4c\u5957\uff0c\u6211\u4eec\u53ef\u4ee5\u9012\u5f52\u6c42\u804c\uff0c\u4e5f\u5c31\u662f\u5224\u65ad\u5f53\u524d\u662f\u6570\u8fd8\u662f\u53d8\u91cf\uff0c\u82e5\u662f\u6570\uff0c\u76f4\u63a5\u8fd4\u56de\u503c\uff0c\u5426\u5219\uff0c\u5148\u77e5\u9053\u53d8\u91cf\u540d\uff0c\u518d\u7ee7\u7eed\u9012\u5f52\u6c42\u51fa\u4e0b\u6807\uff0c\u7136\u540e\u8fd4\u56de\u503c\u3002\n```cpp\nint dfs(int now)\n{\n\tif(opt[now]>='0'&&opt[now]<='9')//\u5f53\u662f\u4e00\u4e2a\u6570\u7684\u65f6\u5019\n\t{\n\t\tint x=0;\n\t\tfor(int i=now;i<(int)opt.length();i++)//\u6c42\u8fd9\u4e2a\u6570\n\t\t{\n\t\t\tif(opt[i]==']') break;\n\t\t\tx=x*10+(opt[i]-'0');\n\t\t}\n\t\treturn x;\n\t}\n\tstring s=\"\";\n\tint i;\n\tfor(i=now;i<(int)opt.length();i++)//\u6c42\u8fd9\u4e2a\u53d8\u91cf\u7684\u53d8\u91cf\u540d\n\t{\n\t\tif(opt[i]=='[') break;\n\t\ts.push_back(opt[i]);\n\t}\n\tint k=dfs(i+1);//\u518d\u6c42s\u7684\u4e0b\u6807\n\tif(k>=mp[s].len)//\u5224\u662f\u5426\u8d8a\u754c\n\t{\n\t\tprintf(\"-1\\n\");\n\t\texit(0);\n\t}\n\treturn mp[s].num[k];//\u8fd4\u56de\u503c\n}\n```\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u8d4b\u503c\u64cd\u4f5c\u7684\u6c42\u503c\u4e5f\u53ef\u4ee5\u7528\u4e0a\u9762\u7684\u4ee3\u7801\u6c42\u3002\n\n\u63a5\u7740\uff0c\u89c2\u5bdf\u4e09\u4e2a\u64cd\u4f5c\uff0c\u53d1\u73b0\u90fd\u662f\u5148\u6c42\u51fa\u5176\u53d8\u91cf\u7684`\u53d8\u91cf\u540d[\u4e0b\u6807]`\uff0c\u7136\u540e\u518d\u8fdb\u884c\u4e0d\u540c\u7684\u64cd\u4f5c\u3002\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u628a\u4ed6\u4eec\u90fd\u653e\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\uff0c\u8282\u7701\u7801\u91cf\uff0c\u4e5f\u65b9\u4fbf\u8c03\u8bd5\u3002  \n\u90a3\u4e48\uff0c\u5bf9\u4e8e\u4e09\u4e2a\u64cd\u4f5c\uff0c\u6c42\u51fa`\u53d8\u91cf\u540d[\u4e0b\u6807]`\uff0c\u7136\u540e\u5bf9\u5e94\u4ee5\u4e0b\u60c5\u51b5\uff1a\n\n- \u58f0\u660e\u6570\u7ec4\uff1a`mp[\u53d8\u91cf\u540d]=(node){\u6570\u7ec4\u957f\u5ea6,{}};`\uff0c\u8003\u8651\u5230\u7ed9\u6570\u7ec4\u5168\u8d4b\u6210 $0$ \u53ef\u4ee5`a[MAXN]={}`\uff0c\u90a3\u4e48\u5728\u7ed9\u7ed3\u6784\u4f53\u91cc\u7684\u6570\u7ec4\u8d4b\u503c\u4e3a $0$ \u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e00\u4e2a $\\{\\}$\u3002\n- \u8f93\u51fa\uff1a`printf(\"%d\\n\",mp[\u53d8\u91cf\u540d].num[\u4e0b\u6807]);`\uff0c\u76f4\u63a5\u8f93\u51fa\uff0c\u4e0d\u7528\u591a\u89e3\u91ca\n- \u8d4b\u503c\uff1a`mp[\u53d8\u91cf\u540d].num[\u4e0b\u6807]=\u503c`\uff0c\u4e5f\u4e0d\u7528\u89e3\u91ca\n- \u6570\u7ec4\u8d8a\u754c\uff1a\u5224\u65ad\u4e0b\u6807\u4e0e\u6570\u7ec4\u957f\u5ea6\u7684\u5173\u7cfb\uff0c\u5373\u770b`\u4e0b\u6807>=mp[\u53d8\u91cf\u540d].len`\u662f\u5426\u6210\u7acb\n\n\u5173\u4e8e\u6c42\u53d8\u91cf\u7684\u53d8\u91cf\u540d\u548c\u4e0b\u6807\uff0c\u53ef\u4ee5\u50cf\u4e0a\u9762\u7684 dfs \u4e00\u6837\u6c42\u51fa\u6700\u5916\u5c42\u7684\u53d8\u91cf\u540d\uff0c\u5c31\u662f\u6211\u4eec\u9700\u8981\u7684\u53d8\u91cf\u540d\uff0c\u7136\u540e\u91cc\u9762\u7684\u4e0b\u6807\u5219 dfs\u3002  \n\u6240\u4ee5\u4e09\u4e2a\u64cd\u4f5c\u7684\u4e3b\u8981\u90e8\u5206\u5c31\u50cf\u8fd9\u6837\uff1a\n```cpp\nvoid yuju(int op,string bl,string zhi)\n//op\u8bb0\u5f55\u662f\u4ec0\u4e48\u64cd\u4f5c\uff0cbl\u8bb0\u5f55\u64cd\u4f5c\u7684\u5bf9\u8c61\uff0c\u5f53\u64cd\u4f5c\u4e3a\u8d4b\u503c\u65f6\u8d4b\u7684\u503c\u4e3azhi\n//op=1\u662f\u58f0\u660e\u53d8\u91cf\uff0cop=2\u662f\u8f93\u51fa\uff0cop=3\u662f\u8d4b\u503c\n{\n\tint k;\n\tif(op==3)//\u5148\u6c42zhi\u7684\u7ed3\u679c\n\t{\n\t\topt=zhi;\n\t\tk=dfs(0);\n\t}\n    //\u8fd9\u91cc\u7528opt\u5b57\u7b26\u4e32\u8bb0\u5f55\u4e0b\u6807\n\tfor(int i=0;i<(int)bl.length();i++)\n\t\tif(bl[i]=='[')//\u627e\u5230\u6700\u5916\u5c42\u7684\u90a3\u4e2a\u53d8\u91cf\n\t\t{\n\t\t\tstring s=bl.substr(0,i);//\u622a\u53d6\n\t\t\topt=bl.substr(i+1);//\u622a\u53d6\u540e\u9762\u7684\u90e8\u5206\uff0c\u5373\u4e0b\u6807\u90e8\u5206\n\t\t\tint n=dfs(0);//\u6c42\u4e0b\u6807\n\t\t\tif(op>1&&n>=mp[s].len)//\u5224\u65ad\u662f\u5426\u8d8a\u754c\n\t\t\t{\n\t\t\t\tprintf(\"-1\\n\");\n\t\t\t\texit(0);\n\t\t\t}\n\t\t\tif(op==1) mp[s]=(node){n,{}};\n\t\t\telse if(op==2) printf(\"%d\\n\",mp[s].num[n]);\n\t\t\telse mp[s].num[n]=k;\n\t\t\tbreak;\n\t\t}\n\treturn ;\n}\n```\n\u81f3\u6b64\uff0c\u7a0b\u5e8f\u5927\u4f53\u5c31\u51fa\u6765\u4e86\u3002\u7136\u540e\u662f\u4e00\u4e9b\u7ec6\u8282\uff1a\u8f93\u5165\u5efa\u8bae\u7528`cin`\uff0c`scanf`\u548c`getchar`\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u56e0\u4e3a\u4f60\u4e0d\u77e5\u9053`EOF`\u5728\u54ea\u91cc\u88ab\u8bfb\u6389\u4e86\uff0c\u7136\u540e\u5c31\u4f1a\u6b7b\u5faa\u73af\uff08\u81f3\u5c11\u6211\u662f\u8fd9\u6837\uff09\u3002\u7136\u540e`getline`\u7684\u8bdd\u4f60\u8fd8\u9700\u8981\u5206\u89e3\u6210\u524d\u540e\u4e24\u6bb5\uff0c\u4f1a\u6bd4\u8f83\u9ebb\u70e6\u3002",
        "postTime": 1598016253,
        "uid": 195331,
        "name": "Mine_King",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2830 \u3010\u5199\u7a0b\u5e8f\u3011"
    }
]
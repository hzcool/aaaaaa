[
    {
        "content": "[\u9898\u76ee P2927 [USACO08DEC]Jigsaw Puzzles S \u62fc\u56fe\u6e38\u620f](https://www.luogu.com.cn/problem/P2927)\n\n\u672c\u9898\u76ee\u7528\u641c\u7d22\u5c31\u53ef\u4ee5\u76f4\u63a5\u8fc7\u3002\u8f93\u5165\u540e\u6309\u5e8f\u53f7\u6392\u5e8f\uff0c\u7528\u5b57\u7b26\u5b58\u5165\u6570\u7ec4\uff0c\u5c06\u5730\u56fe\u521d\u59cb\u5316\u540e\u641c\u7d22\u3002\u5982\u679c\u627e\u5230\u7b54\u6848\u5c31\u8f93\u51fa\uff0c\u8fd4\u56de\u627e\u5230\u7b54\u6848\u3002\u9898\u610f\u770b\u4e0d\u61c2\u5c31\u522b\u770b\u4e86\uff0c\u5176\u5b83\u6ce8\u91ca\u5728\u4ee3\u7801\u91cc\u3002\n```cpp\n#include<bits/stdc++.h>//\u4e07\u80fd\u5934 \nusing namespace std; \nint n,m;//\u5217(R)\u548c\u884c(C) \nstruct u{//\u5b58\u62fc\u56fe\u7684\u7ed3\u6784\u4f53\n\tint a,p[4];//a\u4e3a\u5e8f\u53f7,p\u5b58\u62fc\u56fe\u65b9\u5411:0\u4e3a\u4e0a,1\u4e3a\u53f3,2\u4e3a\u4e0b,3\u4e3a\u5de6\n};\nbool cmp(u a,u b){//\u6bd4\u8f83\u51fd\u6570 \n\treturn a.a<b.a;\n}\nu A[15*15],M[15][15];//\u5730\u56fe \nstring tp;\nbool used[15*15];//\u6807\u8bb0\u662f\u5426\u4f7f\u7528\u8fc7 \nvoid rotate(u &a){//\u65cb\u8f6c\u51fd\u6570 \n\tint t=a.p[3];\n\tfor(int j=3;j>=1;j--){\n\t\ta.p[j]=a.p[j-1];\n\t}\n\ta.p[0]=t;\n}\nbool check(u a,u b){//\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u65cb\u8f6c\n\tint ans1=0,ans2=0;\n\tfor(int i=0;i<4;i++){\n\t\tif(a.p[i]!=-1){\n\t\t\tans1++;\n\t\t}\n\t\tif(a.p[i]==b.p[i]){\n\t\t\tans2++;\n\t\t}\n\t}\n\treturn ans1==ans2;\n}\nbool dfs(int x,int y){//x\u884cy\u5217 \n\tif(x>n){//\u6ee1\u8db3\u6761\u4ef6\u5c31\u8f93\u51fa \n\t\tfor(int i=1;i<=n;i++){\n\t\t\tfor(int j=1;j<=m;j++){\n\t\t\t\tprintf(\"%d \",M[i][j].a);//\u5e8f\u53f7 \n\t\t\t\tfor(int k=0;k<4;k++){\n\t\t\t\t\tprintf(\"%c \",M[i][j].p[k]);//\u5c06ASCII\u7801\u8f6c\u4e3a\u5b57\u6bcd\u8f93\u51fa \n\t\t\t\t}\n\t\t\t\tprintf(\"\\n\");//\u8fd9\u91cc\u8981\u6362\u884c \n\t\t\t}\n\t\t}\n\t\treturn 1;//\u8868\u793a\u627e\u5230\uff0c\u9000\u51fa\u641c\u7d22 \n\t}\n\tbool ans=0;//\u662f\u5426\u627e\u5230\u7b54\u6848 \n\tfor(int i=1;i<=n*m;i++){\n\t\tif(!used[i]){//\u5982\u679c\u6ca1\u6709\u7528\u8fc7 \n\t\t\tfor(int j=1;j<=4&&!ans;j++){\n\t\t\t\tif(check(M[x][y],A[i])){\n\t\t\t\t\tu yuan=M[x][y];//\u8bb0\u5f55\u539f\u59cb\u72b6\u6001 \n\t\t\t\t\tM[x][y]=A[i];\n\t\t\t\t\tused[i]=1;//\u6807\u8bb0\u4e3a\u4f7f\u7528\u8fc7 \n\t\t\t\t\tif(x<n)M[x+1][y].p[0]=A[i].p[2];\n\t\t\t\t\tif(y<m)M[x][y+1].p[3]=A[i].p[1];\n\t\t\t\t\tif(y<m)ans=dfs(x,y+1);//\u9012\u5f52\uff0c\u53bb\u4e0b\u9762\u627e\u7b54\u6848 \n\t\t\t\t\telse ans=dfs(x+1,1); \n\t\t\t\t\tif(x<n)M[x+1][y].p[0]=-1;\n\t\t\t\t\tif(y<m)M[x][y+1].p[3]=-1;\n\t\t\t\t\tM[x][y]=yuan;//\u8fd8\u539f \n\t\t\t\t\tused[i]=0;//\u6807\u8bb0\u4e3a\u672a\u4f7f\u7528 \n\t\t\t\t}\n\t\t\t\trotate(A[i]);//\u65cb\u8f6c \n\t\t\t}\n\t\t}\n\t}\n\treturn ans;//\u8fd4\u56de\u662f\u5426\u627e\u5230 \n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n*m;i++){\n\t\tcin>>A[i].a;//\u8f93\u5165\u5e8f\u53f7 \n\t\tfor(int j=0;j<4;j++){\n\t\t\tcin>>tp;\n\t\t\tA[i].p[j]=tp[0];//\u5b58\u8d2e\u65b9\u5411 \n\t\t}\n\t}\n\tsort(A+1,A+n*m,cmp);\n\tfor(int i=1;i<=n;i++){//\u5730\u56fe\u521d\u59cb\u5316 \n\t\tfor(int j=1;j<=m;j++){\n\t\t\tM[i][j].a=-1; \n\t\t\tfor(int k=0;k<4;k++){\n\t\t\t\tM[i][j].p[k]=-1;\n\t\t\t}\n\t\t\tif(i==1)M[i][j].p[0]='0';//\u8868\u793a\u53ef\u4ee5\u8f6c \n\t\t\tif(i==n)M[i][j].p[2]='0';//\u7528'0'\u4e3a\u4e86\u8f6c\u5b57\u7b26\u65b9\u4fbf \n\t\t\tif(j==1)M[i][j].p[3]='0';//\u4e0d\u7136\u4f1a\u8f93\u51fa\u7a7a\u683c \n\t\t\tif(j==m)M[i][j].p[1]='0';\n\t\t}\n\t}\n\tdfs(1,1);//\u641c\u7d22 \n\treturn 0;\n}\n```\n[\u63d0\u4ea4\u8bb0\u5f55(AC)](https://www.luogu.com.cn/record/54443681)",
        "postTime": 1645189205,
        "uid": 450188,
        "name": "shiwei06232",
        "ccfLevel": 5,
        "title": "P2927"
    },
    {
        "content": "[\u9898\u76ee](https://www.luogu.com.cn/problem/P2927)\n\n\u6b64\u9898\u53ef\u4ee5\u76f4\u63a5\u7528\u66b4\u529b\u641c\u7d22\u8fc7\uff0c\u4f46\u6ce8\u610f\u4ee3\u7801\u91cc\u6709\u8bb8\u591a\u7ec6\u8282\uff0c\u8981\u6ce8\u610f\uff0c\u4ee3\u7801\u8fd8\u662f\u6bd4\u8f83\u957f\u7684\uff0c\u8981\u6ce8\u610f\u7ec6\u8282\u3002\n\n\u6211\u4eec\u53ea\u8981\u5148\u5c06\u8f93\u5165\u7684\u6570\u636e\u6309\u5b57\u6bcd\u8868\u987a\u5e8f\u6392\u5e8f\u4e00\u904d\uff0c\u7136\u540e\u518d\u8dd1\u4e00\u904ddfs\u5373\u53ef\uff0c\u5177\u4f53\u7684\u8bf4\u660e\u90fd\u5728\u4ee3\u7801\u91cc\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>//\u4e07\u80fd\u5934 \n#define MAXN 100 + 10 //\u6570\u7ec4\u7684\u6700\u5927\u8303\u56f4 \nusing namespace std;//\u6807\u51c6\u547d\u540d\u7a7a\u95f4 \nint n,m,ans,visit[MAXN],id[MAXN][MAXN],v[MAXN][MAXN],sum[MAXN][MAXN],f[MAXN][MAXN];\nint fx[5]={0,-1,0,1,0},fy[5]={0,0,1,0,-1},which[5]={0,3,4,1,2};//\u7528\u4e8edfs\u7684\u65b9\u5411\u6570\u7ec4 \nchar s[10];//\u7528\u4e8e\u8f93\u5165 \nstruct node {\n\tint x;\n\tchar c[5][5];\n}a[MAXN];//\u7528\u4e8e\u50a8\u5b58 \nbool cmp(node x,node y) {//\u6bd4\u8f83\u51fd\u6570 \n\treturn x.x<y.x;\n}\ninline int read() {//\u5feb\u8bfb \n\tint r=0;bool flag=true;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-') flag=false;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){r=(r<<3)+(r<<1)+(ch^48);ch=getchar();}\n\treturn flag==true?r:~r+1;\n}\nvoid dfs(int x,int y) {//\u66b4\u529b\u641c\u7d22 \n\tif(ans) return;//\u8fb9\u754c\u6761\u4ef6 \n\tif(x==n+1&&y==1) {//\u8fb9\u754c\u6761\u4ef62 \n\t\tif(ans==0) {//\u8fb9\u754c\u6761\u4ef63\n\t\t\tfor(int i=1;i<=n;i++)\n\t\t\t\tfor(int j=1;j<=m;j++)\n\t\t\t\t\tsum[i][j]=id[i][j],f[i][j]=v[i][j];\n\t\t\tans=1;//\u4f7f\u5176\u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u9000\u51fa\u5faa\u73af \n\t\t}\n\t\treturn;\n\t}\n\tint xx,yy,nx,ny;\n\tif(y+1<=m) nx=x,ny=y+1;//\u521d\u59cb\u5316\n\telse nx=x+1,ny=1;//\u521d\u59cb\u5316\n\tbool bk;\n\tfor(int i=1;i<=n*m;i++) {\n\t\tif(visit[i]) continue;//\u8bbf\u95ee\u8fc7\u4e86\uff0c\u8fdb\u5165\u4e0b\u4e00\u6b21\u5faa\u73af \n\t\tfor(int j=1;j<=4;j++) {\n\t\t\tbk=1;//\u521d\u59cb\u5316 \n\t\t\tfor(int k=1;k<=4;k++) {\n\t\t\t\txx=x+fx[k];//\u4e0b\u4e00\u8f6e\u641c\u7d22\u7684\u4e0b\u6807 \n\t\t\t\tyy=y+fy[k];//\u4e0b\u4e00\u8f6e\u641c\u7d22\u7684\u4e0b\u6807 \n\t\t\t\tif(xx>=1&&yy>=1&&xx<=n&&yy<=m) {//\u5224\u65ad\u662f\u5426\u8d8a\u754c \n\t\t\t\t\tint o=id[xx][yy],q=v[xx][yy];//\u4e0b\u4e00\u8f6e\u641c\u7d22\u7684\u503c \n\t\t\t\t\tif(o&&q&&a[i].c[j][k]!=a[o].c[q]//\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u62fc\u5728\u4e00\u8d77[which[k]]) {\n\t\t\t\t\t\tbk=0;break;//\u9000\u51fa\u5faa\u73af \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(a[i].c[j][k]!='0') {//\u5426\u5219\u5c31\u76f4\u63a5\u8fd4\u56de \n\t\t\t\t\tbk=0;break;//\u9000\u51fa\u5faa\u73af \n\t\t\t\t}\n\t\t\t}\n\t\t\tif(bk) {//\u7b26\u5408\u6761\u4ef6\uff0c\u7ee7\u7eed\u641c\u7d22 \n\t\t\t\tid[x][y]=i;v[x][y]=j;visit[i]=1;//\u6807\u8bb0\u8bbf\u95ee \n\t\t\t\tdfs(nx,ny);//\u7ee7\u7eed\u641c\u7d22 \n\t\t\t\tid[x][y]=0;v[x][y]=0;visit[i]=0;//\u56de\u6eaf \n\t\t\t}\n\t\t}\n\t}\t\n}\n\nint main(void) {\n\tn=read();m=read();//\u8f93\u5165 \n\tfor(int i=1;i<=n*m;i++) {\n\t\ta[i].x=read();//\u8f93\u5165 \n\t\tfor(int j=1;j<=4;j++) {\n\t\t\tscanf(\"%s\",s);//\u8f93\u5165 \n\t\t\ta[i].c[1][j]=s[0];//\u8d4b\u503c \n\t\t}\n\t\tfor(int j=2;j<=4;j++)\n\t\t\tfor(int k=1;k<=4;k++) \n\t\t\t\ta[i].c[j][k]=a[i].c[j-1][(k-1==0)?4:k-1];//\u50a8\u5b58 \n\t}\n\tsort(a+1,a+1+n*m,cmp);//\u6392\u5e8f \n\tmemset(v,0,sizeof(v));//\u521d\u59cb\u5316 \n\tmemset(id,0,sizeof(id));//\u521d\u59cb\u5316 \n\tmemset(visit,0,sizeof(visit));//\u521d\u59cb\u5316 \n\tans=0;//\u521d\u59cb\u5316 \n\tdfs(1,1);//\u5f00\u59cb\u641c\u7d22 \n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++) {\n\t\t\tprintf(\"%d \",a[sum[i][j]].x);//\u8f93\u51fa\u7b54\u6848 \n\t\t\tfor(int k=1;k<=4;k++) {\n\t\t\t\tprintf(\"%c \",a[sum[i][j]].c[f[i][j]][k]);//\u8f93\u51fa\u7b54\u6848 \n\t\t\t}\n\t\t\tprintf(\"\\n\");//\u8f93\u51fa\u7b54\u6848 \n\t\t}\n\treturn 0;\n}\n```\n\n\u7ba1\u7406\u5458\u6c42\u8fc7\uff0cQWQ\u3002",
        "postTime": 1583976267,
        "uid": 320832,
        "name": "do_while_false",
        "ccfLevel": 4,
        "title": "\u3010\u9898\u89e3\u3011P2927"
    },
    {
        "content": "\u8fd9\u4e00\u9053\u9898\u5c0f\u7f16\u672c\u4eba\u4e3a\u4e86\u627e\u51fa\u4e00\u4e2a\u8f83\u4f18\u7684\u65b9\u6848\u82b1\u4e86\u5341\u5206\u949f\uff0c\u6700\u540e\u53d1\u73b0\u76f4\u63a5\u7206\u641c\u5c31\u53ef\u4ee5\u8fc7\u4e86\u3002\u4ee3\u7801\u91cf\u7a0d\u7a0d\u6709\u4e9b\u5927\uff0c\u4f46\u601d\u8def\u8fd8\u662f\u6bd4\u8f83\u6e05\u6670\u7684\u3002\n\n\u9644\u4e0a\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node {\n\tint num,ax[5];\n} t[102];\nint r,c;\nchar s[0];\nint w[15][15],b[15][15];\nbool vis[102];\nbool cmp(node x,node y) {\n\treturn x.num<y.num;\n}\nvoid print(){\t\t\t//\u8f93\u51fa\u7b54\u6848 \n\tfor(int i=1; i<=r; i++)\n\t\tfor(int j=1; j<=c; j++) {\n\t\t\tprintf(\"%d \",t[b[i][j]].num);\n\t\t\tfor(int k=0; k<4; k++) {\n\t\t\t\tint x=t[b[i][j]].ax[(k+w[i][j])%4];\n\t\t\t\tif(x==0) printf(\"0 \");\n\t\t\t\telse printf(\"%c \",x+'a'-1);\n\t\t\t}\n\t\t\tprintf(\"\\n\");\n\t\t}\n}\nbool sigh=0;\nvoid dfs(int x,int y) {\n\tif(x==r+1) {\n\t\tprint();\n\t\tsigh=1;\n\t\treturn;\n\t}\n\tif(y==c+1) {\n\t\tdfs(x+1,1);\n\t\treturn;\n\t}\n\tfor(int i=1; i<=r*c; i++){ \n\t\tif(!vis[i]) {\n\t\t\tfor(int k=0; k<4; k++){ \n\t\t\t\tif(t[i].ax[k]==t[b[x-1][y]].ax[(w[x-1][y]+2)%4] && t[i].ax[(k+3)%4]==t[b[x][y-1]].ax[(w[x][y-1]+1)%4]) {\n\t\t\t\t\tif(y==c&&t[i].ax[(k+1)%4]!=0) continue;\n\t\t\t\t\tif(y!=c&&t[i].ax[(k+1)%4]==0) continue;\n\t\t\t\t\tif(x!=r&&t[i].ax[(k+2)%4]==0) continue;\n\t\t\t\t\tif(x==r&&t[i].ax[(k+2)%4]!=0) continue;\t\t//\u5224\u65ad\u662f\u5426\u53ef\u4ee5\u62fc\u5728\u4e00\u8d77 \n\t\t\t\t\tw[x][y]=k;\n\t\t\t\t\tb[x][y]=i;\n\t\t\t\t\tvis[i]=1;\n\t\t\t\t\tdfs(x,y+1);\n\t\t\t\t\tvis[i]=0;\t\t//\u56de\u6eaf\n\t\t\t\t\tif(sigh==1) return;\n\t\t\t\t}\n\t\t\t} \n\t\t}\n\t} \n}\n\nint main() {\n\tscanf(\"%d%d\",&r,&c);\n\tfor(int i=1; i<=r*c; i++) {\n\t\tscanf(\"%d\",&t[i].num);\n\t\tfor(int k=0; k<4; k++) {\n\t\t\tscanf(\"%s\",s);\n\t\t\tif(s[0]=='0') t[i].ax[k]=0;\n\t\t\telse t[i].ax[k]=s[0]-'a'+1;\t\t//\u8f6c\u5316\n\t\t}\n\t}\n\tmemset(vis,0,sizeof(vis));\n\tmemset(b,0,sizeof(b));\n\tmemset(w,0,sizeof(w));\t\t//\u521d\u59cb\u5316 \n\tfor(int i=0; i<4; i++) t[0].ax[i]=0;\n\tsort(t+1,t+1+r*c,cmp);\t\t//\u6392\u5e8f\n\tdfs(1,1);\n\treturn 0;\n}\n```\n",
        "postTime": 1573288120,
        "uid": 117126,
        "name": "swkyccbb",
        "ccfLevel": 0,
        "title": "\u62fc\u56fe\u6e38\u620fJigsaw Puzzles"
    }
]
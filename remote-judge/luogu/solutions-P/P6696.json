[
    {
        "content": "## Solution\n\n\u56fe\u8bba ( ? ) \n\n\u8003\u8651\u4e00\u4e2a\u8054\u901a\u5757\u91cc , \u5982\u679c\u786e\u5b9a\u4e00\u4e2a\u6570 , \u90a3\u53ef\u4ee5\u63a8\u5bfc\u51fa\u5176\u4ed6\u6240\u6709\u7684\u6570 .\n\n\u7c7b\u4f3c\u67d3\u8272 , \u8fd9\u4e00\u4e2a\u5757\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6570\u8bbe\u4e3a $x$ , \u5176\u4ed6\u6570\u63a8\u5bfc\u51fa $\\pm x+k_i$ . \n\n\u5f53\u7136\u6211\u4eec\u4f1a\u8bbf\u95ee\u5230\u4e00\u4e2a\u5df2\u7ecf\u786e\u5b9a\u8fc7\u7684\u70b9 , \u8bbe\u4e3a $k_1 x + b_1$ , \u800c\u73b0\u5728\u5e94\u8be5\u662f $k_2 x + b_2$ . \u5206\u7c7b\u8ba8\u8bba .\n\n- $k_1 = k_2$ \u4e14 $b_1 = b_2$ . \u6ca1\u6709\u7528\u662f\u4e0d\u662f . \u76f4\u63a5 return .\n- $k_1 = k_2$ \u4e14 $b_1 \\neq b_2$ . \u663e\u7136\u65e0\u89e3 . \u8f93\u51fa `NO` .\n- $k_1 \\neq k_2$ . \u53ef\u4ee5\u89e3\u51fa $x = -\\frac{b_1 - b_2}{k_1-k_2}$ .\n\n\u4f46\u6211\u4eec\u6709\u53ef\u80fd\u89e3\u4e0d\u51fa\u6765 $x$ . \u7136\u540e\u5316\u7b80\u5c31\u53ef\u4ee5\u53d1\u73b0\u8981\u6c42 $\\sum |x-c_i|$ \u7684\u6700\u5c0f\u503c . \u5c0f\u5b66\u5965\u6570\u9898 , $x$ \u4e3a $\\{c\\}$ \u7684\u4e2d\u4f4d\u6570 .\n\n\u6ce8\u610f , \u6211\u4eec\u89e3\u51fa\u7684 $x$ \u53ef\u80fd\u4e0d\u662f\u5408\u6cd5\u89e3 . \u56de\u5e26\u7684\u8fc7\u7a0b\u4e2d\u770b\u4e00\u4e0b\u6709\u6ca1\u6709\u77db\u76fe .\n\ncode :\n\n```cpp\n#include<bits/stdc++.h>\n#define ffor(i,a,b) for(int i=(a);i<=(b);i++)\n#define roff(i,a,b) for(int i=(a);i>=(b);i--)\nusing namespace std;\nconst int MAXN=1e5+20;\nint n,m,flg,vis[MAXN],Vis[MAXN],k[MAXN],b[MAXN];\nlong double x,val[MAXN];\nvector<pair<int,int>> G[MAXN];\nvector<int> tmp;\nvoid calc(int u,int K,int B) { //u:val=Kx+B\n\tif(vis[u]) {\n\t\tif(K==k[u]&&B!=b[u]) {cout<<\"NO\";exit(0);}\n\t\tif(K==k[u]&&B==b[u]) return ;\n\t\tflg=1,x=(b[u]-B)*1.0/(K-k[u]);\n\t\treturn ;\n\t}\n\tvis[u]=1,k[u]=K,b[u]=B,tmp.push_back(-b[u]*k[u]);\n\tfor(auto t:G[u]) {\n\t\tint to=t.first,w=t.second;\n\t\tcalc(to,-K,w-B);\n\t}\n\treturn ;\n}\nvoid fill(int u,long double x) {\n\tif(Vis[u]&&abs(x-val[u])>1e-7) {cout<<\"NO\";exit(0);}\n\tif(Vis[u]) return;\n\tval[u]=x,Vis[u]=1;\n\tfor(auto t:G[u]) {\n\t\tint to=t.first,w=t.second;\n\t\tfill(to,w-x);\n\t}\n\treturn ;\n} \nint main() {\n\tios::sync_with_stdio(false),cin.tie(0),cout.tie(0);\n\tcin>>n>>m;\n\tffor(i,1,m) {\n\t\tint a,b,c;cin>>a>>b>>c;\n\t\tG[a].push_back({b,c}),G[b].push_back({a,c});\n\t} \n\tffor(i,1,n) if(vis[i]==0) {\n\t\tflg=0,k[i]=1,b[i]=0,tmp.clear();\n\t\tcalc(i,1,0);\n\t\tif(!flg) {\n\t\t\tsort(tmp.begin(),tmp.end());\n\t\t\tx=tmp[tmp.size()/2];\n\t\t}\n\t\tfill(i,x);\n\t}\n\tcout<<\"YES\\n\";\n\tffor(i,1,n) cout<<fixed<<setprecision(15)<<val[i]<<' ';\n\treturn 0;\n}\n```\n\nPKUSC RP++ ! ( \u57ab\u5e95\u53bb\u55bd )",
        "postTime": 1653058398,
        "uid": 120947,
        "name": "Purslane",
        "ccfLevel": 7,
        "title": "P6696"
    },
    {
        "content": "\u5047\u5b9a\u539f\u56fe\u662f\u4e2a\u8fde\u901a\u56fe\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u5bf9\u6bcf\u4e2a\u8fde\u901a\u5757\u5206\u522b\u5904\u7406\u5373\u53ef\u3002\n\n\u5982\u679c\u6709\u4e00\u4e2a\u70b9\u7684\u6743\u503c\u88ab\u786e\u5b9a\u4e86\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u70b9\u7684\u6743\u503c\u53ef\u4ee5\u63a8\u51fa\u5176\u4ed6\u6240\u6709\u70b9\u7684\u6743\u503c\u3002\n\n\u6362\u8a00\u4e4b\uff0c\u8bbe\u5176\u4e2d\u4e00\u4e2a\u70b9\u7684\u6743\u503c\u4e3a $x$\uff0c\u5176\u4ed6\u6240\u6709\u70b9\u90fd\u53ef\u4ee5\u8868\u793a\u6210\u4ee5 $x$ \u4e3a\u81ea\u53d8\u91cf\u7684\u4e00\u4e2a\u4e00\u6b21\u51fd\u6570\uff0c\u5e76\u4e14\u4e00\u6b21\u9879\u7684\u7cfb\u6570\u4e3a $\\pm1$\u3002\n\n\u5982\u679c\u539f\u56fe\u5b58\u5728\u5947\u73af\uff0c\u90a3\u4e48\u5fc5\u5b9a\u4f1a\u5b58\u5728\u4e00\u6761\u8fb9\u4f7f\u5f97\u8be5\u8fb9\u7684\u4e24\u4e2a\u7aef\u70b9\u7684\u4e00\u6b21\u51fd\u6570\u76f8\u52a0\u4e4b\u540e\u4e00\u6b21\u9879\u7cfb\u6570\u4e0d\u4e3a $0$\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa $x$ \u7684\u503c\uff0c\u5e76\u4ee5\u6b64\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u70b9\u7684\u6743\u503c\u3002\n\n\u5982\u679c\u4e0d\u5b58\u5728\u5947\u73af\uff0c\u90a3\u4e48\u6240\u6709 $x$ \u7684\u53d6\u503c\u90fd\u662f\u5408\u6cd5\u7684\uff0c\u95ee\u9898\u8f6c\u5316\u6210\u9700\u8981\u627e\u4e00\u4e2a $x$ \u4f7f\u5f97\u8fd9\u4e9b\u4e00\u6b21\u51fd\u6570\u7684\u7edd\u5bf9\u503c $\\sum |x-c_i|$ \u6700\u5c0f\uff0c~~\uff08\u4fdd\u5e8f\u56de\u5f52\uff09~~ \u627e\u5230 $c$ \u7684\u4e2d\u4f4d\u6570\u5373\u53ef\u3002\n\n\u6839\u636e\u627e\u4e2d\u4f4d\u6570\u7684\u65b9\u6cd5\u4e0d\u540c\u53ef\u4ee5\u5728 $O(n+m)$ \u6216 $O(nlogn+m)$ \u7684\u65f6\u95f4\u5185\u89e3\u51b3\u672c\u9898\u3002\n\n\u8fd9\u91cc\u7ed9\u51fa\u7684\u662f $O(nlogn+m)$ \u7684\u5b9e\u73b0\u3002\n\n~~\u628a sort \u6362\u6210 nth_element \u53ef\u4ee5\u53bb\u6389 log\uff0c\u4f46\u6211\u61d2\u5f97\u6539\u4e86\uff09~~\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ld double\n#define I inline int\n#define V inline void\n#define FOR(i,a,b) for(int i=a;i<=b;i++)\n#define ROF(i,a,b) for(int i=a;i>=b;i--)\n#define REP(u) for(int i=h[u],v;v=e[i].t,i;i=e[i].n)\nconst int N=2e5+1;\nld now,ans[N];\nint n,m,tot,flag;\nint h[N],tmp[N],dfn[N];\nstruct edge{int t,n,w;}e[N<<1];\nstruct node{\n\tint x,v;\n\tld val(){return now*x+v;}\n\tnode operator+(const node&u)const{return(node){x+u.x,v+u.v};}\n\tnode operator-(const node&u)const{return(node){x-u.x,v-u.v};}\n}f[N],val[3];\nV test(int x){if(!x)printf(\"NO\\n\"),exit(0);}\nV add_edge(int x,int y,int w){\n\te[++tot]=(edge){y,h[x],w},h[x]=tot;\n\te[++tot]=(edge){x,h[y],w},h[y]=tot;\n}\nV input(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int x,y,w;m--;add_edge(x,y,w))scanf(\"%d%d%d\",&x,&y,&w);\n}\nV init(){FOR(i,1,2)val[i].v=i;}\nV dfs1(int u){\n\tdfn[u]=1;\n\tREP(u)\n\t\tif(dfn[v]==0)f[v]=val[e[i].w]-f[u],dfs1(v);\n\t\telse if(f[u].x+f[v].x==0)test(f[u].v+f[v].v==e[i].w);\n\t\telse{\n\t\t\tld x=1.*(e[i].w-f[u].v-f[v].v)/(f[u].x+f[v].x);\n\t\t\tif(flag)test(abs(x-now)<=1e-6);\n\t\t\telse now=x,flag=1;\n\t\t}\n\ttmp[++tot]=-f[u].x*f[u].v;\n}\nV dfs2(int u){\n\tdfn[u]=2,ans[u]=f[u].val();\n\tREP(u)if(dfn[v]==1)dfs2(v);\n}\nV work(){\n\tFOR(i,1,n)if(!dfn[i]){\n\t\tflag=tot=0,dfn[i]=1,f[i].x=1,dfs1(i);\n\t\tif(!flag)sort(tmp+1,tmp+1+tot),now=tmp[tot+1>>1];\n\t\tdfs2(i);\n\t}\n\tprintf(\"YES\\n\");\n\tFOR(i,1,n)printf(\"%.2lf \",ans[i]);\n}\nint main(){\n\tinput();\n\tinit();\n\twork();\n\treturn 0;\n}\n```",
        "postTime": 1598770670,
        "uid": 109236,
        "name": "Fuyuki",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P6696 \u3010[BalticOI 2020 Day2] \u56fe\u3011"
    }
]
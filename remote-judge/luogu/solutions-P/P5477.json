[
    {
        "content": "\u9996\u5148\uff0c\u8fd9\u662f\u4e00\u9053\u56fe\u8bba\u9898\uff0c$n=10000$\u5c31\u662f\u66b4\u529bdfs\u6c42\u89e3\u3002\u4f46\u662f\u6709\u4e00\u4e2a\u73af\u7684\u9650\u5236\uff0c\u56e0\u6b64\u5148\u7528tarjan\u628a\u73af\u7684\u4f5c\u4e1a\u53bb\u9664\uff0c\u518ddfs\u5c31\u53ef\u4ee5\u4e86\n\n```cpp\n#include<cstdio>\n#include<iostream>\nusing namespace std;\ntypedef long long ll;\nconst ll M=10005;\nll v[M],c[M],t[M];\nstruct node{\n\tll to,next;\n}edge[M*11];\nll head[M],cnt;\nbool vis[M],can[M];\nll dfn[M],low[M],sta[M],in[M],color[M];\nll top,sum,tot,ans;\ninline void add(ll x,ll y){edge[++cnt]=(node){y,head[x]},head[x]=cnt;}\ninline ll read()\n{\n    ll x=0,f=1; char ch=0;\n    while(!isdigit(ch)) f=(ch=='-'?-1:1),ch=getchar();\n    while(isdigit(ch)) x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n    return x*f;\n}\nvoid tarjan(ll x)\n{\n\tdfn[x]=low[x]=++tot;\n\tsta[++top]=x; vis[x]=true;\n\tfor(register ll i=head[x];i;i=edge[i].next)\n\t{\n\t\tll u=edge[i].to;\n\t\tif(!dfn[u]){\n\t\t\ttarjan(u);\n\t\t\tlow[x]=min(low[x],low[u]);\n\t\t}\n\t\telse if(vis[u]){\n\t\t\tlow[x]=min(low[x],dfn[u]);\n\t\t}\n\t}\n\tif(dfn[x]==low[x]){\n\t\tll jsq=1;\n\t\tcolor[x]=++sum; vis[x]=false;\n\t\twhile(sta[top]!=x){\n\t\t\tjsq++;\n\t\t\tcolor[sta[top]]=sum;\n\t\t\tvis[sta[top--]]=false;\n\t\t}\n\t\tif(jsq>1) can[sum]=true;\n\t\ttop--;\n\t}\n}\nvoid dfs(ll x,ll s,ll la)\n{\n\tans=max(ans,s);\n\tfor(register ll i=head[x];i;i=edge[i].next)\n\t{\n\t\tll u=edge[i].to;\n\t\tif(can[color[u]]) continue;\n\t\tif(la>=c[u]*t[u]) dfs(u,s+c[u]*v[u],la-c[u]*t[u]);\n\t\telse ans=max(ans,s+(la/t[u])*v[u]);\n\t}\n}\nint main()\n{\n\tll n=read(),T=read();\n\tfor(register ll i=1;i<=n;i++){\n\t\tv[i]=read(); c[i]=read(); t[i]=read();\n\t}\n\tll m=read();\n\tfor(register ll i=1;i<=m;i++){\n\t\tll x=read(),y=read();\n\t\tadd(x,y); in[y]++;\n\t}\n\tfor(register ll i=1;i<=n;i++){\n\t\tif(!dfn[i]) tarjan(i);\n\t}\n\tfor(register ll i=1;i<=n;i++){\n\t\tif(in[i]||can[color[i]]) continue;\n\t\tif(T>=c[i]*t[i]) dfs(i,c[i]*v[i],T-c[i]*t[i]);\n\t\telse ans=max(ans,(T/t[i])*v[i]);\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n**\u90a3\u4e2a\u522b\u5fd8\u4e86\u5438\u6c27\u54e6QAQ\uff0c\u8bb2\u7684\u592a\u5dee\u8bf7\u89c1\u8c05**",
        "postTime": 1535340722,
        "uid": 56432,
        "name": "Doubleen",
        "ccfLevel": 5,
        "title": "\u5237\u9898\uff1f\u4f5c\u4e1a\u72c2\u9b54\uff01"
    }
]
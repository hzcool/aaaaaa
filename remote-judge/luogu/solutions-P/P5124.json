[
    {
        "content": "\u4e00\u9053\u4e2d\u7b49\u96be\u5ea6\u7684 $DP$\u3002\n\n\u8fd9\u9053\u9898\u6211\u4e00\u5f00\u59cb\u505a\u7684\u65f6\u5019\u6ca1\u6709\u770b\u5230\u201c\u8fde\u7eed\u7684\u5976\u725b\u201d\uff0c\u5bfc\u81f4\u505a\u6210\u4e86\u8d2a\u5fc3\uff0c\u56e0\u4e3a\u662f\u9519\u8bef\u7b54\u6848\uff0c\u6240\u4ee5\u5c31\u4e0d\u7c98\u8fc7\u6765\u4e86\uff0c\u76f4\u63a5\u653e\u4e2a\u94fe\u63a5\u5728\u8fd9\u5f00\u59cb\u8bf4\u8bf4\u6b63\u786e\u505a\u6cd5\u3002\n\n[\u9519\u8bef\u505a\u6cd5\uff08\u4e8c\u5206\u6cd5\u8d2a\u5fc3\uff09](https://www.luogu.com.cn/paste/r7qbe3zs)\n\n\u597d\u4e86\uff0c\u4ee5\u4e0b\u662f\u8fd9\u9053\u9898\u7684 $DP$ \u6b63\u786e\u601d\u8def\uff1a\n\n\u65e2\u7136\u662f\u7ed9\u4ed6\u4eec\u5206\u7ec4\uff0c\u800c\u4e14\u662f\u627e\u6700\u5927\u503c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u679a\u4e3e\u53ef\u80fd\u51fa\u73b0\u6700\u5927\u503c\u7684\u6240\u6709\u53ef\u80fd\uff08\u6ce8\u610f\u662f\u53ef\u80fd\u51fa\u73b0\u6700\u5927\u503c\u7684\u6240\u6709\u53ef\u80fd\uff0c\u800c\u4e0d\u662f\u6240\u6709\u53ef\u80fd\uff0c\u5426\u5219\u4f1a\u4e25\u91cd\u8d85\u65f6\uff09\uff0c\u5e76\u4e14\u968f\u65f6\u5b58\u50a8\u66f4\u65b0\u6700\u5927\u503c\uff0c\u5982\u679c\u5acc\u6162\u53ef\u4ee5\u52a0\u4e2a\u5feb\u8bfb\uff08\u4e00\u4e2a\u503c\u5feb\u5199\u5c31\u7b97\u4e86\u5427\uff0c\u5f53\u7136\u5982\u679c\u559c\u6b22\u7684\u8bdd\u4e5f\u6ca1\u4eba\u62e6\u7740\uff09\u3002\n\n\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5728\u6bcf\u4e00\u6b21\u627e\u5b8c\u672c\u6b21\u7684\u6700\u5927\u503c\u4e4b\u540e\uff0c\u90fd\u8981\u521d\u59cb\u5316\u4e00\u4e0b\u81ea\u5df1\u5b9a\u4e49\u7684\u67e5\u627e\u6700\u5927\u503c\u7684\u53d8\u91cf\uff08\u5426\u5219\u672c\u4eba\u8f93\u51fa\u503c\u611f\u89c9\u5f00 $long$ $long$ \u90fd\u4e0d\u591f\u7528\uff09\u3002\n\n\u8fd9\u9053\u9898\u7684\u7cbe\u9ad3\u5728\u4e8e\uff0c\u5b9e\u65f6\u66f4\u65b0\u6700\u5927\u503c\uff0c\u5e76\u4e14\u7528\u6b64\u6700\u5927\u503c\u53bb\u9012\u63a8\u9898\u76ee\u8981\u7684\u6700\u5927\u503c\uff0c\u6709\u4e00\u70b9\u627e\u52a0\u6743\u8def\u5f84\u7684\u8def\u5f84\u6700\u5927\u503c\u9898\u7684\u611f\u89c9\u3002\n\n\u4e0b\u9762\u653e\u4e0a\u6807\u7a0b\uff08\u5df2 $AC$ \u8bf7\u653e\u5fc3\u98df\u7528\uff09\uff1a\n\n```cpp\n\n#include <iostream>\n#include <cstdio>\nusing namespace std;\n\nint a[1001000] , ans[1001000];//\u6570\u7ec4\u4e00\u5b9a\u8981\u5f00\u5f97\u8db3\u591f\u5927 \n\ninline int read(){//\u5feb\u8bfb\u4e0d\u89e3\u91ca \n\tint x = 0 , f = 1;\n\tchar ch = getchar();\n\twhile( ch < '0' || ch > '9' ){\n\t\tif( ch == '-' ) f = -1;\n\t\tch = getchar();\n\t}\n\twhile( ch >= '0' && ch <= '9' ){\n\t\t x = ( x << 1 ) + ( x << 3 ) + ( ch ^ 48 );\n\t\t ch = getchar();\n\t}\n\treturn x * f;\n}\n\nint main(int argc , char *argv[])\n{\n\tint n , k;\n\tcin >> n >> k;\n\tfor(int i = 1;i <= n;i ++) a[i] = read();//\u6309\u9898\u76ee\u8981\u6c42\u8f93\u5165 \n\tfor(int i = 1;i <= n;i ++){\n\t\tint maxn = 0;//\u5b9a\u4e49\u4e00\u4e2a\u8bb0\u5f55\u6700\u5927\u503c\u7684\u53d8\u91cf\uff0c\u672c\u6b21\u5faa\u73af\u7684\u6700\u5927\u503c\uff0c\u5343\u4e07\u4e0d\u8981\u5fd8\u8bb0\u521d\u59cb\u5316\uff0c \n\t\tfor(int j = i;j < min(i+k,n+1);j ++){//\u52a8\u6001\u89c4\u5212\u5bfb\u627e\u6700\u4f18\u89e3 \n\t\t\tmaxn = max( maxn , a[j] );\n\t\t\tans[j] = max( ans[j] , ans[i-1] + maxn * (j-i+1) );\n\t\t}\n\t}\n\tcout << ans[n] << endl;//\u56e0\u4e3a\u662f\u76f4\u63a5\u9012\u63a8\u7684\uff0c\u6240\u4ee5ans\u6570\u7ec4\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u5373\u4e3a\u7b54\u6848 \n\treturn 0;\n}\n\n```\n\n\u7ba1\u7406\u5927\u5927\u8f9b\u82e6\u4e86\u3002",
        "postTime": 1613648480,
        "uid": 402211,
        "name": "\u6b22\u9ece\u660e\u964c",
        "ccfLevel": 4,
        "title": "P5124 Teamwork G \u9898\u89e3"
    },
    {
        "content": "\u7b80\u5355\u7684\u52a8\u5f52\u3002dp[i]\u4ee3\u8868\u5bf9\u524di\u53ea\u5976\u725b\u5206\u7ec4\u5f97\u5230\u7684\u6700\u5927\u7684\u6280\u80fd\u6c34\u5e73\uff0c\u5bf9\u6bcf\u4e2ai\uff0c\u679a\u4e3ej\uff0c\u5c06\u63a5\u4e0b\u6765j\u7ec4\u5976\u725b\u7f16\u4e3a\u4e00\u7ec4\uff0c\u66f4\u65b0\u6570\u636e\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define LL long long\n#define _ 0\nusing namespace std;\n\nint dp[10010];\nint a[10010];\nint n,k;\n\nint main()\n{\n\tcin>>n>>k;\n\tfor (int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tint maxa=0;\n\t\tfor (int j=i;j<min(i+k,n+1);j++)\n\t\t{\n\t\t\tif (a[j]>maxa)\n\t\t\t\tmaxa=a[j];\n\t\t\tif (dp[i-1]+(j-i+1)*maxa>dp[j])\n\t\t\t\tdp[j]=dp[i-1]+(j-i+1)*maxa;\n\t\t}\n\t}\n\tcout<<dp[n];\n\treturn ~~(0^_^0);\n}\n\n\n```",
        "postTime": 1545624210,
        "uid": 56267,
        "name": "Rhodoks",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P5124 \u3010[USACO12DEC]Teamwork\u3011"
    },
    {
        "content": " \u8fd9\u9898\u5c45\u7136\u6ca1\u6709p\u7684\u9898\u89e3\uff0c\u90a3\u6211\u6765\u6c34\u4e00\u53d1\n \n ~~\u611f\u89c9\u8fd9\u9898\u4e0d\u5230\u84dd\u5427~~\n \n \u9898\u76ee\u63cf\u8ff0\uff1a\u957f\u5ea6\u4e3an\u7684\u5e8f\u5217\uff0c\u53ef\u4ee5\u628a\u4e00\u6bb5\u957f\u4e3ak\u7684\u8fde\u7eed\u5e8f\u5217\u6539\u6210\u6700\u5927\u503c\n \n \u4e0d\u96be\u60f3\u5230dp\n \n \u7528b[i]\u8868\u793a\u524di\u4e2a\u6570\u80fd\u8fbe\u5230\u7684\u6700\u5927\u4ef7\u503c\u3002\n b[i]:=max(b[j]+(i-j)*max(a[j]),b[i]) \n \u800cb[i]\u6240\u80fd\u8fbe\u5230\u7684\u6700\u5c0f\u503c\u4e3ab[i-1]+a[i],\u6240\u4ee5\u53ef\u4ee5\u63d0\u524d\u5904\u7406b[i]\uff0c\n \u4f46i-j\u53ef\u80fd\u4f1a<=0,\u600e\u4e48\u529e\u5462\uff1f\u7279\u5224\u4e00\u4e0b\u5457\n \n \u4ee3\u7801\n```pascal\nuses math;//math\u5e93\u662f\u4e2a\u597d\u4e1c\u897f\nvar\n  n,m,i,j,k,maxx:longint;\n  a,b:array[0..100005] of longint;//\u4e0d\u7ba1\u600e\u4e48\u8bf4\uff0c\u5f00\u5927\u70b9\u603b\u4e0d\u4f1a\u9519\nbegin\n  readln(n,m);\n  for i:=1 to n do read(a[i]);\n  for i:=1 to n do\n  begin\n    maxx:=a[i];\n    b[i]:=b[i-1]+a[i];\n    for j:=1 to m-1 do\n    begin\n      if i<=j then break;//\u5982\u679ci<=j,\u90a3\u5c31\u8df3\u8fc7\u5faa\u73af\n        maxx:=max(maxx,a[i-j]);\n        b[i]:=max(b[i-j-1]+maxx*(j+1),b[i]);//dp\u8f6c\u79fb\u65b9\u7a0b\n    end;\n  end;\n  writeln(b[n]); //\u8f93\u51fa\u6700\u5927\u4ef7\u503cb[n]\nend.\n```",
        "postTime": 1549180304,
        "uid": 10601,
        "name": "shuiyuhan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork\u3011"
    },
    {
        "content": "[\u539f\u9898\u94fe\u63a5](https://www.luogu.com.cn/problem/P5124)\n\n\u8fd9\u662f\u4e00\u9053\u975e\u5e38\u68d2\u7684\u7ebf\u6027\u52a8\u5f52\u9898\uff0c\u5176\u4e2d\u8fd8\u6709\u4e00\u4e9b\u64cd\u4f5c\u5c0f\u6280\u5de7\u3002\n\n# 1\u3001\u9898\u610f\u7406\u89e3\n\n\u7b80\u5316\u7248\u9898\u610f\uff1a\u7ed9\u4f60 $n$ \u4e2a\u6570\uff0c\u8ba9\u4f60\u628a\u8fd9 $n$ \u4e2a\u6570\u5206\u6210\u4efb\u610f\u7ec4\uff0c\u6bcf\u7ec4\u4e2d\u5305\u542b\u4efb\u610f\u8fde\u7eed\u4e0d\u8d85\u8fc7 $k$ \u4e2a\u6570\u3002\u5f53\u4e00\u4e2a\u6570\u88ab\u5206\u5230\u4e00\u7ec4\u4e2d\u540e\uff0c\u5b83\u4f1a\u53d8\u6210\u8fd9\u7ec4\u6570\u4e2d\u6700\u5927\u7684\u90a3\u4e2a\uff0c\u6c42\u5206\u5b8c\u540e\u8fd9\u4e9b\u6570\u548c\u7684\u53ef\u80fd\u6700\u5927\u503c\u3002\n\n\u4f8b:  \n\n```\n5 3\n1\n2\n4\n6\n1\n```\n\n\u6211\u4eec\u628a $ 1 $, $2$, $4$ \u653e\u4e00\u7ec4\uff0c\u628a $6$ \u548c $2$\u653e\u4e00\u7ec4\uff0c\u5f97\u5230\u6700\u5927\u503c\u4e3a $4 \\times 3 + 6 \\times 2 = 24$\u3002\n\n\u901a\u8fc7\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5e94\u8be5\u5df2\u7ecf\u7406\u89e3\u4e86\u9898\u610f\uff0c\u4e0b\u9762\u5c31\u662f\u4e00\u4e9b\u8981\u70b9\u3002\n\n- \u6211\u4eec\u8981\u5206\u7684\u662f\u8fd9 $n$ \u5934\u5976\u725b\uff0c\u5e76\u4e14\u6bcf\u7ec4\u5fc5\u987b\u662f\u8fde\u7eed\u7684\u4e0d\u8d85\u8fc7 $k$ \u5934\u5976\u725b\u3002\n\n- \u4e00\u53ea\u5976\u725b\u53ea\u80fd\u5c5e\u4e8e\u4e00\u7ec4\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728\u5976\u725b\u5e8f\u5217\u4e2d\u653e\u4e0a\u51e0\u5757\u9694\u677f\u3002\n\n\n# 2\u3001\u52a8\u6001\u89c4\u5212\u6c42\u89e3\u7b54\u6848\n\n\u8fd9\u9898\u4e00\u770b\u5c31\u662f\u52a8\u6001\u89c4\u5212\uff0c\u5e76\u4e14\u7b26\u5408\u65e0\u540e\u6548\u6027\u7684\u6027\u8d28\uff08~~\u6807\u7b7e\u4e0a\u4e0d\u662f\u5199\u7740\u5462\u5417~~\uff09\u3002\u8fd9\u91cc\u6211\u6458\u5f55\u4e00\u6bb5\u6765\u81ea[\u8fd9\u7bc7\u535a\u5ba2](https://blog.csdn.net/qq_25800311/article/details/90635979)\u7684\u89e3\u91ca\uff1a\n\n> \u65e0\u540e\u6548\u6027\uff0c\u6709\u4e24\u5c42\u542b\u4e49\uff0c\u7b2c\u4e00\u5c42\u542b\u4e49\u662f\uff0c\u5728\u63a8\u5bfc\u540e\u9762\u9636\u6bb5\u72b6\u6001\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u524d\u9762\u9636\u6bb5\u7684\u72b6\u6001\u503c\uff0c\u4e0d\u5173\u5fc3\u8fd9\u4e2a\u72b6\u6001\u662f\u600e\u4e48\u4e00\u6b65\u6b65\u63a8\u5bfc\u51fa\u6765\u7684\u3002\u7b2c\u4e8c\u5c42\u542b\u4e49\u662f\uff0c\u67d0\u9636\u6bb5\u72b6\u6001\u4e00\u65e6\u786e\u5b9a\uff0c\u5c31\u4e0d\u53d7\u4e4b\u540e\u9636\u6bb5\u7684\u51b3\u7b56\u5f71\u54cd\u3002\u65e0\u540e\u6548\u6027\u662f\u4e00\u4e2a\u975e\u5e38\u201c\u5bbd\u677e\u201d\u7684\u8981\u6c42\u3002\n\n\u6240\u4ee5\u52a8\u5f52\u72b6\u6001\u5f88\u81ea\u7136\u7684\u5c31\u51fa\u6765\u4e86\u3002\u6211\u4eec\u8bbe $f_i$ \u8868\u793a\u524d $i$ \u5934\u5976\u725b\u6700\u5927\u7684\u6280\u80fd\u6c34\u5e73\u548c\uff0c\u90a3\u4e48\u6211\u4eec\u6765\u7814\u7a76\u4e00\u4e0b $f_i$ \u53ef\u4ee5\u4ece\u54ea\u91cc\u8f6c\u79fb\u8fc7\u6765\u3002\u6211\u4eec\u5bf9\u6bcf\u4e00\u53ea\u5976\u725b\u8fdb\u6765\u540e\u6700\u91cd\u8981\u7684\u662f\u4ec0\u4e48\uff1f\u662f\u628a\u5b83\u653e\u5728\u54ea\u4e00\u7ec4\uff01\u6211\u4eec\u8981\u786e\u5b9a\u5b83\u7684\u7ec4\u522b\u3002\n\n---\n\n\u6765\u4e2a\u6817\u5b50\u3002\n\n\u5982\u56fe\uff0c\u5f53 $k=3$ \u65f6\uff1a\n\n[![ggZtNq.png](https://z3.ax1x.com/2021/05/16/ggZtNq.png)](https://imgtu.com/i/ggZtNq)\n\n\u65b0\u8fdb\u6765\u4e86\u4e00\u5934\u7ea2\u725b\uff0c\u7f16\u53f7\u4e3a $i$\uff0c\u6211\u4eec\u628a\u5b83\u653e\u54ea\uff1f\n\n\u7531\u4e8e\u4e00\u7ec4\u6700\u591a\u53ea\u80fd\u653e\u4e09\u5934\uff0c\u6240\u4ee5\u6211\u4eec\u6709\u4e09\u79cd\u65b9\u6cd5\uff1a\n\n[![ggeSbj.png](https://z3.ax1x.com/2021/05/16/ggeSbj.png)](https://imgtu.com/i/ggeSbj)\n\n\u628a\u5b83\u5355\u72ec\u653e\u4e00\u7ec4\uff0c\u8fd9\u79cd\u65b9\u6848\u662f\u4ece $f_{i-1}$ \u8f6c\u79fb\u8fc7\u6765\u7684\u3002\n\n![gbvzpn.png](https://z3.ax1x.com/2021/05/22/gbvzpn.png)\n\n\u628a\u5b83\u548c\u524d\u4e00\u53ea\u5976\u725b\u653e\u4e00\u7ec4\uff0c\u8fd9\u79cd\u72b6\u6001\u662f\u4ece $f_{i-2}$ \u8f6c\u79fb\u8fc7\u6765\u7684\u3002\n\n[![gbx5EF.png](https://z3.ax1x.com/2021/05/22/gbx5EF.png)](https://imgtu.com/i/gbx5EF)\n\n\u628a\u5b83\u548c\u524d\u4e24\u53ea\u5976\u725b\u653e\u4e00\u7ec4\uff0c\u8fd9\u79cd\u72b6\u6001\u662f\u4ece $f_{i-3}$ \u8f6c\u79fb\u8fc7\u6765\u7684\u3002\n\n\u81f3\u6b64\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u8fd9\u53ea\u5976\u725b\u7684\u5168\u90e8\u72b6\u6001\u8f6c\u79fb\uff0c\u5e76\u4e14\u65e0\u6cd5\u518d\u627e\u5230\u65b0\u7684\u72b6\u6001\uff0c\u56e0\u4e3a\u518d\u5f80\u524d\u5206\u7ec4\u5c31\u4f1a\u8d85\u51fa $k$ \u7684\u7ea6\u675f\u8303\u56f4\u3002\n\n---\n\n\u6240\u4ee5\u6211\u4eec\u7684\u6700\u7ec8 $f_i$ \u662f\u4ec0\u4e48\u5462? \u663e\u7136\u662f\u4ece\u4e4b\u524d\u7684 $f_{j-1}$ \u8f6c\u79fb\u8fc7\u6765\u7684\uff0c\u628a $[j,i]$ \u8fd9\u4e2a\u533a\u95f4\u4e2d\u7684\u5976\u725b\u5206\u4e3a\u4e00\u7ec4\u3002\u4f46\u662f\u6211\u4eec\u522b\u5fd8\u4e86\u8fd8\u8981\u52a0\u4e0a\u8fd9\u4e00\u7ec4\u7684\u6548\u7387\u548c\u3002\u8fd9\u91cc\u7684\u6548\u7387\u548c\u4e3a\u4e3a $mx \\times (i-j+1)$ \uff0c\u5176\u4e2d $mx$ \u4e3a\u533a\u95f4 $[j,i]$ \u7684\u6700\u5927\u503c\uff0c\u610f\u601d\u5c31\u662f\u8fd9\u4e00\u7ec4\u7684\u6548\u7387\u503c\u4e3a\u8fd9\u4e00\u7ec4\u4e2d\u7684\u6700\u5927\u503c\u4e58\u4e0a\u8fd9\u4e00\u7ec4\u7684\u7ec4\u5458\u4e2a\u6570\u3002\n\n\u4f46\u662f $j$ \u53c8\u8981\u6ee1\u8db3\u4ec0\u4e48\u8981\u6c42\u5462\uff1f\u663e\u7136\uff0c\u6211\u4eec\u9009\u7684\u90a3\u4e00\u7ec4\u5976\u725b\u6570\u4e0d\u80fd\u8d85\u8fc7 $k$ \uff0c\u4e5f\u5c31\u662f\u8bf4 $[j,i]$ \u8fd9\u4e2a\u533a\u95f4\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 $k$ \uff0c\u6240\u4ee5 $ i-k+1 \\leq j \\leq i$ \uff0c\u4f46\u8fd9\u8fd8\u4e0d\u591f\uff0c\u56e0\u4e3a\u6700\u521d $i-k+1$ \u53ef\u80fd\u4e3a\u8d1f\u6570\uff0c\u6240\u4ee5\u5de6\u7aef\u70b9\u8fd8\u8981\u8ddf\u4e00\u53d6\u6700\u5927\u503c\uff0c\u4e5f\u5c31\u662f\u8bf4 $ \\max(i-k+1,1) \\leq j \\leq i$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5c31\u6709\u4e86\u8fd9\u6837\u7684\u4ee3\u7801\uff1a\n\n```cpp \n#include <iostream>\nusing namespace std;\nconst int N=10005;\nint n,k,s[N];\nint f[N];\ninline int max(int a,int b)\n{\n\treturn a>b?a:b;\n}\nint mx(int k,int l)//\u5728[k,l]\u533a\u95f4\u5185\u53d6\u6700\u5927\u503c\n{\n\tint maxx=-1;\n\tfor(int i=k;i<=l;i++) maxx=max(maxx,s[i]);\t\t\n\treturn maxx;\n}\nint main()\n{\n\tcin>>n>>k;\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>s[i];\n\tf[1]=s[1];\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tfor(int j=max(i-k+1,1);j<=i;j++)\n\t\t{\n\t\t\tf[i]=max(f[i],f[j-1]+mx(j,i)*(i-j+1));//\u8f6c\u79fb\n\t\t}\n\t}\n\tcout<<f[n];\n    return 0;\n}\n```\n\u4ea4\u4e0a\u53bb\u4e00\u770b\uff0c**TLE $\\times$ 3**\u3002\n\n\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\u662f\u5728\u8fd9\u91cc\u51fa\u4e86\u95ee\u9898\uff1a\n\n```cpp\nint mx(int k,int l)//\u5728[k,l]\u533a\u95f4\u5185\u53d6\u6700\u5927\u503c\n{\n\tint maxx=-1;\n\tfor(int i=k;i<=l;i++) maxx=max(maxx,s[i]);\n\treturn maxx;\n}\n```\n\u8fd9\u91cc\u6c42\u533a\u95f4\u6700\u5927\u503c\u7684\u65f6\u95f4\u662f $O(n)$ \u7684\uff0c\u8fd9\u6837\u4e00\u6765\u603b\u590d\u6742\u5ea6\u662f $O(n^3)$ \uff0c\u5c31\u70b8\u6389\u4e86\u3002\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u5728\u6c42\u6700\u5927\u503c\u4e0a\u82b1\u590d\u6742\u5ea6\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6bcf\u6b21\u4ece $i$ \u5012\u7740\u679a\u4e3e\u5230 $\\max(i-k+1,1)$ \u6bcf\u6b21\u5728\u8f6c\u79fb $f_i$ \u65f6\u987a\u4fbf\u5c31\u5b9e\u73b0\u4e86\u6c42 $[j,i]$ \u7684\u6700\u5927\u503c\u3002\n\n# 3\u3001AC\u4ee3\u7801\n\n\u4ee3\u7801\u4e2d\u6709\u6ce8\u91ca\u3002\n\n```cpp\n#include <iostream>\nusing namespace std;\nconst int N=10005;\nint n,k,s[N];\nint f[N];\n/*\nf[i]\u8868\u793a\u524di\u5934\u5976\u725b\u6700\u5927\u6c34\u5e73\u548c\nf[i]=max(f[i],f[j-1]+mx(j,i)*(i-j+1))  (i-k+1<=j<=i) \n*/\nint max(int a,int b)\n{\n\treturn a>b?a:b;\n}\nint main()\n{\n\tcin>>n>>k;\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>s[i];\n\tf[1]=s[1];//\u521d\u59cb\u5316f[1]=s[1]\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tint mx=-1;//\u5148\u8bbe\u4e3a-1\uff0c\u56e0\u4e3a\u90fd\u662f\u6b63\u6570\n\t\tfor(int j=i;j>=max(i-k+1,1);j--)//\u8fb9\u754c\u6761\u4ef6\n\t\t{\n\t\t\tmx=max(mx,s[j]);//\u5148\u5f97\u628amx\u66f4\u65b0\u4e86\n\t\t\tf[i]=max(f[i],f[j-1]+mx*(i-j+1));//\u624d\u80fd\u8f6c\u79fb\n\t\t}\n\t}\n\tcout<<f[n];\n    return 0;\n}\n```\n\n**\u82e5\u6709\u9519\u8bef\uff0c\u6b22\u8fce\u6307\u51fa\uff01**\n",
        "postTime": 1621063470,
        "uid": 304775,
        "name": "linyinuo2008",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u662f\u4e00\u4e2a\u52a8\u89c4\u6a21\u677f\uff0c\u8fd8\u662f\u7ebf\u6027\u7684\u3002    \n\uff08\u5438\u5f15\u6211\u7684\u5176\u5b9e\u662f\u8fd9\u9053\u9898\u7684\u9898\u76ee\uff09  \n\u8bbe$f[i]$\u4e3a\u4ee5\u7b2c$i$\u5934\u725b\u7ed3\u5c3e\u80fd\u83b7\u5f97\u7684\u6700\u5927\u503c\u3002     \n\u8bbe$sum$\u4e3a$a[i]$~$a[j]$\u95f4\u7684\u6700\u5927\u503c          \n\u8f6c\u79fb\u662f\u8fd9\u6837\u7684\uff1a$f[i]=max(f[i],f[j-1]+sum*(i-j+1))$\n\n\u4e0a\u4ee3\u7801\uff1a\n```cpp\n# include <cstdio>\n# include <iostream>\n# include <algorithm>\nusing namespace std;\nconst int N=10005;\nint n,k,a[N],f[N];\n\nint main () {\n\tscanf (\"%d%d\",&n,&k);\n\tfor (int i=1;i<=n;i++) scanf (\"%d\",&a[i]);\n\tfor (int i=1;i<=n;i++) {\n\t\tint sum=-1e9;\n\t\tfor (int j=i;i-j+1<=k&&j>=1;j--) {//\u8fd9\u91cc\u6ce8\u610f\u4e00\u4e0b\uff0cj\u4e0d\u4ec5\u8981\u4fdd\u8bc1\u5728k\u4e2a\u4ee5\u5185\uff0c\u8fd8\u8981\u5927\u4e8e\u7b49\u4e8e1\n\t\t\tsum=max(sum,a[j]);\n\t\t\tf[i]=max(f[i],f[j-1]+sum*(i-j+1));\n\t\t}\n\t}\n\tprintf (\"%d\\n\",f[n]);\n\treturn 0;\n    //\u548c\u4e0a\u9762\u8bb2\u7684\u4e00\u6bdb\u4e00\u6837\uff0c\u4e0d\u653e\u4ec0\u4e48\u6ce8\u91ca\u4e86\n}\n//By\u82cd\u7a7a\u7684\u84dd\u8000\n\n```\n",
        "postTime": 1572493276,
        "uid": 109640,
        "name": "\u5fae\u9999\u7389\u70db\u6697",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork\u3011"
    },
    {
        "content": "# P5124 \u9898\u89e3\n## \u9898\u610f\n\u5c06\u5df2\u77e5\u5e8f\u5217\u5206\u4e3a\u8fde\u7eed\u82e5\u5e72\u6bb5\uff0c\u6bcf\u6bb5\u957f\u5ea6\u4e0d\u8d85\u8fc7 $k$ \u3002\u6c42\u5206\u6bb5\u540e\u6bb5\u5185**\u6700\u5927\u503c $\\times$ \u6bb5\u957f\u5ea6**\u4e4b\u548c\u6700\u5927\u3002\n\n## \u89e3\u7b54\n\u663e\u7136 $dp$ \u3002\n\n\u8bbe $f[i]$ \u8868\u793a\u524d $i$ \u5934\u725b\u7684\u5206\u6bb5\u540e\u6700\u5927\u503c\u3002\u5219\u6709\u5982\u4e0b\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$f[i]=f[i-k]+k \\times \\max\\{a[j]\\}\\ |\\ i-k+1 \\leq j \\leq i$$\n\n\u7136\u540e\u5199\u4ee3\u7801\u5427\u3002\n\n## Code\n```cpp\n\n//\n//  by HpyX\n//  Luogu5124,\u6709\u5751\u7248\n//\n\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N=10009;\n\ninline int read() { // \u5feb\u8bfb\n\tint x=0,f=1; char ch=getchar();\n\twhile (!isdigit(ch)) { if (ch=='-') f=-f; ch=getchar(); }\n\twhile (isdigit(ch)) { x=(x<<1)+(x<<3)+(ch^48); ch=getchar(); }\n\treturn x*f;\n}\n\nint n,k,a[N],f[N];\n\nvoid solve_dp() {\n\tfor (int i=1;i<=n;i++) {\n\t\tint mx=a[i]; // mx\u8d4b\u503c\u4e3aa[i]\n\t\tfor (int j=i;i-j+1<k && j>1;j--) {\n\t\t\tmx=max(mx,a[j]); // \u6700\u5927\u503c\n\t\t\tf[i]=max(f[i], f[j-1]+mx*(i-j+1)); // \u6240\u6709\u524dk\u4e2a\u5206\u4e00\u7ec4\u7684\u60c5\u51b5\u53d6\u6700\u5927\u503c\n\t\t}\n\t}\n}\n\nint main() {\n\tscanf(\"%d%d\", &n, &k);\n\tfor (int i=1;i<=n;i++) scanf(\"%d\", a+i);\n\tsolve_dp();\n\tprintf(\"%d\\n\", f[n]);\n\treturn 0;\n}\n```",
        "postTime": 1599733604,
        "uid": 291706,
        "name": "GspTools",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011"
    },
    {
        "content": "\u7ebf\u6bb5\u6811\u6c34\u9898\n\n\u5148\u770b\u9898\u76ee \u6211\u4eec\u53ea\u9700\u8981\u4e00\u7ef4\u5b9a\u4e49\u5373\u53ef\n\n\u56e0\u4e3a\u9898\u76ee\u5e76\u6ca1\u6709\u8981\u6c42\u8fd9\u8981\u5206\u591a\u5c11\u7ec4\n\nf[ i ] \u4e3a\u5206\u5230\u7b2ci\u4e2a\u65f6\u6700\u5927\u6c34\u5e73\u548c\n\n\u4e4b\u540e\u6211\u4eec\u8981\u5728 i-k \u5230 i \u5bfb\u627e\u65ad\u70b9\n\n\u7279\u6b8a\u7684 \u5982\u679c i-k \u5c0f\u4e8e1 \u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u5206\u5728\u4e00\u7ec4\n\n\u8fd9\u6837\u5b50\u6c34\u5e73\u548c\u6700\u5927 \n\n\u4e4b\u540e\u4e0a\u7ebf\u6bb5\u6811\u677f\u5b50\u7ef4\u62a4\u533a\u95f4\u6781\u503c\u5373\u53ef\n\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 10005 \n#define IL inline \n#define R register\n#define INF 0x7f7f7f7f\nusing namespace std ;\nint f[MAXN] , n , k , a[MAXN];\nint Max[MAXN*4] ;\nIL int read() {\n   int s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9') {if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9')  s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\nIL int max (int A,int B) { return A>B?A:B ; }\nIL int Ask(int k ,int l ,int r ,int x,int y)\n{\n   if(r<x || l>y) return -INF ;\n   if( x<=l && r<=y ) return Max[k] ;\n   int mid = l+r>>1 , res = -INF ;\n   if(x <= mid) res = max( res , Ask(k<<1 , l , mid , x , y) ) ;\n   if(mid < y) res = max( res , Ask(k<<1|1, mid+1 , r , x , y) ) ;\n   return res ;\n}\nIL void build (int k ,int l ,int r)\n{\n   if(l == r) \n   {\n\tMax[k] = a[l] ;\n\treturn ;\n   }\n   int mid= l+r>>1 ;\n   build( k<<1 , l , mid ) ;\n   build( k<<1 | 1 , mid+1 , r) ;\n   Max[k] = max( Max[k<<1] , Max[k<<1 | 1] ) ;\n}\nint main() \n{\n   n = read() ; k = read() ;\n   for(R int i=1; i<=n; ++i)\n      a[i] = read() ;\n   build( 1 , 1 , n ) ;\n   for(R int i=1 ; i<=n ; ++i)\n   {\n      if( i-k < 1 ) \n      {\n    \t  f[i] = Ask( 1 , 1, n , 1 , i) * i;\n    \t  continue ;\n      }\n      for(R int j=i-k; j<i; ++j)\n         f[i] = max( f[i] , f[j]+Ask(1, 1, n ,j+1 , i)*(i-j) );\n    }\n    printf ( \"%d\\n\" , f[n] ) ;\n    return 0; \n}\n```\n\u4e4b\u540e\u4f60\u4f1a\u53d1\u73b0\u88ab\u5361\u4e86\u4e00\u4e2a\u70b9 \n\n\u6b64\u65f6\u6211\u4eec\u9700\u8981\u90a3\u53e5\u795e\u5947\u7684\u5492\u8bed\n\n~~\u53e4\u5a1c\u62c9\u9ed1\u6697\u4e4b\u795e---\u545c\u547c\u5566\u547c---\u9ed1\u9b54\u53d8\u8eab~~\n\n\n[\u4f60\u6e34\u671b\u529b\u91cf\u5417](https://www.luogu.org/paste/r5wh627k)",
        "postTime": 1569111929,
        "uid": 100114,
        "name": "hater",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork\u3011"
    },
    {
        "content": "\u770b\u5230\u6570\u636e\u8303\u56f4\uff0c\u8003\u8651dp\u6c42\u89e3\n\n\u8bbe $f[i]$ \u8868\u793a\u5230\u4e86\u7b2c$i$\u5934\u725b\uff0c\u80fd\u5f97\u5230\u7684\u6700\u5927\u6536\u76ca\n\n\u90a3\u4e48\u7b54\u6848\u5c31\u662f$f[n]$\n\n\u8f6c\u79fb\n\n\u8bbe $t[i]$ \u8868\u793a\u7b2c $i$ \u5934\u725b\u7684\u6743\u503c\u3002\n\n$f[i] = max\\{f[i - j] + max\\{t[i - j + 1] \\cdots t[i]\\}\\}$\n\n\u5bfb\u627e $t$ \u7684\u6700\u5927\u503c\u53ef\u4ee5\u7528 ST \u8868\u5b9e\u73b0\u3002\n\n\u590d\u6742\u5ea6 $O(nk)$\n\n```cpp\n#include <cstdio>\n#include <iostream>\nint f[10005];\nint t[10005][20];\nint log_2[10005];\nint que(int l, int r) {\n    int tmp = log_2[r - l + 1];\n    return std::max(t[l][tmp], t[r - (1 << tmp) + 1][tmp]);\n}\nint main() {\n    int n, k; scanf(\"%d %d\", &n, &k);\n    for(int i = 1 ; i <= n ; ++ i) scanf(\"%d\", &t[i][0]);\n    \n    for(int i = 1 ; i <= 19 ; ++ i)\n    for(int j = 1 ; j + (1 << i) - 1 <= n ; ++ j)\n\tt[j][i] = std::max(t[j][i - 1], t[j + (1 << (i - 1))][i - 1]);\n\tfor(int i = 2 ; i <= n ; ++ i) log_2[i] = log_2[i >> 1] + 1;\n\tfor(int i = 1 ; i <= n ; ++ i) {\n\t\tfor(int j = 1 ; j <= k ; ++ j) {\n\t\t\tif(j > i) break;\n\t\t\tf[i] = std::max(f[i], f[i - j] + que(i - j + 1, i) * j);\n        }\n    }\n    printf(\"%d\\n\", f[n]);\n}\n```",
        "postTime": 1545572142,
        "uid": 44777,
        "name": "djh123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5124 \u3010\u300cUSACO 2018 December Gold\u300dTeamwork\u3011"
    },
    {
        "content": "**[\u9898\u76ee\u63cf\u8ff0](https://www.luogu.com.cn/problem/P5124)**\n\n\u4e00\u6b21\u6a21\u62df\u8d5b\u7684T2,\u81ea\u8ba4\u4e3a\u662f\u4e00\u9053\u5f88\u7b80\u5355\u7684DP\u9898\u76ee\uff0c\u8003\u573a\u4e0a\u82b1\u4e863min\u770b\u9898\uff0c5min\u60f3DP\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5f0f\uff0c5min\u6253\u51fa\uff0c0s\u8fc7\u6837\u4f8b\uff0c5min\u6784\u6570\u636e\u67e5\u9519\uff0c\u4e00\u5171\u4e8c\u5341\u5206\u949f\u5c31\u8fc7\u4e86\u8fd9\u9053\u9898\u3002\n\n## \u5206\u6790\n\n\u4e00\u9053\u5f88\u6c34\u7684\u7ebf\u6027\u52a8\u6001\u89c4\u5212\uff0c\u8bbe$dp[i]$\u8868\u793a\u524di\u4e2a\u4eba\u6700\u591a\u80fd\u5f97\u5230\u7684\u6280\u80fd\u6c34\u5e73\u4e4b\u548c\uff0c\u4ed6\u5bf9$dp[min(i + k,n)]$\u8fd9\u4e2a\u4e4b\u524d\u7684\u6709\u5f71\u54cd\uff0c\u800c\u540e\u9762\u7684\u53c8\u7531\u540e\u9762$k(j<=n)$\u4e2a\u7684\u6700\u5927\u503c\u5f97\u5230\uff0c\u4e8e\u662f\u4ed6\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u5341\u5206\u7b80\u5355\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n$$f[j]=max(f[j],f[i]+sum*(j-i))$$\n\u5f53\u52a8\u6001\u89c4\u5212\u9898\u76ee\u5199\u51fa\u6765\u4e86\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5f0f\uff0c\u63a5\u4e0b\u6765\u8fd8\u4e0d\u7b80\u5355\u5417\uff1f\u76f4\u63a5\u72c2\u64b8\u4ee3\u7801\uff0c\u53cd\u6b63\u4ee3\u7801\u91cf\u90fd\u53ea\u6709\u8fd9\u4e48\u5c0f\u4e86\u3002\u3002\u3002\n\u5148\u5916\u5c42\u5faa\u73af\u679a\u4e3e\u7ed3\u5c3e\uff0c\u5faa\u73af0-n(1-n)\u4e5f\u884c\uff0c\u5c31\u591a\u5728\u5916\u9762\u52a0\u4e2a\u521d\u59cb\u72b6\u6001\u5c31\u53ef\u4ee5\u4e86)\u3002\u5185\u5c42\u5faa\u73af\u679a\u4e3e\u540e\u9762\u4f1a\u5f71\u54cd\u7684\u4ece$i$\u5230$min(n,i + k)$\uff0c\u4e00\u8fb9\u5b58\u5f53\u524d\u8bbf\u95ee\u7684\u6700\u5927\u503c\uff0c\u4e00\u8fb9\u66f4\u65b0\u5f53\u524d\u7684dp\u503c\uff0c\u6700\u540e\u8f93\u51fadp[n]\uff0c\u4e5f\u5c31\u662f1-n\u5168\u90e8\u7684\u6280\u672f\u503c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6$O(nk)$\uff0c\u4e5f\u662f~~\u5feb\u7684\u98de\u8d77~~\uff0c\u4ee3\u7801\u5341\u5206\u77ed\u3002\n\n## **code**\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\nconst int MAXN = 1e4 + 5;\nint n,k,a[MAXN],dp[MAXN];\nint main() {\n\tfreopen(\"worker.in\",\"r\",stdin);\n\tfreopen(\"worker.out\",\"w\",stdout);\n\tscanf(\"%d %d\",&n,&k);\n\tfor(int i = 1;i <= n;i ++)\n\tscanf(\"%d\",&a[i]);\n\tfor(int i = 0;i <= n;i ++) {\n\t\tint maxx = 0;\n\t\tfor(int j = i + 1;j <= min(i + k,n + 1);j ++) {\n\t\t\tmaxx = max(maxx,a[j]);\n\t\t\tdp[j] = max(dp[j],dp[i] + maxx * (j - i));\n\t\t}\n\t}\n\tprintf(\"%d\",dp[n]);\n\treturn 0;\n}\n```",
        "postTime": 1608701361,
        "uid": 311032,
        "name": "cqbz_luoyiran",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011"
    },
    {
        "content": "\u8fd9\u5c45\u7136\u662f\u5230\u84dd\u9898\n\n# \u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011\n\n[P5124 [USACO18DEC]Teamwork G](https://www.luogu.com.cn/problem/P5124)\n\n\u5f88\u7b80\u5355\u7684 $dp$ \u9898\u76ee\uff0c\u8bfb\u6e05\u695a\u9898\u76ee\u5c31\u53ef\u4ee5\u5f88\u5feb\u5730\u63a8\u51fa\u8fd9\u9053\u9898\u76ee\u7684\u65b9\u7a0b\u3002\n\n\u5176\u5b9e\u6839\u672c\u4e0d\u7528\u7ef4\u62a4\u533a\u95f4\u6700\u5927\u503c\uff0c\u53cd\u6b63\u5728\u8f6c\u79fb\u7684\u65f6\u5019\u4e5f\u4f1a\u9010\u4f4d\u8003\u8651\u8f6c\u79fb\uff0c\u4e8e\u662f\u76f4\u63a5\u66b4\u529b\u53d6 $\\max$ \u5373\u53ef\uff0c\u65b9\u7a0b\u5982\u4e0b\uff1a\n\n$$\ndp[j] = \\max(dp[j],dp[i-1]+(j-i+1)\\times maxn);\n$$\n\n\u76f4\u63a5 $n \\times k$ \u6b21\u66b4\u529b\u7684\u8f6c\u79fb\u5c31\u53ef\u4ee5\n# code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int SIZE = 1e4 + 50;\nconst int inf = 1e9 + 50;\n\ninline int read()\n{\n\tint x = 0, f = 1;\n\tchar ch = getchar();\n\twhile (ch < '0' || ch > '9')\n\t{\n\t\tf = (ch == '-' ? -1 : 1);\n\t\tch = getchar();\n\t}\n\twhile (ch >= '0' && ch <= '9')\n\t{\n\t\tx = (x << 1) + (x << 3) + (ch ^ 48);\n\t\tch = getchar();\n\t}\n\treturn f * x;\n}\n\nint n,k;\nint num[SIZE],dp[SIZE];\n\nint main()\n{\n\tn = read();k = read();\n\tfor (int i = 1; i <= n; ++i)\n\t{\n\t\tnum[i] = read();\n\t}\n\tfor (int i = 1; i <= n; ++i)\n\t{\n\t\tint limit = min(i+k,n+1),maxn = 0;\n\t\tfor (int j = i; j < limit; ++j)\n\t\t{\n\t\t\tmaxn = max(maxn,num[j]);\n\t\t\tdp[j] = max(dp[j],dp[i-1]+(j-i+1)*maxn);\n\t\t}\n\t}\n\tprintf(\"%d\\n\",dp[n]);\n\treturn 0;\n}\n```",
        "postTime": 1606223767,
        "uid": 415231,
        "name": "nomonick",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011"
    },
    {
        "content": "\u4e00\u9053\u52a8\u6001\u89c4\u5212\u9898\u3002\n\n\u5148\u6c42\u6240\u6709\u725b\u80fd\u529b\u7684\u6700\u5927\u503c\u3002\n\n$dp[i]$ \u8868\u793a $1...i$ \u5f97\u5230\u6700\u5927\u503c\u3002\n\n\u518d\u679a\u4e3e$j$\uff0c\u5219 $dp[i]=max(dp[i],dp[j-1]+max(s_1...s_n)*(i-j+1))$\u3002\n\n```\n#include <bits/stdc++.h>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MAXN = 100005;\n\nint dp[MAXN], s[MAXN];\n\nint n, k;\n\nint main() {\n    cin >> n >> k;\n    for (int i = 1; i <= n; ++i) {\n        cin >> s[i];\n    }\n    for (int i = 1; i <= n; ++i) {\n        int maxn = -0x3f3f3f3f;\n        for (int j = i; j >= max(1, i - k + 1); --j) {\n            maxn = max(maxn, s[j]);//\u6c42\u51fa\u6700\u597d\u7684\n            dp[i] = max(dp[i], dp[j - 1] + maxn * (i - j + 1));//\u52a8\u6001\u8f6c\u79fb\n        }\n    }\n    cout << dp[n] << '\\n';//\u8f93\u51fa\u5728\u7b2cn\u4f4d\n    return 0;\n}\n```\n",
        "postTime": 1597215728,
        "uid": 298325,
        "name": "Marshadow",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011"
    },
    {
        "content": "~~\u4e2d\u8003\u8fc7\u540e\u505a\u7684\u7b2c\u4e00\u9053\u9898\uff0c\u5f53\u7136\u8981\u53d1\u4e2a\u9898\u89e3\u5e86\u795d\u4e00\u4e0b~~\n# \u9898\u76ee\u5927\u610f\n\u7ed9\u51fa$n$\u4e2a\u6280\u80fd\u6c34\u5e73\uff0c\u5c06\u5176\u5206\u6210\u82e5\u5e72\u7ec4\uff0c\u6bcf\u7ec4\u4e0d\u8d85\u8fc7$k$\u4e2a\uff0c\u4f7f\u5f97\u6bcf\u7ec4\u4e2d\u6700\u5927\u503c\u4e0e~~\u4eba~~\u725b\u6570\u4e4b\u79ef\u7684\u548c\u6700\u5927\u3002\n# \u9898\u76ee\u5206\u6790\n\u8fd9\u662f\u4e00\u4e2adp\u9898\uff0c\u6211\u4eec\u8bbe$dp_i$\u8868\u793a\u524d$i$\u5934\u5976\u725b\u7684\u6280\u80fd\u6c34\u5e73\u4e4b\u548c\u7684\u6700\u5927\u503c\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e2a$dp_i$\uff0c\u679a\u4e3e\u524d$min(i,k)$\u4e2a\u6570\u4f5c\u4e3a\u65b0\u7684\u5206\u7ec4\u70b9\uff0c\u8ba1\u7b97\u8be5\u60c5\u51b5\u7684\u7ed3\u679c\u3002\n\n\u5982\u679c\u521d\u59cb\u6280\u80fd\u6c34\u5e73\u4e3a$a_i$\uff0c\u90a3\u4e48\u6211\u4eec\u7684\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u5f0f\u5c31\u4e3a\uff1a$dp[i]=max(dp[i-(j=1...min(i,k))]+max(a[(i-j)...i])\\times j)$\n\n\u5982\u679c\u5bf9\u4e8e\u6bcf\u4e2a$max$\u90fd\u53bb\u679a\u4e3e\u7684\u8bdd\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u8fbe\u5230$O(nk^2)$\uff0c\u663e\u7136\u4f1a\u8d85\u65f6\u3002\u8fd9\u91cc\u5f88\u5bb9\u6613\u5c31\u60f3\u5230\u7528\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u6765\u9884\u5904\u7406\u4e00\u4e0b\u6bcf\u4e2a\u533a\u95f4\u91cc\u7684$max$\u3002\u5982\u679c\u4f7f\u7528\u7ebf\u6bb5\u6811\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nklogn)$\uff0c\u63d0\u4ea4\u540e\u8fd8\u662f\u4f1aTLE\u3002\u7531\u4e8e\u662f\u9759\u6001\u7684\uff0c\u6211\u4eec\u7528\u4e00\u4e2aST\u8868\u7ef4\u62a4\u5373\u53ef\uff0c\u9884\u5904\u7406$O(nlogn)$\uff0c\u6bcf\u6b21\u67e5\u8be2$O(1)$\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nk)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n# \u4ee3\u7801\n\u91cd\u5934\u620f\u5566\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,k,a[10001],Log[10001],Max[10001][15],dp[10001];\ninline int query(int l,int r)//\u67e5\u8be2\uff0c\u5176\u5b9e\u53ef\u4ee5\u4e0d\u7528\u5199\u4e2a\u51fd\u6570\u3002\u3002\u3002\n{\n\tint s=Log[r-l+1];\n\treturn max(Max[l][s],Max[r-(1<<s)+1][s]);\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&k);\n\tfor(register int i=1;i<=n;++i)\n\t    scanf(\"%d\",&a[i]);\n\tLog[0]=-1;\n\tfor(register int i=1;i<=n;++i)\n\t{\n\t\tMax[i][0]=a[i];\n\t\tLog[i]=Log[i>>1]+1;\n\t}\n\tfor(register int j=1;j<=14;++j)\n\t    for(register int i=1;i+(1<<j)-1<=n;++i)\n\t        Max[i][j]=max(Max[i][j-1],Max[i+(1<<j-1)][j-1]);//ST\u8868\u9884\u5904\u7406\n\tfor(register int i=1;i<=n;++i)\n\t    for(register int j=1;j<=min(i,k);++j)\n\t        dp[i]=max(dp[i],dp[i-j]+query(i-j+1,i)*j);\n\tprintf(\"%d\\n\",dp[n]);\n\treturn 0;\n}\n```\n",
        "postTime": 1595208171,
        "uid": 68011,
        "name": "\u53e4\u660e\u5730_ypc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011"
    },
    {
        "content": "### [\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P5124)\n\n\u5206\u6790\u4e00\u4e0b\u9898\u76ee\u7684\u8981\u6c42\uff1a\n\n+ \u628a$n$\u4e2a\u6570\u5206\u6210$k$\u7ec4\uff0c\u4f7f\u5f97\u6bcf\u7ec4\u7684\u6700\u5927\u503c\u7684\u548c\u6700\u5927\n\n+ \u6c42\u8fd9\u4e2a\u548c\n\n\u62ff\u5230\u8fd9\u9053\u9898\uff0c\u6211\u7684\u7b2c\u4e00\u5370\u8c61\u5c31\u662f \u6570\u636e\u7ed3\u6784 $or$ \u52a8\u6001\u89c4\u5212\n\n\u8fd9\u9053\u9898\u7528\u7ebf\u6bb5\u6811\u6765\u5199\u7684\u8bdd\u4ee3\u7801\u4f1a\u5341\u5206\u590d\u6742\uff0c\u800c\u4e14\u590d\u6742\u5ea6\u5f88\u5dee\n\n\u6240\u4ee5\u5c31\u53ef\u4ee5\u7528\u52a8\u6001\u89c4\u5212\u6765\u89e3\u51b3\u4e86\n\n\u4e0d\u96be\u63a8\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u611f\u89c9\u96be\u5ea6\u4e0d\u662f\u5f88\u9ad8\n\n$dp_{i}$\u8868\u793a\u4ee5\u7b2c$i$\u5934\u5976\u725b\u7ed3\u5c3e\u7684\u6700\u5927\u4ef7\u503c\n\n\u5219$dp_{i}=Max(dp_{i},MaxV(a_{i}~a_{j})*(i-j+1)+dp_{i})$\n\n\u5176\u4e2d\u7684$MaxV$\u8868\u793a\u533a\u95f4$[a_i,a_j]$\u7684\u6700\u5927\u503c\n\n\u7528\u4e00\u4e2a\u53d8\u91cf$sum$\u6765\u4fdd\u5b58\u533a\u95f4$[a_i,a_j]$\u7684\u6700\u5927\u548c\n~~\uff08\u5f53\u7136\u4f60\u7528\u7ebf\u6bb5\u6811\u4e5f\u6ca1\u4e8b\uff0c\u7eaf\u5c5e\u88c5$X$\uff09~~\n\n## Code:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n/*\ntemplate<typename T> void read(T &x) {\n\tT s=0,w=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9') {if(c=='-') w=-1; c=getchar();}\n\twhile(c>='0'&&c<='9') s=s*10+c-'0',c=getchar();\n\tx=s*w;\n}\n*/\nunsigned long long read() {\n\tunsigned long long s=0,w=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9') {if(c=='-') w=-1; c=getchar();}\n\twhile(c>='0'&&c<='9') s=s*10+c-'0',c=getchar();\n\treturn s*w;\n}\nint n,k;\nint a[10100],dp[10100];\n\nint main() {\n\tscanf(\"%d%d\",&n,&k);\n\tfor(int i=1;i<=n;++i) {\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=n;++i) {\n\t\tint sum = INT_MIN ; \n\t\tfor(int j=i;i-j+1 <= k && j >= 1; --j) {\n\t\t\tsum = Max(sum,a[j]);\n\t\t\tdp[i] = Max(dp[i],dp[j-1]+sum*(i-j+1));\n\t\t}\n\t}\n\tprintf(\"%d\",dp[n]);\n\treturn 0;\n}\n```",
        "postTime": 1585715367,
        "uid": 314693,
        "name": "zmxqs",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork G\u3011"
    },
    {
        "content": "\u6709\u4e00\u4e2a\u957f\u5ea6\u4e3a$n$\u7684\u5e8f\u5217 $a$ $,$ \u6bcf\u6b21\u53ef\u4ee5\u5c06\u9644\u8fd1\u8fde\u7eed\u51e0\u4e2a\u6bd4\u81ea\u5df1\u5c0f\u7684\u6570\u53d8\u4e3a\u81ea\u5df1 $,$ \u6c42\u6700\u5927\u6280\u80fd\u6c34\u5e73\u548c\u3002\n\n**\u4e0d\u96be\u60f3\u5230\u662f\u52a8\u6001\u89c4\u5212!**\n\n\u4ee4 $dp[i]$ \u4e3a\u524d $i$ \u5934\u5976\u725b\u53ef\u4ee5\u8fbe\u5230\u7684\u6280\u80fd\u6c34\u5e73\u4e4b\u548c\u7684\u6700\u5927\u503c $,$ \u53ef\u5217\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$dp[i]=max(dp[j]+(i-j)*max(a[j]))$\n   \n\u5176\u4e2d$(max(0,i-k)\u2264j<i)$\n\n\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h> \nusing namespace std;\nconst int MAXN=1e4+7;\nint n,k,Max;\nint dp[MAXN],s[MAXN];\nint main() {\n\tscanf(\"%d%d\",&n,&k);\n\tfor (int i=1; i<=n; i++)\n\t\tscanf(\"%d\",&s[i]);\n\tfor (int i=1; i<=n; i++) {\n\t\tMax=s[i];\n\t\tdp[i]=dp[i-1]+s[i];\n\t\tfor (int j=1; j<k; j++)\n\t\t\tif (i-j>0) {\n\t\t\t\tMax=max(Max,s[i-j]);\n\t\t\t\tdp[i]=max(dp[i-j-1]+Max*(j+1),dp[i]);\n\t\t\t} else break;\n\t}\n\tprintf(\"%d\\n\",dp[n]); \n\treturn 0;\n}\n\n```\n\n\n\n",
        "postTime": 1549023702,
        "uid": 39544,
        "name": "fsq0726",
        "ccfLevel": 0,
        "title": "P5124 [USACO18DEC]Teamwork"
    },
    {
        "content": "**\u9898\u76ee\u5927\u6982\uff1a** \u4e00\u4e2a\u6570\u7ec4\uff1aa[1]\u3001a[2]\u2026\u2026a[n-1]\u3001a[n],\u4e00\u4e2a\u6570\u53ef\u4ee5\u628a\u9644\u8fd1\u8fde\u7eed\u51e0\u4e2a\u6bd4\u81ea\u5df1\u5c0f\u7684\u6570\u66f4\u4e3a\u81ea\u5df1\uff0c\u6240\u4ee5\u7b2c\u4e00\u60f3\u5230:\n## \u8d2a\u5fc3! ! ! \n\u6c42\u533a\u95f4\u6700\u5927\u503c\uff0c\u63a5\u7740\u4e0d\u96be\u60f3\u5230\u7528**\u52a8\u6001\u89c4\u5212**\n\n\u6570\u7ec4f[i]\uff1a\u8868\u793a\u524di\u4e2a\u6570\u80fd\u5f97\u7684\u6700\u5927\u503c\uff0cf[i]=f[i-j]+max{a[i-j+1]\u3001a[i-j+2]\u2026\u2026}*(i-j)\n$\\color{red}{(1<=j<=k)}$\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<iostream>\n#include<stdio.h>\n#include<fstream>\nusing namespace std;\nconst int N=10000+10;\nint n,k,ans[N],mx,a[N];\nint main()\n{\n\tcin>>n>>k;\n\tfor (int i=1;i<=n;i++)scanf(\"%d\",&a[i]);\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tans[i]=a[i];\n\t\tmx=a[i];//\u6700\u5927\u503c\u521d\u59cb\u5316\n\t\tfor (int j=i-1;(j>=0&&j>=i-k);j--)\n\t\t{\n\t\t    ans[i]=max(ans[j]+mx*(i-j),ans[i]);//\u5373\u4e0a\u9762\u7684\u52a8\u6001\u65b9\u7a0b\n\t\t\tmx=max(mx,a[j]);//\u66f4\u65b0\u6700\u5927\u503c\n\t\t}\n\t}\n\tcout<<ans[n]<<endl;\n\treturn 0;\n}\n\n```",
        "postTime": 1548062234,
        "uid": 56646,
        "name": "jun\u541b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5124 \u3010[USACO18DEC]Teamwork\u3011"
    },
    {
        "content": "\u8fd9\u5e94\u8be5\u662fgold\u4e2d\u6700\u7b80\u5355\u7684\u4e00\u9898\u5427\u3002\u3002  \n\u5b9a\u4e49$f[i]$\u4e3a\u524di\u5934\u5976\u725b\u53ef\u4ee5\u8fbe\u5230\u7684\u6280\u80fd\u6c34\u5e73\u4e4b\u548c\u7684\u6700\u5927\u503c  \n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5217\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b$$f[i]=max(f[j]+(i-j)*max(a[j]))$$ \n\u5176\u4e2d$(max(0,i-k)\\leq j<i) $  \n\u5177\u4f53\u8fd8\u662f\u89c1\u4ee3\u7801\u5427  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=10005;\nint n,k;\nll a[N],f[N];\nint main()\n{\n    cin>>n>>k;\n    for(int i=1;i<=n;i++) cin>>a[i];\n    for(int i=1;i<=n;i++){\n        ll mx=a[i];\n        for(int j=i-1;j>=0&&j>=i-k;j--){\n            mx=max(mx,a[j+1]);\n            f[i]=max(f[i],f[j]+mx*(i-j));\n        }\n    }\n    cout<<f[n];\n    return 0;\n}\n```",
        "postTime": 1545616986,
        "uid": 27030,
        "name": "ustze",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5124 \u3010[USACO12DEC]Teamwork\u3011"
    },
    {
        "content": "\u8003\u8651DP\u6c42\u89e3\u3002\n\n\u6211\u4eec\u4ee4$g[i]$\u4e3a\u5212\u5206\u597d\u524d$i$\u4e2a\u7684\u6700\u5927\u6280\u80fd\u6c34\u5e73\u548c\u3002\n\n\u6709$g[i]=\\max(g[j]+max(a_{j+1}...a_{i}))$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(knlog_2n)$\n\n~~\u53ef\u80fd\u9700\u8981\u5f00O2~~\n```\n#include<cstdio>\nconst int N=1e4+50;\nint g[N];\nint n,k,x,ans;\ninline int max(int u,int v){return u>v?u:v;}\nint tre[N<<3];\nvoid mktree(int now,int ls,int rs){\n\tif(ls==rs){\n\t\tscanf(\"%d\",&tre[now]);\n\t\treturn;\n\t}\n\tint noww=now<<1,nrs=ls+rs>>1;\n\tmktree(noww,ls,nrs);\n\tmktree(noww|1,nrs+1,rs);\n\ttre[now]=max(tre[noww],tre[noww|1]);\n}\nint gmax(int now,int ls,int rs,int zuo,int you){\n\tif(ls>you||rs<zuo)return 0;\n\tif(ls>=zuo&&rs<=you)return tre[now];\n\tint noww=now<<1,nrs=ls+rs>>1;\n\treturn max(gmax(noww,ls,nrs,zuo,you),gmax(noww|1,nrs+1,rs,zuo,you));\n}\nint main(){\n\tscanf(\"%d%d\",&n,&k);\n\tmktree(1,1,n);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=max(0,i-k);j<i;j++)\n\t\tg[i]=max(g[i],g[j]+(i-j)*gmax(1,1,n,j+1,i));\n\t}\n\tprintf(\"%d\\n\",g[n]);\n} \n```",
        "postTime": 1545571742,
        "uid": 50092,
        "name": "da32s1da",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P5124 \u3010\u300cUSACO 2018 December Gold\u300dTeamwork\u3011"
    }
]
[
    {
        "content": "\u5dee\u5206\u7ea6\u675f\u505a\u6cd5\u3002\n\n\u8bbe\u7b2c$r$\u884c\u7684\u64cd\u4f5c\u4f7f\u8fd9\u4e00\u884c\u7684\u6570\u589e\u52a0\u4e86$x_{r}$\uff0c\u7b2c$c$\u5217\u7684\u64cd\u4f5c\u4f7f\u8fd9\u4e00\u5217\u7684\u6570\u51cf\u5c11\u4e86$y_{c}$\uff0c\n\n\u90a3\u4e48\u663e\u7136\u5bf9\u4e8e\u7b2c$r$\u884c\u7b2c$c$\u5217\u7eff\u5b9d\u77f3\u7684\u5bc6\u7801$p$\uff0c\u6709$x_{r}-y_{c}=p$\n\n\u5373\uff1a$\\left\\{\\begin{matrix}x_{r}-y_{c}\\leq p\\\\x_{r}-y_{c}\\geq p\\end{matrix}\\right.$\n\n\u79fb\u9879\u5f97$\\left\\{\\begin{matrix}x_{r}-y_{c}\\leq p\\\\y_{c}-x_{r}\\leq -p\\end{matrix}\\right.$\n\n\u5bf9\u4e24\u4e2a\u4e0d\u7b49\u5f0f\u5206\u522b\u8fde\u8fb9$(r\\overset {p}{\\rightarrow}c+n)\\; ,\\; (c+n\\overset {-p}{\\rightarrow}r)$\uff0c\u5373\u53ef\u6784\u9020\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u3002\n\n\u56e0\u4e3a\u9898\u76ee\u53ea\u6c42\u89e3\u7684\u5b58\u5728\u6027\uff0c\u5224\u8d1f\u73af\u5373\u53ef\u3002\n\n\u8bb2\u89e3\u5230\u6b64\u4e3a\u6b62\u3002\u653e\u4ee3\u7801\u3002\n\n```cpp\n#include<cstdio>\n#include<queue>\n#define reg register\n#define MAXN 2019\nusing namespace std;\n\nstruct edge\n{int pre,dis,to;}e[5005];\nint n,m,k,s,ptr_e;\nbool have=false;\nint last[MAXN],dis[MAXN],inq[MAXN],vis[MAXN];\n\ninline void spfa()\n{\n\tdis[s]=0;\n\tqueue<int> q; \n\tfor(int i=1;i<=n+m;i++)\n\t\tdis[i]=0x23333333,inq[i]=vis[i]=0;\n\tq.push(s),vis[s]=1;\n\twhile(!q.empty())\n\t{\n\t\tint tmp=q.front();\n\t\tq.pop(),inq[tmp]=0;\n\t\tfor(reg int i=last[tmp];i;i=e[i].pre)\n\t\t{\n\t\t\tint v=e[i].to,w=e[i].dis;\n\t\t\tif(dis[v]>dis[tmp]+w)\n\t\t\t{\n\t\t\t\tif(vis[v]>=n+m)\n\t\t\t\t{\n\t\t\t\t\thave=true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdis[v]=dis[tmp]+w;\n\t\t\t\tif(!inq[v])\n\t\t\t\t{\n\t\t\t\t\t++vis[v],inq[v]=1;\n\t\t\t\t\tq.push(v);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\thave=false;\n\treturn;\n}\n\ninline void addedge(int u,int v,int d)//\u8fde\u8fb9\n{\n\te[++ptr_e].pre=last[u];\n\te[ptr_e].dis=d,e[ptr_e].to=v,last[u]=ptr_e;\n\treturn;\n}\n\ninline int qin()//\u5feb\u8bfb\n{\n\treg int ans=0,m=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9')\n\t{\n\t\tif(ch=='-')\n\t\t\tm=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tans=ans*10+(ch-'0');\n\t\tch=getchar();\n\t}\n\treturn(ans*m);\n}\n\nint main()\n{\n\tint t=qin();\n\twhile(t--)\n\t{\n\t\tn=qin(),m=qin(),k=qin();\n\t\tptr_e=0,s=n+m+1;\n\t\tlast[s]=0;\n\t\tfor(reg int i=1;i<=n+m;i++)\n\t\t\tlast[i]=0,addedge(s,i,0);\n\t\twhile(k--)\n\t\t{\n\t\t\tint u=qin(),v=qin(),d=qin();\n\t\t\taddedge(u,v+n,d),addedge(n+v,u,-d);\n\t\t}\n\t\tspfa();\n\t\tif(have)\n\t\t\tputs(\"No\");\n\t\telse\n\t\t\tputs(\"Yes\");\n\t}\n\treturn(0);\n}\n```\n[97msAC](https://www.luogu.org/recordnew/show/17424151)",
        "postTime": 1553090609,
        "uid": 14854,
        "name": "\u672a\u89c1\u5807\u5f00",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "## \u672c\u9898\u89e3\u540c\u6b65\u4e8e[\u535a\u5ba2\u56ed](https://www.cnblogs.com/tyqtyq/p/10387591.html)\n\nemmm\u5207\u4e86\u8fd1\u5e74\u7701\u9009\u9898\u6765\u5199\u9898\u89e3\u5566qwq\n\n\u8be5\u9898\u8f83\u5176\u4ed6\u7701\u9009\u9898\u8f83\u6c34\u5427\uff08\u5426\u5219\u6211\u518d\u600e\u4e48\u505a\u7684\u51fa\u6765\n\n\u601d\u8def\u662f\u56fe\u8bba\u505a\u6cd5\uff0c\u505a\u6cd5\u4e0a\u697c\u4e0a\u5927\u4f6c\u5df2\u7ecf\u8bb2\u7684\u5f88\u6e05\u695a\u4e86\uff0c\u6211\u6765\u8c08\u8c08\u4ee3\u7801\u5b9e\u73b0\u4e0a\u7684\u4e00\u4e9b\u7ec6\u8282\n\n$$\\text{\u8bbe\u8282\u70b91...2n\uff0ci}\\in\\text{1-n\u8868\u793ai\u884c\uff0ci}\\in\\text{(n+1)-2n\u65f6\u8868\u793ai-n\u5217}$$\n\n$$\\text{\u5f53\u6211\u4eec\u8bfb\u5230\u4e00\u9897\u7eff\u5b9d\u77f3(x,y,k)\u65f6\uff0c\u5c31\u4ecex\u5411y+n\u8fde\u4e00\u6761\u6743\u503c\u4e3ak\u7684\u8fb9}$$\n\n$$\\text{\u5f53\u6211\u4eec\u8fde\u5b8c\u8fb9\u540e\u4f1a\u53d1\u73b0\u7ed9\u4e00\u884c/\u4e00\u5217\u589e\u52a0a\u5c31\u76f8\u5f53\u4e8e\u628a\u4e0e\u8fd9\u4e2a\u70b9\u76f8\u8fde\u7684\u6240\u6709\u8fb9\u6743\u503c\u589e\u52a0a}$$\n\n$$\\text{\u8fd9\u4e2a\u52a0\u8fb9\u6743\u53ef\u4ee5\u8f6c\u5316\u4e3a\u52a0\u70b9\u6743}$$\n\n$$\\text{\u8bbe}onk_i\\text{\u8868\u793a\u5728\u8fd9\u4e2a\u8282\u70b9\u4e0a\u7684\u70b9\u51fb\u6b21\u6570\uff0c}$$\n\n$$\\text{\u641c\u7d22\u8d77\u59cb\u8282\u70b9\u7684\u521d\u503c\u4e3a\u4e0e\u8fd9\u4e2a\u8282\u70b9\u6240\u8fde\u8fb9\u4e2d\u6743\u503c\u6700\u5c0f\u7684}$$\n\n$$\\text{\u90a3\u4e48\u5df2\u77e5\u4e24\u70b9i,j\u4ee5\u53ca}edge_{i,j}\\text{\u548c}onk_i\\text{\uff0c\u90a3\u4e48\u7531\u9898\u76ee\u6761\u4ef6\u6613\u5f97}onk_j=edge_{i,j}-onk_i$$\n\n$$\\text{\u90a3\u4e48\u76f4\u63a5dfs}$$\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$$O(T\\times(KlogK+K)) = O(TNlogN)$$\u8981\u6539\u8fdb\u4e5f\u884c\uff0c\u56e0\u4e3a\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u6240\u8fde\u8fb9\u53ea\u8981\u8fb9\u6743\u6700\u5c0f\u6570\u6240\u4ee5\u6ca1\u5fc5\u8981sort\uff0c\u4f46\u5f53\u6211\u60f3\u5230\u8fd9\u4e00\u70b9\u65f6\u5df2\u7ecfAC\u672c\u9898~\n\n$$Talk\\;is\\;free\\;,\\;show\\;me\\;the\\;code$$\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<vector>\n#include<algorithm>\n#include<cstring>\n#define MAXN 1005\nusing namespace std ;\ninline void read(int &x) {\n\tscanf(\"%d\",&x) ;\n}\nclass getsol {\n\tpublic:\n\t\t//========data========\n\t\tvector<pair<int,int> > edge[MAXN*2] ; //pair\u7b2c\u4e00\u7ef4\u662f\u8fb9\u6743\uff0c\u7b2c\u4e8c\u7ef4\u662f\u5230\u8fbe\u8fb9\u7684\u7f16\u53f7\n\t\tint n , m , k , onk[MAXN*2] , inq[MAXN*2] , flag ;//inq\u8868\u793a\u662f\u5426\u88ab\u641c\u5230\n\t\t//========func========\n\t\tvoid add(int x,int y,int v) {\n\t\t\tedge[x].push_back(make_pair(v,y)) ; //\u52a0\u8fb9\n\t\t}\n\t\tbool check(int u,int v,int w) {\n\t\t\t//check , \u5224\u65adv\u70b9\u662f\u5426\u53ef\u884c\n\t\t\tif(onk[u]+onk[v]!=w) return 0 ;\n\t\t\treturn 1 ;\n\t\t}\n\t\tvoid dfs(int D) {\n\t\t\t//cout<<\"DFS : START SEARCH IN DOT \"<<D<<endl ;\n\t\t\tif(flag==0) return ;\n\t\t\tinq[D] = 1 ;\n\t\t\tfor(auto& i : edge[D]) { //\u5bf9\u4e8e\u6bcf\u4e2aedge[D]\u4e2d\u7684\u5143\u7d20i\n\t\t\t\t///cout<<\"DFS : SEARCH IN DOT \"<<i.second<<endl ;\n\t\t\t\tif(flag==0) return ;\n\t\t\t\t//cout<<\"In dot : \"<<i.second<<endl ;\n\t\t\t\tint ver = i.second , edgeval = i.first ;\n\t\t\t\tif(inq[ver]) {\n\t\t\t\t\tif(flag==1) //\u5982\u679c\u7b54\u6848\u8fd8\u662f\"Yes\"\u90a3\u4e48\u66f4\u65b0\uff0c\u8fd9\u91cc\u662f\u4e00\u4e2a\u4f18\u5316~\n\t\t\t\t\t\tflag = check(D,ver,edgeval) ;\n\t\t\t\t\tcontinue ;\n\t\t\t\t} else {\n\t\t\t\t\tonk[ver] = edgeval-onk[D] ;\n\t\t\t\t\tdfs(ver) ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvoid PRINT(int* arr,int n) {\n\t\t\tfor(int i=1; i<=n; ++i) {\n\t\t\t\tcout<<\"arr[\"<<i<<\"] = \"<<arr[i]<<endl ;\n\t\t\t}\n\t\t}\n\t\tvoid sol() {\n\t\t\tflag = true ;\n\t\t\tread(n) , read(m) , read(k) ;\n\t\t\t//\u884c\u7684\u7f16\u53f7\u4e3a1~n\n\t\t\t//\u5217\u7684\u7f16\u53f7\u4e3a(n+1)~(2*n)\n\t\t\t//\u55b5~\n\t\t\tfor(int i=1; i<=k; ++i) {\n\t\t\t\tint x,y,v ;\n\t\t\t\tread(x) , read(y) , read(v) ;\n\t\t\t\tadd(x,y+n,v) ;\n\t\t\t\tadd(y+n,x,v) ;\n\t\t\t}\n\t\t\t//cerr<<\"FINISH READ\"<<endl ;\n\t\t\tfor(int i=1; i<=2*n; ++i) sort(edge[i].begin(),edge[i].end()) ;\n\t\t\t//cerr<<\"FINISH SORT\"<<endl ;\n\t\t\tfor(int i=1; i<=2*n; ++i) {\n\t\t\t\tif(!inq[i]&&flag&&!edge[i].empty()) { // \u6ce8\u610f\u8fd9\u91cc\u5224\u4e00\u4e0bvector\u662f\u5426\u4e3a\u7a7a\u3002\u3002\u56e0\u4e3a\u8fd9\u4e2aRE\u4e86\u4e24\u4e09\u6b21\n\t\t\t\t\tonk[i] = (*edge[i].begin()).first ;\n\t\t\t\t\t//cerr<<\"SEARCH IN DOT \"<<i<<endl ;\n\t\t\t\t\tdfs(i) ;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(flag==1) {\n\t\t\t\tfor(int i=1; i<=2*n; ++i)\n\t\t\t\t\tfor(auto& j : edge[i])\n\t\t\t\t\t\tif(flag==1) //\u91cd\u65b0check\u4e00\u904d\uff0c\u4ee5\u514d\u9057\u6f0f\n\t\t\t\t\t\t\tflag = check(i,j.second,j.first) ;\n\t\t\t}\n\t\t\tif(flag) puts(\"Yes\") ;\n\t\t\telse puts(\"No\") ;\n\t\t\t//PRINT(onk,2*n) ;\n\t\t}\n\t\tvoid clear() {\n\t\t\tfor(int i=1; i<=2*n; ++i) edge[i].clear() ;\n\t\t\tmemset(inq,0,sizeof(onk)) ;\n\t\t\tmemset(onk,0,sizeof(onk)) ;\n\t\t\tn = m = k = flag = 0 ;\n\t\t}\n} ;\ngetsol M ;\nint T ;\nint main() {\n\t//freopen(\"solo3.in\" , \"rb\" , stdin) ;\n\t//freopen(\"solo3.out\", \"wb\" ,stdout) ;\n\tread(T) ;\n\twhile(T--) M.sol() , M.clear() ;\n}\n```\n\n\u6ce8\u610f\u672c\u4ee3\u7801\u662f\u4f7f\u7528C++11\u6807\u51c6\u5199\u6210\uff0c\u4ee3\u7801\u4e2d\u4e0d\u540c\u4e0d\u540c\u8bed\u6cd5\u5904\u5df2\u6807\u6ce8",
        "postTime": 1550221672,
        "uid": 133345,
        "name": "lightup37",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "$update$ $on$ $2020.4.19$ $:$ \u4ee3\u7801\u6709\u9505$,$\u6240\u4ee5\u4fee\u4e00\u4e0b$.$\n\n\u6bcf\u4e2a\u7eff\u5b9d\u77f3\u5bf9\u5e94\u4e00\u4e2a\u9650\u5236 $t[x][y] = row[x] + col[y]$\n\n\u5176\u4e2d $row[x]$ \u4e3a\u884c\uff0c$col[y]$ \u4e3a\u5217\u3002\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u5bf9\u4e8e\u4e24\u4e2a\u540c\u884c\u7684\u7eff\u5b9d\u77f3 $(a,b,c)$ \u548c $(a,d,e)$\uff0c\n\n\u6709 $t[a][b] - t[a][d] = col[b] - col[d]$;\n\n\u5bf9\u4e8e$row[]$\u540c\u7406\u3002\n\n\u7136\u540e\u5224\u65ad\u662f\u5426\u5b58\u5728\u5408\u6cd5\u7684 $row[]$ \u548c $col[]$ \u5373\u53ef$.$\n\n\u56e0\u4e3a\u6211\u4eec\u6c42\u51fa\u4e86 $row[]$ \u548c $col[]$ \u5185\u90e8\u7684\u5dee$,$\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5$dfs$\u6765$check.$\n\n\u56e0\u4e3a $n,m,k<=1000$ \u6240\u4ee5\u6211\u4e3a\u4e86\u7701\u4e8b\u6ca1\u5199$O(n+m+k),$\u76f4\u63a5$O(n^2+m^2+k^2)$\u4e86.\n\n\u4ee3\u7801$($ **$updated$** $)$\uff1a\n\n```cpp\n\n#include <bits/stdc++.h>\nusing namespace std;\ntemplate <typename T> void read(T &x){\n\tx = 0; int f = 1; char ch = getchar();\n\twhile (!isdigit(ch)) {if (ch == '-') f = -1; ch = getchar();}\n\twhile (isdigit(ch)) {x = x * 10 + ch - '0'; ch = getchar();}\n\tx *= f;\n}\nconst int N = 1005,M = 1005,K = 1005;\nint n,d1[N][N]; bool vis1[N][N];\nint m,d2[M][M]; bool vis2[M][M];\n\nbool flag1; bool vis[N]; int val[N];\n\n\ninline void dfs1(int x){\n\tvis[x] = 1;\n\tfor (int y = 1,v; y <= n; ++y) if (vis1[x][y]){\n\t\tv = val[x] + d1[x][y];\n\t\tif (!vis[y]) val[y] = v,dfs1(y);\n\t\telse if (val[y] != v) flag1 = 0;\n\t}\n}\ninline bool check1(){\n\tint i,j;\n\tfor (i = 1; i <= n; ++i) vis[i] = 0;\n\tflag1 = 1;\n\tfor (i = 1; i <= n; ++i) if (!vis[i]) vis[i] = 1,val[i] = 0,dfs1(i);\n\treturn flag1;\n}\nbool flag2;\ninline void dfs2(int x){\n\tvis[x] = 1;\n\tfor (int y = 1,v; y <= m; ++y) if (vis2[x][y]){\n\t\tv = val[x] + d2[x][y];\n\t\tif (!vis[y]) val[y] = v,dfs2(y);\n\t\telse if (val[y] != v) flag2 = 0;\n\t}\n}\ninline bool check2(){\n\tint i,j;\n\tfor (i = 1; i <= m; ++i) vis[i] = 0,val[i] = 0;\n\tflag2 = 1;\n\tfor (i = 1; i <= m; ++i) if (!vis[i]) vis[i] = 1,val[i] = 0,dfs2(i);\n\treturn flag2;\n}\n\nbool flag; int k,x[K],y[K],v[K];\ninline void Ins1(int x,int y,int v){\n\tif (!vis1[x][y]) vis1[x][y] = 1,d1[x][y] = v;\n\telse if (d1[x][y] != v) flag = 0;\n}\ninline void Ins2(int x,int y,int v){\n\tif (!vis2[x][y]) vis2[x][y] = 1,d2[x][y] = v;\n\telse if (d2[x][y] != v) flag = 0;\n}\ninline bool solve(){\n\tint i,j;\n\tread(n),read(m),read(k),flag = 1;\n\tfor (i = 1; i <= k; ++i) read(x[i]),read(y[i]),read(v[i]);\n\tfor (i = 1; i <= n; ++i) for (j = 1; j <= n; ++j) vis1[i][j] = 0;\n\tfor (i = 1; i <= m; ++i) for (j = 1; j <= m; ++j) vis2[i][j] = 0;\n\tfor (i = 1; i <= n; ++i) Ins1(i,i,0);\n\tfor (i = 1; i <= m; ++i) Ins2(i,i,0);\n\tfor (i = 1; i <= k; ++i) for (j = i+1; j <= k; ++j){\n\t\tif (x[i] == x[j]){\n\t\t\tIns2(y[i],y[j],v[j]-v[i]);\n\t\t\tIns2(y[j],y[i],v[i]-v[j]);\n\t\t}\n\t\tif (y[i] == y[j]){\n\t\t\tIns1(x[i],x[j],v[j]-v[i]);\n\t\t\tIns1(x[j],x[i],v[i]-v[j]);\n\t\t}\n\t}\n\tif (!flag) return 0;\n\treturn check1() && check2();\n}\n\nint main(){\n\tint T; read(T); while (T--) puts(solve() ? \"Yes\" : \"No\");\n\treturn 0;\n}\n\n```",
        "postTime": 1531052701,
        "uid": 52518,
        "name": "s_r_f",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "[$\\text{Link}$](https://www.luogu.com.cn/problem/P4578)\n## \u9898\u610f\n\u7ed9\u51fa $n\\times m$ \u7684\u77e9\u9635\u4e2d $k$ \u4e2a\u6570\uff0c\u8bb0\u4e3a $x_i,y_i,v_i$\uff0c\u95ee\u6709\u6ca1\u6709\u5e8f\u5217 $p,q$ \u6ee1\u8db3 $v_i=p_{x_i}+q_{y_i}$\u3002\n\n$n,m,k\\le1000$\u3002\n## \u601d\u8def\n\u5b66\u6821\u6a21\u62df\u8d5b\u9898\uff0c\u4e00\u773c\u5dee\u5206\u7ea6\u675f\uff0c\u4e0d\u8fc7\u6211\u5fd8\u4e86\u548b\u5199\u3002\u4e8e\u662f\u60f3\u51fa\u4e86\u4e00\u79cd\u4e0d\u540c\u7684\u89e3\u6cd5\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u884c\u3001\u5217\u4e4b\u95f4\u7684\u5dee\uff0c\u5982 $a_{i,j}=p_i+q_j,a_{i,j'}=p_i+q_{j'},a_{i,j}-a_{i,j'}=q_j-q_{j'}$\u3002\u7528\u8fd9\u6837\u7684\u65b9\u6cd5\u53ef\u4ee5\u8bb0\u5f55\u5217\u4e0e\u5217\u4e4b\u95f4\u7684\u5dee\uff0c\u540c\u7406\u53ef\u4ee5\u8bb0\u5f55\u884c\u4e0e\u884c\u4e4b\u95f4\u7684\u5dee\uff0c\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u53d1\u73b0\u539f\u5148\u8bb0\u5f55\u7684\u4e0e\u73b0\u5728\u65b0\u53d1\u73b0\u7684\u4e0d\u4e00\u6837\uff0c\u5219\u4e3a `No`\uff0c\u5426\u5219\u4e3a `Yes`\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(k^2)$\u3002\n\n\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nconst int N=1e3+10;\nint T,n,m,k;\nint cnt,mat[N][N],h[N][N],l[N][N];\ninline void init(){\n\tmemset(mat,-1,sizeof(mat));\n\tmemset(h,-1,sizeof(h));\n\tmemset(l,-1,sizeof(l));\n}\nstruct point{\n\tint x,y,v;\n}addi[N];\nint main(){\n\tT=read();\n\twhile(T--){\n\t\tn=read(),m=read(),k=read();\n\t\tinit();\n\t\tbool fl=0;\n\t\tfor(int i=1;i<=k;i++){\n\t\t\tint x=read(),y=read(),v=read();\n\t\t\tif((~mat[x][y])&&mat[x][y]!=v){\n\t\t\t\tputs(\"No\");\n\t\t\t\tfl=1;\n\t\t\t}\n\t\t\tmat[x][y]=v;\n\t\t\taddi[i]=(point){x,y,v};\n\t\t}\n\t\tif(fl) goto nxt;\n\t\tfor(int A=1;A<=k;A++){\n\t\t\tfor(int B=1;B<=k;B++){\n\t\t\t\tif(A!=B){\n\t\t\t\t\tint i=addi[A].x,j=addi[A].y;\n\t\t\t\t\tint ii=addi[B].x,jj=addi[B].y;\n\t\t\t\t\tif(j==jj){\n\t\t\t\t\t\tif((~h[i][ii])&&h[i][ii]!=mat[ii][j]-mat[i][j]){\n\t\t\t\t\t\t\tputs(\"No\");\n\t\t\t\t\t\t\tgoto nxt;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\th[i][ii]=mat[ii][j]-mat[i][j];\n\t\t\t\t\t\t\th[ii][i]=mat[i][j]-mat[ii][j];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tif(i==ii){\n\t\t\t\t\t\tif((~l[j][jj])&&l[j][jj]!=mat[i][jj]-mat[i][j]){\n\t\t\t\t\t\t\tputs(\"No\");\n\t\t\t\t\t\t\tgoto nxt;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tl[j][jj]=mat[i][jj]-mat[i][j];\n\t\t\t\t\t\t\tl[jj][j]=mat[i][j]-mat[i][jj];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tputs(\"Yes\");\n\t\tnxt:;\n\t}\n\treturn 0;\n}\n```\n\u518d\u89c1 qwq~",
        "postTime": 1620197782,
        "uid": 365127,
        "name": "cyffff",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4578\u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u6b22\u8fce\u8bbf\u95ee\u6211\u7684\u535a\u5ba2\uff5e https://www.cnblogs.com/luyouqi233/p/9145394.html\n\n\u66f4\u65b0\u4e86\u4e00\u4e0b\u8bc1\u660e\u4e0e\u7cfb\u7edf\u5316\u9898\u89e3\u4e0e\u4ee3\u7801\uff08\u4e0d\u7136\u770b\u7740\u4e0d\u65b9\u4fbf\uff09\uff0c\u5982\u6709\u9519\u8bef\u8fd8\u8bf7\u6307\u51fa\u3002\n_______________________\n\n\u524d\u7f6e\uff1a\n\n\u5148\u8f6c\u6362\u6210\u56fe\u8bba\u6a21\u578b\uff0c\u5373\u6bcf\u4e2a\u7eff\u5b9d\u77f3\uff0c\u6a2a\u5750\u6807\u5411\u7eb5\u5750\u6807\u8fde\u8fb9\uff0c\u6743\u503c\u4e3a\u7eff\u5b9d\u77f3\u8981\u7684\u6570\u3002\n\n\u7136\u540e\u5c31\u53d8\u6210\u4e86\u6bcf\u4e2a\u70b9\uff0c\u6211\u6309\u4e00\u4e0b\u53ef\u4ee5\u4f7f\u5f97\u4e0e\u5b83\u76f8\u8fde\u7684\u8fb9\u90fd$+1/-1$\uff0c\u95ee\u80fd\u5426\u4f7f\u56fe\u8fb9\u6743\u5168\u90e8\u53d8\u6210$0$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u987a\u5176\u81ea\u7136\u7684\u5f00\u4e2a$del[i]$\u8868\u793a$i$\u8fd9\u4e2a\u70b9\u9700\u8981\u5220\u591a\u5c11\u6b21\u624d\u80fd\u7b26\u5408\u7b54\u6848\uff0c\u663e\u7136\u7684\u5bf9\u4e8e\u6bcf\u6761\u8fb9$(u,v,w)$\u90fd\u8981\u6709$del[u]+del[v]==w$\u3002\n\n\u66f4\u8fdb\u4e00\u6b65\uff1a\n\n\u6211\u4eec\u601d\u8003\u82e5\u539f\u56fe\u4e3a\u4e00\u68f5\u6811\u4f1a\u4e0d\u4f1a\u597d\u505a\u4e9b\u3002\n\n\u6c42\u8bc1\uff1a**\u5bf9\u4e8e\u8fde\u8fb9\u60c5\u51b5\u4e3a\u4e00\u68f5\u6811\u6765\u8bf4\uff0c\u5f53\u4e00\u4e2a\u7ed3\u70b9\u7684$del$\u56fa\u5b9a\u65f6\uff0c\u6709\u4e14\u53ea\u6709\u552f\u4e00\u89e3\u3002**\n\n\u8bc1\u660e\uff1a\u4ee4\u8be5\u8282\u70b9\u4e3a\u6839\uff0c\u6839\u5c42\u4e3a$0$\u5c42\uff0c\u5f80\u4e0b\u4e3a$1$\u5c42\uff0c$2$\u5c42\u2026\u2026\n\n\u7531$del[u]+del[v]==w$\u53ef\u77e5\u4e09\u4e2a\u503c\u77e5\u9053\u4e24\u4e2a\u5373\u53ef\u6c42\u7b2c\u4e09\u4e2a\uff0c\u6240\u4ee5$0$\u5c42\u7684$del$\u5b9a\u4e0b\u6765\u540e$1$\u5c42\u7684\u5c31\u5b9a\u4e86\uff0c\u4e4b\u540e$2$\u5c42\u7684\u5c31\u5b9a\u4e86\u2026\u2026\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n\u4e5f\u56e0\u6b64\uff0c\u6211\u4eec\u5982\u679c\u5bf9\u6839\u7684$del+k$\u7684\u8bdd\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u5947\u6570\u5c42$del$\u5c31\u8981$-k$\uff0c\u6bcf\u4e00\u5076\u6570\u5c42\u5c31\u8981$+k$\u3002\u6211\u4eec\u7528\u8fd9\u4e00\u6027\u8d28\u53ef\u4ee5\u6784\u9020\u51fa\u6240\u6709\u7684\u89e3\u3002\n\n\u4e4b\u540e\u5bf9\u4e8e\u975e\u6811\u8fb9\uff0c**\u6709\u4e14\u53ea\u6709\u5947\u5c42\u4e0e\u5076\u5c42\u7684\u70b9\u8fde\u8fb9**\u8fd9\u4e00\u79cd\u60c5\u51b5\u3002\uff08\u56e0\u4e3a\u6c38\u8fdc\u90fd\u662f\u6a2a\u7eb5\u76f8\u8fde\uff0c\u6240\u4ee5\u5947\u5947\u8fb9\u548c\u5076\u5076\u8fb9\u662f\u4e0d\u5b58\u5728\u7684\uff09\n\n\u800c\u53c8\u56e0\u4e3a**\u5bf9\u4e8e\u5947\u6570\u5c42\u548c\u5076\u6570\u5c42\u975e\u6811\u8fb9\u6765\u8bf4\u4e24\u70b9\u7684$del$\u548c\u6c38\u8fdc\u4e0d\u53d8**\uff08\u4e00\u4e2a$+k$\u4e00\u4e2a$-k$\u62b5\u6d88\u4e86\uff09\uff0c\u6240\u4ee5\u901a\u8fc7\u5b83\u4eec\u4e0e\u8fb9\u6743\u7684\u6bd4\u8f83\u6211\u4eec\u5c31\u53ef\u4ee5\u5224\u65ad\u7b54\u6848\u5408\u6cd5\u6027\u3002\n\n\u4ee5\u53ca\u6211\u4eec\u4e5f\u56e0\u6b64\u8bba\u8bc1\u4e86\u5bf9\u4e8e\u6700\u5f00\u59cb\u7684$del$\u5b9a\u4ec0\u4e48\u90fd\u65e0\u6240\u8c13\uff0c\u6240\u4ee5\u5c31\u5b9a$0$\u5457\uff0c\u4f55\u4e50\u800c\u4e0d\u4e3a\u5462\uff1f\n\n\u540e\u8bb0\uff1a\n\n\u9898\u89e3\u6700\u5f00\u59cb\u6bd4\u8f83\u610f\u8bc6\u6d41\uff0c\u6ca1\u6709\u8be6\u7ec6\u7684\u8bc1\u660e\uff0c\u6240\u4ee5\u4fee\u6b63\u4e00\u4e0b\u3002\n\n\u672c\u4eba\u5199\u8fd9\u4e2a\u535a\u5ba2\u65f6\u5df2\u7ecf\u662f\u9000\u5f79\u4e00\u5e74OIER\uff0c\u56e0\u6b64\u5982\u679c\u6709\u758f\u6f0f\u8bf7\u6307\u51fa\u3002\n\n\u5e0c\u671b\u5ba1\u6838\u7ed9\u8fc7\u5427\u2026\u2026\u6211\u539f\u672c\u6539\u4e86\u4e00\u904d\u9898\u89e3\u7ed3\u679c\u4e00\u5929\u6ca1\u5ba1\u6838\u5b8c\u6240\u4ee5\u5e72\u8106\u91cd\u5199\u4e86\u4e00\u904d\u3002\n\n\u4e0d\u8fc7\u8fd9\u9898\u4f5c\u4e3a\u4e3a\u6570\u4e0d\u591a\u81ea\u5df1\u505a\u51fa\u6765\u7684\u7701\u9009\u9898\u679c\u7136\u4e0d\u7b97\u592a\u96be\uff0c\u6bd5\u7adf\u610f\u8bc6\u6d41\u60f3\u6cd5\u662f\u5bf9\u7684\u6240\u4ee5\u53cd\u7740\u8bc1\u660e\u5c31\u6ca1\u6709\u4ec0\u4e48\u96be\u5ea6\u4e86\u2026\u2026\u5927\u6982\uff1f\n\n```cpp\n#include<cmath>\n#include<stack>\n#include<queue>\n#include<cstdio>\n#include<cctype>\n#include<vector>\n#include<cstdlib>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N=2005;\ninline ll read(){\n    ll X=0,w=0;char ch=0;\n    while(!isdigit(ch)){w|=ch=='-';ch=getchar();}\n    while(isdigit(ch))X=(X<<3)+(X<<1)+(ch^48),ch=getchar();\n    return w?-X:X;\n}\nstruct node{\n    int to,nxt,w;\n}e[N];\nint n,m,k,cnt,head[N],del[N];\nbool vis[N];\nqueue<int>q;\ninline void add(int u,int v,int w){\n    e[++cnt].to=v;e[cnt].w=w;e[cnt].nxt=head[u];head[u]=cnt;\n}\nbool bfs(int s){\n    while(!q.empty())q.pop();\n    q.push(s);vis[s]=1;\n    while(!q.empty()){\n    int u=q.front();q.pop();\n    for(int i=head[u];i;i=e[i].nxt){\n        int v=e[i].to,w=e[i].w;\n        if(vis[v]){\n        if(del[u]+del[v]!=w)return 0;\n        }else{\n        del[v]=w-del[u];\n        vis[v]=1;\n        q.push(v);\n        }\n    }\n    }\n    return 1;\n}\nint main(){\n    int T=read();\n    while(T--){\n    memset(vis,0,sizeof(vis));\n    memset(head,0,sizeof(head));\n    cnt=0;\n    n=read(),m=read(),k=read();\n    for(int i=1;i<=k;i++){\n        int u=read(),v=read(),w=read();\n        add(u,v+n,w);add(v+n,u,w);\n    }\n    bool ans=1;\n    for(int i=1;i<=n+m;i++){\n        if(!vis[i])ans&=bfs(i);\n    }\n    if(ans)puts(\"Yes\");\n    else puts(\"No\");\n    }\n    return 0;\n}\n```\n",
        "postTime": 1528270720,
        "uid": 36276,
        "name": "w36557658",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u539f\u9898\u4f20\u9001\u95e8\uff1a[P4578 [FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf](https://www.luogu.com.cn/problem/P4578)\n\n\u5b9a\u4e49 $a[i][j]$ \u4e3a\u7b2c $i$ \u884c\uff0c\u7b2c $j$ \u5217\u7684\u5bc6\u7801\u3002\n\n\u5b9a\u4e49 $ val[i] ,(1 \\leq i \\leq n)$ \u4e3a\u7b2c $i$ \u884c\u7684\u65cb\u8f6c\u6b21\u6570\uff0c$ val[j] ,(n+1 \\leq j \\leq 2n)$ \u4e3a\u7b2c $j$ \u5217\u7684\u65cb\u8f6c\u6b21\u6570\u3002\u5de6\u65cb\u4e3a\u6b63\uff0c\u53f3\u65cb\u4e3a\u8d1f\u3002\n\n\u8bfb\u9898\u540e\uff0c\u53ef\u4ee5\u53d1\u73b0\u9898\u76ee\u4ea4\u4ee3\u4e86\u6211\u4eec\u7684\u6761\u4ef6\u5373\u4e3a\uff1a\u5bf9\u4e8e\u7ed9\u5b9a\u7684 $x,y,c$ \uff0c\u8bbe\u8be5\u7ec4\u6570\u636e\u8868\u793a\u7684\u5373\u4e3a $a_{x,y}=c$ \u5e76\u4e14 $val[x]+val[y+n]=c$ \uff0c\u5219\u6211\u4eec\u53d1\u73b0\u8fd9\u4e00\u4e2a\u70b9\u5c06 $val[x]$ \u4e0e $val[y+n]$ \u8054\u7cfb\u8d77\u6765\u3002\n\n\u8003\u8651 $k$ \u7ec4\u6570\u636e\u5c31\u4ea7\u751f\u4e86 $k$ \u7ec4\u8054\u7cfb\uff0c\u6bcf\u7ec4\u53ea\u4f1a\u5c06\u67d0\u4e00\u884c\u4e0e\u67d0\u4e00\u5217\u8054\u7cfb\u8d77\u6765\uff0c\u800c\u884c\u4e0e\u884c\uff0c\u5217\u4e0e\u5217\u4e4b\u95f4\u5e76\u65e0\u8054\u7cfb\u3002\u7528\u70b9\u63cf\u8ff0\u884c\u6216\u5217\u7684 $val$ \uff0c\u800c\u7528\u8fb9\u63cf\u8ff0\u8fd9\u79cd\u8054\u7cfb\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u8fd9\u6784\u6210\u4e86\u4e00\u4e2a\u4e8c\u5206\u56fe\u3002\n\n\u91c7\u7528\u65e0\u5411\u8fb9\u7684\u8fde\u63a5\u65b9\u5f0f\uff0c\u6211\u4eec\u53d1\u73b0\u6b64\u56fe\u53ef\u5206\u5272\u6210\u4e92\u4e0d\u5e72\u6d89\u7684\u8054\u901a\u5757\u3002\u56e0\u6b64\u5bf9\u6bcf\u4e2a\u8054\u901a\u5757\u5355\u72ec\u8003\u8651\uff0c\u4e14\u53ea\u6709\u5f53\u6240\u6709\u8054\u901a\u5757\u6709\u5408\u6cd5\u89e3\u662f\u8f93\u51fa $\\text {Yes}$ \uff0c\u5426\u5219\u4e3a $\\text {No}$ \u3002\n\n\u5bf9\u8054\u901a\u5757\u5185\u7684\u70b9\uff0c\u8003\u8651\u4ece\u67d0\u4e00\u70b9 $u$ \u5f00\u59cb\uff0c\u4e0d\u59a8\u8bbe\u8be5\u70b9\u7684 $val[u]$ \u4e3a $m$ \uff0c\u5219\u8be5\u70b9\u6240\u8fde\u53e6\u4e00\u70b9 $v$ \u5fc5\u987b\u6ee1\u8db3 $val[v]=c-m$ \u5176\u4e2d $c$ \u4e3a\u8054\u7cfb\u4e24\u4e2a\u70b9\u7684\u8fb9\u7684\u6743\u503c\u3002\n\n\u82e5 $v$ \u4e4b\u524d\u672a\u88ab\u8bbf\u95ee\u8fc7\uff0c\u6211\u4eec\u5c06\u5176\u8bb0\u5f55\u4e0b\u5e76\u7ee7\u7eed\u8fdb\u884c\u6df1\u641c\u3002\u82e5\u8bbf\u95ee\u8fc7\uff0c\u4e14\u4e0e\u5f53\u524d\u60c5\u51b5\u4e0d\u51b2\u7a81\uff0c\u5373\u4e4b\u524d\u8bb0\u5f55\u7684 $val[u]$ \u4e0e\u76ee\u524d\u672c\u5c06\u8d4b\u503c\u7684\u76f8\u7b49\uff0c\u5219\u4e0d\u5fc5\u904d\u5386\u7b2c\u4e8c\u904d\u3002\u5426\u5219\u4ea7\u751f\u51b2\u7a81\uff0c\u65e0\u5408\u6cd5\u89e3\u3002\n\n\u6211\u4eec\u8003\u8651\u5230\u6bcf\u7ecf\u8fc7\u4e00\u6761\u8fb9\uff0c $m$ \u7684\u9879\u53ea\u4f1a\u4e58\u4e0a $-1$ \uff0c\u800c\u5269\u4e0b\u7684\u53ea\u662f\u5e38\u6570\u9879\u7684\u52a0\u51cf\uff0c\u5219\u53ef\u4ee5\u60f3\u8c61\u5230\u6709\u5408\u6cd5\u89e3\u7684\u7ed3\u679c\u5c31\u662f\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u90fd\u80fd\u4e14\u4ec5\u80fd\u7528 $m$ \u5199\u6210\u4ee5 $km+b$ \u7684\u5f62\u5f0f\uff0c\u5176\u4e2d $k \\in \\{ 1,-1 \\}$ \u3002\u540c\u65f6\u7531\u4e8e\u4e8c\u5206\u56fe\u7684\u6027\u8d28\uff0c\u6211\u4eec\u77e5\u9053\u4e86 $k$ \u5bf9\u4e8e\u67d0\u4e00\u70b9\u4e5f\u662f\u786e\u5b9a\u7684\uff0c\u5219\u6211\u4eec\u53ef\u4ee5\u5f97\u77e5\u4ece\u4efb\u610f\u4e00\u70b9\u51fa\u53d1\u90fd\u53ef\u4ee5\u5f97\u5230\u7c7b\u4f3c\u7684\u7ed3\u679c\u3002\u6bcf\u4e2a\u70b9\u90fd\u662f\u5e73\u7b49\u7684\u3002\n\n\u4ece\u800c\u82e5\u4e00\u4e2a\u8054\u901a\u5757\u5185\u6709\u5408\u6cd5\u89e3\uff0c\u4e00\u5b9a\u53ef\u4ee5\u7528\u4ee5\u4e0a\u7684\u5f62\u5f0f\u8fdb\u884c\u8868\u8fbe\u3002\u540c\u65f6\u8be5\u5757\u5185\u70b9\u7684 $val$ \u4e5f\u4e00\u5b9a\u542b\u6709 $m$ \u3002\u4e0d\u59a8\u53d6 $m=0$ \uff0c\u8fd9\u5e76\u4e0d\u5f71\u54cd\u6211\u4eec\u7684\u64cd\u4f5c\uff0c\u56e0\u4e3a\u4e00\u6761\u8fb9\u8fde\u63a5\u7684\u4e24\u4e2a\u70b9\u662f\u5728\u4e8c\u5206\u56fe\u4e2d\uff0c\u4e24\u70b9 $m$ \u7684 $k$ \u6070\u597d\u4e00\u6b63\u4e00\u8d1f\u3002\n\n\u4ee5\u4e0a\u5c31\u662f\u672c\u9898\u7684\u89e3\u6cd5\uff0c\u540c\u65f6\u6211\u4eec\u8fd8\u53ef\u4ee5\u53d1\u73b0\uff0c\u6309\u7167\u4e0a\u6587\u64cd\u4f5c\u540e\uff0c\u5e38\u6570\u9879\u7684\u52a0\u51cf\u7ecf\u5386\u4e0d\u8d85\u8fc7 $2000$ \u6761\u8fb9\uff0c\u8fd9\u4e0e\u6570\u636e\u8303\u56f4\u4e2d $|c| \\leq 1e6$ \u6070\u597d\u5951\u5408\uff0c\u5373\u4e3a\u6211\u4eec\u53ea\u7528\u5f00 $\\text {int}$ \u5373\u53ef\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=2e3+5;\nint T,n,m,k,cnt,val[MAXN],head[MAXN];\nbool vis[MAXN],pas;\nstruct node{\n\tint to,nex,val;\n}e[MAXN];\nvoid add(int u,int v,int w){e[++cnt].to=v,e[cnt].val=w,e[cnt].nex=head[u],head[u]=cnt;}\nvoid dfs(int u){\n\tvis[u]=1;\n\tfor(int i=head[u];i;i=e[i].nex){\n\t\tint v=e[i].to;\n\t\tif(!vis[v])val[v]=e[i].val-val[u],dfs(v);\n\t\telse if(val[u]+val[v]!=e[i].val){pas=1;return;}\n\t}\n}\nint main(){\n\tint u,v,w;\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tmemset(head,0,sizeof(head));\n\t\tmemset(vis,0,sizeof(vis));\n\t\tcnt=0,pas=0;\n\t\tscanf(\"%d%d%d\",&n,&m,&k);\n\t\tfor(int i=1;i<=k;++i){\n\t\t\tscanf(\"%d%d%d\",&u,&v,&w);\n\t\t\tadd(u,v+n,w),add(v+n,u,w);\n\t\t}\n\t\tfor(int i=1;i<=n;++i){\n\t\t\tif(!vis[i])val[i]=0,dfs(i);\n\t\t}\n\t\tif(pas)printf(\"No\\n\");\n\t\telse printf(\"Yes\\n\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1632565480,
        "uid": 85514,
        "name": "\u4e07\u4e07\u6ca1\u60f3\u5230",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4578 [FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf"
    },
    {
        "content": "\u672c\u9898\u4e0d\u7528\u591a\u8bf4\uff0c\u601d\u8def\u4e0d\u662f\u5f88\u597d\u60f3\uff0c\u4f46\u662f\u5b9e\u73b0\u5374\u662f\u5f02\u5e38\u7684\u7b80\u5355\uff1b\n\n\u601d\u8def\uff1a\n\t\n   >\u9488\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6570\u636e\uff1a(x,y,c)\u628a\u884c\u5217\u62c6\u5f00\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u9650\u5236x,y,c\uff0c\u5c06x\u884c\u5230y\u5217\u8fde\u8fb9\uff0c\u5b9a\u4e49\u8fb9\u6743\u4e3ac\u3002\n   \n   \u5177\u4f53\u505a\u6cd5\n   \t\n    >\u8bbe\u8282\u70b91...2n\uff0ci\u22081-n\u8868\u793ai\u884c\uff0ci\u2208(n+1)-2n\u65f6\u8868\u793ai-n\u5217\n\n\n>\u5f53\u6211\u4eec\u8bfb\u5230\u4e00\u9897\u7eff\u5b9d\u77f3(x,y,k)\u65f6\uff0c\u5c31\u4ecex\u5411y+n\u8fde\u4e00\u6761\u6743\u503c\u4e3ak\u7684\u8fb9\n\n>\u5f53\u6211\u4eec\u8fde\u5b8c\u8fb9\u540e\u4f1a\u53d1\u73b0\u7ed9\u4e00\u884c/\u4e00\u5217\u589e\u52a0a\u5c31\u76f8\u5f53\u4e8e\u628a\u4e0e\u8fd9\u4e2a\u70b9\u76f8\u8fde\u7684\u6240\u6709\u8fb9\u6743\u503c\u589e\u52a0a\n\n>\u8fd9\u4e2a\u52a0\u8fb9\u6743\u53ef\u4ee5\u8f6c\u5316\u4e3a\u52a0\u70b9\u6743\n  \n>\u7136\u540edfs\u4e00\u904d\uff0c\u5982\u679c\u5b58\u5728\u73af\u7684\u8bdd\u663e\u7136\u5fc5\u987b\u8981\u73af\u4e0a\u5b58\u5728\u5408\u6cd5\u89e3\uff0c\u90a3\u4e48\u968f\u4fbf\u4ee4\u4e00\u4e2a\u4e1c\u897f\u4e3ax\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u503c\u4e3aax+b\u7684\u5f62\u5f0f\uff0c\u68c0\u67e5\u4e8c\u5206\u56fe\u662f\u5426\u5408\u6cd5\u3002\n\n\u90a3\u4e48\u6309\u7167\u8fd9\u4e2a\u601d\u8def\u8fdb\u884c\u6c42\u89e3\uff0c\u5373\u53ef\n\ncode:\n```cpp\n/*\n\tName: luogu P4578 [FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\n\tCopyright: ccsc\n\tAuthor: ccsc\n\tDate: 15-10-19 11:42\n\tDescription: \u56fe\u8bba \n*/\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read(){\n\tint x=0;\n\tbool f=0;\n\tchar ch;\n\tch=getchar();\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-')f=1;\n\t\tch=getchar();\n\t}\n\twhile(ch<='9'&&ch>='0'){\n\t\tx=(x<<3)+(x<<1)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn f?-x:x;\n}\nint n,m,k;\nint a[2020],b[2020];\nbool vis[2020];\nstruct pp{int v,nxt,w;}e[2020<<1];\nint head[2020],cnt=1;\ninline void add(int u,int v,int w){e[cnt]=(pp){v,head[u],w};head[u]=cnt++;}\nbool f1=false;\nvoid dfs(int u)\n{\n    vis[u]=true;if(!f1)return;\n    for(int i=head[u];i;i=e[i].nxt)\n    {\n        int v=e[i].v,w=e[i].w;\n        if(!vis[v])a[v]=-a[u],b[v]=w-b[u],dfs(v);\n        else if(a[v]+a[u]!=0||b[u]+b[v]!=w){f1=false;return;}\n    }\n}\nint main()\n{\n    int T=read();\n    while(T--)\n    {\n        n=read();\n\t\tm=read();\n\t\tk=read();\n\t\tcnt=1;\n        for(int i=1;i<=k;++i)\n        {\n            int x=read(),y=read(),d=read();\n            add(x,y+n,d);add(y+n,x,d);\n        }\n        f1=true;\n        for(int i=1;f1&&i<=n;++i)\n            if(!vis[i])a[i]=1,b[i]=0,dfs(i);\n        puts(f1?\"Yes\":\"No\");\n        for(int i=1;i<=n+m;++i)vis[i]=false,head[i]=0;\n    }\n    return 0;\n}\n```\n",
        "postTime": 1571114627,
        "uid": 211665,
        "name": "ccsc",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "### \u3010\u9898\u76ee\u5927\u610f\u3011\n\u6709\u4e00\u4e2a$n\u00d7m$\u7684\u5168$0$\u77e9\u9635\uff0c\u53ef\u4ee5\u7ed9\u6bcf\u884c\u6216\u6bcf\u5217\u589e\u52a0\u6216\u51cf\u5c11\u67d0\u4e2a\u503c\uff0c\u6700\u540e\u9700\u8981\u7279\u5b9a\u70b9\u6ee1\u8db3\u7279\u5b9a\u503c\uff0c\u95ee\u662f\u5426\u53ef\u884c\n\n------------\n\n### \u3010\u5206\u6790\u3011\n\u4ee4\u7b2ci\u884c\u589e\u52a0\u7684\u503c\u4e3a$f(i)$\uff0c\u7b2cj\u5217\u589e\u52a0\u7684\u503c\u4e3a$g(j)$\n\n\u5982\u679c\u5b58\u5728\u7279\u5b9a\u70b9$A_{i,j}$\u7684\u503c\u4e3a$S$\uff0c\u9700\u8981$f(i)+g(j)=S$\n\n\u628a$f(i)$\u548c$g(j)$\u90fd\u62bd\u8c61\u6210\u70b9$u,v$\n\n\u5c31\u662f\u5728$u$\u548c$v$\u4e4b\u95f4\u8fde\u4e86\u4e00\u6761\u8fb9\uff0c\u4f7f\u5f97$u$\u548c$v$\u7684\u70b9\u6743\u548c\u4e3a$S$\n\n\u90a3\u4e48\u5efa\u8fb9\u4e4b\u540e\u904d\u5386\u6bcf\u6761\u8fb9\u5224\u65ad\u662f\u5426\u53ef\u884c\u5373\u53ef\n\n\u590d\u6742\u5ea6 $O(Tk)$\n\n------------\n\n### \u3010\u7b97\u6cd5\u3011\n\u66b4\u529b\n\n------------\n### \u3010\u4ee3\u7801\u3011\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1005,maxe=maxn<<1,maxt=maxe;\nint t,n,m,k;\nint tot,lnk[maxt];\nstruct edge{\n\tint to,nxt,s;\n}e[maxe];\nint read(){\n\tint ret=0,f=1;char ch=getchar();\n\twhile(ch>'9'||ch<'0'){if(ch=='-')f=-f;ch=getchar();}\n\twhile(ch>='0'&&ch<='9') ret=ret*10+ch-'0',ch=getchar();\n\treturn ret*f;\n}\nbool vis[maxt];\nint dis[maxt];\nbool ans;\nvoid clear(){\n\tans=tot=0;\n\tmemset(dis,0,sizeof dis);\n\tmemset(vis,0,sizeof vis);\n\tmemset(lnk,0,sizeof lnk);\n}\nvoid add_e(int x,int y,int z){\n\te[++tot]=(edge){y,lnk[x],z};\n\tlnk[x]=tot;\n}\nbool DFS(int x,int s){//\u5047\u8bbe\u5f53\u524d\u70b9x\u7684\u70b9\u6743\u4e3as\n\tvis[x]=1;\n\tdis[x]=s;\n\tfor(int j=lnk[x];j;j=e[j].nxt){\n\t\tint y=e[j].to;\n\t\tif(vis[y]){\n\t\t\tif(e[j].s-dis[x]!=dis[y]) return 1;\n\t\t}//\u5224\u65ad\n\t\telse{\n\t\t\tif(DFS(y,e[j].s-dis[x])) return 1; \n\t\t}//\u7ee7\u7eed\u641c\u7d22\n        \n\t}\n\treturn 0;\n}\n//\u5176\u5b9e\u5c31\u662fspfa\u5224\u73af\nint main(){\n \tfreopen(\"P4578.in\",\"r\",stdin);\n \tfreopen(\"P4578.out\",\"w\",stdout);\n\tt=read();\n\twhile(t--){\n\t\tn=read(),m=read(),k=read();\n\t\tclear();\n\t\tfor(int i=1;i<=k;i++){\n\t\t\tint x=read(),y=read()+n,z=read();\n\t\t\tadd_e(x,y,z),add_e(y,x,z);//\u5efa\u8fb9\n\t\t}\n\t\tm+=n;\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tif(vis[i]) continue;\n\t\t\tif(DFS(i,0)){\n\t\t\t\tans=1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tprintf(\"%s\\n\",ans?\"No\":\"Yes\");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1585060261,
        "uid": 116251,
        "name": "\u7834\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "\u8c8c\u4f3c\u548c\u5176\u4ed6\u505a\u6cd5~~\u5b8c\u5168~~\u4e0d\u4e00\u6837\n\n\u663e\u7136\uff0c\u5982\u679c\u53ef\u4ee5\u628a\u5168\u96f6\u7684\u9635\u5217\u8f6c\u5316\u6210\u8981\u6c42\u7684\u9635\u5217\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u628a\u8981\u6c42\u9635\u5217\u8f6c\u5316\u6210\u5168\u96f6\u9635\u5217\uff0c\u7136\u540e\u6211\u4eec\u5c31\u8981\u68c0\u67e5\u8981\u6c42\u7684\u9635\u5217 \u600e\u4e48\uff08\u80fd\u4e0d\u80fd\uff09\u8f6c\u5316\u6210\u5168\u96f6\u9635\u5217\u3002\n\n\u9996\u5148\u60f3\u5230\uff0c\u5148\u786e\u5b9a\u7eb5\u7684\u6309\u94ae\uff0c\u7136\u540e\u68c0\u67e5\u6bcf\u884c\u662f\u4e0d\u662f\u4e00\u6837\uff0c\u5982\u679c\u4e00\u6837\u5c31\u53ef\u4ee5\u901a\u8fc7\u8f6c\u884c\u7684\u6309\u94ae\u4f7f\u6574\u884c\u4e3a\u96f6\u3002\n\n**\u5982\u4f55\u786e\u5b9a\u7eb5\u7684\u6309\u94ae\uff1f**\n\n\u628aa\u6570\u7ec4\u50a8\u5b58\u7b2cx\u884cy\u5217\u7684\u5bc6\u7801\n\n\u5bf9\u6bcf\u884c\u4e2d\u6709\u7eff\u5b9d\u77f3\u7684\u6309\u94ae\u7684\u5bc6\u7801\u53d6\u6700\u5927\u503cmaxn\uff0c\u90a3\u4e48 _\u8be5\u884c\u5176\u4ed6\u6709\u7eff\u5b9d\u77f3\u7684\u6309\u94ae\u7684\u6240\u5728\u5217_ \u90fd\u9700\u8981\u6bd4\u6700\u5927\u503c\u6240\u5728\u5217\u5c11 $ maxn-a[x][y] $ \uff0c\u540c\u65f6\u6700\u5927\u503c\u6240\u5728\u5217\u6bd4\u5f53\u524d\u5217\u591a $ maxn-a[x][y] $\n\n\u5176\u5b9e\u5c31\u662f\u5dee\u5206\u7ea6\u675f\u7136\u540eSPFA\u5224\u8d1f\u73af\uff08\u5e94\u8be5\u662f\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u6211\u4ece\u4e66\u4e0a\u63a5\u89e6\u8fc7\u601d\u60f3\uff09\n\n\u4e4b\u540eSPFA\u5224\u8d1f\u73af\u5c31\u884c\u4e86\n\n\u5982\u679c\u4f6090\u5206\uff0c\u53ef\u80fd\u662f [\u56e0\u4e3a\u8fd9\u4e2a](https://www.luogu.com.cn/discuss/show/105388) \uff0c\u53ef\u4ee5if\u5224\u65ad\u4e00\u4e0b\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 1001\nint n,m,T,k;\nint a[N][N],b[N][N],c[N];\nint cnt,Head[N],Next[N*N*2],V[N*N*2],W[N*N*2];\nvoid add(int u,int v,int w)\n{\n\tV[cnt]=v;\n\tW[cnt]=w;\n\tNext[cnt]=Head[u];\n\tHead[u]=cnt++;\n}\nint vis[N],dis[N];\nint bo;\nint SPFA(int u)\n{\n\tif(bo)\n\t{\n\t\treturn 0;\n\t}\n\tvis[u]=1;\n\tfor(int i=Head[u];i!=-1;i=Next[i])\n\t{\n\t\tif(dis[V[i]]>dis[u]+W[i])\n\t\t{\n\t\t\tif(vis[V[i]]==1)\n\t\t\t{\n\t\t\t\tbo=1;\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tdis[V[i]]=dis[u]+W[i];\n\t\t\tSPFA(V[i]);\n\t\t\tif(bo==1)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\tvis[u]=0;\n\treturn 1;\n}\nint main()\n{\n\tscanf(\"%d\",&T);\n\twhile(T--)\n\t{\n\t\tmemset(Head,-1,sizeof(Head));\n\t\tmemset(vis,0,sizeof(vis));\n\t\tmemset(dis,0x7f,sizeof(dis));\n\t\tmemset(a,0,sizeof(a));\n\t\tmemset(b,0,sizeof(b));\n\t\tmemset(c,0,sizeof(c));\n\t\tcnt=0;\n\t\tscanf(\"%d%d%d\",&n,&m,&k);\n\t\tint no=0;\n\t\tfor(int i=1;i<=k;i++)\n\t\t{\n\t\t\tint x,y,c;\n\t\t\tscanf(\"%d%d%d\",&x,&y,&c);\n\t\t\tif(b[x][y]==1&&a[x][y]!=c)\n\t\t\t{\n\t\t\t\tno=1;\n\t\t\t\tprintf(\"No\\n\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tb[x][y]=1;\n\t\t\ta[x][y]=c;\n\t\t}\n\t\tif(no)\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\t\tmemset(c,0,sizeof(c));\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tint maxn=-99999999,name=-1;\n\t\t\tfor(int o=1;o<=m;o++)\n\t\t\t{\n\t\t\t\tif(b[i][o]==1)\n\t\t\t\t{\n\t\t\t\t\tif(maxn<a[i][o])\n\t\t\t\t\t{\n\t\t\t\t\t\tmaxn=a[i][o];\n\t\t\t\t\t\tname=o;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(name==-1)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor(int o=1;o<=m;o++)\n\t\t\t{\n\t\t\t\tif(b[i][o]==1&&name!=o)\n\t\t\t\t{\n\t\t\t\t\tadd(o,name,maxn-a[i][o]);\n\t\t\t\t\tadd(name,o,a[i][o]-maxn);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tint yes=0;\n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t\tif(dis[i]!=dis[0])\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tbo=0;\n\t\t\tdis[i]=0;\n\t\t\tint qwq=SPFA(i);\n\t\t\tif(qwq==0)\n\t\t\t{\n\t\t\t\tprintf(\"No\\n\");\n\t\t\t\tyes=1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(yes==1)\n\t\t{\n\t\t\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tprintf(\"Yes\\n\");\n\t\t}\n\t}\n}\n```\n\n\nAC\u60c5\u51b5\uff1a [https://www.luogu.com.cn/record/29051678](https://www.luogu.com.cn/record/29051678)\n",
        "postTime": 1578485291,
        "uid": 104319,
        "name": "Why_not_use_longlong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    },
    {
        "content": "# \u524d\u8a00\n\n\u770b\u5230\u9898\u76ee\u4e4b\u540e,\u5927\u60ca,\u8fd9\u4e0d\u662f\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u5417,\u8fd8\u5f88\u50cf\u6a21\u677f\u9898\u7684\u6837\u5b50,\u518d\u4e00\u770b\u9898\u89e3,\u679c\u7136\u662f\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf,\u518d\u60f3\u5230\u4eca\u5929\u505a\u7684\u9898\u90fd\u662f\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u7684,\u66f4\u52a0\u575a\u5b9a\u4e86\u81ea\u5df1\u7684\u60f3\u6cd5\uff0c\u4f46\u662f\u6211\u4e0d\u4f1a\u5dee\u5206\u7ea6\u675f\u7cfb\u7edf\u5440\uff0c\u6240\u4ee5\u6211\u53ea\u80fd\u7528\u5e76\u67e5\u96c6\u4e86\u3002\n# \u9898\u610f\n\n\u6bcf\u4e00\u884c\u53ef\u4ee5\u5168\u90e8\u52a0\u4e00\u4e2a\u6570\uff0c\u6bcf\u4e00\u5217\u4e5f\u53ef\u4ee5\u5168\u90e8\u52a0\u4e00\u4e2a\u6570\uff0c\u4f7f\u5176\u6210\u4e3a\u9898\u76ee\u8981\u6c42\u7684\u77e9\u9635\u3002\n\n# \u521d\u6b65\u601d\u60f3\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5047\u8bbe\u6bcf\u4e00\u884c\u52a0\u7684\u6570\u4e3a$ -g[i] $,\u6bcf\u4e00\u5217\u7684\u6570\u4e3a$ +g[j+n] $,\u90a3\u4e48\u9898\u76ee\u7684\u8981\u6c42\u5c31\u662f$ -g[i]+g[j+n]=a[i][j] $\u3002\u4e5f\u8bb8\u6709\u4eba\u8981\u95ee\u4e3a\u4ec0\u4e48\u4e0d\u7528$ g[i]+f[j] $\u8fd9\u6837\u7684\u5f62\u5f0f\uff0c\u56e0\u4e3a\u540e\u9762\u8981\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u8981\u6c42\u3002\n\n# \u6b63\u9898\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $ i,j,a[i][j] $ \uff0c\u6211\u4eec\u5c06$ i,j+n $\u8fdb\u884c\u8fde\u8fb9\uff0c\u5982\u679c\u4ed6\u4eec\u5df2\u7ecf\u5728\u4e00\u4e2a\u8fde\u901a\u5757\u5185\uff0c\u5219\u5224\u65ad\u5148\u524d\u5df2\u7ecf\u6c42\u51fa\u7684\u89e3\u4e0e\u5f53\u524d\u7684\u7b54\u6848\u662f\u5426\u76f8\u540c\u3002\n\n\u800c\u4e3a\u4ec0\u4e48\u4ed6\u4eec\u5728\u4e00\u4e2a\u8fde\u901a\u5757\u5185\u5c31\u53ef\u4ee5\u5f97\u51fa\u7b54\u6848\u5462?\n\n\u6211\u4eec\u5bf9\u4e8e$ G[i]-G[j]=x $\u4e0e$ G[j]-G[k]=y $ \u53ef\u5f97\u51fa$ G[i]-G[k]=x+y $\n\n\u53c8\u5bf9\u4e8e$ G[i]-G[j]=x $\u4e0e$ G[i]-G[k]=y $\u53ef\u5f97\u51fa$ G[k]-G[j]=x-y $\n\n\u6545\u5bf9\u4e8e\u4e00\u4e2a\u8054\u901a\u5757\u5185\u7684\u6570\u90fd\u6709\u8fd9\u79cd\u5173\u7cfb\uff0c\u6240\u4ee5\u90fd\u53ef\u4ee5\u5f97\u51fa\u3002\n\n\u4e5f\u8bb8\u6709\u7684\u4eba\u4f1a\u8ba4\u4e3a\uff0c\u6c42\u51fa\u8fde\u901a\u5757\u6709\u4ec0\u4e48\u7528\uff1f\n\n\u73b0\u5728\u5c31\u662f\u7b54\u6848\uff0c\u6211\u4eec\u4ee4$ dis[i]=g[i]-g[root(i)] $ $ dis[j]=g[j]-g[root(j)] $ \u5219 $ g[i]-g[j]=dis[i]-dis[j] $ \u3002\n\n\u4e5f\u8bb8\u6709\u7684\u4eba\u8bf4\u8fd9\u662f\u65e0\u7528\u529f\uff0c\u4f46\u662f\u5f53\u6709\u65b0\u8fb9\u8fde\u8fdb\u6765\u65f6\u5c31\u6709\u5927\u7528\u4e86\u3002\n\n\u8fd9\u65f6\u5bf9\u4e8e$ dis[i]=g[i]-g[root(i)];dis[j]=g[j]-g[root(j)]; $\n\n\u6211\u4eec\u8003\u8651\u5c06j\u6240\u5728\u7684\u5b50\u6811\u8fde\u5230i\u6240\u5728\u7684\u5b50\u6811\uff0c\u90a3\u4e48\u8fd9\u65f6\u5019\n$$\n\ndis[root(j)]=g[root(j)]-g[root(i)]=g[j]-dis[j]+dis[i]-g[i]=v-dis[j]+dis[i]\n\n$$\n\n\u5c31\u53ef\u4ee5\u6539\u53d8\u4e86\uff0c\u8fd9\u65f6\u5019\u5728\u7528\u5e76\u67e5\u96c6\u6539\u53d8\u4e0b\u9762\u7684\u70b9\u5c31\u597d\u4e86\u3002\n\n# \u4ee3\u7801\n\n```cpp\n #include<bits/stdc++.h>\n using namespace std;\n int r1,r2,e[20000],f[20000],n,m,q,T,x,y,z,i;\n bool flag;\n int find(int x)\n {\n    if (f[x]==x) return x;\n    int y=find(f[x]);e[x]+=e[f[x]];f[x]=y;return f[x];\n }\n int main()\n {\n    cin>>T;\n    for (;T;T--)\n       {\n       cin>>n>>m>>q;    \n       for (i=1;i<=n+m;i++) \n            {\n            f[i]=i;e[i]=0;\n           }\n        flag=true;\n       for (;q;q--)\n           {\n            cin>>x>>y>>z;\n            if (flag==true)\n               {\n            r1=find(x);r2=find(y+n);\n            if (r1==r2)\n                {\n                    if (e[y+n]-e[x]!=z)\n                        flag=false;   \n                }\n            else\n                {\n                    e[r2]=z-e[y+n]+e[x];f[r2]=r1;\n                    find(x);find(y+n);\n                }\n            }\n          }\n        if (flag==false) cout<<\"No\"<<endl;\n        else cout<<\"Yes\"<<endl;\n       }\n    return 0;\n }\n```",
        "postTime": 1617278752,
        "uid": 77615,
        "name": "OIerAlbedo",
        "ccfLevel": 0,
        "title": "P4578\u9898\u89e3"
    },
    {
        "content": "\u9898\u610f\u5c31\u662f\u4e00\u4e2a$n\\times m$\u7684\u77e9\u9635,\u4e00\u5f00\u59cb\u5168\u662f\u96f6,\u4f60\u53ef\u4ee5\u4e2a\u6bcf\u4e00\u884c\u6216\u6bcf\u4e00\u5217\u90fd\u52a01\u6216\u51cf1,\u8981\u6c42\u7279\u5b9a\u533a\u57df\u7684\u503c\u4e0e\u8981\u6c42\u503c\u76f8\u7b49\n\n\u6211\u4eec\u8bbe$h_i$\u4e3a\u7b2c$i$\u884c\u7684\u6570\u53d8\u5316\u7684\u591a\u5c11,\u8bbe$l_j$\u4e3a\u7b2c$j$\u5217\u7684\u6570\u53d8\u5316\u7684\u591a\u5c11,\u5982\u679c\u6211\u4eec\u8981\u6c42\u7b2c$i$\u884c,\u7b2c$j$\u5217\u7684\u6570\u4e3ax,\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\n\n$h_i+l_j=x~~$\u2460\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u5f0f\u5b50\u6709\u4e24\u4e2a\u672a\u77e5\u6570,\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u6765\u5212\u6389\u4e00\u4e2a\n\n\u5047\u8bbe\u6211\u4eec\u8fd8\u8981\u6c42\u7b2c$q$\u884c,\u7b2c$j$\u5217\u7684\u6570\u4e3ay,\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f97\u5230$h_q+l_j=y~~$\u2461\n\n\u2460-\u2461 \u5f97$l_i-l_j=x-y~~$\n\n\u8fd9\u79cd\u7c7b\u578b\u7684\u5f0f\u5b50\u5982\u679c\u4f60\u505a\u8fc7[P2294 [HNOI2005]\u72e1\u733e\u7684\u5546\u4eba](https://www.luogu.com.cn/problem/P2294) ,\u4f60\u4e00\u5b9a\u4e0d\u964c\u751f,\u6240\u4ee5\u505a\u6cd5\u5c31\u662f**\u6211\u4eec\u4f9d\u8fd9\u4e2a\u5f0f\u5b50\u5efa\u4e00\u6761\u8fb9,\u518d\u53cd\u7740\u52a0\u4e00\u6761\u8fb9,\u4ece\u8d85\u7ea7\u6e90\u70b9\u51fa\u53d1,\u5982\u679c\u51fa\u73b0\u6b63\u73af\u5373\u65e0\u89e3,\u5426\u5219\u6709\u89e3**,\u53ef\u4ee5\u81ea\u5df1\u4e3e\u51e0\u4e2a\u4f8b\u5b50\u7406\u89e3(\u53ef\u4ee5\u5148\u505a\u90a3\u9053\u9898,\u6a21\u578b\u66f4\u7b80\u5355,\u6765\u5b66\u4e60)\n\n\u90a3\u4e48\u5982\u679c\u6ca1\u6709\"\u8981\u6c42\u7b2c$q$\u884c,\u7b2c$j$\u5217\u7684\u6570\u4e3ay\",\u90a3\u4e48\u7b2c$j$\u5217\u53ea\u6709\u7b2c$i$\u884c\u6709\u8981\u6c42,\u90a3\u4e48\u6211\u4eec\u4e00\u5b9a\u53ef\u4ee5\u901a\u8fc7\u5bf9\u7b2c$j$\u5217\u8fdb\u884c\u64cd\u4f5c\u6765\u6ee1\u8db3\u5b83(\u56e0\u4e3a\u7b2c$j$\u5217\u53ea\u6709\u7b2c$i$\u884c\u6709\u8981\u6c42)\n\n\u540c\u7406,\u6211\u4eec\u8fd8\u53ef\u4ee5\u627e\u884c\u6570\u4e0d\u540c,\u5217\u6570\u76f8\u7b49\u7684\u6765\u5f97\u5230\u5f0f\u5b50,\u8fd9\u4e24\u79cd\u8981\u5404\u81ea\u5efa\u56fe\u548c\u8dd1$\\operatorname{SPFA}$/\u7136\u540e\u8981\u90fd\u6ee1\u8db3\u624d\u662f$\\operatorname{Yes}$\n\n\u6ce8\u610f\u4e8b\u9879:\u672c\u9898\u4f9d\u8fd9\u79cd\u65b9\u6cd5\u56fe\u53ef\u80fd\u4f1a\u6bd4\u8f83\u5927,\u6570\u7ec4\u5f00\u5927\u4e00\u70b9\n\n\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1100000;\nint T,n,m,k,cnt[2],x[N],y[N],z[N],ft[2][N],nx[2][N],to[2][N],w[2][N],vis[2][N],dis[2][N],SUPER_POINT=1086;//x\u4e3a\u884cy\u4e3a\u5217z\u4e3a\u6240\u9700\u503c,visa\u7528\u4e8e\u5224\u6b63\u73af,SUPER_POINT\u4e3a\u8d85\u7ea7\u6e90\u70b9\nbool inq[2][N];\nqueue<int> Q;\n#define x xx//\u4e0b\u9762\u4e0d\u5c0f\u5fc3\u7528\u4e86x\u5de6\u7c7b\u578b,\u8fd9\u91ccdefine\u6389\nint spfa(int s,bool x) //x\u6765\u533a\u522b\u8fd9\u6b21\u8dd1\u90a3\u4e2a\n{\n    for(int i=0;i<=max(n,m);i++) dis[x][i]=-0x3f3f3f3f,inq[x][i]=0;\n    dis[x][s]=0;//\u8d77\u70b9\u53ef\u6539\n    inq[x][s]=1;//\u540c\u4e0a\n    Q.push(s);//\u540c\u4e0a\n    while(!Q.empty()) \n    {\n       int now=Q.front();Q.pop();\n       inq[x][now]=0;\n       for(int i=ft[x][now];i;i=nx[x][i]) \n       {\n           int toi=to[x][i],wi=w[x][i];\n           if(dis[x][toi]<dis[x][now]+wi) \n           {\n               dis[x][toi]=dis[x][now]+wi;\n               if(!inq[x][toi]) \n               {\n               \t  vis[x][toi]++;\n               \t  if(vis[x][toi]>n) return 0;//\u51fa\u73b0\u6b63\u73af\n                  Q.push(toi);\n                  inq[x][toi]=1;\n               }\n           } \n       }\n    }\n    return 1;\n}\n#undef x xx//\u53d6\u6d88define\ninline long long read()\n{\n    char c=getchar();long long sum=0,f=1;\n    while(!(c>='0'&&c<='9')) {if(c=='-') f=-1;c=getchar();}\n    while(c>='0'&&c<='9') {sum=((sum<<1)+(sum<<3))+(c-'0');c=getchar();}\n    return sum*f;\n}\nvoid add(bool a,int b,int c,int d)\n{\n\tnx[a][++cnt[a]]=ft[a][b];\n\tft[a][b]=cnt[a];\n\tto[a][cnt[a]]=c;\n\tw[a][cnt[a]]=d;\n}\nint main()\n{\n\tT=read();\n\twhile(T--)\n\t{\n\t\tcnt[0]=cnt[1]=0;\n\t\tmemset(ft,0,sizeof(ft));memset(nx,0,sizeof(ft));memset(to,0,sizeof(ft));memset(w,0,sizeof(ft));memset(vis,0,sizeof(ft));//\u91cd\u7f6e\n\t\tn=read();m=read();k=read();\n\t\tfor(int i=1;i<=k;i++) x[i]=read(),y[i]=read(),z[i]=read();\n\t\tfor(int i=1;i<=k;i++)\n\t\t  for(int j=1;j<=k;j++)\n\t\t\t{\n\t\t\t\tif(i==j) continue;\n\t\t\t\tif(x[i]==x[j]) add(0,y[i],y[j],z[i]-z[j]);\n\t\t\t\tif(y[i]==y[j]) add(1,x[i],x[j],z[i]-z[j]);//\u5206\u522b\u52a0\u8fb9\n\t\t\t}\n\t\tfor(int i=1;i<=m;i++) add(0,SUPER_POINT,i,0); \n\t\tfor(int i=1;i<=n;i++) add(1,SUPER_POINT,i,0); //\u8fde\u8d85\u7ea7\u6e90\u70b9\n\t\tif((!spfa(SUPER_POINT,0))||(!spfa(SUPER_POINT,1))) printf(\"No\\n\");\n\t\telse printf(\"Yes\\n\");//\u8981\u90fd\u6ee1\u8db3\u624d\u662fyes\n\t\tTAIL:;\n\t}\n}\n```\n",
        "postTime": 1587562895,
        "uid": 199270,
        "name": "Y_B_Y",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4578 \u3010[FJOI2018]\u6240\u7f57\u95e8\u738b\u7684\u5b9d\u85cf\u3011"
    }
]
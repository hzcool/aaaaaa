[
    {
        "content": "\u5b9a\u4f4d\u7b7e\u5230\u9898\uff0c\u6240\u4ee5\u4e0d\u8bb2\u90e8\u5206\u5206\uff08\u96fe\n\n\u6309\u9898\u610f\u6a21\u62df\u5373\u53ef\u3002\u4f46\u662f\u76f4\u63a5\u6a21\u62df\u662f $O(n^4)$ \u7684\uff0c\u8003\u8651\u4f18\u5316\u3002\u5bb9\u6613\u60f3\u5230\u7684\u4f18\u5316\u5c31\u662f\u7528\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u3002\u53d1\u73b0 $v$ \u7684\u503c\u5f88\u5c0f\uff0c\u6240\u4ee5\u53ea\u8981\u5f00 $10$ \u4e2a `set` \u6765\u7ef4\u62a4\u6bcf\u79cd\u68cb\u5b50\u5c31\u53ef\u4ee5\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2\\log{n})$\u3002\n\nCode:\n```cpp\n#include<set>\n#include<cctype>\n#include<cstdio>\n#define rg register\ninline char rc()\n{\n\tstatic char buf[524288],*pn=buf,*pe=buf;\n\treturn (pn==pe)&&(pe=(pn=buf)+fread(buf,1,524288,stdin),pn==pe)?EOF:*pn++;\n}\ninline int read()\n{\n\tint x=0;\n\tchar cc=rc();\n\twhile(!isdigit(cc))cc=rc();\n\twhile(isdigit(cc))x=(x*10+cc-'0'),cc=rc();\n\treturn x;\n}\nusing std::set;\nint n,m,k,v,r,c;\nint a[1003][1003];\nint bs[1003][1003];\nint res[1003][1003];\nstruct bd\n{\n\tint x,y;\n\tbool operator <(const bd &t)const\n\t{\n\t\tif(bs[x][y]==bs[t.x][t.y])\n\t\t{\n\t\t\tif(x+y==t.x+t.y)return x<t.x;\n\t\t\treturn (x+y)<(t.x+t.y);\n\t\t}\n\t\treturn bs[x][y]>bs[t.x][t.y];\n\t}\n};\ninline bd make(int x,int y)\n{\n\tbd nw;\n\tnw.x=x,nw.y=y;\n\treturn nw;\n}\nset<bd>S[13];\ninline void upd(int r,int c)\n{\n\tint vl=a[r][c];\n\tbd nw=make(r,c);\n\tif(!S[vl].count(nw))return;\n\tS[vl].erase(nw);\n\t++bs[r][c],S[vl].insert(nw);\n}\nint main()\n{\n\tn=read(),m=read();k=n*m;\n\tfor(rg int i=1;i<=n;++i)\n\t{\n\t\tfor(rg int j=1;j<=m;++j)\n\t\t{\n\t\t\ta[i][j]=read();\n\t\t\tbs[i][j]+=(i==1),bs[i][j]+=(i==n);\n\t\t\tbs[i][j]+=(j==1),bs[i][j]+=(j==m);\n\t\t\tS[a[i][j]].insert(make(i,j));\n\t\t}\n\t}\n\tfor(rg int i=1;i<=k;++i)\n\t{\n\t\tv=read();\n\t\tset<bd>::iterator tmp=S[v].begin();\n\t\tr=tmp->x,c=tmp->y;\n\t\tS[v].erase(tmp),res[r][c]=i;\n\t\tif(r>1)upd(r-1,c);\n\t\tif(r<n)upd(r+1,c);\n\t\tif(c>1)upd(r,c-1);\n\t\tif(c<m)upd(r,c+1);\n\t}\n\tfor(rg int i=1;i<=n;++i)\n\t{\n\t\tfor(rg int j=1;j<m;++j)printf(\"%d \",res[i][j]);\n\t\tprintf(\"%d\\n\",res[i][m]);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1633401484,
        "uid": 59388,
        "name": "VinstaG173",
        "ccfLevel": 7,
        "title": "\u5206\u88c2 \u9898\u89e3"
    },
    {
        "content": "\u867d\u7136\u662f\u4e00\u9053\u6a21\u62df\u9898\uff0c\u4f46\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u7528\u5e38\u6570\u66f4\u5c0f\u7684 priority_queue \u89e3\u51b3\u3002\n\n\u8003\u8651 $V_{i,j}$ \u8868\u793a\u683c\u5b50\u79cd\u7c7b $i$\uff0c\u7d27\u5bc6\u5ea6\u4e3a $j$ \u7684 priority_queue\u3002\u6211\u4eec\u53d1\u73b0\u5b9e\u9645\u4e0a\u5982\u679c\u5728\u5f53\u524d priority_queue \u4e2d\u7684\u6700\u5c0f\u503c\u7d27\u5bc6\u5ea6\u5982\u679c\u4e0d\u662f $j$ \u4e86\u5c31\u5f39\u53bb\uff0c\u5426\u5219\u5c31\u653e\u3002\u8fd9\u6837\u505a\u65f6\u95f4\u590d\u6742\u5ea6\u8fd8\u662f $O(5\\times n^2 \\log n)$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $O(5\\times n^2)$\uff0c\u4f46\u56e0\u4e3a priority_queue \u5e38\u6570\u66f4\u5c0f\u6240\u4ee5\u76ee\u524d\u8dd1\u5230\u4e86\u6700\u4f18\u89e3\u3002\n\n```c++\n//The Hunting Party - Keys To The Kingdom\n//\u597d\u60f3\u505a\u5609\u7136\u5c0f\u59d0\u7684\u72d7\u554a~\n#include<bits/stdc++.h>\n#define IOS ios::sync_with_stdio(false)\n#define ll long long\n#define mp make_pair\n#define pa pair < int,int >\n#define fi first\n#define se second\n#define inf 1e18\n#define mod 998244353\n//#define int ll\n#define N 1005\nusing namespace std;\ninline char gc(){static char buf[1000000],*p1=buf,*p2=buf;return p1==p2&&(p2=(p1=buf)+fread(buf,1,1000000,stdin),p1==p2)?EOF:*p1++;}\n// #define gc getchar\ninline ll read(){char c=gc();ll su=0,f=1;for (;c<'0'||c>'9';c=gc()) if (c=='-') f=-1;for (;c>='0'&&c<='9';c=gc()) su=su*10+c-'0';return su*f;}\ninline void write(ll x){if (x<0){putchar('-');write(-x);return;}if (x>=10) write(x/10);putchar(x%10+'0');}\ninline void writesp(ll x){write(x),putchar(' ');}\ninline void writeln(ll x){write(x);putchar('\\n');}\npriority_queue<pa>G[15][15];\nint n,m,v[N][N],jinmi[N][N],ans[N][N];\nvoid What_will_Diana_eat_today()\n{\n\tn=read(),m=read();\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tfor (int j=1;j<=m;j++)\n\t\t{\n\t\t\tv[i][j]=read();\n\t\t}\n\t}\n\tfor (int i=1;i<=n;i++)\n\t\tfor (int j=1;j<=m;j++)\n\t\t{\n\t\t\tjinmi[i][j]=(i==1||i==n)+(j==1||j==m);\n\t\t\tG[v[i][j]][(i==1||i==n)+(j==1||j==m)].push(mp(-(i+j),-i));\n\t\t}\n\tfor (int i=1;i<=n*m;i++)\n\t{\n\t\tint x=read();\n\t\tbool bl=0;\n\t\tfor (int j=4;j>=0;j--)\n\t\t{\n\t\t\tif (G[x][j].empty()) continue;\n\t\t\twhile (!G[x][j].empty())\n\t\t\t{\n\t\t\t\tpa now=(G[x][j].top());\n\t\t\t\tG[x][j].pop();\n\t\t\t\tnow.se=-now.se;\n\t\t\t\tnow.fi=-now.fi;\n\t\t\t\tnow.fi=now.fi-now.se;\n\t\t\t\tswap(now.fi,now.se);\n\t\t\t\tif (jinmi[now.fi][now.se]!=j||ans[now.fi][now.se]) continue;\n\t\t\t\tans[now.fi][now.se]=i;\n\t\t\t\tif (now.fi>1)\n\t\t\t\t{\n\t\t\t\t\tjinmi[now.fi-1][now.se]++;\n\t\t\t\t\tG[v[now.fi-1][now.se]][jinmi[now.fi-1][now.se]].push(mp(-(now.fi-1+now.se),-now.fi+1));\n\t\t\t\t}\n\t\t\t\tif (now.se>1)\n\t\t\t\t{\n\t\t\t\t\tjinmi[now.fi][now.se-1]++;\n\t\t\t\t\tG[v[now.fi][now.se-1]][jinmi[now.fi][now.se-1]].push(mp(-(now.fi-1+now.se),-now.fi));\n\t\t\t\t}\n\t\t\t\tif (now.fi<n)\n\t\t\t\t{\n\t\t\t\t\tjinmi[now.fi+1][now.se]++;\n\t\t\t\t\tG[v[now.fi+1][now.se]][jinmi[now.fi+1][now.se]].push(mp(-(now.fi+1+now.se),-now.fi-1));\n\t\t\t\t}\n\t\t\t\tif (now.se<m)\n\t\t\t\t{\n\t\t\t\t\tjinmi[now.fi][now.se+1]++;\n\t\t\t\t\tG[v[now.fi][now.se+1]][jinmi[now.fi][now.se+1]].push(mp(-(now.fi+1+now.se),-now.fi));\n\t\t\t\t}\n\t\t\t\tbl=1;break;\n\t\t\t}\n\t\t\tif (bl) break;\n\t\t}\n\t}\n\tfor (int i=1;i<=n;i++)\n\t{\n\t\tfor (int j=1;j<=m;j++) writesp(ans[i][j]);\n\t\tputs(\"\");\n\t}\n}\nsigned main()\n{\n\tint T=1;\n\twhile (T--)\n\t{\n\t \t  What_will_Diana_eat_today();\n\t}\n}\n/*\n\n*/\n\n```\n\n",
        "postTime": 1639441360,
        "uid": 120911,
        "name": "Lynkcat",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P7975 \u300cStoi2033\u300d\u5206\u88c2"
    }
]
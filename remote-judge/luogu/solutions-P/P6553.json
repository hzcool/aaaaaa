[
    {
        "content": "\u8fd9\u9053\u9898\u7684\u9898\u610f\u5f88\u7b80\u5355\u8fd9\u91cc\u5c31\u4e0d\u8d58\u8ff0\u4e86  \n\n\u9996\u5148\u770b\u6570\u636e\u8303\u56f4,$n<=10^6$, $m<=10^3$,\u80af\u5b9a\u4e0d\u80fd\u66b4\u529b\u6c42\u89e3\u4e86\uff0c\u4f46\u662f\u5bf9\u4e8e\u8fd9\u9053\u9898\uff0c$1,4,5$\u7684\u6240\u5728\u4f4d\u7f6e\u5bf9\u7b54\u6848\u6ca1\u6709\u5f71\u54cd\uff0c**\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u8bb0\u5f55$1,4,5$\u7684\u6570\u91cf\uff0c\u6bcf\u6b21\u4fee\u6539\u65f6\u7ef4\u62a4\u8fd9\u4e2a\u6570\u91cf\u5c31\u53ef\u4ee5\u4e86**,\u4f46\u662f\u6bcf\u6b21\u8be2\u95ee\u4e58\u79ef\u65f6\u5982\u679c\u76f4\u63a5\u6c42\u7684\u8bdd\u4f1aTLE,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u9884\u5904\u7406\u51fa$4,5$\u7684\u6b21\u5e42\u6765\uff0c\u6bcf\u6b21\u8be2\u95ee\u76f4\u63a5\u8c03\u7528\u5c31\u597d\u4e86\n\n\u6ce8\u610f\u6a21\u6570\u662f99824353\uff0c\u4e0d\u8981\u60f3\u5f53\u7136 ~~(Ctrl+C\u662f\u4e2a\u597d\u4e1c\u897f)~~\n\n\u4e0b\u9762\u662f\u4ee3\u7801\u8be6\u89e3\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 1000000\nusing namespace std;\ntypedef long long ll;\nint m, tot[6], a[MAXN+5];\nll pow4[MAXN+5], pow5[MAXN+5];\nconst ll mod = 99824353;\nint main()\n{\n\tpow4[0] = pow5[0] = 1;//\u9884\u5904\u74064,5\u7684\u6b21\u5e42\n\tfor(int i = 1; i <= MAXN; i++)\n\t\tpow4[i] = (pow4[i-1]*4) % mod, pow5[i] = (pow5[i-1]*5) % mod;\n\tchar ch;\n\tint cnt = 0;\n\twhile(ch = getchar(), ch != '\\n')\n\t{//\u9017\u53f7\u8868\u8fbe\u5f0f\u8fd4\u56de\u6700\u540e\u4e00\u4e2a\u8bed\u53e5\u7684\u503c,\u8fd9\u4e2awhile\u5c31\u662f\u6bcf\u6b21\u8bfb\u5165\u4e00\u4e2a\u5b57\u7b26\u5b58\u5230ch\u91cc,\u5982\u679cch\u662f\u6362\u884c\u5c31\u7ed3\u675f\u5faa\u73af\n\t\tcnt++;\n\t\ta[cnt] = ch-'0';\n\t\ttot[a[cnt]]++;//\u6570\u636e\u53ea\u67091,4,5\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u6570\u7ec4\u4e0b\u6807\u5bf9\u5e94\n\t}\n\tscanf(\"%d\", &m);\n\twhile(m--)\n\t{\n\t\tint l, r;\n\t\tscanf(\"%d%d\", &l, &r);getchar();//\u6ce8\u610f\u8fd9\u91cc\u8981\u5148\u7528\u4e00\u4e2agetchar()\u8bfb\u6389r\u540e\u9762\u7684\u7a7a\u683c,\u4e0d\u7136\u4f1aRE\n\t\tfor(int i = l; i <= r; i++)\n\t\t{\n\t\t\tint x = getchar()-'0';\n\t\t\ttot[a[i]]--;//\u539fa[i]\u5bf9\u5e94\u7684\u6570\u7684\u6570\u91cf\u51cf\u4e00\n\t\t\ttot[x]++;//\u65b0a[i]\u5bf9\u5e94\u7684\u6570\u7684\u6570\u91cf\u52a0\u4e00\n\t\t\ta[i] = x;//\u4e00\u5b9a\u8981\u628aa[i]\u6362\u6389,\u4e0d\u7136\u91cd\u590d\u66f4\u65b0\u7684\u65f6\u5019\u4f1a\u51fa\u9519\n\t\t}\n\t\tll sum = (tot[1] + 4*tot[4] + 5*tot[5]) % mod;\n\t\tll p = (pow4[tot[4]] * pow5[tot[5]]) % mod;//\u5df2\u7ecf\u9884\u5904\u7406\u8fc74,5\u7684\u6b21\u5e42\u4e86,\u76f4\u63a5\u8c03\u7528\u5c31\u53ef\u4ee5 (\u6ca1\u67091\u7684\u539f\u56e0\u90fd\u61c2)\n\t\tprintf(\"%d %lld %lld\\n\", tot[1], sum, p);//\u6ce8\u610flonglong\u8981\u7528%lld,\u4e0d\u7136\u4f1a\u89c1\u7956\u5b97\u7684\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1603787925,
        "uid": 239167,
        "name": "Ptilopsis_w",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P6553 \u3010Strings of Monody\u3011"
    },
    {
        "content": "\u597d\u4e45\u4e4b\u524d\u6bd4\u8d5b\u6253\u7684\uff0c\u7136\u540e\u4f17\u6240\u5468\u77e5\u6211\u8fd9\u4e2a\u83dc\u9e21\u6253\u6bd4\u8d5b\u4e0d\u5e26\u8111\u5b50\uff0c\u4e8e\u662f\u5c31\u786c\u4e0a\u4e86\u4e00\u6ce2\u7ebf\u6bb5\u6811\uff08\u4e0d\u8fc7\u597d\u50cf\u633a\u5feb\u5c31\u5199\u51fa\u6765\u4e86\n\n\u601d\u8def\u5176\u5b9e\u6ca1\u4ec0\u4e48\u7279\u522b\u7684\u3002\u5982\u679c\u8fd9\u9898\u8981\u4e0a\u7ebf\u6bb5\u6811\u7684\u8bdd\uff0c\u5176\u5b9e\u5c31\u662f\u7ed9\u4f60\u4e00\u4e2a\u677f\u5b50\uff0c\u8981\u6c42\u652f\u6301\u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u548c\uff0c\u533a\u95f4\u4e58\u548c\u67d0\u4e2a\u6570\u5b57\u7684\u4e2a\u6570\u3002\n\n\u67d0\u4e2a\u6570\u5b57\u7684\u4e2a\u6570\u53ea\u9700\u8981\u9884\u5904\u7406\u51fa\u6765\uff0c\u5728\u4fee\u6539\u7684\u65f6\u5019\u7edf\u8ba1\u5373\u53ef\u3002\n\n\u5177\u4f53\u4e3a\u5982\u679c\u4fee\u6539\u7684\u6570\u4e3a 1 \u800c\u539f\u672c\u4e0d\u4e3a 1\uff0c\u90a3\u4e48 1 \u7684\u4e2a\u6570++\u3002\u53cd\u4e4b\u5982\u679c\u539f\u672c\u7684\u6570\u4e3a 1 \u4fee\u6539\u540e\u4e0d\u4e3a 1\uff0c 1 \u7684\u4e2a\u6570++\u3002\u5176\u4ed6\u60c5\u51b5\u4e0d\u53d8\u4e2a\u6570\u4e0d\u53d8\u3002\n\n\u6ce8\u610f\u4fee\u6539\u540e\u8981\u66f4\u65b0\u67d0\u4e2a\u4f4d\u7f6e\u7684\u6570\u5b57\u3002\n\n\u533a\u95f4\u548c\u548c\u533a\u95f4\u4e58\u5c31\u4e0d\u8bb2\u4e86\uff0c\u4e0d\u4f1a\u7684\u5de6\u8f6c\u6a21\u677f\u7ebf\u6bb5\u6811 2\n\n\u4ee3\u7801\uff1a\n```\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n#define lson (way<<1)\n#define rson (way<<1|1)\n#define mid (l+r)/2\nconst int MAXN = 1e6+5;\nconst int mod =99824353;\nlong long n,pos[MAXN],m,ans1,ans2,ans3=1;\nlong long seg[MAXN<<2][2];\ninline void build(int way, int l, int r){\n  if (l==r) {seg[way][0] = seg[way][1] = pos[l];return;}\n  build(lson,l,mid);\n  build(rson,mid+1,r);\n  seg[way][0]=(seg[lson][0]+seg[rson][0])%mod;\n  seg[way][1]=(seg[lson][1]*seg[rson][1])%mod;\n}\ninline void update(int way, int l, int r, int qlow, int val){\n  if (l==r && r==qlow) {\n    seg[way][0] = seg[way][1] = val;\n    return;\n  }\n  if (mid>=qlow) update(lson,l,mid,qlow,val);\n  else update(rson,mid+1,r,qlow,val);\n  seg[way][0]=(seg[lson][0]+seg[rson][0])%mod;\n  seg[way][1]=(seg[lson][1]*seg[rson][1])%mod;\n}\ninline int read(){\n    register int a=0,f=1;register char c;\n    while((c=getchar())<'0')if(c=='-')f=-1;;\n    while(c>='0')a=a*10+(c^48),c=getchar();\n    return a*f;\n}\nstring s;\nint main(){\n  ios_base::sync_with_stdio(0);\n  cin >> s;\n  for (int i=1;i<=s.length();i++) {\n    pos[i]= (int)s[i-1]-48;\n    ans1+=(pos[i]==1);//\u7edf\u8ba11\n  }\n  n = s.length();\n  build(1,1,n);\n  cin >> m;\n  for (int l,r, i=1;i<=m;i++){\n    cin >> l >> r >> s;\n    int curr = -1;\n    for (int j=l;j<=r;j++){\n      int now = (int)(s[++curr]-48);\n      ans1+= (now==1) - (pos[j]==1);\n      update(1,1,n,j,now);//\u7ebf\u6bb5\u6811\u66f4\u65b0\n      pos[j] = now;//\u6ce8\u610f\u66f4\u65b0\u65f6\u8981\u628a\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u6570\u66f4\u4e86\uff0c\u8981\u4e0d\u7edf\u8ba11\u7684\u6570\u91cf\u4f1a\u51fa\u9519\n    }\n    printf(\"%d %d %d\\n\",ans1,seg[1][0],seg[1][1]);\n  }\n}\n\n```",
        "postTime": 1598943448,
        "uid": 219099,
        "name": "pocafup",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6553 \u3010Strings of Monody\u3011"
    },
    {
        "content": "\u4e4d\u4e00\u773c\u8fd8\u4ee5\u4e3a\u8981\u7ebf\u6bb5\u6811\uff0c\u540e\u6765\u53d1\u73b0\u5176\u5b9e\u5f88\u7b80\u5355\u3002\n\u9898\u76ee\u8981\u6c42\u7684\u662f\uff1a\n1. 1 \u7684\u4e2a\u6570\u3002\n1. \u6574\u4e2a\u5b57\u7b26\u4e32\u6bcf\u4e2a\u6570\u4f4d\u7684\u603b\u548c\u3002\n1. \u6574\u4e2a\u5b57\u7b26\u4e32\u6bcf\u4e2a\u6570\u4f4d\u7684\u4e58\u79ef\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u5b57\u7b26\u4e32\u7ec4\u6210\u7684\u6570\u5b57\u53ea\u6709 $1$ $4$ $5$ 3\u79cd\uff0c\u6240\u4ee5\u89e3\u51b3\u4e09\u4e2a\u95ee\u9898\u53ea\u9700\u8981\u5206\u522b\u7edf\u8ba1\u51fa $1$ $4$ $5$ \u4e09\u4e2a\u6570\u7684\u4e2a\u6570\u3002\n\n\u5bf9\u4e8e\u95ee\u9898\u4e00\uff0c\u76f4\u63a5\u8f93\u51fa\u5373\u53ef\uff1b\u5bf9\u4e8e\u95ee\u9898\u4e8c\uff0c\u628a3\u4e2a\u6570\u5b57\u5206\u522b\u4ee5\u6570\u503c\u4e58\u4ee5\u51fa\u73b0\u6b21\u6570\u76f8\u52a0\u6c42\u548c\u5373\u53ef\uff1b\u5bf9\u4e8e\u95ee\u98983\uff0c\u7531\u4e8e\u6bcf\u6b21\u8ba1\u7b97\u6210\u7ee9\u6d88\u8017\u65f6\u95f4\u8fc7\u5927\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651**\u9884\u5904\u7406**\u6bcf\u4e2a\u6570\u7684 $k$ \u6b21\u65b9\uff0c\u7136\u540e\u76f4\u63a5\u5e26\u5165\u5f97\u89e3\u3002\n\n\u7ee7\u7eed\u2026\u2026\n\n\u5148\u7edf\u8ba1\u539f\u4e32\u4e2a\u6570\u5b57\u4e2a\u6570\uff0c\u6bcf\u6b21\u4fee\u6539\u7684\u65f6\u5019\u53ef\u4ee5\u987a\u5e26\u628a\u6570\u5b57\u4e2a\u6570\u7edf\u8ba1\u51fa\u6765\uff0c\u6309\u4e0a\u8ff0\u65b9\u6cd5\u8ba1\u7b97\u8f93\u51fa\u5373\u53ef\u3002\n\n\u4e0b\u9762\u662f\u4ee3\u7801\uff08\u5e94\u8be5\u90fd\u80fd\u770b\u61c2\u5427\uff09\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nchar s[1000011],a[1000011];\nint n,m,l,r,h[11],mod=99824353,q4[1000011],q5[1000011];\nint main()\n{\n\tscanf(\"%s\",s+1);\n\tn=strlen(s+1);\n\tscanf(\"%d\",&m);\n\tfor(int i=1;i<=n;i++) h[s[i]-48]++;\n\tq4[0]=q5[0]=1;\n\tfor(int i=1;i<=1000000;i++) q4[i]=(q4[i-1]*4)%mod,q5[i]=(q5[i-1]*5)%mod;\n\twhile(m--)\n\t{\n\t\tscanf(\"%d%d%s\",&l,&r,a);\n\t\tfor(int i=l;i<=r;i++) h[s[i]-48]--,h[a[i-l]-48]++,s[i]=a[i-l];\n\t\tprintf(\"%d %d %lld\\n\",h[1],h[1]+h[4]*4+h[5]*5,(long long)(q4[h[4]])*(q5[h[5]])%mod);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1589208775,
        "uid": 132047,
        "name": "lycx03",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6553 \u3010String of Monody\u3011"
    },
    {
        "content": "\u6b64\u9898\u7adf\u7136\u6709\u70b9\u5361python\uff0c\u4e0d\u5f00\u68ee/kk\n\n~~400ms\u7684\u65f6\u95f4\u662f\u6709\u6bd2\u5417~~\n\n\u7b2c\u4e00\u773c\u770b\u4e0a\u53bb\u5c31\u51c6\u5907\u4e0a\u7ebf\u6bb5\u6811\u4e86\uff0c\u7ed3\u679c\u53d1\u73b0\u6211\u4e2a\u83dc\u9e21\u4e0d\u4f1a\u5904\u7406\u5b57\u7b26\u4e32/kk\n\n\u770b\u4e86\u4e0b\u6570\u636e\uff0c\u5c31\u51b3\u5b9a\u6253\u4f18\u5316\u8fc7\u7684\u66b4\u529b\u4e86\n\n\u4f5c\u4e3a\u666e\u53ca-\u7684\u9898\u76ee\uff0c\u76f4\u63a5\u66b4\u529b\u7684\u590d\u6742\u5ea6\u662fO(nm)\uff0c1e9\u7edd\u5bf9\u8d85\u51fa\u65f6\u95f4\u9650\u5236\uff0c\u8003\u8651\u4f18\u5316\uff0c\u6bcf\u6b21\u53ea\u7b97\u66f4\u6539\u90e8\u5206\u7684\u53d8\u5316\uff0c\u590d\u6742\u5ea6\u4e3aO(m(r-l+1)\uff0c\u4e0d\u8d85\u8fc71e6\uff0c\u53ef\u4ee5\u8dd1\u8fc7\u53bb\u3002\n\n\u4ee3\u7801\u975e\u5e38\u7b80\u5355\uff0c\u601d\u8def\u5176\u5b9e\u4e5f\u5f88\u7b80\u5355\uff0c\u4ee3\u7801\u57fa\u672c\u6bcf\u884c\u90fd\u6709\u6ce8\u91ca\uff0c\u5bb9\u6613\u98df\u7528\n\n# Code\n```python\nn = input()#\u8f93\u5165n\nm = int(input())#\u8f93\u5165m\nans1 = 0#\u8bb0\u5f55\u6bcf\u6b21\u7684\u548c\nc4 = n.count('4')#4\u51fa\u73b0\u6b21\u6570\nc5 = n.count('5')#5\u51fa\u73b0\u6b21\u6570\nc1 = n.count('1')#6\u51fa\u73b0\u6b21\u6570\nfor i in n:#\u8ba1\u7b97\u51fa\u539f\u6765\u7684\u548c\n    ans1 += int(i)\nfor i in range(m):#m\u6b21\u95ee\u7b54\n    s = input().split()#python\u6bcf\u6b21\u8bfb\u5165\u4e00\u884c\n    l, r, s = int(s[0]), int(s[1]), s[2]#\u8d4b\u503c\u7ed9lrs\n    s1 = n[l - 1: r]#\u622a\u53d6\u51fa\u8981\u66ff\u6362\u7684\u90a3\u4e00\u6bb5\n    ans2 = 0#\u8ba1\u7b97\u548c\u66f4\u6539\u4e86\u591a\u5c11\n    for j in range(len(s)):\n        ans2 += int(s[j]) - int(s1[j])#\u8ba1\u7b97\u6bcf\u4f4d\u4e0a\u7684\u589e\u52a0\n    c1 += s.count('1') - s1.count('1')#\u8ba1\u7b97\u589e\u52a0\u76841\u7684\u4e2a\u6570\n    c4 += s.count('4') - s1.count('4')#\u8ba1\u7b97\u589e\u52a0\u76844\u7684\u4e2a\u6570\n    c5 += s.count('5') - s1.count('5')#\u8ba1\u7b97\u589e\u52a0\u76845\u7684\u4e2a\u6570\n    ans1 += ans2#\u8ba1\u7b97\u51fa\u66f4\u6539\u540e\u7684\u548c\n    n = n[:l-1] + s + n[r:]#\u66ff\u6362\u5b57\u7b26\u4e32\n    print(c1, end=' ')#\u8f93\u51fa1\u7684\u4e2a\u6570\n    print(ans1, end=' ')#\u8f93\u51fa\u548c\n    print(4 ** c4 * 5 ** c5)#\u8f93\u51fa\u79ef\uff0cpython\u81ea\u5e26\u5feb\u901f\u5e42\n\n\n```\n\n\u795d\u5927\u5bb6\u6691\u5047\u5feb\u4e50~",
        "postTime": 1595221555,
        "uid": 220426,
        "name": "\u8840\u8272\u9ec4\u660f",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6553 \u3010String of Monody\u3011"
    },
    {
        "content": "\u849f\u84bb\u6765\u4e00\u53d1\u9898\u89e3\u3002\n\n\u9996\u5148\uff0c\u6700\u5bb9\u6613\u60f3\u5230\u7684\u5c31\u662f\u66b4\u529b\u4e86\u3002\u4f46\u662f\u90a3\u6837\u5bb9\u6613T\u6389\u3002\n\u7136\u540e\uff0c\u770b\u4e00\u4e0b\u9898\u76ee\uff0c\u8003\u8651\u5982\u4f55\u5316\u7b80\u6211\u4eec\u7684\u66b4\u529b\u3002\n\n\u9898\u76ee\u4e2d\u7684\u6570\u5b57\u53ea\u53ef\u80fd\u67091\u3001 4\u3001 5\u4e09\u79cd\u6570\u5b57\u3002\u8fd9\u6837\u5c31\u597d\u529e\u4e86\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u5f003\u4e2a\u6570\u7ec4\uff0c\u7ef4\u62a4\u6211\u4eec\u6570\u5217\u4e2d\u6709\u591a\u5c11\u4e2a1,4,5.\n\u5bf9\u4e8e\u95ee\u98981\uff0c\u76f4\u63a5\u8f93\u51fa\u3002\n\n\u5bf9\u4e8e\u95ee\u98982\uff0c\u8fd8\u662f\u76f4\u63a5\u8ba1\u7b97\u8f93\u51fa\u3002\uff08\u76f4\u63a5\u624b\u6478\u4e58\u6cd5\u7b97\u5f0f\uff0c\u8fd9\u90fd\u4f1a\u5427\uff09\u3002\n\n\u5176\u6b21\uff0c\u5bf9\u4e8e\u4e58\u6cd5\u7684\u8be2\u95ee\uff0c\u6211\u4eec\u76f4\u63a5\u9884\u5904\u7406\u51fa\u6240\u67094\u548c5\u7684\u6b21\u65b9\u3002\n\n\u7136\u540e\u5168\u90e8\u76f4\u63a5\u8f93\u51fa\u5c31\u597d\u4e86\u3002\n\n\u4e0a\u4ee3\u7801\uff1a\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 10000100\n#define mod 99824353\n\ninline int read(){\n\tint x = 0, s = 1;\n\tchar c = getchar();\n\twhile(!isdigit(c)){\n\t\tif(c == '-')s = -1;\n\t\tc = getchar();\n\t}\n\twhile(isdigit(c)){\n\t\tx = (x << 1) + (x << 3) + (c ^ '0');\n\t\tc = getchar();\n\t}\n\treturn x * s; \n}\n\nint Log4[N], Log5[N];\nint num[666];\nchar s[N], a[N];\n\nint main(){\n\tcin >> s + 1;\n\tint n = strlen(s + 1);\n\tfor(int i = 1;i <= n; i++)\n\t\tnum[s[i] - '0']++;\n\tLog5[0] = Log4[0] = 1;\n\tLog5[1] = 5; Log4[1] = 4;\n\tfor(int i = 2;i <= (int)1e6; i++)\n\t\tLog5[i] = (Log5[i - 1] * 5) % mod, Log4[i] = (Log4[i - 1] * 4) % mod;\n\tint m = read();\n\twhile(m--){\n\t\tint l = read(), r = read(); cin >> a;\n\t\tfor(int i = l;i <= r; i++){\n\t\t\tnum[s[i] - '0']--; num[a[i - l] - '0']++; s[i] = a[i - l];\n\t\t}\n\t\tprintf(\"%d %d %lld\\n\", num[1], num[1] + (num[4] << 2) + (num[5] * 5) % mod, (long long)Log4[num[4]] * Log5[num[5]] % mod);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1589645384,
        "uid": 234224,
        "name": "\u9752\u9e1f_Blue_Bird",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P6553 \u3010String of Monody\u3011"
    },
    {
        "content": "\u65e5\u5e38\u5199\u9898\u89e3\n\n\u54b3\u54b3\uff0c\u6211\u6700\u559c\u6b22\u7528\u7684STL\u5bb9\u5668\u5c31\u662f$map$\u4e86\uff0c\u8fd9\u9898\u6211\u5c31\u7528\u4e86$map$\n\n$map$\uff0c\u4e5f\u5c31\u662f\u7ea2\u9ed1\u6811\uff0c\u8868\u73b0\u7684\u662f\u952e->\u503c\u7684\u6620\u5c04\n\n$map$\u91cd\u70b9\uff1a\n\n1.\u5934\u6587\u4ef6\uff1a\u4e07\u80fd\u5934 \u6216\u7528 #$include$<$map$>\n\n2.\u5b9a\u4e49\u65b9\u5f0f\uff1a$map$ <\u7c7b\u578b\uff0c\u7c7b\u578b> \u540d\u79f0;//\u7c7b\u578b\u6307\u968f\u610f\u7c7b\u578b\uff0c\u6bd4\u5982\u8bf4\uff1a$int$\uff0c$bool$\uff0c$string$...\n\n$e.g.$ $map$<$int,char$> $p$; \u3000 $map$<$string,char$> $p$;\n\n3.$map$\u5bb9\u5668\u6700\u5927\u7684\u4f18\u70b9\u5c31\u5728\u4e8e\u5b83\u53ef\u4ee5\u5feb\u901f\u5b9a\u4f4d\u5e76\u8bfb\u53d6\u67d0\u4e00\u952e\u503c\u7684\u5143\u7d20\n\n4.\u7528\u4e0b\u6807\u8bbf\u95ee$map$\u4e2d\u4e0d\u5b58\u5728\u7684\u5143\u7d20\u65f6\uff0c\u5c06\u5bfc\u81f4\u5411$map$\u4e2d\u6dfb\u52a0\u8be5\u4e0b\u6807\u6240\u6307\u5411\u7684\u65b0\u5143\u7d20\n\n\u5176\u503c\u4f1a\u6839\u636e\u7c7b\u578b\u9ed8\u8ba4\u503c\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u8fdb\u884c\u521d\u59cb\u5316\uff08\u5982$int$\u521d\u59cb\u5316\u4e3a$0$,$string$\u521d\u59cb\u5316\u4e3a\"\"\uff09\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```c++\n#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef long long ll;\n\nconst ll mod=99824353;\n\nchar a[1000100],b[1000100];\n\ninline ll read(){//\u5feb\u8bfb\n    ll x=0,f=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        if(ch=='-')\n            f=-1;\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    return x*f;\n}\ninline void output(ll x) {//\u5feb\u8f93\n\tif(x/10) output(x/10);\n\tputchar(x%10+'0');\n}\n\nll j[1000100]={1},k[1000100]={1};//\u5206\u522b\u8bb0\u5f554\u7684n\u6b21\u5e42\u548c5\u7684n\u6b21\u5e42\nmap<char,ll> p;//\u8bb0\u5f55\nint main()\n{\n \tscanf(\"%s\",a);\n \tll len=strlen(a);\n \tfor(ll i=0;i<len;++i) ++p[a[i]];//\u8bb0\u5f55\n    //cout<<p['1']<<endl<<p['4']<<endl<<p['5']<<endl;\n \tll n;\n \tn=read();\n    for(ll i=1,s=1,t=1;i<=1000001;++i){//\u9884\u5904\u74064\u7684n\u6b21\u5e42\u548c5\u7684n\u6b21\u5e42\n\t\ts=s*4%mod;\n\t\tt=t*5%mod;\n        j[i]=s;\n        k[i]=t;\n\t}\n \twhile(n--)\n \t{\n \t\tll l,r;\n \t\tl=read(),r=read();\n \t\tscanf(\"%s\",b);\n \t\tfor(ll i=l-1;i<=r-1;++i){\n \t\t\t--p[a[i]];\n            //cout<<p['1']<<endl;\n \t\t\t++p[b[i-l+1]];\n            //cout<<p['1']<<endl;\n \t\t\ta[i]=b[i-l+1];\n\t\t}\n\t\toutput(p['1']);\n        putchar(' ');\n        output((p['1']+p['4']*4+p['5']*5)%mod);\n        putchar(' ');\n        output(j[p['4']]*k[p['5']]%mod);\n        puts(\"\");\n    }\n \treturn 0;\n}\n\n```",
        "postTime": 1589419815,
        "uid": 295504,
        "name": "Into_qwq",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6553 \u3010String of Monody\u3011"
    },
    {
        "content": "\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u65e0\u8111\u7684\u975e\u6570\u636e\u7ed3\u6784\u65b9\u6cd5\u3002\n\n\u5f88\u660e\u663e\u4e0d\u80fd\u66b4\u529b\uff0c\u6211\u4eec\u5c1d\u8bd5\u8bb0\u5f55\u4e0b\u5b57\u7b26\u4e32 `1`\u3001`4`\u3001`5` \u51fa\u73b0\u6b21\u6570\uff0c\u8fd9\u6837\u5355\u6b21\u4fee\u6539\u65f6\u53ef\u4ee5\u505a\u5230\u6700\u574f $O(n)$ \u7684\u590d\u6742\u5ea6\uff0c\u4e0e\u66b4\u529b\u4e00\u6837\u3002\u4f46\u662f\u8be2\u95ee\u53ef\u4ee5\u505a\u5230 $O(\\log_2 n)$ \u590d\u6742\u5ea6\uff0c\u4e5f\u5c31\u662f\u5feb\u901f\u5e42\u7684\u590d\u6742\u5ea6\u3002\n\n\u4f46\u662f\u4e3a\u4e86\u533a\u522b\u4e0e\u5176\u4ed6\u9898\u89e3\uff1a\n\n\u6211\u7528\u54c8\u5e0c\uff01\n\n\u54c8\u5e0c\u901a\u5e38\u662f\u5b57\u7b26\u4e32\u54c8\u5e0c\uff0c\u4f46\u662f\u5355\u4e2a\u5b57\u7b26\u4e0d\u4e5f\u53ef\u4ee5\u54c8\u5e0c\u5417\uff1f\u56e0\u4e3a\u6211\u54c8\u5e0c\u6ca1\u5b66\u597d\uff0c\u6240\u4ee5\u6211\u4eec\u9884\u5904\u7406\u65f6\u7528 `rand()` \u51fd\u6570\u968f\u673a\u627e\u5230\u4e00\u4e2a\u503c\uff0c\u5728\u54c8\u5e0c\u65f6\u4e0e `char` \u7c7b\u578b\u5b57\u7b26\u54c8\u5e0c\u3002\u52a0\u4e0a\u5feb\u901f\u5e42\u548c\u5404\u79cd\u7384\u5b66\u4f18\u5316\u3002\n\n\u4f46\u662f\u660e\u663e\u6211\u4eec\u53ef\u4ee5\u9884\u5904\u7406\uff0c\u56e0\u4e3a\u53ea\u4f1a\u51fa\u73b0 `1`\u3001`4`\u3001`5`\uff0c\u6240\u4ee5\u8003\u8651\u9884\u5904\u7406 `1`\u3001`4`\u3001`5` \u7684\u54c8\u5e0c\u503c\uff0c\u8fd9\u6837\u5c31\u65e0\u9700\u91cd\u590d\u8ba1\u7b97\u3002\n\n\u81f3\u4e8e\u65f6\u95f4\uff0c\u4e5f\u4e0d\u662f\u5f88\u957f\uff0c\u4e0d\u5f00 O2 \u4e5f\u5c31 $160ms$\u3002\n\n\u4e0d\u8fc7\u597d\u6b79\u80fd\u8fc7\uff0c$100ms$ \u9650\u5236\u6709\u70b9\u6bd2\u7624\u554a\uff01\n\n\u4ee3\u7801\u8fc7\u957f\uff0c\u70b9[\u8fd9\u91cc](https://www.luogu.com.cn/paste/ynleg1lz)\u3002",
        "postTime": 1643639441,
        "uid": 332914,
        "name": "happybob",
        "ccfLevel": 6,
        "title": "P6553 Strings of Monody"
    },
    {
        "content": "\u8fd9\u9898\u5f88\u5bb9\u6613\u60f3\u5230\u66b4\u529b\u679a\u4e3e\u66ff\u6362\uff0c\u7136\u540e\u5728\u626b\u4e00\u904d\uff0c\u8fdb\u884c1,2,3\u64cd\u4f5c\u3002\u4f46\u89c2\u5bdf\u6570\u636e\u8303\u56f4\uff1a$n<=10^6,m<=10^3$ \u66b4\u529b\u663e\u7136\u8d85\u65f6\uff0c\u4e8e\u662f\u6211\u4eec\u9700\u8981\u4f18\u5316\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u628a\u539f\u5b57\u7b26\u4e32\u4e2d\u76841,4,5\u7684\u4e2a\u6570\u7b97\u51fa\u3002\u5728\u66ff\u6362\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u628a\u66ff\u6362\u6389\u540e1,4,5\u7684\u4e2a\u6570\u7edf\u8ba1\u51fa\u6765\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a\u4e00\u4e2a$O(n*m)$\u7684\u7a0b\u5e8f\u6539\u4e3a$o(m*(r-l+1))$\u7684\u7a0b\u5e8f\u3002\u8fd9\u662f\u7b2c1,2\u95ee\u7684\u7b54\u6848\u5c31\u51fa\u6765\u4e86\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u518d\u6765\u5904\u7406\u7b2c3\u95ee\u3002\u663e\u7136\u66b4\u529b\u7b97\u4e58\u6cd5\u4f1a\u8d85\u65f6\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u8981\u7528\u5230**\u5feb\u901f\u5e42**\u53bb\u8ba1\u7b97\u3002\n\n\u6700\u540e\uff0c\u8bf7\u6ce8\u610f\u6a21\u6570\u662f998**24**353\uff0c\u800c\u4e0d\u662f998**244**353\uff0c\u8fd9\u4e5f\u544a\u8bc9\u6211\u4eec\uff1a\u8981\u4ed4\u7ec6\u8bfb\u9898\uff0c\u4e0d\u80fd\u9760\u81ea\u5df1\u7684\u7ecf\u9a8c\u5c31\u6253\u4ee3\u7801\u3002\n\ncode:\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define ll long long\nll mod=99824353;\nll ksm(ll a,ll b){//\u5feb\u901f\u5e42\n\tll ans=1,p=a;\n    while(b>0){\n        if(b%2!=0)\n        ans=ans*p%mod;\n        p=p*p%mod;\n        b=b>>1;   \n    }\n    return ans;\n} \nchar a[1000005],b[1000005];\nint main(){\n    long long y,a1=0,a2=0,a3=0,a4=0;\n    cin >> a;\n    int n=strlen(a);\n    int m;\n    scanf(\"%d\",&m);\n    for (register int i=0;i<n;i++){\n    \tif (a[i]=='1') a1++,a4++;\n    \telse if (a[i]=='4') a2++;\n    \telse a3++;\n    }//\u5148\u7edf\u8ba1\u51fa1,4,5\u7684\u4e2a\u6570\n    while(m--){\n    \tlong long ans=1,sum=0,now=0;\n    \tint l,r;\n    \tcin >> l >> r >> b;\n    \tfor (register int i=l-1;i<=r-1;i++){\n\t\t    if (a[i]=='1') a1--,a4--;\n\t\t    else if (a[i]=='4') a2--;\n\t\t    else a3--;\n\t\t    a[i]=b[i-l+1];\n\t\t    if (b[i-l+1]=='1') a1++,a4++;\n\t\t    else if (b[i-l+1]=='4') a2++;\n\t\t    else a3++;//\u5728\u66ff\u6362\u7684\u65f6\u5019\u5c31\u6539\u53d81,4,5\u7684\u4e2a\u6570\n\t\t}\n    \tprintf(\"%lld %lld %lld\\n\",a4,a1+a2*4+a3*5,(ksm(4,a2)*ksm(5,a3))%mod);//\u8f93\u51fa\u4e09\u4e2a\u95ee\u9898\u7684\u7b54\u6848\n    }\n    return 0;\n}\n```\n",
        "postTime": 1603969196,
        "uid": 261417,
        "name": "asasas",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P6553 \u3010Strings of Monody\u3011"
    },
    {
        "content": "## Content\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5b57\u7b26\u4e32 $s$\uff08\u4ec5\u5305\u542b $1,4,5$ \u4e09\u79cd\u5b57\u7b26\uff0c$n$ \u5728\u672c\u9898\u4e2d\u65e0\u9700\u8f93\u5165\uff09\uff0c\u6709 $m$ \u4e2a\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u7ed9\u5b9a\u4e24\u4e2a\u6574\u6570 $l,r$\uff0c\u518d\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32 $s'$\uff0c\u5c06 $s$ \u7684\u4ece $l$ \u5230 $r$ \u7684\u5b50\u4e32\u6362\u6210 $s'$\u3002\u8bf7\u5728\u6bcf\u6b21\u64cd\u4f5c\u540e\u6c42\u51fa\uff1a\n\n1. \u5b57\u7b26\u4e32\u4e2d $1$ \u7684\u4e2a\u6570\u3002\n2. \u5b57\u7b26\u4e32\u4e2d\u6240\u6709\u6570\u7684\u603b\u548c\u3002\n3. \u5b57\u7b26\u4e32\u4e2d\u6240\u6709\u6570\u7684\u4e58\u79ef\u3002\n\n\u4ee5\u4e0a\u6570\u636e\u90fd\u8981\u5bf9 $9982\\color{red}\\text{43}\\color{black}\\text{53}$ \u53d6\u6a21\uff08\u6ce8\u610f\uff01\u4e0d\u662f $998244353$\uff09\u3002\n\n**\u6570\u636e\u8303\u56f4\uff1a$n\\leqslant 10^6,m\\leqslant 10^3,1\\leqslant r-l+1\\leqslant 10^3$\u3002**\n## Solution\n\u8fd9\u9053\u9898\u76ee\u770b\u4e0a\u53bb\u6bd4\u8f83\u9ebb\u70e6\uff0c\u5176\u5b9e\u53ea\u9700\u8981\u66b4\u529b\u6a21\u62df\u5c31\u53ef\u4ee5\u641e\u5b9a\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6bcf\u6b21\u7684\u53d8\u6362\u8303\u56f4\u4e0d\u4f1a\u8d85\u8fc7 $10^3$\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e00\u79cd $\\mathcal{O}(m(r-l+1))$ \u7684\u7b97\u6cd5\u2014\u2014\u6bcf\u6b21\u53ea\u8003\u8651\u53d8\u6362\u8981\u53d8\u6362\u7684\u5b50\u4e32\uff0c\u7136\u540e\u66f4\u65b0\u8981\u6c42\u7684\u4e09\u4e2a\u95ee\u9898\u7684\u7b54\u6848\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5f00\u4e00\u4e2a\u8ba1\u6570\u5668 $ans_1,ans_4,ans_5$\uff08$ans_i$ \u8868\u793a $i$ \u5728\u5b57\u7b26\u4e32\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\uff09\uff0c\u6bcf\u6b21\u64cd\u4f5c\u5c31\u8981\u66f4\u65b0\u7740\u4e09\u4e2a\u8ba1\u6570\u5668\u7684\u503c\uff0c\u90a3\u4e48\u4e09\u4e2a\u95ee\u9898\u7684\u7b54\u6848\u5c31\u662f $ans_1,ans_1+4\\times ans_4+5\\times ans_5,4^{ans_4}\\times5^{ans_5}$\uff08\u81f3\u4e8e\u7b2c\u4e09\u4e2a\u7b54\u6848\u4e3a\u4ec0\u4e48\u4e0d\u9700\u8981\u4e58 $1^{ans_1}$ \u5927\u5bb6\u5e94\u8be5\u90fd\u5f04\u5f97\u660e\u767d\uff0c\u5728\u6b64\u4e0d\u518d\u8d58\u8ff0\uff09\u3002\n\n\u8fd9\u91cc\u5e42\u6b21\u65b9\u53d6\u6a21\u660e\u6446\u7740\u7528[\u5feb\u901f\u5e42](https://www.luogu.com.cn/problem/P1226)\u8f7b\u677e\u641e\u5b9a\u3002\n\n\u6700\u540e\u4e00\u70b9\u5751\u7684\u5c31\u662f\uff1a\u6ce8\u610f\u6a21\u6570\uff0c\u4e0d\u662f $998244353$\uff0c\u8fd9\u91cc\u5e94\u8be5\u662f $99824353$\uff0c\u5c11\u4e86\u4e00\u4e2a $4$\uff01\n\n\u603b\u4f53\u6765\u8bf4\u96be\u5ea6\u4e0d\u7b97\u592a\u5927\uff0c\u4f46\u8981\u8003\u8651\u7684\u7ec6\u8282\u5374\u4e0d\u5c11\u3002\n## Code\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <iostream>\nusing namespace std;\n\ntypedef long long ll;\nll quickpow(ll a, ll b, ll p) {\n\tif(p == 1)\treturn 0;\n\tll res = 1;\n\tb %= p;\n\tfor(; b; b >>= 1) {\n\t\tif(b & 1)\tres = res * a % p;\n\t\ta = a * a % p;\n\t}\n\treturn res;\n} \nll n, m, sum1, sum, mul = 1, aa[17];\nchar s[1000007];\n\nvoid test1() {\n\tprintf(\"%lld %lld %lld\\n\", aa[1], aa[4], aa[5]);\n}\n\nint main() {\n\tscanf(\"%s%d\", s + 1, &m);\n\tn = strlen(s + 1);\n\tfor(int i = 1; i <= n; ++i)\taa[s[i] - '0']++;\n//\ttest1();\n\twhile(m--) {\n\t\tchar tmp[1007];\n\t\tint xx, yy;\n\t\tscanf(\"%d%d%s\", &xx, &yy, tmp + 1);\n\t\tfor(int i = 1; i <= yy - xx + 1; ++i) {\n//\t\t\tprintf(\"%c %c\\n\", s[xx + i - 1], tmp[i]);\n\t\t\taa[s[xx + i - 1] - '0']--;\n\t\t\taa[tmp[i] - '0']++;\n\t\t\ts[xx + i - 1] = tmp[i];\n\t\t}\n//\t\ttest1();\n\t\tprintf(\"%lld %lld %lld\\n\", aa[1], (aa[1] + aa[4] * 4 + aa[5] * 5) % 99824353, (quickpow(4, aa[4], 99824353) * quickpow(5, aa[5], 99824353)) % 99824353);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1600446461,
        "uid": 112917,
        "name": "Eason_AC",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6553 \u3010Strings of Monody\u3011"
    },
    {
        "content": "//\u5176\u5b9e\u8fd9\u9898\u4e0d\u7528\u5f00\u6876\uff0c\u76f4\u63a5\u4e09\u4e2a\u53d8\u91cf\u8bb0\u5f55\u5c31\u53ef\u4ee5\uff0c\u6ce8\u610f\uff0c\u8ba1\u7b97\u4e58\u79ef\u7684\u65f6\u5019\u53ef\u4ee5\u4f18\u5316\uff0c$O(n)$ \u9884\u5904\u7406\u51fa $1,4,5$ \u7684 $x$ \u6b21\u65b9\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5 $O(1)$ \u7528\u4e86\u3002\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mod=99824353;\nint a,b,c,m;//a\u8bb0\u5f551\u7684\u4e2a\u6570\uff0cb\u8bb0\u5f554\u7684\u4e2a\u6570\uff0cc\u8bb0\u5f555\u7684\u4e2a\u6570 \nstring str1,str2;\nint k,p;\nint c4[1000010],c5[1000010];\nint main()\n{\n\tc4[0]=1,c5[0]=1;\n\tfor(int i=1;i<=1000000;i++) \n\t{\n\t\tc4[i]=(c4[i-1]*4)%mod;\n\t\tc5[i]=(c5[i-1]*5)%mod;\n\t}\n\tcin>>str1;\n\tcin>>m;\n\tfor(int i=0;i<str1.size();i++)\n\t{\n\t\t if(str1[i]=='1')\n\t\t a++;\n\t\t if(str1[i]=='4')\n\t\t b++;\n\t\t if(str1[i]=='5')\n\t\t c++;\n\t}\n\twhile(m--)\n\t{\n\t\tint l,r;\n\t\tscanf(\"%d%d\",&l,&r);\n\t\tcin>>str2;\n\t\tl-=1,r-=1,p=0;\n\t\tfor(int i=l;i<=r;i++)\n\t\t{\n\t\t\tif(str1[i]=='1')\n\t\t\ta--;\n\t\t\tif(str1[i]=='4')\n\t\t\tb--;\n\t\t\tif(str1[i]=='5')\n\t\t\tc--;\n\t\t\tif(str2[p]=='1')\n\t\t\ta++;\n\t\t\tif(str2[p]=='4')\n\t\t\tb++;\n\t\t\tif(str2[p]=='5')\n\t\t\tc++;\n\t\t\tstr1[i]=str2[p++];\n\t\t}\n\t\tprintf(\"%d %d %d\\n\",a,a+4*b+5*c,(1ll*c4[b]*c5[c])%mod);\n\t}\n\treturn 0;\n} \n```",
        "postTime": 1599831123,
        "uid": 250699,
        "name": "Herkaii",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P6553 \u3010Strings of Monody\u3011"
    },
    {
        "content": "\u65e5\u5e38\u9898\u89e3\u3002\n\n~~\u4e3a\u4ec0\u4e48\u5de8\u4f6c\u90fd\u662f\u7528\u7ebf\u6bb5\u6811\u7b49\u9ad8\u7aef\u64cd\u4f5c\u505a\u7684\u554a\uff1f\u7ebf\u6bb5\u6811\u662f\u666e\u53ca-\u96be\u5ea6\uff1f~~\n\n\u601d\u8def\uff1a\u6a21\u62df\u5c31\u53ef\u4ee5\u4e86\uff0c\u7528num\u8bb0\u5f55\u6bcf\u4e2a\u6570\u5b57\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u7136\u540e\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u601d\u8def\u4f18\u5316\u4e00\u4e0b4,5\u7684n\u6b21\u5e42 ~~\uff08\u660e\u660e\u662f\u4e0d\u4f1a\u5feb\u901f\u5e42\uff09~~\u3002\n\n\u5177\u4f53\u770b\u4ee3\u7801\uff1a\n\n```\n#include<iostream>\n#include<algorithm>\n#include<stdio.h>\nusing namespace std;\n#define modd 99824353\nstring gt,w;//gt\u662f\u7528\u4e8e\u66f4\u6362\u7684\u5b57\u7b26\u4e32,w\u662f\u7528\u4e8e\u5b58\u50a8\u7684\u5b57\u7b26\u4e32\u3002\nlong long  num1=0,num4=0,num5=0;\n//num[i]\u5b58\u50a8i\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u7531\u4e8ei\u53ea\u6709\u4e09\u4e2a\u5c31\u4e0d\u5f00\u6570\u7ec4\u4e86\u3002\nlong long  f4[10000000]={1,4,16},f5[10000000]={1,5,25};\n//f4[i]\u5b58\u50a84\u7684i\u6b21\u5e42,f5[i]\u5b58\u50a85\u7684i\u6b21\u5e42\u3002\ninline long long q4(long long x){//4\u7684x\u6b21\u5e42\n\tif(f4[x]) return f4[x];//\u5df2\u7ecf\u8ba1\u7b97\u8fc7\n\telse return f4[x]=q4(x-1)*4%modd;//\u6ca1\u6709\u8ba1\u7b97\u8fc7\n}\ninline long long q5(long long x){//5\u7684x\u6b21\u5e42\n\tif(f5[x]) return f5[x];//\u5df2\u7ecf\u8ba1\u7b97\u8fc7\n\telse return f5[x]=q5(x-1)*5%modd;//\u6ca1\u6709\u8ba1\u7b97\u8fc7\n}\ninline long long readln(){//\u5feb\u901f\u8f93\u5165\n    long long  x=0;\n    char ch=getchar();\n    while(ch<'0' or ch>'9')\n        ch=getchar();//\u6ca1\u6709\u8d1f\u6570,\u65e0\u9700\u7279\u5224'-'\n    while(ch>='0' and ch<='9')\n        x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n    return x;\n}\nvoid solve(){//\u6838\u5fc3\u4ee3\u7801\n\tlong long  l=readln(),r=readln();//\u8f93\u5165l,r\n\tcin>>gt;//\u8f93\u5165\u5b57\u7b26\u4e32\n\tfor(long long  i=0;i<=r-l;i++){\n\t\tswitch(gt[i]){//\u5982\u679cgt[i]\u662f...\n\t\t\tcase '1': ++num1;break;//...1,\u90a3\u4e481\u7684\u4e2a\u6570\u589e\u52a0\u4e00\u4e2a\n\t\t\tcase '4': ++num4;break;//...4,\u90a3\u4e484\u7684\u4e2a\u6570\u589e\u52a0\u4e00\u4e2a\n\t\t\tcase '5': ++num5;break;//...5,\u90a3\u4e485\u7684\u4e2a\u6570\u589e\u52a0\u4e00\u4e2a\n\t\t\tdefault: break; \n\t\t}\n\t\tswitch(w[l+i-1]){//\u539f\u6765\u7684\u5b57\u7b26\u4e32w[i]\u662f...\n\t\t\tcase '1': --num1;break;//...1,\u90a3\u4e481\u7684\u4e2a\u6570\u51cf\u5c11\u4e00\u4e2a\n\t\t\tcase '4': --num4;break;//...4,\u90a3\u4e484\u7684\u4e2a\u6570\u51cf\u5c11\u4e00\u4e2a\n\t\t\tcase '5': --num5;break;//...5,\u90a3\u4e485\u7684\u4e2a\u6570\u51cf\u5c11\u4e00\u4e2a\n\t\t\tdefault: break; \n\t\t}\n\t\tw[l+i-1]=gt[i];//\u66f4\u6362\u5b57\u7b26\n\t} \n\tprintf(\"%lld %lld %lld\\n\",num1%modd,(num1+num4*4+num5*5)%modd,q4(num4)*q5(num5)%modd);//\u8f93\u51fa\n\t\n}\nint main(){\n\tcin>>w;//\u8f93\u5165\u539f\u6709\u5b57\u7b26\u4e32\n\tfor(long long i=0;i<w.length();i++){//\u521d\u59cb\u5316\n\t\tswitch(w[i]){\n\t\t\tcase '1': ++num1;break; \n\t\t\tcase '4': ++num4;break;\n\t\t\tcase '5': ++num5;break;\n\t\t\tdefault: break;\n\t\t}\n\t}\n\tlong long  m=readln();\n\twhile(m--)\n\t\tsolve();//\u66f4\u6362+\u8f93\u51fa\n\treturn 0;\n} \n```",
        "postTime": 1589611368,
        "uid": 217300,
        "name": "Error_Eric",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6553 \u3010String of Monody\u3011"
    },
    {
        "content": "\u770b\u5b8cdalao\u7684\u9898\u89e3\uff0c\u89c9\u5f97\u6211\u7684\u9898\u89e3\u5c31\u5f88\u5446????\n\n\u4e00\u770bn=1e6\uff0c\u8fd9\u662f\u8981\u7ebf\u6bb5\u6811\u5440\uff0c\u518d\u770b\u6bcf\u6b21\u66ff\u6362\u76841e3\uff08\u55f7 \u8fd8\u597d\u8fd8\u597d\uff09\u3002\n\n**\u601d\u8def\uff1a\u66b4\u529b\uff0c\u8ba1\u7b97\u6bcf\u4e00\u79cd\u6570\u66ff\u6362\u540e\u51fa\u73b0\u7684\u4e2a\u6570\uff0c\u7531\u4e8e\u6bcf\u6b21\u53ea\u6539\u53d8\u4e86\u4e00\u90e8\u5206\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u7b97\u6539\u52a8\u7684\u8fd9\u4e00\u90e8\u5206\u7684\u53d8\u5316\u5c31\u884c**\n\n\u6838\u5fc3\uff1a\n\n- \u8bb0\u5f551\u30014\u30015\u51fa\u73b0\u7684\u6b21\u6570\n\n- replace\u51fd\u6570\u7684\u4f7f\u7528\n\n- \u5feb\u901f\u5e42\u7684\u8fd0\u7528 (\u6b64\u5904\u6ce8\u610f\u4e58\u79ef\u53d6\u6a21=\u5206\u522b\u53d6\u6a21\u518d\u4e58\u8d77\u6765\u53d6\u6a21)\n\n**code\u4e2d\u6709\u8be6\u7ec6\u6ce8\u91ca**\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\nconst int mod=99824353;\nlong long ksm(long long x,int y,int m)\n{\n    if(y==0)\n        return 1;\n    int t;\n    t=ksm(x*x%m,y/2,m)%m;\n    if(y&1)\n        t=(t*x)%m;\n    return t%m;\n}\nint main()\n{\n    string stds,s;\n    stds=\"0\";//\u987a\u4fbf\u7528\u4e2a\u5b57\u7b26\u53600\u7684\u4f4d\u7f6e\uff0c\u65b9\u4fbf\u64cd\u4f5c\n    cin >> s;\n    stds+=s;//\u5f62\u6210\u521d\u59cb\u5b57\u7b26\u4e32\n    int m;\n    cin >> m;\n    int a,b;\n    int ans1=0,ans2=0,ans3=0;//\u5206\u522b\u8868\u793a1\u30014\u30015\u51fa\u73b0\u7684\u6b21\u6570\n    for(int i=1; i<stds.size(); i++)\n    //\u8ba1\u7b97\u521d\u59cb\u5b57\u7b26\u4e32\u4e2d\u76841\u30014\u30015\u51fa\u73b0\u7684\u6b21\u6570\n    {\n        if(stds[i]=='1')\n            ans1++;\n        if(stds[i]=='4')\n            ans2++;\n        if(stds[i]=='5')\n            ans3++;\n    }\n    for(int i=1; i<=m; i++)\n    {\n        cin >> a >> b >> s;\n        for(int i=a;i<=b;i++)//\u5c06\u539f\u5b57\u7b26\u4e32\u4e2d1\u30014\u30015\u51cf\u53bb\n        {\n            if(stds[i]=='1')\n                ans1--;\n            if(stds[i]=='4')\n                ans2--;\n            if(stds[i]=='5')\n                ans3--;\n        }\n        for(int i=0;i<s.size();i++)//\u6dfb\u52a0\u65b0\u5b57\u7b26\u4e32\u4e2d1\u30014\u30015\n        {\n            if(s[i]=='1')\n                ans1++;\n            if(s[i]=='4')\n                ans2++;\n            if(s[i]=='5')\n                ans3++;\n        }\n        stds.replace(a,b-a+1,s);//\u66f4\u65b0\u5b57\u7b26\u4e32\n        cout << ans1 << \" \" << ans1+ans2*4+ans3*5 << \" \" << (ksm(4,ans2,mod)*ksm(5,ans3,mod))%mod << endl ;//\u8ba1\u7b97\u7ed3\u679c\n    }\n    return 0;\n}\n\n```\n",
        "postTime": 1589341283,
        "uid": 309328,
        "name": "KadiaNEFU",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6553 \u3010String of Monody\u3011"
    }
]
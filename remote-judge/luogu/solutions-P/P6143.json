[
    {
        "content": "\u9898\u89e3 P6143 \u3010[USACO20FEB]Equilateral Triangles P\u3011\n\n\u672c\u9898\u89e3\u6240\u6d89\u53ca\u77e5\u8bc6\u70b9\u4ec5\u6709\u524d\u7f00\u548c\u3002\n\n\u5176\u5b9e\u4e5f\u4e0d\u9700\u8981\u4ec0\u4e48\u66fc\u54c8\u987f\u8ddd\u79bb\u7684\u8f6c\u5316\uff0c\u6709\u4e9b\u7ed3\u8bba\u8fd8\u662f\u663e\u800c\u6613\u89c1\u7684\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/s1k5guw1.png))\n\n\u5982\u4e0a\u56fe\uff0c\u5bf9\u4e8e\u659c\u5411\u4e0b$45\u00b0$\u7684\u76f4\u7ebf\u4e0a\u4efb\u610f\u4e24\u4e2a\u70b9\uff08\u56fe\u4e2d$J,K $\uff09\u4e24\u70b9\n\n\u5411\u4e0b\u505a\u7b49\u8170\u76f4\u89d2\u4e09\u89d2\u5f62$\\triangle JHK$ \u5e76\u5ef6\u957f$JH$\u548c$KH$ \u505a\u7684\u7b49\u8170\u76f4\u89d2\u4e09\u89d2\u5f62$\\triangle OHL$ \n\n\u4f7f$\\triangle OHL \\cong \\triangle JHK$ \n\n\u90a3\u4e48\u7ebf\u6bb5$OL$\u4e0a\u4efb\u610f\u4e00\u4e2a\u6574\u70b9(\u5982\u56fe$O,N,M,L$)\u4e0e$J,K$\u4e24\u70b9\u4e00\u5b9a\u5f62\u6210\u4e00\u4e2a\u66fc\u54c8\u987f\u7b49\u8fb9\u4e09\u89d2\u5f62\n\n\u8bc1\u660e\uff1a\u9996\u5148$\\triangle OJK $ \u4e00\u5b9a\u662f\u66fc\u54c8\u987f\u7b49\u8fb9\u4e09\u89d2\u5f62\uff08\u6613\u8bc1\uff09\n\n$O$\u6bcf\u6b21\u5ef6$OL$\u5411\u4e0b\u79fb\u52a8\u4e00\u4e2a\u70b9\uff0c\u5b83\u4e0e$J,K$\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u4e0d\u53d8\uff08\u6a2a$+1$\uff0c\u7eb5$-1$\uff09\n\n\u6240\u4ee5\u7ebf\u6bb5$OL$\u4e0a\u4efb\u610f\u4e00\u4e2a\u6574\u70b9\u4e0e$J,K$\u4e24\u70b9\u90fd\u53ef\u5f62\u6210\u66fc\u54c8\u987f\u7b49\u8fb9\u4e09\u89d2\u5f62\n\n------\n\n\u4e0a\u9762\u7684\u7ed3\u8bba\u975e\u5e38\u663e\u7136\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u4e0a\u9762\u7684\u7ed3\u8bba\u89e3\u51b3\u6b64\u9898\n\n\u6211\u4eec\u5148\u5bf9\u6bcf\u4e00\u6761\u659c\u5411\u4e0b\u7684\u76f4\u7ebf\u505a\u4e00\u4e2a\u524d\u7f00\u548c\uff0c\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u8ba1\u7b97\u51fa\u4e00\u6761\u659c\u7ebf\u6bb5\u4e0a\u6709\u591a\u5c11\u4e2a`*`\u70b9\n\n\u7136\u540e\u6211\u4eec\u679a\u4e3e\u4e00\u4e2a`*`\u70b9\uff08\u56fe\u4e2d$J$\uff09\u548c\u4e00\u4e2a\u8ddd\u79bb\uff08\u5982\u56fe\u4e2d\u7ebf\u6bb5$JH$\u7684\u957f\uff09\n\n\u8fa3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u77e5\u9053\u5176\u4ed6$3$\u4e2a\u70b9\u7684\u5750\u6807\u4e86\uff08\u5982\u56fe\u4e0a\uff1a$K,O,L$\uff09\n\n\u5982\u679c\u5224\u65ad\u70b9\uff08\u56fe\u4e2d\u7684$K$\uff09\u4e5f\u662f`*`\u70b9\n\n\u5c31\u7528\u524d\u7f00\u548c\u7b97\u51fa\u7ebf\u6bb5\uff08\u56fe\u4e2d$OL$\uff09\u4e0a`*`\u70b9\u7684\u6570\u91cf\n\n\u7d2f\u52a0\u7b54\u6848\u3002\n\n\u4f46\u662f\uff0c\u660e\u663e\u6211\u4eec\u8981\u7edf\u8ba1\u7684\u4e0d\u6b62\u659c\u5411\u4e0b$45\u00b0$\u8fd9\u4e00\u6761\u76f4\u7ebf\u7684\u4e00\u8fb9\u4e0a\u7684\u66fc\u54c8\u987f\u7b49\u8fb9\u4e09\u89d2\u5f62\u3002\n\n\u6240\u4ee5\u6211\u4eec\u628a\u6574\u5f20\u56fe\u7ffb\u8f6c$90\u00b0$\uff0c\u518d\u505a\u4e00\u904d\u3002\u540c\u7406$180\u00b0$\u548c$270\u00b0$ \u4e5f\u8981\u518d\u505a\u4e00\u904d\u3002\n\n\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff0c\u6211\u4eec\u524d\u7f00\u548c\u7edf\u8ba1\u7b54\u6848\u65f6\u8981\u51cf\u53bb\u5de6\u7aef\u70b9\uff08\u5373$f(R)-f(L-1)$\u53d8\u4e3a$f(R)-f(L)$\uff09\n\n\u5176\u5b9e\u6838\u5fc3\u601d\u60f3\u5f88\u7b80\u5355\uff0c\u4f46\u6211\u597d\u50cf\u89e3\u91ca\u5f97\u592a\u590d\u6742\u4e86\u2026\u2026\n\n\u770b\u4ee3\u7801\u5427\uff0c\u6838\u5fc3\u7684\u524d\u7f00\u548c\u5c31\u4e00\u6761\u5f0f\u5b50\n\n```cpp\n#include<bits/stdc++.h>\n#define maxn 611\nusing namespace std;\nint a[maxn][maxn],b[maxn][maxn],n,f[maxn][maxn],ans,tot;\nstruct kkk{\n\tint x;int y;\n}p[maxn*maxn];\nvoid turn(){\t\t\t//\u628a\u56fe\u7ffb\u8f6c90\u00b0\n\tfor(int i=1;i<=n;i++)for(int j=1;j<=n;j++)b[i][j]=a[i][j];\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++)\n\t\ta[j][i]=b[n-i+1][j];\n\t}\n}\nvoid solve(){\t\t\t//\u7edf\u8ba1\u7b54\u6848\n\ttot=0;\n\tfor(int i=1;i<=n*2;i++)for(int j=1;j<=n*2;j++)f[i][j]=0;\n\tfor(int i=1;i<=n*2;i++){\t//\u5f00\u4e24\u500d\u662f\u4e3a\u4e86\u9632\u6ea2\u51fa\n\t\tfor(int j=1;j<=n*2;j++){\n\t\t\tf[i][j]=f[i-1][j+1]+a[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)for(int j=1;j<=n;j++)if(a[i][j]==1)p[++tot].x=i,p[tot].y=j;\t//\u6807\u8bb0*\u70b9\n\tfor(int i=1;i<=tot;i++){\t//\u679a\u4e3e*\u70b9\n\t\tfor(int k=1;k<=n;k++){\t//\u679a\u4e3e\u8ddd\u79bb\n\t\t\tint xa=p[i].x,ya=p[i].y;\n\t\t\tint xb=p[i].x-k,yb=p[i].y+k;\t//\u5224\u65ad\u70b9\u5750\u6807\n\t\t\tif(xb<1||yb>n)break;\t//\u8d85\u51fa\u8303\u56f4\u5224\u65ad\n\t\t\tif(a[xb][yb]==0)continue;\t//\u5224\u65ad\u70b9\u662f\u5426\u662f*\u70b9\n\t\t\tans+=f[xa+k][ya+k]-f[xa][ya+k*2];\t//\u524d\u7f00\u548c\u7edf\u8ba1\u7b54\u6848\n\t\t}\n\t}\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tchar ch;\n\t\t\tcin>>ch;\n\t\t\tif(ch=='*')a[i][j]=1;\n\t\t\telse a[i][j]=0;\n\t\t}\n\t}\n\tfor(int i=1;i<=4;i++)turn(),solve();//\u7ffb\u8f6c\u4e00\u6b21\uff0c\u7edf\u8ba1\u4e00\u6b21\n\tprintf(\"%d\\n\",ans);\t//\u8f93\u51fa\n\treturn 0;\n}\n```\n\n\u597d\u7b80\u6d01\u7684\u5462\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(4*n^3)$\uff0c\u4e0d\u8fc7\u5e94\u8be5\u6bd4\u8f83\u96be\u8dd1\u6ee1\uff0c\u597d\u50cf\u8fd8\u633a\u5feb\u7684\uff08\u96fe",
        "postTime": 1590044909,
        "uid": 58711,
        "name": "hyfhaha",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6143 \u3010[USACO20FEB]Equilateral Triangles P\u3011"
    },
    {
        "content": "\u8d5b\u65f6\u5148\u60f3\u51fa\u6765\u4e86 T1\uff0c\u4f46\u662f\u7b2c\u4e00\u6b21 T1 \u5199\u6302\uff0c\u5c31\u5148\u6765\u770b\u4e86 T2\uff0c\u7ed3\u679c\u79d2\u4e86\uff0c\u5e94\u8be5\u662f\u8fd9\u6b21\u6700\u7b80\u5355\u7684\u4e00\u9898\u3002\n\n\u6211\u4eec\u6765\u89c2\u5bdf\u4e00\u4e2a\u66fc\u54c8\u987f\u7b49\u8fb9\u4e09\u89d2\u5f62\uff0c\u5982\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lkfcwtla.png)\n\n\u7ea2\u7ebf\u662f $BC$ \u7684\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u84dd\u7ebf\u662f $AC$ \u7684\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u6839\u636e\u8981\u6c42\u6709\u7ea2\u7ebf\u548c\u84dd\u7ebf\u957f\u5ea6\u76f8\u7b49\u3002\n\n\u6211\u4eec\u5c06\u66fc\u54c8\u987f\u8ddd\u79bb\u7a0d\u4f5c\u53d8\u6362\uff0c\u5f97\u5230\u4e0b\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/65q2jct7.png)\n\n$BC$ \u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u6b64\u65f6\u662f \u7ea2+\u7eff\uff0c$AC$ \u6b64\u65f6\u662f \u84dd+\u7eff\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\uff1a\u7ea2+\u7eff=\u84dd+\u7eff\uff0c\u6240\u4ee5 \u7ea2=\u84dd\u3002\n\n\u8fd9\u91cc\u5efa\u7acb\u4e86\u4e00\u4e2a\u4e2d\u8f6c\u7ed3\u70b9 $O$\uff0c\u59d1\u4e14\u53eb\u505a\u201c\u66fc\u54c8\u987f\u5916\u5fc3\u201d\uff0c\u56e0\u4e3a $OA=OB=OC$\uff08\u66fc\u54c8\u987f\u8ddd\u79bb\uff09\u3002\n\n\u5f53\u7136\u8fd9\u53ea\u662f\u66fc\u54c8\u987f\u7b49\u8fb9\u4e09\u89d2\u5f62\u7684\u4e00\u79cd\u6446\u5e03\uff0c\u8f6c\u4e00\u8f6c\u7ffb\u4e00\u7ffb\u5c31\u53ef\u4ee5\u5f97\u5230\u6240\u6709\u53ef\u80fd\u7684\u60c5\u51b5\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5148\u679a\u4e3e\u8fd9\u4e2a\u5916\u5fc3 $O$\uff0c\u7136\u540e\u679a\u4e3e $OA$ \u7684\u957f\uff0c\u8fd9\u65f6 $A,B$ \u5df2\u7ecf\u786e\u5b9a\uff0c\u6211\u4eec\u53ea\u9700\u8981\u786e\u5b9a $C$\uff0c\u53d1\u73b0 $C$ \u662f\u6ee1\u8db3 $OC=OA$\uff0c\u4e14\u5728 $A,B$ \u7684\u76f8\u53cd\u201c\u8c61\u9650\u201d\u4f4d\u7f6e\uff0c\u753b\u4e00\u4e0b\u8f68\u8ff9\u5c31\u4f1a\u53d1\u73b0\uff0c$C$ \u7684\u8f68\u8ff9\u662f\u4e00\u6761\u4e0e\u77e9\u9635\u67d0\u6761\u5bf9\u89d2\u7ebf\u5e73\u884c\u7684\u659c\u7ebf\u6bb5\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528\u7c7b\u4f3c [\u9053\u8def\u6e38\u620f](https://www.luogu.com.cn/problem/P1070) \u4e2d\u7684\u659c\u5411\u524d\u7f00\u548c\u5957\u8def\u5904\u7406\uff0c\u53ef\u4ee5 $O(1)$ \u6c42\u51fa\u8fd9\u6837 $C$ \u7684\u6570\u91cf\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^3)$\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN=310;\nint n,a[MAXN][MAXN],sum1[MAXN][MAXN],sum2[MAXN][MAXN];\nchar c[MAXN][MAXN];\nlong long ans;\nvoid chk1 (int x,int y,int l) {\n\tint p=x-l,q=y-l;\n\tif (p<=0||q<=0||!a[p][y]||!a[x][q]) {return;}\n\tint tmp1=min(n-x,l),tmp2=min(n-y,l);\n\tif (tmp1+tmp2<l) {return;}\n\tans+=(sum2[x+tmp1][y+l-tmp1]-sum2[x+l-tmp2-1][y+tmp2+1]);\n\treturn;\n}\nvoid chk2 (int x,int y,int l) {\n\tint p=x-l,q=y+l;\n\tif (p<=0||q>n||!a[p][y]||!a[x][q]) {return;}\n\tint tmp1=min(n-x,l),tmp2=min(y-1,l);\n\tif (tmp1+tmp2<l) {return;}\n\tans+=(sum1[x+tmp1][y-l+tmp1]-sum1[x+l-tmp2-1][y-tmp2-1]);\n\treturn;\n}\nvoid chk3 (int x,int y,int l) {\n\tint p=x+l,q=y+l;\n\tif (p>n||q>n||!a[p][y]||!a[x][q]) {return;}\n\tint tmp1=min(x-1,l),tmp2=min(y-1,l);\n\tif (tmp1+tmp2<l) {return;}\n\tans+=(sum2[x-l+tmp2][y-tmp2]-sum2[x-tmp1-1][y-l+tmp1+1]);\n\treturn;\n}\nvoid chk4 (int x,int y,int l) {\n\tint p=x+l,q=y-l;\n\tif (p>n||q<0||!a[p][y]||!a[x][q]) {return;}\n\tint tmp1=min(x-1,l),tmp2=min(n-y,l);\n\tif (tmp1+tmp2<l) {return;}\n\tans+=(sum1[x-l+tmp2][y+tmp2]-sum1[x-tmp1-1][y+l-tmp1-1]);\n\treturn;\n}\nint main () {\n\tfreopen(\"triangles.in\",\"r\",stdin);\n\tfreopen(\"triangles.out\",\"w\",stdout);\n\tscanf(\"%d\",&n);\n\tfor (int i=1;i<=n;i++) {\n\t\tscanf(\"%s\",c[i]+1);\n\t\tfor (int j=1;j<=n;j++) {a[i][j]=(c[i][j]=='*');}\n\t}\n\tfor (int i=1;i<=n;i++) {\n\t\tfor (int j=1;j<=n;j++) {\n\t\t\tsum1[i][j]=sum1[i-1][j-1]+a[i][j];\n\t\t\tsum2[i][j]=sum2[i-1][j+1]+a[i][j];\n\t\t}\n\t}\n\tfor (int i=1;i<=n;i++) {\n\t\tfor (int j=1;j<=n;j++) {\n\t\t\tfor (int k=1;k<=n;k++) {\n\t\t\t\tchk1(i,j,k);\n\t\t\t\tchk2(i,j,k);\n\t\t\t\tchk3(i,j,k);\n\t\t\t\tchk4(i,j,k);\n\t\t\t\tint cntt=0;\n\t\t\t\tcntt+=(i>k&&a[i-k][j]);\n\t\t\t\tcntt+=(j+k<=n&&a[i][j+k]);\n\t\t\t\tcntt+=(i+k<=n&&a[i+k][j]);\n\t\t\t\tcntt+=(j>k&&a[i][j-k]);\n\t\t\t\tans-=(cntt==3?1:(cntt==4?4:0));\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1583037355,
        "uid": 113546,
        "name": "ix35",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P6143 \u3010[USACO20FEB]Equilateral Triangles P\u3011"
    },
    {
        "content": "\u4f18\u96c5\u7684\u66b4\u529b\u3002\n\n\u8bbe\u4e09\u4e2a\u70b9\u4e3a $(i,j,k)$\uff0c\u5219\u6709 $6$ \u4e2a\u672a\u77e5\u6570\u5373 $x_i,x_j,x_k,y_i,y_j,y_k$\u3002\u53c8\u56e0\u4e3a\u6709 $2$ \u6761\u5173\u4e8e\u8fd9 $6$ \u4e2a\u672a\u77e5\u6570\u7684\u65b9\u7a0b $ij=jk,ij=ik$\uff0c\u6240\u4ee5\u4e00\u5b9a\u80fd\u901a\u8fc7\u679a\u4e3e\u5176\u4e2d\u7684 $4$ \u4e2a\u91cf\u6765\u6c42\u89e3\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^4)$\u3002\n\n\u800c\u8fd9\u4e2a $O(n^4)$ \u7684\u66b4\u529b\u662f\u8089\u773c\u53ef\u89c1\u7684\u8dd1\u4e0d\u6ee1\uff08\n\n-----\n\n\u8003\u8651\u5148\u679a\u4e3e\u70b9 $i$\uff0c\u5219\u6709\u4ee5\u4e0b\u56db\u79cd\u60c5\u51b5\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ynniilt3.png)\n\n\u89e3\u5f97 $x=a,y=a-b$\u3002\n\n\u5176\u4e2d\uff0c$a,x>0,0\\le b,y \\le a$\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1ktxjae4.png)\n\n\u89e3\u5f97 $x=a,y=a-b$\u3002\n\n\u5176\u4e2d\uff0c\u5176\u4e2d\uff0c$a,x>0,0\\le b,y\\le a,\\color{red}b\\not= 0$\u3002\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h33l7rwp.png)\n\n\n\u89e3\u5f97 $x=2b-a,y=b-a$\u3002\n\n\u5176\u4e2d\uff0c$0\\le a<b,0\\le x,y$\u3002\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ud3a5dls.png)\n\n\u89e3\u5f97 $x=2b-a,y=b-a$\u3002\n\n\u5176\u4e2d\uff0c$0\\le a<b,0\\le x,y,\\color{red}a\\not=0$\u3002\n\n\n------\n\n\u6ce8\u610f\uff0c\u6709\u4e9b\u540c\u65f6\u5b58\u5728\u4e8e\u4e24\u79cd\u60c5\u51b5\u7684\u72b6\u6001\uff0c \u9700\u8981\u901a\u8fc7\u6807\u7ea2\u7684\u5224\u65ad\u53bb\u9664\u3002\n\n\u7136\u540e\u5c31\u80fd\u6572\u51fa\u4ee5\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=310;\ninline int read(){\n\tint x=0;\n\tchar c=getchar();\n\tfor(;(c^'.')&&(c^'*');c=getchar());\n\treturn c=='*';\n}\nbool c[maxn][maxn];\nint n,ans;\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t\tc[i][j]=read();\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tif(!c[i][j]) continue;\n\t\t\tfor(int a=0;a<=n;a++){\n\t\t\t\tfor(int b=0;b<=a;b++){\n\t\t\t\t\tif(a&&i+a<=n&&j+a<=n&&i-a+b>0&&j+a+b<=n)\n\t\t\t\t\t\tans+=(c[i+a][j+a]&c[i-a+b][j+a+b]);\n\t\t\t\t\tif(a&&b&&i-a>0&&j+a<=n&&i+a-b<=n&&j+a+b<=n)\n\t\t\t\t\t\tans+=(c[i-a][j+a]&c[i+a-b][j+a+b]);\n\t\t\t\t}\n\t\t\t\tfor(int b=a+1;b<=n;b++){\n\t\t\t\t\tif(i-b-b+a>0&&j+a<=n&&i-b+a>0&&j+a+b<=n)\n\t\t\t\t\t\tans+=(c[i-b-b+a][j+a]&c[i-b+a][j+a+b]);\n\t\t\t\t\tif(a&&i+b+b-a<=n&&j+a<=n&&i+b-a<=n&&j+a+b<=n)\n\t\t\t\t\t\tans+=(c[i+b+b-a][j+a]&c[i+b-a][j+a+b]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n} \n```\n\n\u7136\u540e\u4f60\u4f1a\u83b7\u5f97 $51pt$ \u7684\u9ad8\u5206\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u4ee3\u7801\u4e2d\u641c\u7d22\u5230\u4e86\u8bb8\u591a\u5197\u4f59\u7684\u72b6\u6001\uff0c\u8003\u8651\u5c06\u5224\u65ad\u653e\u5230\u5faa\u73af\u4e4b\u5916\uff1a\n\n```cpp\n\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=310;\ninline int read(){\n\tint x=0;\n\tchar c=getchar();\n\tfor(;(c^'.')&&(c^'*');c=getchar());\n\treturn c=='*';\n}\nbool c[maxn][maxn];\nint n,ans;\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t\tc[i][j]=read();\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tif(!c[i][j]) continue;\n\t\t\tfor(int a=0;a<=n;a++){\n\t\t\t\tif(a&&i+a<=n&&j+a<=n)\n\t\t\t\t\tfor(int b=max(a-i+1,0);b<=a&&j+a+b<=n;b++)\n\t\t\t\t\t\tans+=(c[i+a][j+a]&c[i-a+b][j+a+b]);\n\t\t\t\tif(a&&i-a>0&&j+a<=n)\n\t\t\t\t\tfor(int b=max(i+a-n,1);b<=a&&b<=n-j-a;b++)\n\t\t\t\t\t\tans+=(c[i-a][j+a]&c[i+a-b][j+a+b]);\n\t\t\t\tif(j+a<=n)\n\t\t\t\t\tfor(int b=a+1;j+a+b<=n&&b+b<i+a;b++)\n\t\t\t\t\t\tans+=(c[i-b-b+a][j+a]&c[i-b+a][j+a+b]);\n\t\t\t\tif(a&&j+a<=n)\n\t\t\t\t\tfor(int b=a+1;j+a+b<=n&&b+b<=n-i+a;b++)\n\t\t\t\t\t\tans+=(c[i+b+b-a][j+a]&c[i+b-a][j+a+b]);\n\t\t\t}\n\t\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n} \n```\n\n\u7136\u540e\u5c31\u8fc7\u4e86\u3002\n\n\u795dAC\u3002",
        "postTime": 1645507102,
        "uid": 288716,
        "name": "lzqy_",
        "ccfLevel": 7,
        "title": "[USACO20FEB]Equilateral Triangles P \u9898\u89e3"
    },
    {
        "content": "\u66fc\u54c8\u987f\u8ddd\u79bb\u8f6c\u6210\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\uff0c\u53ef\u4ee5\u53d1\u73b0\u6ee1\u8db3\u8981\u6c42\u7684\u4e09\u89d2\u5f62\u5728\u65b0\u7684\u5750\u6807\u4e0b\u4e00\u5b9a\u662f**\u4e00\u4e2a\u5e73\u884c\u4e0e\u5750\u6807\u8f74\u7684\u6b63\u65b9\u5f62\u7684\u4e24\u4e2a\u76f8\u90bb\u7684\u9876\u70b9\u548c\u5bf9\u9762\u7684\u8fb9\u4e0a\u7684\u4efb\u610f\u4e00\u70b9**\u8fde\u63a5\u800c\u6210\u3002\n\n\u90a3\u4e48\u524d\u7f00\u548c\u8ba1\u6570\u4e00\u4e0b\u5373\u53ef\uff0c\u663e\u7136\u8981\u6a2a\u7740\u548c\u7ad6\u7740\u5404\u7b97\u4e00\u6b21\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n^3)$\u3002\n\n\u5982\u679c\u51fa\u73b0\u4e09\u4e2a\u70b9\u90fd\u662f\u6b63\u65b9\u5f62\u7684\u9876\u70b9\u7684\u60c5\u51b5\uff0c\u4f1a\u88ab\u6a2a\u7740\u7ad6\u7740\u5404\u8ba1\u7b97\u4e00\u6b21\uff0c\u9700\u8981\u53bb\u6389\u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u5728\u540e\u4e00\u6b21\u8ba1\u7b97\u7684\u65f6\u5019\u4e0d\u7b97\u5230\u5373\u53ef\u3002\n\n```cpp\nconst int N = 307;\nint n, a[N*2][N*2], b[N*2][N*2];\nchar s[N];\nll ans;\n\nint main() {\n\trd(n);\n\tfor (int i = 1; i <= n; i++) {\n\t\trds(s, n);\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tif (s[j] == '*') a[i+j-1][i-j+n] = 1;\n\t}\n\tn *= 2;\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tb[i][j] = a[i][j] + b[i][j-1];\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tif (a[i][j])\n\t\t\t\tfor (int k = j + 1; k <= n; k++)\n\t\t\t\t\tif (a[i][k]) {\n\t\t\t\t\t\tif (i - (k - j) >= 1)\n\t\t\t\t\t\t\tans += b[i-(k-j)][k] - b[i-(k-j)][j-1];\n\t\t\t\t\t\tif (i + (k - j) <= n)\n\t\t\t\t\t\t\tans += b[i+(k-j)][k] - b[i+(k-j)][j-1];\n\t\t\t\t\t}\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tb[i][j] = a[i][j] + b[i-1][j];\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tif (a[j][i])\n\t\t\t\tfor (int k = j + 1; k <= n; k++)\n\t\t\t\t\tif (a[k][i]) {\n\t\t\t\t\t\tif (i - (k - j) >= 1)\n\t\t\t\t\t\t\tans += b[k-1][i-(k-j)] - b[j][i-(k-j)];\n\t\t\t\t\t\tif (i + (k - j) <= n)\n\t\t\t\t\t\t\tans += b[k-1][i+(k-j)] - b[j][i+(k-j)];\n\t\t\t\t\t}\n\tprint(ans);\n\treturn 0;\n}\n```",
        "postTime": 1583065219,
        "uid": 100544,
        "name": "xht",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P6143 \u3010[USACO20FEB]Equilateral Triangles P\u3011"
    },
    {
        "content": "\u7ed3\u8bba\uff1a\u6bcf\u4e2a\uff08\u66fc\u54c8\u987f\u8ddd\u79bb\u610f\u4e49\u4e0b\uff09\u6b63\u4e09\u89d2\u5f62 $ABC$ \u90fd\u5b58\u5728\u4e00\u70b9\u5916\u5fc3 $O$\uff0c\u4f7f $OA,OB$ \u5206\u522b\u4e0e $x,y$ \u8f74\u5e73\u884c\uff0c\u4e14 $OA=OB=OC$\u3002\n\n\u56e0\u6b64\u6211\u4eec\u679a\u4e3e $O$ \u7684\u4f4d\u7f6e\u548c $OA$ \u7684\u957f\u5ea6\uff0c\u9884\u5904\u7406\u51fa\u6bcf\u4e00\u6761\u659c\u7ebf\u4e0a\u53ef\u7528\u70b9\u4e2a\u6570\u7684\u524d\u7f00\u548c\uff0c\u5219 $C$ \u4e00\u5b9a\u5728\u7ebf\u6bb5 $AB$ \u5173\u4e8e $O$ \u7684\u5bf9\u79f0\u7ebf\u6bb5\u4e0a\uff0c\u7528\u9884\u5904\u7406\u597d\u7684\u524d\u7f00\u548c\u76f8\u51cf\u5c31\u5f97\u5230 $C$ \u7684\u53ef\u80fd\u4f4d\u7f6e\u6570\u3002\n\n\u4ee5\u4e0a\u64cd\u4f5c\u9700\u8981\u91cd\u590d\u56db\u6b21\u4ee5\u9002\u5e94\u5404\u4e2a\u4e0d\u540c\u65b9\u5411\u3002\u6ce8\u610f\uff0c\u4e3a\u4e86\u907f\u514d\u5728\u7aef\u70b9\u5904\u7b97\u91cd\uff0c\u9700\u8981\u6bcf\u6b21\u6070\u597d\u4e0d\u7b97\u4e00\u4e2a\u7aef\u70b9\u3002\u540c\u65f6\u4e3a\u4e86\u907f\u514d\u6570\u7ec4\u8d8a\u754c\uff0c\u53ef\u4ee5\u5148\u5c06\u6240\u6709\u4e0b\u6807\u5411\u540e\u5e73\u79fb $300$ \u4f4d\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,ans=0,s[905][905];\nchar str[905][905],s2[905][905];\nvoid Work(){\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\ts2[j+300][n-i+1+300]=str[i+300][j+300];\n\t\t}\n\t}\n\tmemset(s,0,sizeof(s)),memcpy(str,s2,sizeof(s2));\n\tfor(int i=1;i<=900;i++){//(1,i)\u5f00\u59cb\n\t\tfor(int j=1;j<=i;j++)s[j][i+1-j]=s[j-1][i+2-j]+(str[j][i+1-j]=='*');\n\t}\n\tfor(int i=2;i<=900;i++){//(i,n)\u5f00\u59cb \n\t\tfor(int j=i;j<=900;j++)s[j][i+900-j]=s[j-1][i+900-j+1]+(str[j][i+900-j]=='*');\n\t}\n\tfor(int i=301;i<=300+n;i++){\n\t\tfor(int j=301;j<=300+n;j++){//\u679a\u4e3e\u4e2d\u5fc3\u548c\u5de6\uff0c\u4e0a\u89d2 \n\t\t\tfor(int k=j-1;k>=301&&i-j+k>=301;k--){\n\t\t\t\tif(str[i][k]^'*'||str[i-j+k][j]^'*')continue;\n\t\t\t\tans+=s[i+j-k][j]-s[i][2*j-k];\n\t\t\t} \n\t\t}\n\t}\n}\nint main(){\n\tcin>>n;\n\tfor(int i=301;i<=300+n;i++)cin>>str[i]+301;\n\tfor(int i=1;i<=4;i++)Work();\n\tcout<<ans;\n}\n```",
        "postTime": 1596541407,
        "uid": 42156,
        "name": "feecle6418",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6143 \u3010[USACO20FEB]Equilateral Triangles P\u3011"
    },
    {
        "content": "**\u9898\u76ee\u5927\u610f\uff1a**\n\n\u7ed9\u4e00\u4e2a $N\\times N$ \u7684\u65b9\u9635\uff0c\u91cc\u9762\u6709\u82e5\u5e72\u4e2a\u70b9\uff0c\u95ee\u8fd9\u4e9b\u70b9\u5728\u66fc\u54c8\u987f\u8ddd\u79bb\u610f\u4e49\u4e0b\u80fd\u6784\u6210\u591a\u5c11\u4e2a\u7b49\u8fb9\u4e09\u89d2\u5f62\uff1f\n\n\u6570\u636e\u8303\u56f4\uff1a$1\\le N\\le 300$ .\n\n> \u77e5\u8bc6\u50a8\u5907\uff1a\u524d\u7f00\u548c\uff0c\u66fc\u54c8\u987f\u8ddd\u79bb\n\n> \u9898\u76ee\u96be\u5ea6\uff1a\u63d0\u9ad8+/\u7701\u9009-\n\n**\u89e3\u6790\uff1a**\n\n*\uff08\u66fc\u54c8\u987f\u8ddd\u79bb\u4e0e\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u7684\u4e92\u76f8\u8f6c\u5316\u662f\u5173\u952e\u601d\u60f3\u3002\uff09*\n\n\u5148\u6784\u9020\u51e0\u4e2a\u7b49\u8fb9\u4e09\u89d2\u5f62\uff0c\u4e0d\u96be\u53d1\u73b0\u6709\u4e00\u6761\u8fb9\u4e00\u5b9a\u4e0e\u5750\u6807\u8f74\u6210 $45^\\circ$ \u5ea6\u89d2\u3002\u56fa\u5b9a\u8fd9\u6761\u8fb9\u627e\u7b2c\u4e09\u70b9\uff0c\u53d1\u73b0\u7b2c\u4e09\u70b9\u4e00\u5b9a\u5728\u4ee5\u8fd9\u6761\u8fb9\u4e3a\u8fb9\u957f\u7684\u6b63\u65b9\u5f62\u4e0a\uff0c\u4e14\u5728\u8fd9\u6761\u8fb9\u7684\u5bf9\u8fb9\u3002\u6bd4\u5982\u5bf9\u4e8e $A(0,2),B(2,0)$ \uff0c\u82e5 $C$ \u5728 $AB$ \u4e0a\u65b9\uff0c\u80fd\u6784\u6210\u7b49\u8fb9\u4e09\u89d2\u5f62\u7684 $C$ \u53ea\u80fd\u5728 $(4,2),(3,3),(2,4)$ \u8fd9\u4e9b\u4f4d\u7f6e\u3002\u8fd9\u4e2a\u7ed3\u8bba\u53ef\u4ee5\u901a\u8fc7\u66fc\u54c8\u987f\u8ddd\u79bb\u8f6c\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u66f4\u52a0\u65b9\u4fbf\u7684\u5f97\u51fa\u3002\n\n\u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u524d\u7f00\u548c\u5904\u7406\u6bcf\u4e2a\u659c\u7ebf\u4e0a\u7684\u70b9\u6570\uff0c\u8fd9\u6837\u5bf9\u4e8e\u6bcf\u4e2a\u659c\u8fb9 $AB$ \u90fd\u53ef\u4ee5 $O(1)$ \u7b97\u51fa\u6ee1\u8db3\u6761\u4ef6\u7684 $C$ \u3002\u5bf9\u4e24\u79cd\u659c\u7ebf\u90fd\u8981\u7b97\u4e00\u6b21\uff0c\u540c\u65f6\u4e5f\u8981\u6ce8\u610f\u53bb\u6389\u91cd\u590d\u60c5\u51b5\uff0c\u5269\u4e0b\u7684\u7b80\u5355\u679a\u4e3e\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(N^3)$ .\n\n```cpp\n#include <bits/stdc++.h>\n#define rep(i,a,b) for(int i=(a);i<=(b);++i)\n#define per(i,a,b) for(int i=(a);i>=(b);--i)\n#define pii pair<int,int>\n#define fi first\n#define se second\n#define pb push_back\n#define ll long long\nusing namespace std;\ninline ll read(){\n    ll x=0,f=1;char ch=getchar();\n    while (!isdigit(ch)){if (ch=='-') f=-1;ch=getchar();}\n    while (isdigit(ch)){x=x*10+ch-48;ch=getchar();}\n    return x*f;\n}\nconst int N=605;\nint n,a[N][N],b[N][N];\nll ans;\nchar s[N];\nint main(){\n    n=read();\n    rep(i,1,n){\n        scanf(\"%s\",s+1);\n        rep(j,1,n){//\u8f6c\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\n            if(s[j]=='*')a[i+j-1][i-j+n]=1;\n        }\n    }\n    n*=2;\n    rep(i,1,n)rep(j,1,n){\n        b[i][j]=b[i][j-1]+a[i][j];\n    }\n    rep(i,1,n)rep(j,1,n)if(a[i][j]){\n        rep(k,j+1,n)if(a[i][k]){\n            int dis=k-j;\n            if(i-dis>=1)ans+=b[i-dis][k]-b[i-dis][j-1];\n            if(i+dis<=n)ans+=b[i+dis][k]-b[i+dis][j-1];\n        }\n    }\n    rep(i,1,n)rep(j,1,n){\n        b[i][j]=b[i-1][j]+a[i][j];\n    }\n    rep(i,1,n)rep(j,1,n)if(a[j][i]){\n        rep(k,j+1,n)if(a[k][i]){\n            int dis=k-j;\n            //\u53bb\u6389\u7aef\u70b9\u60c5\u51b5\n            if(i-dis>=1)ans+=b[k-1][i-dis]-b[j][i-dis];\n            if(i+dis<=n)ans+=b[k-1][i+dis]-b[j][i+dis];\n        }\n    }\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```\n\n \n\n\n\n\n\n",
        "postTime": 1625541326,
        "uid": 218501,
        "name": "ETHANK",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6143 [USACO20FEB]Equilateral Triangles P"
    }
]
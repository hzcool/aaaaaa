[
    {
        "content": "\u672c\u9898\u89e3\u4ecb\u7ecd\u6700\u4f18\u6027\u526a\u679d\u548c\u52a8\u6001\u89c4\u5212\u4e24\u79cd\u505a\u6cd5\uff0c\u8bf7\u9009\u62e9\u6027\u98df\u7528\u3002\n\n\u9996\u5148\u8003\u8651\u5904\u7406\u4e24\u4e24\u4e4b\u95f4\u7684\u5929\u6570\u5dee\uff1a\u6253\u8868\u51fa\u6bcf\u4e2a\u6708\u7684\u5929\u6570\uff0c\u7136\u540e\u5f00\u524d\u7f00\u548c $s$ \u6570\u7ec4\uff0c\u5176\u4e2d $s_{i}$ \u8868\u793a\u7b2c $1$ \u4e2a\u6708\u5230\u7b2c $i-1$ \u4e2a\u6708\u7684\u603b\u5929\u6570\u3002\u90a3\u4e48\u5982\u679c\u7ed9\u51fa\u6708\u4efd $mon$ \u4e0e\u5929\u6570 $d$\uff0c\u90a3\u4e48\u628a\u5b83\u8f6c\u6362\u6210\u5929\u6570\u5c31\u662f $s_{mon}+d$\uff0c\u6700\u540e\u5f00\u4e2a\u7ed3\u6784\u4f53 $d$ \u5b58\u4e0b\u7b2c $i$ \u4e2a\u7968\u636e\u7684\u4ef7\u503c\u4e0e\u65f6\u95f4\uff0c\u7136\u540e\u6309\u7167\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u5373\u53ef\u3002\n\n## soluion $1$ \u641c\u7d22\n\n\u5b9a\u4e49\u4e09\u4e2a\u7ef4\u5ea6 $k$\u3001$la$ \u548c $sum$\uff0c\u8868\u793a\u5f53\u524d\u641c\u5230\u7b2c $k$ \u4e2a\u7968\u636e\uff0c\u4e0a\u4e00\u4e2a\u9009\u62e9\u7684\u662f\u7b2c $la$ \u4e2a\u7968\u636e\uff0c\u5df2\u7ecf\u6709\u4e86 $sum$ \u7684\u6536\u76ca\u3002\n\n\u6211\u4eec\u5047\u8bbe $d_{i}.v$ \u4e0e $d_{i}.t$ \u5206\u522b\u8868\u793a\u7b2c $i$ \u4e2a\u7968\u636e\u7684\u4ef7\u503c\u4e0e\u65f6\u95f4\uff0c$k1$ \u8868\u793a\u9898\u76ee\u8f93\u5165\u7684 $K$\u3002\u663e\u7136\u5bf9\u4e8e\u6bcf\u4e00\u5c42\u7684 $k$\uff0c\u6211\u4eec\u90fd\u6709\u9009\u6216\u4e0d\u9009\u4e24\u79cd\u9009\u62e9\uff0c\u5982\u679c\u9009\u7684\u8bdd\u5219\u9700\u8981\u6ee1\u8db3 $d_{k}.t-d_{la}.t \\ge k1$\u3002\u5230\u8fbe\u8fb9\u754c\u540e\u66f4\u65b0\u7b54\u6848\u5373\u53ef\u3002\n\n\u8fd9\u4e2a\u662f\u53ef\u4ee5\u6700\u4f18\u6027\u526a\u679d\u4f18\u5316\u7684\uff1a\u5f00\u4e00\u4e2a $f$ \u6570\u7ec4\uff0c\u5176\u4e2d $f_{k,la}$ \u8868\u793a\u641c\u5230\u7b2c $k$ \u4e2a\uff0c\u4e0a\u4e00\u4e2a\u9009\u62e9 $la$ \u7684\u5df2\u7ecf\u641c\u8fc7\u7684\u6700\u5927\u4ef7\u503c\uff0c$sum$ \u8868\u793a\u8fd9\u4e00\u6b21\u641c\u7d22\u7684\u4ef7\u503c\uff0c\u5219\u6709\u4ee5\u4e0b\u526a\u679d\uff1a\n\n```\n\tif(f[k][la]>=sum) return;\n\tf[k][la]=sum;\n```\n\u7efc\u5408\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal{O}(n^2)$\uff0c\u4f46\u662f\u53ef\u80fd\u5e38\u6570\u7a0d\u52a3\u3002\n\n## code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,i,j,ans,k1,sum;\nstruct ren{\n\tint m,d,v,t;\n}d[1005];\nint f[1005][1005],s[1005];\nbool cmp(ren a,ren b){\n\treturn a.t<b.t;\n} \nvoid dfs(int k,int la,int s){\n\tif(s>m) return;\n\tif(k>n){\n\t\tans=max(ans,s);\n\t\treturn;\n\t}\n\tif(f[k][la]>=s) return;\n\tf[k][la]=s;//\u6700\u4f18\u6027\u526a\u679d\n\tfor(int i=0;i<=1;i++){\n\t\tif(i==0) dfs(k+1,la,s);\n\t\tif(i==1 && (!la || d[k].t-d[la].t>=k1)) dfs(k+1,k,s+d[k].v);\n\t}\n}\nint dx[]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nint main(){\n\tmemset(f,-1,sizeof(f));\n\tscanf(\"%d%d%d\",&n,&m,&k1);\n\tfor(i=2;i<=12;i++) s[i]=s[i-1]+dx[i-1];//\u9884\u5904\u7406\u65f6\u95f4\n\tfor(i=1;i<=n;i++){\n\t\tscanf(\"%d%d%d\",&d[i].m,&d[i].d,&d[i].v);\n\t\td[i].t=s[d[i].m]+d[i].d;\n\t} \n\tsort(d+1,d+1+n,cmp);\n\tdfs(1,0,0);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n\n```\n\n\n\n## solution $2$ \u52a8\u6001\u89c4\u5212\n\n\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u9898\u5f88\u50cf\u80cc\u5305\u95ee\u9898\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5f00\u4e00\u4e2a $f$ \u6570\u7ec4\uff0c\u5176\u4e2d $f_{i,j}$ \u8868\u793a\u524d $i$ \u4e2a\u7968\u636e\u5360\u7528 $j$ \u7684\u80cc\u5305\u7684\u6700\u5927\u4ef7\u503c\u3002\n\n\u6211\u4eec\u5148\u9884\u5904\u7406\u6bcf\u4e00\u4e2a\u7968\u636e\u79bb\u5b83\u6700\u8fd1\u7684\u4e14\u5408\u6cd5\u7684\u7968\u636e\u7684\u4f4d\u7f6e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u5bb9\u6613 $\\mathcal {O}(n^2)$ \u5904\u7406\u7684\uff0c\u6211\u4eec\u628a\u5b83\u5b58\u5230 $lst$ \u6570\u7ec4\u4e2d\u53bb\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7968\u636e\u4e5f\u662f\u6709\u9009\u6216\u4e0d\u9009\u4e24\u79cd\u9009\u62e9\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u4ee5\u4e0b\u65b9\u7a0b\uff1a\n$$f_{i,j}=\\max(f_{i-1,j},f_{lst_{i},j-d_{i}.v}+d_{i}.v)$$\n\n\u6700\u540e\u6211\u4eec\u8f93\u51fa $f_{n,m}$ \u5373\u53ef\uff0c\u7efc\u5408\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal {O}(nm)$\u3002\n\n## code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,i,j,ans,k1,sum;\nstruct ren{\n\tint m,d,v,t;\n}d[1005];\nint f[1005][5005],s[1005],lst[1005];\nbool cmp(ren a,ren b){\n\treturn a.t<b.t;\n} \nint dx[]={0,31,28,31,30,31,30,31,31,30,31,30,31};\nint main(){\n\tscanf(\"%d%d%d\",&n,&m,&k1);\n\tfor(i=2;i<=12;i++) s[i]=s[i-1]+dx[i-1];\n\tfor(i=1;i<=n;i++){\n\t\tscanf(\"%d%d%d\",&d[i].m,&d[i].d,&d[i].v);\n\t\td[i].t=s[d[i].m]+d[i].d;\n\t} \n\tsort(d+1,d+1+n,cmp);\n\tfor(i=1;i<=n;i++){\n\t\tfor(j=0;j<i;j++){\n\t\t\tif(d[i].t-d[j].t>=k1) lst[i]=j;//\u9884\u5904\u7406\u79bb\u7b2ci\u4e2a\u7968\u636e\u6700\u8fd1\u7684\u7968\u636e\u7684\u4f4d\u7f6e\n\t\t}\n\t}\n\tfor(i=1;i<=n;i++){\n\t\tfor(j=m;j>=d[i].v;j--){\n\t\t\tf[i][j]=f[i-1][j];\n\t\t\tf[i][j]=max(f[i][j],f[lst[i]][j-d[i].v]+d[i].v);//\u7528\u63a8\u51fa\u7684\u65b9\u7a0b\u6bd4\u8f83\n\t\t}\n\t}\n\tprintf(\"%d\",f[n][m]);\n\treturn 0;\n}\n```\n",
        "postTime": 1679103147,
        "uid": 664744,
        "name": "winds888",
        "ccfLevel": 0,
        "title": "P8803 [\u84dd\u6865\u676f 2022 \u56fd B] \u8d39\u7528\u62a5\u9500"
    },
    {
        "content": "\u4e0d\u8003\u8651 $K$ \u7684\u9650\u5236\uff0c\u8fd9\u4e2a\u9898\u662f\u4e00\u4e2a\u975e\u5e38\u677f\u5b50\u7684\u80cc\u5305\u95ee\u9898\u3002\r\n\r\n\u5148\u5c06\u6240\u6709\u7684\u7968\u636e\u6309\u7167\u65f6\u95f4\u6392\u5e8f\uff0c\u4ee5\u4e0b\u6240\u8bf4\u7684\u7b2c $i$ \u4e2a\u7968\u636e\u542b\u4e49\u4e3a\u6309\u65f6\u95f4\u5347\u5e8f\u6392\u5e8f\u7684\u6392\u540d\u4e3a $i$ \u7684\u7968\u636e\u3002\r\n\r\n\u5982\u679c\u6211\u4eec\u66b4\u529b\u5730\u8003\u8651 $K$ \u7684\u5f71\u54cd\uff0c\u5b9a\u4e49 $dp[i][j][k] = 0 / 1$ \u8868\u793a\u524d $i$ \u4e2a\u7968\u636e\uff0c\u4e0a\u4e00\u4e2a\u4f7f\u7528\u7684\u7968\u636e\u662f\u7b2c $j$ \u4e2a\u7968\u636e\uff0c\u662f\u5426\u80fd\u4f7f\u6240\u7528\u7968\u636e\u603b\u91d1\u989d\u4e3a $k$\u3002\u8fd9\u4e2a dp \u7684\u8f6c\u79fb\u662f\u5bb9\u6613\u7684\uff0c\u590d\u6742\u5ea6 $O(N^2M)$\u3002\r\n\r\n\u7531\u4e8e $N$ \u5f88\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u6c42\u5f97\u5bf9\u4e8e\u6bcf\u4e2a\u7968\u636e\uff0c\u524d\u4e00\u4e2a\u53ef\u4ee5\u548c\u8fd9\u4e2a\u7968\u636e\u4e00\u8d77\u4f7f\u7528\u7684\u7968\u636e\uff0c\u8fd9\u4e2a\u8fc7\u7a0b $O(N^2)$\u3002\u5982\u679c\u628a $N$ \u6539\u5927\u4e00\u70b9\uff0c\u4e8c\u5206\u4e00\u4e0b\u4e5f\u884c\u3002\u6211\u4eec\u5b9a\u4e49 $f[i]$ \u4e3a\u65f6\u95f4\u6700\u665a\u7684\u53ef\u4ee5\u548c\u7b2c $i$ \u4e2a\u7968\u636e\u4e00\u8d77\u4f7f\u7528\u7684\u7968\u636e\u7684\u7f16\u53f7\u3002\r\n\r\n\u5b9a\u4e49 $a[i].v$ \u4e3a\u7b2c $i$ \u4e2a\u7968\u636e\u7684\u91d1\u989d\uff0c$dp[i][j] = 0 / 1$ \u8868\u793a\u524d $i$ \u4e2a\u7968\u636e\uff0c\u662f\u5426\u80fd\u4f7f\u6240\u7528\u7968\u636e\u603b\u91d1\u989d\u4e3a $j$\u3002\u8003\u8651\u8f6c\u79fb\uff0c\u5982\u679c\u4e0d\u9009\u7b2c $i$ \u4e2a\u7968\u636e\uff0c\u6709 $dp[i][j] = dp[i - 1][j]$\uff0c\u5982\u679c\u9009\u7b2c $i$ \u4e2a\u7968\u636e\uff0c\u6709 $dp[i][j] = dp[f[i]][j-a[i].v]$\uff0c\u5219\u6709 $dp[i][j] = \\max(dp[i - 1][j], dp[f[i]][j-a[i].v])$\uff0c\u590d\u6742\u5ea6 $O(NM)$\u3002\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\n#define N 1005\r\n#define M 5005\r\n#define int long long\r\n#define Fol(i, j, n) for(int i = j ; i >= n ; --i)\r\n#define For(i, j, n) for(int i = j ; i <= n ; ++i)\r\nint h, n, m, k, y, ans, f[N], s[N], dp[N][M];\r\nstruct node{ int d, v; }a[N];\r\ninline bool cmp(node x, node y){ return x.d < y.d; }\r\n\r\ninline int setup(){\r\n\ts[1] = 0;\r\n\ts[2] = 31;\r\n\ts[3] = 59;\r\n\ts[4] = 90;\r\n\ts[5] = 120;\r\n\ts[6] = 151;\r\n\ts[7] = 181;\r\n\ts[8] = 212;\r\n\ts[9] = 243;\r\n\ts[10] = 273;\r\n\ts[11] = 304;\r\n\ts[12] = 334;\r\n}\r\ninline int date(int month, int day){ return s[month] + day; }\r\n\r\nsigned main(){\r\n\tsetup();\r\n\tscanf(\"%lld %lld %lld\", &n, &m, &k);\r\n\tFor(i, 1, n) scanf(\"%lld %lld %lld\", &h, &y, &a[i].v), a[i].d = date(h, y);\r\n\tsort(a + 1, a + n + 1, cmp);\r\n\ta[0].d = -1000000;\r\n\tFor(i, 1, n){\r\n\t\tFol(j, i, 0){\r\n\t\t\tif(a[i].d - a[j].d >= k){\r\n\t\t\t\tf[i] = j;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tdp[0][0] = 1;\r\n\tFor(i, 1, n){\r\n\t\tFor(j, 0, m) dp[i][j] = dp[i - 1][j];\r\n\t\tFor(j, a[i].v, m) dp[i][j] = max(dp[i][j], dp[f[i]][j - a[i].v]);\r\n\t}\r\n\tFor(i, 0, m) ans = max(ans, i * dp[n][i]);\r\n\tprintf(\"%lld\", ans);\r\n\treturn 0;\r\n}",
        "postTime": 1668744696,
        "uid": 163980,
        "name": "\u884c\u541f\u5578\u4e5d\u5dde",
        "ccfLevel": 7,
        "title": "P8803 [\u84dd\u6865\u676f 2022 \u56fd B] \u8d39\u7528\u62a5\u9500 \u9898\u89e3"
    }
]
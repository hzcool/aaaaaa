[
    {
        "content": "\u4f5c\u4e3a\u6b64\u9898\u76ee\u524d\u7684\u6700\u4f18\u89e3\uff0c\u6211\u6709\u5fc5\u8981\u53d1\u4e00\u4e2a\u65b0\u7684\u9898\u89e3\uff1a\n\n\u9996\u5148\uff0c\u672c\u9898\u7684\u60c5\u666f\u662f\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\uff0c\n\n\u5206\u6790\u4e00\u4e0b\u53ef\u77e5\u8981\u7528dp,\n\n\u8bbef[i][j][k]\u4e3a\u524di\u79d2\u5411\u5317\u79fb\u52a8j\u6b65\uff0c\u5411\u4e1c\u79fb\u52a8k\u6b65\u6700\u591a\u80fd\u633d\u6551\u7684\u5976\u725b\u6570\n\n\u5219f[i][j][k]=max(f[i-1][j+1][k],f[i-1][j][k+1],f[i-1][j-1][k],f[i-1][j][k-1])+g[j][k]\n\n\u800cg[j][k]\u8868\u793a\u5168\u4f53\u5976\u725b\u5411\u5317\u79fb\u52a8j\u6b65\uff0c\u5411\u4e1c\u79fb\u52a8k\u6b65\u65f6\u80fd\u633d\u6551\u7684\u5976\u725b\u6570\n\n\u7ed9\u51fa\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\nconst int N=1000,T=31;\nconst int dx[]={1,0,0,-1},dy[]={0,1,-1,0},d[]={69,78,83,87};\n//\u65b9\u5411\u589e\u91cf\u6309\u5b57\u6bcd\u5b57\u5178\u5e8f\u7684\u987a\u5e8f\u7ed9\u51fa\uff1aE,N,S,W\nint n,m,k,i,j,s,t,x[N],y[N],p[N],q[N],g[T*2][T*2],f[T][T*2][T*2],u,v;\n//\u56e0\u4e3a\u4e0b\u6807\u4e0d\u80fd\u4e3a\u8d1f\uff0c\u6240\u4ee5\u5411\u5357\u5411\u897f\u7684\u8d1f\u6570\u8981\u52a0\u4e0aT\u4f7f\u4e4b\u4e3a\u6b63\nint max(int x,int y){return x>y?x:y;}\nint abs(int x){return x>0?x:-x;}\nint main(){\n    scanf(\"%d%d%d\",&n,&m,&k);\n    for(i=0;i<n;i++)\n        scanf(\"%d%d\",x+i,y+i);\n    for(i=0;i<m;i++)\n        scanf(\"%d%d\",p+i,q+i);\n    for(i=0;i<n;i++)\n        for(j=0;j<m;j++)\n            if(abs(p[j]-x[i])+abs(q[j]-y[i])<=k)\n                g[p[j]-x[i]+T][q[j]-y[i]+T]++;\n    //g\u6570\u7ec4\u7531\u521d\u59cb\u5316\u5f97\u5230\uff0c\u53ea\u8981\u5976\u725b\u548c\u8349\u579b\u7684\u66fc\u54c8\u987f\u8ddd\u79bb<=k,\u4fbf\u662f\u53ef\u8fbe\u7684\n    for(t=k;t>=0;t--)//\u9636\u6bb5\u4ece\u5927\u5230\u5c0f\u679a\u4e3e\u662f\u4e3a\u4e86\u8f93\u51fa\u4f7f\u5b57\u5178\u5e8f\u6700\u5c0f\u65b9\u4fbf\n        for(u=T-t;u<=T+t;u++)\n            for(v=T-t;v<=T+t;v++){\n                for(i=0;i<4;i++)\n                    f[t][u][v]=max(f[t+1][u+dx[i]][v+dy[i]],f[t][u][v]);\n                f[t][u][v]+=g[u][v];\n            }\n    printf(\"%d\\n\",f[0][T][T]);\n    u=T;v=T;\n    for(i=0;i<k;i++){\n        for(j=0;j<4;j++)\n            if(f[i][u][v]==f[i+1][u+dx[j]][v+dy[j]]+g[u][v])\n                break;\n        //\u53ea\u8981\u53d1\u73b0\u672c\u72b6\u6001\u662f\u7531\u7b2cj\u4e2a\u51b3\u7b56\u5f97\u6765\u7684\u5c31\u9000\u51fa\u5faa\u73af\uff0c\u8f93\u51fa\n        u+=dx[j];v+=dy[j];\n        printf(\"%c\",d[j]);\n    }\n    return 0;\n}\n//\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n*m+k^3)\n//\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(n+m+k^3)\n```",
        "postTime": 1508421468,
        "uid": 41485,
        "name": "HybridTheory",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2905 \u3010[USACO08OPEN]\u519c\u573a\u5371\u673aCrisis on the Farm\u3011"
    },
    {
        "content": "\u601d\u8def\uff1a\u91cd\u70b9\u662f\u6574\u4f53\u5316\u7684\u6570\u5b66\u601d\u60f3\u3002\n\n\u672c\u8d28\u662f\u4e00\u9053\u6076\u5fc3\u7684DP\uff0c\u4e0d\u5149\u9884\u5904\u7406\u6076\u5fc3\uff0c\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u6076\u5fc3\uff0c\u751a\u81f3\u8fde\u8f93\u51fa\u4e5f\u5f88\u6076\u5fc3(\u256f\u2035\u25a1\u2032)\u256f\ufe35\u253b\u2501\u253b\n\n\u81f3\u4e8e\u5177\u4f53\u7684\u5c31\u770b\u4ee3\u7801\u91cc\u7684\u6ce8\u91ca\u5427\uff0c\u6309\u7167\u6211\u4eec\u8001\u5e08\u7684\u8bf4\u6cd5\uff1a\u201c\u4f60\u8fd9\u662f\u5728\u8fd9\u6ce8\u91ca\uff0c\u8fd8\u662f\u5199\u5c0f\u8bf4\u554a\u3002\u201d\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define MAXN 1500\nusing namespace std;\nint n,m,K,ans;\nint dx[4]={1,0,0,-1};\nint dy[4]={0,1,-1,0};\nchar step[40][64][64];\nchar C[4]={'W','S','N','E'};\nint cnt[64][64],f[40][64][64]; //f[k][i][j]\u8bb0\u5f55\u8d70k\u6b65,\u7eb5\u5411\u79fb\u52a8\u4e86i-31\u6b65,\u6a2a\u5411\u79fb\u52a8\u4e86j-31\u6b65,\u6240\u80fd\u62ef\u6551\u7684\u6700\u591a\u7684\u725b\u7684\u6570\u91cf\u3002\nint cawx[MAXN],cawy[MAXN],grassx[MAXN],grassy[MAXN];//\u8bb0\u5f55\u725b\u548c\u8349\u579b\u7684\u6a2a\u7eb5\u5750\u6807.\nint main(){\n    scanf(\"%d%d%d\",&n,&m,&K);\n    for(int i=1;i<=n;i++)\n        scanf(\"%d%d\",&cawx[i],&cawy[i]);\n    for(int i=1;i<=m;i++)\n        scanf(\"%d%d\",&grassx[i],&grassy[i]);\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=m;j++){\n            int cx=cawx[i]-grassx[j];    //\u7b2ci\u5934\u725b\u79fb\u52a8\u5230\u7b2cj\u4e2a\u8349\u579b,\u7eb5\u5411\u6700\u5c11\u6240\u8d70\u7684\u8ddd\u79bb.    \n            int cy=cawy[i]-grassy[j];    //\u7b2ci\u5934\u725b\u79fb\u52a8\u5230\u7b2cj\u4e2a\u8349\u579b,\u6a2a\u5411\u6700\u5c11\u6240\u8d70\u7684\u8ddd\u79bb.\n            if(abs(cx)<=30&&abs(cy)<=30)//\u56e0\u4e3ak<=30,\u6240\u4ee5\u5f53\u6709\u4e00\u4e2a\u65b9\u5411\u7684\u8ddd\u79bb\u5927\u4e8e30,\u5c31\u4e0d\u7528\u8003\u8651\u4e86,\u56e0\u4e3a\u4e00\u5b9a\u4e0d\u53ef\u80fd\u8d70\u5230. \n                cnt[cx+31][cy+31]++;    //\u5426\u5219cnt\u8bb0\u5f55\u8d70\u7eb5\u5411i\u6b65\u6a2a\u5411\u8d70j\u6b65\u6240\u80fd\u62ef\u6551\u7684\u725b\u7684\u6570\u91cf. \n        }\n    for(int k=0;k<=K;k++)\n        for(int i=0;i<=62;i++)\n            for(int j=0;j<=62;j++){\n                f[k][i][j]=-0x3f3f3f3f;\n                step[k][i][j]='Z';\n            }\n    f[0][31][31]=0;    //\u8d4b\u521d\u503c,\u6700\u5f00\u59cb\u65f6\u6240\u80fd\u62ef\u6551\u7684\u725b\u7684\u6570\u91cf\u4e3a0. \n    //\u8fd9\u91cc\u8981\u7406\u89e3,\u56e0\u4e3a\u4ed6\u53ef\u4ee5\u5411\u4e0a\u4e0b\u5de6\u53f3\u8d70,\u4e3a\u4e86\u9632\u6b62\u8d1f\u5750\u6807\u7684\u51fa\u73b0,\u6211\u4eec\u628a\u4e00\u5f00\u59cb\u65f6\u7684\u539f\u70b9\u5750\u6807\u5f53\u505a(31,31).\n    for(int k=1;k<=K;k++)\n        for(int i=1;i<=61;i++)\n            for(int j=1;j<=61;j++)\n                f[k][i][j]=cnt[i][j]+max(max(f[k-1][i-1][j],f[k-1][i+1][j]),max(f[k-1][i][j-1],f[k-1][i][j+1]));\n                //\u8fd9\u4e2a\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u4e0d\u7528\u89e3\u91ca\u4e86,\u8fd8\u662f\u5f88\u5bb9\u6613\u7406\u89e3\u7684. \n    for(int i=1;i<=61;i++)\n        for(int j=1;j<=61;j++)\n            ans=max(ans,f[K][i][j]);\n    for(int i=1;i<=61;i++)\n        for(int j=1;j<=61;j++)\n            if(ans==f[K][i][j])\n                step[K][i][j]='A';    //\u5982\u679c\u4e3a\u7eb5\u5411\u8d70i\u6b65\u6a2a\u5411\u8d70j\u6b65\u662f\u4e00\u79cd\u53ef\u884c\u7684\u8d70\u6cd5,\u8bb0\u5f55\u4ee5\u65b9\u4fbf\u6c42\u5b57\u5178\u5e8f\u6700\u5c0f. \n    for(int k=K-1;k>=0;k--)\n        for(int i=1;i<=61;i++)\n            for(int j=1;j<=61;j++)\n                for(int l=0;l<4;l++)\n                    if(f[k][i][j]+cnt[i+dx[l]][j+dy[l]]==f[k+1][i+dx[l]][j+dy[l]]&&step[k+1][i+dx[l]][j+dy[l]]<'Z')\n                        step[k][i][j]=C[l];    //\u5012\u5e8f\u627e\u51fa\u6240\u6709\u53ef\u80fd\u7684\u8d70\u6cd5. \n    cout<<ans<<endl;\n    int i=31,j=31;\n    for(int k=0;k<K;k++){\n        cout<<step[k][i][j];\n        if(step[k][i][j]=='E')    i--;    //\u627e\u5b57\u5178\u5e8f\u6700\u5c0f\u7684. \n        else if(step[k][i][j]=='W')    i++;\n        else if(step[k][i][j]=='S')    j++;\n        else if(step[k][i][j]=='N')    j--;    \n    }\n}\n```",
        "postTime": 1504959648,
        "uid": 21719,
        "name": "\u6ca7\u6f9c",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2905 \u3010[USACO08OPEN]\u519c\u573a\u5371\u673aCrisis on the Farm\u3011"
    },
    {
        "content": "\u672c\u9898\u505a\u6cd5\u4e0d\u662f\u91cd\u70b9\uff0c\u8f93\u51fa\u6700\u4e3a\u6076\u5fc3\uff08\u6342\u80f8\u53e3\uff09\u3002\n\n\u9996\u5148\uff0c\u770b\u5230\u9898\u76ee\uff0c\u641c\u7d22\u65e0\u671b\uff0c\u8d2a\u5fc3\u6251\u8857\uff0c\u8003\u8651 DP\u3002\u7136\u540e\u53d1\u73b0 k \u7279\u522b\u5c0f\uff0c\u5c31\u53ef\u4ee5 $\\Theta(k^2n)$ \u9884\u5904\u7406\u51fa\u5411\u4e1c\u8d70 i \u6b65\u5411\u5317\u8d70 j \u6b65\u80fd\u62ef\u6551\u7684\u5976\u725b\u7684\u6570\u91cf `savn[i][j]`\uff0c\u7136\u540e\u76f4\u63a5\u5f00\u4e00\u4e2a\u4e09\u7ef4\u6570\u7ec4 `dp[i][dx][dy]` \u8868\u793a\u5728\u7b2c i \u6b21\u5439\u54e8\u540e\uff0c\u4e1c\u897f\u5411\u4f4d\u79fb dx\uff0c\u5357\u5317\u5411\u4f4d\u79fb dy\uff0c $\\Theta(k^3)$ DP \u5c31\u597d\u3002\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u697c\u4e0a\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\u3002\n\n\u7136\u540e\u91cd\u5934\u620f\u6765\u4e86\uff0c\u5982\u4f55\u8f93\u51fa\u3002\n\n\u9996\u5148\uff0c\u56e0\u4e3a\u8981\u63a7\u5236\u5b57\u5178\u5e8f\uff0c\u6211\u4eec\u9009\u62e9 DP \u65b9\u5f0f\u4e3a\u586b\u8868 DP\u3002\u7136\u540e\uff0c\u6bcf\u4e00\u6b65\u8d2a\u5fc3\u9009\u62e9\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u4e00\u6b65\u8d70\u3002\u4ea4\u4e0a\u53bb\uff0c\u5149\u8363\u5730 WA \u5230 67\u3002\n\n\u5206\u6790\u4e00\u4e0b\u5c31\u4f1a\u53d1\u73b0\uff0c\u4fdd\u8bc1\u6bcf\u4e00\u6b65\u5b57\u5178\u5e8f\u6700\u5c0f\u4e0d\u4e00\u5b9a\u80fd\u4fdd\u8bc1\u7b54\u6848\u7684\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\u56e0\u4e3a\u6211\u4eec\u7684\u51b3\u7b56\u987a\u5e8f\u548c\u5b57\u5178\u5e8f\u7684\u987a\u5e8f\u662f\u53cd\u7684\uff0c\u5b57\u5178\u5e8f\u662f\u5148\u6bd4\u8f83\u524d\u9762\u7684\u5b57\u7b26\uff0c\u800c\u6211\u4eec\u662f\u8d2a\u5fc3\u8ba9\u540e\u9762\u7684\u5b57\u7b26\u6700\u5c0f\u3002\u7136\u540e\u5c31\u70b8\u4e86\u3002\n\n\u4e00\u4e2a\u5f88\u663e\u7136\u7684\u65b9\u6848\u662f\u8bb0\u5f55\u6bcf\u4e00\u4e2a\u72b6\u6001\u7684\u6b65\u9aa4\u5e8f\u5217\u7684\u5b57\u5178\u5e8f\u6392\u540d\uff0c\u7136\u540e\u8d2a\u5fc3\u8f6c\u79fb\u3002\u5b57\u5178\u5e8f\u6392\u540d\u7684\u503c\u57df\u7a7a\u95f4\u662f $\\Theta(4^k)$\uff0c\u521a\u597d\u80fd\u7528 long long \u88c5\u4e0b\u3002\u8f6c\u79fb\u7684\u65f6\u5019\u987a\u4fbf\u7ef4\u62a4\u4e00\u4e0b\u8f6c\u79fb\u8fc7\u540e\u7684\u5b57\u5178\u5e8f\u6392\u540d\u5c31\u597d\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(m+k^2n+k^3)$\uff0c\u4ee3\u7801\u590d\u6742\u5ea6 2.22KB\u3002\n\n\u7136\u540e\u8fd8\u6709\u4e00\u79cd\u4e71\u641e\u65b9\u6848\u3002\u65e2\u7136\u8d2a\u5fc3\u8ba9\u540e\u9762\u5b57\u7b26\u6700\u5c0f\u70b8\u4e86\uff0c\u90a3\u6211\u4eec\u8d2a\u5fc3\u8ba9\u540e\u9762\u5b57\u7b26\u6700\u5927\u3002\u56e0\u4e3a\u6700\u540e\u7edf\u8ba1\u7b54\u6848\u7684\u65f6\u5019\u7ec8\u70b9\u56fa\u5b9a\uff0c\u5982\u679c\u540e\u9762\u5b57\u7b26\u5927\u7684\u8bdd\uff0c\u4e00\u5b9a\u610f\u5473\u7740\u524d\u9762\u7684\u5b57\u7b26\u5c0f\u3002\u5728\u5bfb\u627e\u6700\u4f18\u89e3\u7684\u65f6\u5019\u4e5f\u4e00\u6837\uff0c\u8d2a\u5fc3\u5730\u8ba9 `dp[k][dx][dy]` \u6700\u5927\u7684\u540c\u65f6\u8ba9 dx \u548c dy \u6700\u5927\u3002\n\n\u4e8e\u662f\u5c31\u8fc7\u4e86\u3002\u8fd9\u4e2a\u770b\u8d77\u6765\u5341\u5206\u597d Hack \u7684\u65b9\u6848\u7adf\u7136\u8fc7\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u8fd8\u662f $\\Theta(m+k^2n+k^3)$\uff0c\u4ee3\u7801\u590d\u6742\u5ea6\u964d\u5230\u4e86 1.75KB\u3002\n\n\u7136\u800c\u9898\u89e3\u5df2\u7ecf\u6709\u7b2c\u4e8c\u79cd\u65b9\u6848\u7684\u4ee3\u7801\u4e86\uff0c\u4e8e\u662f\u4e0b\u9762\u9644\u7684\u662f\u66b4\u529b\u7ef4\u62a4\u5b57\u5178\u5e8f\u6392\u540d\u7684 AC \u4ee3\u7801\uff1a\n\n```cpp\n#include <stack>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n\nchar di[] = {'E','N','S','W'};\nint gox[] = {1,0,0,-1};\nint goy[] = {0,1,-1,0};\n\n#define DELTA 32\n\nint gi[1005][1005];\nint xi[1005];\nint yi[1005];\n\ninline bool inspace(int x,int y)\n{\n\treturn x>0 && x<=1000 && y>0 && y<=1000;\n}\n\nint savn[65][65];\n\nint dp[35][65][65];\nint deci[35][65][65];\nlong long strn[35][65][65];\n\nint main()\n{\n\tint n,m,k;\n\tscanf(\"%d%d%d\",&n,&m,&k);\n\tfor(int i=1; i<=n; ++i)\n\t{\n\t\tscanf(\"%d%d\",xi+i,yi+i);\n\t}\n\tfor(int i=1; i<=m; ++i)\n\t{\n\t\tint x,y;\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tgi[x][y] = 1;\n\t}\n\n\tfor(int i=-k; i<=k; ++i)\n\t{\n\t\tfor(int j=-k; j<=k; ++j)\n\t\t{\n\t\t\tint res = 0;\n\t\t\tfor(int cn=1; cn<=n; ++cn)\n\t\t\t{\n\t\t\t\tif(inspace(xi[cn]+i,yi[cn]+j) && gi[xi[cn]+i][yi[cn]+j])\n\t\t\t\t{\n\t\t\t\t\t++res;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsavn[i+DELTA][j+DELTA] = res;\n\t\t}\n\t}\n\n\tmemset(dp,0x80,sizeof(dp));\n\tdp[0][0+DELTA][0+DELTA] = 0;\n\n\tfor(int i=1; i<=k; ++i)\n\t{\n\t\tfor(int dx=-i+DELTA; dx<=i+DELTA; ++dx)\n\t\t{\n\t\t\tfor(int dy=-i+DELTA; dy<=i+DELTA; ++dy)\n\t\t\t{\n\t\t\t\tlong long lstrn = 0x7f7f7f7f7f7f7f7fLL;\n\t\t\t\tfor(int j=0; j<4; ++j)\n\t\t\t\t{\n\t\t\t\t\tif(dp[i-1][dx-gox[j]][dy-goy[j]]==dp[i][dx][dy] && lstrn>strn[i-1][dx-gox[j]][dy-goy[j]])\n\t\t\t\t\t{\n\t\t\t\t\t\tdeci[i][dx][dy] = j;\n\t\t\t\t\t\tlstrn = strn[i-1][dx-gox[j]][dy-goy[j]];\n\t\t\t\t\t}\n\t\t\t\t\tif(dp[i-1][dx-gox[j]][dy-goy[j]] > dp[i][dx][dy])\n\t\t\t\t\t{\n\t\t\t\t\t\tdeci[i][dx][dy] = j;\n\t\t\t\t\t\tlstrn = strn[i-1][dx-gox[j]][dy-goy[j]];\n\t\t\t\t\t\tdp[i][dx][dy] = dp[i-1][dx-gox[j]][dy-goy[j]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdp[i][dx][dy] += savn[dx][dy];\n\t\t\t\tstrn[i][dx][dy] = lstrn*4+deci[i][dx][dy];\n\t\t\t}\n\t\t}\n\t}\n\n\tint maxdx = DELTA;\n\tint maxdy = DELTA;\n\tfor(int dx=DELTA-k; dx<=DELTA+k; ++dx)\n\t{\n\t\tfor(int dy=DELTA-k; dy<=DELTA+k; ++dy)\n\t\t{\n\t\t\tif(dp[k][dx][dy]==dp[k][maxdx][maxdy] && strn[k][dx][dy]<strn[k][maxdx][maxdy])\n\t\t\t{\n\t\t\t\tmaxdx = dx;\n\t\t\t\tmaxdy = dy;\n\t\t\t}\n\t\t\tif(dp[k][dx][dy]>dp[k][maxdx][maxdy])\n\t\t\t{\n\t\t\t\tmaxdx = dx;\n\t\t\t\tmaxdy = dy;\n\t\t\t}\n\t\t}\n\t}\n\n\tprintf(\"%d\\n\",dp[k][maxdx][maxdy]);\n\n\tstack<char> stk;\n\tfor(int i=k; i>=1; --i)\n\t{\n\t\tint g = deci[i][maxdx][maxdy];\n\t\tstk.push(di[g]);\n\t\tmaxdx -= gox[g];\n\t\tmaxdy -= goy[g];\n\t}\n\n\twhile(!stk.empty())\n\t{\n\t\tputchar(stk.top());\n\t\tstk.pop();\n\t}\n}\n```",
        "postTime": 1576580732,
        "uid": 49458,
        "name": "\u6728\u6728\uff01",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2905 \u3010[USACO08OPEN]\u519c\u573a\u5371\u673aCrisis on the Farm\u3011"
    }
]
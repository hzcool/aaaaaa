[
    {
        "content": "\u9996\u5148\u53d1\u73b0\u8fd9\u9898\u8981\u6c42\u7684\u662f\u54c8\u5bc6\u987f\u56de\u8def\uff0c\u7136\u540e\u4e00\u770b\u662fNPC\u95ee\u9898\u77ac\u95f4\u529d\u9000\u3002\u3002\u5176\u5b9e\u662f\u6709\u7279\u70b9\u7684\uff0c\u5bf9\u4e8e\u8fd9\u9053\u9898\u6765\u8bf4\uff0c\u7279\u70b9\u5c31\u662f\u5408\u6cd5\u7684\u56fe\u4e2d\u51fa\u5ea6\u5927\u4e8e2\u7684\u70b9\u4e0d\u4f1a\u5f88\u591a\uff0c\u6700\u591a\u53ea\u6709$20$\u4e2a\uff0c\u800c\u5bf9\u4e8e\u51fa\u5ea6\u4e3a$1$\u7684\u70b9\u662f\u6ca1\u5fc5\u8981\u53bb\u8dd1\u7684\uff0c\u56e0\u4e3a\u77e5\u9053\u8d70\u4e0a\u53bb\u4e4b\u540e\u7684\u7ed3\u679c\uff0c\u6240\u4ee5\u4e8b\u5b9e\u4e0a\u53ea\u9700\u8981\u5bf9\u8fd9\u4e8c\u5341\u4e2a\u70b9\u8dd1\u4e00\u4e0b\u5c31\u884c\uff0c\u90a3\u4e48\u53ef\u4ee5\u628a\u6240\u6709\u7684\u94fe\u90fd\u7f29\u8d77\u6765\uff0c\u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u6781\u9650\u4e5f\u624d$20*2^{20}$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n\n```cpp\n#include<vector>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst int N=2e5+10;\nstruct Edge{\n\tint to,nxt;\n}e[N<<1];\nint n,m;\nint h[N],idx,nxt[N],d[N];\nvoid Ins(int a,int b){\n\te[++idx].to=b;e[idx].nxt=h[a];h[a]=idx;\n}\nvector<int> vec;\nbool vis[N],inq[N];\nbool check(){\n\tmemset(inq,0,sizeof(inq));\n\tfor(int i=1,now=1;i<=n;i++,now=nxt[now]){\n\t\tif(inq[now])return 0;\n\t\tinq[now]=1;\n\t}\n\treturn 1;\n}\nvoid dfs(int u){\n\tif(u==vec.size()){\n\t\tif(check()){\n\t\t\tfor(int i=1,now=1;i<=n;i++,now=nxt[now])\n\t\t\t\tprintf(\"%d \",now);\n\t\t\tprintf(\"1 \");\n\t\t\texit(0);\n\t\t}\n\t\treturn;\n\t}\n\tint now=vec[u];\n\tfor(int i=h[now];i;i=e[i].nxt){\n\t\tint v=e[i].to;\n\t\tif(vis[v])continue;\n\t\tvis[v]=1;\n\t\tnxt[now]=v;\n\t\tdfs(u+1);\n\t\tvis[v]=0;\n\t}\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=m;i++){\n\t\tint a,b;\n\t\tscanf(\"%d%d\",&a,&b);\n\t\tIns(a,b);d[a]++;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(d[i]>=2)vec.push_back(i);\n\t\telse if(d[i]==0)return puts(\"There is no route, Karl!\"),0;\n\t\telse {\n\t\t\tint v=e[h[i]].to;\n\t\t\tif(vis[v])return puts(\"There is no route, Karl!\"),0;\n\t\t\tvis[v]=1;\n\t\t\tnxt[i]=v;\n\t\t}\n\t}\n\tdfs(0);\n\treturn puts(\"There is no route, Karl!\"),0;\n}\n```",
        "postTime": 1604460860,
        "uid": 305262,
        "name": "Su_Zipei",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P6983 \u3010[NEERC2015]King\u2019s Inspection\u3011"
    }
]
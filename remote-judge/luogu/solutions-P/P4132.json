[
    {
        "content": "#### Description\n\n> \u7ed9\u5b9a\u4e24\u4e2a\u5947\u8d28\u6570 $p,q$\uff0c\u6c42\uff1a\n> $$\\sum\\limits_{i=1}^{\\frac{p-1}{2}}\\left\\lfloor\\dfrac{iq}{p}\\right\\rfloor+\\sum\\limits_{j=1}^\\frac{q-1}{2}\\left\\lfloor\\dfrac{jp}{q}\\right\\rfloor$$\n\n#### Solution 1\n\n\u7c7b\u6b27\u51e0\u91cc\u5f97\u7b97\u6cd5\u3002\n\n\u6211\u4eec\u77e5\u9053\u7c7b\u6b27\u7684\u57fa\u672c\u5f0f\u5b50\u4e3a\uff1a\n\n$$\\sum\\limits_{i=0}^n\\left\\lfloor\\dfrac{ai+b}{c}\\right\\rfloor$$\n\n\u7136\u540e\u9898\u76ee\u4f5c\u8005\u826f\u5fc3\u7684\u5e2e\u6211\u4eec\u7701\u6389\u4e86 $b$\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5c06 $b=0$ \u4ee3\u8fdb\u53bb\u5373\u53ef\u3002\n\n\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86\uff08\u5176\u5b9e\u662f\u5199\u9505\u4e86 /kk\uff09\n\n#### Solution 2\n\n\u7c7b\u6b27\u660e\u663e\u4e0d\u914d\u84dd\u9898\uff0c\u6240\u4ee5\u8fd9\u9898\u8fd8\u6709\u627e\u89c4\u5f8b\u505a\u6cd5\u3002\n\n\u6bd4\u5982\u6211\u4eec\u770b\u6837\u4f8b\uff0c$\\dfrac{p-1}{2}=2$\uff0c$\\dfrac{q-1}{2}=3$\uff0c$2 \\times 3=6$\uff0c\u6240\u4ee5\u6211\u4eec\u80fd\u731c\u5230\u8f93\u51fa $\\dfrac{p-1}{2} \\times \\dfrac{q-1}{2}$ \u5373\u53ef\u3002\n\n#### Code 2\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main () {\n\tlong long p, q;\n\tscanf(\"%lld%lld\", &p, &q);\n\tp = (p - 1) / 2;\n\tq = (q - 1) / 2;\n\tprintf(\"%lld\", p * q);\n\treturn 0;\n}\n```\n\n\u7136\u540e\u4f60\u4f1a\u53d1\u73b0\u53ea\u6709 $90$ \u5206\uff0c\u6709\u4e00\u4e2a\u70b9 WA \u6389\u4e86\u3002\n\n#### Solution 2 - For Addition\n\n$p=q$ \u7684\u65f6\u5019\u8981\u7279\u5224\uff0c\u8fd9\u4e2a\u65f6\u5019\u7684\u7b54\u6848\u5e94\u8be5\u662f $\\dfrac{p^2}{4}$\u3002\n\n#### Code 2 - For Addition\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main () {\n\tlong long p, q;\n\tscanf(\"%lld%lld\", &p, &q);\n\tif (p == q) {\n\t\tprintf(\"%lld\", p * p / 4);\n\t\treturn 0;\n\t}\n\tp = (p - 1) / 2;\n\tq = (q - 1) / 2;\n\tprintf(\"%lld\", p * q);\n\treturn 0;\n}\n```\n\n\u7136\u540e\u5c31\u4f1a A \u4e86\u3002",
        "postTime": 1601005677,
        "uid": 114914,
        "name": "\u4e00\u53ea\u4e66\u866b\u4ed4",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    },
    {
        "content": "\u6570\u5b66\u9898\u3002\n\n\u8bbe\u4e24\u4e2a\u6570\u4e3a$p,q$\u3002\u5982\u4e0b\u56fe\uff08$p=7,q=11$\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/14245.png)\n\n\u5982\u56fe\uff0c\u659c\u7ebf\u4e0b\u65b9\u7684\u6574\u70b9\u6709$\\sum_{k=1}^5[k\\times\\frac{3}{5}]$\u4e2a\u3002\uff08$[]$\u8868\u793a\u5411\u4e0b\u53d6\u6574\uff09\n\n\u628a\u56fe\u98a0\u5012\u6765\u770b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/14246.png)\n\n\u8fd9\u4e2a\u56fe\u4e0b\u65b9\u7684\u6574\u70b9\u6709$\\sum_{k=1}^3[k\\times\\frac{5}{3}]$\u4e2a\u3002\n\n\u6240\u4ee5\uff0c\u8be5\u5f0f\u4e24\u90e8\u5206\u5206\u522b\u662f\u4e00\u4e2a$(\\frac{p-1}{2},\\frac{q-1}{2})$\u65b9\u683c\u56fe\u4e3b\u5bf9\u89d2\u7ebf\u5206\u6210\u7684\u4e24\u90e8\u5206\u7684\u6574\u70b9\u6570\u3002\n\n\u53c8\u56e0\u4e3a$p,q$\u90fd\u662f\u8d28\u6570\uff0c\u6240\u4ee5\u8fd9\u4e24\u90e8\u5206\u7684\u6574\u70b9\u6570\u4e4b\u548c\u5c31\u7b49\u4e8e\u6574\u4e2a\u56fe\u7684\u6574\u70b9\u6570\u3002\n\n\u6240\u4ee5\uff0c$p=7,q=11$\u65f6\uff0c\u7b54\u6848\u5c31\u662f$3\\times5=15$\u3002\n\n\u4f46\u662f\u8981\u7279\u5224$p=q$\u7684\u60c5\u51b5\uff01\u7b54\u6848\u4e3a$(1+(p-1)\\div2)\\times(p-1)\\div2\\div2\\times2=(p^2-1)\\div 4$\u3002\uff08\u4f46\u662f$p,q$\u662f\u5947\u6570\uff0c\u6240\u4ee5\u76f4\u63a5\u8f93\u51fa$p^2\\div4$\u5373\u53ef\uff09\n\n",
        "postTime": 1518139115,
        "uid": 42156,
        "name": "feecle6418",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    },
    {
        "content": "\u770b\u9898\u89e3\u533a\u65e0\u975e\u662f\u6253\u8868\u627e\u89c4\u5f8b\uff08\u6211\u89c9\u5f97\u6ca1\u5fc5\u8981\u653e\u5230\u9898\u89e3\uff09\u6216\u8005\u662f\u53d1\u73b0\u662f\u4e00\u4e2a\u7c7b\u6b27\u51e0\u91cc\u5f97\u7b97\u6cd5\u677f\u5b50\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u79cd\u4e0d\u7528\u7c7b\u6b27\u51e0\u91cc\u5f97\u548c\u6253\u8868\u7684\u505a\u6cd5\u3002\n\n\u4ee5\u4e0b\u5047\u8bbe $p$ $q$\u4e0d\u76f8\u7b49\n\n\u9996\u5148\u6839\u636e\u5b9a\u4e49\u5199\u51fa\u5f0f\u5b50\n\n$$\\sum_{k=1}^{\\frac{p-1}{2}} \\biggl\\lfloor\\frac{kq}{p}\\biggr\\rfloor+\\sum_{k=1}^{\\frac{q-1}{2}} \\biggl\\lfloor\\frac{kp}{q}\\biggr\\rfloor$$\n\n\u4ee4 $T=\\frac{p-1}{2}$\n\n\n$$=\\sum_{k=1}^{T} (\\frac{kq}{p}-\\frac{kq\\mod p}{p})+\\sum_{k=1}^{\\frac{q-1}{2}} \\biggl\\lfloor\\frac{kp}{q}\\biggr\\rfloor$$\n\n\u5c06$\\sum_{k=1}^{T} (\\frac{kq\\mod p}{p})$\u63d0\u51fa\u6765\u5316\u7b80\n\n\u6839\u636e $T$ \u7684\u5b9a\u4e49\u6211\u4eec\u77e5\u9053 $T<p$ \n\n\u5c06$\\sum_{k=1}^{T} (\\frac{kq\\mod p}{p})$\u5199\u51fa\u6765\n\n$(q-a_1p)+(2q-a_2p)+(3q-a_3p)\u2026\u2026+(kq-a_kp) $\n\n\u53d1\u73b0a\u5e8f\u5217\u975e\u964d\uff0c\u4e8e\u662f\u62c6\u6210\u4e00\u4e9b\u540e\u7f00\u7684\u5f62\u5f0f\n\n\u8bbe $w$ \u6ee1\u8db3 $wp>kq$ \u5219\u6700\u5c0f\u7684 $w$ \u7684\u4e3a $\\lfloor\\frac{kp}{q}\\rfloor+1$ \uff08\u7531\u4e8e $p$ $q$ \u4e0d\u7b49\u4e14\u90fd\u4e3a\u5947\u8d28\u6570\uff0c\u6240\u4ee5\u4e0d\u5b58\u5728 $wp=kq$ \u5f53 $w<T$ \u65f6\uff09\n\n\u8fd9\u91cc$(T-\\lfloor\\frac{kp}{q}\\rfloor)$\u8868\u793a\u5927\u4e8e $kp$ \u7684\u6709\u51e0\u4e2a\uff0c\n\n$$\\sum_{k=1} a_kp=\\sum_{k=1} (p\\times(T-\\lfloor\\frac{kp}{q}\\rfloor))$$\n\n\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u4e0b\u4e0a\u754c\uff0c$\\frac{kp}{q}\\leq T$ \u5373 $k\\leq \\frac{Tq}{p}$\n\n\u53d1\u73b0 $\\frac{Tq}{p}=\\frac{\\frac{p-1}{2}q}{p}=\\frac{q-1}{2}$\n\n\u4ee3\u5165\u53ef\u5f97\n\n$$\\sum_{k=1}^{T} (\\frac{kq\\mod p}{p})=\\frac{\\sum_{k=1}^{T} kq-\\sum_{k=1}^{\\frac{q-1}{2}} (p\\times(T-\\lfloor\\frac{kp}{q}\\rfloor))}{p}$$\n$$=\\sum_{k=1}^{T} \\frac{kq}{p}-\\sum_{k=1}^{\\frac{q-1}{2}} (T-\\lfloor\\frac{kp}{q}\\rfloor)$$\n\n\n\u4ee3\u5165\u6700\u521d\u7684\u5f0f\u5b50\n\n$$\\sum_{k=1}^{T} (\\frac{kq}{p}-\\frac{kq\\mod p}{p})+\\sum_{k=1}^{\\frac{q-1}{2}} \\biggl\\lfloor\\frac{kp}{q}\\biggr\\rfloor$$\n$$=\\sum_{k=1}^T\\frac{kq}{p}-(\\sum_{k=1}^{T} \\frac{kq}{p}-\\sum_{k=1}^{\\frac{q-1}{2}} (T-\\lfloor\\frac{kp}{q}\\rfloor))+\\sum_{k=1}^{\\frac{q-1}{2}} \\biggl\\lfloor\\frac{kp}{q}\\biggr\\rfloor$$\n$$=\\sum_{k=1}^{\\frac{q-1}{2}}T$$\n$$=\\frac{p-1}{2}\\times\\frac{q-1}{2}$$\n\n\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u7b54\u6848\uff0c\u5f53\u7136\u8fd9\u662f\u5728\u5927\u524d\u63d0 $p$ $q$ \u4e0d\u76f8\u7b49\u7684\u60c5\u51b5\uff0c\n\n\u8003\u8651 $p$ $q$ \u76f8\u7b49\u65f6\u56e0\u4e3a $p/q=1$ \u6240\u4ee5\u7b54\u6848\u5c31\u5f88\u597d\u7b97\u4e86\uff0c\u662f$\\frac{p^2-1}{4}$\n\n\u81f3\u6b64\uff0c\u6211\u4eec\u5728\u4e0d\u7528\u7c7b\u6b27\u6216\u8005\u6253\u8868\u7684\u65b9\u5f0f\u5f97\u5230\u4e86\u6b63\u786e\u7684\u7ed3\u8bba\u3002",
        "postTime": 1627987213,
        "uid": 371852,
        "name": "\u4e00\u5ff5\u4e4b\u95f4\u3001\u3001",
        "ccfLevel": 0,
        "title": "\u3010BJWC2012\u3011\u7b97\u4e0d\u51fa\u7684\u7b97\u5f0f"
    },
    {
        "content": "\u8fd9\u7bc7\u9898\u89e3\u4e3b\u8981\u662f\u4e3a\u4e86\u9020\u798f\u4f17\u591a\u770b\u4e0d\u61c2\u53e6\u4e00\u7bc7\u9898\u89e3\u7684~~\u672a\u6765\u7684\u5de8\u4f6c~~\n\n\n# \u601d\u8def\uff1a\n\n\u9996\u5148\u89c2\u5bdf\u5230 \n\n$ \\sum_{i=1}^{\\frac{p-1}{2}}{[\\frac{kq}{p}]}$\u548c$ \\sum_{i=1}^{\\frac{q-1}{2}}{[\\frac{kp}{q}]}$\n\n\u53d1\u73b0\uff4b\u7684\u4e0a\u754c\u4e3a$\\frac{p-1}{2}$\u548c$\\frac{q-1}{2}$\n\n\u53c8\u6709\uff50\u548c\uff51\u4e00\u5b9a\uff0c\uff4b\u5728\u53d8\u5316\uff0c~~(\u81ea\u7136\u5730)~~\u60f3\u5230\u662f\u4e00\u6b21\u51fd\u6570\n\n\u4e8e\u662f\u6784\u9020\u51fd\u6570\uff46\uff08\uff58\uff09\uff1d$\\frac{q}{p}$x\u548c\uff47\uff08\uff58\uff09\uff1d$\\frac{p}{q}$x\n\n\u63a5\u7740\u6ce8\u610f\u5230\u662f\u5411\u4e0b\u53d6\u6574\uff0c\u5c31\u662f\u628a\u6240\u6709\u5728\u51fd\u6570\u8303\u56f4\u4e4b\u5185\u7684\u6574\u6570\uff58\u7684\u51fd\u6570\u503c\u5206\u522b\u5411\u4e0b\u53d6\u6574\uff0c\u53d1\u73b0\u8fd9\u5c31\u662f\u5728\u627e\u51fd\u6570\u56fe\u50cf\u4e4b\u4e0b\u7684\u6574\u70b9\u4e2a\u6570\n\n\u7528https://www.luogu.org/blog/rc-tianbu/solution-p4132\u3000\u4e2d\u7684\u4f8b\u5b50\n\n\u8bbe\u4e24\u4e2a\u6570\u4e3ap,q\u3002\u5982\u4e0b\u56fe\uff08p=7,q=11\uff09\n![](https://cdn.luogu.com.cn/upload/pic/14245.png)\n\n\u8fd9\u5c31\u662fg(x)\u7684\u56fe\u50cf\n\n\nf(x)\u7684\u540c\u7406\n\n![](https://cdn.luogu.com.cn/upload/pic/14246.png)\n\n\u4f46\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e24\u4e2a\u56fe\u50cf\u62fc\u5728\u4e00\u8d77\u5c31\u662f\u6574\u4e2a\u77e9\u5f62\uff01\uff01\uff01\n\n\u4f46\u4f60\u53ef\u80fd\u4f1a\u95ee\u4e24\u4e2a\u56fe\u5f62\u62fc\u5728\u4e00\u8d77\u9876\u70b9\u4f1a\u4e0d\u4f1a\u591a\u7b97\u6216\u5c11\u7b97\n\n\u8fd9\u6b63\u662f\u4e0b\u9762\u7684\u91cd\u70b9\n\n\u6ce8\u610f\u5230\uff50\uff0c\uff51\u4e92\u8d28\uff0c\u8fd9\u8bf4\u660e$\\frac{q}{p}$\u548c$\\frac{p}{q}$\u5747\u4e0d\u4e3a\u6574\u6570\uff0c\u6240\u4ee5\u4e0d\u7528\u8ba1\u7b97\uff0c$\\frac{q}{p}$\u548c$\\frac{p}{q}$\u4e3a\u6574\u6570\u53ea\u6709\u5728\uff58\uff1d\uff50\u7684\u500d\u6570\u548c\uff58\uff1d\uff51\u7684\u500d\u6570\u65f6\uff0c\u4f46\u8fd9\u90fd\u8d85\u8fc7\u4e86$\\frac{p-1}{2}$\u548c$\\frac{q-1}{2}$\n\n\u6240\u4ee5\u62fc\u5728\u4e00\u8d77\u4e0d\u4f1a\u5b58\u5728\u70b9\u5c11\u7b97\u6216\u591a\u7b97\uff08\u7b80\u5355\u8bb2\u5c31\u662f\u51fd\u6570\u503c\u4e0d\u4e3a\u6574\u6570\uff09\n\n\u6240\u4ee5\u6b64\u65f6\u6709\u6574\u70b9$$\\frac{p-1}{2}\\cdot\\frac{q-1}{2}$\u4e2a\u3002\n\n## \u4f46\u662f\uff01\uff01\uff01\uff0c\u8fd9\u5e76\u4e0d\u662f\u7edd\u5bf9\u6b63\u786e\u7684\n\n\u5f53\uff50\uff1d\uff1d\uff51\u65f6$\\frac{q}{p}$\u548c$\\frac{p}{q}$\u5747\u4e3a\uff11\uff0c\u516c\u5f0f\u77ac\u95f4\u51c9\u51c9\n\n\n\u8fd9\u65f6f(x)=g(x)=x\uff0c\u6240\u4ee5\u51fd\u6570\u503c\u5c31\u662f\uff58\u7684\u503c\uff0c\u6240\u4ee5\u5728\u53d6\u503c\u8303\u56f4\u4e4b\u5185\u51fd\u6570\u503c\u53ef\u4ee5\u4e3a\u6574\u6570\n\n\u90a3\u5c31\u4e00\u8d77\u7b97\u518d\u52a0\u4e0a\u91cd\u590d\u7684\u70b9\u4e0d\u5c31\uff2f\uff2b\u4e86\u4e48\n\n\u53d6\uff50\uff1d\uff51\uff1d\uff17\u4e3a\u4f8b\n\n\uff41\uff4e\uff53\uff1d((p-1)/2)*((p-1)/2)+(p-1)/2;\n\n((p-1)/2)*((p-1)/2)\u662f\u77e9\u5f62\u4e2d\u7684\u70b9\u6570\uff0c\u540e\u9762\u662f\u91cd\u590d\u7684\u70b9\uff08\u6709((p-1)/2)*((p-1)/2)\u4e2a\u70b9\u5c31\u6709(p-1)/2)\u4e2a\u70b9\u5728\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u62fc\u8d77\u6765\u4f1a\u91cd\u5408\uff09\n\n\u63d0\u51fa(p-1)/2\u5c31\u662f($p^2$\u22121)/4\uff0c\uff50\u4e3a\u5947\u6570\uff0c\u5e73\u65b9\u51cf\u4e00\u662f\u5076\u6570\u9664\u4ee5\uff14\u4e0e\u672c\u8eab\u9664\u4ee5\uff14\u540c\u6548\uff08\u6574\u6570\u4f1a\u81ea\u52a8\u820d\u5f03\u5c0f\u6570\u4f4d\uff09\n\n\u4ee3\u7801\uff08\u7b2c\u4e00\u7bc7\u63d0\u9ad8\uff0b\u9898\u89e3\uff0c\u559c\u6b22\u8bf7\u70b9\u8d5e\uff09\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint main()\n{\n    long long x,y;\n    cin>>x>>y;\n    if(x!=y)cout<<((x-1)/2)*((y-1)/2);\n    else\u3000cout<<x*x/4;\n    return 0;\n}\n```\n\n\uff11\uff10\u884c\uff21\uff23\u4e00\u9053\u7701\u9009\u9898\uff0c\u723d\u4e0d\n\n\u8bb2\u4e86\u5927\u5bb6\u6709\u4e9b\u4e0d\u61c2\u7684\u5730\u65b9\uff0c\u7ba1\u7406\u5927\u5927\u6c42\u901a\u8fc7\uff5e\uff5e\uff5e",
        "postTime": 1540738006,
        "uid": 111197,
        "name": "lqhsr",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    },
    {
        "content": "[Beijing wc2012]\u7b97\u4e0d\u51fa\u7684\u7b97\u5f0f\n###### [\u9898\u76ee](https://www.luogu.com.cn/problem/P4132)\n $$\\sum_{k=1}^\\frac{p-1}{2} [\\frac {kq}{p} ]+\\sum_{l=1}^\\frac{q-1}{2} [\\frac {lp}{q} ]$$\n\n### \u7b97\u6cd5\u7b80\u4ecb\uff1a\n#### \u601d\u7ef4\u9898 ___\u65e0\u7b97\u6cd5___\n### \u601d\u7ef4\u601d\u8def\uff1a\n##### \u5f00\u59cb\u5927\u6570\u636e\uff1a\n| q/p | 1 | 3 | 5 | 7 | 9 |\n| :-: | :-: | :-: | :-: | :-: | :-: |\n| 1 | 0 | 0 | 0 | 0 | 0 |\n| 3 | 0 | 2 | 2 | 3 | 4 |\n| 5 | 0 | 2 | 6 | 6 | 8 |\n| 7 | 0 | 3 | 6 | 12 | 12 |\n| 9 | 0 | 4 | 8 | 12 | 20 |\n#### \u53ef\u4ee5\u5f88\u660e\u663e\u7684\u770b\u51fa  \n\n##### p!=q\u65f6\n$$\\sum_{k=1}^\\frac{p-1}{2} [\\frac {kq}{p} ]+\\sum_{l=1}^\\frac{q-1}{2} [\\frac {lp}{q} ]=\\frac{q-1}{2}* \\frac{p-1}{2}=\\frac{(q-1)(p-1)}{4}$$ \n```cpp\n\tprintf(\"%lld\\n\",((p-1)*(q-1)/4));\t\t\n```\n\n##### p==q\u65f6\n\n$$\\sum_{k=1}^\\frac{p-1}{2} [\\frac {kq}{p} ]+\\sum_{l=1}^\\frac{q-1}{2} [\\frac {lp}{q} ]=\\frac{(q-1)(p-1)}{4}+\\frac{q(p)-1}{2}$$\n```cpp\n\tprintf(\"%lld\\n\",((p-1)*(q-1)/4)+(q-1)/2));\t\t\t\n```\n\n#### \u5408\u5e76\u5927\u6cd5\uff1a\n\n```cpp\n\tprintf(\"%lld\\n\",((p-1)*(q-1)/4)+(q==p?(q-1)/2:0));\t\n```\n### \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nlong long q,p;\nint main() {\n\tscanf(\"%lld%lld\",&p,&q);\n\tprintf(\"%lld\\n\",((p-1)*(q-1)/4)+(q==p?(q-1)/2:0));\n}\n```",
        "postTime": 1578879265,
        "uid": 170603,
        "name": "chaichunyang",
        "ccfLevel": 5,
        "title": "P4132\u9898\u89e3"
    },
    {
        "content": "\u7136\u800c\u8fd9\u9898\u5e76\u4e0d\u9700\u8981\u5206\u6790\u4ec0\u4e48\u2026\u2026\u663e\u7136\u8fd9\u5c31\u662f\u4e2a\u76f4\u7ebf\u4e0b\u6570\u6574\u70b9\u4e2a\u6570\u2026\u2026\n\n\u7c7b\u6b27\u51e0\u91cc\u5f97\u677f\u5b50\u554a\uff01\n\n\u53ef\u4ee5\u4ece\u8fd9\u91cc\u770b\u5230\u5b8c\u6574\u7684[\u7c7b\u6b27\u51e0\u91cc\u5f97\uff08\u5165\u95e8\u7248\uff09\u7b97\u6cd5](https://www.luogu.org/blog/KingSann/lei-ou-ji-li-dei-ru-men-post)\n\n``` cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n\nll f(ll a, ll b, ll c, ll n) {\n    if(n <= 0) return 0;\n    return n * (n - 1) / 2 * (a / c) + n * (b / c) + f(c, (a * n + b) % c, a % c, (a % c * n + b % c) / c);\n}\n\nint main() {\n    ll p, q; cin >> p >> q;\n    cout << f(q, 0, p, (p - 1) / 2 + 1) + f(p, 0, q, (q - 1) / 2 + 1) << endl;\n}\n```",
        "postTime": 1545215846,
        "uid": 47111,
        "name": "nekko",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    },
    {
        "content": "\u7c7b\u6b27\u51e0\u91cc\u5f97\u677f\u5b50\u9898\uff0c\u76f4\u63a5\u5957\u7528\u5f0f\u5b50\u505a\u5c31\u884c\u4e86\n\n**\u7c7b\u6b27\u51e0\u91cc\u5f97**\u5e38\u7528\u4e0e\u5904\u7406\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u5f0f\u5b50\u7684\u95ee\u9898\n\n$$F(n,a,b,c)=\\sum_{i=0}^{n}\\left \\lfloor \\frac{ai+b}{c} \\right \\rfloor$$\n\n\u5bf9\u4e8e $a\\geq c$ \u6216\u8005 $b \\geq c$ \u6709\n\n$$F(n,a,b,c)=\\frac{n(n+1)}{2} \\left \\lfloor \\frac{a}{c} \\right \\rfloor + (n + 1) \\left \\lfloor \\frac{b}{c} \\right \\rfloor + F (n, a \\bmod c, b \\bmod c, c)$$\n\n\u5bf9\u4e8e $a<c$ \u4e14 $b<c$ \u6709\n\n$$m=\\left \\lfloor \\frac{a*n+b}{c} \\right \\rfloor$$\n\n$$F(n,a,b,c)=nm-F(m-1,c,c-b-1,a)$$\n\n\u8fd9\u6837\u53ef\u4ee5\u5728 $\\log n$ \u7684\u590d\u6742\u5ea6\u5185\u6c42\u89e3\n\n\u6216\u8005\u6253\u8868\u627e\u51fa\u89c4\u5f8b\uff0c\u7b54\u6848\u662f \n\n$$\\frac{p-1}{2}\\times\\frac{q-1}{2}$$\n\n\u7279\u5224\u4e00\u4e9b\u60c5\u51b5\u4e5f\u80fd\u8fc7\n\n\u8fd9\u91cc\u8d34\u4e00\u4e2a\u7c7b\u6b27\u51e0\u91cc\u5f97\u7684\u4ee3\u7801\n\n```c++\n#include <cstdio>\n#include <cstring>\n\n#define ll long long\n#define rint register int \n\nusing namespace std;\n\nconst int maxn = 1e5 + 50;\n\nint p, q;\n\ninline ll F (rint n, rint a, rint b, rint c) {\n\tif (! a) return 1ll * (n + 1) * (b / c);\n\tif (a >= c || b >= c) {\n\t\trint val1 = a / c, val2 = b / c;\n\t\treturn 1ll * n * (n + 1) / 2 * val1 + 1ll * (n + 1) * val2 + F (n, a % c, b % c, c);\n\t} else {\n\t\trint m = (1ll * a * n + b) / c;\n\t\treturn 1ll * n * m - F (m - 1, c, c - b - 1, a);\n\t}\n}\n\nint main () {\n\tscanf (\"%d%d\", &p, &q);\n\tprintf (\"%lld\\n\", F ((p - 1) / 2, q, 0, p) + F ((q - 1) / 2, p, 0, q));\n\treturn 0;\n}\n```",
        "postTime": 1616741412,
        "uid": 335193,
        "name": "Rubyonly",
        "ccfLevel": 8,
        "title": "P4132 [BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f \u9898\u89e3"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e24\u4e2a\u5947\u8d28\u6570 $p$ \u548c $q$\uff0c\u6c42\uff1a\n\n$$\\large\\sum_{x=1}^{\\frac{p-1}{2}} \\left\\lfloor\\frac{xq}{p}\\right\\rfloor+\\sum_{x=1}^{\\frac{q-1}{2}} \\left\\lfloor\\frac{xp}{q}\\right\\rfloor$$\n\n\n## \u5982\u4f55\u89e3\u7b54\n\n\u770b\u4e0a\u53bb\u5c31\u662f\u7c7b\u6b27\uff0c\u7136\u540e\u5c31\u76f4\u63a5\u5957\u677f\u5b50\u4e86\u3002\n\n\u4f17\u6240\u5468\u77e5\uff0c\u7c7b\u6b27\u7684\u57fa\u672c\u6a21\u5f0f\u5982\u4e0b\uff1a\n\n\u7ed9\u5b9a $a,b,c,n$\uff0c\u6c42 $f(a,b,c,n)=\\sum_{x=0}\\limits^{n-1}\\left\\lfloor\\dfrac{ax+b}{c}\\right\\rfloor$\n\n\u7136\u540e\u4f60\u4f1a\u53d1\u73b0\u9898\u76ee\u7684\u5f0f\u5b50\u91cc\u6839\u672c\u6ca1\u6709 $b$\uff0c\u6240\u4ee5\u5c31\u76f4\u63a5\u8d4b\u503c\u4e3a $b=0$\u3002\n\n\u7136\u540e\u5927\u5bb6\u4e5f\u77e5\u9053\u7c7b\u6b27\u7684\u7ed3\u679c\u662f\uff1a\n\n$$f(c,(an+b)\\bmod c,a\\bmod c,\\left\\lfloor\\dfrac{a\\bmod c\\cdot n+b\\bmod c}{c}\\right\\rfloor-1)$$\n\n\u4e8e\u662f\u6838\u5fc3\u4ee3\u7801\u5c31\u7279\u522b\u77ed\uff1a\n\n```cpp\nlong long f(long long a,long long b,long long c,long long n){\n    if(n<=0)return 0;\n    return n*(n-1)/2*(a/c)+n*(b/c)+f(c,(a*n+b)%c,a%c,(a%c*n+b%c)/c);\n}\n```\n\n\u4e8e\u662f\u53ef\u4ee5\u89e3\u51b3\u3002",
        "postTime": 1601038165,
        "uid": 212283,
        "name": "Aw\u987f\u987f",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    },
    {
        "content": "## $Description$\n\u7ed9\u51fa $p,q$ \uff0c\u6c42\uff1a\n$$\\sum\\limits_{i=1}^{\\frac{p-1}{2}}\\lfloor\\dfrac{qi}{p}\\rfloor+\\sum\\limits_{i=1}^{\\frac{q-1}{2}}\\lfloor\\dfrac{pi}{q}\\rfloor$$\n## $Solotion$\n\u6211\u4eec\u77e5\u9053 $i=0$ \u65f6\uff0c $\\lfloor\\dfrac{qi}{p}\\rfloor=\\lfloor\\dfrac{pi}{q}\\rfloor=0$   \n\u6240\u4ee5\u539f\u5f0f\u53ef\u4ee5\u8f6c\u5316\u4e3a\uff1a    \n\n$$\\sum\\limits_{i=0}^{\\frac{p-1}{2}}\\lfloor\\dfrac{qi}{p}\\rfloor+\\sum\\limits_{i=0}^{\\frac{q-1}{2}}\\lfloor\\dfrac{pi}{q}\\rfloor$$    \n \u6211\u4eec\u77e5\u9053\uff0c\u7c7b\u6b27\u51e0\u91cc\u5f97\u7b97\u6cd5\u53ef\u4ee5\u5728 $\\Theta(\\log n)$ \u8ba1\u7b97\u5f62\u5982:     \n $f(a,b,c,n)=\\sum\\limits_{i=0}^n\\lfloor\\dfrac{ai+b}{c}\\rfloor$ \u7684\u5f0f\u5b50\u3002    \n \u6240\u4ee5\u6211\u4eec\u5c06\u7ed3\u679c\u5316\u4e3a:    \n $$f(q,0,p,\\dfrac{p-1}{2})+f(p,0,q,\\dfrac{q-1}{2})$$    \n \u90a3\u4e48\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u8ba1\u7b97\u5462\uff1f\u65e2\u7136\u6709\u53d6\u6574\u7b26\u53f7\u6211\u4eec\u5c31\u8ba8\u8bba\u4e0b\uff1a   \n - $a=0$  \n$f(a,b,c,n)=\\sum\\limits_{i=0}^n\\lfloor\\dfrac{b}{c}\\rfloor=(n+1)\\lfloor\\dfrac{b}{c}\\rfloor$\n- $a\\ge c \\lor b\\ge c$    \n$\\forall N\\in\\mathbb{Z},r\\in\\mathbb{R},\\lfloor r+N\\rfloor=\\lfloor r\\rfloor+N$   \n\n\u5f15\u7406$1.1: \\lfloor\\dfrac{Ax}{y}\\rfloor=\\lfloor\\dfrac{A(x\\mod y)}{y}\\rfloor+A\\lfloor\\dfrac{x}{y}\\rfloor$   \n\u8bc1\u660e\uff1a   \n\n$\\begin{aligned}\n\\lfloor\\dfrac{Ax}{y}\\rfloor\n&=\n\\lfloor\\dfrac{Ax}{y}\\rfloor-A\\lfloor\\dfrac{x}{y}\\rfloor+A\\lfloor\\dfrac{x}{y}\\rfloor\\\\\n&=\\lfloor\\dfrac{A(x)}{y}-A\\lfloor\\dfrac{x}{y}\\rfloor\\rfloor+A\\lfloor\\dfrac{x}{y}\\rfloor\\\\\n&=\\lfloor\\dfrac{A(x-\\lfloor\\dfrac{x}{y}\\rfloor\\cdot y)}{y}\\rfloor+A\\lfloor\\dfrac{x}{y}\\rfloor\\\\\n&=\\lfloor\\dfrac{A(x\\mod y)}{y}\\rfloor+A\\lfloor\\dfrac{x}{y}\\rfloor\\\\\n\\end{aligned}$   \n\u63a8\u8bba\uff1a  $\\lfloor\\dfrac{ai+b}{c}\\rfloor=\\lfloor\\dfrac{(a\\mod c)i+(b\\mod c)}{c}\\rfloor+\\lfloor\\dfrac{a}{c}\\rfloor i+\\lfloor\\dfrac{b}{c}\\rfloor$     \n\u8bc1\u660e\uff1a    \n\n$\\begin{aligned}\n\\lfloor\\dfrac{ai+b}{c}\\rfloor\n&=\\lfloor\\dfrac{ai+b}{c}\\rfloor-\\lfloor\\dfrac{a}{c}\\rfloor i-\\lfloor\\dfrac{b}{c}\\rfloor+\\lfloor\\dfrac{a}{c}\\rfloor i +\\lfloor\\dfrac{b}{c}\\rfloor\\\\\n&=\\lfloor\\dfrac{(a-\\lfloor\\dfrac{a}{c}\\rfloor\\cdot c)i+(b-\\lfloor\\dfrac{b}{c}\\rfloor\\cdot c)}{c}\\rfloor+\\lfloor\\dfrac{a}{c}\\rfloor i+\\lfloor\\dfrac{b}{c}\\rfloor\\\\\n&=\\lfloor\\dfrac{(a\\mod c)i+(b\\mod c)}{c}\\rfloor+\\lfloor\\dfrac{a}{c}\\rfloor i+\\lfloor\\dfrac{b}{c}\\rfloor\\\\\n\\end{aligned}$  \n$\\begin{aligned}\n\\therefore f(a,b,c,n)\n&=\\sum\\limits_{i=0}^n\\lfloor\\dfrac{ai+b}{c}\\rfloor\\\\\n&=\\sum\\limits_{i=0}^n(\\lfloor\\dfrac{(a\\mod c)i+(b\\mod c)}{c}\\rfloor+\\lfloor\\dfrac{a}{c}\\rfloor i+\\lfloor\\dfrac{b}{c}\\rfloor)\\\\\n&=\\sum\\limits_{i=0}^n\\lfloor\\dfrac{(a\\mod c)i+(b\\mod c)}{c}\\rfloor+\\dfrac{n(n+1)}{2}\\lfloor\\dfrac{a}{c}\\rfloor+(n+1)\\lfloor\\dfrac{b}{c}\\rfloor\\\\\n\\end{aligned}$  \n$\\therefore f(a,b,c,n)=f(a\\mod c,b\\mod c,c,n)+\\dfrac{n(n+1)}{2}\\lfloor\\dfrac{a}{c}\\rfloor+(n+1)\\lfloor\\dfrac{b}{c}\\rfloor$\n\n- $a<c \\land b<c$    \n$\\begin{aligned}\nf(a,b,c,n)\n&=\\sum\\limits_{i=0}^n\\lfloor\\dfrac{ai+b}{c}\\rfloor\\\\\n&=\\sum\\limits_{i=0}^n\\sum\\limits_{j=1}^{\\lfloor\\frac{an+b}{c}\\rfloor}[j\\le\\lfloor\\dfrac{ai+b}{c}\\rfloor ]\\\\\n&=\\sum\\limits_{i=0}^n\\sum\\limits_{j=0}^{\\lfloor\\frac{an+b}{c}\\rfloor-1}[j+1<\\dfrac{ai+b+1}{c}]\\\\\n&=\\sum\\limits_{i=0}^n\\sum\\limits_{j=0}^{\\lfloor\\frac{an+b}{c}\\rfloor-1}[jc+c<ai+b+1]\\\\\n&=\\sum\\limits_{j=0}^{\\lfloor\\frac{an+b}{c}\\rfloor-1}\\sum\\limits_{i=0}^n[ai>jc+c-b-1]\\\\\n&=\\sum\\limits_{j=0}^{\\lfloor\\frac{an+b}{c}\\rfloor-1}\\sum\\limits_{i=0}^n[i>\\lfloor\\dfrac{jc+c-b-1}{a}\\rfloor]\\\\\n&=\\sum\\limits_{j=0}^{\\lfloor\\frac{an+b}{c}\\rfloor-1}n-\\lfloor\\dfrac{jc+c-b-1}{a}\\rfloor\\\\\n&=\\lfloor\\dfrac{an+b}{c}\\rfloor n-\\sum\\limits_{j=0}^{\\lfloor\\frac{an+b}{c}\\rfloor-1}\\lfloor\\dfrac{jc+c-b-1}{a}\\rfloor\\\\\n&=\\lfloor\\dfrac{an+b}{c}\\rfloor n-f(c,c-b-1,a,\\lfloor\\dfrac{an+b}{c}\\rfloor-1)\n\\end{aligned}$    \n\n $f(a,b,c,n)=\\begin{cases}\n (n+1)\\lfloor\\dfrac{b}{c}\\rfloor&a=0\\\\\n f(a\\mod c,b\\mod c,c,n)+\\dfrac{n(n+1)}{2}\\lfloor\\dfrac{a}{c}\\rfloor+(n+1)\\lfloor\\dfrac{b}{c}\\rfloor&a\\ge c\\lor b\\ge c\\\\\n \\lfloor\\dfrac{an+b}{c}\\rfloor n-f(c,c-b-1,a,\\lfloor\\dfrac{an+b}{c}\\rfloor-1)& otherwise\n \\end{cases}$\n## $Code$\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nll f(ll a,ll b,ll c,ll n)\n{\n\t\tif(a==0)return (n+1)*(b/c);\n\t\tif(a>=c||b>=c)return n*(n+1)/2*(a/c)+(n+1)*(b/c)+f(a%c,b%c,c,n);\n\t\treturn (a*n+b)/c*n-f(c,c-b-1,a,(a*n+b)/c-1);\n}\nint main()\n{\n\t\tll p,q;\n\t\tscanf(\"%lld%lld\",&p,&q);\n\t\tll ans=f(q,0,p,(p-1)/2)+f(p,0,q,(q-1)/2);\n\t\tprintf(\"%lld\\n\",ans);\n\t\treturn 0;\n}\n```\n",
        "postTime": 1597205508,
        "uid": 115855,
        "name": "Yyxxxxx",
        "ccfLevel": 4,
        "title": "P4132 [BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f \u9898\u89e3"
    },
    {
        "content": "\u770b\u5230\u9898\u89e3\u91cc\u4e00\u4e9b\u5927\u4f6c\u5199\u4e86\u6570\u5b66\u8bc1\u660e\uff0c\u90a3\u6211\u5c31\u6765\u8bb2\u8bb2\u6211\u662f\u5982\u4f55\u901a\u8fc7\u66b4\u529b\u7b97\u6cd5\u6253\u8868\u51fa\u6765\u627e\u51fa\u89c4\u5f8b\u5e76\u63a8\u5bfc\u51fa\u6b63\u786e\u516c\u5f0f\u7684\u3002\n\n\u66b4\u529b\u4ee3\u7801\n```\n#include<bits/stdc++.h>\nusing namespace std;\nlong long p,q,ans;\nint main()\n{\n\tcin>>p>>q;\n\tfor(long long i=1; i<=(p-1)/2; i++)\n\t\tans+=(i*q)/p;\n\tfor(long long i=1; i<=(q-1)/2; i++)\n\t\tans+=(i*p)/q;\n\tcout<<ans;\n\treturn 0;\n}\n```\n\n\u9996\u5148\u5148\u679a\u4e3ep\u6216q\u7b49\u4e8e3\u7684\u60c5\u51b5\n```\np  q   ans\n3  3   2\n3  5   2\n3  7   3\n3  11   5\n3  13   6\n3  17   8\n3  19   9\n\n```\n\u6211\u4eec\u53d1\u73b0\u4f3c\u4e4e\u5f53p!=q\u65f6\uff08\u8fd9\u79cd\u60c5\u51b5\u540e\u9762\u518d\u8003\u8651\uff09\uff0cans\u90fd\u7b49\u4e8e(q-1)/2*1\n\np\u6216q\u4e3a5\u7684\u60c5\u51b5\n```\np  q   ans\n5  3   2\n5  5   6\n5  7   6\n5  11   10\n5  13   12\n5  17   16\n5  19   18\n```\n\u540c\u6837\u4e5f\u662fp\uff01=q\u65f6\uff0cans\u7b49\u4e8e(q-1)/2*2\uff0c\u4f3c\u4e4e\u6709\u90a3\u4e48\u4e00\u70b9\u89c4\u5f8b\uff1f\n\n\u7ee7\u7eed\u6765\uff0cp\u6216q\u4e3a7\u7684\u60c5\u51b5\n```\np  q   ans\n7  3   3\n7  5   6\n7  7   12\n7  11   15\n7  13   18\n7  17   24\n7  19   27\n```\np\uff01=q\u65f6\uff0cans=(q-1)/2*3\n\n~~\u51ed\u501f\u611f\u89c9~~\uff0c\u5df2\u7ecf\u53ef\u4ee5\u53d1\u73b0\u89c4\u5f8b\uff0c\u5f53p\uff01=q\u65f6,ans=(q-1)/2*(p-1)*2\n\n\u518d\u6765\u9a8c\u8bc1\u4e00\u4e0b\n```\np  q   ans\n11  3   5\n11  5   10\n11  7   15\n11  11   30   \n11  13   30\n11  17   40\n11  19   45\n```\n\u90a3\u4e48\u5f53p=q\u65f6\uff0c\u53c8\u6709\u4ec0\u4e48\u89c4\u5f8b\u5462\uff1f\u7ee7\u7eed\u6253\u8868\n```\np  q   ans\n3  3   2\n5  5   6\n7  7   12\n11  11  30\n13  13  42\n17  17  72\n19  19  90\n```\n\u90a3\u4e48\u89c4\u5f8b\u5c31\u5f88\u660e\u663e\u4e86\uff0cans=(p*q-1)/4\uff08\u5411\u4e0b\u53d6\u6574\uff09\n\n\u63a5\u4e0b\u6765\u662fAC\u4ee3\u7801\n```\n#include<bits/stdc++.h>\nusing namespace std;\nlong long ans,p,q,n,m;\nint main()\n{\n\tcin>>p>>q;\n\tif(p!=q)\n\t\tcout<<((p-1)/2)*((q-1)/2);\n\telse\n\t\tcout<<(p*q-1)/4;\n\treturn 0;\n}\n```\n\u867d\u7136\u8fd9\u79cd\u65b9\u6cd5\u6ca1\u6709\u4ec0\u4e48\u8bc1\u660e\uff0c\u4f46\u662f\u5728\u8003\u573a\u4e0a\u8fd9\u4e5f\u662f\u4e00\u79cd\u65e2\u7701\u65f6\u95f4\u6709\u7701\u601d\u8003\u7684\u597d\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5f88\u5feb\u901f\u7684\u627e\u5230\u89c4\u5f8b",
        "postTime": 1565054728,
        "uid": 78001,
        "name": "dz_ice",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    },
    {
        "content": "\u8fd9\u5e94\u8be5\u662f\u4e00\u9053\u601d\u8def\u6700\u76f4\u63a5\uff0c\u4ee3\u7801\u6700\u77ed\u7684\u9898\u89e3\u4e86\u3002\n\n\u6211\u4eec\u5148\u770b\u4e0b\u6837\u4f8b\uff1a5 7\n\n\u7ed3\u679c\u662f 3+3=6\n\n\u53ef\u4ee5\u770b\u52303\u662f5\u7684\u4e00\u534a\u5411\u4e0b\u53d6\u6574\uff0c3\u662f7\u7684\u4e00\u534a\u5411\u4e0b\u53d6\u6574\u3002\n\n\u518d\u81ea\u5df1\u5217\u4e3e7 11\n\n\u7ed3\u679c\u662f 3+5=8\n\n\u53ef\u4ee5\u770b\u52303\u662f7\u7684\u4e00\u534a\u5411\u4e0b\u53d6\u6574\uff0c5\u662f11\u7684\u4e00\u534a\u5411\u4e0b\u53d6\u6574\u3002\u90a3\u662f\u4e0d\u662f\u6240\u6709\u7684\u90fd\u662fq\u3001p\u7684\u4e00\u534a\u5462\uff1f\n\n\u518d\u770b\uff1a7 7\n\n\u81ea\u5df1\u7684\u7ed3\u679c\uff1a3+3=6\uff1b\u6b63\u786e\uff1a12\u3002\n\n\u53ef\u4ee5\u53d1\u73b0p\u3001q\u4e00\u6837\u5c31\u4e0d\u884c\u4e86\uff0c\u90a3\u5c31\u7279\u6b8a\u5904\u7406\n\n\u4ed4\u7ec6\u89c2\u5bdf\u540e\u53d1\u73b0\uff087*7-1\uff09/4=12\n\n\u53d1\u73b0\u89c4\u5f8b\u4e86\uff01\n\n\u4e0a\u4ee3\u7801\uff1a\n```\n#include <bits/stdc++.h>//\u4e07\u80fd\u5934\nusing namespace std;\nlong long p,q;//\u8981\u5f00long long\nint main(){\n\tcin>>p>>q;//\u8f93\u5165\n\tif(p==q)cout<<(p*q-1)/4;//\u4e00\u6837\u7684\u8bdd\u5c31\u7279\u6b8a\u5904\u7406\n\telse cout<<(p/2)*(q/2);//\u4e0d\u4e00\u6837\u5c31\u6309\u89c4\u5f8b\u8f93\u51fa\n\treturn 0;\n}\n```\n\u539f\u8c05\u6211\u8fd9\u4e2a\u849f\u84bb\uff0c\u53ea\u4f1a\u627e\u89c4\u5f8b\uff0c\u4e0d\u4f1a\u8bc1\u660e\n",
        "postTime": 1565050854,
        "uid": 168385,
        "name": "gwx123456",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    },
    {
        "content": "~~\u9898\u610f\u663e\u800c\u6613\u89c1\uff0c\u4e0d\u7528\u63cf\u8ff0~~\n\n## \u601d\u8def\n\n>\u601d\u8def\u9898+\u6570\u5b66\u51fd\u6570\n\n### 30pts\n\n\u6309\u9898\u610f\u66b4\u529b\u679a\u4e3e\uff0c\u7b80\u5355\u7c97\u66b4\n\n### 100pts\n\n\u4ee3\u7801\u6781\u77ed\uff0c\u4f46\u662f\u60f3\u597d\u4e45\u4e5f\u60f3\u4e0d\u51fa\u6765= =\uff0c\u679c\u7136\u662f\u601d\u8def\u9898\n\n\u5f53$p\\neq q$\u65f6\uff1a\n\n\u6784\u9020\u51fd\u6570$f(x)=\\lfloor\\frac{xq}{p}\\rfloor$\n\n\u601d\u8003\u51fd\u6570$g(x)=\\lfloor x\\rfloor$\u7684\u51e0\u4f55\u610f\u4e49\uff1a\u5728\u5750\u6807\u7cfb\u4e2d\u6a2a\u5750\u6807\u4e3a$x$\uff0c\u7eb5\u5750\u6807\u5c0f\u4e8e\u7b49\u4e8e$x$\u7684\u6574\u6570\u4e2a\u6570\n\n\u90a3\u4e48$f(x)$\u5c31\u8868\u793a\uff1a\u5728\u5750\u6807\u4e2d\u6a2a\u5750\u6807\u4e3a$x$\uff0c\u7eb5\u5750\u6807\u5c0f\u4e8e\u7b49\u4e8e$\\frac{xq}{p}$\u7684\u6570\u7684\u4e2a\u6570\n\n\u90a3\u4e48$\\sum\\limits_{k=1}^{\\frac{p-1}{2}}f(k)$\u5c31\u8868\u793a\u6240\u6709$\\in[1,\\frac{p-1}{2}]$\u7684\u6574\u6570\u6240\u5f62\u6210\u7684\u7684\u51fd\u6570\u56fe\u50cf\u4e2d\u6240\u6709\u7684\u6574\u6570\u70b9\uff0c\u5982\u4e0b\u56fe\n\n![](https://img2020.cnblogs.com/blog/1648498/202007/1648498-20200707141638610-1080591941.png)\n\n\u7b54\u6848\u5373\u4e3a\u53f3\u4e0b\u89d2\u4e09\u89d2\u5185\u7684\u6574\u6570\u70b9\u4e2a\u6570\n\n\u540c\u7406\u4ee4$t(k)=\\lfloor\\frac{kp}{q} \\rfloor$\uff0c\u5219$\\sum\\limits_{k=1}^{\\frac{q-1}{2}}t(k)$\u5c31\u8868\u793a\u6240\u6709$\\in[1,\\frac{q-1}{2}]$\u7684\u6574\u6570\u6240\u5f62\u6210\u7684\u7684\u51fd\u6570\u56fe\u50cf\u4e2d\u6240\u6709\u7684\u6574\u6570\u70b9\n\n\u5bb9\u6613\u53d1\u73b0\u8fd9\u4e24\u90e8\u5206\u4e00\u8d77\u7ec4\u6210\u4e86\u4e00\u4e2a\u77e9\u5f62\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651\u77e9\u5f62$A(0,0),B(\\frac{p-1}{2},0),C(\\frac{p-1}{2},\\frac{q-1}{2}),D(0,\\frac{q-1}{2})$\n\n\u6240\u4ee5\u6700\u540e\u7b54\u6848\u5c31\u662f$\\frac{(p-1)}{2}\\times\\frac{(q-1)}{2}$\n\n\u5f53$p=q$\u65f6\uff1a\n\n$$\\sum\\limits_{k=1}^\\frac{p-1}{2} \\lfloor\\frac {kq}{p} \\rfloor+\\sum\\limits_{k=1}^\\frac{q-1}{2}  \\lfloor\\frac {kp}{q}\\rfloor=2\\times\\sum\\limits_{k=1}^{\\frac{p -1}{2}}k=2\\times\\frac{(\\frac{p-1}{2}+1)\\times \\frac{p-1}{2}}{2}=\\frac{(p-1)(p+1)}{4}$$\n\n## \u4ee3\u7801\n\n### 30pts\n\n```cpp\n/*\nAuthor:Loceaner\n*/\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define int long long\nusing namespace std;\n\nconst int A = 5e5 + 11;\nconst int B = 1e6 + 11;\nconst int mod = 1e9 + 7;\nconst int inf = 0x3f3f3f3f;\n\ninline int read() {\n  char c = getchar(); int x = 0, f = 1;\n  for ( ; !isdigit(c); c = getchar()) if (c == '-') f = -1;\n  for ( ; isdigit(c); c = getchar()) x = x * 10 + (c ^ 48);\n  return x * f;\n}\n\nint p, q, ans;\n\nsigned main() {\n  p = read(), q = read();\n  int up1 = (p - 1) / 2, up2 = (q - 1) / 2;\n  for (int k = 1; k <= up1; k++) \n    ans += (int)k * q / p;\n  for (int k = 1; k <= up2; k++) \n    ans += (int)k * p / q;\n  cout << ans << '\\n';\n  return 0;\n}\n```\n\n### 100pts\n\n```cpp\n/*\nAuthor:Loceaner\n*/\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define int long long\nusing namespace std;\n\nconst int A = 1e6 + 11;\nconst int B = 1e6 + 11;\nconst int mod = 1e9 + 7;\nconst int inf = 0x3f3f3f3f;\n\ninline int read() {\n\tchar c = getchar();\n\tint x = 0, f = 1;\n\tfor ( ; !isdigit(c); c = getchar()) if (c == '-') f = -1;\n\tfor ( ; isdigit(c); c = getchar()) x = x * 10 + (c ^ 48);\n\treturn x * f;\n}\n\nint p, q, ans;\n\nsigned main() {\n\tp = read(), q = read();\n\tif (p == q) return cout << (p - 1) * (p + 1) / 4 << '\\n', 0;\n\tcout << (p - 1) * (q - 1) / 4 << '\\n';\n\treturn 0;\n}\n```",
        "postTime": 1594104882,
        "uid": 198323,
        "name": "loceaner",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4132 \u3010[BJOI2012]\u7b97\u4e0d\u51fa\u7684\u7b49\u5f0f\u3011"
    }
]
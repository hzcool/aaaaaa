[
    {
        "content": "### \u89e3\u6cd5\n\u9996\u5148\u5c06n\u51cf\u53bb\u6240\u6709\u7684$C_i$\uff0c\u4e8e\u662f\u662f\u539f\u95ee\u9898\u8f6c\u6362\u4e3a\uff1an\u4e2a\u76f8\u540c\u7684\u7403\u653e\u5165m\u4e2a\u4e0d\u540c\u76d2\u5b50\u91cc\uff0c\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u6c42\u65b9\u6848\u6570.\n\n\u53ef\u4ee5\u76f4\u63a5\u8fd0\u7528**\u9694\u677f\u6cd5**\uff0c\u7b54\u6848\u4e3a $C(n-1, m-1)$ $mod$ $p$ ;\n\n\uff08\u4ee5\u4e0b\u5c31\u7528$p$\u4ee3\u8868\u6a21\u8d28\u65701000000007\n\n\u4e0b\u9762\u4ecb\u7ecd**\u4e24\u79cd**\u6c42 $C(n-1, m-1)$ $mod$ $p$ \u7684**\u65b9\u6cd5**.\n\n#### \u65b9\u6cd51 : \u76f4\u63a5\u6c42\n\n\u7ec4\u5408\u6570\u7684\u516c\u5f0f\uff1a$C(n, k) = n!$ $/$ $(k!(n-k)!)$\n\n\u8bbe\u5206\u5b50\u4e3a $a$\uff0c\u5206\u6bcd\u4e3a $b$\uff0c\u5219$C(n, k) = a$ $/$ $b$\n\n\u53ef\u4ee5\u9884\u5904\u7406\u51fa1~MAXN\u7684\u9636\u4e58 mod p\uff0c$a$\u548c$b$\u53ef\u4ee5O(1)\u5f97\u5230\n\n\u9664\u6cd5\u53d6\u6a21\u4e0d\u80fd\u76f4\u63a5\u9664\u5e76\u53d6\u6a21\uff0c\u7b54\u6848\u5e94\u8be5\u4e3a$a * b'$ $mod$ $p$\uff0c$b'$\u4e3a$b$\u5728\u6a21$p$\u610f\u4e49\u4e0b\u7684\u9006\u5143.\n\n\u8003\u8651\u5230$p$\u662f\u4e2a\u8d28\u6570\uff0c\u6c42\u9006\u5143\u4e0d\u9700\u8981Extended_gcd\u548c\u6b27\u62c9\u5b9a\u7406\uff0c\u53ea\u9700\u8981\u8d39\u9a6c\u5c0f\u5b9a\u7406.\n\n\u8fd0\u884c\u65f6\u95f4\uff1a80ms.\n\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\n\n#define MOD 1000000007\n#define MAXN 1000000\ntypedef long long LL;\n\nint Read() { //\u5feb\u8bfb \n\tchar c; int ans(0); \n\twhile(!isdigit(c = getchar()));\n\tdo ans = ans * 10 + c - 48;\n\twhile(isdigit(c = getchar()));\n\treturn ans;\n}\n\nint n, m, ans;\nint fc[MAXN + 10];\n\nLL Qpow(LL a, LL b) { //\u5feb\u901f\u5e42 \n\tLL ans = 1;\n\tfor(; b; b>>=1, a=a*a%MOD)\n\t\tif(b & 1) ans = ans*a % MOD;\n\treturn ans;\n}\n\nint C(int n, int k) { //\u6c42\u7ec4\u5408\u6570 \n\tLL fm = (1LL * fc[n-k] * fc[k]) % MOD;\n\treturn 1LL * fc[n] * Qpow(fm, MOD-2) % MOD;\n}\n\nint main() {\n\tfc[0] = 1;\n\tfor(int i=1; i<=MAXN; i++) //\u9884\u5904\u7406\u9636\u4e58\n\t\tfc[i] = (1LL * fc[i-1] * i) % MOD;\n\tn = Read(), m = Read();\n\tfor(int i=1; i<=m; i++) n -= Read();\n\tprintf(\"%d\\n\", C(n-1, m-1));\n\treturn 0;\n}\n```\n\n#### \u65b9\u6cd52 : Lucas\u5b9a\u7406\n\nLucas\u5b9a\u7406\u53ef\u4ee5\u76f4\u63a5\u6c42 $C(n, m)$ $mod$ $p$\n\n\u8dd1\u5f97\u975e\u5e38\u5feb\uff0c4ms\uff08\u624b\u5199getchar\u53ef\u4ee50ms\uff09\uff0c\u5efa\u8bae\u638c\u63e1\u8fd9\u79cd\u65b9\u6cd5.\n\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\n\n#define MOD 1000000007\ntypedef long long LL;\n\nint Read() { //\u5feb\u8bfb\n\tchar c; int ans(0);\n\twhile(!isdigit(c = getchar()));\n\tdo ans = ans * 10 + c - 48;\n\twhile(isdigit(c = getchar()));\n\treturn ans;\n}\n\nint n, m;\n\nLL Qpow(LL a, LL b, LL p) { //\u5feb\u901f\u5e42 \n\tLL ans = 1;\n\tfor(; b; b>>=1, (a*=a) %= p)\n\t\tif(b & 1) (ans *= a) %= p;\n\treturn ans;\n}\n\nLL c(LL n, LL m, LL p) {\n\tif(n < m) return 0;\n\tif(m > n - m) m = n - m;\n\tLL s1 = 1, s2 = 1;\n\tfor(int i=0; i<m; i++) {\n\t\ts1 = s1 * (n - i) % p;\n\t\ts2 = s2 * (i + 1) % p;\n\t}\n\treturn s1 * Qpow(s2, p-2, p) % p;\n}\n\nLL Lucas(LL n, LL m, LL p) { //Lucas\n\tif(m == 0) return 1;\n\treturn c(n % p, m % p, p) * Lucas(n / p, m / p, p) % p;\n}\n\nint main() {\n\tn = Read(), m = Read();\n\tfor(int i=1; i<=m; i++) n -= Read();\n\tprintf(\"%d\\n\", Lucas(n-1, m-1, MOD));\n\treturn 0;\n}\n```",
        "postTime": 1528288708,
        "uid": 20375,
        "name": "hongzy",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1680 \u3010\u5947\u602a\u7684\u5206\u7ec4\u3011"
    },
    {
        "content": "\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u7406\u89e3\u65b9\u6cd5\uff1a  \n\u9898\u76ee\u8981\u6c42\u6211\u4eec\u6bcf\u4e2a\u5206\u7ec4\u5927\u4e8e$c_i$\u4eba,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5fc5\u987b\u6bcf\u4e2a\u5148\u586b$c_i$\u4e2a\u4eba\uff0c\u7136\u540e\u6211\u4eec\u5c31\u8fd8\u5269\u4e0b\u4e86$n-\\sum\\limits_{i=1}^mc_i$\u4e2a\u4eba\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u95ee\u9898\u5c31\u8f6c\u6362\u6210\u4e86\u4f60\u624b\u91cc\u6709$n-\\sum\\limits_{i=1}^mc_i$\u4e2a\u7403\uff0c\u653e\u8fdb$m$\u4e2a\u76d2\u5b50\u91cc\uff0c\u53ef\u4ee5\u4e3a\u7a7a\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u6c42\u51fa$k=n-\\sum\\limits_{i=1}^mc_i$\u6c42\u51fa\uff0c\u7136\u540e\u5c31\u6210\u4e86\u4e00\u4e2a\u88c5\u7403\u7684\u95ee\u9898\u4e86\uff0c\u90a3\u4e48\u6839\u636e\u7ec4\u5408\u6570\u5b66\uff0c\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u7b54\u6848\u4e3a\uff1a$C^{k-1}_{m-1}$,\u7136\u540e\u5c31\u53ef\u4ee5\u66b4\u529b\u7b97\u4e86\uff0c\u5177\u4f53\u7b97\u6cd5\u770b\u7a0b\u5e8f:  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxn=1000005;\nconst int Mod=1e9+7;\nint n,m;\nll fac[maxn];\ninline ll qpower(int x,int p)//\u666e\u901a\u7684\u5feb\u901f\u5e42\n{\n    ll ans=1;\n    while(p)\n    {\n        if(p&1)ans=1ll*ans*x%Mod;\n        x=1ll*x*x%Mod;\n        p>>=1;\n    }\n    return ans;\n}\ninline void work(int n)//\u9884\u5904\u7406\u9636\u4e58\uff0c\u56e0\u4e3a\u7ec4\u5408\u6570\u5c55\u5f00\u4e4b\u540e\u9700\u8981\u5230\u9636\u4e58\n{\n    fac[0]=1;\n    for(int i=1;i<=n;i++)\n    {\n        fac[i]=1ll*fac[i-1]*i%Mod;\n    }\n}\ninline ll C(int n,int m)//\u6839\u636e\u7ec4\u5408\u6570\u516c\u5f0f\u6c42\u7ec4\u5408\u6570\n{\n    return 1ll*fac[n]*qpower(1ll*fac[m]*fac[n-m]%Mod,Mod-2)%Mod;//\u8fd9\u91cc\u7528\u4e86\u8d39\u9a6c\u5c0f\u5b9a\u7406\u6c42\u9006\u5143\n}\nint main()\n{\n    scanf(\"%d %d\",&n,&m);\n    work(maxn);\n    for(register int i=1;i<=m;i++)\n    {\n        int a;scanf(\"%d\",&a);\n        n-=a;//\u5148\u51cf\u6389\u90a3\u4e9b\u5fc5\u987b\u586b\u7684\n    }\n    printf(\"%lld\\n\",C(n-1,m-1));//\u76f4\u63a5\u7206\u7b97\u7ec4\u5408\u6570\n}\n```",
        "postTime": 1590021574,
        "uid": 294736,
        "name": "bovine__kebi",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1680 \u3010\u5947\u602a\u7684\u5206\u7ec4\u3011"
    },
    {
        "content": "\u597d\u4e45\u6ca1\u4e0a\u6d1b\u8c37\u4e86\uff0c\u4e8e\u662f\u6765\u4e22\u4e2a\u9898\u89e3\n\n\u5f88\u5bb9\u6613\u60f3\u5230\uff0c\u65e2\u7136\u6bcf\u4e2a\u7ec4\u81f3\u5c11\u8981c[i]+1\u4e2a\u4eba\uff0c\u90a3\u4e48\u6211\u4eec\u628a\u603b\u4eba\u6570\u51cf\u53bbc[i]+1\uff0c\u6700\u540e\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u628an\u4e2a\u4eba\u5206\u6210m\u7ec4\uff0c\u53ef\u4ee5\u4e3a\u7a7a\n\n\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u628a\u5206\u7ec4\u770b\u6210\u5728\u4e00\u58060\u91cc\u9762\u63d21\u7684\u79cd\u6570\n\n\u4e8e\u662f\uff0c0\u548c1\u52a0\u8d77\u6765\u4e00\u5171n+m-1\u4e2a\n\n1\u6709m-1\u4e2a\n\n\u6240\u4ee5\u4e3ac(n+m-1)(m-1)\u79cd\u65b9\u6848\n\n\u4f46\u662f\u9664\u6cd5\u53d6\u6a21\u4f1a\u51fa\u95ee\u9898\uff0c\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u8981\u7528\u9006\u5143\u7684\u77e5\u8bc6\u628a\u9664\u6cd5\u53d8\u6210\u4e58\u6cd5\uff0c\u4f46\u6570\u636e\u592a\u5927\uff0c\u6240\u4ee5\u8981\u8f6c\u6362\u6210\u5e42\u7684\u5f62\u5f0f\uff0c\u8fd9\u91cc\u8981\u7528\u5230\u8d39\u9a6c\u5c0f\u5b9a\u7406\n\n\u63a8\u5bfc\u5982\u4e0b\n\na/b mod p=a\\*b\u7684\u9006\u5143 mod p\n\n\u8ddf\u636e\u8d39\u9a6c\u5c0f\u5b9a\u7406\u6709b^(p-1)mod p=1\n\n\u6240\u4ee5b\\*b^(p-2)mod p=1\n\n\u8ddf\u636e\u9006\u5143\u7684\u5b9a\u4e49\uff0cb^(p-2)\u4e3ab\u7684\u9006\u5143\n\n\u4e8e\u662f\u539f\u5f0f\u53d8\u6210a\\*b^(p-2) mod p\n\n\u63a5\u7740\u5c31\u5feb\u901f\u5e42\u5c31\u53ef\u4ee5\u4e86\n\n\n```pascal\nconst mo=1000000007;\nvar p,n,m,i,k:longint;\n    a,b,t:int64;\n\nbegin\nreadln(n,m);\nfor i:=1 to m do\nbegin\nreadln(k);\ndec(n,k);\nend;\ndec(n,m);//\u6b64\u65f6\u95ee\u9898\u53d8\u4e3a\u628an\u4e2a\u4eba\u5206\u6210m\u7ec4\uff0c\u53ef\u4ee5\u4e3a\u7a7a\na:=1;b:=1;\nfor i:=1 to n+m-1 do a:=a*i mod mo;\nfor i:=1 to m-1 do b:=b*i mod mo;\nfor i:=1 to n do b:=b*i mod mo;\np:=mo-2;t:=1;//\u5feb\u901f\u5e42\u6c42b^(p-2)\nwhile p>0 do\nbegin\n    if p mod 2=1 then t:=t*b mod mo;\n    b:=b*b mod mo;\n    p:=p shr 1;\nend;\na:=a*t mod mo;\nwriteln(a);\nend.\n```",
        "postTime": 1501076226,
        "uid": 10632,
        "name": "Sunshine\u96e2",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1680 \u3010\u5947\u602a\u7684\u5206\u7ec4\u3011"
    },
    {
        "content": "\u5c0f\u5965\u9898\u3002\n\n[\u9898\u9762](https://www.luogu.com.cn/problem/P1680)\n\n\u6211\u4eec\u53ea\u9700\u5c06\u5fc5\u987b\u5206\u5728\u4e00\u7ec4\u7684\u4eba\u4e8b\u5148\u53bb\u6389\u5373\u53ef\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\u7b54\u6848\u5c31\u662f $C_{n-\\sum^{i=1}_{i \\le n}{a_i} - 1}^{m - 1}$ \u5373\u53ef\u3002\n\n\u81f3\u4e8e\u8fd9\u4e2a\u7b97\u662f\u4ec0\u4e48\u6765\u7684\u53ef\u4ee5\u5148\u5b66\u5b66\u63d2\u677f\u6cd5\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u6c42\u8fd9\u4e2a\u5341\u5206\u4e11\u662f\u5f0f\u5b50\u3002\n\n\u53ef\u4ee5\u7528 lucas \u6216\u8005\u76f4\u63a5\u7528\u9006\u5143\u6c42\u3002\n\n\u4e0b\u9762\u662f lucas \u7684\u4ee3\u7801\uff1a\n\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint n,m;\nconst int maxn = 1e6 + 10;\nconst int mod = 1e9 + 7;\nint fac[maxn];\nint qpow(int a,int n,int m)\n{\n\tint ans = 1;\n\ta %= m;\n\twhile(n)\n\t{\n\t\tif(n & 1)\n\t\t{\n\t\t\tans = (ans * a) % m;\n\t\t}\n\t\ta = (a * a) % m;\n\t\tn >>= 1;\n\t}\n\treturn ans;\n}\nint in(int a,int m)\n{\n\treturn qpow(fac[a],m - 2,m);\n}\nint c(int n,int r,int m)\n{\n\tif(r > n)\n\t{\n\t\treturn 0;\n\t}\n\treturn ((fac[n] * in(r,m)) % m * in(n - r,m) % m);\n}\nint Lucas(int n,int r,int m)\n{\n\tif(r == 0)\n\t{\n\t\treturn 1;\n\t}\n\treturn c(n % m,r % m,m) * Lucas(n / m,r / m,m) % m;\n}\nsigned main()\n{\n\tcin >> n >> m;\n\tfor(int i = 1;i <= m;i++)\n\t{\n\t\tint x;\n\t\tcin >> x;\n\t\tn -= x;\n\t}\n\tfac[0] = 1;\n\tfor(int i = 1;i <= maxn;i++)\n\t{\n\t\tfac[i] = fac[i - 1] * i % mod;//\u9884\u5904\u7406\u9636\u4e58\n\t}\n\tcout << Lucas(n - 1,m - 1,mod);\n\treturn 0;\n}\n```\n\n\u6ca1\u4e86\u5c31\u8fd9\u4e48\u7b80\u5355\u3002",
        "postTime": 1678442179,
        "uid": 507374,
        "name": "feather_life",
        "ccfLevel": 0,
        "title": "P1680"
    },
    {
        "content": "\u663e\u7136\u7684\u4e00\u4e2a\u6570\u5b66\u9898\uff0c\u5728\u5c0f\u5b66\u7ec3\u4e60\u518c\u540e\u51e0\u9898\uff0c\u4e0d\u77e5\u9053\u662f\u600e\u4e48\u8bc4\u7eff\u7684\uff0c\u6240\u4ee5\u6211\u5199\u7bc7\u9898\u89e3\u6c34\u70b9\u5495\u503c\u3002\n\n\u9996\u5148\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u60c5\u51b5\uff0c\u5373\u6bcf\u4e2a\u4eba\u5206\u5230\u7684\u8981\u5927\u4e8e\u7b49\u4e8e $1$ \u4e2a\uff0c\u600e\u4e48\u505a\uff1f\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u9694\u677f\u6cd5\u6a21\u578b\uff0c\u5728 $N-1$ \u4e2a\u7a7a\u9699\u4e2d\u63d2\u5165 $M-1$ \u4e2a\u9694\u677f\uff0c\u5c06 $N$ \u4e2a\u4eba\u5206\u4e3a $M$ \u7ec4\u5373\u53ef\u3002\n\n\u73b0\u5728\u8003\u8651\u9644\u52a0\u60c5\u51b5\uff0c\u8981\u6c42\u7b2c $i$ \u7ec4\u6bd4 $C_i$ \u4eba\u591a\uff0c\u6c42\u65b9\u6848\u6570\u3002\u4e5f\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5148\u7ed9\u6bcf\u7ec4\u653e $C_i$ \u4e2a\u4eba\u5373\u53ef\uff08\u56e0\u4e3a\u6bcf\u4e2a\u4eba\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u53ea\u7528\u4e00\u79cd\u60c5\u51b5\uff09\uff0c\u603b\u5171\u653e\u4e86 $\\sum_i C_i$ \uff0c\u636e\u4e58\u6cd5\u539f\u7406\u53ef\u5f97\u5269\u4e0b\u7684\u7528\u9694\u677f\u6cd5\u5206\u4e3a $M$ \u7ec4\u7684\u65b9\u6848\u5c31\u662f\u603b\u65b9\u6848\u3002\n\nSo\uff0c\u7b54\u6848\u5c31\u662f $C^{m-1}_{n-1-\\sum_iC_i}$ \u3002\n\n\u90a3\u4e48\u63a5\u4e0b\u6765\u6446\u5728\u6211\u4eec\u9762\u524d\u7684\u5c31\u662f\u5982\u4f55\u6c42\u8fd9\u4e2a\u6570\u4e86\uff0c\u7531\u4e8e\u6570\u5f88\u5927\uff0c\u4e0d\u80fd\u76f4\u63a5\u7528\u9636\u4e58\u53bb\u9664\uff0c\u6211\u4eec\u8981\u7528\u5230**\u4e58\u6cd5\u9006\u5143**\u3002\n\n\u6839\u636e\u8d39\u9a6c\u5c0f\u5b9a\u7406\uff0c\u5f53 $p$ \u4e3a\u7d20\u6570\u65f6\uff0c $a^{p-1}=1(\\bmod\\ p)$ \uff0c\u6240\u4ee5 $a^{p-2}a=1(\\bmod\\ p)$ \uff0c\u6240\u4ee5 $a^{p-2}$ \u662f $a$ \u5728 $\\bmod\\ p$ \u610f\u4e49\u4e0b\u7684\u9006\u5143\u3002\n\n\u6ce8\u610f\u5230 $10^9+7$ \u662f\u4e2a\u7d20\u6570\uff0c\u4e8e\u662f\u53ea\u9700\u8981\u5957\u7528\u516c\u5f0f\uff0c\u6c42 $\\frac{a}{b}\\bmod\\ p=a\\times b^{p-2}\\bmod p $ \u5373\u53ef\u3002\n\nAC Code\uff1a\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\n\nconst ll mod=1e9+7;\n\nll qkp(ll a,ll k){\n\tll ans=1;\n\twhile (k){\n\t\tif (k&1)ans*=a,ans%=mod;\n\t\ta*=a,a%=mod;\n\t\tk>>=1;\n\t}\n\treturn ans;\n}\n\nll C(ll n,ll m){\n\tll a=1,b=1;\n\tfor (ll i=1;i<=m;i++){\n\t\ta*=n-i+1;a%=mod;\n\t\tb*=i;b%=mod;\n\t}\n\treturn a*qkp(b,mod-2)%mod;\n}\n\nint main(){\n\tll n,m;\n\tcin >> n >> m;\n\tfor (ll i=1;i<=m;i++){\n\t\tll x;\n\t\tcin >> x;\n\t\tn-=x;\n\t}\n\tcout << C(n-1,m-1);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1648112785,
        "uid": 380042,
        "name": "piggy123",
        "ccfLevel": 7,
        "title": "P1680\u9898\u89e3"
    },
    {
        "content": "## Tag\n\n\u7ec4\u5408\u6570\u5b66\uff0c\u7403\u76d2\u95ee\u9898\u3002\n\n## preface\n\n\u672c\u9898\u7b97\u662f\u6bd4\u8f83\u7ecf\u5178\u7684\u7403\u76d2\u95ee\u9898\u5165\u95e8\u9898\u4e86\uff0c\u672c\u6587\u4e3b\u8981\u8bb2\u89e3\u672c\u9898\u6d89\u53ca\u5230\u7684\u7403\u76d2\u95ee\u9898\u4e2d\u7684\u4e24\u4e2a\u516c\u5f0f\n\n## Description\n\n\u5bf9\u4e8e $n$ \u4e2a\u7403\uff0c\u653e\u8fdb $m$ \u4e2a\u76d2\u5b50\u91cc\u9762\uff0c\u6bcf\u4e2a\u76d2\u5b50\u81f3\u5c11\u6709 $a_i + 1$ \u4e2a\u7403\uff0c\u6c42\u6700\u540e\u7684\u65b9\u6848\u6570\uff0c\u5bf9 $10^9 + 7$ \u53d6\u6a21\u3002\n\n## Solution\n\n\u53ef\u4ee5\u5f88\u5bb9\u6613\u7684\u60f3\u5230\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u76d2\u5b50\u81f3\u5c11\u653e\u8fd9\u4e48\u591a\uff0c\u90a3\u4e48\u5f53\u6211\u603b\u7403\u6570\u51cf\u53bb\u8fd9\u4e9b\u81f3\u5c11\u653e\u7684\u7403\u4e4b\u540e\uff0c\u5c31\u53d8\u6210\u4e86\u6211\u5269\u4e0b\u7684\u53ef\u4ee5\u81ea\u7531\u653e\u7684\u7403\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u7403\uff0c\u5c31\u76f8\u5f53\u4e8e $n$ \u4e2a\u7403\u653e\u8fdb $m$ \u4e2a\u76d2\u5b50\u91cc\u9762\uff0c\u53ef\u4ee5\u6709\u7a7a\u76d2\u3002\n\n\u8fd9\u4e2a\u95ee\u9898\u662f\u4e00\u4e2a\u975e\u5e38\u7ecf\u5178\u7684\u95ee\u9898\uff0c\u5148\u8bf4\u4e00\u624b\u7ed3\u8bba\uff0c$\\binom{n+m-1}{m-1}$\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u6211\u8fd9\u91cc\u6709\u4e00\u79cd\u975e\u5e38\u53e6\u7c7b\u7684\u89e3\u91ca\u3002\n\n\u5b66\u8fc7\u7ec4\u5408\u6570\u5b66\u7684\u90fd\u77e5\u9053\u5bf9\u4e8e\u4e00\u4e2a\u7f51\u683c\u56fe\uff0c\u6211\u4eec\u4ece $(0,0)$ \u8d70\u5230 $(n,m)$ \u7684\u65b9\u6848\u6570\u662f $\\binom{n+m}{m}$\u3002\u90a3\u4e48\u7c7b\u6bd4\u4e00\u4e0b\uff0c\u6211\u4eec\u8003\u8651 $x$ \u8f74\u4e3a**\u6211\u73b0\u5728\u653e\u4e86\u51e0\u4e2a\u7403**\uff0c$y$ \u8f74\u4e3a**\u6211\u73b0\u5728\u8d70\u5230\u7b2c\u51e0\u4e2a\u76d2\u5b50**\uff0c\u90a3\u4e48\u6839\u636e\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u662f\u4e0d\u662f\u5f88\u5bb9\u6613\u5c31\u53ef\u4ee5\u60f3\u5230\uff0c\u6211\u4eec\u7684\u8d77\u70b9\u5728 $(0,1)$ \u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u7136\u540e\u8d70\u5230 $(n,m)$ \u8fd9\u4e2a\u4f4d\u7f6e\uff0c\u90a3\u4e48\u6839\u636e\u4e0a\u9762\u90a3\u4e2a\u7f51\u683c\u56fe\u7684\u8d70\u6cd5\uff0c\u65b9\u6848\u6570\u5c31\u662f $\\binom{n+m-1}{m-1}$\u3002\n\n\u5982\u679c\u60f3\u8981\u4e00\u4e2a\u66f4\u52a0\u663e\u7136\u4e00\u70b9\u7684\u505a\u6cd5\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5148\u8003\u8651\u53e6\u4e00\u4e2a\u7403\u76d2\u6a21\u578b\u3002\u6709 $n$ \u4e2a\u7403\uff0c$m$ \u4e2a\u76d2\u5b50\uff0c\u4e0d\u80fd\u6709\u7a7a\u76d2\u7684\u65b9\u6848\u6570\u3002\n\n\u8fd9\u4e2a\u95ee\u9898\u4e5f\u975e\u5e38\u7684\u7b80\u5355\uff0c\u8f6c\u5316\u4e00\u4e0b\u5c31\u53d8\u6210\u4e86\u63d2\u677f\u95ee\u9898\uff0c\u8bf7\u8bfb\u8005\u601d\u8003\u4e00\u4e0b\uff0c\u63d2\u677f\u6cd5\u5c31\u662f\u5728 $n - 1$ \u4e2a\u533a\u522b\u7684\u7403\u4e2d\u95f4\u9009 $m - 1$ \u4e2a\u7684\u65b9\u6848\u6570\uff0c\u90a3\u4e48\u5c31\u662f\u7ec4\u5408\u7684\u5b9a\u4e49\u4e86\uff0c\u7b54\u6848\u5c31\u662f $\\binom{n-1}{m-1}$\u3002\n\n\u62d3\u5c55\u7684\uff0c\u53ef\u4ee5\u6709\u7a7a\u76d2\u7684\u60c5\u51b5\u662f\u4e0d\u662f\u5c31\u662f\u8fd9\u4e2a\u95ee\u9898\u7684\u4e00\u4e2a\u5ef6\u4f38\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u591a\u51fa\u4e86 $m$ \u4e2a\u7403\u53bb\u8fdb\u884c\u63d2\u677f\uff0c\u7b54\u6848\u662f\u4e0d\u662f\u5c31\u53d8\u6210\u4e86 $\\binom{n+m-1}{m-1}$\u3002\n\n\u770b\u5230\u8fd9\u91cc\u53ea\u60f3\u627e\u8bc1\u660e\u7684\u8bfb\u8005\u53ef\u4ee5\u8d70\u4e86\uff0c\u672c\u6587\u66f4\u91cd\u8981\u7684\u662f**\u5982\u4f55\u7ebf\u6027\u6c42\u7ec4\u5408\u6570**\u7684 trick\u3002\n\n\u9884\u5904\u7406\uff1a\n\n```cpp\ninline void init(const int lim) {\n    fc[0] = 1;\n    for(int i = 1; i <= lim; i++) fc[i] = fc[i - 1] * i % mod;\n    fv[lim] = ksm(fc[lim], mod - 2);\n    for(int i = lim; i >= 1; i--) fv[i - 1] = fv[i] * i % mod;\n    return ;\n}\n```\n\u67e5\u8be2\uff1a\n\n```cpp\ninline int C(int n, int m) {\n    if(n < m) return 0;\n    return fc[n] * fv[m] % mod * fv[n - m] % mod;\n}\n```\n\u8fd9\u90fd\u662f\u76f4\u63a5\u6839\u636e\u7ec4\u5408\u7684\u610f\u4e49\u6765\u63a8\u5bfc\u7684\uff0c`fc[x]` \u8868\u793a\u7684\u662f $x!$\uff0c`fv[x]` \u8868\u793a\u7684\u662f $x!$ \u7684\u9006\u5143\u3002\n\n\u9884\u5904\u7406\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n)$ \u7684\uff0c\u67e5\u8be2\u65f6\u95f4\u590d\u6742\u5ea6 $O(1)$\u3002\n\n## Code\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\n#define gc (p1==p2&&(p2=(p1=buf)+fread(buf,1,100000,stdin),p1==p2)?EOF:*p1++)\nchar buf[100000], *p1(buf), *p2(buf);\n#define rd read()\ninline int read() {\n    int x = 0, f = 1;\n    char ch = gc;\n    while(!isdigit(ch)) {\n        if(ch == '-') f = 0;\n        ch = gc;\n    }\n    while(isdigit(ch)) {\n        x = (x << 1) + (x << 3) + (ch ^ 48);\n        ch = gc;\n    }\n    return f ? x : -x;\n}\n\nconst int mod = 1e9 + 7;\nconst int N = 1e6 + 1;\n\nint fc[N], fv[N];\n\ninline int ksm(int x, int y) {\n    int ret = 1;\n    for(; y; y >>= 1, x = x * x % mod)\n        if(y & 1) ret = ret * x % mod;\n    return ret;\n}\n\ninline void init(const int lim) {\n    fc[0] = 1;\n    for(int i = 1; i <= lim; i++) fc[i] = fc[i - 1] * i % mod;\n    fv[lim] = ksm(fc[lim], mod - 2);\n    for(int i = lim; i >= 1; i--) fv[i - 1] = fv[i] * i % mod;\n    return ;\n}\n\ninline int C(int n, int m) {\n    if(n < m) return 0;\n    return fc[n] * fv[m] % mod * fv[n - m] % mod;\n}\n\ninline void solve() {\n    int n = rd, m = rd;\n    for(int i = 1, x; i <= m; i++) x = rd, n -= x;\n    init(n);\n    cout << C(n - 1, m - 1) << endl;\n}\n#undef int\n\nint main() {\n#ifdef LOCAL\n    freopen(\"in.txt\",\"r\",stdin);\n    freopen(\"out.txt\",\"w\",stdout);\n#endif\n    solve();\n    return 0;\n}\n```",
        "postTime": 1631430486,
        "uid": 366935,
        "name": "KAMIYA_KINA",
        "ccfLevel": 7,
        "title": "P1680 \u5947\u602a\u7684\u5206\u7ec4 \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u7b80\u8ff0\uff1a\n>\u5c06 $n$ \u4e2a\u4eba\u5206\u6210 $m$ \u7ec4\uff0c\u7b2c $i$ \u7ec4\u7684\u4eba\u6570\u5fc5\u987b\u5927\u4e8e\u4e3a $c_i$\uff0c\u95ee\u65b9\u6848\u6570\u3002\n\n\u9898\u76ee\u4e2d\u8bf4\u4e86\n>\u4e24\u4e2a\u662f\u76f8\u540c\u7684\u65b9\u6848\u5f53\u4e14\u4ec5\u5f53\u5bf9\u4e8e\u4efb\u610f\u7684\u4e00\u961fi\uff0c\u4e24\u4e2a\u65b9\u6848\u7684\u7b2ci\u7ec4\u540c\u5b66\u6570\u91cf\u76f8\u7b49\n\n\u5373\u6240\u6709\u540c\u5b66\u90fd\u662f\u6210\u76f8\u540c\u7684\u3002\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5148\u7ed9\u6bcf\u7ec4 $c_i$ \u4e2a\u4eba\u3002\u4e4b\u540e\u53d8\u6210\u4e86 $n-\\sum_{i=1}^nc_i$ \uff08\u4ee5\u540e\u7528 $n$ \u6765\u4ee3\u66ff\u6b64\u6570\uff09\u4e2a\u4eba\uff0c\u5206\u6210 $m$ \u7ec4\uff0c\u6bcf\u7ec4\u4e0d\u53ef\u4ee5\u4e3a $0$ \u4e2a\u4eba\u3002\n## \u91cd\u70b9\uff1a\u89e3\u51b3\u65b9\u6cd5\n\u770b\u89c1\u5176\u5b83\u9898\u89e3\u90fd\u6ca1\u5199\uff0c\u6211\u5c31\u6765\u5199\u4e00\u4e0b\u5427~\n\n**\u65b9\u6cd5\uff1a\u63d2\u677f\u6cd5**\n\n\u95ee\u9898\u63cf\u8ff0\uff1a\u5bf9\u4e8e $n$ \u4e2a\u4eba\uff0c\u5206\u6210 $m$ \u7ec4\uff0c\u6bcf\u7ec4\u81f3\u5c11 $1$ \u4e2a\u4eba\u3002\u95ee\u65b9\u6848\u6570\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u60f3\u8c61\u8fd9 $n$ \u4e2a\u4eba\u7ad9\u6210\u4e00\u5217\uff0c\u62ff $m-1$ \u4e2a\u677f\u5b50\u5f80\u8fd9 $n-1$ \u4e2a\u95f4\u9694\u4e2d\u63d2\uff0c\u5176\u4e2d\u4efb\u610f\u4e24\u4e2a\u90fd\u4e0d\u5728\u540c\u4e00\u4e2a\u95f4\u9694\u4e2d\u3002\u663e\u7136\uff0c\u82e5\u4e0d\u8003\u8651\u677f\u5b50\u7684\u4e0d\u540c\uff0c\u4e00\u5171\u6709 $C_{n-1}^{m-1}$ \u79cd\u65b9\u6cd5\u3002\u73b0\u5728\uff0c\u6bcf\u4e24\u4e2a\u677f\u5b50\u4e4b\u95f4\uff08\u65c1\u8fb9\u4e24\u4e2a\u677f\u5b50\u7684\u5de6/\u53f3\u8fb9\u7684\u4eba\uff09\u7684\u4eba\u4e3a\u4e00\u7ec4\uff0c\u5171 $m$ \u7ec4\uff0c\u4e0e\u95ee\u9898\u6070\u597d\u5bf9\u5e94\u3002\u5e76\u4e14\uff0c\u6bcf\u5206\u51fa $m$ \u7ec4\uff0c\u5c31\u5bf9\u5e94\u4e00\u79cd\u4e0d\u540c\u7684\u63d2\u677f\u65b9\u6cd5\uff08\u5206\u6790\u5f88\u7b80\u5355\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8bf4\u4e86\uff09\u3002**\u90a3\u4e48\uff0c\u7b54\u6848\u5c31\u662f $C_{n-1}^{m-1}$**\u3002\n\n\u4e4b\u540e\u7528 Lucas \u7b97\u51fa\u7ec4\u5408\u6570\u5c31\u884c\u4e86\u3002Lucas \u6a21\u677f [P3807](https://www.luogu.com.cn/problem/P3807)\uff0c\u4e0d\u719f\u6089\u7684\u8bdd\u53ef\u4ee5\u5148\u770b\u4e00\u4e0b\u8fd9\u9898\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint read(){\n\tchar ch=getchar();int res=0,k=1;\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-')k=-1;else k=1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9'){\n\t\tres=(res<<1)+(res<<3)+ch-'0';\n\t\tch=getchar(); \n\t}\n\treturn res*k;\n}//\u901f\u8bfb\nint n,m;\nconst int mod=1000000007; \nint power(int a,int b,int p){\n\tif(b==0)return 1;\n\tint c=power(a,b/2,p);\n\tif(b%2==0)return (long long)c*c%p;\n\treturn (long long)c*c%p*a%p;\n}//\u5feb\u901f\u5e42\nint c(int a,int b,int p){\n\tint s=1,m=1;b=min(b,a-b);\n\tfor(int i=0;i<b;++i)s=(long long)s*(a-i)%p,m=(long long)m*(i+1)%p;\n\treturn (long long)s*power(m,p-2,p)%p;\n}\nint lucas(int a,int b,int p){\n\tif(b==0)return 1;\n\treturn (long long)c(a%p,b%p,p)*lucas(a/p,b/p,p)%p;\n}//\u5362\u5361\u65af\nint main(){\n\tn=read();m=read();\n\tfor(int i=1;i<=m;++i)n-=read();\n\tprintf(\"%d\",lucas(n-1,m-1,mod));\n\treturn 0;\n} \n```",
        "postTime": 1621950766,
        "uid": 384596,
        "name": "6f21",
        "ccfLevel": 0,
        "title": "P1680\u9898\u89e3"
    },
    {
        "content": "### \u89e3\u9898\u601d\u8def\n\n\u76f8\u5f53\u4e8e\u9694\u677f\u6cd5\uff0c\u6bcf\u4e2a\u5148\u586b$c[i]+1$\u4e2a\uff0c\u7136\u540e\u5269\u4f59$k$\u4e2a\uff0c\u76f8\u5f53\u4e8e\u628a$k$\u4e2a\u82f9\u679c\u585e\u5230$m$\u4e2a\u76d2\u5b50\u91cc\uff0c\u76d2\u5b50\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u65b9\u6848\u6570\u4e3a$C(n+m-1,m-1)$\u3002\n\n\u8fd8\u6709\u4e00\u79cd\u7406\u89e3\u65b9\u5f0f\u662f\u6bcf\u4e2a\u5148\u586b$c[i]$\u4e2a\uff0c\u5269$k$\u4e2a\uff0c\u628a$k$\u4e2a\u82f9\u679c\u585e\u5230$m$\u4e2a\u76d2\u5b50\u91cc\uff0c\u76d2\u5b50\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u65b9\u6848\u6570\u4e3a$C(n-1,m-1)$\u3002\n\n**\u7136\u540e\u8d39\u9a6c\u5c0f\u5b9a\u7406\u7b97\u51fa\u9006\u5143\u3002**\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nconst int MAXN=1000005;\nconst int mod=1e9+7;\ntypedef long long LL;\ninline int rd()\n{\n    int x=0,f=1;char ch=getchar();\n    while(!isdigit(ch)) {f=ch=='-'?-1:1;ch=getchar();}\n    while(isdigit(ch))  {x=(x<<1)+(x<<3)+ch-'0';ch=getchar();}\n    return x*f;\n}\nint n,m;\nLL ans,to[MAXN<<2]={0,1};\nLL fast_pow(LL x,int y)\n{\n    LL ret=1;\n    for(;y;y>>=1)\n\t{\n        if(y&1) ret=ret*x%mod;\n        x=x*x%mod;\n    }\n    return ret;\n}\nint main()\n{ \n    for(register int i=2;i<=2000000;i++) to[i]=to[i-1]*i%mod;\n    n=rd();m=rd();\n    for(register int i=1;i<=m;i++) n-=rd()+1;\n    if(m==1||n==0){printf(\"1\\n\");return 0;}\n    ans=to[n+m-1]*fast_pow(to[m-1],mod-2)%mod*fast_pow(to[n],mod-2)%mod;\n    printf(\"%d\\n\",ans%mod);\n    return 0;\n}\n```",
        "postTime": 1544103823,
        "uid": 98954,
        "name": "\u4e0d\u5b58\u5728\u4e4b\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1680 \u3010\u5947\u602a\u7684\u5206\u7ec4\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u8c8c\u4f3c\u8981\u7528\u5230\u8fd9\u4e2a\u5c0f\u4e1c\u897f\uff1a\n\nLucas \u5b9a\u7406\uff1a\u662f\u7528\u6765\u6c42 C(n,m) mod p\u7684\u503c,p\u662f\u7d20\u6570\u3002\n\n\u63cf\u8ff0\u4e3a:\n\nLucas(n,m,p)=C(n%p,m%p)\\* Lu   \n\nLucas(n,0,p)=1;\n\n\u6653\u5f97\u8fd9\u4e2a\u540e\uff0c\u9898\u89e3\u5c31\u81ea\u5df1\u770b\u4e86\u3002\n\n\u4e0a\u83dc\u5566\uff01\uff01\n\n \n          \n```cpp\n    #include<iostream>  \n    #include<cstring>  \n    #define LL long long  \n    #define N 1000010  \n    using namespace std;  \n    const long long  r=1000000007;  \n    int x, y;  \n    long long n,m;  \n    void extend_gcd(int a, int b) {  \n        int xx;  \n        if (b == 0) {  \n            x = 1, y = 0;  \n            return;  \n        }  \n        extend_gcd(b, a % b);  \n        xx = x;  \n        x = y, y = xx - a / b * y;  \n    }  \n    int C(int a, int b, int p) {  \n        int i;  \n        LL resa, resb, res;  \n        if (b > a) {  \n            return 0;  \n        }  \n        for (i = 0, resa = 1, resb = 1; i < b; i++) {  \n            resa = resa * (a - i) % p, resb = resb * (b - i) % p;  \n        }  \n         extend_gcd(resb, p);  \n         res = (LL) x;  \n         res = (res % p + p) % p;  \n        res = res * resa % p;  \n        return (int) res;  \n    }  \n    void solve(int n, int m, int p) {  \n        int a, b;  \n        LL res;  \n        res = 1;  \n        while (n || m) {  \n            a = n % p, b = m % p;  \n            res = res * C(a, b, p) % p;  \n            n /= p, m /= p;  \n        }  \n        printf(\"%I64d\\n\", res);  \n    }  \n    int main()  \n    {  \n        freopen(\"stone.in\",\"r\",stdin);  \n        freopen(\"stone.out\",\"w\",stdout);  \n        long long t,ans=0;  \n        scanf(\"%I64d%I64d\",&n,&m);  \n        for (int i=0;i<m;++i)   \n        {  \n            scanf(\"%I64d\",&t);  \n            n-=t;  \n        }  \n        n-=1,m-=1;  \n        solve(n,m,r);  \n        return 0;  \n    }  \n\n```",
        "postTime": 1509366077,
        "uid": 43501,
        "name": "\u4f55\u70b3\u5112",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1680 \u3010\u5947\u602a\u7684\u5206\u7ec4\u3011"
    }
]
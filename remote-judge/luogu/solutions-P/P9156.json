[
    {
        "content": "# $\\mathscr{Description}$\r\n\r\n&emsp;&emsp;[Link](), \u61d2\u5f97\u6982\u62ec\u9898\u610f.jpg\r\n\r\n# $\\mathscr{Solution}$\r\n\r\n&emsp;&emsp;**Subtask 1** $(n,m\\le2)$&emsp;\u4e00\u5171\u53ea\u6709\u4e94\u79cd\u60c5\u51b5, \u6837\u4f8b\u5df2\u7ecf\u7ed9\u51fa\u4e86\u4e09\u79cd, \u5269\u4e0b\u4e24\u79cd\u81ea\u5df1\u624b\u73a9\u5c31\u884c\u5566!\r\n\r\n&emsp;&emsp;**Subtask 2** $(n,m\\le8)$&emsp;\u5947\u5947\u602a\u602a\u7684\u72b6\u538b, \u6216\u8005\u5fd8\u8bb0\u8bb0\u5fc6\u5316\u7684\u5404\u8272\u641c\u7d22\u5e94\u8be5\u90fd\u80fd\u5f97\u5230\u8fd9\u6863.\r\n\r\n&emsp;&emsp;**Subtask 3** $(n=m)$&emsp;\u89c2\u5bdf\u6837\u4f8b\u53ef\u4ee5\u53d1\u73b0, \u6b64\u65f6\u4e5f\u8bb8\u6709 $\\textit{ans}=n/2$, \u7279\u522b\u7684, \u5f53 $n=m=1$ \u65f6, $\\textit{ans}=1$. \u4e25\u8c28\u7684\u8bf4, \u6211\u4eec\u53ef\u4ee5\u8bc1\u660e, \u5f53 $n=m>1$ \u65f6, \u53cc\u65b9\u4e00\u5f00\u59cb\u5c31\u4f1a\u548c\u5c40.\r\n\r\n&emsp;&emsp;\u5c1d\u8bd5\u5f52\u7eb3\u8bc1\u660e. \u5047\u8bbe\u5f53 $2\\le n\\le n_0$ \u65f6, \u5148\u624b\u671f\u671b\u5f97\u5206\u4e0d\u4f4e\u4e8e\u540e\u624b. \u73b0\u5728, \u6211\u4eec\u6765\u8003\u8651 $n=n_0+1$ \u7684\u60c5\u51b5. \u6b64\u65f6\u5148\u624b\u4e00\u5171\u53ea\u6709\u4e09\u79cd\u51b3\u7b56:\r\n\r\n1.  \u9009\u62e9\u4e24\u5f20\u672a\u77e5\u724c (\u672a\u77e5\u724c\u5171 $2n-m=n=m$ \u5f20);\r\n\r\n2.  \u9009\u62e9\u4e00\u5f20\u5df2\u77e5\u724c (\u5df2\u77e5\u724c\u5171 $m$ \u5f20), \u4e00\u5f20\u672a\u77e5\u724c;\r\n\r\n3.  \u9009\u62e9\u4e24\u5f20\u5df2\u77e5\u724c.\r\n\r\n&emsp;&emsp;\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u51b3\u7b56, \u56e0\u4e3a\u5df2\u77e5\u724c\u4e2d $n$ \u79cd\u7c7b\u578b\u90fd\u5df2\u7ecf\u51fa\u73b0, \u6240\u4ee5\u5148\u624b\u4e0d\u53ef\u80fd\u62ff\u5230\u76f8\u540c\u7c7b\u578b\u7684\u724c. \u6b64\u65f6\u5148\u624b\u5fc5\u7136\u7ed3\u675f\u81ea\u5df1\u7684\u56de\u5408. \u800c\u540e\u624b\u53ef\u4ee5\u7acb\u9a6c \"\u6361\u6f0f\", \u5c06\u5148\u624b\u7ffb\u51fa\u7684\u4e24\u5f20\u724c\u548c\u5df2\u77e5\u7684\u4e24\u5f20\u724c\u5206\u522b\u914d\u5bf9, \u5f97\u5230 $2$ \u5206. \u63a5\u7740, \u540e\u624b\u53d8\u4e3a\u5148\u624b, \u9762\u5bf9 $n\\gets n-2$ \u7684\u60c5\u51b5. \u6839\u636e\u5f52\u7eb3\u5047\u8bbe, \u6b64\u65f6\u7684\u5148\u624b\u671f\u671b\u5f97\u5206\u4e0d\u52a3\u4e8e\u540e\u624b, \u6240\u4ee5\u5728\u8fd9\u79cd\u51b3\u7b56\u4e0b, \u539f\u5148\u624b\u7684\u671f\u671b\u5f97\u5206\u4f4e\u4e8e\u540e\u624b.\r\n\r\n&emsp;&emsp;\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u51b3\u7b56, \u7c7b\u4f3c\u7684, \u5148\u624b\u6709 $1/n$ \u7684\u6982\u7387\u76f4\u63a5\u62ff\u51fa\u4e00\u5bf9\u540c\u7c7b\u5361\u724c, \u4ee5 $(n-1)/n$ \u7684\u6982\u7387\u7ed9\u540e\u624b \"\u6253\u5de5\", \u800c\u4e8c\u8005\u90fd\u4f1a\u9012\u5f52\u5230 $n\\gets n-1$ \u7684\u60c5\u51b5. \u8bbe $n\\gets n-1$ \u65f6, \u5148\u624b\u671f\u671b\u5f97\u5206\u4e3a $x~(x\\ge (n-1)/2)$, \u90a3\u4e48\u539f\u6765\u5148\u624b\u7684\u671f\u671b\u5f97\u5206\u4e3a:\r\n$$\r\n\\begin{aligned}\r\n\tE &= \\frac{1}{n}(1+x)+\\frac{n-1}{n}(n-1-x)\\\\\r\n\t&= \\frac{1}{n}+\\frac{(n-1)^2}{n}-\\frac{n-2}{n}x\\\\\r\n\t&\\le \\frac{1}{n}+\\frac{(n-1)^2}{n}-\\frac{(n-1)(n-2)}{2n}\\\\\r\n\t&= \\frac{2+2n^2-4n+2-n^2+3n-2}{2n}\\\\\r\n\t&= \\frac{n}{2}-\\frac{1}{2}+\\frac{1}{n}.\r\n\\end{aligned}\r\n$$\r\n\u53ef\u89c1 $n\\ge2$ \u65f6\u90fd\u6709 $E\\le\\frac{n}{2}$, \u4e5f\u5373\u662f\u539f\u5148\u624b\u671f\u671b\u5f97\u5206\u4f4e\u4e8e\u540e\u624b.\r\n\r\n&emsp;&emsp;\u4e8e\u662f, \u5148\u624b\u9009\u62e9\u4e86\u7b2c\u4e09\u79cd\u51b3\u7b56! \u7b2c\u4e09\u79cd\u51b3\u7b56\u6ca1\u6709\u4efb\u4f55\u6548\u679c, \u4ec5\u4ec5\u662f \"\u6446\u70c2\" \u5730\u8fc7\u6389\u81ea\u5df1\u56de\u5408, \u8f6e\u5230\u5bf9\u65b9\u64cd\u4f5c. \u6b64\u65f6\u5bf9\u65b9\u53c8\u9762\u4e34\u8fd9\u4e09\u79cd\u51b3\u7b56\u7684\u9009\u62e9, \u4ed6\u53c8\u4f1a \"\u6446\u70c2\" \u8fc7\u6389\u81ea\u5df1\u7684\u56de\u5408 ... \u53cc\u65b9\u90fd\u65e0\u6cd5\u8ba9\u81ea\u5df1\u7684\u671f\u671b\u5f97\u5206\u9ad8\u4e8e\u5bf9\u65b9, \u90a3\u4e48\u6b64\u65f6\u53cc\u65b9\u90fd\u4f1a\u540c\u610f\u548c\u5c40! \u4e24\u4eba\u5f97\u5206 $n/2$, \u6211\u4eec\u5b8c\u6210\u4e86\u5f52\u7eb3, \u4e5f\u987a\u5e26\u8bc1\u660e\u4e86\u6e38\u620f\u4e00\u5f00\u59cb\u5373\u548c\u5c40\u7ed3\u675f.&emsp;&emsp;$\\square$\r\n\r\n&emsp;&emsp;**Subtask 4** $(T=1)$&emsp;\u5927\u6982\u6709\u4ec0\u4e48\u4e00\u6b21\u53ea\u80fd\u6c42\u51fa\u4e00\u4e2a\u7b54\u6848\u7684\u7b97\u6cd5?\r\n\r\n&emsp;&emsp;**Subtask 5**&emsp;\u6765\u8bb2\u6b63\u89e3\u5566. \u5728 subtask 3 \u7684\u8bc1\u660e\u8fc7\u7a0b\u4e2d, \u6211\u4eec\u5df2\u7ecf\u81ea\u7136\u5730\u5f15\u5165\u4e86 \"\u5148\u624b\u5f97\u5206\u662f\u5426\u4f4e\u4e8e\u540e\u624b\" \u7684\u8ba8\u8bba. \u8fdb\u4e00\u6b65\u7684, \u7531\u4e8e\u53cc\u65b9\u5f97\u5206\u4e4b\u548c\u4e00\u5b9a\u662f $n$, \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u53cc\u65b9\u5f97\u5206\u4e4b\u5dee\u6765\u523b\u753b\u5148\u624b\u5f97\u5206. \u4ee4 $f(n,m)$ \u8868\u793a $n$ \u5bf9\u724c, $m$ \u5f20\u5df2\u77e5\u65f6, \u5148\u624b\u671f\u671b\u5f97\u5206 $-$ \u540e\u624b\u671f\u671b\u5f97\u5206\u7684\u503c. \u8fd8\u662f\u6765\u505a\u4e00\u505a\u540c subtask 3 \u8bc1\u660e\u8fc7\u7a0b\u4e2d\u7684\u4e09\u79cd\u8ba8\u8bba:\r\n\r\n-   \u5148\u624b\u9009\u62e9\u4e00\u5f20\u5df2\u77e5\u724c, \u4e00\u5f20\u672a\u77e5\u724c, \u6b64\u65f6\u8981\u6c42 $m\\ge1$, \u6709\u8f6c\u79fb:\r\n    $$\r\n    \\begin{array}{ccl}\r\n    f(n,m) & \\overset{\\max}{\\longleftarrow} & \\frac{1}{2n-m}(1+f(n-1,m-1))-\\frac{m-1}{2n-m}(1+f(n-1,m-1))\\\\\r\n    & & -\\frac{2n-2m}{2n-m}f(n,m+1).\r\n    \\end{array}\r\n    $$\r\n    \r\n-   \u5148\u624b\u9009\u62e9\u4e24\u5f20\u672a\u77e5\u724c, \u6b64\u65f6\u8981\u6c42 $2n-m\\ge2$, \u6709\u8f6c\u79fb:\r\n    $$\r\n    \\begin{array}{ccl}\r\n    f(n,m) & \\overset{\\max}{\\longleftarrow} & \\frac{n-m}{\\binom{2n-m}{2}}(1+f(n-1,m))-\\frac{\\binom{m}{2}}{\\binom{2n-m}{2}}(2+f(n-2,m-2))\\\\\r\n    & & -\\frac{m(2n-2m)}{\\binom{2n-m}{2}}(1+f(n-1,m))-\\frac{2(n-m)(n-m-1)}{\\binom{2n-m}{2}}f(n,m+2).\r\n    \\end{array}\r\n    $$\r\n\r\n-   \u5148\u624b\u9009\u62e9\u4e24\u5f20\u5df2\u77e5\u724c, \u6b64\u65f6\u8981\u6c42 $m\\ge2$. \u6ce8\u610f\u8fd9\u91cc\u4e0d\u662f $f(n,m)\\overset{\\max}{\\longleftarrow}-f(n,m)$, \u5982\u679c\u8fd9\u79cd\u51b3\u7b56\u662f\u4f18\u79c0\u7684, \u53cc\u65b9\u4f1a\u76f4\u63a5\u548c\u5c40, \u6240\u4ee5\u6709:\r\n    $$\r\n    \\begin{array}{ccl}\r\n    f(n,m) & \\overset{\\max}{\\longleftarrow} & 0.\r\n    \\end{array}\r\n    $$\r\n\r\n&emsp;&emsp;\u8fb9\u754c\u4e3a $f(0,0)=0$. \u8f6c\u79fb\u8fc7\u7a0b\u6709\u5f88\u591a\u7ec6\u5c0f\u60c5\u51b5\u7684\u8ba8\u8bba, \u53ef\u80fd\u4f1a\u5f15\u5165\u975e\u6cd5\u72b6\u6001, \u4f46\u8fd9\u4e9b\u975e\u6cd5\u72b6\u6001\u7684\u8f6c\u79fb\u7cfb\u6570\u5fc5\u7136\u4e3a $0$, \u6240\u4ee5\u4e0d\u5fc5\u8fc7\u5206\u62c5\u5fc3. \u76f4\u63a5\u9012\u63a8\u6216\u8005\u8bb0\u5fc6\u5316\u641c\u7d22, \u5c31\u80fd $\\mathcal O(nm)$ \u6c42\u51fa\u6240\u6709 $f$. \u6700\u7ec8\u7b54\u6848\u5373\u4e3a $(n+f(n,m))/2$.\r\n\r\n## $\\mathscr{Code}$\r\n\r\n```cpp\r\n/*+Rainybunny+*/\r\n\r\n#include <bits/stdc++.h>\r\n\r\n#define rep(i, l, r) for (int i = l, rep##i = r; i <= rep##i; ++i)\r\n#define per(i, r, l) for (int i = r, per##i = l; i >= per##i; --i)\r\n\r\ntypedef double VType;\r\n// typedef long double VType;\r\n\r\ntemplate <typename Tp>\r\ninline void chkmin(Tp& u, const Tp& v) { v < u && (u = v, 0); }\r\ntemplate <typename Tp>\r\ninline void chkmax(Tp& u, const Tp& v) { u < v && (u = v, 0); }\r\ntemplate <typename Tp>\r\ninline Tp imin(const Tp& u, const Tp& v) { return u < v ? u : v; }\r\ntemplate <typename Tp>\r\ninline Tp imax(const Tp& u, const Tp& v) { return u < v ? v : u; }\r\n\r\nconst int MAXN = 5e3;\r\nbool vis[MAXN + 5][MAXN + 5];\r\nVType f[MAXN + 5][MAXN + 5];\r\n\r\ninline VType calc(const int n, const int m) {\r\n    if (n <= 0 || m < 0 || n < m) return 0;\r\n    VType& cur = f[n][m];\r\n    if (vis[n][m]) return cur;\r\n    vis[n][m] = true, cur = -1e100;\r\n    if (m >= 1) {\r\n        chkmax(cur, (1 + calc(n - 1, m - 1)\r\n        - (m - 1) * (1 + calc(n - 1, m - 1))\r\n        - 2 * (n - m) * calc(n, m + 1))\r\n        / (2 * n - m));\r\n    }\r\n    if (2 * n - m > 1) {\r\n        chkmax(cur, 2 * ((n - m) * (1 + calc(n - 1, m))\r\n        - m * (m - 1) / 2 * (2 + calc(n - 2, m - 2))\r\n        - 2 * m * (n - m) * (1 + calc(n - 1, m))\r\n        - 2 * (n - m) * (n - m - 1) * calc(n, m + 2))\r\n        / ((2 * n - m) * (2 * n - m - 1)));\r\n    }\r\n    if (m >= 2) chkmax(cur, 0.);\r\n    return cur;\r\n}\r\n\r\nint main() {\r\n    int T, n, m;\r\n    scanf(\"%d\", &T);\r\n    while (T--) {\r\n        scanf(\"%d %d\", &n, &m);\r\n        printf(\"%.12f\\n\", (n + calc(n, m)) / 2);\r\n    }\r\n    return 0;\r\n}\r\n\r\n```\r\n\r\n",
        "postTime": 1677552956,
        "uid": 123807,
        "name": "Rainybunny",
        "ccfLevel": 9,
        "title": "Solution -\u300cGLR-R4\u300d\u8292\u79cd"
    }
]
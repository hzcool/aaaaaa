[
    {
        "content": "\u826f\u5fc3 C \u9898\uff0c\u4e0d\u63a5\u53d7\u53cd\u9a73\u3002\n\n\u9996\u5148\u6211\u4eec\u770b\u53ea\u6709 3 \u9897\u68cb\u5b50\u7684\u60c5\u51b5\u3002\n\n$$\\Box\\blacksquare\\Box\\Box\\blacksquare\\Box\\Box{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare\\Box$$\n\n\u5176\u4e2d\u9ed1\u8272\u8868\u793a\u6709\u68cb\u5b50\u3002\n\n\u6211\u4eec\u89c2\u5bdf\u5230\u4e00\u65e6\u6211\u4eec\u7684\u68cb\u5b50\u88ab\u653e\u5230\u7ea2\u8272\u4f4d\u7f6e\u4e0a\u4e4b\u540e\u5b83\u80af\u5b9a\u65e0\u6cd5\u518d\u5411\u5de6\u8d70\u4e86\u3002\n\n$$\\Box\\blacksquare\\Box\\Box\\Box\\Box\\blacksquare\\Box\\Box\\blacksquare\\Box$$\n\n\u8fd9\u79cd\u60c5\u51b5\u5c31\u662f\u5565\u4e8b\u6ca1\u6709\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u8003\u8651\u68cb\u5b50\u6700\u65e9\u4f1a\u5728\u54ea\u91cc\u843d\u5230\u4e00\u4e2a\u7ea2\u8272\u4f4d\u7f6e\u4e0a\u3002\n\n\u6211\u4eec\u8ba9\u68cb\u5b50\u53bb\u627e\u7ea2\u8272\u4f4d\u7f6e\uff0c\u4e0d\u5982\u8ba9\u7ea2\u8272\u4f4d\u7f6e\u53cd\u8fc7\u6765\u53bb\u627e\u68cb\u5b50\u3002\n\n\u6bd4\u5982\u4e0b\u56fe\uff1a\n\n$$\\Box\\blacksquare\\Box\\Box\\blacksquare\\Box\\Box{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare\\Box\\Box\\Box\\blacksquare\\Box$$\n\n\u7ea2\u70b9\u53ef\u4ee5\u5411\u53f3\u53bb\u627e\u68cb\u5b50\uff1a\n\n$$\\Box\\blacksquare\\Box\\Box\\blacksquare\\Box\\Box{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\Box\\blacksquare\\Box$$\n\n\u8fd9\u6837\u6211\u4eec\u53ea\u8981\u5728\u4e00\u5f00\u59cb\u7684\u65f6\u5019\u770b\u4e00\u4e0b\u68cb\u5b50\u811a\u4e0b\u7684\u989c\u8272\u5c31\u53ef\u4ee5\u77e5\u9053\u4f1a\u4e0d\u4f1a\u5728\u67d0\u4e00\u523b\u4e0d\u80fd\u518d\u5f80\u5de6\u8d70\u4e86\u3002\n\n\u7b49\u7b49\uff0c\u8fd9\u6837\u6ca1\u6cd5\u5904\u7406**\u6700\u65e9**\u3002\n\n\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u76f4\u63a5**\u8986\u76d6**\u3002\u4ece\u5de6\u5230\u53f3\u5904\u7406\u7ea2\u8272\u4f4d\u7f6e\u7684\u65f6\u5019\u987a\u5e26\u8bb0\u5f55\u4e00\u4e0b\u662f\u54ea\u4e24\u4e2a\u4e0d\u52a8\u68cb\u5b50\u4e4b\u95f4\u7684\u7ea2\u8272\u4f4d\u7f6e\u8f6c\u79fb\u51fa\u53bb\u7684\u3002\u8fd9\u6837\u53ef\u4ee5\u5b8c\u6574\u5730\u67e5\u8be2\uff0c\u5411\u53f3\u8f6c\u79fb\u7684\u65f6\u5019\u76f4\u63a5\u8986\u76d6\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5bf9\u4e8e\u4e24\u4e2a\u76f8\u90bb\u7684\u4e0d\u52a8\u68cb\uff0c\u4ece\u5de6\u8fb9\u5f00\u59cb\u4f1a\u6709\u82e5\u5e72\u6bb5\u8fde\u7eed\u7684\u7ea2\u70b9\uff0c\u4ed6\u4eec\u7684\u751f\u6210\u65f6\u95f4\u8d8a\u6765\u8d8a\u65e9\u3002\u6211\u4eec\u628a\u5b83\u770b\u4f5c**\u5355\u8c03\u961f\u5217**\u7ed3\u6784\u3002\u4ece\u53f3\u8fb9\u4e5f\u6709\u76f8\u540c\u7684\u7ed3\u6784\u3002\u5de6\u8fb9\u548c\u53f3\u8fb9\u53ef\u80fd\u91cd\u53e0\uff0c\u4f46\u4e0d\u91cd\u8981\uff0c\u67e5\u8be2\u65f6\u4e24\u8fb9\u5404\u67e5\u8be2\u4e00\u6b21\uff0c\u53bb\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6bd4\u5982\u6211\u4eec\u6709\u4e09\u6bb5\u4ece\u5de6\u8fb9\u5f00\u59cb\u7684\u7ea2\u8272\u4f4d\u7f6e\uff0c**\u4ece\u77ed\u5230\u957f\uff0c\u751f\u6210\u8ddd\u79bb\u5f53\u524d\u8d8a\u6765\u8d8a\u8fdc**\u3002\n\n\u7b2c\u4e00\u6bb5\uff1a\n$$\\Box\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\Box\\Box\\Box\\blacksquare\\Box$$\n\n\u7b2c\u4e8c\u6bb5\uff1a\n$$\\Box\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\Box\\Box\\blacksquare\\Box$$\n\n\u7b2c\u4e09\u6bb5\uff1a\n$$\\Box\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\Box\\blacksquare\\Box$$\n\n\u5355\u8c03\u961f\u5217\u91cc\u6309 `[1,2,3]` \u6392\u5217\u3002\n\n---\n\n\u5177\u4f53\u7684\uff0c\u7ea2\u8272\u4f4d\u7f6e\u5982\u4f55\u8f6c\u79fb\uff1f\n\n1.\n\n$$\\Box\\blacksquare\\Box{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\blacksquare\\Box\\Box\\Box\\blacksquare\\Box$$\n\n\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u627e\u5230\u7ea2\u8272\u4f4d\u7f6e\u4e2d\u4ece\u4e2d\u95f4\u8fd9\u4e2a\u9ed1\u70b9\u51fa\u53d1\u5ef6\u7533\u7684\u6700\u957f\u6bb5\uff0c\u5b83\u53ef\u80fd\u5728\u8f6c\u79fb\u8fc7\u7a0b\u4e2d\u56e0\u4e3a\u8fc7\u957f\u800c**\u6d88\u5931**\u6216**\u6d88\u5931\u5176\u4e2d\u4e00\u6bb5**\uff0c\u5728\u5355\u8c03\u961f\u5217\u4e2d\u76f4\u63a5\u4ece\u961f\u672b\u4fee\u6539\u5373\u53ef\u3002\n\n2.\n\n$$\\Box\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\Box\\blacksquare\\Box\\Box\\Box{\\color{blue}{\\Box}}{\\color{blue}{\\Box}}\\blacksquare\\Box$$\n\n\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u5728\u8f6c\u79fb\u8fc7\u53bb\u4e4b\u540e\u53d1\u73b0\u4ece\u53f3\u8fb9\u5f00\u59cb\u5e76\u4e0d\u8fde\u7eed\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u76f4\u63a5\u6dfb\u52a0\u4e00\u6bb5\u7ea2\u8272\u4f4d\u7f6e\u5728\u90a3\u4e9b\u88ab\u6807\u84dd\u7684\u4f4d\u7f6e\u5c31\u8fde\u7eed\u4e86\uff0c\u6240\u5c5e\u4f4d\u7f6e\u662f\u6700\u65b0\u7684\u4f4d\u7f6e\u3002\n\n3.\n\n$$\\Box\\blacksquare{\\color{red}{\\Box}}{\\color{red}{\\Box}}\\Box\\Box\\blacksquare\\Box\\Box\\Box\\blacksquare\\Box$$\n\n\u8fd9\u79cd\u60c5\u51b5\u548c\u7b2c\u4e00\u79cd\u60c5\u51b5\u5f88\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u662f\u4ece\u5355\u8c03\u961f\u5217\u7684\u5bf9\u5934\u8fdb\u884c\u4fee\u6539\u3002\n\n\n---\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u5355\u8c03\u961f\u5217\u662f\u52a8\u6001\u7684\uff0c\u6240\u4ee5\u8be2\u95ee\u5f97\u79bb\u7ebf\uff0c\u521a\u597d\u5230\u81ea\u5df1\u6240\u5904\u7684\u4e24\u4e2a\u4e0d\u52a8\u68cb\u7684\u533a\u95f4\u7684\u65f6\u5019\u67e5\u8be2\u3002\u8fd9\u4e2a\u67e5\u8be2\u5f97\u4e8c\u5206\u3002\u603b\u590d\u6742\u5ea6\uff1a$O(n+q\\log n)$\u3002\n\n~~\u90e8\u5206\u5206\u5f88\u826f\u5fc3\u5427\uff1f~~\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define inf (0x3f3f3f3f3f3f3f3f)\nusing namespace std;\nconst int N = 6e6+100;\nint n, Q;\nll a[N];\npair<ll, int> b[N];\nint l[2], r[2];\nll d[2];\npair<ll, int> q[2][N];\nint ans[N];\nchar buf[1<<23],*p1=buf,*p2=buf,obuf[1<<25],*O=obuf;\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\n#define putchar(x) (*O++=x)\ninline ll read() {\n\tll x=0,f=1;char ch=getchar();\n\twhile(!isdigit(ch)){if(ch=='-') f=-1;ch=getchar();}\n\twhile(isdigit(ch)) x=x*10+(ch^48),ch=getchar();\n\treturn x*f;\n}\ninline void write(int X){\n\tif(X<0) {putchar('-'); X=~(X-1);}\n\tint s[20],top=0;\n\twhile(X) {s[++top]=X%10; X/=10;}\n\tif(!top) s[++top]=0;\n\twhile(top) putchar(s[top--]+'0');\n}\nint main(){\n//\tstd::ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n//\tfreopen(\"data/in20.in\", \"r\", stdin);\n//\tfreopen(\"data/out6.out\", \"w\", stdout);\n\tn = read(), Q = read();\n\tfor (int i = 1; i <= n; i++)\n\t\ta[i] = read();\n\ta[++n] = inf;\n\tfor (int i = 1; i <= Q; i++){\n\t\tb[i].first = read();\n\t\tb[i].second = i;\n\t}\n\tsort(b+1, b+1+Q);\n\tq[0][l[0]=r[0]=3e6+50] = make_pair(inf, 0);\n\tq[1][l[1]=r[1]=3e6+50] = make_pair(inf, 0);\n\tint p = 1; \n\tfor (int i = 1; i < n; i++){\n\t\tconst ll len1 = (i==1?inf:a[i]-a[i-1]-1), len2 = a[i+1]-a[i]-1;\n\t\tif (len1 > len2){\n\t\t\tconst int j = i&1;\n\t\t\twhile (l[j] < r[j] && q[j][r[j]-1].first+d[j] > len2)\n\t\t\t\tr[j]--;\n\t\t\tq[j][r[j]].first = min(len2-d[j], q[j][r[j]].first);\n\t\t\twhile (l[j^1] <= r[j^1] && q[j^1][l[j^1]].first+d[j^1] <= len1-len2)\n\t\t\t\tl[j^1]++;\n\t\t\td[j^1] -= len1-len2;\n\t\t}else{\n\t\t\tconst int j = (i&1)^1;\n\t\t\td[j] += len2-len1;\n\t\t\tif (len2 > len1)\n\t\t\t\tq[j][--l[j]] = make_pair(len2-len1-d[j], i);\n\t\t}\n\t\tconst int j = i&1;\n\t\twhile (p <= Q && b[p].first <= a[i+1]){\n\t\t\tif (b[p].first <= a[i]){\n\t\t\t\tp++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst pair<ll, int> _1(b[p].first-a[i]-d[j], 0), _2(a[i+1]-b[p].first-d[j^1], 0);\n\t\t\tconst int res1 = lower_bound(q[j]+l[j], q[j]+r[j]+1, _1)-q[j];\n\t\t\tconst int res2 = lower_bound(q[j^1]+l[j^1], q[j^1]+r[j^1]+1, _2)-q[j^1];\n\t\t\tans[b[p].second] = i-max(q[j][res1].second, q[j^1][res2].second);\n\t\t\tp++;\n\t\t}\n\t}\n\tfor (int i = 1; i <= Q; i++)\n\t\twrite(ans[i]), putchar('\\n');\n\tfwrite(obuf, O-obuf, 1, stdout);\n\treturn 0;\n}\n```",
        "postTime": 1633514516,
        "uid": 171288,
        "name": "Tony2",
        "ccfLevel": 9,
        "title": "P7894 \u9898\u89e3"
    }
]
[
    {
        "content": "# **\u8fd9\u9898\u53ef\u4ee5\u7528\u8fed\u4ee3\u52a0\u6df1\u641c\u7d22\u6765\u505a**\n\n\n------------\n\n####  \u7528ans\u679a\u4e3e\u591a\u5c11\u6b65\u53ef\u4ee5\u8fbe\u5230\u68cb\u5c40\uff0c\u7136\u540e\u518ddfs\uff0c\u82e5\u8d85\u8fc7ans\u5c31\u8fd4\u56de\uff0c\u4e00\u76f4\u5230\u53ef\u79fb\u52a8\u5230\u76ee\u6807\u68cb\u5c40\u4e3a\u6b62\u3002\n\u8fd9\u6837\u5c31\u4e0d\u4f1a\u8d85\u65f6\u4e86\u3002\u3002\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<cstdlib>\n#include<algorithm>\nusing namespace std;\nint a[11][11],ans;\nint fkx[5]={0,-1,1,0,0},\n\tfky[5]={0,0,0,-1,1};\nint check(){//\u67e5\u770b\u662f\u5426\u5230\u76ee\u6807\u68cb\u5c40\n\tfor(int i=1;i<=4;i++){\n        if(a[i][1]==a[i][2]&&a[i][2]==a[i][3]&&a[i][3]==a[i][4]) return 1;\n        if(a[1][i]==a[2][i]&&a[2][i]==a[3][i]&&a[3][i]==a[4][i]) return 1;\n    }\n    if(a[1][1]==a[2][2]&&a[2][2]==a[3][3]&&a[3][3]==a[4][4]) return 1;\n    if(a[1][4]==a[2][3]&&a[2][3]==a[3][2]&&a[3][2]==a[4][1]) return 1;\n    return 0;\n}\nint dfs(int x,int y,int xx,int yy,int color,int teg){//color\uff1a\u4e0a\u4e00\u7ec4\u7684\u989c\u8272\uff0cteg\uff1a\u7b2c\u51e0\u5c42\n\tif(ans==teg){\n\t\tif(check()) return 1;\n\t\telse return 0;\n\t}\n\tfor(int i=1;i<=4;i++){\n\t\tint dx=fkx[i]+x;\n\t\tint dy=fky[i]+y;\n\t\tint ddx=fkx[i]+xx;\n\t\tint ddy=fky[i]+yy;\n\t\tif(dx>0&&dx<=4&&dy>0&&dy<=4&&a[dx][dy]!=color){\n\t\t\tswap(a[x][y],a[dx][dy]);\n\t\t\tif(dfs(dx,dy,xx,yy,(color==1?2:1),teg+1)) return 1;;\n\t\t\tswap(a[dx][dy],a[x][y]);\n\t\t}\n\t\tif(ddx>0&&ddx<=4&&ddy>0&&ddy<=4&&a[ddx][ddy]!=color){\n\t\t\tswap(a[xx][yy],a[ddx][ddy]);\n\t\t\tif(dfs(x,y,ddx,ddy,(color==1?2:1),teg+1)) return 1;\n\t\t\tswap(a[ddx][ddy],a[xx][yy]);\n\t\t}\n\t}\n\treturn 0; \n}\nint main(){\n\tint i,j,fx1=0,fy1=0,fx2=0,fy2=0;\n\tchar c;\n\tfor(i=1;i<=4;i++){\n\t\tfor(j=1;j<=4;j++){\n\t\t\tcin>>c;\n\t\t\tif(c=='B') a[i][j]=1;\n\t\t\tif(c=='W') a[i][j]=2;\n\t\t\tif(c=='O') a[i][j]=0;\n\t\t\tif(a[i][j]==0&&!fx1) fx1=i,fy1=j;\n            else if(a[i][j]==0) fx2=i,fy2=j;\n\t\t}\n\t}\n    //\u679a\u4e3e\u591a\u5c11\u6b65\u53ef\u5230\u8fbe\u68cb\u5c40\n\tfor(ans=1;ans<=0x3f3f3f;ans++){\n   \t //\u5148\u9ed1\u518d\u767d\uff0c\u6ce8\u610f\u987a\u5e8f\n\t\tif(dfs(fx1,fy1,fx2,fy2,1,0)) break;\n\t\tif(dfs(fx1,fy1,fx2,fy2,2,0)) break;\n\t}\n\tcout<<ans;\n\treturn 0; \n}\n```",
        "postTime": 1532752540,
        "uid": 72122,
        "name": "Xiao_Mi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "\u5927\u4f6c\u7684\u9898\u89e3\u90fd\u597d\u66b4\u529b\u2026\u2026\u5404\u79cd\u6211\u6ca1\u89c1\u8fc7\u7684\u641c\u7d22\u65b9\u6cd5\n\n\u9898\u76ee\u5c31\u662f\u5f88\u666e\u901a\u7684\u7206\u641c\u5566\uff0c\u72b6\u6001\u8868\u793a\u4e5f\u6ca1\u4ec0\u4e48\u96be\u5ea6\u3002\u56e0\u4e3a\u9898\u76ee\u8981\u6c42\u641c\u7d22\u6df1\u5ea6\u6700\u5c0f\uff0c\u6240\u4ee5\u76f4\u63a5\u4f7f\u7528\u4f20\u7edf\u7684bfs\u5c31\u884c\n\n\u8fd9\u7c7b\u79fb\u52a8\u68cb\u5b50\u7684\u9898\u90fd\u6709\u4e00\u4e2a\u5171\u6027\uff1a\u5c06\u68cb\u5b50\u79fb\u52a8\u5230\u7a7a\u683c\uff0c\u672c\u8d28\u662f\u76f4\u63a5\u79fb\u52a8\u7a7a\u683c\u3002\n\n\u6211\u7684\u72b6\u6001\u8bb0\u5f55\u4e86\u68cb\u76d8\u7684\u989c\u8272\uff083\u79cd\uff0c\u9ed1\u767d\u5206\u522b\u4e3a0\u548c1\u65b9\u4fbf\u7528\u5f02\u6216\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\uff09\uff0c\u7a7a\u683c\u7684\u4f4d\u7f6e\uff08\u4f7f\u641c\u7d22\u4e0d\u76f2\u76ee\uff09\uff0c\u64cd\u4f5c\u6b21\u6570\uff0c\u4e0a\u4e00\u4e2a\u79fb\u52a8\u7684\u68cb\u5b50\u989c\u8272\uff08\u56e0\u4e3a\u9ed1\u767d\u90fd\u53ef\u5148\u624b\uff09\u3002\u672c\u60f3\u7528\u72b6\u538b\u8868\u793a\u68cb\u76d8\uff0c\u4f46\u60f3\u5230\u8fd8\u6709\u7a7a\u683c\uff0c\u5c31\u653e\u5f03\u4e86\u3002\n\n\u641c\u7d22\u6ca1\u5565\u96be\u5ea6\uff0c\u72b6\u6001\u5c01\u88c5\u8fdbstruct\uff0c\u7136\u540e\u8fdb\u4e00\u6b65\u641c\u7d22\u65f6\u7528\u8d4b\u503c\u590d\u5236\u51fa\u65b0\u72b6\u6001\uff0c\u518d\u4fee\u6539\u4e00\u4e0b\uff0cpush\u8fdb\u961f\u5217\u8fdb\u884c\u3002\n\n\uff08\u6211\u81ea\u5df1\u633a\u8ba8\u538c\u5728\u68cb\u76d8\u5f88\u5c0f\u7684\u65f6\u5019\u4e0d\u5229\u7528\u6570\u7ec4\u4e0b\u68070\uff09\n\n```cpp\n#include <cstdio>\n#include <queue>\nusing namespace std;\nconst int dx[]={0,1,0,-1},dy[]={-1,0,1,0};\nstruct state {\n\tint a[4][4];\n\tint x[2],y[2]; //\u7a7a\u683c\u4f4d\u7f6e\n\tint last; //\u4e0a\u4e00\u4e2a\u662f\u8c01\u4e0b\n\tint t; //\u6b65\u6570\n\tbool check() {\n\t\tfor (register int i=0;i<4;i++) {\n\t\t\tif (a[i][0]==a[i][1] && a[i][1]==a[i][2] && a[i][2]==a[i][3]) return true;\n\t\t\tif (a[0][i]==a[1][i] && a[1][i]==a[2][i] && a[2][i]==a[3][i]) return true;\n\t\t}\n\t\tif (a[0][0]==a[1][1] && a[1][1]==a[2][2] && a[2][2]==a[3][3]) return true;\n\t\tif (a[3][0]==a[2][1] && a[2][1]==a[1][2] && a[1][2]==a[0][3]) return true;\n\t\treturn false;\n\t}\n} ini;\ninline void swap(int &a,int &b) {\n\ta^=b,b^=a,a^=b;\n}\nint bfs() {\n\tqueue<state> q;\n\tstate i1=ini,i2=ini;\n\ti1.last=0, i2.last=1;\n\tq.push(i1);\n\tq.push(i2);\n\twhile (!q.empty()) {\n\t\tstate cur=q.front();\n\t\tq.pop();\n\t\tfor (int p=0;p<2;p++) { //\u54ea\u4e2a\u7a7a\u683c\n\t\t\tint i=cur.x[p],j=cur.y[p];\n\t\t\tfor (int k=0;k<4;k++) {\n\t\t\t\tint ii=i+dx[k],jj=j+dy[k];\n\t\t\t\tif (ii>=0 && ii<4 && jj>=0 && jj<4 && cur.a[ii][jj]!=2 && cur.a[ii][jj]!=cur.last) {\n\t\t\t\t\tstate nxt=cur;\n\t\t\t\t\tswap(nxt.a[i][j],nxt.a[ii][jj]); //\u4ea4\u6362\u989c\u8272\n\t\t\t\t\tnxt.x[p]=ii, nxt.y[p]=jj; //\u79fb\u52a8\u7a7a\u683c\n\t\t\t\t\tnxt.last^=1;\n\t\t\t\t\tnxt.t=cur.t+1;\n\t\t\t\t\tif (nxt.check()) return nxt.t;\n\t\t\t\t\tq.push(nxt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn -1;\n}\nint main() {\n\tint flg=false;\n\tfor (int i=0;i<4;i++) {\n\t\tchar buf[10];\n\t\tscanf(\"%s\",buf);\n\t\tfor (int j=0;j<4;j++) {\n\t\t\tchar x=buf[j];\n\t\t\tini.a[i][j]=x=='O' ? 2 : x=='W' ? 0 : 1;\n\t\t\tif (x=='O') {\n\t\t\t\tif (!flg) ini.x[0]=i,ini.y[0]=j;\n\t\t\t\telse ini.x[1]=i,ini.y[1]=j;\n\t\t\t}\n\t\t}\n\t}\n\tint ans=bfs();\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1533566257,
        "uid": 32771,
        "name": "\u554a\u561e\u561e\u561e\u561e",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "```cpp\n//\u56e0\u4e3a\u6570\u636e\u8303\u56f4\u6bd4\u8f83\u5c0f\uff0c\u8fd9\u9053\u9898\u53ef\u4ee5\u7528\u5e7f\u641c\n//\u6ce8\u610f\u5148\u5904\u7406\u51fa\u9ed1\u5b50\u5148\u624b\u548c\u767d\u5b50\u5148\u624b\u7684\u60c5\u51b5\n//\u5f00\u7ed3\u6784\u4f53\u5b58\u56fe\u548c\u6b65\u6570\uff0c\u518d\u8bb0\u5f55\u4e00\u4e0b\u5f53\u524d\u72b6\u6001\u79fb\u52a8\u7684\u68cb\u5b50\u989c\u8272\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\n#define maxn 10010\n#define inf 1000000007\n#define ll long long \nusing namespace std;\nint n,m,ans=inf;\nint dx[5]={0,0,1,-1,0};\nint dy[5]={0,1,0,0,-1}; \nstruct nn\n{\n    int a[5][5];\n    int color;//\u8fd9\u4e00\u6b65\u4ea4\u6362\u7684\u68cb\u5b50\u989c\u8272 \n    int step;//\u8bb0\u5f55\u6b65\u6570 \n}t;\nqueue<nn>q;\nbool check(nn f)//\u5224\u65ad\u5408\u6cd5\u89e3 \n{\n    for(int i=1;i<=4;i++)\n    {\n        if(f.a[i][1]==f.a[i][2]&&f.a[i][1]==f.a[i][3]&&f.a[i][1]==f.a[i][4])return true;//\u5904\u7406\u884c \n        if(f.a[1][i]==f.a[2][i]&&f.a[1][i]==f.a[3][i]&&f.a[1][i]==f.a[4][i])return true;//\u5904\u7406\u5217 \n    }\n    if(f.a[1][1]==f.a[2][2]&&f.a[1][1]==f.a[3][3]&&f.a[1][1]==f.a[4][4])return true;//\u5904\u7406\u5bf9\u89d2\u7ebf \n    if(f.a[1][4]==f.a[3][2]&&f.a[1][4]==f.a[2][3]&&f.a[1][4]==f.a[4][1])return true;\n    return false;\n}\nvoid init()//\u5904\u7406\u4e00\u5f00\u59cb\u7684\u68cb\u5b50\u989c\u8272\n{\n    t.step=0;\n    t.color=2;\n    for(int i=1;i<=4;i++)\n    for(int j=1;j<=4;j++)\n    {\n        if(t.a[i][j]==2)\n        {\n            for(int k=1;k<=4;k++)\n            {\n                int x=i+dx[k];\n                int y=j+dy[k];\n                if(t.a[x][y]==2)continue; \n                if(x>=1&&x<=4&&y>=1&&y<=4)//\u6ce8\u610f\u8fb9\u754c \n                {\n                    nn c=t;\n                    c.color=t.a[x][y];\n                    c.step=1;\n                    swap(c.a[i][j],c.a[x][y]);//\u79fb\u52a8\u68cb\u5b50 \n                    q.push(c);\n                }\n            }\n        }\n    }\n}\nvoid bfs()//\u5e7f\u641c\u6a21\u677f \n{\n    while(!q.empty())\n    {\n        nn b=q.front();\n        q.pop();\n        if(check(b))\n        {\n            ans=b.step;\n            return ;\n        }\n        for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)\n        {\n            if(b.a[i][j]==2)\n            {\n                for(int k=1;k<=4;k++)\n                {\n                    int x=i+dx[k];\n                    int y=j+dy[k];\n                    if(x>=1&&x<=4&&y>=1&&y<=4&&b.a[x][y]==(b.color^1))//\u9ed1\u767d\u4ea4\u66ff\u79fb\u52a8 \n                    {\n                        nn c=b;\n                        swap(c.a[i][j],c.a[x][y]);//\u79fb\u52a8\u68cb\u5b50 \n                        c.color=b.color^1;//\u5982\u679c\u4e0a\u4e00\u6b65\u8d70\u7684\u662f\u9ed1\uff0c\u8fd9\u4e00\u6b65\u5c31\u662f\u767d\uff0c\u4e0a\u4e00\u6b65\u662f\u767d\uff0c\u8fd9\u4e00\u6b65\u662f\u9ed1\u3002 \n                        c.step=b.step+1;//\u6b65\u6570\u52a0\u4e00 \n                        q.push(c);//\u5c06\u5f53\u524d\u72b6\u6001\u5165\u961f \n                    }\n                }\n            }\n        }\n    }\n}\nint main()\n{\n    int x,y,z;\n    char s[10];\n    for(int i=1;i<=4;i++)\n    {\n        scanf(\"%s\",s+1);\n        for(int j=1;j<=4;j++)//\u5904\u7406\u56fe\uff0c\u4fbf\u4e8e\u5e7f\u641c \n        {\n            if(s[j]=='B')\n            {\n                t.a[i][j]=1;\n            }\n            if(s[j]=='W')\n            {\n                t.a[i][j]=0;\n            }\n            if(s[j]=='O')\n            {\n                t.a[i][j]=2;\n            }\n        }\n    }\n    init();\n    bfs();\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1504340594,
        "uid": 35527,
        "name": "\u4e1b\u6797",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "\u5509\u697c\u4e0b\u8981\u4e48\u5c31\u4e0d\u72b6\u538b\uff0c\u8981\u4e48\u5c313\u8fdb\u5236\u72b6\u538b\uff0c\u8981\u4e48\u5c31\u522b\u7684\u4e71\u4e03\u516b\u7cdf\u7684\u72b6\u538b\uff0c\u96be\u9053\u4f60\u4eec\u5c31\u56e0\u4e3a\u67093\u4e2a\u72b6\u6001\u5c31\u653e\u5f03\u4f7f\u7528\u4f4d\u8fd0\u7b972\u8fdb\u5236\u72b6\u538b\u4e86\u5417\uff1f\n\n\u5176\u5b9e\u8fd9\u9898\u53ef\u4ee5\u76f4\u63a5\u4e8c\u8fdb\u5236\u72b6\u538b\u505a\uff0c1\u8868\u793a\u9ed1\u68cb\uff0c0\u8868\u793a\u767d\u68cb\uff0c\u53e6\u5916\u8bb0\u5f55\u4e0b2\u4e2a\u7a7a\u70b9\u7684\u4f4d\u7f6e\u5c31\u884c\u4e86\u3002\n\u5177\u4f53\u770b\u4ee3\u7801\uff08\u5197\u957f\uff09\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <queue>\n#include <set>\n#include <map>\n#include <vector>\n#include <stack>\n#include <list>\n#define rep(i,m,n) for(int i=m;i<=n;++i)\n#define dop(i,m,n) for(int i=m;i>=n;--i)\n#define lowbit(x) (x&(-x))\n#define ll long long\n#define INF 2147483647\n#define re register\n#define Open(s) freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout);\n#define Close fclose(stdin);fclose(stdout);\n#define pause system(\"pause\");\nusing namespace std;\ninline int read(){\n    int s = 0, w = 1;\n    char ch = getchar();\n    while(ch < '0' || ch > '9'){if(ch == '-')w = -1;ch = getchar();}\n    while(ch >= '0' && ch <= '9') s = s * 10 + ch - '0',ch = getchar();\n    return s * w;\n}\nchar a[6][6];\nstruct Node{\n    int x[2], y[2], s, time, who; //x,y\u6570\u7ec4\u8bb0\u5f552\u4e2a\u7a7a\u70b9\u7684\u4f4d\u7f6e\uff0cs\u8868\u793a\u5f53\u524d\u7684\u72b6\u6001\uff08\u4e8c\u8fdb\u5236\uff09\uff0cwho\u8868\u793a\u5230\u8c01\u8d70\u4e86\n}start, begin, now, tmp;\nint getHash(){  //\u68cb\u76d8\u8f6c\u4e8c\u8fdb\u5236\u72b6\u6001\n    int ans = 0;\n    rep(i, 1, 4) rep(j, 1, 4) if(a[i][j] == 'B') ans |= (1 << ( ((i - 1) << 2) + j - 1) );\n    return ans;\n}\nqueue <Node> q;\nbool Win(Node x){ //\u5224\u8d62\u51fd\u6570\n    int s = x.s;\n    //\u5224\u65ad\u6709\u6ca1\u6709\u9ed1\u70b9\u56db\u5b50\u8fde\u68cb\n    if( s&1&&s&(1<<4)&&s&(1<<8)&&s&(1<<12) || s&(1<<1)&&s&(1<<5)&&s&(1<<9)&&s&(1<<13) \n    || s&(1<<2)&&s&(1<<6)&&s&(1<<10)&&s&(1<<14) || s&(1<<3)&&s&(1<<7)&&s&(1<<11)&&s&(1<<15)\n    || s&1&&s&(1<<1)&&s&(1<<2)&&s&(1<<3) || s&(1<<4)&&s&(1<<5)&&s&(1<<6)&&s&(1<<7)\n    || s&(1<<8)&&s&(1<<9)&&s&(1<<10)&&s&(1<<11) || s&(1<<12)&&s&(1<<13)&&s&(1<<14)&&s&(1<<15)\n    || s&1&&s&(1<<5)&&s&(1<<10)&&s&(1<<15) || s&(1<<3)&&s&(1<<6)&&s&(1<<9)&&s&(1<<12))\n      return true;\n    //\u628a\u7a7a\u70b9\u7684\u4f4d\u7f6e\u8d4b\u503c\u4e3a1\n    s|=1<<(((x.x[0]-1)<<2)+x.y[0]-1); s|=1<<(((x.x[1]-1)<<2)+x.y[1]-1);\n    //rep(i, 1, 4){ rep(j, 1, 4) printf(\"%d \", (s>>(((i-1)<<2)+j-1))&1); printf(\"\\n\"); }\n    //\u5224\u65ad\u767d\u70b9\u6709\u6ca1\u6709\u56db\u5b50\u8fde\u68cb\n    if( (s^1)&1&&(s^(1<<4))&(1<<4)&&(s^(1<<8))&(1<<8)&&(s^(1<<12))&(1<<12) || (s^(1<<1))&(1<<1)&&(s^(1<<5))&(1<<5)&&(s^(1<<9))&(1<<9)&&(s^(1<<13))&(1<<13) \n    || (s^(1<<2))&(1<<2)&&(s^(1<<6))&(1<<6)&&(s^(1<<10))&(1<<10)&&(s^(1<<14))&(1<<14) || (s^(1<<3))&(1<<3)&&(s^(1<<7))&(1<<7)&&(s^(1<<11))&(1<<11)&&(s^(1<<15))&(1<<15)\n    || (s^1)&&(s^(1<<1))&(1<<1)&&(s^(1<<2))&(1<<2)&&(s^(1<<3))&(1<<3) || (s^(1<<4))&(1<<4)&&(s^(1<<5))&(1<<5)&&(s^(1<<6))&(1<<6)&&(s^(1<<7))&(1<<7)\n    || (s^(1<<8))&(1<<8)&&(s^(1<<9))&(1<<9)&&(s^(1<<10))&(1<<10)&&(s^(1<<11))&(1<<11) || (s^(1<<12))&(1<<12)&&(s^(1<<13))&(1<<13)&&(s^(1<<14))&(1<<14)&&(s^(1<<15))&(1<<15)\n    || (s^1)&(1)&&(s^(1<<5))&(1<<5)&&(s^(1<<10))&(1<<10)&&(s^(1<<15))&(1<<15) || (s^(1<<3))&(1<<3)&&(s^(1<<6))&(1<<6)&&(s^(1<<9))&(1<<9)&&(s^(1<<12))&(1<<12))\n      return true;\n    return false;\n}\nint l[] = { 233, -1, 1, 0, 0 }, r[] = { 666, 0, 0, -1, 1 }, id, X, Y, kong, v[20000010];\nint getHash(Node x){   //\u4e0d\u8981hack\u6211\n    return x.s + x.x[0] * 10007 + x.x[1] * 107 + x.y[1] * 677 + x.y[0] * 97;\n}\nint main(){\n    rep(i, 1, 4)\n       rep(j, 1, 4){\n          cin>>a[i][j];\n          if(a[i][j] == 'O') //\u8bb0\u5f55\u7a7a\u70b9\u4f4d\u7f6e\n            if(!start.x[0]) start.x[0] = i, start.y[0] = j;\n            else start.x[1] = i, start.y[1] = j;\n       }\n    start.s = getHash();\n    start.time = 0;\n    begin = start;\n    start.who = 0;\n    begin.who = 1;\n    q.push(start);\n    q.push(begin);\n    v[getHash(begin)] = v[getHash(start)] = 1;\n    while(!q.empty()){  //bfs\n      Node now = q.front();\n      q.pop();\n      rep(i, 0, 1){\n         rep(j, 1, 4){\n            X = now.x[i] + l[j]; Y = now.y[i] + r[j];\n            if(X <= 0 || X > 4 || Y <= 0 || Y > 4 || X == now.x[i^1] && Y == now.y[i^1]) continue; //\u4e0d\u80fd\u51fa\u754c\uff0c\u4e5f\u4e0d\u80fd\u8d70\u5230\u53e6\u5916\u4e00\u4e2a\u7a7a\u70b9\n            id = ((X - 1) << 2) + Y - 1;\n            kong = ((now.x[i] - 1) << 2) + now.y[i] - 1;\n            if(((now.s >> id) & 1) == now.who){ //\u5982\u679c\u662f\u5230\u8fd9\u4e2a\u68cb\u8d70\n              tmp = now;\n              tmp.s &= ~(1 << id);      //\u4ea4\u6362\n              tmp.s |= tmp.who << kong; //\u4f4d\u7f6e\n              tmp.x[i] = X;\n              tmp.y[i] = Y;\n              if(v[getHash(tmp)]) continue;\n              v[getHash(tmp)] = 1;\n              tmp.time++;\n              tmp.who^=1;\n              if(Win(tmp)){ \n                printf(\"%d\\n\", tmp.time); \n                return 0; \n              }\n              q.push(tmp);\n            }\n         }\n      }\n    }\n    return 0;\n}\n\n```",
        "postTime": 1532145141,
        "uid": 61834,
        "name": "Huami360",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "#### \u8fd9\u9898\u6211\u4f7f\u7528\u4e86\u8fed\u4ee3\u52a0\u6df1\u6765\u505a\u3002\n\n\u4e3a\u4ec0\u4e48\u4f1a\u60f3\u5230\u8fed\u4ee3\u52a0\u6df1\u5462\uff1f\u56e0\u4e3a\u8fd9\u9053\u9898\u8981\u6211\u4eec\u6c42\u6700\u5c11\u6b65\u6570\uff0c\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u6b65\u6570\u4f5c\u4e3a\u6df1\u5ea6\uff0c\u4e00\u5c42\u5c42\u641c\u4e0b\u53bb\u3002\n\n\u8fed\u4ee3\u52a0\u6df1\u7684\u9898\u90fd\u5dee\u4e0d\u591a\uff0c\u6bd4\u5982\u8bf4\n\n[P1032](https://www.luogu.com.cn/problemnew/show/P1032)\n\n[P2324](https://www.luogu.com.cn/problemnew/show/P2324)\n\n\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e9b\u9898\u76ee\u90fd\u6709\u201c\u6700\u5c11\u201d\u4e4b\u7c7b\u7684\u5b57\u773c\u3002\n\n\u4f60\u53ef\u80fd\u4f1a\u95ee\uff1a\u5982\u679c\u5f53\u524d\u6df1\u5ea6\u641c\u7d22\u5931\u8d25\u4e86\uff0c\u4e0b\u6b21\u4f1a\u518d\u641c\u4e00\u904d\u521a\u641c\u8fc7\u7684\u72b6\u6001\u4e0d\u662f\u5728\u6d6a\u8d39\u5417\uff1f\n\n\u4e8b\u5b9e\u4e0a\uff0c\u786e\u5b9e\u6d6a\u8d39\u4e86\uff0c\u4f46\u662f\u641c\u7d22\u7684\u72b6\u6001\u91cf\u662f\u6307\u6570\u7ea7\u589e\u957f\u7684\uff0c\u5bf9\u4e8e\u6df1\u5ea6 $d$\uff0c\u4e5f\u8bb8\u5b83\u7684\u72b6\u6001\u91cf\u6bd4\u524d\u9762\u7684\u52a0\u8d77\u6765\u90fd\u591a\u3002\n\n\u90a3\u4e48\u8fd9\u9053\u9898\u4f7f\u7528\u6b65\u6570\u4f5c\u4e3a\u6df1\u5ea6\uff0c\u4ee3\u7801\u5c31\u5f88\u597d\u5199\u4e86\uff08\u8981\u6ce8\u610f\u662f\u9ed1\u767d\u8f6e\u6d41\u4e0b\uff0c\u6240\u4ee5\u8981\u5224\u65ad\uff0c\u5e76\u4e14\u8981\u641c\u7d22\u662f\u767d\u5148\u5f00\u59cb\u8fd8\u662f\u9ed1\u5148\u5f00\u59cb\u7684\u60c5\u51b5\uff09\n\ncode\uff1a\n```cpp\ninclude\"bits/stdc++.h\"\nusing namespace std;\nint a[10][10],d,xx1,yy1,xx2,yy2;\nint fx[4]={0,0,1,-1},fy[4]={1,-1,0,0};\ninline bool check(){\n\tfor(register int i=1;i<=4;++i)\n\tif(a[i][1]==a[i][2]&&a[i][2]==a[i][3]&&a[i][3]==a[i][4]) return true;\n    \n\tfor(register int j=1;j<=4;++j)\n\tif(a[1][j]==a[2][j]&&a[2][j]==a[3][j]&&a[3][j]==a[4][j]) return true;\n    \n\tif(a[1][1]==a[2][2]&&a[2][2]==a[3][3]&&a[3][3]==a[4][4]) return true;\n    \n\tif(a[4][1]==a[3][2]&&a[3][2]==a[2][3]&&a[2][3]==a[1][4]) return true;\n    \n\treturn false;\n}\nbool dfs(int ax\uff0cint ay\uff0cint bx\uff0cint by\uff0cint col\uff0cint dep){\n\tif(dep>d)\n\t{\n\t\tif(check()) return true;\n\t\treturn false;\n\t}\n\tfor(register int i=0;i<4;++i)\n\t{\n\t\tint nx = ax + fx[i];\n\t\tint ny = ay + fy[i];\n\t\tif(nx>0&&nx<=4&&ny>0&&ny<=4&&a[nx][ny]==col)\n\t\t{\n\t\t\tswap(a[ax][ay],a[nx][ny]);\n\t\t\tif(dfs(nx,ny,bx,by,(col==1)?2:1,dep+1)) return true;\n\t\t\tswap(a[ax][ay],a[nx][ny]);\n\t\t}\n\t}\n\tfor(register int i=0;i<4;++i)\n\t{\n\t\tint nx = bx + fx[i];\n\t\tint ny = by + fy[i];\n\t\tif(nx>0&&nx<=4&&ny>0&&ny<=4&&a[nx][ny]==col)\n\t\t{\n\t\t\tswap(a[bx][by],a[nx][ny]);\n\t\t\tif(dfs(ax,ay,nx,ny,(col==1)?2:1,dep+1)) return true\uff1b\n\t\t\tswap(a[bx][by],a[nx][ny]);\n\t\t}\n\t}\n\treturn false;\n}\nint mian()\n{\n\tfor(register int i=1;i<=4;++i)\n\tfor(register int j=1;j<=4;++j)\n\t{\n\t\tchar ch;\n\t\tcin>>ch;\n\t\tif(ch=='B') a[i][j]=1\uff1b\n\t\telse if(ch=='W') a[i][j]=2;\n\t\telse \n\t\t{\n\t\t\tif(xx1) xx2=i,yy2=j;\n\t\t\telse xx1=i,yy1=j;\n\t\t\ta[i][j]=0;\n\t\t}\n\t}\n\tfor(d=1;;d++)\n\t{\n\t\tif(dfs(xx1,yy1,xx2,yy2,1,1)) break;\n\t\tif(dfs(xx1,yy1,xx2,yy2,2,1)) break;\n\t}\n\tcout<<d;\n\treturn 0\uff1b\n}\n```\n",
        "postTime": 1581928957,
        "uid": 135839,
        "name": "Fairicle",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "\u4e00\u770b\u9898\uff0c\u8bf6\uff1f\u8fd9\u4e0d\u662f\u5e7f\u641c\u5417\uff1f\uff1f\uff1f\n\n\u7136\u540e\u5199\uff0c\u8f93\u51fa\u4e86\u4e2a\u4ec0\u4e48\u554a\n\n\u7136\u540e\n\n\u7136\u540e\u5c31\u7384\u5b66AC\u4e86\n\n\n\n\n# AC Code:\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define inf 0x3f3f3f3f\nusing namespace std;\nchar a[5][5];\nint ans,Ox1=0,Oy1,Ox2,Oy2,dir[4][2]={{-1,0},{1,0},{0,-1},{0,1}};\n\nbool check() //\u68c0\u67e5\u5f53\u524d\u68cb\u76d8\u662f\u5426\u6784\u6210\u56db\u5b50\u8fde\u68cb\n{\n  // 4*4\u7684\u68cb\u76d8\uff0c\u53ea\u6709\u884c\u3001\u5217\u3001\u53cc\u659c\u7ebf\u56db\u79cd\u65b9\u5f0f\n  for(int i=1;i<=4;i++)\n  {\n    if (a[i][1]==a[i][2]&&a[i][1]==a[i][3]&&a[i][1]==a[i][4]) return 1;\n    if (a[1][i]==a[2][i]&&a[1][i]==a[3][i]&&a[1][i]==a[4][i]) return 1;\n  }\n  if (a[1][1]==a[2][2]&&a[1][1]==a[3][3]&&a[1][1]==a[4][4]) return 1;\n  if (a[1][4]==a[2][3]&&a[1][4]==a[3][2]&&a[1][4]==a[4][1]) return 1;\n  return 0;\n}\n\nbool can(int x,int y,char p)\n{\n  return x>=1&&x<=4&&y>=1&&y<=4&&a[x][y]!=p;\n}\n\nbool dfs(int x1,int y1,int x2,int y2,char pre,int step) //pre\u8868\u793a\u5148\u624b\u989c\u8272\n{\n    // dfs(Ox1,Oy1,Ox2,Oy2,'W',0)\n  if (step==ans) //\u641c\u7d22\u6df1\u5ea6\u8fbe\u5230\u4e0a\u9650\uff0c\u505c\u6b62\n  {\n    if (check()) return 1;\n    else return 0;\n  }\n  // \u5bf9\u56db\u4e2a\u65b9\u5411\u904d\u5386\n  for(int i=0;i<4;i++)\n  {\n    int nx1,ny1,nx2,ny2;\n    nx1=x1+dir[i][0];\n    ny1=y1+dir[i][1];\n    nx2=x2+dir[i][0];\n    ny2=y2+dir[i][1];\n    // \u5982\u679c\u5f53\u524d\u5750\u6807\u4e3a\u6709\u6548\u4f4d\u7f6e\n    if (can(nx1,ny1,pre))  \n    {\n      swap(a[x1][y1],a[nx1][ny1]); //\u4ea4\u6362\n      if (dfs(nx1,ny1,x2,y2,(pre=='B'?'W':'B'),step+1)) return 1; // \u8f6e\u6d41\n      swap(a[x1][y1],a[nx1][ny1]);\n    }\n    if (can(nx2,ny2,pre))\n    {\n      swap(a[x2][y2],a[nx2][ny2]);\n      if (dfs(x1,y1,nx2,ny2,(pre=='B'?'W':'B'),step+1)) return 1;\n      swap(a[x2][y2],a[nx2][ny2]);\n    }\n  }\n  return 0;\n}\n\nint main()\n{\n    // \u8bfb\u53d6\u68cb\u76d8\n  for(int i=1;i<=4;i++)\n  {\n    char s[5];\n    scanf(\"%s\",s);\n    for(int j=1;j<=4;j++)\n    {\n      a[i][j]=s[j-1];\n      // \u5206\u522b\u8bb0\u5f55\u4e0bO\u7684\u4f4d\u7f6e\n      if (a[i][j]=='O')\n      {\n        if (Ox1==0)\n            Ox1=i,Oy1=j;\n        else\n            Ox2=i,Oy2=j;\n      }\n    }\n  }\n\n  for(ans=1;ans<=inf;ans++) //ans\u679a\u4e3e\u6df1\u5ea6\u4e0a\u9650\n  {\n    if (dfs(Ox1,Oy1,Ox2,Oy2,'W',0)) break; //\u9ed1\u5148\u624b\n    if (dfs(Ox1,Oy1,Ox2,Oy2,'B',0)) break; //\u767d\u5148\u624b\n  }\n\n  printf(\"%d\",ans);\n\n  return 0;\n}\n```\n",
        "postTime": 1575809142,
        "uid": 220889,
        "name": "Wind_Shear",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "### \u8fed\u4ee3\u52a0\u6df1DFS\n~~\u6211\u4e2a\u4eba\u6bd4\u8f83\u559c\u6b22\u53ebIDFS~~\n#### \u8bb2\u4e00\u4e0b\u641c\u7d22\u5927\u4f53\u601d\u8def\n\u53d1\u73b0\u6700\u7ec8\u79fb\u52a8\u6b65\u6570\u5e94\u8be5\u4f1a\u5f88\u5c11\uff0c~~\u6bd5\u7adf\u516b\u6570\u7801\u90fd\u80fd\u8fc7~~\uff0c\u6240\u4ee5\u9009\u4e86\u8fd9\u4e2a\u8fed\u4ee3\u52a0\u6df1\u7684dfs\uff0c\u5c31\u662f\u901a\u8fc7\u9650\u5236\u4e00\u6b21dfs\u7684\u6df1\u5ea6\uff0c\u6765\u4fdd\u8bc1\u4f60\u7684\u641c\u7d22\u4e0d\u4f1a\u5728\u641c\u5230\u5e95\u6216\u627e\u4e0d\u5230\u89e3\u7684\u60c5\u51b5\u4e0b\u8fd4\u56de\uff0c\u4ed6\u4f1a\u4ee5lim\u7684\u6df1\u5ea6\u9650\u5236\uff0c\u628a\u8fd9\u4e2a\u6df1\u5ea6\u80fd\u5230\u7684\u70b9\u90fd\u641c\u51fa\u6765\uff0c\u5224\u65ad\u53ef\u884c\uff0c\u753b\u6210\u56fe\u7684\u8bdd\u4f1a\u53d1\u73b0\u8fd9\u79cd\u641c\u7d22\u5c31\u50cf\u662f\u7ed3\u5408\u4e86BFS\u4e0eDFS\uff0c\u65e2\u6709\u5e7f\u5ea6\u4e5f\u6709\u6df1\u5ea6\n##### \u5b9e\u9645\u64cd\u4f5c\n\u5206\u6210\u4e24\u6b21\u8fed\u4ee3\u52a0\u6df1\uff0c\u7b2c\u4e00\u6b21\u4ece\u767d\u8272\u5f00\u59cb\u8d70\uff0c\u7b2c\u4e8c\u6b21\u4ece\u9ed1\u8272\u5f00\u59cb\u8d70\uff0c\u6216\u8005\u53cd\u8fc7\u6765\uff0c~~\u60a8\u968f\u610f\uff0c\uff0c\uff0c~~\uff0c\u7136\u540e\u4e24\u6b21\u53d6min\uff0c\u5b9e\u9645\u641c\u7d22\u7684\u65f6\u5019\uff0c\u5f53\u524d\u64cd\u4f5c\u9700\u8981\u548c\u4e0a\u4ece\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u6211\u4eec\u5b9a\u4e49IDFS(int dep,char col)\u8868\u793a\u5f53\u524d\u7684\u6df1\u5ea6\u4ee5\u53ca\u4e0a\u6b21\u7684\u989c\u8272\uff0c\u7136\u540e\u5c31\u80fd\u6109\u5feb\u7684\u641c\u7d22\u4e86\uff0c\u5224\u65ad\u5c31\u5199\u51e0\u4e2a\u5faa\u73af\u5224\u4e00\u4e0b\u5c31\u597d\n### \u4ee3\u7801\n```cpp\n//By AcerMo\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nchar a[5][5],b[5][5];\nint lim=1;\nint fx[4][2]={{-1,0},{1,0},{0,-1},{0,1}};\ninline bool che()\n{\n\tfor (int i=0;i<4;i++)\n\t{\n\t\tint s=0;\n\t\tfor (int k=1;k<4;k++)\n\t\ts+=(a[i][k]==a[i][k-1]);\n\t\tif (s==3) return 1;\n\t}\n\tfor (int i=0;i<4;i++)\n\t{\n\t\tint s=0;\n\t\tfor (int k=1;k<4;k++)\n\t\ts+=(a[k][i]==a[k-1][i]);\n\t\tif (s==3) return 1;\n\t}\n\tif (a[0][3]==a[1][2]&&a[1][2]==a[2][1]&&a[2][1]==a[3][0]) return 1;\n\tif (a[0][0]==a[1][1]&&a[1][1]==a[2][2]&&a[2][2]==a[3][3]) return 1;\n\treturn 0;\n}\ninline bool IDFS(int dep,char co)\n{\n\tif (dep==lim) return che();\n\tfor (int i=0;i<4;i++)\n\tfor (int k=0;k<4;k++)\n\tfor (int j=0;j<4;j++)\n\t{\n\t\tint x=i+fx[j][0];\n\t\tint y=k+fx[j][1];\n\t\tif (x<0||x>3||y<0||y>3||a[x][y]!='O'||a[i][k]==co) continue;\n\t\tswap(a[x][y],a[i][k]);\n\t\tif (IDFS(dep+1,a[x][y])) return 1;\n\t\tswap(a[x][y],a[i][k]);\n\t}\n\treturn 0;\n}\nsigned main()\n{\n\tfor (int i=0;i<4;i++) scanf(\"%s\",a[i]);\n\tfor (int i=0;i<4;i++)\n\tfor (int k=0;k<4;k++) \n\tb[i][k]=a[i][k]; \n\tfor (;!IDFS(0,'B');lim++);int ans=lim;lim=1;\n\tfor (int i=0;i<4;i++)\n\tfor (int k=0;k<4;k++)\n\ta[i][k]=b[i][k];\n\tfor (;!IDFS(0,'W');lim++);ans=min(ans,lim);\n\tcout<<ans;\n\treturn 0; \n}\n```",
        "postTime": 1538980231,
        "uid": 71558,
        "name": "AcerMo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "\u770b\u4e0b\u9762\u7684\u9898\u89e3\u6ca1\u6709\u5199\u72b6\u538b\u6216\u7528\u768410\u8fdb\u5236\uff0c\u7528long long\u5b58\u50a8\n\n\u6240\u4ee5\u6211\u60f3\u53d1\u4e00\u7bc73\u8fdb\u5236int\u5b58\u50a8\u7684\u72b6\u538b\n\n\u4e0b\u9762\u662f\u4ee3\u7801\u52a0\u6ce8\u91ca\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <queue>\nusing namespace std;\nint xs[10][10];//3\u8fdb\u5236\u8f6c\u6210\u4e8c\u7ef4\u6570\u7ec4\u7528\nint change(int x1,int y1,int x2,int y2){//\u4ea4\u6362(x1,y1),(x2,y2)\u4e24\u4e2a\u70b9\u5e76\u8fd4\u56de\u4ea4\u6362\u540e\u76843\u8fdb\u5236\u72b6\u6001\n    int p=0;\n    int t=xs[x1][y1];\n    xs[x1][y1]=xs[x2][y2];\n    xs[x2][y2]=t;\n    for(int i=0;i<4;i++)\n       for(int j=0;j<4;j++)\n          p=p*3+xs[i][j];\n    t=xs[x1][y1];\n    xs[x1][y1]=xs[x2][y2];\n    xs[x2][y2]=t;//\u628axs\u6570\u7ec4\u8fd8\u539f\n    return p;\n}\nbool checkx(int p){//\u5224\u65ad\u5f53\u524d\u60c5\u51b5\u662f\u5426\u4e3a\u76ee\u6807\u68cb\u5c40\n    for(int i=3;i>=0;i--)\n       for(int j=3;j>=0;j--){\n          xs[i][j]=p%3;\n          p/=3;\n       }\n    for(int i=0;i<4;i++){//\u6a2a\u6392\u76f8\u7b49\n       bool fl=true;\n       if(xs[i][0]==0)\n         fl=false;\n       for(int j=1;j<4;j++)\n          if(xs[i][j]!=xs[i][j-1]){\n            fl=false;\n            break;\n          }\n       if(fl)\n         return true;\n    }\n    for(int j=0;j<4;j++){//\u7ad6\u6392\u76f8\u7b49\n       bool fl=true;\n       if(xs[0][j]==0)\n         fl=false;\n       for(int i=1;i<4;i++)\n          if(xs[i][j]!=xs[i-1][j]){\n            fl=false;\n            break;\n          }\n       if(fl)\n         return true;\n    }\n    //\u5bf9\u89d2\u7ebf\u76f8\u7b49\n    if(xs[0][0]!=0&&xs[0][0]==xs[1][1]&&xs[1][1]==xs[2][2]&&xs[2][2]==xs[3][3])\n      return true;\n    if(xs[3][0]!=0&&xs[3][0]==xs[2][1]&&xs[2][1]==xs[1][2]&&xs[1][2]==xs[0][3])\n      return true;\n    return false;\n}\nstruct point{//\u5f53\u524d\u72b6\u6001\u7ed3\u6784\u4f53\n       int now;//\u5f53\u524d\u68cb\u5c40\n       int cou;//\u5f53\u524d\u6b65\u6570\n       int last;//\u4e0a\u6b21\u79fb\u52a8\u7684\u68cb\n};\n//(now)3== 0 \u7a7a\u5730  1 \u9ed1  2 \u767d\nqueue<point>s;//\u5e7f\u641c\u961f\u5217\nint main(){\n    int nowp=0;\n    char jun;\n    for(int i=0;i<4;i++)\n       for(int j=0;j<4;j++){\n          scanf(\"%c\",&jun);\n          if(jun!='B'&&jun!='W'&&jun!='O')\n            j--;\n          else\n          if(jun=='O')\n            nowp=nowp*3+0;\n          else\n          if(jun=='B')\n            nowp=nowp*3+1;\n          else\n          if(jun=='W')\n            nowp=nowp*3+2;\n       }\n    s.push((point){nowp,0,-1});//\u653e\u5165\u521d\u59cb\u72b6\u6001\n    while(!s.empty()){\n         point nowx=s.front();\n         s.pop();\n         if(checkx(nowx.now)&&nowx.cou!=0){//\u5982\u679c\u5230\u7684\u76ee\u6807\u68cb\u5c40\u5c31\u8f93\u51fa\n           cout<<nowx.cou;\n           return 0;\n         }\n         //\u56e0\u4e3achechx\u51fd\u6570\u5df2\u7ecf\u521d\u59cb\u5316\u8fc7xs\u6570\u7ec4\uff0c\u6b64\u5904\u4e0d\u7528\u518d\u6b21\u521d\u59cb\u5316\u7ed9change\u7528\n         for(int i=0;i<4;i++)\n            for(int j=0;j<4;j++)\n               if(xs[i][j]==0){//\u627e\u5230\u7a7a\u5730\uff0c\u4e0a\u4e0b\u5de6\u53f3\u79fb\u52a8\n                 if(i>0&&xs[i-1][j]!=nowx.last)//\u8bb0\u5f97\u5224\u65ad\u5f53\u524d\u68cb\u5b50\u4e0d\u662f\u4e0a\u6b21\u79fb\u52a8\u7684\u989c\u8272\u518d\u79fb\u52a8\n                   s.push((point){change(i,j,i-1,j),nowx.cou+1,xs[i-1][j]});\n                 if(i<3&&xs[i+1][j]!=nowx.last)\n                   s.push((point){change(i,j,i+1,j),nowx.cou+1,xs[i+1][j]});\n                 if(j>0&&xs[i][j-1]!=nowx.last)\n                   s.push((point){change(i,j,i,j-1),nowx.cou+1,xs[i][j-1]});\n                 if(j<3&&xs[i][j+1]!=nowx.last)\n                   s.push((point){change(i,j,i,j+1),nowx.cou+1,xs[i][j+1]});\n               }\n    }\n    cout<<-1;\n    return 0;\n}\n```",
        "postTime": 1531964551,
        "uid": 38371,
        "name": "Ivystorm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "## BFS\u505a\u6cd5\n\n\u56e0\u4e3a\u68cb\u5b50\u53ea\u80fd\u8d70\u5230\u7a7a\u683c\u6240\u4ee5\u5c31\u53ef\u4ee5\u8ba9\u7a7a\u683c\u79fb\u52a8,\u8fd9\u91cc\u7528\u7684\u662fBFS,\u4ea4\u6362\u7a7a\u683c\u548c\u4e0a\u4e0b\u5de6\u53f3\u4e2d\u4e00\u4e2a\u70b9\u7684\u4f4d\u7f6e,\u518d\u8bb0\u5f55\u56fe\u7684\u53d8\u5316,\u4e0e\u6b65\u6570\u7684\u53d8\u5316,\u518d\u6765\u5224\u65ad\u53ef\u4e0d\u53ef\u4ee5,\u53ef\u4ee5\u5c31\u8f93\u51fa\u7ed3\u675f\u7a0b\u5e8f,\u4e0b\u9762\u662f\u5177\u4f53\u6b65\u9aa4\n\n#### \u6ce8\u610f,\u7531\u4e8e\u8fd9\u4e00\u9898\u65e0\u8bba\u4e00\u5f00\u59cb\u662f\u5426\u6ee1\u8db3\u90fd\u8981\u8d70\u4e00\u904d\u6240\u4ee5\u4e0d\u9700\u8981\u5148\u5224\u65ad\n\n### \u4e00,\u53d8\u91cf\u7684\u5b9a\u4e49\n\u7528map[tail][i][j]\u8868\u793a\u7b2ctail\u4e2d\u60c5\u51b5\u65f6\u7b2ci\u884c\u7b2cj\u5217\u662f\u4ec0\u4e48\u68cb\u5b50(1\u9ed1,2\u767d,0\u7a7a\u683c)\n\na[k][tail]\u8868\u793a\u7a7a\u683ck(\u56e0\u4e3a\u6709\u4e24\u4e2a\u7a7a\u683c,\u6240\u4ee5\u5c31\u53eb\u7a7a\u683c1\u7a7a\u683c2\u5427)\u5728\u7b2ctail\u4e2d\u60c5\u51b5\u662f\u6240\u5728\u7684\u884c\u6570\n\nb[k][tail]\u540c\u7406,\u8868\u793a\u6240\u5728\u7684\u5217\u6570\n\nc[k][tail]\u8868\u793a\u6b65\u6570\n\nnow[tail]\u8868\u793a\u7684tail\u79cd\u60c5\u51b5\u51fa\u7684\u662f\u4ec0\u4e48\u68cb\u5b50\n\nhe[i][k]\u8868\u793a\u7b2ci\u884c\u68cb\u5b50k\u6709\u51e0\u4e2a\n\nsu[j][k]\u8868\u793a\u7b2cj\u5217\u68cb\u5b50k\u6709\u51e0\u4e2a\n\ndj[q][k]\u8868\u793a\u5bf9\u89d2\u7ebfq\u4e2d\u68cb\u5b50k\u6709\u51e0\u4e2a(\u5bf9\u89d2\u7ebf1\u7684\u5750\u6807\u7279\u70b9\u662fi==j,\u5bf9\u89d2\u7ebf2\u7684\u7279\u70b9\u662fi==5-o,\u53ef\u4ee5\u81ea\u5df1\u627e\u4e00\u627e\u770b)\n\nfx[i],fy[i]\u8868\u793a\u7b2ci\u4e2d\u65b9\u5411(\u5b9a\u4e49\u5728\u4ee3\u7801\u4e2d)\n\n### \u4e8c.\u8f93\u5165\n\u76f4\u63a5\u4e0a\u4ee3\u7801\u89e3\u91ca\u5427\n\n```cpp\n\tfor(int i=1;i<=4;i++)\n\t{\t\n\t    string c;//\u7528\u5b57\u7b26\u4e32\u8f93\u5165\u6bd4\u8f83\u65b9\u4fbf\n\t\tcin>>c;\n\t\tfor(int j=1;j<=4;j++)\n\t\t{\n                               /*c[j-1]\u8868\u793a\u8f93\u5165\u7684\u7684j\u4e2a\u5b57\u7b26*/\n\t\t\t    if(c[j-1]=='B') map[1][i][j]=1;//\u5b58\u56fe,\u5b58\u7b2c\u4e00\u79cd\u60c5\u51b5\n\t\t\t    if(c[j-1]=='W') map[1][i][j]=2;//\u5b58\u56fe\n\t\t\t    if(c[j-1]=='O')\n\t\t\t    {\n\t\t\t\t map[1][i][j]=0;//\u5b58\u56fe\n\t\t\t    if(a[1][1]==0)//\u5b58\u7b2c\u4e00\u4e2a\u7a7a\u683c\n\t\t\t    {\n\t\t\t    \ta[1][1]=i;\n\t\t\t    \tb[1][1]=j;\n\t\t\t    }\n\t\t\t    else//\u5b58\u7b2c\u4e8c\u4e2a\u7a7a\u683c\n\t\t\t    {\n\t\t\t    \ta[2][1]=i;\n\t\t\t    \tb[2][1]=j;\n\t\t\t    }\n\t\t\t    }\n\t\t}\n\t}\n```\n\n### \u4e09.\u5f00\u59cbBFS\n\n\u5927\u6982\u65b9\u6cd5 ~~(\u590d\u8bfb\u4e86\u4e00\u904d)~~\n\n\u56e0\u4e3a\u68cb\u5b50\u53ea\u80fd\u8d70\u5230\u7a7a\u683c\u6240\u4ee5\u5c31\u53ef\u4ee5\u8ba9\u7a7a\u683c\u79fb\u52a8,\u8fd9\u91cc\u7528\u7684\u662fBFS,\u4ea4\u6362\u7a7a\u683c\u548c\u4e0a\u4e0b\u5de6\u53f3\u4e2d\u4e00\u4e2a\u68cb\u5b50\u7684\u4f4d\u7f6e,\u518d\u8bb0\u5f55\u56fe\u7684\u53d8\u5316,\u4e0e\u6b65\u6570\u7684\u53d8\u5316,\u518d\u6765\u5224\u65ad\u53ef\u4e0d\u53ef\u4ee5,\u53ef\u4ee5\u5c31\u8f93\u51fa\u7ed3\u675f\u7a0b\u5e8f\n\n\u6ce8\u610f,\u7531\u4e8e\u8fd9\u4e00\u9898\u65e0\u8bba\u4e00\u5f00\u59cb\u662f\u5426\u6ee1\u8db3\u90fd\u8981\u8d70\u4e00\u904d\u6240\u4ee5\u4e0d\u9700\u8981\u5148\u5224\u65ad\n\n\u76f4\u63a5\u4e0a\u4ee3\u7801\u89e3\u91ca\u5427\n```cpp\n/*\u5b9a\u4e49\u53d8\u91cf\u4e0e\u51fd\u6570\u7684\u90e8\u5206*/\nint fx[5]={0,1,-1,0,0},fy[5]={0,0,0,1,-1};//\u56db\u4e2a\u65b9\u5411\nbool check(int x,int this)//\u770b\u4e0a\u4e00\u6b21\u6539\u53d8\u7684\u548c\u8fd9\u4e00\u6b21\u6539\u53d8\u7684\u68cb\u5b50\u989c\u8272\u662f\u5426\u51b2\u7a81\n{\n\tif(x==1) return 1;//\u4e00\u5f00\u59cb(\u7b2c\u4e00\u79cd\u60c5\u51b5\u65f6)\u8c01\u90fd\u53ef\u4ee5\u8d70\n\tif(this==0) return 0;//\u7a7a\u683c\u548c\u7a7a\u683c\u4ea4\u6362\u65e0\u610f\u4e49,\u4e0d\u53ef\u4ee5\n\tif(this==now[x]) return 0;//\u989c\u8272\u51b2\u7a81\u4e0d\u53ef\u4ee5\n\treturn 1;//\u6d3b\u5230\u8fd9\u91cc\u4e86,\u90a3\u5c31\u662f\u53ef\u4ee5\n}\nint other(int x)//\u8868\u793a\u53e6\u4e00\u4e2a\u6570(1\u5c31\u8fd4\u56de2,2\u5c31\u8fd4\u56de1)\n{\n\tif(x==1) return 2;\n\treturn 1;\n}\nvoid fz(int he,int ta)//\u8bb2he\u60c5\u51b5\u7684\u56fe\u4f20\u7ed9ta\u60c5\u51b5\n{\n\tfor(int pp=1;pp<=4;pp++)\n    {\n\t\tfor(int oo=1;oo<=4;oo++)\n\t     {\n\t     \tmap[ta][pp][oo]=map[he][pp][oo];\n\t\t }\n\t}\n}\nint head=0,tail=1;//\u961f\u5217\u5934,\u5c3e\n/*\u5b9a\u4e49\u53d8\u91cf\u4e0e\u51fd\u6570\u7684\u90e8\u5206*/\n\twhile(head<=tail)//BFS\u5c31\u7684\u7528\u6cd5\u5c31\u4e0d\u7528\u6211\u8bb2\u4e86\u5427,\u5fd8\u4e86\u7684\u53ef\u4ee5\u770b\u770bP1443 \u9a6c\u7684\u904d\u5386\n\t{\n\t\thead++;\n\t\tfor(int k=1;k<=2;k++)//\u4e24\u4e2a\u7a7a\u683c\n\t\t{\n\t\tfor(int i=1;i<=4;i++)//\u56db\u4e2a\u65b9\u5411\n\t\t{\n\t\t   int x=a[k][head]+fx[i];\n\t\t   int y=b[k][head]+fy[i];//\u5176\u5b9ex,y\u5c31\u662f\u4e0e\u7a7a\u683c\u76f8\u90bb\u68cb\u5b50\u7684\u5750\u6807\n\t\t   if(x>=1&&x<=4&&y>=1&&y<=4&&check(head,map[head][x][y]))//\u5224\u65ad\u53ef\u4e0d\u53ef\u4ee5\n\t\t   {\n\t\t   \t   tail++;\n\t\t   \t   now[tail]=map[head][x][y];//\u8bb0\u5f55\u8fd9\u6b21\u4ea4\u6362\u7684\u68cb\u5b50\u989c\u8272\n\t\t   \t   fz(head,tail);//\u7ee7\u627f\u4e0a\u4e00\u6b21\u7684\u56fe\n\t\t   \t   swap(map[tail][x][y],map[tail][a[k][head]][b[k][head]]);//\u4ea4\u6362\n\t\t   \t   a[k][tail]=x;\n\t\t   \t   b[k][tail]=y;//\u8fd9\u4e00\u6b21\u7684\u5750\u6807\n\t\t   \t   a[other(k)][tail]=a[other(k)][head];\n\t\t   \t   b[other(k)][tail]=b[other(k)][head];//\u53e6\u4e00\u4e2a\u7a7a\u683c\u4e00\u5b9a\u8981\u7ee7\u627f\u4e0a\u4e00\u6b21\u7684\u5750\u6807\n\t\t   \t   c[k][tail]=c[k][head]+1;//\u8fd9\u4e00\u6b21\u7684\u6b65\u6570\n\t\t   \t   c[other(k)][tail]=c[other(k)][head];//\u53e6\u4e00\u4e2a\u7a7a\u683c\u4e00\u5b9a\u8981\u7ee7\u627f\u4e0a\u4e00\u6b21\u7684\u6b65\u6570\n\t\t   \t   memset(he,0,sizeof(he));\n\t\t   \t   memset(su,0,sizeof(he));\n\t\t   \t   memset(dj,0,sizeof(he));//\u4e00\u5b9a\u8981\u8bb2\u5224\u65ad\u7684\u6570\u7ec4\u6e05\u96f6\n\t\t   \t   for(int p=1;p<=4;p++)//\u904d\u5386\u4e00\u904d\u56fe\u770b\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\n\t\t   \t   {\n\t\t   \t   \t    for(int o=1;o<=4;o++)\n\t\t   \t   \t    {\n\t\t   \t   \t\t    if(map[tail][p][o]==1)//\u4e3a1\u65f6\n\t\t\t\t\t    {\n\t\t\t\t\t\t    he[p][1]++,su[o][1]++;//\u7edf\u8ba1\u5728\u7b2cp\u884c1\u7684\u51fa\u73b0\u6b21\u6570\u4e0e\u5728\u7b2co\u52171\u7684\u51fa\u73b0\u6b21\u6570\n\t\t\t\t\t\t\tif(p==o) dj[1][1]++;//\u7edf\u8ba1\u5bf9\u89d2\u7ebf1\n\t\t\t\t\t\t\tif(p==5-o) dj[2][1]++; //\u7edf\u8ba1\u5bf9\u89d2\u7ebf2\n\t\t\t\t\t\t\tif(he[p][1]==4||su[o][1]==4||dj[1][1]==4||dj[2][1]==4)//\u5982\u679c\u6709\u4e00\u4e2a\u4e3a4(\u5373\u4e00\u7ebf(\u884c\u6216\u5217\u6216\u5bf9\u89d2\u7ebf)\u4e0a\u90fd\u662f\u540c\u4e00\u79cd\u989c\u8272)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcout<<c[1][tail]+c[2][tail]<<endl;//\u4e24\u4e2a\u7684\u6b65\u6570\u8981\u52a0\u8d77\u6765\u8f93\u51fa\n\t\t\t\t\t\t\t\texit(0);//\u76f4\u63a5\u9000\u51fa\n\t\t\t\t\t\t\t}\n\t\t\t\t\t    }\n\t\t\t\t\t    if(map[tail][p][o]==2)//\u4e3a\u4e8c\u65f6,\u4e0b\u9762\u548c\u4e3a1\u65f6\u4e00\u6837\u5c31\u4e0d\u8bf4\u4e86\n\t\t\t\t\t    {\n\t\t\t\t\t\t    he[p][2]++,su[o][2]++;\n\t\t\t\t\t\t\tif(p==o) dj[1][2]++;\n\t\t\t\t\t\t\tif(p==5-o) dj[2][2]++; \n\t\t\t\t\t\t\tif(he[p][2]==4||su[o][2]==4||dj[1][2]==4||dj[2][2]==4)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcout<<c[1][tail]+c[2][tail]<<endl;\n\t\t\t\t\t\t\t\texit(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t    }\n\t\t   \t         }\n\t\t       }\t\n\t\t   }\n\t    }\n\t    }\n    }\n```\n\u5b8c\u6574\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define map mmp\n#define this tth\nint map[1000001][5][5],a[3][1000001],b[3][1000001],c[3][1000001],he[5][3],su[5][3],dj[3][3];\nint now[1000001];\nint fx[5]={0,1,-1,0,0},fy[5]={0,0,0,1,-1};\nbool check(int x,int this)\n{\n\tif(x==1) return 1;\n\tif(this==0) return 0;\n\tif(this==now[x]) return 0;\n\treturn 1;\n}\nint other(int x)\n{\n\tif(x==1) return 2;\n\treturn 1;\n}\nvoid fz(int he,int ta)\n{\n\tfor(int pp=1;pp<=4;pp++)\n    {\n\t\tfor(int oo=1;oo<=4;oo++)\n\t     {\n\t     \tmap[ta][pp][oo]=map[he][pp][oo];\n\t\t }\n\t}\n}\nint main()\n{\n\tfor(int i=1;i<=4;i++)\n\t{\t\n\t    string c;\n\t\tcin>>c;\n\t\tfor(int j=1;j<=4;j++)\n\t\t{\n\t\t\t\tif(c[j-1]=='B') map[1][i][j]=1;\n\t\t\t\tif(c[j-1]=='W') map[1][i][j]=2;\n\t\t\t\tif(c[j-1]=='O')\n\t\t\t\t{\n\t\t\t\t map[1][i][j]=0;\n\t\t\t    if(a[1][1]==0)\n\t\t\t    {\n\t\t\t    \ta[1][1]=i;\n\t\t\t    \tb[1][1]=j;\n\t\t\t    }\n\t\t\t    else\n\t\t\t    {\n\t\t\t    \ta[2][1]=i;\n\t\t\t    \tb[2][1]=j;\n\t\t\t    }\n\t\t\t\t}\n\t\t}\n\t}\n\tint head=0,tail=1;\n\twhile(head<=tail)\n\t{\n\t\thead++;\n\t\tfor(int k=1;k<=2;k++)\n\t\t{\n\t\tfor(int i=1;i<=4;i++)\n\t\t{\n\t\t   int x=a[k][head]+fx[i];\n\t\t   int y=b[k][head]+fy[i];\n\t\t   if(x>=1&&x<=4&&y>=1&&y<=4&&check(head,map[head][x][y]))\n\t\t   {\n\t\t   \t   tail++;\n\t\t   \t   now[tail]=map[head][x][y];\n\t\t   \t   fz(head,tail);\n\t\t   \t   swap(map[tail][x][y],map[tail][a[k][head]][b[k][head]]);\n\t\t   \t   a[k][tail]=x;\n\t\t   \t   b[k][tail]=y;\n\t\t   \t   a[other(k)][tail]=a[other(k)][head];\n\t\t   \t   b[other(k)][tail]=b[other(k)][head];\n\t\t   \t   c[k][tail]=c[k][head]+1;\n\t\t   \t   c[other(k)][tail]=c[other(k)][head];\n\t\t   \t   memset(he,0,sizeof(he));\n\t\t   \t   memset(su,0,sizeof(he));\n\t\t   \t   memset(dj,0,sizeof(he));\n\t\t   \t   for(int p=1;p<=4;p++)\n\t\t   \t   {\n\t\t   \t   \t    for(int o=1;o<=4;o++)\n\t\t   \t   \t    {\n\t\t   \t   \t\t    if(map[tail][p][o]==1)\n\t\t\t\t\t    {\n\t\t\t\t\t\t    he[p][1]++,su[o][1]++;\n\t\t\t\t\t\t\tif(p==o) dj[1][1]++;\n\t\t\t\t\t\t\tif(p==5-o) dj[2][1]++; \n\t\t\t\t\t\t\tif(he[p][1]==4||su[o][1]==4||dj[1][1]==4||dj[2][1]==4)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcout<<c[1][tail]+c[2][tail]<<endl;\n\t\t\t\t\t\t\t\texit(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t    }\n\t\t\t\t\t    if(map[tail][p][o]==2)\n\t\t\t\t\t    {\n\t\t\t\t\t\t    he[p][2]++,su[o][2]++;\n\t\t\t\t\t\t\tif(p==o) dj[1][2]++;\n\t\t\t\t\t\t\tif(p==5-o) dj[2][2]++; \n\t\t\t\t\t\t\tif(he[p][2]==4||su[o][2]==4||dj[1][2]==4||dj[2][2]==4)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcout<<c[1][tail]+c[2][tail]<<endl;\n\t\t\t\t\t\t\t\texit(0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t    }\n\t\t   \t         }\n\t\t       }\t\n\t\t   }\n\t    }\n\t    }\n    }\n}\n```\n\n\n\n",
        "postTime": 1566128963,
        "uid": 199270,
        "name": "Y_B_Y",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "> \u8fd9\u9053\u9898\u770b\u4f3c\u662f\u72b6\u538b\uff0c\u4f46\u662f\u53ef\u4ee5\u76f4\u63a5\u5957$map$\n\n> \u2014\u2014[\u53e6\u4e00\u4f4d\u67d0\u5927$^D$\u6cd5$^F$\u5e08$^S$](https://www.luogu.org/blog/ArthasMenethil/)\u7684\u6fc0\u60c5\u53e5\u5f0f\n\n---\n\n> \u524d\u8a00\n\n#### $\\rm{STL}\\bold{\\text{\u5927\u6cd5\u597d\uff01}}$\n\n---\n\n> \u601d\u8def\n\n\u76f8\u4fe1\u5927\u90e8\u5206$\\rm{OIer}$\u4eec\u770b\u5230\u9898\u9762\u90fd\u77e5\u9053\u5e94\u8be5\u641c\u7d22\uff1f\u5f53\u7136\uff0c\u7531\u4e8e\u4e2a\u4eba\u504f\u597d ~~\u4ee5\u53ca\u4ee3\u7801\u719f\u7ec3\u5ea6~~ \uff0c\u5728\u8fd9\u91cc\u4ec5\u4ecb\u7ecd$\\rm{BFS}$\u7684\u505a\u6cd5\u3002\n\n\u4f17\u6240\u5468\u77e5\uff0c$\\rm{BFS}$\u7b97\u6cd5\u662f\u961f\u5217\u7684\u4e00\u4e2a\u5e94\u7528\uff08\u5728\u8fd9\u91cc\u76f4\u63a5\u5957\u4e86$\\rm{STL}$\u7684$queue$\uff0c\u5982\u679c\u4e0d\u77e5\u9053\u7684\u53ef\u4ee5\u81ea\u884c[\u767e\u5ea6](https://www.baidu.com/s?wd=queue%20c%2B%2B)\uff09\u3002\u5e94\u7528\u5230\u8fd9\u9053\u9898\uff0c\u4e2a\u4eba\u60f3\u6cd5\u662f\u4f7f\u7528\u7ed3\u6784\u4f53\u6765\u5b58\u653e\u68cb\u5c40\u72b6\u6001\u518d\u5957\u5806\uff08\u4e0d\u4f1a\u72b6\u538b\u2026\u2026\uff09\u3002\u7531\u4e8e$queue$\u4e0d\u9700\u8981\u5143\u7d20\u6709\u5e8f\uff0c\u56e0\u6b64\u53ef\u4ee5\u76f4\u63a5\u5957\u4e0a\u53bb\u3002\n\n\u7136\u540e\u662f\u526a\u679d+\u5b58\u653e\u6b65\u6570\u3002\u6b63\u5e38\u7684\u601d\u7ef4\u5e94\u8be5\u662f\u72b6\u538b+$hash$\uff0c\u7136\u800c\u4f5c\u4e3a\u4e00\u4e2a\u91cd\u5ea6$\\rm{STL}$\u4f9d\u8d56\u75c7\u60a3\u8005\uff0c\u7b2c\u4e00\u4e2a\u60f3\u5230\u7684\u5f53\u7136\u662f\u7ed3\u6784\u4f53\u5957$map$\uff1b\u7136\u800c$map$\u7684\u952e\u503c\u8981\u6c42\u6709\u5e8f\uff0c\u56e0\u6b64\u9700\u8981\u5728\u7ed3\u6784\u4f53\u5185\u91cd\u8f7d\u4e00\u904d\u8fd0\u7b97\u7b26 `<` \u3002\n\n\u63a5\u4e0b\u6765\u770b\u7ed3\u6784\u4f53\u672c\u8eab\u3002\u9996\u5148\u9700\u8981\u5b58\u653e\u7684\u662f\u68cb\u5c40\u72b6\u6001 ~~\uff08\u5728\u8fd9\u91cc\u4e3a\u4e86\u5077\u61d2\u76f4\u63a5\u7528\u4e86\u5b57\u7b26\u4e8c\u7ef4\u6570\u7ec4\uff09~~ \uff0c\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u72b6\u6001\u8fd8\u9700\u8981\u5b58\u653e\u5728\u672c\u72b6\u6001\u4e0b\u884c\u68cb\u7684\u4e00\u65b9 ~~\uff08\u4ecd\u7136\u4e3a\u4e86\u5077\u61d2\u76f4\u63a5\u7528~~ `'W'` ~~\u548c~~ `'B'` ~~\u8868\u793a\uff09~~ \uff0c\u63a5\u4e0b\u6765\u53ea\u9700\u8981\u91cd\u8f7d\u8fd0\u7b97\u7b26\u4e86\uff08\u89c1\u4ee3\u7801\u5b9e\u73b0\uff09\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6839\u636e[\u9898\u76ee\u8ba8\u8bba](https://www.luogu.org/discuss/show/48243)\uff0c\u9ed1\u65b9\u5148\u884c\u68cb\u4e0e\u767d\u65b9\u5148\u884c\u68cb\u7684\u7ed3\u679c\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u56e0\u6b64\u53ea\u8981\u5f00\u59cb\u65f6\u5c06\u9ed1\u65b9\u5148\u884c\u68cb\u4e0e\u767d\u65b9\u5148\u884c\u68cb\u4e24\u79cd\u72b6\u6001\u538b\u5165\u961f\u5217\u5373\u53ef\uff1b\u6839\u636e[\u53e6\u4e00\u4e2a\u9898\u76ee\u8ba8\u8bba](https://www.luogu.org/discuss/show/5372)\uff0c\u5982\u679c\u68cb\u5c40\u521d\u72b6\u6001\u5408\u6cd5\uff0c\u90a3\u4e48\u4ecd\u9700\u8981\u8f93\u51fa`1`\u3002\u8fd9\u4e24\u70b9\u662f\u8981\u6ce8\u610f\u7684\u3002\n\n---\n\n> \u4ee3\u7801\u5b9e\u73b0\n\n\u9996\u5148\u662f\u5b9a\u4e49\u68cb\u5c40\u7684\u7ed3\u6784\u4f53\uff1a\n\n```cpp\nstruct tabula\t\t//tabula:\u68cb\u5c40\n{\n\tchar c[4][4];\t//c:\u68cb\u5c40\u72b6\u6001\uff0c\u5206\u4e3a'W', 'B'\u4e0e'O'\n\tchar h;\t\t\t//h:\u884c\u68cb\u65b9\uff0c\u5206\u4e3a'W'\u4e0e'B'\n} init;\t\t\t\t//init:\u68cb\u5c40\u521d\u72b6\u6001\n```\n\n\u7136\u540e\u5185\u5d4c\u4e00\u4e2a\u91cd\u8f7d\u8fd0\u7b97\u7b26\uff08\u53ea\u9700\u8981\u80fd\u591f\u5224\u522b\u4e24\u4e2a\u4e0d\u540c\u7684\u68cb\u5c40\u72b6\u6001\u5373\u53ef\uff09\uff0c\u6700\u7ec8\u6574\u4e2a\u7ed3\u6784\u4f53\u5927\u6982\u957f\u8fd9\u6837\uff1a\n\n```cpp\nstruct tabula\n{\n\tchar c[4][4];\n\tchar h;\n\tbool operator < (const tabula &t) const\t//\u672c\u6bb5\u91cd\u8f7d\u8fd0\u7b97\u7b26\u6781\u957f\uff0c\u6545\u90e8\u5206\u7701\u7565\n\t{\n\t\tif(c[0][0]<t.c[0][0]) return true;\n\t\tif(c[0][0]>t.c[0][0]) return false;\n\t\tif(c[0][1]<t.c[0][1]) return true;\n\t\tif(c[0][1]>t.c[0][1]) return false;\n        ...\n\t\tif(c[3][2]<t.c[3][2]) return true;\n\t\tif(c[3][2]>t.c[3][2]) return false;\n\t\tif(c[3][3]<t.c[3][3]) return true;\n\t\tif(c[3][3]>t.c[3][3]) return false;\n\t\tif(h<t.h) return true;\n\t\tif(h>t.h) return false;\n\t\treturn false;\n\t}\n} init;\n```\n\n\u5224\u65ad\u67d0\u4e2a\u68cb\u5c40\u662f\u5426\u5408\u6cd5\uff1a\n\n```cpp\nbool win(char c[4][4])\t//\u672c\u6bb5\u4e5f\u6781\u957f\uff0c\u6545\u90e8\u5206\u7701\u7565\n{\n\tbool b=false;\n\tif(c[0][0]=='W'&&c[0][1]=='W'&&c[0][2]=='W'&&c[0][3]=='W')  b=true;\n\tif(c[1][0]=='W'&&c[1][1]=='W'&&c[1][2]=='W'&&c[1][3]=='W')  b=true;\n    ...\n\tif(c[0][0]=='B'&&c[1][1]=='B'&&c[2][2]=='B'&&c[3][3]=='B')  b=true;\n\tif(c[3][0]=='B'&&c[2][1]=='B'&&c[1][2]=='B'&&c[0][3]=='B')  b=true;\n\treturn b;\n}\n```\n\n\u5e7f\u641c\u7684\u6838\u5fc3\u4ee3\u7801\uff1a\n\n```cpp\nq.push(init);\t\t\t\t//\u521d\u72b6\u6001\u5165\u961f\n...\nwhile(!q.empty())\t\t\t//q:tabula\u7684queue\u578b\n{\n\ttabula t=q.front();\t\t//t:\u6bcf\u6b21\u53d6\u51faq\u7684\u961f\u9996\u68cb\u5c40\n\tint n=m[t];\t\t\t\t//m:tabula->int\uff08\u6b65\u6570\uff09\u7684map\u578b\n\t\t\t\t\t\t\t//n:\u961f\u9996\u68cb\u5c40\u7684\u6b65\u6570\n\tchar h=t.h;\t\t\t\t//h:\u961f\u9996\u68cb\u5c40\u7684\u884c\u68cb\u65b9\n    ...\n\t\tif(t.c[i][j]=='O')\t//\u5982\u679c\u679a\u4e3e\u51fa\u4e00\u4e2a\u7a7a\u4f4d\n        ...\n\t\t\tif(t.c[i...][j...]==h)\t//\u5982\u679c\u5b83\u5468\u56f4\u7684\u68cb\u5b50\u662f\u884c\u68cb\u65b9\u7684\u68cb\u5b50\uff0c\u4ea6\u5373\u8be5\u68cb\u5b50\u53ef\u4ee5\u79fb\u5230\u7a7a\u4f4d\n\t\t\t{\n\t\t\t\ttabula l=t;\t\t\t//l:\u79fb\u52a8\u68cb\u5b50\u540e\u7684\u68cb\u5c40\n\t\t\t\tl.c[i][j]=h;\t\t//\u5c06\u68cb\u5b50\u79fb\u5230\u7a7a\u4f4d\n\t\t\t\tl.c[i...][j...]='O';//\u2191\u2191\u2191idem\u2191\u2191\u2191\n\t\t\t\tl.h=ver(h);\t\t\t//ver(char c):\u5c06'W'\u6362\u6210'B'\uff0c\u53cd\u4e4b\u4ea6\u7136\n\t\t\t\tif(win(l.c))\t\t//\u5982\u679c\u8be5\u68cb\u5c40\u72b6\u6001\u5408\u6cd5\n\t\t\t\t{\n\t\t\t\t\tcout<<n+1<<endl;//\u76f4\u63a5\u8f93\u51fa\u6b65\u6570\u8df3\u4e86\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif(!m.count(l))\t\t//\u5982\u679c\u8be5\u68cb\u5c40\u72b6\u6001\u6ca1\u6709\u91cd\n\t\t\t\t{\n\t\t\t\t\tm[l]=n+1;\t\t//\u8be5\u68cb\u5c40\u72b6\u6001\u6b65\u6570\u5165map\n\t\t\t\t\tq.push(l);\t\t//\u8be5\u68cb\u5c40\u72b6\u6001\u5165\u961f\n\t\t\t\t}\n\t\t\t}\n            ...\n\tq.pop();\t\t\t\t//\u6807\u51c6\u51fa\u961f\n}\n```\n\n\u90a3\u4e48\u6ca1\u4ec0\u4e48\u66f4\u786c\u6838\u7684\u4ee3\u7801\u5757\u4e86\u3002\u4e0a\u5b8c\u6574\u4ee3\u7801\u3002\n\n```cpp\n#include<iostream>\n#include<queue>\n#include<map>\n#include<string>\nusing namespace std;\n\nbool win(char c[4][4])\n{\n\tbool b=false;\n\tif(c[0][0]=='W'&&c[0][1]=='W'&&c[0][2]=='W'&&c[0][3]=='W')  b=true;\n\tif(c[1][0]=='W'&&c[1][1]=='W'&&c[1][2]=='W'&&c[1][3]=='W')  b=true;\n\tif(c[2][0]=='W'&&c[2][1]=='W'&&c[2][2]=='W'&&c[2][3]=='W')  b=true;\n\tif(c[3][0]=='W'&&c[3][1]=='W'&&c[3][2]=='W'&&c[3][3]=='W')  b=true;\n\tif(c[0][0]=='W'&&c[1][0]=='W'&&c[2][0]=='W'&&c[3][0]=='W')  b=true;\n\tif(c[0][1]=='W'&&c[1][1]=='W'&&c[2][1]=='W'&&c[3][1]=='W')  b=true;\n\tif(c[0][2]=='W'&&c[1][2]=='W'&&c[2][2]=='W'&&c[3][2]=='W')  b=true;\n\tif(c[0][3]=='W'&&c[1][3]=='W'&&c[2][3]=='W'&&c[3][3]=='W')  b=true;\n\tif(c[0][0]=='W'&&c[1][1]=='W'&&c[2][2]=='W'&&c[3][3]=='W')  b=true;\n\tif(c[3][0]=='W'&&c[2][1]=='W'&&c[1][2]=='W'&&c[0][3]=='W')  b=true;\n\tif(c[0][0]=='B'&&c[0][1]=='B'&&c[0][2]=='B'&&c[0][3]=='B')  b=true;\n\tif(c[1][0]=='B'&&c[1][1]=='B'&&c[1][2]=='B'&&c[1][3]=='B')  b=true;\n\tif(c[2][0]=='B'&&c[2][1]=='B'&&c[2][2]=='B'&&c[2][3]=='B')  b=true;\n\tif(c[3][0]=='B'&&c[3][1]=='B'&&c[3][2]=='B'&&c[3][3]=='B')  b=true;\n\tif(c[0][0]=='B'&&c[1][0]=='B'&&c[2][0]=='B'&&c[3][0]=='B')  b=true;\n\tif(c[0][1]=='B'&&c[1][1]=='B'&&c[2][1]=='B'&&c[3][1]=='B')  b=true;\n\tif(c[0][2]=='B'&&c[1][2]=='B'&&c[2][2]=='B'&&c[3][2]=='B')  b=true;\n\tif(c[0][3]=='B'&&c[1][3]=='B'&&c[2][3]=='B'&&c[3][3]=='B')  b=true;\n\tif(c[0][0]=='B'&&c[1][1]=='B'&&c[2][2]=='B'&&c[3][3]=='B')  b=true;\n\tif(c[3][0]=='B'&&c[2][1]=='B'&&c[1][2]=='B'&&c[0][3]=='B')  b=true;\n\treturn b;\n}\n\nstruct tabula\n{\n\tchar c[4][4];\n\tchar h;\n\tbool operator < (const tabula &t) const\n\t{\n\t\tif(c[0][0]<t.c[0][0]) return true;\n\t\tif(c[0][0]>t.c[0][0]) return false;\n\t\tif(c[0][1]<t.c[0][1]) return true;\n\t\tif(c[0][1]>t.c[0][1]) return false;\n\t\tif(c[0][2]<t.c[0][2]) return true;\n\t\tif(c[0][2]>t.c[0][2]) return false;\n\t\tif(c[0][3]<t.c[0][3]) return true;\n\t\tif(c[0][3]>t.c[0][3]) return false;\n\t\tif(c[1][0]<t.c[1][0]) return true;\n\t\tif(c[1][0]>t.c[1][0]) return false;\n\t\tif(c[1][1]<t.c[1][1]) return true;\n\t\tif(c[1][1]>t.c[1][1]) return false;\n\t\tif(c[1][2]<t.c[1][2]) return true;\n\t\tif(c[1][2]>t.c[1][2]) return false;\n\t\tif(c[1][3]<t.c[1][3]) return true;\n\t\tif(c[1][3]>t.c[1][3]) return false;\n\t\tif(c[2][0]<t.c[2][0]) return true;\n\t\tif(c[2][0]>t.c[2][0]) return false;\n\t\tif(c[2][1]<t.c[2][1]) return true;\n\t\tif(c[2][1]>t.c[2][1]) return false;\n\t\tif(c[2][2]<t.c[2][2]) return true;\n\t\tif(c[2][2]>t.c[2][2]) return false;\n\t\tif(c[2][3]<t.c[2][3]) return true;\n\t\tif(c[2][3]>t.c[2][3]) return false;\n\t\tif(c[3][0]<t.c[3][0]) return true;\n\t\tif(c[3][0]>t.c[3][0]) return false;\n\t\tif(c[3][1]<t.c[3][1]) return true;\n\t\tif(c[3][1]>t.c[3][1]) return false;\n\t\tif(c[3][2]<t.c[3][2]) return true;\n\t\tif(c[3][2]>t.c[3][2]) return false;\n\t\tif(c[3][3]<t.c[3][3]) return true;\n\t\tif(c[3][3]>t.c[3][3]) return false;\n\t\tif(h<t.h) return true;\n\t\tif(h>t.h) return false;\n\t\treturn false;\n\t}\n} init;\n\nchar ver(char v)\n{\n\treturn v=='B'?'W':'B';\n}\n\nqueue<tabula> q;\nmap<tabula,int> m;\n\nint main()\n{\n\tios::sync_with_stdio(0);\t//\u5173\u95ed\u540c\u6b65\uff0c\u8ba9cin\u4e0ecout\u66f4\u9ad8\u6548\n\tstring s;\t//s:\u7528\u4e8e\u5e2e\u52a9\u8f93\u5165\u7684string\u578b\n\tfor(int i=0;i<4;++i)\n\t{\n\t\tcin>>s;\n\t\tfor(int j=0;j<4;++j)\n\t\t\tinit.c[i][j]=s[j];\n\t}\n\tinit.h='W';\t\t//\u4e24\u79cd\u5148\u624b\u72b6\u6001\n\t\tm[init]=0;\n\t\tq.push(init);\n\tinit.h='B';\n\t\tm[init]=0;\n\t\tq.push(init);\n\tif(win(init.c))\n\t{\n\t\tcout<<1;\n\t\treturn 0;\n\t}\n\twhile(!q.empty())\n\t{\n\t\ttabula t=q.front();\n\t\tint n=m[t];\n\t\tchar h=t.h;\n\t\tfor(int i=0;i<4;++i)\n\t\t\tfor(int j=0;j<4;++j)\n\t\t\t{\n\t\t\t\tif(t.c[i][j]=='O')\n\t\t\t\t{\n\t\t\t\t\tif(i!=0&&t.c[i-1][j]==h)\t//\u7a7a\u4f4d\u4e0a\u65b9\n\t\t\t\t\t{\n\t\t\t\t\t\ttabula l=t;\n\t\t\t\t\t\tl.c[i][j]=h;\n\t\t\t\t\t\tl.c[i-1][j]='O';\n\t\t\t\t\t\tl.h=ver(h);\n\t\t\t\t\t\tif(win(l.c))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcout<<n+1<<endl;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!m.count(l))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tm[l]=n+1;\n\t\t\t\t\t\t\tq.push(l);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(i!=3&&t.c[i+1][j]==h)\t//\u7a7a\u4f4d\u4e0b\u65b9\n\t\t\t\t\t{\n\t\t\t\t\t\ttabula l=t;\n\t\t\t\t\t\tl.c[i][j]=h;\n\t\t\t\t\t\tl.c[i+1][j]='O';\n\t\t\t\t\t\tl.h=ver(h);\n\t\t\t\t\t\tif(win(l.c))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcout<<n+1<<endl;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!m.count(l))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tm[l]=n+1;\n\t\t\t\t\t\t\tq.push(l);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(j!=0&&t.c[i][j-1]==h)\t//\u7a7a\u4f4d\u5de6\u65b9\n\t\t\t\t\t{\n\t\t\t\t\t\ttabula l=t;\n\t\t\t\t\t\tl.c[i][j]=h;\n\t\t\t\t\t\tl.c[i][j-1]='O';\n\t\t\t\t\t\tl.h=ver(h);\n\t\t\t\t\t\tif(win(l.c))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcout<<n+1<<endl;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!m.count(l))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tm[l]=n+1;\n\t\t\t\t\t\t\tq.push(l);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(j!=3&&t.c[i][j+1]==h)\t//\u7a7a\u4f4d\u53f3\u65b9\n\t\t\t\t\t{\n\t\t\t\t\t\ttabula l=t;\n\t\t\t\t\t\tl.c[i][j]=h;\n\t\t\t\t\t\tl.c[i][j+1]='O';\n\t\t\t\t\t\tl.h=ver(h);\n\t\t\t\t\t\tif(win(l.c))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcout<<n+1<<endl;\n\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!m.count(l))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tm[l]=n+1;\n\t\t\t\t\t\t\tq.push(l);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\tq.pop();\n\t}\n\treturn 0;\n}\n```\n\n---\n\n> \u9644\u8a00\n\n\u8fd9\u6b21\u7684\u4ee3\u7801\u770b\u4f3c\u662f$generator$\u751f\u6210\u7684\uff0c\u4f46\u5b9e\u9645\u4e0a\u662f\u624b\u6253\u7684\uff08\u7b11\n\n$\\rm{STL}$\u786e\u5b9e\u7ed9$\\rm{C}$\u515a\u5e26\u6765\u4e86\u8bb8\u591a\u4fbf\u5229\uff0c\u4f46\u662f\u8be5\u4f1a\u7684\u8fd8\u662f\u8981\u4f1a\uff0c\u4e0d\u8981\u5728$\\rm{STL}$\u4e2d\u6545\u6b65\u81ea\u5c01\u554a\u3002\n\n\u6700\u540e\u62ff$\\rm{NOIp}$\u7684\u67d0\u516c\u544a\u715e\u5c3e\u5427\u2014\u2014\n\n[![NOIp\u5bf9STL\u7684\u9650\u5236\uff1f\u70b9\u51fb\u67e5\u770b\u539f\u6587](https://i.loli.net/2018/10/03/5bb4d7bb1430f.png)](http://www.noi.cn/newsview.html?id=229&hash=878FD2&type=6)\n\n$$\\mathfrak{-End-}$$",
        "postTime": 1544241189,
        "uid": 32921,
        "name": "VCarlyle",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "#include<iostream>//\u6539\u4e86\u5f88\u957f\u65f6\u95f4\uff0c\u5374\u53d1\u73b0\u5c31\u591a\u6253\u4e86\u4e00\u4e2a\u8d1f\u53f7\uff01\uff01\uff01\uff01\u64cd\u4e86\u3002\u3002\u3002\n\n    \n            \n        \n\n```cpp\n#include<cmath>\nusing namespace std;\nint n,m,h,t,q[1000001][5][5]={0},a[5][5],step[1000001]={0};\nstruct re \n{\n    int x,y;\n};\nstruct re la[1000001][3];\nbool v[1000001]={0};\nint f[1000001]={0};\nconst int fx[5]={0,0,0,1,-1};//\u5c31\u662f\u8fd9\u91cc\uff01\uff01\uff01\uff01\u591a\u5199\u4e86\u8d1f\u53f7\nconst int fy[5]={0,1,-1,0,0};\nint  hash(long long x)\n{\n    return x%999997;\n}\nvoid copy(int qq,int w)\n{\n    for(int i=1;i<=4;i++)\n    {\n        for(int j=1;j<=4;j++)\n        {\n            q[w][i][j]=q[qq][i][j];\n        }\n    }\n}\nint zhuan(int x[5][5])  //\u4e0d\u77e5\u4e3a\u4f55\u7528pow\u51fa\u7684\u6570\u4e0d\u7a33\u5b9a\u3002\u3002\u3002\u4e8e\u662f\uff0c\uff0c\uff0c233333333\n{\n    long long  s,m;\n    m+=x[1][1]*1;\n    m+=x[1][2]*10;\n    m+=x[1][3]*10*10;\n    m+=x[1][4]*10*10*10;\n    m+=x[2][1]*10*10*10*10;\n    m+=x[2][2]*10*10*10*10*10;\n    m+=x[2][3]*10*10*10*10*10*10;\n    m+=x[2][4]*10*10*10*10*10*10*10;\n    m+=x[3][1]*10*10*10*10*10*10*10*10;\n    m+=x[3][2]*10*10*10*10*10*10*10*10*10;\n    m+=x[3][3]*10*10*10*10*10*10*10*10*10*10;\n    m+=x[3][4]*10*10*10*10*10*10*10*10*10*10*10;\n    m+=x[4][1]*10*10*10*10*10*10*10*10*10*10*10*10;\n    m+=x[4][2]*10*10*10*10*10*10*10*10*10*10*10*10*10;\n    m+=x[4][3]*10*10*10*10*10*10*10*10*10*10*10*10*10*10;\n    m+=x[4][4]*10*10*10*10*10*10*10*10*10*10*10*10*10*10*10;\n    return m;\n} \nbool win(int x[5][5])\n{\n    for(int i=1;i<=4;i++)\n    {\n        bool vq=0;\n        for(int j=1;j<=3;j++)\n        {\n            if(x[j][i]!=x[j+1][i])\n            {\n                vq=1;\n            }\n        }\n        if(!vq)\n        {\n        return 1;\n        }\n    }\n    for(int i=1;i<=4;i++)\n    {\n        bool v1=0;\n        for(int j=1;j<=3;j++)\n        {\n            if(x[i][j]!=x[i][j+1])\n            {\n                v1=1;\n            }\n        }\n        if(!v1)\n        {\n            return 1;\n        }\n    }\n    int vvv=0,vv=0;\n    for(int i=1;i<=3;i++)\n    {\n        if(x[i][i]!=x[i+1][i+1])\n        vvv=1;\n        if(x[i][4-i+1]!=x[i+1][4-i])\n        {\n            vv=1;\n        }\n    }\n    if(!vvv||!vv)\n    {\n        return 1;\n    }\n    return 0;\n}\nint main()\n{\n    int klk=0;\n    for(int i=1;i<=4;i++)\n    {\n        for(int j=1;j<=4;j++)\n        {\n            char ch;\n            cin>>ch;\n            if(ch=='B') \n            {\n                a[i][j]=0;\n                q[1][i][j]=0;\n                q[2][i][j]=0;\n            }\n            if(ch=='W') \n            {\n                q[2][i][j]=1;\n                a[i][j]=1;\n                q[1][i][j]=1;\n            }\n            if(ch=='O') \n            {\n                klk++;\n                la[1][klk].x=i;\n                la[1][klk].y=j;\n                q[2][i][j]=2;\n                a[i][j]=2;\n                q[1][i][j]=2;\n            }\n        }\n    }\n    v[hash(zhuan(a))]=1;\n    h=0;t=1;\n    while(h<=t)//BFS~~~~~~~~~~~~~~~~~~\n    {\n        h++;\n        for(int io=1;io<=2;io++)\n        {\n           int i,j;\n           i=la[h][io].x;\n           j=la[h][io].y;\n                if(q[h][i][j]==2)\n                {\n                    for(int k=1;k<=4;k++)\n                    {\n                        int tx=i+fx[k],ty=j+fy[k];\n                        if(i+fx[k]<=4&&i+fx[k]>0&&j+fy[k]<=4&&j+fy[k]>0)\n                        {\n                            if(q[h][tx][ty]==2)\n                            continue;\n                            if(h!=1)\n                            {\n                            if(f[h]==1)\n                            {\n                                if(q[h][tx][ty]==1)\n                                {\n                                    continue;\n                                }\n                            }\n                            else\n                            if(f[h]==2)\n                            {\n                                if(q[h][tx][ty]==0)\n                                {\n                                    continue;\n                                }\n                            }\n                            }\n                            t++;\n                            step[t]=step[h]+1;\n                            copy(h,t);\n                            q[t][i][j]=q[t][tx][ty];\n                            q[t][tx][ty]=2;\n                            if(q[t][i][j]==1) f[t]=1;\n                            if(q[t][i][j]==0) f[t]=2;\n                            if(io==1)\n                            {\n                                la[t][1].x=tx;\n                                la[t][1].y=ty;\n                                la[t][2].x=la[h][2].x;\n                                la[t][2].y=la[h][2].y;\n                            }else\n                            {\n                                la[t][2].x=tx;\n                                la[t][2].y=ty;\n                                la[t][1].x=la[h][1].x;\n                                la[t][1].y=la[h][1].y;\n                            }\n                            if(v[hash(zhuan(q[t]))])\n                            {\n                                t--;\n                            }else\n                            {\n                                v[hash(zhuan(q[t]))]=1;\n                            }\n                            if(win(q[t]))\n                            {\n                                cout<<step[t];\n                                return 0;\n                            }\n                        }\n                    }\n                }\n        }\n    }\n}\n```",
        "postTime": 1445503565,
        "uid": 8505,
        "name": "Xrvitd",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "\u770b\u5230\u697c\u4e0a\u5f88\u591adalao\u4e09\u8fdb\u5236\u72b6\u538bbalabala\uff0c\u5413\u5f97\u745f\u745f\u53d1\u6296\u7684\u849f\u84bb\u6211\u53ea\u597d\u7528$long\\ long$\u3002\n\n\u56e0\u4e3a\u6570\u636e~~\u6c34~~\u5c0f\uff0c\u6240\u4ee5\u7528$bfs$\u3002\u7136\u540e\u5224\u91cd\u6211\u8fd9\u91cc\u7528\u7684\u662f$hash$\uff0c[\u4eba\u975e\u4ee3\u7801\u4e11](https://www.luogu.org/record/show?rid=11229599)\u3002\n```\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n\n#define reg register\n#define min(x,y) ((x)<(y)?(x):(y))\n\ntypedef long long ll;\nconst int MOD=19961993;\nchar str[6];\nll s,ans=0x3f3f3f3f;\nll pow[22]={1};\nint f[19962000];\n\n\nstruct node{\n\tll x;\t\t//\u68cb\u76d8\u72b6\u6001\n\tint type;\t//\u6b64\u523b\u5230\u8c01\u8d70\n}q[1000010];\t//\u961f\u5217\nint st,ed;\nll t,dt;\nint xx,yy;\n\n\ninline ll dight(ll x,int y){\n\treturn x/pow[y-1]%10;\n}\ninline ll getzero(ll x){\n\tll ans=1;\n\twhile(x%10) ++ans,x/=10l;\n\treturn ans;\n}\nint check(ll x){\t//\u68c0\u67e5\u72b6\u6001\u662f\u5426\u5408\u6cd5\n\tfor(reg int i=0;i<=3;++i){\n\t\tbool tf=1;\n\t\tfor(reg int j=1;j<=3;++j)\n\t\t\tif(dight(x,i*4+j)!=dight(x,i*4+j+1)){\n\t\t\t\ttf=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tif(tf) return 1;\n\t\ttf=1;\n\t\tfor(reg int j=1;j<=3;++j)\n\t\t\tif(dight(x,j*4+i-3)!=dight(x,j*4+i+1)){\n\t\t\t\ttf=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tif(tf) return 1;\n\t}\n\tif(dight(x,1)==dight(x,6)&&dight(x,6)==dight(x,11)&&dight(x,11)==dight(x,16)) return 1;\n\tif(dight(x,4)==dight(x,7)&&dight(x,7)==dight(x,10)&&dight(x,10)==dight(x,13)) return 1;\n\treturn 0;\n}\nint main(){\n\tfor(reg int i=1;i<=20;++i) //\u9884\u5904\u740610\u7684\u5e42\n\t\tpow[i]=pow[i-1]*10l;\n\tfor(reg int i=1;i<=4;++i){ //\u8bfb\u5165\n\t\tscanf(\"%s\",str+1);\n\t\tfor(reg int j=1;j<=4;++j)\n\t\t\tswitch(str[j]){\n\t\t\t\tcase 'B':\n\t\t\t\t\ts=s*10+1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'W':\n\t\t\t\t\ts=s*10+2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'O':\n\t\t\t\t\ts=s*10;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t}\n\tif(check(s)){ //#4\u7325\u7410\u7279\u5224\n\t\tputs(\"1\");\n\t\texit(0);\n\t}\n\tmemset(f,63,sizeof(f));f[s%MOD]=0;\n    //\u8bb0\u5f97\u8003\u8651\u9ed1\u767d\u5148\u624b\u7684\u60c5\u51b5\n\tq[1].x=s;q[1].type=1;q[2].x=s;q[2].type=2;\n\tst=1;ed=3;\n    //bfs\n\twhile(st!=ed){\n\t\tll x=q[st].x,y,z[3];\n\t\tif(check(x)){ //\u5982\u679c\u6b64\u72b6\u6001\u5408\u6cd5\u5219\u66f4\u65b0\u7b54\u6848\n\t\t\tans=min(ans,f[x%MOD]);\n\t\t\tbreak;\n\t\t}\n\t\t//z\u6570\u7ec4\u5b58\u50a80\u7684\u4f4d\u7f6e\n        z[1]=getzero(x),z[2]=getzero(x/pow[z[1]])+z[1];\n\t\tfor(reg int i=1;i<=2;++i){\n\t\t\t//up\n\t\t\tif(z[i]<=12&&dight(x,(int)z[i]+4)==q[st].type){\n\t\t\t\tt=z[i]+4;dt=dight(x,t);\n\t\t\t\txx=(int)(x%MOD);\n\t\t\t\ty=x+dt*(pow[z[i]-1]-pow[t-1]);\n\t\t\t\tyy=(int)(y%MOD);\n\t\t\t\tif(f[yy]>=f[xx]+1){\n\t\t\t\t\tf[yy]=f[xx]+1;\n\t\t\t\t\tq[ed].x=y;q[ed++].type=3-q[st].type;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//down\n\t\t\tif(z[i]>=5&&dight(x,(int)z[i]-4)==q[st].type){\n\t\t\t\tt=z[i]-4;dt=dight(x,t);\n\t\t\t\txx=(int)(x%MOD);\n                //\u6b64\u5904\u8bf7\u81ea\u884c\u63a8\u5bfc\uff0c\u4e0b\u540c\n\t\t\t\ty=x+dt*(pow[z[i]-1]-pow[t-1]);\n\t\t\t\tyy=(int)(y%MOD);\n\t\t\t\tif(f[yy]>=f[xx]+1){//\u66f4\u65b0\u7b54\u6848\n\t\t\t\t\tf[yy]=f[xx]+1;\n                    //\u6362\u624b\n\t\t\t\t\tq[ed].x=y;q[ed++].type=3-q[st].type;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//left\n\t\t\tif(z[i]%4&&dight(x,(int)z[i]+1)==q[st].type){\n\t\t\t\tt=z[i]+1;dt=dight(x,t);\n\t\t\t\txx=(int)(x%MOD);\n\t\t\t\ty=x+dt*(pow[z[i]-1]-pow[t-1]);\n\t\t\t\tyy=(int)(y%MOD);\n\t\t\t\tif(f[yy]>=f[xx]+1){\n\t\t\t\t\tf[yy]=f[xx]+1;\n\t\t\t\t\tq[ed].x=y;q[ed++].type=3-q[st].type;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//right\n\t\t\tif(z[i]%4-1&&dight(x,(int)z[i]-1)==q[st].type){\n\t\t\t\tt=z[i]-1;dt=dight(x,t);\n\t\t\t\txx=(int)(x%MOD);\n\t\t\t\ty=x+dt*(pow[z[i]-1]-pow[t-1]);\n\t\t\t\tyy=(int)(y%MOD);\n\t\t\t\tif(f[yy]>=f[xx]+1){\n\t\t\t\t\tf[yy]=f[xx]+1;\n\t\t\t\t\tq[ed].x=y;q[ed++].type=3-q[st].type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t++st;\n\t}\n\tprintf(\"%lld\",ans);\n}\n```",
        "postTime": 1538114175,
        "uid": 29502,
        "name": "YangHao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "###\u601d\u8def\uff1a\u6df1\u5ea6\u4f18\u5148\u641c\u7d22+\u7279\u6b8a\u7684\u72b6\u6001\u50a8\u5b58\u3002\n\n\u6211\u662f\u7528\u4e8c\u7684\u5e42\u50a8\u5b58\u7684\u72b6\u6001\uff08\u5982\u679c\u7406\u89e3\u4e86\uff0c\u53ef\u4ee5\u589e\u52a0\u5bf9\u2018&\u2019\u7684\u7406\u89e3\uff09\u3002\n\n\u56e0\u4e3a\u662f\u5f88\u65e9\u4ee5\u524d\u7684\u6211\u7684\u4ee3\u7801\u4e86\uff0c\u6211\u6709\u70b9\u770b\u4e0d\u61c2\u3002\n\n\uff08\u7c98\u4e00\u4e0b\u535a\u5ba2\u539f\u5740\uff1ahttp://www.cnblogs.com/J-william/p/6443754.html \uff0c\u53ef\u80fd\u4f1a\u8ffd\u52a0\u89e3\u91ca\uff0c\u5982\u679c\u6709\u4eba\u95ee\u7684\u8bdd\uff09\n\n\u53e6\u5916\u9ed1\u767d\u68cb\u5b50\u8c01\u5148\u624b\u662f\u6709\u5f71\u54cd\u7684\u3002\n\n\u6709\u5173\u9ed1\u68cb\u7684\u53d8\u91cf\u5e94\u8be5\u90fd\u4e00\u4e2a\u5b57\u6bcd\u2018b\u2019\uff0c\u540c\u6837\u6709\u5173\u767d\u68cb\u7684\u6709\u4e00\u4e2a\u2018w\u2019\uff0c\u884c\u662f\u2018h\u2019\uff0c\u5217\u662f\u2018l\u2019\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n\n```cpp\n 1 #include<cstdio>\n 2 #include<cstring>\n 3 #include<iostream>\n 4 using namespace std;\n 5 int ww,bb,ans=300;\n 6 int w[7][2],b[7][2],h[4];\n 7 int hb[]={-1,0,1,0},lb[]={0,1,0,-1};//\u884c\u53d8\u548c\u5217\u53d8\u3002\n 8 int ew[]={2,4,8,16},eb[]={32,64,128,256};\n 9 char ch;\n10 void dfs(int step,int x){\n11     if(step>ans) return;\n12     if(step>0){\n13     for(int i=0;i<4;i++)\n14     if(h[i]==30||h[i]==480){ans=step;return;}\n15     for(int i=0;i<4;i++){\n16         if(h[0]&ew[i]&&h[1]&ew[i]&&h[2]&ew[i]&&h[3]&ew[i]){ans=step;return;}\n17         if(h[0]&eb[i]&&h[1]&eb[i]&&h[2]&eb[i]&&h[3]&eb[i]){ans=step;return;}\n18     }\n19     for(int i=0;i<5;i++){\n20         if(i==4){ans=step;return;}\n21         if(!(h[i]&ew[i])) break;\n22     }\n23     for(int i=0;i<5;i++){\n24         if(i==4){ans=step;return;}\n25         if(!(h[i]&ew[3-i])) break;\n26     }\n27     for(int i=0;i<5;i++){\n28         if(i==4){ans=step;return;}\n29         if(!(h[i]&eb[i])) break;\n30     }\n31     for(int i=0;i<5;i++){\n32         if(i==4){ans=step;return;}\n33         if(!(h[i]&eb[3-i])) break;//\u6ce8\u610f\u903b\u8f91\u8fd0\u7b97\u4e0e\u6216\u975e\u7684\u4f18\u5148\u5ea6\u3002 \n34     }\n35     }\n36     if(x!=1){//\u79fb\u767d\u68cb \u3002 \n37         for(int i=0;i<7;i++)\n38         for(int j=0;j<4;j++){\n39             int ah=w[i][0],bl=w[i][1];\n40             int nh=ah+hb[j],nl=bl+lb[j];\n41             if((!(h[nh]&ew[nl]))&&(!(h[nh]&eb[nl]))&&nh>=0&&nh<4&&nl>=0&&nl<4){\n42                 h[nh]+=ew[nl];h[ah]-=ew[bl];\n43                 w[i][0]=nh;w[i][1]=nl;\n44                 dfs(step+1,1);\n45                 h[nh]-=ew[nl];h[ah]+=ew[bl];\n46                 w[i][0]=ah;w[i][1]=bl;\n47             }\n48         }\n49     }\n50     if(x!=0){//\u79fb\u9ed1\u68cb\u3002 \n51         for(int i=0;i<7;i++)\n52         for(int j=0;j<4;j++){\n53             int ah=b[i][0],bl=b[i][1];\n54             int nh=ah+hb[j],nl=bl+lb[j];\n55             if((!(h[nh]&ew[nl]))&&(!(h[nh]&eb[nl]))&&nh>=0&&nh<4&&nl>=0&&nl<4){\n56                 h[nh]+=eb[nl];h[ah]-=eb[bl];\n57                 b[i][0]=nh;b[i][1]=nl;\n58                 dfs(step+1,0);\n59                 h[nh]-=eb[nl];h[ah]+=eb[bl];\n60                 b[i][0]=ah;b[i][1]=bl;\n61             }\n62         }\n63     }\n64 }\n65 int main(){\n66     for(int i=0;i<4;i++)\n67     for(int j=0;j<4;j++){\n68         cin>>ch;\n69         if(ch=='W'){\n70             h[i]+=ew[j];\n71             w[ww][0]=i;w[ww++][1]=j;\n72         }\n73         if(ch=='B'){\n74             h[i]+=eb[j];\n75             b[bb][0]=i;b[bb++][1]=j;\n76         }\n77     }\n78     dfs(0,2);//\u8fd9\u91cc\u662f2\uff0c\u6240\u4ee5\u9ed1\u68cb\u5148\u624b\u767d\u68cb\u5148\u624b\u5404\u4e00\u904d\u3002\n79     printf(\"%d\\n\",ans);\n80     return 0;\n81 }\n\n```",
        "postTime": 1488077834,
        "uid": 21020,
        "name": "Long\u00b7J\u00b7William",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "```cpp\n//IDA*+\u54c8\u5e0c\u5224\u91cd\n#include<iostream>\n#include<cstring>\nusing namespace std;\nint G[4][4],ax,ay,bx,by;\nint have[41000000]={0},k;\nbool hash[41000000]={0},ok=0;\nconst int mx[4]={1,-1,0,0};\nconst int my[4]={0,0,1,-1};\nbool equ(int a,int b,int c,int d);\ninline bool check(void);\ninline bool gethash(int depth);\nvoid init(void);\nvoid IDA(void);\nint search(int depth,int color);\nbool equ(int a,int b,int c,int d){\n    if(a!=b||b!=c||c!=d)return 0;\n    return 1;\n}\ninline bool check(void){\n    for(int i=0;i<4;i++){\n        if(equ(G[i][0],G[i][1],G[i][2],G[i][3]))return 1;\n        if(equ(G[0][i],G[1][i],G[2][i],G[3][i]))return 1;\n    }\n    if(equ(G[0][0],G[1][1],G[2][2],G[3][3]))return 1;\n    if(equ(G[0][3],G[1][2],G[2][1],G[3][0]))return 1;\n    return 0;\n```\n}//\u5224\u65ad\u68cb\u5c40\u662f\u5426\u7b26\u5408\u8981\u6c42\n```cpp\ninline bool gethash(int depth){//\u6c42\u54c8\u5e0c\u503c\n    int va=0;\n    for(int i=0;i<4;i++)\n        for(int j=0;j<4;j++)\n            va=va*3+G[i][j];\n    va%=40700017;\n    if(hash[va]&&have[va]<=depth)return 0;//have\u6570\u7ec4\u9632\u6b62\u8fed\u4ee3\u6df1\u641c\u65f6\u54c8\u5e0c\u51fa\u9519\n    have[va]=depth;\n    return 1;\n}\nvoid IDA(void){\n    for(k=1;k<=10;k++){\n        search(1,1);\n        if(ok){\n            cout<<k;\n            break;\n        }\n        else search(1,2);\n        if(ok){\n            cout<<k;\n            break;\n        }    \n    }\n}\nint search(int depth,int color){\n    if(depth==k+1)return 0;\n    for(int i=0;i<4;i++){\n        int tx=ax+mx[i],ty=ay+my[i];\n        if(tx<0||tx>3||ty<0||ty>3)continue;\n        if(G[tx][ty]!=color)continue;//\u975e\u6cd5\u60c5\u51b5\n        swap(G[tx][ty],G[ax][ay]);\n        ax=tx;ay=ty;\n        if(gethash(depth)){\n            if(check()){\n                ok=1;\n                return 1;\n            }\n            search(depth+1,3-color);\n        }\n        ax-=mx[i];ay-=my[i];\n        swap(G[tx][ty],G[ax][ay]);\n    }\n    for(int i=0;i<4;i++){\n        int tx=bx+mx[i],ty=by+my[i];\n        if(tx<0||tx>3||ty<0||ty>3)continue;\n        if(G[tx][ty]!=color)continue;\n        swap(G[tx][ty],G[bx][by]);\n        bx=tx;by=ty;\n        if(gethash(depth)){\n            if(check()){\n                ok=1;\n                return 1;\n            }\n            search(depth+1,3-color);\n        }\n        bx-=mx[i];by-=my[i];\n        swap(G[tx][ty],G[bx][by]);\n    }\n}\nvoid init(void){\n    memset(hash,0,sizeof(hash));\n    bool mark=0;\n    for(int i=0;i<4;i++)\n        for(int j=0;j<4;j++){\n            char a;cin>>a;\n            if(a=='B')G[i][j]=1;\n            else if(a=='W')G[i][j]=2;\n            else{\n                G[i][j]=0;\n                if(!mark){\n                    ax=i;ay=j;mark=1;\n                }\n                else{\n                    bx=i;by=j;\n                }\n            }\n        }\n}\nint main(){\n    init();\n    IDA();\n    return 0;\n}\n```",
        "postTime": 1472548820,
        "uid": 20695,
        "name": "DreamDraw",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    },
    {
        "content": "\u53ef\u4ee5\u7528IDDFS\n\n\u6bcf\u6b21\u679a\u4e3e\u6700\u591a\u80fd\u79fb\u591a\u5c11\u6b21\n\n\u7136\u540eDFS\n\n```cpp\n#include<stdio.h>\n#include<iostream>\n#include<stdlib.h>\n#include<math.h>\nusing namespace std;\nint a[6][6],i,j;\nchar c;\nint x[5]={1,-1,0,0};\nint y[5]={0,0,1,-1};\nbool check(int a[][6])\n      {int i,j,f;\n        for(i=1;i<=4;i++)\n            {f=1;\n              for(j=1;j<=4;j++)\n                    if(a[i][j]!=a[i][1])\n                      {f=0;\n                        break;\n                        }\n              if(f==1)\n                  return true;\n            }\n        for(i=1;i<=4;i++)\n            {f=1;\n              for(j=1;j<=4;j++)\n                    if(a[j][i]!=a[1][i])\n                      {f=0;\n                        break;\n                      }\n              if(f==1)\n                  return true;\n            }\n        if(a[1][1]==a[2][2]&&a[1][1]==a[3][3]&&a[1][1]==a[4][4])\n            return true;\n        if(a[1][4]==a[2][3]&&a[1][4]==a[3][2]&&a[1][4]==a[4][1])\n            return true;\n        return false;\n        }\nbool dfs(int n,int i,int l,int a[][6])\n     {int j,k,p,t;\n       if(i>n)\n        {if(check(a))\n               return true;\n          return false;\n        }    \n       for(j=1;j<=4;j++)\n             for(k=1;k<=4;k++)\n                   if(a[j][k]==0)\n                      for(p=0;p<4;p++)\n                          {int xx=j+x[p];\n                            int yy=k+y[p];\n                            if(a[xx][yy]!=l&&xx>=1&&xx<=4&&yy>=1&&yy<=4&&a[xx][yy]!=0)\n                              {t=a[xx][yy];\n                                a[xx][yy]=a[j][k];\n                                a[j][k]=t;\n                                if(dfs(n,i+1,a[j][k],a))\n                                    return true;\n                                t=a[xx][yy];\n                                a[xx][yy]=a[j][k];\n                                a[j][k]=t;\n                              }\n                            }\n        return false;\n        }\nint main(){\n    for(i=1;i<=4;i++)\n        {for(j=1;j<=4;j++)\n              {scanf(\"%c\",&c);\n                if(c=='B')\n                    a[i][j]=1;\n                if(c=='W')\n                    a[i][j]=2;\n                if(c=='O')\n                    a[i][j]=0;\n                }\n          scanf(\"\\n\");\n        }\n    for(i=1;;i++)\n          if(dfs(i,1,1,a)||dfs(i,1,2,a))\n              break;\n    printf(\"%d\",i);\n}\n\n```",
        "postTime": 1471078325,
        "uid": 13185,
        "name": "\u53cc\u7ba1\u8367\u5149\u706f",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P2346 \u3010\u56db\u5b50\u8fde\u68cb\u3011"
    }
]
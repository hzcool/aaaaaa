[
    {
        "content": "\u8fd9\u9053\u9898\u7684s\u6700\u5927\u53ea\u670999999\uff0c\u56e0\u4e3a\u64cd\u4f5c3\u7684\u9650\u5236\uff0c\u4e4b\u540e\u751f\u6210\u7684\u6570\u4f4d\u6570\u4e0d\u80fd\u8d85\u8fc7\u539f\u6570\u7684\u4f4d\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4ece\u53ef\u4ee5\u751f\u6210\u7684\u6570\u5b57\u5165\u624b\uff0c\u6700\u591a\u53ea\u7528\u679a\u4e3e99999\\*100\uff08\u8fd9\u662f\u5bf9\u6bcf\u4e00\u4e2a\u6570\u6240\u8fdb\u884c\u64cd\u4f5c\u7684\u4f30\u8ba1\uff0c\u4f46\u5b9e\u9645\u4e0a\u8fdc\u8fdc\u8fbe\u4e0d\u5230\uff09\u6b21\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528bfs\u6765\u641c\u7d22\n\n```cpp\n#include<queue>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n#define ll long long\n#define N 100005\n#define M 10\ninline int read(){\n    int x=0,f=1;char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n    return x*f;\n}\n\nstruct node{\n    int a,ans;\n};\nbool flag[N];            //\u5b58\u7684\u662f\u8be5\u6570\u5b57\u80fd\u5426\u751f\u6210 \nint f[N];                //\u5b58\u7684\u662f\u751f\u6210\u8be5\u6570\u5b57\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570 \nqueue<node> q;\nint n;\nint s[10],len;\n\nvoid bfs(){                            //bfs\u6c42\u6240\u6709\u53ef\u4ee5\u5f97\u5230\u5f97\u53ef\u80fd\u6027 \n    while(!q.empty()){\n        node a = q.front(); q.pop();\n        int b;\n        len = 0;\n        while(a.a){                    //\u5c06\u6570\u5b57\u8f6c\u5316\u4e3a\u6570\u7ec4 \n            s[++len] = a.a%10;\n            a.a /= 10;\n        }\n        if(len == 1) continue;        //\u5f53len\u7b49\u4e8e1\u7684\u65f6\u5019\u4e0d\u80fd\u518d\u8fdb\u884c\u4efb\u4f55\u4e00\u9879\u64cd\u4f5c\u4e86 \n        //\u5220\u9664\u4e00\u4f4d\u6570\u7684\u64cd\u4f5c \n        for(int i = 1;i <= len;i++){        //\u8fd9\u662f\u679a\u4e3e\u5220\u9664\u54ea\u4e00\u4f4d\u6570 \n            b = 0;\n            for(int j = len;j >= 1;j--)        //\u6570\u7ec4\u8fd8\u539f\u6210\u6570\u5b57\uff0c\u4e0b\u9762\u540c\u6837 \n                if(j != i)\n                    b = b*10+s[j];\n            if(flag[b]) continue;            //\u5224\u65ad\u662f\u5426\u5b58\u5728\u8fc7\uff0c\u6ca1\u6709\u7684\u8bdd\u5c31\u63d2\u5165 \n            flag[b] = true;\n            f[b] = a.ans+1;\n            node p;\n            p.a = b; p.ans = a.ans+1;\n            q.push(p);\n        }\n        //\u4ea4\u6362\u4e24\u4f4d\u6570\u7684\u64cd\u4f5c \n        for(int i = 1;i <= len;i++)\n            for(int j = i+1;j <= len;j++){        //i\u548cj\u662f\u5728\u679a\u4e3e\u4ea4\u6362\u54ea\u4e24\u4f4d\u6570\u5b57 \n                b = 0;\n                swap(s[i],s[j]);\n                for(int k = len;k >= 1;k--)\n                    b = b*10+s[k];\n                swap(s[i],s[j]);\n                if(flag[b]) continue;\n                flag[b] = true;\n                f[b] = a.ans+1;\n                node p;\n                p.a = b; p.ans = a.ans+1;\n                q.push(p);\n            }\n        //\u6dfb\u52a0\u4e00\u4f4d\u6570\u7684\u64cd\u4f5c \n        if(len == n) continue;            //\u4e0d\u80fd\u8d85\u8fc7\u539f\u5e8f\u5217\u7684\u957f\u5ea6  \n        for(int i = 1;i < len;i++){        //\u679a\u4e3e\u5728\u54ea\u4e24\u4f4d\u4e2d\u95f4\u6dfb\u52a0 \n            for(int j = s[i]-1;j > s[i+1];j--){        //\u679a\u4e3e\u6dfb\u52a0\u7684\u6570\u5b57 \n                b = 0;\n                for(int k = len;k > i;k--)\n                    b = b*10+s[k];\n                b = b*10+j;\n                for(int k = i;k >= 1;k--)\n                    b = b*10+s[k];\n                if(flag[b]) continue;\n                flag[b] = true;\n                f[b] = a.ans+1;\n                node p;\n                p.a = b; p.ans = a.ans+1;\n                q.push(p);\n            }\n        }\n    }\n}\n\nint main(){\n    int a = read();\n    flag[a] = true;\n    node p; p.a = a; p.ans = 0;\n    q.push(p);\n    while(a){\n        s[++len] = a%10;\n        a /= 10;\n    }\n    n = len;\n    bfs();\n    int m = read();\n    for(int i = 1;i <= m;i++){\n        int a = read();\n        if(!flag[a]) printf(\"-1\\n\");\n        else printf(\"%d\\n\",f[a]);\n    }\n    return 0;\n}\n```",
        "postTime": 1500775835,
        "uid": 12820,
        "name": "Just_do_it",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u662f\u4e00\u9053\u5bbd\u641c\u88f8\u9898\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6570\u5b57\uff0c\u628a\u6240\u6709\u80fd\u53d8\u6210\u7684\u6570\u5b57\u90fd\u52a0\u8fdb\u961f\u5217\u91cc\u9762\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a\u4e00\u4e2a\u6570\u80fd\u53d8\u7684\u6570\u5b57\u5168\u90e8\u627e\u51fa\u6765\uff0c\u4e0d\u80fd\u53d8\u7684\u6570\u5b57\u5219\u6c38\u8fdc\u90fd\u4e0d\u4f1a\u904d\u5386\u5230\u3002\u6ce8\u610f\u4e00\u4e0b\u7ec6\u8282\uff1a\u957f\u5ea6\u4e3a $l$ \u7684\u6570\u5b57\u4e0d\u80fd\u63d2\u5165\uff08$l$ \u4e3a\u521d\u59cb\u6570\u5b57\u7684\u4f4d\u6570\uff09\uff0c\u957f\u5ea6\u4e3a $1$ \u7684\u6570\u5b57\u4e0d\u80fd\u5220\u9664\uff0c\u4ea4\u6362\u6570\u5b57\u662f\u4efb\u610f\u4e24\u4f4d\u90fd\u53ef\u4ee5\u4ea4\u6362\u7684\u3002\u6ce8\u610f\u8fd9\u4e9b\u7ec6\u8282\u4e4b\u540e\u5c31\u7b80\u5355\u4e86\u3002\n\n\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u4e9b `C++` \u91cc\u9762\u5b57\u7b26\u4e32\u7684\u7528\u6cd5\uff0c`atoi` \u51fd\u6570\u662f\u5c06\u4e00\u4e2a `char*` \u7c7b\u578b\u7684\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a `int` \u7c7b\u578b\uff1b`stoi` \u51fd\u6570\u662f\u5c06\u4e00\u4e2a `string` \u7c7b\u578b\u7684\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a `int` \u7c7b\u578b\uff0c`to_string` \u51fd\u6570\u662f\u5c06\u4e00\u4e2a\u6570\u503c\u8f6c\u6362\u4e3a `string` \u7c7b\u578b\u3002\u6709\u4e86\u8fd9\u4e9b\u51fd\u6570\uff0c\u4ee3\u7801\u96be\u5ea6\u5c06\u5927\u5927\u964d\u4f4e\uff0c\u6bd5\u7adf\uff0c\u8fd9\u6837\u5c31\u4e0d\u9700\u8981\u624b\u5199\u5c06\u5b57\u7b26\u4e32\u8f6c\u4e3a\u6570\u5b57\uff0c\u4e5f\u4e0d\u9700\u8981\u624b\u5199\u5c06\u6570\u5b50\u8f6c\u4e3a\u5b57\u7b26\u4e32\u4e86\u3002\u4ee3\u7801\u957f\u5ea6\u662f\u6240\u6709\u901a\u8fc7\u7684\u4eba\u91cc\u9762\u6b21\u77ed\u7684\uff08\u53bb\u6389\u591a\u4f59\u7a7a\u683c\u5c06\u4e0d\u5230 1K\uff09\u3002\n\n```cpp\n#include<queue>\n#include<cstdio>\n#include<string>\n#include<cstring>\nusing namespace std;\nconst int N = 1e5 + 10;\nstring s; char str[7];\nint m, l, x, d[N];\nvoid bfs(int s) {\n\tmemset(d, -1, sizeof(d)), d[s] = 0;\n\tqueue<int> q; q.push(s); int k;\n\twhile (!q.empty()) {\n\t\tint x = q.front(); q.pop();\n\t\tstring t = to_string(x);\n\t\tint len = t.length();\n\t\tfor (int i = 0; i < len; ++i)\n\t\tfor (int j = i + 1; j < len; ++j) {\n\t\t\tstring u = t; swap(u[i], u[j]);\n\t\t\tif (!~d[k = stoi(u)]) d[k] = d[x] + 1, q.push(k);\n\t\t}\n\t\tfor (int i = 0; i < len && len > 1; ++i) {\n\t\t\tstring u = t; u.erase(i, 1);\n\t\t\tif (!~d[k = stoi(u)]) d[k] = d[x] + 1, q.push(k);\n\t\t}\n\t\tif (len == l) continue;\n\t\tfor (int i = 1; i < len; ++i)\n\t\tfor (char c = t[i - 1] + 1; c < t[i]; ++c) {\n\t\t\tstring u = t; u.insert(i, 1, c);\n\t\t\tif (!~d[k = stoi(u)]) d[k] = d[x] + 1, q.push(k);\n\t\t}\n\t}\n}\nint main() {\n\tscanf(\"%s%d\", str, &m), s = str, l = s.length(), bfs(atoi(str));\n\tfor (int i = 1; i <= m; ++i) scanf(\"%d\", &x), printf(\"%d\\n\", d[x]);\n\treturn 0;\n}\n```\n\n\u987a\u4fbf\u8bf4\u4e00\u4e0b\uff0c\u8fd9\u9053\u9898\u76ee\u8fd8\u662f\u6211\u901a\u8fc7\u7684\u7b2c 1000 \u9053\u9898\u76ee\u3002\n\n",
        "postTime": 1600086242,
        "uid": 181378,
        "name": "Alarm5854",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "###\u5bbd\u641c with \u4e00\u4e9b\u6280\u5de7\n\n- \u7531\u4e8e\u67e5\u8be2\u91cf\u5f88\u5927\uff0c\u6240\u4ee5\u8981\u9884\u5148\u5904\u7406\u6240\u6709\u7b54\u6848\n\n- \u9884\u5904\u7406\u5f53\u7136\u662f\u7528```BFS```\uff0c\u5e76\u540c\u65f6\u8fdb\u884c```delete```,```swap```,```add```\u64cd\u4f5c\u3002\u6ce8\u610f\uff0c\u4e0d\u80fd\u5728x\u4e3a\u961f\u9996\u5143\u7d20\u65f6\u624d\u66f4\u65b0\u7b54\u6848\uff0c\u8fd9\u6837\u4f1a\u4f7f\u6548\u7387\u5927\u6253\u6298\u6263\uff08\u4e0d\u66f4\u65b0\u7684\u8bdd,```dist[x]```\u4efb\u4e3a-1\uff0c\u76f8\u5f53\u4e8e\u5c11\u4e86\u5224\u91cd\uff09\n- \u5bf9\u4e8e\u4ee5\u4e0a\u4e09\u79cd\u64cd\u4f5c\u4e5f\u6709\u8981\u6c42\uff0c\u4e00\u4e0b\u8fdb\u884c\u4e00\u4e9b\u4f18\u5316\uff08\u7092\u9e21\u6a21\u62df\u5e94\u8be5\u4e5f\u80fd\u8fc7\uff0c\u56e0\u4e3a```swap()```,\u55ef\u55ef\uff09:\n- \u6cd5\u4e00\uff1a\u89c1\u4e00\u697c\u7684\u9898\u89e3\uff0c\u4e0d\u8fc7\u6709\u5c40\u9650\u6027\n\n- \u6cd5\u4e8c\uff1a\u9488\u5bf9```add()```,\u548c```delete()```,\u53ef\u4ee5\u7136\u679a\u4e3e\u7684[\u72b6\u6001\u6709\u5e8f\u5316](http://www.cnblogs.com/InfoEoR/p/7896862.html)\u4ee5\u8fbe\u5230\u4f18\u5316\u6548\u679c\uff0c\u9002\u7528\u8303\u56f4\u66f4\u5e7f\u6cdb\uff1b\n- \u4ee5\u4e0b\u4e3a\u6211\u7684\u4ee3\u7801\uff0c\u5176\u4e2d\u7ed3\u6784\u4f53\u90e8\u5206\u53ef\u4ee5\u7701\u53bb\uff0c```u.step```\u53ef\u4ee5\u76f4\u63a5\u7528```dist[x]```\u4ee3\u66ff\u3002\n\n```cpp\n#include<queue>\n#include<cstdio>\n#include<cstring>\nmain() {}\nint dist[10000000];\nstruct in{int x,s;}u;\nstd::queue<in>que;\nvoid tie(int \\*a,int &lth,int x) {\n    lth=0;//\u89e3\u7801 \n    while(x) a[lth++]=x%10,x/=10;\n}\nint dis(int \\*a,int lth) {\n    int x=0;//\u8fd8\u539f \n    while(lth) x\\*=10,x+=a[--lth];\n    return x;\n}\nvoid add(int \\*a,int lth,int step) {\n    int tmp;//o(n)\u7684add\u64cd\u4f5c \n    a[lth]=a[lth-1];\n    for(int i=lth-1;i>=1;i--) {\n        for(int j=a[i+1]+1;j<a[i-1];j++) {\n            a[i]=j;\n            tmp=dis(a,lth+1);\n            if(dist[tmp]==-1) dist[tmp]=step,que.push((in){tmp,step});\n        }\n        a[i]=a[i-1];\n    }\n}\nvoid del(int \\*a,int lth,int step) {\n    int tmp,out=0;//o(n)\u7684delete\u64cd\u4f5c \n    for(int i=lth-1;i>=0;i--) {\n        out^=a[i]^=out^=a[i];\n        tmp=dis(a,lth-1);\n        if(dist[tmp]==-1) dist[tmp]=step,que.push((in){tmp,step});\n    }\n}\nvoid swa(int \\*a,int lth,int step) {\n    int tmp;//o(n\\*(n-1)/2)\u7684swap\u64cd\u4f5c \n    for(int i=0;i<lth;i++) {\n        for(int j=i+1;j<lth;j++) {\n            if(a[i]==a[j]) continue;\n            a[i]^=a[j]^=a[i]^=a[j];\n            tmp=dis(a,lth);\n            if(dist[tmp]==-1) dist[tmp]=step,que.push((in){tmp,step});\n            a[i]^=a[j]^=a[i]^=a[j];\n        }\n    }\n}\nint entry() {\n    memset(dist,-1,sizeof dist);\n    int a[10],lth,lmt,x;\n    scanf(\"%d\",&x);\n    tie(a,lmt,x),dist[x]=0;\n    que.push((in){x,0});\n    while(!que.empty()) {\n        u=que.front();\n        que.pop();\n        memset(a,0,sizeof a);\n        tie(a,lth,u.x);\n        if(lth>1) del(a,lth,u.s+1),tie(a,lth,u.x);\n        if(lth>1) swa(a,lth,u.s+1),tie(a,lth,u.x);\n        if(lth<lmt) add(a,lth,u.s+1);\n    }\n    scanf(\"%d\",&lmt);\n    while(lmt--) {\n        scanf(\"%d\",&x);\n        printf(\"%d\\n\",dist[x]);\n    }\n    return 0;\n}\nint aptal=entry();\n\n```\n\n\u671b\u91c7\u7eb3\u3002\n",
        "postTime": 1511664172,
        "uid": 34920,
        "name": "\u65e9\u53f3\u6615",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "# 1 \u9898\u76ee\u5927\u610f\n\n**\u9898\u76ee\u96be\u5ea6** $\\color{blue}{\u63d0\u9ad8}$\n\n**\u9898\u76ee\u6807\u7b7e** \u641c\u7d22\n\n[\u539fOJ\u9898\u9762](https://www.luogu.com.cn/problem/P1132)\n\n## 1.1 \u9898\u76ee\u7b80\u4ecb\n\n\u73b0\u5728\u7ed9\u4f60\u4e00\u4e2a\u521d\u59cb\u6570\u5b57\uff0c\u8981\u6c42\u4f60\u7528\u4ee5\u4e0b\u4e09\u79cd\u53d8\u6362\u751f\u6210\u4e0d\u540c\u7684\u6570\u5b57\uff1a\n\n1.\u5c06 $s$ \u7684\u4efb\u610f\u4e24\u4f4d\u5bf9\u6362\u751f\u6210\u65b0\u7684\u6570\u5b57\uff0c\u4f8b\u5982 $143$ \u53ef\u4ee5\u751f\u6210$314,413,134$ \uff1b\n\n2.\u5c06 $s$ \u7684\u4efb\u610f\u4e00\u4f4d\u5220\u9664\u751f\u6210\u65b0\u7684\u6570\u5b57\uff0c\u4f8b\u5982 $143$ \u53ef\u4ee5\u751f\u6210 $14,13,43$ \uff1b\n\n3.\u5728 $s$ \u7684\u76f8\u90bb\u4e24\u4f4d\u4e4b\u95f4 $s_i$ , $s_{i + 1}$\u4e4b\u95f4\u63d2\u5165\u4e00\u4e2a\u6570\u5b57 $x$ \uff0c$x$ \u9700\u8981\u6ee1\u8db3 $s_i<x<s_{i + 1}$\u3002\u4f8b\u5982 $143$ \u53ef\u4ee5\u751f\u6210 $1243,1343$ \u4f46\u662f\u4e0d\u80fd\u751f\u6210 $1143,1543$ \u7b49\u3002\n\n\u53e6\u5916\uff0c\u5c0f\u660e\u7ed9\u89c4\u5219 $3$ \u53c8\u52a0\u4e86\u4e00\u4e2a\u9650\u5236\uff0c\u5373\u751f\u6210\u6570\u7684\u4f4d\u6570\u4e0d\u80fd\u8d85\u8fc7\u521d\u59cb\u6570 $s$ \u7684\u4f4d\u6570\u3002\u82e5 $s$ \u662f $143$ \uff0c\u90a3\u4e48 $1243$ \u4e0e $1343$ \u90fd\u662f\u65e0\u6cd5\u751f\u6210\u7684\uff1b\u82e5 $s$ \u4e3a $1443$ \uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06 $s$ \u5220\u9664\u53d8\u4e3a $143$ \uff0c\u518d\u751f\u6210 $1243$ \u6216 $1343$ \u3002\n\n\u63a5\u4e0b\u6765\uff0c\u518d\u7ed9\u4f60 $m$ \u4e2a\u6570\u5b57\uff0c\u95ee\u4f60\u8fd9\u4e9b\u6570\u53ef\u4e0d\u53ef\u7528 $s$ \u53d8\u5316\u51fa\u3002\u5982\u679c\u53ef\u4ee5\uff0c\u8f93\u51fa**\u6700\u77ed**\u7684\u6b65\u6570\uff0c\u4e0d\u53ef\u4ee5\u5c31\u8f93\u51fa $-1$ \u3002\n\n# 1.2 \u601d\u8def\u5206\u6790\n\n\u9996\u5148\u6211\u4eec\u770b\u5230\u8fd9\u9053\u9898\u7684\u6807\u7b7e\u662f\u641c\u7d22 ~~\uff08\u59a5\u59a5\u7684\u6807\u7b7e\u515a\uff09~~  \uff0c\u5c31\u5df2\u7ecf\u5b9a\u4e0b\u53ea\u80fd\u7528 $DFS$ \u6216\u8005 $BFS$ \u6765\u89e3\u51b3\u3002\u518d\u770b\u4e00\u773c\u6570\u636e\u8303\u56f4\uff1a$$m\\le50000\uff0cs<100000$\uff0c\u5c31\u9650\u5236\u4e86 $DFS$ \u3002\u663e\u800c\u6613\u89c1\uff0c\u4f1a\u8d85\u65f6\u3002\u53ef\u6709\u540c\u5b66\u5c31\u4f1a\u95ee\u4e86\uff1a\n\n\u90a3\u5e7f\u641c\u7206\u7a7a\u95f4\u600e\u4e48\u529e\uff1f\u5982\u679c\u5f53\u751f\u6210\u6570\u53d8\u5f97\u5f88\u5927\u600e\u4e48\u529e\uff1f\u6211\u4e4b\u524d\u4e5f\u60f3\u8fc7\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u662f\u5f53\u6211\u770b\u5230\u539f\u9898\u4e2d\u7684\u8fd9\u53e5\u8bdd **\u751f\u6210\u6570\u7684\u4f4d\u6570\u4e0d\u80fd\u8d85\u8fc7\u521d\u59cb\u6570 $s$ \u7684\u4f4d\u6570** \u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u751f\u6210\u6570\u518d\u5927\uff0c\u5b83\u7684\u4f4d\u6570\u4e5f\u4e0d\u80fd\u8d85\u8fc7 $s$ \u7684\u4f4d\u6570\u3002$s<100000$\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u751f\u6210\u6570\u4e5f\u4e0d\u80fd **\u5927\u4e8e\u7b49\u4e8e**  $100000$ \u3002\u6807\u8bb0\u6570\u7ec4\u53ea\u9700\u8981\u5f00\u6bd4 $100000$ \u5927\u4e00\u70b9\u5c31\u597d\u4e86\uff08\u597d\u4e60\u60ef\uff0c\u4ee5\u9632\u6570\u7ec4\u8d8a\u754c\uff09\u3002\n\n# 2 \u4ee3\u7801\u8bb2\u89e3\n\n# 2.1 $BFS$\n\n\u5148\u6765\u4e00\u6ce2 $BFS$ \u7684\u57fa\u672c\u64cd\u4f5c\u5427\uff08\u6a21\u677f\uff09\uff1a\n\n```cpp\nint judge[100005];//\u6807\u8bb0\u6570\u7ec4\nstruct node{\n\tint data;//\u6570\n\tint step;//\u6700\u5c0f\u8def\u5f84\n};\nqueue<node>true_queue;//\u5b9a\u4e49\u4e00\u4e2a\u961f\u5217\nvoid search_bfs(){//\u5e7f\u5ea6\u641c\u7d22\u4f18\u5148\n\ttrue_queue.push(node{s,0});//\u628as\u5b58\u8fdb\u961f\u5217\n\tjudge[s]=0;//s\u7684\u6700\u77ed\u8def\u5f84\u4e3a0\n\twhile(!true_queue.empty()){\n\t\tnode node_now=true_queue.front();//\u50a8\u5b58\u5f53\u524d\u51fa\u961f\u5217\u7684\u6570\n\t\ttrue_queue.pop();//\u5f53\u524d\u6570\u51fa\u961f\u5217\n\t\t//\u64cd\u4f5c1\uff1a\u5bf9\u6362\n\t\t//\u64cd\u4f5c2\uff1a\u5220\u9664\n\t\t//\u64cd\u4f5c3\uff1a\u751f\u6210\n\t}\n}\n```\n\n## 2.2 \u64cd\u4f5c\n\n**\u64cd\u4f5c\u51c6\u5907**\n\n\u6211\u4eec\u5148\u770b\u4e00\u4e0b\u539f\u9898\u76ee\u4e2d\u7684\u4e09\u4e2a\u64cd\u4f5c\uff0c\u77e5\u9053\u5982\u679c\u7528\u4e00\u4e2a\u666e\u901a\u7684\u6570\u6765\u505a\u64cd\u4f5c\u662f\u5f88\u9ebb\u70e6\u7684\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u60f3\u5230\u4e86 **\u6570\u7ec4** \u3002\u7528\u6570\u7ec4\u6765\u5bc4\u5b58\u64cd\u4f5c\u6570\u66f4\u65b9\u4fbf\u3002\n\n```cpp\nint bs=1,shu[10]={0},front=0;\nint now=node_now.data;\nwhile(now){//\u628a\u64cd\u4f5c\u6570\u4e2d\u7684\u6bcf\u4e00\u4f4d\u6570\u90fd\u5b58\u8fdb\u6570\u7ec4\uff08\u7c7b\u4f3c\u9ad8\u7cbe\uff09\n\tshu[++front]=now%10;\n\tnow/=10;\n}\nif(node_now.data==s)maxx=front;//\u50a8\u5b58\u6240\u6709\u64cd\u4f5c\u7684\u6700\u9ad8\u4f4d\u6570\n```\n\n**\u64cd\u4f5c $1$**\n\n\u64cd\u4f5c $1$ \u662f\u5bf9\u6362\u6570\uff0c\u8bb0\u4f4f\u9898\u76ee\u4e2d\u6ca1\u8bb2\u76f8\u90bb\u4e24\u4f4d\u5bf9\u6362\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c06\u6570\u7ec4\u4e2d\u4efb\u610f\u4e0d\u540c\u7684\u4e24\u4f4d\u6570\u5b57\u8fdb\u884c\u5bf9\u6362\u3002\n\n```cpp\nfor(int i=1;i<=front;i++){\n\tfor(int k=1;k<=front;k++){\n\t\tint lin_shu[10]={0};\n\t\tfor(int j=1;j<=front;j++)lin_shu[j]=shu[j];//\u628ashu\u7684\u6bcf\u4e00\u4f4d\u6570\u590d\u5236\u5230lin_shu\u91cc\n\t\tswap(lin_shu[i],lin_shu[k]);//\u4e24\u4f4d\u8fdb\u884c\u4ea4\u6362\n\t\tint sum=0;\n\t\tfor(int j=front;j>0;j--){//\u8ba1\u7b97\u548c\n\t\t\tsum*=10;\n\t\t\tsum+=lin_shu[j];\n\t\t}\n\t\tif(judge[sum]==0x3f3f3f3f){//\u5f53\u8fd9\u4e2a\u6570\u6ca1\u88ab\u6807\u8bb0\u8fc7\u65f6\n\t\t\ttrue_queue.push(node{sum,node_now.step+1});//\u5165\u961f\n\t\t\tjudge[sum]=node_now.step+1;//\u6b65\u6570+1\n\t\t}\n\t}\n}\n```\n\n**\u64cd\u4f5c $2$**\n\n\u64cd\u4f5c $2$ \u5c31\u662f\u628a\u539f\u6570\u5220\u6389\u4e00\u4f4d\uff0c\u8bb0\u4f4f\u5f53\u5220\u540e\u7684\u64cd\u4f5c\u6570 $==0$ \u65f6\uff0c\u4e0d\u8981\u5165\u961f\u3002\n\n```cpp\nfor(int i=1;i<=front;i++){\n\tint x=i;\n\tint sum=0;\n\tfor(int j=front;j>0;j--){//\u6c42\u548c\n\t\tif(j==x)continue;//\u5220\u6389\u7684\u90a3\u4e00\u4f4d\n\t\tsum*=10;\n\t\tsum+=shu[j];\n\t}\n\tif(sum!=0&&judge[sum]==0x3f3f3f3f){//\u5982\u679c\u6ca1\u88ab\u6807\u8bb0\u8fc7\u4e14\u4e0d\u7b49\u4e8e0\u5c31\u5165\u961f\n\t\ttrue_queue.push(node{sum,node_now.step+1});\n\t\tjudge[sum]=node_now.step+1;\n\t}\t}\n```\n\n**\u64cd\u4f5c $3$**\n\n\u64cd\u4f5c $3$ \u7565\u5fae\u4f1a\u9ebb\u70e6\u4e00\u70b9\uff0c\u5b83\u662f\u63d2\u5165\u4e00\u4e2a\u6570\uff0c\u4e14\u5de6\u8fb9\u7684\u90a3\u4e00\u4f4d\u6bd4\u5b83**\u5c0f**\uff0c\u53f3\u8fb9\u7684\u6bd4\u5b83**\u5927**\u3002\u90a3\u5c31\u662f\u627e\u5230\u76f8\u90bb\u7684\u4e24\u4f4d\uff0c\u4e24\u4e2a\u4e4b\u5dee**\u5927\u4e8e\u7b49\u4e8e** $2$ \u4e14\u5de6\u8fb9\u7684\u6570\u6bd4\u53f3\u8fb9\u7684\u6570\u5c0f\u3002\u8fd8\u9700\u8981\u5224\u65ad\u8fd9\u4e2a\u6570\u7684\u4f4d\u6570\u4e0d\u8d85\u8fc7 $s$ \u7684\u4f4d\u6570\u3002\n\n```cpp\nif(front>=maxx)continue;//\u8d85\u8fc7s\u7684\u4f4d\u6570\nfor(int i=1;i<front;i++){\n\tint x=i;\n\tint sum[10]={0},front_lin=0;\n\tif(shu[i]>=shu[i+1]+2){//\u5f53\u76f8\u90bb\u4e24\u4f4d\u5141\u8bb8\u63d2\u5165\u65f6\n\t\tfor(int k=shu[i+1]+1;k<shu[i];k++){//\u8ba1\u7b97\u548c\n\t\t\tfor(int j=front;j>0;j--){\n\t\t\t\tif(j==x){\n\t\t\t\t\tsum[k]*=10;\n\t\t\t\t\tsum[k]+=k;\n\t\t\t\t}\n\t\t\t\tsum[k]*=10;\n\t\t\t\tsum[k]+=shu[j];\n\t\t\t}\n\t\t}\n\t\tfor(int j=shu[i+1]+1;j<shu[i];j++){//\u5165\u961f\n\t\t\tif(sum[j]<=100000&&judge[sum[j]]==0x3f3f3f3f){\n\t\t\t\ttrue_queue.push(node{sum[j],node_now.step+1});\n\t\t\t\tjudge[sum[j]]=node_now.step+1;//\u6807\u8bb0\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n# 3 AC\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<queue>\nusing namespace std;\nint s,n,maxx;\nint judge[100005];\nstruct node{\n\tint data;\n\tint step;\n};\nqueue<node>true_queue;\nvoid search_bfs(){\n\ttrue_queue.push(node{s,0});\n\tjudge[s]=0;\n\twhile(!true_queue.empty()){\n\t\tnode node_now=true_queue.front();\n\t\ttrue_queue.pop();\n\t\tint bs=1,shu[10]={0},front=0;\n\t\tint now=node_now.data;\n\t\twhile(now){\n\t\t\tshu[++front]=now%10;\n\t\t\tnow/=10;\n\t\t}\n\t\tif(node_now.data==s)maxx=front;\n\t\t//\u64cd\u4f5c1\uff1a\u5bf9\u6362\n\t\tfor(int i=1;i<=front;i++){\n\t\t\tfor(int k=1;k<=front;k++){\n\t\t\t\tint lin_shu[10]={0};\n\t\t\t\tfor(int j=1;j<=front;j++)lin_shu[j]=shu[j];\n\t\t\t\tswap(lin_shu[i],lin_shu[k]);\n\t\t\t\tint sum=0;\n\t\t\t\tfor(int j=front;j>0;j--){\n\t\t\t\t\tsum*=10;\n\t\t\t\t\tsum+=lin_shu[j];\n\t\t\t\t}\n\t\t\t\tif(judge[sum]==0x3f3f3f3f){\n\t\t\t\t\ttrue_queue.push(node{sum,node_now.step+1});\n\t\t\t\t\tjudge[sum]=node_now.step+1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//\u64cd\u4f5c2\uff1a\u5220\u9664\n\t\tfor(int i=1;i<=front;i++){\n\t\t\tint x=i;\n\t\t\tint sum=0;\n\t\t\tfor(int j=front;j>0;j--){\n\t\t\t\tif(j==x)continue;\n\t\t\t\tsum*=10;\n\t\t\t\tsum+=shu[j];\n\t\t\t}\n\t\t\tif(sum!=0&&judge[sum]==0x3f3f3f3f){\n\t\t\t\ttrue_queue.push(node{sum,node_now.step+1});\n\t\t\t\tjudge[sum]=node_now.step+1;\n\t\t\t}\n\t\t}\n\t\t//\u64cd\u4f5c3\uff1a\u751f\u6210\n\t\tif(front>=maxx)continue;\n\t\tfor(int i=1;i<front;i++){\n\t\t\tint x=i;\n\t\t\tint sum[10]={0},front_lin=0;\n\t\t\tif(shu[i]>=shu[i+1]+2){\n\t\t\t\tfor(int k=shu[i+1]+1;k<shu[i];k++){\n\t\t\t\t\tfor(int j=front;j>0;j--){\n\t\t\t\t\t\tif(j==x){\n\t\t\t\t\t\t\tsum[k]*=10;\n\t\t\t\t\t\t\tsum[k]+=k;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsum[k]*=10;\n\t\t\t\t\t\tsum[k]+=shu[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(int j=shu[i+1]+1;j<shu[i];j++){\n\t\t\t\t\tif(sum[j]<=100000&&judge[sum[j]]==0x3f3f3f3f){\n\t\t\t\t\t\ttrue_queue.push(node{sum[j],node_now.step+1});\n\t\t\t\t\t\tjudge[sum[j]]=node_now.step+1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tmemset(judge,0x3f,sizeof(judge));\n\tscanf(\"%d%d\",&s,&n);\n\tsearch_bfs();\n\tfor(int i=1;i<=n;i++){\n\t\tint t;\n\t\tscanf(\"%d\",&t);\n\t\tif(judge[t]==0x3f3f3f3f)printf(\"-1\\n\");\n\t\telse printf(\"%d\\n\",judge[t]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1612662827,
        "uid": 305891,
        "name": "little_vegetable",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 1132"
    },
    {
        "content": "\u4e00\u9053\u4e0d\u9519\u7684\u5b57\u7b26\u4e32+\u5bbd\u641c\u7ec3\u624b\u9898\n\n----\n\n### \u601d\u8def\n\n\u9996\u5148\u663e\u800c\u6613\u89c1\u7684\u662f\uff0c\u5173\u4e8e\u4e00\u4e2a\u6570\u5b57\u80fd\u5230\u8fbe\u7684\u6570\u5b57\u7684\u6700\u5927\u957f\u5ea6\uff0c\u54b1\u4eec\u5206\u522b\u770b\u4e09\u4e2a\u64cd\u4f5c\uff1a\n\n- \u64cd\u4f5c1\uff0c\u4f4d\u6570\u4e0d\u53d8\n- \u64cd\u4f5c2\uff0c\u4f4d\u6570\u51cf\u5c11\n- \u64cd\u4f5c3\uff0c\u4f4d\u6570\u52a0\u4e00\uff0c\u4f46\u4e0d\u4f1a\u8d85\u8fc7\u521d\u59cb\u6570\u5b57\u7684\u957f\u5ea6\n\n\u6240\u4ee5\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff1a\u4e0d\u7ba1\u600e\u4e48\u53d8\u5316\uff0c\u6570\u5b57\u7684\u957f\u5ea6\u90fd\u4e0d\u4f1a\u8d85\u8fc7\u539f\u6570\u5b57\u7684\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f**\u6700\u5927\u53ea\u80fd\u641c\u7d22\u5230 99999** , \u6240\u4ee5\u6beb\u4e0d\u72b9\u8c6b\u7528\u5bbd\u641c\n\n\u800c\u5728\u5bbd\u641c\u4e2d\uff0c\u7b2c\u4e00\u6b21\u88ab\u641c\u5230\u80af\u5b9a\u662f\u6700\u4f73\u7b54\u6848\uff0c\u6240\u4ee5\u53ef\u4ee5\u52a0\u4e0a\u4e00\u4e2a\u8bb0\u5fc6\u5316\uff0c\u590d\u6742\u5ea6\u964d\u5230 $\\operatorname{O(nm )}$ , \u5176\u4e2d $m$ \u662f**while\u4e2d\u8fd0\u884c\u4e00\u6b21\u9700\u8981\u7684\u65f6\u95f4**,\u5728\u6211\u7684\u7a0b\u5e8f\u4e2d\uff0c$m$ \u7ea6\u662f $\\operatorname{l^3}$\uff0c$l$ \u662f\u539f\u6570\u7684\u4f4d\u6570\n\n\u6700\u591a\u7ea6\u9700\u8981 $\\operatorname{O(12500000)}$ \u7684\u65f6\u95f4\uff0c\u5b8c\u5168\u53ef\u4ee5\u5728 1s \u5185\u8dd1\u51fa\u6765\n\n\u6700\u540e\u63d0\u4e00\u53e5\uff0c\u56e0\u4e3a\u8fd9\u4e09\u4e2a\u64cd\u4f5c\u9700\u8981\u63d2\u5165\uff0c\u5220\u9664\uff0c\u4ea4\u6362\u4ec0\u4e48\u7684\uff0c\u6240\u4ee5\u6211\u7528\u4e86 `string` \u6765\u5b58\u50a8\u6570\u5b57\n\n----\n\n### \u4ee3\u7801\n\n- \u7ec6\u8282\u8bf4\u660e\uff1a\u5728\u5f00\u59cb\u628a\u539f\u6570\u7684\u7b54\u6848\u8bbe\u6210 $1$ \u800c\u4e0d\u662f $0$ , \u610f\u5473\u7740\u6240\u6709**\u53ef\u901a\u8fc7\u539f\u6570\u8f6c\u6362\u5230\u7684\u6570**\u7684\u7b54\u6848\u90fd\u5927\u4e00\uff0c\u6240\u4ee5\u8f93\u51fa\u65f6\u8981\u51cf\u4e00\u3002\u800c\u8fd9\u6837\u5904\u7406\u5b8c\u540e\uff0c**\u4e0d\u53ef\u901a\u8fc7\u539f\u6570\u8f6c\u6362\u5230\u7684\u6570**\u7684\u7b54\u6848\u5728\u51cf\u4e00\u540e\u5c31\u662f $-1$ , \u6b63\u597d\u7b26\u5408\u9898\u76ee\u8981\u6c42\n\n```\n\n// Problem: P1132 \u6570\u5b57\u751f\u6210\u6e38\u620f\n// Contest: Luogu\n// URL: https://www.luogu.com.cn/problem/P1132\n// Memory Limit: 125 MB\n// Time Limit: 1000 ms\n// Powered by CP Editor (https://github.com/cpeditor/cpeditor)\n\n#include <bits/stdc++.h>\nusing namespace std;\nint m,l;\nstring n;\nmap<string,int>ans;\nqueue<string>q;\nvoid done()\n{\n\tstring u,v,f;\n\tint fl;\n\tq.push(n);\n\twhile(!q.empty())\n\t{\n\t\tu=q.front();q.pop();fl=u.length();\n\t\t//cout<<u<<endl;\n\t\t//Step 1\n\t\tfor(int i=0;i<fl;i++)\n\t\t{\n\t\t\tfor(int j=i+1;j<fl;j++)\n\t\t\t{\n\t\t\t\tv=u;\n\t\t\t\tswap(v[i],v[j]);\n\t\t\t\tif(!ans[v])\n\t\t\t\t{\n\t\t\t\t\tans[v]=ans[u]+1;\n\t\t\t\t\tq.push(v);\n\t\t\t\t}\n\t\t\t\tswap(v[i],v[j]);\n\t\t\t}\n\t\t}\n\t\t//Step 2\n\t\tfor(int i=0;i<fl;i++)\n\t\t{\n\t\t\tv=u.substr(0,i)+u.substr(i+1);\n\t\t\tif(!ans[v])\n\t\t\t{\n\t\t\t\tans[v]=ans[u]+1;\n\t\t\t\tq.push(v);\n\t\t\t}\n\t\t}\n\t\t// Step 3*\n\t\tif(u.length()<l)\n\t\t{\n\t\t\tfor(int i=0;i<fl-1;i++)\n\t\t\t{\n\t\t\t\tfor(char j=u[i]+1;j<u[i+1];j++)\n\t\t\t\t{\n\t\t\t\t\tv=u;\n\t\t\t\t\tf=\"\";\n\t\t\t\t\tf+=j;\n\t\t\t\t\tv.insert(i+1,f);\n\t\t\t\t\tif(!ans[v])\n\t\t\t\t\t{\n\t\t\t\t\t\tans[v]=ans[u]+1;\n\t\t\t\t\t\tq.push(v);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\tcin>>n;l=n.length();\n\tans[n]=1;\n\tdone();\n\tcin>>m;\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tcin>>n;\n\t\tcout<<ans[n]-1<<endl;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1607602886,
        "uid": 227728,
        "name": "\u51b0\u7cd6\u9e3d\u5b50",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "### \u3010\u9898\u76ee\u5927\u610f\u3011\n\u7ed9\u5b9a\u4e00\u4e2a\u521d\u59cb\u6570\u5b57\n\n\u6709\u4e00\u4e9b\u53d8\u6362\u65b9\u5f0f\n\n\u6c42\u7531\u539f\u6570\u5230\u6700\u7ec8\u7ed3\u679c\u7684\u6700\u5c0f\u6b65\u6570\n\n### \u3010\u5206\u6790\u3011\n\u628a\u6570\u5b57\u62bd\u8c61\u6210\u8282\u70b9\n\n\u9898\u610f\u5c31\u662f\u6c42\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u6700\u77ed\u8def\n\n\u7531\u4e8e\u6bcf\u4e00\u6b65\u4ee3\u4ef7\u90fd\u662f1\n\n\u76f4\u63a5BFS\u5373\u53ef\n\n\u53d8\u5316\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5206\u522b\u679a\u4e3e\u6570\u4f4d\uff0c\u5229\u7528%\u4e0e/\u8fd0\u7b97\u53d6\u5f97\u6bcf\u4e00\u4f4d\u7684\u6570\u5b57\uff0c\u518d\u6539\u53d8\u539f\u6570\n\n### \u3010\u89e3\u6cd5\u3011\nBFS\n\n### \u3010\u4ee3\u7801\u3011\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1e6+5;\nint s,m,que[maxn],ans[maxn],INF,len,hed,til;\nint mi[10]={1,10,100,1000,10000,100000,1000000,10000000};//\u5148\u6253\u6570\u4f4d\u8868\nbool vis[maxn];\nint read(){\n\tint ret=0,f=1;char ch=getchar();\n\twhile(ch>'9'||ch<'0'){if(ch=='-')f=-f;ch=getchar();}\n\twhile(ch>='0'&&ch<='9') ret=ret*10+ch-'0',ch=getchar();\n\treturn ret*f;\n}\nvoid work1(int x){ //\u4ea4\u6362\u64cd\u4f5c\n\tint l=log10(x)+1;\n\tfor(int i=1;i<l;i++)\n\tfor(int j=i+1;j<=l;j++){\n\t\tint a=x/mi[i-1]%10,b=x/mi[j-1]%10; //\u53d6\u51fa\u7b2ci\u4f4d\u548c\u7b2cj\u4f4d\u7684\u6570\u5b57\n\t\tint y=x-a*mi[i-1]-b*mi[j-1]+b*mi[i-1]+a*mi[j-1];//\u5728\u539f\u6570\u4e0a\u52a0\u51cf\uff0c\u76f8\u5f53\u4e8e\u4ea4\u6362\n\t\tif(vis[y]) continue;\n\t\tvis[y]=1;\n\t\tans[y]=ans[x]+1;\n\t\tque[++til]=y;\n\t}\n}\nvoid work2(int x){//\u5220\u9664\u64cd\u4f5c\n\tint l=log10(x)+1;\n\tfor(int i=1;i<=l;i++){\n\t\tint a=x%mi[i-1];//\u53d6\u51fa\u540e\u9762\u51e0\u4f4d\n\t\tint y=x/mi[i]*mi[i-1]+a;//\u628a\u539f\u6570\u53bb\u6389\u540e\u9762\u51e0\u4f4d\u518d\u63a5\u4e0a\u4e4b\u524d\u53d6\u51fa\u7684\u6570\u5b57\uff0c\u76f8\u5f53\u4e8e\u5220\u6570\n\t\tif(vis[y]) continue;\n\t\tvis[y]=1;\n\t\tans[y]=ans[x]+1;\n\t\tque[++til]=y;\n\t}\n}\nvoid work3(int x){//\u6dfb\u52a0\u64cd\u4f5c\n\tint l=log10(x)+1;\n\tif(l==len) return;\n\tfor(int i=1;i<l;i++){\n\t\tint a=x/mi[i]%10,b=x/mi[i-1]%10;//\u5355\u72ec\u53d6\u51fa\u76f8\u90bb\u4e24\u4f4d\n\t\tfor(int j=a+1;j<b;j++){\n\t\t\tint c=x%mi[i];\n\t\t\tint y=(x-c)*10+j*mi[i]+c;//\u628a\u539f\u6570\u4e2d\u95f4\u65ad\u5f00\u540e\u52a0\u4e0a\u9700\u8981\u6dfb\u52a0\u7684\u6570\u5b57\n\t\t\tif(vis[y]) continue;\n\t\t\tvis[y]=1;\n\t\t\tans[y]=ans[x]+1;\n\t\t\tque[++til]=y;\n\t\t}\n\t}\n}\nvoid BFS(){\n\thed=0,til=1;\n\tmemset(ans,63,sizeof ans);\n\tINF=ans[0];\n\tans[s]=0,vis[s]=1,que[1]=s;\n\twhile(hed!=til){\n\t\tint x=que[++hed];\n\t\twork1(x);\n\t\twork2(x);\n\t\twork3(x);\n\t}\n}\nint main(){\n\tfreopen(\"P1132.in\",\"r\",stdin);\n\tfreopen(\"P1132.out\",\"w\",stdout);\n\ts=read(),m=read();\n\tlen=log10(s)+1;\n\tBFS();\n\tfor(int i=1;i<=m;i++){\n\t\tint x=read();\n\t\tprintf(\"%d\\n\",ans[x]==INF?-1:ans[x]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1572179207,
        "uid": 116251,
        "name": "\u7834\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "\u88f8\u7684bfs\u3002\n\n\u522b\u7684\u9898\u89e3\u5927\u591a\u7528\u5b57\u7b26\u4e32\uff0c\u4f46\u4e5f\u53ef\u4ee5\u76f4\u63a5\u622a\u53d6\u6570\u5b57\u3002\n\n\u4f7f\u7528\u9664\u6cd5\u548c\u53d6\u6a21\u53ef\u4ee5\u5206\u88c2\u6574\u6570\uff0c\u4e58\u6cd5\u548c\u52a0\u6cd5\u53ef\u4ee5\u5408\u5e76\u3002\n\n\u4e3e\u4e2a\u6817\u5b50\uff1a\n\n\u628a $31415926$ \u8fd9\u4e2a8\u4f4d\u6574\u6570\u4ece\u7b2c\u56db\u4f4d\uff08\u4ece\u5de6\u5f80\u53f3\u6570\uff09\u540e\u9762\u622a\u6210\u4e24\u4e2a\u6574\u6570\n\n\u5148\u628a\u8fd9\u4e2a\u6570\u9664\u4ee51000\uff08 $10^{(8-4-1)}$\uff09\u5f97\u5230\u524d\u9762\u90a3\u4e00\u4e2a\u6574\u6570\u662f $3141$\n\n\u518d\u53d6\u6a2110000( $10^{8-4}$ ) \uff0c\u5f97\u5230\u540e\u9762\u7684\u662f $5926$ \u3002\n\n\u5408\u5e76\u4e5f\u5f88\u7b80\u5355\uff0c\u6bd4\u5982\u4e0a\u9762\u7684\u4e24\u4e2a\u6570 $3141 \\times 10^4 + 5926 = 31410000 + 5926=31415926$ \u3002\n\n\u7528\u8fd9\u4e24\u4e2a\u57fa\u672c\u64cd\u4f5c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u9898\u76ee\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\u3002\n\n\u6570\u5b57\u622a\u53d6\u6cd5\u65f6\u95f4\u590d\u6742\u5ea6\u8f83\u4f18\uff08\u6bcf\u4e2a\u64cd\u4f5c $O(log(n))$ \u7ea7\u522b\u6bd4\u9694\u58c1\u5b57\u7b26\u4e32 $O(n)$ \u8981\u597d\u4e0a\u90a3\u4e48\u4e00\u70b9\uff0c\u4f46\u5e38\u6570\u8f83\u5927\uff09\u3002\n\n\u8be2\u95ee\u6b21\u6570\u5f88\u591a\uff0c\u53ef\u4ee5\u9884\u5904\u7406\u6240\u6709\u53ef\u80fd\u53d8\u6362\u51fa\u7684\u6570\uff0c\u6bcf\u6b21 $O(1)$ \u67e5\u8be2\u3002\n\n```cpp\n#include <iostream>\n#include <cstring>\n#include <cmath>\n#include <queue>\nusing namespace std;\nint powerOf10(int power) {//\u5feb\u901f\u5e42\u8ba1\u7b9710\u7684power\u6b21\u65b9 O(log n)\n    if(power == 0)    return 1;\n    int res = 1, tmp = powerOf10(power >> 1);\n    if(power & 1) return tmp * tmp * 10;\n    return tmp * tmp;\n}\ninline int digit(int x) {//\u8ba1\u7b97\u6570\u5b57\u4f4d\u6570 O(log10(n))\n    int res = 0;\n    while(x > 0) {\n        x /= 10;\n        res++;\n    }\n    return res;\n}\ninline int g\u200bet(int base, int pos) {//\u83b7\u53d6base\u4e0b\u6807\u4e3apos\u7684\u6570\u5b57 O(log n)\n    int db = digit(base);\n    if(pos < 0 || po\u200bs >= db)  return 1;//\u9632\u8d8a\u754c \u8fd9\u6837\u4e0d\u9700\u8981\u5728bfs\u91cc\u7279\u5224\n    return base / powerOf10(digit(base) - pos - 1) % 10;\n}\ninline int swap(int base, int x, int y) {//\u4ea4\u6362base\u4e0b\u6807\u4e3ax\u548cy\u7684\u6570\u5b57 O(log n)\n    int px = power\u200bOf10(digit(base) - x - 1), py = powerOf10(digit(base) - y - 1);//x,y\u540e\u662f10\u7684\u51e0\u6b21\u65b9\n    int nx = get(base, x), ny = get(base, y);//x,y\u4f4d\u7f6e\u4e0a\u5bf9\u5e94\u7684\u6570\n    base -= nx * px;//\u51cf\u6389\u539f\u4f4d\u7f6e\u7684\u6570\n    base -= ny * py;\n    base += nx * py;//\u4e92\u6362\u4f4d\u7f6e\u52a0\u56de\u53bb\n    bas\u200be += ny * px;\n    return base;\n}\ninline int insert(int base, int pos, int x) {//\u5728base\u4e0b\u6807pos\u7684\u524d\u65b9\u63d2\u5165x O(log n)\n    int pivot = powerOf10(digit(base) - pos), pre = base / pivot, post = base % pivot;//\u627e\u5206\u5272\u70b9\u5e76\u5c06base\u62c6\u5206\u6210pre,post\u4e24\u90e8\u5206\n    int pd\u200bpost = powerOf10(digit(post));\n    return pre * pdpost * 10 + x * pdpost + post;//\u5408\u5e76\u65f6\u52a0\u5165x\n}\ninline int erase(int base, int pos) {//\u5220\u9664base\u4e0b\u6807pos\u4f4d\u7f6e\u7684\u6570\u5b57 O(log n)\n    int pivot = powerOf\u200b10(digit(base) - pos - 1), pre = base / pivot, post = base % pivot;//\u5206\u5272\n    pre /= 10;//\u5220\u9664\u524d\u90e8\u5206\u6700\u540e\u4e00\u4e2a\u6570\u5b57\uff08\u6307\u5b9a\u6570\u5b57\uff09\n    return pre * powerOf10(digit(post)) + post;//\u5408\u5e76\n}\nint mem[1000010], start, n, dstart;\nqueue<int> q;\ninline void upd\u200bate(int cur, int nxt) {//\u66f4\u65b0mem\uff08\u7b54\u6848\uff09\u6570\u7ec4\n    if(mem[nxt] == -1) {//\u56e0\u4e3a\u662fbfs\u800c\u4e14\u201c\u4ee3\u4ef7\u201d\u662f1\uff0c\u6240\u4ee5\u6bcf\u4e2a\u70b9\u7b2c\u4e00\u6b21\u641c\u5230\u7684\u5c31\u662f\u6700\u4f18\u89e3\n        mem[nxt] = mem[cur] + 1;\n        q.push(nxt);\n    }\n}\nvoid bfs() {\n    q.push(start);\n    memset(mem, -1, sizeof(mem));\n    mem[sta\u200brt] = 0;\n    while(q.size()) {//\u6807\u51c6\u5e7f\u641c\u6a21\u677f\n        int cur = q.front();\n        q.pop();\n        int d = digit(cur);\n        if(d == 1)    cont\u200binue;//\u5982\u679c\u4f4d\u6570=1\uff0c\u90a3\u4e48\u4ec0\u4e48\u4e5f\u505a\u4e0d\u4e86\n        for(int i = 0; i < d; i++) {//\u4ea4\u6362\u64cd\u4f5c\n            for(int j = i + 1; j < d; j++) {\n                int nxt = swap(cur, i, j);\n                update(cur, nxt);                                                                                                                                                                                           \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t                                                                                                           **\u53cd\u6284\u88ad**\n            }\n        }\n        for(int i = 0; i < d; i++) {//\u5220\u9664\u64cd\u4f5c\n            int nxt = era\u200bse(cur, i);\n            update(cur, nxt);\n        }\n        if(d < dstart)//\u6ce8\u610f\u201c\u4f4d\u6570\u4e0d\u80fd\u8d85\u8fc7\u8d77\u59cb\u4f4d\u6570\u201d\u7684\u6761\u4ef6\n            for(int i = 1; i < d; i++) {//\u63d2\u5165\u64cd\u4f5c\n                for(int j = get(cur, i - 1) + 1; j < get(cur, i); j++) {\n                    int nxt = insert(cur, i, j);\n                    update(cur, nxt);\n                }\n            }\n    }\n}\nint main() {\n    cin >> start >> n;\n    dstart = digi\u200bt(start);\n    b\u200bfs();//\u9884\u5904\u7406\n    while(n--) {\n        int target;\n        cin >> target;\n        cout << mem[target] << endl;\n    }\n    syst\u200bem(\"pause\");\n    return 0;\n}\n```\n",
        "postTime": 1614355150,
        "uid": 248302,
        "name": "d0j1a_1701",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "### \u641c\u7d22\u8be6\u89e3\n\u9898\u76ee\u94fe\u63a5 [$\\mathfrak{P1132}$](https://www.luogu.com.cn/problem/P1132)\u3002\n\n### \u601d\u8def\n\u5982\u679c\u5bf9\u4e8e\u6bcf\u6b21\u8be2\u95ee\u90fd\u8fdb\u884c\u4e00\u6b21 $bfs$\uff0c\u6c42\u51fa\u5f97\u5230 $t$ \u7684\u64cd\u4f5c\u6b21\u6570\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(mq)$\uff0c\u5176\u4e2d $q$ \u4e3a\u5355\u6b21\u8be2\u95ee\u751f\u6210\u7684\u6570\u7684\u603b\u6570\uff08\u5728\u6700\u52a3\u60c5\u51b5\u4e0b\uff0c\u5373\u65e0\u6cd5\u5f97\u5230 $t$ \u65f6\uff0c\u5355\u6b21\u8be2\u95ee\u751f\u6210\u7684\u6570\u7684\u603b\u6570\u5373\u4e3a $s$ \u80fd\u6784\u9020\u51fa\u7684\u6240\u6709\u6570\u5b57\u603b\u6570\uff09\u3002\u5728 $s<1e6$ \u7684\u6570\u636e\u4e0b\u663e\u7136\u5f88\u5bb9\u6613\u8d85\u65f6\u3002  \n\u53ef\u4ee5\u8fd9\u6837\u611f\u6027\u5730\u7406\u89e3\uff1a\u6bcf\u6b21\u8be2\u95ee\u6211\u4eec\u90fd\u8981\u91cd\u65b0\u5bf9 $s$ \u8fdb\u884c\u6784\u9020\uff0c\u8fdb\u884c\u4e86\u5927\u91cf\u91cd\u590d\u7684\u64cd\u4f5c\uff0c\u964d\u4f4e\u4e86\u6548\u7387\u3002\n\n\u90a3\u8fd8\u4e0d\u5982\u76f4\u63a5\u9884\u5904\u7406\u51fa $s$ \u80fd\u6784\u9020\u51fa\u7684\u6240\u6709\u6570\uff0c\u6bcf\u6b21\u8be2\u95ee $O(1)$ \u56de\u7b54\u3002  \n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(m+q)$\uff0c\u5176\u4e2d $q$ \u4e3a $s$ \u80fd\u6784\u9020\u51fa\u7684\u6240\u6709\u6570\u5b57\u603b\u6570\u3002$q$ \u8fdc\u5c0f\u4e8e $1e7$\uff0c\u6b64\u7b97\u6cd5\u53ef\u884c\u3002\n\n### AC CODE\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <queue>\nusing namespace std;\n\nconst int maxn = 500010;\n\nint n, m, s[maxn], Len;\nbool flag[maxn]; int f[maxn];\nqueue<int> q;\n\nvoid bfs() {\n\twhile (q.size()) {\n\t\tint u = q.front(); q.pop();\n\t\tint len = 0, t = u, x = 0;\n\t\twhile (t) s[++len] = t % 10, t /= 10;\n\t\t//\u5bf9\u6362\n\t\tfor (int i = 1; i < len; ++i) {\n\t\t\tfor (int j = i + 1; j <= len; ++j) {\n\t\t\t\tx = 0;\n\t\t\t\tswap(s[i], s[j]);\n\t\t\t\tfor (int k = len; k; --k) x = x * 10 + s[k];\n\t\t\t\tif (flag[x]) {\n\t\t\t\t\tswap(s[i], s[j]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tflag[x] = true; f[x] = f[u] + 1; q.push(x);\n\t\t\t\tswap(s[i], s[j]);\n\t\t\t}\n\t\t}\n\t\t//\u5220\u9664\n\t\tfor (int i = 1; i <= len; ++i) {\n\t\t\tx = 0;\n\t\t\tfor (int j = len; j; --j) {\n\t\t\t\tif (j == i) continue;\n\t\t\t\tx = x * 10 + s[j];\n\t\t\t}\n\t\t\tif (flag[x]) continue;\n\t\t\tflag[x] = true; f[x] = f[u] + 1; q.push(x);\n\t\t}\n\t\t//\u63d2\u5165\n\t\tfor (int i = len; i >= 2; --i) {\n\t\t\tfor (int j = s[i] + 1; j <= s[i - 1] - 1; ++j) {\n\t\t\t\tx = 0;\n\t\t\t\tfor (int k = len; k; --k) {\n\t\t\t\t\tx = x * 10 + s[k];\n\t\t\t\t\tif (k == i) x = x * 10 + j;\n\t\t\t\t}\n\t\t\t\tif (flag[x]) continue;\n\t\t\t\tint xlen = 0, _t = x; while (_t) ++xlen, _t /= 10;\n\t\t\t\tif (xlen > Len) continue;\n\t\t\t\tflag[x] = true; f[x] = f[u] + 1; q.push(x);\n\t\t\t}\n\t\t} \n\t}\n}\n\nint main() {\n\tscanf(\"%d\", &n);\n\tflag[n] = true; q.push(n);\n\twhile (n) ++Len, n /= 10;\n\tbfs();\n\tscanf(\"%d\", &m);\n\tfor (int i = 1; i <= m; ++i) {\n\t\tint a; scanf(\"%d\", &a);\n\t\tif (flag[a]) printf(\"%d\\n\", f[a]);\n\t\telse printf(\"-1\\n\");\n\t}\n\treturn 0;\n}\n```\n### \u611f\u8c22\u89c2\u8d4f\uff01",
        "postTime": 1600095230,
        "uid": 215368,
        "name": "Easy_revenge",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "[\u5728\u6211\u7684\u535a\u5ba2\u67e5\u770b](https://www.cnblogs.com/whx666/p/11333597.html)\n\n\u66b4\u529bbfs\uff0c\u7528\u5b57\u7b26\u4e32\u6765\u6a21\u62df\u8fd9\u4e09\u79cd\u64cd\u4f5c\n\n\u7528\u5b57\u7b26\u4e32\u7684\u4f18\u70b9\uff1a\u4ee3\u7801\u6613\u60f3\uff0c\u7b80\u5355\u6613\u61c2\uff0c\u964d\u4f4e\u601d\u8003\u590d\u6742\u5ea6\uff0c\u5220\u9664/\u63d2\u5165\u64cd\u4f5c\u76f4\u63a5\u622a\u53d6\u5b57\u7b26\u4e32\u518d\u76f8\u52a0\u5c31\u5b8c\u4e8b\u4e86(.substr\u51fd\u6570)\n\n\u7f3a\u70b9\uff1a\u76f8\u5bf9\u76f4\u63a5\u7528\u6570\u5b57\u64cd\u4f5c\u66f4\u6162\uff08\u53ef\u80fd\u53ea\u6709\u6211\u7684\u6162\uff09\n\n\u4ea4\u6362\u64cd\u4f5c\uff1a\u6700\u7b80\u5355\u7684\u64cd\u4f5c\uff0c\u76f4\u63a5\u4ea4\u6362\u5b57\u7b26\u4e32\u4e2d\u7684\u4e24\u4e2a\u5b57\u7b26\uff0c\u7136\u540e\u5bf9\u5e94\u5230\u6570\u5b57\uff0c\u5224\u65ad\u662f\u5426\u8981\u52a0\u5165\u961f\u5217\n\n\u5220\u9664\u64cd\u4f5c\uff1a\u679a\u4e3e\u5220\u9664\u4f4d\u7f6e\uff0c\u622a\u53d6\u5de6\u53f3\u4e24\u6bb5\u5b57\u7b26\u4e32\u76f8\u52a0\u5f97\u51fa\u65b0\u7684\u5b57\u7b26\u4e32\n\n\u63d2\u5165\u64cd\u4f5c\uff1a\u679a\u4e3e\u63d2\u5165\u4f4d\u7f6e\uff08\u4e0d\u80fd\u5728\u4e24\u5934\uff09\uff0c\u7136\u540e\u622a\u53d6\u5de6\u53f3\u4e24\u6bb5\u5b57\u7b26\u4e32\uff0c\u4e2d\u95f4\u518d\u52a0\u4e00\u4e2a\u5b57\u7b26\n\n\u6bcf\u6b21\u8bb0\u5f55\u7b54\u6848\u65f6\u9700\u8981\u5148\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6570\u5b57 (\u65b9\u6cd5\u4e0e\u5feb\u8bfb\u7684\u4e00\u6837)\n\n### \u6ce8\u610f\nx.substr(l, x) \u4ece\u4f4d\u7f6e\uff08\u4e0b\u6807\uff09 l \u5f00\u59cb\u53d6 x \u4e2a\u5b57\u7b26\uff08\u4e00\u5f00\u59cb\u4e0d\u77e5\u9053\u67e5\u4e86\u534a\u5929\u6837\u4f8b\u90fd\u6ca1\u8fc7qwq\uff09\n\n\n### \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstring str, s, v = \"0123456789\";\nint m, st[1000000], inf;\ninline int get (string x) {    // get\u51fd\u6570\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u6570\u5b57 \n    int s(0);\n    for (int i = 0; i < x.size(); i++)  s = s * 10 + x[i] - 48;\n    return s;\n}\nvoid Go () {\n    queue <pair<string, int> > q;  \n    q.push ({str, 0});\n    while (q.size()) {\n        pair<string, int> t = q.front();  q.pop();\n        string stra = t.first;\n        int len = stra.size();\n        if (len == 1)  continue;    //\u957f\u5ea6\u4e3a 1 \u65f6\u4e0d\u80fd\u6267\u884c\u4efb\u4f55\u64cd\u4f5c \n        // \u5904\u7406\u4ea4\u6362\u64cd\u4f5c \n        for (int i = 0; i < len; i++)\n          for (int j = i + 1; j < len; j++)  {\n            string strb(stra);\n            swap (strb[i], strb[j]);\n            int tmp = get (strb);\n            if (st[tmp] > t.second + 1)  \n              st[tmp] = t.second + 1, q.push({strb, t.second + 1});\n          }\n        // \u5904\u7406\u5220\u9664\u64cd\u4f5c\n        for (int i = 0; i < len; i++) {\n            string strb = stra.substr (0, i) + stra.substr (i + 1, len - i);\n            int tmp = get (strb);\n            if (st[tmp] > t.second + 1)  \n              st[tmp] = t.second + 1, q.push({strb, t.second + 1}); \n        } \n        // \u5904\u7406\u63d2\u5165\u64cd\u4f5c\n        if (len >= str.size())  continue;   // \u751f\u6210\u6570\u5b57\u4e0d\u80fd\u8d85\u51fa\u539f\u6570\u5b57\u4f4d\u6570\n        for (int i = 1; i < len; i++) \n          for (int j = stra[i-1] - 47; j < stra[i] - 48; j++) {\n            string strb = stra.substr (0, i) + v[j] + stra.substr (i, len - i);\n            int tmp = get (strb);\n            if (st[tmp] > t.second + 1)  \n              st[tmp] = t.second + 1, q.push({strb, t.second + 1});     \n          }\n    }\n}\nint main() {\n    cin >> str;\n    memset (st, 0x7f, sizeof (st));  inf = st[0];\n    st[get(str)] = 0;\n    Go ();    \n    scanf (\"%d\", &m);\n    while (m--)  \n      cin >> s, printf (\"%d\\n\", (st[get(s)] == inf) ? -1 : st[get(s)]);\n    return 0;\n} \n```\u3000",
        "postTime": 1565453477,
        "uid": 84619,
        "name": "\u6e05\u5c18",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "\u672c\u9898\u7684\u7b97\u6cd5\u662fBFS\u6216\u8005DFS\u4e0d\u7528\u8bf4\u6ce8\u610fhash\u5224\u91cd\uff01\n\n\u4e09\u4e2a\u64cd\u4f5c\uff1a\n\n1.\u5c06s\u7684\u4efb\u610f\u4e24\u4f4d\u5bf9\u6362\u751f\u6210\u65b0\u7684\u6570\u5b57\uff0c\u4f8b\u5982143\u53ef\u4ee5\u751f\u6210314\uff0c413\uff0c134\uff1b\n\n2.\u5c06s\u7684\u4efb\u610f\u4e00\u4f4d\u5220\u9664\u751f\u6210\u65b0\u7684\u6570\u5b57\uff0c\u4f8b\u5982143\u53ef\u4ee5\u751f\u621014\uff0c13\uff0c43\n\n3.\u5728s\u7684\u76f8\u90bb\u4e24\u4f4d\u4e4b\u95f4s[i]\uff0cs[i + 1]\u4e4b\u95f4\u63d2\u5165\u4e00\u4e2a\u6570\u5b57x\uff0cx\u9700\u8981\u6ee1\u8db3s[i] < x < s[i + 1]\u4e14\u751f\u6210\u6570\u7684\u4f4d\u6570\u4e0d\u80fd\u8d85\u8fc7\u521d\u59cb\u6570s\u7684\u4f4d\u6570\n\nbfs\u62d3\u5c55\u7684\u65f6\u5019\u4f9d\u6b21\u679a\u4e3e\u6bcf\u4e00\u6b21\u64cd\u4f5c\u7684\u6bcf\u4e00\u79cd\u53ef\u80fd\uff0c\u6bd4\u8f83\u9ebb\u70e6\u8981\u6ce8\u610f\u68c0\u67e5\u3002\n\n\u6ce8\u610fbfs\u4e0d\u80fd\u5199\u5728\u7ebf\u5fc5\u987b\u5199\u79bb\u7ebf\uff0c\u56e0\u4e3a\u95ee\u7b54\u592a\u591a\uff0c\u5728\u7ebfT\u7684\u4f1a\u6bd4\u8f83\u5389\u5bb3\uff0c\u4e0d\u63d0\u5021\n\n\u4e00\u6b21\u79bb\u7ebfbfs\u628a\u6240\u6709\u53ef\u80fd\uff08\u6876\u6765\u4fdd\u5b58\u6570i\u7684\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\uff09\u679a\u4e3e\u51fa\u6765\u518dO\uff081\uff09\u5728\u7ebf\u67e5\u8be2\u3002\n\n\u63a5\u4e0b\u6765\u662f\u6bcf\u4e2a\u64cd\u4f5c\u7684\u62d3\u5c55\uff1a\n\n\u64cd\u4f5c1;//\u62d3\u5c55\u65f6\u679a\u4e3e\u5230\u5e95\u662f\u90a3\u4e24\u4f4d\u5bf9\u6362\n\n```cpp\nfor i:=1 to length(hs) do\n   for j:=i+1 to length(hs) do begin\n    ts:=hs;\n    ts[i]:=hs[j];\n    ts[j]:=hs[i];\n    val(ts,t);\n    if hash[t] then continue;\n    inc(tail);\n    q[tail].step:=q[head].step+1;\n    val(ts,q[tail].num);\n    a[q[tail].num]:=min(a[q[tail].num],q[tail].step);\n    hash[q[tail].num]:=true;\n  end;\n```\n\u64cd\u4f5c2\uff1b//\u62d3\u5c55\u65f6\u679a\u4e3e\u5230\u5e95\u662f\u4e00\u4f4d\u6570\u7ec4\u5220\u9664\n\n```cpp\nfor i:=1 to length(hs) do begin\n   ts:='';\n   for j:=1 to length(hs) do\n    if j<>i then ts:=ts+hs[j];\n   val(ts,t);\n   if hash[t] then continue;\n   inc(tail);\n   q[tail].step:=q[head].step+1;\n   val(ts,q[tail].num);\n   a[q[tail].num]:=min(a[q[tail].num],q[tail].step);\n   hash[q[tail].num]:=true;\n  end;\n```\n\u64cd\u4f5c3\uff1b//\u62d3\u5c55\u65f6\u679a\u4e3e\u5230\u5e95\u662f\u90a3\u4e24\u4f4d\u76f8\u90bb\u7684\u6570\u5b57\u63d2\u5165\uff0c\u63d2\u5165\u7684\u662f\u4f55\u79cd\u6570\u5b57\n\n```cpp\nif length(hs)>=length(s) then continue;\n  for i:=1 to length(hs)-1 do begin\n   for x:=hs[i] to hs[i+1] do begin\n    if x=hs[i] then continue;\n    if x=hs[i+1] then continue; //s[i]<x<s[i+1];\n    ts:=copy(hs,1,i);\n    ts:=ts+x;\n    ts:=ts+copy(hs,i+1,length(hs)-i+1);\n    val(ts,t);\n    if hash[t] then continue;\n    inc(tail);\n    q[tail].step:=q[head].step+1;\n    val(ts,q[tail].num);\n    a[q[tail].num]:=min(a[q[tail].num],q[tail].step);\n    hash[q[tail].num]:=true;\n   end;\n  end;\n```\n\u63a5\u4e0b\u6765\u662f\u7a0b\u5e8f\uff08pas\uff09\n\n```cpp\ntype rec=record\n num,step:longint;\nend;\nvar s:string;\n    m,t,maxmax,i:longint;\n    a:array[0..9999*100]of longint;\n    q:array[0..9999*100]of rec;\n    hash:array[0..9999*100]of boolean;\nfunction min(a,b:longint):longint;\nbegin\n if a<b then exit(a)\n else exit(b);\nend;\nprocedure bfs;\nvar head,tail,i,j,t:longint;\n    hs,ts:string;\n    x:char;\nbegin\n val(s,q[1].num);\n a[q[1].num]:=0;\n q[1].step:=0;\n head:=0; tail:=1;\n while head<tail do begin\n  inc(head);\n  str(q[head].num,hs);\n  for i:=1 to length(hs) do\n   for j:=i+1 to length(hs) do begin\n    ts:=hs;\n    ts[i]:=hs[j];\n    ts[j]:=hs[i];\n    val(ts,t);\n    if hash[t] then continue;\n    inc(tail);\n    q[tail].step:=q[head].step+1;\n    val(ts,q[tail].num);\n    a[q[tail].num]:=min(a[q[tail].num],q[tail].step);\n    hash[q[tail].num]:=true;\n  end;\n  for i:=1 to length(hs) do begin\n   ts:='';\n   for j:=1 to length(hs) do\n    if j<>i then ts:=ts+hs[j];\n   val(ts,t);\n   if hash[t] then continue;\n   inc(tail);\n   q[tail].step:=q[head].step+1;\n   val(ts,q[tail].num);\n   a[q[tail].num]:=min(a[q[tail].num],q[tail].step);\n   hash[q[tail].num]:=true;\n  end;\n  if length(hs)>=length(s) then continue;\n  for i:=1 to length(hs)-1 do begin\n   for x:=hs[i] to hs[i+1] do begin\n    if x=hs[i] then continue;\n    if x=hs[i+1] then continue;\n    ts:=copy(hs,1,i);\n    ts:=ts+x;\n    ts:=ts+copy(hs,i+1,length(hs)-i+1);\n    val(ts,t);\n    if hash[t] then continue;\n    inc(tail);\n    q[tail].step:=q[head].step+1;\n    val(ts,q[tail].num);\n    a[q[tail].num]:=min(a[q[tail].num],q[tail].step);\n    hash[q[tail].num]:=true;\n   end;\n  end;\n end;\nend;\nbegin\n readln(s);\n readln(m);\n fillchar(a,sizeof(a),$7f);\n fillchar(hash,sizeof(hash),false);\n maxmax:=a[1];\n bfs;\n for i:=1 to m do begin\n  readln(t);\n  if a[t]=maxmax then writeln(-1)\n  else writeln(a[t]);\n end;\nend.\n\n```",
        "postTime": 1502007715,
        "uid": 16456,
        "name": "ljc20020730",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1132 \u3010\u6570\u5b57\u751f\u6210\u6e38\u620f\u3011"
    },
    {
        "content": "**\u601d\u8def\uff1amap + bfs**\n\n------------\n\u5206\u6790\uff1a\u9996\u5148\u89c2\u5bdf\u9898\u9762\uff0c\u6240\u6709 m \u4e2a\u64cd\u4f5c\u90fd\u662f\u57fa\u4e8e\u4e00\u4e2a\u6570\u7684\u64cd\u4f5c\uff0c\u6240\u4ee5\u6700\u597d\u7684\u65b9\u6cd5\u5c31\u662f\u9884\u5904\u7406\u51fa\u6240\u6709\u7684\u60c5\u51b5\uff0c\u5728\u8f93\u5165\u67e5\u8be2\u65f6\u53ea\u9700\u8981 $O(1)$ \u67e5\u8be2\u5373\u53ef\u3002\u672c\u9898\u6d89\u53ca\u5230\u6570\u4f4d\u4e0e\u6570\u4f4d\u4e4b\u95f4\u7684\u4ea4\u6362\u7b49\u64cd\u4f5c\uff0c\u5355\u7eaf\u7684\u6574\u578b\u53d8\u91cf\u6bd4\u8f83\u9ebb\u70e6\uff0c\u6240\u4ee5\u672c\u849f\u84bb\u4f7f\u7528\u4e86\u5b57\u7b26\u4e32\uff08\u5de8\u4f6c\u968f\u610f\uff09\u3002\u4f46\u662f\u8fd9\u9053\u9898\u53c8\u6d89\u53ca\u5230\u4e86\u8bb0\u5fc6\u5316\uff0c\u5f00\u6570\u7ec4\u65e0\u6cd5\u89e3\u51b3\u5b57\u7b26\u4e32\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u4f7f\u7528 map \u7684\u601d\u8def\u5c31\u6cb9\u7136\u800c\u751f\u5566~\u3002  \n\u5bf9\u4e8e\u9898\u9762\u7ed9\u7684\u4e09\u79cd\u64cd\u4f5c\uff0c\u4e3a\u4e86\u64cd\u4f5c\u7b80\u4fbf\u53ef\u4ee5\u4f7f\u7528 swap \u3001\u5b57\u7b26\u4e32\u81ea\u5e26\u7684 erase \u3001insert \u64cd\u4f5c\uff0c\u8fdb\u4e00\u6b65\u51cf\u5c11\u6211\u4eec\u7684\u601d\u8003\u91cf\u3002  \n\u7ec6\u8282\u89c1\u4ee3\u7801\u6ce8\u91ca\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nmap<string,int> q;\nint t,n;\nstring str;\nvoid bfs(){\n\tqueue<pair<string,int> > p;\n\tp.push({str,0});//\u5411\u961f\u5217\u91cc\u52a0\u5165\u539f\u6765\u7684\u6570\n\twhile(p.size()){\n\t\tstring x=p.front().first;int step=p.front().second;p.pop();\n\t\tif(q.find(x)!=q.end())continue;\n\t\tq[x]=step;\n\t\tfor(int i=0;i<x.size();i++){//\u89c4\u52191\uff1a\u76f4\u63a5\u679a\u4e3eij\u4ea4\u6362\u5373\u53ef\n\t\t\tfor(int j=i+1;j<x.size();j++){\n\t\t\t\tstring y=x;\n\t\t\t\tswap(y[i],y[j]);\n\t\t\t\tp.push({y,step+1});\n\t\t\t}\n\t\t}\n\t\tif(x.size()>1){//\u4e00\u4f4d\u7684\u6570\u4e0d\u53ef\u4ee5\u4f7f\u7528\u89c4\u52192\uff0c\u56e0\u4e3a\u51cf\u53bb\u5c31\u4ec0\u4e48\u90fd\u6ca1\u6709\u4e86\n\t\t\tfor(int i=0;i<x.size();i++){//\u679a\u4e3e\u6bcf\u4e00\u4f4d\n\t\t\t\tstring y=x;\n\t\t\t\ty.erase(i,1);\n\t\t\t\tp.push({y,step+1});\n\t\t\t}\n\t\t}\n\t\tif(x.size()<n){//\u89c4\u52193\u7684\u9650\u5236\n\t\t\tfor(int i=0;i<x.size()-1;i++){//\u679a\u4e3e\u6bcf\u4e00\u4f4d\n\t\t\t\tfor(int j=x[i]+1;j<x[i+1];j++){//\u679a\u4e3e\u4e24\u4f4d\u4e4b\u95f4\u7684\u6570\n\t\t\t\t\tstring y=x;\n\t\t\t\t\tstring k;k=k+(char)j;\n\t\t\t\t\ty.insert(i+1,k);\n\t\t\t\t\tp.push({y,step+1});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tcin>>str;//\u4f7f\u7528\u5b57\u7b26\u4e32\u8bfb\u5165\n\tn=str.size();//\u4e3a\u89c4\u52193\u7684\u9650\u5236\u9884\u5904\u7406\u51fa\u957f\u5ea6\n\tbfs();\n\tcin>>t;\n\twhile(t--){\n\t\tstring x;\n\t\tcin>>x;\n\t\tif(q.find(x)!=q.end())cout<<q[x]<<endl;//\u53ea\u9700\u8981\u67e5\u8be2map\u91cc\u662f\u5426\u6709\u8fd9\u4e2a\u6570\u5373\u53ef\n\t\telse cout<<-1<<endl;//\u6ca1\u6709\u5c31\u662f\u4e0d\u80fd\u53d8\u5316\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1630048311,
        "uid": 160767,
        "name": "afm_afk",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1132 \u6570\u5b57\u751f\u6210\u6e38\u620f"
    },
    {
        "content": "BFS\u3002\n\n\u5148\u9884\u5904\u7406\u51fa $s$ \u751f\u6210\u6bcf\u4e2a\u6570\u6240\u9700\u7684\u6700\u5c0f\u6b65\u6570\u3002\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8be2\u95ee\uff0c$O(1)$ \u8f93\u51fa\u7ed3\u679c\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u7ea6\u662f $O(s + m)$\u3002\n\n\u7531\u4e8e\u5b9e\u73b0\u6bd4\u8f83\u7b80\u5355\uff0c\u56e0\u6b64\u76f4\u63a5\u653e\u4ee3\u7801\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nstring s;\nbool vis[100100];\nint dis[100100], m;\nstruct node {\n    string s;\n    int step;\n};\nqueue<node> q;\n\nint str2int(string n) {\n    int ans = 0;\n    for (int i = 0; i < n.size(); ++i) {\n        ans = ans * 10 + n[i] - '0';\n    }\n    return ans;\n}\n\nint main() {\n    memset(dis, 0x3f, sizeof(dis));\n    ios::sync_with_stdio(0);\n    cin >> s;\n    vis[str2int(s)] = 1;\n    q.push({s});\n    while (q.size()) {\n        node u = q.front();\n        dis[str2int(u.s)] = u.step;\n        q.pop();\n        for (int i = 0; i < u.s.size() - 1; ++i) {\n            for (int j = i + 1; j < u.s.size(); ++j) {\n                string ns = u.s;\n                swap(ns[i], ns[j]);\n                int nx = str2int(ns);\n                if (!vis[nx]) {\n                    vis[nx] = 1;\n                    q.push({ns, u.step + 1});\n                }\n            }\n        }\n        if (u.s.size() > 1) {\n            for (int i = 0; i < u.s.size(); ++i) {\n                string ns = u.s;\n                ns.erase(ns.begin() + i);\n                int nx = str2int(ns);\n                if (!vis[nx]) {\n                    vis[nx] = 1;\n                    q.push({ns, u.step + 1});\n                }\n            }\n        }\n        if (u.s.size() >= s.size()) {\n            continue;\n        }\n        for (int i = 0; i < u.s.size() - 1; ++i) {\n            for (int j = u.s[i] - '0' + 1; j < u.s[i + 1] - '0'; ++j) {\n                string ns = u.s;\n                ns.insert(ns.begin() + i + 1, j + '0');\n                int nx = str2int(ns);\n                if (!vis[nx]) {\n                    vis[nx] = 1;\n                    q.push({ns, u.step + 1});\n                }\n            }\n        }\n    }\n    cin >> m;\n    while (m--) {\n        int x;\n        cin >> x;\n        if (dis[x] == 0x3f3f3f3f) {\n            cout << -1 << endl;\n        } else {\n            cout << dis[x] << endl;\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1619086281,
        "uid": 275273,
        "name": "zltqwq",
        "ccfLevel": 0,
        "title": "P1132 \u9898\u89e3"
    }
]
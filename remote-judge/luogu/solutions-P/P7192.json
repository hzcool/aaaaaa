[
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P7192)\n\n~~\u4e0d\u626f\u95f2\u8bdd\u4e86~~\n\n## \u8fdb\u5165\u6b63\u9898\n\n\u4f1f\u5927\u7684 $cpp$ \u544a\u8bc9\u6211\u4eec\uff0c\u62ff\u5230\u9898\u76ee\u4e00\u5b9a\u8981\u770b\u4e00\u773c\u6570\u636e\u8303\u56f4\u3002\u4e8e\u662f\u6211\u4eec\u5148\u6765\u770b\u4e00\u4e0b\u70b9\u6570\u548c\u8fb9\u6570\u3002\u53d1\u73b0$n\\le10^3$ \uff0c$m\\le10^4$\uff0c\u57fa\u672c\u5c31\u662f\u4e00\u4e2a\u7a20\u5bc6\u56fe\uff0c\u800c\u4e14\u70b9\u6570\u4e0d\u591a\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u90bb\u63a5\u77e9\u9635\u6765\u5b58\u56fe\u3002\n\n\u7136\u540e\u6765\u8003\u8651 $Luka$ \u5e94\u8be5\u600e\u4e48\u8d70\u3002\u663e\u7136\u5e94\u8be5\u8ba9 $T$ \u5148\u751f\u5148\u8d70\uff0c\u4e8e\u662f\u6211\u4eec\u8003\u8651\u8bb0\u5f55\u6bcf\u6761\u8def\u7684\u5c01\u9501\u65f6\u95f4\u3002\n```\nint tt=0;\nF(i,1,g-1) {\n\tt[c[i]][c[i+1]]=t[c[i+1]][c[i]]=tt;\n\t//\u8003\u8651\u5176\u662f\u53cc\u5411\u8fb9\uff0c\u5e94\u5f53\u5c06\u5176\u53cd\u5411\u518d\u8bb0\u5f55\u4e00\u904d \n\t//t[i][j]\u8868\u793a\u4ece\u8def\u53e3i\u5230\u8def\u53e3j\u8fd9\u4e00\u6bb5\u8def\u7684\u7ba1\u5236\u5f00\u59cb\u65f6\u523b \n\ttt+=f[c[i]][c[i+1]];//tt\u8bb0\u5f55\u5f53\u524d\u65f6\u523b \n}\n```\n\u7136\u540e\u6211\u4eec\u7528 $Dijkstra$ \u8dd1\u4e00\u904d\u6700\u77ed\u8def\u5373\u53ef\u3002\n\n\u7ec6\u8282\u89c1\u4ee3\u7801\uff08\u7a0d\u5fae\u7528\u4e86\u4e00\u70b9\u70b9\u5b8f\uff09\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define rd(n) scanf(\"%d\",&n);\n#define F(i,a,b) for(register int i=a;i<=b;i++)\nusing namespace std;\nconst int N=1e3+10;\nint n,m,a,b,k,g,f[N][N];\nint c[N],t[N][N],dis[N];\nbool vis[N];\nstruct P {\n\tint d,t;//d\u8868\u793a\u8282\u70b9\u7684\u7f16\u53f7\uff0ct\u8868\u793a\u5230\u8fbe\u8be5\u70b9\u7684\u65f6\u95f4\n\tbool operator <(const P&a)const {\n\t\treturn t>a.t;\n\t}\n};\nint drive(int u,int v) {\n\tif(dis[u]>=t[u][v]&&dis[u]<=t[u][v]+f[u][v]-1) {\n\t\t/*\u5f53\u5230\u8fbe\u65f6\u95f4\u6070\u597d\u4e3a\u7ba1\u5236\u65f6\u95f4\n\t\t\u6700\u5c0f\u65f6\u95f4\u4e3aT\u5148\u751f\u5230\u8fbe\u65f6\u523b\u52a0\u4e0a\u4e24\u500d\u8fc7\u8def\u65f6\u95f4\n\t\t\uff08T\u5148\u751f\u8fc7\u8def\u7684\u65f6\u95f4\u52a0\u4e0aLuka\u8fc7\u8def\u7684\u65f6\u95f4\uff0c\u6070\u597d\u4e3a\u4e24\u500d\u3002\uff09 \n\t\t*/\n\t\treturn (f[u][v]<<1)+t[u][v];\n\t}\n\treturn dis[u]+f[u][v];//\u5426\u5219\u5c31\u76f4\u63a5\u52a0\u8fc7\u8def\u9700\u8981\u7684\u65f6\u95f4 \n}\nvoid Dij() {\n\tmemset(dis,0x3f,sizeof(dis));//\u521d\u59cb\u5316\u4e3a\u8f83\u5927\u503c\n\tdis[a]=k;\n\tpriority_queue<P>q;//\u5806\u4f18\u5316\n\tq.push({a,k});//\u4ece\u70b9a\u5f00\u59cb\uff0c\u65f6\u523b\u4e3ak\n\twhile(!q.empty()) {\n\t\tP t=q.top();\n\t\tq.pop();\n\t\tif(vis[t.d])continue;\n\t\tvis[t.d]=1;\n\t\tF(i,1,n) {\n\t\t\tif(f[t.d][i]) { //t.d\u4e0ei\u4e4b\u95f4\u5b58\u5728\u4e00\u6761\u8fb9\n\t\t\t\tint pos=drive(t.d,i);//\u8ba1\u7b97\u5230\u8fbei\u70b9\u7684\u6700\u77ed\u65f6\u95f4\n\t\t\t\tif(dis[i]>pos) {//\u677e\u5f1b\u64cd\u4f5c \n\t\t\t\t\tdis[i]=pos;\n\t\t\t\t\tq.push({i,dis[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nint main() {\n\trd(n)rd(m)rd(a)rd(b)rd(k)rd(g)\n\tF(i,1,g)rd(c[i])//c\u662f\u8fc7\u8def\u6240\u9700\u65f6\u95f4 \n\tint u,v,w;\n\tF(i,1,m) {//\u90bb\u63a5\u77e9\u9635\u5b58\u56fe \n\t\trd(u)rd(v)rd(w)\n\t\tf[u][v]=w;//\u53cc\u5411\u8fb9 \n\t\tf[v][u]=w;\n\t}\n\tint tt=0;\n\tF(i,1,g-1) {\n\t\tt[c[i]][c[i+1]]=t[c[i+1]][c[i]]=tt;\n\t\t//\u8003\u8651\u5176\u662f\u53cc\u5411\u8fb9\uff0c\u5e94\u5f53\u5c06\u5176\u53cd\u5411\u518d\u8bb0\u5f55\u4e00\u904d\n\t\t//t[i][j]\u8868\u793a\u4ece\u8def\u53e3i\u5230\u8def\u53e3j\u8fd9\u4e00\u6bb5\u8def\u7684\u7ba1\u5236\u5f00\u59cb\u65f6\u523b\n\t\ttt+=f[c[i]][c[i+1]];//tt\u8bb0\u5f55\u5f53\u524d\u65f6\u523b\n\t}\n\tDij();\n\tprintf(\"%d\",dis[b]-k);//\u5f00\u8f66\u65f6\u95f4\u5e94\u5f53\u51cf\u53bbk \n\treturn 0;\n}\n```\n\n[AC](https://www.luogu.com.cn/record/44712153)\n\n### \u5b8c\u7ed3\u6492\u82b1\uff01",
        "postTime": 1610029353,
        "uid": 415473,
        "name": "\u262f\u262f\u67ab\u262f\u262f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7192 \u3010[COCI2007-2008#6] GEORGE\u3011"
    },
    {
        "content": "**\u9898\u76ee\u5927\u610f\uff08\u6765\u81ea\u672c\u4eba\uff09\uff1a**\n\n\u6709\u4e00\u4e2a\u65e0\u5411\u56fe $N$ \u4e2a\u70b9\uff0c$M$ \u6761\u8fb9\u3002 \u6709\u4e00\u4e2a\u9886\u5bfc\u4ece $0$ \u65f6\u523b\u5f00\u59cb\u5728\u56fe\u4e2d\u8d70\uff0c\u6309\u987a\u5e8f\u7ecf\u8fc7 $G$ \u4e2a\u70b9\u3002 \u4f60\u4ece $K$ \u65f6\u523b\u5f00\u59cb\u8d70\uff0c\u8981\u4ece $A$ \u8d70\u5230 $B$\uff0c\u9886\u5bfc\u5728\u67d0\u6761\u8def\u4e0a\u8d70\u7684\u65f6\u5019\uff0c\u4f60\u4e0d\u80fd\u8d70\uff0c\u4f46\u4f60\u53ef\u4ee5\u7b49\u5728\u90a3\u91cc\u7b49\u4ed6\u8d70\u5b8c\u8fd9\u6761\u8def\u3002 \u8bf7\u95ee\u4f60\u81f3\u5c11\u8981\u82b1\u591a\u4e45\u3002\n\n**\u601d\u8def\uff1a**\n\n\u8003\u8651\u4f60\u8d70\u8fc7\u67d0\u4e00\u6761\u8def\u65f6\u4f1a\u4e0d\u4f1a\u53d7\u9886\u5bfc\u5f71\u54cd\uff0c\u518d\u8dd1 $dijkstra$ \u5c31\u597d\u4e86\u3002\n\n**\u624b\u628a\u624b\u5b9e\u73b0\uff1a**\n\n- \u5b58\u56fe\n\n\u5173\u6ce8\u6570\u636e\u8303\u56f4 $2 \\le n \\le 10^3$\u3002\n\n\u4ece\u4e2d\u53ef\u4ee5\u770b\u51fa\u90bb\u63a5\u77e9\u9635\u53ef\u4ee5\u5b58\u7684\u4e0b\u3002\n\nCode\uff1a\n```cpp\nfor(int i=1;i<=m;i++){\n\tint u,v,w;\n\tcin>>u>>v>>w;\n\tmp[u][v]=w;\n\tmp[v][u]=w;\n}\n```\n\n- \u9886\u5bfc\u901a\u8fc7\u67d0\u4e24\u4e2a\u9053\u8def\u65f6\u7684\u65f6\u523b\n\n\u6ce8\u610f\u7531\u4e8e\u662f\u6309\u7167\u987a\u5e8f\u7ecf\u8fc7\u7684\uff0c\u6545\u9700\u8981\u7d2f\u52a0\u3002\n\nCode\uff1a\n\n```cpp\nint tmp=0;\nfor(int i=1;i<g;i++){\n\ts[z[i]][z[i+1]]=tmp;\n\ts[z[i+1]][z[i]]=tmp;\n\ttmp+=mp[z[i]][z[i+1]];\n}\n```\n\n\n- dijkstra \u7684\u6539\u53d8\n\n\u8fd9\u91cc\u6ce8\u610f\u7684\u5c31\u662f\u9886\u5bfc\u5bf9\u4f60\u7684\u9650\u5236\u3002\n\n\u5982\u679c\u53d7\u5230\u9650\u5236\uff0c\u7ed3\u675f\u65f6\u523b\u5e94\u52a0\u4e0a\u9886\u5bfc\u548c\u4f60\u4e24\u4e2a\u4eba\u7684\u65f6\u95f4\uff0c\u6545\u9700 $\\times2$\u3002\n\nCode:\n```cpp\nint suan(int u,int v){\n\tif(dis[u]>=s[u][v]&&dis[u]<=s[u][v]+mp[u][v]-1)\n   \t\treturn s[u][v]+mp[u][v]*2;//\u53d7\u5230\u9650\u5236\n\treturn dis[u]+mp[u][v];//\u81ea\u7531\u6d3b\u52a8\n}\n```\n\n**\u5b8c\u6574 Code\uff1a**\n\n```cpp\n#include<bits/stdc++.h>\n#define _ ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)\n#define rep(i,l,r) for(int i=l;i<=r;i++)\n#define lep(i,l,r) for(int i=l;i>=r;i--)\nusing namespace std;\nconst int N=1e3+10;\nint n,m,a,b,k,g,mp[N][N],z[N],s[N][N],dis[N];\nbool book[N];\nstruct node {\n\tint d,t;\n\tbool operator <(const node&a)const {\n\t\treturn t>a.t;\n\t}\n};\nint suan(int u,int v) {\n\tif(dis[u]>=s[u][v]&&dis[u]<=s[u][v]+mp[u][v]-1)\n\t\treturn s[u][v]+mp[u][v]*2;\n\treturn dis[u]+mp[u][v];\n}\nvoid dijkstra() {\n\tdis[a]=k;\n\tpriority_queue<node>q;\n\tq.push({a,k});\n\twhile(!q.empty()) {\n\t\tnode t=q.top();\n\t\tq.pop();\n\t\tif(book[t.d])continue;\n\t\tbook[t.d]=1;\n\t\trep(i,1,n) {\n\t\t\tif(mp[t.d][i]) {\n\t\t\t\tint pos=suan(t.d,i);\n\t\t\t\tif(dis[i]>pos) {\n\t\t\t\t\tdis[i]=pos;\n\t\t\t\t\tq.push({i,dis[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n//\u6b64\u5904\u53c2\u8003\u4e86\u697c\u4e0adalao\u7684\u5bf9\u5217\u4f18\u5316 \nint main() {\n\tcin>>n>>m>>a>>b>>k>>g;\n\trep(i,1,g) {\n\t\tcin>>z[i];\n\t}\n\trep(i,1,1000) dis[i]=1145141919;\n\tint u,v,w;\n\trep(i,1,m) {\n\t\tint u,v,w;\n\t\tcin>>u>>v>>w;\n\t\tmp[u][v]=w;\n\t\tmp[v][u]=w;\n\t}\n\tint tmp=0;\n\trep(i,1,g) {\n\t\ts[z[i]][z[i+1]]=tmp;\n\t\ts[z[i+1]][z[i]]=tmp;\n\t\ttmp+=mp[z[i]][z[i+1]];\n\t}\n\tdijkstra();\n\tcout<<dis[b]-k;\n\treturn 0;\n}\n```\n",
        "postTime": 1627546771,
        "uid": 484784,
        "name": "_YyD_",
        "ccfLevel": 6,
        "title": "P7192 [COCI2007-2008#6] GEORGE"
    }
]
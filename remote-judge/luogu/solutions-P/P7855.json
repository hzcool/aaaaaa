[
    {
        "content": "## P7855 \u300cEZEC-9\u300d\u6682\u9893\u6052\u5377\n\n[\u9898\u9762\u94fe\u63a5](https://www.luogu.com.cn/problem/P7855)\n\nAC \u7684\u65f6\u5019\u53ea\u6709 $19$ \u4efd\u901a\u8fc7\u8bb0\u5f55\uff0c\u796d\u4e00\u4e0b\u4e00\u9053\u505a\u4e86\u4e00\u4e0a\u5348\u7684\u9898\n\n\u8fd9\u662f\u4e00\u9053\u8d2a\u5fc3\u9898\n\n\u7136\u540e\u9898\u76ee\u4e0d\u518d\u8d58\u8ff0\n\n\u6211\u4eec\u7528 $A$ $a$ $B$ $b$ \u5206\u522b\u4ee3\u8868\u6052\u5377\u4eba\uff0c\u6682\u5377\u4eba\uff0c\u6052\u9893\u4eba\uff0c\u6682\u9893\u4eba\uff0c\u8fd9\u6837\u770b\u8d77\u6765\u65b9\u4fbf\u4e00\u70b9\n\n\u7136\u540e\u6211\u4eec\u4f1a\u53d1\u73b0\u4e00\u4e2a\u6027\u8d28\uff0c\u65e2\u7136\u4fdd\u8bc1 $A$ \u4e0e $B$ \u4ea4\u66ff\u51fa\u73b0\uff0c\u90a3\u4e48\u6bcf\u4e2a\u533a\u95f4\u5de6\u8fb9\u4e0d\u662f $A$ \u5c31\u662f $B$\uff0c\u6211\u4eec\u53ea\u8003\u8651\u5de6\u4fa7\u662f $A$ \u7684\u533a\u95f4\uff0c\u53f3\u4fa7\u540c\u7406\n\n\u90a3\u4e48\u8fd9\u4e2a\u533a\u95f4~~\u80fd\u6709\u591a\u5377\u5462~~\u80fd\u4ea7\u751f\u591a\u5927\u4ef7\u503c\u5462\uff1f\u6211\u4eec\u53d1\u73b0\u5982\u679c\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff1a$A$\u2026\u2026$a$ $b$\u2026\u2026$b$ $B$\uff0c\u53ea\u8981\u6211\u4eec\u521a\u5f00\u59cb\u8ba9\u533a\u95f4\u5168\u90fd\u5377\u8d77\u6765\uff0c\u90a3\u6700\u53f3\u8fb9\u7684\u6682\u5377\u4eba\u5de6\u8fb9\u7684\u4eba\u90fd\u4f1a\u5f88\u5377\uff0c\u8fd9\u662f\u8fd9\u4e2a\u9898\u80fd\u591f\u8d2a\u5fc3\u7684\u539f\u56e0\n\n\u7136\u540e\u6211\u4eec\u9700\u8981\u4ea4\u6362\u6682\u5377\u4eba\uff0c\u800c\u4e14\u5b8c\u5168\u4e0d\u7528\u5728\u610f\u6682\u9893\u4eba\uff0c\u800c\u4e14\u6211\u4eec\u53d1\u73b0\uff0c\u4e00\u4e2a\u533a\u95f4\u4e0d\u662f\u5728\u6700\u53f3\u7aef\u7684\u6682\u5377\u4eba\u6362\u6389\u4e86\u90fd\u65e0\u6240\u8c13\uff0c\u90a3\u4e48\u6211\u4eec\u6362\u7684\u65f6\u5019\u80af\u5b9a\u5148\u6362\u8fd9\u4e9b\u4eba\u3002\n\n\u5e76\u4e14\u6362\u5230\u54ea\u91cc\u53bb\u5462\uff1f\u4e00\u5b9a\u662f\u6362\u5230\u5f53\u524d\u533a\u95f4\u6328\u7740 $B$ \u7684\u90a3\u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u6837\u6574\u4e2a\u533a\u95f4\u5c31\u53ef\u4ee5\u5377\u8d77\u6765\n\n\u4f46\u5982\u679c\u6ca1\u6709\u7a7a\u95f2\u7684\u6682\u5377\u4eba\u5462\uff1f\u6211\u4eec\u628a\u7a7a\u95f2\u7684\u6682\u5377\u4eba\u53eb\u505a\u4e00\u4e2a\u5e01\uff0c\u5f53\u6211\u4eec\u8fd8\u6709\u5e01\u7684\u65f6\u5019\u5c31\u627e\u5230\u6700\u5927\u7684\u8fd8\u6ca1\u5377\u7684\u533a\u95f4\u8ba9\u5b83\u5377\u8d77\u6765\uff0c\u5426\u5219\u627e\u4e00\u4e2a\u533a\u95f4\u53d6\u51fa\u5176\u7aef\u70b9\u6682\u5377\u4eba\u6765\u9020\u5e01\u3002\u5e76\u4e14\u539f\u6765\u5c31\u662f\u975e\u7a7a\u533a\u95f4\uff0c\u628a\u7aef\u70b9\u7684 $a$ \u632a\u5230\u53e6\u4e00\u8fb9\u662f\u4e0d\u8d39\u5e01\u7684\u3002\n\n\u8fd9\u6837\u5c31\u6709\u7a7a\u533a\u95f4\u548c\u975e\u7a7a\u533a\u95f4\u4e24\u79cd\u533a\u95f4\uff08\u6211\u4eec\u8fd9\u91cc\u5c31\u4e0d\u7528\u8003\u8651\u4eba\u4e86\uff0c\u5168\u90fd\u770b\u6210\u533a\u95f4\uff09\uff0c\u521a\u5f00\u59cb\u628a\u6240\u6709\u7684\u7a7a\u95f2\u7684\u6682\u5377\u4eba\u53d6\u51fa\u5f53\u505a\u5e01\uff0c\u7136\u540e\u6bcf\u6b21\u64cd\u4f5c\u6bd4\u8f83\u4e0b\u6ca1\u586b\u6ee1\u7684\u90e8\u5206\u6700\u5927\u7684\u7a7a\u533a\u95f4\u548c\u975e\u7a7a\u533a\u95f4\uff0c\u6709\u5e01\u76f4\u63a5\u586b\u6700\u5927\u7684\u90a3\u4e2a\uff0c\u5426\u5219\u628a\u975e\u7a7a\u533a\u95f4\u7684\u4ef7\u503c\u51cf\u53bb\u9020\u5e01\u4ee3\u4ef7\u6700\u5c0f\u7684\u533a\u95f4\u7684\u4ee3\u4ef7\uff0c\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4e09\u4e2a set\n\n#### \u7ef4\u62a4\u4fe1\u606f\n\n$s_0$\uff1a\u6309\u7167\u533a\u95f4\u5269\u4f59\u4ef7\u503c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u7684\u6240\u6709\u7a7a\u533a\u95f4\n\n$s_1$\uff1a\u6309\u7167\u533a\u95f4\u5269\u4f59\u4ef7\u503c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u7684\u6240\u6709\u975e\u7a7a\u533a\u95f4\n\n$s_2$\uff1a\u6309\u7167\u533a\u95f4\u5df2\u6709\u7684\u4ef7\u503c\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u7684\u6240\u6709\u975e\u7a7a\u533a\u95f4\uff08\u7528\u6765\u9020\u5e01\uff09\n\n#### \u7b97\u6cd5\u6d41\u7a0b\n\n\u521a\u5f00\u59cb\u627e\u5230\u6240\u6709\u533a\u95f4\uff0c\u7a7a\u7684\u653e\u8fdb $s_0$\uff0c\u975e\u7a7a\u653e\u8fdb $s_1$ \u548c $s_2$\uff0c\u6bcf\u6b21\u64cd\u4f5c\u6bd4\u8f83 $s_0$ $s_1$ \u7684\u961f\u5934\u54ea\u4e2a\u6700\u5927\uff0c\u5982\u679c\u6ca1\u5e01\u628a $s_1$ \u7684\u4ef7\u503c\u51cf\u53bb\u9020\u5e01\u4ee3\u4ef7\uff0c\u5982\u679c $s_1$ \u5927\u90a3\u4e48\u76f4\u63a5\u64cd\u4f5c\uff0c\u5982\u679c $s_0$ \u5927\u90a3\u5c31\u628a $s_2$ \u7684\u961f\u5934\u9020\u5e01\u7136\u540e\u585e\u8fdb $s_0$ \u91cc\u9762\uff0c\u5e76\u4e14\u628a\u539f\u6765 $s_0$ \u7684\u961f\u5934\u585e\u8fdb $s_1$ $s_2$ \u91cc\u9762\uff0c\u8fd9\u9898\u5c31\u5b8c\u4e86\u3002\n\n\uff08\u63d0\u4ea4\u597d\u591a\u9898\u89e3\u8bf4\u91cd\u590d\u89e3\u6cd5\uff0c\u8fd9\u4e2a\u603b\u4e0d\u80fd\u91cd\u4e86\uff08\u9003\uff09\uff09\n\n#### \u8d34\u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <set>\n#include <vector>\n#define lint long long\n#define rint register int\nusing namespace std;\ninline int read(){\n\tchar c;int f=1,res=0;\n\twhile(c=getchar(),!isdigit(c))if(c=='-')f*=-1;\n\twhile(isdigit(c))res=res*10+c-'0',c=getchar();\n\treturn res*f;\n}\nconst int N=2e6+5;\nint n,k,cnt=0,len[N],fu[N],a[N],co=0,ans=0;\nstruct _s0{int id;};\nbool operator<(_s0 x,_s0 y){\n\tif(len[x.id]==len[y.id])\n\t\treturn x.id<y.id;\n\treturn len[x.id]<len[y.id];\n}\nset<_s0> s0;\nstruct _s1{int id;};\nbool operator<(_s1 x,_s1 y){\n\tif(len[x.id]-fu[x.id]==len[y.id]-fu[y.id])\n\t\treturn x.id<y.id;\n\treturn len[x.id]-fu[x.id]<len[y.id]-fu[y.id];\n}\nset<_s1> s1;\nstruct _s2{int id;};\nbool operator<(_s2 x,_s2 y){\n\tif(fu[x.id]==fu[y.id])\n\t\treturn x.id<y.id;\n\treturn fu[x.id]<fu[y.id];\n}\nset<_s2> s2;\ninline void init(){\n\tint p=0;\n\tbool work=false;\n\tfor(rint l=1,r=1;r<=n;++r){\n\t\tif(a[r]==1){\n\t\t\tl=r;\n\t\t\tp=0;\n\t\t\twork=true;\n\t\t}else if(a[r]==2){\n\t\t\twork=false;\n\t\t\tif(r==1)continue;\n\t\t\tlen[++cnt]=r-l-1;\n\t\t\tif(p)fu[cnt]=p-l,s1.insert((_s1){cnt}),s2.insert((_s2){cnt});\n\t\t\telse s0.insert((_s0){cnt});\n\t\t}else if(a[r]==3&&work){\n\t\t\tif(p)++co;\n\t\t\tp=r;\n\t\t}\n\t}\n\twork=false;\n\tp=0;\n\tfor(rint l=n,r=n;l>=1;--l){\n\t\tif(a[l]==1){\n\t\t\tr=l;\n\t\t\tp=0;\n\t\t\twork=true;\n\t\t}else if(a[l]==2){\n\t\t\twork=false;\n\t\t\tif(l==n)continue;\n\t\t\tlen[++cnt]=r-l-1;\n\t\t\tif(p)fu[cnt]=r-p,s1.insert((_s1){cnt}),s2.insert((_s2){cnt});\n\t\t\telse s0.insert((_s0){cnt});\n\t\t}else if(a[l]==3&&work){\n\t\t\tif(p)++co;\n\t\t\tp=l;\n\t\t}\n\t}\n}\ninline void mk(int i){\n\ts1.erase((_s1){i});\n\ts2.erase((_s2){i});\n\tfu[i]=0;\n\ts0.insert((_s0){i});\n}\ninline void solve(){\n\twhile(k--){\n\t\tint p0,p1,p2,v0,v1;\n\t\tif(!s0.empty()){\n\t\t\tp0=(--s0.end())->id;\n\t\t\tv0=len[p0];\n\t\t\tif(!co){//\u5982\u679c\u6ca1\u5e01\u5c31\u4eces2\u91cc\u9762\u63d0\u51fa\u6765\u4e00\u4e2a \n\t\t\t\tif(!s2.empty()){\n\t\t\t\t\tp2=s2.begin()->id;\n\t\t\t\t\tv0-=fu[p2];//\u80fd\u63d0\u7684\u8bdd\u9664\u53bb\u82b1\u8d39 \n\t\t\t\t}else v0=0;//\u5426\u5219\u6ca1\u6cd5\u9009\uff0c\u5c31\u629b\u5f03\u8fd9\u79cd\u60c5\u51b5 \n\t\t\t}\n\t\t}else v0=0;\n\t\tif(!s1.empty()){\n\t\t\tp1=(--s1.end())->id;\n\t\t\tv1=len[p1]-fu[p1];\n\t\t}else v1=0;\n\t\tif(v0>v1){\n\t\t\tif(!co)mk(p2);\n\t\t\telse --co;\n\t\t\ts0.erase((_s0){p0});\n\t\t\tfu[p0]=len[p0];\n\t\t\ts1.insert((_s1){p0});\n\t\t\ts2.insert((_s2){p0});\n\t\t}else if(v1){\n\t\t\ts1.erase((_s1){p1});\n\t\t\ts2.erase((_s2){p1});\n\t\t\tfu[p1]=len[p1];\n\t\t\ts1.insert((_s1){p1});\n\t\t\ts2.insert((_s2){p1});\n\t\t}\n\t}\n}\n/*\ns0 \u4e13\u5b58\u7a7a\u533a\u95f4\u7684\u5269\u4f59\u4ef7\u503c\uff0c\u586b\u6ee1\u82b1\u8d39\u5e01\uff0c\u586b\u4e86\u4e4b\u540e\u585e\u5230s2\u91cc\u9762\ns1 \u5b58\u975e\u7a7a\u533a\u95f4\u5269\u4f59\u4ef7\u503c\uff0c\u586b\u6ee1\u4e0d\u82b1\u8d39\u5e01 \ns2 \u5b58\u6240\u6709\u975e\u533a\u95f4\u5df2\u586b\u957f\u5ea6\uff0c\u7528\u6765\u9020\u5e01\uff0c\u9020\u5b8c\u4e4b\u540e\u585e\u56des0\n\u7528mk\u6765\u9020\u5e01\uff0cinit\u9884\u5904\u7406\u533a\u95f4 \nlen\u4fdd\u5b58\u533a\u95f4\u603b\u957f\u5ea6 fu\u5b58\u533a\u95f4\u5df2\u7ecf\u586b\u4e86\u591a\u5c11 \n\u4e0d\u7528\u8003\u8651\u9020\u5e01\u4ea7\u751f\u7684\u4e0d\u662f\u7a7a\u533a\u95f4\uff0c\u65e2\u7136\u6ca1\u5e01\u4e86\u8bf4\u660e\u5f53\u524d\u533a\u95f4\u4e5f\u5c31\u4e00\u4e2a\u70b9\u4e86 \n*/\nint main(){\n\tn=read();\n\tk=read();\n\tfor(rint i=1;i<=n;++i){\n\t\ta[i]=read();\n\t\tif(a[i]==1)++ans;\n\t}\n\tinit();\n\tsolve();\n\tfor(rint i=1;i<=cnt;++i)\n\t\tans+=fu[i];\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1631141037,
        "uid": 206258,
        "name": "SDNetFriend",
        "ccfLevel": 7,
        "title": "P7855 \u300cEZEC-9\u300d\u6682\u9893\u6052\u5377 \u9898\u89e3"
    },
    {
        "content": "# P7855 \u300cEZEC-9\u300d \u6682\u9893\u6052\u5377 \u9898\u89e3\n~~\u4e3a\u9632\u68d5\u540d~~\u5148\u53d1\u4e2a\u58f0\u660e\uff1a\u548c wyy332623 \u76843\u4e2a\u4ee3\u7801\u96f7\u540c\u662f\u56e0\u4e3a\u6211\u4e00\u5929\u5185\u4ea4\u7684\u6b21\u6570\u6ee1\u4e86,\u5c31\u628a\u4ee3\u7801\u7ed9\u4ed6\u4ea4.\n\n------------\n\n# \u601d\u8def\n\n------------\n\n\u8fd9\u9898\u6700\u91cd\u8981\u7684\u4e00\u70b9\u662f\u8981\u77e5\u9053 1-3 \u4e4b\u95f4\uff08\u65e0 2 \u6216 1\uff09\u53ef\u5168\u90e8\u53d8\u5377\u3002\n\n\u65b9\u4fbf\u8d77\u89c1\uff0c\u628a\u6bcf\u4e2a 1-2\uff08\u4e4b\u95f4\u65e0 2 \u6216 1\uff09\u53eb\u505a\u4e00\u4e2a\u533a\u95f4\u3002\n\n\u8981\u6c42\u6700\u5927\u503c\uff0c\u90a3\u5c31\u5148\u628a\u6240\u6709\u8f93\u5165\u7684\u533a\u95f4\u5185 1-3\uff08\u79bb 2 \u6700\u8fd1\u7684\uff09\u7684\u8ddd\u79bb\uff08\u5305\u62ec2\u4e2a\u7aef\u70b9\uff09\u4e4b\u548c\u8bb0\u4f5c res\u3002\n\n\u90a3\u8fd9 1-3\uff08\u79bb 2 \u6700\u8fd1\u7684\uff09\u4e4b\u95f4\u76843\u5c31\u6ca1\u7528\u4e86\uff0c\u6570\u91cf\u8bb0\u4f5c us3\uff08\u4e0d\u5305\u62ec 2 \u4e2a\u7aef\u70b9\uff09\u3002\n\n\u8981\u79fb\u52a83\uff08\u79bb2\u6700\u8fd1\u7684\uff09\u5f53\u7136\u8981\u79fb\u5230\u90a3\u4e2a 2\uff08\u672c\u533a\u95f4\uff09\u8fb9\u4e0a\uff0c\u533a\u95f4 i \u7684\u79fb\u52a8\u6240\u52a0\u7684\u503c\u8bb0\u4e3a $\\textit{add}_ i$\u3002\n\n\u4f46\u8fd9\u901a\u8fc7\u7387\u4e0d\u5230 2% \u7684 ~~\u5927\u6c34\u9898~~ \u80af\u5b9a\u4f1a\u6709\u50cf 1-2\uff08\u65e0 1 \u6216 2\uff09\u4e4b\u95f4\u53ea\u6709 4 \u7684 ~~\u6bd4\u8f83\u6c34\u7684~~ \u6570\u636e\uff0c\u628a\u5b83\u5b9a\u4e49\u4e3a ~~\u6c34\u533a\u95f4~~\u3002\n\n\u90a3\u600e\u4e48\u529e\u5462\uff1f\n\n\u80af\u5b9a\u5148\u7528 us3 \u56e0\u4e3a\u5b83\u53ef\u4ee5\u8fdb\u884c ~~\u4eba\u89c1\u4eba\u7231\u82b1\u89c1\u82b1\u5f00\u7684\u767d\u5ad6~~\uff0c\u628a\u5b83\u653e\u5230 ~~\u6c34\u533a\u95f4~~ \u76842\u8fb9\u4e0a\u3002\n\n\u628a ~~\u6c34\u533a\u95f4~~ i \u5185 4 \u7684\u4e2a\u6570\u8bb0\u4e3a $\\textit{empty}_ i$\u3002\n\n\u90a3 $\\textit{res} = \\textit{res} + \\textit{empty}_ \\textit{headempty}$\u3002\n\n$\\textit{us3} = \\textit{us3} - 1$\uff08~~\u767d\u5ad6\u6b21\u6570\u51cf\u4e00~~\uff09//\u54ed\n\n\u90a3\u6709 ~~\u66f4\u6c34\u7684~~ \u6570\u636e\u8fde 3 \u90fd\u4e0d\u591f\uff08$\\textit{us3} < \\textit{tailempty} - \\textit{headempty} + 1$\uff09\u5c31 ~~\u62c6\u4e1c\u5899\u8865\u897f\u5899~~\uff0c\u628a\u533a\u95f4 i \u62c6\u4e0b\u8981\u51cf\u7684 1-3 \uff08\u79bb 2 \u6700\u8fd1\u7684\uff09\u7684\u8ddd\u79bb\uff08\u5305\u62ec 1 \u4e2a\u7aef\u70b9\uff09\u8bb0\u4e3a $\\textit{wipe}_ i$\uff08\u52a0\u5230 ~~\u6c34\u533a\u95f4~~ \u7684 2 \u8fb9\u4e0a\uff09\n\n\u5373 $\\textit{res} = \\textit{res} + \\textit{empty}_ \\textit{headempty} - \\textit{wipe}_ \\textit{headwipe}$\n\n\uff08$\\textit{empty}_ \\textit{headempty} - \\textit{wipe}_ \\textit{headwipe} < 0$ \u65f6\u9000\u51fa\uff09\u56e0\u4e3a\u8fd9\u6837 res \u4f1a\u5012\u51cf\u4e14\u8fd9\u662f\u6700\u540e\u65b9\u6848\uff08\u5373 ~~\u767d\u5ad6\u5931\u8d25~~\uff09\n\n\u6392\u5e8f\uff1a\n\nadd \u4ece\u5927\u5230\u5c0f\n\nempty \u4ece\u5927\u5230\u5c0f\n\nwipe \u4ece\u5c0f\u5230\u5927\n\n\uff08$\\textit{add}_ \\textit{headadd} \\geqslant \\textit{empty}_ \\textit{headempty}$ \u65f6\uff09\u5148\u7528 add\n\n\u5426\u5219\u7528 us3\uff08\u56e0\u4e3a ~~\u53ef\u4ee5\u767d\u5ad6~~\uff09\u6700\u540e\u7528 wipe\uff0c\u5373 ~~\u6709\u4ee3\u4ef7\u7684\u767d\u5ad6~~\uff08us3 \u6ca1\u4e86\u6240\u4ee5\u53ef\u4ee5\u7528\uff09\n\n$\\textit{add}_ i$ \u7528\u4e86 $\\textit{wipe}_ i$ \u5c31\u7528\u4e0d\u4e86\u4e86\uff08\u53cd\u8fc7\u6765\u4e5f\u4e00\u6837\uff09\u8bb0   $\\textit{usd}_ i = \\textit{true}$ \u5373\u53ef\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\n\n\u4e3a\u4f7f add \u548c wipe \u4e00\u4e00\u5bf9\u5e94\uff0c$\\textit{add}_ k = 0$ \u65f6\u4e5f\u5e94\u7b97\u5165\n\n------------\n\n# \u4ee3\u7801\n\n------------\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct ad{int v,p;}add[2000010];//p \u4e3a\u6392\u540d\u9632\u6392\u5e8f\u5e72\u6270\nstruct wp{int v,p;}wipe[2000010];\nint empty[2000010];\nbool cma(ad a,ad b){return a.v>b.v;}\nbool cmw(wp a,wp b){return a.v<b.v;}\nbool cme(int a,int b){return a>b;}\nint hw,he,ha;//head\nint ta=-1,tw=-1,te=-1;//tail\nbool usd[2000010];\nint f,b13,b3,b1;\nint res,us3;\nvoid usa(){\n\tusd[add[ha].p]=true;\n\tres+=add[ha++].v;\n}\nvoid usw(){\n\tusd[wipe[hw].p]=true;\n\tres+=empty[he++]-wipe[hw++].v;\n}\nint main(){\n\tint k,c,a;\n\tscanf(\"%d%d\",&k,&c);\n\tfor(int i=1;i<=k;i++){\n\t\tscanf(\"%d\",&a);\n\t\tif(a==1){\n\t\t\tif(b13>0)wipe[++tw].v=i-b3,wipe[tw].p=tw;\n\t\t\tif(b13<=0&&i!=1)empty[++te]=i+b13-1;\n\t\t\tf=min(f+1,2),us3+=(f==2);\n\t\t\tif(b13>=0)res+=i-b13;\n\t\t\telse res++;\n\t\t\tb13=b1=i,f=0;\n\t\t}else if(a==2){\n\t\t\tif(b13!=b1)wipe[++tw].v=b13-b1,wipe[tw].p=tw;;\n\t\t\tif(f==0&&i!=1)empty[++te]=i-b13-1;\n\t\t\tif(f>0)add[++ta].v=i-b13-1,add[ta].p=ta;\n\t\t\tb13=-i,f=0;\n\t\t}else if(a==3){\n\t\t\tif(b13>0)res+=i-b13,f=min(f+1,2),us3+=(f==2);//\u53bb\u6389\u4e8c\u4e2a\u7aef\u70b9 f \u5c31\u8fd9\u6837\u641e \n\t\t\telse add[++ta].v=i+b13-1,add[ta].p=ta,b3=i,res++;\n\t\t\tb13=i;\n\t\t}\n\t}\n\tif(ta>0)sort(add,add+ta+1,cma);//\u53ef\u6076\u7684 +1 \u5751\u4e86\u6211\u4e00\u4e2a\u4e0b\u5348 \n\tif(tw>0)sort(wipe,wipe+tw+1,cmw);\n\tif(te>0)sort(empty,empty+te+1,cme);\n\tfor(int i=0;i<c;i++){\n\t\twhile(usd[add[ha].p]&&ta>=ha)ha++;\n\t\twhile(usd[wipe[hw].p]&&tw>=hw)hw++;\n\t\tif(add[ha].v==0&&ta>=ha)ha=ta+1;\n\t\tif(te>=he){\n\t\t\tif(ta>=ha){\n\t\t\t\tif(add[ha].v>=empty[he])usa();\n\t\t\t\telse if((us3--)>0)res+=empty[he++];\n\t\t\t\telse if(tw<hw)usa();\n\t\t\t\telse if(add[ha].v>=empty[he]-wipe[hw].v)usa();\n\t\t\t\telse if(empty[he]-wipe[hw].v>0)usw();\n                else break;\n\t\t\t}else if((us3--)>0)res+=empty[he++];\n\t\t\telse if(tw<hw)break;\n\t\t\telse if(empty[he]-wipe[hw].v>0)usw();\n            else break;\n\t\t}else if(ta>=ha)usa();\n\t\telse break;\n\t}\n\tcout<<res;\n\treturn 0;\n}\n```\n\n------------\n\n# \u603b\u7ed3\n\n------------\n\n\n~~\u6d1b\u8c37\u6708\u8d5b\u771f\u662f\u8d8a\u6765\u8d8a\u6bd2\u7624\u4e86~~\n\n~~\u90fd\u5f00\u59cb\u4f20\u64ad\u767d\u5ad6\u4e3b\u4e49\u4e86~~\n\n\u8fd9\u662f\u76ee\u524dAC\u7684\u6240\u6709\u4ee3\u7801\u4e2d\u6700\u77ed\u7684\uff0c~~\u4e0d\u8981\u8bf4\u592a\u590d\u6742~~",
        "postTime": 1631412784,
        "uid": 535259,
        "name": "Perfound",
        "ccfLevel": 0,
        "title": "P7855 \u300cEZEC-9\u300d\u6682\u9893\u6052\u5377 \u9898\u89e3"
    }
]
[
    {
        "content": "\u601d\u8def\u4e0d\u96be\u60f3\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5728\u6ca1\u6709\u526a\u6389\u7684\u5217\u4e0a\u7684\u6570\uff0c\u53ea\u9700\u5224\u65ad\u5b83\u79fb\u591a\u5c11\u6b21\u5c31\u53ef\u4ee5\u56de\u5230\u539f\u4f4d\uff0c\u7136\u540e\u7b54\u6848\u5c31\u662f**\u6bcf\u4e00\u4e2a\u5408\u6cd5\u7684\u5217\u79fb\u52a8\u6b21\u6570\u7684\u6700\u5927\u516c\u500d\u6570**\u3002\u9898\u76ee\u4e2d$n$\u5f88\u5927\uff0c\u6240\u4ee5\u7528$O(n)$\u7b97\u6cd5\u6765\u6c42\uff0c\u6839\u636e\u9898\u76ee\u6570\u636e\u6027\u8d28\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0$s$\u6570\u7ec4\u6784\u6210\u4e86\u4e00\u4e2a\u56fe\uff0c\u4e14\u8fd9\u4e2a\u56fe\u6bcf\u4e2a\u70b9\u5fc5\u53ea\u6709\u4e00\u6761\u5165\u8fb9\uff08\u67d0\u4f4d\u7f6e\u8f6c\u79fb\u5230\u5b83\u8fd9\u91cc\uff0c\u4e0d\u53ef\u80fd\u4e24\u4e2a\u4f4d\u7f6e\u8f6c\u79fb\u5230\u540c\u4e00\u4e2a\u5730\u65b9\uff09\u4e00\u6761\u51fa\u8fb9\uff08\u5411\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\u8f6c\u79fb\uff09\uff0c\u90a3\u4e48\u6700\u7ec8\u7684\u56fe\u5e94\u8be5\u4e0e\u4e0b\u56fe\u7c7b\u4f3c\uff0c\u662f\u7531\u4e00\u4e9b\u4e92\u4e0d\u5e72\u6270\u7684\u6709\u5411\u73af\u6784\u6210\u7684\u3002\n\n![p](https://cdn.luogu.com.cn/upload/image_hosting/v24q5zzn.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u8fd9\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u5728\u540c\u4e00\u73af\u91cc\u7684\u4e24\u70b9\uff0c\u5b83\u4eec\u7684\u79fb\u56de\u6b21\u6570\u80af\u5b9a\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u5728\u4e00\u4e2a\u73af\u91cc\u53ea\u9700\u7edf\u8ba1\u4e00\u6b21\u8d21\u732e\u3002\u8fd9\u6837\u7528\u6807\u8bb0\u6570\u7ec4\u5c31\u5927\u5927\u7684\u63d0\u5347\u4e86\u6548\u7387\u3002\n\n\u6700\u540e\u8bb0\u5f97\u5f00$long\\ long$\uff01\n\n$code:$\n\n```\n#include<algorithm>\n#include<cstdio>\n#define ll long long\nusing namespace std;\nbool mark[500005];int mark_cnt,turn[500005];\nint dfs(int x){\n\tif(mark[x])return 0;mark_cnt++;mark[x]=1;return 1+dfs(turn[x]);\n}\nll _ceil(ll x,ll y){return (x+y-1)/y;}//\u624b\u5199\u5411\u4e0a\u53d6\u6574\u51fd\u6570 \nint main(){\n\tint n,c,d;ll a,b,cnt;scanf(\"%d%lld%lld%d%d\",&n,&a,&b,&c,&d);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&turn[i]);\n\tfor(int i=c+1;i<=n-d;i++){\n\t\tif(mark[i])continue;//\u82e5\u5b83\u88ab\u6807\u8bb0\u8fc7\uff0c\u5219\u4e0e\u5b83\u6240\u5c5e\u540c\u4e00\u4e2a\u73af\u7684\u67d0\u4e2a\u6570\u5df2\u7ecf\u8d21\u732e\u8fc7\n\t\tll qck=dfs(i);\n\t\tcnt=(i!=c+1?cnt/__gcd(cnt,qck)*qck:qck);//\u7b2c\u4e00\u4e2a\u7279\u5224 \n\t\tif(mark_cnt==n-c-d)break;//\u627e\u5b8c\u4e86\u63d0\u524d\u9000\u51fa \n\t}\n\tprintf(\"%lld\",_ceil(b,cnt)-_ceil(a-1,cnt));\n\treturn 0;\n}\n```\n",
        "postTime": 1599920079,
        "uid": 313892,
        "name": "sukimo",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5181 \u3010[COCI 2009] GENIJALAC\u3011"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.luogu.com.cn/blog/C-SHANGHAI/solution-p5181)\n\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P5181)\n\n\n\n\u601d\u8def\uff1a\u627e\u5faa\u73af\u8282\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u627e\u6bcf\u4e00\u4f4d\u7684**\u5c0f\u5faa\u73af\u8282**\uff0c\u7136\u540e\u5927\u5faa\u73af\u8282\u5c31\u662f\u8fd9\u4e9b\u5c0f\u5faa\u73af\u8282\u7684**\u6700\u5c0f\u516c\u500d\u6570**\u3002\n  \n\u627e\u5c0f\u5faa\u73af\u8282\u5341\u5206\u7b80\u5355\uff0c\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u6570\u5728\u4e00\u6b21\u64cd\u4f5c\u540e\u6307\u5411\u53e6\u4e00\u4e2a\u6570\uff0c\u7136\u540e\u4f1a\u6307\u56de\u6765\uff0c\u8fd9\u50cf\u6781\u4e86**\u6709\u5411\u56fe\u627e\u73af**\u3002\n  \n\u7136\u800c\u4e8b\u5b9e\u4e0a\u786e\u5b9e\u662f\u8fd9\u6837\uff0c\u7528 dfs \u627e\u73af\u5c31\u53ef\u4ee5\u4e86\u3002\n  \n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5c0f\u5faa\u73af\u8282\uff0c\u9700\u8981\u7ef4\u62a4\u5b83\u4eec\u7684\u6700\u5c0f\u516c\u500d\u6570\uff0c\u800c\u6700\u5c0f\u516c\u500d\u6570\u5219\u662f  $\\frac{a\\times b}{\\gcd(a,b)} $\n  \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u65b0\u7684\u6570\u52a0\u5165\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u6b65\u7684\u7ef4\u62a4\u8bed\u53e5\u662f\u8fd9\u6837\u7684\uff1a\n \n`ans=ans/__gcd(ans,len)*len; `\n\n\n\u7136\u540e\u8fd9\u9053\u9898\u5c31\u505a\u5b8c\u4e86\uff0c\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int maxn=514514;\nint n,a,b,c,d,ans;\nint edge[maxn],visit[maxn],sum;\nint ceil_(int a,int b){return (a+b-1)/b;}\nint dfs(int x){\n\tif(visit[x])return 0;\n\tsum++;\n\tvisit[x]=1;\n\treturn dfs(edge[x])+1;\n} //\u627e\u73af\nsigned main(){\n\tios::sync_with_stdio(false);\n\tcin>>n>>a>>b>>c>>d;\n\tfor(int i=1;i<=n;i++)cin>>edge[i];\n\tfor(int i=c+1;i<=n-d;i++){\n\t\tif(visit[i])continue;\n\t\tint len=dfs(i);\n\t\tif(i==c+1)ans=len;\n\t\telse ans=ans/__gcd(ans,len)*len;\n\t\tif(sum==n-c-d)break; //\u5982\u679c\u5168\u641c\u5b8c\u4e86\u5c31\u7ed3\u675f\n\t}\n\t/*int aa,bb;\n\tif((b/ans)*ans!=b)aa=b/ans+1;\n\tif(((a-1)/ans)*ans!=b)bb=(a-1)/ans+1;\n\tcout<<aa-bb<<endl;*/ //\u8fd9\u91cc\u6211\u8bd5\u56fe\u5199\u5411\u4e0a\u53d6\u6574\uff0c\u6700\u540e\u5931\u8d25\u4e86\uff0c\u522b\u8fd9\u4e48\u5199\u3002\n\tcout<<ceil_(b,ans)-ceil_(a-1,ans)<<endl;\n\treturn 0;\n}\n```\n\n**\u8c22\u8c22\u5927\u5bb6\u7684\u9605\u8bfb\uff01**",
        "postTime": 1670048286,
        "uid": 422996,
        "name": "HeCao2008",
        "ccfLevel": 0,
        "title": "P5181 [COCI2009-2010#1] GENIJALAC \u9898\u76ee\u89e3\u6790"
    },
    {
        "content": "\u7531\u4e8e\u7ed9\u51fa\u7684\u53d8\u5316\u5e8f\u5217\u662f\u6392\u5217\uff0c\u6240\u4ee5\u6bcf\u4e2a\u6570\u4ea4\u6362\u82e5\u5e72\u6b21\u540e\u80af\u5b9a\u4f1a\u56de\u5230\u521d\u59cb\u4f4d\u7f6e\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u6c42\u51fa\u6bcf\u4e2a\u6570\u4ea4\u6362\u51e0\u6b21\u540e\u56de\u5230\u539f\u4f4d\uff0c\u5373\u6bcf\u4e2a\u6570\u7684\u5faa\u73af\u8282\u3002\n\n\u90a3\u8981\u8ba9\u4ed6\u4eec\u540c\u65f6\u56de\u5230\u539f\u4f4d\uff0c\u6211\u4eec\u80af\u5b9a\u8981\u4ea4\u6362 $C + 1$ \u5230 $n - D$ \u8fd9\u4e9b\u6570\u7684\u5faa\u73af\u8282\u7684\u6700\u5c0f\u516c\u500d\u6570\u6b21\uff0c\u8ba1\u5b83\u4e3a $k$\u3002\n\n\u6700\u540e\u53ea\u8981\u6c42\u51fa\u5728 $A$ \u548c $B$ \u8303\u56f4\u5185\u6709\u591a\u5c11\u4e2a\u6570\u6a21 $k$ \u4f59 $1$ \u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\u975e\u5e38\u77ed\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N = 100002;\nint n, m, l, r, p, t, k = 1, ans, sum, tot, cnt, a[N], b[N], c[N], d[N], A, B, C, D;\ninline int read()\n{\n    int x = 0, f = 1;\n    char ch = getchar();\n    while(ch < '0' || ch > '9')\n\t{\n        if(ch == '-') f = -1;\n        ch = getchar();\n    }\n    while('0' <= ch && ch <= '9')\n\t{\n        x = x * 10 + ch - '0';\n        ch = getchar();\n    }\n    return x * f;\n}\nint gcd(int x, int y) { return y ? gcd(y, x % y) : x; }\nint lcm(int x, int y) { return x * y / gcd(x, y); }\nsigned main()\n{\n\tn = read(); A = read(); B = read(); C = read(); D = read();\n\tfor (int i = 1; i <= n; i++) a[i] = read();\n\tfor (int i = C + 1; i <= n - D; i++)\n\t{\n\t    t = a[i]; b[i] = 1;\n\t    while (t != i) t = a[t], b[i]++;\n\t    k = lcm(k, b[i]);\n\t}\n\ttot = (A - 1) / k + 1;\n\tcnt = (B - 1) / k + 1;\n\tif((A - 1) % k == 0) tot--;\n\tcout << cnt - tot << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1627647424,
        "uid": 503899,
        "name": "_byta",
        "ccfLevel": 0,
        "title": "P5181 [COCI 2009] GENIJALAC"
    },
    {
        "content": "\u6b22\u8fce\u6765[Blog](https://www.cnblogs.com/LanrTabe/p/10370039.html)\u73a9\u554a~\n\n\u9898\u76ee\u94fe\u63a5\uff1a\n\n[Luogu5181](https://www.luogu.org/problemnew/show/P5181)\n\n\u4e00\u4e2a\u7b80\u5355\u9898\uff1f\n\n\u9996\u5148\u5bf9$[C+1,n-D]$\u4e2d\u7684\u6bcf\u4e2a\u6570\u5b57\u6c42\u51fa\u5faa\u73af\u8282\uff0c\u6c42$Lcm$\u5373\u662f\u6574\u6bb5\u7684\u5faa\u73af\u8282\u3002\n\n\u7136\u540e\u5224\u65ad$[A,B]$\u4e2d\u6709\u51e0\u4e2a\u6570\u6ee1\u8db3$x-1\\equiv 0(mod\\ Lcm)$\u3002\n\n\u6c42\u5faa\u73af\u8282\u66b4\u529b\u53ef\u8fc7\u3002\u3002\n\n\u5176\u5b9e\u6c42\u5faa\u73af\u8282\u662f\u53ef\u4ee5$O(n)$\u7684\u3002\n\n\u6bcf\u4e00\u6b21\u6c42\u5faa\u73af\u8282\u5f97\u5230\u4e00\u4e2a\u73af\uff0c\u90a3\u4e48\u73af\u4e0a\u6240\u6709\u70b9\u7684\u5faa\u73af\u8282\u90fd\u662f\u6b64\u6b21\u6c42\u51fa\u7684\u5faa\u73af\u8282\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5$O(n)$\u5f97\u5230\u6240\u6709\u5faa\u73af\u8282\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <iostream>\n#include <algorithm>\ntypedef long long ll;\n\nconst ll llMax=1e13;\nll Gcd(const ll a,const ll b){return b?Gcd(b,a%b):a;}\nll Lcm(const ll a,const ll b){return a/Gcd(a,b)*b;}\nint n,s[500005];\nbool v[500005];\nll a,b,c,d,Mfo=1;\n\nvoid DFS(const int x,const int St,const int Nt)//x \u73b0\u5728\u7684\u4f4d\u7f6e St \u6b64\u6b21\u8d77\u70b9 Nt \u5df2\u7ecf\u7ecf\u8fc7\u8282\u70b9\u6570\n{\n    if(v[x])\n    {\n        if(x!=St)puts(\"0\"),exit(0);//\u5f62\u6210\u73af\uff0c\u4f46\u662fSt\u4e0d\u5728\u73af\u4e0a\uff0c\u5373St\u6ca1\u6709\u5faa\u73af\u8282\n        Mfo=Lcm(Mfo,Nt);//\u6c42Lcm\n        if(Mfo>=llMax)puts(\"0\"),exit(0);//\u5faa\u73af\u8282\u8fc7\u5927\uff0c\u90a3\u4e48[A,B]\u4e2d\u6ca1\u6709\u6ee1\u8db3\u8981\u6c42\u7684\u6570\n        return;\n    }\n    v[x]=true,DFS(s[x],St,Nt+1);\n}\n\nint main()\n{\n    std::cin>>n>>a>>b>>c>>d;\n    for(int i=1;i<=n;++i)scanf(\"%d\",&s[i]);\n    for(int i=c+1;i<=n-d;++i)\n        if(!v[i])DFS(i,i,0);//\u4e0d\u6c42\u51cf\u53bb\u7684\n    ll l=std::max(a-1,(ll)1),r=std::max(b-1,(ll)1);//\u628a[A,B]\u4e2d\u6240\u6709\u6570-1,\u6c42\u6709\u591a\u5c11\u6570\u662fLcm\u7684\u500d\u6570\n    if(l%Mfo)l=(l/Mfo+1)*Mfo;\n    if(r%Mfo)r=r/Mfo*Mfo;\n    std::cout<<(r-l)/Mfo+1+(a==1)<<std::endl;//\u7279\u5224\u7b2c1\u4e2a\n    return 0;\n}\n```",
        "postTime": 1551968297,
        "uid": 56677,
        "name": "LanrTabe",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5181 \u3010[COCI 2009] GENIJALAC\u3011"
    }
]
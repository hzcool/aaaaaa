[
    {
        "content": "![\u6bd2\u77ff\u4e07\u5c81](https://cdn.luogu.com.cn/upload/pic/18947.png)\n\nAC\u7684\u7b2c\u4e00\u9053IOI\u9898\u76ee\uff0c\u53d1\u4e2a\u9898\u89e3\u7eaa\u5ff5\u4e00\u4e0b\u3002\n\n\u8fd9\u4e2a\u9898\u662f\u4e00\u4e2a\u76f8\u5f53\u57fa\u7840\u7684dp\uff0c\u552f\u4e00\u7684\u96be\u70b9\u5728\u4e8e\u4ee3\u7801\u5b9e\u73b0\u3002\n\n\u4ee4dp[i][a1][a2][b1][b2]\u4e3a\u5f53\u524d\u9001\u7b2ci\u8f86\u8f66\uff0c\u7b2c\u4e00\u4e2a\u77ff\u524d\u4e24\u6b21\u9001a1\u548ca2\uff0c\u7b2c\u4e8c\u4e2a\u524d\u4e24\u6b21\u9001b1\u548cb2\u3002\n\n\u7136\u540e\u76f4\u63a5\u770b\u8fd9\u8f86\u8f66\u9001\u7b2c\u4e00\u4e2a\u77ff\u8fd8\u662f\u7b2c\u4e8c\u4e2a\u5c31\u597d\u4e86\u3002\n\n\u8fb9\u754c\u662f\u7b2cn+1\u8f86\u8f66\uff0c\u67d0\u4e2a\u77ff\u524d\u4e24\u8f86\u8f66\u6ca1\u9001\u7684\u60c5\u51b5\u5c31\u76f4\u63a5\u75280\u5360\u4f4d\u5c31\u597d\u3002\n\n\u8fd9\u91cc\u7528\u7684\u662f\u8bb0\u5fc6\u5316\uff0c\u7531\u4e8e\u6570\u636e\u5c0f\uff0c\u65f6\u7a7a\u95ee\u9898\u90fd\u4e0d\u5927\u3002\u5982\u679c\u89c9\u5f97\u8bb0\u5fc6\u5316\u53ef\u80fd\u4f1aMLE/\u7206\u6808\u53ef\u4ee5\u6539\u7528\u9006\u5e8fdp\uff08\u53ef\u4ee5\u628ai\u6eda\u52a8\u6389\uff09\uff0c\u4f46\u662f\u4ee3\u7801\u4f1a\u590d\u6742\u5f88\u591a\uff0c\u4e0d\u5982\u8bb0\u5fc6\u5316\u597d\u5199\uff0c~~\u50cf\u6211\u8fd9\u6837\u7684~~\u840c\u65b0\u53ef\u4ee5\u5148\u7528\u8bb0\u5fc6\u5316\u5199\u4e00\u904d\uff0c\u518d\u7167\u7740\u5199dp\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\nint n,type[100010],dp[100010][4][4][4][4];\nchar ch;\nchar getchar(int){\n    char c='\\0';\n    while(c!='M' && c!='F' && c!='B')c=getchar();\n    return c;\n}\nint food(char c){\n    if(c=='M')return 1;\n    if(c=='F')return 2;\n    if(c=='B')return 3;\n    return -1;\n}\nint coal(int fa,int fb,int fc){\n    if(!fa && !fb)return 1;\n    if(!fa)return (fb!=fc)+1;\n    if(fa==fb && fb==fc)return 1;\n    return (fa!=fb)+(fb!=fc)+(fa!=fc);\n}\nint dfs(int now,int a1,int a2,int b1,int b2){\n    if(now>n)return 0;\n    if(dp[now][a1][a2][b1][b2])return dp[now][a1][a2][b1][b2];\n    return dp[now][a1][a2][b1][b2]=max(dfs(now+1,a2,type[now],b1,b2)+coal(a1,a2,type[now]),dfs(now+1,a1,a2,b2,type[now])+coal(b1,b2,type[now]));\n}\nint main(){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n        ch=getchar(233);\n        type[i]=food(ch);\n    }\n    printf(\"%d\\n\",dfs(1,0,0,0,0));\n    return 0;\n}\n```",
        "postTime": 1525932566,
        "uid": 30261,
        "name": "Mr_QwQ",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "**[\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011](https://www.luogu.com.cn/problem/P4401)**  \n# Solution  \n\u5176\u5b9e\u91cd\u70b9\u5c31\u662f\u8fd9\u4e09\u53e5\uff1a\n- 1\uff1a\u5982\u679c\u8fd9\u51e0\u6b21\u98df\u54c1\u8f66\u90fd\u662f\u540c\u4e00\u7c7b\u578b\u7684\u98df\u54c1\uff0c\u5219\u77ff\u5de5\u4eec\u4ea7\u51fa\u4e00\u4e2a\u5355\u4f4d\u7684\u7164\u3002\n\n- 2\uff1a\u5982\u679c\u8fd9\u51e0\u6b21\u98df\u54c1\u8f66\u4e2d\u6709\u4e24\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u98df\u54c1\uff0c\u5219\u77ff\u5de5\u4eec\u4ea7\u51fa\u4e24\u4e2a\u5355\u4f4d\u7684\u7164\u3002  \n- 3\uff1a\u5982\u679c\u8fd9\u51e0\u6b21\u98df\u54c1\u8f66\u4e2d\u6709\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u98df\u54c1\uff0c\u5219\u77ff\u5de5\u4eec\u4ea7\u51fa\u4e09\u4e2a\u5355\u4f4d\u7684\u7164\u3002  \n\n\u770b\u61c2\u4e86\u8fd9\u4e09\u53e5\u540e\uff0c\u6211\u4eec\u6765\u60f3\u52a8\u89c4\u3002  \n**\u72b6\u6001\u5b9a\u4e49**\uff1a\u770b\u89c1\u6709 $n$ \u4e2a\u7269\u54c1\uff0c\u9996\u5148\u6211\u4eec\u5c31\u8981\u60f3\u5230\u5b9a\u4e49 $f(n)$ \u8868\u793a\u9001\u5b8c\u7b2c $n$ \u4e2a\u7269\u54c1\u540e\u4ea7\u7164\u91cf\u7684\u6700\u5927\u503c\uff0c\u56e0\u4e3a\u4ea7\u7164\u91cf\u548c\u524d\u9762\u4e24\u6b21\u9001\u7684\u98df\u7269\u6709\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u5f15\u7528LJ\u7684\u540d\u8a00\uff1a**\u52a0\u4e00\u7ef4**\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u91cc\u8981\u52a04\u7ef4\u7f62\u4e86\uff0c\u4e8e\u662f\u4e4e\u6700\u540e\u7684\u5b9a\u4e49\u662f\uff1a$f(n,a,b,c,d)$ \u8868\u793a\u9001\u5b8c\u7b2c $n$ \u4e2a\u7269\u54c1\u540e\u4e14\u4e00\u53f7\u77ff\u6d1e\u524d\u4e24\u6b21\u7684\u98df\u7269\u4e3a $a$ \u548c $b$\uff0c\u4e8c\u53f7\u77ff\u6d1e\u524d\u4e24\u6b21\u7684\u98df\u7269\u4e3a $c$ \u548c $d$ \u3002  \n**\u8f6c\u79fb\u65b9\u7a0b**\uff1a\u663e\u7136\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u98df\u7269\uff0c\u6211\u4eec\u65e2\u53ef\u4ee5\u628a\u5b83\u653e\u5165\u4e00\u53f7\u77ff\u6d1e\uff0c\u4e5f\u53ef\u4ee5\u628a\u5b83\u653e\u5165\u4e8c\u53f7\u77ff\u6d1e\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa\u653e\u5165\u8fd9\u4e9b\u77ff\u6d1e\u540e\u7684\u4ea7\u7164\u6570\uff0c\u5e76\u53d6\u4e00\u4e2a\u6700\u5927\u503c\u5373\u53ef\u3002 \n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u4ee3\u7801\uff1a  \n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n \nconst int N = 100009;\n \nchar s[N];\nint n,len,a[N],ans = 0;\n \nint dp[N][4][4][4][4];\n \nint calc(int nw,int i,int j) {\n    int cnt = 1;\n    if(nw && nw != i && nw != j) cnt++;\n    if(i && i != j) cnt++;\n    return cnt;\n}\n \nint main() {\n    scanf(\"%d\",&n);\n    scanf(\"%s\",s + 1);\n    for(int i = 1;i <= n;i++) {\t//\t\u4e3a\u4e86\u65b9\u4fbf\u8ba1\u7b97\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u628a\u5b83\u8f6c\u6210\u6570\u5b57\n        if(s[i] == 'M') a[i] = 1;\n        if(s[i] == 'F') a[i] = 2;\n        if(s[i] == 'B') a[i] = 3;\n    }\n    memset(dp,-1,sizeof(dp));\t//\u6700\u521d\u65f6\u6240\u6709\u72b6\u6001\u90fd\u4e0d\u5b58\u5728\n    dp[0][0][0][0][0] = 0;\t//\u521d\u59cb\u5316\u72b6\u6001\n    for(int i = 1;i <= n;i++) {\n        for(int a1 = 0;a1 < 4;a1++) {\t//\u679a\u4e3e\u6240\u6709\u7684\u53ef\u80fd\u6027\n            for(int a2 = 0;a2 < 4;a2++) {\n                for(int b1 = 0;b1 < 4;b1++) {\n                    for(int b2 = 0;b2 < 4;b2++) {\n                        if(dp[i - 1][a1][a2][b1][b2] == -1) continue;\n                        int tmp1 = dp[i - 1][a1][a2][b1][b2] + calc(a1,a2,a[i]);\t//\u8ba1\u7b97\u628a\u7164\u653e\u5165\u4e00\u53f7\u77ff\u6d1e\u7684\u6536\u76ca\n                        int tmp2 = dp[i - 1][a1][a2][b1][b2] + calc(b1,b2,a[i]);\t//\u8ba1\u7b97\u628a\u7164\u653e\u5165\u4e8c\u53f7\u77ff\u6d1e\u7684\u6536\u76ca\n                        dp[i][a2][a[i]][b1][b2] = max(dp[i][a2][a[i]][b1][b2],tmp1);\n                        dp[i][a1][a2][b2][a[i]] = max(dp[i][a1][a2][b2][a[i]],tmp2);\n                    }\t//\u5bf9\u5176\u53d6\u6700\u5927\u503c\n                }\n            }\n        }\n    }\n    for(int a1 = 0;a1 < 4;a1++) {\t//\u679a\u4e3e\u53ef\u80fd\u89e3\n        for(int a2 = 0;a2 < 4;a2++) {\n            for(int b1 = 0;b1 < 4;b1++) {\n                for(int b2 = 0;b2 < 4;b2++) {\n                    ans = max(ans,dp[n][a1][a2][b1][b2]);\n                }\n            }\n        }\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```  \n\n\u5f53\u4f60\u5174\u81f4\u51b2\u51b2\u5730\u6253\u5b8c\u4ee3\u7801\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0\u5b83MLE\u4e86\u3002  \n\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3a\u8fd9\u4efd\u4ee3\u7801\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u8fbe\u5230\u4e86 $\\Theta(256N)$\uff0c\u9762\u5bf9 18 MB \u7684\u7a7a\u95f4\u9650\u5236\u65e0\u7591\u4f1a\u7206\u70b8\u3002  \n\u600e\u4e48\u529e\uff1f\u6211\u4eec\u9700\u8981\u52a0\u4f18\u5316\uff0c\u5173\u4e8e\u7b2c\u4e00\u7ef4\u7684 $i$\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u53ea\u548c $i-1$ \u6709\u5173\uff0c\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e $i$ \u548c $i-1$ \u5c06\u5176\u5bf9 2 \u53d6\u6a21\uff0c\u7ed3\u679c\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\u3002  \n\n\u6700\u540e\u7684 AC \u4ee3\u7801\u5982\u4e0b\uff1a  \n# Code \n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nconst int N = 100009;\n\nint f[2][4][4][4][4];\nchar s[N];\nint a[N],ans,n;\n\nint turn(char ch) {\n\tif(ch == 'M') return 1;\n\tif(ch == 'F') return 2;\n\tif(ch == 'B') return 3;\n}\n\nint calc(int nw,int i,int j) {\n\tint cnt = 1;\n\tif(nw && nw != i && nw != j) cnt++;\n\tif(i && i != j) cnt++;\n\treturn cnt;\n}\n\nint main() {\n\tscanf(\"%d\",&n);\n\tscanf(\"%s\",s + 1);\n\tfor(int i = 1;i <= n;i++) {\n\t\ta[i] = turn(s[i]);\n\t}\n\tmemset(f,-1,sizeof(f));\n\tf[0][0][0][0][0] = 0;\n\tfor(int i = 1;i <= n;i++) {\n\t\tfor(int a1 = 0;a1 < 4;a1++) {\n\t\t\tfor(int b1 = 0;b1 < 4;b1++) {\n\t\t\t\tfor(int a2 = 0;a2 < 4;a2++) {\n\t\t\t\t\tfor(int b2 = 0;b2 < 4;b2++) {\n\t\t\t\t\t\tif(f[(i - 1) % 2][a1][b1][a2][b2] == -1) continue;\n\t\t\t\t\t\tint tmp1 = f[(i - 1) % 2][a1][b1][a2][b2] + calc(a1,b1,a[i]);\n\t\t\t\t\t\tint tmp2 = f[(i - 1) % 2][a1][b1][a2][b2] + calc(a2,b2,a[i]);\n\t\t\t\t\t\tf[i % 2][b1][a[i]][a2][b2] = max(f[i % 2][b1][a[i]][a2][b2],tmp1);\n\t\t\t\t\t\tf[i % 2][a1][b1][b2][a[i]] = max(f[i % 2][a1][b1][b2][a[i]],tmp2);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(int a1 = 0;a1 < 4;a1++) {\n\t\tfor(int b1 = 0;b1 < 4;b1++) {\n\t\t\tfor(int a2 = 0;a2 < 4;a2++) {\n\t\t\t\tfor(int b2 = 0;b2 < 4;b2++) {\n\t\t\t\t\tans = max(ans,f[n % 2][a1][b1][a2][b2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n} \n```",
        "postTime": 1597301550,
        "uid": 86971,
        "name": "TRZ_2007",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "\u7ecf\u5178\u7684\u6eda\u52a8\u6570\u7ec4\u554a.......\n\n\u65b9\u7a0b\u6ca1\u4ec0\u4e48\u96be\u7684\uff0c\u5404\u4f4ddalao\u90fd\u5df2\u7ecf\u8bb2\u8fc7\u4e86\uff1af[i][a][b][c][d]:\u7b2c\u4e00\u77ff\u573a\u524d\u4e24\u6b21\u5403a,b \u7b2c\u4e8c\u77ff\u573a\u524d\u4e24\u6b21\u5403c,d\u7684\u6700\u5927\u4ef7\u503c\u3002\n\n\u76f4\u63a5\u4e0a\u4ee3\u7801\u5427\uff08\u6eda\u52a8\u6280\u5de7\u89c1\u4ee3\u7801\uff09\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint dp[2][4][4][4][4],n;\nchar s[100004];\nint sub(char s) //\u8fd4\u56de\u5bf9\u5e94\u7684\u4e0b\u6807\n{\n    if (s == 'M') return 2;\n    if (s == 'F') return 3;\n    return 1;\n}\nint val(int a,int b,int c) //\u7b2c\u4e00\u6b21\u5403a\uff0c\u7b2c\u4e8c\u6b21\u5403b\uff0c\u7b2c3\u6b21\u5403c\uff0c\u4ea7\u51fa\u7684\u4ef7\u503c\n{\n    int ret = 1;\n    if (a && a != b && a != c) ret++;\n    if (b && b != c) ret++;\n    return ret;\n}\nint main ()\n{\n    scanf(\"%d\",&n);scanf(\"%s\",s + 1);//\u8bfb\u5165\u64cd\u4f5c\n    memset(dp,-1,sizeof(dp));\n    dp[0][0][0][0][0] = 0; \n    for (int i = 1;i <= n;i++)\n    {\n        for (int a1 = 0;a1 < 4;a1++)\n            for (int a2 = 0;a2 < 4;a2++)\n                for (int a3 = 0;a3 < 4;a3++)\n                    for (int a4 = 0;a4 < 4;a4++)\n                    {\n                        if (dp[(i + 1) % 2][a1][a2][a3][a4] == -1) continue;//\u4e0a\u4e00\u8f6e\u7684\u5f53\u524d\u72b6\u6001\u4e0d\u5b58\u5728\uff0c\u65e0\u6cd5\u63a8\u51fa\u4e0b\u4e00\u4e2a\n                        int b = sub(s[i]);\n                        dp[i % 2][a2][b][a3][a4] = \n                        max(dp[i % 2][a2][b][a3][a4],\n                        dp[(i + 1) % 2][a1][a2][a3][a4] + val(a1,a2,b));//\u9001\u7ed9\u7b2c\u4e00\u4e2a\u7164\u77ff\uff08i % 2\u662f\u6eda\u52a8\u64cd\u4f5c\uff09\n                        dp[i % 2][a1][a2][a4][b] = \n                        max(dp[i % 2][a1][a2][a4][b],\n                        dp[(i + 1) % 2][a1][a2][a3][a4] + val(a3,a4,b));//\u9001\u7ed9\u7b2c\u4e8c\u4e2a\u7164\u77ff\n                    }\n        memset(dp[(i + 1) % 2],-1,sizeof(dp[(i + 1) % 2]));//\u6e05\u7a7a\u4e0a\u4e00\u8f6e\u7684\u9012\u63a8\u72b6\u6001\n    }\n    int ans = 0;\n    for (int a1 = 0;a1 < 4;a1++)\n            for (int a2 = 0;a2 < 4;a2++)\n                for (int a3 = 0;a3 < 4;a3++)\n                    for (int a4 = 0;a4 < 4;a4++)\n                        ans = max(ans,dp[n % 2][a1][a2][a3][a4]);\n    printf(\"%d\",ans);\n    return 3;\n}\n```\n\n",
        "postTime": 1532914747,
        "uid": 92602,
        "name": "SIGSEGV",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "UPD ON 20/05/27\n\u4eba\u751f\u4e2d\u7b2c\u4e8c\u9053IOI\u9898\u76ee\uff0c\u7eaa\u5ff5\u4e00\u4e0b  \n\u66b4\u529b\u7b97\u6cd5DFS\uff08\u76f4\u63a5\u641c\uff0c\u4e0d\u8bb2\u4e86\uff09   \uff08\uff1f\uff1f\uff1fpts)   \n\n### \u4e0b\u9762\u8003\u8651\u5982\u4f55\u4f18\u5316\u8fd9\u4e2aDFS \n\n\u89c2\u5bdf\u9898\u76ee\uff0c\u53ef\u4ee5\u53d1\u73b0\uff1a  \n*   \u89e3\u9898\u65f6\u53ea\u5173\u5fc3\u4e24\u4e2a\u7164\u77ff\u6700\u8fd13\u4e2a\u98df\u7269\u8f66\u7684\u98df\u7269  \n*   \u98df\u7269\u8f66\u7684\u987a\u5e8f\u56fa\u5b9a\n*   \u6211\u53ea\u5173\u5fc3\u4ea7\u7164\u91cf\u7684\u6700\u5927\u503c\n\n\u6839\u636e\u4e0a\u9762\u90a3\u4e00\u53e5\u8bdd\u7684\u6027\u8d28\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651DP\u4e86  \n~~\u5982\u679c\u4e0b\u6587\u548c\u4f60\u60f3\u8c61\u7684\u4e0d\u592a\u4e00\u6837\uff0c\u90a3\u8bf4\u660e\u4f60\u6ca1\u8bfb\u61c2\u7b2c6\u884c\u90a3\u4e00\u53e5\u8bdd\uff0c\u8bf7\u518d\u8bfb\u4e00\u904d~~  \n\n\u4ee4`f[i][S1][S2]`\u8868\u793a\u8003\u8651\u5230\u7b2ci\u4e2a\u98df\u7269\u8f66\uff0c\u7b2c\u4e00\u4e2a\u7164\u77ff\u7684\u6700\u8fd1\u4e24\u4e2a\u98df\u7269\u4e3aS1\uff0c\u7b2c\u4e8c\u4e2a\u7164\u77ff\u7684\u6700\u8fd1\u4e24\u4e2a\u98df\u7269\u4e3aS2\u65f6\u7684\u6700\u5927\u7164\u4ea7\u91cf \n\u4f60\u4f1a\u53d1\u73b0\uff0cS1\u660e\u660e\u8868\u793a\u4e86\u4e24\u4e2a\u98df\u7269\uff0c\u4e3a\u4ec0\u4e48\u53ea\u7528S1\u4e00\u4e2a\u91cf\u5c31\u53ef\u4ee5\u4e86\u5462\uff1f  \n\n\u8fd9\u91cc\u8bb2\u4e00\u4e2a\u80fd\u4f7f\u4ee3\u7801\u66f4\u597d\u8c03\u7684\u6280\u5de7\uff1a\u72b6\u538b  \n*  0\u8868\u793a\u6ca1\u6709\u98df\u7269\n*  1\u8868\u793a`Meat`\n*  2\u8868\u793a`Fish`\n*  3\u8868\u793a`Bread`  \n\n\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2a\u56db\u8fdb\u5236\u6570\u6765\u8868\u793a\u8fde\u7eed\u4e24\u4e2a\u98df\u7269\u4e86  \ncalc\u51fd\u6570\u8868\u793a\u4e09\u4e2a\u91cf\u4e2d\u4e0d\u540c\u91cf\u7684\u4e2a\u6570\uff08\u6ce8\u610f0\uff09  \n\u5982\u4f55\u8f6c\u79fb\uff1f \n```cpp\nf[i&1][((t1&3)<<2)|a[i]][t2]=max(f[(i-1)&1][t1][t2]+calc(t1>>2,t1&3,a[i]),f[i&1][((t1&3)<<2)|a[i]][t2]);\nf[i&1][t1][((t2&3)<<2)|a[i]]=max(f[(i-1)&1][t1][t2]+calc(t2>>2,t2&3,a[i]),f[i&1][t1][((t2&3)<<2)|a[i]]);\n```\n\u4f4d\u8fd0\u7b97TIPS\uff1a    \n*  x&3\u4e3a\u53d6\u4e8c\u8fdb\u5236\u6570x\u7684\u540e\u4e24\u4f4d\n*  \u672c\u9898\u9700\u8981\u5c06f\u6570\u7ec4\u5faa\u73af\u5229\u7528 ~~MLE\u522b\u627e\u6211~~\n*  x>>2\u4e3a\u53d6x\u524d\u4e24\u4f4d\n*  \u7531\u4e8e\u672c\u9898a[i]\u53ea\u5360\u4e24\u4f4d\uff0c\u6240\u4ee5`((t2&3)<<2)|a[i]`\u4e0e`((t2&3)<<2)+a[i]`\u662f\u7b49\u4ef7\u7684\n\n\u4e0a\u4ee3\u7801 \n```cpp\n#include <iostream>\n#include <algorithm>\n#include <cstdio>\n#include <cmath>\n#include <queue>\n#include <cstring>\nusing namespace std;\nconst int NR=1e5+10;\nconst int MR=4;\nint f[3][1<<MR][1<<MR];\nint a[NR];\nint calc(int x,int y,int z){\n\tif(y==0)y=z;\n\tif(x==0)x=y;\n\tint cnt=(x==y)+(y==z)+(z==x);\n\tif(cnt==3)return 1;\n\tif(cnt==1)return 2;\n\treturn 3;\n}\nint main(int argc, char const *argv[])\n{\n\t//freopen(\"1.in\",\"r\",stdin);\n\t//freopen(\"1.out\",\"w\",stdout);\n\tint n;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tchar c;\n\t\tscanf(\" %c\",&c);\n\t\tif(c=='M')a[i]=1;\n\t\tif(c=='F')a[i]=2;\n\t\tif(c=='B')a[i]=3;\n\t}\n\tmemset(f,-999999,sizeof(f));\n\tf[0][0][0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tmemset(f[i&1],-999999,sizeof(f[i&1]));\n\t\tfor(int t1=0;t1<16;t1++)\n\t\t\tfor(int t2=0;t2<16;t2++){\n\t\t\t\tf[i&1][((t1&3)<<2)|a[i]][t2]=max(f[(i-1)&1][t1][t2]+calc(t1>>2,t1&3,a[i]),f[i&1][((t1&3)<<2)|a[i]][t2]);\n\t\t\t\tf[i&1][t1][((t2&3)<<2)|a[i]]=max(f[(i-1)&1][t1][t2]+calc(t2>>2,t2&3,a[i]),f[i&1][t1][((t2&3)<<2)|a[i]]);\n\t\t\t}\n\t}\n\tint ans=0;\n\tfor(int i=0;i<=15;i++)\n\t\tfor(int j=0;j<=15;j++)\n\t\t\tans=max(ans,f[n&1][i][j]);\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1589452022,
        "uid": 117771,
        "name": "intel_core",
        "ccfLevel": 7,
        "title": "P4401\u9898\u89e3"
    },
    {
        "content": "#### Description\n\n> \u7ed9\u5b9a $n$ \u4e2a\u98df\u54c1\u8f66\uff0c\u4e00\u5171\u6709\u4e09\u79cd\uff0c\u6709\u4e24\u4e2a\u77ff\u6d1e\uff0c\u6bcf\u4e2a\u98df\u54c1\u8f66\u90fd\u5fc5\u987b\u8fdb\u4e14\u53ea\u80fd\u8fdb\u4e00\u4e2a\u77ff\u6d1e\uff0c\u5f53\u67d0\u4e00\u4e2a\u77ff\u6d1e\u63a5\u6536\u5230\u67d0\u4e00\u4e2a\u98df\u54c1\u8f66\u540e\uff0c\u77ff\u6d1e\u5185\u7684\u5de5\u4f5c\u4eba\u5458\u4f1a\u6bd4\u8f83\u8fd9\u6b21\u7684\u98df\u54c1\u8f66\u4e0e\u524d\u4e24\u6b21\u7684\u98df\u54c1\u8f66\uff0c\u8bbe\u8fd9\u4e09\u6b21\u98df\u54c1\u8f66\u7684\u54c1\u79cd\u53bb\u91cd\u540e\u7684\u4e2a\u6570\u4e3a $k$\uff0c\u77ff\u6d1e\u4eba\u5458\u5219\u4f1a\u4ea7\u51fa $k$ \u7684\u5355\u4f4d\u7684\u77ff\u3002\u6c42\u5b89\u6392\u98df\u54c1\u8f66\u4f7f\u5f97\u4e24\u4e2a\u77ff\u6d1e\u4ea7\u51fa\u7684\u603b\u77ff\u6700\u591a\u662f\u591a\u5c11\u4e2a\u5355\u4f4d\u3002\n\n#### Solution\n\n\u8003\u8651\u72b6\u538b dp\uff0c\u672c\u7bc7\u9898\u89e3\u4e3a\u4e3b\u52a8\u8f6c\u79fb\uff0c\u5982\u679c\u60f3\u770b\u88ab\u52a8\u8f6c\u79fb\u7684\u540c\u5b66\u8bf7\u79fb\u6b65\u5176\u4ed6\u9898\u89e3\u3002\n\n\u8bbe $f_{i,s_1,s_2}$ \u4e3a\u8003\u8651\u5230\u7b2c $i$ \u4e2a\u98df\u54c1\u8f66\uff0c\u8bbe\u77ff\u6d1e\u5206\u522b\u4e3a A \u548c B\uff0cA \u524d\u4e24\u4e2a\u98df\u54c1\u8f66\u7684\u79cd\u7c7b\u4e3a $s_1$\uff0cB \u524d\u4e24\u4e2a\u98df\u54c1\u8f66\u7684\u79cd\u7c7b\u4e3a $s_2$\uff0c$s_1$ \u4e0e $s_2$ \u4e3a\u4e24\u4e2a\u957f\u5ea6\u4e3a $4$ \u7684 01 \u4e32\uff0c\u5982\u679c $s_1=\\tt0110$\uff0c\u5c31\u4ee3\u8868 A \u4e0a\u4e0a\u4e00\u4e2a\u63a5\u6536\u7684\u98df\u54c1\u8f66\u4e3a ${\\tt01}=1$\uff0c\u4e0a\u4e00\u4e2a\u63a5\u6536\u7684\u98df\u54c1\u8f66\u4e3a ${\\tt10}=2$\u3002\n\n\u8003\u8651\u4e3b\u52a8\u8f6c\u79fb\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u98df\u54c1\u8f66\uff0c\u5206\u522b\u53ef\u4ee5\u8f6c\u79fb\u7ed9 A \u548c B\uff0c\u5373\u4e3a\u5206\u4e24\u79cd\u60c5\u51b5\uff1a\n\n- \u8f6c\u79fb\u7ed9 A\uff1a$f_{i,s_1,s_2} \\to f_{i+1,s_1',s_2}$\uff0c\u5176\u4e2d $s_1'$ \u5373\u4e3a A \u63a5\u6536\u7b2c $i+1$ \u4e2a\u98df\u54c1\u8f66\u540e\u5f97\u5230\u7684 01 \u4e32\uff1b\n- \u8f6c\u79fb\u7ed9 B\uff1a$f_{i,s_1,s_2} \\to f_{i+1,s_1,s_2'}$\uff0c\u5176\u4e2d $s_2'$ \u5373\u4e3a B \u63a5\u6536\u7b2c $i+1$ \u4e2a\u98df\u54c1\u8f66\u540e\u5f97\u5230\u7684 01 \u4e32\u3002\n\n\u8f6c\u79fb\u91cf\u5373\u4e3a\u7ec4\u6210 01 \u4e32\u7684\u4e24\u4e2a\u98df\u54c1\u8f66\u79cd\u7c7b\u548c $a_{i+1}$ \u4e09\u4e2a\u6570\u53bb\u91cd\u540e\u7684\u4e2a\u6570\u3002\n\n\u4f46\u5982\u679c\u8fd9\u4e48\u6253\u4e0b\u6765\u53ef\u80fd\u4f1a MLE\uff0c\u6211\u4eec\u53d1\u73b0\u51fa\u9898\u4eba\u8fd9\u4e2a\u5927\u574f\u86cb\u7ed9\u7a7a\u95f4\u9650\u5236\u8bbe\u7f6e\u7684\u662f\u4e0d\u5230 18MB\uff0c\u8ba9\u6211\u4eec\u91cd\u62f3\u51fa\u51fb\uff0c\u4f7f\u7528\u6eda\u5b58\u3002\n\n#### Code\n\n\u4ee3\u7801\u975e\u5e38\u7684\u96be\u770b\u5197\u957f\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nstring s;\nint a[100015]; \nint dp[3][16][16]; // dp[i][s1][s2]\nint cnt[5];\n\nint n12 (int n) {\n\treturn n & 3;\n}\n\nint n34 (int n) {\n\treturn n >> 2;\n}\n\nint ch (int a, int b, int c) {\n\tcnt[0] = cnt[1] = cnt[2] = cnt[3] = 0;\n\tcnt[a] = cnt[b] = cnt[c] = 1;\n\treturn cnt[1] + cnt[2] + cnt[3];\n}\n\nint main () {\n\tint n;\n\tscanf(\"%d\", &n);\n\tcin >> s;\n\ts = \" \" + s;\n\tfor (int i = 1; i <= n; i++) {\n\t\tif (s[i] == 'M') a[i] = 1;\n\t\tif (s[i] == 'F') a[i] = 2; \n\t\tif (s[i] == 'B') a[i] = 3;\n\t}\n\tmemset(dp, -0x3f, sizeof(dp));\n\tdp[1][0][0] = 0;\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i != 0)\n\t\t\tfor (int s1 = 0; s1 <= 15; s1++)\n\t\t\t\tfor (int s2 = 0; s2 <= 15; s2++)\n\t\t\t\t\tdp[1][s1][s2] = dp[2][s1][s2], dp[2][s1][s2] = -0x3f3f3f3f;\n\t\tfor (int s1 = 0; s1 <= 15; s1++)\n\t\t\tfor (int s2 = 0; s2 <= 15; s2++) {\n\t\t\t\tint ch1 = ch(n12(s1), n34(s1), a[i + 1]), ch2 = ch(n12(s2), n34(s2), a[i + 1]);\n\t\t\t\tdp[2][((s1 << 2) + a[i + 1]) & 15][s2] = max(ch1 + dp[1][s1][s2], dp[2][((s1 << 2) + a[i + 1]) & 15][s2]);\n\t\t\t\tdp[2][s1][((s2 << 2) + a[i + 1]) & 15] = max(ch2 + dp[1][s1][s2], dp[2][s1][((s2 << 2) + a[i + 1]) & 15]);\n\t\t\t}\n\t}\n\tint ans = 0;\n\tfor (int s1 = 0; s1 <= 15; s1++)\n\t\tfor (int s2 = 0; s2 <= 15; s2++)\n\t\t\tans = max(ans, dp[2][s1][s2]);\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1627195956,
        "uid": 114914,
        "name": "\u4e00\u53ea\u4e66\u866b\u4ed4",
        "ccfLevel": 4,
        "title": "P4401 \u9898\u89e3"
    },
    {
        "content": "\u544a\u8bc9\u5927\u5bb6\u4e00\u4e2a\u975e\u5e38\u6709\uff08mei\uff09\u7528\u7684\u65b9\u6cd5\uff1a\u9047\u5230\u4e0d\u4f1a\u7684\u9898\u5c31 $DP$ \uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\n\n\n\u597d\uff0c\u8a00\u5f52\u6b63\u4f20\u3002\n\n\u4ee4 $dp[i][a][b][c][d]$ \u4e3a\u524d\u4e24\u6b21\u914d\u9910\u4e3a a , b ; c , d \uff0c\u901a\u8fc7\u63a8\u5bfc\u5bb9\u6613\u5f97\u5230\u3002\n\n## \u4ee3\u7801\u89e3\u91ca\uff1a\n\n fun \u51fd\u6570\u6c42\u7684\u662f\u6700\u8fd1\u4e09\u6b21\u914d\u9910\u5f97\u5230\u7684\u7164\u77ff\u6709\u591a\u5c11\u3002 ~~\uff08\u6211\u5728\u601d\u8003\u5982\u679c\u77ff\u5de5\u5403\u7164\u77ff\u4f1a\u600e\u4e48\u6837\uff09~~ \n \n cmax \u7531\u4e8e\u672c\u4eba~~\u5f88\u61d2~~\u6015\u65f6\u95f4\u8d85\u9650\u4e0d\u60f3\u5199 $max(a,b)$ \u51fd\u6570\u3002\n\n## \u4ee3\u7801\uff1a\n```c++\n#include<bits/stdc++.h>\nusing namespace std;\nint dp[2][4][4][4][4];\nint n;\nchar s[100005];\nvoid cmax(int &a,int b)\n{\n\tif(b>a) a=b;\n}\nint get(int x)\n{\n\treturn s[x]=='M'? 1:(s[x]=='B'? 2:3);\n}\nint fun(int a,int b,int c)//\u7edf\u8ba1abc\u4e09\u6570\u4e4b\u95f4\u4e0d\u540c\u7684\u4e2a\u6570\n{\n\tif(!a && !b)return 1;\n\tif(!a)return (b!=c)+1;\n\tif(a==b && b==c)return 1;\n\treturn (a!=b)+(b!=c)+(a!=c);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tmemset(dp,-1,sizeof(dp));\n\tdp[0][0][0][0][0]=0;\n\tscanf(\"%s\",s+1);\n\tint x;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tx=get(i);\n\t\tfor(int a=0;a<=3;a++)\n\t\tfor(int b=0;b<=3;b++)\n\t\tfor(int c=0;c<=3;c++)\n\t\tfor(int d=0;d<=3;d++)\n\t\t{\n\t\t\tif(dp[(i+1)%2][a][b][c][d]==-1) continue;\n\t\t\tcmax(dp[i%2][b][x][c][d],dp[(i+1)%2][a][b][c][d]+fun(a,b,x));//\n\t\t\tcmax(dp[i%2][a][b][d][x],dp[(i+1)%2][a][b][c][d]+fun(c,d,x));//\n\t\t}\n\t}\n  int ans=0;\n  for(int a=0;a<=3;a++)\n  for(int b=0;b<=3;b++)\n  for(int c=0;c<=3;c++)\n  for(int d=0;d<=3;d++)\n  {\n  if(dp[n%2][a][b][c][d]!=-1) cmax(ans,dp[n%2][a][b][c][d]);\n  }\n  printf(\"%d\",ans);\n  return 0;\n}\n```\n\n\u6700\u540e\u7684\u6700\u540e\uff0c\u795d\u5927\u5bb6 $RP++$ \uff01",
        "postTime": 1600266911,
        "uid": 148507,
        "name": "_Imaginary_",
        "ccfLevel": 0,
        "title": "P4401 \u9898\u89e3"
    },
    {
        "content": "~~\u4e4b\u524d\u90a3\u4e2a\u5199\u7684\u592a\u70c2\u4e86\uff0c\u8ba4\u771f\u5199\u4e00\u4e2a~~\n\n### \u9898\u610f\uff1a\n\u5728\u4e24\u4e2a\u77ff\u5751\u4e2d\u9009\u62e9\u4e00\u4e2a\u6295\u653e\u98df\u54c1\uff0c\u6765\u8ba1\u7b97\u6700\u5927\u7684**\u6ee1\u610f\u5ea6**\uff08\u56e0\u4e3a\u751f\u4ea7\u7684\u7164\u5c31\u76f8\u5f53\u4e8e\u6ee1\u610f\u5ea6\uff09\u3002\u5176\u4e2d\uff0c\u6ee1\u610f\u5ea6\u53d6\u51b3\u4e8e**\u98df\u54c1\u79cd\u7c7b\u7684\u6570\u76ee**\u3002\n\n\n### \u7b97\u6cd5\uff1a\n\u8fd9\u9898\u9898\u76ee\u4e00\u770b\u5c31\u5f88 $dp$ \u7684\u6837\u5b50\u3002\u6240\u4ee5\u91cd\u70b9\u5728\u4e8e**\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b**\u3002\n\u6211\u4eec\u7528 $dp[1][a1][a2][b1][b2]$ \u6765\u5b58\u7b2c  $i$ \u8f86\u8f66\u53bb $a$ \u5730\u524d\u4e24\u6b21\u6240\u653e\u7684\u98df\u54c1 \uff08$a1,a2$\uff09\uff0c\u53bb $b$ \u5730\u524d\u4e24\u6b21\u6240\u6295\u653e\u7684\u98df\u54c1 \uff08$b1,b2$\uff09 \u7684\u7b54\u6848\u3002\n\n\u5bf9\u4e8e\u6bcf\u6b21\u9001\uff0c\u90fd\u6709\u77ff\u5730 $a$ \u4e0e\u77ff\u5730 $b$ \u4e24\u79cd\u60c5\u51b5\uff0c\u4e24\u79cd\u9009\u62e9\u4e2d\uff0c\u6709\u4e0e\u539f\u5148\u7b54\u6848\u6bd4\u8f83\u7684\u5185\u5bb9\u3002\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u51fa\u6765\u4e86\uff1a\n\n```cpp\ndp[i][i2][a[i]][i3][i4]=max(dp[i][i2][a[i]][i3][i4],dp[i][i1][i2][i3][i4]+_main(i1,i2,a[i])); //\u5c06 a[i] \u9001\u5230\u77ff\u5730 a \u7684\u60c5\u51b5\u3002\n\ndp[i][i1][i2][i4][a[i]]=max(dp[i][i1][i2][i4][a[i]],dp[i-1][i1][i2][i3][i4]+_main(i3,i4,a[i])); //\u5c06 a[i] \u9001\u5230\u77ff\u5730 b \u7684\u60c5\u51b5\u3002\n```\n\n### \u4f18\u5316\uff1a\n\u8fd9\u9053\u9898\u6709\u4e00\u4e2a\u6bd4\u8f83\u96be\u7684\u70b9\uff0c\u5c31\u662f**\u7a7a\u95f4\u9650\u5236**\uff0c\u7528\u4e0a\u9762\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4f1a\u70b8\uff0c\u90a3\u4e48\u600e\u4e48\u4f18\u5316\u5462\uff1f\n\n\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u79cd\u65b9\u6848\u53eb**\u6eda\u52a8\u6570\u7ec4**\uff0c\u5b83\u7684\u539f\u7406\u5f88\u597d\u8bc1\u660e\uff1a\n\n\u7531\u4e8e\u7b2c\u4e00\u7ef4 $i$ \u7684\u8fd0\u7b97\u53ea\u6709 $i,i-1$ \u8fd9\u79cd\u64cd\u4f5c\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06 $i$ \u5bf9 $2$ \u53d6\u6a21\uff0c\u8fd9\u6837\uff0c\u7b2c\u4e00\u7ef4\u6570\u7ec4\u53ea\u9700\u8981\u5f00\u5230 $2$ \u5c31\u884c\u4e86\u3002\n\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,dp[2][4][4][4][4]; //\u4e94\u7ef4\u6570\u7ec4\nint a[100001];char c[100001];\nint _main(int a,int b,int c){ //\u8ba1\u7b97\u6ee1\u610f\u5ea6\n\tint cnt=1;\n\tif(a!=0&&a!=b&&a!=c)cnt++;\n\tif(b!=0&&b!=c)cnt++;\n\treturn cnt;\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)cin>>c[i];\n\tfor(int i=1;i<=n;i++){\n\t\tif(c[i]=='M')a[i]=1;\n\t\tif(c[i]=='F')a[i]=2;\n\t\tif(c[i]=='B')a[i]=3;\n\t} /\u8f6c\u6210\u6570\u5b57\u505a\uff0c\u65b9\u4fbf\u3002\n\tmemset(dp,-1,sizeof(dp));\n\tdp[0][0][0][0][0]=0; //\u521d\u59cb\u503c\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int i1=0;i1<=3;i1++){\n\t\t\tfor(int i2=0;i2<=3;i2++){\n\t\t\t\tfor(int i3=0;i3<=3;i3++){\n\t\t\t\t\tfor(int i4=0;i4<=3;i4++){\n\t\t\t\t\t\tif(dp[(i-1)%2][i1][i2][i3][i4]==-1)continue;\n\t\t\t\t\t\tdp[i%2][i2][a[i]][i3][i4]=max(dp[i%2][i2][a[i]][i3][i4],dp[(i-1)%2][i1][i2][i3][i4]+_main(i1,i2,a[i])); //\u77ff\u5730 a\n\t\t\t\t\t\tdp[i%2][i1][i2][i4][a[i]]=max(dp[i%2][i1][i2][i4][a[i]],dp[(i-1)%2][i1][i2][i3][i4]+_main(i3,i4,a[i])); //\u77ff\u5730 b\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans=-114514;\n\tfor(int i1=0;i1<=3;i1++)for(int i2=0;i2<=3;i2++)for(int i3=0;i3<=3;i3++)for(int i4=0;i4<=3;i4++)ans=max(ans,dp[n%2][i1][i2][i3][i4]); //\u8ba1\u7b97\u6700\u7ec8\u7b54\u6848\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\n**\u6709\u9519\u8bef\u53ef\u4ee5\u63d0\u51fa\uff01\u8c22\u8c22\uff01\uff01\uff01**",
        "postTime": 1659182892,
        "uid": 422996,
        "name": "HeCao2008",
        "ccfLevel": 0,
        "title": "P4401 [IOI2007]Miners \u77ff\u5de5\u914d\u9910 \u9898\u76ee\u89e3\u6790"
    },
    {
        "content": "\u9898\u610f\uff1a\u5c06 $n$ \u4e2a\u98df\u54c1\u8f66\u5b89\u6392\u987a\u5e8f\u8f93\u9001\u5230\u4e24\u4e2a\u7164\u77ff\uff0c\u98df\u54c1\u8f66\u6709\u4e09\u79cd\u7c7b\u578b\u3002\u8f93\u9001\u98df\u54c1\u8f66\u5230\u7164\u77ff\u540e\uff0c\u77ff\u5de5\u4ea7\u7684\u7164\u6570\u91cf\u4e0a\u76f8\u5f53\u4e8e\u6700\u8fd1\u4e09\u5929\u98df\u54c1\u79cd\u7c7b\u6570\u3002\u6c42\u6700\u5927\u7684\u4ea7\u7164\u6570\u91cf\u3002\n\n\u8003\u8651 $dp$ \u3002\u8bbe $dp[i]$ \u4e3a\u524d $i$ \u5929\u4ea7\u7164\u6700\u5927\u503c\uff0c\u53d1\u73b0\u65e0\u6cd5\u8f6c\u79fb $dp$ \u6570\u7ec4\uff0c\u6240\u4ee5\u6211\u4eec\u8981**\u52a0\u7ef4**\u3002\n\n\u8f6c\u79fb $dp$ \u6570\u7ec4\u65f6\u8981\u6839\u636e\u524d\u51e0\u5929\u77ff\u5de5\u914d\u9910\u7684\u98df\u54c1\u79cd\u7c7b\u6765\u8f6c\u79fb\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u8bb0\u5f55\u524d\u4e24\u5929\u4e24\u4e2a\u77ff\u7684\u98df\u54c1\u79cd\u7c7b\u3002\n\n\u8bbe $dp[i][a][b][c][d]$  \u4e3a\u524d $i$ \u5929\uff0c\u7b2c\u4e00\u4e2a\u77ff\u573a\u5403\u4e86 $a$ \u7c7b \u548c $b$ \u7c7b\u98df\u7269\uff0c\u7b2c\u4e8c\u4e2a\u77ff\u573a\u5403\u4e86 $c$ \u7c7b \u548c $d$ \u7c7b\u98df\u7269\u7684\u6700\u5927\u4ea7\u7164\u6570\u91cf\u3002\n\n\u8f6c\u79fb\u65f6\u5206\u7c7b\u8ba8\u8bba\u5373\u53ef\u3002\n\n\u6ce8\u610f\u5230\u8fd9\u9898\u76f4\u63a5\u5f00 $dp$ \u6570\u7ec4\u4f1a\u8d85\u51fa\u7a7a\u95f4\u9650\u5236\uff0c\u6240\u4ee5\u8981\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u3002\n\n\u4ee3\u7801:\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n;\nchar s[100010];\nint dp[2][5][5][5][5];\nint calc(int a,int b,int c)\n{\n\tint sum=1;\n\tif(b&&b!=c) sum++;\n\tif(a&&a!=b&&a!=c) sum++;\n\treturn sum;\n}//\u8ba1\u7b97\u4ea7\u7164\u6570\u91cf\nint main()\n{\n\tcin>>n;\n\tcin>>s+1;\n\tmemset(dp,-1,sizeof dp);\n\tdp[0][0][0][0][0]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int a=0;a<=3;a++)\n\t\t{\n\t\t\tfor(int b=0;b<=3;b++)\n\t\t\t{\n\t\t\t\tfor(int c=0;c<=3;c++)\n\t\t\t\t{\n\t\t\t\t\tfor(int d=0;d<=3;d++)\n\t\t\t\t\t{\n\t\t\t\t\t\tint now;\n\t\t\t\t\t\tif(s[i]=='M') now=1;\n\t\t\t\t\t\tif(s[i]=='F') now=2;\n\t\t\t\t\t\tif(s[i]=='B') now=3;\n\t\t\t\t\t\tif(dp[(i-1)%2][a][b][c][d]==-1) continue;\n\t\t\t\t\t\tdp[i%2][b][now][c][d]=max(dp[i%2][b][now][c][d],dp[(i-1)%2][a][b][c][d]+calc(a,b,now));\n\t\t\t\t\t\tdp[i%2][a][b][d][now]=max(dp[i%2][a][b][d][now],dp[(i-1)%2][a][b][c][d]+calc(c,d,now));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\tint ans=-0x7ffffff;\n\tfor(int a=0;a<=3;a++)\n\t{\n\t\tfor(int b=0;b<=3;b++)\n\t\t{\n\t\t\tfor(int c=0;c<=3;c++)\n\t\t\t{\n\t\t\t\tfor(int d=0;d<=3;d++)\n\t\t\t\t{\n\t\t\t\t\tans=max(ans,dp[n%2][a][b][c][d]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1637459246,
        "uid": 173323,
        "name": "Yukinoshita_Yukino",
        "ccfLevel": 4,
        "title": "P4401\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053 DP \u597d\u9898\u3002\n\n$dp_{i, a, b, c, d}$ \u8868\u793a\u524d $i$ \u8f66\u5df2\u7ecf\u5206\u53d1\u5b8c\u6bd5\uff0c$1$ \u53f7\u7164\u77ff\u4e0a\u6b21\u5403\u7684\u98df\u54c1\u4e3a $a$\uff0c\u4e0a\u4e0a\u6b21\u4e3a $b$\uff0c$2$ \u53f7\u7164\u77ff\u4e0a\u6b21\u5403\u7684\u98df\u54c1\u4e3a $c$\uff0c\u4e0a\u4e0a\u6b21\u4e3a $d$ \u65f6\u7684\u6700\u5927\u4ea7\u7164\u91cf\u3002\n\n\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u8bbe `M` \u662f $1$\uff0c`F` \u662f $2$\uff0c`B` \u662f $3$\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u8bb0\u4e3a $0$\u3002\uff08\u4f8b\u5982\uff0c\u5f53 $a$ \u4e3a $0$ \u65f6\u8868\u793a $1$ \u53f7\u7164\u77ff\u6ca1\u6709\u5403\u8fc7\u996d\uff0c\u5f53 $b$ \u4e3a $0$ \u65f6\u8868\u793a $1$ \u53f7\u7164\u77ff\u53ea\u5403\u8fc7\u4e00\u6b21\u996d\u3002\uff09\n\n\u8bbe $cnt_{a, b, c}$ \u8868\u793a\u4e00\u4e2a\u7164\u77ff\u6700\u540e\u4e09\u6b21\u5403\u7684\u98df\u7269\u5206\u522b\u4e3a $a, b, c$ \u65f6\u7684\u4ea7\u7164\u91cf\u3002\n\nDP \u65b9\u7a0b\uff1a\u82e5\u5c06\u98df\u7269\u7ed9 $1$ \u53f7\u7164\u77ff\uff0c\u5219 $dp_{i, q, a, r, s} = \\max(dp_{i-1, p, q, r, s})$\n\n\u82e5\u5c06\u98df\u7269\u7ed9 $2$ \u53f7\u7164\u77ff\uff0c\u5219 $dp_{i, p, q, s, a} = \\max(dp_{i-1, p, q, r, s})$\n\n\u5176\u4e2d $a$ \u8868\u793a\u672c\u6b21\u7684\u98df\u7269\u3002\n\n\u5982\u679c\u67d0\u4e00\u4e2a\u72b6\u6001\u4e0d\u5b58\u5728\uff0c\u5219\u8bbe\u5176\u4e3a $-1$\uff0c\u800c\u4e14\u8f6c\u79fb\u65f6\u8981\u7279\u5224\u3002\n\n\u7136\u800c\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5185\u5b58 $17.58\\operatorname{M}$\u3002\n\n\u679c\u65ad\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u3002\n\n\u6211\u6253\u6eda\u52a8\u6570\u7ec4\u7684\u7801\u98ce\u548c\u5927\u5bb6\u4e0d\u592a\u4e00\u6837\uff0c\u5927\u4f6c\u52ff\u55b7\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n, a, ans;\nchar ch;\nint dp[4][4][4][4], last[4][4][4][4];\n\nint change(char ch) {\n\tswitch (ch) {\n\t\tcase 'M': {\n\t\t\treturn 1;\n\t\t\tbreak;\n\t\t}\n\t\tcase 'F': {\n\t\t\treturn 2;\n\t\t\tbreak;\n\t\t}\n\t\tcase 'B': {\n\t\t\treturn 3;\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\treturn 0;\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nint cnt(int a, int b, int c) {\n\tif (a = 0) return 1 + (b != c && b && c);\n\tif (b = 0) return 1 + (a != c && a && c);\n\tif (c = 0) return 1 + (a != b && a && b);\n\treturn 1 + (a != b || a != c || b != c) + (a != b && b != c && a != c);\n}\n\nint main() {\n\tcin >> n;\n\tmemset(last, -1, sizeof(last));\n\tlast[0][0][0][0] = 0;\n\tfor (int i = 1; i <= n; i++) {\n\t\tmemset(dp, -1, sizeof(dp));\n\t\tcin >> ch;\n\t\ta = change(ch);\n\t\tfor (int p = 0; p < 4; p++) {\n\t\t\tfor (int q = 0; q < 4; q++) {\n\t\t\t\tfor (int r = 0; r < 4; r++) {\n\t\t\t\t\tfor (int s = 0; s < 4; s++) {\n\t\t\t\t\t\tif (last[p][q][r][s] == 0) continue;\n\t\t\t\t\t\tdp[q][a][r][s] = max(dp[q][a][r][s], last[p][q][r][s] + cnt(p, q, a));\n\t\t\t\t\t\tdp[p][q][s][a] = max(dp[p][q][s][a], last[p][q][r][s] + cnt(p, q, a));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmemcpy(last, dp, sizeof(dp));\n\t}\n\tfor (int p = 0; p < 4; p++) {\n\t\tfor (int q = 0; q < 4; q++) {\n\t\t\tfor (int r = 0; r < 4; r++) {\n\t\t\t\tfor (int s = 0; s < 4; s++) {\n\t\t\t\t\tans = max(ans, dp[p][q][r][s]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n\n\u540e\u8bb0\uff1a\n\n\u4ee3\u7801\u91cc\u6709\u4e09\u4e2a\u5751\u54e6\uff01",
        "postTime": 1616164559,
        "uid": 153422,
        "name": "0x3F",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "### \u6ce8\u610f\uff1a\u5185\u5b58\u9650\u523617.58MB\uff01\uff01\uff01\n### \u9898\u76ee\u5927\u610f\uff1a\n\u5176\u5b9e\u5c31\u662f\u8981\u4e89\u53d6\u6bcf\u6b21\u9001\u7684\u4e1c\u897f\u548c\u524d\u9762\u7684\u4e0d\u4e00\u6837\uff0c\u7136\u540e\u6c42\u51fa\u4e00\u4e2a\u6700\u5927\u503c\u3002\u56e0\u4e3a\u53ea\u6709\u4e24\u4e2a\u5de5\u5382\uff0c\u6211\u4eec\u53ea\u7528\u6328\u4e2a\u770b\u5c31\u80fd\u5f97\u51fa\u6b63\u89e3\u3002\u6240\u4ee5\u672c\u9898\u8fd8\u662f\u5f88\u597d\u505a\u7684\u3002\n\n\u9898\u76ee\u4e2d\u6709\u8fd9\u51e0\u5904\u4fe1\u606f\u6bd4\u8f83\u6709\u7528\uff0c\u4e3a\u4e86\u65b9\u4fbf\u5927\u5bb6\u770b\u4e0b\u53bb\uff0c\u6211\u628a\u5b83\u4eec\u7f57\u5217\u5728\u8fd9\u91cc\uff1a\n```\n\u00b7\u5982\u679c\u8fd9\u51e0\u6b21\u98df\u54c1\u8f66\u90fd\u662f\u540c\u4e00\u7c7b\u578b\u7684\u98df\u54c1\uff0c\u5219\u77ff\u5de5\u4eec\u4ea7\u51fa\u4e00\u4e2a\u5355\u4f4d\u7684\u7164\u3002\n\n\u00b7\u5982\u679c\u8fd9\u51e0\u6b21\u98df\u54c1\u8f66\u4e2d\u6709\u4e24\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u98df\u54c1\uff0c\u5219\u77ff\u5de5\u4eec\u4ea7\u51fa\u4e24\u4e2a\u5355\u4f4d\u7684\u7164\u3002\n\n\u00b7\u5982\u679c\u8fd9\u51e0\u6b21\u98df\u54c1\u8f66\u4e2d\u6709\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u98df\u54c1\uff0c\u5219\u77ff\u5de5\u4eec\u4ea7\u51fa\u4e09\u4e2a\u5355\u4f4d\u7684\u7164\u3002\n```\n\n### \u5206\u6790\uff1a\n\u672c\u6765\u662f\u60f3\u7528\u8d2a\u5fc3\u7684\uff0c\u7ed3\u679c\u53d1\u73b0\u8fd9\u9053\u9898\u76ee\u4e0d\u5177\u5907\u6700\u4f18\u5b50\u7ed3\u6784\uff0c\u4f60\u4e0d\u77e5\u9053\u540e\u9762\u8fd8\u4f1a\u6709\u4ec0\u4e48\u9910\u8f66\uff0c\u7136\u540e\u89c9\u5f97\u53ef\u4ee5\u7528\u80cc\u5305\u3002\u56e0\u4e3a\u53ea\u6709\u4e09\u79cd\u98df\u7269\uff0c\u548c\u4e24\u4e2a\u5de5\u5382\uff0c$dp$ \u65b9\u7a0b\u4e2d\u53ea\u7528\u5305\u542b\u6bcf\u4e2a\u5de5\u5382\u7684\u524d\u9762\u4e24\u6b21\u9001\u9910\u7684\u5185\u5bb9\u5c31\u884c\u4e86\u3002\u6211\u4eec\u4e3a\u4e86\u65b9\u4fbf\u5199\u4ee3\u7801\uff0c\u53ef\u4ee5\u628a\u8089\uff0c\u9c7c\u548c\u9762\u5305\u5206\u522b\u7528 $1\uff0c2\uff0c3$ \u6765\u8868\u793a\u3002\u5427\u4ece\u7b2c\u4e00\u6b65\u5230\u6700\u540e\u4e00\u6b65\u6bcf\u4e00\u6b21\u7684\u6700\u4f18\u89e3\u7b97\u51fa\u6765\uff0c\u6700\u540e\u5728\u603b\u5730\u7b97\u4e00\u904d\u5c31\u80fd\u5f97\u5230 $ans$ \u4e86\u3002\u6765\uff0c\u4e00\u8d77\u770b\u770b\u65b9\u7a0b\u600e\u4e48\u5199\u3002\n\n### \u65b9\u7a0b\n\u6839\u636e\u4e0a\u9762\u7684\u5206\u6790\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u6700\u57fa\u7840\u7684\u65b9\u7a0b\u5f0f\uff1a\n\n$f[n][a][b][c][d]$\u8868\u793a\u63a8\u5230\u7b2c $n$ \u4e2a\u98df\u54c1\u8f66\u65f6\u7b2c\u4e00\u4e2a\u7164\u5382\u524d\u9762\u4e24\u6b21\u8fd0\u7684\u662f $a$ \u548c $b$ \uff0c\u7b2c\u4e8c\u4e2a\u7164\u5382\u524d\u9762\u4e24\u6b21\u4e0e\u7684\u662f $c$ \u548c $d$\u3002\n\n\u5176\u4e2d$n$\u7684\u8303\u56f4\u662f$10^5$\uff0c$a,b,c,d$ \u90fd\u662f $4$ \uff0c\u7a0d\u5fae\u4e00\u4f30\u7b97\u5c31\u77e5\u9053\u5185\u5b58\u4e0d\u5927\u591f\u3002\u6211\u4eec\u4e0d\u59a8\u6765\u8be6\u7ec6\u7b97\u4e00\u4e0b\u5185\u5b58 :\n\n$100000\\times4\\times4\\times4\\times4\\times4\\div1024\\div1024\\approx24$\n\n\u4e0d\u7528\u60f3\uff0c\u53c2\u89c1\u6ce8\u610f\u4e8b\u9879\uff0c\u80af\u5b9aMLE\n\n\u6765\uff0c\u4e0a\u6eda\u52a8\u6570\u7ec4\uff0c\u628a $n$ \u6eda\u6210\u53ea\u6709 $2$ \u7ef4\u7684\u3002\n\n\u597d\u4e86\uff0c\u4e0d\u591a\u8bf4\u4e86\uff0c\u770b\u4ee3\u7801\n```c\n#include<bits/stdc++.h>\nusing namespace std; \n\ninline int read(){\n\tint f=1,x=0;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=(x<<3)+(x<<1)+(ch^48);ch=getchar();}\n\treturn f*x;\n}\n\nint change(char ch){//\u65b9\u4fbf\u5199\u7a0b\u5e8f  \n\tif(ch=='M')\n\t\treturn 1;\n\tif(ch=='F')\n\t\treturn 2;\n\tif(ch=='B')\n\t\treturn 3;\n}\n\nint calc(int n,int a,int b){//\u7b97\u4e00\u4e0b \u4ea7\u91cf \n\tint c=1;\n\tif(n&&b!=n&&a!=n)\n\t\tc++;\n\tif(a&&b!=a)\n\t\tc++;\n\t\treturn c;\n}\n\nint g_n;\nint g_choi[3][4][4][4][4];\nchar s[100010];\nint g_meal[100010];\n\nint main(){\n\tg_n=read();\n\tscanf(\"%s\",s+1);\n\tfor(int i=1;i<=g_n;i++){\n\t\tg_meal[i]=change(s[i]);//\u8f6c \n\t}\n\tmemset(g_choi,-1,sizeof(g_choi));\n\tg_choi[0][0][0][0][0]=0;//\u522b\u5fd8\u4e86\u8d4b\u521d\u503c\uff0c\u8981\u4e0d\u7136\u5168WA \n\tfor(int i=1;i<=g_n;i++){\n\t\tfor(int a1=0;a1<4;a1++){\n\t\t\tfor(int b1=0;b1<4;b1++){\n\t\t\t\tfor(int a2=0;a2<4;a2++){\n\t\t\t\t\tfor(int b2=0;b2<4;b2++){//\u597d\u597d\u7406\u89e3\u7406\u89e3 \n\t\t\t\t\t\tif(g_choi[(i-1)%2][a1][b1][a2][b2]==-1)\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tint tmp=g_choi[(i-1)%2][a1][b1][a2][b2]+calc(a1,b1,g_meal[i]);\n\t\t\t\t\t\tint tmpp=g_choi[(i-1)%2][a1][b1][a2][b2]+calc(a2,b2,g_meal[i]);\n\t\t\t\t\t\tg_choi[i%2][b1][g_meal[i]][a2][b2]=max(tmp,g_choi[i%2][b1][g_meal[i]][a2][b2]);\n\t\t\t\t\t\tg_choi[i%2][a1][b1][b2][g_meal[i]]=max(tmpp,g_choi[i%2][a1][b1][b2][g_meal[i]]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint q=g_n%2;\n\tint ans=-1;\n\tfor(int i=0;i<4;i++){\n\t\tfor(int j=0;j<4;j++){\n\t\t\tfor(int x=0;x<4;x++){\n\t\t\t\tfor(int y=0;y<4;y++){\n\t\t\t\t\tans=max(ans,g_choi[q][i][j][x][y]);//\u7b97\u4e00\u904d\u6700\u4f18\u89e3 \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n```\n\n\n    ",
        "postTime": 1615556256,
        "uid": 422348,
        "name": "Yang818",
        "ccfLevel": 4,
        "title": "P4401"
    },
    {
        "content": "# DP  \n\u9996\u5148\u8bbe\u5b9a**\u72b6\u6001**\u3002\u6709**\u4e24\u4e2a\u77ff\u4e95**\uff0c\u751f\u4ea7\u7164\u6570\u4e0e\u6700\u8fd1\u5403\u7684**\u98df\u7269\u54c1\u79cd**\u6709\u5173\u3002  \n  \n\u6570\u7ec4\u4e5f\u4e00\u5b9a\u662f\u8981**\u6eda\u52a8**\u7684\uff0c\u6b64\u9898\u7a7a\u95f4\u53ea\u6709$17.58MB$\n\n\u6211\u4eec\u5c31\u8bbe$f[i][a][b][c][d]$\u4e3a\u7b2c$i$\u8f86\u8f66\u65f6\uff0c**\u7b2c\u4e00\u4e2a**\u77ff\u4e95\u9001\u4e86$a$\u3001$b$\u4e24\u79cd\u98df\u7269\u3002**\u7b2c\u4e8c\u4e2a**\u77ff\u4e95\u9001\u4e86$c$\u3001$d$\u4e24\u79cd\u98df\u7269\u3002  \n  \n\u73b0\u5728\u5c31\u6709**\u4e24\u79cd\u60c5\u51b5**\uff0c\u4e00\u662f\u9001\u5230$1$\u53f7\u77ff\u4e95\uff0c\u4e8c\u662f\u9001\u5230$2$\u53f7\u77ff\u4e95\u3002  \n  \n### \u53ef\u4ee5\u636e\u6b64\u5217\u51fa\u65b9\u7a0b\uff1a\n\n$f$[$i$&$1$][$a$][$b$][$d$][$x$]=$max$(f[($i+1$)&1][$a$][$b$][$c$][$d$]+$Mining$($c$,$d$,$x$),$f$[$i$&$1$][$a$][$b$][$d$][$x$])\n\n$f$[$i$&$1$][$b$][$x$][$c$][$d$]=$max$($f$[($i$+$1$)&$1$][$a$][$b$][$c$][$d$]+$Mining$($a$,$b$,$x$),$f$[$i$&$1$][$b$][$x$][$c$][$d$]);  \n\n\u89e3\u91ca\u4e00\u4e0b\uff0c$Mining$\u662f\u6c42\u7164\u6570\u7684\u51fd\u6570\uff0c$i$&$1$\u662f**\u6eda\u52a8\u6570\u7ec4**\uff08$i$&$1$\u7b49\u6548\u4e8e$i$%$1$\uff09\n\n### $Mining$\u91cc\u8be5\u5199\u4ec0\u4e48\uff0c\u600e\u4e48\u6c42\u7164\u6570\uff1f  \n## $3$\u79cd**\u666e\u901a\u60c5\u51b5**    \n\n1. \u51e0\u6b21\u98df\u54c1\u8f66**\u90fd\u662f\u540c\u4e00\u7c7b\u578b**\u7684\u98df\u54c1\uff0c\u4ea7**\u4e00\u4e2a**\u5355\u4f4d\u7164\u3002  \n\n2. \u51e0\u6b21\u98df\u54c1\u8f66\u4e2d\u6709**\u4e24\u79cd\u4e0d\u540c\u7c7b\u578b**\u7684\u98df\u54c1\uff0c\u4ea7\u51fa**\u4e24\u4e2a\u5355\u4f4d**\u7684\u7164\u3002  \n\n3. \u51e0\u6b21\u98df\u54c1\u8f66\u4e2d\u6709**\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b**\u7684\u98df\u54c1\uff0c\u4ea7\u51fa**\u4e09\u4e2a\u5355\u4f4d**\u7684\u7164\u3002   \n\n**\u4f2a\u4ee3\u7801**\uff1a  \n```\nint Mining(int q,int w,int e){\n\tif(q==w && w==e){//\u7b2c\u4e00\u79cd\u60c5\u51b5\n\t\treturn 1;\n\t}\n\tif(q!=w && w!=e && q!=e){//\u7b2c\u4e09\u79cd\u60c5\u51b5\n\t\treturn 3;\n\t}\n\treturn 2;//\u7b2c\u4e8c\u79cd\u60c5\u51b5\t\n}\n``` \n\n## $2$\u79cd**\u7279\u6b8a\u60c5\u51b5**  \n\n\u5f53\u662f**\u7b2c\u4e00\u6b21\u9001\u9910**\u65f6\uff0c\u5148\u524d\u7684\u60c5\u51b5**\u65e0\u6cd5\u5224\u65ad**\u3002\u4f46\u662f\u662f$1$\u4e2a\u5355\u4f4d\u7684\u7164  \n\n\u56e0\u4e3a\u6709**\u4e24\u4e2a**\u77ff\u4e95\uff0c\u5f53**\u524d\u4e00\u6b21\u9910\u8f66\u9001\u7684\u4e0d\u662f\u81ea\u5df1\u6240\u5904\u7684\u77ff\u4e95**\uff0c\u4e5f\u8981**\u7279\u5224**\u3002  \n\u5982\u679c\u6709\u4e24\u79cd\u5219\u4ea7$2$\u4e2a\u5355\u4f4d\u7164\uff0c\u5982\u679c\u6709\u4e00\u79cd\u5219\u4ea7$1$\u4e2a\u5355\u4f4d\u7164\u3002  \n  \n**\u5224\u65ad**\u4ee3\u7801\uff1a  \n```\nif(q==0 && w==0){//\u7b2c\u4e00\u6b21\u9001\u9910\n\treturn 1;\n}\n\nif(q==0){//\u524d\u9762\u4e00\u6b21\u6ca1\u9001\u5230\n\tif(w!=e){\n\t\treturn 2;\n\t}\n\telse{\n\t\treturn 1;\n\t}\n}\n```  \n\n\u5c31\u6ca1\u4e86\u3002**\u603b\u4ee3\u7801**\uff1a  \n```\n#include <bits/stdc++.h>\nusing namespace std;\nlong long n,f[3][4][4][4][4],ans=-1,x; \nstring s;\nint change(char op){//\u8f6c\u6210\u6570\u5b57\u65b9\u4fbf\u64cd\u4f5c \n\tif(op=='M'){\n\t\treturn 1;\n\t}\n\tif(op=='F'){\n\t\treturn 2;\n\t}\n\tif(op=='B'){\n\t\treturn 3;\n\t}\n}\nint Mining(int q,int w,int e){\n\tif(q==0 && w==0){//\u7b2c\u4e00\u6b21\u9001\u9910\n\t\treturn 1;\n\t}\n\tif(q==0){//\u524d\u9762\u4e00\u6b21\u6ca1\u9001\u5230\n\t\tif(w!=e){//2\u79cd\u98df\u7269 \n\t\t\treturn 2;\n\t\t}\n\t\telse{//1\u79cd\u98df\u7269 \n\t\t\treturn 1;\n\t\t}\n\t}\n\t\n\tif(q==w && w==e){//\u7b2c\u4e00\u79cd\u60c5\u51b5\n\t\treturn 1;\n\t}\n\tif(q!=w && w!=e && q!=e){//\u7b2c\u4e09\u79cd\u60c5\u51b5\n\t\treturn 3;\n\t}\n\treturn 2;//\u7b2c\u4e8c\u79cd\u60c5\u51b5\n}\nint main(){\n\tcin>>n>>s;\n\t//\u4e0d\u8981\u5fd8\u4e86\u521d\u59cb\u5316 \n\tmemset(f,-1,sizeof(f));\n\tf[0][0][0][0][0]=0;\n\tfor(int i=1; i<=n; i++){\n\t\tx=change(s[i-1]);\n\t\t//0\u662f\u6709\u4e0d\u9001\u8fd9\u4e2a\u77ff\u4e95\u7684\u60c5\u51b5 \n\t\tfor(int a=0; a<=3; a++){\n\t\t\tfor(int b=0; b<=3; b++){\n\t\t\t\tfor(int c=0; c<=3; c++){\t\t\t\t\n\t\t\t\t\tfor(int d=0; d<=3; d++){\n\t\t\t\t\t\tif(f[(i+1)&1][a][b][c][d]==-1){\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tf[i&1][a][b][d][x]=max(f[(i+1)&1][a][b][c][d]+Mining(c,d,x),f[i&1][a][b][d][x]);\n\t\t\t\t\t\tf[i&1][b][x][c][d]=max(f[(i+1)&1][a][b][c][d]+Mining(a,b,x),f[i&1][b][x][c][d]);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor(int a=0; a<=3; a++){\n\t\tfor(int b=0; b<=3; b++){\n\t\t\tfor(int c=0; c<=3; c++){\t\t\t\t\n\t\t\t\tfor(int d=0; d<=3; d++){\n\t\t\t\t\tans=max(ans,f[n&1][a][b][c][d]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1609217667,
        "uid": 169555,
        "name": "Kiloio",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "#### \u8fd9\u53ea\u662f\u4e00\u9053\u5f88\u666e\u901a\u7684DP\n##### ~~\u4f46\u662f\u770b\u5230\u7a7a\u95f4\u9650\u5236\uff0c\u611f\u89c9\u662f\u4e0d\u662f\u51faBUG\u4e86~~\n#### \u5176\u5b9e\u53ea\u8981\u7528\u4e00\u4e2a\u6eda\u52a8\u6570\u7ec4\u5c31\u884c\u5566\n### \u8bb0f[now][i][i1][j][j1]\u4e3a\u5f53\u524dnow\u65f6\u77ff\u6d1e\u4e00\u524d\u4e24\u9910\u4e3ai,i1,\u77ff\u6d1e\u4e8c\u524d\u4e24\u9910\u4e3aj,j1\n#### \u8f6c\u79fb\u5f88\u663e\u7136f[now][k][i][j][j1]=max(f[now][k][i][j][j1],f[now^1][i][i1][j][j1]+xx(k,i,i1));\n##### k\u8868\u793a\u5f53\u524d\u98df\u7269\u7684\u6807\u53f7,xx\u51fd\u6570\u8868\u793a\u80fd\u4ea7\u51fa\u7684\u7164\u77ff\n#### \u6700\u540e\u5728\u904d\u5386\u4e00\u904dnow\u6c42\u51fa\u6700\u5927\u8f93\u51fa\u5c31\u884c\n#### ~~\u6eda\u52a8\u5c31\u662fnow\u6307\u9488\u5f02\u62161\u5c31\u884c\u5566QWQ~~\n```cpp\n#include<bits/stdc++.h>\n\nusing namespace std;\n\nint n,now;\nchar c[100010];\nint f[2][4][4][4][4];\n\nint cc(char c)//\u7ed9\u98df\u7269\u6807\u53f7\n{\n\tif(c=='M')return 1;\n\tif(c=='F')return 2;\n\tif(c=='B')return 3;\n}\n\nint xx(int z,int y,int x)//\u8ba1\u7b97\u7164\u77ff\u4ea7\u91cf\n{\n    if(!x && !y) return 1;\n    if(!x) return 1+(y!=z);\n    if(x==y && y==z) return 1;\n    return(x!=y)+(y!=z)+(x!=z);\n}\n\nint main()\n{\n\tscanf(\"%d\\n\",&n);\n\tscanf(\"%s\",c+1);\n\tmemset(f,-1,sizeof(f));\n\tf[0][0][0][0][0]=0;\n\tfor(int l=1;l<=n;l++)\n\t{\n\t\tint k=cc(c[l]);\n\t\tnow=l%2;\n\t\tfor(int i=0;i<=3;i++)\n\t\tfor(int i1=0;i1<=3;i1++)\n\t\tfor(int j=0;j<=3;j++)\n\t\tfor(int j1=0;j1<=3;j1++)\n\t\t{\n\t\t\tif(f[now^1][i][i1][j][j1]==-1)continue;//\u6ce8\u610f\u5fc5\u987b\u8981\u7279\u5224,\u5426\u5219\u53ef\u80fd\u5b9e\u9645\u8fd8\u6ca1\u5403\u524d\u4e24\u9910\u5c31\u5df2\u7ecf\u6709\u6807\u8bb0\u4e86\n\t\t\tf[now][k][i][j][j1]=max(f[now][k][i][j][j1],f[now^1][i][i1][j][j1]+xx(k,i,i1));\n\t\t\tf[now][i][i1][k][j]=max(f[now][i][i1][k][j],f[now^1][i][i1][j][j1]+xx(k,j,j1));\n\t\t}\n\t}\n\tint Max=0;\n\tfor(int i=0;i<=3;i++)\n\tfor(int i1=0;i1<=3;i1++)\n\tfor(int j=0;j<=3;j++)\n\tfor(int j1=0;j1<=3;j1++)\n\tMax=max(Max,f[now][i][i1][j][j1]);//\u6c42\u6700\u5927\u8f93\u51fa\n\tprintf(\"%d\\n\",Max);\n\treturn 0;\n}\n```",
        "postTime": 1534250884,
        "uid": 54593,
        "name": "Bigfatpig",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "dp\uff0cf[i][a][b][c][d]\u8868\u793a\u9001\u7b2ci\u8f86\u8f66\u6765\u65f6\u77ff\u6d1e1\u7684\u524d\u4e24\u6b21\u5403a\u548cb\uff0c\u77ff\u6d1e2\u7684\u524d\u4e24\u6b21\u5403c\u548cd\uff0c\u5f53b\u6216d\u4e3a0\u8868\u793a\u8be5\u77ff\u6d1e\u53ea\u9001\u8fc7\u4e00\u8f86\u8f66\uff0c\u5f53a\u3001b\u6216c\u3001d\u4e3a0\u65f6\u8868\u793a\u8be5\u77ff\u6d1e\u6ca1\u9001\u8fc7\u8f66\u3002i\u53ef\u4ee5\u6eda\u52a8\u6389\uff0c\u540c\u65f6i\u9700\u5012\u5e8f\u679a\u4e3e\u3002\u6c42\u77ff\u5de5\u91c7\u7164\u91cf\u7684\u5206\u7c7b\u8ba8\u8bba\u6bd4\u8f83\u590d\u6742\uff0c\u5177\u4f53\u770b\u4ee3\u7801\u3002\n\n\n------------\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#define inc(i,j,k) for(int i=j;i<=k;i++)\n#define dec(i,j,k) for(int i=j;i>=k;i--)\n#define maxn 100010\nusing namespace std;\n\nint cg(char a){\n    if(a=='M')return 1;else if(a=='F')return 2;else if(a=='B')return 3;\n}\nint f[maxn],n,x[4][4][4][4],y[4][4][4][4]; char s[maxn];\nint main(){\n    scanf(\"%d\",&n); scanf(\"%s\",s+1);\n    inc(i,1,n){if(s[i]=='M')f[i]=1; if(s[i]=='F')f[i]=2; if(s[i]=='B')f[i]=3;} memset(x,0,sizeof(x));\n    dec(i,n,1){\n        memset(y,0,sizeof(y));\n        inc(j1,0,3)inc(j2,0,3)inc(j3,0,3)inc(j4,0,3){\n            if((j1&&!j2)||(j3&&!j4))continue; int plus1,plus2;\n            if((!j1&&!j2)||(!j1&&j2==f[i])||(j1==j2&&j2==f[i]))plus1=1;else\n            if(j1!=j2&&j2!=f[i]&&j1!=f[i]&&j1&&j2)plus1=3;else plus1=2;\n            if((!j3&&!j4)||(!j3&&j4==f[i])||(j3==j4&&j4==f[i]))plus2=1;else\n            if(j3!=j4&&j4!=f[i]&&j3!=f[i]&&j3&&j4)plus2=3;else plus2=2;\n            y[j1][j2][j3][j4]=max(x[j2][f[i]][j3][j4]+plus1,x[j1][j2][j4][f[i]]+plus2);        \n        }\n        swap(x,y);\n    }\n    printf(\"%d\",x[0][0][0][0]); return 0;\n}\n```",
        "postTime": 1526209480,
        "uid": 51674,
        "name": "calix_x",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "~~\u544a\u8bc9\u5927\u5bb6\u4e00\u4ef6\u4e8b\uff1a\u6709\u4e00\u4e2a\u4eba\u53eb\u5c0f\u660e\uff0c\u65e0\u8bba\u7ed9\u4ed6\u4ec0\u4e48\u98df\u7269\u4ed6\u90fd\u80fd\u6316\u52301000000000000000000000\u4e2a\u77ff\uff01\uff08\u7565\u7565\u7565\uff09~~\n# P4401 \u9898\u89e3\n## **\u672c\u9898\u89e3\u51b3\u65b9\u6cd5\uff1aDP**\n\u4ee4\u6ca1\u6709\u98df\u7269=$ 0 $\uff0c\u8089=$ 1 $\uff0c\u9c7c=$ 2 $\uff0c\u9762\u5305=$ 3 $ ~~\uff08\u539f\u6765\u6570\u5b57\u80fd\u5403\u554a\uff09~~\n\u8bbe$ dp[n][i1][i2][j1][j2] $\u4e3a\u9001\u4e86\u524d$ n $\u8f86\u98df\u54c1\u8f66\uff0c\u77ff\u6d1e$ 1 $\u524d\u4e24\u6b21\u9001\u7684\u98df\u7269\u4e3a$ i1 $,$ i2 $,\u77ff\u6d1e$ 2 $\u524d\u4e24\u6b21\u9001\u7684\u98df\u7269\u4e3a$ j1 $,$ j2 $\n\n\u4ee4\u7b2c$ n $\u6b21\u9001\u7684\u98df\u7269\u4e3a$ x $\uff0c$ f(i,j,k) $\u4e3a$ i,j,k $\u4e09\u4e2a\u98df\u7269\u4e2d\u4e0d\u540c\u98df\u7269\u7684\u6570\u91cf\uff0c\u6b64\u65f6\u53ef\u4ee5\u5f97\u5230\u8f6c\u79fb:\n\n$ dp[n][x][i1][j1][j2]=max(dp[n][x][i1][j1][j2],dp[n-1][i1][i2][j1][j2]+f(i1,i2,x)) $\n\n$ dp[n][i1][i2][x][j1]=max(dp[n][i1][i2][x][j1],dp[n-1][i1][i2][j1][j2]+f(j1,j2,x)) $\n\n\u5176\u5b9e$ f(i,j,k) $\u4e0d\u9700\u8981\u5f88\u591a\u6761\u4ef6\u5224\u65ad\uff0c\u641e\u4e2a\u6876\u5c31\u597d\u4e86\n\n\u4f46\u662f\u6b64\u65f6\u4f1a$ MLE $\u3002\u600e\u4e48\u529e\u5462\uff1f\n\n~~\u5bb9\u6613~~\u901a\u8fc7\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0\uff0c$ n $\u7684\u8fd9\u4e00\u7ef4\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u6eda\u6389\uff0c\u6240\u4ee5\u53ea\u9700\u8981$ dp[2][4][4][4][4] $\u5c31\u591f\u4e86\uff0c\u5185\u5b58\u53ea\u6709$ 2*4*4*4*4*4B=1024B<12MB $\n\n\u6700\u540e\uff0c\u7a0b\u5e8f\u8fd8\u9700\u6ce8\u610f\u7ec6\u8282\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,dp[2][4][4][4][4],temp,p=0,q=1,t[4];\nchar s[100010];\nint x(int c,int b,int a){\n\tmemset(t,0,sizeof(t));\n\tt[a]=1;\n\tt[b]=1;\n\tt[c]=1;\n\treturn t[1]+t[2]+t[3];\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tmemset(dp,-1,sizeof(dp));\n\tdp[0][0][0][0][0]=0;\n\tcin>>s;\n\tfor(int i=0;i<n;i++){\n\t\tif(s[i]=='M') temp=1;\n\t\tif(s[i]=='F') temp=2;\n\t\tif(s[i]=='B') temp=3;\n\t\tfor(int a=0;a<=3;a++){\n\t\t\tfor(int b=0;b<=3;b++){\n\t\t\t\tfor(int c=0;c<=3;c++){\n\t\t\t\t\tfor(int d=0;d<=3;d++){\n\t\t\t\t\t\tif(dp[p][a][b][c][d]==-1) continue;\n\t\t\t\t\t\tdp[q][temp][a][c][d]=max(dp[q][temp][a][c][d],dp[p][a][b][c][d]+x(temp,a,b));\n\t\t\t\t\t\tdp[q][a][b][temp][c]=max(dp[q][a][b][temp][c],dp[p][a][b][c][d]+x(temp,c,d));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tp^=1;\n\t\tq^=1;\n\t}\n\tint ans=-1;\n\tfor(int a=0;a<4;a++){\n\t\tfor(int b=0;b<4;b++){\n\t\t\tfor(int c=0;c<4;c++){\n\t\t\t\tfor(int d=0;d<4;d++){\n\t\t\t\t\tans=max(ans,dp[p][a][b][c][d]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n~~\u6211\u7684\u7a0b\u5e8f\u5199\u5f97\u7279\u522b\u4e11~~",
        "postTime": 1600870602,
        "uid": 289230,
        "name": "ricky0916",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    },
    {
        "content": "**~~\u88f8\u7684dp\u6c34\u9898\u5427~~**\n\n\n\u6280\u5de7\u662f\u7528\u4e00\u4e2a\u4e8c\u4f4d\u7684\u4e09\u8fdb\u5236\u6570\u8868\u793a\u8be5\u4ed3\u5e93\u524d\u4e24\u5929\u7684\u914d\u9910\u7c7b\u578b\u3002\n\n0\u8868\u793aM\uff0c1\u8868\u793aF\uff0c2\u8868\u793aB\n\n\u4e24\u5929\u4e00\u5171\u6709\u4e5d\u79cd\u60c5\u51b5\n\uff0800\uff0c 01\uff0c 02\uff0c 10\uff0c 11\uff0c12\uff0c20\uff0c21\uff0c22\uff0c\u75280\u52308\u6765\u8868\u793a\uff09\n\n\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\u662f\u8be5\u4ed3\u5e93\u8fd8\u672a\u914d\u8fc7\u9910\uff0c\u75289\u8868\u793a\uff0c\u53e6\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\u662f\u8be5\u4ed3\u5e93\u53ea\u914d\u8fc7\u4e00\u6b21\u9910\n\n\u8fd9\u79cd\u60c5\u51b5\u7b49\u4ef7\u4e8e\u524d\u4e24\u5929\u914d\u9910\u79cd\u7c7b\u76f8\u540c\u3002\n\n\n\u800c\u7a0b\u5e8f\u4e2d\u7684check\u51fd\u6570\u8fd4\u56de\u7684\u662f\u5982\u679c\u4e09\u5929\u7684\u914d\u9910\u79cd\u7c7b\u5206\u522b\u4e3aa\uff0cb\uff0cc\uff0c\u5219\u77ff\u5de5\u7684\u51fa\u77ff\u91cf\u4e3a\u591a\u5c11\u3002\n\n\n\u4e4b\u540e\u7684\u52a8\u6001\u89c4\u5212\u5c31\u662f\u5f88\u5e38\u89c4\u7684\u601d\u8def\u4e86\uff0c\u8fb9\u754c\u6761\u4ef6\u662f\u4e24\u4e2a\u4ed3\u5e93\u90fd\u672a\u914d\u9910\u65f6\u603b\u51fa\u77ff\u91cf\u4e3a0\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\u5237\u8868\u6cd5\u8981\u6bd4\u4e00\u822c\u7684\u9012\u63a8\u66f4\u597d\u5199\uff0c\u4ee3\u7801\u5982\u4e0b\u3002\n```c\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n\nconst int INF = 1000000000;\nconst int maxn = 100000 + 10;\nint n;\nint d[10][10][2];\n\nint readchar () {\n    char c = getchar();\n    if (c == 'M') return 0;\n    if (c == 'F') return 1;\n    if (c == 'B') return 2;\n}\n\nint check (int a, int b, int c) {\n    if (a == b && b == c && a == c) return 1;\n    if (a != b && a != c && b != c) return 3;\n    return 2;\n}\n\nint main ()\n{\n//  freopen(\"in.txt\", \"r\", stdin);\n    cin >> n; getchar();\n    \n    for (int i = 0; i < 10; i++) \n        for (int j = 0; j < 10; j++) \n            d[i][j][0] = -INF;\n    \n    d[9][9][0] = 0;\n    int t = 0;\n    for (int cur = 0; cur < n; cur++) {\n        for (int i = 0; i < 10; i++) \n            for (int j = 0; j < 10; j++) d[i][j][t^1] = -INF;\n        \n        int food = readchar();\n        for (int i = 0; i < 10; i++) \n            for (int j = 0; j < 10; j++) if (d[i][j][t] >= 0) {\n                if (i == 9) d[food*3+food][j][t^1] = max(d[food*3+food][j][t^1], d[i][j][t]+1);\n                else {\n                    int f1 = i/3, f2 = i%3;\n                    int next = f2*3+food;\n                    int v = check(f1, f2, food);\n                    d[next][j][t^1] = max(d[next][j][t^1], d[i][j][t]+v);\n                }\n                \n                if (j == 9) d[i][food*3+food][t^1] = max(d[i][food*3+food][t^1], d[i][j][t]+1);\n                else {\n                    int f1 = j/3, f2 = j%3;\n                    int next = f2*3+food;\n                    int v = check(f1, f2, food);\n                    d[i][next][t^1] = max(d[i][next][t^1], d[i][j][t]+v);\n                }\n        }\n        t ^= 1;\n    }\n    int ans = -INF;\n    for (int i = 0; i < 10; i++) \n        for (int j = 0; j < 10; j++) ans = max(ans, d[i][j][t]);\n    \n    cout << ans;\n    return 0;\n}\n```",
        "postTime": 1549024150,
        "uid": 48439,
        "name": "YuRuiH_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4401 \u3010[IOI2007]Miners \u77ff\u5de5\u914d\u9910\u3011"
    }
]
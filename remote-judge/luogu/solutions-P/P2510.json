[
    {
        "content": "[\u4e24\u9875\u7684\u7206\u86cb\u8bb0\u5f55](https://www.luogu.org/recordnew/lists?uid=84088&pid=P2510)\uff08\u6765\u81ea\u849f\u84bb\u7684\u65e0\u52a9\uff09\u3002\n\norz \u5343\u53e4\u795e\u7287 wzp \u4e00\u773c\u79d2\u9898\u3002\n\n\u8fd9\u79cd\u9898\u4e00\u5b9a\u8981\u8010\u5fc3\u5730\u505a\uff08\u521d\u4e2d\u6570\u5b66\u8001\u5e08\u4e00\u76f4\u8fd9\u4e48\u5bf9\u6211\u8bf4\uff09\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u6765\u770b\u5176\u7b80\u5316\u7248\uff1a\n\n![](https://github.com/pfypfypfy/images-in-blogs/blob/master/20180527002.png?raw=true)\n\n\u6211\u4eec\u628a $\\odot B$ \u8986\u76d6\u5728 $\\odot A$ \u4e0a\uff0c\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u9700\u8981\u6c42\u51fa $\\angle A$ \u7684\u5ea6\u6570\u3002\u6211\u7684\u65b9\u6cd5\u662f\u8fde\u7ed3 $CB,AB,BD,AB$\uff08\u5982\u56fe\uff09\u3002\u6211\u4eec\u53d1\u73b0 $\\triangle ABC\\cong\\triangle ABD$\uff0c\u53c8\u5728 $\\triangle ABC$ \u4e2d\uff0c\u7531[\u4f59\u5f26\u5b9a\u7406](https://baike.baidu.com/item/%E4%BD%99%E5%BC%A6%E5%AE%9A%E7%90%86/957460?fr=aladdin)\u5f97\uff1a$\\cos A=\\frac{{AC}^2 + {AB}^2 - BC^2}{2\\times AB \\times AC}$ \u4e8e\u662f\u6211\u4eec\u5c31\u5f97\u5230\u4e86 $\\angle A$\u3002\n\n![](https://github.com/pfypfypfy/images-in-blogs/blob/master/20180527003.png?raw=true)\n\n\u606d\u559c\u4f60\u8fc7\u4e86\u6837\u4f8b\u3002\n\n```cpp\ndouble dist = get_dist(A, B);\nif(dist > A.r+B.r || A.r + dist < B.r)\n\treturn;\nif(dist + B.r < A.r)//\u5b8c\u5168\u88ab\u8986\u76d6\n{\n\tgaif = true;//\u6807\u8bb0\u76f4\u63a5\u8df3\u51fa\n\treturn;\n}\ndouble alpha = acos((sqr(B.r)+sqr(dist)-sqr(A.r))/(B.r*dist*2.));\n```\n\n\u90a3\u4e48\u5982\u679c\u6709\u591a\u4e2a\u5706\u5462\uff1f\n\n![](https://github.com/pfypfypfy/images-in-blogs/blob/master/20180527004.png?raw=true)\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5bf9\u4e8e $\\odot A$ \u6765\u8bf4\uff0c$EF$ \u88ab\u8986\u76d6\u4e86\u4e24\u6b21\uff0c\u4f46\u6211\u4eec\u4e4b\u80fd\u51cf\u4e00\u6b21\u3002\u4e8e\u662f\u6211\u4eec\u5c31\u60f3\u5230\u4e86\uff1a\u5bf9\u4e8e\u6bcf\u4e2a\u5706\uff0c\u679a\u4e3e\u76d6\u5728\u5176\u4e0a\u9762\u7684\u5706\uff0c\u7b97\u51fa\u6bcf\u4e2a\u8986\u76d6\u201c\u7ebf\u6bb5\u201d\u7684\u5de6\u53f3\u7aef\u70b9\uff0c\u7136\u540e\u8fdb\u884c\u4e00\u6b21\u7ebf\u6bb5\u8986\u76d6\u5c06\u5176\u5408\u5e76\u3002\u6700\u540e\uff0c\u6211\u4eec\u53ea\u8981\u7b97\u51fa\u6ca1\u6709\u88ab\u8986\u76d6\u5230\u7684\u7ebf\u6bb5\u957f\u5ea6\u5373\u53ef\u3002\n\n\u6211\u4eec\u7528[\u6781\u89d2](https://baike.baidu.com/item/%E6%9E%81%E8%A7%92/12726003?fr=aladdin)\u6765\u8868\u793a\u5706\u4e0a\u70b9\u7684\u4f4d\u7f6e\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u8fdb\u884c\u7ebf\u6bb5\u8986\u76d6\u64cd\u4f5c\u4e86\u3002\n\n\u5982\u56fe\uff0c$AE$ \u5e73\u884c $x$ \u8f74\uff0c\u6211\u4eec\u4ee5\u7b97\u51fa $AC$ \u7684\u659c\u7387\uff0c\u52a0\u4e2a $\\arctan$ \u5373\u53ef\u6c42\u51fa $\\angle CAE$\uff0c\u7136\u540e $\\angle EAD$\u3001$\\angle BAE$ \u5747\u53ef\u6c42\u51fa\u3002\n\n![](https://github.com/pfypfypfy/images-in-blogs/blob/master/20180527005.png?raw=true)\n\n\u4e8e\u662f\u7406\u8bba\u4e0a\u7684\u95ee\u9898\u5c31\u5168\u90e8\u89e3\u51b3\u4e86\u3002\n\n\u5bf9\u4e8e\u6781\u89d2\u8fd8\u6709\u4e00\u4e2a\u5c0f\u7ec6\u8282\uff1a\n\n\u7531\u4e8e\u6211\u4eec\u5728\u7ebf\u6bb5\u6c42\u5e76\u65f6\u53ea\u5bb9\u8bb8\u6709$1$\u5230$2\\pi$\u7684\u5f27\u5ea6\uff0c\u56e0\u6b64\uff0c\u5bf9\u4e8e\u4e24\u4e2a\u201c\u4ea4\u70b9\u201d$l,r$\uff0c\u6211\u4eec\u9700\u8981\u4f5c\u51fa\u4ee5\u4e0b\u7279\u5224\uff1a\n\n1. $l<0$ \u4e14 $r<0$ \u65f6\uff0c\u6211\u4eec\u8981\u628a $l$ \u4e0e $r$ \u5747\u52a0\u4e0a $2\\pi$\uff1b\n2. $l<0$ \u4e14 $r>0$ \u65f6\uff0c\u6211\u4eec\u63d2\u5165 $[l+2\\pi,2\\pi],[0,r]$ \u4e24\u6bb5\uff1b\n3. $l<2\\pi$ \u4e14 $r>2\\pi$ \u65f6\uff0c\u6211\u4eec\u63d2\u5165 $[l,2\\pi],[0,r-2\\pi]$ \u4e24\u6bb5\u3002\n\n\u5177\u4f53\u4ee3\u7801\u5b9e\u73b0\u5982\u4e0b\uff1a\n\n```cpp\n//const pi2 = 2*pi\n\nif(jiao1 < 0 && jiao2 < 0)//\u8fd9\u53e5\u8bdd\u82b1\u4e86\u6211\u4e00\u9875\u7684\u63d0\u4ea4\n{\n\tjiao1 += pi2, jiao2 += pi2;\n}\nif(jiao1 >= 0 && jiao2 <= pi2)\n\tcha(jiao1, jiao2);\nelse\n{\n\tif(jiao1 < 0)\n\t{\n\t\tcha(jiao1+pi2, pi2);\n\t\tcha(0, jiao2);\n\t}\n\telse\n\t{\n\t\tcha(jiao1, pi2);\n\t\tcha(0, jiao2-pi2);\n\t}\n}\n```\n\n### \u6574\u4f53\u4ee3\u7801\n\n```cpp\n//\u4ee3\u7801\u6709\u4e9b\u5197\u957f\uff0c\u5927\u4f6c\u52ff\u55b7\n//\u849f\u84bb\u65e0\u6bd2\uff0c\u8bf7\u653e\u5fc3\u98df\u7528\n\n#include <cstdio>\n#include <cmath>\n#include <algorithm>\n\nusing namespace std;\n\nconst int maxn = 10005;\nconst double pi = 3.1415926535897932;\nconst double pi2 = 2*pi;\n\nstruct Point\n{\n\tdouble x, y;\n};\n\ninline double sqr(double x)\n{\n\treturn x*x;\n}\n\ninline double get_dist(Point x, Point y)\n{\n\treturn sqrt(sqr(x.x-y.x) + sqr(x.y-y.y));\n}\n\nstruct Circle\n{\n\tPoint O;\n\tdouble r;\n} c[maxn];\n\ninline double get_dist(Circle x, Circle y)\n{\n\treturn get_dist(x.O, y.O);\n}\n\nint n;\n\nstruct Fugai\n{\n\tdouble l, r;\n\n\tinline bool operator < (const Fugai& other) const\n\t{\n\t\treturn l < other.l;\n\t}\n} fugai[maxn];\n\nint nown;\ninline void cha(double l, double r)\n{\n\tfugai[++nown] = (Fugai)\n\t{\n\t\tl, r\n\t};\n}\n\nbool gaif = false;//gaif = true\u8868\u793a\u8be5\u5706\u76d8\u88ab\u4e0a\u9762\u7684\u5927\u5706\u76d8\u5b8c\u5168\u8986\u76d6\n\ninline void jiao(Circle A, Circle B)\n{\n\tdouble dist = get_dist(A, B);\n\tif(dist > A.r+B.r || A.r + dist < B.r)//\u6ca1\u6709\u4efb\u4f55\u8986\u76d6\n\t\treturn;\n\tif(dist + B.r < A.r)//\u5982\u679c\u88ab\u4e00\u4e2a\u5927\u5706\u76d8\u5b8c\u5168\u8986\u76d6\uff0c\u76f4\u63a5\u8df3\u51fa\n\t{\n\t\tgaif = true;\n\t\treturn;\n\t}\n\tdouble alpha = acos((sqr(B.r)+sqr(dist)-sqr(A.r))/(B.r*dist*2.));//\u4e0a\u56fe\u4e2d\u7684\u89d2CAD\n\tdouble beta = atan2(A.O.y-B.O.y, A.O.x-B.O.x);//\u4e0a\u56fe\u4e2d\u7684\u89d2CAE\n\tdouble jiao1 = beta-alpha;//\u7ebf\u6bb5\u8986\u76d6\u4e2d\u7684l\n\tdouble jiao2 = beta+alpha;//\u7ebf\u6bb5\u8986\u76d6\u4e2d\u7684r\n\tif(jiao1 < 0 && jiao2 < 0)//\u5bf9\u6781\u89d2\u7684\u4e00\u4e9b\u7279\u5224\n\t{\n\t\tjiao1 += pi2, jiao2 += pi2;\n\t}\n\tif(jiao1 >= 0 && jiao2 <= pi2)\n\t\tcha(jiao1, jiao2);\n\telse\n\t{\n\t\tif(jiao1 < 0)\n\t\t{\n\t\t\tcha(jiao1+pi2, pi2);\n\t\t\tcha(0, jiao2);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcha(jiao1, pi2);\n\t\t\tcha(0, jiao2-pi2);\n\t\t}\n\t}\n}\n\ninline double get_ans()\n{\n\tdouble ans = 0;\n\tsort(fugai+1, fugai+nown+1);\n\tdouble lastr = fugai[1].l;\n\tfor(int i = 1; i <= nown; ++i)\n\t{\n\t\tif(lastr >= fugai[i].r)\n\t\t\tcontinue;\n\t\tif(fugai[i].l > lastr)\n\t\t\tans += fugai[i].r - fugai[i].l;\n\t\telse\n\t\t\tans += fugai[i].r - lastr;\n\t\tlastr = fugai[i].r;\n\t}\n\treturn ans;\n}\n\nint main()\n{\n\tscanf(\"%d\", &n);\n\tfor(int i = 1; i <= n; ++i)\n\t\tscanf(\"%lf%lf%lf\", &c[i].r, &c[i].O.x, &c[i].O.y);\n\tdouble ans = 0;\n\tfor(int i = n; i; --i)\n\t{\n\t\tnown = 0;\n\t\tfor(int j = n; j > i; --j)//\u679a\u4e3e\u6240\u6709\u8be5\u5706\u76d8\u4e4b\u540e\u7684\u5706\u76d8\n\t\t{\n\t\t\tjiao(c[j], c[i]);\n\t\t\tif(gaif)\n\t\t\t\tbreak;\n\t\t}\n\t\tif(gaif)\n\t\t\tgaif = false;\n\t\telse\n\t\t\tans += (pi2-get_ans())*c[i].r;\n\t\tnown = 0;\n\t}\n\tprintf(\"%.3f\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1527400186,
        "uid": 84088,
        "name": "pufanyi",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2510 \u3010[HAOI2008]\u4e0b\u843d\u7684\u5706\u76d8\u3011"
    },
    {
        "content": "\u770b\u5230\u8fd9\u9053\u9898\u4e00\u5f00\u59cb\u7684\u60f3\u6cd5\u5c31\u662f\u5b58\u4e00\u5806\u5706\u5f27\uff0c\u7136\u540e\u8be5\u5206\u88c2\u7684\u65f6\u5019\u5206\u88c2\uff0c\u4e0a\u754c\u662f$O(n^3)$\uff0c\u6bd4\u8f83\u677e\uff0c\u4f46\u662f\u4f1a\u6bd4\u8f83\u96be\u5199\n\n\u53e6\u4e00\u79cd\u60f3\u6cd5\u5c31\u662f\u6bcf\u5bf9\u5706\u4e4b\u95f4\u6c42\u538b\u4f4f\u4e86\u54ea\u4e9b\u5706\u5f27\uff0c\u6700\u540e\u518d\u5bf9\u6bcf\u4e00\u4e2a\u5706\u505a\u4e00\u6b21\u7ebf\u6bb5\u8986\u76d6\uff0c\u8fd9\u79cd\u505a\u6cd5\u662f$O(n^2\\log n)$\u7684\n\n\u7ebf\u6bb5\u8986\u76d6\u6392\u4e2a\u5e8f\u5c31\u597d\uff0c\u7136\u540e\u8981\u6c42\u5f27\n\n\u6211\u4eec\u5c06\u6bcf\u6bb5\u5706\u5f27\u5f53\u505a\u533a\u95f4\uff0c\u7528\u70b9\u7684\u6781\u89d2\u4f5c\u4e0b\u6807\uff0c\u8303\u56f4\u5728$[0, 2\\pi)$\uff0c\u5f53\u533a\u95f4$[L, R)(L > R)$\u65f6\uff0c\u62c6\u6210\u4e24\u4e2a\u533a\u95f4$[L, 2\\pi)$\u548c$[0, R)$\n\n\u5bf9\u4e8e\u4e24\u4e2a\u5706$\\odot i, \\odot j (i \\leq j)$\u5b83\u4eec\u7684\u5173\u7cfb\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\n\n1. \u5916\u79bb\u548c\u5916\u5207\uff0c\u8fd9\u79cd\u60c5\u51b5\u6ca1\u6709\u8d21\u732e\n2. \u76f8\u4ea4\n3. \u5185\u5207\u548c\u5185\u542b\uff0c\u8fd9\u79cd\u60c5\u51b5\u53ea\u6709$j$\u5305\u542b$i$\u7684\u65f6\u5019\u6709\u8d21\u732e\uff0c\u5373$r_i \\geqslant r_j$\n\n\u4e0b\u9762\u53ea\u8ba8\u8bba\u76f8\u4ea4\u7684\u60c5\u51b5\n\n\u5982\u56fe\uff0c\u5047\u8bbe$\\overset{\\LARGE{\\frown}}{O_2AB}$\u88ab\u8986\u76d6\n![](https://cdn.luogu.com.cn/upload/pic/52599.png)\n\n\u6211\u4eec\u9700\u8981\u7b97\u51fa$\\angle AO_2H$\n\n\u7531$r_1^2 - x^2 = r_2^2 - y^2$\u5f97\u5230$r_1^2 - r_2^2 = (x + y)(x - y)$\n\n\u56e0\u4e3a$x + y$\u5373\u4e24\u70b9\u8ddd\u79bb\uff0c\u6240\u4ee5\u6211\u4eec\u5f97\u5230\u4e86$x - y$\uff0c\u4ece\u800c\u5f97\u5230\u4e86$y$\uff0c$\\angle AO_2H = \\arccos(\\frac{y}{r_2})$\n\n\u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5f97\u5230\u7ebf\u6bb5$O_2O_1$\u7684\u6781\u89d2\u5927\u5c0f\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528`atan2(x2 - x1, y2 - y1)`\u83b7\u5f97\u3002\u56e0\u4e3a`atan2`\u8fd4\u56de\u7684\u662f\u5230$x$\u8f74\u7684\u89d2\u5ea6\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u6b65\u8f6c\u5316\uff08\u5176\u5b9e\u4e0d\u5904\u7406\u4e5f\u6ca1\u5f71\u54cd\uff09\n\n\u8bbe$O_2O_1$\u6781\u89d2\u5927\u5c0f\u4e3a$A$\uff0c\u5219\u6211\u4eec\u5f97\u5230\u7684\u533a\u95f4\u4e3a$[A - \\angle AO_2H, A + \\angle AO_2H)$\n\n\u7136\u540e\u5c31\u505a\u5b8c\u4e86\uff0c\u6ce8\u610f\u4e0b\u5404\u79cd\u7ec6\u8282\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <vector>\n#include <cmath>\n\nconst double PI = acos(-1);\nconst double PI2 = PI * 2;\nconst int MAXN = 1010;\nconst double eps = 1e-6;\nint n;\ndouble xs[MAXN], ys[MAXN], rs[MAXN];\ntypedef std::pair<double, double> PDD;\nPDD cover[MAXN]; int bak;\ninline double pows(double x) { return x * x; }\ninline double absx(double x) { return x < 0 ? -x : x; }\ninline double reduce(double x) { x += PI2, x = x - (int) (x / PI2) * PI2; return x; }\nint main() {\n\tscanf(\"%d\", &n);\n\tdouble ans = 0;\n\tfor (int i = 1; i <= n; ++i)\n\t\tscanf(\"%lf%lf%lf\", rs + i, xs + i, ys + i);\n\tfor (int i = 1; i <= n; ++i) {\n\t\tbak = 0;\n\t\tfor (int j = i + 1; j <= n; ++j) {\n\t\t\tdouble D = sqrt(pows(xs[i] - xs[j]) + pows(ys[i] - ys[j]));\n\t\t\tif (D >= absx(rs[i] + rs[j]) - eps) continue;\n\t\t\tif (D <= absx(rs[i] - rs[j]) + eps) {\n\t\t\t\tif (rs[j] > rs[i])\n\t\t\t\t\tcover[++bak] = PDD(0, PI2);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tdouble y = (D - (pows(rs[j]) - pows(rs[i])) / D) / 2;\n\t\t\tdouble angle = acos(y / rs[i]);\n\t\t\tdouble oa = reduce(atan2(xs[i] - xs[j], ys[i] - ys[j]) + PI / 2);\n\t\t\tdouble L = reduce(oa - angle), R = reduce(oa + angle);\n\t\t\tif (L - eps > R) cover[++bak] = PDD(L, PI2), cover[++bak] = PDD(0, R);\n\t\t\telse cover[++bak] = PDD(L, R);\n\t\t}\n\t\tstd::sort(cover + 1, cover + 1 + bak);\n\t\tans += PI2 * rs[i];\n\t\tdouble lstl = 0, lstr = 0;\n\t\tfor (int j = 1; j <= bak; ++j) {\n\t\t\tconst double fx = cover[j].first, sx = cover[j].second;\n\t\t\tif (fx > lstr) {\n\t\t\t\tans -= (lstr - lstl) * rs[i];\n\t\t\t\tlstl = fx;\n\t\t\t}\n\t\t\tlstr = std::max(lstr, sx);\n\t\t}\n\t\tans -= (lstr - lstl) * rs[i];\n\t}\n\tprintf(\"%.3lf\\n\", ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1550973544,
        "uid": 22066,
        "name": "daklqw",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P2510 \u3010[HAOI2008]\u4e0b\u843d\u7684\u5706\u76d8\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u597d\u5751\u554a\uff0c\u5199\u4ee3\u7801\u7684\u65f6\u5019\u7edd\u5bf9\u4e0d\u80fd\u5fc3\u6025\uff0c\u8981\u6162\u6162\u60f3\uff0c\u4ed4\u7ec6\u60f3\uff0c\u4e0d\u7136WAWAWA\u3002\n\n\u9996\u5148\u80fd\u591f\u60f3\u5230\u6700\u66b4\u529b\u7684\u65b9\u6cd5\u81ea\u7136\u5c31\u662f\u679a\u4e3e\u6bcf\u4e2a\u5706\u76d8\uff0c\u8ba1\u7b97\u5b83\u88ab\u8986\u76d6\u4e86\u591a\u5c11\uff0c\u7528\u603b\u5468\u957f\u51cf\u4e00\u4e0b\u5c31\u662f\u7b54\u6848\u4e86\u3002\u5177\u4f53\u600e\u4e48\u529e\u5462\uff1f\n\n\u6211\u4eec\u4ecex\u8f74\u6b63\u534a\u8f74\u5f00\u59cb\uff0c\u987a\u65f6\u9488\u65cb\u8f6c360\u5ea6\uff0c\u523b\u5ea6\u4ece-\u03c0\u8f6c\u5230\u03c0\uff0c\u5747\u5300\u5206\u5e03\u3002\u8fd9\u6837\uff0c\u4e00\u4e2a\u5706\u5982\u679c\u8986\u76d6\u4e86\u53e6\u4e00\u4e2a\u5706\u5c31\u5bf9\u5e94\u4e86\u5728\u6570\u8f74\u4e0a-\u03c0\u5230\u03c0\u8fd9\u6761\u7ebf\u6bb5\u4e0a\u8986\u76d6\u4e86\u4e00\u6761\u7ebf\u6bb5\u3002\u6709\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\u9700\u8981\u5904\u7406\uff1a\u6bd4\u5982\u4ece2\u987a\u65f6\u9488\u8f6c\u5230\u523b\u5ea6-1\uff0c\u663e\u7136\u662f2\u2192\u03c0(-\u03c0)\u2192-1\u8fd9\u6837\u8f6c\u7684\uff0c\u4e3a\u4e86\u4e0d\u548c\u4ece-1\u987a\u65f6\u9488\u8f6c\u52302\u91cd\u590d\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u6837\u7684\u987a\u5e8f\u62c6\u6210\u4e24\u6761\u7ebf\u6bb5\uff0c\u5206\u522b\u662f2\u2192\u03c0\u548c-\u03c0\u21921.\n\n\u4e0d\u5931\u4e00\u822c\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5de6\u8fb9\u7684\u5706\u9006\u65f6\u9488\u65cb\u8f6c\uff0c\u4f7f\u5706\u5fc3\u4f4d\u4e8ex\u8f74\u4e0a\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u4e86\uff0c\u8fd9\u6837\u7684\u8bdd\u5728\u539f\u56fe\u4e2d\u4f7f\u7528\u52fe\u80a1\u5b9a\u7406\u6c42\u51fad\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528\u4f59\u5f26\u5b9a\u7406\u6c42\u51fa\u03b1\uff0c\u8fd9\u6837\u8986\u76d6\u7ebf\u6bb5\u7684\u957f\u5ea6\u5b9e\u9645\u4e0a\u662f2\u03b1\uff0c\u4f46\u662f\u8fd8\u9700\u8981\u786e\u5b9a\u7ebf\u6bb5\u7684\u4f4d\u7f6e\u3002\u8fd9\u5176\u5b9e\u4e5f\u4e0d\u96be\uff0c\u5728\u539f\u56fe\u4e0a\u9762\u76f4\u63a5\u4f7f\u7528\u53cd\u4e09\u89d2\u51fd\u6570arctan\u8ba1\u7b97\u5373\u53ef\u3002\n\n\u8fd9\u6837\u5c31\u628a\u5706\u4e0a\u8986\u76d6\u7684\u95ee\u9898\u6210\u529f\u8f6c\u5316\u6210\u4e86\u7ebf\u6bb5\u8986\u76d6\u95ee\u9898\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u628a\u7ebf\u6bb5\u6309\u7167\u5de6\u7aef\u70b9\u6392\u5e8f\uff0c\u4ece\u5de6\u5230\u53f3\u626b\u4e00\u904d\uff0c\u80fd\u5408\u5e76\u7684\u5c31\u5408\u5e76\u5373\u53ef\u3002\u590d\u6742\u5ea6O(n^2logn)\u3002\n\n\u5199\u7a0b\u5e8f\u7684\u8fc7\u7a0b\u4e2d\u6709\u5f88\u591a\u7ec6\u8282\u8981\u6ce8\u610f\u554a\uff0c\u6bd4\u5982\u5706\u5957\u5706\uff0c\u4e24\u4e2a\u5706\u5206\u79bb\u7b49\u7b49\u5f88\u591a\u60c5\u51b5\u8981\u5904\u7406\uff0c\u5c24\u5176\u662f\u8ba1\u7b97\u8986\u76d6\u7684\u8fd9\u4e00\u90e8\u5206\uff0c\u7279\u522b\u9ebb\u70e6\uff0c\u6700\u597d\u7684\u8bdd\u8fd8\u662f\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff08\u6bd4\u5982\u672c\u849f\u84bb\uff0c\u5206\u4e86\u8c61\u9650\u8ba8\u8bba\u4e4b\u540e\u8fd8\u662f\u8c03\u8bd5\u4e86\u4e00\u4e2a\u5c0f\u65f6\u7684bug\uff09\uff0cdouble\u7684eps\u4e5f\u8981\u5904\u7406\u4e00\u4e0b\u3002\n\n\uff08\u56fe\u7247\u4f3c\u4e4e\u4e0a\u4e0d\u6765\u554a\uff09\n\n```cpp\n#include <stdio.h>\n#include <stdlib.h>\n#include <algorithm>\n#include <string.h>\n#include <vector>\n#include <math.h>\n#include <queue>\n#include <set>\n#include <functional>\n#include <time.h>\n#define INF 0x3f3f3f3f\nusing namespace std;\ntypedef long long ll;\n\nconst int maxn = 1005;\nconst double eps = 1E-9, PI = 3.1415926535897932385;\nstruct Circle{double x, y, r;} cir[maxn];\ntypedef pair<double, double> Pdd;\nPdd seg[maxn];\nint main(){\n    int n; scanf(\"%d\", &n);\n    for(int i = 0; i < n; i++) scanf(\"%lf%lf%lf\", &cir[i].r, &cir[i].x, &cir[i].y);\n    double res = 0;\n    for(int i = 0; i < n; i++){\n        res += 2 * PI * cir[i].r;\n        int tot = 0;\n        for(int j = i + 1; j < n; j++){\n            Circle c1 = cir[i], c2 = cir[j];\n            c2.x -= c1.x, c2.y -= c1.y;\n            c1.x = c1.y = 0;\n            double d = sqrt(c2.x * c2.x + c2.y * c2.y);\n            if(d + eps > c1.r + c2.r || d - eps < c1.r - c2.r) continue;\n            if(d - eps < c2.r - c1.r){seg[tot++] = Pdd(-PI, PI); continue;}\n            if(c2.x + eps > 0){\n                double rot_ang = fabs(c2.x) < eps ? (c2.y > 0 ? PI / 2 : -PI / 2) : atan(c2.y / c2.x);\n                double ang = acos((c1.r * c1.r + d * d - c2.r * c2.r) / (2 * c1.r * d));\n                double r1 = rot_ang + ang, r2 = rot_ang - ang;\n                if(c2.y > 0){\n                    r1 = r1 > 0 ? PI - r1 : -PI - r1;\n                    r2 = r2 > 0 ? PI - r2 : -PI - r2;\n                    if(r2 + eps > 0) seg[tot++] = Pdd(r1, r2);\n                    else seg[tot++] = Pdd(-PI, r2), seg[tot++] = Pdd(r1, PI);\n                } else {\n                    r1 = r1 > 0 ? PI - r1 : -PI - r1;\n                    r2 = r2 > 0 ? PI - r2 : -PI - r2;\n                    if(r1 - eps < 0) seg[tot++] = Pdd(r1, r2);\n                    else seg[tot++] = Pdd(-PI, r2), seg[tot++] = Pdd(r1, PI);\n                }\n            } else {\n                double rot_ang = atan(c2.y / c2.x);\n                double ang = acos((c1.r * c1.r + d * d - c2.r * c2.r) / (2 * c1.r * d));\n                double r1 = -ang - rot_ang, r2 = ang - rot_ang;\n                if(c2.y > 0){\n                    if(r2 - eps < PI) seg[tot++] = Pdd(r1, r2);\n                    else seg[tot++] = Pdd(r1, PI), seg[tot++] = Pdd(-PI, r2 - 2 * PI);\n                } else {\n                    if(r1 + eps > -PI) seg[tot++] = Pdd(r1, r2);\n                    else seg[tot++] = Pdd(-PI, r2), seg[tot++] = Pdd(r1 + 2 * PI, PI);\n                }\n            }\n        }\n        sort(seg, seg + tot);\n        double beg = seg[0].first, end = seg[0].second;\n        for(int j = 1; j < tot; j++){\n            if(seg[j].first - eps < end){\n                if(seg[j].second > end) end = seg[j].second;\n            } else {\n                res -= (end - beg) * cir[i].r;\n                beg = seg[j].first, end = seg[j].second;\n            }\n        }\n        if(tot > 0) res -= (end - beg) * cir[i].r;\n    }\n    printf(\"%.3lf\", res);\n    return 0;\n}\n\n```",
        "postTime": 1501651887,
        "uid": 30575,
        "name": "waaadreamer",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P2510 \u3010[HAOI2008]\u4e0b\u843d\u7684\u5706\u76d8\u3011"
    }
]
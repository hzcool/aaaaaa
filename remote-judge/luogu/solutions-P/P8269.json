[
    {
        "content": "## \u9898\u610f\n\u4e00\u5171\u6709 $n$ \u5934\u5976\u725b\uff0c\u6bcf\u4e00\u5934\u5976\u725b\u90fd\u6709\u81ea\u5df1\u60f3\u62dc\u8bbf\u7684\u5976\u725b\uff0c\u7528 $a_i$ \u8868\u793a\u725b $i$ \u60f3\u62dc\u8bbf\u7684\u725b\u3002\u5bf9\u4e8e\u6bcf\u4e00\u5934\u725b $i$\uff0c\u5982\u679c\u5b83\u60f3\u62dc\u8bbf\u7684\u725b\u5728\u5bb6\uff0c\u5c31\u4f1a\u79bb\u5f00\u5bb6\u5e76\u62dc\u8bbf\u5b83\uff0c\u8fd8\u4f1a\u589e\u52a0 $v_i$ \u7684\u6b22\u4e50\u503c\uff0c\u6700\u540e\u6c42\u6b22\u4e50\u503c\u7684\u6700\u5927\u503c\u3002\n## \u601d\u8def\n\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u95ee\u9898\u770b\u4f5c\u4e00\u4e2a\u4e00\u4e2a\u56fe\uff0c\u4e14\u6bcf\u4e00\u4e2a\u8282\u70b9\u7684\u51fa\u5ea6\u90fd\u662f $1$\u3002 \u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u9664\u4e86\u6bcf\u4e2a\u73af\u4e2d\u4f1a\u6709\u4e00\u4e2a\u5976\u725b\u65e0\u6cd5\u83b7\u5f97\u9ad8\u5174\u503c\uff0c\u5176\u4ed6\u7684\u5976\u725b\u90fd\u53ef\u4ee5\u83b7\u5f97\u9ad8\u5174\u503c\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u7528\u62d3\u6251\u6392\u5e8f\u6765\u627e\u5230\u6240\u6709\u4e0d\u5728\u73af\u4e0a\u7684\u5976\u725b\uff0c\u5c06\u7b54\u6848\u52a0\u4e0a\u4ed6\u4eec\u7684\u9ad8\u5174\u503c\u3002\u63a5\u4e0b\u7528 dfs \u627e\u51fa\u6bcf\u4e2a\u73af\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u73af\u4e2d\u7684\u65e0\u6cd5\u83b7\u5f97\u9ad8\u5174\u503c\u7684\u5976\u725b\uff0c\u6211\u4eec\u80af\u5b9a\u9009\u9ad8\u5174\u503c\u6700\u5c0f\u7684\u3002\u627e\u5230\u6bcf\u4e2a\u73af\u7684\u5976\u725b\u7684\u975e\u5c0f\u503c\u5e76\u52a0\u4e0a\u5b83\u4eec\u3002\n\n\u6700\u540e\u5728\u8d34\u4e0a\u4ee3\u7801:\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define inf 1e18+10\n#define int long long\nconst int maxn=100010;\nint n,a[maxn],v[maxn],rd[maxn],ans,minn=inf;\nbool vis[maxn];\nqueue<int>q;\nvoid topo(){\n    for(int i=1;i<=n;i++){\n        if(!rd[i])q.push(i);\n    }\n    while(!q.empty()){\n        int x=q.front();q.pop();\n        ans+=v[x];rd[a[x]]--;\n        vis[x]=1;\n        if(!rd[a[x]])q.push(a[x]);\n    }\n    return;\n}\nvoid dfs(int x){\n    vis[x]=1;\n    minn=min(minn,v[x]);\n    if(vis[a[x]])return;\n    dfs(a[x]);\n    return;\n}\nsigned main(){\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++){\n        scanf(\"%lld%lld\",&a[i],&v[i]);\n        rd[a[i]]++;\n    }\n    topo();\n    for(int i=1;i<=n;i++){\n        if(!vis[i])ans+=v[i];\n    }\n    for(int i=1;i<=n;i++){\n        if(vis[i])continue;\n        minn=inf;dfs(i);\n        ans-=minn;\n    }\n    printf(\"%lld\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1658567425,
        "uid": 507534,
        "name": "YBaggio",
        "ccfLevel": 4,
        "title": "P8269 [USACO22OPEN] Visits S \u9898\u89e3"
    },
    {
        "content": "## Preface\n\n**\u57fa\u73af\u6811**\u597d\u9898\u3002\n\n## Analysis\n\n\u5bf9\u4e8e\u6240\u6709 $i$\uff0c\u5728\u56fe\u4e0a\u8fde\u4e00\u6761 $i\\to a_i$ \u7684\u6709\u5411\u8fb9\u3002\u7531\u4e8e\u6bcf\u5934\u5976\u725b\u53ea\u6709\u4e00\u6761\u51fa\u8fb9\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u6709\u5411\u7684**\u57fa\u73af\u68ee\u6797**\u3002\n\n\u5bf9\u4e8e\u4e00\u68f5\u57fa\u73af\u6811\uff0c\u6bcf\u4e2a\u4e0d\u5728\u73af\u4e0a\u7684\u70b9\u5fc5\u7136\u53ef\u4ee5\u505a\u51fa\u8d21\u732e\uff0c\u53ea\u8981\u5c06\u5979\u4eec\u6309\u7167\u5728\u6240\u5c5e\u5b50\u6811\u4e2d\u7684 $dep$ \u503c**\u4ece\u5927\u5230\u5c0f**\u52a0\u5165\u6392\u5217\u5373\u53ef\uff08\u8fd9\u6837\u5fc5\u7136\u80fd\u8ba9\u6bcf\u5934\u5976\u725b\u90fd\u8d70\u5230\u5979\u4eec\u559c\u6b22\u7684\u5976\u725b\u7684\u519c\u573a\u4e2d\uff0c\u5373 **\u5148\u8ba9\u5979\u6765\uff0c\u6211\u518d\u8d70**\uff09\u3002\n\n\u5728\u73af\u4e0a\u7684\u70b9\u5fc5\u7136\u6709\u4e00\u4e2a\u65e0\u6cd5\u8d70\u5230\u81ea\u5df1\u559c\u6b22\u7684\u5976\u725b\u7684\u519c\u573a\u4e2d\uff0c\u5e76\u4e14\u4e00\u5b9a\u80fd\u505a\u5230**\u53ea\u8ba9\u4e00\u5934\u725b**\u8fd9\u6837\u3002\u56e0\u6b64\u53ea\u8981\u5728\u73af\u4e0a\u627e\u4e00\u4e2a**\u8d21\u732e\u6700\u5c0f**\u7684\u5976\u725b\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n## Code\n\n**Talk is cheap, show me the code.**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define For(i,j,k) for(int i=(j);i<=(k);i++)\n#define Rof(i,j,k) for(int i=(j);i>=(k);i--)\n#define N 100010\nint n,a[N],val[N],vis[N],vis2[N];\nvector<int> e[N];\nvoid dfs(int u){\n\tvis[u]=1;\n\tfor(int v:e[u]) if(!vis[v]) dfs(v);\n}\nsigned main(){\n\tcin>>n;\n\tFor(i,1,n){\n\t\tcin>>a[i]>>val[i];\n\t\te[a[i]].push_back(i);\n\t}\n\tint ans=0;\n\tFor(i,1,n) ans+=val[i];\n\tFor(i,1,n) if(!vis[i]){\n\t\tint u=i,mn=1e10;\n\t\twhile(!vis2[u]) vis2[u]=1,u=a[u];\n\t\tint v=u;\n\t\tdo mn=min(mn,val[v]),v=a[v]; while(v!=u);\n\t\tans-=mn;\n\t\tdfs(u);\n\t}\n\tcout<<ans<<endl;\n}\n```",
        "postTime": 1648977039,
        "uid": 169574,
        "name": "Enucai",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P8269 \u3010[USACO22OPEN] Visits S\u3011"
    },
    {
        "content": "\u6d1b\u8c37\u4e0a\u4e3a\u4ec0\u4e48\u6ca1\u6709\u9898\u89e3 /yiw\uff0c\u90a3\u6211\u5c31\u6765\u7528\u7eff\u9898\u96be\u5ea6\u7684\u65b9\u6cd5\u505a\u8fd9\u9053\u9ec4\u9898\u5427\u3002\u540c\u6b65\u53d1\u8868\u4e8e [\u535a\u5ba2\u56ed](https://www.cnblogs.com/Mars-LG/p/P8269.html)\u3002\n\n## \u9898\u76ee\u5927\u610f\nBessie \u7684 $N$\uff08$2\\le N\\le 10^5$\uff09\u4e2a\u5976\u725b\u4f19\u4f34\uff08\u7f16\u53f7\u4e3a $1\\cdots N$\uff09\u6bcf\u4e00\u4e2a\u90fd\u62e5\u6709\u81ea\u5df1\u7684\u519c\u573a\u3002\u5bf9\u4e8e\u6bcf\u4e2a $1\\le i\\le N$\uff0c\u4f19\u4f34 $i$ \u60f3\u8981\u8bbf\u95ee\u4f19\u4f34 $a_i$\uff08$a_i\\neq i$\uff09\u3002\n\n\u7ed9\u5b9a $1\\ldots N$ \u7684\u4e00\u4e2a\u6392\u5217 $(p_1,p_2,\\ldots, p_N)$\uff0c\u8bbf\u95ee\u6309\u4ee5\u4e0b\u65b9\u5f0f\u53d1\u751f\u3002\n\n\u5bf9\u4e8e $1$ \u5230 $N$ \u7684\u6bcf\u4e00\u4e2a $i$\uff1a\n\n- \u5982\u679c\u4f19\u4f34 $a_{p_i}$ \u5df2\u7ecf\u79bb\u5f00\u4e86\u5979\u7684\u519c\u573a\uff0c\u5219\u4f19\u4f34 $p_i$ \u4ecd\u7136\u7559\u5728\u5979\u7684\u519c\u573a\u3002\n- \u5426\u5219\uff0c\u4f19\u4f34 $p_i$ \u79bb\u5f00\u5979\u7684\u519c\u573a\u53bb\u8bbf\u95ee\u4f19\u4f34 $a_{p_i}$ \u7684\u519c\u573a\u3002\u8fd9\u6b21\u8bbf\u95ee\u4f1a\u4ea7\u751f\u5feb\u4e50\u7684\u54de\u53eb $v_{p_i}$ \u6b21\uff08$0\\le v_{p_i}\\le 10^9$\uff09\u3002\n\n\u5bf9\u4e8e\u6240\u6709\u53ef\u80fd\u7684\u6392\u5217 $p$\uff0c\u8ba1\u7b97\u6240\u6709\u8bbf\u95ee\u7ed3\u675f\u540e\u53ef\u80fd\u5f97\u5230\u7684\u6700\u5927\u54de\u53eb\u6b21\u6570\u3002\n\n## \u5927\u4f53\u601d\u8def\n\u9996\u5148\uff0c\u6211\u4eec\u5c06\u6240\u6709 $(i,a_i)$ \u8fde\u4e0a\u6709\u5411\u8fb9\u3002\u8fd9\u6837\uff0c\u5171\u6709 $n$ \u4e2a\u8282\u70b9 $n$ \u6761\u8fb9\uff0c\u5f62\u6210\u7684\u662f\u4e00\u4e2a\u5185\u5411\u6811\u7684\u68ee\u6797\u3002\n\n\u6211\u4eec\u5355\u72ec\u8003\u8651\u6bcf\u4e00\u68f5\u5185\u5411\u6811\uff0c\u8fd9\u4e2a\u5185\u5411\u6811\u4e0a\u5fc5\u7136\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u7b80\u5355\u73af\uff0c\u5176\u4f59\u6bcf\u4e2a\u8282\u70b9\u7684\u51fa\u5ea6\u4e3a $1$\u3002\n\n\u6211\u4eec\u5bf9\u975e\u6210\u73af\u7684\u8282\u70b9\u6309\u7167\u62d3\u6251\u5e8f\uff0c\u8ba9\u5f53\u524d\u4e00\u4e2a\u5165\u8bfb\u4e3a $0$ \u7684\u8282\u70b9 $u$ \u53d6\u5230 $a_u$\uff0c\u5e76\u83b7\u5f97 $v_u$ \u7684\u6536\u76ca\u3002\u53ef\u4ee5\u8bc1\u660e\uff0c\u901a\u8fc7\u8fd9\u6837\u7684\u65b9\u5f0f\u80fd\u591f\u4f7f\u5f97\u6240\u6709\u975e\u6210\u73af\u8282\u70b9\u7684 $v_u$ \u90fd\u88ab\u6536\u96c6\u5230\u3002\n\n\u5bf9\u4e8e\u6210\u73af\u7684\u8282\u70b9\uff0c\u8fd9\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5927\u5c0f $>1$ \u7684\u5f3a\u8fde\u901a\u5206\u91cf\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 $\\text{Tarjan}$ \u7b97\u6cd5\u6c42\u51fa\u8fd9\u4e2a\u5f3a\u8fde\u901a\u5206\u91cf $\\mathbf{SCC}$\u3002\u5047\u8bbe\u73af\u4e0a\u8282\u70b9 $x$ \u6700\u5148\u53bb\u8bbf\u95ee $a_x$\uff0c\u5219 $a_y=x$ \u7684\u73af\u4e0a\u8282\u70b9 $y$ \u65e0\u6cd5\u8bbf\u95ee\u5230 $x$\uff0c\u4e5f\u5c31\u662f\u8bf4\u6709\u4e14\u4ec5\u6709 $v_y$ \u65e0\u6cd5\u6536\u96c6\u5230\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u6839\u636e\u8d2a\u5fc3\uff0c\u53ea\u9700\u8981\u8ba9 $y$ \u662f\u6240\u6709\u73af\u4e0a\u8282\u70b9\u4e2d\u70b9\u6743\u6700\u5c0f\u7684\u5373\u53ef\u3002\n\n\u6ce8\u610f\u539f\u56fe\u53ef\u80fd\u662f\u4e00\u4e2a\u68ee\u6797\uff0c\u56e0\u6b64\u9700\u8981\u591a\u6b21 $\\text{Tarjan}$\uff0c\u5206\u522b\u51cf\u53bb\u6bcf\u4e2a\u73af\u4e0a\u70b9\u6743\u7684\u6700\u5c0f\u503c\u3002\n\n\u7efc\u4e0a\uff0c\u5047\u8bbe\u6709 $c$ \u4e2a\u73af\uff0c\u7b54\u6848\u4e3a $\\sum v_u-\\sum_{i\\in [1,c]}\\min\\{v_u\\ |\\ u\\in \\mathbf {SCC}_i\\}$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n## \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define rep(ii,aa,bb) for(re int ii = aa; ii <= bb; ii++)\n#define Rep(ii,aa,bb) for(re int ii = aa; ii >= bb; ii--)\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\ntypedef pair<int, int> PII;\nconst int maxn = 1e5 + 5;\nconst ll inf = 1e9 + 7;\nnamespace IO_ReadWrite {\n\t#define re register\n\t#define gg (p1 == p2 && (p2 = (p1 = _buf) + fread(_buf, 1, 1<<21, stdin), p1 == p2) ? EOF :*p1++)\n\tchar _buf[1<<21], *p1 = _buf, *p2 = _buf;\n\ttemplate <typename T>\n\tinline void read(T &x){\n\t\tx = 0; re T f=1; re char c = gg;\n\t\twhile(c > 57 || c < 48){if(c == '-') f = -1;c = gg;}\n\t\twhile(c >= 48 &&c <= 57){x = (x<<1) + (x<<3) + (c^48);c = gg;}\n\t\tx *= f;return;\n\t}\n\tinline void ReadChar(char &c){\n\t\tc = gg;\n\t\twhile(!isalpha(c)) c = gg;\n\t}\n\ttemplate <typename T>\n\tinline void write(T x){\n\t\tif(x < 0) putchar('-'), x = -x;\n\t\tif(x > 9) write(x/10);\n\t\tputchar('0' + x % 10);\n\t}\n\ttemplate <typename T>\n\tinline void writeln(T x){write(x); putchar('\\n');}\n}\nusing namespace IO_ReadWrite;\nll n, val[maxn], mi[maxn], sz[maxn];\nll hd[maxn], ver[maxn], nxt[maxn], tot, timer, dfn[maxn], low[maxn];\ninline void add(ll u, ll v) {\n\tver[++tot] = v; nxt[tot] = hd[u]; hd[u] = tot;\n}\nll scc[maxn], cnt, stk[maxn], top;\ninline void tarjan(ll u) {\n\tdfn[u] = low[u] = ++timer;\n\tstk[++top] = u;\n\tfor(int i = hd[u]; i; i = nxt[i]) {\n\t\tint v = ver[i];\n\t\tif(!dfn[v]) {\n\t\t\ttarjan(v);\n\t\t\tlow[u] = min(low[u], low[v]);\n\t\t}\n\t\telse if(!scc[v]) \n\t\t\tlow[u] = min(low[u], dfn[v]);\n\t}\n\tif(low[u] == dfn[u]) {\n\t\tmi[++cnt] = inf;\n\t\twhile(1) {\n\t\t\tint v = stk[top --];\n\t\t\tscc[v] = cnt;\n\t\t\tsz[cnt] ++; \n\t\t\tmi[cnt] = min(mi[cnt], val[v]);\n\t\t\tif(u == v) break;\n\t\t}\n\t}\n}\nint main () {\n\tll sum = 0;\n\tread(n);\n\trep(i, 1, n) {\n\t\tll u; \n\t\tread(u); read(val[i]);\n\t\tadd(i, u);\n\t\tsum += val[i];\n\t}\n\trep(i, 1, n)\n\t\tif(!dfn[i]) tarjan(i);\n\trep(i, 1, cnt) \n\t\tif(sz[i] > 1) sum -= mi[i];\n\twriteln(sum);\t\n\treturn 0;\n}\n```",
        "postTime": 1649410672,
        "uid": 279197,
        "name": "Mars_Dingdang",
        "ccfLevel": 6,
        "title": "P8269 [USACO22OPEN] Visits S"
    },
    {
        "content": "update\uff1a 2022/4/17 \u66f4\u6b63\u4e86\u535a\u5ba2\u5730\u5740\n\n[\u9898\u76ee\u8fde\u63a5](https://www.luogu.com.cn/problem/P8269)\n\n[\u535a\u5ba2\u4e2d\u89c2\u770b\u4f53\u9a8c\u66f4\u4f73](https://ttzytt.com/2022/04/P8269/)\n# 1\uff1a\u9898\u610f\u7b80\u8ff0\n\u6709 $N$ \u4e2a\u5976\u725b\uff0c\u5976\u725b $i(1 \\le N)$ \u60f3\u8bbf\u95ee\u5976\u725b $a_i (a_i \\ne i)$\u3002\u5982\u679c $a_i$ \u5df2\u7ecf\u79bb\u5f00\u53bb\u8bbf\u95ee\u522b\u7684\u5976\u725b\u4e86\uff0c\u5219 $i$ \u4e0d\u80fd\u6210\u529f\u8bbf\u95ee $a_i$\uff0c\u5426\u5219\uff0c\u8fd9\u6b21\u6210\u529f\u8bbf\u95ee\u53ef\u4ee5\u589e\u52a0 $v_i$ \u6b21\u54de\u53eb\u3002 \u73b0\u5728\u8ba9\u4f60\u627e\u51fa\u53ef\u80fd\u7684\u6700\u5927\u54de\u53eb\u6b21\u6570\u3002\n\n# 2\uff1a\u5206\u6790\n\u7406\u89e3\u9898\u76ee\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u9996\u5148\u5206\u6790\u4e0b\u6837\u4f8b\uff0c\u8bd5\u8bd5\u770b\u627e\u4e00\u4e9b\u6709\u7528\u7684\u4fe1\u606f\u3002\n![](https://cdn.luogu.com.cn/upload/image_hosting/45pac1tr.png)\n\u4e3a\u4e86\u65b9\u4fbf\u5206\u6790\u6837\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6837\u4f8b\u7528\u56fe\u7684\u5f62\u5f0f\u5c55\u793a\uff0c\u56fe\u4e2d\u6709\u5411\u8fb9\u8fde\u63a5\u7684\u4e24\u4e2a\u8282\u70b9\u5c31\u662f\u4e00\u5934\u725b\u548c\u8fd9\u5934\u725b\u5e0c\u671b\u8bbf\u95ee\u7684\u725b \uff08$i$ \u548c $a_i$)\u3002\u800c\u8fb9\u6743\u662f\u8fd9\u6b21\u8bbf\u95ee\u80fd\u4ea7\u751f\u7684\u54de\u53eb\u6b21\u6570\u3002\n\n\u901a\u8fc7\u8fd9\u5f20\u56fe\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0d\u7ba1\u4ee5\u4ec0\u4e48\u6837\u7684\u987a\u5e8f\u8bbf\u95ee\uff0c\u6700\u591a\u90fd\u53ea\u80fd\u6210\u529f\u7684\u8bbf\u95ee\u4e09\u6b21\uff0c\u6700\u540e\u7684\u4e00\u6b21\u8bbf\u95ee\u4e00\u5b9a\u4f1a\u9047\u5230\u4e4b\u524d\u5df2\u7ecf\u9047\u5230\u8fc7\u7684\u725b\uff0c\u6240\u4ee5\u9009\u62e9 $2 \\rarr 3$\uff0c$3 \\rarr 4$ \u548c $4 \\rarr 1$ \u53ef\u4ee5\u8fbe\u5230\u6700\u5927\u7684\u54de\u53eb\u6b21\u6570\uff0c\u4e5f\u5c31\u662f $20 + 30 + 40 = 90$ \u6b21\u3002\n\n\u518d\u4ed4\u7ec6\u601d\u8003\u8fd9\u4e2a\u6837\u4f8b\uff0c\u53ef\u4ee5\u53d1\u73b0\u4e0d\u80fd\u540c\u65f6\u9009\u56db\u6761\u8fb9\u7684\u672c\u8d28\u539f\u56e0\u662f\u8fd9\u6837\u4f1a\u5728\u56fe\u4e2d\u4ea7\u751f\u4e00\u4e2a\u73af\u3002\u5982\u679c\u56fe\u4e2d\u6709\u73af\uff0c\u5e76\u4e14\u5fc5\u987b\u8981\u7ecf\u8fc7\u73af\u4e0a\u7684\u6bcf\u4e00\u6761\u8fb9\uff0c\u90a3\u4e48\u6211\u4eec\u5fc5\u7136\u4f1a\u8bbf\u95ee\u5230\u4e4b\u524d\u8bbf\u95ee\u8fc7\u7684\u8282\u70b9\u3002\n\n\u800c\u5982\u679c\u6211\u4eec\u80fd\u4ece\u539f\u6765\u7684\u56fe\u4e2d\u9009\u51fa\u4e00\u4e9b\u8fb9\uff0c\u5efa\u51fa\u4e00\u4e2a\u6ca1\u6709\u73af\u7684\u56fe\uff0c\u90a3\u4e48\u5c31\u4e00\u5b9a\u80fd\u627e\u51fa\u4e00\u79cd\u8bbf\u95ee\u987a\u5e8f\uff0c\u4f7f\u5f97\u6211\u4eec\u5728\u904d\u5386\u6240\u6709\u8282\u70b9\u65f6\u4e0d\u4f1a\u91cd\u590d\u8bbf\u95ee\u8282\u70b9\u3002\u5728\u4e0d\u6784\u6210\u73af\u7684\u524d\u63d0\u4e0b\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5c3d\u91cf\u9009\u62e9\u8fb9\u6743\u5927\u7684\u8fb9\uff0c\u8fd9\u6837\u5c31\u80fd\u6ee1\u8db3\u9898\u76ee\u7684\u8981\u6c42\u2014\u2014\u4ea7\u751f\u6700\u591a\u7684\u54de\u53eb\u6b21\u6570\u3002\n\n\u6ca1\u6709\u73af\u7684\uff0c\u6743\u503c\u6700\u5927\u7684\u56fe\uff1f\u597d\u50cf\u8ddf\u6700\u5c0f\uff08\u5927\uff09\u751f\u6210\u6811\u5f88\u76f8\u4f3c\u3002\n\n\u5206\u6790\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u5c31\u6bd4\u8f83\u5bb9\u6613\u60f3\u5230\u4f7f\u7528\u6700\u5c0f\uff08\u5927\uff09\u751f\u6210\u6811\u7b97\u6cd5\u4e86\u3002\u901a\u8fc7\u8fd9\u7c7b\u7b97\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u56fe\u4e2d\u627e\u51fa\u6743\u503c\u6700\u5927\u7684\u6811\u3002\u4e0d\u8fc7\uff0c\u8fd9\u8fd8\u662f\u8ddf\u8fd9\u9053\u9898\u4e0d\u5b8c\u5168\u4e00\u6837\u3002\u6211\u4eec\u8fd8\u9700\u8981\u89e3\u51b3\u4e0b\u9762\u8fd9\u4e2a\u95ee\u9898\u3002\n\n- \u6700\u5c0f\uff08\u5927\uff09\u751f\u6210\u6811\u7684\u7b97\u6cd5\u53ea\u80fd\u7528\u4e8e\u65e0\u5411\u56fe\u4e2d\uff0c\u800c\u6211\u4eec\u5f53\u524d\u7684\u56fe\u662f\u6709\u5411\u56fe\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u628a\u6700\u5c0f\uff08\u5927\uff09\u751f\u6210\u6811\u7b97\u6cd5\u7528\u5728\u8fd9\u9053\u9898\u91cc\u5417\n\n\uff08\u8fd9\u90e8\u5206\u5982\u679c\u7406\u89e3\u4e86\u53ef\u4ee5\u76f4\u63a5\u770b\u4ee3\u7801)\uff0c\u4ee3\u7801\u5c31\u662f\u4e2a\u6807\u51c6\u7684 kruskal\n\n\u6362\u4e00\u79cd\u8bf4\u6cd5\u89e3\u91ca\u8fd9\u4e2a\u95ee\u9898\u5c31\u662f\uff1a\u4ece\u6709\u5411\u56fe\u8f6c\u6362\u6765\u7684\u65e0\u5411\u56fe\u662f\u5426\u548c\u539f\u56fe\u7b49\u4ef7\uff1f\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tcj0rl6u.png)\n\n\u6bd4\u5982\u4e0a\u56fe\u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u4e0d\u7ba1\u4f7f\u7528\u4ec0\u4e48\u8bbf\u95ee\u987a\u5e8f\uff0c\u4e09\u6761\u8fb9\u6211\u4eec\u90fd\u662f\u53ef\u4ee5\u9009\u7684\u3002\u4f46\u662f\u8f6c\u6362\u6210\u4e86\u65e0\u5411\u56fe\u4e4b\u540e\uff0c\u5c31\u53ea\u80fd\u9009\u62e9\u4e24\u6761\u8fb9\u4e86\uff08\u9009\u4e09\u6761\u8fb9\u4f1a\u4ea7\u751f\u73af\uff09\u3002\n\n\u5728\u9898\u76ee\u4e2d\uff0c\u6bcf\u4e00\u5976\u725b\u53ea\u6709\u4e00\u4e2a\u60f3\u8bbf\u95ee\u7684\u5976\u725b\uff0c\u4e5f\u5c31\u662f\u8bf4\u56fe\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u51fa\u5ea6\u90fd\u662f $1$\uff0c\u5728\u8fd9\u6837\u7684\u6761\u4ef6\u4e0b\uff0c\u4e0a\u56fe\u4e2d\u7684\u60c5\u51b5\u5c31\u662f\u4e0d\u53ef\u80fd\u51fa\u73b0\u7684\uff08\u4e0a\u56fe\u4e2d\u8282\u70b9 $1$ \u7684\u51fa\u5ea6\u4e3a $2$\uff09\uff0c\u5e76\u4e14\u8f6c\u6362\u51fa\u6765\u7684\u65e0\u5411\u56fe\u548c\u539f\u56fe\u4e5f\u662f\u7b49\u4ef7\u7684\u3002\n\n\u90a3\u4e3a\u4ec0\u4e48\u53ea\u6709\u5165\u5ea6\u5927\u4e8e $1$ \u65f6\u624d\u4f1a\u5bfc\u81f4\u8f6c\u6362\u4e4b\u540e\u7684\u65e0\u5411\u56fe\u4e0d\u7b49\u4ef7\u4e8e\u539f\u6765\u7684\u6709\u5411\u56fe\u5462\uff1f\n\n\u6211\u4eec\u77e5\u9053\u5982\u679c\u6709 $n$ \u4e2a\u8282\u70b9\uff0c\u8981\u628a\u8fd9 $n$ \u4e2a\u8282\u70b9\u5305\u542b\u5728\u73af\u4e2d\u7684\u6700\u5c11\u8fb9\u6570\u662f $n$ \u4e2a\u3002\u5e76\u4e14\u8fd9 $n$ \u4e2a\u8282\u70b9\u91cc\u9762\u7684\u6bcf\u4e2a\u8282\u70b9\u7684\u51fa\u5ea6\u548c\u5165\u5ea6\u90fd\u7b49\u4e8e $1$ \u3002\u5c31\u548c\u6837\u4f8b\u4e2d\u7684\u4e00\u6837\u3002\n\n\u4e00\u4e2a\u8fb9\u53ef\u4ee5\u4ea7\u751f\u4e00\u4e2a\u51fa\u5ea6\u548c\u4e00\u4e2a\u5165\u5ea6\u3002\u6240\u4ee5\u8fd9\u4e2a\u73af\u91cc\u603b\u5171\u6709 $2n$ \u4e2a\u5ea6\u3002\u5982\u679c\u6211\u4eec\u5141\u8bb8\u4e00\u4e9b\u8282\u70b9\u7684\u51fa\u5ea6\u5927\u4e8e $1$\uff0c\u90a3\u4e48\u6709\u4e00\u4e9b\u8282\u70b9\u7684\u5165\u5ea6\u53ef\u80fd\u662f $0$ \u4e86\uff08\u5ea6\u7684\u548c\u4e00\u5b9a\u4e3a $20$\uff0c\u90a3\u51fa\u5ea6\u589e\u52a0\u4e86\u5165\u5ea6\u5c31\u4e00\u5b9a\u4f1a\u51cf\u5c11\uff09\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5165\u5ea6\u4e3a $0$ \u65f6\u6ca1\u6709\u522b\u7684\u8282\u70b9\u80fd\u5230\u8fbe\u8fd9\u4e2a\u8282\u70b9\uff0c\u81ea\u7136\u5c31\u4e0d\u80fd\u4ea7\u751f\u73af\u3002\n\n\u4f46\u662f\u5982\u679c\u628a\u76f4\u63a5\u8f6c\u6362\u6210\u65e0\u5411\u56fe\uff0c\u51fa\u5ea6\u548c\u5165\u5ea6\u7684\u603b\u548c\u8fd8\u662f $2n$\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u5ea6\u4e5f\u662f $2$\uff0c\u6240\u4ee5\u80fd\u6784\u6210\u73af\u3002\n\n\u8fd9\u6837\u4e00\u6765\uff0c\u5728\u8f6c\u6362\u65f6\u5c31\u4f1a\u4ea7\u751f\u95ee\u9898\u4e86\u3002\n\n# 3\uff1a\u4ee3\u7801\n\u8fd9\u91cc\u6211\u624d\u7528\u7684\u662f Kruskal \u6765\u6c42\u7684\u6700\u5927\u751f\u6210\u6811\uff0c\u76f8\u8f83\u4e8e\u8fd9\u9898\u7684\u601d\u7ef4\uff0c\u4ee3\u7801\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u53ea\u8981\u628a\u6700\u5c0f\u751f\u6210\u6811\u4e2d\u7684\u6392\u5e8f\u6539\u4e00\u4e0b\u3002\n\n\u5982\u679c\u4e0d\u719f\u6089\u6700\u5c0f\u751f\u6210\u6811\u7684\u7b97\u6cd5\uff0c\u53ef\u4ee5\u53c2\u8003[\u6a21\u677f\u9898](https://www.luogu.com.cn/problem/P3366)\u91cc\u7684\u9898\u89e3\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u6743\u503c\u548c\u53ef\u80fd\u4f1a\u8d85\u8fc7 `int` \u7684\u8303\u56f4\uff0c\u9700\u8981\u5f00 `long long`\u3002\n```cpp\n/*Date: 22 - 03-26 15 28\nPROBLEM_NUM: USACO MAR Problem 1. Visits*/\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN = 2e5 + 10;\n#define ll long long\nstruct E\n{\n    int from, to, val;\n} e[MAXN];\nint n;\nint fa[MAXN];\nint find_fa(int cur)\n{\n    if (cur == fa[cur])\n        return cur;\n    return fa[cur] = find_fa(fa[cur]);\n}\nvoid merge(int a, int b)\n{\n    int af = find_fa(a), bf = find_fa(b);\n    fa[af] = bf;\n}\n//\u5e76\u67e5\u96c6\u64cd\u4f5c\n\nll ans;\n\nint main()\n{\n    scanf(\"%d\", &n);\n    iota(fa + 1, fa + 1 + n, 1);//\u6700\u5f00\u59cb fa[i] = i\n    for (int i = 1; i <= n; i++)\n    {\n        scanf(\"%d%d\", &e[i].to, &e[i].val);\n        e[i].from = i;\n    }\n    sort(e + 1, e + 1 + n, [](E a, E b)\n         { return a.val > b.val; });//\u6743\u503c\u5927\u7684\u653e\u524d\u9762\n    int used_edge = 0;\n    for (int i = 1; i <= n; i++)//kruskal\n    {\n        if (find_fa(e[i].from) != find_fa(e[i].to))\n        {\n            used_edge++;\n            ans += e[i].val;\n            merge(e[i].from, e[i].to);\n            if (used_edge == n - 1)\n            {\n                break;\n            }\n        }\n    }\n    printf(\"%lld\\n\", ans);\n    system(\"pause\");\n}\n```\n\u6700\u540e\u5e0c\u671b\u8fd9\u7bc7\u9898\u89e3\u80fd\u5e2e\u5230\u4f60\u3002\u5982\u679c\u6709\u770b\u4e0d\u61c2\u7684\uff0c\u6216\u8005\u662f\u53d1\u73b0\u9898\u89e3\u6709\u95ee\u9898\uff0c\u6b22\u8fce\u901a\u8fc7\u8bc4\u8bba\u533a\u548c\u79c1\u4fe1\u8054\u7cfb\u6211\u3002",
        "postTime": 1649373857,
        "uid": 394488,
        "name": "tzyt",
        "ccfLevel": 0,
        "title": "P8269 [USACO22OPEN] Visits S \u9898\u89e3"
    },
    {
        "content": "# 0.\u5410\u69fd\n\u8fd9\u6b21\u5927\u6982\u53c8\u8fdb\u4e0d\u4e86 Au \u4e86\uff0c\u8fd9\u6b21\u94f6\u7ec4\u771f\u5c31\u96be\u5f97\u79bb\u8c31\u2026\u2026\n\n\u53c8\u662f\u56fe\u8bba\u53c8\u662f\u6570\u636e\u7ed3\u6784\u7684\uff0c\u51fa\u9898\u7ec4\u8272\u76f2\u4e86\uff1f\n\n# 1.\u5206\u6790\n\n\u6211\u4eec\u8003\u8651\u5c06\u95ee\u9898\u8f6c\u5316\u4e3a\u56fe\u8bba\u7684\u6a21\u578b\u3002\n\n$$\\mathcal{V}=\\{i|1 \\leq i \\leq N\\}$$\n\n$$\\mathcal{E}=\\{i \\in \\mathcal{V}|(i,a_i,v_i) \\}$$\n\n$$\\mathcal{G}=(\\mathcal{V},\\mathcal{E})$$\n\n\u6211\u4eec\u8003\u5bdf $\\mathcal{G}$ \u4e2d\u7684\u4e00\u4e2a\u73af $\\mathcal{R}$ \u3002\n\n\u5047\u8bbe\u6211\u4eec\u4ece\u73af\u7684\u7b2c $i$ \u4e2a\u70b9\u5f00\u59cb\u6a21\u62df\uff0c\u4e14\u73af\u5185\u6709\u70b9 $j$ \u6ee1\u8db3 $a_j=i$ \uff1a\n\n+ $i$ \u62dc\u8bbf $a_i$\uff0c\u83b7\u5f97\u6743\u503c $v_i$ \u3002\n+ $a_i$ \u62dc\u8bbf $a_{a_i}$\uff0c\u83b7\u5f97\u6743\u503c $v_{a_i}$ \u3002\n\n\t$\\dots\\dots$\n+ $j$ \u65e0\u6cd5\u62dc\u8bbf $i$ \uff0c\u5faa\u73af\u7ed3\u675f\u3002\n\n\u6b64\u65f6\uff0c $\\mathcal{R}$ \u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff1a\n\n$$c(\\mathcal{R})=\\sum\\limits_{i \\in \\mathcal{R}}(v_i)-v_j$$\n\n\u4e3a\u4e86\u4f7f\u7b54\u6848\u6700\u4f18\uff0c\u7531\u4e8e\u73af\u4e4b\u95f4\u4e92\u4e0d\u5f71\u54cd\uff0c\u6211\u4eec\u53ef\u4ee5\u8d2a\u5fc3\u5730\u63a8\u5bfc\u51fa\uff1a\n\n$$c_{\\max}(\\mathcal{R})= \\sum\\limits_{i \\in \\mathcal{R}}(v_i)-\\min\\limits_{i \\in \\mathcal{R}}(v_i)$$\n\n\u81ea\u7136\u5730\uff1a\n\n$$Ans=\\sum\\limits_{\\mathcal{R} \\in \\mathcal{G}}(c_{\\max}(\\mathcal{R}))$$\n\n\u6b64\u65f6\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u5f0f\u5b50\u7684\u96be\u70b9\u5728\u6c42\u51fa\u73af\u3002\n\n\u7531\u4e8e $\\mathcal{G}$ \u6240\u6709\u70b9\u7684\u51fa\u5ea6\u5747\u4e3a $1$\uff0c\u6545 $\\mathcal{G}$ \u4e3a\u57fa\u73af\u68ee\u6797\u3002\n\n\u611f\u6027\u7406\u89e3\uff1a\u5bf9\u4e8e\u8fd9\u68f5\u57fa\u73af\u6811\uff0c\u6839\u636e\u7b2c\u4e8c\u4e2a\u5f0f\u5b50\uff0c\u6bcf\u627e\u5230\u4e00\u4e2a\u73af\u5c31\u628a\u4ed6\u53bb\u4e00\u6761\u8fb9\uff0c\u8fd9\u6837\u4f1a\u4f7f\u57fa\u73af\u68ee\u6797**\u76f4\u63a5\u9000\u5316\u6210\u68ee\u6797**\u3002\n\n\u800c\u5bf9\u4e8e\u8fd9\u4e2a\u68ee\u6797\uff0c\u7b54\u6848\u5c31\u662f\u6240\u6709\u8fb9\u6743\u4e4b\u548c\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5f0f\u5b50\u5c31\u662f\u6c42\u6700\u5927\u6743\u503c\u68ee\u6797\u3002\n\n\u6211\u4eec\u5229\u7528 `kruskal` \u7b97\u6cd5\u89e3\u51b3\u5373\u53ef\u3002\n\n~~\u4f18\u7f8e\u65e0\u6bd4~~\n\n# 2.\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nconst int N=2e5+5;\nint n;\nstruct edge{\n\tint u,v,w;\n}e[N];\ninline bool cmp(edge x,edge y)\n{\n\treturn x.w>y.w;\n}\nint fa[N];\nint find(int x)\n{\n\twhile(x!=fa[x])x=fa[x]=fa[fa[x]];\n\treturn x;\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\te[i].u=i;\n\t\tscanf(\"%d%d\",&e[i].v,&e[i].w);\n\t}\n\t/*\u4ee5\u4e0b\u662fKruskal\u677f\u5b50\uff0c\u4f46\u6ce8\u610f\uff0c\u6b64\u65f6\u6c42\u7684\u662f\u68ee\u6797\uff0c\u5e76\u4e0d\u5f3a\u5236\u8981\u6c42 \u8fb9\u6570==n-1 \u800c\u662f \u8fb9\u6570<=n-1 */\n\tstd::sort(e+1,e+1+n,cmp);//\u4e0eMST\u53cd\u8fc7\u6765\u6392\u5e8f \n\tint tot=0;\n\tll ans=0;//\u4e0d\u5f00long long * * * \n\tfor(int i=1;i<=n;i++)fa[i]=i;//\u5e76\u67e5\u96c6\u521d\u59cb\u5316 \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint x=find(e[i].u),y=find(e[i].v);\n\t\tif(x==y)continue;\n\t\tfa[x]=y;\n\t\ttot++;\n\t\tans+=e[i].w;\n\t\tif(tot==n-1)\n\t\t{\n\t\t\tprintf(\"%lld\",ans);\n\t\t\treturn 0;\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n\n```\n\n\n# 3.\u540e\u8bb0\n\n\u8fd9\u9053\u9898\u5230\u8fd9\u91cc\u5c31\u7ed3\u675f\u4e86\uff0c\u94f6\u7ec4\u8003\u8fd9\u4e48\u96be\u662f\u4e0d\u662f\u4e0d\u592a\u5408\u9002\uff1f\n\n\u4e0d\u6127\u4e3a\u5de8\u4f6c Benq \u51fa\u7684\u9898\u554a\uff0c\u628a\u6211\u540a\u6253\u56db\u4e2a\u5c0f\u65f6\u3002\n\n\u8fd9\u4e2a\u7ed3\u8bba\u5f88\u6076\u5fc3\u554a\uff0c\u6211\u662f\u600e\u4e48\u60f3\u51fa\u6765\u7684\uff1f\n\n**\u6837\u4f8b\u3002**",
        "postTime": 1648549939,
        "uid": 551375,
        "name": "junxis",
        "ccfLevel": 5,
        "title": "SOL\uff1aUSACO 22 Open Silver Prob 1"
    },
    {
        "content": "[\u535a\u5ba2\u98df\u7528\u66f4\u4f73](https://www.cnblogs.com/hhhsky001/articles/16391548.html)\n\n## \u9898\u9762\u63cf\u8ff0\n\n\u5bf9\u4e8e\u7b2c $i$ \u6570\uff0c\u5982\u679c $p_i$ \u5728\u4ed6\u4e4b\u524d\uff0c\u90a3\u5c31\u4ea7\u751f $v_i$ \u7684\u8d21\u732e\u3002\u6c42\u8fd9\u4e2a\u8d21\u732e\u503c\u6700\u5927\u3002\n\n## Solution\n\n\u6211\u4eec\u53ef\u4ee5\u5c06\u6b64\u95ee\u9898\u8f6c\u5316\u4e3a\u7528\u6240\u6709\u7684\u8d21\u732e\u503c-\u6240\u6709\u6392\u5217\u4e2d\u6700\u5c0f\u7684\u8d21\u732e\u503c\u3002\n\n\u90a3\u4e48\u4e00\u4e2a\u663e\u7136\u7684\u601d\u8def\uff0c\u8003\u8651\u5728 $v$ \u5728 $u$ \u524d\u4f1a\u4ea7\u751f\u8d21\u732e\u65f6\u8fde\u4e00\u6761 $u \\to v$  \u7684\u6709\u5411\u8fb9\u3002\n\n* \u5f53\u4e14\u4ec5\u5f53\u5f62\u6210\u73af\u65f6\uff0c\u4e00\u5b9a\u4f1a\u4ea7\u751f\u8d21\u732e\uff0c\u9898\u4e0a\u8bf4\u53d6\u6700\u5c0f\uff0c\u6545\u6211\u4eec\u5728\u8fd9\u4e2a\u73af\u4e0a\u627e\u5230\u6700\u5c0f\u7684\u4e0d\u6ee1\u503c\uff0c\u7d2f\u52a0\u5165\u7b54\u6848\u3002\n\n* \u5f53\u672a\u5f62\u6210\u73af\u65f6\uff0c\u603b\u6709\u4e00\u79cd\u65b9\u5f0f\u4e0d\u4f1a\u4ea7\u751f\u8d21\u732e\u3002\n\n\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u6570\u51fa\u5ea6\u5165\u5ea6\u53ea\u6709 $1$ \uff0c\u6240\u4ee5\u4e00\u4e2a\u6570\u53ea\u53ef\u80fd\u5728\u4e00\u4e2a\u73af\u4e0a\u3002\u6240\u4ee5\u6211\u4eec\u5728\u6df1\u641c\u65f6\uff0c\u6bcf\u4e2a\u70b9\u53ea\u9700\u8981\u641c\u4e00\u6b21\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$ \u3002\n\n~~\u57282022-06-19 21:36:16\u65f6\u5230\u8fbe\u6700\u4f18\u89e3~~\n\n## Code\n\n```cpp\n//#pragma GCC optimize(\"Ofast\")\n//#pragma GCC optimize(\"inline\")\n#include<bits/stdc++.h>\n#define re register\n//#define int long long\n#define fep(i,l,r) for(re int i=l;i<=r;++i)\n#define For(i,u) for(re int i=head[u];i;i=e[i].nxt)\n#define feb(i,r,l) for(re int i=r;i>=l;--i)\n#define LL long long\nusing namespace std;\n \nconst int N = 1e5+5,mod = 1e9+7;\nint n,to[N],c[N],s[N],top,pos[N]; bool vis[N],belong[N]; LL ans;\n \n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=5e5+5; \n\nnamespace quick {\n#define tp template<typename Type>\n\tnamespace in {\n\t\tinline char getc() {\n\t\t\tstatic char buf[1<<21],*p1=buf,*p2=buf;\n\t\t\treturn p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++;\n\t\t}\n\t\tinline int read(char *s) {\n\t\t\t*s=getc();\n\t\t\twhile(isspace(*s)) {*s=getc();if(*s==EOF) return 0;}\n\t\t\twhile(!isspace(*s)&&*s!=EOF) {s++;*s=getc();}\n\t\t\t*s='\\0'; return 1;\n\t\t}\n\t\ttp inline int read(Type &x) {\n\t\t\tx=0;bool k=false;char c=getc();\n\t\t\twhile(!isdigit(c)) {k|=(c=='-');c=getc();if(c==EOF) return 0;}\n\t\t\twhile(isdigit(c)) {x=(x<<1)+(x<<3)+(c^48);c=getc();}\n\t\t\tx*=(k?-1:1); return 1;\n\t\t}\n\t\ttemplate <typename Type,typename... Args>\n\t\tinline int read(Type &&t,Args &&...args) {\n\t\t\treturn read(t)+read(args...);\n\t\t}\n\t}\n\tusing in::read;\n\tnamespace out {\n\t\tchar buf[1<<21];int p1=-1;const int p2=(1<<21)-1;\n\t\tinline void flush() {\n\t\t\tfwrite(buf,1,p1+1,stdout);\n\t\t\tp1=-1;\n\t\t}\n\t\tinline void putc(const char &c) {\n\t\t\tif(p1==p2) flush();\n\t\t\tbuf[++p1]=c;\n\t\t}\n\t\tinline void write(char *s) {\n\t\t\twhile(*s!='\\0') putc(*s),s++;\n\t\t}\n\t\tinline void write(const char *s) {\n\t\t\twhile(*s!='\\0') putc(*s),s++;\n\t\t}\n\t\ttp inline void write(Type x) {\n\t\t\tstatic char buf[30];int p=-1;\n\t\t\tif(x<0) {putc('-');x=-x;}\n\t\t\tif(x==0) putc('0');\n\t\t\telse for(;x;x/=10) buf[++p]=x%10+48;\n\t\t\tfor(;p!=-1;p--) putc(buf[p]);\n\t\t}\n\t\tinline void write(const char &c) {putc(c);}\n\t\ttemplate <typename Type,typename... Args>\n\t\tinline void write(const Type &t,const Args &...args) {\n\t\t\twrite(t);write(args...);\n\t\t}\n\t}\n\tusing out::write;\n\tusing out::flush;\n#undef tp\n}\nusing namespace quick;\n\ninline void dfs(int u)\n{\n\tif(vis[u])\n\t{\n\t\tint minn=1e9;\n\t\tfep(i,pos[u],top) minn=min(minn,c[s[i]]),belong[s[i]]=true;;\n\t\tans+=minn; return ;\n\t}\n\tif(belong[u])\n\t{\n\t\tfep(i,1,top) belong[s[i]]=true; return ;//\u4e00\u5b9a\u8981\u6709\u8fd9\u53e5\uff0c\u5426\u5219\u4fdd\u8bc1\u4e0d\u4e86\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u7ebf\u6027\n\t}\n\tvis[u]=true; s[++top]=u; pos[u]=top;\n\tdfs(to[u]);\n\tvis[u]=false; --top;\n}\n \nsigned main()\n{\n\tread(n); LL sum=0;\n\tfep(i,1,n) read(to[i],c[i]),sum+=c[i];\n\tfep(i,1,n) if(!belong[i]) dfs(i);\n\twrite(sum-ans);\n\treturn flush(),0;\n}\n```\n",
        "postTime": 1655646470,
        "uid": 341110,
        "name": "starry_lasky",
        "ccfLevel": 0,
        "title": "P8269\u9898\u89e3"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://xixike.github.io/USACO2022.3%20Silver/)\n\n## Description\n\n[Luogu\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P8269)\n\n## Solution\n\n\u624b\u73a9\u4e00\u904d\u6837\u4f8b\uff0c\u627e\u627e\u6700\u4f18\u51b3\u7b56\uff0c\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u73af\u4e2d\u6700\u4f18\u60c5\u51b5\u778e\u53ea\u6709\u4e00\u4e2a\u70b9\u4e0d\u80fd\u9009\u3002\n\n\u5e76\u4e14\u9898\u76ee\u7ed9\u51fa\u7684\u5173\u7cfb\u662f\u4e00\u4e2a\u57fa\u73af\u6811\u68ee\u6797\u3002\n\n\u6240\u4ee5\u5148\u6c42\u4e00\u4e0b\u603b\u548c\uff0c \u7136\u540e $\\text{Tarjan}$ \u627e\u6bcf\u4e00\u4e2a\u73af\u4e0a\u7684\u6700\u5c0f\u503c\uff0c\u7528\u603b\u548c\u51cf\u53bb\u5373\u53ef\u3002\n\n\u53e6\u5916\u8981\u5224\u4e00\u4e0b\u73af\u7684\u5927\u5c0f\u5927\u4e8e\u7b49\u4e8e 2 \u65f6\u624d\u80fd\u51cf\uff08\u4e00\u4e2a\u70b9\u65f6\u663e\u7136\u662f\u53ef\u4ee5\u52a0\u4e0a\u7684\uff09\u3002\n\n## Code\n```cpp\n#include <bits/stdc++.h>\n#define pb push_back\n#define ll long long\n\nusing namespace std;\n\nnamespace IO{\n    inline int read(){\n        int x = 0;\n        char ch = getchar();\n        while(!isdigit(ch)) ch = getchar();\n        while(isdigit(ch)) x = (x << 3) + (x << 1) + ch - '0', ch = getchar();\n        return x;\n    }\n\n    template <typename T> inline void write(T x){\n        if(x > 9) write(x / 10);\n        putchar(x % 10 + '0');\n    }\n}\nusing namespace IO;\n\nconst int N = 1e6 + 10;\nint n, m;\nll sum;\nint a[N], v[N];\nvector <int> g[N];\nint dfn[N], low[N], tim;\nint stk[N], top;\nbool vis[N];\n\ninline int tarjan(int x){\n    dfn[x] = low[x] = ++tim;\n    stk[++top] = x, vis[x] = 1;\n    for(auto y : g[x]){\n        if(!dfn[y]) tarjan(y), low[x] = min(low[x], low[y]);\n        else if(vis[y]) low[x] = min(low[x], dfn[y]);\n    }\n    int siz = 0, mins = 1e9;\n    if(low[x] == dfn[x]){\n        int k;\n        do{\n            k = stk[top--];\n            vis[k] = 0, siz++, mins = min(mins, v[k]);\n        }while(x != k);\n    }\n    return mins * (siz > 1 ? 1 : 0);\n}\n\nsigned main(){\n    n = read();\n    for(int i = 1; i <= n; ++i){\n        a[i] = read(), v[i] = read(), sum += v[i];\n        g[a[i]].pb(i);\n    }\n    for(int i = 1; i <= n; ++i)\n        if(!dfn[i]) sum -= tarjan(i);\n    write(sum), puts(\"\");\n    return 0;\n}\n```",
        "postTime": 1649085003,
        "uid": 158846,
        "name": "xixike",
        "ccfLevel": 0,
        "title": "P8269 [USACO22OPEN] Visits S \u9898\u89e3"
    },
    {
        "content": "### Problem\n\u539f\u9898\u9762\uff1a\n\u6709 $n$ \u5934\u5976\u725b\uff0c\u6bcf\u5934\u5976\u725b\u8981\u53bb\u63a2\u4eb2\uff08\u53ea\u63a2\u4e00\u53ea\uff09\uff0c\u63a2\u5b8c\u4eb2\u540e\u7559\u5728\u90a3\u4e2a\u5976\u725b\u7684\u5bb6\u91cc\u3002\u5982\u679c\u5976\u725b\u5230\u8fbe\u4e00\u5934\u5976\u725b\u5bb6\u540e\u53d1\u73b0\u5b83\u4e0d\u5728\u5bb6\uff0c\u5c31\u4f1a\u5931\u671b\u5730\u8d70\u6389\u3002\u5426\u5219\u4f1a\u53d1\u51fa $v_i$ \u58f0\u5feb\u4e50\u7684\u53eb\u58f0\u3002\u73b0\u5728\u8981\u4f60\u627e\u5230\u8fd9\u4e9b\u5976\u725b\u7684\u6700\u4f73\u884c\u52a8\u987a\u5e8f\u4f7f\u5f97\u53eb\u58f0\u6570\u91cf\u6700\u5927\u3002\n  \n\u7b80\u5316\u9898\u610f\uff1a\u7ed9\u5b9a\u4e00\u4e2a $n$ \u70b9 $n$ \u8fb9\u6709\u5411\u56fe\uff0c\u5c06\u56fe\u4e2d\u6240\u6709\u73af\u65ad\u5f00\u540e\u5269\u4e0b\u7684\u8fb9\u6743\u6700\u5927\u3002\n### Solution\n\u53d1\u73b0\u9898\u76ee\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u53ea\u6709\u4e00\u6761\u51fa\u8fb9\uff0c\u5f88\u5bb9\u6613\u8ba9\u4eba\u60f3\u5230\u6811\u3002\u4e8e\u662f\u6211\u4eec\u5c06\u8fd9\u6761\u8fb9\u7684\u8fde\u63a5\u70b9\u770b\u4e3a\u8be5\u70b9\u7684\u7236\u4eb2\u3002\u6709 $n$ \u6761\u8fb9\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u6216\u591a\u4e2a\u57fa\u73af\u6811\u3002\u62d3\u6251\u6392\u5e8f\u540e\u5c06\u6bcf\u68f5\u57fa\u73af\u6811\u552f\u4e00\u7684\u73af\u627e\u5230\u5176\u4e2d\u6700\u5c0f\u503c\u5c31\u597d\u4e86\u3002  \ncode:  \n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+10;\nint n;int a[N];int v[N];\nbool vis[N];int deg[N];\nqueue <int> Q;\nlong long ans;\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d\",&a[i],&v[i]);\n\t\tdeg[a[i]]++;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(!deg[i])Q.push(i);\n\t}\n\twhile(!Q.empty()){\n\t\tint u=Q.front();Q.pop();vis[u]=true;\n\t\tint to=a[u];\n\t\tdeg[to]--;ans+=v[u];\n\t\tif(!deg[to]){\n\t\t\tQ.push(to);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(!vis[i]){\n\t\t\tint MIN=1e9+10;\n\t\t\tint u=i;long long sum=0;\n\t\t\twhile(!vis[u]){\n\t\t\t\tsum+=v[u];MIN=min(MIN,v[u]);vis[u]=true;u=a[u];\n\t\t\t}\n\t\t\tans+=sum-MIN;\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1649077637,
        "uid": 213173,
        "name": "\u5c0f\u6728\u866b",
        "ccfLevel": 4,
        "title": "USACO 2022 OPEN Silver-Visits"
    },
    {
        "content": "**\u9898\u610f\u7b80\u8ff0**\n+ \u6709 $n$ \u53ea\u5976\u725b\uff0c\u7b2c $i$ \u53ea\u5976\u725b\u5e0c\u671b\u62dc\u8bbf\u7b2c $a_i$ \u53ea\u5976\u725b\u3002\n+ \u7ed9\u5b9a\u4e00\u4e2a $1$ . . . $N$ \u7684\u6392\u5217 $(p_1, p_2, ..., p_n)$\uff0c\u5bf9\u4e8e\u4ece $1$ \u5230 $n$ \u7684\u6bcf\u4e00\u4e2a $i$\uff1a\n  + \u5982\u679c\u5976\u725b $a_{p_i}$ \u5df2\u7ecf\u79bb\u5f00\u4e86\u5979\u7684\u519c\u573a\uff0c\u90a3\u4e48\u5976\u725b $p_i$ \u4ecd\u7136\u7559\u5728\u5979\u7684\u519c\u573a\u3002\n  + \u5426\u5219\uff0c\u5976\u725b $p_i$ \u5c31\u4f1a\u79bb\u5f00\u5979\u7684\u519c\u573a\u53bb\u62dc\u8bbf\u7b2c $a_{p_i}$ \u53ea\u5976\u725b\uff0c\u5e76\u4ea7\u751f $v_{p_i}$ \u6b21\u5feb\u4e50\u7684\u54de\u53eb\u3002\n+ \u7ed9\u51fa\u5e8f\u5217 $a_n$ \u4e0e $v_n$\uff0c\u5bf9\u4e8e\u6240\u6709\u53ef\u80fd\u7684\u6392\u5217 $p$\uff0c\u8ba1\u7b97\u53ef\u80fd\u5f97\u5230\u7684\u5feb\u4e50\u54de\u53eb\u7684\u6b21\u6570\u7684\u6700\u5927\u503c\u3002\n+ $2 \\leq n \\leq 10^5$\uff0c$0 \\leq v_i \\leq 10^9$\u3002\n\n**\u89e3\u9898\u601d\u8def**\n\n\u5341\u5206\u6709\u8da3\u7684\u56fe\u8bba\u9898\u3002\n\n\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a $n$ \u6761\u8fb9 $n$ \u4e2a\u70b9\u7684\u6709\u5411\u56fe\uff0c\u7b2c $i$ \u6761\u8fb9\u4ece $i$ \u8fde\u5411 $a_i$\u3002\u6ce8\u610f\u5230\u56fe\u4e0d\u4e00\u5b9a\u8fde\u901a\u3002\n\n\u9996\u5148\u8003\u8651\u5bf9\u4e8e $a_i \\neq a_j$ \u7684\u90e8\u5206\u5206\u5982\u4f55\u89e3\u51b3\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u8fde\u901a\u5757\u90fd\u5f62\u6210\u4e00\u4e2a\u7b80\u7b80\u5355\u5355\u7684\u73af\u3002\n\n\u5bb9\u6613\u53d1\u73b0\u6700\u4f18\u60c5\u51b5\u4e0b\uff0c\u5e94\u5f53\u662f\u5148\u7531\u4e00\u5934\u8d77\u59cb\u5976\u725b $i$ \u62dc\u8bbf $a_i$\uff0c\u7136\u540e $a_i$ \u62dc\u8bbf $a_{a_i}$\uff0c\u7136\u540e $a_{a_i}$ \u62dc\u8bbf $a_{a_{a_i}}$\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n![\u56fe\u7247 1](https://cdn.luogu.com.cn/upload/image_hosting/hvq8p1gs.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u6240\u4ee5\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u8fde\u901a\u5757\u7684\u7b54\u6848\u5c31\u662f $v_i$ \u7684\u548c\u51cf\u53bb\u8fd9\u4e2a\u8fde\u901a\u5757\u5185 $v_i$ \u7684\u6700\u5c0f\u503c\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u975e\u7279\u6b8a\u60c5\u51b5\uff0c\u6211\u4eec\u5982\u4f55\u89e3\u51b3\u5462\uff1f\u5148\u968f\u610f\u753b\u51fa\u4e00\u5f20\u53ef\u80fd\u7684\u6709\u5411\u56fe\u89c2\u5bdf\u4e00\u4e0b\u5427\u3002\n\n![\u56fe\u7247 2](https://cdn.luogu.com.cn/upload/image_hosting/nc9fmrds.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u6211\u4eec\u53d1\u73b0\u6bcf\u4e00\u4e2a\u8fde\u901a\u5757\u5185\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u73af\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u70b9\u5206\u6210\u4e24\u7c7b\uff1a\n+ \u5982\u679c\u8fd9\u4e2a\u70b9\u4e0d\u5728\u73af\u4e0a\uff0c\u6211\u4eec\u5148\u8ba9\u5b83\u8fdb\u884c\u62dc\u8bbf\uff0c\u5b83\u4e00\u5b9a\u80fd\u5bf9\u7b54\u6848\u4ea7\u751f\u8d21\u732e\u3002\uff08\u89c1\u4e0b\u56fe\uff09\n+ \u5982\u679c\u8fd9\u4e2a\u70b9\u5728\u73af\u4e0a\uff0c\u90a3\u4e48\u6211\u4eec\u7528\u90e8\u5206\u5206\u7684\u601d\u8def\u63a8\u5bfc\uff0c\u4e5f\u4e00\u5b9a\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u73af\u4e0a\u7684\u70b9\u65e0\u6cd5\u4ea7\u751f\u8d21\u732e\u3002\n\n![\u56fe\u7247 3](https://cdn.luogu.com.cn/upload/image_hosting/ecj9zsd8.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u95ee\u9898\u4e5f\u5c31\u8fce\u5203\u800c\u89e3\u4e86\u3002\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u901a\u5757\uff0c\u7edf\u8ba1\u6240\u6709 $v_i$ \u7684\u548c\uff0c\u518d\u51cf\u53bb**\u73af\u4e0a**\u7684\u70b9\u7684 $v_i$ \u7684\u6700\u5c0f\u503c\uff0c\u5c31\u662f\u7b54\u6848\u3002\n\n**\u4ee3\u7801**\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\n\ninline int read() {\n    int x = 0; char ch = getchar();\n    while (!isdigit(ch)) ch = getchar();\n    while (isdigit(ch)) x = (x<<3) + (x<<1) + ch - '0', ch = getchar();\n    return x;\n}\n\nconst int L = 1e5 + 5;\nint n, ans, minn, a[L], v[L], f[L], in[L];\nvector<int> vec, son[L];\nbool vis[L];\n\nvoid get_point(int x) { // \u83b7\u53d6\u6bcf\u4e00\u4e2a\u8fde\u901a\u5757\u4e2d\u7684\u70b9\n    vis[x] = true, vec.push_back(x);\n    for (int i = 0; i < son[x].size(); i++)\n\tif (!vis[son[x][i]]) get_point(son[x][i]);\n    if (!vis[a[x]]) get_point(a[x]);\n}\n\nvoid get_circle(int x) { // dfs \u627e\u73af\uff0c\u540c\u65f6\u76f4\u63a5\u66f4\u65b0\u6700\u5c0f\u503c\n    f[x]++;\n    if (f[x] == 2) minn = min(minn, v[x]);\n    if (f[a[x]] != 2) get_circle(a[x]);\n}\n\nsigned main() {\n    n = read();\n    for (int i = 1; i <= n; i++)\n\ta[i] = read(), v[i] = read(), son[a[i]].push_back(i), in[a[i]]++;\n\t\t\n    for (int i = 1; i <= n; i++) {\n\tif (vis[i]) continue;\n\tminn = L*L;\n\tget_point(i);\n\tget_circle(i);\n\tfor (int j = 0; j < vec.size(); j++)\n    \t    ans += v[vec[j]];\n\tans -= minn;\n\tvec.clear();\n    }\n\t\n    printf(\"%lld\", ans);\n\t\n    return 0;\n}\n```",
        "postTime": 1649071373,
        "uid": 265517,
        "name": "Sparkle_ZH",
        "ccfLevel": 7,
        "title": "P8269 [USACO22OPEN] Visits S - \u9898\u89e3"
    },
    {
        "content": "\u65e2\u7136\u6bcf\u5934\u725b\u90fd\u8981\u53bb\u53e6\u4e00\u5934\u725b\u90a3\u91cc\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2a\u56fe\u6765\u8868\u793a\u8fd9\u4e9b\u60c5\u51b5\u3002\n\n\u90a3\u4e48\uff0c$N$ \u4e2a\u70b9 $N$ \u6761\u8fb9\u662f\u4ec0\u4e48\u56fe\u5462\uff1f\n\n\u56e0\u4e3a $N$ \u4e2a\u70b9 $N-1$ \u6761\u8fb9\u662f\u4e00\u68f5\u6811\uff0c\u90a3\u4e48\u6811\u52a0\u4e00\u6761\u8fb9\u5c31\u662f\u4f20\u8bf4\u4e2d\u7684**\u57fa\u73af\u6811**\u3002\n\n\u6240\u8c13\u57fa\u73af\u6811\uff0c\u5c31\u662f\u6811\u4e0a\u6709\u4e86\u4e00\u4e2a\u73af\uff08\u666e\u901a\u7684\u6811\u662f\u53cc\u5411\u8fb9\uff0c\u5728\u54ea\u91cc\u52a0\u4e00\u6761\u8fb9\u90fd\u6709\u73af\uff09\u3002\n\n\u4e0d\u8fc7\uff0c\u8fd9\u4e2a\u56fe\u4e0d\u4e00\u5b9a\u8054\u901a\uff0c\u6211\u4eec\u5c31\u53ea\u80fd\u79f0\u5176\u4e3a**\u57fa\u73af\u6811\u68ee\u6797**\u3002\n\n\u6211\u4eec\u628a\u5b83\u5206\u6210\u4e24\u4e2a\u90e8\u5206\uff1a\u4e3b\u5e72\u90e8\u5206\uff08\u73af\uff09\u548c\u5206\u652f\u90e8\u5206\uff08\u73af\u5916\u9762\u7684\u679d\u6748\uff09\u3002\n\n\u56e0\u4e3a\u6bcf\u5934\u725b\u53ea\u4f1a\u60f3\u53bb\u4e00\u4e2a\u5730\u65b9\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6709\u5411\u56fe\u7684\u5206\u652f\u90e8\u5206\u90fd\u662f\u4ece\u5916\u9762\u8fde\u5411\u73af\u4e0a\u7684\u70b9\u3002\u6211\u4eec\u5982\u679c\u60f3\u8981\u6c42\u51fa\u6700\u5927\u8fb9\u6743\u548c\uff0c\u5206\u652f\u90e8\u5206\u80af\u5b9a\u662f\u53ef\u4ee5\u901a\u8fc7\u62d3\u6251\u6392\u5e8f\u7684\u65b9\u5f0f\u5168\u90fd\u5f97\u5230\uff0c\u7136\u540e\u8fde\u5230\u73af\u4e0a\u3002\n\n\u56e0\u4e3a\u73af\u662f\u4e00\u4e2a\u73af\uff0c\u56e0\u6b64\u4ed6\u5fc5\u987b\u4f1a\u6709\u4e00\u6761\u8fb9\u7684\u8fb9\u6743\u65e0\u6cd5\u83b7\u5f97\u3002\u4e3a\u4e86\u8ba9\u6211\u4eec\u7684\u7b54\u6848\u5c3d\u91cf\u5927\uff0c\u80af\u5b9a\u9009\u8fb9\u6743\u6700\u5c0f\u7684\u90a3\u4e00\u6761\u4e0d\u83b7\u5f97\u3002\n\n\u5728\u5b9e\u9645\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\uff0c\u5728\u4ece\u4e00\u4e2a\u8282\u70b9\u8bbf\u95ee\u65f6\u9047\u5230\u4e00\u4e2a\u8bbf\u95ee\u8fc7\u7684\u8282\u70b9\u65f6\uff0c\u4f1a\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1. \u9047\u5230\u4e86\u81ea\u5df1\u8bbf\u95ee\u7684\u8def\u4e0a\u7684\u8282\u70b9\uff0c\u8bf4\u660e\u8fd9\u6761\u8def\u4e0a\u6709\u73af\uff0c\u800c\u4e14\u8fd9\u4e2a\u8282\u70b9\u4e00\u5b9a\u662f\u73af\u4e0a\u7684\u70b9\n2. \u9047\u5230\u4e86\u522b\u7684\u8def\u4e0a\u7684\u8282\u70b9\uff0c\u5c31\u4e0d\u7528\u7ee7\u7eed\u8bbf\u95ee\u4e86\n\n\u9047\u5230\u6709\u73af\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u4ece\u8fd9\u4e2a\u73af\u4e0a\u7684\u70b9\u5f80\u56de\u627e\uff0c\u76f4\u5230\u518d\u627e\u5230\u4ed6\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u5c31\u53ef\u4ee5\u627e\u6700\u5c0f\u8fb9\u6743\u4e86\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,a[100005],v[100005],vis[100005];//vis\u4e3a0\u8868\u793a\u6ca1\u8bbf\u95ee\u8fc7\uff0c\u4e3a1\u8868\u793a\u662f\u73b0\u5728\u8def\u4e0a\u7684\uff0c\u4e3a2\u8868\u793a\u662f\u5176\u4ed6\u8def\u4e0a\u7684\nlong long tot,ans;\nint mn(int u){//\u5728\u8def\u4e0a\u53d6\u6700\u5c0f\u8fb9\u6743\n\tint res=v[u];\n\tfor(int i=a[u];i!=u;i=a[i]) res=min(res,v[i]);\n\treturn res;\n}\nvoid end(int x){//\u628a\u6240\u6709\u81ea\u5df1\u8def\u4e0a\u7684\u90fd\u6539\u6210\u201c\u522b\u7684\u8def\u4e0a\u7684\u201d\uff0c\u8bf4\u660e\u904d\u5386\u7ed3\u675f\n\twhile(vis[x]==1) vis[x]=2,x=a[x];\n\treturn;\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i]>>v[i];tot+=v[i];//\u8ba1\u7b97\u603b\u8fb9\u6743\u548c\n\t}\n\tint x;\n\tfor(int i=1;i<=n;i++){\n\t\tif(!vis[i]){//\u6ca1\u6709\u8bbf\u95ee\u8fc7\n\t\t\tx=i;\n\t\t\twhile(!vis[x]){//\u4e00\u76f4\u5f80\u524d\u627e\n\t\t\t\tvis[x]=1;\n\t\t\t\tx=a[x];\n\t\t\t}\n\t\t\tif(vis[x]==1) ans+=mn(x);//ans\u8868\u793a\u8981\u51cf\u53bb\u7684\u6240\u6709\u8fb9\u6743\n\t\t\tend(i);//\u904d\u5386\u7ed3\u675f\n\t\t}\n\t}\n\tcout<<tot-ans<<endl;//\u603b\u7684\u51cf\u53bb\u4e0d\u80fd\u83b7\u5f97\u7684\uff0c\u5c31\u662f\u7b54\u6848\n\treturn 0;\n}\n```",
        "postTime": 1649164122,
        "uid": 320423,
        "name": "CaCa_Condy",
        "ccfLevel": 7,
        "title": "P8269 [USACO22OPEN] Visits S"
    },
    {
        "content": "## Solution\n\n\u5efa\u4e00\u4e2a\u65e0\u5411\u5e26\u6743\u56fe\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0d\u5728\u73af\u4e0a\u7684\u6240\u6709\u7738\u53eb\u90fd\u662f\u80fd\u6536\u96c6\u8d77\u6765\u7684\u3002\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a\u73af\uff0c\u62c6\u6389\u5176\u4e2d\u6743\u503c\u6700\u77ed\u7684\u8fb9\u5c31\u884c\u4e86\u3002\n\n## Code\n\n```\n#include<bits/stdc++.h>\n#define Rpp(i, n) for(int i=1; i<=(int)(n); i++)\n#define Pinf 0x3f3f3f3f3f3f3f3fLL\n#define endl '\\n'\n#define int long long\nusing namespace std;\nbool CheckMin(int& x, int y) { if(x > y) { x = y; return 1; } else return 0; }\n\nstruct Ed { int u, v, w; } E[100010];\nvector < pair <int, int> > G[100010];\nint vis[100010];\nstack <int> Stk;\nset <int> Cir;\n\nvoid Dfs(int u, int pa)\n{\n\tif(Cir.size()) return ;\n\tvis[u] = 1; Stk.push(u);\n\tfor(const auto& p : G[u])\n\t{\n\t\tint v = p.first;\n\t\tif(vis[v] == 2) continue ;\n\t\telse if(!vis[v]) { Dfs(v, u);  }\n\t\telse if(v == pa) pa = 0;\n\t\telse while(Stk.size())\n\t\t{\n\t\t\tCir.insert(Stk.top());\n\t\t\tif(Stk.top() == v) break;\n\t\t\tStk.pop();\n\t\t}\n\t} vis[u] = 2; if(Stk.size()) Stk.pop();\n}\n\nsigned main()\n{\n\tios_base :: sync_with_stdio(0), cin.tie(0), cout.tie(0);\n\t\n\tint n, Min=Pinf, sum=0; cin >> n;\n\tRpp(u, n)\n\t{\n\t\tint v, w; cin >> v >> w; //\u5efa\u56fe\u3002\n\t\tG[u].emplace_back(v, w); //\u6ce8\u610f\u662f\u65e0\u5411\u56fe\u3002\n\t\tG[v].emplace_back(u, w);\n\t\tE[u] = {u, v, w}; sum += w;\n\t}\n\tRpp(i, n) if(!vis[i])\n\t{\n\t\tDfs(i, 0); if(!Cir.size()) continue; //Cir -> \u73af\u8def\u3002\n\t\tRpp(i, n) if(Cir.count(E[i].u) && Cir.count(E[i].v))\n\t\t\tCheckMin(Min, E[i].w);\n\t\tif(Min != Pinf) sum -= Min; //\u62c6\u8fb9\n\t\tMin = Pinf; Cir.clear();\n\t}\n\t\n\tcout << sum << endl;\n\t\n\treturn 0;\n}\n```",
        "postTime": 1649121209,
        "uid": 380730,
        "name": "LKX_Wata",
        "ccfLevel": 7,
        "title": "P8269 \u9898\u89e3"
    }
]
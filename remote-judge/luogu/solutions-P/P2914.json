[
    {
        "content": "\u7531\u9898\u610f\u53ef\u5f97\u8fd9\u662f\u4e00\u9053\u5355\u6e90\u6700\u77ed\u8def\uff0c\u4ece\u7b2c\u4e00\u4e2a\u70b9\u5230\u7b2cn\u4e2a\u70b9\u7684\u5355\u6e90\u6700\u77ed\u8def\uff0c\u5148\u5728\u539f\u6765\u6709\u7535\u7ebf\u7684\u4e24\u70b9\u4e4b\u95f4\u8fde\u4e00\u6761\u8fb9\uff0c\u4ee3\u4ef7\u4e3a0\uff0c\u518d\u5efa\u56fe\uff0c\u6bcf\u4e24\u70b9\u4e4b\u95f4\u5148\u5c1d\u8bd5\u5efa\u4e00\u6761\u8fb9\uff0c\u5982\u679c\u539f\u6765\u6709\u8fb9\u6216\u4ee3\u4ef7\u5927\u4e8em\uff0c\u5219\u4f9d\u7136\u662f\u65e0\u7a77\u5927\uff0c\u6700\u540e\u5efa\u56fe\u5b8c\u6210\u540e\u8dd1\u4e00\u904dDijkstra\u5c31\u597d\u3002\n```cpp\nconst oo=maxlongint div 2;//\u5e38\u91cf\uff0c\u5b9a\u4e49\u65e0\u7a77\u5927\nvar\nn,w,i,j,k,p1,p2:longint;\nm:double;\na:array[1..1000,1..1000]of double;\ndist:array[1..1000]of double;\nvis:array[1..1000]of boolean;\nx,y:array[1..1000]of longint;\nfunction calc(a,b,c,d:longint):double;//\u8ba1\u7b97\u4e24\u70b9\u8ddd\u79bb\n  begin exit(sqrt(sqr(a-b)+sqr(c-d)));end;\nfunction min(a,b:double):double;\n  begin if a<b then exit(a);exit(b);end;\nbegin\nread(n,w,m);\nfor i:=1 to n do read(x[i],y[i]);\nfor i:=1 to n do\n  for j:=1 to n do\n    a[i,j]:=oo;//\u521d\u59cb\u5316a\u6570\u7ec4\uff0c\u5404\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u4e3a\u65e0\u7a77\u5927\nfor i:=1 to w do\n  begin\n    read(p1,p2);\n    a[p1,p2]:=0;a[p2,p1]:=0;//\u539f\u6765\u5982\u679c\u6709\u7535\u7ebf\u7ecf\u8fc7\u7684\u4ee3\u4ef7\u4e3a0\n  end;\nfor i:=1 to n-1 do\n  for j:=i+1 to n do\n    begin\n      a[i,j]:=min(a[i,j],calc(x[i],x[j],y[i],y[j]));\n      //\u539f\u6765\u6709\u7535\u7ebf\u7684\u4e0d\u67b6\u7535\u7ebf\uff08\u4ee3\u4ef7\u4e3a0\uff09\n      //\u6ca1\u6709\u7535\u7ebf\u7684\u67b6\u7535\u7ebf\uff08\u5373\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\uff09\n      if a[i,j]>m then a[i,j]:=oo;\n      //\u5982\u679c\u65b0\u7684\u7535\u7ebf\u5927\u4e8e\u4e86m\uff0c\u90a3\u4e48\u8fd8\u662f\u65e0\u7a77\u5927\n      a[j,i]:=a[i,j];\n    end;\n//\u4ee5\u4e0b\u4e3a\u6700\u57fa\u672c\u7684\u6700\u77ed\u8def\u2014\u2014Dijkstra\uff0c\u4e0d\u89e3\u91ca\n//\u82e5\u6709\u7591\u95ee\uff0c\u8bf7\u79fb\u6b65P3371\u3010\u6a21\u677f\u3011\u5355\u6e90\u6700\u77ed\u8def\u5f84\nfor i:=1 to n do dist[i]:=oo;\ndist[1]:=0;\nfor i:=1 to n do\n  begin\n    k:=-1;\n    for j:=1 to n do\n      if((k=-1)or(dist[k]>dist[j]))and(not vis[j])then k:=j;\n    if k=-1 then break;vis[k]:=true;\n    for j:=1 to n do\n      if(not vis[j])and(dist[k]+a[k,j]<dist[j])then\n        dist[j]:=dist[k]+a[k,j];\n  end;\nif dist[n]<>oo then write(trunc(dist[n]*1000))else write(-1);\n//\u8f93\u51fa\u7b54\u6848\u7684\u683c\u5f0f\u522b\u5fd8\u4e86\nend.\n```",
        "postTime": 1506939568,
        "uid": 12832,
        "name": "sxyugao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2914 \u3010[USACO08OCT]\u65ad\u7535Power Failure\u3011"
    },
    {
        "content": "\u5b89\u5229\u4e2a\u4ebablog\uff1a\nhttps://www.cnblogs.com/BrokenString/\n\u54c7\n\u8fd9\u9898\u76ee\u5728\u6691\u5047\u57f9\u8bad\u7684\u65f6\u5019\u8003\u5230\n\u5f53\u65f6\u7528Floyed\u4f1aT\u6389\n\u770b\u697c\u4e0b\u90fd\u662f\u7528Dijkstra\n\u96be\u9053\u6ca1\u6709\u4eba\u7528**\u4f18\u96c5\u7684SPFA**\u5417\uff1f\n#### \u601d\u8def\n\u7528\u524d\u5411\u661f\u6784\u5efa\u6574\u4e2a\u56fe\n\u6ce8\u610f\u6bcf\u4e00\u6761\u8fb9\u90fd\u4e0d\u80fd\u8d85\u8fc7len\uff08\u4e5f\u5c31\u662f\u9898\u76ee\u4e2d\u7684m\uff09\n\u6240\u4ee5\u5b58\u56fe\u7684\u65f6\u5019\u6ce8\u610f\u4e00\u4e0b\u8fd9\u4e00\u70b9\u5c31\u884c\u4e86\n\u5176\u4ed6\u5c31\u8ddfSPFA\u4e00\u6837\u5957\u677f\u5b50\n\u4ee3\u7801\u4e2d\u8fd8\u6709\u8be6\u7ec6\u6ce8\u89e3\n\u6ce8\u610f\u5751\u70b9\uff1a\u6570\u7ec4\u5f00\u5927\u4e00\u70b9 \u6ca1\u5f00\u5927\u7684\u6211RE\u4e862\u6b21\n#### \u4ee3\u7801\n```\n#include<iostream>\n#include<cstdio>\n#include<cmath>\nusing namespace std;\nint n,m,cnt;\ndouble len;\nint exist[500005];//\u5224\u65ad\u662f\u5426\u5728\u961f\u4e2d \nint team[2000020];//\u961f\u5217 \nint head[500005];\ndouble dis[500005];//\u4ece1\u5230n\u7684\u8ddd\u79bb \nint t=0,w=1;\nstruct ele\n{\n\tdouble x;\n\tdouble y;\n}ele[100005];//\u7535\u7ebf\u6746\u7684\u5750\u6807 \nstruct edge\n{\n\tint next;\n\tint to;\n\tdouble w;\n}e[5000005]; \nvoid add(int u,int v,double w)\n{\n\te[++cnt].w=w;\n\te[cnt].to=v;\n\te[cnt].next=head[u];\n\thead[u]=cnt;\n}//\u524d\u5411\u661f\u56fe \ndouble dist(int i,int j)\n{\n    double x1=ele[i].x;\n    double y1=ele[i].y;\n    double x2=ele[j].x;\n    double y2=ele[j].y;\n    double d=hypot(x1-x2,y1-y2);//\u5224\u65ad\u7535\u7ebf\u6746\u4e4b\u95f4\u7684\u8ddd\u79bb\n\t                            //\u636e\u697c\u4e0b\u7684dalao\u8bf4\u7528sqrt\u4f1a\u7206\u5c31\u6ca1\u7528\n\t\t\t\t\t\t\t\t//\u7528\u4e86\u6c42\u76f4\u89d2\u4e09\u89d2\u5f62\u659c\u8fb9\u957f\u7684\u51fd\u6570<cmath> \n    return d;\n}\nint main()\n{\n\tcin>>n>>m>>len;\n\tfor(int i=1;i<=n;i++)\n\tcin>>ele[i].x>>ele[i].y;\n\tfor(int i=1;i<=n;i++)\n\tdis[i]=99999999;//\u521d\u59cb\u5316 \n\tfor(int i=1;i<=n;i++)\n\tfor(int j=i+1;j<=n;j++)\n\t{\n\t\tif(dist(i,j)<=len)//\u5982\u679c\u6ca1\u6709\u8d85\u8fc7len\u5c31\u53ef\u4ee5\u52a0\u5165\u8fb9 \n        {\n\t\t\tadd(i,j,dist(i,j));\n\t\t    add(j,i,dist(i,j));\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++)\n    {\n        int x,y;\n        cin>>x>>y;\n        add(x,y,0);\n\t\tadd(y,x,0);//\u5982\u679c\u5df2\u7ecf\u6709\u7535\u7ebf\u5c31\u4e0d\u7528\u518d\u82b1\u8d39\u8ddd\u79bb \n    }\n    dis[1]=0;//\u5e38\u89c4SPFA\u5f00\u59cb \n    team[1]=1;\n    while(t<w)\n    {\n\t\tt++;\n\t\tint u=team[t];\n\t\texist[u]=0;\n\t\tfor(int i=head[u];i;i=e[i].next)\n\t\t{\n\t\t\tint v=e[i].to;\n\t\t\tif(dis[v]>dis[u]+e[i].w)\n\t\t\t{\n\t\t\t\tdis[v]=dis[u]+e[i].w;\n\t\t\t\tif(!exist[v])\n\t\t\t\t{\n\t\t\t\t\tw++;\n\t\t\t\t\texist[v]=1;\n\t\t\t\t\tteam[w]=v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(dis[n]==99999999)//\u5982\u679c\u5230\u4e0d\u4e86 \n\tcout<<\"-1\";\n\telse\n\tcout<<int(dis[n]*1000);//\u5f3a\u5236\u8f6c\u6362int\u7c7b\u578b \n}\n```",
        "postTime": 1531314663,
        "uid": 48487,
        "name": "Nanchtiy",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2914 \u3010[USACO08OCT]\u65ad\u7535Power Failure\u3011"
    },
    {
        "content": "\u5199\u4e86\u597d\u4e45\u624d\u4e0d\u5bb9\u6613\u8fc7\u7684\n\n\u9996\u5148\uff0c\u6b64\u9898\u662f\u4e2a\u5355\u6e90\u6700\u77ed\u8def\u95ee\u9898\uff0c\u5bf9\u4e8e\u7535\u7ebf$(x, y)$,\u5219\u4ee4$x \\to y$\u7684\u8fb9\u6743\u4e3a0\n\n\u5176\u4f59\u7684\u8fb9\u6743\u5219\u6309\u7167\u8ddd\u79bb\u516c\u5f0f\u8ba1\u7b97\uff0c\u82e5\u5927\u4e8e$m$,\u5219\u8d4b\u503c\u65e0\u7a77\u5927\n\n\u6700\u540e\u8dd1\u4e00\u904ddijkstra\u3002\n\n\u521a\u5f00\u59cb\u4ee5\u4e3a\u53ea\u6709$O(n^3)$,\u80fd\u7528Floyd\uff0c\u7136\u540eT\u4e86\n\n\u6240\u4ee5\u5fc5\u987b\u7528dijkstra\uff0c\u590d\u6742\u5ea6$O((n+m)\\log n)$\n\n\u6700\u540e\u8f93\u51fa$\\lfloor(d[n] \\times 1000)\\rfloor$\uff08\u5411\u4e0b\u53d6\u6574\uff09\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n, w;\ndouble m, d[1001];\nbool v[1001];\ndouble a[1001][1001];\nstruct rec {\n\tdouble x, y;\n} p[1001];\nint main() {\n//\tfreopen(\"data.in\", \"r\", stdin);\n//\tfreopen(\"data.out\", \"w\", stdout);\n\tcin >> n >> w >> m;\n//\tfor (register int i = 1; i <= n; ++i)\n//\t\tfor (register int j = 1; j <= n; ++j)\n//\t\t\ta[i][j] = 1e18;\n\tfor (register int i = 1; i <= n; ++i) scanf(\"%lf%lf\", &p[i].x, &p[i].y);\n\tfor (register int i = 1; i <= n; ++i) \n\t\tfor (register int j = 1; j <= n; ++j) {\n\t\t\ta[i][j] = sqrt(pow(p[i].x - p[j].x, 2) + pow(p[i].y - p[j].y, 2));\n\t\t\tif (a[i][j] > m) a[i][j] = 1e18;\n\t\t}\n\tfor (register int i = 1; i <= w; ++i) {\n\t\tint x, y;\n\t\tscanf(\"%d%d\", &x, &y);\n\t\ta[y][x] = a[x][y] = 0;\n\t}\n\tpriority_queue<pair<double, int> > q;\n\tfor (register int i = 1; i <= n; ++i) d[i] = 1e18;\n\tq.push(make_pair(0.0, 1));\n\tmemset(v, 0, sizeof v);\n\td[1] = 0;\n\twhile (q.size()) {\n\t\tint x = q.top().second;\n\t\tq.pop();\n\t\tif (v[x]) continue;\n\t\tv[x] = 1;\n\t\tfor (register int i = 1; i <= n; ++i) {\n\t\t\tdouble z = a[x][i];\n\t\t\tif (z == 1e18) continue;\n\t\t\tif (d[i] > d[x] + z) {\n\t\t\t\td[i] = d[x] + z;\n\t\t\t\tq.push(make_pair(-d[i], i));\n\t\t\t}\n\t\t}\n\t}\n\tif (d[n] == 1e18) puts(\"-1\");\n\telse printf(\"%.0lf\", floor(d[n] * 1000));\n} \n```\n\u5982\u679c\u60f3\u8981\u66f4\u597d\u7684\u4f53\u9a8c\uff0c\u53ef\u4ee5\u5230[\u6211\u7684\u535a\u5ba2](https://www.luogu.org/blog/I-AK-IOI/)\u53bb\u770b",
        "postTime": 1595231042,
        "uid": 162196,
        "name": "\u4f1f\u5927\u7684\u738b\u592b\u5b50",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2914 \u3010[USACO08OCT]Power Failure G\u3011"
    },
    {
        "content": "## \u7b80\u8981\u5206\u6790\n\n\u5982\u679c\u8bfb\u5f97\u61c2\u8fd9\u9053\u9898\u7684\u8bdd\u5e94\u8be5\u4e0d\u96be\u770b\u51fa\u8fd9\u662f\u4e00\u9053\u6700\u77ed\u8def\uff08~~\u53ef\u4ee5\u8bf4\u662f\u975e\u5e38\u8003\u9a8c\u8bed\u6587\u80fd\u529b\u4e86~~\n\n\u8fd9\u9053\u9898\u7684\u96be\u70b9\u8fd8\u662f\u5728\u4e8e\u5efa\u56fe\uff0c\u56fe\u5efa\u597d\u4e86\u4ee5\u540e\u8dd1\u4e00\u904d\u6700\u77ed\u8def\u5c31\u884c\u4e86\uff0c\u8fd9\u91cc\u6211\u7528\u7684\u662f $dijkstra$\n\n\u9996\u5148\uff0c\u5bf9\u4e8e\u5e78\u5b58\u7684\u7535\u7ebf\uff0c\u6211\u4eec\u76f4\u63a5\u5efa\u4e00\u6761\u8fb9\u6743\u4e3a $0$ \u7684\u8fb9\uff0c\u8868\u793a\u4e0d\u9700\u8981\u67b6\u8bbe\u65b0\u7684\u7535\u7ebf\u5c31\u53ef\u4ee5\u901a\u7535\n\n\u5bf9\u4e8e\u5269\u4e0b\u7684\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u6839\u636e\u52fe\u80a1\u5b9a\u7406\u7b97\u51fa\u9700\u8981\u67b6\u8bbe\u7684\u7535\u7ebf\u957f\u5ea6\uff0c\u5982\u679c\u957f\u5ea6\u8d85\u8fc7\u4e86 $m$ \uff0c\u90a3\u6211\u4eec\u5c31\u8df3\u8fc7\uff0c\u5426\u5219\u5c31\u5efa\u4e00\u6761\u8fb9\n\n\u6b64\u5916\uff0c\u8fd8\u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u4e24\u70b9\n\n- \u6b64\u9898\u662f**\u65e0\u5411\u56fe**\uff0c\u56e0\u6b64\u6bcf\u6b21\u9700\u8981\u5efa\u8fb9\u8981\u5efa**\u4e24\u6761\u8fb9**\n\n- \u7531\u4e8e\u8f93\u51fa\u683c\u5f0f\u672a\u7ffb\u8bd1\uff0c\u5927\u5bb6\u9700\u8981\u6839\u636e\u6837\u4f8b\u63a8\u51fa\u6211\u4eec\u9700\u8981\u8f93\u51fa\u7684\u662f **$1000$ \u500d\u7684\u6700\u77ed\u8def\u957f\u5ea6\u4fdd\u7559\u6574\u6570**\n\n## \u5b8c\u6574\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define ri register int\nusing namespace std;\nint n, w, x, y, tot = 0, h[1005] = {0}, vis[1005] = {0};\ndouble m, d, dis[1005] = {0};\nstruct node {\n\tdouble d;\n\tint p;\n\tbool operator < (const node &x) const {\n\t\treturn x.d < d;\n\t}\n} t;\nstruct crdnt {\t//\u7535\u7ebf\u6746\u5750\u6807\n\tdouble x, y;\n} a[1005] = {0};\nstruct edge {\n\tint u, v;\n\tdouble w;\n} e[1000005] = {0};\npriority_queue <node> q;\ninline void add(int u, int v, double w) {\n\te[++tot].u = h[u], e[tot].v = v, e[tot].w = w, h[u] = tot;\n}\nint main() {\n\tscanf(\"%d%d%lf\", &n, &w, &m);\n\tfor (ri i = 1; i <= n; i++) scanf(\"%lf%lf\", &a[i].x, &a[i].y), dis[i] = 1e9 + 7;\n\tfor (ri i = 1; i <= w; i++) scanf(\"%d%d\", &x, &y), add(x, y, 0), add(y, x, 0);\n\tfor (ri i = 1; i <= n; i++)\n\t\tfor (ri j = i + 1; j <= n; j++) {\n\t\t\td = sqrt((a[i].x - a[j].x) * (a[i].x - a[j].x) + (a[i].y - a[j].y) * (a[i].y - a[j].y));\n        \t\t//\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u6211\u7528\u4e86sqrt\u5e76\u6ca1\u6709\u70b8\n\t\t\tif (d <= m) add(i, j, d), add(j, i, d);\n\t\t}\n\tdis[1] = 0, q.push((node) {0,1});\t//\u7528dijkstra\u8dd1\u4e00\u904d\u6700\u77ed\u8def\n\twhile (!q.empty()) {\n\t\tt = q.top(), q.pop();\n\t\tif (vis[t.p]) continue;\n\t\tvis[t.p] = 1;\n\t\tfor (ri i = h[t.p]; i; i = e[i].u)\n\t\t\tif (dis[t.p] + e[i].w < dis[e[i].v])\n            \tdis[e[i].v] = dis[t.p] + e[i].w, q.push((node) {dis[e[i].v],e[i].v});\n\t}\n\tif (dis[n] == 1e9 + 7) printf(\"%d\", -1);\n\telse printf(\"%d\", (int)(dis[n] * 1000));\t//\u6ce8\u610f\u9898\u610f\u8981\u6c42\u8f93\u51fa\u4ec0\u4e48\n\treturn 0;\n}\n```\n",
        "postTime": 1571647371,
        "uid": 51692,
        "name": "\u706b\u8f66\u53f8\u673a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3-P2914"
    },
    {
        "content": "\u662f\u4e00\u9053\u5f88\u6709\u610f\u601d\u7684\u6700\u77ed\u8def\u9898\u76ee\u54e6\uff01\n\n## \u9898\u610f\n\n\u56e0\u4e3a\u90aa\u6076\u7684\u66b4\u98ce\u96e8\uff0c\u53ef\u601c\u7684 FJ \u9700\u8981\u4f60\u5e2e\u5fd9\u4fee\u590d\u7535\u8def\u3002\u7528\u7535\u8def\u4f7f \u7f16\u53f7 $1\n\\sim 9$ \u7684\u7535\u7ad9\u8fde\u901a\uff0c\u6062\u590d\u7535\u8def\u3002\n\n![\u90aa\u6076\u7684\u66b4\u98ce\u96e8\uff01](https://cdn.luogu.com.cn/upload/image_hosting/oghzgy63.png)\n\n\uff08\u5982\u56fe\uff0c\u56fe\u4e3a\u9898\u4e2d\u9ad8\u914d\u7248\u3002\u914d\u5408\u6837\u4f8b\u98df\u7528\u66f4\u4f73\uff09\n\n\u6bcf\u4e2a\u7535\u7ad9\u7684\u5750\u6807\u90fd\u5728\u56fe\u4e2d\u6807\u51fa\uff0c\u5e76\u4e14\u6807\u4e0a\u4e86\u5e8f\u53f7\u3002\u7ea2\u8272\u7684\u7535\u7ebf\u662f\u5b8c\u597d\u65e0\u635f\u7684\u3002\u9700\u8981\u4f60\u5728\u4e24\u4e2a\u7535\u7ad9\u4e2d\u65b0\u8fde\u63a5\u7684\u7ebf\u4e0d\u80fd\u8d85\u8fc7\u4e00\u4e2a\u9650\u5236 $M$\uff0c\u6c42\u5728\u539f\u6765\u7535\u7ebf\u7684\u57fa\u7840\u4e0a\u8ba1\u7b97\u51fa\u9700\u8981\u4fee\u590d\u7535\u8def\u7684\u8ddd\u79bb\u3002\n\n## \u4e3a\u4ec0\u4e48\u4f7f\u7528\u6700\u77ed\u8def\n\n\u82e5\u7f51\u7edc\u4e2d\u7684\u6bcf\u6761\u8fb9\u90fd\u6709\u4e00\u4e2a\u6570\u503c\uff08\u957f\u5ea6\u3001\u6210\u672c\u3001\u65f6\u95f4\u7b49\uff09\uff0c\u5219\u627e\u51fa\u4e24\u4e2a\u7ed3\u70b9\u4e4b\u95f4\u603b\u6743\u548c\u6700\u5c0f\u7684\u8def\u5f84\u5c31\u662f\u6700\u77ed\u8def\u95ee\u9898\u3002\n\n\u6839\u636e\u9898\u610f\uff0c\u9700\u8981\u6211\u4eec\u9009\u62e9\u6700\u77ed\u7684\u8def\u7a0b\uff08\u7535\u7ebf\u7684\u957f\u5ea6\uff09\u5c06\u7f16\u53f7 $1\\sim n$ \u7684\u70b9\u8fde\u901a\uff0c\u6240\u4ee5\u4f7f\u7528\u6700\u77ed\u8def\u7b97\u6cd5\u89e3\u51b3\u3002\n\n## \u601d\u8def\n\n\u628a\u8fd9\u4e00\u5207\u62bd\u8c61\u6210\u56fe\uff0c\u8dd1\u6700\u77ed\u8def\u3002\u5df2\u7ecf\u6709\u90e8\u5206\u7684\u8fb9\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u662f\u5b8c\u597d\u65e0\u635f\u7684\u8fb9\uff0c\u6240\u4ee5\u5728\u56fe\u4e2d\u8fd9\u4e9b\u8fb9\u6ca1\u6709\u8017\u8d39\uff0c\u8fb9\u7684\u6743\u503c\u4e3a $0$\u3002\u5269\u4e0b\u7684\u8fb9\u521d\u59cb\u5316\u4e3a\u70b9\u4e0e\u70b9\u5728\u5750\u6807\u4e2d\u7684\u8ddd\u79bb\u3002\n\nFloyd \u7b97\u6cd5\u4f1a\u8d85\u65f6\u3002\u8dd1 Dijkstra\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O((n+m)\\log n)$\u3002\u5f53\u8fb9\u6743\u503c\u8d85\u8fc7\u9650\u5236 $M$ \u65f6\uff0c\u4e0d\u66f4\u65b0\u7b54\u6848\u3002\n\n\u5f53\u6700\u7ec8\u7b54\u6848\u4ecd\u7136\u4e3a\u521d\u59cb\u5316\u7684\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u65f6\uff0c\u65e0\u89e3\u3002\n\n\u56fe\u4e2d\u7ed9\u51fa\u7684\u84dd\u8272\u7684\u7535\u7ebf\u5c31\u662f\u6211\u4eec\u9700\u8981\u8fde\u4e0a\u7684\u3002\u5176\u5b83\u7684\u4f1a\u5728\u4ee3\u7801\u91cc\u6ce8\u91ca\u3002\u4e5f\u53ef\u4ee5\u7528\u7528\u4f18\u5148\u961f\u5217\u4f18\u5316 Dijkstra \u7b97\u6cd5\u3002\n\n## ACcode\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n\nusing namespace std;\n\nconst int maxn=2e3+55;\nconst int oo=2e9+55;\nint N,W;\ndouble M;\nstruct zb{\n\tdouble x,y;\n}z[maxn];\ndouble g[maxn][maxn],dis[maxn];\nbool vis[maxn];\n\n//\u8ba1\u7b97\u70b9\u4e0e\u70b9\u5728\u5750\u6807\u4e2d\u7684\u8ddd\u79bb \ndouble coordinate(zb x,zb y){\n\treturn sqrt((x.x-y.x)*(x.x-y.x)+(x.y-y.y)*(x.y-y.y));\n}\n\nsigned main(void){\n\t\n\tcin>>N>>W;\n\tcin>>M;\n\t\n\tfor(int i=1;i<=N;i++){\n\t\tcin>>z[i].x>>z[i].y;\n\t}\t\n\t\n\t//\u5efa\u56fe\u521d\u59cb\u5316 \n\tfor(int i=1;i<=N;i++){\n\t\tfor(int j=1;j<=N;j++){\n\t\t\tg[i][j]=coordinate(z[i],z[j]);\n\t\t}\n\t}\n\t\n\tfor(int i=1;i<=W;i++){\n\t\tint x,y;\n\t\tcin>>x>>y;\n\t\tg[x][y]=g[y][x]=0;\n\t}\n\t\n\t//\u7b54\u6848\u6570\u7ec4\u521d\u59cb\u5316 \n\tfor(int i=1;i<=maxn;i++){\n\t\tdis[i]=oo;\n\t}\n\t\n\t//Dijkstra \n\tdis[1]=0;\n\tfor(int i=1;i<=N;i++){\n\t\tint tmp=oo,id;\n\t\tfor(int j=1;j<=N;j++){\n\t\t\tif(vis[j]==0 && dis[j]<tmp){\n\t\t\t\ttmp=dis[j];\n\t\t\t\tid=j;\n\t\t\t}\n\t\t}\n\t\tvis[id]=1;\n\t\tfor(int j=1;j<=N;j++){\n\t\t\tif(dis[j]>dis[id]+g[id][j] && g[id][j]<M && j!=id){\n\t\t\t\tdis[j]=dis[id]+g[id][j];\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif(dis[N]==oo){\n\t\tprintf(\"-1\\n\");\n\t} else {\n\t\tcout<<(int)(dis[N]*1000)<<endl;\n\t}\n\t\n\treturn 0;\n}\n```\n",
        "postTime": 1673706400,
        "uid": 370648,
        "name": "\u67e0\u6aac\u5e03\u4e01\u5416",
        "ccfLevel": 0,
        "title": "P2914 [USACO08OCT]Power Failure G\u9898\u89e3"
    },
    {
        "content": "USACO\u7684\uff08\u51e0\u4e4e\u662f\uff09\u6700\u77ed\u8def\u6a21\u677f\u9898\u3002\n\n\u7a0d\u5fae\u52a0\u4e86\u4e00\u70b9\u8ba1\u7b97\u51e0\u4f55\u548c\u5c0f\u6280\u5de7\u3002\n\n## \u9898\u610f\n\n>  \u5e73\u9762\u4e2d\u6709 $n$ \u4e2a\u70b9\uff0c\u6709 $m$ \u6761\u7ebf\u6bb5\u8fde\u63a5\u7740\u5b83\u4eec\u3002\u6c42\u81f3\u5c11\u8981\u8fde\u63a5\u591a\u5c11\u957f\u5ea6\u7684\u7ebf\u6bb5\uff0c\u4f7f\u5f97\u70b9 $1$ \u548c\u70b9 $n$ \u8fde\u901a\u3002\n\n## \u505a\u6cd5\n\n\u9996\u5148\u6211\u4eec\u9700\u8981\u77e5\u9053\u4e00\u4e2a\u7b80\u5355\u7684\u77e5\u8bc6\uff1a\n\n\u5bf9\u4e8e\u5e73\u9762\u4e2d\u7684\u4e24\u70b9 $A(x_1,y_1),\\;B(x_2,y_2)$ \uff0c\u6709 $\\overline{AB}=\\sqrt{(x_1-x_2)^2+(y_1-y_2)^2}$\u3002\n\n\u77e5\u9053\u4e86\u8fd9\u4e2a\uff0c\u5c31\u53ef\u4ee5\u8003\u8651\u4e24\u70b9\u95f4\u7684\u8ddd\u79bb\u4e86\u3002\n\n\u5982\u679c\u4e24\u70b9\u95f4\u5df2\u6709\u7ebf\u6bb5\uff0c\u90a3\u4e48\u5f00\u59cb\u65f6\u8003\u8651\u628a\u5b83\u4eec\u4e4b\u95f4\u7684\u8ddd\u79bb\u8bbe\u4e3a $0$ \uff0c\n\n\u5426\u5219\u5c31\u662f\u4e24\u70b9\u95f4\u7684\u8ddd\u79bb\u3002\u5982\u679c\u5927\u4e8e $m$ \uff0c\u5c31\u662f INF\uff08\u56e0\u4e3a\u4e0d\u53ef\u8fbe\uff09\u3002\n\n\u7136\u540e\u8dd1\u4e00\u904d\u5355\u6e90\u6700\u77ed\u8def\u5c31\u597d\u4e86\u3002\n\n\uff08\u7531\u4e8e $n\\le 1000$ \uff0c\u6240\u4ee5\u5373\u4f7f\u4e0d\u52a0\u4f18\u5316\u7684 $\\text{Dijkstra}$ \u4e5f\u662f\u53ef\u4ee5\u8fc7\u7684\uff09\n\n## \u4ee3\u7801\n\n```c++\n//P2914 AC Code\n//written by Loster_King(159686)\n//124ms /  8.26MB /  976B C++ O2\n#include<bits/stdc++.h>\n#define inf 1000000000.0\nusing namespace std;\nint const N=2333;\nint n,w,x[N],y[N],vis[N],ans;\ndouble m,f[N][N],d[N];\ndouble dis(int i,int j){\n    return sqrt(1.0*(x[i]-x[j])*(x[i]-x[j])+1.0*(y[i]-y[j])*(y[i]-y[j]));\n    //\u6ce8\u610f\u8981\u4e581.0\uff0c\u56e0\u4e3ax\u548cy\u8fd9\u6837\u76f8\u4e58\u53ef\u80fd\u4f1a\u7206int\uff0c\u6240\u4ee5\u9700\u8981\u5148\u8f6c\u6210\u6d6e\u70b9\u578b\n}\nint main(){\n    scanf(\"%d%d%lf\",&n,&w,&m);\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=n;j++)f[i][j]=inf;//\u521d\u59cb\u5316\n    for(int i=1;i<=n;i++)scanf(\"%d%d\",&x[i],&y[i]);\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=n;j++){\n            double k=dis(i,j);\n            if(k<m)f[i][j]=k;//\u5224\u65ad\u5927\u4e8e\u8fd8\u662f\u5c0f\u4e8em\n        }\n    for(int i=1;i<=w;i++){\n        int a,b;\n        scanf(\"%d%d\",&a,&b);\n        f[a][b]=f[b][a]=0;//\u6709\u7ebf\u6bb5\uff0c\u8ddd\u79bb0\n    }\n    for(int i=2;i<=n;i++)d[i]=inf;\n    for(int i=1;i<=n;i++){\n        int k=0;\n        for(int j=1;j<=n;j++)if(!vis[j]&&(!k||d[k]>d[j]))k=j;\n        vis[k]=1;\n        for(int j=1;j<=n;j++)if(!vis[j]&&d[j]>d[k]+f[k][j])d[j]=d[k]+f[k][j];\n    }//dijkstra\n    if(d[n]==inf)puts(\"-1\");else printf(\"%d\",int(d[n]*1000));//\u6ce8\u610f\u7b54\u6848\u8981\u4e581000\u53d6\u6574\n}\n```\n\n",
        "postTime": 1602162973,
        "uid": 159686,
        "name": "Loser_King",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2914 \u3010[USACO08OCT]Power Failure G\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5176\u5b9e\u5c31\u662f\u6700\u77ed\u8def\uff0c\u628a\u4e2d\u95f4\u6709\u8fde\u7ebf\u7684\u7535\u7ebf\u6746\u4e4b\u95f4\u7684\u8ddd\u79bb\u8bbe\u4e3a\u96f6\uff0c\u5f00\u5934\u5148\u6c42\u4e00\u904d\u522b\u7684\u7535\u7ebf\u6746\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u7136\u540e\u7528Dijkstra\u5c31\u53ef\u4ee5\u5566\n\n\u9644\u4e0a\u4f2a\u4ee3\u7801\uff1a\n\n```cpp\n    for(int i=2;i<=n;i++)l[i]=-1;\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            ch[i][j]=hypot(x[i]-x[j],y[i]-y[j]);//\u8fd9\u662f\u4e00\u4e2a\u6c42\u76f4\u89d2\u4e09\u89d2\u5f62\u659c\u8fb9\u957f\u7684\u51fd\u6570\uff0c\u5b9a\u4e49\u5728\u5934\u6587\u4ef6cmath\u4e2d\uff0c\u4e00\u5b9a\u5f97\u7528\u8fd9\u4e2a\uff0c\u7528sqrt\u6c42\u5c31\u4f1a\u70b8\n        }\n    }\n    for(int i=1;i<=w;i++)scanf(\"%d%d\",&pi,&pj),ch[pi][pj]=ch[pj][pi]=0;\n    while(flag[n]==0)\n    {\n        int z=-1;\n        for(int i=1;i<=n;i++)\n        {\n            if(flag[i]==0 && l[i]>=0 &&  (z<0 || l[i]<l[z]))z=i;\n        }\n        if(z==-1){printf(\"-1\\n\");return 0;}\n        flag[z]=1;\n        for(int i=1;i<=n;i++)\n        {\n            if(flag[i]==0 &&  ch[z][i]<=m && (l[i]<0 || l[z]+ch[z][i]<l[i]))l[i]=l[z]+ch[z][i];\n        }\n}\n```",
        "postTime": 1475811448,
        "uid": 22474,
        "name": "2014\u6797\u76db\u660a",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2914 \u3010[USACO08OCT]\u65ad\u7535Power Failure\u3011"
    },
    {
        "content": "\u5f88\u660e\u663e\u8fd9\u662f\u4e00\u9053\u6700\u77ed\u8def\u5f97\u9898\u76ee\u3002\n\n\u9898\u76ee\u5927\u610f\uff1a\u7ed9\u4f60\u4e00\u4e9b\u70b9\uff0c\u5176\u4e2d\u6709\u4e9b\u70b9\u4e4b\u95f4\u5df2\u7ecf\u6709\u4e86\u7535\u7ebf\uff0c\u6c42\u4ece\u70b91\u5230\u70b9n\u6700\u5c11\u8981\u5efa\u591a\u5c11\u957f\u5ea6\u7684\u7535\u7ebf\u3002\u8f93\u51fa\u6700\u4f18\u89e3\u7b54\u6848*1000\u518d\u5411\u4e0b\u53d6\u6574\u3002\n\n\u5bf9\u4e8e\u90a3\u4e9b\u5df2\u8fd1\u6709\u7535\u7ebf\u7684\u70b9\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06\u4e24\u70b9\u8ddd\u79bb\u521d\u59cb\u5316\u4e3a0,\u7136\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u8dd1\u6700\u77ed\u8def\u4e86\uff0c\u6211\u7528\u7684\u7b97\u6cd5\u662f\u8fea\u6770\u65af\u7279\u62c9\uff0c\u7b97\u6cd5\u6548\u7387$O(n^2)$\n\n\u5177\u4f53\u770b\u4ee3\u7801\u6ce8\u91ca\n\n# \u4ee3\u7801:\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstruct oi{\n\tdouble x,y;\n}a[100001];\nint n,w;\ndouble m;\ndouble calc_dis(oi x,oi y){//\u8ba1\u7b97\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\n\treturn sqrt((x.x-y.x)*(x.x-y.x)+(x.y-y.y)*(x.y-y.y));\n}\n\ndouble mp[1001][1001];//\u8bb0\u5f55\u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u7684\u6570\u7ec4\ndouble dis[1001];//\u7528\u4e86\u8dd1\u6700\u77ed\u8def\u5f97\u6570\u7ec4\nint vis[1001];\nint main(){\n\tcin>>n>>w;\n\tcin>>m;\t\n\tfor(int i=1; i<=n; i++) {//\u8bfb\u5165\u70b9\u7684\u5750\u6807\n\t\tcin>>a[i].x>>a[i].y;\n\t}\n\tfor(int i=1; i<=n; i++){//\u521d\u59cb\u5316\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\n\t\tfor(int j=1; j<=n; j++){\n\t\t\tmp[i][j]=calc_dis(a[i],a[j]);\n\t\t}\n\t}\n\tfor(int i=1; i<=w; i++){//\u4e24\u70b9\u4e4b\u95f4\u6709\u7535\u7ebf\u7684\u5e97\uff0c\u5c06\u8ddd\u79bb\u521d\u59cb\u5316\u4e3a0\n\t\tint x,y;\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tmp[x][y]=mp[y][x]=0;\n\t}\n\tfor(int i=1; i<=1000; i++) dis[i]=2e9;//\u8fea\u6770\u65af\u7279\u62c9\u7684\u521d\u59cb\u5316\n\tdis[1]=0;//\u56e0\u4e3a\u6c42\u5f97\u662f1~n\u5f97\u6700\u77ed\u8def\u5f84\uff0c\u6240\u4ee5\u5c06dis[1]\u8bbe\u7f6e\u4e3a0\n\tfor(int i=1; i<=n; i++){\n\t\tint v;\n\t\tdouble cnt=2e9;\n\t\tfor(int j=1; j<=n; j++){//\u627e\u5230\u5f53\u524d\u8ddd\u79bb\u6700\u5c0f\u7684\u70b9\n\t\t\tif(vis[j]==0) {\n\t\t\t\tif(dis[j]<cnt){\n\t\t\t\t\tcnt=dis[j];\n\t\t\t\t\tv=j;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvis[v]=1;\n\t\tfor(int j=1; j<=n; j++){\n\t\t\tif(mp[v][j]<m&&j!=v){//\u5982\u679c\u7535\u7ebf\u5efa\u9020\u7684\u957f\u5ea6\u6bd4m\u5c0f\u624d\u80fd\u8fdb\u884c\u677e\u5f1b\n\t\t\t\tdis[j]=min(dis[j],dis[v]+mp[v][j]);\n\t\t\t}\n\t\t}\n\t}\n\tif(dis[n]==2e9) cout<<-1<<endl;//\u7279\u6b8a\u60c5\u51b5\uff0c\u5982\u679c\u65e0\u8bba\u5982\u4f55\u90fd\u65e0\u6cd5\u4ece1\u8d70\u5230n\u5c31\u6309\u7167\u9898\u610f\u8f93\u51fa-1\n\telse printf(\"%d\\n\",(int)(dis[n]*1000));//\u6309\u9898\u610f\u8f93\u51fa\u7b54\u6848\n\treturn 0;\n}\n```",
        "postTime": 1595211970,
        "uid": 175011,
        "name": "rfsfreffr",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2914 \u3010[USACO08OCT]Power Failure G\u3011"
    }
]
[
    {
        "content": "    \u679a\u4e3e\uff0b\u641c\u7d22+\u4f4d\u8fd0\u7b97\u3002\n \u5982\u679c\u4ece\u4e0a\u5f80\u4e0b\u9010\u5c42\u7ffb\u8f6c\u68cb\u5b50\u7684\u8bdd\uff0c\u5f53\u524d\u4e00\u5c42\u5fc5\u987b\u8981\u4fee\u590d\u4e0a\u4e00\u5c42\u7684\u4e0d\u7b26\u5408\u76ee\u6807\u72b6\u6001\u7684\u68cb\u5b50\uff0c\u6362\u53e5\u8bdd\u8bf4\uff1a\u5f53\u7b2c\u4e00\u884c\u7684\u64cd\u4f5c\u65b9\u5f0f\u5373\u64cd\u4f5c\u540e\u7684\u72b6\u6001\u5df2\u7ecf\u786e\u5b9a\u540e\uff0c\u4e0b\u4e00\u5c42\u7684\u64cd\u4f5c\u65b9\u5f0f\u4e5f\u5c31\u552f\u4e00\u786e\u5b9a\u4e86\uff0c\u6240\u4ee5\u53ea\u9700\u679a\u4e3e\u51fa\u7b2c\u4e00\u884c\u7684\u6240\u6709\u53ef\u80fd\u72b6\u6001\u5373\u53ef\u9010\u884c\u5f80\u4e0b\u7ffb\u8f6c\u64cd\u4f5c\u7c7b\u63a8\u51fa\u7ed3\u679c\uff08\u5206\u4e24\u6b21\u7c7b\u63a8\uff0c\u4e00\u6b21\u662f\u7c7b\u63a8\u51fa\u5168\u90e8\u68cb\u5b50\u767d\u8272\u5411\u4e0a\u7684\u76ee\u6807\u72b6\u6001\uff0c\u4e00\u6b21\u662f\u7c7b\u63a8\u51fa\u5168\u90e8\u68cb\u5b50\u9ed1\u8272\u5411\u4e0a\u7684\u76ee\u6807\u72b6\u6001\uff09\u3002\n\u5173\u952e\u4ee3\u7801\u6ce8\u91ca\u5df2\u6709\uff0c\u5c31\u4e0d\u7ec6\u8bf4\u4e86\u3002\n\n```cpp\n\n\n\n#include<bits/stdc++.h>\nusing namespace std;\n\nint Map[20][20];\nint n,ans =(1<<31)-1;\n\nvoid Flip(int x,int y)\n{\n  Map[x-1][y] ^= 1;\n  Map[x][y-1] ^= 1;\n  Map[x][y] ^= 1;\n  Map[x][y+1] ^= 1;\n  Map[x+1][y] ^= 1;\n}\n\nvoid Dfs(int row,int step,int value)\n{\n  if(row == n+1)\n  {\n    for(int i = 1; i <= n; i++)\n      if(Map[n][i]==value)          //\u82e5\u4e0d\u7b26\u5408\uff0c\u9000\u51fa\n        return;\n    ans=step<ans?step:ans;          //\u7b26\u5408\u5219\u66f4\u65b0\u7b54\u6848\n    return;\n  }\n  int v = 0;\n  for(int i = 1; i <= n; i++)\n    if(Map[row-1][i]==value)        //\u4e0a\u4e00\u5c42\u7684\u67d0\u68cb\u5b50\u4e0d\u662f\u76ee\u6807\u72b6\u6001\uff0c\u5219\u7ffb\u8f6c\n    {\n      step++;\n      Flip(row,i);                  //\u7ffb\u8f6c\u5f53\u524d\u5c42\u4ee5\u6539\u53d8\u4e0a\u4e00\u5c42\u7684\u68cb\u5b50\n      v |= 1<<(i-1);                //\u8bb0\u5f55\u7ffb\u8f6c\u7684\u4f4d\u7f6e\n    }\n  Dfs(row+1,step,value);\n  for(int i = 1; i <= n; i++)       //\u8fd8\u539f\n    if((v>>(i-1))&1)\n      Flip(row,i);\n}\n\nint main()\n{\n  cin >> n;\n  char ch;\n  for(int i = 1; i <= n; i++)\n    for(int j = 1; j <= n; j++)\n    {\n      cin >> ch;\n      Map[i][j] =(ch=='b');\n    }\n  for(int k = 0; k <(1<<n); k++)\n  {\n    for(int i = 1; i <= n; i++)     //\u679a\u4e3e\u51fa\u7b2c0\u884c(\u4e0d\u5b58\u5728\u7684\u884c)\u7684\u6240\u6709\u72b6\u6001\n      Map[0][i]=(k>>(i-1))&1?1:0;\n    Dfs(1,0,0);                     //\u4ece\u7b2c1\u884c\u5f00\u59cb\uff0c\u641c\u7d22\u80fd\u4e0d\u80fd\u627e\u5230\u5168\u4e3a1\u7684\u72b6\u6001\n    Dfs(1,0,1);                     //\u4ece\u7b2c1\u884c\u5f00\u59cb\uff0c\u641c\u7d22\u80fd\u4e0d\u80fd\u627e\u5230\u5168\u4e3a0\u7684\u72b6\u6001\n  }\n  if(ans!=(1<<31)-1)\n    cout<<ans<<endl;\n  else\n    cout<<\"Impossible\"<<endl;\n  return 0;\n}\n```\n",
        "postTime": 1574779920,
        "uid": 34573,
        "name": "razx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "### 0.\u76f8\u5173\u94fe\u63a5\n\n[Flip Game](http://poj.org/problem?id=1753)\uff084 * 4\u539f\u7248\uff09\n\n[Flip  Game \u52a0\u5f3a\u7248](https://www.luogu.org/problem/P1764)\uff0816 * 16\u7248\uff09\n\n### 1.\u8bfb\u9898\n\n\u7ed9\u60a8\u8fd9\u4e48\u4e00\u4e2a\u68cb\u76d8\uff084 * 4 ~ 16 * 16\uff09\uff0c\u4e0a\u9762\u653e\u7740\u9ed1\u767d\u68cb\n\n![](https://s2.ax1x.com/2019/08/20/m8rZSU.png)\n\n\u60a8\u53ef\u4ee5\u8fdb\u884c\u7684\u64cd\u4f5c\u662f\uff1a\n\n\u7ffb\u8f6c\u4e00\u4e2a\u68cb\u5b50\uff0c\u4f46\u540c\u65f6\u4f1a\u4f7f\u5176\u4e0a\u4e0b\u5de6\u53f3\u56db\u4e2a\u68cb\u5b50\u4e00\u8d77\u7ffb\u8f6c\n\n![](https://s2.ax1x.com/2019/08/20/m8rEWT.png)\n\n\u6c42\u5c06\u5176\u5168\u53d8\u767d\u6216\u5168\u53d8\u9ed1\u6700\u5c11\u9700\u8981\u51e0\u6b21\u64cd\u4f5c\n\n### 2.\u89e3\u9898\n\n30 pts\n\n4 * 4,\u4e00\u5171\u6709 2^16\uff0865536\uff09\u79cd\u64cd\u4f5c\uff0c\u4e8c\u8fdb\u5236\u679a\u4e3e\uff0c\u904d\u5386\u4e00\u904d\uff0c\u7ef0\u7ef0\u6709\u4f59\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(2^N);\n\n100 pts\n\n5 * 5\u65f6\uff0cO(2^N)\u7a0b\u5e8f\u77ac\u95f4\u7206\u70b8\uff0c\u56e0\u4e3a 2^25 = 33,554,432;\n\n\n\u4e8e\u662f\u6211\u4eec\u60f3\u5230\uff0c\u8981\u628a\u65f6\u95f4\u590d\u6742\u5ea6\u538b\u5230**O(2^16)**\n\n**\u800cN\u6700\u5927\u4e3a16\uff01\uff01\uff01**\n\n**\u8fd9\u4e0d\u662f\u5de7\u5408\uff01\uff01**\n\n\u90a3\u4e48\uff0c\u5c31\u53ea\u80fd\u679a\u4e3e **\u4e00\u884c** \u6216 **\u4e00\u5217** \u4e86\n\n\u6211\u4eec\u5c31\u5f00\u59cb\u60f3\uff0c\n\n\u679a\u4e3e\u4e00\u884c\u5982\u4f55\u4ee3\u8868\u5168\u56fe\u7684\u64cd\u4f5c\u5462\uff1f\n\n\u53ea\u80fd\u662f\u8fd9\u4e00\u884c\u7684\u72b6\u6001**\u51b3\u5b9a**\u5168\u56fe\u5176\u4ed6\u64cd\u4f5c\uff01\uff01\n\n\u53ef\u4ee5\u60f3\u5230\uff0c\u8fd9\u4e00\u884c\u7edd\u5bf9\u5f88\u7279\u6b8a\n\n\u90a3\u4e9b\u884c\u548c\u5217\u7279\u6b8a\u5462\uff1f\n\n\u81ea\u7136\u662f\uff1a**\u7b2c\u4e00\u548c\u7b2cN**\n\n\u5b83\u4eec\u53ea\u5f71\u54cd\u4e00\u884c\uff0c\u4e5f\u53ea\u88ab\u4e00\u884c\u5f71\u54cd\n\n**\u56e0\u6b64\uff0c\u8fd9\u4e00\u884c\u7684\u72b6\u6001\u786e\u5b9a\u540e\uff0c\u5176\u4f59\u64cd\u4f5c\u4e3a\u4fdd\u8bc1\u5176\u6b63\u786e\u6027\uff0c\u4e5f\u4e0d\u5f97\u4e0d\u786e\u5b9a**\n\n\u5982\u56fe\n\n![](https://s2.ax1x.com/2019/08/20/m8relF.png)\n\n\u7531\u4e8e\u4ee5 \u7b2c\u4e00\u884c \u4e3a \u7279\u6b8a\u884c \u6700\u7b26\u5408\u6b63\u5e38\u601d\u7ef4\uff0c\u6211\u4eec\u9009\u7528\u7b2c\u4e00\u884c\n\n### 3.\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<stdio.h>\n#include<cstdlib>\n#include<cstring>\n#include<cmath>\n#include<iostream>\n#include<algorithm>\n#include<queue>\t\t\t\t\t\t//\u61d2\u4eba\u7f3a\u7701\u6e90 \n\n#define INF 10000\n#define MAXN 16\n#define MAXD 4 \nusing namespace std;\t\t\t\t//\u8b66\u544a\uff0c\u4e0d\u52a0\u8fd9\u884c\u7206\u96f6\uff01 \n\nbool mp[MAXN+5][MAXN+5];        \t//\u539f\u77e9\u9635 \nbool next_mp[MAXN+5][MAXN+5];\t\t//\u53cd\u8f6c\u540e\u7684\u77e9\u9635   \n\nint dx[MAXD]={0,0,1,-1}, \n\tdy[MAXD]={1,-1,0,0};\t\t\t//\u4e8c\u6b21\u5143\uff08\u5927\u96fe\uff09\u4f4d\u79fb \n\nint n; \nint ans=INF;\t\t\t\t\t \n\nchar str[16];\nint input(){ \n\tscanf(\"%d\",&n);\n\tfor(int i=0;i<n;i++){\n\t\tscanf(\"%s\",str);\n\t\tfor(int j=0;j<n;j++){\n\t\t\tnext_mp[i][j]=mp[i][j]=(str[j]=='b');\t\t\n            //\u628a \u5b57\u7b26\u4e32 \u8f6c\u6362\u4e3a bool \u77e9\u9635 \n\t\t}\n\t}\n} \n\ninline bool inarea(int x,int y){\n\treturn (x>=0&&x<n&&y>=0&&y<n);//\u8fd9\u91cc\u53ef\u4ee5\u6539\u4e3a\u5b8f\u5b9a\u4e49\uff0c\u66f4\u5feb \n} \n\nvoid turn(int x,int y,bool o){//\u7ffb\u8f6c\uff0c\u64cd\u4f5c\u6838\u5fc3 \uff08xy:\u5750\u6807\uff0co:\u662f\u5426\u53cd\u8f6c\uff09 \n\tif(!o)\t\t\t\t\t\t\t\t\t\t\t\n\t\treturn;\n\t\t \n\tint nx,ny;\t\t\t\t\t\t\t\t\t\t\t \n\tnext_mp[x][y]=!next_mp[x][y];\n\tfor(int i=0;i<MAXD;i++){\n\t\tnx=x+dx[i];\t\t\t\t\t\t//\u56db\u5411\u4f4d\u79fb\uff08\u5927\u79e7\u6b4c\uff09 \n\t\tny=y+dy[i];\n\t\tif(inarea(nx,ny)){\t\t\t\t\n\t\t\tnext_mp[nx][ny]=!next_mp[nx][ny];\n\t\t}\n\t}\n}\n\nbool check(bool order){\t\t//\u5224\u65ad\u6b63\u8bef \n\tfor(int i=0;i<n;i++){\t\t\t\t\t\t\t\n\t\tif(next_mp[n-1][i]==!order){\n        \t\t\t\t//\u53ea\u9700\u68c0\u67e5 \u6700\u540e\u4e00\u884c \u7684\u5143\u7d20\u5c31\u53ef\u4ee5\u4e86 \n\t\t\treturn 0;\t//\u56e0\u4e3a \u8f6c\u6362 \u4ee5\u4e0d\u8fdd\u80cc\u4e0a\u9762\u7684 \u6b63\u786e\u6027 \u4e3a\u524d\u63d0 \n\t\t}\n\t}\n\treturn 1;\n}\n\nvoid init(){\t\t\t\t//\u867d\u7136\u9891\u7e41\u4f7f\u7528\uff0c\u4f46\u662f\u4e0d\u5efa\u8bae\u52a0inline\uff0c\n\tfor(int i=0;i<n;i++)\t// ccf\u8001\u7237\u673a\u4e0a\u7684\u53e4\u8463G++\u6709\u53ef\u80fd\u51fa\u9519 QAQ \n\t\tfor(int j=0;j<n;j++)\n\t\t\tnext_mp[i][j]=mp[i][j];\n}\n\nvoid work(int x,bool order){\n\tinit();\t\t\t\t\t//\u628a mp \u590d\u5236\u8fdb next_mp \n\tint cnt=0,now=0;\t\t//cnt \u662f \u6b65\u6570\uff0cnow \u662f \u6a2a\u5750\u6807 \n\tfor(int i=0;i<n;i++){\t//\u5904\u7406\u7b2c \u4e00 \u884c \n\t\tif(x&1)\tcnt++;\t\t//\u6309\u4f4d\u5206\u89e3\u4e8c\u8fdb\u5236\u6570\uff081\u5219\u4e3a\u7ffb\uff0c\u5426\u5219\u53cd\u4e4b\uff09 \n\t\t\n\t\tturn(0,now,(x&1))//now \u4ece 0 \u5230 n-1  \u548c  \u4ece n-1 \u5230 0 \u5e76\u4e0d\u91cd\u8981 \n\t\t \t\t//\u56e0\u4e3a  0000~1111  \u4f1a\u628a  o \u548c ~o \u90fd\u904d\u5386\u4e00\u904d \n\t\tx>>=1;\t\t\t\t\t\t\t\t\t\t\t \n\t\tnow++;\t\t\t\t\t\t\t\t\t\t\t\n\t}\n\t\n\tfor(int i=1;i<n;i++){\n\t\tfor(int j=0;j<n;j++){\n\t\t\tcnt+=(next_mp[i-1][j]==!order);\t\t\t\t\n\t\t\tturn(i,j,(next_mp[i-1][j]==!order));\n            //\u5982\u679c\u4e0a\u4e00\u884c\u5408order\u76f8\u540c\uff0c\u5219\u7ffb\u8f6c\uff0c\u5426\u5219\u53cd\u4e4b \n\t\t}\n\t}\n\t\n\tif(check(order)){\n\t\tif(cnt<ans)\n\t\t\tans=cnt;\t\t\t\t//ans \u7684 \u64c2\u53f0 \n\t}\n\t\t\n}\n\ninline void output(){\n\tif(ans==INF)\n\t\tprintf(\"Impossible\\n\");\n\telse \n\t\tprintf(\"%d\\n\",ans);\n} \n\nint main(){\n\tinput();\n\tfor(int i=0;i<1<<n;i++){//\u4e8c\u8fdb\u5236\u679a\u4e3e \uff08\u7075\u9b42\uff09 \u4ece 0000\u2026\u2026\u5230 111\u2026\u2026\n\t\twork(i,0);\t\t\t//\u5168\u662f 0   \uff08 w\uff09 \n\t\twork(i,1);\t\t\t//\u5168\u662f 1 \t( b)\n\t} \n\toutput();\n\treturn 0;\t\t\t\t//\u543c\u897f\u74dc\u554a \n}\n\n```\n\u849f\u84bb\u6c42\u901a\u8fc7QwQ",
        "postTime": 1566233785,
        "uid": 112898,
        "name": "\u5fa1\u524d\u5e26\u5200\u4f8d\u536b",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "\u6765\u4e00\u7bc7\u501f\u9274\u4e86\u697c\u4e0b\u7684\u9898\u89e3\n\n\u4eca\u5929\u8003\u8bd5\u7684\u65f6\u5019\u505a\u4e86\u4e00\u9053\u9609\u5272\u7248\u7684\u7ffb\u8f6c\u6e38\u620f(n==4\u9650\u5b9a)\n\n\u8003\u8bd5\u7684\u65f6\u5019A\u7684\u65b9\u6cd5\u662f\u5148\u628a\u5730\u56fe\u8bbe\u5b9a\u4e3a\u5168black\u7136\u540en^(4*4)\u679a\u4e3e\n\n\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\u6765\u53bb\u91cd\uff0c\u76f8\u5f53\u4e8e\u4e00\u4e2abfs\uff0c\u5e94\u8be5\u80fd\u8fc7\u8fd9\u9053\u9898\u4e00\u534a\n\n\u7136\u540e\u767e\u601d\u4e0d\u5f97\u5176\u89e3\u65f6\u770b\u4e86\u697c\u4e0b\u7684\u9898\u89e3\n\n\u60f3\u8d77\u6765\u4ee5\u524d\u6709\u4e00\u9053\u9898\u5c31\u662f\u5f00\u5173\u706f\u5427\u4e00\u6b21\u6027\u53ea\u80fd\u8fde\u7eed\u5f00\u51733\u4e2a\n\n\u8fd9\u9053\u9898\u601d\u8def\u57fa\u672c\u4e00\u6837\n\n\u9274\u4e8e\u697c\u4e0b\u6ca1\u6709\u53d1\u5e03\u8be6\u7ec6\u601d\u8def\u89e3\u91ca\uff0c\u4e3a\u4e86\u65b9\u4fbf\u5927\u5bb6\u4e3e\u4e00\u53cd\u4e09\n\n\u6709\u4e86\u6b64\u9898\u89e3\n\n\u8fdb\u5165\u6b63\u9898\n\nq.\u4e3a\u4ec0\u4e48\u8981\u5148\u6700\u57fa\u672c\u7684\u66b4\u529b\u51fa\u7b2c\u4e00\u6392\u5bf9\u7684\u72b6\u6001\u5462\n\na.\u4fd7\u8bdd\u8bf4\u4e07\u4e8b\u5f00\u5934\u96be\uff0c\u56e0\u4e3a\u7b2c\u4e00\u6392\u7684\u4efb\u610f\u4e00\u4e2a\u65b9\u5757\u8981\u7ffb\u8f6c\u53ea\u80fd\u4ee5\u6765\u5468\u56f4\u56db\u5757\u548c\u81ea\u5df1\u5171\u4e94\u5757\uff0c\u7b2c\u4e00\u6392\u6ca1\u6709\u4e0a\u5bb6\uff0c\u540c\u884c\u7684\u72b6\u6001\u88ab\u679a\u4e3e\u5b8c\u4e86\uff0c\u80fd\u5f71\u54cd\u81ea\u5df1\u7684\u5c31\u53ea\u6709\u4e0b\u5bb6\uff0c\u4e8e\u662f\u5728\u9010\u884c\u679a\u4e3e\u65f6\uff0c\u5982\u679c\u4e0a\u5bb6\u51fa\u73b0\u4e0d\u540c\u989c\u8272\u5219\u5fc5\u987b\u8fde\u5750\u8f6c\u52a8\uff0c\u521d\u6b64\u4e4b\u5916\u518d\u65e0\u4ed6\u6cd5\uff0c\u8fd9\u6837\u5c31\u5de7\u5999\u5730\u628a\u72b6\u6001\u903c\u5230\u4e86\u5fc5\u987b\u7684\u5883\u754c\n\n\u76f8\u4fe1\u806a\u660e\u7684\u4f60\u4e00\u5b9a\u6709\u6240\u542f\u53d1\uff0c\u8fd9\u4e5f\u662f\u8fd9\u9053\u9898\u7684\u5173\u952e\u6240\u5728\n\n\u7c98\u4ee3\u7801\uff0c\u4e60\u60ef\u4e0d\u8bbe\u5361\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint n;\nchar hehe[16][16];\nint o[16][16];\n\nint get_w(int target){\n    int inreturn=999999999;\n    int up=1<<n;\n    for(int i=0;i<up;i++){\n        int step=0;\n        int cur[16][16];\n        for(int x=0;x<16;x++)for(int y=0;y<16;y++) cur[x][y]=o[x][y]; \n        for(int j=0;j<n;j++){\n            if(i&(1<<j)) continue;\n            cur[0][j]=1-cur[0][j];\n            if(j-1>=0) cur[0][j-1]=1-cur[0][j-1];\n            if(j+1<n) cur[0][j+1]=1-cur[0][j+1];\n            cur[1][j]=1-cur[1][j];\n            step++;\n        }\n        for(int x=1;x<n;x++){\n            for(int y=0;y<n;y++){\n                if(cur[x-1][y]!=target){\n                    step++;\n                    cur[x-1][y]=1-cur[x-1][y];\n                    cur[x][y]=1-cur[x][y];\n                \tif(y-1>=0) cur[x][y-1]=1-cur[x][y-1];\n                    if(y+1<n) cur[x][y+1]=1-cur[x][y+1];\t\n                    if(x+1<n) cur[x+1][y]=1-cur[x+1][y];\t\t\t\n                }\n            }\n        }\n        int ok=1;\n        for(int u=0;u<n;u++){\n            if(cur[n-1][u]!=target){\n                ok=0;\n                break;\n            }\n        }\n        if(ok){\n            inreturn=min(inreturn,step);\n        }\n    }\n    return inreturn;\n}\n\nint main(){\n    scanf(\"%d\",&n);\n    for(int i=0;i<n;i++) scanf(\"%s\",hehe[i]);\n    for(int i=0;i<n;i++) for(int j=0;j<n;j++){\n        if(hehe[i][j]=='b') o[i][j]=1;\n        else o[i][j]=0;\n    }\n    int ans=min(get_w(1),get_w(0));\n    if(ans==999999999) printf(\"Impossible\");\n    else printf(\"%d\",ans);\n    return 0;\n}\n```\n\u53e6\u5916\u6280\u5de7\uff1a\u4e8c\u8fdb\u5236\u81ea\u5df1\u751f\u6210\uff0c\u8fd9\u4e2a\u95ee\u5468\u56f4\u540c\u5b66\u5566\n\n",
        "postTime": 1519390098,
        "uid": 47378,
        "name": "\u67cf\u6728\u7531\u7eaaAKB48",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "```cpp\n\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define maxn 0x3f3f3f3f\n\nusing namespace std;\n\nint n;\nchar hehe[20][20];\nint kkke[20][20];\n\nint solve(int aim)\n{\n    int kind=1<<n;\n    int ans=maxn;\n    for(int k=0;k<kind;k++)//\u641c\u7d22\u7b2c\u4e00\u5c42\u7684\u6240\u6709\u53ef\u80fd\u60c5\u51b5\n    {\n        int step=0;\n        for(int i=0;i<n;i++)//\u521d\u59cb\u5316\n        {\n            for(int j=0;j<n;j++)\n            {\n                if(hehe[i][j]=='b')kkke[i][j]=1;\n                else kkke[i][j]=0;\n            }\n        }\n        for(int i=0;i<n;i++)//\u6539\u53d8\u7b2c\u4e00\u5c42\u72b6\u6001\n        {\n            if(k&(1<<i))continue;\n            step++;\n            kkke[0][i]=1-kkke[0][i];\n            if(i>0)kkke[0][i-1]=1-kkke[0][i-1];\n            if(i<n-1)kkke[0][i+1]=1-kkke[0][i+1];\n            if(n>1)kkke[1][i]=1-kkke[1][i];\n        }\n        for(int i=1;i<n;i++)\n        {\n            for(int j=0;j<n;j++)\n            {\n                if(kkke[i-1][j]==aim)continue;//\u5982\u679c\u4e0a\u4e00\u5c42\u5bf9\u5e94\u4f4d\u7f6e\u4e0d\u662f\u76ee\u7684\u72b6\u6001\n                step++;//\u5219\u5c06\u5f53\u524d\u4f4d\u7f6e\u7ffb\u9762\n                kkke[i][j]=1-kkke[i][j];\n                kkke[i-1][j]=aim;\n                if(j>0)kkke[i][j-1]=1-kkke[i][j-1];\n                if(j<n-1)kkke[i][j+1]=1-kkke[i][j+1];\n                if(i<n-1)kkke[i+1][j]=1-kkke[i+1][j];\n            }\n        }\n        bool flag=true;\n        for(int i=0;i<n;i++)//\u5224\u65ad\u6700\u540e\u4e00\u5c42\u662f\u5426\u662f\u76ee\u7684\u72b6\u6001\n        {\n            if(kkke[n-1][i]!=aim)\n            {\n                flag=false;\n                break;\n            }\n        }\n        if(flag)\n        {\n            ans<?=step;//\u82e5\u6700\u540e\u4e00\u5c42\u6ee1\u8db3\u5219\u4e00\u5b9a\u5230\u8fbe\u76ee\u7684\u72b6\u6001\n        }\n    }\n    return ans;\n}\n\nint main()\n{\n    freopen(\"flip.in\",\"r\",stdin);\n    freopen(\"flip.out\",\"w\",stdout);\n    scanf(\"%d\",&n);\n    for(int i=0;i<n;i++)scanf(\"%s\",hehe[i]);\n    int ans=min(solve(1),solve(0));//\u641c\u7d22\u5168\u4e3a1\u6216\u5168\u4e3a0\u7684\u60c5\u51b5\n    if(ans==maxn)printf(\"Impossible\\n\");\n    else printf(\"%d\\n\",ans);\n    return 0;\n}\n\n```",
        "postTime": 1381559971,
        "uid": 294,
        "name": "kkke",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "## \u4e16\u4eba\u77e5\u6653inline\u597d,\u552f\u6709dfs\u5fd8\u4e0d\u4e86\n#### \u8bf4\u5b9e\u8bdd\u6211\u8fd9\u4e2a\u65b9\u6cd5\u8fc7\u8fd9\u4e2a\u9898\u5f88\u9669\uff08\u591a\u4e8finline\uff09\u554a\uff0c\u4e0b\u9762\u5927\u6982\u8bf4\u4e00\u4e0b\u601d\u8def:\n### 1.\u7ed3\u679c\u4e3a\u767d\u68cb\u5411\u4e0a\u6216\u9ed1\u68cb\u5411\u4e0a\uff0c\u6240\u4ee5\u50a8\u5b58\u4e24\u4e2a\u56femap\u548cmap1\u3002map\u50a8\u5b58\u6700\u7ec8\u7ed3\u679c\u4e3a\u767d\u68cb\u5411\u4e0a\uff0cmap1\u4e3a\u9ed1\u68cb\u5411\u4e0a\u3002\n### 2.dfs\u641c\u7d22\u4ece\u5de6\u5f80\u53f3\u641c\uff0c\u641c\u5230\u6700\u540e\u4e00\u5217\u5f80\u4e0b\u4e00\u884c\u641c\uff0c\u641c\u5230n+1\u884c\u8fdb\u884c\u5224\u65ad\u6700\u7ec8\u662f\u5426\u53ef\u884c\u3002\n### 3.\uff08\u6700\u91cd\u8981\u7684\u6b65\u9aa4\uff09\u5728\u641c\u7d22\u8fc7\u7a0b\u4e2d \u53ea\u9700\u5224\u65ad\u5f53\u524d\u5217\u7684\u4e0a\u4e00\u884c\u7684\u72b6\u6001\u662f\u5426\u53ef\u884c\u3002\u56e0\u4e3a\u7ffb\u8f6c\u4f4d\u7f6ei\uff0cj\u4f4d\u7f6e\u7684\u68cb\u5bf9\u4e0a\u4e00\u884c\u7684\u5f71\u54cd\uff0c\u53ea\u4f1a\u5f71\u54cd\u5230\u4f4d\u7f6e\u4e3ai-1\uff0cj\u7684\u68cb\u7684\u72b6\u6001\uff0c\u4e14\u5411\u540e\u641c\u65f6\u65e0\u8bba\u5982\u4f55\u4e5f\u4e0d\u4f1a\u6539\u53d8i-1\uff0cj\u7684\u72b6\u6001.\n\u4e0b\u9762\u7ed9\u51fa\u6211\u4e11\u964b\u7684\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<cstring>\n#include<queue>\nusing namespace std;\nint n;\nint map[20][20];\nint map1[20][20];\nint f[20][20];//f\u4e3amap\u7684\u72b6\u6001 f[i][j]\u8868\u793a i,j\u4f4d\u7f6e\u7684\u68cb\u7ffb\u8fd8\u662f\u4e0d\u7ffb 0\u4e3a\u4e0d\u7ffb 1\u4e3a\u7ffb\nint vis[20][20];//vis\u4e3amap1\u7684\u72b6\u6001 \u540c\u4e0a\nint ans=7777777;\nint ans1=7777777;//\u8fa3\u4e2a\u7537\u4eba\u7684\u6570\u5b57\ninline bool check(int i,int j)//inline\u5927\u6cd5\u597d\n{\n   if(i==0||j==0) return 0;\n   return (map[i][j]+f[i][j]+f[i-1][j]+f[i+1][j]+f[i][j-1]+f[i][j+1])%2;//i,j\u4f4d\u7f6e\u7684\u72b6\u6001\u4f1a\u53d7\u4ed6\u81ea\u5df1\u548c\u4ed6\u524d\u540e\u5de6\u53f3\u7ffb\u8f6c\u7684\u60c5\u51b5\u800c\u6539\u53d8\uff0c%2\u662f\u56e0\u4e3a\u6539\u53d8\u4e24\u6b21\u76f8\u7b49\u4e8e\u4e0d\u53d8\n}\ninline bool check1(int i,int j)//inline\u5927\u6cd5\u597d\n{\n\t if(i==0||j==0) return 0;\n     return (map1[i][j]+vis[i][j]+vis[i-1][j]+vis[i+1][j]+vis[i][j-1]+vis[i][j+1])%2;//\u540c\u4e0a\n}\nvoid dfs(int x,int y,int cnt)//map\u3002cnt\u4e3a\u6b65\u9aa4\n{ \n   if(cnt>=ans)//\u5982\u679c\u6b64\u65f6\u7684\u6b65\u9aa4\u6bd4ans\u8fd8\u5927\u6216\u7b49\uff0c\u6ca1\u6709\u641c\u7684\u5fc5\u8981\n   return;\n   if(y==n+1)//\u5982\u679c\u8fd9\u4e00\u884c\u641c\u5b8c\uff0c\u641c\u4e0b\u4e00\u884c\n   {\n    x++;\n    y=1;\n   }\n   if(x==n+1)//\u5168\u90e8\u641c\u5b8c\n   {\n   \t  for(int i=1;i<=n;i++)\n   \t  {\n   \t     if(check(n,i))//\u5224\u65ad\u6700\u540e\u4e00\u884c\u662f\u5426\u90fd\u7ffb\u4e0a\n   \t     {\n   \t      return;\t\n   \t     }\n   \t  }\n   \t  ans=cnt;\n   \t  return;\n   }\n    f[x][y]=0;\n    //\u53ea\u6709\u4e0a\u4e00\u884c\u7684\u68cb\u7684\u72b6\u6001\u4e3a\u9700\u8981\u7684\u72b6\u6001\uff0c\u624d\u4f1a\u5f80\u4e0b\u641c\n\tif(!check(x-1,y)) dfs(x,y+1,cnt);//\u4e0d\u7ffb\u6240\u4ee5cnt\u4e0d\u53d8\n\tf[x][y]=1;\n\tif(!check(x-1,y)) dfs(x,y+1,cnt+1);//\u7ffb\u4e86 cnt+1\n}\nvoid dfs1(int x,int y,int sum)//map1\n{\n  if(sum>=ans1||sum>=ans)//\u52a0\u4e86\u4e00\u4e2a\u526a\u679d\uff0c\u5982\u679c\u5f53\u524d\u6b65\u9aa4\u6bd4\u641cmap\u7684\u7ed3\u679c\u8981\u5927\uff0c\u4e5f\u6ca1\u6709\u641c\u7684\u5fc5\u8981\u4e86\n  return;\n   if(y==n+1)\n   {\n    x++;\n    y=1;\n   }\n   if(x==n+1)\n   {\n   \t  for(int i=1;i<=n;i++)\n   \t  {\n   \t     if(check1(n,i))\n   \t     {\n   \t      return;\t\n   \t     }\n   \t  }\n   \t  ans1=sum;\n   \t  return;\n   }\n    vis[x][y]=0;\n\tif(!check1(x-1,y)) dfs1(x,y+1,sum);\n\tvis[x][y]=1;\n\tif(!check1(x-1,y)) dfs1(x,y+1,sum+1);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t for(int j=1;j<=n;j++)\n\t {\n\t   char a;\n\t   cin>>a;\n\t   if(a=='b')//\u5b58\u56fe\n\t   {\n\t   \t  map[i][j]=1;\n\t   }\n\t   else\n\t   {\n\t   map1[i][j]=1;\n\t   }\n     }\n\t}\n     dfs(1,1,0);\n     dfs1(1,1,0);\n     ans=min(ans,ans1);\n     if(ans==7777777\uff09\n     {\n       printf(\"Impossible\\n\");\t\n     }\n     else printf(\"%d\\n\",ans);\n return 0;\t\n}\n```\n\u5c1d\u8bd5\u5c31\u662f\u80dc\u5229\uff08rp++\uff09\uff0c\u5404\u4f4d\u5927\u4f6c\u6709\u597d\u7684\u4f18\u5316\u65b9\u6cd5\u53ef\u4ee5\u544a\u8bc9\u6211\u3002\n\u5f00O2\u662f\u5fc5\u8fc7\u7684\u3002\n  ",
        "postTime": 1559568104,
        "uid": 122078,
        "name": "liubai",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "**\u6211\u4eec\u53ef\u4ee5\u627e\u51fa\u7b2c\u4e00\u884c\u6240\u6709\u53ef\u884c\u7684\u65b9\u6848\uff0c\u4e0b\u9762\u4e00\u4e2a\u4f8b\u5b50\uff1a**\n\n```\n\u539f\u56fe\uff1abwwb\n      bbwb\n      bwwb\n      bwww\n```\n\n\u6211\u4eec\u770b\uff0c\u7b2c\u4e00\u884c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u6240\u6709\u65b9\u6848\uff0c\u5047\u8bbe\u5f97\u5230\u4e00\u4e2a\u5e8f\u5217$A$\uff0c\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5148\u770b\u5982\u679c\u8981\u5168\u90e8\u53d8\u6210$w$\u9700\u8981\u6539\u53d8\u7b2c\u4e8c\u884c\u7684\u90a3\u4e9b\uff0c\u7136\u540e\u4f9d\u6b21\u6539\u53d8\u540e\u9762\u7684\n\n\n\u5047\u8bbe\u7b2c\u4e00\u884c\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u65b9\u6848\uff0c\u4e3a$bwwb$\n\n\u90a3\u4e48\u6211\u4eec\u8981\u628a\u5b83\u53d8\u6210$w$\uff0c\u5c31\u9700\u8981\u6539\u53d8\u7b2c\u4e8c\u884c\u7684\u7b2c\u4e00\u4e2a\u548c\u7b2c\u4e09\u4e2a\u624d\u80fd\u4f7f\u7b2c\u4e00\u884c\u5168\u90e8\u4e3a$w$\uff08\u81f3\u4e8e\u4e5f\u6539\u53d8\u4e86\u540e\u9762\u7684\u6211\u4eec\u4e0d\u7ba1\uff0c\u56e0\u4e3a\u6bcf\u4e00\u884c\u6211\u4eec\u53ef\u4ee5\u7531\u5b83\u7684\u4e0b\u4e00\u884c\u786e\u5b9a\uff09\uff0c\u90a3\u4e48\u8fd9\u6837\u64cd\u4f5c\u5b8c\u4e86\u540e\uff0c\u6211\u4eec\u53ea\u6709\u6700\u540e\u4e00\u884c\u6ca1\u6709\u786e\u5b9a\u4e86\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u4ece\u5168\u56fe\u641c\u7d22\u53d8\u6210\u53ea\u641c\u7b2c\u4e00\u884c\u4e86\uff0c\u5373\u4f7f\u662f\u6df1\u641c$O(2N)$\u4e5f\u80fd\u8fc7\u4e86\uff01\n\n$C++ Code$\uff1a\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define copymap(a,b) for(int _i=0;_i<n;_i++)for(int _j=0;_j<n;_j++)a[_i][_j]=b[_i][_j];\nusing namespace std;\nconst int MAXN=30;\nconst int dx[]={0,0,1,-1,0};\nconst int dy[]={1,-1,0,0,0};\nint n,map[MAXN][MAXN],oldmap[MAXN][MAXN],firstmap[MAXN][MAXN],a[MAXN];\nint ans=0x7fffffff;\nvoid read()\n{\n\tscanf(\"%d\",&n);\n\tchar s[30];\n\tfor(int i=0;i<n;i++)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tfor(int j=0;j<n;j++)\n\t\t    map[i][j]=((s[j]=='b')?1:0);\n\t}\n\tcopymap(firstmap,map);\n}\nvoid change(int x,int y)\n{\n\tfor(int k=0;k<5;k++)\n\t{\n\t\tint nx=x+dx[k];\n\t\tint ny=y+dy[k];\n\t\tif(nx>=n||nx<0) continue;\n\t\tif(ny>=n||ny<0) continue;\n\t\tmap[nx][ny]=1-map[nx][ny];\n\t}\n}\nvoid turn(int sum,int k)\n{\n\tfor(int i=1;i<n;i++)\n\t\tfor(int j=0;j<n;j++)\n\t\t    if(map[i-1][j]!=k)\n\t\t    {\n\t\t\t\tchange(i,j);\n\t\t\t\tsum++;\n\t\t\t}\n\tbool flag=true;\n\tfor(int j=0;j<n;j++)\n\t    if(map[n-1][j]!=k) {flag=false;break;}\n\tif(flag) ans=min(ans,sum);\n}\nvoid dfs(int x,int sum)\n{\n\tif(x>=n)\n\t{\n\t\tfor(int i=0;i<n;i++)\n\t\t\tif(a[i]) change(0,i);\n\t\tcopymap(oldmap,map);\n\t\tturn(sum,1);\n\t\tcopymap(map,oldmap);\n\t\tturn(sum,0);\n\t\tcopymap(map,firstmap);\n\t\treturn;\n\t}\n\ta[x]=1;\n\tdfs(x+1,sum+1);\n\ta[x]=0;\n\tdfs(x+1,sum);\n}\nvoid work()\n{\n\tdfs(0,0);\n\tif(ans==0x7fffffff) printf(\"Impossible\");\n\telse printf(\"%d\\n\",ans);\n}\nint main()\n{\n\tread();\n\twork();\n\treturn 0;\n}\n```",
        "postTime": 1544966243,
        "uid": 98954,
        "name": "\u4e0d\u5b58\u5728\u4e4b\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "[**\u9898\u76ee\u9875\u9762**](https://www.luogu.com.cn/problem/P1764)\n\n[**\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c**](https://www.luogu.com.cn/blog/yinjun2024/solution-p1764)\n\n\u6b64\u9898\u53ef\u4ee5\u7528\u641c\u7d22 + \u8d2a\u5fc3\u89e3\u51b3\u6b64\u9898\n\n\u9996\u5148\uff0c\u6211\u4eec\u4f7f\u7528\u641c\u7d22\u679a\u4e3e\u7ffb\u8f6c\u7b2c\u4e00\u884c\u4ee5\u6bcf\u4e2a\u68cb\u5b50\u4e3a\u4e2d\u5fc3\u7684\u6b21\u6570\u3002\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4e0d\u52a8\u7b2c\u4e00\u884c\uff0c\u4f7f\u7528\u7ffb\u8f6c\u7b2c\u4e8c\u884c\u6765\u5c06\u7b2c\u4e00\u884c\u5168\u90e8\u53d8\u4e3a\u76f8\u540c\u989c\u8272\u3002\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4e0d\u52a8\u7b2c\u4e8c\u884c\uff0c\u4f7f\u7528\u7ffb\u8f6c\u7b2c\u4e09\u884c\u6765\u5c06\u7b2c\u4e00\u4e8c\u884c\u5168\u90e8\u53d8\u4e3a\u76f8\u540c\u989c\u8272\u3002\n\n\u4ee5\u6b64\u7c7b\u63a8\uff0c\u6700\u540e\u5224\u65ad\u6574\u4e2a\u68cb\u76d8\u662f\u5426\u6210\u529f\uff0c\u53d6\u6700\u5c0f\u7b54\u6848\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\nconst int MAXN = 16;\nint n;\nbool borad[MAXN][MAXN];\nbool try_[MAXN][MAXN];\nint fuc(bool target) {\n\tint ans = 0x7fffffff;\n\tfor (int i = 0; i < (1 << n); i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tfor (int k = 1; k <= n; k++) {\n\t\t\t\ttry_[j][k] = borad[j][k];\n\t\t\t}\n\t\t}\n\t\tint tmp = 0;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tif (i & (1 << j - 1)) {\n\t\t\t\ttry_[1][j] = !try_[1][j];\n\t\t\t\tif (n != 1) try_[2][j] = !try_[2][j];\n\t\t\t\tif (j != 1) try_[1][j - 1] = !try_[1][j - 1];\n\t\t\t\tif (j != n) try_[1][j + 1] = !try_[1][j + 1];\n\t\t\t\ttmp++;\n\t\t\t}\n\t\t}\n\t\tfor (int j = 2; j <= n; j++) {\n\t\t\tfor (int k = 1; k <= n; k++) {\n\t\t\t\tif (try_[j - 1][k] != target) {\n\t\t\t\t\ttry_[j - 1][k] = target; \n\t\t\t\t\ttry_[j][k] = !try_[j][k];\n\t\t\t\t\tif (j != n) try_[j + 1][k] = !try_[j + 1][k];\n\t\t\t\t\tif (k != 1) try_[j][k - 1] = !try_[j][k - 1];\n\t\t\t\t\tif (k != n) try_[j][k + 1] = !try_[j][k + 1];\n\t\t\t\t\ttmp++; \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tbool flag = 1;\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tif (try_[n][j] != target) {\n\t\t\t\tflag = 0; break;\n\t\t\t}\n\t\t}\n\t\tif (flag) ans = min(ans, tmp);\n\t}\n\treturn ans;\n}\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++) {\n\t\t\tchar ch;\n\t\t\twhile (ch = getchar()) {\n\t\t\t\tif (ch == 'w' || ch == 'b') break;\n\t\t\t}\n\t\t\tborad[i][j] = ch == 'w' ? 0 : 1;\n\t\t}\n\t}\n\tint ans = min(fuc(0), fuc(1));\n\tif (ans == 0x7fffffff) printf(\"Impossible\");\n\telse printf(\"%d\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1603277442,
        "uid": 109114,
        "name": "_l_l_",
        "ccfLevel": 8,
        "title": "\u3010\u9898\u89e3\u3011P1764\u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "# \u9898\u9762\u7b80\u8ff0\uff1a\n\n\u54e6\uff0c\u8fd9\u4e0d\u662femacs\u4e0a\u7684\u5c0f\u6e38\u620f\u4e48~~\uff08\u867d\u7136\u6ca1\u8d62\u8fc7\uff09~~\n\n\u7ffb\u8f6c\u6e38\u620f\u7684\u52a0\u5f3a\u7248\uff08\u8c8c\u4f3c\u524d\u4e24\u9898\u80fd\u66b4\u641c\u641c\u8fc7\u5427\uff09\uff0c\u663e\u7136\u9700\u8981\u7528\u6b63\u89e3\n\n# \u601d\u8def\uff1a\n\n\u6bcf\u4e00\u884c\u72b6\u6001\u90fd\u662f\u786e\u5b9a\u7684\uff0c\u5982\u679c\u679a\u4e3e\u6bcf\u4e00\u884c\u7684\u6240\u6709\u72b6\u6001\uff0c\u663e\u7136\u4f1aTLE\n\n\u8981\u60f3\u8ba9\u4e0a\u4e00\u884c\u5168\u53d8\u4e3a\u540c\u4e00\u989c\u8272\uff0c\u53ea\u9700\u8981\u7ffb\u8f6c\u8fd9\u4e00\u884c\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u65e0\u540e\u6548\u6027\n\n\u5f53\u7136\uff0c\u9700\u8981\u679a\u4e3e\u7b2c\u4e00\u884c\u72b6\u6001\n\n\u5982\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ydg1d833.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9xbs20ez.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rj1e5yw7.png)\n\n# \u4ee3\u7801\uff1a\n\n```\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<cmath>\n#include<algorithm>\n#include<ctime>\nusing namespace std;\nconst int maxn=1e6+5,INF=0x3f3f3f3f;\ninline int read(){\n\tint s=0,w=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')s=s*10+ch-'0',ch=getchar();\n\treturn s*w;\n}\nint n,m,V,ans=INF,cnt;\nint a[18][18],b[18][18],ch;\nvoid flip(int &x){\n\tif(x==1)x=0;\n\telse x=1;\n}//\u7ffb\u8f6c\u5355\u70b9\nvoid press(int x,int y){\n\tcnt++;flip(b[x][y]);flip(b[x-1][y]);flip(b[x+1][y]);flip(b[x][y+1]);flip(b[x][y-1]);\n}//\u7ffb\u8f6c\u5f53\u524d\u70b9\uff0c\u5f71\u54cd\u4e86\u4e0a\u4e0b\u5de6\u53f3\u56db\u4e2a\u70b9\nvoid calc(int s,int ch){\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t\tb[i][j]=a[i][j];\n\tcnt=0;\n\tfor(int i=1;i<=n;i++){\n\t\tif(s&(1<<i-1))press(1,i);//\u628a\u7b2c\u4e00\u884c\u8f6c\u5316\u4e3a\u5f53\u524d\u72b6\u6001\n\t}\n\tfor(int i=2;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tif(b[i-1][j]!=ch)press(i,j);//\u68c0\u67e5\u4e0a\u4e00\u884c\uff0c\u989c\u8272\u4e0d\u7b26\u5c31\u7ffb\u8f6c\u8fd9\u4e00\u884c\u7684\u70b9\n\t\t}\n\t}\n\tint sum=0;\n\tfor(int i=1;i<=n;i++){\n\t\tif(b[n][i]!=ch){return;}//\u68c0\u67e5\u6700\u540e\u4e00\u884c\u662f\u5426\u4e3a\u76ee\u6807\u989c\u8272\n\t}\n\tans=min(ans,cnt);\n}\nint main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tchar c;cin>>c;\n\t\t\tif(c=='b')a[i][j]=1;\n\t\t}\n\t}\n\tfor(int i=0;i<=(1<<n)-1;i++){\n\t\tcalc(i,1);//\u679a\u4e3e\u7b2c\u4e00\u884c\u72b6\u6001\u548c\u76ee\u6807\u989c\u8272\n\t\tcalc(i,0);\n\t}\n\tif(ans==INF)cout<<\"Impossible\";//\u65e0\u5408\u7406\u65b9\u6848\n\telse cout<<ans;\n}\n```",
        "postTime": 1595681741,
        "uid": 295335,
        "name": "aakennes",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "\u672c\u9898\u662fp2040\u6253\u5f00\u6240\u6709\u7684\u706f\u7684\u52a0\u5f3a\u7248\uff0c\u4f46\u539f\u7406\u548c\u65b9\u6cd5\u90fd\u4e00\u6a21\u4e00\u6837\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u770b\u5230\u8f93\u5165\u5168\u662f\u5b57\u6bcd\uff0c\u628a\u5b83\u6362\u4e86\uff0cb->1,w->0,\u4e8e\u662f\u5c31\u53d8\u6210\u4e8601\u77e9\u9635\uff0c\u548c\u5f00\u706f\u95ee\u9898\u4e00\u6837\u4e86\u3002\n\n### \u6b64\u7c7b\u5f00\u706f\u95ee\u9898\u7684\u57fa\u672c\u601d\u8def\u3002\n\n\u9996\u5148\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u4f4d\u7f6e\u6700\u591a\u53ea\u64cd\u4f5c\u4e00\u6b21\uff0c\u64cd\u4f5c\u4e24\u6b21\u76f8\u5f53\u4e8e\u53d6\u53cd\u4e24\u6b21\uff0c\u6709\u53d8\u56de\u6765\u4e86\uff0c\u6beb\u65e0\u610f\u4e49\u3002\n\n**\u539f\u59cb\u601d\u8def\uff1a**\n\u679a\u4e3e\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u662f\u5426\u64cd\u4f5c\uff0c\u679a\u4e3e\u5b8c\u6210\u540e\u66b4\u529b\u626b\u4e00\u904d\uff0c\u5168\u96f6\uff08\u6216\u5168\u4e00\uff09\u5219\u53d6\u6700\u5c0f\u503c\uff0c\u4f46\u53ea\u80fd\u8fc7p2040\uff0c\u672c\u989830 scores\u3002\n\n**\u5148\u8fdb\u601d\u8def\uff1a**\n\u540c\u6837\u6211\u4eec\u5148\u679a\u4e3e\u7b2c\u4e00\u884c\uff0c\u5f53\u6211\u4eec\u679a\u4e3e\u7b2c\u4e8c\u884c\u662f\uff0c\u6211\u4eec\u53d1\u73b0\u6b64\u65f6\u5bf9\u4e8e\u7b2c\u4e00\u884c\uff0c\u53ea\u80fd\u901a\u8fc7\u64cd\u4f5c\u7b2c\u4e8c\u884c\u6765\u6539\u53d8\uff0c\u4e0b\u9762\u7684\u884c\u4e0d\u4f1a\u518d\u5bf9\u7b2c\u4e00\u884c\u4ea7\u751f\u5f71\u54cd\u3002\u6240\u4ee5\u6211\u4eec\u8d2a\u5fc3\u5730\u8ba9\u7b2c\u4e00\u884c\u5168\u96f6\uff08\u6216\u5168\u4e00\uff09\u5373\u5bf9\u4e8e\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u82e5\u5b83\u4e0a\u65b9\u7684\u4f4d\u7f6e\u4e3a1\uff08\u6700\u540e\u53d8\u6210\u5168\u96f6\u65f6\uff09\u62160\uff08\u6700\u540e\u53d8\u6210\u5168\u4e00\u65f6\uff09\u5219\u5bf9\u6b64\u4f4d\u7f6e\u8fdb\u884c\u64cd\u4f5c\uff0c\u4ee5\u6b64\u7c7b\u63a8\u5230\u6700\u540e\u4e00\u884c\uff0c\u800c\u4e14\u56e0\u4e3a\u8fd9\u79cd\u8d2a\u5fc3\u65b9\u5f0f\uff0c\u524dn-1\u884c\u90fd\u5df2\u6ee1\u8db3\u9898\u610f\uff0c\u53ea\u9700\u679a\u4e3e\u6700\u540e\u4e00\u884c\u68c0\u67e5\u662f\u5426\u6ee1\u8db3\u5373\u53ef\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c31\u4f1a\u53d1\u73b0\uff0c\u5f53\u7b2c\u4e00\u884c\u7684\u64cd\u4f5c\u65b9\u5f0f\u5373\u64cd\u4f5c\u540e\u7684\u72b6\u6001\u786e\u5b9a\u662f\uff0c\u4e0b\u9762\u7684\u64cd\u4f5c\u90fd\u5df2\u56fa\u5b9a\uff0c\u6240\u4ee5\u679a\u4e3e\u5168\u90e8\u53d8\u6210\u4e86\u679a\u4e3e\u7b2c\u4e00\u884c\u3002\u6211\u4eec\u4fbf\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u4e86\u3002\n\n\u6ce8\u610f\u4e8b\u9879\uff1a\n\n1.\u5f53\u7b2c\u4e00\u884c\u786e\u5b9a\u540e\uff0c\u5411\u4e0b\u9012\u63a8\u65f6\u4e0d\u80fd\u5728\u539f\u6570\u7ec4\u4e2d\u64cd\u4f5c\uff0c\u4f1a\u5bf9\u540e\u9762\u7684\u641c\u7d22\u4ea7\u751f\u5f71\u54cd\uff0c\u6240\u4ee5\u4e0d\u8981\u5acc\u9ebb\u70e6\uff0c\u5728\u5f00\u4e00\u4e2a\u6570\u7ec4\u5907\u4efd\u4e00\u4e0b\uff0c\u5bf9\u5907\u4efd\u6570\u7ec4\u64cd\u4f5c\u3002\n\n2.\u6b65\u6570\u4e0d\u8981\u5fd8\u8bb02-n\u884c\u7684\u6b65\u6570\u3002\n\ncode\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint n,ans=400;\nint a[20][20],b[20][20];\nchar c;\nvoid dfs1(int y,int step)\n{\n\tif(step>ans) return ;\n\tif(y==n+1)\n\t{\n\t\tint sr=step;\n\t\tfor(int i=1;i<=n;i++)\n\t\t \tfor(int j=1;j<=n;j++)\n\t\t \t\tb[i][j]=a[i][j];\n\t\tfor(int i=2;i<=n;i++)\n\t\t\tfor(int j=1;j<=n;j++)\n\t\t\t{\n\t\t\t\tif(b[i-1][j]==1)\n\t\t\t\t{\n\t\t\t\t\tsr++;\n\t\t\t\t\tif(sr>ans) return ;\n\t\t\t\t\tb[i][j]=b[i][j] xor 1;\n\t\t\t\t\tb[i-1][j]=b[i-1][j] xor 1;\n\t\t\t\t\tb[i+1][j]=b[i+1][j] xor 1;\n\t\t\t\t\tb[i][j-1]=b[i][j-1] xor 1;\n\t\t\t\t\tb[i][j+1]=b[i][j+1] xor 1;\n\t\t\t\t}\n\t\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(b[n][i]==1) return ;\n\t\tans=min(ans,sr); return ;\t\n\t}\n\ta[1][y]=a[1][y] xor 1;\n\ta[2][y]=a[2][y] xor 1;\n\ta[1][y-1]=a[1][y-1] xor 1;\n\ta[1][y+1]=a[1][y+1] xor 1;\n\tdfs1(y+1,step+1);\n\ta[1][y]=a[1][y] xor 1;\n\ta[2][y]=a[2][y] xor 1;\n\ta[1][y-1]=a[1][y-1] xor 1;\n\ta[1][y+1]=a[1][y+1] xor 1;\n\tdfs1(y+1,step);\n}\nvoid dfs2(int y,int step)\n{\n\tif(step>ans) return ;\n\tif(y==n+1)\n\t{\n\t\tint sr=step;\n\t\tfor(int i=1;i<=n;i++)\n\t\t \tfor(int j=1;j<=n;j++)\n\t\t \t\tb[i][j]=a[i][j];\n\t\tfor(int i=2;i<=n;i++)\n\t\t\tfor(int j=1;j<=n;j++)\n\t\t\t{\n\t\t\t\tif(b[i-1][j]==0)\n\t\t\t\t{\n\t\t\t\t\tsr++;\n\t\t\t\t\tif(sr>ans) return ;\n\t\t\t\t\tb[i][j]=b[i][j] xor 1;\n\t\t\t\t\tb[i-1][j]=b[i-1][j] xor 1;\n\t\t\t\t\tb[i+1][j]=b[i+1][j] xor 1;\n\t\t\t\t\tb[i][j-1]=b[i][j-1] xor 1;\n\t\t\t\t\tb[i][j+1]=b[i][j+1] xor 1;\n\t\t\t\t}\n\t\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(b[n][i]==0) return ;\n\t\tans=min(ans,sr); return ;\t\n\t}\n\ta[1][y]=a[1][y] xor 1;\n\ta[2][y]=a[2][y] xor 1;\n\ta[1][y-1]=a[1][y-1] xor 1;\n\ta[1][y+1]=a[1][y+1] xor 1;\n\tdfs2(y+1,step+1);\n\ta[1][y]=a[1][y] xor 1;\n\ta[2][y]=a[2][y] xor 1;\n\ta[1][y-1]=a[1][y-1] xor 1;\n\ta[1][y+1]=a[1][y+1] xor 1;\n\tdfs2(y+1,step);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tcin>>c;\n\t\t\tif(c=='b') a[i][j]=1;\n\t\t\telse a[i][j]=0;\n\t\t}\t\n\tdfs1(1,0);\n\tdfs2(1,0);\n\tif(ans==400) puts(\"Impossible\");\n\telse printf(\"%d\",ans);\n\treturn 0;\n}\n```\n\u81f4\u8c22\n",
        "postTime": 1573203912,
        "uid": 113777,
        "name": "1\u6c83\u5c14\u514b",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    },
    {
        "content": "```pascal\nprogram p1764_ldq;\n  var\n    map,t:array[0..18,0..18]of integer;\n    r:array[0..18]of integer;\n    tmp,i,j,n,ans:longint;\n    ch:char;\n  function check(x,p:longint):longint;\n    var i,o,cnt:longint;flag:boolean;\n    begin\n      o:=x;cnt:=0;\n      for i:=1 to n do r[i]:=0;i:=0;\n      while o>0 do\n        begin\n          inc(i);\n          r[i]:=o mod 2;\n          inc(cnt,r[i]); //\u7b2c\u4e00\u884c\u70b9\u51fb\u6b21\u6570\n          o:=o shr 1;\n        end;\n      t:=map;\n      for i:=1 to n do if(r[i]=1)then\n        begin\n          t[1,i]:=1-t[1,i];\n          t[1,i-1]:=1-t[1,i-1];\n          t[1,i+1]:=1-t[1,i+1];\n          t[2,i]:=1-t[2,i];\n        end; //\u6a21\u62df\u70b9\u51fb\u7b2c\u4e00\u884c\n      for i:=2 to n do\n        for j:=1 to n do\n          if(t[i-1,j]=p)then //\u82e5\u4e0a\u4e00\u884c\u8be5\u5217\u7684\u70b9\u672a\u8fbe\u76ee\u6807\u5219\u8be5\u884c\u9700\u8981\u70b9\u51fb\n              begin\n                inc(cnt);\n                t[i,j]:=1-t[i,j];\n                t[i,j-1]:=1-t[i,j-1];\n                t[i,j+1]:=1-t[i,j+1];\n                t[i+1,j]:=1-t[1+i,j];\n              end;\n      flag:=true;\n      for i:=1 to n do if(t[n,i]=p)then flag:=false;\n      if (not flag) then exit(-1);exit(cnt);\n    end;\n  begin\n    readln(n);\n    for i:=1 to n do\n      begin\n        for j:=1 to n do\n          begin\n            read(ch);\n            if(ch='b')then map[i,j]:=1 else map[i,j]:=0;\n          end;\n        READLN;//\u8bfb\u5165\u4e00\u884c\u540e\u8981\u6362\u884c\n      end;\n    ans:=66666;\n    for i:=0 to ((1 shl n)-1) do //\u72b6\u6001\u538b\u7f29\n      begin\n        tmp:=check(i,0);//\u5168\u767d\n        if(tmp>=0)and(tmp<ans)then ans:=tmp;\n        tmp:=check(i,1);//\u5168\u9ed1\n        if(tmp>=0)and(tmp<ans)then ans:=tmp;\n      end;\n    if(ans=66666)then writeln('Impossible')else writeln(ans);\n\n  end.\n```",
        "postTime": 1509853298,
        "uid": 7982,
        "name": "ldqldq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1764 \u3010\u7ffb\u8f6c\u6e38\u620f (\u52a0\u5f3a\u7248)\u3011"
    }
]
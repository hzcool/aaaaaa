[
    {
        "content": "#### \u9898\u610f\n\n\u6709\u4e00\u4e9b $B$ ($2\\le B\\le 10^6$) \u8fdb\u5236\u6570\u5b57\uff0c\u5176\u4e2d\u6570\u5b57 $i$ \u6709 $a_i$ ($a_i\\ge 1$) \u4e2a\u3002\u73b0\u5728\u8981\u7528\u5176\u4e2d\u7684\u4e00\u4e9b\u7ec4\u6210\u4e00\u4e2a\u6700\u5927\u7684 $B$ \u8fdb\u5236\u6570 $X$ \u6ee1\u8db3 $X$ \u662f $B-1$ \u7684\u500d\u6570\u3002\u4e4b\u540e\u6709 $q$ ($1\\le q\\le 10^5$) \u6b21\u8be2\u95ee\uff0c\u7b2c $i$ \u6b21\u8be2\u95ee $X$ \u4ece\u4f4e\u4f4d\u6570\u8d77\u7684\u7b2c $k_i$ \u4e2a\u6570\u5b57\u662f\u4ec0\u4e48 (\u5982\u679c\u4e0d\u5b58\u5728\u7b2c $k_i$ \u4f4d\u5219\u8f93\u51fa $-1$)\u3002\n\n#### \u9898\u89e3\n\n\u663e\u7136 $X$ \u662f $B-1$ \u7684\u500d\u6570\u5f53\u4e14\u4ec5\u5f53 $X$ \u6240\u6709\u4f4d\u7684\u548c\u662f $B-1$ \u7684\u500d\u6570\u3002\u5f53\u9009\u62e9\u6240\u6709\u6570\u4e0d\u6ee1\u8db3\u6761\u4ef6\u65f6\uff0c\u7531\u4e8e $a_i\\ge 1$\uff0c\u53ea\u9700\u8981\u5220\u9664\u5bf9\u5e94\u7684\u4e00\u4e2a\u6570\u5b57\u5373\u53ef\u3002\u4e4b\u540e\u5c06\u6240\u6709\u6570\u5b57\u4ece\u5927\u5230\u5c0f\u6392\u5217\u5c31\u662f\u6700\u5927\u7684 $X$\u3002\u6bcf\u6b21\u8be2\u95ee\u4e8c\u5206\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(B+q\\log B)$\u3002\n\n#### \u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <vector>\n#include <algorithm>\nint main() {\n    std::ios::sync_with_stdio(false);\n    std::cin.tie(nullptr);\n    int n, q;\n    std::cin >> n >> q;\n    std::vector<long long> a(n);\n    long long sum = 0;\n    for (int i = 0; i < n; ++i) {\n        std::cin >> a[i];\n        sum += i * a[i];\n    }\n    if (sum % (n - 1) != 0)\n        --a[sum % (n - 1)];\n    for (int i = 1; i < n; ++i)\n        a[i] += a[i - 1];\n    for (int i = 0; i < q; ++i) {\n        long long k;\n        std::cin >> k;\n        if (k >= a[n - 1]) {\n            std::cout << -1 << \"\\n\";\n        } else {\n            std::cout << std::upper_bound(a.begin(), a.end(), k) - a.begin() << \"\\n\";\n        }\n    }\n    return 0;\n}\n\n```\n\n",
        "postTime": 1585055285,
        "uid": 149656,
        "name": "jiangly",
        "ccfLevel": 10,
        "title": "P5956 [POI2017]Podzielno \u9898\u89e3"
    },
    {
        "content": "# \u63a8\u8350\n~~[\u6211\u7684\u535a\u5ba2](https://www.luogu.com.cn/blog/713916/)~~\n\n# \u9898\u610f\n\n\u6c42\u5728 $b$ \u8fdb\u5236\u4e0b, $0$  \u81f3  $b-1$  \u5206\u522b\u6709  $a_i$  \u4e2a\uff0c\u80fd\u6574\u9664  $b-1$  \u7684\u6700\u5927\u503c\u7684\u7b2c  $k$   \u4f4d\u662f\u591a\u5c11\u3002\n\n# \u524d\u7f6e\u8bc1\u660e\n\n\u5728 $b$ \u8fdb\u5236\u4e0b\uff0c$x$ \u8981\u662f\u4e3a $b-1$ \u7684\u500d\u6570\uff0c$x$ \u7684\u6570\u5b57\u548c\u5fc5\u4e3a $x-1$ \u7684\u500d\u6570\u3002\n\n\u4ee5\u5341\u8fdb\u5236\u4e3a\u4f8b\n\n\u8bbe $x$ \u7684\u7b2c $y$ \u4f4d\u503c\u662f $x_y$ \uff0c$n$ \u4e3a $x$ \u7684\u4f4d\u6570 ( \u4e2a\u4f4d\u662f\u7b2c\u4e00\u4f4d \uff09\u3002\n\u53ef\u5f97 $x$  \u7684\u6570\u5b57\u548c\u4e3a\uff1a$x_1+x_2+x_3+\\cdots+x_n$\n\n $x$ \u4e5f\u53ef\u8868\u793a\u4e3a\uff1a$10^0\\times x_1+10^1\\times x_2+\\cdots+10^n\\times x_n$\n \n $x$ \u548c $x$ \u7684\u6570\u5b57\u548c\u7684\u5dee\u662f $9$ \u7684\u500d\u6570 \uff08\u5c0f\u5b66\u77e5\u8bc6\uff09\u3002\n\n\u800c\u7531\u4e8e $(a\\pm b)\\bmod c=(a \\bmod c+b \\bmod c)\\bmod c$\n\n\u53ef\u77e5 $x$ \u4e3a  $9$  \u500d\u6570\u65f6\uff0c$x$ \u6570\u5b57\u548c\u4e5f\u4e3a $9$ \u500d\u6570\u3002\n\n\u8be5\u89c4\u5f8b\u53ef\u63a8\u5e7f\u81f3 $b>1$ \u7684\u4efb\u4f55\u6570\u3002\n\n# \u601d\u8def\n\n\u5148\u7b97\u51fa\u9898\u76ee\u7ed9\u7684\u8fd9\u4e9b\u6570\u5b57\u7684\u548c\uff0c\u518d\u6263\u9664\u4e00\u4e2a\u5b83\u9664 $b-1$ \u7684\u4f59\u6570\u7684\u4e2a\u6570\uff0c\u518d\u7528\u524d\u7f00\u548c\u7edf\u8ba1\uff0c\u4e4b\u540e\u4e8c\u5206\u7b54\u6848\n\u67e5\u627e\u5373\u53ef\u3002\n# \u4ee3\u7801\n\n\u7c98\u8d34\u4e0d\u53ef\u53d6\uff0c\u6d1b\u8c37\u540c\u7ef4\u62a4\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#include<iostream>\nusing namespace std;\nlong long n;long long q;\nlong long a[1000005];\nlong long p[1000005];//\u524d\u7f00\u548c \nlong long sum;\nlong long erfen(long long k,long long l,long long r)//\u4e8c\u5206\u7b54\u6848 \n{\n\tlong long ans=-1;\n\t\n\twhile(l<=r)\n\t{\n\t\tlong long mid=(l+r)/2;\n\t\tif(p[mid]>k)\n\t\t{\n\t\t\tans=mid;r=mid-1;\n\t\t}\n\t\telse \n\t\t{\n\t\t\tl=mid+1;\n\t\t}\n\t}\n\treturn ans;\n}\nint main()\n{\n\tcin>>n>>q;\n\tfor(long long i=0;i<n;i++)\n\t{\n\t\tcin>>a[i];\n\t\tsum+=a[i]*i;\n\t}\n\tif(sum%(n-1)!=0)\n\t{\n\t\ta[sum%(n-1)]--;\n\t}\n\tfor(long long i=0;i<n;i++)\n\t{\n\t\tp[i]=p[i-1]+a[i];\n\t}//\u5148\u5220\u540e\u7b97 \n\twhile(q--)\n\t{\n\t\tlong long k;\n\t\tcin>>k;\n\t\tcout<<erfen(k,0,n-1)<<endl;\n\t\tcout<<\"1\"; \n\t}\n\treturn 0;\n}\n```",
        "postTime": 1668252736,
        "uid": 713916,
        "name": "caohan",
        "ccfLevel": 0,
        "title": "P5956 \u9898\u89e3"
    },
    {
        "content": "\u4e00\u773c\u53d1\u73b0\u7ed3\u8bba\u3002\n## Problem\n\n\u5728 $B$ \u8fdb\u5236\u4e0b\uff0c\u4f60\u6709 $a_i$ \u4e2a\u6570\u5b57 $i$\uff0c\u95ee\u62fc\u51fa\u6765\u6700\u5927\u7684 $(B-1)$ \u7684\u500d\u6570\u7b2c $k$ \u4f4d\u662f\u591a\u5c11\uff0c$q$ \u6b21\u8be2\u95ee\u3002\n\n$\\mathbf 1\\le a_i\\le10^6,q\\le 10^5,2\\le B\\le10^6,k\\le 10^{18}$\n## Solution\n\n\u8f6c\u6362\u4e00\u4e0b\u5c31\u662f\u62fc\u51fa\u6765\u7684\u6570 $\\mod(B-1)\\equiv0$\u3002\n\n\u8003\u8651 $B$ \u8fdb\u5236\u6570\u7684\u6027\u8d28\uff0c$B$ \u8fdb\u5236\u6570 $X$ \u4e00\u5b9a\u662f\u5f62\u5982\u4ee5\u4e0b\u5f62\u5f0f\uff1a\n\n$$\\sum B^i\\times X_i$$\n\n\u7136\u540e\u5bf9 $B-1$ \u53d6\u6a21\u4f1a\u53d1\u73b0 $B^i\\pmod {B-1} \\equiv 1$\uff0c\u56e0\u4e3a $B\\pmod{B-1}\\equiv1$\uff0c\u6240\u4ee5\u5f0f\u5b50\u5c31\u53d8\u6210\u4e86\uff1a\n\n$$\\sum X_i$$\n\n\u4e5f\u5c31\u662f\u6240\u6709\u6570\u4f4d\u7684\u548c\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u600e\u4e48\u62fc\uff0c\u5f53\u7136\u8981\u4f4d\u6570\u6700\u591a\u5e76\u4e14\u4ece\u5927\u5230\u5c0f\u53d6\u3002\n\n\u53d6\u6240\u6709\u7684\u6570\uff0c\u5982\u679c\u6240\u6709\u7684\u548c $\\pmod{B-1}\\ne0$\uff0c\u76f4\u63a5\u51cf\u6389\u591a\u4f59\u7684\u90a3\u4e2a\u6570\u5c31\u884c\u4e86\u3002\n\n\u505a\u4e00\u904d\u524d\u7f00\u548c\uff0c\u7136\u540e\u6bcf\u6b21\u8be2\u95ee\u76f4\u63a5\u4e8c\u5206\u5c31\u597d\u4e86\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define ri register\n#define all(x) (x).begin(),(x).end()\nusing namespace std;\ntemplate<typename T_>void operator+=(vector<T_>&x,const T_&y){x.push_back(y);}\ntemplate<typename T_>void Min(T_&x,const T_&y){if(y<x)x=y;}\ntemplate<typename T_>void Max(T_&x,const T_&y){if(y>x)x=y;}\nconst int N=1e6+7;\nint n,m;\nll sum,a[N];\nint main(){\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)cin>>a[i],sum+=(i-1)*a[i];\n\tif(sum%(n-1))a[sum%(n-1)+1]--;\n\tfor(int i=1;i<=n;i++)a[i]+=a[i-1];\n\tfor(int i=1;i<=m;i++){\n\t\tstatic ll k;\n\t\tcin>>k;\n\t\tauto it=upper_bound(a+1,a+n+1,k);\n\t\tif(it==a+n+1)cout<<\"-1\\n\";\n\t\telse cout<<it-a-1<<'\\n';\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1668169893,
        "uid": 262322,
        "name": "panyanppyy",
        "ccfLevel": 5,
        "title": "P5956"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u9700\u8981\u8bc1\u660e\u4e00\u4e2a\u5f88\u7384\u5b66\u7684\u4e1c\u897f\uff0c\u4e5f\u5c31\u662f \u82e5 $X$ \u662f $B-1$ \u7684\u500d\u6570\uff0c\u5219\u5404\u4f4d\u6570\u5b57\u52a0\u548c\u4e00\u5b9a\u4e5f\u662f $B-1$ \u7684\u500d\u6570\u3002\n\n\u8bc1\uff1a\u8bbe $X$ \u662f $B-1$ \u7684\u500d\u6570\uff0c\u5c06 $X$ \u62c6\u5206\u6210 B \u8fdb\u5236\u540e\uff0c\u5c31\u4e3a $a_1*B^0+a_2*B^1+a_3*B^2+a_4*B^3+...+a_9*B^8$\u3002\u4e5f\u5c31\u662f\u8bf4$(a_1*B^0+a_2*B^1+a_3*B^2+a_4*B^3+...+a_9*B^8)\\bmod(B-1)=0$\u3002\n\u5c06\u6bcf\u4e00\u9879\u5206\u522b $\\bmod$\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $B^k\\bmod (B-1)=1$\u3002\u4e3a\u4ec0\u4e48\u5462\uff1f\u5c06\u5176\u62c6\u5206\u6210$B*B*B*B*B*B*B*B*...*B$\u7684\u5f62\u5f0f\uff0c\u6bcf\u4e00\u4e2a\u90fd$\\bmod(B-1)$\uff0c\u521a\u597d\u4e3a $1$\u3002\u6240\u4ee5\u5c31\u53d8\u6210\u4e86$(a_1+a_2+a_3+a_4+...+a_9)\\bmod(B-1)=0$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c06\u4f59\u4e0b\u6765\u7684\u4ee5\u4e3a\u6263\u6389\u5c31\u597d\u4e86\u3002\u4e3a\u4ec0\u4e48\u53ea\u6263\u4f59\u6570\uff1f\u5982\u679c\u6263\u5176\u4ed6\u7684\uff0c\u5c31\u8981\u6263 2 \u4f4d\u53ca\u4ee5\u4e0a\uff0c\u6570\u5b57\u5c31\u4e0d\u662f\u6700\u5927\u7684\u4e86\u3002\u5bf9\u4e8e\u8be2\u95ee\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u6765\u67e5\u627e\u3002\n\ncode :\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1000005;\nint n,Q,a[maxn];\nlong long sum,k,s[maxn];\nint read(){\n\tint ret=0,f=1;char ch=getchar();\n\twhile(!isdigit(ch)){if(ch=='-')f=-f;ch=getchar();}\n\twhile(isdigit(ch))ret=ret*10+ch-'0',ch=getchar();\n\treturn ret*f;\n}\nint main(){\n\tn=read();Q=read();\n\tfor(int i=0;i<n;i++)a[i]=read(),sum+=(long long)i*a[i];\n\tif(sum%(n-1)!=0)a[sum%(n-1)]--;\n\tfor(int i=0;i<n;i++)s[i]=s[i-1]+a[i];\n\twhile(Q--){\n\t\tscanf(\"%lld\",&k);\n\t\tint L=0,R=n-1,mid,Ans=-1;\n\t\twhile(L<=R){\n\t\t\tmid=(L+R)/2;\n\t\t\tif(s[mid]>k)Ans=mid,R=mid-1;\n\t\t\telse L=mid+1;\n\t\t}\n\t\tprintf(\"%d\\n\",Ans);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1633390349,
        "uid": 370354,
        "name": "yxy666",
        "ccfLevel": 5,
        "title": "P5956\u9898\u89e3"
    },
    {
        "content": "\u7531\u4e8e\u672c\u849f\u84bb\u7684\u601d\u8def\u5df2\u7ecf\u88ab\u697c\u4e0b\u5927\u4f6c\u8bf4\u8fc7\u4e86/kk\uff0c\u6240\u4ee5\u672c\u849f\u84bb\u5c31\u8865\u4e00\u4e2a\u8bc1\u660e\u8fc7\u7a0b\u5427\n\n>\u5927\u4f6c:\u663e\u7136 $X$ \u662f $B-1$ \u7684\u500d\u6570\u5f53\u4e14\u4ec5\u5f53 $X$ \u6240\u6709\u4f4d\u7684\u548c\u662f $B\u22121$ \u7684\u500d\u6570\u3002\n\n\u6211: ? ? ?\n\n\n------------\n\n\u65e2\u7136\u5728 $B$ \u8fdb\u5236\u4e0b\u8bc1\u660e\u5f88\u96be\uff0c\u90a3\u5c31\u5148\u8bc1\u660e: \u5341\u8fdb\u5236\u4e0b\uff0c $9$ \u7684\u500d\u6570\u6240\u6709\u4f4d\u7684\u548c\u662f $9$ \u7684\u500d\u6570\n\n\u6211\u4eec\u53ef\u4ee5\u8bbe $X = X_1 * 10^0 + X_2 * 10^1 + X_3 * 10^2 + \u2026\u2026 + X_n * 10^{n-1} = 9k (k\u2208N+)$ $1\\kern{-7.5pt} \\bigcirc$\n\n\u4f46\u662f\u6211\u4eec\u8981\u8bc1\u660e $X_1 + X_2 + X_3 + \u2026\u2026 + X_n$ $2\\kern{-7.5pt} \\bigcirc$ \u53ef\u4ee5\u88ab $9$ \u6574\u9664\n\n\u7528 $1\\kern{-7.5pt} \\bigcirc$ \u5f0f\u51cf\u53bb $2\\kern{-7.5pt} \\bigcirc$ \u5f0f\uff0c\u53ef\u5f97:\n\n$(X_1 * 10^0 + X_2 * 10^1 + X_3 * 10^2 + \u2026\u2026 + X_n * 10^{n-1}) - (X_1 + X_2 + X_3 + \u2026\u2026 + X_n) = X_2 * 9 + X_3 * 99 + \u2026\u2026 + X_n * (10^{n-1}-1) = 9 * (X_2 * 1 + X_3 * 11 + \u2026\u2026 + X_n * [n$\u4e2a$1])$\n\n\u8fd9\u4e2a\u5f0f\u5b50\u53ef\u4ee5\u88ab $9$ \u6574\u9664\uff0c\u4e14 $1\\kern{-7.5pt} \\bigcirc$ \u5f0f\u53ef\u4ee5\u88ab $9$ \u6574\u9664\uff0c\u6240\u4ee5 $2\\kern{-7.5pt} \\bigcirc$ \u5f0f\u53ef\u4ee5\u88ab $9$ \u6574\u9664\uff0c\u5f97\u8bc1\n\n------------\n\n\u7528\u540c\u6837\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 $B$ \u8fdb\u5236\u4e0b\u8bc1\u660e $(B-1)$ \u7684\u500d\u6570\u6240\u6709\u4f4d\u4e0a\u6570\u4e4b\u548c\u662f $(B-1)$ \u7684\u500d\u6570:\n\n\u6211\u4eec\u53ef\u4ee5\u8bbe $X = X_1 * B^0 + X_2 * B^1 + X_3 * B^2 + \u2026\u2026 + X_n * B^{n-1} = (B-1)k (k\u2208N+)$ $1\\kern{-7.5pt} \\bigcirc$\n\n\u4f46\u662f\u6211\u4eec\u8981\u8bc1\u660e $X_1 + X_2 + X_3 + \u2026\u2026 + X_n$  $2\\kern{-7.5pt} \\bigcirc$ \u53ef\u4ee5\u88ab $(B-1)$ \u6574\u9664\n\n\u7528 $1\\kern{-7.5pt} \\bigcirc$ \u5f0f\u51cf $2\\kern{-7.5pt} \\bigcirc$ \u5f0f\uff0c\u5f97:\n\n$(X_1 * B^0 + X_2 * B^1 + X_3 * B^2 + \u2026\u2026 + X_n * B^{n-1}) - (X_1 + X_2 + X_3 + \u2026\u2026 + X_n) = X_2 * (B-1) + X_3 * (B^2-1) + \u2026\u2026 + X_n * (B^{n-1}-1)$\n\n\u4e0e\u4e0a\u9762\u7684\u65b9\u6cd5\u7c7b\u4f3c,\u6211\u4eec\u9700\u8981\u8bc1\u660e $B^{n-1}$ \u53ef\u4ee5\u88ab $(B-1)$ \u6574\u9664\n\n\u901a\u8fc7\u56e0\u5f0f\u5206\u89e3\u53ef\u5f97 $B^n-1 = (B-1) * (1+B+B^2+\u2026\u2026+B^{n-1})$\n\n\u5f97\u8bc1\n\n\u6ce8:\u56e0\u5f0f\u5206\u89e3\u7684\u8bc1\u660e\u53ef\u89c1\u4e8e [\u8fd9\u91cc](https://www.luogu.com.cn/paste/p26j2yrp)",
        "postTime": 1627206020,
        "uid": 241986,
        "name": "LiuHao2019",
        "ccfLevel": 5,
        "title": "P5956\u9898\u89e3"
    }
]
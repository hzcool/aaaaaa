[
    {
        "content": "\u663e\u7136\uff0c\u7531\u4e8e\u9898\u76ee\u662f\u6c42\u6240\u6709\u65b9\u6848\u4e0b\u7f9e\u6127\u503c\u7684\u548c\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\uff0c\u6211\u4eec\u53ea\u8981\u8ba1\u7b97\u8fd9\u4e9b\u72b6\u6001\u603b\u5171\u4f1a\u51fa\u73b0\u591a\u5c11\u6b21\uff0c\u518d\u5c06\u51fa\u73b0\u6b21\u6570\u4e58\u4e0a\u76f8\u5e94\u7684\u6743\u503c\u5c31\u884c\u4e86\u3002\n\n\u5bf9\u4e8e\u8ba1\u7b97\u6bcf\u4e2a\u72b6\u6001\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u4eec\u770b\u505a\u4e2d\u95f4\u72b6\u6001\uff0c\u8ba1\u7b97\u4ece\u51680\u53d8\u4e3a\u5b83\u4eec\u7684\u65b9\u6848\u4ee5\u53ca\u4ece\u5b83\u4eec\u5230\u51681\u7684\u65b9\u6848\uff0c\u6839\u636e\u4e58\u6cd5\u539f\u7406\u76f8\u4e58\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u6bcf\u4e2a\u65b9\u6848\u7684\u51fa\u73b0\u6b21\u6570\u3002\n\n\u663e\u7136\u5177\u6709\u76f8\u540c1/0\u4e2a\u6570\u7684\u72b6\u6001\uff0c\u51fa\u73b0\u6b21\u6570\u4e00\u6837\uff0c\u56e0\u4e3a0/1\u7684\u4f4d\u7f6e\u662f\u4e0d\u91cd\u8981\u7684\uff0c\u91cd\u8981\u7684\u662f\u6570\u91cf\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u8ba1\u7b97\u586bi\u4e2a1\u6709\u591a\u5c11\u79cd\u65b9\u6848(1<=i<=n)\u3002\n\n\u8bbeOpt[i]\u4e3a\u586bi\u4e2a1\u7684\u65b9\u6848\u6570\uff0c\u6211\u4eec\u8003\u8651\u6700\u540e\u4e00\u6b21\u4e00\u6b21\u6027\u586b\u4e86j\u4e2a\uff0c\u9009\u8fd9j\u4e2a\u6709C(i,j)\u79cd\u9009\u6cd5\uff0c\u518d\u4e58\u4e0a\u4e4b\u524d\u7684\u3002\n\n\u4e8e\u662f\u6709\n\n![Luogu](https://cdn.luogu.com.cn/upload/pic/41939.png)\n\n\u9884\u5904\u7406\u9012\u63a8\u4e00\u4e0b\uff0c\u6700\u540e\u8bb0\u5f55\u7b54\u6848\u65f6\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u7ed9\u7b54\u6848\u52a0\u4e0aOpt[0\u4e2a\u6570]\u00d7Opt[1\u4e2a\u6570]\u00d7A\n\n\u8bb0\u5f97\u53d6\u6a21\u3002\u3002\u3002\u6bd4\u8d5b\u4e8c\u5341\u5206\u949f\u6253\u5b8c\u6807\u7b97\u7b97\u7ec4\u5408\u6570\u6ca1\u53d6\u6a21\u3002\u3002\u300260wawa\u3002\u3002\u3002\n\n~~\u8bdd\u8bf4\u6570\u636e\u80fd\u518d\u5927\u70b9~~\n\n\n```\n#include<bits/stdc++.h>\n#define Mod 998244353\n#define LL long long\nusing namespace std;\nLL Opt[21],C[21][21],Ans;\nint n,m;\nvoid Init(){\n    C[0][0]=1;\n    for(int i=1;i<=20;++i)\n        C[i][0]=1;\n    for(int i=1;i<=20;++i)\n        for(int j=1;j<=20;++j)\n            C[i][j]=(C[i-1][j]+C[i-1][j-1])%Mod;\n    Opt[0]=1;\n    for(int i=1;i<=20;++i)\n        for(int j=1;j<=i;++j)\n            Opt[i]=(Opt[i]+Opt[i-j]*C[i][j])%Mod;\n}\nvoid Doit(){\n    char c;\n    int Flag;\n    LL Count,A;\n    scanf(\"%d%d\",&n,&m);\n    while(m--){\n        Count=0;\n        Flag=0;\n        while(Flag<n){\n            while((c=getchar())<'0'||c>'1');\n            if(c=='1')\n                ++Count;\n            ++Flag;\n        }\n        scanf(\"%lld\",&A);\n        Ans=(Ans+A*Opt[Count]%Mod*Opt[n-Count]%Mod)%Mod;\n    }\n    printf(\"%lld\\n\",Ans);\n}\nint main(){\n    Init();\n    Doit();\n    return 0;\n}\n```",
        "postTime": 1541310510,
        "uid": 24518,
        "name": "\u5047\u88c5\u601d\u8003",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5bf9\u4e8e\u6211\u4e00\u4e2apj\u7684\u849f\u84bb\u5f88\u4e0d\u53cb\u597dQAQ\n\n\u81ea\u5df1\u63a8\u4e86\u4e00\u4e2a\u5947\u602a\u7684\u4e1c\u897f\u628a\u8fd9\u9053\u9898\u6253\u51fa\u6765\n\n\u9996\u5148\u5148\u662f\u4e00\u4e2a\u7c7b\u4f3c\u6253\u8868\u7684\u4e1c\u897f\uff0c\u7528\u4e00\u4e2a\u6570\u7ec4gu[x]\u6765\u5b58\u50a8\u4ece\u505a\u4e86k\u4ef6\u4e8b\u5230k+x\u4ef6\u4e8b\u6709\u591a\u5c11\u79cd\u60c5\u51b5\n\n\u4e0d\u96be\u5f97\u77e5\uff0c\u82e5\u603b\u5171\u6709n\u4ef6\u4e8b\u5f85\u505a\uff0c\u73b0\u5728\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u4e2d\u6709l\u4e2a\u20181\u2019\uff08\u505al\u4ef6\u4e8b\uff09\uff0c\u8fd9\u79cd\u60c5\u51b5\u51fa\u73b0\u65f6\u4f1a\u589e\u52a0a\u7684\u7f9e\u6127\u5ea6\uff0c\n\n## \u5219\u603b\u7f9e\u6127\u5ea6sum+=gu[l]\u00d7gu[n-l]\u00d7a\n\n\u522b\u5fd8\u4e86\u5206\u5f00\u4e58\uff08\u5426\u5219\u4f1a\u7206long long\uff09\n\n\u4e0b\u9762\u662f\u4ee3\u7801\u5566qwq\n\n\n```cpp\n#include<bits/stdc++.h>\n#define N 998244353\nusing namespace std;\nint zh[20][20]={1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,3,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,6,4,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,10,10,5,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,15,20,15,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,21,35,35,21,7,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,28,56,70,56,28,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,36,84,126,126,84,36,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,45,120,210,252,210,120,45,10,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,55,165,330,462,462,330,165,55,11,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,12,66,220,495,792,924,792,495,220,66,12,1,-1,-1,-1,-1,-1,-1,-1,-1,13,78,286,715,1287,1716,1716,1287,715,286,78,13,1,-1,-1,-1,-1,-1,-1,-1,14,91,364,1001,2002,3003,3432,3003,2002,1001,364,91,14,1,-1,-1,-1,-1,-1,-1,15,105,455,1365,3003,5005,6435,6435,5005,3003,1365,455,105,15,1,-1,-1,-1,-1,-1,16,120,560,1820,4368,8008,11440,12870,11440,8008,4368,1820,560,120,16,1,-1,-1,-1,-1,17,136,680,2380,6188,12376,19448,24310,24310,19448,12376,6188,2380,680,136,17,1,-1,-1,-1,18,153,816,3060,8568,18564,31824,43758,48620,43758,31824,18564,8568,3060,816,153,18,1,-1,-1,19,171,969,3876,11628,27132,50388,75582,92378,92378,75582,50388,27132,11628,3876,969,171,19,1,-1,20,190,1140,4845,15504,38760,77520,125970,167960,184756,167960,125970,77520,38760,15504,4845,1140,190,20,1};\nlong long gu[21],t,n,m,sum,a,x,y,v;//\u4e09\u5e74OI\u4e00\u573a\u7a7a\uff0c\u4e0d\u5f00long long\u89c1\u7956\u5b97QAQ \nstring w;\nint main()\n{\n\twhile(1);//\u9632\u4f5c\u5f0a\n    \u7b2c\u4e09\u65b9\u7684\u8bbe\u8ba1\u5f00\u53d1\u9ed1\u8272\u7684\u793c\u670d//\u9632\u4f5c\u5f0a+1\n    gu[0]=gu[1]=1;\n    for(int nn=2;nn<=20;nn++)\n    {\n        for(int i=1;i<nn;i++)\n    \t{\n        \tgu[nn]+=zh[nn-1][i-1]%N*gu[nn-i];\n        \tgu[nn]%=N;\n    \t}\n    \tgu[nn]++;\n    }\n    cin>>n>>m;\n    for(int i=1;i<=m;i++)\n    {\n        t=0;\n        cin>>w>>a;\n        for(int j=0;j<w.size();j++)\n        {\n            if(w[j]=='1')\n            t++;\n        }\n        v=gu[t]*a;\n        v%=N;\n        v*=gu[n-t];\n        v%=N;\n        sum+=v;\n        sum%=N;\n    }\n    cout<<sum%N;\n\n    \n    \n    return 0;\n}\n\n```",
        "postTime": 1542800049,
        "uid": 116368,
        "name": "BinDir0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u6708\u8d5b\u7684\u65f6\u5019\uff0c\u60f3\u5230\u4e86\u7ec4\u5408\uff0c\u7136\u540e\u8fdb\u4e00\u6b65\u60f3\u5230\u9012\u63a8\uff0c\u7136\u540e\u56e0\u4e3a\u6765\u665a\u4e86\u5c31\u5341\u4e94\u5206\u949f\u5c31\u6ca1\u6253\u4e86......\n\n\u9898\u76ee\u7684\u672c\u8d28\u4fbf\u662f\u8981\u770b\u6709\u6b49\u610f\u503c\u7684\u72b6\u6001\u51fa\u73b0\u4e86\u591a\u5c11\u6b21\uff0c\u7528\u8349\u7a3f\u7eb8\u63a8\u4e00\u4e0b\u53d1\u73b0\u66b4\u641c\u53ef\u80fd\u4e0d\u592a\u73b0\u5b9e\uff0c\u90a3\u5c31\u662f\u7ec4\u5408\u9012\u63a8\u5566\u3002\n\n\u90a3\u4e48\u6211\u4eec\u6765\u8003\u8651\u7531\u5168\u662f0\u7684\u72b6\u6001\u5230\u4e00\u4e2a\u4e2d\u95f4\u72b6\u6001\u518d\u5230\u5168\u662f1\u7684\u72b6\u6001\u6709\u591a\u5c11\u79cd\u3002\n\n\u8bbe$cnt[i]$\u8868\u793a\u7531i\u4e2a0\u53d8\u4e3a\u6709i\u4e2a1\u7684\u65b9\u6cd5\u6570,\u6613\u77e5$cnt[0]=cnt[1]=1$;\n\n\u6bd4\u5982\u5c0600\u53d8\u4e3a11\uff0c\u90a3\u4e48\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1.\u5148\u53d8\u51fa\u4e00\u4e2a1\uff0c\u6b64\u65f6\u5c31\u662f$C(2,1)$(\u7ec4\u5408\u6570,\u4e8c\u9009\u4e00\uff09\uff0c\u518d\u7531\u5206\u6b65\u4e58\u6cd5\u539f\u7406\uff0c\u5269\u4e0b1\u4e2a0\u53d8\u4e3a1\uff0c\u5c31\u662f\u518d\u4e58\u4e0a\u4e00\u4e2a$cnt[1]$\uff1b\n\n2.\u4e00\u6b21\u6027\u53d8\u4e3a11\uff0c\u5c31\u662f$C(2,2)$\u54af\uff0c\u518d\u4e58\u4e00\u4e2a$cnt[0]$\uff1b\n\n\u6240\u4ee5$cnt[2]=C(2,1)*cnt[1]+C(2,2)*cnt[0]=3$.\n\n\u90a3\u4e48\u5bf9\u4e8e\u7531i\u4e2a0\u53d8\u4e3a\u6709i\u4e2a1\u7684\u65b9\u6cd5\u6570:\n\n1.\u6311\u4e00\u4e2a\u53d8\u62101\uff0cC(i,1),\u518d\u4e58\u4e0a\u7531i-1\u4e2a0\u53d8\u4e3a1\u7684\u65b9\u6cd5\u6570\uff0c\u5373C(i,1)*cnt[i-1];\n\n2.\u6311\u4e24\u4e2a\uff0cC(i,2),\u7136\u540e\u5206\u6b65\u539f\u7406\uff0cC(i,2)*cnt[i-2];\n\n......\n\n\u4e8e\u662f$cnt[i]=\\sum_{j=1}^i{C(i,j)*cnt[i-j]}$;\n\n\u90a3\u4e48\u8003\u8651\u4e00\u4e0b\u4e00\u4e2a\u6709i\u4e2a1\u7684\u72b6\u6001\u4f1a\u51fa\u73b0\u591a\u5c11\u6b21\uff0c\u7528\u4e00\u4e2a\u5206\u5e03\u4e58\u6cd5\u539f\u7406\uff0c\n\u5148\u7531n\u4e2a0\u53d8\u4e3ai\u4e2a1\uff0c\u518d\u7531i\u4e2a1\u53d8\u4e3an\u4e2a1\uff0c\u5176\u5b9e\u5c31\u662f\u5148\u628a\u90a3i\u4e2a0\u53d8\u4e3a1\uff0c\u518d\u628a\u5269\u4e0bn-i\u4e2a0\u53d8\u4e3a1\uff0c\u90a3\u4e48\u5c31\u662f$cnt[i]*cnt[n-i]$\uff0c\u6700\u540e\u518d\u5f80sum\u4e0a\u9762\u52a0\u4e00\u4e2a$a*cnt[i]*cnt[n-i]$(a\u4e3a\u6b49\u610f\u503c\uff09,\u4e8e\u662f\u9012\u63a8\u548c\u8ba1\u7b97\u7684\u5de5\u4f5c\u5c31\u5927\u529f\u544a\u6210\u4e86\u3002\n\n\u987a\u4fbf\u8bf4\u4e00\u53e5\uff0c\u8bb0\u5f97\u4e00\u6b65\u4e00mod\uff0c\u6211\u5c31\u662f\u56e0\u4e3a\u6ca1mod\u597d\u4ea4\u4e86\u56db\u6b2180\u54e6\u3002\n\n\u4e0ap\u515a\u4ee3\u7801\n\n```pascal\nconst mo=998244353;\nvar\nc:array[0..22,0..22] of int64;//\u7ec4\u5408\u6570\ncnt:array[0..22] of int64;    //\u65b9\u6cd5\u6570\nn,m,i,j:longint;         \nsum,a,k:int64;                //\u7b54\u6848\uff0c\u6b49\u610f\u503c\uff0c1\u7684\u4e2a\u6570\nch:char;\nbegin\nreadln(n,m);\nc[1,0]:=1;c[1,1]:=1;cnt[1]:=1;cnt[0]:=1;\nfor i:=2 to n do\n     c[i,0]:=1;\nfor i:=2 to n do\n     for j:=1 to i do\n     begin\n         c[i,j]:=(c[i-1,j-1] mod mo+c[i-1,j] mod mo) mod mo;  //\u6768\u8f89\u4e09\u89d2\u9012\u63a8\u7ec4\u5408\u6570\n         cnt[i]:=(cnt[i]+c[i,j]*cnt[i-j] mod mo) mod mo; //\u4e0a\u6587\u6240\u8bf4\u9012\u63a8\u516c\u5f0f\n     end;\n\nfor i:=1 to m do\n begin\n     a:=0;\n     for j:=1 to n do\n     begin\n         read(ch);\n         if ch='1' then inc(k);  //\u5b57\u7b26\u5904\u7406\uff0c\u8bb0\u5f551\u7684\u4e2a\u6570\n     end;\n     readln(a);                  //\u6b49\u610f\u503c\n     sum:=(sum + (cnt[k]*(cnt[n-k] * a mod mo) mod mo)) mod mo; //\u4e00\u6b65\u4e00mod\uff01\uff01\uff01\n end;\nwriteln(sum mod mo);\nend.\n```\n\u6700\u540e\u795d\u5404\u4f4d\u5927\u4f6cnoip2018 rp++\uff08\u849f\u84bb\u5373\u5c06\u9000\u8d5b\u641e\u6570\u5b66\u5566\uff09",
        "postTime": 1541426747,
        "uid": 65172,
        "name": "Gentle\u7a7aKing",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "$70$\u5206\u72b6\u538b\u8bb0\u5fc6\u5316$dfs$\u3002\n\n$100$\u5206\u7ec4\u5408\u6570\u5b66\u6c42\u65b9\u6848\u3002\n\n\uff08~~\u5176\u5b9e\u6211\u89c9\u5f97\u8bb0\u5fc6\u5316$dfs$\u4e0d\u5e94\u8be5\u8fc7\u90a3\u4e48\u591a~~\uff09\n\n\u5176\u5b9e\u6211\u662f\u4e0d\u4f1a\u7b97\u679a\u4e3e\u5b50\u96c6\u7684\u590d\u6742\u5ea6\u7684\uff0c\u5f53\u65f6\u6211\u89c9\u5f97\u6211\u7684\u590d\u6742\u5ea6\u5f88\u4f18\u554a\uff08\u5976\uff09\u3002\n\n\u7136\u540e\u8003\u4e0b\u6765$70$\u5206\u4e00\u8138\u61f5\u903c\uff0c\u8fd9\u84dd\u8272\u7684$TLE$\u624e\u5fc3\u554a\uff01\uff01\uff01\n\n\u6c27\u6c14\u4e5f\u6551\u4e0d\u4e86\u6211\u7684\u201c\u5f88\u4f18\u79c0\u7684\u201d\u4ee3\u7801\u3002\n\n\u90a3\u4e48\u5148\u8bf4\u4e00\u4e0b\u8bb0\u5fc6\u5316\u641c\u7d22\u5427\u3002\n\n\u9996\u5148\uff0c\u641c\u7d22\uff0c\uff08\u6216\u8005\u662f\u62d3\u6251\u6392\u5e8f\uff0c\u4e5f\u53ef\u80fd\u662f$DP$\uff1f\uff09\uff0c\u53ef\u4ee5\u72b6\u538b\u4e00\u4e0b\u72b6\u6001\uff0c\u7136\u540e\u679a\u4e3e\u73b0\u5728\u8fd9\u4e2a\u72b6\u6001\u7684\u5b50\u96c6\uff0c\u53ef\u4ee5\u6c42\u5230\u4ece\u5b50\u96c6\u5230\u81ea\u5df1\u8fd9\u4e2a\u72b6\u6001\u7684\u65b9\u6848\u6570\uff0c\u6700\u540e\u4e58\u4e0a\u81ea\u5df1\u7684\u6743\u503c\u5c31\u597d\u4e86\uff0c\u770b\u8d77\u6765\u662f\u4e2a\u5957\u7740$dfs$\u7684$dp$\uff08\u6216\u662f\u62d3\u6392\uff09\u3002\n\n\u7531\u4e8e\u8bb0\u5fc6\u5316\uff0c\u53ef\u4ee5\u786e\u5b9a\u6bcf\u4e2a\u72b6\u6001\u53ea\u505a\u4e00\u6b21\uff0c\u4e8e\u662f\u590d\u6742\u5ea6\u662fO($2^n$)\uff1f\n\n\u54ce\uff0c\u4f60\u4eec\u8fd8\u662f`too young`\uff0c\u5f97\u51fa\u6765\u7684\u590d\u6742\u5ea6\u90fd`too simple , sometimes naive`\u3002\uff08\u5927\u96fe\uff09\n\n$dfs$\u590d\u6742\u5ea6$O(nm)$\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a\u679a\u4e3e\u7684\u590d\u6742\u5ea6\u662f\u4ec0\u4e48\u5462\uff1f$O(3^n)$\uff0cGG\u3002\n\n\u8d34\u4e0b70\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n,m;\n\nlong long mod=998244353;\nlong long v[1048600];\nlong long dp[1048600];\nlong long dis[1048600];\nbool ok=1;\n\nlong long dfs(int x)\n{\n    if(x==0)return v[x];\n    if(dp[x]!=-1)return dp[x];\n    dp[x]=0;\n    for(int i=x&(x-1);i!=0;i=x&(i-1))\n    {\n        dp[x]=(dp[x]+dfs(i))%mod;\n        dis[x]=(dis[x]+dis[i])%mod;\n    }\n    dp[x]=(dp[x]+dfs(0))%mod;\n    dis[x]=(dis[x]+dis[0])%mod;\n    dp[x]=(dp[x]+(dis[x]*v[x])%mod)%mod;\n    return dp[x];\n}\n\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    memset(dp,-1,sizeof(dp));\n    dis[0]=1;\n    for(int i=1;i<=m;i++)\n    {\n        char c[22];\n        scanf(\"%s\",c+1);\n        int a=0;\n        for(int j=1;j<=n;j++)\n        {\n            if(c[j]=='1')\n            {\n                a+=(1<<(j-1));\n            }\n        }\n        scanf(\"%lld\",&v[a]);\n    }\n    dfs((1<<n)-1);\n    printf(\"%lld\\n\",dp[(1<<n)-1]%mod);\n    return 0;\n}\n```\n\n\u65e2\u7136\u505a\u5230\u6bcf\u4e2a\u72b6\u6001\u53ea\u505a\u4e00\u6b21\u90fd\u8981TLE\uff0c~~\u4e00\u5b9a\u662f\u6bd2\u7624......~~\n\n\u7efc\u4e0a\uff0c\u6211\u4eec\u9700\u8981\u628a\u72b6\u6001\u6570\u538b\u7f29\uff0c\u6216\u8005\u5de7\u5999\u5730\u7edf\u4e00\u5904\u7406\u3002\n\n\u662f\u7684\uff0c\u5728\u6bd4\u8d5b\u7684\u65f6\u5019\u5c31\u5728\u601d\u8003\uff0c\u662f\u5426\u53ef\u4ee5\u76f4\u63a5\u6c42\u51fa\u6bcf\u4e2a\u72b6\u6001\u7684\u65b9\u6848\u6570\u5462\uff1f\n\n~~\u592a\u61d2\u592a\u7b28\u592a\u5f31\uff0c\u4e8e\u662f\u653e\u5f03\u601d\u8003\u5212\u6c34\u53bb\u4e86~~\n\n~~\u6284\u88ad~~\u501f\u9274\u4e86\u5176\u4ed6\u9898\u89e3\uff0c\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u5206\u6b65\u505a\uff0c\u7b2c\u4e00\u6b65\uff0c\u4ece\u6211\u7684\u5b50\u96c6\u5230\u6211\uff0c\u7b2c\u4e8c\u6b65\uff0c\u4ece\u6211\u5230\u76ee\u6807\u4e32\u3002\n\n\u90a3\u4e48\u6211\u4eec\u8fd8\u53ef\u4ee5\u518d\u7edf\u4e00\u5904\u7406\u4e00\u4e0b\uff0c\u5f53\u51e0\u4e2a\u4e32\u91cc\u9762\u76841\u7684\u6570\u91cf\u4e00\u6837\u7684\u65f6\u5019\uff0c\u4ece\u51680\u5230\u4ed6\u4eec\u7684\u65b9\u6848\u6570\u662f\u76f8\u7b49\u7684\uff08~~\u663e\u800c\u6613\u89c1~~\uff09\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a\u5b50\u4e32\uff0c\u4ed6\u7684$1$\u7684\u6570\u91cf\u662f$n$\u7684\u8bdd\uff0c\u4ed6\u4ece\u4e00\u4e2a$1$\u7684\u6570\u91cf\u4e3a$m$\u7684\u5b50\u96c6\u8f6c\u79fb\u8fc7\u6765\u7684\u65b9\u6848\u6570\u662f$C_n^m$\uff0c\u53ef\u4ee5\u8fd9\u6837\u7406\u89e3\uff0c\u4ece\u4ed6\u7684$n$\u4e2a$1$\u4e2d\u9009$m$\u4e2a$1$\u51fa\u6765\uff0c\u8fd9$m$\u4e2a$1$\u662f\u4ed6\u5df2\u7ecf\u5b8c\u6210\u7684\uff0c\u5269\u4e0b\u7684$1$\u90fd\u662f\u4ed6\u73b0\u5728\u76f4\u63a5\u4e00\u6b21\u6027\u5b8c\u6210\u7684\u3002\n\n\u90a3\u4e48\u65b9\u6848\u8f6c\u79fb\u5c31\u662f$dp[i] = dp[j] \\times c_i^j$\n\n\u6700\u540e\u7b54\u6848\u76f4\u63a5\u7528$dp[$\u81ea\u5df1\u7684$1$\u7684\u4e2a\u6570$]$\u4e58\u4e0a\u81ea\u5df1\u7684\u6743\u503c\uff0c\u7136\u540e\u52a0\u5230\u7b54\u6848\u91cc\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint mod=998244353;\n\nint n,m;\n\nchar in[24];\n\nlong long c[25][25];\nlong long v[25];\n\nlong long ans;\n\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    v[0]=1;\n    v[1]=1;\n    c[1][1]=1;\n    c[1][0]=1;\n    for(int i=2;i<=n;i++)\n    {\n        c[i][0]=c[i-1][0]%mod;\n        for(int j=1;j<=i;j++)\n        {\n            c[i][j]=(c[i-1][j]+c[i-1][j-1])%mod;\n            v[i]=(v[i]+(v[i-j]*c[i][j])%mod)%mod;\n        }\n    }\n    for(int i=1;i<=m;i++)\n    {\n        scanf(\"%s\",in+1);\n        int a=0;\n        long long b;\n        for(int i=1;i<=n;i++)\n            if(in[i]=='1')\n                a++;\n        scanf(\"%lld\",&b);\n        ans=(ans+(v[a]*((b*v[n-a])%mod))%mod)%mod;\n    }\n    printf(\"%lld\\n\",ans%mod);\n    return 0;\n}\n```",
        "postTime": 1541403796,
        "uid": 34663,
        "name": "redegg",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u672c\u9898\u662f\u4e2a\u597d\u9898,\u504f\u6570\u8bba;\n\u6211\u4e0b\u9762\u628a\u5404\u4e2a\u5206\u6bb5\u7684\u505a\u6cd5\u5199\u4e0b\u6765;\n\n<1>\u72b6\u538b\u641c\u7d22,\u6ca1\u4ec0\u4e48\u53ef\u8bb2\u7684,\u53ea\u80fd\u62ff30\u5206;\n\n<2>\u52a0\u6cd5\u539f\u7406(\u9012\u63a8):\n\n\t\t\u5b9a\u4e49cnt[i]\u4e3a\u4ece0\u5230\u8fbe\u72b6\u6001i(\u4e8c\u8fdb\u5236\u72b6\u538b)\u7684\u65b9\u6848\u6570;\n    \tsum[i]\u4e3a\u4ece0\u5230\u8fbe\u72b6\u6001i\u7684\u6743\u503c\u548c(\u5305\u62eci\u7684);\n    \t\u5f88\u5bb9\u6613\u5f97\u5230\u9012\u63a8\u5173\u7cfb\u5f0f;\n        cnt[i]=\u03a3(j)cnt[j];\n        sum[i]=\u03a3(j)sum[j]+cnt[i]\u00d7w[i];\n        \u5176\u4e2dj\u662fi\u7684\u771f\u5b50\u96c6;\n        \u90a3\u4e48\u7b54\u6848\u4fbf\u662fsum[(1<<n)-1];\n        \u636e\u8bf4\u8fd9\u79cd\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f3\u207f(\u7136\u800c\u6211\u8bc1\u660e\u4e0d\u4e86);\n        \u5728\u8fd9\u91cc\u4ea4\u4ee3\u4e00\u4e0b\u5b50\u96c6\u7684\u6c42\u6cd5:\n        loop(j=(i-1)&i;;j=(j-1)&i);\n        \u8fd9\u6837\u53ef\u4ee5\u6c42\u51fa\u6240\u6709\u672c\u9898\u610f\u4e49\u4e0a\u5b50\u96c6;\n        \u603b\u4e4b,\u8fd9\u79cd\u7b97\u6cd5\u80fd\u5f9770\u5206;\n<3.1>\u4e58\u6cd5\u539f\u7406(\u6253\u8868):\n\n        \u8003\u8651\u4e58\u6cd5\u539f\u7406,\u4ece0\u5230i\u72b6\u6001\u6709x\u79cd\u65b9\u6848,\n        \u800c\u4ecei\u5230(1<<n)-1\u6709y\u79cd\u65b9\u6848;\n    \t\u90a3\u4e48\u7ecf\u8fc7i\u7684\u65b9\u6848\u5171\u6709x\u00d7y\u79cd;\n        \u90a3\u4e48i\u72b6\u6001\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u4e5f\u5c31\u662f\u65b9\u6848\u6570\u00d7\u6743\u503c;   \n        \u90a3\u4e48\u65b9\u6848\u6570\u5982\u4f55\u6c42\u5f97?\n        \u5728<2>\u5b9a\u4e49\u4e86cnt[],\u8fd9\u76f8\u5f53\u4e8e\u521a\u624d\u8bb2\u7684x,\n        \u90a3\u4e48y\u662f\u4ec0\u4e48\u5462?\n        \u8003\u8651\u5c06i\u72b6\u6001\u53d6\u53cd(1\u53d80,0\u53d81),\n        \u90a3\u4e48y\u4e5f\u5c31\u662f\u4ece0((1<<n)-1\u53d6\u53cd\u5f97\u5230)\u5230\u53d6\u53cd\u540e\u7684i\u7684\u65b9\u6848\u6570;\n        \u90a3\u4e48\u72b6\u6001i\u7684\u65b9\u6848\u6570\u4fbf\u662fcnt[i]\u00d7cnt[\u53d6\u53cd(i)];\n        \u8fd9\u6837\u505a\u4ecd\u7136\u8981\u82b13\u207f\u65f6\u95f4\u590d\u6742\u5ea6\u6765\u679a\u4e3e,\u5e76\u4e0d\u80fd\u5f97\u5230\u66f4\u9ad8\u7684\u5206\u6570,\n        \u4f46\u662f\u53ef\u4ee5\u6253\u8868,\n    \t\u5b9e\u9645\u4e0a,1\u7684\u4e2a\u6570\u76f8\u540c\u7684\u72b6\u6001,\u5b83\u4eec\u7684cnt[]\u662f\u76f8\u540c\u7684;\n        \u6240\u4ee5\u53ef\u4ee5\u63d0\u524d\u8ba1\u7b97\u51fa1\u7684\u4e2a\u6570\u4e3a(1\u523020)\u7684\u65b9\u6848\u6570;\n        \u5728\u65b0\u7a0b\u5e8f\u4e2d\u7ed9\u6570\u7ec4\u8d4b\u503c;\n        \u5728\u7ebf\u5904\u7406\u76f4\u63a5\u6c42\u5404\u72b6\u6001\u7684\u8d21\u732e\u4e4b\u548c \u5373\u5f97\u5230\u7b54\u6848.\n        \u8fd9\u6837\u53ef\u4ee5AC\u4e86;\n<3.2>\u4e58\u6cd5\u539f\u7406(\u6b63\u89e3):\n\t\t\n        <3.1>\u4e2d\u63d0\u5230,1\u7684\u4e2a\u6570\u76f8\u540c\u7684\u72b6\u6001,\u5b83\u4eec\u7684cnt[]\u662f\u76f8\u540c\u7684;\n        \u6240\u4ee5\u91cd\u65b0\u5b9a\u4e49cnt[x]\u4e3a\u4ece0\u5230 1\u7684\u4e2a\u6570\u4e3ax\u7684\u72b6\u6001 \u7684\u65b9\u6848\u6570;\n        \u90a3\u4e48cnt[]\u6ee1\u8db3\u9012\u63a8\u5173\u7cfb\u5f0f:\n        cnt[i]=\u03a3(j)(c(i,j)\u00d7cnt[j]); \u5176\u4e2d,j\u4ece0\u5230i-1;\n        \u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6\u53ea\u6709n\u00b2;\n\u6700\u540e\u6ce8\u610f\u53d6\u6a21\u7684\u5199\u6cd5.\n\n\u5404\u4ee3\u7801\u5982\u4e0b:\n\n\n------------\n<2>\n```cpp\n#include<iostream>\n#include<cstdio>\n#define ll long long\n#define inf 0x7f7f7f7f\n#define loop(i,a,b) for(int i=a;i<=b;i++)\nusing namespace std;\nconst int p=998244353;\nll cnt[1<<20],sum[1<<20],n,m,w[1<<20];\n//cnt[i]\u6307\u5230\u8fbe\u72b6\u6001i\u7684\u65b9\u6848\u6570;\n//sum[i]\u53ea\u5230\u8fbe\u72b6\u6001i\u7684\u6743\u503c\u548c(\u5305\u62eci\u7684);\nint trans(string);\nint main()\n{\n//\tfreopen(\"in.txt\",\"r\",stdin);\n    cin>>n>>m; string  state; int x;\n    loop(i,1,m){\n        cin>>state>>x;\n        x%=p;\n        w[trans(state)]=x;\n    }\n    cnt[0]=1; sum[0]=w[0];\n    loop(i,1,(1<<n)-1){ //\u53ef\u4ee5\u4fdd\u8bc1,\u5b50\u96c6\u7684\u72b6\u6001\u4e00\u5b9a\u5df2\u7ecf\u6c42\u5f97;\n        int j=i;//i\u7684\u4e00\u4e2a\u5b50\u96c6;\n        while(true){\n            cnt[i]+=cnt[j];\n            cnt[i]%=p;\n            sum[i]+=sum[j];\n            sum[i]%=p;\n            if(!j) break;\n            j=(j-1)&i;\n        }\n        sum[i]+=cnt[i]*w[i];\n        sum[i]%=p;\n    }\n    cout<<sum[(1<<n)-1]<<endl;\n    return 0;\n}\nint trans(string s)\n{\n    int pow=1,ret=0;\n    for(int i=s.size();i>=1;i--){\n        if(s[i-1]=='1')\tret+=pow;\n        pow*=2;\n    }\n    return ret;\n}\n```\n\n<3.1>\n\u6253\u8868\u7a0b\u5e8f:\n```cpp\n#include<iostream>\n#include<cstdio>\n#define ll long long\n#define inf 0x7f7f7f7f\n#define loop(i,a,b) for(int i=a;i<=b;i++)\nusing namespace std;\nconst int p=998244353;\nll cnt[1<<20],n;\n//cnt[i]\u6307\u5230\u8fbe\u72b6\u6001i\u7684\u65b9\u6848\u6570;\nint main()\n{\n//\tfreopen(\"in.txt\",\"r\",stdin);\n\tn=20;\n\tcnt[0]=1;\n    loop(i,1,(1<<n)-1){ //\u53ef\u4ee5\u4fdd\u8bc1,\u5b50\u96c6\u7684\u72b6\u6001\u4e00\u5b9a\u5df2\u7ecf\u6c42\u5f97;\n        int j=i;//i\u7684\u4e00\u4e2a\u5b50\u96c6;\n        while(true){\n            cnt[i]+=cnt[j];\n            cnt[i]%=p;\n            if(!j) break;\n            j=(j-1)&i;\n        }\n    }\n    int s=0;\n\tloop(i,0,n){\n\t\tif(i) s=s|(1<<(i-1));\n\t\tprintf(\"cnt[%d]=%lld;\\n\",i,cnt[s]);\n\t\t//\u8fd9\u91cc\u6253\u5370\u7684cnt[]\u4e0b\u6807\u4e3a\u72b6\u6001\u4e2d1\u7684\u4e2a\u6570;\n\t}\n    return 0;\n}\n```\n        \n\u8bc4\u6d4b\u7a0b\u5e8f:\n```cpp\n#include<iostream>\n#include<cstdio>\n#define ll long long\n#define inf 0x7f7f7f7f\n#define loop(i,a,b) for(int i=a;i<=b;i++)\nusing namespace std;\nconst int p=998244353;\nll cnt[20+1],n,m,ans;\n//int trans(string);\nint bit(string);\nvoid mk_cnt();\nint main()\n{\n    mk_cnt();\n    cin>>n>>m; string  state; int x,t; ll tmp;\n    loop(i,1,m){\n        cin>>state>>x;\n        x%=p;\n        t=bit(state);\n        tmp=1;\n        tmp*=cnt[t];\n        tmp%=p;\n        tmp*=cnt[n-t];\n        tmp%=p;\n        tmp*=x;\n        tmp%=p;\n        (ans+=tmp)%=p;\n    }\n    cout<<ans<<endl;\n    return 0;\n}\nvoid mk_cnt()\n{\n    cnt[0]=1;\n    cnt[1]=1;\n    cnt[2]=3;\n    cnt[3]=13;\n    cnt[4]=75;\n    cnt[5]=541;\n    cnt[6]=4683;\n    cnt[7]=47293;\n    cnt[8]=545835;\n    cnt[9]=7087261;\n    cnt[10]=102247563;\n    cnt[11]=624388220;\n    cnt[12]=140725711;\n    cnt[13]=783574350;\n    cnt[14]=58167463;\n    cnt[15]=197672989;\n    cnt[16]=507523296;\n    cnt[17]=622140839;\n    cnt[18]=604776563;\n    cnt[19]=768918857;\n    cnt[20]=809378366;\n}\nint bit(string s)\n{\n    int s1ze=s.size(),ret=0;\n    loop(i,1,s1ze) if(s[i-1]=='1') ret++;\n    return ret;\n}\n```\n<3.2>\n```cpp\n#include<iostream>\n#include<cstdio>\n#define ll long long\n#define inf 0x7f7f7f7f\n#define loop(i,a,b) for(int i=a;i<=b;i++)\nusing namespace std;\nconst int p=998244353;\nconst int N=20;\nll cnt[N+1],c[N+1][N+1],ans;\n//cnt[x]\u6307\u4ece0\u4e2a1 \u5230 x\u4e2a1 \u7684\u65b9\u6848\u6570;\nint n,m;\nint bit(string);\nint main()\n{\n    c[0][0]=1;\n    cin>>n;\n    loop(i,1,n) loop(j,0,i){\n        if(!j){\n            c[i][j]=1;\n            continue;\n        }\n        c[i][j]=c[i-1][j-1]+c[i-1][j];\n        c[i][j]%=p;\n    }\n    cnt[0]=1;\n    loop(i,1,n) loop(j,0,i-1){\n        (cnt[i]+=(c[i][j]*cnt[j]))%=p;\n    }\n    cin>>m; string s; int x; ll w,t;\n    loop(i,1,m){\n        cin>>s>>w;\n        x=bit(s);\n        t=1;\n        (t*=cnt[x])%=p;\n        (t*=cnt[n-x])%=p;\n        (t*=w)%=p;\n        (ans+=t)%=p;\n    }\n    cout<<ans<<endl;\n    return 0;\n}\nint bit(string s)\n{\n    int s1ze=s.size(),ret=0;\n    loop(i,1,s1ze) if(s[i-1]=='1') ret++;\n    return ret;\n}\n```\n\u9700\u8981\u6ce8\u610f\u7684\u662f,\u540e\u4e09\u4e2a\u7a0b\u5e8f\u4e2d\u7684\u53d6\u6a21\u90fd\u5199\u5f97\u5f88\u7e41\u7410,\n\n\u4f46\u662f\u8fd9\u6837\u5199\u80fd\u591f\u4fdd\u8bc1\u4e07\u65e0\u4e00\u5931;        ",
        "postTime": 1541506923,
        "uid": 34462,
        "name": "exi3t",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u6a21\u6570\u6253\u9519\u4e86\u6240\u4ee5 WA \u4e86\u4e00\u6b21\u3002\n\n\u5f88\u7b80\u5355\u7684\u4e00\u4e2a\u6570\u5b66\u95ee\u9898\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u4e32\u76f4\u63a5\u4e0d\u5f71\u54cd\uff08\u6ca1\u6709\u8bf4\u4e00\u5b9a\u8981\u5148\u8f6c\u79fb\u5230\u54ea\u4e2a\u518d\u8f6c\u79fb\u5230\u54ea\u4e2a\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8003\u8651\u6bcf\u4e00\u4e2a\u4e32\u5bf9\u6700\u540e\u7b54\u6848\u7684\u8d21\u732e\u3002\n\n\u6211\u4eec\u9996\u5148\u6709\u4e00\u4e2a\u5168\u90e8\u4e3a 0 \u7684\u72b6\u6001\uff0c\u5982\u679c\u9700\u8981\u8f6c\u79fb\u5230\u67d0\u4e2a\u72b6\u6001\uff0c\u5176\u5b9e\u5c31\u662f\u5c06\u5176\u4e2d\u5bf9\u5e94\u7684 0 \u8f6c\u6362\u4e3a 1\uff0c\u6700\u540e\u6211\u4eec\u9700\u8981\u8f6c\u6362\u4e3a\u5168\u90e8\u4e3a 1 \u7684\u72b6\u6001\uff0c\u5c31\u662f\u5c06\u5269\u4f59\u7684 0 \u8f6c\u4e3a 1.\n\n\u56e0\u4e3a\u54ea\u4e2a 0 \u5148\u8f6c\uff0c\u54ea\u4e2a 0 \u540e\u8f6c\u90fd\u65e0\u6240\u8c13\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c06\u95ee\u9898\u8f6c\u6362\u4e3a\uff1a\u5148\u5c06 x \u4e2a 0 \u6539\u4e3a 1\uff0c\u7136\u540e\u5c06 n-x \u4e2a 0 \u6539\u4e3a 1\uff0c\u4e00\u5171\u6709\u591a\u5c11\u79cd\u65b9\u6848\u3002\n\n\u6bd4\u5982\u8bf4\uff1a\n\n000 -> 110 -> 111\n\n\u6211\u4eec\u5c31\u662f\u8981\u5148\u6539 2 \u4e2a 0 \u4e3a 1\uff0c\u7136\u540e\u6539 1 \u4e2a 0 \u4e3a 1.\n\n\u90a3\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u6c42\u8f6c\u6362\u82e5\u5e72\u4e2a 0 \u4e3a 1 \u7684\u65b9\u6848\u6570\u2014\u2014DP \u8f6c\u79fb\u627e\u89c4\u5f8b\u5373\u53ef\u3002\n\n$$ f[0] = 1, f[i] = 1 + \\sum_{j = 1}^{i - 1} c[i][j] * f[j]$$\n\n\u6700\u540e\u7b54\u6848\u5c31\u662f\u6240\u6709\u4e32\u8d21\u732e\u7d2f\u52a0\u8d77\u6765\u3002\n\n$$ ans = \\sum_{i = 1}^{m} f[x] * f[n - x] * a[i]$$\n\nx \u4e3a\u67d0\u4e00\u4e2a\u72b6\u6001\u4e2d 1 \u7684\u6570\u91cf\u3002\n\n\n\u4ee3\u7801\uff1a\n```c++\n#include <bits/stdc++.h>\n\nusing namespace std;\n#define rep(i, a, b) for (int i = a; i <= b; i++)\n\nconst int N = 20;\nconst int MOD = 998244353;\n\nint c[N + 1][N + 1];\nint f[N + 1];\nchar s[N + 1];\nint x;\n\nvoid init();\n\nint main() {\n    //freopen(\"4996.in\", \"r\", stdin);\n    //freopen(\"4996.out\", \"w\", stdout);\n    ios::sync_with_stdio(false);\n    init();\n    int n, m;\n    cin >> n >> m;\n    int ans = 0;\n    rep(i, 1, m) {\n        cin >> (s + 1) >> x;\n        int have = 0;\n        rep(j, 1, n) have += s[j] == '1';\n        int way = (1LL * f[have] * f[n - have]) % MOD;\n        int tAns = (1LL * way * x) % MOD;\n        (ans += 1LL * tAns) %= MOD;\n    }\n    cout << ans << endl;\n    return 0;\n}\n\nvoid init() {\n    rep(i, 0, N) {\n        c[i][0] = 1;\n        rep(j, 1, i) c[i][j] = (1LL * c[i - 1][j - 1] + c[i - 1][j]) % MOD;\n    }\n    rep(i, 0, N) {\n        f[i] = 1;\n        rep(j, 1, i - 1) (f[i] += (1LL * c[i][j] * f[j]) % MOD) %= MOD;\n    }\n}\n```",
        "postTime": 1541331367,
        "uid": 20522,
        "name": "ccviolett",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u770b\u4e86[\u8d85\u795e\u706b\u661f\u4eba](https://www.luogu.org/space/show?uid=24518)\uff08%\u4e0bdalao\uff09\u7684\u9898\u89e3\uff0c\u624d\u53d1\u73b0\u81ea\u5df1\u7ec4\u5408\u6570\u539f\u6765\u4e00\u76f4\u6ca1\u6709\u521d\u59cb\u5316,\u8fd8\u6ca1\u53d6\u6a21\u3002\u3002\u3002\uff08\u6765\u81ea\u4e00\u540dT2\u50bb\u5230\u6253dfs\uff0cT\u4e869\u4e2a\u70b9\u7684\u849f\u84bb\uff09\n\n\u89c9\u5f97\u706b\u661f\u4eba\u8bb2\u7684\u6709\u70b9\u7ed5\u5634\uff0c\u6211\u518d\u6765\u89e3\u91ca\u4e00\u4e0b.\n\n```cpp\nlalala[i]=(lalala[i]+(lalala[i-j]*c[i][j])%mod)%mod;//\u5176\u5b9e\u6211\u89c9\u5f97\u6838\u5fc3\u4ee3\u7801\u5c31\u8fd9\u4e00\u53e5\n```\n\nc[i][j]\u5c31\u662f\u8868\u793a\u7ec4\u5408\u6570\uff0clalala[i]\u8868\u793a\u6709i\u4e2a1\u7684\u65b9\u6848\u6570\uff0c\u5047\u5982\u8bf4\u76ee\u524d\u4e00\u5171\u586b\u4e86j\n\u4e2a\u6570(1)\uff0c\u90a3\u4e48\u9009\u8fd9j\u4e2a\u6570\u4e00\u5171\u6709c[i][j]\u79cd\u9009\u6cd5\uff0c\u4f46\u6211\u4eec\u586bj\u4e2a\u6570\u65f6\uff0ci\u4e2a\u6570\u53ef\u80fd\u5e76\u6ca1\u6709\u88ab\u586b\u5b8c\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u518d\u4e58\u4e0alalala[i-j]\uff0c\u518d\u52a0\u4e0a\u4e4b\u524d\u8ba1\u7b97\u8fc7\u5f97lalala[i]\uff0c\u9012\u63a8\u4e00\u904d\uff0c\u5c31\u662f\u6700\u540e\u7684\u65b9\u6848\u6570\u3002\n\n\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\uff0c\u6211\u4eec\u8ba1\u7b97\u5b8c\u8fd9\u4e9b\u72b6\u6001\u603b\u5171\u4f1a\u51fa\u73b0\u591a\u5c11\u6b21\uff0c\u518d\u5c06\u51fa\u73b0\u6b21\u6570\u4e58\u4e0a\u76f8\u5e94\u7684\u6b49\u610f\u503c\u5c31\u884c\u4e86\u3002\n\n\u4ee5\u4e0a\u5168\u662f\u4e2a\u4eba\u611f\u89c9\uff0c\u6709\u9519\u8bef\u8bf7\u63d0\u51fa\u2014\u2014\u2014\u2014\u6765\u81ea\u849f\u84bb\u7684\u8bf7\u6c42\u3002\n\n\u7136\u540e\u5c31\u662f\u6e29\u99a8\u63d0\u9192\uff0c\u8fd9\u9898\u9664\u4e86c[i][j]\u4ee5\u5916\u90fd\u8981\u5f00long long,\u4e0d\u5f00long long 30\u5206\uff0c\u800c\u4e14\u8fd9\u9898\u975e\u5e38\u5361\u53d6\u6a21\uff0c\u5982\u679c\u53ea\u5bf9\u4e58\u5b8c\u4ee5\u540e\u7684ans\u53d6\u6a21,\u53ef\u5f9750\u5206,\u5982\u679c\u518d\u5bf9lalala[i]\u53d6\u6a21\uff0c\u53ef\u5f9780\u5206,\u5982\u679c\u5bf9ans\u4e00\u8fb9\u4e58lalala[i]\u4e00\u8fb9\u53d6\u6a21,\u5c31\u80fdAC\u4e86\u3002\n\n\u6700\u540e\u653e\u4e0a\u4ee3\u7801\uff08\u849f\u84bb\u4e11\u964b\u7684\u4ee3\u7801\uff09\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long c[22][22];//\u4e0dlong long\u4e5f\u884c\nlong long mod=998244353;\nlong long lalala[22],ans;\nlong long n,m,w,cnt;\nint main()\n{\n\tcin>>n>>m;\n\tc[0][0]=1;\n\tfor(int i=1;i<=20;i++)\n\tc[i][0]=1;\n\tfor(int i=1;i<=20;i++)\n\t{\n\t\tfor(int j=1;j<=i;j++)\n\t\t{\n\t\t\tc[i][j]=(c[i-1][j]+c[i-1][j-1])%mod;//\u4e0d\u6a21\u4e5f\u6ca1\u4e8b\uff0c\u7206\u4e0d\u4e86\u3002\n\t\t}\n\t}\n\tlalala[0]=1;\n\tfor(int i=1;i<=20;i++)\n\t{\n\t\tfor(int j=1;j<=i;j++)\n\t\t{\n\t\t\tlalala[i]=(lalala[i]+(lalala[i-j]*c[i][j])%mod)%mod;\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tcnt=0;\n\t\tint wa;\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tscanf(\"%1d\",&wa);\n\t\t\tif(wa==1)\n\t\t\tcnt++;\n\t\t}\n\t\tcin>>w;\n\t\tans=(ans+(w*lalala[cnt]%mod*lalala[n-cnt]%mod))%mod;//\u6a21\u6a21\u6a21\uff0c\u4e00\u5b9a\u8981\u6a21\u3002\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n```\n\n\u6587\u7ae0\u6700\u540e\uff0c\u611f\u8c22\u706b\u661f\u4eba\uff0c\u518d%\u4e00\u4e0bCZ\uff0c\u795d\u6211NOIP RP++\u3002",
        "postTime": 1541316465,
        "uid": 94437,
        "name": "philosopherchang",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u53d1\u4e00\u4e2a\u62ff\u7b2c\u4e8c\u7c7b\u65af\u7279\u6797\u6570\u505a\u7684\u9898\u89e3...\n\n\u9996\u5148\u8f6c\u6362\u95ee\u9898\uff0c\u7b54\u6848\u8f6c\u6362\u4e3a$\\sum_{i=1}^m a_itot_i$\uff0c\u5176\u4e2d$tot_i$\u8868\u793a\u7ecf\u8fc7\u72b6\u6001$i$\u7684\u65b9\u6848\u6570\u3002\u5229\u7528\u4e58\u6cd5\u539f\u7406\uff0c$tot_i$\u7b49\u4e8e$0$\u5230\u72b6\u6001$i$\u7684\u65b9\u6848\u6570\u4e58\u4ee5\u72b6\u6001$i$\u5230$(1<<n)-1$\u7684\u65b9\u6848\u6570\u3002\n\n\u8003\u8651\u6c42\u4ece$0$\u5f00\u59cb\u6bcf\u6b21\u52a0\u4e00\u4e2a\u6570\uff0c\u5230\u4e00\u4e2a\u72b6\u6001$x$\u7684\u65b9\u6848\u6570$total(x)$\uff0c\u6c42\u5b8c\u4ee5\u540e\u7b54\u6848\u5c31\u662f$\\sum_{i=1}^m a_itotal(x)total(((1<<n)-1)\\;xor\\;x)$\u4e86\n\n\u5173\u4e8e\u6c42$total(x)$\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u601d\u60f3\u66b4\u529b\u7684\u65b9\u6cd5\uff1a\u5047\u8bbe$x$\u4e8c\u8fdb\u5236\u6709$c$\u4e2a1\uff0c$i=1\\to c$\u679a\u4e3e\u52a0\u51e0\u6b21\u5230$x$\uff0c\u7136\u540e\u6c42\u51fa$c$\u4e2a\u4e0d\u540c\u7684$1$\u653e\u5230$i$\u4e2a\u4e0d\u540c\u96c6\u5408\u91cc\u7684\u65b9\u6848\u6570\uff0c\u76f4\u63a5\u7b2c\u4e8c\u7c7b\u65af\u7279\u6797\u6570\u4e58\u4ee5\u96c6\u5408\u4e2a\u6570\u7684\u9636\u4e58\uff0c\u56e0\u4e3a\u7b2c\u4e8c\u7c7b\u65af\u7279\u6797\u6570$S(n,m)$\u662f\u6c42$n$\u4e2a\u5e26\u6807\u53f7\u5c0f\u7403\u653e\u8fdb$m$\u4e2a\u76f8\u540c\u76d2\u5b50\u7684\u65b9\u6848\u6570\u7684\n\n\u505a\u6cd5\u6bd4\u8f83\u590d\u6742\uff0c\u53ef\u80fd\u5e38\u6570\u8f83\u5927\n\n```cpp\n#include <stdio.h>\n\nconst int N = 32;\nconst int MOD = 998244353;\n\nvoid upd(int & x, const int & y) {\n\t(x += y) >= MOD ? x -= MOD : 0;\n}\n\nint n, m, S[N][N], fac[N];\n//fac[n] : n! \n//S[n][m] : \u628a1~n\u5206\u8fdbm\u4e2a\u76f8\u540c\u76d2\u5b50\u7684\u65b9\u6848\u6570 (\u7b2c\u4e8c\u7c7b\u65af\u7279\u6797\u6570) \n\nvoid Stirling() { //\u9884\u5904\u7406\u7b2c\u4e8c\u7c7b\u65af\u7279\u6797\u6570\u548c\u9636\u4e58 \n\tfor(int i = fac[0] = 1; i < N; i ++) \n\t\tfac[i] = fac[i - 1] * 1ll * i % MOD;\n\tint n = N - 1, m = N - 1;\n\tfor(int i = 1; i <= n; i ++)\n\t\tS[i][0] = 0, S[i][i] = 1;\n\tfor(int i = 2; i <= n; i ++)\n\t\tfor(int j = 1; j <= m; j ++)\n\t\t\tS[i][j] = ((j * 1ll * S[i - 1][j] % MOD) + S[i - 1][j - 1]) % MOD;\n}\n\nint total(int x) { //\u5408\u6210x\u7684\u65b9\u6848\u6570\n\tint c = __builtin_popcount(x); //\u4e8c\u8fdb\u5236\u4e2d1\u7684\u4e2a\u6570 \n\tif(!c) return 1;\n\tint ans = 0;\n\tfor(int i = 1; i <= c; i ++)\n\t\tupd(ans, S[c][i] * 1ll * fac[i] % MOD);\n\treturn ans;\n}\n\nint main() {\n\tStirling(); \n\tscanf(\"%d%d\", &n, &m);\n\tstatic char state[N];\n\tint t = (1 << n) - 1, ans = 0;\n\tfor(int i = 0; i < m; i ++) {\n\t\tint s = 0, a;\n\t\tscanf(\"%s %d\", state, &a);\n\t\tfor(int j = n - 1; ~ j; j --) //\u5b57\u7b26\u4e32\u8f6c\u6570\u5b57 \n\t\t\ts <<= 1, s |= state[j] ^ 48;\n\t\tint pre = total(s), next = total(t ^ s);\n\t\tupd(ans, pre * 1ll * next % MOD * a % MOD);\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1541326198,
        "uid": 20375,
        "name": "hongzy",
        "ccfLevel": 9,
        "title": "P4996 \u5495\u5495\u5495\u300c\u65af\u7279\u6797\u6570\u300d"
    },
    {
        "content": "**\u9898\u610f**\n\n\u9996\u5148\u7ed9\u5b9a$m$\u4e2a\u957f\u4e3a$n$\u7684\u4e32\uff0c\u548c\u8e29\u4e2d\u6bcf\u4e2a\u9700\u4ed8\u7684\u4ee3\u4ef7\u3002\n\n\u5b9a\u4e49\u6bcf\u6b21\u64cd\u4f5c\u4ece$\\underbrace{000....00}_{n}$\u5f00\u59cb\uff0c\u6bcf\u6b65\u53ef\u4ee5\u4efb\u9009\u81f3\u5c11\u4e00\u4e2a$0$\u53d8\u6210$1$\uff0c\u5f53\u6240\u6709\u4e32\u53d8\u6210$\\underbrace{111....11}_{n}$\u65f6\uff0c\u64cd\u4f5c\u7ed3\u675f\u3002\n\n\u5728\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u5728\u67d0\u65f6\u523b\u5e8f\u5217\u548c\u4e4b\u524d\u7ed9\u5b9a\u7684\u5e8f\u5217\u76f8\u540c\uff0c\u90a3\u4e48\u8981\u4ed8\u7ed9\u5b9a\u5e8f\u5217\u7684\u4ee3\u4ef7\u3002\n\n\u95ee\u5728\u8fd9\u6570\u4e0d\u6e05\u7684\u4e0d\u540c\u64cd\u4f5c\u90fd\u505a\u5b8c\u4e4b\u540e\uff08\u4e24\u6b21\u64cd\u4f5c\u76f8\u540c\u5f53\u4e14\u4ec5\u5f53\u53d8\u6362\u8fc7\u7a0b**\u5b8c\u5168**\u76f8\u540c\uff09\uff0c\u4e00\u5171\u8981\u4ed8\u7684\u4ee3\u4ef7\uff0c\u5bf9$998244353$\u53d6\u6a21\u3002\n\n\n~~\u54c7\u8fd9\u4e2a\u9898\u771f\u5b9e\u7684\u96be\u8bfb\u61c2\u554aqwq~~\n\n**\u4ee5\u4e0b\u5206\u6790**\n\n\u5148\u6765\u8003\u8651\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u4e32$s$\uff0c\u6709\u591a\u5c11\u4e2a\u64cd\u4f5c\uff08\u8bbe\u4e3a$ans$\uff09\u4f1a\u649e\u4e0a\u5b83\u3002\n\n\u53ef\u4ee5\u6ce8\u610f\u5230\uff0c**\u7b54\u6848\u8ddf\u6570\u5b57\u7684\u4f4d\u7f6e\u65e0\u5173**\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u628a\u4e32\u62bd\u8c61\u51fa\u6765\uff0c\u6570\u51fa\u6709$c$\u4e2a$1$\uff0c$(n-c)$\u4e2a$0$\u3002\n\n\u90a3\u4e48\u8fd9$c$\u4e2a$1$\uff0c\u53ef\u80fd\u662f\u7531$c-1$\u4e2a$1$\u7684\u4e32\u8f6c\u79fb\u800c\u6765\uff0c\u53ef\u80fd\u662f$c-2,c-3......0$\u4e2a$1$\u7684\u4e32\u8f6c\u79fb\u800c\u6765\u3002\n\n### dp!\n\n\u8bbe$f[i]$\u4e3a\u8f6c\u79fb\u6210$i$\u4e2a$1$\u7684\u65b9\u6848\u6570\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\uff1a$f[i]=\\sum_{j=0}^{j-1}(f[j]*C_{i}^{j})$\u3002\n\n\u5176\u4e2d$C_i^j$\u662f\u56e0\u4e3a\u6709$C_i^j$\u79cd\u65b9\u5f0f\u4ece$j$\u4e2a$1$\u8f6c\u79fb\u6210$i$\u4e2a$1$\u3002\uff08\u5728$i$\u4e2a\u91cc\u9762\u94a6\u5b9a$j$\u4e2a\u4e3a\u539f\u6709\u7684$1$\u7684\u65b9\u6848\u6570\u4e3a$C_i^j$\uff09\n\n\u90a3\u4e48\u4ece$000.....0$\u8f6c\u79fb\u5230$s$\u7684\u65b9\u6848\u6570\u5c31\u4e3a$f[c]$\u3002\n\n\u800c\u4ece$s$\u8f6c\u79fb\u5230$111.....1$\u7684\u65b9\u6848\u6570\u53ef\u4ee5\u5012\u7740\u601d\u8003\uff1a\u4ece$111.....1$\u8f6c\u79fb\u5230$s$\uff0c\u6709$(n-c)$\u4e2a$1$\u53d8\u6210\u4e86$0$\u5bf9\u53ed\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u64cd\u8d77\u6c42\u8fc7\u7684$f$\u6570\u7ec4\uff0c\u4ece$s$\u8f6c\u79fb\u5230\u5168$1$\u4e32\u7684\u65b9\u6848\u6570\u5c31\u4e3a$f[n-c]$\u3002\n\n\u7136\u540e\u7528\u4e58\u6cd5\u539f\u7406\u4e58\u8d77\u6765\uff0c\u5c31\u5f97\u5230\u4e86\u4f1a\u7ecf\u8fc7\u4e32$s$\u7684\u64cd\u4f5c\u6570\uff0c\u518d\u4e58\u4e0a\u4e32$s$\u7684\u5355\u6b21\u4ee3\u4ef7\u5c31\u662f\u8fd9\u4e2a\u4e32\u9020\u6210\u7684\u603b\u4ee3\u4ef7\u4e86\u3002\n\n\u6700\u540e\u628a$m$\u4e2a\u4e32\u7684\u4ee3\u4ef7\u52a0\u8d77\u6765\u5c31\u662f\u7b54\u6848\u3002\n\n```\n/*\n\tqwerta \n\tP4996 \u5495\u5495\u5495 Accepted \n\t100\n\t\u4ee3\u7801 C++\uff0c0.6KB\n\t\u6bd4\u8d5b \u3010LGR-055\u3011\u6d1b\u8c3711\u6708\u6708\u8d5b\n\t\u63d0\u4ea4\u65f6\u95f4 2018-11-04 11:58:31//\u4e0b\u8003\u524d\u51e0\u5341\u79d2\u53d1\u73b0\u81ea\u5df1\u5fd8\u5f00long long\uff0c\u592a\u771f\u5b9e\u4e86qwq\n\t\u8017\u65f6/\u5185\u5b58 108ms, 804KB\n*/\n#include<iostream>\n#include<cstdio>\nusing namespace std;\n#define LL long long//\u4e00\u5e74OI\u4e00\u573a\u7a7a\uff0c\u4e0d\u5f00long long\u89c1\u7956\u5b97\nconst int mod=998244353;\nLL f[23];\nchar s[23];\nLL je(int x)//\u8fd4\u56dex!\uff08\u56e0\u4e3a20!\u6ca1\u7206long long\u5c31\u76f4\u63a5\u4e71\u641e\u4e86\n{\n    LL ans=1;\n    while(x)\n    {\n        ans*=x;\n        x--;\n    }\n    return ans;\n}\nLL C(int q,int w)//\u8fd4\u56deC(q,w)\n{\n    return je(q)/je(w)/je(q-w);\n}\nint main()\n{\n    ios::sync_with_stdio(false);\n    int n,m;\n    cin>>n>>m;\n    f[0]=1;//\u521d\u59cb\u5316\n    //\u5148\u628af\u9884\u5904\u7406\u51fa\u6765\n    for(int i=1;i<=n;++i)\n    {\n        for(int j=0;j<i;++j)\n        {\n            f[i]+=C(i,j)*f[j]%mod;\n            f[i]%=mod;\n        }\n    }\n    LL ans=0;\n    for(int i=1;i<=m;++i)\n    {\n        cin>>s;\n        int c=0;//c\u4e3as\u4e2d1\u7684\u4e2a\u6570\n        for(int j=0;j<n;++j)\n        c+=s[j]-'0';\n        int v;//\u8fd9\u4e2a\u4e32\u7684\u5355\u6b21\u4ee3\u4ef7\n        cin>>v;\n        ans+=(LL)f[c]*f[n-c]%mod*v%mod;\n        ans%=mod;\n    }\n    cout<<ans;\n    return 0;\n}\n```",
        "postTime": 1541319057,
        "uid": 48681,
        "name": "qwerta",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u4e0a\u5348\u597d\u50bb\u554a\uff0c\u5199\u4e86\u4e00\u4e2a\u66b4\u529b\u7684$3^n$\u679a\u4e3e\u5b50\u96c6\u62ff\u5230\u4e86$70$\u5c31\u5feb\u4e50\u8d70\u4eba\u4e86\n\n\u4e4b\u540e\u5c31\u6eda\u7c97\u4e86\n\n\u8fd9\u9053\u9898\u8fd8\u662f\u4e0d\u96be\u7684\n\n\u9996\u5148\u5c31\u662f$O(3^n)$\u7684\u679a\u4e3e\u5b50\u96c6\uff0c\u6211\u4eec\u8bbe$dp[S]$\u8868\u793a\u4ece\u8d77\u70b9$0$\u5230$S$\u72b6\u6001\u7684\u6240\u6709\u6127\u759a\u503c\u4e4b\u548c\u662f\u591a\u5c11\n\n\u663e\u7136\u6240\u6709\u80fd\u8f6c\u79fb\u5230$S$\u7684\u72b6\u6001\u5fc5\u5b9a\u662f\u5176\u5b50\u96c6\uff0c\u4e8e\u662f\u5219\u6709\n\n$$dp[S]=\\sum_{t\\in S}dp[t]+f[t]*num[t]$$\n\n$f[t]$\u8868\u793a\u4ece$t$\u72b6\u6001\u505a\u4e00\u4e2a\u51b3\u5b9a\u4ea7\u751f\u7684\u6127\u759a\u503c\uff0c$num[t]$\u8868\u793a\u4ece$0$\u5230$t$\u7684\u65b9\u6848\u6570\n\n$num[S]$\u53ef\u4ee5\u4e00\u8d77\u8f6c\u79fb\n\n$$num[S]=\\sum_{t\\in S}num[t]$$\n\n\u4e4b\u540e\u5c31\u6709\u4e86\u4e00\u4efd$70$\u5206\u7684\u4ee3\u7801\u4e86\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define LL long long\n#define re register\n#define maxn 1048578\nconst int mod=998244353;\ninline int read()\n{\n\tchar c=getchar();\n\tint x=0;\n\twhile(c<'0'||c>'9') c=getchar();\n\twhile(c>='0'&&c<='9')\n\t\tx=(x<<3)+(x<<1)+c-48,c=getchar();\n\treturn x;\n}\nLL dp[maxn];\nint N,n,m;\nLL f[maxn],num[maxn];\nchar S[21];\nint main()\n{\n\tn=read(),m=read();\n\tN=(1<<n)-1;\n\tint val;\n\tfor(re int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%s%d\",S,&val);\n\t\tint now=0;\n\t\tfor(re int j=0;j<n;j++)\n\t\t\tif(S[j]=='1') now|=(1<<j);\n\t\tf[now]+=val;\n\t}\n\tnum[0]=1;\n\tfor(re int i=1;i<=N;i++)\n\t{\n\t\tfor(re int t=i;t;t=(t-1)&i)\n\t\t\tdp[i]=(dp[i]+f[i^t]*num[i^t]%mod+dp[i^t])%mod,num[i]=(num[i]+num[i^t])%mod;\n\t}\n\tstd::cout<<(dp[N]+num[N]*f[N]%mod)%mod;\n\treturn 0;\n}\n```\n\n\n$O(3^n)$\u81ea\u7136\u8fc7\u4e0d\u4e86$20$\u7684\u6570\u636e\u7684\uff0c\u8fd9\u4e2a\u65f6\u5019\u601d\u8003\u4e00\u4e0b\u8fd9\u4e2a$dp$\u7684\u672c\u8d28\u662f\u4ec0\u4e48\n\n\u6839\u636e\u4e0a\u9762\u90a3\u4e2a\u9012\u63a8\u7684\u65b9\u7a0b\uff0c\u6211\u4eec\u53d1\u73b0\u6bcf\u4e2a$f[t]$\u5728\u7b54\u6848\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\u662f$num[t]*num[\u2201_{U}t]$\n\n\u56e0\u4e3a\u5bf9\u4e8e$t$\u7684\u6bcf\u4e00\u4e2a\u8865\u96c6\u6211\u4eec\u90fd\u662f\u4f1a\u679a\u4e3e\u5230$t$\uff0c\u6bcf\u6b21\u679a\u4e3e\u5230$t$\u90a3\u4e48$f[t]$\u5c31\u4f1a\u51fa\u73b0$num[t]$\u6b21\uff0c\u800c\u8fd9\u4e9b$t$\u7684\u8865\u96c6\u81ea\u7136\u4f1a\u5f80\u540e\u4f20\u9012\uff0c\u4f20\u9012\u6b21\u6570\u662f$num[\u2201_{U}t]$\u6b21\uff0c\u6240\u4ee5\u4e00\u5171\u4f1a\u51fa\u73b0$num[t]*num[\u2201_{U}t]$\u6b21\n\n\u597d\u50cf\u8fd9\u4e2a\u5f80\u540e\u4f20\u9012\u7684\u6b21\u6570\u6709\u4e9b\u96be\u4ee5\u7406\u89e3\uff0c\u5176\u5b9e\u53ef\u4ee5\u53cd\u7740\u8003\u8651\u6210\u4ece\u5168\u96c6$U$\u5230$S$\u7684\u65b9\u6848\u6570\uff0c\u90a3\u81ea\u7136\u662f$num[\u2201_{U}t]$\u6b21\n\n\u4f46\u662f\u53d1\u73b0\u73b0\u5728\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u8fd8\u662f$O(3^n)$\uff0c\u56e0\u4e3a$num$\u5e76\u4e0d\u597d\u6c42\n\n\u4f46\u662f\u663e\u7136\u5982\u679c\u4e24\u4e2a\u72b6\u6001$1$\u7684\u4e2a\u6570\u76f8\u7b49\uff0c\u90a3\u4e48$num$\u80af\u5b9a\u4e5f\u76f8\u7b49\n\n\u90a3\u4e48\u6211\u4eec\u8bbe$g[i]$\u8868\u793a\u5f53$S$\u4e2d\u6709$i$\u4e2a$1$\u7684\u65f6\u5019\u7684$num$\u7684\u503c\u4e3a\u591a\u5c11\n\n\u6211\u4eec\u518d\u6765\u8003\u8651\u4e00\u4e0b\u4e0a\u9762\u90a3\u4e2a\u5173\u4e8e$num$\u7684\u9012\u63a8\u5f0f\u7684\u672c\u8d28\uff0c\u90a3\u4e2a\u4e0d\u5c31\u662f\u679a\u4e3e\u5b50\u96c6\u5417\uff0c\u5bf9\u4e8e$1$\u7684\u4e2a\u6570\u76f8\u540c\u7684\u5b50\u96c6\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u653e\u5230\u4e00\u8d77\u7b97\u554a\uff0c\u800c\u4e00\u4e2a\u6709$i$\u4e2a\u5143\u7d20\u7684\u96c6\u5408\uff0c\u5143\u7d20\u4e2a\u6570\u4e3a$j$\u7684\u5b50\u96c6\u81ea\u7136\u6709$\\binom{i}{j}$\u4e2a\n\n\u6240\u4ee5\u5c31\u6709\n\n$$g[i]=\\sum_{j=0}^{i-1}\\binom{i}{j}*g[j]$$\n\n\u6240\u4ee5\u73b0\u5728\u5c31\u975e\u5e38\u597d\u505a\u4e86\n\n\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#define LL long long\n#define re register\n#define lowbit(x) ((x)&(-x))\n#define maxn 1048578\nconst int mod=998244353;\nLL f[maxn],dp[maxn];\nLL c[21][21],g[21];\nint n,m,N;\nchar S[21];\ninline int cnt(int x)\n{\n\tint t=0;\n\twhile(x) t++,x-=lowbit(x);\n\treturn t;\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tN=(1<<n)-1;\n\tint val;\n\tfor(re int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%s%d\",S,&val);\n\t\tint now=0;\n\t\tfor(re int j=0;j<n;j++)\n\t\t\tif(S[j]=='1') now|=(1<<j);\n\t\tf[now]+=val;\n\t}\n\tc[0][0]=1;\n\tfor(re int i=1;i<=n;i++) c[i][0]=c[i][i]=1;\n\tfor(re int i=2;i<=n;i++)\n\t\tfor(re int j=1;j<i;j++)\n\t\t\tc[i][j]=(c[i-1][j-1]+c[i-1][j])%mod;\n\tg[0]=1;\n\tfor(re int i=1;i<=n;i++)\n\t\tfor(re int j=0;j<i;j++)\n\t\t\tg[i]=(g[i]+g[j]*c[i][j]%mod)%mod;\n\tLL ans=0;\n\tfor(re int i=0;i<=N;i++) \n\t\tans=(ans+f[i]*g[cnt(i)]%mod*g[n-cnt(i)]%mod)%mod;\n\tstd::cout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1541317027,
        "uid": 35178,
        "name": "asuldb",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u7684\u610f\u601d\u662f\u6c42\u51fa\u6240\u6709\u53ef\u80fd\u5b8c\u6210\u4efb\u52a1\u7684\u987a\u5e8f\u83b7\u5f97\u7f9e\u6127\u503c\u7684\u603b\u548c\uff0c\u5f53\u5b8c\u6210\u4efb\u52a1\u7684\u60c5\u51b5\u8ddf\u8f93\u5165\u60c5\u51b5\u7684\u67d0\u4e00\u60c5\u51b5\u76f8\u540c\u65f6\uff0c\u5c31\u4f1a\u83b7\u5f97\u76f8\u5e94\u7684\u7f9e\u6127\u503c\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u53ea\u8981\u6211\u4eec\u6c42\u52a9\u5b83\u4e00\u5171\u7684\u51fa\u73b0\u6b21\u6570\uff0c\u518d\u4e58\u4e0a\u4ed6\u7684\u7f9e\u6127\u503c\u5c31\u53ef\u4ee5\u5f97\u5230\u6700\u540e\u7684\u7b54\u6848\uff0c\u6839\u636e\u4e58\u6cd5\u539f\u7406\u76f8\u4e58\u5c31\u53ef\u4ee5\u5f97\u5230\u6bcf\u79cd\u72b6\u6001\u7684\u51fa\u73b0\u6b21\u6570\u3002\uff08\u8fd9\u9053\u9898\u4e5f\u53ef\u4ee5\u7528\u72b6\u538b\u6765\u505a\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4ef6\u4e8b\uff0c\u8981\u4e48\u505a\u4e86\u8981\u4e48\u8fd8\u6ca1\u505a\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4e8c\u8fdb\u5236\u7684 0 \u548c 1 \u6765\u8868\u793a\uff09\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<cmath>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst int N=22,MOD=998244353;//\u5077\u61d2\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6a21\u6570\nlong long n,m,a[N][N],f[N],ans=0;//\u60c5\u51b5\u53ef\u80fd\u5f88\u591a\u8981\u5f00 long long\n//a[i][j] \u8868\u793a\u524d i \u4e2a\u4e2d\u6709 j \u4e2a 1 \u7684\u60c5\u51b5\uff0cf[i]\u8868\u793a\u6709 i \u4e2a 1 \u7684\u65b9\u6848\u6570\nint main()\n{\n\tfor(int i=1;i<=20;i++)\n\t{\n\t\ta[i][1]=i;\n\t\ta[i][i]=1;\n\t\ta[i][0]=1;\n\t}// n \u6700\u5927\u4e3a 20\uff0c\u5148\u9884\u5904\u7406\u51fa\u6240\u6709\u60c5\u51b5\n\tfor(int i=3;i<=20;i++)\n\t{\n\t\tfor(int j=2;j<i;j++)\n\t\t{\n\t\t\ta[i][j]=(a[i-1][j]+a[i-1][j-1])%MOD;//\u4e58\u6cd5\u539f\u7406\u76f8\u4e58\u5f97\u51fa a[i][j]\n\t\t}\n\t}\n\tf[0]=1;//\u521d\u59cb\u5316\n\tfor(int i=1;i<=20;i++)\n\t{\n\t\tfor(int j=1;j<=i;j++)\n\t\t{\n\t\t\tf[i]=(f[i]+(f[i-j]*a[i][j])%MOD)%MOD;//\u540c\u4e0a\n\t\t}\n\t}\n\tcin>>n>>m;//\u8bfb\u5165\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint c=0,z;\n\t\tchar x;\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\twhile((scanf(\"%c\",&x))==1&&(x<'0'||x>'9'));//\u8fb9\u8bfb\u5165\u8fb9\u5904\u7406\n\t\t\tif(x=='1')\n\t\t\t{\n\t\t\t\tc++;//\u6c42\u51fa 1 \u7684\u4e2a\u6570\n\t\t\t}\n\t\t}\n\t\tcin>>z;\n\t\tans=(ans+((f[c]*z%MOD)*f[n-c]%MOD))%MOD;//\u51fa\u73b0\u6b21\u6570\u4e58\u4e0a\u83b7\u5f97\u7684\u6743\u503c\n\t}\n\tcout<<ans;//\u8f93\u51fa\u6700\u540e\u7b54\u6848\n\treturn 0;\n}\n```\n",
        "postTime": 1597986425,
        "uid": 317898,
        "name": "qmq\u83dc\u6b7b\u4e86",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4996 \u3010\u5495\u5495\u5495\u3011"
    }
]
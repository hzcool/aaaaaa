[
    {
        "content": "\u770b\u5230\u5404\u4f4ddalao\u90fd\u7528\u7684\u662fx-y\u5750\u6807\u6392\u5e8f...\n\n\u8fd9\u91cc\u5c31\u6765\u5b89\u5229\u4e00\u53d1\u81ea\u5df1\u7684\u6781\u89d2\u5e8f..\n\n\u6781\u89d2\u5e8f\u6700\u5927\u7684\u597d\u5904\u5c31\u662f\u4e0d\u4ec5\u53ef\u4ee5\u5904\u7406\u51f8\u58f3, \u8fd8\u53ef\u4ee5\u5904\u7406\u6574\u4e2a\u51f8\u5305.\n\n\u6bd4\u5982\u6709\u4e00\u9053\u4f8b\u9898\u662fCF70D, \u662f\u52a8\u6001\u51f8\u5305\u88f8\u9898, \u8fb9\u754c\u6761\u4ef6\u8981\u6bd4\u8fd9\u9898\u626f\u6de1..\n\n\u5f53\u7136\u5199\u9898\u89e3\u5e76\u4e0d\u53ea\u662f\u56e0\u4e3a\u6781\u89d2\u5e8f, \u8fd8\u56e0\u4e3a\u4e00\u4e9bC++\u7684\u5947\u602a\u64cd\u4f5c\u8ba9\u6211\u7279\u522b\u60f3\u5410\u69fd.\n\n\n\u8bf4\u4e0b\u5927\u4f53\u601d\u8def,\n\n\u9996\u5148\u80af\u5b9a\u662f\u8981\u5c06\u6240\u6709\u64cd\u4f5c\u53cd\u8fc7\u6765 \u53d8\u5220\u9664\u4e3a\u63d2\u5165 \u7136\u540e\u5c31\u662f\u7528\u5e73\u8861\u6811\u7ef4\u62a4\u51f8\u5305\u4e86\u561b\n\n\u53ea\u4e0d\u8fc7\u8fd9\u91cc\u7528\u7684\u6bd4\u8f83\u662f\u6781\u89d2\u5e8f\u800c\u5df2\n\n\u5b66\u8fc7\u534a\u5e73\u9762\u4ea4\u7684\u4eba\u5927\u6982\u5bf9\u6781\u89d2\u5e8f\u5f88\u719f\u6089\u4e86.\n\n\u4e0d\u5c11\u4eba\u90fd\u559c\u6b22\u7528atan2, \u4f46\u662f\u6211\u4e00\u76f4\u559c\u6b22\u7528\u53c9\u79ef.\n\n\u603b\u89c9\u5f97atan2\u4f1a\u51fa\u4e00\u4e9b\u5947\u602a\u7684\u7cbe\u5ea6\u95ee\u9898.\n\n\u8fd9\u6837\u5c31\u8981\u5206x\u8f74\u4e0a\u4e0b\u6765\u8fdb\u884c\u8ba8\u8bba, \u4e0d\u7136\u4f1a\u51fa\u95ee\u9898.\n\n\u8fd9\u91cc\u53ea\u8981\u6c42\u4e0a\u51f8\u58f3\u6240\u4ee5\u6781\u89d2\u5e8f\u90fd\u53ef\u4ee5\u7b80\u5316, \u4e0d\u7528\u5224\u65adx\u8f74\u4e0a\u4e0b\u4e86\n\n\u800c\u4e14\u51fa\u9898\u4eba\u505a\u4e86\u5404\u79cd\u5404\u6837\u7684\u4fdd\u8bc1\u5c31\u6bd4\u8f83\u8212\u670d\u4e86...\n\n\u5f88\u591a\u6761\u4ef6\u5c31\u4e0d\u7528\u8003\u8651\u4e86, \u6bd4\u5982\u8981\u628aset\u9996\u5c3e\u76f8\u63a5\u4e4b\u7c7b\u7684\u5c31\u7528\u4e0d\u5230\u4e86\n\n\n\u90a3\u4e48\u5927\u4f53\u6765\u8bf4\u5c31\u662f\u8fd9\u4e48\u4e00\u4e2a\u6bd4\u8f83\u51fd\u6570:\n\n```cpp\ninline bool operator <(const vec &A,const vec &B){\n    if(A.x==B.x&&A.y==B.y) return 0;\n    vec a=A-sq,b=B-sq;\n    int d=dcmp(a*b);\n    if(!d){\n        int dd=dcmp(len(a)-len(b));\n        if(!dd) return dcmp(a*vec(0,1))>0;\n        return dd>0;\n    } return d>0;\n}\n```\n\u56e0\u4e3a\\*\u5f31\u6392\u5e8f\u539f\u7406\\*\u5bfc\u81f4\u8fd9\u4e2a\u51fd\u6570\u5199\u7684\u7279\u522b\u626d\u66f2..\n\n\u5176\u4e2d\u8fd9\u4e2asq\u662f\u4e2a\u5168\u5c40\u53d8\u91cf, \u6211\u4eec\u53ea\u8981\u4fdd\u8bc1\u8fd9\u662f\u4e00\u4e2a\u4e00\u76f4\u5728\u51f8\u5305\u4e2d\u7684\u70b9\u5c31ok\n\n\u800c\u521a\u5f00\u59cb\u4f1a\u7ed9\u4e00\u4e2a\u4e09\u89d2\u5f62[(0,0),(n,0),(x,y)], \u6240\u4ee5($\\frac n2$,0)\u80af\u5b9a\u662f\u5728\u51f8\u5305\u4e0a\u7684, \u800c\u4e14\u8fd9\u6837\u7684a,b\u5411\u91cf\u90fd\u5728x\u8f74\u7684\u4e0a\u65b9, \u6781\u89d2\u5e8f\u4e5f\u597d\u5199. \u6240\u4ee5\u4ee4sq=(n\\*0.5,0)\u5c31\u975e\u5e38\u5408\u9002\u4e86.\n\n\n\u5468\u957f\u7684\u8bdd\u5c31\u52a0\u70b9\u7684\u65f6\u5019\u987a\u4fbf\u7ef4\u62a4\u4e86\u5c31\u884c.\n\n\u5177\u4f53\u7684\u7ec6\u8282\u548c\u4e00\u4e9b\u5410\u69fd\u53ef\u4ee5\u89c1\u6211\u7684[blog](http://blog.csdn.net/enzymii/article/details/79108684)\n\n~~(\u5176\u5b9e\u4f60\u5199\u9898\u89e3\u7684\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u5b89\u5229blog\u5427~~\n",
        "postTime": 1516353969,
        "uid": 18455,
        "name": "Enzymii",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2521 \u3010[HAOI2011]\u9632\u7ebf\u4fee\u5efa\u3011"
    },
    {
        "content": "## \u52a8\u6001\u51f8\u5305\u6a21\u677f\u9898\n\u5bf9\u4e8e\u52a8\u6001\u51f8\u5305\uff0c\u5e38\u7528\u7684\u65b9\u6cd5\u6709\u7528\u5e73\u8861\u6811\u6216STL\uff08\u901a\u5e38\u4e3aset\uff0cmap\uff09\u7ef4\u62a4\u4e0a\u4e0b\u51f8\u58f3\u6216\u6781\u89d2\u3002\u7531\u4e8e\u5e73\u8861\u6811\u7684\u4ee3\u7801\u91cf\u5f88\u5927\uff0c\u5bf9\u4e8e\u4e0d\u719f\u6089\u7684\u849f\u84bb\uff08\u6211\uff09\u6765\u8bf4\u53c8\u5f88\u96be\u8c03\u8bd5\uff0c\u6c34\u5e73\u5e8f\u5728\u5904\u7406\u4e00\u4e9b\u7279\u6b8a\u95ee\u9898\u65f6\u53c8\u8fc7\u4e8e\u590d\u6742\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e0a\u4e00\u53d1\u7528set\u7ef4\u62a4\u6781\u89d2\u5e8f\u7684\u4ee3\u7801\u3002\n\n\u6ce8\uff1aset\u7684\u672c\u8d28\u4e5f\u662f\u5e73\u8861\u6811\uff0c\u6240\u4ee5\u89e3\u51b3\u52a8\u6001\u51f8\u5305\u95ee\u9898\u7684\u5b9e\u8d28\u662f\u7528\u652f\u6301\u5feb\u901f\u63d2\u5165\u7684\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u4e00\u822c\u51f8\u5305\u95ee\u9898\u3002\n\n### \u5bf9\u4e8e\u672c\u9898\n\n\u7531\u4e8e\u53ea\u6709\u64a4\u9500\u64cd\u4f5c\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u64cd\u4f5c\u53cd\u5411\u53d8\u4e3a\u63d2\u5165\u64cd\u4f5c\u3002\n\n\u5728\u66f4\u65b0\u51f8\u5305\u7684\u540c\u65f6\u66f4\u65b0\u6700\u77ed\u5468\u957f\uff0c\u5177\u4f53\u64cd\u4f5c\u89c1\u4ee3\u7801\u3002\n\n\u672c\u9898\u6211\u5728\u5904\u7406\u6781\u89d2\u5e8f\u662f\u91c7\u7528\u7684 atan2\uff0c\u4e3a\u4e86\u907f\u514d\u7cbe\u5ea6\u95ee\u9898\uff0c\u6211\u5728\u9009\u53d6\u539f\u70b9\u7684\u65f6\u5019\u968f\u673a\u4e86\u4e09\u4e2a\u6743\u503c\uff08\u7136\u800c\u597d\u50cf\u5e76\u6ca1\u6709\u4ec0\u4e48\u7528\uff09\u3002\u603b\u4e4b\uff0c\u6781\u89d2\u5e8f\u7684\u7cbe\u5ea6\u4e00\u76f4\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u65e0\u8bba\u662f\u7528\u4f18\u5316\u539f\u70b9\u6216\u8005\u91c7\u7528\u53c9\u79ef\u7684\u65b9\u5f0f\uff0c\u90fd\u4f1a\u6709\u76f8\u5e94\u7684\u5229\u5f0a\uff0c\u5927\u4f6c\u4eec\u968f\u610f\u3002\n\n#### \u5b8c\n\n\n------------\n\n_Talk is cheap, show me the code_\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define re register\n#define mn 100005\nusing namespace std;\n\ninline ll read(){\n    re ll x=0,f=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        if(ch=='-')\n            f=-1;\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    return x*f;\n}\n\nstruct dr{ //\u4e71\u53d6\u7684\u53d8\u91cf\u540d \n\tll x,y;\n\tdouble Ang;//atan2 \n\tll operator *(const dr b)const{return x*b.y-y*b.x;} //\u4fbf\u4e8e\u7b97\u53c9\u79ef \n\tdr operator -(const dr b)const{return dr{x-b.x,y-b.y};} //\u5411\u91cf\u51cf\u6cd5 \n\tbool operator <(const dr b)const{return Ang<b.Ang;}\n}A,B,C;\n\nll a[mn][2],c[mn];\nint n,p,m;\nbool v[mn];\ndouble X,Y,ans[mn],len;\nset<dr> S;\n#define IT set<dr>::iterator\n\ninline dr Pre(dr x){\n\tif(S.count(x)>0) return x;\n\tIT p=S.lower_bound(x);\n\tif(p==S.begin()) p=S.end();\n\treturn *--p;\n}//\u524d\u9a71 \n\ninline dr Nxt(dr x){\n\tIT p=S.upper_bound(x);\n\tif(p==S.end()) p=S.begin();\n\treturn *p;\n}//\u540e\u7ee7 \n\ninline ll Cross(dr x,dr y,dr z){\n\treturn (x-z)*(y-z);\n}//\u53c9\u79ef \n\ninline double Dis(dr x,dr y){\n\treturn sqrt(double((x.x-y.x)*(x.x-y.x)+(x.y-y.y)*(x.y-y.y)));\n}//\u8ddd\u79bb \n\ninline void insert(dr x){\n\tif(Cross(x,Nxt(x),Pre(x))<=0) return;\n\tlen-=Dis(Nxt(x),Pre(x));//\u5148\u5220\u6389\u4e00\u6761\u5fc5\u5220\u7684\u8fb9 \n\twhile(true){\n\t\t//\u5411\u524d\u9a71\u65b9\u5411\u62d3\u5c55 \n\t\tdr p1=Pre(x),p2;\n\t\tS.erase(p1); p2=Pre(x);\n\t\t//\u5c0f\u7ec6\u8282:\u5148\u5220\u70b9\u518d\u5224\u65ad,\u4e0d\u7528\u5220\u7684\u70b9\u52a0\u56de\u5373\u53ef \n\t\tif(Cross(x,p2,p1)>=0){\n\t\t\tlen+=Dis(x,p1);\n\t\t\tS.insert(p1);\n\t\t\tbreak;\n\t\t}\n\t\tlen-=Dis(p2,p1);\n\t}\n\twhile(true){\n\t\t//\u5411...\u65b9\u5411\u62d3\u5c55 \n\t\tdr p1=Nxt(x),p2;\n\t\tS.erase(p1); p2=Nxt(x);\n\t\tif(Cross(x,p2,p1)<=0){\n\t\t\tlen+=Dis(x,p1);\n\t\t\tS.insert(p1);\n\t\t\tbreak;\n\t\t}\n\t\tlen-=Dis(p2,p1);\n\t}\n\tS.insert(x);\n}\n\nint main(){\n\tsrand(time(0));\n\t \n\tA=dr{0,0,0};\n\tB=dr{read(),0,0};\n\tC=dr{read(),read(),0};\n\t//\u521d\u59cb\u70b9 \n\tll xx=rand(),yy=rand(),zz=rand(),tt=xx+yy+zz;\n\tX=1.0*(xx*A.x+yy*B.x+zz*C.x)/tt;\n\tY=1.0*(xx*A.y+yy*B.y+zz*C.y)/tt;\n\t//\u968f\u673a\u6743\u503c,\u7528\u91cd\u5fc3\u7684\u601d\u60f3\u786e\u5b9a\u4e00\u4e2a\u539f\u70b9 \n\tA.Ang=atan2(A.y-Y,A.x-X);\n\tB.Ang=atan2(B.y-Y,B.x-X);\n\tC.Ang=atan2(C.y-Y,C.x-X);\n\tS.insert(A),S.insert(B),S.insert(C);\n\tlen=Dis(B,C)+Dis(A,C);\n\t//\u521d\u59cb\u5316 \n\tn=read();\n\tfor(re int i=1;i<=n;i++){\n\t\ta[i][0]=read();\n\t\ta[i][1]=read();\n\t}\n\tm=read();\n\tfor(re int i=1,l;i<=m;i++){\n\t\tl=read();\n\t\tif(l==1){\n\t\t\tc[i]=read();\n\t\t\tv[c[i]]=true;\n\t\t}\n\t}\n\t//\u9898\u610f \n\tfor(re int i=1;i<=n;i++){\n\t\tif(!v[i]){\n\t\t\tinsert(dr{a[i][0],a[i][1],atan2(a[i][1]-Y,a[i][0]-X)});\n\t\t}\n\t}\n\t//\u5c06\u59cb\u7ec8\u4e0d\u4f1a\u64a4\u9500\u7684\u70b9\u52a0\u5165\u51f8\u5305 \n\tfor(re int i=m;i>=1;i--){\n\t\tif(c[i]){\n\t\t\tinsert(dr{a[c[i]][0],a[c[i]][1],atan2(a[c[i]][1]-Y,a[c[i]][0]-X)});\n\t\t}\n\t\telse{\n\t\t\tans[++p]=len;\n\t\t}\n\t}\n\tfor(re int i=p;i>=1;i--){\n\t\tprintf(\"%.2lf\\n\",ans[i]);\n\t}\n\t//\u53cd\u5411\u63d2\u5165\u540e\u53cd\u5411\u8f93\u51fa \n\treturn 0;\n}\n```\n\u6ce8\uff1a\u6211\u770b\u4e86\u4e00\u4e0b\u6211\u7684\u4ee3\u7801\u8dd1\u5f97\u633a\u6162\uff0c\u6240\u4ee5\u4f38\u624b\u515a\u8fd8\u662f\u53bb\u770b\u5176\u4ed6\u9898\u89e3\u5427\u3002",
        "postTime": 1586579110,
        "uid": 236099,
        "name": "H_D_NULL",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2521 \u3010[HAOI2011]\u9632\u7ebf\u4fee\u5efa\u3011"
    }
]
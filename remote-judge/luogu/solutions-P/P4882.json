[
    {
        "content": "\u770b\u5230\u53ea\u6709\u9012\u63a8\u7248\u6570\u4f4ddp\uff0c\u6765\u4e00\u53d1\u8bb0\u641c\u7248\u7684\u6570\u4f4ddp\uff08\u611f\u89c9\u4f1a\u6bd4\u9012\u63a8\u597d\u5199\u5f88\u591a\uff09\uff0c\u9020\u798f\u4e00\u4e0b\u8bb0\u641c\u515a\u3002\n\n\u5f00\u59cb\u8fd9\u9053\u9898\u524d\u5148\u8bf4\u4e00\u53e5\uff0c\u9898\u9762\u6709\u70b9\u6a21\u7cca\uff0c\u4e8b\u5b9e\u4e0a**\u53ea\u8981**\u6709\u4efb\u610f\u8fde\u7eed$3$\u4f4d$A,B,C$\u6ee1\u8db3\u6761\u4ef6\uff0c\u5c31\u53ef\u4ee5\u770b\u505a\u662f\u6ee1\u8db3\u6761\u4ef6$3$\uff0c\u800c\u4e0d\u662f\u6240\u6709\u7684$A,B,C$\u90fd\u6ee1\u8db3\u6761\u4ef6\u624d\u7b97\u6ee1\u8db3\u6761\u4ef6$3$\u3002\n\n\u6211\u4eec\u8bbe$f[i][j][k][l][ok(0/1)]$\u8868\u793a\u505a\u5230\u7b2c$i$\u4f4d\uff0c\u6709$j$\u4e2a$6$\u6216$9$\uff0c\u4e0a\u4e00\u4e2a\u662f$k$\uff0c\u4e0a\u4e0a\u4e2a\u662f$l$\uff0c\u662f\u5426\u6ee1\u8db3\u6761\u4ef6$3$\u7684\u603b\u65b9\u6848\u6570\u3002\n\n\u90a3\u4e48\u53ea\u9700\u8981\u641c\u7d22\u7684\u65f6\u5019\u5224\u4e00\u4e0b\u5f53\u524d\u7684\u6570\u5b57\u548c$k,l$\u662f\u5426\u6ee1\u8db3\u7b2c\u4e09\u70b9\uff0c\u66f4\u65b0\u4e00\u4e0b\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5177\u4f53\u8fd8\u662f\u770b\u4ee3\u7801\u5427\uff0c\u6ce8\u91ca\u8fd8\u662f\u5f88\u8be6\u7ec6\u7684\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int N=55;\n\nnamespace bignum\n{\n\t#define re register\n\tconst int base=10000;\n\tstruct big\n\t{\n\t\tint a[15],n;\n\t\tbig(const int x=0){memset(a,0,sizeof(a)),n=0;if(x)n=1,a[1]=x;}\n\t\tinline friend big operator+(const big &x,const big &y)\n\t\t{\n\t\t\tbig ans;ans.n=max(x.n,y.n);\n\t\t\tfor(re int i=1;i<=ans.n;i++)\n\t\t\t{\n\t\t\t\tans.a[i]+=x.a[i]+y.a[i];\n\t\t\t\tif(ans.a[i]>=base)ans.a[i+1]++,ans.a[i]-=base;\n\t\t\t}\n\t\t\twhile(ans.a[ans.n+1])ans.n++;\n\t\t\treturn ans;\n\t\t}\n\t\tinline friend void operator+=(big &x,const big &y){x=x+y;}\n\t};\n\tinline void write(big x)\n\t{\n\t\tif(!x.n){putchar('0');return;}\n\t\tprintf(\"%d\",x.a[x.n]);\n\t\tfor(re int i=x.n-1;i;i--)printf(\"%04d\",x.a[i]);\n\t}\n\t#undef re\n}using namespace bignum;\n//\u538b\u4f4d\u9ad8\u7cbe\n\nint n,m;\nbool vis[N][N][12][12][2];//vis\u8868\u793a\u5f53\u524d\u72b6\u6001\u662f\u5426\u88ab\u8bbf\u95ee\u8fc7\nbig f[N][N][12][12][2];\nbig zero=0,one=1;\nbig dfs(int step,int cnt,int pre,int ppre,bool ok)//\u505a\u5230\u7b2c\u51e0\u4f4d\uff0c\u6709\u51e0\u4e2a6/9\uff0c\u4e0a\u4e00\u4f4d\uff0c\u4e0a\u4e0a\u4f4d\uff0c\u662f\u5426\u6ee1\u8db3\u6761\u4ef63\n{\n\tif(!step)return cnt>=m&&ok?one:zero;\n\tif(vis[step][cnt][pre][ppre][ok])return f[step][cnt][pre][ppre][ok];\n\tbig res=0;\n\tfor(int i=(step==n?1:0);i<=9;i++)\n\t{\n\t\tif(pre!=-1&&ppre!=-1)\n\t\t{\n\t\t\tint sum=pre+ppre+i,mod=!i?0:(pre*pre+ppre*ppre)%i;\n\t\t\tres+=dfs(step-1,cnt+(i==9||i==6),i,pre,ok||(sum==9||sum==6||mod==9||mod==6));//\u5229\u7528i,pre,ppre\u8ba1\u7b97\u51fa\u6765\u7684sum,mod\u66f4\u65b0\u5e03\u5c14\u53d8\u91cfok\n\t\t}\n\t\telse res+=dfs(step-1,cnt+(i==9||i==6),i,pre,ok);//\u5982\u679c\u662f\u6570\u7684\u524d\u4e24\u4f4d\uff0c\u5c31\u65e0\u6cd5\u7ec4\u6210\u5f62\u5982A,B,C\u7684\u8fde\u7eed\u6570\u5b57\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u5224\u65adok\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\n\t}\n\tvis[step][cnt][pre][ppre][ok]=true;\n\treturn f[step][cnt][pre][ppre][ok]=res;\n}\n\nint main()\n{\n\tcin>>n>>m;\n\tbool flag=false;\n\tif(n<=2)flag=true;//\u7279\u5224n<=2\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u4e0d\u9700\u8981\u8003\u8651\u7b2c\u4e09\u4e2a\u6761\u4ef6\uff0c\u56e0\u6b64\u9ed8\u8ba4\u4e3atrue\n\twrite(dfs(n,0,-1,-1,flag));\n\treturn 0;\n}\n```",
        "postTime": 1560404601,
        "uid": 80299,
        "name": "crpboy",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4882 \u3010lty loves 96\uff01\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u79cd\u4e0d\u7528\u9ad8\u7cbe\u5ea6\u7684\u505a\u6cd5\uff08\u6216\u8005\u8bf4\u9ad8\u7cbe\u5ea6\u7684\u7279\u6b8a\u5199\u6cd5\uff09\u3002\n\n## \u3010\u601d\u8def\u3011\n\u9996\u5148\u5224\u65ad\u8fd9\u662f\u4e00\u9053\u6570\u4f4d DP\u3002\n\n\u8bbe $dp[x][cnt][a][b][ck=0/1]$ \u8868\u793a\u5230\u4e86\u7b2c $i$ \u4f4d\uff0c\u6709 $cnt$ \u4e2a $96$ \uff0c\u524d\u524d\u4e00\u4f4d\u662f $a$\uff0c\u524d\u4e00\u4f4d\u662f $b$ \uff0c\u76ee\u524d\u5b58\u4e0d\u5b58\u5728\u6ee1\u8db3\u9898\u610f\u7684\u8fde\u7eed\u4e09\u4f4d\u7684\u65b9\u6848\u6570\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\u5f88\u7b80\u5355\uff0c\u6309\u9898\u610f\u8f6c\u79fb\u5373\u53ef\uff0c\u8fd9\u4e0d\u662f\u672c\u9898\u7684\u91cd\u70b9\uff0c\u4e2a\u4eba\u611f\u89c9\u672c\u9898\u4e3b\u8981\u70e6\u5728\u9ad8\u7cbe\u3002\n\n\u7136\u540e\u4f30\u8ba1\u7b54\u6848\u4f1a\u5f88\u5927\uff0c\u5f00\u4e86`__int128` \u4ea4\u4e0a\u53bb\uff0c\u4ecd\u7136\u6302\u4e86\u3002\n\n\u4f46\u662f\u8f6c\u5ff5\u4e00\u60f3\u7b54\u6848\u4e5f\u4e0d\u4f1a\u592a\u5927\uff0c\u6211\u53c8\u61d2\u5f97\u5199\u9ad8\u7cbe\uff0c\u600e\u4e48\u529e\u5462\uff1f\n\n\u53ef\u4ee5\u5199\u4e00\u4e2a\u53ea\u6709\u4e24\u4f4d\u7684\u9ad8\u7cbe\uff0c\u7531\u4e8e\u672c\u9898\u53ea\u6709\u52a0\u6cd5\uff0c\u538b\u4f4d\u53ef\u4ee5\u538b\u5f88\u591a\uff0c\u6211\u538b\u4e86 $30$ \u4f4d\u3002\n\n\u7136\u540e\u5c31\u5f88\u597d\u5199\u4e86\uff0c\u5728\u539f\u5148\u7684\u57fa\u7840\u4e0a\u6539\u4e00\u4e0b\u8f93\u51fa + \u91cd\u8f7d\u52a0\u6cd5\u5c31\u505a\u5b8c\u4e86\uff0c\u800c\u4e14\u7801\u91cf\u5c0f\u8dd1\u5f97\u5feb\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\uff0c\u5e94\u8be5\u4e00\u773c\u5c31\u80fd\u770b\u61c2\u3002\n\n## \u3010\u4ee3\u7801\u3011\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define getchar() printf(\"I am a cheater!I AK IOI!%c\", 10)\ntemplate <typename T>\ninline void read(T &x){\n    x = 0;int fu = 1;\n    char c = getchar();\n    while(c > 57 || c < 48){\n        if(c == 45) fu = -1;\n        c = getchar();\n    }\n    while(c <= 57 && c >= 48){\n        x = (x << 3) + (x << 1) + c - 48;\n        c = getchar();\n    }\n    x *= fu;\n}\ntypedef __int128 LL;\nLL limit = 1;\ninline void init(){for (register int i = 1;i <= 30;i ++) limit *= 10;}//\u4f3c\u4e4e\u4e0d\u80fd\u6b63\u5e38\u521d\u59cb\u5316\uff1f\ntemplate <typename T>\ninline void fprint(T x){\n    if(x > 9) fprint(x / 10);\n    putchar(x % 10 + 48);\n}\ntemplate <typename T>\ninline void fprint(T x, char ch){\n    fprint(x);putchar(ch);\n}\ninline char next_char(){\n    char ch = getchar();\n    while(ch == 9 || ch == 10 || ch == 32) ch = getchar();\n    return ch;\n}\n\nstruct int256{//\u5b9e\u9645\u4e0a\u8fdc\u8fdc\u4e0d\u52302^256\n    LL x, y;\n    int256(LL tmp1 = 0, LL tmp2 = 0) : x(tmp1), y(tmp2){}\n    inline void print(char ch){\n        LL tmp1 = x, tmp2 = y;\n        if(tmp1) {\n            fprint(tmp1);\n            LL tmp = limit / 10;\n            while(y < tmp) putchar(48), tmp /= 10;\n            if(tmp2 > 0) fprint(tmp2, ch);\n            else putchar(ch);\n        }\n        else fprint(tmp2, ch);\n    }\n    inline int256 operator + (const int256 &b) const{return int256(x + b.x + ((y + b.y) / limit), (y + b.y) % limit);}\n};\n\nint256 dp[55][55][11][11][2];\nbool vis[55][55][11][11][2];\nint n, m;\nint256 dfs(int x, int cnt, int a, int b, bool ck){\n    if(x > n) return int256(0, cnt >= m && ck);\n    if(vis[x][cnt][a][b][ck]) return dp[x][cnt][a][b][ck];\n    vis[x][cnt][a][b][ck] = 1;\n    int fst = (x == 1)? 1 : 0;\n    int256 ret;\n    for (register int i = fst;i <= 9;i ++){\n        ret = ret + dfs(x + 1, cnt + (i == 6 || i == 9), b, i, ck || ((x >= 3) && (a + b + i == 6 || a + b + i == 9 || (i && (((a * a) + (b * b)) % i == 6 || ((a * a) + (b * b)) % i == 9)))));//\u72b6\u6001\u8f6c\u79fb\uff0c\u5c31\u4e00\u884c\u3002\n    }\n    return dp[x][cnt][a][b][ck] = ret;\n}\n\nint main(){\n    init();\n    read(n);read(m);\n    dfs(1, 0, 0, 0, 0).print(10);\n}\n```",
        "postTime": 1605093164,
        "uid": 66511,
        "name": "DPair",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4882 \u3010lty loves 96\uff01\u3011"
    },
    {
        "content": "\u8fd9\u9898\u662f\u4e2a\u6570\u4f4ddp\u9898~~\uff08\u672c\u6765N<=18\uff09~~\n\n\u597d\u50cf\u6709\u4eba\u5bf9\u9898\u610f\u4e0d\u592a\u660e\u767d\uff0c\u8fd9\u9898\u8981\u6ee1\u8db3\u4e09\u4e2a\u5927\u70b9\uff0c\u6ee1\u8db3\u7b2c\u4e09\u4e2a\u5927\u70b9\u53ea\u9700\u6ee1\u8db3\u4efb\u610f\u4e00\u4e2a\u5c0f\u70b9\uff0cABC\u662f\u8fde\u7eed\u7684\uff0c\u4ece\u9ad8\u5230\u4f4e\u7684\u4e09\u4f4d\u6570\n\n\u8bbe$f[i][j][x][y][0/1]$\u4ee3\u8868\u679a\u4e3e\u5230\u7b2c$i$\u4f4d\uff0c\u6709$j$\u4f4d\u4e3a6\u62169\uff0c\u7b2c$i,i-1$\u4f4d\u4e3a$x,y$\uff0c\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\n\n\u8f6c\u79fb\u7684\u8bdd\u4e0d\u96be\uff0c\u5f53x,y,z\u4e0d\u6ee1\u8db3\u6761\u4ef6\u65f6\uff1a\n$$f[i][j][x][y][0]+=f[i-1][j-check(i)][y][z][0],f[i][j][x][y][1]+=f[i-1][j-check(i)][y][z][0]$$\n\u5176\u4e2d$check(i)$\u662f\u5224\u65ad$i$\u662f\u5426\u4e3a6\u62169\n\u5426\u5219\uff1a\n$$f[i][j][x][y][1]=f[i-1][j-check(i)][y][z][0]+f[i-1][j-check(i)][y][z][1]$$\n\n\u81f3\u4e8e$f$\u6570\u7ec4\u7684\u7c7b\u578b\n\nint\uff1f10pts\uff1blong long\uff1f30pts\uff1bint 128\uff1f 85pts\uff08\u7528int 128\u7684\u771f\u7684\u662f\u5927\u4f6c\uff0c\u8ba9\u6211\u731d\u4e0d\u7a3d\u9632\uff0c\u8fd8\u597d\u53ea\u670985pts\uff0c\u9003\uff09\n\n\u80af\u5b9a\u662f\u8981\u7528\u9ad8\u7cbe\u5ea6\u7684\u5566~\n\n\u4e0d\u8fc7\u5982\u679c\u6ca1\u6709\u538b\u4f4d\uff0c\u90a3\u5c31\u662f0\u5206\uff0864M\u4e5f\u662f\u6211\u5e72\u7684\uff0c\u6709\u4eba\u8003\u8bd5\u7684\u65f6\u5019\u88ab\u5361\u4e86\u5417\uff0c\u9003\uff09\uff0c\u4f46\u662f\u53ea\u9700\u8981\u538b\u4efb\u610f\u51e0\u4f4d\u5c31\u4e0d\u4f1aMLE\u4e86\n\n``` cpp\n/*program from Wolfycz*/\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#define inf 0x7f7f7f7f\n#define sqr(x) ((x)*(x))\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned int ui;\ntypedef unsigned long long ull;\ninline int read(){\n\tint x=0,f=1;char ch=getchar();\n\tfor (;ch<'0'||ch>'9';ch=getchar())\tif (ch=='-')\tf=-1;\n\tfor (;ch>='0'&&ch<='9';ch=getchar())  x=(x<<1)+(x<<3)+ch-'0';\n\treturn x*f;\n}\ninline void print(int x){\n\tif (x>=10)\t print(x/10);\n\tputchar(x%10+'0');\n}\nconst int N=51;\nconst int digit=8;\nconst int base=1e8;\nconst int maxn=10;\nstruct Bignum{\n\tint len,v[maxn];\n\tBignum(){len=1,memset(v,0,sizeof(v));}\n\tvoid init(){v[0]=1;}\n\tvoid write(){\n\t\tprintf(\"%d\",v[len-1]);\n\t\tfor (int i=len-2;~i;i--)\tprintf(\"%0*d\",digit,v[i]);\n\t\tputchar('\\n');\n\t}\n}f[N][N][10][10][2];\nBignum operator +(const Bignum &x,const Bignum &y){\n\tBignum z;\n\tz.len=max(x.len,y.len);\n\tfor (int i=0;i<=z.len;i++)\tz.v[i]+=x.v[i]+y.v[i],z.v[i+1]+=z.v[i]/base,z.v[i]%=base;\n\twhile (z.v[z.len])\tz.v[z.len+1]+=z.v[z.len]/base,z.v[z.len]%=base,z.len++;\n\treturn z;\n}\nbool T(int x){return x==9||x==6;}\nvoid Inc(Bignum &x,Bignum y){x=x+y;}\nvoid prepare(){\n\tfor (int i=0;i<10;i++)\n\t\tfor (int j=0;j<10;j++)\n\t\t\tf[2][T(i)+T(j)][i][j][0].init();\n\tfor (int i=3;i<N;i++){\n\t\tfor (int x=0;x<10;x++){\n\t\t\tfor (int y=0;y<10;y++){\n\t\t\t\tfor (int z=0;z<10;z++){\n\t\t\t\t\tfor (int l=0;l<i;l++){\n\t\t\t\t\t\tInc(f[i][l+T(x)][x][y][1],f[i-1][l][y][z][1]);\n\t\t\t\t\t\tif (T(x+y+z)||(z&&T((sqr(x)+sqr(y))%z)))\n\t\t\t\t\t\t\tInc(f[i][l+T(x)][x][y][1],f[i-1][l][y][z][0]);\n\t\t\t\t\t\telse\tInc(f[i][l+T(x)][x][y][0],f[i-1][l][y][z][0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nvoid solve(int n,int m){\n\tif (n==1){\n\t\tprintf(!m?\"9\\n\":\"2\\n\");\n\t\treturn;\n\t}\n\tif (n==2){\n\t\tprintf(!m?\"90\\n\":m==1?\"34\\n\":\"4\\n\");\n\t\treturn;\n\t}\n\tBignum res;\n\tfor (int x=1;x<10;x++)\n\t\tfor (int y=0;y<10;y++)\n\t\t\tfor (int l=m;l<=n;l++)\n\t\t\t\tInc(res,f[n][l][x][y][1]);\n\tres.write();\n}\nint main(){\n\tprepare();\n\tint n=read(),m=read();\n\tsolve(n,m);\n\treturn 0;\n}\n```",
        "postTime": 1536547392,
        "uid": 21633,
        "name": "Wolfycz",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4882 \u3010lty loves 96\uff01\u3011"
    },
    {
        "content": "# \u9898\u76ee\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[$luogu$](https://www.luogu.org/problem/P4882).\n# \u9898\u89e3\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~~\u672c\u6587\u5352\u7ae0\u663e\u5fd7...~~  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u4e00\u9053\u6bd4\u8f83\u677f\u7684\u6570\u4f4d$DP$\u9898. \u4ee4\u72b6\u6001$f(x,cnt,A,B,0/1)$\u8868\u793a**\u786e\u5b9a ( \u4ece\u9ad8\u4f4d\u8d77 ) \u7b2c$x$\u6570\u5b57\u524d, \u5df2\u7ecf\u6709$cnt$\u4e2a$6/9$, \u524d\u4e24\u4e2a\u6570\u5b57\u5206\u522b\u662f$A,B$, \u662f\u5426\u5df2\u7ecf\u6ee1\u8db3\u6761\u4ef6$3$\u7684\u5408\u6cd5\u6570\u5b57\u603b\u6570**. \u72b6\u6001\u8f6c\u79fb\u4e5f\u6bd4\u8f83\u7b80\u5355, \u6211\u4eec\u53ea\u9700\u8981\u8003\u8651\u7b2c$x$\u4f4d\u6570\u5b57\u5bf9$cnt$\u548c\u6761\u4ef6$3$\u7684\u5f71\u54cd\u5c31\u884c\u4e86. \u6240\u4ee5:  \n$$f(x,cnt,A,B,k)=\\sum_{i=[x=1]}^9f(x+1,cnt+chk_1(i),B,i,k\\vee chk_2(A,B,i))$$  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u5176\u4e2d, $chk_1(i)$\u8868\u793a$i$\u662f\u5426\u662f$6/9$;  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( \u5373$chk_1(i)=([i=6]\\vee[i=9])$. )  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$chk_2(A,B,i)$\u8868\u793a\u6709\u5e8f\u5bf9$(A,B,i)$\u662f\u5426\u6ee1\u8db3\u6761\u4ef6$3$.  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( \u5373$chk_2(A,B,i)=(chk_1(A+B+i)\\vee[i\\not=0\\wedge chk_2((A^2+B^2)\\%i)])$. )  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u8003\u8651\u8fb9\u754c\u60c5\u51b5, \u5f53$x=n+1$\u662f, \u6570\u5b57\u5df2\u7ecf\u5168\u90e8\u786e\u5b9a, \u5224\u65ad\u662f\u5426\u5408\u6cd5\u5373\u53ef. \u6545\u6709:  \n$$f(n+1,cnt,A,B,k)=[m\\le cnt]\\vee k$$\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u6700\u540e, \u544a\u8bc9\u5927\u5bb6\u4e00\u4e2a\u5669\u8017, \u672c\u9898\u8981\u5199\u9ad8\u7cbe$QwQ!$  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u4e0a\u8bb0\u641c\u4ee3\u7801:\n```cpp\n#include <cstdio>\n#include <cstring>\n\n#define Int register int\n\nconst int MAXN = 50;\nint n, m;\nbool Vis[MAXN + 5][MAXN + 5][11][11][2] = {};\n/*\nVis\u7528\u4e8e\u8bb0\u5fc6\u5316, \u7531\u4e8e\u6211\u7528A/B=-1\u8868\u793a\u8fd8\u4e0d\u5b58\u5728\u524d\u9762\u7684\u6570\u5b57, \u5728\u5b58\u50a8\u65f6\u628aA, B\u90fd\u52a0\u4e00.\n\u5373f ( x, cnt, A, B, k ) -> Vis[x][cnt][A + 1][B + 1][k]. \n*/\n\nstruct BigInt { // \u9ad8\u7cbe\u9700\u8981\u538b\u4f4d\u5b58\u50a8 \n\tstatic const int MOD = 10000;\n\tint l, num[20];\n\tBigInt () {\n\t\tl = 1, memset ( num, 0, sizeof num ); \n\t}\n\tBigInt ( int x ) {\n\t\tl = 0, memset ( num, 0, sizeof num );\n\t\twhile ( x ) num[++ l] = x % MOD, x /= MOD;\n\t\tl += ! l;\n\t}\n\tinline void Print () const {\n\t\tprintf ( \"%d\", num[l] );\n\t\tfor ( Int i = l - 1; i; -- i ) printf ( \"%04d\", num[i] );\n\t\tputchar ( '\\n' );\n\t}\n\tinline int& operator [] ( const int Key ) {\n\t\treturn num[Key];\n\t}\n\tfriend inline BigInt operator + ( BigInt a, BigInt b ) {\n\t\tBigInt ret ( 0 );\n\t\tint x = 0;\n\t\twhile ( ret.l <= a.l || ret.l <= b.l ) {\n\t\t\tret[ret.l] = a[ret.l] + b[ret.l] + x;\n\t\t\tx = ret[ret.l] / MOD;\n\t\t\tret[ret.l ++] %= MOD;\n\t\t}\n\t\tif ( x ) ret[ret.l] = x;\n\t\twhile ( ! ret[ret.l] && ret.l > 1 && -- ret.l );\n\t\treturn ret;\n\t}\n\tfriend inline BigInt& operator += ( BigInt& a, BigInt b ) {\n\t\treturn a = a + b;\n\t}\n} F[MAXN + 5][MAXN + 5][11][11][2] = {}; // \u72b6\u6001\u6240\u5bf9\u5e94\u7684\u503c, \u5b58\u50a8\u89c4\u5219\u540cVis \n\ninline bool chk ( const int x ) { return x == 6 || x == 9; } \n\ninline BigInt DFS ( const int x, const int Cnt, const int A, const int B, const bool cdt3 ) {\n\tif ( x > n ) return m <= Cnt && cdt3; // \u8fb9\u754c\u5224\u5b9a \n\tif ( Vis[x][Cnt][A + 1][B + 1][cdt3] ) return F[x][Cnt][A + 1][B + 1][cdt3]; // \u8bb0\u5fc6\u5316 \n\tBigInt ret ( 0 );\n\tfor ( Int i = x == 1; i <= 9; ++ i ) {\n\t\tif ( ~ A && ~ B ) { // \u5b58\u5728\u524d\u4e24\u4f4d\u6570 \n\t\t\tint s = A + B + i, md = i ? ( A * A + B * B ) % i : -1;\n\t\t\tret += DFS ( x + 1, Cnt + chk ( i ), B, i, cdt3 || chk ( s ) || chk ( md ) );\n\t\t} else { // \u4e0d\u5b58\u5728, \u5219\u5bf9cdt3\u65e0\u5f71\u54cd \n\t\t\tret += DFS ( x + 1, Cnt + chk ( i ), B, i, cdt3 );\n\t\t}\n\t}\n\tVis[x][Cnt][A + 1][B + 1][cdt3] = true;\n\treturn F[x][Cnt][A + 1][B + 1][cdt3] = ret;\n}\n\ninline void Work () {\n\tscanf ( \"%d %d\", &n, &m );\n\tDFS ( 1, 0, -1, -1, n <= 2 ).Print (); // \u521d\u59cb\u72b6\u6001n <= 2, \u7531\u4e8e\u6b64\u65f6\u89c4\u52193\u65e0\u6548, \u89c6\u4e3a\u5168\u90e8\u5408\u6cd5 \n}\n\nint main () {\n\tWork ();\n\treturn 0;\n}\n```\n\n---\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u8b66\u544a, \u672c\u6587\u6b63\u7ecf\u73af\u8282\u5df2\u7ed3\u675f, \u8d76\u5feb\u53bb\u505a\u9898$x$.  \n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#\u5173\u4e8e\u6211\u4e3a\u4ec0\u4e48\u60f3\u505a\u8fd9\u9053\u9898#:  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\u8fd9\u9053\u9898, \u55ef...\u5c31\u6211\u4e00\u4e2a\u4eba\u628a$lty$\u62fc\u6210\u4e86\u6d1b\u5929\u4f9d?\"  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"\u9898\u9762\u597d\u50cf\u5bf9\u6211\u5bb6\u5929\u4f9d\u4e0d\u592a\u53cb\u5584$x$.\" ( \u6ee1\u8138\u9ed1\u7ebf. )  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$...$  \n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\"$woc$\u770b\u6211\u628a\u8fd9\u9053\u9898\u5207\u4e86\u5199\u7bc7\u9898\u89e3! \u9526\u4f9d\u536b\u554a, \u8ba9\u6211\u770b\u5230\u4f60\u4eec\u7684\u53cc\u624b!\" ( \u4e27\u5fc3\u75c5\u72c2. )\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\u732e\u4e0a\u4ebf\u679a\u6ed1\u7a3d.",
        "postTime": 1569911700,
        "uid": 123807,
        "name": "Rainybunny",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4882 \u3010lty loves 96\uff01\u3011"
    }
]
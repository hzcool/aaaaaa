[
    {
        "content": "~~\u5927\u6c34\u9898~~\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint a[1000005],n;\nint num[1000005];\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\tnum[i]=i;\n\t}\n\tint ans=1;\n\tdo{\n\t\tbool flag=1; \n\t\tfor(int i=1;i<=n;i++){//\u5224\u65ad\u76f8\u7b49 \n\t\t\tif(a[i]!=num[i]){\n\t\t\t\tflag=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(flag){\n\t\t\tprintf(\"%d\",ans);//\u76f8\u7b49\u5c31\u8f93\u51fa \n\t\t\treturn 0;\n\t\t}\n\t\tans++;\n\t}while(next_permutation(num+1,num+1+n));//\u66b4\u529b\u679a\u4e3e\u5168\u6392\u5217 \n\treturn 0;\n}\n```\n~~\u8fd9\u4eba\u75af\u4e86\u4e0d\u8981\u642d\u7406\u4ed6~~\n\n\u54b3\u54b3\uff0c\u4ee5\u4e0a\u8fd9\u79cd\u7c97\u9c81\u86ee\u6a2a\u7684\u505a\u6cd5\u80af\u5b9a\u662fAC\u4e0d\u4e86\u7684\uff0c\u4f17\u6240\u5468\u77e5\uff0c\u8fd9\u9898\u6211\u4eec\u8981\u7528\u4e00\u4e2a\u795e\u5947\u7684\u65b9\u6cd5\u2014\u2014**\u5eb7\u6258\u5c55\u5f00**\uff01\n\n\u5eb7\u6258\u5c55\u5f00\u8bb2\u7684\u662f\u4ec0\u4e48\u6545\u4e8b\u5462\uff1f\u662f\u8fd9\u6837\u7684\uff1a\u5bf9\u4e8e\u4e00\u4e2a1\u5230n\u7684\u6392\u5217$\\{a_1,a_2,\\cdots,a_n\\}$\uff0c\u6bd4\u5b83\u5c0f\u7684\u6392\u5217\u6709\u8fd9\u4e9b\u4e2a\uff1a\n\n$$\\sum^n_{i=1}sum_{a_i}\\times (n-i)!$$\n\u800c$sum_{a_i}$\uff0c\u5c31\u662f\u5728$a_i$\u540e\u9762\u7684\u5143\u7d20\u91cc\u6bd4\u5b83\u5c0f\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u5373$\\sum_{j=i}^n(a_j<a_i)$\n\n\u662f\u4e0d\u662f\u5927\u5bb6\u5f00\u59cb\u4e00\u8138\u61f5\u4e86\u5462\uff1f\u6ca1\u5173\u7cfb\uff0c\u8fd9\u662f\u6b63\u5e38\u73b0\u8c61\uff0c~~\u56e0\u4e3a\u4e0a\u9762\u90a3\u4e24\u53e5\u538b\u6839\u4e0d\u662f\u7ed9\u4eba\u770b\u7684~~\uff0c\u54b1\u4eec\u8fd8\u662f\u4ece\u4e00\u4e2a\u5177\u4f53\u7684\u6817\u5b50\u8bb2\u8d77\uff1a\n\n$$2,4,1,5,3$$\n\u770b\u8fd9\u4e2a\u6392\u5217\uff0c\u600e\u6837\u6c42\u4ed6\u662f\u7b2c\u51e0\u5c0f\u7684\u5462\uff1f\u522b\u6025\uff0c\u54b1\u4eec**\u4e00\u4f4d\u4e00\u4f4d\u53bb\u8003\u8651**\uff01\n\n- \u7b2c\u4e00\u4f4d\u662f$2$\uff0c\u6bd4\u5b83\u5c0f\u7684\u5c31\u53ea\u6709\u4e00\u4e2a$1$\u4e86\uff0c\u6240\u4ee5\u53ea\u6709$1$\u653e\u5728\u8fd9\u4e00\u4f4d\uff0c\u624d\u4f1a\u6bd4\u5b83\u5c0f\uff0c\u90a3\u540e\u9762\u7684\u5462\uff1f\u4f60\u7231\u600e\u4e48\u6392\u600e\u4e48\u6392\uff01\u540e\u9762\u6709$4$\u4e2a\u6570\uff0c\u6240\u4ee5\u4e00\u5171\u6709$4!$\u79cd\u6392\u5217\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u5171\u6709$1\\times4!$\u79cd\u65b9\u6cd5\n- \u7b2c\u4e8c\u4f4d\u662f$4$\uff0c\u6bd4\u5b83\u5c0f\u7684\u6709$1,2,3$\uff0c\u4f46\u662f$2$\u5df2\u7ecf\u5728\u524d\u9762\u56fa\u5b9a\u4e86\uff0c\u6240\u4ee5\u80fd\u653e\u5728\u8fd9\u4e00\u4f4d\u7684\u5c31\u53ea\u6709$1,3$\u8fd9$2$\u4e2a\u6570\uff0c\u800c\u540e\u9762\u5462\uff0c\u6709$3$\u4e2a\u6570\uff0c\u5c31\u6709$3!$\u79cd\u6392\u5217\u65b9\u6cd5\uff0c\u6240\u4ee5\u4e00\u5171\u6709$2\\times3!$\u79cd\u65b9\u6cd5\n- \u7b2c\u4e09\u4f4d\u7684$1$\u6ca1\u6709\u66f4\u5c0f\u7684\u5566\uff0c\u6240\u4ee5\u4e00\u5171\u662f$0\\times2!$\u79cd\u65b9\u6cd5\n- \u7b2c\u56db\u4f4d\u5728$5$\u540e\u9762\u6709\u6bd4$5$\u5c0f\u7684$3$\uff0c\u4e00\u5171$1$\u4e2a\u6570\uff0c$1\\times1!$\u79cd\u65b9\u6cd5\n- \u7b2c\u4e94\u4f4d\u5176\u5b9e\u538b\u6839\u90fd\u4e0d\u7528\u8003\u8651\u4e86\uff0c\u53cd\u6b63\u90fd\u7528\u8fc7\u4e86\uff0c\u8981\u8003\u8651\u7684\u8bdd\u4e5f\u662f$0\\times0!$\u79cd\u65b9\u6cd5\n- \u6700\u540e\u6211\u4eec\u518d\u628a\u6bcf\u4e00\u4f4d\u7684\u52a0\u8d77\u6765\uff1a$1\\times4!+2\\times3!+0\\times2!+1\\times1!+0\\times0!=36$\u79cd\uff0c\u6240\u4ee5\u6392\u540d\u662f\u7b2c$37$\u540d\n\n\u7ecf\u8fc7\u8fd9\u4e48\u4e00\u901a\u89e3\u91ca\uff0c\u73b0\u5728\u5927\u5bb6\u5e94\u8be5\u90fd\u7406\u89e3\u4e86\u5eb7\u6258\u5c55\u5f00\u7684\u539f\u7406\uff0c\u4e0a\u9762\u7684\u9b3c\u755c\u67ff\u5b50\u4e5f\u5e94\u8be5\u61c2\u4e86\u5427\uff01\u90a3\u63a5\u4e0b\u6765\u5c31\u5e94\u8be5\u8003\u8651**\u4ee3\u7801\u5b9e\u73b0**\u7684\u95ee\u9898\u5566\uff01\n\n\u9996\u5148\uff0c**\u9636\u4e58**\u8fd9\u4e00\u5757\u662f\u73c2\u4ee5\u76f4\u63a5\u9884\u5904\u7406\u51fa\u6765\u7684\uff1a\n```cpp\n\tfor(int i=1;i<=n;i++)\n\tjc[i]=(jc[i-1]*i)%998244353;//\u9636\u4e58\u7684\u5b9a\u4e49\n```\n\u7136\u540e\uff0c\u6839\u636e\u5b9a\u4e49\u7b97\u51fa\u6392\u540d\uff1a\n```cpp\n\tint ans=0;\n\tfor(int i=1;i<=n;i++){\n\t  int sum=0;\n   \t  for(int j=i;j<=n;j++)\n\t\tif(a[i]<a[j])sum++;//\u7edf\u8ba1sum\n     ans=(ans+sum*jc[n-i])%998244353;//\u8ba1\u7b97ans                       \n\t}\n\tprintf(\"%d\",ans+1);//\u522b\u5fd8\u4e86+1\n```\n\u8fd9\u4e48\u5199\u7684\uff0c\u4f60\u662f\u4e0d\u662f\u53c8\u60f3TLE\u4e86\uff1f\uff1f\uff1f\n\n\u597d\u5427\uff0c\u4ee5\u4e0a\u4ee3\u7801\u6ca1\u95ee\u9898\uff0c\u4f46\u662f\u8fd9\u4e2a\u9898\u7684\u6570\u636e\u5f88\u53cb\uff08du\uff09\u5584\uff08liu\uff09\uff0c$O(n^2)$\u7684\u590d\u6742\u5ea6\u662f\u8dd1\u4e0d\u8fc7\u7684......\u90a3\u8981\u591a\u5c11\u5462\uff1f$O(\\log n)$\u5dee\u4e0d\u591a\uff0c\u5e26$\\log$\u7684\u5c31\u90a3\u51e0\u6837\u6570\u636e\u7ed3\u6784\uff0c\u7ecf\u8fc7\u7cbe\u6311\u7ec6\u9009\uff0c\u6211\u4eec\u5c31\u7528\u5e38\u6570\u5c0f\uff0c\u64cd\u4f5c\u65b9\u4fbf\uff0c\u4ee3\u7801\u53c8\u597d\u5199\u7684[\u6811\u72b6\u6570\u7ec4](https://www.luogu.com.cn/problem/P3374)\u5427\uff01\n\n\u80fd\u4f18\u5316\u7684\uff0c\u65e0\u975e\u5c31\u662f **\u7edf\u8ba1$sum$** \u7684\u90a3\u4e00\u6b65......\u7b49\u4f1a\uff0c\u6811\u72b6\u6570\u7ec4\u662f\u5e72\u5565\u7528\u7684\u6765\u7740\uff1f\n\n > \u5355\u70b9\u4fee\u6539\uff0c\u533a\u95f4\u67e5\u8be2\n\n\u90a3\u6211\u4eec\u5c31\u8981\u628a$sum$\u7684\u8ba1\u7b97\u8f6c\u5316\u6210**\u533a\u95f4\u548c**\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u65b9\u6cd5\uff1a**\u4e00\u5f00\u59cb\u6bcf\u4e2a\u6570\u90fd\u662f$1$\uff0c\u5982\u679c\u67d0\u4e2a\u6570\u51fa\u73b0\u8fc7\u4e86\uff0c\u5c31\u628a\u5b83\u53d8\u6210$0$\uff0c\u800c\u6700\u540e\u8981\u6c42\u7684$sum_{a_i}$\uff0c\u5c31\u662f$1$\u5230$a_i-1$\u7684\u533a\u95f4\u548c**\uff01\uff08\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3a\u6bd4\u5b83\u5c0f\u7684\u6570\u90fd\u5728\u5b83\u524d\u9762\u561b\uff09\n\n\u54b1\u4eec\u8fd8\u662f\u4ee5\u521a\u624d$2,4,1,5,3$\u7684\u90a3\u4e2a\u6817\u5b50\u6765\u89e3\u91ca\uff1a\n\n- \u4e00\u5f00\u59cb\uff0c\u6811\u72b6\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u662f$1,1,1,1,1$\n- \u7b97\u5230$2$\u7684\u65f6\u5019\uff0c$sum=1$\uff0c\u6811\u72b6\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u662f$1,0,1,1,1$\n- \u7b97\u5230$4$\u7684\u65f6\u5019\uff0c$sum=1+0+1=2$\uff0c\u6811\u72b6\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u662f$1,0,1,0,1$\n- \u7b97\u5230$1$\u7684\u65f6\u5019\uff0c$sum=0$\uff0c\u6811\u72b6\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u662f$0,0,1,0,1$\n- \u7b97\u5230$5$\u7684\u65f6\u5019\uff0c$sum=0+0+1+0=1$\uff0c\u6811\u72b6\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u662f$0,0,1,0,0$\n- \u7b97\u5230$3$\u7684\u65f6\u5019\uff0c$sum=0+0=0$\uff0c\u6811\u72b6\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\u662f$0,0,0,0,0$\n\n\u6700\u540e\uff0c\u5c31\u662f\u5199\u4ee3\u7801\u7684\u65f6\u95f4\u5566\uff01\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\ntypedef long long ll;//\u867d\u7136\u4e0d\u77e5\u9053\u8fd9\u9898\u4e0d\u5f00long long\u4f1a\u4e0d\u4f1a\u89c1\u7956\u5b97\uff0c\u4f46\u4fdd\u9669\u8d77\u89c1\u8fd8\u662f\u5f00\u4e00\u4e0b\u5427\nll tree[1000005];//\u6811\u72b6\u6570\u7ec4\nint n;\n  //\u6811\u72b6\u6570\u7ec4\u7684\u201c\u8001\u4e09\u4ef6\u201d\uff1alowbit\uff0c\u4fee\u6539\uff0c\u6c42\u548c\nint lowbit(int x){\n\treturn x&-x;\n}\nvoid update(int x,int y){\n\twhile(x<=n){\n\t\ttree[x]+=y;\n\t\tx+=lowbit(x);\t\n\t}\n}\nll query(int x){\n\tll sum=0;\n\twhile(x){\n\t\tsum+=tree[x];\n\t\tx-=lowbit(x);\t\n\t}\n\treturn sum;\n}\nconst ll wyx=998244353;//\u61d2\u4eba\u4e13\u7528\nll jc[1000005]={1,1};//\u5b58\u9636\u4e58\u7684\u6570\u7ec4\nint a[1000005];//\u5b58\u6570\u7684\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){//\u9884\u5904\u7406\u9636\u4e58\u6570\u7ec4\u548c\u6811\u72b6\u6570\u7ec4\n\t\tjc[i]=(jc[i-1]*i)%wyx;\n\t\tupdate(i,1);\n\t}\n\tll ans=0;\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\tans=(ans+((query(a[i])-1)*jc[n-i])%wyx)%wyx;//\u8ba1\u7b97ans\n\t\tupdate(a[i],-1);//\u628aa[i]\u53d8\u62100\uff08\u539f\u6765\u662f1\uff0c\u51cf1\u4e0d\u5c31\u662f0\u561b\uff09\n\t}\n\tprintf(\"%lld\",ans+1);//\u522b\u5fd8\u4e86+1\n   return /*2333333333*/ 0;\n}\n```\n\u603b\u7ed3\u4e00\u4e0b\uff1a\n\n- \u6211\u4eec\u4eca\u5929\u5b66\u5230\u4e86\u4e00\u4e2a\u65b0\u6280\u80fd\uff1a**\u5eb7\u6258\u5c55\u5f00**\uff0c\n- \u5b83\u662f\u7528\u6765\u89e3\u51b3**\u6392\u5217\u7684\u95ee\u9898**\u7684\n- \u5b83\u7684**\u516c\u5f0f**\u662f\u8fd9\u4e2a\uff1a$ans=\\sum^n_{i=1}sum_{a_i}\\times (n-i)!$\n- \u5fc5\u8981\u65f6\u53ef\u4ee5\u7528**\u6811\u72b6\u6570\u7ec4**\u4f18\u5316\u8ba1\u7b97$sum$\u7684\u8fc7\u7a0b\n- \u636e\u8bf4\u4ee5\u540e\u8fd9\u73a9\u610f\u8fd8\u53ef\u4ee5\u7528\u6765\u5f04\u54c8\u5e0c\u5565\u7684\uff0c\u8fd9\u91cc\u6211\u521a\u5b66\uff0c\u5c31\u4e0d\u8bf4\u4e86\n- The end",
        "postTime": 1582705367,
        "uid": 239405,
        "name": "yangrunze",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u5eb7\u6258\u5c55\u5f00\u771f\u662f\u4e2a\u795e\u5947\u7684\u4e1c\u897f\u3002  \n\u9664\u4e86\u672c\u9898\u7528\u4e8e\u6c42\u67d0\u6392\u5217\u7684\u6392\u540d\u5916\uff0c\u5eb7\u6258\u5c55\u5f00\u4e00\u822c\u7528\u4e8e\u54c8\u5e0c\uff0c\u4e0d\u8fc7\u6211\u4e5f\u6ca1\u505a\u5230\u8fc7\u8fd9\u6837\u7684\u54c8\u5e0c\u9898\u3002\n\n# \u5eb7\u6258\u5c55\u5f00\n\n\u5148\u7ed9\u4f60\u67ff\u5b50\u3002\n$$ans=1+\\sum_{i=1}^{n} A[i]\\times(n-i)!$$\n\u5176\u4e2d$A[i]$\u4ee3\u8868$\\sum_{j=i}^{n}[a[j] < a[i]]$  \n\u600e\u4e48\u6765\u7406\u89e3\u8fd9\u4e2a\u67ff\u5b50\u5462\uff1f\u60f3\u8c61\u6784\u9020\u51fa\u5b57\u5178\u5e8f\u6bd4\u5f53\u524d\u6392\u5217\u5c0f\u7684\u6709\u51e0\u4e2a\u6392\u5217  \n\u679a\u4e3e\u5230$i$\u8868\u793a 1\u5230i-1\u548c\u539f\u6765\u7684\u6392\u5217\u4e00\u6837\uff0ci\u4f4d\u80af\u5b9a\u4e0d\u4e00\u6837\uff0c\u4e4b\u540e\u548b\u6837\u90fd\u884c\u3002  \n\u65e2\u7136\u5230i\u4f4d\u4e0d\u4e00\u6837\uff0c\u90a3\u4e48\u5b57\u5178\u5e8f\u5927\u5c0f\u5176\u5b9e\u5c31\u662f\u53d6\u51b3\u4e8ei\u4f4d\u3002\u5f88\u660e\u663e\uff0c\u7b2ci\u4f4d\u80af\u5b9a\u8981\u5c0f\u4e8ea[i]\u3002\u7136\u540e\u53ea\u8981\u628ai\u540e\u9762\u5c0f\u4e8ea[i]\u7684\u6570\u4ea4\u6362\u5230i\u4f4d\uff0c\u540e\u9762\u968f\u4fbf\u6392\u5c31\u884c\u4e86\u3002  \n\u5f88\u660e\u663e\uff0c\u8fd9\u6837\u679a\u4e3e\u53ef\u4ee5\u505a\u5230\u4e0d\u91cd\u4e0d\u6f0f\u3002\u56e0\u4e3a\u8981\u6c42\u7684\u662f\u6392\u540d\uff0c\u6240\u4ee5ans+=1\u3002  \n\u5f53\u7136\u8981\u7528\u6811\u72b6\u6570\u7ec4\u4f18\u5316\u4e00\u4e0b\uff0c\u590d\u6742\u5ea6\u662fO(nlgn)\u7684\u3002\n\n## \u53cc\u8bed\u4ee3\u7801\uff08\u6ed1\u7a3d\n~~\u5199Pascal\u5c31\u662f\u4e3a\u4e86\u5361\u5e38\u6570,\u52a0O2\u79d2\u6740C++)~~\n\n### C++98/11/14/17\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define MAXN 1000005\n#define rgt register\n#define mod 998244353\n\nint N, a[MAXN], fac, c[MAXN], ans;\nchar *p;\n\ninline void read( rgt int &x ){\n\tx = 0; while( !isdigit(*p) ) ++p;\n\twhile( isdigit(*p) ) x = x * 10 + ( *p & 15 ), ++p;\n}\n\nint main(){\n\tscanf( \"%d\", &N ), fac = 1;\n\tp = new char[N * 8 + 100],\n\tfread( p, 1, N * 8 + 100, stdin );\n\tfor ( rgt int i = N; i; --i ) read(a[i]);\n\tfor ( rgt int i = 1, s, j; i <= N; ++i ){\n\t\tfor ( s = 0, j = a[i]; j; j -= j & -j ) s += c[j];\n\t\tans = ( ans + 1ll * fac * s ) % mod, fac = 1ll * fac * i % mod;\n\t\tfor ( j = a[i]; j <= N; j += j & -j ) ++c[j];\n\t} printf( \"%d\\n\", ans + 1 );\n\treturn 0;\n}\n```\n\n### Pascal\n\n```pas\nvar\nn, fac, s, ans, i, j:longint;\na, c:array[1..1000000] of longint;\nbegin\n    read(n); fac := 1; ans := 0;\n    for i := n downto 1 do\n    begin\n        read(a[i]);\n        c[i] := 0;\n    end;\n    for i := 1 to n do\n    begin\n        j := a[i]; s := 0;\n        while j > 0 do\n        begin\n            s := s + c[j];\n            j := j - ( j and -j ); \n        end;\n        ans := ( QWORD(ans) + QWORD(fac) * QWORD(s) ) mod 998244353;\n        fac := QWORD(fac) * QWORD(i) mod 998244353;\n        j := a[i];\n        while j <= n do\n        begin\n            c[j] := c[j] + 1;\n            j := j + ( j and -j );\n        end;\n    end;\n    writeln((ans + 1) mod 998244353);\nend.\n```\n# \u9006\u5eb7\u6258\u5c55\u5f00\n\n\u7c7b\u4f3c\u4e8e\u8fdb\u5236\u8f6c\u6362\uff0c\u4e0d\u65ad % (n-i)!, /(n-1)!\u5c31\u53ef\u4ee5\u5f97\u5230A\u6570\u7ec4\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u8fd8\u539f\u51fa\u539f\u6392\u5217\u3002  \n\n**Update on 2019.7.23**  \n~~\u6628\u5929\u521a\u521a\u96c6\u8bad\u56de\u6765\uff0c\u4e8e\u662f\u5c31\u6765\u586b\u5751\u4e86~~\n\n[\u4f8b\u9898](https://www.luogu.org/problemnew/show/UVA11525)  \n\u8fd9\u9898\u5341\u5206\u597d\u5fc3\u5730\u4e3a\u6211\u4eec\u7701\u53bb\u4e86\u6c42\u51faA\u6570\u7ec4\u7684\u8fc7\u7a0b\uff08\u5426\u5219\u8981\u9ad8\u7cbe\u5ea6\u9664\u6cd5\uff1f  \n\u95ee\u9898\u8bf4\u767d\u4e86\u5c31\u662f\u5728\u6bcf\u4e00\u4e2a`[i,n]`\u533a\u95f4\u5185\u6c42K\u5927\u503c\u3002\u53ef\u4ee5\u4f7f\u7528\u6743\u503c\u7ebf\u6bb5\u6811+\u4e8c\u5206\u6765\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002\u8fd9\u5e94\u8be5\u6bd4\u8f83\u57fa\u7840\uff0c\u6240\u4ee5\u770b\u4ee3\u7801\u5427qaq\u3002\n\n## \u4ee3\u7801\n\n~~\u6ca1\u600e\u4e48\u5361\u5e38\u6570\uff0c\u672c\u6765\u60f3\u641ezkw\u7ebf\u6bb5\u6811\u975e\u9012\u5f52\u51cf\u5c0f\u5e38\u6570\uff0c\u4f46\u662f\u61d2\u3002\u3002\u3002~~\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define MAXN 50005\n\nint T, N, tr[MAXN << 2];\n\nvoid Build( int c, int l, int r ){ //\u5efa\u6811\n\tif ( l == r ) return tr[c] = 1, void();\n\tint mid((l + r) >> 1), ls(c << 1), rs(c << 1 | 1);\n\tBuild( ls, l, mid ), Build( rs, mid + 1, r ),\n\ttr[c] = tr[ls] + tr[rs];\n}\n\nint Get( int c, int l, int r, int k ){ //\u627e\u5230k\u5927\u503c\u7684\u540c\u65f6\u5220\u9664k\u5927\u503c\n\t--tr[c]; if ( l == r ) return l;\n\tint mid((l + r) >> 1), ls(c << 1), rs(ls | 1);\n\tif ( tr[ls] < k ) return Get( rs, mid + 1, r, k - tr[ls] );//\u7ebf\u6bb5\u6811\u4e0a\u4e8c\u5206\u627e\u5230k\u5927\u503c\n\treturn Get( ls, l, mid, k );\n}\n\nint main(){\n\tscanf( \"%d\", &T );\n\twhile( T-- ){\n\t\tscanf( \"%d\", &N ), Build( 1, 1, N );\n\t\tfor ( int i = 1, s; i <= N; ++i )\n\t\t\tscanf( \"%d\", &s ), printf( \"%d%c\", Get(1, 1, N, s + 1), \"\\n \"[i < N] );\n\t} return 0;\n}\n```",
        "postTime": 1558189834,
        "uid": 70786,
        "name": "_louhc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u524d\u7f6e\u77e5\u8bc6\uff1a\u524d\u7f00\u79ef&\u6811\u72b6\u6570\u7ec4\n\n[\u6811\u72b6\u6570\u7ec4\u6a21\u677f](https://www.luogu.org/problemnew/show/P3374)\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u4e86\u89e3\uff0c\u5bf9\u4e8e\u7b2c$i$\u4e2a\u4f4d\u7f6e\uff0c\u82e5\u8be5\u4f4d\u7f6e\u7684\u6570\u662f\u672a\u51fa\u73b0\u5728\u4e4b\u524d\u4f4d\u7f6e\u4e0a\u7684\u6570\u4e2d\u7b2c$k$\u5927\u7684\uff0c\u90a3\u4e48\u6709$(k-1) \\times (N-i)!$\u79cd\u65b9\u6848\u662f\u8be5\u4f4d\u7f6e\u4e0a\u6bd4\u8fd9\u4e2a\u6392\u5217\u5c0f\u7684\uff0c\u6240\u4ee5\u603b\u6392\u540d\u6bd4\u8be5\u6392\u5217\u5c0f\u3002\n\n\u7531\u6b64\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\uff0c\u8be5\u6392\u5217\u7684\u6392\u540d\u7b49\u4e8e$\\sum_{i=1}^{N}(rank(a_i)-1) \\times (N-i)!$\u3002\u5176\u4e2d$rank(a_i)=k$\u8868\u793a$a_i$\u5728\u672a\u51fa\u73b0\u5728\u4e4b\u524d\u4f4d\u7f6e\u4e0a\u7684\u6570\u4e2d\u662f\u7b2c$k$\u5927\u7684\u3002\n\n\u5bf9\u4e8e\u9636\u4e58\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u524d\u7f00\u79ef\u76f4\u63a5$O(N)$\u7ef4\u62a4\u51fa\u6765\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\nfac[0]=1;//\u6ce8\u610f0!=1\nfor(int i=1;i<N;++i)\n{\n\tfac[i]=fac[i-1]*i%MOD;\n}\n```\n\n\u5bf9\u4e8e$rank(a_i)$\uff0c\u6211\u4eec\u600e\u4e48\u505a\u5462\uff1f$\\text{Treap}$\u4e0a\u4e00\u6ce2\uff1f\n\n\u4e0d\u7528\u90a3\u6837\u3002~~\u65e0\u803b\u5730\u770b\u770b\u7b97\u6cd5\u6807\u7b7e~~\u53ef\u4ee5\u53d1\u73b0\u7528\u6811\u72b6\u6570\u7ec4\u3002\n\n\u6700\u5148\u5bf9\u6bcf\u4e2a\u6570$add(1)$\uff0c\u7136\u540e\u6bcf\u6b21\u5220\u9664$a_i$\u53ea\u8981$add(-1)$\u5373\u53ef\uff0c$sum$\u5c31\u662f$rank$\u3002\n\n\u5c31\u662f\u8fd9\u6837\uff1a\n```cpp\nfor(int i=1;i<=N;++i)l[i]=i&-i;\nfor(int i=1;i<=N;++i)add(i,1);\nfor(int i=1;i<=N;++i)\n{\n\tscanf(\" %d\",&a[i]);\n    //\u8ba1\u7b97\n\tadd(a[i],-1);\n}\n```\n\n\u7136\u540e\u8fd9\u9053\u9898\u5c31\u6109\u5feb\u5730\u505a\u5b8c\u4e86\u3002\n\n\u5b8c\u6574Code:\n```cpp\n#include<cstdio>\n#define LL long long\nconst int MOD=998244353;\nint N,a[1000003],c[1000003],l[1000003];\nLL fac[1000003],ans;\nvoid add(int x,int k)\n{\n\twhile(x<=N)\n\t{\n\t\tc[x]+=k;\n\t\tx+=l[x];\n\t}\n}\nint sum(int x)\n{\n\tint t=0;\n\twhile(x>0)\n\t{\n\t\tt+=c[x];\n\t\tx-=l[x];\n\t}\n\treturn t;\n}\nint main()\n{\n\tscanf(\" %d\",&N);\n\tfac[0]=1;\n\tfor(int i=1;i<N;++i)\n\t{\n\t\tfac[i]=fac[i-1]*i%MOD;\n\t\tl[i]=i&-i;\n\t}\n\tl[N]=N&-N;\n\tfor(int i=1;i<=N;++i)add(i,1);\n\tfor(int i=1;i<=N;++i)\n\t{\n\t\tscanf(\" %d\",&a[i]);\n\t\tans=(ans+((sum(a[i])-1)*fac[N-i])%MOD)%MOD;\n\t\tadd(a[i],-1);\n\t}\n\tprintf(\"%lld\\n\",ans+1);\n\treturn 0;\n}\n```",
        "postTime": 1557558978,
        "uid": 59388,
        "name": "VinstaG173",
        "ccfLevel": 7,
        "title": "\u9898\u89e3P5367\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00"
    },
    {
        "content": " [P5367 \u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00](https://www.luogu.org/problemnew/show/P5367)\n\n~~\u611f\u89c9\u8fd9\u9898\u96be\u5ea6\u5927\u6982\u5728\u7eff\u9898\u5230\u84dd\u9898\u4e4b\u95f4qwq~~\n\n## \u4e00\u3001[\u6d1b\u8c37\u65e5\u62a5[yummy]\u6d45\u8c08\u5eb7\u6258\u5c55\u5f00](https://www.luogu.org/blog/abc123-yummy/huoxingren)\n\n\u5982\u6211\u60f3\u77e5\u9053321\u662f{1,2,3}\u4e2d\u7b2c\u51e0\u4e2a\u5c0f\u7684\u6570\u53ef\u4ee5\u8fd9\u6837\u8003\u8651 :\n\n\u7b2c\u4e00\u4f4d\u662f3\uff0c\u5f53\u7b2c\u4e00\u4f4d\u7684\u6570\u5c0f\u4e8e3\u65f6\uff0c\u90a3\u6392\u5217\u6570\u5c0f\u4e8e321 \u5982 123\u3001 213 \uff0c\u5c0f\u4e8e3\u7684\u6570\u67091\u30012 \u3002\u6240\u4ee5\u67092\u00d7 2!\u4e2a\u3002\u518d\u770b\u5c0f\u4e8e\u7b2c\u4e8c\u4f4d2\u7684:\u5c0f\u4e8e2\u7684\u6570\u53ea\u6709\u4e00\u4e2a\u5c31\u662f1 \uff0c\u6240\u4ee5\u67091\u00d7 1!=1 \u6240\u4ee5\u5c0f\u4e8e321\u7684{1,2,3}\u6392\u5217\u6570\u67092\u00d72!+1\u00d71!=5\u4e2a\u3002\u6240\u4ee5321\u662f\u7b2c6\u4e2a\u5c0f\u7684\u6570\u3002 2 \u00d72!+1\u00d7 1!+0\u00d7 0!\u5c31\u662f\u5eb7\u6258\u5c55\u5f00\u3002\n\n\u518d\u4e3e\u4e2a\u4f8b\u5b50:1324\u662f{1,2,3,4}\u6392\u5217\u6570\u4e2d\u7b2c\u51e0\u4e2a\u5927\u7684\u6570:\u7b2c\u4e00\u4f4d\u662f1\u5c0f\u4e8e1\u7684\u6570\u6ca1\u6709\uff0c\u662f0\u4e2a 0\u00d7 3! \u7b2c\u4e8c\u4f4d\u662f3\u5c0f\u4e8e3\u7684\u6570\u67091\u548c2\uff0c\u4f461\u5df2\u7ecf\u5728\u7b2c\u4e00\u4f4d\u4e86\uff0c\u6240\u4ee5\u53ea\u6709\u4e00\u4e2a\u65702\uff0c1\u00d72! \u3002\u7b2c\u4e09\u4f4d\u662f2\u5c0f\u4e8e2\u7684\u6570\u662f1\uff0c\u4f461\u5728\u7b2c\u4e00\u4f4d\uff0c\u6240\u4ee5\u67090\u4e2a\u6570 0\u00d71! \uff0c\u6240\u4ee5\u6bd41324\u5c0f\u7684\u6392\u5217\u67090\u00d73!+1\u00d7 2!+0\u00d71 !=2\u4e2a\uff0c1324\u662f\u7b2c\u4e09\u4e2a\u5c0f\u6570\u3002\uff08\u6458\u81ea\u767e\u5ea6\uff09\n\n### \u66b4\u529b\u505a\u6cd5\n\n```cpp\n//n\u8868\u793a\u5168\u6392\u5217\u957f\u5ea6\nfor(int i=1;i<=n;i++)\n{\n    cin>>a[i];\n    int x=a[i];\n    for(int j=1;j<=a[i];j++)\n        x-=used[j];\n    //used[j]\u8868\u793aj\u662f\u5426\u7528\u8fc7(1\u7528\u8fc7\uff0c0\u6ca1\u7528\uff09\n    used[a[i]]=1;\n    a[i]=x-1;\n}\n```\n\n## \u4e8c\u3001\u4f18\u5316\n\n\u201c\u6211\u4eec\u770b\u5230\uff0c\u521a\u624d\u7684\u65b9\u6cd5\u6709\u4e24\u91cd\u5faa\u73af\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a O(N^2) ,\u627e\u5de6\u4fa7\u7528\u8fc7\u7684\u6570\u7684\u6570\u91cf\u5f88\u8d39\u65f6\u95f4\u3002\n\n\u53ea\u8981\u628aused\u51fd\u6570\u7528\u7ebf\u6bb5\u6811\u6216\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u533a\u95f4\u548c\uff0c\u5c31\u53ef\u4ee5\u53ea\u82b1log\u7684\u65f6\u95f4\u5c31\u6c42\u51fa\u5de6\u4fa7\u5c0f\u4e8e\u81ea\u5df1\u7684\u6570\u7684\u4e2a\u6570\u4e86\u3002\u201d \uff08\u6458\u81ea\u65e5\u62a5\uff09\n\n## \u4e09\u3001\u4ee3\u7801\n\n```cpp\n#include<cstdio>\nusing namespace std;\n#define N 1000001\nint n,tr[N];\nlong long ans,fac[N];\ninline void add(int x,int k) {\n\tfor (; x<=n; x+=x&-x) tr[x]+=k;\n}\ninline int query(int x) {\n\tint t=0;\n\tfor (; x; x-=x&-x) t+=tr[x];\n\treturn t;\n}\nint main() {\n\tscanf(\"%d\",&n);\n\tfac[0]=1;\n\tfor (int i=1; i<=n; i++) {\n\t\tfac[i]=fac[i-1]*i%998244353;\n\t\tadd(i,1);\n\t}\n\tfor (int i=1,x; i<=n; i++) {\n\t\tscanf(\"%d\",&x);\n\t\tans=(ans+(query(x)-1)*fac[n-i])%998244353;\n\t\tadd(x,-1);\n\t}\n\tprintf(\"%lld\",ans+1);\n\treturn 0;\n}\n```\n\n## \u56db\u3001\u62d3\u5c55\uff1a\u9006\u5eb7\u6258\u5c55\u5f00\n\n\u4f8b {1,2,3,4,5}\u7684\u5168\u6392\u5217\uff0c\u5e76\u4e14\u5df2\u7ecf\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u5b8c\u6bd5\n\n(1)\u627e\u51fa\u7b2c96\u4e2a\u6570\n\n\u9996\u5148\u752896-1\u5f97\u523095\n\n\u752895\u53bb\u96644! \u5f97\u52303\u4f5923\n\n\u67093\u4e2a\u6570\u6bd4\u5b83\u5c0f\u7684\u6570\u662f4\n\n\u6240\u4ee5\u7b2c\u4e00\u4f4d\u662f4\n\n\u752823\u53bb\u96643! \u5f97\u52303\u4f595\n\n\u67093\u4e2a\u6570\u6bd4\u5b83\u5c0f\u7684\u6570\u662f4\u4f464\u5df2\u7ecf\u5728\u4e4b\u524d\u51fa\u73b0\u8fc7\u4e86\u6240\u4ee5\u7b2c\u4e8c\u4f4d\u662f5(4\u5728\u4e4b\u524d\u51fa\u73b0\u8fc7\uff0c\u6240\u4ee5\u5b9e\u9645\u6bd45\u5c0f\u7684\u6570\u662f3\u4e2a)\n\n\u75285\u53bb\u96642!\u5f97\u52302\u4f591\n\n\u67092\u4e2a\u6570\u6bd4\u5b83\u5c0f\u7684\u6570\u662f3\uff0c\u7b2c\u4e09\u4f4d\u662f3\n\n\u75281\u53bb\u96641!\u5f97\u52301\u4f590\n\n\u67091\u4e2a\u6570\u6bd4\u5b83\u5c0f\u7684\u6570\u662f2\uff0c\u7b2c\u4e8c\u4f4d\u662f2\n\n\u6700\u540e\u4e00\u4e2a\u6570\u53ea\u80fd\u662f1\n\n\u6240\u4ee5\u8fd9\u4e2a\u6570\u662f45321\uff08\u6458\u81ea\u767e\u5ea6\uff09",
        "postTime": 1562903542,
        "uid": 68706,
        "name": "Randolph\u3001",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u6765\u4e86\u89e3\u4e00\u4e0b\u4ec0\u4e48\u662f\u5eb7\u62d3\u5c55\u5f00\uff1a\n\n\u5eb7\u6258\u5c55\u5f00\u662f\u4e00\u4e2a\u5168\u6392\u5217\u5230\u4e00\u4e2a\u81ea\u7136\u6570\u7684\u53cc\u5c04\uff0c\u5e38\u7528\u4e8e\u6784\u5efa\u54c8\u5e0c\u8868\u65f6\u7684\u7a7a\u95f4\u538b\u7f29\u3002 \u5eb7\u6258\u5c55\u5f00\u7684\u5b9e\u8d28\u662f\u8ba1\u7b97\u5f53\u524d\u6392\u5217\u5728\u6240\u6709\u7531\u5c0f\u5230\u5927\u5168\u6392\u5217\u4e2d\u7684\u987a\u5e8f\uff0c\u56e0\u6b64\u662f\u53ef\u9006\u7684\n\n \u542c\u8d77\u6765\u5f88\u9ad8\u6df1\u5176\u5b9e\u4e00\u53e5\u8bdd\u6982\u62ec\uff1a**\u6c42\u5168\u6392\u5217**\n \u6211\u4eec\u5148\u6765\u4e86\u89e3\u4e00\u4e0b\u5eb7\u6258\u5c55\u5f00\u7684\u57fa\u672c\u64cd\u4f5c\u65b9\u6cd5\uff0c\u4e00\u4e2a\u6570\u7684\u7684\u6392\u5217\u7684\u6392\u540d\u5c31\u76f8\u5f53\u4e8e\uff1a  \n$$\\small a_n\u00b7(n-1)!+a_{n-1}\u00b7(n-2)!+\\cdots+a_1\u00b70!+1$$\n\u5176\u4e2d\"\uff08n\uff09!\"\u8868\u793a\u4ece$n$\u4e00\u76f4\u4e58\u5230$1$\uff0c\u4e5f\u5c31\u662f$n$\u7684\u9636\u4e58\uff0c$a_i$\u8868\u793a\u539f\u6570\u7684\u7b2ci\u4f4d\u5728\u5f53\u524d\u672a\u51fa\u73b0\u7684\u5143\u7d20\u4e2d\u662f\u6392\u5728\u7b2c\u51e0\u4e2a\u7684\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a  \n$3\\quad 2\\quad 1$\u7684\u6392\u540d\u5c31\u662f:  \n$2\u00b72+1\u00b71+0\u00b71+1=6$  \n$2\\quad 3\\quad 1$\u7684\u6392\u540d\u5c31\u662f\uff1a  \n$1\u00b72+1\u00b71+0\u00b71+1=4$\n\n\u8ba1\u7b97\u4e00\u4e0b\u590d\u6742\u5ea6\uff0c\u4ece\u8ba1\u7b97\u9636\u4e58\u4e00\u76f4\u5230\u6c42\u548c\uff0c\u603b\u590d\u6742\u5ea6$O(n^2)$,\u5148\u653e\u4e00\u4e0b\u66b4\u529b\u7684\u4ee3\u7801\uff0c\u671f\u671b\u5f97\u5206$40\\sim50$\u5206\n\n\u4e8e\u662f\u6211\u4eec\u91cd\u65b0\u5ba1\u89c6\u4e00\u4e0b\u8fd9\u4e2a\u5f0f\u5b50\uff0c\u53d1\u73b0\u9636\u4e58\u662f\u53ef\u4ee5\u9884\u5904\u7406\u7684\uff0c\u4f46\u662f\u74f6\u9888\u5728\u4e8e\u4e0d\u77e5\u9053\u600e\u4e48\u5bfb\u627e\u51fa$a_i$,\u5f80\u4f18\u5316\u7684\u65b9\u5411\u60f3\uff0c\u8fd8\u8981\u80fd\u591f\u52a0\u548c\u51cf\u7684\uff0c\u5c31\u53ea\u6709\u4e24\u4e2a\u4e1c\u897f\uff0c\u4e00\u4e2a\u6811\u72b6\u6570\u7ec4\uff0c\u4e00\u4e2a\u7ebf\u6bb5\u6811\uff0c\u7ebf\u6bb5\u6811\u7801\u91cf\u3002\u3002\u3002\u582a\u5fe7\uff0c\u6240\u4ee5\u6211\u4eec\u9009\u62e9\u6811\u72b6\u6570\u7ec4\u3002\n\n\u4e0b\u9762\u6211\u4eec\u6765\u601d\u8003\u5982\u4f55\u7ef4\u62a4$a_i$,\u6211\u4eec\u53ef\u4ee5\u628a\u6811\u72b6\u6570\u7ec4\u7684\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u503c\u90fd\u52a0$1$,\u53ea\u8981$a_i$\u8fd9\u4e2a\u6570\u51fa\u73b0\u4e86\uff0c\u6211\u4eec\u5c31\u628a\u5b83\u51cf\u53bb$1$\uff08\u4e5f\u5c31\u662f\u52a0\u4e0a$-1$\uff09\uff0c\u7136\u540e\u9700\u8981\u67e5\u8be2$a_i$\u7684\u503c\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u6811\u72b6\u6570\u7ec4\u5957\u8def\u6c42\u548c\u5c31\u597d\u4e86\uff0c\u590d\u6742\u5ea6\u5c31\u8fd9\u6837\u964d\u5230\u4e86$O(n\\log n)$\uff0c\u671f\u671b\u5f97\u5206:$100$  \n\u7801\u98ce\u4e0d\u6bd2\u7624\uff0c\u8bf7\u653e\u5fc3\u98df\u7528\uff1a  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=1000005;//\u4e0a\u754c\nconst int Mod=998244353\uff1b//\u795e\u5723\u7684\u6a21\u6570\ntypedef long long ll;//\u52a0\u4e0a\u8fd9\u4e2a\u5f88\u6709\u7528\u7684\uff0c\u53ef\u4ee5\u907f\u514d\u8fc7\u591a\u7684\u91cd\u590dlong long\nint n;\nll jc[maxn];//\u9636\u4e58\nll tree[maxn];//\u6811\u72b6\u6570\u7ec4\nll lowbit(ll x){return x&(-x);}//\u6811\u72b6\u6570\u7ec4\u5b9e\u73b0\u7684\u652f\u6491-\u53d6\u6700\u4f4e\u4f4d,\u4e0d\u77e5\u9053\u7684\u8bf7\u7ffb\u5230\u6700\u540e\nll sum(ll x)//\u6c42\u548c\n{\n    ll ans=0;\n    while(x!=0)\n    {\n        ans+=tree[x]%Mod;\n        x-=lowbit(x);\n    }\n    return ans%Mod;\n}\nvoid add(ll x,ll k)//\u52a0\u6cd5\n{\n    while(x<=n)\n    {\n        tree[x]+=k;\n        x+=lowbit(x);\n    }\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    jc[0]=1;\n    for(int i=1;i<=n;i++)//\u9884\u5904\u7406\u9636\u4e58\n    {\n        jc[i]=jc[i-1]*i%Mod;\n        jc[i]%=Mod;\n    }\n    for(int i=1;i<=n;i++)\n    {\n        add(i,1);//\u5982\u524d\u9762\u6240\u8bf4\u7684\u90a3\u6837\uff0c\u6bcf\u4e00\u4f4d\u90fd\u52a0\u4e0a1\n    }\n    ll ans=1;//\u6c42\u6392\u540d\uff0c\u6240\u4ee5\u4f4d\u7f6e\u7684\u503c\u4e3a1\n    for(int i=1;i<=n;i++)\n    {\n        ll a;\n        scanf(\"%lld\",&a);//\u8bfb\u5165\n        ans+=((sum(a)-1)*jc[n-i]%Mod)%Mod;//\u53d6\u6a21\u8fd0\u7b97\u5206\u8fdb\u53bb\uff0c\u4e0d\u77e5\u9053\u7684\u5f80\u540e\u770b\n        add(a,-1);//\u8fd9\u4e00\u4e2a\u4f4d\u7f6e\u7684\u503c\u51fa\u73b0\u4e86\uff0c\u5c31\u628a\u4ed6\u51cf\u6389\n    }\n    printf(\"%lld\\n\",ans%Mod)\uff1b\n    return 0;\n}\n```\n\u6811\u72b6\u6570\u7ec4\uff1a[\u770b\u8fd9\u91cc](https://www.luogu.com.cn/problem/P3374)  \n\u53d6\u4f59\u8fd0\u7b97\uff1a[\u770b\u8fd9\u91cc](https://www.luogu.com.cn/problem/P1226)  \n\u7ba1\u7406\u5458\u6c42\u8fc7\uff08\u3065\uffe33\uffe3\uff09\u3065\u256d\u2764\uff5e",
        "postTime": 1587114153,
        "uid": 294736,
        "name": "bovine__kebi",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u4e00\u9053zz\u9898\u3002\n\n\u9996\u5148\u6211\u4eec\u77e5\u9053\u7684\u5eb7\u6258\u5c55\u5f00\uff0c\u6839\u636e\u7ed9\u5b9a\u6392\u5217\u7b97\u4f4d\u6b21\u7684\u7ed3\u8bba\u662f\u4ee5\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\ninline void work_contor(ll *now){\n\tll k, l, t, res = 0; \n\tfor(k = 1; k <= N; k ++){\n\t\tt = 0 ; \n\t\tfor(l = k + 1; l <= N; l ++)\n\t\t\tif(now[l] < now[k]) t ++ ;\n\t\tres += t * Flr[N - k] ; \n\t}\n\tcout << res + 1 << endl ;  \n}\t   \n```\n\n\u6211\u4eec\u8bd5\u56fe\u4f18\u5316\u8fd9\u4e2a\u4e1c\u897f\u3002\u6211\u4eec\u53d1\u73b0\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u74f6\u9888\u5c31\u5728\u4e8e\uff0c\u5bf9\u4e8e$a_i$\u6211\u4eec\u4e0d\u80fd\u5feb\u901f\u7edf\u8ba1$a_j < a_i,j > i$\u7684\u4e8c\u5143\u7ec4$<a_i, a_j>$\u7684\u4e2a\u6570\u3002\u6211\u4eec\u53d1\u73b0\u8fd9\u5c31\u662f\u4e2a\u9006\u5e8f\u5bf9\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u4e0a\u6743\u503c\u7ebf\u6bb5\u6811\u6765\u7edf\u8ba1\u3002\n\n\u4e0d\u5f97\u4e0d\u8bf4\u8fc4\u4eca\u4e3a\u6b62\u8fd9\u4e2a\u9898\u7684\u6570\u636e\u8fd8\u662f\u592a\u5f31\u4e86\u3002\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <algorithm>\n\n#define rr register \n#define MAXN 1000100\n#define Mod 998244353\n\nusing namespace std ; int T[MAXN << 1] ;\nint query[MAXN], Flr[MAXN], N, K, i, j, q ;\n\ninline void push_up(int rt){\n\tT[rt] = T[rt << 1] + T[rt << 1 | 1] ; \n}\ninline void update(int rt, int l, int r, int p){\n\tif (l == p && r == p) { T[rt] ++ ; return ; } rr int mid = (l + r) >> 1 ; \n\tif (p <= mid) update(rt << 1, l, mid, p) ; else update(rt << 1 | 1, mid + 1, r, p) ; push_up(rt) ; \n}\ninline int que(int rt, int l, int r, int ql, int qr){\n\tif (ql > qr) return 0 ; \n\tif (ql <= l && qr >= r) return T[rt] ; rr int mid = (l + r) >> 1, res = 0 ; \n\tif (ql <= mid) res += que(rt << 1, l, mid, ql, qr) ; if (qr > mid) res += que(rt << 1 | 1, mid + 1, r, ql, qr) ; return res ; \n}\ninline void work_contor(int *now){\n\tint k, l, t = 0, res = 0; \n\tfor (k = 1 ; k <= N ; ++ k, t = 0)\n\t\tres = (1ll * res + 1ll * (now[k] - que(1, 1, N, 1, now[k] - 1) - 1) * Flr[N - k]) % Mod, update(1, 1, N, now[k]) ;  \n\tcout << (res + 1) % Mod << endl ;  \n}\nint main(){\n\tcin >> N ; Flr[1] = Flr[0] = 1 ; \n\tfor (i = 2; i <= N ; i ++) Flr[i] = 1ll * Flr[i - 1] * i % Mod ;\n\tfor (j = 1; j <= N ; j ++) scanf(\"%d\", &query[j]) ; work_contor(query) ; return 0 ;\n}\n\n```",
        "postTime": 1557738073,
        "uid": 28313,
        "name": "\u768e\u6708\u534a\u6d12\u82b1",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "### \u7b80\u4ecb\n\u5eb7\u6258\u5c55\u5f00\u662f\u4e00\u79cd\u54c8\u5e0c\u7684\u65b9\u6cd5\uff0c\u5176\u4f5c\u7528\u662f\u5c06\u5168\u6392\u5217\u6620\u5c04\u6210\u4e00\u4e2a\u6574\u6570\uff0c\u8be5\u6574\u6570\u4e3a\u5168\u6392\u5217\u7684\u6392\u540d\u3002\n\n### \u89e3\u9898\u8fc7\u7a0b\n\u6211\u4eec\u5148\u62ff\u4e00\u7ec4\u6570\u636e\u6765\u624b\u73a9\uff1a\n\n\u6c42\u5168\u6392\u5217 $1,3,2,5,4$ \u7684\u6392\u540d\u3002\n\n\u7b2c 1 \u4f4d\u662f 1 \uff0c\u8fd9\u4e2a\u5168\u6392\u5217\u4e4b\u524d\u9664 1 \u4ee5\u5916\u6ca1\u6709\u4efb\u4f55\u6570\u4f1a\u653e\u5728\u7b2c 1 \u4f4d\uff0c\u6545\u4e0d\u589e\u52a0\u6392\u540d\u3002\n\n\u7b2c 2 \u4f4d\u662f 3 \uff0c\u5728\u4ee5 $1$ \u4e3a\u5f00\u5934\u7684\u5168\u6392\u5217\u4e2d\uff0c\u8fd9\u4e2a\u5168\u6392\u5217\u4e4b\u524d\u8fd8\u6709\u4ee5 2 \u4f5c\u4e3a\u7b2c 2 \u4f4d\u7684\u5168\u6392\u5217\uff0c\u5171 1 \u4e2a\u6570\u3002\u6545\u524d\u9762\u5b58\u5728 $1 \\times (5-2)!$ \u4e2a\u5168\u6392\u5217\u3002\n\n\u7b2c 3 \u4f4d\u662f 2 \uff0c\u5728\u4ee5 $1,3$ \u4e3a\u5f00\u5934\u7684\u5168\u6392\u5217\u4e2d\uff0c\u8fd9\u4e2a\u5168\u6392\u5217\u4e4b\u524d\u9664 2 \u4ee5\u5916\u6ca1\u6709\u4efb\u4f55\u6570\u4f1a\u653e\u5728\u7b2c 3 \u4e3a\uff0c\u6545\u4e0d\u589e\u52a0\u6392\u540d\u3002\n\n\u7b2c 4 \u4f4d\u662f 5 \uff0c\u5728\u4ee5 $1,3,2$ \u4e3a\u5f00\u5934\u7684\u5168\u6392\u5217\u4e2d\uff0c\u8fd9\u4e2a\u5168\u6392\u5217\u4e4b\u524d\u8fd8\u6709\u4ee5 4 \u4f5c\u4e3a\u7b2c 4 \u4f4d\u7684\u5168\u6392\u5217\uff0c\u5171 1 \u4e2a\u6570\u3002\u6545\u524d\u9762\u5b58\u5728 $1 \\times (5-4)!$ \u4e2a\u5168\u6392\u5217\u3002\n\n\u7b2c 5 \u4f4d\u81ea\u7136\u7a33\u5b9a\uff0c\u65e0\u9700\u8003\u8651\u3002\n\n\u6240\u4ee5\u8be5\u5168\u6392\u5217\u7684\u524d\u9762\u5171\u6709 $1 \\times (5-2)! + 1 \\times (5-4)! = 7$ \u4e2a\u5168\u6392\u5217\uff0c\u6392\u540d\u5219\u662f\u524d\u9762\u5168\u6392\u5217\u7684\u6570\u91cf\u52a01\uff0c\u5373\u7b2c 8 \u3002\n\n\u7ed9\u51fa\u6838\u5fc3\u4ee3\u7801\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2)$ \uff1a\n```cpp\n/*\u7ed9\u51fa\u5168\u6392\u5217\u957f\u5ea6n\u548c\u5168\u6392\u5217a[1..n]\uff0c\u7528\u5eb7\u6258\u5c55\u5f00\u6c42\u5176\u6392\u540d*/\nint cantor(int n,int *a){\n    int i,j;\n    int ranking=1,s;\n    for(i=1;i<n;++i){\n        s=0;\n        for(j=i+1;j<=n;++j){\n            if(a[j]<a[i]){\n                ++s;\n            }\n        }\n        ranking+=s*f[n-i];\n    }\n    return ranking;\n}\n```\n\n\u8fd9\u79cd\u505a\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5bf9\u4e8e\u8fd9\u9053\u9898\u7684\u6570\u636e\u6765\u8bf4\uff0c\u5fc5\u7136\u8d85\u65f6\u3002\u6211\u4eec\u5c31\u9700\u8981\u5bf9\u5176\u8fdb\u884c\u4f18\u5316\u3002\n\n\u6211\u4eec\u628a\u5927\u91cf\u7684\u65f6\u95f4\u8017\u5728\u4e86\u67e5\u627e\u4e0a\u9762\uff0c\u4f46\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6811\u72b6\u6570\u7ec4/\u7ebf\u6bb5\u6811\u6765\u8fdb\u884c\u4f18\u5316\u3002\u8fd9\u91cc\u63a8\u8350\u6811\u72b6\u6570\u7ec4\uff0c\u5e38\u6570\u5c0f\uff0c\u4ee3\u7801\u77ed\uff0c ~~\u597d\u80cc~~ \u3002\n\n\u6211\u4eec\u53ea\u9700\u8981\u5c06\u5de6\u8fb9\u5c0f\u4e8e $a_i$ \u7684\u6570\u7684\u6570\u91cf $x$ \u8bb0\u5f55\u4e0b\u6765\uff0c\u53f3\u8fb9\u5c0f\u4e8e $a_i$ \u7684\u6570\u7684\u6570\u91cf\u5373\u4e3a $a_i-1-x$ \u3002\n\n\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6811\u72b6\u6570\u7ec4\u5f53\u4f5c\u4e00\u4e2a\u6876\u6765\u4f7f\u7528\u3002\u904d\u5386\u8fc7\u7a0b\u4e2d\u6bcf\u6b21\u5c06\u6876\u4e2d\u7684 $b_{a_i}$ \u7f6e\u4e3a1\uff0c\u5bf9\u6811\u72b6\u6570\u7ec4\u8fdb\u884c\u5bf9\u5e94\u7684\u64cd\u4f5c\u5373\u53ef\u3002\u8981\u6c42\u5de6\u8fb9\u5c0f\u4e8e $a_i$ \u7684\u6570\u65f6\uff0c\u53ea\u8981\u505a\u4e00\u4e2a\u524d\u7f00\u548c\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nlogn)$\n\n\u7ed9\u51faAC\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\n#define MOD (998244353)\nusing namespace std;\nint n,a[1000000];\nint c[1000001]={};\ninline int lowbit(int x){\n    return x&(-x);\n}\ninline void modify(int p){\n    while(p<=n){\n        ++c[p];\n        p+=lowbit(p);\n    }\n    return;\n}\ninline int ask(int p){\n    int s=0;\n    while(p){\n        s+=c[p];\n        p-=lowbit(p);\n    }\n    return s;\n}\ninline void readInt(int &x){\n    char c;\n    while((c=getchar())<'0' || c>'9');\n    x=(c^48);\n    while('0'<=(c=getchar()) && c<='9'){\n        x=x*10+(c^48);\n    }\n    return;\n}\nint fac[1000000]={1,1};\nint main(){\n    int i,s=0;\n    readInt(n);\n    for(i=0;i<n;++i){\n        readInt(a[i]);\n    }\n    for(i=2;i<1000000;++i){\n        fac[i]=(long long)fac[i-1]*i%MOD;\n    }\n    for(i=0;i<n;++i){\n        s=(s+(long long)fac[n-1-i]*(a[i]-1-ask(a[i]-1))%MOD)%MOD;\n        modify(a[i]);\n    }\n    printf(\"%d\\n\",(s+1)%MOD);\n    return 0;\n}\n```\n\n### \u76f8\u5173\u9898\u76ee\n[P1379 \u516b\u6570\u7801\u6e38\u620f](https://www.luogu.org/problemnew/show/P1379)\n\n\u5229\u7528\u5eb7\u6258\u5c55\u5f00\u53ef\u4ee5\u8fdb\u884c\u72b6\u6001\u538b\u7f29\uff0c\u4fbf\u4e8eBFS\u5f00\u8bb0\u5fc6\u6570\u7ec4\u3002\n\n~~map\u6d41\u73a9\u5bb6\u5f53\u6211\u4ec0\u4e48\u4e5f\u6ca1\u8bf4\u597d\u4e86~~",
        "postTime": 1562071355,
        "uid": 105110,
        "name": "xuezhe",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "# \u5eb7\u6258\u5c55\u5f00\u6a21\u677f\n\n### \u524d\u8a00\n\n~~\u770b\u4e86\u4ebf\u773c\u9898\u89e3\u5c31\u4f1a\u5199\u4e86~~\n\n~~\u4f46\u662f\u7206\u4e86\u4ebf\u6b21\u96f6/dk/dk~~\n\n\u8fd9\u91cc\u8bf4\u8bf4\u81ea\u5df1\u5bf9\u5eb7\u6258\u5c55\u5f00\u7684\u7406\u89e3\u3002\n\n\u9898\u76ee\u94fe\u63a5\uff1a[$\\text{Link}$](https://www.luogu.com.cn/problem/P5367)\n\n### \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u5b9a\u4e00\u4e2a $1$ \u81f3 $n$ \u7684\u6392\u5217\uff0c\u6c42\u5b83\u5728 $1$ \u81f3 $n$ \u7684\u5168\u6392\u5217\u4e2d\u7684\u6392\u540d\u3002\n\n### \u9898\u76ee\u5206\u6790\n\n\u5047\u8bbe\u7ed9\u5b9a\u7684 $n$ \u4e2a\u6b63\u6574\u6570\u5206\u522b\u662f $a_1,a_2,\\cdots,a_n$\u3002\n\n\u6211\u4eec\u5148\u770b\u4e00\u4e2a\u67ff\u5b50\uff1a\n\n$$\\sum_{i=1}^n(v_{a_i}\\times (n-i)!)+1$$\n\n\u5176\u4e2d $v_{a_i}$ \u8868\u793a\u5728\u7b2c $i+1$ \u81f3 $n$ \u4f4d\u7684\u6bd4 $a_i$ \u5c0f\u7684\u6570\u7684\u4e2a\u6570\u3002\n\n\u8fd9\u4e2a\u67ff\u5b50\u5c31\u662f\u6700\u7ec8\u7684\u7b54\u6848\uff0c\u6211\u4eec\u6765\u89e3\u91ca\u4e00\u4e0b\u3002\n\n\u5355\u8003\u8651\u7b2c $i$ \u4f4d\uff0c\u5b83\u672c\u8eab\u53ef\u4ee5\u653e $v_{a_i}$ \u4e2a\u7684\uff0c\u56e0\u4e3a\u8981\u8ba1\u7b97\u5b83\u7684\u6392\u540d\u7684\u8bdd\u6bd4\u5b83\u5c0f\u7684\u6570\u90fd\u53ef\u4ee5\u653e\u4e0a\u53bb\u3002\u800c\u5269\u4e0b\u7684 $(n-i)$ \u4e2a\u4f4d\u7f6e\u4e00\u5171\u5c31\u53ef\u4ee5\u653e $(n-i)$ \u4e2a\u6570\uff0c\u4f60\u600e\u4e48\u653e\u90fd\u884c\uff0c\u6240\u4ee5\u4e00\u5171\u6709 $(n-i)!$ \u79cd\u65b9\u6cd5\u3002\u6700\u540e\u9700\u8981\u52a0\u4e0a $1$ \u662f\u56e0\u4e3a\u8981\u8ba1\u7b97\u5b83\u672c\u8eab\u7684\u6392\u540d\u3002\n\n\u90a3\u600e\u4e48\u7ef4\u62a4 $v$ \u5462\uff1f\u6211\u4eec\u8bbe $h_{x}$ \u8868\u793a\u5230\u4e86\u76ee\u524d\u7b2c $i$ \u4e2a\u4f4d\u7f6e\uff0c\u6570 $x$ \u6709\u6ca1\u6709\u51fa\u73b0\u8fc7\uff0c\u6ca1\u51fa\u73b0\u8fc7\u4e3a $1$\uff0c\u51fa\u73b0\u8fc7\u4e3a $0$\uff0c\u663e\u7136\uff0c\u4e00\u5f00\u59cb\u6240\u6709\u6570\u90fd\u6ca1\u51fa\u73b0\u8fc7\uff0c$h$ \u6570\u7ec4\u5c31\u90fd\u5e94\u8be5\u8d4b\u503c\u6210 $1$\u3002\n\n\u5f53\u6211\u4eec\u8981\u8ba1\u7b97 $v_{a_i}$ \u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u67ff\u5b50\uff1a$\\sum_{j=1}^{a_i-1}h_j$\uff0c\u610f\u601d\u662f\u5148\u628a\u6240\u6709\u6bd4 $a_i$ \u5c0f\u7684\u52a0\u4e0a\uff0c\u800c\u90a3\u4e9b\u5df2\u7ecf\u51fa\u73b0\u8fc7\u7684\u90fd\u5df2\u7ecf\u6210\u4e3a $0$ \u4e86\uff0c\u5b8c\u7f8e\u7684\u7ef4\u62a4\u4e86 $v$\u3002\n\n\u663e\u7136 $h$ \u9700\u8981\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u3002\n\n\u9636\u4e58\u7528\u4e00\u4e2a $O(n)$ \u7684\u9884\u5904\u7406\u4e5f\u7ef4\u62a4\u51fa\u6765\u4e86\uff0c\u4e0d\u8fc7\u4e2d\u95f4\u8981\u6ce8\u610f\u7cbe\u5ea6\u7684\u95ee\u9898\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n\\log n)$\u3002\n\n\u7a7a\u95f4\u590d\u6742\u5ea6\uff1a$O(n)$\u3002\n\n[$AC$ \u8bb0\u5f55](https://www.luogu.com.cn/record/47700389)\n\n[$code$](https://paste.ubuntu.com/p/fWCx2WVVX2/)\n\n$$\\texttt{The End.by UF}$$\n\n",
        "postTime": 1615468109,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5367 \u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00"
    },
    {
        "content": "[P5367 \u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00](https://www.luogu.org/problem/P5367)\n\n\u53d1\u73b0\u8fd9\u9898\u5404\u4f4d\u5927\u4f6c\u90fd\u662f\u7528\u7684\u6811\u72b6\u6570\u7ec4\uff0c\u7136\u800c\u82ef\u5b9d\u5b9d\u6bd4\u8f83\u7b28\uff0c\u4e0d\u4f1a\u6811\u72b6\u6570\u7ec4\uff0c\u4e8e\u662f\u82ef\u5b9d\u5b9d\u5c31\u6765\u6c34\u4e00\u7bc7\u7ebf\u6bb5\u6811\u7684\u9898\u89e3~\uff08\u7b2c\u4e00\u6b21\u53d1\u9898\u89e3\uff0c\u5199\u7684\u4e0d\u597d\u6c42\u6307\u51fa~\uff09\uff08\u4e5f\u6c42\u5927\u5bb6\u652f\u6301\u4e00\u4e0b\u4e0b\u5566~\uff09\n\n### 1.\u5eb7\u6258\u5c55\u5f00\u7684\u5b9a\u4e49\u548c\u5f0f\u5b50 \n~~\uff08\u5404\u4f4d\u5927\u4f6c\u90fd\u662f\u8df3\u8fc7\u8fd9\u4e00\u6bb5\u7684\u5427\uff1f\uff09~~\n\n**\u5eb7\u6258\u5c55\u5f00**\u662f\u4e00\u4e2a\u5168\u6392\u5217\u5230\u4e00\u4e2a\u81ea\u7136\u6570\u7684\u53cc\u5c04\uff0c\u5e38\u7528\u4e8e\u6784\u5efa\u54c8\u5e0c\u8868\u65f6\u7684\u7a7a\u95f4\u538b\u7f29\u3002\u5eb7\u6258\u5c55\u5f00\u7684\u5b9e\u8d28\u662f\u8ba1\u7b97\u5f53\u524d\u6392\u5217\u5728\u6240\u6709\u7531\u5c0f\u5230\u5927\u5168\u6392\u5217\u4e2d\u7684\u987a\u5e8f\uff0c\u56e0\u6b64\u662f\u53ef\u9006\u7684\u3002\uff08from \u767e\u5ea6\uff09\n\n**\u5f0f\u5b50\uff1a**~~\u767e\u5ea6\u767e\u79d1\u4e0a\u7684\u5f0f\u5b50\u8c8c\u4f3c\u662f\u9519\u7684~~\n\n   $X = a_{1}(n-1)!+a_{2}(n-2)!+\\cdots+a_{n}\\cdot0! $\n \n\u5176\u4e2d $a_{i}$ \u6307\u7684\u662f\u5728\u5f53\u524d _**\u672a\u51fa\u73b0**_ \u7684\u6570\u5b57\u4e2d\u6709\u51e0\u4e2a\u6bd4\u5df2\u77e5\u6392\u5217\u7684\u7b2c $i$ \u4f4d\u5c0f\uff0c\u901a\u8fc7\u8fd9\u4e2a\u5f0f\u5b50\u53ef\u4ee5\u6c42\u51fa\u5728\u5168\u6392\u5217\u4e2d\u6709\u591a\u5c11\u6392\u5217\u5728\u5df2\u77e5\u6392\u5217\u7684\u524d\u9762\u3002\u4e3e\u4e2a\u6817\u5b50\uff1a\n\n\u6392\u5217\uff1a$1,4,3,2,5$\n\n\u7b2c\u4e00\u4f4d\uff1a$1$ \u5728 $1,2,3,4,5$ \u4e2d\u6392\u7b2c $1$ \u4e2a \u2192 $0\\times4!$\n\n\u7b2c\u4e8c\u4f4d\uff1a$4$ \u5728 $2,3,4,5$ \u4e2d\u6392\u7b2c $3$ \u4e2a \u2192 $2\\times3!$\n\n\u7b2c\u4e09\u4f4d\uff1a$3$ \u5728 $2,3,5$ \u4e2d\u6392\u7b2c $2$ \u4e2a \u2192 $1\\times2!$\n\n\u7b2c\u56db\u4f4d\uff1a$2$ \u5728 $2,5$ \u4e2d\u6392\u7b2c $1$ \u4e2a \u2192 $0\\times1!$\n\n\u7b2c\u4e94\u4f4d\uff1a$5$ \u5728 $5$ \u4e2d\u6392\u7b2c $1$ \u4e2a \u2192 $0\\times0!$\n\n\u6240\u4ee5 $X=0\\times4!+2\\times3!+1\\times2!+0\\times1!+0\\times0!=14$\n\n~~\u6240\u4ee5\uff0c\u5982\u679c\u8f93\u51fa $14$ \u4f60\u5c31\u5149\u8363\u7684 _**WA**_ \u5566\uff01~~\n\n\u8fd9\u4e2a $X$ \u53ea\u662f\u8fd9\u4e2a\u6392\u5217\u4e4b\u524d\u7684\u6392\u5217\u6570\uff0c\u800c\u6211\u4eec\u8981\u6c42\u8fd9\u4e2a\u6392\u5217\u7684\u4f4d\u7f6e\uff0c\u6240\u4ee5 $ans=X+1=15$\u3002\n\n### 2.\u5927\u81f4\u601d\u8def\n\n\u6839\u636e\u5f0f\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\uff0c\u6211\u4eec\u9700\u8981\u6c42\u4e24\u6837\u4e1c\u897f\uff1a$1$ \u81f3 $n$ \u7684\u9636\u4e58\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u6570\u5728\u672a\u51fa\u73b0\u7684\u6570\u4e2d\u7684\u6392\u5e8f\u3002\n\n\u524d\u8005\u53ef\u4ee5\u7528\u4e00\u4e2a\u524d\u7f00\u79ef\u6570\u7ec4\u89e3\u51b3\uff1a\uff08\u7c7b\u4f3c\u524d\u7f00\u548c\uff09~~\u4e0d\u4f1a\u524d\u7f00\u548c\u7684\u51fa\u95e8\u5de6\u8f6c~~\n\n```cpp\nint fact[MAXN]={1};//\u521d\u59cb\u53160\u7684\u9636\u4e58\u4e3a1\nfor(int i=1; i<=N; i++) {\n\tfact[i]=(fact[i-1]*i)%MOD;\n}\n```\n\u540e\u8005\u6211\u4eec\u53ef\u4ee5\u5f88\u663e\u7136\u7684\u60f3\u5230\u66b4\u529b\u679a\u4e3e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^{2})$\u3002\u56de\u5934\u4e00\u770b\u9898\u9762\uff0c\u5bf9\u4e8e$100\\%$\u6570\u636e\uff0c$1 \\le N\\le 1,000,000$\u3002\u6240\u4ee5\uff0c\u8fd9\u4e48\u505a\u662f\u59a5\u59a5\u7684 _**TLE**_ \u3002\u6211\u4eec\u5728\u524d\u9762\u7684\u904d\u5386\u4e0a\u6d6a\u8d39\u4e86\u5927\u91cf\u65f6\u95f4\u3002\u5176\u5b9e\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7ef4\u62a4\u524d\u9762\u6570\u7684\u4e2a\u6570\u7684\u603b\u548c\u5c31\u884c\u4e86\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u7528\u6765\u7ef4\u62a4\u533a\u95f4\u548c\u7684\u5229\u5668\u2014\u2014**\u7ebf\u6bb5\u6811**\uff01\n\n### 3.\u7ebf\u6bb5\u6811\u89e3\u6cd5\n[\u4e0d\u4f1a\u7ebf\u6bb5\u6811\u7684\u6233\u8fd9\u91cc](https://www.luogu.org/problemnew/solution/P3372)\n\n\u8fd9\u9898\u7528\u7ebf\u6bb5\u6811\u7684\u57fa\u672c\u601d\u8def\u5c31\u662f\u5c06\u7ebf\u6bb5\u6811\u7684\u5404\u4e2a\u53f6\u5b50\u8282\u70b9\u521d\u59cb\u5316\u4e3a $1$\uff0c\u7136\u540e\u4ece\u6392\u5217\u7684\u7b2c\u4e00\u4e2a\u6570\u5f00\u59cb\u5411\u540e\uff0c\u6bcf\u6b21\u5c06\u7ebf\u6bb5\u6811\u7684\u7b2c $i$ \u4f4d\u8bbe\u7f6e\u4e3a $0$\uff0c\u518d\u7528\u7ebf\u6bb5\u6811\u6c42\u51fa $[1,i-1]$ \u7684\u533a\u95f4\u548c\uff0c\u5373\u4e3a\u672a\u51fa\u73b0\u7684\u6570\u4e2d\u6bd4 $i$ \u5c0f\u7684\u6570\u7684\u4e2a\u6570\u3002\n\n\u82ef\u5b9d\u5b9d\u4f5c\u4e3a\u4e00\u4e2a\u521a\u5b66\u7ebf\u6bb5\u6811\u6ca1\u591a\u4e45\u7684\u83dc\u9e21\uff0c\u5728\u52aa\u529b\u624b\u6253~~\u590d\u5236~~\u7ebf\u6bb5\u6811\u7684\u65f6\u5019\u9047\u5230\u4e86\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898\uff0c\u5176\u4e2d\u6700\u4e3b\u8981\u7684\u662f\u7a7a\u95f4\u4e0d\u591f\uff1a\uff08\u8fd9\u79cd\u65f6\u5019\u60f3\u5230\u697c\u4e0a\u5927\u4f6c\u4eec\u6811\u72b6\u6570\u7ec4 $O(n)$ \u7a7a\u95f4\uff0c\u5fc3\u4e2d\u9887\u6709\u70b9\u60f3\u653e\u5f03\u7684\u51b2\u52a8\uff09\n\n\u82ef\u5b9d\u5b9d\u4e00\u5f00\u59cb\u7528\u7684\u662f\u7ed3\u6784\u4f53\u5b58\u7ebf\u6bb5\u6811\uff1a~~(\u663e\u7136\u662f\u590d\u5236\u7684)~~\n```cpp\nstruct Tree {\n\tlong long Left,Right,Num,Lazy;\n} tree[4*MAXN];\n```\n\u4e8e\u662f\u6765\u4e86\u4e2a\u5e72\u5e72\u51c0\u51c0\u7684 _**MLE**_ \n\n\u56de\u8fc7\u5934\u6765\u7ec6\u7ec6\u5206\u6790\uff1a\u6211\u4eec\u9700\u8981\u7ebf\u6bb5\u6811\u7684\u90a3\u4e48\u591a\u529f\u80fd\u5417\uff1f\n\n\u7b54\u6848\u5f88\u663e\u7136\uff0c\u4e0d\u9700\u8981\u3002\n\n\u4e8e\u662f\u63a5\u4e0b\u6765\u5c31\u662f\u5bf9~~\u53c8\u957f\u53c8\u70e6\u4eba\u7684~~\u7ebf\u6bb5\u6811\u52a0\u4ee5~~\u9609\u5272\u518d\u9609\u5272~~\n\n\u9996\u5148\uff0c\u7531\u4e8e\u8fd9\u9898\u6211\u4eec\u9700\u8981\u5355\u70b9\u4fee\u6539\uff0c\u8fd9\u662f\u4e2a\u7edd\u5bf9\u6807\u8bb0\uff08\u76f8\u5bf9\u6807\u8bb0\u548c\u7edd\u5bf9\u6807\u8bb0\u7684\u6982\u5ff5\u90fd\u4f1a\u5427\uff09\uff0c\u56e0\u6b64$Lazy$\u6807\u8bb0\u5c31\u6ca1\u6709\u4f5c\u7528\u5566\uff01\u7136\u540e\u662f$Left$\u548c$Right$\uff0c\u4e3a\u4e86\u8282\u7701\u7a7a\u95f4\uff0c\u628a\u5b83\u4eec\u8f6c\u79fb\u5230\u4ee3\u7801\u4e2d\u53bb ~~\uff08\u8fd9\u8ba9\u4ee3\u7801\u663e\u5f97\u66f4\u4e11\u4f46\u662f\u6ca1\u529e\u6cd5\uff09~~ \u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ea\u9700\u8981\u4e00\u4e2a$Num$\u6570\u7ec4\u6765\u5b58\u50a8~ ~~\uff08\u82ef\u5b9d\u5b9d\u8fd8\u66fe\u4f5c\u6b7b\u628a**long long**\u6362\u6210\u4e86**int**\u5bfc\u81f4 _**WA**_ \uff09~~\n\n\u63a5\u4e0b\u6765\u5c31\u662f~~\u4f9d\u65e7\u53c8\u957f\u53c8\u70e6\u4eba\u7684~~\u7ebf\u6bb5\u6811AC\u4ee3\u7801\uff1a\uff08\u5728\u88ab\u4e00\u4e2a\u90bb\u5ea7\u7684\u6bd4\u82ef\u5b9d\u5b9d\u5c0f\u4f46\u662f\u6bd4\u82ef\u5b9d\u5b9d\u5f3a\u592a\u591a\u7684\u5927\u4f6c@[\u2657Wendigo\u265d](https://www.luogu.org/user/118365)\u5410\u69fd\u8fc7\u540e\u628a\u5f88\u591a\u666e\u901a\u8fd0\u7b97\u6539\u6210\u4e86\u4f4d\u8fd0\u7b97\uff09\uff08$k<<1 = k\\times2$ ; $ k<<1|1 = k\\times2+1$\uff09\n\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 1000010\n#define MOD 998244353\n#define LL long long//\u5077\u61d2\u795e\u6280\nusing namespace std;\n\ninline LL read() {//\u4f9d\u65e7\u662f\u590d\u5236\u7684\u5feb\u8bfb\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9') {\n\t\tif(ch=='-') {\n\t\t\tf=-1;\n\t\t}\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9') {\n\t\tx=(x<<1)+(x<<3)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\n\nLL N,ans,temp;\nLL Num[4*MAXN];//\u67d0\u4f4d\u5927\u4f6c\u66fe\u544a\u8bc9\u82ef\u5b9d\u5b9d\u5f00\u56db\u500d\u7a7a\u95f4\u6bd4\u8f83\u597d\uff08\u867d\u7136\u636e\u8bf4\u4e24\u500d\u591f\u7528\uff09\nLL fact[MAXN]= {1};\n\ninline void PushUp(LL k) {\n\tNum[k]=(Num[k<<1]+Num[k<<1|1])%MOD;//\u522b\u5fd8\u4e86MOD\uff01\n\treturn;//return \u662f\u4e2a\u597d\u4e60\u60ef\n}\n\ninline void Build(LL l,LL r,LL k) {\n\tif(l==r) {\n\t\tNum[k]=1;\n\t\treturn;\n\t}\n\tLL mid=(l+r)>>1;\n\tBuild(l,mid,k<<1);\n\tBuild(mid+1,r,k<<1|1);\n\tPushUp(k);\n\treturn;\n}\n\ninline void PointSet0(LL k,LL l,LL r,LL p) {//\u628ap\u8bbe\u5b9a\u4e3a0\n\tif(l==r) {\n\t\tNum[k]=0;\n\t\treturn;\n\t}\n\tLL mid=(l+r)>>1;\n\tif(p<=mid) {\n\t\tPointSet0(k<<1,l,mid,p);\n\t} else {\n\t\tPointSet0(k<<1|1,mid+1,r,p);\n\t}\n\tPushUp(k);\n\treturn;\n}\n\ninline LL QuerySegment(LL k,LL l,LL r,LL ql,LL qr) {//\u67e5\u8be2[ql,qr]\u533a\u95f4\u548c\n\tif(ql>qr) {//\u4e0d\u52a0\u8fd9\u4e2a\u4f1a\u51fa\u95ee\u9898\uff0c\uff0c\u82ef\u5b9d\u5b9d\u683d\u8fc7\u4e00\u6b21\n\t\treturn 0;\n\t}\n\tif(ql==l&&qr==r) {\n\t\treturn Num[k];\n\t}\n\tLL mid=(l+r)>>1;\n\tif(qr<=mid) {\n\t\treturn QuerySegment(k<<1,l,mid,ql,qr);\n\t} else if(ql>mid) {\n\t\treturn QuerySegment(k<<1|1,mid+1,r,ql,qr);\n\t} else {\n\t\treturn (QuerySegment(k<<1,l,mid,ql,mid)+QuerySegment(k<<1|1,mid+1,r,mid+1,qr))%MOD;//\u522b\u5fd8\u4e86MOD\uff01\n\t}\n}\n\nint main() {\n\tN=read();\n\tBuild(1,N,1);\n\tfor(int i=1; i<=N; i++) {\n\t\tfact[i]=(fact[i-1]*i)%MOD;\n\t}\n\tfor(int i=1; i<=N; i++) {\n\t\ttemp=read();\n\t\tPointSet0(1,1,N,temp);\n\t\tans=(ans+(QuerySegment(1,1,N,1,temp-1)*fact[N-i])%MOD)%MOD;\n\t}\n\tprintf(\"%lld\\n\",ans+1);//\u522b\u5fd8\u4e86+1\uff01\n\treturn 0;\n}\n```\n~~[[\u67d0\u4e2a\u5f3a\u8005](https://www.luogu.org/user/121555)]\u66fe\u8bf4\u82ef\u5b9d\u5b9d\u7684\u7801\u98ce\u6781\u5176\u4e11~~\n\n",
        "postTime": 1573557092,
        "uid": 207234,
        "name": "BabyBenzene",
        "ccfLevel": 0,
        "title": "P5367 \u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00 \u7ebf\u6bb5\u6811\u9898\u89e3"
    },
    {
        "content": "### \u5eb7\u6258\u5c55\u5f00\u662f\u4ec0\u4e48\n\u6c42$1\\sim n$\u7684\u5168\u6392\u5217\u67d0\u4e2a\u6392\u5217\u6309\u5b57\u5178\u5e8f\u7684\u6392\u540d\n### \u5eb7\u6258\u5c55\u5f00\u6709\u4ec0\u4e48\u7528\n\u5bf9\u4e00\u4e2a\u6392\u5217\u8fdb\u884c\u72b6\u538b\n### \u5eb7\u6258\u5c55\u5f00\u89e3\u6cd5\n\n- $O(n^2)$\u89e3\u6cd5\n\n\u4ece\u7b2c$1$\u4f4d\u5f00\u59cb\u679a\u4e3e\uff0c\u5230\u7b2c$n$\u4f4d\n\n\u679a\u4e3e\u7b2c$i$\u4f4d\u8fd8\u80fd\u9009\u591a\u5c11\u4e2a\uff0c\u8fd9\u4e2a\u6392\u5217\u7b2c$i$\u4f4d\u662f\u8fd8\u80fd\u9009\u7684\u4e2d\u7684\u6392\u540d\n\n\u6709\u591a\u5c11\u4e2a\u6bd4\u5b83\u8fd8\u5c0f\u7684\uff0c\u52a0\u4e0a\u4e2a\u6570\u4e58\u4e0a$n-i$\u7684\u5168\u6392\u5217\uff08\u8fd8\u5269$n-i$\u4e2a\u4efb\u610f\u9009\uff09\n\n- $O(n$ $log$ $n)$\u89e3\u6cd5\n\n$O(n^2)$\u5f88\u660e\u663e\u8981\u8d85\u65f6\uff0c\u6570\u636e\u8981\u6c42\u5fc5\u987b$O(n$ $log$ $n)$\n\n\u679a\u4e3e\u6bcf\u4e00\u4f4d\u662f\u5fc5\u7136\u4e0d\u53ef\u7701\u7684\uff0c\u4e0d\u8fc7\u6392\u540d\u53ef\u4ee5\u4f7f\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\n\n\u518d\u7528\u9f9f\u901f\u4e58\u5361\u4e2a\u5e38\uff0c\u6b64\u9898\u5c31\u8fc7\u4e86\n\n### \u4ee3\u7801\n\n```cpp\n#include <cstdio>\nconst int mod=998244353;\nint n,ans=1,a[1000001],mul[1000001],tree[1000001];\nint read(){\n    char ch=getchar();int res=0,w=1;\n    while(ch<'0'||ch>'9') {if(ch=='-') w=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9') {res=res*10+ch-'0';ch=getchar();}\n    return res*w;\n}\ninline int qmod(int x){\n\tif(x<(mod<<1)) return x<mod?x:x-mod;\n\treturn x%mod;\n} \ninline int qmul(int x,int y){\n\tint res=0;\n\twhile(y)\n\t{\n\t\tif(y&1) res=qmod(res+x);\n\t\tx=qmod(x<<1);y>>=1;\n\t}\n\treturn res;\n}\ninline int lowbit(int x){\n\treturn x&(-x);\n}\nvoid add(int x){\n\twhile(x<=n) {tree[x]++;x+=lowbit(x);}\n}\nint query(int x){\n\tint res=0;\n\twhile(x) {res+=tree[x];x-=lowbit(x);}\n\treturn res;\n}\nint main(){\n\tn=read();mul[0]=1;\n\tfor(register int i=1;i<=n;i++) {a[i]=read();mul[i]=qmul(mul[i-1],i);}\n\tfor(register int i=1;i<=n;i++) {ans=qmod(ans+qmul(a[i]-1-query(a[i]),mul[n-i]));add(a[i]);}\n    printf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1557922609,
        "uid": 80679,
        "name": "Register",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u5eb7\u6258\u5c55\u5f00\uff1a\n\n\u5eb7\u6258\u5c55\u5f00\u662f\u4e00\u4e2a\u5168\u6392\u5217\u5230\u4e00\u4e2a\u81ea\u7136\u6570\u7684\u53cc\u5c04\uff0c\u5e38\u7528\u4e8e\u6784\u5efa\u54c8\u5e0c\u8868\u65f6\u7684\u7a7a\u95f4\u538b\u7f29\u3002 \u5eb7\u6258\u5c55\u5f00\u7684\u5b9e\u8d28\u662f\u8ba1\u7b97\u5f53\u524d\u6392\u5217\u5728\u6240\u6709\u7531\u5c0f\u5230\u5927\u5168\u6392\u5217\u4e2d\u7684\u540d\u6b21\uff0c\u56e0\u6b64\u662f\u53ef\u9006\u7684\u3002\n\nX = A[0] * (n-1)! + A[1] * (n-2)! + \u2026 + A[n-1] * 0!\n\nA[i] \u6307\u7684\u662f\u4f4d\u4e8e\u4f4d\u7f6ei\u540e\u9762\u7684\u6570\u5c0f\u4e8eA[i]\u503c\u7684\u4e2a\u6570,\u540e\u9762\u4e58\u7684\u5c31\u662f\u540e\u9762\u8fd8\u6709\u591a\u5c11\u4e2a\u6570\u7684\u9636\u4e58\n```cpp\nlong long cantor()\n{\n    long long ans=0;\n    inc(1,n,1){\n        long long cnt=0;\n        long long num=1,sum=1;\n        for(int j=i+1;j<=n;j++){\n            if(a[j]<a[i]) ++cnt;\n            sum=sum*num%p;\n            ++num;\n        }\n        ans=(ans+cnt*sum%p)%p;\n    }\n    return ans%p;\n}\n```\n\n\u518d\u95ee\uff1a\u867d\u7136\u77e5\u9053\u4e86\u5eb7\u6258\u5c55\u5f00\u7684\u65b9\u6cd5\uff0c\u4f46\u600e\u6837\u77e5\u9053\u6392\u540d\u6c42\u6392\u5217\u5462\uff1f\n\n\u7b54:\u90a3\u5c31\u4f7f\u7528\u9006\u5eb7\u6258\u5c55\u5f00\uff01\uff1b\n\n\u9006\u5eb7\u6258\u5c55\u5f00\uff1a\n\n\u524d\u9762\u5df2\u7ecf\u8bf4\u5230\u5eb7\u62d6\u5c55\u5f00\u662f\u4ece\u5e8f\u5217\u5230\u81ea\u7136\u6570\u7684\u6620\u5c04\u4e14\u662f\u53ef\u9006\u7684\uff0c\u90a3\u4e48\u9006\u5eb7\u62d6\u5c55\u5f00\u4fbf\u662f\u4ece\u81ea\u7136\u6570\u5230\u5e8f\u5217\u7684\u6620\u5c04\u3002\n\n\u4e3e\u4f8b\u5b50\uff1a\n\n\u5728\uff081\uff0c2\uff0c3\uff0c4\uff0c5) \u7ed9\u51fa61\u53ef\u4ee5\u7b97\u51fa\u8d77\u6392\u5217\u7ec4\u5408\u4e3a34152\n\n\u5177\u4f53\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n\u7528 61 / 4! = 2\u4f5913\uff0c\u8bf4\u660e ,\u8bf4\u660e\u6bd4\u9996\u4f4d\u5c0f\u7684\u6570\u67092\u4e2a\uff0c\u6240\u4ee5\u9996\u4f4d\u4e3a3\u3002\n\n\u7528 13 / 3! = 2\u4f591\uff0c\u8bf4\u660e \uff0c\u8bf4\u660e\u5728\u7b2c\u4e8c\u4f4d\u4e4b\u540e\u5c0f\u4e8e\u7b2c\u4e8c\u4f4d\u7684\u6570\u67092\u4e2a\uff0c\u6240\u4ee5\u7b2c\u4e8c\u4f4d\u4e3a4\u3002\n\n\u7528 1 / 2! = 0\u4f591\uff0c\u8bf4\u660e \uff0c\u8bf4\u660e\u5728\u7b2c\u4e09\u4f4d\u4e4b\u540e\u6ca1\u6709\u5c0f\u4e8e\u7b2c\u4e09\u4f4d\u7684\u6570\uff0c\u6240\u4ee5\u7b2c\u4e09\u4f4d\u4e3a1\u3002\n\n\u7528 1 / 1! = 1\u4f590\uff0c\u8bf4\u660e \uff0c\u8bf4\u660e\u5728\u7b2c\u4e8c\u4f4d\u4e4b\u540e\u5c0f\u4e8e\u7b2c\u56db\u4f4d\u7684\u6570\u67091\u4e2a\uff0c\u6240\u4ee5\u7b2c\u56db\u4f4d\u4e3a5\u3002\n```cpp\nstatic const int FAC[] = {1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880};   // \u9636\u4e58\u9884\u5904\u7406\nvoid decantor(int x, int n)\n{\n    vector<int> v;  // \u5b58\u653e\u5f53\u524d\u53ef\u9009\u6570\n    vector<int> a;  // \u6240\u6c42\u6392\u5217\u7ec4\u5408\n    for(int i=1;i<=n;i++)\n        v.push_back(i);\n    for(int i=m;i>=1;i--)\n    {\n        int r = x % FAC[i-1];\n        int t = x / FAC[i-1];\n        x = r;\n        sort(v.begin(),v.end());// \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\n        a.push_back(v[t]);      // \u5269\u4f59\u6570\u91cc\u7b2ct+1\u4e2a\u6570\u4e3a\u5f53\u524d\u4f4d\n        v.erase(v.begin()+t);   // \u79fb\u9664\u9009\u505a\u5f53\u524d\u4f4d\u7684\u6570\n    }\n}\n```\n\n\u4f46\u662f......\n\n\u4f60\u4f1a\u53d1\u73b0\uff0c\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fn^2\u7684\uff0c\u6211\u4eec\u65e0\u6cd5\u63a5\u53d7\u8fd9\u4e48\u66b4\u529b\u7684\u7b97\u6cd5\uff1b\u5373\u4f7f\u6bd4\u679a\u4e3e\u5feb\u4e50\u5f88\u591a\uff1b\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u603b\u4e0d\u80fd\u6574\u4e2aex\u5eb7\u6258\u5c55\u5f00\uff0c\u6240\u4ee5\u5f00\u59cb\u8003\u8651\u4f18\u5316\uff1b\n\n\u4ece\u9636\u4e58\u4e0a\u5165\u624b\uff1f\u8fd8\u662f\u4e0d\u591f\u5feb\u3002\u90a3\u4e48\u5269\u4f59\u4f18\u5316\u7684\u4ec5\u4ec5\u5269\u4e00\u4e2a\u5730\u65b9\uff1a\u7edf\u8ba1\u5c0f\u4e8ea[i]\u4e2a\u6570.\n\n\u8fd9\u65f6\u6211\u4eec\u4f1a\u60f3\u5230\u6211\u4eec\u53ef\u7231\u7684\u670b\u53cb\uff1a\u6811\u72b6\u6570\u7ec4\u3002\n\nnlogn\u7684\u590d\u6742\u5ea6\uff0c\u5f00\u5fc3\u6109\u60a6\u7684AC\u6389\u4e86\u5b83\uff1b\n```cpp\n#include <bits/stdc++.h>\n#define p 998244353\n#define inc(a,b,c) for(register int i=a;i<=b;i+=c)\nusing namespace std;\nint n; \nint a[1000010],c[1000010];\nlong long pre[1000010];\nint lowbit(int x)\n{\n    return x&(-x);\n}\nint query(int x)\n{\n    int res=0;\n    while(x>0){\n        res+=c[x];\n        x-=lowbit(x);\n    }\n    return res;\n}\nvoid add(int x)\n{\n    while(x<=n){\n        c[x]+=1;\n        x+=lowbit(x);\n    }\n}\nlong long cantor()\n{\n    long long ans=0;\n    for(register int i=n;i>=1;i--){\n        long long ask=query(a[i]);\n        add(a[i]);\n        long long tmp=pre[n-i];\n        ans=(ans+tmp*ask%p)%p;\n    }\n    return ans%p;\n}\nint main()\n{\n    cin>>n;\n    pre[0]=1;\n    inc(1,n,1){\n        pre[i]=pre[i-1]*i%p;\n    }\n    inc(1,n,1){\n        scanf(\"%d\",&a[i]);\n    }\n    cout<<cantor()+1;\n    \n}\n```\n\n\u9644\uff1a\u516c\u5f0f\u7684\u8bc1\u660e\n\n\u67d0\u4e00\u5168\u6392\u5217\u5e8f\u5217\u7684\u7f16\u53f7\u5373\u7b49\u4e8e\u6392\u5728\u5b83\u524d\u9762\u7684\u5168\u6392\u5217\u7684\u4e2a\u6570\uff0c\u800c\u7531\u7f16\u53f7\u5b9a\u4e49\u53ef\u77e5\uff0c\u5176\u524d\u9762\u7684\u5168\u6392\u5217\u7ec4\u6210\u6570\u90fd\u5c0f\u4e8e\u8be5\u5168\u6392\u5217\u7ec4\u6210\u7684\u6570\u3002\n\n\u8fd8\u662f\u7528\u4f8b\u5b50\u6765\u8bf4\u660e\u5427\uff0c\u66f4\u6613\u4e8e\u7406\u89e3\uff0c\u8003\u5bdf3214\uff0c\u6211\u4eec\u8981\u6c42\u51fa\u6bd4\u5b83\u5c0f\u7684\u5168\u6392\u5217\u7684\u4e2a\u6570\uff0c\u53ef\u4ee5\u8fd9\u6837\u8ba1\u7b97\uff1a\n\n1. \u5343\u4f4d\u53d61\u62162\uff0c\u540e\u4e09\u4f4d\u7531\u5269\u4e0b\u76843\u4e2a\u5143\u7d20\u5168\u6392\u5217\uff0c\u51712*3!\u79cd\uff1b\n\n2. \u5343\u4f4d\u53d63\uff0c\u767e\u4f4d\u53d6\u5c0f\u4e8e2\u7684\u5143\u7d20\uff0c\u53ea\u80fd\u4e3a1\uff0c\u540e\u4e24\u4f4d\u7531\u5269\u4e0b\u76842\u4e2a\u5143\u7d20\u5168\u6392\u5217\uff0c\u51711*2\uff01\u79cd\uff1b\n\n3. \u5343\u4f4d\u53d63\uff0c\u767e\u4f4d\u53d62\uff0c\u5341\u4f4d\u53d6\u5c0f\u4e8e1\u7684\u5143\u7d20\uff0c\u4e0d\u5b58\u5728\uff1b\n\n4. \u6700\u540e\u4e00\u9879\u4e00\u5b9a\u4e3a0\uff1b",
        "postTime": 1569215850,
        "uid": 119189,
        "name": "\u795e\u4e4b\u53f3\u5927\u81e3",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u8fd9\u91cc\u6765\u4e00\u6ce2\u7ebf\u6bb5\u6811\u89e3\n\n\u5173\u4e8e\u5eb7\u6258\u5c55\u5f00\u7684\u8868\u8fbe\u5f0f\u697c\u4e0a\u5de8\u4f6c\u5df2\u7ecf\u8bf4\u7684\u5f88\u6e05\u695a\u4e86\uff0c\u8fd9\u91cc\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u7ef4\u62a4\u6bcf\u4e00\u4e2a\u6570\u5728\u6b64\u65f6\u7684 $rank$\u3002\n\n\u8fd9\u91cc\u6211\u4eec\u7528\u5230\u4e86\u6743\u503c\u7ebf\u6bb5\u6811\uff0c\u5c06\u6743\u503c\u4f5c\u4e3a\u533a\u95f4\u7ef4\u62a4\u3002\u7ebf\u6bb5\u6811\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u521d\u59cb\u5316\u4e3a1\uff0c\u6bcf\u5904\u7406\u4e00\u4e2a\u6570 $x$\uff0c\u5c31\u628a $[x,x]$ \u7f6e\u4e3a $0$\uff0c\u8fd9\u6837\u67e5\u8be2 $[1,x-1]$ \u7684\u548c\u5c31\u53ef\u4ee5\u5728 $log(n)$ \u7684\u65f6\u95f4\u5185\u5f97\u5230 $rank(x)-1$ \u4e86\u3002\n\n\u4ee5\u4e0b\u4ee3\u7801\uff08\u7ebf\u6bb5\u6811\u5df2\u7ecf\u7b80\u5316\u5230\u8fde $lazy$ \u6807\u8bb0\u90fd\u4e0d\u7528\u4e86\uff09\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define INF 0x3f3f3f3f\n#define MOD 998244353\n#define MAX_ARR 1000001\ntypedef long long ll;\n\nll read(){\n    ll s=0,w=1; char ch=getchar();\n    while (ch<'0'||ch>'9') {if (ch=='-') w=-1; ch=getchar();}\n    while (ch>='0'&&ch<='9') s=(s<<3)+(s<<1)+ch-'0',ch=getchar();\n    return s*w;\n}\n\nll st[4*MAX_ARR],a[MAX_ARR],fact[MAX_ARR],ans=0;\nint n;\n\nvoid build(ll root,ll l,ll r){\n    if (l==r){\n        st[root] = 1; return;\n    }\n    ll mid = (l+r)/2;\n    build(root*2,l,mid); build(root*2+1,mid+1,r);\n    st[root] = st[root*2]+st[root*2+1];\n}\n\nvoid update(ll root,ll l,ll r,ll x){\n    if (l>x||r<x) return;\n    if (l==r&&l==x) {st[root] = 0; return;}\n    ll mid = (l+r)/2;\n    update(root*2,l,mid,x); update(root*2+1,mid+1,r,x);\n    st[root] = st[root*2]+st[root*2+1];\n}\n\nll query(ll root,ll l,ll r,ll ql,ll qr){\n    if (l>qr||r<ql) return 0;\n    if (l>=ql&&r<=qr) return st[root];\n    ll mid = (l+r)/2;\n    return query(root*2,l,mid,ql,qr)+query(root*2+1,mid+1,r,ql,qr);\n}\n\nint main(){\n    ios::sync_with_stdio(false);\n    n = read();\n    for (int i=n-1;i>=0;i--) a[i] = read();\n    fact[0] = 1;\n    for (int i=1;i<=n;i++) fact[i] = (fact[i-1]*i)%MOD;\n    build(1,1,n);\n    for (int i=n-1;i>=0;i--){\n        update(1,1,n,a[i]);\n        ans = (ans+(query(1,1,n,1,a[i]-1)*fact[i])%MOD)%MOD;\n    }\n    printf(\"%lld\\n\",ans+1);\n    return 0;\n}\n```",
        "postTime": 1557793639,
        "uid": 31712,
        "name": "zrzluck99",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5c31\u4e24\u4e2a\u8981\u6ce8\u610f\u7684\u70b9\uff1a\n\n1.\u662f\u7528\u5eb7\u6258\u5c55\u5f00\n\n2.\u662f\u8981\u53d6\u6a21\u4e14\u53d6\u6a21\u7684\u65f6\u5019\u6ce8\u610f\u6cd5\u5219\n\n# 1\uff1a\u5eb7\u6258\u5c55\u5f00\n\u5eb7\u6258\u5c55\u5f00\u94fe\u63a5\uff1a[\u5eb7\u6258\u5c55\u5f00](https://baike.baidu.com/item/%E5%BA%B7%E6%89%98%E5%B1%95%E5%BC%80/7968428?fr=aladdin)\n\n\u7528\u7b2c\u4e00\u4e2a\u6837\u4f8b\u505a\u89e3\u91ca\uff1a\n\u5b50\u4e32\u201c213\u201d\n\n\u5148\u770b\u7b2c\u4e00\u4f4d\uff1a2.\u5728\u540e\u9762\u4e24\u4f4d\u4e2d\u6bd42\u5c0f\u7684\u53ea\u6709\u4e00\u4f4d\u6240\u4ee5sum[1]=1\uff1b\n\n\u518d\u770b\u7b2c\u4e8c\u4f4d\uff1a1.\u5728\u540e\u9762\u4e00\u4f4d\u4e2d\u6bd41\u5c0f\u7684\u4e3a\u96f6\u4f4d\u6240\u4ee5sum[2]=0;\n\n\u518d\u770b\u7b2c\u4e09\u4f4d\uff1a3.\u663e\u7136\u56e0\u4e3a\u540e\u9762\u5df2\u7ecf\u6ca1\u6709\u4f4d\u6570\u4e86\u6240\u4ee5sum[3]=0;\n\n\u6700\u540e\u5c31\u662f\u6c42\u5eb7\u6258\u5c55\u5f00\u503c\uff1a\u5957\u516c\u5f0f\uff1a\n\n$\\color{red}\\text{cantor=sum[1]*(3-1)!+sum[2]*(2-1)!+sum[3]*(1-1)!=2}$\n\n$\\color{blue}\\text{\uff080\uff01=1\uff09}$\n\n# 2\uff1a\u53d6\u6a21\u8fd0\u7b97\n\n### \u8fd8\u6709\u8981\u6ce8\u610f\u7684\u53d6\u6a21\u8fd0\u7b97\u5c31\u5728\u4ee3\u7801\u91cc\u770b\u5427\n\n```c\n#include<bits/stdc++.h>\nusing namespace std;\nint fac[1000001];\nlong long int p = 998244353;\nint FAC(int n)////\u9636\u4e58\n{\n\tfac[0] = 0;\n\tfac[1] = 1;\n\tfor(int i = 2;i <= n;i++)\n\tfac[i] = (fac[i-1] % p * i % p) % p;\n     //////(x * y) % p = (x % p * y % p) % p\n}\nint main()\n{\n\tint n , a[1000001];\n\tcin >> n;\n\tfor(int i = 0;i < n;i++)\n\tcin >> a[i];\n\tFAC(n);\n\tint can = 0;\n\tfor(int i = 0;i < n;i++)\n\t{\n\t\tint sum = 0;\n\t\tfor(int j = i + 1;j < n;j++)\n\t\t    if(a[i] > a[j])sum++;\n\t\tcan = (can % p + (sum % p * fac[n-i-1]) % p) % p;\n        /////(x + y) % p = (x % p + y % p) % p;\n        ////\u5373\u4f7f\u4e0a\u9762\u7b97\u9636\u4e58\u7684\u65f6\u5019\u5df2\u7ecf\u53d6\u8fc7\u6a21\u4e86\uff0c\u4f46\u662f\u505a\u52a0\u6cd5\u7684\u65f6\u5019\u8fd8\u8981\u518d\u6a21\n\t\t}////\u5eb7\u6258\u5c55\u5f00\uff1b\n\tcout<<can + 1;/////\u522b\u5fd8\u4e86\u52a01\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u5eb7\u6258\u4ece0\u5f00\u59cb\uff0c\u4f46\u9898\u610f\u662f\u4ece1\u5f00\u59cb\u6392\u5e8f\u7684\n\treturn 0;\n}\n```\n",
        "postTime": 1563440172,
        "uid": 139457,
        "name": "Forgetember",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u633a\u6c34\u7684\u9898\n\n~~\u867d\u7136\u6211\u505a\u4e86\u4e03\u6b21~~\n\n\u597d\u4e86\u597d\u4e86\uff0c\u4e0d\u5e9f\u8bdd\u4e86\u3002\n\n\u5bf9\u4e8e\u5eb7\u6258\u5c55\u5f00\uff0c\u5148\u8d34\u516c\u5f0f\uff0c\u65b9\u4fbf\u5bf9\u540e\u9762\u7684\u4ee3\u7801\u8fdb\u884c\u7406\u89e3\uff1a\n ![](https://img-blog.csdnimg.cn/20190219113343503.png)\n \n \u5c31\u662f$\\huge{a}\\small{i}$\u5728n\u4e2a\u6570\u91cc\u7b2c\u51e0\u5927\u53bb\u4e58\uff08n-i\uff09\u7684\u9636\u4e58\uff0c\u7136\u540e\u4e00\u76f4\u52a0\u5230$\\huge{a}\\small{n}$\u3002\n\u5728\u6574\u4e2a\u7a0b\u5e8f\u91cc\uff0c\u6700\u96be\u7684\u662f\u5982\u4f55\u65b9\u4fbf\u3001\u5feb\u901f\u7684\u6c42\u51fa$\\huge{a}\\small{i}$\u5728n\u4e2a\u6570\u91cc\u662f\u7b2c\u51e0\u5927\u3002\n\n\u9996\u5148\uff0c\u66b4\u529b\u80af\u5b9a\u884c\u4e0d\u901a\uff0c\u80af\u5b9a\u4f1a _**TLE**_ \uff0c\u56e0\u6b64\uff0c\u53ef\u4ee5\u5728\u5eb7\u6258\u5c55\u5f00\u7684\u9636\u4e58\u9884\u5904\u7406\u65f6\u540c\u65f6\u4e0e\u5904\u7406\u597d\uff0c\u4ed6\u662f\u7b2c\u51e0\u5927\u7684\u3002\n\n\u63a5\u7740\uff0c\u8fd8\u6709\u4e00\u4e2a\u5f88\u4e25\u91cd\u7684\u95ee\u9898\uff1a\u7528\u666e\u901a\u7684\u6570\u7ec4\u80af\u5b9a\u4f1a\u70b8\uff0c\u56e0\u6b64\u8981\u7528[\u6811\u72b6\u6570\u7ec4](https://www.luogu.com.cn/problem/P3374)\u3002\n\n\u6211\u89e3\u91ca\u7684\u5dee\u4e0d\u591a\u4e86\uff0c\u5269\u4e0b\u7684\u4e00\u4e9b\u5c0f\u7ec6\u8282\u4f1a\u5728\u4ee3\u7801\u91cc\u6ce8\u91ca\u51fa\u6765\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nlong long C[1000005],fact[1000005],n;\nlong long lowbit(long long x)\n{\n    return x&(-x);\n}\nvoid add(long long x,long long y)\n{\n    for(int i=x;i<=n;i+=lowbit(i))\n        C[i]+=y;\n}\nlong long getsum(long long x)\n{\n    int ans=0;\n    for(int i=x;i>0;i-=lowbit(i))\n        ans+=C[i];\n    return ans;\n}\nint main()\n{\n    long long i,can=0;\n    cin>>n;\n    fact[0]=1;\n    for(i=1;i<=n;i++)\n    {\n        fact[i]=fact[i-1]*i%998244353;//\u65b9\u4fbf\u5eb7\u6258\u5c55\u5f00\n        add(i,1);//\u9884\u5904\u7406\uff0c\u5b58\u5165\u6811\u72b6\u6570\u7ec4C[i]\u4e2d\n    }\n\tfor (i=1; i<=n; i++)\n    {\n        int x;\n\t\tscanf(\"%d\",&x);\n\t\tcan=(can+(getsum(x)-1)*fact[n-i])%998244353;//\u65e0\u65f6\u65e0\u523b\u6a21\u5b83\uff0c\u56e0\u4e3a\u968f\u65f6\u5b83\u90fd\u53ef\u80fd\u4f1a\u8d85\u51falong long\u7684\u6570\u636e\u8303\u56f4\n\t\tadd(x,-1);//\u7531\u4e8e\u8fd9\u4e2a\u6570\u7528\u8fc7\u4e86\uff0c\u6240\u4ee5\u8981\u51cf1\n\t}\n    cout<<can+1<<endl;//\u8bb0\u5f97\u52a01\uff0c\u56e0\u4e3a\u7b97\u51fa\u7684\u662f\u8fd9\u4e2a\u5168\u6392\u5217\u524d\u9762\u8fd8\u6709\u51e0\u4e2a\u5168\u6392\u5217\n    return 0;\n}\n```\n\u6e29\u99a8\u63d0\u793a\uff1a\n\n\t\u6ca1\u5b66\u597d\u6811\u72b6\u6570\u7ec4\u7684\u8bdd\uff0c\n    \u4e0d\u63a8\u8350\u6765\u505a\u8fd9\u9898\u3002\n\u53e6\u5916\uff0c\u611f\u8c22@[Randolph\u3001](https://www.luogu.com.cn/user/68706)\u7684\u601d\u8def",
        "postTime": 1604749018,
        "uid": 368380,
        "name": "\u7231\u7476\u7476\u516c\u4e3b",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "## \u7528\u9014\n\u7ed9\u5b9a\u4e00\u4e2a $1$ ~ $n$ \u7684\u6392\u5217\uff0c\u6c42\u8be5\u6392\u5217\u5728 $1$ ~ $n$ \u5168\u90e8\u6392\u5217\u4e2d\u7684\u5b57\u5178\u5e8f\u6392\u540d\n## \u505a\u6cd5\n$$\nans=1+\\sum^n_{i=1}((n-i)!\\times\\sum^n_{j=i}(a[j]<a[i]))\n$$\n\n\u76f4\u63a5\u6c42 $\\sum^n_{j=i}(a[j]<a[i])$ \u663e\u7136\u662f\u8d85\u65f6\n\n\u8003\u8651\u7ebf\u6bb5\u6811 $&$ \u6811\u72b6\u6570\u7ec4\u4f18\u5316\n## \u8bc1\u660e\n\u8003\u8651\u7b2c $i$ \u4e2a\u6570\uff0c\u5176\u540e\u9762\u6709 $n-i$ \u4e2a\u6570\uff0c\u5171\u6709 $(n-i)!$ \u79cd\u5168\u6392\u5217\n\n\u53ef\u4ee5\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a\u6392\u5217\uff0c\u5f80\u540e $(n-i)!$ \u4e2a\u5b57\u5178\u5e8f\u540d\u6b21\uff0c$a[i+1]$ ~ $a[n]$ \u4e2d\u6bd4 $a[i]$ \u5c0f\u7684\u6570\u591a\u4e86\u4e00\u4e2a (\u5373 $\\sum^n_{j=i}(a[j]<a[i])$ \u591a\u4e86 $1$)\n\n\u90a3\u4e48\u5c31\u80fd\u63a8\u51fa\u4ee5\u4e0a\u516c\u5f0f\n\n## \u4ee3\u7801\n``` cpp\n#include <bits/stdc++.h>\n#define int long long\n#define N 1000010\n\nusing namespace std;\n\nint k,ans,a[N],t[N<<2],n,Mod=998244353;\n\ninline int read()\n{\n\tint __=0,___=1;\n\tchar _=getchar();\n\tfor (;_<'0' || _>'9';_=getchar()) if (_=='-') ___=-1;\n\tfor (;_>='0' && _<='9';_=getchar()) __=(__<<1)+(__<<3)+_-'0';\n\treturn __*___;\n}\n\nvoid modify(int l,int r,int i,int x)     \\\\\u7ebf\u6bb5\u6811\u63d2\u5165\u6570\u503c\n{\n\tif (l==r) {t[i]=1;return;}\n\tint mid=(l+r)>>1;\n\tif (x<=mid) modify(l,mid,i<<1,x);\n\telse modify(mid+1,r,i<<1|1,x);\n\tt[i]=t[i<<1]+t[i<<1|1];\n}\n\nint query(int l,int r,int L,int R,int i)   \\\\\u67e5\u8be2\u6bd4\u5f53\u524d\u4f4d\u7f6e\u5c0f\u7684\u6570\u5b57\u4e2a\u6570\n{\n\tif (L<=l && r<=R) return t[i];\n\tint mid=(l+r)>>1,ans=0;\n\tif (L<=mid) ans=query(l,mid,L,R,i<<1);\n\tif (mid<R) (ans+=query(mid+1,r,L,R,i<<1|1))%=Mod;\n\treturn ans;\n}\n\nsigned main()\n{\n\tn=read();\n\tfor (int i=1;i<=n;i++)\n\t\ta[i]=read();\n\tk=1,ans=1;\n\tmodify(1,n,1,a[n]);\n\tfor (int i=n-1;i;i--)\n\t{\n\t\t(ans+=query(1,n,1,a[i],1)*k)%=Mod;\n\t\t(k*=n-i+1)%=Mod;\n\t\tmodify(1,n,1,a[i]);\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1603718245,
        "uid": 67718,
        "name": "G\u6211\u5c31\u662f\u83dcG",
        "ccfLevel": 6,
        "title": "\u3010\u5b66\u4e60\u7b14\u8bb0\u3011\u5eb7\u6258\u5c55\u5f00"
    },
    {
        "content": "\u5eb7\u6258\u5c55\u5f00=\u597d\u4e1c\u897f\u3002\n\n\u8fd9\u4e2a\u4e1c\u897f\u5728\u72b6\u6001\u538b\u7f29\u65b9\u9762\u7528\u7684\u5f88\u591a\uff0c\u628a\u5168\u6392\u5217\u538b\u7f29\u6210\u5927\u5c0f\u53ef\u4ee5\u63a5\u53d7\u7684\u6570\u3002\u5177\u4f53\u7684\u4f7f\u7528\u53ef\u4ee5\u770b\u770b[\u8fd9\u91cc](https://www.cnblogs.com/cjoierljl/p/9147579.html)\u3002\n\n\u9996\u5148\u8bb2\u4e00\u4e0b\u57fa\u7840\u505a\u6cd5\uff1a$O(n^2)$ \u6c42\u89e3\u5eb7\u6258\u5c55\u5f00\u3002\n\n## \u4f8b\u9898\uff1a\u5224\u65ad $2143$ \u662f\u6570\u7801\u96c6\u5408 $\\{1,2,3,4\\}$ \u7684\u5168\u6392\u5217\u4e2d\u7b2c\u51e0\u5927\u7684\u6570\u3002\n\n\u8ba1\u7b97\u6392\u5728 $2143$ \u524d\u9762\u7684\u6392\u5217\u6570\u76ee\uff0c\u53ef\u4ee5\u5c06\u95ee\u9898\u8f6c\u6362\u4e3a\u4ee5\u4e0b\u6392\u5217\u7684\u548c\uff1a\n1. \u9996\u4f4d\u5c0f\u4e8e $2$ \u7684\u6240\u6709\u6392\u5217\u3002\u9996\u4f4d\u5c0f\u4e8e $2$ \u7684\u6570\u53ea\u6709 $1$\uff0c\u540e\u9762\u4e09\u4e2a\u6570\u7684\u6392\u5217\u6709 $A_3^3$\uff0c\u5373 $6$ \u79cd\uff0c\u8bb0\u4f5c $1\\times 3!$\u3002\n2. \u9996\u4f4d\u4e3a $2$\uff0c\u7b2c\u4e8c\u4f4d\u5c0f\u9c7c $1$ \u7684\u6240\u6709\u6392\u5217\u3002\u7136\u800c\uff0c$1$ \u5df2\u7ecf\u662f\u6700\u5c0f\u7684\u6570\u4e86\uff0c\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u6392\u5217\uff0c\u5171 $0$ \u79cd\uff0c\u8bb0\u4f5c $0\\times2!$\uff1b\n3. \u524d\u4e24\u4f4d\u4e3a $21$\uff0c\u7b2c\u4e09\u4f4d\u5c0f\u4e8e $4$ \u7684\u6240\u6709\u6392\u5217\u3002\u7531\u4e8e $1,2$ \u5df2\u7ecf\u7528\u8fc7\u4e86\uff0c\u7b26\u5408\u6761\u4ef6\u7684\u53ea\u6709 $3$\uff0c\u5171 $1$ \u79cd\uff0c\u8bb0\u4f5c $1\\times1!$\uff1b\n4. \u524d $3$ \u4f4d\u4e3a $214$\uff0c\u7b2c\u56db\u4f4d\u5c0f\u4e8e $3$ \u7684\u6240\u6709\u6392\u5217\u3002\u65e0\uff0c\u5171 $0$ \u79cd\uff0c\u8bb0\u4f5c $0\\times0!$\u3002\n\n\u6c42\u548c\u5f97\u5230 $2143$ \u4e4b\u524d\u6709 $7$ \u79cd\u6392\u5217\uff0c\u6240\u4ee5\u5b83\u662f\u7b2c $8$ \u5927\u7684\u3002\n\n\u6839\u636e\u4e0a\u9762\u7684\u4f8b\u5b50\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5eb7\u6258\u5c55\u5f00\u7684\u516c\u5f0f\uff1a\n\n\u628a\u4e00\u4e2a\u96c6\u5408\u4ea7\u751f\u7684\u5168\u6392\u5217\u6309\u5b57\u5178\u5e8f\u6392\u5e8f\uff0c\u7b2c $X$ \u4e2a\u6392\u5217\u7684\u8ba1\u7b97\u516c\u5f0f\u4e3a\uff1a\n$$X=a_n\\times(n-1)!+a_{n-1}*(n-2)!+\\cdots+a_i*(i-1)!+\\cdots+a_2\\times1!+a_1\\times0!$$\n\n\u5176\u4e2d\uff0c$a_i$ \u8868\u793a\u539f\u6570\u7684\u7b2c $i$ \u4f4d\u5728\u5f53\u524d\u672a\u51fa\u73b0\u7684\u5143\u7d20\u4e2d\u6392\u5728\u7b2c\u51e0\u4e2a\uff08\u4ece $0$ \u5f00\u59cb\uff09\uff0c\u5e76\u4e14\u6709 $0\\le a[i]<i\\ \\ (1\\le i\\le n)$\n\nCode\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int mod=998244353;\nint str[1000005],n;\nlong long fac[1000005];\nvoid init() {\n    scanf(\"%d\",&n);\n    fac[0]=fac[1]=1;\n    for(int i=2;i<=n;i++) fac[i]=(fac[i-1]*i)%mod;\n    for(int i=0;i<n;i++) scanf(\"%d\",str+i),str[i]--;\n}\nvoid Cantor() {\n    long long result=0;\n    for(int i=0;i<n;i++) {\n        int counted=0;\n        for(int j=i+1;j<n;j++) \n            if(str[i]>str[j]) ++counted;\n        result=(result+(counted*fac[n-i-1])%mod)%mod;\n    }\n    printf(\"%lld\",(result+1)%mod);\n}\nint main(void) {\n    init();\n    Cantor();\n    return 0;\n}\n```\n\n## \u7136\u800c\uff0c\u8fd9\u4e2a\u590d\u6742\u5ea6\u663e\u7136\u662f\u4e0d\u53ef\u627f\u53d7\u7684\uff01\n$O(n^2)$ \u53ea\u80fd[\u5f97 $50$ \u5206](https://www.luogu.com.cn/record/39778591)\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u91c7\u7528\u6811\u72b6\u6570\u7ec4\u4f18\u5316\u7684\u65b9\u5f0f\uff0c\u5c06 $O(n)$ \u5224\u65ad\u51fa\u73b0\u6392\u540d\u7684\u7b97\u6cd5\u4f18\u5316\u5230 $O(\\log_2n)$\u3002\n\n\u5b8c\u6574\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86\uff0c\u4ec5\u4ec5\u628a\u5904\u7406 `counted` \u7684\u90e8\u5206\u6362\u6210\u6811\u72b6\u6570\u7ec4\u5c31\u597d\u4e86\u3002\n\n## \u5b8c\u7ed3\u6492\u82b1~ \u6c42\u8d5e\u6c42\u4e92\u5173QAQ",
        "postTime": 1602653043,
        "uid": 372299,
        "name": "\u8d85\u7ea7\u739b\u4e3d\u738b\u5b50",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "## \u5e8f\n\n~~\u679c\u51bb\u8981\u4e70\u5565\u53e3\u5473\u7684\uff1f~~\n\n## \u6b63\u6587\n\n**\u5eb7\u6258\u5c55\u5f00** \u6c42\u4e00\u4e2a\u5168\u6392\u5217\u7684 **rank**\uff0c\u662f\u4e00\u79cd\u7279\u6b8a\u7684 hash\n\n\u8003\u8651\u5bf9\u4e8e\u6bcf\u4e00\u4f4d\u8fdb\u884c\u8ba1\u7b97\uff0c\u6bd4\u5982\u8ba1\u7b97 2143 \u7684 rank\n\n1. \u7b2c\u4e00\u4f4d\u662f 2 \u6bd4\u5b83\u5c0f\u7684\u6709 1 \u4e2a \u4e8e\u662f ans += 1 * 3!\n2. \u7b2c\u4e8c\u4f4d\u662f 1 \u6bd4\u5b83\u5c0f\u7684\u662f 0 \u4e2a\uff0c\u4e8e\u662f ans += 0 * 2!\n3. \u7b2c\u4e09\u4f4d\u662f 4 \u6bd4\u4ed6\u5c0f\u7684\u662f 1 \u4e2a\uff0c\u4e8e\u662f ans += 1 *  1!\n4. \u7b2c\u56db\u4f4d\u662f 3 \u6bd4\u5b83\u5c0f\u7684\u6ca1\u6709\u4e8e\u662f ans += 0 * 0!\n\nans = 7\n\n\u4f46\u662f\u6700\u540e\u5e94\u8be5\u52a0\u4e00\uff0c\u56e0\u4e3a\u6700\u5c0f\u7684\u90a3\u4e2a\u7b97\u7684\u662f 0.\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u663e\u800c\u6613\u89c1\u7684\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a $O(n^2)$ \u7684\u505a\u6cd5\uff0c\u4e8e\u662f\uff0c\u5728\u8fd9\u4e2a\u9898\u76ee\u91cc TLE \u4e86\u3002\n\n\u8fd9\u91cc\u6211\u4eec\u4e0d\u59a8\u5047\u5b9a\u5f00\u4e86 O2.\n\n\u90a3\u4e48\uff0c\u4e8b\u5b9e\u4e0a $O(n\\sqrt n)$ \u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\uff0c\u6765\u8bf4\u8bf4\u601d\u8def\u3002\u628a\u6570\u5206\u6210 $\\sqrt n$ \u4e2a\u5757\uff0c\u6211\u4eec\u6bcf\u6b21\u5bf9\u4e8e\u4e00\u4e2a\u5757\u5185\u505a erase \u64cd\u4f5c\uff0c\u5373\u53ef\uff0c\u7136\u540e\u7edf\u8ba1\u53ea\u8981\u679a\u4e3e\u6bcf\u4e2a\u5757\u7684\u5143\u7d20\u4e2a\u6570\u5373\u53ef\uff0c\u5728\u6574\u5757\u91cc\u76f4\u63a5\u5c31\u662f\u5757\u4e2d\u5143\u7d20\u4e2a\u6570\uff0c\u5728\u5206\u51fa\u6765\u7684\u5c31\u662f\u4e00\u4e2a\u4e8c\u5206\u51fa\u4f4d\u7f6e\u5373\u53ef\u3002\n\n```c++\n#include <bits/stdc++.h>\n\n#define gc(  ) std::getchar(  )\n#define pc( i ) std::putchar( i )\n\ntemplate < typename T >\ninline\nT read(  )\n{\n\tregister T x = 0;\n\tregister char ch = gc(  );\n\tregister bool f = 0;\n\twhile( !std::isdigit( ch ) )\n\t{\n\t\tf = ( ch == '-' );\n\t\tch = gc(  );\n\t}\n\twhile( std::isdigit( ch ) )\n\t{\n\t\tx = x * 10 + ( ch - '0' );\n\t\tch = gc(  );\n\t}\n\treturn f ? -x : x;\n}\n\ntemplate < typename T >\nvoid\nput( T x )\n{\n\tif( x < 0 )\n\t{\n\t\tx = -x;\n\t\tpc( '-' );\n\t}\n\tif( x < 10 ) {\n\t\tpc( x + 48 );\n\t\treturn;\n\t}\n\tput < T > ( x / 10 );\n\tpc( x % 10 + 48 );\n\treturn ;\n}\n\n#define Rep( i, j, k ) for( int i = j; i >= k; --i )\n#define rdi(  ) read < int > (  )\n#define rdl(  ) read < long long > (  )\n#define pti( i ) put < int > ( i ), putchar( ' ' )\n#define ptl( i ) put < long long > ( i ), putchar( ' ' )\n#define For( i, j, k ) for( int i = j; i <= k; ++i )\n\nconst int mod = 998244353, Maxn = 1000001;\n\nint a[ Maxn ], n, fac[ Maxn ], bl[ Maxn ], bol;\n\nlong long ans;\n\nstd::vector < int > v[ 10000 ];\n\nvoid\nfakemain(  )\n{\n\tbol = sqrt( n = rdi( ) );\n\tFor( i, 1, n ) v[ bl[ i ] = ( i - 1 ) / bol + 1 ].push_back( i ), a[ i ] = rdi( );\n\tfac[ 0 ] = 1;\n\tFor( i, 1, n - 1 ) fac[ i ] = ( long long ) fac[ i - 1 ] * i % 998244353;\n\tans = 1;\n\tFor( i, 1, n )\n\t{\n\t\tstd::vector < int >::iterator it = std::lower_bound( v[ bl[ a[ i ] ] ].begin( ), v[ bl[ a[ i ] ] ].end( ), a[ i ] );\n\t\tint tmp = 0;\n\t\tFor( j, 1, bl[ a[ i ] ] - 1 ) tmp += v[ j ].size( );\n\t\ttmp += it - v[ bl[ a[ i ] ] ].begin( );\n\t\tans = ( ans + ( long long ) fac[ n - i ] * tmp ) % 998244353;\n\t\tv[ bl[ a[ i ] ] ].erase( it );\n\t}\n\tptl( ans );\n\treturn;\n}\n\n\nint\nmain( int argc, char* argv[] )\n{\n\tfakemain(  );\n\treturn 0;\n}\n```\n\n## \u5d6c\n\n\u4e8c\u6a21\u4e86\uff0c\u614c\u5f97\u4e00\u6279",
        "postTime": 1591871020,
        "uid": 232125,
        "name": "SiRiehn_nx",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5361 python\uff01 \u4e3e\u62a5\u4e86\n\n\u6b64\u9898\u8bb2\u7684\u662f\u5eb7\u62d3\u5c55\u5f00\uff0c\u54b1\u5206\u6790\u4e00\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u524d\u5f80\u540e\u8003\u8651\u70b9\u7684\u6392\u540d\uff08\u56e0\u4e3a\u524d\u9762\u7684\u70b9\u5bf9\u4e8e\u540e\u9762\u7684\u70b9\u662f\u6ca1\u6709\u5f71\u54cd\u7684\uff09\uff0c\u8fd9\u4e2a\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u4e00\u4e0b\u5c31\u884c\uff0c\u7136\u540e\u4e58\u4e58\u9636\u4e58\u518d\u7d2f\u52a0\n\n\n# Proof\n\n\u5bf9\u4e8e\u67d0\u4e2a\u4f4d\u7f6e i \uff0c\u5982\u679c\u5b83\u7684\u503c a[i] \u662f\u540e\u9762\u51e0\u4e2a\u6570\u4e4b\u4e2d\u7b2c k \u5927\u7684\uff0c\u90a3\u4e48\u663e\u7136\u6bd4\u4ed6\u5c0f\u7684 k-1 \u4e2a\u503c\u7684\u6240\u6709\u6392\u5217\u7684\u6392\u540d\u90fd\u6bd4\u5f53\u524d\u5e8f\u5217\u5c0f\uff0c\u7136\u540e\u8fd9\u6837\u7684\u6392\u5217\u6709 $(k-1)*fac[x]$ \u4e2a\uff08x \u4e3a\u5f53\u524d\u70b9\u540e\u9762\u7684\u6570\u5b57\u4e2a\u6570\uff09\uff0c\u7136\u540e\u6211\u4eec\u8003\u8651\u5f53\u524d\u4f4d\u540c\u6837\u662f a[i] \u7684\u5e8f\u5217\u6709\u591a\u5c11\u4e2a\u6bd4\u4ed6\u5c0f\uff0c\u90a3\u4e48\u5176\u5b9e\u6211\u4eec\u56fa\u5b9a\u5f53\u524d\u70b9\u4e3a a[i] \uff0c\u7136\u540e\u5411\u540e\u7528\u540c\u6837\u7684\u65b9\u6cd5\u8ba1\u7b97\u5c31\u597d\u4e86\n\n\n\n\u672c\u89c9\u5f97\u662f\u9053\u6a21\u677f\u9898\u5e94\u8be5\u662f $n^2$ \u53ef\u4ee5\u8fc7\u7684\uff0c\u7136\u540e\u770b\u4e86\u6570\u636e\u8303\u56f4\u5c31\u81ea\u95ed\u4e86\uff0c\u8fd9\u8c8c\u4f3c\u5f97\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\uff1f\u51fa\u9898\u4eba\u8fd8\u662f\u6709\u70b9\u6bd2\u7624\u7684\u5462\uff0c\u5bf9\u54b1\u8fd9\u6837\u7684\u83dc\u9e21\u8fd9\u4e48\u4e0d\u53cb\u597d...\n\n# Code\n\n```\n//by Judge\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#define Rg register\n#define fp(i,a,b) for(Rg int i=(a),I=(b)+1;i<I;++i)\n#define fd(i,a,b) for(Rg int i=(a),I=(b)-1;i>I;--i)\nusing namespace std;\nconst int mod=998244353;\nconst int M=1e6+3;\ntypedef int arr[M];\n#ifndef Judge\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\n#endif\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline int mul(int x,int y){return 1ll*x*y%mod;}\ninline void Pls(int& x,int y){if((x+=y)>=mod)x-=mod;}\ninline int read(){ int x=0,f=1; char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;\n} int n,ans=1; arr fac,a,f;\n#define lowbit(x) (x&-x) \ninline void add(int x,int v){\n\twhile(x<=n) f[x]+=v,x+=lowbit(x);\n}\ninline int ask(int x){ Rg int s=0;\n\twhile(x) s+=f[x],x^=lowbit(x); return s;\n}\nint main(){ n=read(),fac[0]=1;\n\tfp(i,1,n) a[i]=read(),fac[i]=mul(fac[i-1],i),add(i,1);\n\tfp(i,1,n) add(a[i],-1),Pls(ans,mul(ask(a[i]),fac[n-i]));\n\treturn !printf(\"%d\\n\",ans);\n}\n```\n\n\n\n# Code+1\n\n\u7a7a\u95f4\u8f83\u5c0f\u5bfc\u81f4\u4e86 MLE \uff08\u867d\u8bf4\u7a7a\u95f4\u8db3\u591f\u53ef\u80fd\u8fd8\u662f\u4f1aT\u4e0a\u5929\uff09\n\n\n```\nfac=[0 for i in range(1000003)]\nmod=998244353\nn=0;ans=1\na=[0 for i in range(1000003)]\n\nf=[0 for i in range(500005)]\n\ndef lowbit(x):\n    return x&(-x)\n\ndef add(x, k):\n    while x<=n :\n        f[x]+=k\n        x+=lowbit(x)\n\ndef ask(x):\n    Res=0\n    while x>0:\n        Res+=f[x]\n        x-=lowbit(x)\n    return Res\n\n\nif __name__=='__main__':\n    n=int(input())\n    s=input().split()\n    \n    fac[0]=1\n    for i in range(1,n+1):\n        fac[i]=fac[i-1]*i%mod\n        a[i]=int(s[i-1])\n        add(i,1)\n    \n    for i in range(1,n+1):\n#        print(ask(a[i]-1))\n        ans+=(ask(a[i]-1))*fac[n-i]%mod\n        add(a[i],-1)\n\n    print(ans)\n\n```\n\n",
        "postTime": 1571300039,
        "uid": 38576,
        "name": "J\u03bcdge",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    },
    {
        "content": "#### [\u535a\u5ba2](https://www.luogu.org/blog/cmine/)\u5185\u98df\u7528\u66f4\u4f73\n---\n### \u7b97\u6cd5\n\u5eb7\u6258\u5c55\u5f00 ~~(\u8fd9\u4e0d\u6a21\u677f\u9898\u5417)~~ \u6811\u72b6\u6570\u7ec4\n\n### \u77e5\u8bc6\n\n\u5eb7\u6258\u5c55\u5f00\u662f\u4e00\u4e2a\u5168\u6392\u5217\u5230\u4e00\u4e2a\u81ea\u7136\u6570\u7684\u53cc\u5c04\n\n\u5b9e\u8d28\u662f\u8ba1\u7b97\u5f53\u524d\u6392\u5217\u5728\u6240\u6709\u7531\u5c0f\u5230\u5927\u5168\u6392\u5217\u4e2d\u7684\u987a\u5e8f\n\n\u5b83\u7684\u516c\u5f0f\u662f\u8fd9\u6837\u5b50\n\n$X=\\sum_{i=1}^{n}{a_i(i-1)!}$\n\n---\n\n### \u4e00\u4e9b\u4e0d\u662f\u5f88\u4e25\u8c28\u7684\u63a8\u8bba\n\n\u6211\u4eec\u5047\u8bbe\u6709\u4e00\u4e2a\u9012\u589e\u6570\u5217$\\{a_n\\}$\uff0c\u8003\u8651\u5176\u4e2d\u4e00\u79cd\u6392\u5e8f$A$\u7684$Rank$\n\n\u5bf9\u4e8e\u8fd9\u4e2a\u6392\u5e8f\u7b2c\u4e00\u4e2a\u6570$a_{m_1}$,\u663e\u7136\u6709\u4ee5$a_k,k<m_1$\u5f00\u5934\u7684\u6392\u5217\u7684$Rank$\u6bd4\u8be5\u6392\u5e8f\u5c0f\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$k<m_1$\uff0c\u4ee5$a_k$\u5f00\u5934\u7684\u6392\u5217\u5c31\u6709$(m_1-1)\\times(n-1)!$\u79cd\u60c5\u51b5(\u5373\u6240\u505a\u8d21\u732e)\n\n\u6211\u4eec\u8003\u8651\u8be5\u6392\u5217\u6bcf\u4f4d\u4e0a\u6240\u505a\u7684\u8d21\u732e\u4e4b\u548c\u5373\u8be5\u6392\u5217\u7684$Rank$\n\n---\n\u6700\u540e\u518d\u7528\u6811\u72b6\u6570\u7ec4\u6765\u7ef4\u62a4\u6bcf\u4f4d\u4e0a\u6240\u505a\u7684\u8d21\u732e\u5373\u53ef\n\n### code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=(1e6)+5;\nconst int MOD=998244353;\ntypedef long long LL;\nstruct Fenwick\n{\n\t#define lowbit(x) x&(-x)\n\tint A[MAXN],C[MAXN],size;\n\tvoid init(int n)\n\t{\n\t\tsize=n;\n\t}\n\tinline void modify(int l,int r,int val)\n\t{\n\t\tA[l]+=val;\n\t\tfor(;l<=size;C[l]+=val,l+=lowbit(l));\n\t\tA[++r]-=val;\n\t\tfor(;r<=size;C[r]-=val,r+=lowbit(r));\n\t}\n\tinline int query(int pos)\n\t{\n\t\tint ans=0;\n\t\tfor(;pos>=1;ans+=C[pos],pos-=lowbit(pos));\n\t\treturn ans;\n\t}\n\t#undef lowbit\n}tree;\ninline LL read()\n{\n\tLL fh=1,s=0;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9')\n\t{\n\t\tif(ch=='-')\n\t\t\tfh=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\ts=s*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn fh*s;\n}\nLL fact[MAXN];\nint main()\n{\n\tLL n=read(),ans=1;\n\ttree.init(n);\n\tfor(int i=1;i<=n;i++)\n\t\ttree.modify(i,i,i-1);\n\tfact[0]=1;\n\tfor(int i=1;i<=n;i++)\n\t\tfact[i]=(fact[i-1]*i)%MOD;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint x=read();\n\t\tans+=tree.query(x)*fact[n-i];\n\t\tans%=MOD;\n\t\ttree.modify(x+1,n,-1);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1571131331,
        "uid": 91013,
        "name": "hgoicjl",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5367 \u3010\u3010\u6a21\u677f\u3011\u5eb7\u6258\u5c55\u5f00\u3011"
    }
]
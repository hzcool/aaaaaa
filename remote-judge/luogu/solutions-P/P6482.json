[
    {
        "content": "\u5efa\u8bae\u6b64\u9898\u8bc4\u84dd\u3002\n\n[\u535a\u5ba2\u98df\u7528\u66f4\u4f73](https://www.luogu.com.cn/blog/Sham-Devour/solution-p6482)\n\n[\u524d\u7f6e\u829d\u58eb $1$\uff1a\u6700\u5c0f\u8868\u793a\u6cd5](https://oi-wiki.org/string/minimal-string/)\n\n[\u524d\u7f6e\u829d\u58eb $2$\uff1a$\\texttt{set}$](https://oi-wiki.org/lang/csl/associative-container/)\n\n[\u524d\u7f6e\u829d\u58eb $3$\uff1a$\\texttt{dfs}$](https://oi-wiki.org/search/dfs/)\n\n$\\texttt{update: 2020/12/31 \u589e\u52a0\u4e86\u5173\u4e8e\u5012\u63a8\u65f6\u7684\u8bf4\u660e}$\n\n# $\\texttt{Step 0 \u9898\u610f}$\n\n- \u7ed9\u51fa\u4e00\u4e2a\u7531 $\\texttt{\"B\"}$ \u548c $\\texttt{\"W\"}$ \u6784\u6210\u7684\u521d\u59cb\u5b57\u7b26\u73af\u3002\n\n- \u7ed9\u51fa\u64cd\u4f5c\u6b21\u6570 $k$\u3002\n\n- \u5bf9\u4e8e\u6bcf\u6b21\u64cd\u4f5c\uff1a\n\n\t- \u5982\u679c\u76f8\u90bb\u7684\u5b57\u7b26\u76f8\u540c\uff0c\u5219\u5728\u5b83\u4eec\u4e4b\u95f4\u63d2\u5165\u4e00\u4e2a $\\texttt{\"B\"}$\u3002\n    \n   - \u5982\u679c\u76f8\u90bb\u7684\u5b57\u7b26\u4e0d\u540c\uff0c\u5219\u5728\u5b83\u4eec\u4e4b\u95f4\u63d2\u5165\u4e00\u4e2a $\\texttt{\"W\"}$\u3002\n\n- \u6c42\u6709\u591a\u5c11\u79cd\u521d\u59cb\u5b57\u7b26\u73af\u901a\u8fc7 $k$ \u6b21\u64cd\u4f5c\u80fd\u5f97\u5230\u76ee\u6807\u5b57\u7b26\u73af\u3002\n\n# $\\texttt{Step 1 \u6b63\u89e3}$\n\n- \u901a\u8fc7\u521d\u59cb\u5b57\u7b26\u73af\u53ef\u4ee5\u6a21\u62df\u51fa\u76ee\u6807\u5b57\u7b26\u73af\u3002\n\n- \u901a\u8fc7\u76ee\u6807\u5b57\u7b26\u73af\u53ef\u4ee5\u901a\u8fc7 $\\texttt{dfs}$ \u5012\u63a8 $k$ \u6b65\u3002\n\n- \u5bf9\u4e8e\u6bcf\u6b21\u5012\u63a8 $1$ \u6b65\uff1a\n\n\t- \u8ba8\u8bba $2$ \u79cd\u60c5\u51b5\uff0c\u5206\u522b\u662f\u7b2c\u4e00\u4f4d\u4e3a $\\texttt{\"B\"}$ \u548c\u7b2c\u4e00\u4f4d\u4e3a $\\texttt{\"W\"}$ \u7684\u60c5\u51b5\u3002\n\n\t- \u82e5\u7b2c\u4e00\u4f4d\u4e3a $\\texttt{\"B\"}$\uff0c\u5bf9\u4e8e\u4e0a\u4e00\u6b65\u5b57\u7b26\u73af\u7684\u7b2c $i$ \u4f4d\u6765\u8bf4\uff1a\n\n\t\t- \u82e5\u4e0a\u4e00\u6b65\u5b57\u7b26\u73af\u7684\u7b2c $i$ \u4f4d\u4e3a $\\texttt{\"B\"}$\uff0c\u5219\u5f53\u524d\u5b57\u7b26\u73af\u7684\u7b2c $i+1$ \u4f4d\u4e3a\u5f53\u524d\u5b57\u7b26\u73af\u7684\u7b2c $i$ \u4f4d\u3002\n\n\t\t- \u82e5\u4e0a\u4e00\u6b65\u5b57\u7b26\u73af\u7684\u7b2c $i$ \u4f4d\u4e3a $\\texttt{\"W\"}$\uff0c\u5219\u5f53\u524d\u5b57\u7b26\u73af\u7684\u7b2c $i+1$ \u4f4d\u4e3a\u5f53\u524d\u5b57\u7b26\u73af\u7684\u7b2c $i$ \u4f4d\u53d6\u53cd\u3002\n        \n\t\t- \u6700\u540e\u5224\u65ad\u4e00\u4e0b\u6784\u9020\u51fa\u7684\u5b57\u7b26\u73af\u7b2c $1$ \u4f4d\u4e0e\u7b2c $n$ \u4f4d\u7684\u76f8\u7b49\u60c5\u51b5\uff0c\u662f\u5426\u7b26\u5408\u4e0a\u4e00\u6b65\u5b57\u7b26\u73af\u7b2c $n$ \u4f4d\u7684\u5b57\u7b26\u3002\n\n\t- \u82e5\u7b2c\u4e00\u4f4d\u4e3a $\\texttt{\"W\"}$\uff0c\u6784\u9020\u65b9\u6cd5\u540c\u4e0a\u3002\n\n- \u628a\u6bcf\u4e2a\u5012\u63a8\u51fa\u7684\u5b57\u7b26\u73af\u90fd\u6c42\u51fa\u6700\u5c0f\u8868\u793a\u6cd5\u7684\u5b57\u7b26\u4e32\uff0c\u8fd9\u6837\u53ef\u4ee5\u770b\u51fa\u662f\u5426\u73af\u540c\u6784\u3002\n\n- \u628a\u63a8\u5230 $k$ \u6b65\u65f6\u7684 $2^k$ \u4e2a\u5b57\u7b26\u73af\u7684\u6700\u5c0f\u8868\u793a\u6cd5\u7684\u5b57\u7b26\u4e32\u6254\u8fdb\u4e00\u4e2a $\\texttt{set}$ \u4e2d\u53bb\u91cd\u3002\n\n- \u8fd9\u4e2a $\\texttt{set}$ \u7684 $\\texttt{size}$ \u5373\u4e3a\u7b54\u6848\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\mathcal{O}(2^kn^2k)$\n\n# $\\texttt{Step 2 \u4ee3\u7801}$\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <set>\n\nusing namespace std;\n\nstring Min (string x, string y) {return x < y ? x : y;}\n\nint n, k;\nstring s, target;\n\nset<string> S;\n\nstring get (string s) {\n\tstring ret;\n\tret = s;\n\tfor (int i = 1; i < n; i++) {\n\t\tstring tot = ret;\n\t\tint cnt = 0;\n\t\tfor (int j = i; j < n; j++)\n\t\t\ttot[cnt++] = s[j];\n\t\tfor (int j = 0; j < i; j++)\n\t\t\ttot[cnt++] = s[j];\n\t\tret = Min(ret, tot);\n\t}\n//\tcout << s << \" \" << ret << endl;\n//\tcout << s << endl;\n//\tcout << ret << endl;\n\treturn ret;\n}\n\nchar change (char c) {return c == 'B' ? 'W' : 'B';}\n\nvoid dfs (int x, string tot) {\n\tif (x == k) {\n\t\tS.insert(get(tot));\n\t\treturn;\n\t}\n\tstring t = tot;\n\ttot[0] = 'B';\n\tfor (int i = 1; i < n; i++) {\n\t\tif (t[i - 1] == 'B')\n\t\t\ttot[i] = tot[i - 1];\n\t\telse\n\t\t\ttot[i] = change(tot[i - 1]);\n\t}\n\tif ((tot[n - 1] == tot[0] && t[n - 1] == 'B') || (tot[n - 1] != tot[0] && t[n - 1] == 'W'))\n\t\tdfs(x + 1, tot);\n\ttot[0] = 'W';\n\tfor (int i = 1; i < n; i++) {\n\t\tif (t[i - 1] == 'B')\n\t\t\ttot[i] = tot[i - 1];\n\t\telse\n\t\t\ttot[i] = change(tot[i - 1]);\n\t}\n\tif ((tot[n - 1] == tot[0] && t[n - 1] == 'B') || (tot[n - 1] != tot[0] && t[n - 1] == 'W'))\n\t\tdfs(x + 1, tot);\n}\n\nint main () {\n\tscanf(\"%d %d\", &n, &k);\n\tcin >> s;\n\ttarget = s;\n\tfor (int i = 1; i <= k; i++) {\n\t\tchar t = target[0];\n\t\tfor (int j = 0; j < n - 1; j++) {\n\t\t\tif (target[j] == target[j + 1])\n\t\t\t\ttarget[j] = 'B';\n\t\t\telse\n\t\t\t\ttarget[j] = 'W';\n\t\t}\n\t\tif (target[n - 1] == t)\n\t\t\ttarget[n - 1] = 'B';\n\t\telse\n\t\t\ttarget[n - 1] = 'W';\n\t}\n//\tcout << target;\n\tdfs(0, target);\n\tprintf(\"%d\", S.size());\n\treturn 0;\n}\n```",
        "postTime": 1609390937,
        "uid": 365542,
        "name": "SDqwq",
        "ccfLevel": 7,
        "title": "P6482 [CRCI2006-2007] CIRCLE"
    }
]
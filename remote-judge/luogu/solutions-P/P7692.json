[
    {
        "content": "# \u4e00\u53ea\u849f\u84bb\u7684 POJ2274(\u6d1b\u8c37 p7692)\u9898\u89e3\u62a5\u544a\n[POJ\u9898\u76ee\u94fe\u63a5](http://poj.org/problem?id=2274)\n\n[\u6d1b\u8c37\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P7692)\n## \u9898\u76ee\u63cf\u8ff0\n\u7ed9\u4e00\u5806\u8f66\u8d85\u51fa\u8d77\u70b9\u7684\u8ddd\u79bb x \u548c\u8f66\u901f\u5ea6 v\uff0c\u901f\u5ea6\u4e0d\u53d8\uff0c\u6c42\u51fa\u98de\u884c\u8fc7\u7a0b\u4e2d\u7684\u8d85\u8f66\u603b\u6570\uff08$\\mod 1000000$\uff09\u5e76\u8f93\u51fa\u8d85\u8f66\u4e0e\u88ab\u8d85\u8f66\u7684\u8f66\u7684\u7f16\u53f7\uff08\u5982\u6709\u540c\u65f6\u5219\u7f16\u53f7\u5c0f\u7684\u5148\u8f93\u51fa\uff09\u3002\n### \u8f93\u5165\n\u4e00\u884c\u4e00\u4e2a\u6574\u6570  $n (0 < n <= 250000)$  \u8868\u793a\u8f66\u6570\u3002\n\n\u63a5\u4e0b\u6765 n \u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570  $x (0 <= x <= 1000000)$  \u548c  $v (0 < v < 100)$\uff0c\u8868\u793a\u8f66\u8d85\u51fa\u8d77\u70b9\u7684\u8ddd\u79bb\u548c\u8f66\u901f\u3002\n### \u8f93\u51fa\n\u7b2c\u4e00\u884c\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u8d85\u8f66\u6b21\u6570  $ans \\mod 1000000$  \u7684\u503c\u3002\n\n\u540e\u9762  $\\min(10000,ans)$  \u884c\uff08\u5373\u5982\u679c\u8d85\u8f66\u6b21\u6570\u4e0d\u8db3  $10000$  \u6b21\uff0c\u5219\u5168\u8f93\u51fa\uff0c\u5426\u5219\u8f93\u51fa\u524d  $10000$  \u4e2a\uff09\u6bcf\u884c\u4e24\u4e2a\u6574\u6570 a \u548c b\uff0c\u8868\u793a\u8d85\u8f66\u7684\u8f66\u7684\u7f16\u53f7\u4ee5\u53ca\u88ab\u8d85\u8f66\u7684\u8f66\u7684\u7f16\u53f7\uff08\u5373  a  \u8f66\u8d85\u8fc7\u4e86  b  \u8f66\uff09\u3002\u5982\u679c\u6709\u591a\u4e2a\u8d85\u8f66\u4e8b\u4ef6\u540c\u65f6\u53d1\u751f\uff0c\u5148\u8f93\u51fa\u79bb\u8d77\u8dd1\u7ebf\u8fd1\u7684\u90a3\u4e2a\uff08\u5373\u6392\u540d\u5c0f\u7684\uff09\u3002\n## \u9898\u89e3\n\u7b2c\u4e00\u4e2a\u95ee\u9898\u4e00\u770b\u5c31\u662f\u9006\u5e8f\u5bf9\u95ee\u9898\uff0c\u53ef\u4ee5\u7528\u6811\u72b6\u6570\u7ec4\u6c42\u3002\n\n\u7b2c\u4e8c\u4e2a\u95ee\u9898\u7a0d\u5fae\u9ebb\u70e6\u4e9b\u3002\n\n\u6211\u4eec\u4ee4\u79bb\u8d77\u8dd1\u7ebf\u8fd1\u7684\u6392\u540d\u5c0f\u3002\n\n\u6211\u4eec\u5c06\u6240\u6709\u8f66\u6309\u7167\u5176  x  \u503c\u6392\u5e8f\uff0c\u5982\u56fe\uff1a\n\n![\u8bf7\u6dfb\u52a0\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/3f9dc9693f714c6187b47554ddbb27e2.jpg)\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u53ea\u6709\u6392\u540d\u76f8\u90bb\u7684\u4e24\u8f86\u8f66\u624d\u4f1a\u6700\u5148\u53d1\u751f\u8d85\u8f66\u4e8b\u4ef6\u3002\n\n\u8d85\u8f66\u4e8b\u4ef6\u53d1\u751f\u7684\u6761\u4ef6\u6bd4\u8f83\u5bb9\u6613\u63a8\u51fa\u6765\uff1a\n\n\u8bbe\u88ab\u8d85\u8f66\u7684\u8f66\u7684\u7f16\u53f7\u662f  X  \uff0c\u6392\u540d\u662f  NUMX\u3002\n\n\u90a3\u4e48\u53ea\u8981\u5f53 \u6392\u540d\u4e3a  $\\text{NUMX}-1$  \u7684\u8f66\uff08\u4e0a\u56fe\u4e2d\u9760\u5de6\u7684\u8f66\u8f86\uff09\u7684\u901f\u5ea6 \u5927\u4e8e  X  \u7684\u901f\u5ea6 \u5c31\u4f1a\u53d1\u751f\u8d85\u8f66\u3002\n\n\n![\u8bf7\u6dfb\u52a0\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/3ab57d5b48b145dfa5a0738686fc789e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0R1bWJ5X2NhdA==,size_16,color_FFFFFF,t_70)\n\n\u5982\u4e0a\u56fe\uff0c\u6700\u5148\u53d1\u751f\u8d85\u8f66\u7684\u4e00\u5b9a\u662f  $1$  \u548c  $2$\uff0c $2$  \u548c  $3$\uff0c\u6216  $3$  \u548c  $4$\u3002\n\n\u5047\u8bbe\u6b64\u65f6\u53ea\u6709  $2$  \u548c  $3$  \u53d1\u751f\u8d85\u8f66\u4e8b\u4ef6\uff0c\u8d85\u8f66\u4ea4\u6362\u4f4d\u7f6e\u540e\u6392\u540d\u5982\u4e0b\uff1a\n\n![\u8bf7\u6dfb\u52a0\u56fe\u7247\u63cf\u8ff0](https://img-blog.csdnimg.cn/ec436cd4fce248b5b3003888e39a12ec.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0R1bWJ5X2NhdA==,size_16,color_FFFFFF,t_70)\n\n\u4ea4\u6362\u540e\u53c8\u4ea7\u751f\u4e24\u7ec4\u53ef\u80fd\u53d1\u751f\u8d85\u8f66\uff1a  $1$  \u548c  $3$\u3001 $2$  \u548c  $4$\u3002\u6240\u4ee5\u63a5\u4e0b\u6765\u9700\u8981\u8003\u8651\u8fd9\u4e24\u4e2a\u3002\n\n\u7136\u540e\u6211\u4eec\u60f3\uff1a\u9700\u8981\u627e\u6700\u5148\u8d85\u8f66\u7684\uff08\u5373\u8d85\u8f66\u65f6\u95f4\u6700\u5c0f\u7684\uff09\uff0c\u53c8\u8981\u5728\u4e2d\u9014\u52a0\u5165\u64cd\u4f5c\u5bf9\u8c61\uff0c\u53ef\u4ee5\u60f3\u5230\u7528\u5806\u6765\u5b9e\u73b0\u3002\n\n\u5806\uff08\u5c0f\u6839\u5806\uff09\u4e2d\u5b58\u4e00\u4e2a\u4e09\u5143\u7ec4\uff0c\u8868\u793a\u524d\u4e00\u8f86\u8f66\uff08\u8d85\u8f66\u7684\u8f66\uff09\u7684\u7f16\u53f7\uff0c\u540e\u4e00\u8f86\u8f66\uff08\u88ab\u8d85\u8f66\u7684\u8f66\uff09\u7684\u7f16\u53f7 \u4ee5\u53ca \u4e24\u8f66\u53d1\u751f\u8d85\u8f66\u7684\u65f6\u95f4  $\\dfrac{x_{1}-x_{2}}{v_{2}-v_{1}}$\u3002\n\n\u5806\u4e2d\u6392\u5e8f\u7684\u5173\u952e\u5b57\u5c31\u662f\u8d85\u8f66\u65f6\u95f4\u548c\u6392\u540d\uff08\u6ce8\u610f\u65f6\u95f4\u76f8\u540c\u65f6\u8981\u6309\u6392\u540d\u8f93\u51fa\uff09\n\n\u6bcf\u6b21\u53d6\u51fa\u5806\u9876\uff0c\u8f93\u51fa\u3002\n\n\u7136\u540e\u5224\u65ad\u4ea4\u6362\u4f4d\u7f6e\u540e\u65b0\u4ea7\u751f\u7684\u4e24\u7ec4\u662f\u5426\u80fd\u53d1\u751f\u8d85\u8f66\uff0c\u80fd\u5219\u5165\u5806\u3002\n\n\u63a5\u4e0b\u6765\u89c1\u4ee3\u7801\u3002\n## \u55f2\u5417\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#include<queue>\n#include<stack>\n#include<map>\n#define PII pair<int,int>\n#define int long long\nusing namespace std;\nconst int N = 1111500, MOD = 1e6, P = 131;\nint read(){char c=getchar();int s=0,f=1;for(;!isdigit(c);c=getchar())if(c=='-')f=-1;for(;isdigit(c);c=getchar())s=s*10+c-48;return s*f;}\nint n, tr[N], x[N], v[N], num[N], id[N];\n//tr\u6570\u7ec4\u662f\u6811\u72b6\u6570\u7ec4\n//x[i]\u8868\u793a\u6392\u540d\u4e3a i \u7684\u8f66\u79bb\u8d85\u8fc7\u8d77\u70b9\u7684\u8ddd\u79bb\n//v[i]\u8868\u793a\u6392\u540d\u4e3a i \u7684\u8f66\u7684\u901f\u5ea6\n//num[i]\u8868\u793a\u7f16\u53f7\u4e3a i \u7684\u8f66\u7684\u6392\u540d\n//id[i]\u8868\u793a\u6392\u540d\u4e3a i \u7684\u8f66\u7684\u7f16\u53f7\nstruct node \n{//\u5806\u4e2d\u7684\u4e09\u5143\u7ec4\n\tint x, y;\n\tdouble t;\n\tbool operator <(const node &b)const {\n\t\treturn t > b.t || (t == b.t && num[x] > num[b.x]);\n\t}//\u91cd\u8f7d\u8fd0\u7b97\u7b26\uff0c\u8ba9\u5806\u53d8\u6210\u5c0f\u6839\u5806\uff08\u6309\u7167\u65f6\u95f4\u548c\u6392\u540d\u6392\u5e8f\uff09\n};\n\npriority_queue<node> q;\n\n//\u63a5\u4e0b\u6765\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\u64cd\u4f5c\nvoid add(int x) \n{//\u6dfb\u52a0\n\tfor (; x <= 100; x += x & -x)tr[x]++;\n}\nint ask(int x) \n{//\u67e5\u8be2\n\tint ans = 0;\n\tfor (; x; x -= x & -x)ans = (ans + tr[x]) % MOD;//\u8bb0\u5f97\u53d6\u6a21\n\treturn ans;\n}\n\nsigned main() \n{\n\t\n\tn = read();\n\tint ans = 0;\n\t//ans\u7528\u6765\u8bb0\u8d85\u8f66\u6b21\u6570\n\tfor (int i = 1; i <= n; i++) \n\t{\n\t\tx[i] = read(), v[i] = read();\n\t\t\n\t\tnum[i] = id[i] = i;\n\t\t//\u521d\u59cb\u5316\n\t\tans = (ans + ask(100) - ask(v[i])) % MOD;\n\t\tadd(v[i]);\n\t\t//\u6811\u72b6\u6570\u7ec4\u64cd\u4f5c\n\t\tif (i ^ 1 && v[i - 1] > v[i])\n\t\t//\u5982\u679c i!=1 \u5e76\u4e14\u6392\u540d\u6bd4\u4ed6\u5c0f\u4e00\u7684\u8f66\u901f\u5ea6\u6bd4\u4ed6\u5feb\n\t\t\tq.push((node) { \n\t\t\t\ti - 1, //\u524d\u4e00\u8f86\u8f66\n\t\t\t\ti, //\u540e\u4e00\u8f86\u8f66\n\t\t\t\t(double)(x[i] - x[i - 1]) / (v[i - 1] - v[i]) //\u8d85\u8f66\u65f6\u95f4\n\t\t\t});\n\t}\n\t\n\tprintf(\"%lld \\n\", ans);\n\t\n\tint t = 1; //t\u7528\u6765\u8bb0\u5f55\u4e2a\u6570\uff0c\u4fdd\u8bc1\u8f93\u51fa\u4e0d\u8d85\u8fc710000\u4e2a\n\twhile (t <= 10000 && q.size()) \n\t{\n\t\tint X = q.top().x, Y = q.top().y;\n\t\tq.pop();\n\t\t//X\u662f\u524d\u4e00\u8f86\u8f66\u7684\u7f16\u53f7\uff0cY\u662f\u540e\u4e00\u8f86\u8f66\u7684\u7f16\u53f7\n\t\t\n\t\tif (num[X] + 1 != num[Y])continue;\n\t\t//\u5982\u679c\u4e24\u8f86\u8f66\u7684\u6392\u540d\u4e0d\u76f8\u90bb\uff08\u4e0d\u662f\u6700\u5148\u53d1\u751f\u8d85\u8f66\uff09\u5219\u8df3\u8fc7\u3002\n\t\t\n\t\tprintf(\"%lld %lld\\n\", X, Y); \n\t\tt++;\n\t\t\n\t\tswap(id[num[X]], id[num[Y]]);\n\t\tswap(v[num[X]], v[num[Y]]);\n\t\tswap(x[num[X]], x[num[Y]]);\n\t\tswap(num[X], num[Y]);\n\t\t//\u4ea4\u6362 X \u8f66\u4e0e Y \u8f66\u7684\u4f4d\u7f6e\n\t\t//\u4ea4\u6362\u540e X \u8f66\u5728\u524d\uff0cY \u8f66\u5728\u540e\uff08\u539f\u672c Y \u524d X \u540e\uff09\n\t\tif (num[X] < n && v[num[X]] > v[num[X] + 1] &&\n\t\t        num[id[num[X]]] + 1 == num[id[num[X] + 1]])\n\t\t        //\u5982\u679c\u4ea4\u6362\u540e X \u7684\u6392\u540d\u4e0d\u662f n \uff08X \u524d\u8fd8\u6709\u8f66\uff09\n\t\t        //\u5e76\u4e14 X \u8f66\u901f\u5927\u4e8e X \u524d\u9762\u90a3\u8f86\n\t\t        //\u5e76\u4e14\u4e24\u8f86\u8f66\u7684\u6392\u540d\u76f8\u90bb\n\t\t\tq.push((node) {\n\t\t\t\tid[num[X]], //\u524d\u4e00\u8f86\u8f66\u7f16\u53f7\n\t\t\t\tid[num[X] + 1], //\u540e\u4e00\u8f86\u8f66\u7f16\u53f7\n\t\t\t\t(double)(x[num[X] + 1] - x[num[X]]) / (v[num[X]] - v[num[X] + 1])\n\t\t\t});\n\n\n\n\t\tif (num[Y] > 1 && v[num[Y] - 1] > v[num[Y]] &&\n\t\t        num[id[num[Y] - 1]] + 1 == num[id[num[Y]]])\n\t\t        //\u540c\u4e0a\n\t\t\tq.push((node) {\n\t\t\t\tid[num[Y] - 1], \n\t\t\t\tid[num[Y]], \n\t\t\t\t(double)(x[num[Y]] - x[num[Y] - 1]) / (v[num[Y] - 1] - v[num[Y]]) \n\t\t\t});\n\t}\n\treturn 0; \n}\n```\n\n\u6709\u9519\u8bef\u8bf7 D \u6211",
        "postTime": 1628743109,
        "uid": 478449,
        "name": "Dumby_cat",
        "ccfLevel": 0,
        "title": "POJ2274(\u6d1b\u8c37 p7692)\u9898\u89e3\u62a5\u544a"
    },
    {
        "content": "\u9898\u610f\u4e0d\u591a\u8d58\u8ff0\u3002\r\n\r\n\u6c42\u8d85\u8f66\u6b21\u6570\uff0c\u53ef\u4ee5\u53d1\u73b0\u80fd\u5c06\u95ee\u9898\u8f6c\u6362\u4e3a\u4e00\u4e2a\u9006\u5e8f\u5bf9\u95ee\u9898\u3002\r\n\r\n\u7531\u4e8e\u901f\u5ea6\u7684\u8303\u56f4\u53ea\u6709 $1\\sim 99$ \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5f00\u4e2a\u6876\u50a8\u5b58 $1\\sim i-1$ \u7684\u901f\u5ea6\uff0c\u7136\u540e\u76f4\u63a5\u66b4\u529b\u7edf\u8ba1\u524d\u9762\u7684\u901f\u5ea6\u5927\u4e8e\u5f53\u524d\u7684\u901f\u5ea6\u7684\u4e2a\u6570\u7d2f\u52a0\u5c31\u884c\u3002\r\n\r\n\u7136\u540e\u5c31\u662f\u8d85\u8f66\u95ee\u9898\u3002\r\n\r\n\u6211\u4eec\u9996\u5148\u5c06\u8f66\u6309\u4f4d\u7f6e\u6392\u5e8f\uff0c\u53ef\u4ee5\u53d1\u73b0\u6240\u6709\u8f66\u90fd\u65e0\u6cd5\u8d8a\u4f4d\u8d85\u8f66\uff0c\u5373\u7b2c $i$ \u8f86\u8f66\u4e0d\u53ef\u80fd\u5728\uff1a\r\n\r\n\u7b2c $i$ \u8f86\u8f66\u4e0d\u8d85\u8fc7\u7b2c $i+1$ \u8f86\u8f66\u4e14\u7b2c $i+1$ \u8f86\u8f66\u4e0d\u8d85\u8fc7\u7b2c $i+2$ \u8f86\u8f66\u7684\u60c5\u51b5\u4e0b\u8d85\u8fc7\u7b2c $i+2$ \u8f86\u8f66\u3002\r\n\r\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u5f53\u524d\u65f6\u95f4\u540e\u7684\u7b2c\u4e8c\u6b21\u8d85\u8f66\u4e00\u5b9a\u662f\u76f8\u90bb\u4e24\u8f86\u8f66\u4e4b\u95f4\u53d1\u751f\u7684\u3002\r\n\r\n\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u5f00\u4e2a\u7ed3\u6784\u4f53\u5806\u7ef4\u62a4\u76f8\u90bb\u4e24\u8f86\u8f66\u4e4b\u95f4\u7684\u8d85\u8f66\u6240\u7528\u76f8\u5bf9\u65f6\u95f4\u3002\r\n\r\n\u4f18\u5148\u6bd4\u8f83\u65f6\u95f4\u5c31\u884c\u3002\r\n\r\n\u5269\u4e0b\u7684\u4f3c\u4e4e\u5c31\u662f\u6a21\u62df\u4e86\u3002\r\n\r\n\u56e0\u4e3a\u62c5\u5fc3\u51fa\u73b0\u7cbe\u5ea6\u95ee\u9898\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f4\u63a5\u7528 `double` \u7c7b\u578b\u50a8\u5b58\u65f6\u95f4\u3002\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\n#define int long long\r\nusing namespace std;\r\nconst int N = 250010;\r\nint n, x[N],v[N];\r\nint f[N],id[N];\r\n//\u6392\u540d\uff0c\u7f16\u53f7\r\nstruct fyn1 {\r\n\tint x, y;\r\n\tdouble t;\r\n\tinline bool operator <(const fyn1 &fyn)const {\r\n\t\treturn t!=fyn.t? t > fyn.t: f[x] > f[fyn.x];\r\n\t}\r\n};\r\n\r\npriority_queue<fyn1> q;\r\nint fyn[110];\r\n\r\nsigned main() {\r\n\r\n\tcin>>n;\r\n\tint ans = 0;\r\n\tfor (int i = 1; i <= n; ++i) {\r\n\t\tcin>>x[i]>>v[i];\r\n\t\tf[i] = id[i] = i;\r\n\t\tfor(int j=v[i]+1; j<=99; ++j) {\r\n\t\t\tans+=fyn[j];\r\n\t\t\tans%=1000000;\r\n\t\t}\r\n\t\t++fyn[v[i]];\r\n\t\tif(i^1 && v[i - 1] > v[i])\r\n\t\t\tq.push((fyn1) {\r\n\t\t\ti-1,i,1.0*(x[i] - x[i - 1]) / (v[i - 1] - v[i])\r\n\t\t});//\u5c06\u76f8\u90bb\u8d85\u8f66\u65f6\u95f4\u5168\u90e8\u8bb0\u5f55\u4e0b\u6765\r\n\r\n\t}\r\n\r\n\tcout<<ans<<endl;//\u8d85\u8f66\u6b21\u6570\r\n\r\n\tint cnt = 1;\r\n\twhile (cnt <= 10000 && q.size()) {//\u63a7\u5236\u6b21\u6570\r\n\t\tint nx=q.top().x,ny=q.top().y;\r\n\t\tq.pop();\r\n\t\tif(f[nx]+1!=f[ny])continue;\r\n\t\telse\r\n\t\t\t++cnt;\r\n\t\tcout<<nx<<' '<<ny<<endl;\r\n\r\n\t\tswap(id[f[nx]], id[f[ny]]);\r\n\t\tswap(v[f[nx]], v[f[ny]]);\r\n\t\tswap(x[f[nx]], x[f[ny]]);\r\n\t\tswap(f[nx], f[ny]);//\u4ea4\u6362\u4f4d\u7f6e\r\n\r\n\t\tif (f[nx]<n && v[f[nx]]>v[f[nx]+1]&&f[id[f[nx]]] + 1 == f[id[f[nx] + 1]])//\u82e5\u80fd\u8d85\u8f66\u4e14\u76f8\u90bb\r\n\t\t\tq.push((fyn1) {\r\n\t\t\tid[f[nx]],id[f[nx]+1],1.0*(x[f[nx] + 1] - x[f[nx]]) / (v[f[nx]] - v[f[nx] + 1])\r\n\t\t});\r\n\r\n\t\tif (f[ny] > 1 && v[f[ny] - 1] > v[f[ny]] && f[id[f[ny] - 1]] + 1 == f[id[f[ny]]])//\u82e5\u80fd\u8d85\u8f66\u4e14\u76f8\u90bb\r\n\t\t\tq.push((fyn1) {\r\n\t\t\tid[f[ny] - 1], id[f[ny]], 1.0*(x[f[ny]] - x[f[ny] - 1]) / (v[f[ny] - 1] - v[f[ny]])\r\n\t\t});\r\n\t}\r\n\treturn(0-0);\r\n}\r\n```\r\n",
        "postTime": 1673531396,
        "uid": 388414,
        "name": "comcopy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3"
    }
]
[
    {
        "content": "\u6211\u8bf4\u6211\u770b\u7740\u6570\u636e\u60f3\u5230\u4e86\u901a\u9879\u516c\u5f0f\u4f60\u4fe1\u5417\u3002\u3002\u3002\n\n\u8fd9\u662f\u771f\u7684\u3002\u3002\n\n\u56e0\u4e3a\u8fd9\u662f\u4e00\u6761\u6bd4\u8d5b\u9898\u3002\u3002\n\n\u5feb\u901f\u5e42\u53d6\u6a21\u8fd0\u7b97\u7684\u6a21\u677f\u9898\n\n~~\u6bd4\u8d5b\u7684\u65f6\u5019\u6ca1\u6709\u60f3\u5230\u7528\u5feb\u901f\u5e42\u53d6\u6a21 \u7136\u540e\u53ea\u670920\u5206 \u624b\u52a8\u6ed1\u7a3d~~\n\n\u6211\u89c9\u5f97\u6211\u8fd9\u5e94\u8be5\u662f\u5168\u7f51\u6700\u77ed\u4ee3\u7801\n\n\u905b\u4e86 \u905b\u4e86 \n\n```cpp\n#include<bits/stdc++.h>\n#define LL long long\n#define Mod 1000000007\nLL Pow(LL a,LL k){\n\tif(k==0)\n\t\treturn 1;\n\tif(k&1)\n\t\treturn Pow(a*a%Mod,k/2)*a%Mod;\n\treturn Pow(a*a%Mod,k/2)%Mod;\n}\nusing namespace std;\nLL n;\nint main (){\n\tscanf(\"%lld\",&n);\n\tprintf(\"%lld\\n\",1ll*(n-2)*Pow(2,n-1)%Mod+1);\n\treturn 0;\n}\n```",
        "postTime": 1540711534,
        "uid": 99460,
        "name": "Hiraeth",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "## $\\text{Update}$(2019.10.05):\n\n1. \u9012\u63a8\u516c\u5f0f\u63a8\u6cd5\u66f4\u8be6\u7ec6\uff1b\n2. \u901a\u9879\u516c\u5f0f\u66f4\u65b0\u8be6\u7ec6\u7248\uff1b\n3. \u5355\u4f4d\u77e9\u9635\u7684\u63a8\u6cd5\u66f4\u52a0\u8be6\u7ec6\u3002\n\n> \u7279\u522b\u9e23\u8c22 @[Smallbasic](https://www.luogu.org/space/show?uid=98096) \u82e3\u4f6c\uff0c\u662f\u4ed6\u6559\u4f1a\u4e86\u6211\u63a8\u9012\u63a8\u516c\u5f0f\u548c\u901a\u9879\u516c\u5f0f\u3002\n\n***\n\n\u5410\u69fd\uff1a\u6765\u81ea\u540c\u673a\u623f\u5de8\u4f6c\u7684\u5632\u8bbd\u2014\u2014~~\u8fd9\u9053\u9898\u8fd9\u4e48\u7b80\u5355\uff0c\u89c2\u5bdf\u6cd5\u663e\u7136\u53ef\u5f97\u901a\u9879\u516c\u5f0f~~\n\n***\n\n## \u9898\u76ee\u5206\u6790\uff1a\n\n1. \u5206\u6790\u9898\u9762\uff0c\u539f\u9898\u610f\u601d\u5982\u4e0b\uff1a\n\n   > \u4ece$n$\u4e2a\u4e92\u4e0d\u76f8\u540c\u7684\u6570\u4e2d\u53d6\u51fa\u67d0\u4e9b\u6570\uff0c\u5c06\u8fd9\u4e9b\u6570\u5206\u6210\u4e24\u4e2a\u96c6\u5408$A,B$\uff0c\u8fd9\u4e24\u4e2a\u96c6\u5408\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a\n   >\n   > - $ A$\u96c6\u5408\u4e2d\u7684\u6700\u5927\u7684\u6570\u5c0f\u4e8e$B$\u96c6\u5408\u4e2d\u6700\u5c0f\u7684\u6570\n   >\n   > - $A,B \\neq  \\emptyset $ \n   >\n   > \u6c42\u5171\u6709\u591a\u5c11\u79cd\u5206\u6cd5(\u7ed3\u679c\u5bf9 $10^9+7$ \u53d6\u6a21)\n   >\n\n2. \u663e\u7136\u53ef\u4ee5\u53d1\u73b0\u8fd9\u9898\u662f\u4e00\u9053\u7ec4\u5408\u6570\u5b66\u7684\u9898\uff0c\u5148\u624b\u7b97 $n \\leq 10$ \u7684\u6570\u636e\uff0c\u5728\u627e\u89c4\u5f8b\u63a8\u51fa\u516c\u5f0f\u3002\u6211\u7ed9\u4e00\u4e0b\u6211\u7684\u601d\u8def\uff1a\n\n   1. \u5f53 $n=2$ \u65f6\uff0c\u7b54\u6848\u663e\u7136\u4e3a1\n\n   2. \u5f53 $n=3$ \u65f6\uff0c\u8bbe\u8fd9\u4e9b\u6570\u4e3a $a_1,a_2,a_3$ ,\u4e0d\u59a8\u8bbe $a_1<a_2<a_3$\n\n      1. \u5f53\u53d63\u4e2a\u6570\u65f6\uff0c\u6709\u4ee5\u4e0b\u5206\u6cd5\uff1a\n\n         $$A=\\{a_1 \\},B=\\{a_2,a_3\\}$$\n\n         $$A=\\{a_1,a_2\\},B=\\{a_3\\}$$\n\n         \u5171 $C^3_3 \\times (3-1)=2$ \u79cd\n\n      2. \u5f53\u53d62\u4e2a\u6570\u65f6\uff0c\u6709\u4ee5\u4e0b\u5206\u6cd5\uff1a\n\n         $$A=\\{a_1\\},B=\\{a_2\\}$$\n\n         $$A=\\{a_1\\},B=\\{a_3\\}$$\n\n         $$A=\\{a_2\\},B=\\{a_3\\}$$\n\n         \u5171 $C_3^2 \\times (2-1)=3$ \u79cd\n\n      \u7efc\u4e0a\uff0c\u5f53 $n=3$ \u65f6\uff0c\u6709 $C^3_3 \\times (3-1)+C_3^2 \\times (2-1)=5$ \u79cd\u5206\u6cd5\u3002\n\n   3. \u5f53 $n=4$ \u65f6\uff0c\u8bbe\u8fd9\u4e9b\u6570\u4e3a $a_1,a_2,a_3,a_4$ ,\u4e0d\u59a8\u8bbe $a_1<a_2<a_3<a_4$\n\n      1. \u5f53\u53d64\u4e2a\u6570\u65f6\uff0c\u6709\u4ee5\u4e0b\u5206\u6cd5\uff1a\n\n         $$A=\\{a_1\\},B=\\{a_2,a_3,a_4\\}$$\n\n         $$A=\\{a_1,a_2\\},B=\\{a_3,a_4\\}$$\n\n         $$A=\\{a_1,a_2,a_3\\},B=\\{a_4\\}$$\n\n         \u5171 $C^4_4 \\times (4-1)=3$ \u79cd\n\n      2. \u5f53\u53d63\u4e2a\u6570\u65f6\uff0c\u6709\u4ee5\u4e0b\u5206\u6cd5\uff1a\n\n         $$A=\\{a_1\\},B=\\{a_2,a_3\\}$$\n\n         $$A=\\{a_1\\},B=\\{a_2,a_4\\}$$\n\n         $$A=\\{a_1\\},B=\\{a_3,a_4\\}$$\n\n         $$A=\\{a_2\\},B=\\{a_3,a_4\\}$$\n\n         $$A=\\{a_1,a_2\\},B=\\{a_3\\}$$\n\n         $$A=\\{a_1,a_2\\},B=\\{a_4\\}$$\n\n         $$A=\\{a_1,a_3\\},B=\\{a_4\\}$$\n\n         $$A=\\{a_2,a_3\\},B=\\{a_4\\}$$\n\n         \u5171 $C^3_4 \\times (3-1)=8$ \u79cd\n\n      3. \u5f53\u53d62\u4e2a\u6570\u65f6\uff0c\u6709\u4ee5\u4e0b\u5206\u6cd5\uff1a\n\n         $$A=\\{a_1\\},B=\\{a_2\\}$$\n\n         $$A=\\{a_1\\},B=\\{a_3\\}$$\n\n         $$A=\\{a_1\\},B=\\{a_4\\}$$\n\n         $$A=\\{a_2\\},B=\\{a_3\\}$$\n\n         $$A=\\{a_2\\},B=\\{a_4\\}$$\n\n         $$A=\\{a_3\\},B=\\{a_4\\}$$\n\n         \u5171 $C^2_4 \\times (2-1)=6$ \u79cd\n\n      \u7efc\u4e0a\uff0c\u5f53 $n=4$ \u65f6\uff0c\u6709 $C^4_4 \\times (4-1)+C^3_4 \\times (3-1)+C^2_4 \\times (2-1)=17$ \u79cd\u5206\u6cd5\u3002\n\n   4. \u901a\u8fc7\u6570\u5b66\u5f52\u7eb3\uff08~~\u627e\u89c4\u5f8b~~\uff09\uff0c\u53ef\u5f97\u516c\u5f0f\uff1a\n\n      $$F(n)=\\sum_{i=1}^{n-1}C^{i+1}_n \\cdot i$$\n\n   \u5177\u4f53\u5b9e\u73b0\u7684\u4ee3\u7801\u5c31\u4e0d\u5199\u4e86\uff0c\u5176\u4ed6dalao\u6709\u5199\u3002\n\n   \u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n^2)$\n\n   \u7a7a\u95f4\u590d\u6742\u5ea6\uff1a$O(n^2)$\n\n   \u9884\u8ba1\u5f97\u5206\uff1a40 points\n\n3. \u8003\u8651\u4f18\u5316\u3002\n\n   \u53d1\u73b0\u516c\u5f0f\u4e2d\u7684\u74f6\u9888\u5728\u4e8e\u5982\u4f55\u5feb\u901f\u5904\u7406\u7ec4\u5408\u6570\uff0c\u4e8e\u662f\u5f00\u59cb\u63a8\u9012\u63a8\u516c\u5f0f\uff1a\n\n   $$F(n+1)-2F(n)$$\n\n   $$ =\\sum_{i=1}^{n}C^{i+1}_{n+1} \\cdot i-(\\sum_{i=1}^{n-1}C^{i+1}_n \\cdot i)\\times 2 $$\n\n   $$=\\sum_{i=1}^{n}C^{i}_{n+1}=2^{n}-1$$\n   \n   \u6545\u5f97\uff1a$F(n+1)=2F(n)+2^n-1$\n   \n   \u4ee3\u7801\u5c31\u4e0d\u5199\u4e86\n   \n   \u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n)$\n   \n   \u7a7a\u95f4\u590d\u6742\u5ea6\uff1a$O(n)$\n   \n   \u9884\u8ba1\u5f97\u5206\uff1a60 points\n   \n4. \u7ee7\u7eed\u8003\u8651\u4f18\u5316\u3002\n\n   \u5df2\u7ecf\u5199\u51fa\u9012\u63a8\u516c\u5f0f\u7684\u8bdd\u6709\u4e24\u79cd\u601d\u8def\uff1a1. \u6570\u5b66\u65b9\u6cd5\u63a8\u901a\u9879\u516c\u5f0f\uff1b2. \u77e9\u9635\u5feb\u901f\u5e42\u52a0\u901f\u9012\u63a8\u516c\u5f0f\u3002\n\n   - \u65b9\u6cd5\u4e00\uff1a\u6570\u5b66\u65b9\u6cd5\u63a8\u901a\u9879\u516c\u5f0f\uff1a\n\n     $$F(n)=\\sum_{i=1}^{n-1}C_n^{i+1}\\cdot i$$\n    $$=\\sum_{i=1}^{n-1}{n!\\over(i+1)!(n-i-1)!}\\cdot i$$\n     $$=\\sum_{i=2}^n{n!\\over i!(n-i)!} \\cdot i+{n!\\over i!(n-i)!}$$\n    $$=\\sum_{i=2}^n{n!\\over(i-1)!(n-i)!}+C_n^i$$\n     $$=\\sum_{i=2}^n{C_n^{i-1}\\over n-i+1}+C_{n}^i$$\n    $$={\\sum_{i=2}^n{C_n^{i-1}}+(n-i+1)(2^n-n-1)\\over n-i+1}$$\n     $$={2^{n-1}-n-2+(n-i+1)(2^n-n-1)\\over n-i+1}$$\n\n     \u5316\u7b80\u5373\u4e3a\uff1a$F(n)=(n-2)\\cdot 2^{n-1}+1$ \n\n     \u8fd9\u91cc $2^{n-1}$ \u7528\u5feb\u901f\u5e42\u5b9e\u73b0\uff08\u6ce8\u610f\uff0c\u4e0d\u80fd\u7528 $<<$ \u6765\u505a\uff0c\u4f1a\u7206 long long\uff09\n\n     \u4ee3\u7801\u89c1code1\n\n     \u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(\\text{log}n)$\n\n     \u7a7a\u95f4\u590d\u6742\u5ea6\uff1a$O(1)$\n\n     \u9884\u8ba1\u5f97\u5206\uff1a100 points\n\n   - \u65b9\u6cd5\u4e8c\uff1a\u77e9\u9635\u5feb\u901f\u5e42\u4f18\u5316\uff1a\n\n     \u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u4e2a\u65b9\u6cd5\u53ef\u80fd\u9c9c\u6709\u4eba\u80fd\u60f3\u5230\uff08~~\u592a\u9ebb\u70e6\u4e86~~\uff09\uff0c\u6211\u5c31\u4ed4\u7ec6\u8bb2\u4e00\u8bb2\u3002\n\n     \u9996\u5148\uff0c\u89c2\u5bdf\u9012\u63a8\u516c\u5f0f\u4e2d\u6709\u5982\u4e0b\u51e0\u4e2a\u5f71\u54cd\u503c\uff1a$F(n-1),2^{n-1},1$ ,\u6545\u4e0e\u5355\u4f4d\u77e9\u9635\u76f8\u4e58\u7684\u77e9\u9635\u4e3a\n\n       $$\\begin{bmatrix} F(n-1)\\\\ 2^{n-1}\\\\ 1\\\\ \\end{bmatrix}$$\n\n     \u5f97\u5230\u7684\u77e9\u9635\u4e3a\n\n       $$\\begin{bmatrix} F(n)\\\\ 2^{n}\\\\ 1\\\\ \\end{bmatrix}$$\n\n     \u6709\u9012\u63a8\u5f0f\u663e\u7136\u53ef\u5f97\uff1a\n\n     $$\\begin{cases}F(n)=F(n-1)\\times 2+2^{n-1}\\times 1+1\\times(-1)\\\\2^n=F(n-1)\\times0+2^{n-1}\\times 2+1\\times 0 \\\\1=F(n-1)\\times 0+2^{n-1}\\times 0+1\\times 1\\end{cases}$$\n\n     \uff08\u4e0d\u4f1a\u77e9\u9635\u52a0\u901f\u7684\u53ef\u4ee5\u505a\u4e00\u505a [P1939 \u3010\u6a21\u677f\u3011\u77e9\u9635\u52a0\u901f\uff08\u6570\u5217\uff09](https://www.luogu.org/problem/P1939)\u548c [P1962 \u6590\u6ce2\u90a3\u5951\u6570\u5217](https://www.luogu.org/problem/P1962)\uff09\n\n     \u63a8\u51fa\u5355\u4f4d\u77e9\u9635\uff1a\n\n       $$\\begin{bmatrix} 2&1&-1\\\\ 0&2&0\\\\ 0&0&1\\\\ \\end{bmatrix}$$\n\n     \u6545\u77e9\u9635\u9012\u63a8\u5f0f\u4e3a\uff1a\n\n     $$\\begin{bmatrix} F(n-1)\\\\ 2^{n-1}\\\\ 1\\\\ \\end{bmatrix} \\times \\begin{bmatrix} 2&1&-1\\\\ 0&2&0\\\\ 0&0&1\\\\ \\end{bmatrix} =\\begin{bmatrix} F(n)\\\\ 2^{n}\\\\ 1\\\\ \\end{bmatrix}$$\n\n     \u5316\u4e3a\u77e9\u9635\u5e42\u5f62\u5f0f\u5f97\uff1a\n   \n     $$\\begin{bmatrix} F(2)\\\\ 2^2\\\\ 1\\\\ \\end{bmatrix} \\times \\begin{bmatrix} 2&1&-1\\\\ 0&2&0\\\\ 0&0&1\\\\ \\end{bmatrix}^{n-2} =\\begin{bmatrix} F(n)\\\\ 2^{n}\\\\ 1\\\\ \\end{bmatrix}$$\n     \n     \u5957\u9b54\u677f\u5373\u53ef\u3002\n     \n     \u4ee3\u7801\u89c1code2\n     \n     \u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(\\text{log}n)$\n   \n\n  \u7a7a\u95f4\u590d\u6742\u5ea6\uff1a$O(1)$\n\n> \u4e24\u79cd\u65b9\u6cd5\u7684\u4f18\u52a3\uff1a\n   >\n   > - \u7b2c\u4e00\u79cd\u65b9\u6cd5\u96be\u7b97\uff0c\u9700\u8981\u8f83\u597d\u7684\u6570\u5b66\u57fa\u7840\uff0c\u4f46\u6700\u540e\u5b9e\u73b0\u65f6\u65f6\u95f4\u590d\u6742\u5ea6\u5728 $O(1)$ \u2014 $O(\\text{log}n)$ ,\u5e38\u6570\u6781\u5c0f\u3002\n   > - \u7b2c\u4e8c\u79cd\u65b9\u6cd5\u662f\u6570\u5217\u52a0\u901f\u7684\u5e38\u7528\u65b9\u6cd5\uff0c\u7b80\u5355\u6613\u60f3\uff0c\u4f46\u5e38\u6570\u8f83\u5927\uff0c\u672c\u9898\u4e3a\u5e38\u6570\u4e3a27\uff0c\u5373\u5728\u5927\u6570\u636e\u4e0b\u6bd4\u7b2c\u4e00\u79cd\u65b9\u6cd5\u61622\u20143\u500d\n\n***\n\n   Code1:\n\n  ```cpp\n   #include<bits/stdc++.h>\n\t//#define file\n\t#define modn (int)(1e9+7)\n\t#define int long long\n\tusing namespace std;\n\tint n;\n\tinline int ksm(int x,int y,int p)\n\t{\n\t\tif(y==0) return 1%p;\n\t\tif(y==1) return x%p;\n\t\tint rst=ksm(x,y/2,p)%p;\n\t\tif(y%2==0)\n\t\t{\n\t\t\treturn rst*rst%p;\n\t\t}else\n\t\t{\n\t\t\tint tmp=rst*rst%p;\n\t\t\treturn tmp*x%p;\n\t\t}\n\t}\n\tsigned main()\n\t{\n\t\t#ifdef file\n\t\tfreopen(\"Agent1.in\",\"r\",stdin);\n\t\tfreopen(\"Agent1.out\",\"w\",stdout);\n\t\t//F(n)=\\sum_{i=1}^{n-1}C^(i+1)_n*i\n\t\t//F(n)=F(n-1)*2+2^{n-1}-1\n\t\t#endif\n\t\tscanf(\"%lld\",&n);\n\t\tint ans=(n-2)*ksm(2,n-1,modn)%modn+1;\n\t\tprintf(\"%lld\\n\",ans);\n\t\treturn 0;\n\t} \n  ```\n\n   [AC,49ms /  800.00KB](https://www.luogu.org/record/24724029)\n\n***\n\n   Code2(\u672c\u4ee3\u7801\u4e3a\u6211\u7684\u6559\u7ec3\u6240\u5199\uff0c\u7801\u98ce\u53ef\u80fd\u6709\u4e9b\u8bb8\u4e0d\u540c):\n\n   ```cpp\n   #include <bits/stdc++.h>\n   using namespace std;\n   #define int long long\n   #define mod 1000000007\n   int jz[3][3] = {{2,1,-1},{0,2,0},{0,0,1}}, \n       jz1[3][3] = {{2,1,-1},{0,2,0},{0,0,1}};\n   int base[3][3];\n   void cheng()\n   {\n       memset(base,0,sizeof(base));\n       for(int i=0;i<3;i++)\n       {\n           for(int j=0;j<3;j++)\n           {\n               for(int k=0;k<3;k++)\n               {\n                   base[i][j] += jz1[i][k]*jz1[k][j];\n                   base[i][j] = (base[i][j]+mod)%mod;\n               }\n           }\n       }\n        memcpy(jz1,base,sizeof(base)); \n   }\n   void chengjz()\n   {\n       memset(base,0,sizeof(base));\n       for(int i=0;i<3;i++)\n       {\n           for(int j=0;j<3;j++)\n           {\n               for(int k=0;k<3;k++)\n               {\n                   base[i][j] += jz1[i][k]*jz[k][j];\n                   base[i][j] = (base[i][j]+mod)%mod;\n               }\n           }\n       }\n       memcpy(jz1,base,sizeof(base)); \n   }\n   void quickpow(int k)\n   {\n       if(k==1) return;\n       quickpow(k/2);\n       cheng();\n       if(k%2!=0) chengjz();\n   }\n   signed main()\n   {\n       int n;\n       cin>>n;\n       if(n==2)\n       {\n           printf(\"1\");\n           return 0;\n       }\n       quickpow(n-2);\n       int ans = (jz1[0][0]+ 4*jz1[0][1]%mod + mod + 1*jz1[0][2]) mod;\n       cout<<ans;\n       return 0;\n   }  \n   ```\n\n   [AC\uff0c48ms /  796.00KB](https://www.luogu.org/record/24727181)\n\n\n\n",
        "postTime": 1570211071,
        "uid": 77131,
        "name": "nth_element",
        "ccfLevel": 5,
        "title": "P4936 \u9898\u89e3"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://xiaohuang888.github.io/2019/08/08/%E3%80%8E%E9%A2%98%E8%A7%A3%E3%80%8F%E6%B4%9B%E8%B0%B7P4936%20Agent1)\n\n### Solution\n\n\u6839\u636e\u9898\u610f\uff0c\u6211\u4eec\u8981\u53d6\u4e24\u7ec4\u6570\uff0c\u4f7f$A$\u7ec4\u7684\u6700\u5927\u503c\u5c0f\u4e8e$B$\u7ec4\u7684\u6700\u5c0f\u503c\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u4e00\u4e2a\u6709\u5e8f\u7684\u6570\u5217\uff08\u4e0d\u59a8\u8bbe\u4e3a$1, 2, 3, \\cdots , n$\uff09\u91cc\uff0c\u6211\u4eec\u53ef\u4ee5\u53d6\u4e00\u4e2a\u6570$p$\uff0c\u8868\u793a\u5206\u754c\u7ebf\uff08\u4e0d\u59a8\u628a\u5b83\u653e\u5728$A$\u7ec4\uff09\uff0c$A$\u7ec4\u7684\u53d6\u6570\u8303\u56f4\u5c31\u662f$p$\u4ee5\u53ca$p$\u5de6\u8fb9\u7684\u6240\u6709\u6570\uff0c$B$\u7ec4\u7684\u53d6\u6570\u8303\u56f4\u5c31\u662f$p$\u53f3\u8fb9\u7684\u6240\u6709\u6570\uff0c\u56e0\u6b64\u5f53$p = i$\u65f6$A$\u7ec4\u53d6\u6570\u7684\u65b9\u6848\u603b\u6570\u5c31\u662f$2 ^ {i - 1}$\uff08\u524d\u9762\u7684\u6bcf\u4e2a\u6570\u8981\u4e48\u53d6\uff0c\u8981\u4e48\u4e0d\u53d6\uff09\uff0c\u800c$B$\u7ec4\u53d6\u6570\u7684\u65b9\u6848\u6570\u5c31\u662f$2 ^ {n - i} - 1$\uff08\u4e3a\u4ec0\u4e48\u8981\u51cf$1$\uff0c\u56e0\u4e3a\u4e0d\u5141\u8bb8$B$\u961f\u6ca1\u6709\u4eba\u53c2\u6218\uff0c\u800c\u6211\u4eec\u628a$p$\u5f52\u5165$A$\u961f\uff0c\u56e0\u6b64$A$\u7ec4\u4e0d\u4f1a\u7a7a\uff09\u3002\u6211\u4eec\u7528\u4ee3\u6570\u7684\u5f62\u5f0f\u8868\u793a\u51fa\u6765\uff1a\n\n$$\\begin{aligned} \\text{\u7b54\u6848} & = \\sum^{n}_{i = 1}{2 ^ {i - 1} \\times (2 ^ {n - i} - 1)} \\\\ & = \\sum^{n}_{i = 1}{2 ^ {n - 1} - 2^{i - 1}} \\\\ & = n \\times 2 ^ {n - 1} - \\sum^{n}_{i = 1}{2 ^ {i - 1}} \\\\ & = n \\times 2 ^ {n - 1} -\\sum^{n - 1}_{i = 0}{2 ^ i} \\\\ & = n \\times 2 ^ {n - 1} - (2 ^ 0 + \\sum^{n - 1}_{i = 1}{2 ^ i}) & = n \\times 2 ^ {n - 1} - (1 + 2 ^ n - 2) \\\\ & = n \\times 2 ^ {n - 1} - 2^ n + 1 \\\\ & = n \\times 2 ^ {n - 1} - 2 \\times 2 ^ {n - 1} + 1 \\\\ & = (n - 2) \\times 2 ^ {n - 1} + 1 \\end{aligned}$$\n\n\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5feb\u901f\u5e42\u76f4\u63a5\u6c42\u51fa\u7b54\u6848\u4e86\u3002\n\n### Code\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n\nusing namespace std;\n\ntypedef long long LL;\nconst int mod = 1000000007;\nLL n;\ninline LL power(LL x, LL p) {//\u5feb\u901f\u5e42\n    LL ret = 1;\n    for (; p; p >>= 1) {\n        if (p & 1) ret = ret * x % mod;\n        x = x * x % mod;\n    }\n    return ret;\n}\nint main() {\n    scanf(\"%lld\", &n);\n    printf(\"%lld\\n\", ((n - 2) % mod * power(2, n - 1) % mod + 1) % mod);//\u516c\u5f0f\n    return 0;\n}\n```",
        "postTime": 1565271600,
        "uid": 19729,
        "name": "xiaohuang",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n> \u4ece $1\\sim n$ \u8fd9 $n$ \u4e2a\u6570\u4e2d\uff0c\u9009\u51fa\u82e5\u5e72\u4e2a\u6570\u5206\u4e3a\u4e24\u4e2a\u975e\u7a7a\u96c6\u5408 $A,B$ \uff0c\u4f7f\u5f97 $\\max\\{A\\}<\\min\\{B\\}$ \u3002\u6c42\u65b9\u6848\u6570\u3002\n\n## \u9898\u89e3\n\n\u7531\u4e8e $A$ \u7684\u6700\u5927\u503c\u4e0d\u8d85\u8fc7 $B$ \u7684\u6700\u5c0f\u503c\uff0c\u56e0\u6b64\u5047\u5982\u6211\u4eec\u628a\u9009\u51fa\u6765\u7684\u6570\u5b57\u6392\u5e8f\uff0c\u90a3\u4e48 $A$ **\u5fc5\u7136**\u662f\u524d\u82e5\u5e72\u4e2a\u6570\uff0c\u800c\u5269\u4f59\u6570\u5b57\u90fd\u5728 $B$ \u4e2d\u3002\u56e0\u6b64\u5047\u8bbe\u9009\u51fa\u4e86 $x$ \u4e2a\u6570\uff0c\u90a3\u4e48\u65b9\u6848\u6570\u5e94\u4e3a $(x-1)$ \uff08\u5373\u679a\u4e3e $A$ \u96c6\u5408\u7684\u5927\u5c0f\uff09\u3002\n\n\u6839\u636e\u7ec4\u5408\u6570\u5b66\uff0c\u4ece $n$ \u4e2a\u6570\u5f53\u4e2d\u9009\u51fa $x$ \u4e2a\u6570\u7684\u65b9\u6848\u6570\u4e3a $\\displaystyle\\binom{n}{x}$ \u3002\n\n\u4e8e\u662f\uff0c\n\n$$\\begin{aligned}\nans &=\\sum_{i=1}^n(i-1)\\binom{n}{i} \\cr\n&=\\sum_{i=1}^n i\\binom{n}{i}-\\sum_{i=1}^n\\binom{n}{i} \\cr\n&=\\sum_{i=0}^n i\\binom{n}{i}-\\sum_{i=0}^n\\binom{n}{i}+1\n\\end{aligned}$$\n\n\u8003\u8651\u4e8c\u9879\u5f0f\u5b9a\u7406\u3002\u6784\u9020\u51fd\u6570 $F(x)$ \uff0c\u4f7f\u5f97\uff1a\n\n$$\\begin{aligned}\nF(x)&=(1+x)^n \\cr\n&=\\sum_{i=0}^n\\binom{n}{i}x^i\n\\end{aligned}$$\n\n\u5bf9\u4e24\u8fb9\u6c42\u5bfc\u3002\u53ef\u4ee5\u53d1\u73b0\uff1a\n\n$$\\begin{aligned}\nF'(x)&=n(1+x)^{n-1} \\cr\n&=\\sum_{i=0}^ni\\binom{n}{i}x^{i-1}\n\\end{aligned}$$\n\n\u4e8e\u662f\u6211\u4eec\u4ee4 $x=1$ \uff0c\u53ef\u4ee5\u53d1\u73b0\uff1a\n\n$$\\begin{aligned}\n&\\sum_{i=0}^n\\binom{n}{i} &=&(1+1)^n &=&2^n \\cr\n&\\sum_{i=0}^n i \\binom{n}{i} &=&n(1+1)^{n-1} &=&n\\cdot 2^{n-1}\n\\end{aligned}$$\n\n\u56e0\u6b64\uff0c\n\n$$\\begin{aligned}\nans &=\\sum_{i=0}^n i\\binom{n}{i}-\\sum_{i=0}^n\\binom{n}{i}+1 \\cr\n&=n\\cdot 2^{n-1}-2^n+1 \\cr\n&=(n-2)\\cdot 2^{n-1}+1\n\\end{aligned}$$\n\n\u6240\u4ee5\u5199\u4e2a\u5feb\u901f\u5e42\uff0c\u8fd9\u9898\u5c31\u505a\u5b8c\u5566\uff01\n\n## \u53c2\u8003\u4ee3\u7801\n\n\n```cpp\n#include<bits/stdc++.h>\n#define up(l,r,i) for(int i=l,END##i=r;i<=END##i;++i)\n#define dn(r,l,i) for(int i=r,END##i=l;i>=END##i;--i)\nusing namespace std;\nconst int MOD =1e9+7;\nint qread(){\n    int w=1,c,ret;\n    while((c=getchar())> '9'||c< '0') w=(c=='-'?-1:1); ret=c-'0';\n    while((c=getchar())>='0'&&c<='9') ret=ret*10+c-'0';\n    return ret*w;\n}\nint n,t=2,r=1;\nint main(){\n    n=qread(); up(0,30,i){if((n-1)&(1<<i)) r=1ll*r*t%MOD;t=1ll*t*t%MOD;}\n    printf(\"%d\\n\",(1ll*(n-2)*r+1)%MOD);\n    return 0;\n}\n```",
        "postTime": 1625156191,
        "uid": 330759,
        "name": "\u56e7\u4ed9",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "\u8fd9\u9898\u597d\u50cf\u6709\u901a\u9879\u516c\u5f0f\n\n\u4f46\u662fjuruo\u592a\u83dc\u4e86\uff0c\u4e0d\u592a\u4f1a\n\n\u5176\u5b9e\u5c31\u662f\u5199\u4e00\u4e0b\u4ee5\u524d\u7684\u9898\u89e3\u7f62\u5566\n\n\u76f4\u63a5\u5199\u4e2abrute\u627e\u4e00\u4e0b\u89c4\u5f8b\n\n\u53d1\u73b0\u6709\u70b9\u5947\u602a\u7684\u89c4\u5f8b\n\n\u5c31\u662f\u641e\u4e00\u4e2a\u5feb\u901f\u5e42\n\n\u7136\u540e\u8bb0\u5f97%\u4e00\u4e0b\u5373\u53ef\n\n\u5426\u5219\u4f1a\u53ea\u670930pts\n\n\u5509\uff01\u597d\u50cf\u4ee3\u7801\u6709\u70b9\u957f\u3002\u3002\u3002\n\n```cpp\n// luogu-judger-enable-o2\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll p=1e9+7;\nll n;\nll qpow(ll a,ll b){\n\tif (!b) return 1;\n\tll tmp=qpow(a,b/2);\n\ttmp=(tmp*tmp)%p;\n\tif (b%2) tmp=(tmp*a)%p;\n\treturn tmp; \n}\nint main(){\n\tcin>>n;\n\tcout<<(qpow(2,n-1)*(n-2)%p+1)%p<<endl;\n\treturn 0;\n}\n\n```",
        "postTime": 1550390928,
        "uid": 30817,
        "name": "muller",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6574\u6570 $n$\uff0c\u4ee3\u8868\u6709 $n$ \u4e2a\u6570\uff08\u4e0d\u59a8\u8bbe\u4e3a $1,2,\\ldots,n$\uff09\u3002\n\n\u8ba9\u4f60\u628a\u8fd9\u4e9b\u6570\u5206\u4e3a\u4e24\u7ec4\uff08\u8003\u8651\u76f4\u63a5\u5de6\u53f3\u5207\u6210\u4e24\u534a\uff09\uff0c\u5176\u4e2d\u6bcf\u4e00\u7ec4\u8981\u4fdd\u8bc1\u6709\u6570\uff0c\u6bcf\u4e00\u4e2a\u6570\u4e0d\u4e00\u5b9a\u8981\u7528\u3002\n\n\u6c42\u6709\u591a\u5c11\u79cd\u5206\u7ec4\u65b9\u5f0f\u3002\n\n**\u7b54\u6848\u5bf9 $1000000007$ \u53d6\u6a21\u3002**\n\n### \u63a8\u5bfc\n\n\u5bf9\u4e8e $n$ \u4e2a\u6570\uff0c\u6211\u4eec\u6709 $n$ \u79cd\u5207\u5272\u65b9\u6cd5\u3002\u8003\u8651\u5bf9\u4e8e\u7b2c $i$ \u79cd\u5207\u5272\uff08\u5207\u5272\u7684\u4e34\u754c\u503c\u8981\u9009\uff0c\u5f52\u4e3a\uff09\uff0c\u6bcf\u4e00\u4e2a\u6570\u53ef\u9009\u53ef\u4e0d\u9009\uff0c\u6240\u4ee5\u5de6\u8fb9\u4e00\u7ec4\u5171\u6709 $2^{i-1}$ \u79cd\u9009\u6cd5\uff0c\u53f3\u8fb9\u6709 $2^{n-i}-1$ \u79cd\u9009\u6cd5\u3002\n\n$\\begin{aligned} ans&=\\sum\\limits_{i=1}^{n} 2^{i-1} \\times (2^{n-i}-1)\\\\ &=\\sum\\limits_{i=1}^{n} 2^{n-1}-2^{i-1} \\\\ &= (n-2) \\times 2^{n-1}+1 \\end{aligned}$\n\n### \u4ee3\u7801\n\n$16$ \u884c\u4ee3\u7801\uff0c\u5982\u679c\u9700\u8981\u53ef\u4ee5\u538b\u5230 $14$ \u884c\u3002\n\n```cpp\n#include<bits/stdc++.h>\nlong long m,mod=1000000007,ans=1;\nvoid fastpow(long long a,long long b)\n{\n\twhile(b)\n\t{\n\t\tif(b&1) ans=(ans*a)%mod,b--;\n\t\tb/=2,a=a*a%mod;\n\t}\n}\nint main()\n{\n\tscanf(\"%lld\",&m),fastpow(2,m-1);\n\tprintf(\"%lld\",(m-2)*ans%mod+1);\n\treturn 0;\n}\n```\n",
        "postTime": 1664288817,
        "uid": 553625,
        "name": "scp020",
        "ccfLevel": 4,
        "title": "P4936 Agent1 \u9898\u89e3"
    },
    {
        "content": "(\u7b2c\u4e00\u773c\u770b\u5230\u8fd9\u4e2a\u9898\u4e0d\u77e5\u9053 $O(1)$ \u600e\u4e48\u5199\uff0c\u786c\u7740\u5934\u76ae\u641e\u4e86\u4e2a $O(n^2)$ \u7684\u67ff\u5b50\u7136\u540e\u63a8\u6765\u63a8\u53bb...\uff08\u7adf\u7136\u63a8\u51fa\u6765\u4e86 \n\n# \u6392\u5217\u7ec4\u5408\n\n$AB$ \u4e24\u961f\uff0c\u6bcf\u961f\u5fc5\u6d3e\u4e00\u4e2a\u4eba  \n\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u6bcf\u961f\u662f\u8c01\u5fc5\u6d3e\uff0c $A$ \u6d3e $i$ \uff0c $B$ \u6d3e $j$ \uff0c\u7136\u540e\u4e3a\u4e86\u4fdd\u8bc1  $max\\{A\\}<min\\{B\\}$ \u6211\u4eec\u8ba9\u6bcf\u961f\u6d3e\u7684\u4e24\u4e2a\u4eba\u4e2d\u95f4\u7684\u4eba \uff08\u4e5f\u5c31\u662f $i\\lt x\\lt j$ \uff09 \u5fc5\u4e0d\u51fa\uff0c\u4e24\u4fa7\u7684\u6570 \uff08\u4e5f\u5c31\u662f $x\\lt i\\;\\vee\\;j\\lt x$ \uff09 \u9009\u62e9\u6027\u51fa  \n\u8fd9\u6837\u7684\u8bdd\u5c31\u662f  $\\sum\\limits_{i=1}^n\\sum\\limits_{j=i+1}^n(2^{i-1}\\times 2^{n-j})$     \n\u8fd9\u662f\u4e00\u4e2a $O(n^2)$ \u7684\u67ff\u5b50\uff0c\u6211\u4eec\u4f18\u5316\u4e00\u4e0b  \n\n# \u4f18\u5316\u67ff\u5b50\n\n$\\begin{aligned}&\\sum\\limits_{i=1}^n\\sum\\limits_{j=i+1}^n(2^{i-1}\\times 2^{n-j})\\\\=&\\sum\\limits_{i=1}^n\\sum\\limits_{j=0}^{n-i-1}(2^{i-1}\\times 2^j)\\\\=&\\sum\\limits_{i=0}^{n-1}\\sum\\limits_{j=0}^{n-i-2}(2^i\\times 2^j)\\\\=&\\sum\\limits_{i=0}^{n-1}2^i\\sum\\limits_{j=0}^{n-i-2}2^j\\\\=&\\sum\\limits_{i=0}^{n-1}(2^i\\times(2^{n-i-1}-1))\\\\=&\\sum\\limits_{i=0}^{n-1}(2^{n-1}-2^i)\\\\=&n2^{n-1}-(2^n-1)\\end{aligned}$  \n   \n\n\u597d\u4e86\uff0c\u8fd9\u4e48\u4e00\u4e2a\u53ef\u4ee5 $O(logn)$ \u7684\u67ff\u5b50\u5c31\u51fa\u6765\u4e86   \n\n# \u4ee3\u7801 \n\n\u5c31..\u548c\u4e0a\u9762\u7684\u67ff\u5b50\u4e00\u6a21\u4e00\u6837...  \n\n```cpp\n#include <iostream>\n\n#define ll long long\n\nusing namespace std;\n\nconst int mod = 1e9 + 7;\ninline ll ksm ( ll a, ll b ) {\n        ll res = 1;\n        while ( b > 0 ) {\n                if ( b & 1 ) res = res * a % mod;\n                a = a * a % mod;\n                b >>= 1;\n        }\n        return res;\n}\n\nint main () {\n        ll n; cin >> n;\n        cout << (n * ksm(2, n - 1) % mod \n                 - (ksm(2, n) - 1 + mod) % mod \n                 + mod\n                ) % mod << endl;\n}\n```",
        "postTime": 1636892406,
        "uid": 445933,
        "name": "Chivas_Regal",
        "ccfLevel": 0,
        "title": "P4936_Agent1\u2014\u2014\u6392\u5217\u7ec4\u5408+\u63a8\u67ff\u5b50"
    },
    {
        "content": "### \u5f88\u663e\u7136\u8fd9\u662f\u4e00\u9053\u6570\u5b66\u9898\n \u7136\u800c\u770b\u5230\u4e0b\u9762\u5927\u4f6c\u90fd\u6ca1\u6709\u592a\u901a\u4fd7\u6613\u61c2\u7684\u8bb2\u6cd5\uff0c\u4e8e\u662f\u4e4e\u672c\u849f\u84bb\u5c31\u6765\u6c34\u4e00\u7bc7\u9898\u89e3\u3002\n \n### \u9996\u5148\u8003\u8651\u76f4\u89c2\u7684\u89e3\u6cd5\n# \u4e5f\u5c31\u662f\u8bf4\u6700\u540e\u7684\u7b54\u6848\u662f$\\Sigma_{i=1}^{n}(i-1)C^{i}_{n}$\n#### \u5373\u6bcf\u6b21\u4ece$n$\u4e2d\u9009\u51fa$i$\u4e2a\u6570\uff0c\u5bf9\u4e8e\u8fd9$i$\u4e2a\u6570\uff0c\u7b26\u5408\u8981\u6c42\u7684\u4e2a\u6570\u663e\u7136\u662f$i-1$\u4e2a\u3002\n\n\u4f46\u662f~~\u849f\u84bb\u4e0d\u4f1a\u7b97\u8fd9\u4e2a\u5f0f\u5b50\u7684\u6c42\u548c~~\u6bd4\u8f83\u96be\u7b97\uff0c\u4e5f\u6bd4\u8f83\u96be\u63a8\u51fa\u9012\u63a8\u5f0f\u3002\n\n\u4e8e\u662f\u5c31\u5f00\u59cb\u76f4\u63a5\u627e\u9012\u63a8\u89c4\u5f8b\u3002\n\n## \u4ee4$f[i]$\u8868\u793a$n=i$\u65f6\u7684\u7b54\u6848\uff0c\u5219\u6709$f[i]=2f[i-1]+2^{i-1}-1$\n\n\u6211\u4eec\u8003\u8651\u5982\u4f55\u76f4\u89c2\u5730\u5f97\u51fa\u4e0a\u9762\u8fd9\u4e2a\u5f0f\u5b50\u3002\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6c42\u51fa\u4e86$f[1...i-1]$\u7684\u503c\uff0c\u63a5\u4e0b\u6765\u8981\u6c42$f[i]$\u3002(\u5047\u8bbe\u5e8f\u5217\u5355\u8c03\u9012\u589e\uff0c\u5bb9\u6613\u77e5\u9053\u8fd9\u5bf9\u7ed3\u679c\u5e76\u4e0d\u5f71\u54cd)\n\n\u90a3\u4e48\u9996\u5148\u8003\u8651 $i$ \u4e00\u4e2a\u4eba\u88ab\u5206\u6210\u4e00\u961f\uff0c\u5219\u5171\u6709$2^{i-1}-1$\u79cd\u60c5\u51b5(\u53ea\u8981\u524d\u9762\u4e0d\u4e3a\u7a7a\uff0c\u90a3\u4e48\u5c31\u4e00\u5b9a\u5408\u6cd5)\u3002\n\n\u518d\u8003\u8651 $ i $ \u88ab\u5206\u5165\u5176\u4ed6\u961f\u7684\u60c5\u51b5\uff0c\u5219\u5171\u6709$f[i-1]$\u79cd\u60c5\u51b5( $i$ \u53ea\u80fd\u88ab\u5206\u5165$B$\u7ec4)\n\n\u6700\u540e\u8003\u8651 $ i $ \u4e0d\u88ab\u7528\u7684\u60c5\u51b5\uff0c\u663e\u7136\u6709$f[i-1]$\u79cd.\n\n\u7efc\u4e0a\uff0c$f[i]=2f[i-1]+2^{i-1}-1$\n\n## \u7136\u540e\u5c31\u6709\u4e24\u79cd\u5199\u6cd5\u4e86\n\n\u9996\u5148\u65e2\u7136\u6709\u9879\u6570\u4e0d\u7b97\u591a\u7684\u9012\u63a8\u5f0f\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7528\u77e9\u9635\u5feb\u901f\u5e42\u4e86\u3002\n\n~~\u7136\u800c\u8fd9\u53ea\u662f\u9053\u84dd\u9898\u3002(\u77e9\u4e58\u5e73\u5747\u7d2b\u9898)~~\n\n\u4f46\u662f\u6211\u4eec\u8fd8\u53ef\u4ee5\u76f4\u63a5\u63a8\u901a\u9879\u516c\u5f0f\u2014\u2014\n\n$\\qquad\\qquad\\qquad f[i]=2f[i-1]+2^{i-1}-1$\n\n$\\qquad\\qquad\\qquad 2f[i-1]=4f[i-2]+2^{i-1}-2$\n\n$\\qquad\\qquad\\qquad 4f[i-2]=8f[i-3]+2^{i-1}-4$\n\n$\\qquad\\qquad\\qquad \u2026\u2026$\n\n$\\qquad\\qquad\\qquad 2^{i-2}f[2]=2^{i-1}f[1]+2^{i-1}-2^{i-2}$\n\n\u5c06\u8fd9\u51e0\u6761\u5f0f\u5b50\u7d2f\u52a0\u53ef\u4ee5\u5f97\u5230\n\n### $f[i]=(i-2)* 2^{i-1}+1(i>=2)$  \n\n### $f[1]=0$\n\n### $=>f[i]=(i-2)* 2^{i-1}+1(i>=1)$\n\n\u7136\u540e\u7528\u5feb\u901f\u5e42\u5c31\u53ef\u4ee5AC\u4e86\u3002~~\u4ee3\u7801\u592a\u7b80\u5355\u5c31\u4e0d\u653e\u4e86\u3002~~",
        "postTime": 1604400962,
        "uid": 299944,
        "name": "\u4f3c\u955c\u6d41\u5e74",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "\u672c\u6587\u5df2\u66f4\u65b0\u4e8e2019.2.15\n\n\u66b4\u529b\u7684\u641c\u7d22\uff0c\u53ea\u670920\u5206\u2026\u2026\n\n\n------------\n\n\u663e\u7136\u641c\u7d22\u662f\u65e0\u6cd5\u89e3\u51b3\u672c\u9898\u7684\u5927\u6570\u636e\u7684\u3002\u6211\u4eec\u679a\u4e3eA\u7ec4\u7684\u6700\u540e\u4e00\u4e2a\u4eba\uff0c\u8bbe\u4ed6\u662fk\u5f3a\u5927\u7684\uff0c\u90a3\u4e48A\u7ec4\u67092^(k-1)\u79cd\u65b9\u6848\uff0cB\u7ec4\u67092^(n-k)-1\u79cd\u65b9\u6848\uff08\u56e0\u4e3a\u4e24\u961f\u90fd\u8981\u6709\u4eba\u53c2\u6218\uff09\u3002\n\n\u7531\u52a0\u6cd5\u539f\u7406\u548c\u4e58\u6cd5\u539f\u7406\uff0c\u5f97\u7b54\u6848\u662f\u22112^(i-1)(2^(n-i)-1)          (1<=i<n\uff09\n\n\u4e8e\u662f\u6709\u4e86\u4e24\u4e2a\u5f97\u90e8\u5206\u5206\u7684\u65b9\u6848\n\n------------\n40\u5206\uff1a\u76f4\u63a5\u679a\u4e3ei\uff0c2\u7684\u5e42\u76f4\u63a5\u7b97\u5c31\u597d\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6O(n^2\uff09\n\n------------\n60\u5206\uff1a\u5feb\u901f\u5e42\u6216\u9884\u5904\u7406\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(nlogn)\u6216O(n)\n\n------------\n\u6ee1\u5206\uff1a\u5c55\u5f00\u5408\u5e76\uff0c\n\nans\n\n=\u2211(2^(n-1)-2^(i-1)) (1<=i<n\uff09\n\n=n*2^(n-1)-\u22112^(i-1) (1<=i<n\uff09\n\n=n*2^(n-1)-(2^n-1) \n\n=2^(n-1)*(n-2)+1;\n\n\u4f7f\u7528\u5feb\u901f\u5e42\u65f6\u95f4\u590d\u6742\u5ea6O(logn)\uff0c\u53ef\u4ee5AC\u4e86~~\uff08\u4e0d\u7528\u6b27\u62c9\u5b9a\u7406\uff09~~\u3002\n\n\u6ce8\u610f\u8981\u5f00long long\uff01\uff01\uff01\uff01\uff01\uff01\n\n\u4ee3\u7801\u53cc\u624b\u6367\u4e0a\uff1a\n\n------------\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#define maxd 1000000007\nusing namespace std;\nlong long n;\nlong long t;\nlong long ans;\nlong long count(long long x,long long y){\n    long long a=x,b=y;\n    a%=maxd;\n    long long s=1;\n    while (b>0){\n        if(b%2==1) {s*=a;s%=maxd;}\n        a*=a;\n        a%=maxd;\n        b/=2;\n    }\n    return s;  \n}\nint main(){\n  cin>>n;\n  t=count(2,n-1);\n  ans=t*(n-2)+1;\n  ans%=maxd;\n  cout<<ans<<endl;\n  return 0;\n}\n\n```",
        "postTime": 1541249145,
        "uid": 119851,
        "name": "msy66",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "## \u9898\u9762\u7b80\u5316\n1.\u6709$N$\u4e2a\u4e0d\u91cd\u590d\u7684\u6570\n2.\u4ece$N$\u4e2a\u6570\u4e2d\u53d6\u4e24\u4e2a\u975e\u7a7a\u96c6\u5408 $A$ $B$\n3.$\\forall a\\in A,\\forall b\\in B,a>b$\n#### \u6570\u636e\u8303\u56f4\n\u5bf9\u4e8e$20\\%$\u7684\u6570\u636e $N\\leq10$\n\u5bf9\u4e8e$40\\%$\u7684\u6570\u636e $N\\leq10^3$\n\u5bf9\u4e8e$60\\%$\u7684\u6570\u636e $N\\leq10^5$\n\u5bf9\u4e8e$100\\%$\u7684\u6570\u636e $N\\leq10^9$\n\n\u4e00\u770b\u5c31\u770b\u51fa\u8981 $O(1)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u660e\u663e\u662f**\u6570\u5b66\u9898**\n## \u601d\u8def\n### \u82e5$N\\leq10^3$\n\u770b\u5230n\u4e2a\u6570\u4e0d\u76f8\u540c\uff0c\u9009\u6570\u548c\u5927\u5c0f\u76f8\u5173\uff0c\u5c31\u53d1\u73b0\u9700\u8981\u6392\u5e8f\u3002\n\n\u628a$N$\u4e2a\u6570\u6392\u6210\u4e00\u6570\u5217\uff0c\u7528 $1,0$ \u8868\u793a \u53d6 \u6216 \u4e0d\u53d6 \u3002\uff08\u53ea\u662f\u66f4\u76f4\u89c2\u4e86\u4e9b\uff09\n\n\u56e0\u4e3a$\\forall a\\in A,\\forall b\\in B,a>b$\n\u6240\u4ee5\u53ef\u4ee5\u8bb0\u5f55 $B$\u4e2d\u7684\u6700\u5927\u503c\u3001$A$\u4e2d\u7684\u6700\u5c0f\u503c \u5728\u6570\u5217\u4e2d\u7684\u4f4d\u7f6e\uff0c\u8fd9\u91cc\u8bbe\u4e3a$i$\u548c$j$\uff0c\u8981\u679a\u4e3e\u6240\u6709 $i<j$ \u7684\u60c5\u51b5\u3002\n\n\u9009\u5b9a$i,j$\u540e\uff0c\u6613\u5f97 \n$\u96c6\u5408A\u7684\u9009\u62e9\u65b9\u6848\u6570=2^{i-1}$\uff0c\n$\u96c6\u5408B\u7684\u9009\u62e9\u65b9\u6848\u6570=2^{N-j}$,\n\u5219\u6709\n$$\\sum_{i=1}^{N-1}\\sum_{j=i+1}^{N} 2^{N-(j-i+1)}$$\n\u5feb\u901f\u5e42\u590d\u6742\u5ea6\u5148\u5ffd\u7565~~\u6211\u4e0d\u4f1a\u7b97~~ \uff0c\u5230\u8fd9\u91cc\u662f $O(n^2)$\n### \u82e5$N\\leq10^5$\n\u89c2\u5bdf\u4e0a\u4e00\u4e2a\u5f0f\u5b50\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0 **\u6709\u7684\u6307\u6570\u662f\u88ab\u91cd\u590d\u8ba1\u7b97\u7684** \uff0c\n\u6240\u4ee5\u53ef\u4ee5\u6362\u4e00\u79cd\u679a\u4e3e\u65b9\u5f0f\uff0c\u679a\u4e3e \u539f $i$ $j$ \u95f4\u7684\u4e0d\u9009\u7684\u6570\u5b57\u4e2a\u6570\uff08\u5305\u62eci\u548cj\uff09\uff0c\n\u8bbe\u4e3a $k$ \uff0c\u5219 $k=j-i+1$\n\u5219\u6709\n$$\\sum_{i=2}^{N}(N-i+1)*2^{N-i}$$\n\u5373\n$$\\sum_{i=1}^{N-1}i*2^{i-1}$$\n\u8fde\u5feb\u901f\u5e42\u90fd\u4e0d\u9700\u8981\uff0c\u5230\u8fd9\u91cc\u662f $O(n)$\n### \u82e5$N\\leq10^9$\n\u4ece$O(n)$\u5230$O(1)$\u662f\u6781\u96be\u8de8\u8d8a\u7684\u4e00\u6b65\uff08\u5e9f\u8bdd\uff09\n\n\u4f17\u6240\u5468\u77e5\uff0c\n$$\\sum_{i=0}^{n}2^{i}=2^{n+1}-1$$\n\u6240\u4ee5\uff0c\n$$\\sum_{i=1}^{N-1}i*2^{i-1}=\\sum_{i=0}^{N-2}(2^{N-1}-1)-(2^{i}-1)=(N-1)*2^{N-1}-2^{N-1}=(N-2)*2^{N-1}-1$$\n\u7b2c\u4e8c\u6b65\u65f6\u7528\u4e86\u524d\u7f00\u548c\u7684\u601d\u60f3\uff0c\u4e4b\u540e\u5c31\u5f88\u7b80\u5355\u5730\u63a8\u51fa\u6765\u4e86\n\n\u590d\u6742\u5ea6 $O(1)$ \uff0c\u8981\u52a0\u4e00\u4e2a\u5feb\u901f\u5e42\u53d6\u6a21\n### \u4ee3\u7801\n\u5feb\u901f\u5e42\u6a21\u677f",
        "postTime": 1602777202,
        "uid": 182066,
        "name": "_WD_",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053~~\u6570\u5217\u5927\u9898~~$QwQ$\n\n\u6211\u4eec\u4ee4$a_n$\u8868\u793a\u6709$n$\u4e2a$Agent$\u65f6\u7684\u4f5c\u6218\u65b9\u6848\u6570\u3002\n\n\u663e\u7136$a_1=0$($A,B$\u4e24\u961f\u90fd\u8981\u6709\u4eba\u53c2\u6218)\u3002\n\n\u8003\u8651\u52a0\u5165\u4e00\u4e2a\u65b0\u7684$Agent$\u540e\u589e\u52a0\u7684\u65b9\u6848\uff1a\n\n\u2460\u5728$n-1$\u7684\u60c5\u51b5\u4e0b\u5c06\u5176\u653e\u5728\u6bcf\u79cd\u60c5\u51b5\u7684$B$\u7ec4\u4e2d\uff1a$a_{n-1}$\u79cd\u65b9\u6848\u3002\n\n\u2461\u5355\u72ec\u653e\u5728$B$\u7ec4\uff0c$A$\u7ec4\u5728\u5269\u4e0b\u7684$n-1$\u4e2a\u4e2d\u4efb\u610f\u9009\u62e9\uff1a\n\n\u6392\u9664$A$\u7ec4\u4e3a\u7a7a\u7684\u60c5\u51b5\u540e\u5171\u6709$2^{n-1}-1$\u79cd\u65b9\u6848\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u9012\u63a8\u5f0f\uff1a\n$$\na_n=2\\times a_{n-1}+2^{n-1}-1\\ \\ \\ \\ \\ (a_1=0)\n$$\n\u56e0\u4e3a$N \\leq 10^9$\uff0c$O(n)$\u80af\u5b9a\u8981\u8d85\u65f6\u3002\n\n\u6240\u8003\u8651\u5199\u51fa\u5b83\u7684\u901a\u9879\uff1a\n\n\u4e24\u8fb9\u540c\u9664$2^n$\u5f97\n$$\n\\frac{a_n}{2^n}=\\frac{a_{n-1}}{2^{n-1}}+\\frac{1}{2}-\\frac{1}{2^n}\n$$\n\u4ee4$b_n=\\frac{a_n}{2^n}$\u79fb\u9879\u5f97\n$$\nb_n-b_{n-1}=\\frac{1}{2}-\\frac{1}{2^n}\n$$\n\u5217\u9879\u76f8\u52a0\u5f97\n$$\nb_n-b_{1}=\\frac{n-1}{2}-(\\frac{1}{2^2}+\\frac{1}{2^3}+...\\frac{1}{2^n})\n$$\n\u8fdb\u4e00\u6b65\u8f6c\u5316\u5f97\n$$\nb_n-b_{1}=\\frac{n}{2}+\\frac{1}{2^n}-1\n$$\n\u5c06$\\frac{a_n}{2^n}=b_n$\u4ee3\u5165\u53d8\u5f62\u5f97\n$$\na_n=(n-2)\\times2^{n-1}+1\\ \\ \\ \\ \\ (n\\ge 1)\n$$\n\u5feb\u901f\u5e42\u89e3\u51b3\u3002\n\n\u5c31\u5f53\u590d\u4e60\u6570\u5217\u901a\u9879\u4e86$QwQ$\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define mod 1000000007\n#define ll long long\nusing namespace std;\nint n;\nll qkpow(int n,int m){\n\tll ans=1,base=n;\n\twhile(m){\n\t\tif(m&1) ans*=base,ans%=mod;\n\t\tbase*=base;base%=mod;\n\t\tm>>=1;\n\t}\n\treturn ans;\n}\nint main(){\n\t//freopen(\"agent.in\",\"r\",stdin);\n\t//freopen(\"agent.out\",\"w\",stdout);\n\tscanf(\"%d\",&n);\n\tprintf(\"%d\\n\",((n-2)*qkpow(2,n-1)+1)%mod);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1566302578,
        "uid": 111095,
        "name": "Epworth",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    },
    {
        "content": "\u3010\u5206\u6790\u3011\n\n\u5f88\u663e\u7136\u6811\u72b6\u6570\u7ec4+\u5dee\u5206\n\n\u6811\u72b6\u6570\u7ec4\u6211\u4e0d\u591a\u63d0\u4e86\uff0c\u4e3b\u8981\u8bb2\u8bb2\u5dee\u5206\n\n\u8bbe\u6570\u7ec4$a[]=$${$$1,3,6,9,13$$}$\uff0c\u90a3\u4e48\u5dee\u5206\u6570\u7ec4$b[]=$${$$1,2,3,3,4$$}$\n\n\u4ece\u4e0a\u9762\u53ef\u4ee5\u770b\u51fa$b[i]=a[i]-a[i-1]$ (\u6211\u4eec\u4ee4$a[0]=0$)\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0$a[i]=b[1]+....+b[i]$;\u3002\n\n\u5047\u5982\u533a\u95f4$[2,4]$\u90fd\u52a0\u4e0a$2$\u7684\u8bdd\n\n$a$\u6570\u7ec4\u53d8\u4e3a$a[]=$${$$1,5,8,11,13$$}$\uff0c$b$\u6570\u7ec4\u53d8\u4e3a$b[]=$${$$1,4,3,3,2$$}$;\n\n\u4e0d\u77e5\u9053\u4f60\u6709\u6ca1\u6709\u53d1\u73b0\u53ea\u6709$b[2]\u548cb[5]$\u53d8\u4e86\uff0c\u56e0\u4e3a\u533a\u95f4$[2,4]$\u662f\u540c\u65f6\u52a0\u4e0a$2$\u7684,\u6240\u4ee5\u5728\u533a\u95f4\u5185$b[i]-b[i-1]$\u662f\u4e0d\u53d8\u7684.\n\n\u6240\u4ee5\u5bf9\u533a\u95f4$[x,y]$\u8fdb\u884c\u4fee\u6539,\u53ea\u7528\u4fee\u6539$b[x]$\u4e0eb$[y+1]$:\n\n$b[x]=b[x]+k;b[y+1]=b[y+1]-k;$\n\n\n\u3010AC\u4ee3\u7801\u3011\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\n#define lowbit(x) x&-x\n#define LL long long\nconst int MAXN = 100000010;\nint n, m;\nLL bit[MAXN];\n//\u677f\u5b50\u4e0d\u591a\u8bb2\u4e86\nvoid add(int x,int v) {\n    while(x <= n) {\n        bit[x] += v;\n        x += lowbit(x);\n    }\n}\nLL sum(int x) {\n    LL ret = 0;\n    while(x > 0) {\n        ret += bit[x];\n        x -= lowbit(x);\n    }\n    return ret;\n}\nint main()\n{\n\tscanf(\"%d %d\", &n, &m);\n    while(m--) {\n    \tint otp, x, y;\n    \tscanf(\"%d\", &otp);\n        if(!otp) {\n        \tscanf(\"%d %d\", &x, &y);\n            add(x,1);//\u5dee\u5206\n            add(y+1,-1);\n        } else {\n        \tscanf(\"%d\", &x);\n        \tprintf(\"%lld\\n\", sum(x));\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1551364288,
        "uid": 37090,
        "name": "ljcljc",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4936 \u3010Agent1\u3011"
    }
]
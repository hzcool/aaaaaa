[
    {
        "content": "\u4e00\u9053\u975e\u5e38\u5999\u7684\u6784\u9020\u9898 $QwQ$\n\n\u8981 $2x$\uff0c $3x$ \u90fd\u4e0d\u5728\u96c6\u5408\u5185\uff0c\u4f46\u76f4\u63a5\u5904\u7406\u8c8c\u4f3c\u975e\u5e38\u4e0d\u597d\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u6784\u9020\u51fa\u4e00\u4e2a\u4e0e\u539f\u547d\u9898\u7b49\u4ef7\u7684\u547d\u9898\u3002\n\n\u8c8c\u4f3c\u662f\u8fd9\u4e2a\uff0c\u6784\u9020\u4e00\u4e2a\u77e9\u5f62\uff0c\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u7684\u5143\u7d20\u4e3a$1$\uff0c\u7b2c\u4e00\u884c\u7684\u540e\u9762\u6240\u6709\u6570\u5747\u4e3a\u524d\u9762\u7684\u6570\u7684\u4e24\u500d\u3002\n\n\u63a5\u4e0b\u6765\u6bcf\u5217\u7684\u6570\u90fd\u662f\u5b83\u4e0a\u9762\u7684\u6570\u7684\u4e09\u500d\u3002\n\n\u5927\u6982\u6784\u9020\u51fa\u6765\u957f\u8fd9\u6837\uff1a\n\n```cpp\n1  2  4  8   16  32  ...\n3  6  12 24  48  96  ...\n9  18 36 72  ...\n27 ...\n```\n\n\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u4e2a\u77e9\u5f62\u5185\uff0c\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u6c42\u51fa\u8fd9\u4e2a\u77e9\u5f62\u5185\uff0c\u9009\u51fa\u4e00\u4e9b\u6570\uff0c\u76f8\u90bb\u7684\u6570\u4e0d\u80fd\u9009\u7684\u65b9\u6848\u6570\u3002\n\n\u56e0\u4e3a\u6bcf\u4e2a\u6570\u90fd\u662f\u524d\u9762\u90a3\u4e2a\u6570\u7684 $2$ \u500d\uff0c\u6240\u4ee5\u8fd9\u4e2a\u77e9\u5f62\u6700\u540e\u957f\u4e3a $log_2n$\uff0c\u5bbd\u4e3a$log_3n$\u5927\u6982\u662f $17,12$ \u4e0d\u5230\u7684\u6837\u5b50\u3002\n\n\u53ef\u4ee5\u7528\u72b6\u538b$dp$\u89e3\u51b3\n\n\u4f46\u662f\u8fd9\u4e2a\u77e9\u5f62\u5e76\u6ca1\u6709\u6db5\u76d6\u6240\u6709\u7684\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5bf9\u6bcf\u4e2a\u5373\u4e0d\u662f $2$ \u7684\u500d\u6570\u53c8\u4e0d\u662f $3$ \u7684\u500d\u6570\u7684\u6570\u90fd\u7c7b\u4f3c\u7684\u6784\u9020\u77e9\u5f62\uff0c\u53ef\u4ee5\u53d1\u73b0\u77e9\u5f62\u5185\u90e8\u5143\u7d20\u4e0d\u91cd\u590d\uff0c\u7136\u540e\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u5c06\u7b54\u6848\u76f8\u4e58\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6\u5927\u6982\u662f$O($\u80fd\u8fc7$)$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint read() {\n\tchar cc = getchar(); int cn = 0, flus = 1;\n\twhile(cc < '0' || cc > '9') {  if( cc == '-' ) flus = -flus;  cc = getchar();  }\n\twhile(cc >= '0' && cc <= '9')  cn = cn * 10 + cc - '0', cc = getchar();\n\treturn cn * flus;\n}\n#define int long long\n#define rep( i, s, t ) for( register int i = s; i <= t; ++ i ) \nconst int mod = 1000000001;\nconst int maxn = ( 1 << 18 ) - 1;\nconst int N = 100000 + 5;\nconst int M = 20 ;\nint n, book[N], Ans, line[M], g[maxn], a[M][M], end, dp[M][maxn], num, lim[M];\nvoid init( int x ) {\n\trep( i, 1, 11 ) {\n\t\tif( i == 1 ) a[i][1] = x;\n\t\telse a[i][1] = a[i - 1][1] * 3;\n\t\t//\u521d\u59cb\u5316\u77e9\u5f62 \n\t\tif( a[i][1] > n ) break ;\n\t\t\n\t\tend = i, line[i] = 1, book[a[i][1]] = 1;\n\t\t//line\u8868\u793a\u7b2ci\u884c\u6709\u591a\u5c11\u5217 \n\t\trep( j, 2, 18 ) {\n\t\t\ta[i][j] = a[i][j - 1] * 2;\n\t\t\tif( a[i][j] > n ) break;\n\t\t\tline[i] = j, book[a[i][j]] = 1; // \u7528book\u6807\u8bb0\u8fd9\u4e2a\u5143\u7d20\u88ab\u9009\u8fc7 \n\t\t}\n\t\tlim[i] = ( 1 << line[i] ) - 1; // lim\u8868\u793a\u7b2ci\u884c\u7684\u6570\u6709\u591a\u5c11\u4e2a\uff0c\u8d77\u9650\u5236\u4f5c\u7528 \n\t}\n}\nvoid solve(int x) {\n\tnum = 0 ;\n\trep( i, 0, lim[1] ) dp[1][i] = g[i];\n\trep( i, 2, end ) rep( j, 0, lim[i] ) {\n\t\tif( !g[j] ) continue ; //\u5982\u679c\u72b6\u6001j\u4e0d\u5408\u6cd5\uff0c\u5c31\u8df3\u8fc7 \n\t\tdp[i][j] = 0;\n\t\trep( k, 0, lim[i - 1] )\n\t\t\tif( g[k] && ( (k & j) == 0 ) ) //\u5982\u679c\u72b6\u6001k\u5408\u6cd5\uff0c\u4e14k\u4e0ej\u6ca1\u6709\u4f4d\u7f6e\u76f8\u540c \n\t\t\tdp[i][j] += dp[i - 1][k], dp[i][j] %= mod;\n\t}\n\trep( i, 0, lim[end] ) num += dp[end][i], num %= mod ;\n}\nsigned main()\n{\n\tn = read() ; Ans = 1;\n\trep( i, 0, maxn ) g[i] = ( (i << 1) & (i) ) ? 0 : 1; //\u521d\u59cb\u5316\u54ea\u4e9b\u72b6\u6001\u5408\u6cd5\u3002 \n\t\n\trep( i, 1, n ) if( !book[i] )  //\u5982\u679c\u8fd9\u4e2a\u6570\u6ca1\u6709\u88ab\u9009\u8fc7\u3002 \n\t\tinit(i), solve(i), Ans = Ans * num % mod; //\u5148\u6784\u9020\u77e9\u5f62\uff0c\u7136\u540e\u72b6\u538bdp \n\t\n\tprintf(\"%lld\\n\", Ans );\n\treturn 0;\n}\n```",
        "postTime": 1554264274,
        "uid": 30036,
        "name": "Soulist",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "# \u96c6\u5408\u9009\u6570\u9898\u89e3\n\n\u6784\u9020\u795e\u9898,\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4e0d\u542b\u8d28\u56e0\u65702\u548c3\u7684\u6570\u5b57\uff0c\n\n\u6211\u4eec\u6784\u9020\u4e00\u4e2a\u77e9\u9635(\u53ef\u80fd\u5e76\u4e0d\u6ee1),\n\n\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u662f\u8fd9\u4e2a\u6570,\n\n\u5728\u540c\u4e00\u884c\u4e2d\uff0c\u4e0b\u4e00\u5217\u7684\u6570\u662f\u8fd9\u4e00\u5217\u7684\u6570\u76842\u500d\uff0c\n\n\u5728\u540c\u4e00\u5217\u4e2d\uff0c\u4e0b\u4e00\u884c\u7684\u6570\u662f\u8fd9\u4e00\u884c\u7684\u6570\u76843\u500d\u3002\n\n\u5982\u679c\u6211\u4eec\u9009\u77e9\u9635\u4e2d\u4e00\u4e2a\u6570,\n\n\u5219\u53f3\u8fb9\u7684\u6570\u662f\u8fd9\u4e2a\u6570\u7684\u4e24\u500d\u800c\u4e0d\u80fd\u9009\uff0c\n\n\u540c\u7406,\u4e0b\u9762\u7684\u6570\u540c\u6837\u4e0d\u80fd\u9009\uff0c\n\n\u4e0d\u80fd\u9009\u5de6\u8fb9\u7684\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u6570\u662f\u5b83\u7684\u4e24\u500d\uff0c\n\n\u4e0d\u80fd\u9009\u4e0a\u9762\u7684\u6570\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u6570\u662f\u5b83\u7684\u4e09\u500d\uff0c\n\n\u603b\u7ed3\u4e00\u4e0b\uff1a\n\n\u9009\u4e86\u4e00\u4e2a\u6570\u5c31\u4e0d\u80fd\u9009\u76f8\u90bb\u7684\u6570\uff0c\n\n\u518d\u4e00\u770b\uff0c\u5217\u6570<=$log_{2}(n)<17$,\u884c\u6570<=$log_{3}(n)<11$\n\n\u6240\u4ee5\uff0c\u72b6\u538b\u5566\uff1a\n\n\u6bcf\u4e2a\u4e0d\u540c\u7684\u77e9\u9635\u4e92\u4e0d\u5f71\u54cd\uff0c\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff1a\u6bcf\u6b21\u5f97\u5230\u7684\u65b9\u6848\u6570\u4e4b\u79ef\u5373\u4e3a\u7b54\u6848\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define ll long long \nusing namespace std;\nconst int N=4098,M=20,K=100006;\nconst ll mod=1e9+1;\nint n,p,flag[N],book[K],num[M],f[M][N];\nll ans=1,sum;\ninline int read(){\n   int T=0,F=1; char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-') F=-1; ch=getchar();}\n   while(ch>='0'&&ch<='9') T=(T<<3)+(T<<1)+(ch-48),ch=getchar();\n   return F*T; \n}\nvoid build(int x){\n    p=1,sum=0; memset(f,0,sizeof(f)); memset(num,0,sizeof(num));\n    for(int i=x;i<=n;i<<=1,++p) for(int j=i;j<=n;j*=3) ++num[p],book[j]=1;\n    for(int i=0;i<(1<<num[1]);++i) f[1][i]=flag[i];\n    for(int i=2;i<p;++i)\n        for(int j=0;j<(1<<num[i-1]);++j)\n            for(int k=0;k<(1<<num[i]);++k)\n                if(flag[j]&&flag[k]&&!(j&k)) f[i][k]=(f[i][k]+f[i-1][j])%mod;\n    for(int i=0;i<(1<<num[p-1]);++i) sum=(sum+f[p-1][i])%mod;\n    ans=ans*sum%mod;\n}\nint main(){\n    n=read();\n    for(int i=0;i<=2048;++i) flag[i]=((i<<1)&i)?0:1;\n    for(int i=1;i<=n;++i) if(!book[i]) build(i);\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1565265313,
        "uid": 44180,
        "name": "ljk123",
        "ccfLevel": 0,
        "title": "\u96c6\u5408\u9009\u6570\u9898\u89e3"
    },
    {
        "content": "\u6784\u9020\u77e9\u9635,\u8fd9\u4e2a\u77e9\u9635\u5de6\u4e0a\u89d2\u4e3a\u7b2c\u4e00\u4e2a\u9009\u7684\u6570,\u6bcf\u4e00\u884c\u90fd\u662f\u4e00\u4e2a\u516c\u6bd4\u4e3a3\u7684\u6570\u5217,\u6bcf\u4e00\u5217\u90fd\u662f\u4e00\u4e2a\u516c\u6bd4\u4e3a2\u7684\u6570\u5217.\u901a\u8fc7\u8fd9\u4e2a\u795e\u5947\u7684\u77e9\u9635\u53ef\u4ee5\u77e5\u9053\u9009\u4e00\u4e2a\u6570\u5c31\u4e0d\u80fd\u9009\u4e0e\u4e4b\u76f8\u90bb\u7684\u6570.\u6211\u4eec\u5bf9\u6bcf\u4e00\u884cdp.\u7528f[i][k]\u8868\u793a\u77e9\u9635\u7b2ci\u884c\u72b6\u6001\u4e3ak\u7684\u65b9\u6848\u6570,\u5b83\u5c31\u662f\u4e0a\u4e00\u884c\u6240\u6709\u5408\u6cd5\u7684\u72b6\u6001\u603b\u548c.\u5e76\u4e14\u6211\u4eec\u53d1\u73b0\u6700\u591a\u670918\u884c,11\u5217.\u6700\u7ec8\u7b54\u6848\u5c31\u662f\u5bf9\u6bcf\u4e00\u4e2a\u6570\u8fdb\u884cdp\u6240\u5f97\u5230\u7684\u7b54\u6848\u7684\u4e58\u79ef.(\u8bb0\u5f97\u820d\u6389\u5df2\u5728\u4e4b\u524d\u77e9\u9635\u4e2d\u51fa\u73b0\u8fc7\u7684\u6570).\u81ea\u5df1\u505a\u8d77\u6765\u7ec6\u8282\u633a\u591a\u7684.\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n\ntypedef long long LL;\n\nstatic const int maxm = 1e5 + 10;\nstatic const int maxn = 20 + 10;\nstatic const int MOD = 1000000001;\n\nint f[maxn][maxm],lmt[maxm],mtx[maxn][maxn],vis[maxm],bin[maxm];\nint n;\nLL ans = 1;\n\nint dp(int x){\n    \n    for(int i = 1;i <= 18;i++)lmt[i] = 0;\n    \n    mtx[1][1] = x;\n    \n    for(int i = 2 ;i <= 18;i++)\n        if(mtx[i - 1][1] * 2 <= n)mtx[i][1] = mtx[i - 1][1] * 2;\n        else mtx[i][1] = n + 1;\n    \n    for(int i = 1 ;i <= 18 ;i++)\n        for(int j = 2;j <= 11 ;j++)\n            if(mtx[i][j - 1] * 3 <= n)mtx[i][j] = mtx[i][j - 1] * 3;\n            else mtx[i][j] = n + 1;\n    \n    for(int i = 1;i <= 18;i++)\n        for(int j = 1;j <= 11;j++)\n            if(mtx[i][j] <= n) lmt[i] += bin[j-1] , vis[mtx[i][j]] = 1;\n    \n    for(int i = 0;i <= 18;i++)\n        for(int j = 0;j <= lmt[i];j++)\n            f[i][j] = 0;\n    f[0][0] = 1;\n    \n    for(int i = 0;i <= 18;i++)\n        for(int j = 0;j <= lmt[i];j++)\n            if(f[i][j])\n                for(int k = 0;k <= lmt[i + 1];k++)\n                    if(!(j & k) && (!(k & (k << 1))))\n                        f[i + 1][k] = (f[i + 1][k] + f[i][j]) % MOD;\n    return f[18][0];\n}\n\nint main(){\n    scanf(\"%d\",&n);\n    \n    bin[0] = 1;\n    for(int i = 1;i <= n;i++)bin[i] = bin[i-1] << 1;\n    \n    for(int i = 1;i <= n;i++)\n        if(!vis[i]) ans = (ans * dp(i)) % MOD;\n    \n    printf(\"%lld\\n\",ans);\n    \n    return 0;\n}\n```",
        "postTime": 1496309034,
        "uid": 20115,
        "name": "huxulin",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "## [\u539f\u6587\u5730\u5740](https://www.cnblogs.com/bcoier/p/10788835.html)\n\n\u9898\u76ee\u8981\u6c42\u82e5\u51fa\u73b0x\uff0c\u5219\u4e0d\u80fd\u51fa\u73b02x\uff0c3x\n\n\u6240\u4ee5\u6211\u4eec\u8003\u8651\u6784\u9020\u4e00\u4e2a\u77e9\u9635\n\n$1\\ 2\\ 4 \\ 8\u2026\u2026$\n\n$3\\ 6\\ 12\\ 24\u2026\u2026$\n\n$9\\ 18\\ 36\u2026\u2026$\n\n$\u2026\u2026$\n\n\u4e0d\u96be\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u77e9\u9635\uff0c\u82e5\u6211\u9009\u62e9\u4e86\u4e00\u4e2a\u6570x\uff0c\u5219\u5728\u77e9\u9635\u5185\u8be5\u6570\u7684\u76f8\u90bb\u683c\u5b50\u90fd\u4e0d\u80fd\u9009\uff0c\u9898\u76ee\u5c31\u88ab\u8f6c\u5316\u6210\u4e86[\u7389\u7c73\u7530](https://www.luogu.org/problemnew/show/P1879)\u4e86\uff0c\u53ef\u4ee5\u7528\u72b6\u538bDP\u89e3\u51b3\n\n\u4f46\u662f\u76f4\u63a5\u505a\u662f\u4e0d\u5bf9\u7684\uff0c\u6bd4\u59825\u5c31\u6ca1\u6709\u51fa\u73b0\u5728\u8fd9\u4e2a\u5e8f\u5217\u4e2d\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u591a\u4e2a\u77e9\u9635\uff0c\u7528\u4e58\u6cd5\u539f\u7406\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define il inline\n#define re register\n#define debug printf(\"Now is Line : %d\\n\",__LINE__)\n#define file(a) freopen(#a\".in\",\"r\",stdin);//freopen(#a\".out\",\"w\",stdout)\n#define int long long\n#define inf 123456789\n#define mod 1000000001\nil int read() {\n    re int x = 0, f = 1; re char c = getchar();\n    while(c < '0' || c > '9') { if(c == '-') f = -1; c = getchar();}\n    while(c >= '0' && c <= '9') x = x * 10 + c - 48, c = getchar();\n    return x * f;\n}\n#define rep(i, s, t) for(re int i = s; i <= t; ++ i)\n#define drep(i, s, t) for(re int i = t; i >= s; -- i)\n#define mem(k, p) memset(k, p, sizeof(k))\n#define maxn 100005\nint n, m, a[20][20], g[1 << 15], vis[maxn], H, L[20], dp[20][1 << 15], ans = 1;\nil void martix(int x) {\n    H = 0;\n    rep(i, 1, 18) {\n        a[i][1] = (i == 1) ? x : a[i - 1][1] * 2;\n        if(a[i][1] > n) break;\n        ++ H, L[i] = vis[a[i][1]] = 1;\n        rep(j, 2, 11) {\n            a[i][j] = a[i][j - 1] * 3;\n            if(a[i][j] > n) break;\n            L[i] = j, vis[a[i][j]] = 1;\n        }\n    }\n}\nil int solve() {\n    rep(i, 0, (1 << L[1]) - 1) dp[1][i] = g[i];\n    rep(i, 2, H) {\n        rep(j, 0, (1 << L[i]) - 1) {\n            if(!g[j]) continue;\n            dp[i][j] = 0;\n            rep(k, 0, (1 << L[i - 1]) - 1) {\n                if(g[k] && (k & j) == 0) dp[i][j] += dp[i - 1][k];\n            }\n        }\n    }\n    int t = 0;\n    rep(i, 0, (1 << L[H]) - 1) t = (t + dp[H][i]) % mod;\n    return t;\n}\nsigned main() {\n    n = read();\n    rep(i, 0, (1 << 11) - 1) g[i] = !(i & (i << 1));\n    rep(i, 1, n) if(!vis[i]) martix(i), ans = ans * solve() % mod;\n    printf(\"%lld\", ans);\n    return 0;\n}\n```",
        "postTime": 1556504161,
        "uid": 57014,
        "name": "Nemlit",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "\u662f\u4e00\u9053\u5f88\u5999\u7684\u6784\u9020+\u72b6\u538b$dp$\u9898\u5416.\n\n\u770b\u4e86\u5f88\u591a\u9898\u89e3\u90fd\u662f\u5f00\u95e8\u89c1\u5c71\u5730\u8bb2\u6784\u5efa\u4e00\u4e2a\u7f51\u683c\u56fe,\u53ef\u662f\u6ca1\u8bb2\u600e\u4e48\u60f3\u5230\u7684\u5416,\u4e8e\u662f\u6211\u51b3\u5b9a\u6765\u5199\u4e00\u7bc7\u9898\u89e3,\u53ef\u4ee5\u5f53\u4f5c\u5176\u4ed6\u9898\u89e3\u7684\u8865\u5145.\n\n\u5e94\u8be5\u5f88\u591a\u4eba\u770b\u5230\u9898\u90fd\u4f1a\u50cf\u6211\u4e00\u6837\u5728\u8349\u7a3f\u672c\u4e0a\u753b\u4e0b\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4e0b\u9762\u7684\u56fe,\u6216\u8005\u60f3:\"\u9009$1$,\u4e0d\u9009$2,3$;\u9009$2$,\u4e0d\u9009$4,6$\"\u7b49\u7b49.\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9,\u5de6\u513f\u5b50\u662f\u5b83\u7684\u4e24\u500d,\u53f3\u513f\u5b50\u662f\u5b83\u7684\u4e09\u500d.\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0xd4ccuo.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u7ea6\u675f\u6761\u4ef6\u662f:\u8fde\u4e86\u8fb9\u7684\u4e24\u4e2a\u70b9\u662f\u4e0d\u53ef\u4ee5\u540c\u65f6\u9009\u7684,\u4e5f\u5c31\u662f\u53ea\u80fd\u9694\u4e00\u4e2a\u9009\u4e00\u4e2a,\u4f46\u662f\u8fd9\u6837\u663e\u7136\u4e0d\u597d\u505a.\u4e8e\u662f\u8003\u8651\u80fd\u4e0d\u80fd\u518d\u8f6c\u5316\u4e00\u4e0b.\u4ed4\u7ec6\u89c2\u5bdf\u8fd9\u4e2a\u56fe\u4f1a\u53d1\u73b0\u5b83\u7279\u522b\u50cf\u4e00\u68f5\u6811,\u4f46\u53c8\u4e0d\u662f,\u56e0\u4e3a\u4e00\u4e2a\u70b9\u6709\u4e24\u4e2a\u7236\u4eb2,\u8fd9\u662f\u56e0\u4e3a\u4e00\u4e2a\u6570\u53ef\u80fd\u662f\u4e00\u4e2a\u6570\u7684\u4e24\u500d\u540c\u65f6\u53c8\u662f\u53e6\u5916\u4e00\u4e2a\u6570\u7684\u4e09\u500d.\u518d\u89c2\u5bdf\u4e00\u4e0b\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u56fe\u4f3c\u4e4e\u662f\u7531\u8bb8\u591a\u5c0f\u83f1\u5f62\u7ec4\u6210\u7684,\u4e8e\u662f\u628a\u83f1\u5f62\u62c9\u6210\u6b63\u65b9\u5f62\u4f1a\u53d1\u73b0\u5f97\u5230\u4e86\u4e00\u4e2a\u5012\u4e09\u89d2.\u5982\u4e0b:\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/oi0l3hb3.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u663e\u7136\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e2a\u5012\u4e09\u89d2\u586b\u6ee1\u5f97\u5230\u4e00\u4e2a\u7f51\u683c\u56fe.\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9,\u5b83\u7684\u4e0b\u9762\u662f\u5b83\u7684\u4e24\u500d,\u53f3\u8fb9\u662f\u5b83\u7684\u4e09\u500d.\u8fd9\u6837\u4e00\u6765,\u7ea6\u675f\u6761\u4ef6\u5c31\u53d8\u6210\u4e86\u9009\u4e86\u4e00\u4e2a\u6570,\u5c31\u4e0d\u80fd\u9009\u4e0e\u5b83\u76f8\u90bb\u7684\u6570(\u4e0a,\u4e0b,\u5de6,\u53f3).\u8f6c\u5316\u4e4b\u540e\u5c31\u6210\u4e3a\u4e86\u4e00\u822c\u7684\u72b6\u538b$dp $\u89e3\u51b3\u7684\u95ee\u9898.\u4f46\u662f,\u6ce8\u610f\u5230\u8fd9\u4e2a\u8868\u683c\u5e76\u4e0d\u80fd\u6db5\u76d6\u6240\u6709\u7684\u6570,\u6211\u4eec\u9700\u8981\u5bf9\u6ca1\u6709\u88ab\u6db5\u76d6\u7684\u6570\u518d\u5efa\u4e00\u4e2a\u5982\u4e0a\u7684\u7f51\u683c\u56fe,\u6700\u540e\u4e58\u6cd5\u539f\u7406\u7edf\u8ba1\u4e0b\u7b54\u6848\u5c31\u597d\u4e86.\u81f3\u4e8e\u72b6\u538b\u7ec6\u8282\u7684\u8bb2\u8ff0,\u53ef\u4ee5\u53c2\u770b\u5176\u4ed6\u9898\u89e3.\n### \u6e29\u99a8\u63d0\u9192\n\n\u5927\u6570\u7ec4\u522b\u7528$memset$,\u4f60\u5f88\u6709\u53ef\u80fd\u4f1a\u5411\u6211\u4e00\u6837$T$\u6389.\n### $Code$\n```cpp\n#include<bits/stdc++.h>\n#define il inline\n#define Ri register int\n#define go(i,a,b) for(Ri i=a;i<=b;++i)\n#define yes(i,a,b) for(Ri i=a;i>=b;--i)\n#define e(i,u) for(Ri i=b[u];i;i=a[i].nt)\n#define mem(a,b) memset(a,b,sizeof(a))\n#define ll long long\n#define db double\n#define inf 2147483647\nusing namespace std;\nil int read()\n{\n    Ri x=0,y=1;char c=getchar();\n    while(c<'0'||c>'9'){if(c=='-')y=-1;c=getchar();}\n    while(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+c-'0';c=getchar();}\n    return x*y;\n}\nconst int N=100010,mod=1e9+1;\nint n,h[30],a[30][30],f[30][100000];ll as=1;//h[0]:\u4e00\u5171\u6709\u591a\u5c11\u884c h[i]:\u7b2ci\u884c\u6709\u591a\u5c11\u6570\nvector<int>b[30];\nbool vis[N];\nil void build(Ri x)\n{\n    mem(h,0);\n    while(x<=n)\n    {\n\tRi y=x;++h[0];\n\twhile(y<=n)vis[y]=1,a[h[0]][++h[h[0]]]=y,y*=2;\n\tx*=3;\n    }\n}\nil bool ck(Ri x,Ri ct)\n{\n    go(i,0,ct)if(x&(1<<i) && x&(1<<(i+1)))return 0;\n    return 1;\n}\nil void init()\n{\n    go(i,1,h[0])b[i].clear();\n    go(i,1,h[0])\n    {\n\tgo(j,0,(1<<h[i])-1)\n\t    if(ck(j,h[i]))b[i].push_back(j);\n    }\n}\nil ll sol()\n{\n    init();\n    go(i,1,h[0])go(j,0,(int)b[i].size()-1)f[i][j]=0;\n    go(j,0,(int)b[1].size()-1)f[1][j]=1;\n    go(i,2,h[0])\n\tgo(j,0,(int)b[i].size()-1)\n\tgo(k,0,(int)b[i-1].size()-1)\n        {\n\t    if(!(b[i][j]&b[i-1][k]))\n\t    {\n\t\tf[i][j]=f[i][j]+f[i-1][k];\n\t\tif(f[i][j]>mod)f[i][j]-=mod;\n\t    }\n\t}\n    ll ret=0;\n    go(j,0,(int)b[h[0]].size()-1)\n    {\n\tret=ret+f[h[0]][j];\n\tif(ret>mod)ret-=mod;\n    }\n    return ret;\n}\nint main()\n{\n    n=read();\n    go(i,1,n)\n    {\n\tif(vis[i])continue;\n\tbuild(i);as=as*sol();if(as>mod)as%=mod;\n    }\n    printf(\"%lld\\n\",as);\n    return 0;\n}\n\n```\n",
        "postTime": 1569481719,
        "uid": 113980,
        "name": "hahaha1215",
        "ccfLevel": 0,
        "title": "HNOI2012 \u96c6\u5408\u9009\u6570"
    },
    {
        "content": "~~\u4f3c\u4e4e\u5728\u67d0\u4e2d\u96c6\u8bad\u7684\u65f6\u5019\u6709\u4eba\u8bb2\u8fc7\u8fd9\u4e2a\u9898\u2026\u2026~~\n\n\u9996\u5148\u901a\u8fc7\u624b\u73a9\uff08\u6a21\u62df\u9898\u610f\uff09\u4e00\u4e0b\uff0c\u53d1\u73b0\u53ef\u4ee5\u753b\u51fa\u8fd9\u6837\u7684\u51e0\u4e2a\u56fe\uff08\u4e3e $n=20$ \u4e3a\u4f8b\uff09\uff1a\n\n```\n1 3 9\n2 6 18\n4 12\n8\n16\n```\n\n```\n5 15\n10\n20\n```\n\n```\n7\n14\n```\n\n```\n11\n```\n\n```\n13\n```\n\n```\n17\n```\n\n```\n19\n```\n\n\u7136\u540e\u4f1a\u53d1\u73b0\u6bcf\u4e2a\u6570\u5b57\u53ea\u4f1a\u51fa\u73b0\u4e00\u6b21\u2026\u2026\n\n\u800c\u4e14\u6bcf\u884c\u6bcf\u5217\u6700\u591a\u53ea\u6709 $O(\\log n)$ \u4e2a\u503c\u2026\u2026\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u72b6\u6001\u538b\u7f29\u52a8\u6001\u89c4\u5212\u4e86\n\n\u8bbe $f_{i,S}$ \u8868\u793a\u5904\u7406\u5b8c\u4e86\u524d $i$ \u884c\uff0c\u5f53\u524d\u884c\u9009\u62e9\u60c5\u51b5\u4e3a $S$ \u7684\u65b9\u6848\u6570\n\n\u4e8e\u662f\u5c31\u53ef\u4ee5\u8f6c\u79fb\u4e86\uff0c\u6ce8\u610f\u5224\u65ad\u5f53\u524d\u884c\u7684\u5927\u5c0f\u662f\u5426\u4e0d\u5c0f\u4e8e $S$ \u7684\u6700\u9ad8\u53ef\u884c\u4f4d\n\n``` cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5 + 10, mod = 1e9 + 1;\nint n, vis[N], num[N], cnt[1 << 21];\nll ans = 1, f[2][1 << 21];\n\nvoid sol(int start) {\n    int len = 0, height = 0;\n    for(int i = start ; i <= n ; i *= 2) {\n        ++ height;\n        num[height] = 0;\n        for(int j = i ; j <= n ; j *= 3) {\n            vis[j] = 1;\n            ++ num[height];\n        }\n        len = max(len, num[height]);\n    }\n    int p = 0;\n    int mxs = 1 << len;\n    for(int i = 0 ; i < mxs ; ++ i) f[p][i] = 0;\n    f[p][0] = 1;\n    for(int i = 1 ; i <= height ; ++ i) {\n        p ^= 1;\n        for(int i = 0 ; i < mxs ; ++ i) f[p][i] = 0;\n        for(int s = 0 ; s < mxs ; ++ s) {\n            if((s & (s << 1)) == 0 && cnt[s] <= num[i]) {\n                for(int t = 0 ; t < mxs ; ++ t) {\n                    if((t & (t << 1)) == 0 && cnt[t] <= num[i - 1]) {\n                        if((s & t) == 0) {\n                            (f[p][s] += f[p ^ 1][t]) %= mod;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    \n    ll res = 0;\n    for(int s = 0 ; s < mxs ; ++ s)\n        (res += f[p][s]) %= mod;\n        \n    (ans *= res) %= mod;\n}\n\nint main() {\n    for(int s = 0 ; s < (1 << 21) ; ++ s) {\n        for(int i = 20 ; i ; -- i) {\n            if((s >> (i - 1)) & 1) {\n                cnt[s] = i;\n                break;\n            }\n        }\n    }\n    scanf(\"%d\", &n);\n    for(int i = 1 ; i <= n ; ++ i) {\n        if(!vis[i]) {\n            sol(i);\n        }\n    }\n    printf(\"%lld\\n\", (ans % mod + mod) % mod);\n}\n```",
        "postTime": 1544773162,
        "uid": 47111,
        "name": "nekko",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "\u8003\u8651\u6784\u9020\u51fa\u4e00\u4e2a\u77e9\u9635\uff1a\n\n$$\n\\begin{matrix}\n\n1 & 3 & 9 & 27 & ...\\\\\n\n2 & 6 & 18 & 54 & ...\\\\\n\n4 & 12 & 36 & 108 & ...\\\\\n\n8 & 24 & 72 & 216 & ...\\\\\n\n... & ... & ... & ... & ...\n\n\\end{matrix}\n\n$$\n\u5373\u5de6\u4e0a\u89d2\u7684\u6570\u4e3a$1$\uff0c\u6b64\u5916\u6bcf\u4e2a\u6570\u90fd\u7b49\u4e8e\u5b83\u5de6\u8fb9\u7684\u6570\u4e58$3$\uff0c\u4e0a\u9762\u7684\u6570\u4e58$2$\u3002\n\n\u6b64\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\u5728\u77e9\u9635\u4e2d\u53d6\u51fa\u4e00\u4e9b\u5143\u7d20\uff0c\u4e0d\u80fd\u53d6\u76f8\u90bb\u5143\u7d20\u7684\u65b9\u6848\u6570\u3002\n\n\u7531\u4e8e\u77e9\u9635\u7684\u884c\u6570$\u226417$\uff0c\u5217\u6570$\u226411$\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u72b6\u6001\u538b\u7f29\u3002\n\n\u7528$f[i][S]$\u8868\u793a\u5230\u4e86\u7b2c$i$\u884c\uff0c\u6b64\u884c\u7684\u9009\u53d6\u72b6\u6001\u4e3a$S$\u7684\u65b9\u6848\u6570\uff0c\u5c31\u53ef\u4ee5\u679a\u4e3e\u4e0a\u4e00\u884c\u7684\u72b6\u6001\u8fdb\u884c\u8f6c\u79fb\u4e86\u3002\n\n\u540c\u65f6\u6ce8\u610f\uff0c**\u8fd9\u4e2a\u77e9\u9635\u5e76\u6ca1\u6709\u6db5\u76d6$1$\u5230$n$\u7684\u6240\u6709\u6570**\u3002\u6240\u4ee5\u8981\u4ee5\u6bcf\u4e00\u4e2a**\u65e2\u4e0d\u662f$2$\u7684\u500d\u6570\u53c8\u4e0d\u662f$3$\u7684\u500d\u6570\u7684\u6570**\u4f5c\u4e3a\u77e9\u9635\u7684\u5de6\u4e0a\u89d2\u8fdb\u884cDP\uff0c\u5e76\u5c06\u6240\u6709\u7684\u7ed3\u679c\u76f8\u4e58\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\ninline int read() {\n    int res = 0; bool bo = 0; char c;\n    while (((c = getchar()) < '0' || c > '9') && c != '-');\n    if (c == '-') bo = 1; else res = c - 48;\n    while ((c = getchar()) >= '0' && c <= '9')\n        res = (res << 3) + (res << 1) + (c - 48);\n    return bo ? ~res + 1 : res;\n}\nconst int N = 1e5 + 5, PYZ = 1e9 + 1, R = 20, C = (1 << 11) + 5;\nint n, rw, cnt[N], f[R][C], tot, us[C], Nx[R]; bool vis[N];\nint solve(int x) {\n    int i, j, k; rw = 0; for (i = x; i <= n; i *= 2) {\n        rw++; cnt[rw] = 0; for (j = i; j <= n; j *= 3)\n            cnt[rw]++, vis[j] = 1;\n    }\n    for (j = 1; j <= Nx[cnt[1]]; j++) f[1][us[j]] = 1;\n    for (i = 2; i <= rw; i++) for (j = 1; j <= Nx[cnt[i]]; j++) {\n        int S = us[j]; f[i][S] = 0;\n        for (k = 1; k <= Nx[cnt[i - 1]]; k++) {\n            int T = us[k]; if (S & T) continue;\n            f[i][S] = (f[i][S] + f[i - 1][T]) % PYZ;\n        }\n    }\n    int res = 0; for (j = 1; j <= Nx[cnt[rw]]; j++)\n        res = (res + f[rw][us[j]]) % PYZ; return res;\n}\nint main() {\n    int i, j, res = 1; n = read();\n    for (i = 0; i < (1 << 11); i++) {\n        bool flag = 1; int pos = 0;\n        for (j = 1; j < 11; j++) {\n            if (((i >> j) & 1) & ((i >> j - 1) & 1))\n                {flag = 0; break;}\n            if ((i >> j) & 1) pos = j;\n        }\n        if (flag) {\n            us[++tot] = i;\n            if (i == (1 << pos)) Nx[pos] = tot - 1;\n        }\n    }\n    Nx[11] = tot; for (i = 1; i <= n; i++)\n        if (!vis[i]) res = (1ll * res * solve(i)) % PYZ;\n    printf(\"%d\\n\", res);\n    return 0;\n}\n```",
        "postTime": 1506258384,
        "uid": 29936,
        "name": "xyz32768",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "## \u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011\n\n[\u6d1b\u8c37\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P3226)\n\n\u4e4d\u4e00\u770b\u8fd9\u9053\u9898\uff0c\u597d\u50cf\u65e0\u4ece\u4e0b\u624b\u3002\u90a3\u4e48\u6211\u4eec\u5c31\u8981\u628a\u5b83\u8f6c\u5316\u6210\u6211\u4eec\u719f\u6089\u7684\u6a21\u578b\u6216\u95ee\u9898\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u9700\u8981\u6784\u9020\u3002\n\n\u6211\u4eec\u6765\u770b\u8fd9\u6837\u4e00\u4e2a\u77e9\u5f62\uff1a\n\n$1\\ \\ \\ 3\\ \\ \\ 9\\ \\ \\ 27\\ ...$\n\n$2\\ \\ \\ 6\\ \\ 18\\ \\ \\ 54\\ ...$\n\n$4\\ \\ 12\\ \\ 36\\ \\ 108\\ ...$\n\n\u540c\u4e00\u884c\u5185\uff0c\u53f3\u8fb9\u7684\u6570\u662f\u5de6\u8fb9\u7684\u6570\u7684 $3$ \u500d\uff1b\u540c\u4e00\u5217\u5185\uff0c\u4e0b\u9762\u7684\u6570\u662f\u4e0a\u9762\u7684\u6570\u7684 $2$ \u500d\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u628a\u539f\u9898\u8f6c\u5316\u6210\u4e86\u8fd9\u6837\u4e00\u4e2a\u9898\u76ee\uff1a\n\n\u5728\u77e9\u9635\u5185\u9009\u6570\uff0c\u4fdd\u8bc1\u9009\u51fa\u7684\u6570\u4e0d\u76f8\u90bb\uff0c\u6c42\u65b9\u6848\u6570\u3002\u77e9\u9635\u4e0d\u4e00\u5b9a\u6ee1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u4e00\u884c\u7684\u6570\u53ef\u80fd\u4e0d\u4e00\u6837\u591a\uff08\u8fd9\u5f88\u597d\u7406\u89e3\uff0c\u56e0\u4e3a\u77e9\u9635\u91cc\u6bcf\u4e2a\u6570\u6700\u591a\u662f $n$\uff09\n\n\u800c\u8fd9\u4e2a\u77e9\u9635\u6700\u591a\u662f $log_2n\\times log_3n$\uff0c\u4e5f\u5c31\u4e0d\u8d85\u8fc7 $20\\times 20$\uff0c\u76f4\u63a5\u72b6\u538bdp\u5373\u53ef\u3002\n\n\u6700\u540e\u4e00\u4e2a\u5c0f\u6ce8\u610f\u70b9\uff0c\u5c31\u662f\u4e00\u4e2a\u77e9\u9635\u4e0d\u80fd\u6db5\u76d6 $1$ ~ $n$ \u6240\u6709\u7684\u6570\u3002\u6211\u4eec\u53ea\u9700\u8981\u591a\u6b21\u6784\u9020\u77e9\u9635\uff0c\u5206\u522b\u6c42\u51fa\u7ed3\u679c\u3002\u6700\u540e\u6839\u636e\u4e58\u6cd5\u539f\u7406\u628a\u6240\u6709\u77e9\u9635\u7684\u7ed3\u679c\u76f8\u4e58\u5c31\u662f\u7b54\u6848\u3002\n\n\u4e0b\u9762\u662f AC \u4ee3\u7801\n```cpp\n/*\nluogu P3226\n*/\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\nconst int M = 1e9+1;\n\nint k,n,m[20],a[20][20];\nint ans=1,f[20][1<<15];\nbool vis[100005];\nvector<int> s[20];\n\nbool legal(int x,int m)\n{\n\tfor(int i=1;i<=m;i++)\n\t\tif((x>>i&1)==1 && (x>>i-1&1)==1)\n\t\t\treturn false;\n\treturn true;\n}\n\nvoid init()\n{\n\tfor(int i=0;i<15;i++)\n\t\tfor(int t=0;t<(1<<i);t++)\n\t\t\tif(legal(t,i))\n\t\t\t\ts[i].push_back(t);\n}\n\nvoid create(int st)\n{\n\tn = 1;\n\ta[1][1] = st;\n\tvis[st] = true;\n\tint num=st;\n\twhile(num*2<=k)\n\t{\n\t\ta[++n][1] = num*2;\n\t\tnum *= 2;\n\t\tvis[num] = true;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tnum = a[i][1];\n\t\tm[i] = 1;\n\t\twhile(num*3<=k)\n\t\t{\n\t\t\ta[i][++m[i]] = num*3;\n\t\t\tnum *= 3;\n\t\t\tvis[num] = true;\n\t\t}\n\t}\n}\n\nint dp()\n{\n\tf[0][0] = 1;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int u=0;u<s[m[i]].size();u++)\n\t\t{\n\t\t\tf[i][u] = 0;\n\t\t\tfor(int v=0;v<s[m[i-1]].size();v++)\n\t\t\t\tif((s[m[i]][u]&s[m[i-1]][v])==0)\n\t\t\t\t\tf[i][u] = (f[i][u]+f[i-1][v])%M;\n\t\t}\n\tint res=0;\n\tfor(int i=0;i<s[m[n]].size();i++)\n\t\tres = (res+f[n][i])%M;\n\treturn res;\n}\n\nsigned main()\n{\n\tcin>>k;\n\tinit();\n\tfor(int i=1;i<=k;i++)\n\t\tif(!vis[i])\n\t\t{\n\t\t\tcreate(i);\n\t\t\tans = ans*dp()%M;\n\t\t}\n\tcout<<ans<<endl;\n\t\n\treturn 0;\n}\n```\n\n\u795d\u5927\u5bb6 AC \u6109\u5feb\uff01",
        "postTime": 1595754855,
        "uid": 123298,
        "name": "kouylty",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "## \u6784\u9020\u77e9\u9635\u4ec0\u4e48\u7684,\u540c\u697c\u4e0b\u5927\u4f6c,\u8fd9\u91cc\u7b80\u5355\u89e3\u91ca\u4e00\u4e0b\u5c31\u8fc7\n\n(\u6784\u9020\u77e9\u9635\u540e\u6211\u4eec\u5c31\u628a\u539f\u95ee\u9898\u8f6c\u5316\u4e3a\u4e86\u6c42:\u5728\u77e9\u9635\u4e2d\u9009\u6570,\u4e14\u4e24\u4e24\u4e0d\u76f8\u90bb\u7684\u65b9\u6848\u6570)\n```\n\u77e9\u9635\u4e2d\u7684\u884c\u5bf9\u5e94 x*2,\u5217\u5bf9\u5e94x*3\n```\n```cpp\n//by Judge \n#include<cstdio>\n#define ll long long\n#define rint register int\n#define max(a,b) ((a)>(b)?(a):(b))\nusing namespace std;\nconst int Mod=1e9+1;\nconst int M=1e5+10;\nbool flag[M]; ll ans=1;\nint n,f[25][1<<20],map[25][25];\ninline ll calc(rint x){\n    rint i,j,m=1,o=1,k,limit[20];\n    for(map[1][1]=x,i=1;i<=20;++i){\n        if(i>1){ //\u5bf9\u7b2c\u4e00\u5217\u8fdb\u884c\u5355\u72ec\u7684\u5904\u7406(\u8fb9\u754c\u95ee\u9898) \n            if(map[i-1][1]*2>n) break;\n            map[i][1]=map[i-1][1]*2;\n            flag[map[i][1]]=1;\n        }\n        for(m=i,j=2;j<=20;++j){\n            if(map[i][j-1]*3>n) break;\n            o=max(o,j);\n            map[i][j]=map[i][j-1]*3;\n            flag[map[i][j]]=1;\n        }\n    }\n    // \u8fd9\u91cc\u662f\u5bf9\u77e9\u9635\u4e2d\u6bcf\u4e00\u884c\u7684\u8fb9\u754c\u7684\u5904\u7406,\n\t//\u56e0\u4e3a\u6709\u4e0d\u80fd\u5927\u4e8e n \u7684\u9650\u5236,\u6bcf\u4e00\u884c\u7684\u53f3\u8fb9\u754c\u5e76\u4e0d\u662f\u56fa\u5b9a\u7684 \n    for(i=1;i<=m;++i){ //\u679a\u4e3e\u884c \n        for(j=1;j<=o;++j)  //\u679a\u4e3e\u5217 \n        \tif(!map[i][j]) break;\n        \telse map[i][j]=0; \n        for(limit[i]=0;j<=o;++j)  //limit[i] \u8868\u793a\u77e9\u9635\u4e2d\u7b2c i \u884c\u7684\u8fb9\u754c \n\t\t\tlimit[i]|=(1<<(o-j));\n    }\n    \n    for(j=0;j<(1<<o);++j) //\u72b6\u538b\u9884\u5904\u7406\u7b2c\u4e00\u884c\u53ef\u884c\u7684\u72b6\u6001 \n    \tif(!(j&(j<<1))&&!(j&(j>>1))&&!(limit[1]&j)) f[1][j]=1;\n    for(i=2;i<=m;++i)\n\t  for(j=0;j<(1<<o);++j)  //\u679a\u4e3e\u5f53\u524d\u884c\u7684\u72b6\u6001 \n        if(!(j&(j<<1))&&!(j&(j>>1))&&!(limit[i]&j)) //\u4e0d\u80fd\u8d85\u8fc7\u8fb9\u754c \n          for(f[i][j]=0,k=0;k<(1<<o);++k) //\u679a\u4e3e\u4e0a\u4e00\u884c\u7684\u72b6\u6001 \n            if(!(k&(k<<1))&&!(k&(k>>1))&&!(limit[i-1]&k)&&!(k&j)) //\u5224\u65ad\u662f\u5426\u53ef\u884c \n              f[i][j]=(f[i][j]+f[i-1][k])%Mod;  //\u65b9\u6848\u6570\u7d2f\u52a0 \n    int sum=0;\n    for(i=0;i<(1<<o);++i)\n      if(!(i&(i<<1))&&!(i&(i>>1))&&!(i&limit[m])) sum+=f[m][i]; //\u5bf9\u603b\u65b9\u6848\u6570\u8fdb\u884c\u7d2f\u52a0 \n    return sum;\n}\nint main(){\n    scanf(\"%d\",&n);\n    for(rint i=1;i<=n;++i) if(!flag[i])  //\u5982\u679c\u5df2\u7ecf\u5728\u4e4b\u524d\u7684\u77e9\u9635\u4e2d\u51fa\u73b0\u8fc7\u4e86\u5c31\u4e0d\u7528\u518d\u5904\u7406\u4e86 \n    \tans=(ans*calc(i))%Mod; //ans \u4e58\u4e0a \u5f53\u524d\u65b9\u6848\u6570 \n    printf(\"%lld\\n\",ans);\n}\n```",
        "postTime": 1531556210,
        "uid": 38576,
        "name": "J\u03bcdge",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "   \n   \u8bb0 **g[x]** \u8868\u793a\u5c06x\u4e2d\u76842,3\u56e0\u5b50\u53bb\u9664\u540e\u5f97\u5230\u7684\u503c\u3002\uff08\u9664\u53bb**\u6240\u6709**\u76842\uff0c3\u56e0\u5b50\uff09\n   \n   \u82e5**g[x]!=g[y]**\uff0c\u90a3\u4e48x\u4e0ey\u4e92\u4e0d\u5f71\u54cd\u3002\n   \n   \u56e0\u4e3a\uff1a\u6b64\u65f6x\u4e0d\u53ef\u80fd\u662fy\u7684\u4e8c\u500d\u6216\u4e09\u500d\u6570\uff08\u5047\u5b9ax > y\uff09,\n   \n   \u4e3e\u4e2a\u4f8b\u5b50\uff1a20\u548c18\uff0c\u9664\u53bb\u6240\u6709\u76842\uff0c3\u56e0\u5b50\u540e\u53d8\u4e3a 5 \u548c 1\u3002 \u663e\u7136\u4ed6\u4eec\u4e0d\u4e92\u76f8\u5f71\u54cd\n   \n   \u90a3\u4e48\uff0c\u5bf9\u4e8e\u4e92\u76f8\u6709\u5f71\u54cd\u7684\u4e00\u7ec4\u6570\uff0c**\u4e00\u5b9a**\u80fd\u8868\u793a\u6210**q * 2^a * 3^b(q\u4e3a\u5e38\u6570)\u3002**\n \n   \u6bcf\u79cdq\u5206\u522b\u6c42\u89e3\uff0c\u518d\u6839\u636e\u4e58\u6cd5\u539f\u7406\u76f8\u4e58\u5373\u53ef\u3002\n   \n####    \u5b9e\u73b0\uff1a\n   \n \u5f53 q=1 \u65f6\n        \n   \u6211\u4eec\u53ef\u4ee5\u4ee5a\uff0cb\u4e3a\u884c\u5217\u753b\u6210\u4e00\u4e2a\u68cb\u76d8 \u5373\n   \n   1 * 2^0 * 3^0  \u30011 * 2^0 * 3^1 \u30011 * 2^0 * 3^2 \u2026\u2026\n   \n   1 * 2^1 * 3^0  \u30011 * 2^1 * 3^1 \u30011 * 2^1 * 3^2 \u2026\u2026\n   \n   1 * 2^2 * 3^0  \u30011 * 2^2 * 3^1 \u30011 * 2^2 * 3^2 \u2026\u2026\n   \n   1 * 2^2 * 3^0  \u30011 * 2^2 * 3^1 \u30011 * 2^2 * 3^2 \u2026\u2026\n   \n   \u2026\u2026\n   \n   \u6bcf\u884c\u5927\u5c0f\u4e0d\u8d85\u8fc7 n\n   \n   n\u7684 \u8303\u56f4 n<=100000\n   \n   \u5728\u8fd9\u4e2a\u8303\u56f4\u5185\uff0c\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\uff08\u6253\u4e2a\u8868\u4e5f\u53ef\u4ee5\uff09\uff0c\u6bcf\u884c\u7684\u4e2a\u6570**\u5f88\u5c11**\uff08\u4e0d\u5230\u4e8c\u5341\uff09\u3002\n   \n   \u5982\u679c\u4f60\u5bf9\u72b6\u6001\u538b\u7f29dp\u6bd4\u8f83\u719f\u6089\uff0c\u5c31\u8054\u60f3\u5230\u72b6\u538b\u7ecf\u5178\u5957\u8def\u3002\n   \n   **\u5728\u505a\u9898\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u67d0\u4e00\u4fe1\u606f\u79cd\u7c7b\u6570\u5f88\u5c11\u3002**\n   \n  \u5f53q>1 \u65f6\uff0c\u7b49\u540c\u4e8eq'= 1,n'=n/q \u3002\n  \n  \u56e0\u4e3a\uff1a\u6bcf\u884c\u7684\u6570\u8981\u6ee1\u8db3 q * 2^a * 3^b <= n \u79fb\u9879\u7b49\u540c\u4e8e 2^a * 3^b <=n/q\n  \n###   code: \n\n   ```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<ctime>\n#include<cstring>\nusing namespace std;\ninline int read(){\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-') f=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9'){\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\nconst int N=1e5+7;\nconst int p=1e9+1;\nint n,cnt_floor[20],cnt,cnt_status[20],status[20][150000];\nlong long fl[N],dp[20][150000];\nlong long ans=1;\ninline int judge(int x){\n\tif(x&(x<<1)) return 0;\n\tif(x&(x>>1)) return 0;\n\treturn 1;\n}\ninline int work(int x,int y){\n   if(x&y) return 0;\n   return 1; \n}\nint main(){\n\tn=read();\n\tfor(register int q=1;q<=n;q++){\n\t  if(q%2==0||q%3==0) continue;/*\u5982\u679cq\u662f2\uff0c3\u7684\u500d\u6570\uff0c\u5219q\u4e00\u5b9a\u88ab\u9009\u8fc7\n\t  \uff08\u6211\u4eec\u8981\u4fdd\u8bc1\u6bcf\u79cd\u6570\u53ea\u80fd\u9009\u4e00\u6b21\uff09*/ \n\t  \n\t  if(fl[n/q]){ /*\u5c0f\u526a\u679d\uff0c\u5f53n/q\u4e00\u6837\u65f6\uff0c\u4e0d\u91cd\u590d\u8ba1\u7b97*/ \n\t  \tans=(ans*fl[n/q])%p;\n\t  \tcontinue;\n\t  } \n\t  \n\t  int a3=1,cnt=0;\n\t  for(register int i=0;;i++){//\u66b4\u529b\u5904\u7406\u6bcf\u4e00\u884c\u7684\u4e2a\u6570 \n\t    int a2=1;\n\t    if(a3*a2>n/q) break;\n\t    cnt_floor[i+1]=0; cnt++;\n\t  \tfor(register int j=0;;j++){\n\t  \t\tif(a3*a2>n/q) break;\n\t  \t\telse  cnt_floor[i+1]++;\n\t  \t\ta2*=2;\n\t\t  }\n\t\t  a3*=3;\n\t   }\n\t   \n\t  int max1=0;\n\t  for(register int i=1;i<=cnt;i++)//\u627e\u51fa\u6240\u6709\u884c\u6700\u957f\u7684\u4e00\u884c\uff08\u5904\u7406\u4e0b\u9762\u5408\u6cd5\u72b6\u6001\u7528\u5230\uff09 \n\t    max1=max(cnt_floor[i],max1);\n\t    \n\t  for(register int i=1;i<=cnt;i++){/* \u4e00\u822c\u72b6\u6001\u538b\u7f29\u6211\u4eec\u4f1a\u63d0\u524d\u5904\u7406\u597d\u5408\u6cd5\u72b6\u6001\uff0c\n\t  \u53ef\u4ee5\u6709\u6548\u51cf\u5c0f\u65f6\u95f4\u590d\u6742\u5ea6*/ \n\t  \tcnt_status[i]=0;\n\t  \tfor(register int j=0;j<(1<<cnt_floor[i]);j++)\n\t     if(judge(j)) cnt_status[i]++,\n\t\t  status[i][cnt_status[i]]=j<<(max1-cnt_floor[i]);//\u884c\u5934\u5bf9\u9f50  \n\t  }\n\t  \n\t  for(register int i=1;i<=cnt_status[1];i++) dp[1][i]=1;//\u72b6\u538b \n\t  for(register int i=2;i<=cnt;i++){\n\t    for(register int k=1;k<=cnt_status[i];k++){\n\t    \tdp[i][k]=0;\n\t     for(register int j=1;j<=cnt_status[i-1];j++)\n\t  \t  if(work(status[i-1][j],status[i][k])) \n\t\t\tdp[i][k]=(dp[i][k]+dp[i-1][j])%p;\t\n\t\t}\n\t  }\n\t  \n\t  long long part_q=0;//\u8ba1\u7b97n/q\u4e0b\uff0c\u6240\u6709\u65b9\u6848\u6570 \n\t  for(register int i=1;i<=cnt_status[cnt];i++)\n\t   part_q=(part_q+dp[cnt][i])%p;\n\t  \n\t  ans=(ans*part_q)%p;//\u4e58\u6cd5\u539f\u7406 \n\t  \n\t  fl[n/q]=part_q;//\u6807\u8bb0 \n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n} \n```\n\n   \n   \n      ",
        "postTime": 1570179206,
        "uid": 96495,
        "name": "__Iron",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "\u66b4\u529b\u7684\u505a\u6cd5\u5c31\u662f\u76f4\u63a5\u679a\u4e3e $1$ ~ $2^n$ $-1$ \uff0c\u518d\u5224\u65ad\u8fd9\u4e2a\u6570\u5b57\u4ee3\u8868\u7684\u9009\u62e9\u65b9\u6848\u662f\u5426\u5408\u6cd5\uff0c\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\u3002\n\n\u4f9d\u65e7\u8003\u8651\u72b6\u538b\uff0c\u53d1\u73b0 $n<=100000$ \uff0c\u76f4\u63a5\u72b6\u538b\u663e\u7136\u4e0d\u53ef\u505a\uff0c\u90a3\u5c31\u8003\u8651\u51cf\u5c11\u72b6\u6001\u6570\u3002\n\n\u6839\u636e\u9898\u610f\uff0c\u5f53\u9009\u4e86\u4e00\u4e2a\u6570 $x$ \uff0c\u90a3\u4e48 $2x$ \uff0c $2x$ \u5c31\u4e0d\u80fd\u9009\uff0c\u4f46\u662f $4x$ \uff0c$6x$ \u7b49\u662f\u53ef\u4ee5\u9009\u7684\u3002\n\n\u90a3\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u7b49\u6bd4\u6570\u5217\uff0c\u516c\u6bd4\u4e3a $2$ \u6216 $3$ ,\u53ef\u4ee5\u5f97\u5230\u6570\u5217\u4e2d\u76f8\u90bb\u4e24\u9879\u4e0d\u80fd\u540c\u65f6\u9009\u5230\u3002\u8fd9\u6837\u4e00\u4e2a\u6570\u5217\u957f\u5ea6\u6700\u591a\u4e3a $18$ \u6216 $13$ \u3002\n\n\u6240\u4ee5\u6839\u636e\u9898\u610f\uff0c\u6784\u9020\u4e00\u4e2a\u77e9\u9635\uff0c\u6bcf\u4e00\u884c\u4e2d\u5404\u4e2a\u5143\u7d20\u6784\u6210\u4e00\u4e2a\u516c\u6bd4\u4e3a $3$ \u7684\u7b49\u6bd4\u6570\u5217\uff0c\u6bcf\u4e00\u5217\u4e2d\u5404\u4e2a\u5143\u7d20\u6784\u6210\u4e00\u4e2a\u516c\u6bd4\u4e3a $2$ \u7684\u7b49\u6bd4\u6570\u5217\u3002\u7ecf\u8ba1\u7b97\u5f97\u8fd9\u4e2a\u77e9\u9635\u7684\u89c4\u6a21\u6700\u5927\u4e3a $18*13$ \u3002\u7136\u540e\u5c31\u53ef\u4ee5\u72b6\u538bdp\u4e86\u3002\n\n\u8bbe $f[i][S]$ \u8868\u793a\u9009\u5230\u7b2c $i$ \u884c\uff0c\u5f53\u524d\u884c\u9009\u62e9\u72b6\u6001\u4e3a $S$ \u7684\u65b9\u6848\u6570\u3002\u90a3\u4e48\u663e\u7136\u8f6c\u79fb\u65b9\u7a0b\u4e3a $f[i][S]+=f[i-1][S']$ \uff0c$S$ \u4e0e $S'$ \u90fd\u4e3a\u5408\u6cd5\u72b6\u6001\u4e14 $S$ & $S'=0$ \u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u6ca1\u5728\u77e9\u9635\u4e2d\u51fa\u73b0\u7684\u5143\u7d20\u6784\u9020\u4e00\u4e2a\u65b0\u7684\u77e9\u9635\uff0c\u56e0\u4e3a\u4e24\u4e2a\u77e9\u9635\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u4e0d\u76f8\u540c\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4e58\u6cd5\u539f\u7406\u7edf\u8ba1\u7b54\u6848\u3002\n\n**\u4ee3\u7801**\n```pascal\nprogram ll;\nconst m=1000000001;\nvar n,i:longint;\n    ans:int64;\n    b:array[0..18] of longint;\n    a:array[1..18,1..18] of longint;\n    f:array[0..18,0..2048] of longint;\nfunction cal(x:longint):longint;\nvar i,j,k:longint;\nbegin\n  fillchar(b,sizeof(b),0);\n  a[1,1]:=x;\n  for i:=2 to 18 do\n  if a[i-1,1]*2<=n then\n  a[i,1]:=a[i-1,1]*2\n  else\n  a[i,1]:=n+1;\n  for i:=1 to 18 do\n  for j:=2 to 11 do\n  if a[i,j-1]*3<=n then\n  a[i,j]:=a[i,j-1]*3\n  else a[i,j]:=n+1;\n  for i:=1 to 18 do\n  for j:=1 to 11 do\n  if a[i,j]<=n then\n  b[i]:=b[i] or (1<<(j-1));\n  fillchar(f,sizeof(f),0);\n  f[0,0]:=1;\n  for i:=0 to 17 do\n  for j:=0 to b[i] do\n  if f[i,j]<>0 then\n  for k:=0 to b[i+1] do\n  if (j and k=0) and (k and (k>>1)=0) then\n  f[i+1,k]:=(f[i,j]+f[i+1,k]) mod m;\n  exit(f[18,0]);\nend;\nbegin\n  readln(n);\n  ans:=1;\n  for i:=1 to n do\n  if (i mod 2<>0) and (i mod 3<>0) then\n  ans:=ans*cal(i) mod m;\n  writeln(ans);\nend.\n```",
        "postTime": 1534380736,
        "uid": 32944,
        "name": "lotus_grow",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "\u672c\u849f\u84bb\u7684\u5c0f\u7ad9\uff1a[Newuser\u5c0f\u7ad9\uff1a\u96c6\u5408\u9009\u6570](http://www.newuser.top/2018/05/30/%e3%80%90hnoi2012%e9%9b%86%e5%90%88%e9%80%89%e6%95%b0%e3%80%91%e6%95%b0%e5%ad%a6%e6%9e%84%e9%80%a0%e7%8a%b6%e6%80%81%e5%8e%8b%e7%bc%a9/)\n\n\u6211\u4eec\u8003\u8651\u5c06\u8fd9\u4e9b\u6570\u5206\u5316\uff0c\u7531\u4e8e\u6bcf\u4e2a\u6570x\u662f\u5426\u53ef\u9009\u53ea\u4e0e (x/2) (x/3) (x*2) (x*3) \u6709\u5173\uff0c\u4e8e\u662f\u6211\u4eec\u8003\u8651\u5230\u8fd9\u4e2a\u53ef\u4ee5\u6784\u9020\u51fa\u4e00\u4e2a\u77e9\u9635\n\n\u30101*x\u3011\u30103*x\u3011\u30109*x\u3011 \u301027*x\u3011 \u3002\u3002\u3002\u3002\u3002\n\n\u30102*x\u3011\u30106*x\u3011 \u301018*x\u3011 \u2026\u2026.\n\n\u30104*x\u3011\u301012*x\u3011 \u301036*x\u3011\u2026..\n\n\u30108*x\u3011\u2026\u2026\n....\n\n\u4e5f\u5c31\u662f\u77e9\u9635\u7684\u56db\u5468\u5206\u522b\u662f\u6211\u4eec\u63d0\u5230\u7684\u90a3\u4e9b\u6709\u5173\u6570\uff0c\u8fd9\u6837\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e86\u5728\u77e9\u9635\uff08\u4e8b\u5b9e\u4e0a\u7531\u4e8e\u6709n\u7684\u9650\u5236\u5176\u5e94\u8be5\u4e3a\u4e00\u4e2a\u952f\u9f7f\u72b6\uff09\u91cc\u9762\u9009\u53d6\u4e0d\u76f8\u90bb\u5143\u7d20\u7684\u65b9\u6848\u6570\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u663e\u7136\u53ef\u89c1\uff0c\u4e00\u76f4\u4e583\uff0c\u957f\u5ea6\u4e0d\u4f1a\u8d85\u8fc711\uff0c\u5bbd\u5ea6\u4e5f\u4e0d\u4f1a\u592a\u591a\u3002\u6211\u4eec\u5177\u4f53\u89e3\u51b3\u7684\u65f6\u5019\u8fd0\u7528\u7c7b\u4f3c\u70ae\u5175\u9635\u5730[Luogu\u70ae\u5175\u9635\u5730](https://www.luogu.org/problemnew/show/P2704)Luogu\u70ae\u5175\u9635\u5730\u7684\u601d\u8def\u641e\u4e00\u4e2aDP\u6216\u8005\u8bb0\u5fc6\u5316\u641c\u7d22\uff08\u4e8b\u5b9e\u4e0a\u4ee3\u7801\u80fd\u529b\u5f88\u5f31\u7684\u6211\u53ea\u5199\u5f97\u51fa\u8bb0\u5fc6\u5316\uff09\u5c31\u53ef\u4ee5\u4e86\u3002\u7531\u4e8e\u5bf9\u4e8e\u4e00\u4e2a\u77e9\u9635\u5176\u4f1a\u6709\u8bb8\u591a\u6570\u6ca1\u6709\u5305\u542b\u8fdb\u53bb\u3002\u800c\u5bf9\u4e8e\u8fd9\u4e9b\u6ca1\u6709\u5305\u542b\u7684\uff0c\u6211\u4eec\u5bf9\u5176\u4e00\u4e2a\u4e00\u4e2a\u5efa\u7acb\u77e9\u9635\u7136\u540eDP\u3002\n\n\u7531\u4e8e\u8fd9\u4e9b\u5f7c\u6b64\u77e9\u9635\u4e4b\u95f4\u7684\u6570\u4e0d\u4f1a\u91cd\u590d\uff0c\u4e5f\u5373\u6070\u597dn\u4e2a\u6570\u5efa\u7acb\u5b8c\u6240\u6709\u77e9\u9635\u3002\u800c\u5f7c\u6b64\u77e9\u9635\u4e4b\u95f4\u4e0d\u4f1a\u6709\u8054\u7cfb\uff08\u6211\u8fd9\u8fb9\u9009\u4e86\u65b9\u6848\u5bf9\u65b9\u77e9\u9635\u7684\u65b9\u6848\u6570\u4e0d\u53d7\u5f71\u54cd\uff09\u6211\u4eec\u76f4\u63a5\u4e58\u6cd5\u539f\u7406\u5c06\u6240\u6709\u77e9\u9635\u65b9\u6848\u6570\u76f8\u4e58\u5373\u53ef\u3002\n\n\u7a0d\u5fae\u5361\u5361\u5e38\u4e5f\u5c31\u8fc7\u53bb\u4e86\uff08\u5f53\u8fd9\u4e00\u6392\u7684\u67d0\u4e2a\u6570\u8d85\u8fc7n\uff0c\u8fd9\u4e00\u6392\u63a5\u4e0b\u6765\u7684\u6570\u5c31\u4e0d\u9700\u8981\u6784\u9020\u4e86\uff09\n\n```cpp\n//%%%\n#include<bits/stdc++.h>\ntypedef long long ll;\nusing namespace std;\nconst ll mod = 1000000001LL;\nll n,S;\nll dp[20][1<<12];\nll jz[20][20];\nbool mark[20][1<<12];\nll pos[20];\nll ans=1;\nbool bb[100005];\nbool check(ll now,ll last,ll pai)\n{\n\tif( ( !(now&last) ) && ( (pos[pai]|now) == pos[pai] ) && ( !(now&(now>>1)) ) )   return true;\n\telse return false;\n}\nll dfs(ll &limit,ll pai,ll now)\n{\n\tif(mark[pai][now]) return dp[pai][now]%mod;\n\tmark[pai][now]=1;\n\tif(pai==limit) return dp[pai][now]=1;\n\tll sum=0; \n\tfor(ll i=S;i>=0;i--)\n\t{\n\t\tif(check(i,now,pai+1))\n\t\t{\n\t\t\tsum = (sum + dfs(limit,pai+1,i))%mod;\n\t\t}\n\t}\n\treturn dp[pai][now] = sum;\n}\nvoid gzdp(ll x)\n{\n\tmemset(pos,0,sizeof pos);\n\tll chang=x,cc=1,kuan=x,kk=1;\n\twhile(chang*3<=n) ++cc,chang*=3;\n\twhile(kuan*2<=n) ++kk,kuan*=2;\n\tjz[1][1]=x; bb[x]=1;\n\tfor(int i=2;i<=cc;i++) jz[1][i]=jz[1][i-1]*3,bb[jz[1][i]]=1;\n\tfor(int i=2;i<=kk;i++)\n\t{\n\t\tjz[i][1]=jz[i-1][1]*2; bb[jz[i][1]]=1; pos[i]|=1;\n\t\tfor(int j=2;j<=cc;j++)\n\t\t{\n\t\t\tjz[i][j]=jz[i][j-1]*3;\n\t\t\tif(jz[i][j]>n) break;\n\t\t\telse \n\t\t\t{\n\t\t\t\tbb[jz[i][j]]=1;\n\t\t\t\tpos[i] |= (1<<(j-1));\n\t\t\t}\n\t\t}\n\t}\n\tS=(1<<cc)-1; pos[1]=S;\n\tll sum = 0;\n\tfor(int s=0;s<=S;s++)\n\t{\n\t\tif(check(s,0,1)) sum = ( sum + dfs( kk , 1,s ) )%mod;\n\t}\n\tans = ans * sum%mod;\n\tfor(ll i=1;i<=kk;i++)\n\t{\n\t\tfor(ll j=0;j<=S;j++)\n\t\t{\n\t\t\tdp[i][j]=0;\n\t\t\tmark[i][j]=0;\n\t\t}\n\t}\n}\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(ll i=1;i<=n;i++)\n\t{\n\t\tif(!bb[i]) gzdp(i);\n\t}\n\tprintf(\"%lld\",ans);\n}\n```",
        "postTime": 1527673912,
        "uid": 55343,
        "name": "Newuser",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3226 \u3010[HNOI2012]\u96c6\u5408\u9009\u6570\u3011"
    },
    {
        "content": "\u9898\u610f\uff1ahttps://www.luogu.org/problem/P3226\n\n\u4e0a\u6765\u89c9\u5f97\u662f\u4e2af[i]\u8868\u793a\u524di\u4e2a\u6570\u7684\u65b9\u6848\u6570,\u7528\u7ec4\u5408\u6570\u8003\u8651\u6dfb\u52a0i\u591a\u51fa\u7684\u65b9\u6848\u6570,\u7ed3\u679c\u4e0d\u4f1a\u4e86~\n\n\u6b63\u89e3\u662f\u4e2a\u795e\u4ed9\u6784\u9020\n\n\u5148\u770b\u4e2a\u77e9\u9635\uff1a\n\n```\n1 2 4 8...\n\n3 6 12 24...\n\n9 18 36 72...\n\n... ... ...\n```\n\u5bb9\u6613\u53d1\u73b0\u540c\u4e00\u884c\u6bcf\u4e00\u4e2a\u6570\u53f3\u8fb9\u7684\u6570\u662f\u5b83\u7684\u4e24\u500d,\u540c\u4e00\u5217\u6bcf\u4e2a\u6570\u4e0b\u8fb9\u7684\u6570\u662f\u5b83\u7684\u4e09\u500d,\u6bcf\u4e00\u884c\u957f\u5ea6\u5c0f\u4e8elog2(n)\uff0c\u6bcf\u4e00\u5217\u957f\u5ea6\u5c0f\u4e8elog3(n)\n\n\u8fd9\u4e2a\u77e9\u9635\u6709\u4ec0\u4e48\u7528?\n\n\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e\u77e9\u9635\u4e2d\u7684\u4e00\u4e2a\u6570a[i][j]\uff0ca[i][j+1]\u548ca[i+1][j]\u663e\u7136\u90fd\u4e0d\u80fd\u9009,\u5047\u8bbe\u8fd9\u4e2a\u77e9\u9635\u5305\u542b\u4e861~n\u4e2d\u7684\u6240\u6709\u6570,\u90a3\u4e48\u663e\u7136\u6709\u72b6\u538bDP:\n\nf[i][j]->\u524di\u884c,\u7b2ci\u884c\u72b6\u6001\u4e3aj\u7684\u65b9\u6848\u6570\n\nf[i][j]+=f[i-1][k] (j,k\u5408\u6cd5,j&k==0)\n\n\u662f\u4e0d\u662f\u53ef\u505a\u4e86~\n\n\u4f46\u662f\u8fd9\u4e00\u4e2a\u77e9\u9635\u53ef\u80fd\u4e0d\u5305\u542b1~n\u4e2d\u7684\u6240\u6709\u6570,\u600e\u4e48\u529e\u5462?\n\n\u5f00\u4e00\u4e2avis\u6570\u7ec4\u8bb0\u5f55\u6570x\u662f\u5426\u5728\u77e9\u9635\u51fa\u73b0\u8fc7,\u5982\u679cvis[x]==0,\u5c31\u4ee5x\u4e3a\u5de6\u4e0a\u89d2,\u518d\u5efa\u4e00\u4e2a\u77e9\u9635,\u6c42\u89e3\u4e00\u904d\u4e58\u5230\u7b54\u6848\u4e2d,\u663e\u7136\u65b0\u77e9\u9635\u4e2d\u7684\u6570\u4e0d\u4f1a\u5728\u4e4b\u524d\u51fa\u73b0\u8fc7(\u7528\u5206\u89e3\u8d28\u56e0\u6570\u7684\u65b9\u6cd5\u8bc1\u5c31\u53ef\u4ee5\u4e86)\n\ncode:\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define re register\n#define int long long\nconst int maxn=100010;\nconst int mod=1000000001; \nint n,ans=1,res,last;\nint line[20],lim[20];\nint a[20][20],f[2][1<<20];\nbool check[1<<20],vis[maxn];\ninline void build(int x)\n{\n\tfor(re int i=1;i<=11;i++)\n\t{\n\t\tif(i==1)a[i][1]=x;\n\t\telse a[i][1]=a[i-1][1]*3;\n\t\tif(a[i][1]>n)break;\n\t\tlast=i,line[i]=1,vis[a[i][1]]=1;\n\t\tfor(re int j=2;j<=18;j++)\n\t\t{\n\t\t\ta[i][j]=a[i][j-1]*2;\n\t\t\tif(a[i][j]>n)break;\n\t\t\tline[i]=j;vis[a[i][j]]=1;\n\t\t}\n\t\tlim[i]=(1<<line[i])-1;\n\t}\n\t//printf(\"case::%d :%d\\n\",x,last);\n}\ninline void solve(int x)\n{\n\tres=0;int now=1;\n\tfor(re int i=0;i<=lim[1];i++)f[1][i]=check[i];\n\tfor(re int i=2;i<=last;i++)\n\t{\n\t\t/*for(int j=0;j<=lim[i-1];j++)printf(\"%d \",f[now^1][j]);\n\t\tputs(\"\");*/\n\t\tnow=i&1;\n\t\tfor(re int j=0;j<=lim[i];j++)\n\t\t{\n\t\t\tf[now][j]=0;\n\t\t\tif(!check[j])continue;\n\t\t\tfor(re int k=0;k<=lim[i-1];k++)\n\t\t\t{\n\t\t\t\tif(check[k]&&!(k&j))f[now][j]=(f[now][j]+f[now^1][k])%mod;\t\n\t\t\t}\n\t\t}\n\t}\n\t//printf(\"now::%d\\n\",now);\n\t//for(int i=0;i<=lim[last];i++)if(check[i])printf(\"%d\\n\",i);\n\tfor(re int i=0;i<=lim[last];i++)if(check[i])res=(res+f[now][i])%mod;\n\t//printf(\"res::%d\\n\",res);\n}\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(re int i=0;i<(1<<18);i++)check[i]=((i<<1)&i)?0:1;\n\tfor(re int i=1;i<=n;i++)\n\t{\t\n\t\tif(vis[i])continue;\n\t\tbuild(i),solve(i);\n\t\tif(res)ans=(ans*res)%mod;\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n} \n```\n\n\n",
        "postTime": 1566052958,
        "uid": 145441,
        "name": "nofind",
        "ccfLevel": 6,
        "title": "P3226 [HNOI2012]\u96c6\u5408\u9009\u6570(\u6784\u9020+\u72b6\u538bDP)"
    }
]
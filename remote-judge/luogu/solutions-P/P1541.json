[
    {
        "content": "\n[P1541 \u4e4c\u9f9f\u68cb](https://www.luogu.org/problemnew/show/P1541)\n\n\u8fd9\u4e2a\u9898\u53ef\u4ee5\u8bf4\u8fd0\u7528\u4e86\u80cc\u5305\u7684\u601d\u60f3:\n\n\u5f00\u7684\u4e3b\u8981\u53d8\u91cf\uff1a\n\n1.F[a][b][c][d]:\u8868\u793a\u4f60\u51fa\u4e86a\u5f20\u722c\u884c\u724c1\uff0cb\u5f20\u722c\u884c\u724c2\uff0cc\u5f20\u722c\u884c\u724c3\uff0cd\u5f20\u722c\u884c\u724c4\u65f6\u7684\u5f97\u5206\n\n2.g[x]:\u8868\u793a\u724cx\u4e00\u5171\u6709\u591a\u5c11\u5f20\n\n\u9898\u5e72\u4e2d\u8bf4\u5982\u4f55\u51fa\u724c,\u90a3\u6211\u4eec\u5c31\u4e0d\u59a8DP\u4e00\u4e0b\u6bcf\u4e00\u79cd\u724c\u7684\u51fa\u724c\u5f20\u6570\n\n\u521d\u59cb\u5316\uff1a\n\n```\nF[0][0][0][0]=num[1];\n```\n\n\u663e\u7136,\u4e4c\u9f9f\u5f00\u59cb\u65f6\u5728num[1],\u9898\u4e2d\u8bf4\u4e4c\u9f9f\u68cb\u5b50\u81ea\u52a8\u83b7\u5f97\u8d77\u70b9\u683c\u5b50\u7684\u5206\u6570,\u6545\u672a\u51fa\u724c\u65f6\uff08F[0][0][0][0]\uff09\u5206\u6570\u4e3anum[1]\n\n\u4e4b\u540e\u8fb9\u8f93\u5165\u8fb9\u5b58\u6bcf\u4e00\u79cd\u724c\u7684\u5f20\u6570\uff08\u8f93\u5165\u6570\u636e\u7b2c3\u884c:M\u4e2a\u6574\u6570\uff0cb1b2\u2026\u2026bM\uff0c\u8868\u793aM\u5f20\u722c\u884c\u5361\u7247\u4e0a\u7684\u6570\u5b57,\u6545\u53611~\u53614\u5f20\u6570\u4e00\u5b9a\uff09:\n\n```cpp\nfor(int i=1;i<=m;i++)\n{\n\tcin>>x;\n\tg[x]++;\n}\n```\n\n\u4e4b\u540e\u4fbf\u53ef\u4ee5\u5f00\u59cbDP\u4e86:\n\n\u8d77\u59cb\u72b6\u6001F[0][0][0][0]=num[1]\uff0c\u5373\u4e0d\u51fa\u4efb\u4f55\u722c\u884c\u5361;\u4e4b\u540e\u5bf9\u4e8e\u6bcf\u4e00\u5f20\u5361\u7247\uff0c\u6211\u90fd\u53ef\u4ee5\u9009\u62e9\u653e\u4e0e\u4e0d\u653e\uff0c\nE:\u8bbe\u5f53\u524d\u653e\u7684\u53611\u6570\u91cf\u4e3aa\uff0c\u53612\u6570\u91cf\u4e3ab\uff0c\u53613\u6570\u91cf\u4e3ac\uff0c\u53614\u6570\u91cf\u4e3ad\uff08\u4ee5\u4e0b\u51fa\u73b0a~d\u5747\u4e3a\u8fd9\u4e2a\u610f\u601d\uff09\uff0c\u5219\u5bf9\u4e8e\u5361\u4e00:\n\n\u6bd4\u8f83\u5361\u4e00\u7684\u653e\u4e0e\u4e0d\u653e,\u53ea\u9700\u51b3\u7b56\u5361\u4e00\u7684\u653e\u4e0e\u4e0d\u653e\uff0c\u5373\u53d6F[a][b][c][d],F[a-1][b][c][d]+num[r]\u7684\u6700\u5927\u503c\u3002\u53c8\u7531\u4e8ea\u6709\u4e00\u5b9a\u6570\u91cf,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u5173\u4e8ea\u7684\u8f6c\u79fb\u65b9\u7a0b:\n\n```cpp\n\tF[a][b][c][d]=max(F[a][b][c][d],F[a-1][b][c][d]+num[r])\n```\n\u5176\u4e2dr=1+a+b*2+c*3+d*4(\u81f3\u4e8er\u5728a+b*2+c*3+d*4\u52a0\u4e00\u539f\u56e0\u89c1\u540e)\n\nDP \u6570\u91cfa\uff1a\n\n```cpp\nfor(int a=0;a<=g[1];a++)\n{\n\tint r=1+a+b*2+c*3+d*4;\n\tif(a!=0)\tF[a][b][c][d]=max(F[a][b][c][d],F[a-1][b][c][d]+num[a+b*2+c*3+d*4])\n}\n```\n\u8fd9\u4e0d\u5c31\u662f\u4e2a\u201c\u7269\u54c1\u5360\u7684\u7a7a\u95f4\u201d\u4e3a1\uff0c\u201c\u4ef7\u503c\u201d\u4e3anum[r]\u7684\u591a\u91cd\u80cc\u5305\u561b\uff01\uff01\n \n \u81f3\u4e8e\u8fd9\u4e2a(a!=0)\uff0c\u663e\u7136\uff0c\u4f60\u8981\u662f\u8c03\u7528F[a-1][b][c][d]\uff0c\u80af\u5b9a\u5f97\u4fdd\u8bc1a-1>=0\u5427\u3002a\u663e\u7136\u4f5c\u4e3a\u53611\u4e2a\u6570\u4e0d\u53ef\u80fd<0,\u6545\u53d6(a!=0)\u5373\u53ef\n    \n\u6839\u636e\u591a\u7ef4\u80cc\u5305\u7684\u601d\u60f3\uff0c\u80cc\u5305DP\u51e0\u4e2a\u201c\u4ef7\u503c\u201d\uff08\u5373\u722c\u884c\u724c\u79cd\u7c7b\uff09\u5f00\u51e0\u7ef4\u5373\u53ef,\u6545\n\u8f6c\u79fb\u65b9\u7a0b\u4e3a:\n```cpp\n\t\tF[a][b][c][d]=max(F[a-1][b][c][d],F[a][b-1][c][d],F[a][b][c-1][d],F[a][b][c][d-1])+num[1*a+2*b+3*c+4*d]\n```\n\n\u6700\u540eDP\u51fa\u6765\u7684F[g[1]][g[2]][g[3]][g[4]]\u5373\u4e3a\u7b54\u6848\u3002\n\n\nDP\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n\tfor(int a=0;a<=g[1];a++)\n\t\tfor(int b=0;b<=g[2];b++)\n\t\t\tfor(int c=0;c<=g[3];c++)\n\t\t\t\tfor(int d=0;d<=g[4];d++)\n\t\t\t\t{\n\t\t\t\t\tint r=1+a+b*2+c*3+d*4;//\u5343\u4e07\u5343\u4e07\u522b\u5fd8\u4e86\u52a0\u4e00,\u56e0\u4e3a\u4e4c\u9f9f\u4ecenum[1]\u51fa\u53d1,\u8bbe\u524d\u8fdbi\u6b65\uff0c\u5219\u5230\u8fbenum[i+1],\u6211\u5c31\u662f\u56e0\u4e3a\u8fd9\u8c03\u4e86\u4e00\u4e2a\u5c0f\u65f6\u6b7b\u6d3b\u6ca1\u627e\u51fa\u6bdb\u75c5 \n\t\t\t\t\tif(a!=0)\tF[a][b][c][d]=max(F[a][b][c][d],F[a-1][b][c][d]+num[r]); //a!=0\u539f\u56e0\u89c1\u4e0a\n\t\t\t\t\tif(b!=0)    F[a][b][c][d]=max(F[a][b][c][d],F[a][b-1][c][d]+num[r]);\n\t\t\t\t\tif(c!=0)    F[a][b][c][d]=max(F[a][b][c][d],F[a][b][c-1][d]+num[r]);\n\t\t\t\t\tif(d!=0)\tF[a][b][c][d]=max(F[a][b][c][d],F[a][b][c][d-1]+num[r]);\n\t\t\t\t}\t\n```\n\n\u5728for\u5faa\u73af\u4e2d\u5c06F[a][b][c][d]\u4e0eF[a-1][b][c][d]+num[1*a+2*b+3*c+4*d],F[a][b-1][c][d]+num[1*a+2*b+3*c+4*d],F[a][b][c-1][d]+num[1*a+2*b+3*c+4*d],F[a][b][c][d-1]+num[1*a+2*b+3*c+4*d]\u9010\u4e2a\u6bd4\u8f83\uff0c\u5b9e\u73b0\u4e86\u8f6c\u79fb\u65b9\u7a0b\u7684\u66f4\u65b0(c++\u4e2dmax\u51fd\u6570\u8c8c\u4f3c\u53ea\u80fd\u6bd4\u8f83\u4e24\u4e2a\u6570)\n\n\u5f53\u7136\uff0c\u6211\u4eec\u77e5\u9053\u603b\u724c\u6570n\u548c\u6bcf\u79cd\u5361\u7684\u5f20\u6570\uff0c\u5219\u5b9e\u9645\u5199\u4ee3\u7801\u65f6\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u8003\u8651\u51cf\u4e00\u7ef4,\u53ef\u6211\u81f3\u4eca\u8fd8\u662f\u6ca1\u60f3\u8d77\u6765\u3002\u3002\u3002\u3002\u3002\u3002\uff08\u6211\u8fd8\u662f\u4e2a\u849f\u84bb\uff09\n\nAC\u4ee3\u7801:\n\n```\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nconst int MAXN=41;\nint F[MAXN][MAXN][MAXN][MAXN],num[351],g[5],n,m,x;\nint main()\n{\n    ios::sync_with_stdio(false);\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n        cin>>num[i];\n    F[0][0][0][0]=num[1];\n    for(int i=1;i<=m;i++)\n    {\n        cin>>x;\n        g[x]++;\n    }\n    for(int a=0;a<=g[1];a++)\n        for(int b=0;b<=g[2];b++)\n            for(int c=0;c<=g[3];c++)\n                for(int d=0;d<=g[4];d++)\n                {\n                    int r=1+a+b*2+c*3+d*4;\n                    if(a!=0)\tF[a][b][c][d]=max(F[a][b][c][d],F[a-1][b][c][d]+num[r]);\n                    if(b!=0)    F[a][b][c][d]=max(F[a][b][c][d],F[a][b-1][c][d]+num[r]);\n                    if(c!=0)    F[a][b][c][d]=max(F[a][b][c][d],F[a][b][c-1][d]+num[r]);\n                    if(d!=0)\tF[a][b][c][d]=max(F[a][b][c][d],F[a][b][c][d-1]+num[r]);\n                }\t\n    cout<<F[g[1]][g[2]][g[3]][g[4]];\n    return 0;\n}\n```\n\n\n",
        "postTime": 1518350429,
        "uid": 53774,
        "name": "\u5403\u74dc\u7fa4\u4f17syc",
        "ccfLevel": 0,
        "title": "P1541 \u4e4c\u9f9f\u68cb"
    },
    {
        "content": "### \u60f3\u4e86\u60f3\u8fd8\u662f\u6765\u5199\u4e00\u53d1\u9898\u89e3\u5427\n\n\u9996\u5148\u8bf4\u4e00\u4e0b\u601d\u8def\uff0c\u4e00\u5f00\u59cb\u6211\u89c9\u5f97\u8fd9\u9898\u7528\u641c\u7d22+\u56de\u6eaf\u518d\u914d\u4e2a\u8bb0\u5fc6\u5316\u76f4\u63a5\u5c31\u80fdA\uff0c\u6bd5\u7adf\u9898\u76ee\u4e2d\u6709\u8981\u6c42 \u201c\u6bcf\u5f20\u5361\u7247\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u201d\uff0c\u6bcf\u6b21\u641c\u7d22\u9700\u8981\u7528\u54ea\u4e00\u5f20\u5361\u7247\u5c31\u53ef\u4ee5\u89e3\u51b3\u3002\n\n\u7ed3\u679c\u4e8b\u5b9e\u8bc1\u660e\u6211\u8fd8\u662f\u592a\u5929\u771f\u4e86\uff0c\u5982\u679c\u7528\u641c\u7d22\u7684\u8bdd\uff0c\u5c31\u7b97\u4e0dWA\u4e5f\u4f1aT\u3002\n\n~~\u6240\u4ee5\u8bf4\u4e56\u4e56\u52a8\u89c4\u5427\u8fd9\u9898\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u8fd8\u7b97\u597d\u63a8~~\n\n**\u5bf9\u4e8e\u5982\u4f55\u5199\u9898\uff0c\u6211\u4e5f\u5c31\u4e0d\u591a\u8bf4\u4e86\uff0c\u524d\u9762\u5df2\u7ecf\u6709\u5f88\u591adalao\u628a\u52a8\u89c4\u548c\u53e6\u4e00\u79cd\u9012\u5f52\u6c42\u89e3\u7684\u65b9\u6cd5\u53d1\u4e86\uff0c\u6211\u5c31\u4e3b\u8981\u8bf4\u4e00\u4e0b\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u600e\u4e48\u63a8\u5427\uff0c\u6bd5\u7adf\u8fd9\u79cddp\u9898\u6700\u91cd\u8981\u7684\u90e8\u5206\u5c31\u662f\u8981\u4f1a\u63a8\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b**\n\n\n\u9996\u5148\uff0c\u6211\u4eec\u8981\u5f04\u61c2\u9898\u76ee\uff0c\u60f3\u6e05\u695a\u6c42\u89e3\u8fc7\u7a0b ~~(\u5e9f\u8bdd\u9898\u76ee\u90fd\u4e0d\u61c2\u62ff\u5934\u5199\u5417~~\n\n\u770b\u5b8c\u9898\u76ee\u540e\uff0c\u6211\u4eec\u6ce8\u610f\u4ee5\u4e0b\u51e0\u4e2a\u5173\u952e\u70b9\uff1a\n\n### \u2460\uff1a\u4ece\u8d77\u70b9\u8d70\u5230\u7ec8\u70b9\uff0c\u6bcf\u6b21\u53ea\u4f1a\u524d\u8fdb\u4e0d\u4f1a\u540e\u9000\n\n### \u2461\uff1a\u6240\u6709\u5361\u7247\u4e00\u5b9a\u7528\u5b8c\u4e14\u7528\u5b8c\u540e\u6b63\u597d\u5230\u8fbe\u7ec8\u70b9\n\n### \u2462\uff1a\u5361\u7247\u53ea\u6709\u56db\u79cd\uff0c\u4e14\u6570\u91cf\u6700\u591a\u4e5f\u53ea\u670940\n\n### \u2463\uff1a\u77e5\u9053\u4f7f\u7528\u54ea\u51e0\u5f20\u5361\u7247\u540e\uff0c\u6211\u4eec\u5c31\u80fd\u63a8\u51fa\u73b0\u5728\u5230\u4e86\u54ea\u4e00\u4e2a\u4f4d\u7f6e\n\n\u597d\uff0c\u628a\u8fd9\u51e0\u4e2a\u5173\u952e\u5730\u65b9\u6ce8\u610f\u5230\u4e86\uff0c\u5c31\u53ef\u4ee5\u5411\u4e0b\u63a8\u65b9\u7a0b\u4e86\n\n\u9996\u5148\u7b2c\u4e00\u4e2a\u6761\u4ef6\uff1a\u5b83\u544a\u8bc9\u6211\u4eec\u662f\u5728\u7528\u524d\u9762\u7684\u6761\u4ef6\u63a8\u540e\u9762\uff0c\u4e5f\u5c31\u662f\u8bf4\u4f60\u5199for\u5faa\u73af\u65f6\uff0c\u662f\u4ece1\u5230n\u800c\u4e0d\u662f\u4ecen\u52301\uff0c\u6bcf\u6b21\u72b6\u6001\u8f6c\u79fb\u4e5f\u662f\u7c7b\u4f3cf[i]=max(f[i-1],f[i])\u7684\u5f62\u5f0f\u800c\u4e0d\u662ff[i+w[i]]+=f[i]\u7684\u5f62\u5f0f\n\n\u7136\u540e\u7b2c\u4e8c\u4e2a\u6761\u4ef6\uff0c\u544a\u8bc9\u4f60\u63a8\u5230\u6700\u540e\uff0c\u76f4\u63a5\u8f93\u51faf[n]\u5c31\u53ef\u4ee5\u4e86\uff0c\u67d0\u4e9b\u95ee\u9898\u6ca1\u6709\u8fd9\u4e2a\u6761\u4ef6\u4f60\u53ef\u80fd\u8fd8\u8981\u5728f[1~n]\u4e2d\u627e\u4e00\u4e2a\u6700\u5927\u503c\u8f93\u51fa\n\n\u7b2c\u4e09\u4e2a\u6761\u4ef6\u548c\u7b2c\u56db\u4e2a\u6761\u4ef6\u4e00\u8d77\u7528\uff0c\u63a8\u51fa\u89e3\u6b64\u95ee\u9898\u7684\u6838\u5fc3\uff1a\u56db\u7ef4dp\u3002\u56e0\u4e3a\u5361\u7247\u90fd\u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u9898\u4e2d\n\n#### \u201c\u6bcf\u5f20\u5361\u7247\u4ec5\u80fd\u4f7f\u7528\u4e00\u6b21\u201d\n\n\u8fd9\u4e2a~~\u8ba9\u4eba\u4ee5\u4e3a\u662f\u641c\u7d22\u56de\u6eaf\u7684\u6bd2\u7624~~\u6761\u4ef6\u5c31\u53ef\u4ee5\u8f6c\u5316\u4e3a\n\n#### \u201c\u6bcf\u79cd\u5361\u7247\u6700\u591a\u4f7f\u7528k\u6b21\u201d\n\n\u8fd9\u6837\u7684\u4e0e\u52a8\u6001\u89c4\u5212\u76f8\u63a5\u8fd1\u7684\u6761\u4ef6\n\n\u6bd5\u7adf\u5bf9\u4e8e\u4e00\u79cd\u53ea\u9700\u8981\u7edf\u8ba1\u6b21\u6570\u5c31\u53ef\u4ee5\u4e86\uff0c\u800c\u5bf9\u4e8e\u5355\u72ec\u7684\u4e00\u5f20\u4f60\u9700\u8981\u6bcf\u6b21\u90fd\u5f00\u4e00\u4e2abool\u6570\u7ec4\n\n\n\uff08\u6ce8\uff1a\u867d\u7136\u8fd9\u9898\u662f\u4e2a\u56db\u7ef4dp\uff0c\u521d\u5b66\u8005\u53ef\u80fd\u4f1a\u6709\u4e9b\u5bb3\u6015\uff0c\u89c9\u5f97\u7ef4\u5ea6\u4e0a\u5347\u5230\u4e86\u56db\u5c42\u4e00\u5b9a\u975e\u5e38\u96be\uff0c\u5176\u5b9e\u8fd9\u9898\u7684\u96be\u5ea6\u548c\u67d0\u4e9b\u4e00\u7ef4dp\u662f\u5f88\u63a5\u8fd1\u7684 \uff09\n\n\u5982\u679c\u4e0a\u9762\u7684\u90fd\u7406\u89e3\u4e86\uff0c\u90a3\u4e0b\u9762\u6211\u4eec\u5c31\u53ef\u4ee5\u4e00\u6b65\u6b65\u5199\u4ee3\u7801\n\n\u9996\u5148\uff0c\u51c6\u5907\u548c\u6846\u67b6\n\n```cpp\n/*\n\u5168\u5c40\u53d8\u91cf\uff1a\nint f[50][50][50][50];\n\u7528\u6765\u50a8\u5b58\u5404\u79cd\u724c\u7528\u5230\u67d0\u4e2a\u5f20\u6570\u65f6\u5f97\u5230\u7684\u6700\u5927\u5206\u6570\n*/\n\n//\u7136\u540e\u7528s1,s2,s3,s4(\u4e2a\u4eba\u4e60\u60ef)\u5b58\u5404\u4e2a\u724c\u7684\u6570\u76ee\nfor(int i=0;i<m;i++)\n{...}\n\n//\u6839\u636e\u7b2c\u4e00\u6761\uff0c\u5f00\u59cb\u5199\u6846\u67b6\n\tfor(int i1=0;i1<=s1;i1++){\n\t\tfor(int i2=0;i2<=s2;i2++){\n\t\t\tfor(int i3=0;i3<=s3;i3++){\n\t\t\t\tfor(int i4=0;i4<=s4;i4++){\n                \t...//\u4e0b\u4e00\u6b65\u5199\u4e3b\u8981\u5185\u5bb9\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n//\u6bcf\u79cd\u72b6\u6001\u90fd\u8981\u6d89\u53ca\u5230\uff0c\u6240\u4ee5\u5e94\u8be5\u4e3a\u56db\u91cd\u5faa\u73af\n```\n\u8fd9\u91cc\u5c31\u4f53\u73b0\u5230\u4e86\u2460\uff0c\u2462\uff0c\u2463\uff0c\u4f7f\u7528\u56db\u7ef4dp\u5e76\u4f9d\u6b21\u4ece\u524d\u5411\u540e\u63a8\n\n\u4e0b\u4e00\u6b65\uff0c\u5199\u6838\u5fc3\uff1a\u8f6c\u79fb\u65b9\u7a0b\n\n\u7531\u4e8e\u6709\u56db\u4e2a\u7ef4\u5ea6\uff0c\u6240\u4ee5\u6bcf\u4e00\u4e2a\u7ef4\u5ea6\u90fd\u8981\u5411\u524d\u63a8\n\n\u56e0\u4e3a\u5f53\u524d\u7684\u72b6\u6001\u53ef\u4ee5\u7531\u56db\u4e2a\u72b6\u6001\u8f6c\u79fb\u800c\u6765\uff0c\u8fd9\u91cc\u5c31\u8981\u7528\u5230\u4e00\u4e9b\u9006\u63a8\u7684\u601d\u60f3\uff1a\n\n### \u5e73\u65f6\u6211\u4eec\u90fd\u662f\u60f3\u4ece\u8fd9\u4e2a\u72b6\u6001\u53ef\u4ee5\u53d8\u6210\u4ec0\u4e48\uff0c\u800c\u5728dp\u91cc\u5374\u8981\u60f3\u4ece\u4ec0\u4e48\u72b6\u6001\u53ef\u4ee5\u53d8\u6210\u8fd9\u4e2a\u72b6\u6001\n\n\u7b80\u5355\u7684\u63a8\u7406\u53ef\u4ee5\u5f97\u5230\uff0c\u4ece\u6bcf\u79cd\u5f20\u724c\u5c11\u4e00\u4e2a\u7684\u60c5\u51b5\u5c31\u52a0\u4e00\u5f20\u724c\u53ef\u4ee5\u5f97\u5230\u5f53\u524d\u60c5\u51b5\uff0c\u6240\u4ee5\u6211\u4eec\u6765\u7528\u524d\u56db\u4e2a\u72b6\u6001\u4e2d\u6700\u5927\u7684\u90a3\u4e00\u4e2a\u6765\u66f4\u65b0\n\n\u5f97\u5230\u4e2d\u95f4\u4ee3\u7801\uff1a\n\n```\nif(i1==0&&i2==0&&i3==0&&i4==0)continue;\nmaxx=0;now=1+i1+2*i2+3*i3+4*i4;\nif(i1!=0)maxx=max(maxx,f[i1-1][i2][i3][i4]+a[now]);\nif(i2!=0)maxx=max(maxx,f[i1][i2-1][i3][i4]+a[now]);\nif(i3!=0)maxx=max(maxx,f[i1][i2][i3-1][i4]+a[now]);\nif(i4!=0)maxx=max(maxx,f[i1][i2][i3][i4-1]+a[now]);\nf[i1][i2][i3][i4]=max(maxx,f[i1][i2][i3][i4]);\n```\n\n\u8fd9\u6837\uff0c\u8fd9\u9898\u4e5f\u5c31\u5dee\u4e0d\u591a\u4e86\n\n\u4f46\u8fd8\u8981\u6700\u540e\u7684\u4e00\u4e2a\u7ec6\u8282\u8981\u5904\u7406\u4e00\u4e0b\uff0c\u5c31\u662f\u8fb9\u754c\u7684\u95ee\u9898\n\n\u9898\u76ee\u4e2d\u660e\u786e\u5730\u8bf4\u4e86\uff0c\u4e00\u5f00\u59cb\u9ed8\u8ba4\u5728\u7b2c\u4e00\u683c\uff0c\u83b7\u5f97\u7b2c\u4e00\u683c\u7684\u5206\u6570\n\n\u6240\u4ee5\u8981\u52a0\u4e0a \n\nf[0][0][0][0]=a[1];\n\n\u5e76\u8df3\u8fc7\u96f6\u5f20\u724c\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u96f6\u5f20\u724c\u5230\u8fbe\u5b83\u7684\u72b6\u6001\u662f\u4f1a\u6539\u53d8\u7684\n\n\uff08\u8fd9\u4e00\u70b9\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\u5df2\u7ecf\u6709\u4f53\u73b0\u4e86\uff0c\u6ce8\u610f\u89c2\u5bdf\uff09\n\n\u5173\u4e8e\u76ee\u524d\u683c\u5b50\u7684\u6c42\u6cd5\u5417...\u60f3\u4e00\u4e0b\u4e5f\u5c31\u80fd\u5199\u51fa\u5f0f\u5b50\u4e86\u5427\n\n### \u6700\u540e\uff0c\u5e0c\u671b\u5927\u5bb6\u770b\u5b8c\u8fd9\u7bc7\u9898\u89e3\u5e76\u4e0d\u53ea\u662f\u4f1a\u5199\u8fd9\u9053\u9898\u4e86\uff0c\u800c\u662f\u5bf9\u4e8e\u52a8\u6001\u89c4\u5212\u9898\u72b6\u6001\u65b9\u7a0b\u7684\u6c42\u89e3\u6b65\u9aa4\u6709\u4e86\u65b0\u7684\u7406\u89e3\uff0c\u8fdb\u800c\u5728\u5176\u4ed6\u7684\u9898\u76ee\u4e2d\u4e5f\u53ef\u4ee5\u901a\u8fc7\u9898\u610f\u51c6\u786e\u5730\u9000\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u6211\u8ba4\u4e3a\u8fd9\u624d\u662f\u6211\u5199\u8fd9\u7bc7\u9898\u89e3\u7684\u76ee\u7684\u3002\n\n\u6700\u540e\u6254\u4e0bAC\u4ee3\u7801\uff0c\u53ef\u4ee5\u7ed3\u5408\u6574\u4e2a\u4ee3\u7801\u518d\u60f3\u60f3\u8fc7\u7a0b\n\n~~\u5df2\u7ecf\u5c3d\u529b\u8ba9\u5b83\u770b\u8d77\u6765\u4e0d\u4e11\u4e86...~~\n```\n#include<iostream>\n#include<cstdio>\n#define il inline \n#define rg register\n#define N 130\nusing namespace std;\nint n,m;\nint f[N][N][N][N];\nint a[400];\nint s[6];\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(rg int i=1;i<=n;i++)\n\tscanf(\"%d\",a+i);\n\tint xx;\n\tfor(rg int i=1;i<=m;i++)\n\tscanf(\"%d\",&xx);s[xx]++;\n\tf[0][0][0][0]=a[1];\n\tint maxx;\n\tint now;\n\tfor(int i1=0;i1<=s[1];i1++){\n\t\tfor(int i2=0;i2<=s[2];i2++){\n\t\t\tfor(int i3=0;i3<=s[3];i3++){\n\t\t\t\tfor(int i4=0;i4<=s[4];i4++){\n\t\t\t\t\tif(i1==0&&i2==0&&i3==0&&i4==0)continue;\n\t\t\t\t\tmaxx=0;now=1+i1+2*i2+3*i3+4*i4;\n\t\t\t\t\tif(i1!=0)maxx=max(maxx,f[i1-1][i2][i3][i4]+a[now]);\n\t\t\t\t\tif(i2!=0)maxx=max(maxx,f[i1][i2-1][i3][i4]+a[now]);\n\t\t\t\t\tif(i3!=0)maxx=max(maxx,f[i1][i2][i3-1][i4]+a[now]);\n\t\t\t\t\tif(i4!=0)maxx=max(maxx,f[i1][i2][i3][i4-1]+a[now]);\n\t\t\t\t\tf[i1][i2][i3][i4]=max(maxx,f[i1][i2][i3][i4]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<f[s[1]][s[2]][s[3]][s[4]]<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1539833221,
        "uid": 121838,
        "name": "Time_Rune",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u624d\u5f00\u59cb\u5b66\u52a8\u5f52\uff0c\u4e00\u770b\u5c31\u662f\u4e2a\u52a8\u5f52\u9898\u3002\u9012\u5f52\u5199\u6cd5\u4f3c\u4e4e\u5bb9\u6613\u8d85\u65f6\uff0c\u6240\u4ee5\u5c31\u7528\u7684\u9012\u5f52\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n\n\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<cmath> \nusing namespace std;\nint p[5]={0};\nint n,m,k;\nint a[400]={0};\nint zh[45][45][45][45]={0};//\u5269\u4f59\u5361\u724c\u6570\u91cf\u7684\u5206\u6570\u6700\u5927\u503c\nbool vis[45][45][45][45]={0};//\u7528\u4e8e\u8bb0\u5fc6\u5316\u641c\u7d22\nint wei[45][45][45][45]={0};//\u5269\u4f59\u5361\u724c\u6570\u91cf\u8fd9\u4e48\u591a\u65f6\u7684\u4f4d\u7f6e\nint dp(int p1,int p2,int p3,int p4)//\u6df1\u641c\n{\n    if(vis[p1][p2][p3][p4]==1)//\u8bb0\u5fc6\u5316\uff0c\u641c\u8fc7\u7684\u5c31\u4e0d\u518d\u641c\u4e86\n      return zh[p1][p2][p3][p4];\n    int &ans=zh[p1][p2][p3][p4];//\u9a9a\u64cd\u4f5c\uff0c\u53ef\u4ee5\u628aans\u5f53\u4f5czh[p1][p2][p3][p4]\n    ans=a[n];//\u5f53\u65e0\u6cd5\u518d\u64cd\u4f5c\u65f6\uff0c\u72b6\u6001\u6700\u5927\u4e3a\u6700\u540e\u4e00\u683c\u7684\u5206\u6570\uff08\u56e0\u4e3a\u65e0\u6cd5\u518d\u64cd\u4f5c\u5c31\u662f\u8d70\u5230\u6700\u540e\u4e00\u683c\uff0c\u4e5f\u53ef\u4ee5\u6539\u6210ans=a[wei[p1][p2][p3][p4]],\u4e0d\u8fc7\u4f3c\u4e4e\u6ca1\u6709\u5fc5\u8981\uff09\n    if(p1-1>=0)\n    {\n        wei[p1-1][p2][p3][p4]=wei[p1][p2][p3][p4]+1;//\u8ba1\u7b97\u7528\u4e861\u53f7\u724c\u540e\uff0c\u4e4c\u9f9f\u7684\u4f4d\u7f6e\u3002\u4e0b\u540c\n        ans=max(ans,dp(p1-1,p2,p3,p4)+a[wei[p1][p2][p3][p4]]);//\u6c42\u6b64\u72b6\u6001\u7684\u6700\u5927\u503c\n    }\n    if(p2-1>=0)\n    {\n        wei[p1][p2-1][p3][p4]=wei[p1][p2][p3][p4]+2;\n        ans=max(ans,dp(p1,p2-1,p3,p4)+a[wei[p1][p2][p3][p4]]);\n    }\n    if(p3-1>=0)\n    {\n        wei[p1][p2][p3-1][p4]=wei[p1][p2][p3][p4]+3;\n        ans=max(ans,dp(p1,p2,p3-1,p4)+a[wei[p1][p2][p3][p4]]);\n    }\n    if(p4-1>=0)\n    {\n        wei[p1][p2][p3][p4-1]=wei[p1][p2][p3][p4]+4;\n        ans=max(ans,dp(p1,p2,p3,p4-1)+a[wei[p1][p2][p3][p4]]);\n```\n}//\u4ee5\u4e0a\u662f\u56db\u79cd\u6b65\u9aa4\uff0c\u5c31\u662f\u7528\u56db\u79cd\u724c\n\n```cpp\n    vis[p1][p2][p3][p4]=1;//\u8868\u793a\u72b6\u6001\u641c\u8fc7\u4e86\n    return ans;//\u8fd4\u56de\u6b64\u72b6\u6001\u7684\u6700\u5927\u503c\n}\nint main() \n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n      scanf(\"%d\",&a[i]);\n    for(int i=1;i<=m;i++)\n    {\n        scanf(\"%d\",&k);\n        p[k]++;\n    }\n    wei[p[1]][p[2]][p[3]][p[4]]=1;\n    printf(\"%d\",dp(p[1],p[2],p[3],p[4]));\n}\n```",
        "postTime": 1504411435,
        "uid": 48430,
        "name": "lvmaomao",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u8fd9\u9898\u662f\u4e00\u9053\u7eafdp\uff0c\u6392\u6570\u6700\u592740\u6240\u4ee5\u53ef\u4ee5\u5f00\u56db\u7ef4\u6570\u7ec4\u3002\n\u8f6c\u79fb\u65b9\u7a0b\uff1a\n```\nF[a][b][c][d]=max(F[a-1][b][c][d],F[a][b-1][c][d],F[a][b][c-1][d],F[a][b][c][d-1])+num[1*a+2*b+3*c+4*d]\n```\n\u5f88\u597d\u7406\u89e3\u5427\n\n\u4e24\u79cd\u89e3\u6cd5\n\n\u7b2c\u4e00\u79cd\u8fd9\u9898\u80fd\u8fc7\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nlong long dp[41][41][41][41],n,m;\nint a[1000],b[5],c;\nint main(){\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)cin>>a[i];\n    dp[0][0][0][0]=a[1];\n    for(int i=1;i<=m;i++){cin>>c;b[c]++;}\n    for(int i=0;i<=b[1];i++)\n       for(int j=0;j<=b[2];j++)\n          for(int k=0;k<=b[3];k++)\n             for(int l=0;l<=b[4];l++){\n                 int t=a[i+2*j+3*k+4*l+1];\n                 if(i)dp[i][j][k][l]=max(dp[i-1][j][k][l]+t,dp[i][j][k][l]);\n                 if(j)dp[i][j][k][l]=max(dp[i][j-1][k][l]+t,dp[i][j][k][l]);\n                 if(k)dp[i][j][k][l]=max(dp[i][j][k-1][l]+t,dp[i][j][k][l]);\n                 if(l)dp[i][j][k][l]=max(dp[i][j][k][l-1]+t,dp[i][j][k][l]);\n             }\n    cout<<dp[b[1]][b[2]][b[3]][b[4]];\n    return 0;\n}\n```\n\n\u4f46\u662f\uff0c\u5047\u5982\u6570\u636e\u8303\u56f4\u5927\u4e00\u70b9\uff0c\u8fd9\u79cd\u505a\u6cd5\u5c31\u4e0d\u884c\u4e86\uff0c\u4f1aMLE\uff0c\u8981\u7528\u6eda\u52a8\u6570\u7ec4\u538b\u6389\u4e00\u7ef4\uff08\u8fd9\u6837\u5c31\u53ef\u4ee5\u5f0090\uff09\n\n\u4ee3\u7801\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\nlong long dp[41][41][41],n,m;\nint a[1000],b[5],c;\nint main(){\n    cin>>n>>m;//\u8f93\u5165\n    for(int i=1;i<=n;i++)cin>>a[i];\n    for(int i=1;i<=m;i++){cin>>c;b[c]++;}//\u8bb0\u5f55\u724c\n    memset(dp,0xf3,sizeof(dp));//\u521d\u59cb\u5316\n    dp[0][0][0]=0;\n    for(int i=0;i<=b[1];i++)\n       for(int j=0;j<=b[2];j++)\n          for(int k=0;k<=b[3];k++)\n             for(int l=0;l<=b[4];l++){//\u548c\u524d\u9762\u4e00\u6837\u7684\u66b4\u529b\n                 int t=a[i+2*j+3*k+4*l+1];//\u7b97\u51fa\u73b0\u5728\u5728\u7684\u70b9\n                 if(j)dp[j][k][l]=max(dp[j-1][k][l],dp[j][k][l]);//\u4e5f\u548c\u524d\u9762\u4e00\u6837\n                 if(k)dp[j][k][l]=max(dp[j][k-1][l],dp[j][k][l]);\n                 if(l)dp[j][k][l]=max(dp[j][k][l-1],dp[j][k][l]);\n                 dp[j][k][l]+=t;\n             }\n    cout<<dp[b[2]][b[3]][b[4]];//\u8f93\u51fa\n    return 0;\n}\n```\n\n",
        "postTime": 1524375207,
        "uid": 48142,
        "name": "Ousmane_Dembele",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u6309\u8bf4\u8fd9\u4e2a\u9898\u9898\u89e3\u80af\u5b9a\u662f\u585e\u4e0d\u8fdb\u53bb\u4e86orz  \n\u90a3\u6211\u5c31\u8bb2\u8bb2~~\u6ca1\u4eba\u8bf4~~\u7684**\u7a7a\u95f4\u4f18\u5316**  \n(\u8fd9\u4e2a\u9898\u5faa\u73af\u591a\uff0c\u6240\u4ee5~~O2\u6548\u679c\u660e\u663e~~\uff09\n\n------\n\n### 0.\u601d\u8def\n\u8fd9\u4e2a\u9898\u7684\u601d\u8def\u7c7b\u4f3c\u80cc\u5305\u95ee\u9898\uff0c\u53ea\u4e0d\u8fc7\u5360\u7684\u7a7a\u95f4\u662f1\u7f62\u4e86......  \n\u76f4\u63a5\u56db\u7ef4\u7684\u80cc\u5305\u5f00\u4e0ahign\u8d77\u6765\uff01  \n\u4e0d\u8fc7...Emmm...\u6211CE\u4e86\uff1f\n### 1.\u6eda\u52a8\u6570\u7ec4\n\u4f46\u662f\u672c\u849f\u84bb\u53d1\u73b0dalao\u4eec\u90fd\u5f00\u4e864\u7ef4\u6570\u7ec4  \n\u90a3\u8fd9\u4e2a\u5c82\u4e0d\u662f\u5f88\u5bb9\u6613\u53c8RE\u53c8WA\u53c8CE  \n\u4e8e\u662f\u7b2c\u4e00\u4e2a\u4f18\u5316\u5e94\u8fd0\u800c\u751f\uff1a**\u6eda\u52a8\u6570\u7ec4**  \n\u6211\u4eec\u672c\u6765\u7b97\u597d\u7684\u53ef\u80fd\u4e0d\u662f\u6700\u4f18\u89e3\uff0c\u4f46\u662f\uff1a**\u6700\u4f18\u89e3\u662f\u53d6max\u7684**  \n\u4fdd\u8bc1\u4e86**\u5982\u679c**\u539f\u5148\u7b97\u51fa\u6765\u7684**\u662f\u6700\u4f18\u89e3\u5c31\u4e00\u5b9a\u4f1a\u88ab\u4fdd\u7559**  \n\u90a3\u4e48\u7701\u7565\u54ea\u4e00\u7ef4\u5462\uff1f  \n\u5176\u5b9e\u7701\u7565\u7b2c\u4e00\u7ef4\u4e0d\u662f\u6700\u597d\u5199\u5417\uff08\u5927\u96fe\uff09\uff1f  \n\u7701\u7565\u7b2c\u4e00\u7ef4\uff0c\u5c31\u53ef\u4ee5\u53ea\u7b97\u5f53\u524ddp\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u8f6c\u79fb\u7684\u65f6\u5019\u76f4\u63a5+dp\u7684\u4f4d\u7f6e\u7684\u6743\u503c\u5373\u53ef\u3002  \n~~qwq\u4f5c\u8005\u53c8\u5077\u61d2~~  \n\u76f4\u63a5\u4e0a\u4ee3\u7801\u53ed\uff08C++\uff09\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\n\nusing namespace std;\nlong long int dp[45][45][45];\n//\u6eda\u52a8\u6570\u7ec4\uff0c\u7b2c\u4e00\u7ef4\u7701\u7565 \nint cnt[5],value[1001];\n//\u6bcf\u4e00\u79cd\u5361\u7684\u6570\u91cf\uff0c\u4ee5\u53ca\u6bcf\u4e00\u4e2a\u683c\u5b50\u7684\u6743\u503c \nint n,m; \n//\u957f\u5ea6\uff0c\u5361\u724c\u4e2a\u6570 \n\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&value[i]);\n\tfor (int i=1,flag;i<=m;i++)\n\t{\n\t\tscanf(\"%d\",&flag);\n\t\tcnt[flag]++;\n\t}\n\tfor (int i=0;i<=cnt[1];i++)\n\t\tfor (int j=0;j<=cnt[2];j++)\n\t\t\tfor (int m=0;m<=cnt[3];m++)\n\t\t\t\tfor (int n=0;n<=cnt[4];n++)\n\t\t\t\t{\n\t\t\t\t\tint pos=i*1+j*2+m*3+n*4+1;//\u5f53\u524d\u4f4d\u7f6e\uff0c\u6570\u7ec4\u4e0b\u6807+1 \n\t\t\t\t\tif (j!=0)dp[j][m][n]=max(dp[j-1][m][n],dp[j][m][n]);\n\t\t\t\t\tif (m!=0)dp[j][m][n]=max(dp[j][m-1][n],dp[j][m][n]);\n\t\t\t\t\tif (n!=0)dp[j][m][n]=max(dp[j][m][n-1],dp[j][m][n]);\n\t\t\t\t\tdp[j][m][n]+=value[pos];//\u52a0\u4e0a\u5230\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u503c \n\t\t\t\t}\n\tprintf(\"%lld\\n\",dp[cnt[2]][cnt[3]][cnt[4]]);\n\treturn 0;\n}\n```\n\u6b63\u5982\u67d0\u4f4ddalao\u6240\u8bf4\uff0c\u7ec8\u4e8e\u53ef\u4ee5\u5f00\u523090\u4e86\u3002  \n\u4f46\u662f\u5982\u679c\u6570\u636e\u8fc7\u4e8e\u6bd2\u7624...Emmm...  \n### 2.\u538b\u4f4d\u6570\u7ec4\n\u538b\u4f4d\u6570\u7ec4\u662f\u548c\u538b\u4f4d\u9ad8\u7cbe\u4e00\u6837\u7684\u538b\u4f4d\uff0c\u591a\u5c11\u8fdb\u5236\u81ea\u5df1(~~\u6570\u636e\u8303\u56f4~~)\u8bf4\u4e86\u7b97\u3002  \n\u4e0d\u5149\u662f\u9632\u6b62CE\u548cRE\u7684\u597d\u5e2e\u624b\uff0c\u5728\u4f7f\u7528\u901f\u5ea6\u4e0a\u597d\u50cf\u4e5f\u53ef\u4ee5\u5feb\u4e0a\u4e0d\u5c11\uff08~~\u597d\u50cf\u6ca1\u611f\u89c9~~\uff09  \n\u6211\u4eec\u600e\u4e48\u4f7f\u7528\u5b83\u5462\uff1f  \n\u9996\u5148\u770b\u6570\u636e\u8303\u56f4\uff0c\u6bcf\u4e00\u4e2a\u5361\u724c\u6700\u591a40\u5f20\u3002   \n\u4e0d\u653e\u5fc3\uff1f\u5f0041\u8fdb\u5236\u53ed\uff01\u90a3\u5c31\u662f\n```cpp\nlong long int dp[2896404];//41^4+41^3+41^2+41=2896404\n```\n\u7136\u540e\u8bbf\u95ee\u5982\u679c\u4e0d\u8ffd\u6c42\u901f\u5ea6\uff0c\u5c31\u6765\u4e00\u53d1\u51fd\u6570\u6c42\u4e0b\u6807\uff0c\u76f8\u5f53\u4e8e\u56db\u7ef4\u6570\u7ec4\u7684\u8bbf\u95ee\u54af\u3002\n```cpp\n//address\ninline int add(int i,int j,int m,int n)\n{\n    return i*69821+j*1681+m*41+n;\n    //41^3=68921,41^2=1681\n}\n```\n\u5bf9\u4e8e\u6eda\u52a8\u6570\u7ec4\u7684\u538b\u53bb\u7684\u4e00\u7ef4\uff0c\u8fd8\u53ef\u4ee5\u53bb\u6389\"\u7b2c\u4e00\u7ef4\"\u7684`i*69821`\uff0c\u76f4\u63a5\u7528\u540e\u9762\u7684\u4e09\u4e2a\u53c2\u6570\u3002  \n```cpp\nlong long int dp[70644];//41^3+41^2+41=70643\n//address\ninline int add(int j,int m,int n)\n{\n    return j*1681+m*41+n;\n} \n```\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\n\nusing namespace std;\nlong long int dp[70644];\n//\u6eda\u52a8\u6570\u7ec4\uff0c\u7b2c\u4e00\u7ef4\u7701\u7565 \nint cnt[5],value[1001];\n//\u6bcf\u4e00\u79cd\u5361\u7684\u6570\u91cf\uff0c\u4ee5\u53ca\u6bcf\u4e00\u4e2a\u683c\u5b50\u7684\u6743\u503c \nint n,m; \n//\u957f\u5ea6\uff0c\u5361\u724c\u4e2a\u6570 \n\n//address\nint add(int j,int m,int n)\n{\n\treturn j*1689+m*41+n;\n}\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&value[i]);\n\tfor (int i=1,flag;i<=m;i++)\n\t{\n\t\tscanf(\"%d\",&flag);\n\t\tcnt[flag]++;\n\t}\n\tfor (int i=0;i<=cnt[1];i++)\n\t\tfor (int j=0;j<=cnt[2];j++)\n\t\t\tfor (int m=0;m<=cnt[3];m++)\n\t\t\t\tfor (int n=0;n<=cnt[4];n++)\n\t\t\t\t{\n\t\t\t\t\tint pos=i*1+j*2+m*3+n*4+1;//\u5f53\u524d\u4f4d\u7f6e\uff0c\u6570\u7ec4\u4e0b\u6807+1 \n\t\t\t\t\tif (j!=0)dp[add(j,m,n)]=max(dp[add(j-1,m,n)],dp[add(j,m,n)]);\n\t\t\t\t\tif (m!=0)dp[add(j,m,n)]=max(dp[add(j,m-1,n)],dp[add(j,m,n)]);\n\t\t\t\t\tif (n!=0)dp[add(j,m,n)]=max(dp[add(j,m,n-1)],dp[add(j,m,n)]);\n\t\t\t\t\tdp[add(j,m,n)]+=value[pos];//\u52a0\u4e0a\u5230\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u503c \n\t\t\t\t}\n\tprintf(\"%lld\\n\",dp[add(cnt[2],cnt[3],cnt[4])]);\n\treturn 0;\n}\n```\n\u5b8c\u7ed3\u6492\u82b1qwq",
        "postTime": 1559466263,
        "uid": 122927,
        "name": "Jelly_Goat",
        "ccfLevel": 3,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "# \u8bb0\u5fc6\u5316\u641c\u7d22\n\ndfs\u56db\u4e2a\u53c2\u6570\uff0c\u8868\u793a\u5f53\u524d\u4f7f\u7528\u4e86\u591a\u5c11\u4e2a\u4e00\u53f7\u724c\uff0c\u4e8c\u53f7\u724c\uff0c\u4e09\u53f7\u724c\uff0c\u56db\u53f7\u724c\n\n\u90a3\u4e48\u5f53\u524d\u4f4d\u7f6e\u53ef\u4ee5\u7528n1* 1+n2* 2+n3* 3+n4* 4+1 \u8868\u793a\n\nsum[i]\u8868\u793ai\u53f7\u724c\u7684\u4e2a\u6570\n\n\u6839\u636e\u9898\u76ee\u6240\u8bf4 \u7531\u4e8e\u8d77\u70b9\u662f1\uff0c\u6240\u4ee5\u81ea\u52a8\u83b7\u5f97\u7b2c1\u683c\u7684\u5206\u6570\uff0c\u6240\u4ee5dfs\u8fd8\u8981\u52a0\u4e0aa[1]\n\n\u56e0\u4e3a\n\n\u6211\u7684\u4ee3\u7801\u4e2d\u7684dfs\u52a0\u4e0a\u7684\u503c\u662f\u8df3\u4e4b\u540e\u7684\u503c\uff0c\u6240\u4ee5\u5728dfs\u5916\u8981\u52a0\u4e0aa[1]\n\ncode:\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,a[25555],b[25555],sum[105],f[45][45][45][45];\nint dfs(int n1,int n2,int n3,int n4){\n\tif(f[n1][n2][n3][n4]) return f[n1][n2][n3][n4];\n\tif(n1==sum[1]&&n2==sum[2]&&n3==sum[3]&&n4==sum[4])\n\t\treturn 0;\n\tint where=n1*1+n2*2+n3*3+n4*4+1;\n\tint dfs1=0;\n\tif(n1<sum[1]) dfs1=max(dfs1,dfs(n1+1,n2,n3,n4)+a[where+1]);//\u724c\u591f\u7684\u60c5\u51b5\u4e0b\u641c\u7d22\u53d6max\n\tif(n2<sum[2]) dfs1=max(dfs1,dfs(n1,n2+1,n3,n4)+a[where+2]);\n\tif(n3<sum[3]) dfs1=max(dfs1,dfs(n1,n2,n3+1,n4)+a[where+3]);\n\tif(n4<sum[4]) dfs1=max(dfs1,dfs(n1,n2,n3,n4+1)+a[where+4]); \t\n\treturn f[n1][n2][n3][n4]=dfs1;\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tfor(int i=1;i<=m;i++)\n\t\tscanf(\"%d\",&b[i]),sum[b[i]]++;\n\tprintf(\"%d\\n\",dfs(0,0,0,0)+a[1]);\n\treturn 0;\n}\n```",
        "postTime": 1565606192,
        "uid": 75064,
        "name": "prefer",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u633a\u8003\u9a8c\u601d\u7ef4\u7684\uff0c\u4ece\u4ee5\u4e0b\u4e24\u70b9\u5c31\u53ef\u4ee5\u770b\u51fa\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e86\uff1a\n\n1.\u4e00\u770b\u5c314\u79cd\u724c\uff0c\u800c\u4e14\u6bcf\u4e00\u79cd\u724c\u90fd\u4e0d\u591a\u4e8e40\u5f20\u3002\n\n2.\u5230\u4e86\u7ec8\u70b9\u6bcf\u79cd\u724c\u90fd\u4f1a\u88ab\u7528\u5b8c\u3002\n\n\u6240\u4ee5\u65b9\u7a0b\u5c31\u51fa\u6765\u4e86:f[i,j,k,l]:=max{f[i-1,j,k,l]f[i,j-1,k,l],f[i,j,k-1,l],f[i,j,k,l-1]}+a[x];\n\n\u8fd9\u91cc\u7684i,j,k,l\u5206\u522b\u8868\u793a\u7528\u4e86i\u5f20\u7b2c\u4e00\u79cd\u724c\uff0cj\u5f20\u7b2c\u4e8c\u79cd\u724c\uff0ck\u5f20\u7b2c\u4e09\u79cd\u724c\uff0cl\u5f20\u7b2c\u56db\u79cd\u724c\uff0cx\u8868\u793a\u5f53\u524d\u5728\u7b2cx\u683c(\u81ea\u7136\u662f\u5728i+j\\*2+k\\*3+l\\*4+1\u5904)\u3002\n\n\u8fd9\u91cc\u8981\u8bf4\u660e\u4e00\u4e0b\u8981\u5728\u8bfb\u5165\u65f6\u5c31\u8bb0\u5f55\u6bcf\u4e00\u79cd\u724c\u7684\u6570\u91cf\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u5f00\u59cb\u679a\u4e3e\u4e86\u3002\n\n\u672c\u4ebap\u515a\uff0c\u4e0apascal\u4ee3\u7801\uff1a\n\n```cpp\nvar f:array[-1..40,-1..40,-1..40,-1..40] of longint;\n    a,b:array[0..1001] of longint;\n    n,m,i,j,k,l,x:longint;\nfunction max(x,y:longint):longint;\nbegin\n  if x>y then\n    exit(x)\n  else exit(y);\nend;\nbegin\n  readln(n,m);\n  for i:=1 to n do\n    read(a[i]);\n  for i:=1 to m do\n    begin\n    read(x);\n    inc(b[x]);            //\u8fd9\u662f\u8bb0\u5f55\u6bcf\u79cd\u724c\u7684\u6570\u91cf\n    end;\n  for i:=0 to b[1] do\n    for j:=0 to b[2] do\n      for k:=0 to b[3] do\n        for l:=0 to b[4] do            //\u4e00\u4e2a\u4e2a\u679a\u4e3e\u6240\u7528\u7684\u724c\n          begin\n          x:=i+j*2+k*3+l*4+1;             //\u7b97\u51fa\u5230\u8fbe\u7684\u683c\u5b50\n          f[i,j,k,l]:=max(f[i-1,j,k,l],max(f[i,j-1,k,l],max(f[i,j,k-1,l],f[i,j,k,l-1])));\n          f[i,j,k,l]:=f[i,j,k,l]+a[x];          //\u65b9\u7a0b\u5957\u4e0a\u53bb\n          end;\n  writeln(f[b[1],b[2],b[3],b[4]]);             //\u56e0\u4e3a\u6bcf\u5f20\u724c\u90fd\u4f1a\u7528\u5b8c\uff0c\u6240\u4ee5\u76f4\u63a5\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002\nend.\n```",
        "postTime": 1502151808,
        "uid": 22070,
        "name": "Ape_epA",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "# \u672c\u4eba\u4e00\u4e2a\u5f88\u8ba4\u771f\u7684\u9898\u89e3\n\u8fd9\u9898\u6211\u4ea4\u4e86\u4e0d\u4e0b10\u904d\uff0c\u771f\u7684\u662f\u4e00\u4e2aNOIP\u7684\u597d~~\u6c34~~\u9898\u3002\n\u54c8\u54c8\uff0c\u4e0d\u5f00\u73a9\u7b11\u4e86\uff0c\u6211\u4e3b\u8981\u662f\u7528\u4e86\u4e24\u79cd\u65b9\u6cd5\u6765\u5199\u7684\u3002\n\u4e00\u4e2a\u662fdp\uff0c\u4e4b\u524d\u6709\u5927\u4f6c\u5df2\u7ecf\u8be6\u7ec6\u8bb2\u8fc7\uff0c\u6211\u4e5f\u5c31\u4e0d\u591a\u8bf4\u4e86\n```\n// luogu-judger-enable-o2\n#include<bits/stdc++.h>\nusing namespace std;\nint dp[41][41][41][41];\nint tot[6];\nint a[1001];\nint n,m,q;\nint main()\n{\n    scanf(\"%d%d\",&m,&n);\n    for(int i=1;i<=m;i++)\n    scanf(\"%d\",&a[i]);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d\",&q);\n        tot[q]++;\n    }\n    dp[0][0][0][0]=a[1];\n    for(register int i=0;i<=tot[1];i++)\n    {\n        for(register int j=0;j<=tot[2];j++)\n        {\n            for(register int k=0;k<=tot[3];k++)\n            {\n                for(register int l=0;l<=tot[4];l++)\n                {\n                    int t=i+2*j+3*k+4*l+1;\n                    if(i!=0)dp[i][j][k][l]=max(dp[i][j][k][l],dp[i-1][j][k][l]+a[t]);\n                    if(j!=0)dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j-1][k][l]+a[t]);\n                    if(k!=0)dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k-1][l]+a[t]);\n                    if(l!=0)dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k][l-1]+a[t]);\n                }\n            }\n        }\n    }\n    printf(\"%d\\n\",dp[tot[1]][tot[2]][tot[3]][tot[4]]);\n    return 0;\n}\n```\n\u770b\u5b8c\u4e86dp\u7684\u6807\u7a0b\uff0c\u6211\u8981\u4ecb\u7ecd\u4e00\u79cd\u9898\u89e3\u91cc\u5f88\u5c11\u4eba\u7528\uff08~~\u653e\u5c41\uff0c\u8fd8\u4e0d\u662f\u773c\u778e~~\uff09\uff0c\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\u5c06\u6bcf\u4e00\u4e2a\u4e4c\u9f9f\u68cb\u8d70\u8fc7\u7684\u8def\u7a0b\u6253\u4e0a\u6807\u8bb0\uff0c\u5728\u4ee5\u540e\u7684\u9012\u5f52\u4e2d\u53ef\u4ee5\u7701\u53bb\u5f88\u591a\u7684\u65f6\u95f4\uff08\u76f8\u5f53\u4e8e\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u526a\u679d\uff09\u4e86\u3002\n\u4e3b\u4f53\u548cdp\u8fd8\u662f\u5f88\u50cf\u7684\uff08\u8fd8\u4e0d\u662f\u7167\u6284\uff09\u3002\n```\n// luogu-judger-enable-o2\n#include<bits/stdc++.h>\nusing namespace std;\nint f[41][41][41][41];\nint n;\nint s[351];\nint tot[5];\ninline int dfs(int a,int b,int c,int d)\n{\n    if(f[a][b][c][d]!=0)return f[a][b][c][d];\n    //\u8bb0\u5fc6\u5316\u7684\u6838\u5fc3\n    if(a)f[a][b][c][d]=max(f[a][b][c][d],dfs(a-1,b,c,d));\n    if(b)f[a][b][c][d]=max(f[a][b][c][d],dfs(a,b-1,c,d));\n    if(c)f[a][b][c][d]=max(f[a][b][c][d],dfs(a,b,c-1,d));\n    if(d)f[a][b][c][d]=max(f[a][b][c][d],dfs(a,b,c,d-1));//\u6bcf\u4e00\u6b65\u52a0\u4e0a\u4e4b\u524d\u72b6\u6001\u7684\u6700\u5927\u503c\n    f[a][b][c][d]+=s[a+2*b+3*c+4*d+1];\n    return f[a][b][c][d];\n}\nint main()\n{\n    int n,m;\n    cin>>n>>m;\n    for(register int i=1;i<=n;i++)\n    cin>>s[i];\n    int q;\n    for(register int i=1;i<=m;i++)\n    {\n        cin>>q;\n        tot[q]++;//\u8bb0\u5f55\u6bcf\u79cd\u5361\u724c\u7684\u6570\u91cf\n    }\n    f[0][0][0][0]=s[1];//\u7b2c\u4e00\u6b65\u7684\u5206\u6570\u4e00\u5b9a\u80fd\u62ff\u5230\n    cout<<dfs(tot[1],tot[2],tot[3],tot[4])<<endl;\n    //\u5f00\u59cb\u8bb0\u5fc6\u5316\u641c\u7d22\n    return 0;\n}\n```\n\u4e24\u79cd\u65b9\u6cd5\uff0c\u5404\u6709\u5404\u7684\u4f18\u52bf\u3002\n\u8bb0\u5fc6\u5316\u7684\u4f18\u70b9\u5c31\u662f\u597d\u5199\uff0c\u53ef\u8bfb\u6027\u5f3a\uff0c\u65f6\u95f4\u7a0d\u6709\u900a\u8272\u3002\n\u800cdp\u5c31\u662f\u65f6\u95f4\u5feb\u3002\n### \u7528\u65f6\u94fe\u63a5\n[\u8bb0\u5fc6\u5316\u641c\u7d22](https://www.luogu.org/record/show?rid=11516766)\n\n[dp](https://www.luogu.org/record/show?rid=11485787)\n\n                                   \u6765\u81ea\u6e56\u5357HY\u7684\u849f\u84bb",
        "postTime": 1538814214,
        "uid": 94531,
        "name": "Watermatter",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "[\u535a\u5ba2\u91cc\u98df\u7528\u66f4\u4f73](https://www.luogu.org/blog/xzlhxc/solution-p1541)   \n[\u9898\u76ee\u94fe\u63a5\uff08\u6d1b\u8c371541\uff09](https://www.luogu.org/problem/P1541)   \n\uff08\u5982\u672c\u9898\u89e3\u6709\u9519\u6216\u4e0d\u7406\u89e3\u7684\u5730\u65b9\u8bf7\u8bc4\u8bba\u6216\u79c1\u4fe1\u7b14\u8005\uff01\uff09  \n**\u524d\u7f6echeese\uff1a\u7ebf\u6027dp\u57fa\u7840**    \n$upd:2019.10.27$\u66f4\u65b0\u4e86\u6eda\u52a8\u6570\u7ec4\u7684\u5185\u5bb9\u3002\n\n------------\n## \u2460\u9898\u610f\n\u4e00\u4e2a$n(0<n \\le 350) $\u4e2a\u683c\u5b50\u7684\u957f\u6761\u5f62\u68cb\u76d8\uff0c\u4f60\u5728\u7b2c1\u683c\uff0c\u5f53\u4f60\u8df3\u5230\u7b2c$i$\u4e2a\u683c\u5b50\u4e0a\u5c31\u80fd\u83b7\u5f97\u5927\u5c0f\u4e3a$a_i$\u7684\u5206\u6570\uff08\u4f60\u81ea\u52a8\u83b7\u5f97\u7b2c1\u683c\u7684\u5206\u6570\uff09\u3002\u4f60\u6709$m$\u5f20\u724c\uff0c\u6bcf\u5f20\u724c\u4e0a\u7684\u6570\u5b57$q$\u8868\u793a\u4f7f\u7528\u4e86\u8fd9\u5f20\u724c\u53ef\u4ee5\u8df3$q$\u683c\uff08$1\\le q \\le 4$\uff09\uff0c\u6bcf\u5f20\u724c\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\uff0c\u6bcf\u79cd\u724c\u6700\u591a40\u5f20\uff0c\u4fdd\u8bc1\u80fd\u8df3\u5230\u7b2c$n$\u683c\uff0c\u6c42\u6b64\u8fc7\u7a0b\u4e2d\u80fd\u5f97\u5230\u7684\u6700\u5927\u5206\u6570\u3002\n\n## \u2461\u52a8\u6001\u89c4\u5212\u601d\u8def\n\u8fd9\u79cd\u9898\u4e00\u770b\u5f88\u50cf\u641c\u7d22\u9898\uff0c\u4f46\u641c\u7d22\u53c8\u592a\u6162\u4e86\uff0c\u8981\u7528dp\uff0c\u4ece\u4e0b\u9762\u51e0\u70b9\u6765\u8003\u8651\u539f\u56e0\uff1a  \n\n1. \u59cb\u7ec8\u4ece\u5de6\u5411\u53f3\u8df3\uff0c\u4f60**\u5f53\u524d\u8bb8\u591a\u9009\u62e9\u8df3\u7684\u6b65\u6570\u4e0d\u4f1a\u5f71\u54cd\u5230\u8fc7\u53bb\u7684\u7b54\u6848**\u3002  \uff08\u53cd\u8fc7\u6765\u60f3\uff0c\u5982\u679c\u53ef\u4ee5\u5f80\u56de\u8df3\uff0c\u5219\u53ef\u80fd\u5b58\u5728\u4e00\u79cd\u6253\u724c\u65b9\u6cd5\u4f7f\u5f97\u5728\u67d0\u51e0\u4e2a\u683c\u5b50\u4e0a\u6765\u56de\u8df3\uff0c\u7b54\u6848\u5c31\u4e0d\u65ad\u589e\u52a0\uff0c\u8fd9\u5c31\u4f1a\u5bf9\u8fc7\u53bb\u7684\u7b54\u6848\u4ea7\u751f\u5f71\u54cd\uff09 **\u6240\u4ee5\u6ee1\u8db3\u65e0\u540e\u6548\u6027\u3002**\n\n1. **\u8df3\u5230\u5f53\u524d\u6700\u4f18\u89e3\u7684\u65b9\u6848\u4e00\u5b9a\u5305\u5bb9\u5148\u524d\u7684\u6700\u4f18\u89e3\u3002**    \n\u53cd\u8bc1\u6cd5\uff1a\u5728\u4f7f\u7528\u76f8\u540c\u7684\u724c\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u5b58\u5728\u53e6\u5916\u4e00\u79cd\u65b9\u6848\u8df3\u5230\u5f53\u524d\u683c\u5b50\u7684\u5206\u6570\u66f4\u5927\uff0c\u90a3\u4e48\u91c7\u7528\u8fd9\u79cd\u65b9\u6cd5\u5c31\u4f1a\u4f7f\u7b54\u6848\u53d8\u5927\uff0c\u4e0e\u201c\u6700\u4f18\u89e3\u201d\u77db\u76fe\u3002   \n**\u6545\u6ee1\u8db3\u6700\u4f18\u5b50\u7ed3\u6784\u6027\u8d28**\n\n\n## \u2462\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u628a\u6240\u6709\u7684\u72b6\u6001\u90fd\u6254\u8fdb\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u91cc\u53bb\uff0c\u5f97\u5230\uff1a\n\n$f(x,i,j,k,l)=max\\{ f(x+1,i-1,j,k,l),f(x+2,i,j-1,k,l),f(x+3,i,j,k-1,l),f(x+4,i,j,k,l-1) \\}$\n\n\u5176\u4e2d$f(x,i,j,k,l)$\u8868\u793a\uff08\u4e0d\u8003\u8651\u8fb9\u754c\uff09\u8df3\u5230\u7b2c$x$\u4e2a\u683c\u5b50\uff0c\u5269\u4e0b$i$\u5f20\u8d701\u683c\u724c\uff0c$j$\u5f20\u8d702\u683c\u724c\uff0c$k$\u5f20\u8d703\u683c\u724c\uff0c$l$\u5f20\u8d704\u683c\u724c\u80fd\u5f97\u5230\u7684\u6700\u5927\u5206\u6570\u3002\n\n\u7136\u800c\u8fd9\u6837\u5b50\uff0c\u6570\u7ec4\u5927\u5c0f\u4e3a$size=350*40*40*40*40>10^9$\uff0c$MLE+TLE$\n\n\u6240\u4ee5\u6211\u4eec\u8981**\u6d88\u9664\u5197\u4f59\u72b6\u6001\uff01**\n\n\u7531\u4e8e$x$\u7684\u5927\u5c0f\u53ef\u4ee5\u7531 $i+j*2+k*3+l*4$\u63a8\u51fa\uff0c\u6240\u4ee5\u6ca1\u5fc5\u8981\u4fdd\u5b58\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u6570\u7ec4\u5927\u5c0f\u5c31\u53d8\u6210\u4e86$40^4$\uff0c\u53ef\u4ee5\u63a5\u53d7\u3002\n\n**\u679a\u4e3e\u987a\u5e8f\u4ee5\u53ca\u8fb9\u754c\u6761\u4ef6\u7531\u72b6\u6001\u5b9a\u4e49\u65b9\u5f0f\u800c\u5b9a\u3002**  \u9700\u53c2\u8003\uff08\u7b2c\u4e00\u4e2a\u65b9\u7a0b\uff09$x$\u7684\u5927\u5c0f\u53d8\u5316\uff0c\u4ee5\u53ca\u4f60\u5b9a\u4e49\u7684$i,j,k,l$\u4e3a\u201c\u5269\u4f59\u7684\u5361\u724c\u6570\u201d\u8fd8\u662f\u201c\u5df2\u7528\u7684\u5361\u724c\u6570\u201d\u3002\u7efc\u5408\u8fd92\u70b9\uff0c\u7ed3\u5408\u81ea\u5df1\u5b9a\u4e49\u7684\u72b6\u6001\uff0c\u63a8\u4e00\u63a8\u5f53\u524d\u72b6\u6001\u9700\u8981\u4ece\u54ea\u4e9b\u72b6\u6001\u8f6c\u79fb\u8fc7\u6765\u5373\u53ef\u5f97\u5230\u679a\u4e3e\u987a\u5e8f\u3002\n\n## \u2463\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\n\u6eda\u52a8\u6570\u7ec4\u662f\u9012\u63a8\u6216\u8005\u52a8\u6001\u89c4\u5212\u4e2d\u7684\u4e00\u4e2a\u5f88\u5e38\u7528\u7684\u6280\u5de7\u3002    \n\n\u7531\u4e8e\u9012\u63a8\u987a\u5e8f\u56fa\u5b9a\uff0c\u5982\u679c\u67d0\u4e00\u4e2a\u72b6\u6001\u7684\u4fe1\u606f\u53ea\u4f1a\u88ab\u4f7f\u7528\u201c\u4e00\u8f6e\u201d\uff08\u4e0d\u662f\u4e00\u6b21\uff09\uff0c\u4e14\u5728\u4e0b\u4e00\u8f6e\u4e43\u81f3\u4e4b\u540e\u90fd\u4e0d\u4f1a\u7528\u5230\uff0c\u90a3\u4e48**\u5b58\u50a8\u8fd9\u4e2a\u4fe1\u606f\u7684\u5185\u5b58\u5219\u53ef\u80fd\u53ef\u4ee5\u88ab\u518d\u6b21\u5229\u7528\uff0c\u8fbe\u5230\u8282\u7701\u7a7a\u95f4\u7684\u76ee\u7684**\u3002   \n\n _\u4ee5\u4e0a\u662f\u7b14\u8005\u5bf9\u6eda\u52a8\u6570\u7ec4\u7684\u7406\u89e3\u3002_ \n \n\u5728\u672c\u9898\u4e2d\uff0c$f(i,j,k,l)$\u53ef\u4ee5\u7531\u6bcf\u4e00\u7ef4\u51cf\u4e00\u8f6c\u79fb\u6765\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u538b\u6389\u4e00\u7ef4\u3002    \n\n\u5982\u679c\u4f60\u8981\u538b\u6389\u7684\u4e00\u7ef4\u662f\u7b2c\u4e00\u7ef4\uff0c\u5728\u5b9e\u73b0\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4e3a\uff1a\n```cpp\nint f[2][41][41][41],now=0,pre=1;\n```\n\u7136\u540e**\u5c06\u65b9\u7a0b\u91cc\u7684\u6240\u6709$i$\u66ff\u6362\u6210$now$\uff0c\u6240\u6709\u7684$i-1$\u66ff\u6362\u6210$pre$**\u3002    \n\n\u6700\u540e\u5728\u679a\u4e3e$i$\u7684\u5faa\u73af\u7684\u6700\u540e\u52a0\u4e0a```swap(now,pre);```**\u628a$now$\u4e0e$pre$\u4ea4\u6362\uff0c\u63a5\u4e0b\u6765\u4f7f\u7528\u7684\u5c31\u662f\u521a\u624d$pre$\u4ee3\u8868\u7684\u7a7a\u95f4\u4e86**\u3002    \n\n\u89c2\u5bdf\u4ee3\u7801\u53ef\u5f97\uff0c\u7531\u4e8e```f[i-1][...][...][...]```\u5728\u4e4b\u540e\u90fd\u7528\u4e0d\u5230\u4e86\uff0c\u6240\u4ee5**\u5c06\u5b83\u8986\u76d6\u6389\u4e0d\u4f1a\u5f71\u54cd\u7b54\u6848**\u3002\n## \u2464AC\uff01  \n\u89c9\u5f97\u597d\u5c31\u70b9\u4e2a\u8d5e\u5457\uff01",
        "postTime": 1571712855,
        "uid": 25862,
        "name": "xzlhxc_ed",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u9898\u76ee\u662f\u660e\u663e\u7684\u52a8\u89c4\u9898~~\u60f3\u505a\u8fd9\u9898\u7684\u5e94\u8be5\u90fd\u77e5\u9053\u52a8\u89c4\u662f\u4ec0\u4e48\u7684\u5427,\u4e0d\u77e5\u9053\u7684\u53ef\u4ee5\u89c1[OI Wiki](https://oi-wiki.org/dp/)~~\n\n~~\u6211\u8fd9\u4e48\u5f31,\u624d\u4e0d\u4f1a\u544a\u8bc9\u4f60\u6211\u662f\u770b\u5230\u8fd9\u9898\u7684\u6807\u7b7e\u6ca1\u6709\u4ec0\u4e48\u533a\u95f4dp,\u8d39\u7528\u6d41\u4e4b\u7c7b\u7684\u4e1c\u897f\u624d\u505a\u8fd9\u9898\u7684~~\n\n\u597d\u4e86\u8a00\u5f52\u6b63\u4f20,\u6211\u4eec\u5148\u6765\u770b\u4e00\u4e0b\u52a8\u89c4\u7684\u672c\u8d28\u5e94\u7528:(By OI Wiki,\u5927\u4f6c\u81ea\u884c\u8df3\u8fc7\u6b64\u90e8\u5206)\n\n- \u52a8\u6001\u89c4\u5212\u5e94\u7528\u4e8e\u5b50\u95ee\u9898\u91cd\u53e0\u7684\u60c5\u51b5\uff1a\n- 1 \u8981\u53bb\u523b\u753b\u6700\u4f18\u89e3\u7684\u7ed3\u6784\u7279\u5f81\uff1b\n- 2 \u5c1d\u8bd5\u9012\u5f52\u5730\u5b9a\u4e49\u6700\u4f18\u89e3\u7684\u503c\uff08\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684\u8003\u8651\u4ecei-1\u8f6c\u79fb\u5230i\uff09\uff1b\n- 3 \u8ba1\u7b97\u6700\u4f18\u89e3\uff1b\n- 4 \u5229\u7528\u8ba1\u7b97\u51fa\u7684\u4fe1\u606f\u6784\u9020\u4e00\u4e2a\u6700\u4f18\u89e3\u3002\n\n\u6211\u81ea\u5df1\u89c9\u5f97\u5176\u4e2d\u6700\u91cd\u8981\u7684\u662f\u7b2c\u4e8c\u6761,\u56e0\u4e3a\u4ecei-1\u7684\u6700\u4f18\u89e3\u63a8\u5230i\u7684\u6700\u4f18\u89e3\u5173\u7cfb\u5230\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b,\u4e5f\u5c31\u662f\u4e00\u4e2a\u5173\u4e8e\u67d0\u4e00\u72b6\u6001\u6700\u4f18\u89e3\u7684\u901a\u5f0f(\u5f80\u5f80\u662f\u4ece\u524d\u4e00\u4e2a\u72b6\u6001\u63a8\u51fa\u7684),\u5982\u679c\u8f6c\u79fb\u65b9\u7a0b\u60f3\u4e0d\u51fa\u6765,\u90a3\u4e48\u518d\u600e\u4e48\u505a\u4e5f\u6ca1\u7528\u3002\n\n\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u8fd9\u4e00\u9898  [\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.org/problem/P1541)\n\n\u5177\u4f53\u601d\u8def\u5c31\u662f\u5f00\u4e00\u4e2a\u56db\u7ef4\u6570\u7ec4dp a,b,c,d,\u5bf9\u5e94\u56db\u79cd\u5361\u7247\u7684\u5f20\u6570,\u5e76\u8bb0\u5f55\u6b64\u65f6\u7684\u5f97\u5206, \u6700\u4f18\u89e3\u5206\u522b\u4e3a\u6bd4\u5f53\u524d\u5361\u7247\u5c11\u4e00\u5f20\u7684\u60c5\u51b5\u52a0\u4e0a\u5f53\u524d\u5206\u6570\u7684\u6700\u5927\u503c,\u5373\n```\ncnt=i+j*2+k*3+l*4-9; \ndp[i][j][k][l]=dp[i][j][k][l]=max(dp[i][j][k][l],max(dp[i-1][j][k][l]+arr[cnt],max(dp[i][j-1][k][l]+arr[cnt],max(dp[i][j][k-1][l]+arr[cnt],dp[i][j][k][l-1]+arr[cnt]))));\n```\n\n\u6211\u81ea\u5df1\u627e\u4e86\u4e9b\u8981\u70b9\u548c\u7ec6\u8282\u4e0a\u6ce8\u610f\u7684\u70b9:\n## \u5c24\u5176\u6ce8\u610f\u7b2c4\u70b9(\u8fb9\u754c\u5904\u7406)!!!!!!\n\n- 1: 4\u79cd\u5361\u7247\u5206\u522b\u4f1a\u4f7f\u4f60\u524d\u8fdb1,2,3,4\u683c,\u6240\u4ee5\u4e0d\u80fd\u4ece\u524d\u4e00\u4e2a\u683c\u5b50\u7684\u6700\u4f18\u89e3\u76f4\u63a5\u63a8\u540e\u4e00\u4e2a\u683c\u5b50\n- 2: \u8f93\u5165\u6570\u636e\u4fdd\u8bc1\u5230\u8fbe\u7ec8\u70b9\u65f6\u521a\u597d\u7528\u5149M\u5f20\u722c\u884c\u5361\u7247,\u4e0d\u5b58\u5728\u5361\u7247\u591a\u4f59\u7684\u60c5\u51b5\n- 3: \u6bcf\u4e2a\u5361\u7247\u6700\u591a\u4f7f\u75281\u6b21,\u800c\u4e0d\u662f\u6bcf\u79cd\u5361\u7247\n- 4: \u8457\u540d\u7684[hehezhou](https://www.luogu.org/space/show?uid=67371)\u5de8\u4f6c\u66fe\u4e91: \"\u6709\u4e00\u79cd OIer \u662f for \u4ece 1 \u5f00\u59cb\u7684\uff0c\u8fd8\u6709\u4e00\u79cd OIer \u662f for \u4ece 0 \u5f00\u59cb\u7684\u3002\u6211\u662f\u7b2c 1 \u79cd\u3002\u8bf7\u95ee\u6211 for \u4ece\u591a\u5c11\u5f00\u59cb\uff1f\"  \u5728\u52a8\u89c4\u7684\u5faa\u73af\u4e2d,\u6211\u4eec\u4ece1\u5f00\u59cb\u7684\u4f1a\u5728\u7ec6\u8282\u4e0a\u5403\u4e0d\u5c11\u4e8f(\u6bd4\u5982\u6211), \u56e0\u4e3a\u4e00\u5f00\u59cb\u65f6\u56db\u5f20\u5361\u7247\u5747\u4e3a0, \u5b58\u7684\u503c\u5e94\u8be5\u662f\u8d77\u70b9\u65f6\u7684\u5206\u503c,\u6240\u4ee5\u4e0a\u9762\u7684\u4ee3\u7801\u4e2dcnt\u662f-9\u800c\u4e0d\u662f-10\n\n\u8981\u8bb2\u7684\u4e5f\u5dee\u4e0d\u591a\u4e86,\u732e\u4e0a\u7801\u98ce\u5947\u7279\u7684\u4ee3\u7801\n```\n#include <bits/stdc++.h>\nusing namespace std;\nint dp[45][45][45][45],n,m,a,b,c,d,cnt,arr[355]; //dp\u6570\u7ec4\u5982\u4e0a\uff0carr\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u5206\u6570,a,b,c,d\u5206\u522b\u8bb0\u5f554\u79cd\u5361\u724c\u7684\u4e2a\u6570\nint main() {\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&arr[i]);\n\tfor(int i=1;i<=m;i++){\n\t\tint x;\n\t\tscanf(\"%d\",&x);\n\t\tif(x==1)a++;\n\t\tif(x==2)b++;\n\t\tif(x==3)c++;\n\t\tif(x==4)d++;\n\t}  \n\tdp[1][1][1][1]=arr[1]; //\u521d\u59cb\u5316(\u4ece1\u5f00\u59cb\u7684\u6211\u8c03\u4e86\u597d\u4e45......)\n\tfor(int i=1;i<=a+1;i++){ //\u5faa\u73af\u8fdb\u884c\u52a8\u89c4\u6838\u5fc3(\u4ece1\u5f00\u59cb\u7684\u6211\u8c03\u4e86\u597d\u4e45......)\n\t\tfor(int j=1;j<=b+1;j++){\n\t\t\tfor(int k=1;k<=c+1;k++){\n\t\t\t\tfor(int l=1;l<=d+1;l++){\n\t\t\t\t\tcnt=i+j*2+k*3+l*4-9; //\u8fb9\u754c\u5904\u7406(\u4ece1\u5f00\u59cb\u7684\u6211\u8c03\u4e86\u597d\u4e45......)\n\t\t\t\t\tdp[i][j][k][l]=max(dp[i][j][k][l],dp[i-1][j][k][l]+arr[cnt]);\n\t\t\t\t\tdp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j-1][k][l]+arr[cnt]);\n\t\t\t\t\tdp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k-1][l]+arr[cnt]);\n\t\t\t\t\tdp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k][l-1]+arr[cnt]);  //\u72b6\u6001\u8f6c\u79fb,\u6211\u89c9\u5f971\u884c\u592a\u957f\u5c31\u52064\u884c\u4e86,\u5176\u5b9e\u662f\u4e00\u6837\u7684\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<dp[a+1][b+1][c+1][d+1]<<endl;  //\u8f93\u51fa(\u4ece1\u5f00\u59cb\u7684\u6211\u8c03\u4e86\u597d\u4e45......)\n\treturn 0;\n}\n```",
        "postTime": 1569367401,
        "uid": 148121,
        "name": "zjy111",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u6570\u7ec4\u5b9a\u4e49\u89e3\u91ca\uff1a\n\t\t \n\t1.maxn[a][b][c][d]\u8868\u793a\u4f7f\u7528a\u5f20\u7b2c\u4e00\u79cd\u722c\u884c\n    \u724c\uff0cb\u5f20\u7b2c\u4e8c\u79cd\u722c\u884c\u724c\uff0cc\u5f20\u7b2c\u4e09\u79cd\u722c\u884c\u724c\uff0cd\u5f20\u7b2c\u56db\u79cd\u722c\u884c\u724c\n\t\uff08\u5373\u8d70\u5230\u7b2ca*1+b*2+c*3+d*4\u683c\uff09\u65f6\u6240\u80fd\u5f97\u5230\u7684\u6700\u591a\u7684\u5206\u6570 \t\n\t2.vis[a][b][c][d]\u7528\u6765\u5224\u91cd\uff0c\u8868\u793a\u4f7f\u7528a\u5f20\u7b2c\u4e00\u79cd\u722c\u884c\u724c\uff0cb\u5f20\u7b2c\u4e8c\u79cd\u722c\u884c\u724c\uff0cc\u5f20\u7b2c\u4e09\u79cd\u722c\u884c\u724c\uff0cd\u5f20\u7b2c\u56db\u79cd\u722c\u884c\u724c\n\t\uff08\u5373\u8d70\u5230\u7b2ca*1+b*2+c*3+d*4\u683c\uff09\u6709\u6ca1\u6709\u8d70\u8fc7 \uff080\u6ca1\u8d70\u8fc7\uff0c1\u8d70\u8fc7\uff09\t\n\t3.p[i]\uff081<=i<=4\uff09\u8bb0\u5f55\u603b\u5171\u6709\u591a\u5c11\u5f20i\u79cd\u722c\u884c\u724c\t\n\t4.val[i] \u8bb0\u5f55\u7b2ci\u683c\u4e0a\u7684\u5206\u6570 \n\t\n\t\u505a\u6cd5\uff1a\n\t\n\t\u52a8\u89c4\uff1a\n\t\u4ece\u540e\u5f80\u524d\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u4ece\u524d\u5f80\u540e\uff09\u8fdb\u884c\u9012\u5f52\u5f0f\u7684dp\uff0c\u5230\u4e00\u4e2a\u70b9\uff1a[a][b][c][d]\uff0c\n\t\u5373\u5230\u7b2ca*1+b*2+c*3+d*4\u683c \u7684\u524d\u4e00\u6b65\u53ea\u53ef\u80fd\u662f\n\t\n\t\ta-1,b,c,d\t\n\t\ta,b-1,c,d \n\t\ta,b,c-1,d\n\t\ta,b,c,d-1\t\n        \n\t\u8fd9\u56db\u79cd\u8d70\u8fc7\u6765\u7684\uff08\u524d\u63d0\u662fa,b,c,d\u4e0d\u4e3a0\uff09\uff0c\u6240\u4ee5\u7ee7\u7eed\u9012\u5f52\u8fd9\u56db\u79cd\u60c5\u51b5\uff0c\n\t\u5728\u8fd9\u56db\u79cd\u4e2d\u53d6\u6700\u5927\u503c \uff0c\u5b58\u5165maxn[a][b][c][d]\u3002 \n\t\n\t\u8fb9\u754c\u6761\u4ef6\uff1a\n\t1.\u5982\u679c\u4f7f\u7528\u8fc7a,b,c,d\u5f20\u8fd9\u56db\u79cd\u724c\uff0c\u6765\u5230\u8fc7\u8fd9\u4e2a\u70b9\uff0c\u5c31\u4e0d\u7528\u505a\u4e86\u3002\n\t2.\u5982\u679ca,b,c,d\u90fd\u4e3a0\uff0c\u5373\u7ad9\u5728\u8d77\u70b9\uff0c\u5219\u8fd4\u56de\u8d77\u70b9\u4ef7\u503c\u3002\uff08\u56e0\u4e3a\u4e4c\u9f9f\u68cb\u5b50\u81ea\u52a8\u83b7\u5f97\u8d77\u70b9\u683c\u5b50\u7684\u5206\u6570\uff09\n\t\n\t\u7b54\u6848\uff1a\n\tdp\u6700\u540e\u4e00\u4e2a\u70b9\u7684\u6700\u5927\u503c\uff08\u4ece\u540e\u5f80\u524d\u8c03\u7528\u9012\u5f52\uff09\n\tdp(p[1],p[2],p[3],p[4])\n  \n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n,m;\nint maxn[45][45][45][45]; \nint vis[45][45][45][45];\nint p[5],val[400]; \nint dp(int a,int b,int c,int d){\n\tif(a==0&&b==0&&c==0&&d==0)return val[1];//\u8fd4\u56de\u8d77\u70b9\u4ef7\u503c \n\tif(vis[a][b][c][d])return maxn[a][b][c][d];\n\t\n\tif(a) maxn[a][b][c][d]=max(maxn[a][b][c][d],dp(a-1,b,c,d));\n\tif(b) maxn[a][b][c][d]=max(maxn[a][b][c][d],dp(a,b-1,c,d));\n\tif(c) maxn[a][b][c][d]=max(maxn[a][b][c][d],dp(a,b,c-1,d));\n\tif(d) maxn[a][b][c][d]=max(maxn[a][b][c][d],dp(a,b,c,d-1));\n\t//\u56db\u79cd\u60c5\u51b5 \n\tvis[a][b][c][d]=1;//\u6253\u6807\u8bb0 \n\tmaxn[a][b][c][d]+=val[a*1+b*2+c*3+d*4+1];//\u52a0\u4e00\u662f\u56e0\u4e3a\uff1a\u6570\u7ec4\u7684\u8d77\u70b9\u662f\u4ece1\u5f00\u59cb\u8bb0\u5f55\u7684\uff0c\u800c\u4e0d\u662f0 \n\treturn maxn[a][b][c][d];\n}\nint main() {\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>val[i];\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tint x;\n\t\tcin>>x;\n\t\tp[x]++;//\u5f53\u524d\u8fd9\u4e00\u79cd\u724c\u7684\u603b\u4e2a\u6570\u52a0\u4e00 \n\t}\n\tcout<<dp(p[1],p[2],p[3],p[4])<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1535546001,
        "uid": 47908,
        "name": "\u5218\u827a\u8343",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u521d\u770b\u672c\u9898\uff0cdp\uff1f\u7a9d\u8fd9\u4e48\u5f31\uff0c\u8fd8\u662f\u7b97\u4e86\u5427\u3002\n\u518d\u770b\u770b\u6570\u636e\u8303\u56f4\uff0c\u8c8c\u4f3c~~\u633a\u6c34~~\u3002\n\u4e8e\u662f\u5c31\u6109\u5feb\u7684\u5f00\u59cb\u505a\u9898\u4e86\u3002\n\ndp\u4e0d\u4f1a\u5199\uff0c~~\u6211\u5927\u8bb0\u5fc6\u5316\u5929\u4e0b\u7b2c\u4e00~~\u3002\n\u4e8e\u662f\u5c31\u6109\u5feb\u7684\u5f00\u59cb\u7801\u4ee3\u7801\n```cpp\n#include<cstdio>\nusing namespace std;\nint t[5],a[355],dp[45][45][45][45],n,m;\nint max(int x,int y){return x>y?x:y;}\nint dfs(int w,int x,int y,int z){\n\tif(dp[w][x][y][z])return dp[w][x][y][z];\n\tif(w==t[1]&&x==t[2]&&y==t[3]&&z==t[4])return a[n];//\u4e0e\u5176\u4ed6\u9898\u89e3\u4e0d\u540c\u4e4b\u5904\uff0c\u6211\u662f\u9006\u63a8\u7684\uff0c\u4e8e\u662f\u9700\u8981\u52a0\u8fd9\u6761\u8fd4\u56de\u6761\u4ef6\n\tif(w<t[1])dp[w][x][y][z]=max(dp[w][x][y][z],dfs(w+1,x,y,z)+a[1+w+x*2+y*3+z*4]);\n\tif(x<t[2])dp[w][x][y][z]=max(dp[w][x][y][z],dfs(w,x+1,y,z)+a[1+w+x*2+y*3+z*4]);\n\tif(y<t[3])dp[w][x][y][z]=max(dp[w][x][y][z],dfs(w,x,y+1,z)+a[1+w+x*2+y*3+z*4]);\n\tif(z<t[4])dp[w][x][y][z]=max(dp[w][x][y][z],dfs(w,x,y,z+1)+a[1+w+x*2+y*3+z*4]);//\u5206\u522b\u8003\u8651\u56db\u5f20\u724c\u7684\u60c5\u51b5\n\treturn dp[w][x][y][z];\n}\nint main()\n{\n\tn,m;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tint x;\n\t\tscanf(\"%d\",&x);\n\t\tt[x]++;\n\t}\n\tdfs(0,0,0,0);\n    //\u9006\u63a8\u65e0\u9700\u8d4b\u521d\u503c\n\tprintf(\"%d\\n\",dp[0][0][0][0]);//\u76f4\u63a5\u8f93\u51fa\n\treturn 0;\n}\n```\n\u5c31\u8fd9\u6837\u795e\u5947\u7684\uff0c\u6211\u6c34\u8fc7\u4e86\u8fd9\u9053\u9898\uff08~~\u867d\u7136\u8fd9\u9898\u672c\u6765\u5c31\u5f88\u6c34\t~~\uff09\n\u7ffb\u4e86\u4e00\u756a\u9898\u89e3\uff0c\u8c8c\u4f3c\u6ca1\u6709\u9006\u63a8\u7684\uff0c\u6240\u4ee5\u53d1\u7bc7\u9898\u89e3\u5f25\u8865\u8fd9\u65b9\u9762\u7684\u7a7a\u7f3a\uff0c\u540c\u65f6\u8ba9CSP rp++\u5427",
        "postTime": 1572143929,
        "uid": 142067,
        "name": "wind_cross",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u6211\u8ba4\u4e3a\u8fd9\u9053\u9898\u662f\u7ebf\u6027DP\u7684\u96be\u9898\uff0c\u4f46\u662f\u6211\u8fd8\u662f\u8ba4\u4e3a\u8fd9\u9053\u9898\u7528\u7684\u662f\u80cc\u5305\u601d\u60f3\u3002\n\n\u770b\u4e86\u5927\u4f6c\u4eec\u7684\u89e3\u7b54\uff0c\u8fd9\u9053\u9898\u5c5e\u4e8e\u591a\u91cd\u80cc\u5305\uff0c\u7136\u9e45\u6211\u5e76\u4e0d\u4f1a\u3002\n\n\u6240\u4ee5\u6211\u7528\u6211\u7f13\u6162\u7684\u5927\u8111\u5c1d\u8bd5\u7740\u5207\u4e86\u8fd9\u9053\u9898\u3002\n\n\u56db\u4f4d\u6570\u7ec4DP\uff1b\n\n\u6211\u4eec\u53ea\u9700\u8981\u51b3\u7b56\uff0c\u9488\u5bf9\u4e8e\u6bcf\u5f20\u5361\uff0c\u653e\u8fd8\u662f\u4e0d\u653e\u3002\n\n\u8bf6\uff1f\u597d\u50cf\u662f01\u80cc\u5305\u7684\u601d\u60f3\uff1f\n\n01\u80cc\u5305\u6211\u4f1a\u554a\uff0c\u7136\u540e\u6211\u5c31\u618b\u4e86\u4e00\u4efd\u4ee3\u7801\u3002\n\nAC\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint n,m;\nint a[351];\nint dp[40][40][40][40];\nint z[4];\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n        scanf(\"%d\",&a[i]);\n    dp[0][0][0][0]=a[1];\n    for(int i=1;i<=m;i++)\n    {\n        int x;\n        scanf(\"%d\",&x);\n        z[x]++;\n    }\n    for(int i=0;i<=z[1];i++)\n        for(int j=0;j<=z[2];j++)\n            for(int k=0;k<=z[3];k++)\n                for(int l=0;l<=z[4];l++)\n                {\n                    int round=i+j*2+k*3+l*4+1;\n                    if(i)\n                        dp[i][j][k][l]=max(dp[i][j][k][l],dp[i-1][j][k][l]+a[round]);\n                    if(j)\n                        dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j-1][k][l]+a[round]);\n                    if(k)\n                        dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k-1][l]+a[round]);\n                    if(l)\n                        dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k][l-1]+a[round]);\n                }\n    printf(\"%d\",dp[z[1]][z[2]][z[3]][z[4]]);\n    return 0;\n}\n```\n",
        "postTime": 1563958504,
        "uid": 175131,
        "name": "\u5085\u601d\u7ef4666",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "## \u601d\u8def\n\n**\u4e00\u5171\u6709\u56db\u5f20\u5361\u7247\uff0c\u4ee3\u8868\u6240\u80fd\u8d70\u7684\u4e0d\u540c\u7684\u6b65\u6570\uff0c\u4e5f\u5c31\u662f\u5f53\u524d\u6570\u7684\u53d6\u5f97\uff0c\u6709\u53ef\u80fd\u662f\u5728\u524d\u4e00\u4e2a\u6570\u7684\u57fa\u7840\u4e0a\uff0c\u8d70\u4e86\u4e00\u6b65/\u4e24\u6b65/\u4e09\u6b65/\u56db\u6b65\u800c\u6765\uff0c\u56e0\u800c\u8003\u8651\u7528\u4e00\u4e2a\u56db\u7ef4\u7684\u72b6\u6001\u6570\u7ec4f[i][j][k][h]\u5206\u522b\u8868\u793a\u5361\u7247\u7684\u5f20\u6570\uff0cDP\u5217\u51fa\u6240\u6709\u53ef\u80fd\u7684\u72b6\u6001\u5373\u53ef\u3002**\n\n### \u8981\u6ce8\u610f\u7684\u7ec6\u8282\uff1a\n\n1. **\u7b2c\u4e00\u683c\u662f\u552f\u4e00\u7684\u8d77\u70b9\uff0c\u6240\u4ee5f[0][0][0][0]=a[1]\uff0c\u4e5f\u5c31\u662f\u4e00\u5f20\u5361\u7247\u90fd\u6ca1\u6709\u7528\u7684\u65f6\u5019\uff0c\u53d6\u5f97\u7684\u521d\u503c\u3002**\n2. **\u5982\u679c\u7528\u4e86\u7b2c\u4e00\u5f20\u5361\u7247\uff0c\u5219\u7528f[1][0][0][0]\u8868\u793a\uff0c\u6709f[1][0][0][0]=f[0][0][0][0]+a[2]\uff0c\u4e5f\u5c31\u662f\u4ece\u7b2c\u4e00\u683c\u5f00\u59cb\uff0c\u8d70\u4e86\u4e00\u683c\uff0c\u5b9e\u9645\u4e0a\u8981\u53d6\u7684\u6570\u662fa[2]\uff0c\u4e5f\u5c31\u662fa[t+1]\uff0c\u5176\u4e2dt\u4e3a\u5361\u7247\u6240\u89c4\u5b9a\u7684\u6b65\u6570\u3002**\n3. **\u6bcf\u5f20\u5361\u7247\u53ea\u80fd\u7528\u4e00\u6b21\uff0c\u4f46\u6bcf\u4e00\u79cd\u5361\u7247\u4e0d\u53ea\u4e00\u5f20\uff0c\u56e0\u6b64\u5728\u8f93\u5165\u7684\u65f6\u5019\uff0c\u9700\u8981\u505a\u4e2a\u7edf\u8ba1\u3002**\n4. **\u6ce8\u610f\u52a8\u89c4\u7684\u521d\u503c\uff0c\u5faa\u73af\u8981\u4ece0\u5f00\u59cb\uff0c\u8868\u793a\u6ca1\u6709\u7528\u5230\u76f8\u5e94\u7684\u5361\u7247\u3002**\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define N 360\n#define M 130\nusing namespace std;\nint n,m,x,a[N],b[5];\nint f[M][M][M][M];\nint main()\n{\n\t\tscanf(\"%d%d\",&n,&m);\n\t\tfor(int i=1;i<=n;i++)\n\t  \t\tscanf(\"%d\",&a[i]);\n\t\tfor(int i=1;i<=m;i++)\n\t\t{\n\t\t\tscanf(\"%d\",&x);\n\t\t\tb[x]++;\n\t\t}\n\t\tf[0][0][0][0]=a[1];\n\t\tfor(int i=0;i<=b[1];i++)\n\t\tfor(int j=0;j<=b[2];j++)\n\t\tfor(int k=0;k<=b[3];k++)\n\t\tfor(int h=0;h<=b[4];h++)\n\t\t{\n\t\t\tx=i+j*2+k*3+h*4;\n\t\t\tif(i) f[i][j][k][h]=max(f[i][j][k][h],f[i-1][j][k][h]+a[x+1]);\n\t\t\tif(j) f[i][j][k][h]=max(f[i][j][k][h],f[i][j-1][k][h]+a[x+1]);\n\t\t\tif(k) f[i][j][k][h]=max(f[i][j][k][h],f[i][j][k-1][h]+a[x+1]);\n\t\t\tif(h) f[i][j][k][h]=max(f[i][j][k][h],f[i][j][k][h-1]+a[x+1]);\n\t\t}\n\t\tprintf(\"%d\\n\",f[b[1]][b[2]][b[3]][b[4]]);\n\t\treturn 0;\n}\n```",
        "postTime": 1542372748,
        "uid": 98954,
        "name": "\u4e0d\u5b58\u5728\u4e4b\u4eba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "**\u8fd8\u67094\u5929noip\u4e86\uff01\uff01\uff01\u4fdd\u4f51\u4fdd\u4f51\uff01\uff01**\n\n\u8fd9\u9053\u9898\u6570\u636e\u5176\u5b9e\u975e\u5e38\u6c34\u554a\uff0c\u6211\u590d\u6742\u5ea630\\*30\\*30\\*30\\*350\u7684\uff0c\u672c\u6765\u6253\u7b97\u8fc7\u90e8\u5206\u5206\uff0c\u6ca1\u60f3\u5230\u7adf\u7136\u80fdA,\u53ea\u80fd\u8bf4\u6ca1\u6709\u5f97\u4e0d\u5230\u7684\u5206\uff0c\u53ea\u6709\u4e0d\u6562\u5199\u7684\u9898\uff01\n\n\u9996\u5148\u8bf4\u4e0b\u8fd9\u9053\u9898\u5f88\u660e\u663e\u662f\u5230dp\u561b\uff0c\u5bf9\u4e8e\u5f53\u524d\u72b6\u6001\u6709\u5f71\u54cd\u7684\u6709\uff1a1.\u76ee\u524d\u4f4d\u7f6e\uff1b2.\u8d701\u6b65\u7684\u7684\u5269\u4f59\u6570\u91cf\uff1b3.\u8d70\u4e24\u6b65\u7684\u5269\u4f59\u6570\u91cf\uff1b4.\u8d70\u4e09\u6b65\u7684\u5269\u4f59\u6570\u91cf\uff1b5.\u8d704\u6b65\u7684\u5269\u4f59\u6570\u91cf\uff1b\n\n\u6240\u4ee5\u76f4\u63a5\u5b9a\u4e49f[i][a][b][c][d]\u8868\u793a\u5230\u8fbe\u7b2ci\u4e2a\u4f4d\u7f6e\uff0c\u8d70\u4e86a\u4e2a1\u6b65\uff0cb\u4e2a2\u6b65\uff0cc\u4e2a3\u6b65\uff0cd\u4e2a4\u6b65\uff1b\n\n        \u7136\u540e\u8003\u8651\u5982\u679c\u8f6c\u79fb\uff0c\u5176\u5b9e\u5f88\u597d\u8f6c\u79fb\uff0c\u5f53\u524d\u4f4d\u7f6e\u53ef\u4ee5\u4e3a\u524d1\u6b65\u5230\u8fbe|\u524d2\u6b65\u5230\u8fbe|\u524d3\u6b65\u5230\u8fbe|\u524d4\u6b65\u5230\u8fbe\uff0c\u4f60\u53ea\u6709\u53d6\u4e00\u4e2a\u6700\u5927\u503c\u5c31\u597d\u5566\uff01\u6ce8\u610f\u7684\u662f\u7b2c\u4e00\u4f4d\u5982\u679c\u6211\u4eec\u5f00350\u7684\u8bdd\uff0c\u5185\u5b58\u5f00\u4e0d\u4e0b\uff0c\u800c\u5bf9\u76ee\u524d\u6709\u7528\u7684\u5c31\u53ea\u6709\u524d\u56db\u4e2a\u4f4d\u7f6e\uff0c\u6240\u4ee5\u5c31\u53ea\u7528\u5f00f[5][30][30][30][30]\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u62c5\u5fc3\u5f00\u4e0d\u4e0b\u4e86\uff0c\u679a\u4e3e\u7684\u65f6\u5019\u5bf94\u53d6\u4e2a\u4f59\u5c31\u597d\u4e86\uff01\n\u6700\u540e\u7b54\u6848\u5c31\u5728f[n%4][num[1]][num[2]][num[3]][num[4]]\n\n\u6700\u540e\u628a\u4ee3\u7801\u9644\u4e0a\uff1a\n\n                \n                \n```cpp\n#include<iostream>\n#include<cstdlib>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint f[5][45][45][45][45];\nint n,m;\nint ai[355];\nint num[5];\nint main()\n{\n    freopen(\"a.in\",\"r\",stdin);\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d\",&ai[i]);\n    }\n    int x;\n    for(int i=1;i<=m;i++)\n    {\n        scanf(\"%d\",&x);\n        num[x]++;\n    }\n    f[1][0][0][0][0]=ai[1];\n    for(int i=2;i<=n;i++)\n    {\n        for(int d=0;d<=num[4];d++)    \n        {\n            if(1+4*d>i) break;\n            for(int c=0;c<=num[3];c++)\n            {\n                if(1+4*d+3*c>i) break;\n                for(int b=0;b<=num[2];b++)\n                {\n                    if(1+4*d+3*c+2*b>i) break;\n                    for(int a=0;a<=num[1];a++)\n                    {    \n                        if(1+4*d+3*c+2*b+a>i) break;\n                        if(1+4*d+3*c+2*b+a!=i) continue;\n                        int now=i%4;\n                        int k=now;\n                        if(d>0)\n                        {\n                            k-=4;while(k<0) k+=4;\n                            f[now][a][b][c][d]=max(f[now][a][b][c][d],f[k][a][b][c][d-1]+ai[i]);\n                        }\n                        k=now;\n                        if(c>0)\n                        {\n                            k-=3;while(k<0) k+=4;\n                            f[now][a][b][c][d]=max(f[now][a][b][c][d],f[k][a][b][c-1][d]+ai[i]);\n                        }\n                        k=now;\n                        if(b>0)\n                        {\n                            k-=2;while(k<0) k+=4;\n                            f[now][a][b][c][d]=max(f[now][a][b][c][d],f[k][a][b-1][c][d]+ai[i]);\n                        }\n                        k=now;\n                        if(a>0)\n                        {\n                            k-=1;while(k<0) k+=4;\n                            f[now][a][b][c][d]=max(f[now][a][b][c][d],f[k][a-1][b][c][d]+ai[i]);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    printf(\"%d\\n\",f[n%4][num[1]][num[2]][num[3]][num[4]]);\n    return 0;\n}\n\n```",
        "postTime": 1510054355,
        "uid": 40959,
        "name": "heey",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u9996\u5148\u60f3\u5f53\u524d\u7684\u72b6\u6001\u4e8e\u4ec0\u4e48\u6709\u5173\n\n\u601d\u8003.....\n\n\u662f\u8d70\u5230\u54ea\u91cc\u5e76\u7528\u4e86\u51e0\u5f20\u724c\n\n\u6240\u4ee5\u6211\u4eec\u7684\u52a8\u6001\u89c4\u5212\u5751\u5b9a\u6709\u7528\u4e86\u51e0\u5f20\u724c\n\nf[a][b][c][d]\u8868\u793a\u7528\u4e86a\u5f201,b\u5f202\uff0cc\u5f203\uff0cd\u5f204\u7684\u5206\u6570\uff0c\n\n\u800c\u73b0\u5728\u8d70\u5230\u54ea\u91cc\u5c31\u662f1+a\\*1+b\\*2+c\\*3+d\\*4\n\n\u8f6c\u79fb\u7684\u65f6\u5019\u5c31\u679a\u4e3e\u4e0a\u4e00\u6b21\u7528\u4e86\u54ea\u4e00\u5f20\u5c31\u53ef\u4ee5\u4e86\n\n\u4e0a\u4ee3\u7801\n\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint n,m,x;\nint v[389],cnt[5],f[42][42][42][42];\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)scanf(\"%d\",&v[i]);\n    for(int i=1;i<=m;i++)scanf(\"%d\",&x),cnt[x]++;\n    for(int a=0;a<=cnt[1];a++){\n        for(int b=0;b<=cnt[2];b++){\n            for(int c=0;c<=cnt[3];c++){\n                for(int d=0;d<=cnt[4];d++){\n                    f[a][b][c][d]=max(max(f[max(a-1,0)][b][c][d],f[a][max(0,b-1)][c][d]),max(f[a][b][max(0,c-1)][d],f[a][b][c][max(0,d-1)]));\n                    f[a][b][c][d]+=v[1+a*1+b*2+c*3+d*4];\n                }\n            }\n        }\n    }\n    printf(\"%d\\n\",f[cnt[1]][cnt[2]][cnt[3]][cnt[4]]); \n    return 0;\n}\n\n```",
        "postTime": 1503361693,
        "uid": 49431,
        "name": "xun\u85b0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u9898\u76ee\u5341\u5206\u7b80\u5355\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u80cc\u5305\u95ee\u9898\n\n\u8003\u8651\u5230\u9898\u76ee\u6240\u7ed9\u4e00\u4e2a\u6570\u636e\u70b9\u4e00\u79d2\uff0c\u56e0\u6b64n\\*n\\*n\\*n=2560000\u662f\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u7684\n\n\u5c31\u662f\u6253\u4ee3\u7801\u9ebb\u70e6\u4e86\u70b9\uff0c\u6ce8\u610f\u522b\u6253\u9519\uff01\uff01\n\nps:\u6211\u7b2c\u4e00\u6b21\u6253\u9519\u4e86\u4e24\u4e2a\u6570\u5b57\u53ea\u5f97\u4e8650\u5206\uff08\u5e78\u597d\u4e0d\u662fnoip\uff09\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nint dp[41][41][41][41]={0},n[351],x[5],y[5];\nint main()\n{\n    int a,b;\n    cin>>a>>b;\n    for(int i=1;i<=a;i++)\n      cin>>n[i];\n    for(int i=1;i<=b;i++)\n      {\n          int c;cin>>c;\n          x[c]++;\n      }\n    for(y[1]=0;y[1]<=x[1];y[1]++)\n      for(y[2]=0;y[2]<=x[2];y[2]++)\n        for(y[3]=0;y[3]<=x[3];y[3]++)\n          for(y[4]=0;y[4]<=x[4];y[4]++)\n            {\n             if(y[1]>0&&dp[y[1]-1][y[2]][y[3]][y[4]]>dp[y[1]][y[2]][y[3]][y[4]])//\u80cc\u5305\u7684\u8fc7\u7a0b\uff0c\u679a\u4e3e\u56db\u79cd\u5361\u7247\n                 dp[y[1]][y[2]][y[3]][y[4]]=dp[y[1]-1][y[2]][y[3]][y[4]];\n             if(y[2]>0&&dp[y[1]][y[2]-1][y[3]][y[4]]>dp[y[1]][y[2]][y[3]][y[4]])\n                 dp[y[1]][y[2]][y[3]][y[4]]=dp[y[1]][y[2]-1][y[3]][y[4]];\n             if(y[3]>0&&dp[y[1]][y[2]][y[3]-1][y[4]]>dp[y[1]][y[2]][y[3]][y[4]])\n                 dp[y[1]][y[2]][y[3]][y[4]]=dp[y[1]][y[2]][y[3]-1][y[4]];\n             if(y[4]>0&&dp[y[1]][y[2]][y[3]][y[4]-1]>dp[y[1]][y[2]][y[3]][y[4]])\n                 dp[y[1]][y[2]][y[3]][y[4]]=dp[y[1]][y[2]][y[3]][y[4]-1];\n             dp[y[1]][y[2]][y[3]][y[4]]+=n[1+y[1]+2*y[2]+3*y[3]+4*y[4]];\n            }\n    cout<<dp[x[1]][x[2]][x[3]][x[4]];\n    return 0;\n}\n```",
        "postTime": 1476714473,
        "uid": 21332,
        "name": "nkoi18",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u7ef4\u6570\u6bd4\u8f83\u591a\uff0c\u4f46\u6570\u636e\u6bd4\u8f83\u5c0f\uff0c\u56db\u7ef4\u662f\u53ef\u4ee5\u7684\n\nf[i][j][k][l]\u8868\u793a\u7528\u4e86i\u5f20\u5361\u72471\uff0cj\u5f20\u5361\u72472\uff0ck\u5f20\u5361\u72473\uff0cl\u5f20\u5361\u72474\u65f6\u7684\u6700\u4f18\u89e3\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b:f[i][j][k][l]=max(f[i-1][j][k][l],f[i][j-1][k][l],f[i][j][k-1][l],f[i][j][k][l-1])+v[1+i\\*1+j\\*2+k\\*3+l\\*4]\n\n```cpp\n#include<iostream>\nusing namespace std;\nint f[41][41][41][41],n,m,v[351],w[121],p,maxn;\nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++){cin>>v[i];}\n    for(int i=1;i<=m;i++){cin>>p,w[p]++;}\n    f[0][0][0][0]=v[1];//\u4ec0\u4e48\u724c\u90fd\u4e0d\u7528\u5c31\u5728\u7b2c\u4e00\u683c\u7684\u6700\u4f18\u89e3\u662f\u7b2c\u4e00\u683c\u7684\u5206\u6570\n    for(int i=0;i<=w[1];i++)\n    {\n        for(int j=0;j<=w[2];j++)\n        {\n            for(int k=0;k<=w[3];k++)\n            {\n                for(int l=0;l<=w[4];l++)\n                {\n                    maxn=0;\n                    if(i!=0/*\u6700\u5c11*/&&f[i-1][j][k][l]>maxn){maxn=f[i-1][j][k][l];}//\u627e\u7528\u4e86\u4e0a\u4e00\u5f20\u5361\u724c\u7684\u6700\u4f18\u60c5\u51b5\n                    if(j!=0/*\u6bcf\u79cd*/&&f[i][j-1][k][l]>maxn){maxn=f[i][j-1][k][l];}\n                    if(k!=0/*\u8981\u7528*/&&f[i][j][k-1][l]>maxn){maxn=f[i][j][k-1][l];}\n                    if(l!=0/*\u96f6\u5f20*/&&f[i][j][k][l-1]>maxn){maxn=f[i][j][k][l-1];}\n                    f[i][j][k][l]=maxn+v[1+i*1+j*2+k*3+l*4];//\u52a0\u4e0a\u81ea\u5df1\u90a3\u4e00\u683c\n                }\n            }\n        }\n    }\n    cout<<f[w[1]][w[2]][w[3]][w[4]];//\u8f93\u51fa\u6700\u4f18\u89e3\n}\n```",
        "postTime": 1475491849,
        "uid": 14378,
        "name": "doby",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u3010\u601d\u8def\u3011\n\n\u7ebf\u6027\u5730\u75de\u3002\n\n\u603b\u611f\u89c9\u8fd9\u601d\u8def\u8d64\u88f8\u88f8\u7684\uff0c\u7ed3\u679c\u56e0\u4e3a\u5b83\u592a\u8d64\u88f8\u4e86\u53cd\u800c\u6ca1\u5f80\u8fd9\u65b9\u9762\u60f3\u2026\u2026\n\n\u53ea\u6709\u56db\u79cd\u724c\uff0c\u6240\u4ee5\u53ea\u7528\u56db\u91cd\u5faa\u73af\uff08\u4e09\u91cd\u5f85\u5f04\uff09\n\nf[i,j,k,l]=max{[i-1,j,k,l],f[i,j-1,k,l],f[i,j,k-1,l],f[i,j,k,l-1]}+s[i\\*1+j\\*2+k\\*3+l\\*4];\n\n\u5206\u522b\u8868\u793a\u53d6\u724c1\uff0c\u724c2\uff0c\u724c3\uff0c\u724c4\u7684\u6700\u5927\u503c\u2026\u2026\u5c31\u8fd9\u6837\u3002\n\nPS\uff1a\u5bf9\u4e8e\u51fa\u73b0\u5c0f\u4e8e0\u7684\u7ed3\u679c\u4e00\u5b9a\u8981\u9632\u4e00\u624b\u3002\n\n\u3010\u4ee3\u7801\u3011\n\n```delphi\n\nvar\n  i,j,k,l,n,m,p,p1,p2,p3,p4,t:longint;\n  s:array[0..400] of longint;\n  f:array[0..44,0..44,0..44,0..44] of longint;\n \n  function max(x,y:longint):longint;\n  begin\n    if x<y then exit(y) else exit(x);\n  end;\n \nbegin\n  readln(n,m);\n  for i:=1 to n do read(s[i]);\n  for i:=1 to m do\n  begin\n    read(p);\n    case p of\n      1:inc(p1);\n      2:inc(p2);\n      3:inc(p3);\n      4:inc(p4);\n    end;//case\n  end;\n  f[0,0,0,0]:=s[1];\n  for i:=0 to p1 do\n    for j:=0 to p2 do\n      for k:=0 to p3 do\n        for l:=0 to p4 do\n        begin\n          t:=1*i+2*j+3*k+4*l+1;\n          if (i>0) and (f[i,j,k,l]<f[i-1,j,k,l]+s[t]) then f[i,j,k,l]:=f[i-1,j,k,l]+s[t];\n          if (j>0) and (f[i,j,k,l]<f[i,j-1,k,l]+s[t]) then f[i,j,k,l]:=f[i,j-1,k,l]+s[t];\n          if (k>0) and (f[i,j,k,l]<f[i,j,k-1,l]+s[t]) then f[i,j,k,l]:=f[i,j,k-1,l]+s[t];\n          if (l>0) and (f[i,j,k,l]<f[i,j,k,l-1]+s[t]) then f[i,j,k,l]:=f[i,j,k,l-1]+s[t];\n        end;\n  writeln(f[p1,p2,p3,p4]);\nend.\n\n```",
        "postTime": 1442495510,
        "uid": 5431,
        "name": "\u96be\u4e0a\u52a0\u5170",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u770b\u9898\u76ee\u7684\u65f6\u5019\uff0c\u6ce8\u610f\u5230\u4e86\u4ee5\u4e0b\u51e0\u70b9\uff1a\n\n1.\u68cb\u5b50\u53ea\u67094\u79cd\uff0c\u4e14\u6bcf\u79cd\u68cb\u5b50\u90fd\u4e0d\u8d85\u8fc740\u79cd\n\n2.\u4fdd\u8bc1\u5230\u7ec8\u70b9\u7684\u65f6\u5019\uff0c\u68cb\u5b50\u5168\u90e8\u90fd\u7528\u5b8c\n\n\u8fd9\u4e0d\u7981\u7ed9\u4e86\u6211\u4e00\u79cd\u60f3\u6cd5\uff0c\u7528\u4e00\u4e2a4\u7ef4\u6570\u7ec4f\u8bb0\u5f55\u7528i\u4e2a1\uff0cj\u4e2a2\uff0ck\u4e2a3\uff0cl\u4e2a4\u65f6\u6700\u5927\u7684\u5f97\u5206\uff0c\u65f6\u95f4\u548c\u7a7a\u95f4\u5747\u4e3aO(n^4)n\u4e3a\u4e2a\u6570\u6700\u5927\u7684\u4e00\u79cd\u68cb\u5b50\u7684\u4e2a\u6570\u3002\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e3a\n\nf[i,j,k,l]:=max(f[i,j,k,l-1],f[i,j,k-1,k],f[i,j-1,k,l]+f[i-1,j,k,l])+a[1+i+j\\*2+k\\*3+l\\*4];\n\n\u9012\u5f52\u8fb9\u754c\u4e3af[0,0,0,0]:=a[1];\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u53d6i\u4e2a1\uff0cj\u4e2a2\uff0ck\u4e2a3\uff0cl\u4e2a4\u65f6\uff0c\u503c\u5e94\u4e3a\u6bcf\u79cd\u68cb\u5b50\u5404\u5c11\u53d6\u4e00\u4e2a\u7684\u65f6\u5019\u7684\u6700\u5927\u503c\uff0c\u518d\u52a0\u4e0a\u8fd9\u4e00\u70b9\u7684a\u6570\u7ec4\u7684\u503c\uff1b\u7a0b\u5e8f\u7684\u6b63\u786e\u6027\u663e\u7136\n\n\u63a5\u4e0b\u6765\u7ed9\u51fa\u6807\u7a0b\uff1avar\n\nf:array[-1..40,-1..40,-1..40,-1..40] of longint;//\u4e0b\u6807\u9700\u8981\u5b9a\u4e49\u5230-1\uff0c\u5426\u5219\u5c06\u4f1a\u6570\u7ec4\u4e0b\u6ea2\uff1b\n\nc,a:array[0..1000] of longint;//a\u8868\u793a\u8fd9\u4e00\u4e2a\u7684\u5206\u6570\uff0cc\u8868\u793a\u8fd9\u79cd\u68cb\u5b50\u7684\u4e2a\u6570\uff0c\u5982c[1]\u8868\u793a\u8df3\u4e00\u6b65\u7684\u68cb\u5b50\u7684\u4e2a\u6570\n\n//\u5176\u5b9ec\u6570\u7ec4\u6ca1\u5fc5\u8981\u5f00\u52300..1000\uff0c\u53ea\u662f\u4e3a\u4e86\u65b9\u4fbf\u800c\u5df2\uff0c\u540c\u65f6\u8fd9\u5bf9\u4e8e2560000\u7684\u6570\u7ec4\u6765\u8bf4\u4e0d\u7b97\u4ec0\u4e48\n\n```cpp\n  i,m,n,x,j,k,l:longint;\nfunction max(aa,bb:longint):longint;\nbegin\n  if aa>bb then exit(aa) else exit(bb);\nend;//\u53d6\u8f83\u5927\u503c\u7684\u51fd\u6570\nbegin\n  read(m,n);\n  for i:=1 to m do read(a[i]);\n  for i:=1 to n do\n    begin\n      read(x);\n      inc(c[x]);\n    end;\n  for i:=0 to c[1] do\n    for j:=0 to c[2] do\n      for k:=0 to c[3] do\n        for l:=0 to c[4] do//\u4e0d\u80fd\u7528downto\uff0c\u56e0\u4e3a\u540e\u9762\u7684\u9700\u8981\u901a\u8fc7\u524d\u9762\u7684\u7b97\u51fa\u6765\uff0c\u8981\u5c0f\u5fc3\uff0c\u4e0d\u80fd\u60f3\u5f53\u7136\u7684\u81ea\u5e95\u5411\u4e0a\u8ba1\u7b97\n          f[i,j,k,l]:=max(max(f[i-1,j,k,l],f[i,j-1,k,l]),max(f[i,j,k-1,l],f[i,j,k,l-1]))+a[i+j*2+k*3+l*4+1];//\u679a\u4e3e\u6240\u6709\u7684\u72b6\u6001\n  writeln(f[c[1],c[2],c[3],c[4]]);//\u524d\u63d0\u6761\u4ef6\u662f\u5f53\u6240\u6709\u7684\u68cb\u5b50\u90fd\u53d6\u5b8c\u7684\u65f6\u5019\uff0c\u6b63\u597d\u8d70\u5b8c\nend.\n\n```",
        "postTime": 1379148971,
        "uid": 734,
        "name": "lych",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "$\\text{\u4e00\u79cd\u5947\u5f02\u7684\u80cc\u5305\u65b9\u6cd5... \u8fd8\u633a\u6709\u8da3\u7684... \u8003\u8651\u80cc\u5305\uff0c\u662f\u4f7f\u7528\u5361\u724c\u6570\u91cf\u7684\u80cc\u5305\u3002}$\n\n$\\text{dp[a][b][c][d]\u4ee3\u8868\u4f7f\u7528a\u5f201\uff0cb\u5f202... \u6b64\u65f6\u53ef\u4ee5\u5f97\u5230\u7684\u6700\u5927\u5206\u6570\u3002}$\n\n$\\text{\u800c\u6b64\u9898\u6709\u8da3\u7684\u70b9\u5c31\u5728\u4e8e\u4f60\u53ef\u4ee5\u7528a, b, c , d\u63a8\u51fa\u5f53\u524d\u6240\u5728\u7684\u6b65\u6570(\u4f4d\u7f6e)}$\n\n$\\text{\u4ece\u800c\u8fbe\u5230\u8f6c\u79fb\u7684\u76ee\u7684\u3002}$\n\n\u7531\u9898\u610f\uff0c\u6613\u77e5\u8f6c\u79fb\u65b9\u7a0b :\n\n$$step = 1 + a * 1 + b * 2 + c * 3 + d * 4 \\text{  (\u56e0\u4e3a\u4e4c\u9f9f\u68cb\u662f\u75311\u53f7\u683c\u5f00\u59cb\u7684)}$$\n$$\ndp[a][b][c][d] = max \\begin{cases} \n\tdp[a - 1][b][c][d] + num[step] \\ \\ \\ \\ a != 0\\\\\n    dp[a][b - 1][c][d] + num[step] \\ \\ \\ \\ b != 0\\\\\n    dp[a][b][c - 1][d] + num[step] \\ \\ \\ \\ c != 0\\\\\n    dp[a][b][c][d - 1] + num[step] \\ \\ \\ \\ d != 0\\\\\n\\end{cases}\n$$\n\n\u521d\u59cb\u5316\uff1a$dp[0][0][0][0] = turtle[1]$\n\n\u76ee\u6807: $dp[cnt[1]][cnt[2]][cnt[3]][cnt[4]]$\n\n\u4ee3\u7801\u4e0d\u96be\uff0c\u5982\u4e0b\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\n#define REP(i, a, b) for(int i = a;i <= b;i ++)\nusing namespace std;\nconst int maxn = 45;\nconst int maxm = 1000;\nvoid chkmax(int &a, int b) {a = a > b ? a : b;}\nint n, m, s[maxm], cnt[6];\nint dp[maxn][maxn][maxn][maxn];\nsigned main() {\n\tios :: sync_with_stdio(false);\n\tcin >> n >> m;\n\tfor(int i = 1;i <= n;i ++) cin >> s[i];\n\tfor(int i = 1, tmp;i <= m;i ++) cin >> tmp, cnt[tmp] ++; \n\tdp[0][0][0][0] = s[1];\n\tREP(a, 0, cnt[1]) {\n\t\tREP(b, 0, cnt[2]) {\n\t\t\tREP(c, 0, cnt[3]) {\n\t\t\t\tREP(d, 0, cnt[4]) {\n\t\t\t\t\tint step = 1 + a + b * 2 + c * 3 + d * 4;\n\t\t\t\t\tif(a != 0) chkmax(dp[a][b][c][d], dp[a - 1][b][c][d] + s[step]);\n\t\t\t\t\tif(b != 0) chkmax(dp[a][b][c][d], dp[a][b - 1][c][d] + s[step]);\n\t\t\t\t\tif(c != 0) chkmax(dp[a][b][c][d], dp[a][b][c - 1][d] + s[step]);\n\t\t\t\t\tif(d != 0) chkmax(dp[a][b][c][d], dp[a][b][c][d - 1] + s[step]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout << dp[cnt[1]][cnt[2]][cnt[3]][cnt[4]];\n\treturn 0;\n}\n \n```",
        "postTime": 1576860619,
        "uid": 39993,
        "name": "\u5143\u5915",
        "ccfLevel": 0,
        "title": "P1541 \u4e4c\u9f9f\u68cb"
    },
    {
        "content": "\u5178\u578b\u7684dp\n\n\u6ce8\u91ca\u8be6\u89c1\u4ee3\u7801\uff1a\n```cpp\n#include<iostream>\n#include<algorithm>//max\u5934\u6587\u4ef6\nusing namespace std;\nint n,m,map[351],a[5],x,i,j,k,l,dp[41][41][41][41],sum,ans;//\u56db\u7ef4dp\uff0c\u8868\u793a\u56db\u79cd\u722c\u884c\u5361\u7247\u5404\u7528\u51e0\u5f20\u65f6\u7684\u603b\u5206\nint main()\n{\n\tcin>>n>>m;\n\tfor(i=1;i<=n;i++)\n\t\tcin>>map[i];//\u8f93\u5165\u6bcf\u4e2a\u70b9\u7684\u5206\u6570\n\tfor(i=1;i<=m;i++)\n\t{\n\t\tcin>>x;//\u8f93\u5165\u722c\u884c\u5361\n\t\ta[x]++;//\u6876\u7d2f\u52a0\n\t}\n\tdp[0][0][0][0]=map[1];//\u5343\u4e07\u522b\u5fd8\u8bb0\uff01\uff01\n\tfor(i=0;i<=a[1]&&i<n;i++)\n\t\tfor(j=0;j<=a[2]&&i+2*j<n;j++)\n\t\t\tfor(k=0;k<=a[3]&&i+2*j+3*k<n;k++)\n\t\t\t\tfor(l=0;l<=a[4]&&i+2*j+3*k+4*l<n;l++)//\u56db\u91cd\u5faa\u73af\n\t\t\t\t{\n\t\t\t\t\tsum=map[i+j*2+k*3+l*4+1];//\u52a01\u4e0d\u80fd\u5fd8\n\t\t\t\t\tif(i)\n\t\t\t\t\t\tdp[i][j][k][l]=dp[i-1][j][k][l]+sum;//dp\u6b63\u5f0f\u5f00\u59cb\n\t\t\t\t\tif(j)\n\t\t\t\t\t\tdp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j-1][k][l]+sum);\n\t\t\t\t\tif(k)\n\t\t\t\t\t\tdp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k-1][l]+sum);\n\t\t\t\t\tif(l)\n\t\t\t\t\t\tdp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k][l-1]+sum);\n\t\t\t\t}\n\tfor(i=0;i<=a[1]&&i<n;i++)\n\t\tfor(j=0;j<=a[2]&&i+2*j<n;j++)\n\t\t\tfor(k=0;k<=a[3]&&i+2*j+3*k<n;k++)\n\t\t\t\tif(!((n-1-i-j*2-k*3)%4))\n\t\t\t\t\tans=max(ans,dp[i][j][k][(n-1-i-j*2-k*3)/4]);\n\tcout<<ans<<endl;//\u8f93\u51fa\n\treturn 0;\n}\n```\n",
        "postTime": 1557485095,
        "uid": 47945,
        "name": "\u5f00\u6302\u8001\u53f8\u673a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": " _**P1541 \u4e4c\u9f9f\u68cb**_ \n\n------------\n\n\u9898\u76ee\u80cc\u666f\n\u5c0f\u660e\u8fc7\u751f\u65e5\u7684\u65f6\u5019\uff0c\u7238\u7238\u9001\u7ed9\u4ed6\u4e00\u526f\u4e4c\u9f9f\u68cb\u5f53\u4f5c\u793c\u7269\u3002\n\n\u9898\u76ee\u63cf\u8ff0\n\u4e4c\u9f9f\u68cb\u7684\u68cb\u76d8\u662f\u4e00\u884cNN\u4e2a\u683c\u5b50\uff0c\u6bcf\u4e2a\u683c\u5b50\u4e0a\u4e00\u4e2a\u5206\u6570\uff08\u975e\u8d1f\u6574\u6570\uff09\u3002\u68cb\u76d8\u7b2c1\u683c\u662f\u552f\u4e00\u7684\u8d77\u70b9\uff0c\u7b2cNN\u683c\u662f\u7ec8\u70b9\uff0c\u6e38\u620f\u8981\u6c42\u73a9\u5bb6\u63a7\u5236\u4e00\u4e2a\u4e4c\u9f9f\u68cb\u5b50\u4ece\u8d77\u70b9\u51fa\u53d1\u8d70\u5230\u7ec8\u70b9\u3002\n\n\u4e4c\u9f9f\u68cb\u4e2dMM\u5f20\u722c\u884c\u5361\u7247\uff0c\u5206\u62104\u79cd\u4e0d\u540c\u7684\u7c7b\u578b\uff08MM\u5f20\u5361\u7247\u4e2d\u4e0d\u4e00\u5b9a\u5305\u542b\u6240\u670944\u79cd\u7c7b\u578b\u7684\u5361\u7247\uff0c\u89c1\u6837\u4f8b\uff09\uff0c\u6bcf\u79cd\u7c7b\u578b\u7684\u5361\u7247\u4e0a\u5206\u522b\u6807\u67091,2,3,41,2,3,4\u56db\u4e2a\u6570\u5b57\u4e4b\u4e00\uff0c\u8868\u793a\u4f7f\u7528\u8fd9\u79cd\u5361\u7247\u540e\uff0c\u4e4c\u9f9f\u68cb\u5b50\u5c06\u5411\u524d\u722c\u884c\u76f8\u5e94\u7684\u683c\u5b50\u6570\u3002\u6e38\u620f\u4e2d\uff0c\u73a9\u5bb6\u6bcf\u6b21\u9700\u8981\u4ece\u6240\u6709\u7684\u722c\u884c\u5361\u7247\u4e2d\u9009\u62e9\u4e00\u5f20\u4e4b\u524d\u6ca1\u6709\u4f7f\u7528\u8fc7\u7684\u722c\u884c\u5361\u7247\uff0c\u63a7\u5236\u4e4c\u9f9f\u68cb\u5b50\u524d\u8fdb\u76f8\u5e94\u7684\u683c\u5b50\u6570\uff0c\u6bcf\u5f20\u5361\u7247\u53ea\u80fd\u4f7f\u7528\u4e00\u6b21\u3002\n\n\u6e38\u620f\u4e2d\uff0c\u4e4c\u9f9f\u68cb\u5b50\u81ea\u52a8\u83b7\u5f97\u8d77\u70b9\u683c\u5b50\u7684\u5206\u6570\uff0c\u5e76\u4e14\u5728\u540e\u7eed\u7684\u722c\u884c\u4e2d\u6bcf\u5230\u8fbe\u4e00\u4e2a\u683c\u5b50\uff0c\u5c31\u5f97\u5230\u8be5\u683c\u5b50\u76f8\u5e94\u7684\u5206\u6570\u3002\u73a9\u5bb6\u6700\u7ec8\u6e38\u620f\u5f97\u5206\u5c31\u662f\u4e4c\u9f9f\u68cb\u5b50\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u8fc7\u7a0b\u4e2d\u5230\u8fc7\u7684\u6240\u6709\u683c\u5b50\u7684\u5206\u6570\u603b\u548c\u3002\n\n\u5f88\u660e\u663e\uff0c\u7528\u4e0d\u540c\u7684\u722c\u884c\u5361\u7247\u4f7f\u7528\u987a\u5e8f\u4f1a\u4f7f\u5f97\u6700\u7ec8\u6e38\u620f\u7684\u5f97\u5206\u4e0d\u540c\uff0c\u5c0f\u660e\u60f3\u8981\u627e\u5230\u4e00\u79cd\u5361\u7247\u4f7f\u7528\u987a\u5e8f\u4f7f\u5f97\u6700\u7ec8\u6e38\u620f\u5f97\u5206\u6700\u591a\u3002\n\n\u73b0\u5728\uff0c\u544a\u8bc9\u4f60\u68cb\u76d8\u4e0a\u6bcf\u4e2a\u683c\u5b50\u7684\u5206\u6570\u548c\u6240\u6709\u7684\u722c\u884c\u5361\u7247\uff0c\u4f60\u80fd\u544a\u8bc9\u5c0f\u660e\uff0c\u4ed6\u6700\u591a\u80fd\u5f97\u5230\u591a\u5c11\u5206\u5417\uff1f\n\n\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\n\u8f93\u5165\u683c\u5f0f\uff1a\n\u6bcf\u884c\u4e2d\u4e24\u4e2a\u6570\u4e4b\u95f4\u7528\u4e00\u4e2a\u7a7a\u683c\u9694\u5f00\u3002\n\n\u7b2c11\u884c22\u4e2a\u6b63\u6574\u6570N,MN,M\uff0c\u5206\u522b\u8868\u793a\u68cb\u76d8\u683c\u5b50\u6570\u548c\u722c\u884c\u5361\u7247\u6570\u3002\n\n\u7b2c22\u884cNN\u4e2a\u975e\u8d1f\u6574\u6570\uff0ca_1,a_2,\u2026,a_Na \n1\n\u200b\t ,a \n2\n\u200b\t ,\u2026,a \nN\n\u200b\t \uff0c\u5176\u4e2da_ia \ni\n\u200b\t \u8868\u793a\u68cb\u76d8\u7b2cii\u4e2a\u683c\u5b50\u4e0a\u7684\u5206\u6570\u3002\n\n\u7b2c33\u884cMM\u4e2a\u6574\u6570\uff0cb_1,b_2,\u2026,b_Mb \n1\n\u200b\t ,b \n2\n\u200b\t ,\u2026,b \nM\n\u200b\t \uff0c\u8868\u793aM\u5f20\u722c\u884c\u5361\u7247\u4e0a\u7684\u6570\u5b57\u3002\n\n\u8f93\u5165\u6570\u636e\u4fdd\u8bc1\u5230\u8fbe\u7ec8\u70b9\u65f6\u521a\u597d\u7528\u5149MM\u5f20\u722c\u884c\u5361\u7247\u3002\n\n\u8f93\u51fa\u683c\u5f0f\uff1a\n11\u4e2a\u6574\u6570\uff0c\u8868\u793a\u5c0f\u660e\u6700\u591a\u80fd\u5f97\u5230\u7684\u5206\u6570\u3002\n\n\u8f93\u5165\u8f93\u51fa\u6837\u4f8b\n\n------------\n\n\u8f93\u5165\u6837\u4f8b#1\uff1a \n9 5\n6 10 14 2 8 8 18 5 17\n1 3 1 2 1\n\n------------\n\n\u8f93\u51fa\u6837\u4f8b#1\uff1a \n73\n\n------------\n\n\u8bf4\u660e\n\u6bcf\u4e2a\u6d4b\u8bd5\u70b91s1s\n\u5c0f\u660e\u4f7f\u7528\u722c\u884c\u5361\u7247\u987a\u5e8f\u4e3a1,1,3,1,21,1,3,1,2,\u5f97\u5230\u7684\u5206\u6570\u4e3a6+10+14+8+18+17=736+10+14+8+18+17=73\u3002\u6ce8\u610f\uff0c\u7531\u4e8e\u8d77\u70b9\u662f11\uff0c\u6240\u4ee5\u81ea\u52a8\u83b7\u5f97\u7b2c11\u683c\u7684\u5206\u657066\u3002\n\n\u5bf9\u4e8e30\\%30%\u7684\u6570\u636e\u67091\u2264N\u226430,1\u2264M\u2264121\u2264N\u226430,1\u2264M\u226412\u3002\n\n\u5bf9\u4e8e50\\%50%\u7684\u6570\u636e\u67091\u2264N\u2264120,1\u2264M\u2264501\u2264N\u2264120,1\u2264M\u226450\uff0c\u4e1444\u79cd\u722c\u884c\u5361\u7247\uff0c\u6bcf\u79cd\u5361\u7247\u7684\u5f20\u6570\u4e0d\u4f1a\u8d85\u8fc72020\u3002\n\n\u5bf9\u4e8e100\\%100%\u7684\u6570\u636e\u67091\u2264N\u2264350,1\u2264M\u22641201\u2264N\u2264350,1\u2264M\u2264120\uff0c\u4e1444\u79cd\u722c\u884c\u5361\u7247\uff0c\u6bcf\u79cd\u5361\u7247\u7684\u5f20\u6570\u4e0d\u4f1a\u8d85\u8fc74040\uff1b0\u2264a_i\u2264100,1\u2264i\u2264N,1\u2264b_i\u22644,1\u2264i\u2264M0\u2264a \ni\n\u200b\t \u2264100,1\u2264i\u2264N,1\u2264b \ni\n\u200b\t \u22644,1\u2264i\u2264M\u3002\n\n------------\n\n[turtle](https://www.luogu.org/problem/show?pid=P1541)\n\n\n------------\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint n,m,k,a;\nint score[351],card[5];\nint f[42][42][42][42];\nint readint(){\n    int i=0,f=1;\n    char ch;\n    for(ch=getchar();(ch<'0'||ch>'9') && ch!='-';ch=getchar());\n    if(ch=='-')    {\n        f=-1; \n        ch=getchar();\n    }\n    for(;ch>='0' && ch<='9';ch=getchar())\n        i=(i<<3)+(i<<1)+ch-'0';\n    return i*f;\n}\nint main(){ \n\tn=readint();\n\tm=readint();\n\tfor(int i=1;i<=n;i++) score[i]=readint();\n\tfor(int i=1;i<=m;i++){k=readint();card[k]++;}\n\tf[0][0][0][0]=score[1];\t\n\tfor(int i=0;i<=card[1];i++)\n\tfor(int j=0;j<=card[2];j++)\n\tfor(int k=0;k<=card[3];k++)\n\tfor(int p=0;p<=card[4];p++)\n\t{\n\t\ta=1+i+2*j+3*k+4*p;\n\t\tif(i) f[i][j][k][p]=max(f[i][j][k][p],f[i-1][j][k][p]+score[a]);\n\t\tif(j) f[i][j][k][p]=max(f[i][j][k][p],f[i][j-1][k][p]+score[a]);\n\t\tif(k) f[i][j][k][p]=max(f[i][j][k][p],f[i][j][k-1][p]+score[a]);\n\t\tif(p) f[i][j][k][p]=max(f[i][j][k][p],f[i][j][k][p-1]+score[a]);\n\t}\n\tcout<<f[card[1]][card[2]][card[3]][card[4]];\n\treturn 0;\n}\n```\n\n\n------------\n",
        "postTime": 1544421466,
        "uid": 158935,
        "name": "chest_dick",
        "ccfLevel": 0,
        "title": "P1541 \u4e4c\u9f9f\u68cb"
    },
    {
        "content": "\t\n \u6b64\u9898\u4e2d\uff0cans\u6570\u7ec4\u7528\u4e8e\u8bb0\u5f55\u4f7f\u7528i\u5f20\u201c1\u201d\uff0cj\u5f20\u201c2\u201d\uff0ck\u5f20\u201c3\u201d\uff0cl\u5f20\u201c4\u201d\u65f6\u7684\u6700\u5927\u5f97\u5206\ns1\uff5es4\u7528\u4e8e\u8bb0\u5f55\u201c1\u201d\u201c2\u201d\u201c3\u201d\u201c4\u201d\u5404\u81ea\u7684\u4e2a\u6570\uff0c\u4e4b\u540e4\u91cd\u5faa\u73af\u505a\u80cc\u5305\u5373\u53ef\n\n\t#include <cstdlib>\n\t#include <cstdio>\n\t#include <iostream>\n    #include <cmath>\n    using namespace std;\n    int ans[41][41][41][41] = {}, s1 = 0, s2 = 0, s3 = 0, s4 = 0;\n    int main() {\n        int n, m, a[351], b, i, j, k, l;\n        scanf(\"%d%d\", &n, &m);\n        for (i = 1; i <= n; i++)\n            scanf(\"%d\", &a[i]);\n        for (i = 1; i <= m; i++) {\n            scanf(\"%d\", &b);\n            if (b == 1) s1++;\n            if (b == 2) s2++;\n            if (b == 3) s3++;\n            if (b == 4) s4++;\n        }\n        ans[0][0][0][0] = a[1];\n        for (i = 0; i <= s1; i++)\n            for (j = 0; j <= s2; j++)\n                for (k = 0; k <= s3; k++)\n                    for (l = 0; l <= s4; l++) {\n                        int x = 1 + i + j * 2 + k * 3 + l * 4;\n                        if (i) ans[i][j][k][l] = max(ans[i][j][k][l], ans[i - 1][j][k][l] + a[x]);\n                        if (j) ans[i][j][k][l] = max(ans[i][j][k][l], ans[i][j - 1][k][l] + a[x]);\n                        if (k) ans[i][j][k][l] = max(ans[i][j][k][l], ans[i][j][k - 1][l] + a[x]);\n                        if (l) ans[i][j][k][l] = max(ans[i][j][k][l], ans[i][j][k][l - 1] + a[x]);\n                    }\n        printf(\"%d\\n\", ans[s1][s2][s3][s4]);\n        return 0;\n    }\n",
        "postTime": 1531808498,
        "uid": 29771,
        "name": "\u4fe1\u606f\u6280\u672f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "## \u9898\u610f\n> \u4e00\u884c$n$\u4e2a\u683c\u5b50\uff0c\u6bcf\u4e2a\u683c\u5b50\u6709\u4e00\u4e2a\u6743\u503c\u3002\u68cb\u5b50\u4e00\u5f00\u59cb\u5728\u8d77\u70b9\uff0c\u6709$m$\u5f20\u8ba9\u68cb\u5b50\u5411\u524d\u8d70\u7684\u5361\uff0c\u5206\u522b\u662f1\u6b65\u30012\u6b65\u30013\u6b65\u30014\u6b65\u3002\u6c42\u7528\u5149\u6240\u6709\u5361\u540e\u83b7\u5f97\u7684\u6700\u5927\u6743\u503c\u3002\n\n## \u601d\u8def\n> 1. \u4e00\u770b\u5c31\u662f\u52a8\u6001\u89c4\u5212\u6ca1\u9519\uff0c\u7528\u8ba1\u6570\u6570\u7ec4\u8bb0\u4e0b\u6bcf\u79cd\u5361\u7684\u6570\u91cf\u3002\n> 2. \u72b6\u6001 $f[a][b][c][d]$\u8868\u793a\u7528\u4e86$a$\u5f201\u6b65\u5361\uff0c$b$\u5f202\u6b65\u5361\uff0c$c$\u5f203\u6b65\u5361\uff0c$d$\u5f204\u6b65\u5361\u83b7\u5f97\u7684\u6700\u5927\u5206\u6570\u3002\n> 3. ~~xty\u540c\u5b66\u6709\u8bdd\u8bf4\uff1a~~\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u7528\u679a\u4e3e\u5230\u8fbe\u7b2c\u51e0\u4e2a\u683c\u5b50\uff1f~~\u5f88\u767d\u75f4~~\uff0c\u679a\u4e3e\u5b8c\u4f7f\u7528\u7684\u5361\u540e\uff0c\u8d70\u5230\u54ea\u4e2a\u683c\u5b50\u5c31\u88ab\u786e\u5b9a\u4e0b\u6765\u4e86\u3002\n> 4. \u72b6\u6001\u8f6c\u79fb\u8bf7\u89c1\u4ee3\u7801\u3002\n\n## \u91cd\u70b9\n> 1. \u597d\u5427\u53c8\u662fxty\u540c\u5b66\uff0c\u4ee5\u4e3a\u8981\u6309\u987a\u5e8f\u51fa\u5361\uff0c\u7ed3\u679c\u5199\u4e86\u4e2a\u8d3c\u6c34\u7684DP\uff0c\u7136\u540e\u676f\u5177\u4e86\u3002\n> 2. \u679a\u4e3e\u5b8c$abcd$\u540e\uff0c\u6c42\u51fa\u7684\u683c\u5b50\u5e94\u8be5\u4e3a$+2b+3c+4d+1$,$1$\u6ca1\u52a0\u6837\u4f8b$n$\u6b21\u5faa\u73af\u8fc7\u4e0d\u4e86\u3002\n\n## \u53cb\u60c5\u51fa\u6f14\n> [xty](http://120.27.222.204/user/7)\n\n``` cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n\nusing namespace std;\n\nconst int MAXC=45,MAXN=355;\n\nint f[MAXC][MAXC][MAXC][MAXC],v[MAXN],cnt[10];\nint n,m;\n\nvoid init(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1; i<=n; i++)\n\t\tscanf(\"%d\",&v[i]);\n\tfor (int i=1; i<=m; i++){\n\t\tint x;\n\t\tscanf(\"%d\",&x);\n\t\tcnt[x]++;\n\t}\n}\n\nvoid DP(){\n\tmemset(f,0,sizeof f);\n\tf[0][0][0][0]=v[1];\n\tfor (int a=0; a<=cnt[1]; a++)\n\t\tfor (int b=0; b<=cnt[2]; b++)\n\t\t\tfor(int c=0; c<=cnt[3]; c++)\n\t\t\t\tfor (int d=0; d<=cnt[4]; d++){\n\t\t\t\t\tint i=1+a*1+b*2+c*3+d*4;\n\t\t\t\t\tif (a>0) f[a][b][c][d]=max(f[a][b][c][d],f[a-1][b][c][d]+v[i]);\n\t\t\t\t\tif (b>0) f[a][b][c][d]=max(f[a][b][c][d],f[a][b-1][c][d]+v[i]);\n\t\t\t\t\tif (c>0) f[a][b][c][d]=max(f[a][b][c][d],f[a][b][c-1][d]+v[i]);\n\t\t\t\t\tif (d>0) f[a][b][c][d]=max(f[a][b][c][d],f[a][b][c][d-1]+v[i]);\n\t\t\t\t}\n}\n\nint main(){\n\tinit();\n\tDP();\n\tprintf(\"%d\\n\",f[cnt[1]][cnt[2]][cnt[3]][cnt[4]]) ;\n\treturn 0;\n}\n```",
        "postTime": 1527424969,
        "uid": 14908,
        "name": "Jack_Homes_Huang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u8fd9\u4e00\u9053\u9898\u770b\u4e0a\u53bb\u597d\u50cf\u6ca1\u6709\u601d\u8def\uff0c\u4f46\u662f\u8ba4\u771f\u7684\u770b\u4e00\u4e0b\uff0c\u5c31\u4f1a\n\n\u53d1\u73b0\u722c\u884c\u5361\u7247\u53ea\u6709\u56db\u79cd\uff0c\u6240\u4ee5\u6211\u4eec\u80fd\u60f3\u51faDP\u6570\u7ec4Score[i]\n\n[j][k][t]\uff0c\u8868\u793a\u56db\u79cd\u722c\u884c\u724c\u5206\u522b\u7528\u7684\u5f20\u6570\uff08i\u8868\u793a\u6bcf\u6b21\u722c\n\n\u884c1\u7684\uff09\uff0cNumber[i]\u8868\u793a\u6bcf\u6b21\u524d\u8fdbi\u4e2a\u7684\u722c\u884c\u724c\u7684\u5f20\u6570\n\nDp\u516c\u5f0f\u4e3a\uff1a\n```cpp\n\tScore[0][0][0][0]=Gezi[1];\n\tfor(i=0;i<=Number[1];i++) {\n\t\tfor(j=0;j<=Number[2];j++) {\n\t\t\tfor(k=0;k<=Number[3];k++) {\n\t\t\t\tfor(t=0;t<=Number[4];t++) {\n\t\t\t\t\tint tt=Find_length(i,j,k,t)+1;\n\t\t\t\t\tif(i!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i-1][j][k][t]+Gezi[tt]);\n\t\t\t\t\tif(j!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i][j-1][k][t]+Gezi[tt]);\n\t\t\t\t\tif(k!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i][j][k-1][t]+Gezi[tt]);\n\t\t\t\t\tif(t!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i][j][k][t-1]+Gezi[tt]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n```\n\u6709\u4e86\u8fd9\u4e2a\u601d\u8def\u4ee5\u540e\uff0c\u8fd9\u4e00\u9053\u9898\u5c31\u53d8\u5f97\u5f88\u7b80\u5355\u4e86\n\n\u7ed9\u5927\u5bb6\u4e00\u4e2a\u4ee3\u7801\u5427\uff1a\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#define MAXN 410\n#define MAXX 51\nusing namespace std;\ninline void read(int &Input) {//\u8f93\u5165\u4f18\u5316 \n\tchar Character;\n\tInput=0;\n\tCharacter=getchar();\n\twhile(Character>'9'||Character<'0')Character=getchar();\n\twhile(Character<='9'&&Character>='0') {\n\t\tInput*=10;\n\t\tInput+=Character-'0';\n\t\tCharacter=getchar();\n\t}\n}\ninline void write(int Output) {//\u8f93\u51fa\u4f18\u5316 \n\tchar Digit[11];\n\tint Lenth=0;\n\twhile(Output>0) {\n\t\tDigit[++Lenth]='0'+Output%10;\n\t\tOutput/=10;\n\t}\n\tfor(int i=Lenth; i>=1; i--) {\n\t\tputchar(Digit[i]);\n\t}\n\tprintf(\"\\n\");\n}\ninline int Find_length(int a,int b,int c,int d)//\u8868\u793a\u7528a\u5f20\u524d\u8fdb1\u7684\u724c\u548c\u3002\u3002\u3002\u3002\u3002\u7684\u524d\u8fdb\u683c\u6570 \n{\n\treturn a+b*2+c*3+d*4;//\u8fd9\u4e2a\u5c31\u6ca1\u6709\u4ec0\u4e48\u597d\u8bf4\u7684\u4e86 \n}\nint n,m;\nint Gezi[MAXN],Number[5];\nint Score[MAXX][MAXX][MAXX][MAXX];\ninline void Dp()\n{\n\tint i,j,k,t;\n\tread(n);read(m);//\u8f93\u5165\uff0c\u521d\u59cb\u5316 \n\tfor(i=1;i<=n;i++) read(Gezi[i]);\n\tfor(i=1;i<=m;i++)\n\t{\n\t\tread(t);Number[t]++;\n\t}\n\t//Dp\u7684\u6838\u5fc3\u7a0b\u5e8f\uff0c\u524d\u9762\u8bf4\u8fc7\u7684 \n\tScore[0][0][0][0]=Gezi[1];\n\tfor(i=0;i<=Number[1];i++) {\n\t\tfor(j=0;j<=Number[2];j++) {\n\t\t\tfor(k=0;k<=Number[3];k++) {\n\t\t\t\tfor(t=0;t<=Number[4];t++) {\n\t\t\t\t\tint tt=Find_length(i,j,k,t)+1;//\u8fd9\u91cc\u8bb0\u5f97+1\uff0c\u56e0\u4e3a\u5e2e\u52a9\u81ea\u5df1\u524d\u8fdb\u3002\u3002\u3002\u683c\uff0c\u6240\u4ee5\u8981\u52a0\u4e00\uff0c\u4ed6\u4e00\u5f00\u59cb\u662f\u7ad9\u5728\u7b2c1\u683c\u4e0a\u7684 \n\t\t\t\t\tif(i!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i-1][j][k][t]+Gezi[tt]);\n\t\t\t\t\tif(j!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i][j-1][k][t]+Gezi[tt]);\n\t\t\t\t\tif(k!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i][j][k-1][t]+Gezi[tt]);\n\t\t\t\t\tif(t!=0) Score[i][j][k][t]=max(Score[i][j][k][t],Score[i][j][k][t-1]+Gezi[tt]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\twrite(Score[Number[1]][Number[2]][Number[3]][Number[4]]);//\u8f93\u51fa \n}\nint main(){\n\tDp();return 0;\n}\n   \n```",
        "postTime": 1523166126,
        "uid": 66181,
        "name": "Celebrate",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u8bb0\u5fc6\u5316\u641c\u7d22\uff0cdfs\u5f62\u5f0f\u7684dp\n\n\u4ece\u6700\u540e\u4e00\u4e2a\u70b9\u5411\u524df[\u4f4d\u7f6e][\u7b2c\u4e00\u79cd\u5361][\u7b2c\u4e8c\u79cd\u5361][\u7b2c\u4e09\u79cd\u5361]\n\n\u672c\u6765\u7528dp\u8fc7\u4e86\uff0c\u7a81\u53d1\u5947\u60f3\u8fd9\u4e48\u5199\uff0c\u5927\u4f6c\u4e0d\u8981\u5410\u69fd\u65f6\u7a7a\u7684\u6d6a\u8d39\n\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint n,m,a[360],l[6],f[360][41][41][41];\nint MAX(int x,int y,int z,int c){\n    x=max(x,y);\n    z=max(z,c);\n    return max(x,z);\n}\nint dfs(int e,int x,int y,int z,int c,int aa,int bb,int cc,int dd){\n    aa=bb=cc=dd=0;//\u53d1\u73b0\u8fd9\u56db\u4e2a\u53d8\u91cf\u4e0d\u7528\u9012\u5f52\u5f62\u5f0f\u4f1a\u4e71\uff0c\u5c31\u5b9a\u4e49\u5728\u9012\u5f52\u91cc \n    if(f[e][x][y][z]!=0) return f[e][x][y][z];\n    if(e-1>0&&x-1>=0){\n        aa=dfs(e-1,x-1,y,z,c,0,0,0,0)+a[e];\n    }\n    if(e-2>0&&y-1>=0){\n        bb=dfs(e-2,x,y-1,z,c,0,0,0,0)+a[e];\n    }\n    if(e-3>0&&z-1>=0){\n        cc=dfs(e-3,x,y,z-1,c,0,0,0,0)+a[e];\n    }\n    if(e-4>0&&c-1>=0){\n        dd=dfs(e-4,x,y,z,c-1,0,0,0,0)+a[e];\n    }\n    f[e][x][y][z]=MAX(aa,bb,cc,dd);\n    return f[e][x][y][z];\n}\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++){\n        scanf(\"%d\",&a[i]);\n    }\n    for(int i=1;i<=m;i++){\n        scanf(\"%d\",&l[0]);\n        l[l[0]]++;\n    }\n    \n    f[1][0][0][0]=a[1];\n    printf(\"%d\\n\",dfs(n,l[1],l[2],l[3],l[4],0,0,0,0));\n    \n    return 0;\n}\n```",
        "postTime": 1509360786,
        "uid": 19021,
        "name": "CCWUCMCTS",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u5b89\u5229\u4e00\u53d1\u81ea\u5df1\u7684\u535a\u5ba2\uff1a[http://www.cnblogs.com/OIerShawnZhou/](http://www.cnblogs.com/OIerShawnZhou/)\n\n\uff08\u6211\u5e73\u5e38\u5199\u7684\u9898\u89e3\u90fd\u4f1a\u5f80\u535a\u5ba2\u91cc\u53d1\uff0c\u6b22\u8fce\u5404\u4f4d\u5927\u4f6c\u524d\u6765\u62cd\u7816\uff09\n\n\u8d85\u7ea7\u66b4\u529b\u7684\u56db\u6b21\u65b9DP\u3002\n\n\u6211\u4eec\u6bcf\u6b21\u7684\u51b3\u7b56\u662f\u9009\u62e9\u722c\u884c\u5361\u7247\u6765\u51b3\u5b9a\u4e4c\u9f9f\u68cb\u7684\u884c\u52a8\uff0c\u90a3\u4e48\u597d\uff0c\u6211\u4eec\u7528\u4e00\u4e2af\u6570\u7ec4\u8bb0\u5f55\u4f7f\u7528i\u5f201\u70b9\u6570\u5361\uff0cj\u5f202\u70b9\u6570\u5361\uff0ck\u5f203\u70b9\u6570\u5361\uff0cl\u5f204\u70b9\u6570\u5361\u6240\u80fd\u62ff\u5230\u7684\u6700\u591a\u5206\u6570\u3002\n\n\u90a3\u4e48\u65b9\u7a0b\u662ff[i][j][k][l] =max(f[ i-1 ][ j ][ k ][ l ],f[ i ][ j-1 ][ k ][ l ],f[ i ][ j ][ k-1 ][ l ],f[ i ][ j ][ k ][ l-1 ]) + a[1 + i + j\\*2 + k\\*3 + l\\*4];//\u4e3a\u4e86\u770b\u8d77\u6765\u65b9\u4fbf\n\n\u6211\u4eec\u5f00\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u6570\u7684\u724c\u4e00\u5171\u6709\u591a\u5c11\u5f20\uff0c\u7136\u540e\u4ece0\u5230\u8fd9\u4e2a\u6570\u679a\u4e3e\uff0c\u8fdb\u884c\u8f6c\u79fb\u5c31\u597d\u3002\n\n\u6211\u5199\u7684\u65b9\u6cd5\u6bd4\u8f83\u5947\u602a\uff0c\u6211\u7528\u4e86\u4e00\u4e2acalc\u51fd\u6570\u6765\u8ba1\u7b97\u8f6c\u79fb\uff0c\u56e0\u4e3a\u6211\u53d1\u73b0\u76f4\u63a5\u8f6c\u79fb\u6570\u7ec4\u8d8a\u754c\u4e86\u3002\u3002\n\n\u4e0d\u8fc7\u4e0d\u96be\u7406\u89e3\u5c31\u662f\u4e86\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#define maxn 355\n#define N 55\n#define check cout << \"ok\" << endl;\nusing namespace std;\nint f[N][N][N][N];\nint a[maxn];\nint n,m,point;\nint cnta[4];\n\nint calc(int x,int y,int z,int w){\n    int ans;\n    int temp[4];\n    ans = 0;\n    temp[1] = x;\n    temp[2] = y;\n    temp[3] = z;\n    temp[4] = w;\n    for (int i=1;i<=4;i++){\n        if ( temp[i] > 0 ){\n            temp[i]--;\n            if (ans < f[ temp[1] ][ temp[2] ][ temp[3] ][ temp[4] ])\n                ans = f[ temp[1] ][ temp[2] ][ temp[3] ][ temp[4] ];\n            temp[i]++;\n        }\n    }\n    return ans;\n}\n\nint main(){\n    cin >> n >> m;\n    for (int i=1;i<=n;i++)\n        cin >> a[i];\n    for (int i=1;i<=m;i++){\n        cin >> point;\n        cnta[point]++;\n    }\n\n    f[0][0][0][0] = a[1];\n    for (int i = 0;i <= cnta[1];i++)\n        for (int j = 0;j <= cnta[2];j++)\n            for (int k = 0; k <= cnta[3];k++)\n                for (int l = 0;l <= cnta[4];l++)\n                    if (a[1 + i + j*2 + k*3 + l*4] > 0)\n                        f[i][j][k][l] = calc(i,j,k,l) + a[1 + i + j*2 + k*3 + l*4];\n\n    cout << f[ cnta[1] ][ cnta[2] ][ cnta[3] ][ cnta[4] ] << endl;\n    return 0;\n}\n```",
        "postTime": 1505491731,
        "uid": 20197,
        "name": "ShawnZhou",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u5c31\u662fdp\u3002\u65e0\u6cd5\u89e3\u91ca\u3002\n\n\u53ea\u8981\u627e\u5230\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u6c34\u4e86\u3002\n\n\u4ee3\u7801\u8f83\u957f\uff0c\u5927\u7287\u5ffd\u7565\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint f[42][42][42][42],i,n,m,b[5],a[400],k,l1,l2,l3,l4;  \nint main()  \n{\n    scanf(\"%d%d\",&n,&m);  \n    for (i=1;i<=n;i++)  \n       scanf(\"%d\",&a[i]);  \n    for (i=1;i<=m;i++)  \n     {\n        scanf(\"%d\",&k);  \n         b[k]++;  \n    }   \n    int t;  \n    f[0][0][0][0]=a[1];  \n    for (l1=0;l1<=b[1];l1++)  \n       for (l2=0;l2<=b[2];l2++)  \n          for (l3=0;l3<=b[3];l3++)  \n             for (l4=0;l4<=b[4];l4++)  \n            {\n                t=l1+l2*2+l3*3+l4*4+1;  \n                if(l1)  f[l1][l2][l3][l4]=max(f[l1][l2][l3][l4],f[l1-1][l2][l3][l4]+a[t]);  \n                if(l2)  f[l1][l2][l3][l4]=max(f[l1][l2][l3][l4],f[l1][l2-1][l3][l4]+a[t]);  \n                if(l3)  f[l1][l2][l3][l4]=max(f[l1][l2][l3][l4],f[l1][l2][l3-1][l4]+a[t]);  \n                if(l4)  f[l1][l2][l3][l4]=max(f[l1][l2][l3][l4],f[l1][l2][l3][l4-1]+a[t]);  \n            }  \n    printf(\"%d\",f[b[1]][b[2]][b[3]][b[4]]);    \n}\n```",
        "postTime": 1505028530,
        "uid": 55861,
        "name": "Knight_Xu",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u4ece\u4ee5\u4e0b\u4e24\u70b9\u5c31\u53ef\u4ee5\u770b\u51fa\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e86\uff1a\n\n1.\u4e00\u770b\u5c314\u79cd\u724c\uff0c\u800c\u4e14\u6bcf\u4e00\u79cd\u724c\u90fd\u4e0d\u591a\u4e8e40\u5f20\u3002\n\n2.\u5230\u4e86\u7ec8\u70b9\u6bcf\u79cd\u724c\u90fd\u4f1a\u88ab\u7528\u5b8c\u3002\n\n\u6240\u4ee5\u65b9\u7a0b\u5c31\u51fa\u6765\u4e86:f[i,j,k,l]:=max{f[i-1,j,k,l]f[i,j-1,k,l],f[i,j,k-1,l],f[i,j,k,l-1]}+a[x];\n\n\u8fd9\u91cc\u7684i,j,k,l\u5206\u522b\u8868\u793a\u7528\u4e86i\u5f20\u7b2c\u4e00\u79cd\u724c\uff0cj\u5f20\u7b2c\u4e8c\u79cd\u724c\uff0ck\u5f20\u7b2c\u4e09\u79cd\u724c\uff0cl\u5f20\u7b2c\u56db\u79cd\u724c\uff0cx\u8868\u793a\u5f53\u524d\u5728\u7b2cx\u683c(\u81ea\u7136\u662f\u5728i+j\\*2+k\\*3+l\\*4+1\u5904)\u3002\n\n\u8fd9\u91cc\u8981\u8bf4\u660e\u4e00\u4e0b\u8981\u5728\u8bfb\u5165\u65f6\u5c31\u8bb0\u5f55\u6bcf\u4e00\u79cd\u724c\u7684\u6570\u91cf\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u5f00\u59cb\u679a\u4e3e\u4e86\u3002\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n    int m,n,f[42][42][42][42],c1,c2,c3,c4,a[351],b[351],maxn;\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    c1=0;//c1c2c3c4\u5b58\u6570\u91cf\n    c2=0;\n    c3=0;\n    c4=0;\n    for (int i=1;i<=n;i++)    \n    scanf(\"%d\",&a[i]);//\u8f93\u5165\u503c\nfor (int j=1;j<=m;j++)\n{\n    scanf(\"%d\",&b[j]);\n    if (b[j]==1) c1++;//\u52a0\u6570\u91cf\n    if (b[j]==2) c2++;\n    if (b[j]==3) c3++;\n    if (b[j]==4) c4++;\n}\nf[0][0][0][0]=a[1];//\u8d4b\u521d\u503c\uff0c\u4e00\u5f00\u59cb\u8d4b\u4e3a\u7b2c\u4e00\u5757\nfor (int i=0;i<=c1;i++)//\u5f00\u59cb\u5faa\u73af\u679a\u4e3e\uff0c\u7528\u54ea\u5f20\n    for (int j=0;j<=c2;j++)\n      for (int k=0;k<=c3;k++)\n        for (int l=0;l<=c4;l++)\n             {\n              maxn=0;\n        if (i)    maxn=max(f[i-1][j][k][l],maxn);//\u52a8\u5f52\u8f6c\u79fb\u65b9\u7a0b\n    if (j)    maxn=max(f[i][j-1][k][l],maxn);\n        if (k)    maxn=max(f[i][j][k-1][l],maxn);\n        if  (l)    maxn=max(f[i][j][k][l-1],maxn);\n// //\u4ee5\u4e0a\u56db\u884c\u662f\u7531\u4e0a\u9636\u6bb5\u5f00\u59cb\u679a\u4e3e\u6bcf\u4e00\u5f20\u724c\u6765\u9009\u51fa\u76ee\u6807\u9636\u6bb5\u7684\u6700\u4f18\u89e3      \n    f[i][j][k][l]=maxn+a[i+j*2+k*3+l*4+1];\n              }\nprintf(\"%d\",f[c1][c2][c3][c4]);//\u6700\u7ec8\u503c\u5c31\u662f\u5168\u7528\u5b8c\nreturn 0;\n}\n\n```",
        "postTime": 1504441684,
        "uid": 9181,
        "name": "\u5305\u5b50\u5165\u4fb5",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u88f8\u7684\u56db\u7ef4dp\n\n\n\u61d2\u5f97\u60f3\u9012\u63a8\u7684\u987a\u5e8f \uff08\u5176\u5b9e\u4f30\u8ba1\u4e5f\u60f3\u4e0d\u51fa\u6765\uff09\u76f4\u63a5\u5c31\u9012\u5f52\u5427\n\n\n\u6570\u636e\u91cf\u8fd8\u884c \u6211\u4e60\u60ef\u6570\u7ec4\u4e0b\u6807\u4ece1\u5f00\u59cb \u6570\u7ec4\u7a0d\u5fae\u518d\u5f00\u5927\u70b9\u53ef\u80fd\u5c31\u70b8\u4e86\u3002\u3002\u3002\n\n\n\u601d\u8def\u5c31\u662f \u5f53\u5904\u5728p\u4f4d\u7f6e\uff0c1,2,3,4,\u53f7\u724c\u5206\u522b\u8fd8\u5269le1,le2,le3,le4\u5f20\u7684\u65f6\u5019 \u53ef\u4ee5\u53d6\u5230\u7684\u6700\u5927\u503c\u662f \u5206\u522b\u75281\u53f7\u724c\u6216\u75282\u30013\u30014\u53f7\u724c\u7ee7\u7eed\u5411\u4e0b\u8d70\u7684 \u56db\u79cd\u9009\u62e9\u91cc \u7684\u6700\u5927\u503c \uff08\u6587\u5b57\u63cf\u8ff0\u4e00\u4e0b\u597d\u7406\u89e3\uff0c\u65b9\u7a0b\u5728\u4ee3\u7801\u91cc\u4e86\uff09\n\n\n\n\n\n\n\n    \n    \n\n\n    \n    \n    \n    \n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int maxn=352;\nconst int maxm=40;\nint map[maxn];\nint card[5];//\u8bfb\u5165\u7684\u65f6\u5019\u7528\u6765\u8bb0\u5f554\u79cd\u724c\u5206\u522b\u63d0\u4f9b\u4e86\u51e0\u5f20\nint n,m,ans;\nint f[maxn][maxm][maxm][maxm];//\u4e94\u7ef4\u59a5\u59a5\u7684\u4f1a\u70b8\nbool jilu[maxn][maxm][maxm][maxm];//\u8bb0\u5fc6\u5316\u6570\u7ec4\nint dp(int pos,int le2,int le3,int le4)\n{\n    if(jilu[pos][le2][le3][le4]==1) return f[pos][le2][le3][le4];\n    int le1=n-pos-le4*4-le2*2-le3*3; //le1 le2 le3 le4\u4e4b\u95f4\u7684\u5173\u7cfb \u5199\u51fa\u6765\u597d\u7406\u89e3\n    jilu[pos][le2][le3][le4]=1;\n    if(pos==n)\n    {\n        f[pos][le2][le3][le4]=map[n];\n        return map[n];\n    }\n    int tp=0;\n    if(le1>0) tp=max(tp,dp(pos+1,le2,le3,le4));\n    if(le2>0) tp=max(tp,dp(pos+2,le2-1,le3,le4));\n    if(le3>0) tp=max(tp,dp(pos+3,le2,le3-1,le4));\n    if(le4>0) tp=max(tp,dp(pos+4,le2,le3,le4-1));\n    f[pos][le2][le3][le4]=tp+map[pos];\n    return f[pos][le2][le3][le4];\n} \nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++) scanf(\"%d\",&map[i]);\n    for(int i=1,tp;i<=m;i++)\n    {\n        scanf(\"%d\",&tp);\n        card[tp]++;\n    } \n    ans=dp(1,card[2],card[3],card[4]);//\u4ece \u5904\u5728\u4f4d\u7f6e 1 \uff0c\u56db\u79cd\u724c\u90fd\u6ca1\u7528\u8fc7\u5f00\u59cbdp\n    printf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1502437507,
        "uid": 19751,
        "name": "\u6d6a\u77e2\u6742\u8d27\u5e97",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u5176\u5b9e\u8fd9\u9053\u9898\u60f3\u5230\u4e86\u5c31\u5f88\u7b80\u5355\uff0c\u4f46\u5f88\u96be\u60f3\u5230\u7528\u56db\u7ef4\u7684dp\uff0c\u8fd9\u975e\u5e38\u5c11\u89c1\u3002\n\n\n\u770b\u5230\u6bcf\u5f20\u724c\u4e0d\u8d85\u8fc740\u5f20\uff0c\u8fd9\u6570\u636e\u8303\u56f4\u5c31\u662f\u7ed9\u4f60\u5f00\u56db\u7ef4dp\u7684\n\n\n\u81ea\u7136\u60f3\u5230\u7528dp[ i ][ j ][ k ][ l ]\u8868\u793a\u7528\u4e86i\u5f201\uff0cj\u5f202\uff0ck\u5f203 , l \u5f204\u7684\u6700\u5927\u503c\n\n\n\u7528i\u5f201\uff0cj\u5f202\uff0ck\u5f203 , l \u5f204\u81ea\u7136\u8df3\u5230\u4e86 \u7b2c\uff081+i+2\\*j+3\\*k+4\\*l\uff09\u683c\uff0c\u679a\u4e3e\u56db\u79cd\u60c5\u51b5\uff0c\u518d\u52a0\u4e0a\u7b2c\uff081+i+2\\*j+3\\*k+4\\*l\uff09\u683c\u7684\u503c\u5c31\u884c\u4e86\n\n\n\u8f6c\u79fb\u65b9\u7a0b\u89c1\u4ee3\u7801\uff0c\u6253\u8d77\u6765\u592a\u70e6\u4e86\u2026\u2026\u2026\u2026\u2026\u2026\n\n\n\n\n```cpp\n    #include<cstdio>\n    #include<cstring>\n    #include<iostream>\n    #include<algorithm>\n    using namespace std;\n    int n,m;\n    int a[351];\n    int c[5]={0};\n    int dp[41][41][41][41]={0};\n    int main()\n    {\n        scanf(\"%d%d\",&n,&m);\n        for(int i=1;i<=n;i++)\n            scanf(\"%d\",&a[i]);\n        for(int i=1;i<=m;i++)\n        {\n            int x;\n            scanf(\"%d\",&x);\n            c[x]++; //\u7edf\u8ba1\u6bcf\u5f20\u724c\u7684\u6570\u91cf\n        }\n        for(int i=0;i<=c[1];i++)\n            for(int j=0;j<=c[2];j++)\n                for(int k=0;k<=c[3];k++)\n                    for(int l=0;l<=c[4];l++) //\u679a\u4e3e\n                        dp[i][j][k][l]=max(max(max(dp[max(0,i-1)][j][k][l],dp[i][max(0,j-1)][k][l]),dp[i][j][max(0,k-1)][l]),dp[i][j][k][max(0,l-1)])+a[1+i+2*j+3*k+4*l]; //\u56db\u79cd\u60c5\u51b5\u7684\u8f6c\u79fb\u65b9\u7a0b\u3002\u6000\u7591\u662f\u53f2\u4e0a\u6700\u957f\u2026\u2026\u2026\u2026\n        printf(\"%d\",dp[c[1]][c[2]][c[3]][c[4]]); //\u7528\u5b8c\u724c\u5c31\u5230\u8fbe\u4e86\u7ec8\u70b9\uff0c\u8f93\u51fa\u5373\u53ef\n        return 0;\n}\n```",
        "postTime": 1500376813,
        "uid": 21874,
        "name": "hicc0305",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u867d\u7136\u8bf4\uff0c\u66b4\u529b\u51fa\u5947\u8ff9\uff0c\u4f46\u662f\uff0c\u66b4\u529b\u7ec8\u5f52\u4e0d\u662f\u6700\u4f18\u89e3\uff0c\u90a3\u4e48\u5c31\u8981\u7528\u5230\u4e00\u4e9b\u5f62\u5f62\u8272\u8272\u5947\u5947\u602a\u602a\u7684\u5e26\u6709\u6280\u5de7\u7684\u641c\u7d22\uff0c\u5c31\u6bd4\u5982\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\n\n##\u57fa\u672c\u641c\u7d22\u65b9\u5f0f\n\n\n\u5c31\u662f\u4e00\u4e2adfs\uff0c\u975e\u5e38\u7b80\u5355\uff0c\u6b64\u5904\u7565\u3002\n\n\n##\u8bb0\u5fc6\u5316\u641c\u7d22\n\n\n\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c[\u5b98\u65b9\u89e3\u91ca](http://baike.baidu.com/link?url=t2Yv-773VdcOAqZK2VaKMwPThFInUJ3FHWzONWCSY55UHINXeczBveG0BMXpa2lyhpnORDAfgy2YIMP90GmvzRIOdkNovRokpZt9QS3bdmbuW3SAZUWpf2qB9JO4KCZO2pPBt7A2LOiQkaaansdaV\\_)\u4e3a\uff1a\u7b97\u6cd5\u4e0a\u4f9d\u7136\u662f\u641c\u7d22\u7684\u6d41\u7a0b\uff0c\u4f46\u662f\u641c\u7d22\u5230\u7684\u4e00\u4e9b\u89e3\u7528\u52a8\u6001\u89c4\u5212\u7684\u90a3\u79cd\u601d\u60f3\u548c\u6a21\u5f0f\u4f5c\u4e00\u4e9b\u4fdd\u5b58\u3002\n\n\u8bf4\u767d\u4e86\u5c31\u662f\u628a\u4ee5\u524d\u641c\u8fc7\u7684\u8bb0\u4f4f\uff0c\u4ee5\u540e\u5c31\u4e0d\u7528\u641c\u4e86\uff0c\u76f4\u63a5\u8c03\u7528\u6570\u7ec4\u4e2d\u4fdd\u5b58\u7684\u7b54\u6848\uff0c\u4e0b\u9762\u4ee3\u7801\u4e2d\u7528dp\u6570\u7ec4\u8fdb\u884c\u8bb0\u5f55\u9009 i \u5f201\uff0cj \u5f202\uff0ck \u5f203\uff0cl \u5f204 \u80fd\u5f97\u5230\u7684\u6700\u4f18\u89e3\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <algorithm>\n#include <cmath> \nusing namespace std;\nint scr[360],crd[5],m,n,dp[41][41][41][41];\nint dfs(int i,int j,int k,int l,int now)\n{\n    if(now==n)    return 0;              //\u5230\u8fbe\u8fb9\u754c\u8fd4\u56de0\n    \n    if(i)                                //\u5982\u679c\u7b2c\u4e00\u5f20\u5361\u7247\u6709\u5269\u4f59\uff0c\u4e0b\u540c\n    {\n        if(dp[i-1][j][k][l])       //\u5982\u679c\u4ee5\u524d\u641c\u8fc7\uff0c\u76f4\u63a5\u8c03\u7528\uff0c\u4e0b\u540c\n            dp[i][j][k][l]=max(dp[i][j][k][l],dp[i-1][j][k][l]+scr[now+1]);\n        else                       //\u5982\u679c\u6ca1\u641c\u8fc7\uff0c\u90a3\u5c31dfs\u641c\n            dp[i][j][k][l]=max(dp[i][j][k][l],dfs(i-1,j,k,l,now+1)+scr[now+1]);\n    }\n    \n    if(j)\n    {\n        if(dp[i][j-1][k][l])\n            dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j-1][k][l]+scr[now+2]);\n        else\n            dp[i][j][k][l]=max(dp[i][j][k][l],dfs(i,j-1,k,l,now+2)+scr[now+2]);\n    }\n    \n    if(k)\n    {\n        if(dp[i][j][k-1][l])\n            dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k-1][l]+scr[now+3]);\n        else\n            dp[i][j][k][l]=max(dp[i][j][k][l],dfs(i,j,k-1,l,now+3)+scr[now+3]);\n    }\n    \n    if(l)\n    {\n        if(dp[i][j][k][l-1])\n            dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k][l-1]+scr[now+4]);\n        else\n            dp[i][j][k][l]=max(dp[i][j][k][l],dfs(i,j,k,l-1,now+4)+scr[now+4]);\n    }\n    return dp[i][j][k][l];              //\u5c06dp\u4e2d\u5b58\u7684\u7ed3\u679c\u5e26\u56de\n}\nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n        cin>>scr[i];\n    for(int i=1;i<=m;i++)\n    {\n        int x;\n        cin>>x;\n        crd[x]++;\n    }\n    \n    cout<<dfs(crd[1],crd[2],crd[3],crd[4],1)+scr[1];         //\u6ce8\u610f\u8981\u52a0\u4e0a\u7b2c\u4e00\u4e2a\u683c\u5b50\u7684\u5f97\u5206\n    return 0;\n}\n```\n\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u4ee3\u7801\u5728\u6d1b\u8c37\u4e0a\u8bc4\u6d4b \u5341\u4e2a\u70b9\u7684\u603b\u65f6\u95f4\u4e3a 239ms\n\n\n##\u52a8\u6001\u89c4\u5212\n\n\n\u52a8\u6001\u89c4\u5212 \u5373 dp\uff0c[\u5b98\u65b9\u89e3\u91ca](http://baike.baidu.com/item/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92)\u4e3a\uff1a\u52a8\u6001\u89c4\u5212(dynamic programming)\u662f\u8fd0\u7b79\u5b66\u7684\u4e00\u4e2a\u5206\u652f\uff0c\u662f\u6c42\u89e3\u51b3\u7b56\u8fc7\u7a0b(decision process)\u6700\u4f18\u5316\u7684\u6570\u5b66\u65b9\u6cd5\u3002\n\n\u8bf4\u767d\u4e86\u5c31\u662f\u5206\u9636\u6bb5\u7684\u89e3\u51b3\u95ee\u9898\uff0c\u5bf9\u4e8e\u76f8\u540c\u7684\u9898\u76ee\u6765\u8bf4\uff0c\u8017\u65f6\u6781\u77ed\uff0c\u662f\u6bd4\u8d5b\u4e2d\u7684\u91cd\u8981\u89e3\u9898\u65b9\u6cd5\u4e4b\u4e00\uff0c\u4f46\u662f\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u7684\u63a8\u51fa\u4e5f\u662f\u4ee4\u8bb8\u591a\u9009\u624b\u5934\u75bc\u7684\u4e00\u5927\u96be\u9898\uff0c\u5982\u679c\u5199\u597d\u4e86\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u8bdd\uff0c\u63a8\u51fa\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e5f\u5c31\u5f88\u7b80\u5355\u4e86\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\nint now,scr[360],crd[5],maxn,m,n,dp[41][41][41][41];\nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n        scanf(\"%d\",&scr[i]);\n    for(int i=1;i<=m;i++)\n    {\n        int x;\n        scanf(\"%d\",&x);\n        crd[x]++;\n    }\n    for(int i=0;i<=crd[1];i++)\n        for(int j=0;j<=crd[2];j++)\n            for(int k=0;k<=crd[3];k++)\n                for(int l=0;l<=crd[4];l++)\n                {\n                    if(i) dp[i][j][k][l]=max(dp[i][j][k][l],dp[i-1][j][k][l]);\n                    if(j) dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j-1][k][l]);\n                    if(k) dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k-1][l]);\n                    if(l) dp[i][j][k][l]=max(dp[i][j][k][l],dp[i][j][k][l-1]);           \n                    //\u4ee5\u4e0a\u56db\u884c\u662f\u7531\u4e0a\u9636\u6bb5\u5f00\u59cb\u679a\u4e3e\u6bcf\u4e00\u5f20\u724c\u6765\u9009\u51fa\u76ee\u6807\u9636\u6bb5\u7684\u6700\u4f18\u89e3\n                    dp[i][j][k][l]+=scr[i+j*2+k*3+l*4+1];              //\u52a0\u4e0a\u5f53\u524d\u683c\u5b50\u7684\u5f97\u5206\n                }\n    cout<<dp[crd[1]][crd[2]][crd[3]][crd[4]];\n    return 0;\n}\n```\n\u7528\u52a8\u89c4\u5199\u7684\u4ee3\u7801\u5728\u6d1b\u8c37\u4e0a\u8bc4\u6d4b \u5341\u4e2a\u70b9\u7684\u603b\u65f6\u95f4\u4e3a203ms\u3002\n\n\n\u53ef\u89c1\u52a8\u89c4\u548c\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u8fd0\u884c\u65f6\u95f4\u57fa\u672c\u76f8\u540c\uff0c\u6240\u4ee5\u5982\u679c\u80fd\u63a8\u51fa\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u5e76\u4e14\u975e\u5e38\u81ea\u4fe1\u7684\u8bdd\uff0c\u5f53\u7136\u662f\u7528\u52a8\u89c4\u597d\u4e00\u4e9b\uff0c\u4f46\u662f\u5982\u679c\u6ca1\u6709\u63a8\u51fa\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b \u6216\u8005\u4f60\u5e76\u4e0d\u786e\u5b9a\u7684\u8bdd\uff0c\u8fd8\u662f\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\u597d\u4e00\u4e9b\u3002\n",
        "postTime": 1486524398,
        "uid": 18355,
        "name": "\u767d\u5f00",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u9898\u76ee\u601d\u8def\u697c\u4e0a\u5404\u4f4d\u5df2\u7ecf\u8bf4\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u9274\u4e8e\u8fd9\u9053\u9898\u4ee3\u7801\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u6765\u5206\u4eab\u4e00\u4e0b\u7b80\u5316\uff08\u7f8e\u5316\uff09\u4ee3\u7801\u7684\u65b9\u6cd5\n\n\n```cpp\n//P1541 \u4e4c\u9f9f\u68cb\n\n#include <iostream>\n\n//#define LOCAL //\u672c\u5730\u6d4b\u8bd5\u65f6\u53bb\u6389\u6ce8\u91ca\n\n#ifdef LOCAL\n\n\n#include <ctime> //\u672c\u5730\u6d4b\u8bd5\u8ba1\u65f6\n#endif\n#define for0(i,n) for(int i=0;i<=n;i++) //\u7b80\u5316for\u5faa\u73af\u4ee3\u7801\n#define for1(i,n) for(int i=1;i<=n;i++)\n#define f(x,y,z,w) F[x][y][z][w] //\u7b80\u5316\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4ee3\u7801\uff0c\u51cf\u5c11[]\u7684\u6570\u91cf\nusing namespace std;\nconst int maxn=352,maxc=42;\nint n,m,a[maxn],b,c[6];\nint F[maxc][maxc][maxc][maxc];\nint main()\n{\n    cin>>n>>m;\n    for1(i,n)\n        cin>>a[i];\n    for1(i,m)\n    {\n        cin>>b;\n        c[b]++;\n    }\n\n#ifdef LOCAL\nclock\\_t runtime=clock(); //<ctime>\u4e2d\u7684clock()\u8fd4\u56de\u4ece\u7a0b\u5e8f\u5f00\u59cb\u81f3\u6b64\u7684\u65f6\u95f4\uff08\u6beb\u79d2\uff09\n\n\n#endif\n    for0(x,c[1])\n        for0(y,c[2])\n            for0(z,c[3])\n                for0(w,c[4])\n                    f(x,y,z,w)=max(\n                        max((x?f(x-1,y,z,w):0),\n                            (y?f(x,y-1,z,w):0)),\n                        max((z?f(x,y,z-1,w):0),\n                            (w?f(x,y,z,w-1):0)) //\u7528?:\u548c<iostream>\u4e2d\u7684max():\u7b80\u5316\u4ee3\u7801\n                        )+a[x+y*2+z*3+w*4+1]; //\u5206\u884c\u5199\u4fbf\u4e8e\u770b\u6e05\u65b9\u7a0b\u5b9e\u8d28\n                    //cout<<\"f(\"<<i<<\",\"<<x<<\",\"<<y<<\",\"<<z<<\",\"<<w<<\")=\"<<f(i,x,y,z,w)<<' '; //\u4e2d\u95f4\u8f93\u51fa\n    cout<<f(c[1],c[2],c[3],c[4])<<endl;\n\n#ifdef LOCAL\n\n    runtime=clock()-runtime;\n    cout<<\"RUNTIME=\"<<runtime<<endl; //\u4ece\u8f93\u5165\u7ed3\u675f\u5230\u7a0b\u5e8f\u7ed3\u675f\u6240\u7528\u7684\u65f6\u95f4\uff08\u6beb\u79d2\uff09\uff0c\u5927\u4e8e1000\u5373\u8d85\u65f6\n//\u6b64\u8ba1\u65f6\u6cd5\u5728\u4f7f\u7528\u952e\u76d8\u8f93\u5165\u65f6\u5c24\u4e3a\u6709\u6548\n#endif\n    return 0;\n}\n\n```",
        "postTime": 1478012428,
        "uid": 21575,
        "name": "C8H17OH",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u697c\u4e0b\u7684\u5404\u4f4d\u5df2\u7ecf\u628a\u601d\u8def\u8bb2\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u4e0d\u5fc5\u8981\u591a\u89e3\u91ca\u3002\n\n\u76f4\u63a5\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\nusing namespace std;\nint n,m,f[41][41][41][41],a[351],b[121],t,maxn;\nint main()\n{\n    cin>>n>>m;\n    for (int i=1;i<=n;i++) cin>>a[i];\n    for (int j=1;j<=m;j++) {cin>>t;b[t]++;}\n    f[0][0][0][0]=a[1];//\u521d\u59cb\u5316\n    for(int i1=0;i1<=b[1];i1++)\n      for(int i2=0;i2<=b[2];i2++)\n        for(int i3=0;i3<=b[3];i3++)\n            for(int i4=0;i4<=b[4];i4++)\n            {\n                maxn=0;\n                if(i1) maxn=max(maxn,f[i1-1][i2][i3][i4]);\n                if(i2) maxn=max(maxn,f[i1][i2-1][i3][i4]);\n                if(i3) maxn=max(maxn,f[i1][i2][i3-1][i4]);\n                if(i4) maxn=max(maxn,f[i1][i2][i3][i4-1]);//\u56db\u79cd\u5361\u7247\u90fd\u8981\u8003\u8651\n                f[i1][i2][i3][i4]=maxn+a[1+i1+i2*2+i3*3+i4*4];//\u52a0\u4e0a\u5206\u6570\uff08\u6ce8\uff1a\u524d\u9762\u8981\u8bb0\u5f97\u52a01\uff08\u8d77\u70b9\u683c\uff09\uff01\uff01\uff01\uff09\n            }\n    cout<<f[b[1]][b[2]][b[3]][b[4]]<<endl;\n    return 0;            \n}\n```",
        "postTime": 1471943837,
        "uid": 14380,
        "name": "24680esz",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u770b\u4e86\u4e00\u4e0b\u6ca1\u6709c\u8bed\u8a00\u7684\uff0c\u8fd9\u9053\u9898\u5206\u6790\u4e00\u4e0b\u3002\u7528\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u6bcf\u79cd\u5361\u7247\u51fa\u73b0\u7684\u5f20\u6570\uff0c\u7528num\u6570\u7ec4\u8bb0\u5f55\uff0c\u7528a\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u5206\u6570\u3002\u5f88\u660e\u663e\uff0c\u8fd9\u662f\u4e00\u9053\u52a8\u6001\u89c4\u5212\u7684\u9898\uff0c\u5206\u6790\u4e00\u4e0b\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u53ef\u4ee5\u4e0d\u8003\u8651\u5361\u7247\u7684\u4f7f\u7528\u987a\u5e8f\uff0c\u800c\u76f4\u63a5\u8003\u8651\u4f7f\u7528\u7684\u5f20\u6570(\u60f3\u60f3\u4e3a\u4ec0\u4e48)\u3002\u6240\u4ee5\u6bcf\u4e00\u4e2a\u72b6\u6001\u6211\u4eec\u53ea\u6d89\u53ca\u6b64\u65f6\u7684\u5361\u7247\u7684\u5f20\u6570\uff0c\u7528\u4e00\u4e2a\u6570\u7ec4c[i][j][k][t]\u8868\u793a\u6bcf\u79cd\u5361\u7247\u7684\u4f7f\u7528\u5f20\u6570\uff0c\u5bb9\u6613\u5f97\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n\nc[i][j][k][t]=max{c[i-1][j][k][t],c[i][j-1][k][t],c[i][j][k-1][t],c[i][j][k][t-1]}+a[i+j\\*2+k\\*3+t\\*4+1](\u8fd9\u91cc\u6ce8\u610f\u662f\u4ece\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u5f00\u59cb\u8d70\uff0c\u6240\u4ee5\u8981\u52a0\u4e0a1)\n\n\u6700\u540e\uff0c\u9898\u76ee\u4e0a\u8bf4\u6070\u597d\u7528\u5b8c\uff0c\u90a3\u4e48\u5c31\u8f93\u51fac[num[1]][num[2]][num[3]][num[4]]\u5c31\u53ef\u4ee5\u4e86\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u662f\u4e00\u4e2a\u56db\u91cd\u5faa\u73af\uff0c\u4e14\u6bcf\u4e2a\u5faa\u73af\u53d8\u91cf\u90fd\u662f\u4ece0\u5f00\u59cb\u7684\uff0c\u90a3\u4e48\u51cf\u53bb1\u4e4b\u540e\u4f1a\u8d85\u754c\uff0c\u6240\u4ee5\u9700\u8981\u6ce8\u610f\u4e00\u4e0b\uff0c\u5224\u65ad\u662f\u5426\u4e3a0\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n[codec ]\n\n\n\n\n\n    \n                    \n                    \n                    \n                    \n```cpp\n#include <stdio.h>\n#include <string.h>\n#include <stdlib.h>\nint n,m;\nint a[351];\nint c[40][40][40][40];\nint num[5];\nint maxnum(int t,int p)\n{\n    if (t>p)\n        return t;\n    else return p;\n}\nint main()\n{\n    scanf(\"%d %d\",&n,&m);\n    int i,j,k,t;\n    for (i=1;i<=n;i++)\n        scanf(\"%d\",&a[i]);\n    for (i=1;i<=m;i++)\n    {\n        scanf(\"%d\",&j);\n        num[j]++;   \n    }\n    int max[5];\n    memset(max,0,sizeof(max));\n    memset(c,0,sizeof(c));  \n    c[0][0][0][0]=a[1];\n    for (i=0;i<=num[1];i++)\n        for (j=0;j<=num[2];j++)\n            for (k=0;k<=num[3];k++)\n                for (t=0;t<=num[4];t++)\n                {\n                    if (i!=0)\n                        max[1]=c[i-1][j][k][t];\n                    else max[1]=0;\n                    if (j!=0)\n                        max[2]=c[i][j-1][k][t];\n                    else max[2]=0;\n                    if (k!=0)\n                        max[3]=c[i][j][k-1][t];\n                    else max[3]=0;\n                    if (t!=0)\n                        max[4]=c[i][j][k][t-1];\n                    else max[4]=0;\n                    c[i][j][k][t]=maxnum( maxnum(max[1],max[2]) ,maxnum( max[3],max[4] ) )+a[i+2*j+3*k+4*t+1];\n                }\n    printf(\"%d\",c[num[1]][num[2]][num[3]][num[4]]);\n    return 0;\n}\n```\n[/codec ]",
        "postTime": 1440298518,
        "uid": 8806,
        "name": "RUNRUN",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u6ca1\u6709C++\u6211\u6765\u586b\u4e00\u4e2a\u3002\u5176\u5b9e\u601d\u8def\u548c\u697c\u4e0b\u5dee\u4e0d\u591a\u3002\n\n```cpp\n#include<cstdio>\nusing namespace std;\nint s[42][42][42][42],c[5],a[355],n,m,p;\nint max(int b,int d)\n{return b>d?b:d;}//\u5e93\u51fd\u6570\u4e5f\u884c\nint main()\n{scanf(\"%d%d\",&n,&m);\nfor(int i=1;i<=n;scanf(\"%d\",&a[i]),i++);//\u8bfb\u5165\nfor(int j=1;j<=m;scanf(\"%d\",&p),c[p]++,j++);//\u8bfb\u5165\ns[0][0][0][0]=a[1];//\u521d\u59cb\u5316\nfor(int e=0;e<=c[1];e++)for(int f=0;f<=c[2];f++)for(int g=0;g<=c[3];g++)for(int h=0;h<=c[4];h++)if(int y=e+2*f+3*g+4*h)s[e][f][g][h]=max(max(s[e==0?0:e-1][f][g][h],s[e][f==0?0:f-1][g][h]),max(s[e][f][g==0?0:g-1][h],s[e][f][g][h==0?0:h-1]))+a[y+1];//\u65b9\u7a0b\nprintf(\"%d\",s[c[1]][c[2]][c[3]][c[4]]);}\n```",
        "postTime": 1439453581,
        "uid": 6025,
        "name": "\u7687\u5e1d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "\u628a\u56db\u79cd\u5361\u7247\u7684\u4e2a\u6570\u5b9a\u4e49\u4e3aa,b,c,d\n\n\u4f7f\u7528\u56db\u79cd\u6570\u91cf\u5361\u7247\u7684DP\u65b9\u7a0b\u5c31\u53ef\u4ee5\u6c42\u51fa\uff1a\n\nDP\u65b9\u7a0b\uff1af[a,b,c,d]=max(f[a-1,b,c,d],f[a,b-1,c,d],f[a,b,c-1,d],f[a,b,c,d-1])+g[a+b\\*2+c\\*3+d\\*4+1]\n\n\u7a0b\u5e8f\uff1a\n\n```cpp\nvar\n  n,m,i,j,k,l,x:longint;\n  a,b:array[0..1000] of longint;\n  f:Array[-1..40,-1..40,-1..40,-1..40] of longint;\nfunction max(a,b,c,d:longint):longint;\nbegin\n  if a<b then a:=b;\n  if a<c then a:=c;\n  if a<d then a:=d;\n  exit(a);\nend;\nbegin\n  readln(n,m);\n  for i:=1 to n do\n    read(a[i]);\n  readln;\n  for i:=1 to m do\n    begin\n    read(x);\n    inc(b[x]);\n    end;\n  for i:=0 to b[1] do\n    for j:=0 to b[2] do\n      for k:=0 to b[3] do\n        for l:=0 to b[4] do\n          f[i,j,k,l]:=max(f[i-1,j,k,l],f[i,j-1,k,l],f[i,j,k-1,l],f[i,j,k,l-1])+a[i+j*2+k*3+l*4+1];\n  writeln(f[b[1],b[2],b[3],b[4]]);\nend.\n\n```",
        "postTime": 1382357784,
        "uid": 817,
        "name": "lbn187",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    },
    {
        "content": "# \u5b9e\u8bdd\u8bf4\uff0c\u8fd9\u9053\u9898\u6839\u672c\u4e0d\u7528\u8003\u8651\u4e0b\u6807\u4e3a\u8d1f\u6570\u7684\u60c5\u51b5\uff0c\u7528\u90a3\u4e48\u591aif\u5206\u7c7b\u8ba8\u8bba\n\u90a3\u4e48\u591a\u5927\u4f6c\u8be6\u7ec6\u7684\u9898\u89e3\u6211\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\uff0c\u6211\u89c9\u5f97\u4ed6\u4eec\u539f\u7406\u90fd\u5f88\u597d\uff0c\u6211\u5c31\u8bb2\u8bb2\u5982\u4f55\u4f18\u5316\u4ee3\u7801\u5427\u3002\uff08c++\u515a\uff09\n\n\u76f4\u63a5base=1 \u628a\u6240\u6709\u7684\u4e2a\u6570\u52a0\u4e00\u5373\u53ef\uff08pascal\u515a\u4e0d\u9700\u8981\u8fd9\u4e00\u6b65\uff09\n\n\u4e0a\u4ee3\u7801\uff1a\n\n```\n#include <iostream>\n#include <stdio.h>\n#include <algorithm>\nusing namespace std;\nint a[360],b1=1,b2=1,b3=1,b4=1;\nint f[110][110][110][110];\nint main(){\n\tint n,m,x,tem;scanf(\"%d %d\",&n,&m);\n\tfor (int i=1;i<=n;i++) scanf(\"%d\",&a[i]);\n\tfor (int j=1;j<=m;j++){\n\t\tscanf(\"%d\",&x);\n\t\tswitch(x){case 1:b1++;break;case 2:b2++;break;case 3:b3++;break;case 4:b4++;break;}\n\t}\n\t\tfor (int x1=1;x1<=b1;x1++)\n\t\t\tfor (int x2=1;x2<=b2;x2++)\n\t\t\t\tfor (int x3=1;x3<=b3;x3++)\n\t\t\t\t\tfor (int x4=1;x4<=b4;x4++){\n\t\t\t\t\t\ttem=(x1-1)+(x2-1)*2+(x3-1)*3+(x4-1)*4;\n\t\t\t\t\t\tf[x1][x2][x3][x4]=max(f[x1-1][x2][x3][x4],max(f[x1][x2-1][x3][x4],max(f[x1][x2][x3-1][x4],f[x1][x2][x3][x4-1])))+a[tem+1];\n\t\t\t\t\t}\n\tprintf(\"%d\",f[b1][b2][b3][b4]);\n}\n```\n\u4e3a\u4ec0\u4e48\u8fd9\u6837\u5199\u662f\u5bf9\u7684\u5462\uff1f\u56e0\u4e3a\u73b0\u5728\u76841\u8868\u793a\u539f\u6765\u76840 \u73b0\u5728\u76840\u8868\u793a\u539f\u6765\u7684-1 \u56e0\u4e3a\u521d\u59cb\u5316\u7684\u65f6\u5019\u5168\u662f0 \u81ea\u7136\u4e0b\u6807\u4e3a-1\u7684\u6570\u7ec4\u4e3a\u975e\u6cd5 \u56e0\u4e3a\u6240\u6709\u6570\u5b57\u90fd\u52a0\u4e861 \u6240\u4ee5\u81ea\u7136\u73b0\u5728\u4e0b\u6807\u4e3a0\u7684\u6570\u662f\u975e\u6cd5\uff0c\u90a3\u4e48\u5728max\u7684\u65f6\u5019\u5c31\u4f1a\u81ea\u7136\u88ab\u8fc7\u6ee4\u6389\u3002\n\nps\uff1a\u5982\u679c\u4f60\u662fp\u515a \u53ef\u4ee5\u6709\u4e0b\u8868\u4e3a\u8d1f\u7684\u6570\u7ec4 \u8d85\u7ea7\u7fa1\u6155\uff01\uff01\uff01\u4e0d\u8fc7c++\u515a\u8fd9\u6837\u5904\u7406\u4e5f\u5f88\u597d",
        "postTime": 1573172548,
        "uid": 73409,
        "name": "josh00",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1541 \u3010\u4e4c\u9f9f\u68cb\u3011"
    }
]
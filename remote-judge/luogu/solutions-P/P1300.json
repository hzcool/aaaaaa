[
    {
        "content": "# P1300\u9898\u89e3\n\n\u7b97\u6cd5\uff1a $BFS$ \n\n~~\u4e3a\u4ec0\u4e48\u9898\u89e3\u91cc\u7684\u4eba\u4eec\u90fd\u662f\u7528DFS\u5199\u7684QAQ\uff0c\u4e00\u5b9a\u662f\u6211\u592a\u83dc\u4e86~~\n\n\u8fd9\u7c7b\u9898\u76ee\u5f88\u660e\u663e\u8981\u7528\u641c\u7d22\u505a\uff0c\u597d\u50cf\u8fd9\u9053\u9898\u5e76\u4e0d\u4f1a\u5361 $DFS$ \uff0c\u4f46\u6211\u8fd8\u662f\u7528 $BFS$ ~~\u987d\u5f3a~~\u5730\u505a\u4e86\u4e0b\u53bb\n\n\u7b2c\u4e00\u6b65\uff0c\u628a\u6570\u636e\u8bfb\u5165\u5e76\u5b58\u50a8\u5728\u4e00\u5f20\u56fe\u91cc\uff0c\u80fd\u8d70\u6807\u8bb0\u4e3a $1$ \uff0c\u4e0d\u80fd\u8d70\u6807\u8bb0\u4e3a $0$ \uff0c\u518d\u8bb0\u5f55\u4e00\u4e0b\u8d77\u70b9\u548c\u7ec8\u70b9\uff0c\u6ce8\u610f\u8981\u6807\u8bb0\u8d77\u70b9\u7684\u65b9\u5411\uff0c\u7528\u4f18\u5148\u961f\u5217\u7ef4\u62a4\uff0c\u4ee5\u82b1\u8d39\u4e3a\u5173\u952e\u5b57\u628a\u6700\u5c0f\u7684\u653e\u5728\u961f\u9996\uff0c\u8fd9\u90e8\u5206\u5c31\u505a\u5b8c\u4e86\n\n\u7b2c\u4e8c\u6b65\uff0c\u5f00\u59cb $BFS$ \uff0c\u628a\u5f53\u524d\u6240\u6709\u80fd\u505a\u7684\u6b65\u9aa4\u90fd\u505a\u4e00\u904d\uff0c\u5373\u524d\u8fdb\u3001\u5de6\u8f6c\u3001\u53f3\u8f6c\u3001\u6389\u5934\uff08\u5f53\u524d\u9762\u90fd**\u4e0d\u80fd\u505a\u65f6**\u624d\u80fd\u505a\uff0c\u4e0d\u7136\u4f1a $WA$ \u4e00\u4e2a\u70b9\uff09\uff0c\u8fd8\u6709\uff0c\u5982\u679c\u5f53\u524d\u80fd\u505a\u67d0\u4e2a\u6b65\u9aa4\uff0c\u4f46\u505a\u4e86\u4e4b\u540e\u4e0d\u662f\u6700\u4f18\u7684\uff0c\u90a3\u5c31\u4e0d\u8981\u505a\u4e86\uff0c\u4f46**\u4e0d\u505a\u4e0d\u4ee3\u8868\u4e0d\u80fd\u505a**\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u9020\u4e00\u4e2a\u6570\u7ec4\u6765\u7ef4\u62a4\u5f53\u524d\u7684\u6700\u4f18\u82b1\u8d39\uff1a $m[i][j][k]$ \uff08 $i$ \uff0c $j$ \u4ee3\u8868\u5750\u6807 $x$ \uff0c $y$ \uff0c $k$ \u4ee3\u8868\u65b9\u5411\uff08$k\\in[0,3]$\uff09\uff09\uff0c\u7531\u4e8e\u6709\u4f18\u5148\u961f\u5217\u7ef4\u62a4\u4f5c\u7528\uff0c\u6240\u4ee5\u5148\u8bbf\u95ee\u5230\u7ec8\u70b9\u5c31\u662f\u6700\u5feb\u7684\uff0c\u76f4\u63a5\u8df3\u51fa\n\n\u7b2c\u4e09\u6b65\uff0c\u8f93\u51fa $Answer$ \n\n### code\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint a,b,xx,yy,x,y;\nint dx[4]= {-1,0,1,0},dy[4]= {0,1,0,-1};//\u65b9\u5411\u6570\u7ec4\uff0c\u5f88\u65b9\u4fbf \nint m[1001][1001][4];//\u6570\u7ec4\u7ef4\u62a4\u82b1\u8d39 \nbool s[1001][1001];\nchar ch;\nstruct P {//\u534f\u52a9\u4f18\u5148\u961f\u5217 \n\tint x,y,to;\n\tbool operator<(const P& t)const {//\u4f18\u5148\u89c4\u5219 \n\t\treturn m[t.x][t.y][t.to]<m[x][y][to];\n\t}\n} k,l;\npriority_queue<P> st;\nint main() {\n\tmemset(m,0x7f,sizeof m);//\u521d\u59cb\u5316 \n\tcin>>a>>b;\n\tfor(int i=1; i<=a; i++)//\u8bfb\u5165 \n\t\tfor(int j=1; j<=b; j++) {\n\t\t\tcin>>ch;\n\t\t\tif(ch!='.') {\n\t\t\t\ts[i][j]=1;\n\t\t\t\tif(ch!='#') {\n\t\t\t\t\tif(ch!='F') {\n\t\t\t\t\t\tif(ch=='N')\n\t\t\t\t\t\t\tk.to=0;\n\t\t\t\t\t\tif(ch=='S')\n\t\t\t\t\t\t\tk.to=2;\n\t\t\t\t\t\tif(ch=='W')\n\t\t\t\t\t\t\tk.to=3;\n\t\t\t\t\t\tif(ch=='E')\n\t\t\t\t\t\t\tk.to=1;\n\t\t\t\t\t\tk.x=i;\n\t\t\t\t\t\tk.y=j;\n\t\t\t\t\t} else {\n\t\t\t\t\t\txx=i;\n\t\t\t\t\t\tyy=j;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\tm[k.x][k.y][k.to]=0;\n\tst.push(k);\n\twhile(!st.empty()) {//BFS\u5f00\u59cb \n\t\tbool q=0;\n\t\tk=st.top();\n\t\tif(k.x==xx&&k.y==yy)//\u8bbf\u95ee\u5230\u7ec8\u70b9 \n\t\tbreak;\n\t\tst.pop();\n\t\tx=k.x+dx[k.to];\n\t\ty=k.y+dy[k.to];\n\t\tif(s[x][y])\n\t\t\tq=1;\n\t\tif(s[x][y]&&m[x][y][k.to]>m[k.x][k.y][k.to]) {//\u524d\u8fdb\u5224\u65ad \n\t\t\tm[x][y][k.to]=m[k.x][k.y][k.to];\n\t\t\tl.x=x;\n\t\t\tl.y=y;\n\t\t\tl.to=k.to;\n\t\t\tst.push(l);\n\t\t}\n\t\tx=k.x+dx[(k.to+3)%4];\n\t\ty=k.y+dy[(k.to+3)%4];\n\t\tif(s[x][y])\n\t\t\tq=1;\n\t\tif(s[x][y]&&m[x][y][(k.to+3)%4]>m[k.x][k.y][k.to]+1) {//\u5de6\u8f6c\u5224\u65ad \n\t\t\tm[x][y][(k.to+3)%4]=m[k.x][k.y][k.to]+1;\n\t\t\tl.x=x;\n\t\t\tl.y=y;\n\t\t\tl.to=(k.to+3)%4;\n\t\t\tst.push(l);\n\t\t}\n\t\tx=k.x+dx[(k.to+1)%4];\n\t\ty=k.y+dy[(k.to+1)%4];\n\t\tif(s[x][y])\n\t\t\tq=1;\n\t\tif(s[x][y]&&m[x][y][(k.to+1)%4]>m[k.x][k.y][k.to]+5) {//\u53f3\u8f6c\u5224\u65ad \n\t\t\tm[x][y][(k.to+1)%4]=m[k.x][k.y][k.to]+5;\n\t\t\tl.x=x;\n\t\t\tl.y=y;\n\t\t\tl.to=(k.to+1)%4;\n\t\t\tst.push(l);\n\t\t}\n\t\tif(!q) {//\u5224\u65ad\u5176\u4ed6\u64cd\u4f5c\u80fd\u4e0d\u80fd\u505a \n\t\t\tx=k.x+dx[(k.to+2)%4];\n\t\t\ty=k.y+dy[(k.to+2)%4];\n\t\t\tif(s[x][y]&&m[x][y][(k.to+2)%4]>m[k.x][k.y][k.to]+10) {//\u540e\u9000\u5224\u65ad \n\t\t\t\tm[x][y][(k.to+2)%4]=m[k.x][k.y][k.to]+10;\n\t\t\t\tl.x=x;\n\t\t\t\tl.y=y;\n\t\t\t\tl.to=(k.to+2)%4;\n\t\t\t\tst.push(l);\n\t\t\t}\n\t\t}\n\t}\n\tcout<<m[k.x][k.y][k.to];\n\treturn 0;\n}//97\u884c\u4ee3\u7801QAQ \n```\n\n $46ms$ \u5feb\u5f97\u8d77\u98de\n \n ### [$\\color{blue}\\text{My Blog}$](https://www.luogu.org/blog/184549/)",
        "postTime": 1573783744,
        "uid": 184549,
        "name": "RedreamMer",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\u6c42\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u6700\u5c0f\u82b1\u8d39\uff0c\u5176\u4e2d\u8f6c\u5f2f\u6389\u5934\u90fd\u9700\u8981\u8d39\u7528\n\n\n------------\n### \u89e3\u6cd5\n\u8fd9\u9053\u9898\u4e0e\u6a21\u677f\u641c\u7d22\u7684\u533a\u522b\u5c31\u662f\u591a\u4e86\u65b9\u5411\uff0c\u5728\u539f\u6570\u7ec4\u4e2d\u52a0\u4e0a\u65b9\u5411\u8fd9\u4e00\u7ef4\u5373\u53ef\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u5317\u3001\u897f\u3001\u5357\u3001\u4e1c\u5206\u522b\u770b\u6210\u65b9\u54110\u30011\u30012\u30013\n\n\u8bbe\u5f53\u524d\u65b9\u5411\u662fw\uff0c\u7a0d\u5fae\u5206\u6790\u4e4b\u540e\uff0c\u5f97\u5230\u5de6\u8f6c\u3001\u53f3\u8f6c\u3001\u6389\u5934\u4e4b\u540e\u7684\u65b9\u5411\u5206\u522b\u662f\n$(w+1)\\mod4$,$(w+3)\\mod4$,$(w+2)\\mod4$\n\n\u63a5\u4e0b\u6765\u66b4\u529b\u641c\u7d22\u987a\u4fbf\u526a\u679d\u5c31\u6ca1\u95ee\u9898\u4e86\uff0c\u5177\u4f53\u7ec6\u8282\u8bf7\u770b\u4ee3\u7801\n\n------------\n### \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define IN inline\nusing namespace std;\nconst int maxn=35,p[4][2]={{-1,0},{0,-1},{1,0},{0,1}};//\u5148\u9884\u5904\u7406\u4e00\u4e0b\u5404\u4e2a\u65b9\u5411\u4f4d\u79fb\u4e4b\u540e\u5750\u6807\u7684\u53d8\u5316\u91cf\nchar s[maxn];\nint n,m,sx,sy,sw,ans=1<<30,dis[maxn][maxn][4],tot;//dis[x][y][w]\u8868\u793a\u5230\u8fbe\u7b2cx\u884c\u7b2cj\u5217\u65b9\u5411\u4e3aw\u7684\u6700\u5c0f\u4ee3\u4ef7\nshort mp[maxn][maxn];\nIN void DFS(int x,int y,int w,int c){\n\tif(dis[x][y][w]<=c||c>=ans) return;//\u5982\u679c\u53d1\u73b0\u5f53\u524d\u4ee3\u4ef7\u5927\u4e8e\u7b49\u4e8e\u5f53\u524d\u70b9\u7684\u6700\u5c0f\u503c\u6216\u8005\u7b54\u6848\uff0c\u5c31\u505c\u6b62\u641c\u7d22\n\tdis[x][y][w]=c;\n//\tprintf(\"%d %d %d %d %d\\n\",++tot,x,y,w,dis[x][y][w]);\n\tif(mp[x][y]==2) ans=min(ans,dis[x][y][w]);//\u5230\u8fbe\u7ec8\u70b9\uff0c\u5237\u65b0\u6700\u5c0f\u503c\n\tbool flg=0;\n\tint fx=x+p[w][0],fy=y+p[w][1];//\u76f4\u884c\n\tint lw=(w+1)%4,lx=x+p[lw][0],ly=y+p[lw][1];//\u5de6\u8f6c\n\tint bw=(w+2)%4,bx=x+p[bw][0],by=y+p[bw][1];//\u6389\u5934\n\tint rw=(w+3)%4,rx=x+p[rw][0],ry=y+p[rw][1];//\u53f3\u8f6c\n\tif(mp[fx][fy]) flg=1,DFS(fx,fy,w,c);//\u76f4\u884c\n\tif(mp[lx][ly]) flg=1,DFS(lx,ly,lw,c+1);//\u5de6\u8f6c\n\tif(mp[rx][ry]) flg=1,DFS(rx,ry,rw,c+5);//\u53f3\u8f6c\n\tif(mp[bx][by]&&!flg) DFS(bx,by,bw,c+10);//\u6389\u5934\n}\n\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%s\",s+1);\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tmp[i][j]=1; //\u628a\u80fd\u5230\u8fbe\u7684\u8d4b\u503c\n\t\t\tswitch(s[j]){\n\t\t\t\tcase '.':{mp[i][j]=0;break;}//\u4e0d\u80fd\u5230\u8fbe\u7684\u5f52\u96f6\n\t\t\t\tcase '#':{break;}\n\t\t\t\tcase 'F':{mp[i][j]=2;break;}//\u7ec8\u70b9\u8bb0\u53f7\n\t\t\t\tcase 'N':{sx=i,sy=j,sw=0;break;}\n\t\t\t\tcase 'W':{sx=i,sy=j,sw=1;break;}\n\t\t\t\tcase 'S':{sx=i,sy=j,sw=2;break;}\n\t\t\t\tcase 'E':{sx=i,sy=j,sw=3;break;}\n\t\t\t}\n\t\t}\n\t}\n\tmemset(dis,63,sizeof dis);\n\tDFS(sx,sy,sw,0);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\nupd 2021.01.31 \u611f\u8c22 C2020\u9648\u94ed\u6d69 \u7684\u6307\u6b63\uff0c\u4fee\u590d\u4e86\u4e00\u4e9b\u9519\u8bef",
        "postTime": 1558785367,
        "uid": 116251,
        "name": "\u7834\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    },
    {
        "content": "\u9996\u5148\uff0c\u7531\u4e8e $4 \\le w,h \\le 30$ \u8303\u56f4\u5f88\u5c0f\uff0c\u76f4\u63a5\u8003\u8651**\u641c\u7d22**\u3002\n\n\u5176\u6b21\uff0c\u56e0\u4e3a\u8981\u6c42\u6700\u5c11\u82b1\u8d39\uff0c**\u8003\u8651\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22**\u3002\n\n\u4f46\u662f\uff0c\u7531\u4e8e\u6bcf\u4e00\u6b65\u7684\u82b1\u8d39\u4e0d\u540c\uff0c\u5982\u679c\u4f7f\u7528\u666e\u901a\u7684\u961f\u5217\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u961f\u9996\u4e3a\u6700\u4f18\u72b6\u6001\u3002\u6240\u4ee5\u8981\u8003\u8651\u4f7f\u7528\u4f18\u5148\u961f\u5217\u8fdb\u884c\u641c\u7d22\uff0c\u4fdd\u8bc1\u5f53\u524d\u72b6\u6001\u6700\u4f18\u3002\n\n\u8fdb\u4e00\u6b65\u8003\u8651\u5982\u4f55\u526a\u679d\u3002\u7531\u4e8e\u53ef\u80fd\u4f1a\u7ecf\u8fc7\u4e00\u4e2a\u683c\u5b50\u5f88\u591a\u6b21\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u4e00\u4e2a bool \u6570\u7ec4\u8fdb\u884c\u6807\u8bb0\u3002\u53ef\u4ee5\u8003\u8651\u4e00\u79cd A* \u7b97\u6cd5\u3002\u56e0\u4e3a\u53ea\u80fd\u5411\u4e1c\u897f\u5357\u5317\u56db\u4e2a\u65b9\u5411\u8d70\uff0c\u6240\u4ee5\u8bbe\u8ba1\u4f30\u4ef7\u51fd\u6570\u4e3a\u5f53\u524d\u70b9\u4e0e\u7ec8\u70b9\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\u7b80\u5355\u8bbe\u8ba1\u4e00\u4e0b\uff0c\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u641c\u7d22\u4ee3\u7801\uff1a\n\n```cpp\nwhile(!que.empty()){\n\t\thd=que.top();\n\t\tque.pop();  //\u53d6\u51fa\u961f\u9996\u6700\u4f18\u89e3\n\t\tif(!hd.val.second){  //\u5982\u679c\u4e0e\u4e2d\u70b9\u8ddd\u79bb\u4e3a0\u3010\u5373\u5230\u8fbe\u7ec8\u70b9\u3011\uff0c\u7ed3\u675f\u641c\u7d22\n\t\t\tprintf(\"%d\\n\",hd.val.first);\n\t\t\treturn 0;\n\t\t}\n     /*\u6bcf\u4e2a\u72b6\u6001\u6709\u56db\u79cd\u64cd\u4f5c\uff0c\u5206\u522b\u5bf9\u5e94\u7684\u4ee3\u4ef7\u4e3adt[i]\n     i=0:\u76f4\u8d70\uff0ci=1:\u5de6\u8f6c\uff0ci=2\uff1a\u6389\u5934\uff0ci=3\uff1a\u53f3\u8f6c\n     */\n\t\tfor(rgt i=0;i<4;i++){  \n\t\t\ttl.p=(hd.p+i)%4;   //\u6539\u53d8\u65b9\u5411\n\t\t\ttl.x=hd.x+gx[tl.p];\n\t\t\ttl.y=hd.y+gy[tl.p]; //\u8ba1\u7b97\u65b0\u5750\u6807\n\t\t\tif(mp[tl.x][tl.y]!='.'){  //\u5982\u679c\u4e0d\u4e3a\u969c\u788d\uff0c\u52a0\u5165\u4f18\u5148\u961f\u5217\u641c\u7d22\u7b54\u6848\n\t\t\t\ttl.val=make_pair(hd.val.first+dt[i],getdis(tl.x,tl.y));\n\t\t\t\tque.push(tl); \n\t\t\t}\n\t\t}\n\t}\n```\n\n\u5b8c\u5584\u4e0a\u8ff0\u641c\u7d22\u4ee3\u7801\u548c\u7a0b\u5e8f\u7684\u5176\u5b83\u90e8\u5206\u53ef\u4ee5\u5f97\u5230 $\\texttt{40}$ \u5206\u7684\u597d\u6210\u7ee9\u3002\n\n-------\n\n\u7ee7\u7eed\u8003\u8651\u526a\u679d\u4f18\u5316\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u65e0\u9650\u5236\u5730\u5141\u8bb8\u7a0b\u5e8f\u91cd\u590d\u641c\u7d22\uff0c\u90a3\u4e48\u6bcf\u4e00\u6b65\u90fd\u4f1a\u4ea7\u751f\u56db\u4e2a\u65b0\u72b6\u6001\uff0c\u6700\u540e\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u65e0\u7528\u72b6\u6001\uff0c\u4e0d\u4ec5\u6548\u7387\u4f4e\uff0c\u800c\u4e14\u5c31\u7b97\u4e0d\u8d85\u65f6\uff0c\u5230\u6700\u540e\u4e5f\u8981\u7206\u7a7a\u95f4\u3002\n\n\u90a3\u4e48\uff0c\u8003\u8651\u5982\u4f55**\u8ba9\u7a0b\u5e8f\u6709\u9009\u62e9\u5730\u91cd\u590d\u641c\u7d22**\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e24\u4e2a\u4e09\u7ef4\u6570\u7ec4\u6765\u89e3\u51b3\u95ee\u9898\u3002\u8bb0 bool \u6570\u7ec4 $fw_{i,j,k}$ \u8868\u793a\u662f\u5426\u4ee5\u9762\u671d $k$ \u7684\u72b6\u6001\u5230\u8fbe\u8fc7\u70b9 $(i,j)$\u3002\u53e6\u8bb0 int \u6570\u7ec4 $dat_{i,j,k}$ \u8868\u793a\u4ee5\u9762\u671d $k$ \u7684\u72b6\u6001\u5230\u8fbe\u70b9 $(i,j)$ \u9700\u8981\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\u90a3\u4e48\uff0c\u6839\u636e\u4e0a\u8ff0\u4e24\u4e2a\u6570\u7ec4\uff0c\u5982\u679c\u662f\u7b2c\u4e00\u6b21\u4ee5\u9762\u671d $k$ \u7684\u72b6\u6001\u5230\u8fbe\u70b9 $(i,j)$ \uff0c\u5219\u5728 $fw_{i,j,k}$ \u6807\u8bb0\u5e76\u540c\u65f6\u8bb0\u5f55 $dat_{i,j,k}$ \u3002\u5982\u679c\u4e0d\u662f\u7b2c\u4e00\u6b21\uff0c\u5219\u68c0\u67e5\u5f53\u524d\u65b9\u6848\u6bd4 $dat_{i,j,k}$ \u662f\u5426\u66f4\u4f18\u3002\u5982\u679c\u66f4\u4f18\uff0c\u5219\u5141\u8bb8\u91cd\u590d\u641c\u7d22\uff0c\u66f4\u65b0\u72b6\u6001\u3002\n\n\u6309\u7167\u4e0a\u8ff0\u65b9\u6848\uff0c\u6539\u8fdb\u641c\u7d22\uff0c\u6211\u4eec\u5f97\u5230\u5982\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\nwhile(!que.empty()){\n\t\thd=que.top();\n\t\tque.pop();\n\t\tfor(rgt i=0;i<4;i++){\n\t\t\ttl.p=(hd.p+i)%4;\n\t\t\ttl.x=hd.x+gx[tl.p];\n\t\t\ttl.y=hd.y+gy[tl.p];\n\t\t\tif(mp[tl.x][tl.y]!='.'){\n\t\t\t\ttl.val=make_pair(hd.val.first+dt[i],getdis(tl.x,tl.y));\n\t\t\t\tif(!fw[tl.x][tl.y][tl.p]){   \n                //\u5982\u679c\u662f\u7b2c\u4e00\u6b21\u4ee5\u9762\u671d p \u7684\u72b6\u6001\u5230\u8fbe (x,y) \u6807\u8bb0\u5e76\u66f4\u65b0\n\t\t\t\t\tfw[tl.x][tl.y][tl.p]=true;\n\t\t\t\t\tdat[tl.x][tl.y][tl.p]=tl.val.first;\n\t\t\t\t\tque.push(tl);\n\t\t\t\t}else{\n\t\t\t\t\tif(dat[tl.x][tl.y][tl.p]>tl.val.first){\n                    //\u5982\u679c\u5f53\u524d\u72b6\u6001\u6bd4\u4e4b\u524d\u8bb0\u5f55\u7684\u65b9\u6848\u66f4\u4f18\uff0c\u66f4\u65b0\u3002\n\t\t\t\t\t\tdat[tl.x][tl.y][tl.p]=tl.val.first;\n\t\t\t\t\t\tque.push(tl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n```\n\n\u5b8c\u5584\u4e0a\u8ff0\u641c\u7d22\u4ee3\u7801\u548c\u7a0b\u5e8f\u7684\u5176\u5b83\u90e8\u5206\u53ef\u4ee5\u5f97\u5230 $\\texttt{80}$ \u5206\u7684\u597d\u6210\u7ee9\u3002\n\n--------\n\n\u4f60\u4f1a\u53d1\u73b0\uff0c\u4f60\u4f1a\u6709\u4e00\u4e2a\u70b9 $\\color{red}Wrong Answer$ \uff0c\u8fd9\u662f\u600e\u4e48\u56de\u4e8b\uff1f\n\n\u56de\u53bb\u8ba4\u771f\u8bfb\u9898\uff0c\u4f1a\u53d1\u73b0\u6709\u8fd9\u6837\u7684\u4e00\u53e5\u8bdd\uff1a\n\n**\u53ea\u6709\u5f53\u524d\u8fdb\u3001\u5de6\u8f6c\u3001\u53f3\u8f6c\u90fd\u65e0\u8def\u53ef\u8d70\u7684\u65f6\u5019\uff0c\u8c03\u5934\u624d\u662f\u5141\u8bb8\u7684\u3002**\n\n\u62ff\u4e00\u4e2a bool \u53d8\u91cf\u6807\u8bb0\u4e00\u4e0b\u662f\u5426\u65e0\u8def\u53ef\u8d70\uff0c\u5982\u679c\u65e0\u8def\u53ef\u8d70\u518d\u8003\u8651\u6389\u5934\u3002\n\n\u8fd9\u6837\u5b50\u505a\u5c31\u53ef\u4ee5\u6ee1\u5206\u4e86\uff0c\u6700\u7ec8\u7684\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<queue> \n#define ll long long\n#define qmn(a,b) a<b?a:b\n#define rgt register int\nusing namespace std;\n\nstruct mode_queue{\n\tint x;\n\tint y;  //\u5750\u6807\n\tint p;  //\u65b9\u5411\n\tpair <int,int> val;  //first\u4e3a\u82b1\u8d39,second\u4e3a\u66fc\u54c8\u987f\u8ddd\u79bb\n}hd,tl;\n\nchar mp[33][33];\nint n,m,edx,edy,ans=1e9+7;\n\nbool fw[33][33][4];\nint dat[33][33][4];\nint gx[4]={0,-1,0,1};\nint gy[4]={1,0,-1,0};\nint dt[4]={0,1,10,5};\n\ninline bool operator < (struct mode_queue q1,struct mode_queue q2){\n\treturn q1.val.second>q2.val.second;\n}\n\ninline int abc(int c){\n\treturn c<0?-c:c;\n}  //\u7edd\u5bf9\u503c\n\ninline int getdis(int px,int py){\n\treturn abc(px-edx)+abc(py-edy);\n}  //\u7b97\u66fc\u54c8\u987f\u8ddd\u79bb\n\npriority_queue < mode_queue > que;\n\nint main(){\n\tbool cx;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(rgt i=1;i<=n;i++){\n\t\tfor(rgt j=1;j<=m;j++){\n\t\t\tmp[i][j]=getchar();\n\t\t\twhile((mp[i][j]<'A'||mp[i][j]>'Z')&&mp[i][j]!='.'&&mp[i][j]!='#')\n\t\t\t\tmp[i][j]=getchar();  //\u8fc7\u6ee4\u5176\u5b83\u5b57\u7b26\n\t\t\tif(mp[i][j]>='A'&&mp[i][j]<='Z'){\n\t\t\t\tif(mp[i][j]=='F'){  //\u627e\u5230\u7ec8\u70b9\uff0c\u6807\u8bb0\u5750\u6807\n\t\t\t\t\tedx=i;\n\t\t\t\t\tedy=j;\n\t\t\t\t}else{  //\u627e\u5230\u8d77\u70b9\uff0c\u5165\u961f\n\t\t\t\t\ttl.x=i;\n\t\t\t\t\ttl.y=j;\n\t\t\t\t\ttl.val=make_pair(0,getdis(i,j));\n\t\t\t\t\tswitch(mp[i][j]){\n\t\t\t\t\t\tcase 'E':tl.p=0; break;\n\t\t\t\t\t\tcase 'N':tl.p=1; break;\n\t\t\t\t\t\tcase 'W':tl.p=2; break;\n\t\t\t\t\t\tcase 'S':tl.p=3; break;\n\t\t\t\t\t}\n\t\t\t\t\tfw[i][j][tl.p]=true;\n\t\t\t\t\tdat[i][j][tl.p]=0;\n\t\t\t\t\tque.push(tl);\n\t\t\t\t} \n\t\t\t}\n\t\t}\n\t}\n    \n\twhile(!que.empty()){\n\t\thd=que.top();\n\t\tque.pop();\n\t\tcx=false;  //\u6807\u8bb0\u662f\u5426\u65e0\u8def\u53ef\u8d70\n\t\tfor(rgt i=0;i<4;i++){\n\t\t\tif(i==2)  //\u53bb\u6389\u6389\u5934\u7684\u9009\u62e9\u5355\u72ec\u66f4\u65b0\n\t\t\t\tcontinue;\n\t\t\ttl.p=(hd.p+i)%4;\n\t\t\ttl.x=hd.x+gx[tl.p];\n\t\t\ttl.y=hd.y+gy[tl.p];\n\t\t\tif(mp[tl.x][tl.y]!='.'){\n\t\t\t\tcx=true;\n\t\t\t\ttl.val=make_pair(hd.val.first+dt[i],getdis(tl.x,tl.y));\n\t\t\t\tif(!fw[tl.x][tl.y][tl.p]){\n\t\t\t\t\tfw[tl.x][tl.y][tl.p]=true;\n\t\t\t\t\tdat[tl.x][tl.y][tl.p]=tl.val.first;\n\t\t\t\t\tque.push(tl);\n\t\t\t\t}else{\n\t\t\t\t\tif(dat[tl.x][tl.y][tl.p]>tl.val.first){\n\t\t\t\t\t\tdat[tl.x][tl.y][tl.p]=tl.val.first;\n\t\t\t\t\t\tque.push(tl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(!cx){  //\u65e0\u8def\u53ef\u8d70\uff0c\u5355\u72ec\u66f4\u65b0\u6389\u5934\u72b6\u6001\n\t\t\ttl.p=(hd.p+2)%4;\n\t\t\ttl.x=hd.x+gx[tl.p];\n\t\t\ttl.y=hd.y+gy[tl.p];\n\t\t\tif(mp[tl.x][tl.y]!='.'){\n\t\t\t\tcx=true;\n\t\t\t\ttl.val=make_pair(hd.val.first+dt[2],getdis(tl.x,tl.y));\n\t\t\t\tif(!fw[tl.x][tl.y][tl.p]){\n\t\t\t\t\tfw[tl.x][tl.y][tl.p]=true;\n\t\t\t\t\tdat[tl.x][tl.y][tl.p]=tl.val.first;\n\t\t\t\t\tque.push(tl);\n\t\t\t\t}else{\n\t\t\t\t\tif(dat[tl.x][tl.y][tl.p]>tl.val.first){\n\t\t\t\t\t\tdat[tl.x][tl.y][tl.p]=tl.val.first;\n\t\t\t\t\t\tque.push(tl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n    \n\tfor(rgt i=0;i<4;i++){  //\u6700\u540e\u5728\u7ec8\u70b9\u7684\u56db\u4e2a\u65b9\u5411\u7684\u6700\u4f18\u72b6\u6001\u4e2d\u53d6\u6700\u4f18\u89e3\n\t\tif(fw[edx][edy][i])\n\t\t\tans=qmn(ans,dat[edx][edy][i]);\n\t} \n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1606865633,
        "uid": 57421,
        "name": "fls233666",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    },
    {
        "content": "\u7206\u641c+\u4f18\u5316\n\n\u6ce8\u610f\uff1a**\u540c\u4e00\u4e2a\u5730\u65b9\u53ea\u80fd\u8f6c\u4e00\u6b21\u5f2f**\n\n```cpp\n#include <unordered_map>//C++11\u54c8\u5e0c\u8868\u5b9e\u73b0\u7684map\n#include <algorithm>\n#include <iostream>\n#include <cs\u200btring>\nusing namespace std;\nconst int dx[4]={-1,0,1,0},dy[4]={0,1,0,-1},inf=0x3f3f3f3f;\nunorder\u200bed_map<char,int> char2digit = {{'N',0},{'S',2},{'E',1},{'W',3}};//\u5b57\u6bcd\u65b9\u5411\u8f6c\u6362\u6210\u6570\u5b57\nunordered_map<int,char> digit2char = {{0,'N'},{2,'S'},{1,'E'},{3,'W'}};//\u6570\u5b57\u65b9\u200b\u5411\u8f6c\u6362\u6210\u5b57\u6bcd\uff08\u8c03\u8bd5\u7528\uff09\nint h,w,mem[40][40][4];//mem[i][j][k]:(i,j)\u5904\u65b9\u5411\u4e3ak\u65f6\u7684\u82b1\u8d39\u6700\u5c0f\u503c\npair<int,int> from,to;\nchar mp[40][40];\ninline int lturn(int x){//\u5f53\u524d\u65b9\u5411x\u5de6\u8f6c90\u00b0\u540e\u7684\u65b9\u5411\n\tint y = x - 1;\n\treturn y==-1?3:y;\n}\ninline int rturn(int x){//\u5f53\u524d\u65b9\u5411x\u53f3\u8f6c90\u00b0\u540e\u7684\u65b9\u5411\n\tint y = x + 1;                                                                                                                                                                                                                                      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t                                                                                                           **\u53cd\u6284\u88ad**\n\treturn y==4?0:y;\n}\ninline int turnAround(int x){//\u5f53\u524d\u65b9\u5411x\u6389\u5934\u540e\u7684\u65b9\u5411\n\tint y = x + 2;\n\treturn y % 4;\n}\ninline bool canWalkThrough(int x,int y,int dir){//\u5f53\u524d\u4f4d\u7f6e(x,y)\u80fd\u5426\u5411dir\u65b9\u5411\u79fb\u52a8\u4e00\u683c\n\treturn mp[x\u200b+dx[dir]][y+dy[dir]]!='.';\n}\nvoid dfs(int x,int y,int cost,int dir){//\u5927\u6cd5\u5e08\uff08\u8bef\uff09x,y\u4e3a\u5f53\u524d\u5750\u6807\uff0ccost\u4e3a\u5f53\u524d\u82b1\u8d39\uff0cdir\u4e3a\u5f53\u524d\u65b9\u5411\n\tif(cost>=mem[x][y][\u200bdir])\treturn;//\u526a\u679d\n\tmem[x][y][dir] = cost;//\u66f4\u65b0\u6807\u8bb0\u6570\u7ec4\n\tif(x==to.first&&y==to.second)\treturn;//\u5982\u679c\u5230\u8fbe\u7ec8\u70b9\u76f4\u63a5\u8fd4\u56de\uff08\u4e0a\u4e00\u884c\u5df2\u7ecf\u4fdd\u5b58\u6700\u5c0f\u82b1\u8d39\uff09\n\tbool flag=false;\n\tif(canWalkThrough(x,y,dir))//\u5982\u679c\u80fd\u76f4\u8d70\n\t\tdfs(x+dx[dir],y+dy[dir],cost,dir),flag=true;//\u76f4\u8d70\n\tint l=lturn(dir),r=rturn(dir);\n\tif(canWalkThrough(x,y,l))//\u5982\u679c\u80fd\u5de6\u8f6c\n\t\tdfs(x+dx[l],y+dy[l],cost+1,l),flag=true;//\u5de6\u8f6c\n\tif(canWalkThrough(x,y,r))//\u5982\u679c\u80fd\u53f3\u8f6c\n\t\tdfs(x+dx[r],y+dy[r],cost+5,r),flag=true;//\u53f3\u8f6c\n\tif(!flag){//\u5982\u679c\u90fd\u4e0d\u884c\n\t\tint b\u200back \u200b= turnAround(dir);\n\t\tdfs(x,y,cost+10,back);//\u6389\u5934\n\t}\n}\nint main(){\n\tmemset(mem,inf,sizeof(mem));//\u521d\u59cb\u5316\n\tcin >> h >> w;\n\tfor(int i=1;i<=h;i++){\n\t\tfor(int j=1;j<=w;j++){\n\t\t\tcin >> mp[i][j];\n\t\t\tif(isalph\u200ba(mp[i][j])){\n\t\t\t\tif(mp[i][j]=='F')\tto = {i,j};\n\t\t\t\telse\tfrom = {i,j};\n\t\t\t}\n\t\t}\n\t}\n\tdfs(f\u200brom.first,from.second,0,char2digit[mp[from.first][from.second]]);\n\tcout << min(mem[to.first][to.second][0],min(mem[to.first][to.second][1],min(mem[to.\u200bfirst][to.second][2],mem[to.first][to.second][3]))) << endl;//\u8f93\u51fa\u7ec8\u70b9\u56db\u4e2a\u65b9\u5411\u4e2d\u7684\u6700\u5c0f\u503c\n\treturn 0;\n}\n```\n",
        "postTime": 1611819293,
        "uid": 248302,
        "name": "d0j1a_1701",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    },
    {
        "content": "\u6765\u4e00\u4e2a\u6548\u7387\u4f4e\u4e00\u70b9\uff0c\u4f46\u662f\u601d\u8def\u7a0d\u5fae\u7b80\u5355\u4e00\u70b9\n\n\u6700\u77ed\u8def\uff1a\n\n\u628a1\u4e2a\u70b9\u5206\u62108\u4e2a\u70b9\uff0c\u524d4\u4e2a\u5206\u522b\u8868\u793a\u6ca1\u8f6c\u5411\u65f6\u76844\u4e2a\u65b9\u5411\uff0c\u540e4\u4e2a\u8868\u793a\u8f6c\u5411\u5b8c\u4e86\u7684\n\n\u76f8\u90bb\u7684\u8def\u5757\u5c31\u4ece\u4e00\u4e2a\u70b9\u8f6c\u5411\u5b8c\u4e86\u7684\u8fde\u5230\u540c\u65b9\u5411\u53e6\u4e00\u4e2a\u70b9\u6ca1\u8f6c\u5411\u7684\u90a3\u4e00\u5c42\n\n\u6bcf\u4e2a\u70b9\u5411\u5de6\u8f6c\u5411\u53f3\u8f6c\u5206\u522b\u4ece\u6ca1\u8f6c\u5411\u5230\u8f6c\u5411\u5b8c\u5bf9\u5e94\u65b9\u5411\u8fde1\u548c5\u7684\u8fb9\n\n\u7136\u540e\u6bcf\u4e2a\u70b9\u6bcf\u4e2a\u65b9\u5411\u6ca1\u8f6c\u5411\u5230\u8f6c\u5411\u5b8c\u8fde\u8fb9\u6743\u4e3a0\u7684\u8fb9\uff08\u53ef\u4ee5\u4e0d\u8f6c\u5411\uff09\n\n\u5224\u65ad\u80fd\u4e0d\u80fd\u8c03\u5934\uff0c\u8fde10\u7684\u8fb9\n\n\u6e90\u70b9\u8fde\u8d77\u70b9\u8d77\u59cb\u65b9\u5411\uff0c\u7ec8\u70b9\u6240\u6709\u65b9\u5411\u8fde\u6c47\u70b9\n\n\u7136\u540eDijkstra\uff08\u672c\u6765\u5c31\u8fd9\u4e48\u6162\u4e86\u4e0d\u8981\u7528SPFA\uff09\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<queue>\n#include<algorithm>\nusing namespace std;\n#define MAXN 999999\n#define L(a,b) ((a-1)*m+b)\nstruct edge{\n\tint to,nxt,f;\n}E[MAXN*2];\nstruct node{\n\tint dis,pos;\n};\nbool operator <(node a,node b){\n\treturn b.dis<a.dis;\n}\nint head[MAXN],top=1;\nvoid add(int x,int y,int f){\n\tE[top].to=y;\n\tE[top].nxt=head[x];\n\tE[top].f=f;\n\thead[x]=top++;\n}\nint n,m;\nint base=n*m;\nbool mp[31][31];\nint sx,sy,sd,ex,ey;//\u5206\u522b\u662f\u8d77\u70b9x,y,\u8d77\u70b9\u65b9\u5411,\u7ec8\u70b9x,y\nint dist[MAXN];\nint vis[MAXN];\npriority_queue<node> qs;\nvoid dijkstra(){\n\tint s=1;\n    dist[s]=0;\n    qs.push((node){0,s});\n    while(!qs.empty()){\n        node tmp=qs.top();\n        qs.pop();\n        int x=tmp.pos,d=tmp.dis;\n        if(vis[x])continue;\n        vis[x]=1;\n        for(int i=head[x];i!=0;i=E[i].nxt ){\n            int y=E[i].to;\n            if(dist[y]>dist[x]+E[i].f){\n                dist[y]=dist[x]+E[i].f;\n                if(!vis[y])qs.push((node){dist[y],y});               \n            }\n        }\n    }\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tchar inp[100];\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%s\",inp+1);\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(inp[j]=='.')mp[i][j]=1;\n\t\t\telse if(inp[j]=='S')sx=i,sy=j,sd=2;\t\n\t\t\telse if(inp[j]=='N')sx=i,sy=j,sd=1;\n\t\t\telse if(inp[j]=='E')sx=i,sy=j,sd=4;\n\t\t\telse if(inp[j]=='W')sx=i,sy=j,sd=3;\n\t\t\telse if(inp[j]=='F')ex=i,ey=j;\n\t\t}\n\t}\n    //\u5206\u70b9\u8bbe\u5b9a:1-\u5317 2-\u5357 3-\u897f 4-\u4e1c \u8f6c\u5411\u5b8c:5-\u5317 6-\u5357 7-\u897f 8-\u4e1c\n    //\u6e90\u70b9\u7f16\u53f71\uff0c\u6c47\u70b9\u7f16\u53f72\n\tbase=n*m;\n\tfor(int i=1;i<=base*9;i++)dist[i]=0x3f3f3f3f;\n\tadd(1,L(sx,sy)+sd*base,0);\n\tadd(L(ex,ey)+base,2,0);\n\tadd(L(ex,ey)+2*base,2,0);\n\tadd(L(ex,ey)+3*base,2,0);\n\tadd(L(ex,ey)+4*base,2,0);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(mp[i][j]==0){\n            \t//\u4e0e\u5468\u56f4\u56db\u4e2a\u65b9\u5411\n\t\t\t\tif(i!=1&&mp[i-1][j]==0)\n\t\t\t\tadd(L(i,j)+5*base,L(i-1,j)+base,0);\n\t\t\t\tif(i!=n&&mp[i+1][j]==0)\n\t\t\t\tadd(L(i,j)+6*base,L(i+1,j)+2*base,0);\n\t\t\t\tif(j!=1&&mp[i][j-1]==0)\n\t\t\t\tadd(L(i,j)+7*base,L(i,j-1)+3*base,0);\n\t\t\t\tif(j!=m&&mp[i][j+1]==0)          \n\t\t\t\tadd(L(i,j)+8*base,L(i,j+1)+4*base,0);\n                //\u4e0d\u8f6c\u5411\n\t\t\t\tadd(L(i,j)+base,L(i,j)+5*base,0);\n\t\t\t\tadd(L(i,j)+2*base,L(i,j)+6*base,0);\n\t\t\t\tadd(L(i,j)+3*base,L(i,j)+7*base,0);\n\t\t\t\tadd(L(i,j)+4*base,L(i,j)+8*base,0);\n                //\u53f3\u8f6c\n\t\t\t\tadd(L(i,j)+base,L(i,j)+8*base,5);\n\t\t\t\tadd(L(i,j)+2*base,L(i,j)+3*base,5);\n\t\t\t\tadd(L(i,j)+3*base,L(i,j)+5*base,5);\n\t\t\t\tadd(L(i,j)+4*base,L(i,j)+6*base,5);\n                //\u5de6\u8f6c\n\t\t\t\tadd(L(i,j)+base,L(i,j)+7*base,1);\n\t\t\t\tadd(L(i,j)+2*base,L(i,j)+8*base,1);\n\t\t\t\tadd(L(i,j)+3*base,L(i,j)+6*base,1);\n\t\t\t\tadd(L(i,j)+4*base,L(i,j)+5*base,1);\n                //\u8c03\u5934\n\t\t\t\tbool NB=(i==1||mp[i-1][j]==1);\n\t\t\t\tbool SB=(i==n||mp[i+1][j]==1);\n\t\t\t\tbool WB=(j==1||mp[i][j-1]==1);\n\t\t\t\tbool EB=(j==m||mp[i][j+1]==1);\n\t\t\t\tif(NB&&WB&&EB)add(L(i,j)+base,L(i,j)+6*base,10);\n\t\t\t\tif(EB&&NB&&SB)add(L(i,j)+4*base,L(i,j)+7*base,10);\n\t\t\t\tif(WB&&NB&&SB)add(L(i,j)+3*base,L(i,j)+8*base,10);\n\t\t\t\tif(SB&&WB&&EB)add(L(i,j)+2*base,L(i,j)+5*base,10);\n\t\t\t}\n\t\t}\n\t}\n\tdijkstra();\n\tint ans=dist[2];\n\tprintf(\"%d\",ans);\n}\n```\n",
        "postTime": 1553595863,
        "uid": 85513,
        "name": "pcktrsss",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    },
    {
        "content": "\u660e\u663e\u7684\u641c\u7d22,\u4f46\u9700\u8981\u6ce8\u610f\u51e0\u4e2a\u95ee\u9898,\u5c24\u5176\u662f\u65b9\u5411\u5224\u65ad\n\n1.\u548c\u8bb0\u5f55\u6b65\u6570\u4e0d\u4e00\u6837\uff0c\u8981DFS\n\n2.\u6700\u4f18\u5316\u526a\u679d:val\u6570\u7ec4\n\n3.\u8d77\u70b9\u7ec8\u70b9\u7684\u521d\u59cb\u5316\n\n4.\u81f3\u4e8e\u65b9\u5411\u5224\u65ad,\u5177\u4f53\u770b\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst int N=205;\n\nint m,n,sx,sy,ex,ey,Ans=0x7fffffff;\nint to[5]={1,0,-1,0,1};\n//\u4e00\u4e2a\u6570\u7ec4\u4ee3\u66ff\u4e24\u4e2a:xn=x+to[i],yn=y+to[i+1],\u5efa\u8bae\u753b\u56fe\u6a21\u62df\u4e00\u4e0b(\u5f53\u7136\u51992\u4e2a\u6570\u7ec4\u5b8c\u5168\u53ef\u4ee5) \n//\u76f8\u5f53\u4e8e xto[4]={1,0,-1,0}\n//         yto[4]={0,-1,0,1} \n// i =0 1 2 3\n//to: S W N E\nint val[N][N][5];\nchar c[N];\nbool Can[N][N];\n\nvoid DFS(int x,int y,int fac,int now)\n{\n    if(now>=val[x][y][fac]) return;//\u6700\u4f18\u5316\u526a\u679d \n    val[x][y][fac]=now;\n//    printf(\"%d %d %d %d\\n\",x,y,fac,now);\n    if(x==ex&&y==ey)\n    {\n        Ans=min(Ans,now);\n        return;\n    }\n    for(int i=1;i<=n&&i<=m;i++)//\u5148\u5355\u72ec\u5224\u65ad\u76f4\u8d70,\u56e0\u4e3a\u6b65\u6570\u4e0d\u5b9a \n    {\n        int xx=x+to[fac]*i,yy=y+to[fac+1]*i;\n        if(xx==ex&&yy==ey)\n        {\n            Ans=min(Ans,now);\n            return;\n        }\n        if(xx<1||xx>n||yy<1||yy>m) break;//\u8d8a\u754c \n        if(!Can[xx][yy]) break;//\u9047\u5230\u969c\u788d,\u76f4\u63a5break \n//        printf(\"%d %d -> %d %d fac:%d now:%d\\n\",x,y,xx,yy,fac,now);\n        DFS(xx,yy,fac,now);\n    }\n    for(int i=0;i<4;i++)\n    {\n        if(i==fac) continue;//\u65b9\u5411\u4e0e\u5f53\u524d\u65b9\u5411\u4e00\u81f4,\u5373\u76f4\u8d70,\u5728\u524d\u9762\u5df2\u7ecf\u5224\u65ad\u8fc7,\u8df3\u8fc7 \n        int xx=x+to[i],yy=y+to[i+1];\n        if(xx<1||xx>n||yy<1||yy>m) continue;\n        if(!Can[xx][yy]) continue;\n        if(fac-i==1||(fac==0)&&i==3)//\u5de6\u8f6c\u65f6\u7684\u60c5\u51b5,\u6a21\u62df\u4e00\u4e0b\u4e0d\u96be\u5f97\u51fa \n          DFS(xx,yy,i,now+1);\n        else if(i-fac==1||(i==0&&fac==3))//\u53f3\u8f6c \n          DFS(xx,yy,i,now+5);\n        else if(!Can[x+to[(fac-1+4)%4]][y+to[fac]])//\u8981\u6c42\u5de6\u8f6c. \n          if(!Can[x+to[(fac-3+4)%4]][y+to[(fac-2+4)%4]])//\u53f3\u8f6c \n          if(!Can[x+to[fac]][y+to[(fac+1)%4]])//\u76f4\u884c\u4e0d\u884c\u65f6,\u624d\u80fd\u6389\u5934 \n            DFS(xx,yy,i,now+10);\n        //\u6ce8\u610f+4\u53d6\u6a21 \n        //trun left: x+to[f-1],y+to[f]\n        //trun right: x+to[f-3],y+to[f-2]\n        //go stright: x+to[f],y+to[f+1]\n    }\n}\n\nint main()\n{\n//    freopen(\"erp.in\",\"r\",stdin);\n//    freopen(\"erp.out\",\"w\",stdout);\n    scanf(\"%d%d\",&n,&m);\n    int face;\n    memset(val,0x3f,sizeof val);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%s\",c+1);\n        for(int j=1;j<=m;j++)\n        {\n            switch(c[j])\n            {\n                case '#':Can[i][j]=1;break;\n                case 'E':face=3,sx=i,sy=j;break;\n                case 'S':face=0,sx=i,sy=j;break;\n                case 'W':face=1,sx=i,sy=j;break;\n                case 'N':face=2,sx=i,sy=j;break;\n                case 'F':ex=i,ey=j;break;\n            }\n        }\n    }\n//    printf(\"sx:%d sy:%d ex:%d ey:%d face:%d\\n\",sx,sy,ex,ey,face);\n    Can[sx][sy]=1;//\u8d77\u70b9\u7ec8\u70b9\u8fd9\u4e2a\u4f4d\u7f6e\u662f\u53ef\u4ee5\u8d70\u7684 \n    Can[ex][ey]=1;\n    DFS(sx,sy,face,0);\n    printf(\"%d\",Ans);\n    return 0;\n}\n```",
        "postTime": 1498440234,
        "uid": 39887,
        "name": "SovietPower\u2728",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    },
    {
        "content": "\u6211\u53ef\u79f0\u4e4b\u4e3a\u5927\u6a21\u62df\uff01\n\n\u9996\u5148\u770b\u5230\u6570\u636e\u8303\u56f4\uff0c\u4e0d\u96be\u60f3\u5230\u4f7f\u7528\u5927\u578b BFS\u3002\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u72b6\u6001 $x$ \u5305\u62ec\u5f53\u524d\u65b9\u5411\uff0c\u5f53\u524d\u5750\u6807\u4ee5\u53ca\u5230\u8fbe\u5f53\u524d\u4f4d\u7f6e\u7684\u7b54\u6848\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u7ed9\u51fa\u7684\u65b9\u5411\u5c06\u5176\u8f6c\u5316\u4e3a\u6570\u5b57 $1\\sim 4$\uff0c\u63a5\u7740\u627e\u5230\u7ec8\u70b9\u5750\u6807\uff0c\u8d77\u70b9\u5750\u6807\u548c\u521d\u59cb\u65b9\u5411\uff0c\u7ed9\u4f18\u5148\u961f\u5217\u5b9a\u4e49\u7b2c\u4e00\u4e2a\u72b6\u6001\u3002\n\n\u7136\u540e\u6211\u4eec\u6cbf\u7740\u5f53\u524d\u65b9\u5411\u4e00\u76f4\u8d70\u5230\u5c3d\u5934\uff0c\u4f46\u662f\u5982\u679c\u76f4\u63a5\u8d70\u7684\u8bdd\u5c31\u4f1a\u5ffd\u7565\u6389\u4e2d\u95f4\u7684\u8f6c\u6298\u70b9\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u5de6\u8f6c\u6216\u8005\u53f3\u8f6c\u7684\u70b9\uff0c\u56e0\u6b64\u5728\u5faa\u73af\u7684\u8fc7\u7a0b\u5f53\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5224\u65ad\u5f53\u524d\u5de6\u53f3\u4e24\u8fb9\u662f\u5426\u6709\u8f6c\u6298\uff0c\u5982\u679c\u6709\uff0c\u5c31\u7ed9\u961f\u5217\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u3002\u6700\u540e\u8d70\u5230\u4e86\u5c3d\u5934\uff0c\u6211\u4eec\u4e0d\u5f97\u4e0d\u8fdb\u884c\u8c03\u5934\u64cd\u4f5c\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u518d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\uff0c\u5c06\u65b9\u5411\u53d6\u53cd\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u7ec8\u70b9\u53ef\u80fd\u4f1a\u5728\u4e00\u6761\u8def\u7684\u4e2d\u95f4\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u8fdb\u884c\u4e00\u4e2a\u7ec8\u70b9\u5224\u65ad\uff0c\u5982\u679c\u627e\u5230\u7ec8\u70b9\uff0c\u5c31\u76f4\u63a5\u8f93\u51fa\u7b54\u6848\u3002\n\n\u4f60\u81ea\u4fe1\u6ee1\u6ee1\u5730\u4ea4\u4e86\u8fd9\u4e2a\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN = 35;\nint n, m;\nchar s[MAXN][MAXN];\nint ex, ey;\nstruct node {\n    int fl, nx, ny, x;\n    bool operator<(const node &f) const {\n        return x != f.x ? x > f.x : abs(nx - ex) + abs(ny - ey) > abs(f.nx - ex) + abs(f.ny - ey);\n    }\n};\npriority_queue<node> que;\nint vis[MAXN][MAXN];\nvoid bfs() {\n    int flag = 0, sx = 0, sy = 0;\n    for (int i = 1; i <= n; i++) {\n        for (int j = 1; j <= m; j++) {\n            if (s[i][j] == 'E' || s[i][j] == 'W' || s[i][j] == 'N' || s[i][j] == 'S') {\n                if (s[i][j] == 'E')\n                    flag = 1;\n                if (s[i][j] == 'W')\n                    flag = 2;\n                if (s[i][j] == 'N')\n                    flag = 3;\n                if (s[i][j] == 'S')\n                    flag = 4;\n                sx = i, sy = j;\n            }\n            if (s[i][j] == 'F')\n                ex = i, ey = j;\n        }\n    }\n    que.push((node){ flag, sx, sy, 0 });\n    while (!que.empty()) {\n        node t = que.top();\n        que.pop();\n        if (t.nx == ex && t.ny == ey) {\n            cout << t.x;\n            return;\n        }\n        if (vis[t.nx][t.ny]) \n        \tcontinue;\n        vis[t.nx][t.ny] = 1;\n        int nx = t.nx, ny = t.ny;\n        if (t.fl == 1) {\n            while (ny <= m && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (nx > 1 && s[nx - 1][ny] != '.')\n                    que.push((node){ 3, nx - 1, ny, t.x + 1 });\n                if (nx < n && s[nx + 1][ny] != '.')\n                    que.push((node){ 4, nx + 1, ny, t.x + 5 });\n                ny++;\n            }\n            ny--;\n            if (s[nx + 1][ny] == '.' && s[nx - 1][ny] == '.')\n                que.push((node){ 2, nx, ny, t.x + 10 });\n        } else if (t.fl == 2) {\n            while (ny >= 1 && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (nx > 1 && s[nx - 1][ny] != '.')\n                    que.push((node){ 3, nx - 1, ny, t.x + 5 });\n                if (nx < n && s[nx + 1][ny] != '.')\n                    que.push((node){ 4, nx + 1, ny, t.x + 1 });\n                ny--;\n            }\n            ny++;\n            if (s[nx + 1][ny] == '.' && s[nx - 1][ny] == '.')\n                que.push((node){ 1, nx, ny, t.x + 10 });\n        } else if (t.fl == 3) {\n            while (nx >= 1 && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (ny > 1 && s[nx][ny - 1] != '.')\n                    que.push((node){ 2, nx, ny - 1, t.x + 1 });\n                if (ny < m && s[nx][ny + 1] != '.')\n                    que.push((node){ 1, nx, ny + 1, t.x + 5 });\n                nx--;\n            }\n            nx++;\n            if (s[nx][ny + 1] == '.' && s[nx][ny - 1] == '.')\n                que.push((node){ 4, nx, ny, t.x + 10 });\n        } else {\n            while (nx <= n && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (ny > 1 && s[nx][ny - 1] != '.')\n                    que.push((node){ 2, nx, ny - 1, t.x + 5 });\n                if (ny < m && s[nx][ny + 1] != '.')\n                    que.push((node){ 1, nx, ny + 1, t.x + 1 });\n                nx++;\n            }\n            nx--;\n            if (s[nx][ny + 1] == '.' && s[nx][ny - 1] == '.')\n                que.push((node){ 3, nx, ny, t.x + 10 });\n        }\n    }\n}\nint main() {\n    cin >> n >> m;\n    for (int i = 1; i <= n; i++) {\n        for (int j = 1; j <= m; j++) cin >> s[i][j];\n    }\n    bfs();\n    return 0;\n}\n```\n\n\u7136\u540e\u4f60\u53ea\u6709 $80$ \u5206\uff0c\u7b54\u6848\u9519\u8bef\u4e86\uff0c\u6b64\u65f6\u4f60\u53c8\u806a\u660e\u5730\u5220\u6389\u4e86 vis \u6570\u7ec4\uff0c\u56e0\u4e3a\u65b9\u5411\u4e0d\u540c\uff0c\u8d70\u8fc7\u7684\u70b9\u91cd\u590d\u4e86\u53ef\u80fd\u7b54\u6848\u4f1a\u66f4\u4f18\u3002\n\n\u4f46\u662f\u4f1a MLE\u3002\n\n\u6240\u4ee5\u5c31\u6709\u4e86\u6700\u540e\u7684\u601d\u8def\uff0c\u7ed9 vis \u6570\u7ec4\u91cc\u9762\u50a8\u5b58\u5f53\u524d\u70b9\u7684\u6700\u4f18\u7b54\u6848\uff0c\u5982\u679c\u5f53\u524d\u72b6\u6001\u7684\u7b54\u6848\u5927\u4e8e\u5bf9\u5e94 vis \u7684\u7b54\u6848\uff0c\u90a3\u4e48\u80af\u5b9a\u662f\u4e0d\u884c\u7684\u3002\u53cd\u4e4b\u5c31\u66f4\u65b0 vis \u7684\u503c\uff0c\u8fd9\u6837\u5c31\u4f1a\u51cf\u5c11\u4e00\u4e9b\u786e\u5b9a\u4e0d\u884c\u7684\u72b6\u6001\u3002\n\n\u6700\u7ec8\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN = 35;\nint n, m;\nchar s[MAXN][MAXN];\nint ex, ey;\nstruct node {\n    int fl, nx, ny, x;\n    bool operator<(const node &f) const {\n        return x > f.x;\n    }\n};\npriority_queue<node> que;\nint vis[MAXN][MAXN];\nvoid bfs() {\n    int flag = 0, sx = 0, sy = 0;\n    for (int i = 1; i <= n; i++) {\n        for (int j = 1; j <= m; j++) {\n            if (s[i][j] == 'E' || s[i][j] == 'W' || s[i][j] == 'N' || s[i][j] == 'S') {\n                if (s[i][j] == 'E')\n                    flag = 1;\n                if (s[i][j] == 'W')\n                    flag = 2;\n                if (s[i][j] == 'N')\n                    flag = 3;\n                if (s[i][j] == 'S')\n                    flag = 4;\n                sx = i, sy = j;\n            } else if (s[i][j] == 'F')\n                ex = i, ey = j;\n        }\n    }\n    que.push((node){ flag, sx, sy, 0 });\n    while (!que.empty()) {\n        node t = que.top();\n        que.pop();\n        if (t.nx == ex && t.ny == ey) {\n            cout << t.x;\n            return;\n        }\n        if (vis[t.nx][t.ny] && t.x > vis[t.nx][t.ny])\n            continue;\n        vis[t.nx][t.ny] = t.x;\n        int nx = t.nx, ny = t.ny;\n        if (t.fl == 1) {\n            while (ny <= m && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (nx > 1 && s[nx - 1][ny] != '.')\n                    que.push((node){ 3, nx - 1, ny, t.x + 1 });\n                if (nx < n && s[nx + 1][ny] != '.')\n                    que.push((node){ 4, nx + 1, ny, t.x + 5 });\n                ny++;\n            }\n            ny--;\n            if (s[nx + 1][ny] == '.' && s[nx - 1][ny] == '.')\n                que.push((node){ 2, nx, ny, t.x + 10 });\n        } else if (t.fl == 2) {\n            while (ny >= 1 && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (nx > 1 && s[nx - 1][ny] != '.')\n                    que.push((node){ 3, nx - 1, ny, t.x + 5 });\n                if (nx < n && s[nx + 1][ny] != '.')\n                    que.push((node){ 4, nx + 1, ny, t.x + 1 });\n                ny--;\n            }\n            ny++;\n            if (s[nx + 1][ny] == '.' && s[nx - 1][ny] == '.')\n                que.push((node){ 1, nx, ny, t.x + 10 });\n        } else if (t.fl == 3) {\n            while (nx >= 1 && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (ny > 1 && s[nx][ny - 1] != '.')\n                    que.push((node){ 2, nx, ny - 1, t.x + 1 });\n                if (ny < m && s[nx][ny + 1] != '.')\n                    que.push((node){ 1, nx, ny + 1, t.x + 5 });\n                nx--;\n            }\n            nx++;\n            if (s[nx][ny + 1] == '.' && s[nx][ny - 1] == '.')\n                que.push((node){ 4, nx, ny, t.x + 10 });\n        } else {\n            while (nx <= n && s[nx][ny] != '.') {\n                if (nx == ex && ny == ey) {\n                    cout << t.x;\n                    return;\n                }\n                if (ny > 1 && s[nx][ny - 1] != '.')\n                    que.push((node){ 2, nx, ny - 1, t.x + 5 });\n                if (ny < m && s[nx][ny + 1] != '.')\n                    que.push((node){ 1, nx, ny + 1, t.x + 1 });\n                nx++;\n            }\n            nx--;\n            if (s[nx][ny + 1] == '.' && s[nx][ny - 1] == '.')\n                que.push((node){ 3, nx, ny, t.x + 10 });\n        }\n    }\n}\nint main() {\n    cin >> n >> m;\n    for (int i = 1; i <= n; i++) {\n        for (int j = 1; j <= m; j++) cin >> s[i][j];\n    }\n    bfs();\n    return 0;\n}\n```",
        "postTime": 1666703819,
        "uid": 439177,
        "name": "Super_Sheep",
        "ccfLevel": 0,
        "title": "P1300\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u4e3b\u8981\u8003\u5bdf\u7684\u662f\u641c\u7d22\u548c\u526a\u679d\u3002\u4e8e\u662f\u6211\u7528\u4e86\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u52a0\u8bb0\u5fc6\u5316\u526a\u679d\u3002  \n\u9996\u5148\u5c06\u5404\u79cd\u7279\u6b8a\u70b9\u6807\u8bb0\u51fa\u6765\uff0c\u5c06\u7b54\u6848\u6570\u7ec4\u521d\u59cb\u5316\u4e3a\u6700\u5927\u503c\u3002\n\u5176\u6b21\uff0c\u5f00\u59cb\u6df1\u641c\u3002\u4e0d\u8fc7\u8981\u5148\u526a\u679d\uff0c\u5c06\u8f83\u5dee\u7684\u60c5\u51b5\u6392\u9664\u3002  \n\u7136\u540e\uff0c\u5f80\u524d\u3001\u5de6\u3001\u53f3\u4e09\u4e2a\u65b9\u5411\u641c\u7d22\uff0c\u5982\u679c\u4e09\u4e2a\u65b9\u5411\u90fd\u6ca1\u6cd5\u8d70\uff0c\u624d\u53ef\u4ee5\u6389\u5934\u3002  \n\u6700\u540e\uff0c\u8f93\u51fa\u7ed3\u679c\u3002\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int xx[4]={-1,0,1,0},yy[4]={0,-1,0,1},v[4]={0,1,10,5};\nint n,m,enx,eny,stx,sty,turn,dist[32][32][4],ans=1e9;\nchar ch;\nbool vis[32][32];\nvoid dfs(int x,int y,int turn,int sum){//dfs\n\tif(dist[x][y][turn]<=sum||sum>=ans)return;\n\tdist[x][y][turn]=sum;\n\tif(x==enx&&y==eny)ans=min(ans,dist[x][y][turn]);\n\tbool flag=0;\n\tfor(int i=0;i<=4;i++){\n\t\tif(i==2)continue;\n\t\tif(i==4)i-=2;\n\t\tint Turn=(turn+i)%4,nx=x+xx[Turn],ny=y+yy[Turn];\n\t\tif(vis[nx][ny]&&i!=2){\n\t\t\tflag=1;\n\t\t\tdfs(nx,ny,Turn,sum+v[i]);\n\t\t}else if(i==2&&vis[nx][ny]&&!flag){//\u5224\u662f\u5426\u6389\u5934 \n\t\t\tdfs(nx,ny,Turn,sum+10);\n\t\t\tbreak;\n\t\t}else if(i==2){\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn;\n}\nsigned main(){\n\tcin >>n>>m;\n\tmemset(dist,127,sizeof(dist));//\u521d\u59cb\u5316\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin >>ch;\n\t\t\tvis[i][j]=1;\n\t\t\tif(ch=='F'){//\u6807\u8bb0\u7279\u6b8a\u70b9\n\t\t\t\tenx=i;eny=j;\n\t\t\t}else if(ch=='E'){\n\t\t\t\tstx=i;sty=j;turn=3;\n\t\t\t}else if(ch=='W'){\n\t\t\t\tstx=i;sty=j;turn=1;\n\t\t\t}else if(ch=='N'){\n\t\t\t\tstx=i;sty=j;turn=0;\n\t\t\t}else if(ch=='S'){\n\t\t\t\tstx=i;sty=j;turn=2;\n\t\t\t}else if(ch=='.'){\n\t\t\t\tvis[i][j]=0;\n\t\t\t}\n\t\t}\n\t}\n\tdfs(stx,sty,turn,0);//dfs\n\tcout <<ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1660531297,
        "uid": 559526,
        "name": "wwwwwza",
        "ccfLevel": 0,
        "title": "P1300 \u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u9898\u89e3"
    },
    {
        "content": "\u8bf4\u5b9e\u8bdd\uff0c\u8fd9\u9898\u6211\u4eec\u53ef\u4ee5\u5927\u6a21\u62df BFS\uff0c\u8fd9\u662f\u6700~~\u7b28~~\u76f4\u89c2\u7684\u65b9\u6cd5\u4e86\u3002\n\n\u7528 $dis[i][j][k]$ \u8868\u793a\u5230 $(i,j)$ \u7684\u70b9\u9762\u5411 $k$ \u7684\u65b9\u5411\u7528\u7684\u6700\u77ed\u8def\u3002\u7531\u4e8e\u6211\u61d2\uff0c\u6240\u4ee5 $k$ \u91cc\u9762\u76f4\u63a5\u653e\u5b57\u7b26\u3002\u6211\u4eec\u7528 E\u3001S\u3001W\u3001N \u6765\u8868\u793a\u4e1c\u3001\u5357\u3001\u897f\u3001\u5317\u3002\u7531\u4e8e\u5c0f\u5199 a \u7684 ASCII \u503c\u4e3a $97$\uff0c\u6240\u4ee5\u5927\u5199\u5b57\u6bcd\u7684 ASCII \u503c\u80af\u5b9a\u4e0d\u8d85\u8fc7 $97$\uff0c\u6240\u4ee5\u6211\u7ed9 $dis$ \u6570\u7ec4\u7684\u7b2c\u4e09\u7ef4\u5f00\u4e86 $100$\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u6211\u4eec\u5224\u65ad\u5b83\u5f53\u524d\u7684\u65b9\u5411\uff0c\u5e76\u6839\u636e\u65b9\u5411\u63a8\u51fa\u5b83\u524d\u8fdb\u5230\u54ea\u91cc\u3001\u5de6\u8f6c\u5230\u54ea\u91cc\u3001\u53f3\u8f6c\u5230\u54ea\u91cc\u3001\u6389\u5934\u5230\u54ea\u91cc\u3002\u6ce8\u610f\uff0c\u5de6\u8f6c\u662f\u6539\u53d8\u65b9\u5411\u5e76\u4e14**\u5230\u8fbe\u5b83\u5de6\u8fb9\u7684\u70b9**\uff0c\u53f3\u8f6c\u662f**\u6539\u53d8\u65b9\u5411\u5e76\u5230\u8fbe\u5b83\u53f3\u8fb9\u7684\u70b9**\uff0c\u6389\u5934\u65f6\u6539\u53d8\u65b9\u5411**\u5e76\u5230\u8fbe\u5b83\u540e\u9762\u7684\u70b9**\uff0c\u6240\u4ee5\u8f6c\u5f2f\u7684\u65f6\u5019\u76f8\u5e94\u7684\u5750\u6807\u8981 $+1$ \u6216 $-1$\u3002\u849f\u84bb\u8bed\u6587\u592a\u5dee\u88ab\u5751\u4e86\u597d\u4e45\u3002\u7136\u540e\u5224\u65ad\u5f53\u524d\u8d70\u6cd5\u82b1\u8d39\u662f\u5426\u6bd4\u4e4b\u524d\u7684\u6700\u5c0f\u82b1\u8d39\u5c0f\u3002\u5982\u679c\u5c0f\u5c31\u66f4\u65b0\u3002\u4e3a\u4e86\u65b9\u4fbf\u8bb2\u8ff0\u6a21\u62df\u8fc7\u7a0b\uff0c\u5148\u628a\u5341\u5b57\u65b9\u5411\u6807\u653e\u4e0a\u6765\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/015xqdml.png?x-oss-process=image/resize,m_lfit,h_500,w_500)\n\n\u5bf9\u4e8e\u70b9 $(x,y,\\text{E})$\uff0c\u524d\u8fdb\u4f1a\u5230\u8fbe\u70b9 $(x,y+1,\\text{E})$\uff1b\u5de6\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x-1,y,\\text{N})$\uff1b\u53f3\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x+1,y,\\text{S})$\uff1b\u6389\u5934\u4f1a\u5230\u8fbe\u70b9 $(x,y-1,\\text{W})$\u3002\n\n\u5bf9\u4e8e\u70b9 $(x,y,\\text{S})$\uff0c\u524d\u8fdb\u4f1a\u5230\u8fbe\u70b9 $(x+1,y,\\text{S})$\uff1b\u5de6\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x,y+1,\\text{E})$\uff1b\u53f3\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x,y-1,\\text{W})$\uff1b\u6389\u5934\u4f1a\u5230\u8fbe\u70b9 $(x-1,y,\\text{N})$\u3002\n\n\u5bf9\u4e8e\u70b9 $(x,y,\\text{W})$\uff0c\u524d\u8fdb\u4f1a\u5230\u8fbe\u70b9 $(x,y-1,\\text{W})$\uff1b\u5de6\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x+1,y,\\text{S})$\uff1b\u53f3\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x-1,y,\\text{N})$\uff1b\u6389\u5934\u4f1a\u5230\u8fbe\u70b9 $(x,y+1,\\text{E})$\u3002\n\n\u5bf9\u4e8e\u70b9 $(x,y,\\text{N})$\uff0c\u524d\u8fdb\u4f1a\u5230\u8fbe\u70b9 $(x-1,y,\\text{N})$\uff1b\u5de6\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x,y-1,\\text{W})$\uff1b\u53f3\u8f6c\u4f1a\u5230\u8fbe\u70b9 $(x,y+1,\\text{E})$\uff1b\u6389\u5934\u4f1a\u5230\u8fbe\u70b9 $(x+1,y,\\text{S})$\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5de6\u8f6c\u3001\u53f3\u8f6c\uff1b\u524d\u8fdb\u3001\u6389\u5934\u7684\u5750\u6807\u6070\u6070\u76f8\u53cd\u3002\u5357\u3001\u5317\uff1b\u4e1c\u3001\u897f\u7684\u8d70\u6cd5\u4e5f\u6b63\u597d\u76f8\u53cd\u3002\n\n\u7531\u4e8e\u6b64\u9898\u8303\u56f4\u5f88\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u9700\u8981\u50cf\u697c\u4e0a\u7684 dalao \u4e00\u6837\u7528\u4f18\u5148\u961f\u5217\uff0c\u5c3d\u7ba1\u91cd\u590d\u8fdb\u961f\u4e86\u6548\u7387\u7565\u4f4e\u4e5f\u6ca1\u6709\u5173\u7cfb\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 35\nstruct pos\n{\n\tint x,y,c;//x,y\u8868\u793a\u5750\u6807\uff0cc\u8868\u793a\u82b1\u8d39\n\tchar d;//\u8868\u793a\u65b9\u5411\n};\nqueue<pos>q;\nchar ma[N][N];//\u5730\u56fe\nint dis[N][N][100];//\u8303\u56f4\u4e0a\u9762\u89e3\u91ca\u8fc7\u4e86\nint main()\n{\n\tmemset(dis,0x3f,sizeof(dis));//\u521d\u59cb\u5316\u6210\u65e0\u7a77\u5927\n\tint n,m;\n\tscanf(\"%d%d\",&n,&m);\n\tint tx,ty;//\u7ec8\u70b9\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",ma[i]+1);//\u628a\u5b57\u7b26\u6570\u7ec4\u7684\u4e00\u884c\u5f53\u4f5c\u5b57\u7b26\u4e32\u6765\u8bfb\uff0c\u7531\u4e8e\u4e60\u60ef\u4ece\u4e0b\u68071\u5f00\u59cb\uff0c\u6240\u4ee5\u8981+1\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(ma[i][j]=='E'||ma[i][j]=='S'||ma[i][j]=='W'||ma[i][j]=='N')//\u627e\u5230\u8d77\u70b9\n\t\t\t{\n\t\t\t\tdis[i][j][ma[i][j]]=0;//\u8d77\u70b9\u82b1\u8d39\u4e3a0\n\t\t\t\tq.push(pos{i,j,0,ma[i][j]});//\u8d77\u70b9\u5165\u961f\n\t\t\t}\n\t\t\tif(ma[i][j]=='F')//\u627e\u5230\u7ec8\u70b9\n\t\t\t{\n\t\t\t\ttx=i;//\u8bb0\u5f55\u5750\u6807\n\t\t\t\tty=j;\n\t\t\t}\n\t\t}\n\t}\n\twhile(q.size())//BFS\n\t{\n\t\tpos t=q.front();//\u53d6\u51fa\u961f\u5934\n\t\tq.pop();\n\t\tint x=t.x,y=t.y,c=t.c;\n\t\tchar d=t.d;\n\t\tbool k=0;//\u6389\u5934\u4e4b\u524d\u7684\u64cd\u4f5c\u662f\u5426\u80fd\u505a\uff0c\u5982\u679c\u80fd\u505a\u5c31\u4e0d\u80fd\u6389\u5934\n\t\tif(d=='E')//\u5982\u679c\u9762\u5411\u4e1c\u65b9\uff0c\u5230\u8fbe\u7684\u70b9\u4e0a\u9762\u90fd\u8bf4\u8fc7\u4e86\u3002\u8fd9\u91cc\u7684\u6ce8\u91ca\u5230\u5176\u4ed6\u4e09\u4e2a\u65b9\u5411\u4ecd\u7136\u9002\u7528\uff0c\u5176\u4ed6\u4e09\u4e2a\u65b9\u5411\u4e0d\u518d\u8d58\u8ff0\n\t\t{\n\t\t\tif(ma[x][y+1]!='.'&&c<dis[x][y+1][d])//\u524d\u8fdb\uff0c\u5982\u679c\u4e0d\u662f\u969c\u788d\u4e14\u66f4\u4f18\u5c31\u5165\u961f\u3002c\u540e\u9762\u6539\u6210<=\u4e5f\u884c\uff0c\u5c31\u662f=\u65f6\u4e4b\u524d\u4e00\u6837\u7684\u5df2\u7ecf\u8fdb\u8fc7\u961f\u6269\u5c55\u8fc7\u4e86\uff0c\u518d\u6c42\u4e00\u904d\u6269\u5c55\u7684\u8fd8\u662f\u4e00\u6837\u7684\uff0c\u518d\u91cd\u590d\u505a\u4e00\u904d\u5c31\u6ca1\u610f\u4e49\u4e86\n\t\t\t{\n\t\t\t\tq.push(pos{x,y+1,c,d});\n\t\t\t\tdis[x][y+1][d]=c;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+1<dis[x-1][y]['N']&&ma[x-1][y]!='.')//\u5de6\u8f6c\uff0c\u5982\u679c\u66f4\u4f18\u4e14\u4e0d\u662f\u969c\u788d\u5c31\u5165\u961f\n\t\t\t{\n\t\t\t\tq.push(pos{x-1,y,c+1,'N'});\n\t\t\t\tdis[x-1][y]['N']=c+1;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+5<dis[x+1][y]['S']&&ma[x+1][y]!='.')//\u53f3\u8f6c\uff0c\u5982\u679c\u66f4\u4f18\u4e14\u4e0d\u662f\u969c\u788d\u5c31\u5165\u961f\n\t\t\t{\n\t\t\t\tq.push(pos{x+1,y,c+5,'S'});\n\t\t\t\tdis[x+1][y]['S']=c+5;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(!k&&c+10<dis[x][y-1]['W']&&ma[x][y-1]!='.')//\u6389\u5934\uff0c\u5982\u679c\u4e4b\u524d\u7684\u90fd\u4e0d\u80fd\u505a\u5e76\u4e14\u5982\u679c\u66f4\u4f18\u3001\u4e0d\u662f\u969c\u788d\u5c31\u5165\u961f\n\t\t\t{\n\t\t\t\tq.push(pos{x,y-1,c+10,'W'});\n\t\t\t\tdis[x][y-1]['W']=c+10; \n\t\t\t}\n\t\t}\n\t\tif(d=='S')//\u5982\u679c\u9762\u5411\u5357\u65b9\n\t\t{\n\t\t\tif(ma[x+1][y]!='.'&&c<=dis[x+1][y][d])\n\t\t\t{\n\t\t\t\tq.push(pos{x+1,y,c,d});\n\t\t\t\tdis[x+1][y][d]=c;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+1<=dis[x][y+1]['E']&&ma[x][y+1]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x,y+1,c+1,'E'});\n\t\t\t\tdis[x][y+1]['E']=c+1;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+5<=dis[x][y-1]['W']&&ma[x][y-1]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x,y-1,c+5,'W'});\n\t\t\t\tdis[x][y-1]['W']=c+5;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(!k&&c+10<=dis[x-1][y]['N']&&ma[x-1][y]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x-1,y,c+10,'N'});\n\t\t\t\tdis[x-1][y]['N']=c+10; \n\t\t\t}\n\t\t}\n\t\tif(d=='W')//\u5982\u679c\u9762\u5411\u897f\u65b9\n\t\t{\n\t\t\tif(ma[x][y-1]!='.'&&c<=dis[x][y-1][d])\n\t\t\t{\n\t\t\t\tq.push(pos{x,y-1,c,d});\n\t\t\t\tdis[x][y-1][d]=c;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+1<=dis[x+1][y]['S']&&ma[x+1][y]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x+1,y,c+1,'S'});\n\t\t\t\tdis[x+1][y]['S']=c+1;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+5<=dis[x-1][y]['N']&&ma[x-1][y]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x-1,y,c+5,'N'});\n\t\t\t\tdis[x-1][y]['N']=c+5;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(!k&&c+10<=dis[x][y+1]['E']&&ma[x][y+1]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x,y+1,c+10,'E'});\n\t\t\t\tdis[x][y+1]['E']=c+10; \n\t\t\t}\n\t\t}\n\t\tif(d=='N')//\u5982\u679c\u9762\u5411\u5317\u65b9\n\t\t{\n\t\t\tif(ma[x-1][y]!='.'&&c<=dis[x-1][y][d])\n\t\t\t{\n\t\t\t\tq.push(pos{x-1,y,c,d});\n\t\t\t\tdis[x-1][y][d]=c;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+1<=dis[x][y-1]['W']&&ma[x][y-1]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x,y-1,c+1,'W'});\n\t\t\t\tdis[x][y-1]['W']=c+1;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(c+5<=dis[x][y+1]['E']&&ma[x][y+1]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x,y+1,c+5,'E'});\n\t\t\t\tdis[x][y+1]['E']=c+5;\n\t\t\t\tk=1;\n\t\t\t}\n\t\t\tif(!k&&c+10<=dis[x+1][y]['S']&&ma[x+1][y]!='.')\n\t\t\t{\n\t\t\t\tq.push(pos{x+1,y,c+10,'S'});\n\t\t\t\tdis[x+1][y]['S']=c+10; \n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",min(dis[tx][ty]['E'],min(dis[tx][ty]['S'],min(dis[tx][ty]['W'],dis[tx][ty]['N']))));//\u5230\u8fbe\u7ec8\u70b9\u7684\u56db\u79cd\u65b9\u5411\u4e2d\uff0c\u9009\u62e9\u82b1\u8d39\u6700\u5c11\u7684\n\treturn 0;\n} \n```",
        "postTime": 1644567289,
        "uid": 539211,
        "name": "\u849f\u84bb\u00b7\u5ed6\u5b50\u9633",
        "ccfLevel": 5,
        "title": "P1300 \u5927\u6a21\u62df"
    },
    {
        "content": "## \u4e00\u3001\u524d\u594f\n\n### \u5730\u56fe\u9898-->\u641c\u7d22\uff01\n\n\u8003\u8651\u91c7\u7528 $\\text{dfs}$ \u7684\u65b9\u6cd5\u6765\u505a\u8fd9\u9053\u9898\uff0c\u4e0b\u9762\u8bb2\u8bb2\u6211\u7684\u601d\u8def\u3002\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\uff0c\u6211\u4eec\u5c06\u6bcf\u4e2a\u72b6\u6001\u5b9a\u4e49\u4e3a\u4e09\u4e2a\u5143\u7d20\uff1a$x$ \u5750\u6807\uff0c$y$ \u5750\u6807\u4ee5\u53ca\u65b9\u5411\u3002\n\n\u9996\u5148\u8bfb\u5165\u5730\u56fe\uff0c\u63d0\u53d6\u521d\u59cb\u70b9\u7684\u72b6\u6001\uff08\u4e09\u5143\u7d20\uff09\uff0c\u7136\u540e\u5f00\u59cb $\\text{dfs}$\u3002\n\n## \u4e8c\u3001\u641c\u7d22\u90e8\u5206\n\n#### \u5173\u4e8e\u5ef6\u4f38\u72b6\u6001\n\n\u7531\u9898\u610f\uff0c\u4e00\u5171\u6709\u56db\u79cd\u884c\u8d70\u65b9\u5f0f\uff1a\n\n1. \u4ee5\u539f\u6709\u7684\u65b9\u5411\uff0c\u5411\u524d\u8d70\u4e00\u6b65\uff0c\u82b1\u8d39 $0$\u3002\n\n2. \u4ee5\u5de6\u8f6c\u540e\u7684\u65b9\u5411\uff0c\u5411\u524d\u8d70\u4e00\u6b65\uff0c\u82b1\u8d39 $1$\u3002\n\n3. \u4ee5\u53f3\u8f6c\u540e\u7684\u65b9\u5411\uff0c\u5411\u524d\u8d70\u4e00\u6b65\uff0c\u82b1\u8d39 $5$\u3002\n\n4. **\u5728\u524d\u9762\u4e09\u79cd\u65b9\u5f0f\u90fd\u4e0d\u884c\u7684\u524d\u63d0\u4e0b**\uff0c\u4ee5\u76f8\u53cd\u7684\u65b9\u5411\uff0c\u5411\u524d\u8d70\u4e00\u6b65\uff0c\u82b1\u8d39 $10$\u3002\n\n\u5728\u5c06\u56db\u79cd\u65b9\u5f0f\u90fd\u8f6c\u5316\u4e3a\u5411\u524d\u8d70\u4e00\u6b65\u4e4b\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u56db\u79cd\u65b9\u5f0f\u552f\u4e00\u4e0d\u540c\u7684\u5730\u65b9\u5c31\u5728\u4e8e\u65b9\u5411\uff0c\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u8981\u6539\u53d8\u65b9\u5411\u5411\u524d\u8d70\u4e0d\u65ad\u5411\u4e0b\u5ef6\u4f38\u72b6\u6001\u5373\u53ef\u3002\n\n#### \u5173\u4e8e\u7ed3\u675f\u6761\u4ef6\n\n\u5f53\u8be5\u5750\u6807\u4e0a\u7684\u7b26\u53f7\u4e3a `F` \u65f6\uff0c\u66f4\u65b0\u6700\u5c0f\u7b54\u6848\uff0c\u8fd4\u56de\u4e0a\u4e00\u72b6\u6001\u3002\u6240\u6709\u72b6\u6001\u5ef6\u4f38\u5b8c\u540e\uff0c\u8fd4\u56de\u4e3b\u7a0b\u5e8f\u3002\n\n#### \u5173\u4e8e\u4f18\u5316\n\n1. \u4e3a\u4e86\u9632\u6b62\u91cd\u590d\u8d70\u5230\u4e00\u4e2a\u72b6\u6001\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a $minn$ \u6570\u7ec4\u8868\u793a\u5230\u6bcf\u4e00\u4e2a**\u72b6\u6001**\u7684\u6700\u5c0f\u503c\uff08\u6ce8\u610f\u662f\u72b6\u6001\uff0c\u4e0d\u662f\u70b9\uff01\u56e0\u4e3a\u5230\u8fbe\u6bcf\u4e00\u4e2a\u70b9\u65f6\u7684\u65b9\u5411\u53ef\u80fd\u662f\u4e0d\u540c\u7684\uff09\uff0c\u6bcf\u6b21\u5230\u8fbe\u4e00\u4e2a\u72b6\u6001\u65f6\uff0c\u5982\u679c\u8be5\u72b6\u6001\u7684 $minn$ \u503c\u5df2\u7ecf**\u5c0f\u4e8e\u7b49\u4e8e**\u73b0\u5728\u7684\u503c\uff0c\u90a3\u4e48\u5c31\u8fd4\u56de\u4e0a\u4e00\u72b6\u6001\uff08\u6ce8\u610f\u662f\u5c0f\u4e8e\u7b49\u4e8e\uff0c\u5c0f\u4e8e\u7684\u8bdd\u5c31\u4f1a\u9020\u6210\u8bb8\u591a\u4e0d\u5fc5\u8981\u7684\u8def\u5f84\uff0c\u5bfc\u81f4 $\\text{TLE}$\uff09\u3002\n\n2. \u5982\u679c\u76ee\u524d\u7684\u503c\u5df2\u7ecf**\u5927\u4e8e\u7b49\u4e8e**\u76ee\u524d\u7684\u7b54\u6848\uff0c\u5c31\u8fd4\u56de\u4e0a\u4e00\u72b6\u6001\uff08\u4f1a\u6bd4\u201c\u5927\u4e8e\u201d\u5feb $2$ $\\text{ms}$\uff09\n\n## \u4e09\u3001AC Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 50\n#define INF 2147483647\nint n,m,bx,by,bf,minn[N][N][4],ans=INF;//\u6ce8\u610f\u521d\u59cb\u503c\nchar ma[N][N];\nint dx[4]={-1,0,1,0};\nint dy[4]={0,1,0,-1};//\u8282\u7701\u7801\u91cf\nint read(){\n\tint w=0,f=1;\n\tchar c=getchar();\n\twhile (c>'9'||c<'0'){\n\t\tif (c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile (c<='9'&&c>='0'){\n\t\tw=(w<<3)+(w<<1)+(c^48);\n\t\tc=getchar();\n\t}\n\treturn w*f;\n}\nvoid dfs(int x,int y,int f,int now){\n\tif (ma[x][y]=='F'){\n\t\tans=min(ans,now);\n\t\treturn;\n\t}\n\tif (now>=minn[x][y][f]||now>=ans) return;\n\tminn[x][y][f]=now;\n\tbool pd=1;\n\tfor (int i=0;i<4;i++){\n\t\tint xx=x+dx[i],yy=y+dy[i];\n\t\tif (f==i&&ma[xx][yy]!='.'&&xx>=1&&xx<=n&&yy>=1&&yy<=m)\n\t\t\tdfs(xx,yy,f,now),pd=0;\n\t}\n\tf=(f+1)%4;\n\tfor (int i=0;i<4;i++){\n\t\tint xx=x+dx[i],yy=y+dy[i];\n\t\tif (f==i&&ma[xx][yy]!='.'&&xx>=1&&xx<=n&&yy>=1&&yy<=m)\n\t\t\tdfs(xx,yy,f,now+5),pd=0;\n\t}\n\tf=(f+6)%4;\n\tfor (int i=0;i<4;i++){\n\t\tint xx=x+dx[i],yy=y+dy[i];\n\t\tif (f==i&&ma[xx][yy]!='.'&&xx>=1&&xx<=n&&yy>=1&&yy<=m)\n\t\t\tdfs(xx,yy,f,now+1),pd=0;\n\t}\n\tif (pd){\n\t\tf=(f+3)%4;\n\t\tfor (int i=0;i<4;i++){\n\t\t\tint xx=x+dx[i],yy=y+dy[i];\n\t\t\tif (f==i&&ma[xx][yy]!='.'&&xx>=1&&xx<=n&&yy>=1&&yy<=m)\n\t\t\t\tdfs(xx,yy,f,now+10),pd=0;\n\t\t}\n\t}\n}\nint main(){\n\tmemset(minn,63,sizeof(minn));//\u6ce8\u610f\u521d\u59cb\u8981\u8d4b\u503c\u4e3a\u6781\u5927\u503c\n\tn=read(),m=read();\n\tfor (int i=1;i<=n;i++){\n\t\tscanf(\"%s\",ma[i]+1);\n\t\tfor (int j=1;j<=m;j++){\n\t\t\tif (ma[i][j]=='N') bx=i,by=j,bf=0;\n\t\t\tif (ma[i][j]=='E') bx=i,by=j,bf=1;\n\t\t\tif (ma[i][j]=='S') bx=i,by=j,bf=2;\n\t\t\tif (ma[i][j]=='W') bx=i,by=j,bf=3;\n\t\t}\n\t}\n\tdfs(bx,by,bf,0);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1613830139,
        "uid": 257621,
        "name": "\u7ffc\u5fb7\u5929\u5c0a",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    },
    {
        "content": "//\u8fd9\u4e2a\u9898\u76ee\u4e00\u770b\u4e0a\u53bb\u5c31\u77e5\u9053\u8981\u7528\u641c\u7d22\u7684\u5427\uff0c\u6df1\u641c+\u526a\u679d\u7136\u540e\u7a0d\u7a0d\u5904\u7406\u4e00\u4e0b\u6389\u5934\u548c\u8f6c\u5f2f\u6240\u82b1\u8d39\u7684\u91d1\u94b1\u5c31\u53ef\u4ee5\u4e86\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,a,b,a1,b1,tx[4]={-1,0,1,0},ty[4]={0,1,0,-1},d,dp[31][31][4],vis[31][31][4],t=1000000,h[31][31];\nchar c[31][31];\nvoid xx(int x,int y,int l,int v)\n{\n\tif(v>=dp[x][y][l]||v>=t)//\u8fd9\u662f\u5e94\u8be5\u662f\u4e2a\u6700\u4f18\u5316\u526a\u679d dp[x][y][l]\u8868\u793a\u8d70\u5230\uff08x,y\uff09\u8fd9\u4e2a\u70b9\u65b9\u5411\u4e3al\u7684\u6700\u5c0f\u503c\uff0c\n    //\u6240\u4ee5\u518d\u8d70\u5230\u8fd9\u4e2a\u70b9\u65b9\u5411\u76f8\u540c\u5982\u679c\u82b1\u7684\u94b1\u8fd8\u66f4\u591a\u7684\u8bdd\uff0c\u5c31\u53ef\u4ee5\u4e0d\u8d70\u4e86\u554a\n\treturn ;\n\tdp[x][y][l]=v;//\u66f4\u65b0\u6700\u5c0f\u82b1\u8d39\u7684\u503c\n\tif(x==a1&&y==b1)//\u627e\u5230\u7ec8\u70b9\u5566\uff01\uff01\uff01 \n\t{\n\t\tt=v;\n\t\treturn ;\n\t}\n\tint z=0;\n\tfor(int i=0;i<4;i++)//\u679a\u4e3e\u56db\u4e2a\u65b9\u5411 \n\t{\n\t\tint p=x+tx[i],q=y+ty[i];\n\t\tif(p<=n&&p>0&&q<=m&&q>0&&c[p][q]!='.'&&vis[p][q][i]==0)//\u53ef\u4ee5\u8d70\u7684\u6761\u4ef6 \n\t\t{\n\t\t\tvis[p][q][i]=1;\n\t\t\tif((i+1)%4==l)//\u8fd9\u4e2a\u5411\u5de6\u5411\u53f3\u8f6c\u81ea\u5df1\u7a0d\u5fae\u60f3\u60f3\u5c31\u77e5\u9053\u4e86 \uff0c\u4e0b\u9762\u4e5f\u4e00\u6837 \n\t\t\t{\n\t\t\t\tz++;//z\u7528\u6765\u8bb0\u5f55\u662f\u5426\u53ef\u4ee5\u4e0d\u8c03\u5934\u76f4\u63a5\u5de6\u8f6c\u53f3\u8f6c\u6216\u76f4\u8d70 \n\t\t\t\txx(p,q,i,v+1);\n\t\t\t}\n\t\t\tif((l+1)%4==i)\n\t\t\t{\n\t\t\t\tz++;\n\t\t\t\txx(p,q,i,v+5);\n\t\t\t}\n\t\t\tif(l==i)\n\t\t\t{\n\t\t\t\tz++;\n\t\t\t\txx(p,q,i,v);\n\t\t\t}\t\t\t\n\t\t\tvis[p][q][i]=0;\n\t\t}\n\t}\n\tif(z==0)//\u8fd9\u662f\u5224\u65ad\u6389\u5934\u7684\u60c5\u51b5 \n\t{\n\t\tint p=x+tx[(l+2)%4],q=y+ty[(l+2)%4];\n\t\tif(p<=n&&p>0&&q<=m&&q>0&&c[p][q]!='.'&&vis[p][q][(l+2)%4]==0)\n\t\t{\n\t\t\tvis[p][q][(l+2)%4]=1;\n\t\t\txx(p,q,(l+2)%4,v+10);\n\t\t\tvis[p][q][(l+2)%4]=0;\n\t\t}\n\t}\n}\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\t{\n\t\tcin>>c[i][j];\n\t\tif(c[i][j]>='A'&&c[i][j]<='Z'&&c[i][j]!='F')\n\t\t{\n\t\t\ta=i;\n\t\t\tb=j;\n\t\t\tif(c[i][j]=='N')\n\t\t\td=0;\n\t\t\tif(c[i][j]=='E')\n\t\t\td=1;\n\t\t\tif(c[i][j]=='S')\n\t\t\td=2;\n\t\t\tif(c[i][j]=='W')\n\t\t\td=3;\n\t\t\t//a,b\u662f\u8d77\u70b9\u5750\u6807 ,d\u662f\u6211\u8bb0\u5f55\u65b9\u5411\u7684\uff0c0-\u4e0a\uff0c1-\u53f3\uff0c2-\u4e0b\uff0c3-\u5de6\uff0c\u4e0a\u9762\u65b9\u5411\u7684\u6570\u7ec4\u4e5f\u662f\u8fd9\u4e2a\u987a\u5e8f\uff1b\n\t\t}\n\t\tif(c[i][j]=='F')\n\t\t{\n\t\t\ta1=i;\n\t\t\tb1=j;\n\t\t\t//\u7ec8\u70b9\u5450 \n\t\t}\n\t}\n\tvis[a][b][d]=1;//\u8868\u793a\u7b2ca\u884c\uff0c\u7b2cb\u884c\uff0cd\u8fd9\u4e2a\u65b9\u5411\u5df2\u7ecf\u8d70\u8fc7\u4e86 \n\tmemset(dp,127,sizeof(dp));\n\txx(a,b,d,0);//a,b\u662f\u5750\u6807\uff0cd\u662f\u65b9\u5411\uff0c 0\u662f\u82b1\u8d39\u7684money \n\tcout<<t;\n\treturn 0;\n}\n```",
        "postTime": 1526995069,
        "uid": 87452,
        "name": "\u5c0f\u71da\u72fc",
        "ccfLevel": 0,
        "title": "\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u826f\u5fc3\u9898\u89e3"
    },
    {
        "content": "\u79c1\u4ee5\u4e3a\u8fd9\u9053\u9898\u4e0d\u5e94\u8be5\u662f\u7d2b\u8272\u96be\u5ea6\u3002\n\n\u4e00\u4e2a\u8fc7\u7a0b\u7565\u4e3a\u7e41\u7410\u7684\u641c\u7d22\u518d\u52a0\u4e0a\u7b80\u5355\u7684\u526a\u679d\u5373\u53efAC\u3002\n\n\u53ef\u4ee5\u7528\u4e00\u4e2a\u4e09\u7ef4\u6570\u7ec4f[i][j][k]\u8868\u793a\u8d70\u5230i\u884cj\u5217\u4e14\u5f53\u524d\u65b9\u5411\u4e3ak\u65f6\u7684\u6700\u5c0f\u82b1\u8d39\u3002\n\n\u526a\u679d\u6761\u4ef6\uff1a\u5047\u5982\u5f53\u524d\u82b1\u8d39cost>=f[i][j][k]\uff0c\u9000\u51fa\u8fc7\u7a0b\u3002\n\u9700\u8981\u6ce8\u610f\u7684\u6709\u4e24\u70b9\uff1a\n\n1\u3001\u5224\u65ad\u5411\u5de6\u53f3\u540e\u8f6c\u65f6\u7684\u65b9\u5411\uff0c\u53ef\u4ee5\u7528vx[]\u548cvy[]\u5b58\u50a8\u4e1c\u5357\u897f\u5317\uff0c\u5411\u5de6\u53f3\u540e\u8f6c\u53ef\u4ee5\u770b\u6210\u5206\u522b\u5411\u53f3\u8f6c3\u30011\u30012\u6b21\u3002\n\n2\u3001\u540c\u4e00\u4e2a\u4f4d\u7f6e\u4e2d\u4e0d\u80fd\u8f6c\u52a8\u591a\u6b21\uff0c\u8fdb\u884c\u8f6c\u52a8\u65f6\u5e94\u76f4\u63a5\u8c03\u7528\u8f6c\u52a8\u3001\u524d\u8fdb\u4e4b\u540e\u7684\u72b6\u6001\u3002\n\u9644\u4e0a\u4ee3\u7801\uff1a\n\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint vx[4]={0,1,0,-1};\nint vy[4]={1,0,-1,0};//\u5206\u522b\u4ee3\u8868\u65b9\u5411\u4e1c\u5357\u897f\u5317\nint n,m,sx,sy,tx,ty,v,ans,f[31][31][4];\nchar c[31][31];\n\nbool ok(int x,int y)//\u5224\u65ad\u5f53\u524d\u5750\u6807\u662f\u5426\u8d8a\u754c\u3001\u662f\u5426\u901a\u8def\n{\n    if (x<1||x>n||y<1||y>m) return 0;\n    if (c[x][y]=='.') return 0;\n    return 1;\n}\n\nvoid go(int x,int y,int v,int cost)\n{\n    if (cost>=f[x][y][v]) return;//\u526a\u679d\n    f[x][y][v]=cost;\n    if (x==tx&&y==ty)//\u6ee1\u8db3\u6761\u4ef6\uff0c\u76f4\u63a5\u9000\u51fa\n        {\n            if (cost<ans) ans=cost;\n            return;\n        }\n    int xx,yy,rx,ry,bx,by,lx,ly;\n    xx=x+vx[v];yy=y+vy[v];//\u76f4\u7740\u79fb\u52a8\u4e00\u6b65\n    rx=x+vx[(v+1)%4];ry=y+vy[(v+1)%4];//\u53f3\u8f6c\u79fb\u52a8\u4e00\u6b65\n    bx=x+vx[(v+2)%4];by=y+vy[(v+2)%4];//\u540e\u8f6c\u79fb\u52a8\u4e00\u6b65\n    lx=x+vx[(v+3)%4];ly=y+vy[(v+3)%4];//\u5de6\u8f6c\u79fb\u52a8\u4e00\u6b65\n    if (ok(xx,yy)) go(xx,yy,v,cost);//\u76f4\u8d70\n    if (ok(lx,ly)) go(lx,ly,(v+3)%4,cost+1);//\u5de6\u8f6c\n    if (ok(rx,ry)) go(rx,ry,(v+1)%4,cost+5);//\u53f3\u8f6c\n    if (!ok(xx,yy)&&!ok(lx,ly)&&!ok(rx,ry)&&ok(bx,by)) go(bx,by,(v+2)%4,cost+10);\n    //\u5f53\u524d\u4e09\u79cd\u60c5\u51b5\u65e0\u8def\u53ef\u8d70\u65f6\u540e\u8f6c\n}\n\nint main()\n{\n    cin>>n>>m;\n    for (int i=1;i<=n;i++)\n        for (int j=1;j<=m;j++)\n            {\n                cin>>c[i][j];\n                if (c[i][j]!='#'&&c[i][j]!='.')\n                    {\n                        if (c[i][j]=='E') v=0;\n                        if (c[i][j]=='S') v=1;\n                        if (c[i][j]=='W') v=2;\n                        if (c[i][j]=='N') v=3;//v\u6307\u521d\u59cb\u65b9\u5411\n                        if (c[i][j]=='F') tx=i,ty=j;\n                                     else sx=i,sy=j;\n                    }\n            }\n    memset(f,0x3f,sizeof f);\n    ans=1<<20;\n    go(sx,sy,v,0);\n    cout<<ans<<endl;\n    return 0;\n}\n```",
        "postTime": 1520341954,
        "uid": 12191,
        "name": "\uff43\uff48\uff49\uff4c\uff4c",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1300 \u3010\u57ce\u5e02\u8857\u9053\u4ea4\u901a\u8d39\u7cfb\u7edf\u3011"
    }
]
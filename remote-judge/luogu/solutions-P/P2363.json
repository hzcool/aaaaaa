[
    {
        "content": "# \u4e8c\u7ef4\u77e9\u9635\u548c\n\n\u9898\u76ee\u65e0\u975e\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u79cd\u5c31\u662f\u4e00\u5757\u5730\u5728\u53f3\u4e0a\uff0c\u4e00\u5757\u5730\u5728\u5de6\u4e0b\u3002\u6216\u8005\u662f\u4e00\u79cd\u5728\u5de6\u4e0a\uff0c\u4e00\u79cd\u5728\u53f3\u4e0b\u3002\n\n# \u601d\u8def\uff1a\n\n\u7528\u66b4\u529b\u53bb\u679a\u4e3e\u76f8\u4ea4\u7684\u70b9\uff0c\u8bbe\u4e3aA\uff0c\u5728\u679a\u4e3e\u4e0a\u9762\u683c\u5b50\u7684\u9876\u70b9B\n\u679a\u4e3e\u4e0b\u9762\u683c\u5b50\u7684\u9876\u70b9C\uff0c\u518d\u53bb\u5224\u65ad\u7b26\u4e0d\u7b26\u5408\u9898\u610f\u5c31\u884c\u4e86\u3002\n\n### \uff08\u6ce8\u610f\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u90fd\u8981\u679a\u4e3e\uff09\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nvoid read(int &x) {\n    char ch; bool ok;\n    for(ok=0,ch=getchar(); !isdigit(ch); ch=getchar()) if(ch=='-') ok=1;\n    for(x=0; isdigit(ch); x=x*10+ch-'0',ch=getchar()); if(ok) x=-x;\n}//\u5feb\u8bfb\nint n;\nint ans;\nint f[2010][2010],a[2010][2010],d[11111111];\nint main()\n{\n    read(n);\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            read(a[i][j]);\n            f[i][j]=f[i-1][j]+f[i][j-1]-f[i-1][j-1]+a[i][j];\n        }\n    }\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            for(int x=1;x<=i;x++)\n            for(int y=1;y<=j;y++)\n            d[f[i][j]-f[i][y-1]-f[x-1][j]+f[x-1][y-1]]++;\n            for(int x=i+1;x<=n;x++)\n            for(int y=j+1;y<=n;y++)\n            ans=ans+d[f[x][y]-f[x][j]-f[i][y]+f[i][j]];//\u679a\u4e3e\uff0c\u7edf\u8ba1\u7b54\u6848\n            for(int x=1;x<=i;x++)\n            for(int y=1;y<=j;y++)\n            d[f[i][j]-f[i][y-1]-f[x-1][j]+f[x-1][y-1]]=0;//\u505a\u5b8c\u4e00\u79cd\u60c5\u51b5\u540e\u4e00\u5b9a\u8981\u6e05\u7a7a\u6570\u7ec4\n            for(int x=1;x<=i;x++)\n            for(int y=j+1;y<=n;y++)\n            d[f[i][y]-f[x-1][y]-f[i][j]+f[x-1][j]]++;\n            for(int x=i+1;x<=n;x++)\n            for(int y=1;y<=j;y++)\n            ans=ans+=d[f[x][j]-f[i][j]-f[x][y-1]+f[i][y-1]];//\u679a\u4e3e\uff0c\u7edf\u8ba1\u7b54\u6848\n            for(int x=1;x<=i;x++)\n            for(int y=j+1;y<=n;y++)\n            d[f[i][y]-f[x-1][y]-f[i][j]+f[x-1][j]]=0;//\u6e05\u7a7a\n            \n        }\n    }\n    printf(\"%d\",ans);//\u8f93\u51fa\u7b54\u6848\n    return 0;\n}\n```",
        "postTime": 1550474011,
        "uid": 95392,
        "name": "zengxr",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2363 \u3010\u9a6c\u519c\u3011"
    },
    {
        "content": " # \u4e00\u9053\u5f88\u68d2\u7684\u54c8\u5e0c\u6a21\u62df\u9898\u3002\n~~\u809d\u4e86\u8001\u534a\u5929\u624d\u505a\u51fa\u6765\u2026\u2026~~\n\n------------\n\n _**Step 1**_ \n \n\n**\u5ba1\u9898.**[\uff08\u9898\u76ee\u4f20\u9001\u95e8\uff09](https://www.luogu.com.cn/problem/P2363)\n\n\n**\u5927\u6982\u9898\u610f\uff1a**\n\n\u679a\u4e3e**\u76f8\u4ea4\u70b9**\uff0c\u7136\u540e\u5728**\u76f8\u4ea4\u70b9\u7684\u57fa\u7840\u4e0a\u679a\u4e3e\u4e24\u4e2a\u533a\u57df**\uff0c\u786e\u4fdd**\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u76f8\u4ea4\u70b9**\u5e76\u4e14**\u4e24\u8005\u533a\u57df\u4e4b\u548c\u76f8\u7b49**\u3002\n\n\n------------\n\n _**Step 2**_ \n\n\u6709\u4e86\u4e0a\u9762\u7684\u5206\u6790\uff0c\u6574\u7406\u51fa\u601d\u8def\u5c31\u5f88\u7b80\u5355\u5566\uff1a\n\n   \u679a\u4e3e\u5144\u5f1f\u4fe9\u9972\u517b\u9a6c\u533a\u57df\u7684**\u76f8\u4ea4\u70b9**\uff0c\u7136\u540e\u5206\u522b\u679a\u4e3e\u4ed6\u4eec\u4fe9\u9972\u517b\u9a6c\u533a\u57df**\u4e0a\u4e0b\u9876\u70b9**\u3002\n   \n   \u6ce8\u610f\uff0c\u517b\u9a6c\u9876\u70b9\u7684\u671d\u5411\u6709\u4e24\u4e2a\u65b9\u5411\uff0c**\u5de6\u4e0a--\u53f3\u4e0b**\u548c**\u53f3\u4e0a--\u5de6\u4e0b**\u3002\n   \n   \u4e0b\u9762\u662f**\u5de6\u4e0a\u2014\u2014\u53f3\u4e0b**\u7684**\u793a\u4f8b**\uff08\u7ea2\u8272\u8868\u793a\u76f8\u4ea4\u70b9\uff0c\u6a59\u8272\u548c\u7eff\u8272\u5206\u522b\u8868\u793a\u4e0a\u4e0b\u9876\u70b9\uff09\uff1a\n   \n   ![](https://cdn.luogu.com.cn/upload/image_hosting/8tfw57dg.png)\n   \n   \n\n------------\n\n_**Step 3**_\n\n   \u9898\u76ee\u8bf4\u4e24\u4eba\u7684**\u6536\u76ca\u8981\u76f8\u5f53**\uff0c\u4e5f\u5c31\u662f\u5982\u679c**\u4e0a\u9762\u683c\u5b50\u7684\u9762\u79ef**$=$**\u4e0b\u9762\u683c\u5b50\u7684\u9762\u79ef**\uff0c\u7b54\u6848\u5c31\u5c31\u52a0\u4e00\u3002\n\n   \u6a21\u62df\u5b8c\u540e\u8bb0\u5f97\u8981**\u6e05\u7a7a\u54c8\u5e0c\u8868**\uff08\u6ce8\u610f\u52a8\u6001\u6570\u7ec4\u8981\u4e00\u884c\u4e00\u884c\u6e05\uff09\u3002\n\n------------\n\n_**Step 4**_\n### AC\u4ee3\u7801\uff1a\n ```cpp\n#include<iostream>\n#include<vector>\nusing namespace std;\nstruct horse_farmer{\n    int jg,wz; \n};\nint qzh[51][51];\nvector<horse_farmer> h[1007];\nint kong_jz(int qdh,int qdl,int zdh,int zdl){//\u8d77\u70b9\u884c\uff0c\u8d77\u70b9\u5217\uff0c\u7ec8\u70b9\u884c\uff0c\u7ec8\u70b9\u5217 \n    return qzh[zdh][zdl]-qzh[zdh][qdl-1]-qzh[qdh-1][zdl]+qzh[qdh-1][qdl-1];\n}\nint clean_hx(){\n    for( int i=0;i<1007;i++) h[i].clear();\n}\nint main(){\n    int i,j,n,a,x,y,k,l,aa,z=0,ll;\n    cin>>n;\n    for(i=1;i<=n;i++){//i\u884cj\u5217 \n        for(j=1;j<=n;j++){\n            cin>>a;\n            qzh[i][j]=qzh[i-1][j]+qzh[i][j-1]+a-qzh[i-1][j-1];//\u524d\u7f00\u548c\u4f18\u5316\n        }\n    }\n    for(i=1;i<=n;i++){\n        for(j=1;j<=n;j++){\n            clean_hx();//\u6e05\u7a7a\u54c8\u5e0c\n            for(x=1;x<i;x++){\n                for(y=1;y<j;y++){\n                    a=kong_jz(x,y,i-1,j-1);//\u8d77\u70b9x,y,\u7ec8\u70b9i-1,j-1;\n                    aa=(2500000+a)%1007;\n                    l=h[aa].size();\n                    for(k=0;k<l;k++){\n                        if(h[aa][k].jg==a){\n                            h[aa][k].wz=h[aa][k].wz+1;\n                            break;\n                        }\n                    }\n                    if(k>=l){\n                        h[aa].push_back((horse_farmer){a,1});\n                    }\n                }\n            }\n            for(x=i;x<=n;x++){\n                for(y=j;y<=n;y++){\n                    a=kong_jz(i,j,x,y);\n                    aa=(2500000+a)%1007;\n                    l=h[aa].size();\n                    for(k=0;k<l;k++)\n                        if(h[aa][k].jg==a){\n                            z=z+h[aa][k].wz;\n                        }\n                }\n            }\n            clean_hx();//\u6e05\u7a7a\u54c8\u5e0c\n            for(x=1;x<i;x++){\n                for(y=j+1;y<=n;y++){\n                    a=kong_jz(x,j+1,i-1,y);\n                    aa=(2500000+a)%1007;\n                    l=h[aa].size();\n                    for(k=0;k<l;k++)\n                        if(h[aa][k].jg==a){\n                            h[aa][k].wz++;\n                            break;\n                        }\n                    if(k>=l){\n                        h[aa].push_back((horse_farmer){a,1});\n                    }\n                }\n            }\n            for(x=i;x<=n;x++){\n                for(y=1;y<=j;y++){\n                    a=kong_jz(i,y,x,j);\n                    aa=(2500000+a)%1007; \n                    l=h[aa].size();\n                    for(k=0;k<l;k++)\n                        if(h[aa][k].jg==a){\n                            z=z+h[aa][k].wz;\n                        }\n                }\n            }\n        }\n    }\n    cout<<z;\n}\n```\n\u8c22\u8c22\u5404\u4f4d\u5927\u4f6c\u7684\u8010\u5fc3\u89c2\u770b\uff01\n\n\u8c22\u8c22\u5584\u826f\u7684\u7ba1\u7406\u5458\u901a\u8fc7\u6211\u7684\u9898\u89e3\uff01",
        "postTime": 1628553603,
        "uid": 313736,
        "name": "Lemon_X",
        "ccfLevel": 3,
        "title": "\u672c\u849f\u84bb\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\uff01"
    },
    {
        "content": "## \u505a\u6cd5\n\u4e8c\u7ef4\u524d\u7f00\u548c+\u54c8\u5e0c\u8868\u3002\n\n\u9996\u5148\u53ef\u4ee5\u53d1\u73b0\u9700\u8981\u4f7f\u7528\u4e8c\u4f4d\u524d\u7f00\u548c\u6765 $O(1)$ \u6c42\u51fa\u4e00\u4e2a\u77e9\u5f62\u7684\u6536\u76ca\u3002\u7136\u540e\u7531\u4e8e\u4e24\u4e2a\u9a6c\u573a\u7684\u77e9\u5f62\u533a\u57df\u8981\u89d2\u5bf9\u89d2\uff0c\u6240\u4ee5\u53ef\u4ee5\u679a\u4e3e\u6bcf\u4e00\u4e2a\u4ea4\u70b9\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4ea4\u70b9\uff0c\u5148\u679a\u4e3e\u4f4d\u4e8e\u4ea4\u70b9\u5de6\u4e0a\u7684\u6240\u6709\u77e9\u5f62\uff0c\u628a\u6240\u6709\u7684\u6536\u76ca\u53ef\u80fd\u503c\u52a0\u5165\u54c8\u5e0c\u8868\u4e2d\u3002\u518d\u679a\u4e3e\u4f4d\u4e8e\u4ea4\u70b9\u53f3\u4e0b\u7684\u6240\u6709\u77e9\u5f62\u7684\u6536\u76ca\u53ef\u80fd\u503c\uff0c\u5224\u65ad\u662f\u5426\u5728\u54c8\u5e0c\u8868\u4e2d\uff0c\u5728\u7684\u8bdd\u7b54\u6848\u5c31\u52a0\u4e0a\u8fd9\u4e2a\u6536\u76ca\u503c\u5728\u4ea4\u70b9\u5de6\u4e0a\u6240\u5bf9\u5e94\u7684\u77e9\u5f62\u4e2a\u6570\u3002\n\n\u679a\u4e3e\u5b8c\u4f4d\u4e8e\u4ea4\u70b9\u5de6\u4e0a\u7684\u548c\u53f3\u4e0b\u7684\u77e9\u5f62\u540e\u5148**\u6e05\u7a7a\u54c8\u5e0c\u8868**\uff0c\u518d\u679a\u4e3e\u4f4d\u4e8e\u4ea4\u70b9\u53f3\u4e0a\u7684\u548c\u5de6\u4e0b\u7684\u77e9\u5f62\uff0c\u8fdb\u884c\u4e00\u904d\u76f8\u540c\u7684\u64cd\u4f5c\u3002\n\n\u7531\u4e8e ```map``` \u5e38\u6570\u592a\u9ad8\uff0c\u6240\u4ee5\u9700\u8981\u624b\u5199\u54c8\u5e0c\u8868\u3002\n\n\u6574\u4f53\u6765\u8bf4\u8fd9\u9053\u9898\u8fd8\u662f\u86ee\u6709\u96be\u5ea6\u7684\u3002\n\n## AC \u4ee3\u7801\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <vector>\n \nconst int mod=1007;\n \nusing namespace std;\n \nstruct node\n{\n    int size,sum; // sum \u8bb0\u5f55\u6709\u591a\u5c11\u4e2a size \u6536\u76ca\u7684\u77e9\u5f62 \n};\n \nint n,a[55][55],s[55][55]; // \u8349\u539f\u5730\u56fe\u3001\u524d\u7f00\u548c\u6570\u7ec4 \nvector<node> mp[mod]; // \u54c8\u5e0c\u8868 \n \nint size(int x,int y,int x2,int y2) // O(1) \u6c42\u6536\u76ca \n{\n    return s[x][y]-s[x][y2-1]-s[x2-1][y]+s[x2-1][y2-1];\n}\n \nvoid clr() // \u6e05\u7a7a\u54c8\u5e0c\u8868 \n{\n    for(int i=0;i<mod;i++)\n    {\n        mp[i].clear();\n    }\n}\n \nvoid ins(int x) // \u63d2\u5165\u4e00\u4e2a\u6536\u76ca\u503c \n{\n    int wh=(x+250000)%mod;\n    for(int i=0;i<mp[wh].size();i++)\n    {\n        if(mp[wh][i].size==x)\n        {\n            mp[wh][i].sum++;\n            return;\n        }\n    }\n    mp[wh].push_back((node){x,1});\n}\n \nint find(int x) // \u5bfb\u627e\u4e00\u4e2a\u6536\u76ca\u503c\uff0c\u8fd4\u56de\u77e9\u5f62\u4e2a\u6570 \n{\n    int wh=(x+250000)%mod;\n    for(int i=0;i<mp[wh].size();i++)\n    {\n        if(mp[wh][i].size==x)\n        {\n            return mp[wh][i].sum;\n        }\n    }\n    return 0; // \u6ca1\u627e\u5230\u8fd4\u56de 0 \n}\n \nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            scanf(\"%d\",&a[i][j]);\n            s[i][j]=s[i-1][j]+s[i][j-1]-s[i-1][j-1]+a[i][j]; // \u524d\u7f00\u548c\u9884\u5904\u7406 \n        }\n    }\n    int ans=0;\n    for(int i=1;i<=n;i++)\n    {\n        for(int j=1;j<=n;j++)\n        {\n            clr(); // \u8bb0\u5f97\u6e05\u7a7a\u54c8\u5e0c\u8868 \n            for(int k=1;k<=i;k++)\n            {\n                for(int l=1;l<=j;l++)\n                {\n                    ins(size(i,j,k,l)); // \u5de6\u4e0a\u6240\u6709\u6536\u76ca\u53ef\u80fd\u503c\u52a0\u5165\u54c8\u5e0c\u8868 \n                }\n            }\n            for(int k=i+1;k<=n;k++)\n            {\n                for(int l=j+1;l<=n;l++)\n                {\n                    ans+=find(size(k,l,i+1,j+1)); // \u66f4\u65b0\u7b54\u6848 \n                }\n            }\n            clr(); // \u8bb0\u5f97\u6e05\u7a7a\u54c8\u5e0c\u8868 \n            for(int k=1;k<=i;k++)\n            {\n                for(int l=j;l<=n;l++)\n                {\n                    ins(size(i,l,k,j)); // \u53f3\u4e0a\u6240\u6709\u6536\u76ca\u53ef\u80fd\u503c\u52a0\u5165\u54c8\u5e0c\u8868\n                }\n            }\n            for(int k=i+1;k<=n;k++)\n            {\n                for(int l=1;l<j;l++)\n                {\n                    ans+=find(size(k,j-1,i+1,l)); // \u66f4\u65b0\u7b54\u6848 \n                }\n            }\n        }\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1619692339,
        "uid": 251130,
        "name": "lovely_ckj",
        "ccfLevel": 0,
        "title": "P2363 \u9a6c\u519c \u9898\u89e3"
    },
    {
        "content": "## \u5565\u52a8\u5f52\u5440\u3002\u3002\u3002\u849f\u84bb\u53ea\u4f1a\u66b4\u529b\u3002\u3002\u3002\n//**\u8be5\u505a\u6cd5\u5b9e\u9645\u4e0a\u662f\u5bf9\u697c\u4e0b\u5927\u4f6c\u63d0\u5230\u7684O(n^10)\u7684\u4f18\u5316\u3002**\n\n\u6211\u4eec\u5148\u7406\u6e05\u4e00\u4e0bO(n^10)\u505a\u4e86\u5565\n\n\u9996\u5148\u7528\u4e24\u4e2afor\u5faa\u73af\u679a\u4e3e**\u4f4d\u4e8e\u4ea4\u70b9\u4e0a\u65b9\u7684\u5355\u4f4d\u77e9\u5f62**\u3002\n![](https://cdn.luogu.com.cn/upload/pic/50699.png)\n\n~~\u6ca1\u9519\u56fe\u7247\u4e0b\u9762\u4e3a\u6d1b\u8c37\u6c34\u5370\u7559\u767d\u4e86~~\n\n\u5982\u56fe\u6240\u793a\uff0c\u6211\u4eec\u5c31\u662f\u8981**\u679a\u4e3e\u7ea2\u8272\u7684\u77e9\u5f62**\u3002\n\n\u7136\u540e\u6211\u4eec\u518d\u679a\u4e3e\u6bcf\u4e2a\u77e9\u5f62\u6700\u4e0a\u65b9\u7684\u77e9\u5f62\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\n![](https://cdn.luogu.com.cn/upload/pic/50700.png)\n\n\u8fd9\u6837\u505a\u4f3c\u4e4e\u53ef\u80fd\u91cd\u590d\u8ba1\u6570\uff0c\u4f46\u5176\u5b9e\u662f**\u4e0d\u91cd\u4e0d\u6f0f**\u7684\uff0c\u8bfb\u8005\u53ef\u4ee5\u81ea\u5df1\u6bd4\u5212\u4e00\u4e0b\u3002\n\n\u679a\u4e3e\u6bcf\u4e2a\u77e9\u5f62\u662fO(n^2),\u6211\u4eec\u679a\u4e3e\u4e863\u6b21\uff1b\u7136\u540e\u6211\u4eec\u5bf9\u4e24\u4e2a\u7070\u8272\u77e9\u5f62\u505a\u4e00\u4e0b\u6c42\u548c\uff0c\u6bcf\u4e2a\u77e9\u5f62\u662fO(n^2)\uff1b**2\\*3+2\\*2=10**\uff0c\u975e\u5e38\u5b8c\u7f8e\u3002\n\n\u597d\u4e86\uff0c\u6211\u4eec\u5df2\u7ecf\u5f97\u5230\u4e86\u4e00\u4e2a\u975e\u5e38\u4f18(bao)\u96c5(li)\u7684\u505a\u6cd5\uff0c\u63a5\u4e0b\u6765\u60f3\u4f18\u5316\u3002\n\n\u7b2c\u4e00\u4e2a\u4f18\u5316\u975e\u5e38\u5bb9\u6613\u60f3\u5230\uff1a\u505a\u4e8c\u7ef4\u524d\u7f00\u548c\uff0c\u6765O(1)\u6c42\u51fa\u7070\u8272\u77e9\u5f62\u7684\u503c\u3002\u55ef\uff0c\u8fd9\u4e0d\u662f\u91cd\u70b9...\u6211\u76f8\u4fe1\u5927\u5bb6\u90fd\u4f1a\u5566\uff01~~\uff08\u61d2\uff09~~\n\n\u7b2c\u4e8c\u4e2a\u4f18\u5316\uff1a\u6211\u4eec\u53d1\u73b0\uff0c**\u679a\u4e3e\u4e2d\u95f4\u7684\u77e9\u5f62(O(n^2))\u4f3c\u4e4e\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684**\uff0c\u7136\u800c\u5982\u679c\u6211\u4eec\u7528**\u5d4c\u5957**\u7684for\u679a\u4e3e\u4e24\u4e2a\u7070\u8272\u77e9\u5f62\uff0c\u5c31\u4f1a\u52a0\u4e0aO(n^4)\uff0c\uff0c50 ^ 6 = 15625000000,**\u8fd9\u590d\u6742\u5ea6\u518d\u600e\u4e48\u4f18\u5316\u4e5f\u6ca1\u7528\u4e86**\u3002\u3002\n\n\u6240\u4ee5\u80af\u5b9a\u7684\uff0c**\u6211\u4eec\u8981\u628a\u5d4c\u5957\u76844\u4e2afor\u5faa\u73af\u62c6\u51fa\u6765**\uff01\n\n\u4f7f\u7528\u81ea\u5df1\u7684**hash\u8868\u6216\u8005\u662fstd\u7684map**\uff0c\u4ee4val[x]\u8868\u793a\u548c\u4e3ax\u7684\u77e9\u5f62\u5728\u4e0a\u65b9\u6240\u6709\u77e9\u5f62\u4e2d\u6709\u51e0\u4e2a\uff0c\u5f53\u6211\u4eec\u679a\u4e3e\u5230\u4e0b\u65b9\u67d0\u4e00\u77e9\u5f62\u503c\u4e3asum\u65f6\uff0c\u76f4\u63a5\u628aans += val[sum]\uff0c\u5373**\u4e0a\u65b9\u6709\u51e0\u4e2a\u77e9\u5f62\u80fd\u548c\u5b83\u5bf9\u5e94**\u3002\u8fd9\u6837\u5c31\u505a\u597d\u4e86\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2aO(n^4)\u7684\u505a\u6cd5\uff0c\u8dd1\u8fc7n=50\u8fd8\u662f\u6ca1\u95ee\u9898\u7684\u3002\n\n\u975e\u5e38\u7b80\u5355\u6613\u60f3\u662f\u4e0d\u662f\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n\n#include <algorithm>\n\nnamespace my {//\u4e3b\u8981\u662f\u5b9e\u73b0hash\u8868\n    const int maxele(2523), maxhash(999667);\n    class item {\n        public:\n            item() : next(0) {}\n            \n            int key, val;//val\u4e3a\u51fa\u73b0\u6b21\u6570\n            item *next;\n    }all[maxele];\n    item *end(all);\n    int hash(int v) {\n        return (((long long)(v) * 19391) % maxhash + maxhash) % maxhash; //hash\u51fd\u6570\uff0c\u968f\u4fbf\u5199\u5c31\u597d\n    }\n    class map {\n        public:\n            map() : nextvis(1) {}\n            void clear() {\n                ++nextvis;\n                end = all;\n            }\n            int insert(int val) {\n                int hashval(hash(val));\n                if (bVal[hashval] != nextvis) {\n                    bVal[hashval] = nextvis;\n                    end->key = val;\n                    end->val = 1;\n                    end->next = 0;\n                    head[hashval] = end++;\n                } else {\n                    item *now(head[hashval]), *front;\n                    while (now) {\n                        if (now->key == val) {\n                            ++now->val;\n                            return now->val;\n                        }\n                        front = now;\n                        now = now->next;\n                    }\n                    end->key = val;\n                    end->val = 1;\n                    end->next = 0;\n                    front->next = end++;\n                }\n                return 1;\n            }\n            int count(int val) {\n                int hashval(hash(val));\n                if (bVal[hashval] != nextvis) return 0;\n                else {\n                    item *now(head[hashval]);\n                    while (now) {\n                        if (now->key == val) return now->val;\n                        now = now->next;\n                    }\n                }\n                return 0;\n            }\n            item *head[maxhash];\n            int bVal[maxhash], nextvis;\n    }map;\n}\nint n, rect[51][51], forward[51][51];\nint count(int l, int t, int r, int b) {\n    if (l > r) l ^= r ^= l ^= r;\n    if (t > b) t ^= b ^= t ^= b;\n    return forward[b][r] - forward[b][l - 1] - forward[t - 1][r] + forward[t - 1][l - 1];\n}//\u5229\u7528\u4e8c\u7ef4\u524d\u7f00\u548c\u6c42\u77e9\u5f62\u548c\nlong long ans(0);\nint main() {\n    scanf(\"%d\", &n);\n    for (int i(1); i <= n; ++i) {\n        for (int j(1); j <= n; ++j) {\n            scanf(\"%d\", &rect[i][j]);\n        }\n    }\n    for (int i(1); i <= n; ++i) {\n        for (int j(1); j <= n; ++j) {\n            forward[i][j] = forward[i - 1][j] + forward[i][j - 1] - forward[i - 1][j - 1] + rect[i][j];\n        }\n    }\n    for (int i(1); i <= n; ++i) {\n        for (int j(1); j <= n; ++j) {\n            my::map.clear();\n            for (int t(1); t <= i; ++t) {\n                for (int l(1); l <= j; ++l) {\n                    my::map.insert(count(l, t, j, i));\n                }\n            }//\u679a\u4e3e\u5de6\u4e0a\u65b9\u77e9\u5f62\n            for (int b(i + 1); b <= n; ++b) {\n                for (int r(j + 1); r <= n; ++r) {\n                    ans += my::map.count(count(j + 1, i + 1, r, b));\n                }\n            }//\u679a\u4e3e\u53f3\u4e0b\u65b9\u77e9\u5f62\n            my::map.clear();\n            for (int t(1); t <= i; ++t) {\n                for (int r(j); r <= n; ++r) {\n                    my::map.insert(count(j, t, r, i));\n                }\n            }//\u679a\u4e3e\u53f3\u4e0a\u65b9\u77e9\u5f62\n            for (int b(i + 1); b <= n; ++b) {\n                for (int l(1); l <= j - 1; ++l) {\n                    ans += my::map.count(count(l, i + 1, j - 1, b));\n                }\n            }//\u679a\u4e3e\u5de6\u4e0b\u65b9\u77e9\u5f62\n        }\n    }\n    printf(\"%lld\\n\", ans);\n    return 0;\n}\n```",
        "postTime": 1548991788,
        "uid": 163894,
        "name": "kyel",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2363 \u3010\u9a6c\u519c\u3011"
    },
    {
        "content": "$O(n^6)$ \u505a\u6cd5\u597d\u60f3\uff0c\u679a\u4e3e\u7b2c\u4e00\u4e2a\u77e9\u9635\u7684\u5de6\u4e0a\u3001\u4e24\u4e2a\u77e9\u9635\u4ea4\u70b9\u3001\u7b2c\u4e8c\u4e2a\u77e9\u9635\u7684\u53f3\u4e0b\u5373\u53ef\uff0c\u4e8c\u7ef4\u524d\u7f00\u548c\u4f18\u5316\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\uff0c\u6bcf\u6b21\u7b97\u7684\u603b\u548c\u5c45\u7136\u662f\u91cd\u590d\u7684\uff01\u6240\u4ee5\uff0c\u5148\u63d0\u524d\u628a\u603b\u548c\u7b97\u51fa\u6765\u518d\u7edf\u8ba1\u5373\u53ef $O(n^4)$ \u89e3\u51b3\u3002\n\n\u4e8b\u5b9e\u4e0a\uff0c\u5de6\u4e0a\u548c\u53f3\u4e0b\u4e0e\u53f3\u4e0b\u548c\u5de6\u4e0a\u662f\u7b49\u6548\u7684\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u628a\u5176\u4e2d\u4e00\u4e2a\u5199\u51fa\u6765\uff0c\u4e0d\u7136\u7b54\u6848\u4f1a\u662f\u6b63\u786e\u7684\u4e24\u500d\u3002\n\n\u7136\u800c\u5982\u679c\u7edf\u8ba1\u548c\u662f\u8d1f\u6570\uff0c\u4f1a\u559c\u63d0 RE \u3002\u6240\u4ee5\u9700\u8981\u52a0\u4e0a\u4e00\u4e2a\u5927\u6570\u518d\u7edf\u8ba1\u3002$50^2\\times1000=2500000$\uff0c\u52a0\u8fd9\u4e2a\u5373\u53ef\u3002\n\n```cpp\n#pragma GCC optimize(\"Ofast\") // \u5728\u672c\u5730\u8dd1\u5f00\uff0c\u5728\u6d1b\u8c37\u4e0a\u5f00\u4f1aCE\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 55, M = 6e6 + 5, VMAX = 2500000;\nint a[N][N], sum[N][N], cnt[M], n, ans;\nint getsum(int x1, int y1, int x2, int y2) {\n\treturn sum[x1][y1] - sum[x1][y2 - 1] - sum[x2 - 1][y1] + sum[x2 - 1][y2 - 1];\n}\ninline void read(int &a) {\n\tregister int t = 1;\n\tregister char ch = getchar();\n\ta = 0;\n\twhile (ch < '0' || ch > '9')  {\n\t\tif (ch == '-') t = -1;\n\t\tch = getchar();\n\t}\n\twhile (ch <= '9' && ch >= '0')\n\t\ta = a * 10 + ch - '0', ch = getchar();\n\ta *= t;\n}\nint main() {\n\tfreopen(\"farmer.in\", \"r\", stdin);\n\tfreopen(\"farmer.out\", \"w\", stdout);\n\tread(n);\n\tfor (int i = 1; i <= n; i ++)\n\t\tfor (int j = 1; j <= n; j ++)\n\t\t\tread(a[i][j]), sum[i][j] = sum[i - 1][j] + sum[i][j - 1] - sum[i - 1][j - 1] + a[i][j];\n\tfor (int i = 1; i <= n; i ++)\n\t\tfor (int j = 1; j <= n; j ++) {\n\t\t\tfor (int k = 1; k <= i; k ++)\n\t\t\t\tfor (int l = 1; l <= j; l ++)\n\t\t\t\t\tcnt[getsum(i, j, k, l) + VMAX] ++;\n\t\t\tfor (int k = i + 1; k <= n; k ++)\n\t\t\t\tfor (int l = j + 1; l <= n; l ++)\n\t\t\t\t\tans += cnt[getsum(k, l, i + 1, j + 1) + VMAX];\n\t\t\tfor (int k = 1; k <= i; k ++)\n\t\t\t\tfor (int l = 1; l <= j; l ++)\n\t\t\t\t\tcnt[getsum(i, j, k, l) + VMAX] =  0;\n\t\t\tfor (int k = 1; k <= i; k ++)\n\t\t\t\tfor (int l = j + 1; l <= n; l ++)\n\t\t\t\t\tcnt[getsum(i, l, k, j + 1) + VMAX] ++;\n\t\t\tfor (int k = i + 1; k <= n; k ++)\n\t\t\t\tfor (int l = 1; l <= j; l ++)\n\t\t\t\t\tans += cnt[getsum(k, j, i + 1, l) + VMAX];\n\t\t\tfor (int k = 1; k <= i; k ++)\n\t\t\t\tfor (int l = j + 1; l <= n; l ++)\n\t\t\t\t\tcnt[getsum(i, l, k, j + 1) + VMAX] = 0;\n\t\t}\n\tcout << ans << '\\n';\n\treturn 0;\n}\n```",
        "postTime": 1657264513,
        "uid": 560516,
        "name": "\u55b5\u4ed4\u725b\u5976",
        "ccfLevel": 0,
        "title": "P2363 \u9a6c\u519c\u9898\u89e3"
    },
    {
        "content": "## \u4e8c\u7ef4\u524d\u7f00\u548c\u677f\u5b50\n\n\u9996\u5148\u6211\u4eec\u6839\u636e\u9898\u610f\u6765\u5224\u65ad\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5148\u4f7f\u7528 $O(n^2)$ \u7684\u65f6\u95f4\u53bb\u679a\u4e3e\u4e24\u4e2a\u77e9\u9635\u7684\u4ea4\u70b9 $(i,j)$\uff0c\u7136\u540e\u4f7f\u7528 $O(2 n^2)$ \u7684\u65f6\u95f4\u5206\u522b\u53bb\u679a\u4e3e\u4e24\u4e2a\u77e9\u9635\u7684\u7ec8\u70b9\uff08\u8d77\u70b9\u5c31\u662f\u521a\u521a\u679a\u4e3e\u7684\u4ea4\u70b9\uff09\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(2n^4)$\uff0c\u5bf9\u4e8e\u9898\u76ee\u4e2d\u7684\u6570\u636e\u8303\u56f4\u662f\u53ef\u4ee5\u5b9e\u73b0\u7684\u3002\n\n\u7136\u540e\u6211\u4eec\u6765\u5904\u7406\u524d\u7f00\u548c\uff0c\u5148\u6765\u5236\u4f5c\u4e00\u4e2a\u4e8c\u7ef4\u524d\u7f00\u548c\uff0c\u539f\u7406\u5982\u4e0b\u56fe\u6240\u793a\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wkeaxni5.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5982\u679c\u6211\u4eec\u73b0\u5728\u60f3\u8981\u6c42\u51fa\u7ea2\u8272\u77e9\u9635\u6570\u5b57\u7684\u603b\u548c\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5c06\u5927\u77e9\u9635\u51cf\u53bb\u4e24\u4e2a\u7eff\u8272\u77e9\u9635\u3002\u5176\u4e2d\u6211\u4eec\u53d1\u73b0\u84dd\u8272\u77e9\u9635\u88ab\u7eff\u8272\u77e9\u9635\u8986\u76d6\u4e86\u4e24\u6b21\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u628a\u8fd9\u4e2a\u77e9\u9635\u7ed9\u8865\u56de\u6765\uff0c\u56e0\u6b64\u6211\u4eec\u5f97\u5230\u524d\u7f00\u548c\u7684\u5f0f\u5b50\u4e3a\uff1a$sum_{i,j}=sum_{i-1,j}+sum_{i,j-1}-sum_{i-1,j-1}+a_{i,j}$\uff0c\u5f53\u7136\u5982\u679c\u6211\u4eec\u60f3\u8981\u67e5\u8be2\u8d77\u70b9\u662f $(x,y)$ \u7ec8\u70b9\u662f $(i,j)$ \u7684\u77e9\u9635\uff0c\u6211\u4eec\u540c\u7406\u53ef\u4ee5\u7528 $sum_{i,j}-sum_{i,y-1}-sum_{x-1,j}+sum_{x-1,y-1}$ \u6765\u8868\u793a\u5b83\u4eec\u7684\u548c\uff0c\u7136\u540e\u8003\u8651\u5230\u9898\u76ee\u4e2d\u7684\u7b54\u6848\u53ef\u80fd\u4f1a\u6709\u8d1f\u6570\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u54c8\u5e0c\u6620\u5c04\u6765\u5904\u7406\u7ed3\u679c\uff0c\u5176\u4e2d\u54c8\u5e0c\u5728\u6bcf\u6b21\u64cd\u4f5c\u4e4b\u540e\u9700\u8981\u6e05\u7a7a\uff0c\u5426\u5219\u4f1a\u6709\u60c5\u51b5\u91cd\u590d\u8ba1\u7b97\u3002\u5728\u6b64\u4e4b\u540e\u6211\u4eec\u53ea\u9700\u8981\u5728\u679a\u4e3e\u4ea4\u70b9\u7684\u57fa\u7840\u4e0a\uff0c\u518d\u6b21\u8ba1\u7b97\u51fa $(x1,y1)$ \u5230 $(i,j)$ \u7684\u77e9\u9635\u548c\u4ee5\u53ca $(x2,y2)$ \u5230 $(i,j)$ \u7684\u77e9\u9635\u548c\uff0c\u8fdb\u884c\u6bd4\u8f83\u539a\u5982\u679c\u7ed3\u679c\u76f8\u540c\uff0c\u5373\u53ef\u884c\u65b9\u6848\u6570\u589e\u52a0\uff0c\u5426\u5219\u8df3\u8fc7\u3002\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define F(i,j,n) for(int i=j;i<=n;i++)\nusing namespace std;\nll n,ans;\nll a[55][55],sum[55][55];\nmap<ll,ll> mp;\nint main(){\n\tcin>>n; \n\tF(i,1,n) F(j,1,n){\n\t\tcin>>a[i][j];\n\t\tsum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+a[i][j];//\u524d\u7f00\u548c\u9884\u5904\u7406\n\t} \n\tF(i,1,n){\n\t\tF(j,1,n){\n\t\t\tF(x,1,i) F(y,1,j) mp[sum[i][j]-sum[i][y-1]-sum[x-1][j]+sum[x-1][y-1]]++;//\u67e5\u8be2\u7b2c\u4e00\u4e2a\u77e9\u9635\u7684\u53ef\u80fd\u60c5\u51b5\u548c\uff08\u5de6\u4e0a\u89d2\uff09\n\t\t\tF(x,i+1,n) F(y,j+1,n) ans+=mp[sum[x][y]-sum[x][j]-sum[i][y]+sum[i][j]];//\u67e5\u8be2\u7b2c\u4e8c\u4e2a\u77e9\u9635\u7684\u53ef\u80fd\u60c5\u51b5\u548c\u5e76\u52a0\u4e0a\u5176\u4e2d\u7684\u7b54\u6848\uff08\u53f3\u4e0b\u89d2\uff09\n\t\t\tmp.clear();//\u6e05\u7a7a\u54c8\u5e0c\n\t\t\tF(x,1,i) F(y,j+1,n) mp[sum[i][y]-sum[x-1][y]-sum[i][j]+sum[x-1][j]]++;//\u67e5\u8be2\u7b2c\u4e00\u4e2a\u77e9\u9635\u7684\u53ef\u80fd\u60c5\u51b5\u548c\uff08\u5de6\u4e0b\u89d2\uff09\n\t\t\tF(x,i+1,n) F(y,1,j) ans+=mp[sum[x][j]-sum[i][j]-sum[x][y-1]+sum[i][y-1]];//\u67e5\u8be2\u7b2c\u4e8c\u4e2a\u77e9\u9635\u7684\u53ef\u80fd\u60c5\u51b5\u548c\u5e76\u52a0\u4e0a\u5176\u4e2d\u7684\u7b54\u6848\uff08\u53f3\u4e0a\u89d2\uff09\n\t\t\tmp.clear();//\u6e05\u7a7a\u54c8\u5e0c\n\t\t}\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n```\n\n## End\n\n[![](https://cdn.luogu.com.cn/upload/usericon/781159.png)](https://www.luogu.com.cn/user/781159)\n",
        "postTime": 1679190628,
        "uid": 654958,
        "name": "Light_az",
        "ccfLevel": 0,
        "title": "P2363\u9898\u89e3"
    },
    {
        "content": "### \u505a\u6cd5\u601d\u8def\uff1a\n1.\u5148\u628a\u6240\u6709\u5b50\u77e9\u9635\u9884\u5904\u7406\u51fa\u6765\uff0c\u5c06\u5b83\u4eec\u7684\u548c\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\n\n2.\u53ea\u6709\u503c\u76f8\u540c\u7684\u5b50\u77e9\u9635\u624d\u4f1a\u5bf9\u7b54\u6848\u6709\u8d21\u732e\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u4e8c\u5206\u5feb\u901f\u627e\u51fa\u5bf9\u7b54\u6848\u6709\u8d21\u732e\u7684\u533a\u95f4\uff0c\u518d\u8003\u8651\u8ba1\u7b97\u533a\u95f4\u5185\u7684\u7b54\u6848\u3002\n\n3.\u5982\u4f55\u8ba1\u7b97\u533a\u95f4\u5185\u7684\u7b54\u6848\u5462\uff1f\n\n\u6700\u50bb\u7684\u65b9\u6cd5\uff1a\u662f\u66b4\u529b\u679a\u4e3e\u4e00\u5bf9\u5b50\u77e9\u9635\uff0c\u5224\u65ad\u4ed6\u4eec\u662f\u5426\u5c5e\u4e8e\u5bf9\u9876\u77e9\u9635~~\uff08\u4e71\u53d6\u7684\u540d\uff09~~\u3002\u7531\u4e8e\u533a\u95f4\u5185\u7684\u5143\u7d20\u53ef\u80fd\u4f1a\u5f88\u591a\uff0c\u6240\u4ee5\u8fd9\u6837\u4f1a\u8d85\u65f6\uff08\u4e0d\u8fc7\u8fd9\u6837\u53ef\u4ee5\u5f9780\uff09\n\n\u6211\u7684\u60f3\u6cd5\uff1a\u6211\u4eec\u53ef\u4ee5\u626b\u4e00\u904d\u533a\u95f4\uff0c\u5206\u522b\u8bb0\u5f55\u4e00\u4e2a\u5750\u6807\uff08x,y\uff09\u88ab\u591a\u5c11\u4e2a\u5b50\u77e9\u9635\u5f53\u505a\u5de6\u4e0a\u89d2\u3001\u53f3\u4e0a\u89d2\u3001\u5de6\u4e0b\u89d2\u3001\u53f3\u4e0b\u89d2\u3002\u8bb0\u5f55\u5b8c\u4e4b\u540e\uff0c\u660e\u663e\u518d\u626b\u4e00\u904d\u51fa\u73b0\u8fc7\u7684\u5750\u6807\uff0c\u8ba1\u7b97\u5c31\u53ef\u4ee5\u5f97\u51fa\u7b54\u6848\u4e86\u3002**\u4e3e\u4e2a\u4f8b\u5b50\uff1a**\u5982\u679c\u6709co\u4e2a\u5b50\u77e9\u9635\u4ee5\uff08x,y\uff09\u5f53\u505a\u5de6\u4e0a\u89d2\uff0c\u90a3\u8fd9\u4e2a\u70b9\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662fco*co1\u3002\uff08co1\u4e3a\u4ee5\uff08x-1,y-1\uff09\u5f53\u505a\u53f3\u4e0b\u89d2\u7684\u5b50\u77e9\u9635\u4e2a\u6570\uff09\u3002\n\n\u66f4\u4f18\u7684\u5904\u7406\u65b9\u6cd5\uff1f\uff08~~\u592a\u83dc\uff0c\u60f3\u4e0d\u5230~~\uff09\n### \u6570\u7ec4\u4f5c\u7528\uff1a\n\n**sum**\uff1a\u4e8c\u7ef4\u524d\u7f00\u548c\uff0c\u5feb\u901f\u7b97\u77e9\u9635\u5185\u7684\u5143\u7d20\u548c\u3002\n\n**co**:\u4ee5\uff08x,y\uff09\u4e3a\u5de6\u4e0a\u89d2\u7684\u5b50\u77e9\u9635\u4e2a\u6570\u3002\n\u540c\u7406**co1**\u8bb0\u5f55\u53f3\u4e0b\u89d2\u3002\n\n**to**\u5de6\u4e0b\u89d2\uff0c**to1**\u53f3\u4e0a\u89d2\u3002\n\n**p**\u8bb0\u5f55\u4e0d\u540c\u7684\u5de6\u4e0a\u89d2\u5750\u6807\u3002**q**\u8bb0\u5f55\u4e0d\u540c\u7684\u5de6\u4e0b\u89d2\u5750\u6807\u3002\n\n**lp**\u4e3a**p**\u7684\u957f\u5ea6\u3002    **lq**\u4e3a**q**\u7684\u957f\u5ea6\u3002\n\n\u8fd8\u6709\uff0c**f**\u6570\u7ec4\u662f\u50a8\u5b58\u6bcf\u4e2a\u5b50\u77e9\u9635\u7684\u4fe1\u606f\u7684\u3002\n\n\n### ~~\u5e9f\u8bdd\u4e0d\u591a\u8bf4~~\u4e0a\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nconst int maxn=55;\nconst int maxm=1650000;\nint sum[maxn][maxn],tot=0;\nint co[maxn][maxn],co1[maxn][maxn],p[maxn*maxn],lp=0;\nint to[maxn][maxn],to1[maxn][maxn],q[maxn*maxn],lq=0;\nstruct node{\n    int data,x1,y1,x2,y2;   //(x1,y1)\u5de6\u4e0b\u89d2,(x2,y2)\u53f3\u4e0b\u89d2\n}f[maxm];\nbool cmp(node x,node y){return x.data<y.data;}//\u6309\u77e9\u9635\u548c\u5927\u5c0f\u6392\u5e8f\nint ef(int x,int l,int r)\n{\n    int mid;\n    while(l<r)\n    {\n      mid=(l+r)/2;\n      if(f[mid].data<x)l=mid+1;\n      else r=mid;\n    }\n    return l;\n}\nint ef1(int x,int l,int r)\n{\n    int mid;\n    while(l<r)\n    {\n      mid=(l+r+1)/2;\n      if(f[mid].data<=x)l=mid;\n      else r=mid-1;\n    }\n    return l;\n}\nint main()\n{\n    int n,i,j,k,l;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n      for(int j=1;j<=n;j++)\n      {\n        scanf(\"%d\",&sum[i][j]);\n        sum[i][j]+=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1];\n      }\n    for(i=1;i<=n;i++)\n      for(j=1;j<=n;j++)\n        for(k=i;k<=n;k++)\n          for(l=j;l<=n;l++)\n          {\n            f[++tot].data=sum[k][l]-sum[i-1][l]-sum[k][j-1]+sum[i-1][j-1];\n            f[tot].x1=i;  f[tot].y1=j;  f[tot].x2=k;  f[tot].y2=l;\n          }\n    sort(f+1,f+tot+1,cmp);//\u6392\u5e8f\n\n    int ans=0;\n    for(i=1;i<=tot;)\n    {\n      int l=ef(f[i].data,i,tot),r=ef1(f[i].data,i,tot);//\u7b97\u533a\u95f4\u4f4d\u7f6e\n      lp=lq=0;    //\u521d\u59cb\u5316\n      for(j=l;j<=r;j++)\t\t//\u7b97\u533a\u95f4\u5185\u7684\u4fe1\u606f\n      {\n\t    int x1=f[j].x1,y1=f[j].y1,x2=f[j].x2,y2=f[j].y2;\n\t    if(co[x1][y1]==0)p[++lp]=j;\n\t    co[x1][y1]++;  co1[x2][y2]++;\n\t    if(to[x2][y1]==0)q[++lq]=j;\n\t    to[x2][y1]++;  to1[x1][y2]++;\n\t  }\n\t  for(j=1;j<=lp;j++)\t//\u7b97\u8d21\u732e\n\t  {\n\t  \tint x1=f[p[j]].x1,y1=f[p[j]].y1;\n\t    ans+=co[x1][y1]*co1[x1-1][y1-1];\n\t  }\n\t  for(j=1;j<=lq;j++)\n\t  {\n\t  \tint x2=f[q[j]].x2,y1=f[q[j]].y1;\n\t    ans+=to[x2][y1]*to1[x2+1][y1-1];\n\t  }\n\t  for(j=l;j<=r;j++)\t\t//\u8fd8\u539f\n      {\n\t    int x1=f[j].x1,y1=f[j].y1,x2=f[j].x2,y2=f[j].y2;\n\t    co[x1][y1]--;  co1[x2][y2]--;\n\t    to[x2][y1]--;  to1[x1][y2]--;\n\t  }\n      i=r+1;\t\t\t\t//\u7b97\u4e0b\u4e2a\u503c\u76f8\u540c\u7684\u77e9\u9635\u533a\u95f4\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n\n\u6700\u540e\u518d\u52a0\u4e0a\u6211\u7684\u4e00\u5f00\u59cb\u768480\u5206\u7684\u5904\u7406\u65b9\u6cd5\uff08\u8840\u6dcb\u6dcb\u7684\u63d0\u4ea4\u8bb0\u5f55\uff09\uff1a\n\n```cpp\nfor(i=1;i<=tot;)\n    {\n      int l=ef(f[i].data,i,tot),r=ef1(f[i].data,i,tot);\n      for(j=l;j<=r;j++)\n        for(k=j+1;k<=r;k++)\n        {\n          int x1=f[j].x1,y1=f[j].y1,x2=f[j].x2,y2=f[j].y2;\n          int x3=f[k].x1,y3=f[k].y1,x4=f[k].x2,y4=f[k].y2;\n          if(x1==x4+1&&y1==y4+1)ans++;\n          if(x1==x4+1&&y2==y3-1)ans++;\n          if(x2==x3-1&&y1==y4+1)ans++;\n          if(x2==x3-1&&y2==y3-1)ans++;\n        }\n      i=r+1;\n    }\n```\n**\u6ce8\uff1a**\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u65f6\u8017\u4e3b\u8981\u662f\u5728\u6392\u5e8f\u4e0a\u9762\u7684\u3002\u3002\u3002\uff0cO\uff08NlogN\uff09N\u4e3a\u4e0d\u540c\u5b50\u77e9\u9635\u7684\u4e2a\u6570\n\n\u7ecf\u8ba1\u7b97N\u6700\u5927\u4e3a1625625.\n\n\u5b8c\u7ed3\u3002\u3002\u3002\uff08~~\u4ee3\u7801\u53c8\u957f\u8dd1\u7684\u53c8\u6162\uff0c\u8fdeSTL\u4e8c\u5206\u90fd\u4e0d\u4f1a\u5199\uff0c\u592a\u5f31\u4e86~~\uff09",
        "postTime": 1540987623,
        "uid": 48573,
        "name": "lsroi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2363 \u3010\u9a6c\u519c\u3011"
    },
    {
        "content": "## \u601d\u8def\n\n\u4e2a\u4eba\u8ba4\u4e3a\u953b\u70bc\u4ee3\u7801\u80fd\u529b\u4e0e\u7ec3\u4e60\u524d\u7f00\u548c\u8f83\u597d\u7684\u4e00\u9053\u9898\u3002\n\n\u8fd9\u9898\u8981\u6c42\u4f7f\u7684\u4e24\u4e2a\u5b50\u77e9\u9635\u7684\u603b\u4ef7\u503c\u76f8\u7b49\uff0c\u4e14\u4e24\u4e2a\u5b50\u77e9\u9635\u53ea\u6709\u4e00\u4e2a\u4ea4\u70b9\uff0c\u6240\u4ee5\u81ea\u7136\u60f3\u5230\u7528\u4e00\u4e2a\u4e8c\u7ef4\u524d\u7f00\u548c\u6765\u6c42\u51fa\u6bcf\u4e00\u4e2a\u5b50\u77e9\u9635\u7684\u4ef7\u503c\uff0c\u7136\u540e\u904d\u5386\u6574\u4e2a\u5927\u77e9\u9635\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u70b9\u5904\u7406\u5b83\u7684\u5de6\u4e0a\u53f3\u4e0b\u4e0e\u5de6\u4e0b\u53f3\u4e0a\u4e24\u4e2a\u5b50\u77e9\u9635\uff0c\u627e\u5230\u53ef\u884c\u7684\u4ea4\u70b9\uff0c\u6bcf\u627e\u5230\u4e00\u4e2a\u5c31\u628a\u7b54\u6848\u52a0\u4e00\u5373\u53ef\u3002\n\n\u6ce8\u610f\u5b50\u77e9\u9635\u7684\u4ef7\u503c\u53ef\u80fd\u662f\u4e00\u4e2a\u8d1f\u6570\uff0c\u6240\u4ee5\u8981\u52a0\u4e0a\u4e00\u4e2a\u8f83\u5927\u7684\u6570\u6765\u907f\u514d\u51fa\u73b0\u8d1f\u4e0b\u6807\u3002\n\n## Code\n\n\n```cpp\n#include<bits/stdc++.h>\n#define f 500000\nusing namespace std;\n\nint n;\nint a[1001][1001];\nint s[1000][1000];\nint sum[1000][1000];\nint t[5000000];\nint ans=0;\n\nsigned main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tcin>>s[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tsum[i][j]=sum[i][j-1]+sum[i-1][j]+s[i][j]-sum[i-1][j-1];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tfor(int k=1;k<=i;k++){\n\t\t\t\tfor(int l=1;l<=j;l++){\n\t\t\t\t\tt[sum[i][j]-sum[i][l-1]-sum[k-1][j]+sum[k-1][l-1]+f]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k=i+1;k<=n;k++){\n\t\t\t\tfor(int l=j+1;l<=n;l++){\n\t\t\t\t\tans+=(t[sum[k][l]-sum[k][j]-sum[i][l]+sum[i][j]+f]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k=1;k<=i;k++){\n\t\t\t\tfor(int l=1;l<=j;l++){\n\t\t\t\t\tt[sum[i][j]-sum[i][l-1]-sum[k-1][j]+sum[k-1][l-1]+f]=0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k=1;k<=i;k++){\n\t\t\t\tfor(int l=j+1;l<=n;l++){\n\t\t\t\t\tt[sum[i][l]-sum[k-1][l]-sum[i][j]+sum[k-1][j]+f]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k=i+1;k<=n;k++){\n\t\t\t\tfor(int l=1;l<=j;l++){\n\t\t\t\t\tans+=t[sum[k][j]-sum[i][j]-sum[k][l-1]+sum[i][l-1]+f];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int k=1;k<=i;k++){\n\t\t\t\tfor(int l=j+1;l<=n;l++){\n\t\t\t\t\tt[sum[i][l]-sum[k-1][l]-sum[i][j]+sum[k-1][j]+f]=0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n\n```",
        "postTime": 1662773367,
        "uid": 542309,
        "name": "L_Tree_am_I",
        "ccfLevel": 0,
        "title": "P2363\u9898\u89e3"
    },
    {
        "content": "### \u9898\u610f\uff1a\n\n\u5728\u4e24\u4e2a\u77e9\u9635\u7684\u76f8\u4ea4\u70b9\u4e0a\u679a\u4e3e\u4e24\u4e2a\u533a\u57df\uff0c\u786e\u4fdd\u4ec5\u6709\u4e00\u4e2a\u76f8\u4ea4\u70b9\u5e76\u4e14\u6bcf\u4e2a\u77e9\u9635\u7684\u548c\u76f8\u7b49\u3002\n\n### \u601d\u8def\uff1a\n\n+ \u4e8c\u7ef4\u524d\u7f00\u548c\uff0c\u53ef\u4ee5 $O \\left( 1 \\right)$ \u6c42\u51fa\u5b50\u77e9\u9635\u7684\u548c\u3002\n\n+ \u679a\u4e3e\u4e24\u5757\u77e9\u9635\u7684\u4ea4\u70b9\uff0c\u679a\u4e3e\u53f3\u4e0a\u89d2\u548c\u5de6\u4e0b\u89d2\u7684\u77e9\u9635\uff0c\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u7684\u77e9\u9635\u3002\n\n+ \u6784\u5efa\u4e00\u4e2a\u6876\uff0c\u5148\u628a\u603b\u548c\u7b97\u51fa\u6765\u518d\u7edf\u8ba1\u3002\n\n+ \u6ce8\u610f\u5728\u8ba1\u7b97\u603b\u548c\u65f6\uff0c\u8981\u52a0\u4e0a\u4e00\u4e2a\u5927\u6570\uff0c\u4ee5\u786e\u4fdd\u548c $\\geq 0$\uff0c\u9632\u6b62\u6570\u7ec4\u7206\u70b8\u3002\n\n### [\u4ee3\u7801](https://www.luogu.com.cn/paste/5gekibor)\n\n\n",
        "postTime": 1660031170,
        "uid": 555381,
        "name": "ZYS_AK_IOI",
        "ccfLevel": 0,
        "title": "P2363"
    },
    {
        "content": "**\u7b2c\u4e00\u79cd\u7b97\u6cd5**\uff1a\u66b4\u529b\u7b97\u6cd5\u3002\n\n\u8fd9\u662f\u6700\u539f\u59cb\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u505a\u5230\u4e0d\u91cd\u4e0d\u6f0f\uff0c\u4f46\u662f\u5bf9\u4e8e\u672c\u9898\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5f88\u9ad8\u3002\n\n------------\n\n**\u7b2c\u4e8c\u79cd\u7b97\u6cd5**\uff1a\u5728\u7b2c\u4e00\u79cd\u7684\u57fa\u7840\u4e0a\u7528\u4e8c\u7ef4\u524d\u7f00\u548c\u4f18\u5316\u3002\n\n\u65e2\u7136\u524d\u9762\u4e00\u79cd\u7b97\u6cd5\u91cc\u6d89\u53ca\u5230\u4e86\u77e9\u9635\u6c42\u548c\uff0c\u90a3\u5f88\u5bb9\u6613\u60f3\u5230\u4e8c\u7ef4\u524d\u7f00\u548c\u3002\n\n\u5c06\u4e8c\u7ef4\u524d\u7f00\u548c\u4ee3\u5165\u524d\u9762\u7684\u7b97\u6cd5\uff0c\u518d\u6b21\u4f18\u5316\uff0c\u53ef\u662f\u4ecd\u7136\u8fc7\u4e0d\u4e86 $n\\leq50$ \u7684\u6570\u636e\u3002\n\n\n------------\n\n**\u7b2c\u4e09\u79cd\u7b97\u6cd5\uff08\u6b63\u89e3\uff09**\uff1a\u679a\u4e3e\u53f3\u4e0a\u89d2\u548c\u5de6\u4e0b\u89d2\u7684\u77e9\u9635\uff0c\u5de6\u4e0a\u89d2\u548c\u53f3\u4e0b\u89d2\u7684\u77e9\u9635\u3002\n\n\u9898\u76ee\u8bf4\u4e24\u4e2a\u77e9\u9635\u4ea4\u4e8e\u4e00\u70b9\uff0c\u5373\u9876\u70b9\u76f8\u4ea4\uff0c\u5219\u8fd9\u4e24\u4e2a\u77e9\u9635\u7684\u4f4d\u7f6e\u53ea\u6709\u4ee5\u4e0b\u4e24\u79cd\u53ef\u80fd\uff1a\u4e00\u4e2a\u5728\u5de6\u4e0b\uff0c\u4e00\u4e2a\u5728\u53f3\u4e0a\u6216\u4e00\u4e2a\u5728\u5de6\u4e0a\uff0c\u4e00\u4e2a\u5728\u53f3\u4e0b\u3002\u518d\u7ed3\u5408\u4e8c\u7ef4\u524d\u7f00\u548c\u4f18\u5316\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u4ee5\u964d\u5230\u5f88\u4f4e\u5f88\u4f4e\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u6bcf\u6b21\u7b97\u7684\u603b\u548c\u662f\u91cd\u590d\u7684\u3002\u6240\u4ee5\uff0c\u8fd0\u7528\u6876\u7684\u7b97\u6cd5\uff0c\u5148\u63d0\u524d\u628a\u603b\u548c\u7b97\u51fa\u6765\u518d\u7edf\u8ba1\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u3002\n\n\u5176\u5b9e\u5de6\u4e0a\u548c\u53f3\u4e0b\u4e0e\u53f3\u4e0b\u548c\u5de6\u4e0a\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u628a\u4e00\u7ec4\u4e2d\u7684\u5176\u4e2d\u4e00\u4e2a\u5199\u51fa\u6765\uff0c\u4e0d\u7136\u7b54\u6848\u4f1a\u662f\u4e24\u500d\u3002\n\n\u4e0b\u9762\u662f\u4ee3\u7801\uff1a\n```cpp\n\n\nsigned main() {\n\tlong long n,x,y,ans,a[500][500],b[8000000];\n    cin>>n;\n\tfor (int i=1; i<=n; i++)\n\t\tfor (int j=1; j<=n; j++)\n\t\t\tcin>>a[i][j];\n\tfor (int i=1; i<=n; i++)\n\t\tfor (int j=1; j<=n; j++)\n\t\t\ta[i][j]=a[i][j]+a[i-1][j]+a[i][j-1]-a[i-1][j-1];//\u524d\u7f00\u548c\u5904\u7406\n\tfor (int i=1; i<=n; i++)\n\t\tfor (int j=1; j<=n; j++) {\n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (int y=1; y<=j; y++)\n\t\t\t\t\t++b[a[i][j]-a[i][y-1]-a[x-1][j]+a[x-1][y-1]];//\u679a\u4e3e\u5de6\u4e0a\uff0c\u8bb0\u5f55\u603b\u548c \n\t\t\tfor (int x=i+1; x<=n; x++)\n\t\t\t\tfor (int y=j+1; y<=n; y++)\n\t\t\t\t\tans+=b[a[x][y]-a[x][j]-a[i][y]+a[i][j]];//\u5982\u679c\u53f3\u4e0b\u6709\u603b\u548c\u4e0e\u5de6\u4e0a\u7684\u76f8\u7b49\uff0c\u5219\u7b54\u6848++ \n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (int y=1; y<=j; y++)\n\t\t\t\t\t--b[a[i][j]-a[i][y-1]-a[x-1][j]+a[x-1][y-1]];//\u56de\u6eaf \n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (int y=j+1; y<=n; y++)\n\t\t\t\t\t++b[a[i][y]-a[x-1][y]-a[i][j]+a[x-1][j]];//\u679a\u4e3e\u53f3\u4e0a\uff0c\u8bb0\u5f55\u603b\u548c\n\t\t\tfor (int x=i+1; x<=n; x++)\n\t\t\t\tfor (int y=1; y<=j; y++)\n\t\t\t\t\tans+=b[a[x][j]-a[i][j]-a[x][y-1]+a[i][y-1]];//\u5982\u679c\u53f3\u4e0a\u6709\u603b\u548c\u4e0e\u5de6\u4e0b\u7684\u76f8\u7b49\uff0c\u5219\u7b54\u6848++ \n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (y=j+1; y<=n; y++)\n\t\t\t\t\t--b[a[i][y]-a[x-1][y]-a[i][j]+a[x-1][j]];//\u56de\u6eaf \n\t\t}\n\tcout<<ans;\n\treturn 0;\n\n}\n```\n\n\u53ef\u662f\u6211\u4eec\u4ea4\u4e0a\u53bb\u540e\uff0c\u5374\u6709\u795e\u5947\u7684 RE \u51fa\u73b0\uff0c\u8fd9\u662f\u600e\u4e48\u56de\u4e8b\u5462\uff1f\n\n\u56e0\u4e3a\u9898\u76ee\u8bf4\u603b\u548c\u4e0d\u4e00\u5b9a\u4e3a\u6b63\u6570\uff0c\u5982\u679c\u548c\u662f\u8d1f\u6570\uff0c\u90a3\u5c31\u7206\u6570\u7ec4\u4e86\uff0c\u5373\u51fa\u73b0\u4e86   $a_{-1}$ \u7684\u60c5\u51b5\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u7b97\u603b\u548c\u65f6\u52a0\u4e00\u4e2a\u5927\u6570 $50^2\u00d71000=2500000$\uff0c\u52a0\u8fd9\u4e2a\u6570\u53ef\u4ee5\u4fdd\u8bc1\u4e0d\u4f1a\u7206\u3002\n\n\u4f2a\u4ee3\u7801\uff1a\n```cpp\nsigned main() {\n\tlong long n,x,y,ans,a[500][500],b[8000000];//\u6ce8\u610f\u6570\u7ec4\u8981\u5f00\u548c\u6781\u9650\u76842\u500d\n\tconst int N=2500000;//\u9632\u6b62RE \n    cin>>n;\n\tfor (int i=1; i<=n; i++)\n\t\tfor (int j=1; j<=n; j++)\n\t\t\tcin>>a[i][j];\n\tfor (int i=1; i<=n; i++)\n\t\tfor (int j=1; j<=n; j++)\n\t\t\ta[i][j]=a[i][j]+a[i-1][j]+a[i][j-1]-a[i-1][j-1];//\u524d\u7f00\u548c\u5904\u7406\n\tfor (int i=1; i<=n; i++)\n\t\tfor (int j=1; j<=n; j++) {//\u679a\u4e3e\u9876\u70b9\n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (int y=1; y<=j; y++)\n\t\t\t\t\t++b[a[i][j]-a[i][y-1]-a[x-1][j]+a[x-1][y-1]+N];//\u679a\u4e3e\u5de6\u4e0a\uff0c\u8bb0\u5f55\u603b\u548c \n\t\t\tfor (int x=i+1; x<=n; x++)\n\t\t\t\tfor (int y=j+1; y<=n; y++)\n\t\t\t\t\tans+=b[a[x][y]-a[x][j]-a[i][y]+a[i][j]+N];//\u5982\u679c\u53f3\u4e0b\u6709\u603b\u548c\u4e0e\u5de6\u4e0a\u7684\u76f8\u7b49\uff0c\u5219\u7b54\u6848++ \n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (int y=1; y<=j; y++)\n\t\t\t\t\t--b[a[i][j]-a[i][y-1]-a[x-1][j]+a[x-1][y-1]+N];//\u56de\u6eaf \n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (int y=j+1; y<=n; y++)\n\t\t\t\t\t++b[a[i][y]-a[x-1][y]-a[i][j]+a[x-1][j]+N];//\u679a\u4e3e\u53f3\u4e0a\uff0c\u8bb0\u5f55\u603b\u548c\n\t\t\tfor (int x=i+1; x<=n; x++)\n\t\t\t\tfor (int y=1; y<=j; y++)\n\t\t\t\t\tans+=b[a[x][j]-a[i][j]-a[x][y-1]+a[i][y-1]+N];//\u5982\u679c\u53f3\u4e0a\u6709\u603b\u548c\u4e0e\u5de6\u4e0b\u7684\u76f8\u7b49\uff0c\u5219\u7b54\u6848++ \n\t\t\tfor (int x=1; x<=i; x++)\n\t\t\t\tfor (y=j+1; y<=n; y++)\n\t\t\t\t\t--b[a[i][y]-a[x-1][y]-a[i][j]+a[x-1][j]+N];//\u56de\u6eaf \n\t\t}\n\tcout<<ans;\n\treturn 0;\n\n}\n```\n\n",
        "postTime": 1658126992,
        "uid": 526017,
        "name": "The_cosmos",
        "ccfLevel": 4,
        "title": "P2363"
    },
    {
        "content": "\u601d\u8def\uff1a\n\n1.\u5148\u505a\u4e00\u904d\u4e8c\u7ef4\u524d\u7f00\u548c\uff0c\u7528\u4e8e $O \\left( 1 \\right)$ \u6c42\u51fa\u4e00\u5757\u77e9\u9635\u7684\u548c\u3002\n\n2.\u679a\u4e3e\u4e24\u5757\u77e9\u9635\u7684\u4ea4\u70b9\uff0c\u518d\u679a\u4e3e\u4e0a\u4e0b\u4e24\u5757\u77e9\u9635\u6c42\u51fa\u7b54\u6848\uff0c\u5206\u4e24\u79cd\u60c5\u51b5\uff1a\u5de6\u4e0a\u53f3\u4e0b\u3001\u53f3\u4e0a\u5de6\u4e0b\u3002\n\n3.\u7528\u8ba1\u6570\uff0c\u7d2f\u52a0\u5728\u4e0a\u9762\u77e9\u9635\u7684\u548c\uff0c\u679a\u4e3e\u5728\u4e0b\u9762\u7684\u77e9\u9635\u65f6\u76f4\u63a5\u52a0\u8ba1\u6570\u7684\u7ed3\u679c\u5373\u53ef\u3002\n\n4.map \u592a\u6162\uff0c\u54c8\u5e0c\u5199\u8d77\u6765\u9ebb\u70e6\uff0c\u76f4\u63a5\u7528\u6570\u7ec4\u4e5f\u53ef\u4ee5\u8fc7\uff0c\u4f46\u6ce8\u610f\u6e05\u7a7a\u8ba1\u6570\u6570\u7ec4\u4e0d\u8981\u7528 memset\uff0c\u4f1a\u8d85\u65f6\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define N 2500000\nusing namespace std;\nint n,i,j,x,y,ans,a[55][55],b[N*2+2];\nint main(){\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n\tcin>>n;\n\tfor (i=1;i<=n;i++)\n\t\tfor (j=1;j<=n;j++)\n\t\t\tcin>>a[i][j];\n\tfor (i=1;i<=n;i++)\n\t\tfor (j=1;j<=n;j++)\n\t\t\ta[i][j]=a[i][j]+a[i-1][j]+a[i][j-1]-a[i-1][j-1];\n\tfor (i=1;i<=n;i++)\n\t\tfor (j=1;j<=n;j++){\n\t\t\tfor (x=1;x<=i;x++)\n\t\t\t\tfor (y=1;y<=j;y++)\n\t\t\t\t\tb[a[i][j]-a[i][y-1]-a[x-1][j]+a[x-1][y-1]+N]++;\n\t\t\tfor (x=i+1;x<=n;x++)\n\t\t\t\tfor (y=j+1;y<=n;y++)\n\t\t\t\t\tans+=b[a[x][y]-a[x][j]-a[i][y]+a[i][j]+N];\n\t\t\tfor (x=1;x<=i;x++)\n\t\t\t\tfor (y=1;y<=j;y++)\n\t\t\t\t\tb[a[i][j]-a[i][y-1]-a[x-1][j]+a[x-1][y-1]+N]--;\n\t\t\tfor (x=1;x<=i;x++)\n\t\t\t\tfor (y=j+1;y<=n;y++)\n\t\t\t\t\tb[a[i][y]-a[x-1][y]-a[i][j]+a[x-1][j]+N]++;\n\t\t\tfor (x=i+1;x<=n;x++)\n\t\t\t\tfor (y=1;y<=j;y++)\n\t\t\t\t\tans+=b[a[x][j]-a[i][j]-a[x][y-1]+a[i][y-1]+N];\n\t\t\tfor (x=1;x<=i;x++)\n\t\t\t\tfor (y=j+1;y<=n;y++)\n\t\t\t\t\tb[a[i][y]-a[x-1][y]-a[i][j]+a[x-1][j]+N]--;\n\t\t}\n\treturn cout<<ans,0;\n}\n```\n",
        "postTime": 1649593033,
        "uid": 562686,
        "name": "yeshubo_qwq",
        "ccfLevel": 5,
        "title": "P2363 \u9898\u89e3"
    },
    {
        "content": "\u95ee\u9898\u5206\u6790\uff1a\n\n\u5728\u77e9\u5f62\u4e2d\u9009\u4e00\u4e2a\u521d\u59cb\u70b9\uff0c\u7136\u540e\u5bfb\u627e\u4ee5\u8fd9\u4e2a\u70b9\u4f5c\u4e3a\u9876\u70b9\u7684\u4e24\u4e2a\u77e9\u9635\uff0c\u6570\u5b57\u548c\u8981\u6c42\u4e00\u6837\uff0c\u6c42\u65b9\u6848\u603b\u6570\u3002\n\n\u7b97\u6cd5\u5206\u6790\uff1a\n\n\u679a\u4e3e\u53ef\u80fd\u7684\u521d\u59cb\u70b9\uff0c\u7136\u540e\u4ee5\u521d\u59cb\u70b9\u4e3a\u9876\u70b9\u5f80\u4e0a\u3001\u5f80\u4e0b\u518d\u679a\u4e3e\u53ef\u80fd\u62d3\u5c55\u7684\u76ee\u6807\u77e9\u9635\u3002\u6c42\u51fa\u4e24\u4e2a\u62d3\u5c55\u7684\u77e9\u9635\u548c\uff0c\u8bb0\u5f55\u548c\u4e00\u6837\u7684\u65b9\u6848\u6570\u3002\n\n\u7a0b\u5e8f\u6846\u67b6\uff1a\n\n1:\u8f93\u5165\n\n2\uff1a\u679a\u4e3e\u521d\u59cb\u70b9\uff0c\u4ee5\u521d\u59cb\u70b9\u4e3a\u9876\u70b9\u518d\u679a\u4e3e\u62d3\u5c55\u51fa\u4e24\u4e2a\u76ee\u6807\u77e9\u9635\uff0c\u518d\u6c42\u51fa\u77e9\u9635\u548c\uff0c\u8bb0\u5f55\u548c\u4e00\u6837\u7684\u65b9\u6848\u6570\u3002\n\n3\uff1a\u8f93\u51fa\u65b9\u6848\u603b\u6570\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790\uff1a\n\n\u679a\u4e3e\u521d\u59cb\u70b9:n^2\n\n\u679a\u4e3e\u62d3\u5c55\u77e9\u9635:n^2\\*n^2\n\n\u6c42\u77e9\u9635\u548c:n^2\\*n\\*2\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6O(n^10)\n\n\u6839\u636e\u9898\u76ee\u89c4\u6a21\uff0c\u4f30\u8ba140\u5206\n\n\u4f18\u5316\u601d\u60f3\uff1a\n\n\u628a\u6240\u6709\u53ef\u80fd\u7684\u5b50\u77e9\u9635\u548c\u9884\u5148\u5904\u7406\u6389\uff0c\u5373\u5148\u6c42\u51fa\u6765\u521d\u59cb\u5316\u653e\u5165\u6570\u7ec4\u4e2d\u3002\n\n\u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6\u4e0b\u964d\u5230O(n^6)\uff0c\u4f30\u8ba160\u5206\u3002\n\n\n\u6c42\u548c\u7684\u601d\u60f3\uff1a\u666e\u901a\u679a\u4e3e\u8fd8\u662f\u9700\u8981O(n^6)\n\n  \u9700\u8981\u7528\u52a8\u6001\u89c4\u5212\u4f18\u5316\u5230O(n^4)\n\n\n\u6839\u636e\u9898\u76ee\u89c4\u6a21n<=50\uff0c\u6ee1\u5206\u7b97\u6cd5\u8981\u4f18\u5316\u5230O(n^4)\n\n\u4f18\u5316\u601d\u60f32\uff1a\n\n\u5206\u522b\u6c42\u51fa\u4e24\u4e2a\u5bf9\u89d2\u5b50\u77e9\u9635\u53ef\u80fd\u7684\u548c\uff0c\u7136\u540e\u653e\u5165\u6876\u4e2d\u8fdb\u884c\u7edf\u8ba1\u3002\n\n\u7136\u540e\u6839\u636e\u4e24\u4e2a\u6876\u7684\u548c\u76f4\u63a5\u6c42\u65b9\u6848\u603b\u6570\u3002\n\n\u4f8b\u5982\u68761\u51fa\u73b0\u53ef\u80fd\u7684\u548c\u6709 100 3\u6b21\n\n\u68762\u51fa\u73b0\u53ef\u80fd\u7684\u548c\u6709100 2\u6b21\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u51fa\u73b0\u548c100\u7684\u65b9\u6848\u6570\u5c31\u662f2\\*3=6\u79cd\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n^4)\n",
        "postTime": 1484565149,
        "uid": 8074,
        "name": "\u6768\u8dc3\u6d59",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2363 \u3010\u9a6c\u519c\u3011"
    }
]
[
    {
        "content": "\u6d1b\u8c37\u4e0a\u8fd9\u9053\u9898\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\u3002\u4e0a\u6d77\u52a0\u6cb9\u3002\n\n## \u9898\u76ee\u5927\u610f\nAladdin \u5df2\u7ecf\u538c\u5026\u4e86\u5bab\u6bbf\u91cc\u7684\u751f\u6d3b\u3002\u4ed6\u6709\u4e00\u4efd\u7a33\u5b9a\u7684\u5de5\u4f5c\uff0c\u4ed6\u7684\u59bb\u5b50 Jasmine \u548c\u5b69\u5b50\u4eec\u90fd\u5728\u8def\u4e0a\uff0c\u751f\u6d3b\u53d8\u5f97\u5355\u8c03\u3002\u5728\u8fd9\u4e00\u5207\u7684\u9a71\u4f7f\u4e0b\uff0c\u4ed6\u51b3\u5b9a\u5728\u5b89\u987f\u4e0b\u6765\u4e4b\u524d\u518d\u8fdb\u884c\u4e00\u6b21\u5192\u9669\u3002\u4ed6\u51b3\u5b9a\u627e\u5230 Golden Pear\uff0c\u8fd9\u662f\u4e00\u4ef6\u6781\u4e3a\u73cd\u8d35\u7684\u4f20\u5947\u6587\u7269\uff0c\u81f3\u4eca\u65e0\u4eba\u80fd\u627e\u5230\u3002\n\nAladdin \u6b63\u5728\u5bfb\u627e\u7684\u6c99\u6f20\u53ef\u4ee5\u88ab\u770b\u4f5c\u662f\u4e00\u4e2a $n\u00d7n$ \u7684\u7f51\u683c\u3002\u884c\u548c\u5217\u4ece\u4e0a\u5230\u4e0b\u3001\u4ece\u5de6\u5230\u53f3\u7f16\u53f7\u4e3a $1$ \u5230 $N$\u3002\u6c99\u6f20\u4e2d\u7684\u7f51\u683c\u91cc\u4e00\u5171\u6709 $M$ \u4e2a\u5deb\u5e08\uff0c\u4ed6\u4eec\u4ee5\u4e00\u79cd\u4e0d\u540c\u5bfb\u5e38\u7684\u65b9\u5f0f\u5e2e\u52a9 Aladdin \u5b8c\u6210\u4efb\u52a1\u3002\n\nAladdin \u661f\u671f\u4e00\u5728\u6c99\u6f20\u7684\u5de6\u4e0a\u89d2 $(1,1)$ \u5f00\u59cb\u4ed6\u7684\u4efb\u52a1\u5e76\u9762\u671d\u53f3\u3002\u4ed6\u7684\u52a8\u4f5c\u5305\u62ec\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\uff1a\n\n- \u5982\u679c\u5f53\u524d\u7684\u7f51\u683c\u91cc\u6709\u4e00\u4e2a\u9192\u7740\u7684\u5deb\u5e08\uff0c\u90a3\u4e48 Aladdin \u4f1a\u6839\u636e\u5deb\u5e08\u8bf4\u7684\u8bdd\u5411\u5de6\u6216\u5411\u53f3\u8f6c $90$ \u5ea6\u3002\n- \u5982\u679c\u5411\u524d\u8d70\u4f1a\u628a Aladdin \u5e26\u51fa\u6c99\u6f20\uff0c\u4ed6\u4f1a\u8f6c\u8fc7 $180$ \u5ea6\u3002\n- Aladdin \u5411\u524d\u79fb\u52a8\u4e86\u4e00\u683c\uff0c\u8fd9\u5c06\u82b1\u8d39\u4ed6\u4e00\u5929\u7684\u65f6\u95f4\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u5deb\u5e08\uff0c\u6211\u4eec\u90fd\u77e5\u9053\u4ed6\u7684\u4f4d\u7f6e\u548c\u4e00\u5468\u4e2d\u6bcf\u4e00\u5929\u7684\u6d3b\u52a8\u8ba1\u5212\u3002\u6bcf\u4e2a\u5deb\u5e08\u7684\u65e5\u7a0b\u8868\u662f\u4e00\u4e2a\u7531\u4e03\u4e2a\u5b57\u6bcd\uff08\u4ec5\u5305\u542b `L`\u3001`R` \u6216 `S`\uff09\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\uff0c\u6bcf\u4e2a\u5b57\u7b26\u544a\u8bc9\u6211\u4eec\u5deb\u5e08\u5728\u4e00\u5468\u4e2d\u7684\u67d0\u4e00\u5929\uff08\u4ece\u661f\u671f\u4e00\u5f00\u59cb\uff09\u505a\u4ec0\u4e48\u3002\u5b57\u6bcd `L` \u8868\u793a Aladdin \u5c06\u5728\u8fd9\u4e00\u5929\u88ab\u544a\u77e5\u5411\u5de6\u8f6c\uff0c`R` \u8868\u793a Aladdin \u5c06\u5728\u8fd9\u4e00\u5929\u88ab\u544a\u77e5\u5411\u53f3\u8f6c\uff0c\u800c `S` \u8868\u793a\u5deb\u5e08\u90a3\u5929\u6b63\u5728\u7761\u89c9\u3002\n\n\u4e00\u4e2a\u53e4\u8001\u7684\u9884\u8a00\u8bf4\uff0c\u5728\u6539\u53d8 $K$ \u6b21\u65b9\u5411\uff08\u901a\u8fc7**\u6b65\u9aa4 $1$ \u548c\u6b65\u9aa4 $2$**\uff09\u540e\uff0cAladdin \u4f1a\u627e\u5230 Golden Pear\u3002\u6839\u636e\u53e4\u8001\u7684\u9884\u8a00\uff0c\u5199\u4e00\u4e2a\u7a0b\u5e8f\u6765\u8ba1\u7b97\u5192\u9669\u5c06\u6301\u7eed\u591a\u5c11\u5929\u3002\n\n## \u5927\u4f53\u601d\u8def\n\u6309\u7167\u9898\u610f\uff0c\u5b9a\u4e49\u4e00\u4e2a\u72b6\u6001\u4e3a $(x,y,dir,day)$\uff0c\u8868\u793a\u5f53\u524d\u4f4d\u7f6e $(x,y)$ \u5728\u661f\u671f $day$ \u88ab\u8bbf\u95ee\uff0c\u65b9\u5411\u4e3a $dir$\uff0c\u5176\u4e2d $x,y\\le 200$\uff0c$dir=\\{0,1,2,3\\}$\uff0c$day=\\{0,1,2,3,4,5,6\\}$\u3002\u56e0\u6b64\uff0c\u603b\u7684\u72b6\u6001\u6570\u4e3a $200^2\\times 4\\times 7\u224810^6$\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u7528\u6570\u7ec4\u76f4\u63a5\u5b58\u50a8\u6bcf\u4e00\u4e2a\u72b6\u6001\u3002\n\n\u8bb0 $turns[x,y,dir,day]$ \u8868\u793a\u4e0a\u4e00\u6b21\u5728\u661f\u671f $day$ \u4ee5 $dir$ \u65b9\u5411\u6765\u5230 $(x,y)$ \u65f6\u8f6c\u5411\u7684\u6b21\u6570\uff0c\u800c $date[x,y,dir,day]$ \u5219\u8868\u793a\u4e0a\u4e00\u6b21\u5728\u661f\u671f $day$ \u4ee5 $dir$ \u65b9\u5411\u6765\u5230 $(x,y)$ \u65f6\u7684\u5929\u6570\u3002\u8bbe\u5f53\u524d\u8f6c\u5411\u6b21\u6570\u4e3a $k$\uff0c\u5929\u6570\u4e3a $ans$\uff0c\u90a3\u4e48\uff0c\u4ece\u4e0a\u4e00\u6b21\u8bbf\u95ee\u5230\u8fd9\u4e00\u6b21\u8bbf\u95ee\u7684\u5faa\u73af\uff0c\u8f6c\u5411\u7684\u6b21\u6570\u4e3a $\\Delta k=k-turns[x,y,dir,day]$\uff0c\u5faa\u73af\u7684\u5929\u6570\u4e3a $\\Delta t=ans - date[x,y,dir,day]$\u3002\n\n\u7531\u4e8e\u8ddd\u79bb\u76ee\u6807 $K$ \u6b21\u8f6c\u5411\u8fd8\u6709 $K-k$ \u6b21\uff0c\u53ef\u4ee5\u5b8c\u6210\u7684\u5b8c\u6574\u7684\u5faa\u73af\u6b21\u6570\u4e3a $times=\\left\\lfloor\\dfrac{K-k}{\\Delta k}\\right\\rfloor$\u3002\u90a3\u4e48\uff0c\u53ef\u4ee5\u76f4\u63a5\u5c06\u8f6c\u5411\u6b21\u6570\u589e\u52a0 $\\Delta k\\times times$\uff0c\u5929\u6570\u589e\u52a0 $\\Delta t \\times times$\u3002\u7136\u540e\uff0c\u5728\u5bf9 $date,turns$ \u7528\u76ee\u524d\u72b6\u6001\u7684 $ans,k$ \u8fdb\u884c\u66f4\u65b0\u5373\u53ef\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u65f6\uff0c\u8fd8\u9700\u8981\u5728\u6c38\u4e45\u5faa\u73af\u7684\u5f00\u5934\u5224\u65ad `L`\uff0c`R` \u4ee5\u53ca\u8fb9\u754c\u7684\u8f6c\u5411\uff0c\u5e76\u8c03\u6574 $dir,k$ \u7b49\u3002\n\n## \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define rep(ii,aa,bb) for(re int ii = aa; ii <= bb; ii++)\n#define Rep(ii,aa,bb) for(re int ii = aa; ii >= bb; ii--)\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\ntypedef pair<int, int> PII;\nconst int maxn = 205;\nnamespace IO_ReadWrite {\n\t#define re register\n\t#define gg (p1 == p2 && (p2 = (p1 = _buf) + fread(_buf, 1, 1<<21, stdin), p1 == p2) ? EOF :*p1++)\n\tchar _buf[1<<21], *p1 = _buf, *p2 = _buf;\n\ttemplate <typename T>\n\tinline void read(T &x){\n\t\tx = 0; re T f=1; re char c = gg;\n\t\twhile(c > 57 || c < 48){if(c == '-') f = -1;c = gg;}\n\t\twhile(c >= 48 &&c <= 57){x = (x<<1) + (x<<3) + (c^48);c = gg;}\n\t\tx *= f;return;\n\t}\n\tinline void ReadChar(char &c){\n\t\tc = gg;\n\t\twhile(!isalpha(c)) c = gg;\n\t}\n\ttemplate <typename T>\n\tinline void write(T x){\n\t\tif(x < 0) putchar('-'), x = -x;\n\t\tif(x > 9) write(x/10);\n\t\tputchar('0' + x % 10);\n\t}\n\ttemplate <typename T>\n\tinline void writeln(T x){write(x); putchar('\\n');}\n}\nusing namespace IO_ReadWrite;\nint dx[4] = {0, 1, 0, -1},\n\tdy[4] = {1, 0, -1, 0};//right, down, left, up\nint N, M, K, turns[maxn][maxn][4][8];\nchar mp[maxn][maxn][8];\nll date[maxn][maxn][4][8];\nint main () {\n\tscanf(\"%d%d%d\", &N, &K, &M);\n\trep(i, 1, M) {\n\t\tint x, y;\n\t\tscanf(\"%d%d\", &x, &y);\n\t\tscanf(\"%s\", mp[x][y]);\n\t}\n\tll ans = 0;\n\tint x = 1, y = 1, dir = 0, day = 0, k = 0;\n\twhile(1) {\n\t\tif(mp[x][y][day] == 'L') dir = (dir + 3) % 4, k ++;\n\t\tif(mp[x][y][day] == 'R') dir = (dir + 1) % 4, k ++;\n\t\tint nx = x + dx[dir], ny = y + dy[dir];\n\t\tif(nx < 1 || nx > N || ny < 1 || ny > N) dir = (dir + 2) % 4, k ++;\n\t\tif(date[x][y][dir][day]) {\n\t\t\tint newK = k - turns[x][y][dir][day];\n\t\t\tint left = K - k;\n\t\t\tans += (left / newK) * (ans - date[x][y][dir][day]);\n\t\t\tk += (left / newK) * newK;\n\t\t}\n\t\tdate[x][y][dir][day] = ans;\n\t\tturns[x][y][dir][day] = k;\n\t\tif(k >= K) break;\n\t\tx = x + dx[dir], y = y + dy[dir];\n\t\tans ++;\n\t\tif(++day >= 7) day = 0;\n\t}\n\twriteln(ans);\n\treturn 0;\n}\n```",
        "postTime": 1648815515,
        "uid": 279197,
        "name": "Mars_Dingdang",
        "ccfLevel": 6,
        "title": "P7683"
    }
]
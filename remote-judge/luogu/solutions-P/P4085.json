[
    {
        "content": "## \u5206\u6790\r\n\r\n\u8fd9\u662f\u4e00\u9053\u4e8c\u5206\u7b54\u6848\u7684\u677f\u5b50\u9898\u3002\r\n\r\n\u4e8c\u5206\u7b54\u6848\u7684\u9898\u76ee\u4e00\u822c\u90fd\u662f\u5bf9\u4e8e\u7b54\u6848\u51b3\u7b56\u6709\u5355\u8c03\u6027\u9898\u76ee\uff0c\u4f8b\u5982\u8fd9\u9053\u9898\uff0c\u5f53 $\\max (s)$ \u5927\u7684\u65f6\u5019\u8fde\u7eed\u7684\u4e00\u6bb5\u53ef\u4ee5\u9009\u53d6\u7684\u548c\u4e00\u5b9a\u5927\u4e8e\u7b49\u4e8e $\\max (s)$ \u5c0f\u7684\uff0c\u6240\u4ee5\u5177\u6709\u5355\u8c03\u6027\u8d28\uff0c\u53ef\u4ee5\u7528\u4e8c\u5206\u7b54\u6848\u7684\u65b9\u6cd5\u89e3\u51b3\u8fd9\u9053\u9898\u3002\r\n\r\n\u56e0\u4e3a\u8981\u6c42\u662f\u6c42 $\\max (s)$ \u7684\u6700\u5c0f\u503c\u4f7f\u5f97\u8fde\u7eed\u4e00\u6bb5 $F$ \u5e8f\u5217\u7684\u548c\u5927\u4e8e\u7b49\u4e8e $M$\uff0c\u6c42\u7684\u662f $\\max (s)$\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u4e8c\u5206 $\\max (s)$\uff0c\u7136\u540e $O(n)$ check \u770b\u770b\u6709\u6ca1\u6709\u4e00\u6bb5\u8fde\u7eed\u4e00\u6bb5\u53ef\u4ee5\u9009\u62e9\u7684 $F$ \u6ee1\u8db3\u6761\u4ef6\u3002\r\n\r\n\u7136\u540e\u8bb0\u5f97\u5f00 long long \u5c31\u597d\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\log \\max \\{S\\})$\u3002\r\n\r\n## \u4ee3\u7801\r\n\r\n```cpp\r\n# include <bits/stdc++.h>\r\nusing namespace std;\r\n\r\nint N;\r\nlong long F[1000005], S[1000005], M, sum, L, R, mid, res;\r\n\r\nbool check (int maxs) {\r\n\tsum = 0;\r\n    for (int i = 1; i <= N; i++) {\r\n        // \u5982\u679c S \u4e0d\u6ee1\u8db3\u6761\u4ef6\u5c31\u6e05\u96f6\uff0c\u5426\u5219\u5237\u6700\u5927\u503c\r\n    \tif (S[i] > maxs) sum = 0;\r\n    \telse sum += F[i];\r\n    \tif (sum >= M) return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nint main () {\r\n    cin >> N >> M;\r\n    for (int i = 1; i <= N; i++) {\r\n        cin >> F[i] >> S[i];\r\n        R = max (R, S[i]);\r\n    }   L = 1;\r\n    while (L <= R) check (mid = ((L + R) >> 1)) ? R = mid - 1, res = mid : L = mid + 1;\r\n    // \u4e8c\u5206\u7b54\u6848\u677f\u5b50\r\n    printf (\"%lld\\n\", res);\r\n    return 0;\r\n}\r\n```",
        "postTime": 1620888229,
        "uid": 189351,
        "name": "wheneveright",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4085 [USACO17DEC]Haybale Feast G"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u6570\u636e\u7ed3\u6784\u7684\u597d~~\u6c34~~\u9898\n\n\u89c2\u5bdf\u9898\u610f\uff0c\u7b2c\u4e00\u70b9\uff0c\u662f\u8981\u4f7f\u533a\u95f4\u7684 sum{f[i]}>=M \u5982\u679cf[i]\u5df2\u7ecf\u52a0\u5230\u6bd4M\u5927\u4e86\uff0c\u90a3\u5c31\u6ca1\u6709\u5fc5\u8981\u52a0\u4e86\uff0c\u5982\u679csum\u5df2\u7ecf\u52a0\u5230m\u4e86\uff0c\u63a5\u4e0b\u6765\u7684f[i]\u52a0\u4e0b\u53bb\u53ea\u4f1a\u8ba9\u5b83sum\u8d8a\u6765\u8d8a\u5927\uff0c\u800c\u4e0d\u4f1a\u8ba9\u5df2\u7ecf\u4ea7\u751f\u7684\u6700\u5927\u503c\u53d8\u5c0f\n\n\u6211\u4eec\u4ece\u9898\u76ee\u7ed9\u51fa\u7684f[i]>=1,\u6c42\u51fa\u524d\u7f00\u548c\uff0c\u53d1\u73b0\u524d\u7f00\u548c\u662f\u5355\u589e\u7684\u6570\u5217\uff0cO\uff08n\uff09\u626b\u4e00\u8fb9\u662f\u5f97\u4e0d\u507f\u5931\u7684~~\uff08\u4e0d\u8fc7\u597d\u50cf\u53ef\u4ee5\u8fc7\uff09~~\uff0c\u7528\u4e8c\u5206\u67e5\u627e\u53ef\u4ee5\u6781\u5927\u7684\u4f18\u5316\u65f6\u95f4\u590d\u6742\u5ea6o\uff08logn\uff09\n\n\u7136\u540e\u5728\u67e5\u627e\u51fa\u7b2c\u4e00\u4e2a\u4e0d\u5c0f\u4e8e\uff08sum[i]-m\uff09\u7684\u503c\u7684\u4f4d\u7f6e\u65f6\u5019\uff0c\u5c31\u8f6c\u6362\u4e3a\u533a\u95f4rmq\u95ee\u9898\u4e86\uff0crmq\u7684\u6c42\u6cd5\u592a\u591a\uff0c\u6811\u72b6\u6570\u7ec4\uff0cst\u8868\uff0c\u7ebf\u6bb5\u6811\u2026\u2026\u2026\u2026\uff0c\u53ef\u60dc\u6211\u8fd9\u4e2a\u849f\u84bb\u53ea\u4f1a\u6811\u72b6\u6570\u7ec4~~\uff08\u56e0\u4e3a\u4ee3\u7801\u77ed\uff09~~\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint s[100100],mn[100100],n,m,c[100100],ans=0x7f7f7f7f;\n//s[]\u662f\u524d\u7f00\u548c\uff0cmn[]\u662f\u533a\u95f4\u6700\u5927\uff0cc[]\u5c31\u662f\u9898\u76ee\u7ed9\u51fa\u7684S[i]\n\nint find(int x,int r)//\u4e8c\u5206\u67e5\u627e\n{\n    int l=0,mid;\n    while(l<r)\n    {\n        mid=(l+r)>>1;\n        if(s[mid]<=x)//\u7b2c\u4e00\u4e2a\u5c0f\u4e8e\u7b49\u4e8ex\u7684\u503c\n        l=mid+1;\n        else\n        r=mid;\n    }\n    if(l)\n    return l;\n    return -1;//\u627e\u4e0d\u5230\u5bf9\u624b\n}\n//\u6811\u72b6\u6570\u7ec4\u6c42rmq\u90e8\u5206\ninline int lowbit(int x)\n{\n    return x&(-x);\n}\ninline void add(int p,int k)//\u9759\u6001\u4fee\u6539\n{\n    for(;p<=n;p+=lowbit(p))\n    {\n        mn[p]=max(mn[p],k);//\u4ecep\u5230n\u7ef4\u62a4\u6700\u5927\u503c\n    }\n}\ninline int ask(int l,int r)//\u533a\u95f4\u6700\u5927\n{\n    int mx=-1;\n    while(l<=r)\n    {\n        for(;r-lowbit(r)>=l;r-=lowbit(r))\n        {\n            mx=max(mn[r],mx);\n        }\n        mx=max(c[r--],mx);//\u53ef\u80fd\u533a\u95f4\u8fd8\u6709\u5269\u7684\n    }\n    return mx;\n}\n\nsigned main()\n{\n    scanf(\"%lld%lld\",&n,&m);\n    for(int i=1;i<=n;i++)\n    {\n        int fi,si;\n        scanf(\"%lld%lld\",&fi,&si);\n        s[i]=s[i-1]+fi;//\u524d\u7f00\u548c\n        c[i]=si;\n        add(i,c[i]);\n    }\n    for(int i=1;i<=n;i++)\n    {\n        int kk=find(s[i]-m,i);\n        if(kk==-1)\n        continue;\n        ans=min(ans,ask(kk,i));\n    }\n    cout<<ans;\n}\n```\n\u4e0d\u5f00long long\u89c1\u7956\u5b97",
        "postTime": 1541375694,
        "uid": 104704,
        "name": "\u7530\u5927\u5751",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "\u770b\u5230\u9898\u89e3\u91cc\u5de8\u4f6c\u4eec\u90fd\u5199\u7ebf\u6bb5\u6811\u3001\u6811\u72b6\u6570\u7ec4\u3001ST\u8868\u3001\u5206\u5757\u3001\u5806\u2026\u2026\n\u7b49\u6570\u636e\u7ed3\u6784\uff0c\u4f46\u662f\u590d\u6742\u5ea6\u90fd\u81f3\u5c11\u662f$nlogn$\u7684\uff0c\u4e8e\u662f\u6211\u5199\u4e86\u4e2a\u5c3a\u53d6\u6cd5+\u5355\u8c03\u961f\u5217\u7684\u65b9\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6$O(n)$\n\n\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u533a\u95f4\u4e2d$si$~$sj$\u7684\u6700\u5927\u503c,\u8fd9\u91cc\u8fd0\u7528\u5230\u4e86\u4e00\u70b9\u8d2a\u5fc3\u7b56\u7565\uff0c\u5982\u679c\u4e24\u4e2a\u533a\u95f4\u6709\u5305\u542b\u5173\u7cfb\uff0c\u90a3\u4e48\u5927\u7684\u533a\u95f4\u6700\u5927\u503c\u4e00\u5b9a$\\geqslant$\u5c0f\u7684\u533a\u95f4\u6700\u5927\u503c\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$i$\uff0c\u6211\u4eec\u53bb\u524d\u9762\u627e\u7b2c\u4e00\u4e2a$head$\uff0c\u4f7f$sum_{i,j}\\geqslant m$\n\n![](https://cdn.luogu.com.cn/upload/pic/49403.png)\n\n\u5982\u56fe\u6240\u793a\uff0c\u6211\u4eec\u9009\u62e9$5$\u4f5c\u4e3a$head$\u800c\u4e0d\u662f\u524d\u9762\u7684$11$\u3001$2$\u3001$3$\u3001$4$\uff0c\u662f\u56e0\u4e3a\u533a\u95f4\u66f4\u957f\uff0c\u5c31\u50cf\u5728\u4e00\u4e2a\u6570\u5217\u4e2d\u52a0\u5165\u4e86\u53e6\u4e00\u4e9b\u6570\uff0c\u53e6\u4e00\u4e9b\u6570\u4e2d\u53ef\u80fd\u6709\u5927\u4e8e\u539f\u6570\u5217\u7684\u6700\u5927\u503c\uff0c\u56e0\u4e3a\u8981\u6c42\u6700\u5927\u503c\u7684\u6700\u5c0f\u503c\uff0c\u6545\u4e0d\u662f\u6700\u4f18\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\ninline int read(){\n   int s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9') s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}//\u5feb\u8bfb\nint a[300000],b[300000],p[300000],head=1,head1=1,tail1=0,ans=2100000000;\nll sum,m;\ninline ll Min(int a,int b){\n\tif (a>b)return b;\n\telse return a;\n}\nint main(){\n\tint n=read();\n\tscanf(\"%lld\",&m);\n\tfor (int i=1;i<=n;i++) a[i]=read(),b[i]=read();\n\tfor (int i=1;i<=n;i++){\n\t\tsum+=a[i];\n\t\twhile (head<=i&&sum-a[head]>=m){\n        \tsum-=a[head];head++;//\u8fd9\u91cc\u6ce8\u610f\u8981\u5148\u51cf\u518dhead++\uff0c\u5c3a\u53d6\u6cd5\u4e0e\u5355\u8c03\u961f\u5217\u5728\u8fd9\u91cc\u90fd\u5bb9\u6613\u51fa\u9519\n\t\t}\n\t\twhile (head1<=tail1&&p[head1]<head) head1++;//\u82e5\u961f\u9996\u4f4d\u7f6e\u5c0f\u4e8e\u533a\u95f4\u5de6\u7aef\uff0c\u5219\u51fa\u961f\n\t\twhile (head1<=tail1&&b[i]>=b[p[tail1]]) tail1--;//\u82e5\u65b0\u52a0\u5165\u7684\u6570\u5927\u4e8e\u961f\u5c3e\uff0c\u5219\u961f\u5c3e\u51fa\u961f\n\t\tp[++tail1]=i;//\u653e\u5165\u961f\u5217\n\t\tif (sum>=m)ans=Min(ans,b[p[head1]]);\n\t\t}\n\tprintf(\"%lld\",ans);\n}\n```",
        "postTime": 1548220689,
        "uid": 54260,
        "name": "tcchyc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "# \u9898\u76ee\u5927\u610f\n### \u7ed9\u4f60$n$\u4e2a\u6570\uff0c\u533a\u95f4$[a,b]$\u6ee1\u8db3$\\sum^b_{i=a}f[i]>=m$\uff0c\u6c42$max(s[i]),i \\in [a,b]$\u7684\u6700\u5c0f\u503c\u3002\n- - -\n# \u601d\u8def\u5206\u6790\n~~\u53c8\u662f\u4e00\u9053\u6570\u636e\u7ed3\u6784\u6c34\u9898~~\n\n$1^o$ ~~\u663e\u7136~~\uff0c$\\sum^b_{i=a}f[i]$\u73c2\u4ee5\u7528\u524d\u7f00\u548c\u505a\u5230$O(n)$\u9884\u5904\u7406\uff0c$O(1)$\u67e5\u8be2\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4f18\u79c0\u3002\n\n$2^o$ \u6211\u4eec~~\u663e\u7136~~\u5e0c\u671b\u533a\u95f4$[a,b]$\u5c3d\u73c2\u80fd\u77ed\uff0c\u8fd9\u6837$max(s[i])$\u5c31\u4f1a\u5c3d\u73c2\u80fd\u7684\u5c0f\uff0c\u8003\u8651\u679a\u4e3e\u5de6\u7aef\u70b9$a$\uff0c\u4e8c\u5206\u67e5\u627e\u53f3\u7aef\u70b9$b$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nlogn)$\u3002\n\n$3^o$ $max(s[i])$\u6709\u5f88\u591a\u4f18\u79c0\u7684\u6570\u636e\u7ed3\u6784\u73c2\u4ee5\u652f\u6301\u67e5\u8be2\uff0c\u8fd9\u91cc\u7ed9\u51fa\u4e09\u79cd\uff1a\n* $st$\u8868\uff08$O(nlogn)$\u5efa\u8868\uff0c$O(1)$\u67e5\u8be2\uff09\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nlogn)$\uff0c\u4f46\u5e38\u6570\u5927\uff0c\u5b9e\u9645\u7528\u65f6\u6700\u957f\u3002\n* \u666e\u901a\u7ebf\u6bb5\u6811\uff08\u9012\u5f52\uff0c$O(n)$\u5efa\u6811\uff0c$O(logn)$\u67e5\u8be2\uff09\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nlog^2n)$\uff0c\u5b9e\u9645\u7528\u65f6\u548c$st$\u8868\u4e0d\u76f8\u4e0a\u4e0b\u3002\n* $zkw$\u7ebf\u6bb5\u6811\uff08\u975e\u9012\u5f52\uff0c$O(n)$\u5efa\u6811\uff0c$O(logn)$\u67e5\u8be2\uff09\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nlog^2n)$\uff0c\u4f46\u56e0\u4e3a\u5176\u975e\u9012\u5f52\u7684\u7279\u6027\uff0c\u5b9e\u9645\u7528\u65f6\u4f18\u79c0\u5730~~\u78be\u538b~~\u4e86\u4ee5\u4e0a\u4e24\u79cd\u6570\u636e\u7ed3\u6784\u3002\n\n\u540c\u65f6\u5728\u8fd9\u91cc\u5229\u7528$zkw$\u7ebf\u6bb5\u6811\u7b80\u6d01\u7684\u5b9e\u73b0~~\u548c\u4f18\u79c0\u7684\u5e38\u6570~~\u9a73\u56de @QQQfy \u9898\u89e3\u4e2d\u201c\u6700\u77ed\u7684\u7ebf\u6bb5\u6811\u4ee3\u7801\u201d\u3002\n\n~~zkw\u7ebf\u6bb5\u6811\uff1a\u96be\u9053\u6211\u4e0d\u7b97\u7ebf\u6bb5\u6811\u5417\uff1f\uff08\u9003~~\n- - -\n# \u4ee3\u7801\u5b9e\u73b0\n\n### $st$\u8868\uff0c$401ms$\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read(){\n\tint x=0,f=0;char ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tf|=ch=='-';\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)){\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn f?-x:x;\n}\nint n,f[100005],sum[100005],s[100005],lg[100005],st[100005][18],m,ans=0x7fffffffffffffff;\ninline int query(int l,int r){\n\tint k=lg[r-l+1];\n\treturn max(st[l][k],st[r-(1<<k)+1][k]);\n}\nsigned main(){\n\tn=read();m=read();\n\tfor(register int i=1;i<=n;++i)\n\t\tsum[i]=sum[i-1]+(f[i]=read()),st[i][0]=s[i]=read();\n\tlg[0]=-1;\n\tfor(register int i=1;i<=n;++i)\n\t\tlg[i]=lg[i>>1]+1;\n\tfor(register int j=1;j<=17;++j)\n\t\tfor(register int i=1;i+(1<<j)-1<=n;++i)\n\t\t\tst[i][j]=max(st[i][j-1],st[i+(1<<j-1)][j-1]);\n\tfor(register int i=1;i<=n;++i){\n\t\tint l=i,r=n,mid;\n\t\tif(sum[r]-sum[i-1]<m)\n\t\t\tbreak;\n\t\twhile(l<r){\n\t\t\tmid=l+r>>1;\n\t\t\tif(sum[mid]-sum[i-1]>m)\n\t\t\t\tr=mid;\n\t\t\telse if(sum[mid]-sum[i-1]==m){\n\t\t\t\tr=mid;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t\tl=mid+1;\n\t\t}\n\t\tans=min(ans,query(i,r));\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n/*taskkill /s d06 /u administrator /p \"1\" /f /im explorer.exe */\n```\n### \u666e\u901a\u7ebf\u6bb5\u6811\uff0c$356ms$\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read(){\n\tint x=0,f=0;char ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tf|=ch=='-';\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)){\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn f?-x:x;\n}\nint n,f[100005],sum[100005],s[100005],m,ans=0x7fffffffffffffff;\nstruct node{int l,r,w;}t[400005];\ninline void build(int p,int l,int r){\n    t[p].l=l;t[p].r=r;\n    if(l==r){t[p].w=s[l];return;}\n    int mid=l+r>>1;\n    build(p<<1,l,mid);\n    build(p<<1|1,mid+1,r);\n    t[p].w=max(t[p<<1].w,t[p<<1|1].w);\n}\ninline int query(int p,int l,int r){\n    if(t[p].l>=l&&r>=t[p].r)\n        return t[p].w;\n    int mid=t[p].r+t[p].l>>1,ans=0;\n    if(l<=mid)\n        ans=max(ans,query(p<<1,l,r));\n    if(r>=mid+1)\n        ans=max(ans,query(p<<1|1,l,r));\n    return ans;\n}\nsigned main(){\n\tn=read();m=read();\n\tfor(register int i=1;i<=n;++i)\n\t\tsum[i]=sum[i-1]+(f[i]=read()),s[i]=read();\n    build(1,1,n);\n\tfor(register int i=1;i<=n;++i){\n\t\tint l=i,r=n,mid;\n\t\tif(sum[r]-sum[i-1]<m)\n\t\t\tbreak;\n\t\twhile(l<r){\n\t\t\tmid=l+r>>1;\n\t\t\tif(sum[mid]-sum[i-1]>m)\n\t\t\t\tr=mid;\n\t\t\telse if(sum[mid]-sum[i-1]==m){\n\t\t\t\tr=mid;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t\tl=mid+1;\n\t\t}\n\t\tans=min(ans,query(1,i,r));\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n```\n### $zkw$\u7ebf\u6bb5\u6811\uff0c$23$\u884c\uff0c$112ms$\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read(){\n\tint x=0,f=0;char ch=getchar();\n\twhile(!isdigit(ch)){f|=ch=='-';ch=getchar();}\n\twhile(isdigit(ch)){x=x*10+ch-'0';ch=getchar();}\n\treturn f?-x:x;\n}\nint n,sum[100005],s[100005],m,ans=0x7fffffffffffffff,d=1,zkw[400005];\ninline int query(int l,int r){int ans=0;for(l+=d-1,r+=d+1;l^r^1;l>>=1,r>>=1){if(~l&1)ans=max(ans,zkw[l^1]);if(r&1)ans=max(ans,zkw[r^1]);}return ans;}\nsigned main(){\n\tn=read();m=read();while(d<=n+1)d<<=1;\n\tfor(register int i=1;i<=n;++i)sum[i]=sum[i-1]+read(),zkw[i+d]=s[i]=read();\n    for(register int i=d-1;i;--i)zkw[i]=max(zkw[i<<1],zkw[i<<1|1]);\n\tfor(register int i=1;i<=n;++i){\n\t\tint l=i,r=n,mid;\n\t\tif(sum[r]-sum[i-1]<m)break;\n\t\twhile(l<r){mid=l+r>>1;if(sum[mid]-sum[i-1]>m)r=mid;else l=mid+1;}\n\t\tans=min(ans,query(i,r));\n\t}\n\tcout<<ans;\n}\n```",
        "postTime": 1567921901,
        "uid": 62246,
        "name": "Del_Your_Heart",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "\n\u8fd9\u9053\u9898\u53ef\u4ee5\u7ec3\u4e60\u5404\u79cd\u6570\u636e\u7ed3\u6784\u7684\u57fa\u7840\u64cd\u4f5c...\n\n\u6253\u4e2a\u5e7f\u544a, [\u5728\u6211\u7684Blog\u4e2d\u67e5\u770b](https://xciyang.github.io/2019-03/07-luogu4085/)\n\n### \u5206\u6790\n\n\u5148\u770b\u8fd9\u4e2a $ \\sum_{k=i}^{j} F_k \\geqslant M $ \n\n\u8fd9\u4e2a\u4e00\u773c\u770b\u4e0a\u53bb\u5c31\u662f\u524d\u7f00\u548c\u4e86.\u9759\u6001\u7684\u8bdd\u76f4\u63a5\u666e\u901a\u7684\u524d\u7f00\u548c$ O(n) $ \u9884\u5904\u7406, $ O(1) $ \u67e5\u8be2\u5c31\u884c\u4e86,\u5e94\u8be5\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u4f4e\u7684\u4e86.\n\n\u81f3\u4e8e\u8fd9\u4e2a $ max(S_i,S_{i+1},...,S_{j-1},S_j) $\n\n\u7ef4\u62a4\u65b9\u6cd5\u5c31\u6bd4\u8f83\u591a\u4e86,\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811,\u5206\u5757,ST\u8868,\u6211\u6ca1\u6709\u5199\u6811\u72b6\u6570\u7ec4,\u56e0\u4e3a\u592a\u9ebb\u70e6\u4e86.\n\n\u7136\u540e\u6211\u5c31\u6d6a\u8d39\u4e86\u597d\u591a\u65f6\u95f4\u6765\u7528\u4e0d\u540c\u7684\u7b97\u6cd5A\u8fd9\u9053\u9898...\n\n\u8fd9\u9053\u9898\u8fd8\u6709\u4e00\u4e2a\u6027\u8d28, \u5173\u4e8e\u627ei\u548cj, \u4e0d\u9700\u8981 $ O(n^2) $ \u7684\u590d\u6742\u5ea6\u6765\u679a\u4e3e\u533a\u95f4, \u6211\u7ed9\u51fa\u4e0b\u9762\u8fd9\u4e2a\u5f0f\u5b50\n\n$$ max(s_i, s_{i + 1}, s_{i + 2}) <=  max(s_i, s_{i + 1}, s_{i + 2}, s_{i + 3}) $$\n\n\u8fd9\u4e2a\u5f0f\u5b50\u6839\u672c\u4e0d\u7528\u63a8, \u4e00\u773c\u770b\u4e0a\u53bb\u80af\u5b9a\u5c31\u6210\u7acb\u4e86\n\n\u90a3\u4e48\u6839\u636e\u8fd9\u4e2a\u6027\u8d28, \u6211\u4eec\u679a\u4e3ei\u7684\u503c, \u53ea\u9700\u8981\u627e\u5230\u4e00\u4e2a\u5bf9\u5e94\u7684j\u5c31\u884c\u4e86,\u8fd9\u4e2aj\u4e00\u5b9a\u662f\u6ee1\u8db3\u6761\u4ef6\u4e14\u6700\u5c0f\u7684\u90a3\u4e2a\u4e86\n\n\u6ee1\u8db3\u6761\u4ef6\u53ea\u9700\u8981\n\n$$ Sumf_j - sumf_i >= m $$\n\n\u6ce8: Sumf\u4ee3\u8868f\u6570\u7ec4\u7684\u524d\u7f00\u548c\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u7528 $ O(logn) $ \u7684\u590d\u6742\u5ea6\u4e8c\u5206\u67e5\u8be2\u8fd9\u4e2aj\u4e86\n\n\u6211\u4eec\u5176\u5b9e\u4e0d\u9700\u8981\u81ea\u5df1\u5199\u4e8c\u5206\u67e5\u627e,\u6839\u636e\u4e0a\u9762\u7684\u4e0d\u7b49\u5f0f,\u79fb\u4e00\u4e0b\u9879,\u5c31\u53d8\u6210\u4e86\n\n$$ Sumf_j  >= m + sumf_i $$\n\n\u7136\u540e\u4f7f\u7528STL\u81ea\u5e26\u7684lower_bound\u51fd\u6570\u5c31\u53ef\u4ee5\u4e86\n\n\u7ef4\u62a4\u533a\u95f4\u6700\u5927\u503c\u6211\u5efa\u8bae\u5199ST\u8868, \u6bd5\u7adf\u9759\u6001\u67e5\u8be2\u65f6\u95f4\u590d\u6742\u5ea6 $ O(1) $, \u4f60\u4e5f\u53ef\u4ee5\u5199\u5176\u4ed6\u7684, \u6211\u7adf\u7136\u5199\u4e86\u4e09\u79cd\u6570\u636e\u7ed3\u6784.\n\n### \u4ee3\u7801\n\n\u8fd9\u4e2a\u4ee3\u7801\u662f\u7ebf\u6bb5\u6811 + \u524d\u7f00\u548c, \u8bc4\u6d4b\u8be6\u60c5 418ms / 6MB \n\nST_Table\u4e3aST\u8868\u7684\u4ee3\u7801, \u8bc4\u6d4b\u8be6\u60c5 328ms / 9.53MB \n\nSqrt\u4e3a\u5206\u5757,\u5b9e\u5728\u6ca1\u627e\u5230\u82f1\u6587\u540d, \u8bc4\u6d4b\u8be6\u60c5 1049ms / 7.65MB \n\nm \u548c \u524d\u7f00\u548c\u8981\u5f00long long, \u5176\u4ed6\u7684\u53ef\u4ee5\u7528int, \u61d2\u5f97\u8bdd\u5c31\u5168\u90e8 long long \u5427\n\n```cpp\n\n#include <iostream>\n#include <stdio.h>\n#include <algorithm>\n#include <math.h>\nusing namespace std;\ntypedef long long ll;\nint n, f[100001], s[100001];\nll m;\ninline int maxi(int a, int b) {\n\treturn a > b ? a : b;\n}\ninline int mini(int a, int b) {\n\treturn a < b ? a : b;\n}\nnamespace PrefixSum {\n// prefixsum for f\nll sumf[100001];\nvoid init() {\n\tfor(int i= 1; i <= n; i++) sumf[i]= sumf[i - 1] + f[i];\n\treturn;\n}\n}  // namespace PrefixSum\nnamespace ST_Table {\n// ST_Table for s\nint maxs[100001][18], _log2[100001];\nvoid init() {\n\tfor(int i= 1; i <= n; i++) maxs[i][0]= s[i], _log2[i]= _log2[i - 1] + (i >= (1 << (_log2[i - 1] + 1)));\n\tfor(int j= 1; j < 18; j++)\n\t\tfor(int i= 1; i + (1 << j) <= n; i++) maxs[i][j]= maxi(maxs[i][j - 1], maxs[i + (1 << (j - 1))][j - 1]);\n\treturn;\n}\nint query(int l, int r) {\n\tint __log2= _log2[r - l + 1];\n\treturn maxi(maxs[l][__log2], maxs[r - (1 << __log2) + 1][__log2]);\n}\n}  // namespace ST_Table\nnamespace Sqrt {\n// Sqrt for s\nint blocks, maxs[100001], block[100001], bl[100001], br[100001];\nvoid init() {\n\tblocks= sqrt(n);\n\tint cnt= n / blocks + (n % blocks & 1);\n\tfor(int i= 1; i <= n; i++) block[i]= (i - 1) / blocks + 1;\n\tfor(int i= 1; i <= cnt; i++) bl[i]= (i - 1) * blocks + 1, br[i]= i * blocks;\n\tbr[cnt]= mini(n, br[cnt]);\n\tfor(int i= 1; i <= cnt; i++)\n\t\tfor(int j= bl[i]; j <= br[i]; j++) maxs[i]= maxi(maxs[i], s[j]);\n\treturn;\n}\nint query(int l, int r) {\n\tint x= block[l], y= block[r], ans= 0;\n\tfor(int i= x + 1; i < y; i++) ans= maxi(ans, maxs[i]);\n\tfor(int i= l; i <= br[x]; i++) ans= maxi(ans, s[i]);\n\tfor(int i= bl[y]; i <= r; i++) ans= maxi(ans, s[i]);\n\treturn ans;\n}\n}  // namespace Sqrt\nnamespace SegmentTree {\n// SegmentTree for s\nint maxs[100001 << 2];\nvoid build(int nown, int l, int r) {\n\tif(l == r) {\n\t\tmaxs[nown]= s[l];\n\t\treturn;\n\t}\n\tint mid= (l + r) >> 1;\n\tbuild(nown << 1, l, mid);\n\tbuild(nown << 1 | 1, mid + 1, r);\n\tmaxs[nown]= maxi(maxs[nown << 1], maxs[nown << 1 | 1]);\n\treturn;\n}\nint query(int nown, int l, int r, int ml, int mr) {\n\tif(ml <= l && r <= mr) return maxs[nown];\n\tint ans= 0, mid= (l + r) >> 1;\n\tif(mid >= ml) ans= maxi(ans, query(nown << 1, l, mid, ml, mr));\n\tif(mid < mr) ans= maxi(ans, query(nown << 1 | 1, mid + 1, r, ml, mr));\n\treturn ans;\n}\ninline void init() {\n\tbuild(1, 1, n);\n\treturn;\n}\ninline int query(int l, int r) {\n\treturn query(1, 1, n, l, r);\n}\n}  // namespace SegmentTree\nint ans= 0x7f7f7f7f;\nint main() {\n\tscanf(\"%d%lld\", &n, &m);\n\tfor(int i= 1; i <= n; i++) scanf(\"%d%d\", f + i, s + i);\n\tPrefixSum::init(), SegmentTree::init();\n\tfor(int i= 1; i <= n; i++) {\n\t\tll r= lower_bound(PrefixSum::sumf + i, PrefixSum::sumf + n + 1, m + PrefixSum::sumf[i - 1]) - PrefixSum::sumf;\n\t\tif(r != n + 1) ans= mini(ans, SegmentTree::query(i, r));\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1551965318,
        "uid": 109815,
        "name": "Ciyang",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "## \u524d\u8a00 \n\u82e5 $\\LaTeX$ \u70b8\u4e86\u8bf7\u79fb\u6b65[\u535a\u5ba2](https://www.luogu.com.cn/blog/bzlz-zdx/solution-p4085)\u3002\n## \u9898\u610f\u7b80\u8ff0\n\u9898\u76ee\u8981\u6c42\u5728\u6ee1\u8db3 $\\sum_{k=i}^{j}F_k\\ge m$ \u7684 $i,j$ \u4e2d\uff0c$\\max_{k=i}^{j}s_k$ \u7684\u6700\u5c0f\u503c\u3002\uff08\u597d\u50cf\u53ea\u662f\u628a\u9898\u76ee\u6284\u4e86\u4e00\u904d\uff09  \n## \u9898\u76ee\u5206\u6790\n\u6211\u4eec\u62c6\u89e3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u5f97\u5230\u4e24\u4e2a\u5b50\u95ee\u9898\uff1a\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$\uff0c\u6c42\u6ee1\u8db3 $\\sum_{k=i}^{j}F_k\\ge m$ \u7684 $j$\uff1b\u5bf9\u4e8e\u6bcf\u4e00\u5bf9 $i,j$\uff0c\u6c42 $\\max_{k=i}^{j}s_k$ \u7684\u6700\u5c0f\u503c\u3002  \n\n\u5bf9\u4e8e\u7b2c\u4e00\u4e2a\u5b50\u95ee\u9898\uff0c\u9996\u5148\u8003\u8651\u4e00\u4e2a\u8d2a\u5fc3\u7b56\u7565\uff1a\u5bf9\u4e8e\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684 $j$\uff0c\u9009\u62e9\u6700\u9760\u524d\u7684\u4e00\u4e2a\u5373\u53ef\u3002\u8fd9\u662f\u56e0\u4e3a\u5bf9\u4e8e\u4efb\u610f\u66f4\u9760\u540e\u7684 $j$ \u800c\u8a00\uff0c$\\max_{k=i}^{j}s_k$ \u4e00\u5b9a\u5927\u4e8e\u6216\u7b49\u4e8e\u6700\u9760\u524d\u7684 $j$\u3002\u90a3\u4e48\u6211\u4eec\u6240\u8981\u6c42\u7684\u5c31\u8f6c\u6362\u4e3a\u6ee1\u8db3 $\\sum_{k=i}^{j}F_k\\ge m$ \u7684\u7b2c\u4e00\u4e2a $j$\u3002  \n\n\u7b2c\u4e8c\u4e2a\u5b50\u95ee\u9898\u5f88\u663e\u7136\u662f\u4e00\u4e2a RMQ \u95ee\u9898\uff0c\u7531\u4e8e\u8fd9\u9053\u9898\u53ea\u6d89\u53ca\u67e5\u8be2\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u9759\u6001\u7684\u7b97\u6cd5\u6765\u89e3\u51b3\u3002\n## \u89e3\u6cd5 1\n\u5bf9\u4e8e\u9759\u6001\u7684 RMQ \u95ee\u9898\uff0c\u5f88\u660e\u663e\u53ef\u4ee5\u4f7f\u7528 ST \u8868\u6765\u89e3\u51b3\uff1b\u800c\u7531\u4e8e ST \u8868\u5df2\u7ecf\u7b5b\u51fa\u4e86 $\\log_2i(i \\in [1,n])$\uff0c\u4e14\u524d\u7f00\u548c\u5355\u8c03\u9012\u589e\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u500d\u589e\u6765\u5bfb\u627e\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$\uff0c\u6700\u9760\u524d\u800c\u7b26\u5408\u6761\u4ef6\u7684 $j$\u3002  \n\n\u5f53\u7136\uff0c\u8fd9\u91cc\u7684 RMQ \u95ee\u9898\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0d\u5e26\u4fee\u6539\u7684\u7ebf\u6bb5\u6811\u6765\u8fdb\u884c\u89e3\u51b3\uff0c\u800c\u5bfb\u627e $j$ \u7684\u8fc7\u7a0b\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e8c\u5206\u67e5\u627e\u7684\u65b9\u5f0f\u6765\u4ee3\u66ff\u3002  \n\n\u8fd9\u91cc\u7684\u89e3\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3a $\\operatorname{O}(nlogn)$\u3002  \n\n\u63a5\u4e0b\u6765\u5230\u4e86\u4ee3\u7801\u65f6\u95f4\uff08\u7136\u800c\u5e76\u6ca1\u6709\u8fd9\u73a9\u610f\u513f\uff09\u3002\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\uff1f\u5f53\u7136\u662f\u56e0\u4e3a~~\u4f5c\u8005\u592a\u61d2\u4e86~~\u6709\u66f4\u597d\u7684\u89e3\u6cd5\u3002\n## \u89e3\u6cd5 2\n\u6211\u4eec\u7ee7\u7eed\u63a2\u7a76\u524d\u7f00\u548c\u7684\u6027\u8d28\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u8fd9\u9053\u9898\u4e2d\u7684 $f_i$ \u5747\u5927\u4e8e $0$\u3002\u4e8e\u662f\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$\uff0c\u4f7f\u5f97 $\\sum_{k=i}^{j}F_k\\ge m$ \u6210\u7acb\u7684\u6700\u5c0f\u7684 $j$\uff0c\u4e00\u5b9a\u4e0d\u5927\u4e8e\u4f7f\u5f97 $\\sum_{k=i+1}^{j}F_k\\ge m$ \u6210\u7acb\u7684\u6700\u5c0f\u7684 $j$\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u60ca\u8bb6\u5730\u53d1\u73b0\uff0c\u5bfb\u627e $j$ \u7684\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u76f4\u63a5\u4ece\u4e0a\u4e00\u6b21\u627e\u5230\u7684\u4f4d\u7f6e\u5f00\u59cb\uff0c\u5373\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5c3a\u53d6\u6cd5\u6765\u5bfb\u627e $j$\u3002  \n\n\u800c\u65e2\u7136\u5de6\u53f3\u7aef\u70b9\u5747\u5355\u8c03\u9012\u589e\uff0c\u5bf9\u4e8e\u540e\u4e00\u4e2a RMQ \u5b50\u95ee\u9898\uff0c\u6211\u4eec\u81ea\u7136\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5355\u8c03\u961f\u5217\u6765\u6c42\u89e3\u3002\u6bcf\u6b21\u5c06\u5c0f\u4e8e\u5f53\u524d\u7684 $i$ \u7684\u5143\u7d20\u90fd\u5f39\u51fa\u961f\uff0c\u7136\u540e\u7ef4\u62a4\u4e00\u4e2a\u5355\u8c03\u9012\u51cf\u7684\u5e8f\u5217\uff0c\u6bcf\u6b21\u53d6\u5f97\u7684\u961f\u9996\u5143\u7d20\u5c31\u662f\u5f53\u524d\u533a\u95f4\u7684\u6700\u5927\u503c\u3002  \n\n\u8fd9\u91cc\u7684\u89e3\u6cd5\u65f6\u95f4\u590d\u6742\u5ea6\u4f18\u79c0\u4e86\u8bb8\u591a\uff0c\u4e3a $\\operatorname{O}(n)$\u3002  \n## \u4ee3\u7801\n\u8fd9\u91cc\u53ea\u9644\u89e3\u6cd5 2 \u7684\u4ee3\u7801\uff0c\u8bb0\u5f97\u5f00`long long`\u3002\n```cpp\n#include<algorithm>\n#include<cstdio>\nusing namespace std;\nlong long n,m,sum,head,tail,ans=0x7fffffff,f[100001],s[100001],que[100001];\nint main()\n{\n\tscanf(\"%lld%lld\",&n,&m);\n\tfor(long long i=1;i<=n;++i)\n\t\tscanf(\"%lld%lld\",&f[i],&s[i]);\n\tfor(long long i=1,j=0;i<=n;++i)\n\t{\n\t\tsum-=f[i-1];\n\t\twhile(head<=tail&&que[head]<i)\n\t\t\t++head;\n\t\twhile(sum<m&&j<n)\n\t\t{\n\t\t\tsum+=f[++j];\n\t\t\twhile(head<=tail&&s[que[tail]]<=s[j])\n\t\t\t\t--tail;\n\t\t\tque[++tail]=j;\n\t\t}\n\t\tif(sum<m)\n\t\t\tbreak;\n\t\tans=min(ans,s[que[head]]);\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1582245119,
        "uid": 67952,
        "name": "\u767d\u9c9f",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast G\u3011"
    },
    {
        "content": "\u4ecemax(S \ni\n\u200b\t ,S \ni+1\n\u200b\t ,...S \nj\u22121\n\u200b\t ,Sj)\u7684\u6700\u5c0f\u503c\n\u8fd9\u91cc\u53ef\u4ee5\u663e\u800c\u6613\u89c1\u7684\u770b\u51fa\u8981\u7528RMQ\n\n\u4f46\u662f\u6709\u4e00\u4e2a\u95ee\u9898\uff0cRMQ\u7684\u4f5c\u7528\u662f\u67e5\u8be2\u4ecex\u5230y\u8fd9\u4e2a\u533a\u95f4\u7684\u6700\u5927\u6216\u6700\u5c0f\u503c\n\n\u800c\uff081<=N<=100000\uff09\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u66b4\u529b\n\n\u8fd9\u91cc\u6211\u60f3\u5230\u4e86\uff0c\u5148\u679a\u4e3ex\uff0c\u7136\u540e\u4e8c\u5206\u67e5\u627ey\u70b9\uff0c\u8fd9\u6837\u53ef\u4ee5\u4f18\u5316\u5230O(n*logn)\n\n\u8fd9\u91cc\u6700\u5173\u952e\u7684\u4e00\u70b9\uff0c\u5728\u4e8e\u5728\u5de6\u7aef\u70b9\u786e\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u8fd9\u4e2a\u533a\u95f4\u8d8a\u77ed\uff0c\u624d\u80fd\u4f7f\u8fd9\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\u6700\u5c0f\n\n\u5148\u4e0a\u4ee3\u7801\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint f[100005][25];\nint F[100005],S[100005];\nlong long z[100005];\nint lg[100005];\nint find(int x,int y)\n{\n\tint s=lg[y-x+1];\n\treturn max(f[x][s],f[y-(1<<s)+1][s]);\n}\nint main()\n{\n\tint n;\n\tlong long m;\n\tscanf(\"%d%lld\",&n,&m);\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tscanf(\"%d%d\",&F[i],&S[i]);\n\t\tz[i]=z[i-1]+F[i];\n\t}\n\tlg[0]=-1;\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tf[i][0]=S[i];\n\t\tlg[i]=lg[i>>1]+1;\n\t}\n\tfor(int j=1; j<=20; j++)//ST\u9884\u5904\u7406\n\t{\n\t\tfor(int i=1; i+(1<<j)-1<=n; i++)\n\t\t{\n\t\t\tf[i][j]=max(f[i][j-1],f[i+(1<<j-1)][j-1]);\n\t\t}\n\t}\n\tint ans=1e9;//\u4e8c\u5206\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tint l=0,r=n;\n\t\tint mid;\n\t\twhile(l<=r)\n\t\t{\n\t\t\tmid=(l+r)>>1;\n\t\t\tint j=mid;//\u6ce8\u610f\uff01\uff01\uff01\u8fd9\u91cc\u679a\u4e3e\u7684\u662f\u53f3\u7aef\u70b9\n\t\t\tif(z[j]-z[i]+F[i]>=m)//\u5982\u679c\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\n\t\t\t{\n\t\t\t\tr=mid-1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tl=mid+1;\n\t\t\t}\n\t\t}\n\t\tint x=i;\n\t\tint y=l;\n\t\tif(z[y]-z[x]+F[x]<m)//\u6ce8\u610f\u8fd9\u91cc\u8fd8\u8981\u5224\u4e00\u4e0b\u7b2c\u4e00\u4e2a\u6761\u4ef6\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\t\tint s=lg[y-x+1];\n\t\tans=min(ans,find(x,y));\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1568432523,
        "uid": 89766,
        "name": "Mr_\u5b8f\u4f1f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "# Haybale Feast\n\n\u7ed9\u5b9a2\u4e2a\u7531N\u4e2a\u6570\u5b57\u7ec4\u6210\u7684\u6570\u5217F,S,\u9700\u8981\u627e\u5230\u4f7f\u5f97F(i)+F(i+1)+......+F(j-1)+F(j)\u2a7eM\u7684i,j\u5e76\u8f93\u51fa\u5728\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684i,j\u4e2d\uff0cmax(S(i),S(i+1),......,S(j-1),S(j))\u7684\u6700\u5c0f\u503c\u3002 \n\n## \u5e7f\u544a\u63d2\u5165\n\n\u5728\u6211\u7684\u535a\u5ba2\u91cc\u770b\u9898\u89e3\u4f7f\u7528\u6548\u679c\u66f4\u4f73\u54e6QwQ\n\n[\u6155\u5bb9\u7433\u7684\u540e\u82b1\u56ed](https://muronglin.top/luogu-P4085/)\n\n## \u89e3\u6cd5\n\n\u770b\u524d\u9762\u7684\u5927\u4f6c\u5199\u7684\u90fd\u662f\u7ebf\u6bb5\u6811\uff0c\u4e8c\u5206\uff0cST\u8868\uff0c\u5206\u5757\uff0c\u4f18\u5148\u961f\u5217\uff0c\u5c3a\u53d6\u6cd5\uff0c\u7136\u800c\u8fd9\u4e9b\u6211\u90fd\u4e0d\u4f1a\u554aqwq\n\n\u6211\u4eec\u6765\u6253\u66b4\u529b\u5427\uff0c\u6700\u66b4\u529b\u7684\u4e00\u79cd\u601d\u60f3\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2aS\uff0c\u4ee5\u5b83\u4e3a\u7b54\u6848\u770b\u662f\u5426\u53ef\u53d6\uff0c\u7ef4\u62a4l\u548cr\u6570\u7ec4\uff0c\u8868\u793a\u5c0f\u4e8e\u7b49\u4e8e\u5f53\u524dS[i]\u7684S\u6570\u7ec4\u7684\u5de6\u53f3\u533a\u95f4\u53ef\u4ee5\u5230\u54ea\u91cc\n\n\u7136\u540e\u7528\u524d\u7f00\u548c\u6c42\u51fa\u533a\u95f4\u548c\uff0c\u53d6\u4e00\u4e2amin\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u590d\u6742\u5ea6\u4f1a\u98d9\u5347\u5230n\u65b9\uff0c\u6211\u4eec\u5c31\u9700\u8981\u4f18\u5316\uff0c\u8fd9\u91cc\u6211\u63d0\u4f9b\u4e00\u79cd\u7384\u5b66\u590d\u6742\u5ea6\u7684\u4f18\u5316qwq\n\n\u5bf9\u4e8eS[i]\uff0c\u5982\u679cS[l[i]-1]<=S[i]\uff0c\u90a3l[i]\u5c31\u7b49\u4e8el[l[i]-1]\uff0c\u5e94\u8be5\u5f88\u597d\u7406\u89e3\uff0c\u5c31\u662f\u4e00\u4e2a\u52a8\u89c4\u4e00\u6837\u7ebf\u6027\u7684\u626b\u63cf\n\n\u8fd9\u6837\u5c31\u4f18\u5316\u6210\u4e86\u4e00\u4e2a\u7384\u5b66\u7684\u590d\u6742\u5ea6\uff0cwhile\u5faa\u73af\u7684\u590d\u6742\u5ea6\u5927\u6982\u662f\u5e38\u6570\u7ea7\u7684\u5427qwq\n\n## ac\u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nlong long a[100010],f[100010],l[100010],r[100010],n,m,ans=0;\nint main()\n{\n    memset(f,0x3f,sizeof(f)),scanf(\"%lld%lld\",&n,&m);\n    for(long long j=1;j<=n;j++)scanf(\"%lld%lld\",&a[j],&f[j]),a[j]+=a[j-1];\n    for(long long j=1;j<=n;j++)l[j]=r[j]=j;\n    l[0]=1,r[n+1]=n;\n    for(long long j=1;j<=n;j++)while(f[l[j]-1]<=f[j])l[j]=l[l[j]-1];\n    for(long long j=n-1;j>=1;j--)while(f[r[j]+1]<=f[j])r[j]=r[r[j]+1];\n    for(long long j=1;j<=n;j++)if(a[r[j]]-a[l[j]-1]>=m&&f[j]<f[ans])ans=j;\n    printf(\"%lld\\n\",f[ans]);\n    return 0;\n}\n```",
        "postTime": 1553215914,
        "uid": 24663,
        "name": "\u6ce0\u5c0f\u6bd2",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "**\u77e5\u8bc6\u70b9\uff1a\u524d\u7f00\u548c \u6a21\u62df**  ~~\u778e\u8bf4~~\n\n\u6211\u4eec\u60f3\uff1a\u6211\u4eec\u6307\u5b9a\u4e00\u4e2a\u6570\u4e3a\u5408\u6cd5\u533a\u95f4\u7684\u6700\u5927\u503c\n\n\u8fd9\u4e2a\u6570\u8d8a\u5c0f\u8d8a\u597d \u6240\u4ee5\u6211\u4eec\u5c31\u5148\u6309\u7167 s[i] \u6392\u5e8f\n\n\u4ece\u6700\u5c0f\u7684\u5f00\u59cb \u5f53\u4f5c\u5408\u6cd5\u533a\u95f4\u7684\u6700\u5927\u503c\n\n**\u6ce8\u610f\uff1a\u9700\u8981\u518d\u8fd4\u56de\u539f\u6570\u7ec4\u67e5\u8be2 \u6240\u4ee5\u5148\u5b58\u5230\u522b\u7684\u6570\u7ec4\u91cc(w[i]) \u7528\u7ed3\u6784\u4f53\u8bb0\u4f4f\u539f\u6765\u7684\u6807\u53f7\u548c s[i] \u4e2d\u7684\u6570\u636e**\n\n\u65e2\u7136\u6211\u4eec\u5df2\u7ecf\u6307\u5b9a\u4e86\u533a\u95f4\u7684\u6700\u5927\u503c \u6240\u4ee5\u5c31\u4ece\u8fd9\u4e2a\u4f4d\u7f6e\u5411\u5de6\u5411\u53f3\u6269\u5c55\n\n\u5982\u679c\u6709\u6bd4\u8fd9\u4e2a\u6570\u636e\u5927\u7684 \u6211\u4eec\u5c31\u505c\u6b62\u6269\u5c55\n\n\u8fd9\u6837\u5c31\u80fd\u6269\u5c55\u51fa\u4e00\u4e2a\u533a\u95f4 [L,R]\n\n**\u7136\u540e\u7528\u524d\u7f00\u548c \u6c42\u51fa[L,R]\u533a\u95f4\u4e0a\u7684\u548c \u518d\u68c0\u9a8c\u662f\u5426\u5408\u6cd5**\n\n\u6700\u540e\u8f93\u51fa\u6211\u4eec\u5f00\u59cb\u6269\u5c55\u7684\u4f4d\u7f6e\u7684\u6570\u636e\u5c31\u53ef\u4ee5AC\u4e86\uff01\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#include<algorithm>\n#include<queue> \n#define MAXN 100005\n#define LL long long\n#define INF 2147483640\n#define MOD 100000007\n#define free(s) freopen(\"s.txt\",\"r\",stdin);\n#define init(n) scanf(\"%d\",&n);\n#define ans() printf(\"%d\",ans);\n#define initt(n,m) scanf(\"%lld%lld\",&n,&m);\nusing namespace std;\nstruct ppp{\n\tLL int num,data;\n};\nbool cmp(const ppp &a,const ppp &b){\n\treturn a.data<b.data;\n}\nconst int L=1e+5;\nLL int n,m,f[L],s[L],sum[L];\nppp w[L];\nLL int work(ppp x)\n{\n\tint mid,l,r;\n\tmid=l=r=x.num;\n\tfor(int j=mid-1;j>=1;j--)\n\t{\n\t\tif(s[j]>x.data)\n\t\t\tbreak;\n\t\tl=j;\n\t}\n\tfor(int j=mid+1;j<=n;j++)\n\t{\n\t\tif(s[j]>x.data)\n\t\t\tbreak;\n\t\tr=j;\n\t}\n\tif(sum[r]-sum[l-1]>=m)\n\t\treturn x.data;\n\treturn -1;\n}\nint main()\n{\n\tinitt(n,m);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%lld%lld\",&f[i],&s[i]);\n\t\tsum[i]=sum[i-1]+f[i];\n\t\tw[i].data=s[i];\n\t\tw[i].num=i;\n\t}\n\tsort(w+1,w+n+1,cmp);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tLL int t=work(w[i]);\n\t\tif(t!=-1)\n\t\t{\n\t\t\tprintf(\"%lld\",t);\n\t\t\treturn 0;\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1525254459,
        "uid": 37427,
        "name": "\u66f9\u8001\u5e08",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "**\u3010\u76ee\u5f55\u3011\uff1a**\n\n$(1)$\u5c3a\u53d6\u6cd5\n\n$(2)ST$\u8868\n\n$(3)$\u672c\u9898\u9898\u89e3\n\n------------\n### \u5c3a\u53d6\u6cd5\n\n\u5c3a\u53d6\u6cd5\u662f\u4e00\u79cd**\u7ebf\u6027**\u7b97\u6cd5\u3002\u8bb0$(l,r)$\u4e3a\u4e00\u4e2a\u5e8f\u5217\u5185\u4ee5$l$\u4e3a\u8d77\u70b9\u7684**\u6700\u77ed**\u5408\u6cd5\u533a\u95f4\uff0c\u5982\u679c\u6709$r$\u968f$l$\u7684\u589e\u5927\u800c\u589e\u5927\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u5c3a\u53d6\u6cd5\u3002\u5177\u4f53\u7684\u505a\u6cd5\u5c31\u662f\u4e0d\u65ad\u7684\u679a\u4e3e$l$\uff0c\u540c\u65f6\u6c42\u51fa$r$\u3002\u56e0\u4e3a$r$\u968f$l$\u589e\u5927\u800c\u589e\u5927\uff0c\u6240\u4ee5$r$\u53ea\u6709$n$\u6b21\u53d8\u5316\u7684\u673a\u4f1a\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(n)$\u3002\n\n------------\n### $ST$\u8868\n\n$ST$\u8868\u7684\u672c\u8d28\u5c31\u662f$dp$\uff0c\u662f\u6c42\u89e3\u6ca1\u6709**\u4fee\u6539**\u7684$RMQ$\u95ee\u9898\u7684\u6709\u529b\u6b66\u5668\u3002\u8bb0$f[i][j]$\u8868\u793a$a[i...i+2^j-1]$\u4e2d\u7684**\u6700\u5927\u3001\u6700\u5c0f**\u503c\u3002\n\n\u4ee5\u4e0b\u7528\u6700\u5c0f\u503c\u4e3a\u4f8b\uff0c\u8bb2\u8bb2$ST$\u8868\u3002\n\n\u8f6c\u79fb\uff1a$f[i][j]=min(f[i][j-1],f[i+2^{j-1}][j-1])$\n\n\u6c42\u6700\u5c0f\u503c\uff1a$s=log y-x+1,min(a[x..y])=min(f[x][s],f[y-2^s+1][s])$\n\n------------\n### \u672c\u9898\u89e3\u6cd5\n\n\u56e0\u4e3a\u9009\u7684\u6570\u5b57\u8d8a\u591a\uff0c\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u8d8a\u5c0f\uff0c\u800c\u4e14\u56e0\u4e3a\u6570\u5b57\u975e\u8d1f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528**\u5c3a\u53d6\u6cd5**\u5148\u6c42\u51fa\u5408\u6cd5\u7684\u533a\u95f4$[l,r]$\uff0c\u7136\u540e\u7528$ST$\u8868\u6c42\u51fa\u533a\u95f4$[l,r]$\u4e2d\u7684\u6700\u5c0f\u503c\u3002\n\n\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(N+N \\times log N)=O(N\\times logN)$\n\n------------\n**\u3010\u4ee3\u7801\u3011\uff1a**\n```cpp\n#define ll long long\n#define gc getchar()\n#define g(c) isdigit(c)\ninline ll read(){\n\tchar c=0;ll x=0;bool f=0;\n\twhile (!g(c)) f=c=='-',c=gc;\n\twhile (g(c)) x=x*10+c-48,c=gc;\n\treturn f?-x:x;\n}\nconst int N=100100;\nconst int LogN=22;\nll f[N][LogN],Log[N];\nll sum[N],s[N],m;int n;\ninline void init_st_algorithm(){\n\tLog[0]=-1;//Let Log[1]=0.\n\tfor(int i=1;i<=n;i++)\n\t\tLog[i]=Log[i>>1]+1;\n\tfor(int i=1;i<=n;i++)\n\t\tf[i][0]=s[i];\n\tfor(int j=1;j<=20;j++)\n\t\tfor(int i=1;i+(1<<j)-1<=n;i++)\n\t\t\tf[i][j]=max(f[i][j-1],f[i+(1<<j-1)][j-1]);\n}\ninline ll query(int x,int y){\n\tregister int s=Log[y-x+1];\n\treturn max(f[x][s],f[y-(1<<s)+1][s]);\n}\ninline void read_the_data(){\n\tn=read();m=read();\n\tfor(int i=1;i<=n;i++){\n\t\tsum[i]=sum[i-1]+read();\n\t\ts[i]=read();\n\t}\n}\ninline void print_answer(){\n\tregister ll ans=-1ll;\n\tfor(int i=1;i<=n;i++)\n\t\tans=max(ans,s[i]+1);\n\tfor(int l=1,r=1;l<=n;l++){\n\t\twhile (r<=n&&sum[r]-sum[l-1]<m) r++;\n\t\tif (r<=n) ans=min(ans,query(l,r-1));\n\t}\n\tprintf(\"%lld\",ans);\n}\ninline int HPXXZYY(){\n\tread_the_data();\n\tinit_st_algorithm();\n\tprint_answer();\n\treturn 0;\n}\nint main(){\n//\tfreopen(\"t1.in\",\"r\",stdin);\n\treturn HPXXZYY();\n} \n```",
        "postTime": 1574845721,
        "uid": 95624,
        "name": "HPXXZYY",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "### \u5355\u8c03\u961f\u5217  \uff0c St\u8868\u7ef4\u62a4\uff1b\n\n1. \u5982\u679c(i,j)\u7b26\u5408\u6761\u4ef6\u7684\u8bdd\uff0c \u90a3\u4e48(i-1,j),(i-2,j),(i-3,j)...(1,j)\u4e00\u5b9a\u4e0d\u5982(i,j)\u6548\u679c\u597d\uff1b\n\n2. \u5355\u8c03\u961f\u5217\u7ef4\u62a4\u7684\u5185\u5bb9\u662f\uff08Head\uff0c Tail\uff09\u7684 F \u503c\u548c\u5c0f\u4e8e\u7b49\u4e8eM \uff0c \u90a3\u4e48 \uff08Head-1\uff0c Tail\uff09\u5927\u4e8eM\uff0c\u7b26\u5408\u6761\u4ef6 \uff1b\n\n3. \u7528St\u8868\u6c42\u6700\u5c0f\u503c \uff0c \u66f4\u65b0\u7b54\u6848\u5373\u53ef\uff1b\n\n\n------------\n\n\n```cpp\n#include <iostream>\n#include <fstream>\n#include <algorithm>\n#include <stdio.h>\n#include <math.h>\n#include <string.h>\n#define re register\n#define gc getchar()\n#define int long long\nusing namespace std ;\nint Qread () {\n\tint x = 0,f = 1;\n\tchar ch = gc ;\n\twhile (ch > '9' || ch < '0') ch = gc ;\n\twhile (ch >= '0' && ch <= '9') {\n\t\tx = x * 10 + ch - '0' ;\n\t\tch = gc ;\n\t}\n\treturn x *f ;\n}\nconst int maxn = 100005   ,maxlg = 18;\n int INF = 1e18+2 ;\nint F[maxn] , S[maxn] , N ,M  ,Tail = 0 ,Head = 1 ,Q[maxn],Lg[maxn] = {0} ;\nint Sum[maxn] = {0} ;\nint St[maxn][maxlg+2] ;\n/*\n\u4ee5\u4e0a\u662f\u51c6\u5907\u5de5\u4f5c\nint Qread () \u8bfb\u5165\u4f18\u5316\uff0c\u53ef\u4ee5\u7528cin\u4ee3\u66ff \uff1b \nF[],S[],N,M\u7684\u542b\u4e49\u548c\u4f53\u9762\u76f8\u540c \uff1b\nHead , Tail\u5206\u522b\u662f\u5355\u8c03\u961f\u5217\u7684\u9996\u5c3e\u6307\u9488 \nSt[][] , Lg[]\u662fSt\u8868\u548c\u9884\u5904\u7406\u51fa\u76841\u2014N\u7684log\u503c \n*/ \nint Ask (int L , int R) {\n\tint Ans1 = St[L][Lg[R-L]] ;\n\tint Ans2 = St[R - (1 << Lg[R-L])+1][Lg[R-L]] ;\n\treturn max (Ans1 , Ans2) ;\n}\n/*\nint Ask(int,int)\u662fSt\u8868\u7684\u67e5\u8be2\u64cd\u4f5c \uff0c \u5927\u6982\u601d\u8def\u5c31\u662f\u628a\u8be2\u95ee\u533a\u95f4\u5206\u6210\u4e24\u4e2a\u4e8c\u7684\u6574\u6570\u6b21\u65b9\u90e8\u5206\uff1b\n\u4ee5\u4e0b\u662f\u4e3b\u51fd\u6570 \n*/ \nsigned main () {\n\t///freopen (\"P4085.txt\" , \"r\" , stdin) ;\n\t// freopen (\"my.out\" , \"w\" , stdout) ;\n\tN = Qread () , M = Qread();\n\tmemset (St , 0 ,sizeof (St)) ;\n\tmemset (Lg , -1 ,sizeof (Lg)) ;\n\tfor (re int i = 0; i <= maxlg ; ++ i) {\n\t\tint Now = 1 << i ;\n\t\tif (Now <= N) Lg[Now] = i ;\n\t\telse break ;\n\t}\n\tfor (re int i = 0; i <= N ; ++ i) {\n\t\tif (Lg[i] == -1) Lg[i] = Lg[i-1] ;\n\t}\n\tfor (re int i = 1 ; i <= N ; ++ i) {\n\t\tF[i] = Qread () , S[i] = Qread () ;\n\t\tSum[i] = Sum[i-1] + F[i] ;\n\t\tSt[i][0] = S[i] ;\n\t}\n\tfor (re int i = 1 ; i <= maxlg ; ++ i) {\n\t\tfor (re int j = 1;  j <= N; ++ j) {\n\t\t\tif (j+(1 << i) <=N+1)\tSt[j][i] = max (St[j][i-1] , St[j+(1 << (i-1))][i-1]) ;\n\t\t}\n\t}\n/*\n\u51c6\u5907\u5de5\u4f5c\u548c\u9884\u5904\u7406St\u8868\u3001\u524d\u7f00\u548c \n*/\n\tint Ans = INF ;\n\tfor (re int i = 1; i <=N ; ++ i) {\n\t\twhile (Sum[i] - Sum[Q[Head] -1] >= M&& Head <= Tail) ++ Head ;\n\t\tQ[++Tail] = i ;\n\t\tif (Sum[i] - Sum[Q[Head-1] - 1] >= M) {\n\t\t\tAns = min (Ans , Ask (Q[Head-1] , Q[Tail])) ;\n\t\t}\n\t}\n/*\n\u6309\u7167\u4e4b\u524d\u7684\u5206\u6790\u6784\u9020\u4f18\u5148\u961f\u5217\u6c42\u89e3 \n*/\n\tcout << Ans<<endl;\n\tfclose (stdin) ;\n\tfclose (stdout);\n\treturn 0;\n}\n```",
        "postTime": 1543752948,
        "uid": 35219,
        "name": "Baihua",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "\u4e3a\u4ec0\u4e48\u4f60\u4eec\u90fd\u662f\u7528\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u4e86\u4e00\u4e0b\u7684\u554a\u2026\u2026\n\n\u5c31\u6211\u4e00\u4e2a\u849f\u84bb\u662f\u7528\u5c3a\u53d6\u6cd5\u76f4\u63a5\u7ef4\u62a4\u7684\u5417\u2026\u2026\uff08\u5c0f\u58f0BB\uff09\n\n\uff08\u6211\u679c\u7136\u592a\u83dc\u4e86\uff09\n\n\u5b9e\u9645\u4e0a\u8fd9\u9898\u7528\u7ebf\u6bb5\u6811\u4e4b\u7c7b\u7684\u7ef4\u62a4\u662f\u6709\u70b9\u5927\u6750\u5c0f\u7528\u4e86\uff0c\u6211\u4eec\u5176\u5b9e\u5728\u5c3a\u53d6\u7684\u65f6\u5019\u7ef4\u62a4\u4e00\u4e0b\u603b\u548c\uff0c\u7136\u540e\u518d\u7ef4\u62a4\u4e00\u4e2a\u5927\u6839\u5806\u5c31\u53ef\u4ee5\u4e86QwQ\n\n\u90a3\u4e48\u6211\u4eec\u600e\u4e48\u5728\u8fd9\u4e2a\u5806\u91cc\u9762\u5220\u9664\u5143\u7d20\u5462\uff1f\n\n\u6211\u4eec\u53ea\u9700\u8981\u7ed9\u5df2\u7ecf\u5220\u9664\u7684\u5143\u7d20\u6253\u4e0a\u4e00\u4e2a\u6807\u8bb0\uff0c\u7136\u540e\u6211\u4eec\u5728\u4e0b\u6b21\u67e5\u8be2\u5806\u9876\u5143\u7d20\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u9700\u8981\u770b\u4e00\u4e0b\u5806\u9876\u5143\u7d20\uff0c\u5982\u679c\u5b83\u5df2\u7ecf\u88ab\u5220\u6389\u4e86\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u76f4\u63a5\u628a\u5b83$pop()$\u6389\uff0c\u4e4b\u540e\u6211\u4eec\u518d\u91cd\u590d\u4e00\u5f00\u59cb\u7684\u67e5\u8be2\uff0c\u76f4\u5230\u5806\u9876\u5143\u7d20\u6ca1\u6709\u88ab\u5220\u9664\u7684\u6807\u8bb0\u5c31\u884c\u4e86\n\n```cpp\n#include<bits/stdc++.h>\n\n#define ll long long\n#define INF 2147483647\n\nll Inp(){\n    char c = getchar();\n    while(c < '0' || c > '9')\n        c = getchar();\n    ll Sum = 0;\n    while(c >= '0' && c <= '9'){\n        Sum = Sum * 10 + c - '0';\n        c = getchar();\n    }\n    return Sum;\n}\n\nint f[100010];\nint s[100010];\n\nstruct Node{\n    int k; // \u7ef4\u62a4\u4e00\u4e0b\u8fd9\u4e2a\u6570\u5b57\u7684\u4f4d\u7f6e\uff08\u4e3a\u4e86\u65b9\u4fbf\u67e5\u8be2\u6709\u65e0\u5df2\u5220\u9664\u6807\u8bb0\uff09\n    int x;\n    bool operator < (const Node &b) const {\n        return x < b.x;\n    }\n};\n\nstd::priority_queue<Node> Heap;\n\nint main(){\n    ll Sum = 0;\n    int n = Inp();\n    ll m = Inp();\n    for(int i = 1; i <= n; i++){\n        f[i] = Inp();\n        s[i] = Inp();\n    }\n    int r = 0;\n    int Ans = INF;\n    for(int l = 1; l <= n; l++){\n        while(r <= n && Sum < m){\n            Sum += f[++r];\n            Heap.push((Node){r, s[r]});\n        }\n        if(Sum < m)\n            break;\n        Sum -= f[l];\n        while(Heap.top().k < l) // \u5982\u679c\u5806\u9876\u5143\u7d20\u7684\u4f4d\u7f6e\u5728l\u524d\u9762\uff0c\u90a3\u4e48\u8bf4\u660e\u5b83\u5e94\u8be5\u5df2\u7ecf\u88ab\u5220\u9664\u4e86\n            Heap.pop();\n        Ans = std::min(Ans, Heap.top().x);\n    }\n    printf(\"%d\", Ans);\n}\n\n```",
        "postTime": 1543197272,
        "uid": 36362,
        "name": "Dilute",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "\u6211\u4eec\u663e\u7136\u53ef\u4ee5\u5f97\u77e5\u5f53f[i~j]\u76f8\u52a0>=m\u65f6\uff0cj\u8d8a\u5c0f\u6240\u53d6\u8fd9\u4e00\u6bb5\u7684max(s[i~j])\u4e5f\u5c31\u8d8a\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2a~~\u7b80\u5355\u7684~~\u500d\u589e\u6765\u9884\u5904\u7406RMQ\uff0c\u7528sum\u524d\u7f00\u548c\u6765\u9884\u5904\u7406\uff0c\u4e4b\u540e\u4e8c\u5206j\u5c31\u53ef\u4ee5\u4e86\uff08\u4e0d\u4e8c\u5206\u4f1aT\uff09\n\n\u500d\u589e\u6c42RMQ\u548c\u524d\u7f00\u548c\u548c\u4e8c\u5206\u82e5\u4e0d\u61c2\u53ef\u4ee5\u81ea\u884cbaidu\n\n\u849f\u84bb\u7684code\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\nusing namespace std;\nint n;\nlong long m;\nlong long f[100001],s[100001];\nlong long sum[100001];\nlong long maxn[100001][18];\nint k;\nlong long ans=999999999;\nvoid RMQ_ST()\n{\n  k=int(log(n)/log(2.0));\n  for(int j=1;j<=k;j++)\n    for(int i=1;i+(1<<j)-1<=n;i++)\n\t  maxn[i][j]=max(maxn[i][j-1],maxn[i+(1<<j>>1)][j-1]);\n}\nint two_find(int x,int le,int ri)\n{\n  long long t=-1;\n  while(le<=ri)\n  {\n    int mid=(le+ri)>>1;\n    if(sum[mid]-sum[x-1]>=m) t=mid,ri=mid-1;\n\telse le=mid+1;\n  }\n  return t;\n}\nint main()\n{\n  scanf(\"%d%lld\",&n,&m);\n  for(int i=1;i<=n;i++)\n    scanf(\"%lld%lld\",&f[i],&s[i]),sum[i]=sum[i-1]+f[i],maxn[i][0]=s[i];\n  RMQ_ST();\n  for(int i=1;i<=n;i++)\n  {\n    int j=two_find(i,i,n);\n\tif(j==-1) continue;\n\tk=int(log(j-i+1)/log(2.0));\n\tans=min(ans,max(maxn[i][k],maxn[j-(1<<k)+1][k]));\n  }\n  printf(\"%lld\",ans);\n  return 0;\n}\n\n```\n\u6700\u540e\u4e5f\u795d\u5927\u5bb6NOIP2018RP++^_^",
        "postTime": 1540907698,
        "uid": 71100,
        "name": "\u8001\u5eb7",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    },
    {
        "content": "\u4e00\u9053\u6570\u636e\u7ed3\u6784\u7684\u597d\u9898\u3002\n\n\u7ffb\u8bd1\u91cc\u8bb2\u5f97\u5f88\u660e\u767d\uff0c\u6211\u4eec\u7684\u6570\u636e\u7ed3\u6784\u5e94\u652f\u6301\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n\n- \u533a\u95f4\u67e5\u548c\n\n- \u533a\u95f4\u6c42\u6700\u5927\u503c\n\n\u56e0\u4e3a\u662f\u9759\u6001\u533a\u95f4\uff0c\u6ca1\u6709\u4fee\u6539\u64cd\u4f5c\uff0c\u6240\u4ee5\u533a\u95f4\u67e5\u548c\u53ef\u4ee5\u7528\u524d\u7f00\u548c\uff0c\u533a\u95f4\u6700\u503c\u53ef\u4ee5\u4f7f\u7528ST\u8868\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3aO($1$)\u3002\n\n\u63a5\u7740\u6765\u770b\u6240\u6c42\uff0c\u6240\u6c42\u7684\u662f\u533a\u95f4\u6700\u5927\u503c\u7684\u6700\u5c0f\u503c\u3002\u6211\u4eec\u4e0d\u59a8\u679a\u4e3e\u533a\u95f4\u7684\u5de6\u7aef\u70b9 $i$\uff0c\u518d\u679a\u4e3e\u533a\u95f4\u53f3\u7aef\u70b9 $j$\uff0c\u7136\u540e\u5224\u65ad\u533a\u95f4\u548c\u662f\u5426\u5927\u4e8e $M$\uff0c\u5982\u679c\u7b26\u5408\u6761\u4ef6\u5c31\u7b97\u533a\u95f4\u6700\u5927\u503c\u2026\u2026\n\n\u7b49\u7b49\uff01\u9898\u76ee\u5f53\u4e2d\u7684 $N$\u53ef\u662f10W\u554a\uff0c\u8fd9\u6837O( $N^{2}$)\u7684\u7b97\u6cd5\u5fc5\u5b9a\u4f1a\u65f6\u95f4\u8d85\u9650\u3002\u8be5\u5982\u4f55\u4f18\u5316\u5462\uff1f\n\n\u6211\u4eec\u9700\u8981\u6700\u5927\u503c\u7684\u6700\u5c0f\u503c\u3002\u5982\u679c\u6211\u4eec\u786e\u5b9a\u4e86 $i$\uff0c\u90a3\u4e48\u6211\u53ea\u80fd\u4e00\u76f4\u5f80\u53f3\u8d70\uff0c\u53ea\u80fd\u4e0d\u65ad\u5730\u589e\u52a0\u6570\u5b57\u3002\u800c\u6700\u5927\u503c\u5728\u8fd9\u4e4b\u4e2d\u662f\u5355\u8c03\u9012\u589e\u7684\uff0c\u56e0\u4e3a\u6700\u5927\u503c\u4e0d\u4f1a\u88ab\u53bb\u6389\uff0c\u53ea\u4f1a\u88ab\u65b0\u8fdb\u7684\u90a3\u4e2a\u6570\u6240\u53d6\u7f14\u3002\u90a3\u4e48\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e2a $i$\uff0c\u53ea\u8981\u627e\u5230\u4e00\u4e2a $j$\uff0c\u4f7f\u5f97\n$ \\sum_{k=i}^{j}F_k\\geqslant M$\uff08\u9898\u4e2d\u6240\u7ed9\u6761\u4ef6\uff09\uff0c\u4e14 $j$\u5c3d\u91cf\u5c0f\u3002\u8fd9\u4e00\u6bb5\u6700\u5927\u503c\u5c31\u662f\u5de6\u7aef\u70b9\u662f $i$\u80fd\u53d6\u5230\u7684\u6700\u5927\u503c\u3002\u800c\u8fd9\u4e2a $j$\u53ef\u4ee5\u7528\u4e8c\u5206\u5728O( $ \\log N$)\u5185\u5feb\u901f\u6c42\u5f97\u3002\n\n\u6700\u540e\u679a\u4e3e\u6240\u6709\u7684\u5de6\u7aef\u70b9\uff0c\u6bcf\u4e2a\u6700\u5927\u503c\u7684\u6700\u5c0f\u503c\u5c31\u662f\u7b54\u6848\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\nusing namespace std;\n\ntypedef long long llt;\n\nconst int maxn=100000, maxlog=20;\nint n;\nllt m;\nint F[maxn+1], S[maxn+1];\nint dp[maxlog+1][maxn+1];\nllt sum[maxn+1];\n\nvoid init() {\n    scanf(\"%d%lld\",&n,&m);\n    memset(dp,-1,sizeof(dp));\n    for (int i=1; i<=n; i++) {\n        scanf(\"%d%d\",&F[i],&S[i]);\n        dp[0][i]=S[i];\n        sum[i]=sum[i-1]+F[i];\n    }\n    for (int i=1; (1<<i)<=n; i++)\n        for (int j=1; j+(1<<i)-1<=n; j++)\n            dp[i][j]=max(dp[i-1][j],dp[i-1][j+(1<<(i-1))]);\n}\n\nint RMQ(int left, int right) {\n    int k=31-__builtin_clz(right-left+1);\n    return max(dp[k][left],dp[k][right-(1<<k)+1]);\n}\n\nvoid solve() {\n    int ans=0x7F7F7F7F;\n    for (int i=1; i<=n; i++) {\n        int lbound=i, rbound=n, j=0;\n        while (lbound<=rbound) {\n            int mid=lbound+rbound>>1;\n            if (sum[mid]-sum[i-1]>=m) {\n                j=mid;\n                rbound=mid-1;\n            } else lbound=mid+1;\n        }\n        if (j==0) continue;\n        ans=min(ans,RMQ(i,j));\n    }\n    printf(\"%d\\n\",ans);\n}\n\nint main() {\n    init();\n    solve();\n    return 0;\n}\n```",
        "postTime": 1518094913,
        "uid": 48843,
        "name": "Tweetuzki",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4085 \u3010[USACO17DEC]Haybale Feast\u3011"
    }
]
[
    {
        "content": "\u628a\u6c47\u7387\u8868\u62bd\u8c61\u6210\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u6bcf\u4e2a\u8d27\u5e01\u662f\u4e00\u4e2a\u7ed3\u70b9\uff0c\u6bcf\u6761\u8fb9\u4e0a\u7684\u6743\u503c\u5c31\u662f\u6c47\u7387\u3002\n\n\u65e0\u6cd5\u5957\u5229\u7684\u60c5\u51b5\u5206\u4e24\u79cd\n\n1\u3001\u6ca1\u6709\u73af\uff0c\u5373\u6700\u540e\u65e0\u6cd5\u56de\u5230\u8be5\u79cd\u8d27\u5e01\n\n2\u3001\u6709\u73af\uff0c\u4f46\u662f\u5f97\u5230\u7684\u5229\u7387\u4e0d\u5927\u4e8e1\n\n\u6211\u4eec\u53ef\u4ee5\u8dd1\u4e00\u904d\u5355\u6e90\u6700\u957f\u8def\uff0c\u7528SPFA\u6765\u5224\u73af\uff0c\u53ea\u662f\u4e00\u822c\u7684\u677e\u5f1b\u6761\u4ef6\u4e2d\u7684\u52a0\u53f7\u9700\u8981\u6539\u6210\u4e58\u53f7\u3002\n\n\u53ef\u4ee5\u8bc1\u660e\u5982\u679c\u73af\u4e0a\u6240\u6709\u8fb9\u7684\u6743\u503c\u4e4b\u79ef\u5927\u4e8e1\uff0c\u90a3\u4e48\u4e00\u5b9a\u53ef\u4ee5\u7528SPFA\u5224\u5b9a\u51fa\u6709\u5411\u56fe\u4e2d\u5b58\u5728\u73af\n\n```cpp\n\n(\n#include <map>\n#include <deque>\n#include <string>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n\nusing namespace std;\n\nconst size_t Max_N(35);\nconst size_t Max_M(10000);\n\nsize_t Adj[Max_M], Next[Max_M], Head[Max_N];\ndouble Weight[Max_M];\n\ndouble Dist[Max_N];\nbool In_queue[Max_N];\nunsigned int Times[Max_N];\n\nunsigned int n, m;\n\nunsigned int fu;\n\nbool spfa(const size_t &S)\n{\n    memset(Dist, 0, sizeof(Dist));\n    memset(In_queue, 0, sizeof(In_queue));\n    memset(Times, 0, sizeof(Times));\n    std::deque<size_t> Q;\n    \n    Dist[S] = 1.0;\n    In_queue[S] = true;\n    Q.push_back(S);\n    Times[S] = 1;\n    \n    while (!Q.empty())\n    {\n        size_t top = Q.front();\n        In_queue[top] = false;\n        Q.pop_front();\n        \n        for (int i = Head[top];i != 0;i = Next[i])\n            if (Dist[Adj[i]] < Dist[top] * Weight[i])\n            {\n                Dist[Adj[i]] = Dist[top] * Weight[i];\n                if (!In_queue[Adj[i]])\n                {\n                    In_queue[Adj[i]] = true;\n                    Q.push_back(Adj[i]);\n                    ++Times[Adj[i]];\n                    if (Times[Adj[i]] >= n)\n                        return true;\n                }\n            }\n    }\n    \n    return false;\n}\n\nint main()\n{\n    while (cin >> n, n)\n    {\n        unsigned int tot = 0;\n        ++fu;\n        memset(Adj, 0, sizeof(Adj));\n        memset(Next, 0, sizeof(Next));\n        memset(Head, 0, sizeof(Head));\n        memset(Weight, 0, sizeof(Weight));\n        map<string, unsigned int> v;\n        string b, e;\n        double number;\n        for (unsigned int i = 1;i <= n;++i)\n            v[(cin >> b), b] = i;\n        cin >> m;\n        while (m--)\n        {\n            ++tot;\n            cin >> b >> number >> e;\n            Adj[tot] = v[e];\n            Weight[tot] = number;\n            Next[tot] = Head[v[b]];\n            Head[v[b]] = tot;\n        }\n        for (unsigned int i = 1;i <= n;++i)\n            if (spfa(i))\n            {\n                printf(\"Case %u: Yes\\n\", fu);\n                goto loop;\n            }\n        printf(\"Case %u: No\\n\", fu);\n        loop:\n            ;\n    }\n    \n    return 0;\n}\n)\n\n```",
        "postTime": 1439383891,
        "uid": 3182,
        "name": "Created_equal1",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P1931 \u3010\u5957\u5229\u3011"
    },
    {
        "content": "[P1931\u5957\u5229](https://www.luogu.org/problemnew/show/P1931)\n## \u7ffb\u4e86\u4e00\u4e0b\u9898\u89e3\uff0c\u53ea\u6709\u4e00\u7bc7\uff0c\u800c\u4e14\u662fSPFA\uff0c\u90a3\u4e48\u6211\u5c31\u7528Floyed\u6765\u8dd1\u4e00\u4e0b\u8fd9\u9053\u9898\n## \u5148\u770b\u4e00\u4e0b\u6570\u636e\u8303\u56f4N<30,Floyed\u8dd1\u4e00\u904d\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u6982\u4e3aO\uff08n^3\uff09:\n## 30^3=27000,\u663e\u7136\u4e0d\u4f1a\u8d85\u65f6\u5440\uff01\n## \u90a3\u4e48\u6211\u4eec\u53ea\u8981\u8dd1\u4e00\u904dFloyed\u6700\u957f\u8def,\u540c\u65f6\u8ba1\u7b97\u6700\u5927\u7684\u53ef\u4ee5\u8f6c\u6362\u5230\u7684\u94b1\uff0c\u4e0e1\u6bd4\u8f83\u4e00\u4e0b\u5927\u5c0f\uff0c\u5982\u679c>1,\u663e\u7136\u53ef\u4ee5\u5b9e\u73b0\u5957\u5229\u5440\uff01\n## \u6211\u4eec\u5148\u6765\u770b\u4e00\u4e0bFloyed\u8fd9\u90e8\u5206\u7684CODE\uff1a\n```cpp\nbool floyd(){//Floyed\u5355\u5143\u6700\u957f\u8def\n\tint i,j,k;\n\tfor(int k=1;k<=n;k++)\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tif(a[i][j]<a[i][k]*a[k][j]){\n\t\t\t\t\ta[i][j]=a[i][k]*a[k][j];//\u8ba1\u7b97\u5404\u8f6c\u6362\u8d27\u5e01\u5f97\u5230\u7684\u6700\u5927\u503c\n\t\t\t\t}\n\t\t\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(a[i][i]>1)//\u5982\u679c\u8f6c\u6362\u6765\u7684\u94b1\u5927\u4e8e1\uff0c\u5c31\u5b9e\u73b0\u4e86\u5957\u5229\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n```\n## \u7136\u540e\u6211\u4eec\u6765\u770b\u4e00\u4e0b\u5982\u4f55\u6765\u5efa\u56fe\uff0c\u5148\u770b\u4e00\u4e0b\u8fd9\u90e8\u5206\u7684CODE\uff1a\n```cpp\nvoid addEdge(char str1[],double x,char str2[]){\n\tstring s1=str1;\n\tstring s2=str2;//\u5148\u8bb0\u5f55\u4e0b\u4e24\u79cd\u8d27\u5e01\u7684\u540d\u79f0\n\tint u,v;\n\tu=mp[s1];\n\tv=mp[s2];\n\ta[u][v]=x;//\u7528a\u6570\u7ec4\u8bb0\u5f55\u4e0b\u4e24\u79cd\u8d27\u5e01\u4e4b\u95f4\u7684\u6c47\u7387\n}\n```\n## \u7136\u540e\u6211\u4eec\u5c31\u770b\u4e00\u4e0b\u5b8c\u6574\u7684\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint const N=35;\nmap<string,int>mp;\ndouble a[N][N];\nint n;\nvoid addEdge(char str1[],double x,char str2[]){\n\tstring s1=str1;\n\tstring s2=str2;\n\tint u,v;\n\tu=mp[s1];\n\tv=mp[s2];\n\ta[u][v]=x;\n}\nbool floyd(){\n\tint i,j,k;\n\tfor(int k=1;k<=n;k++)\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tfor(int j=1;j<=n;j++){\n\t\t\t\tif(a[i][j]<a[i][k]*a[k][j]){\n\t\t\t\t\ta[i][j]=a[i][k]*a[k][j];\n\t\t\t\t}\n\t\t\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(a[i][i]>1)\n\t\t\treturn true;\n\t}\n\treturn false;\n}//\u4ee5\u4e0a\u90e8\u5206\u5df2\u7ecf\u89e3\u91ca\u8fc7\u4e86\nint main(){\n\tint m,i,j,count,t=0;\n\tdouble x;\n\tchar str[20],str1[20],str2[20];\n\twhile(scanf(\"%d\",&n)&&n){\n\t\tcount=0;\n\t\tmp.clear();\n\t\tgetchar();\n\t\tfor(i=1;i<=n;i++)\n\t\t\tfor(j=1;j<=n;j++){\n\t\t\t\tif(i==j)\n\t\t\t\t\ta[i][j]=1;\n\t\t\t\telse\n\t\t\t\t\ta[i][j]=0;\n\t\t\t}\n\t\tfor(i=0;i<n;i++){\n\t\t\tscanf(\"%s\",str);\n\t\t\tstring s=str;\n\t\t\tmp[s]=++count;//\u7528\u6765\u8bb0\u5f55\u8d27\u5e01\u7684\u79cd\u7c7b\u6570\u91cf\n\t\t\t/cout<<\"mp[s]=\"<<mp[s]<<endl;\n\t\t}\n\t\tscanf(\"%d\",&m);\n\t\tgetchar();\n\t\tfor(i=0;i<m;i++){\n\t\t\tscanf(\"%s%lf%s\",str1,&x,str2);\n\t\t\taddEdge(str1,x,str2);//\u5efa\u56fe\n\t\t}\n\t\tif(floyd())//\u8dd1\u4e00\u904dFloyed\uff0c\u8f93\u51fa\u5373\u53ef\n\t\t\tprintf(\"Case %d: Yes\\n\",++t);\n\t\telse\n\t\t\tprintf(\"Case %d: No\\n\",++t);\n\t}\n\treturn 0;\n}\n```\n\n\n",
        "postTime": 1551315369,
        "uid": 172612,
        "name": "\u7c73\u5947\u5947\u7c73",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1931 \u3010\u5957\u5229\u3011"
    },
    {
        "content": "\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u8fd9\u9898\u6570\u636e\u8303\u56f4\u8fd9\u4e48\u5c0f\u3002\n\n\u6781\u5c0f\u7684\u6570\u636e\u8303\u56f4\u5bfc\u81f4floyd\uff0c~~\u901d\u53bb\u7684~~SPFA\uff0c\u751a\u81f3bellman-ford\u90fd\u80fd\u8fc7\u3002\n\n\u8fd9\u91cc\u5c31\u8bb2\u4e00\u8bb2SPFA.\n\n\u9996\u5148\uff0c\u628a\u6c47\u7387\u62bd\u8c61\u6210\u4e00\u4e2a\u56fe\uff0c\u82e5\u80fd\u5957\u5229\u90a3\u4e48\u4e00\u5b9a\u662f\u56fe\u4e2d\u6709**\u8fb9\u6743\u4e4b\u79ef>1**\u7684\u73af\u3002\n\n\u4e3a\u4e86\u907f\u514d\u6d6e\u70b9\u8bef\u5dee\uff08~~\u5176\u5b9e\u662f\u60f3Ctrl+C+V\u6a21\u677f~~\uff09\u8bfb\u5165\u65f6\u5904\u7406\uff0c\u628a\u6c47\u7387\u8f6c\u5316\u4e3a**\u5176\u5bf9\u6570**\u3002\n\n\u800c\u4f17\u6240\u5468\u77e5$\\ln a+\\ln b=\\ln(ab)$.\n\n\u6240\u4ee5\u56fe\u4e2d\u6709**\u8fb9\u6743\u4e4b\u79ef>1**\u7684\u73af<=>\u5904\u7406\u540e\u7684\u56fe\u4e2d\u6709**\u6b63**\u73af\u3002\n\n\u6293\u6b63\u73af\u548c\u6293\u8d1f\u73af\u57fa\u672c\u6ca1\u533a\u522b\uff08\u5c31\u628a\u4e00\u4e2a>\u6539\u6210<\uff09\uff0c\u76f4\u63a5\u5957\u4e0aSPFA\u677f\u5b50\u5373\u53ef\u3002\n\n\u6700\u540e\u4e0a\u4ee3\u7801\uff08~~\u8001\u53e4\u8463\u4ee3\u7801\uff0c\u9a6c\u8702\u968f\u610f\u5410\u69fd~~\uff09\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nvector<int>to[501]; \nvector<double>w[501];\nint n,m,cnt[501];\nbool in[501];\ndouble d[501],r;\nmap<string,int>id;//\u5b57\u5178(\u5efa\u56fe\u7528) \nstring x,y;\nbool spfa(){//SPFA\n    memset(d,0,sizeof(d));\n    memset(in,0,sizeof(in));\n    memset(cnt,0,sizeof(cnt));\n    queue<int>qu;\n\tfor(int i=0;i<n;i++)qu.push(i),in[i]=cnt[i]=1;//\u8282\u70b9\u5168\u5165\u961f,\u4ef7\u503c\u521d\u59cb\u5316\u4e3a1 \n\twhile(!qu.empty()){ \n\t\tint f=qu.front(),v;qu.pop();in[f]=0; \n\t\tfor(int i=0;i<to[f].size();i++)\n\t\tif(d[v=to[f][i]]<w[f][i]+d[f]){ \n\t\td[v]=w[f][i]+d[f];  \n\t\tif(!in[v])in[v]=1,cnt[v]++,qu.push(v); \n\t\tif(cnt[v]>n)return 1;\n\t\t}\n\t}\n    return 0; \n}//\u5224\u73af \nint main()                         \n{\n    for(int shuju=1;;++shuju){\n      id.clear();\n      for(int i=0;i<n;++i)to[i].clear(),w[i].clear();\n      cin>>n;if(!n)return 0;\n      for(int i=0;i<n;i++)cin>>x,id[x]=i;\n      cin>>m;\n      for(int i=0;i<m;i++){\n        cin>>x>>r>>y;\n        to[id[x]].push_back(id[y]);\n        w[id[x]].push_back(log(r));\n      }//\u5efa\u56fe \n      cout<<\"Case \"<<shuju<<\": \"; \n      cout<<(spfa()?\"Yes\":\"No\")<<endl;\n    }\n\treturn 0;\n}\n```\nOver.\n\n\u9898\u5916\u8bdd\uff1a\u8fd9\u79cd\u505a\u6cd5\u7531\u4e8e\u6ca1\u6709\u6d6e\u70b9\u6570\u4e58\u9664\u6cd5\u6240\u4ee5\u53ef\u4ee5\u5f88\u597d\u5730\u907f\u514d\u6d6e\u70b9\u8bef\u5dee\u5f71\u54cd~~\u867d\u7136\u542c\u8bf4\u8fd9\u9898\u90fd\u53ef\u4ee5~~\u3002",
        "postTime": 1582785827,
        "uid": 250637,
        "name": "UnyieldingTrilobite",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1931 \u3010\u5957\u5229\u3011"
    },
    {
        "content": "### \u4e3a\u4ec0\u4e48\u4e0d\u7528dijkstra     \n\u9996\u5148dijk\u6c42\u6700\u77ed\u8def\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u4f46\u8def\u5f84\u76f8\u4e58\u8981\u6c42\u5bf9\u6570\u8f6c\u5316\u4e3a\u8def\u5f84\u76f8\u52a0\u8f6c\u5316\u4e3a\u6700\u77ed\u8def\u95ee\u9898\uff0c\u4f46\u662f\u9898\u76ee\u8981\u6c42\u5224\u6b63\u73af\uff0c\u8fd9\u8981\u6c42\u4f7f\u7528spfa\uff0c\u7efc\u5408\u8003\u8651\u76f4\u63a5\u4f7f\u7528spfa\u6c42\u6700\u957f\u8def\u540c\u65f6\u5224\u8d1f\u73af\uff0c~~\u5c31\u5f88\u7701\u4ee3\u7801\u554a~~      \n\u4e0a\u4ee3\u7801    \n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<queue>\n#include<map>\n#include<cmath> \n#define inf 0x3f3f3f3f\n#define N 40\nusing namespace std;\nint n,cnt,head[N],tot,vis[N],m,tim[N];\ndouble d[N];\nmap<string,int>mp;\nstruct Edge{\n\tint v,next;double val;\n}edge[N*N*2]; \ninline int read(){\n\tint x=0,f=1;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-f;ch=getchar();\n\t}while(ch>='0'&&ch<='9'){x=(x<<3)+(x<<1)+ch-'0';ch=getchar();\n\t}return x*f;\n}\ninline void add(int x,int y,double d){edge[++tot].v=y;edge[tot].next=head[x];head[x]=tot;edge[tot].val=d;}\nbool spfa(int s){\n\tqueue<int>q;q.push(s);for(int i=1;i<=n;i++)d[i]=-inf;d[s]=0;memset(vis,0,sizeof(vis));vis[s]=1;memset(tim,0,sizeof(tim));\n\twhile(q.size()){\n\t\tint u=q.front();q.pop();vis[u]=0;\n\t\tfor(int i=head[u];i;i=edge[i].next){\n\t\t\tint v=edge[i].v;double z=edge[i].val;\n\t\t\tif(d[v]<d[u]+z){\n\t\t\t\td[v]=d[u]+z;\n\t\t\t\tif(!vis[v]){\n\t\t\t\t\tvis[v]=1;\n\t\t\t\t\tq.push(v);\n\t\t\t\t\ttim[v]++;\n\t\t\t\t\tif(tim[v]>=n)return true;\n\t\t\t\t}\n\t\t\t} \n\t\t}\n\t}return false;\n}\nint main(){\n\twhile(1){\n\t\tn=read();bool flag=0;\n\t\tif(n==0)break;cnt++;tot=0;memset(head,0,sizeof(head)); \n\t\tfor(int i=1;i<=n;i++){\n\t\t\tchar ch[N];\tscanf(\"%s\",ch);string str;str=ch;\n\t\t\tmp[str]=i;\n\t\t}m=read();\n\t\tfor(int i=1;i<=m;i++){\n\t\t\tchar ch[N];scanf(\"%s\",ch);string str=ch;int x=mp[str];\n\t\t\tdouble rate;scanf(\"%lf\",&rate);rate=log(rate);\n\t\t\tscanf(\"%s\",ch);str=ch;int y=mp[str];\n\t\t\tadd(x,y,rate);\n\t\t}\n\t\tif(spfa(1))\n\t\t\tprintf(\"Case %d: Yes\\n\",cnt);\n\t\telse printf(\"Case %d: No\\n\",cnt);\n\t}\n\treturn 0;\n}\n\n```\n",
        "postTime": 1563412237,
        "uid": 88733,
        "name": "Zekrom",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1931 \u3010\u5957\u5229\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u5c31\u662fArbitrage\u6211\u5c31\u53d1\u4e00\u4e0b\u6211\u7684\u505a\u6cd5\u3002\n```cpp\n#include<iostream> \n#include<cstring>\nusing namespace std;  \n#define N 50  \n#define LL __int64  \nconst int inf=0;  \nstruct node  \n{  \n    int u,v;  \n    double d;  \n}e[N*N];  \nint m,n;  \ndouble dis[N];  \nbool bellman()  \n{  \n    int i,j,u,v;  \n    for(i=0;i<n;i++)      //\u521d\u59cb\u5316\u4e3a0  \n        dis[i]=inf;  \n    dis[0]=1;  \n    for(i=1;i<=n;i++)     //\u4ecedis[0]\u9012\u63a8\u5230dis[1]....dis[n];  \n    {  \n        for(j=0;j<m;j++)  \n        {  \n            u=e[j].u;  \n            v=e[j].v;  \n            if(dis[u]&&dis[v]<dis[u]*e[j].d)   //\u82e5\u7ecf\u8fc7\u67d0\u4e00\u70b9\u80fd\u4f7f\u4ece\u6e90\u70b9\u5230\u8be5\u7ec8\u70b9\u7684\u6700\u77ed\u8def\u7f29\u77ed\uff0c\u6b64\u4e3a\u589e\u5927  \n                dis[v]=dis[u]*e[j].d;          //\u5219\u4fee\u6539\u8be5\u70b9\u503c\uff0c\u5373\u677e\u5f1b  \n        }  \n    }  \n    return dis[0]>1;  \n}  \nint main()  \n{  \n    int i,j,k,cnt=1;  \n    double d;  \n    char str[N][N],a[N],b[N];  \n    while(scanf(\"%d\",&n),n)  \n    {  \n        for(i=0;i<n;i++)  \n            scanf(\"%s\",str[i]);  \n        scanf(\"%d\",&m);  \n        for(i=0;i<m;i++)  \n        {  \n            scanf(\"%s %lf %s\",a,&d,b);  \n            for(j=0;strcmp(str[j],a);j++)  \n                ;  \n            for(k=0;strcmp(str[k],b);k++)  \n                ;  \n            e[i].u=j;  \n            e[i].v=k;  \n            e[i].d=d;  \n        }  \n        printf(\"Case %d: \",cnt++);  \n        bool flag=bellman();  \n        if(flag)  \n            printf(\"Yes\\n\");  \n        else  \n            printf(\"No\\n\");  \n    }  \n    return 0;  \n}  \n```\n",
        "postTime": 1554567538,
        "uid": 166436,
        "name": "shihao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1931 \u3010\u5957\u5229\u3011"
    },
    {
        "content": "# P1931 \u5957\u5229 \u9898\u89e3\n## \u6b64\u9898\u89e3\u53ef\u4ee5\u4f5c\u4e3a  \u5224\u65ad\u73af\u7684\u6a21\u677f  \u548c  \u66b4\u529b\u54c8\u5e0c\u7684\u6a21\u677f\n### \u672c\u9898\u505a\u6cd5 1.\u5904\u7406\u5b57\u7b26\u4e32 2.\u5224\u65ad\u662f\u5426\u6709\u73af\u3002\n### \u5728\u9898\u89e3\u4e2d\u60f3\u63d0\u53ca\u4e00\u4e0b\u6709\u4e00\u7bc7floyd\u7684\u9898\u89e3\uff0c\u5b8c\u5168\u662f\u56e0\u4e3a\u6570\u636e\u5c0f\u624d\u80fd\u7528floyd\uff0c\u6240\u4ee5\u5224\u65ad\u73af\u8fd8\u662f\u8981\u7528spfa\u3002\n\n\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=31,M=1e4+5;\nint n,m,i,j,sum,cnt,u,v,now;\ndouble ww;\nint head[N],q[9*M],tim[N];\ndouble d[N];\nchar str[1001],w[M][1001];\nbool f[N];\n\nstruct edge{\nint next,to;\t\ndouble w;\t\t\n}e[M];\n\ninline void update(char s[]){\nint i,len;\nsum++;\nlen=strlen(s);\n    for (i=0; i<len; i++) \n    w[sum][i]=s[i];\n}\ninline int find(char s[]){\nint i,k,len;\t\nbool jay=false;\nlen=strlen(s); \n    for (k=1; k<=sum; k++)\n    {\n    if (strlen(w[k])==len) jay=true;\n    for (i=0; i<len; i++) if (w[k][i]!=s[i]) {jay=false; break;}\n    if (jay==true) return k;\n    }\n}         //\u66b4\u529b\u54c8\u5e0c\ninline void add(int u,int v,double w){\ncnt++;\ne[cnt].next=head[u];\t\ne[cnt].to=v;\ne[cnt].w=w;\nhead[u]=cnt;\n}\n\ninline bool spfa(){\nmemset(d,0,sizeof(d));\nmemset(q,0,sizeof(q));\nmemset(f,false,sizeof(f));\nmemset(tim,0,sizeof(tim));\nint l=1,r=2,s=1,k,u,v,i;\t\n\nq[l]=s; d[s]=1.0;\n    while (l<r)\n    {\n    u=q[l],l++,f[u]=false;\t\n    k=head[u];\n        while (k>0)\n        {\n        v=e[k].to;\t\n            if (d[v]<d[u]*e[k].w){\n            d[v]=d[u]*e[k].w;\n            if (f[v]==false) q[r]=v,r++,f[v]=true;\n            tim[v]++;\n            if (tim[v]==n) return true;\n            }\n        k=e[k].next;\n        }\n    }\nreturn false;\t\n}           //spfa\u5224\u73af\n\n\nint main(){\nscanf(\"%d\",&n);\t\n\nwhile (n!=0)\n{\nsum=0;\nmemset(w,0,sizeof(w));\t\nfor (i=1; i<=n; i++) scanf(\"%s\",str),update(str);\n\nmemset(head,0,sizeof(head));\nfor (i=1; i<=cnt; i++) e[i].next=e[i].to=0,e[i].w=0.0;\ncnt=0; \nscanf(\"%d\",&m);\n    for (i=1; i<=m; i++) \n    {\n    scanf(\"%s\",str);\n    u=find(str);\n    scanf(\"%lf\",&ww);\n    scanf(\"%s\",str);\n    v=find(str);\n    add(u,v,ww);\n    }\n    \nnow++;\nprintf(\"Case %d: \",now);\nif (spfa()==true) puts(\"Yes\"); else puts(\"No\");\t\n\nscanf(\"%d\",&n);\n}\nreturn 0;\t\n}\n```\n",
        "postTime": 1551318236,
        "uid": 73436,
        "name": "\u8bf4\u597d\u4e0d\u54ed",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1931 \u3010\u5957\u5229\u3011"
    }
]
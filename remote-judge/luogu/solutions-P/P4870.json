[
    {
        "content": "[[BalticOI 2009]\u7532\u866b](https://www.luogu.com.cn/problem/P4870)\n\n![](https://img2020.cnblogs.com/blog/1604911/202012/1604911-20201201080431418-2033900091.png)\n\n### Solution\n\n\u6bd4\u8f83\u5957\u8def\u7684\u533a\u95f4dp\uff0c\u5148\u6309\u5750\u6807\u6392\u5e8f\uff0c\u518d\u627e\u51fa\u96f6\u70b9\u6240\u5728\u4f4d\u7f6e\uff0c\u8bb0\u4e3a $pos$\u3002\u8bbe\u72b6\u6001 $dp[i][j][0/1]$ \u8868\u793a\u53d6\u5b8c\u533a\u95f4 $[i,j]$ \u7684\u6240\u6709\u6c34\u6ef4\u4e14\u6700\u540e\u4f4d\u7f6e\u5728\u5de6\u8fb9/\u53f3\u8fb9\u7684\u6700\u5927\u6536\u76ca\uff0c\u4f46\u65f6\u95f4\u4e0d\u597d\u7b97\uff0c\u53ef\u4ee5\u518d\u5f00\u4e00\u4e2a $t[i][j][0/1]$ \u6765\u8bb0\u5f55\u6700\u4f18\u89e3\u8f6c\u79fb\u5230 $dp[i][j][0/1]$ \u65f6\u7684\u65f6\u95f4\uff0c\u90a3\u4e48\u8f6c\u79fb\u5c31\u5f88\u663e\u7136\u4e86\u3002\n\n```cpp\n#include<stdio.h>\n#include<string.h>\n#include<algorithm>\nusing namespace std;\n#define N 307\n#define ll long long\n \nll dp[N][N][2],t[N][N][2],a[N];\nint n,m;\nint main(){\n    freopen(\"data.in\",\"r\",stdin);\n    freopen(\"user.out\",\"w\",stdout);\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++) scanf(\"%lld\",&a[i]);\n    sort(a+1,a+1+n+1);\n    int pos;\n    for(int i=1;i<=n+1;i++)\n        if(!a[i]){pos=i;break;}\n    memset(dp,-63,sizeof(dp));\n    dp[pos][pos][0]=dp[pos][pos][1]=0;\n    t[pos][pos][0]=t[pos][pos][1]=m;\n    ll ans=0;\n    for(int l=2;l<=n+1;l++)\n        for(int i=1,j=i+l-1;j<=n+1;i++,j++){\n            if(dp[i+1][j][0]+t[i+1][j][0]-(a[i+1]-a[i])>dp[i][j][0]){\n                dp[i][j][0]=dp[i+1][j][0]+t[i+1][j][0]-(a[i+1]-a[i]);\n                t[i][j][0]=t[i+1][j][0]-(a[i+1]-a[i]);\n            }\n            if(dp[i+1][j][1]+t[i+1][j][1]-(a[j]-a[i])>dp[i][j][0]){\n                dp[i][j][0]=dp[i+1][j][1]+t[i+1][j][1]-(a[j]-a[i]);\n                t[i][j][0]=t[i+1][j][1]-(a[j]-a[i]);\n            }\n            if(dp[i][j-1][1]+t[i][j-1][1]-(a[j]-a[j-1])>dp[i][j][1]){\n                dp[i][j][1]=dp[i][j-1][1]+t[i][j-1][1]-(a[j]-a[j-1]);\n                t[i][j][1]=t[i][j-1][1]-(a[j]-a[j-1]);\n            }\n            if(dp[i][j-1][0]+t[i][j-1][0]-(a[j]-a[i])>dp[i][j][1]){\n                dp[i][j][1]=dp[i][j-1][0]+t[i][j-1][0]-(a[j]-a[i]);\n                t[i][j][1]=t[i][j-1][0]-(a[j]-a[i]);\n            }\n            ans=max(ans,max(dp[i][j][0],dp[i][j][1]));\n        }\n    printf(\"%lld\",ans);\n}\n/*\n3 15\n6 -3 1\n*/\n```\n\n\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u5f97\u5230 $76$ \u5206\u7684\u9ad8\u5206\u3002\uff08\u8fd9\u662f\u6211\u6ca1\u6709\u60f3\u5230\u7684\uff09\n\n\u4e0a\u8ff0\u505a\u6cd5\u7684\u95ee\u9898\u5728\u4e8e\u867d\u7136 $dp[i][j][0/1]$ \u5728\u5f53\u524d\u662f\u6700\u4f18\u7684\uff0c\u4f46\u662f $t[i][j][0/1]$ \u53ef\u80fd\u5df2\u7ecf\u88ab\u51cf\u5f97\u5f88\u5c0f\u4e86\uff0c\u751a\u81f3\u662f\u8d1f\u7684\uff0c\u5bf9\u540e\u9762\u7684\u8f6c\u79fb\u4e0d\u5229\uff08\u6240\u4ee5\u8fd9\u76f4\u63a5\u5c31\u662f\u4e2a\u5047\u4f5c\u6cd5\uff09\u3002\u8f6c\u6362\u601d\u8def\uff0c\u8003\u8651\u8d39\u7528\u63d0\u524d\u7b97\uff0c\u679a\u4e3e\u5f53\u524d\u5fc5\u9009\u7684\u6c34\u6ef4\u7684\u4e2a\u6570\uff0c\u7136\u540e\u8003\u8651\u8fdb\u884cdp\u3002\u72b6\u6001 $dp[i][j][0/1]$ \u53d8\u4e3a\u5728\u9009\u5b8c\u533a\u95f4 $[i,j]$ \u4e14\u6700\u540e\u4f4d\u7f6e\u5728\u5de6\u8fb9/\u53f3\u8fb9\uff0c\u80fd\u4f7f\u5f97\u5230\u6c34\u6ef4\u4e22\u5931\u7684\u6700\u5c11\u6c34\u5206\u662f\u591a\u5c11\uff0c\u8fd9\u4e2a\u72b6\u6001\u7684\u5b9e\u8d28\u662f\u8ba9\u4e0a\u6587\u7684 $t$ \u5c3d\u91cf\u5927\uff0c\u800c\u5bf9\u540e\u9762\u7684\u72b6\u6001\u4ea7\u751f\u6b63\u5f71\u54cd\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7b97\u6cd5\u7684\u6b63\u786e\u6027\u5c31\u663e\u7136\u4e86\u3002\u8f6c\u79fb\u4e5f\u5f88\u663e\u7136\u3002\u90a3\u4e48\u5bf9\u4e8e\u4e0d\u540c\u7684\u9009\u53d6\u4e2a\u6570 $lim$ \uff0c\u5206\u522b\u8fdb\u884c\u4e00\u6b21dp\u540e\uff0c\u7b54\u6848\u5c31\u662f\n$$lim\\times m-\\min \\limits_{1\\leq l\\leq l+lim-1\\leq n}\\{dp[l][l+lim-1]\\}$$\n\u90a3\u4e48\u603b\u7684\u7b54\u6848\u5c31\u662f\n$$\\max \\limits_{1\\leq lim \\leq n} \\{lim\\times m-\\min \\limits_{1\\leq l\\leq l+lim-1\\leq n}\\{dp[l][l+lim-1]\\}\\}$$\n\n\u590d\u6742\u5ea6 $O(n^3)$\n```cpp\n#include<stdio.h>\n#include<string.h>\n#include<algorithm>\nusing namespace std;\n#define N 307\n#define ll long long\n\nint n,m,pos=0;\nll dp[N][N][2],a[N];\n\ninline ll calc(int lim){\n    memset(dp,127,sizeof(dp));\n    dp[pos][pos][0]=dp[pos][pos][1]=0;\n    for(int l=2;l<=lim;l++)\n        for(int i=1,j=i+l-1;j<=n;i++,j++){\n            dp[i][j][0]=min(dp[i][j][0],min(dp[i+1][j][0]+(a[i+1]-a[i])*(lim-l+1),dp[i+1][j][1]+(a[j]-a[i])*(lim-l+1)));\n            dp[i][j][1]=min(dp[i][j][1],min(dp[i][j-1][1]+(a[j]-a[j-1])*(lim-l+1),dp[i][j-1][0]+(a[j]-a[i])*(lim-l+1)));\n        }\n    ll ret=(1LL<<60);\n    for(int i=1,j=i+lim-1;j<=n;i++,j++)\n        ret=min(ret,min(dp[i][j][0],dp[i][j][1]));\n//    printf(\"%lld\\n\",ret);\n    return ret;\n}\n\nint main(){\n//    freopen(\"beetle.in\",\"r\",stdin);\n//    freopen(\"beetle.out\",\"w\",stdout);\n    scanf(\"%d%d\",&n,&m);\n    bool tag=0;\n    for(int i=1;i<=n;i++)\n        scanf(\"%lld\",&a[i]),tag|=(!a[i]);\n    if(!tag) n++;\n    sort(a+1,a+1+n);\n    for(int i=1;i<=n;i++)\n        if(!a[i]){pos=i;break;}\n    ll ans=-1;\n    for(int i=1;i<=n;i++)\n        ans=max(ans,i*m-calc(i)-(!tag? m:0));\n    printf(\"%lld\",ans);\n}\n/*\n3 15\n6 -3 1\n*/\n```\n\n### Tips\n\u539f\u6765\u7684\u6240\u6709\u5750\u6807\u4e2d\u53ef\u80fd\u6709 $0$\uff0c\u4e5f\u53ef\u80fd\u6ca1\u6709\u3002\u8fd9\u4f1a\u5bf9\u7b54\u6848\u4ea7\u751f\u5f71\u54cd\uff0c\u4f46\u7b80\u5355\u8ba8\u8bba\u4e00\u4e0b\u5c31\u53ef\u4ee5\u4e86\u3002",
        "postTime": 1606783630,
        "uid": 83337,
        "name": "wwlw",
        "ccfLevel": 7,
        "title": "[BalticOI 2009 Day1]\u7532\u866b"
    },
    {
        "content": "\u9996\u5148\u660e\u663e\u8981\u5c06\u6240\u6709\u6c34\u6ef4\u6392\u5e8f\u3002   \n\u7136\u540e\u53cd\u7740\u601d\u8003\uff0c\u770b\u7532\u866b\u6700\u5c11\u80fd\u907f\u514d\u591a\u5c11\u6c34\u6ef4\u7684\u84b8\u53d1\u3002   \n\u5b9a\u4e49```f[i][j][0]```\u4e3a\u559d\u5149```i```\u5230```j```\u7684\u6240\u6709\u6c34\u6ef4\u5e76\u4e14\u7559\u5728\u5de6\u8fb9\u7684\u6700\u5c11\u84b8\u53d1\uff0c```f[i][j][1]```\u4e3a\u559d\u5149```i```\u5230```j```\u7684\u6240\u6709\u6c34\u6ef4\u5e76\u4e14\u7559\u5728\u53f3\u8fb9\u7684\u6700\u5c11\u84b8\u53d1\u3002   \n\u7136\u540e\u8d77\u59cb\u70b9\u4e00\u5b9a\u662f0\uff0c\u5982\u679c\u6c34\u6ef4\u4e2d\u6ca1\u67090\u7684\u8bdd\uff0c\u5c31\u624b\u52a8\u52a0\u4e0a\u4e00\u4e2a\u6c34\u6ef4\uff0c\u6700\u540e\u51cf\u6389\u3002   \n\u6ce8\u610f\u6bcf\u6b21dp\u8981\u628a\u6570\u7ec4\u6e05\u7a7a\u3002   \n\u8f6c\u79fb\u65b9\u7a0b\uff1a\n```\n// k\u4e3ai\u5230j\u7684\u6c34\u6ef4\u4e2a\u6570\uff0cl\u4e3a\u603b\u7528\u65f6\nf[i-1][j][0]=min(f[i-1][j][0],min(f[i][j][0]+(l-k)*(a[i]-a[i-1]),f[i][j][1]+(l-k)*(a[j]-a[i-1])));\nf[i][j+1][1]=min(f[i][j+1][1],min(f[i][j][1]+(l-k)*(a[j+1]-a[j]),f[i][j][0]+(l-k)*(a[j+1]-a[i])));\n```\n\u6700\u540e\u679a\u4e3e```l```\uff0c\u6c42\u51fa\u6bcf\u4e2a```l```\u5bf9\u5e94\u7684\u7b54\u6848\uff0c\u6c42\u51fa\u6700\u5927\u503c\u5373\u53ef\u3002  \n#### \u6700\u540e\uff0c\u795d\u5927\u5bb6NOIP2018 RP++   \n\u9644\u4e0aAC\u7684\u4ee3\u7801\uff1a   \n``` cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nint start=0;\nll n,m;\nll a[305];\nll f[305][305][2];//0 zuo ,1 you\n#define INF 0x7fffffff\nll dp(int l)\n{\n    memset(f,0x7f,sizeof(f));\n    f[start][start][0]=0;\n    f[start][start][1]=0;\n    for(int k=1;k<=l;k++)\n    {\n        for(int i=1;i<=n-k+1;i++)\n        {\n            int j=k+i-1;\n            f[i-1][j][0]=min(f[i-1][j][0],min(f[i][j][0]+(l-k)*(a[i]-a[i-1]),f[i][j][1]+(l-k)*(a[j]-a[i-1])));\n            f[i][j+1][1]=min(f[i][j+1][1],min(f[i][j][1]+(l-k)*(a[j+1]-a[j]),f[i][j][0]+(l-k)*(a[j+1]-a[i])));\n        }\n    }\n    ll minn=INF;\n    for(int i=1;i<=n-l+1;i++)\n    {\n        minn=min(minn,min(f[i][i+l-1][0],f[i][i+l-1][1])); \n    }\n    return minn;\n}\nint main()\n{\n    cin>>n>>m;\n    bool zero=false;\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%lld\",&a[i]);\n        if(a[i]==0)\n        {\n            zero=true;\n        }\n    }\n    if(zero==false)\n    {\n        a[++n]=0;\n    }\n    sort(a+1,a+n+1);\n    for(int i=1;i<=n;i++)\n    {\n        if(a[i]==0)\n        {\n            start=i;\n        }\n    }\n    ll maxn=-1;\n    for(int i=1;i<=n;i++)\n    {\n        maxn=max(maxn,m*i-dp(i));\n    }\n    if(zero==false)\n    {\n        maxn-=m;\n    }\n    cout<<maxn<<endl;\n    return 0;\n}\n```",
        "postTime": 1540198765,
        "uid": 70780,
        "name": "wasa855",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4870 \u3010[BalticOI 2009 Day1]\u7532\u866b\u3011"
    },
    {
        "content": "#### \u672c\u9898\u89e3\u91cd\u70b9\u8bb2\u89e3\u6574\u4f53\u601d\u8def\uff0c\u7ec6\u8282\u89c1\u4ee3\u7801\n\n------------\n\n\n### \u786e\u5b9a\u505a\u6cd5\n\n\u770b\u5230\u201c\u6570\u8f74\u201d\u548c\u201c\u6700\u5927\u4ef7\u503c\u201d\uff0c\u81ea\u7136\u800c\u7136\u5730\u60f3\u5230\u4e86\u533a\u95f4DP\uff0c\u81ea\u5df1\u5199\u4e86\u51e0\u4e2a\u5f0f\u5b50\u63a8\u4e86\u51e0\u79cd\u60c5\u51b5\uff0c\u53d1\u73b0\u4e0d\u6389\u5934\u6216\u53ea\u6389\u4e00\u6b21\u5934\u4e0d\u4e00\u5b9a\u6700\u4f18\uff0c\u6545\u6392\u9664\u8d2a\u5fc3\uff0c\u5927\u6982\u786e\u5b9a\u505a\u6cd5\u4e3a\u533a\u95f4DP\uff1b\u89c2\u5bdf\u6570\u636e\u8303\u56f4\uff0c\u53d1\u73b0 $n$ \u662f $O(n^3)$ \u7684\u8303\u56f4\uff0c\u4fbf\u60f3\u5230\u53ef\u80fd\u8981\u989d\u5916\u679a\u4e3e\u67d0\u4e2a\u6761\u4ef6\u540e\u518d\u8dd1\u4e00\u904d\u533a\u95f4DP\uff08~~\u4f0f\u7b14~~\uff09\u3002\n\n\n\n------------\n\n\n### \u786e\u5b9a\u72b6\u6001\n\n\u5148\u601d\u8003\u7528 $f$ \u6570\u7ec4\u7ef4\u62a4 $l$ \u5230 $r$ \u533a\u95f4\u53ef\u5f97\u7684\u6700\u5927\u4ef7\u503c\u3002\u672c\u9898\u4e2d\uff0c\u6bcf\u4e2a\u6c34\u6ef4\u7684\u4ef7\u503c\uff08\u6c34\u5206\uff09\u968f\u65f6\u90fd\u5728\u53d8\u5316\uff0c\u4e0d\u540c\u65f6\u95f4\u8d70\u5230\u540c\u4e00\u4e2a\u70b9\u4e5f\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u4ef7\u503c\uff0c\u4f20\u7edf\u7684\u533a\u95f4DP\u72b6\u6001 $f[l][r]$ \u65e0\u6cd5\u540c\u65f6\u7ef4\u62a4\u65f6\u95f4\u548c\u76f4\u63a5\u4ef7\u503c\uff0c\u56e0\u4e3a\u65f6\u95f4\u7684\u4e0a\u754c\u8fc7\u5927\u4e14\u65e0\u6cd5\u79bb\u6563\u5316\uff0c\u6240\u4ee5\u4e5f\u65e0\u6cd5\u589e\u52a0\u4e00\u7ef4\u72b6\u6001\u3002\n\n~~\u4f46\u662f~~\u7ecf\u8fc7\u89c2\u5bdf\u6211\u4eec\u53d1\u73b0\uff0c\u4e00\u4e2a\u533a\u95f4\u7684\u4ef7\u503c\u7b49\u4e8e\u533a\u95f4\u521d\u59cb\u4ef7\u503c\uff08\u6c34\u6ef4\u6570\u4e58\u4ee5 $m$\uff09\u51cf\u53bb\u6d41\u5931\u7684\u4ef7\u503c\uff0c~~\u5f88\u663e\u7136~~\u3002\u4f46\u662f\u91cd\u8981\u7684\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u533a\u95f4\uff0c\u5269\u4e0b\u6c34\u6ef4\u7684\u6570\u76ee\u53ef\u4ee5\u786e\u5b9a\uff0c\u800c\u6c34\u5206\u6d41\u5931\u7684\u603b\u901f\u5ea6\u4e5f\u5c31\u786e\u5b9a\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528 $f[l][r]$ \u7ef4\u62a4\u533a\u95f4\u5185\u5df2\u6d41\u5931\u6c34\u5206\u7684\u6700\u5c0f\u503c\u3002\n\n\u56e0\u4e3a\u7532\u866b\u722c\u5b8c\u533a\u95f4\u540e\u505c\u5728\u533a\u95f4\u7684\u54ea\u4e00\u8fb9\uff08\u663e\u7136\u4e0d\u53ef\u80fd\u662f\u4e2d\u95f4\uff09\u4e0d\u4ec5\u5bf9\u672c\u6b21\u7684\u4ef7\u503c\u6709\u5f71\u54cd\uff0c\u4e5f\u5f71\u54cd\u4e0b\u4e00\u6b21\u72b6\u6001\u7684\u8f6c\u79fb\uff0c\u6240\u4ee5\u7528 $f[l][r]$ \u548c $f[r][l]$ \u5206\u522b\u7ef4\u62a4\u5373\u53ef\u3002\n\n\n------------\n\n\n### \u5904\u7406\u7b54\u6848\n\n\u7ef4\u62a4\u4e86\u6d41\u5931\u6c34\u5206\u7684\u6700\u5c0f\u503c\uff0c\u8f93\u51fa\u7b54\u6848\u65f6\u5c31\u8981\u7528\u603b\u7684\u6c34\u6ef4\u503c\u51cf\u53bb\u8fd9\u4e2a\u6700\u5c0f\u503c\uff0c\u4ea7\u751f\u4e86\u5982\u4e0b\u95ee\u9898\uff1a\n\n- \u6c34\u6ef4\u7684\u6c34\u5206\u4e0d\u4f1a\u51cf\u4e3a\u8d1f\u503c\uff0c\u56e0\u4e3a\u72b6\u6001\u4e2d\u6ca1\u6709\u4e00\u7ef4\u8868\u793a\u65f6\u95f4\uff0c\u65e0\u6cd5\u5224\u65ad\u8fd9\u4e2a\u533a\u95f4\u7684\u7b54\u6848\u662f\u5426\u5305\u542b\u4e86\u6c34\u6ef4\u4e3a\u8d1f\u503c\u7684\u60c5\u51b5\uff1b\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u8003\u8651\u679a\u4e3e\u8fd9\u4e2a\u201c\u65f6\u95f4\u201d\uff0c\u7531\u4e8e\u65f6\u95f4\u8fc7\u5927\uff0c\u6211\u4eec\u7528\u53ef\u4ee5\u559d\u5230\u7684\u6c34\u6ef4\u6570\u6765\u9650\u5236\u65f6\u95f4\uff0c\u53ca**\u679a\u4e3e\u559d\u5230\u7684\u6c34\u6ef4\u6570**\uff08~~\u547c\u5e94~~\uff09\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6c34\u6ef4\u6570\uff0c\u5355\u72ec\u8dd1\u4e00\u904d\u533a\u95f4DP\uff0c\u7b54\u6848\u4e3a\u8fd9\u4e9b\u4ef7\u503c\u7684\u6700\u5927\u503c\u3002\n\n\n------------\n\n### ~~\u611f\u6027~~\u8bc1\u660e\n\n\u4ece\u5b9a\u4e49\u51fa\u53d1\uff0c\u7532\u866b\u559d\u5230\u6700\u591a\u6c34\u7684\u60c5\u51b5\uff0c\u5fc5\u662f\u5df2\u7ecf\u559d\u8fc7\u4e86\u6240\u6709\u7684\u6c34\u6ef4\u6216\u722c\u5230\u4e0b\u4e00\u4e2a\u6c34\u6ef4\u65f6\u6240\u6709\u6c34\u6ef4\u5df2\u7ecf\u84b8\u53d1\u5b8c\u4e86\u3002\n\n\u5982\u679c\u679a\u4e3e\u7684\u6c34\u6ef4\u6570\u5927\u4e8e\u4e86\u5b9e\u9645\u53ef\u4ee5\u559d\u5230\u7684\u6c34\u6ef4\u6570\uff0c\u5219\u53ef\u4ee5\u7406\u89e3\u4e3a\u7532\u866b\u5728\u5b9e\u9645\u7684\u6700\u4f18\u60c5\u51b5\u4e0b\uff0c\u53c8\u559d\u4e86\u4e00\u4e2a\u4ef7\u503c\u4e3a\u8d1f\u7684\u6c34\u6ef4\uff0c\u6700\u540e\u7684\u4ef7\u503c\u5fc5\u5b9a\u5c0f\u4e8e\u6700\u4f18\u4ef7\u503c\uff0c\u6240\u4ee5\u679a\u4e3e\u4e00\u5b9a\u80fd\u4fdd\u8bc1\u5f97\u5230\u7684\u6700\u4f18\u4ef7\u503c\u662f\u7b26\u5408\u5b9e\u9645\u7684\u3002\n\n\n------------\n\n*Talk is cheap, show me the code*\n\n```cpp\n#include<bits/stdc++.h>\n#define re register\nusing namespace std;\n\ninline int read(){\n\tre int ret=0,f=1;\n\tre char c=getchar();\n\twhile(c<'0'||c>'9'){\n\t\tif(c=='-') f=-1;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9'){\n\t\tret=(ret<<1)+(ret<<3)+(c^48);\n\t\tc=getchar();\n\t} return ret*f;\n}\n\nint n,m,st,ans;\nint loc[305];\nint f[305][305];\n//\u7528f[i][j]\u548cf[j][i]\u6765\u4ee3\u8868\u505c\u5728\u54ea\u4e00\u8fb9 \n\nbool IF; //\u5224\u65ad\u662f\u5426\u6709\u6c34\u6ef4\u5728\u8d77\u59cb\u4f4d\u7f6e \n\nint main(){\n\tn=read(); m=read();\n\tfor(re int i=1;i<=n;i++){\n\t\tloc[i]=read();\n\t\tif(!loc[i]) IF=1;\n\t} if(!IF) loc[++n]=0;\n\t//\u5982\u6ca1\u6709\u6c34\u6ef4\u5728\u8d77\u59cb\u4f4d\u7f6e\uff0c\u5148\u6dfb\u52a0\u4e00\u4e2a\uff0c\u6700\u540e\u51cf\u53bb\u8fd9\u4e2a\u6c34\u6ef4\u7684\u4ef7\u503c\u5373\u53ef \n\tsort(loc+1,loc+1+n);\n\tst=lower_bound(loc+1,loc+1+n,0)-loc;\n\t//0\u7684\u4f4d\u7f6e \n\tfor(re int maxl=1;maxl<=n;maxl++){\n\t\tmemset(f,63,sizeof(f)); f[st][st]=0;\n\t\tfor(re int len=2;len<=maxl;len++){\n\t\t\tfor(re int i=max(1,st-len+1),j;i<=st;i++){\n\t\t\t\tj=i+len-1; if(j>n) break;\n\t\t\t\tif(i<st){\n\t\t\t\t\tf[i][j]=f[j][i+1]+(loc[i+1]-loc[i])*(maxl-j+i)+(loc[j]-loc[i])*(maxl-j+i-1);\n\t\t\t\t\tf[j][i]=f[j][i+1]+(loc[i+1]-loc[i])*(maxl-j+i);\n\t\t\t\t}\n\t\t\t\tif(j>st){\n\t\t\t\t\tf[i][j]=min(f[i][j],f[i][j-1]+(loc[j]-loc[j-1])*(maxl-j+i));\n\t\t\t\t\tf[j][i]=min(f[j][i],f[i][j-1]+(loc[j]-loc[j-1])*(maxl-j+i)+(loc[j]-loc[i])*(maxl-j+i-1));\n\t\t\t\t}\n\t\t\t\t//\u72b6\u6001\u8f6c\u79fb\u8981\u8003\u8651\u4ece\u4e24\u8fb9\u8f6c\u79fb \n\t\t\t}\n\t\t} //\u7ecf\u5178\u533a\u95f4DP\uff0c\u4e0d\u5fc5\u591a\u8bf4 \n\t\tfor(re int i=max(1,st-maxl+1),j,now;i<=st;i++){\n\t\t\tj=i+maxl-1; if(j>n) break;\n\t\t\tnow=maxl*m-min(f[i][j],f[j][i])-(IF?0:m);\n\t\t\tans=max(ans,now);\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1603983833,
        "uid": 236099,
        "name": "H_D_NULL",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4870 \u3010[BalticOI 2009 Day1]\u7532\u866b\u3011"
    },
    {
        "content": "## \u5206\u6790\n\n\u5173\u4e8e\u6b64\u9898\u7684 $dp$ \u601d\u8def\uff0c\u5176\u5b9e\u53ef\u4ee5\u5148\u53bb\u505a\u4e00\u505a\u8fd9\u9053\u9898[P1220 \u5173\u8def\u706f](https://www.luogu.com.cn/problem/P1220)\u3002\u4e24\u9053\u9898\u7684\u601d\u8def\u5927\u4f53\u76f8\u540c\uff0c\u4e0d\u8fc7\u8fd9\u9053\u9898\u6709\u4e00\u4e2a\u7ec6\u8282\uff0c\u5c31\u662f\u9732\u6c34\u7684\u6c34\u5206\u4e0d\u4f1a\u964d\u4e3a\u8d1f\u6570\uff0c\u56e0\u6b64\u4e0d\u80fd\u4e00\u6b21 $dp$ \u5b8c\uff0c\u56e0\u6b64\u6211\u4eec\u8003\u8651\u679a\u4e3e\u559d\u5230\u591a\u5c11\u679a\u9732\u6c34\uff0c\u4ee5\u907f\u514d\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u67d0\u4e00\u6ef4\u9732\u6c34\u8fc7\u5ea6\u6d88\u8d39\u7684\u60c5\u51b5\u3002\n\n## \u601d\u8def\n\n\u7528 $dp[i][j][0/1]$ \u8868\u793a\u559d\u5b8c $i$ \u5230$j$ \u6240\u6709\u9732\u6c34\u540e\u6240\u6d88\u8017\u7684\u6700\u5c0f\u6c34\u5206\uff0c0\u8868\u793a\u559d\u5b8c\u540e\u4f4d\u4e8e\u6700\u5de6\u7aef\uff0c1\u8868\u793a\u4f4d\u4e8e\u6700\u53f3\u7aef\uff0c\u4ee5\u6b64\u6765\u786e\u5b9a\u4e0b\u4e00\u6b21 $dp$ \u7532\u866b\u6240\u9700\u8d70\u7684\u65f6\u95f4\uff0c\u7b54\u6848\u5373\u4e3a\u603b\u6c34\u5206\u51cf\u53bb\u6d88\u8017\u5373\u53ef\u3002\n\n\u6ce8\u610f\u521d\u59cb\u4f4d\u7f6e\u4e3a0\uff0c\u82e5\u6ca1\u6709\u8be5\u70b9\uff0c\u9700\u65b0\u52a0\u4e00\u4e2a\uff0c\u7279\u6b8a\u5904\u7406\u3002\n\n### \u4ee3\u7801\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,qd,a[305],dp[305][305][2];\n\nint jc(int mb){\n\tmemset(dp,127,sizeof(dp));\n\tdp[qd][qd][0]=0;\n\tdp[qd][qd][1]=0;//\u521d\u59cb\u5316 \n\tfor(int l=2;l<=mb;l++){\n\t\tfor(int i=1,j=i+l-1;j<=n;j++,i++){\n\t\t\tdp[i][j][0]=min(dp[i][j][0],min(dp[i+1][j][0]+(a[i+1]-a[i])*(mb-l+1),dp[i+1][j][1]+(a[j]-a[i])*(mb-l+1)));\n\t\t\tdp[i][j][1]=min(dp[i][j][1],min(dp[i][j-1][1]+(a[j]-a[j-1])*(mb-l+1),dp[i][j-1][0]+(a[j]-a[i])*(mb-l+1)));\n\t\t\t//mb-l+1\u4e3a\u559d\u8fd9\u4e00\u6ef4\u9732\u6c34\u524d\u8fd8\u6709\u591a\u5c11\u6ca1\u559d\uff0c\u5168\u90e8\u8ba1\u5165\u6d88\u8017 \n\t\t}\n\t}\n\tint mn=2e9;\n\tfor(int i=1;(i+mb-1)<=n;i++){\n\t\tmn=min(mn,min(dp[i][i+mb-1][0],dp[i][i+mb-1][1]));\n\t}\n\treturn mn;\n}\n\nint main()\n{\n\tcin>>n>>m;\n\tint rt=0;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i];\n\t\tif(!a[i])rt=1;//\u662f\u5426\u5b58\u5728\u4f4d\u7f6e\u4e3a0\u7684\u9732\u6c34 \n\t}\n\tif(!rt)n++;//\u82e5\u6ca1\u6709\uff0c\u65b0\u6dfb\u4e00\u4e2a \n\tsort(a+1,a+n+1);\n\tfor(int i=1;i<=n;i++){\n\t\tif(!a[i])qd=i;//\u786e\u5b9a\u8d77\u70b9 \n\t}\n\tint ans=-1;\n\tfor(int i=1;i<=n;i++){//\u679a\u4e3e\u559d\u6c34\u6ef4\u6570 \n\t\tans=max(ans,m*i-jc(i));\n\t}\n\tif(!rt)ans-=m;//\u7279\u6b8a\u5904\u7406\uff0c\u52a0\u7684\u4e00\u6ef4\u5e76\u65e0\u6c34\u5206 \n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1614684044,
        "uid": 166410,
        "name": "\u6f20\u5bd2",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4870 [BalticOI 2009 Day1]\u7532\u866b"
    },
    {
        "content": "\u6709\u9053\u7c7b\u4f3c\u7684\u9898\uff1a\u5976\u725b\u5403\u8349\uff08\u597d\u50cf\u4e0d\u662f\u6d1b\u8c37\u4e0a\u7684\uff09\u4e00\u6837\u7684\u610f\u601d\n\n\u8fd9\u79cd\u95ee\u9898\u53ef\u4ee5\u9006\u5411\u601d\u8003\uff1a\u4ee4f[i][j]\u8868\u793a\u4f4d\u4e8e\u533a\u95f4[i,j]\u7684\u6700\u5c11\u635f\u5931\u91cf\n\n\u7531\u4e8e\u5728\u7ecf\u8fc7\u4e00\u6bb5\u533a\u95f4\u7684\u65f6\u5019\uff0c\u5982\u679c\u8fd9\u6bb5\u533a\u95f4\u6709\u6c34\uff0c\u90a3\u4e48\u4e00\u5b9a\u8981\u628a\u5b83\u559d\u6389\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u4e00\u6bb5\u533a\u95f4[i,j]\u8bbf\u95ee\u5b8c\u6bd5\u540e\uff0c\u8fd9\u6bb5\u533a\u95f4\u4e0a\u662f\u6ca1\u6709\u6c34\u7684\n\n\u7531\u6b64\u6613\u77e5\uff0c\u7532\u866b\u8981\u4e48\u4f4d\u4e8e\u5de6\u7aef\uff0c\u8981\u4e48\u4f4d\u4e8e\u53f3\u7aef\n\n\u56e0\u6b64\uff0c\u4ee4f1[i][j]\u8868\u793a\u505c\u5728\u5de6\u7aef\u65f6\uff0c\u6700\u5c0f\u635f\u5931;f2[i][j]\u5c31\u662f\u53f3\u7aef\n\n\u6709\u4e86\u8fd9\u6837\u7684\u60f3\u6cd5\uff0c\u8f6c\u79fb\u65b9\u7a0b\u4e0d\u96be\u5f97\u51fa\uff1a\n```\nf1[i][j] = min(f1[i + 1][j] + dis[i][i + 1] * (n - j + i),\nf2[i][j - 1] + dis[j][j - 1] * (n - j + i));\n```\nf2\u540c\u7406",
        "postTime": 1548206756,
        "uid": 86721,
        "name": "L_M_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4870 \u3010[BalticOI 2009 Day1]\u7532\u866b\u3011"
    },
    {
        "content": "## \u9898\u610f\n\u7532\u866b\u5728\u5750\u6807\u8f740\u4f4d\u7f6e\uff0c\u5de6\u53f3\u79fb\u52a8\u4f7f\u5f97\u559d\u5230\u7684\u6c34\u6700\u591a\uff0c\u540c\u65f6\u4e00\u5355\u4f4d\u65f6\u95f4\u7532\u866b\u53ef\u4ee5\u79fb\u52a8\u4e00\u4e2a\u5355\u4f4d\u8ddd\u79bb\uff0c\u4e00\u5355\u4f4d\u65f6\u95f4\u6bcf\u6ef4\u6c34\u5206\u84b8\u53d11\u5355\u4f4d\u4f53\u79ef\n## \u601d\u8def  \n~~\u8003\u573a\u4e0a\u6ca1\u6709\u770b\u61c2\u9898\u76ee\uff0c\u628a\u6c34\u6ef4\u7684\u4f53\u79ef\u548c\u5355\u4f4d\u8ddd\u79bb\u641e\u6df7\u4e86~~  \n\u8fd9\u9053\u9898\u662f\u4e00\u9053\u5f88\u597d\u7684$dp$\u9898\u76ee\uff0c\u5176\u5173\u952e\u5728\u4e8e\u600e\u4e48\u5b9a\u4e49  \n\u6309\u7167\u4e00\u822c\u7684\u5b9a\u4e49\uff0c$dp_{[l][r][0/1]}$\u8868\u793a\u5df2\u7ecf\u559d\u4e86$l$\u5230$r$\u533a\u95f4\u7684\u6c34\u4e4b\u540e\uff0c\u5728$l$\u6216$r$\u4f4d\u7f6e\uff0c\u559d\u5230\u7684\u6c34\u7684\u6700\u5927\u503c\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e0d\u540c\u7684\u503c\u800c\u8a00\uff0c\u7ecf\u8fc7\u7684\u65f6\u95f4\u4e0d\u4e00\u6837\uff0c\u65e0\u6cd5\u7b97\u51fa\u4e0b\u4e00\u6b21\u8f6c\u79fb\u65f6\u65b0\u6c34\u6ef4\u7684\u8d21\u732e\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u4e0d\u540c\u7684\u503c\u5bf9\u5e94\u7684\u7ecf\u8fc7\u7684\u65f6\u95f4\u4e0d\u540c\uff0c\u503c\u6700\u5927\u7684\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u7684\uff0c\u5982\u679c\u7ef4\u62a4\u4e86\u65f6\u95f4\u548c\u559d\u7684\u603b\u6c34\u6ef4\u4f53\u79ef\uff0c\u628a\u6bcf\u79cd\u72b6\u6001\u5168\u90e8\u5b58\u4e0b\u6765\uff0c\u5e76\u4e0d\u597d\u5904\u7406\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5f88\u5dee\uff0c\u8003\u8651\u6362\u79cd\u5b9a\u4e49\u72b6\u6001  \n\u5728\u679a\u4e3e\u4e00\u4e2a$len$\uff08\u8868\u793a\u8981\u559d$len$\u6ef4\u6c34\uff09\u7684\u524d\u63d0\u4e0b\uff0c\u5b9a\u4e49$dp_{[l][r][0/1]}$\u8868\u793a\u5df2\u7ecf\u559d\u4e86$l$\u5230$r$\u533a\u95f4\u5185\u6240\u6709\u7684\u6c34\u6ef4\uff0c\u6240\u6d6a\u8d39\u7684\u6c34\u4f53\u79ef\u6700\u5c0f\u503c\uff0c\u6240\u8c13\u6d6a\u8d39\u7684\u6c34\u4f53\u79ef\u4e5f\u5c31\u662f\u84b8\u53d1\u6389\u7684\u6c34\u4f53\u79ef\u6570\uff0c\u5176\u4e2d\u5305\u62ec\u4e86\u8fd8\u6ca1\u6709\u559d\u7684$(len - (r - l + 1))$\u6ef4\u6c34\u548c\u5df2\u7ecf\u559d\u6389\u7684$(r - l + 1)$\u6ef4\u6c34\u7684\u603b\u6d6a\u8d39\u3002  \n\u6b64\u65f6\u6d6a\u8d39\u7684\u6c34\u6ef4\u6570\u5f88\u597d\u7b97\uff0c\u77e5\u9053\u4e86\u8fd8\u6ca1\u6709\u559d\u7684\u6c34\u6ef4\u6570\u548c\u8fd9\u6b21\u9700\u8981\u79fb\u52a8\u7684\u957f\u5ea6\uff08\u5373\u8bdd\u8d39\u7684\u65f6\u95f4\uff09\uff0c\u8fd9\u6b21\u8f6c\u79fb\u591a\u6d6a\u8d39\u7684\u6c34\u6ef4\u4f53\u79ef\u5c31\u662f$(len - (r - l + 1) - 1)$ $\\times$ $\\bigtriangleup x $  \n**\u8f6c\u79fb\u65b9\u7a0b**\uff1a  \n\u5b9a\u4e49$len$\u8868\u793a\u8fd9\u6b21\u8981\u559d$len$\u6ef4\u6c34\uff0c$siz = (r - l + 1)$  \n$dp_{[i][j][0]}$ = $min(dp_{[l + 1][r][0]} + (len - siz + 1) * (x[l + 1] - x[l]), dp_{[l + 1][r][1]} + (len - siz + 1) * (x[r] - x[l]))$  \n$dp_{[i][j][1]}$ = $min(dp_{[l][r - 1][1]} + (len - siz + 1) * (x[r] - x[r - 1]), dp_{[l][r - 1][0]} + (len - siz + 1) * (x[r] - x[l]))$  \n### $Code$\n```c++\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <iostream>\nusing namespace std;\ninline int read () {\n\tint x = 0, f = 1; char ch = getchar();\n\tfor (;!isdigit(ch); ch = getchar()) if (ch == '-') f = -1;\n\tfor (; isdigit(ch); ch = getchar()) x = x * 10 + ch - '0';\n\treturn x * f;\n}\nconst int maxn = 405;\nint n, m;\nlong long dp[maxn][maxn][2];\nlong long ans;\nint x[maxn];\nint main () {\n\tfreopen (\"beetle.in\", \"r\", stdin);\n\tfreopen (\"beetle.out\", \"w\", stdout);\n\tn = read(), m = read();\n\tint flag = 0;\n\tfor (register int i = 1; i <= n; i++) {\n\t\tx[i] = read();\n\t}\n\tx[++n] = 0;\n\tsort (x + 1, x + 1 + n);\n\tint pos = lower_bound(x + 1, x + 1 + n, 0) - x;\n\tint r;\n\tfor (register int len = 1; len <= n; len++) {\n\t\tmemset (dp, 0x7f, sizeof dp);\n\t\tdp[pos][pos][0] = 0, dp[pos][pos][1] = 0;\n\t\tfor (register int siz = 2; siz <= len; siz++) {\n\t\t\tfor (register int l = 1; l + siz - 1 <= n; l++) {\n\t\t\t\tr = l + siz - 1;\n\t\t\t\tdp[l][r][0] = min (dp[l + 1][r][0] + (len - siz + 1) * (x[l + 1] - x[l]), dp[l][r][0]);\n\t\t\t\tdp[l][r][0] = min (dp[l + 1][r][1] + (len - siz + 1) * (x[r] - x[l]), dp[l][r][0]);\n\t\t\t\tdp[l][r][1] = min (dp[l][r - 1][1] + (len - siz + 1) * (x[r] - x[r - 1]), dp[l][r][1]);\n\t\t\t\tdp[l][r][1] = min (dp[l][r - 1][0] + (len - siz + 1) * (x[r] - x[l]), dp[l][r][1]);\n\t\t\t\tans = max (ans, m * (siz - 1) - dp[l][r][1]);\n\t\t\t\tans = max (ans, m * (siz - 1) - dp[l][r][0]);\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1606721768,
        "uid": 359685,
        "name": "Blanc\u0430",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4870 \u3010[BalticOI 2009 Day1]\u7532\u866b\u3011"
    },
    {
        "content": "\u4e0d\u77e5\u9053\u6709\u6ca1\u6709\u4eba\u505a\u8fc7 Sue \u7684\u5c0f\u7403\u8fd9\u9053\u9898\u6ca1\u6709\u3002\u8fd9\u9053\u9898\u662f\u4e00\u6837\u7684\u3002\n\n\u8003\u8651\u5230\u8fd9\u4e2a\u9732\u6c34\u4f1a\u53d8\u6210 $0$ \u800c\u4e0d\u662f Sue \u7684\u5c0f\u7403\u91cc\u9762\u7684\u8d1f\u6570\uff0c\u6240\u4ee5\u8bf4\u6211\u4eec\u8003\u8651\u5403\u7684\u9732\u6c34\u6570\u91cf\u3002\u6ce8\u610f\u5230\u5982\u679c\u5403\u591a\u4e86\u51fa\u73b0\u8d1f\u6570\u7684\u6c34\u4e5f\u4e0d\u4f1a\u6bd4\u8fd9\u4e2a\u66f4\u4f18\uff0c\u800c\u4e14\u6211\u4eec\u4e5f\u679a\u4e3e\u5230\u4e86\uff0c\u6240\u4ee5\u8bf4\u6211\u4eec\u6682\u5148\u4e0d\u7ba1\u3002\n\n\u679a\u4e3e\u9732\u6c34\u7684\u6570\u91cf\u3002\u56e0\u4e3a\u9732\u6c34\u662f\u4f1a\u4e00\u76f4\u51cf\u5c11\u7684\uff0c\u4f60\u4e0d\u53ef\u80fd\u8d8a\u8fc7\u4e00\u4e2a\u4e0d\u5403\u53bb\u5403\u53e6\u5916\u4e00\u4e2a\uff0c\u6240\u4ee5\u8bf4\u6ee1\u8db3\u533a\u95f4 dp \u7684\u6027\u8d28\u3002\u77e5\u9053\u679a\u4e3e\u9732\u6c34\u7684\u6570\u91cf\uff0c\u5c31\u53ef\u4ee5\u679a\u4e3e\u957f\u5ea6\u4e00\u5b9a\u7684\u533a\u95f4\u8fdb\u884c dp\u3002\u5173\u952e\u5728\u4e8e\u5982\u4f55 dp\u3002\u4f60\u9996\u5148\u5bf9\u9732\u6c34\u6392\u4e2a\u5e8f\u561b\u3002\n\n\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4e86\u9732\u6c34\u7684\u603b\u91cf\uff0c\u5e76\u4e14\u6211\u4eec\u8fd8\u77e5\u9053\uff0c\u65f6\u95f4\u4f1a\u5bf9\u6bcf\u4e00\u4e2a\u8fd8\u6ca1\u6709\u5403\u6389\u7684\u9732\u6c34\u9020\u6210\u8d1f\u8d21\u732e\u3002\u7136\u800c\u6211\u4eec\u7684\u533a\u95f4 dp \u5728\u4fdd\u5b58\u72b6\u6001\u7684\u65f6\u5019\uff0c\u4fdd\u5b58\u4e86\u8fd9\u4e2a\u533a\u95f4\u7684\u5927\u5c0f\uff0c\u4e5f\u5c31\u53ef\u4ee5\u63a8\u51fa\u6709\u591a\u5c11\u9732\u6c34\u8fd8\u6ca1\u6709\u88ab\u5403\u6389\u3002\n\n\u4e8e\u662f\u8003\u8651\u8d39\u7528\u63d0\u524d\u8ba1\u7b97\uff0c\u5b9a\u4e49 $dp_{l,r,0 \\operatorname{or} 1}$ \u8868\u793a\u73b0\u5728\u5403\u5b8c\u4e86 $[l,r]$ \u91cc\u9762\u7684\u6240\u6709\u9732\u6c34\uff0c\u73b0\u5728\u5728 $l$ \u6216 $r$\uff0c\u7684\u6700\u591a\u80fd\u559d\u5230\u7684\u6c34\u91cf\u3002\u56e0\u4e3a\u6211\u4eec\u786e\u5b9e\u65e0\u6cd5\u4fdd\u5b58\u65f6\u95f4\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u5e72\u8106\u5728\u79fb\u52a8\u7684\u8fc7\u7a0b\u4e2d\u51cf\u53bb\u5df2\u7ecf\u4e22\u5931\u7684\u6c34\u91cf\uff08\u76f8\u5bf9\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u5728\u79fb\u52a8\u7684\u8fc7\u7a0b\u4e2d\u51cf\u53bb\u4e86\u4e22\u5931\u7684\u6c34\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5047\u8bbe\u73b0\u5728\u7684\u9732\u6c34\u5927\u5c0f\u5c31\u662f $m$\uff0c\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u5c06\u65f6\u95f4\u7684\u8d1f\u8d21\u732e\u51cf\u53bb\u4e86\uff09\u3002\u4ee4 $N-r+l$\uff08\u5f53\u524d\u679a\u4e3e\u7684\u9732\u6c34\u603b\u91cf $N$ \u8f6c\u79fb\u7684\u533a\u95f4 $[l,r]$\uff09\u4e3a $s$\uff0c\u53ef\u4ee5\u5217\u51fa\u65b9\u7a0b\uff1a\n\n$$\n\\begin{cases}\ndp_{l,r,0}= \\max (dp_{l+1,r,0}-(a_{l+1}-a_l) \\times s,dp_{l+1,r,1}-(a_r-a_l)\\times s)+m  \\\\\ndp_{l,r,1} = \\max(dp_{l,r-1,1}-(a_r-a_{r-1})\\times s,dp_{l,r-1,0}-(a_r-a_l) \\times s)+m\n\\end{cases}\n$$\n\n\u8003\u8651\u89e3\u91ca\u8fd9\u4e2a\u65b9\u7a0b\uff0c\u53ef\u4ee5\u7406\u89e3\u6210\u4e3a\u5468\u56f4\u7684\u9732\u6c34\u90fd\u8fd8\u5728\u4e22\u5931\uff0c\u5728\u8fd9\u91cc\u51cf\u53bb\u8d21\u732e\uff1b\u76f8\u5bf9\u8ba4\u4e3a\u5f53\u524d\u8fd9\u4e2a\u9732\u6c34\u6ca1\u6709\u635f\u5931\u6c34\u91cf\uff0c\u56e0\u4e3a\u635f\u5931\u7684\u6c34\u91cf\u6211\u4eec\u5df2\u7ecf\u4e22\u53bb\u4e86\u3002\n\ndp \u8fc7\u7a0b $O(n^2)$\uff0c\u679a\u4e3e\u5927\u5c0f $O(n)$\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^3)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint Abs(int x){return x>0?x:-x;}\nint dp[305][305][2],n,m,a[305],ans;\nint main(){\n\tscanf(\"%d %d\",&n,&m);\n\tfor(int i=1;i<=n;++i)\tscanf(\"%d\",&a[i]);\n\tsort(a+1,a+1+n);\n\tfor(int N=1;N<=n;++N)\n\t{\n\t\tmemset(dp,0,sizeof dp);\n\t\tfor(int i=1;i<=n;++i)\tdp[i][i][0]=dp[i][i][1]=m-Abs(a[i])*N,ans=max(ans,dp[i][i][0]);\n\t\tfor(int dis=2;dis<=N;++dis)\n\t\t{\n\t\t\tfor(int l=1,r=dis;r<=n;++l,++r)\n\t\t\t{\n\t\t\t\tdp[l][r][0]=max(dp[l+1][r][0]+m-Abs(a[l+1]-a[l])*(N-dis+1),dp[l+1][r][1]+m-Abs(a[r]-a[l])*(N-dis+1));\n\t\t\t\tdp[l][r][1]=max(dp[l][r-1][1]+m-Abs(a[r]-a[r-1])*(N-dis+1),dp[l][r-1][0]+m-Abs(a[r]-a[l])*(N-dis+1));\n\t\t\t\tans=max(ans,max(dp[l][r][0],dp[l][r][1]));\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1606224832,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4870 \u3010[BalticOI 2009 Day1]\u7532\u866b\u3011"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/eastcloud/p/17101408.html)\n\n### \u7b80\u8981\u9898\u610f\n\n\u5728\u4e00\u4e2a\u6570\u8f74\u4e0a\u6709 $n$ \u6ef4\u9732\u6c34\uff0c\u6bcf\u6ef4\u9732\u6c34\u521d\u59cb\u6c34\u91cf\u4e3a $m$\uff0c\u6bcf\u79d2\u4f1a\u84b8\u53d1\u4e00\u6ef4\u6c34\uff0c\u4e00\u4e2a\u7532\u866b\u521d\u59cb\u5728\u539f\u70b9\uff0c\u901f\u5ea6\u4e3a 1\uff0c\u6c34\u80fd\u77ac\u95f4\u559d\u5b8c\uff0c\u95ee\u5b83\u6700\u591a\u80fd\u559d\u5230\u51e0\u6ef4\u6c34\u3002\n\n### \u9898\u76ee\u5206\u6790\n\n\u5bf9\u4e8e\u8fd9\u79cd\u79fb\u52a8\u533a\u95f4\u8fde\u7eed\u7684\u9898\u76ee\uff0c\u6211\u4eec\u9996\u5148\u8003\u8651\u533a\u95f4 dp\uff0c\u8bb0 $f_{l,r,0}$ \u8868\u793a\u559d\u5b8c\u533a\u95f4 $[l,r]$ \u7684\u6c34\u4e14\u5728\u5de6\u8fb9\u8868\u793a\u7684\u6700\u5c0f\u65f6\u95f4\uff0c\u7b2c\u4e09\u7ef4\u4e3a 1 \u7684\u65f6\u5019\u5728\u53f3\u8fb9\uff0c\u636e\u6b64\u8bbe\u8ba1\u8f6c\u79fb\u3002\n\n\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u672c\u9898\u4e2d\u591a\u4e86\u4e00\u7ef4\u65f6\u95f4\uff0c\u5f3a\u884c\u589e\u52a0\u7ef4\u5ea6\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u7206\uff0c\u6211\u4eec\u8003\u8651\u63a7\u5236\u53d8\u91cf\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0a\u8ff0\u8f6c\u79fb\u6700\u5927\u7684\u95ee\u9898\u5728\u4e8e\u6211\u4eec\u4e0d\u77e5\u9053\u8f6c\u79fb\u4e4b\u540e\u6bcf\u4e2a\u6c34\u6ef4\u7684\u5269\u4f59\u6c34\u91cf\uff0c\u800c\u5269\u4f59\u6c34\u91cf\u548c\u6700\u591a\u7684\u6c34\u90fd\u53ef\u4ee5\u901a\u8fc7\u5df2\u84b8\u53d1\u7684\u6c34\u91cf\u548c\u603b\u5171\u7ecf\u8fc7\u7684\u6c34\u6ef4\u6570\u6c42\u51fa\uff0c\u8f6c\u6362\u540e\u590d\u6742\u5ea6\u964d\u4f4e\uff0c\u7b26\u5408\u6211\u4eec\u7684\u8981\u6c42\u3002\n\n\u4e8e\u662f\u6211\u4eec\u628a\u50a8\u5b58\u5bf9\u8c61\u6539\u4e3a\u5df2\u84b8\u53d1\u6c34\u91cf\uff0c\u5916\u5c42\u679a\u4e3e\u4e00\u4e2a\u603b\u5171\u7ecf\u8fc7\u7684\u6c34\u6ef4\u6570\uff0c\u5b9a\u4e49\u559d\u5b8c\u5f53\u524d\u7684\u6c34\u540e\u8fd8\u5dee $k$ \u6ef4\u6c34\u6ca1\u559d\uff0c$val$ \u4e3a\u6392\u5e8f\u540e\u7684\u6c34\u6ef4\u6a2a\u5750\u6807\uff0c\u53ef\u4ee5\u5f97\u5230\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$f_{l,r,0}=\\min(f_{l+1,r,1}+k \\times |val_r-val_l|,f_{l+1,r,0}+k \\times |val_{l+1}-val_l|)$\n\n$f_{l,r,1}=\\min(f_{l,r-1,1}+k \\times |val_r-val_{r-1}|,f_{l,r-1,0}+k \\times |val_{l}-val_{r}|)$\n\n\u5b9e\u73b0\u65f6\u8fd8\u9700\u8981\u6ce8\u610f\u7279\u5224\u53ea\u559d\u4e00\u4e2a\u6c34\u6ef4\u65f6\u7684\u8fb9\u754c\u60c5\u51b5\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#define ll long long\nusing namespace std;\nll n,m;\nll val[1000001];\nll dp[301][301][2];\nll calc(int lim){\n\tll ans=0x3f3f3f3f3f3f3f3f;\n\tfor(int len=1;len<=lim;len++){\n\t\tfor(int l=1;l+len-1<=n;l++){\n\t\t\tint r=l+len-1;\n\t\t\tif(len==1)dp[l][r][0]=dp[l][r][1]=lim*abs(val[l]);\n\t\t\telse{\n\t\t\t\tdp[l][r][0]=dp[l][r][1]=0x3f3f3f3f3f3f3f3f;\n\t\t\t\tdp[l][r][0]=min(dp[l][r][0],dp[l+1][r][0]+(lim-len+1)*abs(val[l+1]-val[l]));\n\t\t\t\tdp[l][r][0]=min(dp[l][r][0],dp[l+1][r][1]+(lim-len+1)*abs(val[r]-val[l]));\n\t\t\t\tdp[l][r][1]=min(dp[l][r][1],dp[l][r-1][1]+(lim-len+1)*abs(val[r]-val[r-1]));\n\t\t\t\tdp[l][r][1]=min(dp[l][r][1],dp[l][r-1][0]+(lim-len+1)*abs(val[l]-val[r]));\n\t\t\t}\n\t\t\tif(len==lim) ans=min(ans,min(dp[l][r][0],dp[l][r][1]));\n\t\t}\n\t}\n\treturn ans;\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++) cin>>val[i];\n\tsort(val+1,val+n+1);\n\tll ans=0;\n\tfor(int i=1;i<=n;i++)ans=max(ans,i*m-calc(i));\n\tcout<<ans<<endl;\n}\n```\n",
        "postTime": 1675833880,
        "uid": 421265,
        "name": "eastcloud",
        "ccfLevel": 4,
        "title": "P4870 \u7532\u866b"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P4870)\n\n#### \u89e3\u6790\n\n\n\n\u7c7b\u4f3c\u4e8e\u8d39\u7528\u63d0\u524d\u8ba1\u7b97\u7684\u9898\u76ee\uff1a[SDOI2008 Sue\u7684\u5c0f\u7403](https://www.cnblogs.com/lyttt/p/14019547.html)\uff08\u597d\u50cf\u5c31\u662f\u56e0\u4e3a\u8fd9\u9053\u9898\u624d\u53bb\u5b66\u8fd9\u4e2a\u7684\n\n\u5b9a\u4e49$f[0/1][i][j]$\u8868\u793a\u5403\u6389$[i,j]$\u9732\u6c34\u5e76\u4e14\u505c\u7559\u5728\u6700\u5de6\u7aef/\u6700\u53f3\u7aef\u7684\u6700\u5927\u6c34\u5206\u3002\n\n\u8f6c\u79fb\uff1a$f[0][i][j]=min(f[0][i+1][j]+(x[i+1]-x[i])*(i+n-j),f[1][i+1][j]+(x[j]-x[i])*(i+n-j))$\n\n$f[1][i][j]=min(f[1][i][j-1]+(x[j]-x[j-1])*(i-1+n-(j-1)),f[0][i][j-1]+(x[j]-x[i])*(i-1+n-(j-1)))$\n\n\u4f46\u662f\u8fd9\u9053\u9898\u6709\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u5b83\u7b26\u5408\u7269\u7406\u5e38\u8bc6\uff0c\u6c34\u5206\u84b8\u53d1\u4e86\u5c31\u6ca1\u6709\u4e86\uff0c\u800c\u4e0d\u4f1a\u53d8\u6210\u8d1f\u6570\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f\u6ca1\u6709\u4e0a\u9053\u9898\u7684$Sue$\u8981\u6c42\u4f60\u635e\u5168\u90e8\u7684\u5f69\u7403\uff0c\u4eba\u5bb6\u7532\u866b\u8981\u6d3b\u547d\u7684\uff0c\u53ea\u8981\u6c42\u6c34\u5206\u6700\u5927\u3002\n\n\u5982\u679c\u6328\u4e2a\u8ba1\u7b97\u6bcf\u4e2a\u6c34\u6ef4\u662f\u4e0d\u662f\u8d1f\u6570\uff0c\u90a3\u4e48\u590d\u6742\u5ea6\u65e0\u7591\u4f1a\u5f88\u5927\uff08\u800c\u4e14\u4f18\u5316\u4e5f\u641e\u6ca1\u4e86\u597d\u561b\n\n\u6240\u4ee5\u53ef\u4ee5\u679a\u4e3e\u4e00\u4e0b\u5403\u6389\u9732\u6c34\u7684\u6570\u91cf\uff0c\u6bcf\u4e2a\u6570\u91cf\u53d6\u6700\u5927\u503c\u3002\u53ef\u4ee5\u53d1\u73b0\u8fd9\u6837\u505a\u7684\u8bdd\uff0c\u8d1f\u6570\u7684\u60c5\u51b5\u4e00\u5b9a\u4e0d\u4f18\uff0c\u6240\u4ee5\u53ef\u4ee5\u89c4\u907f\u6389\u3002\n\n------\n\n#### \u25baCode View\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\n#define N 305\n#define INF 0x3f3f3f3f\n#define LL long long\nint rd()\n{\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1; c=getchar();}\n\twhile(c>='0'&&c<='9'){x=(x<<1)+(x<<3)+(c^48);c=getchar();}\n\treturn f*x;\n}\nint n,m;\nint x[N];\nLL f[2][N][N],ans;\nint Abs(int x)\n{\n\tif(x>=0) return x;\n\treturn -x;\n}\nint main()\n{\n\tn=rd(),m=rd();\n\tfor(int i=1;i<=n;i++)\n\t\tx[i]=rd();\n\tx[++n]=0;\n\tsort(x+1,x+n+1);\n\tint st; \n\tfor(int i=1;i<=n;i++)\n\t\tif(x[i]==0)\n\t\t{\n\t\t\tst=i;\n\t\t\tbreak;\n\t\t}\n\tfor(int p=1;p<=n;p++)\n\t{\n\t\tmemset(f,INF,sizeof(f));\n\t\tf[0][st][st]=f[1][st][st]=0;\n\t\tfor(int len=1;len<=p;len++)\n\t\t\tfor(int i=1;i+len<=n;i++)\n\t\t\t{\n\t\t\t\tint j=i+len;\n\t\t\t\tf[0][i][j]=min(f[0][i+1][j]+Abs(x[i+1]-x[i])*(i+p-j),f[1][i+1][j]+Abs(x[j]-x[i])*(i+p-j));\n\t\t\t\tf[1][i][j]=min(f[1][i][j-1]+Abs(x[j-1]-x[j])*(i-1+p-(j-1)),f[0][i][j-1]+Abs(x[i]-x[j])*(i-1+p-(j-1)));\n\t\t\t\t\n\t\t\t}\n\t\tfor(int i=1;i+p-1<=n;i++)\n\t\t\tans=max(ans,1ll*m*(p-1)-min(f[0][i][i+p-1],f[1][i][i+p-1]));\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1606138803,
        "uid": 41165,
        "name": "Starlight_Glimmer",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4870 \u3010[BalticOI 2009 Day1]\u7532\u866b\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5e94\u8be5\u4e00\u773c\u5c31\u80fd\u770b\u51fa\u662f\u533a\u95f4$DP$\uff0c\u4f46\u662f\u5173\u952e\u5728\u4e8e\u600e\u4e48\u5199,\u6211\u4eec\u7528$f[i][j][0/1]$\u8868\u793a\u53d6\u5b8c$i$~$j$\u4e4b\u95f4\u7684\u9732\u6c34\uff0c\u505c\u5728$i$\u6216$j$**\u6d6a\u8d39\u7684\u6c34\u5206**,\u56e0\u4e3a\u9732\u6c34\u6c34\u5206\u4e0d\u53ef\u80fd\u4e3a\u8d1f\u6570\uff0c\u800c\u8d70\u5230\u540e\u6765\u53ef\u80fd\u884c\u8d70\u8def\u7a0b$>m$\uff0c\u4f7f\u5f97\u8ba1\u7b97\u51fa\u7684\u6c34\u5206\u4e3a\u8d1f\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u679a\u4e3e\u53d6\u7684\u603b\u7684\u9732\u6c34\u6570$p$\uff08\u6ce8\u610f\u4e0d\u662f\u6c34\u5206\u6570\uff09\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5217\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$f[i][j][0]=min(f[i+1][j][0]+(p-len+1)\\times(a[i+1]-a[i]),f[i+1][j][1]+(p-len+1)\\times(a[j]-a[i]));$ \n\n$f[i][j][1]=min(f[i][j-1][1]+(p-len+1)\\times(a[j]-a[j-1]),f[i][j-1][0]+(p-len+1)\\times(a[j]-a[i]));$\n\n$len$\u4e3a$j-i+1$\uff0c\u5373\u5f53\u524d\u91c7\u96c6\u7684\u9732\u6c34\u6570\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ninline int read(){\n   int s=0,w=1;\n   char ch=getchar();\n   while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n   while(ch>='0'&&ch<='9') s=s*10+ch-'0',ch=getchar();\n   return s*w;\n}\nint n,m,a[4000],f[400][400][2],t[400][400][2],ans;\nint main(){\n//\tfreopen(\"water.in\",\"r\",stdin);\n//\tfreopen(\"water.out\",\"w\",stdout);\n    n=read();m=read();\n    for (int i=1;i<=n;i++) a[i]=read();\n    a[++n]=0;//\u7531\u4e8e\u4ece0\u51fa\u53d1\uff0c\u6545\u6dfb\u52a0\u4e00\u4e2a\u70b9\u4e3a0\n    sort(a+1,a+1+n);//\u6392\u5e8f\u5e94\u8be5\u4e0d\u96be\u7406\u89e3\n    int z=lower_bound(a+1,a+1+n,0)-a;//\u627e\u51fa\u6392\u5e8f\u540e0\u5728\u7684\u4f4d\u7f6e\n    for (int p=1;p<=n;p++){//\u679a\u4e3ep\n        memset(f,0x3f,sizeof(f));\n        f[z][z][0]=0;f[z][z][1]=0;//\u521d\u59cb\u5316\n        for (int len=2;len<=p;len++)\n            for (int i=1;i<=n-len+1;i++){\n                int j=i+len-1;\n                f[i][j][0]=min(f[i+1][j][0]+(p-len+1)*(a[i+1]-a[i]),f[i+1][j][1]+(p-len+1)*(a[j]-a[i])); \n                f[i][j][1]=min(f[i][j-1][1]+(p-len+1)*(a[j]-a[j-1]),f[i][j-1][0]+(p-len+1)*(a[j]-a[i]));//\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n                ans=max(ans,(len-1)*m-min(f[i][j][1],f[i][j][0]));\u7edf\u8ba1\u7b54\u6848\n            }\n    }\n    cout<<ans;\n}\n```",
        "postTime": 1548247070,
        "uid": 54260,
        "name": "tcchyc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4870 \u3010[BalticOI 2009 Day1]\u7532\u866b\u3011"
    }
]
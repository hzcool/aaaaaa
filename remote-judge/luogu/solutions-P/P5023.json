[
    {
        "content": "**upd on 2018.12.28 \u4fee\u590d\u4e86\u8bc1\u660e$Ans(n,m+1)=3 \\times Ans(n,m)$\u7684bug**\n\n------------\n\n\u5f53\u521d\u5728\u8003\u573a\u4e0a\u770b\u5230\u6570\u636e\u8303\u56f4\u4ee5\u4e3a\u662f\u4e2a\u7384\u5b66\u72b6\u538b+\u627e\u89c4\u5f8b\uff0c\u60f3\u4e86\u4e00\u4f1a\u611f\u89c9\u4e0d\u53ef\u505a\u7684\u6837\u5b50\uff0c\u4e8e\u662f\u5c31\u5f03\u6389\u53bb\u6de6T3\u4e86QAQ\u3002\u73b0\u5728\u6211\u82b1\u4e86\u4e00\u665a\u4e0a+\u4e00\u4e0a\u5348\u624b\u73a9\u6837\u4f8b\u63a8\u67ff\u5b50\uff0c\u5e76\u4e14\u8fd8\u53e3\u80e1\u4e86\u8fd9\u7bc7\u6709~~\u4e25\u683c~~\u8bc1\u660e\u7684\u9898\u89e3\u9020\uff08bao\uff09\u798f\uff08fu\uff09\u793e\u4f1a\u3002\n\n\u5bf9\u4e8e\u8fd9\u9053NOIplus\u9898\u76ee\uff0c\u9996\u5148\u9700\u8981yy\u51fa\u4e24\u4e2a\u91cd\u8981\u7684\u6027\u8d28\uff1a\n\n\u6027\u8d281\u3001\u6bcf\u4e00\u6761\u5bf9\u89d2\u7ebf\u4e0a\u586b\u7684\u6570\u662f\u5355\u8c03\u4e0d\u589e\u7684\u3002\n\n\u6027\u8d282\u3001\u5982\u679c(x-1,y)\u548c(x,y-1)\u7684\u586b\u7684\u6570\u76f8\u540c\uff0c\u90a3\u4e48\u4ee5(x,y)\u4e3a\u5de6\u4e0a\u89d2\u3001\u4ee5\u6574\u4e2a\u77e9\u9635\u7684\u53f3\u4e0b\u89d2\u4e3a\u53f3\u4e0b\u89d2\u7684\u5b50\u77e9\u9635\u5185\u6240\u6709\u5bf9\u89d2\u7ebf\u5185\u7684\u586b\u6570\u5404\u81ea\u76f8\u540c\u3002\n\n\u6ce8\u610f\u672c\u6587\u4e2d\u7684\u5bf9\u89d2\u7ebf\u5747\u6307\u4ece\u5de6\u4e0b\u5230\u53f3\u4e0a\u7684\u5bf9\u89d2\u7ebf\u3002\n\n![](https://i.loli.net/2018/12/26/5c2327ccb9643.png)\n\n\u6709\u65f6\u4e3a\u4e86\u907f\u514d\u6df7\u6dc6\uff0c\u6211\u4f1a\u753b\u6210\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\n\n![](https://i.loli.net/2018/12/26/5c23281e3108e.png)\n\n~~\u603b\u4e4b\u9ed1\u6846\u8868\u793a\u6846\u91cc\u7684\u5bf9\u89d2\u7ebf\u7684\u586b\u6570\u8981\u76f8\u7b49~~\n\n\u8fd9\u4e24\u4e2a\u7ed3\u8bba\u5f88\u5bb9\u6613\u7528\u53cd\u8bc1\u6765\u8bc1\u660e\uff0c\u5177\u4f53\u7ec6\u8282\u8bf7\u8bfb\u8005\u81ea\u884c\u6495\u70e4\n\n\u7136\u540e\u8fd8\u6709\u4e00\u4e2a\u542c\u8bf4\u5f88\u663e\u7136\u7684\u7ed3\u8bba\uff1a\u4ee4$Ans(n,m)$\u8868\u793a\u5bbd\u4e3a$m$\u9ad8\u4e3a$n$\u7684\u77e9\u9635\u586b\u6570\u65b9\u6848\uff0c\u5219$Ans(n,m)=Ans(m,n)$\u3002\n\n\u4e0d\u660e\u767d\u600e\u4e48\u56de\u4e8b\u7684\u540c\u5b66\u53ef\u4ee5\u8fd9\u6837\u8003\u8651\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5408\u6cd5\u7684$m>n$\u7684\u65b9\u6848\uff0c\u5c06\u586b\u5165\u7684\u6570\u5168\u90e8\u53cd\u8f6c\uff0c\u7136\u540e\u5c06\u6574\u4e2a\u77e9\u9635\u987a\u65f6\u9488\u8f6c90\u00b0\uff0c\u6700\u540e\u628a\u77e9\u9635\u5de6\u53f3\u8f74\u5bf9\u79f0\u4e00\u4e0b\uff0c\u5c31\u80fd\u5f97\u5230\u4e00\u4e2a$n>m$\u7684\u65b9\u6848\u3002\n\n![](https://i.loli.net/2018/12/26/5c232e36e39b6.png)\n\n![](https://i.loli.net/2018/12/26/5c232e36e51ec.png)\n\n![](https://i.loli.net/2018/12/26/5c232e36d0c17.png)\n\n~~\u770b\u4e0a\u53bb\u6ca1\u95ee\u9898~~\n\n\u4e8e\u662f\u4e3a\u4e86\u65b9\u4fbf\uff0c\u540e\u6587\u5168\u90e8\u9ed8\u8ba4$n \\le m$\u3002\n\n\u5230\u8fd9\u91cc\u5c31\u5df2\u7ecf\u80fd\u624b\u6478\u51fa$n=1$\u548c$n=2$\u7684\u60c5\u51b5\u4e86\u3002\u6211\u4eec\u5c06\u6574\u4e2a\u77e9\u9635\u6309\u7167\u6bcf\u4e00\u6761\u5bf9\u89d2\u7ebf\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u9636\u6bb5\uff0c\u7a0d\u5fae\u753b\u4e0b\u56fe\u5c31\u80fd\u770b\u51fa$Ans(1,m)=2^m$\u4ee5\u53ca$Ans(2,m)=4 \\cdot 3^{m-1}$\u3002\u6ce8\u610f\u8fd9\u91cc\u662f\u4fdd\u8bc1\u4e86m\u5927\u4e8e\u7b49\u4e8en\u7684\u3002\n\n~~\u8fd9\u4e24\u4e2a\u5f0f\u5b50\u5e94\u8be5\u4e0d\u7528\u591a\u89e3\u91ca\u5427~~\n\n\u5bf9\u4e8e$n \\ge 4$\uff0c\u6211\u4eec\u518d\u5206\u4e3a4\u79cd\u60c5\u51b5\u8003\u8651\uff08$n=3$\u7684\u60c5\u51b5\u7a0d\u540e\u8003\u8651\uff09\uff1a\n\ncase1\uff1a\u6700\u4e0a\u9762\u7684\u4e24\u4e2a\u586b\u6570\u76f8\u540c\n\n![](https://i.loli.net/2018/12/26/5c23331d298c4.png)\n\ncase2\uff1a\u6700\u4e0a\u9762\u7684\u4e24\u4e2a\u6570\u4e0d\u540c\uff0c\u4e0b\u9762\u4e00\u6761\u5bf9\u89d2\u7ebf\u76843\u4e2a\u586b\u6570\u76f8\u540c\n\n![](https://i.loli.net/2018/12/26/5c23331d3d6e8.png)\n\ncase3\uff1a\u90a33\u4e2a\u586b\u6570\u4e3a1\uff0c0\uff0c0\n\n![](https://i.loli.net/2018/12/26/5c23331d15e4b.png)\n\ncase4\uff1a3\u4e2a\u586b\u6570\u4e3a1\uff0c1\uff0c0\n\n![](https://i.loli.net/2018/12/26/5c23331d2b7da.png)\n\n\u5bb9\u6613\u53d1\u73b0\u65e0\u8bba\u662f\u54ea\u79cd\u60c5\u51b5\uff0c\u603b\u662f\u4f1a\u5b58\u5728\u4e00\u4e2a\u70b9(x,y)\u4f7f\u5f97(x-1,y)\u548c(x,y-1)\u586b\u6570\u76f8\u540c\uff0c\u8fd9\u6837\u5c31\u80fd\u591f\u9650\u5236\u6389\u4e00\u5927\u7247\u533a\u57df\uff0c~~\u662f\u624b\u73a9\u901a\u9879\u516c\u5f0f\u7684\u91cd\u8981\u4fdd\u8bc1~~\u3002\n\n\u53d1\u73b0\u8fd9\u4e2a\u6027\u8d28\u540e\u5c31\u80fd\u8bc1\u660e\u51fa\u53e6\u4e00\u7ed3\u8bba\u4e86\uff1a\u5bf9\u4e8e$n \\ge 4$\u4e14$m \\ge n+1$\uff0c\u6709$Ans(n,m+1)=3 \\times Ans(n,m)$\n\n\u8bc1\u660e\u5176\u5b9e\u8d85\u7b80\u5355\n\n![](https://i.loli.net/2018/12/26/5c233cae0fc11.png)\n\n\u53ef\u4ee5\u53d1\u73b0\u9ed1\u6846\u91cc\u4e00\u5b9a\u662f\u88ab\u6027\u8d282\u9650\u5236\u6389\u7684\uff0c\u6240\u4ee5\u6574\u6761\u7eff\u8272\u7684\u5bf9\u89d2\u7ebf\u586b\u6570\u90fd\u76f8\u540c\uff0c\u800c\u4e14\u7531\u4e8e\u7eff\u8272\u65b9\u6846\u4f4d\u4e8e\u77e9\u9635\u4e0b\u8fb9\u754c\uff0c\u5b83\u662f\u4e0d\u53d7\u5176\u5b83\u586b\u6570\u9650\u5236\u7684\uff0c\u6362\u53e5\u8bdd\u8bf4\u5728\u6240\u6709\u7684\u5408\u6cd5\u65b9\u6848\u4e2d\uff0c\u67091/2\u7684\u60c5\u51b5\u5b83\u7b49\u4e8e0\uff0c\u5269\u4e0b1/2\u7684\u60c5\u51b5\u7b49\u4e8e1\n\n\u7136\u540e\u8003\u8651\u5728\u539f\u77e9\u9635\u53f3\u8fb9\u518d\u6dfb\u4e00\u5217\n\n![](https://i.loli.net/2018/12/26/5c233dca5f74f.png)\n\n\u7070\u8272\u7c97\u2642\u6761\u5212\u6389\u7684\u65b9\u683c\u7531\u4e8e\u53d7\u5230\u6027\u8d282\u7684\u5f71\u54cd\uff0c\u5b83\u4eec\u5fc5\u987b\u8981\u4e0e\u5404\u81ea\u5de6\u4e0b\u65b9\u7684\u683c\u5b50\u4e2d\u586b\u6570\u76f8\u540c\uff0c\u56e0\u6b64\u8fd9\u4e00\u90e8\u5206\u4e0d\u4f1a\u5bf9\u7b54\u6848\u4ea7\u751f\u65b0\u7684\u8d21\u732e\uff1b\u4f46\u84dd\u8272\u4f4d\u4e8e\u53f3\u4e0b\u89d2\uff0c\u5b83\u7684\u586b\u6570\u662f\u81ea\u7531\u7684\u3002\n\n![](https://i.loli.net/2018/12/26/5c233ea616b80.png)\n\n\u53d7\u5230\u6027\u8d281\u7684\u9650\u5236\uff0c\u82e5\u7eff\u8272\u683c\u5b50\u5185\u586b\u6570\u4e3a1\uff0c\u5219\u53f3\u4e0a\u65b9\u7684\u65b9\u683c\u80fd\u586b0\u62161\uff0c\u4f1a\u4ea7\u751f$2\\times2=4$\u500d\u7684\u8d21\u732e\uff1b\u5426\u5219\u53ea\u80fd\u586b0\uff0c\u53ea\u6709$2\\times1=2$\u500d\u7684\u8d21\u732e\u3002\u7efc\u5408\u8d77\u6765\uff0c\u603b\u7684\u8d21\u732e\u5c31\u662f\u539f\u6765\u7684$\\frac{1}{2}\\times4+\\frac{1}{2}\\times2=3$\u500d\u3002\n\n~~\u7b80\u5355\u5427\uff0c\u6ca1\u9a97\u4f60~~\n\n**upd**\uff1a\u7b2c\u4e8c\u5929\u665a\u4e0a\u53d1\u73b0\u81ea\u5df1zz\u4e86\u2026\u2026\n\n\u56e0\u4e3a\u7b2c\u4e8c\u6392\u7684\u786e\u6709\u53ef\u80fd\u6ca1\u6709\u88ab\u8986\u76d6\u5230\uff0c\u5c31\u50cf\u8fd9\u6837\n\n![](https://i.loli.net/2018/12/28/5c25cedb3b09b.png)\n\n\u4e8e\u662f\u4e0a\u9762\u7684\u8bc1\u660e\u5c31\u6109\u5feb\u5730GG\u4e86\n\n\u7d27\u6025\u4fee\u4e00\u6ce2\u9505\n\n\u8ddf\u4e4b\u540e\u63a8\u5f0f\u5b50\u7684\u64cd\u4f5c\u4e00\u6837\uff0c\u679a\u4e3e\u7b2c\u4e00\u6b21\u51fa\u73b0\u76f8\u540c\u6570\u7684\u4f4d\u7f6e\uff0c\u6211\u4eec\u53d1\u73b0\u5f53\u8fd9\u4e2a\u4f4d\u7f6e\u6bd4\u8f83\u9760\u524d\u4f7f\u5f97\u7ea2\u8272\u65b9\u5757\u88ab\u8986\u76d6\u5230\u65f6\u662f\u65e0\u9700\u8003\u8651\u7684\uff0c\u56e0\u4e3a\u6b64\u65f6\u4e0e\u4e0a\u65b9\u7684\u60c5\u5f62\u7b49\u4ef7= =\n\n\u4e8e\u662f\u628a\u7cbe\u529b\u96c6\u4e2d\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\n\n![](https://i.loli.net/2018/12/28/5c25d20828655.png)\n\n![](https://i.loli.net/2018/12/28/5c25d2083a061.png)\n\n\u8003\u8651\u7b2c\u4e00\u5f20\u56fe\uff0c\u539f\u5148\u7eff\u8272\u90e8\u5206\u67093\u79cd\u586b\u6cd5\uff0c\u6dfb\u4e00\u5217\u540e\u8fd0\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u5206\u6790\u51fa\u4ea7\u751f\u7684\u65b0\u8d21\u732e\uff0c\u5b83\u662f\u539f\u6765\u7684$\\frac{2}{3}+\\frac{2}{3}+\\frac{4}{3}=\\frac{8}{3}$\u500d\n\n\u540c\u7406\u7b97\u51fa\u7b2c\u4e8c\u5f20\u56fe\u662f\u539f\u6765\u7684$4$\u500d\n\n\u63a5\u7740\u540c\u65f6\u8003\u8651\u8fd9\u4e24\u79cd\u60c5\u51b5\uff0c\u7b97\u51fa\u500d\u6570$\\frac{(2^{n-2}\\times3\\times3\\times2)\\times\\frac{8}{3}+(2^{n-2}\\times3\\times2)\\times4}{2^{n-2}\\times3\\times3\\times2+2^{n-2}\\times3\\times2}=\\frac{2^{n+2}\\times3+2^{n+1}\\times3}{2^{n-1}\\times9+2^{n-1}\\times3}=\\frac{8\\times3+4\\times3}{9+3}=3$\n\n\u8fd9\u624d\u5b8c\u6210\u4e86$Ans(n,m+1)=3 \\times Ans(n,m)$\u7684\u8bc1\u660e\n\n\u597d\u7684\u4e0b\u9762\u7ee7\u7eed\u539f\u6765\u7684\u5185\u5bb9\n\n\u63a5\u4e0b\u6765\u8003\u8651$m=n$\u7684\u60c5\u51b5\u6765\u6478\u67ff\u5b50\u3002\u8bf7\u5404\u4f4d\u52a1\u5fc5\u8981\u770b\u61c2\u4ee5\u4e0b\u7684\u63a8\u5012\u8fc7\u7a0b\uff0c\u5176\u5b83\u66f4\u4e00\u822c\u7684\u63a8\u5012\u4e0e\u8fd9\u91cc\u5927\u540c\u5c0f\u5f02\u3002\n\n\u9996\u5148\u770bcase1\u3002\n\n![](https://i.loli.net/2018/12/26/5c2342af63171.png)\n\n\u8054\u7cfb\u4e24\u6761\u9650\u5236\u6761\u4ef6\uff0c\u4e0d\u96be\u5f97\u51fa\u6bcf\u6761\u5bf9\u89d2\u7ebf\u4e0a\u586b\u6570\u7684\u65b9\u6848\u6570\uff0c\u6211\u7528\u84dd\u8272\u5728\u56fe\u4e0a\u6807\u6ce8\u4e86\u4e00\u4e9b\u8fb9\u754c\u60c5\u51b5\u3002\u5bb9\u6613\u770b\u51fa$case_1=2\\times2\\times4^{n-2}\\times2^{n-1}=8^{n-1}$\n\n\u8fd9\u6837case1\u5c31\u641e\u5b9a\u4e86\u3002\n\n\u7136\u540e\u662fcase2\n\n![](https://i.loli.net/2018/12/26/5c2346917550a.png)\n\n\u5f97\u5230$case_2=2\\times2\\times5\\times4^{n-4}\\times2^{n-1}=5\\times2^{3n-7}$\n\n\u4e8e\u662fcase2\u4e5f\u641e\u5b9a\u4e86\n\n\u5230\u73b0\u5728\u4e3a\u6b62\u4e00\u5207\u90fd\u5f88\u7f8e\u597d\n\n\u63a5\u4e0b\u6765\u624d\u662f\u771f\u6b63\u8fa3\u624b\u7684\u4e8b\u60c5\n\n\u4e0b\u9762\u662fcase3\n\n![](https://i.loli.net/2018/12/26/5c2352d55a660.png)\n\n\u8fd9\u4e0b\u4e0d\u597d\u529e\u4e86\uff0c\u56e0\u4e3a\u5de6\u8fb9\u4e24\u5217\u8c8c\u4f3c\u90fd\u6ca1\u6709\u4ec0\u4e48\u7279\u522b\u7684\u9650\u5236\u3002\u4e0d\u8fc7\u6ca1\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u5206\u7c7b\u8ba8\u8bba\u4e0b\u53bb\n\n\u6211\u4eec\u5927\u529b\u8ba8\u8bba\u5de6\u8fb9\u4e24\u5217\u7684\u5bf9\u89d2\u7ebf\u4e0a\u4ece\u4e0a\u5f80\u4e0b\u7b2c\u4e00\u6b21\u51fa\u73b0\u4e24\u6570\u76f8\u540c\u7684\u4f4d\u7f6e\uff0c\u6240\u4ee5\u8fd9\u4e4b\u4e0a\u5e94\u8be5\u90fd\u586b1,0\u3002\u800c\u6b64\u65f6\u51fa\u73b0\u4e86\u4e00\u4e2a\u65b0\u7684\u9650\u5236\u533a\u57df\uff0c\u5c06\u6b64\u533a\u57df\u4e0e\u539f\u6765\u7684\u533a\u57df\u53d6\u5e76\u96c6\u5c31\u6210\u4e86\u4e0b\u56fe\u9ed1\u6846\u7684\u6837\u5b50\n\n![](https://i.loli.net/2018/12/26/5c235d0a45b81.png)\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u5199\u51fa\u6bcf\u6761\u7ebf\u4e0a\u7684\u65b9\u6848\u4e86\n\n\u6ce8\u610f\u5f53x=0\u65f6\u53f3\u4e0a\u65b9\u7684\u5bf9\u89d2\u7ebf\u53ea\u80fd\u586b0\uff0c\u800cx=1\u65f6\u4e09\u79cd\u60c5\u51b5\u90fd\u80fd\u586b\uff0c\u6240\u4ee5x\u90a3\u91cc\u7684\u7ebf\u662f4\n\n\u4e8e\u662f\u6211\u4eec\u627e\u51fa\u4e00\u4e9b\u8fb9\u754c\u60c5\u51b5\u540e\u5c31\u80fd\u7b97\u51fa\u6574\u4e2acase3\u4e86\n\n\u5728\u7b2c\u4e00\u4e2a\u51fa\u73b0\n\n![](https://i.loli.net/2018/12/26/5c235df32bf19.png)\n\n\u5728\u5012\u6570\u7b2c\u4e8c\u4e2a\u51fa\u73b0\n\n![](https://i.loli.net/2018/12/26/5c235fe05e25b.png)\n\n\u5728\u6700\u540e\u4e00\u4e2a\u51fa\u73b0\n\n![](https://i.loli.net/2018/12/26/5c23603110c72.png)\n\n\u522b\u5fd8\u4e86\u6ca1\u6709\u7684\u60c5\u51b5\n\n![](https://i.loli.net/2018/12/26/5c236044c9151.png)\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u679a\u4e3ex\u4e0b\u65b94\u7684\u4e2a\u6570\uff0c\u5f97\u5230$case_3=2\\times4\\times5\\times\\sum\\limits_{i=0}^{n-5}4^i\\times2^{n-1}+2\\times4\\times3\\times2^{n-2}+2\\times3\\times2^{n-2}$\n\n\u4e8e\u662fcase3\u4e5f\u641e\u5b9a\u4e86\n\n~~\u597d\u50cf\u4e5f\u4e0d\u600e\u4e48\u590d\u6742~~\n\n\u6700\u540e\u662fcase4\n\n\u7a0d\u5faeyy\u4e00\u4e0bcase4\u7684\u63a8\u5012\u53d1\u73b0\u5176\u5b9e\u4e0ecase3\u662f\u5b8c\u5168\u5bf9\u79f0\u7684\uff0c\u4e0d\u660e\u767d\u8fd9\u91cc\u7684\u540c\u5b66\u53ef\u4ee5\u624b\u52a8\u753b\u4e00\u4e0b\uff0c\u6211\u8fd9\u91cc\u5c31\u4e0d\u753b\u4e86...\u56e0\u6b64$case_4=case_3$\n\n\u7efc\u5408\u4ee5\u4e0a4\u79cdcases\uff0c\u6211\u4eec\u5c31\u80fd\u7b97\u51fa$Ans(n,n)$\u4e86\u3002\u56e0\u4e3a\u8fd94\u79cd\u60c5\u51b5\u5b8c\u5168\u5305\u542b\u4e86\u6240\u6709\u7684\u53ef\u80fd\u4e14\u4e92\u4e0d\u91cd\u53e0\uff0c\u6240\u4ee5$Ans(n,n)=case_1+case_2+case_3+case_4$\u3002\u628a$case$\u5e26\u8fdb\u5f0f\u5b50\u518d\u4f7f\u52b2\u8e42\u8e8f\u4e00\u4e0b\u5f97\u5230\u6700\u7ec8\u7b54\u6848\uff1a\n\n$$\\displaystyle Ans(n,n)=\\frac{83\\cdot8^n+5\\cdot2^{n+7}}{384}$$\n\n~~\u7d2f\u6b7b\u4e86~~\n\n$Ans(3,m)$\u4e0e$Ans(n,n+1)$\u7684\u63a8\u5012\u4e0e$Ans(n,n)$\u5927\u540c\u5c0f\u5f02\uff0c\u8fd9\u91cc\u5c31\u7565\u53bb\u4e86\uff0c\u76f4\u63a5\u8bf4\u7ed3\u8bba\u5427\n\n$$\\displaystyle Ans(3,m)=112\\cdot3^{m-3}$$\n\n$$\\displaystyle Ans(n,n+1)=\\frac{83\\cdot8^n+2^{n+8}}{128}$$\n\n\u7ed3\u5408$Ans(n,m+1)=3 \\times Ans(n,m)$\u4ee5\u53ca$Ans(n,m)=Ans(m,n)$\uff0c\u6211\u4eec\u5c31\u80fd\u8f7b\u6613\u5730\u63a8\u51fa\u6240\u6709\u7684$Ans(n,m)$\u4e86\u3002\n\n\u5b8c\u7ed3\u6492\u82b1~\n\n~~\u8fd9\u662f\u672c\u83dc\u9e21\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\uff0c\u5199\u5f97\u72d7\u5c41\u4e0d\u901a\u8fd8\u8bf7\u89c1\u8c05~~\n\n\u8fd8\u662f\u8d34\u4e00\u4e0b\u4ee3\u7801\u5427\n```cpp\n#include<cstdio>\n#define mod 1000000007\ntypedef long long LL;\ninline LL ksm(LL a,LL b){LL r=1;for(;b;a=a*a%mod,b>>=1)if(b&1)r=r*a%mod;return r;}\nint main()\n{\n\tint n,m;\n\tscanf(\"%d%d\",&n,&m);\n\tif(n > m)n ^= m ^= n ^= m;\n\tif(n == 1)printf(\"%lld\",ksm(2,m));\n\telse if(n == 2)printf(\"%lld\",4*ksm(3,m-1)%mod);\n\telse if(n == 3)printf(\"%lld\",112*ksm(3,m-3)%mod);\n\telse\n\t{\n\t\tif(m == n)printf(\"%lld\",(83*ksm(8,n)%mod+5*ksm(2,n+7)%mod)*190104168%mod);\n\t\telse printf(\"%lld\",(83*ksm(8,n)%mod+ksm(2,n+8))*ksm(3,m-n-1)%mod*570312504%mod);\n\t}\n\treturn 0;\n}\n```\n~~\u82e5\u8fd8\u6709\u65b0bug\u8bf7\u79c1\u4fe1\u8054\u7cfbQwQ~~",
        "postTime": 1545915371,
        "uid": 86061,
        "name": "xenonex",
        "ccfLevel": 0,
        "title": "NOIp2018D2T2\u7684\u901a\u9879\u516c\u5f0f\u53ca\u4e00\u4e9b\u8bc1\u660e"
    },
    {
        "content": "\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u975e\u5e38\u5feb\u7684\u66b4\u529b\u6253\u8868\u7b97\u6cd5\n\n**2s\u6253\u51fa(8,9)**\n\n\u600e\u4e48\u505a\u5230\u7684\u5462\uff1f\u9996\u5148\u6211\u7684\u601d\u8def\u53d7\u4e86\u697c\u4e0a\u67d0\u4f4d\u5927\u4f6c\u7684\u542f\u53d1\uff0c\u4ed6\u7684\u9898\u89e3\u91cc\u8bf4\u4e86\u5982\u4e0b\u4e24\u6761\u89c4\u5f8b\uff1a\n\n\u4e00\u4e2a\u68cb\u76d8\u662f\u5408\u6cd5\u7684\uff0c\u5f53\u4e14\u4ec5\u5f53\n1. \u5bf9\u4e8e\u6bcf\u4e00\u6761\u81ea\u5de6\u4e0b\u5230\u53f3\u4e0a\u7684\u5bf9\u89d2\u7ebf\uff0c\u586b\u6570\u662f\u975e\u4e25\u683c\u5355\u8c03\u9012\u51cf\u7684\u3002\n1. \u5982\u679c(i-1,j)\u548c(i,j-1)\u7684\u586b\u6570\u76f8\u540c\uff0c\u90a3\u4e48\u4ee5(i,j)\u4e3a\u5de6\u4e0a\u89d2\u3001\u4ee5(n,m)\u4e3a\u53f3\u4e0b\u89d2\u7684\u5b50\u77e9\u9635\u5185\u6240\u6709\u5bf9\u89d2\u7ebf\u5185\u7684\u586b\u6570\u5404\u81ea\u76f8\u7b49\u3002\n\n\uff08\u4ee5\u4e0a\u5f15\u81ea\u90a3\u4f4d\u5927\u4f6c\u7684\u9898\u89e3\uff09\n\n\u7b2c\u4e00\u70b9\u662f\u518d\u663e\u7136\u4e0d\u8fc7\u4e86\uff0c\u4f46\u662f\u7b2c\u4e8c\u70b9\u600e\u4e48\u8bc1\u660e\u5462\uff1f\n\n![](https://cdn.luogu.com.cn/upload/pic/45826.png)\n\n\u5982\u56fe\uff0c\u5bf9\u4e8e\u4ece\uff081,1\uff09\u51fa\u53d1\u7684\u4e24\u6761\u8def\u7ebf\uff0c\u7b2c\u4e00\u6761\uff08\u7c89\u8272\uff09\u7b2c\u4e00\u6b65\u662f\u5411\u53f3\uff0c\u800c\u7b2c\u4e8c\u6761\uff08\u9ec4\u8272\uff09\u7b2c\u4e00\u6b65\u662f\u5411\u4e0b\uff0c\u6240\u4ee5$w(P_1)>w(P_2)$\uff0c\u56e0\u6b64\u5fc5\u987b\u6ee1\u8db3$s(P_1)\u2264s(P_2)$\uff0c\u4f46\u662f\u56e0\u4e3a\uff081,2\uff09\u4e0e\uff082,1\uff09\u683c\u5b50\u4e0a\u7684\u6570\u5b57\u76f8\u540c\uff0c\u800c\u4ee5\uff082\uff0c2\uff09\u4e3a\u5de6\u4e0a\u89d2\u7684\u77e9\u9635\u4e2d\u5b58\u5728\u4e00\u6761\u5bf9\u89d2\u7ebf\u4e2d\u7684\u6570\u5b57\u4e0d\u76f8\u540c\uff0c\u90a3\u4e48\u540c\u65f6\u8d70\u5230\uff083,3\uff09\u65f6\u7684\u4e24\u6761\u8def\u7ebf\uff0c\u7b2c\u4e00\u6761\u5f80\u4e0b\uff0c\u5f97\u5230\u6570\u5b571\uff0c\u800c\u7b2c\u4e8c\u6761\u5f80\u53f3\uff0c\u5f97\u5230\u6570\u5b570\uff0c\u6b64\u65f6$s(P_1)$\u5c31\u4f1a\u5927\u4e8e$s(P_2)$\uff0c\u4e0d\u7b26\u9898\u610f\uff0c\u6240\u4ee5\u56fe\u4e2d\u68d5\u8272\u6846\u8d77\u7684\u77e9\u9635\u4e2d\u7684\u6bcf\u4e00\u6761\u5bf9\u89d2\u7ebf\u4e2d\u7684\u6240\u6709\u6570\u5b57\u5fc5\u987b\u76f8\u540c\u3002\n\n\u7531\u6b64\uff0c\u53ef\u4ee5\u5f97\u51fa\u4e00\u4e2aO(2^(nm)\u00d7nm)\u7684\u7b97\u6cd5\uff0c\u5373\u5148\u66b4\u641c\u51fa\u4e00\u79cd\u586b\u6cd5\uff0c\u7136\u540e\u8bbe$a[i][j]$\u8868\u793a\u5728\u7b2cj\u5217\u4e2d\uff0c\u4ece\u7b2ci\u884c\u5230\u7b2cn\u884c\u4e0a\u7684\u6240\u6709\u6570\u5b57\u72b6\u538b\u5f97\u5230\u7684\u7ed3\u679c\uff08\u5176\u4e2d\u6700\u9ad8\u4f4d\u8868\u793a\u7b2ci\u884c\u6570\u5b57\uff0c\u6700\u4f4e\u4f4d\u8868\u793a\u7b2cn\u884c\u6570\u5b57\uff09\uff0c\u8bbe$b[i][j]$\u8868\u793a\u5f53\u524d\u68cb\u76d8\u4ee5$(i,j)$\u4e3a\u5de6\u4e0a\u89d2\u7684\u77e9\u9635\u4e2d\u662f\u5426\u6bcf\u4e00\u6761\u5bf9\u89d2\u7ebf\u4e0a\u7684\u6570\u5b57\u90fd\u76f8\u540c\uff0c\u4e8e\u662f\u6709\n\n$b[i][j]=b[i][j+1]$&&$(a[i][j+1]>>1)==a[i+1][j]$\n\n\u7136\u540e\u518d\u626b\u63cf\u4e00\u904d\u6574\u4e2a\u68cb\u76d8\uff0c\u68c0\u67e5\u4e0a\u8ff0\u7b2c2\u70b9\u5373\u53ef\u3002\n\n\u4f46\u662f\u8fd9\u6837\u8fd8\u662f\u592a\u6162\u4e86\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u586b\u6570\u7684\u65f6\u5019\u5c31\u5904\u7406\u51faa\u548cb\uff0c\u7136\u540e\u6bcf\u586b\u4e00\u4e2a\u6570\u5c31\u5224\u65ad\u4e00\u4e0b\u4e0e\u8fd9\u4e2a\u683c\u5b50\u6709\u5173\u7684b\u7684\u503c\uff0c\u5982\u679c\u4e0d\u7b26\u5408\u5c31\u76f4\u63a5\u8fd4\u56de\uff0c\u8fd9\u6837\u4e0d\u4ec5\u7701\u53bb\u4e86\u586b\u5b8c\u68cb\u76d8\u540e\u7684$O(nm)$\u7684\u5224\u65ad\uff0c\u8fd8\u7ed9\u641c\u7d22\u63d0\u4f9b\u4e86\u5f88\u6709\u6548\u7684\u51cf\u679d\uff0c\u4e8e\u662f\u5c31\u80fd\u57282s\u5185\u8dd1\u51fa\uff088,9\uff09\u7684\u7b54\u6848\u5566\uff01\u8fd9\u4e2a\u66b4\u529b\u7b97\u6cd5\u4ea4\u5230\u6d1b\u8c37\u4e0a\uff0c\u53ef\u4ee5\u8fc735\u5206\u7684\u6570\u636e\u70b9\uff08\u5373$n\u22648,m\u22648$\u7684\u6570\u636e\u70b9\uff09\uff0c\u53ef\u4ee5\u8bf4\u6548\u7387\u5341\u5206\u4e4b\u9ad8\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define N 13\n#define M 13\nint g[N][M],a[N][M],ans,n,m;\nbool b[N][M];\nbool check(int x,int y)\n{\n    a[x][y]=a[x+1][y]|(g[x][y]<<(n-x));\n    if(y==m)\n        b[x][y]=true;\n    else\n    \tb[x][y]=b[x][y+1]&&(a[x][y+1]>>1)==a[x+1][y];\n    if(x<n&&y>1&&g[x][y]==g[x+1][y-1]&&!b[x+1][y])return false;\n    return true;\n}\nvoid dfs(int x,int y)\n{\n    if(y<1)return dfs(x-1,m);\n    if(x<1)\n    {\n        ans++;\n        return;\n    }\n    if(x==n||y==1||g[x+1][y-1]==1)\n    {\n        g[x][y]=1;\n        if(check(x,y))dfs(x,y-1);\n    }\n    g[x][y]=0;\n    if(check(x,y))dfs(x,y-1);\n}\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    dfs(n,m);\n    printf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1544355031,
        "uid": 100806,
        "name": "lyyi2003",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u672c\u9898\u89e3\u8bb2\u4e00\u4e0b\u8003\u573a\u4e0a\u9047\u89c1\u8fd9\u79cd~~SB~~\u9898\u600e\u4e48\u505a@_@\n\n\u8f93\u5165\u53ea\u6709\u4e24\u4e2a\u6570?\u6839\u636e\u5e73\u5e38\u505a\u9898\u7ecf\u9a8c,\u5e94\u8be5\u662fDP\u561b!\n\n\u518d\u4e00\u770b$n\\le8$,\u80af\u5b9a\u662f\u72b6\u538bDP!\n\n## BUT,\n\n\u4f60\u5c31\u8981\u4ece\u8fd9\u5230\u9898\u5438\u53d6\u6559\u8bad\u4e86...\n\n\u539f\u6765\u662f\u9053\u627e\u89c4\u5f8b\u6253\u8868\u9898 (\u4e0d\u6392\u9664\u67d0\u4e9b\u795e\u7287\u8003\u573a\u4e0a\u5c31\u628a\u5f0f\u5b50\u63a8\u51fa\u6765\u4e86,\u4e0d\u8fc7\u76f8\u4fe1\u5927\u90e8\u5206\u4eba\u90fd\u662f\u901a\u8fc7\u6253\u8868\u5f04\u51fa\u6765\u7684)\n\n\u6240\u4ee5..\n\n\u6211\u7684\u5efa\u8bae\u662f:\u89c1\u5230\u8fd9\u79cd\u9898\u5148\u6253\u66b4\u529b\u518d\u8bf4(\u9664\u975e\u4f60\u5df2\u7ecf\u60f3\u5230\u4e86\u6b63\u89e3)\n\n---\n\n\u73b0\u5728\u91cd\u70b9\u8bb2\u600e\u4e48\u6253\u4f18\u79c0\u7684\u66b4\u529b:\n\n#### \u65b9\u6cd5\u4e00:\n\n\u66b4\u529b\u679a\u4e3e\u6240\u6709\u60c5\u51b5+\u6240\u6709\u8def\u5f84\u5224\u65ad\n\n\u65f6\u95f4:$O(2^{mn}*C_{m+n}^{n})$\n\n~~\u8fd9\u79cd\u505a\u6cd5\u76f8\u4fe1\u8c01\u90fd\u4f1a\u5199~~\n\n#### \u65b9\u6cd5\u4e8c:\n\n\u53d1\u73b0\u6bcf\u6761\u8def\u5f84\u7ecf\u8fc7\u7684\u6570\u4f9d\u6b21\u6392\u5217\u53ef\u4ee5\u5316\u4e3a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570,\u6bd4\u8f83\u4e24\u4e2a\u8def\u5f84\u7684$s$\u7684\u5b57\u5178\u5e8f\u5c31\u76f8\u5f53\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u5927\u5c0f(\u7528\u5341\u8fdb\u5236\u5b58\u5c31\u597d\u5566!)\n\n\u8bb0\u5fc6\u5316\u4e00\u4e0b,$dp_{x,y}$\u5b58\u4e00\u4e2a\u4e8c\u5143\u7ec4,\u8bb0\u5f55\u4ece$(x,y)$\u51fa\u53d1\u6784\u6210\u7684\u4e8c\u8fdb\u5236\u6570(\u6700\u5c0f\u503c,\u6700\u5927\u503c)\n\n\u5982\u679c\u4ece\u4e00\u4e2a\u70b9\u5411\u53f3\u8d70\u7684\u6700\u5c0f\u503c\u5c0f\u4e8e\u5411\u4e0b\u8d70\u7684\u6700\u5927\u503c,\u90a3\u4e48\u5c31\u4e0d\u884c\u4e86\n\n\u65f6\u95f4:$O(2^{mn}*mn)$\n\n#### \u65b9\u6cd5\u4e09:\n\n\u5728\u65b9\u6cd5\u4e8c\u7684\u57fa\u7840\u4e0a,\u6bcf\u679a\u4e3e\u5b8c\u4e00\u884c\u5c31\u5224\u65ad\u4e00\u6b21,\u6b65\u661f\u7684\u8bdd\u5c31\u4e0d\u7528\u5f80\u4e0b\u679a\u4e3e\u4e86.\n\n\u65f6\u95f4:$O(ans*mn^{2})$\n\n(\u5b9e\u9645\u5e94\u8be5\u8fbe\u4e0d\u5230\u8fd9\u4e2a\u4e0a\u754c)\n\n\u8fd9\u79cd\u65b9\u6cd5\u5df2\u7ecf\u53ef\u4ee5\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u8981\u4e86,$n=8,m=8$\u7684\u6570\u636e\u5728\u672c\u673a\u4e0d\u5230$6min$\u5c31\u8dd1\u51fa\u6765\u4e86\n\n\u4ee3\u7801\u5982\u4e0b:\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\ninline int read(){\n    int x=0,f=1;\n    char c=getchar();\n    while(c<'0'||c>'9'){\n        if(c=='-')f=-1;\n        c=getchar();\n    }\n    while(c>='0'&&c<='9'){\n        x=(x<<3)+(x<<1)+c-'0';\n        c=getchar();\n    }\n    return x*f;\n}\npair<int,int> dp[10][10]; //(\u6700\u5c0f\u503c,\u6700\u5927\u503c) \nint n,m,ans;\nint mp[10][10];\npair<int,int> check(int x,int y,int mx,int my){//mx,my\u4e3a\u641c\u7d22\u7684\u8fb9\u754c\n\tif(dp[x][y].first!=0)return dp[x][y];\n\tif(x==mx&&y==my){//\u5982\u679c\u5230\u4e86\u53f3\u4e0b\u89d2\u5c31\u76f4\u63a5return\n\t\treturn dp[x][y]=make_pair(mp[x][y],mp[x][y]);\n\t}\n\tif(x==mx){//\u5728\u4e0b\u8fb9\u754c\u4e0a\u53ea\u80fd\u5f80\u53f3\u8d70\n\t\tpair<int,int> tmp=check(x,y+1,mx,my);\n\t\treturn dp[x][y]=make_pair(tmp.first+(mp[x][y]<<(mx+my-x-y)),tmp.second+(mp[x][y]<<(mx+my-x-y)));\n\t}\n\tif(y==my){//\u5728\u53f3\u8fb9\u754c\u4e0a\u53ea\u80fd\u5f80\u4e0b\u8d70\n\t\tpair<int,int> tmp=check(x+1,y,mx,my);\n\t\treturn dp[x][y]=make_pair(tmp.first+(mp[x][y]<<(mx+my-x-y)),tmp.second+(mp[x][y]<<(mx+my-x-y)));\n\t}\n\tpair<int,int> p=check(x,y+1,mx,my);//\u5f80\u53f3\u8d70\n\tif(p.first==-1){//\u526a\u679d,\u5f80\u53f3\u8d70\u4e0d\u884c\u4e86\u5c31\u4e0d\u7528\u5f80\u4e0b\u8d70\u4e86\n\t\treturn dp[x][y]=make_pair(-1,-1);//-1\u8868\u793a\u4e0d\u884c\u4e86QAQ\n\t}\n\tpair<int,int> q=check(x+1,y,mx,my);\n\tif(q.first==-1||p.first<q.second){//\u5411\u53f3\u8d70\u7684\u6700\u5c0f\u503c\u5c0f\u4e8e\u5411\u4e0b\u8d70\u7684\u6700\u5927\u503c,\u5c31\u4e0d\u884c\u4e86\n\t\treturn dp[x][y]=make_pair(-1,-1);\n\t}\n\treturn dp[x][y]=make_pair(q.first+(mp[x][y]<<(mx+my-x-y)),p.second+(mp[x][y]<<(mx+my-x-y)));\n}\nvoid dfs(int x,int y){\n\tif(y==1&&x>1){\n\t\tmemset(dp,0,sizeof(dp));\n\t\tif(check(1,1,x-1,m).first==-1)return;//\u6bcf\u6362\u4e00\u884c,\u5c31check\u4e00\u6b21\n\t\tif(x==n+1){\t\n\t\t\tans++;\n\t\t\treturn;\n\t\t}\n\t}\n\tif(y==m){\n\t\tmp[x][y]=1;\n\t\tdfs(x+1,1);\n\t\tmp[x][y]=0;\n\t\tdfs(x+1,1);\n\t}\n\telse{\n\t\tmp[x][y]=1;\n\t\tdfs(x,y+1);\n\t\tmp[x][y]=0;\n\t\tdfs(x,y+1);\n\t}\n}\nint main(){\n\tn=read(),m=read();\n\tif(n<m)swap(n,m);\n\tdfs(1,1);\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\n\n\u7136\u540e\u4f60\u5c31\u53ef\u4ee5\u6253\u4e2a\u8868\u5566!\n\n| n,m | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |\n| ----------- | ----------- | ----------- | ----------- | ----------- | ----------- | ----------- | ----------- | ----------- |\n| 1 | 2 | 4 | 8 | 16 | 32 | 64 | 128 | 256 |\n| 2 | 4  | 12 | 36 | 108 | 324 | 972 | 2916 | 8748 |\n| 3 | 8 | 36 | 112 | 336 | 1008 | 3024 | 9072 | 27216 |\n| 4 | 16 | 108 | 336 | 912 | 2688 | 8064 | 24192 | 72576 |\n| 5 | 32 | 324 | 1008 | 2688 | 7136 | 21312 | 63936 | 191808 |\n| 6 | 64 | 972 | 3024 | 8064 | 21312 | 56768 | 170112 | 510336 |\n| 7 | 128 | 2916 | 9072 | 24192 | 63936 | 170112 | 453504 | 1360128 |\n| 8 | 256 | 8748 | 27216 | 72576 | 191808 | 510336 | 1360128 | 3626752 |\n\n~~\u6253\u5f97\u624b\u75bc~~\n\n\u89c2\u5bdf\u4e00\u4e0b,\u4e0d\u96be\u53d1\u73b0,\u5f53$m>n+1$\u4e14$n>1$\u65f6, $ans_{n,m}=ans_{n,m-1}*3$\n\n\u5f53$n=1$\u65f6,$ans_{n,m}=2^m$\n\n\u7136\u540e\u5c31\u89e3\u51b3\u4e86!(\u6253\u4e2a\u8868+\u5feb\u901f\u5e42)\n\n\u7b49!, $ans_{8,9}$\u8fd8\u8981\u8dd1\u4e48?\n\n\u6ca1\u95ee\u9898,\u4f46\u8981\u6709\u8010\u5fc3,\u4e0d\u8fc7\u8fd8\u53ef\u4ee5\u7b97\u4e00\u4e0b\u4f1a\u53d1\u73b0,\u5f53$m>3$\u65f6,$ans_{n,n+1}=ans_{n,n}*3-3*2^n$\n\n\u597d\u5427,\u8fd9\u4e0b\u4e0d\u7528\u6302\u673a\u4e86,\u4e0a\u4ee3\u7801:\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\ntypedef long long ll;\nconst ll mod=1e9+7;\ninline int read(){\n    int x=0,f=1;\n    char c=getchar();\n    while(c<'0'||c>'9'){\n        if(c=='-')f=-1;\n        c=getchar();\n    }\n    while(c>='0'&&c<='9'){\n        x=(x<<3)+(x<<1)+c-'0';\n        c=getchar();\n    }\n    return x*f;\n}\nint n,m;\nint a[10][10]={\n\t{0,0,0,0,0,0,0},\n\t{0,2,4},\n\t{0,0,12,36},\n\t{0,0,0,112,336},\n\t{0,0,0,0,912,2688},\n\t{0,0,0,0,0,7136,21312},\n\t{0,0,0,0,0,0,56768,170112},\n\t{0,0,0,0,0,0,0,453504,1360128},\n\t{0,0,0,0,0,0,0,0,3626752,10879488}\n};\nll qpow(ll a,ll b){\n\tll ans=1;\n\twhile(b){\n\t\tif(b&1)ans=ans*a%mod;\n\t\ta=a*a%mod;\n\t\tb>>=1;\n\t}\n\treturn ans;\n}\nint main(){\n\tn=read(),m=read();\n\tif(n>m)swap(n,m);\n\tif(n==1){\n\t\tprintf(\"%lld\\n\",qpow(2,m));\n\t}\n\telse{\n\t\tif(n==m||n+1==m){\n\t\t\tprintf(\"%d\\n\",a[n][m]);\n\t\t}\n\t\telse{\n\t\t\tprintf(\"%lld\\n\",a[n][n+1]*qpow(3,m-n-1)%mod);\n\t\t}\n\t}\n\treturn 0;\n}\n\n```\n\n\u8fd9\u9053\u9898\u957f\u7684\u50cfdp,\u4f46\u4e0d\u662fdp,~~\u6bd2\u7624CCF\u51fa\u7684\u6bd2\u7624\u9898\u76ee~~\n\n[*Froggy's blog,\u5471!*](https://www.luogu.org/blog/1445353309froggy/)\n\n\u6b22\u8fce\u6765\u8e29!\n\n",
        "postTime": 1569068400,
        "uid": 100285,
        "name": "Froggy",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u9898\u72b6\u538bdp\uff1f\u611f\u89c9\u4e0d\u5bf9\uff0c\u56e0\u4e3a\u6211\uff08\u72ec\u7acb\u5730\uff09\u63a8\u51fa\u5f0f\u5b50\u4e86\uff01\uff08\u65f6\u95f4\u590d\u6742\u5ea6\u53ea\u8ddf\u5feb\u901f\u5e42\u6709\u5173\uff0cn\u3001m\u518d\u5927\u4e5f\u6ca1\u5173\u7cfb\u3002\u4e5f\u7b97\u662f\u6bd4\u8f83\u4e25\u683c\u5730\u8bc1\u660e\u4e86\uff0c\u800c\u4e0d\u662f\u6253\u8868\u627e\u89c4\u5f8b\u3002~~\u6211\u8003\u573a\u4e0a\u66b4\u529b\u6302\u4e86\u2026\u2026~~\uff09~~\u8349\u7a3f\u7eb8\u7528\u4e86\u4e09\u9762\u534a\uff0c\u7528\u4e86\u597d\u51e0\u4e2a\u5c0f\u65f6~~\n\n### \u5982\u679c\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u6216\u8bc1\u660e\u4e2d\u7684bug\uff0c\u6b22\u8fce\u5728\u8bc4\u8bba\u91cc\u6307\u51fa\uff08\u6700\u597d\u53ef\u4ee5\u79c1\u4fe1\u6211\uff09\n\n\u5176\u5b9e\u8fd9\u9898\u53ef\u4ee5~~\u75af\u7d2f~~\u5206\u7c7b\u8ba8\u8bba\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u628a\u9898\u76ee\u4e2d\u683c\u5b50\u770b\u6210\u70b9\uff0c\u683c\u5b50\u95f4\u7684\u4ea4\u70b9\u770b\u6210\u683c\u5b50\u3002\u6bd4\u5982\u9898\u76ee\u4e2d\u7b2c\u4e00\u4e2a\u56fe\u7684\u53f3\u534a\u56fe\u53ef\u4ee5\u5199\u6210\uff1a\n\n```plain\n0-1\n| |\n0-1\n```\n\n\u5148\u6765\u770b\u4e00\u4e9b\u5f15\u7406\uff08S\u4ee3\u8868\u5de6\u4e0a\u89d2\u7684\u70b9\uff0cT\u4ee3\u8868\u53f3\u4e0b\u89d2\u7684\u70b9\u3002\uff09\n\n### \u5f15\u74061\uff1a\u4e00\u4e2a\u65b9\u683c\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u53f3\u4e0a\u65b9\u683c\u5b50\u7684\u6570\u5c0f\u4e8e\u7b49\u4e8e\u5de6\u4e0b\u65b9\u7684\u6570\n\n#### \u8bc1\u660e\uff1a\n\n```plain\nS\n\u22ee\nP\u22efC-A\n  | |\n  B-D\u22efQ\n      \u22ee\n      T\n```\n\n\u5bf9\u4e8e\u8fd9\u4e2a\u56fe\u6765\u8bf4\uff0cw(S->P->CAD->Q->T)>w(S->P->CBD->Q->T)\uff0c\u9664\u4e86A\u3001B\u90fd\u76f8\u7b49\uff0c\u6240\u4ee5A<=B\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c**\u4e0b\u8fb9\u8bf4\u7684\u5bf9\u89d2\u7ebf\u90fd\u662f\u4ece\u5de6\u4e0b\u5230\u53f3\u4e0a\u7684\u3002**\n\n\u6709\u4e86\u8fd9\u4e2a\u5f15\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u53e6\u4e00\u79cd\u65b9\u6cd5\u6765\u8868\u793a\u4e00\u4e2a\u5408\u6cd5\u7684\u65b9\u6848\uff0c\u5c31\u662f\u5728\u6bcf\u4e00\u4e2a\u65b9\u683c\u91cc\u586b\u5165\u5c0f\u4e8e\u6216\u7b49\u4e8e\uff0c\u8868\u793a\u53f3\u4e0a\u65b9\u683c\u5b50\u7684\u6570\u548c\u5de6\u4e0b\u65b9\u7684\u6570\u7684\u5173\u7cfb\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c\u8fd9\u91cc\u7528/\u8868\u793a\u7b49\u4e8e\uff0c\\*\u8868\u793a\u5c0f\u4e8e\uff08\u6211\u4e5f\u4e0d\u77e5\u9053\u6211\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u8868\u793a\uff09\u3002\n\n### \u5f15\u74062\uff1a\u82e5\u4e00\u4e2a\u65b9\u683c\u586b/\uff0c\u5219\u5b83\u7684\u53f3\u4e0b\u65b9\u7684\u6240\u6709\u683c\u5b50\uff08\u9664\u4e86\u6b63\u53f3\u548c\u6b63\u4e0b\u65b9\uff09\u90fd\u5e94\u8be5\u586b/\n\n#### \u8bc1\u660e\uff1a\n\n\u8bbe\u547d\u9898P(x, y)\uff0c\u8868\u793a\u4efb\u610f\u4e00\u4e2a\u586b/\u7684\u683c\u5b50(a, b)\uff0c\u5bf9\u4e8e0<i<=x, 0<j<=y\uff0c\u6709(a+i, b+j)\u586b/\u3002\u5f15\u74062\u5c31\u662fP(n, m)\n\n\u5148\u8bc1\u660eP(1, 1)\n\n```plain\nS\n\u22ee\nP\u22efA-B\n  |/|\n  C-D-E\n    | |\n    F-G\u22efQ\n        \u22ee\n        T\n```\n\n\u56e0\u4e3aw(S->P->ABDFG->Q->T)>w(S->P->ACDEG->Q->T)>w(S->P->ACDFG->Q->T)\uff0cB\u548cC\u76f8\u7b49\uff0c\u6240\u4ee5\u6709E<=F<=E\uff0c\u5373E=F\u3002\n\n\u518d\u8bc1\u660eP(1, n)\u548cP(m, 1)\u3002\u5148\u8bc1P(1, n)\u3002\n\n```plain\nS\n\u22ee\nP\u22efA-B\n  |/|\n  C-D-E\n    | \u22ee\n    F G\n    \u22ee |\n    H-I\u22efQ\n        \u22ee\n        T\n```\n\n\u7528\u6570\u5b66\u5f52\u7eb3\u6cd5\uff0c\u5047\u8bbeP(m-1, 1)\u662f\u6b63\u786e\u7684\u3002w(S->P->ABDF->HI->Q->T)>w(S->P->ACDE->GI->Q->T)>w(S->P->ACDF->HI->Q->T) \uff0cB=C\uff0c\u53c8\u56e0\u4e3aP(m-1, 1)\u662f\u6b63\u786e\uff0c\u6240\u4ee5s(E->G)=s(F->H)\uff0c\u6240\u4ee5\u6709G<=H<=G\uff0c\u5c31\u6709H=G\u3002\n\n\u7c7b\u4f3c\u5730\uff0c\u53ef\u4ee5\u8bc1\u660eP(m, 1) \u3002\n\n\u6700\u540e\u8bc1\u660eP(n, m)\u3002\n\n```plain\nS\n\u22ee\nP\u22efA-B\n  |/|\n  C-D\u22efF\u22efG\n    \u22ee   \u22ee\n    H   I\n    \u22ee   |\n    J\u22efK-L\u22efQ\n          \u22ee\n          T\n```\n\n\u8fd8\u662f\u7528\u6570\u5b66\u5f52\u7eb3\u6cd5\u3002\u5047\u8bbeP(n-1, m)\u548cP(n, m-1)\u90fd\u662f\u6b63\u786e\u7684\uff0c\u90a3\u4e48\u4e5f\u5c31\u662f\u8bf4s(D->F->G->I)\u548cs(D->H->J->K)\u53ea\u6709I\u548cK\u7684\u533a\u522b\u3002\u800c\u56e0\u4e3aw(S->P->ABD->H->J->KL->Q->T)>w(S->P->ACD->F->G->IL->Q->T)>w(S->P->ACD->H->J->KL->Q->T)\uff0c\u6240\u4ee5I<=K<=I\uff0c\u5373I=K\u3002\u8bc1\u660e\u5b8c\u6bd5\u3002\n\n\u53ef\u4ee5\u7528\u53cd\u8bc1\u6cd5\u518d\u5f97\u5230\u4e00\u4e2a\u63a8\u8bba\u3002\n\n### \u63a8\u8bba1\uff1a\u82e5\u4e00\u4e2a\u65b9\u683c\u586b\\*\uff0c\u5219\u5b83\u7684\u5de6\u4e0a\u65b9\u7684\u6240\u6709\u683c\u5b50\uff08\u9664\u4e86\u6b63\u5de6\u548c\u6b63\u4e0a\u65b9\uff09\u90fd\u5e94\u8be5\u586b\\*\n\n\u4e0d\u8fc7\uff0c\u8fd8\u6709\u4e00\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u6027\u8d28\u6ca1\u8bb2\u3002\n\n### \u6027\u8d281\uff1a\u4e00\u4e2a\u6ee1\u8db3\u9898\u610f\u768401\u77e9\u9635\uff0c\u5f53\u4e14\u4ec5\u5f53\u6ee1\u8db3\u5f15\u74061\uff08\u5373\u80fd\u5316\u6210\u7528\\*\u548c/\u8868\u793a\u7684\u77e9\u9635\uff09\uff0c\u4e14\u5316\u6210\u7528\\*\u548c/\u8868\u793a\u7684\u77e9\u9635\u540e\u80fd\u6ee1\u8db3\u5f15\u74062\n\n#### \u8bc1\u660e\uff1a\n\n\u9996\u5148\uff0c\u4e00\u4e2a\u6ee1\u8db3\u9898\u610f\u768401\u77e9\u9635\u663e\u7136\u6ee1\u8db3\u5f15\u74061\u548c\u5f15\u74062\uff08\u5df2\u7ecf\u8bc1\u660e\u8fc7\u4e86\uff09\u3002\u800c\u6ee1\u8db3\u5f15\u74061\u548c\u5f15\u74062\u7684\u5316\u6210\u7528\\*\u548c/\u8868\u793a\u7684\u77e9\u9635\uff0c\u662f\u4e0d\u662f\u4e00\u5b9a\u53ef\u4ee5\u5bf9\u5e94\uff08\u4e0d\u4e00\u5b9a\u8981\u4e00\u4e00\u5bf9\u5e94\uff09\u6240\u6709\u7684\u6ee1\u8db3\u9898\u610f\u768401\u77e9\u9635\u5462\uff1f\n\n\u5148\u770b\u4e0b\u9762\u8fd9\u4e2a\u56fe\uff1a\n\n```plain\nS\n \u22f1\n  A-B\n  | |\n  C-D\n     \u22f1\n      T\n```\n\n\u5bf9\u4e8e\u8fd9\u4e24\u6761\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u5047\u8bbe\u90fd\u6cbf\u76f8\u540c\u7684\u8def\u5f84\u5230A\uff0c\u7136\u540e\u4e0d\u7ba1\u5b83\u600e\u4e48\u5230T\u3002\u8fd9\u65f6\uff0cw(S->ABD->T)>w(S->ACD->T)\u3002\u56e0\u4e3a\u5b83\u4eec\u90fd\u6cbf\u76f8\u540c\u7684\u8def\u5f84\u5230A\uff0c\u6240\u4ee5\u5230A\u524d\u5b83\u4eec\u7684s\u76f8\u540c\u3002\u6839\u636e\u5f15\u74061\uff0cB<=C\uff0c\u6240\u4ee5\u8981\u4e48B<C\uff0cs(S->ABD->T)<s(S->ACD->T)\uff0c\u8981\u4e48B=C\uff0c\u6b64\u65f6\u6839\u636e\u5f15\u74062\uff0c\u5b83\u4eecD->T\u7684\u8def\u5f84\u7684s\u4e00\u5b9a\u76f8\u540c\uff0c\u56e0\u4e3a\u4ee5D\u4e3a\u53f3\u4e0a\u89d2\u7684\u5b50\u77e9\u9635\u4e2d\uff0c\u90fd\u6709\u6bcf\u4e2a\u683c\u5b50\u5bf9\u89d2\u7ebf\u76f8\u7b49\uff08\u6839\u636e\u5f15\u74062\uff09\uff0c\u518d\u52a0\u4e0a\u4e9b\u601d\u8003\u5c31\u53ef\u4ee5\u5f97\u51fa\u8fd9\u4e2a\u5b50\u77e9\u9635\u7684\u5bf9\u89d2\u7ebf\u4e0a\u586b\u7684\u6570\u76f8\u7b49\uff0c\u5728\u52a0\u4e0a\u4e9b\u601d\u8003\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u7ed3\u8bba\u3002\u6240\u4ee5s(S->ABD->T)=s(S->ACD->T)\u3002\u7efc\u4e0a\u6240\u8ff0\uff0cs(S->ABD->T)<=s(S->ACD->T)\u3002\n\n\u518d\u770b\u4e0d\u6ee1\u8db3\u8fd9\u4e2a\u56fe\u7684\u4e24\u4e2a\u8def\u5f84\uff0c\u5047\u8bbew(P1)>w(P2)\uff0c\u5219\u6bcf\u6b21\u628aP1\u6839\u636e\u524d\u9762\u8fd9\u4e2a\u89c4\u5219\u53d8\u6362\uff08\u628aRD\u53d8\u4e3aDR\uff09\uff0c\u6839\u636e\u4e0d\u7b49\u53f7\u7684\u4f20\u9012\u6027\uff0c\u53ea\u8981\u80fd\u628aP1\u53d8\u4e3aP2\u5c31\u6ee1\u8db3\u6761\u4ef6\u3002\u800c\u8fd9\u4e2a\u53d8\u6362\u5f88\u597d\u5b9e\u73b0\uff0c\u53ef\u4ee5\u4eceP1\u548cP2\u7684\u4ea4\u70b9\u51fa\u53d1\uff0c\u628aw(P1)\u7684RR...RRD\u6539\u6210RR...RDR\u7136\u540e\u4e00\u76f4\u6539\u6539\u5230DRR...RR\u3002\u5c31\u53ef\u4ee5\u628a\u4ea4\u70b9\u4e0b\u79fb\u4e00\u4e2a\u3002\u53ef\u4ee5\u4e00\u76f4\u8fd9\u4e48\u6539\uff0c\u76f4\u5230RDR...R\u6539\u6210DRR...R\u540e\uff0c\u82e5P2\u662fDR\u5f00\u5934\uff0c\u5373\u6539\u540e\u4e0d\u6b62\u591a\u4e00\u4e2a\u4ea4\u70b9\uff0c\u8fd9\u65f6\u8981\u6ce8\u610f\uff0c\u8981\u628aP1\u5269\u4e0b\u7684\u540e\u8fb9\u5168\u6539\u6210P2\u7684\u5269\u4e0b\u7684\u3002\uff08\u4f3c\u4e4e\u8bb2\u7684\u592a\u62bd\u8c61\u4e86\u2026\u2026\u4f46\u5176\u5b9e\u8fd9\u4e2a\u8fd8\u7b97\u662f\u663e\u7136\u7684\u3002\uff09\u7136\u540e\u6839\u636e\u4e0d\u7b49\u5f0f\u7684\u4f20\u9012\u6027\uff0cw(P1)<=w(P2)\u5c31\u8bc1\u51fa\u6765\u4e86\u3002\n\n**\u4e0b\u6587\u4e2d\u7684n\u548cm\u4ee3\u8868\u8fd9\u4e2a\u65b9\u683c\u7684\u884c\u548c\u5217\uff0c\u5373n\u548cm\u5728\u4e0b\u6587\u4e2d\u4ee3\u8868\u8f93\u5165\u7684n\u548cm\u5206\u522b\u51cf1\u7684\u7ed3\u679c\u3002**\n\n\u6ce8\u610f\u5230\u6211\u524d\u9762\u6ca1\u8bf4\u4e00\u4e00\u5bf9\u5e94\uff0c\u4e00\u4e2a\u8fd9\u6837\u7684\u586b\u6cd5\u4e2d\uff0c\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f2^(\u6ca1\u6709\\*\u7684\u5bf9\u89d2\u7ebf\u7684\u4e2a\u6570)\uff0c\u56e0\u4e3a\u4e00\u4e2a\u5bf9\u89d2\u7ebf\u6709\u4e86\\*\uff0c\u5176\u5b9e\u5c31\u53ef\u4ee5\u786e\u5b9a\u8fd9\u6761\u5bf9\u89d2\u7ebf\uff0c\\*\u5de6\u4e0b\u65b9\u90fd\u586b1\uff0c\u53f3\u4e0a\u65b9\u90fd\u586b0\uff1b\u800c\u90fd\u662f/\u7684\u5bf9\u89d2\u7ebf\u4e0a\u53ef\u4ee5\u90fd\u586b0\u6216\u90fd\u586b1\uff0c\u6709\u4e24\u79cd\u3002\u4e00\u5171\u6709n+m-1\u4e2a\u5bf9\u89d2\u7ebf\u3002**\u56e0\u4e3a\u539f\u56fe\u4e2d\u5de6\u4e0a\u548c\u53f3\u4e0b\u7684\u65b9\u683c\u8fd9\u91cc\u6ca1\u8003\u8651\u5230\uff0c\u800c\u4e14\u663e\u7136\u6bcf\u4e2a\u8def\u5f84\u90fd\u6709\u7ecf\u8fc7\uff0c\u4e0d\u7ba1\u586b\u4ec0\u4e48\u90fd\u884c\uff0c\u6240\u4ee5\u6700\u7ec8\u7b54\u6848\u5e94\u8be5\u518d\u4e584\u3002**\u6709\u4e86\u8fd9\u6837\u7684\u6027\u8d28\uff0c\u5c31\u53ef\u4ee5\u53ea\u770b\u8fd9\u6837\u586b\u540e\u7684\u56fe\u4e86\u3002\n\n**\u4e3a\u4e86\u65b9\u4fbf\uff0c\u63a5\u4e0b\u6765\u7684\u8bb2\u8ff0\u6ca1\u6709\u8f6e\u5ed3\u7ebf\uff0c\u53ea\u6709/\u548c\\*\uff0c\u7136\u540e\u4e0d\u786e\u5b9a\u7684\u7528.\u8868\u793a**\n\n\u597d\u4e86\uff0c\u63a5\u4e0b\u6765\u770b\u4e00\u4e0b\u8fd9\u4e2a\u56fe\u8fd8\u6709\u4ec0\u4e48\u6709\u8da3\u7684\u6027\u8d28\u3002\n\n### \u6027\u8d282\uff1a\\*\u53ea\u51fa\u73b0\u5728\u524d\u4e24\u884c\u6216\u524d\u4e24\u5217\n\n~~\u51fa\u4e4e\u610f\u6599\u5427~~\n\n#### \u8bc1\u660e\uff1a\n\n\u82e5\u51fa\u73b0\u5728\u4e86\u524d\u4e24\u884c\u6216\u524d\u4e24\u5217\u4ee5\u5916\u7684\u5730\u65b9\uff0c\u5219\u8fd9\u4e2a\u5de6\u4e0a\u65b9\u81f3\u5c11\u4f1a\u67092\\*2\u7684\u65b9\u683c\u8981\u586b\u3002\n\n```\n...\n...\n..*\n```\n\n\u6839\u636e\u63a8\u8bba1\uff0c\u6709\n\n```\n**.\n**.\n..*\n```\n\n\u7136\u540e\u53d1\u73b0\u8fd9\u4e2a\u56fe\u5728\n\n```\n.*.\n*..\n...\n```\n\n\u8fd9\u6761\u5bf9\u89d2\u7ebf\u4e0a\u6709\u4e24\u4e2a\\*\uff0c\u800c\\*\u8868\u793a\u5c0f\u4e8e\uff0c\u4f46\u53ea\u67090\u62161\u4e24\u4e2a\u6570\u53ef\u4ee5\u586b\uff0c\u51fa\u73b0\u4e86\u77db\u76fe\u3002\u6240\u4ee5\\*\u53ea\u51fa\u73b0\u5728\u524d\u4e24\u884c\u6216\u524d\u4e24\u5217\u3002\n\n\u6709\u4e86\u8fd9\u4e2a\u6027\u8d28\uff0c\u5c31\u66f4\u65b9\u4fbf~~\u75af\u7d2f~~\u5206\u7c7b\u8ba8\u8bba\u4e86\u3002\n\n**\u4e0b\u9762\u6240\u8bf4\u7684\u8d21\u732e\u5728\u540c\u4e00\u6bb5\u91cc\u662f\u52a0\u8d77\u6765\u7b97\u7684\uff0c\u6240\u6709\u7684\u8d21\u732e\u662f\u4e58\u8d77\u6765\u7b97\u7684\uff08\u5177\u4f53\u8981\u7b97\u4ec0\u4e48\u548c\u4e3a\u4ec0\u4e48\u8981\u8fd9\u6837\u5efa\u8bae\u518d\u770b\u4e00\u4e0b\u6027\u8d281\u7684\u6700\u540e\uff09\u3002\u4e0b\u9762\u6240\u8bf4\u7684\u662fn\u884cm\u5217\uff0c\u540c\u65f6\u9700\u8981\u4fdd\u8bc1n<=m\uff08\u82e5n>m\u5219\u4ea4\u6362n\u548cm\uff09\u3002**\u540c\u65f6\u5728\u8bf4\u4e00\u4e0b\uff0c\u4e0b\u6587\u4e2d\u7684n\u548cm\u4ee3\u8868\u8fd9\u4e2a\u65b9\u683c\u7684\u884c\u548c\u5217\uff0c\u5373n\u548cm\u5728\u4e0b\u6587\u4e2d\u4ee3\u8868\u8f93\u5165\u7684n\u548cm\u5206\u522b\u51cf1\u7684\u7ed3\u679c\u3002\n\n### A\uff1a\\*\u53ea\u51fa\u73b0\u5728\u7b2c\u4e00\u884c\u548c\u7b2c\u4e00\u5217\n\n```\n........\n.///////\n.///////\n.///////\n```\n\n\u770b\u7b2c\u4e00\u884c\u7684\u7b2c\u4e00\u4e2a\uff0c\u53ef\u4ee5\u662f/\u6216\\*\uff0c/\u7684\u8d21\u732e\u662f2\uff0c\\*\u7684\u8d21\u732e\u662f1\uff0c\u52a0\u8d77\u6765\u7684\u8d21\u732e\u662f3\n\n\u770b\u7b2c\u4e00\u884c\u7684\u7b2c2\u5230n\u4e2a\uff0c\u6bcf\u4e00\u4e2a\u6240\u4ee3\u8868\u7684\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u6709\u4e24\u4e2a\u5730\u65b9\u53ef\u4ee5\u586b\\*\uff0c\u8d21\u732e\u4e3a2\\*1\uff1b\u4e5f\u53ef\u4ee5\u4e0d\u586b\uff0c\u8d21\u732e\u4e3a2\u3002\u52a0\u8d77\u6765\u7684\u8d21\u732e\u662f4\uff0c\u56e0\u4e3a\u6709n-1\u4e2a\uff0c\u6240\u4ee5\u662f4^(n-1)\n\n\u518d\u770b\u7b2c\u4e00\u884c\u7684\u7b2cn+1\u5230m\u4e2a \uff0c\u6bcf\u4e00\u4e2a\u6240\u4ee3\u8868\u7684\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u6709\u4e00\u4e2a\u5730\u65b9\u53ef\u4ee5\u586b\\*\uff0c\u8d21\u732e\u662f1\uff1b\u4e5f\u53ef\u4ee5\u4e0d\u586b\uff0c\u8d21\u732e\u4e3a2\u3002\u52a0\u8d77\u6765\u7684\u8d21\u732e\u662f3\uff0c\u56e0\u4e3a\u6709m-n\u4e2a\uff08\u524dn\u4e2a\u5df2\u7ecf\u88ab\u8ba8\u8bba\u8fc7\u4e86\uff09\uff0c\u6240\u4ee5\u662f3^(m-n)\n\n\u6700\u540e\u6765\u770b\u6700\u540e\u4e00\u5217\u7684\u7b2c2\u5230n\u4e2a\uff0c\u8d21\u732e\u90fd\u662f2\uff0c\u56e0\u4e3a\u6709n-1\u4e2a\uff0c\u6240\u4ee5\u8d21\u732e\u662fn-1\u4e2a\n\n\u6240\u4ee5\u8fd9\u4e00\u7c7b\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f$3\\times4^{n-1}\\times3^{n-m}\\times2^{n-1}$\uff08\u53ef\u4ee5\u5316\u7b80\u4e00\u4e0b\uff09\n\n\u8bf7\u5c3d\u91cf\u7406\u89e3\uff0c\u56e0\u4e3a\u4e0b\u9762\u7684\u5206\u6790\u66f4\u590d\u6742\u3002~~\u800c\u4e14\u5230\u540e\u9762\u6211\u4f1a\u6bd4\u8f83\u5077\u61d2~~\n\n### B\uff1a\u7b2c\u4e8c\u884c\u7b2c\u4e8c\u5217\u662f\\*\uff0c\u540c\u65f6\u7b2c\u4e8c\u884c\u548c\u7b2c\u4e8c\u5217\u6ca1\u6709\u5176\u4ed6\\*\uff08\u9664\u4e86\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\uff09 (n>=2)\n\n```plain\n*./....\n.*/////\n///////\n.//////\n.//////\n```\n\n\u53ef\u80fd\u9700\u8981\u89e3\u91ca\u4e00\u4e0b\u3002\u56e0\u4e3a\u7b2c\u4e8c\u884c\u7b2c\u4e8c\u5217\u662f\\*\uff0c\u6839\u636e\u63a8\u8bba1\uff0c\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u4e5f\u662f\\*\uff0c\u540c\u65f6\u56e0\u4e3a\u4e00\u4e2a\u5bf9\u89d2\u7ebf\u4e0a\u6700\u591a\u53ea\u6709\u4e00\u4e2a\\*\uff08\u4e0d\u7406\u89e3\u7684\u770b\u6027\u8d282\u6700\u540e\u4e00\u4e2a\u56fe\u7684\u4e0b\u9762\u4e00\u6bb5\uff09\uff0c\u6240\u4ee5\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u548c\u7b2c\u4e09\u884c\u7b2c\u4e00\u5217\u662f/\u3002\n\n~~\u63a5\u4e0b\u6765\u8bf4\u4e00\u4e0b\u6211\u600e\u4e48\u5077\u61d2\u2026\u2026~~\u6211\u628a\u6bcf\u4e00\u6761\u5bf9\u89d2\u7ebf\u7684\u8d21\u732e\u90fd\u6807\u6ce8\u5728\u7b2c\u4e00\u884c\u548c\u6700\u540e\u4e00\u5217\u7684\u53f3\u4e0a\u89d2\uff08\u6240\u4ee5\u5148\u786e\u4fdd\u5206\u7c7bA\u5f7b\u5e95\u7406\u89e3\u4e86\uff09\u3002\n\n\u8fd9\u91cc\u9700\u8981\u5bf9n\u548cm\u7684\u5927\u5c0f\u8fdb\u884c\u8ba8\u8bba\u3002\n\n#### 1. m=2\n\n```plain\n 14\n*.1\n.*\n```\n\n\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a4\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\u586b\\*\uff0c\u8d21\u732e\u662f2\\*1\uff1b\u8fd8\u53ef\u4ee5\u4e0d\u586b\uff0c\u8d21\u732e\u662f2\u3002\u52a0\u8d77\u6765\u662f4\u3002\n\n\u6240\u4ee5\u603b\u7684\u8d21\u732e\u662f4\n\n#### 2. n=2 m>2\n\n```plain\n 141333\n*./...2\n.*////\n```\n\n\u6211\u4eec\u662f\u9650\u5b9a\u4e86\u7b2c\u4e8c\u884c\u548c\u7b2c\u4e8c\u5217\u6ca1\u6709\u5176\u4ed6\\*\uff08\u9664\u4e86\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\uff09\uff0c\u6240\u4ee5\u7b2c\u4e8c\u884c\u7b2c\u4e09\u5217\u662f/\n\n4\u7684\u89e3\u91ca\u540c\u4e0a\u30023\u7684\u8bdd\u662f\u6709\u4e00\u79cd\u65b9\u6cd5\u586b\\*\uff0c\u8d21\u732e\u662f1\uff1b\u8fd8\u53ef\u4ee5\u4e0d\u586b\uff0c\u8d21\u732e\u662f2\u3002\u52a0\u8d77\u6765\u662f3\u3002\n\n\u6ce8\u610f\u5230\u6709m-3\u4e2a3\u3002\u6240\u4ee5\u603b\u7684\u8d21\u732e\u662f$8\\times3^{m-3}$\n\n#### 3. n>2\n\n```plain\n 141443333\n*./......2\n.*///////2\n/////////2\n.////////2\n.////////\n```\n\n\u6700\u5de6\u8fb9\u76844\u548c\u53f3\u8fb9\u76843\u7684\u89e3\u91ca\u89c1\u4e0a\u3002\u4e2d\u95f4\u90a3\u4e9b4\u5176\u5b9e\u4e5f\u5dee\u4e0d\u591a\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\u586b\\*\uff0c\u6709\u4e00\u79cd\u65b9\u6cd5\u53ef\u4ee5\u586b/\u3002\n\n\u6709m-n\u4e2a3\uff0cn-1\u4e2a2\uff0cn-2\u4e2a4\uff08\u524dn\u4e2a\u5f53\u4e2d\u67092\u4e2a1\uff0c\u5176\u5b83\u90fd\u662f4\uff09\u3002\u6240\u4ee5\u603b\u7684\u8d21\u732e\u662f$3^{n-m}\\times2^{n-1}\\times4^{n-2}$\n\n\u7136\u540e\u8fd9\u79cd\u60c5\u51b5\u8ba8\u8bba\u5b8c\u4e86\u3002\n\n### C\uff1a\u9664\u4e86\u7b2c\u4e24\u884c\u7684\u524d\u4e24\u5217\uff0c\u4ee5\u53ca\u7b2c\u4e24\u5217\u7684\u524d\u4e24\u884c\u5916\uff0c\u8fd8\u6709\u5728\u5176\u4ed6\u7b2c\u4e8c\u884c\u6216\u7b2c\u4e8c\u5217\u7684\u5730\u65b9\u6709\\*(m>2, n>=2)\n\n\u8fd8\u53ef\u4ee5\u7528\u4e00\u4e0b\u63a8\u8bba1\u3002\u5176\u5b9e\u5b83\u4e00\u5b9a\u4f1a\u51fa\u73b0\uff1a\n\n```plain\n*****.\n.....*\n```\n\n\u7136\u540e\u5c31\u4e0d\u53ef\u80fd\u51fa\u73b0\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e8c\u884c\uff08\u9664\u4e86\u7b2c\u4e24\u884c\u7684\u524d\u4e24\u5217\uff0c\u4ee5\u53ca\u7b2c\u4e24\u5217\u7684\u524d\u4e24\u884c\u5916\uff09\u90fd\u6709\\*\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u4f1a\u8fd9\u6837\uff1a\n\n```plain\n***.\n*..*\n*...\n.*..\n```\n\n\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u8fd9\u4e2a\u5bf9\u89d2\u7ebf\u4e0a\u51fa\u73b0\u4e86\u4e24\u4e2a\\*\uff0c\u5c31\u4e0d\u53ef\u4ee5\u3002\n\n\u6211\u4eec\u8bb0\u7b2c\u4e8c\u884c**\u6700\u540e\u4e00\u4e2a**\\*\u4e3a\u7b2ci\u5217\uff0c\u6216\u8bb0\u7b2c\u4e8c\u5217\u6700\u540e\u4e00\u4e2a\\*\u4e3a\u7b2ci\u884c\u3002\uff08i>2\uff09\n\n\u7136\u540e\u5f00\u59cb\u8ba8\u8bban\u548cm\u7684\u60c5\u51b5\u3002\uff08\u7136\u540e\u521a\u5f00\u59cb\u6211\u7684\u8ba8\u8bba\u6ca1\u6709\u5145\u5206\uff0c\u8fd9\u65f6\u5019\u5176\u5b9e\u53ef\u4ee5\u4fe1\u4ef0\u63d0\u4ea4\u7136\u540e\u770b\u54ea\u9519\u4e86\u518d\u4fee\u6539\u2026\u2026\u4e0d\u8fc7\u4e3a\u4e86\u601d\u8003\u5c11\u4e00\u4e9b\uff0c\u6211\u5c31\u5148\u8ba8\u8bban\u548cm-n\u8db3\u591f\u5927\u7684\u60c5\u51b5\uff0c\u7136\u540e\u770b\u6bcf\u4e2a\u533a\u95f4\u662f\u4e0d\u662f\u6709\u95ee\u9898\uff09\n\n#### 1. 3<=i<n\n\n```plain\n 111514433\n***./....2\n//.*/////2\n/////////2\n.////////2\n/////////2\n.////////2\n.////////\n```\n\n\u56e0\u4e3a\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u662f\\*\uff0c\u6240\u4ee5\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u662f/\u3002\u56e0\u4e3a\u7b2c\u4e8c\u884c\u7b2c\u56db\u5217\u662f\\*\uff0c\u6240\u4ee5\u7b2c\u4e00\u884c\u7b2c\u4e94\u5217\u548c\u7b2c\u4e94\u884c\u7b2c\u4e00\u5217\u662f/\u3002\u6839\u636ei\u7684\u5b9a\u4e49\uff0c\u7b2c\u4e00\u884c\u7b2c\u4e94\u5217\u7684\u662f/\u3002\n\n5\u7684\u8bdd\u662f\u56e0\u4e3a\u6709\u4e09\u4e2a\u5730\u65b9\u53ef\u4ee5\u586b\\*\uff0c\u8d21\u732e\u662f3\\*1\uff1b\u53ef\u4ee5\u4e0d\u586b\uff0c\u8d21\u732e\u662f2\uff0c\u603b\u7684\u8d21\u732e\u662f5\u3002\u5269\u4e0b\u7684\u89e3\u91ca\u89c1\u4e0a\u3002\n\n\u67091\u4e2a5\uff0cn-i-1\u4e2a4\uff08\u56e0\u4e3a\u7b2ci+1\u884c\u7b2c\u4e00\u5217\u548c\u7b2c\u4e8c\u884c\u7b2ci\u5217\u662f\u5728\u540c\u4e00\u6761\u5bf9\u89d2\u7ebf\u4e0a\u7684\uff0c\u4e0b\u9762\u6709n-i-1\u4e2a.\uff0c\u6240\u4ee5\u6709n-i-1\u4e2a4\uff09\uff0cm-n\u4e2a3\uff0cn-1\u4e2a2\uff0c\u603b\u7684\u8d21\u732e\u662f$5\\times4^{n-i-1}\\times2^{n-1}\\times3^{n-m}$\uff0c\u8fd9\u4e2a\u9700\u8981\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u3002\u5f53n=3\u65f6\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u8fd9\u4e2a\u548c\u4f1a\u53d8\u62100\uff0c\u4f46\u5f53n=2\u65f6\u5c31\u4e0d\u8981\u8ba1\u7b97\u8fd9\u4e2a\u8d21\u732e\u3002\n\n\u8fd8\u53ef\u4ee5\u987a\u4fbf\u8ba8\u8bba\\*\u51fa\u73b0\u5728\u7b2c\u4e8c\u5217\uff0c\u90a3\u5c06\u4f1a\u662f\u8fd9\u6837\uff1a\n\n```plain\n 111514433\n*//./....2\n*////////2\n*.///////2\n.*///////2\n/////////2\n.////////2\n.////////\n```\n\n\u5176\u5b9e\u548c\u4e0a\u8fb9\u90a3\u4e2a\u56fe\u7684\u8d21\u732e\u662f\u4e00\u6837\u7684\uff0c\u53ea\u8981\u628a\u8fd9\u4e2a\u8d21\u732e\u4e58\u4ee52\u5373\u53ef\u3002\n\n#### \u5f53m=n\u65f6\uff0ci=n\n\n```plain\n 1115   1115\n***.1  *//.1\n//.*2  *///2\n////2  *.//2\n.///   .*//\n```\n\n5\u7684\u89e3\u91ca\u540c\u4e0a\u3002\n\n\u6709\u4e00\u4e2a5\uff0cn-2\u4e2a2\u3002\u8fd9\u4e24\u4e2a\u56fe\u7684\u8d21\u732e\u76f8\u540c\u3002\u603b\u7684\u8d21\u732e\u662f$5\\times2^{n-2}\\times2$\n\n#### \u5f53m>n\u65f6\uff0ci=n\n```plain\n 111513   111513\n***./.2  *//./.2\n//.*//2  */////2\n//////2  *.////2\n./////   .*////\n```\n\n\u6709\u4e00\u4e2a5\uff0cm-n-1\u4e2a3\uff08\u524dn-1\u4e2a\u662f1\uff0c\u7b2cn\u4e2a\u662f5\uff0c\u7b2cn+1\u4e2a\u662f1\uff0c\u540e\u9762m-n-1\u4e2a\u5168\u662f3\uff09\uff0cn-1\u4e2a2\u3002\u8fd9\u4e24\u4e2a\u56fe\u7684\u8d21\u732e\u76f8\u540c\u3002\u603b\u7684\u8d21\u732e\u662f$5\\times3^{m-n-1}\\times2^{n-1}\\times2$\n#### \u5f53m>n\u65f6\uff0cn<i<m\n```plain\n 11114133\n****./..2\n///.*///2\n////////\n```\n4\u662f\u56e0\u4e3a\u6709\u4e24\u4e2a\u5730\u65b9\u53ef\u4ee5\u586b\\*\uff0c\u8d21\u732e\u662f2\\*1\uff0c\u53ef\u4ee5\u4e0d\u586b\uff0c\u8d21\u732e\u662f2\u3002\u52a0\u8d77\u6765\u662f4\u3002\n\n\u6709\u4e00\u4e2a4\uff0cm-i-1\u4e2a3\uff0cn-1\u4e2a2\u3002\u7b54\u6848\u7684\u8d21\u732e\u662f$4\\times3^{m-i-1}\\times2^{n-1}$\u3002\u9700\u8981\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u3002\uff08\u5f53n+1=m\u65f6\u76f4\u63a5\u6c42\u548c\u7684\u7ed3\u679c\u4f1a\u662f0\uff0c\u5bf9\u7b54\u6848\u6ca1\u6709\u5f71\u54cd\uff09\n#### \u5f53m>n\u65f6\uff0ci=m\n```plain\n 11114\n****.1\n///.*2\n/////\n```\n\u67091\u4e2a4\uff0cn-2\u4e2a2\uff0c\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f$4\\times2^{n-2}$\n\n\u597d\u4e86\uff0c\u53ef\u4ee5\u5199\u4ee3\u7801\u4e86\uff08\u522b\u5fd8\u4e86\u6700\u540e\u7684\u4e584\uff09\u3002~~\u611f\u89c9\u6211\u81ea\u5df1\u90fd\u4e0d\u77e5\u9053\u6211\u5728\u8bf4\u4ec0\u4e48\u4e86\uff0c\u6211\u8fd8\u662f\u67d0\u4e00\u5929\u518d\u6539\u4e00\u4e0b\u8fd9\u9898\u89e3\u5427\u2026\u2026~~\u4ee3\u7801\uff08\u6211\u8fd9\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u5199\u5f97\u2026\u2026\u522b\u55b7\u6211\uff09\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int kcz=1000000007;\nconst int inv4=250000002;\nconst int inv3=333333336;\ntypedef long long ll;\ninline ll qpow(ll a,ll k)\n{\n    k%=kcz-1;\n    if(k<0) k+=kcz-1;\n    ll res=1;\n    while(k)\n    {\n        if(k&1) res=res*a%kcz;\n        if(k>>=1) a=a*a%kcz;\n    }\n    return res;\n}\nll ans,n,m;\n// 1+x+...+x^n x!=1\ninline ll sum(ll x,ll n) { return (1-qpow(x,n+1))*qpow(1-x,-1)%kcz; }\nint main()\n{\n    scanf(\"%lld%lld\",&n,&m);\n    if(n>m) swap(n,m); n--; m--;\n    if(!n) ans=qpow(2,m-1);\n    else\n    {\n        ans=qpow(3,m-n+1)*qpow(8,n-1)%kcz;\n        if(n>=2)\n        {\n            if(m==2) (ans+=4)%=kcz;\n            else if(n==2) (ans+=8*qpow(3,m-3))%=kcz;\n            else (ans+=qpow(2,3*n-5)*qpow(3,m-n))%=kcz;\n        }\n        if(m>2 && n>=2)\n        {\n            if(4<=n) (ans+=10*qpow(4,n-1)%kcz*(sum(inv4,n-1)-sum(inv4,2))%kcz*qpow(2,n-1)%kcz*qpow(3,m-n))%=kcz;\n            if(n==m) (ans+=5*qpow(2,n-1))%=kcz;\n            else\n            {\n                if(n!=2) (ans+=5*qpow(3,m-n-1)%kcz*qpow(2,n))%=kcz;\n                (ans+=qpow(2,n))%=kcz;\n                (ans+=qpow(2,n+1)*qpow(3,m-1)%kcz*(sum(inv3,m-1)-sum(inv3,n)))%=kcz;\n            }\n        }\n    }\n    printf(\"%lld\\n\",(ans*4%kcz+kcz)%kcz);\n    return 0;\n}\n```\n### \u540e\u8bdd\n\u611f\u8c22\u60a8\u770b\u5b8c\u4e86\u6211\u8fd9\u4e48\u957f\u7684\u9898\u89e3\uff08\u662f\u6211\u65f7\u91ce\u5927\u8ba1\u7b97\u7684\u9898\u89e3\u5b57\u8282\u6570\u76844/5\u5de6\u53f3\uff09\uff0c\u6211\u53ea\u60f3\u8bf4\uff0c\u8fd9\u662f\u4e00\u4e2a\u597d\u9898\uff0c\u503c\u5f97\u7814\u7a76\uff0c\u4e0d\u8981\u5c40\u9650\u4e8e\u6253\u8868\u627e\u89c4\u5f8b\uff0c\u8981\u6df1\u5165\u7814\u7a76\u5b83\u80cc\u540e\u7684\u6570\u5b66\u539f\u7406\u3002\u8fd9\u4e5f\u662f\u6211\u8ba4\u4e3a\u5b83\u4f5c\u4e3anoip\u9898\u4e0d\u597d\u7684\u4e00\u70b9\uff08\u4e5f\u53ef\u80fd\u662f\u56e0\u4e3a\u6211\u66b4\u529b\u6253\u6302\u4e86\u624d\u8fd9\u4e48\u60f3\uff09\uff0c\u6570\u636e\u8303\u56f4\u53c8\u7ed9\u8fd9\u4e48\u5c0f\uff0c\u8ba9\u4eba\u517b\u6210\u53ea\u60f3\u7740\u7528\u4e00\u79cd\u4e0d\u901a\u7528\u7684\u65b9\u6cd5\u505a\u5bf9\uff0c\u4ee5\u4e3a\u81ea\u5df1\u61c2\u4e86\uff0c\u5374\u4e0d\u6df1\u5165\u7814\u7a76\u7684\u574f\u4e60\u60ef\u3002",
        "postTime": 1547461381,
        "uid": 36998,
        "name": "ljc1301",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u7ed9\u51fa\u4e00\u79cd~~\u66b4\u529b~~\u9012\u63a8\u505a\u6cd5\n\n\u672c\u8d28\u4e0a\u5e94\u8be5\u662f\u72b6\u538b\n\n\u4e00\u5171\u9700\u898114\u4e2a\u6570\u5217\u7528\u4e8e\u9012\u63a8\n\n\u9996\u5148\u8bc1\u660e\u51e0\u4e2a\u7ed3\u8bba\uff1a\n\n1.\u4ea4\u6362n\u548cm\uff0c\u7b54\u6848\u4e0d\u53d8\n\n\u611f\u6027\u7406\u89e3\u5c31\u662f\uff1a\u53ef\u4ee5\u628a\u4e00\u4e2a\u5408\u6cd5\u65b9\u6848\u7ffb\u8f6c\uff0c\u5219\u4efb\u610f\u4e00\u5bf9\u8def\u5f84\u5b57\u5178\u5e8f\u5927\u5c0f\u5173\u7cfb\u53cd\u8f6c\uff0c\u4ea7\u751f\u768401\u4e32\u5927\u5c0f\u5173\u7cfb\u4e5f\u53cd\u8f6c\n\n\u4e0b\u9762\u662f~~\u4e25\u8c28~~\u7684\u8bc1\u660e\n\n\u5bf9\u4e8e\u4efb\u610f\u4e00\u79cd\u65b9\u6848\uff08\u5408\u6cd5\u7684\u6216\u4e0d\u5408\u6cd5\u7684\uff09\uff0c\u6784\u9020\u4e00\u4e2a\u65b9\u6848\uff0c\u5982\u679c$(x,y)=0$\uff0c\u5219\u65b0\u65b9\u6848\u4e2d$(y,x)=1$\uff0c\u5982\u679c$(x,y)=1$\uff0c\u5219\u65b0\u65b9\u6848\u4e2d$(y,x)=0$\n\n![](https://cdn.luogu.com.cn/upload/pic/57572.png)\n\n\u76f4\u89c2\u770b\u5c31\u662f\u5c06\u539f\u65b9\u6848\u5bf9\u79f0\u4e00\u4e0b\uff0c\u518d\u628a\u6bcf\u4e2a\u70b9\u72b6\u6001\u53cd\u8f6c\n\n\u539f\u65b9\u6848\u4e0e\u65b0\u65b9\u6848\u4e00\u4e00\u5bf9\u5e94\n\n\u8fd9\u6837\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u6761\u8def\u5f84$(x_1,y_1),(x_2,y_2),...,(x_{n+m-1},y_{n+m-1})$\uff0c\u8bbe\u5176\u5bf9\u5e94\u5b57\u7b26\u4e32\u4e3a$a_1,a_2,a_3,...a_{n+m-1}$\uff0c\u4ea7\u751f\u768401\u4e32\u4e3a$b_1,b_2,b_3,...b_{n+m-1}$\n\n\u5219\u7ffb\u8f6c\u540e\uff0c\u4ee4\u8fd9\u6761\u8def\u5f84\u5bf9\u5e94$(y_1,x_1),(y_2,x_2),...,(y_{n+m-1},x_{n+m-1})$\uff0c\u5bf9\u5e94\u5b57\u7b26\u4e32\u53d8\u4e3a$\\overline{a_1},\\overline{a_2},\\overline{a_3} ...\\overline{a_{n+m-1}}$\uff0c\u4ea7\u751f\u768401\u4e32\u53d8\u4e3a$\\overline{b_1},\\overline{b_2},\\overline{b_3},...\\overline{b_{n+m-1}}$\n\n\u8fd9\u6761\u8def\u5f84\u4e2d\uff0c\u539f\u6765\u5411\u4e0b\u8d70\u7684\u53d8\u4e3a\u5411\u53f3\u8d70\uff0c\u5411\u53f3\u8d70\u53d8\u4e3a\u5411\u4e0b\u8d70\uff0c\n\n\u800c01\u4e32\u4e2d\uff0c\u65b0\u4f4d\u7f6e\u6070\u597d\u548c\u539f\u4f4d\u7f6e\u7684\u5b57\u7b26\u76f8\u53cd\n\n\u6240\u4ee5\u7ffb\u8f6c\u540e\uff0c\u8fd9\u4e24\u4e2a\u4e32\u6bcf\u4e00\u4f4d\u90fd\u88ab\u53cd\u8f6c\u4e86\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5408\u6cd5\u65b9\u6848\uff1a\n\n>\u5982\u679c$w(P_1) > w(P_2)$\uff0c\u90a3\u4e48$s(P_1) \u2264 s(P_2)$\n\n\u5148\u8003\u8651\u7ffb\u8f6c\u524d\u540e\u7684\u5927\u5c0f\u5173\u7cfb\n\n\u5728\u6bd4\u8f83\u65f6\uff0c\u9996\u5148\u8df3\u8fc7\u5f00\u5934\u76f8\u540c\u90e8\u5206\n\n\u5982\u679c\u6700\u540e\u6ca1\u6709\u5269\u4e0b\u4efb\u4f55\u4e1c\u897f\uff0c\u5219\u8bf4\u660e\u76f8\u7b49\n\n\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u53cd\u8f6c\u540e\u7684\u4e24\u4e2a\u4e32\u4f9d\u7136\u6ee1\u8db3\u6bcf\u4e00\u4f4d\u76f8\u7b49\n\n\u5426\u5219\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a\u4e0d\u76f8\u540c\u4f4d\n\n\u7ffb\u8f6c\u540e\uff0c\u524d\u9762\u90e8\u5206\u4f9d\u7136\u76f8\u540c\n\n\u800c\u539f\u6765\u8fd9\u4e00\u4f4d\u662f0\u7684\u4e32\uff0c\u7ffb\u8f6c\u540e\u8fd9\u4e00\u4f4d\u53d8\u4e3a1\n\n\u539f\u6765\u8fd9\u4e00\u4f4d\u662f1\u7684\u4e32\uff0c\u7ffb\u8f6c\u540e\u8fd9\u4e00\u4f4d\u53d8\u4e3a0\n\n\u8fd9\u6837\uff0c\u5927\u5c0f\u5173\u7cfb\u5c31\u53cd\u8fc7\u6765\u4e86\n\n\u63a5\u4e0b\u6765\u8003\u8651\u4efb\u610f\u4e24\u6761\u6ee1\u8db3$w(P_1) > w(P_2)$\u7684\u8def\u5f84$P_1,P_2$\n\n\u7ffb\u8f6c\u540e\uff0c\u8def\u5f84\u6ee1\u8db3$\\overline{w(P_2)} > \\overline{w(P_1)}$\n\n\u5982\u679c$s(P_1) = s(P_2)$\uff0c\u90a3\u4e48\u7ffb\u8f6c\u540e\u6709$\\overline{s(P_1)} = \\overline{s(P_2)}$\n\n\u5982\u679c$s(P_1) < s(P_2)$\uff0c\u90a3\u4e48\u7ffb\u8f6c\u540e\u6709$\\overline{s(P_2)} < \\overline{s(P_1)}$\n\n\u5982\u679c$s(P_1) > s(P_2)$\uff0c\u90a3\u4e48\u7ffb\u8f6c\u540e\u6709$\\overline{s(P_2)} > \\overline{s(P_1)}$\n\n\u7ed3\u8bba\uff1a\u7ffb\u8f6c\u524d\u4e00\u4e2a\u65b9\u6848\u4e2d\uff0c\u5408\u6cd5\u7684\u4e00\u5bf9\u8def\u5f84\uff0c\u4e0e\u7ffb\u8f6c\u540e\u5408\u6cd5\u7684\u4e00\u5bf9\u8def\u5f84\u4e00\u4e00\u5bf9\u5e94\n\n\u5408\u6cd5\u65b9\u6848\u4e2d\u4efb\u610f\u4e00\u5bf9\u8def\u5f84\uff0c\u7ffb\u8f6c\u540e\u4f9d\u7136\u662f\u5408\u6cd5\u7684\uff0c\u56e0\u800c\u53ef\u4ee5\u5bf9\u5e94\u4e00\u4e2a\u5408\u6cd5\u65b9\u6848\n\n\u8fd9\u6837\uff0c\u539f\u5408\u6cd5\u65b9\u6848\u4e0e\u65b0\u5408\u6cd5\u65b9\u6848\u4e5f\u4e00\u4e00\u5bf9\u5e94\uff0c\u4e5f\u5c31\u662f\uff1a\u6570\u91cf\u76f8\u7b49\n\n2.\u6bcf\u6761\u5bf9\u89d2\u7ebf\u65b9\u5411\u4e0a\u7684\u6570\uff0c\u5fc5\u987b\u6ee1\u8db3\u53f3\u4e0a\u65b9\u7684\u6bd4\u5de6\u4e0b\u65b9\u7684\u5c0f\u6216\u76f8\u7b49\n\n![](https://cdn.luogu.com.cn/upload/pic/57575.png)\n\n\u8fd9\u6837\uff0c\u5982\u679c\u8d70\u7ea2\u8272\u7ebf\uff0c\u5219\u8def\u5f84\u7684\u5b57\u5178\u5e8f\u5c31\u4f1a\u6709\u4e00\u4e2a\"D\"\uff0c\u5982\u679c\u8d70\u9752\u8272\u5148\uff0c\u5219\u8fd9\u4e00\u4f4d\u5c31\u662f\"R\"\uff0c\u5f88\u663e\u7136\uff0c\u8d70\u7ea2\u8272\u7ebf\u5b57\u5178\u5e8f\u5c0f\n\n\u800c01\u4e32\u4e2d\uff0c\u7ea2\u8272\u7ebf\u8fd9\u4e00\u4f4d\u662f\"0\"\uff0c\u9752\u8272\u7ebf\u5bf9\u5e94\u4f4d\u662f\"1\"\uff0c\u8d70\u7ea2\u8272\u7ebf\u5b57\u5178\u5e8f\u5c0f\uff0c\u56e0\u800c\u975e\u6cd5\n\n\u8fd9\u6837\u53ef\u4ee5\u770b\u51fa\uff0c\u6bcf\u6761\u5bf9\u89d2\u7ebf\u65b9\u5411\u4e0a\u7684\u6570\uff0c\u5e94\u8be5\u7c7b\u4f3c\u4e8e\"00...0111...1\"\n\n3.\u5bf9\u4e8e\u6bcf\u4e00\u5bf9\u89d2\u7ebf\u65b9\u5411\u4e0a\u76f8\u90bb\u4e14\u76f8\u540c\u7684\u6570\uff0c\u4f1a\u5bfc\u81f4\u8fd9\u4e24\u4e2a\u6570\u53f3\u4e0b\u65b9\u4e00\u7247\u77e9\u5f62\u533a\u57df\u5fc5\u987b\u6ee1\u8db3\u6bcf\u6761\u5bf9\u89d2\u7ebf\u65b9\u5411\u4e0a\u7684\u6570\u5747\u76f8\u540c\n\n![](https://cdn.luogu.com.cn/upload/pic/57573.png)\n\n\u8fd9\u6837\u53ef\u4ee5\u627e\u5230\u4e24\u6761\u8def\u5f84\uff0c\u76f4\u5230\u7b2c\u4e8c\u6b21\u5206\u53c9\u524d\uff0c01\u4e32\u5b57\u5178\u5e8f\u4f9d\u7136\u76f8\u7b49\n\n\u8fd9\u65f6\u5019\u53ef\u4ee5\u770b\u51fa\uff0c\u8d70\u7ea2\u8272\u7ebf\u5b57\u5178\u5e8f\u8f83\u5c0f\n\n\u4f46\u662f\u518d\u8d70\u4e00\u6b65\uff0c\u5c31\u4f1a\u53d1\u73b0\uff1a\u5982\u679c\u7ea2\u8272\u70b9\u586b\"0\"\uff0c\u84dd\u8272\u70b9\u586b\"1\"\uff0c\u867d\u7136\u6ee1\u8db3\u7b2c\u4e8c\u6761\u7ed3\u8bba\uff0c\u4f46\u4f1a\u5bfc\u81f4\u8d70\u7ea2\u8272\u7ebf\u4ea7\u751f\u768401\u4e32\u6bd4\u84dd\u8272\u7ebf\u768401\u4e32\u5c0f\uff0c\u8fd9\u4e2a\u65b9\u6848\u5c31\u662f\u975e\u6cd5\u7684\n\n\u63a5\u4e0b\u6765\u5c31\u53ef\u4ee5\u60f3\u529e\u6cd5\u9012\u63a8\u4e86\n\n\u9996\u5148\u628a\u68cb\u76d8\u5f62\u72b6\u53d8\u4e00\u4e0b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/57570.png)\n\n\u8fd9\u6837\uff0c\u5bf9\u89d2\u7ebf\u5c31\u53d8\u6210\u4e86\u6c34\u5e73\u7ebf\uff0c\u4fbf\u4e8e\u8ba8\u8bba\n\n\u6839\u636e\u7b2c\u4e8c\u6761\u7ed3\u8bba\uff0c\u7ed3\u679c\u5c31\u662f\u4e00\u884c\u9700\u8981\u6ee1\u8db3\u4e00\u5b9a\u6b21\u5e8f\n\n\u6839\u636e\u7b2c\u4e09\u6761\u7ed3\u8bba\uff0c\u89c2\u5bdf\u4e00\u4e0b\u53d7\u5230\u9650\u5236\u533a\u57df\u7684\u5f62\u72b6\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/57576.png)\n\n\u5728\u65b0\u7684\u56fe\u4e2d\uff0c\u4e00\u884c\u4e24\u4e2a\u76f8\u540c\u7684\u6570\uff0c\u4ea7\u751f\u7684\u53d7\u9650\u5236\u533a\u57df\u5927\u6982\u5c31\u662f\u8fd9\u6837\u7684\n\n![](https://cdn.luogu.com.cn/upload/pic/57577.png)\n\n\u5de6\u8fb9\u8fd9\u4e2a\u56fe\u4e2d\uff0c\u88ab\u540c\u4e00\u6761\u9ed1\u7ebf\u7a7f\u8fc7\u7684\uff0c\u5fc5\u987b\u586b\u76f8\u540c\u7684\u6570\n\n\u800c\u89c2\u5bdf\u53f3\u8fb9\u7684\u56fe\uff0c\u4e24\u5757\u53d7\u9650\u5236\u533a\u57df\u76f8\u90bb\u65f6\uff0c\u5728\u4e0b\u4e00\u884c\u5408\u5e76\u4e3a\u4e00\u4e2a\u66f4\u5927\u7684\u53d7\u9650\u5236\u533a\u57df\n\n\u63a5\u4e0b\u6765\u53d1\u73b0\u6bcf\u586b\u4e00\u5c42\uff0c\u4e0b\u4e00\u5c42\u53d1\u751f\u53d8\u5316\u7684\u60c5\u51b5\u4e00\u5171\u4e09\u7c7b\uff1a\u5728\u672b\u7aef\u589e\u52a0\u4e00\u4e2a\u70b9\uff0c\u4e0d\u53d8\uff0c\u5220\u9664\u5f00\u5934\u7684\u4e00\u4e2a\u70b9\n\n\u8003\u8651\u5206\u4e09\u7c7b\u60c5\u51b5\u8f6c\u79fb\n\n\u5148\u538b\u7f29\u72b6\u6001\uff1a\u5bf9\u4e8e\u4e00\u6bb5\u53d7\u9650\u5236\u533a\u95f4\uff0c\u5230\u4e0b\u4e00\u884c\u4e5f\u4f1a\u4ea7\u751f\u4e00\u6bb5\u53d7\u9650\u5236\u533a\u95f4\uff0c\u5e76\u4e14\u8fd9\u4e00\u6bb5\u533a\u95f4\u5fc5\u987b\u586b\u76f8\u540c\u7684\u6570\n\n\u628a\u8fd9\u4e00\u6bb5\u538b\u7f29\u6210\u4e00\u4e2a\u70b9\uff0c\u8fd9\u4e2a\u70b9\u53ef\u4ee5\u4ec5\u8868\u793a\u4e00\u4e2a\u53d7\u9650\u5236\u7684\u70b9\uff08\u6ce8\u610f\uff1a\u5230\u4e0b\u4e00\u884c\u5c31\u4f1a\u5bfc\u81f4\u4e24\u4e2a\u70b9\u53d7\u9650\u5236\uff09\uff0c\u4e5f\u53ef\u4ee5\u8868\u793a\u5f88\u591a\u4e2a\u53d7\u9650\u5236\u7684\u70b9\n\n\u8fd9\u91cc\u72b6\u6001\u8868\u793a\uff1a\u586b\u5b8c\u4e0a\u4e00\u884c\uff0c\u8fd9\u4e00\u884c\u7684\u9650\u5236\u7684\u5f62\u72b6\u4e3a\u67d0\u4e00\u4e2a\u7684\u60c5\u51b5\u603b\u6570\n\n\u628a\u6240\u6709\u60c5\u51b5\u7684\u8f6c\u79fb\u5927\u529b\u8ba8\u8bba\u51fa\u6765\u5c31\u53ef\u4ee5\n\n\u6211\u8ba8\u8bba\u7684\u7ed3\u679c\uff1a\n\n```\no\noo\nooo\noxo\noxoo\noxxo\nooxo\nox\noxx\noox\nn\nx\nxx\nxo\n```\nx\u8868\u793a\u4e00\u6bb5\u53d7\u9650\u5236\u7684\u533a\u95f4\n\no\u8868\u793a\u4e00\u4e2a\u4e0d\u53d7\u9650\u5236\u7684\u70b9\n\n\u53e6\u5916\uff0cn\u8868\u793a\u6ca1\u6709\u4efb\u4f55\u70b9\uff0c\u4e5f\u5c31\u662f\u5f53\u6700\u540e\u4e00\u884c\u4e0d\u53d7\u9650\u5236\u65f6\uff0c\u586b\u5b8c\u6240\u6709\u683c\u5b50\u7684\u60c5\u51b5\n\n\u800cx\u4e5f\u53ef\u4ee5\u8868\u793a\u6700\u540e\u4e00\u884c\u53d7\u9650\u5236\u65f6\uff08\u5f53\u7136\u5e76\u6ca1\u6709\u4ec0\u4e48\u7528\uff09\uff0c\u586b\u5b8c\u6240\u6709\u683c\u5b50\u7684\u60c5\u51b5\n\n\u7136\u540e\u8003\u8651\u8f6c\u79fb\n\n\u8fd9\u91cc\u5c31\u4e0d\u628a\u6240\u6709\u60c5\u51b5\u5217\u51fa\u6765\u4e86\uff0c\u9012\u63a8\u516c\u5f0f\u53ef\u4ee5\u76f4\u63a5\u770b\u4ee3\u7801\n\n\u4e00\u4e2a\u4f8b\u5b50\uff1a\u5f53\u589e\u52a0\u4e00\u4e2a\u70b9\u65f6\uff0c\u72b6\u6001ooxo\n\n\u60c5\u51b51\uff1a\u5f00\u5934\u7684\u4e24\u4e2ao\u586b\u4e0d\u540c\u7684\u6570\n\n\u53ef\u4ee5\u770b\u51fa\uff0c\u53ea\u6709\u4e00\u79cd\u60c5\u51b5\n\n\u8fd9\u65f6\u5019\uff0cx\u628a\u672b\u5c3e\u7684o\u541e\u5e76\u4e86\uff0c\u4f46\u53c8\u5192\u51fa\u4e00\u4e2ao\n\n\u800c\u5176\u5b83\u4f4d\u7f6e\u586b\u76f8\u540c\u7684\u6570\u5e76\u4e0d\u4f1a\u4ea7\u751f\u6709\u6548\u7684\u9650\u5236\u533a\u95f4\n\n\u56e0\u800c\u53ef\u4ee5\u4ea7\u751f\u72b6\u6001ooxo\uff0c\u4e5f\u5c31\u662f\u5b83\u81ea\u8eab\n\n\u60c5\u51b52\uff1a\u5f00\u5934\u4e24\u4e2ao\u586b\u76f8\u540c\u7684\u6570\n\n\u4e00\u51714\u79cd\u60c5\u51b5\n\n\u8fd9\u65f6\u5019\uff0c\u5728\u4e0b\u4e00\u884c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u9650\u5236\u533a\u95f4\uff0c\u4e5f\u5c31\u662foxxo\n\n\u8f6c\u79fb\u65f6\uff0c\u628a\u5bf9\u5e94\u72b6\u6001\u52a0\u4e0a\u4e0a\u4e00\u884c\u67d0\u4e9b\u72b6\u6001\u7684\u60c5\u51b5\u6570\u5c31\u53ef\u4ee5\n\n\u5269\u4e0b\u7684\u60c5\u51b5\u8bf7\u8bfb\u8005\u81ea\u884c\u8ba8\u8bba\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u5f97\u51fa\u4e00\u4e2a14\u5143\u7ebf\u6027\u9012\u63a8\u6570\u5217\n\n\u6700\u540e\u53ef\u4ee5\u5f97\u51fa\u4e09\u79cd\u9012\u63a8\u89c4\u5219\n\n\u6839\u636en\u548cm\u786e\u5b9a\u6bcf\u4e2a\u89c4\u5219\u7684\u4f7f\u7528\u6b21\u6570\u5c31\u53ef\u4ee5\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n+m)$\uff0c\u7a7a\u95f4\u53ef\u4ee5\u4f18\u5316\u5230$O(1)$\n\n\u5982\u679c\u4f7f\u7528\u77e9\u9635\u5feb\u901f\u5e42~~\u4f18\u5316~~\uff0c\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u53d8\u4e3a$O(\\log n+\\log m)$\uff0c\u4f46\u662f\u4f1a\u6709\u4e00\u4e2a\u8d85\u5927\u7684\u5e38\u6570\uff08~~\u5e38\u6570\u518d\u5927\u4e5f\u662f\u5e38\u6570~~\uff09\n\n\u8ba8\u8bba\u7684\u65f6\u5019\u52a1\u5fc5\u7ec6\u5fc3\uff0c\u53ea\u8981\u9519\u4e00\u70b9\uff0c\u5c31\u4f1aWA\n\n\u6700\u540e\u662f\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nconst long long M=1000000007;\nint n,m;\nlong long fpow(long long a,int n){\n    if(n==0)return 1;\n    long long ans=fpow(a,n>>1);\n    ans=ans*ans%M;\n    if(n&1)ans=ans*a%M;\n    return ans;\n}\nlong long seed;\nnamespace mogician{\n\tint nc,mc;\n\tlong long a[2],b[2],c[2],d[2],e[2],f[2],g[2],h[2],k[2],l[2],m[2],n[2],p[2],q[2];\n\tlong long* arr[]={a,b,c,d,e,f,g,h,k,l,m,n,p,q,0};\n\tvoid mod(){\n\t\tfor(int k=0;k<14;k++){\n\t\t\tarr[k][1]%=M;\n\t\t}\n\t}\n\tvoid sw(){\n\t\tfor(int k=0;k<14;k++){\n\t\t\tswap(arr[k][0],arr[k][1]);\n\t\t}\n\t}\n\tvoid put(){\n\t\tfor(int k=0;k<14;k++){\n\t\t\tcout<<arr[k][0]<<\" \";\n\t\t}\n\t\tcout<<endl;\n\t}\n\tvoid cal1(){\n\t\ta[1]=0;\n\t\tb[1]=2*a[0];\n\t\tc[1]=b[0];\n\t\td[1]=2*b[0]+4*d[0]+5*f[0];\n\t\te[1]=c[0]+e[0];\n\t\tf[1]=2*c[0]+4*e[0]+4*g[0];\n\t\tg[1]=c[0]+g[0];\n\t\th[1]=0;\n\t\tk[1]=0;\n\t\tl[1]=0;\n\t\tm[1]=0;\n\t\tn[1]=0;\n\t\tp[1]=0;\n\t\tq[1]=0;\n\t\tmod();\n\t\tput();\n\t\tsw();\n\t}\n\tvoid cal2(){\n\t\ta[1]=2*a[0];\n\t\tb[1]=3*b[0];\n\t\tc[1]=c[0];\n\t\td[1]=3*c[0]+5*e[0];\n\t\te[1]=0;\n\t\tf[1]=0;\n\t\tg[1]=0;\n\t\th[1]=4*d[0]+5*f[0]+3*h[0]+4*k[0];\n\t\tk[1]=4*g[0]+3*l[0];\n\t\tl[1]=g[0]+l[0];\n\t\tm[1]=0;\n\t\tn[1]=0;\n\t\tp[1]=0;\n\t\tq[1]=0;\n\t\tmod();\n\t\tput();\n\t\tsw();\n\t}\n\tvoid cal3(){\n\t\ta[1]=b[0];\n\t\tb[1]=0;\n\t\tc[1]=0;\n\t\td[1]=0;\n\t\te[1]=0;\n\t\tf[1]=0;\n\t\tg[1]=0;\n\t\th[1]=c[0]+g[0]+l[0];\n\t\tk[1]=0;\n\t\tl[1]=0;\n\t\tm[1]=2*a[0];\n\t\tn[1]=2*b[0]+4*d[0]+5*f[0]+3*h[0]+4*k[0]+2*n[0]+3*p[0]+3*q[0];\n\t\tp[1]=2*c[0]+4*e[0]+4*g[0]+3*l[0];\n\t\tq[1]=c[0]+e[0];\n\t\tmod();\n\t\tput();\n\t\tsw();\n\t}\n\tlong long calc(){\n\t\ta[0]=1;\n\t\t\n\t\tfor(int i=2;i<=nc;i++)cal1();\n\t\tfor(int i=nc+1;i<=mc;i++)cal2();\n\t\tfor(int i=mc+1;i<=nc+mc;i++)cal3();\n\t\tput();\n\t\tlong long ans=0;\n\t\tfor(int k=0;k<14;k++){\n\t\t\tans+=arr[k][0];\n\t\t}\n\t\tans%=M;\n\t\treturn ans;\n\t}\n};\nint main(){\n    ios::sync_with_stdio(false);\n    cin>>n>>m;\n    if(n>m)swap(n,m);\n    mogician::nc=n;\n    mogician::mc=m;\n    cout<<mogician::calc();\n    return 0;\n}\n```",
        "postTime": 1556434130,
        "uid": 86649,
        "name": "Hope2075",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "## \u8fd9\u662f\u4e2a\u5bfb\u627e\u6570\u5b66\u89c4\u5f8b\u7684\u9898\uff0c\u6240\u4ee5\u8fd8\u662f\u8981\u81ea\u5df1\u601d\u8003\uff0c\u5982\u679c\u9760\u770b\u4e86\u9898\u89e3\u518d\u5957\u7528\u516c\u5f0fAC\u6b64\u9898\uff0c\u90a3\u5c31\u6beb\u65e0\u610f\u4e49\u4e86\u3002\n\n\n------------\n\u5176\u5b9e\u5176\u4ed6\u7684\u9898\u89e3\u4e5f\u65e9\u5df2\u8868\u660e\u4e86\u89c4\u5f8b\uff0c\u4f46\u5177\u4f53\u5982\u4f55\u5f97\u5230\u8fd9\u4e2a\u89c4\u5f8b\uff0c\u8fd9\u91cc\u5c31\u5c55\u793a\u4e00\u4e0b\u6253\u8868\u548c\u601d\u8003\u7684\u8fc7\u7a0b\u3002\n\n\u56fe\u7247\u4e2d\u5904\u4e8e\u540c\u4e00\u5bf9\u89d2\u7ebf\uff08\u7eff\u8272\u76f4\u7ebf\uff09\u4e0a\u7684\u84dd\u8272\u65b9\u5757\u5185\uff0c\u6240\u586b\u6570\u5b57\u5fc5\u987b\u76f8\u7b49\u3002\u7eff\u8272\u76f4\u7ebf\u65c1\u7684\u6570\u5b57\u4e3a\u8be5\u5bf9\u89d2\u7ebf\u7684\u586b\u6570\u65b9\u6848\u3002\n\n### 1.\u5f53$n=1$\u65f6\uff1a\n\n\u5f88\u660e\u663e\uff0c\u7b54\u6848\u662f$m^{2}$,\u8fd9\u91cc\u5c31\u4e0d\u591a\u8ba8\u8bba\u4e86\u3002\n\n### 2.\u5f53n$\\not =$1\u4e14$n=m$\u65f6\uff1a\n\n\u9996\u5148\u4ece\u6700\u7b80\u5355\u7684\u60c5\u51b5\u601d\u8003\uff0c\u90a3\u5c31\u662fn=m\uff0c\u6b64\u65f6\u56fe\u662f\u4e00\u4e2a\u77e9\u5f62\u3002\n\n\uff08n=3\u65f6\u7684\u60c5\u51b5\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/43959.png )\n\n\uff08n=4\u65f6\u7684\u60c5\u51b5\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/43960.png)\n\n\uff08n=5\u65f6\u7684\u60c5\u51b5\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/43956.png )\n\n\uff08n=6\u65f6\u7684\u60c5\u51b5\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/43961.png )\n\n\u5bf9\u6bd4\u8fd9\u51e0\u4e2aans\u7684\u7b97\u5f0f\uff1a\n\n$ans(3,3)=2^{2} \\times 3 \\times 4 $ + $2^{4} \\times 4$\n\n$ans(4,4)=2^{5} \\times 5$ + $2^{4} \\times 3 \\times 5$ + $2^{5} \\times 4^{2}$\n\n$ans(5,5)=2^{7} \\times 4 \\times 5$ + $2^{5} \\times 3\\times 5$ + $2^{6} \\times 4^{3}$\n\n$ans(6,6)=2^{7} \\times 9 \\times 4 \\times 5$ + $2^{6} \\times 3 \\times 5$ + $2^{7} \\times 4^{4}$\n\n\u6839\u636e\u6bcf\u4e2a\u5f0f\u5b50\u7684\u6700\u540e\u4e00\u9879\uff0c\u6ce8\u610f\u5230ans(n,n)\u548cans(n-1,n-1)\u4e4b\u95f4\u4f3c\u4e4e\u662f$2^{3}$\u7684\u5173\u7cfb\uff0c\u518d\u8fdb\u884c\u63a2\u7a76\uff0c\u53d1\u73b0n\u548cn-1\u4e4b\u95f4\u5b58\u5728\u8fd9\u6837\u7684\u5173\u7cfb\uff1a\n\n$ans(n,n)=2^{3} \\cdot ans(n-1,n-1) - 5 \\times 2^{n}$ ,$n \\ge 5$\n\n\u8fd9\u4e2a\u65b9\u7a0b\u5bf9ans(3,3)\u548cans(4,4)\u5e76\u4e0d\u9002\u7528\uff0c\u662f\u56e0\u4e3a\u5728$n \\le 3$\u65f6\u8def\u5f84\u7684\u79cd\u7c7b\u548c$n \\ge 4$\u65f6\u8def\u5f84\u7684\u79cd\u7c7b\u5e76\u4e0d\u5b8c\u5168\u76f8\u540c\u3002\u5177\u4f53\u539f\u56e0\u53ef\u4ee5\u770b\u56fe\u6765\u4e86\u89e3\u3002\n\n\u8bf4\u5230\u8fd9\uff0c\u6837\u4f8b\u8fd8\u662f\u5f88\u826f\u5fc3\u7684\u7ed9\u51fa\u4e86ans(2,2)\u548cans(3,3)\uff0c\u7701\u53bb\u4e86\u624b\u6a21\u7684\u9ebb\u70e6\u3002~~\uff08\u867d\u7136\u60f3\u63a8\u51fa\u6b63\u89e3\u4ecd\u8981\u624b\u6478\uff09~~\n\n### 3.\u5f53$n \\not = 1$\u4e14$n+1 = m$\u65f6\uff1a\n\n\u5f53$n = 2 ,3$\u5f88\u663e\u7136\uff1a$ans(n,n+1)=3 \\cdot ans(n,n)$\n\n\u5f53$n \\ge 4$\u65f6\uff1a\n\n\uff08n = 4 , m = 5\u7684\u60c5\u51b5\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/43965.png )\n\n\u5bf9\u6bd4\u8fd9\u4e24\u4e2aans\u7684\u7b97\u5f0f\uff1a\n\n$ans(4,4)=2^{5} \\times 5$ + $15 \\times 2^{4}$ + $2^{5} \\times 4^{2}$\n\n$ans(4,5)=3 \\times 2^{5} \\times 5$ + $42 \\times 2^{4}$ + $3 \\times 2^{5} \\times 4^{2}$\n\n\u53d1\u73b0\u5b83\u4eec\u4e4b\u95f4\u5b58\u5728\u7740\u548c3\u6709\u5173\u7684\u5173\u7cfb\n\n\u518d\u8fdb\u884c\u63a2\u7a76\u53ef\u4ee5\u53d1\u73b0\uff1a\n\n$ans(n,n+1)=3 \\cdot ans(n,n) - 3 \\times 2^{n} , n \\ge 4$\n\n### 4.\u5f53$n \\not = 1$\u4e14$n+1 < m$\u65f6\uff1a\n\n\u53ea\u8981\u5728\u4e4b\u524d\u7684\u57fa\u7840\u4e0a\u7a0d\u52a0\u63a8\u7b97\uff0c\u5373\u53ef\u53d1\u73b0\uff1a\n\n$ans(n,i)=3 \\cdot ans(n,i-1) , n+2 \\le i \\le m$\n\n### 5.\u5f53$n > m$\u65f6\uff1a\n\n\u6b64\u65f6\u5c06n\u548cm\u4ea4\u6362\u540e\u5904\u7406\u5373\u53ef\uff0c\u5177\u4f53\u539f\u56e0\u770b\u56fe\u4fbf\u53ef\u7406\u89e3\u3002\n\n\u9644\u4e0aPascal\u4ee3\u7801\uff1a\n```pas\nprogram project1;\nconst\n  mo=1000000007;\nvar\n   f:array[0..8]of longint;\n   n,m,i:longint;\n   ans:int64;\n\nbegin\n  read(n,m);\n  f[1]:=2;\n  for i:=2 to 8 do f[i]:=f[i-1]*2;\n  if n>m then begin\n    i:=n;\n    n:=m;\n    m:=i;\n  end;\n  if n=1 then begin\n    ans:=1;\n    for i:=1 to m do ans:=ans*2 mod mo;\n    writeln(ans);\n    exit;\n  end\n    else if n=2 then ans:=12\n      else if n=3 then ans:=112\n        else if n=4 then ans:=912\n          else begin\n            ans:=912;\n            for i:=5 to n do ans:=ans*8-5*f[i];\n          end;\n  if (m=n+1) and (n>3) then ans:=ans*3-3*f[n]\n    else if m=n+1 then ans:=ans*3;\n  if m>n+1 then begin\n    if n>3 then ans:=ans*3-3*f[n] else ans:=ans*3;\n    for i:=n+2 to m do ans:=ans*3 mod mo;\n  end;\n  writeln(ans);\nend.\n\n```",
        "postTime": 1542558059,
        "uid": 24425,
        "name": "fysbb",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u9898\uff0c\u9ad8\u6548\u5730\u6253\u8868\u3002\n\n~~\u4e5f\u6ca1\u4ec0\u4e48\u601d\u8def~~\n\n\u4e00\u5f00\u59cb\u6211\u8003\u8651\u4e86dp\uff0c\u5728\u8f6c\u79fb\u72b6\u6001\u65f6\u53d1\u73b0\u8fd9\u4e9b\u4e1c\u897f\u65e0\u975e\u662f\u4e24\u79cd\u60c5\u51b5\n\n1. \u526f\u5bf9\u89d2\u7ebf\u4e0a\u7684\u5143\u7d20\u4e0d\u76f8\u7b49\uff0c\u90a3\u4e48\u5b83\u4eec\u4ece\u4e0b\u5f80\u4e0a\u4e00\u5b9a\u662f\u4e0d\u51cf\u7684\u3002\n2. \u526f\u5bf9\u89d2\u7ebf\u7684\u5143\u7d20\u76f8\u7b49\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4efb\u610f\u4e24\u4e2a\u5bf9\u89d2\u7ebf\u4e0a\u76f8\u90bb\u7684\u683c\u5b50\uff0c$(x-1,y)$\uff0c$(x,y+1)$\uff0c\u90a3\u4e48\u4ee5\u683c\u70b9$(x,y)$\u4e3a\u5de6\u4e0a\u89d2\u7684\u4efb\u610f\u77e9\u9635\u4e2d\uff0c\u4ed6\u4eec\u7684\u526f\u5bf9\u89d2\u7ebf\u5fc5\u7136\u76f8\u7b49\u3002\n   \n\u7136\u540e\uff0c\u6211\u7684dp\u65b9\u7a0b\u5199\u4e0d\u4e0b\u53bb\u4e86\uff0c\u624b\u73a9\u4e00\u4e0a\u5348\uff0c\u4eba\u90fd\u5feb\u5410\u4e86\n\n\u4f46\u662f\u6211\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u4e0a\u8ff0\u7684\u4e24\u79cd\u60c5\u51b5\u662f\u6ee1\u8db3\u9898\u610f\u7684\u5145\u5206\u5fc5\u8981\u6761\u4ef6\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u6211\u6784\u9020\u51fa\u7684\u77e9\u9635\u6ee1\u8db3\u4e0a\u9762\u7684\u4e24\u4e2a\u6027\u8d28\uff0c\u90a3\u4e48\u6784\u9020\u51fa\u7684\u77e9\u9635\u4e00\u5b9a\u5408\u6cd5\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5``dfs``\uff0c\u4e00\u8fb9\u6c42\u4e00\u8fb9\u526a\u679d\uff0c\u7531\u4e8e\u8fd9\u662f\u5145\u5206\u5fc5\u8981\u6761\u4ef6\uff0c\u6240\u4ee5\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u5f53\u524d\u5408\u6cd5\u7684\u77e9\u9635\u6211\u5f80\u4e0b\u641c\u7d22\u4e00\u5b9a\u80fd\u5f97\u5230\u89e3\uff0c\u6240\u4ee5``dfs``\u7684\u641c\u7d22\u6b21\u6570\u5c31\u662f\u7b54\u6848\u5927\u5c0f\u3002\n\n\u6253\u8868\u4ee3\u7801\u5c55\u793a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=30;\ntypedef long long ll;\nll ans;\nint a[N][N],f[N][N];\nvoid work(int x,int y,int n,int m)\n{\n    if(x>n)\n    {\n        ans++;\n        return ;\n    }\n    int tx=x,ty=y+1;\n\tif(ty>=m+1) ty=1,tx+=1;\n\tfor(int i=0;i<=1;i++)\n    {\n\t\tif(i<a[x-1][y+1]) continue;\n\t\tif(f[x-1][y] && x-1>=1 && y+1<=m && i!=a[x-1][y+1]) continue;\n\t\ta[x][y]=i,f[x][y]=a[x-1][y]==a[x][y-1]||f[x-1][y]||f[x][y-1];\n\t\twork(tx,ty,n,m);\n\t}\n}\nll cal(int n,int m)\n{\n    ans=0;\n    work(1,1,n,m);\n    return ans;\n}\nint main()\n{\n    for(int n=1;n<=8;n++)\n        for(int m=n;m<=n+3;m++)\n        {\n            for(int i=1;i<n;i++)\n\t\t        a[i][0]=8;\n\t        for(int i=1;i<=m;i++)\n\t\t        a[0][i]=-8;\n            printf(\"ans(%d,%d)=%lld\\n\",n,m,cal(n,m));\n            memset(a,0,sizeof(a));\n            memset(f,0,sizeof(f));\n        }\n    return 0;\n}\n```\n\u4e8e\u662f\u4e4e\u6211\u4eec\u6253\u51fa\u4e86\u4e00\u5f20\u8868\n```\ntime ./a\nans(1,1)=2\nans(1,2)=4\nans(1,3)=8\nans(1,4)=16\nans(2,2)=12\nans(2,3)=36\nans(2,4)=108\nans(2,5)=324\nans(3,3)=112\nans(3,4)=336\nans(3,5)=1008\nans(3,6)=3024\nans(4,4)=912\nans(4,5)=2688\nans(4,6)=8064\nans(4,7)=24192\nans(5,5)=7136\nans(5,6)=21312\nans(5,7)=63936\nans(5,8)=191808\nans(6,6)=56768\nans(6,7)=170112\nans(6,8)=510336\nans(6,9)=1531008\nans(7,7)=453504\nans(7,8)=1360128\nans(7,9)=4080384\nans(7,10)=12241152\nans(8,8)=3626752\nans(8,9)=10879488\nans(8,10)=32638464\nans(8,11)=97915392\n./a  9.60s user 0.01s system 99% cpu 9.635 total\n```\n\n>\u6253\u8868\u627e\u89c4\u5f8b\uff0c\u66b4\u529b\u51fa\u5947\u8ff9\n\n\u4f60\u53c8\u53ef\u4ee5\u6253\u8868\u53d1\u73b0$ans(n,m)=ans(m,n)$\n\n\u94a6\u5b9a$n\\le m$\uff0c\u6211\u4eec\u53d1\u73b0\n\n- \u5f53$n \\le 3$\u65f6\n  - if $n=1$ \uff0c$ans=2^m$\n  - $n=2$,$ans=12 \\times 3^{m-2}$\n  - $n=3$,$ans=112\\times 3^{m-3}$\n- \u5426\u5219\n  - \u82e5$n=m$\uff0c$ans=ans(n,n)$\n  - \u5426\u5219 $ans=ans(n,n+1) \\times 3^{m-n-1}$\n\n\u7136\u540e\u4f60\u5c31\u6109\u5feb\u7684A\u4e86\u6b64\u9898\n\nAC\u4ee3\u7801\u5c55\u793a\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nconst int qiyang=1e9+7;\nusing namespace std;\nint a[]={0,0,0,0,912,7136,56768,453504,3626752};\nint b[]={0,0,0,0,2688,21312,170112,1360128,10879488};\nint power(int a,int b)\n{\n    int res=1;\n    a%=qiyang;\n    while(b)\n    {\n        if(b&1) (res*=a)%=qiyang;\n        b>>=1,(a*=a)%=qiyang;\n    }\n    return res%qiyang;\n}\nint mod(int x){return (x%qiyang+qiyang)%qiyang;}\nsigned main()\n{\n    int n,m;\n    scanf(\"%lld%lld\",&n,&m);\n    if(n>m) swap(n,m);\n    if(n==1) printf(\"%lld\\n\",power(2,m));\n    else if(n==2) printf(\"%lld\\n\",mod(4*power(3,m-1)));\n    else if(n==3) printf(\"%lld\\n\",mod(112*power(3,m-3)));\n    else \n    {\n        if(n==m) printf(\"%lld\\n\",a[n]);\n        else printf(\"%lld\\n\",mod(b[n]*power(3,m-n-1)));\n    }\n    return 0;\n}\n```\n\n~~\u8bc1\u660e\u4ec0\u4e48\u7684\u6211\u624d\u4e0d\u4f1a\u5462~~\n\n\u795dCSP2019 RP++",
        "postTime": 1573726450,
        "uid": 53410,
        "name": "XY_cpp",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u8003\u573a\u4e0a\u627e\u4e86\u4e00\u4e2a\u5c0f\u65f6\u89c4\u5f8bemm...\n\n\u7ea6\u5b9a\u7528p\u8868\u793a\u68cb\u76d8\n\n\u9996\u5148\u5bf9\u4e8en=1,\u663e\u7136ans=$2^m$\n\n\u7136\u540e\u5bf9\u4e8en=2,\u663e\u7136\u6709$p[2][y]>=p[1][y+1]$,\u6240\u4ee5ans=$4\\times 3^{m-1}$\n\n\u5bf9\u4e8en=3\u4e0d\u6210\u7acb\u4e86\uff0c\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u4f8b\u5b50\n\n![]( https://cdn.luogu.com.cn/upload/pic/43433.png )\n\n\u4e0d\u4e00\u5b9a\u6ee1\u8db3$p[x][y]>=p[x-1][y+1]$,\u6709\u53ef\u80fd\u662f$p[x][y]=p[x-1][y+1]$\n\n\u4ece\u6570\u636e\u8303\u56f4\u770b\uff0c$O(2^8\\times 10^6)$\u592a\u5927\uff0c\u4e0d\u8003\u8651\u72b6\u538b\uff0c\u8003\u8651\u627e\u89c4\u5f8b\uff0c\u5148\u5199\u4e00\u4e2a\u66b4\u529b\n\n```cpp\nbool mp[10][10]; int dp[10][10][10][10][2];\nbool check(int X1, int Y1, int X2, int Y2, bool same){\n    if(dp[X1][Y1][X2][Y2][same] != -1) return dp[X1][Y1][X2][Y2][same];\n    int &x = dp[X1][Y1][X2][Y2][same];\n    if(X1 > n || Y1 > m || X2 > n || Y2 > m) return x=true;\n    if(X1 == n && Y1 == m) return true;\n    if(!same && mp[X1][Y1] > mp[X2][Y2]) return x=true;\n    if(!same && mp[X1][Y1] < mp[X2][Y2]) return x=false;\n    if(same){\n        return x=check(X1+1,Y1,X2,Y2+1,0) &&\n               check(X1+1,Y1,X2+1,Y2,1) &&\n               check(X1,Y1+1,X2,Y2+1,1);\n    }\n    else{\n        return x=check(X1+1,Y1,X2+1,Y2,0) &&\n               check(X1+1,Y1,X2,Y2+1,0) &&\n               check(X1,Y1+1,X2,Y2+1,0) &&\n               check(X1,Y1+1,X2+1,Y2,0);\n    }\n}\nvoid dfs(int x, int y){\n    if(y > m){ dfs(x + 1, 1); return;\t}\n    if(x > n){ memset(dp, -1, sizeof(dp)); ans += check(1, 1, 1, 1, 1); return;\t}\n    if(x >= 2 && y < m){\n        if(!mp[x-1][y+1]){\n            mp[x][y] = 0; dfs(x, y + 1);\n        }\n        mp[x][y] = 1; dfs(x, y + 1);\n    }\n    else{\n        mp[x][y] = 0; dfs(x, y + 1);\n        mp[x][y] = 1; dfs(x, y + 1);\n    }\n}\n```\n\u590d\u6742\u5ea6$O(2^{nm}\\times nm)$,\u66b4\u529b\u6253\u5f97\u5feb\u5c31\u597d\n\n\u53ef\u4ee5\u5f97\u5230\u5f53n=3\u65f6,ans=$112\\times3^{m-3}$\n\n\u76f4\u63a5\u8bf4\u89c4\u5f8b\uff0c\u6211\u4eec\u80fd\u53d1\u73b0\u5f53$n<m+1$\u65f6\uff0c$ans[n][m+1]=ans[n][m]*3$\n\n\u4e14\u6709$ans[4][4]=912,ans[n][n]=ans[n-1][n-1]\\times 8-5\\times 2^n$\n\n\u6709$ans[n][n+1] = ans[n][n]\\times 3 - 3\\times 2^n$\n\n\u5982\u679c\u8003\u573a\u6ca1\u65f6\u95f4\uff0c\u627e\u89c4\u5f8b\u8fd8\u662f\u5f88\u4e0d\u9519\u7684\n\n(\u5e0c\u671b\u6709dalao\u8bc1\u660e\u89c4\u5f8bemm...\n\n\u9644\u4e0a\u8003\u573a\u4ee3\u7801\n\n```cpp\n#include <cstdio>\n#include <cstring>\ntypedef long long ll;\nconst int mod = 1e9+7;\ninline ll qpow(ll a, int n){\n    ll ret(1);\n    for(; n; n >>= 1, (a*=a)%=mod){\n        if(n&1) (ret*=a)%=mod;\n    }\n    return ret;\n}//\u5feb\u901f\u5e42\uff0c\u5176\u5b9e10^6\u4e0d\u9700\u8981emm...\nint n, m, ans;\ninline void solve1(){\n    printf(\"%lld\\n\", qpow(2ll, m));\n}//n=1\ninline void solve2(){\n    printf(\"%lld\\n\", 4ll*qpow(3ll, m-1)%mod);\n}//n=2\nbool mp[10][10]; int dp[10][10][10][10][2];\nbool check(int X1, int Y1, int X2, int Y2, bool same){\n    if(dp[X1][Y1][X2][Y2][same] != -1) return dp[X1][Y1][X2][Y2][same];\n    int &x = dp[X1][Y1][X2][Y2][same];\n    if(X1 > n || Y1 > m || X2 > n || Y2 > m) return x=true;\n    if(X1 == n && Y1 == m) return true;\n    if(!same && mp[X1][Y1] > mp[X2][Y2]) return x=true;\n    if(!same && mp[X1][Y1] < mp[X2][Y2]) return x=false;\n    if(same){\n        return x=check(X1+1,Y1,X2,Y2+1,0) &&\n               check(X1+1,Y1,X2+1,Y2,1) &&\n               check(X1,Y1+1,X2,Y2+1,1);\n    }\n    else{\n        return x=check(X1+1,Y1,X2+1,Y2,0) &&\n               check(X1+1,Y1,X2,Y2+1,0) &&\n               check(X1,Y1+1,X2,Y2+1,0) &&\n               check(X1,Y1+1,X2+1,Y2,0);\n    }\n}//\u68c0\u67e5\u662f\u5426\u5408\u6cd5\nvoid dfs(int x, int y){\n    if(y > m){ dfs(x + 1, 1); return;\t}\n    if(x > n){ memset(dp, -1, sizeof(dp)); ans += check(1, 1, 1, 1, 1); return;\t}\n    if(x >= 2 && y < m){\n        if(!mp[x-1][y+1]){\n            mp[x][y] = 0; dfs(x, y + 1);\n        }\n        mp[x][y] = 1; dfs(x, y + 1);\n    }\n    else{\n        mp[x][y] = 0; dfs(x, y + 1);\n        mp[x][y] = 1; dfs(x, y + 1);\n    }\n}//\u7206\u641c\ninline void solve3(){\n    dfs(1, 1);\n    printf(\"%d\\n\", ans);\n}//\u66b4\u529b\ninline void solve4(){\n    printf(\"%lld\\n\", 112ll*qpow(3,m-3)%mod);\n}//n==3\ninline void solve5(){\n    if(m == 4){\n        printf(\"%lld\\n\", 912ll);\n    }\n    else{\n        printf(\"%lld\\n\", 2688ll*qpow(3,m-5)%mod);\n    }\n}//n==4\ninline void solve6(){\n    if(m == 5){\n        printf(\"%lld\\n\", 7136ll);\n    }\n    else{\n        printf(\"%lld\\n\", 21312ll*qpow(3,m-6)%mod);\n    }\n}//n=5\nll t[10], t1[10];\ninline void init(){\n    t[4] = 912; ll tmp = 160;\n    for(int i(5); i <= 8; ++i, (tmp*=2)%=mod){\n        t[i] = t[i-1]*8 - tmp;\n        t[i] %= mod;\n    }\n    tmp = 48;\n    for(int i(4); i <= 8; ++i, (tmp*=2)%=mod){\n        t1[i] = t[i]*3 - tmp;\n        t1[i] %= mod;\n    }\n}//\u9884\u5904\u7406\u89c4\u5f8b\ninline void solve10(){\n    if(n == m){\n        printf(\"%lld\\n\", t[n]);\n    }\n    else{\n        printf(\"%lld\\n\", t1[n] * qpow(3, m-n-1) % mod);\n    }\n}//\u5229\u7528\u89c4\u5f8b\u89e3\u9898\nint main(){\n//\tfreopen(\"game.in\", \"r\", stdin);\n//\tfreopen(\"game.out\", \"w\", stdout);\n    init();\n    scanf(\"%d%d\", &n, &m);\n    if(n > m) n ^= m ^= n ^= m;\n    if(n == 1){\n        solve1();\n    }\n    else if(n == 2){\n        solve2();\n    }\n    else if(n == 3){\n        solve4();\n    }\n    else{\n        solve10();\n    }\n    return 0;\n}\n```",
        "postTime": 1542115135,
        "uid": 32576,
        "name": "ygsldr",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.luogu.com.cn/blog/271736/solution-p5023)\n\n\u8fd9\u9053\u9898\u4e00\u4e0a\u6765\u5199\u7684\u65f6\u5019\uff0c\u8fd8\u4ee5\u4e3a\u662f\u4e00\u9053dp\uff0c\u7ed3\u679c\u5374\u662f\u63a8\u67ff\u5b50\uff08\u6253\u8868\uff09\u9898\uff0c\u5199\u4e86\u4e00\u4e0b\u5348\uff0c\u6211\u4f1a\u5c3d\u53ef\u80fd\u5730\u8bb2\u5f97\u6e05\u695a\u3002\u4f46\u5728\u8fd9\u4e4b\u524d\uff0c\u8fd9\u9053\u9898\u6253\u8868\u51fa\u7684\u8868\u6216\u8005\u7279\u6b8a\u503c\u9700\u8981\u77e5\u9053\uff08\u6253\u8868\u4ee3\u7801\u5176\u4ed6\u9898\u89e3\u90fd\u6709\uff0c\u5c31\u4e0d\u5c55\u793a\u4e86\uff09\u3002\n\n## \u5f00\u59cb\u63a8\u5f0f\u5b50\n\n\u9996\u5148\u6211\u4eec\u770b\u5230\u6570\u636e\u8303\u56f4\uff0c$n$\u7684\u8303\u56f4\u8f83\u5c0f\uff0c\u53ef\u4ee5\u4ece\u8fd9\u65b9\u9762\u5165\u624b\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f53$m$\u548c$n$\u8c03\u6362\uff0c\u7b54\u6848\u662f\u4e0d\u4f1a\u53d7\u5f71\u54cd\u7684$F(n,m)=F(m,n)$\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u5148\u4ee4 $n\\le m$\uff08\u6bd5\u7adf\u6570\u636e\u8303\u56f4\u4e5f\u80fd\u53cd\u6620\uff09,\u8bbe\u7b54\u6848\u4e3a $F(n,m)$\u3002\n\n### \u5f53 $n=1$\u65f6\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u8fd9\u4e2a\u77e9\u9635\u8868\u683c\u5c31\u662f\u4e00\u4e2a $1\\times m$\u7684\u77e9\u9635\uff0c\u81ea\u7136\u4e5f\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c\u8def\u7ebf\u4e4b\u5206\uff0c\u6bcf\u4e00\u4e2a\u683c\u5b50\u90fd\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u603b\u60c5\u51b5\u4e3a $2^m$\u79cd\u3002\n\n### \u5f53 $n=2$&$3$\u65f6\n\n\u5373\u53ef\u5f97\u5230\u5f0f\u5b50\u4e3a $(2^n-1)\\times 2^{2^{n-1}}\\times 3^{m-n}\\times 3^{m-n-1}$\uff0c\u5c06 $m,n$\u5206\u79bb$(3^{2m-2n-1})$\uff0c\u8ba1\u7b97\u5f97\u5f53 $n=2$\u65f6\uff0c\u4e3a $12\\times 3^{m-2}$,\u5f53 $n=3$\u65f6\uff0c\u4e3a $112\\times 3^{m-3}$\uff0c\u53ef\u5f97\u51fa\u4ee3\u7801\u3002\n\n### \u5f53 $n>3$\u65f6\n\n\u5728\u8fd9\u65f6\uff0c\u5c31\u9700\u8981\u4e00\u4e9b\u7279\u6b8a\u503c\u4e86\uff0c\u5982\u524d\u9762\u6240\u8bf4\uff0c\u6211\u4eec\u4f1a\u4ece $n$\u6765\u5165\u624b\uff0c\u6240\u4ee5\u5f53 $n=m$\u65f6\u7ed3\u679c\u4fbf\u662f\u7279\u6b8a\u503c\u3002\u6709\u4e86\u8fd9\u4e9b\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff1a\n$$F(n,n+1)=3\\times F(n,n)-3\\times 2^n=3\\times(F(n,n)-2^n)$$\n\n\u6709\u4e86 $F(n,n+1)$\u5c31\u53ef\u4ee5\u4e00\u76f4\u63a8\u5230 $F(n,m)$\u4e86\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u76f4\u63a5\u63a8\u51fa\u901a\u9879\uff1a\n$$F(n,m)=3\\times(F(n,n)-2^n)\\times 3^{m-n-1}$$\n\n\u8fd9\u6837\uff0c\u8fd9\u9053\u9898\u7684\u4ee3\u7801\u5c31\u5dee\u4e0d\u591a\u6c34\u843d\u77f3\u51fa\u4e86\u3002\n\n### \u5c0f\u7ec6\u8282\uff08\u4e5f\u5f88\u91cd\u8981\uff09\n\n\u8fd9\u9053\u9898\u7684\u6570\u636e\u8303\u56f4\u4e2d\uff0c$n$\u7684\u867d\u7136\u4e0d\u5927\uff0c\u4f46 $m$\u7684\u5374\u662f $10^6$\uff0c\u6240\u4ee5\u5728\u8ba1\u7b97\u6b21\u5e42\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u80fd\u7528`pow`\u51fd\u6570\u6765\u76f4\u63a5\u8fd0\u7b97\u4e86\uff0c\u9700\u8981\u81ea\u5df1\u624b\u5199\uff0c\u5e76\u4e14\u52a0\u4e0a\u4e00\u4e9b\u4f18\u5316\uff08\u4f4d\u8fd0\u7b97\uff09\u3002\n\n\u4ee3\u7801\u5c31\u653e\u8fd9\u4e86\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nlong long n,m,a[8]={912,7136,56768,453504,3626752};\nconst long long mod=1e9+7;\nlong long _pow(long long a,long long b){\n\tlong long ans=1;\n\twhile(b){\n\t\tif(b&1)ans=ans*a%mod;\n\t\ta=a*a%mod;\n\t\tb>>=1;\n\t}\n\treturn ans%mod;\n}\nint main(){\n\tcin>>n>>m;\n\tif(n>m){\n\t    swap(n,m);\n\t}\n\tif(n<=3){\n\t\tif(n==1)cout<<_pow(2,m);\n\t\tif(n==2)cout<<(12*_pow(3,m-2))%mod;\n\t\tif(n==3)cout<<(112*_pow(3,m-3))%mod;\n\t}else{\t\n\t\tif(n==m){\n\t\t\tcout<<a[n-4];\n\t\t}else{\n\t\t\tcout<<3*(a[n-4]-_pow(2,n))*_pow(3,m-n-1)%mod;\n\t\t}\n\t}\n\treturn 0;\n}\n\n```\n\u5e0c\u671b\u7ba1\u7406\u5458\u901a\u8fc7\uff0c\u8c22\u8c22\uff01",
        "postTime": 1602940446,
        "uid": 271736,
        "name": "Daidly",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "**\u9898\u76ee\u5927\u610f**\n\n\u7528$0,1$\u586b\u4e00\u4e2a$n*m$\u7684\u77e9\u9635\u3002\n\n\u4f7f\u5f97\u6709$2$\u6761\u8def\u5f84$P1,P2$ $,$ \u5982\u679c$w(P1)>w(P2)$ $,$ \u5fc5\u987b$s(P1)\u2264S(P2)$\u3002\n\n\u5bf9\u4e8e\u6240\u6709\u6570\u636e$n\u22648,m\u22641000000$\u3002\n\n------------\n**\u9898\u76ee\u89e3\u6cd5**\n\n\u8bbe$F(n,m)$\u662f$n,m$\u7684\u7b54\u6848\u3002\n\n\u7531\u4e8e$F(n,m)=F(m,n)$ $,$ \u6240\u4ee5\u4e0d\u59a8\u4ee4$n\u2264m$\u3002\n\n\u5f53$n=1$\u65f6 $,$ $F(n,m)=2^m$(\u8981\u7279\u5224)\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0 $,$ \u53ea\u8981\u6c42\u51fa$n\u22648$\u65f6$F(n,n)$\u548c$F(n,n+1)$\u7684\u503c,\u5c31\u53ef\u4ee5\u6c42\u51fa\u6240\u6709$F(n,m)$\u7684\u503c\u3002\n\n\u5f53$m\u2265n+2$\u6216$m>8$\u65f6 $,$ $F(n,m)=F(n,n+1)*3^{m-n-1}$\n\n------------\n\n**\u9644\u4e0a\u4ee3\u7801**\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll mod=1e9+7;\nconst ll a[9][2]= {{0,0},{0,0},{12,36},{112,336},{912,2688},{7136,21312},{56768,170112},{453504,1360128},{3626752,10879488}};\nint n,m;\nll power(int x,int y) {\n\tll ret=1;\n\tfor(; y; y>>=1,x=1LL*x*x%mod)\n\t\tif(y&1) ret=1LL*ret*x%mod;\n\treturn ret;\n}\nint main() {\n\tcin>>n>>m;\n\tif (n>m) swap(n,m);\n\tif (n==1) cout<<power(2,m)<<endl;\n\telse if (m==n) cout<<a[n][0]<<endl;\n\telse cout<<(a[n][1]*power(3,m-n-1))%mod<<endl;\n}\n\n```\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "postTime": 1550487708,
        "uid": 39544,
        "name": "fsq0726",
        "ccfLevel": 0,
        "title": "P5023 \u586b\u6570\u6e38\u620f \u9898\u89e3"
    },
    {
        "content": "[\u6211\u7684\u535a\u5ba2](https://www.cnblogs.com/Memory-of-winter/p/9977656.html)\n\n**\u9898\u76ee\u5927\u610f\uff1a**$NOIP2018\\;TG\\;D2T2$\n\n**\u9898\u89e3\uff1a**\u5728[skip2004](https://www.luogu.org/space/show?uid=30122)\u7684[\u535a\u5ba2](https://www.luogu.org/blog/qianyi/solution-p5023)\u57fa\u7840\u4e0a\u4fee\u6539\u7684\uff0c\u4e5f\u662f\u66b4\u641c\u3002\n\n\u8bf4\u660e\u4e00\u4e0b\u628avector\u6539\u6210\u6570\u7ec4\u5e76\u4e0d\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\uff0c[\u8bb0\u5f55](https://www.luogu.org/record/show?rid=13917002)\u3002\n\n\u7ed3\u8bba\uff1a\u5728$m>n+1$\u65f6\u7b54\u6848\u4e3a$3(n,m)$\uff08$(n,m)$\u8868\u793a\u957f$m$\u9ad8$n$\u7684\u77e9\u5f62\u7684\u7b54\u6848\uff09\n\n\u53d1\u73b0\u5176\u4e2d\u5224\u65ad\u53f3\u4e0b\u89d2\u77e9\u9635\u659c\u7ebf\u5168\u76f8\u7b49\u7684\u90e8\u5206\u53ef\u4ee5\u4f18\u5316\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4e00\u6761\u659c\u7ebf\uff0c\u6bcf\u6b21\u90fd\u641c\u53f3\u4e0b\u89d2\u7684\u77e9\u9635\uff0c\u6709\u5f88\u591a\u90e8\u5206\u90fd\u662f\u91cd\u590d\u641c\u7684\uff0c\u5b8c\u5168\u53ef\u4ee5\u6bcf\u6b21\u641c\u53ea\u4e0e\u5b83\u4e0b\u9762\u7684\u4e00\u5c42\u6bd4\u8f83\uff0c\u53d1\u73b0\u4e00\u6761\u659c\u7ebf\u4e2d\u6700\u591a\u53ea\u6709\u4e00\u4e2a$01$\u4ea4\u754c\u5904\uff0c\u4e8e\u662f\u5bf9\u4e8e\u8fd9\u4e00\u884c\u8fdb\u884c\u7279\u5224\uff0c\u5c11\u641c\u4e00\u4e2a\uff0c\u4f46\u662f\u6ce8\u610f\u6700\u4e0b\u9762\u7684\u4e00\u884c\u53ef\u80fd\u4e0d\u662f\u5e95\uff0c\u9700\u8981\u628a\u6574\u4e2a\u77e9\u9635\u641c\u4e00\u904d\u3002\n\n\u8fd9\u6837\u4f3c\u4e4e\u590d\u6742\u5ea6\u662f\u4e0d\u53d8\u7684\uff08\u6211\u6570\u5b66\u5dee\uff09\uff0c\u7136\u540e\u4ea4\u4e86\u4e00\u4e0b\uff0c\u53d1\u73b0\u8fd8\u662f\u4f1a$TLE$\uff0c\u5230\u6d1b\u8c37$IDE$\u4e0a\u6d4b\u4e86\u4e00\u4e0b\u662f$1126ms$\uff0c\u4e8e\u662f\u52a0\u4e0a\u4e00\u5806$register$\u548c$const$\u5c31\u8fc7\u4e86\uff0c\u6700\u6162\u7684\u70b9$925ms$\u3002\n\n\u6211\u5728\u6d1b\u8c37$IDE$\u4e0a\u53c8\u8bd5\u4e86\u4e00\u4e0b\uff0c\u539f\u6765\u5168\u90e8\u641c\u4e00\u904d\u7684\u4ee3\u7801\u52a0\u4e0a$register$\u548c$const$\u7528\u65f6\u662f$1263ms$\uff08\u6240\u6709\u6d4b\u8bd5\u6570\u636e\u5747\u4e3a`8 9`\uff09\n\n\n\n**C++ Code\uff1a**\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n#define maxn 10\nconst int mod = 1e9 + 7;\ninline int pw(int base, int p) {\n\tif (p < 0) return 1;\n\tint res = 1;\n\tfor (; p; p >>= 1, base = static_cast<long long> (base) * base % mod) if (p & 1) res = static_cast<long long> (res) * base % mod;\n\treturn res;\n}\ninline int min(int a, int b) {return a < b ? a : b;}\ninline int max(int a, int b) {return a > b ? a : b;}\n\nint n, m, ans;\nint s[maxn][maxn];\nstruct node {\n\tint x, y;\n\tinline node() {};\n\tinline node(int __x, int __y) {x = __x, y = __y;}\n} v[maxn << 1][maxn];\nint tot[maxn << 1];\n\nvoid dfs(const int X) {\n\tif (X < 2) {\n\t\tans++;\n\t\treturn ;\n\t}\n\tfor (register node *i = v[X + 1]; i -> x; i++) {\n\t\tconst int x = i -> x, y = i -> y;\n//\t\tif (1 < x && x < n && y < m) {\n//\t\t\tif (s[x][y] == s[x - 1][y + 1]) {\n//\t\t\t\tfor (register int j = x; j < n; j++) {\n//\t\t\t\t\tfor (register int k = y + 2; k <= m; k++) if (s[j][k] != s[j + 1][k - 1]) return ;\n//\t\t\t\t}\n//\t\t\t}\n//\t\t}\n\t\tif (1 < x && x < n && y < m) {\n\t\t\tif (x == X) {\n\t\t\t\tif (s[x][y] == s[x - 1][y + 1]) {\n\t\t\t\t\tfor (register int j = x; j < n; j++) {\n\t\t\t\t\t\tfor (register int k = y + 2; k <= m; k++) if (s[j][k] != s[j + 1][k - 1]) return ;\n\t\t\t\t\t}\n\t\t\t\t} else if (x != 2) {\n\t\t\t\t\tfor (register int j = x; j < n; j++) {\n\t\t\t\t\t\tfor (register int k = y + 3; k <= m; k++) if (s[j][k] != s[j + 1][k - 1]) return ;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (s[x][y] == s[x - 1][y + 1]) {\n\t\t\t\t\tfor (register int j = y + 2; j <= m; j++) if (s[x][j] != s[x + 1][j - 1]) return ;\n\t\t\t\t} else if (x != 2) {\n\t\t\t\t\tfor (register int j = y + 3; j <= m; j++) if (s[x][j] != s[x + 1][j - 1]) return ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (register node *i = v[X]; i -> x; i++) s[i -> x][i -> y] = 1;\n\tdfs(X - 1);\n\tfor (register node *i = v[X]; i -> x; i++) {\n\t\ts[i -> x][i -> y] = 0;\n\t\tdfs(X - 1);\n\t}\n}\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tif (n > m) std::swap(n, m);\n\tif (n == 1) {\n\t\tprintf(\"%d\\n\", pw(2, m));\n\t\treturn 0;\n\t}\n\tint res = pw(3, m - n - 1);\n\tm = min(n + 1, m);\n\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= m; j++) v[i + j][tot[i + j]++] = node(i, j);\n\t}\n\tdfs(n + m);\n\tprintf(\"%lld\\n\", static_cast<long long> (ans) * res % mod);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1542518680,
        "uid": 22072,
        "name": "Memory_of_winter",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u5728\u8003\u573a\u4e0a\u4e25\u683c\u63a8\u5f0f\u5b50\u5bf9\u6211\u8fd9\u79cd\u849f\u84bb\u663e\u7136\u662f\u4e0d\u73b0\u5b9e\u7684\\\n\u8bb2\u4e00\u4e0b\u6211\u7684\u601d\u7ef4\u8fc7\u7a0b\uff0c\u89c2\u5bdf\u9898\u9762\u90e8\u5206\u6570\u636e\u8303\u56f4\u8f83\u5c0f\uff0c\u8003\u8651\u72b6\u538bDP\uff0c\u63a5\u7740\u9605\u8bfb\u53d1\u73b0\u90e8\u5206\u6570\u636e\u7684m\u5f88\u5927\uff0c\u4f46n\u5f88\u5c0f\uff0c\u6709\u53ef\u80fd\u662f\u77e9\u9635\u5feb\u901f\u5e42\u52a0\u901f\u9012\u63a8\uff0c\u8bfb\u5b8c\u540e\u53d1\u73b0\u6bcf\u6b21\u8f93\u5165\u53ea\u6709n\u3001m\u4e24\u4e2a\u6570\u5b57\uff0c\u6240\u4ee5\u5f88\u53ef\u80fd\u53ef\u4ee5\u6253\u8868\u627e\u89c4\u5f8b\u505a\u51fa\\\n\u5148\u624b\u73a9\u51e0\u4e0b\uff0c\u53d1\u73b0\u4e0d\u662f\u5f88\u53ef\u505a\uff0c\u6240\u4ee5\u5f7b\u5e95\u8f6c\u5411\u66b4\u529b\u6253\u8868\\\n\u90a3\u4e0d\u59a8\u5148\u5199\u51fa\u66b4\u529b\uff0c\u5c31\u7b97\u6700\u7ec8\u627e\u4e0d\u51fa\u89c4\u5f8b\u4e5f\u53ef\u4ee5\u62ff\u5230n,m\u5f88\u5c0f\u65f6\u7684\u90e8\u5206\u5206\n\n\u8003\u8651\u6309\u9898\u610f\u6734\u7d20\u66b4\u529b\uff0c\u53d1\u73b0\u590d\u6742\u5ea6\u8fc7\u9ad8\uff0c\u5f88\u53ef\u80fdm,n\u4e3a4\u65f6\u90fd\u5f88\u96be\u8dd1\u51fa\u6765\uff0c\u90a3\u53ea\u80fd\u56de\u53bb\u627e\u6027\u8d28\uff0c\u627e\u526a\u679d\\\n\u7531\u4e8e\u662f\u8d70\u683c\u5b50\u95ee\u9898\uff0c\u80af\u5b9a\u8981\u6309\u5bf9\u89d2\u7ebf\u8003\u8651\uff0c\u90a3\u4e48\u663e\u7136\u53ef\u4ee5\u770b\u51fa\u6bcf\u4e2a\u5bf9\u89d2\u7ebf\u4ece\u5de6\u4e0b\u5230\u53f3\u4e0b\u80af\u5b9a\u662f\u51681\u3001\u51680\u3001\u51481\u540e0\u8fd9\u4e09\u79cd\u3002\u8fd9\u6837\u66b4\u529b\u679a\u4e3e\u683c\u5b50\u586b\u4ec0\u4e48\u7684\u590d\u6742\u5ea6\u5c31\u964d\u5230\u4e86\u9636\u4e58\u7ea7\uff0c\u518d\u8003\u8651\u5982\u4f55check\uff0c\u76f4\u63a5\u679a\u4e3e\u6240\u670901\u4e32\u66b4\u529b\u6bd4\u8f83\u4e5f\u80af\u5b9a\u4e0d\u597d\uff0c\u7531\u4e8e\u53ea\u670901\uff0c\u53ef\u4ee5\u60f3\u5230\u538b\u6210\u6574\u6570\u6bd4\u8f83\u3002check\u53ef\u4ee5\u8dd1\u6b21DFS\uff0c\u5982\u679c\u5bf9\u4e8e\u6240\u6709(x,y)\u5411\u53f3\u7684\u6240\u6709\u768401\u5e8f\u5217\u975e\u4e25\u683c\u5c0f\u4e8e\u5411\u4e0b\u7684\uff0c\u90a3\u4e48\u8fd9\u79cd\u65b9\u6848\u663e\u7136\u53ef\u884c\u3002\u60f3\u5230\u8fd9\u91cc\u6211\u5199\u51fa\u4e86\u7b2c\u4e00\u4e2a\u66b4\u529b\uff0c\u7b2c\u4e8c\u6b21check\u5bf9\u6bcf\u4e2a\u70b9\uff0c\u66b4\u529b\u4e24\u91cd\u5faa\u73af\u66b4\u529b\u679a\u4e3e\u5411\u4e0b\u548c\u5411\u53f3\u768401\u4e32\u8fdb\u884c\u6bd4\u8f83\uff0c\u53ef\u4ee5\u57281h\u5185\u8dd1\u51fa7\u4ee5\u5185\u7684\u70b9\u5bf9\u3002\n\n\u7ee7\u7eed\u8003\u8651\u5982\u4f55\u4f18\u5316\uff0c\u53d1\u73b0\u5bf9\u6bcf\u4e2a\u70b9\u6ca1\u6709\u5fc5\u8981\u66b4\u529b\u679a\u4e3e\u4e24\u4e2a\uff0c\u76f4\u63a5\u6392\u5e8f\u6bd4\u8f83\u5373\u53ef\uff0c\u7136\u540e\u53d1\u73b0\u5728\u53ef\u884c\u7684\u65b9\u6848\u4e2d\uff0c\u5411\u53f3\u7684\u90a3\u90e8\u5206\u5fc5\u7136\u975e\u4e25\u683c\u5c0f\u4e8e\u5411\u4e0b\u7684\u90a3\u90e8\u5206\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u5f00\u4e2a\u6570\u7ec4\uff0c\u5728\u9012\u5f52\u524d\u8bb0\u5f55\u603b01\u4e32\u6570\u91cf$l = tot+1$\uff0c\u8fd4\u56de\u65f6\u518d\u8bb0\u5f55\u4e00\u6b21$mid = tot\uff0cr = tot$\uff0c\u8fd9\u6837$[l, mid]$\u5c31\u662f\u5411\u53f3\u7684\u90e8\u5206\uff0c$[mid+1, r]$\u5c31\u662f\u5411\u4e0b\u7684\u90e8\u5206\uff0c\u4e24\u4e2a\u5b50\u533a\u95f4\u4e2d\u7684\u6570\u5b57\u5fc5\u7136\u6709\u5e8f\uff0c\u5426\u5219\u5728\u4e4b\u524d\u5c31\u4f1a\u5224\u65ad\u4e0d\u53ef\u884c\uff0c\u90a3\u4e48\u6211\u4eec\u5224\u65ad$[l, mid]$\u4e2d\u7684\u6570\u662f\u5426\u5747\u5c0f\u4e8e$[mid+1, r]$\u4e2d\u7684\u6570\uff0c\u53ea\u9700\u8981\u6bd4\u8f83$arr[mid]$\u548c$arr[mid+1]$\u5373\u53ef\uff0c\u8fdb\u800c\u53d1\u73b0\u6839\u672c\u6ca1\u6709\u5fc5\u8981\u8bb0\u5f55\u5176\u4ed6\u6570\u5b57\uff0c\u53ea\u9700\u8981\u7ef4\u62a4\u6700\u5927\u503c\u548c\u6700\u5c0f\u503c\u5373\u53ef\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u53d8\u6210DP\uff0c\u72b6\u6001\u662f\u6bcf\u4e2a\u70b9\u5411\u4e0b\u8d70\u5230\u7ec8\u70b9\u7684\u6700\u5c0f\u503c\u548c\u6700\u5927\u503c\uff0c\u5230\u8fd9\u6b65\u6211\u5199\u51fa\u4e86\u6211\u7684\u7b2c\u4e8c\u4e2a\u66b4\u529b\uff0c\u53ef\u4ee5\u987a\u5229\u7684\u8dd1\u51fa(8,7)\uff0c(8, 8)\u4e86\u3002\n\n\u7136\u540e\u6211\u4eec\u89c2\u5bdf\u4e00\u4e0b\u6253\u51fa\u6765\u7684\u8868\uff0c\u6b63\u89e3\u8ba8\u8bba\u51fa\u7684\u901a\u9879\u516c\u5f0f\u4e8b\u5b9e\u4e0a\u662f\u96be\u4ee5\u770b\u51fa\u7684\uff0c\u4e0d\u8fc7\u6211\u4eec\u663e\u7136\u53ef\u4ee5\u770b\u51fa\u5728\u540e\u9762\u662f\u67093\u7684\u5e42\u6b21\u7684\u9012\u53d8\u89c4\u5f8b\u7684\uff0c\u6240\u4ee5\u5f53m > 8\u65f6\uff0c\u76f4\u63a5\u7528\u5feb\u901f\u5e42\u5373\u53ef\uff0c100pts\u6709\u671b\u3002\n\n\u4f46\u662f\u4ecd\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5728n=8\u65f6\uff0cm<=8\u5185\u8fd8\u6ca1\u770b\u51fa3\u7684\u9012\u53d8\u89c4\u5f8b\uff0c\u6240\u4ee5\u6211\u4eec\u4ecd\u9700\u8ba1\u7b97(8, 9)\n\n\u7ee7\u7eed\u8003\u8651\u4f18\u5316\u66b4\u529b\uff0c\u53d1\u73b0\u6211\u4e4b\u524d\u72af\u4e86\u975e\u5e38\u611a\u8822\u7684\u9519\u8bef\uff0c\u641c\u7d22\u5c45\u7136\u6ca1\u52a0\u53ef\u884c\u6027\u526a\u679d\uff0c\u7528\u4e86\u611a\u8822\u7684\u751f\u6210\u68c0\u6d4b\u6cd5\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u6ca1\u586b\u5b8c\u7684\u65f6\u5019\u63d0\u524dcheck\uff0c\u5982\u679c\u4e0d\u53ef\u884c\u76f4\u63a5\u8fd4\u56de\u3002\u8fd9\u6837(8, 9)\u5728\u6211\u7684NOI LINUX\u4e0a\u5df2\u7ecf\u80fd30s\u5185\u8dd1\u51fa\u6765\u4e86\uff0c\u53d1\u73b0\u6709\u9012\u53d8\u89c4\u5f8b\uff0c\u5feb\u901f\u5e42\u4ea4\u4e0a\u53bb\u5373\u53ef\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n\n#define rint register int\n#define valid(x, y) (1 <= (x) && (x) <= n && 1 <= (y) && (y) <= m)\n#define isnum(x) ('0' <= (x) && (x) <= '9')\ntemplate<typename tint>\ninline void readint(tint& x) {\n\tint f = 1; char ch = getchar(); x = 0;\n\tfor(; !isnum(ch); ch = getchar()) if(ch == '-') f = -1;\n\tfor(; isnum(ch); ch = getchar()) x = x * 10 + ch - '0';\n\tx *= f;\n}\nusing namespace std;\nconst int maxn = 1000;\nconst int maxnode = 1e6;\nconst int inf = 1e9;\nint n, m;\n\nint dp[10][10][2], ma[maxn][maxn], ans = 0;\nbool check(int maxd) {\n\tfor(rint d=maxd; d>=1; d--) {\n\t\tfor(rint i=max(-m+d+1, 1); i<=min(n, d); i++) {\n\t\t\trint j = d - i + 1;\n\t\t\tdp[i][j][0] = 1e9, dp[i][j][1] = -1;\n\t\t\tdp[i][j][0] = min(valid(i+1, j) ? dp[i+1][j][0] : inf, valid(i, j+1) ? dp[i][j+1][0] : inf);\n\t\t\tdp[i][j][1] = max(valid(i+1, j) ? dp[i+1][j][1] : -1, valid(i, j+1) ? dp[i][j+1][1] : -1);\n\t\t\tif(ma[i][j]) dp[i][j][0] |= (1 << (n+m-d)), dp[i][j][1] |= (1 << (n+m-d));\n\t\t\tif(valid(i+1, j) && valid(i, j+1) && dp[i+1][j][0] < dp[i][j+1][1]) return 0;\n\t\t}\n\t}\n\treturn 1;\n}\nvoid dfs(int d) {\n\tif(d >= 3 && check(d-1) == 0) return;\n\tif(d == n + m - 1) {\n\t\tans++;\n\t\treturn;\n\t}\n\tdfs(d+1);\n\tfor(rint i=min(n, d), j=d-i+1; i>=max(-m+d+1, 1); i--, j=d-i+1) ma[i][j] = 1, dfs(d+1);\n\tfor(rint i=min(n, d), j=d-i+1; i>=max(-m+d+1, 1); i--, j=d-i+1) ma[i][j] = 0;\n}\nint main() {\n\tn = 8, m = 9;\n\tdfs(1);\n\tprintf(\"n = %d, m = %d ans = %d\\n\",n, m, ans * 2);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1569828669,
        "uid": 107978,
        "name": "Rintaro",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "# \u3010NOIP2018\u3011\u586b\u6570\u6e38\u620f\n\n\u6765\u4e00\u53d1\u72b6\u538b\u9898\u89e3\u3002\u611f\u8c22xyz3278\u7684\u597d\u601d\u8def\uff0cxyz32768\u7684\u535a\u5ba2\u94fe\u63a5\uff1ahttps://blog.csdn.net/xyz32768/article/details/84111253\n\n\u4ed6\u7684\u535a\u6587\u91cc\u9762\u6709\u56fe\uff0c\u53ef\u4ee5\u7ed3\u5408\u8d77\u6765\u770b\u4e00\u4e0b\uff0c\u6b64\u5916\u6211\u8bb2\u7684\u53ef\u80fd\u7a0d\u5fae\u8be6\u7ec6\u4e00\u4e9b\u5427\n\n\u5148\u6446\u4e24\u4e2a\u7ed3\u8bba\uff0c\u539f\u56e0\u81ea\u884c\u601d\u8003\n\n1. $V_{i+1,j}\\geq V_{i,j+1}$\n2. \u82e5 $V_{i+1,j}=V_{i,j+1}$\uff0c\u5219\u77e9\u5f62\u533a\u57df$(i+1,j+1)$\u5230$(n,m)$\u7684\u6bcf\u6761\u5de6\u4e0b-\u53f3\u4e0a\u5bf9\u89d2\u7ebf\u4e2d\u7684\u6570\u5b57\u90fd\u8981\u76f8\u7b49\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8bbe$f_{i,k,s}$\u8868\u793a\u4ece\u53f3\u4e0b\u5f80\u5de6\u4e0a\u6570\u7684\u7b2c$i$\u6761\u5bf9\u89d2\u7ebf\uff0c\u653e\u4e86$k$\u4e2a$1$\uff0c\u76f8\u7b49\u72b6\u6001\u4e3a$s$\u65f6\u7684\u65b9\u6848\u6570\u3002\u663e\u7136\u8fd9$k$\u4e2a$1$\u5fc5\u7136\u662f\u653e\u5728\u4ece\u5de6\u4e0b\u5f00\u59cb\u7684\u8fde\u7eed$k$\u4e2a\u4f4d\u7f6e\uff0c\u56e0\u6b64$j$\u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u8fd9\u6761\u5bf9\u89d2\u7ebf\u7684\u72b6\u6001\u3002\u76f8\u7b49\u72b6\u6001\u662f\u6307\uff1a\u82e5\u4ee5\u5bf9\u89d2\u7ebf\u7684\u7b2c$t$\u4e2a\u4f4d\u7f6e\u4e3a\u5de6\u4e0a\u89d2\u3001\u4ee5$(n,m)$\u4e3a\u53f3\u4e0b\u89d2\u7684\u77e9\u5f62\uff0c\u6ee1\u8db3\u5de6\u4e0b-\u53f3\u4e0a\u5bf9\u89d2\u7ebf\u4e2d\u6570\u5b57\u76f8\u7b49\uff0c\u5219$s$\u7684\u4e8c\u8fdb\u5236\u7b2c$t$\u4f4d\u4e3a$1$\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e$i,k,s$\uff0c\u7136\u540e\u8003\u8651\u5c06$f_{i,k,s}$\u5f80\u4e0b\u4e00\u6761\u5bf9\u89d2\u7ebf\u8f6c\u79fb\u3002\u90a3\u4e48\u6211\u4eec\u679a\u4e3e\u4e0b\u4e00\u6761\u5bf9\u89d2\u7ebf\u7684\u72b6\u6001$x$\uff08\u5373\u5b83\u5305\u542b$x$\u4e2a$1$\uff09\uff0c\u7136\u540e\u6211\u4eec\u68c0\u67e5\u679a\u4e3e\u5230\u7684\u8fd9\u4e2a\u72b6\u6001\u662f\u5426\u5408\u6cd5\u3002\u5982\u679c\u5408\u6cd5\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e0b\u4e00\u6761\u5bf9\u89d2\u7ebf\u7684\u7b2c$p$\u4e2a\u4f4d\u7f6e\uff08\u4ece\u5de6\u4e0b\u5230\u53f3\u4e0a\u7f16\u53f7\uff09\uff0c\u9664\u975e$p$\u4f4d\u7f6e\u4e3a$1$\u4e14$p+1$\u4f4d\u7f6e\u4e3a$0$\uff08\u5373$p=x$\uff09\uff0c\u5426\u5219\u4ee5$p$\u4f4d\u7f6e\u53f3\u8fb9\u90a3\u4e2a\u683c\u5b50\u4e3a\u5de6\u4e0a\u89d2\u3001\u4ee5$(n,m)$\u4e3a\u53f3\u4e0b\u89d2\u7684\u77e9\u5f62\uff0c\u5fc5\u7136\u8981\u6ee1\u8db3\u5de6\u4e0b-\u53f3\u4e0a\u5bf9\u89d2\u7ebf\u4e2d\u6570\u5b57\u76f8\u7b49\uff0c\u5229\u7528\u5bf9\u89d2\u7ebf$i$\u7684$s$\u72b6\u6001\u5224\u5b9a\u5373\u53ef\u3002\n\u68c0\u67e5\u4e86\u5408\u6cd5\u6027\uff0c\u8fd8\u8981\u77e5\u9053\u6211\u4eec\u4ece$f_{i,k,s}$\u8f6c\u79fb\u5230\u54ea\u91cc\u53bb\u3002$x$\u5df2\u7ecf\u786e\u5b9a\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5f97\u5230\u4e0b\u4e00\u6761\u5bf9\u89d2\u7ebf\u7684\u76f8\u7b49\u72b6\u6001\uff0c\u5229\u7528$s$\u72b6\u6001\u7a0d\u4f5c\u63a8\u5bfc\u5373\u53ef\uff0c\u5177\u4f53\u89c1\u4ee3\u7801\n\n\u8fd9\u6837\u5f97\u5230\u7684\u590d\u6742\u5ea6\u662f$O(m2^nn^3)$\uff0c\u628a\u65e0\u6548\u72b6\u6001break\u6389\uff0c\u62ff80\u5206\u5e94\u8be5\u6ca1\u6709\u95ee\u9898\n\n\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u627e\u89c4\u5f8b\u554a\u3002\u6253\u8868\uff0c\u53d1\u73b0\uff0c\u5f53$n\\geq 2$\u4e14$m>n+1$\u65f6\uff0c\u6709$ans_{n,m}=3\\times ans_{n,m-1}$\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u6c42\u5f97$ans_{n,n+1}$\uff0c\u7136\u540e\u7b49\u6bd4\u6570\u5217\u6c42\u4e00\u4e0b\u5c31\u884c\u4e86\uff0c\u590d\u6742\u5ea6$O(n^42^n)$\n\n\u6ce8\u610f\u6211\u4eec\u89c4\u5f8b\u7684\u524d\u63d0\u6761\u4ef6\u662f$n\\geq 2$\uff0c\u56e0\u6b64\u8981\u6ce8\u610f\u7279\u5224$n=1$\u7684\u70b9\u3002$n=1$\u65f6\u7b54\u6848\u663e\u7136\u4e3a$2^m$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n \nconst int ha=1e9+7;\nint f[2][10][260],n,m,nm;\nint len[1000020],tot;\n \nvoid add(int &x,const int &y){x=x+y>=ha?x+y-ha:x+y;}\nint dwn(int t,int x){return t>tot-n+1?x:x-1;}\nint rght(int t,int x){return t>tot-n+1?x+1:x;}\nbool in(int x,int s){return s&(1<<x-1);}\n \nint Pow(int a,int b)\n{\n    int ans=1;\n    for(;b;b>>=1,a=1ll*a*a%ha)\n        if(b&1) ans=1ll*ans*a%ha;\n    return ans;\n}\n \nint main()\n{\n    cin>>n>>m;\n    if(n>m) swap(n,m);\n    if(n==1)\n    {\n        printf(\"%d\\n\",Pow(2,m));\n        return 0;\n    }\n    if(m>n+1) nm=m,m=n+1;\n    tot=n+m-1;\n    for(int i=1;i<=n;i++) len[i]=i;\n    for(int i=n+1;i<=m;i++) len[i]=n;\n    for(int i=m+1;i<=tot;i++) len[i]=tot-i+1;\n    f[1][0][1]=f[1][1][1]=1;\n    for(int i=2;i<=tot;i++)\n    {\n        int k=i&1;\n        memset(f[k],0,sizeof(f[k]));\n        for(int s=0;s<(1<<len[i-1]);s++)\n            for(int j=0;j<=len[i-1];j++)\n            {\n                if(!f[k^1][j][s]) continue;\n                for(int y=0;y<=len[i];y++)\n                {\n                    bool flag=1;\n                    for(int x=1;x<len[i];x++)\n                        if(x!=y&&!in(rght(i,x),s)){flag=0;break;}\n                    if(!flag) continue;\n                    int t=0;\n                    for(int k=1;k<=len[i];k++)\n                    {\n                        int d=dwn(i,k),r=rght(i,k);\n                        if(d<1&&in(r,s)) t|=1<<k-1;\n                        else if(r>len[i-1]&&in(d,s)) t|=1<<k-1;\n                        else if(d!=j&&in(d,s)&&in(r,s)) t|=1<<k-1;\n                    }\n                    add(f[k][y][t],f[k^1][j][s]);\n                }\n            }\n    }\n    int ans=0;\n    for(int i=0;i<2;i++)\n        for(int j=0;j<2;j++)\n            add(ans,f[tot&1][i][j]);\n    if(nm) ans=1ll*ans*Pow(3,nm-m)%ha;\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1542941154,
        "uid": 20158,
        "name": "Ebola",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u6570\u5b66\u9898\u3002\u901a\u8fc7\u624b\u7b97\u53ef\u4ee5\u63a8\u5bfc\u51fa\u4ee5\u4e0b\u89c4\u5f8b\uff1a\n\n1. \u5f53n = 1\u65f6\uff0cans = 2^m.\n1. \u5f53n = 2 \u65f6\uff0cans = 4\u00d73^(m-1).\n1. \u5f53n = 3\u4e14m >= 3\u65f6\uff0cans = 112\u00d73^(m-3).\n\n\u6700\u540e\u4e00\u4e2a\u89c4\u5f8b\u4e0d\u6613\u76f4\u63a5\u63a8\u5bfc\uff0c\u4f46\u662f\u53ef\u4ee5\u5148\u5199\u4e00\u4e2a\u66b4\u529b\u6df1\u641c\u7684\u7a0b\u5e8f\u7136\u540e\u7528\u77aa\u773c\u6cd5\u627e\u89c4\u5f8b\u3002\u7528\u8fd9\u4e09\u6761\u89c4\u5f8b\u53ef\u4ee5\u62ff\u523065\u5206\u3002\n\nn,m <= 8\u7684\u60c5\u51b5\u53ef\u4ee5\u72b6\u6001\u538b\u7f29\u6216\u8005\u6253\u8868\uff0c\u8fd9\u6837\u4e00\u6765\u603b\u5171\u53ef\u4ee5\u5728\u8003\u573a\u4e0a\u62ff\u523080\u5206\uff0c\u5177\u4f53\u65b9\u6cd5\u4e0d\u7ec6\u8bf4\u3002\n\n\u6784\u5efa\u901a\u89e3\u9700\u8981\u53d1\u73b0\u5982\u4e0b\u89c4\u5f8b\uff1a\n\n1. \u5bf9\u4e8e\u6bcf\u4e00\u6761\u81ea\u5de6\u4e0b\u5230\u53f3\u4e0a\u7684\u5bf9\u89d2\u7ebf\uff0c\u586b\u6570\u662f\u975e\u4e25\u683c\u5355\u8c03\u9012\u51cf\u7684\u3002\n1. \u5982\u679c(i-1,j)\u548c(i,j-1)\u7684\u586b\u6570\u76f8\u540c\uff0c\u90a3\u4e48\u4ee5(i,j)\u4e3a\u5de6\u4e0a\u89d2\u3001\u4ee5(n,m)\u4e3a\u53f3\u4e0b\u89d2\u7684\u5b50\u77e9\u9635\u5185\u6240\u6709\u5bf9\u89d2\u7ebf\u5185\u7684\u586b\u6570\u5404\u81ea\u76f8\u7b49\u3002\n\n\u8fd9\u4e24\u6761\u89c4\u5f8b\u53ef\u4ee5\u501f\u52a9\u6570\u5b66\u5f52\u7eb3\u6cd5\u4e25\u5bc6\u8bc1\u660e\u3002\u6709\u4e86\u8fd9\u4e24\u6761\u89c4\u5f8b\u4e4b\u540e\u4fbf\u53ef\u4ee5\u83b7\u5f97\u901a\u89e3\u3002\u5177\u4f53\u5206\u4e3a\u4e09\u79cd\u60c5\u51b5\uff1a\n\n1. (1,0)\u4e0e(0,1)\u5185\u7684\u586b\u6570\u76f8\u540c\u7684\u60c5\u51b5\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\u6700\u5de6\u8fb9\u4e00\u5217\u548c\u6700\u4e0a\u8fb9\u4e00\u884c\u4f1a\u53d7\u5230\u53f3\u4e0b\u65b9\u5b50\u77e9\u9635\u4e2d\u586b\u6570\u7684\u7ea6\u675f\u3002\n1. (1,0)\u4e0e(0,1)\u5185\u7684\u586b\u6570\u4e0d\u540c\uff0c\u800c(2,0),(1,1),(0,2)\u4e2d\u7684\u4e09\u4e2a\u6570\u5168\u90e8\u76f8\u540c\u7684\u60c5\u51b5\u3002\u540c\u4e0a\u3002\n1. (1,0)\u4e0e(0,1)\u5185\u7684\u586b\u6570\u4e0d\u540c\uff0c\u800c(1,1)\u4e0e(0,2)\u76f8\u540c\u3001\u4e0e(2,0)\u4e0d\u540c\uff0c\u6216(1,1)\u4e0e(2,0)\u76f8\u540c\u3001\u4e0e(0,2)\u4e0d\u540c\u7684\u60c5\u51b5\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6700\u4e0a\u8fb9\u4e00\u884c\u548c\u6700\u5de6\u8fb9\u4e24\u5217\uff0c\u6216\u8005\u6700\u4e0a\u8fb9\u4e24\u884c\u548c\u6700\u5de6\u8fb9\u4e00\u5217\u4f1a\u53d7\u5230\u53f3\u4e0b\u65b9\u7684\u5b50\u77e9\u9635\u4e2d\u7684\u586b\u6570\u7684\u7ea6\u675f\u3002\u4e14\u5982\u679c\u4e24\u884c\u6216\u8005\u4e24\u5217\u4e2d\u7684\u5bf9\u89d2\u7ebf\u4e0a\u51fa\u73b0\u76f8\u540c\u7684\u586b\u6570\uff0c\u5176\u53f3\u4e0b\u65b9\u7684\u5b50\u77e9\u9635\u4e5f\u4f1a\u53d7\u5230\u89c4\u5f8b2\u7684\u7ea6\u675f\uff0c\u6240\u4ee5\u9700\u8981\u7528\u5230\u9012\u63a8\u516c\u5f0f\uff0c\u679a\u4e3e\u5f53\u524d\u4f4d\u7f6e\u7684\u5bf9\u89d2\u7ebf\u4e0a\u586b\u6570\u662f\u5426\u76f8\u540c\u3002\u5177\u4f53\u516c\u5f0f\u53c2\u7167\u4ee3\u7801\u3002\n\n\u8fd9\u4e09\u79cd\u60c5\u51b5\u4e24\u4e24\u4e92\u65a5\uff0c\u4e14\u5305\u542b\u6240\u6709\u60c5\u5f62\uff0c\u6545\u6700\u7ec8\u7b54\u6848\u5373\u4e3a\u4e09\u8005\u4e4b\u548c\u3002\u524d\u4e24\u79cd\u60c5\u51b5\u53ef\u4ee5\u76f4\u63a5\u624b\u7b97\u51fa\u516c\u5f0f\uff0c\u800c\u7b2c\u4e09\u79cd\u60c5\u51b5\u8f83\u4e3a\u590d\u6742\u3002\n\n```cpp\n#include<iostream>\nusing namespace std;\ntypedef long long LL;\n\nconst LL MOD = 1000000007;\n\nLL n, m;\nLL ans;\n\n// \u53ef\u4ee5\u7528\u5feb\u901f\u5e42\u66ff\u4ee3\nLL power_mod (LL a, LL b) {\n\tLL res = 1;\n\tif (b < 0) return res;\n\twhile (b--) res = (res*a)%MOD;\n\treturn res;\n}\n\nLL full[2], next[2], ths[2];\n\nvoid work () {\n\tans = 0;\n\tLL e;\n\t\n\t// \u7b2c\u4e00\u79cd\u60c5\u51b5 \n\te = 1;\n\te = (e*power_mod(4,n-2))%MOD;\n\te = (e*power_mod(3,m-n))%MOD;\n\te = (e*power_mod(2,n-1))%MOD;\n\te = (e*2)%MOD;\n\tans = (e+ans)%MOD;\n\t\n\t// \u7b2c\u4e8c\u79cd\u60c5\u51b5 \n\te = 1;\n\ta = n-3, b = m-n, c = n-1;\n\tif (m == 3 && n == 3) { e = 6; c--;}\n\telse if (n == 3) { e = e*4; b--;}\n\telse { e = e*5; a--;}\n\te = (e*power_mod(4,a))%MOD;\n\te = (e*power_mod(3,b))%MOD;\n\te = (e*power_mod(2,c))%MOD;\n\te = (e*2)%MOD;\n\tans = (e+ans)%MOD;\n\t\n\t// \u4ee5\u4e0b\u4e3a\u7b2c\u4e09\u79cd\u60c5\u51b5\u7684\u4e24\u4e2a\u4e0d\u540c\u7684\u60c5\u5f62 \n    LL a, b, c, d;                     // \u9012\u63a8\u516c\u5f0f\u7684\u7cfb\u6570\n\tLL pre = 0, cur = 1;               // \n\tfull[cur] = 3; next[cur] = 3; ths[cur] = 2; \n\tfor (LL i = m; i >= 4; i--) {\n\t\tswap(pre, cur);\n\t\tif (i > n) { a = 1; b = 3; c = 4; d = 3;}\n\t\telse { a = 1; b = 4; c = 5; d = 4;}\n\t\tfull[cur] = (a*full[pre])%MOD + (b*next[pre])%MOD;\n\t\tfull[cur] = full[cur]%MOD;\n\t\tnext[cur] = (c*ths[pre])%MOD;\n\t\tths[cur] = (d*ths[pre])%MOD;\n\t}\n\tfull[cur] = (full[cur]*power_mod(2,n-2))%MOD;\n\tans = (ans+full[cur])%MOD;\n\t\n\tpre = 0; cur = 1;\n\tif (n < m) { full[cur] = 4; next[cur] = 4; ths[cur] = 3;}\n\telse { full[cur] = 3; next[cur] = 3; ths[cur] = 2;}\n\tfor (LL i = n; i >= 4; i--) {\n\t\tswap(pre, cur);\n\t\tLL a, b, c, d;\n\t\ta = 1; b = 4; c = 5; d = 4;\n\t\tfull[cur] = (a*full[pre])%MOD + (b*next[pre])%MOD;\n\t\tfull[cur] = full[cur]%MOD;\n\t\tnext[cur] = (c*ths[pre])%MOD;\n\t\tths[cur] = (d*ths[pre])%MOD;\n\t}\n\t\n\tLL tmp = 1;\n\tif (n < m) {\n\t\ttmp = (tmp*power_mod(2,n-1))%MOD;\n\t\ttmp = (tmp*power_mod(3,m-n-1))%MOD;\n\t} else { tmp = power_mod(2,n-2);}\n\tfull[cur] = (full[cur]*tmp)%MOD;\n\tans = (ans+full[cur])%MOD;\n\t\n\tans = (ans*2)%MOD;      // \u5de6\u4e0a\u89d2\u4e3a1\u62160\n\tcout << ans;\n}\n\nint main () {\n//\tfreopen(\"in.txt\", \"r\", stdin);\n\tcin >> n >> m;\n    \n\tif (n > m) swap(n, m);        // \u7531\u5bf9\u79f0\u6027\uff0c\u7b80\u5316\u7b97\u6cd5\n\t\n\tif (n == 1) {\n\t\tans = power_mod (2, m);\n\t\tcout << ans;\n\t\treturn 0;\n\t}\n\t\n\tif (m == 1) {\n\t\tans = power_mod (2, n);\n\t\tcout << ans;\n\t\treturn 0;\n\t}\n\t\n\tif (n == 2) {\n\t\tans = power_mod (3, m-1);\n\t\tans = (ans*4)%MOD;\n\t\tcout << ans;\n\t\treturn 0;\n\t}\n\t\n\tif (n == 3) {         // \u53ef\u8981\u53ef\u4e0d\u8981\n\t\tans = 1;\n\t\tLL T = m-3;\n\t\twhile (T--) ans = (ans*3)%MOD;\n\t\tans = (ans*112)%MOD;\n\t\tcout << ans;\n\t\treturn 0;\n\t}\n\n\twork();\n\t\n\treturn 0;\n}\n```",
        "postTime": 1542121644,
        "uid": 22127,
        "name": "Aisaka1436",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "# \u8f6c\u81ea\u77e5\u4e4e\n\nNOIP \u7f55\u89c1\u7684\u8003\u4e86\u8ba1\u6570\u95ee\u9898\u3002\n\n\u5927\u610f\n\u586b\u4e00\u4e2a n \u00d7 m \u7684\n\u5bf9\u4e8e\u6240\u6709\u6570\u636e n \u2264 8, m \u2264 1000000\u3002\n\u76ee\u505a\u6cd5\uff1a\nn \u5f88\u5c0f\uff0c\u731c\u6d4b\u5e94\u8be5\u662f\u72b6\u6001\u538b\u7f29 DP\uff0c\u9996\u5148\u66b4\u529b\u3002\u8bbe F (n, m) \u662f n, m \u7684\u7b54\u6848\u3002\n\u53d1\u73b0 n \u786e\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u5f53 m \u2265 n + 2 \u65f6\uff0cF (n, m) = 3F (n, m \u2212 1)\u3002\u6240\u4ee5\u96be\u70b9\u5728\u4e8e\u66b4\u529b\u6bd4\u8f83\u5c0f\u7684\u90e8\u5206\u3002\n\u66b4\u529b\u4e3b\u8981\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u679a\u4e3e\u548c\u9a8c\u8bc1\u3002\n\u679a\u4e3e\u90e8\u5206\uff0c\u6ce8\u610f\u5230\u53f3\u4e0a\u5230\u5de6\u4e0b\u659c\u7ebf\u4e0a\u4e00\u5b9a\u662f\u5355\u8c03\u4e0d\u964d\u7684\uff08\u5148\u4e00\u4e9b 0 \u518d\u4e00\u4e9b 1\u3002\uff09 \u5229\u7528\u8fd9\u4e2a\u53ef\u4ee5\u6781\u5927\u7684\u51cf\u5c11\u9700\u8981\u8ba1\u7b97\u7684\u72b6\u6001\u3002\n\u7136\u540e\u8003\u8651\u9a8c\u8bc1\u7684\u95ee\u9898\uff0c\u4e00\u5171\u8d70\u7684\u6b65\u6570\u5f88\u5c11\uff08\u6bd4\u5982 20 \u6b65\uff09 \u53ef\u4ee5\u7528\u4e00\u4e2a int \u7c7b\u578b\u6765\u5b58\u8fd9\u4e2a 01 \u4e32\u3002\n\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u8ba1\u7b97\uff0c\u4ece\u5f53\u524d\u70b9\u5230\u7ec8\u70b9\uff0c\u5b57\u4e32\u6700\u5927\u662f\u591a\u5c11\uff0c\u6700\u5c0f\u662f\u591a\u5c11\u3002\n\u5bf9\u4e8e\u4e0d\u5728\u6700\u540e\u4e00\u884c\u6700\u540e\u4e00\u5217\u7684\u70b9\uff0c\u90fd\u8981\u4fdd\u8bc1\u53f3\u8fb9\u7684\u6700\u5927\u5c0f\u4e8e\u7b49\u4e8e\u4e0b\u8fb9\u7684\u6700\u5c0f\u3002\n\u53c2\u8003\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\nusing namespace std;\nconst int mo=1e9+7;\nint n,m,d[100][100];\nint f[10001][50],g[10001][50];\nint Solve()\n{\n\tfor (int i=0; i<(1<<n); i++) f[i][n]=1;\n\tfor (int i=2; i<=m; i++)\n\t{\n\t\tfor (int j=0; j<(1<<n); j++)\n\t\t\tfor (int k=1; k<=n; k++) g[j][k]=0;\n\t\tfor (int j=0; j<(1<<n); j++)\n\t\t{\n\t\t\tfor (int k=1; k<=n; k++)\n\t\t\t{\n\t\t\t\tif (f[j][k]==0) continue;\n\t\t\t\tfor (int k2=0; k2<(1<<n); k2++)\n\t\t\t\t{\n\t\t\t\t\tbool judge=1;\n\t\t\t\t\tfor (int k3=1; k3<n; k3++)\n\t\t\t\t\t{\n\t\t\t\t\t\tbool j1=(k2&(1<<(k3-1)));\n\t\t\t\t\t\tbool j2=(j&(1<<k3));\n\t\t\t\t\t\tif (j1>j2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tjudge=0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j1==j2&&k3>k)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tjudge=0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!judge) continue;\n\t\t\t\t\tint max0=1;\n\t\t\t\t\tfor (int k3=1; k3<n; k3++)\n\t\t\t\t\t{\n\t\t\t\t\t\tbool j1=(k2&(1<<(k3-1)));\n\t\t\t\t\t\tbool j2=(j&(1<<k3));\n\t\t\t\t\t\tif (j1!=j2) break;\n\t\t\t\t\t\tmax0=k3+1;\n\t\t\t\t\t\tif (k3+1>=k) break;\n\t\t\t\t\t}\n\t\t\t\t\tmax0=min(max0,k);\n\t\t\t\t\tg[k2][max0]=(g[k2][max0]+f[j][k])%mo;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (int j=0; j<(1<<n); j++)\n\t\t\tfor (int k=1; k<=n; k++) f[j][k]=g[j][k];\n\t}\n\tint ans=0;\n\tfor (int i=0; i<(1<<n); i++)\n\t\tfor (int j=1; j<=n; j++) ans=(ans+f[i][j])%mo;\n\treturn ans;\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tif (n>m) swap(n,m);\n\tif (n==1)\n\t{\n\t\tint now=1;\n\t\tfor (int i=1; i<=m; i++) now=now*2%mo;\n\t\tcout<<now<<endl;\n\t\treturn 0;\n\t}\n\tif (n==m)\n\t{\n\t\tint ans=Solve();\n\t\tcout<<ans<<endl;\n\t\treturn 0;\n\t}\n\tint km=m;\n\tm=n+1;\n\tint ans=Solve();\n\tfor (int i=n+2; i<=km; i++) ans=(ans*2%mo+ans)%mo;\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1572343116,
        "uid": 220889,
        "name": "Wind_Shear",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "###### \u849f\u84bb\u7684\u65b0\u9898\u89e3\uff01\n\n# \u8bf7\u5404\u4f4d\u5148\u81ea\u884c\u601d\u8003\uff0c\u770b\u5b8c\u9898\u89e3\u8fd9\u9898\u5c31\u6ca1\u6709\u610f\u4e49\u4e86\n\n\n## \u76f8\u4fe1\u5927\u5bb6\u5df2\u7ecf\u770b\u8fc7\u4e86\u5176\u4ed6\u5927\u4f6c\u7684\u9898\u89e3\u539f\u7406\u4e0d\u518d\u8d58\u8ff0\uff0c~~\u753b\u56fe\u6c34\u5e73\u4e0d\u591f~~   \u8fd9\u91cc\u4e0d\u914d\u56fe\u4e86\n\n1. \u53ef\u4ee5\u901a\u8fc7\u627e\u89c4\u5f8b\u505a\u51fa\u8fd9\u9898\u3002\u82e5\u4ee4g(n,m)\u8868\u793a\u7b54\u6848\uff0c\u53ef\u4ee5\u53d1\u73b0\u5f53m>n\u65f6\uff0cg(n,m+1)=3g(n,m)\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u6c42\u51fag(n,n)\u548cg(n,n+1)\u7684\u7b54\u6848\u3002\n2. \u628ag(n,m)\u5217\u51fa\u676510\u4e2a\u5de6\u53f3\uff0c\u6839\u636e\u524d5\u4e2a\u5c31\u53ef\u4ee5\u63a8\u51fa\u7b54\u6848\uff0c\u5269\u4f595\u4e2a\u9a8c\u7b97\uff0c\u57fa\u672c\u4e0a\u6240\u6709\u7684\u627e\u89c4\u5f8b\u9898\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e2a\u6cd5\u5b50\n\n\n------------\n##### \u9001\u4e0a\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mo=1e9+7;//\u6ce8\u610f\u8981\u65f6\u523b\u53d6\u6a21\nint n,m,d[100][100];\nint f[10001][50],g[10001][50];\nint function()\n{\n\tfor(int i=0; i<(1<<n); i++)\n\t{\n\t\tf[i][n]=1;\n\t}\n\tfor(int i=2; i<=m; i++)\n\t{\n\t\tfor(int j=0; j<(1<<n); j++)\n\t\t{\n\t\t\tfor (int k=1; k<=n; k++)\n\t\t\t{\n\t\t\t\tg[j][k]=0;\n\t\t\t}\n\t\t}\n\t\tfor(int j=0; j<(1<<n); j++)\n\t\t{\n\t\t\tfor(int k=1; k<=n; k++)\n\t\t\t{\n\t\t\t\tif(f[j][k]==0)\n\t\t\t\t{\n\t\t\t\t\tcontinue;//\u975e\u5fc5\u8981\u526a\u679d\n\t\t\t\t}\n\t\t\t\tfor(int k2=0; k2<(1<<n); k2++)\n\t\t\t\t{\n\t\t\t\t\tbool sp=1;\n\t\t\t\t\tfor(int k3=1; k3<n; k3++)\n\t\t\t\t\t{\n\t\t\t\t\t\tbool j1=(k2&(1<<(k3-1)));\n\t\t\t\t\t\tbool j2=(j&(1<<k3));\n\t\t\t\t\t\tif(j1>j2||j1==j2&&k3>k)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsp=0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!sp)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;//\u60ca\uff01\u849f\u84bb\u4f5c\u8005\u7adf\u56e0\u4e3a\u5fd8\u8bb0\u52a0\u6b64\u8bed\u53e5\u5361WA\uff01\uff01\uff01\n\t\t\t\t\t}\n\t\t\t\t\tint maxv=1;\n\t\t\t\t\tfor(int k3=1; k3<n; k3++)\n\t\t\t\t\t{\n\t\t\t\t\t\tbool j1=(k2&(1<<(k3-1)));\n\t\t\t\t\t\tbool j2=(j&(1<<k3));\n\t\t\t\t\t\tif(j1!=j2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmaxv=k3+1;\n\t\t\t\t\t\tif(k3+1>=k)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmaxv=min(maxv,k);\n\t\t\t\t\tg[k2][maxv]=(g[k2][maxv]+f[j][k])%mo;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(int j=0; j<(1<<n); j++)\n\t\t{\n\t\t\tfor(int k=1; k<=n; k++)\n\t\t\t{\n\t\t\t\tf[j][k]=g[j][k];\n\t\t\t}\n\t\t}\n\t}\n\tint ans=0;\n\tfor(int i=0; i<(1<<n); i++)\n\t{\n\t\tfor(int j=1; j<=n; j++)\n\t\t{\n\t\t\tans=(ans+f[i][j])%mo;\n\t\t}\n\t}\n\treturn ans;\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tif(n>m)\n\t{\n\t\tswap(n,m);\n\t}\n\tif(n==1)\n\t{\n\t\tint lef=1;\n\t\tfor(int i=1; i<=m; i++)\n\t\t{\n\t\t\tlef=lef*2%mo;\n\t\t}\n\t\tcout<<lef<<endl;\n\t\treturn 0;\n\t}\n\tif(n==m)\n\t{\n\t\tint ans=function();\n\t\tcout<<ans<<endl;\n\t\treturn 0;\n\t}\n\tint km=m;\n\tm=n+1;\n\tint ans=function();\n\tfor(int i=n+2; i<=km; i++)\n\t{\n\t\tans=(ans*2%mo+ans)%mo;\n\t}\n\tcout<<ans<<endl;\n\treturn 0;//\u5b8c\u7f8e\u6536\u5b98\n}\n```\n",
        "postTime": 1573305530,
        "uid": 128295,
        "name": "assassinRay",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "> \u6ce8\uff1a\u672c\u6587\u4e2d\u4ee5\u6709\u5e8f\u6570\u5bf9 $(x,y)$ \u6307\u4ee3 $n=x,m=y$ \u65f6\u7684\u7b54\u6848\u3002\n\n\u6211\u5728\u8003\u573a\u4e0a\u6ca1\u6709\u63a8\u51fa $(n,n)=(n-1,n-1)\\times8-5\\times2^n$\uff0c\u7136\u800c\u7531\u4e8e\u6211\u5199\u7684\u66b4\u529b\u6bd4\u8f83\u5feb\uff1f\u6211\u5728\u8003\u573a\u4e0a\u628a $(8,8)$ \u4ee5\u5185\u7684\u7b54\u6848\u5168\u7b97\u51fa\u6765\u4e86\u3002\n\n## \u66b4\u529b\n\n\u9996\u5148\u662f\u4e24\u4e2a\u7ed3\u8bba\uff1a\n\n### $1.$ \u6bcf\u4e00\u659c\u884c\u5de6\u4e0b\u662f\u8fde\u7740\u7684 $1$\uff0c\u53f3\u4e0a\u662f\u8fde\u7740\u7684 $0$ \uff0c\u6216\u5168 $1$ \u3001\u5168 $0$\n\n\u82e5\u4e0d\u662f\u7684\u8bdd\u5c31\u4f1a\u5b58\u5728\u4e00\u4e2a\u683c\u5b50\u53f3\u8fb9\u662f $1$ \u4e0b\u9762\u662f $0$ \uff0c\u4e0d\u7b26\u5408\u8981\u6c42\u3002\n\n### $2.$ \u6ee1\u8db3\u6761\u4ef6\u7684\u7b49\u4ef7\u6761\u4ef6\u662f\uff1a\u6bcf\u4e2a\u683c\u5b50\u53f3\u8fb9\u7684\u683c\u5b50\u5148\u5f80\u4e0b\u518d\u5f80\u53f3\u7684\u8def\u5f84\u5c0f\u4e8e\u7b49\u4e8e\u4e0b\u9762\u7684\u683c\u5b50\u5148\u5f80\u53f3\u518d\u5f80\u4e0b\u7684\u8def\u5f84\u3002\n\n![](https://i.loli.net/2018/11/16/5beea329f0125.png)\n\n\u5982\u4e0a\u56fe\uff0c\u9ec4\u8272\u8def\u5f84 $\\le$ \u84dd\u8272\u8def\u5f84\n\n\u56e0\u4e3a\u84dd\u8272\u8def\u5f84\u662f\u5f80\u4e0b\u8d70\u540e\u6700\u5c0f\u7684\u8def\u5f84\uff0c\u9ec4\u8272\u8def\u5f84\u662f\u5f80\u53f3\u8d70\u540e\u6700\u5927\u7684\u8def\u5f84\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u5199\u51fa\u66b4\u529b\u4e86\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n\nusing namespace std;\n\nconst int N=100;\n\nbool check(int x,int y);\nvoid dfs(int sum);\n\nint n,m,a[N][N],ans;\n\nint main()\n{\n\tcin>>n>>m;\n\t\n\tdfs(2);\n\t\n\tcout<<ans;\n\t\n\treturn 0;\n}\n\nvoid dfs(int sum)\n{\n\tint i,j;\n\tif (sum>n+m)\n\t{\n\t\tfor (i=1;i<n;++i)\n\t\t{\n\t\t\tfor (j=1;j<m;++j)\n\t\t\t{\n\t\t\t\tif (!check(i,j))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t++ans;\n\t\treturn;\n\t}\n\tdfs(sum+1);\n\tfor (i=n;i>=1;--i) //\u5c06\u5de6\u4e0b\u586b\u62101\n\t{\n\t\tif (sum-i>=1&&sum-i<=m)\n\t\t{\n\t\t\ta[i][sum-i]=1;\n\t\t\tdfs(sum+1);\n\t\t}\n\t}\n\tfor (i=n;i>=1;--i) //\u56de\u6eaf\u65f6\u590d\u539f\n\t{\n\t\tif (sum-i>=1&&sum-i<=m)\n\t\t{\n\t\t\ta[i][sum-i]=0;\n\t\t}\n\t}\n}\n\nbool check(int x,int y)\n{\n\tint rx=x,ry=y+1,dx=x+1,dy=y;\n\twhile (rx+ry<=n+m)\n\t{\n\t\tif (a[rx][ry]!=a[dx][dy])\n\t\t{\n\t\t\treturn a[rx][ry]<a[dx][dy];\n\t\t}\n\t\tif (rx<n)\n\t\t{\n\t\t\t++rx;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t++ry;\n\t\t}\n\t\tif (dy<m)\n\t\t{\n\t\t\t++dy;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t++dx;\n\t\t}\n\t}\n\treturn true;\n}\n```\n\n## \u89c4\u5f8b\n\n\u867d\u7136 $n,m$ \u8f83\u5927\u65f6\u8fd9\u4e2a\u66b4\u529b\u8fd8\u662f\u8981\u8dd1\u5f88\u4e45\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u5148\u8dd1\u51fa $(3,10)$ \u4e4b\u5185\u7684\u6240\u6709\u89e3\uff0c\u53ef\u4ee5\u5f88\u5feb\u8dd1\u51fa\u6765\uff0c\u5e76\u53d1\u73b0 $(1,m)=2^m$\uff08\u56e0\u4e3a\u4efb\u610f\u586b\u90fd\u5408\u6cd5\uff09\uff0c$(n,m)=(n,m-1)\\times3\\quad(n\\ge2,m>n+1)$\uff0c\u800c\u4e14$(n,m)=(m,n)$ \u3002\n\n\u53ea\u8ba1\u7b97 $(n,n)$ \u548c $(n,n+1)$\uff0c\u53ef\u4ee5\u5728 $10min$ ~ $30min$ \u5de6\u53f3\u8dd1\u51fa $(8,8)$ \u5185\u7684\u6240\u6709\u89e3\u3002\u5982\u679c\u4e00\u8fdb\u8003\u573a\u5c31\u5f00\u59cb\u8dd1\u8fd9\u9898\u7684\u66b4\u529b\u800c\u4e14\u673a\u5b50\u4e0d\u662f\u592a\u6162\u5e94\u8be5\u53ef\u4ee5\u8dd1\u51fa $(8,9)$ \uff0c\u7136\u800c\u6211\u8003\u573a\u4e0a\u6ca1\u6709\u8dd1\u51fa\u6765...\u4e8b\u5b9e\u4e0a\u4e0d\u7b97\u51fa $(8,9)$ \u5728\u6d1b\u8c37\u7684\u6570\u636e\u5df2\u7ecf\u53ef\u4ee5\u5f97\u5230 $90$ \u5206\u4e86\u3002\n\n\u518d\u4ed4\u7ec6\u770b\u4e00\u773c\u6253\u51fa\u6765\u7684\u8868\uff0c\u53d1\u73b0 $(n,n+1)=(n,n)\\times3-3\\times2^n\\quad(n\\ge4)$\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u7b97\u51fa $(8,9)$ \u4e86\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n\nusing namespace std;\n\nconst long long Ans[9][2]={{0,0},{0,0},{12,36},{112,336},{912,2688},{7136,21312},{56768,170112},{453504,1360128},{3626752,10879488}}; //(n,n)\u548c(n,n+1)\n                       \nconst long long M=1000000007;\n\nlong long n,m,ans=1;\n\nint main()\n{\n    int i;\n    \n    cin>>n>>m;\n    \n    if (n>m)\n    {\n        swap(n,m);\n    }\n    \n    if (n==1)\n    {\n        for (i=30;i>=0;--i)\n        {\n            ans=ans*ans%M;\n            if (m&(1<<i))\n            {\n                ans=ans*2%M;\n            }\n        }\n        cout<<ans;\n    }\n    \n    else\n    {\n        if (m==n)\n        {\n            cout<<Ans[n][0];\n            return 0;\n        }\n        else if (m==n+1)\n        {\n            cout<<Ans[n][1];\n        }\n        else\n        {\n            for (i=30;i>=0;--i)\n            {\n                ans=ans*ans%M;\n                if ((m-n-1)&(1<<i))\n                {\n                    ans=ans*3%M;\n                }\n            }\n            cout<<ans*Ans[n][1]%M;\n        }\n    }\n    \n    return 0;\n}\n```",
        "postTime": 1542367737,
        "uid": 49742,
        "name": "ouuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u5206\u4eab\u4e00\u4e2a\u504f\u95e8\u89e3\u6cd5\uff0c\u987a\u4fbf\u6c42\u4e00\u6ce2hack\u3002\n\n## \u66b4\u529b\u6253\u8868\n\n\u4e0d\u63a8\u8350\u5728\u8003\u573a\u4e0a\u7528\u8fd9\u4e2a\u65b9\u6cd5\u505a\uff0c\u56e0\u4e3a\u6211\u6253\u4e86\u5927\u6982\u4e00\u5929\u624d\u627e\u51fa\u89c4\u5f8b\uff0c\u4e0d\u8fc7\u9a97\u5206\u8fd8\u662f\u53ef\u4ee5\u7684\uff0c\u6211\u5728\u8003\u573a\u4e0a\u6253\u8868\u6253\u5230\u4e86n==5\uff0c\u5728\u6d1b\u8c37\u4e0a\u80fd\u9a97\u523070\u5206\uff0c\u5b9e\u9645\u591a\u5c11\u5206\u5c31\u770b\u6211\u7684RP\u4e86\u3002\n\n\u8fd9\u9898\u7684n\u5f88\u5c0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u5bf9n=={1..8}\u7684\u6bcf\u79cd\u60c5\u51b5\u5206\u7c7b\uff0c\u5927\u6982\u53ef\u4ee5\u63a8\u51fa\u4e2a\u89c4\u5f8b\uff0c\u4f46\u5f53m<n\u65f6\u516c\u5f0f\u4f1a\u4e0d\u9002\u7528\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u4ea4\u6362\u8fd9\u4e24\u4e2a\u6570\u6253\u51fa\u8fd9\u4e9b\u7b54\u6848\u3002\u5f53n==m\u65f6\uff0c\u7528\u66b4\u529b\u7b97\u51fa\u7b54\u6848\u5e76\u6253\u8868\u3002\n\n\u7136\u540e\u5c31\u662f\u5927\u6982\u6709\u9519\u7684\u4ee3\u7801\uff1a\n\nupdata:\u7ecf\u8bc4\u8bba\u533a\u63d0\u9192\uff0c\u6211\u53d1\u73b0\u6211\u7684\u6253\u8868\u9519\u8bef\u6bd4\u8f83\u591a\uff0c\u4e8e\u662f\u73b0\u5728\u66f4\u6b63\uff0c\u73b0\u5728\u5927\u6982\u5c31\u6ca1\u6709\u9519\u4e86\u5427\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int p=1e9+7;\nint n,m;\nlong long mpow(long long a,int n){\n    long long ret=1;\n    while(n){\n        if(n&1)(ret*=a)%=p;\n        (a*=a)%=p;\n        n/=2;\n    }\n    return ret;\n}\nint main()\n{\n    cin>>n>>m;\n    if(n>m)swap(n,m);\n    if(n==1){\n        printf(\"%lld\\n\",mpow(2,m));\n        return 0;\n    }\n    if(n==2){\n        printf(\"%lld\\n\",4ll*mpow(3,m-1)%p);\n        return 0;\n    }\n    if(n==3){\n        printf(\"%lld\\n\",112ll*mpow(3,m-3)%p);\n        return 0;\n    }\n    if(n==4){\n\t    if(m==4)puts(\"912\");\n        else printf(\"%lld\\n\",2688ll*mpow(3,m-5)%p);\n        return 0;\n    }\n    if(n==5){\n        if(m==5)puts(\"7136\");\n        else printf(\"%lld\",21312ll*mpow(3,m-6)%p);\n        return 0;\n    }\n    if(n==6){\n    \tif(m==6)puts(\"56768\");\n    \telse printf(\"%lld\",170112ll*mpow(3,m-7)%p);\n    \treturn 0;\n    }\n    if(n==7){\n    \tif(m==7)puts(\"453504\");\n    \telse printf(\"%lld\",1360128ll*mpow(3,m-8)%p);\n    \treturn 0;\n\t}\n\tif(n==8){\n\t\tif(m==8)puts(\"3626752\");\n\t\telse printf(\"%lld\",10879488ll*mpow(3,m-9)%p);\n\t\treturn 0;\n\t}\n}\n```",
        "postTime": 1542184960,
        "uid": 48143,
        "name": "zhenglier",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5728\u8003\u573a\u4e0a\u7528\u6700\u5783\u573e\u7684\u66b4\u529b(\u679a\u4e3e\u6240\u6709\u65b9\u6848\u518d\u628a\u8def\u5f84\u5168\u8d70\u4e00\u904d\u9a8c\u8bc1)\u63a8\u4e862\uff0c3\u7684\u89c4\u5f8b\n\n\u7136\u800c\u8fd9\u5b9e\u5728\u8fc7\u4e8e\u66b4\u529b\uff0c(5\uff0c5)\u90fd\u8dd1\u4e865min\uff0c\u540e\u9762\u7684\u89c4\u5f8b\u6ca1\u6cd5\u627e\u4e86\uff0c\u6700\u540e65pts\u6536\u573a\n\n\u8003\u5b8c\u540e\u60f3\u4e86\u4e00\u4e0b\u5bf9\u8fd9\u4e2a\u66b4\u529b\u7684\u4f18\u5316\uff0c\u60f3\u52303\u4e2a\u4f18\u5316\uff1a\n\n1\u3001\u82e5\u67d0\u65b9\u683c\u7684\u4e0b\u9762\u662f0\u4e14\u53f3\u8fb9\u662f1\uff0c\u90a3\u4e48\u5fc5\u7136\u4e0d\u5408\u6cd5\uff0c\u5728\u679a\u4e3e\u65f6\u5224\u6389\n\n2\u3001\u6bcf\u679a\u4e3e\u5b8c1\u884c\u5c31\u5bf9\u5f53\u524d\u5df2\u679a\u4e3e\u7684\u90e8\u5206\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5982\u679c\u4e0d\u5408\u6cd5\u540e\u9762\u7684\u4e5f\u4e0d\u7528\u679a\u4e3e\u4e86\n\n3\u3001\u5728\u9a8c\u8bc1\u65f6\u6309w()\u7684\u5b57\u5178\u5e8f\u4ece\u5927\u5230\u5c0f\u679a\u4e3e\u8def\u5f84(\u5373\u4f18\u5148\u5f80\u53f3\u8d70)\u5e76\u7528\u72b6\u538b\u8bb0\u5f55s()\u7684\u5b57\u5178\u5e8f\n\n   \u8fd9\u6837\u505a\u7684\u8bdd\u5982\u679c\u67d0\u4e00\u6761\u8def\u5f84\u7684s()\u6bd4\u4e0a\u4e00\u6761\u679a\u4e3e\u5230\u7684\u8def\u5f84\u5927\u5219\u4e0d\u5408\u6cd5\uff0c\u540e\u9762\u7684\u8def\u5f84\u4e0d\u7528\u8d70\u4e86\uff0c\u76f4\u63a5\u9000\u51fa\u9a8c\u8bc1\n   \n\u8fd9\u6837\u4f18\u5316\u540e(8,8)\u548c(8,9)\u7684\u603b\u7528\u65f6\u5728\u6211\u7684\u673a\u5b50\u4e0a\u662f30min\u4ee5\u5185\n\n\u867d\u7136\u8fd9\u4e2a\u505a\u6cd5\u5728\u4f17\u795e\u7287\u7684\u773c\u91cc\u975e\u5e38low\n\n\u4f46\u5982\u679c\u6211\u8fd9\u79cd\u5f31\u9e21\u5728\u8003\u573a\u4e0a\u60f3\u8981a\u6389\u6b64\u9898\uff0c\u8fd9\u786e\u5b9e\u662f\u4e00\u4e2a\u53ef\u884c\u65b9\u6848\n\n\u8d34\u4e0a\u66b4\u529b\u4ee3\u7801\uff0c\u8868\u5c31\u4e0d\u8d34\u4e86\uff0c\u6ca1\u5565\u610f\u4e49\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mo=1e9+7;\nbool f[13][13],fl; int an,n,m,pre,N;\nvoid dfs2(int x,int y,int w){\n\tif (y<m) {dfs2(x,y+1,w<<1|*(f[x]+y+1)); if (fl) return;}\n\tif (x<N) {dfs2(x+1,y,w<<1|*(f[x+1]+y)); if (fl) return;}\n\telse if (x==N&&y==m){\n\t\tif (pre>w) fl=1; //\u4f18\u53163\n\t\tpre=w; return;\n\t}\n}\nvoid dfs(int x,int y){\n\tif (y==m+1){ //\u8fd9\u4e2aif\u5185\u662f\u4f18\u53162\n\t\tN=x,fl=0,pre=-1; dfs2(1,1,0); if (fl) return;\n\t\tif (x<n) dfs(x+1,1); else ++an; return;\n\t}\n\tf[x][y]=1; dfs(x,y+1); f[x][y]=0;\n\tif (!f[x-1][y+1]) dfs(x,y+1); //\u4f18\u53161\n}\nint main(){\n\tcin>>n>>m; if (n>m) swap(n,m);\n\tdfs(1,1); printf(\"%d\\n\",an);\n\treturn 0;\n}\n```\n",
        "postTime": 1543317357,
        "uid": 20821,
        "name": "wjy666",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://blog.csdn.net/ezoixx118/article/details/84424454)\n\n\u8fd9\u9898\u8003\u573a\u4e0a\u53ea\u670950\u5206\uff0c\u540e\u6765\u627e\u5230\u4e86\u89c4\u5f8b\uff0c\u53ef\u4ee5$O(log(n)*$\u5de8\u5927\u5e38\u6570$)$\u6c42\u89e3\uff0c\u80fd\u8fc7$n,m\\leq 10^{18}$\u7684\u6570\u636e\u3002\uff08\u5de8\u5927\u5e38\u6570\u662f\u56e0\u4e3a\u591a\u6b21\u5feb\u901f\u5e42+\u53d6\u6a21\uff09\n\n\u9898\u610f\u4e0d\u591a\u8bf4\uff0c\u6253\u8868\uff08\u5982\u4f55\u6253\u8868\u53ef\u4ee5\u53c2\u8003\u5176\u4ed6\u9898\u89e3\uff09\u53ef\u5f97\u51e0\u4e2a\u7ed3\u8bba\uff1a\uff08\u8bb0n\u884cm\u5217\u7684\u7b54\u6848\u4e3a$f_{n,m}$\uff09\n\n1.$f_{n,m}=f{m,n}$\n\n2.$if n==1,f_{n,m}=2^m$  \n$\\ \\ if\\ n==2,f_{n,m}=4*3^{m-1}$  \n$\\ \\ if\\ n==3,f_{n,m}=112* 3^{m-3}$  \n$\\ \\ if\\ 4\\leq n\\leq m-1 ,f_{n,m}=f_{n,n+1}*3^{m-n-1}$\n\n3.$if\\ n=4,f_{n,n}=912$  \n$\\ \\ if\\ n>4,f_{n,n}=f_{n-1,n-1}*8-5*2^n$\n\n4.$f_{n,n+1}=f_{n,n}*3-3*2^n$\n\n\u8fd9\u6837\uff0c\u7279\u5224n=1\u30012\u30013\u4e09\u79cd\u60c5\u51b5\uff0c\u5feb\u901f\u6c42\u51fa$f_{n,n}$\uff0c\u5c31\u53ef\u4ee5\u7528\u5feb\u901f\u5e42\u5728log\u7684\u65f6\u95f4\u5185\u7b97\u51fa\u7b54\u6848\u3002\n\u6211\u4eec\u53ef\u4ee5\u63a8\u51fa$f_{n,n}$\u7684\u901a\u9879\u516c\u5f0f\uff1a\uff08\u8bb0$g_n=f_{n,n}$\uff09\n\n$g_n=g_{n-1}*8-5*2^n$  \n$\\ \\ \\ \\ \\ =g_4*8^{n-4}-5*2^n-8*5*2^{n-1}-8^2*5*2^{n-2}-...-8^{n-5}*5*2^5$   \n$\\ \\ \\ \\ \\ =g_4*8^{n-4}-5*(2^n+8*2^{n-1}+8^2*2^{n-2}+...+8^{n-5}*2^5)$   \n$\\ \\ \\ \\ \\ =g_4*8^{n-4}-5*(2^0*2^n+2^2*2^n+2^4*2^n+...+2^{2(n-5)}*2^n)$   \n$\\ \\ \\ \\ \\ =g_4*8^{n-4}-5*2^n*(4^0+4^1+4^2+...+4^{n-5})$  \n$\\ \\ \\ \\ \\ =g_4*8^{n-4}-5*2^n*\\frac{4^{n-4}-1}{3}$    \n$\\ \\ \\ \\ \\ =912*8^{n-4}-5*2^n*\\frac{4^{n-4}-1}{3}$    \n\n### \u4ee3\u7801\u5982\u4e0b\uff1a\n```\n//#pragma GCC optimize(3)\n#include<iostream>\n#include<iomanip>\n#include<stack>\n#include<queue>\n#include<list>\n#include<vector>\n#include<set>\n#include<map>\n#include<string>\n#include<algorithm>\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<cstdlib>\n#include<ctime>\n#define ll long long\n#define db double\n#define inf 30006\n#define infm 25000001\n#define INF (int)1e9\n#define pi acos(-1)\n//char buf[10000001],*Hd,*Tl;\n//#define getchar(ch) {if (Hd==Tl){int len=fread(buf,1,10000000,stdin);Hd=buf,Tl=Hd+len;}ch=(*Hd++);}\n#define getchar(ch) ch=getchar()\n#define rd(n) {n=0;char ch;int f=0;do{getchar(ch);if(ch=='-'){f=1;}}while(ch<'0'||ch>'9');while('0'<=ch&&ch<='9'){n=(n<<1)+(n<<3)+ch-48;getchar(ch);}if(f)n=-n;}\nusing namespace std;\n#define mod 1000000007\n\nll Qpow(ll x,ll k){\n\tll ans=1LL;\n\twhile (k){\n\t\tif (k&1LL){\n\t\t\tans=(ans*x)%mod;\n\t\t}\n\t\tx=(x*x)%mod;\n\t\tk/=2;\n\t}\n\treturn ans;\n}\n\nll n,m;\n\nint main(){\n\trd(n) rd(m)\n\tif (n>m){\n\t\tswap(n,m);\n\t}\n\tif (n==1){\n\t\tprintf(\"%lld\\n\",Qpow(2,m));\n\t}\n\telse if (n==2){\n\t\tprintf(\"%lld\\n\",4LL*Qpow(3LL,m-1)%mod);\n\t}\n\telse if (n==3){\n\t\tprintf(\"%lld\\n\",112*Qpow(3LL,m-3)%mod);\n\t}\n\telse{\n\t\tll inv3=Qpow(3,mod-2);\n\t\tll ans=(912LL*Qpow(8,n-4)%mod-5*Qpow(2,n)%mod*((Qpow(4,n-4)-1+mod)%mod)%mod*inv3%mod+mod)%mod;\n\t\tif (n==m){\n\t\t\tprintf(\"%lld\\n\",ans);\n\t\t}\n\t\telse{\n\t\t\tans=(ans*3%mod-3*Qpow(2,n)%mod+mod)%mod;\n\t\t\tprintf(\"%lld\\n\",ans*Qpow(3,m-n-1)%mod);\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1543023515,
        "uid": 30541,
        "name": "ezoixx118",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5023 \u3010\u586b\u6570\u6e38\u620f\u3011"
    }
]
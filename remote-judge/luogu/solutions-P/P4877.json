[
    {
        "content": "## \u9898\u610f\n\u7ed9\u4f60\u4e00\u4e2a $n\\times n$ \u5927\u5c0f\u7684\u77e9\u9635\uff0c\u6bcf\u4e00\u884c\u548c\u6bcf\u4e00\u5217\u90fd\u53ea\u80fd\u9009\u53d6 $1$ \u4e2a\u70b9\uff0c\u6bcf\u4e2a\u70b9\u90fd\u6709 $val_{i,j}$ \u7684\u6536\u76ca\u3002\u5f53\u5728\u67d0\u884c\u53d6\u4e86\u4e4b\u540e\uff0c\u5982\u679c\u4e0d\u5c0f\u4e8e\u4e00\u4e9b\u503c\uff0c\u8fd8\u53ef\u4ee5\u591a\u83b7\u5f97 $A_i$ \u7684\u6536\u76ca\u3002[$QWQ$](https://www.luogu.com.cn/blog/xzc/solution-p4877)\n## \u5206\u6790\n\u8bfb\u5b8c\u9898\uff0c\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u5f88\u597d\u7684\u6027\u8d28\uff0c$i,j$ \u662f\u552f\u4e00\u5bf9\u5e94\u7684\u3002\u90a3\u4e48\u53ef\u4ee5\u8003\u8651 $dp$ \uff0c\u5b9a\u4e49\u72b6\u6001 $dp[s]$ \u8868\u793a\u9009\u53d6\u4e86 $s$ \u8fd9\u4e2a\u96c6\u5408\u4e4b\u540e\u7684\u6700\u5927\u6536\u76ca\u3002\u90a3\u4e48\u5c31\u6709\u5982\u4e0b\u8f6c\u79fb\n$$\ndp[s] = \\max(dp[s-j] + val[count(s)][j]) \\ j\\in s\n$$\n\u90a3\u4e48\u8003\u8651\u989d\u5916\u8d21\u732e\uff0c\u56e0\u4e3a\u53ef\u4ee5\u81ea\u5df1\u5b89\u6392\u987a\u5e8f\uff0c\u90a3\u4e48\u4e00\u5b9a\u8981\u8ba9 $P_i$ \u6700\u5c0f\u7684\u9760\u524d\u3002\u8fd9\u4e2a\u5f88\u5bb9\u6613\u60f3\u5230\u3002\u90a3\u4e48\u603b\u590d\u6742\u5ea6\u4e3a $O(n\\times 2^n)$ \u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint read(){\n\tint x = 0,f = 0;char ch = getchar();\n\twhile(!isdigit(ch)) {if(ch=='-')f=1;ch = getchar();}\n\twhile(isdigit(ch)) {x = x * 10 + ch - '0';ch = getchar();}\n\treturn f ? -x : x;\n}\nconst int N = 21;\nstruct ex{\n\tint P,A;\n};\nvector<ex> e[N];\nbool cmp(ex a,ex b) {return a.P < b.P;}\nint dp[(1<<N)+10],val[N][N],n,m;\nint main()\n{\n\tn = read();m = read();\n\tfor(int i = 1;i <= m;i++) {\n\t\tint a = read(),b = read(),c = read();\n\t\te[a].push_back((ex){b,c});\n\t}\n\tfor(int i = 1;i <= n;i++) {\n\t\tfor(int j = 1;j <= n;j++) {\n\t\t\tval[j][i] = read();\n\t\t}\n\t}\n\tfor(int i = 1;i <= n;i++) sort(e[i].begin(),e[i].end(),cmp);\n\tfor(int s = 1;s < (1<<n);s++){\n\t\tint S = 0;\n\t\tfor(int j = 1;j <= n;j++) S += ((s>>(j-1))&1);\n//\t\tcout << S << \" \" << s << endl;\n\t\tfor(int j = 1;j <= n;j++) {\n\t\t\tif((s&(1<<j-1))) {\n\t\t\t\tdp[s] = max(dp[s],val[S][j]+dp[s^(1<<j-1)]);\n\t\t\t}\n\t\t}\n\t\tfor(int j = 0;j < e[S].size();j++){\n\t\t\tif(dp[s] >= e[S][j].P) dp[s] += e[S][j].A;\n\t\t}\n\t}\n\tprintf(\"%d\\n\",dp[(1<<n)-1]);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1598266981,
        "uid": 227824,
        "name": "JK_LOVER",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4877 \u3010[USACO14FEB]Cow Decathlon G\u3011"
    },
    {
        "content": "# \u7b97\u6cd5\uff1a\u72b6\u6001\u538b\u7f29\n\n\u9996\u5148\uff0c\u8fd9\u9053\u9898\u7528\u7206\u641c\u80af\u5b9a\u4f1a\u8d85\u65f6\uff0c\u590d\u6742\u5ea6\u4e3aO(n!)\uff0c\u4e8e\u662f\u6839\u636e20\u8fd9\u4e2a\u6570\u636e\u8303\u56f4\uff0c\u4e0d\u96be\u60f3\u5230\u72b6\u6001\u538b\u7f29\u7684\u52a8\u89c4\u3002\n\n\u56e0\u4e3a\u4f7f\u7528\u5976\u725b\u7684\u987a\u5e8f\u4e0d\u5f71\u54cd\u540e\u7eed\u7684\u64cd\u4f5c\uff0c\u4e0d\u5177\u6709\u540e\u6548\u5f62\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4e8c\u8fdb\u5236\u8868\u793a\u5976\u725b\u7684\u4f7f\u7528\u60c5\u51b5\u3002\n\n\u56e0\u4e3a\u4efb\u4f55\u4e00\u4e2a\u6b63\u4e8c\u8fdb\u5236\u6570\u5728\u53bb\u6389\u4e00\u4f4d\u540e(\u4e5f\u5c31\u662f\u5b50\u95ee\u9898)\uff0c\u5fc5\u7136\u6bd4\u539f\u6570\u5c0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u65e0\u8111\u679a\u4e3e\u72b6\u6001\uff0c\u5f80\u524d\u627e\u5b50\u95ee\u9898\u3002\n\n\u5177\u4f53\u89c1\u4ee3\u7801(\u56e0\u4e3a\u662f\u6a21\u62df\u8d5b\u65f6\u5199\u7684\uff0c\u81ea\u5e26\u66b4\u529b)\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<fstream>\nusing namespace std;\nconst int MAXN=32,MAXP=1024*1024;\nstruct bonus{\n\tint least,compet,value;\n}b[MAXN];\nint N,B,score[MAXN][MAXN],a[MAXN],used[MAXN],ans,sum,last[MAXN];\nint f[MAXP],cnt[MAXP];\nvoid dfs(int x){//\u8fd9\u6bb5\u662f\u7206\u641c\u7684\u7a0b\u5e8f\n\tif(x>N){\n\t\tans=max(ans,sum);\n\t\treturn;\n\t}\n\tif(sum+last[x]<ans){\n\t\treturn;\n\t}\n\tfor(int i=1;i<=N;i++){\n\t\tif(!used[i]){\n\t\t\tused[i]=1;\n\t\t\tsum+=score[x][i];\n\t\t\tint bon=0;\n\t\t\tfor(int j=1;j<=B;j++){\n\t\t\t\tif(x==b[j].compet&&sum>=b[j].least){\n\t\t\t\t\tbon+=b[j].value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsum+=bon;\n\t\t\ta[x]=i;\n\t\t\tdfs(x+1);\n\t\t\tused[i]=0;\n\t\t\tsum-=bon+score[x][i];\n\t\t}\n\t}\n}\nint main(){\n\tfreopen(\"dec.in\",\"r\",stdin);\n\tfreopen(\"dec.out\",\"w\",stdout);\n\tcin >> N >> B;\n\tfor(int i=1;i<=B;i++){\n\t\tcin >> b[i].compet >> b[i].least >> b[i].value;\n\t\tlast[b[i].compet]+=b[i].value;\n\t}\n\tfor(int i=1;i<=N;i++){\n\t\tfor(int j=1;j<=N;j++){\n\t\t\tcin >> score[j][i];\n\t\t\tlast[j]+=score[j][i];\n\t\t}\n\t}\n\tfor(int i=N;i>=1;i--){\n\t\tlast[i]+=last[i-1];\n\t}\n\tif(N<=10){\n\t\tdfs(1);\n\t}else{//\u6b63\u6587\u4ece\u6b64\u5f00\u59cb\n\t\tfor(int i=0;i<(1<<N);i++){//\u7edf\u8ba1\u6bcf\u4e2a\u72b6\u6001\u4e2d\u4f7f\u7528\u5976\u725b\u7684\u6570\u91cf\n\t\t\tfor(int j=0;j<=N;j++){\n\t\t\t\tif(i&(1<<j)){\n\t\t\t\t\tcnt[i]++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(int i=0;i<(1<<N);i++){//\u679a\u4e3e\u72b6\u6001\n\t\t\tfor(int j=0;j<N;j++){//\u679a\u4e3e\u4f4d\u6570\n\t\t\t\tif(i&(1<<j)){\n\t\t\t\t\tf[i]=max(f[i],f[i-(1<<j)]+score[cnt[i]][j+1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tint ii=f[i];\n\t\t\tfor(int j=1;j<=B;j++){//\u679a\u4e3e\u52a0\u6210\n\t\t\t\tif(b[j].compet==cnt[i]&&b[j].least<=ii){\n\t\t\t\t\tf[i]+=b[j].value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(cnt[i]==N&&f[i]>ans){\n\t\t\t\tans=f[i];\n\t\t\t}\n\t\t}\n\t}\n\tcout << ans;\n\treturn 0;\n}\n```",
        "postTime": 1538528639,
        "uid": 70252,
        "name": "guoshaoyang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4877 \u3010[USACO14FEB] Cow Decathlon \u725b\u7684\u5341\u9879\u5168\u80fd\u3011"
    },
    {
        "content": "\u770b\u4e86\u4e00\u4e0b\u4e09\u4f4d\u5927\u4f6c\u5199\u7684\u9898\u89e3\uff0c\u53d1\u73b0\u6ca1\u6709\u4eba\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u672c\u849f\u84bb\u5c31\u7528\u8bb0\u5fc6\u5316\u5199\u4e86\u4e00\u904d\u4ee3\u7801\n### \u9898\u76ee\u5927\u610f\n\u9898\u76ee\u5927\u4f53\u5c31\u662f\u5c31\u662f\u51e0\u5934\u5976\u725b\uff0c\u53c2\u52a0\u4efb\u610f\u7684\u6bd4\u8d5b\uff0c\u4f46\u662f\u6bcf\u5934\u5976\u725b\u53c2\u52a0\u4e0d\u540c\u6bd4\u8d5b\u7684\u5f97\u5206\u4e0d\u540c\uff0c\u800c\u4e14\u6709\u4e9b\u6bd4\u8d5b\u8fd8\u6709\u52a0\u5206\u9879\uff0c\u8ba9\u4f60\u6765\u6392\u5217\u4e00\u4e0b\u600e\u4e48\u53c2\u8d5b\n\n### \u5206\u6790\n\u5148\u53bb\u6389\u52a0\u5206\u9879\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684 $dp$ \u5417\uff0c\u7136\u540e\u6765\u4e2a\u72b6\u6001\u538b\u7f29\u5c31\u5b8c\u4e8b\u4e86\uff0c\u8fd9\u9053\u9898\u505a\u5b8c\u540e\u4e5f\u53ef\u4ee5\u53bb\u5c1d\u8bd5\u4e00\u4e0b[P2915](https://www.luogu.com.cn/problem/P2915),\u8ddf\u8fd9\u4e00\u9053\u9898\u86ee\u50cf\u7684\u3002\u52a0\u4e0a\u52a0\u5206\u9879\u4ee5\u540e\u7a0d\u5fae\u96be\u4e86\u90a3\u4e48\u4e00\u70b9\uff0c\u6bcf\u6b21 $dp$\u5230\u4e00\u4e2a\u6bd4\u8d5b\u7684\u65f6\u5019\u5224\u65ad\u4e00\u4e0b\u8981\u4e0d\u8981\u7528\u8fd9\u4e2a\u52a0\u5206\u9879\u5c31\u884c\u4e86\u3002\u8981\u6ce8\u610f\u7684\u662f\uff0c$dp$ \u5206\u8fc7\u53bb\u65f6\u548c\u672a\u6765\u65f6\uff0c\u8fd9\u9053\u9898\u672a\u6765\u65f6\u662f\u884c\u4e0d\u901a\u7684\u56e0\u4e3a\u5b83\u7684\u5206\u6570\u662f\u5728\u770b\u8fc7\u53bb\u7684\u5206\u6570\u4e4b\u4e0a\u7684\uff0c\u600e\u4e48\u53ef\u80fd\u4ece\u672a\u6765\u63a8\u5bfc\u5462\uff1f\u672c\u849f\u84bb\u6700\u4e00\u5f00\u59cb\u6ca1\u60f3\u901a\u8fd9\u70b9\uff0c\u7136\u540e\u53d1\u73b0\u5b8c\u5168\u9519\u8bef\uff0c\u6539\u4e86\u4e2a\u65f6\u6001\u548c\u4e00\u4e2a\u521d\u503c\uff0c\u5c31\u5bf9\u4e86\uff01\n\n\u8fd8\u6709\u4e00\u70b9\uff0c\u5c31\u662f\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u53ef\u80fd\u5f00\u4e00\u4e2a $20$ \u7ef4\u6570\u7ec4\uff0c\u5c31\u7b97\u5f00\u4e86\uff0c\u5224\u65ad\u4e5f\u8981\u5199 $20$ \u4e2a $if$\u8bed\u53e5\uff0c~~\u8981\u6b7b\u4eba\u7684~~\uff0c\u5c31\u628a\u5b83\u8f6c\u6210\u4e8c\u8fdb\u5236\uff0c\u4e00\u4f4d\u8868\u793a\u4e00\u5934\u725b\u3002\u6539\u7684\u65f6\u5019\u7528\u63a9\u7801\uff0c\u8be6\u7ec6\u89c1\u4ee3\u7801\u4e2d\uff0c\u8fd9\u6837\u4e5f\u53ef\u4ee5\u7701\u6389\u4e00\u7ef4\u6570\u7ec4\u3002~~\u591a\u9999~~\n### \u4ee3\u7801\n\u8bdd\u4e0d\u591a\u8bf4\uff0c\u4e0a\u4ee3\u7801\u3002\n\n\u7b2c\u4e00\u6bb5\u4ee3\u7801\u662f\u7528\u9012\u5f52\u5f62\u5f0f\u5199\u7684\uff0c\u7b2c\u4e8c\u6bb5\u7528\u7684\u662f\u9012\u63a8\uff0c\u4e2a\u4eba\u611f\u89c9\u9012\u63a8\u66f4\u7b80\u5355\u4e00\u70b9\u3002\n\n\u8fd8\u6709\u4e0d\u61c2\u7684\u53ef\u4ee5\u770b\u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\uff1a\n#### \u9012\u5f52\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct tNode{//\u52a0\u5206\u9879 \n\tint k,p,a;\n}g_a[21];\nint n,b;\nint s[21][21],f[1<<20];//21\u5934\u5976\u725b\u8db3\u591f\u4e86 \n\nbool cmp(tNode x,tNode y){//\u4e5f\u53ef\u4ee5\u91cd\u8f7d\u5c0f\u4e8e\u53f7 \n\treturn x.k<y.k||x.k==y.k && x.p<y.p;\n}\n\nint dfs(int i,int used){//\u5176\u5b9e\u4e5f\u53ef\u4ee5\u7528\u9012\u63a8\u505a\uff0c\u800c\u4e14\u9012\u63a8\u6bd4\u8f83\u504f\u5feb\n\tif(i==0)\n\t\treturn 0;\n\tif(f[used])\n\t\treturn f[used];//\u8bb0\u5fc6\u5316\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u4e00\u5b9a\u662f\u7eaf\u51fd\u6570\u624d\u53ef\u4ee5\u7528\u8bb0\u5fc6\u5316 \n\tint ans=0; \n\tfor(int j=0;j<n;j++){\n\t\tint mask=1<<j;//\u5148\u628a\u63a9\u7801\u5199\u597d \n\t\tif(!(used&mask)){ \n\t\t\tans=max(ans,dfs(i-1,used|mask)+s[j][i]);//\u8fd9\u4e2adp\u4e0d\u80fd\u5199\u6210\u672a\u6765\u65f6\uff0c\u6240\u4ee5\u8981\u7528i-1 \n\t\t}\n\t}\n\tint j=1;\n\twhile(g_a[j].k<i&&j<=b){\n\t\tj++;\n\t}\n\twhile(g_a[j].k==i&&g_a[j].p<=ans)\n\t\tans+=g_a[j++].a;\n\tf[used]=ans;\n\treturn ans;\n\t\t\n}\n\nint calc(int x){\n\tint ans=0;\n\twhile(x!=0){\n\t\tans+=x&1;\n\t\tx>>1;//\u88c5\u903c\u5c31\u8fd9\u4e48\u5199\uff0c\u5f53\u7136\u8fd8\u6709\u66f4\u88c5\u903c\u7684\u65b9\u6cd5\uff0c\u7528\u7ebf\u6bb5\u6811\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5199\u4e86 \n\t}\n\treturn ans;\n}\n\nint main(){\n\tcin>>n>>b;\n\tfor(int i=1;i<=b;i++){\n\t\tcin>>g_a[i].k>>g_a[i].p>>g_a[i].a;\n\t}\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tcin>>s[i][j];\n\t\t}\n\t}\n\tsort(g_a+1,g_a+b+1,cmp);//\u5148\u6392\u5e8f \n\tcout<<dfs(n,0);//\u8fc7\u53bb\u65f6 \n\treturn 0;\n}\n```\n#### \u9012\u63a8\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct tNode{//\u52a0\u5206\u9879 \n\tint k,p,a;\n}g_a[21];\nint n,b;\nint s[21][21],f[1<<20];//21\u5934\u5976\u725b\u8db3\u591f\u4e86 \n\nbool cmp(tNode x,tNode y){//\u4e5f\u53ef\u4ee5\u91cd\u8f7d\u5c0f\u4e8e\u53f7 \n\treturn x.k<y.k||x.k==y.k && x.p<y.p;\n}\n\nint main(){\n\tcin>>n>>b;\n\tfor(int i=1;i<=b;i++){\n\t\tcin>>g_a[i].k>>g_a[i].p>>g_a[i].a;\n\t}\n\tfor(int i=0;i<n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tcin>>s[i][j];\n\t\t}\n\t}\n\tsort(g_a+1,g_a+b+1,cmp);//\u5148\u6392\u5e8f \n\tfor(int used=1;used<(1<<n);used++){\n\t\tfor(int j=0;j<n;j++){\n\t\t\tint mask=1<<j;\n\t\t\tif(mask&mask)\n\t\t\t\tf[used]=max(f[used],f[used^mask]+s[j][i]);\n\t\t}\n\t\tint j=1;\n\t\twhile(g_a[j].k<i && j<=b)\n\t\t\tj++;\n\t\twhile(g_a[j].k==i && g_a[j].p<=f[used])\n\t\t\tf[used]+=g_a[j++].a;\n\t}\n\tcout<<dfs(n,0);//\u8fc7\u53bb\u65f6 \n\treturn 0;\n}\n```\n",
        "postTime": 1617442112,
        "uid": 422348,
        "name": "Yang818",
        "ccfLevel": 4,
        "title": "P4877"
    }
]
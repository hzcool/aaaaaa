[
    {
        "content": "\u7ecf\u5178\u7684cdq\u5206\u6cbb\u4f18\u5316dp\u3002\n\n\u5f88\u5bb9\u6613\u5730\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b:$f[i]=max(f[j]+1,f[i])$ $(a_j<a_i,d_j\\le b_i,c_j\\le d_i)$\u3002\n\n\u76f4\u63a5\u5957\u6a21\u677f\uff1a\u628a\u6574\u4e2a\u533a\u95f4\u6309\u7167a\u5173\u952e\u5b57\u6392\u5e8f\uff0c\u9012\u5f52\u5904\u7406\u5de6\u8fb9\u3002\n\n\u5de6\u53f3\u533a\u95f4\u5206\u522b\u6309\u7167d\uff0cb\u5173\u952e\u5b57\u6392\u5e8f\uff0c\u53cc\u6307\u9488\u679a\u4e3e\uff0c\u7528\u6811\u72b6\u6570\u7ec4\u8bb0\u5f55\u524d\u7f00\u6700\u5927\u503c\u3002\n\n\u5904\u7406\u5de6\u53f3\u533a\u95f4\u4e4b\u95f4\u7684\u6570\u636e\uff0c\u66f4\u65b0\u6700\u5927\u503c\uff0c\u8fd8\u539f\u6811\u72b6\u6570\u7ec4\uff0c\u9012\u5f52\u5904\u7406\u53f3\u8fb9\u3002\n\n\u6700\u540e\u8bb0\u5f97\u628a\u8f93\u5165\u7684\u79bb\u6563\u5316\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define lowbit(x) -x&x\nusing namespace std;\nconst int N=3e5+5;\nstruct nod{\n\tint a,b,c,d,res;\n}q[N];\nint li[N],h,n;\nint tr[N],ans;\nbool cmp(nod x,nod y){return x.a<y.a;}\nbool cmp1(nod x,nod y){return x.b<y.b;}\nbool cmp2(nod x,nod y){return x.d<y.d;}\nvoid add(int x,int v){\n    for(int i=x;i<N;i+=lowbit(i)){\n        tr[i]=max(v,tr[i]);\n    }\n}\nint query(int x){\n    int res=0;\n    for(int i=x;i;i-=lowbit(i)){\n        res=max(res,tr[i]);\t\n    }\n    return res;\n}\nvoid clean(int x){\n    for(int i=x;i<N;i+=lowbit(i)){\n    \ttr[i]=0;\n    }\n}\nvoid merg_sort(int l,int r){\n\tif(l>=r)return ;\n\tint mid=(l+r)/2;\n\tsort(q+l,q+r+1,cmp);\n\tmerg_sort(l,mid);\n\tsort(q+l,q+mid+1,cmp2);\n\tsort(q+mid+1,q+r+1,cmp1);\n\tint i=l,j=mid+1;\n\twhile(i<=mid&&j<=r){\n\t\tif(q[i].d<=q[j].b)add(q[i].c,q[i].res),i++;\n\t\telse q[j].res=max(q[j].res,query(q[j].d)+1),j++;\n\t}\n\twhile(i<=mid)add(q[i].c,q[i].res),i++;\n\twhile(j<=r)q[j].res=max(q[j].res,query(q[j].d)+1),j++;\n\tfor(int i=l;i<=mid;i++){\n\t\tclean(q[i].c);\n\t}\n\tsort(q+mid+1,q+r+1,cmp);\n\tmerg_sort(mid+1,r);\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d%d%d\",&q[i].a,&q[i].b,&q[i].c,&q[i].d);\n\t\tli[++h]=q[i].b,li[++h]=q[i].c,li[++h]=q[i].d;\n\t\tq[i].res=1;\n\t}\n\tsort(li+1,li+h+1);\n\th=unique(li+1,li+h+1)-li-1;\n\tfor(int i=1;i<=n;i++){\n\t\tq[i].b=lower_bound(li+1,li+h+1,q[i].b)-li;\n\t\tq[i].c=lower_bound(li+1,li+h+1,q[i].c)-li;\n\t\tq[i].d=lower_bound(li+1,li+h+1,q[i].d)-li;\t\n\t}\n\tsort(q+1,q+n+1,cmp);\n\tmerg_sort(1,n);\n\tfor(int i=1;i<=n;i++){\n\t\tans=max(ans,q[i].res);\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1618926784,
        "uid": 277664,
        "name": "\u968f\u4fbfAK",
        "ccfLevel": 6,
        "title": "P3364 Cool loves touli \u9898\u89e3"
    },
    {
        "content": "[P3364 Cool loves touli](https://www.luogu.com.cn/problem/P3364)\n\n$cdq$\u4f18\u5316$dp$\n\n\u8f6c\u79fb\u6761\u4ef6\u8005\u6709\u4e09\uff1a\n\n$$a_j<a_i$$\n\n$$d_j\\leq b_i$$\n\n$$c_j \\leq d_i$$\n\n\u8bb0\u5f97\u628a$b,c,d$\u5168\u90e8\u79bb\u6563.\n\n\u7136\u540e$cdq$\u7ef4\u62a4\u4e00\u4e0b\u5373\u53ef.\n\n\u8fd8\u6709\u5c31\u662f\u8bb0\u5f97\u53ca\u65f6\u6392\u5e8f.\n\n```cpp\nconst ll N=3e5+5;\n\nll n;\n\nstruct node{\n\tll a, b, c, d, res;\n}q[N];\nll lsh[N], h;\nnamespace bit{\n\tll f[N];\n\tinline void add(ll x, ll val){\n\t\tfor (; x<=h; x+=x&-x) chkmax(f[x], val);\n\t}\n\t\n\tinline ll ask(ll x){\n\t\tll res=0;\n\t\tfor (; x; x-=x&-x) chkmax(res, f[x]);\n\t\treturn res;\n\t}\n\t\n\tinline void del(ll x){\n\t\tfor (; x<=h; x+=x&-x) f[x]=0;\n\t}\n}\n\ninline bool cmp1(node x, node y){\n\treturn x.a<y.a;\n}\n\ninline bool cmp2(node x, node y){\n\treturn x.b<y.b;\n}\n\ninline bool cmp3(node x, node y){\n\treturn x.c<y.c;\n}\n\ninline bool cmp4(node x, node y){\n\treturn x.d<y.d;\n}\n\n\ninline void cdq_solve(ll l, ll r){\n\tif (l==r) return (void)(chkmax(q[l].res, 1));\n\tll mid=l+r>>1;\n\tstable_sort(q+l, q+r+1, cmp1);\n\tcdq_solve(l, mid);\n\tstable_sort(q+l, q+mid+1, cmp4);\n\tstable_sort(q+mid+1, q+r+1, cmp2);\n\tll nowl=l, nowr=mid+1;\n\twhile (nowr<=r){\n\t\twhile (nowl<=mid && q[nowl].d<=q[nowr].b) bit::add(q[nowl].c, q[nowl].res), ++nowl;\n\t\tchkmax(q[nowr].res, bit::ask(q[nowr].d)+1);\n\t\t++nowr;\n\t}\n\twhile (--nowl>=l) bit::del(q[nowl].c);\n\tcdq_solve(mid+1, r);\n}\n\nll ans;\nint main(){\n\tread(n);\n\tfor (R ll i=1; i<=n; i++){\n\t\tread(q[i].a); read(q[i].b); read(q[i].c); read(q[i].d);\n\t\tlsh[++h]=q[i].b; lsh[++h]=q[i].c; lsh[++h]=q[i].d;\n\t}\n\tsort(lsh+1, lsh+h+1); h=unique(lsh+1, lsh+h+1)-lsh-1;\n\tfor (R ll i=1; i<=n; i++){\n\t\tq[i].b=lower_bound(lsh+1, lsh+h+1, q[i].b)-lsh;\n\t\tq[i].c=lower_bound(lsh+1, lsh+h+1, q[i].c)-lsh;\n\t\tq[i].d=lower_bound(lsh+1, lsh+h+1, q[i].d)-lsh;\n\t}\n\tstable_sort(q+1, q+n+1, cmp1);\n\tcdq_solve(1, n);\n\tfor (R ll i=1; i<=n; i++) chkmax(ans, q[i].res);\n\twriteln(ans);\n}\n```\n",
        "postTime": 1606183419,
        "uid": 220285,
        "name": "Saber_Master",
        "ccfLevel": 7,
        "title": "P3364 Cool loves touli"
    },
    {
        "content": "\u65b0\u5b66cdq\u5206\u6cbb\uff0c\u56e0\u4e3asort(l,r)\u65f6\u5fd8\u4e86\u5199\u6210sort(l,r+1)\u5361\u4e86\u5f88\u4e45\u3002\u3002\u3002\n\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nvoid chmax(int &x,int y)\n{\n    if (x<y) x=y;\n}\n\nconst int max_n=100000+5;\nstruct elem\n{\n    int a,b,c,f;\n};\nelem a[max_n],*now[max_n];\nint i;\n\nconst int mtop=max_n*3;int top,num;\nint c[mtop],*dy[mtop];\n\nbool f_xiao(const elem &x,const elem &y)\n{\n    return x.f<y.f;\n}\nbool xiao(const elem &x,const elem &y)\n{\n    return x.a<y.a;\n}\nbool now_xiao(const elem *x,const elem *y)\n{\n    return x->b<y->b;\n}\n\nvoid jia(int i,int w)\n{\n    for (;w>c[i]&&i<=top;i+=i&(-i)) c[i]=w;\n}\nvoid clear(int i)\n{\n    for (;c[i]&&i<=top;i+=i&(-i)) c[i]=0;\n}\nint qiu(int &f,int i)\n{\n   for (;i;i-=i&(-i)) chmax(f,c[i]);\n}\n\nint j,low;\nvoid cdq(int l,int r)\n{\n    if (l==r) return ;\n    int mid=(l+r)>>1;\n    cdq(l,mid);//\u5148(l,mid)\u518d\u8003\u8651\u5de6\u5bf9\u53f3\u7684\u5f71\u54cd\u518d\u8003\u8651(mid+1,r)\n                  //\u539f\u56e0\u662f\u7528x\u66f4\u65b0y\u65f6\u5fc5\u987b\u4fdd\u8bc1x\u5df2\u7ecf\u88ab\u5b8c\u5168\u66f4\u65b0\n    \n    sort(&a[l],&a[mid+1],xiao);//\u5de6\u8fb9\u6309a \n    for (i=mid+1;i<=r;++i) now[i]=&a[i];\n    i=mid+1,j=l;\n    sort(&now[i],&now[r+1],now_xiao);//\u53f3\u8fb9\u6309b \n    \n    for (;i<=r;++i)\n    {\n        low=now[i]->b;//\u4e0b\u754c \n      for (;a[j].a<=low&&j<=mid;++j) //\u6240\u6709a<=low \u52a0\u5165 \n        jia(a[j].c,a[j].f+1);//\u5c06f+1\u5728c\u70b9\u52a0\u5165 \n      qiu(now[i]->f,now[i]->a);//\u75281-a\u524d\u7f00max\u66f4\u65b0f \n    }\n    for (j=l;j<=mid;++j) clear(a[j].c);//\u6d88\u9664\u5f71\u54cd \n    \n    cdq(mid+1,r);\n}\n\nbool dy_xiao(int *x,int *y)\n{\n    return *x<*y;\n}\nint main()\n{ freopen(\"1.in\",\"r\",stdin);freopen(\"1.out\",\"w\",stdout);\n    int n;\n    scanf(\"%d\",&n);\n    for (i=1;i<=n;++i) \n      scanf(\"%d%d%d%d\",&a[i].f,&a[i].b,&a[i].c,&a[i].a);//\u9898\u610f\u5373c[l]<=a[i]<=b[r]    \n    sort(&a[1],&a[n+1],f_xiao);//\u6309\u7b49\u7ea7\u6392\u5e8f\n    \n        //\u5bf9a,b,c\u4e00\u8d77\u8fdb\u884c\u79bb\u6563\n    for (i=1;i<=n;++i) \n    {\n         a[i].f=0;\n        dy[++num]=&a[i].a;dy[++num]=&a[i].b;dy[++num]=&a[i].c;\n    }\n    sort(&dy[1],&dy[num+1],dy_xiao);\n    int now=1<<30;\n    for (i=1;i<=num;++i) \n    {\n     if (now!=*dy[i]) {++top;now=*dy[i];}\n     *dy[i]=top;\n        }\n\n    cdq(1,n);\n    int ans=a[1].f;\n    for (i=2;i<=n;++i) chmax(ans,a[i].f);\n    printf(\"%d\",ans+1);\n}\n```",
        "postTime": 1478602031,
        "uid": 9168,
        "name": "kczno1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3364 \u3010Cool loves touli\u3011"
    },
    {
        "content": "## \u89e3\u9898\u601d\u8def\uff1a\n\u66b4\u529b DP \u5f88\u597d\u60f3\uff0c\u5148\u628a\u6240\u6709\u7684\u82f1\u96c4\u6392\u5e8f\uff0c$dp_i$ \u8868\u793a\u4ee5\u7b2c $i$ \u4e2a\u82f1\u96c4\u7ed3\u5c3e\u9009\u7684\u6700\u591a\u7684\u82f1\u96c4\uff0c$dp_i=max(dp_j+1) (a_j \\le s_i,w_j\\le a_i)$\u3002\n\n\u8f6c\u79fb\u8981\u6c42 $l_j<l_i,a_j\\le s_j,w_i\\le a_j$\u3002\n\n\u8bf6\uff01\u8fd9\u4e0d\u662f\u4e09\u7ef4\u504f\u5e8f\u5417\uff1f\u7528 cdq \u5206\u6cbb\u7ef4\u62a4\uff01\n\n\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u4ec0\u4e48\u662f cdq \u5206\u6cbb\uff0c\u8bf7\u524d\u5f80[\u6211\u7684 cdq \u5206\u6cbb\u7b14\u8bb0](https://www.luogu.com.cn/blog/Kok-kok/cdq-fen-zhi-xue-xi-bi-ji)\u3002\n\n\u5904\u7406\u533a\u95f4 $[l,r]$ \u65f6\uff0c\u9996\u5148\u628a\u533a\u95f4\u6309 $l$ \u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u518d\u628a $[l,mid]$ \u6309 $a$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c$[mid+1,r]$ \u6309 $s$ \u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528\u5355\u6307\u9488\u626b\u63cf\u6cd5\u4e86\u3002\n\n\u4e0d\u8fc7\u8fd9\u9898\u7684\u5206\u6cbb\u65b9\u5f0f\u548c\u666e\u901a\u7684 cdq \u5206\u6cbb\u6709\u6240\u4e0d\u540c\uff0c\u6211\u4eec\u8981\u5148\u53bb\u5904\u7406 $[l,mid]$\uff0c\u7136\u540e\u7528 $[l,mid]$ \u7684\u7b54\u6848\u66f4\u65b0 $[mid+1,r]$ \u7684\u7b54\u6848\uff0c\u518d\u53bb\u5904\u7406 $[mid+1,r]$\uff0c\u539f\u56e0\u5f88\u7b80\u5355\uff0c\u66b4\u529b\u65f6\u4ece\u5de6\u5230\u53f3\uff0c\u8fd9\u91cc\u4e5f\u8981\u4ece\u5de6\u5230\u53f3\uff0c\u800c\u4e0d\u80fd\u5148\u5de6\u53f3\u518d\u5408\u5e76\u3002\n\n## \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#define rep(x,y,z) for(int x=y;x<=z;x++)\n#define per(x,y,z) for(int x=z;x>=y;x--)\n#define LL long long\nusing namespace std;\nconst int N=1e5+10,M=4e5+10;\nstruct hero\n{\n\tint l,s,w,a,dp;\n}h[N];\nbool comp1(const hero &P,const hero &Q) {return P.l<Q.l;}\nbool comp2(const hero &P,const hero &Q) {return P.a<Q.a;}\nbool comp3(const hero &P,const hero &Q) {return P.s<Q.s;}\nint lis[M];\nint t[M],tot;\ninline void add(int i,int x) {while(i<=tot) t[i]=max(t[i],x),i+=i&-i;}\ninline int query(int i) {int sum=0;while(i) sum=max(sum,t[i]),i-=i&-i;return sum;}\ninline void clean(int i) {while(i<=tot) t[i]=0,i+=i&-i;}\nvoid CDQ(int l,int r)\n{\n\tif(l==r) return ;\n\tint mid=l+r>>1;\n\tsort(h+l,h+r+1,comp1);\n\tCDQ(l,mid);\n\tsort(h+l,h+mid+1,comp2);\n\tsort(h+mid+1,h+r+1,comp3);\n\tint L=l;\n\trep(i,mid+1,r)\n\t{\n\t\twhile(L<=mid&&h[L].a<=h[i].s) add(h[L].w,h[L].dp),L++;\n\t\th[i].dp=max(h[i].dp,query(h[i].a)+1);\n\t}\n\trep(i,l,L-1) clean(h[i].w);\n\tCDQ(mid+1,r);\n}\nint main()\n{\n\tint n;\n\tscanf(\"%d\",&n);\n\trep(i,1,n)\n\t{\n\t\tscanf(\"%d%d%d%d\",&h[i].l,&h[i].s,&h[i].w,&h[i].a);\n\t\tlis[++tot]=h[i].s,lis[++tot]=h[i].w,lis[++tot]=h[i].a;\n\t}\n\tsort(lis+1,lis+1+tot);\n\ttot=unique(lis+1,lis+1+tot)-lis-1;\n\trep(i,1,n)\n\t{\n\t\th[i].dp=1;\n\t\th[i].w=lower_bound(lis+1,lis+1+tot,h[i].w)-lis;\n\t\th[i].s=lower_bound(lis+1,lis+1+tot,h[i].s)-lis;\n\t\th[i].a=lower_bound(lis+1,lis+1+tot,h[i].a)-lis;\n\t}\n\tCDQ(1,n);\n\tint ans=0;\n\trep(i,1,n) ans=max(ans,h[i].dp);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1656486685,
        "uid": 571634,
        "name": "hgzxwzf",
        "ccfLevel": 7,
        "title": "P3364 Cool loves touli"
    },
    {
        "content": "\u672c\u9898\u91cc\u9762\u5404\u79cd\u91cf\u7684\u6bd4\u8f83\u5173\u7cfb\u5f88\u5bb9\u6613\u8ba9\u4eba\u60f3\u5230\u591a\u7ef4\u504f\u5e8f\u3002\u518d\u52a0\u4e0a\u4e00\u773c\u53ef\u89c1\u7684dp\uff0c\u5f88\u5bb9\u6613\u60f3\u5230cdq\u5206\u6cbb\u4f18\u5316dp\u6765\u89e3\u51b3\u3002\n\n\u9898\u76ee\u7684\u7b80\u5316\u7248\uff1a$l[i]\\geq l[j]\\ \\ \\ s[i]\\geq a[j]\\ \\ \\ a[i]\\geq w[j]$ \u6c42\u6700\u591a\u80fd\u9009\u591a\u5c11\u4e2a\u82f1\u96c4\u3002\n\ndp\u65b9\u7a0b\u5f88\u663e\u7136\u662f\uff1a$f[i]=max(f[j])+1$ \u5176\u4e2dj\u8981\u6ee1\u8db3\u9898\u610f\u3002\u5176\u5b9e\u5c31\u662f\u7c7b\u4f3c[\u62e6\u622a\u5bfc\u5f39](https://www.luogu.com.cn/problem/P2487)\n\u7684\u505a\u6cd5\uff0c\u4f46\u662f\u8981\u6ce8\u610f\u79bb\u6563\u5316\uff0c\u66f4\u8981\u6ce8\u610f\u9664\u4e86\u7b49\u7ea7\u7684\u4e09\u4e2a\u91cf\u8981\u4e00\u8d77\u79bb\u6563\u3002(\u56e0\u4e3a\u8fd9\u4e2a\u8c03\u4e86\u597d\u4e45)\u63a5\u4e0b\u6765\u662f\u559c\u95fb\u4e50\u89c1\u7684\u4ee3\u7801\u73af\u8282\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<queue>\n#include<set>\n#include<vector>\n#include<cstdlib>\nusing namespace std;\n#define int long long\n#define R register\n#define lp (p<<1)\n#define rp (p<<1|1)\nint read(){\n\tint a=0,b=1;char c=getchar();\n\twhile(!isdigit(c)){if(c=='-')b=-1;c=getchar();}\n\twhile(isdigit(c)){a=a*10+c-'0';c=getchar();}\n\treturn a*b;\n}\nvoid write(int x){\n\tif(x<0){putchar('-');x=-x;}\n\tif(x<=9){putchar(x+'0');return;}\n\twrite(x/10);putchar(x%10+'0');\n}\nvoid writesp(int x){\n\twrite(x);putchar(' ');\n}\nvoid writeln(int x){\n\twrite(x);putchar('\\n');\n}\nconst int N=3e5+50;\nint n,f[N],h,lsh[N];\nstruct node{\n\tint l,s,w,a,id;\n\tvoid init(){\n\t\tl=read();s=lsh[++h]=read();\n\t\tw=lsh[++h]=read();a=lsh[++h]=read();\n\t}\n}e[N];\nbool cmpl(node x,node y){\n\treturn x.l<y.l;\n}\nbool cmpa(node x,node y){\n\treturn x.a<y.a;\n}\nbool cmps(node x,node y){\n\treturn x.s<y.s;\n}\nbool cmpid(node x,node y){\n\treturn x.id<y.id;\n}\nnamespace seg{\n\tint dat[N<<2];\n\tvoid change(int p,int l,int r,int k,int z){\n\t\tif(l==r){\n\t\t\tdat[p]=max(dat[p],z);\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tif(k<=mid)change(lp,l,mid,k,z);\n\t\telse change(rp,mid+1,r,k,z);\n\t\tdat[p]=max(dat[lp],dat[rp]);\n\t}\n\tint query(int p,int l,int r,int u,int v){\n\t\tif(l>=u&&r<=v)return dat[p];\n\t\tint mid=(l+r)>>1,val=0;\n\t\tif(u<=mid)val=max(val,query(lp,l,mid,u,v));\n\t\tif(v>mid)val=max(val,query(rp,mid+1,r,u,v));\n\t\treturn val;\n\t}\n\tvoid clear(int p,int l,int r){\n\t\tif(!dat[p])return;\n\t\tdat[p]=0;\n\t\tif(l==r)return;\n\t\tint mid=(l+r)>>1;\n\t\tclear(lp,l,mid);clear(rp,mid+1,r);\n\t}\n}\nvoid cdq(int l,int r){\n\tif(l==r)return;\n\tint mid=(l+r)>>1;\n\tsort(e+l,e+r+1,cmpid);\n\tcdq(l,mid);\n\tsort(e+l,e+mid+1,cmpa);\n\tsort(e+mid+1,e+r+1,cmps);\n\tseg::clear(1,1,h);\n\tfor(R int i=l,j=mid+1;j<=r;j++){\n\t\twhile(i<=mid&&e[i].a<=e[j].s)seg::change(1,1,h,e[i].w,f[e[i].id]),i++;\n\t\tf[e[j].id]=max(f[e[j].id],seg::query(1,1,h,1,e[j].a)+1);\n\t}\n\tcdq(mid+1,r);\n}\nsigned main(){\n\tn=read();\n\tfor(R int i=1;i<=n;i++){\n\t\tf[i]=1;\n\t\te[i].init();\n\t}\n\tsort(lsh+1,lsh+h+1);\n\th=unique(lsh+1,lsh+h+1)-lsh-1;\n\tfor(R int i=1;i<=n;i++){\n\t\te[i].w=lower_bound(lsh+1,lsh+h+1,e[i].w)-lsh;\n\t\te[i].a=lower_bound(lsh+1,lsh+h+1,e[i].a)-lsh;\n\t\te[i].s=lower_bound(lsh+1,lsh+h+1,e[i].s)-lsh;\n\t}\n\tsort(e+1,e+n+1,cmpl);\n\tfor(R int i=1;i<=n;i++)e[i].id=i;\n\tcdq(1,n);\n\tint ans=0;\n\tfor(R int i=1;i<=n;i++)ans=max(ans,f[i]);\n\twriteln(ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1606129177,
        "uid": 102709,
        "name": "zjy1412",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3364 \u3010Cool loves touli\u3011"
    }
]
[
    {
        "content": "## \u9996\u5148\uff0c\u6211\u4eec\u7406\u89e3\u4e00\u4e0b\u9898\u610f\n\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u4e0a\u90fd\u6709\u4e00\u4e2a\u725b\u3002\u6bcf\u5934\u725b\u90fd\u4f1a\u53d8\u6362\n\n\u7ed9\u4f60n\u4e2a\u6570\uff0c\u5206\u522b\u662fa1\uff0ca2\u2026\u2026an\u3002ai\u8868\u793a\u6bcf\u4e00\u6b21\u53d8\u6362\u4f4d\u7f6e\u4e3ai\u7684\u725b\u4f1a\u53d8\u5230\u4f4d\u7f6e\u4e3aai\u7684\u5730\u65b9\u3002\u53d8\u6362\u540e\uff0c\u6709\u7684\u4f4d\u7f6e\u4e0a\u6709\u591a\u4e2a\u725b\uff0c\u90a3\u4e48\u4ed6\u4eec\u4e0b\u4e00\u6b21\u53d8\u6362\uff0c\u8fd9\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u6240\u6709\u725b\u90fd\u4f1a\u8fd9\u4e48\u53d8\u3002\n\n\u95ee\u65e0\u8bba\u51e0\u6b21\u53d8\u5316\u540e\uff0c\u4e00\u5171\u6709\u591a\u5c11\u4e2a\u4f4d\u7f6e\u4e0a\u6709\u725b\n\n## \u770b\u770b\u6837\u4f8b\uff1a\n\nin:\n\n```\n4\n3 2 1 3\n```\n\nout:\n```\n3\n```\n\n### \u753b\u4e2a\u56fe\uff0c\u7406\u89e3\u4e00\u4e0b\n\n![](https://cdn.luogu.com.cn/upload/pic/62456.png)\n\n$\\tiny\\texttt{\u7bad\u5934\u8868\u793a\u4ece\u4f4d\u7f6e\u51e0\u8df3\u5230\u4f4d\u7f6e\u51e0}$\n\n**\u6b38\uff1f\u8fd9\u4e0d\u5c31\u662f\u4e2a\u6709\u5411\u56fe\u5417\uff1f**\n\n#### \u6211\u4eec\u6765\u753b\u4e00\u753b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/pic/62459.png)\n#### \u7ed3\u5408\u6837\u4f8b\uff0c\u6211\u4eec\u6765\u770b\u770b\n\n\u8f93\u51fa\u4e863\uff0c\u662f\u54ea3\u4e2a\uff1f\u662f1\uff0c2\uff0c3\u4e09\u4e2a\u4f4d\u7f6e\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e484\u53f7\u6ca1\u6709\u725b\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u56e0\u4e3a1\uff0c2\uff0c3\u5165\u5ea6\u90fd\u5927\u4e8e0\uff0c\u552f\u72ec4\u5c0f\u4e8e0.\u54e6\uff1f\u96be\u9053\u548c\u5165\u5ea6\u6709\u5173\uff1f\n\n## \u731c\u60f3\n\n\u6211\u4eec\u4e0d\u59a8\u6709\u4e00\u4e2a\u731c\u60f3\uff1a\u5982\u679c\u6709\u4e00\u4e2a\u70b9\uff0c\u4ed6\u7684\u6536\u5165\u53ef\u4ee5\u7ef4\u6301\u4ed6\u7684\u652f\u51fa\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u4e0a\u4e00\u76f4\u6709\u725b\u3002\u4e5f\u5c31\u662f\n\n```cpp\nif(\u5165\u5ea6-\u51fa\u5ea6>=0){\n\tans++;\n }\n ```\n \n \u8fd9\u5c31\u5bf9\u4e86\u5417\uff1f\u6211\u4eec\u6b23\u559c\u7684\u53d1\u73b0\u6837\u4f8b\u8fc7\u4e86\u3002\u63d0\u4ea4\u4e00\u4e0b\u2014\u2014WA\n \n \u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\u6765\u770b\u770b\u8fd9\u7ec4\u6570\u636e\u2014\u2014\n \n in:\n ```\n 1 1 2\n ```\n \n \n\u8f93\u51fa\u5e94\u8be5\u662f1\uff0c\u53ef\u662f\u4ee5\u6211\u4eec\u8fd9\u6837\u5224\u65ad\u5c31\u662f2\n \n~~QAQ\u6cea\u5954~~\n\n## \u731c\u60f32\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bfc\u81f4\u8fd9\u79cd\u9519\u8bef\u7684\u539f\u56e0\u662f\u7b2c\u4e00\u8f6e3\u7ed9\u4e862\u4e00\u5934\u725b\uff0c\u53ef\u662f\u7b2c\u4e8c\u8f6e3\u6ca1\u6709\u725b\u4e86\uff0c\u4ece\u800c\u8ba92\u540e\u9762\u6bcf\u8f6e\u5f97\u5230\u7684\u725b\u4e3a0\u3002**\u5c31\u662f\u56e0\u4e3a3\u5165\u5ea6\u4e3a0\uff0c\u6240\u4ee5\"\u517b\u4e0d\u8d77\"2**\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u731c\u60f3\uff1a\u5982\u679c\u4e00\u4e2a\u70b9\u5165\u5ea6\u4e3a0\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u6307\u5411\u7684\u70b9\u5165\u5ea6--\u3002\uff08\u5927\u5bb6\u542c\u8d77\u6765\u5e94\u8be5\u5f88\u8d39\u52b2\uff0c\u7528\u4f2a\u4ee3\u7801\u7ed9\u5927\u5bb6\u7406\u89e3)\n\n```cpp\nif(in[f[i]]==0)\n{\n\tin[i]--;\n{\n```\n\nf[i]\u5b58\u50a8\u7684\u662f\u6307\u5411\u81ea\u5df1\u7684\u70b9\n\n\u53ef\u662ff[i]\u91cc\u53ef\u80fd\u6709\u591a\u4e2a\u70b9\uff0c\u600e\u4e48\u5b58\u5462\uff1f\n\n\u6211\u4eec\u7528\u4e00\u4e2a\u961f\u5217\u5b58\u50a8\u5165\u5ea6\u4e3a0\u7684\u70b9\uff0c\u7136\u540e\u4e00\u4e2a\u5faa\u73af\u51cf\u53bb\uff0c\u6700\u540e\u627e\u5230\u5165\u5ea6\u4e0d\u4e3a0\u7684\u5c31\u597d\u4e86\u3002\n\n**\u8fd9\u4e0d\u5c31\u662f\u62d3\u6251\u5417\uff1f**\n\n## \u5b9e\u73b0\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,a[100005],ans;\nint out[100005],in[100005];\nqueue<int> q;\nint main()\n{\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>a[i];\n\t\t\n\t\tin[a[i]]++;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(in[i]==0){\n\t\t\tq.push(i);\n\t\t}\n\t}\n    \n\twhile(!q.empty())\n\t{\n\t\tint tmp=q.front();\n\t\tq.pop();\n\t\tin[a[tmp]]--;\n\t\tif(in[a[tmp]]==0)\n\t\t{\n\t\t\tq.push(a[tmp]);\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(in[i]!=0)\n\t\t{\n\t\t\tans++;\n\t\t}\n\t}\n\n\tcout<<ans;\n   return 0;\n}\n```",
        "postTime": 1562469975,
        "uid": 112529,
        "name": "QAQ\u6c38\u52a8\u673a",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4089 \u3010[USACO17DEC]The Bovine Shuffle\u3011"
    },
    {
        "content": "\u770b\u9898\uff0c\u53ef\u4ee5\u60f3\u8c61\u6210\u662f\u6709N\u4e2a\u70b9\uff0c\u6bcf\u4e2a\u70b9\u7684\u51fa\u5ea6\u90fd\u4e3a1(\u53ef\u80fd\u6709\u81ea\u73af?)\uff0c\u6bcf\u4e2a\u8282\u70b9\u5f00\u59cb\u90fd\u67091\u53ea(\u5934?)\u725b\uff0c\u6bcf\u56de\u5408\u6bcf\u4e2a\u8282\u70b9\u4e0a**\u6240\u6709**\u7684\u725b\u90fd\u6cbf\u7740\u8be5\u8282\u70b9**\u552f\u4e00\u7684\u51fa\u8fb9**\u8d70\u5411~~\u6b7b\u4ea1~~\u4e0b\u4e00\u4e2a\u8282\u70b9\uff0c\u6c42\u8be5\u56fe\u4e2d\u65e0\u8bba\u8fc7\u4e86\u51e0\u56de\u5408\u540e\u90fd\u4e00\u76f4\u62e5\u6709\u81f3\u5c111\u53ea\u725b\u3002\n\n\u8be5\u56fe\u4e2d**\u6240\u6709\u7684\u73af\u7684\u957f\u5ea6\u4e4b\u548c**\u5373\u4e3a\u7b54\u6848\u3002\n\n\u5206\u6790\uff1a\u9996\u5148\u6211\u4eec\u6765\u60f3\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u7b54\u6848\u4e0d\u4f1a\u662f0\u3002\u5982\u679c\u7b54\u6848\u4e3a0\uff0c\u5c31\u610f\u5473\u7740\u6bcf\u4e2a\u8282\u70b9\u90fd\u5728\u67d0\u4e2a(\u4e0d\u540c)\u56de\u5408\u6ca1\u6709\u4e86\u725b\u3002\u56e0\u4e3a\u6240\u6709\u8282\u70b9\u7684\u51fa\u5ea6\u90fd=1\uff0c\u6240\u4ee5\u4ece\u8282\u70b9A\u5230\u8282\u70b9B\u7684\u8def(\u65e0\u8bba\u662f\u76f4\u63a5\u8fd8\u662f\u95f4\u63a5)**\u6709\u4e14\u4ec5\u6709\u4e00\u6761**\uff0c\u5e76\u4e14\u8282\u70b9A\u5728**\u6700\u591a\u4e00\u4e2a\u73af**\u4e2d\u3002\u6240\u4ee5\u5982\u679c\u8282\u70b9A\u4e00\u65e6\u5931\u53bb\u4e86\u6240\u6709\u7684\u725b\uff0c\u90a3\u4e48\u5c31\u518d\u4e5f\u4e0d\u4f1a\u6709\u4efb\u4f55\u7684\u725b\u5230\u8fbe\u8282\u70b9A\u3002\n\n\u4e3e\u4e00\u4e2a\u4f8b\u5b50\u3002\u8bbe\u60f3\u8282\u70b9A\u3002\u5982\u679c\u60f3\u8981A\u5931\u53bb\u6240\u6709\u725b\u4e4b\u540e\u518d\u83b7\u5f97\u725b\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u81f3\u5c11\u6709\u4e00\u4e2a\u8282\u70b9(\u8bb0\u4e3aB)\u6709\u4e00\u6761\u5230A\u7684\u6709\u5411\u8fb9(\u8bb0\u4e3aB->A)\u3002\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u8ba9A\u5148\u5931\u53bb\u725b\uff0c\u6240\u4ee5\u5f53A\u6709\u725b\u65f6\uff0cB\u5fc5\u7136\u6ca1\u6709\u725b(\u56e0\u4e3aB\u4e0d\u80fd\u518d\u5411\u5176\u4ed6\u8282\u70b9\u8fde\u8fb9)\uff0c\u800c\u4e0b\u4e00\u4e2a\u56de\u5408\uff0cA\u5931\u53bb\u725b\u4e4b\u540e\uff0cB\u53c8\u8981\u62e5\u6709\u725b\u3002\u56de\u5230\u521d\u59cb\u72b6\u6001\uff0c**\u6240\u6709\u8282\u70b9\u90fd\u6709\u4e00\u53ea\u725b**\uff0c\u56e0\u6b64\u4e0d\u4f1a\u51fa\u73b0A(\u6216B)\u5148\u5931\u53bb\u725b\u53c8\u83b7\u5f97\u725b\u7684\u60c5\u51b5\u3002\n\n\u90a3\u4e48\u73b0\u5728\u77e5\u9053\u4e86\u5982\u679c\u8282\u70b9A\u4e00\u76f4\u90fd\u62e5\u6709\u725b\uff0c\u90a3\u4e48A\u5fc5\u5b9a\u5728\u4e00\u4e2a\u73af\u5185\u3002\n\n\u6240\u4ee5\uff0c\u5bf9\u4e8e\u8be5\u6709\u5411\u56fe\uff0c\u53ea\u8981\u53bb\u9664\u6240\u6709\u4e0d\u5728\u73af\u5185\u7684\u70b9\uff0c\u7136\u540e\u5224\u73af\u51fa\u7b54\u6848\u5c31\u53ef\u4ee5\u4e86\u3002\nMain Code:\n```cpp\nint n,to[200005],id[200005],ans=0;\nbool inring[200005],useless[200005];\nint dfs(int now)\n{\n    if(inring[now])return 0;\n    inring[now]=1;\n    return dfs(to[now])+1;\n}\nvoid dfs2(int now)\n{\n    useless[now]=1;\n    --id[to[now]];\n    if(!id[to[now]])dfs2(to[now]);\n}\nint main()\n{\n    int a;\n    cin>>n;for(int i=1;i<=n;++i){cin>>a;to[i]=a;++id[a];}\n    for(int i=1;i<=n;++i)if(!id[i]&&!useless[i])dfs2(i);\n    for(int i=1;i<=n;++i)if(!inring[i]&&!useless[i])ans+=dfs(i);\n    cout<<ans<<endl;\n    return 0;\n}\n//\u5c06\u8be5\u4ee3\u7801\u5c0f\u6539\u540e\u53ef\u4ee5A\u6389NOIP2015\u7684\u201c\u4fe1\u606f\u4f20\u9012\u201d(P2661)\n```",
        "postTime": 1517921691,
        "uid": 44534,
        "name": "Kirisame_Marisa_",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4089 \u3010[USACO17DEC]The Bovine Shuffle\u3011"
    },
    {
        "content": "#### \u9898\u76ee\u5927\u610f\n\n\n------------\n\u7ed9\u5b9a $n$ \u4e2a\u6570\u7684 $a$ \u5e8f\u5217\uff0c\u5176\u4e2d\u6bcf\u4e2a $a_i$ \u8868\u793a\u73b0\u5728\u5728 $i$ \u4f4d\u7f6e\u4e0a\u7684\u725b\u4f1a\u53d8\u5230\u4f4d\u7f6e\u4e3a $a_i$ \u7684\u5730\u65b9\u3002\u6709\u65f6\u5019\uff0c\u7ecf\u8fc7\u53d8\u6362\u4e00\u4e2a\u4f4d\u7f6e\u4e0a\u53ef\u80fd\u6709\u5f88\u591a\u4e2a\u725b\uff0c\u90a3\u4e48\u4e0b\u4e00\u6b21\u8fd9\u4e9b\u725b\u7684\u53d8\u6362\u65b9\u5f0f\u5c31\u662f\u4e00\u6837\u7684\u3002\u95ee\u65e0\u8bba\u7ecf\u8fc7\u591a\u5c11\u6b21\u53d8\u6362\u4e00\u5171\u6709\u591a\u5c11\u4e2a\u4f4d\u7f6e\u4e0a\u6709\u725b\u3002\n\n#### \u9898\u76ee\u5206\u6790\n\n\n------------\n\u9996\u5148\u8003\u8651\u5728\u4f55\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u4fdd\u8bc1\u8fd9\u4e2a\u4f4d\u7f6e\u4e0a\u6700\u7ec8\u4e00\u5b9a\u6709\u725b\u3002\n\n- \u5c06\u9898\u76ee\u7ed9\u51fa\u7684\u6761\u4ef6\u62bd\u8c61\u4e3a\u4e00\u5f20\u56fe\uff0c\u6bcf\u4e2a $i$ \u5411 $a_i$ \u8fde\u4e00\u6761**\u6709\u5411**\u8fb9\n- \u89c2\u5bdf\u6837\u4f8b\u4e0d\u96be\u53d1\u73b0\u5f53\u56fe\u4e2d\u51fa\u73b0\u73af\u7684\u65f6\u5019\uff0c\u73af\u4e0a\u7684\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u90fd\u5fc5\u5b9a\u6709\u725b\u5b58\u5728\n\n\u6839\u636e\u4ee5\u4e0a\u5206\u6790\u53ef\u4ee5\u5c06\u672c\u95ee\u9898\u8f6c\u5316\u4e3a\uff1a\u7ed9\u5b9a\u4e00\u5f20\u56fe\uff0c\u8be2\u95ee\u5171\u6709\u591a\u5c11\u4e2a\u70b9\u5728\u73af\u4e0a\u3002\n\n#### \u89e3\u9898\u601d\u8def\n\n\n------------\n\u89e3\u51b3\u6b64\u7c7b\u95ee\u9898\u901a\u5e38\u4f7f\u7528**\u62d3\u6251\u6392\u5e8f**\u3002\n\n\u62d3\u6251\u6392\u5e8f\u7684\u5b9e\u73b0\u65b9\u5f0f\u5206\u4e3a\u4e00\u4e0b\u51e0\u6b65\uff1a\n\n- \u5b58\u50a8\u6bcf\u4e00\u4e2a\u70b9\u7684\u5165\u5ea6\u5e76\u5c06\u5165\u5ea6\u4e3a $0$ \u7684\u70b9\u653e\u5165\u961f\u5217\u4e2d\u3002\n- \u5f53\u961f\u5217\u4e0d\u4e3a\u7a7a\u65f6\uff0c\u5c06\u53d6\u51fa\u7684\u5143\u7d20 $i$ \u5bf9\u5e94\u7684 $a_i$ \u7684\u5165\u5ea6 $-1$\u3002\n- \u91cd\u590d\u4ee5\u4e0a\u64cd\u4f5c\u77e5\u9053\u961f\u5217\u4e3a\u7a7a\uff0c\u6b64\u65f6\u5165\u5ea6\u4ecd\u4e0d\u4e3a $0$ \u7684\u70b9\u5373\u4e3a\u73af\u4e0a\u7684\u70b9\u3002\n\n\u6b63\u786e\u6027\u4e5f\u662f\u6bd4\u8f83\u5bb9\u6613\u7406\u89e3\uff0c\u53ef\u4ee5\u8003\u8651\u4e00\u4e2a\u70b9\u4e0d\u5728\u73af\u4e0a\uff0c\u90a3\u4e48\u8be5\u70b9\u6240\u6307\u5411\u7684\u70b9\u4e5f\u4e0d\u5728\u73af\u4e0a\u3002\u91cd\u590d\u5f53\u524d\u64cd\u4f5c\u53ef\u4ee5\u627e\u51fa\u6240\u6709\u7684\u5165\u5ea6\u4e3a $0$ \u7684\u70b9\uff0c\u5373\u4e3a\u4e0d\u5728\u73af\u4e0a\u7684\u70b9\u3002\u53cd\u4e4b\uff0c\u82e5\u4e00\u4e2a\u70b9\u5728\u73af\u4e0a\uff0c\u90a3\u4e48\u8be5\u70b9\u7684\u5165\u5ea6\u5fc5\u4e0d\u4e3a $0$\u3002\n\n#### \u4ee3\u7801\u5b9e\u73b0\n \n\n------------\n ```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<cstdlib>\n#include<queue>\n\nusing namespace std;\nconst int N = 100010;\n\ninline int read(){\n    int x=0,f=1;\n    char ch=getchar();\n    for(;!isdigit(ch);ch=getchar()) if(ch=='-') f=-1;\n    for(; isdigit(ch);ch=getchar()) x=(x<<3)+(x<<1)+ch-'0';\n    return x*f;\n}\nint n,a[N],ans,in[N];\nqueue<int> q;\nint main(){\n\tn = read();\n\tfor(int i=1;i<=n;i++){\n\t\ta[i] = read();\n\t\tin[a[i]] ++;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(in[i] == 0){\n\t\t\tq.push(i); \n\t\t}\n\t}\n\twhile(!q.empty()){\n\t\tint u = q.front();\n\t\tq.pop();\n\t\tin[a[u]]--;\n\t\tif(in[a[u]] == 0){\n\t\t\tq.push(a[u]); \n\t\t}\n\t} \n\tfor(int i=1;i<=n;i++){\n\t\tif(in[i] != 0){\n\t\t\tans++;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1646629023,
        "uid": 335615,
        "name": "0xFF",
        "ccfLevel": 0,
        "title": "P4089"
    },
    {
        "content": "## \u3010Part 1\u3011 \u7b80\u8ff0\u9898\u610f\n\n\u672c\u9898\u7684\u9898\u610f\u5176\u5b9e\u53ef\u4ee5\u62bd\u8c61\u7406\u89e3\u4e3a\uff1a\n\n\u4e00\u5171\u6709 $n$ \u4e2a\u5305\u88f9\uff0c$n$ \u4e2a\u5ea7\u4f4d\uff0c\u521a\u5f00\u59cb\u6bcf\u4e2a\u5ea7\u4f4d\u4e0a\u90fd\u6709\u4e00\u4e2a\u5305\u88f9\u3002\u800c\u6bcf\u4e2a\u5ea7\u4f4d\u90fd\u4f1a\u8d34\u4e00\u4e2a\u6807\u7b7e\uff0c\u4e0a\u9762\u5199\u7740\u5750\u8fd9\u4e2a\u5ea7\u4f4d\u7684\u5305\u88f9\u4e0b\u4e00\u6b21\u5e94\u8be5\u5750\u5230\u54ea\u4e2a\u5ea7\u4f4d\u4e0a\u3002\u65e0\u9650\u5faa\u73af\u3002\u95ee\u6700\u7ec8\u6709\u51e0\u4e2a\u5ea7\u4f4d\u4e0a\u6709\u5305\u88f9\u3002\n\n## \u3010Part 2\u3011 \u7406\u7406\u601d\u8def\n\n\u6839\u636e\u4e0a\u8ff0\u9898\u610f\uff0c\u6211\u4eec\u53ef\u4ee5\u6765\u601d\u8003\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u4ec0\u4e48\u65f6\u5019\u624d\u80fd\u4fdd\u8bc1\u5ea7\u4f4d\u4e0a\u6700\u7ec8\u4e00\u5b9a\u80fd\u6709\u5305\u88f9\u5462\uff1f\n\n\u6211\u4eec\u4e0d\u59a8\u5c06\u8be5\u95ee\u9898\u62bd\u8c61\u4e3a\u4e00\u4e2a\u56fe\uff0c\u6bcf\u4e00\u4e2a\u5ea7\u4f4d\u5411\u5b83\u6807\u7b7e\u4e0a\u7684\u5ea7\u4f4d\u8fde\u4e00\u6761\u6709\u5411\u8fb9\u3002\n\n\u4f8b\u5982\uff0c\u5bf9\u4e8e\u6837\u4f8b\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u8fd9\u6837\u4e00\u5e45\u56fe\uff1a\n\n\n\n\u6839\u636e\u56fe\u5f62\uff0c\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\uff0c\u5982\u679c\u56fe\u4e2d\u51fa\u73b0\u4e86\u73af\uff0c\u90a3\u4e48\u73af\u4e0a\u7684\u6bcf\u4e00\u4e2a\u5ea7\u4f4d\u6700\u7ec8\u4e00\u5b9a\u6709\u5305\u88f9\u3002\n\n\u6240\u4ee5\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\uff1a\u7ed9\u4f60\u4e00\u5e45\u56fe\uff0c\u4e00\u5171\u6709\u591a\u5c11\u4e2a\u8282\u70b9\u5728\u73af\u4e0a\uff1f\n\n\u662f\u4e0d\u662f\u7b80\u5355\u591a\u4e86\uff1f\n\n## \u3010Part 3\u3011 \u8ba8\u8bba\u505a\u6cd5\n\n\u90a3\u600e\u4e48\u6c42\u51fa\u6709\u591a\u5c11\u4e2a\u8282\u70b9\u5728\u73af\u4e0a\u5462\uff1f\u5bf9\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u3010\u62d3\u6251\u6392\u5e8f\u3011\u3002\n\n\u6211\u4eec\u5b58\u50a8\u6bcf\u4e00\u4e2a\u70b9\u7684\u5165\u5ea6\uff0c\u7136\u540e\u73b0\u5c06\u5165\u5ea6\u4e3a $0$ \u7684\u70b9\u653e\u5165\u961f\u5217\uff0c\u7528\u4e00\u4e2a $while$ \u5faa\u73af\uff0c\u53ea\u8981\u961f\u5217\u4e0d\u4e3a\u7a7a\uff0c\u5c31\u5c06\u53d6\u51fa\u6765\u7684\u8282\u70b9\u6240\u6307\u5411\u7684\u5ea7\u6905\u7684\u5165\u5ea6 $-1$\u3002\u6700\u7ec8\u5165\u5ea6\u4f9d\u7136\u4e0d\u4e3a $0$ \u7684\u8282\u70b9\u5373\u4e3a\u73af\u4e0a\u7684\u70b9\u3002\n\n\u4e3a\u4ec0\u4e48\u8fd9\u6837\u6b63\u786e\uff1f\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\uff0c\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u4e0d\u5728\u73af\u4e0a\uff0c\u90a3\u4e48\u5b83\u88ab\u6307\u5411\u7684\u8282\u70b9\u4e5f\u4e00\u5b9a\u4e0d\u5728\u73af\u4e0a\uff0c\u6240\u4ee5\u8bf4\u8fd9\u6761\u94fe\u7684\u8d77\u70b9\u5165\u5ea6\u4e00\u5b9a\u4e3a $0$\uff0c\u6700\u7ec8\uff0c\u6cbf\u7740\u8fd9\u6761\u94fe\uff0c\u6211\u4eec\u4e00\u5b9a\u4e5f\u53ef\u4ee5\u5c06\u8be5\u8282\u70b9\u53d8\u6210 $0$\u3002\u800c\u5982\u679c\u51e0\u4e2a\u8282\u70b9\u5728\u4e00\u4e2a\u73af\u4e0a\uff0c\u90a3\u4e48\u4ed6\u4eec\u5c31\u4e0d\u4f1a\u6709\u4efb\u4f55\u4e00\u4e2a\u8282\u70b9\u7684\u5165\u5ea6\u521a\u5f00\u59cb\u4e3a $0$\uff0c\u6240\u4ee5\u6700\u7ec8\u73af\u4e0a\u7684\u70b9\u4e00\u5b9a\u4f1a\u4fdd\u8bc1\u5165\u5ea6\u4e0d\u4e3a $0$\u3002 ~~\u6709\u4e00\u79cd\u94fe\u4e0a\u4e00\u4eba\u72af\u9519\u5c31\u4f1a\u88ab\u4e00\u9505\u7aef\u7684\u611f\u89c9\u3002~~\n## \u3010Part 4\u3011 AC\u4ee3\u7801\u53ca\u6ce8\u91ca\n\n```cpp\n#include<cstdio>\n#include<queue>\nusing namespace std;\nint n,a[100005],ans,in[100005];\nqueue<int> q;\nint read(){\n\tint w=0;\n\tchar c=getchar();\n\twhile (c>'9'||c<'0') c=getchar();\n\twhile (c>='0'&&c<='9'){\n\t\tw=(w<<3)+(w<<1)+(c^48);\n\t\tc=getchar();\n\t}\n\treturn w;\n}\nint main(){\n\tn=read();//\u8bfb\u5165\n\tfor(int i=1;i<=n;i++)\n\t\tin[(a[i]=read())]++;//\u5904\u7406\u521d\u59cb\u5165\u5ea6\n\tfor(int i=1;i<=n;i++)\n\t\tif(in[i]==0) q.push(i); //\u5c06\u5165\u5ea6\u4e3a0\u7684\u70b9\u653e\u5165\u961f\u5217\n\twhile(!q.empty()){\n\t\tint now=q.front();//\u4e0d\u65ad\u53d6\u51fa\u5165\u5ea6\u4e3a0\u8282\u70b9\n\t\tq.pop();\n\t\tin[a[now]]--;//\u5c06\u5b83\u6307\u5411\u7684\u8282\u70b9\u5165\u5ea6-1\n\t\tif(!in[a[now]]) q.push(a[now]);//\u5982\u679c\u5165\u5ea6\u4e3a0\u4e86\uff0c\u7ee7\u7eed\u653e\u5165\u961f\u5217\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(in[i]) ans++;//\u6700\u7ec8\u5165\u5ea6\u4e0d\u4e3a0\u7684\u70b9\u8bf4\u660e\u5728\u73af\u4e0a\n\tprintf(\"%d\\n\",ans);\n    return 0;\n}\n```\n\n**\u8c22\u8c22\u5927\u5bb6\u7684\u89c2\u770b\uff01**",
        "postTime": 1596517166,
        "uid": 257621,
        "name": "\u7ffc\u5fb7\u5929\u5c0a",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4089 \u3010[USACO17DEC]The Bovine Shuffle S\u3011"
    },
    {
        "content": "~~\u60ca\u5947\u5730\u53d1\u73b0\u8fd9\u9898\u5c45\u7136\u8fd8\u80fd\u63d0\u4ea4\u9898\u89e3\u3002\u3002~~\n\n1. \u9898\u610f\uff1a $n$ \u5934\u5976\u725b\uff0c\u5f00\u59cb\u65f6\u7b2c $i$ \u5934\u7ad9\u5728 $i$ \u4f4d\u7f6e\uff0c\u968f\u540e\u6bcf\u6b21\u53d8\u6362\u7ad9\u5728 $i$ \u4f4d\u7f6e\u4e0a\u7684\u5976\u725b\u4f1a\u6362\u5230 $a_i$ \u7684\u4f4d\u7f6e\u3002\u95ee\u7684\u662f\u5bf9\u4e8e\u6240\u6709\u7684 $i \\in n$\uff0c\u6709\u591a\u5c11\u4e2a\u4f4d\u7f6e\u59cb\u7ec8\u6709\u5976\u725b\u3002\n\n2. \u601d\u8def\uff1a\u5982\u679c\u8003\u8651\u7528\u56fe\u7684\u65b9\u5f0f\u6765\u5b58\uff0c\u90a3\u4e48\u8fd9\u4e2a\u56fe\u662f\u4e2a\u6709\u5411\u56fe\uff0c\u4e14\u6bcf\u4e2a\u70b9 $u$ **\u6709\u4e14\u4ec5\u6709 $1$ \u4e2a\u540e\u4ee3** $v$ \uff0c\u5373\u6307\u5411 $v$ \u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u56fe\u4e2d\u5b58\u5728\u73af\uff0c\u5219\u5728\u73af\u4e0a\u6bcf\u4e2a\u70b9\u7684\u5976\u725b\u600e\u4e48\u4e5f\u62d0\u4e0d\u51fa\u53bb\uff0c\u5c31\u4f1a\u51fa\u73b0\u60c5\u51b5\uff1a\u73af\u4e0a\u7684\u6bcf\u4e2a\u70b9\u603b\u662f\u6709\u5976\u725b\u7684\u3002\u7b54\u6848\u5373\u662f\u6240\u6709\u73af\u4e0a\u70b9\u7684\u4e2a\u6570\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7528\u62d3\u6251\u6392\u5e8f\u6765\u89e3\u51b3\uff0c\u770b\u5230\u5df2\u7ecf\u6709\u5f88\u591a\u62d3\u6251\u7684\u9898\u89e3\u4e86\uff0c\u5728\u8fd9\u91cc\u5c31\u4ecb\u7ecd\u4e00\u4e0b\u73af\u5957\u6811\u7684\u505a\u6cd5\u3002\n\n3. \u7b97\u6cd5\uff1a\u5148\u5efa\u7acb\u4e00\u4e2a\u6570\u7ec4 pre \uff0c\u7528\u6765\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u88ab\u8bbf\u95ee\u7684\u65f6\u95f4\u6233\uff0c\u5373 Dt (Dfstime) \u3002\u6bcf\u6b21\u8bbf\u95ee\u5230\u4e00\u4e2a\u70b9\u65f6\uff0c ++Dt \uff0c\u5e76\u628a pre \u91cc\u70b9\u7684\u4f4d\u7f6e\u8bbe\u4e3a Dt \u3002\u8fd9\u6837\u8bbf\u95ee\u8fc7\u7684\u70b9\u5c31\u90fd\u6709\u503c\uff0c\u53cd\u4e4b\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\u7684\u70b9\u5c31\u6ca1\u6709\u503c\u3002\u5f53\u5728 dfs \u7684\u65f6\u53d1\u73b0\u4ed6\u7684\u5b50\u8282\u70b9\u5df2\u7ecf\u88ab\u8bbf\u95ee\u8fc7\u4e86\uff0c\u5219\u8bf4\u660e\u51fa\u73b0\u73af\u4e86\u3002\u73b0\u5728\u7684\u70b9 $u$ \u5230\u5b50\u8282\u70b9 $v$ \u7684\u8fb9 $(u,v)$ \uff0c\u73af\u4e0a\u70b9\u7684\u4e2a\u6570\u5c31\u662f $pre_u-pre_v+1$ \u3002\u628a\u6240\u6709\u73af\u7684\u7ed3\u679c\u52a0\u8d77\u6765\u5c31\u662f\u7b54\u6848\u3002\n\n4. \u4ee3\u7801\uff1a\u5148\u5faa\u73af\u904d\u5386\u6bcf\u4e00\u4e2a\u70b9\uff0c\u5982\u679c\u8fd9\u4e2a\u70b9\u7684 $pre_i$ \u503c\u4e3a $0$ \uff0c\u5c31\u5f00\u59cb\u4e00\u6b21\u65b0\u7684\u904d\u5386\u3002\u7531\u4e8e\u6bcf\u6b21\u904d\u5386\u989c\u8272\u8981\u4e0d\u540c\uff0c\u904d\u5386\u524d\u8981\u628a\u989c\u8272\u52a0 $1$ \u3002 dfs \u7684\u65f6\u5019\u628a\u70b9\u7684\u65f6\u95f4\u6233\u548c\u989c\u8272\u6807\u597d\u3002\u5982\u679c\u540e\u4ee3\u8282\u70b9\u672a\u88ab\u904d\u5386\uff0c\u9012\u5f52\u904d\u5386\uff1b\u53cd\u4e4b\u5224\u65ad\u5982\u679c\u5f53\u524d\u8282\u70b9\u7684\u989c\u8272\u548c\u5b50\u8282\u70b9\u7684\u989c\u8272\u76f8\u540c\uff0c\u8bf4\u660e\u4e24\u4e2a\u70b9\u5728\u4e00\u4e2a\u73af\u4e0a\uff0c\u5c31\u7d2f\u8ba1\u7b54\u6848\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint n,Dt=0,Dc=0,ans=0;\nint nxt[100001],pre[100001],clr[100001];\nvoid dfs(int now){\n\tpre[now]=++Dt,clr[now]=Dc;\n\tif(pre[nxt[now]]==0){\n\t\tdfs(nxt[now]);\n\t}\n\telse if(clr[now]==clr[nxt[now]]){\n\t\tans+=pre[now]-pre[nxt[now]]+1;\n\t}\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&nxt[i]);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tif(pre[i]==0){\n\t\t\tDc++,dfs(i);//\u4e00\u5b9a\u8981\u6ce8\u610f\u662f\u6bcf\u6b21\u67d3\u8272\u540e Dc++ \uff0c\u800c\u4e0d\u662f\u627e\u5230\u73af\u540e Dc++ \n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1643290284,
        "uid": 523484,
        "name": "whyAreYouUsingInt",
        "ccfLevel": 5,
        "title": "P4089 The Bovine Shuffle \u9898\u89e3"
    },
    {
        "content": "## \u5206\u6790\u9898\u76ee\n\u9898\u610f\u63d0\u70bc\u540e\u5c31\u662f\uff1a\u628a\u9898\u76ee\u4e2d\u7ed9\u51fa\u7684\u4f4d\u7f6e\u5173\u7cfb\u5efa\u6210\u4e00\u4e2a\u56fe\uff0c\u7136\u540e\u627e\u51fa\u5176\u4e2d**\u5728\u73af\u4e0a\u7684\u70b9\u7684\u4e2a\u6570**\u3002\n\n\u5982\u6837\u4f8b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/kei5df2w.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u70b9 1\uff0c3 \u5728\u4e00\u4e2a\u73af\u4e0a\uff1b\u70b9 2 \u5728\u4e00\u4e2a\u73af\u4e0a\u3002\u5171\u6709 3 \u4e2a\u70b9\u5728\u73af\u4e0a\u3002\n\n\u56e0\u4e3a\u5728 `DAG` \u4e0a\u7684\u70b9\u4e00\u5b9a\u4e0d\u5728\u73af\u4e0a\uff08\u5e9f\u8bdd\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5**\u7528\u62d3\u6251\u6392\u5e8f\u6570\u51fa\u4e0d\u5728\u73af\u4e0a\u7684\u70b9\u7684\u4e2a\u6570**\uff0c\u7136\u540e\u7528\u56fe\u4e0a\u70b9\u7684\u603b\u6570\u51cf\u53bb\u4e0d\u5728\u73af\u4e0a\u7684\u70b9\u7684\u4e2a\u6570\u5373\u53ef\u6c42\u51fa\u7b54\u6848\u3002\n\n## \u4ee3\u7801\u5b9e\u73b0\n\u62d3\u6251\u6392\u5e8f\u6a21\u677f\n```cpp\nvoid tpsort(){\n\tfor(int i=1;i<=n;i++)\n\t\tif(!in[i]){  //\u4ece\u5165\u5ea6\u4e3a0\u7684\u70b9\u5f00\u59cb\u904d\u5386\n\t\t\tq.push(i);\n\t\t\t++res;\n\t\t}\n\twhile(!q.empty()){\n\t\tint t=q.front();\n\t\tq.pop();\n\t\t//\u8fd9\u4e2a\u70b9\u80fd\u88ab\u53d6\u51fa\u6765\u662f\u56e0\u4e3a\u5b83\u5c11\u4e86\u4e00\u4e2a\u901a\u5411\u5b83\u7684\u8282\u70b9,\u6545\u5165\u5ea6\u51cf\u4e00 \n\t\t--in[a[t]];   \n\t\tif(!in[a[t]]){  //\u7ee7\u7eed\u904d\u5386\u5165\u5ea6\u4e3a0\u7684\u70b9 \n\t\t\t++res;\n\t\t\tq.push(a[t]);\n\t\t}\n\t}\n}\n```\n\n\u5b8c\u6574\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=100004;\nint n,res,a[maxn],in[maxn];\nqueue < int > q;\n\nvoid tpsort(){\n\tfor(int i=1;i<=n;i++)\n\t\tif(!in[i]){  //\u4ece\u5165\u5ea6\u4e3a0\u7684\u70b9\u5f00\u59cb\u904d\u5386\n\t\t\tq.push(i);\n\t\t\t++res;\n\t\t}\n\twhile(!q.empty()){\n\t\tint t=q.front();\n\t\tq.pop();\n\t\t//\u8fd9\u4e2a\u70b9\u80fd\u88ab\u53d6\u51fa\u6765\u662f\u56e0\u4e3a\u5b83\u5c11\u4e86\u4e00\u4e2a\u901a\u5411\u5b83\u7684\u8282\u70b9,\u6545\u5165\u5ea6\u51cf\u4e00 \n\t\t--in[a[t]];   \n\t\tif(!in[a[t]]){  //\u7ee7\u7eed\u904d\u5386\u5165\u5ea6\u4e3a0\u7684\u70b9 \n\t\t\t++res;\n\t\t\tq.push(a[t]);\n\t\t}\n\t}\n}\n\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\t++in[a[i]];  //\u8bb0\u5f55\u5165\u5ea6 \n\t}\n\ttpsort();\n\tprintf(\"%d\",n-res);\n\treturn 0;\n}\n```",
        "postTime": 1596501314,
        "uid": 289944,
        "name": "Na2PtCl6",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P4089 \u3010[USACO17DEC]The Bovine Shuffle S\u3011"
    },
    {
        "content": "## Tarjan\u7f29\u70b9\n\u6839\u636e\u9898\u610f \u627e\u73af\n\n\u7f29\u5b8c\u70b9\u540e \u679a\u4e3e\u70b9  \u628a\u81ea\u73af\u7edf\u8ba1\u4e3a\u4e00  \u7edf\u8ba1scc_size>1\u7684\n\n\u5c06\u7b54\u6848\u52a0\u4e0a\u8be5scc\u7684size\u5373\u53ef\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mN=100100;\nint dfn[mN], low[mN], dfncnt, s[mN], tp, head[mN],ans;\nstruct edge\n{\n\tint t,nex,fr;\n}e[0x3f3f3f],ed[0x3f3f3f];\nint h[100100],N;\nvoid add(int x,int y)\n{\n\te[++N].t=y;\n\te[N].nex=head[x];\n\te[N].fr=x;\n\thead[x]=N;\n}\nint poi[10010];\nint scc[mN], sc ,sz[mN]; \nvoid tarjan(int u) \n{\n\tlow[u] = dfn[u] = ++dfncnt, s[++tp] = u;\n\tfor (int i = head[u]; i; i = e[i].nex) \n\t{\n\t\tconst int &v = e[i].t;\n\t\tif (!dfn[v]) tarjan(v), low[u] = min(low[u], low[v]);\n\t\telse if (!scc[v]) low[u] = min(low[u], dfn[v]);\n\t}\n\tif (dfn[u] == low[u]) \n\t{\n//\t\tans++;\n//\t\tfir[ans] = u;\n\t\twhile (s[tp] != u) scc[s[tp]] = u, sz[u]++, --tp;\n\t\tscc[s[tp]] = u,sz[u]++,--tp;\t\n\t}\n}\nint n,m;\nint si,a[100100];\nint main()\n{\n//z\tfreopen(\"A.in\",\"r\",stdin);\n//\tfreopen(\"B.out\",\"w\",stdout);\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint x;\n\t\tcin>>x;\n\t\ta[i]=x;\n\t\tadd(i,x);\n\t}\n\tfor (int i=1;i<=n;i++)\n    if (!dfn[i]) tarjan(i);\n    int cnt=0;\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\tif(sz[i] > 1) cnt += sz[i];\n\t\tif(sz[i] == 1 && a[i] == scc[i]) cnt++;\n\t}\n\tcout<<cnt;\n}\n```\n",
        "postTime": 1571312899,
        "uid": 58064,
        "name": "COUPDETAT",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4089 \u3010[USACO17DEC]The Bovine Shuffle\u3011"
    },
    {
        "content": "\u5176\u5b9e\u6709\u4e00\u79cd\u5f88\u66b4\u529b\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u6a21\u62df\u3002\n\n\u628a\u6574\u4e2a\u8fc7\u7a0b\u6a21\u62df\u4e0a\u4e00\u5b9a\u6b21\u6570\uff0c\u7136\u540e\u5224\u65ad\u5404\u4e2a\u4f4d\u7f6e\u4e0a\u662f\u5426\u6709\u5976\u725b\u5373\u53ef\u3002\n\n~~\uff08\u6211\u624d\u4e0d\u4f1a\u544a\u8bc9\u4f60\u4eec\uff0c\u8fd9\u4e2a\u771f\u7684\u8981\u9760RP\uff0c\u6a21\u62df\u6b21\u6570\u5c11\u4e86\u5bb9\u6613WA\uff0c\u6b21\u6570\u591a\u4e86\u4f1aTLE\uff09~~\n\n```cpp\n#include <stdio.h>\n#include <string.h>\nint a[100005],b[100005],c[100005];\nint main()\n{\n int n;\n scanf(\"%d\",&n);\n for(int i=1;i<=n;i++)\n  a[i]=1;\n for(int i=1;i<=n;i++)\n  scanf(\"%d\",&c[i]);\n for(int i=1;i<=500;i++)//\u8fd9\u4e2a\u5728\u6700\u6162\u7684\u70b9\u4e0a\u8dd1\u4e86328ms\n {\n  for(int i=1;i<=n;i++)\n   b[c[i]]+=a[i];\n  memset(a,0,sizeof(a));\n  for(int i=1;i<=n;i++)\n   a[c[i]]+=b[i];\n  memset(b,0,sizeof(b));\n }\n int ans=0;\n for(int i=1;i<=n;i++)\n  if(a[i])ans++;\n printf(\"%d\",ans);\n return 0;\n}\n```",
        "postTime": 1544004806,
        "uid": 22030,
        "name": "StudyingFather",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4089 \u3010[USACO17DEC]The Bovine Shuffle\u3011"
    },
    {
        "content": "SPFA\u8dd1\u73af(\u53cd\u6b63n\u6761\u8fb9n\u4e2a\u70b9\uff0c\u4e0d\u4f1a\u51fa\u73b0\u73af\u5957\u73af\u7684\u60c5\u51b5)\nans\u5c31\u662f\u6240\u6709\u73af\u7684\u603b\u957f\n\u4ee3\u7801\u5982\u4e0b\n\n```cpp\n#include <cstdio>\n#include <queue>\nusing namespace std;\nint n;\nint to[100001];\nint hea[100001];\nint nex[100001];\nint voi[100001];\nint al[100001];\nint gt;\nint ll;\nint ans;\nint q=0;\nqueue<int> rea;\nvoid bl(int u,int v){\n\tto[++ll]=v;nex[ll]=hea[u];hea[u]=ll;\n}\nvoid spfa(int nn,int np){//\u8dd1spfa,np\u8bb0\u5f55\u6df1\u5ea6\n\tvoi[nn]=np;\n\tal[nn]=q;\n\tfor(int w=hea[nn];nn;nn=nex[nn]){\n\t\tif(al[to[w]]==0||al[to[w]]==q){\n\t\t\t\tif(voi[to[w]]==0)spfa(to[w],np+1);\n\t\t\t\telse if(voi[to[w]]<=np)ans+=np-voi[to[w]]+1;\n\t\t}\n\t}\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int w=1;w<=n;w++){\n\t\tscanf(\"%d\",&gt);\n\t\tbl(w,gt);\n\t\trea.push(w);//\u5148push\n\t}\n\twhile(!rea.empty()){\n\t\twhile(!rea.empty()&&voi[rea.front()]!=0)rea.pop();//\u5224\u65ad\u4e00\u4e0b\u8fd9\u4e2a\u70b9\u662f\u5426\u8dd1\u8fc7\u4e86\uff0c\u5982\u679c\u8dd1\u8fc7\u4e86\u5c31\u5f39\u51fa\n\t\tif(!rea.empty()){\n\t\t\tq++;//\u4e0d\u662f\u4e00\u4e2a\u73af\u5c31\u4e0d\u7528\u7b97\u4e86\n\t\t\tspfa(rea.front(),1);\n\t\t\trea.pop();\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n}\n\n```",
        "postTime": 1530692995,
        "uid": 59630,
        "name": "NTG_Adiord",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4089 \u3010[USACO17DEC]The Bovine Shuffle\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5206\u6790\uff1a\n\n\u65e2\u7136\u9898\u76ee\u8981\u6c42\u7ecf\u8fc7\u65e0\u8bba\u591a\u5c11\u6b21\uff0c\u95ee\u81f3\u5c11\u59cb\u7ec8\u6709\u591a\u5c11\u70b9\u8fd8\u6709\u5976\u725b\u5728\u3002\u663e\u7136\uff0c\u9898\u76ee\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u79cd\u662f\u5927\u73af\uff0c\u90a3\u4e48\u5728\u8fd9\u4e2a\u73af\u4e0a\u7684\u5976\u725b\u4f1a\u4e0d\u65ad\u7ed5\u5708\uff08\u5305\u62ec\u81ea\u73af\uff09\uff0c\u65e0\u8bba\u5408\u9002\uff0c\u8fd9\u4e2a\u73af\u4e0a\u5976\u725b\u53ea\u589e\u4e0d\u51cf\u3002\u589e\u7684\u60c5\u51b5\u5c31\u662f\u6709\u4e9b\u8fb9\u6307\u5165\u8fd9\u4e2a\u73af\uff0c\u800c\u67d0\u53ea\u5976\u725b\u8fdb\u5165\u65f6\u8fd9\u4e2a\u70b9\u6070\u597d\u6ca1\u5976\u725b\u3002\u8fd9\u4e2a\u73af\u6570\u4e0a\u5976\u725b\u6570\u91cf\u5c31\u589e\u52a0\u4e86\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7ecf\u8fc7\u65e0\u9650\u591a\u6b21\uff0c\u6240\u6709\u975e\u73af\u8fb9\u7684\u5976\u725b\u90fd\u4f1a\u8fdb\u5165\u73af\u8fb9\uff0c\u8fd9\u6837\u5976\u725b\u6570\u5c31\u7a33\u5b9a\u4e0b\u6765\u3002\n\n\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u80fd\u5feb\u901f\u8df3\u8dc3\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6211\u8003\u8651\u4e86 st \u8868\uff0c\u7c7b\u4f3c\u6700\u8fd1\u516c\u5171\u7956\u5148\u7684\u8f6c\u79fb\u3002\u5373 $st_{i,j}$ \u8868\u793a $i$ \u70b9\u8df3 $2^{j}-1$ \u6b21\uff0c$st_{i,j}=st_{st_{i,j-1},j-1}$\u3002\n\n### \u4ee3\u7801\u5982\u4e0b\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n#define pd push_back\n#define all(x) x.begin(),x.end()\n#define Clear(x,n) for(int i=0;i<=n;i++)x[i]=0;\n//==============================================================================\nll QP(ll x,ll y,ll mod){ll ans=1;for(;y;y>>=1,x=x*x%mod)if(y&1)ans=ans*x%mod;return ans;}\n//==============================================================================\nnamespace IO{\n\tint readInt(){\n\t\tint x=0,y=0;char c=0;\n\t\twhile(!isdigit(c))y|=c=='-',c=getchar();\n\t\twhile(isdigit(c))x=(x<<3)+(x<<1)+(c^48),c=getchar();\n\t\treturn !y?x:-x;\n\t}\n\tvoid write(int x){if(!x)return;write(x/10);putchar(x%10);}\n\tvoid Output(int x){if(x<0)putchar('-'),x=-x;if(!x)putchar('0');else write(x);}\n\tvoid WL(int x){Output(x);putchar('\\n');}\n\tvoid WS(int x){Output(x);putchar(' ');}\n}\nnamespace Debug{\n\tvoid DeVec(vector<int> c){for(auto y:c)printf(\"%d \",y);puts(\"\");}\n\tvoid DeNum(int x){printf(\"%d\\n\",x);}\n}\n//==============================================================================\nconst int N=1e5+10;\nint st[N][40];\nint n;\nvector<int> a[N];\nint p[N];\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\t//std::ios::sync_with_stdio(false);\n    //std::cin.tie(nullptr);\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)scanf(\"%d\",&st[i][0]);\n    for(int j=1;j<=30;j++)\n    \tfor(int i=1;i<=n;i++)\n    \t\tst[i][j]=st[st[i][j-1]][j-1];\n    for(int i=1;i<=n;i++)\n    \tp[st[i][30]]++;\n    int ans=0;\n    for(int i=1;i<=n;i++)\n    \tans+=p[i]!=0;\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n\n```",
        "postTime": 1682642618,
        "uid": 167507,
        "name": "LHQing",
        "ccfLevel": 9,
        "title": "P4089 [USACO17DEC]The Bovine Shuffle S \u9898\u89e3"
    },
    {
        "content": "\u672c\u4eba\u6c34\u7684\u7b2c\u4e8c\u7bc7\u9898\u89e3\u54e6\uff0c\u5199\u7684\u4e0d\u597d\u8bf7\u6307\u51fa~\n\n------------\n### \u9898\u610f\uff1a\n\n\u4e00\u5171 $N$ \u5934\u725b\u548c $N$ \u4e2a\u4f4d\u7f6e\uff0c\u6bcf\u6b21\u4e0b\u6807 $i$ \u7684\u725b\u53bb\u5230 $r_i$ \u4f4d\u7f6e\u3002\u67d0\u4e9b\u4f4d\u7f6e\u7ecf\u8fc7\u65e0\u9650\u6b21\u64cd\u4f5c\u540e\u6c38\u8fdc\u6709\u725b\uff0c\u6c42\u51fa\u6240\u6709\u8fd9\u6837\u7684\u4f4d\u7f6e\u7684\u6570\u91cf\u3002\n\n### \u5206\u6790\uff1a\n\n\u8fd9\u9053\u9898\u53ef\u4ee5\u4ece\u5165\u5ea6\u548c\u51fa\u5ea6\u7684\u89d2\u5ea6\u6765\u601d\u8003\uff0c\u5c06\u6240\u6709\u725b\u8fdb\u5165\u5230\u4f4d\u7f6e $i$ \u7684\u6570\u91cf\u8bb0\u5f55\u4e3a $i$ \u7684\u5165\u5ea6\uff0c\u5165\u5ea6\u4e3a $0$ \u7684\u5219\u4e0d\u7b26\u5408\u8981\u6c42\u3002\u56e0\u4e3a\u6bcf\u4e2a\u4f4d\u7f6e\u8981\u4fdd\u8bc1\u6709\u725b\u5fc5\u987b\u6709\u725b\u8fdb\u5165\uff0c\u800c\u5f53\u67d0\u4e2a\u4f4d\u7f6e\u6ca1\u6709\u8fdb\u5165\u7684\u725b\u65f6\uff0c\u8fd9\u4e2a\u4f4d\u7f6e\u6700\u7ec8\u4e5f\u5c31\u4e0d\u6210\u7acb\uff0c\u5e76\u4e14\u8fd9\u4e2a\u4f4d\u7f6e\u53bb\u5230\u7684\u51fa\u5ea6\u70b9\u7684\u5165\u5ea6\u4e5f\u4f1a\u51cf\u5c11\u3002\u6700\u7ec8\u91cd\u590d\u5220\u70b9\u5269\u4f59\u7684\u6240\u6709\u70b9\u90fd\u5c06\u5f62\u6210\u4e2a\u73af\uff0c\u73af\u91cc\u70b9\u7684\u6570\u91cf\u5c31\u662f\u6700\u7ec8\u7b54\u6848\u3002\n\n### \u601d\u8def\uff1a\n\n\u8fd9\u5176\u5b9e\u5c31\u662f\u4e2a\u7b80\u5355\u7684\u62d3\u6251\u6392\u5e8f\uff0c\u6bcf\u6b21\u5220\u9664\u6240\u6709\u5165\u5ea6\u4e3a $0$ \u7684\u70b9\u5e76\u51cf\u53bb\u5bf9\u5e94\u70b9\u7684\u5165\u5ea6\uff0c\u52a0\u5165\u961f\u5217\u5e76\u91cd\u590d\u6b64\u64cd\u4f5c\u3002\u6700\u7ec8\u6c42\u51fa\u6240\u6709\u5165\u5ea6\u4e0d\u4e3a $0$ \u7684\u70b9\u7684\u6570\u91cf\u8f93\u51fa\u4e3a\u7b54\u6848\uff08\u672c\u4eba\u5176\u5b9e\u6ca1\u6709\u5b66\u8fc7\u771f\u6b63\u7684\u62d3\u6251\u6392\u5e8f\uff0c\u662f\u901a\u8fc7 BFS \u63a8\u51fa\u6765\u7684\uff09\u3002\n\n### \u4ee3\u7801:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,num[114514],cnt[114514],ans;//num\u50a8\u5b58\u6bcf\u4e2a\u70b9\u7684\u53bb\u5230\u7684\u5bf9\u5e94\u70b9\uff0ccnt\u50a8\u5b58\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\nint main(){\n\tcin >> n;\n\tfor(int i=1;i<=n;i++)\n\t\tcin >> num[i],cnt[num[i]]++;//\u4fdd\u5b58\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\n\tqueue<int>q;\n\tfor(int i=1;i<=n;i++)\n\t\tif(!cnt[i])q.push(i);//\u5c06\u5165\u5ea6\u4e3a0\u7684\u70b9\u52a0\u5165\u961f\u5217\n\twhile(!q.empty()){\n\t\tint t=q.front();\n\t\tq.pop();\n\t\tcnt[num[t]]--;//\u5c06\u6bcf\u4e2a\u5bf9\u5e94\u70b9\u7684\u5165\u5ea6-1\uff0c\u5e76\u67e5\u627e\u8fd9\u4e2a\u70b9\u662f\u5426\u6709\u5165\u5ea6\n\t\tif(!cnt[num[t]])q.push(num[t]);//\u5982\u679c\u6709\u5219\u7ee7\u7eed\u52a0\u5165\u961f\u5217\uff0c\u91cd\u590d\u6b64\u64cd\u4f5c\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(cnt[i]!=0)ans++;//\u6700\u7ec8\u7b54\u6848\u4e3a\u6240\u6709\u5165\u5ea6\u4e0d\u4e3a0\u7684\u70b9\n\tcout << ans;\n} \n\n```\n",
        "postTime": 1667204283,
        "uid": 723188,
        "name": "xyhqsjkl",
        "ccfLevel": 0,
        "title": "P4089 \u9898\u89e3"
    },
    {
        "content": "#### \u9898\u76ee\uff1a\n[P4089](https://www.luogu.com.cn/problem/P4089)\n#### \u5206\u6790\uff1a\n\u6700\u5f00\u59cb\u60f3\u5230\u7684\u7b97\u6cd5\u80af\u5b9a\u662f\u66b4\u529b\uff0c\u4f46\u4e00\u770b\u6570\u636e\u8303\u56f4 $1 \\le N \\le 10^5$\uff0c\u80af\u5b9a\u8d85\u65f6\u3002\u8003\u8651\u628a\u725b\u4e4b\u95f4\u7684\u4f4d\u7f6e\u5173\u7cfb\u770b\u6210\u4e00\u5f20\u6709\u5411\u56fe\uff0c\u628a\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u770b\u6210\u4e00\u4e2a\u70b9\uff0c\u628a $a_i$ \u770b\u6210\u4ece $i$ \u5230 $a_i$ \u7684\u4e00\u6761\u6709\u5411\u8fb9\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u5982\u679c\u5b83\u7684\u5165\u5ea6\u4e3a $0$\uff0c\u4e5f\u5c31\u662f\u8bf4\u6ca1\u6709\u725b\u4f1a\u8f6c\u79fb\u5230\u8fd9\u4e2a\u70b9\u4e0a\uff0c\u90a3\u4e48\u8fd9\u4e2a\u4f4d\u7f6e\u4e0a\u4e0b\u4e00\u6b21 ```shuffle``` \u5fc5\u7136\u4e0d\u4f1a\u6709\u725b\u3002\u5982\u679c\u8fde\u63a5\u5230\u67d0\u4e2a\u70b9\u7684\u6240\u6709\u70b9\u5728\u7ecf\u8fc7\u4e00\u5b9a\u6b21\u6570\u7684 ```shuffle``` \u8fc7\u540e\u90fd\u4f1a\u88ab\u7a7a\u7f6e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u672a\u6765\u4e5f\u4e00\u5b9a\u4f1a\u88ab\u7a7a\u7f6e\u3002\u662f\u4e0d\u662f\u6709\u70b9\u7ed5\uff1f\u770b\u4e0b\u9762\u8fd9\u4e2a\u4f8b\u5b50\uff1a         \n\u8fd9\u662f\u4e00\u7ec4\u6837\u4f8b\uff1a\n```\n6\n6 1 1 2 2 3\n```\n\u8868\u793a\u5728\u56fe\u4e0a\u5c31\u662f\u8fd9\u6837\uff1a\n![](https://cdn.luogu.com.cn/upload/image_hosting/xf89rwu7.png)\n$4$\u3001$5$ \u4e24\u5934\u725b\u6240\u5728\u7684\u70b9\u7684\u5165\u5ea6\u4e3a\u96f6\uff0c\u4e00\u8f6e\u8fc7\u540e\u5c31\u7a7a\u4e86\uff0c\u90a3\u4e48\u56fe\u5c31\u53d8\u6210\u4e86\u8fd9\u6837\uff1a\n![](https://cdn.luogu.com.cn/upload/image_hosting/1aki2oou.png)\n$4$\u3001$5$ \u4e24\u5934\u725b\u6b64\u65f6\u6240\u5728\u7684\u70b9\u867d\u7136\u5f00\u59cb\u65f6\u5165\u5ea6\u4e0d\u4e3a $0$\uff0c\u4f46\u8fde\u63a5\u5230\u5b83\u7684\u6240\u6709\u70b9\u5728\u7ecf\u8fc7\u4e00\u6b21\u7684 ```shuffle``` \u8fc7\u540e\u90fd\u88ab\u7a7a\u7f6e\u4e86\uff0c\u56e0\u6b64\u6b64\u65f6\u5b83\u7684\u5165\u5ea6\u4e5f\u53d8\u6210\u4e86 $0$\uff0c\u4e0b\u4e00\u8f6e\u8fc7\u540e\u5c31\u7a7a\u4e86\uff0c\u5982\u56fe\uff1a\n![](https://cdn.luogu.com.cn/upload/image_hosting/r4a0vsfm.png)\n\u800c\u53f3\u4fa7\u7684\u4e09\u4e2a\u70b9\u5f62\u6210\u4e86\u4e00\u4e2a\u73af\uff0c\u5165\u5ea6\u4e00\u76f4\u5927\u4e8e $0$\uff0c\u4e0a\u9762\u4e00\u76f4\u6709\u725b\uff0c\u6240\u4ee5\u8fd9\u7ec4\u6837\u4f8b\u7684\u7b54\u6848\u5c31\u662f $3$\u3002         \n\u7ecf\u8fc7\u4e00\u6b21\u6a21\u62df\uff0c\u6211\u4eec\u5f97\u51fa\u4e86\u4e00\u4e2a\u7ed3\u8bba\uff1a\u5982\u679c\u4e00\u4e2a\u70b9\u4e0a\u6c38\u4e45\u5b58\u5728\u725b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u6ee1\u8db3\u6240\u6709\u6307\u5411\u5b83\u7684\u70b9\u4e2d\uff0c\u81f3\u5c11\u6709\u4e00\u4e2a\u70b9\u4e0a\u6c38\u4e45\u5b58\u5728\u725b\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5c31\u662f\u8fd9\u4e2a\u70b9\u5904\u5728\u4e00\u4e2a\u73af\u4e2d\u3002       \n\u6240\u4ee5\uff0c\u95ee\u9898\u5c31\u8f6c\u6362\u6210\u4e86\u6c42\u51fa\u5904\u5728\u73af\u4e4b\u4e2d\u7684\u70b9\u7684\u4e2a\u6570\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u62d3\u6251\u6392\u5e8f\u5224\u65ad\u73af\u5c31\u53ef\u4ee5\u641e\u5b9a\u3002\u6709\u4e0d\u61c2\u62d3\u6251\u6392\u5e8f\u7684\u540c\u5b66\u53ef\u4ee5\u770b\u5176\u4ed6\u51e0\u7bc7\u9898\u89e3\uff0c\u6211\u5c31\u4e0d\u8fc7\u591a\u9610\u8ff0\u4e86\u3002\n#### \u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,x;\nint ans;\nint a[500000];\nint s[500000];\nqueue<int> q;\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n    \tscanf(\"%d\",&a[i]);\n    \ts[a[i]]++;    //\u8ba1\u7b97\u5165\u5ea6\n\t}\n\tfor(int i=1;i<=n;i++)\n\t    if(!s[i]) q.push(i);     //\u5148\u628a\u5165\u5ea6\u4e3a0\u7684\u8282\u70b9\u653e\u5165\u961f\u5217\n\twhile(!q.empty())\n\t{\n\t\tx=q.front();        //\u4ece\u961f\u5217\u4e2d\u53d6\u51fa\u4e00\u4e2a\u8282\u70b9\n\t\tq.pop();\n\t    if(s[a[x]]>0)\n\t    {\n\t    \ts[a[x]]--;        //\u5c06\u8fd9\u4e2a\u8282\u70b9\u6307\u5411\u7684\u8282\u70b9\u5165\u5ea6\u51cf\u4e00\n\t    \tif(!s[a[x]]) q.push(a[x]);  //\u5982\u679c\u5165\u5ea6\u53d8\u4e3a\u96f6\uff0c\u653e\u5165\u961f\u5217\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(s[i])\n\t\t\tans++;      //\u7edf\u8ba1\u5165\u5ea6\u4e0d\u4e3a0\u7684\u70b9\u6570\uff08\u4e5f\u5c31\u662f\u5904\u5728\u73af\u4e2d\u7684\u70b9\u7684\u4e2a\u6570\uff09\n\tprintf(\"%d\\n\",ans);\t\t\t\n\treturn 0;\n}\n```",
        "postTime": 1658227514,
        "uid": 347621,
        "name": "_Sushi",
        "ccfLevel": 5,
        "title": "[USACO17DEC]The Bovine Shuffle S \u9898\u89e3"
    },
    {
        "content": "## [\u6d1b\u8c37\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P4089)\n## \u601d\u8def\n\u5982\u679c\u4e00\u4e2a\u4f4d\u7f6e\u4e0d\u4f1a\u88ab\u4efb\u4f55\u4f4d\u7f6e\u5230\u8fbe\uff0c\u90a3\u4e48\u4e00\u8f6e\u64cd\u4f5c\u540e\u5b83\u4e0a\u9762\u5c31\u6ca1\u6709\u5976\u725b\u4e86\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u4f4d\u7f6e\u5220\u9664\u3002\n\n\u7136\u540e\u4e0d\u65ad\u91cd\u590d\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u5269\u4e0b\u7684\u4f4d\u7f6e\u4e0a\u5c31\u662f\u59cb\u7ec8\u6709\u5976\u725b\u7684\u3002\n\n\u5bf9\u4e0a\u8ff0\u53d1\u73b0\u8fdb\u884c\u4e0b\u5f52\u7eb3\uff0c\u5c31\u662f\u53ea\u6709\u73af\u4e0a\u59cb\u7ec8\u6709\u5976\u725b\u3002\n\n\u7531\u4e8e\u6bcf\u4e2a\u4f4d\u7f6e\u53ea\u4f1a\u5230\u8fbe\u53e6\u5916\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u6240\u4ee5\u4e0d\u4f1a\u6709\u4e24\u4e2a\u70b9\u540c\u65f6\u5c5e\u4e8e\u4e00\u4e2a\u73af\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ea\u8981\u627e\u5230\u6240\u6709\u7684\u73af\u5373\u53ef\u3002\n\n\u53ef\u4ee5\u4f9d\u6b21\u4ece\u6bcf\u4e2a\u70b9\u51fa\u53d1\u53bb\u5bfb\u627e\u73af\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff0c\u9047\u5230\u5df2\u7ecf\u627e\u8fc7\u7684\u70b9\u5219\u505c\u6b62\u3002\n\n## \u590d\u6742\u5ea6\u5206\u6790\n### \u65f6\u95f4\u590d\u6742\u5ea6\n\u6bcf\u4e2a\u70b9\u53ea\u4f1a\u627e\u4e00\u6b21\uff0c\u603b\u5171$O(N)$ \u3002\n### \u7a7a\u95f4\u590d\u6742\u5ea6\n\u6807\u8bb0\u73af$O(N)$ \u3002\n## $code$\n~~~cpp\n#include <cstdio>\n#include <iostream>\n\nusing namespace std;\n\nconst int kMaxN = 1e5 + 1;\n\nint a[kMaxN], b[kMaxN], s[kMaxN];\nint n, p, ans;\n\nvoid S(int x) {  // \u641c\u7d22\u5230x\n  if (s[x]) {    // x\u5df2\u7ecf\u5728\u6808\u4e2d\uff0c\u627e\u5230\u73af\n    p = x;       // \u8bb0\u5f55\u73af\u7684\u8d77\u70b9\n    return;\n  }\n  if (!b[x]) {        // \u5f53\u524d\u70b9\u6ca1\u6709\u5230\u8fbe\u8fc7\u624d\u5904\u7406\n    b[x] = s[x] = 1;  // \u6807\u8bb0\u5230\u8fbe\u3001\u6807\u8bb0\u5165\u6808\n    S(a[x]);          // \u641c\u7d22\u4e0b\u4e00\u4e2a\u70b9\n    s[x] = 0;         // \u6807\u8bb0\u51fa\u6808\n    ans += p != 0;    // \u627e\u5230\u73af\u4e14\u8fd8\u5728\u73af\u4e2d\n    if (p == x) {     // \u5230\u8fbe\u8d77\u59cb\u70b9\uff0c\u79bb\u5f00\u73af\n      p = 0;\n    }\n  }\n}\n\nint main() {\n  cin >> n;\n  for (int i = 1; i <= n; i++) {\n    cin >> a[i];\n  }\n  for (int i = 1; i <= n; i++) {  // \u679a\u4e3e\u70b9\n    S(i);                         // \u627e\u73af\n  }\n  cout << ans;\n  return 0;\n}\n\n~~~",
        "postTime": 1622357913,
        "uid": 392856,
        "name": "\u4fe1\u5b88\u5929\u4e0b",
        "ccfLevel": 5,
        "title": "\u9898\u89e3P4089\u3010[USACO17DEC]The Bovine Shuffle S\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\u7ed9\u5b9a\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u5224\u65ad\u8fd9\u4e2a\u56fe\u4e2d\u6240\u6709\u73af\u4e0a\u7684\u70b9\u7684\u6570\u91cf\u3002\n### \u5206\u6790\u505a\u6cd5\n\u7b2c\u4e00\u773c\u770b\u5230\u8fd9\u4e2a\u9898\u76ee\uff0c\u5c31\u5927\u6982\u80fd\u8054\u60f3\u5230\u662f\u4e2a\u56fe\u8bba\u9898\uff1b\u4f46\u662f\u6b63\u89e3\u7684\u62d3\u6251\u6392\u5e8f\u5bf9\u4e8e\u6211\u8fd9\u6837\u7684\u849f\u84bb\u6765\u8bf4\u53c8\u5f88\u96be\u5728\u8003\u573a\u4e0a\u60f3\u5230\u3002\u6240\u4ee5\uff0c\u8003\u8651\u7528\u6bd4\u8f83\u66b4\u529b\u7684\u65b9\u6cd5\u5224\u65ad\u73af\u3002  \n#### 1.\u7eaf\u66b4\u529b\u505a\u6cd5  \n\u7528 for \u5faa\u73af + while \u5faa\u73af\u7684\u65b9\u5f0f\uff0c\u5148\u7528 for \u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u518d\u7528 while \u6a21\u62df\u6bcf\u4e00\u4e2a\u70b9\u4e0a\u7684\u725b\u5c06\u4f1a\u600e\u6837\u884c\u52a8\uff0c\u5982\u679c\u5230\u4e86\u4ee5\u524d\u5230\u8fc7\u7684\u70b9\uff0c\u90a3\u4e48\u8fd9\u6bb5\u533a\u95f4\u7684\u70b9\uff08\u4ee5\u524d\u5230\u8fc7\u7684\u8fd9\u4e2a\u70b9\u5230\u73b0\u5728\u5230\u7684\u8fd9\u4e2a\u70b9\uff09\u5c31\u90fd\u5728\u73af\u5185\uff0c\u8fdb\u884c\u6807\u8bb0\u3002\u6700\u540e\u518d\u7edf\u8ba1\u4e00\u4e0b\u6807\u8bb0\u7684\u70b9\u7684\u4e2a\u6570\u3002  \n\u8054\u7cfb\u6837\u4f8b\u6765\u7406\u89e3\uff1a  \n```plain\n4\n3 2 1 3\n```\n$1$ \u7684\u884c\u52a8\u8fc7\u7a0b\uff1a$1\\to3\\to1$  \n\u5219\u5c06 $1,3 $\u6807\u8bb0\u4e3a\u73af  \n$2$ \u7684\u884c\u52a8\u8fc7\u7a0b\uff1a$2\\to2$  \n\u5219\u5c06 $2$ \u6807\u8bb0\u4e3a\u73af  \n$3$ \u7684\u884c\u52a8\u8fc7\u7a0b\uff1a$3\\to1\\to3$  \n\u5219\u5c06 $3,1$ \u6807\u8bb0\u4e3a\u73af  \n$4$ \u7684\u884c\u52a8\u8fc7\u7a0b\uff1a$4\\to3\\to1\\to3$  \n\u5219\u5c06 $3,1$ \u6807\u8bb0\u4e3a\u73af  \n\u6240\u4ee5\u6700\u540e\u7684\u7b54\u6848\u4e3a $3$   \n#### 2.\u4f18\u5316\n\u89c2\u5bdf\u4e0a\u9762\u7684\u6837\u4f8b\u5206\u6790\u4e0d\u96be\u53d1\u73b0\uff0c\u82e5\u4e00\u4e2a\u70b9\u5df2\u7ecf\u5728\u73af\u5185\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u5c31\u4e0d\u9700\u8981\u518d\u4f7f\u7528 while \u518d\u8fdb\u884c\u91cd\u590d\u6807\u8bb0\u4e86\uff1b\u82e5\u4e00\u4e2a\u70b9\u5c06\u901a\u5f80\u4e00\u4e2a\u73af\u5185\u7684\u70b9\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u4e00\u5b9a\u4e0d\u5728\u4e00\u4e2a\u73af\u4e2d\u3002  \n\u8fd9\u6837\u4f18\u5316\u4e0b\u6765\uff0c\u6bcf\u4e2a\u70b9\u53ea\u4f1a\u88ab\u8fdb\u884c\u4e00\u6b21\u64cd\u4f5c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$ \u3002\n### \u4ee3\u7801  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n;\nint a[111111];\nint mark[111111];\nint mark2[111111];\nqueue<int>que;//\u4f7f\u7528\u961f\u5217\u5b9e\u73b0\u73af\u7684\u6807\u8bb0\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",a+i);\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(mark[i] || mark2[i])continue;//\u5982\u679c\u8fd9\u4e2a\u70b9\u88ab\u64cd\u4f5c\u8fc7\u4e86\uff08\u5728\u73af\u5185\u6216\u901a\u5411\u73af\uff09\n\t\tint k=i;\n\t\twhile(!que.empty())que.pop();//\u521d\u59cb\u5316\uff0c\u6e05\u7a7a\u961f\u5217\n\t\twhile(!mark[a[k]])//\u5728\u4e0b\u4e00\u4e2a\u70b9\u4e0d\u5728\u73af\u5185\u65f6\u6267\u884c\n\t\t{\n\t\t\tif(mark2[a[k]])//\u4e0b\u4e00\u4e2a\u70b9\u5df2\u7ecf\u88ab\u8d70\u8fc7\u4e86\n\t\t\t{\n\t\t\t\tint kkk=0;\n\t\t\t\twhile(!que.empty())\n\t\t\t\t{\n\t\t\t\t\tint kk=que.front();\n\t\t\t\t\tque.pop();\n\t\t\t\t\tif(kk==a[k])kkk=1;//\u4e0a\u4e00\u6b21\u5230\u8fbe\u8fd9\u4e2a\u70b9\u7684\u65f6\u5019\n\t\t\t\t\tif(kkk)mark[kk]=1;//\u5269\u4e0b\u7684\u70b9\u6807\u8bb0\u4e3a\u73af\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmark2[a[k]]=1;\n\t\t\tque.push(a[k]);\n\t\t\tk=a[k];\n\t\t}\n\t}\n\tint ans=0;\n\tfor(int i=1;i<=n;i++)if(mark[i])ans++;//\u7edf\u8ba1\u7b54\u6848\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1617772857,
        "uid": 290856,
        "name": "SzTC",
        "ccfLevel": 0,
        "title": "P4089 [USACO17DEC]The Bovine Shuffle S \u9898\u89e3"
    }
]
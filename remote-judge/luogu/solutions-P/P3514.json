[
    {
        "content": "\u5f88\u5de7\u5999\u7684\u601d\u7ef4\u9898\u3002\n\n\u9898\u610f\u662f\u8fd9\u6837\u7684\uff0c\u7ed9\u4f60\u4e00\u4e2a\u4e32\uff0c\u53ea\u6709 T \u548c W\u3002\u4ee4 T=2\uff0cW=1\uff0c\u5c06\u5176\u53d8\u6210\u6570\u5b57\u4e32\u3002\u7136\u540e\u6bcf\u6b21\u7ed9\u4e00\u4e2a $k$,\u95ee\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u5b50\u6bb5\u548c\u4e3a $k$\u3002\n\n## \u5224\u65ad\u662f\u5426\u6709\u89e3\n\n**\u91cd\u8981\u7ed3\u8bba1**\uff1a\u5982\u679c $k(k>2)$ \u53ef\u4ee5\uff0c$k-2$ \u4e5f\u53ef\u4ee5\u3002\n\n> \u8bc1\uff1a\u5047\u8bbe $[l,r]$ \u533a\u95f4\u7684\u548c\u662f $k$\u3002   \n  \u5982\u679c\u8fd9\u4e2a\u533a\u95f4\u7684\u4e24\u8fb9 \uff08$a[l]$\uff0c$a[r]$\uff09 \u4e2d\u6709\u4e00\u4e2a\u662f $2$\uff0c\u90a3\u4e48\u628a\u8fd9\u4e2a\u53bb\u6389 \uff08\u53d8\u6210 $l,r-1$ \u6216 $l+1,r$\uff09\uff0c\u90a3\u5c31\u6709 $k-2$\u4e86   \n  \u5426\u5219\u5b83\u4e24\u8fb9\u5c31\u90fd\u662f $1$\u3002\u628a\u4e24\u8fb9\u90fd\u53bb\u6389\uff0c\u90a3\u5c31\u6709 $k-2$ \u4e86\u3002\n  \u7efc\u4e0a\uff0c\u6211\u4eec\u4e00\u5b9a\u6709 $k-2$\u3002  \n  **\u8bc1\u6bd5**\n\n\u7136\u540e\u5c31\u597d\u505a\u4e86\uff1a\u627e\u5230\u6700\u5927\u7684\u5947\u6570\uff0c\u6700\u5927\u7684\u5076\u6570\uff1b\u5bf9\u4e8e\u5947\u6570\uff0c\u5224\u65ad\u5b83\u662f\u5426\u5c0f\u4e8e\u6700\u5927\u7684\u5947\u6570\uff0c\u5076\u6570\u540c\u7406\u3002\n\n\u5982\u4f55\u627e\u5230\u6700\u5927\u7684\u5947\u6570/\u5076\u6570\uff1f\n\n\u8bbe $S$ \u8868\u793a\u603b\u548c\uff0c$M_{0/1}$ \u8868\u793a\u6700\u5927\u7684\u5076\u6570/\u5947\u6570\u3002\n\n\u663e\u7136 $M_{S\\%2}=S$\n\n**\u91cd\u8981\u7ed3\u8bba2**\uff1a\u53ea\u8981\u679a\u4e3e\u5de6\u8fb9/\u53f3\u8fb9\u5220\u8fde\u7eed\u7684\u5c31\u884c\u3002\n\n> \u8bc1\uff1a \u5047\u8bbe\u6211\u4eec\u975e\u8981\u5220\u6389\u4e24\u8fb9\u624d\u80fd\u4f7f\u7b54\u6848\u6700\u4f18   \n  \u5982\u679c\u4e24\u8fb9\u4e2d\u6709\u4e00\u8fb9\u662f\u5076\u6570\uff0c\u90a3\u5076\u6570\u8fd9\u8fb9\u4e0d\u5220\uff0c\u80af\u5b9a\u66f4\u4f18   \n  \u5426\u5219\uff0c\u4e24\u8fb9\u90fd\u662f\u5947\u6570\u3002\u4e24\u8fb9\u90fd\u4e0d\u5220\uff0c\u80af\u5b9a\u66f4\u4f18   \n  \u6ce8\uff1a\u201c\u66f4\u4f18\u201d\u8868\u793a\u7684\u662f\uff0c\u6a21 $2$ \u4f59\u6570\u4e0d\u53d8\uff0c\u5e76\u4e14\u548c\u66f4\u5927   \n  **\u8bc1\u6bd5**\n\n## \u8f93\u51fa\u89e3\n\n\u8bbe $[l_k,r_k]$ \u8868\u793a\u548c\u4e3a $k$ \u7684\u533a\u95f4\u3002\n\n\u9996\u5148\uff0c$l_S=1,r_S=n$\n\n\u7136\u540e\uff0c\u6211\u4eec\u5728\u679a\u4e3e\u5220\u524d\u540e\uff0c\u6c42\u51fa $M_{0/1}$ \u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u987a\u4fbf\u628a\u533a\u95f4\u8bb0\u4e0b\u6765\uff0c\u8fd9\u6837\u5c31\u6709\u4e86 $k=M_{0/1}$ \u65f6\u7684\u7b54\u6848\u533a\u95f4\u4e86\u3002\n\n\u5bf9\u4e8e\u7b54\u6848\u533a\u95f4 $[l_k,r_k]$\uff0c\u53ef\u4ee5\u50cf \u201c\u5224\u65ad\u662f\u5426\u6709\u89e3\u201d \u4e00\u7ae0\u4e2d\uff0c**\u91cd\u8981\u7ed3\u8bba1** \u7684\u8bc1\u660e\u91cc\u9762\u4e00\u6837\uff0c\u679a\u4e3e\u5b83\u5de6\u8fb9/\u53f3\u8fb9\u662f $2$\uff0c\u6216\u8005\u4e24\u8fb9\u90fd\u662f $1$\uff0c\u63a8\u51fa $l_{k-2},r_{k-2}$\n\n\u7136\u540e\u5c31\u663e\u7136\u53ef\u4ee5\u63a8\u51fa\u6240\u6709\u7684\u7b54\u6848\u533a\u95f4\u4e86\u3002\n\n## simple \u7684\u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nnamespace Flandre_Scarlet\n{\n    #define N 4000006\n    #define F(i,l,r) for(int i=l;i<=r;++i)\n    #define D(i,r,l) for(int i=r;i>=l;--i)\n    #define Fs(i,l,r,c) for(int i=l;i<=r;c)\n    #define Ds(i,r,l,c) for(int i=r;i>=l;c)\n    #define MEM(x,a) memset(x,a,sizeof(x))\n    #define FK(x) MEM(x,0)\n    #define Tra(i,u) for(int i=G.Start(u),v=G.To(i);~i;i=G.Next(i),v=G.To(i))\n    #define p_b push_back\n    #define sz(a) ((int)a.size())\n    #define all(a) a.begin(),a.end()\n    #define iter(a,p) (a.begin()+p)\n    int I() {char c=getchar(); int x=0; int f=1; while(c<'0' or c>'9') f=(c=='-')?-1:1,c=getchar(); while(c>='0' and c<='9') x=(x<<1)+(x<<3)+(c^48),c=getchar(); return (x=(f==1)?x:-x);}\n    void Rd(int cnt,...) {va_list args;va_start(args,cnt); F(i,1,cnt) {int* x=va_arg(args,int*);(*x)=I();} va_end(args);}\n    void RA(int *a,int n) {int *p=(a+1); F(i,1,n) {(*p)=I();++p;}}\n    int n,m;\n    char ss[N]; int a[N];\n    void Input()\n    {\n        Rd(2,&n,&m); scanf(\"%s\",ss+1);\n        F(i,1,n) a[i]=(ss[i]=='T')?2:1;\n    }\n    int s[N];\n    int Max[2]; int l[N],r[N];\n    void up(int a,int ll,int rr)\n    {\n        if (a>Max[a%2]) {Max[a%2]=a; l[a]=ll; r[a]=rr; }\n    } \n    void get(int &l,int &r,int pl,int pr)\n    {\n        if (pl==0 and pr==0) return;\n        l=pl,r=pr;\n        if (a[pl]==2) ++l;\n        else if (a[pr]==2) --r;\n        else ++l,--r;\n    }\n    void Soviet()\n    {\n        F(i,1,n) s[i]=s[i-1]+a[i];\n        F(i,1,n-1) {up(s[n]-s[i],i+1,n); up(s[i],1,i);} up(s[n],1,n);\n        // \u679a\u4e3e\u5220\u5de6\u8fb9/\u53f3\u8fb9\uff0c\u4ee5\u53ca\u5168\u9009\n        D(i,2*n,1) get(l[i],r[i],l[i+2],r[i+2]);\n        // \u7ee7\u627f\n        F(i,1,m)\n        {\n            int k=I();\n            if (k>Max[k%2]) puts(\"NIE\");\n            else printf(\"%d %d\\n\",l[k],r[k]);\n        }\n    }\n    void IsMyWife()\n    {\n        Input();\n        Soviet();\n    }\n}\n#undef int //long long\nint main()\n{\n    Flandre_Scarlet::IsMyWife();\n    getchar();\n    return 0;\n}\n```",
        "postTime": 1598708839,
        "uid": 106252,
        "name": "LightningUZ",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "\u601d\u7ef4\u9898\u3002\n\n\u6211\u4eec\u60f3\u529e\u6cd5\u4ece\u5927\u5230\u5c0f\u6784\u9020\u89e3\uff0c\u6bd4\u5982\u4e00\u4e2a\u5e8f\u5217\u662fTTWTWWTW\uff0c\u90a3\u4e482+2+1+2+1+1+2+1=12\uff0c12\u80af\u5b9a\u5408\u6cd5\u5e76\u4e14\u65b9\u6848\u4e3a[1,n]\u3002\u90a3\u4e48\u6211\u4eec\u89c2\u5bdf\u4e00\u4e0b\u53d1\u73b0[2,n]\u5c31\u662f10\uff0c\u8fdb\u4e00\u6b65\u53ef\u4ee5\u53d1\u73b0\u6240\u6709\u548c12\u5947\u5076\u6027\u76f8\u540c\u7684\u90fd\u53ef\u4ee5\u6784\u9020\u51fa\u6765\uff0c\u5177\u4f53\u7684\uff0c\u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u6848\u6784\u9020\uff1a\uff08\u8bb0Sum[l,r]\u4e3a[l,r]\u7684\u6743\u503c\u548c\uff0cs[x]\u4e3a\u7b2cx\u4f4d\u7684\u5b57\u7b26\uff09\n\n- \u82e5\u5f53\u524d\u533a\u95f4Sum[l,r]=x\uff0c\u90a3\u4e48\u82e5`s[l]=='W'&&s[r]=='W'`\uff0c\u53ef\u63a8\u51faSum[l+1,r-1]=x-2\n\n- \u5426\u5219\u82e5`s[l]=='T'`\uff0c\u53ef\u63a8\u51faSum[l+1,r]=x-2\n\n- \u5426\u5219\u53ef\u63a8\u51faSum[l,r-1]=x-2\n\n\u90a3\u4e48\u4e8b\u60c5\u5c31\u53d8\u5f97\u7b80\u5355\u4e86\uff0c\u6211\u4eec\u53ea\u8981\u6c42\u51fa\u80fd\u8868\u793a\u51fa\u6765\u7684\u6700\u5927\u5947/\u5076\u6570\u5373\u53ef\uff0c\u7136\u540e\u4ece\u6700\u5927\u6570\u5f80\u4e0b\u63a8\uff0c\u5c31\u53ef\u4ee5\u5904\u7406\u51fa\u6240\u6709\u7b54\u6848\u4e86\u3002\u81f3\u4e8e\u600e\u4e48\u6c42\u80fd\u8868\u793a\u51fa\u6765\u7684\u6700\u5927\u5947/\u5076\u6570\uff0c\u663e\u7136\u4e00\u4e2a\u662fSum[1,n]\uff0c\u53e6\u4e00\u4e2a\u662f\u627e\u5230\u4ece\u5de6\u5f80\u53f3\uff08\u6216\u4ece\u53f3\u5f80\u5de6\uff09\u7b2c\u4e00\u4e2a`'W'`\u7684\u4f4d\u7f6ei\uff0c\u628a[1,i]\uff08\u6216[i,n]\uff09\u5220\u53bb\u540e\u7684\u5b50\u6bb5\u548c\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,x,y) for (int i=(x);i<=(y);i++)\nusing namespace std;\nconst int N=2e6+100;\nint n,m,sum1,sum2,l1,r1,l2,r2,l[N],r[N]; char str[N];\nint main(){\n\tscanf(\"%d%d%s\",&n,&m,str+1);\n\trep (i,1,n) sum1+=1+(str[i]=='T'); l1=1,r1=n;\n\tsum2=0;\n\trep (i,1,n) if (str[i]=='W'){sum2=max(sum2,sum1-i*2+1); l2=i+1,r2=n; break;}\n\tfor (int i=n;i;i--) if (str[i]=='W'){if (sum1-(n-i)*2-1>sum2) sum2=sum1-(n-i)*2-1,l2=1,r2=i-1; break;}\n\tif (!(sum1&1)) swap(sum1,sum2),swap(l1,l2),swap(r1,r2);\n\tfor (int i=sum1;i>=1;i-=2){\n\t\tl[i]=l1,r[i]=r1;\n\t\tif (str[l1]=='W'&&str[r1]=='W') l1++,r1--;\n\t\telse if (str[l1]=='T') l1++; else r1--;\n\t}\n\tfor (int i=sum2;i>=1;i-=2){\n\t\tl[i]=l2,r[i]=r2;\n\t\tif (str[l2]=='W'&&str[r2]=='W') l2++,r2--;\n\t\telse if (str[l2]=='T') l2++; else r2--;\n\t}\n\twhile (m--){\n\t\tint x; scanf(\"%d\",&x);\n\t\tif ((x&1)&&x>sum1||!(x&1)&&x>sum2) puts(\"NIE\"); else printf(\"%d %d\\n\",l[x],r[x]);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1548738554,
        "uid": 19722,
        "name": "fy0123",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "# [POI2011]LIZ-Lollipop\n\n**[\u535a\u5ba2\u4e2d\u9605\u8bfb](https://www.cnblogs.com/Wendigo/p/12493641.html)**\n\n**\u524d\u7f6e\u77e5\u8bc6\uff1a**\n> \u7834\u8111\u672f\u5f00\u8111\u6d1e\u3002\n\n---\n\n> [\\[POI2011\\]LIZ-Lollipop](https://www.luogu.com.cn/problem/P3514)\n\n> \u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a\\{n\\}(a_i\\in{1,2})$\uff0c$m$ \u6b21\u8be2\u95ee\u6c42 $k$ \u662f\u5426\u53ef\u4ee5\u8868\u793a\u6210\u8fde\u7eed\u67d0\u6bb5\u5e8f\u5217 $a_L\\sim a_R$ \u7684\u548c\u3002\u5982\u679c\u53ef\u4ee5\uff0c\u8f93\u51fa $L$ \u548c $R$\u3002\u5426\u5219\uff0c\u8f93\u51fa $\\texttt{NIE}$\u3002\uff08\u6ce8\uff1a\u8bfb\u5165\u5e8f\u5217\u7528\u5b57\u7b26\u4e32\uff0c$\\texttt{T}$ \u8868\u793a $2$\uff0c$\\texttt{W}$ \u8868\u793a $1$\uff09\u3002\n\n> \u6570\u636e\u8303\u56f4\uff1a$1\\le n,m\\le 10^6$\uff0c$1\\le k\\le 2\\times 10^6$\u3002\n\n---\n\n\u5982\u679c\u4e0d\u662f\u601d\u7ef4\u96be\u5ea6\u7684\u539f\u56e0\uff0c\u8fd9\u9898\u662f\u6a59\u8272\u7684\u5427\u3002\n\n---\n\n\u9996\u5148\u60f3\u5230\u533a\u95f4\u548c\u5c31\u8981\u5148\u628a\u524d\u7f00\u548c\u7b97\u51fa\u6765\u3002\n\n\u7528**\u9006\u63a8**\u505a\u3002**\u5982\u679c\u6709\u4e00\u4e2a\u533a\u95f4 $[L,R]$ \u7684\u548c\u4e3a $x$\uff0c\u90a3\u4e48\u5982\u4f55\u5f97\u51fa\u548c\u4e3a $x-2$ \u7684\u533a\u95f4\u5462**\uff1a\n\n1. \u6ee1\u8db3 $a_L=2$ \u6216 $a_R=2$\uff0c\u6240\u4ee5\u548c\u4e3a $x-2$ \u7684\u533a\u95f4\u662f $[a_L+1,a_R]$ \u6216 $[a_L,a_R-1]$\u3002\n\n2. \u5426\u5219\u80af\u5b9a $a_L=a_R=1$\uff0c\u90a3\u4e48\u548c\u4e3a $x-2$ \u7684\u533a\u95f4\u5c31\u662f $[a_l+1,a_R-1]$\u3002\n\n\u6240\u4ee5\u53ea\u9700\u8981\u627e\u51fa\u6700\u5927\u7684\u5947\u6570\u533a\u95f4\u548c $x$ \u548c\u6700\u5927\u7684\u5076\u6570\u533a\u95f4\u548c $x$ \u5373\u53ef\u3002\n\n\u7136\u540e\u9006\u63a8\u522b\u7684\uff0c\u53ef\u4ee5\u5faa\u73af\u6216\u8005\u9012\u5f52\uff0c\u81f3\u4e8e\u627e\u6700\u5927\u5947\u5076\u6570\u533a\u95f4\u548c\uff0c\u5c31\u4e0d\u5fc5\u591a\u8bf4\u4e86\u3002\n\n---\n\n$\\texttt{code}$\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n//&Start\n#define lng long long\n#define lit long double\n#define re register\n#define kk(i,n) \" \\n\"[i==n]\nconst int inf=0x3f3f3f3f;\nconst lng Inf=0x3f3f3f3f3f3f3f3f;\n\n//&Data\nconst int N=1e6;\nint n,m,a[N+10],mo=-1,me=-1;\nint l[(N<<1)+10],r[(N<<1)+10],sum[N+10];\n//l[i] \u8868\u793a\u533a\u95f4\u548c\u4e3a i \u7684\u533a\u95f4\u5de6\u7aef\u70b9\uff0cr[i] \u8868\u793a\u53f3\u7aef\u70b9\uff08\u4e0d\u5f00\u53cc\u500d\u7a7a\u95f4\u4e5f\u80fd\u5f97\u4e0d\u5c11\u5206\u5427\uff09\nchar c[N+10];\n\n//&Solve\nvoid solve(int x){ //\u5faa\u73af\u5b9e\u73b0\u9006\u63a8\n\tif(x<=2) return;\n\tif(a[l[x]]==2) l[x-2]=l[x]+1,r[x-2]=r[x];\n\telse if(a[r[x]]==2) l[x-2]=l[x],r[x-2]=r[x]-1;\n\telse l[x-2]=l[x]+1,r[x-2]=r[x]-1;\n\tsolve(x-2);\n}\n\n//&Main\nint main(){\n\tmemset(l,-1,sizeof l);\n\tmemset(r,-1,sizeof r);\n\tscanf(\"%d%d%s\",&n,&m,c+1);\n\t//-----------------\u9b54\u828b\u5206\u5272\u7ebf---------------------------\n\tfor(int i=1;i<=n;i++) a[i]=(c[i]=='T'?2:1);\n\tfor(int i=1;i<=n;i++) sum[i]=sum[i-1]+a[i]; //\u6c42\u524d\u7f00\u548c\n\t//-----------------\u9b54\u828b\u5206\u5272\u7ebf---------------------------\n\tif(sum[n]&1) mo=sum[n],l[mo]=1,r[mo]=n;\n\telse me=sum[n],l[me]=1,r[me]=n; //\u56e0\u4e3a\u6240\u6709\u6570\u7684\u548c\u80af\u5b9a\u662f\u8be5\u5947\u5076\u6027\u4e0b\u6700\u5927\u7684\n\t// printf(\"varque %d %d\\n\",mo,me);\n\t//-----------------\u9b54\u828b\u5206\u5272\u7ebf---------------------------\n\tint lf=-1,ri=-1;\n\tfor(int i=1;i<=n;i++)if(a[i]==1){lf=i;break;}\n\tfor(int i=n;i>=1;i--)if(a[i]==1){ri=i;break;}//\u627e1\uff0c\u5f97\u51fa\u53e6\u5916\u5947\u5076\u6027\u4e0b\u6700\u5927\u7684\u533a\u95f4\u548c\n\t//-----------------\u9b54\u828b\u5206\u5272\u7ebf---------------------------\n\tint tmp=-1,lt=-1,rt=-1;\n\tif(lf!=-1&&sum[n]-sum[lf]>tmp)\n\t\ttmp=sum[n]-sum[lf],lt=lf+1,rt=n;\n\tif(ri!=-1&&sum[ri-1]>tmp)\n\t\ttmp=sum[ri-1],lt=1,rt=ri-1;\n\t//-----------------\u9b54\u828b\u5206\u5272\u7ebf---------------------------\n\tif(sum[n]&1) me=tmp,l[me]=lt,r[me]=rt;\n\telse mo=tmp,l[mo]=lt,r[mo]=rt;\n\t// printf(\"varque %d %d\\n\",mo,me);\n\t//-----------------\u9b54\u828b\u5206\u5272\u7ebf---------------------------\n\tsolve(mo); //\u9006\u63a8\n\tsolve(me);\n\t//-----------------\u9b54\u828b\u5206\u5272\u7ebf---------------------------\n\tfor(int i=1,x;i<=m;i++){\n\t\tscanf(\"%d\",&x);\n\t\tif(l[x]==-1&&r[x]==-1) puts(\"NIE\"); //\u6ca1\u6709\u65b9\u6848\n\t\telse printf(\"%d %d\\n\",l[x],r[x]); //\u8f93\u51fa\n\t}\n\treturn 0;\n}\n\n```\n\n---\n\n**\u795d\u5927\u5bb6\u5b66\u4e60\u6109\u5feb\uff01**",
        "postTime": 1584183928,
        "uid": 118365,
        "name": "George1123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "**\u5148\u6302\u4e00\u4e2a\u81ea\u5df1\u535a\u5ba2\u7684\u94fe\u63a5:[Anderson](https://www.cnblogs.com/cjgjh)**\n\n**\u5728\u539f\u535a\u5ba2\u4f7f\u7528\u6548\u679c\u66f4\u4f73!**\n\n## \u539f\u9898\n[\u9898\u9762](https://www.luogu.org/problemnew/show/P3514)\n\n## Solution\n~~\u6211\u662f\u4e0d\u4f1a\u544a\u8bc9\u4f60\u6211\u4e00\u5f00\u59cb\u5199\u4e86\u4e00\u4e2a\u4e8c\u5206\u7b54\u6848+rand\u7684\u7b97\u6cd5\u7684\u3002\u3002\u3002~~\n\u8fd9\u6837\u5b50\u4f60\u53ef\u4ee5\u83b7\u5f9780\u5206\u7684\u597d\u6210\u7ee9\uff01\uff01\uff01\n```cpp\n#pragma GCC diagnostic error \"-std=c++11\"\n#pragma GCC optimize(2)\n#pragma GCC optimize(3)\n#pragma GCC optimize(\"Ofast\")\n#pragma GCC optimize(\"inline\")\n#pragma GCC optimize(\"-fgcse\")\n#pragma GCC optimize(\"-fgcse-lm\")\n#pragma GCC optimize(\"-fipa-sra\")\n#pragma GCC optimize(\"-ftree-pre\")\n#pragma GCC optimize(\"-ftree-vrp\")\n#pragma GCC optimize(\"-fpeephole2\")\n#pragma GCC optimize(\"-ffast-math\")\n#pragma GCC optimize(\"-fsched-spec\")\n#pragma GCC optimize(\"unroll-loops\")\n#pragma GCC optimize(\"-falign-jumps\")\n#pragma GCC optimize(\"-falign-loops\")\n#pragma GCC optimize(\"-falign-labels\")\n#pragma GCC optimize(\"-fdevirtualize\")\n#pragma GCC optimize(\"-fcaller-saves\")\n#pragma GCC optimize(\"-fcrossjumping\")\n#pragma GCC optimize(\"-fthread-jumps\")\n#pragma GCC optimize(\"-funroll-loops\")\n#pragma GCC optimize(\"-fwhole-program\")\n#pragma GCC optimize(\"-freorder-blocks\")\n#pragma GCC optimize(\"-fschedule-insns\")\n#pragma GCC optimize(\"inline-functions\")\n#pragma GCC optimize(\"-ftree-tail-merge\")\n#pragma GCC optimize(\"-fschedule-insns2\")\n#pragma GCC optimize(\"-fstrict-aliasing\")\n#pragma GCC optimize(\"-fstrict-overflow\")\n#pragma GCC optimize(\"-falign-functions\")\n#pragma GCC optimize(\"-fcse-skip-blocks\")\n#pragma GCC optimize(\"-fcse-follow-jumps\")\n#pragma GCC optimize(\"-fsched-interblock\")\n#pragma GCC optimize(\"-fpartial-inlining\")\n#pragma GCC optimize(\"no-stack-protector\")\n#pragma GCC optimize(\"-freorder-functions\")\n#pragma GCC optimize(\"-findirect-inlining\")\n#pragma GCC optimize(\"-fhoist-adjacent-loads\")\n#pragma GCC optimize(\"-frerun-cse-after-loop\")\n#pragma GCC optimize(\"inline-small-functions\")\n#pragma GCC optimize(\"-finline-small-functions\")\n#pragma GCC optimize(\"-ftree-switch-conversion\")\n#pragma GCC optimize(\"-foptimize-sibling-calls\")\n#pragma GCC optimize(\"-fexpensive-optimizations\")\n#pragma GCC optimize(\"-funsafe-loop-optimizations\")\n#pragma GCC optimize(\"inline-functions-called-once\")\n#pragma GCC optimize(\"-fdelete-null-pointer-checks\")\n#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<algorithm>\n#include<iostream>\n#include<queue>\n#define ll long long\n#define file(a) freopen(a\".in\",\"r\",stdin)//;freopen(a\".out\",\"w\",stdout)\nusing namespace std;\ninline int gi(){\n    int sum=0,f=1;char ch=getchar();\n    while(ch>'9' || ch<'0'){if(ch=='-')f=-f;ch=getchar();}\n    while(ch>='0' && ch<='9'){sum=(sum<<3)+(sum<<1)+ch-'0';ch=getchar();}\n    return f*sum;\n}\ninline ll gl(){\n    ll sum=0,f=1;char ch=getchar();\n    while(ch>'9' || ch<'0'){if(ch=='-')f=-f;ch=getchar();}\n    while(ch>='0' && ch<='9'){sum=(sum<<3)+(sum<<1)+ch-'0';ch=getchar();}\n    return f*sum;\n}\nint a[2000010],sum[2000010];\nstruct node{\n    int id,val;\n    bool operator<(const node b)const{\n        return val<b.val;\n    }\n}d[2000010];\nint main(){\n    srand(time(NULL));\n#ifndef ONLINE_JUDGE\n    file(\"example\");\n#endif\n    int i,j,n,m,k;\n    n=gi();m=gi();\n    for(i=1;i<=n;i++){\n        char ch=getchar();\n        a[i]=ch=='W'?1:2;\n    }\n    for(i=1;i<=n;i++)sum[i]=sum[i-1]+a[i];\n    for(i=1;i<=n;i++){\n        d[i]=(node){i,rand()};\n    }\n    sort(d+1,d+n+1);\n    while(m--){\n        k=gi();int flag=0;\n        for(int x=1;x<=n;x++){\n            i=d[x].id;\n            int l=i,r=n,ans=0;\n            while(l<=r){\n                int mid=(l+r)>>1;\n                if(sum[mid]-sum[i-1]>k)r=mid-1;\n                else if(sum[mid]-sum[i-1]<k)l=mid+1;\n                else{ans=mid;break;}\n            }\n            if(ans){\n                printf(\"%d %d\\n\",i,ans);flag=1;\n                break;\n            }\n        }\n        if(!flag)puts(\"NIE\");\n    }\n    return 0;\n}\n```\n\n\u8fd9\u662f\u4e00\u9053\u6bd4\u8f83\u6709\u601d\u7ef4\u96be\u5ea6\u7684\u9898\u76ee\uff0c\u6211\u4eec\u8003\u8651\u4e00\u4e0b\u5982\u679c\u4e00\u6bb5\u533a\u95f4\u67091\uff0c\u90a3\u4e48\u663e\u7136\u90fd\u53ef\u4ee5\u5b8c\u6210\u5bf9\u5427\u3002\n\u8fd9\u91cc\u7ed9\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u8bc1\u660e:\n$Sum$\u8868\u793a\u524di\u4e2a\u6570\u7684\u548c,$sum_i$\u8868\u793ai\u5f80\u540e\u6709\u591a\u5c11\u4e2aT.\u6211\u4eec\u8003\u8651\u5f53\u524d\u8fd9\u4e2a\u6570\u5982\u679c\u662fT(2),\u90a3\u4e48\u6709\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5\n- i\u5411\u540e\u5ef6\u7eed\u7684\u957f\u5ea6>1\u5411\u540e\u5ef6\u7eed\u7684\u957f\u5ea6,\u5219\u6709:\n$Sum-1=a_{sum_1+2}+a_{sum_1+3}+...+a_{sum_1+i}$\n\n\u8fd9\u4e2a\u53ef\u4ee5\u8fd9\u4e48\u60f3,\u6211\u4eec\u628a\u5b83\u5dee\u5206\u4e00\u4e0b,\u53d8\u6210:\n$a_1+a_2+...+a_{sum_1+i}-a_1-a_2-...-a_{sum_1+1}$\n\u56e0\u4e3a$1~sum_1$\u90fd\u662f2,\u6240\u4ee5\u524d\u9762\u7684\u6570\u90fd\u662f2.\n\u7136\u540e\u6211\u4eec\u8003\u8651\u7b2c\u4e00\u4e2a\u5f0f\u5b50$a_1+a_2+a_3+...+a_{sum_1+i}$\n\u56e0\u4e3ai\u5411\u540e\u5ef6\u7eed\u7684\u957f\u5ea6>1\u5411\u540e\u5ef6\u7eed\u7684\u957f\u5ea6,\u6240\u4ee5\u6211\u4eec\u8003\u8651\u628a\u8fd9i\u4e2a\u6570\u5f80\u524d\u79fb,\u7136\u540e\u628a1\u5f80\u540e\u5ef6\u7eed\u7684\u957f\u5ea6\u653e\u5230\u540e\u9762,\u5c31\u6709\n\u539f\u5f0f=$a_1+a_2+...+a_{sum_1+i}-a_1-a_2-a_{sum_1+1}=Sum-1$\n\n---\n- \u5982\u679ci\u5ef6\u7eed\u7684\u957f\u5ea6\u4e0d\u80fd\u591f\u5230n,\u5219\u6709:\n$Sum-1=a_{sum_i+1}+a_{sum_i+2}+...+a_{sum_i+i}$\n\n\u540c\u7406\u53ef\u8bc1\n\n----\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u5199\u51fa\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u4e86.\n\n\n```cpp\n#include<stdio.h>\n#include<stdlib.h>\n#include<string.h>\n#include<math.h>\n#include<algorithm>\n#include<iostream>\n#include<queue>\n#define ll long long\n#define file(a) freopen(a\".in\",\"r\",stdin)//;freopen(a\".out\",\"w\",stdout)\nusing namespace std;\ninline int gi(){\n    int sum=0,f=1;char ch=getchar();\n    while(ch>'9' || ch<'0'){if(ch=='-')f=-f;ch=getchar();}\n    while(ch>='0' && ch<='9'){sum=(sum<<3)+(sum<<1)+ch-'0';ch=getchar();}\n    return f*sum;\n}\ninline ll gl(){\n    ll sum=0,f=1;char ch=getchar();\n    while(ch>'9' || ch<'0'){if(ch=='-')f=-f;ch=getchar();}\n    while(ch>='0' && ch<='9'){sum=(sum<<3)+(sum<<1)+ch-'0';ch=getchar();}\n    return f*sum;\n}\nint a[2000010],sum[2000010],Sum,l[2000010],r[2000010];\nint main(){\n#ifndef ONLINE_JUDGE\n    file(\"example\");\n#endif\n    int i,j,n,m,k;\n    n=gi();m=gi();\n    for(i=1;i<=n;i++){\n        char ch=getchar();\n        if(ch=='T')a[i]=2;\n        else a[i]=1;\n    }\n    for(i=n;i;i--)sum[i]=a[i]==2?(sum[i+1]+1):0;\n    int Sum=0;\n    for(i=1;i<=n;i++){\n        Sum+=a[i];\n        l[Sum]=1;r[Sum]=i;\n        if(a[i]==2)\n            if(sum[i]>sum[1])l[Sum-1]=sum[1]+2,r[Sum-1]=sum[1]+i;\n            else if(sum[i]!=n-i+1)l[Sum-1]=sum[i]+1,r[Sum-1]=sum[i]+i;\n    }\n    while(m--){\n        k=gi();\n        if(l[k])printf(\"%d %d\\n\",l[k],r[k]);\n        else puts(\"NIE\");\n    }\n    return 0;\n}\n```",
        "postTime": 1539820372,
        "uid": 133944,
        "name": "Biscuit46",
        "ccfLevel": 0,
        "title": "[POI2011]LIZ-Lollipop"
    },
    {
        "content": "> **[P3514 [POI2011]LIZ-Lollipop](https://www.luogu.com.cn/problem/P3514)*\n>\n> [POI \u5408\u96c6](https://www.cnblogs.com/alex-wei/p/poi.html)\u3002\n\n\u5143\u7d20\u6743\u503c\u4ec5\u6709 $1$ \u548c $2$ \u4e00\u5b9a\u662f\u975e\u5e38\u91cd\u8981\u7684\u9650\u5236\u3002\u8003\u8651\u56fa\u5b9a\u5de6\u7aef\u70b9 $l$\uff0c\u53f3\u7aef\u70b9 $r$ \u4ece $l\\to n$ \u7684\u8fc7\u7a0b\u3002\u8bbe $[l, r]$ \u4e4b\u548c\u4e3a $v_{l, r}$\uff0c\u5bb9\u6613\u8bc1\u660e\u82e5 $1 \\leq k < s$ \u4e14 $k$ \u4e0d\u80fd\u88ab\u8868\u793a\u4e3a\u4ee5 $l$ \u5f00\u5934\u7684\u67d0\u4e2a\u5b50\u4e32\u548c\uff0c\u5219 $k + 1$ \u4e00\u5b9a\u53ef\u4ee5\u88ab\u8868\u51fa\u3002\u5426\u5219\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u5143\u7d20\u6743\u503c\u4e0d\u5c0f\u4e8e $3$\u3002\n\n\u56e0\u6b64\uff0c\u8003\u8651\u627e\u5230\u6700\u957f\u7684\u540e\u7f00 $[l, n]$ \u4f7f\u5f97 $s_l = \\tt W$\uff08\u5373\u627e\u5230\u6700\u5c0f\u7684 $l$ \u4f7f\u5f97 $s_l = \\tt W$\uff09\uff0c\u5219\u6839\u636e\u4e0a\u8ff0\u6027\u8d28\uff0c$1\\sim v_{l, n}$ \u4e00\u5b9a\u5168\u90e8\u80fd\u88ab\u8868\u793a\u51fa\u6765\uff0c\u56e0\u4e3a\u82e5 $2\\leq k < v_{l, n}$ \u4e0d\u80fd\u88ab\u4ee5 $l$ \u5f00\u5934\u7684\u67d0\u4e2a\u5b50\u4e32\u548c\u8868\u51fa\uff0c\u5219 $k + 1$ \u4e00\u5b9a\u80fd\u88ab\u4ee5 $l$ \u5f00\u5934\u7684\u67d0\u4e2a\u5b50\u4e32\u548c\u8868\u51fa\uff0c\u6240\u4ee5 $k$ \u4e00\u5b9a\u80fd\u88ab\u4ee5 $l + 1$ \u5f00\u5934\u7684\u67d0\u4e2a\u5b50\u4e32\u548c\u8868\u51fa\u3002\u540c\u7406\uff0c\u6700\u957f\u7684\u524d\u7f00 $[1, r]$ \u540c\u6837\u6ee1\u8db3\u8be5\u6027\u8d28\u3002\n\n\u56e0\u6b64\uff0c\u6c42\u51fa\u5f00\u5934\u548c\u672b\u5c3e\u7684\u8fde\u7eed\u7684 $2$ \u7684\u4e2a\u6570 $be, ed$\u3002\u82e5 $be \\leq ed$\uff0c\u8bf4\u660e $[l, n]$ \u4e4b\u548c\u5927\u4e8e $[1, r]$ \u4e4b\u548c\uff0c\u7528\u540e\u7f00\u6765\u505a\u3002\u5426\u5219\u7528\u524d\u7f00\u6765\u505a\u3002\u53ef\u4ee5\u901a\u8fc7\u7ffb\u8f6c\u5e8f\u5217\u907f\u514d\u5206\u7c7b\u8ba8\u8bba\uff0c\u56e0\u6b64\u4e0d\u59a8\u8bbe $[l, n]$ \u4e4b\u548c\u66f4\u5927\u3002\n\n\u8bbe $buc_k$ \u8868\u793a $[l, buc_k]$ \u4e4b\u548c\u7b49\u4e8e $k$\u3002\u6ce8\u610f $buc_k$ \u53ef\u80fd\u4e0d\u5b58\u5728\uff0c\u4f46\u6b64\u65f6\u6839\u636e\u4e0a\u8ff0\u6027\u8d28\uff0c$buc_{k + 1}$ \u5b58\u5728\u3002\n\n- \u82e5\u8be2\u95ee\u7684 $k \\leq v_{l, n}$\uff0c\u5219\u82e5 $buc_k$ \u5b58\u5728\uff0c\u8f93\u51fa $l, buc_k$\u3002\u5426\u5219\u8f93\u51fa $l + 1, buc_{k + 1}$\u3002\n- \u5426\u5219\uff0c\u82e5 $k \\leq v_{1, n}$ \u4e14 $k$ \u4e0e $v_{l, n}$ \u7684\u5947\u5076\u6027\u76f8\u540c\uff08\u56e0\u4e3a\u63a5\u4e0b\u6765\u53ea\u80fd\u8ba9 $l$ \u5f80\u5de6\u79fb\uff0c\u6bcf\u6b21\u6dfb\u52a0 $2$\uff09\uff0c\u5219\u8f93\u51fa $l - \\frac{k - v_{l, n}} 2, n$\u3002\n- \u5426\u5219\u65e0\u89e3\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u7ebf\u6027\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ninline int read() {\n\tint x = 0; char s = getchar();\n\twhile(!isdigit(s)) s = getchar();\n\twhile(isdigit(s)) x = x * 10 + s - '0', s = getchar();\n\treturn x;\n}\ninline void print(int x) {\n\tif(x >= 10) print(x / 10);\n\tputchar(x % 10 + '0');\n}\n\nconst int N = 1e6 + 5;\nint n, m, sum, p, be, ed, buc[N];\nchar s[N];\nint main() {\n\tscanf(\"%d %d %s\", &n, &m, s + 1);\n\tfor(int i = 1; i <= n && s[i] == 'T'; i++) be++;\n\tfor(int i = n; i && s[i] == 'T'; i--) ed++;\n\tif(be > ed) reverse(s + 1, s + n + 1);\n\tfor(int i = 1; i <= n && !sum; i++)\n\t\tif(s[i] == 'W') {\n\t\t\tbuc[sum = 1] = p = i;\n\t\t\tfor(int j = i + 1; j <= n; j++) buc[sum += s[j] == 'W' ? 1 : 2] = j;\n\t\t}\n\tfor(int i = 1; i <= m; i++) {\n\t\tint k = read(), l = -1, r = -1;\n\t\tif(k <= sum) buc[k] ? (l = p, r = buc[k]) : (l = p + 1, r = buc[k + 1]);\n\t\telse if((k - sum >> 1) < p && !(k - sum & 1)) l = p - (k - sum >> 1), r = n;\n\t\tif(l == -1) puts(\"NIE\");\n\t\telse {\n\t\t\tif(be > ed) swap(l, r), l = n + 1 - l, r = n + 1 - r;\n\t\t\tprint(l), putchar(' '), print(r), putchar('\\n');\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1645366940,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "P3514 [POI2011]LIZ-Lollipop"
    },
    {
        "content": "### \u524d\u7f6e\u77e5\u8bc6\n\n- \u94bb\u8111\u673a\uff0c\u5f00\u53d1\u8111\u6d1e\n\n- \u77aa\u773c\u6cd5\uff0c\u5bfb\u627e\u6027\u8d28\n\n- \u4eba\u5de5\u624b\uff0c\u4f1a\u6253\u4ee3\u7801\n\n### \u601d\u8def\n\n\u770b\u7740\u51e0\u4e4e\u90fd\u6ca1\u6709\u4eba\u6253\u66b4\u529b\u7684\u554a=_=\uff0c\u4e3a\u4e86\u628a\u539f\u59cb\u7684\u601d\u8003\u8fc7\u7a0b\u5448\u73b0\u51fa\u6765\u8fd8\u662f\u4e00\u6b65\u4e00\u6b65\u8bb2\u5427\u3002\n\n- $60 \\text{pts}$\n\n\u5982\u679c\u662f\u5728\u7ebf\u7684\u8bdd\u6709\u70b9\u592a\u96be\u529e\u4e86\uff0c\u76f4\u63a5\u79bb\u7ebf\u4e0b\u6765\u505a\uff0c\u6216\u8005\u8be2\u95ee\u4e4b\u524d\u9884\u5904\u7406\uff1a\n\n\u6211\u4eec\u8003\u8651\u7528\u53cc\u6307\u9488\uff0c$r$ \u6307\u9488\u4e0d\u65ad\u5411\u53f3\u79fb\u52a8\uff0c $l$ \u6307\u9488\u6bcf\u6b21 $r$ \u6307\u9488\u90fd\u79fb\u52a8\u4e4b\u540e\u91cd\u7f6e\u4e00\u904d\uff0c\u4fdd\u8bc1\u53ef\u4ee5\u904d\u5386\u5230\u6bcf\u4e00\u4e2a\u533a\u95f4\u3002\n\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\sum_{i=1}^n\\sum_{j=1}^ij)$\u3002\n\n\u5982\u679c\u6709\u4ec0\u4e48\u725b\u903c\u4f18\u5316\u8c8c\u4f3c\u53ef\u4ee5\u62ff\u5230 $80\\text{pts}$ \u7684\u597d\u6210\u7ee9\uff0c\u4f46\u662f\u60f3\u90e8\u5206\u5206\u6709\u65f6\u5019\u6bd4\u6b63\u89e3\u8fd8\u96be\u60f3\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002\n\n- $100 \\text{pts}$\n\n\u5728\u7ebf\u5904\u7406\u663e\u7136\u662f\u5f88\u96be\u7684\uff0c\u9700\u8981\u4f18\u5316 $O(nq)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u6211\u4eec\u601d\u8003\u4e00\u4e0b\u6709\u6ca1\u6709 $O(n)$ \u7684\u7b97\u6cd5\u6765\u901a\u8fc7\u9884\u5904\u7406\u89e3\u51b3\u3002\n\n**\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u6027\u8d28\uff1a**\n\n\u5982\u679c\u6709\u4e00\u4e2a\u5b50\u533a\u95f4\u7684\u503c\u4e3a $val$\uff0c($val\\ge2$ )\uff0c\u90a3\u4e48\u4e00\u5b9a\u53ef\u4ee5\u901a\u8fc7\u628a\u533a\u95f4\u53f3\u7aef\u70b9\u5de6\u79fb\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u6216\u8005\u5de6\u7aef\u70b9\u53f3\u79fb\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u6216\u8005\u5de6\u53f3\u5404\u7f29\u5c0f\u4e00\u4e2a\u4f4d\u7f6e\u6765\u5f97\u5230\uff0c\u56e0\u4e3a\u5de6\u53f3\u4e24\u8fb9\u7684\u503c\u80af\u5b9a\u662f $1\\ \\text{or}\\ 0$\u3002\n\n\u9996\u5148\u9884\u5904\u7406\u51fa\u6240\u6709 $[1,i],[i+1,n]$ \u4ee5\u53ca $[1,n]$ \u7684\u533a\u95f4\u503c\uff0c\u7136\u540e\u5224\u65ad\u4e00\u4e0b\u533a\u95f4\u7684\u503c\u5728\u5947\u6570\u548c\u5076\u6570\u7684\u65f6\u5019\u7684\u6700\u5927\u503c\uff0c\u9632\u6b62\u51fa\u73b0\u533a\u95f4\u66f4\u65b0\u53d8\u6210\u8d1f\u6570\u7684\u60c5\u51b5\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u6109\u5feb\u7684 $O(n)$ \u9884\u5904\u7406\uff0c$O(1)$ \u8be2\u95ee\u5566\uff01\n\n### \u4ee3\u7801\u5b9e\u73b0\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\nusing namespace std;\nconst int N=1e6+9;\nconst int M=2e6+9;\nint L[M],R[M];\nint a[N],s[N];\nint n,Q;\nint Max[2];//0 - > \u5076\u6570 \uff0c 1 - > \u5947\u6570 \nint read()\n{\n\tint f=1,x=0;\n\tchar s=getchar();\n\twhile(s<'0'||s>'9'){if(s=='-')f=-1;s=getchar();}\n\twhile(s>='0'&&s<='9'){x=(x<<1)+(x<<3)+(s^'0');s=getchar();}\n\treturn f*x;\n} \nvoid update(int l,int r)\n{\n\tint val=s[r]-s[l-1];\n\tMax[val%2]=max(val,Max[val%2]);\n\tL[val]=l;\n\tR[val]=r;\n}\nvoid get(int &la,int &lb,int l,int r)\n{\n\tla=l; lb=r;\n\tif(a[la]==2)\n\t\tla++;\n\telse if(a[lb]==2)\n\t\tlb--;\n\telse \n\t{\n\t\tla++;\n\t\tlb--; \n\t}\n}\nint main()\n{\n\tn=read(); Q=read();\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tchar s;\n\t\tscanf(\"%c\",&s);\n\t\tif(s=='T')\n\t\t\ta[i]=2;\n\t\telse a[i]=1;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\ts[i]=s[i-1]+a[i];\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tupdate(1,i);\n\t\tupdate(i+1,n);\t\n\t} \n\tupdate(1,n);\n\tfor(int i=2*n-2;i>=1;i--)\n\t\tif(Max[i%2]>=i+2)\n\t\t\tget(L[i],R[i],L[i+2],R[i+2]);\t\n\tfor(int i=1;i<=Q;i++)\n\t{\n\t\tint x=read();\n\t\tif(Max[x%2]>=x)\n\t\t\tprintf(\"%d %d\\n\",L[x],R[x]);\n\t\telse printf(\"NIE\\n\");\n\t}\n\treturn 0;\n}\n```\n\n\n",
        "postTime": 1630503345,
        "uid": 230804,
        "name": "Durancer",
        "ccfLevel": 4,
        "title": "\u3010\u9898\u89e3\u3011P3514 [POI2011]LIZ-Lollipop"
    },
    {
        "content": "\u7ed9\u4e00\u4e2a\u76f8\u5bf9\u4e0d\u662f\u5f88\u96be\u60f3\u7684\u505a\u6cd5\u3002\n\n\u4e00\u4e2a\u5e8f\u5217 $211221121$\uff0c\u5176\u524d\u7f00\u548c\u4e3a $2,3,4,6,8,9,10,12,13$\uff0c\u7f3a\u5c11\u7684\u662f $1,5,7,11$\u3002\n\n\u7136\u540e\u5bf9\u5e8f\u5217\u4ee5 $2$ \u4e3a\u5f00\u5934\u8fdb\u884c\u5206\u6bb5\uff1a$211/2/211/21$\uff0c\u7b2c\u4e00\u6bb5\u524d\u7f00\u548c\u662f $[2,4]$\uff0c\u7b2c\u4e8c\u6bb5\u662f $[6,6]$\uff0c\u7b2c\u4e09\u6bb5\u662f $[8,10]$\uff0c\u7b2c\u56db\u6bb5\u662f $[12,13]$\u3002\u4ece\u8fd9\u4e2a\u5206\u6bb5\u770b\u51fa\uff0c\u4e0d\u4f1a\u6709\u4e24\u4e2a\u76f8\u90bb\u7684\u6570\u90fd\u4e0d\u5728\u524d\u7f00\u548c\u5185\u51fa\u73b0\u3002\n\n\u8fd9\u63d0\u793a\u6211\u4eec\u4ec0\u4e48\uff1f\n\n\u5982\u679c\u518d\u5728\u5e8f\u5217\u524d\u9762\u52a0\u4e00\u4e2a $1$\uff0c\u90a3\u4e48\u6bcf\u4e00\u4e2a\u4e0d\u5728\u524d\u7f00\u548c\u4e2d\u7684\u6570\u90fd\u80fd\u88ab\u524d\u9762\u4e00\u4e2a\u5728\u524d\u7f00\u548c\u5185\u7684\u6570\u8865\u4e0a\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\u5f62\u5982 $111\\cdots 112\\texttt{-}\\texttt{-}\\texttt{-}\\cdots\\texttt{-}$ \u7684\u5e8f\u5217\u4e00\u5b9a\u53ef\u4ee5\u8868\u793a\u51fa $[1,S]$ \u5185\u6240\u6709\u7684\u6570\u3002\u5176\u4e2d $\\texttt{-}$ \u8868\u793a\u8fd9\u4e00\u4f4d\u53ef\u4ee5\u662f\u4efb\u610f\u6570\uff0c$S$ \u8868\u793a\u5e8f\u5217\u7684\u548c\u3002\n\n\u7136\u540e\u5bf9\u4e8e\u6240\u6709\u60c5\u51b5\uff0c\u5c31\u662f\u5728 $111\\cdots 112\\texttt{-}\\texttt{-}\\texttt{-}\\cdots\\texttt{-}$ \u524d\u9762\u518d\u6dfb\u52a0\u82e5\u5e72\u4e2a $2$\uff08\u53ef\u4ee5\u662f $0$ \u4e2a\uff09\u4ee5\u53ca\u540e\u9762\u4f1a\u5199\u5230\u7684\u4e24\u79cd\u7279\u6b8a\u60c5\u51b5\u3002\n\n\u8bbe\u539f\u5e8f\u5217\u4e3a $A$\uff0c$A$ \u53bb\u6389\u524d\u7f00 $2$ \u540e\u4e3a $A_{[i,n]}$\uff0c$A_{[i,n]}$ \u518d\u53bb\u6389\u524d\u7f00 $1$ \u540e\u4e3a $A_{[j,n]}$\u3002\n\n\u5148\u505a\u4e00\u904d $A_{[j,n]}$ \u7684\u524d\u7f00\u548c\uff0c\u5c06 $\\sum_{x=j}^kA_x$ \u7684\u7b54\u6848\u8bb0\u5f55\u4e3a $[j,k]$\u3002\n\n\u7136\u540e\u4ece $2$ \u5230 $\\sum_{k=i}^nA_k$ \u679a\u4e3e\u548c $s$\uff0c\u5982\u679c $s$ \u5df2\u7ecf\u6709\u7b54\u6848\u5219\u4e0d\u9700\u8981\u8bb0\u5f55\uff0c\u5426\u5219\u5c06 $s-1$ \u7684\u7b54\u6848\u7684\u5de6\u7aef\u70b9\u5411\u5de6\u6269\u5c55 $1$ \u5f97\u5230 $s$ \u7684\u7b54\u6848\uff0c\u5e76\u5c06 $1$ \u7684\u7b54\u6848\u8bb0\u4e3a $[i,i]$\u3002\n\n\u518d\u5bf9 $A_{[i,n]}$ \u505a\u524d\u7f00\u548c\uff0c\u8bbe $S(i,r)=\\sum_{k=i}^rA_k$\uff0c\u5219\u8bb0 $b_{S(i,r)}=r$\u3002\n\n\u7136\u540e\u9884\u5904\u7406 $p_k$ \u4ee3\u8868\u5bf9\u4e8e $k$\uff0c\u8865\u6700\u5c11\u7684 $2$ \u4f7f\u5f97\u8865\u5230\u4e00\u4e2a $b$ \u4e2d\u6709\u503c\u7684\u4f4d\u7f6e\u4f1a\u8865\u5230\u54ea\u3002\u5982\u679c $b_i$ \u6709\u503c\uff0c\u5219 $p_i=i$\u3002\u5426\u5219 $p_i=p_{i-2}$\u3002\n\n\u8fd9\u6837\u5bf9\u4e8e\u4e00\u6b21\u67e5\u8be2 $k$\uff0c\u5982\u679c $k$ \u5df2\u7ecf\u8bb0\u5f55\u6709\u7b54\u6848\u533a\u95f4 $[l,r]$\uff0c\u76f4\u63a5\u8f93\u51fa\u7b54\u6848\u533a\u95f4\uff0c\u5426\u5219\u8bbe $x=p_k$\u3002\u5982\u679c $i\\leq \\dfrac{k-x}{2}$\uff0c\u5219\u9700\u8981\u8865\u7684 $2$ \u8d85\u8fc7\u524d\u7f00 $2$ \u7684\u4e2a\u6570\uff0c\u8f93\u51fa `NIE`\uff1b\u5426\u5219\u5c31\u8865\u8fd9\u4e48\u591a\u4e2a $2$ \u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u7136\u540e\u662f\u4e24\u79cd\u7279\u6b8a\u60c5\u51b5\uff1a\n\n1. \u6574\u4e2a\u5e8f\u5217\u5168\u662f $2$\uff0c\u968f\u4fbf\u505a\u3002\n2. \u5e8f\u5217\u662f\u4e00\u6bb5 $2$ \u63a5\u4e00\u6bb5 $1$\uff0c\u6570\u4e00\u4e0b\u540e\u9762\u6709\u591a\u5c11\u4e2a $1$ \u7136\u540e\u5bf9\u4e8e $1$ \u4e0d\u591f\u7684\u67e5\u8be2\u5c31\u5f80\u524d\u8865 $2$\u3002\n\n\u65f6\u7a7a\u590d\u6742\u5ea6 $O(n+m)$\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nchar buf[(1<<21)+5], *p1 = buf, *p2 = buf;\n\ninline int qread() {\n\tchar c = getchar();\n\tint x = 0, f = 1;\n\twhile (c < '0' || c > '9') {\n\t\tif (c == '-') f = -1;\n\t\tc = getchar();\n\t}\n\twhile (c >= '0' && c <= '9') {\n\t\tx = x * 10 + c - '0';\n\t\tc = getchar();\n\t}\n\treturn x * f;\n}\n\nint n, q, a[1000005], sum[1000005], ansl[2000005], ansr[2000005], sumidx[2000005], pre[2000005];\n\ninline char readchar() {\n\tchar c = getchar();\n\twhile (c < 'A' || c > 'Z') c = getchar();\n\treturn c;\n}\n\ninline void Read() {\n\tn = qread(); q = qread();\n\tfor (int i = 1;i <= n;i++) {\n\t\tif (readchar() == 'T') a[i] = 2;\n\t\telse a[i] = 1;\n\t}\n}\n\ninline void Solve() {\n\tint idx1 = n + 1, idx2 = n + 1;\n\tfor (int i = 1;i <= n;i++) {\n\t\tif (a[i] == 1) {\n\t\t\tidx1 = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (idx1 == n + 1) {\n\t\tfor (int i = 1;i <= q;i++) {\n\t\t\tint k = qread();\n\t\t\tif (k & 1) puts(\"NIE\");\n\t\t\telse printf(\"1 %d\\n\", k >> 1);\n\t\t}\n\t\treturn;\n\t}\n\tfor (int i = idx1;i <= n;i++) {\n\t\tif (a[i] == 2) {\n\t\t\tidx2 = i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (idx2 == n + 1) {\n\t\tansl[1] = ansr[1] = idx1;\n\t\tfor (int i = 2;;i++) {\n\t\t\tif (ansr[i - 1] == n) break;\n\t\t\tansr[i] = ansr[i - 1] + 1;\n\t\t}\n\t} else {\n\t\tint sum = 0;\n\t\tfor (int i = idx2;i <= n;i++) {\n\t\t\tsum += a[i];\n\t\t\tansl[sum] = idx2; ansr[sum] = i;\n\t\t}\n\t\tfor (int i = idx1;i < idx2;i++) sum += a[i];\n\t\tansl[1] = ansr[1] = idx1;\n\t\tfor (int i = 2;i <= sum;i++) {\n\t\t\tif (!ansl[i]) {\n\t\t\t\tansl[i] = ansl[i - 1] - 1;\n\t\t\t\tansr[i] = ansr[i - 1];\n\t\t\t}\n\t\t}\n\t\tsum = 0;\n\t\tfor (int i = idx1;i <= n;i++) {\n\t\t\tsum += a[i];\n\t\t\tsumidx[sum] = i;\n\t\t}\n\t\tfor (int i = 3;i <= 2 * n;i++) {\n\t\t\tif (sumidx[i]) pre[i] = i;\n\t\t\telse pre[i] = pre[i - 2];\n\t\t}\n\t}\n\twhile (q--) {\n\t\tint k = qread();\n\t\tif (ansl[k]) printf(\"%d %d\\n\", ansl[k], ansr[k]);\n\t\telse {\n\t\t\tint p = pre[k], len = (k - p) / 2;\n\t\t\tif (len >= idx1 || !p) puts(\"NIE\");\n\t\t\telse printf(\"%d %d\\n\", idx1 - len, sumidx[p]);\n\t\t}\n\t}\n}\n\nint main() {\n\tRead();\n\tSolve();\n\treturn 0;\n}\n```",
        "postTime": 1627095777,
        "uid": 61088,
        "name": "Solystic",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u597d\u591a\u4eba\u8c8c\u4f3c\u90fd\u662f\u7528\u524d\u7f00\u7684\u6027\u8d28\u53bb\u505a\u7684\uff0c\u4e0d\u8fc7\u6211\u7528\u7684\u4e0d\u662f\u90a3\u79cd\u65b9\u6cd5\u3002\n\n\u9996\u5148\u5c31\u6709\u4e00\u4e2a\u663e\u7136\u7684\u66b4\u529b\u601d\u8def\uff1a\u6bcf\u6b21\u5904\u7406\u8be2\u95ee\u7684\u65f6\u5019\uff0c\u4ece1~n\u626b\u4e00\u904d\uff0c\u627e\u4ed6\u7684\u524d\u7f00\u548c\u662f\u5426\u548c\u524d\u9762\u7684\u67d0\u4e2a\u524d\u7f00\u548c\u5dee\u503c\u4e3ax\uff0c\u590d\u6742\u5ea6\u662f$O(nm)$\u7684\uff0c\u5982\u679c\u52a0\u4e0a\u79bb\u7ebf\u6392\u5e8f\u5904\u7406\u548c\u94fe\u8868\u4f18\u5316\u4ec0\u4e48\u7684\u53ef\u80fd\u4f1a\u5feb\u4e00\u4e9b~~\u53cd\u6b63\u6211\u62ff\u8fd9\u4e2a\u6c34\u4e8680\u5206\u2026\u2026~~\n\n\u8fd9\u6837\u663e\u7136\u662f\u8fc7\u4e0d\u53bb\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u53ea\u6709\u4e00\u6761\u8def\u53ef\u8d70\uff1a\u7814\u7a76\u53ea\u67091\u30012\u5e8f\u5217\u7684\u7279\u6b8a\u6027\u8d28\u3002\n\n\u7814\u7a76\u4e86\u534a\u5929\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u4e1c\u897f\u53ef\u4ee5\u8fdb\u884c\u5947\u5076\u6027\u7684\u8ba8\u8bba\u2014\u2014\u5982\u679c\u4e00\u4e2a\u6570x\u7684\u7b54\u6848\u662f\u533a\u95f4$[l,r]$\uff0c\u90a3\u4e48\u6bd4\u4e0d\u5927\u4e8e\u4ed6\u7684\u7684\u548c\u4ed6\u5947\u5076\u6027\u76f8\u540c\u7684\u6570\u90fd\u6709\u89e3\uff0c\u4e14\u5b58\u5728\u5305\u542b\u4e8e$[l,r]$\u7684\u7b54\u6848\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u6211\u4eec\u4e0d\u59a8\u8fd9\u6837\u60f3\uff0c\u5982\u679c\u628al\u6216r\u5f80\u91cc\u79fb\u52a8\u4e00\u4f4d\u7684\u8bdd\uff0c\u5c31\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\n\n1.$a[l]=2$\uff0c\u90a3\u4e48\u628al\u53f3\u79fb\u4e00\u4f4d\u5c31\u4f1a\u4f7f\u533a\u95f4\u548c\u51cf2\n\n2.$a[r]=2$\uff0c\u90a3\u4e48\u628ar\u5de6\u79fb\u4e00\u4f4d\u5c31\u4f1a\u4f7f\u533a\u95f4\u548c\u51cf2\n\n3.$a[l]=a[r]=1$\uff0c\u90a3\u4e48\u628al\u5de6\u79fb\u4e00\u4f4d\uff0c\u628ar\u53f3\u79fb\u4e00\u4f4d\u5c31\u4f1a\u4f7f\u533a\u95f4\u548c\u51cf2\n\n\u6240\u4ee5$x-2$\u7684\u7b54\u6848\u662f\u5305\u542b\u5728\u8fd9\u4e2a\u533a\u95f4\u4e2d\u7684\uff0c\u5f52\u7eb3\u53ef\u5f97\u4e0d\u8d85\u8fc7x\u7684\u5947\u5076\u6027\u76f8\u540c\u7684\u6570\u7684\u7b54\u6848\u90fd\u5305\u542b\u5728\u8fd9\u4e2a\u533a\u95f4\u4e2d\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5c31\u6709\u4e86\u4e2a\u505a\u6cd5\uff1a\u79bb\u7ebf\u5904\u7406\uff0c\u628a\u5947\u5076\u6027\u4e0d\u540c\u7684\u5206\u5f00\u5904\u7406\uff0c\uff08\u5047\u5982\u6211\u4eec\u6b63\u5728\u5904\u7406\u5076\u6570\uff0c\u5904\u7406\u5947\u6570\u7684\u6b65\u9aa4\u5b8c\u5168\u76f8\u540c~~\u6211\u76f4\u63a5\u590d\u5236\u7684\u4ee3\u7801~~\u7684\uff09\u7136\u540e\u4ece\u5927\u5230\u5c0f\u6392\u4e2a\u5e8f\uff0c\u5148\u627e\u5230\u6700\u5927\u7684\u6709\u89e3\u7684\u5076\u6570\uff0c$O(n)$\u627e\u5230\u4ed6\u7684\u89e3\uff0c\u7136\u540e\u5f00\u59cb\u5de6\u53f3\u7aef\u70b9\u6307\u9488\u5f80\u91cc\u79fb\u52a8\u627e\u540e\u9762\u6bd4\u4ed6\u5c0f\u7684\u5076\u6570\u7684\u7b54\u6848\u5c31\u884c\u4e86\u3002\u7531\u4e8e\u6307\u9488\u662f\u5355\u5411\u79fb\u52a8\u7684\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u4e3a$O(n)$\u3002\n\n\u7136\u540e\u6211\u4eec\u4e00\u4ea4\uff0c\u53d1\u73b0TLE\u4e86\uff0c\u5206\u8ddf$O(nm)$\u66b4\u529b\u4e00\u6837\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u6ce8\u610f\u6211\u521a\u624d\u8bf4\u7684\u201c\u5148\u627e\u5230\u6700\u5927\u7684\u6709\u89e3\u7684\u6570\u201d\uff0c\u6bcf\u6b21\u67e5\u627e\u90fd\u662f$O(n)$\u7684\uff0c\u5982\u679c\u65e0\u89e3\u7684\u6570\u7279\u522b\u591a\u7684\u8bdd\u4f1a\u88ab\u5361\u6210$O(nm)$\u7684\u3002\n\n\u7136\u540e\u8003\u8651\u4ed6\u7684\u4f18\u5316\uff0c\u4e0a\u9762\u8bf4\u4e86\uff0c\u5982\u679c\u8fd9\u4e2a\u6570\u6709\u89e3\uff0c\u90a3\u4e48\u6bd4\u4ed6\u5c0f\u7684\u5c31\u4e00\u5b9a\u6709\u89e3\uff0c\u6240\u4ee5\u8fd9\u4e2a\u4e1c\u897f\u662f\u6ee1\u8db3\u5355\u8c03\u6027\u7684\uff0c\u53ef\u4ee5\u4e8c\u5206\u7b54\u6848\u3002\u4e8e\u662f\u6211\u4eec\u5c31\u4e8c\u5206\u51fa\u6700\u5927\u7684\u6709\u89e3\u7684\u6570\u7136\u540e\u518d\u7528\u4e0a\u8ff0\u65b9\u6cd5\u5904\u7406\u5c31\u884c\u4e86\u3002\u603b\u590d\u6742\u5ea6$O(nlogn)$\u3002\n\n~~\u8fd8\u6709\u5c31\u662f\u590d\u5236\u4ee3\u7801\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u590d\u5236\u5168\u2026\u2026\u6211\u5904\u7406\u5947\u6570\u7684\u4ee3\u7801\u76f4\u63a5\u590d\u5236\u7684\u5076\u6570\u7684\uff0c\u7136\u540e\u6ca1\u590d\u5236\u5168\u2026\u2026WA\u4e86\u534a\u5929\u2026\u2026~~\n\n\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\ninline int get(){\n\tint y;scanf(\"%d\",&y);return(y);\n\tint n;char c;while((c=getchar())||1)if(c>='0'&&c<='9')break;\n\tn=c-'0';while((c=getchar())||1){\n\t\tif(c>='0'&&c<='9')n=n*10+c-'0';\n\t\telse return(n);\n\t}\n}\nunsigned char ints[1000001];int sum[1000001],pos[5000001];//pos\u4e3a\u524d\u7f00\u548c\u7684\u51fa\u73b0\u4f4d\u7f6e\ntypedef struct _n{\n\tint data;int index;\n\tfriend bool operator <(const _n &a,const _n &b){\n\t\treturn(a.data>b.data);\n\t}\n}node;int n;\nint ref[200];\nchar str[1000002];\ninline void uget(){\n\tcin>>str+1;\n\tfor(register int i=1;i<=n;i++){\n\t\tints[i]=ref[str[i]];sum[i]=ints[i]+sum[i-1];pos[sum[i]]=i;\n\t}\n}\nint ansl[1000001],ansr[1000001];\nnode ou[1000001],ji[1000001];\nint main(){memset(pos,0x7f,sizeof(pos));ref['W']=1;ref['T']=2;\n\tn=get();int m=get();uget();\n\tint ptrji=0,ptrou=0;pos[0]=0;bool bswitch=1;\n\tfor(register int i=1;i<=m;i++){\n\t\tint a=get();\n\t\tif(a&1){\n\t\t\tji[ptrji].data=a;ji[ptrji].index=i;ptrji++;\n\t\t}else{\n\t\t\tou[ptrou].data=a;ou[ptrou].index=i;ptrou++;\n\t\t}//\u5206\u79bb\u5947\u5076\n\t}sort(ou,ou+ptrou);sort(ji,ji+ptrji);\n\tint l=0,r=ptrou-1;int ans=-1;\n\twhile(l<=r){//\u4e8c\u5206\u6700\u5927\u7684\u6709\u89e3\u7684\u6570\n\t\tint mid=(l+r)>>1;\n\t\tfor(register int i=1;i<=n;i++){\n\t\t\tif(sum[i]>=ou[mid].data){\n\t\t\t\tif(pos[sum[i]-ou[mid].data]!=0x7f7f7f7f){\n\t\t\t\t\tansl[ou[mid].index]=pos[sum[i]-ou[mid].data]+1,ansr[ou[mid].index]=i;\n\t\t\t\t\tr=mid-1;ans=mid;goto s;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tl=mid+1;\n\t\ts:;\n\t}\n\tif(ans!=-1){\n\t\tl=ansl[ou[ans].index],r=ansr[ou[ans].index];int lst=ou[ans].data;\n\t\tfor(register int i=ans+1;i<ptrou;i++){\n\t\t\tint tmp=lst;\n\t\t\twhile(tmp!=ou[i].data){//\u5185\u5411\u6307\u9488\u5904\u7406\n\t\t\t\ttmp-=2;\n\t\t\t\tif(ints[l]==1&&ints[r]==1){\n\t\t\t\t\tl++;r--;\n\t\t\t\t}else{\n\t\t\t\t\tif(ints[l]==2)l++;\n\t\t\t\t\telse r--;\n\t\t\t\t}\n\t\t\t}ansl[ou[i].index]=l;ansr[ou[i].index]=r;lst=ou[i].data;\n\t\t}\n\t}\n\tl=0,r=ptrji-1;ans=-1;\n\twhile(l<=r){\n\t\tint mid=(l+r)>>1;\n\t\tfor(register int i=1;i<=n;i++){\n\t\t\tif(sum[i]>=ji[mid].data){\n\t\t\t\tif(pos[sum[i]-ji[mid].data]!=0x7f7f7f7f){\n\t\t\t\t\tansl[ji[mid].index]=pos[sum[i]-ji[mid].data]+1,ansr[ji[mid].index]=i;\n\t\t\t\t\tr=mid-1;ans=mid;goto s1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tl=mid+1;\n\t\ts1:;\n\t}\n\tif(ans!=-1){\n\t\tl=ansl[ji[ans].index],r=ansr[ji[ans].index];int lst=ji[ans].data;\n\t\tfor(register int i=ans+1;i<ptrji;i++){\n\t\t\tint tmp=lst;\n\t\t\twhile(tmp!=ji[i].data){\n\t\t\t\ttmp-=2;\n\t\t\t\tif(ints[l]==1&&ints[r]==1){\n\t\t\t\t\tl++;r--;\n\t\t\t\t}else{\n\t\t\t\t\tif(ints[l]==2)l++;\n\t\t\t\t\telse r--;\n\t\t\t\t}\n\t\t\t}ansl[ji[i].index]=l;ansr[ji[i].index]=r;lst=ji[i].data;\n\t\t}\n\t}\n\tfor(register int i=1;i<=m;i++){\n\t\tif(!ansl[i]){\n\t\t\tprintf(\"NIE\\n\");\n\t\t}else{\n\t\t\tprintf(\"%d %d\\n\",ansl[i],ansr[i]);\n\t\t}\n\t}\n\treturn(0);\n}\n```",
        "postTime": 1527755864,
        "uid": 56917,
        "name": "\u989c\u4f1f\u4e1a_C_Asm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "\u653e\u5728\u6700\u524d\u9762\uff1a\u66b4\u529b\u6c42\u53c9\u6216\u8bc1\u660e\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u6b63\u786e\u6027\u3002\r\n\r\n***\r\n\r\n\u63d0\u4f9b\u4e00\u79cd\u5728\u7ebf\u7684\u5f88\u7b80\u5355\u7684\u4e0d\u8d39\u8111\u5b50\u7684~~\u4f46\u662f\u4e0d\u77e5\u9053\u6b63\u786e\u6027\u7684~~\u65b9\u6cd5\u3002\uff08\u4ec5\u4f9b\u53c2\u8003\uff09\r\n\r\n\u9996\u5148\uff0c\u65e2\u7136\u662f\u5728\u7ebf\u7684\uff0c\u6211\u4eec\u5bb9\u6613\u60f3\u5230\u5bf9\u4e8e\u6bcf\u4e2a $k$\uff0c\u8fdb\u884c\u4e00\u6b21\u5c3a\u53d6\u6cd5\uff0c\u90a3\u4e48\u663e\u7136\uff0c\u6211\u4eec\u5bf9\u4e8e $[l,r]$ \u7684\u6307\u9488\uff0c\u5728\u65e0\u89e3\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u79fb\u52a8 $O(n)$ \u6b21\uff0c\u6240\u4ee5\u6700\u574f\u590d\u6742\u5ea6 $O(nm)$\u3002\r\n\r\n\u8003\u8651\u4f18\u5316\u3002\r\n\r\n***\r\n\r\n\u4f18\u5316 $1$\uff1a\u5f53 $k$ \u6bd4\u8f83\u5927\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u4ece\u5de6\u5f80\u53f3\u79fb\u52a8 $r$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5f00\u9500\u6bd4\u8f83\u5927\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u5728\u5c3a\u53d6\u524d\u8bb0\u5f55\u4e00\u4e2a\u6570\u7ec4 $S$ \u8868\u793a\u4ef7\u683c\u7684\u524d\u7f00\u548c\u3002\u56e0\u4e3a $S$ \u5177\u6709\u5355\u8c03\u6027\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u4e8c\u5206\u627e\u5230 $l=1$ \u65f6\u5bf9\u5e94\u7684\u5de6\u7aef\u70b9\u3002\r\n\r\n\u6b64\u65f6\u6700\u574f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ecd\u7136\u662f $O(nm)$\u3002\r\n\r\n***\r\n\r\n\u4f18\u5316 $2$\uff1a\u53d1\u73b0\u6b64\u65f6 $r$ \u7684\u79fb\u52a8\u4f18\u5316\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u76f4\u63a5\u4f18\u5316 $l$ \u7684\u79fb\u52a8\u6216\u8005\u76f4\u63a5\u79fb\u52a8 $[l,r]$ \u8fd9\u4e2a\u6574\u4f53\u3002\r\n\r\n\u8bb0 $c_i$ \u8868\u793a $i$ \u53ca $i$ \u540e\u5171 $c_i$ \u4e2a\u5143\u7d20\u4e0e $i$ \u76f8\u540c\uff0c$s_i$ \u4e3a\u7b2c $i$ \u4e2a\u5b57\u7b26\u6240\u5bf9\u5e94\u7684\u503c\u3002\r\n\r\n\u6b64\u65f6\u4ecd\u7136\u662f $l=1$ \u65f6\u6c42\u51fa $r$\uff0c\u4f46\u662f $r$ \u5e94\u8be5\u8981\u4fdd\u8bc1 $S_r-S_{l-1}<k$ \u4e14 $S_{r+1}-S_{l-1}\\ge k$\u3002\r\n\r\n\u6b64\u65f6\u6211\u4eec\u5bf9\u4e0d\u540c\u7684\u60c5\u51b5\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff1a\r\n\r\n\u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u53ea\u79fb\u52a8 $r$\u3002\r\n\r\n\u7531\u4e8e $S_{r+1}-S_{l-1}\\ge k$ \u4e14 $s_i$ \u7684\u4ef7\u683c\u4e00\u5b9a\u662f\u6709\u503c\u7684\uff0c\u4e8e\u662f $S_{r+2}-S_{l-1}>k$\uff0c\u6240\u4ee5\u6211\u4eec\u6269\u5c55\u53f3\u7aef\u70b9\u65f6\u6700\u591a\u6269\u5c55\u4e00\u4e2a\u5143\u7d20\u3002\u5982\u679c $S_{r+1}-S_{l-1}$ \u5373 $[l,r+1]$ \u7684\u548c\u4e3a $k$\uff0c\u90a3\u4e48\u6b64\u65f6 $[l,r+1]$ \u663e\u7136\u4e3a\u53ef\u884c\u89e3\u3002\r\n\r\n\u6b64\u65f6\u6211\u4eec\u53ea\u79fb\u52a8 $r$ \u662f\u663e\u7136\u4e0d\u53ef\u80fd\u7684\u4e86\uff0c\u56e0\u4e3a $S_r-S_{l-1}<k$\u3002\u5e76\u4e14\u6b64\u65f6\u80fd\u4fdd\u8bc1 $S_r-S_{l-1}=k-1$\u3002\u56e0\u4e3a $S_r-S_{l-1}$ \u53ea\u80fd\u4e3a $k-1$ \u6216 $k-2$\uff0c\u4f46\u662f\u5f53 $S_r-S_{l-1}=k-2$ \u65f6\uff0c\u82e5 $s_{r+1}=1$\uff0c\u90a3\u4e48 $r$ \u53ef\u4ee5\u7ee7\u7eed\u5411\u53f3\u79fb\u52a8\uff0c\u82e5 $s_{r+1}=2$\uff0c\u90a3\u4e48\u6b64\u65f6\u6211\u4eec\u5c31\u5728\u53ea\u79fb\u52a8\u53f3\u7aef\u70b9\u7684\u60c5\u51b5\u4e0b\u7279\u5224\u6389\u4e86\u3002\u540c\u65f6\uff0c\u5f53 $S_r-S_{l-1}=k-1$ \u65f6\uff0c\u82e5 $s_{r+1}=1$\uff0c\u90a3\u4e48\u4e5f\u4f1a\u88ab\u7279\u5224\u6389\uff0c\u4e8e\u662f $s_{r+1}=2$\u3002\u6b64\u65f6\uff0c\u82e5\u53ea\u79fb\u52a8 $l$\uff0c\u90a3\u4e48 $S_{r}-S_{l}\\ge2$\uff0c\u662f\u53ef\u4ee5\u53d6 $s_{r+1}$ \u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u53ea\u79fb\u52a8 $l$\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u8003\u8651\u79fb\u52a8 $[l,r]$ \u8fd9\u4e2a\u6574\u4f53\u3002\r\n\r\n\u56e0\u4e3a $s_{r+1}$ \u5df2\u7ecf\u786e\u5b9a\u4e86\uff0c\u6240\u4ee5\u53ef\u4ee5\u5bf9 $s_l$ \u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\u3002\r\n\r\n\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a$s_l=2$\u3002\r\n\r\n\u56e0\u4e3a\u540c\u65f6\u79fb\u52a8 $l,r$ \u4f1a\u4f7f $[l,r]$ \u7684\u548c\u4e0d\u53d8\uff0c\u5bb9\u6613\u53d1\u73b0\u4e3a\u4e86\u4fdd\u8bc1 $S_r-S_{l-1}=k-1$ \u7684\u7279\u6b8a\u6027\u8d28\uff0c\u6211\u4eec\u53ea\u80fd\u5c06 $[l,r]$ \u79fb\u52a8\u76f8\u540c\u7684\u6570\u3002\r\n\r\n\u6b64\u65f6\uff0c\u6211\u4eec\u79fb\u52a8 $\\min\\{c_l,c_{r+1}\\}$ \u6b21\u540e\uff0c\u624d\u6682\u65f6\u4e0d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u6211\u4eec\u6b64\u65f6\u53ef\u4ee5\u76f4\u63a5 $val=\\min\\{c_l,c_{r+1}\\},l\\gets l+val,r\\gets r+val$\u3002\r\n\r\n\u7b2c\u4e09\u79cd\u60c5\u51b5\uff1a$s_l=1$\u3002\r\n\r\n\u6b64\u65f6\u6ce8\u610f\u5230 $S_r-S_{l-1}=k-1$\uff0c\u7531\u4e8e $s_{r+1}=s_l+1$\uff0c\u6240\u4ee5 $S_{r+1}-S_l=k$\uff0c\u90a3\u4e48\u6b64\u65f6 $[l+1,r+1]$ \u5c31\u662f\u4e00\u7ec4\u53ef\u884c\u89e3\u3002\r\n\r\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1f\r\n\r\n\u6700\u574f\u7684\u8bdd\u4e2a\u4eba\u8ba4\u4e3a\u662f $O(nm)$\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u8fdc\u8fdc\u8dd1\u4e0d\u6ee1\uff0c~~\u6e05\u7eaf\u5c11\u5973~~ tzl \u8ba4\u4e3a\u8fd9\u4e2a\u4e1c\u897f\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(m)$ \u4e58\u4e0a\u4e00\u4e2a\u5927\u5e38\u6570\uff0c\u8fd9\u4e2a\u610f\u89c1\u4fdd\u7559\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u59d1\u4e14\u8bb0\u4f5c $O(km)$ \uff08$k$ \u662f\u5927\u5e38\u6570\uff09\uff0c\u6682\u65f6\u4e0d\u77e5\u9053\u6700\u574f\u80fd\u4e0d\u80fd\u5361\u5230 $O(nm)$\u3002\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nconst int maxn=1e6+5;\r\nint n,m,k,c[maxn],mp[26],S[maxn];\r\nstring s;\r\ninline void work(int x){\r\n\tint l=1,r=lower_bound(S+1,S+n+1,x)-S-1;\r\n\twhile(r<n){\r\n\t\tif(S[r+1]-S[l-1]==x){\r\n\t\t\tprintf(\"%d %d\\n\",l,r+1);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(s[l]==s[r+1]){\r\n\t\t\tint val=min(c[l],c[r+1]);\r\n\t\t\tl+=val,r+=val;\r\n\t\t} else{\r\n\t\t\tif(s[l]=='T'){\r\n\t\t\t\tint val=min(c[l],c[r+1]/2);\r\n\t\t\t\tl+=val,r+=val*2;\r\n\t\t\t} else{\r\n\t\t\t\tprintf(\"%d %d\\n\",l+1,r+1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tputs(\"NIE\");\r\n}\r\nint main(){\r\n\tmp['T'-'A']=2,mp['W'-'A']=1;\r\n\tscanf(\"%d%d\",&n,&m);\r\n\tcin>>s;\r\n\ts=' '+s;\r\n\tc[n]=1;\r\n\tfor(int i=1;i<=n;++i)\r\n\t\tS[i]=S[i-1]+mp[s[i]-'A'];\r\n\tfor(int i=n-1;i;--i)\r\n\t\tif(s[i]==s[i+1])\r\n\t\t\tc[i]=c[i+1]+1;\r\n\t\telse\r\n\t\t\tc[i]=1;\r\n\twhile(m--){\r\n\t\tscanf(\"%d\",&k);\r\n\t\twork(k);\r\n\t}\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1680187711,
        "uid": 556362,
        "name": "UnnamedOrNamed",
        "ccfLevel": 5,
        "title": "P3514 [POI2011]LIZ-Lollipop \u9898\u89e3"
    },
    {
        "content": "1. \u53d1\u73b0\u5b58\u5728 $k$\uff0c\u5fc5\u7136\u5b58\u5728 $k-2$\u3002\u4e24\u8fb9\u5b58\u5728 $2$\uff0c\u76f4\u63a5\u5220\u6389 $2$\u3002\u4e24\u8fb9\u90fd\u662f $1$\uff0c\u90fd\u5220\u3002\u4e8e\u662f\u6309\u7167\u5947\u5076\u5206\u7c7b\u3002\u5982\u679c\u8be2\u95ee\u4e0d\u8d85\u8fc7\u5bf9\u4e8e\u5947\u5076\u6027\u80fd\u5230\u8fbe\u7684\u6700\u5927\u503c\u5c31\u6709\u89e3\u3002\n\n2. \u5bf9\u4e8e\u533a\u95f4 $[1,n]$ \u7684\u548c\u4e3a $x$\uff0c\u90a3\u4e48 $x$ \u7684\u5947\u5076\u6027\u90a3\u4e2a\u6700\u5927\u503c\u662f $x$\u3002\u8003\u8651\u627e\u5947\u5076\u6027\u76f8\u53cd\u7684\u6700\u5927\u503c\u3002\u90a3\u4e48\u6709\u4e00\u4e2a\u7ed3\u8bba\uff0c\u5c31\u662f\u53ef\u4ee5\u627e\u4e00\u6bb5\u540e\u7f00\u6216\u8005\u524d\u7f00\u5f53\u505a\u8fd9\u4e2a\u6700\u5927\u503c\u3002 \n\n\u8981\u6ee1\u8db3\u548c\u6700\u5927\uff0c\u548c\u7684\u5947\u5076\u6027\u4e0d\u53d8\u3002\u4e24\u8fb9\u90fd\u662f $1$\uff0c\u5219\u90fd\u4e0d\u5220\u3002\u4e24\u8fb9\u5b58\u5728\u4e00\u4e2a $2$\uff0c\u4e5f\u4e0d\u5fc5\u5220\u3002\u4e8e\u662f\u53ea\u9700\u8981\u5220\u4e00\u5bf9 $1,2$ \u4e2d\u7684 $1$\u3002\n\n\u7136\u540e\u5206\u522b\u6a21\u62df\u8fd9\u4e2a\u8fc7\u7a0b\u5373\u53ef\u3002\n\n```cpp\npair<int,int>b[MAX];\nint n,m,pre[MAX],mx[2];\nint a[MAX],x,xx;char s;\nsigned main(){\n\tn=read(),m=read();\n\tfor(register int i=1;i<=n;++i) {cin>>s;if(s == 'T') a[i] = 2 ; else a[i] = 1;pre[i] = pre[i-1] + a[i];}\n\tx = pre[n];mx[pre[n] & 1] = pre[n];\n\tint l = 1,r = n; b[x] = mp(1,n);\n\twhile(l<=r){\n\t\tx-=2;if(a[l] == a[r] && a[l] == 1)++l,--r,b[x] = mp(l,r);\n\t\telse if(a[l] == 2)++l,b[x] = mp(l,r);\n\t\telse if(a[r] == 2)--r,b[x] = mp(l,r);\n\t}\n\tx = 0; l = r = -1;\n\tfor(register int i=1;i<=n;++i) if((pre[i] & 1 ) ^ (pre[n] & 1))if(pre[i] > x)x = pre[i],l=1,r=i;\n\tfor(register int i=n;i;--i) if((pre[n] - pre[i-1] & 1) ^ (pre[n] & 1))if(pre[n] - pre[i-1] > x)x = pre[n] - pre[i-1],l = i, r = n;\n\tif(l!=-1 && r!=-1){\n\t\tmx[x&1] = x, b[x] = mp(l,r);\n\t\twhile(l<=r){\n\t\t\tx-=2;if(a[l] == a[r] && a[l] == 1)++l,--r,b[x] = mp(l,r);\n\t\t\telse if(a[l] == 2)++l,b[x] = mp(l,r);\n\t\t\telse if(a[r] == 2)--r,b[x] = mp(l,r);\n\t\t}\t\t\n\t}\n\twhile(m--){int t =read();if(t<=mx[t&1]) printf(\"%d %d\\n\",b[t].first,b[t].second);else puts(\"NIE\");}\n\treturn 0;\n}\n```",
        "postTime": 1659008277,
        "uid": 119062,
        "name": "Lates",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3514 [POI2011]LIZ-Lollipop"
    },
    {
        "content": "\u5e8f\u5217\u53ea\u6709 $1$ \u548c $2$ \u3002\n\n\u5047\u5982\u73b0\u5728\u6709\u4e2a\u5b50\u4e32\u662f $22222...22$ \uff0c\n\n\u90a3\u4e48 $k$ \u53ef\u4ee5\u662f $2,4,6,8,...$ \u3002\n\n\u5982\u679c\u8fd9\u4e2a\u5b50\u4e32\u65c1\u8fb9\u6709\u4e2a $1$ \uff0c\n\n\u5982 $122222222...22$ \u6216\u662f $22222222...221$ \uff0c\n\n\u90a3\u4e48\u73b0\u5728 $k$ \u53ef\u4ee5\u53d6 $[1,sum]$ \u6240\u6709\u6570 \u3002\n\n------------\n\n\u73b0\u5728\u7ed9\u4e86\u6211\u4eec\u4e00\u4e2a\u5e8f\u5217 $a$ \uff0c \u660e\u663e $k$ **\u53ef\u4ee5** \u662f $sum$ \uff0c \u4f46\u662f\u5982\u679c\u6700\u5916\u9762\u90fd\u662f\u4e00\u5806 $2$ \u6211\u4eec\u5c31\u4e0d\u80fd\u53d6\u5230 $sum-1$ \u3002\n\n\u6211\u4eec\u53d1\u73b0\u5982\u679c\u6709\u4e00\u4e2a\u8ddd\u79bb\u8fb9\u7f18\u6700\u8fd1\u7684 $1$ \u6211\u4eec\u628a\u8fd9\u4e2a $1$ \u5230\u8fb9\u754c\u7684\u6240\u6709\u7684 $2$ \u5168\u5220\u6389\u540e\uff0c\u5c31\u53ef\u4ee5\u6539\u53d8 $k$ \u7684\u5947\u5076\u6027\u4e86\u3002\n\n\u5047\u8bbe\u9700\u8981\u5220 $p$ \u4e2a $2$ \uff0c\u90a3\u4e48 $k$ \u53ef\u4ee5\u53d6 \n\n$ [1,sum-2p] | \\{sum-2p,sum-2(p-1),sum-2(p-2),...,sum\\} $\n\n\u6309\u7167\u8fd9\u4e2a\u601d\u8def\u628a\u65b9\u6848\u5199\u51fa\u6765\u5373\u53ef\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2000010;\nint n,m;\nint near,sum1[N];\nchar chr[N];\nint l[N],r[N];\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tscanf(\"%s\",chr+1);\n\tfor(int i=1;i<=n;i++){\n\t\tif(chr[i]=='W'){\n\t\t\tnear=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor(int i=n;i>=1;i--){\n\t\tif(chr[i]=='W'){\n\t\t\tif((n-i)<(near-1)){\n\t\t\t\tnear=i;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tsum1[i]=sum1[i-1];\n\t\tif(chr[i]=='W')sum1[i]+=1;\n\t\telse sum1[i]+=2;\n\t}\n\tint len=min(n-near,near-1);\n\tif(len==n-near){\n\t\tfor(int i=n;i>=near;i--){\n\t\t\tl[sum1[i]]=1;r[sum1[i]]=i;\n\t\t}\n\t\tfor(int i=1;i<=near-1;i++){\n\t\t\tl[sum1[near-1]-sum1[i-1]]=i;\n\t\t\tr[sum1[near-1]-sum1[i-1]]=near-1;\n\t\t}\n\t\tfor(int i=1;i<=near;i++){\n\t\t\tl[sum1[near]-sum1[i-1]]=i;\n\t\t\tr[sum1[near]-sum1[i-1]]=near;\n\t\t}\n\t}\n\telse{\n\t\tfor(int i=1;i<=near;i++){\n\t\t\tl[sum1[n]-sum1[i-1]]=i;\n\t\t\tr[sum1[n]-sum1[i-1]]=n;\n\t\t}\n\t\tfor(int i=n;i>=near;i--){\n\t\t\tl[sum1[i]-sum1[near-1]]=near;\n\t\t\tr[sum1[i]-sum1[near-1]]=i;\n\t\t}\n\t\tfor(int i=n;i>=near+1;i--){\n\t\t\tl[sum1[i]-sum1[near]]=near+1;\n\t\t\tr[sum1[i]-sum1[near]]=i;\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++){\n\t\tint k;\n\t\tscanf(\"%d\",&k);\n\t\tif(l[k]!=0&&r[k]!=0){\n\t\t\tprintf(\"%d %d\\n\",l[k],r[k]);\n\t\t}\n\t\telse{\n\t\t\tprintf(\"NIE\\n\");\n\t\t}\n\t}\n}\n```\n\n\n\n",
        "postTime": 1610412659,
        "uid": 104319,
        "name": "Why_not_use_longlong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "#### \u8fd9\u662f\u4e00\u9053\u597d\u73a9\u7684\u601d\u7ef4\u9898\n##### \u6211\u7528\u4e86\u4e00\u4e2a\u6e05\u5947\u7684\u601d\u8def\n\u5bf9\u4e8e\u4e00\u4e2a\u53ea\u67091\u548c2\u7684\u5e8f\u5217\uff0c\u5982\u679c\u8fd9\u4e2a\u5e8f\u5217\u5934\u662f1\uff0c\u5219\u4ece1\u5230\u8fd9\u4e2a\u5e8f\u5217\u7684\u603b\u5408\u7684\u503c\uff081\u5230sum[n]\u95f4\u4e00\u4e2a\u503c\uff09\uff0c\u603b\u6709\u4e00\u4e2a\u6570k\u53ef\u4ee5\u4f7f\u5f97a[1]\u5230a[k]\u7684\u548c\u6216a[2]\u5230a[k]\u7684\u548c\u4e3a\u8fd9\u4e2a\u503c\u3002\n\n### \u8bc1\u660e\u5982\u4e0b\uff1a\n#### \u56e0\u4e3a1<=a[k]<=2,\u5219sum[k+1]<=sum[k]+2\n\n#### \u56e0\u4e3aa[1]=1,\u5219sum[k+1]-a[1]<=sum[k]+1\n\n#### \u5f97\u5230\n#### sum[k]+1>=sum[k+1]-a[1]\n#### sum[k+1]-a[1]+1=sum[k+1]\n\n#### \u5f97\u5230\u8fde\u7eed\u5e8f\u5217\uff0c\u8bc1\u6bd5\u3002\n\u5219\u5982\u679c\u6709\u4e00a[i]=1,k<=sum[n]-sum[i-1],\u603b\u6709\u4e00\u4ee5a[i]\u4e3a\u5934\u7684\u5e8f\u5217\u548c\u4e3ak,\u8fd9\u79cd\u60c5\u51b5\u53ea\u9700\u4ece\u8fd9\u4e2ai\u6700\u5c0f\u7684a[i]=1,\u5f00\u59cb\u4e8c\u5206\u5e8f\u5217\u5c3e,\u7136\u540e\u8f93\u51fa.\n##### \u5bb9\u6613\u5f97\u5230\u8fd9\u4e2asum[i-1]\u8d8a\u5c0f\u8d8a\u597d\uff0c\u5219\u6bcf\u6b21\u53ea\u9700\u5bfb\u627e\u7b2c\u4e00\u4e2ai\uff08a[i]=1)\n##### \u82e5sum[i-1]>sum[n]-sum[j]\uff08j\u4e3a\u6700\u540e\u4e00\u4e2ai\u6240\u5728\u4f4d\u7f6e),\u5219\u7ffb\u8f6c\u5e8f\u5217\n\n\u5982\u679c\u8fd9\u4e2ai\u4e0d\u6ee1\u8db3a[i]=1,k<=sum[n]-sum[i-1]\uff0c\u5219\u6c42a[r,n]\uff08r<i)\u548c\u4e3ak,\u56e0\u4e3a\u5728\u7b2c\u4e00\u4e2a1\u524d\u6240\u6709\u6570\u90fd\u4e3a2,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u6c42\u51far.\n\n## \u4ee3\u7801\u5982\u4e0b\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long n,m,a[1000005],qzh[1000005],ywz[1000005],kz=1e9,jl,pd,xk,ppd;\n\nint main() {\n\tcin>>n>>m;\n\tfor(int i=1; i<=n; i++) {\n\t\tchar q;\n\t\tcin>>q;\n\t\tif(q=='T') a[i]=2;\n\t\telse a[i]=1;\n\t\tqzh[i]=qzh[i-1]+a[i];\n\t}\n\tfor(int i=n; i>=1; i--) {\n\t\tif(kz==1e9) jl=i;\n\t\tif(a[i]==1) kz=i,ppd=1;\n\t\tywz[i]=kz;\n\t}\n\tif(qzh[ywz[1]]>qzh[n]-qzh[jl-1]) {\n\t\tpd=1;\n\t\tfor(int i=1; i<=n/2; i++) {\n\t\t\tswap(a[i],a[n-i+1]);\n\t\t}\n\t}\n\tkz=1e9;\n\tfor(int i=n; i>=1; i--) {\n\t\tif(a[i]==1) kz=i;\n\t\tywz[i]=kz;\n\t}\n\tfor(int i=1;i<=n;i++) qzh[i]=qzh[i-1]+a[i];\n\txk=qzh[n]-qzh[ywz[1]-1];\n\tfor(int i=1; i<=m; i++) {\n\t\tint q;\n\t\tcin>>q;\n\t\tif(q>qzh[n]||(q>xk&&(q-xk)%2==1)) {\n\t\t\tcout<<\"NIE\"<<\"\\n\";\n\t\t\tcontinue;\n\t\t}\n\t\tif(q<=xk) {\n\t\t\tint l=ywz[1]+1,r=n,mid;\n\t\t\twhile(l<=r) {\n\t\t\t\tmid=(l+r)>>1;\n\t\t\t\tif(qzh[mid]-qzh[ywz[1]]>q) r=mid-1;\n\t\t\t\telse l=mid+1;\n\t\t\t}\n\t\t\tif(qzh[r]-qzh[ywz[1]]==q) {\n\t\t\t\tif(!pd) cout<<ywz[1]+1<<\" \"<<r<<\"\\n\";\n\t\t\t\telse cout<<n-r+1<<\" \"<<n-(ywz[1]+1)+1<<\"\\n\";\n\t\t\t\tcontinue;\n\t\t\t}else{\n\t\t\t\tif(!pd) cout<<ywz[1]<<\" \"<<r<<\"\\n\";\n\t\t\t\telse cout<<n-r+1<<\" \"<<n-(ywz[1])+1<<\"\\n\";\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}else{\n\t\t\tq-=xk;\n\t\t\tq/=2;\n\t\t\tif(!pd) cout<<ywz[1]-q<<\" \"<<n<<\"\\n\";\n\t\t\telse cout<<1<<\" \"<<n-(ywz[1]-q)+1<<\"\\n\";\n\t\t}\n\t}\n\treturn 0;\n}//Rin is a big fAKer.\n```\n",
        "postTime": 1603014364,
        "uid": 220969,
        "name": "zc_li",
        "ccfLevel": 7,
        "title": "P3514"
    },
    {
        "content": "[[POI2011]LIZ-Lollipop](https://www.luogu.com.cn/problem/P3514)\n\n### \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u51fa\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$\uff0c\u6709 $a_i \\in \\{1,2\\}$\uff0c$m$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u7ed9\u5b9a $k$\uff0c\u6c42 $l,r$ \u4f7f\u5f97 $k=\\sum_{i=l}^{r}a_i$\uff0c\u82e5\u4e0d\u5b58\u5728\uff0c\u8f93\u51fa `NIE`\uff0c\u6709 Special Judge\uff08\u8bfb\u5165\u65f6 $a$ \u4e3a\u5b57\u7b26\u4e32\uff0c`W` \u4ee3\u8868 $1$\uff0c`T` \u4ee3\u8868 $2$\uff09\n\n$n,m \\leqslant 10^6$\uff0c$1 \\leqslant k \\leqslant2 \\times 10^6$\n\n### \u601d\u8def\n\u89c2\u5bdf\u5230 $k$ \u8f83\u5c0f\uff0c\u8003\u8651\u4ece\u8fd9\u91cc\u5165\u624b\n\n\u8bbe $l_k,r_k$ \u6ee1\u8db3 $k=\\sum_{i=l_k}^{r_k}a_i$\uff0c\u8003\u8651\u4ece $k$ \u8f6c\u79fb\u5230 $k-2$\n\n- $l_k=2$\uff0c$l_{k-2}=l_k+1$\uff0c$r_{k-2}=r_k$\n- $r_k=2$\uff0c$l_{k-2}=l_k$\uff0c$r_{k-2}=r_k-1$\n- \u5426\u5219\uff0c\u6709 $l_k=1$ \u4e14 $r_k=1$\uff0c$l_{k-2}=l_k+1$\uff0c$r_{k-2}=r_k-1$\n\n\u5148\u7b97\u51fa $a$ \u6570\u7ec4\u7684\u603b\u548c\uff0c\u518d\u7b97\u51fa\u4e0e\u603b\u548c\u5947\u5076\u6027\u4e0d\u540c\u7684\u6700\u5927\u533a\u95f4\u548c\uff0c\u5206\u522b\u5411\u4e0b\u9012\u63a8\u5373\u53ef\n\n\u4ee3\u7801\u5f88\u597d\u5199\uff0c\u4e0d\u7ed9\u4e86",
        "postTime": 1596104048,
        "uid": 225734,
        "name": "derta",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u6211\u505a\u4e86\u5feb$1$\u4e2a\u534a\u5c0f\u65f6\uff0c\u60f3\u4e86\u5dee\u4e0d\u591a$1$\u4e2a\u5c0f\u65f6\u3002\u771f\u662f\u4e00\u9053\u597d\u9898\uff0c\u5bb9\u7eb3\u4e86\u8d2a\u5fc3+\u6784\u9020+\u601d\u7ef4\u4ee5\u53ca\u5947\u5076\u6027\u7684\u6027\u8d28 ~~\uff0c\u4e3a\u51fa\u9898\u4eba\u70b9\u8d5e~~\uff01\n\n\u7ed3\u679c\u53d1\u73b0\u6211\u5947\u5076\u8003\u8651\u7684\u80fd\u529b\u8fd8\u662f\u5f88\u83dc\u5f88\u83dc\uff0c\u6123\u662f\u6ca1\u60f3\u5230\u3002\n\n\u9898\u89e3\u533a\u7684\u505a\u6cd5\u592a\u795e\u4ed9\u4e86\uff0c\u8fd9\u91cc\u7ed9\u51fa\u6211\u7684\u8fa3\u9e21\u89e3\u6cd5\u3002\n\n\u4e00\u5f00\u59cb\u6211\u7684\u601d\u8def\u662f\u628a$1,2$\u53d8\u6210$0,1$\uff0c\u679a\u4e3e\u957f\u5ea6\uff0c\u7ed3\u679c\u641e\u4e86$30$\u5206\u949f\u8fd8\u662f\u4e0d\u4f1a\uff0c\u8c01\u53ef\u4ee5\u6559\u6559\u6211\uff1f\n\n\u540e\u6765\u601d\u8003\u79bb\u7ebf\uff0c\u7136\u540e\u53d1\u73b0\u8fd8\u662f\u4e0d\u4f1a\uff0c\u53cd\u8fc7\u6765\u8003\u8651\u8fd8\u662f\u4e0d\u4f1a\uff0c\u4f46\u662f\u7a81\u7136\u610f\u8bc6\u5230\u603b\u548c\u7684\u53d8\u5316\u91cf\u53ea\u80fd\u662f$1,2$\uff0c\u90a3\u4e48\uff0c\u5982\u679c\u52a0\u4e0a\u4e00\u4e2a$1$\uff0c\u4e24\u4e24\u62fc\u51d1\uff0c\u90a3\u4e48$[1,\\text{\u603b\u548c}+1]$\u7684\u7b54\u6848\u5168\u90e8\u53ef\u4ee5\u8868\u793a\u3002\u4e8e\u662f\u6211\u5c31\u628a\u8fd9\u4e2a\u601d\u7ef4\u9898\u505a\u51fa\u6765\u4e86\uff0c\u771f\u662f\u8111\u6d1e\u5927\u5f00\uff0c\u5e0c\u671b\u4ee5\u540e\u6253\u6bd4\u8d5b\u7684\u65f6\u5019\u6709\u4eca\u5929\u8fd9\u4e48\u5927\u7684\u8111\u6d1e\u3002\n\n\n------------\n\n\n\u5177\u4f53\u7684\uff0c\u5982\u679c\u6709$1$\uff0c\u8bbe\u6700\u540e\u4e00\u6b21\u52a0\u4e0a$1$\u540e\u7684\u4f4d\u7f6e\u4e3a$R$\uff0c$[1,R]$\u7684\u603b\u548c\u4e3a$\\text{bound}$\uff0c\u90a3\u4e48$[1,\\text{bound}]$\u76f4\u63a5\u53ef\u4ee5\u8868\u793a\u51fa\u6765\u3002\u672c\u9898\u8fd8\u6709\u4e27\u5fc3\u75c5\u72c2\u7684\u8f93\u51fa\u7b54\u6848\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u53ea\u9700\u8981\u628a$R-1,R$\u7684\u6240\u6709\u540e\u7f00\u62c9\u51fa\u6765\u5c31\u53ef\u4ee5\u5f97\u5230\u7b54\u6848\u4e86\u3002\n\n\u7136\u540e\u8003\u8651$[\\text{bound}+1,\\text{Sum}]$\u7684\u7b54\u6848\uff0c$\\text{Sum}$\u662f\u603b\u548c\u3002\n\n\u6ce8\u610f\u5230$[R+1,n]$\u5168\u662f$2$\uff0c\u90a3\u4e48\u5947\u5076\u6027\u4e0d\u53d8\uff1a\n\n\u5982\u679c\u8be2\u95ee\u7684$x\\equiv \\text{bound}\\pmod2$\uff0c\u76f4\u63a5\u8f93\u51fa$1$\u548c$(\\frac{x-\\text{bound}}2)+R$\uff0c\u663e\u7136\u53f3\u7aef\u70b9$\\leq n$\u3002\n\n\u5982\u679c\u8be2\u95ee\u7684$x\\not\\equiv \\text{bound}\\pmod2$\uff0c\u6211\u4eec\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684$L$\u6ee1\u8db3$\\sum_{i=1}^La_i\\not\\equiv \\text{bound}$\uff0c\u76f4\u63a5\u8f93\u51fa$L$\u548c$(\\frac{x+\\sum_{i=1}^La_i-\\text{bound}}2)+R$\uff0c\u6ce8\u610f\u53f3\u7aef\u70b9\u4e0d\u4e00\u5b9a$\\leq n$\u3002\n\n\u5982\u679c\u6ca1\u6709$L$\u6216\u8005\u8ba1\u7b97\u5f97\u5230\u7684\u53f3\u7aef\u70b9\u8d8a\u754c\uff0c\u8f93\u51fa$\\text{NIE}$\u3002\n\n\u601d\u8003\u7ec6\u8282\u5f88\u591a\uff0c\u8fd9\u4e2a\u9898\u89e3\u5bb9\u7eb3\u4e86\u6211\u4e00\u5f00\u59cb\u6ca1\u8003\u8651\u6e05\u695a\u7684\u5f88\u591a\u60c5\u51b5\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n)$\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\n#define gc getchar\ninline ll read(){\n    register ll x=0,f=1;char ch=gc();\n    while (!isdigit(ch)){if(ch=='-')f=-1;ch=gc();}\n    while (isdigit(ch)){x=(x<<3)+(x<<1)+ch-'0';ch=gc();}\n    return (f==1)?x:-x;\n}\nint bound,n,Q,a[1010101],ans[1010101][2],ALL,L,boundL;\nbool vis[1010101];\nsigned main(){\n\tn=read(),Q=read();\n\tfor (int i=1;i<=n;i++){\n\t\tchar ch=gc();\n\t\twhile (!isalpha(ch)) ch=gc();\n\t\ta[i]=(ch=='T'?2:1);\n\t}\n\tint R=0;\n\tfor (int i=1,MAX=0;i<=n;i++){\n\t\tif (a[i]==1){\n\t\t\tbound=MAX+1;R=i;\n\t\t}\n\t\tMAX+=a[i],ALL+=a[i]; \n\t}\n\tfor (int i=R,MAX=0;i>0;i--){\n\t\tMAX+=a[i];\n\t\tans[MAX][1]=R,ans[MAX][0]=i;\n\t}\n\tfor (int i=R-1,MAX=0;i>0;i--){\n\t\tMAX+=a[i];\n\t\tans[MAX][1]=R-1,ans[MAX][0]=i;\n\t}\n\tfor (int i=1,MAX=0;i<=R;i++){\n\t\tif (bound%2!=(bound-MAX)%2){\n\t\t\tL=i;boundL=bound-MAX;break;\n\t\t}\n\t\tMAX+=a[i];\n\t}\n\twhile (Q--){\n\t\tint x=read();\n\t\tif (x>ALL) puts(\"NIE\");\n\t\telse if (x<=bound) printf(\"%d %d\\n\",ans[x][0],ans[x][1]);\n\t\telse if ((x-bound)%2==0){\n\t\t\tprintf(\"%d %d\\n\",1,(x-bound)/2+R); \n\t\t}else if (L&&(x-boundL)/2+R<=n){\n\t\t\tprintf(\"%d %d\\n\",L,(x-boundL)/2+R); \n\t\t}else puts(\"NIE\");\n\t}\n    return 0;\n}\n\n```\n\n\u53e6\u4e00\u4e2a\u505a\u6cd5\u7ed9\u51fa\u4e86\u4e00\u4e2a\u66f4\u52a0\u76f4\u89c2\uff0c\u66f4\u52a0\u4f18\u7f8e\u7684\u6027\u8d28\uff1a\n\n\u7531\u4e8e\u8fd9\u4e2a\u5e8f\u5217\u53ea\u6709$1,2$\uff0c\u5982\u679c\u4e00\u4e2a\u533a\u95f4\u53ef\u4ee5\u8868\u793a\u51fa$x$\uff0c\u90a3\u4e48\u4e0e$x$\u5947\u5076\u6027\u76f8\u540c\u7684\u533a\u95f4\u5168\u90e8\u53ef\u4ee5\u5f97\u5230\u3002\n\n\u8fd9\u4e2a\u9898\u548c\u4ee5\u524d\u505a\u8fc7\u7684\u67d0 CF \u9898\u6709\u5f02\u66f2\u540c\u5de5\u4e4b\u5999\u3002\u603b\u4e4b\u5982\u679c\u5e8f\u5217\u7684\u503c\u57df\u5f88\u5947\u602a\uff0c\u7ede\u5c3d\u8111\u6c41\u53bb\u60f3\u6027\u8d28~~\u5c31\u597d\u4e86~~\u3002",
        "postTime": 1589700747,
        "uid": 20309,
        "name": "Fading",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    },
    {
        "content": "### \u849f\u84bb\u9898\u89e3\u5949\u4e0a\n\n#### ~~\u7ecf\u8fc7\u4e86n\u5c0f\u65f6\u7684\u52aa\u529b~~\u624dAC\n\n\n\n------------\n\u9898\u76ee\u601d\u8def\n\n\n------------\n$\"\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3an\u7684\u53ea\u5305\u542b{1,2}\u5e8f\u5217\uff0cT=2\uff0cW=1\uff0c\u7ed9\u5b9am\u7ec4\u6570$\n$\u636e\uff0c\u5206\u522b\u8be2\u95ee\u5e8f\u5217\u4e2d\u662f\u5426\u6709\u4e00\u6bb5\u533a\u95f4\u548c\u4e3ak\u3002\u5982\u679c\u6709\uff0c\u8f93\u51fa\u533a\u95f4$\n$\u7684\u5de6\u6807\u548c\u53f3\u6807\uff0c\u5426\u5219\u8f93\u51faNIE\u3002\"$\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\uff0c\u6211\u4eec\u7528\u9006\u63a8\u7684\u505a\u6cd5\n\n\u5df2\u77e5\u4e00\u4e2a\u533a\u95f4$[l,r]$\u7684\u548c\u4e3a$x$\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u6c42\u51fa$x-2$\u7684\u503c\n\n\u82e5$aL$\u4e3a$1$\u4e14$aR$\u4e3a$1$\n\n\u90a3\u4e48$[l+1,r-1]$\u533a\u95f4\u548c\u4e3a$x-2$\n\n\u5426\u5219\u82e5$aL$\u4e3a2\n\n\u90a3\u4e48$[l+1,r]$\u533a\u95f4\u548c\u4e3a$x-2$\n\n\u53cd\u4e4b\u4ea6\u7136\n\n\u9006\u63a8\u4ee3\u7801\u732e\u4e0a\n\n```cpp\nint l[2000001]={},r[2000001]={};\nl[kkk]=1;\nr[kkk]=n;\nfor(int i=kkk-2;i>0;i-=2)\n{\n\tif(a[l[i+2]]==1&&a[r[i+2]]==1)\n\t{\n\t\tl[i]=l[i+2]+1;\n\t\tr[i]=r[i+2]-1;\n\t}\n\telse\n\t{\n\t\tif(a[r[i+2]]==2)\n\t\t{\n\t\t\tr[i]=r[i+2]-1;\n\t\t\tl[i]=l[i+2];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tr[i]=r[i+2];\n\t\t\tl[i]=l[i+2]+1;\n\t\t}\n\t}\n}\n```\n\n\u8fd9\u91cc\u7684$kkk$\u8868\u793a\u6574\u4e2a\u5e8f\u5217\u7684\u548c\n\n\u5230\u8fd9\u4e00\u6b65\uff0c\u6211\u4eec\u5df2\u7ecf\u6c42\u51fa\u4e86\u5e8f\u5217\u7684\u4e00\u534a\n\n\u4e8e\u662f\u4e4e\uff0c\u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u4e2a$W$\uff0c\u5373$1$\uff0c\u8fd9\u6837\u624d\u80fd\u6539\u53d8\u5947\u5076\u6027\uff0c\u540c\u65f6\uff0c\u53c8\u9700\u8981\u4f7f\u53bb\u6389$1$\u5269\u4e0b\u7684\u5e8f\u5217\u6700\u5927\n\n\u5224\u65ad\u4ee3\u7801\u732e\u4e0a\n\n```cpp\nint ms=-1,mz;\nfor(int i=n;i>=0;i--)\n{\n\tif(a[i]==1)\n\t{\n\t\tms=i;\n\t\tbreak;\n\t}\n}\nif(ms!=-1)\n{\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(a[i]==1)\n\t\t{\n\t\t\tmz=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(b[ms-1]>b[n]-b[ms])\n\t{\n\t\tif(b[ms-1]>b[mz-1])\n\t\t{\n\t\t\tif(b[ms-1]>b[n]-b[mz])\n\t\t\t{\n\t\t\t\tkkk=b[ms-1]; \n\t\t\t\tl[b[ms-1]]=1;\n\t\t\t\tr[b[ms-1]]=ms-1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(b[mz-1]>b[n]-b[mz])\n\t\t\t{\n\t\t\t\tkkk=b[mz-1];\n\t\t\t\tl[b[mz-1]]=1;\n\t\t\t\tr[b[mz-1]]=mz-1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t{\n\t\tif(b[n]-b[ms]>b[mz-1])\n\t\t{\n\t\t\tif(b[n]-b[ms]>b[n]-b[mz])\n\t\t\t{\n\t\t\t\tkkk=b[n]-b[ms];\n\t\t\t\tl[b[n]-b[ms]]=ms+1;\n\t\t\t\tr[b[n]-b[ms]]=n;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(b[mz-1]>b[n]-b[mz])\n\t\t\t{\n\t\t\t\tkkk=b[mz-1];\n\t\t\t\tl[b[mz-1]]=1;\n\t\t\t\tr[b[mz-1]]=mz-1;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\u624b\u52a8\u5224\u65ad\uff0c\u5927\u4f6c\u52ff\u55b7\uff0c\u5982\u679c\u6709\u66f4\u597d\u7684\u65b9\u6cd5\u8bf7\u6307\u5bfc\u4e00\u4e0b\n\n\u56e0\u4e3a\u5e8f\u5217\u4e2d\u53ef\u80fd\u6ca1\u6709$1$\uff0c\u6240\u4ee5\u5faa\u73af\u4e00\u6b21\u540e\u5224\u65ad\u4e00\u4e0b\uff0c$b$\u6570\u7ec4\u4e3a\u524d\u7f00\u548c\uff0c$b[i]$\u8bb0\u5f55$a$\u6570\u7ec4$1$~$i$\u7684\u548c\uff0c\u8fd9\u6837\u5c31\u80fd\u66f4\u5bb9\u6613\u5730\u6bd4\u8f83\u6bcf\u4e00\u6bb5\u533a\u95f4\u548c\uff0c\u800c$kkk$\u7528\u6765\u8bb0\u5f55\u6700\u5927\u7684\u90a3\u6bb5\u533a\u95f4\u548c\uff0c\u5e76\u5c06\u5de6\u6807$l$\u548c\u53f3\u6807$r$\u8bb0\u5f55\n\n\u63a5\u7740\u548c\u4e0a\u9762\u9664\u4e86\u5947\u5076\u6027\u4e0d\u540c\u90fd\u76f8\u540c\uff0c\u4ee3\u7801\u4e5f\u4e00\u6837\n\n\u6700\u540e\u8bfb\u5165\u6570\u636e\u5224\u65ad\u4e00\u4e0b\u6709\u6ca1\u6709\u8bb0\u5f55\u5de6\u6807\u548c\u53f3\u6807\uff0c\u6709\uff0c\u8f93\u51fa\uff1b\u6ca1\u6709\uff0c\u8f93\u51faNIE\u5373\u53ef\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint main()\n{\n\tint n,m;\n\tcin>>n>>m; \n\tint a[n+1]={},kkk=0;\n\tchar x;\n\tint b[n+1]={};\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>x;\n\t\tif(x=='T')a[i]=2;\n\t\telse a[i]=1;\n\t\tkkk+=a[i];\n\t\tb[i]=b[i-1]+a[i];\n\t}\n\t//\u4e00\u9053\u534e\u4e3d\u7684\u5206\u5272\u7ebf \n\tint l[2000001]={},r[2000001]={};\n\tl[kkk]=1;\n\tr[kkk]=n;\n\tfor(int i=kkk-2;i>0;i-=2)\n\t{\n\t\tif(a[l[i+2]]==1&&a[r[i+2]]==1)\n\t\t{\n\t\t\tl[i]=l[i+2]+1;\n\t\t\tr[i]=r[i+2]-1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(a[r[i+2]]==2)\n\t\t\t{\n\t\t\t\tr[i]=r[i+2]-1;\n\t\t\t\tl[i]=l[i+2];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tr[i]=r[i+2];\n\t\t\t\tl[i]=l[i+2]+1;\n\t\t\t}\n\t\t}\n\t}\n\t//\u53c8\u662f\u4e00\u9053\u534e\u4e3d\u7684\u5206\u5272\u7ebf \n\tint ms=-1,mz;\n\tfor(int i=n;i>=0;i--)\n\t{\n\t\tif(a[i]==1)\n\t\t{\n\t\t\tms=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(ms!=-1)\n\t{\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tif(a[i]==1)\n\t\t\t{\n\t\t\t\tmz=i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(b[ms-1]>b[n]-b[ms])\n\t\t{\n\t\t\tif(b[ms-1]>b[mz-1])\n\t\t\t{\n\t\t\t\tif(b[ms-1]>b[n]-b[mz])\n\t\t\t\t{\n\t\t\t\t\tkkk=b[ms-1]; \n\t\t\t\t\tl[b[ms-1]]=1;\n\t\t\t\t\tr[b[ms-1]]=ms-1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(b[mz-1]>b[n]-b[mz])\n\t\t\t\t{\n\t\t\t\t\tkkk=b[mz-1];\n\t\t\t\t\tl[b[mz-1]]=1;\n\t\t\t\t\tr[b[mz-1]]=mz-1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(b[n]-b[ms]>b[mz-1])\n\t\t\t{\n\t\t\t\tif(b[n]-b[ms]>b[n]-b[mz])\n\t\t\t\t{\n\t\t\t\t\tkkk=b[n]-b[ms];\n\t\t\t\t\tl[b[n]-b[ms]]=ms+1;\n\t\t\t\t\tr[b[n]-b[ms]]=n;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(b[mz-1]>b[n]-b[mz])\n\t\t\t\t{\n\t\t\t\t\tkkk=b[mz-1];\n\t\t\t\t\tl[b[mz-1]]=1;\n\t\t\t\t\tr[b[mz-1]]=mz-1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tkkk=b[n]-b[mz];\n\t\t\t\t\tl[b[n]-b[mz]]=mz+1;\n\t\t\t\t\tr[b[n]-b[mz]]=n;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//\u53c8\u53cc\u4e00\u9053\u534e\u4e3d\u7684\u5206\u5272\u7ebf \n\tfor(int i=kkk-2;i>0;i-=2)\n\t{\n\t\tif(a[l[i+2]]==1&&a[r[i+2]]==1)\n\t\t{\n\t\t\tl[i]=l[i+2]+1;\n\t\t\tr[i]=r[i+2]-1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(a[r[i+2]]==2)\n\t\t\t{\n\t\t\t\tr[i]=r[i+2]-1;\n\t\t\t\tl[i]=l[i+2];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tr[i]=r[i+2];\n\t\t\t\tl[i]=l[i+2]+1;\n\t\t\t}\n\t\t}\n\t}\n\t//\u53c8\u53cc\u53d2\u4e00\u9053\u534e\u4e3d\u7684\u5206\u5272\u7ebf \n\tint yyy;\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tcin>>yyy;\n\t\tif(l[yyy]!=0)\n\t\t{\n\t\t\tcout<<l[yyy]<<\" \"<<r[yyy]<<endl;\n\t\t}\n\t\telse cout<<\"NIE\"<<endl;\n\t}\n}\n```\n\n\u5f88\u957f......\u80af\u5b9a\u6ca1\u4eba\u6284\u6211\u9898\u89e3\n\nP.S \u5bf9\u4e0d\u8d77kkksc03\u4e86",
        "postTime": 1586489563,
        "uid": 218387,
        "name": "MC_Launcher",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P3514 \u3010[POI2011]LIZ-Lollipop\u3011"
    }
]
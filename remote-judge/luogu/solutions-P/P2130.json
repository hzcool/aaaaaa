[
    {
        "content": "- \u9898\u76ee\u94fe\u63a5\uff1a[P2130 \u72c2\u5954\u7684Wzf](https://www.luogu.com.cn/problem/P2130)\n\n\n\n\u9898\u5916\u8bdd\uff1a\u8fd9\u9898\u9898\u76ee\u662f\u6709\u95ee\u9898\u7684\uff0c\u56e0\u4e3a\u9898\u76ee\u6ca1\u6709\u8bf4 `.` \u4ee3\u8868\u4ec0\u4e48\u610f\u601d\uff0c\u4e5f\u6ca1\u6709\u4fdd\u8bc1\u8fde\u901a\u6027\uff0c\u8fd9\u9898\u7684 `.` \u5f53\u6210\u662f\u969c\u788d\u5c31\u884c\uff0c\u81f3\u4e8e\u8fde\u901a\u6027\uff0c\u5c31\u5f53\u6210\u4fdd\u8bc1\u8054\u901a\u5373\u53ef\u3002\uff08\u5e0c\u671b\u7ba1\u7406\u5458\u53ef\u4ee5\u65e9\u70b9\u6539\u6b63\u8fd9\u9898\u9898\u9762\uff09\u3002\n\n\n----\n\n\u8fd9\u9898\u8ddf\u666e\u901a\u7684\u641c\u7d22\u4e0d\u4e00\u6837\u7684\u5730\u65b9\u5c31\u662f\u8bf4\u53ef\u4ee5\u8d70 $2^k$ \u6b65\uff0c\u666e\u901a\u641c\u7d22\u4e0d\u662f\u7528\u6570\u7ec4\u8bb0\u5f55\u5417\uff1f\u90a3\u8fd9\u9898\u4e5f\u4e00\u6837\u554a\uff01\n\n\u6240\u4ee5\u6211\u4eec\u8fd9\u6837\u6765\u8bb0\u5f55\uff1a\n\n```\nconst int d[]={1,2,4,8,16,32,64,128,256,512};//2^9\u8db3\u591f\u4e86\n```\n\uff08\u5f53\u7136\u8fd8\u6709\u5012\u7740\u8d70\uff0c\u5c31\u662f\u518d\u5faa\u73af\u4e00\u904d\uff0c\u53d6\u8d1f\u5373\u53ef\uff09\n\n\n\u4f46\u662f\u4f60\u5728\u5f80\u524d\u8d70 $2^k$ \u6b65\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u70b9\u5230\u8d70 $2^k$ \u6b65\u540e\u7684\u70b9\u8fd9\u6761\u8def\u5f84\u5fc5\u987b\u4fdd\u8bc1\u6ca1\u6709\u969c\u788d\u624d\u53ef\u4ee5\u8d70\uff0c\u8fd9\u4e2a\u5982\u679c\u66b4\u529b\u5faa\u73af\u5224\u65ad\u590d\u6742\u5ea6\u76f4\u63a5\u4e0a\u5929\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u7528 [\u524d\u7f00\u548c](https://www.baidu.com/s?ie=utf-8&f=8&rsv_bp=1&rsv_idx=1&tn=baidu&wd=%E5%89%8D%E7%BC%80%E5%92%8C&fenlei=256&rsv_pq=9ba3ac3a000cfc92&rsv_t=57816MWHgh1fHAbgMNNYYKDcbzbVfKFtKrsrsar3I0L57IorOSTessZvLJA&rqlang=cn&rsv_enter=1&rsv_dl=tb&rsv_sug3=16&rsv_sug1=13&rsv_sug7=101&rsv_sug2=0&rsv_btype=i&inputT=3546&rsv_sug4=3546) \u6765\u89e3\u51b3\u3002\n\n\u5177\u4f53\u5c31\u662f\u7528 `h1` \u548c `h2` \u6570\u7ec4\u6765\u8bb0\u5f55\u524d\u7f00\u548c\uff0c\u4e4b\u540e\u76f4\u63a5\u5224\u65ad\u5373\u53ef\u3002\uff08\u8fd9\u4e2a\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u53ef\u4ee5\u770b\u4ee3\u7801\u91cc\u9762\uff09\u3002\n\n\u7136\u540e\u5269\u4e0b\u7684\u6ce8\u610f\u7ec6\u8282\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff08\u542b\u8be6\u7ec6\u6ce8\u91ca\uff09\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int d[]={1,2,4,8,16,32,64,128,256,512};\nconst int N=1010;\nint n,m,fx,fy,h1[N][N],h2[N][N],length=10;\nchar g[N][N],lis[N];\nbool st[N][N];\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%s\",lis);//\u8bfb\u5165\u4f18\u5316\uff0cstring\u65e0\u6cd5\u7528scnaf\u8bfb\u5165\uff0c\u6240\u4ee5\u5148\u7528char\u5b57\u7b26\u4e32\u8bfb\u5165\u4e4b\u540e\u518d\u8d4b\u503c\u5230string\n        for(int j=1;j<=m;j++)\n        {\n            g[i][j]=lis[j-1];\n            if(g[i][j]=='#')//\u8bb0\u5f55\u7ec8\u70b9\n                fx=i,fy=j;\n            h1[i][j]=((g[i][j]=='#' || g[i][j]=='$')?0:1)+h1[i][j-1];\n            h2[i][j]=((g[i][j]=='#' || g[i][j]=='$')?0:1)+h2[i-1][j];\n            //\u4ee5\u4e0a\u662f\u524d\u7f00\u548c\uff0c\u5176\u4e2dg[i][j]\u662f#\u6216\u8005$\u5c31\u53ef\u4ee5\u8d70\u8fd9\u4e2a\u70b9\n        }\n    }\n    queue<int> q1,q2,q3;\n    q1.push(1),q2.push(1),q3.push(0);\n    st[1][1]=true;\n    while(!q1.empty())\n    {\n        int x=q1.front(),y=q2.front(),k=q3.front();\n        q1.pop(),q2.pop(),q3.pop();\n        if(x==fx && y==fy){printf(\"%d\",k);return 0;}//\u5230\u91cd\u70b9\u8f93\u51fa\u5373\u53ef\n        for(int i=0;i<length;i++)//\u6b63\u7740\u8d70\n        {\n            int tx=x+d[i],ty=y;\n            if(tx>=1 && tx<=n && ty>=1 && ty<=m && !st[tx][ty] && (g[tx][ty]=='$' || g[tx][ty]=='#') && !(h2[tx][ty]-h2[x][y]))\n                st[tx][ty]=true,q1.push(tx),q2.push(ty),q3.push(k+1);\n            tx=x,ty=d[i]+y;\n            if(tx>=1 && tx<=n && ty>=1 && ty<=m && !st[tx][ty] && (g[tx][ty]=='$' || g[tx][ty]=='#') && !(h1[tx][ty]-h1[x][y]))\n                st[tx][ty]=true,q1.push(tx),q2.push(ty),q3.push(k+1);\n        }\n        for(int i=0;i<length;i++)//\u5012\u7740\u8d70\n        {\n            int tx=x+(-d[i]),ty=y;\n            if(tx>=1 && tx<=n && ty>=1 && ty<=m && !st[tx][ty] && (g[tx][ty]=='$' || g[tx][ty]=='#') && !(h2[tx][ty]-h2[x][y]))\n                st[tx][ty]=true,q1.push(tx),q2.push(ty),q3.push(k+1);\n            tx=x,ty=(-d[i])+y;\n            if(tx>=1 && tx<=n && ty>=1 && ty<=m && !st[tx][ty] && (g[tx][ty]=='$' || g[tx][ty]=='#') && !(h1[tx][ty]-h1[x][y]))\n                st[tx][ty]=true,q1.push(tx),q2.push(ty),q3.push(k+1);\n        }\n    }\n    return 0;\n}\n```\n\n\u7c7b\u4f3c\u9898\u9762\uff08\u53ea\u4e0d\u8fc7\u662f\u6700\u77ed\u8def\uff09\uff0c\u6bd4\u8fd9\u9898\u8981\u7b80\u5355\uff1a[P1613 \u8dd1\u8def](https://www.luogu.com.cn/problem/P1613)\n\n\u5982\u679c\u6709\u9519\u8bef\u6216\u8005\u95ee\u9898\u6b22\u8fce\u63d0\u51fa\u3002\n",
        "postTime": 1590240966,
        "uid": 270120,
        "name": "xhQYm",
        "ccfLevel": 0,
        "title": "Solution P2130"
    },
    {
        "content": "### \u5410\u69fd\uff1a\u4e00\u9053\u6c34\u6c34\u7684\u5e7f\u641c\uff0c\u628a\u6211\u8650\u4e86\u4e00\u5929\n\n----------------------------\n\n\u5206\u6790\uff1a\n\n\u770b\u4f3c\u662f\u6b63\u5e38\u7684\u5e7f\u641c\uff0c\u4ece\u6bcf\u4e2a\u70b9\u6269\u5c55\u51fa\u957f\u5ea6\u4e3a$2^k$\u7684\u8def\u5f84\uff0c\u90a3\u4e48\u53ea\u8981\u66b4\u641c\u5c31\u597d\u4e86\n\n----------------------------\n\n\u5173\u4e8e\u67e5\u8be2\u4e24\u70b9\u4e4b\u95f4\u7684\u8054\u901a\u6027\uff1a\n\n\u53ef\u4ee5\u5728\u6bcf\u4e00\u5217\u548c\u6bcf\u4e00\u884c\u7ef4\u62a4\u4e00\u4e2a\u524d\u7f00\u548c\uff0c\u969c\u788d\u8bbe\u4e3a1\uff0c\u5426\u5219\u8bbe\u4e3a0\uff0c\u7136\u540e\u5728\u641c\u7d22\u65f6\u53ea\u9700\u8981\u6c42\u4e00\u4e0b\u7ec8\u70b9\u4e0e\u8d77\u70b9\u7684\u5dee\uff0c\u5982\u679c\u662f\u96f6\uff0c\u5219\u4e24\u70b9\u8054\u901a\n\n----------------------------\n\n\u5173\u4e8e\u5230\u5e95\u662f . \u8fd8\u662f X \uff1f\n\n\u5176\u5b9e\u65e0\u6240\u8c13\uff0c\u9664\u4e86 $ \u548c # \uff0c\u522b\u7684\u5168\u90e8\u90fd\u662f\u969c\u788d\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n*logn)$\n\nn<=1000 \u8f7b\u677e\u8dd1\u8fc7\n\n---------------------------\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int Maxn=1100;\nint n,m,f[Maxn][Maxn],b[Maxn][Maxn],c[Maxn][Maxn],d[Maxn*Maxn][2],tx,ty,temp;\n//f[i][j]\u8868\u793a\u4ece\u8d77\u70b9\u5230i,j\u6700\u5c11\u7684\u65f6\u95f4\uff0c\n//b[i][j]\u8868\u793a\u7b2ci\u884c\u4e0a\u7684\u524dj\u4e2a\u5143\u7d20\u7684\u548c\uff0cc[i][j]\u8868\u793a\u7b2cj\u5217\u4e0a\u524di\u884c\u5143\u7d20\u7684\u548c\uff0cd\u662f\u961f\u5217\nchar a[Maxn];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%s\",a);\n\t\tint len=strlen(a);\n\t\tfor(int j=0;j<len;j++)\n\t\t{\n\t\t\tif(a[j]=='$'||a[j]=='#')\n\t\t\t{\n\t\t\t\tif(a[j]=='#')\n\t\t\t\t{\n\t\t\t\t\ttx=i;\n\t\t\t\t\tty=j+1;\n\t\t\t\t}\n\t\t\t\ttemp=0;\n\t\t\t}\n\t\t\telse\n\t\t\t\ttemp=1;\n\t\t\tb[i][j+1]=temp+b[i][j];\n\t\t\tc[i][j+1]=temp+c[i-1][j+1];//\u524d\u7f00\u548c\n\t\t}\n\t}\n\tint t=0,w=1;\n\tmemset(f,-1,sizeof(f));\n\td[1][0]=1;\n\td[1][1]=1;\n\tf[1][1]=0;\n\twhile(t<w)\n\t{\n\t\tif(f[tx][ty]>=0)\n\t\t\tbreak;\n\t\tt++;\n\t\tint nx=d[t][0],ny=d[t][1],now=f[nx][ny]+1;\n\t\ttemp=1;\n\t\twhile(nx+temp<=n)//\u5411\u4e0b\u8d70\n\t\t{\n\t\t\tif(f[nx+temp][ny]!=-1)\n\t\t\t{\n\t\t\t\ttemp<<=1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(c[nx+temp][ny]-c[nx][ny]>0)//\u524d\u7f00\u548c\u4e4b\u5dee>0\u5219\u8bf4\u660e\u4e2d\u95f4\u6709\u969c\u788d\n\t\t\t\tbreak;\n\t\t\tf[nx+temp][ny]=now;\n\t\t\td[++w][0]=nx+temp;\n\t\t\td[w][1]=ny;\n\t\t\ttemp<<=1;\n\t\t}\n\t\ttemp=1;\n\t\twhile(nx-temp>0)//\u5411\u4e0a\u8d70\n\t\t{\n\t\t\tif(f[nx-temp][ny]!=-1)\n\t\t\t{\n\t\t\t\ttemp<<=1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(c[nx-1][ny]-c[nx-temp-1][ny]>0)\n\t\t\t\tbreak;\n\t\t\tf[nx-temp][ny]=now;\n\t\t\td[++w][0]=nx-temp;\n\t\t\td[w][1]=ny;\n\t\t\ttemp<<=1;\n\t\t}\n\t\ttemp=1;\n\t\twhile(ny+temp<=m)//\u5411\u53f3\u8d70\n\t\t{\n\t\t\tif(f[nx][ny+temp]!=-1)\n\t\t\t{\n\t\t\t\ttemp<<=1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(b[nx][ny+temp]-b[nx][ny]>0)\n\t\t\t\tbreak;\n\t\t\tf[nx][ny+temp]=now;\n\t\t\td[++w][0]=nx;\n\t\t\td[w][1]=ny+temp;\n\t\t\ttemp<<=1;\n\t\t}\n\t\ttemp=1;\n\t\twhile(ny-temp>0)//\u5411\u5de6\u8d70\n\t\t{\n\t\t\tif(f[nx][ny-temp]!=-1)\n\t\t\t{\n\t\t\t\ttemp<<=1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(b[nx][ny-1]-b[nx][ny-temp-1]>0)\n\t\t\t\tbreak;\n\t\t\tf[nx][ny-temp]=now;\n\t\t\td[++w][0]=nx;\n\t\t\td[w][1]=ny-temp;\n\t\t\ttemp<<=1;\n\t\t}\n\t}\n\tprintf(\"%d\\n\",f[tx][ty]);\n\treturn 0;\n}\n```",
        "postTime": 1520856475,
        "uid": 53250,
        "name": "\u5355\u66e6\u589e",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2130 \u3010\u72c2\u5954\u7684Wzf\u3011"
    },
    {
        "content": "[\u8fd4\u56de\u9898\u76ee](https://www.luogu.com.cn/problem/P2130)\n\n\u8fd9\u662f\u6211\u7b2c\u4e00\u6b21\u5199\u9898\u89e3\uff0c\u82e5\u6709\u758f\u6f0f\uff0c\u656c\u8bf7\u5927\u5bb6\u6279\u8bc4\u6307\u51fa\u3002\n\n\u8fd9\u662f\u4e00\u9053\u641c\u7d22\u9898\uff0c\u6211\u5728\u6b64\u8bb2\u89e3\u5bbd\u641c\u7b97\u6cd5\u3002\n\n\u56e0\u4e3a\u8fd9\u9053\u9898\u7684\u6837\u4f8b\u4e0d\u5f3a\uff0c\u4e0d\u80fd\u51c6\u786e\u5730\u89e3\u91ca\u7b97\u6cd5\uff0c\u6211\u5e72\u8106\u51fa\u4e86\u4e00\u4e2a\u4f8b\u5b50\uff1a\n```\n4 4\n....\n.#.#\n#...\n....\n```\n\u76f8\u4fe1\u5404\u4f4d\u90fd\u77e5\u9053\uff0c\u5bbd\u641c\u662f\u4f7f\u7528\u961f\u5217\u6765\u5b9e\u73b0\u7684\uff0c\u4e0b\u9762\u662f\u6b64\u9898\u961f\u5217\u7684\u4f7f\u7528\u65b9\u6cd5\uff1a\n![](https://cdn.luogu.com.cn/upload/image_hosting/43zrc3u5.png)\n\n\u5982\u56fe\u6240\u793a\uff0c\u8bbe\u4e24\u4e2a\u961f\u5217\uff0c\u5206\u522b\u50a8\u5b58 $x$ \u548c $y$ \u5750\u6807\uff0c\u5148\u5b58\u5165\u8d77\u70b9\u5750\u6807 $(1,1)$\uff0c\u518d\u5f80\u56db\u9762\u6269\u5c55\uff0c\u627e\u5230\u5408\u6cd5\u7684\u51b3\u7b56\u65f6\u5c31\u5c06\u5176\u5b58\u5165\u961f\u5217\uff0c\u4fbf\u4e8e\u4ee5\u540e\u8bfb\u53d6\uff0c\u5f53\u7136\uff0c\u8fd8\u8981\u8bb0\u5f55\u67d0\u4e2a\u70b9\u662f\u5426\u8d70\u8fc7\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u70b9\u7684\u6b65\u6570\uff0c\u4e0d\u7136\u65e0\u6cd5\u901a\u8fc7\u6b64\u9898\u3002\n\n\u6bcf\u6b21\u5faa\u73af\u8fc7\u540e\uff0c\u8981\u6e05\u9664\u8fc7\u671f\u7684\u961f\u9996\u5143\u7d20\u3002\n\n\u5982\u679c\u8d70\u5230\u4e86\u7ec8\u70b9\uff0c\u5c31\u8f93\u51fa\u6b65\u6570\uff0c\u8df3\u51fa\u5faa\u73af\u3002\n\n\u4f46\u6ca1\u6709\u5408\u6cd5\u8def\u5f84\u600e\u4e48\u529e\uff1f\u601d\u8003\u4e00\u4e0b\uff0c\u5982\u679c\u6ca1\u6709\u5408\u6cd5\u8def\u5f84\uff0c\u5728\u4e00\u4e2a\u65f6\u523b\u961f\u5217\u5c06\u662f\u7a7a\u7684\uff0c\u53d1\u73b0\u8fd9\u4e00\u60c5\u51b5\u65f6\uff0c\u5c31\u8f93\u51fa\u65e0\u89e3\uff0c\u4e0d\u8981\u518d\u5faa\u73af\u4e0b\u53bb\uff0c\u4e0d\u7136\u8bfb\u53d6\u4e00\u4e2a\u7a7a\u7684\u961f\u5217\u7684\u9996\u4e2a\u5143\u7d20\uff0c\u975e\u8fd0\u884c\u9519\u8bef\u4e0d\u53ef\u3002\n\n\u8fd8\u6709\uff0c\u8fd9\u9053\u9898\u6709\u51e0\u4e2a\u6ce8\u610f\u70b9\uff1a\n\n- \u4e0d\u80fd\u5728\u8d70 $2$ \u7684\u6b21\u65b9\u6b65\u65f6\u8df3\u8dc3\u969c\u788d\uff08\u5f88\u591a\u4eba\u5728\u5199\u4ee3\u7801\u65f6\u5ffd\u7565\u4e86\u8fd9\u4e00\u70b9\uff09\uff1b\n\n- \u522b\u5fd8\u8bb0\u4e86 $1$ \u662f $2^0$\uff0c\u8d70\u4e00\u6b65\u4e5f\u662f\u5141\u8bb8\u7684\uff1b\n\n- \u6b64\u9898\u6570\u636e\u4e0d\u80fd\u4f7f\u6df1\u641c\u7b97\u6cd5\u901a\u8fc7\uff0c\u6df1\u641c\u6211\u9876\u591a\u53ea\u62ff\u5230\u4e86 $30$ \u5206\uff0c\u4f46\u5bbd\u641c\u80fd\u6ee1\u5206\u3002\n\n- \u4e2a\u4eba\u63a8\u8350\u4f7f\u7528\u6570\u7ec4\u8bb0\u5f55 $2^n$\uff0c\u56e0\u4e3a $1000$ \u4ee5\u5185\u7684\u8fd9\u4e9b\u6570\u53ea\u6709 $10$ \u4e2a\uff0c\u6bd4\u7535\u8111\u751f\u6210\u8981\u7b80\u5355\u5f97\u591a\uff1a$1,2,4,8,16,32,64,128,256,512$\u3002\n\n\n\n\u4ee3\u7801\u5c55\u793a\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nbool b[1005][1005];\nint n,m,fi_x,fi_y,xx,yy,bs[1005][1005];// fi_x \u548c fi_y  \u8bb0\u5f55\u7ec8\u70b9\u7684\u5750\u6807\uff0c xx \u548c yy \u8bb0\u5f55\u5f53\u524d\u7684\u5750\u6807\uff0c b \u6570\u7ec4\u8bb0\u5f55\u662f\u5426\u8bbf\u95ee, bs \u6570\u7ec4\u8bb0\u5f55\u5f53\u524d\u6b65\u6570\u3002\nchar a[1005][1005];//\u8bb0\u5f55\u5730\u56fe\nqueue<int>x;//\u50a8\u5b58 x \u5750\u6807\nqueue<int>y;//\u50a8\u5b58 y \u5750\u6807\nint cf[15]={0,1,2,4,8,16,32,64,128,256,512};//\u56e0\u4e3a1000\u4ee5\u5185\u76842\u6b21\u65b9\u6570\u53ea\u670910\u4e2a\uff0c\u6240\u4ee5\u53ef\u4ee5\u5b9a\u6570\u7ec4\u5b58\u8d77\u6765\u5224\u65ad\u3002\nbool is_cf(int z){//\u5229\u7528cf\u6570\u7ec4\u5224\u65ad2\u6b21\u65b9\u6570\n    for(int i=1;i<=10;i++){\n        if(z==cf[i])return 1;//\u662f2\u6b21\u65b9\u6570\n    }\n    return 0\uff1b//\u4e0d\u662f2\u6b21\u65b9\u6570\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++){\n\t    for(int j=1;j<=m;j++){\n\t        cin>>a[i][j];\n\t        if(a[i][j]=='#')fi_x=i,fi_y=j;//\u6807\u8bb0\u7ec8\u70b9\u5750\u6807\n        }\n    }\n    b[1][1]=1;//\u521d\u59cb\u5316\n    x.push(1);\n    y.push(1);\n    while(1){\n        xx=x.front(),yy=y.front();//\u8bfb\u53d6\u961f\u5217\n        if(xx==fi_x&&yy==fi_y){\n            cout<<bs[fi_x][fi_y];//\u5230\u8fbe\u7ec8\u70b9\uff0c\u8f93\u51fa\u6700\u5c0f\u6b65\u6570\n            return 0;\n        }\n        for(int i=1;;i++){//\u5f80\u4e0a\u8d70\n            if(xx-i>0&&a[xx-i][yy]!='X'){//\u6392\u9664\u51fa\u5730\u56fe\u548c\u9047\u5230\u969c\u788d\u7684\u60c5\u51b5\n                if(is_cf(i)&&b[xx-i][yy]==0{// i \u662f 2 \u7684\u6b21\u65b9\u6570\u4e14\u8fd9\u4e2a\u70b9\u672a\u8d70\u8fc7\n                    x.push(xx-i);//\u50a8\u5b58\u8fd9\u4e2a\u70b9\u7684\u4fe1\u606f\n                    y.push(yy);\n                    bs[xx-i][yy]=bs[xx][yy]+1;\n                    b[xx-i][yy]=1;\n                }\n            }\n            else break;\n        }\n        for(int i=1;;i++){\n            if(yy-i>0&&a[xx][yy-i]!='X'){//\u6392\u9664\u51fa\u5730\u56fe\u548c\u9047\u5230\u969c\u788d\u7684\u60c5\u51b5\n                if(is_cf(i)&&b[xx][yy-i]==0){// i \u662f 2 \u7684\u6b21\u65b9\u6570\u4e14\u8fd9\u4e2a\u70b9\u672a\u8d70\u8fc7\n                    x.push(xx);//\u50a8\u5b58\u8fd9\u4e2a\u70b9\u7684\u4fe1\u606f\n                    y.push(yy-i);\n                    bs[xx][yy-i]=bs[xx][yy]+1;\n                    b[xx][yy-i]=1;\n                }\n            }\n            else break;\n        }\n        for(int i=1;;i++){\n            if(yy+i<=m&&a[xx][yy+i]!='X'){//\u6392\u9664\u51fa\u5730\u56fe\u548c\u9047\u5230\u969c\u788d\u7684\u60c5\u51b5\n                if(is_cf(i)&&b[xx][yy+i]==0){// i \u662f 2 \u7684\u6b21\u65b9\u6570\u4e14\u8fd9\u4e2a\u70b9\u672a\u8d70\u8fc7\n                    x.push(xx);//\u50a8\u5b58\u8fd9\u4e2a\u70b9\u7684\u4fe1\u606f\n                    y.push(yy+i);\n                    bs[xx][yy+i]=bs[xx][yy]+1;\n                    b[xx][yy+i]=1;\n                }\n            }\n            else break;\n        }\n        for(int i=1;;i++){\n            if(xx+i<=n&&a[xx+i][yy]!='X'){//\u6392\u9664\u51fa\u5730\u56fe\u548c\u9047\u5230\u969c\u788d\u7684\u60c5\u51b5\n                if(is_cf(i)&&b[xx+i][yy]==0{// i \u662f 2 \u7684\u6b21\u65b9\u6570\u4e14\u8fd9\u4e2a\u70b9\u672a\u8d70\u8fc7\n                    x.push(xx+i);//\u50a8\u5b58\u8fd9\u4e2a\u70b9\u7684\u4fe1\u606f\n                    y.push(yy);\n                    bs[xx+i][yy]=bs[xx][yy]+1;\n                    b[xx+i][yy]=1;\n                }\n            }\n            else break;\n        }\n        x.pop(),y.pop();//\u5220\u9664\u5df2\u5904\u7406\u7684\u961f\u5217\u5143\u7d20\n        if(x.empty()){//\u961f\u5217\u4e3a\u7a7a\u4ee3\u8868\u65e0\u89e3\n            cout<<-1;//\u65e0\u89e3\n            return 0;\n        }\n    }\n\treturn 0;\n}\n```\n\u5e0c\u671b\u5927\u5bb6\u770b\u5b8c\u6211\u7684\u9898\u89e3\u540e\u4f1a\u7406\u89e3\u601d\u8def\uff0c\u6253\u51fa\u6ee1\u5206\u4ee3\u7801\u3002\n\n[\u6211\u7684AC\u8bb0\u5f55](https://www.luogu.com.cn/record/78647624)\n",
        "postTime": 1657162274,
        "uid": 672360,
        "name": "Ch35",
        "ccfLevel": 3,
        "title": "P2130 \u72c2\u5954\u7684Wzf \u9898\u89e3"
    },
    {
        "content": "\u9898\u8003\u5bdf\u7b97\u6cd5\u4e3a**\u5e7f\u641c**\u3001**\u524d\u7f00\u548c**\u3002\n\n\u503c\u5f97\u6ce8\u610f\u7684\u5730\u65b9\uff1a\n\n- Wzf\u8eab\u6000\u7edd\u6280\uff0c\u53ef\u4ee5\u5728\u4e00\u5355\u4f4d\u65f6\u95f4\u5185\u8d70 $2$ \u7684\u6b21\u65b9\u6b65\uff08\u5305\u62ec $2^{0}$ \u6b65\uff09\uff1b\n- \u4f46\u8fd9\u5e76\u4e0d\u4ee3\u8868\u4ed6\u4f1a\u7a7f\u5899\uff0c\u6240\u4ee5\u8def\u5f84\u4e2d\u82e5\u6709\u969c\u788d\uff0c\u5c31\u4e0d\u80fd\u8d70\uff1b\n- \u8d77\u70b9\u662f $(1, 1)$\uff1b\n- \u8d77\u70b9\u53ef\u80fd\u5b58\u5728\u969c\u788d\uff0c\u9700\u8981\u624b\u52a8\u6e05\u9664\u3002\n\n\u96be\u70b9\uff1a\u5982\u4f55\u7ef4\u62a4\u8def\u5f84\u4e2d\u6709\u65e0\u969c\u788d\u3002\n\n\u7b54\u6848\u662f\uff1a\u5229\u7528\u524d\u7f00\u548c\u7684\u601d\u60f3\uff0c\u7528\u4e24\u4e2a\u6570\u7ec4\u5206\u522b\u7ef4\u62a4\u884c\u4e0e\u5217\u7684\u969c\u788d\u6570\u3002\u8fd9\u6837\u6211\u4eec\u53ea\u8981\u7528\u7ec8\u70b9\u51cf\u8d77\u70b9\u5c31\u53ef\u4ee5\u77e5\u9053\u4e2d\u95f4\u662f\u5426\u6709\u969c\u788d\uff08\u82e5\u5dee\u4e3a\u6b63\u6570\uff0c\u5219\u8def\u5f84\u4e2d\u6709\u969c\u788d\uff09\u3002\n\nCode\n```\n#include <iostream>\n#include <cstdio>\n#include <queue>\n#define MAXN 1001\nusing namespace std;\n\nint n, m;\nint s1[MAXN][MAXN];\nint s2[MAXN][MAXN];\nchar a[MAXN][MAXN];\nbool vis[MAXN][MAXN];\nint dx[] = {0, 1, 0, -1};   //\u65b9\u5411\nint dy[] = {1, 0, -1, 0};   //\u65b9\u5411\nstruct node { int x, y, t; };\nqueue <node> q;\nint pre[15] = {1, 2, 4, 8, 16, 32, 64, 128, 256, 512};  //\u5927\u4e2a\u5c0f\u8868\uff0c\u628a\u6b65\u957f\u63d0\u524d\u51c6\u5907\u597d\n\nvoid prepare()\n{\n\tnode tmp = {1, 1, 0};\n\tq.push(tmp);\n\tvis[1][1] = true;\n}\n\nint main()\n{\n    ios::sync_with_stdio(false);    //cin\u3001cout\u5173\u95ed\u540c\u6b65\uff0c\u53ef\u4ee5\u4f18\u5316\u8bfb\u5165\u8f93\u51fa\u901f\u5ea6\uff0c\u4f46\u662f\u5927\u8003\u4e0d\u8981\u7528\n    cin.tie(0),cout.tie(0);\n\n\tcin >> n >> m;\n\tfor (register int i = 1; i <= n; ++i)\n\t{\n\t\tfor (register int j = 1; j <= m; ++j)\n\t\t{\n\t\t\tcin >> a[i][j];\n\t\t\ts1[i][j] = s1[i][j - 1] + (a[i][j] == 'X'); //\u7528\u524d\u7f00\u548c\u8bb0\u5f55\u969c\u788d\n\t\t\ts2[i][j] = s2[i - 1][j] + (a[i][j] == 'X');\n\t\t}\n\t}\n\tprepare();\n\twhile (!q.empty())\n\t{\n\t\tnode u = q.front(); q.pop();\n\t\tfor (register int i = 0; i < 4; ++i)\n\t\t{\n\t\t\tfor (register int j = 0; j < 10; ++j)\n\t\t\t{\n\t\t\t\tint nx = u.x + dx[i] * pre[j], ny = u.y + dy[i] * pre[j];\n\t\t\t\tif (nx < 1 || nx > n || ny < 1 || ny > m) break;    //\u8d8a\u754c\u5219break\n\t\t\t\tif (vis[nx][ny]) continue;      //\u8bbf\u95ee\u8fc7\u5219continue\n                if (a[nx][ny] == 'X') break;    //Wzf\u78b0\u5230\u4e86\u969c\u788d\u5219break\n\t\t\t\tif (dy[i] && s1[nx][ny] - s1[u.x][u.y]) break;  //\u82e5Wzf\u6cbfy\u8f74\u8d70\u4e14\u8def\u5f84\u4e2d\u6709\u969c\u788d\u5219break\n\t\t\t\tif (dx[i] && s2[nx][ny] - s2[u.x][u.y]) break;  //\u82e5Wzf\u6cbfx\u8f74\u8d70\u4e14\u8def\u5f84\u4e2d\u6709\u969c\u788d\u5219break\n\t\t\t\tif (a[nx][ny] == '#')   //Wzf\u627e\u5230\u4e86\u4f5c\u4e1a\uff01\n\t\t\t\t{\n\t\t\t\t\tcout << u.t + 1;\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tvis[nx][ny] = 1;    //\u6807\u8bb0\u5df2\u8bbf\u95ee\n\t\t\t\tnode tmp = {nx, ny, u.t + 1};\n\t\t\t\tq.push(tmp);\n\t\t\t}\n\t\t}\n\t}\n\tcout << -1;   //Wzf\u6ca1\u80fd\u627e\u5230\u4f5c\u4e1a\u5219\u8f93\u51fa-1\n\treturn 0;\n}\n```\n",
        "postTime": 1660740967,
        "uid": 556826,
        "name": "\u6668\u66e6\u58a8\u51dd",
        "ccfLevel": 4,
        "title": "P2130 \u72c2\u5954\u7684Wzf"
    },
    {
        "content": "## \u524d\u8a00\n\n[\u9898\u76ee\u4f20\u9001\u95e8\uff01](https://www.luogu.com.cn/problem/P2130)\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff1f](https://www.luogu.com.cn/blog/liangbowen/solution-p2130)\n\n\u672c\u9898\u662f\u7ec3\u4e60 bfs \u7684\u597d\u9898\u3002\n\n## \u601d\u8def\n\n\u7ed3\u5408\u4ee3\u7801\u8fdb\u884c\u601d\u8def\u8bb2\u89e3\u3002\n\n\u9996\u5148\u662f\u8bfb\u5165\u90e8\u5206\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 `bool` \u5b58\u4e0b\u5730\u56fe\uff0c\u8282\u7701\u7a7a\u95f4\u5f00\u9500\u3002\n\n\u9700\u8981\u6ce8\u610f\uff0c\u6570\u636e\u6bd4\u8f83\u70c2\uff0c**\u8d77\u59cb\u70b9\u53ef\u80fd\u6709\u969c\u788d**\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u9738\u6c14\u5730\u628a\u8d77\u59cb\u70b9\u7684\u969c\u788d\u6d88\u6389\u3002\n\n```cpp\nconst int N = 1005;\nbool a[N][N];\nint n, m, fx, fy;\nvoid Input() //\u7b80\u5355\u7684\u8f93\u5165\u3002\u6211\u4eec\u53ef\u4ee5\u7528 bool \u5b58\u5730\u56fe\uff0c\u51cf\u5c11\u7a7a\u95f4\u5f00\u9500\u3002 \n{\n\tcin >> n >> m;\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t{\n\t\t\tchar x;\n\t\t\tcin >> x;\n\t\t\tif (x == '$' || x == '.') a[i][j] = true;\n\t\t\tif (x == 'X') a[i][j] = false;\n\t\t\tif (x == '#') fx = i, fy = j, a[i][j] = true;\n\t\t}\n\ta[1][1] = true; //\u672c\u9898\u6570\u636e\u5f88\u70c2\uff0c(1,1) \u53ef\u80fd\u6709\u969c\u788d\uff0c\u9700\u8981\u624b\u52a8\u6d88\u9664\u3002 \n}\n```\n\n\u7136\u540e\u5c31\u662f bfs \u4e86\u3002\u5728 bfs \u4e4b\u524d\uff0c\u6211\u4eec\u51c6\u5907\u4e00\u5806\u79fb\u52a8\u6570\u7ec4\uff1a\n\n```cpp\n//\u8fd9\u4e9b\u662f\u7528\u6765\u8bb0\u5f55\u7b54\u6848\u7684\u6570\u7ec4\u3002 \nstruct Node {int x, y;};\nint ans[N][N];\nbool vis[N][N];\n\n//\u4e0b\u9762\u8fd9\u4e2a\uff0c\u662f\u8bb0\u5f55\u6b65\u6570\u7684\u8868\u683c\uff08\u4e2a\u4eba\u4e60\u60ef\u4e0b\u6807\u4ece 1 \u5f00\u59cb\uff09\u3002\nint foot[15] = {0, 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024};\n//\u4e0b\u9762\u8fd9\u4e2a\uff0c\u662f\u4e0a\u4e0b\u5de6\u53f3\u7684\u65b9\u4f4d\u6570\u7ec4\uff08\u4e2a\u4eba\u4e60\u60ef\u4e0b\u6807\u4ece 1 \u5f00\u59cb\uff09\u3002\nint dict[5][2] = {{0, 0}, {1, 0}, {-1, 0}, {0, 1}, {0, -1}}; \n```\n\n\u672c\u9898\u6700\u7279\u6b8a\u7684\u5730\u65b9\u5728\u4e8e\uff0c**\u6bcf\u4e00\u6b65\u8d70\u52a8\u4e4b\u95f4\u4e0d\u80fd\u6709\u969c\u788d**\u3002\u8fd9\u662f\u663e\u7136\u7684\u4e8b\u60c5\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 bfs \u4e2d\u7528\u51fd\u6570 $\\texttt{run()}$ \u5224\u65ad\u80fd\u5426\u8d70\u52a8\u3002\n\n\u5177\u4f53\u5982\u4e0b\uff1a\n\n```cpp\nint bfs() //\u57fa\u672c\u4e0a\u548c bfs \u7684\u6a21\u7248\u533a\u522b\u4e0d\u5927\u3002\n{\n\tqueue <Node> Q;\n\tans[1][1] = 0, vis[1][1] = true;\n\tQ.push( (Node){1, 1} );\n\twhile (!Q.empty())\n\t{\n\t\tint x = Q.front().x, y = Q.front().y;\n\t\t//cout << \"x = \" << x << \", y = \" << y << \".\\n\";\n\t\tif (x == fx && y == fy) return ans[x][y];\n\t\tQ.pop();\n\t\tfor (int i = 1; i <= 4; i++)\n\t\t\tfor (int j = 1; j <= 10; j++)\n\t\t\t{\n\t\t\t    //\u4ee5\u4e0b\u7a0d\u5fae\u6709\u70b9\u7279\u6b8a\u3002\n\t\t\t\tint dx = x + dict[i][0] * foot[j], dy = y + dict[i][1] * foot[j];\n\t\t\t\tif (dx < 1 || dx > n || dy < 1 || dy > m) continue;\n\t\t\t\tif (!run(x, y, dx, dy) || vis[dx][dy]) continue;\n\t\t\t\tans[dx][dy] = ans[x][y] + 1, vis[dx][dy] = true;\n\t\t\t\tQ.push( (Node){dx, dy} );\n\t\t\t}\n\t}\n\treturn -1;\n}\n```\n\n\u89c2\u5bdf\u8fd9\u4efd\u4ee3\u7801\uff0c\u5bb9\u6613\u53d1\u73b0\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\times m \\times\\log n)$ \u52a0\u4e0a $\\texttt{run()}$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\n\n\u5982\u679c $\\texttt{run()}$ \u4ecd\u7136\u66b4\u529b\u679a\u4e3e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5c06\u4f1a\u662f $O(n\\times m \\times\\log^2 n)$\uff0c\u6781\u5927\u53ef\u80fd\u8d85\u65f6\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u8bd5\u56fe\u8ba9 $\\texttt{run()}$ \u51fd\u6570 $O(1)$ \u8ba1\u7b97\u3002\n\n---\n\n\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u524d\u7f00\u548c\u4f18\u5316\u5b83\u3002\n\n\u5177\u4f53\u5730\uff0c\u8bbe $sum_{i, j}$ \u8868\u793a $(1,1)$ \u5230 $(i,j)$ \u7684\u77e9\u9635\u4e2d\uff0c\u4e0d\u53ef\u4ee5\u8d70\u7684\u70b9\u7684\u4e2a\u6570\u3002 \n\n\u8fd9\u4e2a\u5c31\u662f\u5178\u578b\u7684\u4e8c\u7ef4\u524d\u7f00\u548c\uff1a$sum_{i, j} = sum_{i-1,j} + sum_{i, j-1} - sum_{i-1,j-1} + [a_{i,j} = false]$\u3002\n\n```cpp\n//sum[i][j] \u8868\u793a (1,1) \u5230 (i,j) \u7684\u77e9\u9635\u4e2d\uff0c\u4e0d\u53ef\u4ee5\u8d70\u7684\u70b9\u7684\u4e2a\u6570\u3002 \nint sum[N][N];\nvoid init() //\u9884\u5904\u7406\u524d\u7f00\u548c\u3002 \n{\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tsum[i][j] = sum[i-1][j] + sum[i][j-1] - sum[i-1][j-1] + (a[i][j] == false);\n\t//for(int i=1;i<=n;i++,cout<<'\\n')for(int j=1;j<=m;j++)cout<<sum[i][j]<<' ';\n}\n```\n\n\u90a3\u4e48\uff0c$\\texttt{run()}$ \u53ea\u9700\u8981\u8ba9 $(x1,y1)$ \u5230 $(x2,y2)$ \u7684\u77e9\u9635\u4e2d\uff0c\u65e0\u6cd5\u8d70\u7684\u70b9\u7684\u6570\u91cf\u4e3a $0$ \u5373\u53ef\u3002\n\n```cpp\nbool run(int x1, int y1, int x2, int y2) //\u5224\u65ad\u80fd\u5426\u4ece (x1,y1) \u5230 (x2,y2)\u3002 \n{\n\tif (x1 > x2 || y1 > y2) swap(x1, x2), swap(y1, y2);\n\tint s = sum[x2][y2] - sum[x1-1][y2] - sum[x2][y1-1] + sum[x1-1][y1-1];\n\treturn (s == 0);\n}\n```\n\n\u81f3\u6b64\uff0c\u672c\u9898\u7ed3\u675f\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e0a\u6587\u5df2\u7ecf\u63d0\u5230\uff0c\u662f $O(n^2 \\log n)$ \u7ea7\u522b\u7684\u3002\n\n## \u5b8c\u6574\u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <queue>\nusing namespace std;\nvoid Fastio()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(0); cout.tie(0);\t\n}\nconst int N = 1005;\nbool a[N][N];\nint n, m, fx, fy;\nvoid Input() //\u7b80\u5355\u7684\u8f93\u5165\u3002\u6211\u4eec\u53ef\u4ee5\u7528 bool \u5b58\u5730\u56fe\uff0c\u51cf\u5c11\u7a7a\u95f4\u5f00\u9500\u3002 \n{\n\tcin >> n >> m;\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t{\n\t\t\tchar x;\n\t\t\tcin >> x;\n\t\t\tif (x == '$' || x == '.') a[i][j] = true;\n\t\t\tif (x == 'X') a[i][j] = false;\n\t\t\tif (x == '#') fx = i, fy = j, a[i][j] = true;\n\t\t}\n\ta[1][1] = true; //\u672c\u9898\u6570\u636e\u5f88\u70c2\uff0c(1,1) \u53ef\u80fd\u6709\u969c\u788d\uff0c\u9700\u8981\u624b\u52a8\u6d88\u9664\u3002 \n}\n\n//sum[i][j] \u8868\u793a (1,1) \u5230 (i,j) \u7684\u77e9\u9635\u4e2d\uff0c\u4e0d\u53ef\u4ee5\u8d70\u7684\u70b9\u7684\u4e2a\u6570\u3002 \nint sum[N][N];\nvoid init() //\u9884\u5904\u7406\u524d\u7f00\u548c\u3002 \n{\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tsum[i][j] = sum[i-1][j] + sum[i][j-1] - sum[i-1][j-1] + (a[i][j] == false);\n\t//for(int i=1;i<=n;i++,cout<<'\\n')for(int j=1;j<=m;j++)cout<<sum[i][j]<<' ';\n}\n\nbool run(int x1, int y1, int x2, int y2) //\u5224\u65ad\u80fd\u5426\u4ece (x1,y1) \u5230 (x2,y2)\u3002 \n{\n\tif (x1 > x2 || y1 > y2) swap(x1, x2), swap(y1, y2);\n\tint s = sum[x2][y2] - sum[x1-1][y2] - sum[x2][y1-1] + sum[x1-1][y1-1];\n\treturn (s == 0);\n}\n\n//\u8fd9\u4e9b\u662f\u7528\u6765\u8bb0\u5f55\u7b54\u6848\u7684\u6570\u7ec4\u3002 \nstruct Node {int x, y;};\nint ans[N][N];\nbool vis[N][N];\n\n//\u4e0b\u9762\u8fd9\u4e2a\uff0c\u662f\u8bb0\u5f55\u6b65\u6570\u7684\u8868\u683c\uff08\u4e2a\u4eba\u4e60\u60ef\u4e0b\u6807\u4ece 1 \u5f00\u59cb\uff09\u3002\nint foot[15] = {0, 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024};\n//\u4e0b\u9762\u8fd9\u4e2a\uff0c\u662f\u4e0a\u4e0b\u5de6\u53f3\u7684\u65b9\u4f4d\u6570\u7ec4\uff08\u4e2a\u4eba\u4e60\u60ef\u4e0b\u6807\u4ece 1 \u5f00\u59cb\uff09\u3002\nint dict[5][2] = {{0, 0}, {1, 0}, {-1, 0}, {0, 1}, {0, -1}}; \n\nint bfs()\n{\n\tqueue <Node> Q;\n\tans[1][1] = 0, vis[1][1] = true;\n\tQ.push( (Node){1, 1} );\n\twhile (!Q.empty())\n\t{\n\t\tint x = Q.front().x, y = Q.front().y;\n\t\t//cout << \"x = \" << x << \", y = \" << y << \".\\n\";\n\t\tif (x == fx && y == fy) return ans[x][y];\n\t\tQ.pop();\n\t\tfor (int i = 1; i <= 4; i++)\n\t\t\tfor (int j = 1; j <= 10; j++)\n\t\t\t{\n\t\t\t    //\u4ee5\u4e0b\u7a0d\u5fae\u6709\u70b9\u7279\u6b8a\u3002\n\t\t\t\tint dx = x + dict[i][0] * foot[j], dy = y + dict[i][1] * foot[j];\n\t\t\t\tif (dx < 1 || dx > n || dy < 1 || dy > m) continue;\n\t\t\t\tif (!run(x, y, dx, dy) || vis[dx][dy]) continue;\n\t\t\t\tans[dx][dy] = ans[x][y] + 1, vis[dx][dy] = true;\n\t\t\t\tQ.push( (Node){dx, dy} );\n\t\t\t}\n\t}\n\treturn -1;\n}\nint main()\n{\n\tFastio();\n\tInput();\n\tinit();\n\tcout << bfs();\n\treturn 0;\n}\n``` \n\n\u5e0c\u671b\u80fd\u5e2e\u52a9\u5230\u5927\u5bb6\uff01",
        "postTime": 1657263526,
        "uid": 367488,
        "name": "liangbowen",
        "ccfLevel": 0,
        "title": "P2130 \u9898\u89e3"
    },
    {
        "content": "#### [\u9898\u9762](https://www.luogu.com.cn/problem/P2130)\n\n### \u5148\u8bf4\u8bf4\u5751\u70b9\n1\u3001\u8fd9\u9053\u9898\u8d77\u70b9\u4f4d\u7f6e\u9700\u8981\u7279\u5224\u4e00\u4e0b\uff0c\u5148\u628a\u8fd9\u4e2a\u4f4d\u7f6e\u6807\u8bb0\u4e3a\u65e0\u3002\n\n\n2\u3001\u7206\u641c\u7684\u65f6\u5019\u8981\u6ce8\u610f\u524d\u8fdb\u7684\u65f6\u5019\u4e0d\u80fd\u649e\u5230\u969c\u788d\u7269\uff0c(\u8fd9\u4e00\u70b9\u6211\u4e5f\u6ca1\u6ce8\u610f\u5230\uff0c\u4e00\u5f00\u59cb\u505a\u4e86\u4e24\u4e2a0\u5206)\u3002\n\n\n3\u3001\u524d\u7f00\u548c\u5224\u65ad\u662f\u5426\u6709\u969c\u788d\u7269(\u5bf9\u5404\u4f4ddalao\u6765\u8bf4\u5e94\u8be5\u4e0d\u662f\u5751\u70b9\uff0c\u5bf9\u6211\u6765\u8bf4\u5c31...\u5c31\u6ca1\u60f3\u5230)\u3002\n\n### \u601d\u8def\n\u5148\u7528 ma \u6570\u7ec4\u628a\u6240\u6709\u7684\u7279\u6b8a\u70b9\u548c\u4e0d\u7279\u6b8a\u70b9\u90fd\u5199\u8fdb\u53bb\uff0c\u7136\u540e\u8fb9\u8f93\u5165\u8fb9\u6c42\u524d\u7f00\u548c\uff0c\u524d\u7f00\u548c\u662f\u7528\u6765\u5224\u65ad\u5f53\u524d\u79fb\u52a8\u7684\u65b9\u5411\u7684\u8ddd\u79bb\u5355\u4f4d\u7684\u6240\u6709\u70b9\u4e0a\u662f\u4e0d\u662f\u6709\u969c\u788d\u7269\u7684\uff0c\u7136\u540e\u5b9a\u4e00\u4e2a\u4e2a\u961f\u5217q\uff0c\u76f4\u63a5\u7206\u641c\uff0c\u679a\u4e3e\u4e0a\u4e0b\u5de6\u53f3\u6240\u6709\u70b9\uff0c\u76f4\u5230\u641c\u5b8c\u4e3a\u6b62\uff0c\u5982\u679c\u5df2\u7ecf\u8f93\u51fa\u4e86\u90a3\u5c31\u76f4\u63a5\u8d70\u4e86\uff0c\u5982\u679c\u6ca1\u6709\u90a3\u5c31\u8f93\u51fa$-1$\u3002\n\n\n### code\n\n```\n#include<cmath>\n#include<queue>\n#include<cstdio>\n#include<bitset>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\n#define int long long\n//inline char readchar() {static char buf[100000], *p1 = buf, *p2 = buf; return p1 == p2 && (p2 = (p1 = buf) + fread(buf, 1, 100000, stdin), p1 == p2) ? EOF : *p1++;}\n//inline int read() {int res = 0, f = 0; char ch = readchar(); for(; !isdigit(ch); ch = readchar()) if(ch == '-')f = 1; for(; isdigit(ch); ch = readchar()) res = (res << 1) + (res << 3) + (ch ^ '0'); return f ? -res : res;}\n\nconst int N=10001;\nint mo[N]= {1,2,4,8,16,32,64,128,256,512,1024};\nchar ma[N][N];  //\u679a\u4e3e\u6240\u6709\u76842n\u6b21\u65b9\u70b9\uff0c\u56e0\u4e3a\u4e0d\u4f1a\u592a\u5927\uff0c\u6240\u4ee5\u52301024\u5373\u53ef \nint n,m;\nint ex,ey;\nint sum[N][N];\nbool vis[N][N];\nstruct node {int x,y,step;};\ninline void bfs(int x,int y,int step) \n{\n\tqueue<node>q;\n\tq.push((node) {x,y,step});//\u5148\u628a\u4f20\u4e0a\u6765\u7684\u7b2c\u4e00\u4e2a\u653e\u8fdbq\u961f\u5217 \n\twhile(!q.empty()) \n\t{\n\t\tnode top=q.front();//\u7136\u540e\u5f00\u59cb\u5bfb\u627e \n\t\tq.pop();\n\t\tif(top.x==ex&&top.y==ey) //\u5f53\u6a2a\u7eb5\u5750\u6807\u90fd\u76f8\u7b49\u7684\u65f6\u5019\u5c31\u610f\u5473\u7740\u7ed3\u675f\u4e86 \n\t\t{\n\t\t\tprintf(\"%d\",top.step);\n\t\t\texit(0);//\u56e0\u4e3a\u8fd9\u91cc\u4e0d\u80fdreturn 0 \uff0cexit(0)\u6548\u679c\u4e00\u6837 \n\t\t}\n\t\tif(vis[top.x][top.y])continue;//\u5982\u679c\u8fd9\u4e2a\u70b9\u8d70\u8fc7\u4e86\uff0c\u90a3\u5c31\u8df3\u8fc7\u6240\u6709\u7684\uff0c\u76f4\u63a5\u5f00\u59cb\u4e0b\u4e00\u573a \n\t\tvis[top.x][top.y]=1;\n\t\tfor(register int i=0; i<=10; i++) //\u679a\u4e3e\u6bcf\u4e2a\u65b9\u5411\u7684\u6bcf\u4e2a\u70b9\uff0c\u770b\u770b\u80fd\u4e0d\u80fd\u8d70 \n\t\t{\t\t\n\t\t\tint nx=top.x,ny=top.y+mo[i];//y+1\u8bf4\u660e\u5411\u4e0b\uff0cx\u4e0d\u53d8 \n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)//\u4e0d\u80fd\u8d8a\u754c \u5426\u5219\u53ef\u80fdRE \n\t\t\tif(sum[nx][ny]-sum[nx-1][ny]-sum[top.x][top.y-1]+sum[top.x-1][top.y-1]==0)\n\t\t\t//\u5982\u679c\u8bf4\u524d\u7f00\u548c\u4e2d\u5f53\u524d\u7684\u4f4d\u7f6e\u6ca1\u6709 X\u7684\u8bdd\uff0c\u5c31\u662f\u6ca1\u6709 \u6570\uff0c\u56e0\u4e3a\u4e0b\u9762\u5df2\u7ecf\u5427\u969c\u788d\u7269\u8d4b\u503c\u4e3a 1 \uff0c\u6240\u4ee5\u8bf4\n\t\t\t//\u5982\u679c\u524d\u7f00\u662f 0 \uff0c\u5c31\u8bf4\u660e\u4e86\u5f53\u524d\u8def\u7ebf\u662f\u53ef\u884c\u7684\uff0c\u5c31\u662f\u6ca1\u6709\u969c\u788d\u7684 \n\t\t\tq.push((node) {nx,ny,top.step+1});//\u653e\u8fdb\u53bb \n\t\t}\n\t\tfor(register int i=0; i<=10; i++) //\u540c\u4e0a \n\t\t{ \n\t\t\tint nx=top.x,ny=top.y-mo[i];\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)\n\t\t\tif(sum[top.x][top.y]-sum[top.x-1][top.y]-sum[nx][ny-1]+sum[nx-1][ny-1]==0)\n\t\t\tq.push((node) {nx,ny,top.step+1});\n\t\t}\n\t\tfor(register int i=0; i<=10; i++) \n\t\t{ \n\t\t\tint nx=top.x+mo[i],ny=top.y;\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)\n\t\t\tif(sum[nx][ny]-sum[nx][ny-1]-sum[top.x-1][top.y]+sum[top.x-1][top.y-1]==0)\t\t\n\t\t\tq.push((node) {nx,ny,top.step+1});\n\t\t}\n\t\tfor(register int i=0; i<=10; i++ ) \n\t\t{  \n\t\t\tint nx=top.x-mo[i],ny=top.y;\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)\n\t\t\tif(sum[top.x][top.y]-sum[top.x][top.y-1]-sum[nx-1][ny]+sum[nx-1][ny-1]==0)\n\t\t\tq.push((node) {nx,ny,top.step+1});\n\t\t}\n\t}\n}\nsigned main() \n{\n\tscanf(\"%lld%lld\",&n,&m);\n\tfor(register int i=1; i<=n; i++)\n\tfor(register int j=1; j<=m; j++)     \n\t{\n\t\tchar now;\n\t\tcin>>now;\n\t\tif(now=='$'||now=='.')ma[i][j]=0;   //\u9898\u76ee\u4e2d\u6ca1\u8bf4. \u5230\u5e95\u662f\u4ec0\u4e48\uff0c\u9ed8\u8ba4\u662f\u969c\u788d\u7269\u4e86 \n\t\tif(now=='#')ex=i,ey=j;   \n\t\tif(now=='X')ma[i][j]=1;  //\u8fd9\u91cc\u522b\u7684\u5c31\u662f\u770b\u6761\u4ef6\u8d4b\u503c \n\t\tif(i==1&&j==1)ma[i][j]=0; //\u8fd9\u91cc\u8981\u7279\u5224\u4e00\u4e0b\uff0c\u4e0d\u7136#9\u9519\u8bef\uff0c\u8fd9\u4e2a\u70b9\u4e5f\u662f\u4e00\u4e2a\u5751\u70b9 \n\t\tsum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+ma[i][j]; \t//\u6c42\u524d\u7f00\u548c\u662f\u4e3a\u4e86\u7b97\u6709\u6ca1\u6709\u969c\u788d\u7269 \n\t}\n\tbfs(1,1,0);\n\tprintf(\"-1\");//\u627e\u4e0d\u5230\u7684\u8bdd\u76f4\u63a5\u8f93\u51fa \n\treturn 0;\n}\n```\n",
        "postTime": 1655802304,
        "uid": 697186,
        "name": "Low_key_smile",
        "ccfLevel": 0,
        "title": "[\u9898\u89e3]P2130 \u72c2\u5954\u7684Wzf"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u4e0d\u96be\uff0c\u5e94\u8be5\u7b97\u4e00\u4e2a\u9ec4\u9898\uff08\u867d\u7136\u505a\u4e86\u5f88\u957f\u65f6\u95f4\u5427\uff09\u3002\n\n\u9996\u5148\u5982\u679c\u4e0d\u8003\u8651\u65f6\u95f4\u56e0\u7d20\u7684\u8bdd\u8fd9\u4e2a\u5c31\u662f\u4e00\u4e2a\u88f8\u7684BFS\u80a5\u80a0\u7b80\u5355\u7684\u6a21\u677f\u9898\uff0c\u4f46\u5982\u679c\u4fbf\u5229\u6bcf\u4e00\u4e2a\u8d70\u7684\u4e8c\u6b21\u65b9\u7684\u8def\u5f84\u4e0a\u5408\u4e0d\u5408\u6cd5\u90a3\u65f6\u95f4\u53ef\u592a\u957f\u4e86\uff0c\u7a0d\u52a0\u601d\u7d22\u80af\u5b9a\u4e0d\u884c\uff0c\u90a3\u600e\u4e48\u529e\u5462\uff1f\n\n\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u6765\u5b8c\u6210\u5224\u65ad\u8def\u5f84\u4e0a\u7684\u70b9\u662f\u5426\u5408\u6cd5\u3002\u53ea\u8981\u628a `X` \u5728\u5730\u56fe\u4e0a\u6807\u8bb0\u6210 $1$ \u5176\u4ed6\u7684\u6807\u8bb0\u6210 $0$ \u7136\u540e\u6c42\u51fa\u884c\u7684\u524d\u7f00\u548c\u548c\u5217\u7684\u524d\u7f00\u548c\u5c31\u53ef\u4ee5\u4e86\uff0c\u64cd\u4f5c\u7684\u65f6\u5019\u770b\u4e00\u770b\u8fd9\u4e00\u4e2a\u533a\u95f4\u5185\u6709\u6ca1\u6709 $1$ \u4e5f\u5c31\u662f\u6709\u6ca1\u6709\u969c\u788d\u7269\uff0c\u5982\u679c\u524d\u7f00\u548c\u8ba1\u7b97\u51fa\u4e3a $0$ \u5c31\u4ee3\u8868\u53ef\u4ee5\u8d70\uff0c\u53cd\u4e4b\u5c31\u4e0d\u80fd\u8d70\u3002\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u5224\u65ad\u548c\u4e0d\u5408\u6cd5\u7684\u64cd\u4f5c\uff0c\u5176\u4ed6\u7684\u6309\u7167BFS\u6a21\u677f\u505a\u5373\u53ef\u3002\n\n\u5bf9\u4e86\uff0c\u8fd9\u4e2a\u9898\u76ee\u6709\u53ef\u80fd\u5f80\u4e0a\u6216\u5f80\u5de6\u8d70\uff0c\u5728\u8ba1\u7b97\u524d\u7f00\u548c\u7684\u65f6\u5019\u8981\u7279\u6b8a\u5224\u65ad\uff0c\u4e0d\u7136\u4f1a\u51fa\u9519\uff0c\u5224\u65ad\u65b9\u6cd5\u662f\u5982\u679c\u662f\u5f80\u4e0a\u6216\u5f80\u5de6\u5c31\u628a\u4e24\u4e2a\u76f8\u51cf\u6570\u6362\u6362\u4f4d\u7f6e\u5c31\u884c\uff08\u5c31\u56e0\u4e3a\u8fd9\u4e2a\u770b\u4e86\u4e00\u4e2a\u5c0f\u65f6\u6ca1\u770b\u51fa\u6765\u81ea\u5df1\u54ea\u91cc\u9519\u4e86\uff09\u3002\n\n\u4e0a\u4ee3\u7801\uff01\n\n```\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nconst int d[11]={1,2,4,8,16,32,64,128,256,512,1024};\nint n,m,vis[1002][1002],Map[1002][1002],jx,jy;\nint hang[1002][1002],lie[1002][1002],bj;\nchar ch;\n\nqueue<int> x,y;\nint fx[4]={0,0,1,-1},\n\tfy[4]={1,-1,0,0};\n\nsigned main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tcin>>ch;\n\t\t\tif(ch=='X') hang[i][j]=lie[i][j]=1;\n\t\t\tif(ch=='#') jx=i,jy=j;\n\t\t\tMap[i][j]=ch;\n\t\t}\n\t}\n\thang[1][1]=lie[1][1]=0;//\u7279\u5224\u4e00\u4e0b \n\tfor(int i=1;i<=n;i++)//\u5206\u522b\u8ba1\u7b97\u884c\u5217\u524d\u7f00\u548c \n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\thang[i][j]+=hang[i][j-1];\n\t\t\tlie[i][j]+=lie[i-1][j];\n\t\t}\n\t}\n\tx.push(1),y.push(1);\n\tvis[1][1]=1;\n\twhile(!x.empty())\n\t{\n\t\tint dx=x.front(),dy=y.front();\n\t\tx.pop();y.pop();\n\t\tfor(int i=0;i<=3;i++)//\u65b9\u5411 \n\t\t{\n\t\t\tfor(int j=0;;j++)//\u8d70\u7684\u6570\u503c \n\t\t\t{\n\t\t\t\tint nx=dx+fx[i]*d[j],//\u7528\u4e58\u7684\u65b9\u5f0f\u53ef\u4ee5\u5b8c\u6210\u64cd\u4f5c \n\t\t\t\t\tny=dy+fy[i]*d[j];\n\t\t\t\tif(nx<1 || ny<1 || nx>n || ny>m) break ;\n\t\t\t\tif(i==0)\n\t\t\t\t\tbj=hang[dx][ny]-hang[dx][dy-1];\n\t\t\t\tif(i==1)\n\t\t\t\t\tbj=hang[dx][dy]-hang[dx][ny-1];\n\t\t\t\tif(i==2)\n\t\t\t\t\tbj=lie[nx][dy]-lie[dx-1][dy];\n\t\t\t\tif(i==3)\n\t\t\t\t\tbj=lie[dx][dy]-lie[nx-1][dy];\n\t\t\t\tif(bj!=0) break ;\n\t\t\t\tif(vis[nx][ny]!=0) continue ;\n\t\t\t\tvis[nx][ny]=vis[dx][dy]+1;\n\t\t\t\tx.push(nx),y.push(ny);\n\t\t\t}\n\t\t}\n\t}\n\tcout<<vis[jx][jy]-1;//\u56e0\u4e3a\u7b2c\u4e00\u6b65\u6211\u8bbe\u7684\u521d\u59cb\u503c\u662f1\u6240\u4ee5\u8981-1 \n}\n```\n",
        "postTime": 1655796620,
        "uid": 231946,
        "name": "CuSO4_and_5H2O",
        "ccfLevel": 6,
        "title": "P2130 \u72c2\u5954\u7684Wzf \u9898\u89e3"
    },
    {
        "content": "\n- \u9996\u5148\uff0c\u8ba9\u6211\u4eec\u6765\u5206\u6790\u4e00\u4e0b\u8fd9\u9053\u9898\u3002\n\n- ### \u7b97\u6cd5\uff1a\u5e7f\u641c\u3002\n\n- ### \u6570\u636e\u7ed3\u6784\uff1a\u961f\u5217 \u3002\n\n- ### \u4f18\u5316\uff1a\u524d\u7f00\u548c\u3002\n\n\u5148\u9884\u5904\u7406\u524d\u7f00\u548c\uff0c\u518d\u679a\u4e3e$logn$\u6761\u8def\u5f84\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n*logn)$\n\n\u52a0\u4e0a\u4ebf\u4e9b\u5361\u5e38\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u62ff\u4e0b\u6700\u4f18\u89e3\u3002\n\n### 160ms(\u76ee\u524d\u662f\u6700\u4f18\u89e3)\n\u73b0\u5728\u5f00\u59cb\u2014\u2014\u4e0a\u4ee3\u7801\uff01\n\n```cpp\n#include<bits/stdc++.h>\n#define RI register int\nusing namespace std;\n#define ru(x,y) d[++w]=(wu){x,y,s}//\u65b9\u4fbf\u5165\u961f\ninline int read(){//\u5feb\u8bfb\n    RI s=0;char c=getchar();\n    while(!isdigit(c)) c=getchar();\n    while(isdigit(c)) s=(s<<1)+(s<<3)+c-48,c=getchar();\n    return s;\n}\ninline void write(int x){//\u5feb\u8f93\n    if(x>9) write(x/10);\n    putchar(x%10+48);\n}\nstruct wu{\n\tint x,y,t;\n}d[5000002];//\u7ed3\u6784\u4f53\u961f\u5217\nchar c[1001];\nbool b[1001][1001];\nint h[1001][1001],l[1001][1001];//h[][]\u5b58\u6a2a\u5411\u533a\u95f4\u969c\u788d\u7269\u6570\u3002,l[][]\u5b58\u5217\u5411\u533a\u95f4\u969c\u788d\u7269\u6570\u3002\nint mx[4]={1,0,-1,0},my[4]={0,1,0,-1};\nint main(){\n\tRI n=read(),m=read(),x,y,xi,yi,s,zx,zy;\n\tregister bool q;\n\tfor(RI i=1;i<=n;i=-~i){\n\t\tscanf(\"%s\",&c);\n\t\tfor(RI j=0;j<m;j=-~j){\n\t\t\tif(c[j]=='$') q=0;\n\t\t\telse if(c[j]=='#')\n\t\t\t\tzx=i,zy=-~j,q=0;\n\t\t\telse q=1;\n\t\t\th[i][-~j]=q+h[i][j];//\u8ba1\u7b97\u524d\u7f00\u548c\n\t\t\tl[i][-~j]=q+l[i-1][-~j];\n\t\t}\n\t}\n\td[1]=(wu){1,1,0};b[1][1]=1;\n\tfor(RI t=1,w=1;t<=w;t=-~t){\n\t\tx=d[t].x;y=d[t].y;s=-~d[t].t;\n\t\tif(x==zx&&y==zy){\n\t\t\twrite(s-1);\n\t\t\treturn 0;\n\t\t}\n\t\tfor(RI p=1;p<x&&l[x-1][y]-l[x-p-1][y]==0/*\u5224\u65ad\u4e2d\u95f4\u662f\u5426\u6709\u969c\u788d\u7269*/;p<<=1){//\u5411\u4e0a\u8d70\n\t\t\tif(b[x-p][y]) continue;\n\t\t\tb[x-p][y]=1;ru(x-p,y);\n\t\t}\n\t\tfor(RI p=1;p+x<=n&&l[x+p][y]-l[x][y]==0;p<<=1){//\u5411\u4e0b\u8d70\n\t\t\tif(b[x+p][y]) continue;\n\t\t\tb[x+p][y]=1;ru(x+p,y);\n\t\t}\n\t\tfor(RI p=1;p<y&&h[x][y-1]-h[x][y-p-1]==0;p<<=1){//\u5411\u5de6\u8d70\n\t\t\tif(b[x][y-p]) continue;\n\t\t\tb[x][y-p]=1;ru(x,y-p);\n\t\t}\n\t\tfor(RI p=1;p+y<=m&&h[x][y+p]-h[x][y]==0;p<<=1){//\u5411\u53f3\u8d70\n\t\t\tif(b[x][y+p]) continue;\n\t\t\tb[x][y+p]=1;ru(x,y+p);\n\t\t}\n\t}\n\tprintf(\"-1\");//\u867d\u7136\u65e0-1\u7684\u6570\u636e\uff0c\u4f46\u8fd8\u662f\u9075\u4ece\u9898\u610f\n\treturn 0;\n}\n```\n\u7b2c\u4e09\u6b21\u53d1\u9898\u89e3\uff0c\u671b\u7ba1\u7406\u5458\u901a\u8fc7\u3002",
        "postTime": 1608906703,
        "uid": 133037,
        "name": "_OccDreamer_",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2130 \u3010\u72c2\u5954\u7684Wzf\u3011"
    },
    {
        "content": "\u4e00\u9053\u5bbd\u641c\u9898\uff0c[BFS](https://baike.baidu.com/item/%E5%AE%BD%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/5224802?fromtitle=BFS&fromid=542084&fr=aladdin)+[\u524d\u7f00\u548c](https://blog.csdn.net/weixin_41668995/article/details/80501338)\u5c31\u53ef\u4ee5\u8fc7\u3002\n#### \u8270\u96be\u7684\u5f97\u5206\u5386\u7a0b\uff1a\n   1. \u5f00\u59cb\u6ca1\u6709\u6ce8\u610f\u5230\u8981\u5224\u65ad\u4e2d\u95f4\u6709\u6ca1\u6709\u969c\u788d\uff08~~\u4e5f\u5c31\u53ea\u6709\u6211\u8fd9\u79cd\u4e0d\u597d\u597d\u5ba1\u9898\u7684\u624d\u770b\u4e0d\u51fa\u6765~~\uff09\u53ef\u662f\u5f97\u4e8640\u5206......\n   2. \u4e4b\u540e\u5f00\u59cb\u53cd\u590d\u8c03\u8bd5\uff0c\u56e0\u4e3a\u6ca1\u6709\u6d4b\u8bd5\u6570\u636e\uff0c\u6240\u4ee5\u57280~40\u4e4b\u95f4\u5f98\u5f8a......\n   3. \u6700\u540e\u604d\u7136\u5927\u609f\uff0c\u6211\u628a\u4fdd\u5b58\u524d\u7f00\u548c\u7684\u6570\u7ec4\u5f04\u53cd\u4e86......\n#### \u4ee3\u7801\u5b9e\u73b0\uff1a\n\u6700\u5f00\u59cb40\u5206\u7684\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node{\n    int x;\n    int y;\n    int step;\n};\nint n,m,sx,sy;\nint mv[4][2]={{1,0},{0,1},{-1,0},{0,-1}};\nbool v[1001][1001];\nvoid bfs()\n{\n    queue<node>que;\n    int i,j;\n    v[1][1]=false;\n    node a,b,c;\n    a.x=1;\n    a.y=1;\n    a.step=0;\n    que.push(a);\n    while(!que.empty())\n    {\n     b=que.front();\n     que.pop();\n     if(b.x==sx && b.y==sy)\n     {\n      cout<<b.step<<endl;\n      return ;\n     }\n     for(i=0;i<4;i++)\n     {\n      j=1;\n      while(1)\n      {\n       c.x=b.x+mv[i][0]*j;\n       c.y=b.y+mv[i][1]*j;\n       c.step=b.step+1;\n       if(c.x<=0 || c.x>n || c.y<=0 || c.y>m)\n        break;\n       if(v[c.x][c.y])\n       {\n        v[c.x][c.y]=false;\n        que.push(c);\n       } \n       j*=2;\n      }\n     }\n    }\n}\nint main()\n{\n    int i,j;\n    char a;\n    cin>>n>>m;\n    for(i=1;i<=n;i++)\n     for(j=1;j<=m;j++)\n     {\n      cin>>a;\n      if(a=='$')\n       v[i][j]=true;\n      else\n       if(a=='#')\n       {\n        v[i][j]=true;\n        sx=i;\n        sy=j;\n       }\n       else\n        v[i][j]=false;\n     }\n    bfs();\n    return 0;\n}\n```\n\u7531\u4e8e\u4e2d\u95f4\u8c03\u8bd5\u7684\u5c0f\u9519\u8bef\u592a\u591a\uff0c\u6545\u53ea\u53d1100\u5206\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node{\n    int x;\n    int y;\n    int step;\n};//\u7ed3\u6784\u4f53\uff0c\u7528\u4e8e\u961f\u5217\nint n,m,sx,sy;\nint mv[21]={1,2,4,8,16,32,64,128,256,512,-1,-2,-4,-8,-16,-32,-64,-128,-256,-512};//\u4e3a\u4e86\u5077\u61d2\uff0c\u4e8b\u5148\u624b\u7b97\u53ef\u7528\u6570\u636e\nint v[1001][1001];\nint q,w[1001][1001],e[1001][1001];\nvoid bfs()\n{\n    queue<node>que;\n    int i,j;\n    v[1][1]=0;//\u6807\u8bb0\n    node a,b,c;\n    a.x=1;\n    a.y=1;\n    a.step=0;\n    que.push(a);\n    while(!que.empty())\n    {\n     b=que.front();\n     que.pop();\n     if(b.x==sx && b.y==sy)\n     {\n      cout<<b.step<<endl;\n      return ;\n     }//\u5982\u679c\u8fbe\u5230\u5c31\u8f93\u51fa\uff0c\u5e76\u9000\u51faBFS\n     for(i=0;i<=20;i++)\n     {\n      c.x=b.x+mv[i];\n      c.y=b.y;\n      c.step=b.step+1;\n      if(c.x>=1 && c.y>=1 && c.x<=n && c.y<=m && v[c.x][c.y]==1 && e[c.x][c.y]-e[b.x][b.y]==0)\n      {\n       v[c.x][c.y]=0;\n       que.push(c);\n      }\n     }//\u4e0a\u4e0b\u8d70\n     for(i=0;i<=20;i++)\n     {\n      c.x=b.x;\n      c.y=b.y+mv[i];\n      c.step=b.step+1;\n      if(c.x>=1 && c.y>=1 && c.x<=n && c.y<=m && v[c.x][c.y]==1 && w[c.x][c.y]-w[b.x][b.y]==0)\n      {\n       v[c.x][c.y]=0;\n       que.push(c);\n      }\n     }//\u5de6\u53f3\u8d70\n    }\n}\nint main()\n{\n    int i,j;\n    char a;\n    cin>>n>>m;\n    for(i=1;i<=n;i++)\n     for(j=1;j<=m;j++)\n     {\n      cin>>a;\n      v[i][j]=0;\n      q=1;\n      if(a=='$' || a=='#')\n      {\n       if(a=='#')\n       {\n        sx=i;\n        sy=j;\n       }\n       v[i][j]=1;\n       q=0;\n      }\n      w[i][j]=q+w[i][j-1];\n      e[i][j]=q+e[i-1][j];\n     }//\u9884\u5904\u7406\n    bfs();\n    return 0;\n}\n```\n\u539f\u8c05\u6211\u8bed\u8a00\u8868\u8fbe\u80fd\u529b\u4e0d\u597d\uff08~~\u6bd5\u7adf\u6211\u662f\u4e2a120\u7684\u8bed\u6587\u8bd5\u5377\u53ea\u670986\u7684\u849f\u84bb~~\uff09",
        "postTime": 1563623522,
        "uid": 79072,
        "name": "hylong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2130 \u3010\u72c2\u5954\u7684Wzf\u3011"
    },
    {
        "content": "quq\u60f3\u6765\u5206\u4eab\u4e00\u4e0b\u6bd4\u8f83\u88f8\u7684\u5e7f\u641c\u505a\u6cd5\uff08\u526a\u679d + \u4f18\u5316\uff09\n\u6bd4\u8f83\u9002\u5408\u65b0\u4eba\u98df\u7528\uff0c\u697c\u4e0a\u7684\u5927\u725b\u5389\u5bb3\u591a\u4e86\uff08%%%\uff09\n\u9898\u610f\uff1a\n\u4ece\u5730\u56fe\u7684\u4e00\u4e2a\u70b9\u5230\u53e6\u4e00\u4e2a\u70b9\uff0c\u4e2d\u95f4\u6709\u969c\u788d\uff0c\u53ef\u4ee5\u4e00\u6b21\u8d70 2\u7684K\u6b21\u65b9\u6b65\uff1b\n\n\u6613\u6df7\u6dc6\u7684\u70b9\uff1a(1,1)\u6307\u7684\u4e0d\u662f\u7b1b\u5361\u5c14\u5750\u6807\u7cfb\u4e2d\u7684(1,1)\uff0c\u800c\u662f\u8bf4\u4ece\u6570\u7ec4\u89d2\u5ea6\u6765\u770b\uff08\u7ecf\u5e38Debug\u6570\u7ec4\u7684\u5927\u725b\u4eec\u5e94\u8be5\u90fd\u77e5\u9053\uff09\n\n\n\u7b2c\u4e00\u601d\u8def\uff1a\u88f8\u5e7f\u641c\uff08\u6bcf\u5230\u4e00\u4e2a\u70b9\uff0c\u9009\u62e9\u8d70\u7684\u6b65\u6570\uff0c\u5faa\u73af\u4e00\u904d\u5224\u65ad\u80fd\u5426\u5230\u8fbe\uff08\u4e2d\u95f4\u53ef\u80fd\u4f1a\u6709\u969c\u788d\uff09\uff09\n\n\u590d\u6742\u5ea6\u5f88\u9ad8\uff0c\u9884\u8ba1\u5f97\u5206\u572810 - 30\n\u7136\u540e\u4e0d\u65ad\u5730\u88ab\u5361\u572820\u7684\u5206\u6570\uff0c\u53d1\u73b0\u603b\u4f1a\u70b8\uff1b\n\u68c0\u7d22\u540e\u53d1\u73b0\uff1a\n\n\u5982\u679c**\u6bcf\u4e00\u6b21\u79fb\u52a8\u6211\u90fd\u8fdb\u884c**for\u5faa\u73af\u5224\u65ad \u5c82\u4e0d\u662f30\u90fd\u62ff\u4e0d\u5230\uff1f\uff1f\uff1f\n\u8fdb\u4e00\u6b65\u601d\u8003\uff1a\u80fd\u5426\u901a\u8fc7\u538b\u4f4d\u8fdb\u884c\u969c\u788d\u5224\u65ad\uff1f\nn,m < 1000  \u4e0d\u884c\n\u524d\u7f00\u548c\u4f18\u5316\u53ef\u5426\uff1f\n\u60f3\u4e00\u60f3 1000 * 1000 ~~\u7b80\u76f4\u65e0\u538b\uff01~~\n\u64cd\u4f5c\u540e\u53d1\u73b0 **\u6bcf\u884c\u6bcf\u5217**\u90fd\u8981\u8fdb\u884c\u524d\u7f00\u548c\u5904\u7406\uff08\u53ef\u80fd\u5411\u4e0b\u8d70\u4e5f\u53ef\u80fd\u5411\u4e0a\u8d70\uff09\n\n\u90a3\u4e48~~\u5f00\u4e24\u4e2a\u6570\u7ec4\uff1f~~\u6211\u90a3\u4e48\u61d2\u5f53\u7136\u662f\u5f00\u4e09\u7ef4\u5566\n\n\u4e8e\u662f\u5224\u65ad\uff1a \u82e5\u533a\u95f4I - J(j > i)\u4e2d\u80fd\u8d70\u7684\u8def\u4e3aj - i + 1 \u90a3\u4e48\u663e\u7136\u8fd9\u5c31\u662f\u53ef\u884c\u7684\u8def \u8d70\u5c31\u662f\u5566\n\n**\u64cd\u4f5c\u5c0f\u6280\u5de7**\u5982\u679c 2 ^ 8\u80fd\u8d70\u5230\uff0c\u90a3\u4e48 2 ^ 4\u4e5f\u4e00\u5b9a\u80fd\u8d70\u5230\uff08\u727a\u7272\u4e86\u8fd0\u884c\u65f6\u95f4\uff0c\u4fdd\u8bc1\u4e86\u66f4\u591a\u7684\u8fd0\u884c\u65f6\u95f4\uff08\u5982\u679c- 2 ^ 10 - 2 ^ 10 \u5168\u90e8\u52a0\u5165\u64cd\u4f5c\uff0c\u6bcf\u4e00\u4e2a\u961f\u5217\u4e2d\u7684\u5143\u7d20\u8981\u8fdb\u884c\u7684\u677e\u5f1b\u64cd\u4f5c\u592a\u591a\u4e86\uff0c~~\u5f53\u7136\u662f\u9009\u62e9\u653e\u5f03\u5927\u7684\u6570\u5566~~\uff09\uff09\n**\u9898\u76ee\u5751\u70b9**\u53ef\u80fd\u662f\uff081,1\uff09\u662f\u969c\u788d\n\n\u8fd8\u6709\u4e0d\u61c2\u7684\u53ef\u4ee5Q\u6211\uff08\u731c\u6211\u7684ID\u662f\u4ec0\u4e48\uff09,\u6d1b\u8c37\u56e0\u4e3a\u6ca1\u6709\u5b9e\u540d\u5236\u4e0d\u4fbf\u79c1\u4fe1\u56de\u590d\uff0c\u4e07\u671b\u8c05\u89e3\uff0c\u5e0c\u671b\u5404\u8def\u5927\u725b\u6307\u51fa\u4e0d\u8db3\u5171\u540c\u8fdb\u6b65\uff01\n\n\u4ee3\u7801\u9002\u5408\u4f17\u4eba\u98df\u7528~~\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <queue>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nconst int MAXN = 1010;\nint n,m,ans;\nbool pd[MAXN][MAXN];\nbool go[MAXN][MAXN];\nbool flag;\nint a[MAXN][MAXN][2];\nint zdx,zdy;//\u7ec8\u70b9\u7684x \u4e0eY\u5750\u6807\nint x1[21] = {0,8,4,2,1,32,16,-4,-2,-1,-32,-16,-8},\n    y1[21] = {0,8,4,2,1,32,16,-4,-2,-1,-32,-16,-8};\n\nvoid init()\n{\n    cin >> n >> m;\n    for (int i = 1 ; i <= n ; i ++)\n        for (int j = 1 ; j <= m ; j ++)\n        {\n            char ch ;\n            cin >> ch;\n            if(ch == '#')\n            {\n                zdx = i,zdy = j;\t\t\n                pd[i][j] = 1;\n            }//\u53ea\u8981\u662f\u8fd9\u4e2a\u5b57\u7b26\u5c31\u90fd\u53ef\u4ee5\u8d70\uff0c\u4e0d\u8bb2\u9053\u7406\n            else if(ch == '$')\n                pd[i][j] = 1;\n        }\n    return ;\n}\nvoid ahead()\n{\n\tpd[1][1] = 1;//\u628a\u5751\u70b9\u9884\u5904\u7406\u6389\n    for (int i = 1 ; i<= n ; i++)\n        for (int j = 1 ; j <= m ; j++)\n            a[i][j][0] = a[i][j-1][0] + pd[i][j];//\u8fd9\u91cc\u5c31\u662f\u9884\u5904\u7406\u90e8\u5206\u5173\u4e8e\u884c\u5217\u7684\u5bf9\u6bd4\n    for (int j = 1 ; j <= m ;j++)\n        for (int i = 1 ; i <= n ; i ++)\n            a[i][j][1] = a[i-1][j][1] + pd[i][j];\n    return;\n}\nstruct node\n{\n    int x,y,step;\n}q[20000010];\nvoid bfs()\n{\n    int head = 0,tail = 1;\n    q[1].x = 1,q[1].y = 1;\n    while(head < tail)//\u8fd9\u91cc\u9009\u7528\u9759\u6001\u7684\u539f\u56e0\u662f\u6015\u52a8\u6001\u4f1a\u5f71\u54cd\u901f\u5ea6(LCA\u4e2d\u6253\u4e86Vector \u88ab\u6309\u5728\u5730\u4e0a\u9524)\u4e86\n    {\n        head++;\n        int nowx = q[head].x ,nowy = q[head].y,nowstep = q[head].step;\n        if(go[nowx][nowy])\n            continue;\n        go[nowx][nowy] = 1;\n        \n        if(nowx == zdx && nowy == zdy)\n        {\n            flag = 1;\n            ans = nowstep;\n            break;\n        }//\u76f4\u63a5\u8df3\u51fa\n        if(nowx < 1 || nowx > n || nowy < 1 || nowy >m)//\u8d8a\u754c\u7684\u8001\u54e5\u60a8\u8d70\u597d\uff08\u8fd9\u91cc\u52a0\u662f\u4e3a\u4e86\u4e07\u65e0\u4e00\u5931\uff09\n            continue;\n        nowstep++;\n        for (int i = 1 ; i <= 12 ;i++) //\u6a2a\u5750\u6807\u4e0d\u53d8\uff0c\u7eb5\u5750\u6807\u52a0 \n        {\n            int tx = nowx + x1[i];\n            if(tx > n)\n                continue;\n            if((a[tx][nowy][1] - a[nowx - 1][nowy][1] == tx - nowx + 1) && !go[tx][nowy]) \n            {\n                tail++;\n                q[tail].x = tx;\n                q[tail].y = nowy;\n                q[tail].step = nowstep;\n            }\t\n        }\n        for (int i = 1 ; i <= 12 ; i++)\n        {\n            int ty = nowy + y1[i];\n            if(ty > m)//\u8d8a\u754c\u60c5\u51b5 \u4e0d\u8981\u4f60\n                continue;\n            if( (a[nowx][ty][0] - a[nowx][nowy - 1][0] == ty - nowy + 1) && !go[nowx][ty]) \n            {\n                tail++;\n                q[tail].x = nowx;\n                q[tail].y = ty;\n                q[tail].step = nowstep;\n            }\n        }\n    }\n    printf(\"%d\",ans);\n    return ;\n}\nint main()\n{\n\tfreopen(\"Wzy.in\",\"r\",stdin);//\u4e0d\u8981\u76f4\u63a5\u590d\u5236\u54e6\n    init();//\u8981\u4e60\u60ef\u5206\u5757\n    ahead();\n    bfs();\n    return 0;\n}\n```",
        "postTime": 1541405846,
        "uid": 44468,
        "name": "z2415445508",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2130 \u3010\u72c2\u5954\u7684Wzf\u3011"
    },
    {
        "content": "\u8fd9\u9898\u76ee\u4e0d\u5c31\u662f\u4e00\u9053\u88f8\u7684\u641c\u7d22\u5417\uff1f\n\n\u9898\u76ee\u4e2d\u7684 \u300c.\u300d \u548c \u300c&#36;\u300d \u6807\u8bb0\u4e3a `0` \uff0c\u300cX\u300d \u6807\u8bb0\u4e3a `1` \uff0c\u300c#\u300d \u7279\u6b8a\u6807\u8bb0\u5373\u53ef\u3002\n\n\u56e0\u4e3a\u4e00\u6b21\u79fb\u52a8\u7684\u8ddd\u79bb\u8fc7\u5927\uff0c\u4e00\u4e2a\u4e00\u4e2a\u5224\u969c\u788d\u80af\u5b9a\u4f1a\u8d85\u65f6\uff0c\u6211\u4eec\u9700\u8981\u7528\u4e00\u4e2a\u4e8c\u7ef4\u524d\u7f00\u548c\u8bb0\u5f55\u4e2d\u9014\u662f\u5426\u6709\u969c\u788d\u7269\u3002\n\n\u6bcf\u6b21\u79fb\u52a8\u7684 $2^k$ \u6700\u591a\u4e3a $1024$ \uff0c\u6bcf\u6b21\u79fb\u52a8\u65f6\u904d\u5386\u5373\u53ef\u3002\n\n\u91cd\u70b9\u5728\u4e8e\u4e8c\u7ef4\u524d\u7f00\u548c\u7684\u6c42\u533a\u95f4\u548c\uff0c\u81ea\u884c\u753b\u56fe\u7406\u89e3\u5373\u53ef\u3002\n\n\u6709\u4e00\u4e2a\u5751\u70b9\u5728\u4e8e\u8d77\u70b9\u4e0a\u53ef\u80fd\u6709\u969c\u788d\uff0c\u9700\u8981\u81ea\u884c\u6d88\u9664\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=1005;\nint mo[MAXN]={1,2,4,8,16,32,64,128,256,512,1024};\nchar ma[MAXN][MAXN];\nint n,m;\nint ex,ey;\nint sum[MAXN][MAXN];\nbool vis[MAXN][MAXN];\nstruct node\n{\n\tint x,y,step;\n};\ninline void bfs(int x,int y,int step)\n{\n\tqueue<node>q;\n\tq.push((node){x,y,step});\n\twhile(!q.empty())\n\t{\n\t\tnode top=q.front();\n\t\tq.pop();\n\t\tif(top.x==ex&&top.y==ey)\n\t\t{\n\t\t\tprintf(\"%d\",top.step);\n\t\t\texit(0);\n\t\t}\n\t\tif(vis[top.x][top.y])continue;\n\t\tvis[top.x][top.y]=1;\n\t\tfor(register int i=0;i<=10;i++)//\u5411\u53f3\u8d70 \n\t\t{\n\t\t\tint nx=top.x,ny=top.y+mo[i];\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)\n\t\t\t\tif(sum[nx][ny]-sum[nx-1][ny]-sum[top.x][top.y-1]+sum[top.x-1][top.y-1]==0)q.push((node){nx,ny,top.step+1});\n\t\t}\n\t\tfor(register int i=0;i<=10;i++)//\u5411\u5de6\u8d70\n\t\t{\n\t\t\tint nx=top.x,ny=top.y-mo[i];\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)\n\t\t\t\tif(sum[top.x][top.y]-sum[top.x-1][top.y]-sum[nx][ny-1]+sum[nx-1][ny-1]==0)q.push((node){nx,ny,top.step+1});\n\t\t} \n\t\tfor(register int i=0;i<=10;i++)//\u5411\u4e0b\u8d70\n\t\t{\n\t\t\tint nx=top.x+mo[i],ny=top.y;\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)\n\t\t\t\tif(sum[nx][ny]-sum[nx][ny-1]-sum[top.x-1][top.y]+sum[top.x-1][top.y-1]==0)q.push((node){nx,ny,top.step+1});\n\t\t} \n\t\tfor(register int i=0;i<=10;i++)//\u5411\u4e0a\u8d70\n\t\t{\n\t\t\tint nx=top.x-mo[i],ny=top.y;\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m)\n\t\t\t\tif(sum[top.x][top.y]-sum[top.x][top.y-1]-sum[nx-1][ny]+sum[nx-1][ny-1]==0)q.push((node){nx,ny,top.step+1});\n\t\t} \n\t}\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(register int i=1;i<=n;i++)\n\t\tfor(register int j=1;j<=m;j++)\n\t\t{\n\t\t\tchar now;\n\t\t\tcin>>now;\n\t\t\tif(now=='$'||now=='.')ma[i][j]=0;\n\t\t\tif(now=='#')ex=i,ey=j;\n\t\t\tif(now=='X')ma[i][j]=1;\n\t\t\tif(i==1&&j==1)ma[i][j]=0;//\u5751\u70b9\uff0c\u53d6\u6d88\u5373\u53ef\uff0c\u4e0d\u505a\u4f1aWA#9\n\t\t\tsum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+ma[i][j];//\u4e8c\u7ef4\u524d\u7f00\u548c\n\t\t}\n\tbfs(1,1,0);\n\tprintf(\"-1\");\n\treturn 0;\n}\n```",
        "postTime": 1632315367,
        "uid": 126871,
        "name": "yzh_Error404",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2130 \u3010\u72c2\u5954\u7684Wzf\u3011"
    }
]
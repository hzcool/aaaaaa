[
    {
        "content": "#### \u5751\u70b9\u63d0\u9192\n\n1\u3001\u6700\u540e\u9700\u8981\u4f60\u624b\u52a8\u6dfb\u52a0\u4e00\u4e2a$\u201c*\u201d$\n\n2\u3001\u6ce8\u610f\u5728\u5176\u5b9e\u4f4d\u7f6e\u6309\u952e\u7684\u60c5\u51b5\n\n#### \u601d\u8def\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u628a\u6240\u6709\u76f8\u5173\u6d89\u53ca\u5230\u7684\u5b57\u7b26\u90fd\u6620\u5c04\u4e3a\u6570\u5b57\uff0c\u65b9\u4fbf\u5904\u7406\uff0c\u5305\u62ec$(A\u2026Z),(1\u20269),(\"*\"\"-\")$\u8fd9\u4e9b\u4e1c\u4e1c\uff0c\u5904\u7406\u7684\u65f6\u5019\u522b\u6620\u5c04 $0$ \u5c31\u884c\n\n\u5f53\u6211\u4eec\u8f93\u5165\u7684\u65f6\u5019\u76f4\u63a5\u6620\u5c04\u5230\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4 $a$ \u6765\u88c5\u8f7d\u952e\u76d8\u7684\u6bcf\u4e2a\u952e\n\n\u5c06\u76ee\u6807\u4e32\u6620\u5c04\u5230\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4 $b$ \u4e2d\u6765\u9700\u8981\u6309\u5f97\u6bcf\u4e00\u4e2a\u952e\uff0c\u6700\u540e\u522b\u5fd8\u4e86\u624b\u52a8\u6dfb\u52a0\u4e00\u4f4d\u6765\u5b58 $\"*\"$\n\n\u90a3\u4e48\u5982\u4f55\u9009\u62e9\u4f4d\u7f6e\u5462\uff0c\u5982\u679c\u5728\u641c\u7d22\u7684\u8fc7\u7a0b\u4e2d\u66b4\u529b\u7f8e\u5267\u4f1a\u975e\u5e38\u8017\u65f6\u95f4\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u9884\u5904\u7406\u6bcf\u4e00\u4e2a\u952e\u7b2c\u4e00\u4e2a\u5230\u8fbe\u7684\u4f4d\u7f6e\u5373\u53ef\n\n\u4e3a\u4e86\u65b9\u4fbf\u6211\u4eec\u8981\u8bbe\u4e00\u4e2a\u7ed3\u6784\u4f53\u7c7b\u578b\u7684\u4e09\u7ef4\u6570\u7ec4\n\n\u7ed3\u6784\u4f53\u7684\u53d8\u91cf\u5206\u522b\u4e3a \u5230\u8fbe\u7684\u4f4d\u7f6e\u7684\u6a2a\u5750\u6807 $x$ ,\u5230\u8fbe\u4f4d\u7f6e\u7684\u7eb5\u5750\u6807 $y$ ,\u5230\u8fbe\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u65f6\u5019\u8981\u5339\u914d\u76ee\u6807\u4e32\u7684\u54ea\u4e00\u4f4d $step$ ,\u4ee5\u53ca\u5230\u8fd9\u4e2a\u70b9\u5df2\u7ecf\u8d70\u4e86\u51e0\u6b65 $dis$\n\n\u4e09\u7ef4\u6570\u7ec4 $f[k][i][j]$ \u8868\u793a\u4ece $(i,j)$\u5411 $k$ \u65b9\u5411\u8d70\u5230\u8fbe\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u7684\u4fe1\u606f\uff08\u5373\u7ed3\u6784\u4f53\u4e2d\u7684\u5185\u5bb9\uff09\n\n\u90a3\u4e48\u9884\u5904\u7406\u4e4b\u540e\u5c31\u5f00\u59cb\u5e7f\u641c\u4e86\n\n\u5728\u5f00\u59cb\u5e7f\u641c\u4e4b\u524d\uff0c\u56e0\u4e3a\u6211\u4eec\u662f\u4ece\u7b2c\u4e00\u4f4d\u5f00\u59cb\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u6700\u597d\u5148\u9884\u5904\u7406\u4e00\u4e0b\u5728\u7b2c\u4e00\u4f4d\u4e00\u5171\u53ef\u4ee5\u8fde\u7eed\u6309\u51e0\u6b21\uff0c\u7136\u540e\u518d\u628a\u7ed3\u6784\u4f53\u91cd\u6240\u8868\u793a\u7684\u6570\u636e\u5b58\u8fdb\u53bb\uff0c\u5728\u4ee3\u7801\u4e2d\u6709\u5c31\u4e0d\u8be6\u7ec6\u8bf4\u4e86\n\n\u90a3\u4e48\u73b0\u5728\u5f00\u59cb\u5e7f\u641c\n\n\u8003\u8651\u4e24\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u8981\u628a\u9009\u62e9\u548c\u5339\u914d\u5206\u5f00\u627e\n\n\u4e00\u3001\n\n\u90a3\u4e48\u5148\u662f\u5339\u914d\uff0c\u8981\u770b\u4e00\u4e0b\u5806\u9876\u7684\u8fd9\u4e2a\u4f4d\u7f6e\u662f\u5426\u548c\u5f53\u524d\u8981\u5339\u914d\u7684\u4f4d\u7f6e\u76f8\u540c\uff0c\u5982\u679c\u662f\u76f8\u540c\u7684\u65f6\u5019\uff0c\u90a3\u5c31\u5728\u8fdb\u884c\u5224\u65ad\u4e00\u4e0b\u8fd9\u4e2a\u662f\u4e0d\u662f\u6700\u7ec8\u72b6\u6001\uff0c\u5982\u679c\u662f\uff0c\u90a3\u76f4\u63a5\u628a\u7b54\u6848\u8d4b\u503c\u4e3a\u5f53\u524d\u7684\u6b65\u6570+1\u5c31\u662f\u6700\u6709\u7684\u7b54\u6848\n\n\u90a3\u5982\u679c\u4e0d\u662f\u6700\u540e\u7684\u4e00\u4e2a\u60c5\u51b5\u5462\n\n\u53ef\u4ee5\u8bbe\u4e00\u4e2a $vis$ \u6570\u7ec4\uff0c\u7528\u6765\u5b58\u5f53\u524d\u5806\u9876\u7684\u70b9\u63a5\u4e0b\u6765\u8be5\u5339\u914d\u54ea\u4e00\u4f4d\u4e86\uff0c\u7136\u540e\u628a\u76f8\u5e94\u7684\u7ed3\u6784\u4f53\u4e2d\u7684\u6570\u636e\u90fd\u653e\u8fdb\u53bb\u7ee7\u7eed\u67e5\u627e\n\n\u4e8c\u3001\n\n\u6700\u540e\u518d\u5f00\u59cb\u9009\u62e9\n\n\u9996\u5148\u679a\u4e3e\u8be5\u70b9\u56db\u4e2a\u4f4d\u7f6e\u7684\u5230\u8fbe\u70b9\uff0c\u5f53\u7136\u56e0\u4e3a\u6211\u5728\u9884\u5904\u7406\u4f4d\u7f6e\u7684\u65f6\u5019\u6709\u4e00\u4e2a\u4f4d\u7f6e\u5f97\u79fb\u52a8\u5fd8\u52a0\u4e86\uff0c\u6240\u4ee5\u8fd8\u8981\u52a0\u4e0a\uff0c\u4e00\u6b21\u79fb\u52a8\n\n\u9996\u5148\u5224\u65ad\u4e00\u4e0b\u662f\u5426\u8d8a\u754c\n\n\u7136\u540e\u518d\u5224\u65ad\u4e00\u4e0b\u5f53\u524d\u8981\u9009\u62e9\u7684\u5730\u65b9\u8981\u6bd4\u539f\u5750\u6807\u7684\u8981\u5904\u7406\u7684\u4f4d\u7f6e\u8981\u66f4\u5927\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u66f4\u65b0 $vis$ \u6570\u7ec4\u3002\n\n\u5426\u5219\u7684\u8bdd\uff0c\u5c31\u66f4\u65b0\u5f53\u524d\u7684 $vis$ \u6570\u7ec4\u4e3a\u73b0\u5728\u8981\u5904\u7406\u7684\u4f4d\u7f6e\uff08\u4e0d\u7528+1\uff0c\u56e0\u4e3a\u662f\u9009\u62e9\uff0c\u5373\u8df3\u8fc7\u5f53\u524d\u7684\u5339\u914d\u76f4\u63a5\u8df3\u8fdb\uff09\uff0c\u7136\u540e\u628a\u5f53\u524d\u8981\u9009\u62e9\u7684\u4f4d\u7f6e\u7684\u6570\u636e\u653e\u8fdb\u53bb\n\n\u6700\u540e\u76f4\u63a5\u8f93\u51fa\u5373\u53ef\n\n#### \u4ee3\u7801\u5b9e\u73b0\n\n```\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#include<queue>\n#include<stack>\n#include<map>\nusing namespace std;\nconst int N=59;\nconst int M=10009;\nstruct node{\n\tint x;\n\tint y;\n\tint step;//\u6307\u4e0b\u4e00\u4e2a\u5230\u4e86\u7b2c\u51e0\u4e2a\u4f4d\u7f6e\uff0c \n\tint dis;//\u6309\u4e86\u51e0\u6b21 \n}f[5][N][N];//\u540e\u4e24\u4e2a\u8868\u793a\u5750\u6807\uff0c\u524d\u4e00\u4e2a\u8868\u793a\u65b9\u5411\uff0c\u5373i,j\u5728k\u65b9\u5411\u4e0a\u5230\u7684\u6700\u8fd1\u7684\u70b9 \nint dx[4]={0,1,0,-1};\nint dy[4]={1,0,-1,0};\nchar wor[M];\nint n,m,len,a[N][N],b[M],vis[N][N];\nmap<char,int> mp;\nvoid prepare()//\u9884\u5148\u5c06\u6240\u6709\u7684\u5b57\u7b26\u4e32\u5904\u7406\u6210\u6570\u5b57\u7c7b\u578b\u7684\uff0c\u65b9\u4fbf\u5904\u7406\n{\n\tfor(int i=0;i<=9;i++)\n\tmp[(char)('0'+i)]=i+1;\n\tfor(int i=0;i<26;i++)\n\tmp[(char)('A'+i)]=i+11;//1-10\u88ab\u53d6\u8fc7\u4e86 \n\tmp['-']=37;\n\tmp['*']=38; \n} \nvoid get()//\u5904\u7406\u4e00\u4e0b\u56db\u4e2a\u65b9\u5411\u53ef\u4ee5\u5230\u8fbe\u7684\u70b9 \n{\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tfor(int k=0;k<4;k++)\n\t\t\t{\n\t\t\t\tint x=i;\n\t\t\t\tint y=j;\n\t\t\t\twhile(a[x][y]==a[x+dx[k]][y+dy[k]])//\u5982\u679c\u4e00\u81f4\u7684\u8bdd \n\t\t\t\t{\n\t\t\t\t\tx+=dx[k];\n\t\t\t\t\ty+=dy[k];//\u4e00\u81f4\u52a0\u5230\u4e0d\u540c\u4e3a\u6b62 \n\t\t\t\t}\n\t\t\t\tf[k][i][j]=(node){x,y,0,0};\n\t\t\t}\n}\nint search()\n{\n\tmemset(vis,0,sizeof(vis));\n\tqueue<node> q;\n\tint ans=0;\n\tint k=1;\n\twhile(a[1][1]==b[k]&&k<=len) ++k;//\u5728\u8d77\u70b9\u9009\u53d6\u7684\u60c5\u51b5\n\tq.push((node){1,1,k,k-1});\n\tvis[1][1]=k;\n\twhile(!q.empty())\n\t{\n\t\tnode cun=q.front();\n\t\tq.pop();\n\t\tint x=cun.x;\n\t\tint y=cun.y;\n\t\tint now=cun.step; \n\t\tif(a[x][y]==b[now])//\u6b64\u65f6\u76f8\u7b49\u4e86\n\t\t{\n\t\t\tif(now==len) \n\t\t\t{\n\t\t\t\tans=cun.dis+1;\n\t\t\t\tbreak;//\u5982\u679c\u627e\u5b8c\u4e86\uff1f\u76f4\u63a5\u8df3\u51fa \n\t\t\t}\n\t\t\tvis[x][y]=now+1;//\u66f4\u65b0\u4e00\u4e0b\uff0c\u56e0\u4e3a\u6309\u4e86\u4e00\u904d\u952e\u76d8 \n\t\t\tq.push((node){x,y,now+1,cun.dis+1});\n\t\t} \n\t\tfor(int i=0;i<4;i++)\n\t\t{\n\t\t\tnode chose=f[i][x][y];\n\t\t\tchose.x+=dx[i];\n\t\t\tchose.y+=dy[i];//\u9884\u5904\u7406\u4e0a\u5728\u52a0\u4e00\u6b21\uff0c\u4fdd\u8bc1\u5b8c\u6574\n\t\t\tif(chose.x<1||chose.x>n||chose.y<1||chose.y>m) continue;//\u8d8a\u754c\u4e86\n\t\t\tif(vis[chose.x][chose.y]>=now) continue;//\u5982\u679c\u9009\u62e9\u7684\u5730\u65b9\u7684\u8981\u5904\u7406\u7684\u4f4d\u7f6e\u6bd4\u73b0\u5728\u7684\u8981\u5927\uff0c\u4e0d\u7528\u6539\uff0c\u9632\u6b62\u53d8worse \n\t\t\tvis[chose.x][chose.y]=now;//\u5982\u679c\u53ef\u884c\uff0c\u90a3\u4e48\u628a\u63a5\u4e0b\u6765\u8981\u5f04\u5f97\u4f4d\u7f6e\u7ed9\u5b58\u8fdb\u53bb\n\t\t\tq.push((node){chose.x,chose.y,now,cun.dis+1});//\u8df3\u5230\u90a3\u4e00\u6b65 \n\t\t} \n\t} \n\treturn ans;\n}\nint main()\n{\n\tprepare();\n\twhile(scanf(\"%d\",&n)!=EOF)//UVA\u7ecf\u5178\u8f93\u5165\u65b9\u5f0f\n\t{\t\n//\t\tcin>>n;\n\t\tcin>>m;\n\t\tfor(int i=1;i<=n;i++)//\u8f93\u5165\u6bcf\u4e00\u884c\u7684\u5b57\u7b26\u4e32\n\t\t{\n\t\t\tcin>>wor;\t\t\n\t\t\tfor(int j=0;j<m;j++)\n\t\t\t\ta[i][j+1]=mp[wor[j]];//\u5c06\u6bcf\u4e2a\u5b57\u7b26\u7684\u4ee3\u8868\u7684\u6570\u5b57\u6620\u5c04\u5230a\u6570\u7ec4\u4e2d\n\t\t\t\t//\u4ece1\u5f00\u59cb\u65b9\u4fbf \n\t\t} \n\t\tcin>>wor;\n\t\tlen=strlen(wor);\n\t\tfor(int i=0;i<len;i++) b[i+1]=mp[wor[i]];//\u4f9d\u65e7\u662f\u6620\u5c04\uff0c\u4ece1\u5f00\u59cb\n\t\tlen++;\n\t\tb[len]=38;//\u6ce8\u610f\u6700\u540e\u6709\u4e00\u4e2a*\n\t\tget();\n\t\tcout<<search()<<endl; \n\t} \n\treturn 0;\n} \n```\n",
        "postTime": 1609062742,
        "uid": 230804,
        "name": "Durancer",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P6909 \u3010[ICPC2015 WF]Keyboarding\u3011"
    },
    {
        "content": "#### \u3010\u601d\u8def\u5206\u6790\u3011\n\n\u9996\u5148\u7528\u5b57\u7b26\u4e32\u6570\u7ec4\u628a\u952e\u76d8\u548c\u8981\u6253\u7684\u5b57\u6bcd\u8bfb\u5165\uff0c**\u4e00\u5b9a\u8981\u5728\u8981\u6c42\u7684\u5b57\u7b26\u4e32\u6700\u540e\u52a0\u4e2a\u201c$*$\u201d\u3002** ~~\uff08\u611f\u53d7\u4e00\u4e0b\u672c\u849f\u84bb\u7206\u96f6\u7684\u75db\u82e6\uff09~~\n\n\u4e4b\u540e\u4fbf\u5f00\u59cb\u6211\u4eec\u6109\u5feb\u7684\u641c\u7d22\u8fc7\u7a0b\u4e86\uff1a\u5148\u8ba1\u7b97\u51fa\u6240\u8981\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u518d\u5bfb\u627e\u6bcf\u4e00\u4f4d\u4e0a\u4e0e\u7b54\u6848\u5b57\u7b26\u4e32\u76f8\u7b26\u7684\u5b57\u7b26\uff0c\u7edf\u8ba1\u51fa\u5230\u8fbe\u6bcf\u4e2a\u5b57\u7b26\u7684\u6309\u952e\u6b21\u6570\uff0c\u53d6\u641c\u7d22\u6210\u529f\u7684\u6700\u5c0f\u503c\u5373\u4e3a\u7b54\u6848\u3002\n\n\u5230\u4e86\u8fd9\u4e2a\u65f6\u5019\u4fbf\u6709\u95ee\u9898\u4e86\uff0c\u56e0\u4e3a\u952e\u76d8\u5f88\u5927\uff0c\u8981\u6c42\u6211\u4eec\u6253\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u6700\u591a\u670910000\uff0c\u800c\u4e14\u6709\u5f88\u591a\u5bf9\u6211\u4eec\u6ca1\u6709\u7528\u7684\u5b57\u7b26\u5e72\u6270\uff0c\u8fd9\u6837\u679a\u4e3e\u6bcf\u4e00\u4e2a\u80fd\u5230\u5230\u8fbe\u7684\u4f4d\u7f6e\u5fc5\u7136\u4f1a\u5b8c\u7f8e\u7684 $TLE$\u3002\n\n\u8fd9\u5c31\u8981\u6c42\u6211\u4eec\u601d\u8003\u4e86\uff0c\u5982\u4f55\u80fd\u591f\u51cf\u5c11\u65e0\u7528\u7684\u4fe1\u606f\u5462\uff1f\n\n\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u5bf9\u952e\u76d8\u505a\u4e00\u4e2a\u9884\u5904\u7406\uff0c**\u5bfb\u627e\u5728\u8be5\u65b9\u5411\u4e0a\u80fd\u591f\u5230\u8fbe\u7684\u7b2c\u4e00\u4e2a\u4e0d\u540c\u7684\u5b57\u7b26\uff0c\u5982\u679c\u65e0\u89e3\uff08\u8d85\u51fa\u952e\u76d8\u8fd8\u6ca1\u6709\u627e\u5230\uff09\uff0c\u5c31\u628a\u5b83\u9644\u4e00\u4e2a\u5f88\u5927\u7684\u6570\uff0c\u8868\u793a\u627e\u4e0d\u5230\u3002**\n\n\u53ef\u4ee5\u7528\u4e24\u4e2a\u4e09\u7ef4\u6570\u7ec4\u6765\u5b58\u4ece\u5f53\u524d\u5b57\u7b26\u662f\u5426\u80fd\u5230\u5230\u4e0b\u4e2a\u5b57\u7b26\uff1b\n\u5982\u4e0b\u9762\u7684 $disx[k][i][j]$ \u548c $disy[k][i][j]$ \u3002\n\u5176\u4e2d\u7684\u7b2c\u4e00\u7ef4 $[k]$ \u8868\u793a\u5411\u54ea\u4e2a\u65b9\u5411\u79fb\u52a8\uff0c\u7b2c\u4e8c\u7ef4 $[i]$\uff0c\u7b2c\u4e09\u7ef4 $[j]$ \u8868\u793a\u5750\u6807\u3002\n\n#### \u3010Code\u3011\n```cpp\nvoid init()\n{\n\tfor(int i = 1; i <= n; ++i) {//\u679a\u4e3e\u884c\uff1b\n\t\tfor(int j = 1; j <= m; ++j) {//\u679a\u4e3e\u5217\uff1b\n\t\t\tfor(int k = 1; k <= 4; ++k) {//\u679a\u4e3e\u6bcf\u4e2a\u65b9\u5411\uff1b\n\t\t\t\tint sx = i, sy = j;\n\t\t\t\twhile(mp[sx][sy] == mp[i][j]){\n\t\t\t\t//\u5f53\u5bfb\u627e\u5230\u7684\u5b57\u7b26\u548c\u539f\u6765\u7684\u5b57\u7b26\u76f8\u540c\u65f6\uff0c\u5c31\u7ee7\u7eed\u679a\u4e3e\uff1b\n\t\t\t\t\tsx += dx[k];\n\t\t\t\t\tsy += dy[k];\n\t\t\t\t}\n\t\t\t\tif(check(sx,sy)) {\n\t\t\t\t//\u5f85\u4f1a\u5728\u5b8c\u6574\u4ee3\u7801\u91cc\u5c55\u793a\u51fa\uff0c\u5224\u65ad\u662f\u5426\u51fa\u4e86\u8fb9\u754c\uff1b\n\t\t\t\t\tdisx[k][i][j] = sx;\n\t\t\t\t\tdisy[k][i][j] = sy;\n\t\t\t\t//\u5982\u679c\u6ca1\u51fa\u8fb9\u754c\uff0c\u5c31\u9644\u4e0a\u4ece\u8fd9\u4e2a\u5b57\u7b26\u80fd\u5230\u7684\u4e0b\u4e2a\u5b57\u7b26\u7684\u5750\u6807\uff1b\n\t\t\t\t} else {\n\t\t\t\t\tdisx[k][i][j] = INF;\n\t\t\t\t\tdisy[k][i][j] = INF;//\u5426\u5219 \u9644\u4e3a 0x3f3f3f3f\uff1b\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn;\n}\n```\n----\n\n\u4e4b\u540e\u5c31\u5f00\u59cb\u6211\u4eec\u6700\u7ec8\u7684\u641c\u7d22\u4e86\uff0c\u56e0\u4e3a\u524d\u9762\u7684\u9884\u5904\u7406\uff0c\u4f7f\u5f97\u51cf\u5c11\u4e86\u5f88\u591a\u5197\u6742\u7684\u4fe1\u606f\u3002\n\n\u8fd9\u4e2a\u65f6\u5019\u518d\u8bbe\u7f6e\u4e00\u4e2a\u4e09\u7ef4\u6570\u7ec4\u8868\u793a\u5230 $(x,y)$ \u7684\u5df2\u6709\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u7684\u6309\u952e\u6b21\u6570\uff0c\u5f00\u59cb\u5148\u8bbe\u7f6e\u4e3a $0x3f3f3f3f $\u3002\u8bbe\u7f6e\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u8868\u793a\u5230\u73b0\u5728\u7684\u5750\u6807 $(x,y)$ \u7684\u6309\u952e\u6b21\u6570\u548c\u5b57\u7b26\u4e32\u957f\u5ea6\uff1b\n\n\u5982\u679c**\u65b0\u627e\u5230\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u7684\u6309\u952e\u6b21\u6570**\u6bd4**\u539f\u6709\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u7684\u6309\u952e\u6b21\u6570**\u5c11\uff0c\u5c31\u66f4\u65b0\u6309\u952e\u6b21\u6570\uff0c\u4f7f\u5f97\u518d\u6392\u9664\u4e00\u4e9b\u5197\u6742\u4fe1\u606f\u3002~~\uff08\u8c8c\u4f3c\u6709\u70b9\u7ed5\u53e3\uff1f\uff09~~\uff0c\u4e0d\u8fc7\u6211\u76f8\u4fe1\u4f60\u4eec\u80fd\u770b\u61c2QAQ\u3002\n\n**\u6613\u9519\u70b9**\n\n+ \u5728\u961f\u5217\u641c\u7d22\u4e2d \u8981\u8bbe\u5b9a\u4e24\u4e2a\u503c $now$ \u548c $cur$ \uff0c\u56e0\u4e3a\u5728\u6bcf\u6b21\u653e\u5165\u65b0\u503c\u65f6\u90fd\u4f1a\u628a $now$ \u7ed9\u66ff\u6362\u4e3a\u522b\u7684\u503c\u3002\u6211\u7b2c\u4e00\u6b21\u5c31\u662f\u56e0\u4e3a\u8fd9\u79cd\u60c5\u51b5\u5bfc\u81f4\u4e00\u76f4\u8c03\u4e0d\u51fa\u6765\u3002\n\n-----\n\u63a5\u4e0b\u6765\u5c31\u4e0a\u4ee3\u7801\u4e86\uff0c\u4e00\u4e9b\u89e3\u91ca\u6211\u4f1a\u5199\u5728\u4ee3\u7801\u91cc\u3002\n\n#### \u3010Code\u3011\n```cpp\n#include<cstdio>\n#include<cmath>\n#include<iostream>\n#include<cstring>\n#include<queue>\n#include<algorithm>\n#include<stdlib.h>\n#include<time.h>\n#include<map>\n#include<vector>\n#include<set>\n#define ull unsigned long long\n#define ll long long\n#define M 1000010\n#define N 1010\n#define qaq cout<<\"\u53ef\u884cQAQ\"<<endl\n#define INF 0x3f3f3f3f\nusing namespace std;\nconst int mod1 = 19260817;\nconst int mod2 = 19660813;\n/*================================================*/\n\nint n,m,len;\nchar mp[55][55];//\u952e\u76d8\nchar yuan[10010];//\u8981\u6c42\u7684\u5b57\u7b26\u4e32\nint dx[5] = {0, 1, -1, 0, 0};\nint dy[5] = {0, 0, 0, 1, -1};//\u65b9\u5411\nint disx[5][55][55],disy[5][55][55];//\u80fd\u5230\u8fbe\u7684\u4f4d\u7f6e\u7684\u5750\u6807\nstruct node {\n\tint x , y , cnt , len ;\n} now , cur ;//\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u4e3a \uff1a \u6a2a\u5750\u6807\uff0c\u7eb5\u5750\u6807\uff0c\u6309\u952e\u6b21\u6570\uff0c\u5b57\u7b26\u4e32\u957f\u5ea6\nint length[10010][55][55];//\u50a8\u5b58\u6309\u952e\u6b21\u6570\nqueue<node> qp;\n\n/*================================================*/\n\nbool check(int x,int y) //\u5224\u65ad\u662f\u5426\u51fa\u8fb9\u754c\n{\n\tif(x < 1 || x > n) return false;\n\tif(y < 1 || y > m) return false;\n\treturn true;\n}\n\nvoid init()\n{\n\tfor(int i = 1; i <= n; ++i) {//\u679a\u4e3e\u884c\uff1b\n\t\tfor(int j = 1; j <= m; ++j) {//\u679a\u4e3e\u5217\uff1b\n\t\t\tfor(int k = 1; k <= 4; ++k) {//\u679a\u4e3e\u6bcf\u4e2a\u65b9\u5411\uff1b\n\t\t\t\tint sx = i, sy = j;\n\t\t\t\twhile(mp[sx][sy] == mp[i][j]){\n\t\t\t\t//\u5f53\u5bfb\u627e\u5230\u7684\u5b57\u7b26\u548c\u539f\u6765\u7684\u5b57\u7b26\u76f8\u540c\u65f6\uff0c\u5c31\u7ee7\u7eed\u679a\u4e3e\uff1b\n\t\t\t\t\tsx += dx[k];\n\t\t\t\t\tsy += dy[k];\n\t\t\t\t}\n\t\t\t\tif(check(sx,sy)) {\n\t\t\t\t\tdisx[k][i][j] = sx;\n\t\t\t\t\tdisy[k][i][j] = sy;\n\t\t\t\t//\u5982\u679c\u6ca1\u51fa\u8fb9\u754c\uff0c\u5c31\u9644\u4e0a\u4ece\u8fd9\u4e2a\u5b57\u7b26\u80fd\u5230\u7684\u4e0b\u4e2a\u5b57\u7b26\u7684\u5750\u6807\uff1b\n\t\t\t\t} else {\n\t\t\t\t\tdisx[k][i][j] = INF;\n\t\t\t\t\tdisy[k][i][j] = INF;//\u5426\u5219 \u9644\u4e3a 0x3f3f3f3f\uff1b\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn;\n}\n\nint bfs() \n{\n\t\n\tmemset(length,INF,sizeof(length));\n\tnow.x = 1; now.y = 1; now.len = 0; now.cnt = 0;\n\t//\u521d\u59cb\u5316\u4e00\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u6309\u952e\u6b21\u6570\uff0c\u627e\u5230\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u3002\n\tlength[0][now.x][now.y] = 0;//\u5f53\u627e\u5230\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u4e3a 0 \u662f\u6309\u952e\u6b21\u6570\u4e3a 0\n\tqp.push((node){ now.x, now.y, now.cnt, now.len});//\u538b\u5165\u961f\u5217\n\twhile(qp.size()) {\n\t\tcur = qp.front();//cur \u662f \u5149\u6807\u7684\u610f\u601d\n\t\tqp.pop();\n\t\twhile(yuan[cur.len + 1] == mp[cur.x][cur.y]) {//\u5bfb\u627e\u5339\u914d\u7684\u5b57\u7b26\n\t\t\tcur.len++;\n\t\t\tcur.cnt++;\n\t\t}\n\t\tif(cur.len == len) return cur.cnt;\n\t\t//\u9000\u51fa\u6761\u4ef6 \uff1a\u628a\u8981\u6c42\u7684\u5b57\u7b26\u4e32\u6253\u5b8c\u4e86\n\t\tfor(int i=1;i<=4;i++) {//\u5411 4 \u4e2a\u65b9\u5411\u679a\u4e3e\n\t\t\tnow.x = cur.x; now.y = cur.y;\n\t\t\tnow.len = cur.len; now.cnt = cur.cnt;\n\t\t\t//\u56e0\u4e3a \u4e0b\u9762 now.x \u548c now.y \u88ab\u9644\u4e3a\u4e86\u65b0\u503c\u3002\n\t\t\t//\u6240\u4ee5\u8fd9\u91cc\u6bcf\u4e00\u904d\u90fd\u8981\u628a now = cur.\n\t\t\tif(disx[i][now.x][now.y] != INF ||\n\t\t\t    disy[i][now.x][now.y] != INF) {//\u5982\u679c\u6709\u53ef\u5230\u8fbe\u7684\u5b57\u7b26\n\t\t\t\tnow.x = disx[i][cur.x][cur.y];\n\t\t\t\tnow.y = disy[i][cur.x][cur.y];\n\t\t\t\tnow.len = cur.len;\n\t\t\t\tnow.cnt = cur.cnt + 1;//\u8d4b\u503c\n\t\t\t\tif(now.cnt < length[now.len][now.x][now.y]) {//\u5982\u679c\u5c0f\u4e8e\n\t\t\t\t\tlength[now.len][now.x][now.y] = now.cnt;\n\t\t\t\t\t//\u66f4\u65b0\u5230\u73b0\u5728\u957f\u5ea6\u7684\u6700\u5c0f\u503c\u3002\n\t\t\t\t\tqp.push((node){now.x , now.y , now.cnt , now.len});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/*=================================================*/\n\nsigned main()\n{\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i = 1 ;i <= n; ++i){\n\t\tscanf(\"%s\",mp[i] + 1);\n\t}\n\tscanf(\"%s\",yuan + 1);//\u8bfb\u5165\n\tyuan[strlen(yuan + 1)+ 1] = '*';//\u6700\u540e\u4e00\u5b9a\u8981\u52a0 * \uff1b \uff01\uff01\uff01\uff01\n\tlen = strlen(yuan + 1);//\u8ba1\u7b97\u8981\u6c42\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\n\tinit();\n\tint ans = bfs();\n\tprintf(\"%d\",ans);//\u8f93\u51fa\n\treturn 0;\n}\n```\n-----",
        "postTime": 1609297062,
        "uid": 381904,
        "name": "\u659c\u63fd\u6b8b\u7bab",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6909 \u3010[ICPC2015 WF]Keyboarding\u3011"
    },
    {
        "content": "### \u4e0d\u8bf4\u5e9f\u8bdd\uff0c\u5f00\u95e8\u89c1\u5c71\uff0c\u4e0a\u601d\u8def\uff1a\n\n\n\u5c06\u6240\u67e5\u8be2\u5230\u7684\u6bcf\u4e2a\u70b9\u90fd\u5224\u5b9a\u4e00\u6b21\u72b6\u6001(\u662f\u5426\u7b26\u5408\u5f53\u524d\u6240\u5bfb\u627e\u7684\u5b57\u7b26\uff09\uff0c\u7b26\u5408\u4fbf\u76f4\u63a5\u52a0\u5165\u961f\u5217\uff1b\u800c\u82e5\u4e0d\u7b26\uff0c\u5219\u8003\u8651\u5411\u56db\u5468\u79fb\u52a8\uff0c\u7528\u4e24\u4e2a\u6570\u636e(\u79fb\u52a8\u6b21\u6570\uff0c\u5df2\u9009\u7684\u5b57\u7b26\u6570)\u8bb0\u5f55\u72b6\u6001\u540e\u518d\u52a0\u961f\u5217\u5373\u53ef\u3002\n\n----------------------------\n\u66f4\u8be6\u7ec6\u89e3\u91ca\u5148\u770b\u4ffa\u7684\u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\u6492\u3002\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nmap <char,int> Map;//\u7528map\u8f6c\u6362\u5b57\u7b26\u7684\u5b58\u50a8\uff0c\u4fbf\u4e8e\u8ba1\u7b97\nint n,m,ans,mp[57][57],xx[4]={0,1,0,-1},yy[4]={1,0,-1,0},nex[57][57][4][2],lst[10007],vis[57][57],len;\nvoid premap()//\u9884\u5904\u7406Map\n{\n    for(int i=1;i<=10;i++) Map[(char)('0'+i-1)]=i;//\u6570\u5b57\u5bf9\u5e94\n    for(int i=0;i<=25;i++) Map[(char)('A'+i)]=i+11;//\u5927\u5199\u5b57\u6bcd\u5bf9\u5e94\n    Map['-']=37; Map['*']=38;//\u7279\u6b8a\u5b57\u7b26\n}\nvoid prenex()//\u6b64\u5904\u9884\u5904\u7406next\u6570\u7ec4\uff08next[i][j][k][0,1]\u8868\u793a\u4ece(i,j)\u70b9\u51fa\u53d1\u5411k\u65b9\u5411\uff08\u5f62\u8c61\u5316\uff09\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\uff0c\u7528\u7b2c\u56db\u4e2a\u4e0b\u6807\u5b58\u50a8\u5230\u8fbe\u4f4d\u7f6e(0:x\u5750\u6807\uff0c1:y\u5750\u6807)\uff09\n{\n   for(int i=1;i<=n;i++)\n   for(int j=1;j<=m;j++)\n   for(int k=0;k<4;k++)\n   {\n\t    int x=i+xx[k],y=j+yy[k];\n\t    while(mp[i][j]==mp[x][y]) x+=xx[k],y+=yy[k];//\u5bfb\u627e\u5728\u8be5\u65b9\u5411\u4e0b\u53ef\u79fb\u52a8\u5230\u7684\u6700\u8fdc\u8ddd\u79bb\n\t    nex[i][j][k][0]=x; nex[i][j][k][1]=y;//\u79fb\u52a8\n   }\n}\nstruct node\n{\n\tint x,y,stp,dis;\n   //stp\u4e3a\u5f53\u524d\u6240\u67e5\u8be2\u5230\u7684\u4e2a\u6570\uff0cdis\u4e3a\u5149\u6807\u79fb\u52a8\u7684\u6b21\u6570\uff0cx,y\u5373\u4e3a\u5f53\u524d\u5750\u6807\n};\nvoid bfs()//\u4e3b\u4f53\n{\n    queue <node> q;\n    q.push((node){1,1,0,0});//\u6700\u5f00\u59cb\u7684\u72b6\u6001\n    while(!q.empty())\n    {\n        node u=q.front();\n\tq.pop();\n        if(mp[u.x][u.y]==lst[u.stp])//\u5982\u679c\u8fd9\u4e2a\u5b57\u7b26\u662f\u4f60\u76ee\u524d\u60f3\u8981\u7684\u5b57\u7b26\u3002\n        {\n            if(u.stp==len)//\u5224\u5b9a\u7a0b\u5e8f\u662f\u5426\u7ed3\u675f\u3002\n            {\n                ans=u.dis+1;\n                return;\n            }\n            u.stp++; u.dis++;//\u5339\u914d\n            vis[u.x][u.y]=u.stp;//\u66f4\u65b0\n            q.push(u);\n        }\n        else//\u4e0d\u5339\u914d\uff0c\u5411\u540e\u5bfb\u627e\u3002\n        {\n            for(int k=0;k<4;k++)//\u5f00\u59cb\u5411\u56db\u4e2a\u65b9\u5411\u5bfb\u627e\u3002\n            {\n                int x=nex[u.x][u.y][k][0],y=nex[u.x][u.y][k][1];\n                if(x<1||x>n||y<1||y>m)continue;//\u8d8a\u754c\u5224\u5b9a\n                if(vis[x][y]>=u.stp)continue;//\u627e\u5230\u7684\u70b9\u5df2\u7ecf\u6bd4\u5f53\u524d\u72b6\u6001\u66f4\u4f18\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff0c\u8fdb\u884c\u4f18\u5316\u3002\n                vis[x][y]=u.stp;\n                q.push((node){x,y,u.stp,u.dis+1});\n            }\n        }\n    }\n}\nchar ch[10007];\nvoid data_init()//\u521d\u59cb\u5316\n{\n\tmemset(nex,0,sizeof(nex));\n   memset(mp,0,sizeof(mp));\n   memset(lst,0,sizeof(lst));\n   memset(vis,-1,sizeof(vis));\n   ans=0;\n}\nint main()\n{\n    premap();\n    while(scanf(\"%d\",&n)!=EOF)\n    {\n    \tdata_init();\n        scanf(\"%d\",&m);\n        for(int i=1;i<=n;i++)\n        {\n            scanf(\"%s\",ch);\n            for(int j=0;j<m;j++)\n            mp[i][j+1]=Map[ch[j]];//\u6570\u636e\u5904\u7406\n        }\n        scanf(\"%s\",ch); len=strlen(ch);\n        for(int i=0;i<len;i++) lst[i]=Map[ch[i]];//\u8f6c\u6362\n        lst[len]=38;//\u6ce8\u610f\uff0c\u6b64\u5904\u4e00\u5b9a\u8981\u52a0\u4e0a\u7ed3\u5c3e\u7684\u6362\u884c\u7b26\u3002\n        prenex();\n        bfs();\n        cout<<ans<<\"\\n\";\n    }\n    return 0;\n}\n```\n",
        "postTime": 1621672944,
        "uid": 363272,
        "name": "FLAMEs_",
        "ccfLevel": 5,
        "title": "P6909 [ICPC2015 WF]Keyboarding \u9898\u89e3"
    },
    {
        "content": "## $$Keyboarding\u9898\u89e3$$\n\n### \u3010\u5f15\u8a00\u3011\uff1a\n\n\u66f4\u65b0\u4e86\u4e00\u4e0b\u56fe\u7247\u5931\u6548\u7684\u95ee\u9898\n\n---\n### \u3010\u9898\u610f\u3011 \uff1a\n\u5176\u5b9e\u9898\u610f\u5df2\u7ecf\u5f88\u6e05\u695a\u4e86\uff0c\u4f46\u662f\u8fd8\u662f\u89c9\u5f97\u5728\u53d9\u8ff0\u4e00\u4e0b\u3002\u9996\u5148\u6309\u952e\u6b21\u6570\u548c\u9009\u62e9\u6b21\u6570\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6211\u4e00\u5f00\u59cb\u5c31\u6df7\u4e86\uff0c\u533a\u522b\u63d0\u9192\u4e00\u4e0b\u3002\u8fd8\u6709\u5c31\u662f\u4e0d\u8981\u5fd8\u8bb0\u7ed3\u5c3e\u5904\u6709\u4e00\u4e2a\u6362\u884c\u7b26\u3002\n\n---\n### \u3010\u601d\u8def\u5206\u6790\u3011\uff1a\n**\u4ee3\u7801\u5c31\u6700\u540e\u9644\u4e0a\u5427\uff0c\u91cc\u9762\u4e5f\u6709\u70b9\u6ce8\u91ca\uff0c\u53ef\u4ee5\u5e2e\u52a9\u7406\u89e3**\n\u770b\u5230\u8fd9\u4e2a\u9898\uff0c\u9996\u5148\u770b\u5230\u6570\u636e\u8303\u56f4 $n ,m \\leq 50,$,\u633a\u663e\u7136\u5f97\uff0c\u8981\u4e48$DP$\uff0c\u8981\u4e48\u662f\u641c\u7d22\uff0c\u4f46\u662f\u4ed4\u7ec6\u770b\u4e00\u4e0b\u8fd9\u9053\u9898\uff0c\u548c\u6df1\u641c\u548c\u5bbd\u641c\u7684\u7ec3\u4e60\u9898\u597d\u50cf\u5440\uff0c\u90fd\u662f\u4ec0\u4e48\u5411\u4e0a\u79fb\u52a8\u5440\uff0c\u5411\u4e0b\u79fb\u52a8\u4e4b\u7c7b\u7684\u3002\u6211\u4eec\u786e\u5b9a\u662f\u641c\u7d22\u3002\u90a3\u6211\u4eec\u7528\u641c\u7d22\u53bb\u505a\u5c31$OK$\u4e86\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u601d\u8003\u4e00\u4e0b\u5176\u601d\u8def\u3002~~force \u5e9f\u8bdd~~\u3002\u90a3\u4e48\u5c31\u8003\u8651\u4e00\u4e0b\u66b4\u529b\u600e\u4e48\u5199\uff0c\u6211\u4eec\u8fdb\u884c\u641c\u7d22\u7684\u65f6\u5019\uff0c\u5f80\u5f80\u5c31\u9677\u5165\u8fd9\u79cd\u6c89\u601d\u4e4b\u4e2d\uff0c\u5148\u8003\u8651\u4e00\u4e0b\u641c\u4ec0\u4e48\uff0c\u6211\u7684\u505a\u6cd5\u662f\u53bb\u641c\u70b9\uff0c\u641c\u7d22\u6bcf\u4e00\u4e2a\u80fd\u5230\u8fbe\u7684\u70b9\u3002\u5e76\u4e14\u7528$opt$\u6765\u8bb0\u5f55\u4e00\u4e0b\u73b0\u5728\u9009\u62e9\u4e86\u51e0\u4e2a\u6570\u4e86\uff0c\u6216\u8005\u8bf4\uff0c\u5339\u914d\u4e86\u51e0\u4e2a\u6570\u4e86\u3002\n\n\u90a3\u4e48\u641c\u7d22\u7684\u7ec8\u6b62\u6761\u4ef6\u4e5f\u5c31\u662f $if(opt + 1 == len )$ ,\u90a3\u4e48\u8fd9\u65f6\u5019\u6211\u4eec\u53ea\u9700\u8981\u5728\u9009\u62e9\u6309\u4e0b\u952e\u4f4d\u5373\u53ef\uff0c\u603b\u5171\u4e5f\u5c31\u662f$step+1$\uff08step\u4e3a\u5230\u8fbe\u5f53\u524d\u8be5\u70b9\u7684\u6309\u952e\u6b21\u6570\uff09 ;\n\n\u5982\u679c\u6ca1\u5230\uff0c \u90a3\u4e48\u600e\u4e48\u53bb\u641c\u7d22\uff0c \u6211\u4eec\u7ee7\u7eed\u5411\u4e0b\u641c\u7d22\uff0c\u5047\u8bbe\u5f53\u524d\u7684\u8282\u70b9\u4e3a$now$, \n\u90a3\u4e48\u51fa\u73b0\u4e24\u79cd\u60c5\u51b5\n 1.\u8fd9\u4e00\u4e2a\u70b9\u7684\u5b57\u7b26\u548c\u4e0b\u4e00\u4e2a\u6211\u4eec\u8981\u6253\u7684\u4e00\u81f4\uff0c\n 2.\u8fd9\u4e00\u4e2a\u70b9\u7684\u5b57\u7b26\u548c\u4e0b\u4e00\u4e2a\u6211\u4eec\u8981\u6253\u7684\u4e0d\u4e00\u81f4\n\n--- \n \u8003\u8651\u4e00\u81f4\u7684\u65f6\u5019\uff1a\n  \u9996\u5148\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u65f6\u5019\u7279\u522b\u7b80\u5355\uff0c\u6211\u4eec\u9700\u8981\u6309\u4e0b\u8fd9\u4e2a\u952e\u4f4d\uff0c\u8fd9\u4e00\u70b9\u6a2a\u7eb5\u5750\u6807\u4e5f\u4e0d\u9700\u8981\u6539\uff0c\u6539\u7684\u662f$opt\u548cstep$,\u4e5f\u5c31\u662f\u6309\u952e\u6b21\u6570\u548c\u9009\u62e9\u7684\u5747\u52a0\u4e0a\u4e00\uff0c\u538b\u5165\u961f\u5217\u5373\u53ef\u3002$so\\ \\ easy$\u5427\n  \n  \u8003\u8651\u4e0d\u4e00\u81f4\u7684\u65f6\u5019\uff1a\n  \u8fd9\u65f6\u6211\u4eec\u53d1\u73b0 \uff0c\u5982\u679c\u4e0d\u4e00\u81f4\uff0c\u90a3\u4e48\u6211\u4eec\u65e0\u4ece\u4e0b\u624b\uff0c\u56e0\u4e3a\u6211\u4eec\u4e0d\u77e5\u9053\u6211\u4eec\u4e0b\u4e00\u6b65\u5f80\u54ea\u91cc\u8d70\uff0c\u4e0d\u8981\u6025\uff0c\u4e0b\u9762\u518d\u8bf4\uff0c\u6211\u4eec\u5c31\u5047\u8bbe\u6211\u4eec\u4e0b\u4e00\u4e2a\u4e3a$next$\u597d\u5427\uff0c\u6211\u4eec\u8981\u770b\u4e00\u4e0b\u8fd9\u4e00\u4e2a\u70b9\u7684\u9009\u62e9\u548c\u6211\u4eec$now$\u8fd9\u4e2a\u70b9\u7684\u9009\u62e9\u6b21\u6570\uff0c\u7531\u4e8e\u8fd9\u4e2a\u662f\u4ece\u6211\u4eec\u8fd9\u4e2a$now$\u8e66\u8df6\u8fc7\u53bb\u7684\uff0c\u6240\u4ee5\u9009\u62e9\u6b21\u6570\u4e3a$now$\u51b3\u5b9a\uff0c$so$,\u6211\u4eec\u4e5f\u5c31\u662f\u53ef\u4ee5\u548c\u4e0a\u9762\u4e00\u6837\u4e86\uff0c\u538b\u5165\u961f\u5217\u5373\u53ef\u3002\n  \n---\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u6211\u4eec\u7684\u79fb\u52a8\u4e86\n\u770b\u4e00\u4e0b\u8fd9\u4e2a\u56fe\uff1a\u65e0\u56fe\u65e0\u7075\u9b42\n![](https://cdn.luogu.com.cn/upload/image_hosting/59csnoh4.png)\n\n\n1.**\u5411\u4e0b\u8d70**\n\u6211\u4eec\u770b\u4e00\u4e0b\u5f53\u5b83\u5411\u4e0b\u8d70\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u8fdb\u884c\u679a\u4e3e\n\u6211\u4eec\u53d1\u73b0\u4e86$* \\ \\ * $\u8fd9\u4e24\u4e2a\uff0c\u90a3\u4e48\u6211\u4eec\u5411\u4e0b\u7684\u79fb\u52a8\u7684\u4f4d\u7f6e\u4e5f\u5c31\u662f $now.x , now.y + 1$\u4e86\uff0c\u90a3\u5982\u679c\u6211\u4eec\u9ec4\u7684\u4e5f\u662f$ * $\u5462\uff0c \u90a3\u4e48\u6211\u4eec\u7ee7\u7eed\u5411\u4e0b\u8d70\uff0c\u6211\u4eec\u53d1\u73b0\u65e0\u8bba\u8d70\u5230\u54ea\u91cc\uff0c\u90fd\u662f$ * $,\u90a3\u4e48\u6211\u4eec\u8fd8\u8d70\u4ed6\u5e72\u5565\uff1f\uff0c\u6211\u4eec\u80af\u5b9a\u4e0d\u4f1a\u9009\u62e9\u5440\uff0c$so$,\u6211\u4eec\u9009\u53d6\u5728\u90a3\u4e00\u4e2a\u65b9\u5411\u4e0a\u7b2c\u4e00\u4e2a\u4e0d\u4e00\u6837\u7684\u4f5c\u4e3a\u8be5\u70b9\u7684\u4e0b\u4e00\u4e2a\u79fb\u52a8\u4f4d\u7f6e\u5c31\u597d\u4e86\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5bf9\u4e8e\u4e0b\u754c\u7684\u679a\u4e3e\u5c31\u662f \n  ```\n  for(int i = now.y ; i <= \u603b\u884c\u6570 \uff1b \u4e00\u884c\u4e00\u884c\u679a\u4e3e) \n  {\n  if(\u53d1\u73b0\u4e0d\u4e00\u6837\u7684)\uff0c\u8bb0\u5f55\u5e76\u4e14\u9000\u51fa \u3002\u5fc5\u987b\u9000\u51fa\n  }\n  ```\n\u5176\u4ed6\u7684\u4e5f\u4e00\u6837\uff0c\u5c31\u4e0d\u8bf4\u4e86\uff0c\u5c31\u53ea\u8bf4\u4e00\u4e0b\u754c\u9650\u5427\uff1b\n2.**\u5411\u4e0a\u8d70**\n($ i = now.y \\ \\ ;\\ \\ i \u2265 1 ; i--  $)\n\n3.**\u60f3\u5de6\u8d70**\n($ i = now.x \\ \\ ;\\ \\ i \u2265 1 ; i--  $)\n\n4. **\u5411\u53f3\u8d70**\n($ i = now.x \\ \\ ;\\ \\ i \\leq \u603b\u5217\u6570; i++  $)\n\n---\n\n\u601d\u8def\u5230\u6b64\u5c31\u7ed3\u675f\u4e86\uff0c\u9644\u4ee3\u7801\u5427\uff01\n\n### \u3010code\u3011:\n```\n/*\n by : Zmonarch\n \u601d\u8def\uff1a 1.\u591a\u5199\u51e0\u4e2a\u51fd\u6570\uff0c\u5934\u8111\u6e05\u6670\n \t\t2. \u66b4\u529b\u641c\u7d22\uff0c\u5c31\u662f\u9ebb\u70e6\u4e00\u70b9\uff08\u4ebf\u70b9\uff0c\u6211\u5c31\u662f\u83dc\uff0c\uff09 \n \u77e5\u8bc6\u70b9 : force  \n*/\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#include <queue>\n#include <stack>\n#include <map> \n#define int long long\n#define QwQ printf(\"\u8fd0\u884c\u8fc7\u4e86\\n\") ;\n#define inf 0x3f \nusing namespace std;\nconst int maxn = 600 ;\ninline int read()\n{\n\tint x = 0 , f = 1 ; char ch = getchar() ;\n\twhile(!isdigit(ch)){ if(ch == '-') f = - 1 ; ch = getchar() ; }\n\twhile( isdigit(ch)){ x = x * 10 + ch - '0' ; ch = getchar() ; }\n\treturn x * f ;\n} \nint r , c ;\nchar str[maxn][maxn] , s[10000 + 5] ;\nint G[maxn][maxn] , vis[maxn][maxn] ;\nstruct Point\n{\n\tint x , y , opt , step; //\u6a2a\u5750\u6807\uff0c\u7eb5\u5750\u6807,\u9009\u62e9\u6b21\u6570\u548c\u6309\u952e\u6b21\u6570\n} ;\nstruct Next //\u5b9a\u4e49\u4e0b\u4e00\u6b65\u7684\u5750\u6807\uff0c\u4e5f\u5c31\u662f\u770b\u5411\u4e0a\u4e0b\u5de6\u53f3\u884c\u4e0d\u884c\uff0c\u884c\u7684\u4e0b\u4e00\u4e2a\u5750\u6807\n{\n\tint x , y;\n} ;\nNext nxt[maxn][maxn][6] ;//\u4e0b\u4e00\u6b65\u7684\u5750\u6807 \nqueue<Point> q ;\nint len = 1 ;\nvoid move() //\u5224\u65ad\u79fb\u52a8\u662f\u5426\u53ef\u884c\n{\n\t//\u6bcf\u4e00\u4e2a\u70b9\u90fd\u8fdb\u884c\u5224\u65ad \n\tfor(int i = 1 ; i <= r ; i++)\n\t{\n\t\tfor(int j = 1 ; j <= c ; j++)\n\t\t{\n\t\t\t//\u5224\u65ad\u5411\u5de6 \n\t\t\tfor(int jk = j - 1 ; jk >= 1 ; jk--)\n\t\t\t{\n\t\t\t\tif(str[i][j] != str[i][jk])\n\t\t\t\t{\n\t\t\t\t\tnxt[i][j][0] = (Next){ i , jk } ;\n\t\t\t\t\tbreak ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//\u5224\u65ad\u5411\u53f3 \n\t\t\tfor(int jk = j + 1 ; jk <= c ; jk++) \n\t\t\t{\n\t\t\t\tif(str[i][j] != str[i][jk])\n\t\t\t\t{\n\t\t\t\t\tnxt[i][j][1] = (Next){i , jk} ;\n\t\t\t\t\tbreak ;\n\t\t\t\t}\n\t\t\t}\n\t\t\t//\u5224\u65ad\u5411\u4e0a \n\t\t\tfor(int jk = i - 1 ; jk >= 1 ; jk--)\n\t\t\t{\n\t\t\t\tif(str[i][j] != str[jk][j])\n\t\t\t\t{\n\t\t\t\t\tnxt[i][j][2] = (Next){jk , j} ;\n\t\t\t\t\tbreak ;\n\t\t\t\t}\n\t\t\t} \n\t\t\t//\u5224\u65ad\u5411\u4e0b \n\t\t\tfor(int jk = i + 1 ; jk <= r ; jk++)\n\t\t\t{\n\t\t\t\tif(str[i][j] != str[jk][j])\n\t\t\t\t{\n\t\t\t\t\tnxt[i][j][3] = (Next){jk , j} ;\n\t\t\t\t\tbreak ;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\t\n}\nvoid prepare()\n{\n\tr = read() , c = read() ;\n\tlen = 1 ;\n\tfor(int i = 1 ; i <= r ; i++)\n\t{\n\t\tscanf(\"%s\" , str[i] + 1) ;\n\t}\n\tscanf(\"%s\" , s + 1) ;\n\twhile(s[len]) len ++ ;\n \ts[len] = '*' ;//\u8981\u5728\u7ed3\u5c3e\u5904\u6dfb\u52a0\u4e00\u4e2a\u6362\u884c\u7b26\n\tmove() ; \n\t\n} \nvoid search()\n{\n\tmemset(vis , -1 , sizeof(vis)) ;\n\tqueue<Point> q ;\n\tq.push((Point){1 , 1 , 0 , 0}) ;\n\twhile(!q.empty())\n\t{\n\t\tPoint now = q.front() ;\n\t\tq.pop();\n\t\tint x = now.x , y = now.y ;\n\t\tint opt = now.opt , step = now.step ;\n\t\tif(str[x][y] == s[opt + 1]) \n\t\t{\n\t\t\tq.push((Point){x , y , opt + 1 , step + 1}) ;\n\t\t\tif(opt + 1 ==  len)\n\t\t\t{\n\t\t\t\tprintf(\"%d\\n\" , step + 1 );\n\t\t\t\treturn ;\n\t\t\t}\n\t\t}\n\t\telse \n\t\t{\n\t\t\tfor(int i = 0 ; i <4 ; i++) //\u679a\u4e3e\u4e00\u4e0b\u56db\u4e2a\u53ef\u4ee5\u8d70\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e \n\t\t\t{\n\t\t\t\tint dx = nxt[x][y][i].x , dy = nxt[x][y][i].y;\n\t\t\t\tif(dx == 0) continue ;\n\t\t\t\tif(dy == 0) continue ; \n\t\t\t\tif(vis[dx][dy] < opt)\n\t\t\t\t{\n\t\t\t\t\tvis[dx][dy] = opt ;\n\t\t\t\t\tq.push((Point){dx , dy ,opt , step + 1}) ;//\u8fd9\u4e2a\u4e0d\u9009\u62e9 \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nsigned main()\n{\n\tprepare() ; //\u9884\u5904\u7406\u51fa\u80fd\u591f\u8d70\u4f4d\u7f6e\n\tsearch() ;\n\treturn 0 ;\n} \n```",
        "postTime": 1610017972,
        "uid": 174683,
        "name": "\u7ea2\u5c18\u4ed9",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6909 \u3010[ICPC2015 WF]Keyboarding\u3011"
    },
    {
        "content": "## \u3010\u9898\u610f\u3011\n\u7ed9\u5b9a\u4e00\u4e2a$r$\u884c$c$\u5217\u7684\u5728\u7535\u89c6\u4e0a\u7684\u300c\u865a\u62df\u952e\u76d8\u300d\uff0c\u901a\u8fc7\u300c\u4e0a\uff0c\u4e0b\uff0c\u5de6\uff0c\u53f3\uff0c\u9009\u62e9\u300d\u5171$5$\u4e2a\u63a7\u5236\u952e\uff0c\u4f60\u53ef\u4ee5\u79fb\u52a8\u7535\u89c6\u5c4f\u5e55\u4e0a\u7684\u5149\u6807\u6765\u6253\u5370\u6587\u672c\u3002\u4e00\u5f00\u59cb\uff0c\u5149\u6807\u5728\u952e\u76d8\u7684\u5de6\u4e0a\u89d2\uff0c\u6bcf\u6b21\u6309\u65b9\u5411\u952e\uff0c\u5149\u6807\u603b\u662f\u8df3\u5230**\u4e0b\u4e00\u4e2a\u5728\u8be5\u65b9\u5411\u4e0a\u4e0e\u5f53\u524d\u4f4d\u7f6e\u4e0d\u540c\u7684\u5b57\u7b26\uff0c\u82e5\u4e0d\u5b58\u5728\u5219\u4e0d\u79fb\u52a8**\u3002\u6bcf\u6b21\u6309\u9009\u62e9\u952e\uff0c\u5219\u5c06\u5149\u6807\u6240\u5728\u4f4d\u7f6e\u7684\u5b57\u7b26\u6253\u5370\u51fa\u6765\u3002\u6c42\u6253\u5370\u7ed9\u5b9a\u6587\u672c\u7684\u6700\u5c11\u6309\u952e\u6b21\u6570\u3002\n\n## \u3010\u5206\u6790\u3011\n\n\u6570\u636e\u8303\u56f4\u4e0d\u5927\uff0c\u66b4\u529b$BFS$\u5373\u53ef\n\nBFS\u961f\u5217\u4e2d\u7684\u5143\u7d20\u8bb0\u5f55\u5f53\u524d\u4f4d\u7f6e\u548c\u5f53\u524d\u5339\u914d\u7684\u4f4d\u6570\n\n\u4f46\u662f\u8981\u6c42\u4e0b\u4e00\u4e2a\u5b57\u7b26\u4e0e\u5f53\u524d\u4f4d\u7f6e\u4e0d\u540c\uff0c\u53ef\u80fd\u4f1a\u6709\u5927\u91cf\u65e0\u7528\u8ba1\u7b97\n\n\u9700\u8981\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u4f4d\u7f6e\u5728\u6bcf\u4e2a\u65b9\u5411\u4e0a\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\n\n## \u3010\u7b97\u6cd5\u3011\nBFS\n\n## \u3010\u4ee3\u7801\u3011\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,ans,len,vis[55][55],mi[55][55];\nchar s[10005];\nstruct point{\n\tint a,x,y,sx[4],sy[4];\n\tvoid init(){//\u9884\u5904\u7406\n\t\tsy[0]=sy[2]=y,sx[1]=sx[3]=x;\n\t\tfor(int i=x;i&&mi[i][y]==a;i--) sx[0]=i;sx[0]--;\n\t\tfor(int i=x;i<=n&&mi[i][y]==a;i++) sx[2]=i;sx[2]++;\n\t\tfor(int j=y;j<=m&&mi[x][j]==a;j++) sy[1]=j;sy[1]++;\n\t\tfor(int j=y;j&&mi[x][j]==a;j--) sy[3]=j;sy[3]--;\n\t}\n}mp[55][55];\nstruct node{\n\tint a, b, t, step;\n\tnode(int aa,int bb,int tt,int ss){\n\t\ta=aa,b=bb,t=tt,step=ss;\n\t}\n};\nvoid bfs(){\n\tqueue<node> q;\n\tq.push(node(1, 1, 0, 0));\n\twhile(!q.empty()){//\u9010\u4e2a\u5339\u914d\n\t\tnode k=q.front();\n\t\tq.pop();\n\t\tif(mp[k.a][k.b].a==s[k.t]){\n\t\t\tif(k.t==len){\n\t\t\t\tprintf(\"%d\\n\",k.step+1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvis[k.a][k.b] =k.t+1;\n\t\t\tq.push(node(k.a,k.b,k.t+1,k.step+1));\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=0;i<4;i++) {\n\t\t\tint dx=mp[k.a][k.b].sx[i],dy=mp[k.a][k.b].sy[i];\n\t\t\tif(dx<1||dx>n||dy<1||dy>m) continue;\n\t\t\tif(dx==k.a&&dy==k.b) continue;\n\t\t\tif(vis[dx][dy]>=k.t) continue;\n\t\t\tvis[dx][dy]=k.t;\n\t\t\tq.push(node(dx,dy,k.t,k.step+1));\n\t\t}\n\t}\n}\nvoid work(){\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%s\",s+1);\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tmi[i][j]=mp[i][j].a=s[j];\n\t\t\tmp[i][j].x=i,mp[i][j].y=j;\n\t\t\tvis[i][j]=-1;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++) mp[i][j].init();\n\tscanf(\"%s\", s);\n\tlen=strlen(s);\n\ts[len]='*';\n\tbfs();\n}\nint main(){\n// \tfreopen(\"P6909.in\",\"r\",stdin);\n// \tfreopen(\"P6909.out\",\"w\",stdout); \n\twhile(scanf(\"%d%d\",&n,&m)==2) work();\n\treturn 0;\n}\n```\n",
        "postTime": 1610975367,
        "uid": 116251,
        "name": "\u7834\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P6909 \u3010[ICPC2015 WF]Keyboarding\u3011"
    }
]
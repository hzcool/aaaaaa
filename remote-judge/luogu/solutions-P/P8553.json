[
    {
        "content": "\u6211\u4eec\u7ed9\u6240\u6709\u6570\u51cf\u53bb $l\\sim r$ \u7684\u6309\u4f4d\u4e0e\u3002\u56e0\u4e3a\u8fd9\u4e9b\u4f4d\u6ca1\u6709\u5f71\u54cd\u3002\n\n\u6211\u4eec\u7ed9\u4e8c\u8fdb\u5236\u4e0b 1 \u4e2a\u6570\u4e3a\u5947\u6570\u7684\u6570\u6d82\u4e0a\u9ed1\u8272\uff0c\u5176\u4f59\u6d82\u4e0a\u767d\u8272\u3002\u8bbe $r$ \u7684\u6700\u9ad8\u4f4d\u662f $p=2^q$\u3002\n\n\u505a\u597d\u51c6\u5907\u4ee5\u540e\uff0c\u5148\u6765\u770b\u770b\u4e24\u4e2a\u663e\u7136\u65e0\u89e3\u7684\u60c5\u51b5\uff1a\n\n1.  \u7b54\u6848\u6392\u5217\u4e00\u5b9a\u662f\u9ed1\u767d\u76f8\u95f4\u7684\uff0c\u6240\u4ee5\u5982\u679c\u539f\u6392\u5217\u4e2d\u9ed1\u8272\u70b9\u7684\u4e2a\u6570\u4e0e\u767d\u8272\u70b9\u76f8\u5dee\u4e86 $2$ \u53ca\u4ee5\u4e0a\uff0c\u90a3\u5bc4\u3002\n2.  \u5982\u679c $l+p> r$\uff0c\u90a3\u5927\u4e8e\u7b49\u4e8e $p$ \u7684\u548c\u5c0f\u4e8e $p$ \u7684\u6839\u672c\u8fde\u4e0d\u4e0a\u3002 \n\n\u6392\u9664\u6389\u8fd9\u4e24\u79cd\u60c5\u51b5\u540e\uff0c\u5176\u4ed6\u7684\u60c5\u51b5\u90fd\u662f\u6709\u89e3\u7684\u3002\u63a5\u4e0b\u6765\uff0c\u5148\u4ecb\u7ecd\u6784\u9020\u7684\u65b9\u6cd5\uff0c\u518d\u6765\u8bc1\u660e\u6784\u9020\u7684\u5145\u5206\u6027\u3002\n\n1.  \u7b54\u6848\u6392\u5217\u53ef\u4ee5\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u5de6\u8fb9\u4e00\u90e8\u5206\u5c0f\u4e8e $p$\uff0c\u53f3\u8fb9\u4e00\u90e8\u5206\u5927\u4e8e\u7b49\u4e8e $p$\u3002\n\n2.  \u82e5 $p-l$ \u662f\u5947\u6570\uff0c\u5219\u9009\u53d6 $l$ \u4f5c\u4e3a\u5de6\u8fb9\u90e8\u5206\u6700\u540e\u4e00\u4e2a\u6570\uff0c$l+p$ \u4f5c\u4e3a\u53f3\u8fb9\u90e8\u5206\u7b2c\u4e00\u4e2a\u6570\u3002\n\n    \u5426\u5219\uff0c\u9009\u53d6 $r-p$ \u4f5c\u4e3a\u5de6\u8fb9\u90e8\u5206\u6700\u540e\u4e00\u4e2a\u6570\uff0c$r$ \u4f5c\u4e3a\u53f3\u8fb9\u90e8\u5206\u7b2c\u4e00\u4e2a\u6570\u3002\n\n3.  \u786e\u5b9a\u597d\u63a5\u53e3\u4ee5\u540e\uff0c\u53ea\u9700\u89e3\u51b3\u6b64\u95ee\u9898\uff1a\u6784\u9020 $0\\sim m$ \u7684\uff0c\u4ee5 $k$ \u4f5c\u4e3a\u4e00\u4e2a\u7aef\u70b9\u7684\u7b26\u5408\u8981\u6c42\u7684\u6392\u5217\u3002\n\n\u8bc1\u660e\uff1a\n\n1. \u5bf9\u4e8e $0\\sim n $ \u7684\u6392\u5217\uff0c\u8003\u5bdf\u5176\u4e2d\u7684\u9ed1\u767d\u70b9\u4e2a\u6570\u3002\u82e5\u4e00\u6837\u591a\uff0c\u5219\u4efb\u610f\u6570\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u7aef\u70b9\uff0c\u5426\u5219\u591a\u7684\u90a3\u4e00\u4e2a\u6570\u7684\u4efb\u610f\u6570\u53ef\u4ee5\u4f5c\u4e3a\u7aef\u70b9\u3002\n\n    \u5145\u5206\u6027\uff1a\u4eff\u9020\u6784\u9020\u7684\u65b9\u6cd5\u5f52\u7eb3\u8bc1\u660e\u3002\n\n2. \u5de6\u53f3\u53ea\u4f1a\u6709\u5f02\u8272\u70b9\u8fde\u8fb9\uff0c\u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u6392\u9664\u4e86\u5de6\u53f3\u65e0\u8fde\u8fb9\u7684\u60c5\u51b5\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u4f1a\u62c5\u5fc3\u4e00\u79cd\u60c5\u51b5\uff1a\n\n    - \u4ec5\u6709\u5de6\u4fa7\u9ed1\u8272\u70b9\u8fde\u5411\u53f3\u4fa7\u767d\u8272\u70b9\u7684\u8fb9\uff0c\u4e14\u5de6\u4fa7\u53ea\u80fd\u4ee5\u767d\u8272\u5f00\u5934\uff0c\u53f3\u4fa7\u53ea\u80fd\u4ee5\u9ed1\u8272\u5f00\u5934\u3002\n\n    \u6211\u4eec\u5c1d\u8bd5\u8bf4\u660e\u8fd9\u79cd\u60c5\u51b5\u662f\u4e0d\u5b58\u5728\u7684\u3002\n\n    \u9996\u5148\u8003\u8651\u5de6\u53f3\u4e24\u4fa7\u6570\u7684\u4e2a\u6570\uff0c\u6709\u4e00\u8fb9\u662f\u5076\u6570\u7684\u8bdd\u4e0a\u9762\u5df2\u7ecf\u8bf4\u4e86\u4e0d\u4f1a\u6709\u95ee\u9898\uff0c\u90a3\u4e48\u8003\u8651\u4e24\u8fb9\u90fd\u662f\u5947\u6570\u7684\u60c5\u51b5\uff1a\n\n    \u6211\u4eec\u8bc1\u660e\u6b64\u65f6\uff0c$(l,l+p)$ \u4e00\u5b9a\u6ee1\u8db3\u6761\u4ef6\uff1a$l$ \u663e\u7136\u53ef\u4ee5\u4f5c\u4e3a\u5de6\u8fb9\u7684\u5f00\u5934\uff0c\u56e0\u4e3a $l$ \u53f3\u4fa7\u7684\u6570\u53ef\u4ee5\u4e24\u4e24\u914d\u5bf9\u989c\u8272\u4e0d\u540c\uff0c\u56e0\u6b64 $l$ \u4e00\u5b9a\u662f\u8f83\u591a\u7684\u90a3\u4e2a\u3002\u4e0d\u5931\u4e00\u822c\u6027\u5730\u8ba4\u4e3a $l$ \u662f\u9ed1\u8272\u3002\u7136\u540e\u8003\u8651\u5bf9\u9762\u90a3\u4e2a\u767d\u8272\u70b9\u80fd\u5426\u4f5c\u4e3a\u5f00\u5934\uff0c\u53ef\u4ee5\uff0c\u5426\u5219\u53f3\u8fb9\u4e5f\u662f\u9ed1\u8272\u70b9\u8f83\u591a\uff0c\u5c31\u65e0\u89e3\u4e86\u3002\n\n3. \u7531\u4e0a\u8ff0\u8bba\u65ad\uff0c\u518d\u52a0\u4e0a $l,l+p,r,r-p$ \u8fd9\u56db\u4e2a\u6570\u4e00\u5b9a\u90fd\u5728 $[l,r]$ \u5185\uff0c\u6211\u4eec\u5c31\u8bc1\u660e\u4e86\u4e00\u5b9a\u53ef\u4ee5\u9009\u62e9\u4e2a\u6570\u4e3a\u5947\u6570\u4e00\u4fa7\u7684\u7aef\u70b9\u4f5c\u4e3a\u5f00\u5934\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7ed9\u51fa\u6784\u9020 $0\\sim m-1$ \u7684\uff0c\u4ee5 $k$ \u4f5c\u4e3a\u4e00\u4e2a\u7aef\u70b9\u7684\u7b26\u5408\u8981\u6c42\u7684\u6392\u5217\u7684\u65b9\u6cd5\u3002\u5176\u5145\u5206\u6027\u7684\u5f52\u7eb3\u8bc1\u660e\u8574\u542b\u5728\u6b64\u6784\u9020\u4e4b\u4e2d\u3002\n\n\u5148\u4ecb\u7ecd\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff0c\u6784\u9020 $0\\sim M-1$ \u7684\uff0c**$0$ \u5f00\u5934**\uff0c$k$ \u4e3a**\u6700\u540e\u4e00\u4e2a\u5143\u7d20**\u7684\u6392\u5217\uff0c\u5176\u4e2d $M$ \u662f $2$ \u7684\u6b21\u5e42\u3002\u8bbe\u6784\u9020\u51fa\u7684\u6392\u5217\u4e3a ${\\rm build2^k}(M,k)$\u3002\n\n\u8003\u8651 $k$ \u4e0e $M/2$ \u7684\u5927\u5c0f\u5173\u7cfb\uff1a\n\n1.  \u82e5 $k\\ge M/2$\uff0c\u53ea\u9700\u6c42\u51fa ${\\rm build2^k}(M/2,1)$ \u548c ${\\rm build2^k}(M/2,k\u82d8\u877d\ufffd\ufffd\u77e7\ufffd\ufffd\ufffd\u310d\u5880\u640f\u66b4\u2500\u8343\u9a80\u822c\u8343\u7e41\u626f\u8343\u8361\u677f\u8343\u70b9\u5cb8\u8343\u8361\u677f\u8343\u8d74\u6697\u8343\u5f53\u9661\u8343\u62f1\u752f\u8343\u57ab\u5b89\u8343\u606b\u500d\u8343\u6751\u642c\ufffd\u306d\u5880\u640f\u5821\u8343\u9a80\u822c\u8343\u7e41\u626f\u8343\u8361\u677f\u8343\u606b\u9a7a\u8343\u51bb\u5cac\u8343\u9550\u8d29\u8343\u6597\u515c\u8343\u515a\u70e6\u8343\u515a\u5f50\u8343\u5632\u5b89\u8334\u8334\ufffd\ufffd\ufffd\ufffd\u8343\u5b58\u7cd5\u8343\u5012\u8986\u8343\u9a80\u8d2c\u306d\u7901\ufffd\u8662\u7b4f\u8334\u8334\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u82d8\u877d\ufffd\u6029\u6baa\u6d33\u63e0\ufffd\u310d\u5880\u94c2\u66b4\u6770\u833a\u827e\u94c2\u8d85\u907f\u8366\u307c\u94b4\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u82d8\u877d\ufffd\u6029\u6baa\u6d33\u63e0\ufffd\u310d\u5880\u94c2\u81bb\ufffd\u82d8\u877d\ufffd\ufffd\u77e7\ufffd\ufffd\ufffd\u310d\u5880\u640f\u66b4\u2519\ufffd\u82d8\u877d\ufffd\u6029\u6baa\u6d33\u63e0\ufffd\u00f9\ufffd\u535a\u6770\u833a\u827e\u7206\u8d85\u66f9\u8366\u307c\u94b4\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u82d8\u877d\ufffd\u6029\u6baa\u6d33\u63e0\ufffd\u310d\ufffd\u6c05\u6770\u833a\u827e\u94c2\u8d85\u7206\u80de\ufffd\u82d8\u877d\ufffd\ufffd\u77e75,1{\ufffd\\rm xor\ufffd}5,3{\ufffd\\rm xor\ufffd}5,2{\ufffd\\rm xor\ufffd}5\\}=\\{0,2,3,1,5,4,6,7\\}$\n\n2.  \u82e5 $k<M/2$\uff0c\u53ea\u9700\u6c42\u51fa ${\\rm build2^k}(M/2,k)$\uff0c\u7136\u540e $a_1,a_1+M/2,a_2+M/2,a_2,\\dots$ \u8fd9\u6837\u62fc\u8d77\u6765\u5373\u53ef\u3002\n\n    \u4f8b\u5982\uff1a$M=8,k=2$\n\n    ${\\rm build2^k}(M/2,k)=\\{0,1,3,2\\}$\n\n    ${\\rm build2^k}(M,k)=\\{0,0+4,1+4,1,3,3+4,2+4,2\\}=\\{0,4,5,1,3,7,6,2\\}$\u3002\n\n\u8bbe\u6784\u9020\u51fa\u7684\u6392\u5217\u4e3a ${\\rm build}(m,k)$\uff0c\u6b64\u6392\u5217\u7684**\u7b2c\u4e00\u4e2a\u5143\u7d20**\u662f $k$\u3002\n\n\u8003\u8651 $m-1$ \u7684\u6700\u9ad8\u4f4d $p=2^q$\uff0c\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n1.  \u82e5 $k\\ge p$\uff0c\u5148\u6c42\u51fa $A={\\rm build}(m-p,k-p)$\uff0c\u7136\u540e\u518d\u6c42\u51fa $B={\\rm build2^k}(p,1)$\uff0c\u7136\u540e\u6839\u636e $A$ \u53e6\u4e00\u4e2a\u7aef\u70b9\u7684\u503c $x$\uff0c\u7ed9 $B$ \u5168\u90e8\u5f02\u6216\u4e0a $x$\uff0c\u518d\u7ed9 $A$ \u5168\u90e8\u52a0\u4e0a $p$\uff0c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n    \u4f8b\u5982\uff1a$m=6,k=4$\n\n    $A={\\rm build}(2,0)=\\{0,1\\}$\n\n    $B={\\rm build2^k}(4,1)=\\{0,2,3,1\\}$\n\n    ${\\rm build}(m,k)=\\{0+4,1+4,0{\ufffd\\rm xor\ufffd}1,2{\ufffd\\rm xor\ufffd}1,3{\ufffd\\rm xor\ufffd}1,1{\ufffd\\rm xor\ufffd}1\\}=\\{4,5,1,3,2,0\\}$\n\n2.  \u82e5 $k<p$\uff0c\u8bbe\u4e00\u4e2a 01 \u53d8\u91cf $o$\u3002\u5148\u6c42 $k$ \u7684\u9ed1\u767d\u60c5\u51b5\uff0c\u5982\u679c\u662f\u767d\u8272\uff08$0$ \u4e5f\u662f\u767d\u8272\uff09\uff0c\u90a3\u5c31\u4ee4 $o=1$\uff1b\u5426\u5219 $o=0$\u3002 \u6c42 ${\\rm build2^k(p,k{\ufffd\\rm xor\ufffd }o)}$ \u548c ${\\rm build}(m-p,o)$ \uff0c\u5c06\u524d\u8005\u5f02\u6216\u4e0a $o$\uff0c\u540e\u8005\u52a0\u4e0a $p$\uff0c\u62fc\u5728\u4e00\u8d77\u5373\u53ef\u3002\u5c31\u4e0d\u4e3e\u4f8b\u5b50\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nusing vi=basic_string<int>;\n#define rev(A) reverse(A.begin(),A.end())\nvoid no(){cout<<\"No\"<<endl;exit(0);}\nint l,r,n;\nvoid yes(vi a){\n\tcout<<\"Yes\"<<endl;\n\tcout<<a[0]<<' ';\n\tstring res;\n\tfor(int i=1;i<a.size();i++)\n\t\tres+=(char)('a'+(int)log2(a[i]^a[i-1]));\n    cout<<res;\n\texit(0);\n}\n\nvi operator ^ (vi a,int b){for(auto&i:a)i^=b;return a;}\n\nvi build(int n,int k){\n\tif(n==1)return {0};\n\tif(n==2)return {0,1};\n\tint _n=n>>1;\n\tif(k&_n)\n\t\treturn build(_n,1)+(build(_n,k^_n^1)^_n^1);\n\telse{\n\t\tvi a=build(_n,k),res;\n\t\tfor(int i=0;i<_n;i++)\n\t\t\tres+=a[i]^((i&1)*_n),res+=a[i]^((i+1&1)*_n);\n\t\treturn res;\n\t}\n}\n\nvi buildn(int n,int k){\n\tint t=log2(n),_t=1<<t;\n\tif(_t==n)return build(n,1)^k;\n\tif(k&_t){\n\t\tvi x=buildn(n-_t,k-_t),y=build(_t,1);\n\t\ty=y^x.back();x=x^_t;\n\t\treturn x+y;\n\t}else{\n\t\tint p=!(__builtin_popcount(k)&1);\n\t\tvi y=build(_t,k^p);y=y^p;rev(y);\n\t\treturn y+(buildn(n-_t,p)^_t);\n\t}\n}\n\nint main(){\n\tcin>>l>>r;\n\tn=r-l+1;\n\tif(l==r)yes({l});\n\t\n\tint yu=\ufffd0;\n\tfor(int i=l;i<=r;i++)yu&=i;\n\tl-=yu,r-=yu;\n\tint m=1<<(int)log2(r);\n\t\n\tint c=0;for(int i=l;i<=r;i++)c+=__builtin_popcount(i)&1;\n\tif(n<m||abs(c-(n-c))>1)no();\n\t\n\tint L=m-l,R=r-m+1,X;\n\tif((m-l)&1)X=l;else X=r-m;\n\tvi resA=buildn(L,m-1-X),resB=buildn(R,X);\n\trev(resA);for(auto&x:resA)x=m-1-x;\n\tyes((resA+(resB^m))^yu);\n}\n```\n",
        "postTime": 1662358096,
        "uid": 79067,
        "name": "dottle",
        "ccfLevel": 10,
        "title": "\u9192\u6765"
    },
    {
        "content": "## P8553 \u9192\u6765 \u9898\u89e3\n\u8865\u5145\u4e00\u70b9\u5f3a\u5927\u51fa\u9898\u4eba\u591a\u54e5\u9898\u89e3\u7684\u7ec6\u8282\u3002\n### \u9898\u610f\n\u7ed9\u51fa $l,r$\uff0c\u6784\u9020\u51fa $l\\sim r$ \u7684\u6392\u5217 $p$\uff0c\u6ee1\u8db3 $|p_i\\operatorname{xor}p_{i+1}|=1(i\\le r-l)$ \u6216\u62a5\u544a\u65e0\u89e3\uff0c\u5176\u4e2d $||$ \u8868\u793a\u4e8c\u8fdb\u5236\u4e0b $1$ \u7684\u4e2a\u6570\uff0c$\\operatorname{xor}$ \u8868\u793a\u6309\u4f4d\u5f02\u6216\u3002($0\\le l<r\\le 10^7$)\n\n### \u9898\u89e3\n\u9996\u5148\u5f3a\u5927\u51fa\u9898\u4eba\u591a\u54e5\u5199\u8fc7\u4e00\u4e2a\u6784\u9020\u4efb\u610f\u957f\u5ea6\u683c\u96f7\u7801\u7684\u535a\u5ba2\uff0c[https://www.luogu.com.cn/blog/dottle/GrayCode](https://www.luogu.com.cn/blog/dottle/GrayCode)\u3002\u8fd9\u4e2a\u6545\u4e8b\u544a\u8bc9\u6211\u4eec\u53ef\u4ee5\u591a\u7ffb\u4e00\u7ffb\u6708\u8d5b\u51fa\u9898\u4eba\u7684\u535a\u5ba2\u3002\n\n\u6211\u4eec\u4e0d\u59a8\u4ee4 $l,r$ \u4e2d\u6240\u6709\u6570\u4e8c\u8fdb\u5236\u4f4d\u4e0b\u5747\u65e0\u4ea4\u96c6\uff08\u5982\u679c\u4e00\u5f00\u59cb\u6709\u4ea4\u96c6\u5c31\u53bb\u6389\uff0c\u6700\u540e\u8f93\u51fa\u7b54\u6848\u7684\u65f6\u5019\u52a0\u4e0a\u5373\u53ef\uff09\u3002\u8fd9\u6837\u5728\u6784\u9020\u7684\u65f6\u5019\u4f1a\u65b9\u4fbf\u5f88\u591a\u3002\n\n\u8fd9\u9053\u9898\u53ef\u4ee5\u4ece\u7c7b\u4f3c\u7684\u601d\u8def\u5207\u5165\uff0c\u5373\u8003\u8651\u628a\u5e8f\u5217\u5206\u6210\u957f\u5ea6\u4e3a $2^m$ \u7684\u90e8\u5206\u548c\u5269\u4f59\u90e8\u5206\u3002\u4e0d\u8fc7\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6765\u770b\u770b\u600e\u4e48\u5224\u65ad\u65e0\u89e3\u3002\n\n\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u6784\u9020\u4e00\u5f20\u56fe $G=(V,E)$\uff0c$V$ \u4e2d\u7684\u5143\u7d20\u662f\u6240\u6709 $l,r$ \u4e4b\u95f4\u7684\u6574\u6570\uff0c$(u,v)\\in E$\uff0c\u5f53\u4e14\u4ec5\u5f53 $|u\\operatorname{xor}v|=1$\u3002\u5373\u4e24\u70b9\u4e4b\u95f4\u6709\u8fb9\u5f53\u4e14\u4ec5\u5f53\u5b83\u4eec\u5728\u6700\u7ec8\u6392\u5217\u53ef\u4ee5\u76f8\u90bb\u3002\u53ef\u4ee5\u89c2\u5bdf\u5230\u8fd9\u5f20\u56fe\u4e00\u5b9a\u662f\u4e8c\u5206\u56fe\u3002\uff08\u663e\u7136\u76f8\u90bb\u7684\u70b9\u4e8c\u8fdb\u5236\u4e0b $1$ \u7684\u4e2a\u6570\u4e00\u5b9a\u5947\u5076\u6027\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u53ef\u80fd\u51fa\u73b0\u5947\u73af\uff09\u5219\u9ed1\u767d\u67d3\u8272\u540e\u6211\u4eec\u8981\u627e\u7684\u4e00\u6761\u7ecf\u8fc7\u6240\u6709\u70b9\u6070\u597d\u4e00\u6b21\u7684\u54c8\u5bc6\u987f\u8def\u4e00\u5b9a\u662f\u9ed1\u767d\u76f8\u95f4\u7684\uff0c\u4ece\u800c\u5982\u679c\u9ed1\u70b9\u4e2a\u6570\u4e0e\u767d\u70b9\u4e2a\u6570\u76f8\u5dee\u5927\u4e8e $1$ \u5219\u4e00\u5b9a\u65e0\u89e3\u3002\n\n\u8fd8\u6709\u4ec0\u4e48\u60c5\u51b5\u662f\u627e\u4e0d\u5230\u54c8\u5bc6\u987f\u8def\u7684\u5462\uff1f\u56fe\u4e0d\u8fde\u901a\u7684\u65f6\u5019\u3002\u56fe\u4ec0\u4e48\u65f6\u5019\u4e0d\u8fde\u901a\u5462\uff1f\u6ce8\u610f\u5230 $l,r$ \u4e4b\u95f4\u6240\u6709\u6570\u4e8c\u8fdb\u5236\u4e0b\u65e0\u4ea4\u96c6\uff0c\u8fd9\u6837\u6211\u4eec\u4e00\u5b9a\u53ef\u4ee5\u628a $[l,r]$ \u5206\u6210 $[l,p-1],[p,r]$ \u4e24\u4e2a\u90e8\u5206\uff0c\u5176\u4e2d $p=2^{\\lfloor\\log_2 r\\rfloor}$\uff0c\u5373\u6309\u6700\u9ad8\u4f4d\u5206\u7ec4\u3002\u56e0\u4e3a\u65e0\u4ea4\u96c6\uff0c\u6240\u4ee5\u4e24\u4e2a\u533a\u95f4\u4e4b\u95f4\u7684\u8fb9\u53ea\u80fd\u7531 $(x,x+p)(x<p)$ \u6765\u63d0\u4f9b\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u5982\u679c $l+p>r$\uff0c\u5373\u4e00\u6761\u8fb9\u90fd\u8fde\u4e0d\u51fa\u6765\uff0c\u663e\u7136\u524d\u540e\u4e0d\u8fde\u901a\u3002\n\n\u7136\u540e\u591a\u54e5\u5c31\u8bf4\u8fd9\u4e24\u4e2a\u6761\u4ef6\u591f\u4e86\uff0c\u8bc1\u660e\u6bd4\u8f83\u590d\u6742\u5c31\u6ca1\u6709\u8bb2\uff0c\u6211\u4e5f\u4e0d\u4f1a\u3002\u4f46\u611f\u89c9\u4e0b\u9762\u7684\u6784\u9020\u8fc7\u7a0b\u5176\u5b9e\u5c31\u80fd\u8bc1\u4e86\u3002~\u731c\u5b8c\u4ea4\u4e00\u53d1\u53d1\u73b0\u62ff\u5230\u4e86 38 \u5206\u7684\u9ad8\u5206\u6240\u4ee5\u6761\u4ef6\u591f\u4e86\u3002~\n\n\u65e0\u89e3\u5224\u6389\u4e4b\u540e\u6211\u4eec\u5c31\u5f00\u59cb\u6309\u7167\u4e0a\u8ff0\u535a\u5ba2\u63d0\u4f9b\u7684\u5207\u5165\u70b9\u601d\u8003\uff0c\u5373\u5206\u6210\u4e24\u4e2a\u90e8\u5206 $[l,p-1],[p,r]$\u3002\u9996\u5148\u8003\u8651\u8fd9\u4e48\u5206\u7684\u4e24\u4e2a\u533a\u95f4\u5185\u6709\u6ca1\u6709\u89e3\uff0c\u6ce8\u610f\u5230 $[p,r]$ \u53ef\u4ee5\u96c6\u4f53\u5f02\u6216\u4e0a $p$ \u53d8\u6210 $[0,p\\operatorname{xor}r]$\uff0c\u6839\u636e\u4e0a\u9762\u7684\u535a\u5ba2\uff0c\u8fd9\u4e2a\u4e00\u5b9a\u5b58\u5728\u6784\u9020\u65b9\u6848\u3002\u7c7b\u4f3c\u5730\uff0c$[l,p-1]$ \u53ef\u4ee5\u6574\u4f53\u5f02\u6216 $p-1$\uff0c\u4ece\u800c\u5f97\u5230 $[0,l\\operatorname{xor}(p-1)]$\u3002\n\n\u7136\u540e\u662f\u7aef\u70b9\uff0c\u5373\u600e\u4e48\u628a\u4e24\u4e2a\u533a\u95f4\u8fde\u8d77\u6765\u3002\u4e00\u79cd\u65b9\u6cd5\u662f\uff0c\u5982\u679c $p-l$ \u4e3a\u5947\u6570\uff0c\u5219\u7528 $l,l+p$ \u8fde\uff0c\u5426\u5219\u7528 $r-p,r$ \u8fde\u3002\n\n\u5728\u8bc1\u660e\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u660e\u786e\u4e00\u70b9\uff0c\u90a3\u5c31\u662f\u5bf9\u4e8e\u4e00\u4e2a\u5b58\u5728\u65b9\u6848\u7684\u533a\u95f4\uff0c\u5982\u679c\u9ed1\u8272\u6570\u76ee\u7b49\u4e8e\u767d\u8272\u6570\u76ee\uff0c\u90a3\u4efb\u610f\u4e00\u4e2a\u70b9\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u7aef\u70b9\uff0c\u5426\u5219\u5fc5\u987b\u7528\u591a\u7684\u90a3\u4e2a\u989c\u8272\u3002\u8bc1\u660e\u8fd8\u7b97\u7b80\u5355\u5427\uff0c\u5c31\u8ddf\u591a\u54e5\u8bf4\u7684\u4e00\u6837\uff0c\u4eff\u9020\u6784\u9020\u7684\u65b9\u6cd5\u5f52\u7eb3\u8bc1\u660e\u3002\u7136\u540e\u5bf9\u4e8e\u4e0a\u8ff0\u7ed3\u8bba\u7684\u8bc1\u660e\u5c31\u53ef\u4ee5\u5206\u8ba8\u5947\u5076\u6027\u89e3\u51b3\u4e86\u3002\n\n\u8fd9\u6837\uff0c\u6211\u4eec\u7684\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\uff0c\u6784\u9020\u51fa\u4e00\u4e2a $[0,n]$ \u7684\u7b26\u5408\u6761\u4ef6\u7684\u6392\u5217\uff0c\u4f7f\u5f97\u5f00\u5934\u662f $x$\u3002\u8bbe\u8fd9\u6837\u7684\u6392\u5217\u662f $\\mathrm{seq}(n,x)$\uff0c\u5219\u5982\u679c\u7528 $x(x=l,r-p)$ \u8fde\uff0c\u7b54\u6848\u5373\u4e3a\uff1a\n$$\\mathrm{rev}(\\mathrm{seq}(p-l,(p-1)\\operatorname{xor}x)\\operatorname{xor}(p-1))+(\\mathrm{seq}(r-p+1,x)\\operatorname{xor}p)$$\n\u5176\u4e2d $\\rm rev$ \u8868\u793a\u7ffb\u8f6c\u5e8f\u5217\uff0c$+$ \u53ef\u4ee5\u8868\u793a\u5e8f\u5217\u62fc\u63a5\uff0c$\\operatorname{xor}$ \u53ef\u4ee5\u8868\u793a\u7ed9\u5e8f\u5217\u6574\u4f53\u5f02\u6216\u4e0a\u4e00\u4e2a\u6570\u3002\u539f\u56e0\u53ef\u4ee5\u8003\u8651\u4e0a\u9762\u5bf9\u4e8e\u5b58\u5728\u6027\u7684\u8bc1\u660e\u53cd\u8fc7\u6765\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u6c42\u89e3 $\\rm seq$ \u4e86\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u8fd8\u60f3\u8ba8\u8bba\u4e00\u4e2a\u66f4\u7b80\u5355\u7684\u60c5\u51b5\uff0c\u5373 $\\mathrm{seq_2}(m,x)$ \u8868\u793a\u6784\u9020\u51fa\u4e00\u4e2a $[0,2^m-1]$ \u7684\u7b26\u5408\u6761\u4ef6\u7684\u6392\u5217\uff0c\u4f7f\u5f97\u5f00\u5934\u662f $0$ \u7ed3\u5c3e\u662f $x$\u3002\u6ce8\u610f\u4e0b\u6587\u4e2d\u5229\u7528 $\\operatorname{xor}$ \u5bf9\u5e8f\u5217\u503c\u57df\u7684\u5e73\u79fb\u3002\u6ce8\u610f\u6839\u636e\u6211\u4eec\u7684\u9ed1\u767d\u7406\u8bba\uff0c\u8fd9\u91cc\u5e94\u8be5\u8981\u4fdd\u8bc1 $x$ \u662f\u9ed1\u8272\u3002\n- \u5982\u679c $x<2^{m-1}$\uff0c\u4ee4 $a=\\mathrm{seq_2}(m-1,x)$\uff0c\u5219\u53ef\u4ee5\u6784\u9020\u51fa\u7b26\u5408\u6761\u4ef6\u7684\u5e8f\u5217 $\\left<a_1,a_1+2^{m-1},a_2+2^{m-1},a_2,a_3,a_3+2^{m-1},\\cdots\\right>$\u3002\u5bb9\u6613\u53d1\u73b0\u53ea\u8981 $m>1$\uff0c\u6700\u540e\u4e00\u4f4d\u4e00\u5b9a\u662f $a_{|a|}$\uff0c\u5373 $x$\u3002$m\\le 1$ \u65f6\u6392\u5217\u53ea\u6709\u4e00\u79cd\u60c5\u51b5\u3002\n- \u5982\u679c $x\\ge 2^{m-1}$\uff0c\u6b64\u65f6\u8003\u8651\u628a\u6574\u4e2a\u5e8f\u5217\u5206\u6210\u4e24\u4e2a\u5b50\u90e8\u5206\u3002\u4ece\u800c\u50cf\u4e0a\u9762\u4e00\u6837\u7f29\u5c0f $m$\uff1a\n  $$\\mathrm{seq_2}(m-1,1)+(\\mathrm{seq_2}(m-1,x\\operatorname{xor}(2^{m-1}+1))\\operatorname{xor}(2^{m-1}+1))$$\n  \u8fd9\u91cc\u5f02\u6216\u7684\u503c\u662f\u6839\u636e\u524d\u4e00\u4e2a\u5e8f\u5217\u7684\u6700\u540e\u4e00\u4e2a\u6570\u662f $1$ \u51b3\u5b9a\u7684\u3002\n\n\u7136\u540e\u6211\u4eec\u8fdb\u5165\u6b63\u9898\uff0c\u600e\u4e48\u6784\u9020 $\\mathrm{seq}(n,x)$ \u5462\uff1f\u521a\u521a\u7684 $\\rm seq_2$ \u662f\u6211\u4eec\u4e3a\u4e86\u4e0a\u8ff0\u535a\u5ba2\u7684\u65b9\u6cd5\u8fdb\u884c\u7684\u51c6\u5907\u5de5\u4f5c\uff0c\u6240\u4ee5\u6784\u9020\u65b9\u6848\u80af\u5b9a\u4e5f\u662f\u7c7b\u4f3c\u7684\u3002\u4e3a\u4e86\u65b9\u4fbf\uff0c\u4ee4 $q=\\lfloor\\log_2 m\\rfloor,p=2^q$\u3002\n- \u5982\u679c $x\\ge p$\uff0c\u5219\u6211\u4eec\u53ef\u4ee5\u7528 $\\mathrm{seq}(n-p,k-p)\\operatorname{xor} p$ \u4f5c\u4e3a\u5de6\u534a\u90e8\u5206\uff0c$\\mathrm{seq_2}(q,1)$ \u4f5c\u4e3a\u53f3\u534a\u90e8\u5206\u3002\u800c\u8fde\u63a5\u90e8\u5206\uff0c\u53ea\u9700\u8ba9\u540e\u534a\u90e8\u5206\u5f02\u6216\u4e0a\u524d\u534a\u90e8\u5206\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u5373\u53ef\u3002\u6ce8\u610f\u5230\u540e\u534a\u90e8\u5206\u662f\u4e00\u6574\u4e2a $0\\sim 2^n-1$\uff0c\u6240\u4ee5\u5f02\u6216\u4e0a\u4e00\u4e2a\u6570\u8fd8\u662f\u540c\u4e00\u4e2a\u5e8f\u5217\u7684\u6392\u5217\u3002\n- \u5982\u679c $x<p$\uff0c\u5219\u7565\u5fae\u590d\u6742\u3002\u6211\u4eec\u8981\u8003\u8651\u4e00\u4e0b\u9ed1\u767d\u7684\u95ee\u9898\u3002\u57fa\u672c\u601d\u8def\u5e94\u8be5\u662f $\\mathrm{rev}(\\mathrm{seq_2}(q,k))+(\\mathrm{seq}(n-p,0)\\operatorname{xor}p)$\u3002\u4f46\u95ee\u9898\u5728 $k$ \u4e0d\u4e00\u5b9a\u662f\u9ed1\u8272\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u8c03\u6574\u4e00\u4e0b\uff0c\u5982\u679c $k$ \u662f\u767d\u8272\uff0c\u628a\u5f0f\u5b50\u53d8\u4e3a $\\mathrm{rev}(\\mathrm{seq_2}(q,k\\operatorname{xor}1)\\operatorname{xor}1)+(\\mathrm{seq}(n-p,1)\\operatorname{xor} p)$\uff0c\u4f9d\u7136\u5408\u6cd5\u3002\n- \u5f53 $n$ \u662f $2$ \u7684\u6b21\u5e42\u65f6\u76f4\u63a5\u7528 $\\rm seq_2$ \u7b97\u518d\u7ffb\u8f6c\u56de\u6765\u3002\n\n\u7136\u540e\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\u3002\u6700\u540e\u522b\u5fd8\u4e86\u628a\u53bb\u6389\u7684\u5171\u540c\u4f4d\u5f02\u6216\u56de\u6765\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n)$\u3002\n```cpp\n#include <cstdio>\n#include <vector>\ntypedef std::vector<int> vi;\nvi operator+(const vi& x, const vi& y)\n{\n\tvi ret; \n\tfor (auto& v : x) ret.push_back(v);\n\tfor (auto& v : y) ret.push_back(v);\n\treturn ret;\n}\nvi operator^(const vi& x, int y)\n{\n\tvi ret;\n\tfor (auto& v : x) ret.push_back(v ^ y);\n\treturn ret;\n}\nvi rev(const vi& x)\n{\n\tvi ret;\n\tfor (int i = (int)x.size() - 1; \ufffdi; --i) ret.push_back(x[i]);\n\treturn ret;\n}\nvi build1(int m, int k)\n{\n\tif (!m) return vi({0});\n\tif (m == 1) return vi({0, 1});\n\tint p = 1 << (m - 1); \n\tif (k < p)\n\t{\n\t\tvi ret = build1(m - 1, k), ans; int now = 0;\n\t\tfor (auto& v : ret)\n\t\t{\n\t\t\tif (!now) ans.push_back(v), ans.push_back(v + p);\n\t\t\telse ans.push_back(v + p), ans.push_back(v);\n\t\t\tnow ^= 1;\n\t\t}\n\t\treturn ans;\n\t}\n\treturn build1(m - 1, 1) + (build1(m - 1, k ^ (p + 1)) ^ (p + 1));\n}\nvi build(int m, int k)\n{\n\tif (!(m & (m - 1))) return build1(31 - __builtin_clz(m), 1) ^ k;\n\tint q = 31 - __builtin_clz(m), p = 1 << q;\n\tif (k >= p) \n\t{\n\t\tvi ret = build(m - p, k - p); int x = ret.back();\n\t\treturn (ret ^ p) + (build1(q, 1) ^ x);\n\t}\n\tint o = (__builtin_popcount(k) & 1) == 0;\n\treturn rev(build1(q, k ^ o) ^ o) + (build(m - p, o) ^ p);\n}\ninline void print(const vi& x)\n{\n\tputs(\"Yes\");\n\tprintf(\"%d \", x[0]);\n\tfor (int i = 1; i < (int)x.size(); ++i) putchar('a' + 31 - __builtin_clz(x[i] ^ x[i - 1]));\n\tputs(\"\");\n}\nint main()\n{\n\tint l, r, n, cnt = 0, x; scanf(\"%d%d\", &l, &r); n = r - l + 1;\n\tif (n == 1) return print({l}), 0;\n\tint t = l; for (int i = l + 1; i <= r; ++i) t &= i;\n\tl -= t; r -= t; int p = 1 << (31 - __builtin_clz(r));\n\tfor (int i = l; i <= r; ++i) cnt += (__builtin_popcount(i) & 1) == 0;\n\tif (cnt - 1 > n - cnt || cnt + 1 < n - cnt || l + p > r) return puts(\"No\"), 0;\n\tif ((p - l) & 1) x = l; else x = r - p;\n\tprint((rev(build(p - l, (p - 1) ^ x) ^ (p - 1)) + (build(r - p + 1, x) ^ p)) ^ t); \n\treturn 0;\n}\n```",
        "postTime": 1664091374,
        "uid": 137603,
        "name": "zhiyangfan",
        "ccfLevel": 9,
        "title": "P8553 \u9192\u6765 \u9898\u89e3"
    },
    {
        "content": "\u5148\u770b\u770b\u600e\u4e48\u5224\u65ad\u6709\u65e0\u89e3\u3002\n\n\u591a\u5934\u544a\u8bc9\u6211\u4eec\uff0c\u663e\u7136 $l$ \u548c $r$ \u7684\u516c\u5171\u524d\u7f00\u6211\u4eec\u662f\u4e0d\u7528\u8003\u8651\u7684\uff0c\u56e0\u4e3a\u4ed6\u4eec\u6c38\u8fdc\u76f8\u540c\u3002\n\n\u6240\u4ee5\u8bb0 $l,r$ \u662f\u53bb\u6389\u516c\u5171\u524d\u7f00\u4e4b\u540e\u7684\u503c\u3002\n\n\u8003\u8651 $r$ \u7684\u6700\u9ad8\u4f4d\uff0c\u82e5\u6709 $h+1$ \u4f4d\uff0c\u6211\u4eec\u628a\u533a\u95f4\u62c6\u5206\u6210 $[l,2^h-1]$ \u548c $[2^h,r]$\u3002\n\n\u8fd9\u6837\u6709\u4ec0\u4e48\u6027\u8d28\u5462\uff0c\u4f60\u53d1\u73b0\u4e24\u4e2a\u533a\u95f4\u4e2d\u5206\u522b\u53d6\u51fa\u4e00\u4e2a\u6570\u76f8\u90bb\uff0c\u90a3\u4e48\u4ed6\u4eec\u7684\u4f4e $h$ \u4f4d\u76f8\u540c\u3002\n\n\u8fd9\u542f\u53d1\u6211\u4eec\u6784\u9020\u4e00\u7ec4\u89e3\u4f7f\u5f97\u7b2c\u4e00\u4e2a\u533a\u95f4\u662f\u7b54\u6848\u7684\u524d\u7f00\uff0c\u7b2c\u4e8c\u4e2a\u533a\u95f4\u662f\u540e\u7f00\uff0c\u5e76\u4e14\u4ea4\u754c\u5904\u4f4e\u4f4d\u76f8\u540c\u3002\n\n\u4e3a\u4ec0\u4e48\u8fd9\u4e2a\u662f\u5bf9\u7684\uff1f\u53ef\u4ee5\u5148\u8003\u8651\u6709\u89e3\u7684\u5145\u5206\u6761\u4ef6\uff1a\n1. \u8981\u6ee1\u8db3 $[l,r]$ \u4e2d $\\operatorname{popcount}$ \u5947\u5076\u6027\u4e3a $0,1$ \u7684\u4e2a\u6570\u5dee\u4e0d\u8d85\u8fc7 $1$\u3002\n2. \u5b58\u5728\u4e00\u4e2a\u201c\u4ea4\u754c\u5904\u4f4e\u4f4d\u76f8\u540c\u3002\u201d\u7684\u503c\u3002\u5982\u679c\u4e0d\u5b58\u5728\u663e\u7136\u662f\u6784\u9020\u4e0d\u51fa\u6765\u7684\u3002\n\n\u7136\u540e\u4e24\u4e2a\u533a\u95f4\u90fd\u6709\u6027\u8d28\uff0c\u4e00\u4e2a\u53f3\u7aef\u70b9\u6700\u540e $h$ \u4f4d\u5168\u662f $1$\uff0c\u4e00\u4e2a\u5de6\u7aef\u70b9\u6700\u540e $h$ \u4f4d\u5168\u662f $0$\uff0c\u53ef\u4ee5\u7b80\u5355\u8f6c\u6362\u5230 $[0,r']$ \u7684\u95ee\u9898\u3002\n\n\n\u8fd9\u6837\u95ee\u9898\u8f6c\u6362\u6210\u5728\u4e00\u6bb5\u533a\u95f4\u4e0a\u5e76\u4e14\u6307\u5b9a\u5e8f\u5217\u7684\u4e00\u4e2a\u7aef\u70b9\u4e0a\u7684\u503c $v$\uff0c\u5e76\u4e14\u73b0\u5728\u533a\u95f4\u6709\u4e2a\u6027\u8d28\uff0c$l=0$\u3002\n\n\u770b\u4e0a\u53bb\u8fd8\u662f\u5f88\u5947\u602a\uff0c\u6211\u4eec\u4ecd\u7136\u8003\u8651\u65b0\u533a\u95f4\u7684 $h$\u3002\n\n\u5982\u679c $v\\ge 2^h$\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u9012\u5f52 $[2^h,v]$\uff0c\u7136\u540e\u7528\u4e00\u6b21 $h$ \u8f6c\u6362\u5230 $[0,2^h-1]$\uff0c\u800c\u8fd9\u4e2a\u662f\u597d\u505a\u7684\uff0c\u6309\u7167\u6837\u4f8b\u7ed9\u7684\u90a3\u4e2a\u4e32\u5c31\u662f\u53ef\u4ee5\u7684\u3002\n\n\u5982\u679c $v<2^h$ \u770b\u4e0a\u53bb\u5c31\u4e0d\u662f\u8fd9\u4e48\u597d\u505a\u4e86\uff0c\u6211\u4eec\u8003\u8651\u5148\u5904\u7406\u6389 $[0,2^h-1]$\uff0c\u7136\u540e\u518d\u52a0\u5165\u4e00\u4e2a $h$ \u8f6c\u5230\u53e6\u4e00\u534a\u3002\u4f46\u662f\u73b0\u5728\u6709\u4e2a\u95ee\u9898\u5c31\u662f\u4f60\u5904\u7406\u5b8c\u5de6\u534a\u8fb9\u4e4b\u540e\u8981\u6ee1\u8db3 $end+2^h\\le r$\u3002\u8fd9\u4e2a\u600e\u4e48\u529e\u5462\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u8ba9 $end$ \u5c3d\u91cf\u5c0f\u3002\u5982\u679c\u80fd\u662f $0$ \u5c31\u53d6 $0$\uff0c\u5426\u5219\u5c31\u53d6 $1$\u3002\u8fd9\u4e00\u90e8\u5206\u6709\u4e2a AGC031C \u662f\u4e00\u6837\u7684\u3002\u5927\u81f4\u505a\u6cd5\u5c31\u662f\u4f60\u4ecd\u7136\u5206\u6210\u5de6\u53f3\u4e24\u8fb9\uff0c\u5982\u679c\u5728\u53f3\u8fb9\u5c31 solve \u53f3\u8fb9\u7136\u540e\u52a0\u4e00\u4e2a $h$ solve \u5de6\u8fb9\uff0c\u5982\u679c\u5728\u5de6\u8fb9\u5c31\u5148 solve \u5de6\u8fb9\uff0c\u7136\u540e\u5728\u5012\u6570\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u7a7f\u63d2\u4e00\u4e2a solve \u53f3\u8fb9\uff0c\u5c31\u597d\u4e86\u3002\n\n\u8fd9\u4e00\u5806\u5947\u5947\u602a\u602a\u7684\u4e1c\u897f\u6700\u540e\u8fd8\u662f\u7ebf\u6027\u7684\u2026\u2026\u6240\u4ee5\u8dd1\u7684\u98de\u5feb\uff0c\u662f\u6700\u4f18\u89e3\u3002\n\n```cpp\n#ifndef ONLINE_JUDGE\n#define DEBUG\n#endif\n#include <stdio.h>\n#include <string.h>\n#include <algorithm>\n#include <queue>\n#include <math.h>\n#include <set>\nint read() {\n    int x;\n    scanf(\"%d\", &x);\n    return x;\n}\nchar a[10000005], b[10000005];\nint cc, dd;\nvoid RG(int p, char *a, int &cc, int q = -1) {\n    int pre = cc;\n\n    for (int i = (1 << p); i >= 2; i--) {\n        int f = (std::__lg(i & -i));\n\n        if (i == (1 << p))\n            f = p - 1;\n\n        if (f == q)\n            f = 0;\n        else if (f == 0 && q >= 0)\n            f = q;\n\n        a[++cc] = 97 + f;\n    }\n}\nvoid RG1(int p, char *a, int &cc) {\n    int pre = cc;\n    a[++cc] = 97 + (p) - 1;\n\n    for (int i = 1; i < (1 << p); i++)\n        a[++cc] = 97 + std::__lg(i & -i);\n}\nint solve(int r, int v, char *a, int &cc) {\n    if (r == 0 || r == 1)\n        return v;\n\n    if (r == 2) {\n        a[++cc] = 97;\n        return v ^ 1;\n    }\n\n    int d = 1, p = 0;\n\n    while ((d << 1) < r)\n        d <<= 1, p++;\n\n    if ((r & r - 1) == 0) {\n        if (v >= r / 2) {\n            RG(p, a, cc);\n            a[++cc] = 97 + p;\n            return solve(r / 2, (v ^ 1) & (d - 1), a, cc);\n        } else {\n            int rs = solve(r / 2, v, a, cc);\n            int z = a[cc] - 97;\n            a[cc] = 97 + p;\n            RG(p, a, cc, z);\n            a[++cc] = 97 + p;\n            return rs;\n        }\n    }\n\n    if (v >= d) {\n        int end = solve(r - d, v - d, a, cc);\n        a[++cc] = 97 + p;\n        return solve(d, end, a, cc);\n    }\n\n    int P = __builtin_parity(v) ^ 1;\n\n    a[++cc] = 97 + p;\n    return d + solve(r - d, __builtin_parity(v) ^ 1, a, cc);\n}\nint l = read(), r = read(), F = 0;\nsigned main() {\n    int h = 30;\n\n    for (; h >= 0; h--) {\n        if ((l ^ r) >> h & 1)\n            break;\n\n        F |= l & (1 << h);\n    }\n\n    h++;\n    int L = l & ((1 << h) - 1);\n    int R = r & ((1 << h) - 1);\n\n    {\n        int n = R - L + 1;\n        int N = n * (n + 1) / 2;\n        int C = 0;\n\n        for (int i = L; i <= R; i++)\n            if (__builtin_parity(i))\n                C++;\n            else\n                C--;\n\n        if (R - L >= (1 << h - 1) && (-1 <= C && C <= 1 | L == 0 || R == ((1 << h) - 1))) {\n            puts(\"Yes\");\n            int fj = 1 << h - 1;\n            int ls = 0, rs = 0;\n\n            for (int i = L; i < fj; i++)\n                if (__builtin_parity(i))\n                    ls++;\n                else\n                    ls--;\n\n            for (int i = fj; i <= R; i++)\n                if (__builtin_parity(i))\n                    rs++;\n                else\n                    rs--;\n\n            for (int i = L; i + (1 << h - 1) <= R; i++) {\n                int I = i, J = i + (1 << h - 1);\n\n                if (__builtin_parity(I) * 2 - 1 == -ls)\n                    continue;\n\n                if (__builtin_parity(J) * 2 - 1 == -rs)\n                    continue;\n\n                int A = solve(fj - L, fj - 1 - I, a, cc) ^ ((1 << h - 1) - 1);\n                int B = solve(R - fj + 1, J - fj, b, dd);\n                std::reverse(a + 1, a + 1 + cc);\n                printf(\"%d \", A |= F);\n                printf(\"%s%c%s\\n\", a + 1, 97 + h - 1, b + 1);\n                break;\n            }\n        }\n\n        else {\n            puts(\"No\");\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1664115489,
        "uid": 735057,
        "name": "wghyt1314",
        "ccfLevel": 0,
        "title": "\u591a\u5934\uff0c\u6211\u662f\u4f60\u8dcc"
    }
]
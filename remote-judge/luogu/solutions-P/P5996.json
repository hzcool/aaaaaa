[
    {
        "content": "\u663e\u7136\u8fd9\u4e2a\u6a21\u578b\u662f\u4e00\u4e2a\u6700\u5927\u6743\u95ed\u5408\u5b50\u56fe\u7684\u6a21\u578b\uff0c\u4f46\u662f\u76f4\u63a5\u8fde\u8fb9\u8dd1\u663e\u7136\u590d\u6742\u5ea6\u7206\u70b8\u3002\n\n\u4e8e\u662f\u53ef\u4ee5\u60f3\u5230\u6700\u5c0f\u5272$=$\u6700\u5927\u6d41\uff0c\u90a3\u4e48\u8003\u8651\u8d2a\u5fc3\u6a21\u62df\u8d39\u7528\u6d41\u3002\n\n\u9996\u5148\u8fd9\u4e2a\u5750\u6807\u7cfb\u770b\u8d77\u6765\u4e0d\u592a\u8212\u670d\uff0c\u6240\u4ee5\u8003\u8651\u8f6c\u6362\u4e00\u4e0b\u5750\u6807\u7cfb\u3002\n\n\u5982\u679c\u4e00\u4e2a\u8b66\u536b $a$ \u80fd\u591f\u770b\u5230\u4e00\u4e2a\u624b\u529e $b$ \uff0c\u90a3\u4e48\u9700\u8981\u6ee1\u8db3\uff1a\n$$\n\\frac{x_a-x_b}{y_a-y_b}\\leq \\frac{w}{h}\n$$\n\n$$\n\\frac{x_b-x_a}{y_a-y_b}\\leq \\frac{w}{h}\n$$\n\n\n\n\u90a3\u4e48\u5c06\u5f0f\u5b50\u62c6\u5f00\u53ef\u4ee5\u5f97\u5230\uff1a\n$$\nx_a\\times h-y_a\\times w\\leq x_b\\times h-y_b\\times w\n$$\n\n$$\nx_a\\times h+y_a\\times w\\geq x_b\\times h+y_b\\times w\n$$\n\n\u90a3\u4e48\u6211\u4eec\u5982\u679c\u5c06\u5750\u6807 $(x,y)$ \u8f6c\u4e3a\u5750\u6807 $x\\times h+y\\times w,x\\times h-y\\times w$ \uff0c\u90a3\u4e48\u9650\u5236\u6761\u4ef6\u663e\u7136\u5c31\u8f6c\u5316\u4e3a\u4e86 $y_a\\leq y_b,x_a\\geq x_b$ \u3002\n\n\u90a3\u4e48\u8003\u8651\u5c06\u5b83\u4eec\u6309\u7167 $x$ \u5750\u6807\u6392\u5e8f\uff0c\u7136\u540e\u4ece\u5c0f\u5230\u5927\u626b\uff0c\u626b\u5230\u4e00\u4e2a\u8b66\u536b\u65f6\uff0c\u7531\u4e8e\u5df2\u7ecf\u6392\u597d\u5e8f\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u8003\u8651 $y$ \u5750\u6807\u4e86\u3002\n\n\u8003\u8651\u8fd9\u4e2a\u8b66\u536b\u5411\u54ea\u4e9b\u624b\u529e\u6d41\u6700\u4f18\u3002\u663e\u7136\u5f80 $y$ \u5c0f\u7684\u6d41\u6700\u4f18\uff08\u80fd\u591f\u770b\u5230\u7684\uff09\uff0c\u56e0\u4e3a $y$ \u8d8a\u5927\uff0c\u80fd\u6d41\u5230\u5b83\u7684\u6d41\u5c31\u66f4\u591a\uff0c\u6240\u4ee5\u8981\u5148\u6d41\u5c0f\u7684\u3002\n\n\u90a3\u4e48\u7528\u8fd9\u4e2a\u8d2a\u5fc3\u7b56\u7565\uff0c\u6211\u4eec\u5f00\u4e00\u4e2a $set$ \u5b58\u4e00\u4e0b\u5f53\u524d\u8fd8\u5b58\u5728\u7684\u624b\u529e\u7684 $y$ \u5750\u6807\u548c\u5269\u4f59\u7684\u6d41\u91cf\uff0c\u6bcf\u6b21\u7528 $set$ \u8d2a\u5fc3\u7684\u67e5\u627e\u8dd1\u6d41\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6$O(n \\log n)$\u3002\n\ncode\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define maxn 200010\nusing namespace std;\ntypedef long long ll;\nint read()\n{\n    int x=0,f=1;\n    char ch=getchar();\n    while(ch-'0'<0||ch-'0'>9){if(ch=='-') f=-1;ch=getchar();}\n    while(ch-'0'>=0&&ch-'0'<=9){x=x*10+ch-'0';ch=getchar();}\n    return x*f;\n}\nint n,m,h,w;\nstruct P{\n    ll x,y,v;\n}a[maxn],b[maxn];\nbool cmp(P a,P b)\n{\n    return a.x<b.x;\n}\nset<pair<ll,ll> >s;\nll ans;\nint main()\n{\n    n=read();m=read();w=read();h=read();\n    for(int i=1;i<=n;i++)\n    {\n        ll x=1ll*read()*h,y=1ll*read()*w,v=read();ans+=v;\n        a[i].x=x+y;a[i].y=x-y;a[i].v=v;\n    }\n    for(int i=1;i<=m;i++)\n    {\n        ll x=1ll*read()*h,y=1ll*read()*w,v=read();\n        b[i].x=x+y;b[i].y=x-y;b[i].v=v;\n    }\n    sort(a+1,a+n+1,cmp);sort(b+1,b+m+1,cmp);\n    int now=0;\n    for(int i=1;i<=m;i++)\n    {\n        while(now<n&&a[now+1].x<=b[i].x)  now++,s.insert(make_pair(a[now].y,a[now].v));\n        set<pair<ll,ll> >::iterator it=s.lower_bound(make_pair(b[i].y,0));\n        ll las=b[i].v;\n        while(las&&it!=s.end())\n        {\n            pair<ll,ll> x=*it;s.erase(it);\n            ll d=min(las,(ll)x.second);\n            las-=d;x.second-=d;ans-=d;\n            if(x.second)  s.insert(x);\n            else          it=s.lower_bound(make_pair(b[i].y,0));\n        }\n    }\n    cout<<ans<<endl;\n    return 0;\n}\n```",
        "postTime": 1585817097,
        "uid": 46396,
        "name": "justin_cao",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5996 \u3010[PA2014]Muzeum\u3011"
    }
]
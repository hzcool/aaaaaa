[
    {
        "content": "## \u524d\u8a00\n\n[\u9898\u76ee\u4f20\u9001\u95e8\uff01](https://www.luogu.com.cn/problem/P1415)\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff1f](https://www.luogu.com.cn/blog/liangbowen/solution-p1415)\n\n\u8fd9\u9898\u662f\u4e00\u9053\u633a\u597d\u7684 $\\texttt{dp}$ \u9898\u554a\uff0c\u4f46\u5927\u5bb6\u7684\u9898\u89e3\u90fd\u5199\u5f97\u4e0d\u591f\u8be6\u7ec6\u3002\n\n\u6240\u4ee5\uff0c\u6211\u6765\u8865\u4e00\u7bc7 $\\LaTeX$ \u9898\u89e3\uff0c\u5e0c\u671b\u80fd\u5e2e\u52a9\u5927\u5bb6\u3002\n\n## \u601d\u8def\n\n\u9996\u5148\u662f\u8bfb\u5165\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u8ba9\u5b57\u7b26\u4e32\u4e0b\u6807\u4ece $1$ \u5f00\u59cb\u3002\n\n```cpp\nstring a;\nint n; //\u5b57\u7b26\u4e32\u957f\u5ea6\u3002\nvoid Input()\n{\n\tcin >> a;\n\t//\u4e2a\u4eba\u4e60\u60ef\u5c06\u8d77\u70b9\u4e0b\u6807\u53d8\u4e3a 1 \u6765\u7b97\u3002\n\tn = a.length();\n\ta = '@' + a;\n}\n```\n\n\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u540e\u9762\u7528 $num(x, y)$ \u8868\u793a\u4e0b\u6807\u4e3a $[x, y]$ \u6240\u6784\u6210\u7684\u6570\u3002\n\n\u5bb9\u6613\u60f3\u5230\uff0c\u9898\u76ee\u5c31\u662f\u8981\u6211\u4eec\u6c42\u51fa\uff1a\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e\u7684**\u6700\u5927\u7ed3\u675f\u4e0b\u6807**\u3002\n\n\u8003\u8651\u5230\uff0c\u7b97\u8fd9\u4e2a\u4e4b\u524d\uff0c\u6211\u4eec\u8fd8\u5f97\u5148\u7b97\u4e00\u7b97\uff1a\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e\u7684**\u6700\u5c0f\u5f00\u59cb\u4e0b\u6807**\u3002\n\n\u5177\u4f53\u5730\uff0c\u8bbe $f_i$ \u8868\u793a\u5c06\u524d $i$ \u4f4d\u62c6\u6210\u9012\u589e\u6570\uff0c\u6700\u540e\u4e00\u4e2a\u6570**\u6700\u5c0f**\u4e3a $num(f_i, i)$\u3002\n\n\u60f3\u8981\u6700\u5c0f\uff0c\u5219 $f_i$ \u8981**\u5c3d\u53ef\u80fd\u5927**\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u753b\u4e00\u4e2a\u56fe\uff0c\u65b9\u4fbf\u63a8\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/51kbivoc.png)\n\n\u6240\u4ee5\uff0c\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5982\u4e0b\u3002\n$$\nf_i = \\max\\limits_{j=1}^{i}\\begin{cases}j & num(f_{j-1}, j-1) < num(j, i)\\\\1 & j = 1\\end{cases}\n$$\n\u8fd9\u91cc\uff0c\u6211\u4eec\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u5982\u4f55\u6bd4\u8f83\u4e24\u4e2a\u6570\u7684\u5927\u5c0f\uff1f\n\n\u9898\u89e3\u91cc\u7684\u89e3\u51b3\u529e\u6cd5\uff0c\u4ee3\u7801\u7a0d\u957f\uff0c\u63d0\u4f9b\u4e00\u79cd\u7b80\u5355\u7684\u6bd4\u8f83\u65b9\u5f0f\u3002\n\n1. \u5206\u79bb\u51fa $num(x, y)$\uff0c\u6ce8\u610f\u8981\u53bb\u9664\u524d\u5bfc $0$\u3002\n2. \u6bd4\u8f83\u4e24\u4e2a\u6570\uff08\u6ce8\u610f\u4e24\u4e2a\u6570\u5b9e\u9645\u4e0a\u4f7f\u7528 `string` \u5b58\u50a8\u7684\uff09\uff1a\n   + \u5982\u679c\u957f\u5ea6\u4e0d\u7b49\uff0c\u5219\u957f\u5ea6\u5c0f\u7684\u6570\u5c0f\u3002\n   + \u5982\u679c\u957f\u5ea6\u76f8\u7b49\uff0c\u76f4\u63a5\u6309\u5b57\u5178\u5e8f\u6bd4\u8f83\u5373\u53ef\u3002\n\n\u8fd9\u6837\u4ee3\u7801\u4f1a\u77ed\u5f88\u591a\u3002\n\n```cpp\nstring num(int x, int y)\n//\u5c06 a[i]~a[j] \u7684\u6570\u5206\u5272\u51fa\u6765\uff0c\u53bb\u9664\u524d\u5bfc 0\u3002\n{\n\tstring s = a.substr(x, y-x+1);\n\twhile (s.length() > 1 && s[0] == '0') s.erase(0, 1);\n\treturn s; \n}\nbool Less(string x, string y)\n//\u6bd4\u8f83 x \u4e0e y \u4e24\u4e2a\u6570\uff0c\u6ce8\u610f\u4e0d\u662f\u6bd4\u8f83\u5b57\u5178\u5e8f\u3002\n//\u5f53\u4e14\u4ec5\u5f53 x < y \u8fd4\u56de true\u3002 \n{\n\tif (x.length() != y.length()) return x.length() < y.length();\n\treturn x < y; //\u957f\u5ea6\u76f8\u7b49\uff0c\u5219\u5b57\u5178\u5e8f\u6bd4\u8f83\u7b49\u540c\u4e8e\u6570\u7684\u6bd4\u8f83\u3002 \n}\nbool cmp(int x1, int y1, int x2, int y2)\n//\u7b49\u540c\u4e8e\uff1a\u6bd4\u8f83 num(x1, y1) \u4e0e num(x2, y2) \u7684\u5927\u5c0f\u3002\n{\n\tstring t1 = num(x1, y1), t2 = num(x2, y2);\n\treturn Less(t1, t2);\n}\n```\n\n\u6709\u4e86\u8fd9\u4e2a `cmp()` \u51fd\u6570\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b8c\u6210\u7b2c\u4e00\u6b21\u52a8\u89c4\u3002\n\n```cpp\nint f[N];\nvoid DP1()\n{\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tfor (int j = i; j >= 2; j--) //\u4ece\u540e\u5f80\u524d\u679a\u4e3e\uff0c\u7b2c\u4e00\u6b21\u679a\u4e3e\u5230\u7684 j \u4e00\u5b9a\u662f\u6700\u5927\u7684\u3002\n\t\t\tif (cmp(f[j-1], j-1, j, i))\n\t\t\t{\n\t\t\t\tf[i] = j;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tif (f[i] == 0) f[i] = 1; //\u5982\u679c\u6ca1\u6709\u7b26\u5408\u7684\uff0c\u5219\u4ece\u5934\u5f00\u59cb\u7b97\u4e00\u4e2a\u3002 \n\t}\n}\n```\n\n\u63a5\u4e0b\u6765\uff0c\u5c31\u662f\u5904\u7406\u300e\u6700\u5c0f\u5f00\u59cb\u4e0b\u6807\u300f\u4e86\u3002\n\n\u8bbe $dp_i$ \u8868\u793a\u5c06 $[i, n]$ \u8fd9\u4e00\u6bb5\u62c6\u6210\u9012\u589e\u6570\uff0c\u7b2c\u4e00\u4e2a\u6570**\u6700\u5927**\u4e3a $num(i, f_i)$\u3002\n\n\u6211\u4eec\u518d\u753b\u4e00\u5f20\u56fe\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5oywjxf7.png)\n\n\u6240\u4ee5\uff0c\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5982\u4e0b\u3002\n$$\ndp_i = \\max\\limits_{j = i}^{f_n - 1}\\begin{cases}j & num(i, j) < num(j+1, dp_{j+1})\\end{cases}\n$$\n\u5e76\u4e14\u6709 $dp_{f[n]} = n$\u3002\n\n\u4f46\u662f\uff0c\u8fd9\u91cc\u5e76\u6ca1\u6709\u90a3\u4e48\u7b80\u5355\uff01\n\n\u5982\u679c\u4f60\u76f4\u63a5\u5c31\u8fd9\u6837\u6253\u4e86\uff0c\u53ef\u80fd\u53ea\u4f1a\u83b7\u5f97 $\\texttt{90pts}$\u3002\n\n\u9519\u8bef\u539f\u56e0\u662f\u540e\u9762\u7684 $0$ \u9020\u6210\u7684\u3002\n\n\u4e3e\u4f8b\u6765\u8bf4\uff0c\u6709\u4e00\u4e2a\u6570 $\\texttt{1234050}$\u3002\n\n\u5982\u679c\u5355\u7eaf\u8fd9\u6837\u505a\uff0c\u7ed3\u679c\u4e3a $\\texttt{1,2,3,40,50}$\u3002\n\n\u53d1\u73b0 $f_7 = 6$\uff0c\u6240\u4ee5\u521d\u59cb\u5316 $dp_6 = 7$\u3002\n\n\u4f46\u662f\uff0c\u7b2c $5$ \u4f4d\u662f $\\texttt{0}$\uff0c\u6839\u636e\u6837\u4f8b\uff0c$\\texttt{050}$ \u4e5f\u662f\u7b26\u5408\u7684\uff0c\u5e76\u4e14\u672b\u5c3e\u5143\u7d20\u4ecd\u7136\u6700\u5c0f\uff01\n\n\u663e\u7136\uff0c\u4fdd\u6301\u6700\u4f18\u89e3\u7684\u60c5\u51b5\u4e0b\uff0c\u4f4d\u6570\u591a\u4e00\u70b9\u66f4\u597d\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u5e94\u8be5\u4e5f\u8ba9 $dp_5 = 7$\u3002\n\n  \u8fd9\u6837\uff0c\u7ed3\u679c\u4e3a $\\texttt{12,34,050}$\u3002\n\n\u4ee3\u7801\u6bd4\u8f83\u597d\u6253\uff0c\u53ea\u9700\u8981\u6ce8\u610f\u6b64\u5904\u7684\u5224\u65ad\u5373\u53ef\u3002\n\n```cpp\nint dp[N];\nvoid DP2()\n{\n\tdp[f[n]] = n;\n    //\u5173\u952e\u6b65\u9aa4\uff0c\u589e\u6dfb\u6700\u540e\u4e00\u4e2a\u6570\u7684\u524d\u5bfc 0\u3002\n\tint pos = f[n];\n\tfor (pos = f[n]; pos-1 && a[pos-1] == '0'; pos--) dp[pos-1] = n;\n\tfor (int i = pos-1; i; i--) //\u5269\u4e0b\u7684\u5c31\u548c DP1() \u57fa\u672c\u76f8\u7b49\u3002\n\t\tfor (int j = f[n] - 1; j >= i; j--)\n\t\t\tif (cmp(i, j, j+1, dp[j+1]))\n\t\t\t{\n\t\t\t\tdp[i] = j;\n\t\t\t\tbreak;\n\t\t\t}\n}\n```\n\n\u5927\u529f\u544a\u6210\uff0c\u6700\u540e\u8f93\u51fa\u6bd4\u8f83\u5bb9\u6613\u4e86\u3002\n\n```cpp\nvoid Output()\n{\n\tstring ans = \"\"; //\u672c\u8d28\u5c31\u662f\u8f93\u51fa\u4e86\uff0c\u53ea\u4e0d\u8fc7\u8981\u5904\u7406\u672b\u5c3e\u9017\u53f7\u7f62\u4e86\u3002 \n\tfor (int i = 1; i <= n; i = dp[i] + 1)\n\t{\n\t\tfor (int j = i; j <= dp[i]; j++) ans += a[j];\n\t\tans += ',';\n\t}\n\tans.erase(ans.length()-1, 1); //\u64e6\u9664\u6700\u540e\u4e00\u4f4d\u9017\u53f7\u3002\n\tcout << ans; \n}\n```\n\n## \u4ee3\u7801\n\n\u5176\u5b9e\u4e0a\u9762\u5c31\u662f\u4ee3\u7801\u4e86\uff0c\u7ec4\u5408\u5728\u4e00\u8d77\u5373\u53ef\u3002\n\n\u4f46\u8fd8\u662f\u7ed9\u51fa\u5b8c\u6574\u4ee3\u7801\u3002\u5177\u4f53\u6ce8\u91ca\u53c2\u7167\u4e0a\u9762\u3002\n\n\u8fd9\u4efd\u5b8c\u6574\u4ee3\u7801\u4fdd\u7559\u7684\u6ce8\u91ca\u662f**\u8c03\u8bd5\u8bed\u53e5**\uff0c\u5927\u5bb6\u53ef\u4ee5\u770b\u4e00\u4e0b\u3002\n\n\u7801\u91cf\u4e0d\u5927\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#define N 505\nusing namespace std;\nstring a;\nint n;\nvoid Input()\n{\n\tcin >> a;\n\tn = a.length();\n\ta = '@' + a;\n}\nstring num(int x, int y)\n{\n\tstring s = a.substr(x, y-x+1);\n\twhile (s.length() > 1 && s[0] == '0') s.erase(0, 1);\n\treturn s; \n}\nbool Less(string x, string y)\n{\n\tif (x.length() != y.length()) return x.length() < y.length();\n\treturn x < y;\n}\nbool cmp(int x1, int y1, int x2, int y2)\n{\n\tstring t1 = num(x1, y1), t2 = num(x2, y2);\n\treturn Less(t1, t2);\n}\nint f[N];\nvoid DP1()\n{\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tfor (int j = i; j >= 2; j--)\n\t\t\tif (cmp(f[j-1], j-1, j, i))\n\t\t\t{\n\t\t\t\tf[i] = j;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tif (f[i] == 0) f[i] = 1;\n\t\t//printf(\"dp[%d] = %d.\\n\", i, dp1[i]);\n\t}\n\t/*\n\tfor (int i = 1; i <= n; i++) printf(\"f[%d] = %d.\\n\", i, f[i]);\n\tprintf(\"\\n\");  */\n}\nint dp[N];\nvoid DP2()\n{\n\tdp[f[n]] = n;\n\tint pos = f[n];\n\tfor (pos = f[n]; pos-1 && a[pos-1] == '0'; pos--) dp[pos-1] = n;\n\t//printf(\"pos = %d.\\n\", pos);\n\tfor (int i = pos-1; i; i--)\n\t\tfor (int j = f[n] - 1; j >= i; j--)\n\t\t\tif (cmp(i, j, j+1, dp[j+1]))\n\t\t\t{\n\t\t\t\tdp[i] = j;\n\t\t\t\t//printf(\"dp[%d] = %d.\\n\", i, dp2[i]);\n\t\t\t\tbreak;\n\t\t\t}\n\t//for (int i = 1; i <= n; i++) printf(\"dp[%d] = %d.\\n\", i, dp[i]);\n}\nvoid Output()\n{\n\tstring ans = \"\";\n\tfor (int i = 1; i <= n; i = dp[i] + 1)\n\t{\n\t\tfor (int j = i; j <= dp[i]; j++) ans += a[j];\n\t\tans += ',';\n\t}\n\tans.erase(ans.length()-1, 1);\n\tcout << ans; \n}\nint main()\n{\n    Input();\n    DP1();\n    DP2();\n    Output();\n    return 0;\n}\n```\n\n## \u5c3e\u58f0\n\n\u5efa\u8bae\u5927\u5bb6\u597d\u597d\u590d\u76d8\u4e00\u4e0b\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u3002\n\n\u987a\u4fbf\u7ed9\u51fa\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\n\n+ `cmp()` \u51fd\u6570\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u7ea6\u662f $O(n)$\uff0c\u5b9e\u9645\u8fd0\u884c\u65f6\u53ef\u4ee5\u7406\u89e3\u4e3a\u5e38\u6570\u3002\n+ \u4e24\u6b21 $\\texttt{DP}$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662f $O(n^2 \\times n = n^3)$\uff0c\u5b9e\u9645\u8fd0\u884c\u63a5\u8fd1 $O(n^2)$\u3002\n\n\u7801\u5b57\u4e0d\u6613\uff0c\u611f\u8c22\u5927\u5bb6\u89c2\u770b\uff0c\u5e0c\u671b\u80fd\u5e2e\u52a9\u5230\u5927\u5bb6\uff01\n\n",
        "postTime": 1655719979,
        "uid": 367488,
        "name": "liangbowen",
        "ccfLevel": 0,
        "title": "P1415 \u9898\u89e3"
    },
    {
        "content": "\u300a\u62c6\u5206\u6570\u5217\u300b\u89e3\u9898\u62a5\u544a\n\nBy lzn\n\u52a8\u6001\u89c4\u5212\u5e38\u89c4\u9898\u3002\n\n\u7b2c\u4e00\u6b65\u5148\u6c42\u51fa\u6700\u540e\u7684\u90a3\u4e2a\u6570\u6700\u5c0f\u4e3a\u591a\u5c11\u3002\uff08\u4e3a\u4e86\u53d9\u8ff0\u65b9\u4fbf\uff0c\u8bb0T(i,j)\u8868\u793a\u4ece\u539f\u6570\u5217\u4e0b\u6807i\u53d6\u5230j\u7684\u6570\u5b57\u7ec4\u6210\u7684\u6570\u3002\uff09\u53ea\u9700\u6b63\u5411dp\u4e00\u6b21\uff0cdp1[i]\u8868\u793a\u524di\u4e2a\u6570\u5b57\u5206\u6210\u4efb\u610f\u591a\u4e2a\u9012\u589e\u6570\u4e14\u6700\u540e\u7684\u6570\u6700\u5c0f\u65f6\uff0c\u6700\u540e\u7684\u6570\u4e3aT(dp1[i],i)\u3002\u5219dp1[i]=max(j)\uff0c(T(dp1[j-1],j-1)<T(j,i))\u3002\n\n\u7b2c\u4e8c\u6b65\u8981\u6c42\u6700\u540e\u4e00\u4e2a\u6570\u786e\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u524d\u9762\u7684\u6570\u5b57\u6309\u5b57\u5178\u5e8f\u5c3d\u91cf\u5927\u7684\u89e3\u3002\u7c7b\u4f3c\u4e0a\u9762\u7684\u65b9\u6cd5\u53cd\u5411\u52a8\u5f52\u4e00\u6b21\u5373\u53ef\u3002\n\n\u7b97\u6cd5\u590d\u6742\u5ea6o(l^3)\u3002\u7531\u4e8e\u6570\u636e\u5927\u90e8\u5206\u4e3a\u968f\u673a\uff0c\u5b9e\u9645\u8fd0\u884c\u6548\u7387\u63a5\u8fd1l^2\u3002\n",
        "postTime": 1375281801,
        "uid": 2,
        "name": "lzn",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "BLOG\u539f\u6587\uff1a[http://www.cnblogs.com/candy99/p/6070534.html](http://www.cnblogs.com/candy99/p/6070534.html)\n\n\n\u6211\u7684\u5b9e\u73b0\u662f\uff1a\n\n\n\u7b2c\u4e00\u6b65\uff0cd[i]\u8868\u793a\u4ee5i\u7ed3\u5c3e\u7684\u5e8f\u5217\u6700\u540e\u4e00\u4e2a\u6570\u6700\u5c0f\u7684\u8d77\u59cb\u4e0b\u6807d[i]\uff0c\u8f6c\u79fb\u540c\u4e0a\n\n\n\u7b2c\u4e8c\u6b65\uff0cf[i]\u8868\u793a\u4ecei\u5f00\u59cb\u7684\u5e8f\u5217\u7b2c\u4e00\u4e2a\u6570\u6700\u5927\u7684\u7ec8\u6b62\u4e0b\u6807f[i]\uff0c\u8f6c\u79fbf[i]=max{j|T(i,j)<T(j+1,f[j+1])}\n\n\n\u6253\u5370\u65f6\u4ece1\u5f00\u59cb\u6cbff\u8d70\u5c31\u884c\u4e86\n\n\n\u6ce8\u610f\uff1a\n\n\n1.\u5b57\u7b26\u4e32\u6bd4\u8f83\u5904\u7406\u524d\u5bfc0\uff0c\u5e76\u4e14\u6211\u5728\u9047\u5230\u51680\u4e32\u65f6\u8fd4\u56de\u4e86false\uff0c\u56e0\u4e3a\u8fd9\u6837\u7684\u5212\u5206\u4e0d\u5408\u6cd5\n\n\n2.\u521d\u59cb\u5316d[i]=1\n\n\n3.\u7b2c\u4e00\u6b2195\u5206\uff0c\u6709\u4e00\u4e2a\u6570\u636e1234050\uff0c\u6211\u7684\u7a0b\u5e8f\u65e0\u6cd5\u628a050\u5212\u5206\u6210\u4e00\u4e2a\n\n\n\u89e3\u51b3\u63aa\u65bd\u662f\u628a\u6700\u540e\u4e00\u4e2a\u6570\u524d\u9762\u7684\u524d\u5bfc0\u7684f\u503c\u90fd\u6307\u5411n\n\n\n \n\n\u7ecf\u9a8c\uff1a\n\n\n1.\u5206\u4e24\u6b65\u6c42\u89e3\n\n\n2.\u975e\u5e38\u7279\u522b\u7684\u72b6\u6001\u8868\u793a\uff0c\u65e0\u6cd5\u76f4\u63a5\u4fdd\u5b58\u6570\u7684\u5927\u5c0f\uff0c\u6240\u4ee5\u4fdd\u5b58\u5e8f\u5217\u4e2d\u4e0b\u6807\n\n\n3.\u5b57\u7b26\u5904\u7406\u6210\u6570\u5b57\u6ce8\u610f\u524d\u5bfc0\n\n\n\u4e0b\u9762\u9644\u4e0a\u4ee3\u7801\n\n    \n        \n\n    \n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\nusing namespace std;\ntypedef long long ll;\nconst int N=505,INF=2e9+5;\nchar s[N];\nint n,a[N];\nbool small(int l1,int r1,int l2,int r2){\n    while(l1<=r1&&a[l1]==0) l1++;\n    while(l2<=r2&&a[l2]==0) l2++;\n    if(r1-l1+1==0||r2-l2+1==0) return false;//hello\n    if(r1-l1+1<r2-l2+1) return true;\n    if(r1-l1+1>r2-l2+1) return false;\n    int len=r1-l1+1;\n    for(int i=0;i<len;i++){\n        if(a[l1+i]<a[l2+i]) return true;\n        if(a[l1+i]>a[l2+i]) return false;\n    }\n    return false;\n}\nint d[N];\nvoid dp1(){\n    for(int i=1;i<=n;i++){\n        d[i]=1;\n        for(int j=i;j>=1;j--)\n            if(small(d[j-1],j-1,j,i)) {d[i]=j;break;}\n    }\n    //for(int i=1;i<=n;i++) printf(\"d %d %d\\n\",i,d[i]);\n}\nint f[N];\nvoid dp2(){\n    f[d[n]]=n;int zero=d[n];\n    while(a[zero-1]==0) f[zero-1]=n,zero--;\n    for(int i=d[n]-1;i>=1;i--){\n        for(int j=d[n]-1;j>=i;j--)\n            if(small(i,j,j+1,f[j+1])) {f[i]=j;break;}\n    }\n    //for(int i=1;i<=n;i++) printf(\"f %d %d\\n\",i,f[i]);\n    //system(\"pause\");\n}\nint main(){\n    scanf(\"%s\",s+1);\n    n=strlen(s+1);\n    for(int i=1;i<=n;i++) a[i]=s[i]-'0';\n    dp1();\n    dp2();\n    int pos=1,flag=0;\n    while(pos<=n){//printf(\"pos %d %d\\n\",pos,f[pos]);\n        if(flag) putchar(',');\n        flag=1;\n        for(int i=pos;i<=f[pos];i++) printf(\"%d\",a[i]);\n        pos=f[pos]+1;\n    }\n}\n```",
        "postTime": 1479289252,
        "uid": 13863,
        "name": "thwfhk",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "\u7b2c\u4e00\u6b21dp\u51fa\u5904\u7406\u6700\u5c0f\u672b\u5c3e\u5bb9\u6613\u60f3\u51fa\u3002\u5173\u952e\u662f\u7528\u7b2c\u4e8c\u6b21dp\u6253\u5370\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u65b9\u6848\u3002\n\n\u7b2c\u4e00\u6b21\uff1a\n\nf[I]\u662f\u5904\u7406\u5230I\u7684\u6700\u5c0f\u672b\u5c3e\n\n\u7531\u4e8e\u6700\u5c0f\u672b\u5c3e\u662f\u4e2a\u5f88\u5927\u7684\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u4e0b\u6807\u6765\u8868\u793a\u51fa\u5b83\u3002\n\n\u7531\u4e8e\u8fd9\u4e2a\u6570\u4e00\u5b9a\u5728i\u7ec8\u6b62\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5b58\u5b83\u7684\u8d77\u59cb\u4f4d\u7f6e\u3002\n\n\u91cd\u65b0\u5b9a\u4e49\u72b6\u6001\uff1a\n\nf[I]\u662f\u5904\u7406\u5230I\u7684\u6700\u5c0f\u672b\u5c3e\u7684\u8d77\u59cb\u4e0b\u6807\n\n$$f[I]=max(j) | num(I,j)>num(f[j-1],j-1) , 1\\leq j\\leq i$$\n\n\u6ce8\u610fcmp\u51fd\u6570\u7684\u7f16\u5199\u8981\u5904\u7406\u524d\u5bfc\u96f6\n\n\u7b2c\u4e8c\u6b21\uff1a\n\n\u540c\u7406\uff0cf2[I]\u662f\u4ecen\u5904\u7406\u5230I\u7684\u6700\u5927\u672b\u5c3e\u7684\u7ed3\u675f\u4e0b\u6807\n\n$$f[I]=max(j) | num(I,j)<num(f[j+1],j+1), I\\leq j\\le f[n]$$\n\n\u5176\u4e2d\u521d\u59cb\u5316$f2[f[n]]=n$\n\n\n\u6709\u4e00\u4e2a\u5751\u70b9\u3002\u5373[1-9]\u4e0d\u80fd\u4e0e\u6700\u540e\u4e00\u4e2a\u6570\u5408\u5e76\u6210\u4e00\u4e2a\u6570\uff0c\u800c0\u53ef\u4ee5\u3002\n\n\u5982\u679c\u7b2c\u4e00\u6b21dp\u8ba1\u7b97\u51fa\u6700\u5c0f\u672b\u5c3e\u4e3a50\uff0c\u4f46\u8f93\u5165\u662f\u2026\u202600050\u3002\n\n\u8fd9\u6837\u4e0a\u9762\u7684\u8f6c\u79fb\u65b9\u7a0b\u4e0d\u4f1a\u5c06000\u548c50\u5206\u6210\u4e00\u7ec4\uff0c\u56e0\u4e3a$I\\leq j\\le f[n]$\u3002\n\n\u8fd9\u6837000\u6240\u5728\u72b6\u6001\u5c31\u548c\u72b6\u6001\u5b9a\u4e49\u4e0d\u7b26\uff0c\u5b83\u6ca1\u8868\u793a\u51fa\u6700\u5927\u672b\u5c3e\u3002\n\n\u56e0\u6b64dp\u524d\u5148\u5c06\u6700\u540e\u4e00\u4e2a\u6570\u7684\u524d\u5bfc\u96f6\u5168\u90e8\u7279\u5224\u3002\n\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n//#define DBG\nusing std::min;\nusing std::max;\nconst int LEN=510;\nchar str[LEN];\nint f[LEN],n,t1[LEN],t2[LEN],f2[LEN];\nvoid shownum(int a,int b){\n    for(int i=a;i<=b;i++) printf(\"%d\",str[i]);\n}\nint cmp1(int a,int b,int c,int d){\n    if(d==0) return 1;\n    memset(t1,0,sizeof(t1));\n    memset(t2,0,sizeof(t2));\n    int l1=0,l2=0;\n    for(int i=b;i>=a;i--) t1[++l1]=str[i];\n    for(int i=d;i>=c;i--) t2[++l2]=str[i];\n    #ifdef DBG\n    int i=l1;\n    while(i>=1&&!t1[i]) i--;\n    for(;i>=1;i--) printf(\"%d\",t1[i]);\n    printf(\" cmp \");\n    i=l2;\n    while(i>=1&&!t2[i]) i--;\n    for(;i>=1;i--) printf(\"%d\",t2[i]);\n    #endif\n    l1=max(l1,l2);\n    for(int i=l1;i;i--) if(t1[i]!=t2[i]) return t1[i]>t2[i];\n    return -1;\n}\nint cmp(int a,int b,int c,int d){\n    int ret=cmp1(a,b,c,d);\n    #ifdef DBG\n    printf(\" --> %d\\n\",ret);\n    #endif\n    return ret;\n}\nint main(){\n    scanf(\"%s\",str+1);\n    for(int i=1;str[i];i++,n++) str[i]-='0';\n    for(int i=1;i<=n;i++) {\n        f[i]=1;\n        for(int j=i;j>=1;j--){\n            if(cmp(j,i,f[j-1],j-1)==1) {\n                f[i]=max(f[i],j);\n                break;\n            }\n        }\n    }\n    f2[f[n]]=n;\n    int cnt=0;\n    for(int i=f[n]-1;i&&!str[i];i--) f2[i]=n,cnt++;\n    for(int i=f[n]-1-cnt;i>=1;i--){\n        f2[i]=i;\n        for(int j=f[n]-1;j>=i;j--){\n            if(cmp(i,j,j+1,f2[j+1])==0)\n                f2[i]=max(f2[i],j);\n                break;\n        }\n    }\n    int pos=1;\n    bool flg=1;\n    while(pos<=n){\n        if(flg) flg=0;\n        else printf(\",\");\n        shownum(pos,f2[pos]);\n        pos=f2[pos]+1;\n    }\n}\n```",
        "postTime": 1475082171,
        "uid": 15183,
        "name": "Rapiz",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "\u672c\u6765\u4e5f\u4e0d\u662f\u5f88\u61c2\uff0c\u5199\u4e86\u597d\u4e45\uff0c\u6539\u4e86\u597d\u4e45\n\n\u4e89\u53d6\u5199\u4e2a\u9898\u89e3\u8ba9\u5927\u5bb6\u80fd\u7b80\u5355\u7406\u89e3\n\n\u9996\u5148\u5206\u4e24\u6b65\n\n\u7b2c\u4e00\u6b65\u5148\u7528\u6b63\u5411DP\u6c42\u51fa\u6700\u5c0f\u7ed3\u5c3e\uff0c\u8fd9\u4e2a\u5f88\u5bb9\u6613\u7406\u89e3\uff0cf[ i ]\u8868\u793a\u4ee5 i \u4e3a\u7ed3\u5c3e\u7684\u6570\u5b57\u7684\u6700\u5c0f\u7ed3\u5c3e\u7684\u5f00\u5934\uff0c\u6613\u8bc1\uff0c\u5982\u679c\u8981\u6700\u5c0f\uff0c\u8fd9\u4e2aj\u80af\u5b9a\u6700\u9760\u8fd1i\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4ecei\u5411\u524d\u679a\u4e3ej,\u5982\u679c\u6709\u4e00\u4e2a j \u4f7ff[ j ] \u5230 j - 1 \u6bd4 j \u5230 i \u5c0f\uff0c\u8bf4\u660e j \u5230 i\u53ef\u4ee5\u63a5\u5728f[ j ] \u5230 j - 1\u7684\u540e\u9762\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u63a5\u4e0a\n\u4ee3\u7801\n```cpp\nfor(int i = 1;i <= len;i ++){\n\t\tf[i] = 1;\n\t\tfor(int j = i;j >= 2;j --){\n\t\t\tif(compare(f[j - 1],j - 1,j,i)){\n\t\t\t\tf[i] = max(j,f[i]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n```\n\n\u7136\u540e\u662f\u7b2c\u4e8c\u6b65\n\n\u8fd9\u9053\u9898\u8981\u6c42\u6700\u5c0f\u5b57\u5178\u5e8f\uff0c\u6211\u4eec\u5f97\u53cd\u8fc7\u6765\u8003\u8651\uff0c\u5982\u679c\u4e00\u4e2a\u6570\u5b57\u5178\u5e8f\u6700\u5927\uff0c\u5c31\u662f\u5f00\u5934\u6700\u5927\uff0c\u6211\u4eec\u7528dp[ i ]\u8868\u793a\u4ece i \u5230 dp[i] \u662f\u5b57\u5178\u5e8f\u6700\u5927\uff0c\u5982\u679c\u8981\u5b57\u5178\u5e8f\u6700\u5927\uff0c\u540c\u6837 \u8fd9\u4e2a j \u8981\u79bb i \u66f4\u8fdc\uff0c\u6240\u4ee5\u4ece\u7ed3\u5c3e\u5f00\u59cb\u679a\u4e3e j\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a j \u4f7f\u4ece i \u5230 j \u6bd4 j + 1 \u5230 dp[j + 1]\u5927 \u8bf4\u660e i \u5230 j \u80fd\u63a5\u5230 j + 1 \u7684\u6700\u5927\u5b57\u5178\u5e8f\u4e4b\u524d\uff0c\u5c31\u76f4\u63a5\u63a5\u4e0a\n\n\u4ee3\u7801\n```cpp\nint cnt = 0;\n\tfor(int i = f[len] - 1;i;i --){//\u8fd9\u8fb9\u8981\u7279\u6b8a\u5904\u7406\u96f6\u7684\u60c5\u51b5\uff0c\u6700\u540e\u4e00\u4f4d\u7684\u6240\u6709\u96f6\u90fd\u80fd\u76f4\u63a5\u5230\u8fbe\u6700\u540e\n\t\tif(s[i - 1] == '0'){\n\t\t\tdp[i] = len;\n\t\t\tcnt ++;\n\t\t}\n\t\telse break;\n\t}\n\tdp[f[len]] = len;\n\tfor(int i = f[len] - 1 - cnt;i >= 1;i --){\n\t\tdp[i] = i;\n \t\tfor(int j = f[len] - 1;j >= i;j --){\n \t\t\tif(compare(i,j,j + 1,dp[j + 1])){\n \t\t\t\tdp[i] = max(j,dp[i]);\n \t\t\t\tbreak;\n\t\t\t }\n\t\t}\n\t}\n```\n\u6bd4\u8f83\u51fd\u6570\u4e5f\u8981\u7279\u6b8a\u5904\u7406\u96f6\u7684\u60c5\u51b5\uff0c\u53bb\u9664\u524d\u5bfc\u96f6\n\n\u4e0a\u4ee3\u7801\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nconst int M = 500;\nint f[M + 5];\nint dp[M + 5];\n//int ch[M + 5];\nstring s;\nint compare(int l,int r,int l_1,int r_1){\n\tl --;r --;l_1 --;r_1 --;\n\twhile(s[l] == '0' && l <= r) l ++;\n\twhile(s[l_1] == '0' && l_1 <= r_1) l_1 ++;\n\t\n\tif(r - l + 1 > r_1 - l_1 + 1) return false;\n\tif(r - l + 1 < r_1 - l_1 + 1) return true;\n\tfor(int i = l;i <= r;i ++){\n\t\tif(s[i] > s[l_1 + i - l]) return false;\n\t\tif(s[i] < s[l_1 + i - l]) return true;\n\t}\n\treturn false;\n}\nint main(){\n\tcin >> s;\n\tint len = s.size();\n\t/*for(int i = 1;i <= s.size();i ++){\n\t\tch[i] = s[i - 1] - '0';\n\t}*/\n\tfor(int i = 1;i <= len;i ++){\n\t\tf[i] = 1;\n\t\tfor(int j = i;j >= 2;j --){\n\t\t\tif(compare(f[j - 1],j - 1,j,i)){\n\t\t\t\tf[i] = max(j,f[i]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t/*for(int i = 1;i <= len;i ++){\n\t\tprintf(\"%d \",f[i]);\n\t}*/\n\tint cnt = 0;\n\tfor(int i = f[len] - 1;i;i --){\n\t\tif(s[i - 1] == '0'){\n\t\t\tdp[i] = len;\n\t\t\tcnt ++;\n\t\t}\n\t\telse break;\n\t}\n\tdp[f[len]] = len;\n\tfor(int i = f[len] - 1 - cnt;i >= 1;i --){\n\t\tdp[i] = i;\n \t\tfor(int j = f[len] - 1;j >= i;j --){\n \t\t\tif(compare(i,j,j + 1,dp[j + 1])){\n \t\t\t\tdp[i] = max(j,dp[i]);\n \t\t\t\tbreak;\n\t\t\t }\n\t\t}\n\t}\n\t/*for(int i = 1;i <= len;i ++){\n\t\tprintf(\"%d\",dp[i]);\n\t}*/\n\tint pos = 1;\n\twhile(pos <= len){\n\t\tfor(int i = pos;i <= dp[pos];i ++){\n\t\t\tputchar(s[i - 1]);\n\t\t}\n\t\tif(dp[pos] != len){\n\t\t\tprintf(\",\");\n\t\t}\n\t\tpos = dp[pos] + 1;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1567129136,
        "uid": 54135,
        "name": "king_more",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "\u6211\u6709N2logN\u7b97\u6cd5\u3002\u867d\u7136\u8dd1\u7684\u65f6\u95f4\u5f88\u957f\u3002\u6700\u540e\u4e00\u4e2a\u70b9\u6709400ms\uff0c\u4f46\u662f\u771f\u7684\u662fN2\u7b97\u6cd5\u3002\u53ef\u80fd\u662f\u5404\u79cd\u9884\u5904\u7406\u548c\u540e\u7eed\u5904\u7406\u592a\u8d39\u65f6\u95f4\u3002\n\n\n\u6570\u7ec4F[I,J]\u8868\u793a\u603b\u5171\u4f7f\u7528\u4e86J\u4e2a\u9017\u53f7\uff0c\u5176\u4e2d\u7b2cJ\u4e2a\u5728\u7b2cI\u4e2a\u540e\u9762\uff0c\u8fd9\u65f61..I\u7684\u5b57\u7b26\u62c6\u5206\u540e\u7684\u6700\u540e\u4e00\u9879\uff0c\u5c31\u662f\u6700\u5927\u7684\u90a3\u4e00\u9879\u3002N3\u7b97\u6cd5\u3002\u5f97\u4e8690\u5206\u3002\n\n\u6ce8\u610f\u8981\u81ea\u5df1\u5b9a\u4e49 \u5b57\u7b26\u4e32\u6bd4\u8f83\u51fd\u6570\u3002\n\n\n\u8fd9\u91cc\u60f3\u8981\u8bb2\u4e00\u4e2a\u4f18\u5316\uff0c\u53ef\u4ee5\u8ba9\u590d\u6742\u5ea6\u4e0b\u964d\u4e00\u4e2a\u7ef4\u5ea6\uff0c\u8bf7\u5148\u770b90\u5206\u7684\u4ee3\u7801\uff1a\n\n90\u4ee3\u7801\uff1a\n\n```delphi\n\nvar f:array[0..500,0..500]of ansistring;\nvar ss:ansistring;\nvar chushihua:ansistring;\nvar ans:ansistring;\nvar shuchu:ansistring;\nvar i,j,m,n,len,k:longint;\nfunction min(aa,bb:ansistring):ansistring;//\u7528\u4e8e\u66f4\u65b0F\u5143\u7d20\u3002\nvar la,lb,i,j:longint;\nvar aaa,bbb:ansistring;\nbegin\nif aa=chushihua then exit(bb);\nla:=length(aa);\nlb:=length(bb);\naaa:=aa;\nbbb:=bb;\nwhile (la>=1)and(aaa[1]='0') do begin delete(aaa,1,1);dec(la);end;//\u53bb\u9664\u524d\u5bfc0\nwhile (lb>=1)and(bbb[1]='0') do begin delete(bbb,1,1);dec(lb);end;\nla:=length(aaa);\nlb:=length(bbb);\nif la>lb then exit(bb);\nif lb>la then exit(aa);//\u4f18\u5148\u8f93\u51fa\u957f\u5ea6\u957f\u7684\nif la=lb then\nbegin\nif aaa>bbb then exit(bb);\nif aaa<bbb then exit(aa);\nif aaa=bbb then\nbegin\nif la<lb then exit(aa)\nelse exit(bb);//\u5982\u679caa\u548cbb\u6570\u503c\u4e0a\u76f8\u7b49\uff0c\u4f46\u662f\u6709\u4e0d\u540c\u4f4d\u6570\u7684\u524d\u5bfc0\uff0c\u90a3\u4e48\u8f93\u51fa\u524d\u5bfc0\u5c0f\u7684\u3002\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u8ba9\u524d\u9762\u7684\u6570\u66f4\u591a\uff0c\n                 //\u4ece\u800c\u524d\u9762\u7684\u6570  \u53ef\u4ee5\u66f4\u5927\nend;\nend;\nend;\nfunction dayu(s1,s2:ansistring):boolean;//\u8f6c\u79fb\u65f6\u7684\u5224\u65ad\nvar la,lb,i,j:longint;\nvar ss1,ss2:ansistring;\nbegin\nla:=length(s1);\nlb:=length(s2);\nss1:=s1;\nss2:=s2;\nwhile (la>=1)and(ss1[1]='0') do begin delete(ss1,1,1);dec(la);end;\nwhile (lb>=1)and(ss2[1]='0') do begin delete(ss2,1,1);dec(lb);end;\nif la>lb then exit(true);\nif la<lb then exit(false);\nif la=lb then\nbegin\nif ss1>ss2 then exit(true)\nelse exit(false);\nend;\nend;\n\n\nbegin\nread(ss);\nlen:=length(ss);\nfor i:=1 to len do\nchushihua:=chushihua+'9';\nfor i:=0 to len do\nfor j:=0 to len do\nf[i,j]:=chushihua;\nfor i:=1 to len do\nf[i,1]:=copy(ss,1,i);//\u521d\u59cb\u5316\n\nfor j:=2 to len do\nbegin\n//abc:=false;\nfor i:=j to len do//\u7528\u4e86J\u4e2a\u9017\u53f7\u7684\u65f6\u5019\uff0c\u7b2c\u4e00\u4e2a\u5b57\u7b26\u5e94\u8be5\u662f\u7b2cJ\u4e2a\uff08if can\uff09\nfor k:=j-1 to i-1 do//\u7528    \u7528\u4e86J-1\u4e2a\u9017\u53f7\uff0c\u7b2cJ-1\u4e2a\u9017\u53f7\u5728J-1..I-1\u4f4d\u7f6e\u7684\u72b6\u6001\u8f6c\u79fb\u672c\u72b6\u6001\nif dayu(copy(ss,k+1,i-k),f[k,j-1]) then\nf[i,j]:=min(f[i,j],copy(ss,k+1,i-k));\nif f[len,j]=chushihua then begin n:=j; break; end;//\u5982\u679c\u67d0\u4e00\u4e2a\u72b6\u6001\u5168\u4f53\u4e0d\u5408\u6cd5\uff0c\u90a3\u4e48\u5f97\u5230\u53ef\u4ee5\u52a0\u5165\u7684\u6700\u591a\u4e2a\u9017\u53f7\u6570\nend;\nif n=0 then n:=len;\n\n//for j:=1 to len do\n//for i:=1 to len do\n//writeln('f[',i,',',j,']=',f[i,j]);\n\n\nans:=chushihua;\nfor i:=n downto 1 do\nans:=min(ans,f[len,i]);//\u641c\u7d22\u6700\u540e\u4e00\u4e2a\u6570\u6700\u5c0f\nfor i:=1 to n do\nif f[len,i]=ans then//\u641c\u7d22\u7b2c\u4e00\u4e2a\u6700\u4f18\u7b54\u6848\uff0c\u56e0\u4e3a\u9017\u53f7\u7528\u7684\u5c11\uff0c\u90a3\u4e48\u6570\u5b57\u5c31\u76f8\u5bf9\u5927\nbegin\nm:=i;\nbreak;\nend;\ni:=len;\nrepeat//\u5904\u7406\u8f93\u51fa\nshuchu:=','+f[i,m]+shuchu;\ni:=i-length(f[i,m]);\nm:=m-1;\nuntil m=0;\ndelete(shuchu,1,1);//\u5220\u6389\u524d\u5bfc\u9017\u53f7\nwriteln(shuchu);\n\n\n\nend.\n\n```\n\u7b97\u6cd5\u7684\u6b63\u786e\u6027\u65e0\u7591\u3002\u5927\u81f4\u601d\u60f3\u662ff\u4e2d\u8bb0\u5f55\u7684\u662f\u5206\u5217\u5f00\u6bcf\u4e00\u9879\uff0c\u5982\u679c\u6211\u4eec\u77e5\u9053\u4e86\u6700\u540e\u4e00\u9879\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u77e5\u9053\u524d\u4e00\u4e2a\u9017\u53f7\u51fa\u73b0\u5728\u90a3\u91cc\uff0c\u7136\u540e\u8bfb\u53d6\u524d\u4e00\u4e2a\u4f4d\u7f6e\u7684f\u4e2d\u7684\u503c\uff0c\u4e8e\u662f\u77e5\u9053\u4e86\u5206\u5217\u5f00\u7684\u524d\u4e00\u9879\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u4fbf\u77e5\u9053\u4e86\u6574\u4e2a\u5e8f\u5217\u3002\n\n\n\n\n\u90a3\u4e48\u6211\u4eec\u7531\u4e0a\u9762\u7684\u5173\u4e8emin\u51fd\u6570\u6bd4\u8f83\u5b57\u7b26\u4e32\u7684\u90e8\u5206\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff1a\u5982\u679c\u5206\u88c2\u7684\u9879\u6709\u524d\u5bfc0\uff0c\u90a3\u4e48\u8ba90\u5c3d\u91cf\u5c11\uff0c\u5982\u679c\u6ca1\u6709\u524d\u5bfc0\uff0c\u90a3\u4e48\u8ba9\u8fd9\u4e00\u9879\u5c3d\u91cf\u5c0f\uff0c\u4e8e\u662f\u6211\u4eec\u6ca1\u5fc5\u8981\u5728\u8f6c\u79fbf[i,j]\u7684\u65f6\u5019\u67e5\u8be2f[j-1..i-1,j]\u8fd9\u6240\u6709\u7684\u503c\uff0c\u53ea\u9700\u8981\u4ecei-1..j-1\u5012\u7740\u5f80\u524d\u627e\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a\u8f6c\u79fb\u503c\u5c31\u662f\u6700\u4f18\u7684\uff0c\u7136\u540ebreak\u5373\u53ef\u3002\u4e8e\u662f\u6709\u4e86\u4e00\u4e2a\u5f3a\u529b\u526a\u679d\u3002\u51e0\u4e4e\u628aN\u964d\u6210\u4e86K(\u6211\u4eec\u671f\u671bK<log2 N)\u3002\n\nAC\u4ee3\u7801\uff1a\n\n```delphi\n\nvar f:array[0..500,0..500]of ansistring;\nvar ss:ansistring;\nvar chushihua:ansistring;\nvar ans:ansistring;\nvar shuchu:ansistring;\nvar i,j,m,n,len,k:longint;\nfunction min(aa,bb:ansistring):ansistring;\nvar la,lb,i,j:longint;\nvar aaa,bbb:ansistring;\nbegin\nif aa=chushihua then exit(bb);\nla:=length(aa);\nlb:=length(bb);\naaa:=aa;\nbbb:=bb;\nwhile (la>=1)and(aaa[1]='0') do begin delete(aaa,1,1);dec(la);end;\nwhile (lb>=1)and(bbb[1]='0') do begin delete(bbb,1,1);dec(lb);end;\nla:=length(aaa);\nlb:=length(bbb);\nif la>lb then exit(bb);\nif lb>la then exit(aa);\nif la=lb then\nbegin\nif aaa>bbb then exit(bb);\nif aaa<bbb then exit(aa);\nif aaa=bbb then\nbegin\nif la<lb then exit(aa)\nelse exit(bb);\nend;\nend;\nend;\nfunction dayu(s1,s2:ansistring):boolean;\nvar la,lb,i,j:longint;\nvar ss1,ss2:ansistring;\nbegin\nla:=length(s1);\nlb:=length(s2);\nss1:=s1;\nss2:=s2;\nwhile (la>=1)and(ss1[1]='0') do begin delete(ss1,1,1);dec(la);end;\nwhile (lb>=1)and(ss2[1]='0') do begin delete(ss2,1,1);dec(lb);end;\nif la>lb then exit(true);\nif la<lb then exit(false);\nif la=lb then\nbegin\nif ss1>ss2 then exit(true)\nelse exit(false);\nend;\nend;\n\n\nbegin\nread(ss);\nlen:=length(ss);\nfor i:=1 to len do\nchushihua:=chushihua+'9';\n//chushihua:='max';\nfor i:=0 to len do\nfor j:=0 to len do\nf[i,j]:=chushihua;\nfor i:=1 to len do\nf[i,1]:=copy(ss,1,i);\nfor j:=2 to len do\nbegin\n//abc:=false;\nfor i:=j to len do\nfor k:=i-1 downto j-1 do\nif dayu(copy(ss,k+1,i-k),f[k,j-1]) then\nbegin\n//f[i,j]:=min(f[i,j],copy(ss,k+1,i-k));\n//if f[i,j]<>chushihua then break;\nf[i,j]:=copy(ss,k+1,i-k);\nbreak;\nend;\nif f[len,j]=chushihua then begin n:=j; break; end;\nend;\nif n=0 then n:=len;\n\n//for j:=1 to len do\n//for i:=1 to len do\n//writeln('f[',i,',',j,']=',f[i,j]);\n\n\n\nans:=chushihua;\nfor i:=n downto 1 do\nans:=min(ans,f[len,i]);\nfor i:=1 to n do\nif f[len,i]=ans then\nbegin\nm:=i;\nbreak;\nend;\ni:=len;\nrepeat\nshuchu:=','+f[i,m]+shuchu;\ni:=i-length(f[i,m]);\nm:=m-1;\nuntil m=0;\ndelete(shuchu,1,1);\nwriteln(shuchu);\n\n\n\nend.\n\n```\n\n",
        "postTime": 1445351232,
        "uid": 2266,
        "name": "\u51ef\u7279\u7433",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "\u5f88\u591a\u9898\u89e3\u90fd\u662f\u88ab\u8fd9\u4e2a\u4e25\u683c\u9012\u589e\u7684\u6761\u4ef6\u5361\u6389\u4e86\n\n\u7ed9\u51fa\u4e00\u7ec4\u6570\u636e\uff1a6666666666\n\n\u6b63\u786e\u8f93\u51fa\u5e94\u8be5\u662f6\uff0c66\uff0c666\uff0c6666\n\n\u800c\u4e0d\u662f6\uff0c6\uff0c6\uff0c6\uff0c6\uff0c6\uff0c6\uff0c6\uff0c6\uff0c6\n\n\u6240\u4ee5\u5728\u5224\u65ad\u6570\u5b57\u5927\u5c0f\u7684\u65f6\u5019\u4e00\u5b9a\u628a\u5927\u4e8e\u5c0f\u4e8e\u7b49\u4e8e\u4e09\u79cd\u60c5\u51b5\u5206\u6e05\n\ndp\u8f6c\u79fb\u5176\u4ed6\u9898\u89e3\u5e94\u8be5\u8bb2\u5f97\u90fd\u5f88\u6e05\u695a\u4e86\n\n\u7b2c\u4e00\u904d\u662f\u5904\u7406\u51faf[i],\u8868\u793a\u5904\u7406\u5230i\u7684\u5c3e\u6570\u7684\u8d77\u70b9\n\n\u7b2c\u4e8c\u904d\u662f\u5904\u7406\u51fadp[i],\u8868\u793a\u4ecen\u5904\u7406\u5230i\u7684\u5c3e\u6570\u6700\u5c0f\u65f6\u7684\u5c3e\u6570\u7684\u8d77\u70b9\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nchar s[510];\nint num[510];\nint t1[510],t2[510];\nint f[510],dp[510];\nint cmp(int l1,int r1,int l2,int r2)\n{//\u5224\u65ad\u5927\u5c0f return 3\u8868\u793a\u5927\u4e8e return 2\u8868\u793a \u5c0f\u4e8e return 1\u8868\u793a\u7b49\u4e8e\n\tif(r2==0)\n\t{\n\t\treturn 3;\n\t}\n\tmemset(t1,0,sizeof(t1));\n\tmemset(t2,0,sizeof(t2));\n\tint len1=0;\n\tint len2=0;\n\tfor(int i=r1;i>=l1;i--)\n\t{\n\t\tt1[++len1]=num[i];\n\t}\n\tfor(int i=r2;i>=l2;i--)\n\t{\n\t\tt2[++len2]=num[i];\n\t}\n\tint maxlen=max(len1,len2);\n\tfor(int i=maxlen;i>0;i--)\n\t{\n\t\tif(t1[i]!=t2[i])\n\t\t{\n\t\t\tif(t1[i]>t2[i])\n\t\t\t{\n\t\t\t\treturn 3;\n\t\t\t}\n\t\t\tif(t1[i]<t2[i])\n\t\t\t{\n\t\t\t\treturn 2;\n\t\t\t}\n\t\t}\n\t}\n\treturn 1;\n}\nint main()\n{\n//\tfreopen(\"testdata.in\",\"r\",stdin);\n\tscanf(\"%s\",s);\n\tint len=strlen(s);\n\tfor(int i=0;i<len;i++)\n\t{\n\t\tnum[i+1]=s[i]-'0';\n\t}\n\tfor(int i=1;i<=len;i++)\n\t{\n\t\tf[i]=1;\n\t\tfor(int j=i;j>=1;j--)\n\t\t{\n\t\t\tif(cmp(j,i,f[j-1],j-1)==3)\n\t\t\t{\n\t\t\t\tf[i]=max(f[i],j);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tdp[f[len]]=len;\n\tint cnt=0;\n\tfor(int i=f[len]-1;i>0&&!num[i];i--)\n\t{\n\t\tdp[i]=len;\n\t\tcnt++;\n\t}\n\tfor(int i=f[len]-1-cnt;i>0;i--)\n\t{\n\t\tdp[i]=i;\n\t\tfor(int j=f[len]-1;j>=i;j--)\n\t\t{\n\t\t\tif(cmp(i,j,j+1,dp[j+1])==2)\n\t\t\t{\n\t\t\t\tdp[i]=max(dp[i],j);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tint pos=1;\n\tbool flag=true;\n\twhile(pos<=len)\n\t{\n\t\tif(flag)\n\t\t{\n\t\t\tflag=false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tprintf(\",\");\n\t\t}\n\t\tfor(int i=pos;i<=dp[pos];i++)\n\t\t{\n\t\t\tprintf(\"%d\",num[i]);\n\t\t}\n\t\tpos=dp[pos]+1;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1541729758,
        "uid": 63258,
        "name": "Warriorszx",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "\u7b2c\u4e00\u6b21\u4ece\u524d\u5f80\u540edp,dp[i]\u8868\u793a\u5305\u62ec\u7b2ci\u4f4d\u5f80\u524d\u7684\uff0c\u6ee1\u8db3\u9898\u76ee\u8981\u6c42\u80fd\u5f97\u5230\u7684\u6700\u5c0f\u957f\u5ea6\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u6c42\u51fa\uff0c\u6700\u540e\u4e00\u4e2a\u6700\u5c0f\u7684\u6ee1\u8db3\u7684\u6570\u4e86\u3002\n\n\u6c42\u51fa\u6700\u540e\u4e00\u4e2a\u6700\u5c0f\u7684\u6570\u540e\uff0c\u4ece\u540e\u5f80\u524ddp,dp[i]\u8868\u793a\u4ece\u7b2ci\u4f4d\u5f00\u59cb\u5f80\u540e\uff0c\u5728\u6ee1\u8db3\u9898\u76ee\u8981\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u80fd\u5f97\u5230\u7684\u6700\u5927\u957f\u5ea6\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u6c42\u51fa\uff0c\u6309\u987a\u5e8f\u4f9d\u6b21\u6700\u5927\u7684\u4e86\u3002\n\n```c\n\n#include<iostream>\n#include<cmath>\n#include<cstdio>\n#include<sstream>\n#include<cstdlib>\n#include<string>\n#include<cstring>\n#include<algorithm>\n#include<vector>\n#include<map>\n#include<set>\n#include<stack>\n#include<list>\n#include<queue>\n#include<ctime>\n#include<bitset>\n#define eps 1e-6\n#define INF 0x3f3f3f3f\n#define PI acos(-1.0)\n#define ll __int64\n#define LL long long\n#define lson l,m,(rt<<1)\n#define rson m+1,r,(rt<<1)|1\n#pragma comment(linker, \"/STACK:1024000000,1024000000\")\nusing namespace std;\n \n#define Maxn 90\nchar sa[Maxn];\nint dp[Maxn];\n \nbool isgreater(int i,int j,int m,int n) //\u5224\u65ad\u4ecei~j\u7684\u4e32\u662f\u5426\u5927\u4e8e\u4ecem~n\u7684\u4e32\n{\n    while(sa[i]=='0'&&i<=j) //\u53bb\u6389\u524d\u5bfc0\n        i++;\n    while(sa[m]=='0'&&m<=n)//\u53bb\u6389\u524d\u5bfc0\n        m++;\n    if(i>j) //\u524d\u8005\u4e3a0\n        return false;\n    if(m>n) //\u540e\u8005\u4e3a0\n        return true;\n    int a=j-i+1,b=n-m+1; //\u957f\u5ea6\uff0c\u4e5f\u5c31\u662f\u4f4d\u6570\n    if(a>b)\n        return true;\n    else if(a<b)\n        return false;\n    else\n    {\n        for(int k=i,p=m;k<=j;k++,p++) //\u4f4d\u6570\u76f8\u540c\uff0c\u9010\u4f4d\u6bd4\u8f83\n        {\n            if(sa[k]>sa[p])\n                return true;\n            else if(sa[k]<sa[p])\n                return false;\n        }\n    }\n    return false; //\u7b49\u4e8e\u7684\u60c5\u51b5\n}\nint main()\n{\n    while(scanf(\"%s\",sa+1)!=EOF)\n    {\n        int n=strlen(sa+1);\n        if(n==1&&sa[1]=='0')\n            break;\n        dp[1]=1;//dp[i]\u8868\u793a\u4ece\u7b2ci\u4f4d\u5f80\u524d\u5171\u957f\u5ea6\u6700\u5c0f\u4e3adp[i]\u7ec4\u6210\u4e00\u4e2a\u6570\u5b57\u65f6\u7684\u60c5\u51b5,\n        for(int i=2;i<=n;i++)\n        {\n            dp[i]=i;\n            for(int j=i-1;j>=1;j--)\n            {\n                if(isgreater(j+1,i,j-dp[j]+1,j))\n                {\n                    dp[i]=i-j; //\u6c42\u51fa\u6ee1\u8db3\u9898\u610f\u7684\u6700\u5c0f\u957f\u5ea6\n                    break;\n                }\n            }\n        }\n \n        //\u7136\u540e\u4ece\u540e\u5f80\u524d\uff0cdp[i]\u8868\u793a\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\uff0c\u4ecei\u5f00\u59cb\u7684\u6700\u5927\u957f\u5ea6\n        int tt=n-dp[n]+1;\n        dp[tt]=dp[n];\n        for(int i=tt-1;i>=1;i--)\n        {\n            if(sa[i]=='0')\n            {\n                dp[i]=dp[i+1]+1;\n                continue;\n            }\n            for(int j=tt;j>i;j--) //\u6c42\u51fa\u957f\u5ea6\u6700\u5927\u7684\n            {\n                if(isgreater(j,j+dp[j]-1,i,j-1))\n                {\n                    dp[i]=j-i;\n                    break;\n                }\n            }\n \n        }\n        for(int i=1;i<=dp[1];i++) //\u8f93\u51fa\n            putchar(sa[i]);\n        int pp=dp[1]+1;\n        while(pp<=n)\n        {\n            putchar(',');\n            for(int i=pp;i<pp+dp[pp];i++)\n                printf(\"%c\",sa[i]);\n            pp=pp+dp[pp];\n        }\n        putchar('\\n');\n \n \n    }\n   return 0;\n}\n\n```\n\n",
        "postTime": 1589810079,
        "uid": 144532,
        "name": "\u69d1\u5c0f\u6768",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "\u6b22\u8fce\u6765[\u6211\u7684\u535a\u5ba2](https://www.luogu.com.cn/blog/Conless/post-xie-ti-bao-gao-p2282-li-shi-nian-fen-p1415-chai-fen-shuo-lie)\u67e5\u770b\n\n\u5f3a\u5316\u7248 [[HNOI2003]\u5386\u53f2\u5e74\u4efd](https://www.luogu.com.cn/problem/P2282) & \u5f31\u5316\u7248 [\u62c6\u5206\u6570\u5217](https://www.luogu.com.cn/problem/P1415)\n\n\u6211\u4eec\u5148\u6765\u8003\u8651\u5f31\u5316\u7248\uff1a\n\n\u9996\u5148\u8fdb\u884c\u6b63\u5411 $dp$\uff1a\n\n\u8bbe $f_i$ \u8868\u793a\u4ee5 $i$ \u4e3a\u7ed3\u5c3e\u7684\u6700\u5927\u524d\u7f00\u7684\u8d77\u70b9\u4e0b\u6807\uff0c$num_{i,j}$ \u4e3a\u4e0b\u6807 $i-j$ \u6784\u6210\u7684\u6570\u5b57\u3002\u663e\u7136\uff0c\u8fd9\u4e2a\u4e0b\u6807\u8d8a\u5927\uff08\u63a5\u8fd1 $i$\uff09\uff0c\u524d\u7f00\u8d8a\u5c0f\uff0c\u5f97\u5230\u7684\u7b54\u6848\u5c31\u8d8a\u4f18\uff0c\u6240\u4ee5\uff1a\n\n$f_i=max\\{j\\}, j\\in [1,i] \\& \\quad num_{f_{j-1},j-1}<num_{j,i}$\n\n```cpp\n    f1[1] = 1;\n    for (int i = 2; i <= n; i++)\n    {\n        f1[i] = 1;\n        for (int j = i; j >= 1; j--)\n            if (comp(f1[j - 1], j, i))\n            {\n                f1[i] = j;\n                break;\n            }\n    }\n```\n\n$comp()$\u7684\u6734\u7d20\u5b9e\u73b0\u65b9\u5f0f\uff1a\n```cpp\nbool comp(int l, int m, int r)\n{\n    int len1 = m - l, len2 = r - m + 1;\n    int st1 = l, ed1 = m - 1;\n    int st2 = m, ed2 = r;\n    if (len1 < len2)\n    {\n        while (st2 - m + 1 <= len2 - len1)\n        {\n            if (str[st2] != '0')\n                return 1;\n            st2++;\n        }\n    }\n    if (len1 > len2)\n    {\n        while (st1 - l + 1 <= len1 - len2)\n        {\n            if (str[st1] != '0')\n                return 0;\n            st1++;\n        }\n    }\n    len1 = len2 = min(len1, len2);\n    for (int i = 0; i < len1; i++)\n        if (str[st1 + i] != str[st2 + i])\n            return str[st2 + i] > str[st1 + i];\n    return 0;\n}\n```\n\n\u518d\u8003\u8651\u53cd\u5411 $dp$\uff1a\n\n\u8bbe $f_i$ \u8868\u793a\u4ee5 $i$ \u4e3a\u8d77\u70b9\u7684\u6700\u5927\u540e\u7f00\u7684\u7ec8\u70b9\u4e0b\u6807\uff0c\u663e\u7136\uff0c\u8fd9\u4e2a\u4e0b\u6807\u8d8a\u5927\uff08\u63a5\u8fd1 $n$\uff09\uff0c\u540e\u7f00\u8d8a\u5927\uff0c\u5f97\u5230\u7684\u7b54\u6848\u5c31\u8d8a\u4f18\uff0c\u6240\u4ee5\uff1a\n\n$f_i=max\\{j\\}, j\\in [i,j] \\& \\quad num_{i,j}<num_{j+1,f_{j+1}}$\n\n\u4f46\u662f\u6211\u4eec\u5fc5\u987b\u8003\u8651\u5230\u524d\u5bfc\u96f6\u5bf9\u4e00\u4e2a\u6570\u5b57\u7684\u5927\u5c0f\u662f\u6ca1\u6709\u5f71\u54cd\u7684\uff0c\u90a3\u4e48\u5bf9\u4e8e\u7b2c\u4e00\u904d\u6b63\u5411 $dp$ \u5f97\u51fa\u7684\u6700\u5927\u7684\u6700\u540e\u4e00\u4e2a\u6570\uff0c\u53ef\u4ee5\u5728\u5176\u524d\u9762\u52a0\u4e0a\u82e5\u5e72\u4e2a\u524d\u5bfc\u96f6\uff0c\u8fd9\u4e9b\u524d\u5bfc\u96f6\u5728 $f$ \u6570\u7ec4\u4e2d\u6307\u5411\u7684\u4e0b\u6807\u5e94\u8be5\u90fd\u4e3a $n$\n```cpp\n    int las = n;\n    while (las >= f1[n] || str[las] == '0')\n    {\n        f2[las] = n;\n        las--;\n    }\n    for (int i = las; i >= 1; i--)\n    {\n        f2[i] = i;\n        for (int j = n - 1; j > i; j--)\n            if (comp(i, j + 1, f2[j + 1]))\n            {\n                f2[i] = j;\n                break;\n            }\n    }\n```\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u80fd\u5b8c\u6210\u5f31\u5316\u7248\u4e86\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\n\n$DP: O(n^2)$\n\n\u6bcf\u6b21\u6bd4\u8f83\uff1a$O(n)$\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n^3)$\n\n\u5f53\u7136\uff0c\u8fd9\u6837\u7684\u590d\u6742\u5ea6\u5e76\u4e0d\u80fd\u5e2e\u52a9\u6211\u4eec\u901a\u8fc7\u5176\u5f3a\u5316\u7248\uff1a\n\n$T=1000, n=2000$\uff0c\u671f\u671b\u65f6\u95f4\u590d\u6742\u5ea6$O(Tn)-O(Tnlogn)$\n\n\u5bf9\u4e8e\u539f\u7b97\u6cd5\u8003\u8651\u8fdb\u884c\u4f18\u5316\uff1a\n1. \u5bf9\u4e8e\u7b2c\u4e00\u904d $dp$\uff0c\u8003\u8651\u5c06\u6bcf\u4e00\u4e2a\u786e\u5b9a\u7684 $f_j$ \u76f4\u63a5\u5f80\u540e\u66f4\u65b0\uff0c\u51e1\u662f\u6ee1\u8db3 $num_{f[j], j} < num_{j+1, i}$ \u7684 $f_i$\uff0c\u5747\u53ef\u4ee5\u88ab $j$ \u66f4\u65b0\uff0c\u5f88\u663e\u7136\uff0c\u6bcf\u4e00\u6b21\u5747\u53ef\u66f4\u65b0\u4e00\u4e2a\u533a\u95f4 $[i_{min}, n]$\n\n2. \u5bf9\u4e8e\u7b2c\u4e8c\u904d $dp$\uff0c\u8003\u8651\u5c06\u6bcf\u4e00\u4e2a\u786e\u5b9a\u7684 $f_j$ \u76f4\u63a5\u5f80\u524d\u66f4\u65b0\uff0c\u51e1\u662f\u6ee1\u8db3 $num_{i, j} < num_{j+1, f_{j+1}}$ \u7684 $f_i$\uff0c\u5747\u53ef\u4ee5\u88ab $j$ \u66f4\u65b0\uff0c\u5f88\u663e\u7136\uff0c\u6bcf\u4e00\u6b21\u5747\u53ef\u66f4\u65b0\u4e00\u4e2a\u533a\u95f4 $[i_{max}, j]$\n\n\u4ee5\u4e0a\u4e24\u6b65\uff0c\u5747\u53ef\u4ee5\u4f7f\u7528\u7ebf\u6bb5\u6811\u5c06 $DP$ \u5c06\u586b\u8868\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4f18\u5316\u81f3 $O(nlogn)$\n\n\u4f46\u662f\u6211\u4eec\u4ecd\u7136\u65e0\u6cd5\u5feb\u901f\u5f97\u5230\u4e24\u6b21 $DP$ \u7684 $i_{min}, i_{max}$\uff0c\u6b64\u65f6\u6211\u4eec\u8003\u8651\u76f4\u63a5\u7528\u4f4d\u6570\u8fdb\u884c\u6bd4\u8f83\uff0c\u7528\u7b2c\u4e00\u6b21DP\u8fdb\u884c\u4e3e\u4f8b\uff1a\n\n$\\because num_{f_{j-1},j-1}<num_{j,i}$\n\n$\\therefore (j-1)-f_{j-1}+1 \\le i-j+1$\uff08\u4e0d\u8003\u8651\u524d\u5bfc\u96f6\uff09\n\n$\\therefore i \\ge 2j-f_{j-1}-1$\n\n\u82e5\u8003\u8651\u524d\u5bfc\u96f6\uff0c\u53ef\u4ee5\u9884\u5904\u7406\u5c06 $i$ \u5de6\u8fb9\u4e0e\u53f3\u8fb9\uff08\u5305\u62ec $i$\uff09\u7684\u7b2c\u4e00\u4e2a\u975e\u96f6\u6570\u5b57\u6c42\u51fa\u6765\uff0c\u8868\u793a\u4e3a $lasn_i$ \u4e0e $nexn_i$\uff0c\u90a3\u4e48\u4e0a\u5f0f\u5c06\u53d8\u4e3a\uff1a\n\n$i_{min} = nexn_i + (i - nexn_{f_{i - 1}}) - 1$\n\n\u6ce8\u610f\u5230\u63a8\u5bfc\u7684\u524d\u4e24\u4f4d\u5e76\u975e\u7b49\u4ef7\u8f6c\u5316\uff0c\u90a3\u4e48\u6211\u4eec\u518d\u8fdb\u884c\u4e00\u6b21 $comp(f_{j-1}, j, i_{max})$\uff0c\u82e5\u4e0d\u5408\u6cd5\u518d\u5f80\u540e\u8df3\u4e00\u4f4d\u5373\u53ef\n\n\u8fd9\u6837\u7684\u8bdd\u6211\u4eec\u7684\u7406\u8bba\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u964d\u5230\u4e86 $O(Tn^2)$\uff0c\u5f53\u7136\u5b9e\u9645\u4e0a\u6bd4\u8f83\u51fd\u6570\u662f\u5b8c\u5168\u8dd1\u4e0d\u6ee1\u7684\uff0c\u518d\u5957\u4e00\u4e2a $O2$ \u53ef\u80fd\u80fd\u5361\u8fc7\n\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u518d\u6765\u8003\u8651\u6bcf\u4e00\u6b21 $comp$ \u51fd\u6570\u7684\u4f18\u5316\uff0c\u4e4b\u524d\u8003\u8651\u7684\u662f\u6734\u7d20\u6bd4\u8f83\uff0c\u4f46\u7531\u4e8e\u6211\u4eec\u73b0\u5728\u53ea\u9700\u8981\u77e5\u9053\u4e24\u4e2a\u7531\u6570\u5b57\u6784\u6210\u7684\u5b57\u4e32\u7684\u5927\u5c0f\uff0c\u4e0d\u59a8\u8003\u8651\u54c8\u5e0c\u7b97\u6cd5\uff1a\n\n```cpp\nvoid pre_hash()\n{\n    num[0] = 0;\n    for (int i = 1; i <= n; i++)\n        num[i] = (1LL * num[i - 1] * 10 + str[i] - '0') % MOD;\n}\n\ninline bool equal(int st1, int st2, int len) \n{\n    int ed1 = st1 + len - 1, ed2 = st2 + len - 1;\n    return (num[ed1] - fac[len] * num[st1 - 1] % MOD + MOD) % MOD == (num[ed2] - fac[len] * num[st2 - 1] % MOD + MOD) % MOD;\n}\n```\n\n\u4f46\u662f\uff0c\u4ed6\u5047\u4e86\uff01\uff01\uff01\n![](https://cdn.luogu.com.cn/upload/image_hosting/yg0q5u4j.png)\n\n\u53ef\u80fd\u662f\u6211\u7684\u6a21\u6570\u6216\u8fdb\u5236\u5199\u7684\u592a\u5f31\u4e86\uff0c\u6240\u4ee5\u5355\u54c8\u5e0c\u5c31\u8fd9\u6837\u88ab\u5361\u4e86\uff0c\u4e8e\u662f\u6700\u540e\u6539\u4e86\u4e2a\u53cc\u54c8\u5e0c\u7ec8\u4e8e\u52c9\u5f3a\u8fc7\u4e86\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst int MAXN = 2e3 + 5;\nconst ll MOD1 = 1e9 + 7, MOD2 = 19260817;\n\nint T, n;\nchar str[MAXN];\nll num1[MAXN], num2[MAXN], fac1[MAXN], fac2[MAXN];\nint f1[MAXN], f2[MAXN];\nint nexn[MAXN], lasn[MAXN];\n\nclass SegmentTree\n{\n\n#define sn segTree[node]\n\n    struct TreeNode {\n        int l, r;\n        int lson, rson;\n        int data;\n    } segTree[MAXN << 2];\n\n    void pushdown(int node)\n    {\n        if (sn.data)\n        {\n            segTree[sn.lson].data = max(segTree[sn.lson].data, sn.data);\n            segTree[sn.rson].data = max(segTree[sn.rson].data, sn.data);\n            sn.data = 0;\n        }\n    }\n\npublic:\n\n    void build(int node, int l, int r)\n    {\n        sn.l = l;\n        sn.r = r;\n        sn.data = 0;\n        if (l != r)\n        {\n            sn.lson = node << 1;\n            sn.rson = node << 1 | 1;\n            int mid = (l + r) >> 1;\n            build(sn.lson, l, mid);\n            build(sn.rson, mid + 1, r);\n        }\n    }\n\n    int ask(int node, int pos)\n    {\n        if (sn.l == sn.r)\n            return sn.data;\n        pushdown(node);\n        int mid = (sn.l + sn.r) >> 1;\n        if (pos <= mid)\n            return ask(sn.lson, pos);\n        else return ask(sn.rson, pos);\n    }\n\n    void change(int node, int l, int r, int val)\n    {\n        if (l > sn.r || r < sn.l)\n            return;\n        if (l <= sn.l && r >= sn.r)\n            sn.data = max(sn.data, val);\n        else {\n            pushdown(node);\n            change(sn.lson, l, r, val);\n            change(sn.rson, l, r, val);\n        }\n    }\n} stree;\n\ninline bool equal(int st1, int st2, int len) \n{\n    int ed1 = st1 + len - 1, ed2 = st2 + len - 1;\n    bool res1 = (num1[ed1] - fac1[len] * num1[st1 - 1] % MOD1 + MOD1) % MOD1\n             == (num1[ed2] - fac1[len] * num1[st2 - 1] % MOD1 + MOD1) % MOD1;\n    bool res2 = (num2[ed1] - fac2[len] * num2[st1 - 1] % MOD2 + MOD2) % MOD2\n             == (num2[ed2] - fac2[len] * num2[st2 - 1] % MOD2 + MOD2) % MOD2;\n    return res1 & res2;\n}\n\nbool comp(int l, int m, int r)\n{\n    int st1 = l, ed1 = m - 1;\n    int st2 = m, ed2 = r;\n    st1 = nexn[st1];\n    st2 = nexn[st2];\n    int len1 = ed1 - st1 + 1, len2 = ed2 - st2 + 1;\n    if (len2 <= 0)\n        return 0;\n    if (len1 <= 0)\n        return 1;\n    if (len1 != len2)\n        return len1 < len2;\n    int le = 0, ri = len1 - 1, res = -1;\n    while (le <= ri)\n    {\n        int mid = (le + ri) >> 1;\n        if (equal(st1, st2, mid))\n        {\n            res = mid;\n            le = mid + 1;\n        }\n        else ri = mid - 1;\n    }\n    return str[st1 + res] < str[st2 + res];\n}\n\nvoid pre_pow()\n{\n    fac1[0] = 1LL;\n    for (int i = 1; i <= 2000; i++)\n        fac1[i] = 1LL * fac1[i - 1] * 10 % MOD1;\n    fac2[0] = 1LL;\n    for (int i = 1; i <= 2000; i++)\n        fac2[i] = 1LL * fac2[i - 1] * 11 % MOD2;\n}\n\nvoid pre_hash()\n{\n    num1[0] = 0;\n    for (int i = 1; i <= n; i++)\n        num1[i] = (1LL * num1[i - 1] * 10 + str[i] - '0') % MOD1;\n    num2[0] = 0;\n    for (int i = 1; i <= n; i++)\n        num2[i] = (1LL * num2[i - 1] * 11 + str[i] - '0') % MOD2;\n}\n\nvoid deal_zero()\n{\n    for (int i = n, j = n + 1; i >= 1; i--)\n    {\n        if (str[i] != '0')\n            j = i;\n        nexn[i] = j;\n    }\n    for (int i = 1, j = 0; i <= n; i++)\n    {\n        if (str[i] != '0')\n            j = i;\n        lasn[i] = j;\n    }\n}\n\nint main()\n{\n    pre_pow();\n    while (scanf(\"%s\", str + 1) != EOF)\n    {\n        n = strlen(str + 1);\n        pre_hash();\n        deal_zero();\n        stree.build(1, 1, n);\n        stree.change(1, 1, n, 1);\n        f1[1] = 1;\n        for (int i = 2; i <= n; i++)\n        {\n            int nex = nexn[i] + (i - nexn[f1[i - 1]]) - 1;\n            if (!comp(f1[i - 1], i, nex))\n                nex++;\n            stree.change(1, nex, n, i);\n            f1[i] = stree.ask(1, i);\n        }\n        int las = lasn[f1[n] - 1];\n        stree.build(1, 1, n);\n        stree.change(1, las + 1, n, n);\n        f2[n] = n;\n        for (int i = n - 1; i >= 1; i--)\n        {\n            f2[i] = max(i, stree.ask(1, i));\n            int fir = i - (f2[i + 1] - nexn[i + 1]);\n            if (!comp(fir, i + 1, f2[i + 1]))\n                fir++;\n            fir = lasn[fir - 1] + 1;\n            if (fir < 1) fir = 1;\n            stree.change(1, fir, i - 1, i);\n        }\n        \n        for (int i = 1; i <= n; i++)\n        {\n            int j = i;\n            while (j <= f2[i] && j <= n)\n                putchar(str[j++]);\n            i = j - 1;\n            if (i != n) putchar(',');\n        }\n        putchar('\\n');\n    }\n    return 0;\n}\n```",
        "postTime": 1606480450,
        "uid": 58826,
        "name": "Conless",
        "ccfLevel": 7,
        "title": "\u3010\u89e3\u9898\u62a5\u544a\u3011P2282 \u5386\u53f2\u5e74\u4efd & P1415 \u62c6\u5206\u6570\u5217"
    },
    {
        "content": "# \u5b98\u65b9\u6570\u636e\u4e2d\u7684\u7279\u6b8a\u6570\u636e\uff1a\n\n## 1234050\n\n\u5b83\u53ef\u4ee5\u770b\u4f5c:\n\n1,23,40,50\n\n12,34,050\n\n# \u4f5c\u4e3a\u7c7b\u6bd4\u7684\u6570\u636e\uff1a\n\n## 3526080\n\n\u5b83\u53ef\u4ee5\u770b\u4f5c\uff1a\n\n3\uff0c52,60,80\n\n3,5,26,080\n\n\u5230\u5e95\u90a3\u4e00\u7ec4\u89e3\u6700\u4f18\u5462\uff1f\n\n# \u89e3\u51b3\u65b9\u6cd5\n\n\u5728\u7b2c\u4e8c\u6b21\u904d\u5386\u7684\u6570\u7ec4dp2[len]\u4e2d\uff0c\u628a\u6700\u540e\u4e00\u4e2a\u6570\u524d\u9762\u7684\u524d\u5bfc0\u7684dp2\u503c\u90fd\u6307\u5411n\n\n\u9053\u7406\u5728\u4e8e\u8fd9\u6837\u53ef\u4ee5\u5728\u4fdd\u8bc1\u6b63\u786e\u7684\u524d\u63d0\u4e0b\uff0c\u8ba9\u4e00\u4e9b\u70b9\u5728dp2\u6570\u7ec4\u7684\u503c\u6709\u673a\u4f1a\u6307\u5411\u66f4\u540e\u9762\u7684\u70b9\n\n\u5728\u4e00\u4e0b\u4ee3\u7801\u4e2d\u8fd0\u884c\u4e0a\u8ff0\u4e24\u7ec4\u6570\u636e\uff0c\u6ce8\u610f\u8f93\u51fa\u4fe1\u606f\u4e2d\u5e26\u6709\u5927\u4e8e\u3001\u5c0f\u4e8e\u7b26\u53f7\u7684\u90a3\u4e9b\u884c\n\n\u5728\u7f16\u7a0b\u4e2d\uff0c\u5584\u4e8e\u8f93\u51fa\u4e2d\u95f4\u7ed3\u679c\u5f88\u91cd\u8981\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN = 505;\n\nint len;\nchar str[MAXN];\nint dgt[MAXN];//digit\nint dp1[MAXN];\nint dp2[MAXN];\n\nvoid init(){\n\tcin >> str+1;\n\tlen = strlen(str+1);\n\tfor(int i = 1; i <= len; i++){\n\t\tdgt[i] = str[i]-'0';\n\t}\n}\nint cmp(int l1, int r1, int l2, int r2){\n\tcout << \"compare \";\n\tcout << \"[\" << l1 << \", \" << r1 << \"]:\";\n\tfor(int k = l1; k <= r1; k++){\n\t   \tcout << dgt[k];\n\t}\n\tcout << \" to \";\n\tcout << \"[\" << l2 << \", \" << r2 << \"]:\";\n\tfor(int k = l2; k <= r2; k++){\n\t\tcout << dgt[k];\n\t}\n\tcout << endl;\n\t\n\twhile(dgt[l1] == 0 && l1 <= r1){l1++;};\n\twhile(dgt[l2] == 0 && l2 <= r2){l2++;};\n\tif(l1 > r1 || l2 > r2){return 0;}\n\tif(r1-l1 > r2-l2){return 1;}\n\tif(r1-l1 < r2-l2){return 0;}\n\tfor(int pos = 0; pos <= r1-l1; pos++){\n\t\tif( dgt[l1+pos] > dgt[l2+pos] ){\n\t\t\treturn 1;\n\t\t}\n\t\tif( dgt[l1+pos] < dgt[l2+pos] ){\n\t\t\treturn 0;\n\t\t}\n\t}\n\treturn 0;\n}\nvoid f1(){\n\tfor(int i = 1; i <= len; i++){\n\t\tdp1[i] = 1;\n\t\tfor(int j = i; j >= 1; j--){\n\t\t\tif( cmp( j, i, dp1[j-1], j-1 ) ){\n//\t\t\t\tcout << \"[\" << j << \", \" << i << \"]:\";\n//\t\t\t    for(int k = j; k <= i; k++){\n//\t\t\t    \tcout << dgt[k];\n//\t\t\t\t}\n//\t\t\t\tcout << \" > \";\n//\t\t\t\tcout << \"[\" << dp1[j-1] << \", \" << j-1 << \"]:\";\n//\t\t\t\tfor(int k = dp1[j-1]; k <= j-1; k++){\n//\t\t\t\t\tcout << dgt[k];\n//\t\t\t\t}\n//\t\t\t\tcout << endl;\n\t\t\t\tdp1[i] = j;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i = 1; i <= len; i++){\n\t\tcout << \"dp1[\" << i << \"] is \" << dp1[i] << endl; \n\t}\n\tcout << endl;\n}\nvoid f2(){\n\tdp2[ dp1[len] ] = len;\n\t\n\tint zero = dp1[len]-1;\n\twhile(dgt[zero] == 0){dp2[zero] = len; zero--;}\n\t\n\tfor(int i = dp1[len]-1; i >= 1; i--){\n\t\tfor(int j = dp1[len]-1; j >= i; j--){\n\t\t\tif( cmp( j+1, dp2[j+1], i, j ) ){\n\t\t\t\tcout << \"[\" << j+1 << \", \" << dp2[j+1] << \"]:\";\n\t\t\t    for(int k = j+1; k <= dp2[j+1]; k++){\n\t\t\t    \tcout << dgt[k];\n\t\t\t\t}\n \t\t\t\tcout << \" > \";//\u6ce8\u610f\u89c2\u5bdf\u8fd9\u91cc\u7684\u8f93\u51fa\n\t\t\t\tcout << \"[\" << i << \", \" << j << \"]:\";\n\t\t\t\tfor(int k = i; k <= j; k++){\n\t\t\t\t\tcout << dgt[k];\n\t\t\t\t}\n\t\t\t\tcout << endl;\n\t\t\t\tdp2[i] = j;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i = 1; i <= len; i++){\n\t\tcout << \"dp2[\" << i << \"] is \" << dp2[i] << endl; \n\t}\n\tcout << endl;\n}\nvoid print_result(){\n\tint first = 1;\n\tfor(int i = 1; i <= len; i++){\n\t\tif(first == 1){\n\t\t\tfirst = 0;\n\t\t}else{\n\t\t\tcout << \",\";\n\t\t}\n\t\tfor(int j = i; j <= dp2[i]; j++){\n\t\t\tcout << dgt[j];\n\t\t}\n\t\ti = dp2[i];\n\t}\n}\nint main(){\n\tinit();\n\tf1();\n\tf2();\n\tprint_result();\n\treturn 0;\n}\n```\n",
        "postTime": 1571244297,
        "uid": 63238,
        "name": "\u6a31\u6728\u82b1\u90532020",
        "ccfLevel": 0,
        "title": "\u4e3a\u4ec0\u4e48\u8981\u5904\u7406\u524d\u5bfc0\u7684\u4e00\u4e9b\u770b\u6cd5"
    },
    {
        "content": "\u7ffb\u4e86\u4e0b\u9898\u89e3\uff0c\u597d\u50cf\u6ca1\u6709\u548c\u6211\u4e00\u6837\u7684\u505a\u6cd5\u3002\u3002\n\n\u9996\u5148\u6c42\u51fa\u6700\u5c0f\u7684\u6700\u540e\u4e00\u4e2a\u6570\uff0c\u7528f[n]\u8868\u793a\u4ee5n\u7ed3\u5c3e\uff0c\u5728\u6700\u5c0f\u5316\u7684\u6700\u540e\u4e00\u4f4d\u7684\u524d\u63d0\u4e0b\u7684\u6700\u540e\u4e00\u4f4d\u7684\u4e0b\u6807\u3002\u4e0d\u8fc7\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u8fd9\u4e2a\u6700\u540e\u4e00\u4f4d\u80fd\u591f\u52a0\u5165\u524d\u5bfc0\u7684\u8bdd\uff0c\u5c31\u4e00\u5b9a\u8981\u52a0\u5165\u8fd9\u4e2a0\uff0c\u7279\u5224\u4e00\u4e0b\u5c31\u884c\u4e86. \n\n\u4e0d\u8fc7\u6211\u89c9\u5f97\u8fd9\u6837\u505a\u662f\u6709\u95ee\u9898\u7684\uff0c\u5e94\u8be5\u5c06\u51e0\u4e2a\u6700\u5c0f\u6700\u540e\u4e00\u4e2a\u6570\u7684\u60c5\u51b5\u7b97\u51fa\u6765\uff0c\u6bd4\u8f83\u53d6\u6700\u4f18\u3002\u53ef\u80fd\u662f\u6570\u636e\u592a\u6c34\uff0c\u4e5f\u53ef\u80fd\u662f\u6709\u8bc1\u660e\uff0c\u4e0d\u8fc7\u8fc7\u4e86\u6211\u5c31\u61d2\u5f97\u6539\u4e86\u3002\u3002\n\n(\u8fd9\u4e2af\u6570\u7ec4\u6ca1\u5fc5\u8981\u53cd\u590d\u6c42\uff0c\u6211\u5f53\u65f6\u4e0d\u77e5\u9053\u600e\u4e48\u60f3\u7684\u3002\u3002\u61d2\u5f97\u6539\u4e86\uff09\n\n\u7136\u540e\u7528m[i][u]\u8868\u793a\u4ecei\u5230u\u53ef\u4ee5\u51fa\u73b0\u5728\u67d0\u4e2a\u5408\u6cd5\u7684\u9017\u53f7\u5206\u5272\u4e2d\uff0c\u521d\u59cb\u5316m[r][n] = 1.\nr\u4e3a\u521a\u521a\u6c42\u51fa\u6765\u7684\u6700\u5c0f\u6700\u540e\u4e00\u4e2a\u6570\u7684\u4e0b\u6807\u3002\n\n\u8f6c\u79fb\uff1am[i][u] = 1,\u5b58\u5728m[u + 1][j] = 1 \u4e14 s[i .. u] < s[u + 1 .. j].\n\n\u8f93\u51fa\u987a\u7740m\u8d70\u5c31\u884c\u4e86\u3002\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<map>\n#include<cmath>\n#include<ctime>\n#include<cstring>\n#define ULL unsigned long long\n#define LL long long\nusing namespace std;\nconst int N = 505;\nchar s[N];\nint f[N],n;\nbool bj(int x,int y,int a,int b){\n//\tif(x == -1 || y == -1)return 1;\n\twhile(x < y && s[x] == '0')x++;\n\twhile(a < b && s[a] == '0')a++;\n\tif(y - x != b - a)return y - x < b - a;\n\n\tfor(int i = 0 ; x + i <= y ; i++)\n\tif(s[x + i] != s[a + i])return s[x + i] < s[a + i];\t\n\treturn 0;\n}\nbool jud(int k){\n\tfor(int i = 1 ; i < k ; i++)\n\tfor(int u = i ; u ; u--)\n\tif(bj(f[u - 1],u - 1,u,i)){\n\t\tf[i] = u;\n\t\tbreak;\n\t}\n//\tfor(int i = 0 ; i < k ; i++)\n//\tcout<<f[i]<<' ';\n\treturn bj(f[k - 1],k - 1,k,n);\n}\nbool m[N][N];\nvoid build(int k){\n\tm[k][n] = 1;\n\tfor(int i = k - 1 ; ~i ; i--)\n\tfor(int u = i ; u < k ; u++)\n\tfor(int j = u + 1 ; j <= n ; j++)\n\tif(m[u + 1][j] && bj(i,u,u + 1,j)){\n\tm[i][u] = 1;\n\tbreak;\n\t}\n}\nvoid out(){\n\tint now = 0;\n\twhile(now <= n){\n\t\tif(now)printf(\",\");\n\t    int i = n ;\n\t\tfor(; i >= now ; i--)\n\t\tif(m[now][i])break;\n\t\tfor(int u = now ; u <= i ; u++)\n\t\tprintf(\"%c\",s[u]);\n\t\tnow = i + 1;\n\t}\n}\nint main() {\n//\twhile(scanf(\"[%d]\",&x)){\n//\t\tprintf(\"[%d]\\n\",x);\n\t\tscanf(\"%s\",s);\n\t\tint l = 0,r = strlen(s) - 1; \n\t\tn = strlen(s) - 1;\n\t\tfor( ; r ; r--)\n\t\tif(jud(r))break;\n\t\twhile(r && s[r - 1] == '0' && jud(r - 1))r--;\n\t\tbuild(r);\n\t\tout();\n\t//\tcout<<endl;\n//\t}\n\treturn 0;\n}\n```\n\u65f6\u95f4\u590d\u6742\u5ea6O\uff08n ^ 4 + n ^ 2\uff09\n\n\u5bf9\uff0c\u4f60\u6ca1\u6709\u770b\u9519\uff0c\u8fc7\u4e86\u8fd8\u8dd1\u5f97\u98de\u5feb\uff0c200ms+\n\n\n\n------------\n \u597d\u5427\uff0c\u4e00\u4e0d\u5c0f\u5fc3\u627e\u5230\u4e86\u4e00\u7ec4hack\u6570\u636e\n \n 114050\n \n \u6240\u4ee5\u8fd8\u662f\u5f97\u8001\u8001\u5b9e\u5b9e\u7684\u628a\u6240\u6709\u6700\u540e\u4e00\u4e2a\u503c\u6700\u5c0f\u7684\u60c5\u51b5\u7b97\u51fa\u6765\uff0c\u6bd4\u8f83\u53d6\u6700\u4f18\u3002\u3002\n \n ```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<map>\n#include<cmath>\n#include<ctime>\n#include<cstring>\n#define ULL unsigned long long\n#define LL long long\nusing namespace std;\nconst int N = 505;\nchar s[N];\nint f[N],n;\nbool bj(int x,int y,int a,int b){\n\twhile(x < y && s[x] == '0')x++;\n\twhile(a < b && s[a] == '0')a++;\n\tif(y - x != b - a)return y - x < b - a;\n\tfor(int i = 0 ; x + i <= y ; i++)\n\tif(s[x + i] != s[a + i])return s[x + i] < s[a + i];\t\n\treturn 0;\n}\nvoid jud(int k){\n\tfor(int i = 1 ; i < k ; i++)\n\tfor(int u = i ; u ; u--)\n\tif(bj(f[u - 1],u - 1,u,i)){\n\t\tf[i] = u;\n\t\tbreak;\n\t}\n}\nbool m[N][N],ans[N][N];\nvoid build(int k){\nfor(int i = 0 ; i <= n ; i++)\nfor(int u = 0 ; u <= n ; u++)m[i][u] = 0;\t\n\tm[k][n] = 1;\n\tfor(int i = k - 1 ; ~i ; i--)\n\tfor(int u = i ; u < k ; u++)\n\tfor(int j = u + 1 ; j <= n ; j++)\n\tif(m[u + 1][j] && bj(i,u,u + 1,j)){\n\tm[i][u] = 1;\n\tbreak;\n\t}\n}\nvoid out(){\n\tint now = 0;\n\twhile(now <= n){\n\t\tif(now)printf(\",\");\n\t    int i = n ;\n\t\tfor(; i >= now ; i--)\n\t\tif(ans[now][i])break;\n\t\tfor(int u = now ; u <= i ; u++)\n\t\tprintf(\"%c\",s[u]);\n\t\tnow = i + 1;\n\t}\n}\nbool judge(){\n\tint now1 = 0,now2 = 0;\n\twhile(now1 <= n){\n\t    int nxt1 = n,nxt2 = n;\n\t\tfor(; nxt1 >= now1 ; nxt1--)\n\t\tif(ans[now1][nxt1])break;\n\t\tfor(; nxt2 >= now2 ; nxt2--)\n\t\tif(m[now2][nxt2])break;\n\t\tif(!bj(now1,nxt1,now2,nxt2) && !bj(now2,nxt2,now1,nxt1)){\n\t\tnow1 = nxt1 + 1,now2 = nxt2 + 1;\n\t\t}\n\t\telse{\n\t\t\treturn bj(now1,nxt1,now2,nxt2);\n\t\t}\n\t}\n\treturn 1;\t\n}\nvoid copy(){\nfor(int i = 0 ; i <= n ; i++)\nfor(int u = 0 ; u <= n ; u++)ans[i][u] = m[i][u];\n}\t\nint main() {\n\t\tscanf(\"%s\",s);\n\t\tint r = strlen(s) - 1; \n\t\tn = strlen(s) - 1;\n\t\tjud(n + 1);\n\t\tfor( ; r ; r--)\n\t\tif(bj(f[r - 1],r - 1,r,n))break;\n\t\tbuild(r);\n\t\tcopy();\n\t\twhile(r && s[r - 1] == '0'){\n\t\t--r;\n\t\tif(bj(f[r - 1],r - 1,r,n)){\n\t\tbuild(r);\n\t\tif(judge())copy();\n\t\t}\n\t\t}\n\t\tout();\n\treturn 0;\n}\n```\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<map>\n#include<cmath>\n#include<ctime>\n#include<cstring>\n#define ULL unsigned long long\n#define LL long long\nusing namespace std;\nconst int N = 505;\nchar s[N];\nint f[N],n;\nbool bj(int x,int y,int a,int b){\n\twhile(x < y && s[x] == '0')x++;\n\twhile(a < b && s[a] == '0')a++;\n\tif(y - x != b - a)return y - x < b - a;\n\tfor(int i = 0 ; x + i <= y ; i++)\n\tif(s[x + i] != s[a + i])return s[x + i] < s[a + i];\t\n\treturn 0;\n}\nvoid jud(int k){\n\tfor(int i = 1 ; i < k ; i++)\n\tfor(int u = i ; u ; u--)\n\tif(bj(f[u - 1],u - 1,u,i)){\n\t\tf[i] = u;\n\t\tbreak;\n\t}\n}\nbool m[N][N],ans[N][N];\nvoid build(int k){\nfor(int i = 0 ; i <= n ; i++)\nfor(int u = 0 ; u <= n ; u++)m[i][u] = 0;\t\n\tm[k][n] = 1;\n\tfor(int i = k - 1 ; ~i ; i--)\n\tfor(int u = i ; u < k ; u++)\n\tfor(int j = u + 1 ; j <= n ; j++)\n\tif(m[u + 1][j] && bj(i,u,u + 1,j)){\n\tm[i][u] = 1;\n\tbreak;\n\t}\n}\nvoid out(){\n\tint now = 0;\n\twhile(now <= n){\n\t\tif(now)printf(\",\");\n\t    int i = n ;\n\t\tfor(; i >= now ; i--)\n\t\tif(ans[now][i])break;\n\t\tfor(int u = now ; u <= i ; u++)\n\t\tprintf(\"%c\",s[u]);\n\t\tnow = i + 1;\n\t}\n}\nbool judge(){\n\tint now1 = 0,now2 = 0;\n\twhile(now1 <= n){\n\t    int nxt1 = n,nxt2 = n;\n\t\tfor(; nxt1 >= now1 ; nxt1--)\n\t\tif(ans[now1][nxt1])break;\n\t\tfor(; nxt2 >= now2 ; nxt2--)\n\t\tif(m[now2][nxt2])break;\n\t\tif(!bj(now1,nxt1,now2,nxt2) && !bj(now2,nxt2,now1,nxt1)){\n\t\tnow1 = nxt1 + 1,now2 = nxt2 + 1;\n\t\t}\n\t\telse{\n\t\t\treturn bj(now1,nxt1,now2,nxt2);\n\t\t}\n\t}\n\treturn 1;\t\n}\nvoid copy(){\nfor(int i = 0 ; i <= n ; i++)\nfor(int u = 0 ; u <= n ; u++)ans[i][u] = m[i][u];\n}\t\nint main() {\n\t\tscanf(\"%s\",s);\n\t\tint r = strlen(s) - 1; \n\t\tn = strlen(s) - 1;\n\t\tjud(n + 1);\n\t\tfor( ; r ; r--)\n\t\tif(bj(f[r - 1],r - 1,r,n))break;\n\t\tbuild(r);\n\t\tcopy();\n\t\twhile(r && s[r - 1] == '0'){\n\t\t--r;\n\t\tif(bj(f[r - 1],r - 1,r,n)){\n\t\tbuild(r);\n\t\tif(judge())copy();\n\t\t}\n\t\t}\n\t\tout();\n\treturn 0;\n}\n```\n \u5b9e\u9645\u4e0a\u8fdc\u8fdc\u8fbe\u4e0d\u5230\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u4e0a\u9650\uff0c\u6240\u4ee5\u53ef\u4ee5\u8fc7",
        "postTime": 1557283060,
        "uid": 78965,
        "name": "block_joker",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "[color=blue]\n\n\u7136\u800c\u4f5c\u4e3a\u4e00\u9053\u5b8c\u5168\u6ca1\u89c1\u8fc7\u7684\u5b57\u7b26\u4e32DP\u8868\u793a\u505a\u4e0d\u6765 \u770b\u9898\u89e3\u561b= =\n\n\u770b\u4e86\u9898\u89e3\u5404\u79cd\u4e71\u641e\u4e4b\u540eA\u4e86\n\n\u7b2c\u4e00\u6b65\u5148\u6c42\u51fa\u6700\u540e\u7684\u90a3\u4e2a\u6570\u6700\u5c0f\u4e3a\u591a\u5c11\u3002\uff08\u4e3a\u4e86\u53d9\u8ff0\u65b9\u4fbf\uff0c\u8bb0T(i,j)\u8868\u793a\u4ece\u539f\u6570\u5217\u4e0b\u6807i\u53d6\u5230j\u7684\u6570\u5b57\u7ec4\u6210\u7684\u6570\u3002\uff09\u53ea\u9700\u6b63\u5411dp\u4e00\u6b21\uff0cdp1[i]\u8868\u793a\u524di\u4e2a\u6570\u5b57\u5206\u6210\u4efb\u610f\u591a\u4e2a\u9012\u589e\u6570\u4e14\u6700\u540e\u7684\u6570\u6700\u5c0f\u65f6\uff0c\u6700\u540e\u7684\u6570\u4e3aT(dp1[i],i)\u3002\u5219dp1[i]=max(j)\uff0c(T(dp1[j-1],j-1)<T(j,i))\u3002\n\n\u53d6max\u660e\u663e\u662f\u4e3a\u4e86\u4f7f\u6700\u540e\u7684\u6570\u53d8\u5c0f\u561b= =  \u62ec\u53f7\u91cc\u7684\u662f\u6761\u4ef6  \u9898\u76ee\u8981\u6c42\u5355\u589e\u5e8f\u5217\n\n\u7b2c\u4e8c\u6b65\u8981\u6c42\u6700\u540e\u4e00\u4e2a\u6570\u786e\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u524d\u9762\u7684\u6570\u5b57\u6309\u5b57\u5178\u5e8f\u5c3d\u91cf\u5927\u7684\u89e3\u3002\u7c7b\u4f3c\u4e0a\u9762\u7684\u65b9\u6cd5\u53cd\u5411\u52a8\u5f52\u4e00\u6b21\u5373\u53ef\u3002\n\nPS\uff1a \u5e76\u6ca1\u6709\u544a\u8bc9\u6211\u600e\u4e48\u53cd\u5411DP\u4e8e\u662f\u81ea\u5df1yy\u89e3\u6cd5\n\n\u5148\u6765\u641eT\u6570\u7ec4\u7684\u95ee\u9898  \u6700\u957f500\u4f4d  \u5f00\u59cb\u9017\u6bd4\u5730\u7528\u7684int   \u5bf9\u62cd\u7684\u65f6\u5019\u76f4\u63a5\u7206\u6389  \u53c8\u4e0d\u60f3\u7528\u9ad8\u7cbe\uff08LongLong\u4e5f\u4f1a\u7206\u7684\u561b\uff09\n\n\u7136\u540e\u5462\u60f3\u5230\u5237\u6c34\u9898\u7684\u65f6\u5019\u4e00\u4e2a\u6280\u5de7 = =\u7528string\u5b58  \u6bd4\u8f83\u7684\u65f6\u5019\u5148\u6bd4\u4f4d\u6570\u518d\u6bd4\u5b57\u5178\u5e8f\uff08\u53ef\u81ea\u5df1\u5b9e\u6d4b\u76f4\u63a5\u6bd4\u5b57\u5178\u5e8f\u7684\u540e\u679c\uff09\n\n\u5f00\u59cb\u8fd8\u4e0d\u5c0f\u5fc3\u628a\u524d\u5bfc0\u5b58\u8fdb\u53bb\u4e86\u3002\u3002  \u597d\u50cf\u5c31\u80fd\u5b8c\u6210\u4e86\u5427\u3002  \u6807\u7a0b\u6ca1\u5904\u7406T\u6570\u7ec4\u76f4\u63a5\u4f20\u4e0b\u6807\u6bd4\u8f83\u597d\u50cf\u662f\u8981\u5feb\u4e00\u70b9\u77ed\u4e00\u70b9\u3002\u3002\n\n\ufeff\u5012\u8fc7\u6765DP\u7684\u65f6\u5019\u5982\u6cd5\u70ae\u5236\u628adp\uff08i\uff09\u8868\u793ai\u5f00\u5934\u65f6\u4ee5dp\uff08i\uff09\u7ed3\u5c3e\u5c31\u53ef\u4ee5\u4e86  \u6ce8\u610f\u8981\u628a\u9009\u51fa\u6765\u7684\u6700\u5c0f\u6570\u7684\u524d\u5bfc0\u7684dp\u503c\u5904\u7406\u4e00\u4e0b\uff08\u4e5f\u53ef\u5b9e\u6d4b\u540e\u679c\uff09\n\n[/color]\n\n[delete] \u6211\u8c03\u4e86\u534a\u5929\u56e0\u4e3a\u6ca1\u6709C++\u4ee3\u7801\uff0c\u9898\u89e3\u4e5f\u662f\u6709\u70b9\u61c2\u53c8\u61c2\u4e0d\u5b8c\u90a3\u79cd[/delete]\n\n```cpp\n\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nconst int maxn=500+10;\n\nchar s[maxn];\nint n,p=1,real[maxn][maxn];\nstring num[maxn][maxn];\n\nvoid init_data()\n{    \n    scanf(\"%s\",s+1);\n    n=strlen(s+1);\n    for(;s[p]=='0';p++,n--);\n    if(p>1)\n      for(int i=1;i<=n;i++)\n        s[i]=s[i+p-1];\n    for(int i=1;i<=n;i++)\n      for(int j=i;j<=n;j++)\n      {\n          if(num[i][j-1].length()==0&&s[j]=='0')continue;\n          else num[i][j]=num[i][j-1]+s[j];\n//          real[i][j]=real[i][j-1]*10+s[j]-'0';\n//          printf(\"%d %d \",i,j);\n//          cout<<num[i][j]<<endl;\n      }  \n}\n\nint check(string a,string b)\n{\n    if(a==b) return -1;\n//    cout<<a<<endl;\n//    int lena=a.length(),lenb=b.length();\n    if(a.length()!=b.length()) return a.length()>b.length();\n    else return a>b;\n}\n\nint dp1[maxn];\nvoid dp_1()\n{\n    for(int i=1;i<=n;i++) dp1[i]=1;\n    for(int i=2;i<=n;i++)\n      for(int j=1;j<i;j++)\n        if(check(num[dp1[j]][j],num[j+1][i])==0)\n          dp1[i]=max(dp1[i],j+1);\n//    printf(\"%d\",num[dp1[n]][n]);\n    return ;\n}\n\nvoid print(int l,int r)\n{\n    for(int i=l;i<=r;i++)\n      printf(\"%c\",s[i]);\n}\n\nint dp2[maxn];\nvoid dp_2()\n{\n    int cnt=1;\n    for(int i=dp1[n]-1;i&&s[i]=='0';i--) dp2[i]=n,cnt++;\n    dp2[dp1[n]]=n;\n    for(int i=dp1[n]-cnt;i>=1;i--)\n    {\n        for(int j=dp1[n];j>i;j--)\n          if(check(num[j][dp2[j]],num[i][j-1])==1)\n          {\n                dp2[i]=max(dp2[i],j-1);\n          }\n    }\n    if(p) while(--p) printf(\"0\");\n    for(int i=1;i<=n;i=dp2[i]+1)\n    {\n        print(i,dp2[i]);\n        if(dp2[i]!=n) printf(\",\");\n    }\n}\n\nint _[maxn];\nvoid debug()\n{\n    for(int i=1;i<=n;i++)\n      _[i]=s[i]-'0';\n}\n\nint main()\n{\n//    freopen(\"std.in\",\"r\",stdin);\n//    freopen(\"my.out\",\"w\",stdout);\n    init_data();\n    debug();\n    dp_1();\n    dp_2();\n    \n    return  0;\n}\n\n```(c/c++)\n",
        "postTime": 1450251875,
        "uid": 11280,
        "name": "QWsin",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    },
    {
        "content": "Blog\u539f\u6587\uff1ahttps://blog.csdn.net/jk_chen_acmer/article/details/87183130\n\n>\u4e3a\u4ec0\u4e48\u4e00\u773c\u641c\u7d22\u7684\u9898\u4f1a\u51fa\u73b0\u5728dp\u533a\u3002\u3002\u3002\n\n**\u5927\u5c0f\u6bd4\u8f83\u51fd\u6570\uff1a**\n\n```c\nint compare(int ll,int rr,int l,int r){\n    while(ll<rr&&x[ll]=='0')ll++;\n    while(l<r&&x[l]=='0')l++;\n    if(rr-ll>r-l)return 1;\n    if(rr-ll<r-l)return -1;\n    for(;ll<=rr;ll++,l++){\n        if(x[ll]>x[l])return 1;\n        if(x[ll]<x[l])return -1;\n    }\n    return 0;\n}\n```\n\u7b2c\u4e00\u8981\u6c42\u6700\u540e\u4e00\u4e2a\u6570\u6700\u5c0f\uff0c\u90a3\u4e48\u5148\u4ece\u540e\u5f80\u524d\uff0c\u5f97\u5230\u4e00\u4e2a\u6700\u5c0f\u7684\u6ee1\u8db3\u8981\u6c42\u7684\u6bb5\u3002\u8fd9\u4e2a\u6bb5\u53ea\u8981\u53ef\u4ee5\u505a\u5230\u6ee1\u8db3\u8981\u6c42\uff0c\u90a3\u4e48\u7b54\u6848\u6bb5\u5c31\u662f\u8fd9\u4e2a\u3002\uff08\u8fd9\u4e2a\u4e32\u7684\u524d\u9762\u53ef\u80fd\u6709\u524d\u7f000\uff09\n\n\u8fd9\u4e2a\u8fc7\u7a0b\u9700\u8981\u7528\u5230\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u5373L~R\u8fd9\u4e2a\u533a\u95f4\u53ef\u80fd\u88ab\u641c\u7d22\u591a\u6b21\uff0c\u5982\u679c\u8fd9\u4e2a\u533a\u95f4\u4e0d\u80fd\u8fbe\u5230\u8981\u6c42\uff0c\u90a3\u4e48\u6807\u8bb0-\u526a\u679d\u3002\n\n***\n\u627e\u5230\u6700\u540e\u4e00\u6bb5\u540e\uff0c\u518d\u8981\u6c42\u524d\u9762\u7684\u6570\u5927\u3002\u90a3\u4e48\u679a\u4e3e\u4ece\u5927\u5f00\u59cb\uff0c`1~L-1`\u5230`1~1`\uff0c\u5982\u679c\u6ee1\u8db3\u8981\u6c42\u5219\u6253\u6807\u8bb0\uff0cans[i]=1\u8868\u793a\u7b2ci\u4e2a\u5b57\u6bcd\u540e\u9762\u63d2\u9017\u53f7\u3002\n\n\u5f80\u540e\u641c\u7684\u8fc7\u7a0b\u4e5f\u9700\u8981\u8bb0\u5fc6\u5316\u641c\u7d22-\u6253\u6807\u8bb0\uff0c\u6211\u7b2c\u4e00\u53d1\u5fd8\u8bb0`vis[l][r]=1;`\u5c31TLE\u4e86\u3002\n\n***\n**\u7ec6\u8282\uff1a**\n\n 1. \u4e00\u4e2a\u6bb5\u5168\u662f0\u4e5f\u5224\u4e0d\u7b26\u5408\uff0c\u8981\u6c42\u6253\u6807\u8bb0\u3002\n 2. \u6700\u540e\u4e00\u6bb5L==1\u5219\u76f4\u63a5\u8f93\u51fa\u5373\u53ef\u3002\n 3. \u6700\u540e\u4e00\u6bb5L\u524d\u9762\u53ef\u80fd\u6709\u524d\u7f000\uff0c\u6240\u4ee5\u5f80\u540e\u641c\u7684\u7ed3\u675f\u6807\u5fd7\u4e3a\uff1a\u53f3\u8fb9\u754c\u843d\u5728\u4e3a0\u7684\u90a3\u4e2a\u533a\u95f4\u5185\u3002\n\n```c\n#include<bits/stdc++.h>\nusing namespace std;\n\nchar x[509];\nint len;\n\nint compare(int ll,int rr,int l,int r){\n    while(ll<rr&&x[ll]=='0')ll++;\n    while(l<r&&x[l]=='0')l++;\n    if(rr-ll>r-l)return 1;\n    if(rr-ll<r-l)return -1;\n    for(;ll<=rr;ll++,l++){\n        if(x[ll]>x[l])return 1;\n        if(x[ll]<x[l])return -1;\n    }\n    return 0;\n}\n\nbool isempty(int l,int r){\n    for(int i=l;i<=r;i++)if(x[i]!='0')return 0;\n    return 1;\n}\n\nbool vis[509][509];//\u8bb0\u5fc6\u5316\nbool check(int L,int R){\n    if(isempty(L,R)){vis[L][R]=1;return 0;}\n    if(L==1)return true;\n    for(int i=L-1;i>=1;i--){\n        if(vis[i][L-1])continue;\n        if(compare(i,L-1,L,R)<0){\n            if(check(i,L-1))return 1;\n        }\n        else break;//\u6570\u53d8\u5927\u5c31\u66f4\u4e0d\u884c\u4e86\n    }\n    vis[L][R]=1;//\u6807\u8bb0\n    return 0;\n}\n\nint L,LL;\nbool ans[509];\n\nbool check2(int l,int r){\n    if(vis[l][r])return 0;\n    if(isempty(l,r)){vis[l][r]=1;return 0;}\n    if(compare(l,r,L,len)>=0){vis[l][r]=1; return 0;}\n    \n    //\u641c\u7d22\u7ed3\u675f\n    if(r>=LL-1&&r<=L-1){ans[r]=1;return 1;}\n\n    for(int i=L-1;i>r;i--){\n        if(compare(r+1,i,L,len)>=0){\n            vis[r+1][i]=1;continue;\n        }\n        if(compare(r+1,i,l,r)<=0)continue;\n        if(check2(r+1,i)){\n            ans[i]=1;return 1;\n        }\n    }\n    vis[l][r]=1;//\u6807\u8bb0\n    return 0;\n}\n\nint main(){\n    scanf(\"%s\",x+1);\n    len=strlen(x+1);\n    L=1;\n    \n    for(L=len;L>=1;L--){\n        if(check(L,len)){break;}\n    }\n    if(L==1)return 0*printf(\"%s\\n\",x+1);\n\n    LL=L;while(LL>1&&x[LL-1]=='0')LL--;\n\n    memset(vis,0,sizeof(vis));\n    for(int i=L-1;i>=1;i--){\n        if(check2(1,i)){\n            ans[i]=1;break;\n        }\n    }\n    for(int i=1;i<=len;i++){\n        printf(\"%c\",x[i]);\n        if(ans[i])printf(\"%c\",',');\n    }\n    printf(\"\\n\");\n}\n\n```\n",
        "postTime": 1550041795,
        "uid": 120439,
        "name": "jkchen",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1415 \u3010\u62c6\u5206\u6570\u5217\u3011"
    }
]
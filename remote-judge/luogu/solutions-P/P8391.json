[
    {
        "content": "\u5982\u679c\u6309\u7167\u7ed9\u5b9a\u7684\u9898\u610f\u76f4\u63a5\u6a21\u62df\uff0c\u5c31\u4f1a\u53d1\u73b0\u6bcf\u6b21\u5411\u53f3\u8fb9\u8df3\u4f1a\u6709\u591a\u79cd\u9009\u62e9\uff0c\u800c\u6211\u4eec\u65e0\u6cd5\u5728\u8fd9\u591a\u79cd\u9009\u62e9\u4e2d\u505a\u51fa\u51b3\u7b56\u3002\n\n\u6240\u4ee5\u6211\u4eec\u9009\u62e9\u5012\u7740\u505a\uff0c\u4ece $t$ \u8df3\u56de\u5230 $s$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u533a\u95f4\u7684 $l,r$ \u90fd\u4e0d\u589e\uff0c\u90a3\u4e48\u6211\u4eec\u6bcf\u6b21\u9009\u62e9\u80fd\u8df3\u5230\u7684\u533a\u95f4\u4e2d $l$ \u6700\u5c0f\u5373\u53ef\u3002\u9884\u5904\u7406\u540e\u76f4\u63a5\u500d\u589e\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}((n + q)\\log n)$\u3002\n\n```cpp\n#define N 100005\n#define M 200005\nint n, q, l[N], r[N], f[N][17], w, c[M], u[M], m; vector<int>a[M], b[M];\nint ck(int x,int y){return l[x] < l[y] ? x : y;}\ninline void ins(int x,int w){for(; x <= m; x += x & -x)c[x] = ck(c[x], w);}\ninline int ask(int x){int w = 0; for(; x; x -= x & -x)w = ck(c[x], w); return w;}\nint main() {\n\tread(n, q), w = log2(n);\n\trp(i, n)read(l[i], r[i]), u[++m] = l[i], u[++m] = r[i];\n\tsort(u + 1, u + m + 1), m = unique(u + 1, u + m + 1) - u - 1;\n\trp(i, n){\n\t\tl[i] = lower_bound(u + 1, u + m + 1, l[i]) - u, r[i] = lower_bound(u + 1, u + m + 1, r[i]) - u;\n\t\ta[l[i]].pb(i), b[r[i]].pb(i);\n\t}\n\tl[0] = inf;\n\tpr(i, m){\n\t\tgo(x, b[i])ins(i, x);\n\t\tgo(x, a[i])f[x][0] = ask(r[x]);\n\t}\n\trp(j, w)rp(i, n)f[i][j] = f[f[i][j - 1]][j - 1];\n\twhile(q--){\n\t\tint s, t;\n\t\tread(s, t);\n\t\tif(r[s] > r[t])puts(\"impossible\");\n\t\telse if(s == t)puts(\"0\");\n\t\telse{\n\t\t\tint ans = 1;\n\t\t\tpre(i, w, 0)if(l[f[t][i]] > r[s])ans += 1 << i, t = f[t][i];\n\t\t\tif(l[f[t][0]] > r[s]){puts(\"impossible\"); continue;}\n\t\t\tif(l[t] > r[s])ans++;\n\t\t\tprintf(\"%d\\n\", ans);\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1655597639,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011\u300cBalticOI 2022 Day1\u300dEvent Hopping"
    }
]
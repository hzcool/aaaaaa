[
    {
        "content": "\u62d3\u6251\u6392\u5e8f\u6a21\u677f\u9898\u3002\n\n\u8fd9\u91cc\u6211\u7528\u4e86\u5e7f\u641c\u7684\u5220\u8fb9\u6cd5\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\uff0c\u4ece\u5165\u5ea6\u4e3a0\u7684\u70b9\u5f00\u59cb\u641c\u7d22\uff0c\u6bcf\u5220\u4e00\u6761\u8fb9\u5165\u5ea6\u51cf1\u3002\n\nAC\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<vector>\n#include<queue>\nusing namespace std;\n \nconst int MAXN=10001;\nint n,m,ans,t[MAXN],tot[MAXN],d[MAXN];\nvector<int> g[MAXN];\nqueue<int> q;\n \nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n        cin>>t[i];\n    for(int i=1;i<=m;i++)\n    {\n        int x,y;\n        cin>>x>>y;\n        g[x].push_back(y);\n        d[y]++;//\u8bb0\u5f55\u5165\u5ea6\n    }\n    for(int i=1;i<=n;i++)\n    {\n        if(d[i]==0)//\u5165\u5ea6\u4e3a0\u7684\u70b9\u5165\u961f\n        {\n            tot[i]=t[i];\n            q.push(i);\n        }\n    }\n    while(!q.empty())\n    {\n        int u=q.front();\n        q.pop();\n        for(int i=0;i<g[u].size();i++)\n        {\n            int v=g[u][i];\n            d[v]--;//\u5220\u8fb9\n            tot[v]=max(tot[v],tot[u]+t[v]);\n            if(d[v]==0)q.push(v);//\u5165\u5ea6\u4e3a0\u7684\u70b9\u5165\u961f\n        }\n    }\n    for(int i=1;i<=n;i++)\n        ans=max(tot[i],ans);\n    cout<<ans;\n    return 0;\n}\n```",
        "postTime": 1535189851,
        "uid": 114279,
        "name": "\u71d5\u6708\u9f50\u6b4c\u706c",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "2019.7.20\n\n**\u597d\u591a\u5927\u4f6c\u90fd\u7528\u62d3\u6251\uff0c\u7531\u4e8e\u6211\u592a\u5f31\u4e86\uff0c\u53ea\u597d\u7528\u66b4\u529b\u3002**\n\n\u601d\u8def\uff1a\u628a\u6bcf\u5934\u725b\u770b\u4f5c\u4e00\u4e2a\u70b9\uff0c\u82e5\u9700\u8981\u6ee1\u8db3\u5148\u540e\u987a\u5e8f\uff0c\u5219\u7528rule\u6570\u7ec4\u8bb0\u5f55\u3002\n\nrule[i][j]\u8868\u793a\u4ecei\u53d1\u51fa\u7684\u7b2cj\u6761\u7ebf\u6307\u5411\u7684\u70b9\u3002\u8fd9\u6837\u5199\u7684\u597d\u5904\u662f\u6700\u5927\u5316\u5229\u7528\u6570\u7ec4\u3002\n\n\u672c\u9898\u53ca\u5176\u5bb9\u6613TLE\uff0c\u4e8e\u662f\u6211\u5f00\u4e86\u4e00\u4e2af\u6570\u7ec4\uff0cf[i]\u8868\u793a\u4ecei\u70b9\u5f00\u59cb\u5f80\u540e\u53d6\u81f3\u5c11\u8981\u7528\u7684\u65f6\u95f4\uff0c\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u505a\u8fc7\u591a\u7684\u5197\u4f59\u8fd0\u7b97\u3002\n\n\u5176\u4f59\u7684\u6570\u7ec4\u4e2drout[i]\u8868\u793a\u4ecei\u53d1\u51fa\u7ebf\u7684\u4e2a\u6570\uff0ct[i]\u8868\u793a\u5976\u725bi\u6324\u5976\u9700\u8981\u7684\u65f6\u95f4\n\n\u4ee3\u7801\u5728\u6b64~~~\n\n```cpp\n#include<cstdio>\n#include<algorithm>//\u7b97\u6cd5\u5e93\nusing namespace std;\nconst int MAXN=10010,MAXM=50010;\nint rule[MAXN][MAXM],rout[MAXM],t[MAXN],f[MAXN],ans=0;//\u5982\u4e0a\u6240\u8ff0\uff0c\u81ea\u52a8\u521d\u59cb\u5316\u4e3a0\nint find(int x){\n\tif(f[x]) return f[x];//\u5982\u679c\u4ee5\u524d\u7b97\u8fc7\uff0c\u76f4\u63a5\u8fd4\u56de\n\tint maxt=0;//\u4ece\u70b9x\u5f80\u540e\u53d6\u81f3\u5c11\u8981\u7528\u7684\u65f6\u95f4\n\tfor(int i=1;i<=rout[x];i++){\n\t\tmaxt=max(maxt,find(rule[x][i]));\n\t}\n\treturn f[x]=maxt+t[x];//\u522b\u5fd8\u4e86\u52a0\u4e0a\u539f\u7528\u65f6\u95f4\n}\nint main(){\n\tint n,m,a,b;\n\tscanf(\"%d%d\",&n,&m);//\u8bfb\u5165\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&t[i]);\n\twhile(m--){\n\t\tscanf(\"%d%d\",&a,&b);\n\t\trule[a][++rout[a]]=b;\n\t}\n\tfor(int i=1;i<=n;i++){//\u6c42\u51fa\u81f3\u5c11\u8981\u7528\u7684\u65f6\u95f4ans\n\t\tfind(i);\n\t\tans=max(ans,f[i]);\n\t}\n\tprintf(\"%d\",ans);//\u8f93\u51fa\n\treturn 0;//\u534e\u4e3d\u7ed3\u675f\n}\n```\n~~\u6284\u9898\u89e3\u4e0d\u662f\u597d\u4e60\u60ef~~\n\nupdate:2019.10.7\n\n\u65f6\u9694\u4e24\u4e2a\u6708\uff0c\u65b0\u5b66\u4e86\u62d3\u6251\u6392\u5e8f\uff0c\u53d1\u73b0\u6211\u7684\u65b9\u6cd5\u548c\u62d3\u6251\u6392\u5e8f\u8fd8\u662f\u633a\u50cf\u7684\u3002\u3002\u3002\n\n\u4e0a\u9762\u7684\u4ee3\u7801\u867d\u7136\u4e0d\u4f1aTLE\u4f46\u662f\u5f88\u53ef\u80fdMLE\uff0c\u9700\u8981\u7528vector\u4f18\u5316\u3002\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<vector>//\u5934\u6587\u4ef6\nusing namespace std;\nconst int MAXN=10010;\nvector<int> rule[MAXN];\nint t[MAXN],f[MAXN],ans=0;\nint find(int x){\n\tif(f[x]) return f[x];\n\tint maxt=0;\n\tfor(int i=0;i<rule[x].size();i++){//\u8fd9\u91cc\u6539\n\t\tmaxt=max(maxt,find(rule[x][i]));\n\t}\n\treturn f[x]=maxt+t[x];\n}\nint main(){\n\tint n,m,a,b;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&t[i]);\n\twhile(m--){\n\t\tscanf(\"%d%d\",&a,&b);\n\t\trule[a].push_back(b);//\u8fd8\u6709\u8fd9\u91cc\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfind(i);\n\t\tans=max(ans,f[i]);\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\u8fd9\u6837\u5c31\u4e0d\u4f1a\u8d85\u7a7a\u95f4\u5566~",
        "postTime": 1563634273,
        "uid": 130981,
        "name": "dingcx",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "\u5178\u578b\u7684\u62d3\u6251\u6392\u5e8f\uff0c\u6ce8\u610f\u70b9\u7684\u4fee\u6539\u5c31\u597d\u4e86\uff0c\u7a0b\u5e8f\u6709\u5199\u4e86\u6ce8\u89e3\u5e94\u8be5\u5bb9\u6613\u770b\u61c2\n```cpp\n# include<cstdio>\n# include<queue>\n# include<iostream>\nusing namespace std;\nint n,m,num=0,ans=0,u,v;\nint t[10005],to[50005],bian[50005],v_u[10005],ru[10005],before[10005],pay[10005];\nqueue<int> q;\ninline void read(){//\u8282\u7701\u7a7a\u95f4 ,inline\u7684\u7528\u6cd5\uff1ahttps://www.cnblogs.com/fnlingnzb-learner/p/6423917.html \n\tscanf(\"%d%d\",&u,&v);\n\t++ru[v];\n\tto[++num]=v;//\u5b58\u7b2cnum\u6761\u8fb9\u7684v \n\tbian[num]=v_u[u];//\u5b58\u7b2cnum\u6761\u8fb9\u524d\u4e00\u6761\u8fb9\uff08\u5c5e\u4e8eu\uff09 \n\tv_u[u]=num;//\u5b58\u5c5e\u4e8eu\u7684\u6700\u540e\u4e00\u6761\u8fb9 \n}\nvoid qiu(){\n\tfor(int i=1;i<=n;++i) if(!ru[i]) q.push(i);\n\twhile(!q.empty()){\n\t\tu=q.front(); q.pop();\n\t\tpay[u]=before[u]+t[u];//\u505a\u5b8cu\u7684\u65f6\u95f4\u53ef\u4ee5\u786e\u5b9a\u4e0b\u6765=\u5728\u505au\u4e4b\u524d\u7684\u65f6\u95f4+\u505au\u7684\u65f6\u95f4 \n\t\tans=max(ans,pay[u]);//\u6700\u7ec8\u89e3\u4e3a\u6240\u6709\u9876\u70b9\u4e2d\u6700\u665a\u7ed3\u675f\u65f6\u95f4 \n\t\tfor(int i=v_u[u];i;i=bian[i]){//\u53c2\u8003read()\u51fd\u6570\u53ef\u4ee5\u66f4\u597d\u7406\u89e3,\u5176\u5b9e\u5c31\u662f\u904d\u5386u\u7684\u6240\u6709\u8fb9 \n\t\t\tv=to[i];//\u6b64\u8fb9\u7684v\n\t\t\t--ru[v]; \n\t\t\tbefore[v]=max(before[v],pay[u]);//v\u6240\u6709\u524d\u63d0\u7684\u8fb9\u6240\u9700\u65f6\u95f4,\u5f97\u628au\u5168\u90e8\u505a\u5b8c\u624d\u80fd\u505av\n\t\t\tif(!ru[v]) q.push(v);\n\t\t}\n\t}\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i) scanf(\"%d\",&t[i]);\n\tfor(int i=1;i<=m;++i) read();\n\tqiu();\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\n\n\n\n\u6709\u6ca1\u6709dalao\u5e2e\u5fd9\u89e3\u91ca\u4e00\u4e0b\u8fd9\u6837\u5199\u4e3a\u4ec0\u4e48Compile Error\n```cpp\n# include<cstdio>\n# include<queue>\n# include<iostream>\nusing namespace std;\nint n,m,num=0,ans=0,u,v;\nint t[10005],to[50005],bian[50005],v_u[10005],ru[10005],before[10005],pay[10005];\nqueue<int> q;\ninline void read(){//\u8282\u7701\u7a7a\u95f4 ,inline\u7684\u7528\u6cd5\uff1ahttps://www.cnblogs.com/fnlingnzb-learner/p/6423917.html \n\tscanf(\"%d%d\",&u,&v);\n\t++ru[v];\n\tto[++num]=v;//\u5b58\u7b2cnum\u6761\u8fb9\u7684v \n\tbian[num]=v_u[u];//\u5b58\u7b2cnum\u6761\u8fb9\u524d\u4e00\u6761\u8fb9\uff08\u5c5e\u4e8eu\uff09 \n\tv_u[u]=num;//\u5b58\u5c5e\u4e8eu\u7684\u6700\u540e\u4e00\u6761\u8fb9 \n}\nvoid qiu(){\n\tfor(int i=1;i<=n;++i) if(!ru[i]) q.push(i);\n\twhile(!q.empty()){\n\t\tu=q.front(); q.pop();\n\t\tpay[u]=before[u]+t[u];//\u505a\u5b8cu\u7684\u65f6\u95f4\u53ef\u4ee5\u786e\u5b9a\u4e0b\u6765=\u5728\u505au\u4e4b\u524d\u7684\u65f6\u95f4+\u505au\u7684\u65f6\u95f4 \n\t\tans=max(ans,pay[u]);//\u6700\u7ec8\u89e3\u4e3a\u6240\u6709\u9876\u70b9\u4e2d\u6700\u665a\u7ed3\u675f\u65f6\u95f4 \n\t\tfor(int i=v_u[u];i;i=bian[i]){//\u53c2\u8003read()\u51fd\u6570\u53ef\u4ee5\u66f4\u597d\u7406\u89e3,\u5176\u5b9e\u5c31\u662f\u904d\u5386u\u7684\u6240\u6709\u8fb9 \n\t\t\tv=to[i];//\u6b64\u8fb9\u7684v\n\t\t\t--ru[v]; \n\t\t\tbefore[v]=max(before[v],pay[u]);//v\u6240\u6709\u524d\u63d0\u7684\u8fb9\u6240\u9700\u65f6\u95f4,\u5f97\u628au\u5168\u90e8\u505a\u5b8c\u624d\u80fd\u505av\n\t\t\tif(!ru[v]) q.push(v);\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n\texit(0);\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i) scanf(\"%d\",&t[i]);\n\tfor(int i=1;i<=m;++i) read();\n\tqiu();\n}\n```",
        "postTime": 1530886085,
        "uid": 88804,
        "name": "y2823774827y",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "## \u672c\u4eba\u601d\u8def\uff1a\u62d3\u6251\u601d\u60f3+\u7b80\u5355\u6a21\u62df  ##\n```\n\u8fd9\u9053\u9898\u5176\u5b9e\u5e76\u4e0d\u96be\uff0c\u53ea\u662f\u7528\u5230\u4e86\u62d3\u6251\u7684\u601d\u60f3\uff0cA\u5976\u725b\u5fc5\u987b\u5728B\u5976\u725b\u6324\u5976\u524d\u6324\u5976\uff0c\u8fd9\u5c31\u5f62\u6210\u4e86\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u70b9A\u6307\u5411\u70b9B\u3002\n```\n#### \u6211\u4eec\u53ea\u9700\u8981\u8bb0\u4e00\u4e0b\u603b\u91cf\uff08\u5b9e\u9645\u4e0a\u662f\u6bcf\u53ea\u5976\u725b\u6324\u5976\u65f6\u95f4\u7684\u603b\u548c\uff09\uff0c\u6bcf\u4e00\u6b21\u5faa\u73af\u5c06\u5165\u5ea6\u4e3a0\u7684\u5976\u725b\u52a0\u5165\u8981\u6324\u5976\u7684\u6570\u7ec4\uff0c\u5e76\u4e14\u53d6\u6324\u5976\u6570\u7ec4\u7684\u6700\u5c0f\u503c\uff0c\u8ba9\u5728\u6324\u5976\u6570\u7ec4\u91cc\u7684\u5976\u725b\u51cf\u53bb\u6700\u5c0f\u503c\uff0c\u5982\u679c\u4e00\u4e2a\u5976\u725b\u6324\u5b8c\u5976\u4e86\uff0c\u90a3\u5c31\u5220\u9664\u4e0e\u5b83\u76f8\u8fde\u7684\u8fb9\uff0c\u5e76\u4e14\u76f8\u8fde\u7684\u70b9\u5165\u5ea6\u51cf\u4e00\uff0c\u603b\u65f6\u95f4\u52a0\u4e0a\u6700\u5c0f\u503c\uff0c\u603b\u91cf\u51cf\u53bb\u6700\u5c0f\u503c*\u6324\u5976\u725b\u6570\uff0c\u76f4\u5230\u603b\u91cf\u4e3a0\u7ed3\u675f,\u5982\u679c\u5230\u8fd9\u91cc\u8fd8\u4e0d\u61c2\u53ef\u4ee5\u770b\u4ee3\u7801\uff0c\u4ee3\u7801\u6709\u66f4\u8be6\u7ec6\u7684\u89e3\u91ca\u3002####\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define maxn 10007\nusing namespace std;\nint n,m,minn,ans,tot,len;  //n\u5976\u725b\u6570\u76ee m\u6709\u5148\u540e\u8981\u6c42\u7684\u91cf minn\u6324\u5976\u6570\u7ec4\u7684\u6700\u5c0f\u503c ans\u6700\u540e\u7b54\u6848  tot\u603b\u91cf len\u6324\u5976\u6570\u7ec4\u957f\u5ea6 \nint a[maxn],ru[maxn],q[maxn];  //a[]\u6bcf\u53ea\u5976\u725b\u6324\u5976\u65f6\u95f4 ru[]\u6bcf\u53ea\u5976\u725b\u7684\u5165\u5ea6 q[]\u6324\u5976\u6570\u7ec4 \nbool edg[20000][20000];  //\u4e8c\u7ef4\u6570\u7ec4\u5efa\u56fe\uff08\u6a21\u62df\u5927\u6cd5\u597d\uff09 \nint main()  //\u7a0b\u5e8f\u5f00\u59cb \n{\n\tscanf(\"%d%d\",&n,&m);   \n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]),tot+=a[i];  //\u8f93\u5165\uff0c\u5e76\u4e14\u8ba1\u7b97\u603b\u91cf \n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint x,y;\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tru[y]++;  //x\u6307\u5411y  y\u5165\u5ea6+1 \n\t\tedg[x][y]=1;  //\u5efa\u56fe \n\t}\n\twhile(tot)  //\u76f4\u5230\u603b\u91cf\u4e3a0\u7ed3\u675f \n\t{\n\t\tminn=0x7fffffff;  //\u5148\u8d4b\u4e00\u4e2a\u6700\u5927\u503c \n\t\tlen=0; \n\t\tmemset(q,0,sizeof(q));  //\u6324\u5976\u6570\u7ec4\u957f\u5ea6\u3001\u5185\u5bb9\u6e05\u96f6 \n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tif(!ru[i]&&a[i]>0)  q[++len]=i,minn=min(minn,a[i]);  //\u627e\u8fd8\u6709\u5976\u5e76\u4e14\u5165\u5ea6\u4e3a0\u7684\u5976\u725b\u52a0\u5165\u6324\u5976\u6570\u7ec4 && \u8ba1\u7b97\u6324\u5976\u6700\u5c0f\u503c \n\t\t}\n\t\tfor(int i=1;i<=len;i++)\n\t\t{\n\t\t\ta[q[i]]-=minn;  //\u6bcf\u53ea\u6324\u5976\u5976\u725b\u51cf\u53bb\u6700\u5c0f\u503c \n\t\t\tif(a[q[i]]<=0)  //\u5904\u7406\u6ca1\u5976\u7684\u5976\u725b \n\t\t\t{\n\t\t\t\tfor(int j=1;j<=n;j++)\n\t\t\t\t{\n\t\t\t\t\tif(edg[q[i]][j]==1)  ru[j]--,edg[q[i]][j]=0;  //\u5220\u9664\u548c\u5b83\u76f8\u8fde\u7684\u6240\u6709\u8fb9\u4ee5\u53ca\u548c\u5b83\u76f8\u8fde\u70b9\u7684\u5165\u5ea6 \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\ttot-=(minn*len);  //\u603b\u91cf\u51cf\u53bb\uff08\u6700\u5c0f\u503c*\u6324\u5976\u5976\u725b\u6570\uff09 \n\t\tans+=minn;   //\u9700\u8981\u65f6\u95f4\uff08\u7b54\u6848\uff09\u52a0\u4e0a\u6700\u5c0f\u503c \n\t}\n\tprintf(\"%d\",ans);  //\u8f93\u51fa \n\treturn 0;  //\u7a0b\u5e8f\u7ed3\u675f \n}\n```\n##### \u53e6\u5916\u5631\u5490\u5927\u5bb6\u4e00\u53e5\uff1a\u6570\u7ec4\u4e00\u5b9a\u8981\u591f\u5927\uff0c\u5426\u5219[RE](https://www.luogu.org/record/show?rid=12080872) #####\n## \u6700\u540e\u795d\u5927\u5bb6\n# RP++\uff1b\n###### \u62d2\u7edd\u4ee3\u7801\u6284\u88ad\uff0c\u5171\u5efa\u7f8e\u597d\u6d1b\u8c37\u3002",
        "postTime": 1539877784,
        "uid": 43383,
        "name": "Sunlight9",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "\n\n\n\n\n\n\n\n```cpp\n//~~\u4e00\u4e2a\u6700\u7ecf\u5178\u7684\u62d3\u6251\u6392\u5e8f~~ \n//\u770b\u5230\u8fd9\u79cd\u5b58\u5728\u5148\u540e\u5173\u7cfb\u7684\u9898\u76ee\uff0c\u6211\u4eec\u5e94\u8be5\u7acb\u523b\u60f3\u5230\u62d3\u6251\n//\u5148\u6253\u4e00\u4e2a\u62d3\u6251\u7684\u6a21\u677f\uff0c\u7136\u540e\u5728\u6392\u5e8f\u7684\u65f6\u5019\u6c42\u6700\u5927\u503c\u5c31\u53ef\u4ee5\u4e86\n//\u4e0d\u591a\u8bf4\u4e86\uff0c\u653e\u4ee3\u7801\n#include <bits/stdc++.h>\n#define Max(a,b) ((a)>(b)?(a):(b))\n#define Min(a,b) ((a)<(b)?(a):(b))\n#define f(i,a,b) for(int i=a;i<=b;i++)\n#define LL long long \nusing namespace std;\nconst int Ma=50000+10;\nint n,m,cnt,cen,ans,mx;\nint chu[Ma],head[Ma],num[Ma],tim[Ma],t[Ma];\nstruct node {\n    int u,v,next;\n}e[Ma];\nvoid add(int x,int y) {\n    e[++cnt].u=x;e[cnt].v=y;e[cnt].next=head[x];\n    head[x]=cnt;\n}\nqueue <int> q;\nvoid BFS() {\n    while (!q.empty())\n    {\n        int root=q.front();q.pop();\n        tim[root]=num[root]+t[root];\n        mx=Max(mx,tim[root]);\n        for (int i=head[root],to;i,to=e[i].v;i=e[i].next)\n        {  \n                chu[to]--;\n                num[to]=max(num[to],tim[root]);\n                if (!chu[to]) \n                {\n                    q.push(to);\n                 }         \n        }\n    }\n}\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    f(i,1,n) scanf(\"%d\",&t[i]);\n    f(i,1,m) {\n        int a,b;\n        scanf(\"%d%d\",&a,&b);\n        add(b,a);\n        chu[a]++;\n    }\n    f(i,1,n) \n        if (!chu[i]) q.push(i);\n    BFS(); \n    printf(\"%d\",mx);\n    return 0;\n}\n```",
        "postTime": 1509972110,
        "uid": 53302,
        "name": "Vimpire_D",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "#\u770b\u5230\u9898\u76ee\uff0c\u5c31\u770b\u5230\u4e86\u5148\u540e\u5173\u7cfb\uff1aX\u5fc5\u987b\u5728Y\u4e4b\u524d\u6324\u5976\u3002\u90a3\u4f1a\u8ba9\u6211\u4eec\u60f3\u5230\u4ec0\u4e48\uff1f\n\n#\u62d3\u6251\uff01\n\n##\u6ca1\u9519\uff0c\u62d3\u6251\u5c31\u662f\u53ef\u4ee5\u7528\u6765\u89e3\u51b3\u5e26\u6709\u8fd9\u79cd\u5148\u540e\u5173\u7cfb\u7684\u9898\u76ee\u3002\uff08\u5199\u7b2c\u4e00\u7bc7\u9898\u89e3\u7684\u5927\u4f6c\u7528\u4e86\u5e76\u67e5\u96c6\uff0c\u6211\u4e0d\u77e5\u9053\u62d3\u6251\u662f\u4e0d\u662f\u6b63\u89e3\uff09\n\n###\u90a3\u8be5\u600e\u4e48\u5904\u7406\u5462\uff1f\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u7236\u8282\u70b9X\uff0c\u6211\u4eec\u53ef\u4eceX\u4f17\u591a\u7684\u513f\u5b50\u8282\u70b9\u4e2d\u627e\u51fa\u4e00\u4e2a\u6700\u5927\u7684\u503c\uff0c\u7136\u540e\u7528\u8be5\u65f6\u95f4\u52a0\u4e0a\u6324X \u7684\u65f6\u95f4\u4e0e\u5df2\u6c42\u597d\u7684\u6324\u5230X\u7684\u65f6\u95f4\u3002\n\n###\u53ef\u80fd\u7c7b\u4f3c\u4e8eDP\uff08\u6216\u6c42\u6700\u957f\u8def\u5f84\uff0c\u6709\u8fd9\u79cd\u610f\u601d\uff09\n\n\u4e0a\u4ee3\u7801\uff08\u6709\u4e0d\u61c2\u53ef\u4ee5\u79c1\u4fe1\uff0c\u4ee3\u7801\u6709\u6ce8\u91ca\uff09\uff1a\n\n\n\n```cpp\nvar\n  n,m,i,tot,x,y,ans:longint;\n  link,f,q,dis:array[0..10005] of longint;\n  next,w,son:array[0..50005] of longint;\n  function max(a,b:longint):longint;  //\u6c42\u51faa,b\u4e24\u8005\u7684\u8f83\u5927\u503c\n  begin\n    if a>b then exit(a)\n           else exit(b);\n  end;\n  procedure BFS;\n  var\n    h,t,i,j:longint;\n  begin\n    h:=0;\n    t:=0;\n    for i:=1 to n do\n    if f[i]=0 then\n    begin\n      inc(t);\n      q[t]:=i;\n      dis[i]:=w[i];  //\u5bfb\u627e\u5230\u5165\u5ea6\u4e3a0\u7684\u70b9\uff08\u5373\u53f6\u5b50\u8282\u70b9\uff09\u5c06\u5176\u5165\u961f\n    end;\n    while h<>t do\n    begin\n      inc(h);  //\u8981\u7701\u7a7a\u95f4\u53ef\u4ee5\u6eda\u8d77\u6570\u7ec4\u6765\n      j:=link[q[h]];  //\u53d6q[h]\u7684\u6700\u540e\u4e00\u6761\u8fb9\u7684\u7f16\u53f7\n      while j<>0 do\n      begin\n        dec(f[son[j]]);  //\u8fd9\u4e2a\u70b9\u5df2\u7ecf\u88ab\u904d\u5386\u8fc7\uff0c\u56e0\u6b64\u5c06\u5b83\u7684\u513f\u5b50\u8282\u70b9\u7684\u5165\u5ea6\u51cf\u4e00\n        dis[son[j]]:=max(dis[son[j]],dis[q[h]]+w[son[j]]);  //\u5237\u6700\u5927\u503c\u201c\u6700\u957f\u8def\u5f84\u201d\n        if f[son[j]]=0 then\n        begin\n          inc(t);\n          q[t]:=son[j];  //\u5982\u679c\u5b83\u7684\u513f\u5b50\u8282\u70b9\u5168\u90e8\u88ab\u904d\u5386\u8fc7\uff0c\u90a3\u4e48\u5c31\u5165\u961f\n        end;\n        j:=next[j];  //\u53d6\u7b2cj\u6761\u8fb9\u7684\u4e0a\u4e00\u6761\u8fb9\u7684\u7f16\u53f7\n      end;\n    end;\n    ans:=0;\n    for i:=1 to n do ans:=max(ans,dis[i]);  //\u5237\u4e00\u8d9f\u7b54\u6848\n  end;\nbegin\n  readln(n,m);  \n  for i:=1 to n do readln(w[i]);  //\u5e05\u6c14\u7684\u8bfb\u5165\n  for i:=1 to m do\n  begin\n    readln(x,y);\n    inc(f[y]);  //\u7edf\u8ba1\u4e00\u4e2a\u70b9\u7684\u5165\u5ea6\n    inc(tot);\n    son[tot]:=y;\n    next[tot]:=link[x];\n    link[x]:=tot;  //\u9ad8\u7aef\u7684\u90bb\u63a5\u8868\u5efa\u56fe\n  end;\n  BFS;  //\u4f7f\u7528\u65e0\u654c\u7684BFS\u7248\u62d3\u6251\n  writeln(ans);  //\u7edd\u5bf9\u6b63\u786e\u7684\u8f93\u51fa\nend.\n```",
        "postTime": 1502889882,
        "uid": 34834,
        "name": "MessiYT",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "# \u9898\u89e3\n\u63d0\u5230\u5148\u540e\u987a\u5e8f\uff0c\u5c31\u4e0d\u96be\u60f3\u5230**\u62d3\u6251\u6392\u5e8f**\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u867d\u7136\u8fd9\u9053\u9898\u95ee\u7684\u662f\u603b\u65f6\u95f4\u7684\u6700\u5c0f\u503c\uff0c\u4f46\u6211\u4eec\u8981\u6c42\u7684\u662f\u8fd9\u5f20\u56fe\u7684**\u6700\u957f\u8def**\u3002\u4e0b\u9762\u6211\u4eec\u6765\u8bc1\u660e\u4e00\u4e0b\uff1a  \n\u9996\u5148\u8981\u660e\u786e\u7684\u662f\uff0c\u9898\u76ee\u7ed9\u5b9a\u7684\u56fe\u4e0d\u4e00\u5b9a\u8fde\u901a\uff08\u6837\u4f8b\u5c31\u5177\u6709\u8fd9\u4e2a\u6027\u8d28\uff09,\u56e0\u6b64\u6211\u4eec\u5c31\u8981\u628a\u5b83\u5206\u6210\u591a\u4e2a\u90e8\u5206\u3002  \n\u63a5\u7740\u53ef\u4ee5\u5f97\u51fa\u4e24\u4e2a\u7ed3\u8bba\uff1a\u6bcf\u4e2a\u90e8\u5206\u4e4b\u95f4\u662f**\u76f8\u4e92\u72ec\u7acb**\u7684\uff0c\u7528\u9898\u76ee\u7684\u8bdd\u8bf4\u5c31\u662f\u53ef\u4ee5\u540c\u65f6\u6324\u5976\uff1b\u6bcf\u4e2a\u90e8\u5206\u5185\u90e8\u662f**\u76f8\u4e92\u7ea6\u675f**\u7684\uff0c\u5fc5\u987b\u8981\u7b49\u524d\u9762\u7684\u5976\u725b\u6324\u5b8c\u540e\u518d\u6324\u4e0b\u4e00\u53ea\u3002  \n\u6700\u540e\uff0c\u6211\u4eec\u8bbe\u6bcf\u4e2a\u90e8\u5206\u7684\u7528\u65f6\u4e3a $t_1,t_2,...,t_k$\uff0c\u4e0d\u96be\u5f97\u51fa\u603b\u7528\u65f6\u4e3a $\\max\\left\\{t_1,t_2,...,t_k\\right\\}$\uff0c\u5373\u4e3a\u539f\u56fe\u6700\u957f\u8def\u3002\n## \u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int maxn=10005;\nint n,m,t[maxn],r[maxn],f[maxn],ans;\nvector<int> g[maxn];\nqueue<int> q;\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++)\n        scanf(\"%d\",&t[i]);\n    for(int i=1;i<=m;i++)\n    {\n        int a,b;\n        scanf(\"%d%d\",&a,&b);\n        g[a].push_back(b);\n        r[b]++;\n    }\n    for(int i=1;i<=n;i++)\n    {\n        if(!r[i])\n        {\n        \tf[i]=t[i];\n        \tq.push(i);\n\t\t}\n    }\n    while(!q.empty())\n    {\n        int tmp=q.front();\n        q.pop();\n        for(int i=0;i<g[tmp].size();i++)\n        {\n            f[g[tmp][i]]=max(f[g[tmp][i]],f[tmp]+t[g[tmp][i]]);\n            if(--r[g[tmp][i]]==0)\n                q.push(g[tmp][i]);\n        }\n    }\n    for(int i=1;i<=n;i++)\n    \tans=max(ans,f[i]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1637161012,
        "uid": 379058,
        "name": "Ginger_he",
        "ccfLevel": 0,
        "title": "\u6d1b\u8c37P3074\u9898\u89e3"
    },
    {
        "content": "[\u539f\u9898\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P3074)\n\n\u8fd9\u9053\u9898\u5927\u90e8\u5206\u4eba\u90fd\u662f\u5199\u62d3\u8865\u6392\u5e8f\u7684\uff0c\u6211\u8865\u5145\u4e00\u4e0b\u5de8\u4f6c [dingcx](https://www.luogu.com.cn/user/130981) \u7684\u505a\u6cd5\uff0c\u53ef\u80fd\u4e5f\u7b97\u662f\u62d3\u8865\u6392\u5e8f\u7684\u4e00\u79cd\u5427\u3002\n\n\u5176\u5b9e\u8fd9\u79cd\u505a\u6cd5\u53ef\u4ee5\u7406\u89e3\u6210\u4e00\u5f00\u59cb\u6211\u4eec\u6709\u8bb8\u591a\u68f5\u6811\uff0c\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u627e\u5230\u4e00\u6761\u4ece\u6839\u8d70\u5230\u53f6\uff0c\u8d70\u8fc7\u7684\u70b9\u7684\u548c\u6700\u5927\u3002\u4ee5\u4e0b\u9762\u8fd9\u7ec4\u6837\u4f8b\u4e3a\u4f8b\uff1a\n```\n10 5\n1 2 3 4 5 6 7 8 9 10\n1 3\n2 3\n3 5\n4 5\n5 7\n```\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/9e6fcz1u.png)\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u70b9 $1$\u3001$2$\u3001$4$\u3001$6$\u3001$8$\u3001$9$\u3001$10$ \u5f53\u4f5c\u6811\u6839\uff0c\u8981\u8d70\u5230\u5176\u5bf9\u5e94\u7684\u53f6\u5b50\u8282\u70b9\u3002\n\n\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6df1\u641c\u89e3\u51b3\uff0c\u628a\u6bcf\u4e2a\u70b9\u5f53\u4f5c\u6839\u8fdb\u884c\u641c\u7d22\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u574f\u4e3a $O(n^2)$\uff0c\u59a5\u59a5\u7684 TLE\uff0c\u8003\u8651\u526a\u679d\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u6211\u4eec\u5728\u505a\u7684\u65f6\u5019\u4f1a\u6709\u5f88\u591a\u91cd\u590d\u7684\u60c5\u51b5\uff0c\u4ee5\u4e0a\u56fe\u4e3a\u4f8b\uff0c$5$ \u4f1a\u88ab\u8d70\u5230 $3$ \u6b21\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u8bb8\u591a\u91cd\u590d\u7684\u67e5\u8be2\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u8bb0\u5fc6\u5316\uff0c\u5373\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u7ed3\u679c\uff0c\u5f53\u518d\u6b21\u8bbf\u95ee\u65f6\u5c31\u4e0d\u5fc5\u518d\u91cd\u505a\u4e00\u904d\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u628a\u590d\u6742\u5ea6\u4f18\u5316\u5230 $O(n)$\u3002\n\n\u4ee5\u4e0b\u662f\u4ee3\u7801\u7684\u6838\u5fc3\u90e8\u5206\uff0c\u8bb0\u5fc6\u5316\u641c\u7d22\uff1a\n```cpp\nint sum(int k){\n\tint cnt=0;\n\tif(b[k]) return t[k];\n\tfor(int i=0;i<v[k].size();i++){\n\t\tcnt=max(sum(v[k][i]),cnt);\n\t}\n\tb[k]=1;\n\tt[k]=cnt+t[k];\n\treturn t[k];\n}\n```\n\u5176\u4e2d ```b``` \u6570\u7ec4\u7528\u4e8e\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u7684\u7ed3\u679c\u662f\u5426\u7b97\u8fc7\uff0c``` t ``` \u6570\u7ec4\u5373\u8f93\u5165\u8fdb\u6765\u7684\u6570\uff0c```v``` \u6570\u7ec4\u8bb0\u5f55\u5b50\u8282\u70b9\uff0c\u5e94\u5f00\u6210 ```vector```\uff0c\u5426\u5219\u4f1a MLE\u3002\u5728\u4e3b\u51fd\u6570\u4e2d\u5c31\u76f4\u63a5\u4fbf\u5229\u6bcf\u4e2a\u70b9\u5373\u53ef\uff0c\u6700\u540e\u53d6\u6700\u5927\u503c\u3002",
        "postTime": 1657285722,
        "uid": 576527,
        "name": "OI_AKed_me",
        "ccfLevel": 5,
        "title": "P3074 [USACO13FEB]Milk Scheduling S"
    },
    {
        "content": "**\u8fd9\u9898\u5176\u5b9e\u662f\u771f\u7684\u7b80\u5355\uff0c\u4f46\u662f\u6709\u4e9b\u7ec6\u8282\u8981\u6ce8\u610f**\n\n**\u5927\u6982\u5c31\u662f\u6bcf\u4e00\u5934\u725b\u90fd\u5f00\u4e2a\u6570\u7ec4\u5b58\u5b83\u4e4b\u524d\u5fc5\u987b\u8981\u6324\u5976\u7684\u725b\uff0c\u518d\u5b9a\u4e49\u4e00\u4e2a\u66f4\u65b0\u6570\u7ec4\uff0c\u7136\u540e\u8d70\u4e00\u904dO(n)\u7684\u5faa\u73af\uff0c\u6bcf\u6b21\u53bb\u627e\u524d\u9762\u7684\u725b\u662f\u5426\u66f4\u65b0\uff0c\u6ca1\u6709\u66f4\u65b0\u5c31\u66f4\u65b0\u518d\u5c06\u66f4\u65b0\u6570\u7ec4\u68071\uff0c\u5df2\u7ecf\u5168\u90e8\u66f4\u65b0\u4e86\u5c31\u627e\u5176\u4e2d\u6240\u9700\u65f6\u95f4\u6700\u957f\u7684\u52a0\u4e0a\u81ea\u5df1\u7684\u65f6\u95f4\uff0c\u7136\u540e\u518d\u5c06\u81ea\u5df1\u6807\u4e3a\u5df2\u66f4\u65b0\uff0c\u6700\u540e\u518d\u8d70\u4e00\u904d\u5faa\u73af\u627e\u6700\u5927\u7684\u65f6\u95f4\u5c31\u53ef\u4ee5\u4e86(ps:\u5982\u679c\u4e00\u5934\u725b\u66f4\u65b0\u4e24\u6b21\u7684\u8bdd\uff0c\u8d85\u65f6\u4e0d\u8bf4\uff0c\u800c\u4e14\u6bcf\u6b21\u6570\u503c\u4e5f\u4f1a\u53d8\u6389\uff0c\u5fc5\u5b9aWA)**\n\n**AC\u4ee3\u7801\uff1a**\n\n\u2019\u2018\u2019\n\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nint chu[10005][10005]/*\u5b58\u524d\u725b*/,t[10005],cen=0,gg[10005],n,m,gen[10005];\nint milk(int u)//\u66f4\u65b0\n{\n    int ans=0;\n    if(!chu[u])\n    return t[u];\n    else\n    for(int i=1;i<=chu[u][0];i++)\n    {\n        if(!gen[chu[u][i]])//\u5982\u679c\u6ca1\u6709\u66f4\u65b0\u5c31\u66f4\u65b0\n        {\n            gen[chu[u][i]]=1;\n            t[chu[u][i]]=milk(chu[u][i]);\n        }\n        ans=max(ans,t[chu[u][i]]);\n    }\n    t[u]+=ans;\n    gen[u]=1;//\u6807\u4e3a\u5df2\u66f4\u65b0\n    return t[u];\n}\nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n      cin>>t[i];\n    for(int i=1;i<=m;i++)\n    {\n        int a,b;\n        cin>>b>>a;\n        chu[a][0]++;\n        chu[a][chu[a][0]]=b;//\u5b58\u4e4b\u524d\u7684\u725b\n    }\n    for(int i=1;i<=n;i++)\n    {\n        if(!gen[i])//\u5982\u679c\u5df2\u7ecf\u66f4\u65b0\u5c31\u4e0d\u9700\u8981\u66f4\u65b0\u4e86\uff0c\u4e0d\u7136\u4f1aWA\n        milk(i);\n    }\n    for(int i=1;i<=n;i++)\n    {\n        cen=max(cen,t[i]);\n    }\n    cout<<cen<<endl;\n    return 0;\n}\n\u2018\u2019\u2018\n```",
        "postTime": 1504096697,
        "uid": 49814,
        "name": "\u68a6\u79bb",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "# \u7b97\u6cd5\uff1a\u62d3\u6251\u6392\u5e8f+\u90bb\u63a5\u8868\n\u6211\u4eec\u4e00\u770b\u9898\u76ee\u4e2d\u8fd9\u53e5\u8bdd\uff1a\n>\u5982\u679c\u5976\u725bA\u5fc5\u987b\u5728\u5976\u725bB\u524d\u6324\u5976\uff0cFJ\u5c31\u9700\u8981\u5728\u7ed9\u5976\u725bB\u6324\u5976\u524d\u7ed3\u675f\u7ed9\u5976\u725bA\u7684\u6324\u5976\u3002\n\n\u5c31\u77e5\u9053\u8fd9\u9053\u9898\u4e00\u5b9a\u662f\u62d3\u6251\u6392\u5e8f\u9898\u3002\n\u4f46\u662f\u8fd9\u9053\u9898\u867d\u7136\u662f\u56fe\u8bba\u9898\uff0c\u4f46\u662f\u6743\u503c\u5374\u4e0d\u80fd\u5b58\u5728\u8fb9\u4e0a\uff0c\u800c\u8981\u5b58\u50a8\u5728\u8282\u70b9\u4e0a\u3002\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u6570\u7ec4 $w$\uff0c\u4ee4 $w_i$ \u6807\u8bc6\u7b2c $i$ \u5934\u5976\u725b\u6324\u5976\u6240\u9700\u7684\u65f6\u95f4\u3002    \n\u81f3\u4e8e\u8ba1\u7b97\u65f6\u95f4\uff0c\u53ea\u9700\u8981\u5728\u62d3\u6251\u6392\u5e8f\u4e2d\u8ba1\u7b97\u5c31\u884c\u4e86\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\n#define maxm 50010\n#define maxn 10005\nstruct Edge {    //\u90bb\u63a5\u8868\n    int next,to;\n};\nEdge edge[maxm];\nint head[maxn],num_edge;\nvoid add_edge(int from,int to) {    //\u5efa\u8fb9\n    edge[++num_edge].next=head[from];\n    edge[num_edge].to=to;\n    head[from]=num_edge;\n}\nint n,m;\nint w[maxn],rd[maxn];    //rd[i]\u8868\u793a\u7b2ci\u4e2a\u8282\u70b9\u7684\u5165\u5ea6\nint st[1000005],top=0;\nint f[maxn];    //\u8bb0\u5f55\u6700\u5927\u503c\nint Max(int a,int b) {\n    return a>b?a:b;\n}\nvoid topsort() {    //\u62d3\u6251\u6392\u5e8f\n    for(int i=1;i<=n;i++)\n        if(rd[i]==0) {\n            st[++top]=i;\n            f[i]=w[i];\n        }\n    while(top>0) {\n        int u=st[top];\n        top--;\n        for(int i=head[u];i;i=edge[i].next) {\n            int v=edge[i].to;\n            f[v]=Max(f[v],f[u]+w[v]);    //\u4e09\u89d2\u4e0d\u7b49\u5f0f\u8ba1\u7b97\u6700\u5927\u503c\n            rd[v]--;\n            if(rd[v]==0) st[++top]=v;\n        }\n    }\n    int ans=-100000000;\n    for(int i=1;i<=n;i++) ans=max(ans,f[i]);\n    printf(\"%d\\n\",ans);\n}\nint main() {\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=n;i++) scanf(\"%d\",&w[i]);\n    for(int i=1;i<=m;i++) {\n        int u,v;\n        scanf(\"%d%d\",&u,&v);\n        add_edge(u,v);    //\u5efa\u7acb\u4e00\u6761\u4eceu\u5230v\u7684\u8fb9\uff0c\u8868\u793a\u5fc5\u987b\u5148\u7ed9u\u6324\u5976\u518d\u7ed9v\u6324\u5976\n        rd[v]++;    //\u8ba1\u7b97\u5165\u5ea6\n    }\n    topsort();\n    return 0;\n}\n```",
        "postTime": 1650251301,
        "uid": 536743,
        "name": "\u79e6\u5c4e\u7687",
        "ccfLevel": 0,
        "title": "P3074 \u9898\u89e3"
    },
    {
        "content": "## \u62d3\u6251\u6a21\u677f\n\n### \u62d3\u6251\u601d\u8def\uff1a\n- \u521a\u5f00\u59cb\u5efa\u56fe\uff0c\u6211\u7528\u7684\u662f vector \u5b58\u56fe\u3002 \u5b58\u56fe\u65f6\u8981\u4e0d\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u987a\u4fbf\u8bb0\u5f55\u4e0b\u6765\u3002\n- \u7528\u4e00\u4e2a queue \u5b58\u5f53\u524d\u7684\u70b9\uff0c\u961f\u5217\u521a\u5f00\u65f6\u8fdb\u4e86\u6240\u6709\u5165\u5ea6\u4e3a\u96f6\u7684\u70b9\u3002\n- \u6bcf\u6b21\u53d6\u51fa\u961f\u5934\u7ed3\u70b9\uff0c\u5e76\u5220\u9664\u6240\u6709\u4ee5\u8fd9\u4e2a\u70b9\u51fa\u53d1\u7684\u8fb9\uff0c\u540c\u65f6\u90a3\u4e2a\u70b9\u7684\u5165\u5ea6-1\u3002\u5982\u679c\u90a3\u4e2a\u70b9\u7684\u5165\u5ea6\u53d8\u4e3a\u96f6\uff0c\u5c31\u5165\u961f\u3002\n- \u6700\u540e\u62d3\u6251\u6392\u5e8f\u7ed3\u679c\u5c31\u662f\u5404\u4e2a\u7ed3\u70b9\u4f9d\u6b21\u5165\u961f\u7684\u987a\u5e8f\u3002\n### \u6d89\u53ca\u672c\u9898\n- \u672c\u9898\u7ed3\u679c\u6c42\u7684\u662f\u6700\u5c0f\u65f6\u95f4\uff0c\u5373\u6700\u540e\u4e00\u53ea\u5976\u725b\u6324\u5b8c\u725b\u5976\u7684\u65f6\u95f4\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u6570\u7ec4 s[] ,\u5b58\u50a8\u5f53\u524d\u5976\u725b\u6324\u5b8c\u5976\u6240\u9700\u8981\u7684\u65f6\u95f4\u3002\n- \u6700\u540e\u5b9a\u4e49 ans \u4e3a \u6324\u5976\u65f6\u95f4\u6700\u4e45\u7684\u5976\u725b\u6240\u9700\u7684\u65f6\u95f4\u3002\n### \u5173\u4e8e\u5176\u4ed6\n\uff08\u968f\u4fbf\u8bf4\u8bf4\uff0c\u4e0e\u672c\u9898\u65e0\u5173\u3002\uff09\n- \u672c\u4eba\u7684\u9898\u89e3\u5728\u5f53\u65f6\u662f\u6700\u4f18\u89e3\u6392\u884c\u699c\u4e2d\u7b2c\u4e09\uff0c\u8fd9\u91cc\u5206\u4eab\u4e00\u4e0b\u5982\u4f55\u6210\u4e3a\u6700\u4f18\u89e3\u3002\n- \u6d1b\u8c37\u7684\u6700\u4f18\u89e3\u4e3b\u8981\u5728\u4e8e\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u7a7a\u95f4\u590d\u6742\u7684\uff0c\u800c\u65f6\u95f4\u590d\u6742\u5ea6\u53c8\u662f\u91cd\u4e2d\u4e4b\u91cd\u3002\u5982\u679c\u5927\u5bb6\u5e0c\u671b\u81ea\u5df1\u7684\u4ee3\u7801\u6210\u4e3a\u6700\u4f18\u89e3\uff0c\u6700\u597d\u5b66\u4e60\u4e00\u4e0b\u5feb\u8bfb\u5feb\u5199\u3002\u6bd5\u7adf\u4e5f\u65e0\u5bb3\u5904\u3002\n- \u7136\u540e\u5c31\u662f\u4f60\u7684\u7b97\u6cd5\u7684\u4f18\u8650\u6027\u4e86\u3002\u638c\u63e1\u4e00\u95e8\u7b97\u6cd5\uff0c\u5fc5\u987b\u8981\u591a\u505a\u9898\u3002\n## Code\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <queue>\n#include <cstring>\nusing namespace std;\nint n,m,t[10005],s[10005],d[10005],ans;\n//        \u6324\u5976\u6240\u9700\u65f6\u95f4     \u5165\u5ea6    \u7b54\u6848 \nvector<int> g[10005];// \u5b58\u8fb9 \nqueue<int> q;\nint read()        //\u5feb\u8bfb \n{\n\tchar c;\n\tint ans=0;\n\tint flag=1;\n\tc=getchar();\n\twhile(c>'9'||c<'0')\n\t{\n\t\tif(c=='-') flag=-1;\n\t\tc=getchar();\n\t}\n\twhile(c<='9'&&'0'<=c)\n\t{\n\t\tans=(ans<<3)+(ans<<1)+(c-'0');\n\t\tc=getchar();\n\t}\n\treturn ans*flag;\n}\nvoid put_(int t)   //\u5feb\u5199 \n{\n\tif(t<0)\n\t{\n\t\tputchar('-');\n\t\tt=-t;\n\t}\n\tchar c[25],i;\n\tfor(i=0;t!=0;i++)\n\t{\n\t\tc[i]=(t%10+'0');\n\t\tt/=10;\n\t}\n\tfor(int j=i-1;j>=0;j--)\n\t{\n\t\tputchar(c[j]);\n\t}\n}\nint main()\n{\n/////////\u8bfb\u5165///////// \n\tn=read();\n\tm=read();\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tt[i]=read();\n\t}\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint u,v;\n\t\tu=read();\n\t\tv=read();\n\t\tg[u].push_back(v);\n\t\td[v]++;\n\t}\n/////////\u62d3\u6251\u6392\u5e8f///////// \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(d[i]==0)\n\t\t{\n\t\t\ts[i]=t[i];\n\t\t\tq.push(i);\n\t\t}\n\t}\n\twhile(!q.empty())\n\t{\n\t\tint u=q.front();\n\t\tq.pop();\n\t\tfor(int i=0;i<g[u].size();i++)\n\t\t{\n\t\t\tint v=g[u][i];\n\t\t\ts[v]=max(s[v],s[u]+t[v]);   //\u8bb0\u5f55\u5f53\u524d\u5976\u725b\u6324\u725b\u5976\u6240\u9700\u8981\u7684\u65f6\u95f4\n\t\t\td[v]--;\n\t\t\tif(d[v]==0)\n\t\t\t{\n\t\t\t\tq.push(v);\t\t\t\t//\u5165\u961f \n\t\t\t}\n\t\t}\n\t}\n///////////\u6c42\u5f97\u7b54\u6848\u5e76\u8f93\u51fa///////// \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tans=max(ans,s[i]);\n\t}\n\tput_(ans);\n\treturn 0;\n}\n```\n\u5e0c\u671b\u6b64\u7bc7\u9898\u89e3\u5bf9\u5927\u5bb6\u6709\u6240\u5e2e\u52a9\u3002",
        "postTime": 1601990950,
        "uid": 218478,
        "name": "\u7f16\u7a0b\u5ba2",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]Milk Scheduling S\u3011"
    },
    {
        "content": "\u5176\u5b9e\u5427\uff0c\u8fd9\u9898\u4e5f\u8fd8\u662f\u4e2adfs\u5566\uff0c\u54c8\u54c8\u54c8\uff0c\n\u597d\u4e86\u4e0d\u5f00\u73a9\u7b11\u4e86\uff0c\u5176\u5b9e\u672c\u9898\u786e\u5b9e\u662f\u4e2atopo\u6700\u957f\u8def\u561b\uff0c\u4e00\u65e6\u662f\u4e2atopo\u6700\u957f\u8def\uff0c\u5c31\u53ef\u4ee5\u8fd0\u7528\u6211\u4eec\u719f\u6089\u7684dfs\u5566\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\n\u6bcf\u4e2a\u70b9x\u8bbe\u7f6e\u4e00\u4e2adp\u503c\uff0c\u8be5\u503c\u610f\u5473\u7740\u5728x\u70b9\u505a\u5b8c\u540e\uff0c\u6240\u9700\u8981\u7684\u6700\u77ed\u65f6\u95f4\uff0c\u4e5f\u5c31\u662f\u4ee5x\u7ed3\u5c3e\u7684\u6700\u957f\u8def\u8ddd\u79bb\n\u7528\u9898\u76ee\u7684\u4f8b\u5b50\u6765\u8bf4\u7684\u8bdd\uff0c 3 \u5728 2\u524d\u9762\u5fc5\u987b\u505a\u5b8c\uff0c \u6211\u4eec\u5c31\u53ef\u4ee5\u5efa\u4e00\u4e2a\u53cd\u5411\u8fb9\uff0c\u8ba92 \u8fde\u7740 3\uff0c\u5728dfs\u8fc7\u7a0b\u4e2d\uff0c\u5bfb\u627e\u4e0e\u81ea\u5df1\u76f8\u8fde\u7684\u8fb9\u7684dp\u503c\u6700\u5927\uff0c\u7136\u540e\u52a0\u4e0a\u8be5\u70b9\u7684\u521d\u59cb\u503c\u5c31\u884c\u5566\u3002\n\n\u5982\u679c\u6709\u4e0d\u660e\u767d\u7684\u670b\u53cb\u53ef\u4ee5\u753b\u753b\u56fe\u54e6\uff0c~~\u5176\u5b9e\u662f\u6211\u592a\u83dc\u4e86\u4e0d\u77e5\u9053\u5728\u9898\u89e3\u533a\u600e\u4e48\u753b\u56fe~~\n\n\u4e0b\u9762\u662f\u4ee3\u7801\uff1a\n\n~~~\n//#pragma GCC optimize(2)\n\n#include<stdio.h>\n#include<string.h>\n#include<math.h>\n#include<iostream>\n#include<string>\n#include<sstream>\n#include<algorithm>\n#include<map>\n#include<set>\n#include<queue>\n#include<stack>\n#include<vector>\n#define ls (k << 1)\n#define rs (ls | 1)\nusing namespace std;\ntypedef long long ll; \ntypedef unsigned long long ull;\ntypedef pair<int, int> P; \ntypedef pair<ll, ll> pll; \nconst int mod = 1e9 + 7;\nconst int N = 1e5 + 5;\nstruct ed{\n\tint to, nxt;\n}e[N << 1];\nint head[N], tot = 1;\nvoid add(int u, int v){\n\te[tot].to = v, e[tot].nxt = head[u], head[u] = tot++;\n}\nint dp[N], st[N], n, m, ans;\nint dfs(int x)\n{\n\tif (dp[x])\treturn dp[x];\n\tint mx = 0;\n\tfor (int i = head[x]; i; i = e[i].nxt)\n\t{\n\t\tmx = max(mx, dfs(e[i].to));\n\t}\n\treturn dp[x] = st[x] + mx;\n}\nint  main()\n{\n\tscanf(\"%d%d\", &n, &m);\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tscanf(\"%d\", &st[i]);\t\n\t}\t\n\tfor (int i = 0; i < m; i++)\n\t{\n\t\tint a, b;\n\t\tscanf(\"%d%d\", &a, &b);\n\t\tadd(b, a);\n\t}\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tans = max(ans, dfs(i));\n\t}\n\tprintf(\"%d\\n\", ans);\n}\n~~~\n",
        "postTime": 1600312083,
        "uid": 231906,
        "name": "Bruce__Lee",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]Milk Scheduling S\u3011"
    },
    {
        "content": "### \u4e00\u770b\u5230\u9898\u76ee\u5c31\u60f3\u5230\u8fd9\u9898\u5f97\u7528\u62d3\u6251\n\n\u9996\u5148\u8ba1\u7b97\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\uff0c\u4e3a\u96f6\u5c31\u52a0\u5165\u961f\u5217\u3002\u63a5\u7740\u5bbd\u641cspfa\u6846\u67b6\uff0c\u505a\u4e00\u6761\u8fb9\u5220\u4e00\u6761\u8fb9\uff0c\u5982\u679c\u5f53\u524d\u70b9\u5165\u5ea6\u4e3a\u96f6\uff0c\u5c31\u52a0\u5165\u961f\u5217\uff0c\u76f4\u5230\u641c\u5b8c\u3002\u6700\u540e\u8f93\u51fa\u6700\u5927\u503c\n\n\u4ee3\u7801\uff1a\n```pascal\nvar a,b,c,d,e,v,u:array[0..50001]of longint;\n    n,m,i,x,y,t,w,max:longint;\nbegin\n   readln(n,m);\n   for i:=1 to n do read(v[i]);\n   for i:=1 to m do\n     begin\n        readln(x,y);inc(u[y]);\n        a[i]:=y;b[i]:=c[x];c[x]:=i;\n     end;\n   for i:=1 to n do\n     if u[i]=0 then\n      begin inc(w);d[w]:=i;e[i]:=v[i]; end;\n   t:=1;\n   while t<=w do\n     begin\n        i:=c[d[t]];\n        while i<>0 do\n          begin\n             dec(u[a[i]]);\n             if e[d[t]]+v[a[i]]>e[a[i]] then\n              e[a[i]]:=e[d[t]]+v[a[i]];\n             if u[a[i]]=0 then\n              begin inc(w);d[w]:=a[i]; end;\n             i:=b[i];\n          end;\n        t:=t+1;\n     end;\n   for i:=1 to n do\n     if e[i]>max then max:=e[i];\n   writeln(max);\nend.\n\n```\n",
        "postTime": 1566286472,
        "uid": 118967,
        "name": "yz0414",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5f00\u59cb\u6211\u8fd8\u4ee5\u4e3a\u662f\u4e2a\u5e76\u67e5\u96c6\uff0c\u540e\u9762\u53d1\u73b0\u539f\u6765\u6709\u591a\u4e2a\u524d\u63d0\uff0c\u4e8e\u662f\u7528\u7ed3\u6784\u4f53\u6765\u5b58\u63a7\u5236\u5173\u7cfb\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\u5982\u4e0b\n\n```cpp\n#include<cmath>\n#include<queue>\n#include<cstdio>\n#include<vector>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#define maxn 10005\n#define ll long long\n#define F(a,b,c) for(int a=b;a<=c;++a)\n#define f(a,b,c) for(int a=b;a>=c;a--)\nusing namespace std;\nstruct node{\n    int fa,son;\n};//\u7ed3\u6784\u4f53\u6765\u5b9a\u4e49\u4ece\u5c5e\u5173\u7cfb \nvector<node>con;//\u63a7\u5236\u5173\u7cfb\u5b58\u8d77\u6765 \nvector<int>k[maxn]; \nint n,m,t[maxn],control[maxn],d[maxn]; \nint read(){\n    int x=0;\n    char c=getchar();\n    while(!isdigit(c)){\n        c=getchar();\n    }\n    while(isdigit(c)){\n        x=(x<<1)+(x<<3)+(c^'0');\n        c=getchar();\n    }\n    return x;\n```\n}//\u5feb\u8bfb\n```cpp\nint main(){\nn=read();\nm=read();\nF(i,1,n){\n    t[i]=read();\n}\nF(i,1,m){\n    int u=read(),v=read();\n    con.push_back((node){u,v});\n    control[v]++;//\u8868\u793a\u8fd9\u5934\u725b\u6324\u5976\u7684\u8981\u6c42\u53c8\u591a\u4e00\u6761 \n    k[u].push_back(con.size()-1);//\u8868\u793au\u8fd9\u5934\u725b\u662f\u591a\u5c11\u725b\u6324\u5976\u7684\u524d\u63d0 \n}\nqueue<int>milk;//\u8868\u793a\u6324\u8fc7\u5976\u7684\u725b\u3002 \nF(i,1,n){\n    if(!control[i])milk.push(i);//\u628a\u524d\u63d0\u4e3a0\u7684\u5165\u961f\u3002 \n}\nint minmax=0;\nwhile(!milk.empty()){\n    int fr=milk.front(); \n    milk.pop();//\u4ece\u961f\u9996\u5f00\u59cb\u6d88\u9664\u524d\u63d0\u6761\u4ef6\u3002 \n    d[fr]+=t[fr]; //\u4ed6\u7b49\u5f85\u7684\u65f6\u95f4\u7b49\u4e8e\u4ed6\u7684\u524d\u63d0\u52a0\u4e0a\u4ed6\u81ea\u5df1\u7684\u65f6\u95f4 \n    minmax=max(minmax,d[fr]);\n    int r=k[fr].size();//\u9700\u8981\u6d88\u9664\u7684\u725b\u7684\u6570\u91cf \n    F(i,0,r-1){\n        d[con[k[fr][i]].son]=max(d[con[k[fr][i]].son],d[fr]);\n        if(--control[con[k[fr][i]].son]==0)milk.push(con[k[fr][i]].son);//\u5982\u679c\u524d\u63d0\u53d8\u4e3a0\u4e86\u5c31\u6324\u5976\u3002 \n    }\n}\ncout<<minmax<<endl;\nreturn 0;\n}\n```",
        "postTime": 1499226149,
        "uid": 44829,
        "name": "psk011102",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3074 \u3010[USACO13FEB]\u725b\u5976\u8c03\u5ea6Milk Scheduling\u3011"
    }
]
[
    {
        "content": "\u9996\u5148\u53ef\u4ee5\u901a\u8fc7\u7ffb\u8f6c\u5750\u6807\u7cfb\uff08\u4e5f\u5c31\u662f $x,y$ \u53d6\u76f8\u53cd\u6570\uff09\u7684\u65b9\u5f0f\u4f7f\u5f97\u7ec8\u70b9\u6ee1\u8db3 $x\\ge 0,y\\ge 0$\u3002\n\n\u6211\u4eec\u5e0c\u671b\u5c3d\u91cf\u8ba9\u4ece\u5de6\u4e0a\u5230\u53f3\u4e0b\uff0c\u62d0\u70b9\u5728\u5de6\u4e0b\u65b9\u7684 \u201cL\u201d \u5f62\u5757\u63a5\u901a $(0,0)$ \u5230 $(x,y)$\u3002\u4e0d\u59a8\u4ee4\u5f53\u524d\u70b9\u5728 $(a,b)$\uff0c\u4e14\u5fc5\u7136\u6709 $(x,y)$ \u5728 L \u5f62\u5757\u7684\u53f3\u4e0b\u65b9\uff0c\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wtjq69i2.png)\n\n- $(a,b)$ \u8d70\u4e00\u6b65\u5373\u53ef\u5230\u8fbe $(x,y)$\uff1a\n  - $x\\in [a,a+n-1]$\uff0c$y\\in (b,b+n]$\uff08\u9ec4\u8272\u90e8\u5206\uff09\uff1a\u76f4\u63a5\u586b $(x-n+1,b+1)$\uff0c$(b+1,b+n)$\u3002\n  - $x\\in[a-n+1,a)$\uff0c$y\\in (b,b+n]$\uff08\u6a59\u8272\u90e8\u5206\uff09\uff1a\u8fd9\u4e2a\u65f6\u5019\u9700\u8981\u628a L \u5f62\u5757\u4e0a\u4e0b\u7ffb\u8f6c\uff0c\u586b $(x+n-1,b+1)$\uff0c$(x,b+n)$\u3002\n  - $x\\in (a,a+n]$\uff0c$y\\in [b-n+1,b]$\uff08\u7ea2\u8272\u90e8\u5206\uff09\uff1a\u76f4\u63a5\u586b $(a+1,y)$\uff0c$(a+n,y+n-1)$\u3002\n  - $x\\in (a,a+n]$\uff0c$y\\in (b,b+n-1]$\uff08\u84dd\u8272\u90e8\u5206\uff09\uff1a\u76f4\u63a5\u586b $(a+1,b)$\uff0c$a+n,b+n-1$\u3002\n\n- \u5982\u679c\u8fd8\u8d70\u4e0d\u5230\uff1a\n  - $x\\in (a-n,a]$\uff0c\u76f4\u63a5\u5f80\u4e0b\u5e73\u79fb\u3002\n  - $y\\in (b-n,b]$\uff1a\u76f4\u63a5\u5f80\u53f3\u5e73\u79fb\u3002\n  - $x-a\\ge y-b$\uff1a\u5f80\u53f3\u4e0b\u89d2\u5e73\u79fb\uff0c\u5de6\u4e0a\u89d2\u7aef\u70b9\u5728 $(a+1,b)$\u3002\n  - $x-a<y-b$\uff1a\u5f80\u53f3\u4e0b\u89d2\u5e73\u79fb\uff0c\u5de6\u4e0a\u89d2\u7aef\u70b9\u5728 $(a,b+1)$\u3002\n\n\u5bf9\u4e8e\u8fd9\u9898\uff0c\u6709\u4e00\u70b9\u7279\u522b\u6ce8\u610f\u7684\uff1a\u56fa\u5b9a\u4e24\u4e2a\u7aef\u70b9\u4f1a\u5f97\u5230\u4e24\u4e2a\u4e0d\u540c\u7684 L \u5f62\u5757\uff0c\u6240\u4ee5\u672c\u9898\u533a\u5206 L \u5f62\u5757\u7684\u4f9d\u636e\u4e4b\u4e00\u5c31\u662f\u7aef\u70b9\u7684\u987a\u5e8f\u3002\u4e00\u5b9a\u8981\u5199\u5bf9\u7aef\u70b9\u7684\u987a\u5e8f\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define For(i,a,b) for(int i=(a);i<=(b);++i)\n#define Rof(i,a,b) for(int i=(a);i>=(b);--i)\nusing namespace std;\nconst int Maxn=2e5;\n\nint T,n,a,b,opx,opy;\nvector<array<int,4>> ans;\n\ninline void Solve()\n{\n    cin>>a>>b>>n; opx=1,opy=1;\n    if(a<0) a=-a,opx*=-1;\n    if(b<0) b=-b,opy*=-1;\n    if(a==0 && b==0) {printf(\"0\\n\"); return;}\n    int x=a,y=b; a=0,b=-1;\n    while(1)\n    {\n        if(y>b && x>=a && x<=a+n-1 && y<=b+n)\n        {\n            ans.push_back({x-n+1,b+1,x,b+n});\n            break;\n        }\n        if(y>b && y<=b+n && x<a)\n        {\n            ans.push_back({x+n-1,b+1,x,b+n});\n            break;\n        }\n        if(b>=0 && x>a && x<=a+n && y<=b)\n        {\n            ans.push_back({a+1,y,a+n,y+n-1});\n            break;\n        }\n        if(b>=0 && x>a && x<=a+n && y<=b+n-1)\n        {\n            ans.push_back({a+1,b,a+n,b+n-1});\n            break;\n        }\n        if(x>=a-n+1 && x<=a)\n        {\n            ans.push_back({a-n+1,b+1,a,b+n}),b+=n;\n            continue;\n        }\n        if(b>=0 && y>=b-n+1 && y<=b)\n        {\n            ans.push_back({a+1,b-n+1,a+n,b}),a+=n;\n            continue;\n        }\n        if(b>=0 && x-a>y-b)\n        {\n            ans.push_back({a+1,b,a+n,b+n-1}),a+=n,b+=n-1;\n            continue;\n        }\n        ans.push_back({a,b+1,a+n-1,b+n}),a+=n-1,b+=n;\n        continue;\n    }\n    cout<<ans.size()<<endl;\n    for(auto i:ans)\n    {\n        int a=i[0]*opx,b=i[1]*opy,c=i[2]*opx,d=i[3]*opy;\n        swap(a,c),swap(b,d);\n        printf(\"%d %d %d %d\\n\",a,b,c,d);\n    }\n    ans.clear();\n}\n\nint main()\n{\n    cin>>T;\n    while(T--) Solve();\n    return 0;\n}\n```",
        "postTime": 1677159332,
        "uid": 148913,
        "name": "Graphcity",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P6957 [NEERC2017]The Final Level"
    },
    {
        "content": "\u4e0d\u59a8\u8bbe\u76ee\u6807\u70b9\u5728\u7b2c\u4e00\u8c61\u9650\u3002\n\n\u6211\u4eec\u5148\u8003\u8651\u6574\u4e2a L \u5b57\u5f62\u8fde\u901a\u5757\u7684\u53f3\u4e0a\u89d2\u6700\u8fdc\u80fd\u5230\u54ea\u91cc\uff0c\u4e0d\u96be\u53d1\u73b0\u9664\u4e86\u7b2c\u4e00\u5757\u53ef\u4ee5\u4ee4\u6700\u8fdc\u70b9\u5230\u8fbe $(n-1,n-1)$ \u4e4b\u5916\uff0c\u540e\u9762\u7684 L \u5b57\u5f62\u90fd\u53ef\u4ee5\u4ee4\u67d0\u4e00\u7ef4\u52a0 $n-1$\uff0c\u53e6\u4e00\u4f4d\u52a0 $n$\u3002\n\n\u4e8e\u662f\u8003\u8651\u4e00\u4e2a\u8d2a\u5fc3\uff0c\u8bb0\u5f53\u524d\u80fd\u5230\u8fbe\u7684\u6700\u8fdc\u70b9\u4e3a $(x,y)$\uff1a\n\n- \u82e5\u5f53\u524d $x\\lt a$\uff0c$y\\lt b$\uff0c\u90a3\u4e48\u9009\u53d6\u76f8\u8ddd\u66f4\u8fdc\u7684\u4e00\u7ef4\u52a0\u4e0a $n$\uff0c\u53e6\u4e00\u7ef4\u52a0\u4e0a $n-1$\uff08\u5982\u4e0b\u56fe\u7b2c\u4e00\u4e8c\u5757\uff09\u3002\n- \u5426\u5219\uff0c\u6211\u4eec\u53ea\u4ee4\u8fd8\u672a\u8d85\u8fc7\u76ee\u6807\u70b9\u7684\u90a3\u4e00\u7ef4\u52a0 $n$\uff08\u5982\u4e0b\u56fe\u7b2c\u4e8c\u4e09\u5757\uff09\u3002\n- \u82e5\u67d0\u65f6\u523b $x \\ge a$ \u4e14 $y \\ge b$\uff0c\u5219\u7ec8\u6b62\u8d2a\u5fc3\u8fc7\u7a0b\u3002\n\n\u4e0d\u96be\u53d1\u73b0\uff0c\u4e0a\u8ff0\u8d2a\u5fc3\u8fc7\u7a0b\u82b1\u8d39\u7684\u8fde\u901a\u5757\u4e2a\u6570\u662f\u7b54\u6848\u7684\u4e0b\u754c\uff0c\u6211\u4eec\u65ad\u8a00\u5176\u5c31\u662f\u7b54\u6848\uff1a\u5728\u4e0a\u8ff0\u8fc7\u7a0b\u7ed3\u675f\u540e\uff0c\u76ee\u6807\u70b9 $(a,b)$ \u53f3\u4fa7\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a\u4e0e $(0,0)$ \u8fde\u901a\u7684\u683c\u5b50\uff0c\u4e14\u8ddd\u79bb\u5b83\u4e0d\u8d85\u8fc7 $n-1$\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u56fe\u5f62\u5411\u5de6\u5e73\u79fb\u4e00\u6bb5\u8ddd\u79bb\uff0c\u4f7f\u5f97\u8fd9\u4e2a\u683c\u5b50\u4e0e $(a,b)$ \u91cd\u5408\uff0c\u7136\u540e\u5c31\u6784\u9020\u5b8c\u6bd5\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(\\sum\\operatorname{ans})$\u3002\n\n![\u4f8b\u5b50](https://i.loli.net/2021/11/11/WL7CeuniBUVJpEY.png)\n\n```cpp\nint main() {\n\tint test_case_cnt = 1; rd(test_case_cnt);\n\twhile(test_case_cnt--) {\n\t\tint a, b, n, si_x = 1, si_y = 1; rd(a, b, n);\n\t\tif(a < 0) si_x = -1, a = -a;\n\t\tif(b < 0) si_y = -1, b = -b;\n\t\tstd::vector <std::pair <pii, pii> > ans;\n\t\tans.push_back(mkp(mkp(n - 1, n - 1), mkp(0, 0)));\n\t\tint cur_x = n - 1, cur_y = n - 1;\n\t\twhile(a > cur_x || b > cur_y) {\n\t\t\tif(a > cur_x && b > cur_y) {\n\t\t\t\tif(a - cur_x > b - cur_y) {\n\t\t\t\t\tans.push_back(mkp(mkp(cur_x + n, cur_y + n - 1), mkp(cur_x + 1, cur_y)));\n\t\t\t\t\tcur_x += n; cur_y += n - 1;\n\t\t\t\t} else {\n\t\t\t\t\tans.push_back(mkp(mkp(cur_x + n - 1, cur_y + n), mkp(cur_x, cur_y + 1)));\n\t\t\t\t\tcur_x += n - 1; cur_y += n;\n\t\t\t\t}\n\t\t\t} else if(a > cur_x) {\n\t\t\t\tans.push_back(mkp(mkp(cur_x + n, cur_y), mkp(cur_x + 1, cur_y - n + 1)));\n\t\t\t\tcur_x += n;\n\t\t\t} else {\n\t\t\t\tans.push_back(mkp(mkp(cur_x, cur_y + n), mkp(cur_x - n + 1, cur_y + 1)));\n\t\t\t\tcur_y += n;\n\t\t\t}\n\t\t}\n\t\tint d_x = a - cur_x;\n\t\tfor(auto &i : ans) {\n\t\t\ti.fi.fi += d_x;\n\t\t\ti.se.fi += d_x;\n\t\t}\n\t\tprintf(\"%d\\n\", (int)ans.size());\n\t\tfor(auto i : ans) {\n\t\t\tprintf(\"%d %d %d %d\\n\",\n\t\t\t\tsi_x * i.fi.fi, si_y * i.fi.se,\n\t\t\t\tsi_x * i.se.fi, si_y * i.se.se\n\t\t\t);\n\t\t}\n\t} return 0;\n}\n```",
        "postTime": 1636609404,
        "uid": 34238,
        "name": "zhylj",
        "ccfLevel": 9,
        "title": "P6957"
    }
]
[
    {
        "content": "emm,\u4e00\u5f00\u59cb\u770b\u8fd9\u9898\u611f\u89c9\u5f88\u96be\u7684\u6837\u5b50\n\n\u7136\u540e\u770b\u4e86\u597d\u4e45\u624d\u770b\u660e\u767d\u9898\u610f\n\n\u770b\u61c2\u9898\u610f\u540e\u5176\u5b9e\u505a\u6cd5\u5176\u5b9e\u5e76\u4e0d\u96be\n\n\u5c31\u662f\u5148Dfs\u67d3\u4e00\u904d\u8272\n\n\u9ed1\u8282\u70b9\u7684\u513f\u5b50\u662f\u767d\u70b9\uff0c\u767d\u70b9\u7684\u513f\u5b50\u662f\u9ed1\u70b9\n\n\u7136\u540e\u7528 f[i][j] \u6765\u8868\u793ai\u8fd9\u4e2a\u70b9\u4e3aj\u65b9\u8d62\u65f6\u6700\u5c11\u63a7\u5236\u7684\u5173\u952e\u8282\u70b9\u6570\n\n\u600e\u4e48\u6c42\u5173\u952e\u8282\u70b9\u6570\u76ee \uff1f\n\n\u4ee5\u9ed1\u65b9\u4e3a\u4f8b \uff1a\n\n* \u5982\u679c\u8be5\u70b9\u662f\u767d\u70b9\uff0c\u5219\u53ea\u6709\u5176\u6240\u6709\u7684\u513f\u5b50\u90fd\u662f\u9ed1\u8282\u70b9\n\n* \u5982\u679c\u8be5\u70b9\u662f\u9ed1\u70b9\uff0c\u5219\u53ea\u9700\u8981\u6709\u4e00\u4e2a\u513f\u5b50\u662f\u9ed1\u70b9\n\n\u6700\u540e\u518dDfs\u4e00\u904d\u628a\u9ed1\u65b9\u767d\u65b9\u7684\u5173\u952e\u8282\u70b9\u4e66\u90fd\u6c42\u51fa\u6765\uff0c\u6700\u540e\u7edf\u8ba1\u7b54\u6848\u65f6\u5c31\u5c06\u9ed1\u767d\u5173\u952e\u8282\u70b9\u53d6\u4e2a\u5e76\u96c6\u5c31\u597d\u8fa3\n\n```\n\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<iostream>\n#include<cmath>\nconst int M = 200005 ;\nconst int INF = 2147483646 ;\nusing namespace std ;\ninline int read(){\n\tchar c = getchar() ;int x=0,w=1;\n\twhile(c>'9'||c<'0'){ if(c=='-') w=-1; c = getchar() ;}\n\twhile(c>='0'&&c<='9'){ x = x*10+c-'0';c = getchar() ;}\n\treturn x*w ;\n}\nstruct E{\n\tint nex,to;\n}edge[M<<1];\nint hea[M] , num ;\ninline void add_edge(int from,int to){\n\tedge[++num].nex = hea[from] ; \n\tedge[num].to = to ;\n\thea[from] = num ;\n}\nint n ;\nint col[M] , f[M][2] ;\nbool Control[M][2] , Son[M] ;\nint MinAns = INF , Ansnum , Anstot ;\n\nvoid Dye(int u){\n\tif(!Son[u]) f[u][0] = f[u][1] = 1 ;\n\tfor(int i=hea[u];i;i=edge[i].nex){\n\t\tint v = edge[i].to ;\n\t\tcol[v] = col[u]^1 ;\n\t\tDye(v) ;\n\t}\n}\nvoid Dfs(int u,int j){\n\tif(j == col[u] && !f[u][j] ) f[u][j] = INF ; \n\tfor(int i=hea[u];i;i=edge[i].nex){\n\t\tint v = edge[i].to ;\n\t\tDfs(v,j) ;\n\t\tif(j == col[u]) f[u][j] = min(f[u][j] , f[v][j]) ;\n\t\telse f[u][j] += f[v][j] ;\n\t}\n}\nvoid Ldfs(int u,int j){\n\tint tmp = INF ;\n\tfor(int i=hea[u];i;i=edge[i].nex){\n\t\tint v = edge[i].to ;\n\t\tif(j==col[u]) tmp = min(tmp,f[v][j]) ;\n\t\telse Ldfs(v,j) ;\n\t}\n\tif(j==col[u]&&Son[u])\n\t  for(int i=hea[u];i;i=edge[i].nex){\n\t  \tint v = edge[i].to ;\n\t  \tif(f[v][j]==tmp)\n\t  \t  Ldfs(v,j) ;\n\t  }\n\tif(!Son[u]) Control[u][j] = 1 ;\n}\nint main(){\n\tn = read() ;\n\tfor(int i=2;i<=n;i++){\n\t\tint x = read();\n\t\tSon[x] = 1 ;\n\t\tadd_edge(x,i) ;\n\t}\n\tcol[1] = 1 ;\n\tDye(1) ;\n\tDfs(1,1) ; Dfs(1,0) ;\n\tLdfs(1,1) ; Ldfs(1,0) ;\n\tfor(int i=1;i<=n;i++)\n\t  if(Control[i][0]&Control[i][1]){\n\t  \tMinAns = min(MinAns,i) ;\n\t  \tAnsnum++ ;\n\t  \tAnstot ^= i ;\n\t  }\n\tprintf(\"%d %d %d\\n\",MinAns,Ansnum,Anstot) ;\n\treturn 0;\n}\n\n\n```",
        "postTime": 1528940624,
        "uid": 53884,
        "name": "beretty",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P4096 \u3010[HEOI2013]Eden \u7684\u535a\u5f08\u6811 \u3011"
    },
    {
        "content": "\u9898\u610f~~\u597d\u88f8~~\u597d\u96be\n\n\u4e0d\u8fc7\u770b\u61c2\u9898\u5c31\u597d\u505a\u4e86\uff0c~~\u8fd9\u9898\u76ee\u90fd\u628a\u8981\u6c42\u8bf4\u51fa\u6765\u4e86~~\uff0c\u535a\u5f08\u6811\uff0c~~\u8f6c\u79fb\u4e5f\u90fd\u8bf4\u51fa\u6765\u4e86~~\n\n\u76f4\u63a5\u7528$sg$\u51fd\u6570\u5b9a\u4e49$dp$\uff0c\u6c42\u51fa\u9ed1\u767d\u70b9\u5fc5\u80dc\u6240\u9700\u6700\u5c11\u53f6\u5b50\u8282\u70b9\u6570\n\n\u51b3\u7b56\u70b9\u4e3a\u9ed1\u65b9\uff0c\u6700\u5c0f\u9ed1\u65b9\u80dc\u96c6\u5408\u662f\u6240\u6709\u513f\u5b50\u6700\u5c0f\u7684\u90a3\u4e2a\n\n\u51b3\u7b56\u4e3a\u767d\u65b9\uff0c\u6700\u5c0f\u9ed1\u65b9\u80dc\u96c6\u5408\u4e3a\u6240\u6709\u513f\u5b50\u6700\u5c0f\u9ed1\u65b9\u80dc\u96c6\u5408\u5e76\u96c6\n\n$vector$\u5b58\u4e0b\u6240\u6709\u7684\u6700\u4f18\u89e3\u5c31\u597d\u4e86\n\n```cpp\nstruct edge{int to,next;}e[N<<1]; int head[N],tot;\nvector<int>ans[N];\nint n,f[N][2],deg[N],num,XOR,minn = inf;\ninline void add(int u,int v){\n\te[++tot] = (edge){v,head[u]}; head[u] = tot;\n}\nvoid dfs(int x,int now){\n\tf[x][now] = inf;\n\tfor(int i = head[x];i;i = e[i].next){\n\t\tint v = e[i].to; dfs(v,now ^ 1);\n\t\tif(f[v][now] < f[x][now]) {\n\t\t\tf[x][now] = f[v][now]; \n\t\t\tans[x].clear(); ans[x].push_back(v);\n\t\t} \n\t\telse if(f[v][now] == f[x][now])\n\t\t\tans[x].push_back(v);\n\t\tf[x][now ^ 1] += f[v][now ^ 1];\n\t}\n\tif(!deg[x]) f[x][now ^ 1] = f[x][now] = 1;\n}\nvoid work(int x,int now){\n\tif(!deg[x]) {++num, XOR ^= x, minn = min(minn,x); return;}\n\tint siz = ans[x].size();\n\tfor(int i = 0;i < siz;++i) work(ans[x][i],now ^ 1);\n}\nint main(){\n\tn = read();int u;\n\tfor(int i = 2;i <= n;++i){\n\t\tu = read();\n\t\tadd(u,i); ++deg[u];\n\t}\n\tdfs(1,1); minn = inf; work(1,1);\n\tprintf(\"%d %d %d\",minn,num,XOR);\n} \n```\n\n",
        "postTime": 1603016831,
        "uid": 262212,
        "name": "\u662f\u4e2a\u59b9\u5b50\u5566",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4096 \u3010[HEOI2013]Eden \u7684\u535a\u5f08\u6811 \u3011"
    },
    {
        "content": "```\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst int N=200005;\nconst int inf=1000000000;\nint n,dep[N],cnt,last[N],f[N],tag[N];\nstruct edge{int to,next;}e[N];\n\nvoid addedge(int u,int v)\n{\n    e[++cnt].to=v;e[cnt].next=last[u];last[u]=cnt;\n}\nvoid dp1(int x,int fa)\n{\n    dep[x]=dep[fa]+1;\n    for (int i=last[x];i;i=e[i].next) dp1(e[i].to,x);\n    if (!last[x]) {f[x]=1;return;}\n    if (dep[x]&1)\n    {\n        f[x]=inf;\n        for (int i=last[x];i;i=e[i].next)\n            if (f[x]=min(f[x],f[e[i].to]));\n    }\n    else\n    {\n        f[x]=0;\n        for (int i=last[x];i;i=e[i].next) f[x]+=f[e[i].to];\n    }\n}\nvoid work1(int x)\n{\n    if (!last[x]) tag[x]++;\n    if (dep[x]&1)\n    {\n        for (int i=last[x];i;i=e[i].next)\n            if (f[e[i].to]==f[x]) work1(e[i].to);\n    }\n    else\n    {\n        for (int i=last[x];i;i=e[i].next) work1(e[i].to);\n    }\n}\nvoid dp2(int x)\n{\n    for (int i=last[x];i;i=e[i].next) dp2(e[i].to);\n    if (!last[x]) {f[x]=1;return;}\n    if (dep[x]&1)\n    {\n        f[x]=0;\n        for (int i=last[x];i;i=e[i].next) f[x]+=f[e[i].to];\n    }\n    else\n    {\n        f[x]=inf;\n        for (int i=last[x];i;i=e[i].next)\n            if (f[x]=min(f[x],f[e[i].to]));\n    }\n}\nvoid work2(int x)\n{\n    if (!last[x]) tag[x]++;\n    if (dep[x]&1)\n    {\n        for (int i=last[x];i;i=e[i].next) work2(e[i].to);\n    }\n    else\n    {\n        for (int i=last[x];i;i=e[i].next)\n            if (f[e[i].to]==f[x]) work2(e[i].to);\n    }\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for (int i=2,x;i<=n;i++) scanf(\"%d\",&x),addedge(x,i);\n    dp1(1,0);work1(1);\n    dp2(1);work2(1)\n    int s1=0,s2=0;\n    for (int i=1;i<=n;i++) if (tag[i]==2) {printf(\"%d \",i);break;}\n    for (int i=1;i<=n;i++) if (tag[i]==2) s1++,s2^=i;\n    printf(\"%d %d\",s1,s2);\n    return 0;\n   \n}\n```\n```\n\u9898\u76ee\u5f88\u957f\uff0c\u4e0d\u8fc7\u662f\u9053\u6c34\u9898\u3002 \n\u5148\u770b\u9ed1\u5173\u952e\u70b9\u600e\u4e48\u6c42\uff0c\u767d\u70b9\u540c\u7406\u3002 \n\u8bbef[i]\u8868\u793a\u70b9i\u4e3a\u9ed1\u5fc5\u80dc\u65f6\u6700\u5c11\u9700\u8981\u628a\u591a\u5c11\u53f6\u8282\u70b9\u67d3\u9ed1\u3002 \n\u6309\u7167\u6df1\u5ea6\u5206\u7c7b\u8f6c\u79fb\u5373\u53ef\u3002\n```\n",
        "postTime": 1555906757,
        "uid": 142305,
        "name": "\u5356\u6deb\u7fc1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4096 \u3010[HEOI2013]Eden \u7684\u535a\u5f08\u6811 \u3011"
    }
]
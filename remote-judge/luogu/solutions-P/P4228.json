[
    {
        "content": "## \u778e\u626f\n\n\u8fd9\u4e2a\u9898\u548c$ \\mathsf{ISIJ2019 Au}$ \u795e\u4ed9\u5b66\u5f1f $\\mathsf{c}\\color{red} \\mathsf {hangruinian2020}$ \u4e89\u8fa9\u4e86\u534a\u4e2a\u591a\u5c0f\u65f6\u3002\n\n\u6982\u62ec\u4e00\u4e0b\u5c31\u662f\u300a\u6d45\u8c08\u5168\u7403 $\\mathsf{Top10}$ \u795e\u4ed9\u5bf9\u4e8e\u4e00\u7c7b\u56fe\u8bba\u95ee\u9898\u7684\u611f\u6027\u8bc1\u660e\u7684\u778e\u626f\u300b\u3002\n\n\u6240\u4ee5\u8fd9\u7bc7\u9898\u89e3\u91cc\u5c06\u4f1a\u8bb2\u4e00\u4e9b\u7279\u522b\u7ec6\u7684\u5185\u5bb9\uff0c\u800c\u4e0d\u662f\"\u663e\u7136\"\u3002\n\n## \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u4f60\u4e00\u68f5\u6709\u6839\u6811\u548c\u4e00\u4e2a\u52a8\u70b9\uff0c\u52a8\u70b9\u4e00\u5f00\u59cb\u4f4d\u4e8e\u6839\u7ed3\u70b9 $1$\u3002\u4e00\u5f00\u59cb\u8fd9\u68f5\u6811\u53ea\u6709\u6839\u7ed3\u70b9\uff0c\u6bcf\u6b21\u53ef\u4ee5\u5728\u5df2\u6709\u7684\u7ed3\u70b9\u4e0a\u6cbf\u539f\u6811\u8fb9\u5411\u5916\u6269\u5c55\u4e00\u4e2a\u7ed3\u70b9\uff0c\u5e76\u4f7f\u52a8\u70b9\u6cbf\u7740\u65b0\u7ed3\u70b9\u7684\u65b9\u5411\u79fb\u52a8\u4e00\u4e2a\u7ed3\u70b9\u3002\n\n\u8bf7\u6c42\u51fa\u6bcf\u4e2a\u7ed3\u70b9\u5728\u539f\u6811\u88ab\u5b8c\u5168\u6269\u5c55\u540e\uff0c\u52a8\u70b9\u662f\u5426\u80fd\u505c\u7559\u5728\u7b2c $i$ \u4e2a\u7ed3\u70b9\u3002\n\n## \u505a\u6cd5\n\n\u9996\u5148\u8fd9\u4e2a\u9898\u4e00\u773c $30pts$\uff0c\u8003\u8651 $\\mathsf{Subtask 3}$ \u7684\u505a\u6cd5\u3002\n\n\u8003\u8651\u6bcf\u4e00\u4e2a\u7ed3\u70b9\u4e0d\u540c\u513f\u5b50\u5b50\u6811\u7684\u4e24\u6b21\u64cd\u4f5c\u4f1a\u76f8\u4e92\u62b5\u6d88\uff0c~~\u663e\u7136~~\u79fb\u56de\u5f53\u524d\u8282\u70b9\u7684\u6700\u4f18\u65b9\u6848\u4e00\u5b9a\u662f\u5269\u4e0b\u6765\u81ea\u91cd\u513f\u5b50\u5b50\u6811\u7684\u7ed3\u70b9\uff0c\u6240\u4ee5\u5c3d\u53ef\u80fd\u6d88\u9664\u91cd\u513f\u5b50\u5b50\u6811\u5373\u53ef\u3002\n\n\u4ee4 $f(u)$ \u4e3a\u52a8\u70b9\u5728\u4ee5 $u$ \u4e3a\u6839\u7684\u5b50\u6811\u6269\u5c55\u7ed3\u675f\u540e\u4e0e $u$ \u7684\u8ddd\u79bb\uff0c\u4ee4 $v=son(u)$\uff0c\u6211\u4eec\u60f3\u529e\u6cd5\u5199\u51fa\u8f6c\u79fb\u65b9\u7a0b\u3002\n\n- \u5982\u679c $f(v)+1\\leq size(u)-size(v)-1$\uff0c\u90a3\u4e48\u4ee5 $v$ \u4e3a\u6839\u7684\u5b50\u6811\u5c06\u4f1a\u88ab\u5168\u90e8\u6d88\u5b8c\uff0c$f(u) = size(u) \\bmod 2$\n- \u5426\u5219\uff0c\u6211\u4eec\u5e94\u8be5\u5c3d\u53ef\u80fd\u6d88\u53bb $f(v)+1$\uff0c\u90a3\u4e48 $f(u)=f(v)+1-(size(u)-size(v)-1)$\u3002\n\n\u8003\u8651\u6c42\u6240\u6709\u70b9\u7684\u53ef\u884c\u6027\uff0c\u5728\u79fb\u5230 $u$ \u65f6\u6211\u4eec\u5df2\u7ecf\u5904\u7406\u4e86 $1\\to u$ \u7684\u8def\u5f84\u548c\u8def\u5f84\u4e0a\u7ed3\u70b9\u7684\u4e00\u4e9b\u5b50\u6811\uff0c**\u663e\u7136**\u5b58\u5728\u4e00\u79cd\u7b56\u7565\u53ef\u4ee5\u53ef\u4ee5\u4f7f\u5b50\u6811\u76f8\u4e92\u6d88\u9664\uff0c\u90a3\u4e48\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u548c $\\mathsf{Subtask 3}$ \u7c7b\u4f3c\u7684\u95ee\u9898\uff0c\u628a $1\\to u$ \u7684\u8def\u5f84\u538b\u7f29\u8d77\u6765\u5f53\u505a\u65b0\u6839\u5373\u53ef\u3002\n\n\u8003\u8651\u66b4\u529b\u5408\u5e76\u662f $O\\left(n^2 \\right)$ \u7684\uff0c\u9700\u8981\u4f18\u5316\u65f6\u95f4\u590d\u6742\u5ea6\u3002\n\n\u53d1\u73b0\u7236\u4eb2\u8282\u70b9\u5bf9\u4e8e\u5f53\u524d\u91cd\u513f\u5b50\u7684\u8d21\u732e\u53ea\u6709\u5b50\u6811\u5927\u5c0f\u4e4b\u548c\u4ee5\u53ca $son(fa(u))$\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5408\u5e76\u3002\u4f46\u662f $size(son(u))==size(son(fa(u)))$ \u65f6\u662f\u4e0d\u80fd\u5408\u5e76\u7684\uff0c\u6240\u4ee5\u7ef4\u62a4\u6b21\u91cd\u513f\u5b50\u5e76\u8d77\u6765\u5c31\u597d\u4e86\u3002\n\n## Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define re register int\n#define db double\n#define in inline\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define re register int\n#define db double\n#define in inline\nnamespace fast_io\n{\n    char buf[1<<12],*p1=buf,*p2=buf,sr[1<<23],z[23],nc;int C=-1,Z=0,Bi=0;\n    in char gc() {return p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<12,stdin),p1==p2)?EOF:*p1++;}\n    in ll read()\n    {\n        ll x=0,y=1;while(nc=gc(),(nc<48||nc>57)&&nc!=-1)if(nc==45)y=-1;Bi=1;\n        x=nc-48;while(nc=gc(),47<nc&&nc<58)x=(x<<3)+(x<<1)+(nc^48),Bi++;return x*y;\n    }\n    in db gf() {re a=read(),b=(nc!='.')?0:read();return (b?a+(db)b/pow(10,Bi):a);}\n    in int gs(char *s) {char c,*t=s;while(c=gc(),c<32);*s++=c;while(c=gc(),c>32)*s++=c;return s-t;}\n    in void ot() {fwrite(sr,1,C+1,stdout);C=-1;}\n    in void flush() {if(C>1<<22) ot();}\n    template <typename T>\n    in void write(T x,char t)\n    {\n        re y=0;if(x<0)y=1,x=-x;while(z[++Z]=x%10+48,x/=10);\n        if(y)z[++Z]='-';while(sr[++C]=z[Z],--Z);sr[++C]=t;flush();\n    }\n    in void write(char *s) {re l=strlen(s);for(re i=0;i<l;i++)sr[++C]=*s++;sr[++C]='\\n';flush();}\n};\nusing namespace fast_io;\nconst int N=1e6+5;\nint type,t,n,f[N],ans[N],son[N],siz[N];\nvector<int>g[N];\nin void add(re x,re y) {g[x].push_back(y);g[y].push_back(x);}\nvoid dfs1(re u,re fa)\n{\n\tsiz[u]=1;\n\tfor(auto v:g[u]) if(v!=fa)\n\t{\n\t\tdfs1(v,u);siz[u]+=siz[v];\n\t\tif(siz[v]>siz[son[u]]) son[u]=v;\n\t}\n\tif(!son[u]) return;\n\tif(f[son[u]]+1<=siz[u]-siz[son[u]]-1) f[u]=(siz[u]-1)&1;\n\telse f[u]=f[son[u]]+1-(siz[u]-siz[son[u]]-1);\n}\nvoid dfs2(re u,re fa,re pre,re sum)\n{\n\tre sson=0;\n\tif(u>1)\n\t{\n\t\tre sz=siz[u]+sum,pos=0;\n\t\tif(siz[son[u]]>siz[pre]) pos=son[u]; else pos=pre;\n\t\tif(f[pos]+1<=sz-siz[pos]-1) ans[u]=((sz-1)&1);\n\t\telse ans[u]=f[pos]+1-(sz-siz[pos]-1);\n\t}\n\tfor(auto v:g[u]) if(v!=fa&&v!=son[u]&&siz[v]>siz[sson]) sson=v;\n\tfor(auto v:g[u]) if(v!=fa)\n\t{\n\t\tre nw=(v==son[u]?sson:son[u]),tmp=siz[nw]>siz[pre]?nw:pre;\n\t\tdfs2(v,u,tmp,sum+siz[u]-siz[v]-1);\n\t}\n}\nint main()\n{\n\ttype=read();t=read();\n\twhile(t--)\n\t{\n\t\tre n=read();\n\t\tfor(re i=1;i<=n;i++) f[i]=son[i]=ans[i]=siz[i]=0,g[i].clear();\n\t\tfor(re i=1;i<n;i++) add(read(),read());\n\t\tdfs1(1,0);ans[1]=f[1];dfs2(1,0,0,0);\n\t\tif(type==3) write(!ans[1],'\\n');\n\t\telse \n\t\t{\n\t\t\tfor(re i=1;i<=n;i++) sr[++C]=(!ans[i])?'1':'0';\n\t\t\tsr[++C]='\\n';\n\t\t}\n\t}\n\treturn ot(),0;\n}\n```",
        "postTime": 1565694602,
        "uid": 72679,
        "name": "disangan233",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4228 \u3010\u6995\u6811\u4e4b\u5fc3\u3011"
    },
    {
        "content": "[\u53ef\u80fd\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://m-sea-blog.com/archives/4598)\n\n---\n\n\u6211\u4eec\u5148\u8003\u8651\u600e\u4e48\u7b97\u6839\u8282\u70b9\u7684\u7b54\u6848\u3002\n\n\u5148\u5047\u8bbe\u5b83\u53ea\u6709\u4e24\u68f5\u5b50\u6811 $u$ \u548c $v$\uff0c\u6995\u6811\u4e4b\u5fc3\u5728\u6839\u8282\u70b9\u5904\u3002\n\n\u5982\u679c $u$ \u957f\u51fa\u4e00\u4e2a\u8282\u70b9\uff0c$v$ \u957f\u51fa\u4e00\u4e2a\u8282\u70b9\uff0c\u90a3\u4e48\u6995\u6811\u4e4b\u5fc3\u8fd8\u5728\u6839\u8282\u70b9\u5904\uff0c\u76f8\u5f53\u4e8e\u8fd9\u4e24\u6b21\u64cd\u4f5c\u62b5\u6d88\u6389\u4e86\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u5224\u65ad\u6839\u8282\u70b9\u7684\u6240\u6709\u5b50\u6811\u80fd\u5426\u76f8\u4e92\u62b5\u6d88\u6389\u3002\n\n\u6ce8\u610f\u6bcf\u68f5\u5b50\u6811\u662f\u53ef\u4ee5\u81ea\u884c\u62b5\u6d88\u4e00\u90e8\u5206\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bbe $f_u$ \u8868\u793a $u$ \u5b50\u6811\u5185\u6700\u591a\u53ef\u4ee5\u81ea\u884c\u62b5\u6d88\u591a\u5c11\u5bf9\u3002\n\n\u8003\u8651 $f_u$ \u5982\u4f55\u8f6c\u79fb\u3002\u8bbe\u6700\u5927\u7684\u5b50\u6811\u7684\u6839\u4e3a $h$\uff0c\u5219\n\n- \u5982\u679c $sz_h-2\\times f_h\\leq sz_u-1-sz_h$\uff0c\u5219\u6700\u5927\u7684\u5b50\u6811\u53ef\u4ee5\u88ab\u6d88\u6389\uff0c\u5269\u4e0b\u7684\u5b50\u6811\u4e2d\u8fd8\u53ef\u4ee5\u518d\u6d88\u6389\u5076\u6570\u4e2a\u70b9\uff0c\u56e0\u6b64\u6b64\u65f6 $f_u=\\left\\lfloor\\frac{sz_u-1}{2}\\right\\rfloor$\u3002\n- \u5426\u5219\uff0c\u5176\u5b83\u6240\u6709\u7684\u5b50\u6811\u90fd\u4e0d\u53ef\u4ee5\u628a\u6700\u5927\u7684\u5b50\u6811\u6d88\u6389\uff0c\u56e0\u6b64\u6b64\u65f6 $f_u=f_h+sz_u-1-sz_h$\u3002\n\n\u8fd9\u6837\u5b50\u5c31\u53ea\u9700\u8981\u505a\u4e00\u904d\u6811\u5f62 DP \u5c31\u80fd\u5f97\u5230 $f$ \u4e86\u3002\n\n\u8003\u8651\u5982\u4f55\u7b97\u6839\u8282\u70b9\u7684\u7b54\u6848\u3002\u6211\u4eec\u8fd8\u662f\u627e\u5230\u6839\u8282\u70b9\u7684\u6700\u5927\u7684\u5b50\u6811\uff0c\u8bbe\u5b83\u7684\u6839\u4e3a $h$\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5224\u65ad $sz_h-2\\times f_h$ \u662f\u5426\u5c0f\u4e8e\u7b49\u4e8e $n-1-sz_h$ \u5c31\u597d\u4e86\u3002\n\n\u7136\u540e\u6211\u4eec\u518d\u6269\u5c55\u5230\u7b97\u4efb\u610f\u70b9\u7684\u7b54\u6848\u3002\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u662f\u5148\u628a\u6995\u6811\u4e4b\u5fc3\u4ece\u6839\u79fb\u5230\u4e86\u5f53\u524d\u8282\u70b9\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u628a\u6839\u5230\u5f53\u524d\u8282\u70b9\u7684\u94fe\u7f29\u6210\u4e00\u4e2a\u70b9\u89c6\u4e3a\u6839\u5373\u53ef\u3002\u8fd9\u6837\u5b50\u9700\u8981\u7ef4\u62a4\u7f29\u70b9\u7684\u6700\u5927\u5b50\u6811\uff0c\u56e0\u6b64\u9700\u8981\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u8282\u70b9\u7684\u6b21\u5927\u5b50\u6811\u3002\n\n```cpp\n// ===================================\n//   author: M_sea\n//   website: http://m-sea-blog.com/\n// ===================================\n#include <bits/stdc++.h>\n#define re register\nusing namespace std;\n\ninline int read() {\n    int X=0,w=1; char c=getchar();\n    while (c<'0'||c>'9') { if (c=='-') w=-1; c=getchar(); }\n    while (c>='0'&&c<='9') X=X*10+c-'0',c=getchar();\n    return X*w;\n}\n\nconst int N=100000+10;\n\nint n,ans[N];\n\nstruct edge { int v,nxt; } e[N<<1];\nint head[N],cnt=0;\ninline void addEdge(int u,int v) {\n    e[++cnt]=(edge){v,head[u]},head[u]=cnt;\n}\n\nint dep[N],sz[N],hson[N],hson2[N],f[N];\ninline void dfs1(int u,int fa) {\n    dep[u]=dep[fa]+1,sz[u]=1;\n    for (re int i=head[u];i;i=e[i].nxt) {\n        int v=e[i].v; if (v==fa) continue;\n        dfs1(v,u),sz[u]+=sz[v];\n        if (sz[v]>sz[hson[u]]) hson2[u]=hson[u],hson[u]=v;\n        else if (sz[v]>sz[hson2[u]]) hson2[u]=v;\n    }\n    if (sz[hson[u]]-2*f[hson[u]]<=sz[u]-1-sz[hson[u]]) f[u]=(sz[u]-1)/2;\n    else f[u]=f[hson[u]]+sz[u]-1-sz[hson[u]];\n}\ninline int cmp(int x,int y) { return sz[x]>sz[y]?x:y; }\ninline void dfs2(int u,int fa,int h) {\n    int tmp=cmp(hson[u],h);\n    if (sz[tmp]-2*f[tmp]<=n-dep[u]-sz[tmp]) ans[u]=(n&1)==(dep[u]&1);\n    for (re int i=head[u];i;i=e[i].nxt) {\n        int v=e[i].v; if (v==fa) continue;\n        dfs2(v,u,v==hson[u]?cmp(hson2[u],h):cmp(hson[u],h));\n    }\n}\n\ninline void init() {\n    cnt=0,memset(head,0,sizeof(head));\n    memset(hson,0,sizeof(hson));\n    memset(hson2,0,sizeof(hson2));\n    memset(ans,0,sizeof(ans));\n}\n\nint main() {\n    int W=read(),T=read();\n    while (T--) { init();\n        n=read();\n        for (re int i=1;i<n;++i) {\n            int u=read(),v=read();\n            addEdge(u,v),addEdge(v,u);\n        }\n        dfs1(1,0); dfs2(1,0,0);\n        if (W==3) putchar(ans[1]+'0');\n        else for (re int i=1;i<=n;++i) putchar(ans[i]+'0');\n        puts(\"\");\n    }\n    return 0;\n}\n```\n\n",
        "postTime": 1579261259,
        "uid": 38370,
        "name": "M_sea",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4228 \u3010\u6995\u6811\u4e4b\u5fc3\u3011"
    },
    {
        "content": "### \u524d\u8a00\r\n\r\n\u6a21\u62df\u8d5b\u65f6 AC \u4e86\u8fd9\u9053\u9898\uff0c\u6240\u4ee5\u6765\u5199\u4e00\u7bc7\u9898\u89e3\uff0c\u8fd9\u7bc7\u9898\u89e3\u4e3b\u8981\u662f\u8ddf\u7740\u81ea\u5df1\u8d5b\u65f6\u7684\u601d\u8def\u4e00\u6b65\u4e00\u6b65 AC \u8fd9\u9053\u9898\u3002\r\n\r\n### \u4e00\u4e9b\u7ea6\u5b9a\r\n\r\n$siz_x$ \u8868\u793a\u4ee5 $x$ \u4e3a\u6839\u7684\u5b50\u6811\u5927\u5c0f\uff08\u5305\u62ec $x$\uff09\u3002\r\n\r\n$son_x$ \u4e3a $x$ \u7684\u513f\u5b50\u96c6\u5408\u3002\r\n\r\n$cntson_x$ \u4e3a $x$ \u7684\u513f\u5b50\u6570\u91cf\u3002\r\n\r\n### \u6b63\u6587\r\n\r\n#### Step -1\r\n\r\n\u9996\u5148\u770b\u5230\u9898\u76f4\u63a5\u53bb\u770b\u90e8\u5206\u5206\uff0c\u8003\u8651\u600e\u4e48\u505a\u70b9 $1$ \u7684\u7b54\u6848\uff1a\r\n\r\n\u76f8\u4fe1\u5927\u591a\u6570\u4eba\u4e00\u5f00\u59cb\u60f3\u7684\u6761\u4ef6\u662f\uff1a\u9664 $1$ \u4ee5\u5916\u7684\u70b9\u6709\u5076\u6570\u4e2a\u4e14\u4e0d\u5b58\u5728\u4e00\u4e2a\u5b50\u6811\u5927\u5c0f\u5927\u4e8e $\\lfloor\\frac{n}{2}\\rfloor$\u3002\r\n\r\n\u4f46\u662f\u8fd9\u4e48\u505a\u662f\u9519\u7684\uff0c\u7ed9\u51fa hack \u6570\u636e\uff1a\r\n\r\n```\r\n0 1\r\n5\r\n1 2\r\n1 3\r\n3 4\r\n3 5\r\n```\r\n\r\n\u4e3a\u4ec0\u4e48\u662f\u9519\u7684\uff1f\u56e0\u4e3a\u5b58\u5728\u8fd9\u4e48\u4e00\u4e2a\u52a0\u70b9\u987a\u5e8f\uff1a`3->4->5->2`\uff0c\u53ef\u4ee5\u4f7f\u5fc3\u56de\u5230\u70b9 $1$\uff08\u5fc3\u79fb\u52a8\u987a\u5e8f\u4e3a\uff1a`1->3->4->3->1`\uff09\u3002\r\n\r\n\u753b\u4e2a\u56fe\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u56e0\u4e3a\u52a0\u70b9 $4$\uff0c\u70b9 $5$ \u5b9e\u9645\u4e0a\u201c\u62b5\u6d88\u201d\u4e86\uff0c\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u8bbe\u4e00\u4e2a DP \u6765\u5904\u7406\u201c\u62b5\u6d88\u201d\u8fd9\u4ef6\u4e8b\u3002\r\n\r\n#### step 0\r\n\r\n\u4ee4 $f_x$ \u4e3a\u53ea\u8003\u8651\u4ee5 $x$ \u4e3a\u6839\u7684\u5b50\u6811\uff0c\u6240\u6709\u7684\u52a0\u70b9\u987a\u5e8f\u4e2d\uff0c\u5fc3\u6700\u540e\u8ddd\u79bb\u70b9 $x$ \u6700\u8fd1\u7684\u8ddd\u79bb\u662f\u591a\u5c11\uff0c\u663e\u7136\uff0c\u539f\u95ee\u9898\u8f6c\u5316\u4e3a $f_1$ \u662f\u5426\u4e3a $0$\u3002 \r\n\r\n\u95ee\u9898\u6765\u4e86\uff0c\u8f6c\u79fb\u600e\u4e48\u505a\uff1f\r\n\r\n\u4f60\u53ef\u80fd\u4f1a\u60f3\u5230\u8fd9\u4e48\u4e00\u4e2a\u8f6c\u79fb\uff08\u8fd9\u4e2a\u8f6c\u79fb\u662f\u5f88\u50bb\u7684\uff0c\u4e0b\u9762\u4f1a\u6539\uff0c\u5982\u679c\u4f60\u4e00\u4e0b\u5c31\u60f3\u5230\u66f4\u597d\u7684\u90a3\u4e48\u5148\u5047\u88c5\u4e0d\u77e5\u9053\uff09\uff1a\r\n\r\n1. \u70b9 $x$ \u7684\u513f\u5b50\u7684\u5b50\u6811\u5927\u5c0f\uff08\u5305\u62ec\u513f\u5b50\u672c\u8eab\uff09\u6709\u5927\u4e8e $\\lfloor\\frac{siz_x-1}{2}\\rfloor$ \u7684\u5c31\u7ee7\u7eed\u4e0b\u4e00\u6b65\uff0c\u6ca1\u6709\u7684\u8bdd $f_x=(siz_x-1)\\bmod2$\uff08\u5947\u6570\u7684\u8bdd\u7b54\u6848\u81f3\u5c11\u4e3a $1$\uff09\r\n\r\n2. \u8bb0\u90a3\u9897\u5b50\u6811\u5927\u4e8e $\\lfloor\\frac{siz_x-1}{2}\\rfloor$ \u7684\u513f\u5b50\u4e3a $hson$\uff0c\u5224\u65ad $f_{hson}$ \u662f\u5426 $\\le siz_x-1-siz_{hson}$\uff0c\u5982\u679c\u662f\u90a3\u4e48 $f_x=(siz_x-1)\\bmod2$\uff0c\u5982\u679c\u5426\u90a3\u4e48 $f_x=f_{hson} - (siz_x - 1 - siz_{hson})$\r\n\r\n\u663e\u7136\u5bf9\u4e0a\u9762\u8f6c\u79fb\u6784\u9020\u65b9\u6848\u662f easy \u7684\uff0c\u4e5f\u5c31\u662f\u8bc1\u660e\u4e86\u53ef\u884c\u6027\uff0c\u6700\u4f18\u6027\u4e5f\u6bd4\u8f83\u663e\u7136\uff0c\u8fd9\u91cc\u5c31\u7565\u4e86\uff0c\u4e00\u65f6\u95f4\u96be\u4ee5\u7406\u89e3\u53ef\u4ee5\u624b\u73a9\u4e00\u4e0b\u3002\r\n\r\n\u90a3\u4e48\u76f4\u63a5\u505a\u53ef\u4ee5\u83b7\u5f97 $10$ \u5206\u7684\u9ad8\u5206\uff0c\u8003\u8651\u62d3\u5c55\u5230\u6bcf\u4e2a\u70b9\u3002\r\n\r\n#### step 1\r\n\r\n\u56fe\u4e00\uff1a\r\n![](https://cdn.luogu.com.cn/upload/image_hosting/8pb6owzl.png)\r\n\r\n\u5047\u5982\u6211\u4eec\u8be2\u95ee\u4e0a\u56fe\u5fc3\u6700\u540e\u80fd\u5426\u505c\u5728\u70b9 $3$\uff08\u4e09\u89d2\u5f62\u4ee3\u8868\u4e00\u4e9b\u5b50\u6811\uff09\u4f60\u4f1a\u53d1\u73b0\uff0c\u8fd9\u5176\u5b9e\u548c\u4e0b\u9762\u60c5\u51b5\u7b54\u6848\u662f\u4e00\u6837\u7684\uff0c\r\n\r\n\u56fe\u4e8c\uff1a\r\n\r\n![](https://cdn.luogu.com.cn/upload/image_hosting/4b5kx6ry.png)\r\n\r\n\uff08\u8fd9\u4e09\u4e2a\u4e09\u89d2\u5f62\u8fd8\u662f\u539f\u6765\u7684\uff0c\u6b64\u65f6 $3$ \u4e3a\u6839\uff09\r\n\r\n\u8fd9\u5c31\u5f88\u5947\u602a\u4e86\uff0c\u8fd9\u600e\u4e48\u4f1a\u4e00\u6837\u5462\uff1f\r\n\r\n\u5176\u5b9e\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u56fe\u4e8c\u6700\u5927\u7684\u5b50\u6811\u6765\u81ea\u56fe\u4e00\u7684\u54ea\u91cc\uff0c\r\n\r\n\u5982\u679c\u6765\u81ea\u56fe\u4e00\u70b9 $3$ \u7684\u5b50\u6811\u5185\u90e8\uff1a\u90a3\u4e48\u663e\u7136\u53ef\u4ee5\u548c\u6765\u81ea\u5b50\u6811\u5916\u90e8\u7684\u201c\u62b5\u6d88\u201d\uff0c\u4e5f\u53ef\u4ee5\u5f88\u540c\u6837\u6765\u81ea\u5b50\u6811\u5185\u90e8\u7684\u201c\u62b5\u6d88\u201d\u6240\u4ee5\u7b49\u4ef7\u3002\r\n\r\n\u5982\u679c\u6765\u81ea\u5b50\u6811\u5916\u90e8\uff0c\u8003\u8651\u6df1\u5ea6\u5c0f\u4e8e\u6700\u5927\u5b50\u6811\u7684\u60f3\u548c\u6700\u5927\u5b50\u6811\u62b5\u6d88\u53ea\u9700\u8981\u5148\u52a0\u4e00\u4e2a\u6765\u81ea\u6700\u5927\u5b50\u6811\u7684\u7136\u540e\u52a0\u4e00\u4e2a\u6765\u81ea\u8fd9\u4e2a\u5b50\u6811\u7684\uff1b\u6df1\u5ea6\u5927\u4e8e\u7b49\u4e8e\u6700\u5927\u5b50\u6811\u7684\u5c31\u5148\u52a0\u4e00\u4e2a\u8fd9\u4e2a\u5b50\u6811\u7684\u518d\u52a0\u4e00\u4e2a\u6700\u5927\u5b50\u6811\u7684\uff0c\u4e8e\u662f\u56fe\u4e00\u56fe\u4e8c\u7b49\u4ef7\uff0c\u6240\u4ee5\u505a\u6bcf\u4e2a\u70b9\u548c\u505a\u70b9 $1$ \u662f\u7c7b\u4f3c\u7684\u3002\r\n\r\n\u4e86\u89e3\u4e86\u8fd9\u4e2a\u6027\u8d28\u5c31\u53ef\u4ee5 $O(n^2)$ \u505a\u4e86\uff0c\u671f\u671b\u5f97\u5206 $55$\u3002\r\n\r\n#### step 2\r\n\r\n\u4e0d\u65b9\u4fbf\u505a\u7684\u95ee\u9898\u5728\u54ea\uff1f\u5728\u4e8e\u8f6c\u79fb\u5f88\u4e0d\u65b9\u4fbf\uff0c\u6211\u4eec\u9700\u8981\u7528\u4e00\u4e2a\u65b9\u4fbf\u7684\u5199\u6cd5\u7b49\u4ef7\u6389\u521a\u521a\u7684\u8f6c\u79fb\u3002\r\n\r\n\u8f6c\u79fb\u9488\u5bf9\u4e0a\u9762\u7684\u8fd9\u4e2a\u67ff\u5b50\uff1a$f_x=f_{hson} - (siz_x - 1 - siz_{hson})$\u3002\r\n\r\n\u6539\u5199\u4e00\u4e0b\uff1a$f_x=f_{hson}+siz_{hson}-(siz_x-1)$\u3002\r\n\r\n\u4e0d\u96be\u53d1\u73b0\u5176\u5b9e\u8f6c\u79fb\u7684\u6240\u6709\u60c5\u51b5\u90fd\u53ef\u4ee5\u5408\u5e76\u6210\u4e00\u4e2a\u67ff\u5b50\uff1a$f_x=\\max(siz_x-1\\bmod2,(\\max_{y\\in son_x}f_y+siz_y)-(siz_x-1))$\r\n\r\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u8003\u8651 $y \\neq hson$ \u7684\u65f6\u5019\uff0c\u663e\u7136\u6b64\u65f6 $f_y+siz_y-(siz_x-1)$ \u4e00\u5b9a\u5c0f\u4e8e\u7b49\u4e8e $0$\uff08\u56e0\u4e3a $f_y\\le siz_y\\le\\lfloor\\frac{siz_x-1}{2}\\rfloor$\uff09\u3002\r\n\r\n\u5f53 $y=hson$ \u4f46\u662f $f_y\\le siz_x-1-siz_{y}$ \u65f6\u663e\u7136\u4e5f\u5c0f\u4e8e\u7b49\u4e8e $0$\uff08\u56e0\u4e3a\u53ea\u662f\u67ff\u5b50\u53d8\u5f62\uff09\u3002\r\n\r\n\u6240\u4ee5\u6211\u4eec\u7528\u6700\u540e\u9700\u8981\u7ef4\u62a4\u7684\u662f\u8fd9\u4e48\u4e00\u4e2a\u62bd\u8c61\u7684\u95ee\u9898\uff1a\r\n\r\n1. \u52a0\u5165\u70b9 $(x_i,y_i)$\r\n\r\n2. \u67e5\u8be2 $\\max(x_i + y_i) - \\sum x_i$\r\n\r\n\u663e\u7136\u968f\u4fbf\u7ef4\u62a4\u4e00\u4e0b\u5c31\u597d\u4e86\uff0c\u4e0d\u8fc7\u8981\u6ce8\u610f\u5982\u679c\u6bcf\u6b21\u66b4\u529b\u63d2\u5165\u590d\u6742\u5ea6\u4f1a\u88ab\u83ca\u82b1\u5361\u5230 $O(n^2)$\uff0c\u6240\u4ee5\u9700\u8981\u52a0\u4e00\u4e2a\u524d\u540e\u7f00 $\\max$ \u4f18\u5316\uff0c\u6700\u540e\u590d\u6742\u5ea6 $O(n)$\u3002\r\n\r\n\u4ee3\u7801\uff1a\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nconst int N = 100005;\r\ntypedef long long ll;\r\nint W,T,n,siz[N],f[N],ans[N];\r\nvector<int>e[N];\r\nvoid build(int x,int fa){\r\n\tsiz[x] = 1;\r\n\tint mx = 0;\r\n\tfor(int to:e[x]){\r\n\t\tif(to == fa) continue;\r\n\t\tbuild(to,x);\r\n\t\tsiz[x] += siz[to];\r\n\t\tmx = max(mx,siz[to] + f[to] + 1);\r\n\t\t//if(siz[to] > siz[mx]) mx = to;\r\n\t}\r\n\tif(siz[x] & 1) f[x] = max(0,mx - siz[x] + 1);\r\n\telse f[x] = max(1,mx - siz[x] + 1);\r\n    //\u4e0b\u9762\u8fd9\u4e9b\u662f\u54ea\u4e2a\u9ebb\u70e6\u7684\u8f6c\u79fb\r\n//\tif(siz[mx] <= (siz[x] - 1) / 2) f[x] = (siz[x] - 1) & 1;\r\n//\telse {\r\n//\t\tif(f[mx] + 1 <= (siz[x] - 1 - siz[mx] + f[mx] + 1) / 2) f[x] = (siz[x] - 1) & 1;\r\n//\t\telse f[x] = f[mx] + 1 - (siz[x] - 1 - siz[mx]);\r\n//\t}\r\n}\r\nvoid work(int x,int fa,int sumfa,int mxfa){\r\n\tint sum = sumfa,mx = mxfa,len = e[x].size(),i = 0;\r\n\tint *mx0 = new int[len],*mx1 = new int[len];\r\n\tfor(int to:e[x]){\r\n\t\tmx0[i] = mx1[i] = 0;\r\n\t\tif(to != fa){\r\n\t\t\tsum += siz[to];\r\n\t\t\tmx = max(mx,siz[to] + f[to] + 1);\r\n\t\t\tif(i == 0) mx0[i] = siz[to] + f[to] + 1;\r\n\t\t\tif(i == len - 1) mx1[i] = siz[to] + f[to] + 1;\r\n\t\t} \r\n\t\t++i;\r\n\t}\r\n\tans[x] = max(sum & 1,mx - sum);\r\n\tfor(i = 1;i < len;++i){\r\n\t\tint to = e[x][i];\r\n\t\tif(to == fa) mx0[i] = mx0[i - 1];\r\n\t\telse mx0[i] = max(mx0[i - 1],siz[to] + f[to] + 1);\r\n\t}\r\n\tfor(i = len - 2;i >= 0;--i){\r\n\t\tint to = e[x][i];\r\n\t\tif(to == fa) mx1[i] = mx1[i + 1];\r\n\t\telse mx1[i] = max(mx1[i + 1],siz[to] + f[to] + 1);\r\n\t}\r\n\tfor(i = 0;i < len;++i){\r\n\t\tint to = e[x][i];\r\n\t\tif(to == fa) continue;\r\n\t\tint o = 0;\r\n\t\tif(i != 0) o = max(o,mx0[i - 1]);\r\n\t\tif(i != len - 1) o = max(o,mx1[i + 1]);\r\n\t\t//printf(\"QwQ%d %d %d %d\\n\",mx0[0],i,to,o);\r\n\t\twork(to,x,sum - siz[to],max(mxfa,o));\r\n\t}\r\n}\r\nint main(){\r\n\tscanf(\"%d%d\",&W,&T);\r\n\twhile(T--){\r\n\t\tscanf(\"%d\",&n);\r\n\t\tfor(int i = 1;i <= n;++i) e[i].clear();\r\n\t\tfor(int i = 1,x,y;i < n;++i){\r\n\t\t\tscanf(\"%d%d\",&x,&y);\r\n\t\t\te[x].push_back(y);\r\n\t\t\te[y].push_back(x);\r\n\t\t}\r\n\t\tbuild(1,0);\r\n\t\t//for(int i = 1;i <= n;++i) printf(\"%d \",f[i]);\r\n\t\t//printf(\"\\n\");\r\n\t\tif(W == 3){\r\n\t\t\tif(f[1]) putchar('0');\r\n\t\t\telse putchar('1');\r\n\t\t\tputchar('\\n');\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\twork(1,0,0,0);\r\n\t\tfor(int i = 1;i <= n;++i) if(ans[i]) putchar('0');\r\n\t\telse putchar('1');\r\n\t\tputchar('\\n');\r\n\t}\r\n\treturn 0;\r\n}\r\n/*\r\n0 3\r\n4\r\n1 2\r\n1 3\r\n1 4\r\n6\r\n1 2\r\n1 3\r\n1 4\r\n4 5\r\n5 6\r\n10\r\n1 2\r\n1 3\r\n3 4\r\n3 5\r\n3 6\r\n4 7\r\n7 8\r\n8 9\r\n9 10\r\n\r\n\r\n0 1\r\n9\r\n1 3\r\n3 5\r\n5 7\r\n7 9\r\n1 2\r\n2 4\r\n4 6\r\n6 8\r\n*/\r\n```",
        "postTime": 1677497150,
        "uid": 239433,
        "name": "WZKQWQ",
        "ccfLevel": 7,
        "title": "P4228 [\u6e05\u534e\u96c6\u8bad2017] \u6995\u6811\u4e4b\u5fc3\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u662f\u6e05\u534e\u96c6\u8bad 2017 \u7684\u9898\uff0c\u5efa\u8bae\u5ba1\u6838\u7684\u7ba1\u7406\u5458\u770b\u5230\u4e4b\u540e\u5728\u9898\u76ee\u540d\u79f0\u4e0a\u6dfb\u52a0\u4e00\u4e0b\u3002   \n~~\u6ca1\u60f3\u5230\u6e05\u534e\u96c6\u8bad\u4e5f\u6709\u53ef\u505a\u9898\u3002~~    \n\u9996\u5148\u6709\u4e2a\u660e\u663e\u7684\u6027\u8d28\uff0c\u90a3\u5c31\u662f\u5f80\u4e24\u4e2a\u4e0d\u540c\u5b50\u6811\u8d70\u8d70\u5b8c\u4e4b\u540e\u8fd9\u4e00\u6b65\u7684\u64cd\u4f5c\u76f8\u5f53\u4e8e\u88ab\u62b5\u6d88\u4e86\u3002    \n\u8bbe $f(u)$ \u8868\u793a $u$ \u5b50\u6811\u5185\u6700\u591a\u80fd\u62b5\u6d88\u6389\u591a\u5c11\u5bf9\uff0c$\\text{size}(u)$ \u8868\u793a\u5b50\u6811 $u$ \u7684\u5927\u5c0f\uff0c$\\text{son}(u)$ \u8868\u793a $u$ \u7684\u91cd\u513f\u5b50\uff0c$v$ \u4e3a $\\text{son}(u)$\u3002    \n\n\u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a$v$ \u7684\u8d21\u732e\u53ef\u4ee5\u88ab\u6d88\u6389\uff0c\u53ef\u4ee5\u53d1\u73b0\u5f53 $\\text{size}(v) - 2 \\times f(v) \\leq \\text{size}(u) - 1 - \\text{size}(v)$ \u65f6\uff0c\u662f\u8fd9\u79cd\u60c5\u51b5\u3002\u8fd9\u4e2a\u5f0f\u5b50\u7684\u610f\u601d\u5c31\u662f\u9664\u53bb $v$ \u8fd9\u9897\u5b50\u6811\u548c\u81ea\u8eab\u7684\u8282\u70b9\u7684\u5916\u82e5\u5927\u4e8e $v$ \u81ea\u8eab\u53ef\u4ee5\u62b5\u6d88\u6389\u7684\u6570\u91cf\u7684\u8bdd\uff0c$v$ \u8fd9\u9897\u5b50\u6811\u7684\u8d21\u732e\u5c31\u53ef\u4ee5\u88ab\u6d88\u6389\uff0c\u7136\u540e\u5176\u4ed6\u7684\u7ed3\u70b9\u90fd\u53ef\u4ee5\u6210\u5bf9\u62b5\u6d88\u6389\uff0c\u9664\u975e\u5230\u6700\u540e\u53ea\u5269\u4e0b\u4e86\u4e00\u4e2a\u7ed3\u70b9\uff0c\u4e8e\u662f $f(u) = \\frac{\\text{size}(u)-1}{2}$\u3002    \n\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e5f\u5c31\u662f $v$ \u7684\u8d21\u732e\u6d88\u4e0d\u6389\uff0c\u6b64\u65f6\u5c31\u6ca1\u6709\u529e\u6cd5\u4e86\uff0c$f(u) = f(v) + \\text{size}(u)-1- \\text{size}(v)$\uff0c\u8fd9\u4e2a\u5f0f\u5b50\u7684\u610f\u601d\u5c31\u662f\u5c3d\u91cf\u6d88\u6389 $v$ \u7684\u8d21\u732e\uff0c\u518d\u628a\u4e4b\u524d\u7684\u52a0\u4e0a\u5c31\u597d\u4e86\u3002  \n\u53d1\u73b0 $f$ \u6570\u7ec4\u53ef\u4ee5\u7528\u6811\u5f62 $\\text{dp}$ \u641e\u51fa\u6765\u3002   \n\u5224\u65ad\u6839\u8282\u70b9\u7684\u8d21\u732e\u662f\u5426\u53ef\u4ee5\u4e3a\u96f6\u540c\u6837\u7528\u7b2c\u4e00\u79cd\u60c5\u51b5\u7684\u5f0f\u5b50\u5224\u65ad\u4e00\u4e0b\u5927\u5c0f\u5c31\u597d\u4e86\u3002    \n\u8003\u8651\u5982\u4f55\u7b97\u4efb\u610f\u4e00\u4e2a\u70b9\u7684\u7b54\u6848\uff0c\u53ef\u4ee5\u62bd\u8c61\u7684\u7406\u89e3\u4e00\u4e0b\uff0c\u6211\u4eec\u7b97\u70b9 $u$ \u7684\u65f6\u5019\u53ef\u4ee5\u628a $u$ \u5f53\u6210\u6839\uff0c\u90a3\u4e48\u53d7\u5230\u5f71\u54cd\u7684\u6709\u4e14\u4ec5\u6709\u94fe $1 \\rightarrow u$\uff0c\u6211\u4eec\u628a\u8fd9\u6761\u94fe\u62bd\u8c61\u6210\u4e00\u4e2a\u70b9\uff0c\u5e76\u628a\u8fd9\u4e2a\u70b9\u5f53\u6210\u65b0\u7684\u6839\u8282\u70b9\uff0c\u7136\u540e\u7528\u7c7b\u4f3c\u60c5\u51b5 $1$ \u7684\u65b9\u6cd5\u5224\u4e00\u4e0b\u5c31\u597d\u4e86\u3002   \n$\\text{dfs}$ \u65f6\u82e5\u62d3\u5c55\u51fa\u7684\u513f\u5b50\u4e3a\u91cd\u513f\u5b50\uff0c\u5219\u7531\u94fe\u7f29\u6210\u7684\u90a3\u4e2a\u70b9\u66f4\u65b0\u65f6\u9700\u8981\u7528\u6b21\u91cd\u513f\u5b50\uff0c\u628a\u6b21\u91cd\u513f\u5b50\u4e5f\u9884\u5904\u7406\u51fa\u6765\u5c31\u597d\u4e86\u3002\uff08\u4e0d\u6e05\u695a\u6b21\u91cd\u513f\u5b50\u8fd9\u4e2a\u53eb\u6cd5\u662f\u5426\u89c4\u8303\u3002\u3002\uff09  \n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(Tn)$\u3002   \n\u4ee3\u7801\uff1a   \n```cpp   \n#include <bits/stdc++.h>\n\nconst int N = 1e5 + 10;\n\nint n, m, i, j, k, w, T, cnte;   \nint f[N];  \nint fir[N], nxt[N << 1], to[N << 1], son1[N], son2[N];  \nbool ans[N];\nint siz[N], depth[N];\ninline void adde(int u, int v) {\n  to[++cnte] = v, nxt[cnte] = fir[u], fir[u] = cnte;\n}\n\ninline void init() {\n  memset(f, 0, sizeof(f));\n  cnte = 0;\n  memset(fir, 0, sizeof(fir));\n  memset(ans, 0, sizeof(ans));\n  memset(son1, 0, sizeof(son1));\n  memset(son2, 0, sizeof(son2));\n}\n\nvoid dfs1(int u, int fat) {\n  siz[u] = 1, depth[u] = depth[fat] + 1;\n  for (int i = fir[u]; i; i = nxt[i]) {\n    int v = to[i];\n    if (v == fat) continue;\n    dfs1(v, u);\n    siz[u] += siz[v];\n    if (siz[v] > siz[son1[u]]) {\n      son2[u] = son1[u];  \n      son1[u] = v;\n    } else if (siz[v] > siz[son2[u]]) {\n      son2[u] = v; \n    }\n  }\n  if (siz[son1[u]] - 2 * f[son1[u]] <= siz[u] - siz[son1[u]] - 1) {\n    f[u] = (siz[u] - 1) / 2;\n  } else {\n    f[u] = siz[u] - 1 - siz[son1[u]] + f[son1[u]];\n  }\n}\ninline int cmp(int x, int y) {\n  return siz[x] > siz[y] ? x : y;\n}\nvoid dfs2(int u, int fat, int oth) {\n  int x = cmp(oth, son1[u]);\n  if (siz[x] - 2 * f[x] <= n - depth[u] - siz[x]) {\n    ans[u] = (n & 1) == (depth[u] & 1);\n  } \n  for (int i = fir[u]; i; i = nxt[i]) {\n    int v = to[i];\n    if (v == fat) continue;\n    dfs2(v, u, v == son1[u] ? cmp(son2[u], oth) : cmp(son1[u], oth)); \n  }\n}\n\ninline void solve() {\n  scanf(\"%d\", &n);\n  for (int i = 1, u, v; i < n; i++) {\n    scanf(\"%d %d\", &u, &v);\n    adde(u, v);\n    adde(v, u);   \n  }\n  dfs1(1, 0), dfs2(1, 0, 0);   \n  if (w == 3) printf(\"%d\\n\", ans[1]);\n  else {\n    for (int i = 1; i <= n; i++) printf(\"%d\", ans[i]);\n    puts(\"\");  \n  }\n}\n\nint main() {\n  scanf(\"%d %d\", &w, &T);\n  while (T--) {\n    init(), solve();\n  }\n  return 0;\n} \n```",
        "postTime": 1583221627,
        "uid": 114320,
        "name": "\u843d\u6c50",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4228 \u3010\u6995\u6811\u4e4b\u5fc3\u3011"
    },
    {
        "content": "### [\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P4228)\n### [\u987a\u4fbf\u5b89\u5229\u4e00\u4e0b\u535a\u5ba2](https://czicz.cn/2020/08/31/jie-ti-bao-gao-qing-hua-ji-xun-2017-rong-shu-zhi-xin/)\n---\n\n### \u524d\u8a00(\u80e1\u8a00\u4e71\u8bed)\n\n\u5176\u5b9e\u8fd9\u9898\u7b97\u662f\u516d\u6708zzy\u8bb2\u8bfe\u65f6\uff0c\u4e00\u9053atcoder\u4e0a\u9762\u7684\u9898\u7684\u52a0\u5f3a\u7248\uff0c\u5f53\u65f6\u56e0\u4e3a\u67d0\u4e9b\u4e0d\u53ef\u6297\u529b\u6253\u4e86\u4e00\u534a\uff0c\u4eca\u5929\u56de\u5934\u6765\u628a\u8fd9\u9053\u9898\u5207\u4e86\n\n### \u9898\u610f\n\n\u7ed9\u4f60\u4e00\u68f5\u6811\uff0c\u4e00\u5f00\u59cb\u5728 $1$ \u53f7\u7ed3\u70b9(\u6839)\u6709\u4e00\u4e2a\u68cb\u5b50\uff0c\u4f60\u9700\u8981\u5c06\u68cb\u5b50\u5411\u6bcf\u4e2a\u9664\u4e86\u6839\u8282\u70b9\u4ee5\u5916\u7684\u70b9\u90fd\u79fb\u52a8\u4e00\u683c(\u5fc5\u987b\u5148\u62d3\u5c55\u5176\u7236\u7ed3\u70b9)\uff0c\u8f93\u51fa\u68cb\u5b50\u662f\u5426\u6709\u53ef\u80fd\u6700\u7ec8\u4f4d\u4e8e $i$ \u53f7\u7ed3\u70b9\u3002\u591a\u7ec4\u6570\u636e\n\n### \u9898\u89e3\n\n\u6211\u4eec\u5148\u4ece\u90e8\u5206\u5206\u5f00\u59cb\u8003\u8651\n\n##### subtask1[ 10pts ]\n\n\u76f4\u63a5\u88f8\u7684\u66b4\u529b\uff0c\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\n\n##### subtask2[ 10pts ]\n\nemm\u2026\u2026\u592a\u83dc\u4e86\uff0c\u6ca1\u60f3\u51fa\u6765\u6709\u4ec0\u4e48\u7279\u6b8a\u7684\u505a\u6cd5\n\n##### subtask3[ 10pts ]\n\n\u6211\u4eec\u8bbe\u4e00\u4e2a $f_i$ \u4e3a\u4ece\u4ee5 $i$ \u4e3a\u6839\u7684\u5b50\u6811\u5f00\u59cb\u79fb\u52a8\uff0c\u6700\u7ec8\u80fd\u79bb $i$ \u6700\u8fd1\u7684\u8ddd\u79bb\n\u5f88\u663e\u7136\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6811\u5f62DP\u6765\u8f6c\u79fb\n\u6211\u4eec\u5148\u5904\u7406\u51fa\u6bcf\u4e2a\u7ed3\u70b9\u7684\u91cd\u513f\u5b50\u8bb0\u4e3a $v$\n\n\u5982\u679c $f_v+1\\le size_i-size_v-1$ \uff0c\u4ece\u91cd\u513f\u5b50\u4e2d\u79fb\u52a8\uff0c\u79bb\u91cd\u513f\u5b50\u6700\u8fd1\u7684\u8ddd\u79bb+1\uff0c\u5373\u4e3a\u79bb\u5f53\u524d\u7ed3\u70b9\u7684\u8ddd\u79bb\uff0c\u5982\u679c\u6b64\u8ddd\u79bb\u5c0f\u4e8e\u5176\u5b83\u53ef\u4ee5\u79fb\u52a8\u7684\u7ed3\u70b9\u6570\u91cf\uff0c\u5219\u5f53 $size_i-1\\mod 2=0$ \u65f6\uff0c\u5219 $f_i=0$ \uff0c\u5426\u5219\u5373 $f_i=1$\n\u53cd\u4e4b\uff0c\u5219 $f_i=f_v+1-(size_i-size_v-1)$\n\n\u5f88\u663e\u7136\u7684\uff0c\u8fd9\u4e2a\u505a\u6cd5\u53ea\u8003\u8651\u4e86\u4ee5 $i$ \u4e3a\u6839\u7684\u5b50\u6811\uff0c\u6ca1\u6709\u8003\u8651\u5176\u4f59\u4e0d\u5c5e\u4e8e\u5176\u5b50\u6811\u7684\u7ed3\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u80fd\u5904\u7406 $1$ \u53f7\u7ed3\u70b9\n\n##### subtask4[ 35pts ]\n\n\u6211\u4eec\u8003\u8651 subtask3 \u7684\u505a\u6cd5\uff0c\u662f\u53ea\u80fd\u5904\u7406\u5f53\u524d\u7ed3\u70b9\u7684\u5b50\u6811\uff0c\u6211\u4eec\u8003\u8651\u5bf9\u4e8e\u4efb\u610f\u70b9 $i$ \uff0c\u5148\u5c06\u68cb\u5b50\u79fb\u5230 $i$ \u7ed3\u70b9\uff0c\u5e76\u5c06 $1\\to i$ \u7f29\u6210\u65b0\u6839\uff0c\u7136\u540e\u91cd\u590d subtask3 \u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(n^2)$\n\n##### subtask5[ 35pts ]\n\n\u8003\u8651\u5bf9\u4e0a\u8ff0\u505a\u6cd5\u4f18\u5316\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f53\u6211\u4eec\u5904\u7406\u65b0\u6839\u662f\uff0c\u6211\u4eec\u53ea\u9700\u8981\u9664\u5f00\u7f29\u6210\u7684\u70b9\u540e\u7684\u91cd\u513f\u5b50\uff0c\u5f88\u663e\u7136\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4ece $1$ \u53f7\u7ed3\u70b9\u5f00\u59cb\u904d\u5386\uff0c\u540c\u65f6\u7ef4\u62a4\u4e00\u4e2a $1\\to u$ \u7f29\u70b9\u540e\u7684\u91cd\u513f\u5b50mson\n\n\u5373$ mson=\\max(mson(u),mson)$\n\u7279\u522b\u7684\uff0c\u5f53 $mson=u$ \u65f6\uff0c\u6211\u4eec\u7528\u6b21\u91cd\u513f\u5b50\u8fdb\u884c\u5224\u65ad\u5373\u53ef\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u8981\u7ef4\u62a4\u4e00\u4e2a\u6b21\u91cd\u513f\u5b50\n\n\u6bcf\u4e2a\u70b9\u7684\u91cd\u513f\u5b50\u548c\u6b21\u91cd\u513f\u5b50\u53ef\u4ee5\u548c $f_i$ \u4e00\u6837\u5148\u9884\u5904\u7406\u597d\uff0c\u5f53\u6211\u4eec\u904d\u5386\u5411\u4e0b\u4e00\u4e2a\u7ed3\u70b9\u62d3\u5c55\u65f6\u8ba8\u8bba\u60c5\u51b5\u66f4\u65b0\u5373\u53ef\n\n### \u4ee3\u7801\n\n```cpp\n#include<stdio.h>\n#include<iostream>\n#include<cstring>\n#include<stdlib.h>\n#include<time.h>\n#include<algorithm>\n#include<math.h>\n#define maxn 200005\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nint T,W,n,ans[maxn],fa[maxn];\nint si[maxn],f[maxn],dep[maxn];\nint mson[maxn],cmson[maxn];\nint head[maxn],cnt_edge;\nstruct eage\n{\n\tint v,last;\n}e[maxn<<2];\n\ninline int read(void)\n{\n\tint num,sign=1;\n\tchar c;\n\twhile(!isdigit(c=getchar()))if(c=='-')sign=0;\n\tnum=c-'0';\n\twhile(isdigit(c=getchar()))num=(num<<3)+(num<<1)+c-'0';\n\treturn sign?num:-num;\n}\n\ninline void clear(void)\n{\n\tmemset(head,0,sizeof head),cnt_edge=0;\n\tmemset(mson,0,sizeof mson);\n\tmemset(cmson,0,sizeof cmson);\n\tmemset(f,0,sizeof f);\n}\n\n\ninline void addeage(int u,int v)\n{\n\te[++cnt_edge].last=head[u],e[cnt_edge].v=v,head[u]=cnt_edge;\n\te[++cnt_edge].last=head[v],e[cnt_edge].v=u,head[v]=cnt_edge;\n}\n\nvoid dfs1(int u,int la)\n{\n\tsi[u]=1,dep[u]=dep[la]+1,fa[u]=la;\n\tint maxson=0,cmaxson=0;\n\tfor(register int i=head[u];i;i=e[i].last)\n\t{\n\t\tint v=e[i].v;\n\t\tif(v==la)continue;\n\t\tdfs1(v,u);\n\t\tsi[u]+=si[v];\n\t\tif(si[v]>maxson)cmaxson=maxson,maxson=si[v],cmson[u]=mson[u],mson[u]=v;\n\t\telse if(si[v]>cmaxson)cmaxson=si[v],cmson[u]=v;\n\t}\n\tif(mson[u])\n\t{\n\t\tif(f[mson[u]]+1<=si[u]-maxson-1)f[u]=(si[u]-1)%2;\n\t\telse f[u]=f[mson[u]]-si[u]+maxson+2;\n\t}\n}\ninline int getmax(int x,int y){return si[x]>=si[y]?x:y;}\ninline int getmin(int x,int y){return si[x]<si[y]?x:y;}\n\nvoid dfs2(int u,int la,int maxid,int cmaxid)\n{\n\tif(u!=1)\n\t{\n\t\tint sum=n-dep[u];\n\t\tif(f[maxid]+1<=sum-si[maxid])ans[u]=!(sum%2);\n\t\telse ans[u]=!(f[maxid]+1-sum+si[maxid]);\n\t}\n\tfor(register int i=head[u];i;i=e[i].last)\n\t{\n\t\tint v=e[i].v;\n\t\tif(v==la)continue;\n\t\tif(v==maxid)dfs2(v,u,getmax(cmaxid,mson[v]),getmax(cmson[v],getmin(cmaxid,mson[v])));\n\t\telse if(v==cmaxid)dfs2(v,u,getmax(maxid,mson[v]),getmax(cmson[v],getmin(maxid,mson[v])));\n\t\telse dfs2(v,u,getmax(maxid,mson[v]),getmax(cmaxid,getmax(cmson[v],getmin(maxid,mson[v]))));\n\t}\n}\n\nsigned main(void)\n{\n\tW=read(),T=read();\n\twhile(T--)\n\t{\n\t\tclear();\n\t\tn=read();\n\t\tfor(register int i=1;i<n;++i)addeage(read(),read());\n\t\tdfs1(1,0),ans[1]=!f[1];\n\t\tdfs2(1,0,mson[1],cmson[1]);\n\t\tif(W==3)\n\t\t\tprintf(\"%d\\n\",ans[1]);\n\t\telse\n\t\t{\n\t\t\tfor(register int i=1;i<=n;++i)printf(\"%d\",ans[i]);\n\t\t\tprintf(\"\\n\");\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1598856580,
        "uid": 224229,
        "name": "Caicz",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4228 \u3010[\u6e05\u534e\u96c6\u8bad2017] \u6995\u6811\u4e4b\u5fc3\u3011"
    },
    {
        "content": "\u7ed9\u4f60\u4e00\u68f5\u6709\u6839\u6811\u548c\u4e00\u4e2a\u52a8\u70b9\uff0c\u52a8\u70b9\u4e00\u5f00\u59cb\u4f4d\u4e8e\u6839\u7ed3\u70b9 $1$\u3002\n\n\u4e00\u5f00\u59cb\u8fd9\u68f5\u6811\u53ea\u6709\u6839\u7ed3\u70b9\uff0c\u6bcf\u6b21\u53ef\u4ee5\u5728\u5df2\u6709\u7684\u7ed3\u70b9\u4e0a\u6cbf\u539f\u6811\u8fb9\u5411\u5916\u6269\u5c55\u4e00\u4e2a\u7ed3\u70b9\uff0c\u5e76\u4f7f\u52a8\u70b9\u6cbf\u7740\u65b0\u7ed3\u70b9\u7684\u65b9\u5411\u79fb\u52a8\u4e00\u4e2a\u7ed3\u70b9\u3002\n\n\u8bf7\u6c42\u51fa\u6bcf\u4e2a\u7ed3\u70b9\u5728\u539f\u6811\u88ab\u5b8c\u5168\u6269\u5c55\u540e\uff0c\u52a8\u70b9\u662f\u5426\u80fd\u505c\u7559\u5728\u5f53\u524d\u7ed3\u70b9\u3002\n\n\u591a\u6d4b\uff0c$T \\leq 20,n\\leq 10^5$\uff0c\u65f6\u9650 $3\\text{s}$\uff0c\u7a7a\u9650 $500\\text{MB}$\u3002\n\n#### sol\n\n\u5148\u8003\u8651\u6839\u8282\u70b9\u7684\u7b54\u6848\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5047\u8bbe\u52a8\u70b9\u5f53\u524d\u5728\u70b9 $u$\uff0c\u90a3\u4e48\u6211\u4eec\u5c06 $u$ \u7684\u4e24\u4e2a\u4e0d\u540c\u5b50\u6811\u5206\u522b\u505a\u4e00\u6b21\u6269\u5c55\uff0c\u52a8\u70b9\u4e0d\u52a8\uff0c\u79f0\u4e4b\u4e3a\u62b5\u6d88\u3002\n\n\u6839\u636e\u5957\u8def\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6839\u8282\u70b9\u7684\u5b50\u6811\u7684\u5927\u5c0f\u5927\u4e8e\u603b\u5927\u5c0f\uff08\u9664\u53bb\u6839\u8282\u70b9\uff09\u7684\u4e00\u534a\uff0c\u90a3\u4e48\u5f53\u8fd9\u4e2a\u5b50\u6811\u88ab\u5b8c\u5168\u6269\u5c55\u540e\uff0c\u6839\u8282\u70b9\u7684\u5176\u4ed6\u5b50\u6811\u65e0\u8bba\u5982\u4f55\u4e5f\u4e0d\u80fd\u5c06\u5b83\u62c9\u56de\u6839\u8282\u70b9\u3002\n\n\u5426\u5219\uff0c\u5373\u6839\u8282\u70b9\u7684\u6700\u5927\u5b50\u6811\u5c0f\u4e8e\u7b49\u4e8e\u603b\u5927\u5c0f\uff08\u9664\u53bb\u6839\u8282\u70b9\uff09\u7684\u4e00\u534a\uff0c\u90a3\u4e48\u80af\u5b9a\u6709\u4e00\u79cd\u62b5\u6d88\u65b9\u6848\u4f7f\u5f97\u6700\u540e\u9664\u6839\u8282\u70b9\u5916\u5269\u4e0b $(n-10)\\bmod 2$ \u4e2a\u8282\u70b9\u3002\n\n\u73b0\u5728\u8003\u8651\u5982\u4f55\u8ba9\u6839\u8282\u70b9\u7684\u6700\u5927\u5b50\u6811\u53d8\u5c0f\uff0c\u8d8a\u5c0f\u8d8a\u597d\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5b50\u6811\u5185\u662f\u53ef\u4ee5\u81ea\u884c\u62b5\u6d88\u7684\uff0c\u5373\u5c06\u52a8\u70b9\u62c9\u5012\u5b50\u6811\u5185\u7684\u4e00\u4e2a\u70b9 $v$\uff0c\u5c06 $v$ \u7684\u4e24\u4e2a\u4e0d\u540c\u5b50\u6811\u5206\u522b\u505a\u4e00\u6b21\u6269\u5c55\uff0c\u52a8\u70b9\u4ecd\u7136\u4e0d\u52a8\u3002\n\n\u8bbe $f_u$ \u8868\u793a $u$ \u7684\u5b50\u6811\u5185\u81ea\u884c\u62b5\u6d88\u540e\u5269\u4e0b\u7684\u6700\u5c0f\u7684\u8282\u70b9\u6570\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\uff0c\u8bbe $u$ \u7684\u6700\u5927\u5b50\u6811\u7684\u6839\u4e3a $v$\uff1a\n\n* \u82e5 $f_v\\leq siz_u-1-siz_v$\uff0c\u5219 $v$ \u7684\u5927\u5c0f\u5c0f\u4e8e\u7b49\u4e8e\u603b\u5927\u5c0f\uff08\u9664\u53bb $u$\uff0c\u53ea\u8003\u8651 $u$ \u8fd9\u4e2a\u5b50\u6811\uff09\u7684\u4e00\u534a\uff0c\u5219 $f_u=(siz_u-1)\\bmod 2$\u3002\n* \u5426\u5219\uff0c\u8ba9\u5176\u4ed6\u5b50\u6811\u5168\u90e8\u53bb\u6d88 $v$\uff0c\u6700\u540e\u5269\u4e0b\u7684\u662f $v$ \u7684\u4e00\u90e8\u5206\uff0c\u5219 $f_u=f_v-(siz_u-1-siz_v)$\u3002\n\n\u6ce8\u610f\uff0c\u4e0a\u9762\u60c5\u51b5\u90fd\u6ca1\u8ba8\u8bba $u$\u3002\n\n\u4e3a\u4e86\u8ba9\u52a8\u70b9\u53ef\u4ee5\u5230\u8fbe $u$\uff0c$u$ \u9700\u8981\u7531 $u$ \u7684\u7236\u4eb2\u5411 $u$ \u6269\u5c55\u4e00\u904d\uff0c\u6240\u4ee5\u8fd9\u4e2a\u8d21\u732e\u9700\u8981\u52a0\u4e0a\uff0c\u6700\u540e\u4ee4 $f_u++$\u3002\n\n\u5bf9\u4e8e\u6839\u8282\u70b9\u7684\u7b54\u6848\uff0c\u8bbe\u5176\u6700\u5927\u5b50\u6811\u4e3a $v$\uff0c\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1a\n\n* $f_v\\leq n-1-siz_v$\uff0c\u5373\u5176\u6700\u5927\u5b50\u6811\u81ea\u884c\u6d88\u9664\u540e\u5269\u4f59\u7684\u8282\u70b9\u6839\u8282\u70b9\u7684\u5176\u4ed6\u5b50\u6811\u53ef\u88ab\u6d88\u5b8c\u3002\n* $n-1\\equiv 0\\pmod 2$\uff0c\u5373\u5176\u5b83\u5b50\u6811\u4e92\u76f8\u6d88\u9664\u540e\u6ca1\u6709\u5269\u4f59\u8282\u70b9\u3002\n\n\u518d\u8003\u8651\u5176\u4ed6\u8282\u70b9\uff08\u8bbe\u5176\u4e3a $u$\uff09\u7684\u7b54\u6848\u3002\n\n\u8003\u8651\u4e00\u5f00\u59cb\u5148\u5c06\u52a8\u70b9\u79fb\u52a8\u5230 $u$\uff0c\u5219\u6211\u4eec\u53ef\u4ee5\u5c06 $1 \\to u$ \u7684\u8fd9\u6761\u94fe\u7f29\u6210\u4e00\u4e2a\u70b9\u3002\n\n\u5982\u4e0b\u56fe\uff1a\n\n![](https://img-blog.csdnimg.cn/img_convert/7eb276ce2f1b90997a5e253db75c3cf2.png)\n\n\u7531\u4e0a\u56fe\u5e94\u8be5\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u6211\u4eec\u5c06 $1 \\to u$ \u7684\u8fd9\u6761\u94fe\u7f29\u6210\u4e00\u4e2a\u70b9\u7684\u8bdd\uff0c\u8fd8\u9700\u4fdd\u5b58\u6bcf\u4e2a\u70b9\u7684\u6b21\u5927\u5b50\u6811\uff0c\u7136\u540e\u50cf\u505a\u6839\u8282\u70b9\u7684\u65f6\u5019\u4e00\u6837\u505a\u5373\u53ef\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal O(Tn)$\uff0c\u53ef\u8fc7\u3002\n\n$\\text{187ms /  16.99MB /  2.83KB C++98 O2}$\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\n#define re register\n\nusing namespace std;\n\nnamespace Fread\n{\n    const int SIZE = 1 << 23;\n    char buf[SIZE], *S, *T;\n    inline char getchar()\n    {\n        if (S == T)\n        {\n            T = (S = buf) + fread(buf, 1, SIZE, stdin);\n            if (S == T)\n                return '\\n';\n        }\n        return *S++;\n    }\n}\nnamespace Fwrite\n{\n    const int SIZE = 1 << 23;\n    char buf[SIZE], *S = buf, *T = buf + SIZE;\n    inline void flush()\n    {\n        fwrite(buf, 1, S - buf, stdout);\n        S = buf;\n    }\n    inline void putchar(char c)\n    {\n        *S++ = c;\n        if (S == T)\n            flush();\n    }\n    struct NTR\n    {\n        ~NTR()\n        {\n            flush();\n        }\n    } ztr;\n}\n\n#ifdef ONLINE_JUDGE\n#define getchar Fread::getchar\n#define putchar Fwrite::putchar\n#endif\n\ninline int read()\n{\n\tre int x = 0, f = 1;\n\tre char c = getchar();\n\twhile (c < '0' || c > '9')\n\t{\n\t\tif (c == '-')\n\t\t\tf = -1;\n\t\tc = getchar();\n\t}\n\twhile (c >= '0' && c <= '9')\n\t\tx = x * 10 + c - '0', c = getchar();\n\treturn x * f;\n}\n\ninline void write(int x)\n{\n\tif(x < 0)\n\t{\n\t\tputchar('-');\n\t\tx = -x;\n\t}\n\tif(x > 9)\n\t\twrite(x / 10);\n\tputchar(x % 10 + '0');\n}\n\nconst int _ = 100007;\n\nint n;\n\nbool ans[_];\n\nint cnt, head[_], to[_ << 1], nxt[_ << 1];\n\ninline void add(int u, int v)\n{\n\tto[++cnt] = v;\n\tnxt[cnt] = head[u];\n\thead[u] = cnt;\n}\n\nint dep[_], siz[_], hson[_], hson2[_], f[_];\n\ninline int cmp(int x, int y)\n{\n\treturn siz[x] > siz[y] ? x : y;\n}\n\ninline void dfs1(int u, int fa)\n{\n\tdep[u] = dep[fa] + 1, siz[u] = 1;\n\tfor (re int i = head[u]; i; i = nxt[i])\n\t{\n\t\tint v = to[i];\n\t\tif (v == fa)\n\t\t\tcontinue;\n\t\tdfs1(v, u), siz[u] += siz[v];\n\t\tif (siz[v] > siz[hson[u]])\n\t\t\thson2[u] = hson[u], hson[u] = v;\n\t\telse if (siz[v] > siz[hson2[u]])\n\t\t\thson2[u] = v;\n\t}\n\tif (f[hson[u]] <= siz[u] - 1 - siz[hson[u]])\n\t\tf[u] = (siz[u] - 1) % 2;\n\telse\n\t\tf[u] = f[hson[u]] - (siz[u] - 1 - siz[hson[u]]);\n\tf[u]++;\n}\n\ninline void dfs2(int u, int fa, int h)\n{\n\tint tmp = cmp(hson[u], h);\n\tif (f[tmp] <= n - dep[u] - siz[tmp])\n\t\tans[u] = (n & 1) == (dep[u] & 1);\n\tfor (re int i = head[u]; i; i = nxt[i])\n\t{\n\t\tre int v = to[i];\n\t\tif (v == fa)\n\t\t\tcontinue;\n\t\tdfs2(v, u, v == hson[u] ? cmp(hson2[u], h) : cmp(hson[u], h));\n\t}\n}\n\ninline void init()\n{\n\tcnt = 0;\n\tmemset(head, 0, sizeof head);\n\tmemset(hson, 0, sizeof hson);\n\tmemset(hson2, 0, sizeof hson2);\n\tmemset(ans, 0, sizeof ans);\n}\n\nsigned main()\n{\n\tre int W = read(), T = read();\n\twhile (T--)\n\t{\n\t\tinit();\n\t\tn = read();\n\t\tfor (re int i = 1, u, v; i < n; ++i)\n\t\t{\n\t\t\tu = read(), v = read();\n\t\t\tadd(u, v), add(v, u);\n\t\t}\n\t\tdfs1(1, 0);\n\t\tdfs2(1, 0, 0);\n\t\tif (W == 3)\n\t\t\twrite(ans[1]);\n\t\telse\n\t\t\tfor (re int i = 1; i <= n; ++i)\n\t\t\t\twrite(ans[i]);\n\t\tputchar('\\n');\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1644455668,
        "uid": 257146,
        "name": "orz_z",
        "ccfLevel": 0,
        "title": "P4228 [\u6e05\u534e\u96c6\u8bad2017] \u6995\u6811\u4e4b\u5fc3"
    },
    {
        "content": "\u5148\u8003\u8651\u5b50\u4efb\u52a1\u4e09\u2014\u2014\u5982\u4f55\u5224\u65ad $1$ \u53f7\u70b9\u7684\u7b54\u6848\u6b63\u786e\u3002\n\n\u8fd9\u53ef\u4ee5\u770b\u505a\u662f\u6bcf\u68f5\u5b50\u6811\u90fd\u5728\u5c06\"\u5fc3\"\u5f80\u81ea\u5df1\u7684\u5b50\u6811\u91cc\u62c9\u626f\uff0c\u5982\u679c\u4e0d\u5728\u8fd9\u68f5\u5b50\u6811\u5185\u53c8\u9009\u62e9\u4e86\u8fd9\u68f5\u5b50\u6811\u5185\u7684\u8282\u70b9\u5ef6\u4f38\u7684\u8bdd\u4f1a\u5c06\u201c\u5fc3\u201d\u4ece\u5176\u4ed6\u5b50\u6811\u4e2d\u5411\u4e0a\u63d0\u5347\u3002\n\n\u6700\u7ec8\u5982\u679c\u201c\u5fc3\u201d\u8fd8\u5728 $1$ \u53f7\u70b9\u5904\uff0c\u5219\u5404\u4e2a\u5b50\u6811\u5185\u7684\u201c\u62c9\u529b\u201d\u5e94\u8be5\u201c\u5e73\u8861\u201d\u3002\n\n\u5f62\u5f0f\u5316\u7684\u8bb2\uff0c\u5bf9\u6bcf\u4e2a\u5b50\u6811 $u$ \u53ef\u4ee5\u6c42\u51fa\u4e00\u4e2a\u96c6\u5408 $f_u$\uff0c$x\\in f_u$ \u5f53\u4e14\u4ec5\u5f53\u4ee5\u5b50\u6811 $u$ \u5185\u5b58\u5728\u4e00\u79cd\u65b9\u6848\uff0c\u4f7f\u5f97\u53ef\u4ee5\u5c06\u5b50\u6811\u5916\u7684\u201c\u5fc3\u201d\u5411\u5b50\u6811\u5185\u79fb\u52a8 $x$\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\u53ef\u4ee5\u5199\u6210\uff1a\n\n$$f_u=\\cup_{x_v\\in f_v}\\{|\\sum \\pm(x_v+1)|\\}$$\n\n\u5373\uff0c\u6bcf\u4e2a\u5b50\u6811\u5185\u90fd\u53ef\u4ee5\u9009\u62e9\u4e00\u4e2a\u53ef\u80fd\u7684\u65b9\u6848\uff0c\u5e76\u51b3\u5b9a\u5c06\u201c\u5fc3\u201d\u5411\u5b50\u6811\u5185\u79fb\u52a8\u65f6\u662f\u201c\u5fc3\u201d\u5728 $u$ \u7684\u5b50\u6811\u5916\uff08+\uff09\u8fd8\u662f\u5728 $u$ \u7684\u53e6\u4e00\u68f5\u5b50\u6811\u5185\uff08-\uff09\u3002\n\n~~\u4e0e\u5176\u4ed6\u5b50\u6811\u4e4b\u95f4\u662f\u62ee\u6297\u8fd8\u662f\u534f\u540c~~\n\n\u8fd9\u91cc\u6709\u4e00\u4e2a $+1$ \u662f\u56e0\u4e3a\u9700\u8981\u8003\u8651\u8282\u70b9 $v$ \u81ea\u8eab\u5ef6\u4f38\u51fa\u53bb\u65f6\u4ea7\u751f\u7684\u5f71\u54cd\u3002\n\n\u56e0\u4e3a\u6bcf\u4e00\u9897\u5b50\u6811\u5185\u9009\u62e9\u7684\u65b9\u6848\u662f $\\pm$ \u6765\u63cf\u8ff0\u7684\uff0c\u6240\u4ee5\u5982\u679c\u539f\u6765 $f_u$ \u5185\u6bcf\u4e2a\u5143\u7d20\u7684\u5947\u5076\u6027\u76f8\u540c\uff0c\u90a3\u4e48\u52a0\u4e0a\u4e00\u9897\u5b50\u6811\u7684\u8d21\u732e\u4e4b\u540e $f_u$ \u6bcf\u4e2a\u5143\u7d20\u7684\u5947\u5076\u6027\u4f9d\u65e7\u76f8\u540c\u3002\n\n\u5982\u679c\u8f6c\u79fb\u524d\u7684 $f_u$ \u548c $f_v$ \u90fd\u53ef\u4ee5\u8868\u793a\u6210\u4e00\u6bb5\u8fde\u7eed\u7684\u5947\u5076\u6027\u76f8\u540c\u7684\u6574\u6570\uff0c\u90a3\u4e48\u52a0\u4e0a $f_v$ \u7684\u8d21\u732e\u540e $f_u$ \u4f9d\u65e7\u53ef\u4ee5\u8868\u793a\u6210\u4e00\u6bb5\u8fde\u7eed\u7684\u5947\u5076\u6027\u76f8\u540c\u7684\u6574\u6570\u3002\n\n\u56e0\u4e3a\u5bf9\u4e8e\u53f6\u5b50 $u$\uff0c\u6709 $f_u=\\{0\\}$\uff0c\u6240\u4ee5\u6839\u636e\u5f52\u7eb3\u6cd5\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684 $f_u$ \u90fd\u662f\u8fde\u7eed\u4e00\u6bb5\u5947\u5076\u6027\u76f8\u540c\u7684\u6574\u6570\n\n\u90a3\u4e48\u7528 $l_u,r_u$ \u8868\u793a $f_u$ \u5185\u7684\u6700\u5927\u503c\u548c\u6700\u5c0f\u503c\uff0c\u5c31\u53ef\u4ee5\u8f6c\u79fb\u4e86\u3002\u8f6c\u79fb\u7684\u65f6\u5019\u8003\u8651\u5728\u4e24\u4e2a\u96c6\u5408\u91cc\u5206\u522b\u9009\u5143\u7d20\u4f7f\u5f97\u4e24\u5143\u7d20\u7684\u5dee\u5c3d\u53ef\u80fd\u5c0f\u6216\u91cf\u5143\u7d20\u7684\u548c\u5c3d\u53ef\u80fd\u5927\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5199\u51fa\u8fd9\u6837\u7684\u4ee3\u7801\uff1a\n\n```cpp\nstruct node{\n\tint l,r;\n\tnode operator+(const node&u)const{\n\t\treturn(node){max(l+u.l&1,max(l,u.l)-min(r,u.r)),r+u.r};\n\t}\n}\n```\n\n\u6ce8\u610f\u8fd9\u91cc\u9700\u8981\u8003\u8651\u5947\u5076\u6027\u5bf9\u5dee\u7684\u6700\u5c0f\u503c\u7684\u5f71\u54cd\u3002\n\n\u68c0\u67e5 $f_1$ \u5185\u662f\u5426\u6709 $0$ \u5373\u53ef\u5224\u65ad\u662f\u5426\u5b58\u5728\u4f7f\u201c\u5fc3\u201d\u79fb\u52a8\u5230 $1$ \u53f7\u8282\u70b9\u5904\u7684\u65b9\u6848\u3002\n\n\u73b0\u5728\u9700\u8981\u5bf9\u6bcf\u4e2a\u70b9\u90fd\u6c42\u51fa $f$\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u80fd\u8868\u793a\u6210\u5b50\u6811\u5916\u7684\u96c6\u5408\u4e0e\u5b50\u6811\u5185\u7684\u96c6\u5408\u5408\u5e76\u7684\u7ed3\u679c\uff0c\u6362\u6839 dp \u5373\u53ef\u3002\n\n\u603b\u590d\u6742\u5ea6\u662f $O(Tn)$ \u7684\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define I inline int\n#define V inline void\n#define isnum(ch) ('0'<=ch&&ch<='9')\n#define FOR(i,a,b) for(int i=a;i<=b;i++)\n#define REP(u) for(int i=0,v;i<d[u]&&(v=e[u][i]);i++)if(v^fa)\n#define PER(u) for(int i=d[u]-1,v;~i&&(v=e[u][i]);i--)if(v^fa)\n#define gc (_op==_ed&&(_ed=(_op=_buf)+fread(_buf,1,100000,stdin),_op==_ed)?EOF:*_op++)\nchar _buf[100000],*_op(_buf),*_ed(_buf);\nI getint(){\n\tint _s=0;char _ch=gc;\n\twhile(!isnum(_ch))_ch=gc;\n\twhile(isnum(_ch))_s=_s*10+_ch-48,_ch=gc;\n\treturn _s;\n}\nI min(const int&x,const int&y){return(x-y>>31)?x:y;}\nI max(const int&x,const int&y){return(y-x>>31)?x:y;}\nconst int N=1e5+1;\nint type,T,n;\nint a[N],b[N],c[N],d[N];\nvector<int>e[N];\nstruct node{\n\tint l,r;\n\tV init(){l=r=0;}\n\tI ok(){return !l;}\n\tnode move(){return(node){l+1,r+1};}\n\tnode operator+(const node&u)const{\n\t\treturn(node){max(l+u.l&1,max(l,u.l)-min(r,u.r)),r+u.r};\n\t}\n}f[N],g[N];\nV clean(){FOR(i,1,n)a[i]=b[i]=c[i]=d[i]=0,e[i].clear();}\nV add_edge(int x,int y){e[x][--c[x]]=y,e[y][--c[y]]=x;}\nV input(){\n\tn=getint();\n\tFOR(i,2,n)d[a[i]=getint()]++,d[b[i]=getint()]++;\n}\nV init(){\n\tFOR(i,1,n)e[i].resize(c[i]=d[i]);\n\tFOR(i,2,n)add_edge(a[i],b[i]);\n}\nV dfs1(int u,int fa){\n\tf[u].init(),g[u].init();\n\tREP(u)dfs1(v,u),g[u]=g[u]+g[v].move();\n}\nV dfs2(int u,int fa){\n\tstatic node tmp;\n\ttmp.init();REP(u)f[v]=f[v]+tmp,tmp=tmp+g[v].move();\n\ttmp.init();PER(u)f[v]=f[v]+tmp,tmp=tmp+g[v].move();\n\tREP(u)f[v]=f[v]+f[u],dfs2(v,u);\n\tf[u]=f[u]+g[u];\n}\nV work(){\n\tdfs1(1,0),dfs2(1,0);\n\tif(type==3)cout<<f[1].ok();\n\telse FOR(i,1,n)cout<<f[i].ok();\n\tcout<<'\\n';\n}\nint main(){\n\ttype=getint(),T=getint();\n\twhile(T--){\n\t\tclean();\n\t\tinput();\n\t\tinit();\n\t\twork();\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1581657228,
        "uid": 109236,
        "name": "Fuyuki",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P4228 \u3010\u6995\u6811\u4e4b\u5fc3\u3011"
    },
    {
        "content": "\u9ed1\u767d\u67d3\u8272\u540e\uff0c\u5047\u8bbe\u9ed1\u70b9$x$,$y$\u4e3a\u53ef\u884c\u89e3\uff0c\u5219\u94fe$xy$\u4e2d\u95f4\u7684\u6240\u6709\u9ed1\u70b9\u90fd\u53ef\u884c\uff08$xy$\u540c\u65f6\u53ef\u884c\uff0c\u5219\u94fe$xy$\u4e0a\u5fc5\u5b9a\u6709\u4e9b\u70b9\u4e0e$x$\u65b9\u5411\u6216$y$\u65b9\u5411\u62b5\u6d88\uff0c\u6539\u53d8\u987a\u5e8f\u4fbf\u53ef\u4f7f\u6700\u7ec8\u5230\u8fbe\u70b9\u632a\u52a82\u7684\u8ddd\u79bb\uff09\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u70b9$x$\u8ba1\u7b97\u51fa$x$\u7684\u5b50\u6811\u80fd\u5230\u8fbe\u6700\u6d45\u70b9\uff0c\u4ee5\u53ca\u539f\u6811\u53bb\u9664\u6389$x$\u7684\u5b50\u6811\u80fd\u5230\u8fbe\u7684\u79bb$x$\u7684\u7236\u4eb2\u6700\u8fd1\u70b9\uff0c\u5373\u53ef\u8ba1\u7b97\u51fa\u662f\u5426\u53ef\u4ee5\u628a\u5fc3\u62fd\u5230$x$\u7684\u5b50\u6811\u4e0e\u80fd\u5426\u628a\u5fc3\u62fd\u5230$x$\u7684\u5b50\u6811\u518d\u62fd\u51fa\u53bb\uff0c\u5373\u53ef\u6c42\u51fa\u7b54\u6848\u3002\n\n```\n#include<cstdio>\n#include<algorithm>\n#include<queue>\n#include<ctype.h>\n#include<cstring>\n#define maxn 100005\n#define inf (1e9+7)\n#define re(i,a,b) for(int i=a;i<=b;i++)\n#define _re(i,a,b) for(int i=a;i>=b;i--)\n#define for_edge(x) for(int i=head[x];i;i=e[i].nxt)\nusing namespace std;\ninline int read()\n{\n\tint ans = 0,f=1;\n\tchar c = getchar();\n\twhile(!isdigit(c))\n\t{\n\t\tif(c=='-')f=-1;\n\t\tc = getchar();\n\t}\n\twhile(isdigit(c))\n\t\tans = ans*10 + (c-'0'),\n\t\tc = getchar();\n\treturn ans*f;\n}\nstruct edge\n{\n\tint nxt,to;\n\tedge(int nxt=0,int to=0)\n\t:nxt(nxt),to(to){}\n}e[maxn*2];\nint head[maxn],TOT;\ninline void add_edge(int x,int y)\n{\n\te[++TOT] = edge( head[x],y );\n\thead[x] = TOT;\n}\n\nint dep[maxn],dp[maxn],_dp[maxn],size[maxn],n;\nvoid dfs1(int x,int fa)\n{\n\tdep[x] = dep[fa] + 1;\n\tsize[x] = 1;\n\tfor_edge(x)\n\t{\n\t\tint y = e[i].to ;\n\t\tif(y==fa)\n\t\t\tcontinue;\n\t\tdfs1(y,x);\n\t\tsize[x] += size[y];\n\t}\n\tdp[x] =  (size[x]^1)&1 ;\n\tfor_edge(x)\n\t{\n\t\tint y = e[i].to;\n\t\tif(y==fa)\n\t\t\tcontinue;\n\t\tdp[x] = max( dp[x],dp[y]+size[y]-size[x]+2);\n\t}\n}\ninline void dfs2(int x,int fa)\n{\n\tint mx1 = -n , mx2 = -n;\n\t\n\tfor_edge(x)\n\t{\n\t\tint y = e[i].to ;\n\t\tif(y==fa)\n\t\t\tcontinue;\n\t\tint mx = dp[y]+size[y]-size[x]+2;\n\t\tif(mx>mx1)\n\t\t\tmx2 = mx1 , mx1 = mx;\n\t\telse\n\t\t\tmx2 = max( mx,mx2 );\n\t}\n\tfor_edge(x)\n\t{\n\t\tint y = e[i].to ;\n\t\tif(y==fa)\n\t\t\tcontinue;\n\t\tint mx = max( (size[x]^size[y]^1)&1,(dp[y]+size[y]-size[x]+2 == mx1 ? mx2 : mx1)+size[y]);\n\t\t_dp[y] = max( (n^size[y]^dep[x])&1 , max( mx-(n-size[x]-dep[x]+1),_dp[x] +1 - (size[x]-size[y]) ) );\n\t\tdfs2(y,x);\n\t}\n}\n\nint main()\n{\n//freopen(\"0.in\",\"r\",stdin);\n\tint W=read(),T = read();\n\twhile(T--)\n\t{\n\t\tn = read();TOT = 0;\n\t\tmemset(head,0,sizeof(head));\n\t\tre(i,1,n-1)\n\t\t{\n\t\t\tint x = read() , y = read();\n\t\t\tadd_edge(x,y);\n\t\t\tadd_edge(y,x);\n\t\t}\n\t\tdfs1(1,0);\n\t\tdfs2(1,0);\n\t\t\n\t\tif(W!=3)\n\t\t{\n\t\t\tre(x,1,n)\n\t\t\t\tprintf(\"%d\",((dep[x]^n^1)&1)&& dp[x]<=n-size[x]-dep[x]+1 && _dp[x] <= size[x]-1 );\n\t\t\tprintf(\"\\n\");\n\t\t}\n\t\telse\n\t\t\tprintf(\"%d\\n\", dp[1] == 0);\n\t}\n}\n\n\n```",
        "postTime": 1579272162,
        "uid": 118037,
        "name": "Yajnun",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4228 \u3010\u6995\u6811\u4e4b\u5fc3\u3011"
    }
]
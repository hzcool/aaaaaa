[
    {
        "content": "\u66b4\u529b\u641c\u7d22\u9884\u671f\u5f97\u5206$30$\u5206\u5de6\u53f3\u3002\n\n\u72b6\u538b\u9884\u671f\u5f97\u5206$70$\u5206\u5de6\u53f3\u3002\n\n\u8003\u8651\u8d39\u7528\u6d41\uff0c\u5c06\u5269\u4f59\u4e0d\u7a33\u5b9a\u5ea6\u548c\u6700\u5c0f\u8f6c\u4e3a\u6d88\u9664\u4e0d\u7a33\u5b9a\u5ea6\u548c\u6700\u5927\u3002\n\n\u9996\u5148**\u62d0\u89d2\u5904\u53ea\u80fd\u653e\u5728\u6709\u4e0d\u7a33\u5b9a\u5ea6\u7684\u683c\u5b50\u4e0a**\uff1a\u5982\u679c\u5b83\u7684\u62d0\u89d2\u5904\u653e\u5728\u4e86$X+Y$\u4e3a\u5076\u6570\u7684\u683c\u5b50\u4e0a\uff0c\u90a3\u4e48\u5b83\u4e0d\u4ec5\u6ca1\u6709\u51cf\u5c11\u4e0d\u7a33\u5b9a\u5ea6\uff0c\u800c\u4e14\u8fd8\u5360\u5730\u3002\u8fd9\u4e2a\u8d2a\u5fc3\u663e\u7136\u6b63\u786e\u3002\n\n\u90a3\u4e48\u9ed1\u767d\u67d3\u8272\uff0c$X+Y$\u4e3a\u5076\u6570\u7684\u70b9\u5206\u4e00\u7c7b\uff0c\u4e3a\u5947\u6570\u7684\u5206\u4e00\u7c7b\u3002\u5c06$L$\u5f62\u67f1\u5b50\u62bd\u8c61\u6210\u4e24\u4e2a\u975e\u62d0\u89d2\u5904\u7684\u683c\u5b50\u7684\u8def\u5f84\uff08\u8fd9\u4e24\u4e2a\u683c\u5b50\u7684$X+Y$\u90fd\u4e3a\u5076\u6570\uff0c\u62d0\u89d2\u5904\u7684\u7b2c\u4e09\u4e2a\u683c\u5b50\u7684$X+Y$\u4e3a\u5947\u6570\uff09\u3002**\u90a3\u4e48\u8fd9\u4e24\u4e2a\u683c\u5b50\u80af\u5b9a\u4e00\u4e2a\u5728\u5947\u6570\u5217\u4e00\u4e2a\u5728\u5076\u6570\u5217**\uff0c\u8bc1\u660e\u663e\u7136\u3002\n\n\u4e8e\u662f\u5efa\u56fe\uff1a\n\n- \u4e00\u5171\u6709\u56db\u5217\u70b9\u3002\n\n- X+Y\u4e3a\u5076\u6570\u7684\u70b9\u518d\u5206\u4e3a\u4e24\u7c7b\uff1a\u5947\u6570\u5217\u7684\u548c\u5076\u6570\u5217\u7684\u3002\n\n- \u5947\u6570\u5217\u7684\u70b9\u653e\u5728\u5de6\u8fb9\uff08\u7b2c\u4e00\u5217\uff09\uff0c\u6e90\u70b9\u5411\u6bcf\u4e2a\u70b9\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a1\uff0c\u8d39\u7528\u4e3a0\u7684\u8fb9\u3002\n\n- \u5076\u6570\u5217\u7684\u70b9\u653e\u5728\u53f3\u8fb9\uff08\u7b2c\u56db\u5217\uff09\uff0c\u6bcf\u4e2a\u70b9\u5411\u6c47\u70b9\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a1\uff0c\u8d39\u7528\u4e3a0\u7684\u8fb9\u3002\n\n- X+Y\u4e3a\u5947\u6570\u7684\u70b9\u6bcf\u4e2a\u70b9\u62c6\u5f00\uff0c\u4e00\u5206\u4e3a\u4e8c\uff0c\u5206\u522b\u653e\u5728\u7b2c\u4e8c\u5217\u548c\u7b2c\u4e09\u5217\u3002\u7b2c\u4e8c\u5217\u7684\u6bcf\u4e2a\u70b9\u5411\u7b2c\u4e09\u5217\u7684\u81ea\u5df1\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a1\uff0c\u8d39\u7528\u4e3a\u8d1f\u7684\u8be5\u70b9\u7684\u6743\u503c\uff08\u4e0d\u7a33\u5b9a\u5ea6\uff09\u3002\n\n- \u5982\u679c\u7b2c\u4e00\u5217\uff08X+Y\u4e3a\u5076\u6570\uff0c\u5947\u6570\u5217\u7684\u70b9\uff09\u548c\u7b2c\u4e8c\u5217\u7684\u70b9\u76f8\u90bb\uff0c\u8fde\u4e00\u6761\u5bb9\u91cf\u4e3a1\uff0c\u8d39\u7528\u4e3a0\u7684\u8fb9\uff0c\u7b2c\u4e09\u3001\u56db\u5217\u540c\u7406\u3002\n\n- \u5f53\u7136\u584c\u4e86\u7684\u683c\u5b50\u4e0d\u80fd\u8fde\u8fb9\u3002\n\n\n\u8dd1\u4e00\u904d\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\u5373\u53ef\u3002\u8fd9\u6837\u5efa\u56fe\u6bcf\u6b21\u589e\u5e7f\u7684\u6d41\u90fd\u80af\u5b9a\u4e3a$1$\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728\u6700\u5927\u6d41\u4e3a$M$\u7684\u65f6\u5019\u76f4\u63a5\u8df3\u51fa\u3002\u671f\u671b\u5f97\u5206$40$\u5206\u3002\n\n\uff08\uff1f\uff1f\uff1f\uff09\n\n\u56e0\u4e3a\u8fd9\u6837\u662f\u9519\u7684\uff0c\n\n``` plain\n4 4 6\n0 1 0 1000\n0 0 0 0\n0 1 0 1\n0 0 0 0\n1 1\n2 1\n2 3\n4 1\n4 3\n4 4\n```\n\u5c31\u662f\u4e00\u4e2a\u6784\u9020\u7684\u53cd\u4f8b\u3002**\u6211\u4eec\u4e0d\u80fd\u5148\u4fdd\u8bc1\u603b\u6d41\u91cf\u6700\u5927\u518d\u4fdd\u8bc1\u603b\u8d39\u7528\u6700\u5c0f\uff0c\u800c\u662f\u8981\u5c3d\u53ef\u80fd\u5730\u8ba9\u603b\u8d39\u7528\u6700\u5c0f\u3002\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u8981\u628a\u67f1\u5b50\u7528\u5728\u5200\u5203\u4e0a\uff0c\u800c\u4e0d\u662f\u653e\u8d8a\u591a\u8d8a\u597d**\u3002\u4e8e\u662f\u60f3\u5230\u5982\u679c\u672c\u6b21\u589e\u5e7f\u6e90\u70b9\u5230\u6c47\u70b9\u7684\u8d39\u7528\u4e3a\u6b63\uff0c\u76f4\u63a5\u8df3\u51fa\u5373\u53ef\u3002\uff08\u6211\u7684\u6784\u9020\u65b9\u5f0f\u662f\u8fde\u8d1f\u8d39\u7528\u8fb9\uff0c\u5982\u679c\u8fde\u6b63\u6743\u8fb9\u8dd1\u6700\u957f\u8def\u90a3\u4e48\u8d39\u7528\u4e3a\u8d1f\u8df3\u51fa\u5373\u53ef\uff09\n\n**\u5f69\u86cb\uff1a**\n\n\u989d\uff0c\u6211\u4e0d\u592a\u4f1a\u6784\u9020\u8fd9\u6837\u7684\u6570\u636e\uff0c\u5c31\u628a\u8fd9\u4e00\u5c0f\u7247\u4e58\u4ee51000\u8d34\u5728\u540e\u9762\u6bcf\u4e2a\u6570\u636e\u7684\u5de6\u4e0a\u89d2\u4e86\u3002\u6240\u4ee5\u8fd9\u4e48\u5199\u4e5f\u53ef\u4ee5AC\uff1aprintf(\"%d\\n\",sum+mincost-998000);\n\n\u989d\u6211\u5728\u8bf4\u4ec0\u4e48...\n\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5$100$\u5206\uff0c\u590d\u6742\u5ea6$O($\u8d39\u7528\u6d41$)$\u3002\n\n``` cpp\n#include<bits/stdc++.h>\n#define maxn 105\n#define maxe 100010\n#define INF 1<<30\nusing namespace std;\n\nint head[maxe],nxt[maxe],point[maxe],flow[maxe],val[maxe],tot=1;\nint pre[maxe],preedge[maxe],tmpflow[maxe],dis[maxe],s=0,t=100000,E,ofs=25000;\nint v[maxn][maxn],sum,n,m,k;\nbool in[maxe];\nqueue<int> q;\nint get(int x,int y,int lvl){\n    return (x-1)*n+y+ofs*lvl;\n}\nbool chk(int num){\n    num%=ofs;\n    int x=(num-1)/n+1,y=(num-1)%n+1;\n    if(x<1||y<1||x>n||y>n||v[x][y]==-1)\n        return false;\n    return true; \n}\nvoid ADD(int x,int y,int f,int c){\n    val[++tot]=c;\n    flow[tot]=f;\n    point[tot]=y;\n    nxt[tot]=head[x];\n    head[x]=tot;\n}\nvoid add(int x,int y,int f,int c){\n    if((x!=s&&x!=t&&!chk(x))||(y!=s&&y!=t&&!chk(y)))\n        return;\n    ADD(x,y,f,c),ADD(y,x,0,-c);\n}\nbool bfs(){\n    memset(dis,0x3f,sizeof(dis));\n    dis[s]=0,in[s]=true,q.push(s),tmpflow[s]=m;\n    while(!q.empty()){\n        int x=q.front();\n        in[x]=false;\n        q.pop();\n        for(int j=head[x];j;j=nxt[j]){\n            if(!flow[j]||dis[point[j]]<=dis[x]+val[j])\n                continue;\n            dis[point[j]]=dis[x]+val[j];\n            pre[point[j]]=x;\n            preedge[point[j]]=j;\n            tmpflow[point[j]]=min(tmpflow[x],flow[j]);\n            if(!in[point[j]])\n                in[point[j]]=true,q.push(point[j]);\n        }\n    }\n    return dis[t]!=0x3f3f3f3f;\n}\nint main(){\n    int x,y,mincost=0;\n    scanf(\"%d%d%d\",&n,&m,&k);\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=n;j++)\n            scanf(\"%d\",&v[i][j]),sum+=v[i][j];\n    for(int i=1;i<=k;i++)\n        scanf(\"%d%d\",&x,&y),v[x][y]=-1;\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=n;j++){\n            if((i+j)%2)\n                add(get(i,j,1),get(i,j,2),1,-v[i][j]);\n            else{\n                if(j%2){\n                    add(s,get(i,j,0),1,0);\n                    add(get(i,j,0),get(i,j-1,1),1,0);\n                    add(get(i,j,0),get(i,j+1,1),1,0);\n                    add(get(i,j,0),get(i-1,j,1),1,0);\n                    add(get(i,j,0),get(i+1,j,1),1,0);\n                }\n                else{\n                    add(get(i,j,3),t,1,0);\n                    add(get(i,j-1,2),get(i,j,3),1,0);\n                    add(get(i,j+1,2),get(i,j,3),1,0);\n                    add(get(i-1,j,2),get(i,j,3),1,0);\n                    add(get(i+1,j,2),get(i,j,3),1,0);\n                }\n            }\n        }\n    while(bfs()&&m){\n        if(dis[t]>0)\n            break;\n        int k=t;\n        while(k!=s){\n            flow[preedge[k]]-=tmpflow[t];\n            flow[preedge[k]^1]+=tmpflow[t];\n            k=pre[k];\n        }\n        m-=tmpflow[t];\n        mincost+=dis[t]*tmpflow[t];\n    }\n    printf(\"%d\\n\",sum+mincost);\n    return 0; \n} \n```",
        "postTime": 1515735488,
        "uid": 31564,
        "name": "zhoutb2333",
        "ccfLevel": 10,
        "title": "\u6d1e\u7a74\u9047\u9669 \u9898\u89e3"
    },
    {
        "content": "\u539f\u6765 $m$ \u6709\u9650\u5236\u7684\u554a\uff08\n\n[Link](https://www.luogu.com.cn/problem/P4142)\n\n## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a $n\\times n$ \u7684\u77e9\u5f62\uff0c\u5176\u4e2d\u884c\u5217\u548c\u4e3a\u5947\u6570\u7684\u4f4d\u7f6e\u6709\u70b9\u6743 $V_{i,j}$\uff0c\u4f60\u53ef\u4ee5\u653e\u7f6e $m$ \u4e2a\u62d0\u89d2\u578b\u7684\u67f1\u5b50\uff0c\u67f1\u5b50\u5171\u5360\u4e09\u4e2a\u683c\u5b50\uff0c\u5e76\u4e14\u4f1a\u5c06\u62d0\u89d2\u6240\u5728\u7684\u683c\u5b50\u7684\u6570\u53d8\u6210 $0$\uff0c\u6709 $k$ \u4e2a\u683c\u5b50\u584c\u4e86\uff0c\u65e2\u4e0d\u80fd\u653e\u67f1\u5b50\u4e5f\u4e0d\u80fd\u88ab\u5176\u4ed6\u67f1\u5b50\u8986\u76d6\uff0c\u95ee\u6240\u6709\u683c\u5b50\u7684\u603b\u548c\u6700\u5c11\u662f\u591a\u5c11\u3002\n\n$1\\leq n \\leq 50,0\\leq m \\leq \\frac{n^2}{3},0\\leq k \\leq n^2,0\\leq V_{i,j}\\leq 10^6$\u3002\n\n## \u9898\u76ee\u5206\u6790\n\n\u770b\u5230\u6570\u636e\u8303\u56f4\uff0c\u731c\u4e2a\u7f51\u7edc\u6d41\uff08\n\n\u6211\u4eec\u4e0b\u8ff0\u79f0\u884c\u5217\u548c\u4e3a\u5947\u6570\u7684\u683c\u5b50\u4e3a\u4e00\u7c7b\u683c\u5b50\uff0c\u53cd\u4e4b\u79f0\u4e3a\u4e8c\u7c7b\u683c\u5b50\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a\u4e00\u7c7b\u683c\u5b50\u60f3\u8981\u6d88\u6389\u5176\u70b9\u6743\uff0c\u9700\u8981\u81f3\u5c11\u5339\u914d\u4e24\u4e2a\u4e8c\u7c7b\u683c\u5b50\uff0c\u8fd9\u5f88\u50cf\u4e00\u4e2a\u5339\u914d\u95ee\u9898\uff0c\u6240\u4ee5\u5927\u80c6\u5047\u8bbe\u5c06\u8fd9\u4e24\u7c7b\u683c\u5b50\u5206\u5f00\u76f8\u4e92\u8fde\u8fb9\u3002\n\n\u4f46\u662f\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u82e5\u4e2d\u95f4\u653e\u4e00\u7c7b\u683c\u5b50\uff0c\u4e24\u8fb9\u653e\u4e8c\u7c7b\u683c\u5b50\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e2a\u7ecf\u5178\u7684\u9519\u8bef\uff0c\u5c31\u662f\u67d0\u4e2a\u4e8c\u7c7b\u683c\u5b50\u5728\u8fde\u6e90\u70b9\u7684\u90a3\u8fb9\u7528\u8fc7\u4e86\uff0c\u5728\u6c47\u70b9\u90a3\u8fb9\u6ca1\u6709\u88ab\u7528\uff0c\u4ee5\u53ca\u6709\u53ef\u80fd\u4e24\u4e2a\u4e8c\u7c7b\u683c\u5b50\u65e0\u6cd5\u5339\u914d\u3002\n\n\u600e\u4e48\u89e3\u51b3\uff1f\u6211\u4eec\u8003\u8651\u8fd9\u4e2a\u62d0\u89d2\u6709\u4ec0\u4e48\u7279\u6b8a\u6027\u8d28\uff0c\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a\u4e00\u7c7b\u683c\u5b50\uff0c\u53ea\u8981\u6709\u4e24\u4e2a\u76f8\u90bb\u683c\u5b50\u7684\u5217\u6570\u5947\u5076\u6027\u4e0d\u540c\uff0c\u90a3\u4e48\u5c31\u5b58\u5728\u4e00\u4e2a\u5173\u4e8e\u5176\u7684\u5339\u914d\uff0c\u6240\u4ee5\u8fd9\u542f\u53d1\u6211\u4eec\u5c06\u4e8c\u7c7b\u683c\u5b50\u6309\u7167\u5217\u6570\u5947\u5076\u6027\u5206\u6210\u4e24\u90e8\u5206\uff0c\u5206\u522b\u5411\u4e00\u7c7b\u683c\u5b50\u8fde\u8fb9\u5373\u53ef\uff0c\u8fd9\u6837\u53ea\u8981\u4e00\u4e2a\u4e00\u7c7b\u683c\u5b50\u540c\u65f6\u5177\u6709\u4e24\u4e2a\u90e8\u5206\u7684\u4e8c\u7c7b\u683c\u5b50\u5c31\u4f1a\u5b58\u5728\u589e\u5e7f\u8def\uff0c\u4ece\u800c\u6254\u6389\u5176\u70b9\u6743\u3002\n\n\u540c\u65f6\u6ce8\u610f\u4e00\u7c7b\u683c\u5b50\u6bcf\u4e2a\u6700\u591a\u88ab\u5220\u4e00\u6b21\uff0c\u6240\u4ee5\u8981\u62c6\u70b9\u4e2d\u95f4\u8fde\u8d39\u7528\u4e3a\u70b9\u6743\u7684\u8fb9\u3002\n\n\u6700\u540e\u4e24\u4e2a\u95ee\u9898\uff0c\u6700\u591a\u5220 $m$ \u4e2a\u600e\u4e48\u529e\uff08\u4f5c\u8005\u505a\u7684\u65f6\u5019\u5fd8\u8bb0\u4e86\u8fd9\u4e00\u70b9\uff09\uff0c\u5efa\u4e2a\u865a\u62df\u6e90\u5411\u6e90\u70b9\u8fde\u6d41\u91cf\u4e3a $m$ \u7684\u5c31\u884c\u3002\n\n\u6211\u4eec\u8dd1\u7684\u662f\u6700\u5c0f\u8d39\u7528\u6700\u5927\u6d41\uff0c\u4f18\u5148\u4fdd\u8bc1\u6700\u5927\u6d41\u600e\u4e48\u529e\uff1f\u6ce8\u610f\u5230\u6bcf\u6b21\u589e\u5e7f\u5230\u6c47\u70b9\u7684\u8def\u5f84\u662f\u5355\u8c03\u7684\uff0c\u6240\u4ee5\u53ea\u8981\u5f53\u524d\u589e\u5e7f\u7684\u8def\u5f84\u4e0d\u4f1a\u66f4\u4f18\u5c31\u505c\u6b62\u589e\u5e7f\u5373\u53ef\u3002\n\n## Code\n\n\u4e00\u5b9a\u8981\u7b97\u660e\u767d\u7a7a\u95f4\u8981\u5f00\u591a\u5927\u554a\u3002\n\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <queue>\nusing namespace std;\nint read(){\n\tint x=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\treturn x*f;\n}\nconst int N = 2e4+5;\nbool mp[100][100];int val[100][100];\nint n,m,k,S,T,SS;\nint head[N],tote=1;\nstruct aa{\n\tint nxt,to,val,w;\n}edge[N*20];\nvoid link(int u,int v,int x,int y){\n\tedge[++tote].nxt = head[u];edge[tote].to = v;head[u] = tote;edge[tote].val = x;edge[tote].w = y;\n\tedge[++tote].nxt = head[v];edge[tote].to = u;head[v] = tote;edge[tote].val = 0;edge[tote].w =-y;\n}\nint rk(int x,int y,int z){\n\treturn (x-1)*n+y+z*n*n;\n}\nint dx[4]={1,0,-1,0};\nint dy[4]={0,1,0,-1};\nbool check(int x,int y){\n\tif(x<1||x>n||y<1||y>n||mp[x][y]){\n\t\treturn false;\n\t}else{\n\t\treturn true;\n\t}\n} \nint sum,cost,flow,inf = 1e9;\nqueue<int>q;\nint dis[N];\nbool vis[N];\nbool spfa(){\n\tmemset(dis,0x3f,sizeof(dis));\n\tdis[SS] = 0;\n\tq.push(SS);\n\twhile(!q.empty()){\n\t\tint u = q.front();\n\t\tq.pop();\n\t\tvis[u] = 0;\n\t\tfor(int i=head[u];i;i=edge[i].nxt){\n\t\t\tint now = edge[i].to;\n\t\t\tif(dis[now]>dis[u]+edge[i].w&&edge[i].val){\n\t\t\t\tdis[now] = dis[u]+edge[i].w;\n\t\t\t\tif(!vis[now]){\n\t\t\t\t\tvis[now] = 1;\n\t\t\t\t\tq.push(now);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn dis[T]<=0;\n}\nint dfs(int u,int f){\n\tif(u==T){\n\t\treturn f;\n\t}\n\tint used = 0;\n\tvis[u] = 1;\n\tfor(int i=head[u];i&&f;i=edge[i].nxt){\n\t\tint now = edge[i].to;\n\t\tif(dis[now]==dis[u]+edge[i].w&&!vis[now]&&edge[i].val){\n\t\t\tint w = dfs(now,min(f,edge[i].val));\n\t\t\tf-=w;used+=w;\n\t\t\tedge[i].val-=w;edge[i^1].val+=w;\n\t\t\tcost+=edge[i].w*w;\n\t\t}\n\t}\n\tvis[u] = 0;\n\tif(!used){\n\t\tdis[u] = inf;\n\t} \n\treturn used;\n}\nvoid mcmf(){\n\twhile(spfa()){\n\t\tflow+=dfs(SS,inf);\n\t}\n}\nint main(){\n\tn = read();m = read();k = read();\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tval[i][j] = read();\n\t\t\tsum+=val[i][j];\n\t\t}\n\t}\n\tint x,y;\n\tfor(int i=1;i<=k;i++){\n\t\tx = read();y = read();\n\t\tmp[x][y] = 1;\n\t}\n\tS = 0;T = 4*n*n+1;\n\tSS = T+1;\n\tlink(SS,S,m,0);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tif((i+j)&1){\n\t\t\t\tlink(rk(i,j,2),rk(i,j,3),1,-val[i][j]);\n\t\t\t\tfor(int s=0;s<4;s++){\n\t\t\t\t\tint x = i+dx[s],y = j+dy[s];\n\t\t\t\t\tif(check(x,y)){\n\t\t\t\t\t\tif(y&1){\n\t\t\t\t\t\t\tlink(rk(x,y,1),rk(i,j,2),1,0);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tlink(rk(i,j,3),rk(x,y,4),1,0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(j&1){\n\t\t\t\t\tlink(S,rk(i,j,1),1,0);\n\t\t\t\t}else{\n\t\t\t\t\tlink(rk(i,j,4),T,1,0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tmcmf();\n\tcout<<sum+cost<<\"\\n\";\n\treturn 0;\n}\n\n```\n",
        "postTime": 1681299080,
        "uid": 369399,
        "name": "yizhiming",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u3010P4142 \u6d1e\u7a74\u9047\u9669\u3011"
    },
    {
        "content": "~~\u6211\u592a\u83dc\u4e86,\u770b\u5b8c\u9898\u5b8c\u5168\u6ca1\u601d\u8def,\u8fd8\u662f\u6284\u7684\u9898\u89e3..~~\n\n---\n\n\u8bfb\u5b8c\u9898\u53d1\u73b0\u62d0\u89d2\u5904\u4e00\u5b9a\u653e\u5728$i+j$\u4e3a\u5947\u6570\u7684\u5730\u65b9\n\n\u6240\u4ee5\u53ef\u4ee5\u60f3\u529e\u6cd5\u8f6c\u5316\u4e3a$3\u4e2a\u683c\u5b50\u51d1\u6210L\u5f62\u72b6\u6743\u503c\u7684\u6700\u5927\u503c$(\u56e0\u4e3a\u8981\u51cf\u53bb\u6700\u591a\u561b)\n\n\u7136\u540e\u5c31\u6709\u4e00\u4e9b\u6027\u8d28\u4e86\n\n\u5f53\u786e\u5b9a\u67d0\u4e2a\u683c\u5b50$(i,j)$\u4f5c\u4e3a\u62d0\u89d2\u653e\u7f6e\n\n\u4e3a\u4e86\u6784\u6210$L$\u5f62\u72b6,\u8fd8\u9700\u8981\u8986\u76d6$2$\u4e2a\u683c\u5b50\n\n\u53ef\u4ee5\u662f\u4e0a\u5de6,\u4e0a\u53f3,\u4e0b\u5de6,\u4e0b\u53f3\n\n$\u53d1\u73b0\u8fd94\u4e2a\u683c\u5b50\u7684i+j\u90fd\u662f\u5076\u6570$\n\n$\u90a3\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u4e8c\u5206\u56fe\u5bf9i+j\u7684\u5947\u5076\u6027\u67d3\u8272$\n\n**\u4f46\u8fd9\u6837\u4e0d\u591f**\n\n$\u6784\u6210L\u5f62,\u76f8\u5f53\u4e8e\u6709\u4e00\u6761\u8def\u5f84\u4eceL\u7684\u4e00\u7aef\u51fa\u53d1\u7ecf\u8fc7\u62d0\u70b9\u5230\u8fbe\u53e6\u4e00\u4e2a\u683c\u5b50$\n\n$\u4ef7\u503c\u662f\u62d0\u70b9\u7684\u70b9\u6743$\n\n$\u73b0\u5728\u95ee\u9898\u6765\u4e86,L\u7684\u4e24\u6bb5i+j\u90fd\u662f\u5076\u6570,\u4f46\u4ed6\u4eec\u53c8\u9700\u8981\u6ee1\u8db3\u80fd\u5f7c\u6b64\u5339\u914d$\n\n$\u53ef\u4ee5\u53d1\u73b0,L\u4e24\u6bb5\u867d\u7136i+j\u90fd\u662f\u5076\u6570,\u4f46\u6240\u5904\u7684j\u4e00\u4e2a\u662f\u5947\u6570,\u4e00\u4e2a\u662f\u5076\u6570$\n\n\u6240\u4ee5\u81f3\u6b64\u5c31\u628a\u70b9\u5206\u6210\u4e86$3$\u7c7b\n\n$L$\u7684\u6784\u6210\u53ef\u4ee5\u770b\u4f5c\u4ece\u5947\u6570\u5217\u7684\u5076\u6570\u683c\u5b50\u51fa\u53d1\u7ecf\u8fc7\u62d0\u70b9\u5230\u8fbe\u5076\u6570\u5217\u7684\u5076\u6570\u683c\u5b50\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u6784\u6210\u4e00\u4e2a\u4e09\u5206\u56fe(\u4e5f\u53ef\u4ee5\u8bf4\u56db\u5206\u56fe,\u56e0\u4e3a\u62d0\u70b9\u8981\u88ab\u62c6\u70b9\u4e86)\n\n$i+j\u4e3a\u5947\u6570\u7684\u62d0\u70b9\u62c6\u4e3ai\u548ci',i\u5411i'\u8fde\u4e00\u6761\u6d41\u91cf1,\u8d39\u7528\u4e3a\u70b9\u6743\u7684\u8fb9$\n\n$\u7136\u540e\u5bf9\u4e8e\u5076\u6570\u683c\u5b50,\u53ea\u80fd\u5411\u90e8\u5206\u76f8\u90bb\u683c\u5b50\u8fde\u8fb9,\u6bd4\u5982$\n\n$\u6e90\u70b9s\u8fde\u5411\u5947\u6570\u5217\u7684\u5076\u6570\u683c\u5b50,\u5947\u6570\u5217\u7684\u5076\u6570\u683c\u5b50\u8fde\u5411\u62d0\u70b9\u7684i$\n\n$i'\u8fde\u5411\u5076\u6570\u5217\u7684\u5076\u6570\u683c\u5b50,\u5076\u6570\u5217\u7684\u5076\u6570\u683c\u5b50\u8fde\u5411\u6c47\u70b9t$\n\n(\u65e0\u7279\u522b\u8bf4\u660e,\u6d41\u91cf\u90fd\u662f1,\u8d39\u7528\u90fd\u662f0)\n\n```\n#include <bits/stdc++.h>\nusing namespace std;\nconst int maxn=50009;\nconst int inf=1e9;\n#define id(x,y) (x-1)*n+y\nint a[509][509];\nint n,m,s,t,k;\nint maxflow,mincost;\nint dis[maxn],head[maxn<<1],cnt=1,flow[maxn],pre[maxn],vis[maxn];\nstruct edge{\n\tint to,nxt,w,flow;//\u5206\u522b\u4ee3\u8868 \n}d[maxn<<1];\nvoid add(int u,int v,int flow,int w)//\u6700\u5927\u6d41\u91cf,\u5355\u4f4d\u8d39\u7528\n{\n\td[++cnt]=(edge){v,head[u],w,flow},head[u]=cnt;\n\td[++cnt]=(edge){u,head[v],-w,0},head[v]=cnt;\n} \nbool spfa()\n{\n\tqueue<int>q;\n\tfor(int i=0;i<=t;i++)\tdis[i]=inf;\n\tmemset(vis,0,sizeof(vis));\n\tq.push(s);\n\tdis[s]=0,vis[s]=1;\n\tflow[s] = inf;//\u521d\u59cb\u6d41\u91cf\u65e0\u9650\u5927\n\twhile( !q.empty() )\n\t{\n\t\tint u=q.front(); q.pop();\n\t\tvis[u]=0;//\u51fa\u961f\n\t\tfor(int i=head[u];i;i=d[i].nxt)\n\t\t{\n\t\t\tif( !d[i].flow )\tcontinue;//\u65e0\u6d41\u91cf\u4e86\t\n\t\t\tint v=d[i].to;\n\t\t\tif( dis[v]>dis[u]+d[i].w )\n\t\t\t{\n\t\t\t\tdis[v]=dis[u]+d[i].w;\n\t\t\t\tflow[v] = min(flow[u],d[i].flow);//\u66f4\u65b0\u5f53\u524d\u6d41\u91cf\n\t\t\t\tpre[v]=i;//\u8bb0\u5f55\u4ece\u54ea\u6761\u8fb9\u8fc7\u6765\u7684\n\t\t\t\tif( !vis[v] )\tvis[v]=1,q.push(v); \n\t\t\t}\n\t\t}\t\n\t} \n\tif( dis[t]==inf )\treturn 0;\n\treturn 1;\n}\nint x[5]={0,0,1,-1},y[5]={1,-1,0,0};\nint main()\n{\n\tcin >> n >> m >> k;\n\tint sumn=0;\n\ts=0,t=n*n*2+1;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=n;j++)\n\t\tcin >> a[i][j],sumn+=a[i][j];\n\tfor(int i=1;i<=k;i++)\n\t{\n\t\tint l,r; cin >> l >> r;\n\t\ta[l][r]=-1;\n\t}\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=n;j++)\n\t{\n\t\tif( a[i][j]==-1 )\tcontinue;\n\t\tif( (i+j)%2 )//\u5947\u6570\u683c\u5b50\n\t\t\tadd( id(i,j),id(i,j)+n*n,1,-a[i][j] );\n\t\telse//\u5076\u6570\u683c\u5b50 \n\t\t{\n\t\t\tif( j%2==1 )//\u5947\u6570\u5217\n\t\t\t{\n\t\t\t\tadd(s,id(i,j),1,0);\n\t\t\t\tfor(int q=0;q<4;q++)\n\t\t\t\t{\n\t\t\t\t\tint nx=i+x[q],ny=j+y[q];\n\t\t\t\t\tif( nx<1||nx>n||ny<1||ny>n )\tcontinue;\n\t\t\t\t\tif( a[nx][ny]==-1 )\tcontinue;\n\t\t\t\t\tadd(id(i,j),id(nx,ny),1,0);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tadd(id(i,j),t,1,0);\t\n\t\t\t\tfor(int q=0;q<4;q++)\n\t\t\t\t{\n\t\t\t\t\tint nx=i+x[q],ny=j+y[q];\n\t\t\t\t\tif( nx<1||nx>n||ny<1||ny>n )\tcontinue;\n\t\t\t\t\tif( a[nx][ny]==-1 )\tcontinue;\n\t\t\t\t\tadd(id(nx,ny)+n*n,id(i,j),1,0);\n\t\t\t\t}\n\t\t\t} \n\t\t} \n\t}\n\twhile( spfa()&&m )\n\t{\n\t\tif( dis[t]>0 )\tbreak;\n\t\tint i,x=t;\n\t\twhile( x!=s )\n\t\t{\n\t\t\ti=pre[x];\n\t\t\td[i].flow-=flow[t],d[i^1].flow+=flow[t];\n\t\t\tx=d[i^1].to;\n\t\t}\n\t\tm-=flow[t];\n\t\tmincost+=dis[t]*flow[t];\n\t}\n\tcout << sumn+mincost;\n}\n```",
        "postTime": 1599747810,
        "uid": 299810,
        "name": "issue_is_fw",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4142 \u3010\u6d1e\u7a74\u9047\u9669\u3011"
    }
]
[
    {
        "content": "\u9006\u5e8f\u5bf9\u6570\u4e3a\u5947\u6570\u7684\u65b9\u6848\u53ea\u6709 $\\lbrace 1, 3, 2 \\rbrace, \\lbrace 2, 1, 3 \\rbrace, \\lbrace 3, 2, 1 \\rbrace$ \u4e09\u79cd\u3002\n\n\u8bbe $f_{i, j, k, l, o, p, q}$ \u8868\u793a\u524d $i$ \u4e2a\u4f4d\u7f6e\uff0c\u76ee\u524d\u51d1\u51fa\u7684 $\\lbrace 1 \\rbrace, \\lbrace 2 \\rbrace, \\lbrace 3 \\rbrace, \\lbrace 1, 3 \\rbrace, \\lbrace 2, 1 \\rbrace, \\lbrace 3, 2 \\rbrace$ \u7684\u6570\u76ee\u5206\u522b\u4e3a $j, k, l, o, p, q$ \u7684\u65b9\u6848\u6570\u5373\u53ef\u3002\u7b2c\u4e00\u7ef4\u53ef\u4ee5\u6eda\u52a8\u6570\u7ec4\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^7)$\uff0c\u5e38\u6570\u6781\u5c0f\uff0c\u53ef\u8fc7\u3002\u7531\u4e8e $j + k + l + o + p + q \\le n$\uff0c\u6240\u4ee5\u4e8b\u5b9e\u4e0a $(j, k, l, o, p, q)$ \u7684\u53d6\u503c\u53ea\u6709 $\\binom {25}{6} \\approx 1.77 \\times 10^5$ \u79cd\u3002",
        "postTime": 1653567822,
        "uid": 236807,
        "name": "Mitama",
        "ccfLevel": 9,
        "title": "[Solution] LNOI2022 problem"
    },
    {
        "content": "lnoi t2 \u8fd9\u4e48\u7b80\u5355\u7684\u4e48\u3002\u3002\n\n\u624b\u73a9\u4e00\u4e0b\u53d1\u73b0\u6ee1\u8db3\u6761\u4ef6\u7684\u6392\u5217\u5c31 $<3,2,1>,<2,1,3>,<1,3,2>$\u3002\u4f60\u8003\u8651\u5728\u6574\u4e2a\u5e8f\u5217\u4e0a\u6570\u5f88\u9ebb\u70e6\uff0c\u4e8e\u662f\u53bb\u60f3\u4e00\u8fb9\u9012\u63a8\u4e00\u8fb9\u5339\u914d\u3002\n\n\u5b9a\u4e49 $dp_{cur,i,j,t,a,b,c}$\uff0ccur \u662f\u5f53\u524d\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u6eda\u52a8\u6389\uff0c\u5269\u4e0b\u7684\u8868\u793a\u5339\u914d\u4e86 $i$ \u4e2a $<1>$\uff0c$j$ \u4e2a $<2>$\uff0c$t$ \u4e2a $<3>$\uff0c$a$ \u4e2a $<3,2>$\uff0c$b$ \u4e2a $<2,1>$\uff0c$c$ \u4e2a $<1,3>$\uff0c\u8f6c\u79fb\u7684\u65f6\u5019\u628a\u548c\u6bcf\u4e00\u79cd\u5339\u914d\u7684\u60c5\u51b5\u90fd\u53bb\u8f6c\u79fb\u4e00\u904d\uff0c\u5339\u914d\u5b8c\u7684\u4e1c\u897f\u4e0d\u9700\u8981\u8bb0\u5f55\u3002\n\n\u5339\u914d\u8fc7\u7a0b\u4e2d\u662f\u6ca1\u6709\u6807\u53f7\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5728\u7ed3\u675f\u540e\u7ed9\u7b54\u6848\u4e58\u4ee5\u4e00\u4e2a $n!$\u3002\n\n\u72b6\u6001 $O(n^7)$\uff0c\u8f6c\u79fb $O(1)$\uff0c\u603b\u590d\u6742\u5ea6 $O(n^7)$\uff0c\u4f46\u662f $i+j+t+a+b+c\\le n$\uff0c\u6240\u4ee5\u53ef\u4ee5\u8dd1\u8fc7\u53bb\uff08\u6b21\u6570\u53ef\u4ee5\u7528\u63d2\u677f\u6cd5\u7b97\u4e00\u4e0b\uff09\u3002\u3002\n\n[\u4ee3\u7801](https://www.luogu.com.cn/paste/v43mwkof)\u3001",
        "postTime": 1654012290,
        "uid": 154101,
        "name": "fily",
        "ccfLevel": 0,
        "title": "qwqqwwwq"
    },
    {
        "content": "# T2 problem\n\n## Description\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $3 n$\u3001\u503c\u57df\u4e3a $[0, 3]$ \u7684\u6574\u6570\u5e8f\u5217 $S = s_1 s_2 \\cdots s_{3 n}$\u3002\u4f60\u9700\u8981\u9996\u5148\u5c06 $S$ \u4e2d\u7684\u6bcf\u4e2a $0$ \u66ff\u6362\u4e3a $[1, 3]$ \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u6574\u6570\uff0c\u5f97\u5230\u5e8f\u5217 $T = t_1 t_2 \\cdots t_{3 n}$\uff0c\u7136\u540e\u7ed9\u51fa $n$ \u4e2a\u957f\u5ea6\u4e3a $3$ \u7684\u6574\u6570\u5e8f\u5217 ${\\{ a_{i, 1}, a_{i, 2}, a_{i, 3} \\}}_{1 \\le i \\le n}$\uff0c\u4f7f\u5f97\n\n- $\\forall 1 \\le i \\le n$\uff0c$1 \\le a_{i, 1} < a_{i, 2} < a_{i, 3} \\le 3 n$\uff1b\n- $\\forall (i_1, j_1) \\ne (i_2, j_2)$\uff0c$a_{i_1, j_1} \\ne a_{i_2, j_2}$\uff1b\n- $\\forall 1 \\le i \\le n$\uff0c$\\{ t_{a_{i, 1}}, t_{a_{i, 2}}, t_{a_{i, 3}} \\}$ \u662f $\\{ 1, 2, 3 \\}$ \u7684\u4e00\u4e2a\u6392\u5217\u4e14\u9006\u5e8f\u5bf9\u6570\u4e3a\u5947\u6570\u3002\n\n\u8ba4\u4e3a\u4e24\u4e2a\u65b9\u6848\u672c\u8d28\u4e0d\u540c\u5f53\u4e14\u4ec5\u5f53\u5e8f\u5217 $T$ \u4e0d\u540c\u6216\u5b58\u5728 $a_{i, j}$\uff08$1 \\le i \\le n$\uff0c$1 \\le j \\le 3$\uff09\u4e0d\u540c\uff0c\u6c42\u4ee5\u4e0a\u64cd\u4f5c\u7684\u672c\u8d28\u4e0d\u540c\u7684\u65b9\u6848\u6570\uff0c\u5bf9 $({10}^9 + 7)$ \u53d6\u6a21\u3002\n\n$n\\leq19$\u3002\n\n## Solution\n\n\u9006\u5e8f\u5bf9\u6570\u662f\u5947\u6570\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ea\u6709 $(1,3,2),(2,1,3),(3,2,1)$ \u4e09\u79cd\u60c5\u51b5\u3002\n\n\u9898\u76ee\u7684\u8981\u6c42\u76f8\u5f53\u4e8e\u6211\u4eec\u628a $3n$ \u4e2a\u6570\u5206\u5230 $n$ \u4e2a\u4e09\u5143\u7ec4\u91cc\uff0c\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a dp\uff1a\n\n$g(i,a,b,c,d,e,f)$ \u8868\u793a\u5f53\u524d $T$ \u586b\u4e86\u524d $i$ \u4f4d\uff0c\u5f53\u524d\u4e3a $(1),(2),(3)$ \u7684\u4e09\u5143\u7ec4\u5206\u522b\u6709 $a,b,c$ \u4e2a\uff1b\u5f53\u524d\u4e3a $(1,3),(2,1),(3,2)$ \u7684\u4e09\u5143\u7ec4\u5206\u522b\u6709 $d,e,f$ \u4e2a\u7684\u65b9\u6848\u6570\u3002\n\n\u8fd9\u91cc\u6211\u4eec\u4e0d\u8003\u8651 $n$ \u4e2a\u4e09\u5143\u7ec4\u7684\u987a\u5e8f\uff0c\u65b9\u6848\u6570\u4e3a $g(3n,0,0,0,0,0,0)$\uff0c\u518d\u4e58\u4e0a $n!$ \u5373\u53ef\u3002\n\n\u8f6c\u79fb\u7684\u65f6\u5019\u5c31\u679a\u4e3e\u8fd9\u8fd9\u4e00\u4f4d\u586b\u4ec0\u4e48\uff0c\u5206\u5230\u54ea\u4e2a\u4e09\u5143\u7ec4\u91cc\uff0c\u4e58\u4e00\u4e2a\u7cfb\u6570\u8f6c\u79fb\u5c31\u597d\u4e86\u3002\n\n\u590d\u6742\u5ea6\u770b\u4f3c\u662f $O(n^7)$\uff0c\u4f46\u662f\u6211\u4eec\u53ea\u8003\u8651\u80fd\u8f6c\u79fb\u5230\u6700\u7ec8\u72b6\u6001\u7684\u72b6\u6001\u8fdb\u884c\u8f6c\u79fb\uff0c\u6bd4\u5982\u8bf4 $g(i,n,2,0,0,0,0)$ \u8fd9\u79cd\u72b6\u6001\u663e\u7136\u5c31\u6ca1\u6709\u610f\u4e49\u3002\u591a\u8003\u8651\u4e00\u4e9b\u7c7b\u4f3c\u7684\u72b6\u6001\uff0c\u72b6\u6001\u6570\u4f1a\u51cf\u5c11\u5f88\u591a\uff0c\u53ef\u4ee5\u5f88\u5feb\u5730\u901a\u8fc7\u672c\u9898\u3002\n\n\u5982\u679c\u4f60\u91c7\u7528\u53ea\u5b58\u5408\u6cd5\u72b6\u6001\u8fdb\u884c\u8f6c\u79fb\u7684\u65b9\u5f0f\uff0c\u6211\u4f30\u8ba1\u4f1a\u975e\u5e38\u5feb\uff08\n\n## Code\n\n\u6ce8\u610f\u7a7a\u95f4\u9700\u8981\u6eda\u52a8\u6570\u7ec4\u3002\n\n>\u8fd9\u91cc\u653e\u4e00\u4efd\u5f53\u524d\u6700\u4f18\u89e3\u7684\u4ee3\u7801\uff0c\u662f\u4e00\u4f4d\u62d2\u7edd\u900f\u9732\u59d3\u540d\u7684\u795e\u4ed9\u5728\u6211\u4ee3\u7801\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u4e00\u6ce2\u5e38\u6570\u4f18\u5316\u5f97\u5230\u7684\uff08\n\n\u56e0\u4e3a\u6709\u4eba\u6284\u9898\u89e3\uff0c\u5c31\u4e0d\u653e\u6700\u4f18\u89e3\u4ee3\u7801\u4e86\uff0c\u653e\u4e00\u4e2a\u81ea\u5df1\u7684\u4ee3\u7801\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <cctype>\n#include <vector>\n#include <array>\nusing namespace std;\n\nconst int mod = 1e9 + 7;\ntypedef long long ll;\n\nint read()\n{\n    int x = 0;\n    int f = 1;\n    char ch = getchar();\n    for (; !isdigit(ch); ch = getchar())\n        if (ch == '-')\n            f = -1;\n    for (; isdigit(ch); ch = getchar())\n        x = x * 10 + ch - '0';\n    return x * f;\n}\n\nbool MEM1;\n\nint T;\n\nnamespace solve\n{\n    const int maxn = 100;\n    const int maxm = 20;\n\n    int g[2][maxm][maxm][maxm][maxm][maxm][maxm];\n\n    char str[maxn];\n    int n;\n\n#define upd(x, y)                \\\n    {                            \\\n        x = (x + y) % mod; \\\n    }\n    inline int fac(int n)\n    {\n        int res = 1;\n        for (int i = 1; i <= n; i++)\n            res = 1ll * res * i % mod;\n        return res;\n    }\n    void main()\n    {\n        scanf(\"%d%s\", &n, str + 1);\n        g[0][0][0][0][0][0][0] = 1;\n        int cur = 1;\n        for (int i = 1; i <= n * 3; i++)\n        {\n            int res = n * 3 - i + 1;\n            for (int a = 0; a <= min(i - 1, n) && 2 * a <= res && a <= i; a++)\n                for (int b = 0; b <= min(i - 1, n) && 2 * a + 2 * b <= res && a + b <= i && a + b <= n; b++)\n                    for (int c = 0; c <= min(i - 1, n) && 2 * a + 2 * b + 2 * c <= res && a + b + c <= i && a + b + c <= n; c++)\n                        for (int d = 0; d <= min(i - 1, n) && 2 * a + 2 * b + 2 * c + d <= res && a + b + c + 2 * d <= i && a + b + c + d <= n; d++)\n                            for (int e = 0; e <= min(i - 1, n) && 2 * a + 2 * b + 2 * c + d + e <= res && a + b + c + 2 * d + 2 * e <= i && a + b + c + d + e <= n; e++)\n                                for (int f = 0; f <= min(i - 1, n) && 2 * a + 2 * b + 2 * c + d + e + f <= res && a + b + c + 2 * d + 2 * e + 2 * f <= i && a + b + c + d + e + f <= n; f++)\n                                    g[cur][a][b][c][d][e][f] = 0;\n            for (int a = 0; a <= min(i - 1, n) && 2 * a <= res && a <= i; a++)\n                for (int b = 0; b <= min(i - 1, n) && 2 * a + 2 * b <= res && a + b <= i && a + b <= n; b++)\n                    for (int c = 0; c <= min(i - 1, n) && 2 * a + 2 * b + 2 * c <= res && a + b + c <= i && a + b + c <= n; c++)\n                        for (int d = 0; d <= min(i - 1, n) && 2 * a + 2 * b + 2 * c + d <= res && a + b + c + 2 * d <= i && a + b + c + d <= n; d++)\n                            for (int e = 0; e <= min(i - 1, n) && 2 * a + 2 * b + 2 * c + d + e <= res && a + b + c + 2 * d + 2 * e <= i && a + b + c + d + e <= n; e++)\n                                for (int f = 0; f <= min(i - 1, n) && 2 * a + 2 * b + 2 * c + d + e + f <= res && a + b + c + 2 * d + 2 * e + 2 * f <= i && a + b + c + d + e + f <= n; f++)\n                                    if (g[cur ^ 1][a][b][c][d][e][f])\n                                    {\n                                        int now = str[i] - '0';\n                                        ll lst = g[cur ^ 1][a][b][c][d][e][f] % mod;\n                                        if (now == 1 || now == 0)\n                                        {\n                                            if (a < n)\n                                                upd(g[cur][a + 1][b][c][d][e][f], lst);\n                                            if (c > 0 && f < n)\n                                                upd(g[cur][a][b][c - 1][d][e][f + 1], lst * c);\n                                            if (e > 0)\n                                                upd(g[cur][a][b][c][d][e - 1][f], lst * e);\n                                        }\n                                        if (now == 2 || now == 0)\n                                        {\n                                            if (c < n)\n                                                upd(g[cur][a][b][c + 1][d][e][f], lst);\n                                            if (b > 0 && e < n)\n                                                upd(g[cur][a][b - 1][c][d][e + 1][f], lst * b);\n                                            if (d > 0)\n                                                upd(g[cur][a][b][c][d - 1][e][f], lst * d);\n                                        }\n                                        if (now == 3 || now == 0)\n                                        {\n                                            if (b < n)\n                                                upd(g[cur][a][b + 1][c][d][e][f], lst);\n                                            if (a > 0 && d < n)\n                                                upd(g[cur][a - 1][b][c][d + 1][e][f], lst * a);\n                                            if (f > 0)\n                                                upd(g[cur][a][b][c][d][e][f - 1], lst * f);\n                                        }\n                                    }\n            cur ^= 1;\n        }\n        cout << g[cur ^ 1][0][0][0][0][0][0] * 1ll * fac(n) % mod << endl;\n        if (T == 0)\n            return;\n        int res = n * 3;\n        for (int a = 0; 2 * a <= res && a <= n; a++)\n            for (int b = 0; 2 * a + 2 * b <= res && a + b <= n; b++)\n                for (int c = 0; 2 * a + 2 * b + 2 * c <= res && a + b + c <= n; c++)\n                    for (int d = 0; 2 * a + 2 * b + 2 * c + d <= res && a + b + c + d <= n; d++)\n                        for (int e = 0; 2 * a + 2 * b + 2 * c + d + e <= res && a + b + c + d + e <= n; e++)\n                            for (int f = 0; 2 * a + 2 * b + 2 * c + d + e + f <= res && a + b + c + d + e + f <= n; f++)\n                                g[0][a][b][c][d][e][f] = g[1][a][b][c][d][e][f] = 0;\n    }\n}\n\nbool MEM2;\n\nint main()\n{\n    T = read();\n    cerr << 1.0 * abs(&MEM1 - &MEM2) / 1024 / 1024 << endl;\n    while (T--)\n        solve::main();\n}\n```",
        "postTime": 1653534617,
        "uid": 373429,
        "name": "_slb",
        "ccfLevel": 0,
        "title": "solution-p8366 [LNOI2022] \u9898"
    }
]
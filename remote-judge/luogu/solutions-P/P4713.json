[
    {
        "content": "Emmmm\u548c\u51fa\u9898\u4eba\u4ea4\u6d41\u4e86\u4e00\u4e0b\uff0c\u53d1\u73b0\u81ea\u5df1\u7684\u7b97\u6cd5\u6ca1\u95ee\u9898\n\n\u4e5f\u6210\u529f\u62ff\u5230\u6700\u5feb\u768444ms\n\n\u6211\u6765\u8bf4\u4e00\u4e0b\u6211\u7684\u505a\u6cd5\u5427\uff0c\u8fd9\u4e2a\u505a\u6cd5\u7684\u590d\u6742\u5ea6\u975e\u5e38\u7684\u4f18\u8d8a\n\n\u9996\u5148\u6211\u4eec\u80af\u5b9a\u662f\u8981 2^k\u53bb\u679a\u4e3e\u6bcf\u4e2a\u90e8\u5206\u7684\u72b6\u6001\u7684\n\n\u590d\u6742\u5ea6\u4f18\u5316\u7684\u5173\u952e\u5728\u4e8eDp\n\n\u6211\u4eec\u53d1\u73b0\u5982\u679c\u56fa\u5b9a\u6263\u7684\u5206\u6570\uff0c\u90a3\u4e48\u884c\u6570\u81ea\u7136\u662f\u5c3d\u91cf\u5927\u3002\u5728\u884c\u6570\u4e00\u6837\u5927\u7684\u60c5\u51b5\u4e0b\u81ea\u7136\u662f\u6700\u540e\u4e00\u884c\u5b57\u8d8a\u591a\u8d8a\u597d\u3002\n\n\u6211\u4eec\u53d1\u73b0\u53ef\u4ee5\u5728dp\u7684\u57fa\u7840\u4e0a\u8d2a\u5fc3\u3002\n\n\u6211\u4eec\u8bbef[i][j]\u4e3a dp\u5230\u7b2ci\u4e2a\u53e5\u5b50\uff0c\u73b0\u5728\u6263\u4e86j\u5206\n\nf[i][j]\u662f\u4e00\u4e2apair\uff0c\u4fdd\u5b58\u7740\u4e24\u4e2a\u503c \u884c\u6570 \u6700\u540e\u4e00\u884c\u7684\u5b57\u6570\n\n\u8fd9\u6837Dp\u7684\u590d\u6742\u5ea6\u662f n\u00b7cnt\u00b7S  cnt\u662f\u4e0d\u4f1a\u6263\u52300\u7684\u90e8\u5206\u7684\u6570\u91cf\n\n2^k\u79cd\u72b6\u6001\u7684cnt\u52a0\u548c\u662f k*2^(k-1)\n\n\u6240\u4ee5\u6700\u540e\u7684\u590d\u6742\u5ea6\u662f 2^(k-1)kSn == 80 \u00b7 200 \u00b7 200\n\n\u975e\u5e38\u4f18\u8d8a\u7684\u590d\u6742\u5ea6\uff0c\u751a\u81f3\u53ef\u4ee5\u628aS\uff0cn\u63d0\u9ad8\u5230300\u90fd\u53ef\u4ee5\u505a\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\npair<int,int> f[201][1005];\nint n,m,L,K,S,C;\nint A[205];\nint s[205][11];\nbool vis[201][1005],ok[11];\nvoid up(int i,int j,int a,int b){\n    if(!vis[i][j]){\n        vis[i][j]=1;\n        f[i][j]=make_pair(a,b);\n    }\n    else{\n        if(f[i][j].first>a)return;\n        if(f[i][j].first<a)\n            f[i][j]=make_pair(a,b);\n        else\n            f[i][j].second=max(f[i][j].second,b);\n    }\n}\nint main(){\n    scanf(\"%d%d%d%d%d%d\",&n,&m,&L,&K,&S,&C);\n    for(int i=1;i<=n;i++) scanf(\"%d\",&A[i]);\n    for(int i=1;i<n;i++)\n        for(int j=0;j<K;j++) \n            scanf(\"%d\",&s[i][j]);\n    int ans=0;\n    for(int t=1;t<(1<<K);t++){\n        memset(vis,0,sizeof(vis));\n        for(int i=0;i<K;i++) ok[i]=(t>>i)&1;\n        int cnt=0,a,b,c,d,e;\n        for(int i=0;i<K;i++) cnt+=ok[i];\n        a=(A[1]+2)/L;b=(A[1]+2)%L;\n        if(!b) b=L;\n        else a++;\n        f[1][0]=make_pair(a,b);vis[1][0]=1;\n        for(int i=1;i<n;i++)\n            for(int j=0;j<=cnt*S;j++)\n                if(vis[i][j]){\n                    a=f[i][j].first,b=f[i][j].second;\n                    e=0;\n                    c=a-1+(b+A[i+1])/L,d=(b+A[i+1])%L;\n                    if(!d) d=L; else c++;\n                    for(int k=0;k<K;k++) if(ok[k]&&s[i][k]<0) e-=s[i][k];\n                    if(j+e<=cnt*S) up(i+1,j+e,c,d);\n                    e=0;\n                    c=a+(A[i+1]+2)/L,d=(A[i+1]+2)%L;\n                    if(!d) d=L; else c++;\n                    for(int k=0;k<K;k++) if(ok[k]&&s[i][k]>0) e+=s[i][k];\n                    if(j+e<=cnt*S) up(i+1,j+e,c,d);\n                }\n        int total=cnt*S,zm;\n        for(int j=0;j<=cnt*S;j++) if(vis[n][j]){\n            zm=total-j;\n            if(f[n][j].first<m) zm-=(m-f[n][j].first)*C;\n            ans=max(ans,zm);\n        } \n    }\n    cout<<ans<<endl;\n}\n```\n",
        "postTime": 1529632722,
        "uid": 24559,
        "name": "Treeloveswater",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4713 \u3010\u300c\u8bed\u6587\u300d\u51d1\u5b57\u6570\u3011"
    },
    {
        "content": "\u6211\u8981\u5199\u4e00\u7bc7\u9898\u89e3\u6765\u796d\u5960\u6708\u8d5b\u65f6\u5019\u667a\u969c\u7684\u81ea\u5df1...\n\n\u9996\u5148\u9898\u610f\u8981\u8bfb\u597d\uff0c\u611f\u89c9\u8fd8\u6709\u70b9\u8499\u5c31\u591a\u8bfb\u51e0\u904d\n\n\u7136\u540e\u6211\u4eec\u9996\u5148\u8003\u8651 $K=1$ \u7684\u90e8\u5206\u5206\n\n\u7528 $dp[a][b]$\u8868\u793a\u5199\u4e86 $a$ \u884c\uff0c\u6700\u540e\u4e00\u884c\u5199\u4e86 $b$ \u4e2a\u5b57\u65f6\u53ea\u8003\u8651\u4e0a\u4e0b\u53e5\u6263\u5206\u7684\u6700\u5c0f\u6263\u5206\u7684\u5206\u503c\uff0c\u8f6c\u79fb\u7684\u65f6\u5019\u679a\u4e3e\u6bcf\u53e5\u662f\u5426\u6362\u884c\u5373\u53ef\n\n\u8d85\u8fc7 $m$ \u884c\u89c6\u4f5c $m$ \u884c\uff0c\u6263\u5230\u8d1f\u5206\u89c6\u4f5c $0$ \u5206\n\n\u52a0\u4e0a\u884c\u6570\u4e0d\u591f\u53ef\u80fd\u5e26\u6765\u7684\u6263\u5206\uff0c\u53d6\u6700\u5927\u503c\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230 $21$ \u5206\n\n\u8003\u8651\u5bf9\u4e00\u822c\u7684 $K$ \uff0c\u7531\u4e8e\u6bcf\u4e2a\u90e8\u5206\u6700\u591a\u6263\u81f3 $0$ \u5206\uff0c\u4e0a\u9762\u7684 $dp$ \u4e0d\u80fd\u76f4\u63a5\u641e\u3002\n\n\u4f46\u662f\u6709\u4ec0\u4e48\u5173\u7cfb\u5462...\n\n\u6211\u4eec\u53ea\u9700\u8981 $2^K$ \u679a\u4e3e\u54ea\u4e9b\u90e8\u5206\u88ab\u6263\u5230 $0$ \u5206\uff0c\u8f6c\u5316\u4e3a\u4e00\u4e2a\u90e8\u5206\u65f6\u7684\u89e3\u6cd5\u5373\u53ef\uff0c\u5bb9\u6613\u8bc1\u660e\u8fd9\u6837\u7b54\u6848\u4e0d\u4f1a\u53d8\u5927\u6216\u8005\u53d8\u5c0f\n\n\u603b\u590d\u6742\u5ea6 $2^Knml$,\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define maxn 209\n#define inf 23333333\nint dp[maxn][maxn];\nint tmp[maxn][maxn];\nint w[maxn][7];\nint w1[maxn],w2[maxn];\nint n,m,L,K,S,C,ans=0,cnt=0;\nint l[maxn];\nvoid gao() {\n    int a,b,c,i,j;\n    for(a=0;a<=m;a++)\n    for(b=0;b<L;b++)\n        dp[a][b]=inf;\n    dp[0][L-1]=0;\n    for(c=1;c<=n;c++) {\n        memcpy(tmp,dp,sizeof dp);\n        for(a=0;a<=m;a++)\n    \tfor(b=0;b<L;b++)\n        dp[a][b]=inf;\n        for(a=0;a<=m;a++)\n        for(b=0;b<L;b++) {\n            i=(l[c]+b)/L;\n            j=(l[c]+b)%L;\n            dp[min(m,a+i)][j]=min(dp[min(m,a+i)][j],tmp[a][b]+w2[c]);\n            i=(l[c]+1)/L;\n            j=(l[c]+1)%L;\n            dp[min(m,a+1+i)][j]=min(dp[min(m,a+1+i)][j],tmp[a][b]+w1[c]);\n        }\n    }\n    for(a=0;a<=m;a++)\n        for(b=0;b<L;b++) {\n            ans=max(ans,cnt-dp[a][b]-(m-a)*C);\n        }\n}\nvoid dfs(int a){\n    if(a>K) gao();\n    else {\n        dfs(a+1);\n        for(int b=2;b<=n;b++) {\n            if(w[b][a]>0) w1[b]+=w[b][a];\n            else w2[b]-=w[b][a];\n        }\n        cnt+=S;\n        dfs(a+1);\n        cnt-=S;\n        for(int b=2;b<=n;b++) {\n            if(w[b][a]>0) w1[b]-=w[b][a];\n            else w2[b]+=w[b][a];\n        }\n    }\n}\nint main(){\n    scanf(\"%d%d%d%d%d%d\",&n,&m,&L,&K,&S,&C);\n    int a,b,c,i,j;\n    for(a=1;a<=n;a++) scanf(\"%d\",&l[a]);\n    w2[1]=inf;\n    for(a=2;a<=n;a++) \n        for(b=1;b<=K;b++) scanf(\"%d\",&w[a][b]);\n    dfs(1);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1529567739,
        "uid": 24608,
        "name": "winxp_qwq",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4713 \u3010\u300c\u8bed\u6587\u300d\u51d1\u5b57\u6570\u3011"
    }
]
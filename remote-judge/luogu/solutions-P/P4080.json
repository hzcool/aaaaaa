[
    {
        "content": "\u77e5\u8bc6\u70b9\u53e6\u4e00\u7bc7\u9898\u89e3\u8bf4\u7684\u5f88\u8be6\u7ec6\u4e86\uff0c\u6211\u6765\u8bf4\u4e00\u4e0b\u6b64\u9898\u5177\u4f53\u5b9e\u73b0\u3002\n\n\u91cd\u5fc3\u7684\u6c42\u6cd5\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u591a\u8fb9\u5f62\uff0c\u533a\u57df T \u662f\u591a\u8fb9\u5f62\u4ee5\u91cd\u5fc3\u4e3a\u70b9\u5149\u6e90\uff0c\u5728\u5355\u4f4d\u7403\u4e0a\u7684\u6295\u5f71\uff0c\u8be5\u6295\u5f71\u662f\u4e00\u4e2a\u66f2\u9762\u591a\u8fb9\u5f62\u3002\n\n\u8003\u8651\u8be5\u66f2\u9762\u591a\u8fb9\u5f62\u7684\u6c42\u6cd5\uff0c\u8bbe\u8fb9\u6570\u4e3a $d$\uff0c\u6211\u4eec\u5c06\u8fd9\u4e2a\u66f2\u9762\u591a\u8fb9\u5f62\u201c\u4e09\u89d2\u5256\u5206\u201d\uff0c\u90a3\u4e48\u5b83\u7684\u9762\u79ef\u5c31\u7b49\u4e8e\u6240\u6709\u66f2\u9762\u4e09\u89d2\u5f62\u7684\u9762\u79ef\u4e4b\u548c\u3002\u9898\u76ee\u4e2d\u7ed9\u51fa\u4e86 $\\operatorname{Area}(ABC)=\\alpha +\\beta+\\gamma-\\pi$\uff0c\u6240\u4ee5\u603b\u9762\u79ef $S=$ \u6240\u6709\u4e09\u89d2\u5f62\u5185\u89d2\u548c $-(d-2)\\pi$\uff0c$d-2$ \u4e3a\u4e09\u89d2\u5f62\u4e2a\u6570\u3002\n\n\u66f2\u9762\u4e09\u89d2\u5f62\u7684\u5185\u89d2\u548c\u4e4b\u548c\u7b49\u4e8e\u66f2\u9762\u591a\u8fb9\u5f62\u5185\u89d2\u548c\uff0c\u5bf9\u4e8e\u66f2\u9762\u591a\u8fb9\u5f62\u4e00\u4e2a\u5185\u89d2\uff0c\u5b83\u7b49\u4e8e\u91cd\u5fc3\u4e0e\u539f\u591a\u8fb9\u5f62\u4e00\u5bf9\u90bb\u8fb9\u5f62\u6210\u7684\u4e24\u4e2a\u5e73\u9762\u7684\u5939\u89d2\u3002\n\n\u6700\u540e\u6982\u7387\u7b49\u4e8e\u533a\u57df T \u7684\u9762\u79ef\u9664\u4ee5\u5355\u4f4d\u7403\u7684\u8868\u9762\u79ef\u3002\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<queue>\n#include<map>\n#include<cctype>\n#include<cmath>\n#include<bitset>\n#include<ctime>\n#define pprint(x) ::print(x),putchar(' ')\n#define fprint(x) ::print(x),putchar('\\n')\nusing namespace std;\n//#define getchar() (SS == TT && (TT = (SS = BB) + fread(BB,1,1 << 15,stdin),TT == SS) ? EOF : *SS++)\nchar BB[1 << 15],*SS = BB,*TT = BB;\nusing namespace std;\ninline int read()\n{\n\tint x = 0,f = 1;\n\tchar ch = getchar();\n\tfor(;!isdigit(ch);ch = getchar())\n\t\tif(ch == '-')\n\t\t\tf = -1;\n\tfor(;isdigit(ch);ch = getchar())\n\t\tx = x * 10 + (ch ^ 48);\n\treturn x * f;\n}\nvoid print(long long x)\n{\n\tif(x < 0)\n\t\tputchar('-'),x = -x;\n\tif(x > 9)\n\t\tprint(x / 10);\n\tputchar(x % 10 + '0');\n}\nconst double pi = acos(-1),eps = 1e-8;\nconst int N = 110;\nint dcmp(double x)\n{\n\treturn x < -eps ? -1 : (x > eps);\n}\nstruct point\n{\n\tdouble x,y,z;\n\t\n\tvoid read()\n\t{\n\t\tscanf(\"%lf %lf %lf\",&x,&y,&z);\n\t}\n\tpoint(double _x = 0,double _y = 0,double _z = 0)\n\t{\n\t\tx = _x,y = _y,z = _z;\n\t}\n\tfriend point operator + (point szq,point yqy)\n\t{\n\t\treturn point(szq.x + yqy.x,szq.y + yqy.y,szq.z + yqy.z);\n\t}\n\tfriend point operator - (point szq,point yqy)\n\t{\n\t\treturn point(szq.x - yqy.x,szq.y - yqy.y,szq.z - yqy.z);\n\t}\n\tfriend point operator * (point szq,double yqy)\n\t{\n\t\treturn point(szq.x * yqy,szq.y * yqy,szq.z * yqy);\n\t}\n\tfriend double operator * (point szq,point yqy)\n\t{\n\t\treturn szq.x * yqy.x + szq.y * yqy.y + szq.z * yqy.z;\n\t}\n\tfriend point operator / (point szq,double yqy)\n\t{\n\t\treturn point(szq.x / yqy,szq.y / yqy,szq.z / yqy);\n\t}\n\tfriend point operator & (point szq,point yqy)\n\t{\n\t\treturn point(szq.y * yqy.z - szq.z * yqy.y,szq.z * yqy.x - szq.x * yqy.z,szq.x * yqy.y - szq.y * yqy.x);\n\t}\n\tdouble lenth()\n\t{\n\t\treturn sqrt((*this) * (*this));\n\t}\n};\ndouble angle(point a1,point a2,point b1,point b2)\n{\n\tpoint p = a2 & a1,q = b2 & b1;\n\treturn acos((p * q) / p.lenth() / q.lenth());\n}\nint n,m;\npoint p[N],G;\nint d[N],f[N][N];\nint main()\n{\n\tn = read(),m = read();\n\tfor(int i = 1;i <= n;i++)\n\t\tp[i].read();\n\tfor(int i = 1;i <= m;i++)\n\t{\n\t\td[i] = read();\n\t\tfor(int j = 1;j <= d[i];j++)\n\t\t\tf[i][j] = read();\n\t}\n\tpoint u = p[1];\n\tdouble sum = 0;\n\tfor(int i = 1;i <= m;i++)\n\t{\n\t\tpoint a = p[f[i][1]],b,c;\n\t\tfor(int j = 2;j < d[i];j++)\n\t\t{\n\t\t\tb = p[f[i][j]],c = p[f[i][j + 1]];\n\t\t\tdouble w = fabs(((b - a) & (c - a)) * (u - a));\n\t\t\tG = G + (u + a + b + c) * w * 0.25,sum += w;\n\t\t}\n\t}\n\tG = G / sum;\n\tfor(int i = 1;i <= n;i++)\n\t\tp[i] = p[i] - G;\n\tdouble all = 4 * pi;\n\tfor(int i = 1;i <= m;i++)\n\t{\n\t\tdouble sum = 0;\n\t\tf[i][0] = f[i][d[i]],f[i][d[i] + 1] = f[i][1];\n\t\tfor(int j = 1;j <= d[i];j++)\n\t\t\tsum += angle(p[f[i][j]],p[f[i][j - 1]],p[f[i][j]],p[f[i][j + 1]]);\n\t\tsum -= (d[i] - 2) * pi;\n\t\tprintf(\"%.7lf\\n\",sum / all);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1582544096,
        "uid": 53994,
        "name": "81179332_",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4080 \u3010[SDOI2016]\u5e73\u51e1\u7684\u9ab0\u5b50\u3011"
    },
    {
        "content": "## \u9898\u9762\n\n[\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/P4080)\n\n\u505a\u4e00\u9053\u9898\u5b66\u4e00\u5806\u4e1c\u897f\u4e0d\u7ba1\u4ec0\u4e48\u65f6\u5019\u90fd\u662f\u7f8e\u597d\u7684\u4f53\u9a8c\u5462\u2026\u2026\n\n## \u524d\u7f6e\u829d\u58eb\n\n### \u6df7\u5408\u79ef\n\n\u5bf9\u4e8e\u4e09\u4e2a\u4e09\u7ef4\u5411\u91cf$a,b,c$\uff0c\u5b9a\u4e49\u5b83\u4eec\u7684\u6df7\u5408\u79ef\u4e3a$(a\\times b)\\cdot c$\uff0c\u5176\u4e2d$\\times $\u8868\u793a\u53c9\u4e58\uff0c$\\cdot$\u8868\u793a\u70b9\u4e58\uff0c\u8bb0\u4e3a$[a\\ b\\ c]$\n\n\u5173\u4e8e\u5b83\u7684\u51e0\u4f55\u610f\u4e49\u7684\u8bdd\u2026\u2026\u56fe\u7247\u6765\u81ea\u7f51\u7edc\n\n![](https://i.loli.net/2019/04/12/5cb0716e70817.png)\n\n\u5176\u4e2d$Prj_{a\\times b}c$\u4ee3\u8868\u7684\u662f$c$\u8fd9\u4e2a\u5411\u91cf\u5728$a\\times b$\u8fd9\u4e2a\u5411\u91cf\u4e0a\u7684\u6295\u5f71\n\n\u90a3\u4e48\u663e\u7136\u6211\u4eec\u6700\u540e\u5f97\u5230\u7684\u662f\u4ee5\u8fd9\u4e09\u4e2a\u5411\u91cf\u4e3a\u4e09\u6761\u4e34\u8fb9\u7684\u4e00\u4e2a\u516d\u9762\u4f53\u7684\u4f53\u79ef\n\n![](https://i.loli.net/2019/04/12/5cb071dbb2c80.png)\n\n### \u56db\u9762\u4f53\u4f53\u79ef\n\n\u5047\u8bbe\u56db\u9762\u4f53\u7684\u56db\u4e2a\u9876\u70b9\u5206\u522b\u4e3a$A,B,C,D$\uff0c\u5e76\u8bbe\u4e09\u4e2a\u5411\u91cf$a=B-A,b=C-A,c=D-A$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6b63\u56db\u9762\u4f53\u7684\u4f53\u79ef\u5c31\u662f${1\\over 6}[a\\ b\\ c]$\n\n\u8fd9\u4e2a\u5e94\u8be5\u6bd4\u8f83\u663e\u7136\u5427\u2026\u2026\u770b\u4e0a\u9762\u90a3\u5e45\u56fe\uff0c\u56db\u9762\u4f53\u7684\u4f53\u79ef\u662f\u4ee5$ab$\u8fd9\u4e2a\u5e73\u884c\u56db\u8fb9\u5f62\u4e3a\u5e95\uff0c$c$\u4e3a\u9876\u70b9\u7684\u68f1\u9525\u7684\u4e00\u534a\uff0c\u800c\u68f1\u9525\u7684\u4f53\u79ef\u662f\u68f1\u67f1\u7684${1\\over 3}$\uff0c\u6240\u4ee5\u56db\u9762\u4f53\u4f53\u79ef\u5c31\u662f\u516d\u9762\u4f53\u7684${1\\over 6}$\u4e86\n\n### \u51f8\u591a\u9762\u4f53\u7684\u91cd\u5fc3\n\n\u6211\u4eec\u5148\u6765\u8003\u8651\u4e00\u4e0b\u51f8\u591a\u8fb9\u5f62\u7684\u91cd\u5fc3\u597d\u4e86\u2026\u2026\n\n\u5bf9\u4e8e\u4e09\u89d2\u5f62\uff0c\u5b83\u7684\u91cd\u5fc3\u5c31\u662f\u5b83\u6240\u6709\u5750\u6807\u7684\u5e73\u5747\u503c\n\n\u90a3\u4e48\u5bf9\u4e8e\u51f8\u591a\u8fb9\u5f62\uff0c\u6211\u4eec\u628a\u5b83\u4e09\u89d2\u5256\u5206\u4e86\uff0c\u8bb0\u7b2c$i$\u5757\u7684\u91cd\u5fc3\u4e3a$a_i$\uff0c\u9762\u79ef\u4e3a$m_i$\uff0c\u90a3\u4e48\u51f8\u591a\u8fb9\u5f62\u7684\u91cd\u5fc3\u5c31\u662f\n\n$${\\sum_{i=1}^na_i\\times m_i\\over \\sum_{i=1}^nm_i}$$\n\n\u90a3\u4e48\u51f8\u591a\u9762\u4f53\u4e5f\u5dee\u4e0d\u591a\u4e86\uff0c\u6211\u4eec\u628a\u5b83\u7ed9\u56db\u9762\u4f53\u5256\u5206\u4e86\uff0c\u7136\u540e\u4e5f\u5dee\u4e0d\u591a\u6309\u4e0a\u9762\u7684\u7b97\u5c31\u597d\u4e86\n\n\u5173\u4e8e\u56db\u9762\u4f53\u5256\u5206\uff0c\u5177\u4f53\u7684\u8bf4\u6211\u4eec\u5728\u591a\u9762\u4f53\u4e2d\u968f\u4fbf\u9009\u4e00\u4e2a\u70b9\uff0c\u6bd4\u65b9\u8bf4\u662f$p_1$\uff0c\u7136\u540e\u628a\u6bcf\u4e00\u4e2a\u9762\u7ed9\u4e09\u89d2\u5256\u5206\uff0c\u90a3\u4e48\u4e09\u89d2\u5f62\u5c31\u548c\u9009\u5b9a\u7684\u70b9\u6784\u6210\u4e86\u4e00\u4e2a\u56db\u9762\u4f53\u3002\u8bbe$v_i$\u8868\u793a\u7b2c$i$\u4e2a\u56db\u9762\u4f53\u7684\u4f53\u79ef\uff0c$a_i$\u8868\u793a\u91cd\u5fc3\uff0c\u5219\u6700\u7ec8\u591a\u9762\u4f53\u7684\u91cd\u5fc3\u4e3a\n\n$${\\sum_{i=1}^na_i\\times v_i\\over \\sum_{i=1}^nv_i}$$\n\n### \u4e8c\u9762\u89d2\n\n~~\u8fd9\u73a9\u610f\u513f\u73ed\u91cc\u6570\u5b66\u8bfe\u6b63\u5728\u4e0a\u7136\u800c\u6211\u6b63\u5728\u505c\u8bfe~~\n\n\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u4e24\u4e2a\u5e73\u9762\u7684\u5939\u89d2\n\n\u6211\u4eec\u5047\u8bbe\u73b0\u5728\u6709$a,b,c$\u4e09\u4e2a\u5411\u91cf\uff0c\u8981\u6c42$ab$\u8fd9\u4e2a\u5e73\u9762\u548c$ac$\u8fd9\u4e2a\u5e73\u9762\u7684\u4e8c\u9762\u89d2\n\n\u90a3\u4e48\u6c42\u51fa$ab$\u548c$ac$\u7684\u6cd5\u5411\u91cf\uff08\u6cd5\u5411\u91cf\u53ef\u4ee5\u76f4\u63a5\u7528\u53c9\u79ef\u7b97\uff09\uff0c\u4e24\u4e2a\u6cd5\u5411\u91cf\u4e4b\u95f4\u7684\u5939\u89d2\u5c31\u662f\u4e8c\u9762\u89d2\u4e86\uff0c\u6cd5\u5411\u91cf\u4e4b\u95f4\u7684\u5939\u89d2\u76f4\u63a5\u7528\u70b9\u79ef\u9664\u4ee5\u957f\u5ea6\u8ba1\u7b97\n\n\u53ef\u4ee5\u753b\u4e2a\u56fe\u6765\u7406\u89e3\u3002\u6211\u4eec\u4fef\u89c6\u7684\u8bdd\uff0c\u5373\u8981\u6c42\u4e8c\u9762\u89d2$\\angle 1$\uff0c\u90a3\u4e48\u663e\u7136\u4e24\u4e2a\u6cd5\u5411\u91cf\u7684\u5939\u89d2$\\angle 2=\\angle 1$\n\n![](https://i.loli.net/2019/04/12/5cb0773f7d5e4.png)\n\n## \u9898\u89e3\n\n\u603b\u7ed3\u8d77\u6765\u7684\u8bdd\u2026\u2026\n\n\u4e09\u7ef4\u8ba1\u7b97\u51e0\u4f55\u3002\n\n\u9700\u8981\u6df7\u5408\u79ef\u6c42\u56db\u9762\u4f53\u4f53\u79ef\uff1b\n\n\u56db\u9762\u4f53\u5256\u5206\u540e\u5408\u5e76\u5e26\u6743\u91cd\u5fc3\u6c42\u603b\u91cd\u5fc3\uff1b\n\n\u56db\u9762\u4f53\u91cd\u5fc3\u7684\u6a2a\u7eb5\u5750\u6807\u662f\u56db\u4e2a\u9876\u70b9\u7684\u6a2a\u7eb5\u5750\u6807\u7684\u5e73\u5747\u6570\uff1b\n\n\u4e09\u7ef4\u5dee\u79ef\u6c42\u5e73\u9762\u7684\u6cd5\u5411\u91cf\uff1b\n\n\u70b9\u79ef\u6c42\u6cd5\u5411\u91cf\u5939\u89d2\uff08\u4e8c\u9762\u89d2\uff09\n\n\u8fd9\u4e9b\u77e5\u8bc6\u5c31\u53ef\u4ee5\u4e86AC\u6b64\u9898\u4e86\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(nf)$\n\n\u987a\u4fbf\u8bf4\u4e00\u4e0b\u6570\u636e\u8303\u56f4\u662f$n,f\\leq 100$\uff0c\u9898\u9762\u91cc\u9519\u4e86\n\n```cpp\n//minamoto\n#include<bits/stdc++.h>\n#define R register\n#define inline __inline__ __attribute__((always_inline))\n#define fp(i,a,b) for(R int i=(a),I=(b)+1;i<I;++i)\n#define fd(i,a,b) for(R int i=(a),I=(b)-1;i>I;--i)\n#define go(u) for(int i=head[u],v=e[i].v;i;i=e[i].nx,v=e[i].v)\nusing namespace std;\nconst int N=105;const double Pi=acos(-1.0);\nstruct node{\n\tdouble x,y,z;\n\tinline node(){}\n\tinline node(R double xx,R double yy,R double zz):x(xx),y(yy),z(zz){}\n\tinline node operator +(const node &b)const{return node(x+b.x,y+b.y,z+b.z);}\n\tinline node operator -(const node &b)const{return node(x-b.x,y-b.y,z-b.z);}\n\tinline node operator *(const node &b)const{return node(y*b.z-z*b.y,z*b.x-x*b.z,x*b.y-y*b.x);}\n\tinline double operator ^(const node &b)const{return x*b.x+y*b.y+z*b.z;}\n\tinline node operator *(const double &b)const{return node(x*b,y*b,z*b);}\n\tinline node operator /(const double &b)const{return node(x/b,y/b,z/b);}\n\tinline double norm(){return sqrt(x*x+y*y+z*z);}\n}p[N],h[N*N],u,v;\nint f[N][N],c[N];double sum,tmp;\nint n,m;\ninline double cross(const node &a,const node &b,const node &c){\n\tnode p=b*a,q=c*a;return acos((p^q)/p.norm()/q.norm());\n}\nint main(){\n//\tfreopen(\"testdata.in\",\"r\",stdin);\n\tscanf(\"%d%d\",&n,&m);\n\tfp(i,1,n)scanf(\"%lf%lf%lf\",&p[i].x,&p[i].y,&p[i].z);\n\tfp(i,1,m){\n\t\tscanf(\"%d\",&c[i]);\n\t\tfp(j,1,c[i])scanf(\"%d\",&f[i][j]);\n\t}\n\tu=p[1],v=node(0,0,0),sum=0;\n\tfp(i,1,m){\n\t\tnode u2=p[f[i][1]],v1,v2,t;\n\t\tfp(j,2,c[i]-1){\n\t\t\tv1=p[f[i][j]],v2=p[f[i][j+1]];\n\t\t\tt=(u+u2+v1+v2)*0.25,tmp=fabs(((v1-u2)*(v2-u2))^(u-u2));\n\t\t\tv=v+t*tmp,sum+=tmp;\n\t\t}\n\t}\n\ttmp=1.0/sum,u=v*tmp,tmp=0.25/Pi;\n\tfp(i,1,n)p[i]=p[i]-u;\n\tfp(i,1,m){\n\t\tsum=0;\n\t\tfp(j,2,c[i]-1)sum+=cross(p[f[i][j]],p[f[i][j-1]],p[f[i][j+1]]);\n\t\tsum+=cross(p[f[i][1]],p[f[i][c[i]]],p[f[i][2]]),\n\t\tsum+=cross(p[f[i][c[i]]],p[f[i][c[i]-1]],p[f[i][1]]);\n\t\tsum-=(c[i]-2)*Pi;\n\t\tprintf(\"%.7lf\\n\",sum*tmp);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1555069128,
        "uid": 41781,
        "name": "bztMinamoto",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4080 \u3010[SDOI2016]\u5e73\u51e1\u7684\u9ab0\u5b50\u3011"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u6765\u634b\u4e00\u634b\u6574\u4e2a\u9898\u7684\u601d\u8def\u5427\u3002\n\n\u9898\u610f\u8981\u6c42\u6211\u4eec\u6c42\u51f8\u591a\u9762\u4f53\u7684\u91cd\u5fc3$O$\uff0c\n\n\u4e4b\u540e$O$\u4f5c\u4e3a\u5927\u5706\u7684\u5706\u5fc3\uff0c\u4f5c\u4e8c\u9762\u89d2\uff0c\u6c42\u6bcf\u4e00\u4e2a\u51f8\u591a\u8fb9\u5f62\u5728\u7403\u9762\u4e0a\u7684\u6295\u5f71\u9762\u79ef\u3002\n\n\u6210\u529f\u89e3\u51b3\u6b64\u9898\u3002\n\n\u90a3\u4e48\u5177\u4f53\u7684\u8bdd\u3002\u3002\u3002\n\n\u91cd\u5fc3\u7684\u6c42\u6cd5\u4e5f\u5c31\u662f\n\n\u7269\u7406\u7684\u8d28\u5fc3\u6c42\u6cd5:\n\n$\\overrightarrow{o}=\\frac{\\sum\\limits_{i=1}^n \\overrightarrow{a_i}v_i}{V}$\n\n\u5176\u4e2d$a_i$\u4e3a\u56db\u9762\u4f53\u91cd\u5fc3\uff0c$v_i$\u4e3a\u8fd9\u4e2a\u56db\u9762\u4f53\u7684\u4f53\u79ef,$V=\\sum_{i=1}^n v_i$\u3002\n\n\u5176\u4e2d\u56db\u9762\u4f53\u91cd\u5fc3\u5750\u6807\u4e3a$\\overrightarrow{a}=\\frac{\\overrightarrow{p_1}+\\overrightarrow{p_2}+\\overrightarrow{p_3}+\\overrightarrow{p_4}}{4}$\uff0c\n\n$v=\\frac{1}{6}|a\\cdot(b\\times c)|$\uff0c\u8fd9\u4e2a\u53eb\u5411\u91cf\u6df7\u5408\u79ef\uff0c\u6709\u5174\u8da3\u53ef\u4ee5\u53bb\u641c\u4e00\u4e0b\u3002\n\n\u8d28\u5fc3\u6c42\u6cd5\u7684\u8bc1\u660e\u7c7b\u4f3c\u4e8e\u5c06\u4e24\u4e2a\u70b9$p_1,p_2$\uff0c\u4e0e\u5b83\u4eec\u7684\u4f53\u79ef$v_1,v_2$\n\n\u770b\u6210\u4e24\u4e2a\u7269\u4f53\uff0c\u7136\u540e\u628a\u8fd9\u4e24\u4e2a\u7269\u4f53\u770b\u6210\u4e00\u4e2a\u6574\u4f53\uff0c\u7136\u540e\u6c42\u51fa\u8fd9\u4e2a\u6574\u4f53\u7684\u91cd\u5fc3\u3002\n\n\u5b9e\u9645\u4e0a\u5c31\u662f\u6760\u6746\u5b9a\u7406:\u8bbe$p_o$\u4e3a\u91cd\u5fc3\uff0c\u5219$v_1(dis_{p_1\\rightarrow p_o})=v_2(dis_{p_o\\rightarrow p_2})$\u3002\n\n\u7136\u540e\u5c31\u662f\u4e0d\u65ad\u5730\u6c42\u91cd\u5fc3\u7684\u8fc7\u7a0b\uff0c\u6700\u540e\u5f97\u5230\u7684\u5c31\u662f\u90a3\u4e2a\u5f0f\u5b50\u3002\n\n\u4e8c\u9762\u89d2\u7684\u89e3\u6cd5\u8fd0\u7528\u6cd5\u5411\u91cf\u6c42\u89e3\u5373\u53ef\u3002\n\n\u5373$\\text{cos} ~\\theta=\\frac{\\overrightarrow{a}\\cdot\\overrightarrow{b}}{|\\overrightarrow{a}||\\overrightarrow{b}|}$\uff0c\u6cd5\u5411\u91cf\u7528\u53c9\u79ef\u6c42\u3002\n\n\u56e0\u4e3a\u51f8\u591a\u8fb9\u5f62\u6295\u5f71\u5728\u7403\u9762\u4e0a\u4e5f\u662f\u4e00\u4e2a\u66f2\u9762\u51f8\u591a\u8fb9\u5f62\u3002\n\n\u90a3\u4e48\u6765\u8bf4\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e2a\u56fe\u5f62\u5206\u6210\u591a\u4e2a\u4e09\u89d2\u5f62\u8fdb\u884c\u5904\u7406\uff0c\u52a0\u8d77\u6765$/4\\pi$\u5373\u4e3a\u7b54\u6848\u3002\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#include<cstdlib>\n#include<vector> \n#define gc getchar()\n#define ll long long\n#define ull unsigned long long\n#define file(s) freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout)\n#define I inline \nusing namespace std;\nconst int N=1e4+5,M=1e4;\nconst double pi=acos(-1);\ntemplate<class o>I void qr(o &x)\n{\n\tchar c=gc;int f=1;x=0;\n\twhile(c<'0'||c>'9'){if(c=='-')f=-1;c=gc;}\n\twhile(c>='0'&&c<='9'){x=x*10+(c^48);c=gc;}\n\tx*=f;\n}\ntemplate<class o>I void qw(o x)\n{\n\tif(x<0)x=-x,putchar('-');\n\tif(x/10)qw(x/10);\n\tputchar(x%10+48);\n}\nstruct Point\n{\n\tdouble x,y,z;\n\tPoint(double x=0.0,double y=0.0,double z=0.0):x(x),y(y),z(z){}\n\tI Point operator +(const Point &a)const{return Point(x+a.x,y+a.y,z+a.z);}\n\tI Point operator -(const Point &a)const{return Point(x-a.x,y-a.y,z-a.z);}\n\tI Point operator *(const double &a)const{return Point(x*a,y*a,z*a);}\n\tI Point operator /(const double &a)const{return Point(x/a,y/a,z/a);}\n\tPoint operator +=(const Point &a){return *this=*this+a;}\n\tPoint operator -=(const Point &a){return *this=*this-a;}\n\tPoint operator *=(const double &a){return *this=*this*a;}\n\tPoint operator /=(const double &a){return *this=*this/a;}\n\tI double dis(){return sqrt(x*x+y*y+z*z);}\n}P[55],G;int n,m;vector<Point>S[85];\nI Point cross(const Point &a,const Point &b){return Point(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x);}\nI double dot(const Point &a,const Point &b){return a.x*b.x+a.y*b.y+a.z*b.z;}\nI Point getG(const Point &p,const Point &a,const Point &b,const Point &c){return (p+a+b+c)/4.0;} \ndouble getV(Point p,Point a,Point b,Point c){a-=p;b-=p;c-=p;return fabs(dot(a,cross(b,c)))/6.0;}\ndouble angle(Point p,Point a,Point b,Point c){a-=p;b-=p;c-=p;Point d=cross(a,b),e=cross(a,c);return acos(dot(d,e)/d.dis()/e.dis());}\nvoid init()\n{\n\tqr(n),qr(m);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tdouble x,y,z;scanf(\"%lf%lf%lf\",&x,&y,&z);\n\t\tP[i]=Point(x,y,z);\n\t}\n\tfor(int i=1,k,x;i<=m;i++)\n\t{\n\t\tqr(k);\n\t\tfor(int j=1;j<=k;j++)qr(x),S[i].push_back(P[x]);\n\t}\n\tdouble sv=0.0;\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint s=S[i].size();\n\t\tfor(int j=0;j<s;j++)\n\t\t{\n\t\t\tPoint tmp=getG(P[1],S[i][j],S[i][(j+1)%s],S[i][(j+2)%s]);double v=getV(P[1],S[i][j],S[i][(j+1)%s],S[i][(j+2)%s]);\n\t\t\tG+=tmp*v;sv+=v;\n\t\t}\n\t}\n\tG/=sv;\n}\nvoid solve()\n{\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint s=S[i].size();double ans=-(s-2)*pi;\n\t\tfor(int j=0;j<s;j++)\n\t\t\tans+=angle(G,S[i][j],S[i][(j+1)%s],S[i][(j-1+s)%s]);\n\t\tans/=4.0*pi;\n\t\tprintf(\"%.7lf\\n\",ans);\n\t}\n}\nint main()\n{\n\tinit();\n\tsolve();\n\treturn 0;\n}\n```\n\n",
        "postTime": 1589850972,
        "uid": 106232,
        "name": "_Sein",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4080 \u3010[SDOI2016]\u5e73\u51e1\u7684\u9ab0\u5b50\u3011"
    }
]
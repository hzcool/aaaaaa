[
    {
        "content": "### \u601d\u8def\n\u770b\u5230\u8fd9\u9053\u9898\u6700\u5f00\u59cb\u611f\u89c9\u5341\u5206\u50cf\u6c49\u8bfa\u5854\uff0c\u4f46\u662f\u4f1a\u53d1\u73b0\u8fd9\u4e2a\u4e0d\u9700\u8003\u8651\u5927\u5c0f\u7684\u9650\u5236\u53ea\u8981\u8ba9\u6bcf\u4e00\u4e2a\u5230\u8fbe\u89c4\u5b9a\u4f4d\u7f6e\u5c31\u53ef\u4ee5\u4e86\uff0c\u90a3\u4e48\u5176\u5b9e\u5c31\u53ef\u4ee5\u76f4\u63a5\u53bb\u8003\u8651\u8d2a\u5fc3\u7684\u7b56\u7565\u3002\n\n\u7b2c\u4e00\u79cd\u8d2a\u5fc3\u65b9\u6cd5\uff1a\u5206\u522b\u8ba1\u7b97\u51fa\u524d $cnta$ \u4e2a $a_j$ \u4e2d\u4e0d\u4e3a $1$ \u7684\u6570\u6709\u591a\u5c11\uff0c\u518d\u8ba1\u7b97\u540e $cnta$ \u4e2a $a_j$ \u4e0d\u4e3a $1$ \u7684\u6570\u6709\u591a\u5c11\uff0c$b_j$ \u8bb0\u5f55\u53cd\u4e4b\uff0c\u6700\u540e\u5c06\u6240\u9700\u6b65\u6570\u4e0e\u5f53\u524d\u6700\u5c0f\u503c\u6bd4\u8f83\u53d6\u6700\u5c0f\u503c,\u8fd9\u4e2a\u65b9\u6cd5\u662f\u4e09\u79cd\u6570\u5b57\u4e00\u8d77\u8003\u8651\u79fb\u52a8\u3002\n\n\u7b2c\u4e8c\u79cd\u8d2a\u5fc3\u65b9\u6cd5\uff1a\u53ea\u53bb\u5904\u7406 $b_j$ \u4e3a $1$ \u7684\u60c5\u51b5\uff0c\u8fd9\u4e9b\u79fb\u52a8\u4ee3\u4ef7\u4e3a $1$\uff0c\u90a3\u5982\u679c\u78b0\u5230 $b_j$ \u4e0d\u4e3a $1$ \u7684\u8bdd\uff0c\u4ee3\u4ef7\u4fbf\u4f1a\u591a\u51fa $1$\uff0c\u81ea\u7136\u8fd9\u662f\u79fb\u52a8\u9664 $1$ \u4e4b\u5916\u7684\u6570.\n\n\u7b2c\u4e09\u79cd\u8d2a\u5fc3\u65b9\u6cd5\uff1a\u7c7b\u4f3c\u4e8e\u7b2c\u4e8c\u79cd\uff0c\u662f\u53bb\u5904\u7406 $a_j$\uff0c\u4e0d\u4e3a $1$ \u65f6\u4ee3\u4ef7\u4e3a $1$\uff0c\u4e3a $1$ \u65f6\u4ee3\u4ef7\u4f1a\u6bd4\u4e0d\u662f $1$ \u65f6\u4ee3\u4ef7\u591a $1$\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u7167\u987e\u4e0d\u662f $1$ \u7684\u6570\uff0c\u4f7f\u4ed6\u4eec\u6b65\u6570\u5c3d\u91cf\u5c11\u3002\n\n### \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1000001;\nint s[N],n,ans=INT_MAX,a[N],b[N],cnta,cntb,n_ex_t[N];\nbool chk(int x){//\u7b2cx\u4f4d\u540e\u4f1a\u4e0d\u4f1a\u66f4\u4f18\n    int tot=0;\n    bool pd=0;\n    for(int i=x+1;i<n_ex_t[x];i++){\n        if(s[i]==1){\n            tot++;\n            pd=1;\n        }\n        else{\n        \tif(pd){\n\t\t\t\ttot--;\n\t\t\t}\n\t\t}\n    }\n    return tot<1;\n}\nvoid solve(int x){\n    int as=0,c[N],tot=0,n_ex=-1,sum=0/*\u73b0\u5728\u5df2\u7ecf\u8d70\u4e86\u591a\u5c11\u6b65\u4e86*/,k1=0,k2=0,k3=0,k4=0;;\n    for(int i=n;i>=1;i--){\n        if(s[i]==x){\n            sum++;\n            n_ex_t[i]=n_ex;\n            n_ex=i;\n        }\n    }\n    n_ex_t[0]=n_ex;\n    bool pd=0;//\u662f\u5426\u5df2\u7ecf\u51fa\u73b0\u4e86\u4e0d\u5408\u6cd5\n    int i=0;\n    for(i=0;n_ex_t[i]!=-1;i=n_ex_t[i]){\n        if(pd==0){\n            if(chk(i)){\n                for(int j=i+1;j<n_ex_t[i];j++)\n                    if(s[j]!=1){\n                        sum++;\n                    }\n                for(int j=i+1;j<n_ex_t[i];j++)\n                    if(s[j]==1){\n                        sum=sum+2;\n                        c[++tot]=s[j];\n                   \t}\n            \t}\n            else{\n            \tpd=1;\n\t\t\t}\n        }\n        if(pd==1){\n            for(int j=i+1;j<n_ex_t[i];j++){\n                c[++tot]=s[j];\n                sum++;\n            }\n        }\n        for(int j=i+1;j<n_ex_t[i];j++){\n        \tif(s[j]==1){\n        \t\tpd=1;\n\t\t\t}\n\t\t}\n    }\n    i++;\n    cnta=0,cntb=0;\n    for(int j=i;j<=n;j++){\n    \ta[++cnta]=s[j];\n\t}\n    for(int j=tot;j>=1;j--){\n    \tb[++cntb]=c[j];\n\t}\n    while(cnta>0&&a[cnta]==1){\n    \tcnta--;\n\t}\n    while(cntb>0&&b[cntb]!=1){\n    \tcntb--;\n\t}\n    for(int j=cnta;j>=1;j--){\n        if(a[j]==1){\n        \tbreak;\n\t\t}\n        k1++;\n    }\n    for(int j=cntb;j>=1;j--){\n        if(b[j]!=1){\n        \tbreak;\n\t\t}\n        k2++;\n    }\n    for(int j=1;j<=cnta;j++){\n        if(a[j]==1){\n        \tbreak;\n\t\t}\n        k3++;\n    }\n    for(int j=1;j<=cntb;j++){\n        if(b[j]!=1){\n        \tbreak;\n\t\t}\n        k4++;\n    }\n    ans=min(ans,sum+k1+k2+min(k1,k2)+2*(cnta-k1)+2*(cntb-k2));//\u8d2a\u4e00\n    as=0;\n    for(int j=1;j<=cntb;j++){\n        if(b[j]==1){\n        \tas++;\n\t\t}\n        else{\n        \tas=as+2;\n\t\t}\n    }\n    ans=min(ans,sum+as+cnta*2);//\u8d2a\u4e8c\n\tas=0;\n    for(int j=1;j<=cnta;j++){\n        if(a[j]==1){\n        \tas=as+2;\n\t\t}\n        else{\n        \tas++;\n\t\t}\n    }\n    ans=min(ans,sum+as+cntb*2);//\u8d2a\u4e09\n}\nint main(){\n    cin>>n;\n    for(int i=1;i<=n;i++){\n    \tcin>>s[i];\n\t}\n    solve(2);\n    solve(3);\n    cout<<ans;\n}\n```",
        "postTime": 1685026041,
        "uid": 651908,
        "name": "8NewOC",
        "ccfLevel": 0,
        "title": "P5971"
    }
]
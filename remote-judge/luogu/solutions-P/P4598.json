[
    {
        "content": "\u4e00\u770b\u8fd9\u9053\u9898\uff0cwdtn\uff0cHEOI2012D1T1\u8003\u8fd9\u4e48\u96be\u7684\uff1f\u6c42$n\\le 100$\u6b21\u65b9\u7a0b\u7684\u6240\u6709\u6709\u7406\u6570\u89e3\uff1f\uff1f\uff1f\n\n\u4e0d\u662f\u8bf4$\\ge 4$\u6b21\u65b9\u7a0b\u5c31\u6ca1\u6709\u6c42\u6839\u516c\u5f0f\u4e86\u5417\uff0c\u96be\u9053\u6570\u5b66\u53c8\u6709\u4e86\u65b0\u7684\u7a81\u7834\uff1f\uff1f\uff1f~~\u6284\u9898\u89e3\u53bb\u4e86~~\n\n~~\u5176\u5b9e\u6211\u89c9\u5f97\uff0c\u5176\u4ed6\u9898\u89e3\u5bf9\u4e8e\uff0c\u4e3a\u4ec0\u4e48$a[0]=0$\u65f6\uff0c\u8981\u627e\u6700\u4f4e\u7684\u975e0\u4f4d\u89e3\u91ca\u7684\u5f88\u5306\u5fd9\uff0c\u6709\u4e00\u4e9b\u6f0f\u6d1e~~\n\n[idea from this](https://www.cnblogs.com/yousiki/p/6404149.html)\n\n\u5b9a\u7406\u53eb\u505a\u591a\u9879\u5f0f**\u9ad8\u65af\u5f15\u7406** \uff0c\u5927\u610f\u662f\uff0c\u590d\u6570\u57df\u4e0b\u7684\u4e00\u4e2a\u5173\u4e8ex\u7684n\u6b21\u591a\u9879\u5f0f$f(x)=a_{0}+a_{1}x+a_{2}x^{2}+a_{3}x^{3}+...+a_{n}x^{n}$\uff0c\u4e00\u5b9a\u53ef\u4ee5\u5206\u89e3\u6210n\u4e2a\u542bx\u7684\u4e00\u6b21\u591a\u9879\u5f0f\u76f8\u4e58\uff0c\u5373f(x)\u4e00\u5b9a\u5b58\u5728\u4e00\u79cd\u5f62\u5982$f(x)=\\prod{(b_{i}x+c_{i})}$\u7684\u8868\u793a\uff0c\u5176\u4e2d\u6bcf\u4e2a\u5f0f\u5b50\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u590d\u6570\u57df\u4e0b\u7684\u6839\uff08\u5f53\u7136\uff0c\u8fd9\u4e9b\u6839\u6709\u53ef\u80fd\u91cd\u590d\uff09\n\n\u8fd9\u9053\u9898\u53eb\u6211\u4eec\u53ea\u7528\u8003\u8651\u6709\u7406\u6570\u6839\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a\u5f0f\u5b50\u6539\u5199\u4e3a$f(x)=g(x)\\prod{(b_{i}x+c_{i})}$\u7684\u6837\u5b50\uff0c\u5176\u4e2dg(x)\u662f\u4e00\u4e2a\u5173\u4e8ex\u7684\u591a\u9879\u5f0f\uff0c\u5305\u542b\u4e86\u6240\u6709\u7684\u975e\u6709\u7406\u6570\u6839\uff0c\u5269\u4e0b\u7684\u90e8\u5206\u5c31\u8868\u793a\u4e86\u6240\u6709\u7684\u6709\u7406\u6570\u6839\u3002\n\n\u53d1\u73b0\u6bcf\u4e2a\u6709\u7406\u6570\u6839\u90fd\u80fd\u8868\u793a\u6210$x_{i}=\\frac{c_{i}}{b_{i}}$\uff0c\u7136\u540e\u4e0d\u96be\u53d1\u73b0$f(x)=\\sum_{i=0}^{n}{a_{i}x^{i}}$\u4e2d\u7684$a_0$\u5305\u542b\u4e86\u6240\u6709\u7684$c_i$\uff0c\u800c$a_n$\u5305\u542b\u4e86\u6240\u6709\u7684$b_i$\uff0c\u6240\u4ee5**\u5bf9\u4e8e\u6240\u6709\u7684\u5408\u6cd5\u6709\u7406\u6570\u6839$x_{i}=\\frac{c_{i}}{b_{i}}$\uff0c$c_i$\u4e00\u5b9a\u662f$a_0$\u7684\u7ea6\u6570\uff0c$b_i$\u4e00\u5b9a\u662f$a_n$\u7684\u7ea6\u6570**\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u5148\u5904\u7406\u51fa$a_0$\u548c$a_n$\u7684\u6240\u6709\u7ea6\u6570\uff0c\u7136\u540e\u66b4\u529b\u679a\u4e3e$b_i$\u548c$c_i$\uff0cO(N)check\u662f\u5426\u5408\u6cd5\u5373\u53ef\u3002\n\ncheck\u7684\u65b9\u6cd5\u662f\u5bf9\u4e00\u4e2a\u5927\u8d28\u6570\u53d6\u6a21\u3002\n\n\u5982\u679c$a_0=0$\u600e\u4e48\u529e\uff1f\u6211\u4eec\u5728\u7b54\u6848\u4e2d\u6dfb\u52a0$x=0$\u7684\u89e3\uff0c\u540c\u65f6\u4e0d\u65ad\u9664\u6389x\uff0c\u653e\u5230$g(x)$\u4e2d\uff0c\u76f4\u5230\u6700\u4f4e\u4e0d\u4e3a0\u7684\u9879\u3002\n\n```cpp\n#define N 105\nint n;\nint a[N];\nil int F(int x)\n{\n\tint r=0;\n\tfor(ri i=n; i>=0; --i) r=add(mul(r,x),a[i]);\n\treturn r;\n}\nvoid divi(int x,vector<int> &d)\n{\n\tfor(ri i=1; i*i<=x; ++i)\n\t\tif(x%i==0)\n\t\t{\n\t\t\td.pb(i);\n\t\t\tif(i*i!=x) d.pb(x/i);\n\t\t}\n}\nvector<int>d[2];\nvector<pii>ans;\nil bool cmp(const pii &a,const pii &b)\n{\n\treturn (LL)a.fi*b.se<(LL)a.se*b.fi;\n}\nsigned main()\n{\n#ifdef M207\n\tfreopen(\"in.in\",\"r\",stdin);\n\t// freopen(\"ot.out\",\"w\",stdout);\n#endif\n\tin(n);\n\tfor(ri i=0; i<=n; ++i) in(a[i]);\n\tint p=0;\n\twhile(p<n&&a[p]==0) ++p;\n\tif(p==n)\n\t{\n\t\tout(0);\n\t\treturn 0;\n\t}\n\tdivi(abs(a[p]),d[0]),divi(abs(a[n]),d[1]);\n\tfor(solid x:d[0]) for(solid y:d[1])\n\t\t\tif(__gcd(x,y)==1)\n\t\t\t{\n\t\t\t\tint t=mdinv(y);\n\t\t\t\tif(F(mul(x,t))==0) ans.pb(mp(x,y));\n\t\t\t\tif(F(mul(md-x,t))==0) ans.pb(mp(-x,y));\n\t\t\t}\n\tif(!a[0]) ans.pb(mp(0,1));\n\tsort(ans.begin(),ans.end(),cmp);\n\tout(Size(ans));\n\tfor(solid v:ans)\n\t\tif(v.se==1) out(v.fi);\n\t\telse printf(\"%d/%d\\n\",v.fi,v.se);\n\treturn 0;\n}\n```\n",
        "postTime": 1554982475,
        "uid": 58302,
        "name": "i207M",
        "ccfLevel": 0,
        "title": "\u6570\u8bba\u597d\u9898-[HEOI2012]Akai \u7684\u6570\u5b66\u4f5c\u4e1a-\u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "**\u4e4b\u524d\u7684\u9898\u89e3\u8bb2\u7684\u633a\u6e05\u695a\u7684\uff0c\u4e0d\u8fc7\u5728\u68c0\u9a8c\u7b54\u6848\u65f6\u91c7\u53d6\u4e86\u6bd4\u8f83\u590d\u6742\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u4e58\u6cd5\u9006\u5143\u6216\u8005\u5feb\u901f\u5e42\uff0c\u6211\u7528\u4e86\u6bd4\u8f83\u7b80\u5355\u7684\u8ba1\u7b97\u65b9\u6cd5\u3002\u6b64\u5916\uff0c\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u5bf9\u4e8e\u840c\u65b0\u4e0d\u592a\u53cb\u597d\uff0c~~\u6211\u5c31\u6ca1\u770b\u660e\u767d~~\uff0c\u6240\u4ee5\u6765\u4ea4\u4e00\u6b21\u9898\u89e3**\n\n**\u505a\u6cd5\uff1a** \u9898\u76ee\u8981\u6c42\u89e3\u4ee5\u5206\u6570\u7684\u5f62\u5f0f\u8f93\u51fa\uff0c\u8981\u6c42\u5206\u5b50\u548c\u5206\u6bcd\u4e92\u8d28\uff0c\u4e14\u5206\u6bcd\u5fc5\u987b\u662f\u6b63\u6574\u6570\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u89e3\u53ef\u5199\u4e3a\uff08p/q\uff09\u5176\u4e2dp\u548cq\u4e92\u8d28\uff0c\u90a3\u4e48\u65b9\u7a0b\u53ef\u4ee5\u5199\u4e3a(a[0]+a[1] * p/q+a[2] * (p/q)^2\u2026\u2026a[n] * (p/q)^n) = 0\u3002\n\n\u5de6\u53f3\u4e24\u8fb9\u540c\u4e58q^n \u5f97\u5230\uff08a[0] * q^n+a[1]  * q^(n-1)*p\u2026\u2026a[n] * p^ n\uff09 = 0\u3002\u5f0f\u5b50\u518d\u6a21p\uff0c\u90a3\u4e48a[1]\u5230a[n]\u90fd\u662f\u7b49\u4e8e0\u7684,\u6240\u4ee5 \uff08a[0] * q^n % p\uff09 \u4e5f\u5e94\u8be5\u7b49\u4e8e0\uff0c\u524d\u9762\u8bf4\u4e86p,q\u4e92\u8d28,**\u90a3\u4e48\u5f97\u51fa\u7ed3\u8bba \u5206\u5b50p \u88aba[0]\u6574\u9664 ,\u540c\u7406\uff0c\u5206\u6bcdq\u88aba[n]\u6574\u9664\u3002**\n\n\u90a3\u4e48\u6211\u4eec\u7b97\u51fa\u6240\u6709\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\uff0c\u4ee3\u5165\u68c0\u9a8c\u5373\u53ef\u3002**\u4f46\u6211\u4eec\u4e0d\u80fd\u4fdd\u8bc1a[0]!=0,\u6240\u4ee5\u7ed3\u8bba\u91cc\u7684a[0]\u5176\u5b9e\u5e94\u8be5\u4ee3\u8868\u6700\u9760\u524d\u7684\u975e\u96f6\u4f4d**\n\n**\u68c0\u9a8c\u8fc7\u7a0b\uff1a** \u53ea\u9700\u8981\u6b63\u5e8f\u626b\u4e00\u904d\uff0c\u628a\u6bcf\u9879\u90fd\u4e58p^(i-1)\uff0c\u6b21\u5e42\u7684\u5904\u7406\u6ca1\u5fc5\u8981\u7528\u5feb\u901f\u5e42\uff0c\u76f4\u63a5\u5b9a\u4e49\u53d8\u91cf\uff0c\u6bcf\u6b21\u4e58p\u5373\u53ef\u3002\u63a5\u4e0b\u6765\u5012\u5e8f\u626b\u4e00\u904d\uff0c\u6bcf\u9879\u90fd\u4e58q^(n-i+1),\u4e5f\u662f\u5982\u6b64\uff0c\u6ce8\u610f\u53d6\u6a21\u5373\u53ef\n\n**\u8fd8\u6709\u8981\u6ce8\u610f\u68c0\u9a8cx=0\u7684\u60c5\u51b5**\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mod = 1231238613;\nint n,cnt1,cnt2,cnt;\nint data[105],p1[10005],p2[10005];\nstruct node\n{\n\tint a,b;\n}ans[105];\n\nbool cmp(node x,node y)\n{\n\treturn 1ll * x.a * y.b < 1ll * y.a * x.b ;\n}\n\nint gcd(int a,int b)\n{\n\tif(!b)\n\t\treturn a;\n\telse\n\t\treturn gcd(b,a%b);\n}\n\nbool judge(int x,int y)//\u5224\u65ad\u662f\u5426\u53ef\u884c \n{\n\tint temp[105];\n\tmemset(temp,0,sizeof(temp));\n\tint a = 1,b = 1,sum = 0;\n\tfor(int i=0;i<=n;i++)\n\t{\n\t\ttemp[i] = (1ll*data[i]*a % mod + mod)%mod;\n\t\ta = 1ll*a*x%mod;\n\t}\n\tfor(int i=n;i>=0;i--)\n\t{\n\t\tsum = (sum+1ll*temp[i]*b % mod+ mod)%mod;\n\t\tb = 1ll*b*y%mod;\n\t}\n\treturn sum==0;\n}\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=0;i<=n;i++)\n\t\tscanf(\"%d\",&data[i]);\n\tint t = 0;\n\twhile(data[t]==0)\n\t\tt++;\n\t//\u627e\u5230\u7b2c\u4e00\u4e2a\u975e\u96f6\u4f4d \n\tfor(int i=1;i*i<=abs(data[t]);i++)\n\t{\n\t\tif(abs(data[t])%i==0)\n\t\t{\n\t\t\tp1[++cnt1] = i;\n\t\t\tif(i*i!=abs(data[t])&&abs(data[t])/i!=0)\n\t\t\t\tp1[++cnt1] = abs(data[t])/i;\n\t\t}\n\t} \n\tfor(int i=1;i*i<=abs(data[n]);i++)\n\t{\n\t\tif(abs(data[n])%i==0)\n\t\t{\n\t\t\tp2[++cnt2] = i;\n\t\t\tif(abs(data[n])/i!=0&&i*i!=abs(data[n]))\n\t\t\t\tp2[++cnt2] = abs(data[n])/i ;\n\t\t}\n\t}\n\t//\u53d6\u51fadata[t]\u548cdata[n]\u7684\u7ea6\u6570\n\tfor(int i=1;i<=cnt1;i++)\n\t{\n\t\tfor(int j=1;j<=cnt2;j++)\n\t\t{\n\t\t\tif(gcd(p1[i],p2[j])!=1)\n\t\t\t\tcontinue;\n\t\t\t//\u679a\u4e3e\u5404\u81ea\u7ea6\u6570\uff0c\u5982\u679c\u662f\u4e92\u8d28\u518d\u5224\u65ad\u662f\u4e0d\u662f\u89e3 \n\t\t\tif(judge(p1[i],p2[j]))\n\t\t\t{\n\t\t\t\tans[++cnt].a = p1[i];\n\t\t\t\tans[cnt].b   = p2[j];\n\t\t\t}\n\t\t\tif(judge(-p1[i],p2[j]))\n\t\t\t{\n\t\t\t\tans[++cnt].a = -p1[i];\n\t\t\t\tans[cnt].b   = p2[j];\n\t\t\t}\n\t\t\t//\u6b63\u8d1f\u6709\u7406\u6570\u89e3 \n\t\t}\n\t}\n\tif(judge(0,1))\n\t{\n\t\tans[++cnt].a = 0;\n\t\tans[cnt].b   = 1;\n\t}//\u7279\u52240\u7684\u60c5\u51b5 \n\tprintf(\"%d\\n\",cnt);\n\tsort(ans+1,ans+1+cnt,cmp);//\u5bf9\u7b54\u6848\u6392\u5e8f \n\tfor(int i=1;i<=cnt;i++)\n\t{\n\t\tif(ans[i].b==1)\n\t\t\tprintf(\"%d\\n\",ans[i].a);\n\t\telse\n\t\t\tprintf(\"%d/%d\\n\",ans[i].a,ans[i].b);\n\t}\n\treturn 0;\n}\n```\n\u5b8c\u7ed3\u6492\u82b1",
        "postTime": 1602842974,
        "uid": 250174,
        "name": "Akoasm_X",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4598 \u3010[HEOI2012]Akai \u7684\u6570\u5b66\u4f5c\u4e1a\u3011"
    },
    {
        "content": "\u8bbe $x=\\frac{p}{q}$\uff0c\u4e14 $\\gcd(p,q)=1$\uff0c\u5219\u6709\uff1a\n\n$$\\sum_{i=0}^{n}a_i\\left(\\frac{p}{q}\\right)^i=0$$\n\n\u901a\u5206\u5f97\uff1a\n\n$$\\sum_{i=0}^{n}a_ip^iq^{n-i}=0$$\n\n\u5728\u6a21 $p$ \u610f\u4e49\u4e0b\u6709\uff1a\n\n$$a_0q^{n} \\equiv 0 \\bmod {p}$$\n\n$\\begin{aligned}&\\because \\gcd(p,q)=1 \\\\ &\\therefore p \\mid a_0 \\end{aligned}$\n\n\u5728\u6a21 $q$ \u610f\u4e49\u4e0b\u6709\uff1a\n\n$$a_0p^{n} \\equiv 0 \\bmod {q}$$\n\n$\\begin{aligned}&\\because \\gcd(p,q)=1 \\\\ &\\therefore q \\mid a_n \\end{aligned}$\n\n\u5f53\u7136\u5982\u679c $a_0=0$ \u7684\u8bdd\u9700\u8981\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684 $t$ \u6ee1\u8db3 $a_t \\not= 0$\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u679a\u4e3e $p \\mid a_0, q \\mid a_n$ \u4e86\uff0c\u7136\u540e\u66b4\u529b\u5224\u65ad\u662f\u5426\u53ef\u884c\n\n\u5224\u65ad\u7684\u65b9\u6cd5\u548c [P2312 \u89e3\u65b9\u7a0b](https://www.luogu.org/problemnew/show/P2312) \u8fd9\u9053\u9898\u4e00\u6837\uff0c\u5373\u653e\u5230\u6a21 $mod$ \u5269\u4f59\u7cfb\u4e0b\u5224\u65ad\u662f\u5426\u4e3a $0$\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(\\sqrt a_0 + \\sqrt a_n + \\sigma_0(a_0)\\sigma_0(a_n)\\gcd(\\max(a_0,a_n)))$\n\n---\n\n``` cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\n\nconst int N = 110, mod = 1e9 + 7;\nint n, a[N];\n\nll pw(ll a, ll b) {\n    ll r = 1;\n    for( ; b ; b >>= 1, a = a * a % mod)\n        if(b & 1)\n            r = r * a % mod;\n    return r;\n}\n\nll calc(ll p, ll q) {\n    ll x = p * pw(q, mod - 2) % mod, pro = 1, res = 0;\n    for(int i = 0 ; i <= n ; ++ i) {\n        res = (res + pro * a[i] % mod) % mod;\n        pro = pro * x % mod;\n    }\n    return (res + mod) % mod == 0;\n}\n\nvector<int> split(int x) {\n    x = abs(x);\n    vector<int> res;\n    for(int i = 1 ; i * i <= x ; ++ i)\n        if(x % i == 0) {\n            res.push_back(i);\n            if(i != x / i) res.push_back(x / i);\n        }\n    return res;\n}\n\nint gcd(int a, int b) {\n    return b ? gcd(b, a % b ) : a;\n}\n\nstruct T { ll p, q; };\nvector<T> ans;\nbool cmp(T a, T b) {\n    return a.p * b.q < a.q * b.p;\n}\nbool operator == (T a, T b) {\n    return a.p == b.p && a.q == b.q;\n}\n\nint main() {\n    scanf(\"%d\", &n);\n    for(int i = 0 ; i <= n ; ++ i) scanf(\"%d\", &a[i]);\n    int pos = 0; while(a[pos] == 0) ++ pos;\n    vector<int> P = split(a[pos]),\n                Q = split(a[n]);\n    for(int i = 0 ; i < P.size() ; ++ i) {\n        for(int j = 0 ; j < Q.size() ; ++ j) {\n            int p = P[i], q = Q[j];\n            if(gcd(p, q) == 1) {\n                if(calc(p, q)) ans.push_back((T) { p, q });\n                if(calc(-p, q)) ans.push_back((T) { -p, q });\n            }\n        }\n    } \n    if(calc(0, 1)) ans.push_back((T) { 0, 1 });\n    sort(ans.begin(), ans.end(), cmp);\n    printf(\"%d\\n\", (int) ans.size());\n    for(int i = 0 ; i < ans.size() ; ++ i) {\n        ll p = ans[i].p, q = ans[i].q;\n        if(q == 1) printf(\"%lld\\n\", p);\n        else printf(\"%lld/%lld\\n\", p, q);\n    }\n}\n```",
        "postTime": 1542885873,
        "uid": 47111,
        "name": "nekko",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4598 \u3010[HEOI2012]Akai \u7684\u6570\u5b66\u4f5c\u4e1a\u3011"
    },
    {
        "content": "# Description\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6570\u5217 $a$\uff0c\u6c42 $a_0+a_1x+a_2x^2+\\dots+a_nx^n=0$ \u7684\u6240\u6709\u6709\u7406\u6570\u89e3\u3002\n\n# Solution\n\n\u65e2\u7136\u9898\u76ee\u8981\u6c42\u7684\u662f\u6709\u7406\u6570\u89e3\uff0c\u6211\u4eec\u8003\u8651\u8bbe $x=\\dfrac p q $\uff0c\u5176\u4e2d $p$ \u548c $q$ \u4e92\u8d28\u3002\u90a3\u4e48\u539f\u65b9\u7a0b\u53ef\u5316\u7b80\u4e3a\uff1a\n\n$$a_0 + a_1\\dfrac p q+a_2\\left(\\dfrac p q\\right)^2 + \\dots+a_n\\left(\\dfrac p q\\right)^n=0$$\n\n\u65b9\u7a0b\u4e24\u8fb9\u540c\u4e58 $q^n$\uff0c\u53ef\u5f97\uff1a\n\n$$\\sum_{i=0}^na_ip^iq^{n-i}=0$$\n\n\u8003\u8651\u5728\u6a21 $p$ \u610f\u4e49\u4e0b\uff1a\n\n$$a_0q^n\\equiv0\\bmod p$$\n\n\u7531\u4e8e $p,q$ \u4e92\u8d28\uff0c\u5fc5\u5b9a\u6709 $p\\mid a_0$\u3002\u540c\u7406\uff0c\u5fc5\u5b9a\u6709 $q\\mid a_n$\u3002\u7531\u4e8e\u6700\u4f4e\u9879\u53ef\u80fd\u4e3a $0$\uff0c\u6211\u4eec\u4ee5\u7b2c\u4e00\u4e2a\u4e0d\u4e3a $0$ \u7684\u9879\u4f5c\u4e3a\u57fa\u51c6\uff0c\u679a\u4e3e\u4e92\u8d28\u7684 $p,q$ \uff0c\u5728\u591a\u4e2a\u8d28\u6570\u7684\u6a21\u610f\u4e49\u4e0b\u5224\u65ad\u662f\u5426\u4e3a $0$ \u5373\u53ef\u3002\u6ce8\u610f\u5904\u7406\u8d1f\u6570\u89e3\u7684\u60c5\u51b5\u3002",
        "postTime": 1540089070,
        "uid": 7004,
        "name": "Conical",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4598 \u3010[HEOI2012]Akai \u7684\u6570\u5b66\u4f5c\u4e1a\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u7ed9\u4f60\u4e00\u4e2a\u4e00\u5143 $n$ \u6b21\u65b9\u7a0b\uff0c\u8bf7\u4f60\u6c42\u51fa\u8be5\u65b9\u7a0b\u6240\u6709\u7684\u6709\u7406\u6570\u89e3\u3002\n\n\u6211\u4eec\u8bbe $x=\\dfrac{p}{q}(\\gcd(p,q)=1)$\uff0c\u5219\u539f\u65b9\u7a0b\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a\n$$\\sum_{k=0}^n a_k\\cdot\\dfrac{p^k}{q^k}=0$$\n\u5c06\u4e24\u8fb9\u540c\u65f6\u4e58\u4e0a $q^n$\uff0c\u53ef\u4ee5\u5f97\u5230\uff1a\n$$\\sum_{k=0}^n a_k\\cdot p^k\\cdot q^{n-k}=0$$\n\u6211\u4eec\u53d1\u73b0\u53ea\u6709 $k=0$ \u65f6\u7684\u90a3\u4e00\u9879\u4e0d\u4e00\u5b9a\u4e3a $p$ \u7684\u500d\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5316\u7b80\u5f97\u5230\uff1a\n$$\\sum_{k=0}^n a_k\\cdot p^k\\cdot q^{n-k}\\equiv0\\ (\\bmod\\ p)$$\n$$a_0\\cdot q^n\\equiv0\\ (\\bmod\\ p)$$\n\u800c\u7531\u4e8e $\\gcd(p,q)=1$\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f97\u5230 $p|a_0$\uff0c\u540c\u7406\u6211\u4eec\u4e5f\u53ef\u4ee5\u5f97\u5230 $q|a_n$\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u679a\u4e3e $p$ \u548c $q$ \u66b4\u529b\u5224\u65ad\u5c31\u884c\u4e86\uff0c\u5f53 $a_0=0$ \u7684\u65f6\u5019\u53ea\u8981\u4e0d\u65ad\u5f80\u540e\u79fb\uff0c\u76f4\u5230\u627e\u5230\u7b2c\u4e00\u4e2a\u4e0d\u4e3a $0$ \u7684 $a_i$ \u5c31\u884c\u4e86\uff0c\u6ce8\u610f\u7279\u5224\u89e3\u4e3a $0$ \u7684\u60c5\u51b5\u3002 \n\n\u7531\u4e8e\u4e0a\u5f0f\u52a0\u8d77\u6765\u7684\u8fc7\u7a0b\u4e2d\u53ef\u80fd ```long long``` \u90fd\u5b58\u4e0d\u4e0b\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5c06\u4e0a\u5f0f\u6c42\u548c\u7684\u8fc7\u7a0b\u4e2d\u5bf9\u7b54\u6848\u53d6\u6a21\u4e00\u4e2a\u5927\u8d28\u6570\uff0c\u5982\u679c\u591a\u4e2a\u5927\u8d28\u6570\u53d6\u6a21\u540e\u7684\u7b54\u6848\u90fd\u4e3a $0$\uff0c\u5219\u8be5\u7b54\u6848\u6210\u7acb\u3002\u53ea\u8981\u9009\u62e9\u7684\u6570\u7684\u6700\u5c0f\u516c\u500d\u6570\u5927\u4e8e\u4e0a\u5f0f\u7684\u6700\u5927\u503c\uff0c\u5c31\u4e0d\u4f1a\u5b58\u5728\u7b54\u6848\u4e0d\u4e3a $0$ \u4f46\u662f\u6a21\u5927\u8d28\u6570\u4e3a $0$ \u4e86\uff08\u5176\u5b9e\u672c\u9898\u968f\u4fbf\u9009\u51e0\u4e2a\u8d28\u6570\u5c31\u884c\u4e86\uff0c\u4e5f\u4e0d\u7528\u9009\u90a3\u4e48\u591a\uff09\uff0c\u8bbe\u9009\u7684\u8d28\u6570\u4e2a\u6570\u4e3a $m$\uff0c\u5219\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal{O}(nm\\sigma_0(a_0)\\sigma_0(a_n)\\log(\\max(a_0,a_n)))$\u3002\n\n$\\mathcal{View\\ Code}$\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int N = 105;\nint n, a[N], pr[20], tot;\nstruct node {int p, q;} ans[N];\nvector <int> vp, vq;\ninline bool cmp(node a, node b) {\n\treturn a.p * b.q < a.q * b.p;\n}\nint ksm(int x, int y, int P) {\n\tint res = 1;\n\twhile(y) {\n\t\tif(y & 1) res = res * x % P;\n\t\tx = x * x % P, y >>= 1;\n\t}\n\treturn res;\n}\nbool check(int p, int q) {\n\tfor(int i = 0; i <= 11; i++) {\n\t\tint sum = 0;\n\t\tfor(int k = 0; k <= n; k++)\n\t\t\tsum = (sum + a[k] * ksm(p, k, pr[i]) % pr[i] * ksm(q, n - k, pr[i]) % pr[i] + pr[i]) % pr[i];\n\t\tif(sum != 0) return 0;\t\t\n\t}\n\treturn 1;\n}\n\nsigned main() {\n\tscanf(\"%lld\", &n); for(int i = 0; i <= n; i++) scanf(\"%lld\", &a[i]);\n\tpr[0] = 998244353, pr[1] = 993244353, pr[2] = 993244853;\n\tpr[3] = 998244853, pr[4] = 19260817, pr[5] = 1000000007;\n\tpr[6] = 10000019, pr[7] = 10000079, pr[8] = 10000103;\n\tpr[9] = 100000471, pr[10] = 100000609, pr[11] = 100000687;\n\tint pos = 0; while(a[pos] == 0) pos++;\n\tint a0 = abs(a[pos]), an = abs(a[n]);\n\tfor(int p = 1; p * p <= a0; p++) \n\t\tif(a0 % p == 0) {\n\t\t\tvp.push_back(p);\n\t\t\tif(p != a0 / p) vp.push_back(a0 / p);\n\t\t}\n\tfor(int q = 1; q * q <= an; q++)\n\t\tif(an % q == 0) {\n\t\t\tvq.push_back(q);\n\t\t\tif(q != an / q) vq.push_back(an / q);\n\t\t}\n\tfor(auto p : vp) for(auto q : vq) {\n\t\tif(__gcd(p, q) == 1) {\n\t\t\tif(check(p, q)) ans[++tot] = (node){p, q};\n\t\t\tif(check(-p, q)) ans[++tot] = (node){-p, q};\n\t\t}\n\t}\n\tif(check(0, 1)) ans[++tot] = (node){0, 1};\n\tsort(ans + 1, ans + 1 + tot, cmp);\n\tprintf(\"%lld\\n\", tot);\n\tfor(int i = 1; i <= tot; i++) \n\t\tif(ans[i].q == 1) printf(\"%lld\\n\", ans[i].p);\n\t\telse printf(\"%lld/%lld\\n\", ans[i].p, ans[i].q);\n\treturn 0;\n}\n```\n",
        "postTime": 1614934109,
        "uid": 108610,
        "name": "Dzhao",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4598 [HEOI2012]Akai \u7684\u6570\u5b66\u4f5c\u4e1a"
    }
]
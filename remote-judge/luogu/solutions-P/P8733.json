[
    {
        "content": "### [P8733 \u8865\u7ed9](https://www.luogu.com.cn/problem/P8733)\n#### \u9898\u610f\u7b80\u8ff0\n- \u7ed9\u5b9a $n$ \u4e2a\u70b9\u7684\u5750\u6807\u548c\u6574\u6570 $D$\u3002\n- \u6c42\u4e00\u6761\u8d77\u70b9\u4e3a\u7b2c\u4e00\u4e2a\u70b9\uff0c\u4e0d\u91cd\u4e0d\u6f0f\u5730\u7ecf\u8fc7\u6bcf\u4e00\u4e2a\u70b9\uff0c\u6700\u540e\u56de\u5230\u7b2c\u4e00\u4e2a\u70b9\u4f7f\u5f97\u8def\u5f84\u6700\u5c0f\u3002\n- \u8be5\u8def\u5f84\u4e0a\u7684\u6bcf\u4e00\u6bb5\u8ddd\u79bb\u4e0d\u80fd\u8d85\u8fc7 $D$\u3002\n\n#### \u9898\u76ee\u5206\u6790\n\u8fd9\u4e00\u9898\u4e0e [P1433 \u5403\u5976\u916a](https://www.luogu.com.cn/problem/P1433) \u8fd9\u9898\u4e0d\u540c\u4e4b\u5904\u5c31\u5728\u4e8e\u9650\u5236\u4e86\u6bcf\u4e00\u6761\u8fb9\u7684\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 $D$\uff0c\u8fd9\u4e00\u70b9\u9020\u6210\u7684\u5f71\u54cd\u662f\u4e24\u4e2a\u70b9\u7684\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\u5c31\u6709\u53ef\u80fd\u4e0d\u662f\u5b9e\u9645\u6700\u77ed\u8ddd\u79bb\u4e86\u3002\u4e3a\u4e86\u65b9\u4fbf\u53d9\u8ff0\uff0c\u4e0b\u9762\u7684\u90e8\u5206\u7528 $dis_{x,y}$ \u8868\u793a\u70b9 $x$ \u548c\u70b9 $y$ \u4e4b\u95f4\u7684\u5b9e\u9645\u8ddd\u79bb\u3002\n\n![\u56fe](https://cdn.luogu.com.cn/upload/image_hosting/s668bhym.png)\n\n\u5982\u4e0a\u56fe\u6240\u793a\u3002\u4ee4 $D=4$\uff0c\u6b64\u65f6 $dis_{A,C}$ \u4e0d\u4e3a $AC=3\\sqrt{2}$\uff0c\u800c\u662f $AB+BC=6$\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u89e3\u51b3\u5462\uff1f\n\n\u6ce8\u610f\u5230\uff0c\u6211\u4eec\u662f\u5728\u6c42 $dis_{x,y}$ \u7684\u6700\u5c0f\u503c\uff0c\u4e0d\u96be\u60f3\u5230\u6700\u77ed\u8def\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528 Floyd \u6c42\u5168\u6e90\u6700\u77ed\u8def\u3002\u5bf9\u4e8e\u4efb\u610f\u4e24\u4e2a\u70b9 $x$ \u548c\u70b9 $y$\uff0c\u82e5\u8fd9\u4e24\u70b9\u7684\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\u5927\u4e8e $D$\uff0c\u90a3\u4e48\u4ee4 $dis_{x,y}=\\infty$\uff1b\u5426\u5219\u4ee4 $dis_{x,y}$ \u4e3a\u8fd9\u4e24\u70b9\u7684\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\uff0c\u90a3\u4e48\u95ee\u9898\u5c31\u53ef\u4ee5\u8fce\u5203\u800c\u89e3\u4e86\u3002\n\n\u4e3a\u4ec0\u4e48\u4e0a\u8ff0\u5904\u7406\u5c31\u53ef\u4ee5\u89e3\u51b3\u5462\uff1f\u56e0\u4e3a $\\infty$ \u8868\u793a\u8be5\u8fb9\u8fc7\u4e0d\u53bb\uff0c\u53ea\u80fd\u7531\u5176\u4ed6\u7684\u70b9\u8dd1\u8fc7\u53bb\uff0c\u4e5f\u6b63\u597d\u89e3\u51b3\u4e86 $D$ \u7684\u9650\u5236\u8fd9\u4e00\u95ee\u9898\u4e86\u3002\n\n\u5269\u4e0b\u7684\u5c31\u7b80\u5355\u4e86\uff0c\u60f3\u5fc5\u5927\u5bb6\u90fd\u5df2\u7ecf\u4f1a\u72b6\u538b DP \u4e86\uff0c\u8be6\u7ec6\u89c1\u4ee3\u7801\u3002\n#### \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 20, inf = 1e9;\nint n, d;\ndouble ans = inf, x[N], y[N], f[1<<N][N], dis[N][N];\nint main() {\n\tcin >> n >> d;\n\tfor (int i = 0; i < n; ++i) cin >> x[i] >> y[i];\n\tfor (int i = 0; i < n; ++i)\n\t\tfor (int j = 0; j < n; ++j) {\n\t\t\tdouble dist = sqrt((x[i]-x[j])*(x[i]-x[j])+(y[i]-y[j])*(y[i]-y[j]));//\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb \n\t\t\tif (dist > d) dis[i][j] = inf;//\u4e0d\u8ba9\u8be5\u8fb9\u8fc7\u53bb \n\t\t\telse dis[i][j] = dist;\n\t\t}\n\tfor (int k = 0; k < n; ++k)//Floyd \u6700\u77ed\u8def \n\t\tfor (int i = 0; i < n; ++i)\n\t\t\tfor (int j = 0; j < n; ++j)\n\t\t\t\tdis[i][j] = min(dis[i][j], dis[i][k]+dis[k][j]);\n\tmemset(f, 0x7f, sizeof(f)), f[1][0] = 0;//\u521d\u59cb\u5316 \n\tfor (int i = 1; i < 1<<n; ++i)//\u9636\u6bb5 \n\t\tfor (int j = 0; j < n; ++j) if (i>>j&1)\n\t\t\tfor (int k = 0; k < n; ++k) if ((i^1<<j)>>k&1)//\u72b6\u6001 \n\t\t\t\tf[i][j] = min(f[i][j], f[i^1<<j][k]+dis[k][j]);//\u8f6c\u79fb \n\tfor (int i = 0; i < n; ++i) ans = min(ans, f[(1<<n)-1][i]+dis[i][0]);//\u6ce8\u610f\u9898\u610f\u8981\u6c42\u56de\u5230\u7b2c\u4e00\u4e2a\u70b9 \n\tprintf(\"%.2lf\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1685197065,
        "uid": 670046,
        "name": "123wwm",
        "ccfLevel": 0,
        "title": "P8733 \u8865\u7ed9"
    },
    {
        "content": "## \u524d\u7f6e\u77e5\u8bc6\n\n[\u72b6\u538bDP](https://oi-wiki.org/dp/state/)\n\n[Floyd\u6700\u77ed\u8def](https://oi-wiki.org/graph/shortest-path/)\n\n## \u601d\u8def\n\n\u72b6\u538b DP \u6a21\u677f\u9898\u3002\n\n\u9996\u5148\uff0c\u5bf9\u4e8e\u6bcf\u4e24\u4e2a\u70b9\u8fde\u8fb9\uff0c\u82e5\u8fb9\u957f\u5927\u4e8e $D$\uff0c\u5219\u4ee4\u8fb9\u957f\u4e3a\u65e0\u7a77\u5927\u3002\n\n\u5bf9\u8fb9\u8fdb\u884c Floyd \u6700\u77ed\u8def\u3002\n\n\u7136\u540e\u5f00\u59cb\u72b6\u538b DP\u3002\n\n\u4ee4 $f_{i,j}$ \u8868\u793a\u7ecf\u8fc7\u6751\u5e84\u72b6\u6001\u4e3a $i$\uff0c\u76ee\u524d\u4f4d\u4e8e\u6751\u5e84 $j$ \u65f6\u6240\u98de\u7684\u8ddd\u79bb\u3002\n\n\u5176\u4e2d $i$ \u7684\u4e8c\u8fdb\u5236\u7684\u7b2c $k$ \u4f4d\u8868\u793a\u7b2c $k$ \u4e2a\u6751\u5e84\u662f\u5426\u5df2\u5230\u8fbe\uff0c$1$ \u4e3a\u5230\u8fbe\u8fc7\uff0c$0$ \u4e3a\u672a\u5230\u8fbe\u8fc7\u3002\n\n\u679a\u4e3e $k$\uff0c$k$ \u5fc5\u987b\u5df2\u5230\u8fbe\u8fc7\uff0c\u5219 $f_{i,j}=\\max(f_{i \\oplus 2^{j-1},k}+a_{j,k},f_{i,j})$\u3002\n\n$i \\oplus 2^{j-1}$ \u8868\u793a\u5c06 $i$ \u7684\u7b2c $j$ \u7684\u4e3a\u53d8\u4e3a $0$\u3002\n\n\u6700\u540e\u7b54\u6848\u4e3a $1$ \u5230 $n$ \u4e2d\u6700\u5c0f\u7684 $f_{2^n-1,i}+a_{1,i}$\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=21,N2=(1<<20)+10,inf=2e9;\nint n,d,x[N],y[N];\ndouble ans,a[N][N],f[N2][N];\ndouble get_dis(int x1,int y1,int x2,int y2)\n{\n\tdouble ret;\n\tret=(x1-x2)*(x1-x2)+(y1-y2)*(y1-y2);\n\tret=(double)sqrt(ret);\n\tif(ret>d)\n\t{\n\t\treturn inf;\n\t}\n\treturn ret;\n}\nint main()\n{\n\tcin>>n>>d;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>x[i]>>y[i];\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\ta[i][j]=get_dis(x[i],y[i],x[j],y[j]);\n\t\t}\n\t}\n\tfor(int k=1;k<=n;k++)\n\t{\n\t\tfor(int i=1;i<=n;i++)\n\t\t{\n\t\t\tfor(int j=1;j<=n;j++)\n\t\t\t{\n\t\t\t\ta[i][j]=min(a[i][j],a[i][k]+a[k][j]);\n\t\t\t}\n\t\t}\n\t}\n\tf[1][1]=0;\n\tfor(int i=2;i<(1<<n);i++)\n\t{\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tf[i][j]=inf;\n\t\t\tif(!(i&(1<<(j-1))))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor(int k=1;k<=n;k++)\n\t\t\t{\n\t\t\t\tif(k==j)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(!(i&(1<<(k-1))))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tf[i][j]=min(f[i^(1<<(j-1))][k]+a[k][j],f[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\tans=inf;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tans=min(ans,f[(1<<n)-1][i]+a[1][i]);\n\t}\n\tprintf(\"%.2lf\",ans);\n}\n```\n",
        "postTime": 1682929807,
        "uid": 310581,
        "name": "ethan090328",
        "ccfLevel": 5,
        "title": "P8733\u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P8733)\u3002\n\n## Solution\n\u53ef\u4ee5\u5148\u5904\u7406\u6bcf\u4e24\u4e2a\u70b9\u4e4b\u95f4\u7684\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\u3002\u5728\u672c\u9898\u91cc\uff0c\u7531\u4e8e\u4e0d\u80fd\u8fde\u7eed\u98de\u884c\u8d85\u8fc7 $D$\uff0c\u6240\u4ee5\u5c06\u8ddd\u79bb\u5927\u4e8e $D$ \u7684\u4e24\u70b9\u7684\u8ddd\u79bb\u7f6e\u4e3a\u65e0\u7a77\u5927\u3002\u8dd1\u4e00\u904d floyd \u5168\u6e90\u6700\u77ed\u8def\u3002\n\n\u9274\u4e8e $n \\le 20$ \u8fd9\u4e00\u6570\u636e\u89c4\u6a21\uff0c\u60f3\u5230\u7528\u72b6\u538b dp \u6765\u5f97\u5230\u7ecf\u8fc7\u67d0\u4e9b\u70b9\u65f6\u7684\u6700\u77ed\u8ddd\u79bb\uff08\u4e0d\u5305\u62ec\u8fd4\u56de\u603b\u90e8\u7684\u8def\u7a0b\uff09\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u8bbe\u4e8c\u8fdb\u5236\u6570 $S$ \u7684\u67d0\u4e00\u4f4d\u4e3a $0/1$ \u8868\u793a\u662f\u5426\u7ecf\u8fc7\u4e86\u8be5\u70b9\u3002\u5b9a\u4e49\u72b6\u6001 $f_{S,i}$ \u4e3a\u7ecf\u8fc7\u6751\u5e84\u96c6\u5408\u4e3a $S$\uff0c\u4e14\u5f53\u524d\u98de\u673a\u5728\u70b9 $i$ \u7684\u6700\u77ed\u8ddd\u79bb\u3002\u72b6\u6001\u8f6c\u79fb\u89c1\u4ee3\u7801\u3002\n\n\u4e4b\u540e\u679a\u4e3e\u6700\u7ec8\u72b6\u6001\u7684\u6bcf\u4e00\u4e2a\u843d\u70b9 $i$\uff0c\u5219\u7b54\u6848\u5c31\u662f $f_{2^n-1,i}+dis_{i,1}$ \u4e2d\u7684\u6700\u5c0f\u503c\uff08$dis_{i,j}$ \u8868\u793a\u70b9 $i$ \u5230 $j$ \u7684\u6700\u77ed\u8def\u957f\u5ea6\uff09\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define db double\n#define il inline\nusing namespace std;\nconst int N=25;\nconst int S=1<<20;\nconst db inf=1e9+7;\n\nil int wrd(){\n\tint x=0,f=1; char c=getchar();\n\twhile(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\n\twhile(isdigit(c)){x=x*10+c-48;c=getchar();}\n\treturn x*f;\n}\n\nint n,k;\n\nstruct Point{\n\tint x,y;\n}a[N];\n\ndb d[N][N],dp[S][N],ans=inf;\n\n#define px db(p.x)\n#define py db(p.y)\n#define qx db(q.x)\n#define qy db(q.y)\n\ndb dis(Point p,Point q){\n\tdb ans=sqrt((px-qx)*(px-qx)+(py-qy)*(py-qy));\n\treturn ans>(db)k ? inf : ans;\n}\n\nmain(){\n\tn=wrd(),k=wrd();\n\tfor(int i=1;i<=n;++i) a[i]=Point{wrd(),wrd()};\n\tfor(int i=1;i<=n;++i) for(int j=1;j<=n;++j) d[i][j]=dis(a[i],a[j]);\n\t\n\tfor(int k=1;k<=n;++k)\n\t\tfor(int i=1;i<=n;++i) \n\t\t\tfor(int j=1;j<=n;++j)\n\t\t\t\td[i][j]=min(d[i][j],d[i][k]+d[k][j]);\n\t\n\tfor(int i=2;i<(1<<n);++i){\n\t\tfor(int u=0;u<n;++u){\n\t\t\tdp[i][u]=inf;\n\t\t\tif((i>>u)&1){\n\t\t\t\tfor(int v=0;v<n;++v){\n\t\t\t\t\tif(u==v) continue;\n\t\t\t\t\tif((i>>v)&1) dp[i][u]=min(dp[i][u],dp[i^(1<<u)][v]+d[v+1][u+1]);  //\u7531\u4e8e\u6570\u4f4d\u4ece 0 \u5f00\u59cb\uff0c\u70b9\u4ece 1 \u5f00\u59cb\u7f16\u53f7\uff0c\u6240\u4ee5\u8981\u52a0 1\u3002\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfor(int i=0;i<n;++i) ans=min(ans,dp[(1<<n)-1][i]+d[i+1][1]);\n\treturn printf(\"%.2lf\",ans),0;\n}\n```",
        "postTime": 1682153513,
        "uid": 722253,
        "name": "cppcppcpp3",
        "ccfLevel": 0,
        "title": "P8733 \u9898\u89e3"
    },
    {
        "content": "floyd \u9884\u5904\u7406\u4e24\u70b9\u95f4\u6700\u77ed\u8def\uff0c\u518d\u72b6\u538b dp \u6c42\u51fa\u4e00\u6761\u8d77\u70b9\u4e3a $1$ \u53f7\u70b9\u4e14\u7ecf\u8fc7\u6240\u6709\u70b9\u7684\u8def\u5f84\u7684\u6700\u4e0b\u957f\u5ea6\u3002\u7531\u4e8e\u6700\u7ec8\u9700\u8981\u56de\u5230\u603b\u90e8\uff0c\u56e0\u6b64\u4ee5 $i$ \u4e3a\u7ec8\u70b9\u8fd9\u6837\u7684\u8def\u5f84\u7684\u957f\u5ea6\u52a0\u4e0a $i$ \u5230 $1$ \u7684\u8ddd\u79bb\u5373\u4e3a\u7b54\u6848\uff0c\u53d6 min \u5373\u53ef\u3002\n\n```cpp\nint main() {\n    dR(int, n, m);\n    std::vector<int> x(n), y(n);\n    for (int i = 0; i < n; i++)\n        io.read(x[i], y[i]);\n    std::vector e(n, std::vector(n, 1e12));\n    for (int i = 0; i < n; i++)\n        for (int j = 0; j < n; j++)\n            if (double t = std::hypot(x[i] - x[j], y[i] - y[j]); t <= m)\n                e[i][j] = t;\n    for (int k = 0; k < n; k++)\n        for (int i = 0; i < n; i++)\n            for (int j = 0; j < n; j++)\n                chkmin(e[i][j], e[i][k] + e[k][j]);\n    std::vector d(1 << n, std::vector(n, 1e12));\n    d[1][0] = 0;\n    for (int S = 0; S < (1 << n); S++)\n        for (int i = 0; i < n; i++)\n            if (S & (1 << i))\n                for (int j = 0; j < n; j++)\n                    if (~S & (1 << j))\n                        chkmin(d[S | (1 << j)][j], d[S][i] + e[i][j]);\n    for (int i = 0; i < n; i++)\n        d.back()[i] += e[i][0]; // \u52a0\u4e0a i \u5230 1 \u53f7\u70b9\u7684\u8ddd\u79bb\n    io.setprecision(2);\n    writeln(min(d.back()));\n    return 0;\n}\n```",
        "postTime": 1677133129,
        "uid": 84282,
        "name": "andyli",
        "ccfLevel": 7,
        "title": "P8733 [\u84dd\u6865\u676f 2020 \u56fd C] \u8865\u7ed9 \u9898\u89e3"
    }
]
[
    {
        "content": "## \u4e00\u3001\u89e3\u9898\u601d\u8def\n\n\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u9898\u76ee\u9700\u8981\u6211\u4eec\u6c42\u7684\u7b54\u6848\u6765\u63a8\u51fa\u8fd9\u9053\u9898\u53ef\u4ee5\u7528\u4e00\u79cd\u524d\u7f00\u548c\u7684\u65b9\u5f0f\u505a\u3002\u6211\u4eec\u9700\u8981\u77e5\u9053\u4e00\u6761\u5f0f\u5b50 $\\bigoplus_{i=l}^r x_i=\\bigoplus_{i=1}^r x_i\\bigoplus_{i=1}^{l-1} x_i$\u3002\u8fd9\u4e2a\u53ef\u4ee5\u6839\u636e\u5f02\u6216\u7684\u6027\u8d28\u63a8\u51fa\u6765\u3002\n\n\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u9884\u5904\u7406\u51fa $x_i$\uff0c\u518d\u5904\u7406\u51fa\u5f02\u6216\u524d\u7f00\u548c $xr_i=\\bigoplus_{j=1}^{i} x_j$\u3002\u90a3\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u7528 $O(\\max(r_i))$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u505a\u51fa\u8fd9\u9053\u9898\u3002\u5373\u5bf9\u4e8e $l_i,r_i$ \u7684\u7b54\u6848\u4e3a $xr_{r_i}\\bigoplus xr_{l_i-1}$.\n\n\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u6570\u636e\u8303\u56f4\u4e2d $l_i\\le r_i \\le 10^{18}$\u3002\u90a3\u6211\u4eec\u5c31\u77e5\u9053\u80af\u5b9a\u4e0d\u53ef\u80fd\u7528\u9884\u5904\u7406\u51fa $x_i$ \u7684\u65b9\u6cd5\u505a\u8fd9\u9053\u9898\u3002\n\n\u6211\u4eec\u53c8\u53ef\u4ee5\u63a8\u51fa\u4ec0\u4e48\u5462\uff1f\n\n\u56e0\u4e3a $x_n=\\bigoplus_{i=n-1}^{n-K} x_i$\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f97\u5230 $x_n=xr_{n-1} \\bigoplus xr_{n-K-1}$\uff0c\u53c8\u53ef\u4ee5\u63a8\u51fa $xr_n=xr_{n-1} \\bigoplus x_n=xr_{n-1} \\bigoplus xr_{n-1} \\bigoplus xr_{n-K-1}=xr_{n-K-1}$\u3002\n\n\u53c8\u56e0\u4e3a\u6211\u4eec\u7684\u7b54\u6848\u53ef\u4ee5\u4ece $xr$ \u4e2d\u76f4\u63a5\u5f97\u5230\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u53ef\u4ee5\u7528 $O(1)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u6c42\u51fa\u6bcf\u4e00\u6b21\u8be2\u95ee\u3002\u6bcf\u4e00\u6b21\u8be2\u95ee\u7684\u7b54\u6848\u4e3a $xr_{(r_i-1)\\bmod(k+1)+1} \\bigoplus xr_{(l_i-1)\\bmod(k+1)}$\u3002\n\n## \u4e8c\u3001\u89e3\u9898\u4ee3\u7801\n\n```cpp\n#include<cstdio>\ntypedef long long ll;\nint k,q;\nll a[100005],x[100005],xr[100005];\nll l,r;\nint main(){\n\tscanf(\"%d\",&k);\n\tfor(int i=1;i<=k;++i){\n\t\tscanf(\"%lld\",a+i);\n\t\tx[i]=a[i];\n\t\txr[i]=xr[i-1]^x[i];\n\t}\n\tscanf(\"%d\",&q);\n\tfor(int i=1;i<=q;++i){\n\t\tscanf(\"%lld%lld\",&l,&r);\n\t\tl--;\n\t\tll g1=l/(k+1),g2=r/(k+1);\n\t\tl-=g1*(k+1),r-=g2*(k+1);\n\t\twhile(l>k)\n\t\t\tl-=k+1;\n\t\twhile(r>k)\n\t\t\tr-=k+1;\n\t\tprintf(\"%lld\\n\",xr[r]^xr[l]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1642671256,
        "uid": 389192,
        "name": "andychen_2012",
        "ccfLevel": 5,
        "title": "P8034 [COCI2015-2016#7] Ozljeda\u9898\u89e3"
    }
]
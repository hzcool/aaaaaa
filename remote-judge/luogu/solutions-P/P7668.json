[
    {
        "content": "## Solution\n\u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u4e2a\u7b26\u5408\u8981\u6c42\u7684\u56e2\u5b50\u8bb0\u5f55\u5728\u4e2d\u95f4\u90a3\u4e2a `G` \u4e2d\uff0c\u90a3\u4e48\u4e24\u4e2a\u56e2\u5b50\u53ef\u80fd\u51b2\u7a81\uff0c\u53ea\u6709\u53ef\u80fd\u5f53\u524d `G` \u7ad6\u7740\u53ef\u4ee5\u6a2a\u7740\u4e5f\u53ef\u4ee5\uff0c\u6216\u8005\u8bf4\u4e24\u4e2a\u6216\u591a\u4e2a `G` \u5728\u540c\u4e00\u6761 \u53f3\u4e0a-\u5de6\u4e0b \u7684\u5bf9\u89d2\u7ebf\u4e0a\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1yd4iwwa.png?x-oss-process=image/resize,m_lfit,h_500,w_500)\n\n\u5982\u56fe\uff0c\u53ea\u6709\u8fd9\u4e24\u79cd\u60c5\u51b5\u4f1a\u51b2\u7a81\uff0c\u5f53\u7136\u4e24\u79cd\u60c5\u51b5\u4e5f\u6709\u53ef\u80fd\u91cd\u53e0\u3002\n\n\u4e8e\u662f\u6211\u4eec\u628a\u6240\u6709\u7b26\u5408\u8981\u6c42\u7684 \u53f3\u4e0a-\u5de6\u4e0b \u5bf9\u89d2\u7ebf\u7684\u6240\u6709 `G` \u5168\u62a0\u51fa\u6765\u505a dp\uff0c\u6700\u540e\u5408\u5e76\u7b54\u6848\u5373\u53ef\u3002\n\n\u8bbe $f(i,0/1/2)$ \u8868\u793a\u6bcf\u4e2a `G` \u4e0d\u9009\u3001\u6a2a\u9009\u3001\u7ad6\u9009\uff0c\u7ebf\u6027\u505a\u4e00\u904d\u5c31\u6ca1\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(nm)$\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define pb push_back\n#define mkp make_pair\n#define fi first\n#define se second\nusing ll=long long;\nusing pii=pair<int,int>;\nusing pll=pair<ll,ll>;\nusing ull=unsigned long long;\ninline void read(int &x){\n  char ch=getchar();\n  int r=0,w=1;\n  while(!isdigit(ch))w=ch=='-'?-1:1,ch=getchar();\n  while(isdigit(ch))r=(r<<1)+(r<<3)+(ch^48),ch=getchar();\n  x=r*w;\n}\nconst int N=3007,inf=1e9;\nint n,m,f[N][3],tot,ans;\nchar c[N][N];\nstruct node{\n  bool ok1,ok2;\n}a[N][N],b[N];\nbool used[N][N];\nint dp(int n){\n  for(int i=1;i<=n;i++)f[i][0]=f[i][1]=f[i][2]=-inf;\n  f[1][0]=0;f[1][1]=b[1].ok1?1:-inf;f[1][2]=b[1].ok2?1:-inf;\n  for(int i=2;i<=n;i++){\n    f[i][0]=max({f[i-1][0],f[i-1][1],f[i-1][2]});\n    if(b[i].ok1)f[i][1]=max(f[i-1][0],f[i-1][1])+1;\n    if(b[i].ok2)f[i][2]=max(f[i-1][0],f[i-1][2])+1;\n  }\n  return max({f[n][0],f[n][1],f[n][2]});\n}\nint main(){\n  read(n);read(m);\n  for(int i=1;i<=n;i++)scanf(\"%s\",c[i]+1);\n  for(int i=1;i<=n;i++)for(int j=1;j<=m;j++){\n    if(c[i][j]=='G'&&c[i][j-1]=='R'&&c[i][j+1]=='W')a[i][j].ok1=1;\n    if(c[i][j]=='G'&&c[i-1][j]=='R'&&c[i+1][j]=='W')a[i][j].ok2=1;\n  }\n  for(int i=1;i<=n;i++)for(int j=1;j<=m;j++){\n    tot=0;\n    int x=i,y=j;\n    while((a[x][y].ok1||a[x][y].ok2)&&x>0&&x<=n&&y>0&&y<=m&&!used[x][y])\n      b[++tot]=a[x][y],used[x][y]=1,x++,y--;\n    if(tot)ans+=dp(tot);\n  }\n  cout<<ans;\n  return 0;\n}\n```",
        "postTime": 1676088274,
        "uid": 415256,
        "name": "Epoch_L",
        "ccfLevel": 5,
        "title": "P7668 [JOI2018] Dango Maker"
    },
    {
        "content": "JOISC 2020 \u6709\u4e00\u4e2a\u56e2\u5b50\u63d0\u4ea4\u9898\u662f\u4e2a\u52a0\u5f3a\u7248\uff0c\u53ef\u4ee5\u770b\u4e0b\u3002\n\n\u5982\u679c\u6211\u4eec\u5c06\u53ef\u4ee5\u5f97\u56e2\u5b50\u5f97\u5730\u65b9\u770b\u6210\u4e00\u4e2a\u70b9\uff0c\u5982\u679c\u4e24\u4e2a\u56e2\u5b50\u6709\u4ea4\u70b9\uff0c\u5219\u8fde\u8fb9\uff0c\u6211\u4eec\u8981\u6c42\u5f97\u5c31\u662f\u6700\u5927\u72ec\u7acb\u96c6\u3002\n\n\u7531\u4e8e\u53ea\u6709\u6a2a\u7ad6\u56e2\u5b50\u4e4b\u95f4\u6709\u8fb9\uff0c\u6240\u4ee5\u662f\u4e8c\u5206\u56fe\uff0c\u76f4\u63a5\u8dd1\u6700\u5927\u5339\u914d\u5373\u53ef\u3002\u4e0d\u77e5\u9053\u65f6\u95f4\u662f\u5426\u5361\u7684\u8fc7\u53bb\uff0c\u6ca1\u6709\u8bd5\u3002\n\n\u4f46\u662f\u89c2\u5bdf\u4e00\u4e0b\u53d1\u73b0\u76f8\u4ea4\u53ea\u6709\u4e09\u79cd\u60c5\u51b5\u3002\n\n```\nRGW   R     R\nG    RGW    G\nW     W   RGW\n```\n\n\u76f8\u4ea4\u7684\u56e2\u5b50 ``R`` \u5728\u540c\u4e00\u6761\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u4e0d\u5728\u4e00\u6761\u5bf9\u89d2\u7ebf\u4e0a\u7684\u4e92\u4e0d\u5f71\u54cd\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c06\u6240\u6709\u76f8\u540c\u5bf9\u89d2\u7ebf\u4e0a\u7684\u56e2\u5b50\u62ce\u51fa\u6765\u8dd1\u7ebf\u6027 $\\rm DP$ \u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define pre(i,a,b) for(int i=a;i>=b;i--)\n#define N 3005\nusing namespace std;\nint n,m;char s[N][N];\ninline bool check(int x,int y,int op){\n\tif(!op)return s[x][y]=='R'&&s[x][y+1]=='G'&&s[x][y+2]=='W';\n\treturn s[x][y]=='R'&&s[x+1][y]=='G'&&s[x+2][y]=='W';\n}\nint f[N][3][3];\ninline void ck(int &x,int y){if(y>x)x=y;}\nint main(){\n\tscanf(\"%d%d\",&n,&m);int ans = 0;\n\trep(i,1,n)scanf(\"%s\",s[i] + 1);\n\trep(i, 2, n + m - 2){\n\t\tint l = max(1, i - m), r = min(n, i - 1);\n\t\tmemset(f,0xcf,sizeof(f));\n\t\tf[0][0][0] = 0;\n\t\trep(j, l, r){\n\t\t\tif(check(j, i - j, 1))rep(p,0,2)rep(q,0,2)\n\t\t\t\tck(f[j - l + 1][2][q], f[j - l][q][p] + 1);\n\t\t\tif(check(j ,i - j, 0))rep(p,0,1)rep(q,0,1)\n\t\t\t\tck(f[j - l + 1][1][q], f[j - l][q][p] + 1);\n\t\t\trep(p,0,2)rep(q,0,2)ck(f[j - l + 1][0][q], f[j - l][q][p]);\n\t\t}\n\t\tint cur = 0;\n\t\trep(p,0,2)rep(q,0,2)ck(cur, f[r - l + 1][p][q]);\n\t\tans += cur;\n\t}\n\tprintf(\"%d\\n\",ans);return 0;\n}\n```",
        "postTime": 1625058180,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011[JOI2018] Dango Maker"
    },
    {
        "content": "## Description\n\n[link](https://www.luogu.com.cn/problem/P7668)\n\n## Solution\n\n\u5982\u679c\u4e24\u4e2a\u56e2\u5b50\u91cd\u5408\u80af\u5b9a\u662f\u4e0b\u9762\u4e09\u79cd\u60c5\u51b5\uff1a\n\n```\n  R          RGW          R\n  G          G           RGW\nRGW          W            W\n```\n\n\u6211\u4eec\u4f1a\u53d1\u73b0\u4e24\u4e2a\u91cd\u5408\u56e2\u5b50\u7684 `G` \u4e00\u5b9a\u662f\u5728\u4ece\u53f3\u4e0a\u5230\u5de6\u4e0b\u7684\u5bf9\u89d2\u7ebf\u4e0a\u7684\uff0c\u4e14\u8ddd\u79bb\u5c0f\u4e8e\u7b49\u4e8e $1$\u3002\u6839\u636e\u8fd9\u4e2a\u6027\u8d28\u5c31\u53ef\u4ee5\u53d1\u73b0\u4efb\u610f\u4e24\u4e2a\u5bf9\u89d2\u7ebf\u4e0a\u7684\u56e2\u5b50\u80af\u5b9a\u4e92\u4e0d\u5f71\u54cd\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5bf9\u89d2\u7ebf\u8fdb\u884c dp \u5373\u53ef\u3002\n\n\u5176\u4e2d $f[i][0/1/2]$ \u8868\u793a\u5f53\u524d\u5bf9\u89d2\u7ebf\u4e0a\u524d $i$ \u884c\uff0c\u7b2c $i$ \u884c\u7684\u56e2\u5b50 \u4e0d\u653e/\u6a2a\u653e/\u7ad6\u653e \u7684\u6700\u5927\u56e2\u5b50\u6570\uff0c\u4f9d\u6b21\u9012\u63a8\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(nm)$\uff0c\u540a\u6253\u4e8c\u5206\u56fe\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\n\n#ifdef ORZXKR\n#include <debug.h>\n#else\n#define debug(...) 1\n#endif\n\n#define file(s) freopen(s\".in\", \"r\", stdin), freopen(s\".out\", \"w\", stdout)\n\nusing namespace std;\n\nint read() {\n  int x = 0, f = 0; char ch = getchar();\n  while (ch < '0' || ch > '9') f |= ch == '-', ch = getchar();\n  while (ch >= '0' && ch <= '9') x = (x * 10) + (ch ^ 48), ch = getchar();\n  return f ? -x : x;\n}\n\nconst int kMaxN = 3005;\n\nint n, m, ans;\nint f[kMaxN][3]; // 0/1/2 : \u4e0d\u653e/\u6a2a\u653e/\u7ad6\u653e\nchar s[kMaxN][kMaxN];\n\nint main() {\n  scanf(\"%d%d\", &n, &m);\n  for (int i = 1; i <= n; ++i) {\n    scanf(\"%s\", s[i] + 1);\n  }\n  for (int sm = 2; sm <= n + m; ++sm) {\n    memset(f, 0, sizeof(f));\n    int tmp = 0;\n    for (int i = max(1, sm - m), j = sm - i; i <= n && j; ++i, --j) {\n      f[i][0] = max({f[i - 1][0], f[i - 1][1], f[i - 1][2]});\n      if (s[i][j] == 'G') {\n        if (s[i - 1][j] == 'R' && s[i + 1][j] == 'W') \n          f[i][1] = max(f[i][1], max(f[i - 1][0], f[i - 1][1]) + 1);\n        if (s[i][j - 1] == 'R' && s[i][j + 1] == 'W')\n          f[i][2] = max(f[i][2], max(f[i - 1][0], f[i - 1][2]) + 1);\n      }\n      tmp = max(tmp, max({f[i][0], f[i][1], f[i][2]}));\n    }\n    ans += tmp;\n  }\n  printf(\"%d\\n\", ans);\n  return 0;\n}\n```",
        "postTime": 1665140372,
        "uid": 176843,
        "name": "Scarab",
        "ccfLevel": 0,
        "title": "[JOI2018] Dango Maker \u9898\u89e3"
    }
]
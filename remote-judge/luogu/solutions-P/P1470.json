[
    {
        "content": "\u6b63\u5982\u524d\u8f88\u4eec\u6240\u8bf4\u7684\uff0c\u8fd9\u662f\u9053dp\u9898\uff0cdp\u7684\u662f\u72b6\u6001\uff0c\u5982\u679c\u5f53\u524d\u7684\u5b57\u7b26\u4e32\u4ece\u540e\u5f80\u524d\u622a\u4e86\u6709\u4e00\u6bb5\u96c6\u5408\u4e2d\u7684\u4e32\u4e14\u622a\u53bb\u8fd9\u6bb5\u4e32\u540e\u7684\u5b57\u4e32\u662f\u5408\u6cd5\u7684\u8bdd\u90a3\u4e48\u5f53\u524d\u4e32\u4e5f\u662f\u5408\u6cd5\u7684\uff0c\u4e4b\u524d\u7684\u5927\u4f6c\u5df2\u8bf4\u8fc7\u4e86\uff0c\u6240\u4ee5\u6211\u518d\u6b21\u4ecb\u7ecd\u4e00\u79cd\u4f18\u5316\u65b9\u6cd5\uff08\u7ecf\u8fc7\u6211\u7684\u8001\u5e08\u63d0\u9192\uff09\uff0c\u90a3\u5c31\u662f\u7528STL\u4e2d\u7684set(\u96c6\u5408~~\u611f\u89c9\u9898\u76ee\u4e2d\u5df2\u7ecf\u63d0\u793a\u4e86~~\uff09\uff0c\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u628a\u5b50\u4e32\u4e0e\u6240\u6709\u96c6\u5408\u91cc\u7684\u4e32\u4f5c\u6bd4\u8f83\uff0c\u53ea\u6709\u6bd4\u8f83\u8ddf\u4ed6\u957f\u5ea6\u76f8\u7b49\u7684\u5c31\u884c\u4e86,set\u91cc\u9762\u662f\u4e00\u68f5\u5e73\u8861\u6811\u53ea\u9700logn\u7684\u65f6\u95f4\u5c31\u53ef\u4ee5\u627e\u5230\u8981\u6c42\u7684\u4e1c\u897f\n\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u4e0a\u4ee3\u7801\uff0c\u4ee3\u7801\u91cc\u4e5f\u6709\u6ce8\u91ca\u3002\n```cpp\n#include <iostream>\n#include <set>\n#include <cstring>\nusing namespace std;\nint dp[200005],m;\nset<string> s[20];\nint main(){\n\tstring tp;\n\twhile (cin>>tp){\n\t\tif (tp==\".\") break;\n\t\ts[tp.size()].insert(tp);//\u5b58\u5230\u4ed6\u5927\u5c0f\u7684\u96c6\u5408\u4e2d \n\t\tm=max(m,int(tp.size()));\n\t}\n\tint i,ans=0;\n\tdp[0]=1;//\u521d\u59cb\u5316 \n\tstring n;\n\tn=\" \";\n\twhile (cin>>tp){\n\t\tn=n+tp;//\u5c06\u6240\u6709\u7684\u4e32\u5408\u6210\u4e00\u4e2a \n\t}\n\tfor (i=1;i<n.size();i++){//\u679a\u4e3e\u5b50\u4e32 \n\t\tfor (int j=min(i,m);j>=1;j--){\n\t\t\tstring tt=n.substr(i-j+1,j);//\u622a\u9664\u5b50\u4e32 \n\t\t\tif (s[tt.size()].count(tt)==1&&dp[i-j]==1){//\u5982\u679c\u5408\u6cd5 \n\t\t\t\tans=i;//\u5fc5\u5b9a\u662f\u6700\u5927\u7684 \n\t\t\t\tdp[i]=1;//\u672c\u8eab\u4e5f\u5408\u6cd5 \n\t\t\t\tbreak;//\u6ca1\u5fc5\u8981\u641c\u4e0b\u53bb\u4e86 \n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans;\n}\n```",
        "postTime": 1546155036,
        "uid": 122077,
        "name": "momo5440",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "### \u8fd9\u662f\u4e00\u9053DP\u7684\u9898\u76ee\n#### \u5206\u6790\n\n\u5728\u6837\u4f8b\u4e2d\uff0cS\u80fd\u591f\u7ec4\u6210\u7684P\u4e2d\u7684\u5143\u7d20\u7684\u6700\u957f\u524d\u7f00\u4e3a11\u4e2a\u5b57\u7b26\uff0c\u5373\u4e3aA+BA+BA+CA+BA+AB.\u7528f[i]\u8868\u793a\u524di\u4e2a\u5b57\u7b26\u662f\u5426\u53ef\u4ee5\u5206\u89e3\u4e3a\u96c6\u5408\u4e2d\u7684\u5b57\u7b26\uff0c\u5982\u94a9\u53ef\u4ee5\u5c31\u4e3a\u771f\uff0c\u4e0d\u53ef\u4ee5\u5c31\u4e3a\u5047\u3002\u5219\u5f88\u5bb9\u6613\u770b\u51fa\uff1af[i]\u7684\u5145\u8981\uff08\u5145\u5206\u5fc5\u8981\uff09\u6761\u4ef6\u662f\uff1a\u5b58\u5728\u4e00\u4e2a\u6bd4i\u5c0f\u7684j\uff0c\u6ee1\u8db3f[i]=true\u4e14\u4ece\u7b2cj+1\u5230\u7b2ci\u662fp\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u3002\n\n\u4f2a\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a\n```cpp\nif(f[j]=true && s[j+1...i]\u4e3a\u96c6\u5408P\u4e2d\u7684\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08j\u4ecei~1 \u5230 1~10 \u679a\u4e3e\uff09\n  f[i]=true\nelse f[i]=false; \n```\n\n\u53c2\u8003\u4ee3\u7801\u5982\u4e0b\u6240\u793a\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,ans;\nstring P[201],S=\" \";\nbool f[200001]= {1};\nbool Check(int p)\n{\n  for(int i=0;i<n;i++)\n  {\n  \tint t=P[i].size();\n  \tif(p>=t && f[p-t] && P[i]==S.substr(p-t+1,t))\n  \t{\n      ans=p;\n      return true;\n\t}\n  }\n  return false;\n}\nint main()\n{\n  for(string s;cin>>s,s!=\".\";P[n++]=s);\n  for(srting s;cin>>s;S+=s);\n  for(int i=1;i<=S.size();i++)\n    f[i]=Check(i);\n  printf(\"%d\\n\",ans);\n  return 0;\n}\n```\n\u4e0a\u9762\u7684\u53c2\u8003\u4ee3\u7801\u4e2d\u53ef\u4ee5\u4f18\u5316\u7684\u7b97\u6cd5\u662f\u5224\u65ad\u67d0\u6bb5\u5b57\u7b26\u4e32\u662f\u5426\u662f\u96c6\u5408\u4e2d\u67d0\u5143\u7d20\u65f6\uff0c\u5982\u679c\u9010\u4e00\u4e0e\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u6bd4\u8f83\uff0c\u6709\u53ef\u80fd\u8d85\u65f6\u3002\u3002\u3002\u3002\u3002\u3002\n\n\u6709\u80fd\u529b\u7684\u5de8\u4f6c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u4e8c\u5206\u6cd5\u6216\u8005STL\u4e2d\u7684set\u5bb9\u5668\u4f18\u5316\u4ee3\u7801\u3002\u5199\u90a3\u4e48\u591a\u4e0d\u5bb9\u6613\uff0c\u70b9\u4e2a\u8d5e\u518d\u8d70\u5457TWT",
        "postTime": 1591436556,
        "uid": 289571,
        "name": "hhjtutuhe",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010[USACO2.3]\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u6211\u63d0\u4f9b\u4e00\u79cd\u597d\u60f3\u7684\u601d\u8def\uff1aKMP + dp\n\n### 1.\u7528KMP\u6807\u8bb0\u6bcf\u4e2a\u5143\u7d20\u5728s\u4e32\u4e2d\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002\n\n\u5982\u679c\u4e0d\u4e86\u89e3KMP \u3010\u4e00\u79cd\u5728\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u79f0\u4e3a\u76ee\u6807\u4e32\uff09\u4e2d\u67e5\u627e\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\uff08\u79f0\u4e3a\u6a21\u5f0f\u4e32\uff09\u7684 O(n) \u7b97\u6cd5\u3011\u7684\uff0c\u53ef\u4ee5\u53bb\u770b P3375\u3002\n\n\u8fd9\u91cc\u6709\u4e00\u70b9\uff0c\u6211\u4eec\u6807\u8bb0\u7684\u662f\u6bcf\u4e2a\u5143\u7d20\u5728s\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u4e0a\u662f\u5426\u51fa\u73b0\u3002\n\n### 2.\u7528dp\u5224\u65ad\u6bcf\u4e2a\u524d\u7f00\u662f\u5426\u5408\u6cd5\n\nf [ i ] \u8868\u793a s \u4e32\u4e2d\u524d i \u4e2a\u5b57\u7b26\u6784\u6210\u7684\u524d\u7f00\u662f\u5426\u5408\u6cd5\u3002\n\u901a\u8fc7\u679a\u4e3e\u6bcf\u4e2a\u5143\u7d20\uff08\u76f8\u5f53\u4e8e\u51b3\u7b56\u4e86\uff09\uff0c\u786e\u5b9a f [ i ] \u3002\n\n\u4e0d\u96be\u5f97\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\nf [ i ] = f [ i ] | |  f [ i - m [ j ] ]\n\n\u5176\u4e2dj\u662f\u679a\u4e3e\u7684\u5143\u7d20\u4e0b\u6807\uff0cm\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u5143\u7d20\u7684\u957f\u5ea6\u3002\n\n\u8fb9\u754c\u6761\u4ef6 f [ 0 ] = true ;\n\n### 3.\u627e\u5230\u5408\u6cd5\u7684\u6700\u957f\u524d\u7f00\uff0c\u8f93\u51fa\n\nAC\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n\n#define maxm 11\n#define maxc 202\n//\u8fd9\u91cc\u8981\u591a\u5f00\u4e00\u4f4d\uff0c\u56e0\u4e3a\u540e\u9762\".\"\u4e5f\u88ab\u8bfb\u5165\u4e86 \n#define maxn 200001\n\nusing namespace std;\n\nint c,n,m[maxc],pre[maxc][maxm];\n//pre\u4e3a\u6700\u957f\u516c\u5171\u771f\u524d\u7f00\u540e\u7f00\u957f\u5ea6 \nbool pl[maxc][maxn];\n//pl[i][j]=true\u8868\u793a\u7b2ci\u4e2a\u5b57\u7b26\u4e32\u672b\u5c3e\u4f4d\u7f6e\u5728j\u51fa\u73b0\u8fc7 \nstring s,p[maxc];\n\nbool f[maxn];\n\ninline void get_pre(int c,string p)\n//\u6c42\u6700\u957f\u516c\u5171\u771f\u524d\u7f00\u540e\u7f00 \n{\n\tint j=0;\n\tpre[c][1]=0;\n\tfor(int i=1;i<m[c];i++){\n\t\twhile(j>0&&p[i+1]!=p[j+1]) j=pre[c][j];\n\t\tif(p[i+1]==p[j+1]) j++;\n\t\tpre[c][i+1]=j;\n\t}\n}\n\ninline void KMP(string s,int c,string p)\n{\n\tint j=0;\n\tfor(int i=0;i<n;i++){\n\t\twhile(j>0&&s[i+1]!=p[j+1]) j=pre[c][j];\n\t\tif(s[i+1]==p[j+1]) j++;\n\t\tif(j==m[c]){\n\t\t\tpl[c][i+1]=true;//\u8bb0\u5f55\u4f4d\u7f6e \n\t\t\tj=pre[c][j];\n\t\t}\n\t}\n}\n\nint main()\n{\n\twhile(cin>>p[++c]&&p[c]!=\".\"){\n\t\tm[c]=p[c].length();\n\t\tp[c]='#'+p[c];//\u4e3a\u4e86\u4f7f\u5b57\u7b26\u4e32\u4ece1\u5f00\u59cb \n\t}\n\tc--;//\".\"\u4e0d\u7b97 \n\tstring x;\n\twhile(cin>>x) s+=x;//\u6ce8\u610f\u53ef\u80fd\u4e0d\u6b62\u4e00\u884c \n\tn=s.length();\n\ts='#'+s;\n\tfor(int i=1;i<=c;i++){\n\t\tget_pre(i,p[i]);\n\t\tKMP(s,i,p[i]);\n\t}\n\tf[0]=true;//\u7ed9\u4e2atrue\u8981\u4e0d\u7136\u4f1a\u7206 \n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=c;j++){\n\t\t\tif(pl[j][i]) f[i]=f[i]||f[i-m[j]];\n\t\t}\n\t}\n\tfor(int i=n;i>=0;i--){\n\t\tif(f[i]){\n\t\t\tcout<<i<<endl;\n\t\t\treturn 0;\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1598083373,
        "uid": 153139,
        "name": "\u98ce\u7fbd\u8dc3",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1470 \u3010[USACO2.3]\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u4e3a\u4ec0\u4e48\u4e0d\u7528 $AC\\text{\u81ea\u52a8\u673a}$ \u5462\uff1f\n\n~~\u5176\u5b9e\u540e\u9762\u6709dalao\u8bb2AC\u81ea\u52a8\u673a\uff0c\u4f46\u4e0d\u662f\u5f88\u8be6\u7ec6\u3002~~\n\n\u6211\u6765\u80e1\u626f\u4e00\u4e0b\u3002\u3002\n\n#### \u9898\u76ee\u5206\u6790\uff1a\n\n\u7b80\u610f\u662f\u6c42\u5728\u5b57\u7b26\u4e32$S$\u4e2d\uff0c\u6700\u957f\u80fd\u88ab\u5339\u914d\u7684\u524d\u7f00\u957f\u5ea6\uff0c\u591a\u6a21\u5f0f\u4e32\u5339\u914d\uff0c\u4e0d\u5c31\u662fAC\u81ea\u52a8\u673a\u7684\u677f\u5b50\u561b\u3002\u3002\n\n\u540c\u6837\u8981\u8bbe\u72b6\u6001 $ok[i]$ \u8868\u793a\u524d$i$\u4f4d\u80fd\u5426\u88ab\u5339\u914d\uff0c\u5bb9\u6613\u5f97\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$$ok[i]=\\sum_{P_j\\text{\u5339\u914d}S_{[i-len(P_j)+1,i]}}ok[i-len(p_j)]$$\n\n\u4e0a\u5f0f\u7684$\\sum$\u8868\u793a **\u903b\u8f91\u6216** \u8fd0\u7b97\u3002\n\n\u8fb9\u754c\u6761\u4ef6\u662f $ok[0]=true$ \uff0c\u5373\u5339\u914d\u524d0\u4f4d\u662f\u4e00\u5b9a\u53ef\u4ee5\u7684\u3002\n\n- \u5728\u5339\u914d\u7684\u8fc7\u7a0b\u6211\u4eec\u4f7f\u7528AC\u81ea\u52a8\u673a\uff0c\u8282\u70b9\u7684\u7ed3\u675f\u6807\u8bb0\u53ef\u4ee5\u76f4\u63a5\u5b58\u6a21\u5f0f\u4e32\u957f\u5ea6\uff0c\u6574\u4e2a\u6570\u7ec4\u5c31\u5e72\u51c0\u4e86\u8bb8\u591a\uff0c\u5339\u914d\u65f6\u5c31\u66b4\u529b\u8df3$fail$\u8fb9\uff0c\u5339\u914d\u5230\u4e32\u5c31\u6839\u636e\u957f\u5ea6\u8f6c\u79fb\u72b6\u6001\u3002\n\n#### \u4ee3\u7801\u5b9e\u73b0(21ms in total)\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define N 2010\n#define M 200005\nusing namespace std;\n\nchar str[M], msc[N];\nint trie[N][26], ed[N], p[N], cnt = 2;\nbool ok[M];\n\nvoid insert(const char* str) {\n\tint now = 1, len = strlen(str);\n\tfor(int i = 0;i < len;i++) {\n\t\tint ch = str[i] - 'A';\n\t\tif(!trie[now][ch]) trie[now][ch] = cnt++;\n\t\tnow = trie[now][ch];\n\t}\n\ted[now] = len;//\u7ed3\u675f\u6807\u8bb0 \u8bb0\u957f\u5ea6\u3002\n}\n\nvoid pre() {//AC\u81ea\u52a8\u673a\u57fa\u672c\u64cd\u4f5c\u6240\u4ee5\u6ca1\u6ce8\u91ca\n\tfor(int ch = 0;ch < 26;ch++)\n\t\ttrie[0][ch] = 1;\n\tqueue <int> q;\n\tq.push(1);\n\twhile(q.size()) {\n\t\tint now = q.front(); q.pop();\n\t\tfor(int ch = 0;ch < 26;ch++) {\n\t\t\tif(trie[now][ch]) {\n\t\t\t\tq.push(trie[now][ch]);\n\t\t\t\tp[trie[now][ch]] = trie[p[now]][ch];\n\t\t\t} else trie[now][ch] = trie[p[now]][ch];\n\t\t}\n\t}\n}\n\nvoid AC_run(const char* str) {\n\t*ok = 1;//\u8fb9\u754c\u6761\u4ef6\n\tint now = 1, len = strlen(str + 1);\n\tfor(int i = 1;i <= len;i++) {\n\t\tnow = trie[now][str[i] - 'A'];\n\t\tfor(int j = now;j && !ok[i];j = p[j])//\u66b4\u529b\u8df3fail\n\t\t\tif(ed[j]) ok[i] |= ok[i - ed[j]];\n\t\t\t//ok[i]\u4e3a\u771f\u5c31\u53ef\u4ee5break\u3002\n\t}\n\tfor(int i = len;~i;i--)//\u627e\u6700\u5927\u5339\u914d\u4f4d\n\t\tif(ok[i]) { printf(\"%d\", i); return; }\n}\n\nint main() {\n\twhile(1) {\n\t\tscanf(\"%s\", msc);\n\t\tif(*msc == '.') break;\n\t\tinsert(msc);\n\t}\n\tpre();\n\tchar *p = str + 1, c;\n\t//\u4ece\u4e0b\u68071\u5f00\u59cb\u8bfb\u65b9\u4fbf\u641e\u8fb9\u754c\n\twhile((c = getchar()) != EOF)\n\t\tif('A' <= c && c <= 'Z') *p++ = c;\n\t*p = '\\0';//\u8bfb\u5165\u7684\u6362\u884c\u7279\u5224^^^^^^^^^^^\n\tAC_run(str);\n\treturn 0;\n}\n```\n\n#### \u540e\u8bb0\uff1a\n\n\u8fd9\u662f\u4e00\u9053AC\u81ea\u52a8\u673a\u677f\u5b50\u9898\u3002",
        "postTime": 1571629745,
        "uid": 133236,
        "name": "saxiy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\t\t\t\u9996\u5148\u770b\u9898\uff0c\u9898\u76ee\u8981\u6c42\u6211\u4eec\u6c42\u6700\u957f\u5339\u914d\u7684\u957f\u5ea6\uff0c\u6211\u4eec\u4e0d\u59a8\u5982\u4e0b\u601d\u8003\uff1a\n\n\u200b\t\u5bf9\u4e8e\u5b57\u7b26\u4e32S\uff0c\u6211\u4eec\u4ece\u7b2cy\u4f4d\u5f00\u59cb\u641c\u7d22\uff08**\u4fdd\u8bc1\u524dy-1\u4f4d\u4e00\u5b9a\u53ef\u4ee5\u662f\u5339\u914d**\uff09\n\n\u200b\t\u4ece\u7b2cy\u4f4d\u5f00\u59cb\u751f\u6210\u5b57\u7b26\u4e32\uff0c\u82e5\u6b64\u65f6\u751f\u6210\u7684\u5b57\u7b26\u4e32\u5728P\u4e2d\u51fa\u73b0\u8fc7\uff0c\u5219\u8bc1\u660e\n\n\u200b\t\u6b64\u65f6\u7684\u5b57\u7b26\u4e32\u53ef\u4ee5\u88ab\u5339\u914d\u5230y+i\u7684\u4f4d\u7f6e\uff0c\u6211\u4eec\u518d\u4ecey+i+1\u5f00\u59cb\u641c\u7d22\u4fbf\u597d\u4e86\uff01\n\n\u200b\t**\u800c\u95ee\u9898\u7684\u7b54\u6848\u5c31\u662f\u6211\u4eec\u5df2\u5230\u8fbe\u7684\u6700\u5927\u7684\u4e00\u4e2ay\u3002**\n\n\t\t\t\u90a3\u4e48\u95ee\u9898\u6765\u4e86\uff0c\u5982\u679c\u6309\u7167\u4e0a\u8ff0\u8bf4\u6cd5\u641c\u7d22\uff0c\u590d\u6742\u5ea6\u4e0d\u7a33\u5b9a\uff0c\u4f46\u4e00\u5b9a\u4f1a\n\n\u200b\t**\u8d85\u65f6**\u7684\uff0c\u6709\u6728\u6709\u4ec0\u4e48\u4f18\u5316\u5462\uff1f\n\n\t\t\t\u7b54\u6848\u662f\u6709\u7684\uff08\u4e0d\u7136\u6211\u5199\u8fd9\u4e2a\u9898\u89e3\u5e72\u4ec0\u4e48\u5462?\uff09\uff0c\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u5982\u679c\n\n\u200b\t\u5bf9\u4e8e\u6b64\u65f6\u7684y\uff0c\u6211\u4eec\u66fe\u7ecf\u5230\u8fbe\u8fc7\uff0c\u867d\u7136\u5230\u8fbe\u7684\u65b9\u5f0f\u4e0d\u540c\uff0c\u4f46\u6211\u4eec\u5230\u8fbe\u8fc7\uff0c**\u540e**\n\n\u200b\t**\u9762\u6211\u4eec\u8fdb\u884c\u641c\u7d22\u7684\u8fc7\u7a0b\u4e0e\u7ed3\u679c\u80af\u5b9a\u662f\u4e00\u6837\u7684**\uff0c\u6240\u4ee5\uff0c\u6211\u4eec\u5c31**\u8df3\u8fc7**\u5c31\u597d\u5566\uff01\n\n\u200b\t\u800c\u603b\u7684\u590d\u6742\u5ea6\u6700\u9ad8\u4f4dO(n)(n\u4e3aS\u4e32\u7684\u957f\u5ea6)\uff0c\u4e00\u4e0b\u4fbf\u662f\u5b8c\u6574\u4ee3\u7801\uff08\u52a0\u4e86\u70b9\u5c0f\u4f18\n\n\u200b\t\u5316):\n\n    #include<bits/stdc++.h>\n    using namespace std;\n    map<string,bool>s;//\u4e00\u4e2amap\u89e3\u5343\u6101~\u5c31\u662f<u>**\u901f\u5ea6\u6162\u4e86\u70b9**</u>\uff0c\u5927\u4f6c\u8bf7\u81ea\u884c\u6253**hash**\n    int x;\n    int ans=0;\n    int ams=0;\n    string l;\n    bool F=0;\n    bool come[200001];\n    inline void to_search(int now){\t\n        if(come[now]){//\u5982\u679c\u66fe\u7ecf\u641c\u7d22\u8fc7\u6b64\u65f6\u7684\u2018y\u2019\n            return;//\u9000\u51fa\n        }\n        come[now]=1;//\u6807\u8bb0\u641c\u7d22\u8fc7\u6b64\u65f6\u7684\u2018y\u2019\n        if(now==x){\n            return;\n        }\n        string qu=\"\";\n        for(int i=now;i<x;++i){\n            if(i-now>=ams){//\u5982\u679c\u73b0\u5728\u52a0\u7684\u5143\u7d20\u5927\u4e8e\u4e86\u6700\u957f\u5143\u7d20\uff0c\u4e4b\u540e\u4e00\u5b9a\u4e0d\u53ef\u80fd\u6210\u7acb\uff0c\u4e8e\u662f\u8df3\u8fc7\uff08\u867d\u7136\u662f\u5c0f\u4f18\u5316\uff0c\u4e5f\u5f88\u5f3a\u5927\u6709\u4e0d\u6709~\uff09\n                return;\n            }\n            qu+=l[i];\n            if(s[qu]){//\u5982\u679cP\u96c6\u5408\u4e2d\u6709\u6b64\u65f6\u7684\u5143\u7d20\n                F=1;//\u5224\u65ad\u6210\u7acb\n                if(i>ans){//\u8bb0\u5f55\u7b54\u6848\n                    ans=i;\n                }\n                to_search(i+1);//\u4ece\u4e0b\u4e00\u4e2ay\u5f00\u59cb\u641c\u7d22\n            }\n        }\n    }\n    int main(){\n        int e=1;\n        while(cin>>l){\n            if(l==\".\"){\n                break;\n            }\n            s[l]=1;//\u6807\u8bb0\u5143\u7d20\u5b58\u5728\n            if(l.size()>ams){\n                ams=l.size();//\u8bb0\u5f55\u6700\u957f\u5143\u7d20\uff08\u5c0f\u4f18\u5316\u7b2c\u4e00\u6b65\uff09\n            } \n        }\n        string yu=\"\";\n        while(cin>>l){//\u8f93\u5165\u5b57\u7b26\u4e32S\n            yu+=l;//\u5c06\u5b57\u7b26\u4e32S\u6574\u5408\n        }\n        l=yu;\n        x=l.size();//\u5f97\u5230S\u7684\u957f\u5ea6\n        to_search(0);//\u4ece\u7b2c\u4e00\u4e2a\u5b57\u7b26\u5f00\u59cb\u641c\u7d22\n        if(!F){//\u6ce8\u610f\u5224\u65ad\u662f\u5426\u641c\u7d22\u8fc7\uff0c\u7b2c\u4e00\u4e2a\u70b9\u7684\u5751QWQ\n            printf(\"0\");\n            return 0;\n        }\n        printf(\"%d\",ans+1);//\u8f93\u51fa\u7b54\u6848\uff08\u8bb0\u5f97\u52a0\u4e00\uff0c\u56e0\u4e3a\u662f\u4ece0\u5f00\u59cb\u641c\u7684\uff09\n        return 0;\n    }\n",
        "postTime": 1523085078,
        "uid": 71458,
        "name": "a13518354766",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u697c\u4e0bluobobo\u5927\u4f6c%%%%%\n\n\u697c\u4e0b\u8fdb\u76ca\u6c42\u7cbe\u4ee5\u7a0b\u5e8f\u5feb\u4e3a\u5feb\u4e50\u3002\n\n\u800c\u672c\u849f\u84bb\u53ea\u80fd\u4ee5\u4ee3\u7801\u77ed\u4e3a\u5feb\u4e50\u4e86\u3002\n\n\u5176\u5b9e\u6ca1\u5fc5\u8981\u7528trie\u6811\uff0c\u66b4\u529b\u5339\u914d\u4e5f\u662f\u53ef\u4ee5\u7684\u3002\n\n\u7528\u8bb0\u5fc6\u5316\u975e\u9012\u5f52\u5f0f\u6df1\u641c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u8bb0\u5f55\u72b6\u6001$i$\uff08\u5373\u524d$i$\u4e2a\u5b57\u7b26\u90fd\u5339\u914d\u6210\u529f\uff09\u662f\u5426\u8fbe\u5230\u8fc7\uff0c\u8fbe\u5230\u8fc7\u5219\u76f4\u63a5return\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n,subl[205],strl;\nbool book[200005];\nchar sub[205][15],str[200005];\nvoid dfs(int k)\n{\n    if(book[k])return;book[k]=1;\n    for(int i=1,f=0;i<=n;i++,f=0)\n    {\n        for(int j=0;j<subl[i];j++)if(sub[i][j]!=str[k+j]||k+j>=strl){f=1;break;}\n        if(!f)dfs(k+subl[i]);\n    }\n}\nint main()\n{\n    while(scanf(\"%s\",sub[++n]),strcmp(sub[n],\".\")!=0)subl[n]=strlen(sub[n]);\n    do{str[strl]=getchar();if(isupper(str[strl]))strl++;}while(str[strl]!=EOF);\n    dfs(0);\n    for(int i=strl;i>=0;i--)if(book[i]){printf(\"%d\\n\",i);return 0;}\n}\n```",
        "postTime": 1494938477,
        "uid": 22388,
        "name": "XZYQvQ",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u9898\u89e3by\uff1aredbag\n\n\u9898\u89e3\u5730\u5740\uff1ahttp://redbag.duapp.com/?p=1343\n\n\u65b9\u6cd5\u540c\u697c\u4e0b\u3002\u611f\u89c9\u8fd9\u662f\u4e00\u79cd\u6700\u4e0d\u9700\u8981\u667a\u529b\u7684\u65b9\u6cd5\uff1fNOCOW\u4e0a\u7684\u90fd\u770b\u4e0d\u592a\u61c2\uff0c\u88ab\u8bfb\u5165\u5751\u4e86\u5f88\u4e45\u3002\n\n\u5143\u7d20\u4f3c\u4e4e\u4e0d\u6b62200\u4e2a\uff0c\u5f00\u5927\u70b9\u4f1a\u597d\u4e9b\uff1f\n\n```cpp\n/*\nID: ylx14274\nPROG: prefix\nLANG: C++     \n*/\n#include<set>  \n#include<map>  \n#include<list>  \n#include<queue>  \n#include<stack>  \n#include<string>  \n#include<math.h>  \n#include<time.h>  \n#include<vector>  \n#include<bitset>  \n#include<memory>  \n#include<utility>  \n#include<stdio.h>  \n#include<sstream>  \n#include<iostream>    \n#include<string.h>  \n#include<algorithm> \n#define LL unsigned long long   \nusing namespace std;\nstring s,ss,c[251];\nint n,i,j,m;//n:\u5143\u7d20\u4e2a\u6570\nint a[251];//\u5143\u7d20\u957f\u5ea6 \nint f[200000];\nint main() \n{\n    freopen(\"prefix.in\",\"r\",stdin);\n    freopen(\"prefix.out\",\"w\",stdout); \n    while (true)\n    {\n        m++;//\u8ba1\u6570\u5668+1 \n        cin>>c[m];//\u8bfb\u5165 \n        if (c[m].size()-1]=='.')//\u7ed3\u675f \n        {\n            m--;//\u8ba1\u6570\u5668\u591a\u7b97\u4e86\n            break; //\u9000\u51fa \n        }\n        a[m]=c[m].size(); //\u8bb0\u4f4d\u6570 \n    }\n    while (cin>>ss)//\u8bfb\u5165 \n    {\n        s+=ss; //\u8fde\u8d77\u6765 \n    }\n    n=s.size();//\u5b58s\u7684\u957f\u5ea6 \n    s=' '+s;//\u6bcf\u4e00\u4f4d\u90fd\u5f80\u540e\u632a\u4e00\u4f4d\uff0c\u65b9\u4fbf\u64cd\u4f5c \n    f[0]=1;//\u521d\u59cb\u503c \n    for (i=1;i<=n;i++)\n        for (j=1;j<=m;j++)\n        if (i-a[j]>=0)//\u56e0\u4e3af\u6570\u7ec4\u6ca1\u6709\u8d1f\u6570\u4e0b\u6807\uff0c\u6240\u4ee5\u5224\u65ad \n        {\n            if (f[i-a[j]]==1)//i-a[j]\u4f4d\u80fd\u7531\u8be5\u96c6\u5408\u7684\u5143\u7d20\u7ec4\u6210\n            if (s.substr(i+1-a[j],a[j])==c[j]) \n            //i+1-a[j]~i\u4f4d\u7531c[j]\u7ec4\u6210 \n            f[i]=1;//\u6807\u8bb0 \n        } \n    for (i=n;i>=0;i--)\n    if (f[i]==1)\n    {\n        printf(\"%d\\n\",i); //\u8f93\u51fa\u6700\u5927\u7684 \n         return 0;\n    }\n}\n```",
        "postTime": 1469610797,
        "uid": 2674,
        "name": "\u300cQQ\u7ea2\u5305\u300d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u7ec3KMP\u6765\u7684\n\n\u6709\u8bb8\u591a\u5927\u4f6c\u7528DP\uff0c\u6211\u89c9\u5f97\u8fd9\u662f\u4e00\u9053\u66b4\u529b+KMP\u5427\u3002\u6709\u51e0\u4f4d\u7ae5\u978b\u4e5f\u662f\u7528KMP\uff0c\u4f46\u597d\u50cf\u4e0d\u662f\u90a3\u4e48\u5bb9\u6613\u61c2\uff08\u5bf9\u521d\u5b66\u8005\u6765\u8bf4\uff0c~~\u6bd4\u5982\u6211~~\uff09\n\n\u6240\u4ee5\u6211\u5728\u8fd9\u91cc\u6700\u7b80\u5355\u7684KMP\u6a21\u677f\u6765\u5199\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=2e5+5;\nstring A,B[205],T;\nint p[1005],n,m[205],ans=0;\nbool visit[MAXN];//visit\u8868\u793a\u5f53\u524d\u4f4d\u7f6e\u662f\u5426\u88ab\u8986\u76d6 \nvoid pre(int x)//\u677f\u5b50 \n{\n\tint j=0;\n\tp[1]=0;\n\tfor (int i=1;i<m[x];i++){\n\t\twhile (j>0 && B[x][j+1]!=B[x][i+1]) j=p[j];\n\t\tif (B[x][j+1]==B[x][i+1]) j++;\n\t\tp[i+1]=j;\n\t}\n\treturn;\n}\nint kmp(int x)//\u677f\u5b50 \n{\n\tint j=0,ans=0;\n\tfor (int i=0;i<n;i++){\n\t\twhile (j>0 && B[x][j+1]!=A[i+1]) j=p[j];\n\t\tif (B[x][j+1]==A[i+1]) j++;\n\t\tif (j==m[x]){\n\t\t\tfor (int k=i+1-m[x]+1;k<=i+1;k++)//\u5f53\u53d1\u73b0\u627e\u5230\u65f6\uff0c\u5728\u9996\u5b57\u6bcd\u7684\u4f4d\u7f6e\u5230\u7ed3\u675f\uff0cvisit[]\u6807\u8bb0\u4e3a1 \n\t\t\t\tvisit[k]=1;\n\t\t\tj=0;//\u8fd9\u91cc\u8981\u6ce8\u610f\uff1a\u56e0\u4e3a\u5355\u8bcd\u4e0d\u80fd\u91cd\u53e0\u8986\u76d6\uff0c\u6240\u4ee5\u4e0d\u80fd\u662fj=p[j] \n\t\t}\n\t}\n\treturn ans;\n}\nvoid check()\n{\n\tfor (int i=1;i<=n;i++)\n\t\tif (visit[i]) ans++;//\u53ea\u8981\u5f53\u524d\u88ab\u8986\u76d6\uff0c\u957f\u5ea6\u5c31+1 \n\t\telse break;\n\treturn; \n}\nint main()\n{\n\tint len=1;//\u8f93\u5165\u5c31\u4e0d\u8bf4\u4e86 \n\twhile (1){\n\t\tcin>>B[len];\n\t\tB[len]='&'+B[len];//\u540c\u7b2c54\u884c \n\t\tm[len]=B[len].size()-1;\n\t\tif (B[len]==\"&.\"){\n\t\t\tlen--;\n\t\t\tbreak;\n\t\t}\n\t\tlen++;\n\t}\n\twhile (cin>>T){//\u56e0\u4e3a\u662f\u591a\u597d\uff0c\u53ef\u4ee5\u6bcf\u6b21\u8bfb\u5165\u7136\u540e\u52a0\u8d77\u6765 \n\t\tA+=T;\n\t}\n\tA='&'+A;//\u5728\u6700\u524d\u9762\u52a0\u4e00\u4e2a\u9524\u5b50\uff0c\u5c31\u662f\u4ece\u4e0b\u6807\u4e3a1\u5f00\u59cb \n\tn=A.size()-1;\n\tfor (int i=1;i<=len;i++)//\u6bcf\u4e2acard\u8dd1\u4e00\u904dP\u6570\u7ec4\u7684\u9884\u5904\u7406 \n\t\tpre(i);\n\tmemset(visit,0,sizeof visit);\n\tfor (int i=1;i<=len;i++)//\u6bcf\u4e2a\u5355\u8bcd\u53bb\u914d\u5bf9\u4e00\u904d\uff0c\u80fd\u8986\u76d6\u7684\u90fd\u8986\u76d6 \n\t\tkmp(i);\n\tcheck();//\u7edf\u8ba1 \n\tcout<<ans<<endl;//\u62dc\u62dc \n\treturn 0;\n } \n```\n",
        "postTime": 1578741300,
        "uid": 106619,
        "name": "yagyagyag",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "~~\u663e\u7136~~\uff0c\u8fd9\u9053\u9898\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32hash\u505a\n\n\u6211\u4eec\u5bf9\u6bcf\u4e00\u4e2a\u5b57\u7b26\u4e32\u5f97\u5230\u4e00\u4e2ahash\u503c\u3002\n\n\u7136\u540e\u5c31\u53ef\u4ee5O(1)\u7684\u65f6\u95f4\u5185\u5224\u65ad\u4e24\u6bb5\u5b57\u7b26\u662f\u5426\u76f8\u540c\uff0c\u4ee5\u6b64\u6765\u4f18\u5316dp\u3002\n\ncode\uff1a\n\n``` cpp\n#include<bits/stdc++.h>\n#define mp make_pair\n#define pb push_back\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef vector<int > vi;\ntypedef pair<int ,int > pii;\ntypedef vector<pii> vii;\nconst int inf=0x3f3f3f3f, maxn=100007, mod=1e9+7;\nconst ll linf=0x3f3f3f3f3f3f3f3fLL;\n\null h[207][18],z[200007];\null hs[200007];\nstring s;\nint l[207];\nstring ss=\"\";\n\nconst int P=137;//\u8fd9\u4e2a\u662f\u5b57\u7b26\u4e32hash\u7684\u4e58\u6570,\u6211\u7528\u7684unsigned long long \u81ea\u7136\u6ea2\u51fa\uff0c\u6240\u4ee5\u6ca1\u6709\u6a21\u6570 \n\nint cnt;\nvoid initZ(){\n\tz[0]=1;\n\tfor(int i=1;i<=200000;i++)z[i]=z[i-1]*P;//\u9884\u5904\u7406\u51faP\u7684\u4e58\u65b9 \n}\nvoid initHash(ull rt[],string s){//\u9884\u5904\u7406\u51fa\u4e00\u4e2astring\u7684hash\u503c \n\tint len=s.length();\n\trt[0]=0;\n\tfor(int i=1;i<=len;i++)rt[i]=rt[i-1]*P+s[i-1],cout<<rt[i]<<endl;\n}\null hash(ull rt[],int l,int r){//\u5224\u65ad\u4e24\u6bb5string\u662f\u5426\u76f8\u540c \n\treturn rt[r]-rt[l-1]*z[r-l+1];\n}\nbool dp[200007];\nint main(){\n\tinitZ();\n\twhile(cin>>s){\n\t\tif(s[0]=='.')break;\n\t\tinitHash(h[++cnt],s);\n\t\tl[cnt]=s.length();\n\t}\n\twhile(cin>>s)ss=ss+s;//\u8bfb\u5165ss\uff0c\u6ce8\u610f\u8bfb\u5165\u53ef\u80fd\u6709\u591a\u884c\uff0c\u4e0d\u8981\u5fd8\u8bb0\u6362\u884c \n\tinitHash(hs,ss);\n\tfor(int i=1;i<=ss.length();i++){\n\t\tcout<<hs[i]<<endl;\n\t} \n\tfor(int i=0;i<ss.length();i++){//dp\u8f6c\u79fb,\u8fd9\u4e2a\u6709\u5f88\u591a\u4eba\u8bb2\u8fc7\u4e86\u6211\u5c31\u4e0d\u91cd\u590d\u4e00\u904d\u4e86 \n\t\tif(i==0||dp[i-1]){//\u5982\u679c\u524di-1\u4f4d\u53ef\u4ee5\u8f6c\u79fb \n\t\t\tfor(int j=1;j<=cnt;j++){\n\t\t\t\tif(l[j]+i>ss.length())continue;\n\t\t\t\tif(hash(hs,i+1,i+l[j])==hash(h[j],1,l[j])){//\u5224\u65ad\u4ece\u7b2ci\u4f4d\u5f00\u59cb\u7684\u6587\u672c\u4e32\u548c\u7b2cj\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u76f8\u540c \n\t\t\t\t\tdp[i+l[j]-1]=true;//\u90a3\u4e48s[0~i+l[j]-1]\u4e5f\u662f\u5b83\u7684\u4e00\u4e2a\u524d\u7f00 \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=ss.length()-1;i>=0;i--){\n\t\tif(dp[i]){\n\t\t\tcout<<i+1<<endl;//\u6211\u4ece\u96f6\u5f00\u59cb \uff0c\u8981\u52a01\uff1b \n\t\t\treturn 0;\n\t\t}\n\t}\n\tcout<<0<<endl;//\u82e5\u6ca1\u6709\u524d\u7f00 \u5219\u8f93\u51fa0 \n\treturn 0;\n}\n```\n\n\n",
        "postTime": 1543162810,
        "uid": 58532,
        "name": "pmt2018",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "map\u5927\u6cd5\u597d\n\n\n\n\n\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<map>\nusing namespace std;\nstring S;\nint L,F[200005];\nmap<string,bool> M;\nvoid Init(){\n    string s;\n    while(cin>>s&&s!=\".\")\n        M[s]=true;\n    while(cin>>s)\n        S+=s;\n    L=S.length();\n}\nvoid DP(){\n    int i=1,j;\n    while(!M[S.substr(0,i)]&&i<=L)\n        i++;\n    if(i>L){\n        printf(\"0\\n\");\n        return;\n    }\n    F[i-1]=true;\n    for(;i<L;i++)\n        for(j=i-1;j>=max(0,i-10);j--)\n            if(F[j]&&M[S.substr(j+1,i-j)]){\n                F[i]=true;\n                break;\n            }\n    for(i=L-1;i>=0;i--)\n        if(F[i]){\n            printf(\"%d\\n\",i+1);\n            return;\n        }\n}\nint main(){\n    Init();\n    DP();\n    return 0;\n}\n```",
        "postTime": 1472307321,
        "uid": 3647,
        "name": "Rocket_Ruaccoon",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\uff08~~\u53cd\u6b63\u9898\u89e3\u6ca1\u4eba\u770b \u5c31\u63d0\u4f9b\u4e2a\u601d\u8def\u5427~~\uff09\n\nTrie+DFS \u6bcf\u641c\u5230\u4e00\u4e2a\u8282\u70b9\u770b\u5b83\u662f\u4e0d\u662f\u4e00\u4e2a\u5355\u8bcd\u7684\u7ec8\u70b9\uff0c\u662f\u5c31\u52a0\u4e00\u4e2a\u641c\u7d22\u8def\u5f84\uff0c\u4e0d\u662f\u5c31\u6309\u7167Trie\u7684Find()\u6a21\u677f\u8fdb\u884cDFS.\n\u4f18\u5316\uff1a\u8bb0\u5f97\u52a0vis\u6570\u7ec4\u8fdb\u884c\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u4e0d\u7136\u4f1a\u6709\u91cd\u590d\u60c5\u51b5\u4f1aTLE\u3002\n\n\u4e0a\u4ee3\u7801\n\n\n------------\n\n```cpp\n#include <iostream>\n#include<stdio.h>\n#include<string.h>\n#include<math.h>\n#include<queue>\n#include<vector>\n#include<map>\n#include<algorithm>\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nconst int maxn=5050;\nconst int INF = 0x3f3f3f3f;\nint tree[maxn][30];\nbool vis[2020][200020];\nint ed[maxn];\nchar que[200020];\nchar ch[20];\nint n,cnt,Len;\nint ans=0;\nint newnode(){\n\tfor(int i=0;i<=26;i++){\n\t\ttree[cnt][i]=-1;\n\t}\n\ted[cnt]=0;\n\treturn cnt++;\n}\nvoid init(){\n\tcnt=0;\n\tnewnode();\n}\nvoid insert(){\n\tint len=strlen(ch);\n\tint root=0;\n\tfor(int i=0;i<len;i++){\n\t\tint x=ch[i]-'A';\n\t\tif(tree[root][x]<=0){\n\t\t\ttree[root][x]=newnode();\n\t\t}\n\t\troot=tree[root][x];\n\t}\n\ted[root]=1;\n}\nvoid dfs(int pos,int len){\n\tif(vis[pos][len]) return;\n\tvis[pos][len]=1;\n\tint x=que[len]-'A';\n\tif(ed[pos]){\n\t\tans=max(ans,len);\n\t}\n\tif(len==Len){\n\t\treturn;\n\t}\n\tif(tree[pos][x]!=-1){\n\t\tdfs(tree[pos][x],len+1);\n\t}if(ed[pos]){\n\t\tdfs(0,len);\n\t}\n}\nint main(){\n\tinit();\n\twhile(scanf(\"%s\",ch)&&strcmp(ch,\".\")){\n\t\tinsert();\n\t}\n\tLen=0;\n\twhile(scanf(\"%s\",que+Len)!=EOF){\n\t\tLen=strlen(que);\n\t}\n\tdfs(0,0);\n\tprintf(\"%d\\n\",ans);\n}\n\n \n```\n",
        "postTime": 1569213019,
        "uid": 167340,
        "name": "NoobYlh",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u8fd9\u4e00\u9053\u9898\u7528dp\u5c31\u53ef\u4ee5\u89e3\u4e86\uff0c\u6362\u884c\u8f93\u5165\u7528while\uff08!=EOF)\u5c31\u597d\u4e86\n\n\u7136\u540e\u4ece\u5934\u5230\u5c3e\u6bcf\u4e00\u4e2a\u4f4d\u7f6eDP\u4e00\u904d\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<cstdlib>\nusing namespace std;\nstruct node\n{\n\tint len;\n\tchar ss[21];\n}a[210];int n,len;\nchar st[210000],s[110];\nbool f[210000];\ninline int cmp(const void *xx,const void *yy)//\u5feb\u6392\u4ee3\u7801 \n{\n\tnode x=*(node*)xx;\n\tnode y=*(node*)yy;\n\tif(x.len>y.len) return 1;\n\tif(x.len<y.len) return -1;\n\treturn 0;\n}\nint main()\n{\n\tint i,j,k,t;\n\twhile(1)//\u8f93\u5165\u5355\u8bcd \n\t{\n\t\tn++;\n\t\tscanf(\"%s\",a[n].ss+1);a[n].len=strlen(a[n].ss+1);\n\t\tif(a[n].len==1 && a[n].ss[1]=='.')//\u9047\u5230\u201c.\u201d\u5c31\u9000\u51fa \n\t\t{\n\t\t\tn--;break;\n\t\t}\n\t}\n\tqsort(a+1,n,sizeof(node),cmp);//\u628a\u5355\u8bcd\u7684\u957f\u5ea6\u6392\u4e00\u904d\u5e8f \n\twhile(scanf(\"%s\",s+1)!=EOF)//\u8f93\u5165\u5b57\u7b26\u4e32 \n\t{\n\t\tfor(i=1;i<=strlen(s+1);i++){len++;st[len]=s[i];}\n\t}\n\tmemset(f,false,sizeof(f));f[0]=true;//f[i]\u8868\u793a\u7b2ci\u4f4d\u662f\u5426\u80fd\u5230\u8fbe\uff0c\u521d\u59cb\u53160\u662f\u53ef\u4ee5\u5230\u8fbe\u7684 \n\tfor(i=1;i<=len;i++)//\u679a\u4e3e\u957f\u5ea6 \n\t{\n\t\tfor(j=1;j<=n;j++)//\u679a\u4e3e\u5355\u8bcd \n\t\t{\n\t\t\tif(i<a[j].len) break;//\u5982\u679c\u5355\u8bcd\u7684\u957f\u5ea6\u8d85\u8fc7\u4e86\u5b57\u7b26\u5f53\u524d\u7684\u957f\u5ea6\uff0c\u5c31\u9000\u51fa \n\t\t\tif(f[i-a[j].len]==false) continue;//\u5982\u679c\u524d\u9762\u7684\u90fd\u4e0d\u884c\uff0c\u5c31\u4e0d\u7ba1\u8fd9\u4e2a\u5355\u8bcd \n\t\t\tbool bk=true;t=a[j].len;//\u5224\u65ad\u8fd9\u4e2a\u5355\u8bcd\u662f\u5426\u7b26\u5408\u8981\u6c42 \n\t\t\tfor(k=i;k>=i-a[j].len+1;k--)\n\t\t\t{\n\t\t\t\tif(st[k]!=a[j].ss[t])//\u5982\u679c\u4e0d\u5339\u914d \n\t\t\t\t{\n\t\t\t\t\tbk=false;break;\n\t\t\t\t}\n\t\t\t\tt--;\n\t\t\t}\n\t\t\tif(bk==true)//\u5982\u679c\u80fd\u6210\u529f\u7684\u5339\u914d\u4e86 \n\t\t\t{\n\t\t\t\tf[i]=true;break;\n\t\t\t}\n\t\t}\n\t}\n\tfor(i=len;i>=0;i--) //\u627e\u6700\u957f\u7684\u524d\u7f00 \n\t{\n\t\tif(f[i]==true)\n\t\t{\n\t\t\tprintf(\"%d\\n\",i);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1524460525,
        "uid": 66181,
        "name": "Celebrate",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u7ed9\u51fa\u4e00\u4e2a\u96c6\u5408\uff0c\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u627e\u51fa\u8fd9\u4e2a\u5b57\u7b26\u4e32\u7684\u6700\u957f\u524d\u7f00\uff0c\u4f7f\u5f97\u524d\u7f00\u53ef\u4ee5\u5212\u5206\u4e3a\u8fd9\u4e2a\u96c6\u5408\u4e2d\u7684\u5143\u7d20\uff08\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u4e0d\u5168\u90e8\u4f7f\u7528\uff09\u3002\n\n\u89e3\u9898\u601d\u8def\uff1a\u4ece\u5b57\u7b26\u4e32\u4e0b\u8868\u4e3a0\u7684\u4f4d\u7f6e\u5f00\u59cb\u5339\u914d\u96c6\u5408\u4e2d\u7684\u5143\u7d20\uff0c\u5339\u914d\u65f6\u6700\u5927\u957f\u5ea6\u4e3a\u5f53\u524d\u4f4d\u7f6e+\u8be5\u5143\u7d20\u7684\u957f\u5ea6\uff0c\u7136\u540e\u4e0b\u8868\u540e\u79fb\u4e00\u4f4d\uff0c\u7ee7\u7eed\u5f80\u540e\u627e\u3002\u3002\u3002\u6700\u540e\u5f97\u5230\u7684\u957f\u5ea6\u5c31\u662f\u6240\u6c42\u3002\n\n\u6e90\u4ee3\u7801\uff1a\n\n   \n```cpp\n#include <iostream>  \n#include <fstream>  \n#include <string.h>  \nusing namespace std;  \nchar assemble[210][15];  \nstring str;  \nint main() {  \n    ofstream fout (\"prefix.out\");  \n    ifstream fin (\"prefix.in\");  \n    int count=0,Max=0;  \n    while(cin>>assemble[count]&&assemble[count++][0]!='.');  \n    str=\"\";  \n    string s;  \n    while(cin>>s)  \n      str+=s;  \n    for(int i=0;i<str.length();i++)  \n    {  \n       for(int j=0;j<count;j++)  \n       {  \n         if(i+strlen(assemble[j])<=str.length())  \n         {  \n           bool judge=true;  \n           for(int k=0;k<strlen(assemble[j]);k++)  \n                if(str[i+k]!=assemble[j][k])  \n                    {  \n                     judge=false;break;  \n                     }  \n         if(judge)  \n           if(Max<i+strlen(assemble[j]))  \n         Max=i+strlen(assemble[j]);  \n         }  \n       }  \n       if(i+1>Max)  \n        break;  \n    }  \n    cout<<Max;  \n    return 0;  \n}\n```",
        "postTime": 1496033791,
        "uid": 10154,
        "name": "wzh1120",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "# \u6700\u6613\u61c2\u7684\u9898\u89e3\n\n### \u9898\u76ee\u63cf\u8ff0\n\n[\u9898\u76ee\u63cf\u8ff0](https://www.luogu.org/problemnew/show/P1470)\n\n\n------------\n\n\n### \u505a\u9898\u65f6\u7684\u5782\u6b7b\u6323\u624e\n\u6700\u5148\u770b\u5230\u8fd9\u9053\u9898\uff0c\u975e\u5e38\u5f00\u5fc3\u3002\u54c8\u54c8\u4e00\u7b11\uff0c~~\u66b4\u529b~~\uff0c\u7136\u540e~~\u5feb\u4e50~~TLE\n\n\u8bf7\u5927\u5bb6\u4ee5\u6211\u4e3a\u6212\uff0c\u505a\u9898\u524d\u5148\u770b\u6807\u7b7e\u3002\n\n\u7136\u540e\u5728\u770b\u5230DP\u540e\uff0c\u6211\u50bb\u773c\u4e86\u3002\uff08\u6211\u6253\u7684\u5c31\u662fdp\u554a\uff0c\u600e\u4e48\u4f1a\u9519\u4e00\u4e2a\u70b9\uff09\n\n\u6211\u76ef\u7740\u7535\u8111\uff0c\u770b\u7740\u9898\uff0c\u60f3\u4e8650\u591a\u5206\u949f\u65e0\u5173\u7684\u4e8b\u540e\u3002\u3002\u3002\u6211\u7ec8\u4e8e\u5f00\u59cb\u4e86\u6253\u4ee3\u7801\n\n\n------------\n\n### \u601d\u8def\n\n\u8bfb\u5165\u65f6\u9700\u8981\u6ce8\u610f\u4e00\u4e0b\u5b57\u7b26\u4e32\u7684\u6280\u5de7\u3002\n\n\u7136\u540e\u4f60\u5c31~~\u66b4\u529b\u5faa\u73af~~dp\n\n\u6211\u6700\u5f00\u59cbTLE\u4e00\u4e2a\u70b9\u662f\u56e0\u4e3a\uff0c\u6211\u987a\u4fbf\u628a\u8fde\u6210\u957f\u5ea6\u4e3a K \u7684\u524d\u7f00\u7684\u65b9\u6cd5\u603b\u6570\u4e5f\u987a\u4fbf\u6c42\u4e86\u4e00\u4e0b\n\n### \u5177\u4f53\u65b9\u6cd5\n\n\u6bcf\u5411\u540e\u79fb\u4e00\u4e2a\u5b57\u6bcd\uff0c\u5c31\u5faa\u73af\u4e00\u4e0b\u5143\u7d20\uff0c\u770b\u770b\u5f53\u524d\u5143\u7d20\u662f\u5426\u4e0e\u8fd9\u5e8f\u5217 \u4ece\u5f53\u524d\u4f4d\u7f6e\u5411\u524d\u904d\n\n\u5386\u6240\u7684\u4e32\u76f8\u7b49\n\n```cpp\nfor(k = i;k > i - a[j].k[11];k--)\n{\n    it--;\n    if(a2[k] != a[j].k[it])\n\t{\n        able = 1;\n    \tbreak;\n    }\n}\n```\n\n\u4e14\n\n```cpp \ndp[k - \u5143\u7d20.size()] == 1\n```\n\n\u624d\u5c06\n```cpp\n\ndp[k] = 1;\n```\n\n\u6700\u540e\u518d\u5728\u4e00\u4e9b\u5730\u65b9\u9002\u5f53\u4f18\u5316\u5c31\u53ef\u4ee5AC\u4e86\n\n\u6211\u7684\u65b9\u6cd5\n\n------------\n```cpp\n#include <cstdio>\n#include <string>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define M 200002\n#define N 202\n#define max(a,b) a >= b? a:b//\u624b\u5199max\nusing namespace std;\nint ans,len1,i,j,len2 = 1;\nchar a2[M];\nbool dp[M];\nstruct node\n{\n\tchar k[12];\n}a[N];//\u4e3b\u8981\u662f\u5b9a\u4e49\u6210\u7ed3\u6784\u4f53\uff0c\u770b\u7740\u597d\u770b\u4e00\u4e9b\uff0c\u53ef\u4ee5\u5b9a\u6210\u4e8c\u7ef4\n\nint main()\n{\n    scanf(\"%s\",a[len2].k);\n    a[len2].k[11] = strlen(a[len2].k);//\u6700\u5927\u957f\u5ea610,11\u5b58\u957f\u5ea6\n    while(a[len2].k[0] != '.')//\u4e0d\u80fd\u5199\u6210a[len2].k !=  \".\"\n\t{\n        len2++;\n        scanf(\"%s\",a[len2].k);\n        a[len2].k[11] = strlen(a[len2].k);\n    }\n    len2--;\n    char x = getchar();//\u53bb\u6389'.'\u540e\u7684\u6362\u884c\u7b26\n    \n    while(~scanf(\"%c\",&x))\n        if(x <= 'Z'&&x >= 'A')\n\t\t{\n            len1++;\n            a2[len1] = x;\n        }\n    //\u81f3\u6b64\uff0c\u8bfb\u5165\u73af\u8282\u7ed3\u675f\n    dp[0] = 1;\n    for(i = 1;i <= len1;i++)\n\t{\n        int k;\n        for(j = 1;j <= len2;j++)\n\t\t{\n            if(i < a[j].k[11]) continue;//i < \u957f\u5ea6\uff0c\u80af\u5b9a\u4e0d\u884c\u7684\u5566\n            bool able = 0;\n            int it = a[j].k[11];//\u56e0\u4e3a\u4e0b\u9762--\n            for(k = i;k > i - a[j].k[11];k--)\n\t\t\t{\n                it--;\n                if(a2[k] != a[j].k[it])\n\t\t\t\t{\n                    able = 1;\n                    break;\n                }\n            }\n            if(!able)\n\t\t\t{\n                dp[i] += dp[i - a[j].k[11]];//\u5c31\u8fd9\u91cc\uff0c\u987a\u4fbf\u6c42\u4e86\u4e0b\u8fde\u6210\u957f\u5ea6\u4e3a K \u7684\u524d\u7f00\u7684\u65b9\u6cd5\u603b\u6570\n                \n                if(dp[i])\n                {\n                \tans = max(ans,i);\n                \tbreak;//\u5fc5\u987b\u52a0\uff0c\u4e0d\u7136\u4f1aTLE\u4e00\u4e2a\u70b9\n\t\t\t\t}\n            }\n        }\n    }\n    printf(\"%d\",ans);\n    return 0;\n}\n\n```\n\n### \u603b\u7ed3\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u80fd\u51cf\u5219\u51cf",
        "postTime": 1543637280,
        "uid": 73992,
        "name": "resftlmuttmotw",
        "ccfLevel": 0,
        "title": "\u7ec8\u4e8e\u8fc7\u4e86"
    },
    {
        "content": "\u7528f[i]\u8868\u793a\u524di\u4e2a\u5b57\u7b26\u662f\u5426\u53ef\u4ee5\u5206\u89e3\u4e3a\u96c6\u5408\u4e2d\u7684\u5b57\u7b26\uff0c\u5982\u679c\u53ef\u4ee5\n\u5219\u4e3a\u771f\uff0c\u4e0d\u53ef\u4ee5\u5219\u4e3a\u5047\uff0c\u4e8e\u662f\u5f88\u5bb9\u6613\u770b\u51fa\uff1af[i]\u4e3a\u771f\u7684\u91cd\u8981\u6761\n\u4ef6\u662f\uff1a\u5b58\u5728\u4e00\u4e2a\u6bd4i\u5c0f\u7684j\uff0c\u6ee1\u8db3f[j]=true\u4e14\u4ece\u7b2cj+1\u5230\u5e95i\u662fP\n\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nstring a[201],str;\nbool f[200001];\nint len=0,n=0;\n\nbool IsChar(char c){//\u5224\u65ad\u662f\u5426\u5b57\u7b26\n    if(c>='A'&&c<='Z'){\n        return true;\n    }\n    return false;\n}\n\nbool check(int p){//\u67e5\u627e\u96c6\u5408\u4e2d\u5339\u914d\u7684\u4e32\n    int t;\n    for(int i=1;i<=n;i++){\n        t=a[i].length();\n        if(p>=t){\n            if(a[i]==str.substr(p-t+1,t)){\n                if(f[p-t]){\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\n\nint main(){\n    string s;\n    while(cin>>s,s!=\".\"){//\u8bfb\u5165P\u96c6\u5408\n        n++;\n        a[n]=s;\n    }\n    int x1,x2;\n    str='.';\n    while(cin>>s){//\u8bfb\u5165\u5b57\u7b26\u4e32\u7684\u7279\u6b8a\u5904\u7406\n        x1=0;x2=s.length()-1;\n        while(!IsChar(s[x1])){\n            x1++;\n        }\n        while(!IsChar(s[x2])){\n            x2--;\n        }\n        str+=s.substr(x1,x2-x1+1);\n        len+=x2-x1+1;\n    }\n    memset(f,false,sizeof(f));\n    f[0]=true;\n    for(int i=1;i<=len;i++){\n        if(check(i)){\n            f[i]=true;\n        }\n        else f[i]=false;\n    }\n    for(int i=len;i>=0;i--){\n        if(f[i]){\n            cout<<i<<endl;\n            break;\n        }\n    }\n    \n    return 0;\n}\n```",
        "postTime": 1520398808,
        "uid": 39533,
        "name": "Rocket_raccoon_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u5047\u8bbe\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4e2d\u7684\u524d\u7f00\u53ef\u4ee5\u8fbe\u5230\u7b2ci\u4f4d\uff0c\u800c\u6700\u540e\u4e00\u4f4d\u5728\u96c6\u5408\u4e2d\u7684\u5b57\u7b26\u4e32\u4e3a\u540e\u9762j\u4f4d\uff0c\u90a3\u4e48\u4e5f\u5c31\u662f\u8bf4\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4f4d\u5230\u7b2ci-j\u4f4d\u90fd\u53ef\u4ee5\u5206\u89e3\u6210\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2aBoolean\u7684\u6570\u7ec4\u8bb0\u5f55\u53ef\u4ee5\u8fbe\u5230\u7684\u524d\u7f00\u7684\u6570\u4f4d\u4e3atrue\uff0c\u5982\u679cb[i-j]\u4e3atrue\uff0c\u800c\u5b57\u7b26\u4e32\u4e2dj+1\u4f4d\u5230i\u4f4d\u4e3a\u96c6\u5408\u4e2d\u7684\u5143\u7d20\uff0c\u90a3\u4e48b[i]\u4e5f\u4e3atrue\u3002\u8fd9\u6837\u5c31\u6210\u4e86\u52a8\u6001\u89c4\u5212\u4e86\u3002\n\n[/color][codep ]\n\n```cpp\nvar\n  s:array[1..300]of string;\n  a:array[1..300]of longint;\n  b:array[-10..200000]of boolean;\n  ss,z:ansistring;\n  c:char;\n  n,m,i,j:longint;\nprocedure init;//\u8f93\u5165\u65f6\u91c7\u7528\u5b57\u7b26\u8f93\u5165\u800c\u975e\u5b57\u7b26\u4e32\u6bd4\u8f83\u7701\u65f6\u95f4\u3002\nbegin\n  m:=1; \n  c:='a';\n  while c<>'.' do\n    begin\n      read(c);\n      if c in ['A'..'Z'] then\n        s[m]:=s[m]+c\n      else\n        inc(m);\n    end;\n  ss:='';\n  while not eof do\n    begin\n      readln(z);\n      ss:=ss+z;\n    end;\n  n:=length(ss); \n  b[0]:=true;\n  for i:=1 to m do\n    a[i]:=length(s[i]);\nend;\nprocedure work;\nbegin\n  for i:=1 to n do\n    for j:=1 to m do\n      if b[i-a[j]] then\n        if copy(ss,i-a[j]+1,a[j])=s[j] then\n          begin\n            b[i]:=true;\n            break;\n          end;\n  for i:=n downto 0 do//\u6700\u540e\u8f93\u51faBoolean\u6570\u7ec4\u4e2d\u6700\u5927\u7684\u4e00\u4f4d\u3002\n    if b[i] then\n      begin\n        writeln(i);\n        exit;\n      end;\nend;\nbegin\n  init;\n  work;\nend.\n```\n[/codep ]\n\u672c\u7a0b\u5e8f\u53c2\u8003\u8fc7\u4ed6\u4eba\u7684\u7a0b\u5e8f\u3002\u3002\n",
        "postTime": 1459325545,
        "uid": 10099,
        "name": "nbqdd_2003",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5c31\u662f\u7c7b\u4f3c\u5b8c\u5168\u80cc\u5305\u548cN^2\u7684LIS\u7684\u601d\u60f3\uff0c\u5982\u679c\u8fde\u80cc\u5305\u548cLIS\u90fd\u6ca1\u5b66\u8fc7\u7684\u53ef\u4ee5\u767e\u5ea6DD\u5927\u725b\u7684\u80cc\u53059\u8bb2\u548cLIS\uff0c\u90fd\u662f\u5f88\u7ecf\u5178\u7684DP\u6a21\u578b\uff0c\u518d\u56de\u6765\u770b\u8fd9\u9898\u5e94\u8be5\u5c31\u80fd\u8fce\u5203\u800c\u89e3\u4e86\u3002  \n\n\u7136\u540e\u518d\u638c\u63e1\u4e86\u57fa\u672c\u80cc\u5305\u601d\u60f3\u540e\u56de\u5230\u6765\u770b\u8fd9\u4e00\u9898\u7684\u601d\u8def\uff0c\u5c31\u662f\u5148\u628a\u6240\u4ee5\u7684\u6a21\u5f0f\u4e32P\u90fd\u5b58\u8d77\u6765\uff0c\u4e4b\u540e\u6211\u4eec\u9010\u4e2a\u5bf9i\u4f4d\u7f6e\u5c1d\u8bd5\u8be5\u4f4d\u7f6e\u80fd\u4e0d\u80fd\u653e\u4efb\u610f\u4e00\u4e2a\u6a21\u5f0f\u4e32\uff0c\u80fd\u7684\u8bdd\u5c31\u628adp[i]\u6807\u8bb0\u4e3a1\uff0c\u5f53\u7136\u8fd8\u8981\u5148\u67e5\u770bdp[i-\u6a21\u5f0f\u4e32\u957f\u5ea6]\u4e3a\u4e0d\u4e3a1\uff0c\u5982\u679c\u4f60\u524d\u9762\u90fd\u5339\u914d\u4e0d\u4e0a\u4e86\uff0c\u540e\u9762\u8fd9\u91cc\u5339\u914d\u4e0a\u4e86\u4e5f\u6ca1\u6709\u7528\uff0c\u6bd5\u7adf\u8981\u627e\u7684\u662f\u6700\u957f\u8fde\u7eed\u80fd\u5339\u914d\u7684\u3002  \n\n\u524d\u9762\u4e5f\u6709\u5f88\u591a\u5927\u4f6c\u628a\u601d\u8def\u8bb2\u7684\u5f88\u597d\u4e86\uff0c\u8fd9\u91cc\u5c31\u662f\u968f\u4fbf\u518d\u5199\u5199\uff0c\u4ee3\u7801\u4e5f\u81ea\u8ba4\u8fd8\u7b97\u6e05\u6670\uff0c\u7136\u540e\u4e3b\u8981\u53d1\u8fd9\u7bc7\u6587\u7ae0\u7684\u539f\u56e0\u662f\u60f3\u63d0\u9192\u5927\u5bb6\u6ce8\u610f\u4e24\u4e2a\u5751\u70b9\uff0c\u7b2c\u4e00\u4e2a\u5c31\u662f\u8fb9\u754c\u95ee\u9898\uff0c\u8fd9\u91cci\u7684\u8fb9\u754c\u662f\u9700\u8981<=\u800c\u4e0d\u662f<\u5b57\u7b26\u4e32\u957f\u5ea6\u7684,\u7b2c\u4e00\u6b21\u4e60\u60ef\u6027\u6ca1\u52a0=\u7136\u540e\u4e00\u4e2a\u6570\u636eWA\u4e86\uff08\u8fd9\u91cc\u81ea\u884c\u601d\u8003\u4e00\u4e0b\u4e3a\u4ec0\u4e48\uff0c\u5e94\u8be5\u662f\u5f88\u7b80\u5355\u7684\uff09\u3002  \n\n\u7b2c\u4e8c\u4e2a\u5751\u70b9\u8ddf\u8fd9\u9898\u65e0\u5173\uff0c\u7b97C++\u65b9\u9762\u7684\uff0c\u5c31\u662fsize_type\u7c7b\u578b\u8ddfint\u7c7b\u578b\u505a\u8fd0\u7b97\u540e\u8981\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\uff0c\u4e0d\u5982\u4f1a\u51fa\u73b0\u5947\u602a\u7684BUG\uff0c\u4f8b\u5982\u6211\u7b2c\u4e00\u6b21\u6ca1\u505a\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5c31\u53d1\u73b0if\u600e\u4e48\u6837\u90fd\u80fd\u8fdb\u53bb\uff0c\u8f93\u51fa\u53c8\u662f\u6b63\u786e\u7684\uff08\u56e0\u4e3a\u8f93\u51fa\u65f6\u7684%d\u4e5f\u7b97\u505a\u4e86\u8f6c\u6362\uff09\n![](![](https://img-blog.csdnimg.cn/20190521204122240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE5ODk1Nzg5,size_16,color_FFFFFF,t_70))\n\n\u6700\u540e\u9644\u4e00\u4e0bAC\u4ee3\u7801  \n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<set> \nusing namespace std;\nset<string> p;\nint dp[200005]={0};\nint main()\n{\n\tios::sync_with_stdio(false);\n\tstring pi;\n\twhile(cin>>pi&&pi!=\".\")\n\t{\n\t\tp.insert(pi);\n\t}\n\tstring s;\n\twhile(cin>>pi)\n\t{\n\t\ts+=pi;\n\t}\n\tdp[0]=1;\n\t//\u6ce8\u610fi\u7684\u8fb9\u754c\u662f<=size() \n\tfor(int i=1;i<=s.size();i++)//\u7406\u8bba\u4e0a\u6765\u8bf4\u8fd9\u91cc\u7684size()\u6700\u597d\u4e5f\u5148\u53d6\u51fa\u6765\uff0c\u4e00\u662f\u7701\u5e38\u6570\u65f6\u95f4\uff0c\u4e8c\u662f\u907f\u514d\u7384\u5b66BUG \n\t{\n\t\tfor(set<string>::iterator it=p.begin();it!=p.end();it++)\n\t\t{\n\t\t\tstring tmp=(*it);\t\n\t\t\tif((int)(i-tmp.size())>=0)//size_type\u7c7b\u578b\u505a\u8fd0\u7b97\u8981\u5f3a\u5236\u8f6c\u6362\uff0c\u4ee5\u514d\u51fa\u73b0\u7384\u5b66BUG \n\t\t\t{\n\t\t\t\tif(dp[i-tmp.size()]&&tmp==s.substr(i-tmp.size(),tmp.size()))//\u7c7b\u5b8c\u5168\u80cc\u5305\u601d\u60f3 \n\t\t\t\t{\n\t\t\t\t\tdp[i]=1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//\u6ce8\u610fi\u7684\u8fb9\u754c\u662f=size() \n\tfor(int i=s.size();i>=0;i--)\n\t{\n\t\tif(dp[i])\n\t\t{\n\t\t\tprintf(\"%d\",i);\n\t\t\treturn 0;\n\t\t}\n\t\t\t\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1558442884,
        "uid": 44268,
        "name": "LeeCarry",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u6211\u4f7f\u7528\u4e86\u52a8\u89c4\u52a0\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u786e\u4fdd\u4e0d\u4f1a\u70b8\uff0c\u52a8\u89c4\u662f\u4e2a\u597d\u4e1c\u897f\u4e0b\u9762\u8bf7\u770b\u4ee3\u7801\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node\n{\n\tchar hh[101];//\u6bcf\u79cd\u65b9\u6848\n\tint cd;//\u65b9\u6848\u957f\u5ea6\n} a[1010];\nchar b[200005];//\u9700\u5408\u6210\u7684\u6570\u7ec4\nchar tmp[200005];\nint f[200005];//\u8bb0\u5fc6\u5316\u6570\u7ec4\nint m;\nint l;\nint ans=0;\nint cmp(node x,node y)//\u6309\u957f\u5ea6\u6392\u5e8f\n{\n\treturn x.cd<y.cd;\n}\nint dp(int cd,char* qs)\n{\n\tif(f[cd])//\u8bb0\u5fc6\u5316\u641c\u7d22\u52a8\u89c4\u65b9\u6cd5\n\t{\n\t\treturn f[cd];\n\t}\n\tint i;\n\tfor(i=0; i<m; i++)//\u679a\u4e3e\u6bcf\u4e2a\u65b9\u6848\n\t{\n\t\tchar* t=strstr(qs,a[i].hh);//\u8fd9\u91cc\u5982\u679c\u4e0d\u61c2\u7684\u8bdd\u53ef\u4ee5\u53bb\u8fd9\u91cc\u770b\u770b\n\t\tif(cd+a[i].cd<=l&&t==qs)//\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\n\t\t{\n\t\t\tdp(cd+a[i].cd,t+a[i].cd);//\u7ee7\u7eed\u5f80\u4e0b\u8d70\n\t\t}\n\t}\n\tif(ans<cd)//\u8bb0\u4e0b\u7ed3\u679c\n\t{\n\t\tans=cd;\n\t}\n\tf[cd]=cd;//\u8bb0\u5fc6\n\treturn cd;\n}\nint main()\n{\n\tint i,j,k;\n\twhile(1)\n\t{\n\t\tcin>>a[m].hh;\n\t\ta[m].cd=strlen(a[m].hh);\n\t\tif(a[m].cd==1&&a[m].hh[0]=='.')\n\t\t{\n\t\t\tbreak;\n\t\t}\n\t\tm++;\n\t}\n\tsort(a,a+m,cmp);\n\twhile(cin>>tmp)//\u8fd9\u91cc\u662f\u6839\u636e\u8f93\u5165\u7684\u8fd4\u56de\u5224\u65ad\u7684\n\t{\n\t\tstrcat(b,tmp);\n\t}\n\tl=strlen(b);\n\tdp(0,b);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n```\n\n//strstr\u770b\u4e0d\u61c2\u7684\u53ef\u4ee5\u6765[\u8fd9\u91cc](https://www.cnblogs.com/xzxl/p/7243490.html)",
        "postTime": 1532880576,
        "uid": 89766,
        "name": "Mr_\u5b8f\u4f1f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "\u9996\u5148\u6765\u4e00\u53e5\uff1a\n\n\u5927\u4f6c\u4eec\u90fd\u7528\u9ad8\u7ea7\u5b57\u7b26\u4e32\u7b97\u6cd5\u78be\u538b\u6211\uff0c\u6211\u4e00\u4e2a\u9898\u89e3\u90fd\u6ca1\u770b\u61c2\u2026\u2026\n\n\u597d\u4e86\uff0c\u6b65\u5165\u6b63\u8f68\uff08~~\u63a5\u4e0b\u6765\u8bb2\u7684\u90fd\u662f\u90aa\u95e8\u6b6a\u9053~~\uff09\uff1a\n\nbool\u52a8\u6001\u89c4\u5212\u76f8\u4fe1\u5404\u4f4d\u90fd\u60f3\u5230\u4e86\uff0c\u5b83\u7684\u65b9\u7a0b\u662f\uff1a\n\n### **F[i]=F[j]&Word(j+1,i)     //(j<i)**\n\nF\u662f\u4e00\u4e2abool\u6570\u7ec4\uff0cF[i]\u8868\u793a\u4ece1\u5230\u662f\u5426\u662f\u5408\u6cd5\u524d\u7f00\uff0c\u82e5\u662f\u5408\u6cd5\u524d\u7f00\u5219\u4e3aTrue,Word(j+1,i)\u8868\u793aj+1\u5230i\u8fd9\u4e00\u6bb5\u662f\u5426\u662f\u4e00\u4e2a\u7ed9\u51fa\u7684\u96c6\u5408\uff0c\u662f\u5219\u4e3aTrue\uff1b\n\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u7ec6\u8282\uff1a\u82e5F[i]\u672c\u8eab\u4e3aTrue\u5c31\u4e0d\u7528\u518d\u7528\u6570\u7ec4\u63a8\uff0c\u56e0\u4e3a\u672c\u8eab\u4e3aTrue\u7684F[i]\u53ef\u80fd\u4f1a\u88ab\u540e\u9762\u63a8\u51fa\u7684False\u6539\u6210False\uff1b\n\n\u73b0\u5728\u91cd\u8981\u7684\u95ee\u9898\u662f\uff0c\u5982\u4f55\u5feb\u901f\u5730\u5224\u65ad\u51faWord(j+1,i)\u662f\u4e00\u4e2a\u7ed9\u51fa\u7684\u96c6\u5408\uff1f\n\n### **\u8fd9\u5c31\u9700\u8981\u7528\u5230Trie**\n\nTrie\u662f\u4ec0\u4e48\uff1f\u2014\u2014\n\n\uff08\u4e0b\u9762\u662f\u6765\u81ea@henry_y\u7684\u4e00\u5f20\u56fe\uff09\n\n![](https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268/sign=3b8ccc85354e251fe2f7e3fe9f87c9c2/dcc451da81cb39dbcc4509e9d5160924aa183083.jpg)\n\n\u82e5\u6709\u4e00\u4e2a\u5355\u8bcd\u53ebten,\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7t->e->n\u7684\u65b9\u5f0f\u5206\u522b\u50a8\u5b58\u5728\u6bcf\u4e2a\u4e0d\u540c\u7684\u8282\u70b9\u4e2d\uff0c\u4ece\u6839\u8282\u70b9\uff08\u8bbe\u4e3a\u7a7a\uff09\u5230\u53f6\u8282\u70b9\uff08\u8fd9\u91cc\u662fn\uff09\u7684\u8def\u5f84\u5c31\u662f\u6574\u4e2a\u5355\u8bcd\u7684\u540d\u79f0\uff1b\n\n\u56e0\u6b64\u6211\u4eec\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c\u6bcf\u6b21\u5224\u65adWord\u7684\u6240\u8017\u65f6\u95f4\u5c31\u662f\u626b\u4e00\u904d\u5b57\u7b26\u4e32\u7684\u65f6\u95f4\uff0c\u5f88\u7701\u4e8b\uff1b\n\n\u5728\u672c\u9898\u4e2d\uff0c\u5c06\u8981\u7528\u5230Trie\u7684\u6700\u4e3b\u8981\u7684\u4e24\u79cd\u64cd\u4f5c\uff1a\u642d\u5efa\u548c\u50a8\u5b58\uff1b\n\n### **\u5173\u4e8e\u642d\u5efa\uff1a**\n\n\u6211\u4e5f\u4e0d\u77e5\u9053\u8be5\u5982\u4f55\u89e3\u91ca\uff0c\u8fd8\u662f\u653e\u4ee3\u7801\u597d\u2014\u2014\n```\nvoid Build(string Name){\n\tint Len=Name.size(),From=0;\n    //Len\u8868\u793a\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\n    //From\u662f\u5b57\u7b26\u4e32\u5728\u6811\u4e2d\u4e00\u8def\u7ecf\u8fc7\u7684\u70b9\n\tfor(register int i=0;i<Len;i++){\n\t\tint To=AC(Name[i]);//\u7f29\u5c0fASCLL\u7801\n\t\tif(Tree[From][To]==0)\n\t\t\tTree[From][To]=(++Num);\n            //Num\u662f\u6bcf\u4e2a\u8282\u70b9\u72ec\u4e00\u65e0\u4e8c\u7684\u7f16\u53f7\n        //\u82e5\u539f\u6570\u4e2d\u6539\u70b9\u6ca1\u6709\u8fd9\u4e2a\u5b57\u7b26\u7684\u513f\u5b50\n        //\u5c31\u7ed9\u5b83\u52a0\u4e00\u4e2a\n\t\tFrom=Tree[From][To];\n        //\u7ee7\u7eed\u5411\u4e0b\u626b\n\t}\n\tVal[Num]=true;\n    //\u8868\u793a\u4ece\u6839\u5230\u8be5\u8282\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u5b57\u7b26\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u5408\u6cd5\u96c6\u5408\n\treturn;\n}\n```\n\n### **\u5173\u4e8e\u67e5\u627e**\n\n\u6211\u8fd8\u662f\u4e0d\u77e5\u9053\u8be5\u5982\u4f55\u89e3\u91ca\uff0c\u4e0a\u4ee3\u7801\u2014\u2014\n```\nbool Search(string Name){\n\tint Len=Name.size(),From=0,BB=0;\n\tfor(register int i=0;i<Len;i++){\n    \t//\u6cbf\u7740\u521a\u624d\u7684\u8def\u5f84\u4e00\u8def\u641c\u7d22\n\t\tif(Tree[From][AC(Name[i])]==0)\n\t\t\treturn false;\n        //\u5982\u679c\u4e2d\u95f4\u5c31\u65ad\u6389\u4e86\u90a3\u80af\u5b9a\u662f\u975e\u6cd5\u7684\n\t\tif(i==Len-1)\n\t\t\tBB=Tree[From][AC(Name[i])];\n\t\tFrom=Tree[From][AC(Name[i])];\n\t}\n\tif(Val[BB]==true)\n\t\treturn true;\n    //\u8fd9\u91cc\u8981\u6ce8\u610f\uff0c\u4e00\u5b9a\u8981\u662f\u6784\u6210\u7ed9\u51fa\u7684\u96c6\u5408\u624d\u7b97\u5408\u6cd5\n\treturn false;\n}\n```\n\u6700\u540e\u662f\u4ee3\u7801\uff1a\n\n```\n#include \"bits/stdc++.h\"\nusing namespace std;\n\nint Tree[9920][31],Num,N;\nbool F[220000],Val[9920];\nstring BigS,Add,In;\n\nint AC(char Name){\n\treturn Name-'A';\n}\n\nvoid Build(string Name){\n\tint Len=Name.size(),From=0;\n\tfor(register int i=0;i<Len;i++){\n\t\tint To=AC(Name[i]);\n\t\tif(Tree[From][To]==0)\n\t\t\tTree[From][To]=(++Num);\n\t\tFrom=Tree[From][To];\n\t}\n\tVal[Num]=true;\n\treturn;\n}\n\nbool Search(string Name){\n\tint Len=Name.size(),From=0,BB=0;\n\tfor(register int i=0;i<Len;i++){\n\t\tif(Tree[From][AC(Name[i])]==0)\n\t\t\treturn false;\n\t\tif(i==Len-1)\n\t\t\tBB=Tree[From][AC(Name[i])];\n\t\tFrom=Tree[From][AC(Name[i])];\n\t}\n\tif(Val[BB]==true)\n\t\treturn true;\n\treturn false;\n}\n\nint main(void){\n\tcin>>In;\n\twhile(In!=\".\"){\n\t\tBuild(In);//\u642dTrie \n\t\tcin>>In;\n\t}\n\tBigS=\" \";\n\twhile(cin>>Add)\n\t\tBigS=BigS+Add;\n\t//\u53e4\u602a\u7684\u8f93\u5165 \n\tN=BigS.size();\n\tF[0]=true;\n\tfor(register int i=1;i<N;i++)\n\t\tfor(int j=0;j<=9&&(i-j-1)>=0;j++)\n\t\t\tif(F[i]==false)\n\t\t\t\tF[i]=Search(BigS.substr(i-j,j+1))&F[i-j-1];\n\t//\u63a8\u51fa\u65b9\u7a0b \n\tfor(register int i=N-1;i>=0;i--){\n\t\tif(F[i]==true){\n\t\t\tcout<<i<<endl;\n\t\t\treturn 0;\n\t\t}\n\t}//\u4ece\u540e\u5f80\u524d\u627e\u51fa\u6700\u5927\u7684\u7b54\u6848 \n\treturn 0;\n}\n```\n",
        "postTime": 1590926189,
        "uid": 86624,
        "name": "\u6d1b\u8c37Onlinejudge",
        "ccfLevel": 0,
        "title": "P2580\u7684Trie\u6811\u505a\u6cd5"
    },
    {
        "content": "\u867d\u7136\u662fDP\u9898 \u4f46\u849f\u84bb ~~TCL~~ \u770b\u4e0d\u51fa\u6765\u662fDP\n\n\u6211\u7684\u601d\u8def\u662f\uff1aKMP + DFS + \u526a\u679d\n\n\u5f00\u4e2avector\u8bb0\u5f55\u4e0b\u5b50\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u5728 S \u4e2d\u9996\u5c3e\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u7528KMP\u6765\u5b9e\u73b0\u3002\uff08~~\u6570\u636e\u8f83\u5927\uff0cKMP\u4e0d\u4f1a\u8d85\u65f6~~\uff09\n\n\u7136\u540e\u7528DFS\u4ece\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u5f80\u540e\u8d70,\u76f4\u5230\u8d70\u4e0d\u901a\uff0c\u6bd4\u8f83\u8bb0\u5f55\u8def\u7a0b\u7684\u6700\u5927\u503c\u3002\n\n\u5982\u679c\u4e0d\u526a\u679d\uff0c\u6700\u540e\u4e00\u4e2a\u70b9\u4f1aT\uff0c\u4e3a\u4ec0\u4e48\u4f1aT\uff1f \u56e0\u4e3a\u8d70\u4e86\u91cd\u590d\u7684\u4f4d\u7f6e\uff0c\u6240\u4ee5\n\u6211\u4eec\u5f00\u4e00\u4e2avis[maxn] , \u8bb0\u5f55\u4e0b\u53bb\u7684\u4f4d\u7f6e\u8d70\u6ca1\u8d70\u8fc7 \uff0c\u907f\u514d\u8d70\u91cd\u590d\u7684\u8def\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define mem(a,b) memset(a,b,sizeof(a))\n#define fo1(a,b) for(int a=0;a<b;++a)\n#define fo2(a,b) for(int a=1;a<=b;++a)\n#define inf 0x3f3f3f3f\nusing namespace std;\nconst int maxn=2e5+5;\nconst int mod=1e9+7;\nint nxt[15];\nvector <int> v[maxn]; //\u9996\u5c3e\u4f4d\u7f6e\nbool vis[maxn]; \nint ans=0;\nvoid getnxt(string s2,int l2){  \n    int i=0,j=1;\n    while(j<l2){\n        if(s2[i]==s2[j])\n            nxt[j++]=++i;\n        else if(!i)\n            nxt[j++]=0;\n        else\n            i=nxt[i-1];\n    }\n}\nvoid KMP(string s1,string s2,int l1,int l2){\n    int i=0,j=0;\n    while(i<l1){\n        if(s1[i]==s2[j])\n            i++,j++;\n        else if(!j)\n            i++;\n        else\n            j=nxt[j-1];\n        if(j==l2){\n        v[i-j].push_back(i-j-1+l2); //\u8bb0\u5f55\u9996\u5c3e\u4f4d\u7f6e\n        j=nxt[j-1];\n        }\n    }\n}\nvoid dfs(int x){\n\n    int len=v[x].size();\n    if(len==0){\n        ans=max(ans,x);\n    }\n    fo1(i,len){\n        if(!vis[v[x][i]+1]){  //\u770b\u770b\u8981\u53bb\u7684\u70b9\u8d70\u6ca1\u8d70\u8fc7\n        vis[v[x][i]+1]=1;\n        dfs(v[x][i]+1);\n        }\n    }\n}\nint main()\n{\n    string s1,s2[205];\n    int l=0;\n    while(cin>>s2[++l]){\n        if(s2[l]==\".\")\n        break;\n    }\n    string t;\n    while(cin>>t)\n    s1+=t;\n    int l1=s1.size();\n    fo2(i,l-1){\n    int l2=s2[i].size();\n    mem(nxt,0);\n    getnxt(s2[i],l2);\n    KMP(s1,s2[i],l1,l2);\n    }\n    mem(vis,0);\n    dfs(0);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n",
        "postTime": 1585217827,
        "uid": 265539,
        "name": "Mint_Flipped",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010[USACO2.3]\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "#### \u770b\u5230\u5927\u4f6c\u4eec\u90fd\u7528dp, \u672c\u4eba\u5f31\u5f31\u7684\u53d1\u4e00\u53d1\u5b57\u5178\u6811\u7684\u9898\u89e3\u5427 \u56e0\u4e3a\u521a\u505a\u5b8cp2292, \u8fd9\u4fe9\u9898\u5dee\u4e0d\u591a, \u4f46\u662f\u4ea4\u4e0a\u53bb\u53d1\u73b0\u4e0d\u5bf9, ~~\u4ed4\u7ec6\u770b\u9898\u540e\u53d1\u73b0\u6b64\u9898\u662f**\u5927\u5199\u5b57\u6bcd**~~\n\u5b57\u5178\u6811\u957f\u8fd9\u4e2a\u6837\u5b50, \u53ef\u4ee5\u770b\u621026\u53c9\u6811. \u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u670926\u4e2a\u5143\u7d20\u7684\u6570\u7ec4, \u4ee3\u8868\u5b50\u8282\u70b9\u7684\u503c. \u4ece\u6839\u8282\u70b9\u5230\u6bcf\u4e2a\u53f6\u5b50\u8282\u70b9\u7684\u94fe\u4ee3\u8868\u4e00\u4e2a\u5355\u8bcd, \u67e5\u8be2\u5f88\u65b9\u4fbf\n\n![\u5b57\u5178\u6811](https://gss0.bdstatic.com/-4o3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=27e168080fb30f242197e451a9fcba26/d62a6059252dd42a745cc2c2033b5bb5c9eab806.jpg)\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u67e5\u8be2, \u7528on\u6570\u7ec4\u8868\u793a\u6b64\u70b9\u662f\u5426\u80fd\u591f\u5339\u914d. \u6bd4\u5982\u8fd9\u6837:\n```cpp\n\tfor (char *i = str; *i; ++i) {\n\t\tp = trie[p][*i - 'A'];\n\t\tif (!p) //0\u8bf4\u660e\u5b57\u5178\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u5355\u8bcd\n\t\t\tbreak;\n\t\tif (end[p]) //\u7ed3\u675f\u4ee3\u8868\u5355\u8bcd\n\t\t\ton[i - str] = 1; //\u5f85\u4f1a\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u5f80\u540e\u63a5\u7740\u4e0a\u6811\u67e5\u8be2\n\t}\n```\n\u5982\u679c\u80fd\u5339\u914d, \u518d\u4ece\u8fd9\u4e2a\u70b9\u91cd\u65b0\u4e0a\u6811\u67e5\u8be2. \u6bd4\u5982\u8fd9\u6837:\n```cpp\n\tfor (int t = 0; str[t]; ++t)\n\t\tif (on[t]) {\n\t\t\tans = t + 1;\n\t\t\tp = 0; //\u521d\u59cb\u5316p\n\t\t\tfor (char *i = str + ans; *i; ++i) {\n\t\t\t\tp = trie[p][*i - 'A'];\n\t\t\t\tif (!p) //0\u8bf4\u660e\u5b57\u5178\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u5355\u8bcd\n\t\t\t\t\tbreak;\n\t\t\t\tif (end[p]) //\u7ed3\u675f\u4ee3\u8868\u5355\u8bcd\n\t\t\t\t\ton[i - str] = 1; //\u5f85\u4f1a\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u5f80\u540e\u63a5\u7740\u4e0a\u6811\u67e5\u8be2\n\t\t\t}\n\t\t}\n```\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u591a\u6b21\u67e5\u8be2, \u5339\u914d\u591a\u4e2a\u5355\u8bcd\u4e86\n\nac\u4ee3\u7801:\n```cpp\n#include <stdio.h>\n#include <string.h>\n#define DIC_NUM 205\n#define DIC_LEN 15\n#define TEXT_LEN 200010\nshort trie[DIC_LEN * DIC_NUM * 2 + 5][26], now = 1; //\u5b57\u5178\u6811 trie[i][j]\u8868\u793ai\u8282\u70b9, \u7b2cj\u4e2a\u5b57\u6bcd\nbool end[DIC_LEN * DIC_NUM * 2 + 5]; //\u8fd9\u4e2a\u70b9\u662f\u5426\u6709\u7ed3\u675f\u7684\u5355\u8bcd\ninline void insert(char *str) {\n\tshort p = 0; //\u5f53\u524d\u8282\u70b9\u4f4d\u7f6e  0:\u6839\u8282\u70b9\n\tfor (char *i = str; *i; ++i) {\n\t\tshort &check = trie[p][*i - 'A'];\n\t\tif (!check) //\u5982\u679c\u8fd9\u4e2a\u5b57\u6bcd\u6ca1\u6709\n\t\t\tcheck = now++; //\u5206\u914d\u5185\u5b58\n\t\tp = check;\n\t}\n\tend[p] = 1;\n}\nbool on[TEXT_LEN]; //\u4e0a\u6811\u67e5\u8be2\u7684\u4f4d\u7f6e \u5b8c\u6574\u5339\u914d\u7684\u4f4d\u7f6e\ninline int find(char *str) {\n\tint ans = 0;\n\tshort p = 0;\n\tfor (char *i = str; *i; ++i) {\n\t\tp = trie[p][*i - 'A'];\n\t\tif (!p) //0\u8bf4\u660e\u5b57\u5178\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u5355\u8bcd\n\t\t\tbreak;\n\t\tif (end[p]) //\u7ed3\u675f\u4ee3\u8868\u5355\u8bcd\n\t\t\ton[i - str] = 1; //\u5f85\u4f1a\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u5f80\u540e\u63a5\u7740\u4e0a\u6811\u67e5\u8be2\n\t}\n\tfor (int t = 0; str[t]; ++t)\n\t\tif (on[t]) {\n\t\t\tans = t + 1; //\u7531\u4e8e\u5b57\u7b26\u4e32\u4ece0\u5f00\u59cb, \u8fd9\u91cc + 1\n\t\t\tp = 0; //\u521d\u59cb\u5316p\n\t\t\tfor (char *i = str + ans; *i; ++i) {\n\t\t\t\tp = trie[p][*i - 'A'];\n\t\t\t\tif (!p) //0\u8bf4\u660e\u5b57\u5178\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u5355\u8bcd\n\t\t\t\t\tbreak;\n\t\t\t\tif (end[p]) //\u7ed3\u675f\u4ee3\u8868\u5355\u8bcd\n\t\t\t\t\ton[i - str] = 1; //\u5f85\u4f1a\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u5f80\u540e\u63a5\u7740\u4e0a\u6811\u67e5\u8be2\n\t\t\t}\n\t\t}\n\treturn ans;\n}\nchar str[TEXT_LEN];\nint main() {\n\tchar buffer[100] = { 0 };\n\tscanf(\"%s\", buffer);\n\twhile (buffer[0] != '.')\n\t\tinsert(buffer), scanf(\"%s\", buffer);\n\twhile (scanf(\"%s\", buffer) == 1)\n\t\tstrcat(str, buffer); //\u8fde\u63a5\u5b57\u7b26\u4e32\n\tprintf(\"%d\\n\", find(str));\n\treturn 0;\n}\n\n```\n\n",
        "postTime": 1565576894,
        "uid": 126934,
        "name": "Nuclear_Missile",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    },
    {
        "content": "%%%%%%\u697c\u4e0bxzy\u5927\u4f6c\u7384\u5b66\u505a\u6cd55msAC%%%%%%\n\n\u4e3a\u4e86\u8ffd\u9010\u5927\u4f6c\u7684\u811a\u6b65\uff0c\u6211\u91cd\u65b0\u505a\u4e86\u4e00\u904d\u6b64\u9898\u3002\n\n\u5c06\u539f\u6765\u4e8c\u53c9\u7684trie\u6811\u53d8\u6210\u4e86\u4e00\u822c\u7684\uff0c\u8fd9\u6837\u5c31\u4f1a\u5feb\u4e00\u4e9b\uff0c\u4e0d\u8fc7\u76f8\u5bf9\u7684\uff0c\u7a7a\u95f4\u6d88\u8017\u66f4\u5927\u3002\n\n\u7136\u540e\u5c3144ms\u4e86\u3002\n\n\u53ef\u60dc\u4e0e\u5927\u4f6c\u8fd8\u662f\u65e0\u6cd5\u76f8\u63d0\u5e76\u8bba\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<climits>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#include<vector>\nusing namespace std;\nchar s[77],ss[200005];\nint a[20005][28],tot,ans,ll;\nbool f[200005],val[2005];\nvoid tri(){\n    int i,j,l=strlen(s),from=0,sum;\n    for(i=0;i<l;i++){//\u5efa\u7acbtrie\u6811\n        sum=s[i]-'A'+1;\n        if(a[from][sum])from=a[from][sum];\n        else {tot++;a[from][sum]=tot;from=tot;}\n    }\n    val[from]=1;\n}\nvoid init(int x){//\u8fdb\u53bb\u627e\u5355\u8bcd\n    int i,j,from=0,sum;\n    for(i=x;i<ll;i++){\n        sum=ss[i]-'A'+1;\n        if(a[from][sum])from=a[from][sum];\n        else break;\n        if(val[from])f[i]=1;\n    }\n}\nint main()\n{\n    int i,j;\n    while(1){scanf(\"%s\",s);if(s[0]=='.')break;tri();}\n    while(scanf(\"%s\",s)!=EOF)strcat(ss,s);\n    ll=strlen(ss);init(0);\n    for(i=1;i<ll;i++)if(f[i-1]){init(i);ans=i;}\n    if(f[ll-1])ans=ll;//\u6ce8\u610f\u4e0d\u8981\u6389\u4e86\u8fd9\u4e00\u53e5\u3002\n    printf(\"%d\",ans);\n    return 0;\n}\n```",
        "postTime": 1495795881,
        "uid": 20604,
        "name": "litble",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P1470 \u3010\u6700\u957f\u524d\u7f00 Longest Prefix\u3011"
    }
]
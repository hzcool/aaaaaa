[
    {
        "content": "\u8fd8\u662f\u653e\u4e00\u4efd\u4ee3\u7801\u5427\uff0c\u6211\u7684[\u535a\u5ba2](https://www.luogu.org/blog/dazade8/post-new)\u91cc\u5e94\u8be5\u8bf4\u5f97\u6bd4\u8f83\u6e05\u695a\u4e86\uff0c\u7c98\u8d34\u8fc7\u6765\u3002\n\nT2:Number\n\n\u89e3\u6cd5\u4e00\n\n\u66b4\u529b\u8ba1\u7b97\u6570\u5217\uff0c\u7136\u540e\u641c\u7d22\u53ef\u80fd\u7684\u7b54\u6848\u3002\n\n\n\u590d\u6742\u5ea6 O(2^L)\n\n\nL\u4e3a\u6570\u5217\u957f\u5ea6\u3002\n\n\n\u9884\u8ba1\u5f97\u5206 40\n\n\n\u89e3\u6cd5\u4e8c\n\n\u5f53a\uff01=1\u65f6\uff0c\u6ce8\u610f\u5230\u4ee5\u4e0b\u6027\u8d28\uff1a\n\nA(0)=1 A(i)=2A(i-1) (\u5373A(i)=2^n)\n\n\u8fd9\u4e2a\u6570\u5217\u589e\u957f\u5f97\u975e\u5e38\u5feb\uff0c\u4ee5\u81f3\u4e8e\u6bcf\u4e00\u9879\u90fd\u5927\u4e8e\u4e4b\u524d\u6240\u6709\u9879\u7684\u548c\u3002\n\n\u8fd9\u4e2a\u6570\u5217\u662f\u9664\u4e86 b=0\u4e14A(0)=0 \u65f6\u589e\u957f\u5f97\u6700\u6162\u7684\u4e00\u4e2a\uff0c\u610f\u5473\u7740\u5176\u4ed6\u6240\u6709\u6570\u5217\u90fd\u6ee1\u8db3\u6570\u5217\u7684\u6bcf\u4e00\u9879\u90fd\u5927\u4e8e\u4e4b\u524d\u6240\u6709\u9879\u7684\u548c\u8fd9\u6837\u4e00\u4e2a\u6027\u8d28\u3002\n\n\u8fd9\u6837\u5c31\u662f\u4e00\u4e2a\u8d2a\u5fc3\uff0c\u9884\u5904\u7406\u4e00\u4e0b\uff0c\u6bcf\u6b21\u51cf\u53bb\u5c0f\u4e8e\u7b49\u4e8en\u7684\u6700\u5927\u9879\uff0c\u5982\u679c\u6700\u540en\u53ef\u4ee5\u88ab\u51cf\u52300\u610f\u5473\u7740\u539f\u6765\u7684n\u53ef\u4ee5\u88ab\u8868\u793a\uff0c\u53cd\u4e4b\u4e00\u5b9a\u4e0d\u884c\u3002\n\n\u5bf9\u4e8eb=0\u4e14A(0)=0\u7684\u6570\u5217\u7279\u5224\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5355\u6b21\u590d\u6742\u5ea6O(logn)\n\n\n\u5f53a=1\u65f6\uff0c\u8fd9\u4e2a\u6570\u5217\u662f\u4e00\u4e2a\u7b49\u5dee\u6570\u5217\uff0c\u5e76\u4e14\u53ef\u4ee5\u88ab\u8868\u793a\u6210\u4ee5\u4e0b\u5f62\u5f0f\uff1a\n\n{A(0)+b,A(0)+2b,A(0)+3b,......,A(0)+Nb,......}\n\n\u5982\u679cn\u53ef\u4ee5\u88ab\u8868\u793a\u4e3a\u5176\u4e2d\u82e5\u5e72\u4e2a\u4e0d\u540c\u9879\u7684\u548c\uff0c\u90a3\u4e48\u663e\u7136\u6709\uff1a\n\n\u5173\u4e8ex\uff0cy\u7684\u65b9\u7a0b A(0)x+by=n\n\n\u5b58\u5728\u4e00\u7ec4\u6b63\u6574\u6570\u89e3\uff0c\u4f7f\u5f97y>=(x(x+1))/2\u3002\n\n\u89e3\u5f97\u7684\u65b9\u7a0b\u7684\u610f\u4e49\u662f\u6570\u5217\u4e2d\u9009\u4e86x\u9879\uff0c\u5e76\u4e14\u6bcf\u4e00\u9879\u7684b\u7684\u7cfb\u6570\u4e4b\u548c\u4e3ay\u3002\n\n\u5f88\u660e\u663e\uff0c\u53ea\u6709y>=(x(x+1))/2\u65f6y\u624d\u80fd\u62c6\u5206\u6210\u82e5\u5e72\u4e2a\u4e92\u4e0d\u76f8\u540c\u7684\u81ea\u7136\u6570\u3002\n\nA(0)=0\u6216b=0\u65f6\u8981\u7279\u5224\u3002\u89e3\u65b9\u7a0b\u65f6\u8981\u7279\u522b\u5c0f\u5fc3\uff0c\u76f4\u63a5\u89e3A(0)x+by=n\u5f97\u5230\u7684x\u53ef\u80fd\u662f\u8d1f\u6570\uff0c\u8981\u627e\u5b83\u4e3a\u6b63\u6570\u7684\u89e3\u3002\n\n\n\u5355\u6b21\u590d\u6742\u5ea6O(logn)\n\n\u603b\u4f53\u590d\u6742\u5ea6O(Tlogn)\n\n\u9884\u8ba1\u5f97\u5206 100\n\n\n\u7801\u98ce\u7565\u4e11\u3002\n\n\n```cpp\n    #include<cstdio>\n    #include<cstring>\n    typedef long long ll;\n    ll T,n,a,b,x0;\n    ll num[1000];\n    ll extended_euclid(ll a,ll b,ll &x,ll &y)\n    {\n        if(b==0)\n        {\n            x=1;y=0;\n            return a;\n        }\n        ll n=extended_euclid(b,a%b,x,y);\n        ll tmp=x;\n        x=y;\n        y=tmp-static_cast<ll>(a/b)*y;\n        return n;\n    }\n    bool linear_equation(ll a,ll b,ll c,ll &x,ll &y)\n    {\n        ll n=extended_euclid(a,b,x,y);\n        if(c%n) return false;\n        ll k=c/n;\n        x*=k;\n        y*=k;\n        return true;\n    }\n    ll gcd(ll a,ll b)\n    {\n        return (a%b==0)?b:gcd(b,a%b);\n    }\n    bool cacl()\n    {\n        ll x=0,y=0;\n        if(!linear_equation(x0,b,n,x,y)) return false;\n        ll G=gcd(b,x0);\n        ll b1=b/G,x01=x0/G;\n        if(x<0)\n        {\n            ll gmp1=y%x01,gmp2=(y-y%x01)/x01;\n            y=gmp1;\n            x=x+gmp2*b1;\n        }\n        if(x<0) return false;\n        ll tmp1=x%b1,tmp2=(x-x%b1)/b1;\n        if(tmp1==0) tmp2--,tmp1+=b1;\n        ll tmp3=y+tmp2*x01,tmp4=1ll*(tmp1*(tmp1+1))/2;\n        if(tmp4<=tmp3) return true;\n        else return false;\n    }\n    int main()\n    {\n        ll ans=0;\n        scanf(\"%d\",&T);\n        while(T--)\n        {\n            memset(num,0,sizeof(num));\n            scanf(\"%lld%lld%lld%lld\",&x0,&a,&b,&n);\n            if(n==0) ans+=(x0==0&&b==0);\n            else if(x0==0&&b==0) ans+=(n==0);\n            else if(a==1&&b==0) \n            {\n                if(x0==0) ans+=(n==0);\n                else if(!(n%x0)) ans++;\n            }\n            else if(a==1&&x0==0) \n            {\n                if(b==0) ans+=(n==0);\n                else if(!(n%b)) ans++;\n            }\n            else if(a==1) \n            {\n                if(cacl()) ans++;\n            }\n            else\n            {\n                int x=1;\n                num[0]=x0;\n                while(1)\n                {\n                    num[x]=1ll*num[x-1]*a+b;\n                    if(num[x]>=n) break;\n                    x++;\n                }\n                for(int i=x;i>=1;i--)\n                if(n>=num[i]) n-=num[i];\n                if(n==0) ans++;\n            }\n        }\n        printf(\"%lld\",ans);\n        return 0;\n}\n```",
        "postTime": 1512901279,
        "uid": 26090,
        "name": "\u6253\u6742\u76848",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3996\u3010Number\u3011"
    },
    {
        "content": "\u4e00\u9053\u5f88\u4e0d\u9519\u7684\u6570\u8bba\u9898\u5462~\uff0c\u5c31\u662f\u6709\u70b9\u51b7\u95e8\u3002\n\n\u849f\u84bb\u6570\u8bba\u5168\u8c37\u6700\u83dc\uff0c\u611f\u8c22\u51fa\u9898\u4eba\u7684\u9898\u89e3\u3002\u5728\u6b64\u91cd\u65b0\u603b\u7ed3\u4e00\u4e0b\uff0c~~\u653e\u4e00\u4efd\u7b80\u5355\u70b9\u7684\u4ee3\u7801\u3002~~\n\n________\n\n\u51fa\u9898\u4eba\u7684\u9898\u89e3\u5f88\u8be6\u7ec6\u4e86\uff0c\u6211\u518d\u603b\u7ed3\u4e00\u4e0b\uff1a\n\n\u8fd9\u9898\u6709\u5f88\u591a\u7ec6\u8282\uff0c~~\u8fd8\u4e0d\u80fd\u4e0b\u6570\u636e~~\uff0c\u5bfc\u81f4\u6211WA\u4e86\u4e94\u516d\u6b21\u3002\n\n\u9996\u5148\u662f\u5224$0$\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u4e0d\u80fd\u7a7a\u9009\uff0c\u6240\u4ee5$n=0$\u65f6,$A[0]$\u548c$b$\u90fd\u5fc5\u987b\u4e5f\u662f$0$\u3002\n\n\u5148\u628a\u8fd9\u4e2a\u60c5\u51b5\u5224\u6389\uff0c\u56e0\u4e3a$a$\u65e0\u8bba\u662f\u51e0\uff0c\u8fd9\u79cd\u60c5\u51b5\u90fd\u7b26\u5408\u3002\n\n\u7136\u540e\u662f\u5bf9$a$\u7684\u5206\u7c7b\uff1a\n\n#### a>1\u65f6\uff1a\n\n\u5f88\u663e\u7136\uff0c\u6216\u7b80\u5355\u7528\u5f52\u7eb3\u6cd5\u8bc1\u660e\u4e00\u4e0b\uff0c\u6bcf\u4e00\u9879$A[i]$\u90fd\u662f\u8981\u6bd4\u524d\u9762\u7684\u6240\u6709\u9879\u7684\u548c\u90fd\u8981\u5927\u7684\u3002\u4e0d\u96be\u60f3\u5427~\n\n\u56e0\u4e3a\u6bcf\u4e2a\u6570\u90fd\u662f\u4e0a\u4e00\u4e2a\u6570\u81f3\u5c11\u4e58\u4ee5$2$\u4e4b\u540e\u518d\u52a0\u4e00\u4e2a\u6570\uff0c\u52a0\u7684\u6570$b$\u662f$0$\u65e0\u6240\u8c13\uff0c\u53ea\u8981\u4e0d\u662f\u8d1f\u6570\u5c31\u884c\u3002\u800c\u5bf9\u4e8e$A[0]$\u662f$0$\u7684\u60c5\u51b5\uff0c\u65e2\u7136$A[1]=b$\uff0c\u90a3\u663e\u7136\u8fd8\u662f\u6210\u7acb\u7684\u3002\u9664\u975e$A[0]$\u548c$b$\u90fd\u662f$0$\u5462\uff0c\u8fd9\u79cd\u60c5\u51b5\u5f00\u59cb\u5df2\u7ecf\u5224\u6389\u4e86~\n\n\u65e2\u7136\u6bcf\u4e2a\u6570\u90fd\u6bd4\u524d\u9762\u7684\u6240\u6709\u6570\u7684\u548c\u5927\uff0c\u5982\u679c\u6211\u4e0d\u9009\u62e9\u8fd9\u4e2a\u6570\uff0c\u524d\u9762\u7684\u6570\u662f\u65e0\u6cd5\u5f25\u8865\u8fd9\u4e48\u5927\u7684\u7a7a\u7f3a\u7684\uff0c\u6240\u4ee5\u5012\u7740\u679a\u4e3e\u6bcf\u4e2a\u6570\uff0c\u53ea\u8981$n$\u6bd4\u6b64\u9879\u5927\uff0c\u5c31\u51cf\u53bb\u6b64\u9879\uff0c\u6700\u540e\u5982\u679c$n=0$\uff0c\u6709\u89e3\uff0c\u5426\u5219\u65e0\u89e3\uff0c\u4e0d\u96be\u8bc1\u660e\u3002\n\n#### a=1\u65f6:\n\n\u8fd9\u5c31\u6bd4\u8f83\u9ebb\u70e6\u4e86\uff1a\u4e0d\u4f1aexgcd\u7684\u5efa\u8bae\u53bb\u505a\u4e00\u505a[\u9752\u86d9\u7684\u7ea6\u4f1a](https://www.luogu.org/problem/P1516)\u3002\n\n\u5f53a=1\u65f6\uff0c\u6211\u4eec\u628a\u6bcf\u4e00\u9879\u5217\u51fa\u6765\uff1a\n\n```\nA[1]=A[0]+b; A[2]=A[0]+2*b; A[3]=A[0]+3*b; A[4]=A[0]+4*b;...\n```\n\n\u65e2\u7136\u53ea\u7531$A[0]$\u548c$b$\u7ec4\u6210\uff0c\u89e3\u4e2a$exgcd$\u5c31\u884c\u4e86~\n\n\u7136\u540e\u4f60\u89e3\u51fa\u4e86\u4e00\u7ec4\u89e3\uff1a$x*A[0]+y*b=n$\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u7b80\u5355\u5206\u4e2a\u7c7b\uff1a\n\n**1. \u5f53b=0\u65f6**\uff1a\u53ea\u8981$n$\u80fd\u9664\u5c3d$A[0]$\u5f97\u5230$x$\uff0c\u4f60\u53ea\u8981\u968f\u4fbf**\u9009x\u4e2a\u9879**\u5373\u53ef\u3002\n\n**2. \u5f53A[0]=0\u65f6**\uff1a\u5982\u679c$n$\u80fd\u9664\u5c3d$b$\u5f97\u5230$y$\uff0c\u6211\u4eec\u76f4\u63a5\u9009**\u7b2cy\u9879**\u4e0d\u5c31\u884c\u4e86~\n\n**3. \u5f53\u4e24\u4e2a\u90fd\u7b49\u4e8e\u96f6\u65f6**\uff1a\u7528\u6211\u518d\u8bf4\u4e00\u904d\u5417\uff1f\u3002\u3002\u3002\u5f00\u59cb\u5df2\u7ecf\u5224\u6389\u4e86\u3002\u3002\u3002\n\n**4. \u5f53\u4e24\u4e2a\u90fd\u4e0d\u7b49\u4e8e\u96f6\u65f6\uff1a** \u6211\u4eec\u53d1\u73b0\u6211\u4eec\u5e0c\u671b$y$\u8d8a\u5927\u8d8a\u597d\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u6570\u53ea\u80fd\u9009\u4e00\u6b21\uff0c\u800c\u4e14$b$\u7684\u7cfb\u6570\u6709\u65e0\u6570\u4e2a\u53d6\u503c\uff0c$y$\u8d8a\u5927\u6211\u4eec\u9009\u62e9\u7684\u7a7a\u95f4\u5c31\u8d8a\u5927\u3002\n\n\u800c\u9650\u5236\u662f\uff1a$x$\u5fc5\u987b\u662f\u6b63\u6574\u6570\uff0c\u6211\u4eec\u5c3d\u91cf\u8ba9$x$\u5c0f\uff0c$y$\u5c31\u80fd\u5f88\u5927\uff0c\u4e8e\u662f\uff0c\u89e3\u51fa$x$\u7684\u6700\u5c0f\u6b63\u6574\u6570\u89e3\u3002\u8fd9\u91cc\u6709\u4e2a\u7ec6\u8282\uff1a$x$\u4e0d\u662f\u81ea\u7136\u6570\uff0c\u800c\u662f\u6b63\u6574\u6570\u3002\u5982\u679c\u4f60\u89e3\u51fa\u6765\u7684$x$\u662f$0$\uff0c\u4f60\u5fc5\u987b\u518d\u628a$x$\u52a0\u6570\u53d8\u6210\u6b63\u6570\u3002\uff08\u5bb3\u7684\u6211WA\u4e86\u6b21\uff09\u3002\n\n\u6211\u4eec\u89e3\u51fa\u4e86$x$\u7684\u6700\u5c0f\u89e3\uff0c\u53d1\u73b0\u8fd9$x$\u5373\u4e3a\u9879\u6570\uff08\u4e0d\u8003\u8651$A[0]$\u4e0e$b$\u7684\u5173\u7cfb\uff0c\u5047\u8bbe\u4f60\u7684$A[0]$\u5c31\u662f\u9009\u62e9\u6bcf\u4e00\u9879\u4e2d\u7684$A[0]$\uff0c$b$\u5c31\u662f\u6bcf\u4e00\u9879\u4e2d\u7684$b$\uff09\uff0c\u90a3\u4e48\u5728\u4ec0\u4e48\u65f6\u5019\u7b26\u5408$y$\u80fd\u591f\u53d8\u6210\u6bcf\u4e00\u9879$b$\u7684\u7cfb\u6570\u548c\u5462\uff1f\n\n\u5f88\u663e\u7136\u6211\u4eec\u4ece\u5c0f\u5f00\u59cb\u9009\u62e9\uff0c\u56e0\u4e3a\u60f3\u8ba9$y$\u5269\u4f59\u7684\u8d8a\u5927\u8d8a\u597d\u3002\u90a3\u4e48\u9009\u62e9$x$\u9879\uff0c$y$\u6700\u5c0f\u5373\u4e3a$(1+2+3+...+x) = (1+x)*x/2;$ \u53ea\u8981$y$\u6bd4\u6b64\u503c\u5927\uff0c$y$\u53ef\u4ee5\u7528$x$\u9879$b$\u7684\u7cfb\u6570\u8868\u793a\uff0c\u5c31\u6709\u89e3\u4e86\uff0c\u5426\u5219\u65e0\u89e3\u3002\n\n\u6240\u6709\u60c5\u51b5\u8003\u8651\u5b8c\u4e86\uff0c\u5c31\u653e\u4ee3\u7801\u5427\uff0c~~\u611f\u89c9\u6211\u7684\u7801\u98ce\u8fd8\u662f\u52c9\u5f3a\u53ef\u4ee5\u7684\uff1a~~\n\n```cpp\n#include<algorithm>\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#define ll long long             //\u8bb0\u5f97\u5f00long long\uff0c \u5728x*(x+1)/2\u7684\u65f6\u5019\u4f1a\u7206int \nusing namespace std;\nll T,ans,  x,y,  a,b,n,A[123];   //A\u6570\u7ec4\u5f00\u5f88\u5c0f\u5c31\u884c\u4e86\uff0c\u56e0\u4e3a\u6570\u91cf\u662flog\u7ea7\u7684\u3002\n\nll exgcd(ll aa,ll bb) {          //\u677f\u5b50 \n\tif(!bb) {\n\t\tx = 1; y = 0;\n\t\treturn aa;\n\t}\n\tll res = exgcd(bb,aa%bb);\n\tll t = x; x = y; y = t - aa/bb * y;\n\treturn res;\n}\n\nvoid work1() {                    //a>1\u65f6\u7684\u60c5\u51b5 \n\tint now = 0;\n\twhile(A[now] < n) { now++; A[now]=A[now-1]*a+b; } //\u8ba1\u7b97\u6bcf\u4e00\u9879\uff0c\u5927\u4e8en\u540e\u8df3\u51fa\u3002 \n\tfor(int i=now;i>=1;i--) if(n>=A[i]) n -= A[i];   //\u80fd\u51cf\u5c31\u51cf \n\tif(!n) ans++;                 //n\u53ef\u4ee5\u88ab\u8868\u793a\uff0cans++ \n}\n\nvoid work2() {                     //a=1\u65f6\u7684\u60c5\u51b5\uff0c\u770b\u4e0d\u61c2\u7684\u8bdd\u53bb\u505a\u9752\u86d9\u7684\u7ea6\u4f1a \n\tll GCD = exgcd(A[0],b); if(n%GCD) return ;\n\tn /= GCD; b /= GCD; A[0] /= GCD;\n\tx = x*n % b; x = (x+b) % b; \n\tif(x==0) x += b;               //\u6ce8\u610f\uff1ax\u5fc5\u987b\u662f\u6b63\u6574\u6570\uff01 \n\ty = (n-A[0]*x) / b;\n\tif(y >= (x*(x+1)/2) ) ans++;   //y\u53ef\u4ee5\u8868\u793a\u6210b\u7684\u7cfb\u6570\u7684\u548c\uff0cans++ \n}\n\nint main() {\n\tscanf(\"%lld\",&T);\n\twhile(T--) {\n\t\tscanf(\"%lld%lld%lld%lld\",&A[0],&a,&b,&n);\n\t\tif(!A[0] && !b) { if(n==0) ans++; continue; }   //A[0]\u4e0eb\u90fd\u4e3a\u96f6\u65f6\u7684\u7279\u5224\uff0c\u8bb0\u5f97continue\uff01 \n\t\tif(n==0) continue;         //\u82e5\u6b64\u65f6n=0\uff0c\u5fc5\u7136\u65e0\u89e3\uff0ccontinue \n\t\tif(a > 1) work1();\n\t\telse {\n\t\t\tif(!A[0]) { if(n%b==0) ans++; }\n\t\t\telse if(!b) { if(n%A[0]==0) ans++; }\n\t\t\telse work2();\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1572311387,
        "uid": 102726,
        "name": "Flandre_495",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3996 \u3010\u5931\u8d25\u7684\u7ade\u731c\u6e38\u620f\u3011"
    }
]
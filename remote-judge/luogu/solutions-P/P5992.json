[
    {
        "content": "~~\u8d2a\u5fc3\u548cDP\u4e00\u6837\uff0c\u4e0a\u6765\u5148\u627e\u89c4\u5f8b~~\n\n\u8003\u8651\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff1a\u83ca\u82b1\u56fe\u3002\n\n\u5f88\u5bb9\u6613\u53d1\u73b0\u8fd9\u662f\u5c0f\u5b66\u6570\u5b66\u9898\uff0c\u6392\u5e8f\u540e\u53d6\u4e2d\u70b9\u3002\n\n\u6765\u8003\u8651\u53e6\u4e00\u79cd\u60c5\u51b5\uff1a\u6df1\u5ea6\u4e3a 3 \u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u3002\n\n\u5047\u8bbe\u8fd9\u9897\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u8282\u70b9\u7f16\u53f7\u662f\u6309\u7167\u7ebf\u6bb5\u6811\u7f16\u53f7\u7684\uff0c\u7ed9\u5b9a\u6743\u503c\u7684\u8282\u70b9\u662f 4 5 6 7\u3002\u65b9\u4fbf\u8d77\u89c1\uff0c\u8bbe $ v_u $ \u4e3a\u7f16\u53f7\u4e3a $ u $ \u7684\u8282\u70b9\u7684\u6743\u503c\uff0c\u4e14\u6709 $ v_5>v_4,v_7>v_6 $\u3002\n\n\u5f88\u5bb9\u6613\u53d1\u73b0 $ v_3 $ \u53d6\u503c\u8303\u56f4\u662f $ [v_4,v_5] $\uff0c$ v_4 $ \u7684\u53d6\u503c\u8303\u56f4\u662f $ [v_6,v_7] $\u3002\n\n\u90a3\u4e48 $ v_1 $ \u5462\uff1f\n\n\u5206\u7c7b\u8ba8\u8bba\u3002\n\n1. $ v_5 \\leq v_6 $ \u5f88\u660e\u663e\u662f $ [v_5,v_6] $\u3002\n2. \u4e24\u4e2a\u533a\u95f4\u76f8\u4ea4 \u5f88\u660e\u663e\u53d6\u503c\u8303\u56f4\u5c31\u662f\u533a\u95f4\u7684\u4ea4\u3002\n\n\u6709\u6ca1\u6709\u4e00\u70b9\u513f\u601d\u8def\u4e86\uff1f\n\n\u518d\u6765\u770b\u770b\u4e00\u79cd\u60c5\u51b5\uff08\u4e0b\u9762\u8bbe\u8282\u70b9 $ u $ \u7684\u53d6\u503c\u8303\u56f4\u662f $ [l_u,r_u] $\uff09\uff1a\n\n\u8282\u70b9 $ u $ \u6709\u4e09\u4e2a\u513f\u5b50 $ a,b,c $\uff0c\u4e14 $ l_a \\leq l_b,r_b \\leq r_a,r_a \\leq l_c $ \uff08\u4e5f\u5c31\u662f $ a $ \u5305\u542b\u4e86 $ b $\uff09\n\n\u53d6\u503c\u8303\u56f4\u660e\u663e\u662f $ [r_b,r_a] $\u3002\n\n\u6240\u4ee5\u6700\u7ec8\u601d\u8def\u662f\uff1a\u5c06\u513f\u5b50\u7684\u53d6\u503c\u8303\u56f4\u7684\u5de6\u53f3\u7aef\u70b9\u5168\u90e8\u62c9\u51fa\u6765\uff0c\u6392\u5e8f\u540e\u53d6\u6700\u4e2d\u95f4\u7684\u4e24\u4e2a\u4f5c\u4e3a\u8be5\u8282\u70b9\u7684\u53d6\u503c\u8303\u56f4\u3002\n\n\u8bb0\u5f97\u7279\u5224 $ n=m=2 $ \u7684\u9634\u95f4\u60c5\u51b5\uff08\n```cpp\n#include<algorithm>\n#include<cstdio>\nconst int M=5e5+5;\nint n,m,cnt,f[M],h[M],l[M],r[M];int len,tmp[M<<1];long long ans;\nstruct Edge{\n\tint v,nx;\n}e[M<<1];\ninline void Add(const int&u,const int&v){\n\te[++cnt]=(Edge){v,h[u]};h[u]=cnt;\n\te[++cnt]=(Edge){u,h[v]};h[v]=cnt;\n}\nvoid DFS(const int&u){\n\tfor(int v,E(h[u]);E;E=e[E].nx)if((v=e[E].v)^f[u])f[v]=u,DFS(v);\n\tfor(int v,E(h[u]);E;E=e[E].nx)if((v=e[E].v)^f[u])tmp[++len]=l[v],tmp[++len]=r[v];\n\tif(!e[h[u]].nx)return;std::sort(tmp+1,tmp+len+1);l[u]=tmp[len>>1];r[u]=tmp[(len>>1)+1];len=0;\n\tfor(int v,E(h[u]);E;E=e[E].nx)if((v=e[E].v)^f[u])ans+=l[u]>r[v]?l[u]-r[v]:l[u]<l[v]?l[v]-l[u]:0;\n}\nsigned main(){\n\tint i,u,v;scanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<n;++i)scanf(\"%d%d\",&u,&v),Add(u,v);for(i=1;i<=m;++i)scanf(\"%d\",&u),l[i]=r[i]=u;\n\tif(n==2)return!printf(\"%d\",l[1]>l[2]?l[1]-l[2]:l[2]-l[1]);\n\tDFS(n);printf(\"%lld\",ans);\n}\n```",
        "postTime": 1635081575,
        "uid": 160839,
        "name": "Prean",
        "ccfLevel": 7,
        "title": "\u8d2a\u5fc3 P5992\u9898\u89e3"
    }
]
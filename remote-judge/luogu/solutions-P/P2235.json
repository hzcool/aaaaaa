[
    {
        "content": "\u9996\u5148\uff0c\u5728\u4e8c\u8fdb\u5236\u610f\u4e49\u4e0b\uff0c$f(n)$\u4e3a$n$\u7684\u5404\u4f4d\u6570\u7ffb\u8f6c\uff0c\u5373$f((\\overline{a_1a_2...a_{x-1}a_x})_2)=(\\overline{a_xa_{x-1}...a_2a_1})_2$\u3002\n\n\u7f51\u4e0a\u597d\u591a\u9898\u89e3\u91cc\u90fd\u6ca1\u6709\u7ed9\u51fa\u4e0a\u9762\u547d\u9898\u7684\u5177\u4f53\u8bc1\u660e\uff0c\u6240\u4ee5\u8fd9\u91cc\u5c31\u4ecb\u7ecd\u4e00\u4e0b\u8bc1\u660e\u8fc7\u7a0b\u5427\uff08\u4ee5\u4e0b\u7684\u8bc1\u660e\u8fc7\u7a0b\u4e2d\u7684\u6570\u4f4d\u5168\u90e8\u4e3a\u4e8c\u8fdb\u5236\u610f\u4e49\uff0c$n'$\u4e3a$n$\u5728\u4e8c\u8fdb\u5236\u610f\u4e49\u4e0b\u7684\u5404\u4f4d\u6570\u7ffb\u8f6c\uff09\u3002\n\n\u57fa\u672c\u601d\u60f3\u662f\u6570\u5b66\u5f52\u7eb3\u6cd5\u3002\u9996\u5148\uff0c\u53ef\u4ee5\u53d1\u73b0$n$\u53d6$1,2,3$\u65f6\u539f\u547d\u9898\u90fd\u6210\u7acb\u3002\n\n\u7b2c\u4e00\u4e2a\u9012\u63a8\u5f0f\uff1a$f(2n)=f(n)$\u3002\n\n\u8bbe$n=\\overline{a_1a_2...a_{x-1}a_x}$\uff0c\u90a3\u4e48$2n=\\overline{a_1a_2...a_{x-1}a_x0}$\u3002\u663e\u7136\u6709$n'=(2n)'$\uff08\u53bb\u6389\u524d\u5bfc$0$\uff09\u3002\u6240\u4ee5\u5f53$f(n)=n'$\u65f6\u4e00\u5b9a\u6709$f(2n)=(2n)'$\u3002\n\n\u7b2c\u4e8c\u4e2a\u9012\u63a8\u5f0f\uff1a$f(4n+1)=2f(2n+1)-f(n)$\u3002\n\n\u8bbe$n=\\overline{a_1a_2...a_{x-1}a_x}$\uff0c\u90a3\u4e48$2n+1=\\overline{a_1a_2...a_{x-1}a_x1}$\uff0c$4n+1=\\overline{a_1a_2...a_{x-1}a_x01}$\u3002\n\n\u663e\u7136\uff0c\n\n$2(2n+1)'-n'=\\overline{1a_xa_{x-1}...a_2a_1}+\\overline{1a_xa_{x-1}...a_2a_1}-\\overline{a_xa_{x-1}...a_2a_1}$\n\n$=\\overline{10a_xa_{x-1}...a_2a_1}=(4n+1)'$\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53$f(2n+1)=(2n+1)',f(n)=n'$\u65f6\uff0c$f(4n+1)=(4n+1)'$\u3002\n\n\u7b2c\u4e09\u4e2a\u9012\u63a8\u5f0f\uff1a$f(4n+3)=3f(2n+1)-2f(n)$\u3002\n\n\u8fd8\u662f\u8bbe$n=\\overline{a_1a_2...a_{x-1}a_x}$\u3002\u6b64\u65f6\u6709\uff1a\n\n$2n'=\\overline{a_xa_{x-1}...a_2a_10}$\n\n$(2n+1)'=\\overline{1a_xa_{x-1}...a_2a_1}$\n\n$(4n+3)'=\\overline{11a_xa_{x-1}...a_2a_1}$\n\n$3(2n+1)'-2n'=\\overline{1a_xa_{x-1}...a_2a_1}+\\overline{1a_xa_{x-1}...a_2a_1}+\\overline{1a_xa_{x-1}...a_2a_1}-\\overline{a_xa_{x-1}...a_2a_10}$\n\n$=\\overline{11a_xa_{x-1}...a_2a_1}+\\overline{a_xa_{x-1}...a_2a_10}-\\overline{a_xa_{x-1}...a_2a_10}$\n\n$=\\overline{11a_xa_{x-1}...a_2a_1}=(4n+3)'$\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53$f(2n+1)=(2n+1)',f(n)=n'$\u65f6\uff0c$f(4n+3)=(4n+3)'$\u3002\n\n\u5f52\u7eb3\u5f97\u51fa\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a$n\\geq1$\uff0c$f(n)=n'$\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c$f(n)=n$\u7684\u5145\u5206\u5fc5\u8981\u6761\u4ef6\u662f$n$\u5728\u4e8c\u8fdb\u5236\u610f\u4e49\u4e0b\u662f\u56de\u6587\u4e32\u3002\n\n\u5c06$m$\u5316\u4e3a\u4e8c\u8fdb\u5236\u4e4b\u540e\u6570\u4f4dDP\u6216\u8005\u4e71\u641e\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nconst int N = 605;\nstruct cyx {\n    int n, a[N];\n    cyx() {}\n    cyx(int _n) :\n        n(_n) {memset(a, 0, sizeof(a));}\n} a, b, f[N], g[N];\ncyx read() {\n    int i = 1, j; cyx res = cyx(0); char c; bool flag = 0;\n    while ((c = getchar()) < '0' || c > '9');\n    if (c - 48) res.a[res.n = 1] = c - 48, flag = 1;\n    while ((c = getchar()) >= '0' && c <= '9') {\n        if (c - 48) flag = 1;\n        if (flag) res.a[++res.n] = c - 48;\n    }\n    if (!res.n) res.a[res.n = 1] = 0;\n    for (j = res.n; i < j; i++, j--) swap(res.a[i], res.a[j]);\n    return res;\n}\nvoid write(cyx num) {\n    int i; for (i = num.n; i; i--) putchar(num.a[i] + 48);\n    putchar('\\n');\n}\ncyx div2(cyx a) {\n    int i; cyx b = a;\n    for (i = b.n; i; i--) {\n        if (b.a[i] & 1) b.a[i - 1] += 10;\n        b.a[i] >>= 1;\n    }\n    while (b.n > 1 && !b.a[b.n]) b.n--;\n    return b;\n}\ncyx add(cyx a, cyx b) {\n    int i; cyx c = cyx(max(a.n, b.n));\n    for (i = 1; i <= c.n; i++) {\n        c.a[i] += a.a[i] + b.a[i];\n        if (c.a[i] > 9) c.a[i + 1]++, c.a[i] -= 10;\n    }\n    if (c.a[c.n + 1]) c.n++; return c;\n}\ncyx pow2(int x) {\n    int i, j, tmp; cyx res = cyx(1); res.a[1] = 1;\n    for (i = 1; i <= x; i++) {\n        tmp = 0;\n        for (j = 1; j <= res.n; j++) {\n            res.a[j] <<= 1; res.a[j] += tmp;\n            if (res.a[j] > 9) res.a[j] -= 10, tmp = 1;\n            else tmp = 0;\n        }\n        if (tmp) res.a[++res.n] = 1;\n    }\n    return res;\n}\ncyx plus1(cyx x) {\n    int i = 1;\n    while (i <= x.n && x.a[i] == 9) x.a[i++] = 0;\n    if (i > x.n) x.a[++x.n] = 1; else x.a[i]++;\n    return x;\n}\ncyx trans(cyx x) {\n    int i; cyx res = cyx(1);\n    for (i = 1; i <= x.n; i++)\n        if (x.a[i]) res = add(res, pow2(i - 1));\n    return res;\n}\ncyx solve(cyx v) {\n    if (v.n == 1 && v.a[1] == 1) return pow2(0);\n    f[0] = pow2(0);\n    int i, j, k, h, n = v.n; for (i = 1; i <= v.n; i++)\n        f[i] = pow2(i & 1 ? (i >> 1) + 1 : i >> 1),\n        g[i] = i == 1 ? pow2(0) : f[i - 2];\n    if (v.n & 1) {\n        for (i = j = (v.n >> 1) + 1; j <= v.n; i--, j++)\n            if (v.a[i] != v.a[j]) break;\n        if (i) {\n            if (v.a[i] > v.a[j]) for (k = h = (v.n >> 1) + 1; h <= v.n; k--, h++)\n                v.a[k] = v.a[h];\n            else {\n                if (v.a[(v.n >> 1) + 1]) {\n                    v.a[(v.n >> 1) + 1] = 0;\n                    for (k = h = (v.n >> 1) + 1; h <= v.n; k--, h++)\n                        v.a[k] = v.a[h];\n                }\n                else {\n                    bool flag = 1;\n                    for (k = 1; k < v.n; k++) if (v.a[k]) {flag = 0; break;}\n                    if (flag) {\n                        v.a[v.n--] = 0;\n                        for (k = 1; k <= v.n; k++) v.a[k] = 1;\n                    }\n                    else {\n                        k = (v.n >> 1) + 1;\n                        while (!v.a[k]) v.a[k++] = 1; v.a[k]--;\n                        for (i = 1; i <= (v.n >> 1); i++)\n                            v.a[i] = v.a[v.n - i + 1];\n                    }\n                }\n            }\n        }\n    }\n    else {\n        for (i = (v.n >> 1), j = (v.n >> 1) + 1; j <= v.n; i--, j++)\n            if (v.a[i] != v.a[j]) break;\n        if (i) {\n            if (v.a[i] > v.a[j])\n            for (k = (v.n >> 1), h = (v.n >> 1) + 1; h <= v.n; k--, h++)\n                v.a[k] = v.a[h];\n            else {\n                bool flag = 1;\n                for (k = 1; k < v.n; k++) if (v.a[k]) {flag = 0; break;}\n                if (flag) {\n                    v.a[v.n--] = 0;\n                    for (k = 1; k <= v.n; k++) v.a[k] = 1;\n                }\n                else {\n                    k = (v.n >> 1) + 1;\n                    while (!v.a[k]) v.a[k++] = 1; v.a[k]--;\n                    for (i = 1; i <= (v.n >> 1); i++)\n                        v.a[i] = v.a[v.n - i + 1];\n                }\n            }\n        }\n    }\n    cyx res = cyx(1); for (i = 1; i < n; i++) res = add(res, g[i]);\n    if (n != v.n) return res; int mid = (n & 1) ? (n >> 1) + 1 : (n >> 1);\n    cyx uu = cyx(0); for (i = mid; i >= 2; i--) uu.a[++uu.n] = v.a[i];\n    while (uu.n > 1 && !uu.a[uu.n]) uu.n--; cyx vv = plus1(trans(uu));\n    return add(res, vv);\n}\nint main() {\n    a = read(); b = cyx(0);\n    while (a.n != 1 || a.a[1]) b.a[++b.n] = a.a[1] & 1,\n        a = div2(a); write(solve(b));\n    return 0;\n}\n```",
        "postTime": 1506258203,
        "uid": 29936,
        "name": "xyz32768",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2235 \u3010[HNOI2002]Kathy\u51fd\u6570\u3011"
    },
    {
        "content": "\u8fd9\u4e00\u9898\u5176\u5b9e\u60f3\u901a\u4e86\u5c31\u4e0d\u662f\u5f88\u96be\u3002\n\n\u6839\u636e\u89c4\u5f8b\u53d1\u73b0\uff0c$f(1),f(3),f(5),f(7),f(9),f(15)$ \u7b49\u6570\u5b57\u90fd\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u7136\u540e\u53ef\u4ee5\u8bc1\u660e\u51fa\u6765\uff0c\u5982\u679c $f(n)=n$\uff0c\u90a3\u4e48 $n$ \u7684\u4e8c\u8fdb\u5236\u4e0b\u4e00\u5b9a\u662f\u4e00\u4e2a\u56de\u6587\u6570\u3002~~\u4f46\u662f\u6211\u4e0d\u4f1a\u8bc1233~~\u3002\n\n\u7136\u540e\u8003\u8651\u600e\u4e48\u7edf\u8ba1\u7b54\u6848\u3002\n\n\u9898\u76ee\u8303\u56f4\uff1a$m \\leqslant 10^{100}$\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u8bb0 $p(i)$ \u4e3a $i$ \u5728\u4e8c\u8fdb\u5236\u4e0b\u7684\u4f4d\u6570\u3002\n\n##  \u90e8\u5206 $1$\uff1a\n\n\u5bf9\u4e8e $1 \\leqslant p(i) < p(m)$ \u7684\u6240\u6709\u6570\uff0c\u6c42\u56de\u6587\u6570\u6570\u91cf\u3002\u5982\u679c\u4e00\u4e2a\u6b63\u6574\u6570 $x$ \u4f4d\u6570 $p(x) < p(m)$\uff0c\u56fa\u5b9a\u4e8c\u8fdb\u5236\u4e0b\u4e24\u7aef\u7684\u6570\u5b57\uff08\u5b9a\u4e3a $1$\uff09\uff0c\u63a5\u4e0b\u6765 $p(x)$ \u5982\u679c\u4e3a\u5947\u6570\uff0c\u56de\u6587\u6570\u6570\u91cf\u5c31\u662f $2^{\\frac{x-1}{2}}$\uff0c\u5982\u679c $p(x)$ \u4e3a\u5076\u6570\uff0c\u56de\u6587\u6570\u6570\u91cf\u5c31\u662f $2^{\\frac{x}{2}-1}$\u3002\n\n\u7136\u540e\u5f52\u7eb3\u4e00\u4e0b\uff0c\u957f\u5ea6\u4e3a $r$ \u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u56de\u6587\u6570\u6570\u91cf\u4e3a $2^ {\\left\\lfloor{\\frac{r-1}{2}}\\right\\rfloor}$\u3002\n\n\u4e5f\u5c31\u662f\uff0c\u6700\u540e\u7684\u56de\u6587\u6570\u6570\u91cf\u5c31\u662f\uff1a\n\n$$\n\\sum_{i=1}^{i<p(m)} 2^ {\\left\\lfloor{\\frac{i-1}{2}}\\right\\rfloor}\n$$\n\n## \u90e8\u5206 $2$\n\n\u65e2\u7136\u7b97\u51fa\u4e86\u4f4d\u6570\u5c0f\u4e8e $p(m)$ \u7684\u56de\u6587\u6570\u6570\u91cf\uff0c\u63a5\u4e0b\u6765\u8003\u8651\u600e\u4e48\u7b97\u4f4d\u6570\u7b49\u4e8e $p(m)$ \u7684\u56de\u6587\u6570\u6570\u91cf\u3002\n\n\u8003\u8651\u56de\u6587\u6570\u5177\u6709\u5bf9\u79f0\u6027\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u56de\u6587\u6570\u7684\u540e\u534a\u90e8\u5206\u7ffb\u8f6c\u8fc7\u6765\uff0c\u5e94\u8be5\u8981\u548c\u524d\u534a\u90e8\u5206\u76f8\u540c\u3002\n\n\u90a3\u4e48\uff0c\u5c06 $m$ \u8f6c\u6210\u4e8c\u8fdb\u5236\uff0c\u5206\u6210\u524d\u540e\u4e24\u4e2a\u90e8\u5206\u3002\n\n\u4f8b\u5982 $m=(1001001001011111)_2$\n\n\u5c06\u5b83\u5206\u6210 $(10010010)_2$ \u548c $(01011111)_2$\uff0c\u7528\u9ad8\u7cbe\u5ea6\u7b97\u51fa\u524d\u9762\u4e00\u4e2a\u90e8\u5206 **\u9664\u53bb\u9996\u4f4d\u7684 $1$** \u6240\u4ee3\u8868\u7684\u4e8c\u8fdb\u5236\u6570\u3002\n\n\u5982\u679c\u4e00\u4e2a\u6570\u5b57\u8f6c\u6210\u4e8c\u8fdb\u5236\u6570\u5b57\u540e\u548c\u524d\u534a\u90e8\u5206\u4f4d\u6570\u76f8\u540c\uff0c\u5e76\u4e14\u5c0f\u4e8e\u524d\u534a\u90e8\u5206\u7684\u603b\u548c\uff0c\u90a3\u4e48\u8fd9\u4e00\u4e2a\u6570\u5b57\u5316\u6210\u4e8c\u8fdb\u5236\u540e\u53ef\u4ee5\u5f53\u6210\u56de\u6587\u6570\u5b57\u7684\u524d\u534a\u90e8\u5206\uff0c\u540e\u534a\u90e8\u5206\u80af\u5b9a\u53ef\u4ee5\u627e\u5230\u76f8\u5e94\u90e8\u5206\u3002\n\n\u4e5f\u5c31\u662f\uff0c\u8fd9\u4e00\u4e2a\u7684\u8d21\u732e\u5c31\u662f\u524d\u534a\u90e8\u5206\u4ee3\u8868\u7684\u6570\u5b57(\u8981\u9664\u53bb\u9996\u4f4d\u7684 $1$)\u7684\u603b\u548c\u3002\n\n\u6700\u540e\u518d\u8003\u8651\u4e00\u4e0b\u524d\u534a\u90e8\u5206\u7684\u4e00\u4e2a\u603b\u4f53\u548c\u540e\u534a\u90e8\u5206\u662f\u5426\u53ef\u4ee5\u6784\u6210\u56de\u6587\u6570\u5373\u53ef\u3002\n\n",
        "postTime": 1612089573,
        "uid": 261914,
        "name": "Emy_Ycc",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2235 \u3010[HNOI2002]Kathy\u51fd\u6570\u3011"
    },
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P2235)\n\n\u8fd9\u9053\u9898\u91cc\u7684$Kathy$\u51fd\u6570\u662f\u76f8\u5f53\u4e8e\u662f\u4e8c\u8fdb\u5236\u7684\u7ffb\u8f6c\uff0c\u81f3\u4e8e\u8bc1\u660e\uff0c\u4e0a\u9762\u7684\u5927\u4f6c\u5df2\u7ecf\u8bb2\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u56e0\u4e3a\u6211\u7684\u505a\u6cd5\u548c\u5176\u4ed6\u51e0\u4f4d\u5927\u4f6c\u505a\u6cd5\u4e0d\u592a\u4e00\u6837\uff0c\u6240\u4ee5\u8fc7\u6765\u53d1~~\u6c34~~\u7bc7\u9898\u89e3\n\n\u4e0b\u9762\u8bb2\u4e00\u4e0b\u6211\u7684\u601d\u8def\n\n\u5bf9\u4e8e\u4e00\u4e2a\u6570\uff0c\u6211\u4eec\u9996\u5148\u628a\u5b83\u5206\u89e3\u6210\u4e8c\u8fdb\u5236\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6570\u7684\u4e8c\u8fdb\u5236\u4f4d\u6570\uff08\u4ee5\u4e0b\u7b80\u79f0\u4f4d\u6570\uff09\u6bd4\u8fd9\u4e2a\u6570\u8981\u5c11\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6570\u80af\u5b9a\u662f\u5c0f\u4e8e\u8be5\u6570\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u4fbf\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u4f4d\u6570\u6bd4\u8fd9\u4e2a\u6570\u5c0f\u7684\u4e8c\u8fdb\u5236\u4e3a\u56de\u6587\u4e32\u7684\u6570\u7684\u4e2a\u6570\uff08\u5373\u5408\u6cd5\u7684\u6570\uff09\n\n$Q:$\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u4f4d\u6570\uff0c\u5982\u4f55\u6c42\u8be5\u4f4d\u6570\u7684\u5408\u6cd5\u6570\u4e2a\u6570?\n\n> \u6211\u4eec\u53ef\u4ee5\u628a\u4e00\u4e2a\u5408\u6cd5\u6570\u4ece\u4e2d\u95f4\u65ad\u5f00\uff0c\u4e8e\u662f\u8fd9\u4e2a\u6570\u53d8\u5206\u6210\u4e86\u4e24\u90e8\u5206\uff0c\u53f3\u534a\u90e8\u5206\u662f\u4ec0\u4e48\u6837\uff0c\u5de6\u534a\u90e8\u5206\u5bf9\u79f0\u8fc7\u53bb\u5c31\u53ef\u4ee5\u4e86\uff0c\u800c\u53f3\u534a\u90e8\u5206\u7684\u53ef\u9009\u65b9\u6848\u6570\u4fbf\u662f\u6240\u6c42\u7684\u5408\u6cd5\u6570\u4e2a\u6570\uff0c\u8fd9\u6837\u4fbf\u53ef\u4ee5\u4fdd\u8bc1\u6240\u6c42\u7684\u6570\u4e0d\u91cd\u590d\uff0c\u4e0d\u9057\u6f0f\n\n\u4e3e\u4e2a\u6817\u5b50\uff1a\u6c42\u4f4d\u6570\u4e3a$5$\u7684\u5408\u6cd5\u6570\u4e2a\u6570\uff0c\u6240\u6c42\u8303\u56f4\u4e3a$(10000)_2$\u5230$(11111)_2$\uff0c\u5206\u6210\u4e24\u534a\uff0c\u53f3\u534a\u90e8\u5206\u6709$3$\u4e2a\u6570\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u4f4d\u5fc5\u987b\u662f$1$\uff0c\u5219\u6709\u4ee5\u4e0b\u53ef\u80fd\u60c5\u51b5\uff1a$(001)_2$\uff0c$(011)_2$\uff0c$(101)_2$\uff0c$(111)_2$\uff0c\u5bf9\u79f0\u8fc7\u53bb\u5206\u522b\u5bf9\u5e94$(10001)_2$\uff0c$(11011)_2$\uff0c$(10101)_2$\uff0c$(11111)_2$\uff0c\u5171\u6709\u56db\u4e2a\u5408\u6cd5\u6570\n\n\u4e8e\u662f\u6211\u4eec\u4fbf\u53ef\u4ee5\u5f97\u5230\u8ba1\u7b97\u516c\u5f0f\uff0c\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u4f4d\u6570$n$\uff0c\u5408\u6cd5\u6570\u4e2a\u6570\u4e3a\n$2$\u7684$\\frac{\\lfloor n-1 \\rfloor}{2}$\u6b21\u5e42\n\n\u5982\u6b64\u9884\u5904\u7406\uff0c\u65f6\u95f4\u590d\u6742\u5ea6$O(log_2m)$\n\n\u5173\u952e\u6765\u4e86\uff0c\u5982\u4f55\u6c42\u4f4d\u6570\u548c$m$\u4f4d\u6570\u76f8\u540c\u7684\u6570\u7684\u4e2a\u6570?\n\n\u540c\u6837\u5730\uff0c\u6211\u4eec\u4e5f\u628a\u4e00\u4e2a\u5408\u6cd5\u6570\u548c$m$\u5206\u6210\u4e24\u534a\u90e8\u5206\uff0c\u5982\u679c\u8fd9\u4e2a\u6570\u5de6\u534a\u90e8\u5206\u5c0f\u4e8e$m$\u7684\u5de6\u534a\u90e8\u5206\uff0c\u5219\u8fd9\u4e2a\u6570\u5fc5\u7136\u5c0f\u4e8e$m$\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5148\u6c42\u5de6\u534a\u90e8\u5206\u5c0f\u4e8e$m$\u5de6\u534a\u90e8\u5206\u7684\u6570\u7684\u4e2a\u6570\uff0c\u5373$m$\u5de6\u534a\u90e8\u53bb\u6389\u6700\u9ad8\u4f4d\u4e2a\uff1b\u5982\u679c\u8fd9\u4e2a\u6570\u5de6\u534a\u90e8\u5206\u7b49\u4e8e$m$\u7684\u5de6\u534a\u90e8\u5206\uff0c\u6211\u4eec\u5355\u72ec\u7279\u5224\u4e00\u4e0b\u5927\u5c0f\u5c31\u53ef\u4ee5\u4e86\n\n\u4e3e\u4e2a\u6817\u5b50\uff1a\u82e5$m=(110110)_2$\uff0c\u6c42\u5c0f\u4e8e\u7b49\u4e8e$m$\u7684\u5408\u6cd5\u6570\u4e2a\u6570\n\n\u5148\u5904\u7406\u51fa\u4f4d\u6570\u5c0f\u4e8e$m$\u7684\u5408\u6cd5\u6570\uff0c\u6709$4+2+2+1+1=10$\u4e2a\uff0c$m$\u5de6\u534a\u90e8\u5206\u4e3a$(110)_2$\uff0c\u5c0f\u4e8e\u7684\u6709\uff1a$(100)_2$\u548c$(101)_2$\uff08\u5bf9\u5e94$(100001)_2$\u548c$(101101)_2$\uff09\uff0c$2$\u4e2a\uff0c\u5373$(10)_2=2$\u4e2a\uff0c\u8bbe$q$\u4e3a\u5de6\u534a\u90e8\u5206\u7b49\u4e8e$m$\u7684\u5408\u6cd5\u6570\uff0c\u5219$q=(110011)_2<=m$\uff0c\u4e8e\u662f\u5171\u6709$10+2+1=13$\u4e2a\u5408\u6cd5\u6570\n\n\u4e8e\u662f\u4fbf\u53ef\u4ee5$A$\u6389\u4e86\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6$O(log_2m)$\n\n\u6ca1\u6709\u9ad8\u7cbe\u5e94\u8be5\u662f\u8fd9\u6837\u5199\u7684\uff1a\n\n```cpp\nbool judge(long long m,int len){\n\tint l=len/2,r=len-l-1;\n\twhile(l<len&&r>=0){\n\t\tif(((m>>l)&1)<((m>>r)&1))return true;\n\t\tif(((m>>l)&1)>((m>>r)&1))return false;\n\t\t++l,--r;\n\t}\n\treturn true;\n}\nint main(){\n\tlong long m,n=1,ans=0;\n\tscanf(\"%lld\",&m);int len;\n\tfor(len=1;n<m;++len,n=n<<1|1){\n\t\tans+=(1<<(len-1)/2);\n\t}\n\tans+=(m&(n>>1))>>(len/2);\n\tif(judge(m,len))++ans;\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n~~\u7136\u800c\uff0c\u6076\u5fc3\u9898\u76ee\u5f3a\u5236\u9ad8\u7cbe~~\n\n$AC$\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\ntemplate<typename T>void read(T &x){\n\tx=0;int f(1);char c(getchar());\n\tfor(;!isdigit(c);c=getchar())if(c=='-')f=-f;\n\tfor(; isdigit(c);c=getchar())x=(x<<3)+(x<<1)+c-'0';\n\tx*=f;\n}\ntemplate<typename T>void write(T x){\n\tif(x<0)putchar('-'),x=-x;\n\tif(x/10)write(x/10),x%=10;\n\tputchar(x+'0');\n}\nint m[1005],ans[1005],ANS[1005];\nvoid add(int *a,int x){\n\twhile(a[x])a[x++]=0;\n\ta[x]=1;a[0]=max(a[0],x);\n}\nvoid read(void){\n\t//\u8f93\u5165\u76f4\u63a5\u8f6c\u4e8c\u8fdb\u5236\n\tmemset(m,0,sizeof m);\n\tmemset(ans,0,sizeof ans);\n\tmemset(ANS,0,sizeof ANS);\n\tchar c=getchar();\n\tfor(;!isdigit(c);c=getchar());\n\tfor(; isdigit(c);c=getchar()){\n\t\tif(m[0]!=0){\n\t\t\tm[0]+=3;\n\t\t\tfor(int i=m[0];i>=1;--i){\n\t\t\t\tm[i]=0;\n\t\t\t\tif(i>3&&m[i-3])add(m,i);\n\t\t\t\tif(i>1&&m[i-1])add(m,i);\n\t\t\t}\n\t\t}\n\t\tswitch(c){\n\t\t\tcase '0':break;\n\t\t\tcase '1':add(m,1);break;\n\t\t\tcase '2':add(m,2);break;\n\t\t\tcase '3':add(m,1);add(m,2);break;\n\t\t\tcase '4':add(m,3);break;\n\t\t\tcase '5':add(m,3);add(m,1);break;\n\t\t\tcase '6':add(m,3);add(m,2);break;\n\t\t\tcase '7':add(m,3);add(m,2);add(m,1);break;\n\t\t\tcase '8':add(m,4);break;\n\t\t\tcase '9':add(m,4);add(m,1);break;\n\t\t}//\u611f\u89c9\u81ea\u5df1\u5728\u6253\u6a21\u62df\uff1f\uff1f\uff1f\n\t}\n}\nbool judge(void){\n\tint l=m[0]/2+1,r=m[0]-l+1;\n\twhile(l<=m[0]&&r>=1){\n\t\tif(m[r]>m[l])return true;\n\t\tif(m[r]<m[l])return false;\n\t\t--r,++l;\n\t}\n\treturn true;\n}\nconst int base=100000000;\nint main(){\n\tread();//\u8f93\u5165\n\tfor(int i=1;i<m[0];++i){\n\t\tint pos=(i-1)/2+1;\n\t\tadd(ans,pos);\n\t}\n\tfor(int i=m[0]/2+1,j=1;i<m[0];++i,++j){\n\t\tif(m[i])add(ans,j);\n\t}\n\tif(judge())add(ans,1);\n\twhile(ans[0]){//\u8f6c\u5341\u8fdb\u5236\n\t\tint ad=ans[ans[0]--];\n\t\tfor(int i=1;i<=ANS[0];++i){\n\t\t\tANS[i]=ANS[i]*2+ad;\n\t\t\tad=ANS[i]/base;\n\t\t\tANS[i]%=base;\n\t\t}\n\t\twhile(ad){\n\t\t\tANS[++ANS[0]]+=ad;\n\t\t\tad=ANS[ANS[0]]/base;\n\t\t\tANS[ANS[0]]%=base;\n\t\t}\n\t}\n\tprintf(\"%d\",ANS[ANS[0]--]);\n\twhile(ANS[0]){\n\t\tprintf(\"%08d\",ANS[ANS[0]--]);//\u8f93\u51fa\n\t}\n\treturn 0;\n}\n```\n\n~~\u849f\u84bb\u8bed\u8a00\u8868\u8fbe\u4e0d\u597d\u8bf7\u8c05\u89e3~~",
        "postTime": 1578374111,
        "uid": 230249,
        "name": "xiaolilsq",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 [HNOI2002]Kathy\u51fd\u6570"
    },
    {
        "content": "~~\u7b2c\u4e00\u6b21\u53d1\u9898\u89e3\uff0c\u5199\u5f97\u4e0d\u597d\u8bf7\u89c1\u8c05~~\n------------\n\n\n\u8fd9\u51e0\u75af\u72c2\u5237\u6570\u4f4d$dp$\u7684\u9898\uff0c~~\u5237\u5230\u8fd9\u9053\u9898\u65f6\u88ab\u5361\u4e86\u4e00\u5929~~\uff0c\u4e00\u770b\u5927\u4f6c\u7684\u8bb2\u89e3\u53d1\u73b0\u5c45\u7136\u662f\u6c42\u56de\u6587\u6570\u3002\u3002\u3002\n\n~~\u5e9f\u8bdd~~\u5230\u6b64\u7ed3\u675f\uff0c\u8fdb\u5165\u6b63\u9898\uff1a\n------------\n\n\n\u6ee1\u8db3$f(n)=n$\u7684$n$\u5728\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u4e0b\u4e00\u5b9a\u662f\u4e00\u4e2a\u56de\u6587\u6570\n\n#### \u4f8b\u5982:\n$f(1)=1$ ($1$)  \n$f(3)=3$ ($11$)  \n$f(5)=5$ ($101$)  \n$f(7)=7$ ($111$)\n\n\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u4e2a\u6027\u8d28\uff0c\u4e0a\u9762\u7684\u5927\u4f6c\u5df2\u7ecf\u8bb2\u5f97\u5f88\u6e05\u695a\u4e86\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\n\n\u90a3\u4e48\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u5728$[1,n]$\u4e2d\u627e\u5230\u7b26\u5408\u4e8c\u8fdb\u5236\u5f62\u5f0f\u4e3a\u56de\u6587\u6570\u7684\u603b\u4e2a\u6570\uff0c\u8fd9\u91cc\u6211\u63d0\u4f9b\u4e00\u79cd\u7528$dfs$\u5b9e\u73b0\u6570\u4f4d$dp$\u7684\u601d\u8def\n\n\u53ef\u4ee5\u5148\u5199\u4e00\u4e0b\u8fd9\u9053\u9898\uff08~~\u4e0d\u9700\u8981\u9ad8\u7cbe~~\uff09\uff1a\n\u8f93\u51fa\u533a\u95f4\u5185\u56de\u6587\u6570\u7684\u603b\u4e2a\u6570\n###  [LightOJ1205](http://lightoj.com/volume_showproblem.php?problem=1205)\n\n\n------------\n\n### \u7528$dfs$\u627e\u56de\u6587\u6570\u4e2a\u6570\uff1a\n\n### \u4e00\uff1a\u8f6c\u8fdb\u5236\n\u9996\u5148\u6211\u4eec\u9700\u8981\u628a$n$\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u5b58\u50a8\u5728\u4e00\u4e2a\u6570\u7ec4$num[lenn]$\u4e2d\n\n### \u4e8c\uff1aDFS\n$dfs(st,pos,ok,limit)$\n\n\n#### \u8bb0\u641c\uff0c\u72b6\u6001\u8868\u793a\uff1a\n\u7528\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u5df2\u7ecf\u641c\u8fc7\u7684\u5730\u65b9\uff0c$dp[pos][ok][st]$ \u793a\u5df2\u7ecf\u9009\u5230\u4e86\u7b2c$pos$\u4f4d\uff0c\u524d\u5df2\u7ecf\u9009\u597d\u7684\u662f\u5426\u6ee1\u8db3\u56de\u6587$ok$\uff0c\u53bb\u524d\u5bfc$0$\u540e\u5171\u6709$st$\u4f4d\uff0c\u5e76\u4e14\u524d\u9762\u5df2\u9009\u7684\u5e76\u672a\u5168\u90e8\u8fbe\u5230\u4e0a\u9650\uff08$pos$\u5f00\u59cb\u540e\u9762\u53ef\u4ee5\u968f\u610f\u9009$0$\u6216$1$\uff09\uff0c\u6b64\u65f6\u7684\u56de\u6587\u6570\u603b\u6570\u3002\n\n$limit$\u8868\u793a\u524d\u9762\u5df2\u9009\u7684\u662f\u5426\u5168\u8fbe\u5230\u4e0a\u9650\uff0c\u5982\u679c\u662f\uff0c\u90a3\u4e48\u8fd9\u4e00\u4f4d\u7684\u53ef\u4ee5\u9009\u7684\u6570\u7684\u4e0a\u9650\u4e3a$num[pos]$\uff0c\u5426\u5219\u53ef\u4ee5\u968f\u610f\u9009\uff0c$ed=limit?num[pos]:1$\u3002\n\n\u5982\u679c\u5f53\u524d\u72b6\u6001\u5e76\u672a\u53d7\u9650\uff0c\u4e14\u5f53\u524d\u72b6\u6001\u7684$dp$\u503c\u5df2\u7ecf\u88ab\u8bb0\u5f55\uff0c\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2a\u503c\n\n#### \u5982\u4f55\u679a\u4e3e\u9012\u5f52\n\n\u6bcf\u5f53\u9009\u4e86\u4e00\u4e2a\u6570$i$\u65f6\uff0c $tmp[pos]=i$\u3002\n\n1.\n\u5982\u679c\u524d\u9762\u90fd\u6ca1\u9009\uff08\u5373\u5168\u662f\u524d$0$\uff0c$st=pos$\uff09\uff0c\n$ans+=dfs$($st-1$,$pos-1$,$ok$,$limit$&&$i==ed$)\n\n2.\n\u5982\u679c\u524d\u9762\u9009\u4e86\uff08\u5373$st>pos$\uff09\n\n\uff081\uff09\n\u5982\u679c\n\u5f53\u524d\u72b6\u6001\u662f\u56de\u6587\u6570\uff0c\u4e14\u5f53\u524d\u9009\u7684\u8fd9\u4f4d\u5728$st$\u7684\u540e\u534a\u6bb5\uff0c\n\uff08\u5373$ok$&&$pos<=st/2$\uff09\uff0c\n$okk=tmp[st-pos+1]==i$  \n\uff082\uff09\n\u5426\u5219 $okk=ok$\u3002       \n$ans+=dfs$($st$,$pos-1$,$okk$,$limit$&&$i==ed$)\n\n#### $dfs$\u8fb9\u754c\n\n\u5f53$pos==0$\uff08\u5373\u5df2\u7ecf\u9009\u5b8c\u4e86\u6240\u6709\u4f4d\uff09\n\u5982\u679c\u6ee1\u8db3\u56de\u6587\u6570\uff08\u5373$ok=1$\uff09\u4e14\u9009\u4e86\u6570\uff08\u5373\u5e76\u975e\u5168\u662f$0$\uff0c$st>0$\uff09  \n$return 1$\u3002\n\n### \u4e09.\u9ad8\u7cbe\n\n\u63a8\u8350\u5199\u7ed3\u6784\u4f53\uff0c~~\u7528\u8d77\u6765\u65b9\u4fbf~~\uff0c\u4e0d\u4f1a\u7684\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u5927\u4f6c\u7684[~~\u9ad8\u7cbe\u6a21\u677f~~](https://www.cnblogs.com/Iowa-Battleship/p/9869499.html)\n\n### \u6700\u540e\u9644\u4e0a$AC$\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<cstring>\nusing namespace std;\ntypedef long long ll;\nconst int base = 1e8;\nconst int N = 20;\nint aux[N << 3];\nstruct bigint {\n    int s[N], l;\n    void CL() { l = 0; memset(s, 0, sizeof(s)); }\n    void pr()\n    {\n        printf(\"%d\", s[l]);\n        for (int i = l - 1; i; i--)\n            printf(\"%08d\", s[i]);\n    }\n    void re_l()\n    {\n        int i, x = 0, k = 1, L = 0, fl, o;\n        char c = getchar();\n        for (; c < '0' || c > '9'; c = getchar());\n        for (; c >= '0' && c <= '9'; c = getchar())\n        {\n            if (!(L - 1) && !aux[L])\n                L--;\n            aux[++L] = c - '0';\n        }\n        CL();\n        l = L / 8 + ((o = L % 8) > 0);\n        for (i = 1; i <= o; i++)\n            x = x * 10 + aux[i];\n        if (o)\n            s[l] = x;\n        fl = !o ? l + 1 : l;\n        for (i = o + 1, x = 0; i <= L; i++, k++)\n        {\n            x = x * 10 + aux[i];\n            if (!(k ^ 8))\n            {\n                s[--fl] = x;\n                x = k = 0;\n            }\n        }\n        if (!l)\n            l = 1;\n    }\n    ll toint()\n    {\n        ll x = 0;\n        for (int i = l; i; i--)\n            x = x * base + s[i];\n        return x;\n    }\n    bigint operator = (int b)\n    {\n        CL();\n        do\n        {\n            s[++l] = b % base;\n            b /= base;\n        } while (b > 0);\n        return *this;\n    }\n    bigint operator = (ll b)\n    {\n        CL();\n        do\n        {\n            s[++l] = b % base;\n            b /= base;\n        } while (b > 0);\n        return *this;\n    }\n    bigint operator + (const int &b)\n    {\n        bigint c = *this;\n        ll x = b;\n        for (int i = 1; i <= l && x; i++)\n        {\n            x = x + c.s[i];\n            c.s[i] = x % base;\n            x /= base;\n        }\n        if(x)c.s[++c.l] = x;\n        return c;\n    }\n    bigint operator + (const ll &b)\n    {\n        bigint c = *this;\n        ll x = b;\n        for (int i = 1; i <= l && x; i++)\n        {\n            x = x + c.s[i];\n            c.s[i] = x % base;\n            x /= base;\n        }\n        if (x)\n            c.s[++c.l] = x;\n        return c;\n    }\n    bigint operator + (bigint &b)\n    {\n        if (b.l < 3)\n            return *this + b.toint();\n        bigint c;\n        ll x = 0;\n        int k = l < b.l ? b.l : l;\n        c.CL();\n        c.l = k;\n        for (int i = 1; i <= k; i++)\n        {\n            x = x + s[i] + b.s[i];\n            c.s[i] = x % base;\n            x /= base;\n        }\n        if (x)\n            c.s[++c.l] = x;\n        return c;\n    }\n    bigint operator / (const int &b)\n    {\n        bigint c;\n        ll x = 0;\n        c.CL();\n        for (int i = l; i; i--)\n        {\n            c.s[i] = (x * base + s[i]) / b;\n            x = (x * base + s[i]) % b;\n        }\n        for (c.l = l; !c.s[c.l] && c.l > 1; c.l--);\n        return c;\n    }\n    bigint operator % (const int &b)\n    {\n        bigint c;\n        ll x = 0;\n        c.CL();\n        for (int i = l; i; i--)\n            x = (x * base + s[i]) % b;\n        return c = x;\n    }\n    bool operator > (const bigint &b) const\n    {\n        if (l ^ b.l)\n            return l > b.l;\n        for (int i = l; i; i--)\n            if (s[i] ^ b.s[i])\n                return s[i] > b.s[i];\n        return false;\n    }\n    bigint operator += (bigint &b)\n    {\n        return *this = *this + b;\n    }\n    bool operator > (int b) const{\n        bigint c;return *this > (c = b);\n    }\n};\n\nbigint a;\nint num[350],tmp[350];bigint dp[350][2][350];\nbool pan[350][2][350];\ninline bigint dfs(int st,int len,int ok,bool limit){\n    bigint ans,pp;ans=0;pp=0;\n\tif(len<1){//\u8fb9\u754c \n    \tif(ok&&st>0)ans=1;\n    \treturn ans;\n    }\n    if(!limit&&pan[len][ok][st])return dp[len][ok][st];//\u8fd4\u56de\u6240\u8bb0\u5f55\u7684\u503c \n    int ed=limit?num[len]:1;//\u5904\u7406\u679a\u4e3e\u4e0a\u9650 \n    for(int i=0;i<=ed;i++){\n        tmp[len]=i;//\u8bb0\u5f55\u6bcf\u6b21\u9009\u7684\u6570\uff0c\u65b9\u4fbf\u5224\u65ad\u662f\u5426\u6ee1\u8db3\u56de\u6587 \n        if(st==len&&!i)pp=dfs(st-1,len-1,ok,limit&&i==ed),ans+=pp;//\u5982\u679c\u4e00\u76f4\u90fd\u6ca1\u9009\u6570 \n        else pp=dfs(st,len-1,(ok&&len<=st/2)?tmp[st-len+1]==i:ok,limit&&i==ed),ans+=pp;//\u5982\u679c\u9009\u4e86\u6570 \n\t}\n    if(!limit)dp[len][ok][st]=ans,pan[len][ok][st]=1;//\u8bb0\u5f55 \n    return ans;\n}\nint main(){\n    a.re_l();ll Lenn=0;\n    while(a>0){num[++Lenn]=(a%2).toint();a=(a/2);}//\u8f6c\u62102\u8fdb\u5236\u5b58\u8d77\u6765 \n    bigint ans=dfs(Lenn,Lenn,1,1);\n    ans.pr();\n    return 0;\n}\n```",
        "postTime": 1550543977,
        "uid": 110985,
        "name": "\u8fb0\u661f\u51cc",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2235 \u3010[HNOI2002]Kathy\u51fd\u6570\u3011"
    },
    {
        "content": "\u7531\u4e8e $n \\leq 10^{100}$\uff0c\u672c\u9898\u80af\u5b9a\u662f\u4e00\u4e2a\u627e\u89c4\u5f8b\u7684\u9898\u76ee\u3002\u5bf9\u4e8e\u627e\u89c4\u5f8b\u7684\u9898\uff0c\u7b2c\u4e00\u6b65\u8981\u505a\u7684\u662f\u5148\u6253\u4e00\u4e2a\u5c0f\u89c4\u6a21\u7684\u8868\u6765\u5bfb\u627e\u89c4\u5f8b\u3002\u6253\u8868\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```\nint f(int x) {\n\tif(d[x]) return d[x]; // \u8bb0\u5fc6\u5316\uff0c\u52a0\u5feb\u6253\u8868\u901f\u5ea6\n\tif(x == 1) return 1;\n\tif(x == 3) return 3;\n\tif(x % 2 == 0) return d[x] = f(x / 2);\n\tif(x % 4 == 1) {\n\t\tint n = (x - 1) / 4;\n\t\treturn d[x] = 2 * f(2 * n + 1) - f(n);\n\t}\n\tif(x % 4 == 3) {\n\t\tint n = (x - 3) / 4;\n\t\treturn d[x] = 3 * f(2 * n + 1) - 2 * f(n);\n\t}\n\treturn 0;\n}\n```\n\n\u8ba1\u7b97\u51fa $[1, 100]$ \u5185\u7b26\u5408\u8981\u6c42\u7684\u6570\uff0c\u5305\u62ec\uff1a${1,3,5,7,9,15...}$\u3002\u5b83\u4eec\u90fd\u662f\u5947\u6570\uff0c\u7136\u800c\u5177\u4f53\u662f\u4ec0\u4e48\u5947\u6570\u5e76\u6ca1\u6709\u660e\u663e\u7684\u89c4\u5f8b\u3002\u8003\u8651\u5b83\u4eec\u7684\u4e8c\u8fdb\u5236\u8868\u793a\uff1a\n\n![](https://i.bmp.ovh/imgs/2022/04/04/17ba9bfa189358eb.png)\n\n\u8fd9\u4e0b\u89c4\u5f8b\u5c31\u660e\u663e\u4e86\uff1a\u5f53 $f(x)=x$ \u65f6\uff0c$x$ \u7684\u4e8c\u8fdb\u5236\u8868\u793a\u662f**\u56de\u6587**\u7684\u3002\u5177\u4f53\u8bc1\u660e\u53ef\u89c1\u5176\u4ed6\u9898\u89e3\uff0c\n\n\u672c\u9898\u8f6c\u5316\u6210\u6c42 $[1, m]$ \u4e2d\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a\u56de\u6587\u4e32\u7684\u6570\u5b57\u4e2a\u6570\u3002\u56e0\u4e3a\u662f\u5728\u4e8c\u8fdb\u5236\u610f\u4e49\u4e0b\u4e14\u8ddf\u6570\u4f4d\u6709\u5173\uff0c\u5f88\u81ea\u7136\u7684\u60f3\u5230\u4f7f\u7528\u6570\u4f4d $\\texttt{dp}$\u3002\u7528\u4e00\u4e2a\u56db\u5143\u7ec4 $(l,\\text{pos},k_1,k_2)$ \u8868\u793a\u72b6\u6001\uff0c\u5176\u4e2d $l$ \u8868\u793a**\u6570\u4f4d\u957f\u5ea6**\uff1b$\\text{pos}$ \u8868\u793a\u5f53\u524d\u8ba1\u7b97\u7684**\u4f4d\u7f6e**\uff1b$k_1$ \u548c $k_2$ \u5206\u522b\u8868\u793a\u5f53\u524d\u6570\u5b57\u662f\u5426**\u4e0d\u5927\u4e8e** $m$\u3001\u5f53\u524d\u6570\u5b57\u662f\u5426\u662f**\u56de\u6587\u4e32**\uff0c\u53d6\u503c\u8303\u56f4\u5747\u4e3a $0$ \u6216 $1$\u3002\u8bbe $m$ \u5728\u4e8c\u8fdb\u5236\u8868\u793a\u4e0b\u7684\u7b2c $i$ \u4f4d\u4e3a $a_i$\uff0c\u72b6\u6001\u8f6c\u79fb\u4e3a $(l,\\text{pos},k_1,k_2) \\rightarrow (l',\\text{pos}',k_1',k_2')$\uff0c\u5219\u6709\uff1a\n\n1. \u5982\u679c $\\text{pos} > \\frac{l}{2}$ \uff0c\u6b64\u65f6\u4fdd\u6301 $k_2'=k_2$\uff0c\u5373\n\n$$(l,\\text{pos},k_1,k_2) \\rightarrow (l,\\text{pos}-1,\\Delta(k_1),k_2)$$\n\n2. \u5982\u679c $\\text{pos} \\leq \\frac{l}{2}$ \uff0c\u8bf4\u660e\u5df2\u7ecf\u9012\u5f52\u5230**\u5f53\u524d\u4e8c\u8fdb\u5236\u4e32\u7684\u524d\u534a\u90e8\u5206**\u3002\u8fd9\u662f\u4e00\u4e2a\u56de\u6587\u4e32\uff0c\u524d\u534a\u90e8\u5206\u7684\u4e8c\u8fdb\u5236\u4f4d\u5e94\u5f53\u548c\u540e\u534a\u90e8\u5206\u5b8c\u5168\u4e00\u81f4\uff0c\u800c\u540e\u534a\u90e8\u5206\u5df2\u7ecf\u9012\u5f52\u8ba1\u7b97\u51fa\u6765\u4e86\u3002\u6240\u4ee5\uff0c\u5f53\u4e14\u4ec5\u5f53  \u65f6 $k_2'=1$\uff1b\n\n\n$$\n(l,\\text{pos},k_1,k_2) \\rightarrow \\begin{cases}\n(l,\\text{pos}-1,\\Delta(k_1),1) && a_{l-\\text{pos}+1}=a_{\\text{pos}} \\text{ \u4e14 } k_2=1 \\\\\n(l,\\text{pos}-1,\\Delta(k_1),0)\n\\end{cases} \n$$\n\n\n\u8bf7\u6ce8\u610f\uff0c\u5728\u8fd9\u91cc\u6ca1\u6709\u52a0\u5165\u524d\u5bfc\u96f6\u7684\u5904\u7406\u3002\u5904\u7406\u65b9\u5f0f\u4e0d\u96be\u60f3\u5230\uff0c\u5f53 $l=\\text{pos}$ \u65f6\uff0c\u5982\u679c\u4ee4\u7b2c $\\text{pos}$ \u4f4d\u4e3a $0$ \u4e14**\u7b2c $\\text{pos}$ \u4f4d\u662f\u5f53\u524d\u6570\u5b57\u7684\u7b2c\u4e00\u4f4d\u65f6**\uff0c\u8bf4\u660e\u51fa\u73b0\u4e86\u524d\u5bfc\u96f6\u3002\u6b64\u65f6\u5e94\u5f53\u5c06 $l$ \u4e5f\u51cf\u53bb $1$\uff0c\u5373\n\n$$(l,\\text{pos},k_1,k_2) \\rightarrow (l-1,\\text{pos}-1,\\Delta(k_1),k_2) ~~~~~~ (\\text{pos}=l)$$\n\n\u5728\u72b6\u6001\u8f6c\u79fb\u4e2d\u5f15\u5165\u4e86\u65b0\u7b26\u53f7 $\\Delta(x)$\uff0c\u5b83\u7528\u6765\u8868\u793a $k_1$ \u7684\u7ef4\u62a4\u65b9\u5f0f\u3002$k_1$ \u8868\u793a\u7684\u662f\u5f53\u524d\u6570\u662f\u5426\u4e0d\u5927\u4e8e $m$\u3002\u8fd9\u662f\u6570\u4f4d $\\texttt{dp}$ \u7684\u57fa\u7840\u64cd\u4f5c\uff0c\u4e0d\u591a\u8d58\u8ff0\u3002\n\n***\n\n\u672c\u9898\u5e76\u6ca1\u6709\u53d6\u6a21\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u4e2a\u9ad8\u7cbe\u5ea6\u7c7b\u6765\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6570\u5b57\u53ca\u7b54\u6848\u3002\u6b64\u5916\u8fd8\u6709\u4e00\u4e9b\u7ec6\u8282\uff0c\u6bd4\u5982\u9700\u8981\u989d\u5916\u7684\u4e00\u4e2a\u6570\u7ec4 `vis` \u6765\u4fdd\u5b58\u201c\u5f53\u524d\u72b6\u6001\u662f\u5426\u88ab\u8bbf\u95ee\u8fc7\u201d\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u6709\u7684\u72b6\u6001\u8ba1\u7b97\u51fa\u7684\u503c\u662f $0$\uff0c\u65e0\u6cd5\u76f4\u63a5\u4f7f\u7528\u8bb0\u5fc6\u7684\u503c\u5224\u65ad\uff0c\u5173\u952e $\\texttt{dp}$ \u4ee3\u7801\u5982\u4e0b\uff1a\n\n```\nBigInteger dp(int use, int pos, bool limit, bool pam) {\n\tif(pos == 0) {\n\t\treturn pam && use > 0;\n\t}\n\tif(!limit && vis[use][pos][pam]) return f[use][pos][pam];\n\tBigInteger ans = 0, k;\n\tint lim = limit ? a[pos] : 1;\n\tfor(int i = 0; i <= lim; i++) {\n\t\tchose[pos] = i;\n\t\tif(!i && use == pos) {\n\t\t\tk = dp(\n\t\t\t\tuse - 1,\n\t\t\t\tpos - 1,\n\t\t\t\tlimit && i == lim,\n\t\t\t\tpam\n\t\t\t);\n\t\t\tans = ans + k;\n\t\t}\n\t\telse {\n\t\t\tk = dp(\n\t\t\t\tuse,\n\t\t\t\tpos - 1,\n\t\t\t\tlimit && i == lim,\n\t\t\t\t(pos <= use / 2 && pam) ? chose[use - pos + 1] == i : pam\n\t\t\t);\n\t\t\tans = ans + k;\n\t\t}\n\t}\n\tf[use][pos][pam] = ans, vis[use][pos][pam] = true;\n\treturn ans;\n}\n```\n\n\u5176\u4e2d\u51fa\u73b0\u7684 `BigInteger` \u662f\u9ad8\u7cbe\u5ea6\u7c7b\uff0c\u5b9e\u73b0\u8f83\u957f\u5c31\u4e0d\u653e\u4e86\u3002\u5b8c\u6574\u4ee3\u7801\u53ef\u89c1[\u526a\u8d34\u677f](https://www.luogu.com.cn/paste/f94kt6dv)\u3002",
        "postTime": 1649045199,
        "uid": 188950,
        "name": "UruhaRushia",
        "ccfLevel": 6,
        "title": "P2235 \u9898\u89e3"
    },
    {
        "content": "## P2235 [HNOI2002]Kathy\u51fd\u6570 \u9898\u89e3\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P2235)\n\n\u9898\u610f\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u8fd9\u4e2a\u6570\u636e\u8303\u56f4\u4e00\u770b\u5c31\u77e5\u9053\u662f\u6570\u4f4d DP\uff0c\u800c\u4e14\u80af\u5b9a\u8981\u5199\u9ad8\u7cbe\u5ea6\u3002\uff08\u96be\u70b9\u5728\u4e8e\u9ad8\u7cbe\u5ea6\uff08\u9003\uff09\uff09\n\n\u90a3\u8fd9\u4e2a\u53c8\u548c\u666e\u901a\u7684\u6570\u4f4d DP \u611f\u89c9\u6ca1\u4ec0\u4e48\u5173\u7cfb\uff0c\u53ef\u4ee5\u6309\u7167\u5b9a\u4e49\u6253\u4e2a\u8868\uff0c\u7136\u540e\u5341\u8fdb\u5236\u4e0b\u611f\u89c9\u770b\u4e0d\u51fa\u4ec0\u4e48\u4e1c\u897f\uff0c\u53ea\u80fd\u5f97\u5230 $n$ \u90fd\u662f\u5947\u6570\u3002\n\n\u65e2\u7136\u662f\u5947\u6570\uff0c\u8bf4\u660e\u4e8c\u8fdb\u5236\u6700\u9ad8\u4f4d\u548c\u6700\u4f4e\u4f4d\u90fd\u662f $1$\uff0c\u90a3\u4e8c\u8fdb\u5236\u4f1a\u4e0d\u4f1a\u6709\u4ec0\u4e48\u6027\u8d28\uff1f\n\n\u7136\u540e\u6211\u6253\u4e86\u4e2a\u8868\uff0c\u7136\u540e\u60ca\u559c\u5730\u8ddf\u6211\u65c1\u8fb9\u4eba\u8bf4\u6211\u6253\u8868\u6253\u51fa\u4e2a\u5854\u697c\uff0c\u50cf\u8fd9\u6837\uff1a\n\n![\u771f\u00b7\u5854\u697c](https://cdn.luogu.com.cn/upload/image_hosting/f0gi1jyr.png)\n\n\u7136\u540e\u60f3\u4e00\u4f1a\uff0c\u53d1\u73b0\u4e00\u4e2a\u4e1c\u897f\uff1a\n\n**\u8fd9\u4e2a\u4e1c\u897f\u957f\u5f97\u8fd9\u4e48\u597d\u770b\u662f\u56e0\u4e3a\u5b83\u5de6\u53f3\u5bf9\u79f0\u554a**\n\n\u7136\u540e\u770b\u4e00\u4e0b\uff0c\u53d1\u73b0\u9664\u4e86\u6700\u9ad8\u4f4e\u8fd9\u4e24\u4f4d\u5c31\u662f\u4ece $1$ \u5f00\u59cb\u628a\u4e8c\u8fdb\u5236\u6570\u6b63\u7740\u653e\u4e00\u904d\u53cd\u7740\u518d\u653e\u4e00\u904d\u3002\n\n\u4e5f\u5c31\u662f\u4e2d\u95f4\u8fd9\u4e9b\u662f\u4e8c\u8fdb\u5236\u56de\u6587\u4e32\uff08\u4e24\u8fb9\u4e5f\u662f\uff09\n\n\u7136\u540e\u5c31\u662f\u4e2a\u975e\u5e38\u88f8\u7684\u6570\u4f4d DP\uff0c\u4e0d\u7b97\u9ad8\u7cbe\u6bd4\u4e00\u822c\u6570\u4f4d DP \u7b80\u5355\u5f97\u591a\uff0c\u4f46\u6709\u51e0\u4e2a\u5c0f\u7ec6\u8282\uff1a\n\n1.\u5982\u679c $m$ \u662f\u5076\u6570\u5c31\u76f4\u63a5 $-1$ \u4f7f\u4e4b\u6700\u9ad8\u3001\u4f4e\u4f4d\u90fd\u662f $1$\u3002\n\n2.\u6c42\u7684\u65f6\u5019\u9884\u5148\u6c42\u51fa\u6240\u6709\u4e8c\u8fdb\u5236\u957f\u5ea6\u6bd4 $m$ \u8981\u5c0f\u7684\u7b54\u6848\u3002\n\n3.\u6700\u540e\u7684\u7b54\u6848\u76f8\u5f53\u4e8e\u662f\u53d6\u4e00\u534a\u7684\u4e32\uff0c\u76f4\u63a5\u628a\u8fd9\u4e2a\u6570\u52a0\u5230\u7b54\u6848\u91cc\u9762\uff0c\u53ea\u4e0d\u8fc7\u6700\u540e\u52a0\u4e2a\u7279\u5224\uff0c\u5373\u770b\u770b\u53f3\u4fa7\u5168\u90e8\u9876\u4f4d\u65f6\u5de6\u8fb9\u5982\u679c\u662f\u56de\u6587\u4e32\u4f1a\u4e0d\u4f1a\u8d85\u9650\uff0c\u4e0d\u4f1a\u6700\u540e\u4e00\u4f4d\u8d21\u732e\u4e3a $1$\uff0c\u5426\u5219\u4e3a $0$\u3002\n\n**\u6253\u8868\u771f\u662f\u4e2a\u597d\u4e1c\u897f**\n\n### \u8d34\u4ee3\u7801\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <bitset>\n#define lint long long\n#define rint register int\nusing namespace std;\nnamespace hpc{\n\tconst int L=405;\n\tstruct num{short a[L]={0},nd=0;};\n\tinline num t(string s){\n\t\tnum x;x.nd=s.size();\n\t\tfor(rint i=0;i<x.nd;++i)\n\t\t\tx.a[x.nd-i-1]=s[i]-'0';\n\t\treturn x;\n\t}\n\tinline num operator+(num x,num y){\n\t\tnum z;z.nd=max(x.nd,y.nd);\n\t\tfor(rint i=0;i<z.nd;++i){\n\t\t\tz.a[i]+=x.a[i]+y.a[i];\n\t\t\tz.a[i+1]+=z.a[i]/10;\n\t\t\tz.a[i]%=10;\n\t\t}\n\t\tif(z.a[z.nd])++z.nd;\n\t\treturn z;\n\t}\n\tinline num operator*(num x,num y){\n\t\tnum z;z.nd=x.nd+y.nd-1;\n\t\tfor(rint i=0;i<x.nd;++i)\n\t\t\tfor(rint j=0;j<y.nd;++j)\n\t\t\t\tz.a[i+j]+=x.a[i]*y.a[j];\n\t\tfor(rint i=0;i<z.nd;++i){\n\t\t\tz.a[i+1]+=z.a[i]/10;\n\t\t\tz.a[i]%=10;\n\t\t}\n\t\tif(z.a[z.nd])++z.nd;\n\t\treturn z;\n\t}\n\tinline void print(num x){\n\t\tif(!x.nd)cout<<\"0\";\n\t\telse\n\t\t\tfor(rint i=x.nd-1;i>=0;--i)\n\t\t\t\tcout<<x.a[i];\n\t\tcout<<endl;\n\t}\n\tinline void upd(num &x){\n\t\tif(x.a[0]&1)return;\n\t\t--x.a[0];\n\t\tfor(rint i=0;i<x.nd;++i)\n\t\t\tif(x.a[i]<0)--x.a[i+1],x.a[i]+=10;\n\t\tif(!x.a[x.nd-1])--x.nd;\n\t}//\u5bf9\u5341\u8fdb\u5236 -1 \u5982\u679c\u662f\u5947\u6570 \n\tinline num tb(num d){\n\t\tnum b;\n\t\twhile(d.nd){\n\t\t\tb.a[b.nd++]=d.a[0]&1;\n\t\t\tfor(rint i=0;i<d.nd;++i){\n\t\t\t\tif((d.a[i]&1)&&i>0)\n\t\t\t\t\td.a[i-1]+=5;\n\t\t\t\td.a[i]/=2;\n\t\t\t}\n\t\t\tif(!d.a[d.nd-1])--d.nd;\n\t\t}\n\t\treturn b;\n\t}//\u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5236 \n\tnum mi[L];\n\tinline void init(){\n\t\tmi[0]=t(\"1\");\n\t\tmi[1]=t(\"2\");\n\t\tfor(rint i=2;i<L;++i)\n\t\t\tmi[i]=mi[i-1]*mi[1];\n\t}//\u83b7\u53d6 2 \u7684\u6b21\u5e42 \n}\nhpc::num m,ans;\nstring s;\ninline bool ck(){\n\tint lt,rt;\n\tif(m.nd&1)lt=m.nd/2-1,rt=m.nd/2+1;\n\telse lt=m.nd/2-1,rt=m.nd/2;\n\twhile(lt>=1&&rt<=m.nd-2){\n\t\tif(m.a[lt]>m.a[rt])\n\t\t\treturn true;\n\t\tif(m.a[lt]<m.a[rt])\n\t\t\treturn false;\n\t\t--lt;++rt;\n\t}\n\treturn true;\n}\ninline void solve(){\n\tm=hpc::t(s);\n\thpc::upd(m);\n\tm=hpc::tb(m);\n\tans=hpc::t(\"1\");\n\tfor(rint i=2;i<=m.nd-1;++i){\n\t\tint tmp=(i-2)/2;\n\t\tif((i-2)&1)++tmp;\n\t\tans=ans+hpc::mi[tmp];\n\t}\n\tif(m.nd>=2){\n\t\tint rt=m.nd-2,lt=m.nd/2;\n\t\tfor(rint i=rt;i>=lt;--i)\n\t\t\tif(m.a[i])\n\t\t\t\tans=ans+hpc::mi[i-lt];\n\t\tif(ck())ans=ans+hpc::t(\"1\");\t\n\t}\n\thpc::print(ans);\n}\nint main(){\n\thpc::init();\n\tcin>>s;\n\tsolve();\n\treturn 0;\n}\n\n```\n",
        "postTime": 1631435920,
        "uid": 206258,
        "name": "SDNetFriend",
        "ccfLevel": 7,
        "title": "P2235 [HNOI2002]Kathy\u51fd\u6570 \u9898\u89e3"
    },
    {
        "content": "[\u9898\u610f](https://www.luogu.com.cn/problem/P2235)\n\n---\n\n\u53d1\u4e2a\u5947\u602a\u7684\u627e\u89c4\u5f8b\u9898\u89e3\uff08\n\n\u56e0\u4e3a\u6bd4\u8d5b\u65f6\u5019\u63a8\u51fa\u89c4\u5f8b\u5176\u5b9e\u5f88\u56f0\u96be\uff0c\u6240\u4ee5\u5bf9\u4e8e\u7ecf\u8fc7\u4e00\u4e9b\u5927\u6570\u636e\u9a8c\u8bc1\u7684\u6027\u8d28\u4e07\u4e0d\u5f97\u5df2\u65f6\u53ef\u4ee5\u4e0d\u7528\u8bc1\u660e\u76f4\u63a5\u4f7f\u7528\u3002\u8fd9\u662f\u5728\u6bd4\u8d5b\u65f6\u7684\u8865\u6551\uff08\u9a97\u5206\uff09\u65b9\u6cd5\u3002\n\n\u9996\u5148\u73a9\u51e0\u4e2a\u5c0f\u6837\u4f8b\u627e\u4e00\u4e0b\u89c4\u5f8b\uff0c\u8fd9\u91cc\u9996\u5148\u89c2\u5bdf\u5230\u56e0\u4e3a\u9012\u63a8\u5f0f\u5b50\u5927\u6982\u662f\u56db\u4e2a\u4e00\u904d\u5faa\u73af\uff0c\u4e8e\u662f\u6211\u4eec\u6bcf\u56db\u4e2a\u6570\u6392\u5217\u4e00\u6b21\uff1a\n\n```\n1 1 3 1\n5 3 7 1\n9 5 13 3\n11 7 15 1\n17 9 25 5\n21 13 29 3\n19 11 27 7\n23 15 31 1\n33 17 49 9\n41 25 57 55\n37 21 53 13\n45 29 61 3\n35 19 51 11\n43 27 59 7\n39 23 55 15\n47 31 63 1\n...\n\n```\n\n\u5982\u679c\u6709\u6570\u611f\u7684\u540c\u5b66\u53ef\u80fd\u5df2\u7ecf\u770b\u51fa\u6765\u4e86\uff1a\u9996\u5148\u5947\u6570\u5217\u4ee5 $2^x$ \u6b21\u5e42\u4e3a\u4e00\u4e2a\u89c4\u5f8b\uff0c\u628a\u6240\u6709\u7684\u5947\u6570\u4ece\u5c0f\u5230\u5927\u7684\u884c\u6570\u4f9d\u6b21\u6392\u5217\u8d77\u6765\u5c31\u662f\uff1a\n\n```\n1 | 1 | 2 2 | 3 4 3 4 | 5 7 6 8 5 7 6 8 | ...\n```\n\n\u628a\u540c\u4e00\u4e2a\u5757\u91cc\u9762\u7684\u6700\u5c0f\u6570\u53d8\u6210\u4ee5 $1$ \u5f00\u59cb\uff1a\n\n```\n1 | 1 | 1 1 | 1 2 1 2 | 1 3 2 4 1 3 2 4 | ...\n```\n\n\u90a3\u4e48\u968f\u4fbf\u8bbe\u70b9\u4ec0\u4e48\uff08\u6bd4\u5982\u6570\u7684\u5927\u5c0f\uff0c\u884c\u6570\uff0c\u5757\u7684\u7f16\u53f7\uff09\uff08\u5927\u6982\uff09\u90fd\u53ef\u4ee5\u5199\u51fa\u4e00\u4e2a\u548c $2^x$ \u6709\u5173\u7684\u9012\u63a8\u5f0f\uff0c\u8fd9\u65f6\u6211\u4eec\u53d1\u73b0\u7b54\u6848\u53ef\u80fd\u548c $2$ \u8fdb\u5236\u6709\u5173\u3002\n\n\u6253\u51fa\u524d\u51e0\u4e2a\u7b54\u6848\u7684\u4e8c\u8fdb\u5236\u7684\u8868\uff0c\u53ef\u4ee5\u5f97\u5230\uff1a\n\n```\n1\n\n11\n\n101\n111\n\n1001\n1111\n\n10001\n10101\n11011\n11111\n\n100001\n101101\n110011\n111111\n...\n```\n\n\u53ef\u4ee5\u53d1\u73b0\u90fd\u662f\u56de\u6587\u6570\uff0c\u800c\u4e14\u5305\u62ec\u4e86\u6240\u6709\u7684\u56de\u6587\u4e8c\u8fdb\u5236\u6570\u3002\n\n\u6240\u4ee5\u7b54\u6848\u5c31\u662f \u2014\u2014 \u5c0f\u4e8e\u7b49\u4e8e $m$ \u7684\u4e8c\u8fdb\u5236\u6570\u4e2d\uff0c\u56de\u6587\u6570\u7684\u4e2a\u6570\u3002",
        "postTime": 1601044667,
        "uid": 35891,
        "name": "huangzirui",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2235 \u3010[HNOI2002]Kathy\u51fd\u6570\u3011"
    },
    {
        "content": "\u7ed3\u8bba\uff1a$f(n)$ \u4e3a $n$ \u7684\u4e8c\u8fdb\u5236\u7ffb\u8f6c\u3002\n\n\u8bc1\u660e\uff1a\n\n\u53d1\u73b0\u9898\u9762\u7ed9\u51fa\u7684\u540e\u4e24\u4e2a\u5f0f\u5b50\u90fd\u6709 $f(2n+1)-f(n)$ \u8fd9\u4e2a\u90e8\u5206\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u59a8\u8bbe\u8fd9\u4e2a\u4e3a $g(n)$\u3002\u8003\u8651\u7b97\u4e00\u4e0b $g(n)$ \u7684\u503c\u3002\n\n\u82e5 $n$ \u4e3a\u975e $1$ \u5947\u6570\uff0c\u4e0d\u59a8\u8bbe $n=2k+1$\uff0c\u6709\uff1a\n\n$$\n\\begin{aligned}\ng(n)&=f(2n+1)-f(n)\\\\&=f(4k+3)-f(2k+1)\\\\&=3f(2k+1)-2f(k)-f(2k+1)\\\\&=2[f(2k+1)-f(k)]\\\\&=2g(k)\n\\end{aligned}\n$$\n\n\u82e5 $n$ \u4e3a\u5076\u6570\uff0c\u4e0d\u59a8\u8bbe $n=2k$\uff0c\u6709\uff1a\n\n$$\n\\begin{aligned}\ng(n)&=f(2n+1)-f(n)\\\\&=f(4k+1)-f(2k)\\\\&=2f(2k+1)-f(k)-f(k)\\\\&=2[f(2k+1)-f(k)]\\\\&=2g(k)\n\\end{aligned}\n$$\n\n\u53c8\u6613\u5f97 $g(1)=2$\u3002\n\n\u7efc\u4e0a\u53ef\u5f97\uff0c\u82e5 $n$ \u7684\u4e8c\u8fdb\u5236\u8868\u793a\u6709 $p$ \u4f4d\uff0c\u5219 $g(n)=2^p$\u3002\n\n\u518d\u8003\u8651 $f(4n),f(4n+1),f(4n+2),f(4n+3)$ \u7684\u503c\u3002\n\n$$\nf(4n)=f(n)\n$$\n\n$$\nf(4n+1)=f(n)+2g(n)\n$$\n\n$$\nf(4n+2)=f(2n+1)=f(n)+g(n)\n$$\n\n$$\nf(4n+3)=f(n)+3g(n)\n$$\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c$f(n)$ \u8f6c\u79fb\u5230 $f(4n+k),k\\in\\{0,1,2,3\\}$\uff0c\u5c31\u76f8\u5f53\u4e8e\u628a $k$ \u7684\u4e8c\u8fdb\u5236\u8868\u793a\u7ffb\u8f6c\uff0c\u7136\u540e\u628a $f(n)$ \u7684\u4e8c\u8fdb\u5236\u8868\u793a\u63a5\u5230\u540e\u9762\u3002\n\n\u53c8 $f(1),f(2),f(3)$ \u5747\u6ee1\u8db3\u7ed3\u8bba\uff0c\u6240\u4ee5\u8be5\u7ed3\u8bba\u6210\u7acb\u3002\n\n------------\n\n\u7136\u540e\u5c31\u6bd4\u8f83\u7b80\u5355\u4e86\uff0c\u9ad8\u7cbe\u5ea6\u9884\u5904\u7406\u7136\u540e\u6570\u4f4d dp \u4e00\u4e0b\u5373\u53ef\u3002",
        "postTime": 1680059658,
        "uid": 390770,
        "name": "AiRC0S",
        "ccfLevel": 0,
        "title": "Kathy"
    },
    {
        "content": "[link](https://www.luogu.com.cn/problem/P2235)\n\n\u770b\u5230\u8fd9\u9053\u9898\u7b2c\u4e00\u601d\u8def\u5c31\u662f\u5148\u6253\u4e2a\u8868\u518d\u8bf4\uff0c\u4e8b\u5b9e\u8bc1\u660e\u786e\u5b9e\u975e\u5e38\u6709\u7528\uff0c\u5229\u7528 win10 \u4e0b\u7684\u201c\u8ba1\u7b97\u5668-\u7a0b\u5e8f\u5458\u201d\u5bb9\u6613\u65b9\u4fbf\u5730\u53d1\u73b0\u6bcf\u4e00\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u6570\u90fd\u5728\u4e8c\u8fdb\u5236\u4e0b\u56de\u6587\u3002\u5927\u91cf\u7ecf\u9a8c\u8bc1\u660e\uff0c\u4e0d\u5b8c\u5168\u5f52\u7eb3\u6cd5\u5177\u6709\u666e\u904d\u7684\u53ef\u9760\u6027\uff0c\u56e0\u6b64\u9898\u76ee\u8f6c\u4e3a\u6c42 $\\le m$ \u7684\u4e8c\u8fdb\u5236\u56de\u6587\u6570\u4e2a\u6570\u3002\n\n\u4e3a\u4ec0\u4e48\u8981\u6570\u4f4d DP \u5462\uff1f\u76f4\u63a5\u8ba1\u7b97\u5373\u53ef\u3002\u4e0b\u9762 $|m|$ \u4ee3\u8868\u4e8c\u8fdb\u5236\u4e0b $|m|$ \u957f\u5ea6\u3002\n\n\u679a\u4e3e\u56de\u6587\u4e32\u4e8c\u8fdb\u5236\u4e0b\u4e0d\u542b\u524d\u5bfc\u96f6\u7684\u957f\u5ea6 $i(1\\le i<|m|)$\uff0c\u90a3\u4e48\u65b0\u589e\u7684\u7b54\u6848\u5373\u4e3a $2^{(i+1)/2}$\uff08`/` \u8868\u793a\u6574\u9664\uff0c\u4e0b\u540c\uff09\u3002\u73b0\u5728\u8003\u8651 $i=n$ \u7684\u60c5\u51b5\u3002\u4ee5\u4e0b\u201c\u7b2c $k$ \u4f4d\u201d\u6307\u7684\u662f\u4ece\u6700\u4f4e\u4f4d\u5f00\u59cb\u6570\u3002\n\n\u5047\u5982\u7b2c $j+1\\sim |m|(j>|m|/2)$ \u4f4d\u90fd\u8ddf $m$ \u7684\u4e00\u6837\uff0c\u8003\u8651\u5269\u4f59\u7684 $n(n<m)$ \u6709\u51e0\u79cd\u65b9\u6848\u3002\u663e\u7136\u5bb9\u6613\u8ba1\u7b97\u51fa\u56de\u6587\u4e2d\u5fc3\u5230 $j$ \u7684\u5b57\u7b26\u6570 $l=j-(|m|/2)$\uff0c\u7531\u4e8e\u8981\u4fdd\u8bc1 $n<m$\uff0c\u6240\u4ee5\u9650\u5b9a\u7b2c $j$ \u4f4d\u53ea\u80fd\u586b $0$\uff0c\u90a3\u4e48\u7b54\u6848\u589e\u52a0 $2^{l-1}$\u3002\n\n\u4f46\u662f\u8fd9\u8fd8\u6ca1\u6709\u7edf\u8ba1\u5b8c\u3002\u5047\u5982\u7b2c $(|m|/2)+1$ \u4f4d\u586b $1$\uff08$(|m|/2)+2\\sim |m|$ \u4f4d\u8fd8\u662f\u8ddf $m$ \u4fdd\u6301\u4e00\u81f4\uff09\u662f\u4e0d\u662f\u4e00\u5b9a\u5c31\u4f1a\u8ba9 $n>m$ \u4e86\u5462\uff1f\u663e\u7136\u4e0d\u662f\u3002\u4f46\u8fd9\u4e2a\u65f6\u5019\u7684 $n$ \u5df2\u7ecf\u56fa\u5b9a\u4e86\uff0c\u53ea\u9700\u8981\u7279\u5224\u5b83\u662f\u4e0d\u662f $\\le m$ \u5373\u53ef\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\u4e2d\uff0c\u9ad8\u7cbe\u9700\u8981\u5b9e\u73b0\uff1a\n- \u5341\u8fdb\u5236\u8f6c\u4e8c\u8fdb\u5236\uff08\u5176\u4e2d\u9700\u8981\u7528\u5230\u9ad8\u7cbe\u6574\u9664 $2$\uff09\n- \u8f93\u5165\u3001\u8f93\u51fa\n- \u9ad8\u7cbe\u52a0\n- \u9ad8\u7cbe\u4e58\n- \u9ad8\u7cbe\u5feb\u901f\u5e42\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=405;\nstruct Integer{\n\tint a[102],len;\n\tInteger(){len=0,memset(a,0,sizeof(a));}\n\tinline void read(){\n\t\tregister string str;\n\t\tcin>>str,len=str.length();\n\t\tfor(int i=0;i<str.length();i++)a[len-i]=str[i]-'0';\n\t}\n\tinline void print(){\n\t\tfor(int i=len;i;i--)cout<<a[i];puts(\"\");\n\t}\n\tinline int mod(){return a[1]&1;}\n}num,ans,_1;\nInteger div2(Integer A){\n\tInteger B;\n\tint k=0;\n\tfor(int i=A.len;i;i--){\n\t\tk=k*10+A.a[i];\n\t\tB.a[i]=k>>1,k&=1;\n\t\tif(B.a[i]&&!B.len)B.len=i;\n\t}\n\treturn B;\n}\nInteger operator*(Integer A,Integer B){\n\tInteger C;\n\tfor(int i=1;i<=A.len;i++)\n\t\tfor(int j=1,k,f=0;f||j<=B.len;j++){\n\t\t\tk=A.a[i]*B.a[j]+C.a[i+j-1]+f;\n\t\t\tf=k/10;\n\t\t\tC.a[i+j-1]=k%10;\n\t\t\tC.len=max(C.len,i+j-1);\n\t\t}\n\treturn C;\n}\nInteger operator+(Integer A,Integer B){\n\tInteger C;\n\tfor(int i=1,k,f=0;i<=max(A.len,B.len)||f;i++){\n\t\tk=A.a[i]+B.a[i]+f;\n\t\tf=k/10;\n\t\tC.a[i]=k%10;\n\t\tC.len=i;\n\t}\n\treturn C;\n}\nInteger qp2(int b){\n\tInteger A,Ans;A.len=1,A.a[1]=2;Ans.len=1,Ans.a[1]=1;\n\tfor(;b;b>>=1,A=A*A)if(b&1)Ans=Ans*A;\n\treturn Ans;\n}\nint n,b[N],_b[N];\nbool leq(){\n\tfor(int i=n;i;i--)if(_b[i]<b[i])return 1;else if(b[i]<_b[i])return 0;\n\treturn 1;\n}\nint main(){\n\tnum.read();\n\twhile(num.len)b[++n]=num.mod(),num=div2(num);\n\tfor(int i=1;i<n;i++)ans=ans+qp2(((i+1)>>1)-1);\n\tfor(int i=n-1;i>n/2;i--){\n\t\tif(!b[i])continue;\n\t\tans=ans+qp2(i-1-n/2);\n\t}\n\t_1.len=1,_1.a[1]=1;\n\tfor(int i=1;i<=n/2;i++)_b[i]=b[n-i+1];\n\tfor(int i=n/2+1;i<=n;i++)_b[i]=b[i];\n\tif(leq())ans=ans+_1;\n\tans.print();\n}\n```",
        "postTime": 1636358835,
        "uid": 300078,
        "name": "pengyule",
        "ccfLevel": 7,
        "title": "P2235 [HNOI2002]Kathy\u51fd\u6570"
    },
    {
        "content": "## \u6570\u4f4dDP\uff08dfs\uff09\n\n\u9ad8\u7cbe\u90e8\u5206\u5c31\u8bf7\u4f60\u4eec\u7701\u7565\u5427\u2026\u2026\n\n```c\n#include<bits/stdc++.h>\nusing namespace std;\n#define go(i,a,b) for(int i=(a);i<=(b);++(i))\n#define com(i,a,b) for(int i=(a);i>=(b);--(i))\n#define mem(a,b) memset((a),(b),sizeof(a))\n#define inf 0x3f3f3f3f\n#define fin freopen(\"input.txt\",\"r\",stdin)\n#define fout freopen(\"output.txt\",\"w\",stdout)\ntypedef long long ll;\nconst int maxn=100010;\nint num[500],p[500],n;\n\nconst int base = 1e8;\nconst int N = 20;\nint aux[N << 3];\nstruct bigint {\n    int s[N], l;\n    void CL() { l = 0; memset(s, 0, sizeof(s)); }\n    void pr()\n    {\n        printf(\"%d\", s[l]);\n        for (int i = l - 1; i; i--)\n            printf(\"%08d\", s[i]);\n    }\n    void re_l()\n    {\n        int i, x = 0, k = 1, L = 0, fl, o;\n        char c = getchar();\n        for (; c < '0' || c > '9'; c = getchar());\n        for (; c >= '0' && c <= '9'; c = getchar())\n        {\n            if (!(L - 1) && !aux[L])\n                L--;\n            aux[++L] = c - '0';\n        }\n        CL();\n        l = L / 8 + ((o = L % 8) > 0);\n        for (i = 1; i <= o; i++)\n            x = x * 10 + aux[i];\n        if (o)\n            s[l] = x;\n        for (fl = !o ? l + 1 : l, i = o + 1, x = 0; i <= L; i++, k++)\n        {\n            x = x * 10 + aux[i];\n            if (!(k ^ 8))\n                s[--fl] = x, x = k = 0;\n        }\n        if (!l)\n            l = 1;\n    }\n    ll toint()\n    {\n        ll x = 0;\n        for (int i = l; i; i--)\n            x = x * base + s[i];\n        return x;\n    }\n    bigint operator = (int b)\n    {\n        CL();\n        do\n        {\n            s[++l] = b % base;\n            b /= base;\n        } while (b > 0);\n        return *this;\n    }\n    bigint operator = (ll b)\n    {\n        CL();\n        do\n        {\n            s[++l] = b % base;\n            b /= base;\n        } while (b > 0);\n        return *this;\n    }\n    bigint operator + (const int& b)\n    {\n        bigint c = *this;\n        ll x = b;\n        for (int i = 1; i <= l && x; i++)\n        {\n            x = x + c.s[i];\n            c.s[i] = x % base;\n            x /= base;\n        }\n        if (x)\n            c.s[++c.l] = x;\n        return c;\n    }\n    bigint operator + (const ll & b)\n    {\n        bigint c = *this;\n        ll x = b;\n        for (int i = 1; i <= l && x; i++)\n        {\n            x = x + c.s[i];\n            c.s[i] = x % base;\n            x /= base;\n        }\n        if (x)\n            c.s[++c.l] = x;\n        return c;\n    }\n    bigint operator + (bigint & b)\n    {\n        if (b.l < 3)\n            return *this + b.toint();\n        bigint c;\n        ll x = 0;\n        int k = l < b.l ? b.l : l;\n        c.CL(); c.l = k;\n        for (int i = 1; i <= k; i++)\n        {\n            x = x + s[i] + b.s[i];\n            c.s[i] = x % base;\n            x /= base;\n        }\n        if (x)\n            c.s[++c.l] = x;\n        return c;\n    }\n    bigint operator - (const bigint & b)\n    {\n        bigint c, d = *this;\n        ll x = 0;\n        c.CL();\n        for (int i = 1; i <= l; i++)\n        {\n            if ((x = d.s[i]) < b.s[i])\n            {\n                d.s[i + 1]--;\n                x += base;\n            }\n            c.s[i] = x - b.s[i];\n        }\n        c.l = l;\n        for (; !c.s[c.l] && c.l > 1; c.l--);\n        return c;\n    }\n    bigint operator - (const int& b) { bigint c; return *this - (c = b); }\n    bigint operator - (const ll & b) { bigint c; return *this - (c = b); }\n    bigint operator * (const int& b)\n    {\n        bigint c;\n        ll x = 0;\n        c.CL();\n        for (int i = 1; i <= l; i++)\n        {\n            x = x + 1LL * s[i] * b;\n            c.s[i] = x % base;\n            x /= base;\n        }\n        for (c.l = l; x; x /= base)\n            c.s[++c.l] = x % base;\n        return c;\n    }\n    bigint operator * (bigint & b)\n    {\n        if (b.l < 2)\n            return *this * b.toint();\n        bigint c;\n        ll x;\n        int i, j, k;\n        c.CL();\n        for (i = 1; i <= l; i++)\n        {\n            x = 0;\n            for (j = 1; j <= b.l; j++)\n            {\n                x = x + 1LL * s[i] * b.s[j] + c.s[k = i + j - 1];\n                c.s[k] = x % base;\n                x /= base;\n            }\n            if (x)\n                c.s[i + b.l] = x;\n        }\n        for (c.l = l + b.l; !c.s[c.l] && c.l > 1; c.l--);\n        return c;\n    }\n    bigint operator * (const ll & b)\n    {\n        bigint c;\n        if (b > 2e9)\n        {\n            c = b;\n            return *this* c;\n        }\n        ll x = 0;\n        c.CL();\n        for (int i = 1; i <= l; i++)\n        {\n            x = x + b * s[i];\n            c.s[i] = x % base;\n            x /= base;\n        }\n        for (c.l = l; x; x /= base)\n            c.s[++c.l] = x % base;\n        return c;\n    }\n    bigint operator / (const int& b)\n    {\n        bigint c;\n        ll x = 0;\n        c.CL();\n        for (int i = l; i; i--)\n        {\n            c.s[i] = (x * base + s[i]) / b;\n            x = (x * base + s[i]) % b;\n        }\n        for (c.l = l; !c.s[c.l] && c.l > 1; c.l--);\n        return c;\n    }\n    bigint operator / (const ll & b)\n    {\n        bigint c;\n        ll x = 0;\n        c.CL();\n        for (int i = l; i; i--)\n        {\n            c.s[i] = (x * base + s[i]) / b;\n            x = (x * base + s[i]) % b;\n        }\n        for (c.l = l; !c.s[c.l] && c.l > 1; c.l--);\n        return c;\n    }\n    bigint operator / (bigint & b)\n    {\n        if (b.l < 2)\n            return *this / b.toint();\n        bigint c, d;\n        int i, j, le, r, mid, k;\n        c.CL(); d.CL();\n        for (i = l; i; i--)\n        {\n            for (j = ++d.l; j > 1; j--)\n                d.s[j] = d.s[j - 1];\n            d.s[1] = s[i];\n            if (d < b)\n                continue;\n            le = k = 0; r = base - 1;\n            while (le <= r)\n            {\n                mid = (le + r) >> 1;\n                b * mid <= d ? le = mid + 1, k = mid : r = mid - 1;\n            }\n            c.s[i] = k; d = d - b * k;\n        }\n        for (c.l = l; !c.s[c.l] && c.l > 1; c.l--);\n        return c;\n    }\n    bigint operator % (const int& b)\n    {\n        bigint c;\n        ll x = 0;\n        c.CL();\n        for (int i = l; i; i--)\n            x = (x * base + s[i]) % b;\n        return c = x;\n    }\n    bigint operator % (const ll & b)\n    {\n        bigint c;\n        ll x = 0;\n        c.CL();\n        for (int i = l; i; i--)\n            x = (x * base + s[i]) % b;\n        return c = x;\n    }\n    bigint operator % (bigint & b)\n    {\n        if (b.l < 2)\n            return *this % b.toint();\n        bigint c;\n        int i, j, le, r, mid, k;\n        c.CL();\n        for (i = l; i; i--)\n        {\n            for (j = ++c.l; j > 1; j--)\n                c.s[j] = c.s[j - 1];\n            c.s[1] = s[i];\n            if (c < b)\n                continue;\n            le = k = 0; r = base - 1;\n            while (le <= r)\n            {\n                mid = (le + r) >> 1;\n                b * mid <= c ? le = mid + 1, k = mid : r = mid - 1;\n            }\n            c = c - b * k;\n        }\n        for (; !c.s[c.l] && c.l > 1; c.l--);\n        return c;\n    }\n    bigint operator += (bigint & b) { return *this = *this + b; }\n    bigint operator += (ll b) { return *this = *this + b; }\n    bigint operator += (int b) { return *this = *this + b; }\n    bigint operator -= (bigint & b) { return *this = *this - b; }\n    bigint operator -= (ll b) { return *this = *this - b; }\n    bigint operator -= (int b) { return *this = *this - b; }\n    bigint operator *= (bigint & b) { return *this = *this * b; }\n    bigint operator *= (ll b) { return *this = *this * b; }\n    bigint operator *= (int b) { return *this = *this * b; }\n    bigint operator /= (bigint & b) { return *this = *this / b; }\n    bigint operator /= (ll b) { return *this = *this / b; }\n    bigint operator /= (int b) { return *this = *this / b; }\n    bigint operator %= (bigint & b) { return *this = *this % b; }\n    bigint operator %= (ll b) { return *this = *this % b; }\n    bigint operator %= (int b) { return *this = *this % b; }\n    bool operator < (const bigint & b) const\n    {\n        if (l ^ b.l)\n            return l < b.l;\n        for (int i = l; i; i--)\n            if (s[i] ^ b.s[i])\n                return s[i] < b.s[i];\n        return false;\n    }\n    bool operator <= (const bigint & b) const\n    {\n        if (l ^ b.l)\n            return l < b.l;\n        for (int i = l; i; i--)\n            if (s[i] ^ b.s[i])\n                return s[i] < b.s[i];\n        return true;\n    }\n    bool operator > (const bigint & b) const\n    {\n        if (l ^ b.l)\n            return l > b.l;\n        for (int i = l; i; i--)\n            if (s[i] ^ b.s[i])\n                return s[i] > b.s[i];\n        return false;\n    }\n    bool operator >= (const bigint & b) const\n    {\n        if (l ^ b.l)\n            return l > b.l;\n        for (int i = l; i; i--)\n            if (s[i] ^ b.s[i])\n                return s[i] > b.s[i];\n        return true;\n    }\n    bool operator == (const bigint & b) const\n    {\n        if (l ^ b.l)\n            return false;\n        for (int i = l; i; i--)\n            if (s[i] ^ b.s[i])\n                return false;\n        return true;\n    }\n    bool operator != (const bigint & b) const\n    {\n        if (l ^ b.l)\n            return true;\n        for (int i = l; i; i--)\n            if (s[i] ^ b.s[i])\n                return true;\n        return false;\n    }\n    bool operator < (ll b) const { bigint c; return *this < (c = b); }\n    bool operator <= (ll b) const { bigint c; return *this <= (c = b); }\n    bool operator > (ll b) const { bigint c; return *this > (c = b); }\n    bool operator >= (ll b) const { bigint c; return *this >= (c = b); }\n    bool operator == (ll b) const { bigint c; return *this == (c = b); }\n    bool operator != (ll b) const { bigint c; return *this != (c = b); }\n    bool operator < (int b) const { bigint c; return *this < (c = b); }\n    bool operator <= (int b) const { bigint c; return *this <= (c = b); }\n    bool operator > (int b) const { bigint c; return *this > (c = b); }\n    bool operator >= (int b) const { bigint c; return *this >= (c = b); }\n    bool operator == (int b) const { bigint c; return *this == (c = b); }\n    bool operator != (int b) const { bigint c; return *this != (c = b); }\n};\nbigint f[500][500];\nbool pan[500][500];\n\nbigint dfs(int len,int st,bool limit){\n\tbigint ret,pp;ret=0;\n\tif(!len){\n\t\tret=1;\n\t\treturn ret;\n\t}\n\tif(!limit&&pan[len][st]) return f[len][st];\n\tint up;\n\tup=limit?num[len]:1;\n\tgo(i,0,up){\n\t\tp[len]=i;\n\t\tint pos=st>>1;\n\t\tif(st==n+1) pp=dfs(len-1,i?len:st,limit&&i==num[len]),ret+=pp;\n\t\telse if(len>pos) pp=dfs(len-1,st,limit&&i==num[len]),ret+=pp;\n\t\telse{\n\t\t\tif(len<=pos&&i!=p[st+1-len]) continue;\n\t\t\tpp=dfs(len-1,st,limit&&i==num[len]),ret+=pp;\n\t\t}\n\t}\n\tf[len][st]=ret,pan[len][st]=1;\n\treturn ret;\n}\n\n\nsigned main(){ \n\t//fin;\n\tbigint m;\n\tm.re_l();\n\tn=0;\n\twhile(m>0){\n\t\tnum[++n]=(m%2).toint();\n\t\tm=(m/2);\n\t}\n\tbigint ans=dfs(n,n+1,1);\n\tans=ans-1; \n\tans.pr();\n\treturn 0;\n}\n```\n",
        "postTime": 1560255183,
        "uid": 109434,
        "name": "\u98ce\u968f\u9010\u5f71",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2235 \u3010[HNOI2002]Kathy\u51fd\u6570\u3011"
    }
]
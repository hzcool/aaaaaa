[
    {
        "content": "\u770b\u4e86\u4e00\u4e0b\u6709100000\u6761\u64cd\u4f5c\n\n\u611f\u89c9\u8fd8\u662f\u8981logn\u7684\u64cd\u4f5c\u901f\u5ea6\u624d\u884c\n\n\u7b2c\u4e00\u53cd\u5e94\u5c31\u60f3\u5230\u4e86map\n\n\u5b58\u5165\u548c\u53d6\u51fa\u90fd\u5341\u5206\u65b9\u4fbf\n\n\u800c\u5bf9\u4e8e\u4e0d\u5b58\u5728\u53c8\u8981\u53d6\u51fa\u957f\u5ea6\u76f8\u8fd1\u7684\n\n\u672c\u4eba\u7684\u65b9\u6cd5\u662f\u5229\u7528map\u7684\u6307\u9488\u64cd\u4f5c\n\n\u5148\u201c\u5047\u88c5\u201d\u5b58\u4e00\u4e0b\u8be5\u4e0d\u5b58\u5728\u7684\u6728\u5934\n\n\u7136\u540e\u6307\u9488\u5b9a\u4f4d\u8be5\u6728\u5934\u7684\u4f4d\u7f6e\n\n\u4e8e\u662fit++\u5c31\u5f97\u5230\u4e86\u6bd4\u5b83\u957f\u7684\u4e0b\u4e00\u6839\u6728\u5934\u7684\u4f4d\u7f6e\n\nit--\u5c31\u5f97\u5230\u4e86\u6bd4\u5b83\u77ed\u7684\u4e0b\u4e00\u6839\u6728\u5934\u7684\u4f4d\u7f6e\n\n\u4e24\u8005\u6bd4\u8f83\u4e00\u4e0b\uff0c\u7136\u540e\u53d6\u51fa\u957f\u5ea6\u76f8\u8fd1\u7684\u5373\u53ef\n\n\u6700\u540e\u8bb0\u5f97erase\u4e4b\u524d\u201c\u5047\u88c5\u201d\u5b58\u7684\u90a3\u6839\u4e0d\u5b58\u5728\u7684\u6728\u5934\n\n\u5e73\u5747\u8017\u65f6100ms\uff0c\u5982\u679c\u5feb\u8bfb\u6216\u8005scanf\u548cprintf\u7684\u8bdd\u4e5f\u8bb8\u4f1a\u66f4\u5feb\n\n~~\u4f46\u662f\u80fd\u8fc7\u4e0d\u5c31\u884c\u4e86\u561b\u54c8\u54c8\u54c8~~\n\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <map>\nusing namespace std;\n\nint main()\n{\n    map<int,int> m;\n    int i,j,n,x,y;\n    cin >> n;\n    for (i=0; i<n; i++) {\n        cin >> x >> y;\n        if (x == 1) {\n            if (m.count(y)) cout << \"Already Exist\" << endl;\n            else m[y] = 1;\n        }\n        else {\n            if(m.empty()) cout << \"Empty\" << endl;\n            else if (m.count(y)) {\n                m.erase(y);\n                cout << y << endl;\n            }\n            else {\n                m[y] = 1; // \u5047\u88c5\u5b58\u4e00\u4e0b\u8be5\u6728\u5934\n                auto it = m.find(y); // \u6307\u9488\u5b9a\u4f4d\n                auto it2 = it;\n                it++; \n                // \u51e0\u79cd\u7279\u5224\n                if (it2 == m.begin()) { // \u6ca1\u6709\u6bd4\u5b83\u77ed\u7684\n                    cout << it->first << endl;\n                    m.erase(it);\n                }\n                else if (it == m.end()) { // \u6ca1\u6709\u6bd4\u5b83\u957f\u7684\n                    cout << (--it2)->first << endl;\n                    m.erase(it2);\n                }\n                // \u957f\u5ea6\u6bd4\u8f83\n                else if (y-(--it2)->first > it->first-y) {\n                    cout << it->first << endl;\n                    m.erase(it);\n                }\n                else {\n                    cout << it2->first << endl;\n                    m.erase(it2);\n                }\n                m.erase(y); // \u5220\u6389\u5047\u88c5\u5b58\u7684\u6728\u5934\n            }\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1584332099,
        "uid": 296830,
        "name": "YuJieSong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5250 \u3010\u3010\u6df1\u57fa17.\u4f8b5\u3011\u6728\u6750\u4ed3\u5e93\u3011"
    },
    {
        "content": "\u5728[\u535a\u5ba2](https://yjh965.github.io/post/mu-cai-cang-ku-ti-jie/)\u98df\u7528\u66f4\u4f73\u3002\n\n\u6211\u770b\u4e86\u4e00\u4e0b\u9898\u89e3\u533a\uff0c\u5927\u591a\u6570\u4eba\u7528\u7684\u90fd\u662f `map` \u548c `vector`\uff0c\u8fd8\u6709\u4e00\u4e2a\u7528\u5e73\u8861\u6811\u505a\u7684\uff0c\u6ca1\u6709\u4eba\u7528 `set`\uff0c\u6211\u5c31\u5199\u4e86\u8fd9\u7bc7\u9898\u89e3\u3002\n\n# \u601d\u8def\n\n## \u4e3a\u4ec0\u4e48\u8981\u7528 set\uff1f\n\u6211\u771f\u7684\u641e\u4e0d\u61c2\u4e3a\u5565\u6ca1\u6709\u4eba\u7528 `set`\uff0c\u9898\u76ee\u91cc\u7684\u8fd9\u53e5\u8bdd\u5c31\u8ba9\u6211\u7b2c\u4e00\u65f6\u95f4\u60f3\u5230\u4e86 `set`\uff1a\n\n\u5982\u679c\u5df2\u7ecf\u6709\u76f8\u540c\u957f\u5ea6\u7684\u6728\u6750\u90a3\u4e48\u8f93\u51fa `Already Exist`\u3002\n\n\n## \u6211\u4eec\u8981\u7528\u5230\u7684\u51fd\u6570\n\u6211\u89c9\u5f97\u8fd9\u9053\u9898\u7528 `set` \u771f\u662f\u518d\u5408\u9002\u4e0d\u8fc7\u4e86\u3002\n\n`set` \u91cc\u9762\u7684 `insert(x)` \u51fd\u6570\u5176\u5b9e\u662f\u6709\u8fd4\u56de\u503c\u7684\uff0c\u4f1a\u8fd4\u56de\u4e00\u4e2a\u8fd9\u6837\u7684\u5947\u602a\u7684\u4e1c\u897f\uff1a`pair<set<int>::iterator,bool>`\u3002\n\n\u8fd4\u56de\u7684\u8fd9\u4e2a `pair` \u5230\u5e95\u662f\u4ec0\u4e48\u610f\u601d\u5462\uff1f\n\n\u8fd9\u4e2a `pair` \u7684\u7b2c\u4e8c\u9879\u662f\u4e00\u4e2a `bool` \u7c7b\u578b\u7684\u4e1c\u897f\uff0c\u4ee3\u8868\u63d2\u5165\u662f\u5426\u6210\u529f\u3002\uff08\u610f\u601d\u5c31\u662f\u53ea\u6709\u96c6\u5408\u91cc\u6ca1\u6709 `x` \u7684\u65f6\u5019\u624d\u80fd\u63d2\u5165\u6210\u529f\uff09\uff0c\u7b2c\u4e00\u9879\u662f\u4e00\u4e2a\u8fed\u4ee3\u5668\uff0c\u5982\u679c\u63d2\u5165\u6210\u529f\u7684\u8bdd\uff0c\u5b83\u4f1a\u8fd4\u56de `x` \u5728\u96c6\u5408\u91cc\u7684\u4f4d\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\uff1a\n```cpp\nset<int> s;\nset<int>::iterator p = s.insert(x).first;\n```\n\u4ee5\u540e\u7528 `*p` \u5c31\u53ef\u4ee5\u5f97\u5230 `x` \u5566\uff01\n\n\u68c0\u6d4b\u662f\u5426\u6709\u76f8\u540c\u957f\u5ea6\u7684\u6728\u6750\uff1a\n\n`if (!s.insert(t).second) cout << \"Already Exist\\n\";`\n\n\u4e00\u884c\u76f4\u63a5\u89e3\u51b3\u95ee\u9898\uff01~~STL\u5927\u6cd5\u597d~~\n\n\u8fd9\u662f\u5565\u610f\u601d\u5462\uff1f\u5982\u679c\u6709\u76f8\u540c\u957f\u5ea6\u7684\u6728\u6750\uff0c\u63d2\u5165\u5c31\u4f1a\u5931\u8d25\uff0c`pair` \u7684\u7b2c\u4e8c\u9879\u5c31\u4f1a\u8fd4\u56de `false`\uff0c\u5982\u679c\u6ca1\u6709\uff0c`!s.insert(t).second` \u8fd9\u4e2a\u8bed\u53e5\u5c31\u76f4\u63a5\u5b9e\u73b0\u4e86\u63d2\u5165\u7684\u76ee\u7684\uff0c\u8fd9\u5c31\u662f\u6211\u8bf4 `set` \u66f4\u65b9\u4fbf\u7684\u539f\u56e0\u3002\n\n`set.empty()` \u53ef\u4ee5\u76f4\u63a5\u8fd4\u56de\u96c6\u5408\u662f\u5426\u4e3a\u7a7a\u3002\n\n\u867d\u7136 `set` \u4e5f\u6709 `lower_bound()` \u548c `upper_bound()`\uff0c\u4f46\u662f\uff0c\n\n`set.lower_bound(x)` \u662f\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e `x` \u7684\u4f4d\u7f6e\uff0c\n\n\u800c `set.upper_bound(x)` \u662f\u8fd4\u56de\u7b2c\u4e00\u4e2a\u5927\u4e8e `x` \u7684\u4f4d\u7f6e\uff0c\n\n`set.find(x)` \u4f1a\u8fd4\u56de\u7b2c\u4e00\u4e2a `x` \u7684\u4f4d\u7f6e\u3002\u5982\u679c\u6ca1\u6709 `x`\uff0c\u5219\u4f1a\u8fd4\u56de `set.end()`\u3002\n\n`set.erase(iterator)`\uff0c\u5220\u9664\u5b9a\u4f4d\u5668 `iterator` \u6307\u5411\u7684\u503c\n\n`set.erase(first,second)`\uff0c\u5220\u9664\u5b9a\u4f4d\u5668 `first` \u548c `second` \u4e4b\u95f4\u7684\u503c\n\n`set.erase(key_value)`\uff0c\u5220\u9664\u952e\u503c `key_value` \u7684\u503c\n\n\u7ed3\u5408\u521a\u521a\u8bb2\u7684\u8fd9\u4e9b\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u4ee3\u7801\u7684\u7b2c\u4e8c\u90e8\u5206\u2014\u2014\u51fa\u8d27\u3002\uff08`s` \u5df2\u7ecf\u88ab\u5b9a\u4e49\u4e3a `set<int>`\uff09\n\n```cpp\nif (s.find(t) != s.end()) cout << t, s.erase(s.find(t)); // \u627e\u5f97\u5230\nelse { // \u627e\u4e0d\u5230\n\tlwb = l2 = l3 = s.lower_bound(t);\n\tif (lwb == s.begin()) cout << *lwb, s.erase(lwb); // \u7279\u6b8a\u60c5\u51b51\uff0c\u5982\u679c\u5728\u6700\u5f00\u59cb\n\telse if (lwb == s.end()) cout << *(-- l3), s.erase(l3); // \u7279\u6b8a\u60c5\u51b52\uff0c\u5982\u679c\u5728\u672b\u5c3e\n\telse if (*lwb - t < t - *(-- l2)) cout << *(l3), s.erase(l3); // \u9009\u6bd4\u8f83\u957f\u7684\n\telse cout << *(-- l3), s.erase(l3); // \u9009\u6bd4\u8f83\u77ed\u7684\n}\ncout << endl;\n```\n\u90a3\u4e48\u591a\u65b9\u4fbf\u7684\u51fd\u6570\uff0c\u679c\u7136\u8fd8\u662f STL \u5927\u6cd5\u597d\u554a\uff01\u8fd8\u4e0d\u5feb\u53bb\u7528\u8d77\u6765\uff1f\n# \u4ee3\u7801\n```cpp\n#include <iostream>\n#include <set> \n\nusing namespace std;\n\nint n, op, t;\nset<int>::iterator lwb, l2, l3;\nset<int> s;\nint main(){\n\tcin >> n;\n\tfor (int i = 1;i <= n;i ++){\n\t\tcin >> op >> t;\n\t\tif (op == 1){\n\t\t\tif (!s.insert(t).second) cout << \"Already Exist\\n\";\n\t\t}\n\t\telse {\n\t\t\tif (s.empty()){\n\t\t\t\tcout << \"Empty\\n\";\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (s.find(t) != s.end()) cout << t, s.erase(s.find(t));\n\t\t\telse {\n\t\t\t\tlwb = l2 = l3 = s.lower_bound(t);\n\t\t\t\tif (lwb == s.begin()) cout << *lwb, s.erase(lwb);\n\t\t\t\telse if (lwb == s.end()) cout << *(-- l3), s.erase(l3);\n\t\t\t\telse if (*lwb - t < t - *(-- l2)) cout << *(l3), s.erase(l3);\n\t\t\t\telse cout << *(-- l3), s.erase(l3);\n\t\t\t}\n\t\t\tcout << endl;\n\t\t}\n\t}\n}\n```\n32 \u884c\u76f4\u63a5\u641e\u5b9a\uff0c\u5927\u6982\u662f\u6700\u77ed\u7684\u4ee3\u7801\u4e86\u3002\n\n\u672c\u6587\u90e8\u5206\u5185\u5bb9\u9009\u81ea[C++\u4e2dset\u7528\u6cd5\u8be6\u89e3](https://blog.csdn.net/byn12345/article/details/79523516)\uff0c\u4f5c\u8005[byn12345](https://blog.csdn.net/byn12345)\uff0c\u5982\u679c\u60f3\u4e86\u89e3 `set` \u7684\u66f4\u591a\u4f7f\u7528\u65b9\u6cd5\uff0c\u8fd9\u7bc7\u6587\u7ae0\u503c\u5f97\u4e00\u770b\u3002",
        "postTime": 1627648400,
        "uid": 477443,
        "name": "YuJiahe",
        "ccfLevel": 7,
        "title": "\u6728\u6750\u4ed3\u5e93 \u9898\u89e3"
    },
    {
        "content": "\u53c8\u662f\u50a8\u5b58\u6570\u636e\u7684\u9898\u76ee\uff0c\u6211\u4eec\u6765\u7528$vector$\u50a8\u5b58\u6570\u636e\u3002\u7531\u9898\u53ef\u77e5\uff0c\u5171\u6709\u4e24\u79cd\u5904\u7406\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u6765\u9010\u4e00\u5206\u6790\u3002\uff08\u4e0b\u9762\u5747\u8bbe\u4e00\u7ec4\u6570\u636e\u7684\u4e24\u4e2a\u6570\u5206\u522b\u4e3a$x$,$y$\uff09 \n\n**$x = 1$\uff1a\u653e\u5165\u6728\u6750**   \n\u5148\u8981\u5224\u65ad\u957f\u5ea6\u662f\u5426\u6709\u91cd\u590d\uff0c\u82e5\u65e0\u91cd\u590d\uff0c\u518d\u5b58\u5165\u6570\u636e\u3002\n```\nif(x == 1)\n{\n\tbool ok = 0;\n\tfor(int i = 0;i < s.size();i++)\n\t{\n\t\tif(s[i] == y)//\u91cd\u590d\u60c5\u51b5 \n\t\t{\n\t\t\tcout<<\"Already Exist\"<<endl;\n\t\t\tok = 1;\n\t\t\tbreak;\n\t\t}\n\t}\t\n\tif(!ok) s.push_back(y);//\u6ca1\u6709\u91cd\u590d\uff0c\u5c31\u5b58\u5165\u8be5\u957f\u5ea6 \n}\n```\n**$x = 2$\uff1a\u53d6\u51fa\u6728\u6750**     \n\u9996\u5148\u5224\u65ad\u5e93\u4e2d\u6709\u65e0\u6728\u6750\uff0c\u82e5\u6709\uff0c\u6211\u4eec\u9700\u8981\u53d6\u4e00\u4e2a\u6700\u4f18\u7684\u7b54\u6848\uff0c\u6ee1\u8db3\u6700\u63a5\u8fd1$y$\u4e14\u957f\u5ea6\u8f83\u77ed\u7684\u6728\u6750\u3002\u90a3\u4e48\u5982\u4f55\u5b9e\u73b0\uff1f  \n\u5faa\u73af\u5e93\u4e2d\u7684\u6240\u6709\u6728\u6750\uff0c\u4e0d\u505c\u5730\u627e\u51fa\u4e0e$y$\u6700\u76f8\u8fd1\u7684\u4e00\u6839\u6728\u6750\uff0c\u82e5\u6709\u591a\u4e2a\u6700\u4f18\u89e3\uff0c\u6211\u4eec\u5c31\u4fdd\u5b58\u6700\u77ed\u7684\u90a3\u6839\u5c31\u884c\u3002\u6700\u540e\u53d6\u51fa\u8be5\u8ddf\u6728\u6750\uff08**\u8bb0\u5f97\u53d6\u51fa\uff0c\u522b\u5fd8\u4e86\uff01**\uff09 \n```\nif(s.size() == 0) cout<<\"Empty\"<<endl;//\u6ca1\u6709\u5e93\u5b58 \nelse\n{\n\tint w = 0x7f7f7f7f,num,t;\n\tfor(int i = 0;i < s.size();i++)\n\t{\n\t\tif(abs(y - s[i]) < w) w = abs(y - s[i]),num = s[i],t = i;//\u6700\u63a5\u8fd1\u7684\u7b54\u6848 \n\t\tif(abs(y - s[i]) == w && s[i] < num) num = s[i],t = i;//\u8f83\u77ed\u7684\u6728\u6750 \n\t}\n\ts.erase(s.begin() + t);//\u53d6\u51fa\u6700\u4f18\u89e3\u7684\u6728\u6750 \n\tcout<<num<<endl;\n}\n```\n------\n**\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a**\n```\n#include <iostream>\n#include <vector>\n#include <cmath>\nusing namespace std;\nvector <int> s;//vector\u6765\u50a8\u5b58 \nint main()\n{\n\tint n;\n\tcin>>n;\n\twhile(n--)\n\t{\n\t\tint x,y;\n\t\tcin>>x>>y;\n\t\tif(x == 1)\n\t\t{\n\t\t\tbool ok = 0;\n\t\t\tfor(int i = 0;i < s.size();i++)\n\t\t\t{\n\t\t\t\tif(s[i] == y)//\u91cd\u590d\u60c5\u51b5 \n\t\t\t\t{\n\t\t\t\t\tcout<<\"Already Exist\"<<endl;\n\t\t\t\t\tok = 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!ok) s.push_back(y);//\u6ca1\u6709\u91cd\u590d\uff0c\u5c31\u5b58\u5165\u8be5\u957f\u5ea6 \n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(s.size() == 0) cout<<\"Empty\"<<endl;//\u6ca1\u6709\u5e93\u5b58 \n\t\t\telse\n\t\t\t{\n\t\t\t\tint w = 0x7f7f7f7f,num,t;\n\t\t\t\tfor(int i = 0;i < s.size();i++)\n\t\t\t\t{\n\t\t\t\t\tif(abs(y - s[i]) < w) w = abs(y - s[i]),num = s[i],t = i;//\u6700\u63a5\u8fd1\u7684\u7b54\u6848 \n\t\t\t\t\tif(abs(y - s[i]) == w && s[i] < num) num = s[i],t = i;//\u8f83\u77ed\u7684\u6728\u6750 \n\t\t\t\t}\n\t\t\t\ts.erase(s.begin() + t);//\u53d6\u51fa\u6700\u4f18\u89e3\u7684\u6728\u6750 \n\t\t\t\tcout<<num<<endl;\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n} \n```",
        "postTime": 1584277537,
        "uid": 183603,
        "name": "SUNCHAOYI",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5250 \u3010\u3010\u6df1\u57fa17.\u4f8b5\u3011\u6728\u6750\u4ed3\u5e93\u3011"
    },
    {
        "content": "\u8fd9\u9053\u6c34\u9898\u53ef\u4ee5\u7528vector\u8fc7\uff0c\u4f46\u662f\u5f53\u4f5c\u4e00\u9053\u5e73\u8861\u6811\u7684\u7ec3\u624b\u9898\u4e5f\u662f\u5f88\u4e0d\u9519\u7684\n\n\u5e73\u8861\u6811\u4e0d\u77e5\u9053\u7684\u53f3\u8f6c[P3369 \u3010\u6a21\u677f\u3011\u666e\u901a\u5e73\u8861\u6811](https://www.luogu.com.cn/problem/P3369)\n\n\u5bf9\u4e8e1\u64cd\u4f5c\uff0c\u5219\u5411\u6811\u4e2d\u63d2\u5165x\uff0c\u6ce8\u610f\u4e0eP3369\u4e0d\u540c\u7684\u4e00\u70b9\u662f\u5982\u679c\u6709\u91cd\u590d\u7684\u5c31\u4e0d\u518d\u91cd\u590d\u63d2\u5165\u3002\n\n\u5bf9\u4e8e2\u64cd\u4f5c\uff0c\u5148\u5728\u6811\u4e2d\u67e5\u8be2x \u5982\u679c\u627e\u5230\u5219\u76f4\u63a5\u8f93\u51fa\u5e76\u4e14\u5220\u9664x\uff0c\u5426\u5219\u67e5\u8be2\u524d\u9a71\u540e\u7ee7\uff0c\u53d6\u5dee\u7684\u7edd\u5bf9\u503c\u5c0f\u7684\u8f93\u51fa\u5e76\u5220\u9664\u3002\u5177\u4f53\u5b9e\u73b0\u89c1\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct tree{\n\tint val,pri,lson,rson,fa,cnt,size;\n\t#define v(x) a[x].val\n\t#define p(x) a[x].pri\n\t#define l(x) a[x].lson\n\t#define r(x) a[x].rson\n\t#define fa(x) a[x].fa\n\t#define c(x) a[x].cnt\n\t#define s(x) a[x].size\n}a[100010];\nint cnt,root;\nvoid upt(int k)\n{\n\ts(k)=s(l(k))+s(r(k))+c(k);\n}\nvoid zig(int &k)\n{\n\tint y=l(k);\n\tl(k)=r(y);\n\tr(y)=k;\n\ts(y)=s(k);\n\tupt(k);\n\tk=y;\n}\nvoid zag(int &k)\n{\n\tint y=r(k);\n\tr(k)=l(y);\n\tl(y)=k;\n\ts(y)=s(k);\n\tupt(k);\n\tk=y;\n}\nvoid insert(int &x,int key)\n{\n\tif(!x){\n\t\tx=++cnt;\n\t\tv(x)=key;\n\t\tp(x)=rand();\n\t\tc(x)=s(x)=1;\n\t\treturn;\n\t}\n\tif(key==v(x)){\n\t\tprintf(\"Already Exist\\n\");\n\t\treturn;\n\t}\n\ts(x)++;\n\tif(key<v(x)){\n\t\tinsert(l(x),key);\n\t\tif(p(l(x))<p(x))zig(x);\n\t}\n\telse{\n\t\tinsert(r(x),key);\n\t\tif(p(r(x))<p(x))zag(x);\n\t}\n}\nvoid Delete(int &x,int key)\n{\n\tif(v(x)==key){\n\t\tif(c(x)>1){\n\t\t\tc(x)--;s(x)--;\n\t\t}\n\t\telse if(!l(x)||!r(x)){\n\t\t\tx=l(x)+r(x);\n\t\t}\n\t\telse if(p(l(x))<p(r(x))){\n\t\t\tzig(x);Delete(x,key);\n\t\t}\n\t\telse{\n\t\t\tzag(x);Delete(x,key);\n\t\t}\n\t\treturn;\n\t}\n\ts(x)--;\n\tif(key<v(x))Delete(l(x),key);\n\telse Delete(r(x),key);\n}\nint queryk(int key)\n{\n\tint res=0,x=root;\n\twhile(x){\n\t\tif(key==v(x))return res+s(l(x))+1;\n\t\tif(key<v(x)){\n\t\t\tx=l(x);\n\t\t}\n\t\telse{\n\t\t\tres+=s(l(x))+c(x);x=r(x);\n\t\t}\n\t}\n}\nint querykth(int k)\n{\n\tint x=root;\n\twhile(x){\n\t\tif(s(l(x))<k&&s(l(x))+c(x)>=k)return v(x);\n\t\telse if(s(l(x))>=k)x=l(x);\n\t\telse{\n\t\t\tk-=s(l(x))+c(x);\n\t\t\tx=r(x);\n\t\t}\n\t}\n}\nint querypre(int key)\n{\n\tint x=root,res=-0x7fffffff;\n\twhile(x){\n\t\tif(v(x)<key){\n\t\t\tres=v(x);x=r(x);\n\t\t}\n\t\telse x=l(x);\n\t}\n\treturn res;\n}\nint querypost(int key)\n{\n\tint x=root,res=-0x7fffffff;\n\twhile(x){\n\t\tif(v(x)>key){\n\t\t\tres=v(x);x=l(x);\n\t\t}\n\t\telse x=r(x);\n\t}\n\treturn res;\n}\nint find(int key)\n{\n\tint x=root;\n\twhile(x)\n\t{\n\t\tif(v(x)==key)return v(x);\n\t\telse if(v(x)<key)x=r(x);\n\t\telse x=l(x);\n\t}\n\treturn 0;\n}\nint main()\n{\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint type,x;\n\t\tscanf(\"%d %d\",&type,&x);\n\t\tif(type==1){\n\t\t\tinsert(root,x);\n\t\t}\n\t\tif(type==2){\n\t\t\tint ans=find(x);\n\t\t\tif(ans){//\u627e\u5230\u5219\u76f4\u63a5\u8f93\u51fa\n\t\t\t\tcout<<ans<<endl;Delete(root,ans);continue;\n\t\t\t}\n\t\t\tint l=querypre(x),r=querypost(x);//\u67e5\u8be2\u524d\u9a71\u540e\u7ee7\n\t\t\tif(l!=-2147483647&&(x-l<=r-x||r==-2147483647)){\n\t\t\t\tDelete(root,l);printf(\"%d\\n\",l);\n\t\t\t}\n\t\t\telse if(r!=-2147483647){\n\t\t\t\tDelete(root,r);printf(\"%d\\n\",r);\n\t\t\t}\n\t\t\telse{//\u65e0\u524d\u9a71\u4e14\u65e0\u540e\u7ee7\u5219\u8bf4\u660e\u4ed3\u5e93\u5df2\u7a7a\uff0c\u76f4\u63a5\u8f93\u51faEmpty\n\t\t\t\tprintf(\"Empty\\n\");\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1584332954,
        "uid": 228843,
        "name": "wangjinbo",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5250 \u3010\u3010\u6df1\u57fa17.\u4f8b5\u3011\u6728\u6750\u4ed3\u5e93\u3011"
    },
    {
        "content": "\u5176\u5b9e\uff0c\u8fd9\u9053\u9898\u53ef\u4ee5\u7528\u5e73\u8861\u6811\u505a\u3002\uff08\u6211\u662f\u7528\u7684\u65e0\u65cb Treap\uff09\n\n\u8fd9\u68f5\u5e73\u8861\u6811\u9700\u8981\u652f\u6301\u8fd9\u4e9b\u64cd\u4f5c\uff1a\n\n1. \u63d2\u5165\u4e00\u4e2a\u6570\n\n2. \u5220\u9664\u4e00\u4e2a\u6570\n\n3. \u67e5\u627e\u4e00\u4e2a\u6570\u7684\u524d\u9a71\uff08\u524d\u9a71\u5b9a\u4e49\u4e3a\u4e0d\u5927\u4e8e\u8fd9\u4e2a\u6570\u7684\u6570\uff09\n\n4. \u67e5\u627e\u4e00\u4e2a\u6570\u7684\u540e\u7ee7\uff08\u540e\u7ee7\u5b9a\u4e49\u4e3a\u4e0d\u5c0f\u4e8e\u8fd9\u4e2a\u6570\u7684\u6570\uff09\n\n\u6211\u4eec\u518d\u6765\u5206\u6790\u4e00\u4e0b\u9898\u76ee\uff1a\n\n\u5bf9\u4e8e\u8fdb\u8d27\u64cd\u4f5c\uff0c\n\n\u6211\u4eec\u9996\u5148\u8981\u67e5\u627e\u8fd9\u4e2a\u6570 $x$ \u7684\u524d\u9a71\u662f\u5426\u7b49\u4e8e $x$ \uff0c\u5982\u679c\u7b49\u4e8e\uff0c\u5219\u8f93\u51fa `Already Exist` \uff0c\u63d2\u5165\u64cd\u4f5c\u53d6\u6d88\u3002\u5982\u679c\u4e0d\u7b49\u4e8e\uff0c\u5219\u63d2\u5165 $x$ \u3002\n\n\u5bf9\u4e8e\u51fa\u8d27\u64cd\u4f5c\uff0c\n\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u53d8\u91cf $Alive$ , \u8bb0\u5f55\u6811\u4e2d\u8fd8\u5269\u7684\u7ed3\u70b9\u6570\u3002\u5982\u679c $Alive=0$ \uff0c\u5219\u8f93\u51fa `Empty` \uff0c\u5220\u9664\u64cd\u4f5c\u53d6\u6d88\u3002\u5982\u679c $Alive \u2260 0$ , \u5219\u5148\u628a $Alive$ \u51cf\u53bb 1 \uff0c\u7136\u540e\u901a\u8fc7\u6bd4\u8f83\u8fd9\u4e2a\u6570\u7684\u524d\u9a71\u548c\u540e\u7ee7\u6765\u51b3\u5b9a\u5220\u9664\u54ea\u4e2a\u6570\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nstruct Node\n{\n\tint val,key;\n\tint l,r;\n\tint size;\n};\nNode k[100001];\nint n,root,Index;\n\ninline void update(int x)//\u8ba1\u7b97\u5b50\u6811\u5927\u5c0f \n{\n\tk[x].size=k[k[x].l].size+k[k[x].r].size+1;\n}\n\ninline int newnode(int cnt)//\u65b0\u5efa\u7ed3\u70b9 \n{\n\t++Index;\n\tk[Index].val=cnt;\n\tk[Index].key=rand();\n\tk[Index].size=1;\n\treturn Index;\n}\n\nvoid spilt(int now,int cnt,int &x,int &y)//\u5206\u88c2 \n{\n\tif(!now) x=y=0;\n\telse\n\t{\n\t\tif(k[now].val<=cnt)\n\t\t{\n\t\t\tx=now;\n\t\t\tspilt(k[now].r,cnt,k[now].r,y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ty=now;\n\t\t\tspilt(k[now].l,cnt,x,k[now].l);\n\t\t}\n\t\tupdate(now);\n\t}\n}\n\nint merge(int x,int y)//\u5408\u5e76 \n{\n\tif(!x || !y) return x+y;\n\telse\n\t{\n\t\tif(k[x].key>k[y].key)\n\t\t{\n\t\t\tk[x].r=merge(k[x].r,y);\n\t\t\tupdate(x);\n\t\t\treturn x;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tk[y].l=merge(x,k[y].l);\n\t\t\tupdate(y);\n\t\t\treturn y;\n\t\t}\n\t}\n}\n\nvoid Insert(int x)//\u63d2\u5165 \n{\n\tint a,b;\n\tspilt(root,k[x].val,a,b);\n\troot=merge(merge(a,x),b);\n}\n\nvoid Delete(int x)//\u5220\u9664 \n{\n\tint a,b,c;\n\tspilt(root,x,a,c);\n\tspilt(a,x-1,a,b);\n\tb=merge(k[b].l,k[b].r);\n\troot=merge(merge(a,b),c);\n}\n\nvoid pre(int x,int &y)//x\u7684\u524d\u9a71\n{\n\tint a,b,now;\n\tspilt(root,x,a,b);\n\tnow=a;\n\twhile(k[now].r)\n\t\tnow=k[now].r;\n\ty=now;\n\troot=merge(a,b);\n}\n\nvoid nxt(int x,int &y)//x\u7684\u540e\u7ee7 \n{\n\tint a,b,now;\n\tspilt(root,x-1,a,b);\n\tnow=b;\n\twhile(k[now].l)\n\t\tnow=k[now].l;\n\ty=now;\n\troot=merge(a,b);\n}\n\nint main()\n{\n\tint Alive=0;\n\tscanf(\"%d\",&n);\n\tfor(register int i=1;i<=n;++i)\n\t{\n\t\tint typ,a;\n\t\tscanf(\"%d%d\",&typ,&a);\n\t\tif(typ==1)//\u8fdb\u8d27\u64cd\u4f5c \n\t\t{\n\t\t\tint b;\n\t\t\tpre(a,b);\n\t\t\tif(a==k[b].val) printf(\"Already Exist\\n\");//\u5982\u679c\u6811\u4e2d\u5df2\u7ecf\u6709\u8fd9\u4e2a\u6570\u4e86 \n\t\t\telse//\u5982\u679c\u6811\u4e2d\u8fd8\u6ca1\u6709\u8fd9\u4e2a\u6570 \n\t\t\t{\n\t\t\t\tInsert(newnode(a));//\u90a3\u4e48\u63d2\u5165\u8fd9\u4e2a\u6570 \n\t\t\t\t++Alive;//\u6811\u4e2d\u7ed3\u70b9\u6570 +1 \n\t\t\t}\n\t\t}\n\t\tif(typ==2)//\u51fa\u8d27\u64cd\u4f5c \n\t\t{\n\t\t\tint b,c;\n\t\t\tif(!Alive) printf(\"Empty\\n\");//\u5982\u679c\u6811\u4e3a\u7a7a \n\t\t\telse//\u5982\u679c\u6811\u4e0d\u4e3a\u7a7a \n\t\t\t{\n\t\t\t\tint Ans;//\u8981\u5220\u9664\u7684\u6570 \n\t\t\t\tpre(a,b);\n\t\t\t\tnxt(a,c);\n\t\t\t\tif(!b || !c)//\u5982\u679c\u4e00\u4e2a\u6570\u6ca1\u6709\u524d\u9a71\u6216\u8005\u6ca1\u6709\u540e\u7ee7 \n\t\t\t\t{\n\t\t\t\t\tif(!b) Ans=k[c].val;//\u5982\u679c\u6ca1\u6709\u524d\u9a71\uff0c\u5220\u9664\u540e\u7ee7 \n\t\t\t\t\telse Ans=k[b].val;//\u5982\u679c\u6ca1\u6709\u540e\u7ee7\uff0c\u5220\u9664\u524d\u9a71 \n\t\t\t\t}\n\t\t\t\telse//\u5982\u679c\u4e00\u4e2a\u6570\u524d\u9a71\u548c\u540e\u7ee7\u90fd\u6709\u4e86 \n\t\t\t\t{\n\t\t\t\t\tif(a-k[b].val<=k[c].val-a) Ans=k[b].val;\n\t\t\t\t\telse Ans=k[c].val;//\u6bd4\u8f83\u524d\u9a71\u548c\u540e\u7ee7\u4e0e\u8fd9\u4e2a\u6570\u7684\u8ddd\u79bb \n\t\t\t\t}\n\t\t\t\tprintf(\"%d\\n\",Ans);\n\t\t\t\tDelete(Ans);//\u5220\u9664\u8fd9\u4e2a\u6570 \n\t\t\t\t--Alive;//\u6811\u4e2d\u7ed3\u70b9\u6570 -1  \n\t\t\t}\n\t\t}\n\t}\n    return 0;\n}\n\n```\n",
        "postTime": 1584318810,
        "uid": 148913,
        "name": "Graphcity",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P5250 \u3010\u3010\u6df1\u57fa17.\u4f8b5\u3011\u6728\u6750\u4ed3\u5e93\u3011"
    }
]
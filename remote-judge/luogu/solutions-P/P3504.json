[
    {
        "content": "**\u672c\u9898\u8981\u4e48\u7528```int```\u5224\u53c9\u79ef\u5927\u5c0f\uff0c\u8981\u4e48\u4e56\u4e56\u5f00```long double```\uff0c```double```\u7cbe\u5ea6\u4e0d\u591f**\u3002\n\n\u5361\u4e86\u6211\u5927\u534a\u4e2a\u6708\u554a\u3002\n\n\u9996\u5148\uff0c\u5982\u679c\u6ca1\u6709\u7f8a\u7684\u9650\u5236\uff0c\u90a3\u4e48DP\u662f\u5f88\u597d\u60f3\u7684\uff0c\u5c31\u662f\u4e00\u4e2a\u591a\u8fb9\u5f62\u4e09\u89d2\u5256\u5206\u95ee\u9898\u3002\u8bbe $f[i,j]$ \u8868\u793a\u533a\u95f4 $[i,j]$ \u7684\u5256\u5206\u6570\u91cf\uff0c\u5219\u6709\n\n$$f[i,j]=\\begin{cases}1&(j-i\\leq 1,\\text{\u72b6\u6001\u5408\u6cd5})\\\\\\sum\\limits_{k=i+1}^{j-1}f[i,k]f[k,j]&(j-i>l,\\text{\u72b6\u6001\u5408\u6cd5})\\\\0&(\\text{\u72b6\u6001\u4e0d\u5408\u6cd5})\\end{cases}$$\n\n\u4e0b\u9762\u5c31\u8003\u8651\u4e00\u4e0b\u54ea\u4e9b\u662f\u5408\u6cd5\u72b6\u6001\u3002\u8fd9\u4e2a\u5c31\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e $i$\uff0c\u7136\u540e\u5c06\u5176\u5b83\u6240\u6709\u9876\u70b9\u548c\u7f8a\u4ee5 $i$ \u4e3a\u539f\u70b9\u8fdb\u884c\u6781\u89d2\u6392\u5e8f\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u770b\u4e24\u4e2a\u9876\u70b9\u95f4\u6709\u591a\u5c11\u53ea\u7f8a\uff08\u5373\u5224\u65ad\u72b6\u6001\u662f\u5426\u5408\u6cd5\u4e86\uff09\u3002\n\n\u8fd9\u91cc\u6211\u6709\u70b9\u540e\u6094\u4f7f\u7528\u4e86```atan2```\u51fd\u6570\uff0c\u56e0\u4e3a\u5750\u6807\u8303\u56f4\u5f88\u5927\uff0c\u5982\u679c\u8fd9\u6837\u6392\u5e8f\u5c31\u9700\u8981\u5f88\u5927\u7684\u7cbe\u5ea6\uff0c\u6700\u7ec8\u628a```eps```\u662f\u8bbe\u6210\u4e86```1e-20```\u624d\u8fc7\u3002\u5e76\u4e14\uff0c\u6211\u5728\u6392\u5e8f\u7684\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u4e86```fmod```\u51fd\u6570\uff0c\u672c\u610f\u662f\u628a\u6240\u6709\u70b9\u6620\u5c04\u5230 $[0,\\pi)$ \u8303\u56f4\u4e2d\uff0c\u5374\u6ca1\u60f3\u5230```fmod```\u51fd\u6570\u7684\u7ed3\u679c\u53ef\u80fd\u4e3a\u8d1f\uff08\u8fd9\u4e00\u70b9\u548c```%```\u7b26\u53f7\u4e00\u6a21\u4e00\u6837\uff09\u7136\u540e\u5c31\u6302\u6389\u4e86\u3002\u6700\u540e\u4e0d\u5f97\u4e0d\u624b\u5199\u4e86```fmod```\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define double long double\nconst double pi=acos(-1);\nconst double eps=1e-20;\nint n,m,mod,f[610][610];\nstruct Vector{\n\tint x,y;\n\tVector(int X=0,int Y=0){x=X,y=Y;}\n\tfriend Vector operator +(const Vector &u,const Vector &v){return Vector(u.x+v.x,u.y+v.y);}\n\tfriend Vector operator -(const Vector &u,const Vector &v){return Vector(u.x-v.x,u.y-v.y);}\n\tfriend Vector operator *(const Vector &u,const int &v){return Vector(u.x*v,u.y*v);}\n\tfriend Vector operator /(const Vector &u,const int &v){return Vector(u.x/v,u.y/v);}\n\tfriend int operator &(const Vector &u,const Vector &v){return u.x*v.y-u.y*v.x;}//cross times\n\tfriend int operator |(const Vector &u,const Vector &v){return u.x*v.x+u.y*v.y;}//point times\n\tdouble operator ~()const{return atan2(y,x);}\n\tvoid read(){scanf(\"%d%d\",&x,&y);}\n\tvoid print(){printf(\"(%d,%d)\",x,y);}\n}p[610],q[20100];\ndouble r[20100];\nbool bad[610][610];\nint dfs(int l,int r){\n\tif(r-l<=2)return 1;\n\tif(f[l][r]!=-1)return f[l][r];\n\tf[l][r]=0;\n\tfor(int i=l+1;i<=r-1;i++)if(!bad[l][i]&&!bad[i][r])(f[l][r]+=1ll*dfs(l,i)*dfs(i,r)%mod)%=mod;\n\treturn f[l][r];\n}\ndouble FMOD(double x){\n\tif(x<0)x+=2*pi;\n\tif(x>=2*pi)x-=2*pi;\n\treturn x;\n}\nint main(){\n\tscanf(\"%d%d%d\",&n,&m,&mod),memset(f,-1,sizeof(f));\n\tfor(int i=1;i<=n;i++)p[n-i].read();\n\tfor(int i=0;i<m;i++)q[i].read();\n\tfor(int i=0;i+1<n;i++){\n\t\tdouble theta=~(p[i+1]-p[i])-eps;\n\t\tfor(int j=0;j<m;j++)r[j]=FMOD(~(q[j]-p[i])-theta);\n\t\tsort(r,r+m);\n//\t\tfor(int j=0;j<m;j++)printf(\"%.20Lf \",r[j]);puts(\"\");\n\t\tfor(int j=i+1,k=0;j<n;j++){\n\t\t\tdouble now=FMOD(~(p[j]-p[i])-theta);\n\t\t\twhile(k<m&&now>r[k])k++;\n//\t\t\tprintf(\"%d %d:%d\\n\",i,j,k);\n//\t\t\tprintf(\"%.20Lf\\n\",now);\n\t\t\tif((k&1)||(k<m&&fabs(now-r[k])<eps)||(k&&fabs(now-r[k-1])<eps))bad[i][j]=true;\n\t\t}\n\t}\n//\tfor(int i=0;i<n;i++)for(int j=i+1;j<n;j++)printf(\"[%d,%d]:%d\\n\",i,j,bad[i][j]);\n\tprintf(\"%d\\n\",dfs(0,n-1));\n\treturn 0;\n}\n```",
        "postTime": 1606544835,
        "uid": 123369,
        "name": "xtx1092515503",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3504 \u3010[POI2010]OWC-Sheep\u3011"
    },
    {
        "content": "[\u9898\u76ee](https://www.luogu.com.cn/problem/P3504)\n\n\u4e0d\u96be\u731c\u5230\u6216\u8005\u53d1\u73b0\u7684\u6027\u8d28\uff0c\u5982\u679c\u8fde\u4e86**\u4e00\u6761\u5bf9\u89d2\u7ebf\u5212\u5206\u51fa\u4e86\u5947\u6570\u4e2a\u70b9\uff0c\u90a3\u4e48\u8fd9\u6761\u5bf9\u89d2\u7ebf\u80af\u5b9a\u4e0d\u5408\u6cd5**\uff1b\u56e0\u4e3a\u5212\u5206\u6210\u4e09\u89d2\u5f62\u5c31\u4e0d\u53ef\u80fd\u6709\u5bf9\u89d2\u7ebf\u76f8\u4ea4\uff0c\u4e8e\u662f\u5212\u5206\u6210\u5947\u6570\u7684\u90a3\u4e00\u8fb9\u600e\u4e48\u6837\u4e5f\u4e0d\u53ef\u80fd\u5212\u5206\u6210\u5168\u662f\u5076\u6570\n\n\u4e8e\u662f\u6211\u4eec\u9700\u8981\u5bf9\u6bcf\u4e00\u6761\u5bf9\u89d2\u7ebf\u6c42\uff0c\u6709\u591a\u5c11\u6761\u4e2a\u70b9\u5728\u5b83\u4e0a\u9762\uff0c\u76f4\u63a5\u66b4\u529b\u679a\u4e3e\u5bf9\u89d2\u7ebf\u7528\u53c9\u79ef\u6765\u5224\u662f$O(n^2m)$\u7684\uff0c\u663e\u7136\u8fc7\u4e0d\u53bb\u7684\u6837\u5b50\uff1b\u4e0d\u96be\u53d1\u73b0\u8fd9\u4e2a\u95ee\u9898\u5177\u6709\u4e00\u5b9a\u7684\u5355\u8c03\u6027\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u70b9$i$\uff0c\u6c42\u51f8\u5305\u4e0a\u5176\u4ed6\u70b9$j$\u548c$i$\u6240\u8fde\u5bf9\u89d2\u7ebf\u7684\u5212\u5206\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u987a\u65f6\u9488\u679a\u4e3e\u70b9$j$\uff0c\u4e0d\u96be\u53d1\u73b0\u5982\u679c\u4e00\u4e2a\u70b9\u5728$(i,j-1)$\u8fd9\u6761\u8fb9\u4ee5\u4e0a\uff0c\u90a3\u4e48\u4e5f\u80af\u5b9a\u5728$(i,j)$\u4ee5\u4e0a\uff0c\u4e8e\u662f\u6211\u4eec\u4ee5\u70b9$i$\u4e3a\u539f\u70b9\u8dd1\u4e00\u8fb9\u5947\u89d2\u6392\u5e8f\uff0c\u4e4b\u540e\u5f00\u4e2a\u6307\u9488\u626b\u4e00\u626b\u5c31\u597d\u4e86\n\n\u4e4b\u540e\u6c42\u65b9\u6848\u6570\u5c31\u6bd4\u8f83\u7b80\u5355\u4e86\uff0c\u8fd9\u662f\u4e00\u4e2a\u51f8\u591a\u8fb9\u5f62\u7684\u5f26\u5212\u5206\u95ee\u9898\uff0c\u53ef\u4ee5\u5927\u529b\u533a\u95f4$dp$\n\n\u8bbe$g_{l,r}$\u8868\u793a\u533a\u95f4$[l,r]$\u7684\u5408\u6cd5\u5212\u5206\u6570\n\n\u90a3\u4e48\u5c31\u6709$g_{l,r}=\\sum_{i=l+1}^{r-1}[f_{l,i}=1][f_{i,r}=1]g_{l,i}\\times g_{i,r}$\n\n$f_{l,i}=1$\u8868\u793a\u8fd9\u6761\u5bf9\u89d2\u7ebf\u5408\u6cd5\n\n\u590d\u6742\u5ea6\u662f$O(nm\\log m+n^3)$\uff0c\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define vt pt\n#define re register\ninline int read() {\n\tchar c=getchar();int x=0,r=1;while(c<'0'||c>'9') {if(c=='-') r=-1;c=getchar();}\n\twhile(c>='0'&&c<='9') x=(x<<3)+(x<<1)+c-48,c=getchar();return x*r;\n}\nconst int maxn=603;\nstruct pt {int x,y;}a[maxn],b[200005];\nint n,m,mod,nw;\nint f[maxn][maxn],g[maxn][maxn],vis[maxn][maxn];\ninline int qm(int x) {return x>=mod?x-mod:x;}\ninline int crs(pt A,pt B) {return A.x*B.y-A.y*B.x;}\ninline vt operator-(const pt A,const pt B) {return (vt){A.x-B.x,A.y-B.y};}\ninline int cmp(const vt A,const vt B) {return crs(A-a[nw],B-a[nw])<0;}\nint dfs(int l,int r) {\n\tif(vis[l][r]) return g[l][r];\n\tvis[l][r]=1;\n\tfor(re int i=l+1;i<r;i++)\n\t\tif(!(f[l][i]|f[i][r])) g[l][r]=qm(g[l][r]+dfs(l,i)*dfs(i,r)%mod);\n\treturn g[l][r];\n}\nint main() {\n\tn=read(),m=read(),mod=read();\n\tfor(re int i=1;i<=n;i++) a[i].x=read(),a[i].y=read();\n\tfor(re int i=1;i<=m;i++) b[i].x=read(),b[i].y=read();\n\tfor(re int i=1;i<=n;i++) {\n\t\tnw=i;std::sort(b+1,b+m+1,cmp);int tot=0;\n\t\tfor(re int j=i+1;j<=n;j++) {\n\t\t\twhile(tot<m&&crs(a[j]-a[i],b[tot+1]-a[i])>=0) ++tot;\n\t\t\tf[i][j]=f[j][i]=(tot&1);\n\t\t\tif(tot&&crs(a[j]-a[i],b[tot]-a[i])==0) f[i][j]=f[j][i]=1;\n\t\t}\n\t}\n\tfor(re int i=1;i<n;i++) g[i][i+1]=1,vis[i][i+1]=1;\n\tprintf(\"%d\\n\",dfs(1,n));\n\treturn 0;\n}\n\n```\n",
        "postTime": 1575796040,
        "uid": 35178,
        "name": "asuldb",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3504 \u3010[POI2010]OWC-Sheep\u3011"
    },
    {
        "content": "```\n\u9996\u5148\u6211\u4eec\u9700\u8981\u9884\u5904\u7406\u51fa\u591a\u8fb9\u5f62\u7684\u6bcf\u6761\u5bf9\u89d2\u7ebf\u662f\u5426\u80fd\u628a\u70b9\u5206\u6210\u4e24\u4e2a\u5076\u6570\u90e8\u5206\u3002\u8fd9\u4e00\u6b65\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u4e00\u4e2a\u8d77\u70b9\uff0c\u7136\u540e\u5c06k\u4e2a\u70b9\u6309\u7167\u8fd9\u4e2a\u70b9\u7684\u6781\u89d2\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u626b\u4e00\u904d\u5373\u53ef\u6c42\u51fa\u4ee5\u8fd9\u4e2a\u70b9\u4e3a\u5bf9\u89d2\u7ebf\u7684\u4e00\u4e2a\u7aef\u70b9\u7684\u6240\u6709\u60c5\u51b5\n\n\u4e0a\u9762\u4e00\u6b65\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(NKlogK+N^2)\u7684\n\n\u7d27\u63a5\u7740\u6211\u4eec\u53ef\u4ee5\u7528\u7c7b\u4f3c\u51f8\u591a\u8fb9\u5f62\u5212\u5206\u7684\u533a\u95f4DP\u6765\u8fdb\u884c\u8ba1\u7b97\n\n\u8bbeF[i][j]\u8868\u793a\u5bf9\u89d2\u7ebf(\u70b9i\uff0c\u70b9j)\u80fd\u4e0d\u80fd\u628a\u5e73\u9762\u4e0a\u7684\u70b9\u5206\u6210\u4e24\u4e2a\u5076\u6570\u90e8\u5206\uff0cg[i][j]\u8868\u793a\u70b9i\u5230\u70b9j\u7ec4\u6210\u7684\u51f8\u591a\u8fb9\u5f62\u7684\u5408\u6cd5\u5212\u5206\u65b9\u6848\u6570\n\n\u5219\u6709g[i][j]+=g[i][o]*g[o][j]\u00a0 (f[i][o]&&f[o][j],i<o<j)\n\n\u8fd9\u4e00\u6b65\u65f6\u95f4\u590d\u6742\u5ea6O(N^3)\n\n\n\n\u603b\u4f53\u65f6\u95f4\u590d\u6742\u5ea6O(N^3+NKlogK)\n\u7a0b\u5e8f\u5982\u4e0b\uff1a\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define K 20010\n#define N 610\nusing namespace std;\nstruct node{int x,y;};\nint xj(node x,node y){return x.x*y.y-x.y*y.x;}\nnode operator -(const node &x,const node &y){return (node){x.x-y.x,x.y-y.y};}\nnode a[K],b[K],S;\nbool f[N][N];\nint g[N][N];\nbool operator <(const node &x,const node &y){return (x.x-S.x)*(y.y-S.y)-(x.y-S.y)*(y.x-S.x)<0;}\nint main()\n{\n\tint n,k,m;\n\tscanf(\"%d%d%d\",&n,&k,&m);\n\tint i,j,l,o,x,y;\n\tfor(i=1;i<=n;i++)\n\tscanf(\"%d%d\",&a[i].x,&a[i].y);\n\tfor(i=1;i<=k;i++)\n\tscanf(\"%d%d\",&b[i].x,&b[i].y);\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tS=a[i];\n\t\tsort(b+1,b+k+1);\n\t\tint tmp=0;\n\t\tfor(j=i+1;j<=n;j++)\n\t\t{\n\t\t\twhile(tmp<k&&xj(b[tmp+1]-S,a[j]-S)<0) tmp++;\n\t\t\tif(tmp%2==1||xj(b[tmp+1]-S,a[j]-S)==0) continue;\n\t\t\tf[i][j]=true;\n\t\t}\n\t}\n\tfor(i=1;i<n;i++)\n\tg[i][i+1]=1;\n\tfor(l=2;l<n;l++)\n\tfor(i=1;i+l<=n;i++)\n\tif(f[i][i+l])\n\t{\n\t\tj=i+l;\n\t\tfor(o=i+1;o<j;o++)\n\t\tif(f[i][o]&&f[o][j])\n\t\t(g[i][j]+=g[i][o]*g[o][j])%=m;\n\t}\n\tprintf(\"%d\",g[1][n]);\n}\n```",
        "postTime": 1557723112,
        "uid": 142305,
        "name": "\u5356\u6deb\u7fc1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3504 \u3010[POI2010]OWC-Sheep\u3011"
    }
]
[
    {
        "content": "N^4\u7684\u7b97\u6cd5\u5f88\u597d\u60f3\uff0c\u679a\u4e3e\u4e09\u4e2a\u70b9\u7ec4\u6210\u4e00\u4e2a\u5706\uff0c\u518d\u679a\u4e3e\u4e00\u4e2a\u70b9\u5224\u65ad\u70b9\u662f\u5426\u5728\u5706\u5185\uff0c\u7edf\u8ba1\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f46\u8fd9\u6837\u663e\u7136\u53ea\u80fd\u62ff\u523040\u5206\u3002\n\n\u5bf9\u4e8e\u4efb\u610f4\u4e2a\u70b9\uff0c\u7ec4\u6210\u7684\u56fe\u5f62\u53ea\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u51f8\u56db\u8fb9\u5f62\uff0c\u4e00\u79cd\u662f\u51f9\u56db\u8fb9\u5f62\uff0c\u5373\u4e00\u4e2a\u70b9\u5728\u53e6\u5916\u4e09\u4e2a\u70b9\u7ec4\u6210\u7684\u4e09\u89d2\u5f62\u5185\u3002\n\n\u5bf9\u4e8e\u51f8\u56db\u8fb9\u5f62\uff0c\u5fc5\u6709\u4e00\u7ec4\u5bf9\u89d2\u5927\u4e8e180\u00b0\uff0c\u6b64\u65f6\u8fd9\u7ec4\u5bf9\u89d2\u6240\u5bf9\u5e94\u7684\u9876\u70b9\u5fc5\u7136\u5728\u53e6\u5916\u4e09\u4e2a\u70b9\u7ec4\u6210\u7684\u5706\u4e2d\uff0c\u6240\u4ee5\u6bcf\u4e2a\u51f8\u56db\u8fb9\u5f62\u5bf9\u4e8e\u603b\u7684\u7b54\u6848\u8d21\u732e\u4e24\u4e2a\u70b9\u3002\n\n\u5bf9\u4e8e\u51f9\u56db\u8fb9\u5f62\uff0c\u8bbeD\u5728\u4e09\u89d2\u5f62ABC\u5185\uff0c\u90a3\u4e48\u53ea\u6709D\u5728\u4e09\u89d2\u5f62ABC\u7ec4\u6210\u7684\u5706\u4e2d\uff0cA\uff0cB\u548cC\u90fd\u4e0d\u5728\u53e6\u5916\u4e09\u4e2a\u70b9\u7684\u5706\u4e2d\uff0c\u6240\u4ee5\u51f9\u56db\u8fb9\u5f62\u5bf9\u603b\u7684\u7b54\u6848\u8d21\u732e\u4e00\u4e2a\u70b9\u3002\n\n\u7531\u4e8e\u603b\u7684\u56db\u8fb9\u5f62\u4e2a\u6570\u4e00\u5b9a\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u51f9\u56db\u8fb9\u5f62\u7684\u4e2a\u6570\u3002\n\n\u9996\u5148\u679a\u4e3e\u51f9\u70b9D\uff0c\u4ee5D\u4f5c\u4e3a\u6781\u70b9\uff0cx\u8f74\u6b63\u534a\u8f74\u4e3a\u6781\u8f74\u8fdb\u884c\u6781\u89d2\u6392\u5e8f\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5408\u6cd5\u7684\u4e09\u89d2\u5f62ABC\uff0c\u8fc7D\u7684\u4efb\u610f\u4e00\u6761\u76f4\u7ebf\u90fd\u4e0d\u80fd\u4f7f\u4e09\u4e2a\u70b9\u5728D\u7684\u540c\u4e00\u4fa7\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u7528\u603b\u7684\u4e09\u89d2\u5f62\u4e2a\u6570C\uff08n-1\uff0c3\uff09\u6765\u51cf\u53bb\u540c\u4e00\u4fa7\u7684\u4e09\u89d2\u5f62\u4e2a\u6570\u3002\u8fd9\u6837\u679a\u4e3e\u4e00\u4e2a\u70b9A\uff0c\u627e\u5230A\u5230C\u7684\u89d2\u5c0f\u4e8e180\u00b0\u7684\u6700\u8fdc\u70b9C\uff0c\u8bbeA\u7684\u7f16\u53f7\u4e3ai\uff0cC\u7684\u7f16\u53f7\u4e3aj\uff0c\u90a3\u4e48\u6b64\u65f6\u5728\u4e00\u4fa7\u7684\u4e09\u89d2\u5f62\u4e2a\u6570\u4e3aC\uff08j-i\uff0c2\uff09\uff0c\u7531\u4e8eC\u5bf9\u4e8e\u6bcf\u4e00\u4e2aA\u662f\u5355\u8c03\u7684\uff0c\u6240\u4ee5\u6bcf\u4e00\u6b21\u7684\u590d\u6742\u5ea6\u5747\u4e3an\uff0c\u603b\u7684\u590d\u6742\u5ea6\u5c31\u662fn^2\uff0c\u52a0\u4e0a\u6392\u5e8f\u7684\u590d\u6742\u5ea6\uff0c\u603b\u590d\u6742\u5ea6\u4e3an^2logn\u3002\n\nCode\n```cpp\nprogram test3;\nuses math;\nvar x,y:array[0..1500]of extended;\n    p,q:array[0..3000]of extended;\n    i,j,m,k:longint;\n    tot,sum1,sum2,sum,now,n:int64;\n    ans:extended;\nprocedure kp(l,r:longint);\nvar i,j:longint;\n    x,y:extended;\nbegin\n    i:=l;j:=r;\n    x:=p[(l+r)shr 1];\n    repeat\n        while p[i]<x do inc(i);\n        while p[j]>x do dec(j);\n        if i<=j then\n        begin\n            y:=p[i];\n            p[i]:=p[j];\n            p[j]:=y;\n            inc(i);\n            dec(j);\n        end;\n    until i>j;\n    if l<j then kp(l,j);\n    if i<r then kp(i,r);\nend;\nbegin\n    readln(n);\n    for i:=1 to n do readln(x[i],y[i]);\n    tot:=n*(n-1)*(n-2)div 6;\n    for k:=1 to n do\n    begin\n        p[k]:=0;\n        for i:=1 to n do\n        begin\n            if i=k then continue;\n            q[i]:=(x[i]-x[k])/sqrt(sqr(x[i]-x[k])+sqr(y[i]-y[k]));\n            p[i]:=arccos(q[i]);\n            if y[i]<y[k] then p[i]:=2*pi-p[i];\n        end;\n        kp(1,n);\n        for i:=2 to n do p[i+n-1]:=p[i];\n        j:=2;\n        now:=0;\n        for i:=2 to n do\n        begin\n            while (((p[j+1]-p[i]<=pi)and(p[j+1]>=p[i]))or(p[j+1]-p[i]<-pi))and(j<i+n-2) do inc(j);\n            now:=now+(j-i)*(j-i-1)div 2;\n        end;\n        sum:=sum+(n-1)*(n-2)*(n-3)div 6-now;\n    end;\n    sum1:=sum;\n    sum2:=n*(n-1)*(n-2)*(n-3)div 24-sum1;\n    sum:=sum1+sum2*2+tot*3;\n    ans:=sum/tot;\n    writeln(ans:0:6);\nend.\n```",
        "postTime": 1509710153,
        "uid": 34939,
        "name": "Hammer_cwz_77",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3630 \u3010[APIO2010]\u4fe1\u53f7\u8986\u76d6 \u3011"
    },
    {
        "content": "## \u524d\u8a00\n\n[\u535a\u5ba2\u98df\u7528\u94fe\u63a5](https://www.cnblogs.com/huayucaiji/p/LG3630.html)\n\n~~\u5357\u6d77\u90fd\u6709\u7f51\u7edc\u4e86\uff0c\u600e\u4e48\u5317\u4eac\u8fd8\u8981\u8986\u76d6\u4fe1\u53f7\u554a~~\n\n\u597d\u4e45\u4ee5\u524d\u505a\u7684\u8ba1\u7b97\u51e0\u4f55\u9898\u4e86\uff0c\u56de\u6765\u590d\u76d8\u4e00\u4e0b\u3002\n\n## \u89e3\u6cd5\n\n\u9996\u5148\uff0c\u9898\u76ee\u4e2d\u5404\u6709\u4e00\u4e2a\u6761\u4ef6\u5f88\u91cd\u8981\uff1a\n\n> \u4fdd\u8bc1\u4efb\u4f55\u4e09\u4e2a\u623f\u5b50\u90fd\u4e0d\u5728\u540c\u4e00\u6761\u76f4\u7ebf \u4e0a\uff0c\u4efb\u4f55\u56db\u4e2a\u623f\u5b50\u90fd\u4e0d\u5728\u540c\u4e00\u4e2a\u5706\u4e0a\u3002\n\n\u7ffb\u8bd1\u4e00\u4e0b\uff0c\u6ca1\u6709\u56db\u70b9\u5171\u5706\uff0c\u6ca1\u6709\u4e09\u70b9\u5171\u7ebf\u3002\n\n\u6211\u4eec\u505a\u8fd9\u9053\u9898\u4f9d\u8d56\u4e8e\u8fd9\u4e2a\u6761\u4ef6\u3002\n\n\u9996\u5148\u5bf9\u4e8e $A,B,C$ \u4e09\u4e2a\u70b9\u4f5c\u7684\u5916\u63a5\u5706\uff0c\u4e00\u5b9a\u8986\u76d6\u8fd9\u4e09\u4e2a\u70b9\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2a\u5706\u90fd\u662f\u5982\u6b64\u3002\u90a3\u6211\u4eec\u7684\u7b54\u6848\u53ef\u4ee5\u8868\u793a\u4e3a\uff1a\n\n$$ans=\\frac{sum}{C_n^3}+3$$\n\n\u5176\u4e2d\uff0c$C^3_n$ \u662f\u5706\u7684\u603b\u6570\uff0c\u800c $sum$ \u662f\u6240\u6709\u5706**\u5706\u5185\u7684\u70b9**\u7684\u6570\u7684\u603b\u548c\u3002\n\n\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\uff0c\u5982\u4f55\u6c42 $sum$ \u5462\uff1f\n\n**\u6b63\u96be\u5219\u53cd\u3002**\n\n\u6211\u4eec\u53ef\u4ee5\u7b97\u6bcf\u4e2a\u70b9\u5728\u591a\u5c11\u4e2a\u5706**\u5185\u90e8**\uff0c\u5bf9\u4e8e\u7b2c $i$ \u4e2a\u70b9\uff0c\u8fd9\u4e2a\u503c\u6211\u4eec\u8bb0\u4e3a $f_i$\u3002\u90a3\u4e48 $sum=\\sum\\limits_{i=1}^n f_i$\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u8981\u8003\u8651\u786e\u5b9a\u5706\u7684\u4e09\u4e2a\u70b9\u548c\u70b9 $i$\uff0c\u4e5f\u5c31\u662f\u56db\u4e2a\u70b9\u3002\u56e0\u6b64\u6211\u4eec\u8003\u8651\u8fd9\u56db\u4e2a\u70b9\u7ec4\u6210\u7684\u56db\u8fb9\u5f62\u3002\n\n**\u5982\u679c\u7ec4\u6210\u51f8\u56db\u8fb9\u5f62\u3002** \u5219\u5982\u4e0b\u56fe\uff1a\n\n![1](https://cdn.luogu.com.cn/upload/image_hosting/bmd5m9xd.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000)\n\n\u7531\u4e8e\u6ca1\u6709\u56db\u70b9\u5171\u5706\u7684\u60c5\u51b5\uff0c\u4e00\u5b9a\u6ca1\u6709\u5bf9\u89d2\u548c\u4e3a $180$ \u7684\u53ef\u80fd\u3002\u90a3\u4e48\u4ee5 $A,D,C$ \u4f5c\u5706\uff0c\u4e00\u5b9a\u80fd\u8986\u76d6 $C$\uff0c\u4ee5 $D,C,B$ \u4f5c\u5706\uff0c\u4e00\u5b9a\u8986\u76d6 $A$\u3002\u6240\u4ee5\u4e00\u4e2a\u51f8\u56db\u8fb9\u5f62\u5bf9 $sum$ \u505a $2$ \u7684\u8d21\u732e\u3002\n\n**\u5982\u679c\u7ec4\u6210\u51f9\u56db\u8fb9\u5f62\u3002** \u5219\u5982\u4e0b\u56fe\uff1a\n\n![2](https://cdn.luogu.com.cn/upload/image_hosting/kpd36r1a.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000)\n\n\u663e\u7136\uff0c\u53ea\u6709\u4ee5 $C,B,D$ \u4f5c\u5706\u624d\u80fd\u8986\u76d6 \u53e6\u4e00\u4e2a\u70b9 $A$\uff0c\u56e0\u6b64\u4e00\u4e2a\u51f9\u56db\u8fb9\u5f62\u5bf9 $sum$ \u7684\u8d21\u732e\u662f $1$\u3002\n\n\u95ee\u9898\u518d\u6b21\u88ab\u6211\u4eec\u8f6c\u5316\uff0c\u53d8\u4e3a\u6709\u591a\u5c11\u4e2a\u51f8\u56db\u8fb9\u5f62\uff0c\u591a\u5c11\u51f9\u56db\u8fb9\u5f62\u3002\u8bbe\u4ed6\u4eec\u7684\u6570\u91cf\u5206\u522b\u4e3a $x,y$\u3002\u6211\u4eec\u6709\uff1a\n\n$$x+y=C_n^4$$\n\n\u6211\u4eec\u5230\u5e95\u662f\u6c42 $x$\uff0c\u8fd8\u662f\u6c42 $y$ \u5462\uff1f\n\n\u7531\u4e8e\n\n$$sum=2x+y=C_n^4+x$$\n\n\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u51f8\u591a\u8fb9\u5f62\u6570\u91cf $x$ \u5373\u53ef\u3002\n\n\u4f46\u662f\uff0c\u771f\u7684\u662f\u8fd9\u6837\u505a\u5417\uff1f\u6211\u4eec\u53d1\u73b0\u8fd9\u6837\u505a\u5176\u5b9e\u5f88\u96be\u3002\n\n\u51f9\u56db\u8fb9\u5f62\u7684\u6570\u91cf\u4f1a\u6bd4\u51f8\u56db\u8fb9\u5f62\u6570\u91cf\u597d\u6c42\u5f97\u591a\u3002~~\u5475\u5475~~\n\n\u5982\u679c\u4f60\u4ed4\u7ec6\u60f3\u60f3\uff0c\u5c31\u4f1a\u53d1\u73b0\uff0c\u6bcf\u4e2a\u51f9\u56db\u8fb9\u5f62\u90fd\u6709\u4e00\u4e2a\u51f9\u89d2\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u6c42\u51fa\u51f9\u89d2\u6570\u91cf\u3002\u6211\u4eec\u4ee4\u51f8\u89d2\u6570\u91cf\u4e3a $a$\uff0c\u51f9\u89d2\u6570\u91cf\u4e3a $b$\uff0c\u7531\u4e8e\u6bcf\u4e2a\u56db\u8fb9\u5f62\u6709\u56db\u4e2a\u89d2\uff0c\u6211\u4eec\u6709\uff1a\n\n$$a+b=4\\cdot C_n^4$$\n\n\u53c8\u5230\u4e86\u719f\u6089\u7684\u5c94\u8def\u53e3\uff0c\u4f46\u8fd9\u4e00\u6b21\uff0c\u6211\u4eec\u9009\u62e9\u8ba1\u7b97\u51f8\u89d2\u6570\u91cf $a$\u3002\n\n\u8fd9\u4e2a\u6c42\u6cd5\u975e\u5e38\u7b80\u5355\uff0c\u76f4\u63a5\u679a\u4e3e\u6bcf\u4e2a\u70b9\u4f5c\u4e3a\u539f\u70b9\uff0c\u5176\u4ed6\u7684\u70b9\u505a\u6781\u89d2\u6392\u5e8f\u3002\n\n![3](https://cdn.luogu.com.cn/upload/image_hosting/8pukqn7b.png?x-oss-process=image/resize,m_lfit,h_1000,w_1000)\n\n\u7528\u53cc\u6307\u9488\u626b\u4e00\u4e0b\uff0c\u5f97\u5230\u4ee5\u67d0\u4e00\u6761\u8fb9\u4e3a\u5b9a\u8fb9\u7684\u5c0f\u4e8e $180$ \u5ea6\u7684\u89d2\u7684\u4e2a\u6570\u3002\u5373 $i$ \u4e3a\u5b9a\u8fb9\uff0c\u5230 $j$ \u4e3a\u6b62\u7684\u89d2\u5c0f\u4e8e $180$ \u5ea6\uff0c$j+1$ \u4e0e $i$ \u6240\u5939\u7684\u89d2\u5927\u4e8e $180$ \u5ea6\u3002\u90a3\u4e48\u8fd9\u4e2a\u533a\u95f4\u91cc\u9762\u7684\u51f8\u89d2\u6240\u5c5e\u56db\u8fb9\u5f62\u6709 $C_{j-i+1}^2$ \u4e2a\u3002\n\n**\u6ce8\u610f\u8981\u7834\u73af\u4e3a\u94fe\u3002**\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u6c42\u5f97\u4e86 $a$\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f9d\u6b21\u6c42\u51fa $b,y,x,sum,ans$\u3002\n\n\u6700\u540e\u8f93\u51fa $ans$ \u5373\u53ef\u3002\n\n\u6700\u540e\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2\\log n)$\u3002",
        "postTime": 1619859620,
        "uid": 132976,
        "name": "huayucaiji",
        "ccfLevel": 6,
        "title": "LG3630 [APIO2010]\u4fe1\u53f7\u8986\u76d6 \uff08\u8ba1\u7b97\u51e0\u4f55\uff09"
    },
    {
        "content": "## \u524d\u8a00\n\u4e00\u9053\u6709\u610f\u601d\u7684\u9898\u76ee\uff0c\u505a\u4e86\u4e00\u4e2a\u665a\u4e0a\u548c\u4e00\u4e2a\u4e0a\u5348\uff0c\u7ec8\u4e8e\u641e\u5b9a\u4e86\u3002\n\n\u601d\u8def\u8ddf\u5176\u4ed6\u9898\u89e3\u4e0d\u4e00\u6837\u3002\n\n## \u7406\u8bba\u5206\u6790\n\n\u6211\u4eec\u5bf9\u4e09\u70b9\u6784\u6210\u7684\u5706\u8fdb\u884c\u5982\u4e0b\u56fe\u7684\u62c6\u5206\uff1a\n\n\n![\u62c6\u5206\u7b54\u6848](https://cdn.luogu.com.cn/upload/image_hosting/ivo36p8l.png)\n\n\uff08\u89e3\u91ca\uff1a\u4e00\u4e2a\u5706\u8986\u76d6\u7684\u70b9\u6570 $\\times 2$ $=$ \u8fb9 $AB$ \u622a\u4e0b\u7684\u56fe\u5f62\u8986\u76d6\u7684\u70b9\u6570 $+$ \u8fb9 $AC$ \u622a\u4e0b\u7684\u56fe\u5f62\u8986\u76d6\u7684\u70b9\u6570 $+$ \u8fb9 $BC$ \u622a\u4e0b\u7684\u56fe\u5f62\u8986\u76d6\u7684\u70b9\u6570 $-$ \u4e09\u89d2\u5f62 $ABC$ \u8986\u76d6\u7684\u70b9\u6570\u3002\uff09\n\n\u63a5\u4e0b\u6765\u5206\u6210\u4e24\u90e8\u5206\uff1a\u5706\u5f27\u72b6\u7684\u56fe\u5f62 \u548c \u4e09\u89d2\u5f62\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u90e8\u5206\uff0c\u6211\u4eec\u8ba1\u7b97\u6bcf\u4e2a\u70b9\u88ab\u591a\u5c11\u4e2a\u4e09\u89d2\u5f62\u8986\u76d6\u3002\u679a\u4e3e\u6bcf\u4e2a\u70b9\uff0c\u5c06\u5176\u4f5c\u4e3a\u539f\u70b9\uff0c\u7edf\u8ba1\u6709\u591a\u5c11\u4e2a\u4e09\u89d2\u5f62\u5305\u542b\u539f\u70b9\u3002\u8fd9\u90e8\u5206\u4e0d\u7740\u91cd\u8bb2\u89e3\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e00\u90e8\u5206\u6070\u597d\u662f[\u8fd9\u9053\u9898](https://www.luogu.com.cn/problem/P2992)\u3002\uff08\u8fd8\u662f\u8bf4\u4e00\u4e0b\uff0c\u8fd9\u90e8\u5206\u7528\u5bb9\u65a5\uff0c\u5148\u8ba1\u7b97\u51fa\u6240\u6709\u4e09\u89d2\u5f62\u6570\u91cf\uff0c\u518d\u51cf\u53bb\u4e0d\u5408\u6cd5\u7684\u3002\u4ece\u539f\u70b9\u5411\u6bcf\u4e2a\u70b9\u8fde\u63a5\u4e00\u6761\u8fb9\uff0c\u5982\u679c\u4e00\u4e2a\u4e09\u89d2\u5f62\u4e0d\u5408\u6cd5\uff0c\u90a3\u5fc5\u7136\u6709\u4e24\u4e2a\u70b9\u4e0e\u539f\u70b9\u7684\u8fde\u7ebf\u4e4b\u95f4\u7684\u89d2\u5927\u4e8e $180$ \u5ea6\u3002\uff09\n\n\u91cd\u70b9\u770b\u7b2c\u4e00\u90e8\u5206\u3002\u5982\u679c\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u4e24\u4e2a\u70b9\uff08\u5373\u786e\u5b9a\u4e86\u4e00\u6761\u8fb9\uff09\uff0c\u52a0\u5165\u7b2c\u4e09\u4e2a\u70b9\u540e\u6240\u5f62\u6210\u7684\u5706\u8986\u76d6\u7684\u70b9\u6570\u5176\u5b9e\u662f\u4e00\u6bb5\u4ece $3$ \u5f00\u59cb\u7684\u8fde\u7eed\u81ea\u7136\u6570\uff0c\u89c1\u4e0b\u56fe\uff1a\n\n![\u770b\u56fe](https://cdn.luogu.com.cn/upload/image_hosting/gypyqegl.png)\n\n\u5982\u4e0a\u56fe\uff0c\u6211\u4eec\u786e\u5b9a\u4e86\u8fb9 $AB$ \uff0c\u5982\u679c\u53ea\u7edf\u8ba1\u8fb9 $AB$ \u7684\u4e00\u4fa7\u7684\u8bdd\uff0c\u6211\u4eec\u6309 $C,J,G,I,L,K$ \u7684\u987a\u5e8f\u7edf\u8ba1\u7b54\u6848\uff0c\u53d1\u73b0\u5728\u8fd9\u4e00\u4fa7\uff0c\u6bcf\u4e00\u4e2a\u5706\u90fd\u5b8c\u5168\u8986\u76d6\u4e0a\u4e00\u4e2a\u5706\uff0c\u8986\u76d6\u7684\u70b9\u6570\u6070\u597d\u662f $3,4,5,6,7,8$ \u4e00\u6bb5\u4ee5 $3$ \u5f00\u59cb\u7684\u8fde\u7eed\u81ea\u7136\u6570\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u7edf\u8ba1\u51fa\u8fb9 $AB$ \u4e00\u4fa7\u7684\u70b9\u6570\uff0c\u5c31\u53ef\u4ee5\u7528\u7b49\u5dee\u6570\u5217\u516c\u5f0f\u6c42\u51fa\u8fd9\u90e8\u5206\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u3002\n\n\u5bf9\u4e8e\u6bcf\u6761\u8fb9\u7684\u4e24\u4fa7\u5206\u522b\u8fdb\u884c\u8fd9\u6837\u7684\u7edf\u8ba1\uff0c\u8fd9\u65f6\u5019\u53d1\u73b0\u5bf9\u4e8e\u4e00\u4e2a\u5706\uff0c\u5b83\u7684\u4e2d\u95f4\u4e09\u89d2\u5f62\u90e8\u5206\u7684\u9762\u79ef\u88ab\u7edf\u8ba1\u4e86 $3$ \u6b21\uff0c\u5176\u4f59\u90e8\u5206\u9762\u79ef\u88ab\u7edf\u8ba1\u4e86 $2$ \u6b21\uff0c\u6240\u4ee5\u6309\u7167\u6700\u521d\u6211\u4eec\u5bf9\u56fe\u5f62\u7684\u62c6\u5206\u8fdb\u884c\u8ba1\u7b97\uff0c\u90a3\u4e48\u6070\u597d\u4e0d\u91cd\u4e0d\u6f0f\u5730\u7edf\u8ba1\u4e86\u6240\u6709\u7684\u7b54\u6848\u3002\uff08\u8865\u5145\u4e00\u4e0b\uff1a\u6ce8\u610f\u5230\u4ee3\u7801\u5b9e\u73b0\u65f6\u6bcf\u6761\u8fb9\u88ab\u4ece\u4e24\u4e2a\u7aef\u70b9\u5404\u904d\u5386\u4e86\u4e00\u6b21\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u4e09\u89d2\u5f62\u90e8\u5206\u88ab\u7edf\u8ba1\u4e86 $6$ \u6b21\uff0c\u5176\u4f59\u90e8\u5206\u88ab\u7edf\u8ba1\u4e86 $4$ \u6b21\u3002\uff09\n\n\u81f3\u6b64\uff0c\u6b64\u9898\u7406\u8bba\u5206\u6790\u5b8c\u6bd5\u3002\n\n## \u4ee3\u7801\u5b9e\u73b0\n\n\u7b2c\u4e00\u90e8\u5206\u6211\u4eec\u9700\u8981\u77e5\u9053\u6bcf\u6761\u76f4\u7ebf\u7684\u5de6\u8fb9\u548c\u53f3\u8fb9\u7684\u70b9\u6570\uff0c\u7b2c\u4e8c\u90e8\u5206\u6211\u4eec\u9700\u8981\u56fa\u5b9a\u4e00\u4e2a\u70b9\uff0c\u5e76\u8981\u77e5\u9053\u6bcf\u6761\u4ee5\u8be5\u70b9\u4e3a\u4e00\u7aef\u70b9\u7684\u8fb9\u9006\u65f6\u9488\uff08\u4e5f\u53ef\u4ee5\u987a\u65f6\u9488\uff0c\u53d6\u51b3\u4e8e\u6392\u5e8f\u65b9\u5f0f\uff09\u76f8\u8ddd\u5927\u4e8e $180$ \u5ea6\u7684\u8fb9\u7684\u6570\u91cf\u3002\u518d\u4e00\u60f3\uff0c\u7b2c\u4e00\u90e8\u5206\u6c42\u76f4\u7ebf\u4e24\u4fa7\u7684\u70b9\u6570\u4e5f\u9700\u8981\u8f6c $180$ \u5ea6\u8fdb\u884c\u7edf\u8ba1\uff0c\u6240\u4ee5\u6700\u7ec8\u6211\u4eec\u56fa\u5b9a\u4e00\u4e2a\u70b9\uff0c\u5c06\u5176\u4f59\u70b9\u5bf9\u4e8e\u8be5\u70b9\u8fdb\u884c\u6781\u89d2\u6392\u5e8f\u540e\uff0c\u7136\u540e\u8fdb\u884c $O(n)$ \u7edf\u8ba1\u3002\n\n\u6700\u7ec8\u590d\u6742\u5ea6 $O(n^2\\log n)$\u3002\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1510;\ntypedef long long ll;\nll ans,ans1;\nint n;\nstruct Point{\n\tint x,y;\n\tdouble angle;\n\tPoint(int x=0,int y=0):x(x),y(y){}\n\tPoint operator-(Point A){\n\t\treturn Point(x-A.x,y-A.y);\n\t}\n}a[N],tmp[N<<1];\nbool cmp(const Point&x,const Point&y){\n\treturn x.angle<y.angle;\n}\nll crs(const Point&x,const Point&y){\n\treturn (ll)x.x*y.y-(ll)x.y*y.x;\n}\nint main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\t\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)cin>>a[i].x>>a[i].y;\n\tfor(int i=1;i<=n;i++){\n\t\tswap(a[1],a[i]);\n\t\tfor(int j=1;j<n;j++)tmp[j]=a[j+1]-a[1],tmp[j].angle=atan2(tmp[j].y,tmp[j].x);\n\t\tsort(tmp+1,tmp+n,cmp);\n\t\tfor(int j=1;j<n;j++)tmp[j+n-1]=tmp[j];\n\t\tans1+=(ll)(n-1)*(n-2)*(n-3)/6+(ll)(n-1)*(n-2)/2;\n\t\tfor(int j=1,k=1;j<n;j++){\n\t\t\twhile(k<j+n-1&&crs(tmp[j],tmp[k])>=0)k++;\n\t\t\tll cnt1=k-j-1,cnt2=n-2-cnt1;\n\t\t\tans+=(3+cnt1+2)*cnt1/2+(3+cnt2+2)*cnt2/2;\n\t\t\tans1-=cnt2*(cnt2-1)/2;\n\t\t}\n\t}\n\tans=(ans/2-ans1)/2;\n\tcout<<(double)ans/((double)n*(n-1)*(n-2)/6);\n}\n```\n",
        "postTime": 1640855408,
        "uid": 292064,
        "name": "xkai",
        "ccfLevel": 7,
        "title": "P3630 [APIO2010]\u4fe1\u53f7\u8986\u76d6 \u9898\u89e3"
    },
    {
        "content": "\u7b80\u8981\u9898\u610f\uff1a\n\n\u5e73\u9762\u4e0a\u6709 $n$ \u4e2a\u70b9 $P_i=(x_i,y_i)$\uff0c\u4fdd\u8bc1\u4efb\u610f\u4e09\u70b9\u4e0d\u5171\u7ebf\uff0c\u4efb\u610f\u56db\u70b9\u4e0d\u5171\u5706\u3002\n\n\u6c42\u4efb\u610f\u4e09\u4e2a\u70b9\u7ec4\u6210\u7684\u6240\u6709\u5916\u63a5\u5706\u6240\u5305\u542b\u7684\u70b9\u7684\u6570\u91cf\u7684\u5e73\u5747\u503c\u3002\n\n\u6570\u636e\u8303\u56f4\u662f $3 \\leq n \\leq 1500, \\lvert x_i\\rvert, \\lvert y_i\\rvert \\leq 10^6$\uff0c\u8f93\u5165\u6570\u636e\u90fd\u662f\u6574\u6570\u3002\n\n\u5f88\u6709\u610f\u601d\u7684\u8ba1\u7b97\u51e0\u4f55\u9898\u3002\u9700\u8981\u6c42\u7684\u5c31\u662f\u6ee1\u8db3\u70b9 $D$ \u5305\u542b\u5728 $A, B, C$ \u6784\u6210\u7684\u5916\u63a5\u5706\u5185\u7684\u56db\u5143\u7ec4 $(A, B, C, D)$ \u7684\u6570\u91cf\uff0c\u5176\u4e2d $A, B, C$ \u6ca1\u6709\u987a\u5e8f\u3002\n\n\u8003\u8651 $D$ \u4e0e $A, B, C$ \u4e2d\u7684\u4e00\u4e2a\u76f8\u540c\u7684\u60c5\u51b5\u3002\u7531 $A, B, C$ \u6784\u6210\u7684\u5916\u63a5\u5706\u4e00\u5b9a\u5305\u542b $A, B, C$ \u4e09\u4e2a\u70b9\uff0c\u800c\u8fd9\u6837\u7684\u5916\u63a5\u5706\u6709 $\\binom{n}{3}$ \u4e2a\uff0c\u6545\u5bf9\u7b54\u6848\u6709 $3\\times\\binom{n}{3}$ \u7684\u8d21\u732e\u3002\n\n\u8003\u8651 $D$ \u4e0e $A, B, C$ \u90fd\u4e0d\u76f8\u540c\u7684\u60c5\u51b5\u3002\u6b64\u65f6 $A, B, C, D$ \u53ef\u4ee5\u770b\u4f5c\u56db\u8fb9\u5f62\uff0c\u53ef\u4ee5\u5206\u7c7b\u8ba8\u8bba\u5176\u5f62\u72b6\u3002\n\n![](https://s3.bmp.ovh/imgs/2022/07/09/6c45f01e19edcd3b.png)\n\n\u5f53 $A, B, C, D$ \u6784\u6210\u51f8\u56db\u8fb9\u5f62\u65f6\uff0c\u7531\u4e8e\u4efb\u610f\u56db\u70b9\u4e0d\u5171\u5706\uff0c\u6709 $\\angle A+\\angle C \\neq 180^{\\circ}$\u3002\u5982\u56fe\uff0c\u6709\u4e24\u4e2a\u70b9\u7b26\u5408\u6761\u4ef6\uff0c\u4e24\u4e2a\u70b9\u4e0d\u7b26\u5408\u6761\u4ef6\u3002\u6545\u4e00\u4e2a\u51f8\u56db\u8fb9\u5f62\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f $2$\u3002\n\n![](https://s3.bmp.ovh/imgs/2022/07/09/d02ec55337ce917d.png)\n\n\u5f53 $A, B, C, D$ \u6784\u6210\u51f9\u56db\u8fb9\u5f62\u65f6\uff0c\u5982\u56fe\uff0c\u6709\u4e00\u4e2a\u70b9\u7b26\u5408\u6761\u4ef6\uff0c\u4e09\u4e2a\u70b9\u4e0d\u7b26\u5408\u6761\u4ef6\u3002\u6545\u4e00\u4e2a\u51f9\u56db\u8fb9\u5f62\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f $1$\u3002\n\n\uff08\u6ce8\uff1a\u8fd9\u91cc $A, B, C, D$ \u53ef\u4ee5\u6784\u6210\u4e09\u4e2a\u51f9\u56db\u8fb9\u5f62\uff0c\u8fd9\u91cc\u53ea\u7b97\u4e00\u4e2a\uff09\n\n\u800c\u56db\u8fb9\u5f62\u7684\u603b\u6570\u662f $\\binom{n}{4}$\uff0c\u6545\u53ea\u9700\u8981\u6c42\u51fa\u51f8\u56db\u8fb9\u5f62\u6216\u8005\u51f9\u56db\u8fb9\u5f62\u7684\u6570\u91cf\u5c31\u53ef\u4ee5\u77e5\u9053\u7b54\u6848\u3002\n\n\u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u8ba1\u7b97\u51f9\u56db\u8fb9\u5f62\uff0c\u56e0\u4e3a\u51f9\u56db\u8fb9\u5f62\u4e2d\u6709\u4e00\u4e2a\u4e0e\u4f17\u4e0d\u540c\u7684\u51f9\u70b9\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u679a\u4e3e\u7684\u4f9d\u636e\u3002\n\n\u5c06\u51f9\u56db\u8fb9\u5f62\u7684\u6570\u91cf\u8bb0\u4f5c $S$\u3002\u4e8e\u662f\u7b54\u6848\u5c31\u662f\uff1a\n\n$$3 \\times \\binom{n}{3} + 2 \\times \\binom{n}{4} - R$$\n\n\u4e8e\u662f\u53ea\u9700\u8981\u6c42\u51fa $R$ \u5373\u53ef\u3002\n\n\u679a\u4e3e\u51f9\u70b9 $D$\uff0c\u4ee5\u5b83\u4f5c\u4e3a\u6781\u70b9\u8fdb\u884c\u6781\u89d2\u6392\u5e8f\uff0c\u5219 $D$ \u5728\u4e09\u89d2\u5f62 $ABC$ \u5185\u90e8\uff0c\u5373\u5bf9\u4e8e\u4efb\u610f\u4e00\u6761\u8fc7 $D$ \u7684\u76f4\u7ebf $l$\uff0c$A, B, C$ \u90fd\u4e0d\u5728 $l$ \u7684\u540c\u4e00\u4fa7\u3002\u4e5f\u5c31\u53ef\u4ee5\u8f6c\u5316\u6210\u4e09\u89d2\u5f62\u603b\u6570\u4ef6\u51cf\u53bb\u5728\u540c\u4e00\u4fa7\u7684\u4e09\u89d2\u5f62\u6570\u91cf\uff0c\u5c06\u540e\u8005\u8bb0\u4f5c $S_D$\u3002\n\n![](https://s3.bmp.ovh/imgs/2022/07/09/ed1d1cd2e4aaedb0.png)\n\n\u5b58\u5728\u4e00\u6761\u8fc7 $D$ \u7684\u76f4\u7ebf $l$ \u4f7f\u5f97 $A, B, C$ \u5728 $l$ \u7684\u540c\u4e00\u4fa7\uff0c\u4e5f\u5c31\u8bf4\u660e $\\overrightarrow{DA}, \\overrightarrow{DB}, \\overrightarrow{DC}$ \u7684\u89d2\u5ea6\u8de8\u5ea6\u4e0d\u8d85\u8fc7 $180^{\\circ}$\u3002\n\n![](https://s3.bmp.ovh/imgs/2022/07/09/b3068f014a0eed8d.png)\n\n\u5047\u8bbe\u4e09\u4e2a\u70b9\u6309\u7167\u9006\u65f6\u9488\u65b9\u5411\u6392\u4f9d\u6b21\u662f $A, B, C$\uff0c\u679a\u4e3e $A$, \u5219 $B, C$ \u90fd\u5728 $\\overrightarrow{DA}$ \u7684\u5de6\u4fa7\u3002\u6240\u4ee5\u53ea\u9700\u8981\u77e5\u9053\u5728 $\\overrightarrow{DA}$ \u5de6\u4fa7\u7684\u70b9\u7684\u6570\u91cf\u5373\u53ef\u3002\u5c06\u5b83\u8bb0\u4f5c $c_{D, A}$\uff0c\u5f53 $A$ \u9006\u65f6\u9488\u8f6c\u52a8\u65f6\uff0c\u7528\u53cc\u6307\u9488\u7ef4\u62a4\u7b2c\u4e00\u4e2a\u5728 $\\overrightarrow{DA}$ \u53f3\u4fa7\u7684\u70b9\uff0c\u5b83\u4eec\u4e4b\u95f4\u70b9\u7684\u6570\u91cf\u5c31\u662f $T_{D, A}$\u3002\u6545\n\n$$S_D=\\sum_{A \\neq D} \\binom{T_{D, A}}{2}$$\n\n$$R=\\sum_{D \\in P} \\binom{n-1}{3} - S_D = 4 \\times \\binom{n}{4} - \\sum_{D \\in P} \\sum_{A \\neq D} \\binom{T_{D, A}}{2}$$\n\n\u4e8e\u662f\u7b54\u6848\u5c31\u662f\n\n$$3 \\times \\binom{n}{3} - 2 \\times \\binom{n}{4} + \\sum_{D \\in P} \\sum_{A \\neq D} \\binom{T_{D, A}}{2}$$\n\n\u6700\u540e\u8981\u9664\u4ee5 $\\binom{n}{3}$\u3002\n\n$$\\color{white}\\tiny\\texttt{\u6211\u662f\u552f\u4e00\u4e00\u4e2a\u4e0d\u7528 double \u7684}$$\n\n```cpp\n#include <algorithm>\n#include <cstdio>\n#define _ 1510\n#define __ 3010\nlong long n, ans, cnt;\nstruct vec {long long x; long long y;} arr[_], tmp[__];\ninline vec sub(const vec& a, const vec& b) {return (vec){a.x - b.x, a.y - b.y};}\ninline long long quad(const vec& a) {return ((a.x < 0) ^ (3 * (a.y < 0)));}\ninline long long cross(const vec& a, const vec& b) {return a.x * b.y - a.y * b.x;}\ninline bool cmp(const vec& a, const vec& b) {return ((quad(a) == quad(b)) ? (cross(a, b) > 0) : (quad(a) < quad(b)));}\nint main() \n{\n    scanf(\"%lld\", &n);\n    for (register long long i = 1; i <= n; i++) scanf(\"%lld%lld\", &((arr+i)->x), &((arr+i)->y));\n    ans = (long long) n * (n-1) * (n-2) / 2 - (long long) n * (n-1) * (n-2) * (n-3) / 12;\n    cnt = (long long) n * (n-1) * (n-2) / 6;\n    for (register long long i = 1; i <= n; i++) {\n        register long long N = 0;\n        for (register long long j = 1; j <= n; j++) if (i != j) tmp[++N] = sub(arr[j], arr[i]);\n        std::sort(tmp+1, tmp+N+1, cmp);\n        for (register long long j = 1; j <= N; j++) tmp[j+N] = tmp[j];\n        for (register long long j = 1, k = 1; j <= N; j++) {\n            if (k == j) k++;\n            while (cross(tmp[j], tmp[k]) > 0) k++;\n            ans += (k-j-1) * (k-j-2) / 2;\n        }\n    }\n    printf(\"%lld.%lld%lld\", ans / cnt, ((ans * 10ll) / cnt) % 10ll, ((ans * 100ll) / cnt) %10ll);\n    return 0;\n}\n```",
        "postTime": 1657353269,
        "uid": 153422,
        "name": "0x3F",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3630\u3010[APIO2010] \u4fe1\u53f7\u8986\u76d6\u3011"
    },
    {
        "content": "~~\u8bf4\u8d77\u6765\u4e3a\u4ec0\u4e48\u8fd9\u9898\u6ca1\u6709\u4e00\u4e2ac++\u9898\u89e3\u5462~~\n\n### solution\n\n\u8fd9\u9053\u9898$n^4$\u7684\u7b97\u6cd5\u4e0d\u96be\u60f3\uff0c\u679a\u4e3e\u4efb\u610f\u56db\u4e2a\u70b9\uff0c\u4e00\u4e2a\u4e00\u4e2a\u7b97\u8fc7\u53bb\uff0c\u7136\u800c$n\\leq1500$\u60f3\u5984\u56fe\u4e0d\u70b8\u51e0\u4e4e\u4e0d\u53ef\u80fd ~~\u9664\u975e\u4f60\u80fd\u521b\u9020\u67d0\u4e9b\u767b\u5cf0\u9020\u6781\u7684\u4f18\u5316~~\uff0c\u4fdd\u5e9540\u5206\n\n\u6362\u4e00\u79cd\u601d\u8def\uff0c\u6bcf\u56db\u4e2a\u70b9\u6784\u6210\u4e00\u4e2a\u56db\u8fb9\u5f62\uff0c\u56db\u8fb9\u5f62\u5206\u4e3a\u51f8\u56db\u8fb9\u5f62\u548c\u51f9\u56db\u8fb9\u5f62\uff0c\u5206\u7c7b\u8ba8\u8bba\u4e00\u4e0b\u3002\n\n\u51f8\u56db\u8fb9\u5f62\u5982\u4e0b\u56fe\uff0c\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u6709\u4e00\u5bf9\u5bf9\u89d2\u548c\u5c0f\u4e8e\u7b49\u4e8e180\u00b0\u7684\u5bf9\u89d2\u65f6\uff0c\u4ee5\u8be5\u5bf9\u9876\u70b9\u6240\u6784\u6210\u7684\u5706\u5fc5\u7136\u5305\u542b\u5269\u4e0b\u7684\u4e24\u4e2a\u70b9\uff0c\u6240\u4ee5\u5bf9\u4e8e\u9898\u76ee\u7684\u603b\u8d21\u732e\u4e3a2\n\n![\u51f8\u56db\u8fb9\u5f62](https://cdn.luogu.com.cn/upload/image_hosting/sh9v9ckv.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u51f9\u56db\u8fb9\u5f62\u5982\u4e0b\u56fe\uff0c\u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u65e0\u8bba\u600e\u4e48\u6837\uff0c\u53ea\u6709\u4f5c\u4e3a\u4e09\u4e2a\u9510\u89d2\u7684\u9876\u70b9\u7684\u70b9\uff0c\u6240\u6784\u6210\u7684\u5706\u624d\u80fd\u5305\u542b\u6240\u6709\u9876\u70b9\uff0c\u6240\u4ee5\u5bf9\u4e8e\u9898\u76ee\u7684\u603b\u8d21\u732e\u4e3a1\n\n![\u51f9\u56db\u8fb9\u5f62](https://cdn.luogu.com.cn/upload/image_hosting/sbcoiykg.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u53ef\u4ee5\u77e5\u9053\uff0c\u9898\u76ee\u4e2d\u7684\u603b\u56db\u8fb9\u5f62\u4e2a\u6570\u4e3a$C_{n}^{4}$\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u51f8\u56db\u8fb9\u5f62\u7684\u4e2a\u6570\u3002\n\n\u9996\u5148\u66b4\u529b\u679a\u4e3e\u6bcf\u4e2a\u70b9\u4f5c\u4e3a\u51f9\u56db\u8fb9\u5f62\u7684\u51f9\u70b9\uff0c\u7136\u540e\u4ee5\u8be5\u70b9\u5efa\u7acb\u6781\u5750\u6807\u7cfb\uff0c\u5c06\u6bcf\u4e2a\u70b9\u7684\u6781\u89d2\u6309\u5927\u5c0f\u6392\u5e8f\u3002\u5176\u6b21\uff0c\u4ece$x$\u8f74\u6b63\u534a\u8f74\u5f00\u59cb\uff0c\u9006\u65f6\u9488\u5bfb\u627e\u79bb\u8be5\u70b9\u6700\u8fdc\u4e14\u4e24\u89d2\u5dee\u5c0f\u4e8e180\u00b0\u7684\uff0c\u7531\u4e8e\u6211\u4eec\u8bbe\u5b9a\u7684\u51f9\u70b9\u6240\u5728\u7684\u89d2\u5c0f\u4e8e180\u00b0\uff0c\u6240\u4ee5\u8be5\u56db\u8fb9\u5f62\u81ea\u7136\u4e3a\u51f8\u56db\u8fb9\u5f62\uff08\u8fd9\u91cc\u7684\u5224\u5b9a\u5b9e\u9645\u4e0a\u4f1a\u6709\u70b9\u95ee\u9898\uff0c\u56e0\u4e3a\u9664\u51f9\u70b9\u5916\u7684\u5269\u4e0b\u4e09\u4e2a\u70b9\u53ef\u80fd\u7ec4\u6210\u4e00\u4e2a\u5927\u4e8e180\u00b0\u7684\u89d2\uff0c\u4f46\u8fd9\u4e2a\u95ee\u9898\u5728\u6240\u6709\u7684\u7edf\u8ba1\u4e2d\u4f1a\u88ab\u7565\u53bb~~\u56e0\u4e3a\u8fd9\u91cc\u591a\u4e86\u540e\u9762\u5c31\u4f1a\u5c11\u4e86~~\uff09\u3002\u8bbe\u8be5\u70b9\u7f16\u53f7\u4e3a$i$\uff0c\u6700\u8fdc\u7684\u70b9\u7f16\u53f7\u4e3a$j$\uff0c\u6240\u5f97\u5230\u7684\u51f8\u56db\u8fb9\u5f62\u7684\u4e2a\u6570\u4e3a$C_{j-i}^{2}$\uff0c\u6700\u540e\u518d\u6309\u7167\u524d\u9762\u7684\u63a8\u65ad\u8fdb\u884c\u7edf\u8ba1\u3002\n\n```c++\n#include<bits/stdc++.h>\n#define ll long long\n#define f(i,a,b) for (ll i=a;i<=b;i++)\n#define fx(i,a,b) for (ll i=a;i>=b;i--)\nusing namespace std;\nconst int maxn=1510;\nconst double pi=3.1415927;//\u5f27\u5ea6\u5236\u90fd\u61c2\nint n;\nint a[maxn][2];\nll sum,ao;\ndouble ans;\npriority_queue<double,vector<double>,greater<double> >q;//\u4ee3\u66ffsort\uff0c\u4f46\u662f\u8fd9\u6837\u4f1a\u6162\u5f88\u591a\ndouble ta[maxn<<2];//\u89d2\u5ea6\ninline ll read()\n{\n\tll l=0,f=1;\n\tchar c;\n\twhile (!isdigit(c=getchar())) if (c=='-') f=-1;\n\twhile (isdigit(c)) l=(l<<3)+(l<<1)+(c^48),c=getchar();\n\treturn l*f;\n}\nll C(int x,int y)//\u6c42\u7ec4\u5408\u6570\n{\n\tll c=1;\n\tf(i,x-y+1,x) c*=i;\n\tf(i,1,y) c/=i;\n\treturn c;\n}\nsigned main()\n{\n\tn=read(),ao=n*C(n-1,3);\n\tif (n==3)\n\t{\n\t\tprintf(\"3.00\");\n\t\treturn 0;\n\t}\n\telse sum=C(n,4);//\u603b\u56db\u8fb9\u5f62\u4e2a\u6570\n\tf(i,1,n) a[i][0]=read(),a[i][1]=read();\n\tf(i,1,n)\n\t{\n\t\tf(j,1,n)\n\t\t{\n\t\t\tif (i!=j)\n\t\t\t{\n\t\t\t\tdouble jiao=atan2(a[j][1]-a[i][1],a[j][0]-a[i][0]);//\u4f7f\u7528atan2\u51fd\u6570\u53cd\u6c42\u89d2\u5ea6\n\t\t\t\tif (jiao<0) jiao+=2*pi;\n\t\t\t\tq.push(jiao); \n\t\t\t}\n\t\t}\n\t\tf(j,1,n-1) ta[j]=q.top(),ta[j+n-1]=q.top()+2*pi,q.pop();//\u56e0\u4e3a\u662f\u9006\u65f6\u9488\u6570\u70b9\uff0c\u9700\u8981\u518d\u590d\u5236\u4e00\u904d\u63a5\u5728\u5e8f\u5217\u540e\u9762\uff0c\u8bb0\u5f97\u52a0\u4e0a360\u00b0\n\t\tfor (int head=1,j=1;j<n;j++)\n\t\t{\n\t\t\tif (head<j) head=j;\n\t\t\twhile (ta[head+1]-ta[j]<pi && head<2*n-1) head++;//\u6570\u70b9\n\t\t\tao-=C(head-j,2);//\u51cf\u53bb\u51f8\u56db\u8fb9\u5f62\u4e2a\u6570\n\t\t}\n\t}\n\tprintf(\"%.3f\",((sum*2-ao)/1.0/C(n,3))+3);//\u8ba1\u7b97\n\treturn 0;\n}\n```\n\n",
        "postTime": 1620712786,
        "uid": 152648,
        "name": "huangxianghui",
        "ccfLevel": 5,
        "title": "P3630 [APIO2010]\u4fe1\u53f7\u8986\u76d6 \u9898\u89e3"
    }
]
[
    {
        "content": "\n## \u5199\u5728\u524d\u9762\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff1f](https://www.cnblogs.com/Silymtics/p/15168814.html)\n\n\u611f\u8c22 @zimujunqwq \u7684\u601d\u8def\u3002\n\n## Description\n\n[\u9898\u76ee\u63cf\u8ff0](https://www.luogu.com.cn/problem/P7843)\u3002\n\n~~\u4e0d\u77e5\u5982\u4f55\u7b80\u5316\u9898\u610f\u3002~~\n\n## Solution\n\n### Subtask1\n\n\u8003\u8651\u7528\u8be2\u95ee $2$ \u628a $3, 4$ \u7684\u5143\u7d20\u4f4d\u7f6e\u786e\u5b9a\uff0c\u90a3\u4e48\u5269\u4e0b\u7684 $1,2$ \u7684\u4e24\u4e2a\u4f4d\u7f6e\u4e5f\u80fd\u786e\u5b9a\u3002\n\n\u6ce8\u610f\u6211\u4eec\u6682\u65f6\u8fd8\u4e0d\u80fd\u533a\u5206\u4ed6\u4eec\u3002\n\n\u6b64\u65f6\u5229\u7528\u8be2\u95ee $1$\uff0c\u8be2\u95ee $3,4$ \u4e24\u4e2a\u4f4d\u7f6e\u5bf9 $1,2$ \u4e24\u4e2a\u4f4d\u7f6e\u53d6\u6a21\u7684\u7ed3\u679c\u3002\n\n\u4ed6\u4eec\u7684\u7ed3\u679c\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u786e\u5b9a\u51fa $1,2,3,4$ \u5bf9\u5e94\u7684\u4f4d\u7f6e\u4e86\u3002\n\n\u671f\u671b\u5f97\u5206 $10pts$\u3002\n\n### Subtask2\n\n\u901a\u8fc7\u89c2\u5bdf\u6570\u636e\u8303\u56f4\u53d1\u73b0 $m_2^2 = m_3$\u3002\n\n\u6240\u4ee5\u6ce8\u5b9a\u8fd9\u662f\u4e00\u4e2a $O(n^2)$ \u7b97\u6cd5\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5229\u7528 $2$ \u64cd\u4f5c\u8be2\u95ee $n$ \u6b21\u3002\u628a $p$ \u4ece $n$ \u4e0d\u65ad\u4e0b\u8c03\uff0c\u5373\u6bcf\u6b21\u8be2\u95ee $p$ \u90fd\u6bd4\u4e0a\u4e00\u6b21\u5c0f $1$\u3002\n\n\u8fd9\u6837\u6bcf\u6b21\u8be2\u95ee\u6211\u4eec\u90fd\u4f1a\u591a\u77e5\u9053\u4e00\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e\uff0c\u800c\u8fd9\u4e2a\u5143\u7d20\u7684\u503c\u4e5f\u662f\u786e\u5b9a\u7684\u3002\n\n\u671f\u671b\u5f97\u5206 $10 pts$\u3002\n\n### Subtask3,4,5\n\n\u53cd\u6b63\u6211\u6ca1\u770b\u51fa Subtask3,4 \u6709\u4ec0\u4e48\u5355\u72ec\u7684\u505a\u6cd5\uff0c\u6709\u5361\u5230\u8fd9\u4e00\u6863\u7684\u53ef\u4ee5\u5355\u72ec\u548c\u6211\u8bf4\u4e00\u58f0qwq\u3002\n\n\u6ce8\u610f\u5230\u540e\u9762\u7684\u6570\u636e $n = m_1$\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u80fd\u6bcf\u6b21\u8be2\u95ee $1$ \u90fd\u8981\u786e\u5b9a\u51fa\u4e00\u4e2a\u4f4d\u7f6e\u3002\n\n\u73b0\u5728\u5047\u8bbe\u6211\u4eec\u77e5\u9053\u4e86 $\\left \\lceil \\frac{n}{2} \\right \\rceil$ \u7684\u4f4d\u7f6e\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0\uff0c $\\left \\lceil \\frac{n}{2} \\right \\rceil + 1 \\sim n$ \u8fd9\u4e9b\u6570\u5bf9 $\\left \\lceil \\frac{n}{2} \\right \\rceil$ \u53d6\u6a21\u7684\u503c\u662f\u4e92\u4e0d\u76f8\u540c\u7684\u3002\u8fd9\u5c31\u542f\u53d1\u6211\u4eec\u53ef\u4ee5\u5148\u786e\u5b9a\u51fa $\\left \\lceil \\frac{n}{2} \\right \\rceil$ \u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u901a\u8fc7\u51e0\u6b21\u8be2\u95ee\u786e\u5b9a\u4ed6\u540e\u9762\u7684\u6570\u7684\u4f4d\u7f6e\u3002~~\u6ce8\u610f\u6a21\u6570\u4e3a $0$ \u65f6\u8981\u7279\u5224\u4e00\u4e0b\u3002~~\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u95ee\u9898\u7684\u89c4\u6a21\u5c31\u4f1a\u7f29\u5c0f\u4e00\u534a\u3002\n\n\u6211\u4eec\u5c31\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u5269\u4e0b\u4e00\u534a\u7684\u60c5\u51b5\u3002\n\n\u5982\u4f55\u786e\u5b9a $\\left \\lceil \\frac{n}{2} \\right \\rceil$ \u7684\u4f4d\u7f6e\uff1f\n\n\u53ef\u4ee5\u8be2\u95ee\u4e24\u6b21\u8be2\u95ee $2$ \u3002\u7b2c\u4e00\u6b21\u6c42\u51fa $>\\left \\lceil \\frac{n}{2} \\right \\rceil$ \u7684\u6240\u6709\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u6b21\u6c42\u51fa $\\ge \\left \\lceil \\frac{n}{2} \\right \\rceil$ \u7684\u6240\u6709\u4f4d\u7f6e\uff0c\u90a3\u4e48\u65b0\u589e\u52a0\u7684\u4f4d\u7f6e\u5c31\u662f $\\left \\lceil \\frac{n}{2} \\right \\rceil$\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u6837\u9012\u5f52\u5904\u7406\u9700\u8981 $\\log n$ \u6b21\uff0c\u5e76\u4e14\u6570\u636e\u8303\u56f4\u662f $2 \\log n \\le m_2$\u3002\n\n\u671f\u671b\u5f97\u5206 $50pts$\u3002\n\n### Subtask6\n\n\u89c2\u5bdf\u6570\u636e\u53d1\u73b0 $2^{17} \\ge 5 \\times 10^4$\u3002\n\n\u90a3\u5c31\u662f\u8bf4\u53ea\u8ba9\u6211\u4eec\u8fdb\u884c $\\log n$ \u6b21\u8be2\u95ee\u3002\n\n\u6211\u4eec\u8003\u8651\u901a\u8fc7\u8be2\u95ee $1$ \u628a $\\left \\lceil \\frac{n}{2} \\right \\rceil$ \u7684\u4f4d\u7f6e\u6c42\u51fa\u6765\u3002\u6211\u4eec\u60f3\u77e5\u9053\u4ed6\u7684\u4f4d\u7f6e\u53ef\u4ee5\u901a\u8fc7\u77e5\u9053 $\\left \\lceil \\frac{n}{4} \\right \\rceil$  \u7684\u4f4d\u7f6e\u6c42\u51fa\u6765\u3002\u7136\u540e\u6211\u4eec\u4e0d\u65ad\u8fd9\u6837\u9012\u5f52\u4e0b\u53bb\uff0c\u53d1\u73b0\u6211\u4eec\u53ea\u8981\u77e5\u9053\u4e86 $1$ \u7684\u4f4d\u7f6e\uff0c\u5e76\u4e14\u77e5\u9053\u4e86\u5404\u4e2a\u6bb5\u7684\u4f4d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u56de\u6eaf\u5230\u6574\u4e2a\u5e8f\u5217\u3002\u800c $1$ \u7684\u4f4d\u7f6e\u4f1a\u5728\u6700\u540e\u6211\u4eec\u901a\u8fc7\u8be2\u95ee $2$ \u8be2\u95ee $p=1,2$ \u7684\u65f6\u5019\u6c42\u51fa\u3002\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5728 $\\log n$ \u6b21\u8be2\u95ee $2$ \u5185\u6c42\u51fa\u6240\u6709\u4f4d\u7f6e\u3002\n\n\u671f\u671b\u5f97\u5206 $25pts$\u3002\n\n### Subtask7\n\n\u8fd9\u4e2a\u4e4b\u540e\u6211\u4eec\u53d1\u73b0 $2^{15} \\le 5 \\times 10^4$ \u3002\n\n\u600e\u4e48\u538b\u7f29\u8fd9\u4e24\u6b21\u8be2\u95ee\uff1f\n\n\u901a\u8fc7\u81ea\u5df1\u624b\u6a21\u6bcf\u6b21\u8be2\u95ee\u7684\u4f4d\u7f6e\u53d1\u73b0\u6700\u540e\u51e0\u4e2a\u8be2\u95ee\u662f $1,2,3,5$\uff0c\u6211\u4eec\u8003\u8651\u628a\u524d\u4e24\u4e2a\u8be2\u95ee\u53bb\u6389\u3002\n\n\u6700\u540e\u8be2\u95ee $3$ \u7684\u65f6\u5019\uff0c\u6211\u4eec\u5f97\u5230\u7684\u4e24\u4e2a\u4f4d\u7f6e\u4e00\u5b9a\u662f $3,4$\uff0c\u672a\u77e5\u7684\u4e24\u4e2a\u4f4d\u7f6e\u662f $1,2$\u3002\n\n\u8fd9\u662f\u4ec0\u4e48\uff1fSubtask1 \u554a\uff01\n\n\u7136\u540e\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0cSubtask3,4 \u7684\u6570\u636e\u4e0b\uff0c\u6700\u540e\u51e0\u6b21\u8be2\u95ee\u7684\u4f4d\u7f6e\u662f $1,2,3,4,6$\uff0c\u4e5f\u5c31\u662f\u8bf4 $3,4$ \u6ca1\u6709\u88ab\u5212\u5206\u5230\u4e00\u6bb5\u5185\u3002\u8fd9\u4e2a\u60c5\u51b5\u66f4\u597d\u5904\u7406 $1,2$ \u56e0\u4e3a\u6211\u4eec\u77e5\u9053\u4e86 $3$ \u7684\u4f4d\u7f6e\u3002\n\n\u6211\u4eec\u8981\u7231\u60dc\u81ea\u5df1\u7684\u8be2\u95ee\u6b21\u6570\uff0c\u56e0\u4e3a $n = m_1$\uff0c\u4e0d\u80fd\u6d6a\u8d39\uff0c\u6240\u4ee5\u786e\u5b9a\u51fa\u524d\u51e0\u4e2a\u6570\u540e\uff0c\u518d\u6c42\u5176\u4ed6\u6570\u7684\u65f6\u5019\u8981\u4ece\u5df2\u7ecf\u786e\u5b9a\u7684\u6570\u7684\u4e0b\u4e00\u4e2a\u5f00\u59cb\u6c42\u3002\n\n## \u4ee3\u7801\u5b9e\u73b0\n\n\u6211\u7528 $col$ \u6309\u7167\u7b2c\u51e0\u6b21\u8be2\u95ee\u6807\u8bb0\u4e86\u6bcf\u4e2a\u6bb5\u7684\u989c\u8272\uff0c\u7136\u540e\u5229\u7528\u4e00\u4e2a $c$ \u6570\u7ec4\u5c06\u989c\u8272\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u8fd9\u6837\u6bcf\u6bb5\u989c\u8272\u90fd\u88ab\u653e\u5728\u4e86\u4e00\u8d77\uff0c\u989c\u8272\u76f8\u540c\u7684\u6bb5\u5728\u503c\u57df\u4e0a\u4e5f\u662f\u8fde\u7eed\u7684\uff0c\u5c31\u53ef\u4ee5 $O(n)$ \u7684\u6c42\u51fa\u6574\u4e2a\u5e8f\u5217\u4e86\u3002\n\n\u5b9e\u73b0\u7ec6\u8282\u53c2\u8003\u4ee3\u7801\u5427\u3002\n\n## Code\n\n```cpp\n/*\nWork by: Suzt_ilymics\nProblem: \u4e0d\u77e5\u540d\u5c51\u9898\nKnowledge: \u5783\u573e\u7b97\u6cd5\nTime: O(\u80fd\u8fc7)\n*/\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#include<queue>\n#define LL long long\n#define orz cout<<\"lkp AK IOI!\"<<endl\n\nusing namespace std;\nconst int MAXN = 1e5+5;\nconst int INF = 1e9+7;\nconst int mod = 1e9+7;\n\nint n, m1, m2, m3;\nint a, b, x, y, mod1, mod2;\nint ans[MAXN];\nint vis[MAXN], c[MAXN];\nint stc[MAXN], sc = 0;\n\nint read(){\n    int s = 0, f = 0;\n    char ch = getchar();\n    while(!isdigit(ch))  f |= (ch == '-'), ch = getchar();\n    while(isdigit(ch)) s = (s << 1) + (s << 3) + ch - '0' , ch = getchar();\n    return f ? -s : s;\n}\n\nnamespace Subtask1 {\n    void Solve() {\n        printf(\"? 4 1 2 3 4 3\\n\");\n        fflush(stdout);\n        int k = read();\n        x = read(), y = read();\n        for(int i = 1; i <= 4; ++i) if(i != x && i != y) a = i;\n        for(int i = 1; i <= 4; ++i) if(i != x && i != y && i != a) b = i;\n        printf(\"! %d %d\\n\", x, a);\n        fflush(stdout);\n        mod1 = read();\n        printf(\"! %d %d\\n\", x, b);\n        fflush(stdout);\n        mod2 = read();\n        if(mod1 + mod2 == 0) {\n            ans[x] = 4, ans[y] = 3;\n        } else {\n            ans[x] = 3, ans[y] = 4;\n            if(mod1 == 1) {\n                ans[a] = 2, ans[b] = 1;\n            } else {\n                ans[b] = 2, ans[a] = 1;\n            }\n            printf(\"A %d %d %d %d\\n\", ans[1], ans[2], ans[3], ans[4]);\n            fflush(stdout);\n            return ;\n        }\n        \n        printf(\"! %d %d\\n\", y, a);\n        fflush(stdout);\n        mod1 = read();\n        printf(\"! %d %d\\n\", y, b);\n        fflush(stdout);\n        mod2 = read();\n        if(mod1 == 1) {\n            ans[a] = 2, ans[b] = 1;\n        } else {\n            ans[b] = 2, ans[a] = 1;\n        }\n        printf(\"A %d %d %d %d\\n\", ans[1], ans[2], ans[3], ans[4]);\n        fflush(stdout);\n        return ;\n    }\n}\nnamespace Subtask2 {\n    void Solve() {\n        for(int i = n; i >= 1; --i) {\n            printf(\"? %d \", n);\n            for(int j = 1; j <= n; ++j) printf(\"%d \", j);\n            printf(\"%d\\n\", i);\n            fflush(stdout);\n            int k = read();\n            for(int j = 1, x; j <= k; ++j) {\n                x = read();\n                if(vis[x]) continue;\n                vis[x] = true;\n                ans[x] = i;\n            }\n        }\n        printf(\"A\");\n        for(int i = 1; i <= n; ++i) {\n            printf(\" %d\", ans[i]);\n        }\n        puts(\"\");\n        fflush(stdout);\n    }\n}\n\nbool cmp(int x, int y) { return vis[x] > vis[y]; }\n\nvoid Divide(int l, int r, int col) {\n    int mid = (r + 1) / 2 + 1;\n    if(mid == 2) {\n        for(int i = 1; i <= n; ++i) if(!vis[i]) vis[i] = col;\n        sort(c + 1, c + n + 1, cmp);\n        return ;\n    }\n    sc = 0;\n    for(int i = 1; i <= n; ++i) {\n        if(!vis[i]) stc[++sc] = i;\n    }\n    printf(\"? %d \", sc);\n    for(int i = 1; i <= sc; ++i) printf(\"%d \", stc[i]);\n    printf(\"%d\\n\", mid);\n    fflush(stdout);\n    int k = read();\n    for(int i = 1, x; i <= k; ++i) {\n        x = read();\n        vis[x] = col;\n    }\n    Divide(l, mid - 1, col + 1);\n}\n\nint main()\n{\n    n = read(), m1 = read(), m2 = read(), m3 = read();\n    if(n == 4) {\n        Subtask1::Solve();\n    } else if(n == 500){\n        Subtask2::Solve();\n    } else {\n        for(int i = 1; i <= n; ++i) c[i] = i;\n        Divide(1, n, 1);\n//        for(int i = 1; i <= n; ++i) cout<<vis[i]<<\" \"; puts(\"\");\n//        for(int i = 1; i <= n; ++i) cout<<c[i]<<\" \"; puts(\"\");\n        int Max, lst, wz;\n        if(vis[c[3]] != vis[c[4]]) {\n            printf(\"! %d %d\\n\", c[3], c[1]);\n            fflush(stdout);\n            int mod1 = read();\n            printf(\"! %d %d\\n\", c[3], c[2]);\n            fflush(stdout);\n            int mod2 = read();\n            ans[c[3]] = 3;\n            if(mod1 == 1) ans[c[1]] = 2, ans[c[2]] = 1;\n            else ans[c[1]] = 1, ans[c[2]] = 2;\n            Max = 3, lst = wz = c[3];\n        } else {\n            printf(\"! %d %d\\n\", c[3], c[1]);\n            fflush(stdout);\n            int mod1 = read();\n            printf(\"! %d %d\\n\", c[3], c[2]);\n            fflush(stdout);\n            int mod2 = read();\n            if(mod1 + mod2 == 0) {\n                ans[c[3]] = 4, ans[c[4]] = 3;\n                printf(\"! %d %d\\n\", c[4], c[1]);\n                fflush(stdout);\n                mod1 = read();\n                if(mod1 == 1) ans[c[1]] = 2, ans[c[2]] = 1;\n                else ans[c[1]] = 1, ans[c[2]] = 2;\n            } else {\n                ans[c[3]] = 3, ans[c[4]] = 4;\n                if(mod1 == 1) ans[c[1]] = 2, ans[c[2]] = 1;\n                else ans[c[1]] = 1, ans[c[2]] = 2;\n            }\n            Max = 4, lst = wz = (ans[c[4]] == 4 ? c[4] : c[3]);\n        }\n        for(int i = ((vis[c[3]] == vis[c[4]]) ? 5 : 4); i <= n; ++i) {\n            if(vis[c[i]] != vis[c[i - 1]]) {\n                lst = wz; // \u4e0a\u4e00\u4e2a\u989c\u8272 \n                Max = 0, wz = 0; // \u65b0\u7684\u989c\u8272 \n            }\n            printf(\"! %d %d\\n\", c[i], lst);\n            fflush(stdout);\n            int x = read();\n            if(x) {\n                ans[c[i]] = ans[lst] + x;\n            } else {\n                ans[c[i]] = ans[lst] * 2;\n            }\n            if(Max < ans[c[i]]) {\n                Max = ans[c[i]];\n                wz = c[i];\n            }\n        }\n        printf(\"A\");\n        for(int i = 1; i <= n; ++i) {\n            printf(\" %d\", ans[i]);\n        }\n        puts(\"\");\n        fflush(stdout);\n    }\n    return 0;\n}\n```\n",
        "postTime": 1629506429,
        "uid": 230580,
        "name": "Suzt_ilymtics",
        "ccfLevel": 6,
        "title": "P7843 \u300cPMOI-4\u300d\u731c\u6392\u5217 \u9898\u89e3"
    },
    {
        "content": "# P7843 \u9898\u89e3\n\n## \u9898\u76ee\u5206\u6790\n\n\u9996\u5148\u8003\u8651 $n=3$ \u7684\u60c5\u51b5\u3002\n\n\u53ea\u9700\u8981\u5148\u7528 $?\\ 3\\ 1\\ 2\\ 3\\ 3$ \u627e\u51fa\u503c\u4e3a $3$ \u7684\u90a3\u4e2a\u6570\uff0c\u518d\u7528\u8fd9\u4e2a\u6570\u4f5c\u4e3a\u88ab\u6a21\u6570\uff0c\u5bf9\u53e6\u4e24\u4e2a\u6570\u505a\u4e00\u4e0b\u7b2c\u4e00\u4e2a\u8be2\u95ee\u5373\u53ef\uff08$3\\ mod\\ 1=0,3\\ mod\\ 2=1$\uff09\u3002\n\n\u63a5\u4e0b\u6765\u662f $n=4$ \u7684\u60c5\u51b5\u3002\n\n\u540c\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 $?\\ 4\\ 1\\ 2\\ 3\\ 4\\ 4$ \u627e\u5230\u503c\u4e3a $3,4$ \u7684\u4e24\u4e2a\u6570\uff0c\u63a5\u4e0b\u6765\uff0c\u628a $3,4$ \u4f5c\u4e3a\u88ab\u6a21\u6570\uff0c $1,2$ \u4f5c\u4e3a\u6a21\u6570\uff0c\u8fdb\u884c\u56db\u6b21\u7b2c\u4e00\u4e2a\u8be2\u95ee\uff0c\u5bf9\u7167\u4e0b\u9762\u8fd9\u5f20\u8868\u5373\u53ef\u5f97\u5230\u7b54\u6848\u3002\n\n|  | 1 | 2 |\n| :----------- | :----------- | :----------- |\n| **3** | 0 | 1 |\n| **4** | 0 | 0 |\n\n\u63a5\u4e0b\u6765\u8003\u8651 $n=5$ \u7684\u60c5\u51b5\u3002\n\n\u5ef6\u7eed\u521a\u624d\u7684\u601d\u8def\uff0c\u53ef\u4ee5\u7528 $?\\ 5\\ 1\\ 2\\ 3\\ 4\\ 5\\ 4$ \u627e\u5230\u503c\u4e3a $4,5$ \u7684\u4e24\u4e2a\u6570\uff0c\u5269\u4e0b\u7684\u4e09\u4e2a\u6570\u5c31\u4e00\u5b9a\u662f $1,2,3$\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528 $n=3$ \u65f6\u7684\u505a\u6cd5\uff0c\u6c42\u51fa\u5b83\u4eec\u7684\u503c\u3002\n\n\u63a5\u4e0b\u6765\u5982\u4f55\u6c42\u51fa $4,5$ \u8fd9\u4e24\u4e2a\u6570\u5230\u5e95\u662f\u591a\u5c11\u5462\uff1f\u53ef\u4ee5\u7528\u503c\u4e3a $3$ \u7684\u6570\u5bf9\u8fd9\u4e24\u4e2a\u6570\u53d6\u6a21\uff08$4\\  mod\\ 3=1,5\\ mod\\ 3=2$\uff09\u3002\n\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u6c42\u51fa\u6240\u6709\u6570\u4e86\u3002\n\n\u63a5\u7740\u662f $n=6$\u3002\n\n\u505a\u6cd5\u548c $n=5$ \u5dee\u4e0d\u591a\uff0c\u53ef\u4ee5\u7528 $?\\ 6\\ 1\\ 2\\ 3\\ 4\\ 5\\ 6\\ 4$ \u627e\u5230\u503c\u4e3a $4,5,6$ \u7684\u4e09\u4e2a\u6570\uff0c\u7528 $n=3$ \u7684\u64cd\u4f5c\u89e3\u51b3\u5269\u4e0b\u4e09\u4e2a\u6570\uff0c\u63a5\u4e0b\u6765\u7528 $3$ \u5bf9\u8fd9\u4e09\u4e2a\u6570\u53d6\u6a21\u3002\n\n\u2026\u2026\n\n\u5230\u8fd9\u91cc\uff0c\u76f8\u4fe1\u4f60\u5df2\u7ecf\u77e5\u9053\u6700\u7ec8\u7b97\u6cd5\u7684\u5927\u6982\u4e86\u3002\n\n\u9996\u5148\u7528 $?\\ n\\ 1\\ 2\\ \\dots\\ n\\ \\lfloor (n+1)/2\\rfloor+1$\uff0c\u6c42\u51fa\u6240\u6709\u5927\u4e8e $(n+1)/2$ \u7684\u6570\uff0c\u5bf9\u5269\u4e0b\u7684\u6570\u6267\u884c $n=\\lfloor (n+1)/2\\rfloor$ \u65f6\u7684\u7b97\u6cd5\uff0c\u8fdb\u884c\u5b8c\u4e4b\u540e\u518d\u627e\u5230 $\\lfloor (n+1)/2\\rfloor$\uff0c\u7528\u5b83\u5bf9\u5176\u4ed6\u6240\u6709\u6570\u53d6\u6a21\uff08\u6ce8\u610f\u8fd9\u4e2a $\\lfloor (n+1)/2\\rfloor$\uff0c\u8fd9\u662f\u4fdd\u8bc1\u53d6\u6a21\u7684\u7ed3\u679c\u5168\u90e8\u4e0d\u4e00\u6837\u7684\u6700\u5927\u503c\uff09\uff0c\u5176\u4ed6\u6570\u7684\u503c\u5c31\u662f $\\lfloor (n+1)/2\\rfloor+\\texttt{\u8be2\u95ee\u7684\u7ed3\u679c}$\uff08\u7ed3\u679c\u4e3a $0$ \u7684\u8bdd\u663e\u7136\u662f\u52a0\u4e0a $\\lfloor (n+1)/2\\rfloor$\uff09\u3002\n\n\u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u9012\u5f52\u3002\n\n\u5206\u6790\u4e00\u4e0b\u6bcf\u4e2a\u64cd\u4f5c\u7528\u7684\u6700\u591a\u6b21\u6570\u3002\n\n\u7531\u4e8e\u6bcf\u6b21\u64cd\u4f5c\u4e00\u6bcf\u6b21\u90fd\u4f1a\u786e\u5b9a\u4e00\u4e2a\u6570\u7684\u503c\uff0c\u6240\u4ee5\u6700\u591a\u7528 $n$ \u6b21\u3002\n\n\u64cd\u4f5c\u4e8c\u7684\u6b21\u6570\u5c31\u662f\u9012\u5f52\u7684\u5c42\u6570\uff0c\u5373 $\\log n$\u3002\n\n\u56e0\u4e3a\u6bcf\u5c42\u53ea\u4f1a\u5bf9\u5f53\u524d\u8f83\u5c0f\u4e00\u534a\u7684\u6570\u8fdb\u884c\u64cd\u4f5c\u4e8c\uff0c\u6240\u4ee5\u8bf4\u7b2c\u4e00\u5c42\u5927\u7ea6\u662f $n$ \u4e2a\uff0c\u7b2c\u4e8c\u5c42 $n/2$ \u4e2a\u2026\u2026\u5012\u6570\u7b2c\u4e8c\u5c42 $2$ \u4e2a\uff0c\u6700\u540e\u4e00\u5c42\u90a3\u4e2a\u5176\u5b9e\u53ef\u4ee5\u4e0d\u7528\uff0c\u52a0\u8d77\u6765\u660e\u663e\u5927\u7ea6\u662f $2\\times n$\uff0c\u80af\u5b9a\u4e0d\u4f1a\u8d85\u8fc7 $3\\times n$\u3002\n\n\u4f46\u6700\u540e\u4e00\u7ec4\u6d4b\u8bd5\u70b9\u7684 $n$ \u4e3a $50000$\uff0c\u800c $2^{15}=32768$\uff0c$2^{16}=65536$\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u8be2\u95ee $16$ \u6b21\uff0c\u4f1a\u8d85\u8fc7\u9898\u76ee\u7ed9\u5b9a\u7684\u9650\u5ea6\u3002\u4f46\u662f\u6ce8\u610f\u5230 $n=3$ \u6216 $n=4$ \u90a3\u4e00\u5c42\u65f6\u6309\u8fd9\u6837\u8ba1\u7b97\u4f1a\u7528 $2$ \u6b21\u64cd\u4f5c\u4e8c\uff0c\u4f46\u660e\u663e\u6709\u53ea\u7528 $1$ \u6b21\u7684\u65b9\u6848\uff0c\u6240\u4ee5\u53ea\u9700\u7279\u5224\u4e00\u4e0b\u5c31\u884c\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\u5427\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<cstdio>\nusing namespace std;\nint n,f[50001],a[50001];//f\u8868\u793a\u8fd9\u4e2a\u6570\u5728\u7b2c\u51e0\u5c42\u88ab\u786e\u5b9a\uff0ca\u8868\u793a\u8fd9\u4e2a\u6570\u7684\u503c\nvoid dfs(int r,int v)//r\u8868\u793a\u5f53\u524d\u6709\u591a\u5c11\u4e2a\u6570\uff0cv\u8868\u793a\u5f53\u524d\u5c42\u6570\n{\n\tif(r==3)//\u7279\u5224\n\t{\n\t\tprintf(\"? %d \",3);\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(!f[i])printf(\"%d \",i);\n\t\tprintf(\"%d\\n\",3);\n\t\tfflush(stdout);\n\t\tint pos;\n\t\tscanf(\"%*d%d\",&pos);\n\t\ta[pos]=3;\n\t\tf[pos]=v;\n\t\tprintf(\"! %d \",pos);\n\t\tint res;\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(!f[i])\n\t\t\t{\n\t\t\t\tf[i]=v;\n\t\t\t\tprintf(\"%d\\n\",i);\n\t\t\t\tfflush(stdout);\n\t\t\t\tscanf(\"%d\",&res);\n\t\t\t\ta[i]=1+res;\n\t\t\t\tbreak;\n\t\t\t}\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(!f[i]){f[i]=v,a[i]=2-res;break;}\n\t\treturn;\n\t}\n\tif(r==4)//\u7279\u5224\n\t{\n\t\tprintf(\"? %d \",4);\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(!f[i])printf(\"%d \",i);\n\t\tprintf(\"%d\\n\",3);\n\t\tfflush(stdout);\n\t\tint x,y;\n\t\tscanf(\"%*d%d%d\",&x,&y);\n\t\tf[x]=f[y]=v;\n\t\tint p=0,q;\n\t\tfor(int i=1;i<=n;i++)\n\t\t\tif(!f[i]&&p){q=i;break;}\n\t\t\telse if(!f[i])p=i;\n\t\tf[p]=f[q]=v;\n\t\tint res1,res2,res3;\n\t\tprintf(\"! %d %d\\n\",x,p);\n\t\tfflush(stdout);\n\t\tscanf(\"%d\",&res1);\n\t\tif(res1==1)\n\t\t{\n\t\t\ta[x]=3,a[y]=4;\n\t\t\ta[p]=2,a[q]=1;\n\t\t\treturn;\n\t\t}\n\t\tprintf(\"! %d %d\\n\",x,q);\n\t\tfflush(stdout);\n\t\tscanf(\"%d\",&res2);\n\t\tif(res2==1)\n\t\t{\n\t\t\ta[x]=3,a[y]=4;\n\t\t\ta[p]=1,a[q]=2;\n\t\t\treturn;\n\t\t}\n\t\ta[x]=4,a[y]=3;\n\t\tprintf(\"! %d %d\\n\",y,p);\n\t\tfflush(stdout);\n\t\tscanf(\"%d\",&res3);\n\t\tif(res3==0)a[p]=1,a[q]=2;\n\t\telse a[p]=2,a[q]=1;\n\t\treturn;\n\t}\n\tint mid=(1+r)/2;\n\t//\u627e\u51fa\u8f83\u5927\u7684\u6570\n\tprintf(\"? %d \",r);\n\tfor(int i=1;i<=n;i++)\n\t\tif(!f[i])printf(\"%d \",i);\n\tprintf(\"%d\\n\",mid+1);\n\tfflush(stdout);\n\tint num;\n\tscanf(\"%d\",&num);\n\tfor(int i=1;i<=num;i++)//\u6807\u8bb0\u4e00\u4e0b\u8fd9\u4e9b\u6570\n\t{\n\t\tint x;\n\t\tscanf(\"%d\",&x);\n\t\tf[x]=v;\n\t}\n\tdfs(mid,v+1);//\u9012\u5f52\n\tint pos;\n\tfor(int i=1;i<=n;i++)//\u627e\u51famid\n\t\tif(a[i]==mid){pos=i;break;}\n\tfor(int i=1;i<=n;i++)//\u786e\u5b9a\u8f83\u5927\u7684\u6570\n\t{\n\t\tif(f[i]!=v)continue;\n\t\tprintf(\"! %d %d\\n\",i,pos);\n\t\tfflush(stdout);\n\t\tint x;\n\t\tscanf(\"%d\",&x);\n\t\ta[i]=mid+x;\n\t\tif(x==0)a[i]=mid+mid;\n\t}\n}\nint main()\n{\n\tint m1,m2,m3;\n\tscanf(\"%d%d%d%d\",&n,&m1,&m2,&m3);\n\tdfs(n,1);//\u9012\u5f52\n\tprintf(\"A\");\n\tfor(int i=1;i<=n;i++)\n\t\tprintf(\" %d\",a[i]);\n\tprintf(\"\\n\");\n\tfflush(stdout);\n\treturn 0;\n}\n```\n\n\u8c22\u8c22\u89c2\u770b\uff01",
        "postTime": 1629724661,
        "uid": 241520,
        "name": "fanglong",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P7843 \u3010\u300cPMOI-4\u300d\u731c\u6392\u5217\u3011"
    },
    {
        "content": "# \u9898\u610f\u7b80\u8ff0\n- \u731c\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6392\u5217 $a$ \uff0c\u53ef\u4ee5\u8fdb\u884c\u4ee5\u4e0b\u4e24\u79cd\u64cd\u4f5c \uff1a\n  - 1. \u8f93\u51fa ```! x y```\uff0c\u6ee1\u8db3 $a_x\\gt a_y$ \u4e14 $x\\ne y$\uff1b\u8fd4\u56de $a_x \\bmod a_y$\uff0c\u3002\n  - 2. \u8f93\u51fa ```? l S p```\uff0c$S$ \u662f\u5927\u5c0f\u4e3a $l$ \u96c6\u5408\uff0c \u8bb0 $S=\\{x_1,x_2,x_3,\\ldots,x_l\\}$\uff0c\u6ee1\u8db3\u5bf9\u4e8e\u4efb\u610f $1\\le i\\le l$\uff0c$1\\le x_i\\le n$\uff0c\u4e14 $x_i$ \u4e92\u4e0d\u76f8\u540c\uff0c\u8fd8\u8981\u6ee1\u8db3 $1\\le p\\le n$\uff0c$1\\le l\\le n$\u3002\u8fd4\u56de $a_{x_k} \\ge p$ \u7684\u6240\u6709\u7684 $x_k$\uff0c\u8fd4\u56de\u5f62\u5f0f\u5982\u4e0b\uff1a\u9996\u5148\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6574\u6570 $L$\uff0c\u63a5\u7740\u4f1a\u8fd4\u56de $L$ \u4e2a\u6574\u6570\uff0c\u8868\u793a\u6709 $L$ \u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684 $x_k$\uff08\u6ce8\u610f\u8fd4\u56de\u7684\u662f\u96c6\u5408 $S$ \u4e2d\u7684\u5143\u7d20\uff0c\u800c\u4e0d\u662f\u4e0b\u6807\uff01\uff09\u3002\n  \n- \u6267\u884c\u64cd\u4f5c $1$ \u4e0d\u8d85\u8fc7 $m_1$ \u6b21\uff0c\u6267\u884c\u64cd\u4f5c $2$ \u4e0d\u8d85\u8fc7 $m_2$ \u6b21\uff0c\u5e76\u4e14\u64cd\u4f5c $2$ \u4e2d $S$ \u7684\u5143\u7d20\u603b\u548c\u4e0d\u8d85\u8fc7 $m_3$ \u4e2a\u3002\n\n# \u9898\u76ee\u5206\u6790\n\u89c2\u5bdf\u6570\u636e\uff0c\u53d1\u73b0 $m_1=n$\uff0c\u53ea\u6709 $m_2$ \u548c $m_3$ \u5bf9\u4e8e\u540c\u4e00\u4e2a $n$ \u6709\u5f88\u5927\u4e0d\u540c\uff0c\u5e76\u4e14\u5728\u6700\u5927\u9650\u5236\u4e0b $1<<m_2$ \u4e0e $n$ \u63a5\u8fd1\uff0c\u53ef\u4ee5\u731c\u60f3\u662f\u901a\u8fc7\u64cd\u4f5c $1$ \u5f97\u51fa\u5927\u90e8\u5206\u6570\uff0c\u64cd\u4f5c $2$ \u8fdb\u884c\u4e00\u4e2a\u7c7b\u4f3c\u4e8c\u5206\u7684\u64cd\u4f5c\u3002\n\n### 10\u5206\u505a\u6cd5\n- \u4e00\u6b21\u64cd\u4f5c $1$ \u4e2d\u9009\u62e9\u4ece $1$ \u5230 $n$ \u7684\u6240\u6709\u6570\uff0c\u53ef\u4ee5\u627e\u5230 $a$ \u4e2d\u6240\u6709\u5927\u4e8e\u7b49\u4e8e $p$ \u7684\u5143\u7d20\u7684\u4f4d\u7f6e\u3002\u7279\u522b\u5730\uff0c\u4ee4 $p=n$ \u65f6\uff0c\u53ea\u4f1a\u8fd4\u56de $a$ \u4e2d $n$ \u7684\u4f4d\u7f6e\u3002    \n\n- $4$ \u4e2a\u6570\u7684\u6392\u5217\uff0c\u8003\u8651\u5148\u901a\u8fc7 $1$ \u6b21\u64cd\u4f5c $2$ \u627e\u51fa $4$ \u7684\u4f4d\u7f6e\uff0c\u518d\u7528 $3$ \u6b21\u64cd\u4f5c $1$ \u8ba9 $4$ \u5bf9 $a$ \u7684\u5176\u5b83 $3$ \u9879\u53d6\u6a21\u3002\u56e0\u4e3a $4 \\bmod 1=0$\u3001$4 \\bmod 3=1$\u3001$4 \\bmod 2=0$\uff0c\u53ef\u4ee5\u627e\u51fa $3$ \u7684\u4f4d\u7f6e\u3002\u56e0\u4e3a $3\\bmod 1=0$\u3001$3 \\bmod 2=1$\uff0c\u6700\u540e\u7528 $1$ \u6b21\u64cd\u4f5c $3$ \u961f\u5269\u4e0b\u4e24\u4e2a\u672a\u77e5\u6570\u7684\u4efb\u610f\u4e00\u4e2a\u53d6\u6a21\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053\u6574\u4e2a\u6392\u5217\u4e86\u3002\n\n- \u4f7f\u7528 $4$ \u6b21\u64cd\u4f5c $1$\uff1b$1$ \u6b21\u64cd\u4f5c $2$\uff1b $4$ \u7684\u96c6\u5408\u5927\u5c0f\u3002\n\n\n### 20\u5206\u505a\u6cd5\n- $10$ \u5206\u505a\u6cd5\u7279\u5224\n- \u8003\u8651\u7528\u64cd\u4f5c $2$ \u5bfb\u627e\u5927\u4e8e\u7b49\u4e8e $n$ \u7684 $a$ \u7684\u5143\u7d20\u7684\u4f4d\u7f6e\uff0c \u518d\u5bfb\u627e $n-1$ \u7684\u3001 $n-2$ \u7684\u3001\u2026\u2026\u76f4\u5230 1 \u7684\u3002 \u53ea\u9700\u8981\u5728 $n$ \u4e4b\u540e\u7684\u64cd\u4f5c\u6bcf\u6b21\u53bb\u6389\u4e4b\u524d\u7684\u4f4d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u627e\u5230\u4ece $n$ \u5230  $1$ \u6bcf\u4e00\u4e2a\u6570\u7684\u4f4d\u7f6e\u3002   \n\n- \u4f7f\u7528 $0$ \u6b21\u64cd\u4f5c $1$\uff1b$n$ \u6b21\u64cd\u4f5c $2$\uff1b $n^2$ \u7684\u96c6\u5408\u5927\u5c0f\u3002\n\n\n### 95\u5206\u505a\u6cd5\n \n- $10$ \u5206\u505a\u6cd5\u7279\u5224\n- \u5bb9\u6613\u53d1\u73b0\u5f53 $n$ \u4e3a\u5076\u6570\u4e14 $i \\ge \\frac{n}{2}$ \u65f6  $n \\bmod i$ \u4e92\u4e0d\u76f8\u540c\uff0c\u800c\u5f53 $n$ \u4e3a\u5947\u6570\u4e14 $i \\ge \\frac{n+1}{2}$ \u65f6\u4e5f\u6709\u8fd9\u4e2a\u6027\u8d28\u3002\n- \u8003\u8651\u73b0\u5728\u662f\u4e00\u4e2a $n$ \u5927\u5c0f\u7684\u6392\u5217\uff0c\u53ef\u4ee5\u5148\u7528\u64cd\u4f5c $2$ \u627e\u5230\u5927\u4e8e\u7b49\u4e8e $\\frac{n}{2}$ \u6216 $\\frac{n+1}{2}$ \u7684\u6240\u6709 $a$ \u7684\u4f4d\u7f6e\uff0c\u8bb0\u4e3a\u96c6\u5408 $Q$\u3002\u7136\u540e\u518d\u7528\u4e00\u6b21\u64cd\u4f5c  $2$ \u5728 $Q$ \u4e2d\u627e\u5230 $n$ \u5728 $a$ \u7684\u4f4d\u7f6e\u3002\u6700\u540e\u7528\u64cd\u4f5c $1$ \u628a $Q$ \u4e2d\u6240\u6709\u5143\u7d20\u5bf9\u5e94\u503c\u627e\u5230\u3002\n- \u9012\u5f52\u3002\u7b2c\u4e8c\u6b21\u8003\u8651 $\\frac{n}{2}$ ($n$ \u4e3a\u5076\u6570) \u6216 $\\frac{n+1}{2}$ ($n$ \u4e3a\u5947\u6570) \u7684\u6392\u5217\uff0c$\\frac{n}{2}$ \u6216 $\\frac{n+1}{2}$ \u5728 $a$ \u7684\u4f4d\u7f6e\u5df2\u7ecf\u6c42\u51fa\uff0c\u4e0d\u7528\u901a\u8fc7\u64cd\u4f5c $2$ \u91cd\u65b0\u6c42\u51fa\u3002\u7136\u540e\u4e0d\u65ad\u91cd\u590d\u5373\u53ef\u3002\n\n- \u4f7f\u7528 $n$ \u6b21\u64cd\u4f5c $1$\uff1b$\\log n$ \u6b21\u64cd\u4f5c $2$\uff1b $2.5n$ \u7684\u96c6\u5408\u5927\u5c0f\u3002\n\n### 100\u5206\u505a\u6cd5\n\n- \u5728 $95$ \u5206 \u505a\u6cd5\u57fa\u7840\u4e0a\uff0c\u9012\u5f52\u5230 $4$ \u6216 $3$ \u65f6\u7528 $10$ \u5206\u505a\u6cd5\u7279\u5224\u5373\u53ef\u3002\n\n- \u4f7f\u7528 $n$ \u6b21\u64cd\u4f5c $1$\uff1b$\\log n-2$ \u6b21\u64cd\u4f5c $2$\uff1b $2.5n$ \u7684\u96c6\u5408\u5927\u5c0f\u3002\n\n# \u8d34\u4e2a\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<vector>\n\nusing namespace std;\n\nconst int N=1e5;\n\nint n,m1,m2,m3,nn,pl,vv,l,oo,ddd,op,ppp;\nint ans[N];//ai\u4ee3\u8868\u7684\u6570 \nint fans[N];//\u6570\u5b57\u5728\u7684a\u4f4d\u7f6e \nint u[N];//\u8be5\u4f4d\u7f6e\u5df2\u786e\u5b9a\u6570\u5b57 \nvector<int> f[20]; \nvector<int> g[20];\nint main()\n{    \t\n    std::ios::sync_with_stdio(false);\n\tcin>>n>>m1>>m2>>m3;\n   \n    if (n==4) //\u7279\u52244 \n    {\n\n    \tcout<<\"? 4 1 2 3 4 4\"<<endl; //\u627e4\u7684\u4f4d\u7f6e \n    \tcin>>ddd;\n    \tcin>>ddd;\n    \tans[ddd]=4;\n    \tfans[4]=ddd; \n    \t\n    \tfor (int i=1; i<=4; i++) //\u627e3\u7684\u4f4d\u7f6e \n    \t  if (i!=ddd)\n\t\t  {\n    \t\tcout<<\"! \"<<ddd<<\" \"<<i<<endl;\n    \t\tcin>>oo; \n    \t\tif (oo==1)\n    \t\t{\n    \t\t\tfans[3]=i;\n    \t\t\tans[i]=3;\n\t\t\t}\n\t\t  }\n\t\t  \n    \tfor (int i=1; i<=4; i++) //\u627e1\u62162\u7684\u4f4d\u7f6e \n    \t  if (i!=ddd&&i!=fans[3])\n    \t  {\n    \t    cout<<\"! \"<<fans[3]<<\" \"<<i<<endl;\n            cin>>oo;\n            if (oo==0)\n            {\n          \t  ans[i]=1;\n          \t  op=2; \n\t\t    }\n\t\t    else\n\t\t    {\n\t\t      ans[i]=2;\n\t\t      op=1;\n\t\t    }\n            break;\n          }\n        \n        cout<<\"A \"; \n        for (int i=1; i<=n; i++)\n          if (ans[i]==0)\n            cout<<op<<\" \";\n\t\t  else\n\t\t    cout<<ans[i]<<\" \";\n\t\t\t        \n        cout<<endl;\n        return 0;\n\t}\n    nn=n;\n    for (int i=1; i<=nn; i++)\n      f[0].push_back(i); \n    pl=0; \n\tfor (int i=1; i<=n; i++)\n\t\tu[i]=0;\t\t\t\n\twhile (nn>4)\n\t{\n        ppp=f[pl].size(); //\u5c061-nn\u7684\u6392\u5217\u5206\u6210\u4e24\u7ec4\uff0c\u5c0f\u7684\u5728f\uff0c\u5927\u7684\u5728g \n        cout<<\"? \"<<ppp<<' ';\n        for (int i:f[pl])\n        \tcout<<i<<' ';\n        if (nn%2==0)\n          vv=nn/2;\n        else\n          vv=(nn+1)/2;\n        cout<<vv<<endl;\n        cin>>l;\n        for (int i=1; i<=l; i++)\n        {\n            cin>>oo;\n            u[oo]=1;\n            g[pl].push_back(oo);\n\t\t}\n\t\tfor (int i=1; i<=n; i++)\n\t\t  if (!u[i])\n\t\t\tf[pl+1].push_back(i);\n\t\t\t\n        if (n==nn)  //\u6700\u5f00\u59cb\u9700\u8981\u786e\u5b9an\u7684\u4f4d\u7f6e \n        {\n        \tcout<<\"? \"<<n-vv+1<<' ';       \t\t\n        \tfor (int i:g[pl])\n\t\t\t    cout<<i<<' '; \n        \tcout<<n<<endl;    \n\t\t\tcin>>ddd;\n\t\t\tcin>>ddd;    \t   \t\t\t   \n        \tans[ddd]=n;\n        \tfans[n]=ddd;\n        \tddd=n;\n\t\t}\n\t\t\t\n\t\tfor (int i:g[pl]) //\u786e\u5b9a\u6392\u5217\u540e\u4e00\u534a\u7684\u6570\u7684\u4f4d\u7f6e \n\t\t  if (i!=fans[ddd])\n\t\t  {\n\t\t\tcout<<\"! \"<<fans[ddd]<<' '<<i<<endl;\n\t\t\tcin>>oo;\n\t\t\tif (oo==0)\n\t\t\t{\n\t\t\t\tans[i]=vv;\n\t\t\t\tfans[vv]=i;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tans[i]=ddd-oo;\n\t\t\t\tfans[ddd-oo]=i;\n\t\t\t}\n\t\t  }\n\t\t\t\n        ddd=vv;\n        nn=vv;\n       \tpl++;\n\t}\n\t\n\tif (nn==4) //\u5269\u4f594\u7279\u5224 \n\t{\n        ddd=vv;\n\t\tfor (int i:f[pl])\n\t\tif (i!=fans[vv])\n\t\t{\n\t\t\tcout<<\"! \"<<fans[vv]<<' '<<i<<endl;\n\t\t\tcin>>oo;\n\t\t\tif (oo==1)\n\t\t\t{\n\t\t\t  ans[i]=3;\t\n\t\t\t  fans[3]=i;\n\t\t    }\n\t\t}\t\n\t\n\t\tfor (int i:f[pl])\n\t\tif (i!=fans[vv]&&i!=fans[3])\n\t\t{\n\t\t\tcout<<\"! \"<<fans[3]<<' '<<i<<endl;\n\t\t\tcin>>oo;\n\t\t\tif (oo==1)\n\t\t\t{\n\t\t\t  ans[i]=2;\t\n\t\t\t  fans[2]=i;\n\t\t\t  op=1;\n\t\t\t  break;\n\t\t    }\n\t\t    else\n\t\t    {\n\t\t\t  ans[i]=1;\t\n\t\t\t  fans[1]=i;\n\t\t\t  op=2;\n\t\t\t  break;\t\t    \t\n\t\t\t}\t    \n\t\t}\n\t\t\t\t\n\t\tfor (int i=1; i<=n; i++)\n\t\t{\n\t\t\tif (ans[i]==0)\n\t\t\t{\n\t\t\t\tans[i]=op;\n\t\t\t\tbreak;\n\t\t\t } \n\t\t}\t\t\n\t}\n\t\n\tif (nn==3) //\u5269\u4f593\u7279\u5224 \n\t{\n        ddd=vv;\n\t\tfor (int i:f[pl])\n\t\tif (i!=fans[vv])\n\t\t{\n\t\t\tcout<<\"! \"<<fans[vv]<<' '<<i<<endl;\n\t\t\tcin>>oo;\n\t\t\tif (oo==0)\n\t\t\t  ans[i]=1;\n\t\t\telse\n\t\t\t  ans[i]=2;\n\t\t}\t\t\t\t\n\t}\n\t\n\tcout<<\"A \";\n\tfor (int i=1; i<=n; i++)\n\t  cout<<ans[i]<<' ';\n\tcout<<endl;\n\treturn 0;\n}\n```\n\n",
        "postTime": 1629469425,
        "uid": 85077,
        "name": "Diana773",
        "ccfLevel": 6,
        "title": "P7843 \u300cPMOI-4\u300d\u731c\u6392\u5217"
    },
    {
        "content": "\u8003\u8bd5\u65f6\u7b2c\u4e8c\u9898\u82b1\u592a\u591a\u65f6\u95f4\uff0c\u7b2c\u4e09\u9898\u6ca1\u65f6\u95f4\u4e86\u3002\u540e\u6765\u5750\u5728\u6c5f\u8fb9 10 \u5206\u949f\uff0c\u5c31\u60f3\u5230\u4e86\u6b63\u89e3 QWQ\u3002\n\n\u770b\u5230\u9898\u9762\u4e0a\u6709\u8fd9\u53e5\u8bdd\uff1a\u5176\u4e2d\u4f60\u8be2\u95ee\u7684\u6570\u5e94\u5f53\u6ee1\u8db3 $a_x>a_y$ \u4e14 $x \\neq y$ \u6211\u5c31\u60f3\u5230\u8fd9\u4e2a\u8be2\u95ee\u4e0d\u662f\u5e2e\u52a9\u6211\u4eec\u778e\u731c\u7684\u3002\u8fd8\u662f\u76f4\u63a5\u8bf4\u6b63\u89e3\u5427\uff0c\u6b63\u89e3\u5982\u4e0b\uff1a\n\n\u6211\u4eec\u5e94\u5148\u7528\u8be2\u95ee\u4e8c\uff0c\u5c06\u90a3\u4e2a\u6570\u662f $n$ \u95ee\u51fa\u6765\uff0c\u518d\u95ee $\\lceil n/2 \\rceil$ \u63a5\u4e0b\u6765\u7528 $n$ \u5bf9\u7b2c\u4e8c\u6b21\u95ee\u5230\u7684\u6570\u53d6\u6a21\uff08\u8be2\u95ee\u4e00\uff09\uff0c\u5c31\u80fd\u5f97\u5230\u8fd9\u4e9b\u6570\u5b57\u7684\u5177\u4f53\u503c\u3002\u53ea\u6709\u5f53 $n$ \u4e3a\u5076\u6570\u65f6\u9700\u8981\u7279\u5224 $n\\bmod(n/2)=0$\u3002\n\n\u77e5\u9053 $n<5$ \u8fd8\u662f\u7279\u5224\uff0c\u4e0b\u9644\u8003\u540e AC \u4ee3\u7801\uff0c\u5e2e\u52a9\u7406\u89e3\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\ninline int read(){\n\tint an=0,f=1;char c=getchar();\n\twhile((c<'0'||c>'9')&&c!='-')c=getchar();\n\tif(c=='-')f=-f,c=getchar();\n\twhile(c>='0'&&c<='9')an=an*10+c-'0',c=getchar();\n\treturn an*f;\n}\nint ans[50005],need[50005],tn;\nint main(){\n\tint n=read(),dn=n,xn,on;\n\tread();read();read();\n\tint a[2],b,t=-1;\n\tregister int i,x;\n\tprintf(\"? %d\",n);\n\tfor(i=1;i<=n;++i)printf(\" %d\",i);\n\tprintf(\" %d\\n\",n);fflush(stdout);\n\tread();ans[xn=read()]=dn=n;\n\twhile(dn>4){\n\t\tfor(i=1,tn=0;i<=n;++i)if(ans[i]==0)need[++tn]=i;\n\t\tprintf(\"? %d\",tn);\n\t\tfor(i=1;i<=tn;++i)printf(\" %d\",need[i]);\n\t\tprintf(\" %d\\n\",(dn+1)>>1);\n\t\tputchar('\\n');fflush(stdout);\n\t\ttn=read();for(i=1;i<=tn;++i)need[i]=read();\n\t\tfor(i=1;i<=tn;++i){\n\t\t\tprintf(\"! %d %d\\n\",xn,need[i]);\n\t\t\tfflush(stdout);x=read();\n\t\t\tif(x==0||(dn%2&&x==(dn>>1)))\n\t\t\t\tans[on=need[i]]=(dn+1)>>1;\n\t\t\telse ans[need[i]]=dn-x;\n\t\t}xn=on;dn=(dn+1)>>1;\n\t}switch(dn){\n\t\tcase 1:break;\n\t\tcase 2:for(i=1;i<=n;++i)\n\t\tif(ans[i]==0){ans[i]=1;break;}break;\n\t\tcase 3:for(i=1;i<=n;++i)if(ans[i]==0){\n\t\t\tprintf(\"! %d %d\\n\",xn,i);fflush(stdout);\n\t\t\tans[i]=read()+1;\n\t\t}break;case 4:\n\t\t\tfor(i=1;i<=n;++i)if(ans[i]==0){\n\t\t\t\tprintf(\"! %d %d\\n\",xn,i);fflush(stdout);\n\t\t\t\tx=read();if(x){b=i;ans[i]=3;}else a[++t]=i;\n\t\t\t}printf(\"! %d %d\\n\",b,a[0]);fflush(stdout);\n\t\t\tif(read()){ans[a[0]]=2;ans[a[1]]=1;}\n\t\t\telse{ans[a[0]]=1;ans[a[1]]=2;}break;\n\t\t\tdefault:printf(\"Error!\\n\");break;\n\t}printf(\"A \");\n\tfor(i=1;i<n;++i)printf(\"%d \",ans[i]);\n\tprintf(\"%d\\n\",ans[n]);\n\treturn 0;\n}\n```",
        "postTime": 1629759258,
        "uid": 502410,
        "name": "EnofTaiPeople",
        "ccfLevel": 0,
        "title": "P7843\u9898\u89e3"
    },
    {
        "content": "> \u9898\u610f\u8f83\u957f\uff0c\u8be6\u89c1[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P7843)\u3002\n\n\u89c2\u5bdf $m_2$ \u4e0e $n$ \u7684\u5173\u7cfb\uff0c\u731c\u6d4b\u9650\u5236\u4e3a $m_2\\approx\\log_2n$\uff0c\u4e8e\u662f\u5f80\u4e8c\u5206\u8fd9\u4e2a\u65b9\u5411\u8003\u8651\u3002\n\n\u4ee4 $m=\\lceil n/2\\rceil$\uff0c\u5f88\u81ea\u7136\u7684\u601d\u8def\u662f\u901a\u8fc7\u4e00\u6b21\u8be2\u95ee 2 \u786e\u5b9a $[1,m]$ \u4e0e $(m,n]$ \u5728\u6392\u5217\u4e2d\u7684\u4f4d\u7f6e\uff0c\u4e8e\u662f\u524d\u4e00\u534a\u5c31\u662f\u4e00\u4e2a\u76f8\u4f3c\u7684\u95ee\u9898\uff0c\u9012\u5f52\u6c42\u89e3\u3002\u800c\u5bf9\u4e8e\u540e\u4e00\u534a\u53d7 $m_2$ \u7684\u9650\u5236\u53ea\u80fd\u4f7f\u7528\u8be2\u95ee 1\uff0c\u56e0\u6b64\u53bb\u89c2\u5bdf\u53d6\u6a21\u7684\u6027\u8d28\u3002\u7531\u6b64\u53d1\u73b0\uff1a\u5bf9\u4e8e $x\\in(m,n]$ \u6709 $x\\bmod m=x-m$ \u4e14\u8fd9\u4e9b $x-m$ \u4e24\u4e24\u4e0d\u540c\u3002\u6839\u636e\u8fd9\u4e00\u70b9\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4f9d\u6b21\u8be2\u95ee $(m,n]$ \u6240\u5728\u4f4d\u7f6e\u7684\u503c\u9664\u4ee5 $m$ \u7684\u4f59\u6570\u5373\u53ef\u3002\n\n\u4f46\u662f\u76f4\u63a5\u8fd9\u6837\u505a\u4f1a\u8d85\u8fc7 $m_2$ \u7684\u9650\u5236 $1$\uff0c\u56e0\u6b64\u53ef\u4ee5\u4e0d\u505a\u6700\u540e\u4e00\u6b21\u9012\u5f52\uff0c\u6b64\u65f6 $n=3$ \u6216 $n=4$\u3002\u5bf9\u4e8e $n=3$\uff0c\u6211\u4eec\u53ef\u4ee5\u77e5\u9053 $3$ \u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u800c $3$ \u9664\u4ee5 $1$ \u548c $2$ \u7684\u4f59\u6570\u4e0d\u540c\uff0c\u6240\u4ee5\u4f7f\u7528\u4e00\u6b21\u8be2\u95ee 1 \u6c42\u51fa $1,2$ \u5206\u522b\u6240\u5728\u7684\u4f4d\u7f6e\uff1b\u5bf9\u4e8e $n=4$\uff0c\u7531\u4e8e $3\\bmod 1=4\\bmod1=4\\bmod2=0$ \u800c $3\\bmod 2=1$\uff0c\u6240\u4ee5\u627e\u5230\u8be2\u95ee 1 \u56de\u7b54\u4e3a $1$ \u7684\u90a3\u4e00\u5bf9\u6765\u786e\u5b9a $1,2,3,4$ \u6bcf\u4e2a\u6570\u6240\u5728\u7684\u4f4d\u7f6e\u3002\n\n\u7b80\u5355\u8ba1\u7b97\u4e00\u4e0b\u53d1\u73b0\u8fd9\u6837\u505a\u8db3\u4ee5\u901a\u8fc7\u6b64\u9898\uff1a$m_1<n$\uff0c$m_2=\\lceil\\log_2n-1\\rceil$\uff0c$m_3<2n$\u3002\n\n\u5b9e\u9645\u4e0a\u6211\u4eec\u8fd8\u53ef\u4ee5\u9488\u5bf9\u8be2\u95ee 2 \u7684\u6b21\u6570\u505a\u8fdb\u4e00\u6b65\u4f18\u5316\uff1a\u5728\u9012\u5f52\u5230\u9700\u8981\u6c42\u89e3\u7684\u957f\u5ea6 $n$ \u5c0f\u4e8e\u7b49\u4e8e\u7279\u5b9a\u7684\u957f\u5ea6 $k$ \u65f6\u505c\u6b62\u9012\u5f52\u5e76\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\u8ba1\u7b97\u51fa $n$ \u7684\u4f4d\u7f6e\uff0c\u6bd4\u5982\u53ea\u505a\u4e00\u6b21\u8be2\u95ee 2\u3002\u7531\u4e8e\u4e0a\u5c42\u9012\u5f52\u4ec5\u4f9d\u8d56\u4e8e $n$ \u7684\u5177\u4f53\u4f4d\u7f6e\uff0c\u6240\u4ee5\u5982\u6b64\u4f18\u5316\u8db3\u4ee5\u8ba9\u6211\u4eec\u77e5\u9053\u4e0d\u5c0f\u4e8e $n$ \u7684\u6240\u6709\u6570\u7684\u5177\u4f53\u4f4d\u7f6e\u3002\u7136\u800c\u53ea\u7528\u4e00\u6b21\u8be2\u95ee 2 \u65e0\u6cd5\u8ba9\u6211\u4eec\u77e5\u9053\u5c0f\u4e8e $n$ \u7684\u503c\u7684\u5177\u4f53\u4f4d\u7f6e\u3002\u7ed3\u5408\u4ee5\u4e0a\u4e24\u70b9\uff0c\u4e0d\u96be\u60f3\u5230\u7528\u4e00\u4e2a\u5927\u6570 $l$ \u4f9d\u6b21\u53bb\u5bf9\u8fd9\u4e9b\u5c0f\u4e8e $n$ \u7684\u6570\u6240\u5728\u7684\u4f4d\u7f6e\u505a\u8be2\u95ee 1 \u5e76\u5f97\u5230\u4e0d\u540c\u7ed3\u679c\uff0c\u4ece\u800c\u786e\u5b9a\u8fd9\u4e9b\u4f4d\u7f6e\u7684\u5177\u4f53\u503c\u3002\u5177\u4f53\u5730\uff0c$l\\bmod 1$ \u80af\u5b9a\u662f $0$\uff0c\u56e0\u6b64 $l\\bmod 2$ \u9700\u8981\u662f $1$\uff0c$l\\bmod 3$ \u9700\u8981\u662f $2$\uff0c\u4f9d\u6b21\u7c7b\u63a8\uff0c\u4e0d\u96be\u53d1\u73b0\u6700\u5c0f\u7684 $l=\\operatorname{lcm}(1,2,3,\\dots,k-1)-1\\le n$\u3002\n\n\u627e\u5230\u6700\u5927\u7684 $k$\uff0c\u5219\u8be2\u95ee 2 \u7684\u6b21\u6570\u4e3a $\\lceil \\log_2n-\\log_2k+1\\rceil$\uff0c\u5728 $n=5\\times10^4$ \u65f6\u53ea\u9700\u8981 $13$ \u6b21\u8be2\u95ee\u3002\n\n\u4ee5\u4e0b\u4ee3\u7801\u5728 $n=5\\times10^4$ \u65f6 $m_1=49986$\uff0c$m_2=13$\uff0c$m_3=99979$\u3002\u80af\u5b9a\u5b58\u5728\u8fd9\u4e09\u4e2a\u6570\u503c\u90fd\u66f4\u4f18\u7684\u4ee3\u7801\uff0c\u56e0\u6b64\u4ec5\u4f9b\u53c2\u8003\u3002\n\n```cpp\n#include <algorithm>\n#include <cstdio>\n#include <vector>\n\ntypedef std::vector<int> vector;\n\nint o = 1;\nvector pos;\n\nint query(int x, int y) {\n  int l;\n  printf(\"! %d %d\\n\", x, y);\n  fflush(stdout);\n  scanf(\"%d\", &l);\n  return l;\n}\nvoid query(int m, int h, int e, const vector &a, vector &b) {\n  int l = 0;\n  if (m > 1) {\n    printf(\"? %d\", m - 1);\n    for (int i = 1; i < m; ++i) printf(\" %d\", a[i]);\n    printf(\" %d\\n\", h + 1);\n    fflush(stdout);\n    scanf(\"%d\", &l);\n    b.resize(l);\n    for (int &x : b) scanf(\"%d\", &x);\n  }\n  if (l + e < m) b.push_back(a[0]);\n  std::sort(b.begin(), b.end());\n}\n\n#define exclude(a, b, c) std::set_difference(a.begin(), a.end(), b.begin(), b.end(), c)\n\nvoid solve(int m, const vector &ind) {\n  int h = 0;\n  vector hi;\n\n  if (m <= o * 2) {\n    h = o;\n    vector inc;\n    query(m, o - 1, o - 1, ind, inc);\n    query(m - o + 1, o, 1, inc, hi);\n    exclude(inc, hi, &pos[o]);\n  } else {\n    h = (m + 1) >> 1;\n    vector lo(h);\n    query(m, h, h, ind, hi);\n    exclude(ind, hi, lo.begin());\n    solve(h, lo);\n  }\n\n  for (int i = 1; i < m - h; ++i) {\n    int p = query(hi[i], pos[h]) + h;\n    if (p <= h) p += h;\n    pos[p] = hi[i];\n  }\n  for (int i = h + 1; i <= m; ++i)\n    if (!pos[i]) {\n      pos[i] = hi[0];\n      break;\n    }\n}\n\nint gcd(int x, int y) {\n  while (y) {\n    const int z = x % y;\n    x = y;\n    y = z;\n  }\n  return x;\n}\n\nint main() {\n  int n;\n  scanf(\"%d%*d%*d%*d\", &n);\n  vector ind(n);\n  for (int i = 0; i < n; ++i) ind[i] = i + 1;\n\n  if (n == 4) {\n    vector lo(2), hi;\n    query(4, 2, 2, ind, hi);\n    exclude(ind, hi, lo.begin());\n    ind.resize(n + 1);\n    if (query(hi[0], lo[0])) {\n      ind[hi[0]] = 3;\n      ind[hi[1]] = 4;\n      ind[lo[0]] = 2;\n      ind[lo[1]] = 1;\n    } else if (query(hi[0], lo[1])) {\n      ind[hi[0]] = 3;\n      ind[hi[1]] = 4;\n      ind[lo[0]] = 1;\n      ind[lo[1]] = 2;\n    } else if (query(hi[1], lo[0])) {\n      ind[hi[0]] = 4;\n      ind[hi[1]] = 3;\n      ind[lo[0]] = 2;\n      ind[lo[1]] = 1;\n    } else {\n      ind[hi[0]] = 4;\n      ind[hi[1]] = 3;\n      ind[lo[0]] = 1;\n      ind[lo[1]] = 2;\n    }\n  } else {\n    int v = 1;\n    while (true) {\n      ++o;\n      const int u = v * o / gcd(v, o);\n      if (u > n + 1) break;\n      v = u;\n    }\n  \n    pos.resize(n + 1);\n    solve(n, ind);\n    ind.assign(n + 1, 0);\n    for (int i = 1; i <= n; ++i) ind[pos[i]] = i;\n    int fir = 0;\n    for (int i = 1; i <= n; ++i)\n      if (!ind[i]) {\n        if (!fir) {\n          fir = i;\n        } else {\n          ind[i] = query(pos[v - 1], i) + 1;\n          pos[ind[i]] = i;\n        }\n      }\n    if (fir) {\n      for (int i = 1; i <= n; ++i)\n        if (!pos[i]) {\n          ind[fir] = i;\n          break;\n        }\n    }\n  }\n\n  putchar('A');\n  for (int i = 1; i <= n; ++i)\n    printf(\" %d\", ind[i]);\n  fflush(stdout);\n  return 0;\n}\n\n```",
        "postTime": 1629549408,
        "uid": 55251,
        "name": "Daniel13265",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P7843 \u3010\u300cPMOI-4\u300d\u731c\u6392\u5217\u3011"
    },
    {
        "content": "## Subtask 1\n\n\u6ce8\u610f\u5230\u53ea\u6709\u56db\u4e2a\u6570\u3002  \n\n\u53ef\u4ee5\u5148\u901a\u8fc7\u4e00\u6b21\u64cd\u4f5c\u4e8c\u627e\u51fa $3,4$ \u7684\u4f4d\u7f6e\u548c $1,2$ \u7684\u4f4d\u7f6e\u3002\n\n\u7136\u540e\u518d\u5206\u522b\u7528\u56db\u6b21\u64cd\u4f5c\u4e00\uff0c\u8ba9 $3,4$ \u6765\u5bf9 $1,2$ \u53d6\u6a21\u786e\u5b9a\u56db\u4e2a\u4f4d\u7f6e\u3002\n\n```cpp\nn=read();m1=read();m2=read();m3=read();\nif(n==4){\n  printf(\"? 4 1 2 3 4 3\\n\");fflush(stdout);\n  k=read();a=read();b=read();\n  for(int i=1;i<=4;i++)if(i!=a&&i!=b){if(!c)c=i;else d=i;}\n  printf(\"! %d %d\\n\",a,c);fflush(stdout);ans1=read();\n  printf(\"! %d %d\\n\",a,d);fflush(stdout);ans2=read();\n  if(ans1+ans2==0) ed[b]=3,ed[a]=4;\n  else{\n    ed[b]=4,ed[a]=3;\n    if(ans1) ed[c]=2,ed[d]=1;else ed[d]=2,ed[c]=1;\n    printf(\"A %d %d %d %d\\n\",ed[1],ed[2],ed[3],ed[4]);\n    fflush(stdout);return 0;\n  }\n  printf(\"! %d %d\\n\",b,c);fflush(stdout);ans3=read();\n  printf(\"! %d %d\\n\",b,d);fflush(stdout);ans4=read();\n  if(ans3) ed[c]=2,ed[d]=1;else ed[c]=1,ed[d]=2;\n  printf(\"A %d %d %d %d\\n\",ed[1],ed[2],ed[3],ed[4]);\n  fflush(stdout);return 0;\n}\n```\n\n\n## Subtask 2\n\n\u53d1\u73b0 $m_2=n$\uff0c\u4e14 $m_3$ \u662f $m_2^2$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 $n$ \u6b21\u8be2\u95ee\u6765\u786e\u5b9a\u6bcf\u4e2a\u6570\u7684\u4f4d\u7f6e\u3002\n\n\u6bcf\u6b21\u8be2\u95ee $n$ \u4e2a\u6570\uff0c\u8be2\u95ee\u7684\u4e0a\u754c\u51cf\u4e00\uff0c\u7136\u540e\u627e\u51fa\u7ed9\u7684\u6570\u4e2d\u6ca1\u6709\u88ab\u786e\u5b9a\u4f4d\u7f6e\u7684\u6570\u5373\u53ef\u3002\n\n```cpp\nn=read();m1=read();m2=read();m3=read();\nif(n==500){\n  for(int i=n;i>=1;i--){\n    printf(\"? %d \",i);\n    for(int j=1;j<=n;j++)\n      if(!flag[j]) printf(\"%d \",j);\n    printf(\"%d\\n\",i);fflush(stdout);\n    int x=read(),y=read();ed[y]=i,flag[y]=1;\n  }\n  printf(\"A \");\n  for(int i=1;i<=n;i++) printf(\"%d \",ed[i]);\n  fflush(stdout);return 0;\n}\n```\n\n\n## Subtask 3~6\n\n~~\u6ca1\u770b\u51fa\u6765\u6027\u8d28 A \u53ef\u4ee5\u600e\u4e48\u641e\u3002~~\n\n\u770b\u6700\u4e0b\u9762\u7684\u6570\u636e\u8303\u56f4\uff0c\u53d1\u73b0 $m_1$ \u5f88\u5927\uff0c$m_2$ \u5f88\u5c0f\uff0c\u4f46\u662f $2^{17}>5\\times 10^4$\u3002\n\n\u8fd9\u542f\u53d1\u6211\u4eec\u53ef\u4ee5\u7528\u7c7b\u4f3c\u500d\u589e\u7684\u505a\u6cd5\u6765\u641e\u3002\n\n\u53ef\u4ee5\u53d1\u73b0\uff0c$(\\lceil\\frac{n}{2}\\rceil,n]$ \u4e2d\u7684\u6bcf\u4e2a\u6570\u5bf9 $\\lceil\\frac{n}{2}\\rceil$ \u53d6\u6a21\u90fd\u53ef\u4ee5\u5f97\u5230\u4e0d\u540c\u7684\u7ed3\u679c\u3002\n\n\u6240\u4ee5\uff0c\u5982\u679c\u6211\u4eec\u77e5\u9053\u4e86 $[1,\\lceil\\frac{n}{2}\\rceil]$ \u4e2d\u6bcf\u4e2a\u6570\u7684\u4f4d\u7f6e\uff0c\u90a3\u4e48\u5269\u4e0b\u7684\u6570\u4f4d\u7f6e\u53ef\u4ee5\u901a\u8fc7\u4e0d\u65ad\u8fdb\u884c\u64cd\u4f5c\u4e00\u6765\u786e\u5b9a\u3002\n\n\u60f3\u8981\u786e\u5b9a $[1,\\lceil\\frac{n}{2}\\rceil]$\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a\u77e5\u9053\u4e86 $[1,\\lceil\\frac{n}{4}\\rceil]$ \u6765\u7528\u540c\u6837\u7684\u65b9\u6cd5\u6c42 $(\\lceil\\frac{n}{4}\\rceil,\\lceil\\frac{n}{2}\\rceil]$ \u5f97\u5230\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u9012\u5f52\u5206\u6cbb\u7684\u65b9\u5f0f\u6765\u5904\u7406\u3002\n\n\u6211\u4eec\u5728\u6570\u8f74\u4e0a\u627e\u51fa\u6bcf\u4e2a\u957f\u4e3a $n\\times \\frac{1}{2}^{i}$ \u7684\u6bb5\uff0c\u7136\u540e\u5904\u7406\u8fd9\u4e00\u6bb5\u5185\u7684\u6570\u7684\u4f4d\u7f6e\u5373\u53ef\u3002\n\n```cpp\nvoid work(int l,int r,int cnt){\n  int mid=(r+1)/2+1;all=0;\n  if(l==r){for(int i=1;i<=n;i++)if(!pos[i]) pos[i]=cnt;return;}\n  for(int i=1;i<=n;i++)if(!pos[i]) que[++all]=i;\n  printf(\"? %d \",all);for(int i=1;i<=all;i++) printf(\"%d \",que[i]);\n  printf(\"%d\\n\",mid);fflush(stdout);int x=read();\n  for(int i=1;i<=x;i++) pos[read()]=cnt;work(l,mid-1,cnt+1);\n}\n//\u4e0b\u9762\u662f\u4e3b\u51fd\u6570\u5185\u7684\u90e8\u5206\nn=read();m1=read();m2=read();m3=read();\nif(m2>=17){\n  for(int i=1;i<=n;i++) num[i]=i;\n  work(1,n,1);sort(num+1,num+n+1,cmp);\n  ed[num[1]]=1;ed[num[2]]=2;int maxx,id=num[2];\n  for(int i=3;i<=n;i++){\n    if(pos[num[i]]!=pos[num[i-1]]) lst=id,maxx=id=0;\n    printf(\"! %d %d\\n\",num[i],lst);fflush(stdout);int x;\n    ed[num[i]]=ed[lst]+(x=read());if(!x)ed[num[i]]=(ed[lst]<<1);\n    if(maxx<ed[num[i]])maxx=ed[num[i]],id=num[i];\n  }\n  printf(\"A\");for(int i=1;i<=n;i++) printf(\" %d\",ed[i]);\n  fflush(stdout);return 0;\n}\n```\n\n## Subtask 7\n\n\u53ef\u4ee5\u53d1\u73b0\u5bf9\u4e8e\u6700\u540e\u4e00\u7ec4\u6570\u636e\uff0c$2^{15}\\le 5\\times 10^4<2^{16}$\u3002\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u64cd\u4f5c\u4e8c\u7406\u8bba\u4e0a\u591a\u8fdb\u884c\u4e86\u4e00\u6b21\u3002\n\n\u60f3\u529e\u6cd5\u600e\u4e48\u51cf\u5c11\u6b21\u6570\u3002\n\n\u6211\u4eec\u53d1\u73b0\u9012\u5f52\u7684\u65f6\u5019\u662f\u6700\u540e\u5269\u4f59\u4e86\u4e00\u4e2a $1$ \u7136\u540e\u9000\u51fa\u7684\u3002\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u627e\u51fa $1,2,3,4$ \u7684\u4f4d\u7f6e\u3002\n\n\u5982\u679c\u6211\u4eec\u4e0d\u7528\u64cd\u4f5c\u4e8c\u627e\u51fa\u6700\u540e\u4e00\u4e2a $1$ \u7684\u4f4d\u7f6e\uff0c\u800c\u662f\u91c7\u7528 Subtask 1 \u7684\u65b9\u6cd5\u6765\u7684\u8bdd\uff0c\u7406\u8bba\u4e0a\u5c31\u53ef\u4ee5\u4f7f\u64cd\u4f5c\u4e8c\u63a7\u5236\u5728\u4e00\u4e2a\u53ef\u884c\u7684\u8303\u56f4\u5185\u4e86\u3002\n\n\u7136\u540e\u6211\u4eec\u5728 Subtask 3~6 \u7684\u4ee3\u7801\u4e0a\u5957\u4e00\u4e2a Subtask 1 \u7684\u4ee3\u7801\u5c31\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u6d4b\u8bd5\u70b9\u3002\n\n```cpp\n\nvoid work2(int l,int r,int cnt){\n  int mid=(r+1)/2+1;all=0;\n  if(mid==2){for(int i=1;i<=n;i++)if(!pos[i]) pos[i]=cnt;return;}\n  for(int i=1;i<=n;i++)if(!pos[i]) que[++all]=i;\n  printf(\"? %d \",all);for(int i=1;i<=all;i++) printf(\"%d \",que[i]);\n  printf(\"%d\\n\",mid);fflush(stdout);int x=read();\n  for(int i=1;i<=x;i++) pos[read()]=cnt;work2(l,mid-1,cnt+1);\n}\n//\u4e0b\u9762\u662f\u4e3b\u51fd\u6570\u5185\u7684\u90e8\u5206\nfor(int i=1;i<=n;i++) num[i]=i;\nwork2(1,n,1);sort(num+1,num+n+1,cmp);\n      \nint c=num[2],d=num[1],a=num[3],b=num[4];\nprintf(\"! %d %d\\n\",a,c);fflush(stdout);ans1=read();\nprintf(\"! %d %d\\n\",a,d);fflush(stdout);ans2=read();\nif(ans1+ans2!=0){\n  ed[a]=3;ed[b]=4;\n  if(ans1) ed[c]=2,ed[d]=1;else ed[d]=2,ed[c]=1;\n}\nelse{\n  ed[a]=4;ed[b]=3;\n  printf(\"! %d %d\\n\",b,c);fflush(stdout);ans3=read();\n  printf(\"! %d %d\\n\",b,d);fflush(stdout);ans4=read();\n  if(ans3) ed[c]=2,ed[d]=1;else ed[c]=1,ed[d]=2;\n}\n     \nint maxx,id;\nif(ed[num[3]]==4) id=num[3];\nelse id=num[4];\nfor(int i=5;i<=n;i++){\n  if(pos[num[i]]!=pos[num[i-1]]) lst=id,maxx=id=0;\n  printf(\"! %d %d\\n\",num[i],lst);fflush(stdout);int x;\n  ed[num[i]]=ed[lst]+(x=read());if(!x)ed[num[i]]=(ed[lst]<<1);\n  if(maxx<ed[num[i]])maxx=ed[num[i]],id=num[i];\n}\nprintf(\"A\");for(int i=1;i<=n;i++) printf(\" %d\",ed[i]);\nfflush(stdout);return 0;\n```\n\n\u4f46\u662f\u8fd9\u4efd\u4ee3\u7801\u53c8\u4e0d\u80fd\u8fc7\u6389 Subtask 3~4\uff0c\u56e0\u4e3a\u5728\u524d\u9762\u7684\u5c0f\u6570\u636e\u9012\u5f52\u65f6\uff0c\u6309 $n\\times \\frac{1}{2}^i$ \u5927\u5c0f\u5206\u7684\u5757\u53ef\u80fd\u4f7f\u5f97 $3,4$ \u4e0d\u5728\u540c\u4e00\u5757\u4e2d\u800c $4,5$ \u5728\u540c\u4e00\u5757\u4e2d\uff0c\u6240\u4ee5\u627e\u5b8c $1$ \u5230 $4$ \u7684\u4f4d\u7f6e\u540e\u518d\u5904\u7406\u540e\u9762\u65f6 $5$ \u4e0d\u4f1a\u88ab\u5904\u7406\u5230\u3002\n\n\u8fd9\u91cc\u7279\u5224\u4e00\u4e0b $3,4$ \u662f\u4e0d\u662f\u5728\u4e00\u5757\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u4f46\u662f\u6211\u662f\u4e2a\u61d2\u903c\uff0c\u6240\u4ee5\u6211\u628a\u4e0a\u9762\u6240\u6709\u7684\u4ee3\u7801\u5168\u62fc\u8d77\u6765\u4e86\u3002\n\n\u7136\u540e\u6211\u5c31\u8fc7\u4e86\u3002",
        "postTime": 1629505834,
        "uid": 281497,
        "name": "KEBrantily",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P7843 \u3010\u300cPMOI-4\u300d\u731c\u6392\u5217\u3011"
    },
    {
        "content": "\u7ed9\u4e00\u4e2a $m_3=2.5n$ \u7684\u505a\u6cd5\uff0c\u7565\u6bd4 std \u4f18\u79c0\u3002\n\n\u8003\u8651\u4e00\u4e2a naive \u7684\u505a\u6cd5\uff0c\u4e0d\u7528 1 \u64cd\u4f5c\uff0c\u7528 2 \u64cd\u4f5c\u5927\u529b\u5206\u6cbb\uff0c\u6bcf\u6b21\u627e\u4e2d\u95f4\u7684\u6570\uff0c\u6c42\u51fa\u5de6\u53f3\u4e24\u8fb9\u7684\u6570\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u9012\u5f52\u5904\u7406\u4e24\u8fb9\u3002\n\n\u7136\u540e\u628a 1 \u64cd\u4f5c\u52a0\u4e0a\u3002\n\n\u4ec0\u4e48\u60c5\u51b5\u4e0b\u80fd\u7528 1 \u64cd\u4f5c\u786e\u5b9a\u4e00\u4e2a\u6570\u7684\u503c\uff1f\u5f53\u786e\u5b9a $x\\ge \\frac{y}{2}$ \u65f6\u901a\u8fc7\u8be2\u95ee $y\\bmod x$ \u53ef\u4ee5\u786e\u5b9a $x$\u3002$x=y-y\\bmod x$\u3002\n\n\u5982\u679c\u6211\u4eec\u5148\u9012\u5f52\u5904\u7406\u53f3\u533a\u95f4\uff0c\u90a3\u4e48\u53f3\u533a\u95f4\u7684\u6700\u5c0f\u503c\u53ef\u4ee5\u62ff\u6765\u6c42\u5de6\u533a\u95f4\u7684\u6570\u4e2d $[mid+1,r]$ \u90e8\u5206\u3002\n\n\u4f46\u662f\uff0c\u7b2c\u4e00\u6b21\u5206\u6cbb\u65f6\uff0c\u6ca1\u6709\u53ef\u4ee5\u62ff\u6765\u6a21\u7684\u5927\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5148\u8be2\u95ee\u5168\u5c40\u627e\u5230 $n$ \u7684\u4f4d\u7f6e\u3002\n\n\u5f53 $r$ \u8f83\u5c0f\u65f6\uff0c\u9700\u8981\u7279\u5224\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11 2 \u64cd\u4f5c\u7684\u6b21\u6570\uff08\u5177\u4f53\u89c1 subtask1\uff09\n\n$m_1$ \u663e\u7136\u4e0d\u5230 $n$\uff0c\u56e0\u4e3a\u6bcf\u6b21\u4f7f\u7528 1 \u64cd\u4f5c\u5fc5\u7136\u786e\u5b9a\u4e00\u4e2a\u6570\u7684\u4f4d\u7f6e\u3002\n\n$m_2$ \u4e5f\u662f log \u7ea7\u522b\uff0c\u56e0\u4e3a\u6bcf\u6b21\u9012\u5f52\u9700\u8981\u4e00\u6b21 2 \u64cd\u4f5c\u3002\n\n$m_3$ \u4e3a $3n$\uff0c\u8be2\u95ee\u5168\u5c40\u6700\u5927\u7684 $n$ \u548c\u5206\u6cbb\u7684 $n+\\frac{n}{2}+\\frac{n}{4}+...=2n$\u3002\n\n\u4ee5\u4e0a\u505a\u6cd5\u53ef\u4ee5\u901a\u8fc7\uff0c\u4f46\u662f\u53ef\u4ee5\u8fdb\u4e00\u6b65\u4f18\u5316\u3002\n\n\u6c42\u5168\u5c40\u6700\u5927\u503c\uff0c\u7528\u5230 $n$ \u6709\u70b9\u6d6a\u8d39\u4e86\u3002\u53ea\u9700\u8981\u5728\u8be2\u95ee\u7b2c\u4e00\u6b21\u7528 2 \u64cd\u4f5c\u5206\u6cbb\u65f6\u53f3\u8fb9\u7684\u90e8\u5206\u5c31\u884c\u4e86\u3002\u8fd9\u90e8\u5206\u662f $\\frac{n}{2}$\u3002\n\n$m_3$ \u88ab\u4f18\u5316\u5230\u4e86 $2.5n$\u3002\n\n```cpp\n#include<iostream>\n#include<vector> \nusing namespace std;\nconst int N=5e4+5;\nvector<int> now,l,r;\nint ans[N],v[N],id[N],fir;\nint a1(int x,int y)\n{\n\tcout<<\"! \"<<x<<\" \"<<y<<endl;\n\tfflush(stdout);\n\tint k;\n\tcin>>k;\n\treturn k;\n}\nvoid a2(int x)\n{\n\tl.clear();r.clear();\n\tcout<<\"? \"<<now.size()<<\" \";\n\tfor(int i=0;i<now.size();i++)\n\tcout<<now[i]<<' ';\n\tcout<<x<<endl;\n\tfflush(stdout);\n\tint L;\n\tcin>>L;\n\tfor(int i=1;i<=L;i++)\n\t{\n\t\tint k;\n\t\tcin>>k;\n\t\tr.push_back(k);\n\t\tv[k]=1;\n\t}\n\tfor(int i=0;i<now.size();i++)\n\tif(!v[now[i]]) l.push_back(now[i]);\n\tfor(int i=0;i<now.size();i++)\n\tv[now[i]]=0; \n}\nvoid print()\n{\n\tfor(int i=1;i<=fir;i++)\n\tid[ans[i]]=i;\n\tcout<<\"A \";\n\tfor(int i=1;i<=fir;i++)\n\tcout<<id[i]<<\" \";\n\tcout<<endl;\n\tfflush(stdout);\n}\nvoid work2(int n)\n{\n\ta2(4);\n\tans[4]=r[0];\n\tfor(int i=0;i<l.size();i++)\n\t{\n\t\tint k=a1(r[0],l[i]);\n\t\tif(k==1) ans[3]=l[i]; \n\t}\n\tint flg=0;\n\tfor(int i=0;i<l.size();i++)\n\tif(l[i]!=ans[3])\n\t{\n\t\tif(flg)\n\t\t{\n\t\t\tans[flg]=l[i];\n\t\t\treturn;\n\t\t}\n\t\tint k=a1(ans[3],l[i]);\n\t\tif(k==1) ans[2]=l[i],flg=1;\n\t\telse ans[1]=l[i],flg=2;\n\t}\n}\nvoid work3()\n{\n\tl.clear();\n\tl=now;\n\tfor(int i=0;i<l.size();i++)\n\t{\n\t\tint k=a1(ans[4],l[i]);\n\t\tif(k==1) ans[3]=l[i]; \n\t}\n\tint flg=0;\n\tfor(int i=0;i<l.size();i++)\n\tif(l[i]!=ans[3])\n\t{\n\t\tif(flg)\n\t\t{\n\t\t\tans[flg]=l[i];\n\t\t\treturn;\n\t\t}\n\t\tint k=a1(ans[3],l[i]);\n\t\tif(k==1) ans[2]=l[i],flg=1;\n\t\telse ans[1]=l[i],flg=2;\n\t}\n}\nvoid work4()\n{\n\tl.clear();\n\tl=now;\n\tint flg=0;\n\tfor(int i=0;i<l.size();i++)\n\t{\n\t\tif(flg)\n\t\t{\n\t\t\tans[flg]=l[i];\n\t\t\treturn;\n\t\t}\n\t\tint k=a1(ans[3],l[i]);\n\t\tif(k==1) ans[2]=l[i],flg=1;\n\t\telse ans[1]=l[i],flg=2;\n\t}\n}\nvoid work(int n,int res)\n{\n//\tcout<<\"now\"<<n<<\" \"<<res<<\" \"<<(n+1>>1)<<endl;\n\tif(n==4)\n\t{\n\t\twork2(n);\n\t\treturn;\n\t}\n\tif(n==3)\n\t{\n\t\twork3();\n\t\treturn;\n\t}\n\tif(n==2)\n\t{\n\t\twork4();\n\t\treturn;\n\t}\n\ta2((n+2)>>1);\n\tint nxt=0;\n\tfor(int i=0;i<r.size();i++)\n\tif(r[i]!=res)\n\t{\n\t\tint k=a1(res,r[i]);\n\t\tif(k==0) k=(n+1)/2;\n\t\tans[n-k+1]=r[i];\n\t\tif(n-k+1==((n+2)>>1)) nxt=r[i];\n\t}\n\tnow.clear();\n\tnow=l;\n\twork(((n+2)>>1)-1,nxt);\n}\nint main()\n{\n\tint n,m1,m2,m3;\n\tcin>>n>>m1>>m2>>m3;\n\tfir=n;\n\tfor(int i=1;i<=n;i++)\n\tnow.push_back(i);\n\tif(n==4)\n\t{\n\t\twork2(n);\n\t\tprint();\n\t\treturn 0;\n\t}\n\ta2(n+2>>1);\n\tcout<<\"? \"<<r.size()<<\" \";\n\tfor(int i=0;i<r.size();i++)\n\tcout<<r[i]<<' ';\n\tcout<<n<<endl;\n\tfflush(stdout);\n\tint res;\n\tcin>>res>>res;\n\tans[n]=res;\n\tint nxt=0;\n\tfor(int i=0;i<r.size();i++)\n\tif(r[i]!=res)\n\t{\n\t\tint k=a1(res,r[i]);\n\t\tif(k==0) k=n/2;\n\t\tans[n-k]=r[i];\n\t\tif(n-k==(2+n>>1)) nxt=r[i];\n\t}\n\tnow.clear();\n\tnow=l;\n\twork((n+2>>1)-1,nxt);\n\tprint(); \n\treturn 0;\n}\n```\n",
        "postTime": 1629764292,
        "uid": 196899,
        "name": "lndjy",
        "ccfLevel": 9,
        "title": "P7843 \u9898\u89e3"
    },
    {
        "content": "$\\texttt{Subtask \\# 1}$ \u6211\u4eec\u76f4\u63a5\u624b\u52a8\u6a21\u62df\u3002\u9996\u5148\u80af\u5b9a\u8981\u8fdb\u884c\u4e00\u6b21 `? l S p` \u64cd\u4f5c\u6c42\u5f97 $4$ \u7684\u4f4d\u7f6e\u3002\u7136\u540e\u53d1\u73b0 $1$ \u81f3 $3$ \u4e2d\u53ea\u6709 $3$ \u9664 $4$ \u65e0\u6cd5\u6574\u9664\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7 `! x y` \u64cd\u4f5c\u6c42\u5f97 $3$ \u7684\u4f4d\u7f6e\u3002\u540c\u7406\u6c42\u51fa $2$ \u7684\u4f4d\u7f6e\uff0c\u5219\u6700\u540e\u5269\u4e0b\u7684\u4e00\u4e2a\u4f4d\u7f6e\u5c31\u662f $1$ \u4e86\u3002\n\n$\\texttt{Subtask \\# 2-3}$ $m_2$ \u5f88\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u53ea\u7528 `? l S p` \u64cd\u4f5c\u6bcf\u6b21\u6c42\u51fa $[1,n]$ \u95f4\u7684\u6700\u5927\u503c\uff0c\u7136\u540e\u4e0d\u65ad\u7f29\u5c0f\u533a\u95f4\u76f4\u81f3 $[1,1]$\u3002\n\n$\\texttt{Subtask \\# 4-6}$ \u770b\u5230 $m_2$ \u7684\u503c\u5728 $20$ \u4ee5\u5185\uff0c\u4fbf\u80fd\u731c\u60f3\u590d\u6742\u5ea6\u4e0e $2$ \u7684\u5e42\u6b21\u6709\u5173\u3002\u8ba1\u7b97\u4e86\u4e00\u4e0b $2^{15}$ \u4e0e $5 \\times 10^4$ \u5927\u81f4\u63a5\u8fd1\uff0c\u6545\u518d\u6b21\u8054\u60f3\u5230\u4e8c\u5206\u3002\u4e8e\u662f\u4e4e\uff0c\u5c31\u6709\u4e86\u4e8c\u5206\u7b54\u6848\u7684\u505a\u6cd5\u3002\n\n\u5bf9\u4e8e `! x y` \u64cd\u4f5c\uff0c\u56e0\u4e3a\u4e00\u5b9a\u8981\u4fdd\u8bc1\u8be2\u95ee\u5408\u6cd5\uff0c\u6240\u4ee5\u4e00\u5b9a\u662f\u5efa\u7acb\u5728\u6392\u5217\u4e0a\u7684\u67d0\u4f4d\u5df2\u7ecf\u786e\u5b9a\u7684\u60c5\u51b5\u4e0b\u3002\u90a3\u4e48\u80af\u5b9a\u9700\u8981\u5148\u4ece `? l S p` \u64cd\u4f5c\u4e2d\u83b7\u53d6\u4e00\u4e2a\u6570\u4ee5\u5f00\u59cb\u8be2\u95ee\u3002\u6211\u4eec\u60f3\u8981\u6c42\u51fa $[1,n]$ \u5185\u7684\u6392\u5217\uff0c\u53ef\u4ee5\u5148\u7528 `? l S p` \u64cd\u4f5c\u83b7\u53d6 $n$ \u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u53ef\u4ee5\u6839\u636e $n \\mod (\\frac{n}{2},n)$ \uff0c\u5176\u4e2d\u4f59\u6570\u4e92\u90e8\u4e0d\u91cd\u590d\u7684\u6027\u8d28\u7528 `! x y` \u64cd\u4f5c\u6c42\u89e3\u51fa $(\\frac{n}{2},n)$ \u5185\u6240\u6709\u6570\u7684\u4f4d\u7f6e\u3002\u7136\u540e\u7ee7\u7eed\u51cf\u534a\u91cd\u590d\u64cd\u4f5c\u76f4\u5230 $n = 1$ \u540e\u628a\u6700\u540e\u4e00\u4e2a\u5269\u4e0b\u7684\u4f4d\u7f6e\u6807\u8bb0\u4e3a $1$ \u5373\u53ef\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u7531\u4e8e $m_3$ \u7684\u9650\u5236\uff0c\u6240\u4ee5 `? l S p` \u64cd\u4f5c\u65f6\u7684 $l$ \u7684\u5927\u5c0f\u5e94\u8be5\u4e3a\u8fd8\u672a\u88ab\u786e\u5b9a\u7684\u6570\u7684\u4e2a\u6570\uff0c\u800c\u4e0d\u662f\u8349\u7387\u7684\u8d4b\u503c\u4e3a\u6392\u5217\u7684\u5927\u5c0f\u3002\n\n$\\texttt{Subtask \\# 7}$ \u4f46\u662f\u7531\u4e8e\u4e00\u5f00\u59cb\u7684 `? l S p` \u64cd\u4f5c\uff0c\u7ecf\u8fc7\u8ba1\u7b97\u53d1\u73b0\u6b64\u65f6\u4ee3\u7801\u65e0\u6cd5\u901a\u8fc7\u6700\u540e\u4e00\u4e2a\u5b50\u4efb\u52a1\u3002\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\u5728\u6700\u540e\u4e00\u6b21\u4e8c\u5206\u65f6\u7279\u5224\u4ee5\u51cf\u5c11\u4e00\u6b21 `? l S p` \u64cd\u4f5c\u3002\u6700\u540e\u4e00\u6b21\u4e8c\u5206\u64cd\u4f5c\u662f\u5728 $[1,2]$ \u6216 $[1,3]$ \u7684\u8303\u56f4\u65f6\uff0c\u4f46\u56e0\u4e3a\u9898\u4e2d $n$ \u7684\u5927\u5c0f\u5df2\u7ecf\u786e\u5b9a\uff0c\u6240\u4ee5\u8ba1\u7b97\u5f97\u51fa\u53ea\u9700\u8981\u7279\u5224\u540e\u8005\u7684\u60c5\u51b5\u5373\u53ef\u3002\u6211\u4eec\u4ecd\u7136\u7528\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u4e2d\u4f59\u6570\u4e92\u4e0d\u76f8\u540c\u4ee5\u6c42\u51fa\u533a\u95f4\u4e2d\u4e0d\u540c\u7684\u6570\u7684\u6027\u8d28\uff0c\u53d1\u73b0 $5 \\mod i\\ (1 \\le i \\le 3)$\uff0c\u6070\u597d\u4f59\u6570\u4e92\u4e0d\u76f8\u540c\uff0c\u6545\u6700\u5c11\u4f7f\u7528\u4e24\u6b21 `! x y` \u64cd\u4f5c\u4ee3\u66ff\u539f\u6765\u7684 `? l S p` \u64cd\u4f5c\u6c42\u51fa\u3002\n\n\u7a0b\u5e8f\u7684\u5b8c\u6574\u4ee3\u7801\u8f83\u957f\uff0c\u653e\u5165\u526a\u8d34\u677f\u4e2d\uff1a[\u6233\u6211](https://www.luogu.com.cn/paste/4fzpx3mq)",
        "postTime": 1629728860,
        "uid": 183603,
        "name": "SUNCHAOYI",
        "ccfLevel": 6,
        "title": "\u9898\u89e3\u3010\u300cPMOI-4\u300d\u731c\u6392\u5217\u3011"
    }
]
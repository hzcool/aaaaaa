[
    {
        "content": "\u8fd9\u9053\u9898\u6211\u4e00\u76f4\u61f5\u903c\uff0c\u540e\u6765\u770b\u4e86\u9898\u89e3\u4e2d\u7684\u4e00\u79cd\u7384\u5b66\u65b9\u6cd5\uff0c~~\u770b\u6765\u6211\u8fd8\u662f\u592a\u5f31~~\u3002\n\n\u8fd9\u79cd\u7384\u5b66\u65b9\u6cd5\u7684\u8981\u70b9\u5c31\u662f\u5229\u7528\u201c\u53ea\u8981\u7ed3\u679c\u7684\u76f8\u5bf9\u8bef\u5dee\u4e0d\u8d85\u8fc75%\u5373\u53ef\u201d\u8fd9\u4e00\u6761\u4ef6\u3002\n\n\u9996\u5148\uff0c\u5b9a\u4e49\u4e00\u4e2a\u5e38\u6570$T$\uff0c\u5728$100$\u5de6\u53f3\u3002\n\n\u5bf9\u4e8e\u7b2c$i$\u4e2a\u884c\u661f\uff0c\u4ee4$x=\\lfloor a*i\\rfloor$\u3002\u53ef\u4ee5\u770b\u51fa\uff0c\u5bf9\u7b2c$i$\u4e2a\u884c\u661f\u6709\u8d21\u732e\u7684\u662f$[1,x]$\u8303\u56f4\u5185\u7684\u884c\u661f\u3002\n\n\u5f53$x\u2264T$\u65f6\uff0c\u66b4\u529b\u7edf\u8ba1\u3002\n\n\u5f53$x>T$\u65f6\uff0c\u628a$[1,x]$\u5206\u6210$T$\u4e2a\u957f\u5ea6\u5c3d\u53ef\u80fd\u5e73\u5747\u7684\u5c0f\u533a\u95f4\uff08\u5c0f\u533a\u95f4\u8fc7\u5927\u4f1a\u4f7f\u8bef\u5dee\u53d8\u5927\uff09\u3002\n\n\u6bcf\u4e00\u4e2a\u5c0f\u533a\u95f4$[x,y]$\u7684\u8d21\u732e\u7684\u8fd1\u4f3c\u503c\u5c31\u662f$(M_i*\\sum_{j=x}^yM_j)/(i-\\frac{x+y}{2})$\uff08\u53d6\u4e2d\u70b9\u4f5c\u4e3a\u5206\u6bcd\uff09\n\n\u7531\u4e8e$0.01<a\u22640.35$\u5f97\u5230\uff0c\u8fd9\u4e2a\u8fd1\u4f3c\u503c\u4e0e\u51c6\u786e\u503c\u7684\u76f8\u5bf9\u8bef\u5dee\u4e0d\u8d85\u8fc75%\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\ninline int read() {\n    int res = 0; bool bo = 0; char c;\n    while (((c = getchar()) < '0' || c > '9') && c != '-');\n    if (c == '-') bo = 1; else res = c - 48;\n    while ((c = getchar()) >= '0' && c <= '9')\n        res = (res << 3) + (res << 1) + (c - 48);\n    return bo ? ~res + 1 : res;\n}\nconst double eps = 1e-8;\nconst int N = 1e5 + 5;\nint n; double a, m[N], res[N], sum[N];\nint main() {\n    int i, j; n = read(); scanf(\"%lf\", &a);\n    for (i = 1; i <= n; i++) sum[i] = sum[i - 1] + (m[i] = read());\n    for (i = 1; i <= n; i++) {\n        int x = 1.0 * i * a + eps;\n        if (!x) continue;\n        if (x <= 100) for (j = 1; j <= x; j++)\n            res[i] += m[i] * m[j] / (i - j);\n        else {\n            int tx = 1, ty, tz = x / 100, ta = x % 100;\n            for (j = 1; j <= 100; j++) {\n                ty = tx + tz - (j > ta);\n                res[i] += (sum[ty] - sum[tx - 1]) * m[i] / (i - (tx + ty) / 2);\n                tx = ty + 1;\n            }\n        }\n    }\n    for (i = 1; i <= n; i++) printf(\"%.6lf\\n\", res[i]);\n    return 0;\n}\n```",
        "postTime": 1506258243,
        "uid": 29936,
        "name": "xyz32768",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P3198 \u3010[HNOI2008]\u9065\u8fdc\u7684\u884c\u661f\u3011"
    },
    {
        "content": "**\u9898\u610f\uff1a**\n\n\u5bf9\u4e8e\u6bcf\u4e2a$i$\uff0c\u6c42$\\sum_{j=1}^{A\\times i} \\frac{m_i\\times m_j}{i - j}$\n\n**\u505a\u6cd5\uff1a**\n\n\u7b2c\u4e00\u773c\u770b\u4e0a\u53bb\u50cf\u5e73\u8861\u6811\uff0c\u4f46\u6bcf\u4e00\u9879\u90fd\u4e0e\u5f53\u524di\u6709\u5173\uff0c\u4e14\u4e0d\u53ef\u5206\u5f00\u8003\u8651\uff08\u5206\u6bcd$i-j$\uff09\n\n\u518d\u770b\u9898\u9762\u53d1\u73b0\u7279\u6b8a\u6761\u4ef6\uff1a**\u76f8\u5bf9\u8bef\u5dee\u4e0d\u8d85\u8fc7 5% \u5373\u53ef**\uff08\u901a\u5e38\u5e94\u8be5\u662f\u8bef\u5dee\u5728$10^x$\u4e4b\u5185\uff09\uff0c\u8f83\u4e3a\u7279\u6b8a\n\n\u76f8\u5bf9\u8bef\u5dee\u9650\u5236\u901a\u5e38\u662f\u5728\u8f83\u5927\u7684\u60c5\u51b5\u4e0b\u5141\u8bb8\u8bef\u5dee\u8303\u56f4\u8d8a\u5927\n\n\u5982\u65af\u7279\u6797\u516c\u5f0f\uff1a$n!\\sim \\sqrt{2n\\pi} * (\\frac{n}{e})^n$\uff0c$\\sim$\u9650\u5236\u7684\u662f\u4e24\u8fb9\u7684\u6bd4\u503c\n\n\u4e8e\u662f\u60f3\u5230\u5728$n$\u8f83\u5c0f\u7684\u65f6\u5019\u66b4\u529b\uff0c\u5728$n$\u8f83\u5927\u7684\u65f6\u5019\u4f30\u8ba1\n\n$\\sum_{j=1}^{A\\times i} \\frac{m_i\\times m_j}{i - j}$ = $m_i \\times \\sum_{j=1}^{A\\times i} \\frac{m_j}{i - j}$\n\n1. \u82e5$\\forall j,  i-j=k$\uff0c$m_i \\times \\sum_{j=1}^{A\\times i} \\frac{m_j}{i - j}$ = $m_i / k \\times \\sum_{j=1}^{A\\times i} m_j$\uff0c\u53ef\u7528\u524d\u7f00\u548c\u5728$O(1)$\u65f6\u95f4\u5185\u8be2\u95ee\n\n1. \u663e\u7136$\\forall j1,j2(j1\\neq j2,j1,j2\\in[1,A\\times i]),  i-j1 \\neq i-j2$,\u4e8e\u662f\u8fd1\u4f3c\u5f97\u8ba4\u4e3a$i-1 \\approx i - A\\times i\\; \\Rightarrow i-1 \\approx i - (A \\times i) \\; / 2 \\approx A\\times i\\; $\n\n\u4e8e\u662f\u53ef\u7528$1.$\u4e2d\u7684\u65b9\u6cd5\u5904\u7406$2.$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n^2)(n\\leq 2000) \\; or \\;O(n)$\n\n**\u4ee3\u7801\uff1a**\n```cpp\n#include <iostream>\n#include <cstdio>\n \nusing namespace std;\n \nconst int N = 1e5 + 5;\n \nint n;\nlong double a, m[N], s[N];\n \nint main()\n{\n    ios::sync_with_stdio(false);\n    cin >> n >> a;\n    for (int i = 1; i <= n; ++i)\n        cin >> m[i];\n    for (int i = 1; i <= n; ++i)\n        s[i] = s[i - 1] + m[i];\n    int p = min(2000, n);\n    for (int i = 1; i <= p; ++i)\n    {\n        int g = (int)(a * (1.0 * i));\n        long double ans = 0;\n        for (int j = 1; j <= g; ++j)\n            ans += (m[i] * m[j]) / (i - j) * 1.0;\n        printf(\"%.20LF\\n\", ans);\n    }\n    for (int i = p + 1; i <= n; ++i)\n    {\n        int g = (int)(a * (1.0 * i));\n        if (g == 0)\n            cout << 0 << endl;\n        else\n        {\n            long double ar = a / (1.0 - a);\n            printf(\"%.20LF\\n\", s[g] * m[i] / (i - (a * i) / 2.0));\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1574573198,
        "uid": 78625,
        "name": "pengrui",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3198 \u3010[HNOI2008]\u9065\u8fdc\u7684\u884c\u661f\u3011"
    },
    {
        "content": "[\u672c\u849f\u84bb\u7684Blog](https://www.chnxuzhiyuan.cn/2019/03/07/%E3%80%8CHNOI2008%E3%80%8D%E9%81%A5%E8%BF%9C%E7%9A%84%E8%A1%8C%E6%98%9F-Solution/)\n\n\u53c8\u662f\u4e00\u9053\u7384\u5b66\u7684\u9898\u76eeQwQ\u3002\n\n### \u9898\u89e3\n\n\u9996\u5148\u8981\u4e00\u773c\u770b\u5230\u8fd9\u9898\u7684\u91cd\u70b9\uff1a\u7ed3\u679c\u7684\u76f8\u5bf9\u8bef\u5dee\u4e0d\u8d85\u8fc7$5\\%$\u5373\u53ef\u3002\n\n\u6240\u4ee5\u8003\u8651\u975e\u5b8c\u7f8e\u7b97\u6cd5\u3002\n\n\u9996\u5148\uff0c\u5bf9\u4e8e\u7b2c$i$\u4e2a\u884c\u661f\uff0c\u5bf9\u5b83\u6709\u8d21\u732e\u7684\u661f\u7403\u533a\u95f4\u662f$[1,\\lfloor A\\cdot i\\rfloor]$\u3002\u8bbe$R=\\lfloor A\\cdot i\\rfloor$\u3002\n\n\u7136\u540e\u518d\u8bbe\u4e00\u4e2a\u9608\u503c$S$\u6bd4\u5982$S=n^{0.4}$\u3002\n\n\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\u7c7b\u4f3c\u4e8e\u5206\u5757\uff0c\u628a\u533a\u95f4$[1,R]$\u5206\u6210\u82e5\u5e72\u4e2a\u5757\uff0c\u6bcf\u4e2a\u5757\u7684\u5927\u5c0f\u4e3a$S$\uff0c\u5269\u4e0b\u7684\u96f6\u5934\u66b4\u529b\u641e\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5b8c\u6574\u7684\u5757\uff0c\u8bbe\u8fd9\u4e2a\u5757\u4e3a$[a,b]$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5757\u7684\u8d21\u732e\u7ea6\u7b49\u4e8e\n$$\n\\frac{M[i]\\cdot\\sum_{j=a}^{b}M[j]}{i-\\frac{a+b}{2}}\n$$\n\u8fd9\u4e2a\u5f0f\u5b50\u53ef\u4ee5\u6784\u9020\u524d\u7f00\u548c\u6765\u6c42\u3002\n\n\u628a\u6240\u6709\u5757\u7684\u8d21\u732e\u52a0\u8d77\u6765\uff0c\u6ce8\u610f\u4e0b\u7ec6\u8282\uff0c\u5c31\u80fd\u8fc7\u4e86QwQ\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<cmath>\n#include<cstdio>\nusing namespace std;\ntypedef long long LL;\nconst int maxn=100005;\nint n,S,M[maxn];double A,ans;LL sum[maxn];\ninline int read()\n{\n\tint ret=0,f=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')f=-f;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){ret=ret*10+ch-'0';ch=getchar();}\n\treturn ret*f;\n}\nint main()\n{\n\tn=read();scanf(\"%lf\",&A);S=pow(n,0.38)+1e-10;\n\tfor(int i=1;i<=n;i++){M[i]=read();sum[i]=sum[i-1]+M[i];} //\u6784\u9020\u524d\u7f00\u548c\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint R=i*A+1e-10,j;ans=0;   //\u52a0\u4e0a1e-10\u662f\u4e3a\u4e86\u9632\u6b62\u7cbe\u5ea6\u635f\u5931\n\t\tfor(j=1;j+S<=R;j+=S)    //\u5904\u7406\u6574\u5757\n\t\t\tans+=(double)M[i]*(sum[j+S-1]-sum[j-1])/(i-(double)(2*j+S-1)/2);\n\t\tfor(;j<=R;j++)      //\u5904\u7406\u96f6\u5934\n\t\t\tans+=(double)M[i]*M[j]/(i-j);\n\t\tprintf(\"%lf\\n\",ans);\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1551959238,
        "uid": 42392,
        "name": "\u5f90\u81f4\u8fdc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3198 \u3010[HNOI2008]\u9065\u8fdc\u7684\u884c\u661f\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a  \n\u5bf9\u4e8e\u6bcf\u4e2a $i(1\\le i\\le N)$\uff0c\u6c42\uff1a\n$$\\sum^{\\lfloor A\\times N\\rfloor}_{j=1}\\frac{M_i\\times M_j}{i-j}$$\n$N\\le10^5,0.01<A<0.35,0\\le M_i \\le10^7,\\text{\u7cbe\u5ea6\u8981\u6c42 5\\%}$\n___\n\u7b54\u6848\u8bef\u5dee\u4e0d\u8d85\u8fc7 $5\\%$\uff0c\u6240\u4ee5\u628a\u5206\u6bcd $i-j$ \u4fee\u6539 $5\\%$ \u4e4b\u5185\u4ecd\u7136\u7b26\u5408\u7cbe\u5ea6\u8981\u6c42\uff08\u56e0\u4e3a\u6709\u8bef\u5dee\u7684\u90e8\u5206\u662f\u76f8\u52a0\uff0c\u603b\u8bef\u5dee\u4e0d\u4f1a\u8d85\u8fc7\u8bef\u5dee\u6700\u5927\u7684\u9879\u7684\u8bef\u5dee\uff09\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a\u4e00\u6bb5\u8fde\u7eed\u7684\u533a\u95f4\u7684\u5206\u6bcd\u6539\u6210\u5176\u4e2d\u70b9\u503c\uff0c\u7136\u540e\u7528\u524d\u7f00\u548c\u5feb\u901f\u8ba1\u7b97\u533a\u95f4\u7684\u8d21\u732e\u3002\n\n\u4ee3\u7801\uff1a$O(n\\log_{1.05^2}\\frac{1}{1-A})$\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nint n,m[100001];\ndouble a,ans;\nsigned main()\n{\n\tscanf(\"%lld%lf\",&n,&a);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tans=0;\n\t\tscanf(\"%lld\",&m[i]);\n\t\tint r=i*a;\n\t\twhile(r)\n\t\t{\n\t\t\tdouble mid=i-(i-r)*1.05;\n\t\t\tint l=i-(i-mid)*1.05;\n\t\t\tif(l<0)l=0;\n\t\t\tmid=(l+r+1)/2.0;\n\t\t\tans+=m[i]*(m[r]-m[l])/(i-mid);\n\t\t\tr=l;\n\t\t}\n\t\tm[i]+=m[i-1];\n\t\tprintf(\"%lf\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1600957423,
        "uid": 44840,
        "name": "123456zmy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3198 \u3010[HNOI2008]\u9065\u8fdc\u7684\u884c\u661f\u3011"
    },
    {
        "content": "\u6ce8\u610f\u9898\u76ee\u4e2d\u8bf4\u201c\u6837\u4f8b\u8f93\u51fa\u7684\u7ed3\u679c\u8bef\u5dee\u4e0d\u8d85\u8fc75%,\u4e5f\u7b97\u5bf9\u201d\uff0c\u7136\u540e\n\n\u5f00\u59cb\u4e71\u641e\n\n\u8ba1\u7b97\u884c\u661fi\u7684\u7b54\u6848\uff0c\u8981\u6ee1\u8db3\u6761\u4ef6\n\nA*i>=j ,\u884c\u661fi\u624d\u4f1a\u53d7\u884c\u661fj\u7684\u5f71\u54cd\n\n\u4e5f\u5c31\u662f\u8bf4\u884c\u661fi\u53ea\u4f1a\u53d7\u4ed6\u4e4b\u524d\u7684\u884c\u661f\u7684\u5f71\u54cd\n\n\u4ee4 j=A*i\n\n\u90a3\u4e48 ans[i]=\u03a3(k=1....j) m[i]*m[k]/(i-k)\n\n\u7528sum[i]  \u8868\u793a\u524di\u4e2a\u661f\u7403\u7684\u8d28\u91cf\u548c\n\n\u90a3\u4e48  ans=sum[i]*m[i]/(i-0.5j)\n\n\u5c06k\u6298\u4e2d\u53d6\u503c\uff0c\u641e\u5b9a  \n[\u4ee3\u7801(blog)](http://www.cnblogs.com/adelalove/p/8611371.html)",
        "postTime": 1521542710,
        "uid": 83546,
        "name": "\u4f9d\u4f9d",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3198 \u3010[HNOI2008]\u9065\u8fdc\u7684\u884c\u661f\u3011"
    },
    {
        "content": "\u770b\u5230\u6570\u636e\u89c4\u6a21\u5c31\u5413\u50bb\u4e86\n\n\u8fd9\u9898\u66b4\u529b\u662f\u6839\u672c\u8fc7\u4e0d\u52a8\u7684\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e9b\u7384\u5b66\u65b9\u6cd5\n\n\u5728\u8fd9\u9898\u4e2d\uff0c\u6709\u4e00\u4e2a\u5f88\u5173\u952e\u7684\u63d0\u793a\uff1a\n\n\u201c\u8bef\u5dee\u4e0d\u8d85\u8fc75%\u5373\u53ef\u201d\n\n\u53ef\u4ee5\u53d1\u73b0\u5728\u8fd9\u79cd\u6761\u4ef6\u4e0b\u6b63\u786e\u7b54\u6848\u7684\u8303\u56f4\u975e\u5e38\u5bbd\n\n\u6240\u4ee5\u53ef\u4ee5\u91c7\u7528\u8fd1\u4f3c\u7684\u65b9\u6cd5\uff0c\u4e0d\u5fc5\u6bcf\u4e00\u4e2aj-i\u90fd\u8ba1\u7b97\uff0c\u53ef\u4ee5\u7528\u4e00\u4e2a\u503c\u6765\u4ee3\u66ff\n\n\u67d0\u4e00\u4e2a\u8303\u56f4\u5185\u7684j-i\u3002\n\n\u5177\u4f53\u7684\u7a0b\u5e8f\u5b9e\u73b0\u662f\uff1a\u5bf9\u4e8e\u4e00\u4e2aj\uff0c\u6709\u7f16\u53f7\u4e3ai\u2208[1,aj]\u7684\u884c\u661f\u7ed9\u4ed6\u529b\n\n\u5c06\u6b64\u533a\u95f4\u5206\u6210k\u6bb5\uff0c\u6bcf\u6bb5\u7684\u5206\u6bcdj-i\u8fd1\u4f3c\u7528\u8be5\u533a\u95f4\u4e2d\u70b9\u7684\u5206\u6bcd\u8868\u793a\n\nk\u53ef\u4ee5\u81ea\u884c\u9009\u4e00\u4e2a\u5b9a\u503c\uff0c\u8fd9\u91cc\u7528\u7684\u662f100\u3002\n\n\u53ef\u4ee5\u5f80\u5c0f\u91cc\u53d6\uff0c\u4e0dTLE\u5373\u53ef\u3002\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <algorithm>\n#include <cstring>\n#include <cmath>\nusing namespace std;\ntypedef long long ll;\nint n;\ndouble a,m[100005],sum[100005],f[100005];\nvoid init(){\n    scanf(\"%d%lf\",&n,&a);\n    sum[0]=m[0]=0;\n    for(int i=1;i<=n;i++)\n        scanf(\"%lf\",&m[i]),\n        sum[i]=sum[i-1]+m[i];\n}\nvoid solve(){\n    for(int i=1;i<=n;i++){\n        double s=a*i,mid;\n        int lim=floor(s);//[1,ai]\n        if(lim<=100){//\u533a\u95f4\u957f\u4e0d\u8db3100\u76f4\u63a5\u7b97\n            for(int j=1;j<=lim;j++)\n                f[i]+=m[i]*m[j]/(i-j);\n        }else{\n            int l2=lim/100;\n            for(int j=l2;j<=l2*100;j+=l2)\n                mid=(i-j+i-j+l2-1)*0.5,//\u7b97\u4e2d\u70b9\u7684\u5206\u6bcd\n                f[i]+=(sum[j]-sum[j-l2])*m[i]/mid;\n            for(int j=l2*100+1;j<=lim;j++)//\u4e0d\u8db3100\u76f4\u63a5\u7b97\n                f[i]+=m[i]*m[j]/(i-j);\n        }\n    }\n    for(int i=1;i<=n;i++)\n        printf(\"%.6lf\\n\",f[i]);\n}\nint main(){\n    init();\n    solve();\n    return 0;\n}\n```",
        "postTime": 1493622619,
        "uid": 11765,
        "name": "zqy1018",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P3198 \u3010[HNOI2008]\u9065\u8fdc\u7684\u884c\u661f\u3011"
    }
]
[
    {
        "content": "\u5b66\u8fc7\u4e8c\u7ef4\u7684\u524d\u7f00\u548c\u5417\uff1f\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/cj49001g.png)\n\n\u6b63\u786e\u7684\uff0c\u5b98\u65b9\u6b63\u89e3\u5c31\u662f\u5bb9\u65a5+\u8d2a\u5fc3\u3002\n\n\u56e0\u4e3a\u8981\u8ba9\u67e5\u8be2\u7684\u8303\u56f4\u5c3d\u91cf\u5927\uff0c\u6240\u4ee5\u7d22\u6027\u76f4\u63a5\u8d34\u4e00\u4e2a\u89d2\u7136\u540e\u67e5\u8be2 $4$ \u6b21\u6c42\u5bb9\u65a5\u3002\u91cd\u590d\u67e5\u8be2\u7684\u4e0d\u9700\u8981\u518d\u67e5\u4e86\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u683c\uff0c\u5224\u65ad\u5b83\u5927\u6982\u6240\u5904\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u5728\u4e0a\u9762\u56db\u79cd\u4e2d\u9009\u62e9\u4e00\u4e2a\u6700\u5408\u9002\uff08\u77e9\u5f62\u6700\u5927\uff09\u7684\u67e5\u8be2\u65b9\u6848\uff0c\u8f93\u51fa\u3002\u6ce8\u610f\u5982\u679c\u8fd9\u4e00\u683c\u5728\u4e2d\u95f4\uff0c\u53ef\u4ee5\u9009\u4e00\u4e2a\u8f83\u597d\u7684\uff0c\u867d\u7136\u5224\u5206\u4f3c\u4e4e\u4e25\u4e86\u70b9\uff0c\u4f46\u5e94\u8be5\u8fd8\u662f\u80fd\u8fc7\u7684\u3002\n\n\u5b98\u65b9\u4ee3\u7801\uff1a\n\n```cpp\n// CEOI 2013 - Task: Treasure - Solution\n// Author: Luka Kalinovcic\n\n#include <cstdio>\n#include <map>\n\nusing namespace std;\n\nstruct Rect {\n  int r1, c1, r2, c2;\n  Rect(int r1, int c1, int r2, int c2) : r1(r1), c1(c1), r2(r2), c2(c2) {}\n};\nbool operator < (Rect const& A, Rect const& B) {\n  if (A.r1 != B.r1) return A.r1 < B.r1;\n  if (A.c1 != B.c1) return A.c1 < B.c1;\n  if (A.r2 != B.r2) return A.r2 < B.r2;\n  if (A.c2 != B.c2) return A.c2 < B.c2;\n  return 0;\n}\n\nint n, cff_0102;\nmap<Rect, int> memo;\n\nint Sum(int r1, int c1, int r2, int c2) {\n  if (r1 == r2) return 0;\n  if (c1 == c2) return 0;\n  if (r1 != 0 && r2 != n) {\n    return Sum(r1, c1, n, c2) + Sum(0, c1, r2, c2) - Sum(0, c1, n, c2);\n  }\n  if (c1 != 0 && c2 != n) {\n    return Sum(r1, c1, r2, n) + Sum(r1, 0, r2, c2) - Sum(r1, 0, r2, n);\n  }\n  if (r1 != 0 && r1 >= n - r1) {  // r2 == n\n    return Sum(0, c1, n, c2) - Sum(0, c1, r1, c2);\n  }\n  if (r2 != n - 1 && n - r2 > r2) {  // r1 == 0\n    return Sum(0, c1, n, c2) - Sum(r2, c1, n, c2);\n  }\n  if (c1 != 0 && c1 >= n - c1) {  // c2 == n\n    return Sum(r1, 0, r2, n) - Sum(r1, 0, r2, c1);\n  }\n  if (c2 != n - 1 && n - c2 > c2) {  // c1 == 0\n    return Sum(r1, 0, r2, n) - Sum(r1, c2, r2, n);\n  }\n  Rect rect(r1, c1, r2, c2);\n  if (memo.count(rect)) return memo[rect];\n  printf(\"%d %d %d %d\\n\", r1 + 1, c1 + 1, r2, c2);\n  fflush(stdout);\n  scanf(\"%d\", &memo[rect]);\n  return memo[rect];\n}\n\nint main() {\n  scanf(\"%d\", &n);\n  for (int r = 0; r < n; ++r)\n    for (int c = 0; c < n; ++c)\n      Sum(r, c, r + 1, c + 1);\n\n  printf(\"END\\n\");\n  for (int r = 0; r < n; ++r) {\n    for (int c = 0; c < n; ++c) {\n      printf(\"%d\", Sum(r, c, r + 1, c + 1));\n    }\n    printf(\"\\n\");\n  }\n\n  return 0;\n}\n```\n\n\u5b98\u65b9\u4ee3\u7801\u7ed9\u4e86\u4e00\u4e2a\u53eb `memo` \u7684 `map`\uff0c\u6765\u5b58\u50a8\u8f93\u5165\u4fe1\u606f\u3002\u5728 `Sum` \u51fd\u6570\u7684\u5012\u6570\u7b2c\u4e94\u884c\u53ef\u4ee5\u770b\u51fa\u8fd9\u4e2a\u7a0b\u5e8f\u786e\u5b9e\u7528\u4e86\u8bb0\u5fc6\u5316\u3002\u8bb0\u5f97\u8981\u7528 `fflush(stdout);` \u5237\u65b0\u6807\u51c6\u8f93\u51fa\u3002\u8fd8\u662f\u6bd4\u8f83\u597d\u7406\u89e3\u7684\u3002\n\n\u6700\u540e\u611f\u8c22@[cff_0102](https://www.luogu.com.cn/user/542457) \u4f9b\u9898\uff0c\u4ee5\u53ca@[Sprague_Garundy](https://www.luogu.com.cn/user/764746) \u63d0\u4f9b\u7684\u4ea4\u4e92\u5e93\u548c SPJ\u3002",
        "postTime": 1682523608,
        "uid": 542457,
        "name": "cff_0102",
        "ccfLevel": 4,
        "title": "P9269 [CEOI2013] Treasure \u9898\u89e3"
    }
]
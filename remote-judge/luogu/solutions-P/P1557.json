[
    {
        "content": "\u8fd9\u53ef\u80fd\u662f\u6700\u957f\u7684\u4e00\u7247\u9898\u89e3\uff0c\u4f46\u601d\u8def\u5e94\u8be5\u662f\u5f88\u6e05\u6670\u7684\n\u9996\u5148\u8fd9\u9053\u9898\u53ef\u4ee5\u6a21\u62df\u6216\u8005\u91cd\u8f7d\n\u56e0\u4e3a\u91cd\u8f7d\u770b\u7740\u592a\u4e11\u4e86\uff0c\u6211\u9009\u62e9\u4e86\u6a21\u62df\u5927\u6cd5\n\u9996\u5148\u601d\u8def\u5982\u4e0b\n\u8003\u8651\u8fd9\u4e32\u5b57\u7b26\u53ef\u80fd\u6709\u51e0\u79cd\u5f62\u5f0f\n1. +++++\u6570\u5b57  \n2. +\uff08\u6570\u5b57\uff09\u6570\u5b57\n3. +\u6570\u5b57\n4. \u53ea\u6709\u6570\u5b57\n5. ----\u6570\u5b57\n6. -\uff08\u6570\u5b57\uff09\u6570\u5b57\n7. -\u6570\u5b57\n\n\u56e0\u4e3a\u8981\u8003\u8651\u6b63\u8d1f\u53f7\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u52a0\u6216\u51cf\n\u6b63\u52a0\u6b63\u76f4\u63a5\u52a0\uff1b\u6b63\u52a0\u8d1f\u53d8\u6210\u6b63\u51cf\u6b63\uff1b\u8d1f\u52a0\u8d1f\uff0c\u6539\u4e3a\u6b63\u52a0\u6b63\uff0c\u6807\u8bb0\u4e0d\u53d8\uff1b\u8d1f\u51cf\u8d1f\u53d8\u6210\u6b63\u51cf\u8d1f\uff1b\n\u4f46\u5982\u679c\u6bcf\u6b21\u64cd\u4f5c\u90fd\u8003\u8651\u6b63\u8d1f\u53f7\u4f1a\u975e\u5e38\u7684\u7e41\u7410\n\u6240\u4ee5\u6211\u4eec\u7528\u4e24\u4e2a\u6570\u7ec4 \u4e00\u4e2a\u8bb0\u5f55\u52a0\u7684\u64cd\u4f5c\u7684\u603b\u548c \u4e00\u4e2a\u8bb0\u5f55\u51cf\u7684\u64cd\u4f5c\u7684\u603b\u548c \u8fd9\u6837\u53ea\u9700\u8981\u5728\u8f93\u51fa\u7b54\u6848\u7684\u65f6\u5019\u5224\u65ad\u4e00\u4e0b\u6b63\u8d1f\u53f7\u5373\u53ef\n\u53e6\u5916\u8fd8\u6709\u8bfb\u5165\u65f6\u6570\u662f\u4ece\u9ad8\u4f4d\u5f00\u59cb\u5b58\u7684\n\u6240\u4ee5\u6bcf\u6b21\u8bfb\u5165\u540e\u6211\u4eec\u90fd\u7ffb\u8f6c\u4e00\u4e0b\u6570\u7ec4 \u8ba9\u6700\u4f4e\u4f4d\u5728\u6570\u7ec4\u5f00\u59cb\u7684\u4f4d\u7f6e\n\u8fd9\u6837\u8fdb\u4f4d\u7684\u64cd\u4f5c\u4f1a\u5f88\u597d\u5b9e\u73b0\n\u8fd8\u8981\u5904\u7406\u597d\u4e24\u4e2a\u7b54\u6848\u6570\u7ec4\u7684\u957f\u5ea6\n\n\u63a5\u4e0b\u6765\u5c31\u653e\u51fa\u6211\u7684\u5de8\u957f\u7684\u4ee3\u7801\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014>\n```cpp\n\n# include <iostream>\n# include <string>\n# include <cstring>\n# include <algorithm>\n# include <cstdio>\n# define ll long long\nusing namespace std;\n\nchar s[1000100];\nint len,tot,ans_l = 1,cnt,ans_r = 1,ans_len;\nint st[1000100],a[1000100],ans1[1000100],que[1000000],mu[1000100],ans2[1000100],ans[1000100];\n\nvoid change(){\n\tfor (int i = 1 ; i <= tot; i ++) a[i] = st[i];\n\tfor (int  i = 1 ; i <= tot ; i++) st[i] = a[tot-i+1];\n}\n\nvoid tchange(){\n\tfor (int i = 1 ; i <= cnt ; i++) a[i] = que[i];\n\tfor (int i= 1 ; i <= cnt ; i++) que[i] = a[cnt-i+1];\n}\n\nvoid mul(int sum){\n\tint jin = 0;\n\tfor (int i = 1 ; i <= tot ;i++){\n\t\tst[i] = st[i] * sum + jin;\n\t\tjin = st[i] / 10;\n\t\tst[i] %= 10;\n\t}\n\tif(jin){tot++; st[tot] += jin;}\n}\n\nvoid add(){\n\tint r = max(ans_l,tot); int jin = 0;\n\tfor (int i = 1 ; i <= r ; i++){\n\t\tans1[i] = ans1[i] + st[i] + jin;\n\t\tjin = ans1[i] / 10;\n\t\tans1[i] %= 10;\n\t}\n\tans_l = r;\n\twhile(ans1[ans_l] == 0) ans_l--;\n}\n\nvoid Add(){\n\tint r = max(ans_r,tot); int jin = 0;\n\tfor (int i = 1 ; i <= r ; i++){\n\t\tans2[i] = ans2[i] + st[i] + jin;\n\t\tjin = ans2[i] / 10;\n\t\tans2[i] %= 10;\n\t}\n\tans_r = r;\n\twhile(ans2[ans_r] == 0) ans_r--;\n}\n\nvoid Mmul(){\n\tmemset(mu,0,sizeof(mu));\n\tint jin = 0; int lenn = 1;\n\tfor (int i = 1 ; i <= tot ; i++){\n\t\tfor (int j = 1 ; j <= cnt ; j++){\n\t\t\tmu[i+j-1] += st[i] * que[j];\n\t\t\tmu[i+j] += mu[i+j-1] / 10;\n\t\t\tmu[i+j-1] %= 10;\n\t\t}\n\t}\n\tlenn = tot+cnt;\n\twhile(mu[lenn] == 0) lenn--; \t\n\tmemset(st,0,sizeof(st));\n\tfor (int i = 1 ; i <= lenn ; i++) st[i] = mu[i];\n\ttot = lenn;\n}\n\nvoid jian1(){\n\tint r = max(ans_l,ans_r); int jin = 0;\t\n\tfor (int i = 1 ; i <= r ; i++){\n\t\tans[i] = ans2[i] - ans1[i];\n\t\tif(ans[i] < 0) ans[i] += 10,ans2[i+1] -= 1;\n\t}\t\n\twhile(ans[r] == 0) r--;\n\tans_len = r;\n}\n\nvoid jian2(){\n\tint r = max(ans_l,ans_r); int jin = 0;\n\tfor (int i = 1 ; i <= r ; i++){\n\t\tans[i] = ans1[i] - ans2[i];\n\t\tif(ans[i] < 0) ans[i] += 10, ans1[i+1] -= 1;\n\t}\n\twhile(ans[r] == 0) r--;\n\tans_len = r;\n}\n\nbool check(){\n\tif(ans_l < ans_r) return 1;\n\tif(ans_l > ans_r) return 0;\n\tif(ans_l == ans_r){\n\t\tfor (int i = ans_l ; i >= 1 ; i--){\n\t\t\tif(ans1[i] < ans2[i]) return 1;\n\t\t\tif(ans1[i] > ans2[i]) return 0;\n\t\t\tif(ans1[i] == ans2[i]) continue;\n\t\t}\n\t}\n\treturn 0;\n}\n\nint main(){\n\tcin >> s+1;\n\tlen = strlen(s+1) ;\n\tfor (int i = 1 ; i <= len ; i++){\n\t\tif(s[i] == '+' && s[i+1] == '+'){\n\t\t\tmemset(st,0,sizeof(st));\n\t\t\tint x = i; cnt = 0; tot = 0;\n\t\t\twhile(s[x] <'0' || s[x] >'9') x++,cnt++;\n\t\t\twhile(s[x] >= '0' && s[x] <= '9') st[++tot] = s[x++] - '0';\n\t\t\tchange(); mul(cnt); add();\n\t\t\ti = x - 1; continue;\n\t\t}\n\t\tif(s[i] == '+' && s[i+1] == '('){\n\t\t\tmemset(st,0,sizeof(st)); memset(que,0,sizeof(que));\n\t\t\tint x = i + 2; tot = 0; cnt = 0;\n\t\t\twhile(s[x] >='0' && s[x] <='9') que[++cnt] = s[x++] - '0'; \n\t\t\ttchange();\n\t\t\tif(s[x] == ')'){\n\t\t\t\tx ++;\n\t\t\t\twhile(s[x] >='0' && s[x] <='9') st[++tot] = s[x++] - '0';\n\t\t\t\t change();\t\n\t\t\t}\t\t\t\n\t\t\tMmul(); add();\n\t\t\ti = x - 1; \n\t\t\tcontinue;\t\t}\n\t\tif(s[i] == '+'){\n\t\t\tif(s[i+1] >= '0' && s[i+1] <= '9'){\n\t\t\t\tmemset(st,0,sizeof(st));\n\t\t\t\tint x = i + 1; tot = 0;\n\t\t\t\twhile(s[x] >= '0' && s[x] <= '9') st[++tot] = s[x++] - '0';\n\t\t\t\tchange(); add();\n\t\t\t\ti = x - 1; continue;\n\t\t\t}\t\n\t\t}\n\t\tif(s[i] >= '0' && s[i] <= '9'){\n\t\t\tmemset(st,0,sizeof(st));\n\t\t\tint x= i; tot = 0;\n\t\t\twhile(s[x] >= '0' && s[x] <= '9' ) st[++tot] = s[x++] - '0';\n\t\t\tchange(); add();\n\t\t\ti = x - 1;\n\t\t\tcontinue; \n\t\t}\n\t\tif(s[i] == '-' && s[i+1] == '-'){\n\t\t\tmemset(st,0,sizeof(st));\n\t\t\tint x = i; cnt = 0; tot = 0;\n\t\t\twhile(s[x] <'0' || s[x] >'9') x++,cnt++;\n\t\t\twhile(s[x] >= '0' && s[x] <= '9') st[++tot] = s[x++] - '0';\n\t\t\tchange(); mul(cnt); Add();\n\t\t\ti = x - 1;\n\t\t\tcontinue;\n\t\t}\n\t\tif(s[i] == '-' && s[i+1] == '('){\n\t\t\tmemset(st,0,sizeof(st)); memset(que,0,sizeof(que));\n\t\t\tint x = i + 2; tot = 0; cnt = 0;\n\t\t\twhile(s[x] >='0' && s[x] <='9') que[++cnt] = s[x++] - '0'; tchange();\n\t\t\tif(s[x] == ')'){\n\t\t\t\tx ++;\n\t\t\t\twhile(s[x] >='0' && s[x] <='9') st[++tot] = s[x++] - '0';\n\t\t\t \tchange();\n\t\t\t}\n\t\t\tMmul(); Add();\n\t\t\ti = x - 1; continue;\n\t\t}\n\t\tif(s[i] == '-'){\n\t\t\tif(s[i+1] >= '0' && s[i+1] <= '9'){\n\t\t\t\tmemset(st,0,sizeof(st));\n\t\t\t\tint x = i + 1; tot = 0;\n\t\t\t\twhile(s[x] >= '0' && s[x] <= '9') st[++tot] = s[x++] - '0';\n\t\t\t\tchange(); Add();\n\t\t\t\ti = x - 1; continue;\n\t\t\t}\n\t\t}\t\n\t}\n\tif(check()){ cout<<\"-\"; jian1();}\n\telse jian2();\n\n\tfor (int i = ans_len ; i >= 1 ; i --) cout<<ans[i]; \n\tif(ans_len <= 0) cout<<0<<endl;\n\treturn 0;\n}\n/*\n+(255)10---3-(23)100\n*/\n```\n",
        "postTime": 1568801990,
        "uid": 160653,
        "name": "\u8d64\u9704",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1797 \u3010\u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5_NOI\u5bfc\u520a2010\u63d0\u9ad8\uff0805\uff09\u3011"
    },
    {
        "content": "## ~~\u6700\u5c0f\u751f\u6210\u6811~~Kruscal\u7684\u52a0\u6cd5\n\n\n\u672c\u849f\u84bb\u5199\u5f97\u5f88\u7c97\u9c81\uff0c\u8bf7dalao\u89c1\u8c05\u3002\n\nAC\u987b\u51c6\u5907\uff1a\n\n\u53ef\u4ee5\u4e0d\u8003\u8651\u8d1f\u6570\u7684\u9ad8\u7cbe\u5ea6\uff08\u52a0\u6cd5\uff0c\u4e58\u6cd5\uff0c\u51cf\u6cd5\uff09\uff0c\u6211\u559c\u6b22\u53eb\u5b83Int\n\nInt ans1,ans_1; ans1\u8bb0\u5f55+x\uff0cans_1\u8bb0\u5f55-x\n\n\u63a5\u4e0b\u6765\uff1a\n\n\u628a\u6570\u5b57\u6309\u7167\u4e0d\u540c\u8868\u793a\u65b9\u6cd5\u62ff\u4e0b\u6765\uff0c\u7d2f\u52a0\u5230ans1\u6216ans_1\n\n\u6bd4\u8f83ans1\u4e0eans_1\u7684\u5927\u5c0f\uff0c\u5904\u7406\u540e\u8f93\u51fa\u3002\n\n\u5177\u4f53\u8bf7\u53c2\u8003\u4ee3\u7801\uff1a\n```cpp\n//\u6211\u559c\u6b22\u628a\u67d0\u4e00\u90e8\u5206\u7684\u6ce8\u91ca\u5199\u5728\u90a3\u4e00\u90e8\u5206\u4e0b\u9762\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define TT 10000\n\nusing namespace std;\n\nchar s[2005];\n\nclass Int\n{\npublic:\n\tint a[505],len;\n\tInt()\n\t{\n\t\tmemset(a,0,sizeof(a));\n\t\tlen=0;\n\t}\n\tInt(int x)\n\t{\n\t\tmemset(a,0,sizeof(a));\n\t\tlen=0;\n\t\twhile(x)\n\t\t{\n\t\t\ta[++len]=x%TT;\n\t\t\tx/=TT;\n\t\t}\n\t}\n\tInt operator +(Int b)\n\t{\n\t\tInt c;\n\t\tc.len=max(len,b.len);\n\t\tfor(int i=1;i<=c.len;++i)\n\t\t{\n\t\t\tc.a[i]+=a[i]+b.a[i];\n\t\t\tc.a[i+1]=c.a[i]/TT;\n\t\t\tc.a[i]%=TT;\n\t\t}\n\t\tif(c.a[c.len+1])\n\t\t\tc.len++;\n\t\treturn c;\n\t}\n    //\u9ad8\u7cbe\u5ea6\u52a0\u6cd5\u4e0d\u89e3\u91ca\n\tInt operator *(Int b)\n\t{\n\t\tInt c;\n\t\tc.len=len+b.len;\n\t\tfor(int i=1;i<=len;++i)\n\t\t{\n\t\t\tfor(int j=1;j<=b.len;++j)\n\t\t\t{\n\t\t\t\tc.a[i+j-1]+=a[i]*b.a[j];\n\t\t\t\tc.a[i+j]+=c.a[i+j-1]/TT;\n\t\t\t\tc.a[i+j-1]%=TT;\n\t\t\t}\n\t\t}\n\t\twhile(!c.a[c.len])\n\t\t\tc.len--;\n\t\treturn c;\n\t}\n    //\u9ad8\u7cbe\u5ea6\u4e58\u6cd5\u4e0d\u89e3\u91ca\n\tInt operator -(const Int b)\n\t{\n\t\tInt c;\n\t\tc.len=max(len,b.len);\n\t\tfor (int i=1;i<=c.len;i++)\n\t\t{\n\t\t\tc.a[i]+=a[i]-b.a[i]+TT;\n\t\t\tc.a[i+1]+=c.a[i]/TT-1;\n\t\t\tc.a[i]%=TT;\n\t\t}\n\t\twhile (c.len>1&&!c.a[c.len]) c.len--;\n\t\treturn c;\n\t}\n    //\u9ad8\u7cbe\u5ea6\u51cf\u6cd5\u4e0d\u89e3\u91ca\n\tbool operator <(Int b)const\n\t{\n\t\tif(b.len>len)\n\t\t\treturn true;\n\t\telse if(len>b.len)\n\t\t\treturn false;\n\t\tfor(int i=len;i>0;--i)\n\t\t{\n\t\t\tif(b.a[i]>a[i])\n\t\t\t\treturn true;\n\t\t\tif(b.a[i]<a[i])\n\t\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t}\n    //\u5c0f\u4e8e\u4e0d\u89e3\u91ca\n\tvoid write()\n\t{\n\t\tprintf(\"%d\",a[len]);\n\t\tfor(int i=len-1;i>=1;--i)\n\t\t\tprintf(\"%04d\",a[i]);\n\t\tprintf(\"\\n\");\n\t}\n    //\u8f93\u51fa\n}ans1,ans_1;\n//ans1\u8bb0\u5f55+x\uff0cans_1\u8bb0\u5f55-x\n\nvoid ToInt64(int &i)\n{\n\tInt ret=0,cs=0,p=10;\n\tint f=1;\n\tif(s[i]=='-')\n\t\tf=-1;\n\tif(s[i+1]=='(')\n\t{\n    //\u5982\u679c\u6309+(2)33\u8868\u8fbe\n\t\ti+=2;\n\t\twhile(s[i]>='0'&&s[i]<='9')\n\t\t{\n\t\t\tInt res=(int)s[i]-'0';\n\t\t\tcs=cs*p+res,++i;\n\t\t}\n        //\u62ff\u4e0b\u62ec\u53f7\u5185\u6570\u5b57\n\t\ti++;\n\t\twhile(s[i]>='0'&&s[i]<='9')\n\t\t{\n\t\t\tInt res=(int)s[i]-'0';\n\t\t\tret=ret*p+res,++i;\n\t\t}\n        //\u53d6\u8d70\u8981\u52a0\u4e0a\u7684\u6570\u5b57\n\t\tInt c=ret*cs;\n        //\u8fd9\u6b21\u8fd0\u7b97\u7684\u7ed3\u679c\n\t\tif(f==-1)\n\t\t\tans_1=ans_1+c;\n\t\telse\n\t\t\tans1=ans1+c;\n\t}\n\telse if(s[i+1]>='0'&&s[i+1]<='9')\n\t{\n    //\u5982\u679c\u76f4\u63a5\u6309\u7167+233\u8868\u8fbe\n    //\u8fd9\u6bb5\u91cc\u9762\u6709\u4e2a\u9632\u6284\u88ad\u7528\u7684\"\u9519\u8bef\"\n\t\ti++;\n\t\twhile(s[i]>='0'&&s[i]<='9')\n\t\t{\n\t\t\tInt res=(int)s[i]-'0';\n\t\t\tret=ret*p+res,++i;\n\t\t}\n        //\u53d6\u8d70\u6570\u5b57\n\t\tint c=ret;\n\t\tif(f==-1)\n\t\t\tans_1=ans_1+c;\n\t\telse\n\t\t\tans1=ans1+c;\n\t}\n\telse\n\t{\n    //\u5982\u679c\u662f+++233\u7684\u5f62\u5f0f\n\t\ti++,cs=1;\n\t\tInt res=1;\n\t\twhile(s[i]=='-'||s[i]=='+')\n\t\t{\n\t\t\tcs=cs+res,++i;\n\t\t}\n        //\u6570\u4e00\u4e0b\u7b26\u53f7\u4e2a\u6570\n\t\twhile(s[i]>='0'&&s[i]<='9')\n\t\t{\n\t\t\tInt res=(int)s[i]-'0';\n\t\t\tret=ret*p+res,++i;\n\t\t}\n        //\u62ff\u8d70\u6570\u5b57\n\t\tInt c=ret*cs;\n\t\tif(f==-1)\n\t\t\tans_1=ans_1+c;\n\t\telse\n\t\t\tans1=ans1+c;\n\t}\n    //\u8bdd\u8bf4+233\u4e0e+++233\u662f\u53ef\u4ee5\u5e76\u5230\u4e00\u8d77\u7684\uff0c\u8fd9\u91cc\u662f\u6211\u5199\u7684\u8fc7\u4e8e\u7c97\u9c81\u4e86\n}\n\nint main()\n{\n//\u4e0d\u8981\u5728luogu\u914d\u6587\u4ef6\uff01\u81ea\u884c\u906e\u853d\n\tfreopen(\"test.in\",\"r\",stdin);\n\tfreopen(\"test.out\",\"w\",stdout);\n//\u4e0d\u8981\u5728luogu\u914d\u6587\u4ef6\uff01\u81ea\u884c\u906e\u853d\n\n\tscanf(\"%s\",s+1);\n\tint i=1;\n\twhile(s[i])\n\t\tToInt64(i);\n\tif(!(ans1<ans_1)&&!(ans_1<ans1))\n\t{\n\t\tprintf(\"0\");\n\t}\n    //\u5982\u679c\u03a3x>0=\u03a3x<0\uff0c\u8f93\u51fa0\n\telse if(ans1<ans_1)\n\t{\n\t\tans_1=ans_1-ans1;\n\t\tprintf(\"-\");\n\t\tans_1.write();\n\t}\n    //\u5982\u679c\u51cf\u6570\u5927\u4e8e\u88ab\u51cf\u6570\uff0c\u8f93\u51fa\u4e00\u4e2a\u8d1f\u53f7\u4ee5\u53caans_1-ans1\n\telse\n\t{\n\t\tans1=ans1-ans_1;\n\t\tans1.write();\n\t}\n    //\u88ab\u51cf\u6570\u5927\u4e8e\u51cf\u6570\uff0c\u76f4\u63a5\u8f93\u51faans1-ans_1\n\treturn 0;\n}\n```",
        "postTime": 1520425267,
        "uid": 32831,
        "name": "\u5439\u96ea\u5439\u96ea\u5439",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "\u9996\u5148\u8bfb\u9898,\u901a\u8fc7\u9898\u76ee\u6211\u4eec\u53ef\u4ee5\u5f97\u77e5:\n- \u7b97\u5f0f\u53ea\u5b58\u5728 '+' , '-' , '*' \u7684\u8fd0\u7b97\u4e14\u4e0d\u7528\u8003\u8651\u8fd0\u7b97\u4f18\u5148\u7ea7\n- \u4e0d\u4f1a\u51fa\u73b0\u8fde\u4e58\n\n\u53d1\u73b0\u4e0d\u7528\u8003\u8651\u4f18\u5148\u7ea7\u540e\u6211\u7684\u7b2c\u4e00\u60f3\u6cd5\u662f \n##### \u5c06\u7b97\u5f0f\u62c6\u5206\u6210\u4e00\u4e9b\u5c0f\u7684\u5355\u4e00\u7b97\u5f0f( \u8fd0\u7b97\u7b26 + \u6570\u5b57 )\u518d\u8ba1\u7b97\n\u5982: \u5904\u7406 str=\"+++1++2+(3)3\" :\n\n1. \u627e\u5230\u5728\u4e0a\u4e00\u4e2a\u8fd0\u7b97\u7b26\u53f7\u540e\u91cd\u65b0\u51fa\u73b0\u7684\u7b2c\u4e00\u4e2a\u8fd0\u7b97\u7b26\u53f7\u4f4d\u7f6e i=0\n2. \u4ece\u627e\u5230\u7684\u8fd0\u7b97\u7b26\u4f4d\u7f6e\u8d77\u627e\u5230 \u524d\u4e00\u4f4d\u4e0d\u662f+\u6216-\u7684 \u8fd0\u7b97\u7b26\u7684\u4f4d\u7f6e j=4\n3. str[i]~str[j] (\u4e0d\u542bstr[j]) \u5373\u4e3a\u4e00\u7ec4\u5355\u4e00\u7b97\u5f0f,\u8ba1\u7b97\u5176\u7ed3\u679c\u5e76\u53e0\u52a0\u5230ans\u4e0a\n4. \u91cd\u590d\u4ee5\u4e0a\u64cd\u4f5c\n\n## \u62c6\u5206\u4ee3\u7801:\n```c\n\t// \u56e0\u4e3a\u8981\u9760\u8fd0\u7b97\u7b26\u8fdb\u884c\u6807\u8bc6,\u6240\u4ee5\u9700\u8981\u5728\u524d\u540e\u7aef\u6dfb\u52a0\u7b26\u53f7\n\n\tscanf(\"%s\", &(str[1]));// \u76f4\u63a5\u4ece\u7b2c\u4e00\u4f4d\u5f00\u59cb\u8f93\u5165\n\tif (str[1] != '+' && str[1] != '-')str[0] = '+';// \u907f\u514d\u91cd\u590d\n\telse str[0] = ' ';\n\tint len = strlen(str);\n\tstr[len] = '+';\n\t//str[len+1]='\\0';// \u5728\u5168\u5c40\u5b9a\u4e49\u7684\u6570\u7ec4\u9ed8\u8ba4\u521d\u59cb\u5316\u4e3a0\n    \n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tif (str[i] == '+' || str[i] == '-') // \u627e\u5230\u8fd0\u7b97\u7b26\n\t\t{\n\t\t\tfor (int j = i + 1; j < len; j++) // \u5f00\u59cb\u627e\u7ed3\u675f\u4f4d\u7f6e\n\t\t\t{\n\t\t\t\tif (str[j] == '+' || str[j] == '-')\n\t\t\t\t{\n\t\t\t\t\tif (str[j - 1] != '+' && str[j - 1] != '-')\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (int k = i; k < j; k++)stmp[k - i] = str[k];// \u62f7\u8d1d\u8fd9\u4e00\u6bb5\u5b57\u7b26\u4e32\n\t\t\t\t\t\tstmp[j - i] = 0;\n\n\t\t\t\t\t\t// TODO : \u5904\u7406\u8fd9\u4e00\u6bb5\u7b97\u5f0f\n                        \n\t\t\t\t\t\ti = j - 1; // \u8df3\u5230\u4e0b\u4e00\u6bb5\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n```\n\n### \u7136\u540e\u5904\u7406\u8fd9\u4e00\u5c0f\u6bb5\u4ee3\u7801:\n```c\nint GetVal(const char* str)\n{\n\tint num = 0, plus = 0, minus = 0;\n   // num\u5b58\u62ec\u53f7\u5916\u7684\u6570,plus\u548cminus\u5206\u522b\u5b58\u50a8\u52a0(\u51cf)\u6b21\u6570\n\tint len = strlen(str);\n\tint tmp = 0, tmpn = 0;\n   // tmp\u6807\u8bb0\u662f\u5728\u8bb0\u5f55\u62ec\u53f7\u5185\u7684\u6570\u8fd8\u662f\u8981\u8ba1\u7b97\u7684\u6570\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tif (str[i] == '+')plus++;\n\t\telse if (str[i] == '-')minus++;\n\t\telse if ('0' <= str[i] && str[i] <= '9')\n\t\t{\n        // \u8ba1\u7b97\u6570\u5b57\n\t\t\tif (tmp)\n\t\t\t{\n\t\t\t\ttmpn = tmpn * 10 + str[i] - '0';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnum = num * 10 + str[i] - '0';\n\t\t\t}\n\t\t}\n\t\telse if (str[i] == '(')// \u6807\u8bb0\n\t\t{\n\t\t\ttmp = 1;\n\t\t}\n\t\telse if (str[i] == ')')\n\t\t{\n\t\t\ttmp = 0;\n\t\t}\n\t}\n\n\tif (tmpn)tmpn--;// \u5982\u679c\u6709\u62ec\u53f7\u4e2d\u7684\u6570,\u5219\u51cf\u53bb\u62ec\u53f7\u524d\u7684\u7b26\u53f7\u6240\u4ee3\u8868\u7684\u4e00\u6b21\n\n\tif (plus)\n\t{\n\t\tplus += tmpn;// \u53e0\u52a0\n\t\treturn num * plus;\n\t}\n\telse\n\t{\n\t\tminus += tmpn;// \u53e0\u52a0\n\t\treturn -num * minus;\n\t}\n}\n```\n\n~~(\u7136\u540e\u6109\u5feb\u768440\u5206\u4e86)~~\n\n\u8fd9\u4e2a\u65f6\u5019\u7784\u5230\u9898\u76ee\u4e0b\u65b9\u8bf4\u7684 \"\u7b97\u5f0f\u957f\u5ea6\u4e0d\u8d85\u8fc72000\" \u5c31\u5f88\u660e\u663e\u8981\u4f7f\u7528\u9ad8\u7cbe\u5ea6\n\n~~(\u6211\u770bDalao\u4eec\u90fd\u662f\u81ea\u5df1\u5199\u4e86\u4e00\u4e2a\u7c7b,\u4e0d\u8fc7\u6211\u6bd4\u8f83\u5f31,\u53ea\u80fd\u5199\u4e2a\u7ed3\u6784\u4f53\u6765\u4ee3\u66ff)\n\u9ad8\u7cbe\u5ea6\u51e0\u4e4e\u5168\u5fd8\u5149\u7684\u6211\u5199\u4e86\u5c06\u8fd1\u4e00\u5929...~~\n\n```c\ntypedef struct _StrNumber\n{\n\tchar num[8848];\n\tint flag; // \u662f\u5426\u6709\u8d1f\u53f7\n}LLL;\n\nvoid pluss(char* numA, char* numB); // \u52a0\u6cd5 \u5c06\u7ed3\u679c\u5b58\u5165numA\nvoid minuss(char* numA, char* numB, char* ans); // \u51cf\u6cd5,\u5c06\u7ed3\u679c\u5b58\u5165ans\nvoid cf(char* numA, char* numB); // \u4e58\u6cd5(\u5fd8\u4e86\u82f1\u6587\u600e\u4e48\u62fc),\u5c06\u7ed3\u679c\u5b58\u5165numA\nvoid LLLcmp(char* a,char* b); // \u6bd4\u8f83,\u8fd4\u56de\u503c\u7c7b\u4f3cstrcmp\n\n// \u5b9e\u73b0:\n\n/*\u9ad8\u7cbe\u5ea6\u52a0\u6cd5 \u5c06\u7ed3\u679c\u5b58\u5165numA*/\nvoid pluss(char* numA, char* numB)\n{\n\tint arr1[2008] = { 0 }, arr2[2008] = { 0 }, len, len1, len2, i, j;\n\n\tlen1 = strlen(numA);\n\tfor (i = 0; i < len1; i++)//\u5b57\u7b26\u4e32\u5012\u53d9\u5bfc\u5165\u6570\u7ec4\uff0c\u65b9\u4fbf\u4ece\u4f4e\u4f4d\u5f00\u59cb\u8fd0\u7b97\n\t\tarr1[i] = numA[len1 - 1 - i] - '0';\n\n\tlen2 = strlen(numB);\n\tfor (i = 0; i < len2; i++)\n\t\tarr2[i] = numB[len2 - 1 - i] - '0';//\u5b57\u7b26\u4e32\u4e2d\u7684\u662f\u5b57\u7b26\uff0c\u8981\u8f6c\u6362\u6210\u6570\u5b57\n\tlen = (len1 > len2) ? len1 : len2;\n\tfor (i = 0; i < len; i++)\n\t{\n\t\tarr1[i + 1] += j = (arr1[i] + arr2[i]) / 10;//\u8fdb\u4f4d\n\t\tarr1[i] = (arr1[i] + arr2[i]) % 10;//\u4fdd\u7559\n\t}\n\tif (j)len++;//\u6700\u540e\u4e00\u4f4d\u662f\u5426\u8fdb\u4f4d\n\tfor (i = 0; i < len; i++)\n\t\tnumA[i] = arr1[len - 1 - i] + '0';\n\t\t//printf(\"%d\", arr1[len - 1 - i]);\n}\n\n/*\u51cf\u6cd5*/\nchar tmp[2008] = { 0 };\nint arr1[2008] = { 0 }, arr2[2008] = { 0 };\nvoid minuss(char* numA, char* numB, char* ans)\n{\n\tmemset(tmp, 0, 2008);\n\tmemset(arr1, 0, 2008*4);\n\tmemset(arr2, 0, 2008*4);\n\tint len = 0, len1 = strlen(numA), len2 = strlen(numB);\n\tint i, j;\n\tint flag = 0;\n\n\tlen1 = strlen(numA), len2 = strlen(numB);\n\tfor (i = 0; i <= len1 - 1; i++)arr1[len1 - i] = numA[i] - '0';\n\tfor (i = 0; i <= len2 - 1; i++)arr2[len2 - i] = numB[i] - '0';\n\ti = 1;\n\twhile (i <= len1 || i <= len2)\n\t{\n\t\tif (arr1[i] < arr2[i])\n\t\t{\n\t\t\tarr1[i] += 10;\n\t\t\tarr1[i + 1]--;\n\t\t}\n\t\ttmp[i] = arr1[i] - arr2[i] + '0';\n\t\ti++;\n\t}\n\tlen = i;\n\twhile ((tmp[len - 1] == '0') && (len >= 0))len--;\n\tj = 0;\n\tfor (i = len - 1; i >= 0; i--)\n\t{\n\t\tans[j] = tmp[i];\n\t\t//printf(\"'%c\\n\", tmp[i]);\n\t\tj++;\n\t}\n}\n\nint a[2008] = { 0 }, b[2008] = { 0 }, c[4016] = { 0 };\nvoid cf(char* numA, char* numB)\n{\n\tint lena, lenb, lenc, i, j, x;\n\n\tmemset(c, 0, 4016 * sizeof(int));\n\n\tlena = strlen(numA); lenb = strlen(numB);\n\tfor (i = 0; i < lena; i++) a[lena - i-1] = numA[i] - '0';\n\tfor (i = 0; i < lenb; i++) b[lenb - i-1] = numB[i] - '0';\n\n\tfor (i = 0; i < lena; i++)\n\t{\n\t\tx = 0;\n\t\tfor (j = 0; j < lenb; j++)/*\u5bf9\u4e58\u6570\u7684\u6bcf\u4e00\u4f4d\u8fdb\u884c\u5904\u7406*/\n\t\t{\n\t\t\tc[i + j] = a[i] * b[j] + x + c[i + j];/*\u5f53\u524d\u4e58\u79ef+\u4e0a\u6b21\u4e58\u79ef\u8fdb\u4f4d+\u539f\u6570*/\n\t\t\tx = c[i + j] / 10;\n\t\t\tc[i + j] %= 10;\n\t\t}\n\t\tc[i + lenb] = x;\n\t}\n\n\tlenc = lena + lenb;\n\twhile (c[lenc - 1] == 0 && lenc > 1)/*\u5220\u9664\u524d\u5bfc0*/\n\t\tlenc--;\n\tj = 0;\n\tfor (i = lenc - 1; i >= 0; i--)\n\t{\n\t\t//printf(\"%d_\", c[i]);\n\t\tnumA[j] = c[i] + '0', j++;\n\t}\n}\n\nint LLLcmp(char* a, char* b)\n{\n\t// -1:a\u5c0f,0:\u76f8\u7b49,1:b\u5c0f\n\tint len1 = strlen(a), len2 = strlen(b);\n\tif (len1 < len2)return -1;\n\telse if (len1 > len2)return 1;\n\n\tfor (int i = 0; i < len1; i++)\n\t{\n\t\tif (a[i] < b[i])return -1;\n\t\telse if (a[i] > b[i])return 1;\n\t}\n\treturn 0;\n}\n\n```\n\u4e3a\u4e86\u9002\u914d\u9ad8\u7cbe\u5ea6,\u4ee3\u7801\u4e5f\u8981\u6539\u52a8\u4ebf\u4e0b\n```c\n// \u6c42\u51fastr\u7b97\u5f0f\u7684\u503c\nvoid GetVal(const char* str)\n{\n\tchar plus[2008] = {0}, minus[2008] = { 0 };\n\n\t/*plus \u548c minus \u5206\u522b\u8868\u793a\u52a0(\u51cf)\u51e0\u6b21*/\n\tlong long len = strlen(str);\n\t/*\n\t* flag \u6807\u8bc6\u5f53\u524d\u8ba1\u7b97\u7684\u662f\u62ec\u53f7\u5185\u7684\u6570\u5b57\u8fd8\u662f\u62ec\u53f7\u5916\u7684\n\t* num \u50a8\u5b58\u62ec\u53f7\u5916\u7684\u6570 tmpn \u50a8\u5b58\u62ec\u53f7\u5185\u7684\u6570\n\t*/\n\tlong long flag = 0;\n\tchar num[2008] = { 0 }, tmpn[2008] = { 0 };\n\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tif (str[i] == '+')\n\t\t{\n\t\t\tpluss(plus, \"1\");\n\t\t}\n\t\telse if (str[i] == '-')\n\t\t{\n\t\t\tpluss(minus, \"1\");\n\t\t}\n\t\telse if (str[i] == '(')\n\t\t{\n\t\t\tflag = 1;\n\t\t}\n\t\telse if (str[i] == ')')\n\t\t{\n\t\t\tflag = 0;\n\t\t}\n\t\telse if ('0' <= str[i] && str[i] <= '9')\n\t\t{\n\t\t\t/*\u8ba1\u7b97\u6570\u5b57*/\n\t\t\tif (flag)\n\t\t\t{\n\t\t\t\t//tmpn = tmpn * 10 + str[i] - '0';\n\t\t\t\tint e = strchr(str, ')') - str;\n\t\t\t\t// \u627e\u5230\u53f3\u62ec\u53f7\u7684\u4f4d\u7f6e,\u76f4\u63a5\u590d\u5236\n\t\t\t\tfor (int j = i; j < e; j++)\n\t\t\t\t{\n\t\t\t\t\ttmpn[j - i] = str[j];\n\t\t\t\t}\n\t\t\t\tflag = 0;\n\t\t\t\ti = e;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//num = num * 10 + str[i] - '0';\n\t\t\t\tfor (int j = i; j < len; j++)\n\t\t\t\t{\n\t\t\t\t\tnum[j - i] = str[j];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (tmpn[0])minuss(tmpn, \"1\", tmpn);\n\t\n\tif (plus[0])/*\u5982\u679c\u662f\u52a0*/\n\t{\t\n\t\tpluss(plus, tmpn);\n\t\t\n\t\tcf(num, plus);\n\t\tif (ans.flag == 0)\n\t\t{\n\t\t\t// \u5982\u679c\u539f\u6570\u662f\u6b63\u6570,\u5c31\u76f4\u63a5\u52a0\n\t\t\tpluss(ans.num, num);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// \u5426\u5219\u662f\u8d1f\u6570\n\t\t\tint tmp = LLLcmp(ans.num, num);\n\t\t\tif (tmp == 0)\n\t\t\t{\n\t\t\t\t// \u5982\u679c\u76f8\u540c\u76f8\u52a0\u5c31\u662f0\n\t\t\t\tans.flag = 0;\n\t\t\t\tans.num[0] = '0';\n\t\t\t\tans.num[1] = '\\0';\n\t\t\t}\n\t\t\telse if (tmp > 0)\n\t\t\t{\n\t\t\t\t// \u5982\u679cnum\u8f83\u5c0f\u5219\u8fd8\u662f\u8d1f\u6570,\u6570\u503c\u53d8\u4e3aans-num\n\t\t\t\tans.flag = 1;\n\t\t\t\tminuss(ans.num, num, ans.num);\n\t\t\t}\n\t\t\telse if (tmp < 0)\n\t\t\t{\n\t\t\t\t// \u5982\u679c\u539f\u6570\u8f83\u5c0f\u5219\u53d8\u4e3a\u6b63\u6570,\u6570\u503c\u53d8\u4e3anum-ans\n\t\t\t\tans.flag = 0;\n\t\t\t\tminuss(num, ans.num, ans.num);\n\n\t\t\t}\n\t\t}\n\t}\n\telse/*\u5426\u5219\u662f\u51cf*/\n\t{\n\t\tpluss(minus, tmpn);\n\n\t\tcf(num, minus);\n\n\t\tif (ans.flag == 1)\n\t\t{\n        // \u5982\u679c\u662f\u8d1f\u6570,\u5219\u76f4\u63a5\u589e\u52a0\u6570\u503c\n\t\t\tpluss(ans.num, num);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint tmp = LLLcmp(ans.num, num);\n\t\t\tif (tmp == 0)\n\t\t\t{\n\t\t\t\tans.flag = 0;\n\t\t\t\tans.num[0] = '0';\n\t\t\t\tans.num[1] = '\\0';\n\t\t\t}\n\t\t\telse if (tmp > 0)\n\t\t\t{\n            // \u51cf\u6570\u5c0f\u4e8e\u88ab\u51cf\u6570,\u4ecd\u662f\u6b63\u6570\n\t\t\t\tans.flag = 0;\n\t\t\t\tminuss(ans.num, num, ans.num);\n\t\t\t}\n\t\t\telse if (tmp < 0)\n\t\t\t{\n            // \u88ab\u51cf\u6570\u5c0f\u4e8e\u51cf\u6570,\u53d8\u4e3a\u8d1f\u6570\n\t\t\t\tans.flag = 1;\n\t\t\t\tminuss(num, ans.num, ans.num);\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n# \u5b8c\u6574\u4ee3\u7801\n~~(\u957f\u66b4\u4e86)~~\n```c\n// P1557 Kruscal\u7684\u52a0\u6cd5\n//#define _CRT_SECURE_NO_DEPRECATE\n#include <stdio.h>\n#include <string.h>\n\nchar str[2008], stmp[2008];\n#define MAX 8848\n\ntypedef struct _StrNumber\n{\n\tchar num[MAX];\n\tint flag; // \u662f\u5426\u6709\u8d1f\u53f7\n}LLL;\n\nLLL ans;\n\n/*\u9ad8\u7cbe\u5ea6\u52a0\u6cd5 \u5c06\u7ed3\u679c\u5b58\u5165numA*/\nvoid pluss(char* numA, char* numB)\n{\n\tint arr1[2008] = { 0 }, arr2[2008] = { 0 }, len, len1, len2, i, j;\n\n\tlen1 = strlen(numA);\n\tfor (i = 0; i < len1; i++)//\u5b57\u7b26\u4e32\u5012\u53d9\u5bfc\u5165\u6570\u7ec4\uff0c\u65b9\u4fbf\u4ece\u4f4e\u4f4d\u5f00\u59cb\u8fd0\u7b97\n\t\tarr1[i] = numA[len1 - 1 - i] - '0';\n\n\tlen2 = strlen(numB);\n\tfor (i = 0; i < len2; i++)\n\t\tarr2[i] = numB[len2 - 1 - i] - '0';//\u5b57\u7b26\u4e32\u4e2d\u7684\u662f\u5b57\u7b26\uff0c\u8981\u8f6c\u6362\u6210\u6570\u5b57\n\tlen = (len1 > len2) ? len1 : len2;\n\tfor (i = 0; i < len; i++)\n\t{\n\t\tarr1[i + 1] += j = (arr1[i] + arr2[i]) / 10;//\u8fdb\u4f4d\n\t\tarr1[i] = (arr1[i] + arr2[i]) % 10;//\u4fdd\u7559\n\t}\n\tif (j)len++;//\u6700\u540e\u4e00\u4f4d\u662f\u5426\u8fdb\u4f4d\n\tfor (i = 0; i < len; i++)\n\t\tnumA[i] = arr1[len - 1 - i] + '0';\n\t\t//printf(\"%d\", arr1[len - 1 - i]);\n}\n\n/*\u51cf\u6cd5*/\nchar tmp[2008] = { 0 };\nint arr1[2008] = { 0 }, arr2[2008] = { 0 };\nvoid minuss(char* numA, char* numB, char* ans)\n{\n\tmemset(tmp, 0, 2008);\n\tmemset(arr1, 0, 2008*4);\n\tmemset(arr2, 0, 2008*4);\n\tint len = 0, len1 = strlen(numA), len2 = strlen(numB);\n\tint i, j;\n\tint flag = 0;\n\n\tlen1 = strlen(numA), len2 = strlen(numB);\n\tfor (i = 0; i <= len1 - 1; i++)arr1[len1 - i] = numA[i] - '0';\n\tfor (i = 0; i <= len2 - 1; i++)arr2[len2 - i] = numB[i] - '0';\n\ti = 1;\n\twhile (i <= len1 || i <= len2)\n\t{\n\t\tif (arr1[i] < arr2[i])\n\t\t{\n\t\t\tarr1[i] += 10;\n\t\t\tarr1[i + 1]--;\n\t\t}\n\t\ttmp[i] = arr1[i] - arr2[i] + '0';\n\t\ti++;\n\t}\n\tlen = i;\n\twhile ((tmp[len - 1] == '0') && (len >= 0))len--;\n\tj = 0;\n\tfor (i = len - 1; i >= 0; i--)\n\t{\n\t\tans[j] = tmp[i];\n\t\t//printf(\"'%c\\n\", tmp[i]);\n\t\tj++;\n\t}\n}\n\nint a[2008] = { 0 }, b[2008] = { 0 }, c[4016] = { 0 };\nvoid cf(char* numA, char* numB)\n{\n\tint lena, lenb, lenc, i, j, x;\n\n\tmemset(c, 0, 4016 * sizeof(int));\n\n\tlena = strlen(numA); lenb = strlen(numB);\n\tfor (i = 0; i < lena; i++) a[lena - i-1] = numA[i] - '0';\n\tfor (i = 0; i < lenb; i++) b[lenb - i-1] = numB[i] - '0';\n\n\tfor (i = 0; i < lena; i++)\n\t{\n\t\tx = 0;\n\t\tfor (j = 0; j < lenb; j++)/*\u5bf9\u4e58\u6570\u7684\u6bcf\u4e00\u4f4d\u8fdb\u884c\u5904\u7406*/\n\t\t{\n\t\t\tc[i + j] = a[i] * b[j] + x + c[i + j];/*\u5f53\u524d\u4e58\u79ef+\u4e0a\u6b21\u4e58\u79ef\u8fdb\u4f4d+\u539f\u6570*/\n\t\t\tx = c[i + j] / 10;\n\t\t\tc[i + j] %= 10;\n\t\t}\n\t\tc[i + lenb] = x;\n\t}\n\n\tlenc = lena + lenb;\n\twhile (c[lenc - 1] == 0 && lenc > 1)/*\u5220\u9664\u524d\u5bfc0*/\n\t\tlenc--;\n\tj = 0;\n\tfor (i = lenc - 1; i >= 0; i--)\n\t{\n\t\t//printf(\"%d_\", c[i]);\n\t\tnumA[j] = c[i] + '0', j++;\n\t}\n}\n\nint LLLcmp(char* a, char* b)\n{\n\tint len1 = strlen(a), len2 = strlen(b);\n\tif (len1 < len2)return -1;\n\telse if (len1 > len2)return 1;\n\n\tfor (int i = 0; i < len1; i++)\n\t{\n\t\tif (a[i] < b[i])return -1;\n\t\telse if (a[i] > b[i])return 1;\n\t}\n\treturn 0;\n}\n\n// \u6c42\u51fastr\u7b97\u5f0f\u7684\u503c\nvoid GetVal(const char* str)\n{\n\tchar plus[2008] = {0}, minus[2008] = { 0 };\n\n\t/*plus \u548c minus \u5206\u522b\u8868\u793a\u52a0(\u51cf)\u51e0\u6b21*/\n\tlong long len = strlen(str);\n\t/*\n\t* flag \u6807\u8bc6\u5f53\u524d\u8ba1\u7b97\u7684\u662f\u62ec\u53f7\u5185\u7684\u6570\u5b57\u8fd8\u662f\u62ec\u53f7\u5916\u7684\n\t* num \u50a8\u5b58\u62ec\u53f7\u5916\u7684\u6570 tmpn \u50a8\u5b58\u62ec\u53f7\u5185\u7684\u6570\n\t*/\n\tlong long flag = 0;\n\tchar num[2008] = { 0 }, tmpn[2008] = { 0 };\n\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tif (str[i] == '+')\n\t\t{\n\t\t\tpluss(plus, \"1\");\n\t\t}\n\t\telse if (str[i] == '-')\n\t\t{\n\t\t\tpluss(minus, \"1\");\n\t\t}\n\t\telse if (str[i] == '(')\n\t\t{\n\t\t\tflag = 1;\n\t\t}\n\t\telse if (str[i] == ')')\n\t\t{\n\t\t\tflag = 0;\n\t\t}\n\t\telse if ('0' <= str[i] && str[i] <= '9')\n\t\t{\n\t\t\t/*\u8ba1\u7b97\u6570\u5b57*/\n\t\t\tif (flag)\n\t\t\t{\n\t\t\t\t//tmpn = tmpn * 10 + str[i] - '0';\n\t\t\t\tint e = strchr(str, ')') - str;\n\t\t\t\t//printf(\"%d->%d__\", i, e);\n\t\t\t\tfor (int j = i; j < e; j++)\n\t\t\t\t{\n\t\t\t\t\ttmpn[j - i] = str[j];\n\t\t\t\t}\n\t\t\t\t//printf(\"%s_______\\n\",tmpn);\n\t\t\t\tflag = 0;\n\t\t\t\ti = e;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//num = num * 10 + str[i] - '0';\n\t\t\t\tfor (int j = i; j < len; j++)\n\t\t\t\t{\n\t\t\t\t\tnum[j - i] = str[j];\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (tmpn[0])minuss(tmpn, \"1\", tmpn);\n\t\n\t//printf(\"%s %s\\n\", tmpn, num);\n\n\tif (plus[0])/*\u5982\u679c\u662f\u52a0*/\n\t{\t\n\t\tpluss(plus, tmpn);\n\t\t\n\t\t//printf(\"|%s*%s|_\\n\", num, plus);\n\n\t\tcf(num, plus);\n\t\tif (ans.flag == 0)\n\t\t{\n\t\t\tpluss(ans.num, num);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint tmp = LLLcmp(ans.num, num);\n\t\t\tif (tmp == 0)\n\t\t\t{\n\t\t\t\tans.flag = 0;\n\t\t\t\tans.num[0] = '0';\n\t\t\t\tans.num[1] = '\\0';\n\t\t\t}\n\t\t\telse if (tmp > 0)\n\t\t\t{\n\t\t\t\tans.flag = 1;\n\t\t\t\tminuss(ans.num, num, ans.num);\n\t\t\t}\n\t\t\telse if (tmp < 0)\n\t\t\t{\n\t\t\t\t//printf(\"%s %s\\n\", ans.num, num);\n\t\t\t\tans.flag = 0;\n\t\t\t\tminuss(num, ans.num, ans.num);\n\n\t\t\t}\n\t\t}\n\t}\n\telse/*\u5426\u5219\u662f\u51cf*/\n\t{\n\t\tpluss(minus, tmpn);\n\t\t//printf(\"|%s|\\n|%s|_\\n\", num, minus);\n\n\t\tcf(num, minus);\n\n\t\tif (ans.flag == 1)\n\t\t{\n\t\t\tpluss(ans.num, num);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint tmp = LLLcmp(ans.num, num);\n\t\t\tif (tmp == 0)\n\t\t\t{\n\t\t\t\tans.flag = 0;\n\t\t\t\tans.num[0] = '0';\n\t\t\t\tans.num[1] = '\\0';\n\t\t\t}\n\t\t\telse if (tmp > 0)\n\t\t\t{\n\t\t\t\tans.flag = 0;\n\t\t\t\tminuss(ans.num, num, ans.num);\n\t\t\t}\n\t\t\telse if (tmp < 0)\n\t\t\t{\n\t\t\t\t//printf(\"a:%s n:%s\\n\", ans.num, num);\n\t\t\t\tans.flag = 1;\n\t\t\t\tminuss(num, ans.num, ans.num);\n\t\t\t}\n\t\t}\n\t}\n}\n\nint main()\n{\n\tans.flag = 0;\n\n\t// \u56e0\u4e3a\u8981\u9760\u8fd0\u7b97\u7b26\u8fdb\u884c\u6807\u8bc6,\u6240\u4ee5\u9700\u8981\u5728\u524d\u540e\u7aef\u6dfb\u52a0\u7b26\u53f7\n\n\tscanf(\"%s\", &(str[1]));// \u76f4\u63a5\u4ece\u7b2c\u4e00\u4f4d\u5f00\u59cb\u8f93\u5165\n\tif (str[1] != '+' && str[1] != '-')str[0] = '+';// \u907f\u514d\u91cd\u590d\n\telse str[0] = ' ';\n\tint len = strlen(str);\n\tstr[len] = '+';\n\t//str[len+1]='\\0';// \u5728\u5168\u5c40\u5b9a\u4e49\u7684\u6570\u7ec4\u9ed8\u8ba4\u521d\u59cb\u5316\u4e3a0\n\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tif (str[i] == '+' || str[i] == '-') // \u627e\u5230\u8fd0\u7b97\u7b26\n\t\t{\n\t\t\tfor (int j = i + 1; j < len; j++) // \u5f00\u59cb\u627e\u7ed3\u675f\u4f4d\u7f6e\n\t\t\t{\n\t\t\t\tif (str[j] == '+' || str[j] == '-')\n\t\t\t\t{\n\t\t\t\t\tif (str[j - 1] != '+' && str[j - 1] != '-')\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (int k = i; k < j; k++)stmp[k - i] = str[k];// \u62f7\u8d1d\u8fd9\u4e00\u6bb5\u5b57\u7b26\u4e32\n\t\t\t\t\t\tstmp[j - i] = 0;\n\n\t\t\t\t\t\tGetVal(stmp); // \u5904\u7406\u8fd9\u4e00\u6bb5\u7b97\u5f0f\n\t\t\t\t\t\ti = j - 1; // \u8df3\u5230\u4e0b\u4e00\u6bb5\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (ans.flag==1)putchar('-');\n\tprintf(\"%s\", ans.num);\n\treturn 0;\n}\n```\n###### \u4e4c\u62c9\u4e4c\u62c9~~",
        "postTime": 1601533897,
        "uid": 361078,
        "name": "HanPi",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "## ~~\u6211\u4e5f\u6765\u6c34\u4e00\u6ce2$\\mathcal{Py}$~~\n\u4e0e\u524d\u9762\u90a3\u4e2a\u7528$\\mathcal{Py}$\u7684\u9898\u89e3\u4e0d\u540c\uff0c\u8fd9\u91cc\u6211\u4e00\u4e2a\u4e00\u4e2a\u5b57\u7b26\u5904\u7406  \n**\u5148\u58f0\u660e\u4e00\u4e0b\u53d8\u91cf\uff1a**  \n$s:$\u8f93\u5165\u7684\u5b57\u7b26\u4e32  \n$ans:$\u6700\u540e\u7684\u7ed3\u679c  \n$f:$\u7b26\u53f7  \n$res:$\u6bcf\u4e2a+/-\u540e\u7684\u7ed3\u679c  \n$now:$\u73b0\u5728\u7684\u6570\u5b57  \n$tms:$+/-\u7684\u4e2a\u6570  \n$ls:$ s\u7684\u957f\u5ea6     \n\u64cd\u4f5c\uff1a     \n$Case1:$ $s[0]$\u4e0d\u4e3a+/-    \n```python\nif s[0]!='+' and s[0]!='-':\n    s=\"+\"+s\n```\n\u7136\u540e\u904d\u5386\u5b57\u7b26\u4e32:  \n```python\nfor i in range(ls):\n```\n$Case2:$\u4e3a+\u65f6    \n```python\n    if s[i]=='+':\n        if s[i-1]!='+' and i!=0:\n            res*=now\n            ans+=f*res*tms\n            tms=0\n        f=1\n        res=1\n        now=0\n        tms+=1\n```\n$Case3:$\u4e3a-\u65f6   \n```python\n    elif s[i]=='-':\n        if s[i-1]!='-' and i!=0:\n            res*=now\n            ans+=f*res*tms\n            tms=0\n        f=-1\n        res=1\n        now=0\n        tms+=1\n```\n$Case4:$\u4e3a)\u65f6   \n```python\n    elif s[i]==')':\n        res*=now\n        now=0\n```\n$Cases5:$\u4e3a\u6570\u5b57\u65f6   \n```python\n    elif s[i].isdigit():\n        now=(now<<3)+(now<<1)+int(s[i])\n```\n\u6700\u540e\uff0c\u8f93\u51fa\u7b54\u6848\uff0c\u8bb0\u5f97\u628a\u67ff\u5b50\u6700\u540e\u4e00\u9879\u52a0\u4e0a\u54e6~   \n```python\nprint(ans+f*res*now*tms)\n```\n~~\u884c\u672b\u6709\u6362\u884c\u4e5f\u53ef\u4ee5\u8fc7\u554a~~  \n~~\u6700\u540e\u9001\u4e00\u6ce2\u798f\u5229:~~ [~~P1797\u53cc\u500d\u7ecf\u9a8c~~](https://www.luogu.com.cn/problem/P1797)   \n~~\u4e86\u61d2\u592a\u6211\u4f46\uff0c\u7684\u89e3\u9898\u5199\u7740\u5012\u60f3\u6765\u672c\uff0c\u8282\u4eba\u611a\u5929\u4eca:sP~~",
        "postTime": 1585705402,
        "uid": 312393,
        "name": "ADay",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "> ~~\u662f\u8c37\u6c11\u6539\u4e0d\u4e86\u6c34\u9ad8\u7cbe~~\n\n\u56e0\u4e3a\u8fd9\u9898\u8981\u7528\u9ad8\u7cbe\u5ea6\uff0c\u6240\u4ee5~~\u81ea\u7136\u800c\u7136\u5730~~\u5c31\u60f3\u5230\u7528 python \u505a\u4e86\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\uff0c\u5148\u5224\u65ad\u662f\u201c---\u201d\u4e00\u7c7b\u7684\u8fd0\u7b97\u8fd8\u662f\u201c+(3)\u201d\u4e00\u7c7b\u7684\u8fd0\u7b97\u3002\n\n\u7136\u540e\u5c31\u662f\u57fa\u7840\u5b57\u7b26\u4e32\u64cd\u4f5c\u4e86\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e00\u79cd\uff08\u201c---\u201d\u4e00\u7c7b\u7684\u8fd0\u7b97\uff09\uff0c\u7edf\u8ba1\u6709\u591a\u5c11\u4e2a\u201c+\u201d/\u201c-\u201d\u53f7\uff0c\u7136\u540e\u76f4\u63a5\u7528\u4e58\u6cd5\u8ba1\u7b97\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\uff08\u201c+(3)\u201d\u4e00\u7c7b\u7684\u8fd0\u7b97\uff09\uff0c\u622a\u53d6\u51fa\u62ec\u53f7\u4e2d\u95f4\u7684\u6570\uff0c\u540c\u6837\u7528\u4e58\u6cd5\u8ba1\u7b97\u3002\n\npython \u6709\u4e00\u4e2a\u597d\u7528\u7684\u51fd\u6570\uff1a\n\n```python\nint()\n```\n\u53ef\u4ee5\u76f4\u63a5\u628a\u4e00\u6bb5\u5b57\u7b26\u4e32\u8f6c\u6210\u6574\u6570\u8fdb\u884c\u8ba1\u7b97\uff0c\u914d\u5408 python \u7b80\u77ed\u7684\u5b57\u7b26\u4e32\u622a\u53d6\u529f\u80fd\uff0c\u53ef\u4ee5\u8f7b\u677e\u901a\u8fc7\u672c\u9898\u3002\n\n~~\u4e3a\u4ec0\u4e48\u6211\u611f\u89c9\u8fd9\u9898\u5c31\u662f\u4e3a\u4e86 PY \u800c\u751f\u7684\u554a~~\n\n```python\na=input()\ni,s=0,0\nwhile i<len(a):\n    if a[i]=='+': #\u5224\u65ad\u6b63\u8d1f\u53f7\n        f=1\n    else:\n        f=-1\n    if a[i+1]=='(':\n        i=i+2\n        y=i\n        while i<len(a) and a[i]!=')':\n            i=i+1\n        x=int(a[y:i]) #\u5b57\u7b26\u4e32\u622a\u53d6\n        i=i+1\n        y=i\n        while i<len(a) and a[i]!='+' and a[i]!='-':\n            i=i+1\n        s=s+x*int(a[y:i])*f #\u795e\u5947\u7684\u64cd\u4f5c\n    else:\n        y=0\n        while i<len(a) and (a[i]=='+' or a[i]=='-'):\n            i=i+1\n            y=y+1\n        x=i\n        while i<len(a) and a[i]!='+' and a[i]!='-':\n            i=i+1\n        s=s+y*int(a[x:i])*f\nprint(s,end='') #\u5220\u53bb\u7a7a\u884c\n```\n**\u6ce8\u610f\u8fd9\u9898\u7684\u672b\u884c\u4e0d\u80fd\u6709\u591a\u4f59\u7684\u7a7a\u884c\u3002**",
        "postTime": 1584678231,
        "uid": 203623,
        "name": "Ntokisq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u9ad8\u7cbe\u8fd8\u662f\u6bd4\u8f83\u7b80\u5355\u7684\uff0c\u5c31\u662f\u8bfb\u5165\u6bd4\u8f83\u6076\u5fc3\uff08\u5361\u4e861\u5929\uff09\uff0c\u6ce8\u610f\u4e00\u4e0b\u8bfb\u5165\u5c31\u884c\u4e86\u3002\n\u6ca1\u4ec0\u4e48\u96be\u7684\u3002\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#define N (5555)\nusing namespace std;\nchar s[N];\nint times[N][N] , num[N][N] , ans[N] , tmp[N] , temp[N];\nint cnt;\nbool flag[N] , ccf[N];\nbool goal;\nbool check(int *a,int *b)\n{\n\tif(a[0] > b[0])\treturn 1;\n\tif(a[0] < b[0]) return 0;\n\tfor(int i = a[0];i >= 1;i --)\n\t{\n\t\tif(a[i] > b[i]) return 1;\n\t\tif(a[i] < b[i]) return 0;\n\t}\n\treturn 1;\n}\nvoid jia(int *a,int *b)\n{\n\tmemset(temp,0,sizeof temp);\n\tbool qwq = check(a,b);\n\tif(qwq)\n\t{\n\t\tfor(int i = 0;i <= a[0];i ++)\ttemp[i] = a[i];\n\t\tfor(int i = 1;i <= temp[0];i ++)\n\t\t{\n\t\t\ttemp[i] += b[i];\n\t\t\ttemp[i + 1] += temp[i] / 10;\n\t\t\ttemp[i] %= 10;\n\t\t}\n\t\tif(temp[temp[0] + 1])\ttemp[0] ++;\n\t}\n\telse\n\t{\n\t\tfor(int i = 0;i <= b[0];i ++)\ttemp[i] = b[i];\n\t\tfor(int i = 1;i <= temp[0];i ++)\n\t\t{\n\t\t\ttemp[i] += a[i];\n\t\t\ttemp[i + 1] += temp[i] / 10;\n\t\t\ttemp[i] %= 10;\n\t\t}\n\t\tif(temp[temp[0] + 1]) temp[0] ++;\n\t}\n}\nvoid jian(int *a,int *b)\n{\n\tmemset(temp,0,sizeof temp);\n\tfor(int i = 1;i <= a[0];i ++)\ttemp[i] = a[i];\n\ttemp[0] = a[0];\n\tfor(int i = 1;i <= temp[0];i ++)\n\t{\n\t\tif(temp[i] < b[i])\ttemp[i] += 10 , temp[i+1] --;\n\t\ttemp[i] -= b[i];\n\t}\n}\nvoid cheng(int *a,int *b)\n{\n\tmemset(tmp,0,sizeof tmp);\n\tfor(int i = 1;i <= a[0];i ++)\n\t{\n\t\tfor(int j = 1;j <= b[0];j ++)\n\t\t{\n\t\t\ttmp[i + j - 1] += a[i] * b[j];\n\t\t\ttmp[i + j] += tmp[i + j - 1] / 10;\n\t\t\ttmp[i + j - 1] %= 10;\n\t\t}\n\t}\n\tif(tmp[a[0] + b[0]]) tmp[0] = a[0] + b[0];\n\telse tmp[0] = a[0] + b[0] - 1;\n}\nint main()\n{\n\tscanf(\"%s\",s+1);\n\tint len = strlen(s+1) , tot = 0;\n\tfor(int i = 1;i <= len;i ++)\t\n\t{\n\t\tif(s[i] != '0')\tbreak;\n\t\telse tot ++;\n\t}\n\tlen -= tot;\n\tfor(int i = 1;i <= len;i ++)\ts[i] = s[i + tot];\n\tfor(int i = 1;i <= len;i ++)\n\t{\n\t\tint j , qwq = 0;\n\t\tif(s[i] >= '0' && s[i] <= '9' && i == 1)\n\t\t{\n\t\t\ttimes[++cnt][1] = 1;\n\t\t\ttimes[cnt][0] = 1;\n\t\t\tfor(j = i;j <= len && s[j] >= '0' && s[j] <= '9';j ++)\tnum[cnt][++num[cnt][0]] = s[j] - '0';\n\t\t\ti = j - 1;\n\t\t\tcontinue;\n\t\t}\n\t\tif(s[i] == '(')\n\t\t{\n\t\t\tcnt ++;\n\t\t\tfor(j = i + 1;j <= len && s[j] != ')';j ++)\ttimes[cnt][++times[cnt][0]] = s[j] - '0';\n\t\t\tif(s[i-1] == '-')\tflag[cnt] = 1;\n\t\t\ti = j;\n\t\t}\t\n\t\tif((s[i] == '+' || s[i] == '-') && s[i + 1] == '(')\tcontinue;\n\t\tif(s[i] >= '0' && s[i] <= '9' && (s[i-1] == '+' || s[i-1] == '-'))\t\t\n\t\t{\n\t\t\tcnt ++;\n\t\t\tfor(j = i - 1;j >= 1 && s[j] == s[i-1];j --) qwq ++;\n\t\t\twhile(qwq)\ttimes[cnt][++times[cnt][0]] = qwq % 10 , qwq /= 10;\n\t\t\tif(s[i-1] == '-')\tflag[cnt] = 1;\n\t\t\tccf[cnt] = 1;\n\t\t}\n\t\tif(s[i] >= '0' && s[i] <= '9' && i != 1)\t\n\t\t{\n\t\t\tfor(j = i;j <= len && s[j] >= '0' && s[j] <= '9';j ++)\tnum[cnt][++num[cnt][0]] = s[j] - '0';\n\t\t\ti = j - 1;\n\t\t}\n\t}\n\tfor(int i = 1;i <= cnt;i ++)\n\t{\n\t\tfor(int j = 1;j <= (times[i][0] >> 1);j ++)\tif(!ccf[i])  swap(times[i][j],times[i][times[i][0] - j + 1]);\n\t\tfor(int j = 1;j <= (num[i][0] >> 1);j ++)\tswap(num[i][j],num[i][num[i][0] - j + 1]);\n\t}\n\tfor(int i = 1;i <= cnt;i ++)\n\t{\n\t\tfor(int j = times[i][0];j >= 1;j --)\t\n\t\t{\n\t\t\tif(times[i][j] != 0)\tbreak;\n\t\t\ttimes[i][0] --;\n\t\t}\n\t\tfor(int j = num[i][0];j >= 1;j --)\t\n\t\t{\n\t\t\tif(num[i][j] != 0)\tbreak;\n\t\t\tnum[i][0] --;\n\t\t}\n\t\tcheng(times[i],num[i]);\n\t\tfor(int j = tmp[0];j >= 1;j --)\t\n\t\t{\n\t\t\tif(tmp[j] != 0)\tbreak;\n\t\t\ttmp[0] --;\n\t\t}\n\t\tif(!goal && !flag[i])\tjia(ans,tmp);\n\t\telse if(goal && flag[i])\tjia(ans,tmp);\n\t\telse if(!goal && flag[i] && check(ans,tmp))\tjian(ans,tmp);\n\t\telse if(!goal && flag[i] && !check(ans,tmp))\tjian(tmp,ans) , goal = 1;\n\t\telse if(goal && !flag[i] && check(ans,tmp))\tjian(ans,tmp);\n\t\telse if(goal && !flag[i] && !check(ans,tmp)) jian(tmp,ans) , goal = 0;\n\t\tfor(int j = 0;j <= temp[0];j ++)\tans[j] = temp[j];\n\t\tfor(int j = ans[0];j >= 1;j --)\t\n\t\t{\n\t\t\tif(ans[j] != 0)\tbreak;\n\t\t\tans[0] --;\n\t\t}\n\t}\n\tbool cnm = 0 , fuck = 0;\n\tfor(int i = ans[0];i >= 1;i --)\tif(ans[i] != 0)\tfuck = 1;\n\tif(goal && fuck) printf(\"-\");\n\tfor(int i = ans[0];i >= 1;i --)\t\n\t{\n\t\tif(ans[i] != 0)\tcnm = 1;\n\t\telse if(!cnm)\tcontinue;\n\t\tprintf(\"%d\",ans[i]);\n\t}\n\tif(!ans[0] || !cnm)\tprintf(\"0\");\n\treturn 0;\n}\n```\n",
        "postTime": 1568197444,
        "uid": 153898,
        "name": "Treaker",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1797 \u3010\u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5_NOI\u5bfc\u520a2010\u63d0\u9ad8\uff0805\uff09\u3011"
    },
    {
        "content": "\u539fAC\u4ee3\u7801\u5df2\u66f4\u6539\uff0c\u611f\u8c22@Treaker\u63d0\u4f9b\u7684\u6570\u636e\n\n\u9996\u5148\u770b\u9898\uff0c\u53ea\u6709+\uff0c-\uff0c*\u3002\n\n\u8003\u8651\u5f00long long\u76f4\u63a5\u641e\n\n\u9996\u5148\u5f53\u505a\u5b57\u7b26\u4e32\u8bfb\u5165\n\n\u5176\u4e2d\u603b\u5171\u6709\u4e94\u79cd\u7c7b\u522b\n\n1.\u4e00\u5f00\u59cb\u53ea\u6709\u4e00\u4e2a\u6570\u5b57\n\n2.+\uff08x\uff09y\n\n3.+++\u2026\u2026+x\n\n4.-\uff08x\uff09y\n\n5.---\u2026-x\n\n\u8bfb\u5165\u6570\u5b57\u7684\u8bdd\u8003\u8651\u5c06\u5feb\u8bfb\u66f4\u6539\n```cpp\ninline int read(int x){//x\u8868\u793a\u5f53\u524d\u4f4d\u7f6e\n\tint s=0;\n\twhile(ch[x]<'0'||ch[x]>'9')x++;//\u975e\u6570\u5b57\n\twhile(ch[x]>='0'&&ch[x]<='9')s=s*10+ch[x]-'0',x++;\n\treturn s;\n}\n```\n\u5f00\u4e2aans\u8bb0\u5f55\u7b54\u6848\uff0c\u5224\u65ad\u6bcf\u79cd\u8fd0\u7b97\u7d2f\u79ef\u5230ans\u4e2d\uff0c\u6700\u540e\u8f93\u51faans\u3002\n\n```cpp\nfor(int i=1;i<=len;++i){\n\t\tif(ch[i]=='+'&&ch[i+1]=='('){\t//\u5f53\u524d\u4e3a\u7b2c2\u79cd\u8fd0\u7b97 \n\t\t\tint k=read(i+2);\t\t\t//\u8df3\u8fc7\u5de6\u62ec\u53f7\u8bfb\u5165\u62ec\u53f7\u5185\u6570\u5b57 \n\t\t\twhile(ch[i]<'0'||ch[i]>'9')i++;\n\t\t\twhile(ch[i]>='0'&&ch[i]<='9')i++;\n\t\t\ti++;\t\t\t\t\t\t//\u8df3\u8fc7\u53f3\u62ec\u53f7 \n\t\t\tans+=read(i)*k;\t\t\t\t//\u8bfb\u5165\u6570\u5b57\u53ca\u8fdb\u884c\u4e58\u6cd5\u8fd0\u7b97\u7d2f\u79efans \n\t\t}\n\t\telse if(ch[i]=='-'&&ch[i+1]=='('){//\u5f53\u524d\u4e3a\u7b2c4\u79cd\u8fd0\u7b97 \n\t\t\tint k=read(i+2);\t\t\t\n\t\t\twhile(ch[i]<'0'||ch[i]>'9')i++;\n\t\t\twhile(ch[i]>='0'&&ch[i]<='9')i++;\n\t\t\ti++;\n\t\t\tans-=read(i)*k;\n\t\t}\n\t\telse if(ch[i]=='+'&&ch[i+1]>='0'&&ch[i+1]<='9'){//\u5f53\u524d\u4e3a\u7b2c3\u79cd\u8fd0\u7b97\u7279\u6b8a\u60c5\u51b5 \n\t\t\tans+=read(i+1);\t\t\t\t//\u53ea\u6709\u4e00\u4e2a\u52a0\u53f7 \n\t\t}\n\t\telse if(ch[i]=='-'&&ch[i+1]>='0'&&ch[i+1]<='9'){//\u5f53\u524d\u4e3a\u7b2c5\u79cd\u8fd0\u7b97\u7279\u6b8a\u60c5\u51b5 \n\t\t\tans-=read(i+1);\n\t\t}\n\t\telse if(ch[i]=='+'&&ch[i+1]=='+'){//\u5f53\u524d\u4e3a\u7b2c3\u79cd\u8fd0\u7b97\n\t\t\tint cnt=0;\t\t\t\t\t//\u591a\u4e2a\u52a0\u53f7\u8bb0\u5f55\u52a0\u53f7\u4e2a\u6570 \n\t\t\twhile(ch[i]=='+')cnt++,i++;\n\t\t\tans+=read(i)*cnt;\t\t\t//\u591a\u52a0\u6cd5\u8fd0\u7b97\u8f6c\u4e58\u53ca\u7d2f\u79ef\u7b54\u6848 \n\t\t}\n\t\telse if(ch[i]=='-'&&ch[i+1]=='-'){//\u5f53\u524d\u4e3a\u7b2c5\u79cd\u8fd0\u7b97\n\t\t\tint cnt=0;\n\t\t\twhile(ch[i]=='-')cnt++,i++;\n\t\t\tans-=read(i)*cnt;\n\t\t}\n\t\telse if(i==1&&ch[i]>='0'&&ch[i]<='9')//\u7b2c1\u79cd\u8fd0\u7b97 \n\t\t\t\tans=read(i);\t\t\t\n\t}\n```\n\n\n\u7136\u540e60\u5206\u5c31\u5230\u624b\u4e86\u3002\n\n\u7b54\u6848\u592a\u5927\u70b8\u4e86long long\u3002\n\n\u5c06\u539f\u7a0b\u5e8f\u6539\u5199\u4e3a\u9ad8\u7cbe\uff0c\u7136\u540e\u6211\u4eec\u9700\u8981\u9ad8\u7cbe\u52a0\uff0c\u9ad8\u7cbe\u51cf\uff0c\u9ad8\u7cbe\u4e58\u3002\n\na1\uff0ca2\u6570\u7ec4\u8868\u793a\u6682\u65f6\u8bfb\u5165\u7684\u4e24\u4e2a\u6570\n\n\u5c06\u539f\u8bfb\u5165\u51fd\u6570\u66f4\u6539\uff0c\u5206\u6210\u4e24\u4e2a\uff0c\u4e00\u4e2a\u8bfba1\uff0c\u53e6\u4e00\u4e2a\u8bfba2\uff0c\u8fd9\u91cc\u53ea\u63d0\u4f9b\u7b2c\u4e00\u4e2a\u3002\n\n\n```cpp\ninline void read1(int x){\n\tmemset(a1,0,sizeof(a1));\n\twhile(ch[x]<'0'||ch[x]>'9')x++;\n\twhile(ch[x]>='0'&&ch[x]<='9')x++;\n\tx--;\n\twhile(ch[x]>='0'&&ch[x]<='9')a1[++a1[0]]=ch[x]-'0',x--;\n}\n```\n\n\u7136\u540e\u8ba1\u7b97\u52a0\u51cf\u4e58\u7684\u65f6\u5019\u5927\u529b\u8ba8\u8bbaans\u6b63\u8d1f\u95ee\u9898\uff0cans\u7684\u6b63\u8d1f\u662f\u6253\u6807\u8bb0\u5b9e\u73b0\uff0c\u6b63\u52a0\u6b63\u76f4\u63a5\u52a0\uff1b\u6b63\u52a0\u8d1f\u53d8\u6210\u6b63\u51cf\u6b63\uff1b\u8d1f\u52a0\u8d1f\uff0c\u6539\u4e3a\u6b63\u52a0\u6b63\uff0c\u6807\u8bb0\u4e0d\u53d8\uff1b\u8d1f\u51cf\u8d1f\u53d8\u6210\u6b63\u51cf\u8d1f\uff1b\n\n\u5728\u52a0\u7684\u65f6\u5019\u7b26\u53f7\u662f\u4e0d\u53d8\u7684\uff0c\u51cf\u7684\u65f6\u5019\u9700\u8981\u5224\u65ad\u7b26\u53f7\u3002\n\n\u4e0b\u9762\u662f\u5b8c\u6574AC\u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nchar ch[210];\nint a1[2000],a2[2000],sum[2000];//a1,a2\u6682\u65f6\u50a8\u5b58\uff0csum\u50a8\u5b58\u4e58\u51fa\u6765\u7684\u503c \nint s[20000],ans[20000];\nint f=1;\n\n\n//\u8bfb\u5165 \ninline void read1(int x){\n\tmemset(a1,0,sizeof(a1));\n\twhile(ch[x]<'0'||ch[x]>'9')x++;\n\twhile(ch[x]>='0'&&ch[x]<='9')x++;\n\tx--;\n\twhile(ch[x]>='0'&&ch[x]<='9')a1[++a1[0]]=ch[x]-'0',x--;\n}\ninline void read2(int x){\n\tmemset(a2,0,sizeof(a2));\n\twhile(ch[x]<'0'||ch[x]>'9')x++;\n\twhile(ch[x]>='0'&&ch[x]<='9')x++;\n\tx--;\n\twhile(ch[x]>='0'&&ch[x]<='9')a2[++a2[0]]=ch[x]-'0',x--;\n}\n\n\n\n//\u9ad8\u7cbe\u4e58 \ninline void mul(){\n\tsum[0]=a1[0]+a2[0]-1;\n\tfor(int j=1;j<=a2[0];j++){\n        for(int i=1;i<=a1[0];i++){\n            sum[i+j-1]+=a1[i]*a2[j];\n            sum[i+j]+=sum[i+j-1]/10;\n            sum[i+j-1]%=10;\n        }\n    }\n    if(sum[sum[0]+1]>=1) sum[0]++;\n    while(sum[sum[0]]==0&&sum[0]>1)--sum[0];\n}\n\n//\u9ad8\u7cbe\u52a0 \ninline void add(int a[],int b[]){\n    memset(s,0,sizeof(s));\n    int len=max(a[0],b[0]);\n    int g=0;\n    for(int i=1;i<=len;i++){\n        s[i]+=a[i]+b[i]+g;\n        g=s[i]/10;\n        s[i]=s[i]%10;\n    }\n    if(g)s[++len]=g;\n    s[0]=len;\n    for(int i=0;i<=len;++i)ans[i]=s[i];\n}\n\n//\u9ad8\u7cbe\u51cf \ninline bool com(int a[],int b[]){\n\tif(a[0]>b[0])return 0;\n\tif(a[0]<b[0])return 1;\n    for(int i=a[0];i>=1;--i){\n    \tif(a[i]<b[i])return 1;\n    \tif(a[i]>b[i])return 0;\n    }\n    return 0;\n}\ninline void jian(int a[],int b[]){\n\tif(com(a,b)){\n\t\tswap(a,b);\n\t\tf=-1;\n\t}\n\telse f=1;\n    for(int i=1;i<=a[0];++i){\n    \tif(i<=b[0])   //\u6211\u4e0d\u77e5\u9053\u4e3a\u5565\u53ef\u80fd\u5728i<=a[0]&&i>=b[0]\u7684\u65f6\u5019b[i]\u6709\u503c\n    \t\ta[i]-=b[i];\n    \tif(a[i]<0){\n    \t\ta[i]+=10;\n    \t\ta[i+1]--;\n    \t}\n    }\n    while(a[a[0]]==0&&a[0]>1)a[0]--;\n    for(int i=0;i<=a[0];++i)\n    \tans[i]=a[i];\n}\n\n//\u628aint\u578b\u6570\u62c6\u5230\u6570\u7ec4\u4e2d \ninline void dig(int x){\n\tmemset(a1,0,sizeof(a1));\n\twhile(x){\n\t\ta1[++a1[0]]=x%10;\n\t\tx/=10;\n\t}\n}\nint main(){\n\tscanf(\"%s\",ch+1);\n\tint len=strlen(ch+1);\n\tfor(int i=1;i<=len;++i){\n\t\tif(ch[i]=='+'&&ch[i+1]=='('){\n\t\t\tread1(i+2);\n\t\t\twhile(ch[i]<'0'||ch[i]>'9')i++;\n\t\t\twhile(ch[i]>='0'&&ch[i]<='9')i++;\n\t\t\ti++;\n\t\t\tread2(i);\n\t\t\tmul();\n\t\t\tif(f==1)\t\t\t//\u8ba8\u8bba\u7b26\u53f7\uff0cf\u4e3a1\uff0cans\u4e3a\u6b63\uff0cf\u4e3a-1\uff0cans\u4e3a\u8d1f \n\t\t\t\tadd(ans,sum);\n\t\t\telse jian(sum,ans);\n\t\t\tmemset(sum,0,sizeof(sum));\n\t\t}\n\t\telse if(ch[i]=='-'&&ch[i+1]=='('){\n\t\t\tread1(i+2);\n\t\t\twhile(ch[i]<'0'||ch[i]>'9')i++;\n\t\t\twhile(ch[i]>='0'&&ch[i]<='9')i++;\n\t\t\ti++;\n\t\t\tread2(i);\n\t\t\tmul();\n\t\t\tif(f==1)\n\t\t\t\tjian(ans,sum);\n\t\t\telse add(ans,sum);\n\t\t\tmemset(sum,0,sizeof(sum));\n\t\t}\n\t\telse if(ch[i]=='+'&&ch[i+1]>='0'&&ch[i+1]<='9'){\n\t\t\tread1(i+1);\n\t\t\tif(f==1)\n\t\t\tadd(ans,a1);\n\t\t\telse jian(a1,ans);\n\t\t}\n\t\telse if(ch[i]=='-'&&ch[i+1]>='0'&&ch[i+1]<='9'){\n\t\t\tread1(i+1);\n\t\t\tif(f==1)jian(ans,a1);\n\t\t\telse add(ans,a1);\n\t\t}\n\t\telse if(ch[i]=='+'&&ch[i+1]=='+'){\n\t\t\tint cnt=0;\n\t\t\twhile(ch[i]=='+')cnt++,i++;\n\t\t\tdig(cnt);\n\t\t\tread2(i);\n\t\t\tmul();\n\t\t\tif(f==1)add(ans,sum);\n\t\t\telse jian(sum,ans);\n\t\t\tmemset(sum,0,sizeof(sum));\n\t\t}\n\t\telse if(ch[i]=='-'&&ch[i+1]=='-'){\n\t\t\tint cnt=0;\n\t\t\twhile(ch[i]=='-')cnt++,i++;\n\t\t\tdig(cnt);\n\t\t\tread2(i);\n\t\t\tmul();\n\t\t\tif(f==1)\n\t\t\t\tjian(ans,sum);\n\t\t\telse add(ans,sum);\n\t\t\tmemset(sum,0,sizeof(sum));\n\t\t}\n\t\telse if(i==1&&ch[i]>='0'&&ch[i]<='9'){\n\t\t\tread1(i);\n\t\t\tfor(int j=0;j<=a1[0];++j)\n\t\t\t\tans[j]=a1[j];\n\t\t}\n\t}\n\tif(f==-1)printf(\"-\");\n\tfor(int i=ans[0];i>0;--i)\n\t\tprintf(\"%d\",ans[i]);\n\treturn 0;\n}\n```\n\n\n",
        "postTime": 1568101203,
        "uid": 151768,
        "name": "\u6d41\u901d\u4e36",
        "ccfLevel": 0,
        "title": "P1797 \u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5_NOI\u5bfc\u520a2010\u63d0\u9ad8\uff0805\uff09"
    },
    {
        "content": "\u8fd9\u9053\u9898\u770b\u4e0a\u53bb\u662f\u7d2b\u9898\uff0c\u5b9e\u9645\u4e0a\u53ea\u6709\u84dd\u9898\u7684\u96be\u5ea6\uff0c\u800c\u4e14\u5f97$40$\u5206\u975e\u5e38\u5bb9\u6613\uff0c\u6240\u4ee5\u4e3a\u4e86\u5bf9\u90a3\u4e9b\u4e0d\u4f1a\u9ad8\u7cbe\u5ea6\u7684\u65b0\u624b\u53cb\u597d\u4e00\u70b9\uff0c\u6211\u5199\u4e24\u4e2a\u505a\u6cd5~~\u5176\u5b9e\u662f\u56e0\u4e3a\u6211\u7b2c\u4e00\u6b21\u4ea4\u4e5f\u53ea\u670940\u5206~~\u3002\n### 40pts:\n\u505a\u8fd9\u9053\u9898\u53ea\u9700\u8981\u7edf\u8ba1\u4e00\u4e0b$+$\uff0c$-$\u7684\u4e2a\u6570\uff0c\u5e76\u4e14\u628a\u5b57\u7b26\u4e32\u8f6c\u4e3a\u6570\u5b57\uff0c\u800c\u8fd9\u662f\u975e\u5e38\u5bb9\u6613\u7684\uff0c\u5bf9\u4e8e\u4e58\u6cd5\u4e5f\u5982\u6cd5\u70ae\u5236\uff0c\u8fd9\u6837\u5c31\u6709$40$\u5206\u4e86\uff1a\n```cpp\n    #include<bits/stdc++.h>\n    using namespace std;\n    char op[2100];\n    int num[2100],i,j,k,s,ans,flag;\n    void turn(int s,int t,int &a)//\u5b57\u7b26\u8f6c\u6570\u5b57\n    {\n        a=0;\n        for(int i=s;i<t;i++)\n            a*=10,a+=op[i]-48;\n    }\n    int main()\n    {\n        scanf(\"%s\",op);\n        while(op[i]!='\\0')\n        {\n            while(op[i]=='+') flag=1,s++,i++;//\u5904\u7406\u52a0\u6cd5\uff0c\u770b\u6709\u591a\u5c11\u52a0\u53f7\n            while(op[i]=='-') flag=-1,s++,i++;//\u5904\u7406\u51cf\u6cd5\uff0c\u770b\u6709\u591a\u5c11\u51cf\u53f7\n            if(isdigit(op[i]))//\u4e0b\u4e00\u4e2a\u5c31\u662f\u6570\u5b57\n            {\n                j=i;\n                while(isdigit(op[j]))\n                    j++;\n                turn(i,j,num[++k]);//\u76f4\u63a5\u8f6c\u6362\n                num[k]*=s*flag;//\u4e58\u4e0a\u524d\u9762\u52a0\u7684\u6b21\u6570\n                i=j,s=0;\n            }\n            else\n            {\n                if(op[i]=='(')//\u5426\u5219\uff0c\u4e0b\u4e00\u4e2a\u5c31\u662f\u62ec\u53f7\n                {\n                    i++;j=i;\n                    while(isdigit(op[j]))\n                        j++;\n                    turn(i,j,s);//\u628a\u7d2f\u52a0\u5668\u66f4\u65b0\n                    i=j;\n                }\n                if(op[i]==')')\n                    i++;\n            }\n        }\n        for(int i=1;i<=k;i++)\n            ans+=num[i];//\u4e00\u4e2a\u4e00\u4e2a\u52a0\u8d77\u6765\n        printf(\"%d\",ans);//\u8f93\u51fa\n        return 0;\n    }\n```\n### 100pts:\n\u4f46\u662f\uff0c\u5982\u679c\u60f3\u62ff$100$\u5206\uff0c\u5c31\u9700\u8981\u4e0b\u5de5\u592b\u4e86\uff0c\u9ad8\u7cbe\u5ea6\u662f\u5fc5\u5907\u7684\uff0c\u4e0d\u61c2\u7684\u4eba\u53ef\u4ee5\u770b\u4e00\u4e0b\u6211\u7684[\u9ad8\u7cbe\u5ea6\u6a21\u677f](https://www.luogu.org/blog/YCE-22/gao-jing-du-mu-ban)\uff0c\u8fd9\u91cc\u6709\u5f88\u591a\u7684\u8fd0\u7b97\uff0c\u53ef\u4ee5\u628a\u5b83\u5f53\u505a\u4f4e\u7cbe\u505a\uff0c\u5c31\u662f\u4ee3\u7801\u592a\u957f\u4e86\uff1a\n```cpp\n    #include<bits/stdc++.h>\n    using namespace std;\n    struct ll{//\u6211\u559c\u6b22\u628a\u9ad8\u7cbe\u5ea6\u5b9a\u4e49\u6210\u4e00\u4e2a\u7ed3\u6784\u4f53\n        char s[2100];\n        int a[2100],flag;\n        void clear()\n        {\n            memset(s,0,sizeof(s));\n            memset(a,0,sizeof(a));\n            *a=1,flag=1;\n        }\n        void out()\n        {\n            /*if(!flag)\n            {\n                puts(\"INF\"),flag=1;\n                return;\n            }*/\n            if(!~flag) printf(\"-\");//\u5904\u7406\u8d1f\u6570\n            for(int i=*a;i;--i)\n                printf(\"%d\",a[i]);\n            puts(\"\");\n        }\n        void sin(long long x)//\u5316\u4f4e\u7cbe\u4e3a\u9ad8\u7cbe\n        {\n            clear(),a[0]=0;\n            if(x<0) flag=-1,x=-x;\n            else flag=1;\n            while(x)\n                a[++*a]=x%10,x/=10;\n        }\n        int& operator [](const int &n)//\u7528\u6570\u7ec4\u8fd0\u7b97\u7b26\uff0c\u65b9\u4fbf\u8bbf\u95ee\u9ad8\u7cbe\u5ea6\u5143\u7d20\n        {\n            if(!~n) return flag;\n            return a[n];\n        }\n        /*a[-1]\u8868\u793aa\u7684\u6b63\u8d1f\u6027\uff0c1\u4e3a\u6b63\uff0c-1\u4e3a\u8d1f\u3002a[0]\u8868\u793aa\u7684\u4f4d\u6570\u3002\u5176\u4ed6\u60c5\u51b5\u4e0b\u8868\u793aa\u7684\u7b2cn\u4f4d\u3002*/\n    };\n    char op[2100];\n    int i,j,k,flag;\n    ll num[2100],ans,s;\n    bool operator <(ll a,ll b);//\u58f0\u660e\u8bed\u53e5\u4e00\u5b9a\u4e0d\u80fd\u5c11\n    bool operator >(ll a,ll b);\n    ll operator +(ll a,ll b);//\u9ad8\u7cbe\u5ea6\u7684\u8fd0\u7b97\n    ll operator -(ll a,ll b);\n    ll operator *(ll a,ll b);\n    bool operator <(ll a,ll b)\n    {\n        if(!~a[-1]&&~b[-1]) return 1;\n        if(~a[-1]&&!~b[-1]) return 0;\n        if(!~a[-1]&&!~b[-1])\n        {\n            a[-1]=b[-1]=1;\n            return a>b;\n        }\n        if(a[0]<b[0]) return 1;\n        if(a[0]>b[0]) return 0;\n        for(int i=a[0];i>0;--i)\n        {\n            if(a[i]<b[i]) return 1;\n            if(a[i]>b[i]) return 0;\n        }\n        return 0;\n    }\n    bool operator >(ll a,ll b)\n    {\n        if(!~a[-1]&&~b[-1]) return 0;\n        if(~a[-1]&&!~b[-1]) return 1;\n        if(!~a[-1]&&!~b[-1])\n        {\n            a[-1]=b[-1]=1;\n            return a<b;\n        }\n        if(a[0]<b[0]) return 0;\n        if(a[0]>b[0]) return 1;\n        for(int i=a[0];i>0;--i)\n        {\n            if(a[i]<b[i]) return 0;\n            if(a[i]>b[i]) return 1;\n        }\n        return 0;\n    }\n    ll operator +(ll a,ll b)\n    {\n        ll c;\n        c.clear();\n        if(!~a[-1]&&!~b[-1])\n        {\n            a[-1]=b[-1]=1;\n            c=a+b,c[-1]=-1;\n            return c;\n        }\n        if(!~a[-1])\n        {\n            a[-1]=1;\n            c=b-a;\n            return c;\n        }\n        if(!~b[-1])\n        {\n            b[-1]=1;\n            c=a-b;\n            return c;\n        }\n        c[0]=max(a[0],b[0]);\n        for(int i=1;i<=c[0];++i)\n            c[i]=a[i]+b[i];\n        for(int i=1;i<=c[0];++i)\n            c[i+1]+=c[i]/10,c[i]%=10;\n        if(c[c[0]+1]) ++c[0];\n        return c;\n    }\n    ll& operator +=(ll &a,ll &b)\n    {\n        a=a+b;\n        return a;\n    }\n    ll operator -(ll a,ll b)\n    {\n        ll c;\n        c.clear();\n        if(!~a[-1])\n        {\n            a[-1]=1;\n            c=a+b,c[-1]=-c[-1];\n            return c;\n        }\n        if(!~b[-1])\n        {\n            b[-1]=1;\n            c=a+b;\n            return c;\n        }\n        if(a<b)\n        {\n            c=b-a,c[-1]=-1;\n            return c;\n        }\n        c=a;\n        for(int i=1;i<=c[0];++i)\n        {\n            c[i]-=b[i];\n            if(c[i]<0)\n                --c[i+1],c[i]+=10;\n        }\n        while(!c[c[0]]&&c[0]>1) --c[0];\n    }\n    ll operator *(ll a,ll b)\n    {\n        ll c;\n        int x;\n        c.clear();\n        if(a[-1]!=b[-1])\n        {\n            a[-1]=b[-1]=1;\n            c=a*b,c[-1]=-1;\n            return c;\n        }\n        c[0]=a[0]+b[0],a[-1]=b[-1]=1;\n        for(int i=1;i<=a[0];++i)\n        {\n            x=0;\n            for(int j=1;j<=b[0];++j)\n            {\n                c[i+j-1]+=a[i]*b[j]+x;\n                x=c[i+j-1]/10;\n                c[i+j-1]%=10;\n            }\n            c[i+b[0]]=x;\n        }\n        while(!c[c[0]]&&c[0]>1) --c[0];\n        return c;\n    }\n    ll operator +(ll a,long long b)//\u9ad8\u7cbe\u4e0e\u4f4e\u7cbe\u7684\u8fd0\u7b97\n    {\n        ll x;\n        x.sin(b);\n        return a+x;\n    }\n    ll operator -(ll a,long long b)\n    {\n        ll x;\n        x.sin(b);\n        return a-x;\n    }\n    ll operator *(ll a,long long b)\n    {\n        ll x;\n        x.sin(b);\n        return a*x;\n    }\n    ostream& operator <<(ostream& os,ll &x)//\u5b9a\u4e49\u8f93\u51fa\u6d41\uff0c\u65b9\u4fbf\u8f93\u51fa\n    {\n        x.out();\n        return os;\n    }\n    void turn(int s,int t,ll &a)//\u524d\u9762\u90fd\u662f\u9ad8\u7cbe\u5ea6\u7684\u5b9a\u4e49\n    {\n        a.clear();\n        for(int i=s;i<t;++i)\n            a=a*10,a=a+op[i]-48;\n    }\n    int main()//\u4e3b\u51fd\u6570\u7684\u89e3\u91ca\u572840\u5206\u505a\u6cd5\u91cc\u5df2\u7ecf\u63d0\u8fc7\u4e86\uff0c\u6211\u5c31\u4e0d\u518d\u89e3\u91ca\u4e00\u904d\u4e86\n    {\n        scanf(\"%s\",op);\n        while(op[i]!='\\0')\n        {\n            while(op[i]=='+') flag=1,s=s+1,++i;\n            while(op[i]=='-') flag=-1,s=s+1,++i;\n            if(isdigit(op[i]))\n            {\n                j=i;\n                while(isdigit(op[j]))\n                    ++j;\n                turn(i,j,num[++k]);\n                num[k]=num[k]*s*flag;\n                i=j,s.clear();\n            }\n            else\n            {\n                if(op[i]=='(')\n                {\n                    j=++i;\n                    while(isdigit(op[j]))\n                        ++j;\n                    turn(i,j,s);\n                    i=j;\n                }\n                if(op[i]==')')\n                    ++i;\n            }\n        }\n        for(int i=1;i<=k;i++)\n            ans+=num[i];\n        cout<<ans;//\u7528cout\u8f93\u51fa\u5373\u53ef\n        return 0;\n    }\n```\n\u6211\u53d1\u7684\u9898\u89e3\u662f\u4ece\u6765\u4e5f\u4e0d\u6316\u5751\u7684\uff0c\u8bf7\u5927\u5bb6\u81ea\u89c9\uff0c\u62b5\u5236\u6284\u9898\u89e3\u8fd9\u79cd\u4e0d\u826f\u4e60\u60ef\uff0c\u8c22\u8c22\u3002",
        "postTime": 1564898418,
        "uid": 181378,
        "name": "Alarm5854",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "## [P1557](https://www.luogu.com.cn/problem/P1557) Java \u7248\u9898\u89e3\n\n\u7531\u9898\u53ef\u77e5\uff0cKruscal \u578b\u7b97\u5f0f\u7684\u57fa\u672c\u5355\u5143\u662f\n$$ +/-(a)\\ b $$\n\u6216\n$$ \\overbrace{+\\cdots}^{a}/\\overbrace{-\\cdots}^{a}\\ b $$\n\u5176\u4e2d\uff0c$a$ \u548c $b$ \u5747\u4ee3\u8868**\u9ad8\u7cbe\u5ea6\u6574\u6570**\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u79f0\u4e0a\u8ff0\u4e24\u79cd\u57fa\u672c\u5355\u5143\u5206\u522b\u4e3a**\u62ec\u53f7\u5355\u5143**\u548c**\u7b26\u94fe\u5355\u5143**\n\n\u6ce8\u610f\uff0c\u4e00\u4e2a\u7b97\u5f0f\u7684\u5f00\u5934\u4e5f\u6709\u53ef\u80fd\u51fa\u73b0\u6570\u5b57\uff0c\u6bd4\u5982\u9898\u76ee\u4e2d\u7684 $\\texttt{23+++15-2}$\n\n\u660e\u786e\u8fd9\u4e9b\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u4e86~\n\n------------\n\n0. **\u8bfb\u5165\u7b97\u5f0f**\n\t```java\n\tString str = (new Scanner(System.in)).next();\n\t```\n\n1. **\u5904\u7406\u6570\u5b57\u5f00\u5934\u7684\u60c5\u51b5**\n\n\t\u4e00\u65e6\u4f7f\u7528 `String` \u4e2d\u7684 `startsWith(String prefix)` \u65b9\u6cd5\u53d1\u73b0\u7b97\u5f0f\u7684\u5f00\u5934\u5e76\u4e0d\u4ee5\u8fd0\u7b97\u7b26 `+` \u6216 `-` \u5f00\u5934\uff0c\u5c31\u5c06 `i` \u81ea\u52a0\uff0c\u76f4\u5230\u4e0b\u6807\u4e3a `i` \u7684\u5b57\u7b26\u662f\u8fd0\u7b97\u7b26\u4e3a\u6b62\n\n\t\u540c\u65f6\u5c06\u7b54\u6848\u52a0\u4e0a\u5f00\u5934\u7684\u6570\u5b57\n\t```java\n\tint i = 0;\n\tBigInteger ans = BigInteger.ZERO;\n\tif (!str.startsWith(\"+\") && !str.startsWith(\"-\")) {\n\t\twhile (str.charAt(i) != '+' && str.charAt(i) != '-') {\n\t\t\ti++;\n\t\t}\n\t\tans = ans.add(new BigInteger(str.substring(0, i)));\n\t}\n\t```\n\n2. **\u5904\u7406\u62ec\u53f7\u5355\u5143**\n\n\t\u5728\u5faa\u73af\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u4e0b\u6807\u4e3a `i` \u7684\u5b57\u7b26\u662f\u8fd0\u7b97\u7b26\uff0c\u5982\u679c `str.charAt(i + 1) == '('`\uff0c\u8bf4\u660e\u8fd9\u4e2a\u5355\u5143\u662f\u4e00\u4e2a\u5f62\u5982 $ +/-(a)\\ b $ \u7684\u62ec\u53f7\u5355\u5143\n\n\t\u76ee\u524d\u4e0b\u6807 `i` \u5728\u8fd0\u7b97\u7b26\u4e0a\uff0c\u4e0b\u6807 `i + 1` \u5728\u201c(\u201d\u4e0a\uff0c\u56e0\u6b64\u4e0b\u6807 `i + 2` \u5728 $a$ \u7684\u6700\u9ad8\u4f4d\uff08\u89c1\u4e0b\u56fe\uff09\uff1b\u6211\u4eec\u53ea\u9700\u901a\u8fc7 `while` \u5faa\u73af\u627e\u5230\u201c)\u201d\u7684\u4e0b\u6807\u5373\u53ef\n    \n\t![Figure 1](https://i.postimg.cc/ZKmJQ0ky/Figure-1.png)\n    \n\t\u627e\u5230\u4e4b\u540e\uff0c\u4f7f\u7528 `substring(int beginIndex, int endIndex)` \u65b9\u6cd5\u5c06 $a$ \u622a\u53d6\u51fa\u6765\uff0c\u5e76\u50a8\u5b58\u4e3a `BigInteger`\n\n\t\u63a5\u4e0b\u6765\uff0c\u4ee4 `i = ++j`\uff0c\u8868\u793a\u4e0b\u6807 `i` \u5728\u4e0a\u56fe\u4e2d `j+1` \u7684\u4f4d\u7f6e\uff0c\u5373 $b$ \u7684\u6700\u9ad8\u4f4d\uff1b\u6211\u4eec\u9700\u8981\u901a\u8fc7 `while` \u5faa\u73af\u627e\u5230\u4e0b\u4e00\u4e2a\u5355\u5143\u8fd0\u7b97\u7b26\u7684\u9996\u4f4d\n    \n\t\u6ce8\u610f\uff0c\u5982\u679c\u5f53\u524d\u5355\u5143\u662f\u7b97\u5f0f\u7684\u6700\u540e\u4e00\u4e2a\u5355\u5143\uff0c\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u629b\u51fa `StringIndexOutOfBoundsException` \u9519\u8bef\uff0c\u5bfc\u81f4 `Runtime Error`\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528 `try` \u548c `catch` \u8fdb\u884c\u6355\u6349\u5e76\u5ffd\u7565\n    \n\t\u622a\u53d6 $b$ \u4e4b\u540e\uff0c\u4e0d\u4ec5\u8981\u8fd4\u56de $a \u22c5 b$\uff0c\u8fd8\u9700\u8981\u8fd4\u56de\u4e0b\u4e00\u4e2a\u5355\u5143\u7684\u9996\u4f4d\u4e0b\u6807\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u4e3b\u51fd\u6570 `while` \u5faa\u73af\u4e2d\u591a\u4f59\u7684\u67e5\u627e\uff0c\u76f4\u63a5\u5c06\u6b64\u5904\u7684 `j` \u8d4b\u503c\u7ed9\u4e3b\u51fd\u6570\u4e2d\u7684 `i` \u5373\u53ef\n\t```java\n\t// str \u8868\u793a\u7b97\u5f0f\uff0ci \u8868\u793a\u67d0\u5355\u5143\u7684\u9996\u4f4d\u4e0b\u6807\n\tprivate static Object[] bracket(String str, int i) {\n\t\tint j = i + 2;\n\t\twhile (str.charAt(j) != ')') {\n\t\t\tj++;\n\t\t}\n\t\tBigInteger a = new BigInteger(str.substring(i + 2, j));\n\t\ti = ++j;\n\t\ttry {\n\t\t\twhile (str.charAt(j) != '+' && str.charAt(j) != '-') {\n\t\t\t\tj++;\n\t\t\t}\n\t\t} catch (StringIndexOutOfBoundsException ignored) {\n\t\t}\n\t\tBigInteger b = new BigInteger(str.substring(i, j));\n\t\treturn new Object[]{a.multiply(b), j};\n\t}\n\t```\n\n3. **\u5904\u7406\u7b26\u94fe\u5355\u5143**\n\n\t\u5728\u5faa\u73af\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u4e0b\u6807\u4e3a `i` \u7684\u5b57\u7b26\u662f\u8fd0\u7b97\u7b26\uff0c\u5982\u679c `str.charAt(i + 1) != '('`\uff0c\u8bf4\u660e\u8fd9\u4e2a\u5355\u5143\u662f\u4e00\u4e2a\u5f62\u5982 $ \\overbrace{+\\cdots}^{a}/\\overbrace{-\\cdots}^{a}\\ b $ \u7684\u7b26\u94fe\u5355\u5143\uff08`i` \u4e00\u5b9a\u5728\u67d0\u4e2a\u5355\u5143\u7684\u9996\u4f4d\uff0c\u56e0\u6b64\u5982\u679c\u8fd9\u4e2a\u5355\u5143\u662f\u62ec\u53f7\u5355\u5143\uff0c\u5219\u4e0b\u6807\u4e3a `i+1` \u7684\u5b57\u7b26\u4e00\u5b9a\u662f\u201c(\u201d\uff1b\u5176\u4ed6\u60c5\u51b5\u4fbf\u662f\u7b26\u94fe\u5355\u5143\uff09\n\n\t\u4f7f\u7528 `while` \u5faa\u73af\u5f97\u5230\u6570\u5b57\u9996\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u8bb0\u4e3a `j`\uff08\u53ea\u8981 `str.charAt(j)` \u662f\u8fd0\u7b97\u7b26\u5c31\u8ba9 `j` \u81ea\u52a0\uff09\uff0c\u5219 $a = j - i$\n    \n\t\u63a5\u4e0b\u6765\uff0c\u7c7b\u4f3c\u4e8e\u5904\u7406\u62ec\u53f7\u5355\u5143\uff0c\u4ee4 `i = ++j`\uff0c\u8868\u793a\u4e0b\u6807 `i` \u5728 $b$ \u7684\u6700\u9ad8\u4f4d\uff1b\u6211\u4eec\u9700\u8981\u901a\u8fc7 `while` \u5faa\u73af\u627e\u5230\u4e0b\u4e00\u4e2a\u5355\u5143\u8fd0\u7b97\u7b26\u7684\u9996\u4f4d\n    \n\t\u6ce8\u610f\uff0c\u5982\u679c\u5f53\u524d\u5355\u5143\u662f\u7b97\u5f0f\u7684\u6700\u540e\u4e00\u4e2a\u5355\u5143\uff0c\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u629b\u51fa `StringIndexOutOfBoundsException` \u9519\u8bef\uff0c\u5bfc\u81f4 `Runtime Error`\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528 `try` \u548c `catch` \u8fdb\u884c\u6355\u6349\u5e76\u5ffd\u7565\n    \n\t\u622a\u53d6 $b$ \u4e4b\u540e\uff0c\u4e0d\u4ec5\u8981\u8fd4\u56de $a \u22c5 b$\uff0c\u8fd8\u9700\u8981\u8fd4\u56de\u4e0b\u4e00\u4e2a\u5355\u5143\u7684\u9996\u4f4d\u4e0b\u6807\uff0c\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u4e3b\u51fd\u6570 `while` \u5faa\u73af\u4e2d\u591a\u4f59\u7684\u67e5\u627e\uff0c\u76f4\u63a5\u5c06\u6b64\u5904\u7684 `j` \u8d4b\u503c\u7ed9\u4e3b\u51fd\u6570\u4e2d\u7684 `i` \u5373\u53ef\n\t```java\n\t// str \u8868\u793a\u7b97\u5f0f\uff0ci \u8868\u793a\u67d0\u5355\u5143\u7684\u9996\u4f4d\u4e0b\u6807\uff0cop \u8868\u793a\u8fd0\u7b97\u7b26\uff08+ \u6216 -\uff09\n\tprivate static Object[] chain(String str, int i, char op) {\n\t\tint j = i;\n\t\twhile (str.charAt(j) == op) {\n\t\t\tj++;\n\t\t}\n\t\tBigInteger a = new BigInteger((j - i) + \"\");\n\t\ti = j;\n\t\ttry {\n\t\t\twhile (str.charAt(j) != '+' && str.charAt(j) != '-') {\n\t\t\t\tj++;\n\t\t\t}\n\t\t} catch (StringIndexOutOfBoundsException ignored) {\n\t\t}\n\t\tBigInteger b = new BigInteger(str.substring(i, j));\n\t\treturn new Object[]{a.multiply(b), j};\n\t}\n\t```\n\n4. **\u8f93\u51fa\u7b54\u6848**\n\t```java\n\tSystem.out.println(ans);\n\t```\n\n------------\n\n\u6700\u540e\u9644\u4e0a\u5b8c\u6574\u4ee3\u7801\uff08\u771f\u7684\u5f88\u5b8c\u6574\uff01\uff09\n```java\npackage me.naptie.oi;\n\nimport java.math.BigInteger;\nimport java.util.Scanner;\n\npublic class Main {\n\n\tpublic static void main(String[] args) {\n\t\tString str = (new Scanner(System.in)).next();\n\t\tint i = 0;\n\t\tBigInteger ans = BigInteger.ZERO;\n\t\tif (!str.startsWith(\"+\") && !str.startsWith(\"-\")) {\n\t\t\twhile (str.charAt(i) != '+' && str.charAt(i) != '-') {\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tans = ans.add(new BigInteger(str.substring(0, i)));\n\t\t}\n\t\twhile (i < str.length()) {\n\t\t\tif (str.charAt(i) == '+') {\n\t\t\t\tObject[] res;\n\t\t\t\tif (str.charAt(i + 1) == '(') {\n\t\t\t\t\tres = bracket(str, i);\n\t\t\t\t} else {\n\t\t\t\t\tres = chain(str, i, '+');\n\t\t\t\t}\n\t\t\t\tans = ans.add((BigInteger) res[0]);\n\t\t\t\ti = (int) res[1];\n\t\t\t} else {\n\t\t\t\tObject[] res;\n\t\t\t\tif (str.charAt(i + 1) == '(') {\n\t\t\t\t\tres = bracket(str, i);\n\t\t\t\t} else {\n\t\t\t\t\tres = chain(str, i, '-');\n\t\t\t\t}\n\t\t\t\tans = ans.add(((BigInteger) res[0]).negate());\n\t\t\t\ti = (int) res[1];\n\t\t\t}\n\t\t}\n\t\tSystem.out.println(ans);\n\t}\n\n\tprivate static Object[] bracket(String str, int i) {\n\t\tint j = i + 2;\n\t\twhile (str.charAt(j) != ')') {\n\t\t\tj++;\n\t\t}\n\t\tBigInteger a = new BigInteger(str.substring(i + 2, j));\n\t\ti = ++j;\n\t\ttry {\n\t\t\twhile (str.charAt(j) != '+' && str.charAt(j) != '-') {\n\t\t\t\tj++;\n\t\t\t}\n\t\t} catch (StringIndexOutOfBoundsException ignored) {\n\t\t}\n\t\tBigInteger b = new BigInteger(str.substring(i, j));\n\t\treturn new Object[]{a.multiply(b), j};\n\t}\n\n\tprivate static Object[] chain(String str, int i, char op) {\n\t\tint j = i;\n\t\twhile (str.charAt(j) == op) {\n\t\t\tj++;\n\t\t}\n\t\tBigInteger a = new BigInteger((j - i) + \"\");\n\t\ti = j;\n\t\ttry {\n\t\t\twhile (str.charAt(j) != '+' && str.charAt(j) != '-') {\n\t\t\t\tj++;\n\t\t\t}\n\t\t} catch (StringIndexOutOfBoundsException ignored) {\n\t\t}\n\t\tBigInteger b = new BigInteger(str.substring(i, j));\n\t\treturn new Object[]{a.multiply(b), j};\n\t}\n\n}\n```",
        "postTime": 1628153024,
        "uid": 486119,
        "name": "Naptie",
        "ccfLevel": 3,
        "title": "P1557 Java \u7248\u9898\u89e3"
    },
    {
        "content": "\u849f\u84bb\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\uff0c\u4e0d\u8db3\u4e4b\u5904\u8bf7\u5927\u4f6c\u89c1\u8c05\u3002\n\n[\u535a\u5ba2\u56ed\u98df\u7528\u66f4\u4f73](https://www.cnblogs.com/zerocode/p/solution-p1557.html)\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P1557)\n\n\u9996\u5148\uff0c\u6570\u636e\u8303\u56f4\u662f\u957f\u5ea6\u4e0d\u8d85\u8fc72000\uff0c\u6240\u4ee5\u8981\u5f00**\u9ad8\u7cbe\u5ea6**\u3002\n\n\u6839\u636e\u9898\u610f\uff0c\u6709\u52a0\u6cd5\uff0c\u51cf\u6cd5\u548c\u4e58\u6cd5\u3002\u6240\u4ee5\u5148\u628a\u9ad8\u7cbe\u5ea6\u5199\u5b8c\uff08\u6211\u4f7f\u7528\u7684\u662fvector\uff09\u3002\n\n\u52a0\u6cd5\u9ad8\u7cbe\u5ea6\n\n```c++\nvector<int> Plus(const vector<int>& a,const vector<int>& b)\n{\n\tvector<int>c(max(a.size(),b.size())+1);\n\tfor (int i=0;i<min(a.size(),b.size());++i)\n\t\tc[i]+=a[i]+b[i];\n\tif (a.size()>b.size())\n\tfor (int i=b.size();i<a.size();++i)c[i]=a[i];\n\telse for (int i=a.size();i<b.size();++i)c[i]=b[i];\n\tfor (int i=0;i<c.size()-1;++i)\n\t{\n\t\tc[i+1]+=c[i]/10;\n\t\tc[i]%=10;\n\t}\n\tif (!c[c.size()-1])c.pop_back(); //\u6700\u9ad8\u4f4d\u4e3a0\n\treturn c;\n}\n```\n\u51cf\u6cd5\u9ad8\u7cbe\u5ea6\n```c++\nvector<int> Minus(vector<int> a,vector<int> b) //a-b\n{\n\tint cmpans=cmp(a,b); //\u8fd9\u662f\u6bd4\u8f83\u4e24\u4e2a\u6570\u5927\u5c0f\n\tif (!cmpans) //\u76f8\u7b49\u7684\u60c5\u51b5\n\t{\n\t\tvector<int>c;\n\t\tc.push_back(0);\n\t\treturn c;\n\t}\n\telse if(cmpans==-1) //a<b\n\t{\n\t\tneg=!neg; //\u8fd9\u662f\u4e00\u4e2a\u6807\u7b7e\uff0c\u8bb0\u5f55\u662f\u4e0d\u662f\u8d1f\u6570\n\t\tswap(a,b);\n\t}\n\tvector<int>c(max(a.size(),b.size()));\n\tfor (int i=0;i<min(a.size(),b.size());++i)\n\t\tc[i]=a[i]-b[i];\n\tfor (int i=b.size();i<a.size();++i)c[i]=a[i];\n\tfor (int i=0;i<c.size()-1;++i)\n\t{\n\t\tif (c[i]<0)\n\t\t{\n\t\t\t--c[i+1];\n\t\t\tc[i]+=10;\n\t\t}\n\t}\n\twhile (!c[c.size()-1])c.pop_back(); //\u6700\u9ad8\u4f4d\u4e3a0\n\treturn c;\t\n}\n```\n\u4e58\u6cd5\u9ad8\u7cbe\u5ea6\n```c++\nvector<int> mul(const vector<int>&a,const vector<int>&b)\n{\n\tvector<int>c(a.size()+b.size());\n\tfor (int i=0;i<a.size()+b.size();++i)c[i]=0;\n\tfor (int x=0;x<a.size();++x)\n\tfor (int y=0;y<b.size();++y)\n\t{\n\t\tc[x+y]+=a[x]*b[y]; //\u60f3\u60f3\u4e3a\u4ec0\u4e48\n\t}\n\tfor (int i=0;i<c.size()-1;++i)\n\t{\n\t\tc[i+1]+=c[i]/10;\n\t\tc[i]%=10;\n\t}\n\tif (!c[c.size()-1])c.pop_back(); //\u6700\u9ad8\u4f4d\u4e3a0\n\treturn c;\n}\n```\n\u63a5\u4e0b\u662f\u5b57\u7b26\u4e32\u5904\u7406\u3002\n\n\u65b9\u6cd5\uff1a\u5c06\u6574\u4e2a\u5b57\u7b26\u4e32\u62c6\u6210\u8868\u8fbe\u5f0f\uff0c\u6bcf\u4e2a\u8868\u8fbe\u5f0f\u5355\u72ec\u8ba1\u7b97\uff0c\u6700\u540e\u52a0\u5230ans\u91cc\u3002\n\n\u6709\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a\n\n$+++x$\n---\n\u8ba1\u7b97\u6709\u591a\u5c11\u4e2a\u52a0\u53f7\uff0c\u518d\u8bfb\u5165\u6570\u5b57\uff0c\u628a\u4ed6\u4eec\u4e58\u8d77\u6765\u3002\n```c++\ncharge(to,bit-i/*\u52a0\u53f7\u4e2a\u6570*/); //\u628ato\u586b\u5145\u4e3a\u52a0\u53f7\u4e2a\u6570\nwhile (isdigit(s[i]))num.push_back(s[i]-'0'),++i;\nreverse(num.begin(),num.end()); //\u56e0\u4e3a\u8bfb\u5165\u662f\u53cd\u7740\u7684\uff0c\u8981\u628a\u9ad8\u4f4e\u4f4d\u53cd\u8fc7\u6765\nnum=mul(num,to); //\u4e58\u8d77\u6765\n--i; //\u56e0\u4e3a\u66f4\u65b0\u65f6\u4f1a\u8df3\u8fc7\u4e00\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u8981\u540e\u9000\u4e00\u4e2a\n```\n$+(x)x$\n---\n\u5206\u522b\u8bfb\u5165\u62ec\u53f7\u91cc\u7684\u6570\u548c\u540e\u9762\u7684\u6570\uff0c\u518d\u4e58\u8d77\u6765\u3002\n```c++\n++i; //\u8df3\u8fc7\u52a0\u53f7\nwhile (s[i]!=')')to.push_back(s[i]-'0'),++i;\nreverse(to.begin(),to.end());\n++i; //\u8df3\u8fc7\u53f3\u62ec\u53f7\nwhile (isdigit(s[i]))num.push_back(s[i]-'0'),++i;\nreverse(num.begin(),num.end());\nnum=mul(num,to);\n--i;\n```\n$+x$\n---\n\u540c\u591a\u4e2a\u52a0\u53f7\uff08~~\u4e3a\u4ec0\u4e48\u4e00\u4e2a\u52a0\u53f7\u8981\u5355\u72ec\u5904\u7406~~\uff09\n```c++\nwhile (isdigit(s[i]))num.push_back(s[i]-'0'),++i;\nreverse(num.begin(),num.end());\n--i;\n```\n$x$\n---\n\u53ea\u6709\u7b2c\u4e00\u4e2a\u8868\u8fbe\u5f0f\u624d\u4f1a\u51fa\u73b0\u3002\uff08very easy\uff09\n```c++\nwhile (isdigit(s[i]))num.push_back(s[i]-'0'),++i;\nreverse(num.begin(),num.end());\n--i;\n```\n\u4f59\u4e0b\u4e09\u79cd\uff1a\n\n$---x$\n\n$-(x)x$\n\n$-x$\n\n\u540c\u52a0\u6cd5\uff08\u592a\u957f\u4e0d\u8d34\u4e86\uff09\n\n---\n\u7ec8\u6781\u95ee\u9898\uff1a\n## Q\uff1a\u5982\u4f55\u628a\u8868\u8fbe\u5f0f\u52a0\u5230ans\u91cc\u9762\uff1f\n\nA\uff1a\u5b57\u7b26\u4e32\u5904\u7406+\u5206\u7c7b\u8ba8\u8bba\u3002\n\n\uff08r\u51fd\u6570\u8868\u793a\u53c2\u6570\u4e3a\uff08num\uff0cans\uff09\uff09\n|ans\u7b26\u53f7|num\u7b26\u53f7|\u5904\u7406\u65b9\u6cd5|\n|---|---|--- |\n| + | + |Plus|\n| + | - |Minus(\u9ad8\u7cbe\u5ea6\u5df2\u505a\u6b63\u8d1f\u5904\u7406)|\n| - | + |rMinus\uff0cans\u53d6\u76f8\u53cd\u6570|\n| - | - |Plus|\n\n```c++\nans.push_back(0); //\u7b54\u6848\u521d\u59cb\u5316\u4e3a0\nvector<int>num,to; //num\u662f\u8981\u52a0\uff08\u51cf\uff09\u7684\u6570\uff0cto\u662f\u6709\u591a\u5c11\u4e2anum\u76f8\u52a0\uff08\u51cf\uff09\nfor (int i=0;i<s.size();++i)\n{\n\tnum.clear();\n\tto.clear(); //\u521d\u59cb\u5316\n\tif (s[i]=='+') //\u52a0\u51cf\u6cd5\u5206\u5f00\u8ba8\u8bba\n\t{\n\t\tint bit=i;\n\t\tfor (;s[i]=='+';++i); //\u8bb0\u5f55\u6709\u591a\u5c11\u4e2a\u52a0\u53f7\n\t\t//bit-i\u4e3a\u52a0\u53f7\u4e2a\u6570\n       \t\t/*\u7701\u7565num\u5904\u7406\u8fc7\u7a0b\uff08\u4e0a\u9762\u6709\uff09*/\n               \t//\u91cd\u70b9\n\t\tif (neg) ans=Minus(num,ans),neg=!neg; //\u5224\u65adans\u662f\u5426\u4e3a\u8d1f\uff0c\u5206\u5f00\u5904\u7406\n\t\telse ans=Plus(ans,num);\n\t}\n\telse if (s[i]=='-') //\u539f\u7406\u540c\u52a0\n\t{\n\t\t//\u5904\u7406\u8fc7\u7a0b\u540c\u52a0\u6cd5\uff0c\u7701\u53bb\n\t\tif (neg)ans=Plus(ans,num);\n\t\telse ans=Minus(ans,num);\n\t}\n}\n```",
        "postTime": 1609765872,
        "uid": 374433,
        "name": "ppip",
        "ccfLevel": 7,
        "title": "P1557 Kruscal\u7684\u52a0\u6cd5 \u9898\u89e3"
    },
    {
        "content": "\u5443\u3002\u3002\u3002\u3002\u7b2c\u4e00\u6b21(~~\u6c34~~)\u53d1\u4e00\u7bc7\u9898\u89e3\uff0c\u597d\u6fc0\u52a8QwQ\n\n\u8a00\u5f52\u6b63\u4f20\uff0c\u8fd9\u662f\u6211\u7b2c\u4e00\u9053\u5207\u6389\u7684\u7d2b\u9898\n\n[\u6ca1\u770b\u8fc7\u7684\u770b\u770b\u9898\u5148\uff08\u80af\u5b9a\u6709\u505a\u9898\u5148\u70b9\u9898\u89e3\u7684\uff09](https://www.luogu.com.cn/problem/P1557)\n\n\u8fd9\u9053\u9898\u76ee\u96c6\u5408\u4e86\u6211\u8fd9\u79cd\u849f\u84bb\u6700\u4e0d\u613f\u610f\u78b0\u5230\u7684\u5b57\u7b26\u4e32\u4e0e\u9ad8\u7cbe\u5ea6\u7ed3\u5408\u4e4b\u9898\uff0c\u672c\u6765\u8fd8\u4ee5\u4e3a\n\n\u5c31\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\u7684\u5224\u65ad\uff08\u770b\u4f60\u7ec6\u4e0d\u7ec6\u5fc3\uff09\uff0c\u7136\u540e\u968f\u624b\u4e00\u70b9\u5f00\u8ba8\u8bba\u3002\u3002\u3002\u3002\n\n\u8981\u5e26\u9ad8\u7cbe\u5ea6\uff01\uff01\uff01\uff01\uff01\n\n\u7136\u540e\u4e3a\u4e86\u5207\u4e00\u9053\u7d2b\u9898\uff0c\u6211\u6574\u6574\u82b1\u4e862\u5c0f\u65f6\u8c03\u9ad8\u7cbe\u5ea6QAQ\n\n\u597d\u597d\u597d\uff0c\u7ec8\u4e8e\u8a00\u5f52\u6b63\u4f20\n\n\u9996\u5148\u5176\u5b9e\u9898\u76ee\u8fd8\u662f\u5f88\u597d\u7406\u89e3\u7684\uff1a\u5c31\u662f\u4e00\u5934\u5976\u725b\u95f2\u7740\u65e0\u804a\u968f\u4fbf\u73a9\u73a9\uff0c\u7136\u540e\u5c31\u5f00\u53d1\u51fa\u4e86\u4e00\u79cd\u65b0\u7684\u7b97\u5f0f\uff08~~\u6211\u6ca1\u89c9\u5f97\u6709\u591a\u65b0~~\uff09\n\n# \u6ce8\u610f\u4e8b\u9879\uff1a\n\n\u62ec\u53f7\u91cc\u7684\u7b97\u5f0f\u5c31\u7528\u4e58\u53f7\uff08\u4e0d\u8981\u50cf\u6211\u4e00\u6837\u61d2\u5f97\u6253\u9ad8\u7cbe\u4e58\uff09\uff0c\u7136\u540e\u5c31\u662f\u5148\u7edf\u8ba1\u4e0b\u52a0\u51cf\u7b26\u53f7\u6570\u91cf\u3002\u6700\u540e\u5176\u5b9e\u5199\u8fc7\u9ad8\u7cbe\u7684\u90fd\u77e5\u9053\u4e00\u822c\u7b97\u5f0f\uff08\u6216\u6570\u5b57\uff09\u90fd\u8981\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8f93\u5165\u7684\uff0c\u4e0d\u4f1a\u7684\u5efa\u8bae\u5148\u5207\u4e00\u4e0b\u6a21\u677f\u9898\n\n\u9898\u76ee\u5176\u5b9e\u4e5f\u4e0d\u96be\uff0c\u6709\u8db3\u591f\u8010\u5fc3\u53bb\u8c03\u9898\u5c31\u80fd\u8fc7\uff08\u4e00\u904d\u8fc7\u7684\u5f53\u6211\u6ca1\u8bf4\uff09\n\n~~\u8be6\u7ec6~~\u6ce8\u91ca\u90fd\u5728\u4ee3\u7801\u91cc\u4e86\uff0c\u671b\u7ba1\u7406\u5927\u5927\u80fd\u591f\u7ed9\u8fc7\uff08\u4e0d\u5bf9\u6216\u591a\u4f59\u4e4b\u5904(\u591a\u4f59\u597d\u591a)\u8fd8\u671b\u5927\u4f6c\u4eec\u63d0\u610f\u89c1\uff0c\u6c42\u52ff\u55b7QwQ\uff09\n\n```\n#include<bits/stdc++.h>//\u4e60\u60ef\u6027\u4e07\u80fd\u5934\uff08\u4e0d\u662f\u4e2a\u597d\u4e60\u60ef\uff09\nusing namespace std;\nint flag,num[50001],ans[50001],ans2[50001],lans2,lans,lnum,lcs;\nint len=-1,tmp=-1,cs[5001],flag2,flag3,a[50001],b[50001],c[50001];\nint x,lena,lenb,lenc;//\u5927\u4f6c\u4eec\u51d1\u5408\u7740\u5eb7\u5eb7\nchar s[50001],ss[50001];//\u8f93\u5165\u7684\u7b97\u5f0f\ninline void add()//\u52a0\u6cd51\uff08\u8981\u52a0\u7684\u6570\uff09\n{\n\tint k=0,x=0;\n\twhile(k<=lans||k<=lnum)\n\t{\n\t\tans[k]=ans[k]+num[lnum-k]+x;\n\t\tx=ans[k]/10;\n\t\tans[k]%=10;\n\t\tk++;\n\t}\n\tif(x==1)\n\t{\n\t\tans[k]=1;\n\t\tk++;\n\t}\n\tlans=k-1;\n\treturn ;\n}\ninline void addd()//\u52a0\u6cd52\uff08\u8981\u51cf\u7684\u6570\uff09\n{\n\tint k=0,x=0;\n\twhile(k<=lans2||k<=lnum)\n\t{\n\t\tans2[k]=ans2[k]+num[lnum-k]+x;\n\t\tx=ans2[k]/10;\n\t\tans2[k]%=10;\n\t\tk++;\n\t}\n\tif(x==1)\n\t{\n\t\tans2[k]=1;\n\t\tk++;\n\t}\n\tlans2=k-1;\n\treturn ;\n}\ninline void jian()//\u51cf\u6cd5\uff08\u5c06\u8981\u52a0\u7684\u6570\u548c\u8981\u51cf\u7684\u6570\u76f8\u51cf\uff08\u8c01\u5927\u8c01\u4e3a\u88ab\u51cf\u6570\uff09\uff09\n{\n\tint k=0;\n\tif(!flag3)\n\t{ \n\t\twhile(k<=lans||k<=lans2)\n\t\t{\n\t\t\tif(ans[k]<ans2[k])\n\t\t\t{\n\t\t\t\tans[k]+=10;\n\t\t\t\tans[k+1]--;\n\t\t\t}\n\t\t\tans[k]=ans[k]-ans2[k];\n\t\t\tk++;\n\t\t}\n\t} \n\telse if(flag3)\n\t{\n\t\twhile(k<=lans||k<=lans2) \n\t\t{\n\t\t\tif(ans2[k]<ans[k])\n\t\t\t{\n\t\t\t\tans2[k]+=10;\n\t\t\t\tans2[k+1]--;\n\t\t\t}\n\t\t\tans2[k]=ans2[k]-ans[k];\n\t\t\tk++;\n\t\t}\n\t}\n\tif(flag3)\n\t\tlans2=k-1;\n\telse if(!flag3)\n\t\tlans=k-1;\n\treturn ;\n}\ninline void chenfa()//\u8fd9\u603b\u770b\u5f97\u51fa\u6765\u5427\uff08\u666e\u901a\u4e58\u6cd5\uff09\n{\n\tlena=lnum+1,lenb=lcs+1; \n\tmemset(a,0,sizeof(a));\n\tmemset(b,0,sizeof(b));\n\tmemset(c,0,sizeof(c));\n\tfor(register int i(lnum),j(1);i>=0;--i,++j)\n\t{\n\t\ta[j]=num[i];\n\t}\n\tif(!flag2)\n\t{\n\t\tfor(register int i(0),j(1);i<=lcs;++i,++j)\n\t\t{\n\t\t\tb[j]=cs[i];\n\t\t}\n\t}\n\telse if(flag2)\n\t{\n\t\tfor(register int i(lcs),j(1);i>=0;--i,++j)\n\t\t{\n\t\t\tb[j]=cs[i];\n\t\t}\n\t}\n\tfor(register int i(1);i<=lena;++i)\n\t{\n\t\tx=0;\n\t\tfor(register int j(1);j<=lenb;++j)\n\t\t{\n\t\t\tc[i+j-1]+=a[i]*b[j]+x;\n\t\t\tx=c[i+j-1]/10;\n\t\t\tc[i+j-1]%=10;\n\t\t}\n\t\tc[i+lenb]=x;\n\t}\n\tlenc=lena+lenb;\n\twhile(c[lenc]==0&&lenc>1)\n\t\tlenc--;\n\tfor(register int i(lenc),j(0);i>=1;--i,++j)\n\t{\n\t\tnum[j]=c[i];\n\t}\n\tlnum=lenc-1;\n\treturn ;\n}\ninline bool pd()//\u5224\u65ad\u8981\u52a0\u7684\u6570\u5927\u8fd8\u662f\u8981\u51cf\u7684\u6570\u5927\n{\n\tfor(register int i(lans);i>=0;--i)\n\t{\n\t\tif(ans[i]>ans2[i])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\telse if(ans[i]<ans2[i])\n\t\t{\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\nint main(void)//\u542c\u8bf4\u52a0void\u80fd\u53d8\u5feb\uff08\u96fe\n{\n\tcin>>ss;//\u4ee5\u5b57\u7b26\u4e32\u5f62\u5f0f\u8f93\u5165\n\tmemset(cs,0,sizeof(cs));\n\tmemset(num,0,sizeof(num));\n\tmemset(ans,0,sizeof(ans));//\u6e05\u7a7a\u6570\u7ec4\n\tint lens=strlen(ss);//string\u7c7b\u578b\u7528.length()\n\tif(ss[0]>='0'&&ss[0]<='9')\n\t{\n\t\ts[0]='+';\n\t\tfor(register int i(0);i<lens;++i)\n\t\t{\n\t\t\ts[i+1]=ss[i];\n\t\t}\n\t\tlens++;\n\t}//\u5982\u679c\u5f00\u5934\u662f\u6570\u5b57\u5c31\u5148\u52a0\u4e2a\u201c+\u201d\u53f7\uff08\u6211\u662f\u8fd9\u4e48\u5199\u7684\n\telse\n\t{\n\t\tfor(register int i(0);i<lens;++i)\n\t\t{\n\t\t\ts[i]=ss[i];\n\t\t}\n\t}//\u8c03\u52a8\u5b57\u7b26\u4e32\u4f4d\u7f6e(\u597d\u50cf\u4e0d\u9700\u8981\n\ts[lens]='+';\n\tif(s[1]!='(')\n\t{\n\t\tcs[0]=1;\n\t}\n\tfor(register int o(0);o<=lens;++o)\n\t{\n\t\tif(s[o]>='0'&&s[o]<='9')\n\t\t{\n\t\t\tif(flag!=0)\n\t\t\t{\n\t\t\t\tcs[lcs++]=s[o]-'0';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnum[lnum++]=s[o]-'0';\n\t\t\t}\n\t\t}\n\t\telse if(s[o]==')')\n\t\t{\n\t\t\tflag=0;\n\t\t}\n\t\telse if(s[o]=='+')\n\t\t{\n\t\t\tif(s[o-1]=='+')\n\t\t\t{\n\t\t\t\tcs[0]++;\n\t\t\t\tfor(register int i(0);i<lcs;++i)\n\t\t\t\t{\n\t\t\t\t\tif(cs[i]>=10)\n\t\t\t\t\t{\n\t\t\t\t\t\tcs[i]-=10;\n\t\t\t\t\t\tcs[i+1]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(cs[lcs]>=10)\n\t\t\t\t{\n\t\t\t\t\tcs[lcs]=0;\n\t\t\t\t\tlcs++;\n\t\t\t\t\tcs[lcs]=1; \n\t\t\t\t}\n\t\t\t}\n\t\t\tif(o>=1&&s[o-1]!='+'&&(tmp==1||tmp==-1))\n\t\t\t{\n\t\t\t\tif(flag2==1)\n\t\t\t\t{\n\t\t\t\t\tlcs--;\n\t\t\t\t}\n\t\t\t\tlnum--;\n\t\t\t\tchenfa();\n\t\t\t\tif(tmp==1)\n\t\t\t\t{\n\t\t\t\t\tadd();\n\t\t\t\t\twhile(ans[lans]==0&&lans>0)\n\t\t\t\t\tlans--;\n\t\t\t\t}\n\t\t\t\telse if(tmp==-1)\n\t\t\t\t{\n\t\t\t\t\taddd();\n\t\t\t\t\twhile(ans2[lans2]==0&&lans2>0)\n\t\t\t\t\t\tlans2--;\n\t\t\t\t} \n\t\t\t\tmemset(num,0,sizeof(num));\n\t\t\t\tmemset(cs,0,sizeof(cs));\n\t\t\t\tlcs=0,flag=0,lnum=0,flag2=0;\n\t\t\t\tcs[lcs]=1;\n\t\t\t}\n\t\t\tif(s[o+1]=='(')\n\t\t\t{\n\t\t\t\tflag=1;\n\t\t\t\tflag2=1;\n\t\t\t\tcs[0]=0;\n\t\t\t}\n\t\t\ttmp=1;\n\t\t}\n\t\telse if(s[o]=='-')\n\t\t{\n\t\t\tif(s[o-1]=='-')\n\t\t\t{\n\t\t\t\tcs[0]++;\n\t\t\t\tfor(register int i(0);i<lcs;++i)\n\t\t\t\t{\n\t\t\t\t\tif(cs[i]>=10)\n\t\t\t\t\t{\n\t\t\t\t\t\tcs[i]-=10;\n\t\t\t\t\t\tcs[i+1]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(cs[lcs]>=10)\n\t\t\t\t{\n\t\t\t\t\tcs[lcs]=0;\n\t\t\t\t\tlcs++;\n\t\t\t\t\tcs[lcs]=1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(o>=1&&s[o-1]!='-'&&(tmp==1||tmp==-1))\n\t\t\t{\n\t\t\t\tif(flag2==1)\n\t\t\t\t{\n\t\t\t\t\tlcs--;\n\t\t\t\t}\n\t\t\t\tlnum--;\n\t\t\t\tchenfa();\n\t\t\t\tif(tmp==1)\n\t\t\t\t{\n\t\t\t\t\tadd();\n\t\t\t\t\twhile(ans[lans]==0&&lans>0)\n\t\t\t\t\tlans--;\n\t\t\t\t}//\u628a\u8981\u52a0\u7684\u6570\u5b57\u5f04\u5230\u4e00\u8d77\n\t\t\t\telse if(tmp==-1)\n\t\t\t\t{\n\t\t\t\t\taddd();\n\t\t\t\t\twhile(ans2[lans2]==0&&lans2>0)\n\t\t\t\t\t\tlans2--;\n\t\t\t\t}//\u628a\u8981\u51cf\u7684\u6570\u5b57\u5f04\u5230\u4e00\u8d77\n\t\t\t\tmemset(num,0,sizeof(num));\n\t\t\t\tmemset(cs,0,sizeof(cs));\n\t\t\t\tlcs=0,flag=0,lnum=0,flag2=0;\n\t\t\t\tcs[lcs]=1;\n\t\t\t}\n\t\t\tif(s[o+1]=='(')\n\t\t\t{\n\t\t\t\tflag=1;\n\t\t\t\tflag2=1;\n\t\t\t\tcs[0]=0;\n\t\t\t}\n\t\t\ttmp=-1;\n\t\t}\n\t}//\u5176\u5b9e\u4e2d\u95f4\u90fd\u6709\u597d\u591a\u4e0d\u9700\u8981\u7684\u6b65\u9aa4\uff08\u6bd5\u7adf\u597d\u4e45\u524d\u5199\u7684\u4e86\uff09\uff0c\u7684\u786e\u4e0d\u591f\u7b80\u6d01\uff0c\u5e0c\u671b\u4f60\u4eec\u4e0d\u8981\u72af\u6211\u8fd9\u79cd\u60c5\u51b5\u54e6\u3002\n\tif(lans<lans2)\n\t{\n\t\tflag3=1;\n\t\tprintf(\"-\");\n\t}//\u5224\u65ad\u662f\u5426\u6700\u540e\u7b54\u6848\u4e3a\u8d1f\u6570\u3002\n\telse if(lans==lans2)\n\t{\n\t\tif(pd()==true)\n\t\t{\n\t\t\tflag3=1;\n\t\t\tprintf(\"-\");\n\t\t}\n\t}//\u540c\u4e0a\n\tjian();//\u51cf\u4e00\u4e0b\u8be5\u52a0\u8d77\u6765\u7684\u90e8\u5206\u548c\u8be5\u51cf\u6389\u7684\u90e8\u5206\u3002\n\tif(!flag3)\n\t{\n\t\twhile(ans[lans]==0&&lans>0)\n\t\t\tlans--;//\u53bb\u6389\u591a\u4f59\u76840\n\t\tfor(register int i(lans);i>=0;--i)\n\t\t{\n\t\t\tprintf(\"%d\",ans[i]);\n\t\t}//\u53cd\u5411\u8f93\u51fa\uff0c\u57fa\u672c\u64cd\u4f5c\n\t\treturn 0;\n\t}\n\telse if(flag3)\n\t{\n\t\twhile(ans2[lans2]==0&&lans2>0)\n\t\t\tlans2--;//\u540c\u4e0a\n\t\tfor(register int i(lans2);i>=0;--i)\n\t\t{\n\t\t\tprintf(\"%d\",ans2[i]);\n\t\t}//\u82e5\u662f\u8d1f\u6570\u4e5f\u4e00\u6837\u8f93\u51fa\n\t\treturn 0;\n\t}\n\treturn 0;//\u4e00\u4e2a\u597d\u4e60\u60efQwQ\n}\n```\n## \u5404\u4f4d\u770b\u5b98\u8d70\u597d\uff0c( ^_^ )/~~\u62dc\u62dc",
        "postTime": 1603881447,
        "uid": 310571,
        "name": "\u5e1d\u5343\u79cb\u4e36\u68a6\u5c18",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "## \u5c45\u7136\u6ca1\u6709\u9898\u89e3\u7528$\\mathcal{Py}$\u6c34\u8fc7\uff01\uff01\uff01\n\u8fd9\u91cc\u6211\u5c31\u6c34\u4e00\u4e0b\u5427~  \n**\u5148\u58f0\u660e\u4e00\u4e0b\u53d8\u91cf\uff1a**  \n$s:$\u8f93\u5165\u7684\u5b57\u7b26\u4e32  \n$ans:$\u6700\u540e\u7684\u7ed3\u679c  \n$f:$\u7b26\u53f7  \n$res:$\u6bcf\u4e2a+/-\u540e\u7684\u7ed3\u679c  \n$now:$\u73b0\u5728\u7684\u6570\u5b57  \n$tms:$+/-\u7684\u4e2a\u6570  \n$ls:$ s\u7684\u957f\u5ea6     \n\u64cd\u4f5c\uff1a     \n$Case1:$ $s[0]$\u4e0d\u4e3a+/-    \n```python\nif s[0]!='+' and s[0]!='-':\n    s=\"+\"+s\n```\n\u7136\u540e\u904d\u5386\u5b57\u7b26\u4e32:  \n```python\nfor i in range(ls):\n```\n$Case2:$\u4e3a+\u65f6    \n```python\n    if s[i]=='+':\n        if s[i-1]!='+' and i!=0:\n            res*=now\n            ans+=f*res*tms\n            tms=0\n        f=1\n        res=1\n        now=0\n        tms+=1\n```\n$Case3:$\u4e3a-\u65f6   \n```python\n    elif s[i]=='-':\n        if s[i-1]!='-' and i!=0:\n            res*=now\n            ans+=f*res*tms\n            tms=0\n        f=-1\n        res=1\n        now=0\n        tms+=1\n```\n$Case4:$\u4e3a)\u65f6   \n```python\n    elif s[i]==')':\n        res*=now\n        now=0\n```\n$Cases5:$\u4e3a\u6570\u5b57\u65f6   \n```python\n    elif s[i].isdigit():\n        now=(now<<3)+(now<<1)+int(s[i])\n```\n\u6700\u540e\uff0c\u8f93\u51fa\u7b54\u6848\uff0c\u8bb0\u5f97\u628a\u67ff\u5b50\u6700\u540e\u4e00\u9879\u52a0\u4e0a\u54e6~   \n```python\nprint(ans+f*res*now*tms)\n```",
        "postTime": 1585657683,
        "uid": 312393,
        "name": "ADay",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1797 \u3010\u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5\u3011"
    },
    {
        "content": "\u8fd9\u9898\u662f[@laybxc](https://www.luogu.org/space/show?uid=51441)\u8fd9\u4f4d\u795e\u7287\u63a8\u8350\u7ed9\u6211\u5199\u7684\u3002\u4ece\u5f00\u59cb\u5199\u5230AC\u524d\u540e\u65f6\u95f4\u8de8\u5ea6\u4e00\u4e2a\u661f\u671f\uff0c\u8fd9\u662f\u6211\u7b2c\u4e00\u6b21\u8ba4\u8ba4\u771f\u771f\u5199\u9ad8\u7cbe\uff0c100+\u7684\u603b\u63d0\u4ea4\u6b21\u6570\u5e94\u8be5\u670915\u6b21\u662f\u6211\u63d0\u4ea4\u7684\uff0c\u56e0\u4e3a\u5b9e\u5728\u592a\u6bd2\u7624\u4e86\uff0c\u611f\u8c22@laybxc\u63d0\u4f9b\u7684\u9ad8\u7cbe\u5ea6\u6a21\u677f\u8ba9\u6211\u627e\u51fa\u4e86\u539f\u672c\u6211\u5199\u7684\u4ee3\u7801\u4e2d\u7684\u9519\u8bef\uff0c\u4eca\u5929\u7ec8\u4e8eAC\u4e86\uff0c\u6240\u4ee5\u53d1\u4e00\u7bc7\u9898\u89e3\u5e86\u795d\u4e00\u4e0b\u3002\n\n--------------------------------------------------------\n\n\u8fd9\u9053\u9898\u672c\u8d28\u662f\u9053\u6a21\u62df\u9898\uff08\u7b2c\u4e00\u6b21\u770b\u7684\u65f6\u5019\u8fd8\u662f\u9ec4\u9898\uff0c\u73b0\u5728\u5c45\u7136\u84dd\u4e86\uff09\uff0c\u4e3b\u8981\u505a\u6cd5\u5c31\u662f\u904d\u5386\u5b57\u7b26\u4e32\u5e76\u627e\u51fa\u6bcf\u4e00\u9879\u7684\u503c\uff0c\u7136\u540e\u52a0\u8d77\u6765\uff0c\u7528int\u53ef\u4ee5\u8fc760\u5206\uff0clong long\u548cint128\u4e5f\u90fd\u53ea\u80fd\u8fc760\u5206\uff0c\u663e\u7136\u5269\u4e0b40\u5206\u5fc5\u987b\u7528\u9ad8\u7cbe\u4e86\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\n//\u56e0\u4e3a\u6211\u592a\u5f31\u4e86\uff0c\u4e0d\u4f1a\u5199\u9ad8\u7cbe\u5ea6\u7c7b\uff0c\u53ea\u4f1a\u7528struct\n//\u800c\u4e14\u5199\u9ad8\u7cbe\u5ea6\u7b97\u6cd5\u7684\u7ecf\u9a8c\u6bd4\u8f83\u5c11\uff0c\u6240\u4ee5\u9ad8\u7cbe\u5199\u7684\u6bd4\u8f83\u4e11\nstruct BigInt\t\n{\n    int ch;\n    int x[300];\n};\ninline void clear(BigInt& x);\t\t//\u521d\u59cb\u5316BigInt\ninline BigInt read();\t\t\t\t//\u8bfb\u5165BigInt\uff08\u597d\u50cf\u8fd9\u9898\u5e76\u6ca1\u6709\u7528\uff09\ninline int Compare(BigInt a, BigInt b);//\u6bd4\u8f83\u51fd\u6570\ninline BigInt Plus(BigInt a, BigInt b);//\u9ad8\u7cbe\u52a0\ninline BigInt Minus(BigInt a, BigInt b);//\u9ad8\u7cbe\u51cf\ninline BigInt Multi(BigInt a, BigInt b);//\u9ad8\u7cbe\u4e58\ninline BigInt Int_to_BigInt(int x);//\u628aint\u8f6c\u6362\u6210BigInt\ninline void clear(BigInt& x)\n{\n    memset(x.x, 0, sizeof(x.x));\n    x.ch = 1;\n}\ninline BigInt read()\n{\n    BigInt x;\n    clear(x);\n    char ch = getchar();\n    while(!isdigit(ch) && ch != '-')\n        ch = getchar();\n    if(ch == '-')\n    {\n        x.ch = -1;\n        ch = getchar();\n    }\n    while(isdigit(ch))\n    {\n        x.x[++x.x[0]] = ch - '0';\n        ch = getchar();\n    }\n    for(int i=1; i<=x.x[0]/2; i++)\n    {\n        swap(x.x[i], x.x[x.x[0]-i+1]);\n    }\n    return x;\n}\ninline BigInt Int_to_BigInt(int x)\n{\n    BigInt c;\n    clear(c);\n    if(x < 0)\n    {\n        c.ch = -1;\n        x = -x;\n    }\n    if(x == 0) c.x[0]++;\n    while(x)\n    {\n        c.x[++c.x[0]] = x % 10;\n        x /= 10;\n    }\n    return c;\n}\ninline int Compare(BigInt a, BigInt b)\n{\n    if(a.x[0] > b.x[0]) return 1;\n    if(a.x[0] < b.x[0]) return -1;\n    for(int i=a.x[0]; i; i--)\n    {\n        if(a.x[i] > b.x[i]) return 1;\n        if(a.x[i] < b.x[i]) return -1;\n    }\n    return 0;\n}\ninline BigInt Plus(BigInt a, BigInt b)\n{\n    BigInt c;\n    clear(c);\n    if(a.ch == 1 && b.ch == -1)\n    {\n        b.ch = 1;\n        return Minus(a, b);\n    }\n    if(a.ch == -1 && b.ch == 1)\n    {\n        a.ch = 1;\n        return Minus(b, a);\n    }\n    if(a.ch == -1 && b.ch == -1)\n    {\n        c.ch = -1;\n    }\n    int k = a.x[0] > b.x[0] ? a.x[0] : b.x[0], g = 0;\n    for(int i=1; i<=k; i++)\n    {\n        c.x[i] = a.x[i] + b.x[i] + g;\n        g = c.x[i] / 10;\n        c.x[i] %= 10;\n    }\n    if(g) c.x[++k] = g;\n    c.x[0] = k;\n    return c;\n}\ninline BigInt Minus(BigInt a, BigInt b)\n{\n    BigInt c;\n    clear(c);\n    if(a.ch == -1 && b.ch == -1)\n    {\n        a.ch = 1;\n        b.ch = 1;\n        return Minus(b, a);\n    }\n    if(a.ch == -1 && b.ch == 1)\n    {\n        a.ch = 1;\n        c = Plus(a, b);\n        c.ch = -1;\n        return c;\n    }\n    if(a.ch == 1 && b.ch == -1)\n    {\n        b.ch = 1;\n        return Plus(a, b);\n    }\n    int flag = Compare(a, b);\n    if(flag == 0)\n    {\n        c.x[0] = 1;\n        return c;\t\t\n    }\n    if(flag == 1)\n    {\n        int k = a.x[0];\n        for(int i=1; i<=k; i++)\n        {\n            if(a.x[i] < b.x[i])\n            {\n                a.x[i+1]--;\n                a.x[i] += 10;\n            }\n            c.x[i] = a.x[i] - b.x[i];\n        }\n        while(c.x[k] == 0) k--;\n        c.x[0] = k;\n        return c;\n    }\n    else\n    {\n        int k = b.x[0];\n        c.ch = -1;\n        for(int i=1; i<=k; i++)\n        {\n            if(b.x[i] < a.x[i])\n            {\n                b.x[i+1]--;\n                b.x[i] += 10;\n            }\n            c.x[i] = b.x[i] - a.x[i];\n        }\n        while(c.x[k] == 0) k--;\n        c.x[0] = k;\n        return c;\n    }\n}\ninline BigInt Multi(BigInt a, BigInt b)\n{\n    BigInt c;\n    clear(c);\n    c.ch = a.ch * b.ch;\n    int ka = a.x[0], kb = b.x[0], k = ka + kb + 1;\n    for(int i=1; i<=ka; i++)\n    {\n        for(int j=1; j<=kb; j++)\n        {\n            c.x[i+j-1] += a.x[i] * b.x[j];\n            c.x[i+j] += c.x[i+j-1] / 10;\n            c.x[i+j-1] %= 10;\n        }\n    }\n    while(!c.x[k]) k--;\n    c.x[0] = k;\n    return c;\n}\ninline void print(BigInt x)//\u6253\u5370\u9ad8\u7cbe\u5ea6\u6570\n{\n    if(x.x[0] == 0) printf(\"0\");\n    if(x.ch == -1) printf(\"-\");\n    for(int i=1; i<=x.x[0]; i++)\n        printf(\"%d\", x.x[x.x[0]-i+1]);\n}\nconst int maxn = 205;\nint top, len;\nint b[maxn];\nBigInt ansx, ans[maxn], tmp;\nchar a[maxn];\nint main()\n{\n    clear(ansx);\n    ansx.x[0] = 1;\n    scanf(\"%s\", a+1);\n    len = strlen(a+1);\n    for(int i=1; i<=len; i++)\n    {\n        if(i == 1 && (a[i] >= '0' && a[i] <= '9'))\n        {\t//\u5982\u679c\u7b2c\u4e00\u4e2a\u5b57\u7b26\u5c5e\u4e8e\u7b2c\u4e00\u4e2a\u6570\uff0c\u5219\u76f4\u63a5\u5b58\u8d77\u6765\n            int l, r;\n            for(l=1; l<=len; l++)\n            {\n                if(a[l] < '0' || a[l] > '9')\n                {\n                    r = l-1;\n                    break;\n                }\n            }\n            ++top;\n            clear(ans[top]);\n            ans[top] = Plus(ans[top], Int_to_BigInt(a[1] - '0'));\n            for(int j=2; j<=r; j++)\n            {\n            \tclear(tmp);\n            \tans[top] = Multi(ans[top], Int_to_BigInt(10));\n                ans[top] = Plus(ans[top], Int_to_BigInt(a[j]-'0'));\n            }\n            continue;\n        }\n        if(a[i] == '+' || a[i] == '-')\n        {\t//\u9047\u5230'+'\u53f7\u6216'-'\u53f7\u5c31\u5904\u7406\u8fd9\u4e00\u9879\u7684\u503c\n            char character;\n            character = a[i];\n            int m, k, l;\n            BigInt ax, bx, numc;\n            clear(ax);\n            clear(bx);\n            clear(numc);\n            for(int j=i; j<=len; j++)\n            {\t//\u627e\u51fa'+'\u53f7\u6216'-'\u53f7\u7684\u4e2a\u6570\n                if(a[j] != character)\n                {\n                    m = j - 1;\n                    break;\n                } \n                numc = Plus(numc, Int_to_BigInt(1));\n            }\n            if(a[m+1] == '(')\n            {\t//\u5904\u7406\u62ec\u53f7\u5185\u7684\u6570\u7684\u503c\n                for(int j=m+2; j<=len; j++)\n                {\n                    if(a[j] == ')')\n                    {\n                        k = j-1;\n                        break;\n                    }\n                }\n                ax = Plus(ax, Int_to_BigInt(a[m+2] - '0'));\n                for(int j=m+3; j<=k; j++)\n                {\n                \tax = Multi(ax, Int_to_BigInt(10));\n                    ax = Plus(ax, Int_to_BigInt(a[j] - '0'));\n                }\t\t\t\t\n            }\n            else\n            {\n                k = m - 1;\n                ax = Plus(Int_to_BigInt(0), Int_to_BigInt(1));\n \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0//\u5982\u679c\u5e76\u6ca1\u6709\u62ec\u53f7\u5219 ax = 1;\n            }\n            for(int j=k+2; j<=len; j++)\n            {\t//\u5904\u7406\u6b64\u9879\u5269\u4f59\u90e8\u5206\u7684\u503c\n                if(j == len) l = j;\n                if(a[j] < '0' || a[j] > '9')\n                {\n                    l = j-1;\n                    break;\n                }\n            }\n            bx = Plus(bx, Int_to_BigInt(a[k+2] - '0'));\n            for(int j=k+3; j<=l; j++)\n            {\n            \tbx = Multi(bx, Int_to_BigInt(10));\n                bx = Plus(bx, Int_to_BigInt(a[j] - '0'));\n            }\n            ++top;\n            clear(ans[top]);\n            ans[top] = Plus(Int_to_BigInt(0), Int_to_BigInt(1));\n            ans[top] = Multi(ans[top], ax);\n            ans[top] = Multi(ans[top], bx);\n            ans[top] = Multi(ans[top], numc);\n            //\u628a\u7b26\u53f7\u4e2a\u6570\uff0c\u62ec\u53f7\u5185\u7684\u6570\uff0c\u540e\u7684\u6570\u7684\u503c\u4e58\u8d77\u6765\n            i = l;\n            if(character == '-')//\u5982\u679c\u662f'-'\u53f7\u5219\u9879\u53d6\u76f8\u53cd\u6570\n            \tans[top] = Multi(ans[top], Int_to_BigInt(-1));\n        }\n    }\n    for(int i=1; i<=top; i++) //\u628a\u6bcf\u4e00\u9879\u7684\u6570\u52a0\u8d77\u6765\u4f5c\u4e3a\u7b54\u6848\u8f93\u51fa\n    \tansx = Plus(ansx, ans[i]);\n    print(ansx);\n    return 0;\n}\n```",
        "postTime": 1539263352,
        "uid": 70367,
        "name": "Von_Brank",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P1797 \u3010\u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5_NOI\u5bfc\u520a2010\u63d0\u9ad8\uff0805\uff09\u3011"
    },
    {
        "content": "## \u601d\u8def\uff1a\n\n\u83b7\u53d6\u6574\u884c\u7684\u5b57\u7b26\u4e32\uff08\u4e00\u4e2a\u7b97\u5f0f\uff09\uff0c\u518d\u4e00\u4f4d\u4e00\u4f4d\u5904\u7406\uff0c\u79ef\u6512\u52a0\u6cd5\u6216\u51cf\u6cd5\u7684\u6b21\u6570\uff0c\u4e4b\u540e\u4e00\u8d77\u7d2f\u52a0\u3002\n\n### \u5206\u5757\u4ee3\u7801\uff1a\n\n\u9700\u8981\u7528\u5230\u7684\u53d8\u91cf\uff1a\n\n```cpp\nbig pl,su;//\u52a0\u7684\u6b21\u6570\u3002\nbig sum=0;//\u603b\u548c\nbool aos=1;//\u5224\u65ad\u73b0\u5728\u662f\u52a0\u6cd5\u8fd8\u662f\u51cf\u6cd5\uff0c\u7b2c\u4e00\u4f4d\u53ef\u80fd\u6ca1\u6709\u8fd0\u7b97\u7b26\uff0c\u9ed8\u8ba4\u662f\u52a0\u6cd5\u3002\nstringstream ss;//\u5b57\u7b26\u4e32\u6d41\uff0c\u540e\u9762\u5c06\u7528\u5230\u3002\n```\n\n\u9996\u5148\uff0c\u9700\u8981\u83b7\u53d6\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u518d\u5206\u4f4d\u83b7\u53d6\uff1a\n\n```cpp\nint check(int i){//\u5224\u65ad\u5904\u7406\u51fd\u6570\u3002\n\tif(str[i]=='+'){\n\t\treturn 1;\n\t}\n\telse if(str[i]=='-'){\n\t\treturn 2;\n\t}\n\telse if(str[i]=='('){\n\t\treturn 3;\n\t}\n\telse if(str[i]==')'){\n\t\treturn 5;\n\t}\n\telse if(str[i]>='0'&&str[i]<='9'){\n\t\treturn 4;\n\t}\n}\n```\n\n```cpp\nfor(int i=0;i<str.size();i++){\n\tss.clear();\n\tswitch(check(i)){\n\t\t//do sth.\n\t}\n}\n```\n\n\u4e4b\u540e\uff0c\u5206\u522b\u5904\u7406\u5404\u7c7b\u8fd0\u7b97\u7b26\u7684\u60c5\u51b5\uff1a\n\n```cpp\ncase 1:{//\u5982\u679c\u662f\u52a0\u53f7\n\tpl++;\n\taos=1;\n\tbreak;\n}\n```\n\n```cpp\ncase 2:{//\u51cf\u53f7\n\tsu++;\n\taos=0;\n\tbreak;\n}\n```\n\n\u5982\u679c\u662f\u62ec\u53f7\uff0c\u8981\u7a0d\u5fae\u5904\u7406\u4e00\u4e0b\uff0c\u8fd9\u91cc\u7528\u4e86\u5b57\u7b26\u4e32\u6d41\uff0c\u7edf\u8ba1\u62ec\u53f7\u540e\u7684\u6570\u5b57\u4f4d\u6570\uff0c\u518d\u5c06\u8fd9\u4e9b\u6570\u5b57\u7528\u5b57\u7b26\u4e32\u6d41\u6d41\u5165\u6574\u578b\u6570\u5b57\u3002\n\n```cpp\ncase 3:{\n\tint n;\n\tint j=i+1,aaa=0;//aaa\u662f\u8bb0\u5f55\u6570\u5b57\u7684\u4f4d\u6570\u3002\n\twhile(check(j)==4){\n\t\tj++,aaa++;\n\t}\n\tj--;\n\tfor(int p=i+1;p<=j;p++){\n\t\tss<<str[p];\n\t}\n\tss>>n;\n\tss.clear();//\u6e05\u9664\u5b57\u7b26\u4e32\u6d41\u7f13\u5b58\u533a\u3002\n\tif(su!=0){\n\t\tsu=n;\n\t}\n\telse{\n\t\tpl=n;\n\t}\n\ti+=aaa;//\u907f\u514d\u91cd\u590d\u5904\u7406\u6570\u5b57\u3002\n\tbreak;\n}\n```\n\n```cpp\ncase 5{\n\tbreak;//\u53f3\u62ec\u53f7\uff0c\u6267\u884c\u4e86\u4e2a\u5bc2\u5bde\n}\n```\n\n```cpp\ncase 4:{//\u5982\u679c\u662f\u6570\u5b57\uff0c\u4f46\u662f\u6ca1\u6709\u5de6\u62ec\u53f7\uff0c\u90a3\u5c31\u8bf4\u660e\u662f\u52a0\u6216\u51cf\u7684\u6570\u5b57\u3002\n\tint n;\n\tint j=i+1;\n\twhile(check(j)==4){\n\t\tj++;\n\t}\n\tj--;\n\tfor(int p=i;p<=j;p++){\n\t\tss<<str[p];\n\t}\n\tss>>n;\n\tss.clear();\n\tkr(n);//\u9898\u76ee\u6240\u7ed9\u7684\u8fd0\u7b97\u3002\n\tbreak;\n}\n```\n\n\u4e4b\u540e\u662f\u5b8c\u6210\u9898\u610f\u7684\u8ba1\u7b97\uff0c\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4e58\u4e00\u4e0b\u3002\n\n```cpp\nvoid add(int n){//\u52a0\u6cd5\n\tsum+=n*pl;\n\tpl=0;\n}\nvoid sub(int n){//\u51cf\u6cd5\n\tsum-=n*su;\n\tsu=0;\n}\nvoid kr(int n){//\u5947\u602a\u7684\u8fd0\u7b97\n\tif(aos==1){//\u52a0\u6cd5\n\t\tadd(n);\n\t}\n\telse if(aos==0){//\u51cf\u6cd5\n\t\tsub(n);\n\t}\n}\n```\n\n\u4e8e\u662f\u5c06\u4e0a\u9762\u7684\u4ee3\u7801\u4ea4\u4e0a\u53bb\uff0c\u53d1\u73b0\u53ea\u6709 $40pts$ \u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\n\n![image.png](https://i.loli.net/2020/12/27/mlRIL3V1Fry6oQA.png)\n\n~~\u8f6c\u578bpy\u6211\u89c9\u5f97\u662f\u6765\u4e0d\u53ca\u4e86\u3002~~\n\n\u90a3\u5c31\u62ff\u51fa\u79c1\u85cf\u5df2\u4e45\u7684\u9ad8\u7cbe\u6a21\u677f\u5427\u3002\n\n[Link](https://www.luogu.com.cn/paste/0aux9w45)\n\n\u5728\u5c06 `sum,pl,su,n` \u90fd\u6362\u6210\u9ad8\u7cbe\u540e\uff0c\u6709\u4e00\u4e2a\u95ee\u9898\uff1a\u5b57\u7b26\u4e32\u4e0d\u80fd\u6d41\u5165\u9ad8\u7cbe\u3002\n\u6240\u4ee5\uff0c\u53ea\u80fd\u4e00\u4f4d\u4e00\u4f4d\u5904\u7406\u6d41\u5165\u3002\n\n```cpp\nbig n=0;\nint inn;\nfor(int p=i;p<=j;p++){\n\tss<<str[p];\n\tss>>inn;\n\tss.clear();\n\tn+=inn;\n\tn*=10;\n}\n```\n\u4f46\u662f\u8fd9\u91ccn\u597d\u50cf\u591a\u4e58\u4ee5\u4e00\u4e2a $10$ \uff0c\u6240\u4ee5\u4e4b\u540e\u8bb0\u5f97\u9664\u6389\u3002\n\n\u4f46\u662f\uff0c\u4ea4\u4e0a\u53bb\u540e\uff0c\u4ecd\u7136\u53ea\u6709 $90pts$ \uff0cwhy\uff1f\n\n\u968f\u4fbf\u6d4b\u8bd5\u4e00\u7ec4\u6570\u636e\uff1a\n`-----2+++++3`\n\u53d1\u73b0\u8f93\u51fa\u4e3a `-5` \u3002\n\n\u6240\u4ee5\uff0c\u591a\u4e86\u4e00\u7ec4\u7279\u5224\uff1a\n```cpp\nbool flag=0;\nint check(int i){//\u4fee\u6539\u540e\u7684\u5224\u65ad\u51fd\u6570\n\tif(i==0&&str[i]=='-'){\n\t\tflag=1;\n\t}\n\tif(str[i]=='+'){\n\t\treturn 1;\n\t}\n\telse if(str[i]=='-'){\n\t\treturn 2;\n\t}\n\telse if(str[i]=='('){\n\t\treturn 3;\n\t}\n\telse if(str[i]==')'){\n\t\treturn 5;\n\t}\n\telse if(str[i]>='0'&&str[i]<='9'){\n\t\treturn 4;\n\t}\n}\n\nvoid add(big n){//\u4fee\u6539\u540e\u7684\u52a0\u6cd5\u51fd\u6570\n\tbig summ=0;\n\tsumm+=n*pl;\n\tif(flag==1){\n\t\tif(abs(sum)<abs(summ)&&sum+summ<0){\n\t\t\tsum+=summ;\n\t\t\tsum=abs(sum);\n\t\t\tflag=0;\n\t\t}\n\t\telse sum+=summ;\t\n\t}\n\telse\n\tsum+=summ;\n\tpl=0;\n}\n```\n\u8fd9\u6837\u5c31\u6109\u5feb\u5730AC\u4e86\u3002\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define MAXN 200005\nconst int _N=1e6+7,_B=1e9;\nchar _S[_N];\nll _C[_N*2/9];\nstruct big{\n    vector<int>a;\n    bool f;\n    big(){a.clear(),f=0;}\n    big(const char*s){\n        int i=0,l=strlen(s),j;\n        if(a.clear(),f=0,s[0]=='-')i=f=1;\n        if(s[i]=='0')return;\n        j=(l-i-1)%9+1,a.push_back(0);\n        for(;i<l;(a.back()*=10)+=s[i++]-48,--j)if(!j)a.push_back(0),j=9;\n        reverse(a.begin(),a.end());\n    }\n    big(const string&s){*this=s.c_str();}\n    big(int x){\n        a.clear(),x<0?(x=-x,f=1):(f=0);\n        if(x)x<_B?(a.push_back(x)):(a.push_back(x%_B),a.push_back(x/_B));\n    }\n    big(const ll&x){sprintf(_S,\"%lld\",x),*this=_S;}\n    explicit operator int(){\n        int l=a.size(),i,r=0;\n        for(i=l-1;~i;--i)r=r*_B+a[i];\n        return f?-r:r;\n    }\n    explicit operator ll(){\n        int l=a.size(),i;\n        ll r=0;\n        for(i=l-1;~i;--i)r=r*_B+a[i];\n        return f?-r:r;\n    }\n    explicit operator bool(){return!a.empty();}\n    int abscmp(const big&x)const{\n        int l=a.size(),o=x.a.size();\n        if(l!=o)return l<o?-1:1;\n        while(l--)if(a[l]!=x.a[l])return a[l]<x.a[l]?-1:1;\n        return 0;\n    }\n    int cmp(const big&x)const{\n        if(a.empty())return x.a.empty()?0:(x.f?1:-1);\n        if(x.a.empty())return f?-1:1;\n        if(!f&&x.f)return 1;\n        if(f&&!x.f)return -1;\n        return f?-abscmp(x):abscmp(x);\n    }\n    friend bool operator<(const big&x,const big&y){return x.cmp(y)<0;}\n    friend bool operator>(const big&x,const big&y){return x.cmp(y)>0;}\n    friend bool operator<=(const big&x,const big&y){return x.cmp(y)<=0;}\n    friend bool operator>=(const big&x,const big&y){return x.cmp(y)>=0;}\n    friend bool operator==(const big&x,const big&y){return x.cmp(y)==0;}\n    friend bool operator!=(const big&x,const big&y){return x.cmp(y)!=0;}\n    big&operator+(){return*this;}\n    big operator-(){\n        big x=*this;\n        return x.f^=1,x;\n    }\n    void add1(){\n        if(++a[0]==_B){\n            a.push_back(0);\n            for(int i=0;a[i]==_B;++i)a[i]=0,++a[i+1];\n            if(!a.back())a.pop_back();\n        }\n    }\n    void sub1(){\n        if(--a[0]==-1){\n            for(int i=0;a[i]==-1;++i)a[i]+=_B,--a[i+1];\n            if(!a.back())a.pop_back();\n        }\n    }\n    big&operator++(){return a.empty()?(a.push_back(1),f=0,void()):(f?sub1():add1()),*this;}\n    big&operator--(){return a.empty()?(a.push_back(1),f=1,void()):(f?add1():sub1()),*this;}\n    big operator++(int){\n        big x=*this;\n        return a.empty()?(a.push_back(1),f=0,void()):(f?sub1():add1()),x;\n    }\n    big operator--(int){\n        big x=*this;\n        return a.empty()?(a.push_back(1),f=1,void()):(f?add1():sub1()),x;\n    }\n    void fit(){while(!a.empty()&&!a.back())a.pop_back();}\n    void add(const big&x){\n        int i,l=a.size(),o=x.a.size(),j;\n        if(l<o)a.resize(o);\n        a.push_back(0);\n        for(i=0;i<o;++i){\n            j=a[i]+x.a[i];\n            if(j>=_B)j-=_B,++a[i+1];\n            a[i]=j;\n        }\n        fit();\n    }\n    void sub(const big&x){\n        int i,l=a.size(),o=x.a.size(),j;\n        for(i=0;i<o;++i){\n            j=a[i]-x.a[i];\n            if(j<0)j+=_B,--a[i+1];\n            a[i]=j;\n        }\n        for(i=o;i<l;++i)if(a[i]<0)a[i]+=_B,--a[i+1];\n        fit();\n    }\n    void mul(const big&x){\n        int i,l=a.size(),o=x.a.size(),j,k;\n        ll w;\n        for(memset(_C,0,(k=l+o)*8),i=0;i<o;++i)for(j=0;j<l;++j)\n        w=x.a[i]*1ll*a[j]+_C[i+j],_C[i+j]=w%_B,_C[i+j+1]+=w/_B;\n        for(a.resize(k),i=0;i<k;++i)a[i]=_C[i];\n        fit();\n    }\n    int div(const int&x){\n        int i,l=a.size();\n        ll w=0;\n        for(i=l-1;~i;--i)w=w*_B+a[i],a[i]=w/x,w-=a[i]*1ll*x;\n        return fit(),w;\n    }\n    big div(const big&x){\n        int i,l=a.size(),o=x.a.size(),j=l-o;\n        ll u,v,w;\n        big r;\n        if(j<0)return r=*this,*this=0,r;\n        for(i=l-1;i>j;--i)r=r*_B+a[i];\n        for(i=j,a.resize(j+1);~i;--i){\n            r=r*_B+a[i],u=0,v=_B-1;\n            while(u<=v){\n                w=u+v>>1;\n                if(x*w<=r)u=w+1;else v=w-1;\n            }\n            a[i]=u-1,r-=x*a[i];\n        }\n        return fit(),r;\n    }\n    big&operator+=(const big&x){\n        if(f==x.f)add(x);\n        else if(abscmp(x)>=0)sub(x);\n        else{\n            big y=x;\n            y.sub(*this),*this=y,f^=1;\n        }\n        return*this;\n    }\n    big&operator-=(const big&x){\n        if(f!=x.f)add(x);\n        else if(abscmp(x)>=0)sub(x);\n        else{\n            big y=x;\n            y.sub(*this),*this=y,f^=1;\n        }\n        return*this;\n    }\n    big&operator*=(const big&x){return mul(x),f=(f==x.f?0:1),*this;}\n    big&operator/=(const int&x){return div(abs(x)),f=(((f&&x<0)||(!f&&x>0))?0:1),*this;}\n    big&operator/=(const big&x){return div(x),f=(f==x.f?0:1),*this;}\n    big&operator/=(const ll&x){return*this/=(big)x;}\n    big&operator%=(const int&x){return*this=f?-div(abs(x)):div(abs(x));}\n    big&operator%=(const big&x){return*this=f?-div(x):div(x);}\n    big&operator%=(const ll&x){return*this%=(big)x;}\n    friend big operator+(big x,const big&y){return x+=y,x;}\n    friend big operator-(big x,const big&y){return x-=y,x;}\n    friend big operator*(big x,const big&y){return x*=y,x;}\n    friend big operator/(big x,const ll&y){return x/=y,x;}\n    friend big operator/(big x,const int&y){return x/=y,x;}\n    friend big operator/(big x,const big&y){return x/=y,x;}\n    friend ll operator%(big x,const ll&y){return x%=y,(ll)x;}\n    friend int operator%(big x,const int&y){return x%=y,(int)x;}\n    friend big operator%(big x,const big&y){return x%=y,x;}\n};\nvoid in(big&x){scanf(\"%s\",_S),x=_S;}\nvoid out(const big&x){\n    int i=x.a.size();\n    if(!i)return putchar('0'),void();\n    if(x.f)putchar('-');\n    for(printf(\"%d\",x.a[--i]);i--;)printf(\"%09d\",x.a[i]);\n}\nvoid out(const big&x,const char&c){out(x),putchar(c);}\nvoid swap(big&x,big&y){swap(x.f,y.f),swap(x.a,y.a);}\nbig abs(big x){return x.f=0,x;}\ninline big pow(big a,int b){\n    big r=1;\n    for(;b;b>>=1){\n        if(b&1)r*=a;\n        if(b)a*=a;\n    }\n    return r;\n}\nbig gcd(big a,big b){\n    big r=1;\n    while(1){\n        if(!a||!b)return(a+b)*r;\n        while(a.a[0]%2==0&&b.a[0]%2==0)r*=2,a/=2,b/=2;\n        while(a.a[0]%2==0)a/=2;\n        while(b.a[0]%2==0)b/=2;\n        if(a<b)swap(a,b);\n        a-=b;\n    }\n}\nbig pl,su;\nbig sum=0;\nbool aos=1;\nbool flag=0;\nvoid add(big n){\n\tbig summ=0;\n\tsumm+=n*pl;\n\tif(flag==1){\n\t\tif(abs(sum)<abs(summ)&&sum+summ<0){\n\t\t\tsum+=summ;\n\t\t\tsum=abs(sum);\n\t\t\tflag=0;\n\t\t}\n\t\telse sum+=summ;\t\n\t}\n\telse\n\tsum+=summ;\n\tpl=0;\n}\nvoid sub(big n){\n\tsum-=n*su;\n\tsu=0;\n}\nvoid kr(big n){\n\tif(aos==1){\n\t\tadd(n);\n\t}\n\telse if(aos==0){\n\t\tsub(n);\n\t}\n}\nstring str;\nint check(int i){\n\tif(i==0&&str[i]=='-'){\n\t\tflag=1;\n\t}\n\tif(str[i]=='+'){\n\t\treturn 1;\n\t}\n\telse if(str[i]=='-'){\n\t\treturn 2;\n\t}\n\telse if(str[i]=='('){\n\t\treturn 3;\n\t}\n\telse if(str[i]==')'){\n\t\treturn 5;\n\t}\n\telse if(str[i]>='0'&&str[i]<='9'){\n\t\treturn 4;\n\t}\n}\nvoid solve1(string str){\n\tstringstream ss;\n    for(int i=0;i<str.size();i++){\n    \tss.clear();\n\t\tswitch(check(i)){\n    \t\tcase 1:{\n    \t\t\tpl++;\n    \t\t\taos=1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 2:{\n\t\t\t\tsu++;\n\t\t\t\taos=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 3:{\n\t\t\t\tbig n=0;\n\t\t\t\tint nn;\n\t\t\t\tint j=i+1,aaa=0;\n\t\t\t\twhile(check(j)==4){\n\t\t\t\t\tj++,aaa++;\n\t\t\t\t}\n\t\t\t\tj--;\n\t\t\t\tfor(int p=i+1;p<=j;p++){\n\t\t\t\t\tss<<str[p];\n\t\t\t\t\tss>>nn;\n\t\t\t\t\tss.clear();\n\t\t\t\t\tn+=nn;\n\t\t\t\t\tn*=10;\n\t\t\t\t}\n\t\t\t\tn/=10; \n\t\t\t\tif(su!=0){\n\t\t\t\t\tsu=n;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tpl=n;\n\t\t\t\t}\n\t\t\t\ti+=aaa;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 5:{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 4:{\n\t\t\t\tbig n=0;\n\t\t\t\tint inn;\n\t\t\t\tint j=i+1;\n\t\t\t\twhile(check(j)==4){\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tj--;\n\t\t\t\tfor(int p=i;p<=j;p++){\n\t\t\t\t\tss<<str[p];\n\t\t\t\t\tss>>inn;\n\t\t\t\t\tss.clear();\n\t\t\t\t\tn+=inn;\n\t\t\t\t\tn*=10;\n\t\t\t\t}\n\t\t\t\tkr(n);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tout(sum/10);\n}\nint main(){\n\tgetline(cin,str);\n\tsolve1(str);\n}\n```",
        "postTime": 1609046147,
        "uid": 352464,
        "name": "JJA_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3P1557"
    },
    {
        "content": "### \u5148\u8bf4\u4e00\u4e0b\u81ea\u5df1\u7684\u7ecf\u5386\uff1a\n- \u9047\u5230\u8fd9\u9053\u9898\u65f6\u662f\u5728\u6253\u6a21\u62df\u8d5b\u65f6\uff0c\u5f53\u65f6\u53ea\u5904\u7406\u4e86\u7b97\u5f0f\uff0c\u6ca1\u6709\u60f3\u5230\u9ad8\u7cbe\u5ea6\uff08\u4e5f\u662f\u65f6\u95f4\u4e0d\u591f\uff09\uff0c\u53ea\u6709\u516d\u5341\u5206\u3002\u6253\u5b8c\u6bd4\u8d5b\uff0c\u78d5\u4e86\u597d\u4e45\u7684\u9ad8\u7cbe\u5ea6\uff0c\u7ec8\u4e8eAC\u4e86\u8fd9\u9053\u9898\u3002\n\n# \u672c\u7bc7\u9898\u89e3\u4e3b\u8981\u63d0\u4f9b\u601d\u8def\n\n- \u6211\u7684\u4ee3\u7801\u662f\u7528\u5b57\u7b26\u4e32\u9ad8\u7cbe\u5ea6\u5199\u7684\uff0c\u5927\u4f6c\u53ef\u4ee5\u7528\u538b\u4f4d\u6216int\u6570\u7ec4\u6765\u5b58\u7684\u65b9\u6cd5\u3002\n\n- \u672c\u9898\u96be\u70b9\u4e3b\u8981\u5728\u8fd0\u7b97\u5f0f\u5904\u7406\u548c\u9ad8\u7cbe\u5ea6 ~~\u7b49\u4e8e\u6ca1\u8bf4~~\n#### \u9996\u5148\u662f\u52a0\u51cf\u6cd5\n- \u5f53\u53ea\u6709\u4e00\u4e2a\u52a0\u6cd5\u6216\u51cf\u6cd5\u662f\u81ea\u7136\u662f\u6309\u6b63\u5e38\u601d\u8def\u53bb\u505a\uff0c\u4f46\u5982\u679c\u6709\u591a\u4e2a\u7b26\u53f7\u65f6\u6211\u4eec\u5c31\u9700\u8981\u7528\u4e00\u4e2a\u53d8\u91cf\u6765\u5b58\u50a8\u7b26\u53f7\u6570\u91cf\uff0c\u8fd8\u9700\u8981\u5b58\u50a8\u662f\u8fde\u7eed\u52a0\u6cd5\u8fd8\u662f\u51cf\u6cd5\u3002\u5904\u7406\u65b9\u6cd5\uff1a\n```cpp\nif(str[i]=='+')\n{\n\tflag=\"1\";\n\tif(i!=0&&str[i-1]=='+')\n\t{\n\t\tt++;\n\t}\n}\nif(str[i]=='-')\n{\n\tflag=\"-1\";\n\tif(i!=0&&str[i-1]=='-')\n\t{\n\t\tt++;\n\t}\n}\n```\n#### \u63a5\u7740\u662f\u4e58\u6cd5\n- \u800c\u9047\u5230\u62ec\u53f7\u65f6\uff0c\u9700\u8981\u628a\u62ec\u53f7\u5185\u7684\u6570\u8bfb\u5165\uff0c\u518d\u628a\u62ec\u53f7\u540e\u9762\u7684\u6570\u4e5f\u8bfb\u5165\uff0c\u76f4\u63a5\u76f8\u4e58\u5373\u53ef\u3002\n\n## \u6700\u91cd\u8981\u7684\u9ad8\u7cbe\u5ea6\n- \u6b63\u5e38\u7684\u5946\u4f6c\u4eec\u5e94\u8be5\u90fd\u4f1a\uff0c\u91cd\u70b9\u662f\u8d1f\u6570\u3002\n\n#### \u52a0\u6cd5\uff1a\n\n- \u5148\u6309\u7edd\u5bf9\u503c\u6309a\u5927 b\u5c0f\u6392\u4e0b\u5e8f\uff1b\n\n- \u5982\u679ca\u8d1fb\u6b63 \u5219\u662f-\uff08a\u7684\u7edd\u5bf9\u503c-b\uff09\uff1b\n\n- \u5982\u679ca\u6b63b\u8d1f \u5219\u662fa-(b\u7684\u7edd\u5bf9\u503c)\uff1b\n\n- \u5982\u679c\u540c\u53f7\uff0c\u5219\u7edd\u5bf9\u503c\u76f8\u52a0\uff0c\u7b26\u53f7\u53d6\u76f8\u540c\u7684\u7b26\u53f7\n\n#### \u51cf\u6cd5\uff1a\n\n- \u4e3b\u8981\u662f\u52a0\u6cd5\uff0c\u51cf\u6cd5\u53ea\u7528\u666e\u901a\u7684\u975e\u8d1f\u578b\u51cf\u6cd5\u5c31\u884c\u4e86\n\n#### \u4e58\u6cd5\uff1a\n\n- \u540c\u53f7\u5f97\u6b63\uff0c\u5f02\u53f7\u5f97\u8d1f\n\n### \u518d\u6b21\u58f0\u660e\u4e00\u4e0b\uff0c\u6b64\u7bc7\u9898\u89e3\u4e3b\u8981\u63d0\u4f9b\u601d\u8def\uff0c\u56e0\u4e3a\u6211\u7684\u4ee3\u7801\u4e0d\u662f\u5f88\u597d\u61c2\u3002\n\n\u6700\u540e\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <cstring>\n#include <cstdio>\nusing namespace std;\nstring str;\nstring dr(long long &i)\n{\n\tstring t=\"\";\n\twhile(str[i]>='0'&&str[i]<='9')\n\t{\n\t\tt+=str[i];\n\t\ti++;\n\t}\n\ti--;\n\treturn t;\n}\nvoid diao(string &a)\n{\n    for(int i=0;i<a.size()/2;i++)\n    {\n        swap(a[i],a[a.size()-i-1]);\n    }\n}\nstring zero(int n)\n{\n    string s=\"\";\n    for(int i=1;i<=n;i++)\n    {\n        s+=\"0\";\n    }\n    return s;\n}\nstring jian(string a,string b) //\u9ad8\u7cbe\u5ea6\u51cf\u6cd5 \n{\n    if(a==b)\n    {\n        return\"0\";\n    }\n    diao(a),diao(b);\n    b+=zero(a.size()-b.size());\n    int x=0;\n    for(int i=0;i<a.size();i++)\n    {\n        int s=(a[i]-'0')-(b[i]-'0')-x;\n        x=0;\n        if(s<0)\n        {\n            x=1;\n            s+=10;\n        }\n        a[i]=(s+'0'); \n    }\n    for(int i=a.size()-1;i>=0;i--)\n    {\n        if(a[i]!='0')\n        {\n            a=a.substr(0,i+1);\n            break;\n        }\n    }\n    diao(a);\n    return a;\n}\nstring jia(string a,string b) //\u9ad8\u7cbe\u5ea6\u52a0\u6cd5 \n{\n\tint www=0,eee=0;\n\tif(a[0]=='-')\n\t{\n\t\twww=1;\n    \ta=a.substr(1,a.size()-1);\n\t}\n\tif(b[0]=='-')\n\t{\n\t\teee=1;\n    \tb=b.substr(1,b.size()-1);\n\t}\n    if(a.size()>b.size()||(a.size()==b.size()&&a>b))\n    {\n    \tswap(www,eee);\n        swap(a,b);\n    }\n    int flag=0;\n    if(www==1&&eee==1) \n    {\n    \tflag=1;\n\t}\n\telse if(eee==1)\n\t{\n    \treturn '-'+jian(b,a);\n\t}\n\telse if(www==1)\n\t{\n\t\treturn jian(b,a); \n\t}\n    diao(a),diao(b);\n    a+=zero(b.size()-a.size()+1);\n    b+=\"0\";\n    int x=0;\n    for(int i=0;i<a.size()-1;i++)\n    {\n        int s=(a[i]-'0')+(b[i]-'0')+x;\n        x=s/10;\n        s%=10;\n        a[i]=(s+'0'); \n    }\n    a[a.size()-1]=(x+'0');\n    if(a[a.size()-1]=='0')\n    {\n        a=a.substr(0,a.size()-1);\n    }\n    if(flag==1) a+='-';\n    diao(a);\n    return a;\n}\nstring cheng(string a,string b) //\u9ad8\u7cbe\u5ea6\u4e58\u6cd5 \n{\n\tint www=0,eee=0;\n\tif(a[0]=='-')\n\t{\n\t\twww=1;\n    \ta=a.substr(1,a.size());\n\t}\n\tif(b[0]=='-')\n\t{\n\t\teee=1;\n    \tb=b.substr(1,b.size());\n\t}\n    int flag=0;\n    if(a.size()>b.size())\n    {\n        swap(a,b);\n    }\n\tif(www+eee==1)\n\t{\n\t\tflag=1;\n\t}\n    diao(a),diao(b);\n    int c[100000]={0};\n    for(int i=0;i<a.size();i++)\n    {\n        for(int j=0;j<b.size();j++)\n        {\n            c[i+j]+=(a[i]-'0')*(b[j]-'0');\n        }\n    }\n    for(int i=0;i<=b.size()*2;i++)\n    {\n        c[i+1]+=c[i]/10;\n        c[i]%=10;\n    }\n    string s=\"\";\n    for(int i=b.size()*2;i>=0;i--)\n    {\n        if(c[i]!=0)\n        {\n            for(int j=0;j<=i;j++)\n            {\n                s+=(c[j]+'0');\n            }\n            break;\n        }\n    }\n    diao(s);\n    if(flag==1)\n    {\n    \tstring t=s;\n    \ts=\"-\";\n    \ts+=t;\n\t}\n    return s;\n}\nstring zh(long long a)\n{\n\tif(a==0) return \"0\";\n\tstring s=\"\";\n\twhile(a!=0)\n\t{\n\t\tstring t=s;\n\t\ts=(a%10+'0');\n\t\ts+=t;\n\t\ta/=10;\n\t}\n\treturn s;\n}\nint main()\n{\n\tgetline(cin,str);\n\tint t=0;\n\tstring flag=\"1\",w=\"0\",ans=\"0\";\n\t//  \u6b63\u8d1f  \u6570 \u8fde\u52a0\u51cf \n\tfor(long long i=0;str[i]!='\\0';i++)\n\t{\n\t\tif(str[i]=='+')\n\t\t{\n\t\t\tflag=\"1\";\n\t\t\tif(i!=0&&str[i-1]=='+')\n\t\t\t{\n\t\t\t\tt++;\n\t\t\t}\n\t\t}\n\t\tif(str[i]=='-')\n\t\t{\n\t\t\tflag=\"-1\";\n\t\t\tif(i!=0&&str[i-1]=='-')\n\t\t\t{\n\t\t\t\tt++;\n\t\t\t}\n\t\t}\n\t\tif(str[i]=='(')\n\t\t{\n\t\t\ti++;\n\t\t\tstring x=dr(i);\n\t\t\tw=cheng(x,flag);\n\t\t\ti++;\n\t\t\tcontinue;\n\t\t}\n\t\tif(str[i]==')') continue;\n\t\tif(str[i]>='0'&&str[i]<='9')\n\t\t{\n\t\t\tif(str[i-1]==')')\n\t\t\t{\n\t\t\t\tstring x=dr(i);\n\t\t\t\tans=jia(ans,cheng(w,x));\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tans=jia(ans,cheng(flag,cheng(zh(t+1),dr(i))));\n\t\t\t\tt=0;\n\t\t\t}\n\t\t}\n\t}\n\tif(ans==\"-0\") ans=\"0\";\n\tcout<<ans;\n\treturn 0;\n}\n```",
        "postTime": 1600836998,
        "uid": 218478,
        "name": "\u7f16\u7a0b\u5ba2",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P1797 \u3010\u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5\u3011"
    },
    {
        "content": "\u8fd9\u9898\u5c31TMD\u4e00\u6bd2\u7624\uff0c\u8c03\u4e86\u6211\u6574\u6574\u4e00\u5929QWQ\n\n~~\u7136\u800c\u673a\u623f\u91cc\u7684\u5176\u4ed6dalao\u5c45\u7136\u4e00\u4e2a\u5c0f\u65f6\u5c31\u8fc7\u4e86~~\n\n\u6211\u770b\u4e86\u4e0b\u522b\u4eba\u7684\u4ee3\u7801\uff0c\u5177\u4f53\u6709\u4e24\u79cd\u5199\u6cd5\uff1a\u91cd\u8f7d / \u6a21\u62df\n\n\u5f00\u59cb\u6211\u7528\u7684\u662f\u6a21\u62df\uff0c\u7136\u800c\u53d1\u73b0\u5b83\u6781\u5176\u5bb9\u6613\u5199\u6302\uff0c\u56e0\u6b64\u5728\u6572\u4e86\u4e09\u4e2a\u5c0f\u65f6\u540e\u6211\u653e\n\n\u5f03\u4e86\u6a21\u62df\uff0c\u8f6c\u5411\u5199\u91cd\u8f7d\n\n\u6d41\u7a0b\u5982\u4e0b\uff1a\n\n\u2460\u53d1\u73b0\u8fd0\u7b97\u53ea\u6d89\u53ca\u5230\u201c+\uff0c-\uff0c*\u201d\u4e09\u79cd\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u91cd\u8f7d\u4e09\u4e2a\u8fd0\u7b97\u7b26\n\n\u2461\u6d89\u53ca\u5230\u6b63\u4e0e\u8d1f\u7684\u8f6c\u6362\uff0c\u6211\u4eec\u53ea\u8981\u5728\u91cd\u8f7d\u7684\u8fc7\u7a0b\u4e2d\u5224\u65ad\u4e00\u4e0b\u5373\u53ef\n\n\u2462\u53ef\u4ee5\u5c06\u8f93\u51fa\u4e5f\u8fdb\u884c\u91cd\u8f7d\uff0c\u65b9\u4fbfdebug\n\n\u7136\u800c\u5c31\u8fd9\u6837\u6211\u8fd8\u662f\u8c03\u4e86\u4e00\u6574\u5929\uff0c\u4ee5\u81f3\u4e8e\u8ba9\u6211\u4ee5\u540e\u518d\u4e5f\u4e0d\u60f3\u78b0\u9ad8\u7cbe\u4e86\n\n\u6700\u540e\u53cc\u624b\u6367\u4e0a\u849f\u84bb\u7684\u4ee3\u7801\uff0c\u4ee5\u8868\u793a\u5e86\u795d\u6211\u8fc7\u4e86\u8fd9\u9053\u6bd2\u7624\u9898\n\n## code\n```cpp\n#include<bits/stdc++.h>\n#define R register\n\nusing namespace std;\nchar ch[2005];\nint cnt;\n\nstruct BIG {\n\tint len;\n\tbool flag;\n\tint v[10005];\n\tBIG() { memset(v,0,sizeof(v)),len = 0,flag = 1; }\n\tint& operator [] (int x) { return v[x]; }\n}ans;\n\nBIG operator + (BIG A,BIG B);\nBIG operator - (BIG A,BIG B);\nostream& operator << (ostream &out,const BIG &a);\n\nBIG Fabs(BIG A) {A.flag = false; return A;}\n\nbool operator < (BIG a,BIG b) {\n    if(a.flag && !b.flag) return false;\n   \tif(b.flag && !a.flag) return true;\n   \tif(!a.flag && !b.flag) { a.flag = b.flag = true;return b < a; }\n   \tif(a.len < b.len) return true;\n   \tif(a.len > b.len) return false;\n   \tfor(int i = a.len;i >= 1;-- i) {\n       \tif(a.v[i] < b.v[i]) return true;\n       \tif(a.v[i] > b.v[i]) return false;\n   \t}\n    return false;\n}\n\nBIG operator + (BIG A,BIG B) {\n\tif(!A.flag && !B.flag) {\n\t\tA.flag = B.flag = 1;\n\t\treturn Fabs(A + B);\n\t}\n\tif(!A.flag && B.flag) { A.flag = 1;return B - A; }\n\tif(A.flag && !B.flag) { B.flag = 1;return A - B; }\n\tBIG C;\n\tC.len = max(A.len,B.len);\n\tfor(R int i = 1;i <= C.len;++ i) {\n\t\tC[i] += A[i] + B[i];\n\t\tif(C[i] >= 10) {\n\t\t\tC[i + 1] += C[i] / 10;\n\t\t\tC[i] %= 10;\n\t\t}\n\t}\n\twhile(C[C.len] > 0) ++ C.len;-- C.len;\n\treturn C;\n}\n\nBIG operator - (BIG A,BIG B) {\n\tBIG C;\n\tif(A.flag && !B.flag) { B.flag = true; return A + B; }\n    if(B.flag && !A.flag) { A.flag = true; return Fabs(A + B);}\n    if(!A.flag && !B.flag) { B.flag = true; return A + B;}\n    if(A < B) C.flag = false,swap(A, B);\n    C.len = A.len;\n    for(int i = 1; i <= C.len; ++i) C[i] = A[i];\n    for(int i = 1; i <= B.len; ++i) {\n        C[i] -= B[i];\n        while(C[i] < 0) C[i] += 10,--C[i + 1];\n    }\n    for(int i = 1; i <= C.len; ++i) while(C[i] < 0) C[i] += 10,-- C[i + 1];\n    while(C[C.len] == 0 && C.len) -- C.len;\n    return C;\n}\n\nBIG operator * (BIG A,BIG B) {\n\tBIG C;\n\tC.len = A.len + B.len - 1;\n\tfor(int i = 1; i <= A.len; ++i)\n\t\tfor(int j = 1; j <= B.len; ++j)\n\t\t\tC[i + j - 1] += A[i] * B[j], C[i + j] += C[i + j - 1] / 10, C[i + j - 1] %= 10;\n\twhile(C[C.len + 1]) ++C.len;\n\tC.flag = (A.flag == B.flag);\n\treturn C;\n}\n\ninline BIG read(int &i){\n\tBIG a;\n\twhile(ch[i] > '9' || ch[i] < '0') ++ i;\n\twhile(ch[i] <= '9' && ch[i] >= '0') a[++a.len] = ch[i] ^ 48,++ i;\n\tfor(int j = 1;j <= (a.len >> 1);++ j) swap(a[j],a[a.len - j + 1]);\n\treturn a;\n}\n\nostream& operator << (ostream &out,const BIG &a)\n{\n\tif(!a.len) {\n\t\tcout<<\"0\";\n\t\treturn out;\n\t}\n\tif(!a.flag) cout<<\"-\";\n\tfor(R int i = a.len;i >= 1;-- i) printf(\"%d\",a.v[i]);\n\treturn out;\n}\n\ninline BIG split(int x) {\n\tBIG A;\n\twhile(x) A[++A.len] = x % 10,x /= 10;\n\treturn A;\n}\n\nint main() {\n    scanf(\"%s\",ch + 1); \n    int len = strlen(ch + 1);\n    for(int i = 1; i <= len;) {\n//\t\u5927\u529b\u8ba8\u8bba\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u51b5\n        if(ch[i] == '+' && ch[i + 1] == '(') {\n            BIG k = read(i);    \n            BIG o = read(i);\n            ans = ans + k * o;\n        }\n        \n\tif(ch[i] == '-' && ch[i + 1] == '(') {\n            BIG k = read(i);\n            BIG o = read(i);\n            ans = ans - k * o;\n        }\n        \n\tif(ch[i] == '+' && ch[i + 1] == '+') {\n            cnt = 0;\n            while(ch[i] == '+') ++i, ++cnt;\n            BIG k = split(cnt);\n            BIG o = read(i);\n            ans = ans + k * o;\n        }\n        \n\tif(ch[i] == '-' && ch[i + 1] == '-') {\n            cnt = 0;\n            while(ch[i] == '-') ++i, ++cnt;\n            BIG k = split(cnt);\n            BIG o = read(i);\n            ans = ans - k * o;\n        }\n        \n\tif(ch[i] == '+' && ch[i + 1] >= '0' && ch[i + 1] <= '9') ans = ans + read(i);\n        \n\tif(ch[i] == '-' && ch[i + 1] >= '0' && ch[i + 1] <= '9') ans = ans - read(i);\n//\t\u6ce8\u610f\u5f00\u59cb\u8981\u5148\u628a\u5b83\u52a0\u8fdb\u53bb\n        if(i == 1 && ch[i] >= '0' && ch[i] <= '9') ans = read(i);\n    }\n    cout<<ans;\n    return 0;\n}\n```\n\n\u5b8c\u7ed3\u6492~~\u82b1~~\uff08\u6cea\uff09\n",
        "postTime": 1568677966,
        "uid": 160654,
        "name": "\u707c\u773c\u7684\u590f\u5a1c",
        "ccfLevel": 4,
        "title": "P1797 \u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5_NOI\u5bfc\u520a2010\u63d0\u9ad8\uff0805\uff09"
    },
    {
        "content": "# \u8fd9\u662fC++\u9898\u89e3\n\n\u663e\u7136\uff0c\u8fd9\u9053\u5976\u725b\u9898\u7684\u5b9e\u8d28\u662f\u901a\u8fc7\u9898\u76ee\u8981\u6c42\u7684\u7b97\u5f0f\u5f62\u5f0f\u8bfb\u5165\uff0c\u4ee5\u6b64\u8981\u6211\u4eec\u8ba1\u7b97\u591a\u4e2a\u4e58\u6cd5\u4e58\u79ef\u7684\u548c\u3002\n\n\u7531\u4e8e _\u201c\u4e0d\u4f1a\u51fa\u73b0\u5982\u4e0b\u51e0\u79cd\u5f62\u5f0f\uff1a(1)23+++15-2\u3001+23++(2)15-(1)2\u300123+++15-2+(0)100\u300123-(-3)15-2\u3002\u201d_ \u6240\u4ee5\u5728\u5904\u7406\u65f6\u53ef\u4ee5\u5c31\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba\uff1a\n\n1.\u6ca1\u62ec\u53f7\uff1a\u7edf\u8ba1\u52a0\u53f7\uff08\u6216\u51cf\u53f7\uff09\u4e2a\u6570\uff0c\u548c\u540e\u9762\u7684\u6570\u76f8\u4e58\uff0c\u52a0\uff08\u6216\u51cf\uff09\u5230\u6700\u7ec8\u7684\u7b54\u6848\u4e2d\uff1b\n\n2.\u6709\u62ec\u53f7\uff1a\u628a\u62ec\u53f7\u5185\u7684\u6570\u5f53\u505a\u8fd0\u7b97\u7b26\u7684\u4e2a\u6570\uff0c\u7136\u540e\u548c1\u540c\u6837\u64cd\u4f5c\u3002\n\n\u663e\u7136\uff0c\u6709\u5982\u6b64\u957f\u7684\u7b97\u5f0f\u7684\u6a21\u62df\u9898\uff0c\u6ca1\u6709\u5b57\u7b26\u4e32\u662f\u96be\u4ee5\u64cd\u4f5c\u7684\uff0c\u6240\u4ee5\u76f4\u63a5\u628a\u7b97\u5f0f\u5f53\u505astring\u8bfb\u5165\u662f\u5fc5\u8981\u7684\u3002\n\n\u7531\u6b64\u53ef\u4ee5\u5f97\u51fa\u4ee5\u4e0b\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<string>\n#include<cmath>\nusing namespace std;\nint i;//\u5c3d\u7ba1\u4e0d\u597d\uff0c\u4f46\u7531\u4e8e\u5f88\u591a\u64cd\u4f5c\u8f83\u4e3a\u7e41\u7410\uff0c\u9700\u8981\u5199\u6210\u51fd\u6570,\u800c\u5b57\u7b26\u4e32\u7684\u626b\u63cf\u5927\u5faa\u73af\u662f\u8ba1\u7b97\u7684\u57fa\u7840\uff0c\u4e0d\u653e\u5728\u5916\u9762\u4e0d\u597d\u64cd\u4f5c \nstring s;//\u8bfb\u5165\u7684\u7b97\u5f0f \nvoid get(int &a)//\u5f97\u5230\u88ab\u52a0\uff08\u51cf\uff09\u7684\u6570\uff0c\u9700\u8981\u5e26\u56de\u53bb\n{\n\ta=0;//\u4e0d\u52a0\u4f1a\u56e0\u4e3a\u53e0\u52a0\u95ee\u9898\u800c\u9519\u8bef \n\tfor(;s[i]>='0'&&s[i]<='9';i++)//\u5728\u4e0b\u4e00\u4e2a\u8fd0\u7b97\u524d\u6240\u6709\u7684\u6570\u5b57\u90fd\u662f\u4e00\u4e2a\u6570\uff0c\u524d\u9762\u9ad8\u4f4d\u540e\u9762\u4f4e\u4f4d\uff0c\u5148\u8bfb\u9ad8\u4f4d\uff0c\u4e0d\u65ad*10\uff0c\u628a\u9ad8\u4f4d\u5411\u9ad8\u5904\u632a\uff0c\u7a7a\u51fa\u7684\u9ad8\u4f4d\u7559\u7ed9\u5c0f\u4f4d\n\t\ta*=10,a=a+s[i]-'0';//\u76f4\u63a5\u52a0\u5b57\u7b260\u4f1a\u9519\u5f97\u5f88\u60e8 \n}\nint main(){\n\tint /*\u7b97\u5f0f\u957f\u5ea6*/n,/*\u6700\u7ec8\u7b54\u6848*/ans=0,/*\u7b26\u53f7\u4e2a\u6570*/t=0,/*\u8fd0\u7b97\u6570*/num=0,/*\u7b26\u53f7\uff0c\u5982\u679c\u662f\u51cf\u53f7\u5c31\u5c31\u7b49\u4e8e-1\uff0c\u5982\u679c\u662f\u6b63\u6570\u5c31\u662f1*/nowf;\n\tcin>>s;\n\tn=s.length();\n\tif(s[0]>='0'&&s[0]<='9')s=\"+\"+s;//\u6700\u524d\u9762\u6ca1\u6709\u7b26\u53f7\u5c31\u76f8\u5f53\u4e8e\u4e00\u4e2a\u52a0\u53f7\uff0c\u53ef\u4ee5\u52a0\u4e0a\uff0c\u65b9\u4fbf\u8fd0\u7b97 \n\tfor(i=0;i<n;i++)\n\t{\n\t\tif(s[i]=='+'||s[i]=='-')//\u6570\u524d\u9762\u7684\u8fd0\u7b97\u7b26 \n\t\t{\n\t\t\tt++;\n\t\t\tif(s[i]=='+')nowf=1;\n\t\t\tif(s[i]=='-')nowf=-1;\n\t\t}\n\t\telse//\u5982\u679c\u524d\u9762\u7684\u8fd0\u7b97\u7b26\u6570\u5b8c\u4e86\u53ef\u4ee5\u5206\u60c5\u51b5\u8ba8\u8bba\u4e86 \n\t\t{\n\t\t\tif(s[i]>='0'&&s[i]<='9')//\u540e\u9762\u662f\u8fd0\u7b97\u6570\uff0c\u7b2c\u4e00\u79cd\u60c5\u51b5 \n\t\t\t{\t\n\t\t\t\tget(num);//\u5f97\u5230\u8fd0\u7b97\u6570 \n\t\t\t\ti--;//get\u51fd\u6570\u4f1a\u5230\u7b2c\u4e00\u4e2a\u540e\u9762\u7684\u8fd0\u7b97\u7b26\u65f6\u8fd4\u56de\uff0c\u8981\u51cf\u6389\uff0c\u4e0d\u7136\u540e\u9762\u4f1a\u5c11\u6570\u4e00\u4e2a\u8fd0\u7b97\u7b26 \n\t\t\t\tans+=num*t*nowf;//\u52a0\u5230\u7b54\u6848\u91cc \n\t\t\t\tnum=t=0;//\u5feb\u4e50\u7f6e\u96f6 \n\t\t\t}\n\t\t\tif(s[i]=='(')//\u540e\u9762\u65f6\u62ec\u53f7\uff0c\u7b2c\u4e8c\u79cd\u60c5\u51b5 \n\t\t\t{\n\t\t\t\ti++;//\u4ece\u62ec\u53f7\u540e\u7684\u6570\u5f00\u59cb\u6570 \n\t\t\t\tget(t);\n\t\t\t\ti++;//\u8df3\u8fc7\u53f3\u62ec\u53f7\u624d\u80fd\u641e\u8fd0\u7b97\u6570 \n\t\t\t\tget(num);\n\t\t\t\ti--; \n\t\t\t\tans+=t*num*nowf;\n\t\t\t\tnum=t=0;\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans;//\u8f93\u51fa\u7b54\u6848 \n\treturn 0;\n}\n```\n\n\u5404\u79cd\u6d4b\u8bd5\u6ca1\u6709\u9519\u8bef\u540e\u63d0\u4ea4\uff0c\u53d1\u73b0\u53ea\u670940\u5206\uff0c\u7b2c\u4e8c\u4e2a\u70b9\u9519\u4e86\uff0c\u548c\u540e\u9762\u76845\u4e2a\u70b9\u4e5f\u9519\u4e86\u770b\u5e95\u4e0b\u7684\u8bf4\u660e\u4e0e\u63d0\u793a\uff1a\n\n### \u201c\u7b97\u5f0f\u957f\u5ea6\u4e0d\u8d85\u8fc72000\u201d\n\n\u4ed4\u7ec6\u60f3\u4e00\u60f3\uff0c\u53d1\u73b0\u5982\u679c\u662f\u5c31\u51cf\u4e00\u4e2a1999\u4f4d\u7684\u6570\u90a3\u4e0d\u8981\u9ad8\u7cbe\u5ea6\u4e0d\u6302\u5c31\u602a\u4e86\u800c\u4e14\u53ef\u80fd\u6709\u9ad8\u7cbe\u8d1f\u6570\uff0c\u8fd9\u4f1a\u662f\u4e00\u4e2a\u6d69\u5927\u7684\u5de5\u7a0b\u3002~~\u5bf9\u4e8e\u6211\u8fd9\u6837\u7684\u849f\u84bb\uff0c\u4e0d\u8c03\u4e2a\u5927\u534a\u5e74\u80af\u5b9a\u662f\u51fa\u4e0d\u6765\u7684\uff0c\u800c\u5bf9\u4e8e\u5927\u4f6c\uff0c\u9ad8\u7cbe\uff1f\u4e0d\u662f\u79d2\u79d2\u949f\u5199\u51fa\u6765\u7684\u7b80\u5355\u7b97\u6cd5\u5417\u3002~~\n\n\u9ad8\u7cbe\u7684\u5199\u6cd5\u5728\u6b64\u4e0d\u505a\u8fc7\u591a\u9610\u8ff0\uff0c\u53ea\u662f\u8bf4\u660e\u8981\u7528\u54ea\u4e9b\uff1a\n\n1.\u5e26\u8d1f\u6570\u9ad8\u7cbe\u5ea6\u52a0(\u51cf)\u6cd5:\u6bcf\u6b21\u4e58\u79ef\u52a0\u5165\u7b54\u6848\uff1b\n\n2.\u5e26\u8d1f\u6570\u9ad8\u7cbe\u5ea6\u4e58\u6cd5\uff1a\u8fd0\u7b97\u7b26\u4e2a\u6570\u4e58\u8fd0\u7b97\u6570\uff1b\n\n3.\u9ad8\u7cbe\u5ea6\u52a0\u5355\u7cbe\u5ea6\uff08\u9ad8\u7cbe\u5ea6\u6570\u52a0\u4e00\uff09\uff1a\u4e0a\u65b9\u6240\u8ff0\u7b2c\u4e00\u79cd\u60c5\u51b5\u7684\u8fd0\u7b97\u7b26\u4e2a\u6570\n\n\u4ee5\u4e0b\u662f\u672c\u849f\u84bb\u7684\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<string>\n#include<cmath>\nusing namespace std;\n//\u6211\u662f\u5206\u5272\u7ebf------------------------------------------------------------------------------------------------------------------------------------------------------\nstring s;\nint i;\n//\u4e0d\u89e3\u91ca \n//\u6211\u662f\u5206\u5272\u7ebf------------------------------------------------------------------------------------------------------------------------------------------------------\nvoid add(int a[],int b[])//\u9ad8\u7cbe\u52a0\u6cd5 \n{\n\tint j,jw=0/*\u8fdb\u4f4d*/,c[2001]/*\u7b54\u6848\u6570\u7ec4*/;\n\tfor(j=0;j<=2000;j++)c[j]=0;\n\tc[0]=max(a[0],b[0]);\n\tfor(j=1;j<=c[0];j++)\n\t{\n\t\tc[j]=a[j]+b[j]+jw;\n\t\tjw=c[j]/10;\n\t\tc[j]%=10;\n\t}\n\tif(jw>0)c[++c[0]]=jw;\n\tfor(j=0;j<=c[0];j++)b[j]=c[j];\n}\n//\u6211\u662f\u5206\u5272\u7ebf------------------------------------------------------------------------------------------------------------------------------------------------------\nvoid add1(int a[],int x)//\u9ad8\u7cbe\u52a0\u5355\u7cbe \n{\n    int j,jw=0;\n    a[1]+=x;\n    for(j=1;j<=a[0];j++)\n    {\n        a[j]+=jw;\n        jw=a[j]/10;\n        a[j]%=10;\n    }\n    if(jw>0)a[++a[0]]=jw;\n}\n//\u6211\u662f\u5206\u5272\u7ebf------------------------------------------------------------------------------------------------------------------------------------------------------\nvoid cheng(int a[],int b[],int c[])//\u4e58\u6cd5 \n{\n\tint j,k;\n\tlong long jw=0;\n\tfor(j=0;j<=2000;j++)c[j]=0;\n\tc[0]=a[0]+b[0]-1;\n\tfor(j=1;j<=a[0];j++)\n\t\tfor(k=1;k<=b[0];k++)\n\t\t\tc[j+k-1]+=a[j]*b[k];\n\tfor(j=1;j<=c[0];j++)\n\t{\n\t\tc[j]+=jw;\n\t\tjw=c[j]/10;\n\t\tc[j]%=10;\n\t}\n\tif(jw>0)\n\t\twhile(jw>0)\n\t\t{\n\t\t\tc[++c[0]]=jw%10;\n\t\t\tjw/=10;\n\t\t}\n}\n//\u6211\u662f\u5206\u5272\u7ebf------------------------------------------------------------------------------------------------------------------------------------------------------\nvoid jian(int a[],int b[],int c[])//\u9ad8\u7cbe\u51cf\u6cd5 \n{\n\tint j,jw=0;\n\tfor(j=0;j<=2000;j++)c[j]=0;\t\n\tc[0]=max(a[0],b[0]);\n\tfor(j=1;j<=c[0];j++)\n\t{\n\t\tc[j]=a[j]-b[j]-jw;\n\t\tjw=0;\n\t\tif(c[j]<0){jw=1; c[j]+=10;}\n\t}\n\tfor(j=c[0];j>1&&c[j]==0;j--)c[0]--;\t\n}\n//\u6211\u662f\u5206\u5272\u7ebf------------------------------------------------------------------------------------------------------------------------------------------------------\nvoid get(int a[])//\u4e0d\u89e3\u91ca \n{\n    int j;\n    string number=\"\";\n    char c;\n\t//a=0;\n\tfor(;s[i]>='0'&&s[i]<='9';i++)\n\t{\n\t\tc=s[i];\n\t    number=c+number;\n\t}\n\ta[0]=number.length();\n\tfor(j=1;j<=a[0];j++)a[j]=number[j-1]-'0';\n\t//\ta*=10,a=a+s[i]-'0';\n}\n//\u6211\u662f\u5206\u5272\u7ebf---------------------------------------------------------------------------------------------------------------------------------------------\nbool big(int a[],int b[])//\u4e3a\u4e86\u89e3\u51b3\u8d1f\u6570\u548c\u6b63\u6570\u52a0\u51cf\u540e\u662f\u6b63\u662f\u8d1f\u7684\u95ee\u9898 \n{\n\tint j;\n\tif(a[0]!=b[0])\n\t\tif(a[0]>b[0])return true;\n\t\t\telse return false;\n\tfor(j=a[0];j>=1;j--)\n\t{\n\t\tif(a[j]>b[j])return true;\n\t\tif(a[j]<b[j])return false;\n\t}\n\treturn true;\n}\n//\u6211\u662f\u5206\u5272\u7ebf------------------------------------------------------------------------------------------------------------------------------------------------------\nint main(){\n//\tint n,ans=0,t=0,num=0,nowf;\n    int n,nowf,zheng[2001],fu[2001],t[2001],num[2001],ans[2001],j,tt[2001];\n    for(i=1;i<=2000;i++)num[i]=ans[i]=zheng[i]=fu[i]=t[i]=0;\n    tt[0]=num[0]=ans[0]=zheng[0]=fu[0]=t[0]=1;\n    tt[1]=num[1]=ans[1]=zheng[1]=fu[1]=t[1]=0;\n\tcin>>s;\n\tif(s[0]>='0'&&s[0]<='9')s=\"+\"+s;\n\tn=s.length();\n\tfor(i=0;i<n;i++)\n\t{\n\t\tif(s[i]=='+'||s[i]=='-')\n\t\t{\n\t\t\tadd1(t,1);\n\t\t\tif(s[i]=='+')nowf=1;\n\t\t\tif(s[i]=='-')nowf=-1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(s[i]>='0'&&s[i]<='9')\n\t\t\t{\t\n\t\t\t\tget(num);\n\t\t\t\ti--;\n\t\t\t\tcheng(t,num,tt);//\tans+=num*t*nowf;\n\t\t\t\tif(nowf==-1)add(tt,fu);\n\t\t\t\tif(nowf==1)add(tt,zheng);\n\t\t\t\tfor(j=1;j<=2000;j++)\n\t\t\t\t\ttt[j]=t[j]=num[j]=0;\n\t\t\t\ttt[0]=t[0]=num[0]=1;//\tt=0; num=0;\n\t\t\t}\n\t\t\tif(s[i]=='(')\n\t\t\t{\n\t\t\t\ti++;\n\t\t\t\tget(t);\n\t\t\t\ti++;\n\t\t\t\tget(num);\n\t\t\t\ti--;\n\t\t\t\tcheng(t,num,tt);\n\t\t\t\t//\tans+=t*num*nowf;\n\t\t\t\tif(nowf==-1)add(tt,fu);\n\t\t\t\tif(nowf==1)add(tt,zheng);\n\t\t\t\tfor(j=1;j<=2000;j++)\n\t\t\t\t\ttt[j]=t[j]=num[j]=0;\n\t\t\t\ttt[0]=t[0]=num[0]=1;//\tt=0; num=0;\n\t\t\t}\n\t\t}\n\t}\n\tif(big(zheng,fu))jian(zheng,fu,ans);\n\telse\n\t{\n\t\tcout<<'-';\n\t\tjian(fu,zheng,ans);\n\t}\n\tfor(i=ans[0];i>=1;i--)cout<<ans[i];\n//\tcout<<ans;\n\treturn 0;\n}\n```\n### \u4ee5\u4e0a\u4fbf\u662f\u672c\u849f\u84bb\u7684\u9898\u89e3\u7684\u5168\u90e8\uff0c\u8bf7\u4e0d\u8981\u590d\u5236\u4ee3\u7801\uff0c\u591a\u6253\u8fd9\u7c7b\u957f\u7684\u6a21\u62df\u9898\u53ef\u4ee5\u63d0\u9ad8\u4efb\u4f55\u4eba\u7684\u4ee3\u7801\u80fd\u529b\u3002",
        "postTime": 1566012782,
        "uid": 20183,
        "name": "\u5feb\u4e50\u8bf4\u8bdd",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5f53\u7136\u662f\u4e00\u9053\u6a21\u62df\u9898\uff0c\u867d\u7136\u538b\u4e86\u70b9\u884c\uff0c\u4f46\u6211\u76f8\u4fe1\u6211\u5199\u7684\u7a0b\u5e8f\u53ef\u8bfb\u6027\u8fd8\u662f\u6bd4\u8f83\u9ad8\u7684\uff08\u6bd5\u7adf\u8fd8\u7528\u4e86100\u591a\u884c\uff09\uff0c\u6548\u7387\u65b9\u9762\u53ef\u80fd\u6709\u70b9\u4f4e\uff0c\u4f46\u4e0d\u5f71\u54cdAC\u3002\u91cd\u70b9\u5728\u9ad8\u7cbe\u5ea6\uff08\u5efa\u8baeLuogu\u52a0\u4e00\u9053\u9ad8\u7cbe\u5ea6\u6a21\u677f\u9898\uff09\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\nusing namespace std;\nconst int L=2003;\nconst int S=1e6+6;\n\nchar s[L];\nstruct bgint{\t\t\t\t\t\t\t//\u5e26\u7b26\u53f7\u5927\u6574\u6570\n\tint l,a[S],p;\n\tvoid clr(){  \t\t\t\t\t\t//clear\n\t\tmemset(a,0,sizeof(a));l=0;p=1;\n\t}\n\tvoid plus(int &_l,int _a[]){ \t\t//\u4e24\u6570\u7edd\u5bf9\u503c\u76f8\u52a0\n\t\tint i;l=max(l,_l);\n\t\tfor(i=1;i<=l;i++)a[i]+=_a[i];\n\t\tfor(i=1;i<=l;i++)if(a[i]>9){a[i]-=10;a[i+1]+=1;}\n\t\tif(a[l+1])++l;\n\t}\n\tvoid minus(int &_l,int _a[]){\t\t//\u4e24\u6570\u7edd\u5bf9\u503c\u76f8\u51cf\n\t\tint _p=1,i;\n\t\tif(l<_l)_p=-1;   \t\t\t\t//\u53ef\u80fd\u51cf\u5b8c\u8981\u53d8\u53f7\uff0c\u8fd9\u91cc\u63d0\u524d\u53d8\u6389\uff0c\u514d\u5f97\u4e00\u4f1a\u8fdb\u4f4d\u9ebb\u70e6\n\t\tif(l==_l)\n\t\t\tfor(i=l;i>=1&&_p==1&&a[i]<=_a[i];i--)\n\t\t\t\tif(a[i]<_a[i])_p=-1;\n\t\tp*=_p;l=max(l,_l);\n\t\tfor(i=1;i<=l;i++)\n\t\t\ta[i]=_p*(a[i]-_a[i]);\n\t\tfor(i=1;i<=l;i++)if(a[i]<0){a[i]+=10;a[i+1]-=1;}\n\t\twhile(l&&!a[l])--l;\n\t}\n\tvoid operator+=(bgint x){   \t\t//\u5e26\u7b26\u53f7\u5927\u6574\u6570\u76f8\u52a0\n\t\tif(p*x.p==1)plus(x.l,x.a);  \t//\u540c\u53f7\n\t\telse minus(x.l,x.a);\t\t\t//\u5f02\u53f7\n\t}\n\tvoid operator*=(bgint x){   \t\t//\u5e26\u7b26\u53f7\u5927\u6574\u6570\u76f8\u52a0\n\t\tp*=x.p;\n\t\tint i,j,t;\n\t\tfor(i=l;i>=1;i--){  \t\t\t//\u6b64\u5904\u6ca1\u6709\u53e6\u5f00\u53d8\u91cf\uff0c\u800c\u662f\u76f4\u63a5\u66f4\u65b0\u539f\u6570\u7ec4\u7684\u503c\n\t\t\tt=a[i];a[i]=0;\n\t\t\tfor(j=1;j<=x.l;j++)\n\t\t\t\ta[i+j-1]+=t*x.a[j];\n\t\t}\n\t\tl+=x.l-1;\n\t\tfor(i=1;i<=l;i++){\n\t\t\ta[i+1]+=a[i]/10;\n\t\t\ta[i]%=10;\n\t\t}\n\t\twhile(a[l+1]){\n\t\t\t++l;a[l+1]=a[l]/10;a[l]%=10;\n\t\t}\n\t}\n\tvoid multi(int x){  \t\t\t\t//\u4e58\u4e00\u4e2aint\n\t\tint i;\n\t\tfor(i=1;i<=l;i++)a[i]*=x;\n\t\tfor(i=1;i<=l;i++){\n\t\t\ta[i+1]+=a[i]/10;\n\t\t\ta[i]%=10;\n\t\t}\n\t\twhile(a[l+1]){\n\t\t\t++l;a[l+1]=a[l]/10;a[l]%=10;\n\t\t}\n\t}\n\tvoid init(int &x,int o){\t\t\t//\u4ece\u5b57\u7b26\u4e32\u4e2d\u8bfb\u5165\n\t    clr();p=o;  \t\t\t\t\t//\u7b26\u53f7\u7531\u8c03\u7528\u8005\u7ed9\u51fa\n\t\twhile('0'<=s[x]&&s[x]<='9'){a[++l]=s[x]-'0';++x;}\n\t\tfor(int i=1;2*i<=l;i++)swap(a[i],a[l+1-i]);\n        \t\t\t\t\t\t\t\t//\u6ce8\u610f\uff0c\u6309\u987a\u5e8f\u8bfb\u7684\u662f\u53cd\u7684\n\t}\n\tvoid prnt(){\t\t\t\t\t\t//\u8f93\u51fa\n\t\tif(l==0)printf(\"0\");\n\t\telse if(p==-1)printf(\"-\");\n\t\tfor(int i=l;i>=1;i--)printf(\"%d\",a[i]);printf(\"\\n\");\n\t}\n}ans,t,n;\nint m;\n\nint main()\n{\n\tscanf(\"%s\",s);\n\tint i=0,l=strlen(s);\n\tans.clr();\n\tif(s[0]!='+'&&s[0]!='-')\n\t\tans.init(i,1);\n\twhile(i<l){\n\t\tif(s[i]=='+'){\n\t\t\t++i;\n\t\t\tif(s[i]=='('){\t\t\t\t//\u8fdb\u884c\u7b2c\u4e8c\u6b21\u6539\u8fdb\n\t\t\t\t++i;n.init(i,1);++i;\n\t\t\t\tt.init(i,1);t*=n;ans+=t;\n\t\t\t}\n\t\t\telse{\t\t\t\t\t\t//\u6ca1\u6709\u8fdb\u884c\u7b2c\u4e8c\u6b21\u6539\u8fdb\n\t\t\t\tm=1;while(s[i]=='+'){++m;++i;}\n\t\t\t    t.init(i,1);t.multi(m);ans+=t;\n\t\t\t}\n\t\t}\n\t\telse{\t\t\t\t\t\t\t//\u540c\u4e0a\n\t\t\t++i;\n\t\t\tif(s[i]=='('){\n\t\t\t\t++i;n.init(i,1);++i;\n\t\t\t    t.init(i,-1);t*=n;ans+=t;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tm=1;while(s[i]=='-'){++m;++i;}\n\t\t\t\tt.init(i,-1);t.multi(m);ans+=t;\n\t\t\t}\n\t\t}\n\t}\n\tans.prnt();\n\treturn 0;\n}\n```",
        "postTime": 1546761268,
        "uid": 41425,
        "name": "wanghaoyu1008",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011"
    },
    {
        "content": "\u3010\u5206\u6790\u3011\n\n\u5148\u5486\u54ee\u2026\u2026\uff01\uff01\uff01\n\n\u7b2c\u4e00\u6b21\u5199\u8fd9\u4e48BT\u7684\u9ad8\u7cbe~(BT\u5f53\u7136\u662f\u76f8\u5bf9\u6211\u800c\u8a00\u3001)\n\n\u53ef\u4ee5\u5148\u628a\u7b97\u5f0f\u5206\u6210\u51e0\u4e2a\u53ef\u4ee5\u7b97\u51fa\u4e00\u4e2a\u503c\u7684\u8868\u8fbe\u5f0f\uff08devide\u8fc7\u7a0b\uff09\n\n\u7136\u540e\u6839\u636e\u6709\u65e0\u62ec\u53f7\u5206\u6210\u4e24\u7c7b\u5904\u7406\uff0c\u6709\u62ec\u53f7\u7684\u53ef\u80fd\u4e3a\u9ad8\u7cbe\u4e58\u6cd5\u3002\u65e0\u62ec\u53f7\u7684\u5c31\u4e0d\u7528\u5566\n\n\u7279\u522b\u5c0f\u5fc3ans\u7684\u6b63\u8d1f\u4e0eshu\u7684\u6b63\u8d1f\uff0c\u8fd9\u91cc\u67094\u79cd\u60c5\u51b5\uff0c\u5206\u522b\u5957\u7528\u9ad8\u7cbe\u52a0\u51cf\uff0c\u7b26\u53f7\u5355\u72ec\u5904\u7406\u3002\n\n\u3010\u6ce8\u610f\u3011\n\n\u8bfb\u5165\u7684\u5b57\u7b26\u4e32\u53ef\u80fd\u4e3a0\uff0c\u8bfb\u8fdb\u6765\u540e\u8981\u5148\u5224\u65ad\u5176\u771f\u5b9e\u4f4d\u6570\u3002\n\n\u6bcf\u4e00\u6b21\u9ad8\u7cbe\u51cf\u540e\u4e5f\u8981\u7528while\u5224\u65ad\u771f\u5b9e\u4f4d\u6570\u3002\n\n\u5f00\u5934\u53ef\u4ee5\u6ca1\u6709\u7b26\u53f7\uff0c\u8981\u7279\u6b8a\u5904\u7406\u3002\u6ca1\u62ec\u53f7\u7684\u60c5\u51b5\u4e0b\uff0c\u4f9d\u9760\u7edf\u8ba1\u7b26\u53f7\u4e2a\u6570\u786e\u5b9a\u4e58\u6570\uff0c\u8981\u7279\u522b\u5c0f\u5fc3\u3002\n\n\u6ce8\u610f\u521d\u59cb\u5316\uff01\uff01\n\n\u7136\u540e\u51e0\u4e2a\u9ad8\u7cbe\u4ee3\u7801\u8981\u6e05\u6670- -\n",
        "postTime": 1382768894,
        "uid": 1443,
        "name": "21002tyj",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1797 \u3010\u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5_NOI\u5bfc\u520a2010\u63d0\u9ad8\uff0805\uff09\u3011"
    },
    {
        "content": "~~\u786c\u6838\u5e26\u8d1f\u6570\u9ad8\u7cbe\u5ea6\u4e86\u89e3\u4e00\u4e0b~~~~\n\n\u6211\u4e0d\u4f1a $\\text{python}$\uff0c\u6240\u4ee5\u7528\u4e86\u9ad8\u7cbe\u5ea6\u3002\n\n\u8fd9\u9053\u9898\u5bf9\u5b57\u7b26\u4e32\u7684\u5904\u7406\u5f88\u7b80\u5355\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6570\u8fde\u7740\u5b83\u7684\u7b26\u53f7\u548c\u4e2a\u6570\u5206\u5728\u4e00\u6bb5\uff0c\u628a\u6bcf\u6bb5\u7684\u8d21\u732e\u52a0\u8d77\u6765\u5c31\u597d\u4e86\u3002\n\n\u64cd\u4f5c\u5927\u81f4\u5206\u4e3a\u4ee5\u4e0b\u4e09\u79cd\uff1a\n\n1. \u5f53 $s_i$ \u662f\u52a0\u53f7\u6216\u51cf\u53f7\u65f6\uff1a\u6b64\u65f6\u6211\u4eec\u8981\u5148\u628a\u4e0a\u4e00\u4e2a\u6570\u7684\u8d21\u732e\u52a0\u5165\u7b54\u6848\uff0c\u518d\u5904\u7406\u65b0\u6570\u3002\u5728\u8fd9\u65f6\uff0c\u540e\u9762\u53ea\u53ef\u80fd\u8ddf\u7740\u4e00\u4e2a\u62ec\u53f7\u91cc\u52a0\u4e00\u4e2a\u6570\uff0c\u6216\u4e00\u4e32 \u201c+\u201d \u6216 \u201c - \u201d\u3002\u5bf9\u4e8e\u62ec\u53f7\u7684\u5f62\u5f0f\u5230\u4e0b\u4e00\u7c7b\uff0c\u8fd9\u91cc\u5982\u679c\u6709\u8fde\u7eed\u7684\u7b26\u53f7\uff0c\u5c31\u7d2f\u52a0\u5f53\u524d\u6570\u7684\u4e2a\u6570\u5c31\u884c\u4e86\u3002\n2. \u5f53 $s_i$ \u662f\u5de6\u62ec\u53f7\u65f6\uff1a\u8fd9\u65f6\uff0c\u62ec\u53f7\u91cc\u7684\u6570\u5c31\u662f\u5f53\u524d\u6570\u7684\u4e2a\u6570\uff0c\u6240\u4ee5\u8bb0\u4e0b\u6765\u5c31\u884c\u4e86\u3002\n3. \u5f53 $s_i$ \u662f\u6570\u5b57\u65f6\uff1a\u8fd9\u4e2a\u6570\u4e00\u5b9a\u662f\u8fd9\u4e00\u6bb5\u4e2d\u7684\u539f\u6570\uff08\u56e0\u4e3a\u5982\u679c\u662f\u4e2a\u6570\u5c31\u4f1a\u5728\u5de6\u62ec\u53f7\u90a3\u91cc\u5904\u7406\uff09\uff0c\u76f4\u63a5\u5b58\u8fdb\u539f\u6570\u91cc\u5c31\u884c\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\ncnt = node();\ncnt.a[1] = 1;\nfor (int i = 1;i <= len;i ++ ) {\n\tif (s[i] == '+' || s[i] == '-') {\n\t\tif (i > 1) {//\u7edf\u8ba1\u4e0a\u4e00\u4e2a\u6570\u7684\u8d21\u732e\n\t\t\tnode cc = mul2(num,cnt);\n\t\t\tif (zf == 1) ans = add(ans,cc);\n\t\t\telse ans = del(ans,cc);\n\t\t}\n\t\tzf = (s[i] == '+' ? 1 : -1);\n\t\tcnt = node();\n\t\tcnt.a[1] = 1;\n\t\twhile (s[i+1] == '+' || s[i+1] == '-') cnt = add2(cnt,1), i ++;//\"++...\"\u7684\u60c5\u51b5\n\t}\n\telse if (s[i] == '(') {\n\t\ti ++;\n\t\tcnt = node();\n\t\twhile (s[i] >= '0' && s[i] <= '9') cnt = mul(cnt,10), cnt = add2(cnt,s[i]-'0'), i ++;//\u9ad8\u7cbe\u64cd\u4f5c\uff0c\u611f\u6027\u7406\u89e3\uff0c\u5c31\u662f\u628a\u6570\u5b57\u5b58\u8d77\u6765\n\t}\n\telse if (s[i] >= '0' && s[i] <= '9') {\n\t\tnum = node();\n\t\tnum.a[1] = s[i]-'0';\n\t\twhile (s[i+1] >= '0' && s[i+1] <= '9') num = mul(num,10), num = add2(num,s[i+1]-'0'),i ++;\n\t}\n}\nnode cc = mul2(num,cnt);//\u6700\u540e\u4e00\u4e2a\u6570\u4e5f\u8981\u7b97\u4e0a\nif (zf == 1) ans = add(ans,cc);\nelse ans = del(ans,cc);\n```\n\n\u7136\u540e\u5c31\u662f\u9ad8\u7cbe\u5ea6\u4e86\u3002\u7531\u4e8e\u6211\u6ca1\u6709\u60f3\u5230\u5206\u522b\u5b58\u52a0\u548c\u51cf\u8fd9\u79cd\u65b9\u4fbf\u3001\u5de7\u5999\u7684\u65b9\u6cd5\uff0c\u5c31\u786c\u5199\u7684\u4e00\u4e2a\u5e26\u8d1f\u6570\u7684\u9ad8\u7cbe\uff08\u8c03\u4e86\u4e00\u4e2d\u5348\uff09\u3002\u5177\u4f53\u7ec6\u8282\u770b\u6ce8\u91ca\uff1a\n\n```cpp\nstruct node {//\u5199\u6210\u7ed3\u6784\u4f53\u66f4\u65b9\u4fbf \n\tint a[2010],zf;//\u6b63\u8d1ftag \n\tnode(){memset(a,0,sizeof a);a[0] = zf = 1;}\n\tvoid print() {\n\t\tif (zf < 0) putchar('-');\n\t\tfor (int i = a[0];i;i -- ) printf(\"%d\",a[i]);\n\t\tputs(\"\");\n\t}\n\tfriend bool operator < (node &x,node &y) {//\u6bd4\u8f83\uff08\u6ce8\u610f\u6b63\u8d1f\u7684\u5f71\u54cd\uff09 \n\t\tif (x.zf < 0 && y.zf > 0) return 1;\n\t\tif (x.zf > 0 && y.zf < 0) return 0;\n\t\tint t = x.zf < 0;\n\t\tif (x.a[0] > y.a[0]) return t;\n\t\tif (x.a[0] < y.a[0]) return !t;\n\t\tfor (int i = x.a[0];i;i -- ) {\n\t\t\tif (x.a[i] > y.a[i]) return t;\n\t\t\tif (x.a[i] < y.a[i]) return !t;\n\t\t}\n\t\treturn 1;\n\t}\n}ans;\nnode del(node a,node b);\nnode add(node a,node b) {//\u9ad8\u7cbe\u52a0\u9ad8\u7cbe\uff0c\u8fd9\u91ccb\u80af\u5b9a\u662f\u6b63\u6570 \n\tnode c;\n\tif (a.zf < 0) {//a\u4e0d\u662f\u6b63\u6570\uff0c\u90a3\u4e48a\u7684\u7edd\u5bf9\u503c\u5927\u4e8eb\u7684\u8bdd\u662f\u8d1f\u6570\uff0c\u5426\u5219\u662f\u6b63\u6570 \n\t\ta.zf = 1;//\u7edd\u5bf9\u503c \n\t\tif (a < b) {\n\t\t\tc = del(b,a), c.zf = 1;\n\t\t\treturn c;\n\t\t}\n\t\telse {\n\t\t\tc = del(a,b), c.zf = -1;\n\t\t\treturn c;\n\t\t}\n\t}\n\tc.a[0] = max(a.a[0],b.a[0]);//\u5e38\u89c4\u9ad8\u7cbe \n\tfor (int i = 1;i <= c.a[0];i ++ ) {\n\t\tc.a[i] += a.a[i] + b.a[i];\n\t\tif (c.a[i] >= 10) c.a[i+1] ++, c.a[i] -= 10;\n\t}\n\twhile (c.a[c.a[0]+1]) c.a[0] ++;\n\treturn c;\n}\nnode add2(node a,int b) {//\u9ad8\u7cbe+\u4f4e\u7cbe\uff0c\u6ca1\u5565\u597d\u8bf4 \n\tnode c = a;\n\tc.a[1] += b;\n\tfor (int i = 1;i <= c.a[0];i ++ ) {\n\t\tif (c.a[i] >= 10) c.a[i+1] ++, c.a[i] -= 10;\n\t}\n\twhile (c.a[c.a[0]+1]) c.a[0] ++;\n\treturn c;\n}\nnode mul(node a,int b) {//\u9ad8\u7cbe\u4e58\u4f4e\u7cbe\uff0c\u4e5f\u6ca1\u5565\u597d\u8bf4 \n\tnode c;\n\tc.a[0] = a.a[0];\n\tfor (int i = 1;i <= c.a[0];i ++ ) {\n\t\tc.a[i] += a.a[i] * b;\n\t\tif (c.a[i] >= 10) c.a[i+1] += c.a[i]/10, c.a[i] %= 10;\n\t}\n\twhile (c.a[c.a[0]+1]) {\n\t\tif (c.a[c.a[0]+1] >= 10) c.a[c.a[0]+2] += c.a[c.a[0]+1] / 10, c.a[c.a[0]+1] %= 10;\n\t\tc.a[0] ++;\n\t}\n//\tc.print();\n\treturn c;\n}\nnode del(node a,node b) {//\u9ad8\u7cbe-\u9ad8\u7cbe \n\tnode c;\n\tint fl = 1;\n\tif (a < b) {\n\t\tif (a.zf < 0) {//a\u662f\u8d1f\u6570\uff0c\u7ed3\u679c\u5c31\u662f\u7edd\u5bf9\u503c\u4e4b\u548c\u7684\u76f8\u53cd\u6570 \n\t\t\ta.zf = 1;\n\t\t\tc = add(a,b), c.zf = -1;\n\t\t\treturn c;\n\t\t}\n\t\telse swap(a,b), fl = -1;//\u4ea4\u6362\u76f8\u51cf \n\t}\n\tfor (int i = 1;i <= a.a[0];i ++ ) {\n\t\tc.a[i] += a.a[i] - b.a[i];\n\t\tif (c.a[i] < 0) c.a[i+1] --, c.a[i] += 10;\n\t}\n\tc.a[0] = a.a[0], c.zf = fl;//\u66f4\u65b0\u7b26\u53f7 \n\twhile (!c.a[c.a[0]] && c.a[0] > 1) c.a[0] --;\n\tif (c.a[1] == 0 && c.a[0] == 1) c.zf = 1;//\u6ce8\u610f\uff0c\u8fd9\u4e2a\u6570\u4e3a0\u65f6\u662f\u7b97\u6b63\u7684\uff01 \n\treturn c;\n}\nnode mul2(node a,node b) {//\u9ad8\u7cbe\u4e58\u9ad8\u7cbe \n\tnode c;\n\tc.a[0] = a.a[0] + b.a[0] - 1;\n\tfor (int i = 1;i <= a.a[0];i ++ ) {\n\t\tfor (int j = 1;j <= b.a[0];j ++ ) {\n\t\t\tc.a[i+j-1] += a.a[i] * b.a[j];\n\t\t}\n\t}\n\tfor (int i = 1;i <= c.a[0];i ++ ) {\n\t\tif (c.a[i] >= 10) c.a[i+1] += c.a[i] / 10, c.a[i] %= 10;\n\t}\n\twhile (c.a[c.a[0]+1]) {\n\t\tif (c.a[c.a[0]+1] >= 10) c.a[c.a[0]+2] += c.a[c.a[0]+1] / 10, c.a[c.a[0]+1] %= 10;\n\t\tc.a[0] ++;\n\t}\n//\tc.print();\n\treturn c;\n}\n```\n\u8fd9\u4e2a\u9ad8\u7cbe\u53ef\u4ee5\u4f5c\u4e3a\u6a21\u677f\u4f7f\u7528\uff0c\u6548\u7387\u5e94\u8be5\u8fd8\u884c\uff08\u5427\n\n\u7136\u540e\u5c31\u505a\u5b8c\u4e86\uff0c\u662f\u953b\u70bc\u7801\u529b\u548c\u7ec6\u8282\u7684\u597d\u9898\u3002",
        "postTime": 1631615330,
        "uid": 94777,
        "name": "Jsxts_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1557"
    },
    {
        "content": "\u76f8\u6bd4\u67d0\u4e9b\u6a21\u62df\u9898\u771f\u7684\u4e0d\u7b97\u590d\u6742\u3002\u3002\u3002\u4ee3\u7801\u53ea\u6709200\u591a\u884c\u3002\n\n\u9700\u8981\u6ce8\u610f\u8fd9\u4e9b\u5730\u65b9:\n\n\u8bfb\u5165\u5b57\u7b26\u505c\u6b62\u7684\u6761\u4ef6\u662f\u4e00\u4e2a\u4e0d\u5408\u6cd5\u7684\u5b57\u7b26,\u800c\u8fd9\u4e2a\u5b57\u7b26\u53ef\u80fd\u662f\u4e0b\u4e00\u4e2a\u90e8\u5206\u7684\u4e00\u90e8\u5206(\u6709\u70b9\u7ed5)\uff0c\u6240\u4ee5\u4f60\u9700\u8981\u4fdd\u7559\u8fd9\u4e2a\u5b57\u7b26\u3002\n\n\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u662f\u53ef\u80fd\u6709\u8d1f\u6570\u7684\uff0c\u6709\u4e24\u79cd\u5904\u7406\u65b9\u6cd5:\u76f4\u63a5\u5c06\u8d1f\u6570\u8fd0\u7b97\u653e\u5728\u7ed3\u6784\u4f53\u91cc\uff0c\u6216\u8005\u8bb0\u5f55ans\u4ee5\u53ca-ans\uff0c\u5e76\u4e14\u4e3a\u4e86\u9632\u6b62\u4e2d\u9014\u7206\u8d1f\uff0c\u8981\u8c03\u6574\u8fd0\u7b97\u987a\u5e8f\u3002\n\n\u5f88\u660e\u663e\u7b2c\u4e00\u79cd\u66f4\u52a0\u7b80\u4fbf\u3002\n\n\u8003\u8651\u8d1f\u6570\u7684\u8fd0\u7b97\uff0c\u8bbe\u4e24\u4e2a\u8fd0\u7b97\u7684\u53d8\u91cf\u7684**\u7edd\u5bf9\u503c**\u4e3aa\u548cb:\n\n1.\u4e58\u6cd5\uff0c\u975e\u5e38\u7b80\u5355\u4e0d\u7ec6\u8bf4\u3002\n\n2.\u51cf\u6cd5\uff0c\u5206\u4e94\u79cd\u60c5\u51b5,\u6211\u4eec\u628a\u4ed6\u4eec\u90fd\u8f6c\u4e3a\u6ca1\u6709\u8d1f\u53f7\u7684\u52a0\u51cf\u6cd5\u65b9\u4fbf\u8ba1\u7b97:\n\n(-a)-(-b)\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3ab-a\uff1b\n\n(-a)-b\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a-(a+b)\uff0ca+b\u76f4\u63a5\u7b97\uff0c\u7b26\u53f7\u4e3a\u8d1f\uff1b\n\na-(-b)\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3aa+b\u76f4\u63a5\u7b97\uff1b\n\na-b\uff0c\u4e14a>=b\uff0c\u76f4\u63a5\u7b97\uff1b\n\na-b\uff0c\u4e14a<b\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a-(b-a)\u76f4\u63a5\u7b97\uff0c\u7b26\u53f7\u4e3a\u8d1f\u3002\n\n3.\u52a0\u6cd5\uff0c\u5206\u56db\u79cd\u60c5\u51b5\uff1a\n\n(-a)+(-b)\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a-(a+b)\uff1b\n\n(-a)+b\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3ab-a\uff0c\u51cf\u6cd5\u4e4b\u524d\u5df2\u7ecf\u5b9a\u4e49\u4e86\uff1b\n\na+(-b)\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3aa-b\uff0c\u51cf\u6cd5\u4e4b\u524d\u5df2\u7ecf\u5b9a\u4e49\u4e86\uff1b\n\na+b\u76f4\u63a5\u7b97\u3002\n\n\u4e8e\u662f\u5e26\u8d1f\u6570\u7684\u8fd0\u7b97\u5168\u88ab\u8f6c\u5316\u6210\u4e86\u4e00\u4e9b\u975e\u8d1f\u6570\u8fd0\u7b97\u548c\u4e00\u4e9b\u7b26\u53f7\u3002\n\n\u4ee3\u7801:\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct bign{\n\tint n[2010],f;\n}n,m,ans;\nchar op;\nint tot;\nvoid print(bign x){//\u8f93\u51fa \n\tif(x.n[0]==0){\n\t\tputchar('0');\n\t}else{\n\t\tif(x.f==-1){\n\t\t\tputchar('-');\n\t\t}\n\t\tfor(int i=x.n[0];i>=1;i--){\n\t\t\tprintf(\"%d\",x.n[i]);\n\t\t}\n\t}\n}\nvoid clear(bign &x){//\u6e05\u7a7a \n\tmemset(x.n,0,sizeof(x.n));\n}\nbool operator >(bign x,bign y){//\u5927\u4e8e \n\tif(x.f!=y.f){\n\t\treturn x.f>y.f;\n\t}\n\tif(x.n[0]!=y.n[0]){\n\t\treturn x.n[0]>y.n[0];\n\t}\n\tfor(int i=x.n[0];i>=1;i--){\n\t\tif(x.n[i]!=y.n[i]){\n\t\t\treturn x.n[i]>y.n[i];\n\t\t}\n\t}\n\treturn false;\n}\nvoid operator ~(bign &x){//\u8fdb\u4f4d\u6216\u9000\u4f4d \n\tint w=0;\n\tfor(int i=1;i<=x.n[0];i++){//\u9000\u4f4d \n\t\tif(x.n[i]<0){\n\t\t\tx.n[i]+=10;\n\t\t\tx.n[i+1]--;\n\t\t}\n\t}\n\tfor(;x.n[x.n[0]]==0&&x.n[0]>=1;x.n[0]--);\n\tfor(int i=1;i<=x.n[0];i++){//\u8fdb\u4f4d \n\t\tx.n[i]+=w;\n\t\tw=x.n[i]/10;\n\t\tx.n[i]%=10;\n\t\tif(w&&i==x.n[0]){\n\t\t\tx.n[0]++;\n\t\t\tx.n[x.n[0]]=0;\n\t\t}\n\t}\n}\nbign operator *(bign x,int y){//\u4e58\u4e00\u4e2a\u5355\u7cbe\u5ea6\u6574\u6570 \n\tbign tmp=x;\n\tif(y<0){\n\t\ty=-y;\n\t\ttmp.f=-tmp.f;\n\t}\n\tfor(int i=1;i<=x.n[0];i++){\n\t\ttmp.n[i]*=y;\n\t}\n\t~tmp;\n\treturn tmp;\n}\nbign operator *(bign x,bign y){//\u9ad8\u7cbe\u5ea6\u4e58\u6cd5 \n\tbign tmp;\n\tclear(tmp);\n\tif(x.f!=y.f){\n\t\ttmp.f=-1;\n\t}else{\n\t\ttmp.f=1;\n\t}\n\ttmp.n[0]=x.n[0]+y.n[0]-1;\n\tfor(int i=1;i<=x.n[0];i++){\n\t\tfor(int j=1;j<=y.n[0];j++){\n\t\t\ttmp.n[i+j-1]+=x.n[i]*y.n[j];\n\t\t}\n\t}\n\t~tmp;\n\treturn tmp;\n}\nbign operator -(bign x,bign y){//\u51cf \n\tbign tmp;\n\tclear(tmp);\n\tif(x.f==-1&&y.f==-1){\n\t\tx.f=1;\n\t\ty.f=1;\n\t\ttmp=y-x;\n\t}else if(x.f==-1){\n\t\ttmp.f=-1;\n\t\ttmp.n[0]=max(x.n[0],y.n[0]);\n\t\tfor(int i=1;i<=tmp.n[0];i++){\n\t\t\ttmp.n[i]=x.n[i]+y.n[i];\n\t\t}\n\t\t~tmp;\n\t}else if(y.f==-1){\n\t\ttmp.f=1;\n\t\ttmp.n[0]=max(x.n[0],y.n[0]);\n\t\tfor(int i=1;i<=tmp.n[0];i++){\n\t\t\ttmp.n[i]=x.n[i]+y.n[i];\n\t\t}\n\t\t~tmp;\n\t}else{\n\t\tif(y>x){\n\t\t\ttmp=y-x;\n\t\t\ttmp.f=-1;\n\t\t}else{\n\t\t\ttmp.f=1;\n\t\t\ttmp.n[0]=max(x.n[0],y.n[0]);\n\t\t\tfor(int i=1;i<=tmp.n[0];i++){\n\t\t\t\ttmp.n[i]=x.n[i]-y.n[i];\n\t\t\t}\n\t\t\t~tmp;\n\t\t}\n\t}\n\treturn tmp;\n}\nbign operator +(bign x,bign y){//\u52a0 \n\tbign tmp;\n\tclear(tmp);\n\tif(x.f==-1&&y.f==-1){\n\t\tx.f=1;\n\t\ty.f=1;\n\t\ttmp=x+y;\n\t\ttmp.f=-1;\n\t}else if(x.f==-1){\n\t\tx.f=1;\n\t\ttmp=y-x;\n\t}else if(y.f==-1){\n\t\ty.f=1;\n\t\ttmp=x-y;\n\t}else{\n\t\ttmp.f=1;\n\t\ttmp.n[0]=max(x.n[0],y.n[0]);\n\t\tfor(int i=1;i<=tmp.n[0];i++){\n\t\t\ttmp.n[i]=x.n[i]+y.n[i];\n\t\t}\n\t\t~tmp;\n\t}\n\treturn tmp;\n}\nchar getnum(bign &x,char c){//\u8bfb\u5165\u4e00\u4e2a\u6570\u5b57\u5e76\u8fd4\u56de\u7ec8\u6b62\u6570\u5b57\u8bfb\u5165\u7684\u5b57\u7b26(\u8fd9\u4e2a\u5b57\u7b26\u6709\u53ef\u80fd\u662f+\u6216-) \n\tstring s=\"\";\n\tx.f=1;\n\tif('1'<=c&&c<='9'){\n\t\ts+=c;\n\t}else if(c=='-'){\n\t\tx.f=-1;\n\t}\n\tc=getchar();\n\twhile('0'<=c&&c<='9'){\n\t\ts+=c;\n\t\tc=getchar();\n\t}\n\tx.n[0]=s.size();\n\tfor(int i=1;i<=x.n[0];i++){\n\t\tx.n[i]=s[x.n[0]-i]-'0';\n\t}\n\treturn c;\n}\nint main(){\n\twhile(1){\n\t\tif(!op){//\u5982\u679c\u4e4b\u524d\u6ca1\u6709+-\u5c31\u8bfb\u5165 \n\t\t\top=getchar();\n\t\t}\n\t\tif(op!='-'&&op!='+'){//\u7ed3\u675f \n\t\t\tbreak;\n\t\t}\n\t\tif(op=='+'){\n\t\t\ttot=0;\n\t\t\twhile(op=='+'){\n\t\t\t\ttot++;\n\t\t\t\top=getchar();\n\t\t\t}\n\t\t\tif(tot==1&&op=='('){//+(...)\u7684\u8868\u793a\u65b9\u6cd5 \n\t\t\t\top=getnum(n,op);\n\t\t\t\top=getnum(m,'0');\n\t\t\t\tans=ans+(n*m);\n\t\t\t}else{//+++...\u7684\u8868\u793a\u65b9\u6cd5 \n\t\t\t\top=getnum(n,op);\n\t\t\t\tans=ans+(n*tot);\n\t\t\t}\n\t\t}else{\n\t\t\ttot=0;\n\t\t\twhile(op=='-'){\n\t\t\t\ttot++;\n\t\t\t\top=getchar();\n\t\t\t}\n\t\t\tif(tot==1&&op=='('){//-(...)\u7684\u8868\u793a\u65b9\u6cd5 \n\t\t\t\top=getnum(n,op);\n\t\t\t\top=getnum(m,'0');\n\t\t\t\tans=ans-(n*m);\n\t\t\t}else{//---...\u7684\u8868\u793a\u65b9\u6cd5 \n\t\t\t\top=getnum(n,op);\n\t\t\t\tans=ans-(n*tot);\n\t\t\t}\n\t\t}\n\t\tif(op!='-'&&op!='+'){//\u5982\u679c\u4e4b\u524d\u7684\u5b57\u7b26\u4e0d\u662f+-\u5c31\u5728\u5faa\u73af\u5f00\u59cb\u65f6\u8bfb\u5165 \n\t\t\top=0;\n\t\t}\n\t}\n\tprint(ans);\n\treturn 0;\n}\n```",
        "postTime": 1540721346,
        "uid": 26294,
        "name": "xryjr233",
        "ccfLevel": 9,
        "title": "[2018.10.28]\u9898\u89e3 P1557 \u3010Kruscal\u7684\u52a0\u6cd5\u3011(\u6a21\u62df/\u9ad8\u7cbe\u5ea6/\u5b57\u7b26\u4e32)"
    },
    {
        "content": "\n\n\n\u4eca\u65e9\u7a81\u7136\u60f3\u5199\u8fd9\u9053\u9898\uff0c\u7136\u540e\u5199\u4e86\u4e24\u8282\u8bfe\u53ea\u5f97\u4e8610\u5206[\u5927\u54ed]\uff01\uff01\uff01\n\n\u7136\u540e\u6c42\u52a9\u795e\u7287\u8001\u5e08[@selar2017](https://www.luogu.org/space/show?uid=79254)\uff0c\u795e\u7287\u7ecf\u8fc7\u4e00\u4e0b\u5348\u7684\u8c03\u8bd5\uff0cACACACAC\uff01\uff01\uff01\n\n\u770b\u5230\u9898\u89e3\u548cAC\u8fd9\u4e48\u5c11\uff0c\u6211\u5c31\u77e5\u9053\u6211\u7684\u673a\u4f1a\u6765\u4e86\uff01\n\n\n===============================\u5206\u5272\u7ebf===============================\n\n\u9898\u76ee\u672c\u8eab\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u4e3b\u8981\u662f\u5bf9\u7ec6\u8282\u7684\u5904\u7406\uff0c\u4e0b\u9762\u7684\u7b97\u6cd5\u4e3b\u8981\u662f\u5bf9+\u3001-\u548c*\u8fdb\u884c\u91cd\u8f7d\uff0c\u53d8\u4e3a\u9ad8\u7cbe\u5ea6\u7b97\u6cd5\n\n\u9644AC\u4ee3\u7801\n```cpp\n#include <iostream>\n#include<cstring>\nusing namespace std;\nconst int MAXN = 4000;\nchar a[202];\nclass bign\n{ \tprivate:\n\tint len,s[MAXN];\n  \tpublic:\n  //\u9884\u8bf4\u660e\u4e09\u4e2a\u6784\u9020\u51fd\u6570\u3002\u6784\u9020\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u503c\n\tbign();//\u65e0\u53c2\u6570\u6784\u9020\u51fd\u6570\uff0c\u4e00\u5b9a\u8981\u6709\n\tbign(int num); \n\tbign(char num[], int n);\n  //\u7c7b\u6210\u5458\u51fd\u6570  \n\tvoid show();//\u9884\u8bf4\u660e\uff0c\u5b9a\u4e49\u5728\u5916\u90e8\n\tint getlen()//\u5728\u7c7b\u5185\u90e8\u53ef\u4ee5\u5b9a\u4e49\u51fd\u6570\n\t{return len;}\n\tint cm(bign a);//\u6bd4\u8f83ans\u548ca\u7684\u5927\u5c0f\uff0c\u8fd4\u56de-1,0,1\n\tbign operator+(const bign &b) const;\n\tbign operator*(const bign &b) const;\n\tbign operator-(const bign &b) const;//\u91cd\u8f7d+\u3001-\u3001*\uff1b \n};\nvoid bign::show()//\u7c7b\u5916\u5b9a\u4e49\u7c7b\u7684\u6210\u5458\u51fd\u6570\uff0c\u7528\u4e8e\u8f93\u51fa\n{\n\tfor(int i=len-1;i>=0;i--)\n\t cout<<s[i];\n\treturn;\n}\nbign::bign()\n{ \n\tmemset(s,0,sizeof(s));\n\tlen = 1;\n\treturn;\n} \nbign::bign (int num) //\u5c06\u6574\u5f62\u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\u5e76\u8bb0\u5f55\u957f\u5ea6\n{ \n\tmemset(s,0,sizeof(s));\n\tlen=1;\n\tint i; \n\tfor(i=0;num>0;i++)\n     { \n\t  s[i]=num%10;\n\t  num/=10;\n\t }\n\tlen=i;\n\treturn;\n}\nbign::bign(char num[], int n)//\u7528\u5b57\u7b26\u4e32\u7684\u6784\u9020\u51fd\u6570\n{\n\tmemset(s,0,sizeof(s));\n\tlen=1;\n\tfor(int i=0;i<n;i++)\n\t s[i]=int(num[n-1-i])-48;\n\tlen=n;\n\treturn;\n}\nbign bign::operator+(const bign &b) const //\u9ad8\u7cbe\u5ea6\u52a0\u6cd5 \n{\n\tbign c(0);\n\tint i,g;\n\tint maxlen=len>b.len?len:b.len;\n\tfor( i=0,g=0;i<maxlen+2;i++)\n\t {\n\t  c.s[i]=s[i]+b.s[i]+g;\n\t  g=c.s[i]/10;\n\t  c.s[i]%=10;\n\t }\n\tc.len=c.s[maxlen]>0?maxlen+1:maxlen;\n\treturn c;\n} \nbign bign::operator* (const bign &b) const //\u9ad8\u7cbe\u5ea6\u4e58\u6cd5 \n{\n\tbign c(0);\n\tint g;\n\tfor(int i = 0; i < len; i++)  \n     {\n\t  g=0;\n\t  for(int j = 0; j < b.len+2; j++)  \n\t   {\n\t    c.s[i+j] =c.s[i+j]+ s[i] * b.s[j]+g;  \n\t\tg=c.s[i+j]/10;\n\t\tc.s[i+j]%=10;\n\t   }\n     }\n\tc.len=c.s[len+b.len-1]>0?len+b.len:len+b.len-1;\n\treturn c;\n}\nbign bign::operator -(const bign &b) const //\u9ad8\u7cbe\u5ea6\u51cf\u6cd5 \n{\n\tint g=0;\n\tbign c;\n\tc.len=len;\n\tfor(int i=0;i<len;i++)\n\t {\n\t  c.s[i]=s[i]-b.s[i]-g;\n\t  if(c.s[i]<0) \n\t   {\n\t    c.s[i]=c.s[i]+10;\n\t\tg=1;\n\t   }\n\t  else\n\t   g=0; \n\t }\n\twhile(c.s[c.len-1]==0&&c.len>=2)\n\t c.len--;//\u53bb0\u64cd\u4f5c\uff0c\u5220\u53bb\u524d\u5bfc0\n\treturn c;\n}\nint  bign::cm(bign a)//\u6bd4\u8f83\u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u5927\u5c0f \n{ \n\tif(len!=a.len) \n\t {\n\t  if(len>a.len)\n\t   return 1;\n\t  else\n\t   return -1;\n\t }\t\n\telse\n\t {\n\t  int i=len;\n\t  while(s[i]==a.s[i]&&i>=0)\n\t   i--;\n\t  if(i<0)\n\t   return 0;\n\t  else\n\t   {\n\t    if(s[i]>a.s[i])\n\t     return 1;\n\t    else\n\t     return -1;\n\t   }\n\t }\n}\nbign readbign(int i)\n{ \n    char b[200];\n\tint j=0;\n\twhile('0'<=a[i]&&a[i]<='9' )\n\t {\n\t  b[j]=a[i];\n\t  j++;\n\t  i++;\n\t }\n\tb[j+1]='\\0';\n\tbign x(b,j);\n\treturn x;\n}\nint num=0;\nint main()\n{ \n  \tcin>>a;//\u8f93\u5165\u4e0d\u591a\u8bf4 \n \tint i=0,flag=0;//i\u904d\u5386\u957f\u5ea6\uff0cflag\u5224\u65ad\u6b63\u8d1f\uff081\u4e3a-\uff0c0\u4e3a+\uff09 \n  \tbign ans;//\u7b54\u6848\uff0cans\u4ec5\u8bb0\u5f55\u7b54\u6848\u7684\u7edd\u5bf9\u503c \n  \twhile(a[i]!='\\0')\n     {\n\t  if('0'<=a[i]&&a[i]<='9')//\u4ec5\u7528\u4e8e\u5f00\u5934\u76f4\u63a5\u662f\u6570\u5b57\u65f6 \n       {\n\t    bign x=readbign(i);//\u83b7\u5f97\u9ad8\u7cbe\u5ea6\u6570\u5b57 \n\t    i=i+x.getlen();//\u904d\u5386\u4f4d\u7f6e++ \n\t\tif(flag==0)\n\t\t ans=ans+x;\n/*\t\tnum++;\n\t\tcout<<num<<\":\",ans.show(),cout<<endl;*/\n/*\t\telse\n\t\t {\n\t\t  if(ans.cm(x)>0)\n\t\t   ans=ans-x;\n\t\t  else\n\t\t   {\n\t\t    ans=x-ans;\n\t\t\tflag=0;\n\t\t   }\n\t\t }*/\n//\u7ecf\u8fc7\u6211\u7684\u5224\u65ad\uff0c\u8fd9\u6bb5\u4ee3\u7801\u5e76\u4e0d\u9700\u8981 \n\t  }\n      else\n\t   {\n\t    if(a[i]=='+')\n\t     {\n\t      bign y(1);//\u5904\u7406\u52a0\u53f7\u60c5\u51b5 \n\t\t  if(a[i+1]=='+')//\u591a\u4e2a\u52a0\u53f7\u7684\u8fd0\u7b97 \n\t\t   {\n\t\t    int add=0;//\u8bb0\u5f55add\u7684\u4e2a\u6570 \n\t\t\twhile(a[i]=='+')\n\t\t\t i++,add++;\n\t\t\tbign k(add);//\u5c06add\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\n\t\t\ty=k;\n\t\t   }\n\t\t  else\n\t\t   {\n\t\t   \tif(a[i+1]=='(')\n\t\t   \t {\n\t\t      i=i+2;\n\t\t\t  y=readbign(i);\n\t\t\t  i=y.getlen()+i;\n\t\t\t  i++;\n\t\t\t }\n\t\t\telse\n\t\t\t i++;\n\t\t   }\n\t\t  bign x=readbign(i);//\u83b7\u53d6+\u540e\u9762\u7684\u6570\u5b57 \n\t\t  i=i+x.getlen();\n\t\t  bign z=x*y;//\u9ad8\u7cbe\u5ea6\u4e58\u6cd5 \n\t\t  if(flag==0)//\u5224\u65adans\u662f\u5426\u4e3a\u6b63 \n\t\t   ans=ans+z;\n\t\t  else\n\t\t   {\n\t\t\tif(ans.cm(z)>0)//ans\u4e3a\u8d1f\u6570\uff0c\u4e14ans\u7684\u7edd\u5bf9\u503c\u5927\u4e8ez\u7684\u7edd\u5bf9\u503c \n\t\t\t ans=ans-z;\n\t\t\telse \n\t\t\t {\n\t\t\t  flag=0;//\u5c0f\u8d1f\u51cf\u5927\u8d1f\uff0c\u7b26\u53f7\u4e3a\u6b63 \n\t\t\t  ans=z-ans;\n\t\t\t }\n\t\t   }\n/*\t\t  num++;\n\t\t  cout<<num<<\":\",ans.show(),cout<<endl; */\n\t\t }\n\t\telse\n\t\t {\n\t      bign y(1);//\u5904\u7406\u52a0\u53f7\u60c5\u51b5 \n\t\t  if(a[i+1]=='-')//\u591a\u4e2a\u52a0\u53f7\u7684\u8fd0\u7b97 \n\t\t   {\n\t\t    int sub=0;//\u8bb0\u5f55sub\u7684\u4e2a\u6570 \n\t\t\twhile(a[i]=='-')\n\t\t\t i++,sub++;\n\t\t\tbign k(sub);//\u5c06sub\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\n\t\t\ty=k;\n\t\t   }\n\t\t  else\n\t\t   {\n\t\t   \tif(a[i+1]=='(')\n\t\t   \t {\n\t\t      i=i+2;\n\t\t\t  y=readbign(i);\n\t\t\t  i=y.getlen()+i;\n\t\t\t  i++;\n\t\t\t }\n\t\t\telse\n\t\t\t i++;\n\t\t   }\n\t\t  bign x=readbign(i);//\u83b7\u53d6-\u540e\u9762\u7684\u6570\u5b57 \n\t\t  i=i+x.getlen();\n\t\t  bign z=x*y;//\u9ad8\u7cbe\u5ea6\u4e58\u6cd5 \n\t\t  if(flag==1)//\u5224\u65adans\u662f\u5426\u4e3a\u8d1f \n\t\t   ans=ans+z;\n\t\t  else\n\t\t   {\n\t\t\tif(ans.cm(z)>=0)//ans\u4e3a\u6b63\u6570\uff0c\u4e14ans\u5927\u4e8ez\n\t\t\t ans=ans-z;\n\t\t\telse \n\t\t\t {\n\t\t\t  flag=1;//\u5c0f\u6570\u51cf\u5927\u6570\uff0c\u7b26\u53f7\u4e3a\u8d1f \n\t\t\t  ans=z-ans;\n\t\t\t }\n\t\t   }\n/*\t\t  num++;\n\t\t  cout<<num<<\":\",ans.show(),cout<<endl; */\n\t\t }\n\t   }\n\t }\n  if(flag==1)\n   cout<<'-';\n  ans.show();  \n}\n\n```",
        "postTime": 1539087585,
        "uid": 86281,
        "name": "\u534e\u4e3a2X",
        "ccfLevel": 0,
        "title": "\u83dc\u9e21\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3[\u54ed]"
    },
    {
        "content": "## \u9ad8\u7cbe&\u6a21\u62df\n\n\u63d0\u4f9b\u4e00\u79cd\u4e0d\u4e00\u6837\u7684\u9ad8\u7cbe\u5ea6\u5199\u6cd5\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u7ed3\u6784\u4f53\u6765\u6a21\u62df\u9ad8\u7cbe\u5ea6\uff0c\u987a\u4fbf\u91cd\u8f7d\u4e00\u4e0b$+$ $-$ $\\times$\u5c31\u53ef\u4ee5\u5566\u3002\u4f46\u662f\u6211\u4eec\u5f88\u5feb\u5c31\u4f1a\u53d1\u73b0\u4e00\u4e9b\u95ee\u9898\uff0c\u5982\u679c\u6b63\u6570\u51cf\u8d1f\u6570\u600e\u4e48\u529e\uff1f~~\u7528Pascal~~\u5f53\u7136\u662f\u5927\u529b\u8ba8\u8bba\u5566\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u4e0d\u7ba1\u6570\u7684\u6b63\u8d1f\uff0c\u5728\u8fdb\u884c\u52a0\u51cf\u7684\u65f6\u5019\u53ea\u5904\u7406 \u6b63\u6570\u52a0\u6b63\u6570 \u548c \u5927\u7684\u6574\u6570\u51cf\u5c0f\u7684\u6b63\u6570\uff0c\u5982\u679c\u6709\u8d1f\u6570\u5c31\u53d8\u53f7\u518d\u8fdb\u884c\u52a0\u51cf\u6cd5\u3002\u4e58\u6cd5\u7684\u8bdd\u9075\u5faa\u540c\u53f7\u4e3a\u6b63\u6570\u5f02\u53f7\u4e3a\u8d1f\u5c31\u53ef\u4ee5\u5566\u3002\u53e6\u5916\u91cd\u8f7d<<\u5c31\u53ef\u4ee5\u8f93\u51fa\u7ed3\u6784\u4f53\uff0c\u7528\u8d77\u6765\u5341\u5206\u7684\u65b9\u4fbf\u3002\u4ee5\u4e0b\u63d0\u4f9b\u7684\u5199\u6cd5\u53ef\u4ee5\u5f53\u505a\u6a21\u677f\u98df\u7528\u3002\n\n\u8fd9\u4e2a\u9898\u8fd8\u6709\u5341\u5206\u9ebb\u70e6\u7684\u6a21\u62df\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u7c7b\u4f3c\u5feb\u8bfb\u7684\u51fd\u6570\u5c31\u80fd\u8bfb\u5165\u5566\u3002\u53e6\u5916\u5927\u529b\u8ba8\u8bba\u4e00\u4e0b7\u79cd\u60c5\u51b5\uff0c\u6ce8\u610f\u4e00\u4e0b\u5b83\u7684\u7b2c\u4e00\u4e2a\u6570\u524d\u9762\u53ef\u80fd\u6ca1\u6709\u52a0\u53f7\uff0c\u9700\u8981\u5904\u7406\u4e00\u4e0b\u9632\u6b62\u8bfb\u4e0d\u8fdb\u53bb\u6570\u3002\n\n\u8fd8\u6709\u5f88\u91cd\u70b9\u7684\u4e00\u9879\u5c31\u662f\u5f53\u7b54\u6848\u662f0\u7684\u65f6\u5019\uff0c\u5b83\u7684len\u4e5f\u662f0\uff0c\u6240\u4ee5\u9700\u8981\u7279\u5224\u4e00\u4e0b\u3002\u5176\u4ed6\u7684\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u90fd\u5728\u4ee3\u7801\u7684\u6ce8\u91ca\u91cc\uff0c\u8bf7\u653e\u5fc3\u98df\u7528\u3002\n\n\u6700\u540e\u732e\u4e0a\u6211~~\u4e11\u964b~~\u7684\u4ee3\u7801\u3002\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\nusing namespace std;\nint n;\nchar a[5100];\nstruct gj\n{\n\tint len,zheng;//len\uff1a\u957f\u5ea6 zheng\uff1a\u6b63\u8d1f\u6807\u8bb00\u4e3a\u8d1f1\u4e3a\u6b63 \n\tint v[10000];\n\tgj(){len=0;memset(v,0,sizeof(v));zheng=1;}\n\tgj(int x)\n\t{\n\t\tif(x>=0)zheng=1;\n\t\telse x=-x,zheng=0;\n\t\tlen=0;memset(v,0,sizeof(v));\n\t\twhile(x)\n\t\t{\n\t\t\tv[++len]=x%10;\n\t\t\tx/=10;\n\t\t}\n\t}\n\tfriend bool operator <(const gj &a,const gj &b)\n\t{\n\t    if(a.len<b.len)return 1;\n\t    if(a.len>b.len)return 0;\n\t    for(int i=a.len;i>=1;--i)\n\t    {\n\t    \tif(a.v[i]<b.v[i])return 1;\n\t    \tif(a.v[i]>b.v[i])return 0;\n\t    }\n\t    return 0;\n\t}\n}ans;\n/*------\u4ee5\u4e0b\u4e3a\u91cd\u8f7d\u90e8\u5206------*/ \nostream& operator << (ostream &out,const gj &a);\ngj operator -(gj a,gj b);\ngj operator +(gj a,gj b);\n\ngj operator +(gj a,gj b)\n{\n\tif(!a.zheng&&!b.zheng)\n\t{\n\t\ta.zheng=b.zheng=1;\n\t\tgj c=a+b;\n\t\tc.zheng=0;\n\t\treturn c;\n\t}\n\tif(!a.zheng&&b.zheng)\n\t{\n\t\ta.zheng=b.zheng=1;\n\t\treturn b-a;\n\t}\n\tif(a.zheng&&!b.zheng)\n\t{\n\t\ta.zheng=b.zheng=1;\n\t\treturn a-b;\n\t}\n\tint len=a.len+b.len;\n\tgj c;\n\tc.len=len;\n\tfor(int i=1;i<=len;++i)c.v[i]=a.v[i]+b.v[i];\n\tfor(int i=1;i<=len;++i)\n\t{\n\t\tif(c.v[i]>=10)\n\t\t{\n\t\t\t++c.v[i+1];\n\t\t\tc.v[i]-=10;\n\t\t}\n\t}\n\twhile(c.len&&!c.v[c.len])c.len--;\n\treturn c;\n}\ngj operator -(gj a,gj b)\n{\n\tif(!a.zheng&&!b.zheng)\n\t{\n\t\ta.zheng=b.zheng=1;\n\t\treturn b-a;\n\t}\n\tif(!a.zheng&&b.zheng)\n\t{\n\t\ta.zheng=1;\n\t\tgj c=a+b;\n\t\tc.zheng=0;\n\t\treturn c;\n\t}\n\tif(a.zheng&&!b.zheng)\n\t{\n\t\tb.zheng=1;\n\t\tgj c=a+b;\n\t\treturn c;\n\t}\n\tif(a.zheng&&b.zheng&&a<b)\n\t{\n\t\tgj c=b-a;\n\t\tc.zheng=0;\n\t\treturn c;\n\t}\n\tint len=max(a.len,b.len);\n\tgj c;\n\tfor(int i=1;i<=len;++i)c.v[i]=a.v[i]-b.v[i];\n\tc.len=len;\n\tfor(int i=1;i<=c.len;++i)\n\t{\n\t\tif(c.v[i]<0)\n\t\t{\n\t\t\tc.v[i+1]--;\n\t\t\tc.v[i]+=10;\n\t\t}\n\t}\n\twhile(c.len&&!c.v[c.len])c.len--;\n\treturn c;\n}\ngj operator *(gj a,gj b)\n{\n\tgj c;\n\tfor(int i=1;i<=a.len;++i)\n\tfor(int j=1;j<=b.len;++j)\n\tc.v[i+j-1]+=a.v[i]*b.v[j];\n\tc.len=a.len+b.len;\n\tfor(int i=1;i<=c.len-1;++i)\n\t{\n\t\tif(c.v[i]>=10)\n\t\t{\n\t\t\tc.v[i+1]+=c.v[i]/10;\n\t\t\tc.v[i]%=10;\n\t\t}\n\t}\n\twhile(c.v[c.len]==0&&c.len>1)--c.len;\n\tif(a.zheng!=b.zheng)c.zheng=0;\n\telse c.zheng=1;\n\treturn c;\n}\nostream& operator << (ostream &out,const gj &a)//\u65b9\u4fbf\u4f7f\u7528cout \n{\n\tif(!a.len)//\u4e00\u5b9a\u8981\u6ce8\u610f\u7b54\u6848\u662f0\u5f97\u60c5\u51b5 \n\t{\n\t\tcout<<\"0\";\n\t\treturn out;\n\t}\n\tif(!a.zheng)cout<<\"-\";\n\tfor(int i=a.len;i>=1;i--)printf(\"%d\",a.v[i]);\n\treturn out;\n}\n/*------\u4ee5\u4e0a\u4e3a\u91cd\u8f7d\u90e8\u5206------*/ \ngj read(int pos)//\u7c7b\u4f3c\u5feb\u8bfb \n{\n\tgj s;\n\twhile(a[pos]<'0'||a[pos]>'9')pos++;\n\twhile(a[pos]>='0'&&a[pos]<='9')s.v[++s.len]=a[pos]-'0',pos++;\n\tfor(int i=1;i<=s.len/2;++i)swap(s.v[i],s.v[s.len-i+1]);//\u56e0\u4e3a\u662f\u6b63\u7740\u8bfb\u7684\u6240\u4ee5\u8981\u53cd\u8fc7\u6765 \n\ts.zheng=1;\n\treturn s;\n}\nint main()\n{\n\tscanf(\"%s\",a+1);n=strlen(a+1);\n\tans.zheng=1;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(a[i]=='+'&&a[i+1]=='(')//\u52a0\u67d0\u4e2a\u6570*\u67d0\u4e2a\u6570 \n\t\t{\n\t\t\tgj k=read(i+2);\n\t\t\twhile(a[i]<'0'||a[i]>'9')i++;\n\t\t\twhile(a[i]>='0'&&a[i]<='9')i++;\n\t\t\ti++;\n\t\t\tans=ans+read(i)*k;\n\t\t}\n\t\telse if(a[i]=='-'&&a[i+1]=='(')//\u51cf\u67d0\u4e2a\u6570 *\u67d0\u4e2a\u6570\n\t\t{\n\t\t\tgj k=read(i+2);\n\t\t\twhile(a[i]<'0'||a[i]>'9')i++;\n\t\t\twhile(a[i]>='0'&&a[i]<='9')i++;\n\t\t\ti++;\n\t\t\tans=ans-read(i)*k;\n\t\t}\n\t\telse if(a[i]=='+'&&a[i+1]=='+')//\u8fde\u52a0 \n\t\t{\n\t\t\tint cnt=0;\n\t\t\twhile(a[i]=='+')cnt++,i++;\n\t\t\tans=ans+read(i)*gj(cnt);\n\t\t}\n\t\telse if(a[i]=='-'&&a[i+1]=='-')//\u8fde\u51cf \n\t\t{\n\t\t\tint cnt=0;\n\t\t\twhile(a[i]=='-')cnt++,i++;\n\t\t\tans=ans-read(i)*gj(cnt);\n\t\t}\n\t\telse if(a[i]=='+'&&a[i+1]>='0'&&a[i+1]<='9')ans=ans+read(i+1);//\u52a0\u67d0\u4e2a\u6570 \n\t\telse if(a[i]=='-'&&a[i+1]>='0'&&a[i+1]<='9')ans=ans-read(i+1);//\u51cf\u67d0\u4e2a\u6570 \n\t\telse if(i==1&&a[i]>='0'&&a[i]<='9')ans=read(i);//\u8bfb\u5165\u7b2c\u4e00\u4e2a\u6570 \n\t}\n\tcout<<ans;\n\treturn 0;\n}\n/*\n+(8)9-(10)9+++6\n*/\n```\n",
        "postTime": 1568592177,
        "uid": 153843,
        "name": "wljss",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1797 \u3010\u514b\u9c81\u65af\u7684\u52a0\u51cf\u6cd5_NOI\u5bfc\u520a2010\u63d0\u9ad8\uff0805\uff09\u3011"
    }
]
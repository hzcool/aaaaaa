[
    {
        "content": "~~\u5927\u6982\u662f\u5168\u7f51\u627e\u4e0d\u5230\u4ec0\u4e48\u9898\u89e3\u6240\u4ee5\u5199\u4e00\u53d1\uff0c\u987a\u4fbf\u6c42\u4e2a\u5361\u5e38\u5927\u5e08\u5361\u5361\u5e38\u3002~~\n\n[[BalticOI 2008]\u6e38\u620f](https://www.luogu.com.cn/problem/P4658)\n\n> \u7ed9\u5b9a $n\\times n$ \u7684\u77e9\u9635\uff0c\u6709 A \u548c B \u4e24\u4eba\u7684\u8d77\u70b9\u548c\u969c\u788d\u7269\u3002\n>\n> \u7531 A \u5148\u8d70\uff0c\u6bcf\u6b21\u6bcf\u4eba\u8f6e\u6d41\u8d70\u4e00\u6b65\uff0c\u5982\u679c\u8d70\u5230\u53e6\u4e00\u4e2a\u4eba\u5934\u4e0a\u5c31\u5fc5\u987b\u518d\u8d70\u4e00\u6b65\u3002\n>\n> \u8c01\u5148\u5230\u8fbe\u53e6\u4e00\u4e2a\u4eba\u7684\u8d77\u70b9\u8c01\u83b7\u80dc\uff0c\u5982\u679c\u5230\u8fbe\u5bf9\u65b9\u8d77\u70b9\u65f6\u5bf9\u65b9\u6070\u597d\u5728\u81ea\u5df1\u8d77\u70b9\u4e0a\uff0c\u4e5f\u89c6\u4e3a\u83b7\u80dc\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u5148\u624b\u5177\u6709\u5de8\u5927\u4f18\u52bf\uff0c\u56e0\u4e3a\u4e24\u4eba\u7684\u6700\u77ed\u8def\u5f84\u957f\u5ea6\uff08\u8bbe\u4e3a $D$\uff09\u662f\u4e00\u6837\u7684\uff0c\u552f\u4e00\u7684\u7ffb\u76d8\u70b9\u5728 B \u8df3\u5230 A \u5934\u4e0a\u4e00\u6b21\u3002\n\n**\u6027\u8d28\u4e00\uff1a\u6bcf\u4e2a\u4eba\u5fc5\u8d70\u6700\u77ed\u8def\u5f84**\u3002\n\n\u5426\u5219\u53e6\u4e00\u4e2a\u4eba\u53ea\u8981\u575a\u5b9a\u7684\u8d70\u6700\u77ed\u8def\u5f84\u5c31\u5fc5\u7136\u83b7\u80dc\u3002\n\n\u8fd9\u6837\u9884\u5904\u7406\u4ece A,B \u4e24\u70b9\u51fa\u53d1\uff0c\u5230\u6bcf\u4e2a\u683c\u5b50\u7684\u6700\u77ed\u8ddd\u79bb\uff0c\u79f0 $\\text{dis}_{A}=D-\\text{dis}_{B}$ \u7684\u683c\u5b50\u4e3a**\u5408\u6cd5\u683c\u5b50**\u3002\n\n**\u6027\u8d28\u4e8c\uff1a\u82e5 $D$ \u4e3a\u5947\u6570\u5219 A \u5fc5\u80dc**\u3002\n\n\u8fd9\u4e2a\u4e5f\u663e\u7136\uff0c\u56e0\u4e3a\u8fd9\u6837 B \u60f3\u78b0\u5230 A \u4e5f\u78b0\u4e0d\u4e0a\u3002\n\n\u540c\u65f6\u53d1\u73b0\uff0c\u5076\u6570\u65f6\uff0c\u5982\u679c B \u78b0\u4e0a\u4e86 A\uff0c\u4e00\u5b9a\u662f\u4e24\u8005\u540c\u65f6\u5230\u8fbe $\\text{dis}_A=\\text{dis}_B=\\dfrac{D}{2}$ \u7684\u683c\u5b50\uff0c\u79f0\u8fd9\u6837\u7684\u683c\u5b50\u4e3a**\u5173\u952e\u683c\u5b50**\u3002\n\n\u57fa\u4e8e\u8fd9\u4e9b\u6027\u8d28\uff0c\u5c31\u5f88\u5bb9\u6613\u60f3\u5230\u505a\u6cd5\u3002\n\n\u8bbe $S(x,y)$ \u8868\u793a\u4ece $(x,y)$ \u51fa\u53d1\uff0c\u53ea\u901a\u8fc7 \u5408\u6cd5\u683c\u5b50 \u80fd\u5230\u8fbe\u7684 \u5173\u952e\u683c\u5b50 \u96c6\u5408\u3002\n\n**\u6027\u8d28\u4e09\uff1aB \u80fd\u83b7\u80dc\u5f53\u4e14\u4ec5\u5f53\uff1a**\n\n**\u5bf9\u4e8e A \u7684\u6bcf\u6761\u4ece\u8d77\u70b9\u5230\u67d0\u4e2a \u5173\u952e\u683c\u5b50 \u8def\u5f84\uff1a$(ax_0,ay_0),(ax_1,ay_1),\\cdots,(ax_{\\frac{D}{2}},ay_{\\frac{D}{2}})$\u3002\uff08\u5176\u4e2d $0$ \u4e0b\u6807\u8868\u793a\u5bf9\u5e94\u4eba\u7684\u8d77\u70b9\uff09**\n\n**\u90fd\u6709\u81f3\u5c11\u4e00\u6761 B \u7684\u8def\u5f84\uff1a$(bx_0,by_0),(bx_1,by_1),\\cdots,(bx_{\\frac{D}{2}},by_{\\frac{D}{2}})$\uff0c\u6ee1\u8db3 $\\forall i\\in[0,\\frac{D}{2}],S(ax_i,ay_i)\\subset S(bx_i,by_i)$\u3002**\n\n\u76f8\u5f53\u4e8e\uff0c\u5bf9\u4e8e\u6bcf\u6b21 A \u7684\u79fb\u52a8\uff0cB \u603b\u80fd\u5408\u7406\u7684\u79fb\u52a8\uff0c\u4f7f\u5f97 A \u80fd\u5230\u7684\u5173\u952e\u683c\u5b50 B \u90fd\u80fd\u5230\u3002\u8fd9\u6837\u663e\u7136 B \u80fd\u78b0\u4e0a A\uff0c\u5426\u5219\u4e0d\u80fd\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u4e0a\uff0c\u53ea\u9700\u8981\u5bf9\u4e8e\u6bcf\u4e2a\u540c\u5c42\u7684 A,B \u8def\u5f84\u4e2d\u7684\u683c\u5b50\u5bf9\u679a\u4e3e\u5224\u65ad\u3002\n\n\u5982\u679c\u5bf9\u4e8e A \u683c\u5b50\u7684\u4e0b\u4e00\u6b65\u7684\u6bcf\u4e2a\u683c\u5b50\uff0c\u90fd\u6709\u81f3\u5c11\u4e00\u4e2a B \u7684\u4e0b\u4e00\u6b65\u80fd\u5230\u7684\u683c\u5b50\u4e0e\u4e4b\u5339\u914d\uff0c\u90a3\u4e48\u5b83\u4eec\u5339\u914d\u3002\n\n\u6700\u7ec8\u53ea\u8981\u9a8c\u8bc1 A,B \u7684\u8d77\u70b9\u662f\u5426\u5339\u914d\u5373\u53ef\u3002\n\n\u56e0\u4e3a\u6bcf\u5c42\u7684\u683c\u5b50\u6570\u662f $O(n)$ \u7684\uff0c\u6240\u4ee5\u603b\u590d\u6742\u5ea6\u662f $O(Tn^3)$ \u7684\uff0c\u5728 loj \u4e0a\u901a\u8fc7\u4e86\uff0c\u4f46\u5728\u6d1b\u8c37\u4e0a\u8fd8\u662f t \u4e86\u4e24\u4e2a\u70b9\u3002\n\n\u5728\u7ebf\u6c42\u5361\u5e38\u5927\u5e08/kel\n\n```cpp\n#include<bits/stdc++.h>\ntypedef long long LL;\n#define rep(i, a, b) for(register int i = (a); i <= (b); i ++)\n#define per(i, a, b) for(register int i = (a); i >= (b); i --)\n#define Ede(i, u) for(int i = head[u]; i; i = e[i].nxt)\nusing namespace std;\n\ninline int read() {\n\tint x = 0, f = 1; char c = getchar();\n\twhile(c < '0' || c > '9') f = (c == '-') ? - 1 : 1, c = getchar();\n\twhile(c >= '0' && c <= '9') x = x * 10 + c - 48, c = getchar();\n\treturn x * f;\n}\n\ntypedef pair<int, int> pii;\n#define mp make_pair\n#define fi first\n#define se second\n\nconst int N = 310;\nint n, dis[2][N][N], flg[N][N], num[N][N];\nchar str[N][N];\nvector<pii> vec[N * N];\nbool vis[2][N << 1][N << 1];\nint dx[] = {1, -1, 0, 0};\nint dy[] = {0, 0, 1, -1};\n\ninline void clear() {memset(vis, false, sizeof(vis)); rep(i, 0, n << 1) vec[i].clear();}\n\ninline int get(pii cur) {return num[cur.fi][cur.se];}\n\ninline void calc(int sx, int sy, int o) {\n\trep(i, 1, n) rep(j, 1, n) dis[o][i][j] = -1;\n\tdis[o][sx][sy] = 0;\n\tqueue<pii> q; q.push(mp(sx, sy));\n\twhile(! q.empty()) {\n\t\tpii u = q.front(); q.pop();\n\t\tint x = u.fi, y = u.se;\n\t\trep(d, 0, 3) {\n\t\t\tint nx = x + dx[d], ny = y + dy[d];\n\t\t\tif(nx < 1 || nx > n || ny < 1 || ny > n || str[nx][ny] == '#' || dis[o][nx][ny] != -1) continue;\n\t\t\tdis[o][nx][ny] = dis[o][x][y] + 1;\n\t\t\tq.push(mp(nx, ny));\n\t\t}\n\t}\n}\n\ninline vector<pii> solve(pii cur, int o) {\n\tint x = cur.fi, y = cur.se;\n\tvector<pii> now;\n\trep(d, 0, 3) {\n\t\tint nx = x + dx[d], ny = y + dy[d];\n\t\tif(nx < 1 || nx > n || ny < 1 || ny > n || str[nx][ny] == '#') continue;\n\t\tif(flg[nx][ny] == flg[x][y] + o) now.push_back(mp(nx, ny));\n\t}\n\treturn now;\n}\n\ninline bool involve(pii a, vector<pii> bcur) {\n\tfor(pii b : bcur) if(vis[0][get(a)][get(b)]) return true;\n\treturn false;\n}\n\nint ax, ay, bx, by;\n\nvoid work() {\n\tn = read(), clear();\n\trep(i, 1, n) scanf(\"%s\", str[i] + 1);\n\trep(i, 1, n) rep(j, 1, n)\n\t\tif(str[i][j] == 'A') ax = i, ay = j;\n\t\telse if(str[i][j] == 'B') bx = i, by = j;\n\tcalc(ax, ay, 0);\n\tcalc(bx, by, 1);\n\tint Dis = dis[0][bx][by];\n\tif(Dis & 1) {puts(\"A\"); return;}\n\trep(i, 1, n) rep(j, 1, n) {\n\t\tflg[i][j] = -1;\n\t\tif(dis[0][i][j] != -1 && dis[1][i][j] != -1 && Dis - dis[0][i][j] == dis[1][i][j]) {\n\t\t\tflg[i][j] = dis[0][i][j], vec[flg[i][j]].push_back(mp(i, j));\n\t\t\tnum[i][j] = vec[flg[i][j]].size();\n\t\t}\n\t}\n\trep(i, 1, (int) vec[Dis / 2].size()) vis[0][i][i] = true;\n\n\tper(d, Dis / 2 - 1, 0) {\n\t\tfor(pii a : vec[d]) {\n\t\t\tvector<pii> acur = solve(a, 1);\n\t\t\tfor(pii b : vec[Dis - d]) {\n\t\t\t\tvector<pii> bcur = solve(b, - 1);\n\t\t\t\tbool flag = true;\n\t\t\t\tfor(pii o : acur) if(! involve(o, bcur)) {flag = false; break;}\n\t\t\t\tif(flag) vis[1][get(a)][get(b)] = true;\n\t\t\t}\n\t\t}\n\t\trep(i, 1, (int) vec[d + 1].size()) rep(j, 1, (int) vec[Dis - d - 1].size()) vis[0][i][j] = false;\n\t\trep(i, 1, (int) vec[d].size()) rep(j, 1, (int) vec[Dis - d].size()) vis[0][i][j] = vis[1][i][j], vis[1][i][j] = false;\n\t}\n\tputs(vis[0][get(mp(ax, ay))][get(mp(bx, by))] ? \"B\" : \"A\");\n}\n\nint main() {\n\tint t = read();\n\twhile(t --) work();\n\treturn 0;\n}\n```\n\n",
        "postTime": 1654594174,
        "uid": 117941,
        "name": "_LPF_",
        "ccfLevel": 9,
        "title": "P4658 [BalticOI 2008]\u6e38\u620f"
    },
    {
        "content": "\u771f\u7684\u624d\u84dd\uff1f\u771f\u7684\u624d\u84dd\uff1f\u771f\u7684\u624d\u84dd\uff1f\n\n--------\n\n\u5bb9\u6613\u53d1\u73b0\u4e24\u4eba\u90fd\u4f1a\u4e00\u76f4\u8d70\u6700\u77ed\u8def\u3002\u800c\u5bf9\u4e8e B \u6765\u8bf4\uff0c\u9664\u975e\u5b83\u80fd\u4fdd\u8bc1\u8de8\u8d8a A \u4e00\u6b21\uff0c\u5426\u5219\u6c38\u8fdc\u662f B \u8d1f\u3002\n\n\u8fd9\u4e2a\u8de8\u8d8a\u53ef\u80fd\u96be\u4ee5\u7406\u89e3\uff0c\u5047\u8bbe\u53bb\u6389\u8de8\u8d8a\uff0c\u90a3\u4e48\u5b9e\u8d28\u4e0a\u662f B \u8981\u4fdd\u8bc1\u67d0\u4e2a\u65f6\u523b\uff0cB \u8d70\u5b8c\uff08\u6ce8\u610f\u4e0d\u662f A \u8d70\u5b8c\uff09\u4e4b\u540e\u548c A \u91cd\u53e0\u3002\n\n\u90a3\u4e48\u7531\u6b64\u5bb9\u6613\u5f97\u51fa\u9996\u5148\u6700\u77ed\u8ddd\u79bb\u662f\u5947\u6570\u7684\u65f6\u5019 B \u4e0d\u53ef\u80fd\u8de8\u8d8a\u5230 A\u3002\n\n\u7136\u540e\u53ef\u4ee5\u8003\u8651 dp\uff1a\u8bbe $dp(x_A,y_A,x_B,y_B)$ \u8868\u793a A \u6b64\u65f6\u5728  $(x_A,y_A)$\uff0cB \u5728 $(x_B,y_B)$ \uff0cB \u80fd\u5426\u4fdd\u8bc1\u505a\u5230\u548c A \u91cd\u53e0\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u5355\u6b21 $O(n^4)$ \u7684\u505a\u6cd5\uff0c\u4f46\u5176\u663e\u7136\u4e0d\u591f\u4f18\u79c0\u3002\n\n\u6ce8\u610f\u5230\u8bbe $d_{A}(x,y)$ \u8868\u793a A \u7684\u51fa\u53d1\u70b9\u5230 $(x,y)$ \u7684\u6700\u77ed\u8def\uff0c$d_B(x,y)$ \u8868\u793a B \u7684\u51fa\u53d1\u70b9\u5230 $(x,y)$ \u7684\u6700\u77ed\u8def\u3002\u5219 $(x_A,y_A,x_B,y_B)$ \u6ee1\u8db3 $d_A(x_A,y_A)=d_B(x_B,y_B)$\uff0c\u6362\u8a00\u4e4b\u4e0d\u662f\u6240\u6709\u7684 $(x_A,y_A,x_B,y_B)$ \u90fd\u662f\u6709\u610f\u4e49\u7684\u3002\n\n\u6b64\u65f6\uff0c\u6709\u8da3\u7684\u95ee\u9898\u662f\u63a2\u8ba8\u6709\u610f\u4e49\u7684\u70b9\u5bf9\u7684\u6570\u91cf\u7ea7\u3002\n\n\u4e8b\u5b9e\u4e0a\u53ef\u4ee5\u8fd1\u4f3c\u5730\u770b\u4f5c\u8fd9\u4e2a\u95ee\u9898\uff1a\u82e5\u5e72\u4e2a\u548c\u4e3a $n^2$ \u7684\u6b63\u6574\u6570\u7684\u5e73\u65b9\u548c\u7684\u6700\u5927\u503c\uff0c\u4e14\u6bcf\u4e2a\u6570\u90fd\u5c0f\u4e8e\u7b49\u4e8e $n$\u3002\n\n\u6839\u53f7\u5206\u6cbb\u505a\u591a\u4e86\u7684\u4eba\u90fd\u53ef\u4ee5\u7acb\u9a6c\u770b\u51fa\u5e73\u65b9\u548c\u7684\u4e0a\u754c\u662f $n^3$ \u7ea7\u522b\u7684\u3002\n\n\u90a3\u4e48\u8fd9\u4e2a\u5206\u6790\u9053\u7406\u4f55\u5728\u5462\uff1f\u6211\u4eec\u672c\u8d28\u4e0a\u662f\u628a\u6240\u6709\u6700\u77ed\u8def\u4e0a\u7684\u70b9\u5212\u5206\u8fdb\u4e86 A\uff0cB \u4e24\u4e2a\u96c6\u5408\u3002\u79bb\u54ea\u4e2a\u70b9\u7684\u6700\u77ed\u8def\u8fd1\uff0c\u5c31\u5212\u5206\u8fdb\u54ea\u4e00\u4e2a\u3002\u7136\u540e\u6211\u4eec\u7684 $(x_1,y_1,x_2,y_2)$ \u6709\u610f\u4e49\uff0c\u5f53\u4e14\u4ec5\u5f53\u8fd9\u4e24\u4e2a\u70b9\u5728\u4e24\u8fb9\u96c6\u5408\uff0c\u4e14\u5c42\u6570\u76f8\u540c\u3002\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u5c42\uff0c\u8bbe\u5de6\u8fb9\u6709 $x$ \u4e2a\uff0c\u53f3\u8fb9\u6709 $y$ \u4e2a\u3002\u5219 $xy\\le (x+y)^2$\u3002\u800c\u6ce8\u610f\u5230\u6bcf\u4e00\u5c42\u7684 $x+y$ \u4e0a\u9650\u662f $O(n)$ \u7ea7\u522b\u7684\uff0c\u6240\u6709\u5c42\u7684 $x+y$ \u4e4b\u548c\u4e0d\u8d85\u8fc7 $n^2$ \u7ea7\u522b\uff0c\u6240\u4ee5\u5c31\u53ef\u4ee5\u8fd1\u4f3c\u5730\u89c6\u4f5c\u4e0a\u9762\u7684\u90a3\u4e2a\u6a21\u578b\u3002\n\n\u5b9e\u73b0\u4e0a\u4e5f\u8981\u6ce8\u610f\uff0c\u56e0\u4e3a\u672c\u9898\u6781\u5c0f\u7684\u7a7a\u95f4\u8bbe\u7f6e\uff0c\u5fc5\u987b\u8fd0\u7528\u7c7b\u4f3c\u5206\u5c42 dp \u7684\u60f3\u6cd5\u7136\u540e\u6eda\u52a8\u6570\u7ec4\u53bb\u4f18\u5316\u7a7a\u95f4\u3002\u5373\u5148\u5904\u7406\u5c42\u6570\u6700\u5927\u7684\u70b9\u4e4b\u95f4\u7684\u5339\u914d\uff0c\u7136\u540e\u5904\u7406\u5c42\u6570\u5c0f\u4e00\u7ea7\u7684...\u6700\u540e\u5c31\u53ea\u5269\u4e0b\u4e86\u4e24\u4e2a\u521d\u59cb\u70b9\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^3)$ \u7a7a\u95f4\u590d\u6742\u5ea6 $O(n^2)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=(a);i<=(b);i++)\n#define per(i,a,b) for(int i=(a);i>=(b);i--)\n#define op(x) ((x&1)?x+1:x-1)\n#define odd(x) (x&1)\n#define even(x) (!odd(x))\n#define lc(x) (x<<1)\n#define rc(x) (lc(x)|1)\n#define lowbit(x) (x&-x)\n#define mp(x,y) make_pair(x,y)\ntypedef long long ll;\ntypedef unsigned long long ull;\ntypedef double db;\nusing namespace std;\nconst int MAXN=310,INF=1e9,px[4]={-1,0,1,0},py[4]={0,1,0,-1};\nint T,n,sx,sy,ex,ey;\nint d[2][MAXN][MAXN],idx[MAXN][MAXN];\nchar s[MAXN][MAXN];\nqueue<array<int,2> >pq;\nvector<array<int,2> >p1[MAXN*MAXN],p2[MAXN*MAXN];\nbool dp[MAXN*2][MAXN*2],tmp[MAXN*2][MAXN*2];\nint valid(array<int,2> q){\n    return q[0]>=1 && q[0]<=n && q[1]>=1 && q[1]<=n;\n}\nint main(){\n    ios::sync_with_stdio(false);\n    cin>>T;\n    \n    while(T--){\n        cin>>n;\n        rep(i,1,n){\n            cin>>(s[i]+1);\n        }\n        rep(i,1,n)rep(j,1,n)if(s[i][j]=='A')sx=i,sy=j;else if(s[i][j]=='B')ex=i,ey=j;\n        rep(i,1,n)rep(j,1,n)d[0][i][j]=d[1][i][j]=INF;       \n        d[0][sx][sy]=0;pq.push({sx,sy});\n        while(pq.size()){\n            auto p=pq.front();pq.pop();\n            rep(k,0,3){\n                array<int,2> q={p[0]+px[k],p[1]+py[k]};\n                if(!valid(q))continue;\n                if(s[q[0]][q[1]]=='#')continue;\n                if(d[0][q[0]][q[1]]>d[0][p[0]][p[1]]+1){\n                    d[0][q[0]][q[1]]=d[0][p[0]][p[1]]+1;\n                    pq.push(q);\n                }\n            }\n        }\n        d[1][ex][ey]=0;pq.push({ex,ey});\n        while(pq.size()){\n            auto p=pq.front();pq.pop();\n            rep(k,0,3){\n                array<int,2> q={p[0]+px[k],p[1]+py[k]};\n                if(!valid(q))continue;\n                if(s[q[0]][q[1]]=='#')continue;\n                if(d[1][q[0]][q[1]]>d[1][p[0]][p[1]]+1){\n                    d[1][q[0]][q[1]]=d[1][p[0]][p[1]]+1;\n                    pq.push(q);\n                }\n            }\n        }\n        int D=d[0][ex][ey];\n        if(odd(D)){\n            cout<<\"A\\n\";continue;\n        }\n        rep(i,0,D/2)p1[i].clear(),p2[i].clear();\n        rep(i,1,n)rep(j,1,n){\n            if(d[0][i][j]+d[1][i][j]==D){\n                if(d[0][i][j]<=D/2)p1[d[0][i][j]].push_back({i,j}),idx[i][j]=p1[d[0][i][j]].size()-1;\n                if(d[0][i][j]>=D/2)p2[D-d[0][i][j]].push_back({i,j}),idx[i][j]=p2[D-d[0][i][j]].size()-1;\n            }\n        }\n        memset(dp,0,sizeof dp);\n        int sz=p1[D/2].size();\n        rep(i,0,sz-1)dp[i][i]=1;\n        per(lvl,D/2-1,0){\n            //calc new dp\n            int sz1=p1[lvl].size(),sz2=p2[lvl].size();\n            rep(i,0,sz1-1)rep(j,0,sz2-1){\n                array<int,2>X=p1[lvl][i],Y=p2[lvl][j];\n                p1[lvl+1].clear();p2[lvl+1].clear();\n                tmp[i][j]=1;\n                rep(k1,0,3){\n                    array<int,2>X2={X[0]+px[k1],X[1]+py[k1]};\n                    if(!valid(X2))continue;\n                    if(s[X2[0]][X2[1]]=='#')continue;\n                    if(d[0][X2[0]][X2[1]]!=d[0][X[0]][X[1]]+1 || d[0][X2[0]][X2[1]]+d[1][X2[0]][X2[1]]!=D)continue;\n                    int flag=0;\n                    rep(k2,0,3){\n                        array<int,2>Y2={Y[0]+px[k2],Y[1]+py[k2]};\n                        if(!valid(Y2))continue;\n                        if(s[Y2[0]][Y2[1]]=='#')continue;\n                        if(d[1][Y2[0]][Y2[1]]!=d[1][Y[0]][Y[1]]+1 || d[1][Y2[0]][Y2[1]]+d[0][Y2[0]][Y2[1]]!=D)continue;\n                        int idx1=idx[X2[0]][X2[1]],idx2=idx[Y2[0]][Y2[1]];\n                        if(dp[idx1][idx2]){\n                            flag=1;break;\n                        }\n                    }\n                    if(!flag){\n                        tmp[i][j]=0;break;\n                    }\n                }\n            }\n            rep(i,0,sz1-1)rep(j,0,sz2-1)dp[i][j]=tmp[i][j];\n\n        }\n        if(dp[0][0])cout<<\"B\\n\";\n        else cout<<\"A\\n\";\n    }\n\n    return 0;\n}\n```",
        "postTime": 1656644468,
        "uid": 340632,
        "name": "Cry_For_theMoon",
        "ccfLevel": 8,
        "title": "\u3010BalticOI 2008\u3011\u6e38\u620f"
    }
]
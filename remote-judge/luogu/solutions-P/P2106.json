[
    {
        "content": "# Sam\u6570\u9898\u89e3\n---\n\n~~\u90a3\u4f4d\u5927\u4f6c\u8bb2\u7684\u4e0d\u591f\u8be6\u7ec6\u6211\u6765\u8865\u5145\u4e00\u4e0b~~\n\n> \u9898\u610f\u7b80\u8ff0\uff1a \u6c42\u6709\u591a\u5c11\u957f\u4e3a$n$\u4f4d\u4e14\u6ee1\u8db3\u76f8\u90bb\u4f4d\u4e4b\u5dee\u5c0f\u4e8e\u7b49\u4e8e2\u7684\u6570\u3002\n\n\u8fd9\u662f\u4e00\u9053\u6570\u4f4dDP\u6a21\u677f\u9898\u3002\n\u5efa\u8bae\u505a\u8fd9\u9053\u9898\u4e4b\u524d\u5148\u505a\u4e00\u4e0b[\u3010P2657\u3011[SCOI2009]windy\u6570](https://www.luogu.org/problemnew/show/P2657)\n\n\u7136\u540e\u6211\u4eec\u6765\u5206\u6790\u8fd9\u9053\u9898\u3002\n\u9996\u5148\u8bbe $f(i,j)$ \u8868\u793a\u7b2c $i$ \u4f4d\u4e3a $j$ \u65f6\u7684\u65b9\u6848\u603b\u6570\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u5f97\u5230\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$f(i,j)=\\sum _{x=j-2}^{j+2} {f(i-1,x)}$$\n\n\u8fd9\u4e2a\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u6ce8\u610f\u8fb9\u754c\u5c31\u884c\u4e86\u3002\n\u8fd9\u6837\u6211\u4eec\u5f97\u5230\u4e86\u65f6\u95f4\u590d\u6742\u5ea6$O(n)$\u7a7a\u95f4\u590d\u6742\u5ea6$O(n)$\u7684~~\u4f18\u79c0(30\u5206)~~\u7b97\u6cd5\u3002\n\n---\n\n\u8fdb\u4e00\u6b65\u4f18\u5316\uff1a\n\u6211\u4eec\u53d1\u73b0\u6bcf\u6b21\u8f6c\u79fb\u53ea\u4e0e$i-1$\u6709\u5173\uff0c\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u4e00\u4e0b\u3002\n\u8fd9\u6837\u7a7a\u95f4\u590d\u6742\u5ea6\u964d\u5230\u4e86$O(1)$\u3002\n\u4f46\u662f$n<10^{18}$\uff0c$O(n)\u7684\u590d\u6742\u5ea6\u80af\u5b9a\u4f1a\u8d85\u65f6~~\uff08gg\uff09~~\n\n---\n\n\u518d\u8fdb\u4e00\u6b65\u4f18\u5316\uff1a\n\u663e\u7136\u6211\u4eec\u9700\u8981\u590d\u6742\u5ea6$O(log_2n)$\u7684\u505a\u6cd5\u3002\n## \u77e9\u9635\u5feb\u901f\u5e42\uff01\n\u5982\u4f55\u6784\u9020\u77e9\u9635\uff1f\n\u6839\u636e\u9898\u610f\u548c\u9012\u63a8\u5f0f\uff0c\u6211\u4eec\u6784\u9020\u51fa\u5982\u4e0b\u77e9\u9635\u3002\n\n```cpp\n\nA = 0 1 1 1 1 1 1 1 1 1\n\nD = 1 1 1 0 0 0 0 0 0 0\n    1 1 1 1 0 0 0 0 0 0\n    1 1 1 1 1 0 0 0 0 0\n    0 1 1 1 1 1 0 0 0 0\n    0 0 1 1 1 1 1 0 0 0\n    0 0 0 1 1 1 1 1 0 0\n    0 0 0 0 1 1 1 1 1 0\n    0 0 0 0 0 1 1 1 1 1\n    0 0 0 0 0 0 1 1 1 1\n    0 0 0 0 0 0 0 1 1 1\n    \n```\n\n\u77e9\u9635\u5feb\u901f\u5e42\u600e\u4e48\u7528\uff1f\n\u666e\u901a\u5feb\u901f\u5e42\u65f6\u8fd9\u6837\u7684\uff1a\n\n```cpp\n\nlong long qpow(long long base,long long v) {\n\tlong long res = 1;\n    while (v) {\n    \tif (v & 1) res *= base;\n        base *= base;\n        v >>= 1;\n    }\n    return res;\n}\n```\n \u77e9\u9635\u5feb\u901f\u5e42\u9700\u8981\u91cd\u8f7d\u8fd0\u7b97\u7b26,\u8bbe\u7f6e\u5355\u4f4d\u77e9\u9635\u3002\n \n \u5982\u679c\u4e0d\u4f1a\uff0c\u8bf7\u8f6c\u5411\u6a21\u677f\u9898\u3002\n \n \u6ce8\u610f**\u7279\u5224** $n=1$ \u65f6\u7b54\u6848\u4e3a10\u3002\n \n \u8fd8\u6709\uff0c\u5728\u5b9a\u4e49\u77e9\u9635\u540e\u522b\u5fd8\u4e86**\u5c06\u77e9\u9635\u6e05\u7a7a**\uff0c\u5426\u5219\u4f1a\u51fa\u4e71\u4e03\u516b\u7cdf\u7684\u6570\u3002~~\u6211\u88ab\u8fd9\u73a9\u610f\u5751\u4e86\u4e24\u56deQAQ~~\n \n~~\u6211\u77e5\u9053\u4f60\u4eec\u60f3\u8981\u8fd9\u4e2a\u2193\u2193\u2193~~\n \n ```cpp\n \n#include <bits/stdc++.h>\nconst long long mod = 1e9 + 7;\nstruct matrix {\n\tlong long v[10][10]; // \u5b9a\u4e49\u77e9\u9635\u7ed3\u6784\u4f53\n};\nmatrix operator * (const matrix a,const matrix b) { // \u91cd\u8f7d\u8fd0\u7b97\u7b26\n\tmatrix c;\n\tmemset(c.v,0,sizeof(c.v)); // \u522b\u5fd8\u4e86\u6e05\u7a7a\n\tfor(int k = 0;k < 10;k++)\n\t\tfor(int i = 0;i < 10;i++)\n\t\t\tfor(int j = 0;j < 10;j++)\n\t\t\t\tc.v[i][j] = (c.v[i][j] + a.v[i][k] * b.v[k][j] % mod ) % mod; // \u77e9\u9635\u4e58\u6cd5\u8fd0\u7b97\u6cd5\u5219\n\treturn c;\n}\nmatrix qpow(matrix a,long long v) { // \u77e9\u9635\u5feb\u901f\u5e42\uff0c\u6307\u6570\u8981\u5f00long long\n\tmatrix r;\n\tmemset(r.v,0,sizeof(r.v)); // \u6e05\u7a7a!\n\tfor(int i = 0;i < 10;i++)\n\t\tr.v[i][i] = 1; // \u8bbe\u7f6e\u5355\u4f4d\u77e9\u9635\n\twhile(v) {         // \u8ddf\u666e\u901a\u5feb\u901f\u5e42\u5dee\u4e0d\u591a\n\t\tif(v & 1) r = r * a;\n\t\ta = a * a;\n\t\tv >>= 1;\n\t}\n\treturn r;\n}\nlong long n,ans;\nmatrix a,d;     // a\u662f\u521d\u59cb\u77e9\u9635\uff0cd\u662f\u9012\u63a8\u77e9\u9635\nint main() {\n\tstd::cin >> n;\n\tif(n == 1) {   //\u7279\u5224\n\t\tprintf(\"10\\n\");\n\t\treturn 0;\n\t}\n\tmemset(a.v,0,sizeof(a.v));\n\tmemset(d.v,0,sizeof(d.v));\n\tfor(int i = 1;i < 10;i++)    // \u8bbe\u7f6e\u521d\u59cb\u77e9\u9635\n\t\ta.v[0][i] = 1;\n\tfor(int i = 0;i < 10;i++)   // \u8bbe\u7f6e\u9012\u63a8\u77e9\u9635\n\t\tfor(int j = i - 2;j <= i + 2;j++) {\n\t\t\tif(j < 0) continue;\n\t\t\tif(j > 9) break;\n\t\t\td.v[j][i] = 1;  // \u81ea\u52a8\u6253\u8868\u6280\u672f~\n\t\t}\n\ta = a * qpow(d,n - 1); // \u8ba1\u7b97\n\tfor(int i = 0;i < 10;i++)\n\t\tans += a.v[0][i],ans %= mod; // \u7d2f\u52a0\u7b54\u6848\n\tstd::cout << ans << \"\\n\"; // \u8f93\u51fa\n}\n\n```",
        "postTime": 1533785965,
        "uid": 52082,
        "name": "Delta_Rain",
        "ccfLevel": 0,
        "title": "Sam\u6570\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\u53ef\u4ee5\u7528\u500d\u589e\u89e3\u51b3\u3002\n\nf[i][j][k]\u4e3a\u6709(1<<i)\u4f4d\uff0c\u6700\u9ad8\u4f4d\u4e3aj\uff0c\u6700\u4f4e\u4f4d\u4e3ak\u7684\u60c5\u51b5\u6570\uff0c\u5219\u53ef\u4ee5\u5f97\u51faf[i][j][k]=sum(f[i-1][j][p]\\*f[i-1][q][k])(abs(p-q)<=2)\u3002\u6211\u4eec\u7b97\u51faf\u6570\u7ec4\u540e\uff0c\u9700\u8981\u627e\u51fa\u6570\u7684\u4f4d\u6570k\u80fd\u7531\u54ea\u4e9b(1<<i)\u4e4b\u548c\u5f97\u5230\uff0c\u5f97\u5230\u4e4b\u540e\u8fdb\u884c\u9012\u63a8\uff0c\u5bf9\u4e8e\u7b2ccnt\u4e2a(1<<i)\uff0cans[cnt][j][k]=sum(ans[cnt-1][j][p]\\*f[i][q][k])(abs(p-q)<=2)\u3002\u6700\u540e\u6c42\u51fasum(ans[cnt][j][k])(1<=j<=9,0<=k<=9)\u3002\u6ce8\u610f\u5f53\u4f4d\u6570\u4e3a\u4e00\u662f\u9700\u8981\u7279\u5224\uff0c\u8f93\u51fa10\u3002\n\n```cpp\n#include<cstdio>\ntypedef long long ll;\nconst int P=1000000007;\nll f[63][10][10],ans[63][10][10],cnt;\nbool b=0;\nint main(){\n    ll n; scanf(\"%lld\",&n);\n    if(n==1){\n        printf(\"10\"); return 0;//\u7279\u5224\n    }\n    for(int i=0;i<10;++i) f[0][i][i]=1;//\u521d\u59cb\u5316f\u6570\u7ec4\n    for(int i=1;i<=62;++i) for(int j=0;j<10;++j) for(int k=0;k<10;++k)\n        for(int l=0;l<10;++l) for(int p=-2;p<=2;++p) if(l+p>=0&&l+p<10)\n            (f[i][j][k]+=f[i-1][j][l]*f[i-1][l+p][k])%=P;//\u9012\u63a8\u6c42f\u6570\u7ec4\n    for(int i=0;i<=62;++i) if(n&(1LL<<i)) if(!b){\n        for(int j=0;j<10;++j) for(int k=0;k<10;++k)//\u82e5ans\u6570\u7ec4\u6ca1\u6709\u521d\u59cb\u5316\u7684\u8bdd\u521d\u59cb\u5316\u4e00\u904d\n            ans[0][j][k]=f[i][j][k]; b=1;\n    }else{\n        ++cnt; \n        for(int j=0;j<10;++j) for(int k=0;k<10;++k)//\u9012\u63a8\u6c42ans\u6570\u7ec4\n        for(int l=0;l<10;++l) for(int p=-2;p<=2;++p)\n            if(l+p>=0&&l+p<10) (ans[cnt][j][k]+=ans[cnt-1][j][l]*f[i][l+p][k])%=P;\n    }\n    ll sum=0;\n    for(int i=1;i<10;++i) for(int j=0;j<10;++j)//\u7edf\u8ba1\u7b54\u6848\n        (sum+=ans[cnt][i][j])%=P;\n    printf(\"%lld\",sum); return 0;\n}\n```",
        "postTime": 1498273762,
        "uid": 27986,
        "name": "jxcakak",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2106 \u3010Sam\u6570\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\u6c42\u6709\u591a\u5c11\u4e2a\u76f8\u90bb\u4e24\u4f4d\u5dee\u4e0d\u8d85\u8fc7$2$\u7684$n$\u4f4d\u6570\uff08$Sam$\u6570\uff09\uff0c$1\\le n\\le 10^{18}$\uff0c\u7b54\u6848\u5bf9$10^9+7$\u53d6\u6a21\n### \u89e3\u9898\u601d\u8def\n- \u6613\u60f3\u5230\u6570\u4f4d$DP$\uff1a\n\n\u8bbe$F_{i,j}$\u4e3a\u672b\u4f4d\u4e3a$i$\u7684$j$\u4f4d\u7684$Sam$\u6570\u6709\u591a\u5c11\u4e2a\n\n\u8f6c\u79fb\u65b9\u7a0b\uff1a$F_{i,j}=\\sum F_{i-1,k}(|k-j|\\le 2)$\n\n\u8fb9\u754c\u6761\u4ef6\uff1a$F_{i,1}=1$\n\n\u663e\u7136\u6b64\u7b97\u6cd5\u4f1a\u8d85\u65f6\n\n- \u500d\u589e\n\n\u8003\u8651\u8fd9\u4e9b\u6570\u7801\u662f\u53ef\u4ee5\u53e0\u52a0\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u500d\u589e\n\n\u8f6c\u79fb\u65b9\u7a0b\u9700\u8981\u5c06\u7b2c$j$\u4f4d\u6539\u4e3a\u6709$2^j$\u4f4d\uff0c\u540c\u65f6\u52a0\u4e0a\u9996\u4f4d\u4e3a$k$\u8fd9\u4e00\u7ef4\u72b6\u6001\n\n\u8f6c\u79fb\u6709$2^j$\u4f4d\u65f6\u679a\u4e3e\u4e24\u4e2a\u6709$2^{j-1}$\u4f4d\u7684\uff0c\u5e76\u5224\u65ad\u7b2c\u4e00\u4e2a\u7684\u672b\u4f4d\u548c\u7b2c\u4e8c\u4e2a\u7684\u9996\u4f4d\u662f\u5426\u6ee1\u8db3\u8981\u6c42\u80fd\u591f\u53e0\u52a0\n\n\u6700\u540e\u8f6c\u79fb\u7b54\u6848\u540c\u6837\u4e5f\u8981\u5f00\u4e2a\u6570\u7ec4\uff0c\u8bb0\u5f55\u9996\u4f4d\u672b\u4f4d\u548c\u7b2c\u51e0\u6b21\u8f6c\u79fb\u7b54\u6848\uff0c\u8f6c\u79fb\u65b9\u5f0f\u540c\u4e0a\n\n### \u6ce8\u610f\u4e8b\u9879\n\n$2^j$\u679a\u4e3e$j$\u7684\u65f6\u5019\u6ce8\u610f```long long```\u7684\u8303\u56f4\uff0c\u8fbe\u5230$63$\u4f1a\u88ab\u5361\u7206\uff0c\u53ea\u80fd\u679a\u4e3e\u5230$62$\n\n\u6700\u540e\u7edf\u8ba1\u7b54\u6848\u7684\u65f6\u5019\uff0c\u9996\u4f4d\u4e0d\u80fd\u4e3a$0$\uff08\u8fd9\u4e5f\u662f\u7b54\u6848\u6570\u7ec4\u4e5f\u8981\u8bb0\u5f55\u9996\u4f4d\u7684\u539f\u56e0\uff09\n\n### \u4ee3\u7801\n\n```cpp\n#include <cstdio>\n#define int long long\nconst int mod=1000000007;\nint n,tot,sum,f[10][10][63],ans[10][10][63];\ninline int read(){\n\tchar ch=getchar();int res=0,w=1;\n\twhile(ch<'0'||ch>'9') {if(ch=='-') w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9') {res=res*10+ch-'0';ch=getchar();}\n\treturn res*w;\n}\ninline int Abs(int x){\n\treturn x<0?-x:x;\n}\nsigned main(){\n\tn=read();\n\tif(n==1) {puts(\"10\");return 0;}\n\tfor(register int i=0;i<10;i++) f[i][i][0]=1;\n\tfor(register int i=1;i<=62;i++)\n\t\tfor(register int j=0;j<10;j++)\n\t\t\tfor(register int k=0;k<10;k++)\n\t\t\t\tfor(register int t=0;t<10;t++)\n\t\t\t\t\tif(Abs(t-k)<=2) for(register int l=0;l<10;l++) f[j][l][i]=(f[j][l][i]+f[j][k][i-1]*f[t][l][i-1])%mod;\n\tfor(register int i=0;i<=62;i++)\n\t\tif(n>>i&1)\n\t\t{\n\t\t\tif(!sum) for(register int j=0;j<10;j++)\n\t\t\t\tfor(register int k=0;k<10;k++) ans[j][k][sum+1]=f[j][k][i];\n\t\t\telse for(register int j=0;j<10;j++)\n\t\t\t\tfor(register int k=0;k<10;k++)\n\t\t\t\t\tfor(register int t=0;t<10;t++)\n\t\t\t\t\t\tif(Abs(t-k)<=2) for(register int l=0;l<10;l++) ans[j][l][sum+1]=(ans[j][l][sum+1]+ans[j][k][sum]*f[t][l][i])%mod;\n\t\t\tsum++;\n\t\t}\n\tfor(register int i=1;i<10;i++)\n\t\tfor(register int j=0;j<10;j++) tot=(tot+ans[i][j][sum])%mod;\n\tprintf(\"%lld\\n\",tot);\n\treturn 0;\n}\n```",
        "postTime": 1566910430,
        "uid": 80679,
        "name": "Register",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2106 \u3010Sam\u6570\u3011"
    },
    {
        "content": "### \u611f\u89c9\u5176\u4ed6\u5927\u4f6c\u6ca1\u591a\u89e3\u91ca**\u77e9\u9635\u7684\u6784\u9020**\uff0c\u672c\u849f\u84bb\u6765\u8be6\u7ec6\u89e3\u91ca\u4e00\u4e0b\n\n\u9996\u5148\u6b64\u9898\u662f\u4e00\u9053\u6570\u4f4d$DP$\u9898\uff0c\u53ef\u4ee5\u5feb\u901f\u7684\u63a8\u51fa\u65b9\u7a0b\n\n\n------------\n\n\n\u4ee4$f(i,j)$ \u8868\u793a\u7b2c$i$\u4f4d\u6570\u4e3a$j$\u65f6\u7684\u65b9\u6848\u6570\n\n\u56e0\u4e3a\u76f8\u90bb\u4e24\u6570\u4e4b\u5dee\u4e0d\u8d85\u8fc7$2$\uff0c\u6545\u5728\u7b2c$i+1$\u4f4d\u65f6\u53ef\u4ee5\u9009\u53d6\u7684\u6570\u4e3a$j-2$~$j+2$\n\n\u6545\u53ef\u4ee5\u63a8\u51fa\u65b9\u7a0b$f(i+1,j)=\\sum\\limits_{m=j-2}^{j+2}{f(i,m)}$\n\n\u65b9\u7a0b\u5c55\u5f00\u4e3a$f(i+1,j)=f(i,j-2)+f(i,j-1)+f(i,j)+f(i,j+1)+f(i,j+2)$\n\n\n------------\n\n\n\u4e8e\u662f\u6211\u4eec\u4fbf\u53ef\u4ee5$O(n)$\u63a8\u51fa\u7b54\u6848\n\n\u4f46\u662f\u7531\u4e8e\u6570\u636e\u8303\u56f4\u4e3a$1 \u2264 k \u2264 10^{18}$ $,$ \u6240\u4ee5\u8981\u7528\u77e9\u9635\u5feb\u901f\u5e42\u4f18\u5316\n\n\u6839\u636e\u9012\u63a8\u5f0f $,$ \u6211\u4eec\u53ef\u4ee5\u63a8\u51fa\u77e9\u9635\n\n\n```cpp\n1 1 1 0 0 0 0 0 0 0            f[i,0]         f[i,0]+f[i,1]+f[i,2]                         f[i+1,0]  \n1 1 1 1 0 0 0 0 0 0            f[i,1]         f[i,0]+f[i,1]+f[i,2]+f[i,3]                  f[i+1,1]  \n1 1 1 1 1 0 0 0 0 0            f[i,2]         f[i,0]+f[i,1]+f[i,2]+f[i,3]+f[i,4]           f[i+1,2]  \n0 1 1 1 1 1 0 0 0 0            f[i,3]         f[i,1]+f[i,2]+f[i,3]+f[i,4]+f[i,5]           f[i+1,3]  \n0 0 1 1 1 1 1 0 0 0      x     f[i,4]    =    f[i,2]+f[i,3]+f[i,4]+f[i,5]+f[i,6]     =     f[i+1,4]  \n0 0 0 1 1 1 1 1 0 0            f[i,5]         f[i,3]+f[i,4]+f[i,5]+f[i,6]+f[i,7]           f[i+1,5]  \n0 0 0 0 1 1 1 1 1 0            f[i,6]         f[i,4]+f[i,5]+f[i,6]+f[i,7]+f[i,8]           f[i+1,6]  \n0 0 0 0 0 1 1 1 1 1            f[i,7]         f[i,5]+f[i,6]+f[i,7]+f[i,8]+f[i,9]           f[i+1,7]  \n0 0 0 0 0 0 1 1 1 1            f[i,8]         f[i,6]+f[i,7]+f[i,8]+f[i,9]                  f[i+1,8]  \n0 0 0 0 0 0 0 1 1 1            f[i,9]         f[i,7]+f[i,8]+f[i,9]                         f[i+1,9]  \n```\n\n\n------------\n\n\u4ee4\n```cpp\n1 1 1 0 0 0 0 0 0 0 \n1 1 1 1 0 0 0 0 0 0\n1 1 1 1 1 0 0 0 0 0 \n0 1 1 1 1 1 0 0 0 0\n0 0 1 1 1 1 1 0 0 0\n0 0 0 1 1 1 1 1 0 0 \n0 0 0 0 1 1 1 1 1 0    \n0 0 0 0 0 1 1 1 1 1 \n0 0 0 0 0 0 1 1 1 1    \n0 0 0 0 0 0 0 1 1 1    \n```\n\u4e3a$A$\u77e9\u9635;\n\n\n------------\n\n\n\u4ee4\n```cpp\nf[1,0]\nf[1,1]\nf[1,2]\nf[1,3]\nf[1,4]\nf[1,5]\nf[1,6]\nf[1,7]\nf[1,8]\nf[1,9]\n```\n\u4e3a$B$\u77e9\u9635;\n\n\n------------\n\n\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u7528\u5c06$A$\u77e9\u9635\u4e58 $k-1$ \u904d , \u518d\u5c06 $A*B$ \u5c31\u53ef\u4ee5\u5f97\u51fa\u5728\u7b2c$k$\u4f4d\u53d6 $0$ ~ $9$ \u7684\u65b9\u6848\u6570\uff0c\u518d\u5c06\u5176\u7d2f\u52a0\u5373\u53ef\u5f97\u5230\u7b54\u6848\n\n\n------------\n\n\u6ce8\u610f\u70b9\uff1a\n1. $B$ \u4e2d $f(1,0)=0\\ ,$ \u56e0\u4e3a\u8981\u9632\u6b62\u51fa\u73b0\u524d\u5bfc$0$\n\n2. \u5f53$k=1$ \u65f6 \uff0c \u9700\u7279\u5224\u8f93\u51fa$10$\n\n\n------------\n\n\n\u4e0b\u9762\u653e\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define mod 1000000007\nlong long k;\nstruct node{\n    long long m[11][11];\n};\nnode res,ans,realans;\nnode mul(node aa,node bb){\n    node tmp;\n    memset(tmp.m,0,sizeof(tmp.m));\n    for(long long i=0;i<=9;i++){\n        for(long long j=0;j<=9;j++){\n            for(long long k=0;k<=9;k++){\n                tmp.m[i][j]=(tmp.m[i][j]+aa.m[i][k]*bb.m[k][j])%mod;\n            }\n        }\n    }\n    return tmp;\n}\nint main(){\n    scanf(\"%lld\",&k);\n    if(k==1){\n        printf(\"10\\n\");\n        return 0;\n    }\n    for(long long i=0;i<=9;i++){\n        ans.m[i][i]=1;\n    }\n    for(long long i=0;i<=9;i++){\n        for(long long j=max(0ll,i-2);j<=min(i+2,9ll);j++){\n            res.m[i][j]=1;\n        }\n    }\n    k--;\n    while(k){\n        if(k%2) ans=mul(ans,res);\n        res=mul(res,res);\n        k/=2;\n    }\n    long long anss=0;\n    for(long long i=1;i<=9;i++)\n        realans.m[i][0]=1;\n    for(long long i=0;i<=9;i++){\n    \tfor(long long j=0;j<=0;j++){\n    \t\tfor(long long k=0;k<=9;k++){\n    \t\t\tanss=(anss+ans.m[i][k]*realans.m[k][j])%mod;\n            }\n        }\n    }\n    printf(\"%lld\\n\",anss);\n    return 0;\n}\n```\n\n\n**~~\u795e\u7287\u8f7b\u55b7~~**\n",
        "postTime": 1563882216,
        "uid": 55843,
        "name": "ueettttuj",
        "ccfLevel": 0,
        "title": "P2106 Sam\u6570"
    },
    {
        "content": "\u9898\u610f\uff1a\u76f8\u90bb\u4e24\u4e2a\u6570\u7684\u5dee\u4e0d\u8d85\u8fc7 $2$\uff0c\u6211\u4eec\u79f0\u8fd9\u4e2a\u6570\u662f\u725b\u903c\u7684\uff0c\u7136\u540e\u6211\u4eec\u8981\u8be2\u95ee\u4f4d\u6570\u662f $k\\le10^{18}$ \u7684\u725b\u903c\u6570\u6709\u51e0\u4e2a\u3002\n\n\u975e\u5e38\u7684\u840c\u840c\uff0c\u4f60\u76f4\u63a5\u638f\u51fa\u6765\u4e00\u4e2a $\\text{DP}$\uff0c\u6211\u4eec\u4f7f\u7528 $f_{i,j}$ \u8868\u793a $i$ \u4f4d \u9996\u4f4d\u4e3a $j$ \u7684\u725b\u903c\u6570\u6709\u51e0\u4e2a\u3002\n\n$$f_{i,j}=\\sum_{k\\in[j-2,j+2]\\cap[0,10]}f_{i-1,k}$$\n\n\u7136\u540e\u76f4\u63a5\u4e0a\u4e00\u4e2a\u77e9\u9635\u5feb\u901f\u5e42\u5c31\u884c\u4e86\uff0c\u6784\u9020\u77e9\u9635\u663e\u7136\u4e3a\n\n$ \\begin{pmatrix}\n1&1&1&0&0&0&0&0&0&0 \\\\\n1&1&1&1&0&0&0&0&0&0 \\\\\n1&1&1&1&1&0&0&0&0&0 \\\\\n0&1&1&1&1&1&0&0&0&0 \\\\\n0&0&1&1&1&1&1&0&0&0 \\\\\n0&0&0&1&1&1&1&1&0&0 \\\\\n0&0&0&0&1&1&1&1&1&0 \\\\\n0&0&0&0&0&1&1&1&1&1 \\\\\n0&0&0&0&0&0&1&1&1&1 \\\\\n0&0&0&0&0&0&0&1&1&1 \\\\\n\\end{pmatrix} $\n\n\u8fb9\u754c\u5c31\u662f $f_{1,0}=0,f_{1,i}=1$ \u4e86\u3002\n\n\u73b0\u5728\u662f $20:15$\uff0c\u6211\u770b\u6211\u4ec0\u4e48\u65f6\u5019\u5199\u5b8c\u3002\n\n\u73b0\u5728\u662f $20:20$\uff0c\u6211\u5199\u5b8c\u4e86\u3002\n\n```cpp\nlong long k;\nsigned main(){\n\tmat A(10,10);\n\tfor(int i=1;i<=10;i++)\n\tfor(int j=1;j<=10;j++)\n\tif(abs(i-j)<=2)A[i][j]=1;\n\tmat B(10,10);\n\tfor(int i=2;i<=10;i++)B[1][i]=1;\n\tcin>>k;\n\tB=B*Ksm(A,k-1);\n\tint ans=0;\n\tfor(int i=1;i<=10;i++)add(ans,B[1][i]);\n\tcout<<ans+(k==1);\n}\n```\n$k=1$ \u7684\u65f6\u5019\u597d\u50cf\u8981\u7279\u5224\u4e00\u4e0b\uff1f\uff1f\uff1f\n\n[\u63a8\u4e00\u6ce2\u77e9\u9635\u5feb\u901f\u5e42\uff01](https://www.luogu.com.cn/blog/Peterprpr/mu-ban)",
        "postTime": 1632917717,
        "uid": 100325,
        "name": "peterwuyihong",
        "ccfLevel": 7,
        "title": "P2106 Sam\u6570 \u8bb0\u5f55"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5f88\u5bb9\u6613\u53ef\u4ee5\u60f3\u5230\u6570\u4f4ddp\uff1adp[i][j]\u8868\u793adp\u5230\u7b2ci\u4e2a\uff0c \u4ee5j\u4e3a\u672b\u5c3e\u7684\u60c5\u51b5\u6709\u591a\u5c11\u79cd\u3002\u4f46\u662f1e18\u7684\u8303\u56f4\u5fc3\u6001\u5f88\u7206\u70b8\uff01\n\n\u4ee5\u524d\u770b\u523010^18\u7684\u6570\u636e\u8303\u56f4\u60f3\u90fd\u4e0d\u60f3\u76f4\u63a5\u6570\u5b66\u65b9\u6cd5\u3002\u4f46\u662f\u81ea\u4ece\u4e0a\u6b21hdu5434\u4f01\u56fe\u7528\u8f6e\u5ed3\u7ebf\u627e\u89c4\u5f8b\u88ab\u96c6\u8bad\u961f\u5927\u4f6c\u5632\u8bbd\u4e86\u4e00\u6ce2\u4e4b\u540e\uff0c\u849f\u84bb\u5c31\u6c38\u8fdc\u8bb0\u4f4f\u4e86\u77e9\u9635\u5feb\u901f\u5e42\u8fd9\u79cd\u64cd\u4f5c\uff08\u5982\u679c\u4e0d\u4f1a\u77e9\u9635\u5feb\u901f\u5e42\u53ef\u4ee5\u5148\u767e\u5ea6\u77e9\u9635\u5feb\u901f\u5e42\u6c42\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7b2cn\u9879\uff09\u3002\u5927\u6982\u610f\u601d\u662f\u5982\u679cdp\u7684\u6bcf\u4e00\u6b21\u8f6c\u79fb\u90fd\u76f8\u540c\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u7528\u77e9\u9635\u5feb\u901f\u5e42\u65e0\u538b\u529bdp\uff08\u4f8b\u5982hdu5434\uff09\u3002\u8fd9\u9053\u9898\u4e5f\u662f\u7c7b\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e00\u6b21dp[i - 1][j] \u5230 dp[i][j]\u7684\u72b6\u6001\u8f6c\u79fb\u90fd\u662f\u76f8\u540c\u7684\u3002\u8fd9\u6837\u6211\u4eec\u53ea\u8981\u901a\u8fc7\u8f6c\u79fb\u6784\u9020\u8f6c\u79fb\u77e9\u9635\uff0c\u7136\u540e\u5bf9\u8f6c\u79fb\u77e9\u9635\u8fdb\u884c\u5feb\u901f\u5e42\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u4e0b\u9762\u662f0ms\u4ee3\u7801\uff1a\n\n\n\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#define LL long long\nusing namespace std;\nLL n, ans;\nconst int p = 1000000007;\nstruct Matrix {\n    LL DT[130][130];\n    int n, m;\n    Matrix(int nn, int nm) {\n        memset(DT, 0, sizeof(DT));\n        n = nn, m = nm;\n    }\n    void Std(int x) {\n        n = m = x;\n        for(register int i = 0; i < x; ++i)\n            DT[i][i] = 1;\n    }\n    Matrix operator *(const Matrix &a) {\n        Matrix ans(n, a.m);\n        for(register int i = 0; i < n; ++i)\n            for(register int j = 0; j < a.m; ++j)\n                for(register int k = 0; k < m; ++k)\n                    (ans.DT[i][j] += (DT[i][k] * a.DT[k][j]) % p) %= p;\n        return ans;\n    }\n}trans(10, 10), st(1, 10);\nMatrix fpow(Matrix a, LL b) {\n    Matrix ans(a.n, a.n);\n    ans.Std(a.n);\n    while(b) {\n        if(b & 1) ans = ans * a;\n        a = a * a, b >>= 1;\n    }\n    return ans;\n}\nint main() {\n    scanf(\"%lld\", &n);\n    if(n == 1) {\n        printf(\"10\");\n        return 0;\n    }\n    for(register int i = 1; i < 10; ++i)\n        st.DT[0][i] = 1;\n    for(register int i = 0; i < 10; ++i)\n        for(register int j = 0; j < 10; ++j)\n            if(abs(i - j) <= 2) ++trans.DT[i][j];\n    trans = st * fpow(trans, n - 1);\n    for(register int i = 0; i < 10; ++i) \n        (ans += trans.DT[0][i] % p) %= p;\n    printf(\"%lld\", ans);\n    return 0;\n}\n```",
        "postTime": 1509431898,
        "uid": 39907,
        "name": "Rockdu",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2106 \u3010Sam\u6570\u3011"
    },
    {
        "content": "\u4e00\u9053\u5f88\u9002\u5408\u7ec3\u624b\u7684\u77e9\u9635\u5feb\u901f\u5e42\u9898\u76ee\u3002\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u5148\u8003\u8651\u52a8\u6001\u89c4\u5212\u6765\u505a\uff0c\u6211\u4eec\u4ee4 $ dp_{i,j} $ \u4ee3\u8868\u4ee5\u6570\u5b57 $ j $ \u5f00\u5934\u7684 $ i $ \u9636Sam\u6570\u7684\u4e2a\u6570\uff0c\u90a3\u4e48\u5c31\u6709\u72b6\u6001\u8f6c\u79fb\u516c\u5f0f\uff1a\n\n$ dp_{i,j}=\\sum_{k=\\max\\left(0,j-2\\right)}^{\\min\\left(10,j+2\\right)}dp_{i-1,k} $\n\n\u7531\u4e8e\u9012\u63a8\u516c\u5f0f\u53ea\u7528\u5230\u4e86\u4e0a\u4e00\u4e2a\u9636\u6bb5\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u5c06\u7a7a\u95f4\u590d\u6742\u5ea6\u964d\u4f4e\u4e3a $ \\Theta\\left(1\\right) $\u3002\n\n\u663e\u7136\uff0c\u6b64\u65f6\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $ \\Theta\\left(k\\right) $,\u8fd8\u9644\u8d60\u4e86\u4e00\u4e2a $ 44 $ \u7684\u5927\u5e38\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u5f97\u5230\u4e86~~\u6109\u5feb\u7684~~ $ 30 $ \u5206\u4ee3\u7801\u3002\n\n\u663e\u7136\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $ \\Theta\\left(\\log_{2} k\\right) $ \u7684\u7b97\u6cd5\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u8bf7\u51fa\u672c\u7bc7\u9898\u89e3\u7684\u4e3b\u89d2\uff0c\u77e9\u9635\u5feb\u901f\u5e42\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c31\u6765\u770b\u8fd9\u7bc7\u9898\u76ee\u4e2d\u6211\u4eec\u6240\u7528\u5230\u7684\u4e24\u4e2a\u77e9\u9635\u3002\n\n\u7b2c\u4e00\u4e2a\u77e9\u9635\u4e5f\u662f\u6700\u91cd\u8981\u7684\u77e9\u9635\uff0c\u7528\u4e8e\u5feb\u901f\u5e42\u8ba1\u7b97\u9012\u63a8\u8fc7\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u53c2\u7167\u4e0a\u9762\u52a8\u6001\u89c4\u5212\u7684\u8f6c\u79fb\u65b9\u7a0b\uff0c\u6765\u8bbe\u8ba1\u51fa\u8fd9\u4e2a\u77e9\u9635\u3002\n\n\u770b\u4e0b\u9762\uff1a\n\n$ \\begin{vmatrix}\n1  &1  &1  &0  &0  &0  &0  &0  &0  &0 \\\\\n1  &1  &1  &1  &0  &0  &0  &0  &0  &0 \\\\\n1  &1  &1  &1  &1  &0  &0  &0  &0  &0 \\\\\n0  &1  &1  &1  &1  &1  &0  &0  &0  &0 \\\\\n0  &0  &1  &1  &1  &1  &1  &0  &0  &0 \\\\\n0  &0  &0  &1  &1  &1  &1  &1  &0  &0 \\\\\n0  &0  &0  &0  &1  &1  &1  &1  &1  &0 \\\\\n0  &0  &0  &0  &0  &1  &1  &1  &1  &1 \\\\\n0  &0  &0  &0  &0  &0  &1  &1  &1  &1 \\\\\n0  &0  &0  &0  &0  &0  &0  &1  &1  &1\n\\end{vmatrix} $\n\n\u7b2c\u4e8c\u4e2a\u77e9\u9635\u5c31\u662f\u521d\u59cb\u77e9\u9635\uff0c\u663e\u7136 $ 0 $ \u5230 $ 9 $ \u8fd9 $ 10 $ \u4e2a\u6570\u5b57\u90fd\u662fSam\u6570\uff0c\u6240\u4ee5\u521d\u59cb\u77e9\u9635\u957f\u8fd9\u4e2a\u6837\u5b50\uff1a\n\n$ \\begin{vmatrix}\n1  &1  &1  &1  &1  &1  &1  &1  &1  &1\n\\end{vmatrix} $\n\n\u4e00\u4e2a\u5c0f\u7ec6\u8282\uff1a\u7531\u4e8e\u521d\u59cb\u77e9\u9635\u7684\u6570\u91cf\u5c31\u662f\u4e00\u9636Sam\u6570\u7684\u6570\u91cf\uff0c\u6240\u4ee5\u77e9\u9635\u5feb\u901f\u5e42\u7684\u6b21\u6570\u4e3a $ k-1 $ \u6b21\u5f97\u5230\u7684\u624d\u662f $ k $ \u9636Sam\u6570\uff0c\u5e76\u4e0d\u9700\u8981\u8fdb\u884c\u7b2c $ k $ \u6b21\u5feb\u901f\u5e42\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c31\u628a\u8fd9\u9053\u9898\u89e3\u51b3\u4e86\uff0c\u5982\u679c\u6709\u4e0d\u4f1a\u6253\u77e9\u9635\u5feb\u901f\u5e42\u7684\u5404\u4f4d\u540c\u5b66\u53ef\u4ee5\u53bb\u770b[\u6211\u7684\u535a\u5ba2](https://www.luogu.com.cn/blog/wuyanru/guan-yu-ju-zhen)\uff0c\u91cc\u9762\u6709\u5173\u4e8e\u77e9\u9635\u7684\u4ee3\u7801\u3002\n\nAC\u4ee3\u7801\uff1a\n\n```\n#include<cstring>\n#include<cstdio>\n#define mod (int)(1e9+7)\nusing namespace std;\nstruct mat {//\u624b\u6253\u4e86\u4e00\u5929\u7684\u77e9\u9635\n\tint m,n;\n\tlong long a[11][11];\n\tmat operator + (mat b) {\n\t\tmat ans;\n\t\tmemset(ans.a,0,sizeof(ans.a));\n\t\tans.m=m,ans.n=n;\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\tans.a[i][j]=a[i][j]+b.a[i][j];\n\t\treturn ans;\n\t}\n\tvoid operator += (mat b) {\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\ta[i][j]+=b.a[i][j];\n\t}\n\tmat operator - (mat b) {\n\t\tmat ans;\n\t\tmemset(ans.a,0,sizeof(ans.a));\n\t\tans.m=m,ans.n=n;\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\tans.a[i][j]=a[i][j]-b.a[i][j];\n\t\treturn ans;\n\t}\n\tvoid operator -= (mat b) {\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\ta[i][j]-=b.a[i][j];\n\t}\n\tmat operator * (mat b) {\n\t\tmat ans;\n\t\tmemset(ans.a,0,sizeof(ans.a));\n\t\tans.m=m;\n\t\tans.n=b.n;\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=b.n; j++)\n\t\t\t\tfor(int p=1; p<=n; p++)\n\t\t\t\t\tans.a[i][j]+=(a[i][p]*b.a[p][j]),ans.a[i][j]%=mod;\n\t\treturn ans;\n\t}\n\tvoid operator *= (mat b) {\n\t\t(*this)=(*this)*b;\n\t}\n\tmat operator ^ (long long t) {\n\t\tmat ans,num;\n\t\tans.m=ans.n=m;\n\t\tnum=(*this);\n\t\tmemset(ans.a,0,sizeof(ans.a));\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tans.a[i][i]=1;\n\t\twhile(t) {\n\t\t\tif(t&1)\n\t\t\t\tans=ans*num;\n\t\t\tnum=num*num;\n\t\t\tt>>=1;\n\t\t}\n\t\treturn ans;\n\t}\n\tvoid operator ^= (long long t) {\n\t\t(*this)=(*this)^t;\n\t}\n\tmat operator % (long long t) {\n\t\tmat ans;\n\t\tans.m=m,ans.n=n;\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\tans.a[i][j]=a[i][j]%t;\n\t\treturn ans;\n\t}\n\tvoid operator = (mat b) {\n\t\tm=b.m,n=b.n;\n\t\tfor(int i=1; i<=b.m; i++)\n\t\t\tfor(int j=1; j<=b.n; j++)\n\t\t\t\ta[i][j]=b.a[i][j];\n\t}\n\tbool operator == (mat b) {\n\t\tif(m!=b.m||n!=b.n)\n\t\t\treturn false;\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\tif(a[i][j]!=b.a[i][j])\n\t\t\t\t\treturn false;\n\t\treturn true;\n\t}\n\tvoid inn() {\n\t\tscanf(\"%d\",&n);\n\t}\n\tvoid inm() {\n\t\tscanf(\"%d\",&m);\n\t}\n\tvoid innn() {\n\t\tinm();\n\t\tn=m;\n\t}\n\tvoid inmn() {\n\t\tinm();\n\t\tinn();\n\t}\n\tvoid ina() {\n\t\tfor(int i=1; i<=m; i++)\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\tscanf(\"%lld\",&a[i][j]);\n\t}\n\tvoid in() {\n\t\tinmn();\n\t\tina();\n\t}\n\tvoid outm() {\n\t\tprintf(\"%d\\n\",m);\n\t}\n\tvoid outn() {\n\t\tprintf(\"%d\\n\",n);\n\t}\n\tvoid outmn() {\n\t\tprintf(\"%d %d\\n\",m,n);\n\t}\n\tvoid outa() {\n\t\tfor(int i=1; i<=m; i++) {\n\t\t\tfor(int j=1; j<=n; j++)\n\t\t\t\tprintf(\"%lld \",a[i][j]);\n\t\t\tprintf(\"\\n\");\n\t\t}\n\t}\n\tvoid out() {\n\t\toutmn();\n\t\touta();\n\t}\n};\nmat num,ans;\nint main() {\n\tlong long n;\n\tscanf(\"%lld\",&n);\n\tif(n==1ll)//\u7279\u5224k=1\u7684\u60c5\u51b5\n\t{\n\t    printf(\"10\");\n\t    return 0;\n    }\n\tmemset(ans.a,0,sizeof(ans.a));//\u8bb0\u5f97\u6e05\u7a7a\u3002\n\tmemset(num.a,0,sizeof(num.a));\n\tans.m=1,ans.n=10;\n\tfor(int i=1; i<=10; i++)\n\t\tans.a[1][i]=1;//\u521d\u59cb\u77e9\u9635\u521d\u59cb\u5316\n\tnum.m=num.n=10;\n\tfor(int i=1; i<=10; i++)\n\t\tfor(int j=i-2; j<=i+2; j++) {\n\t\t\tif(j<1)\n\t\t\t\tcontinue;\n\t\t\tif(j>10)\n\t\t\t\tbreak;\n\t\t\tnum.a[i][j]=1;//\u5feb\u901f\u5e42\u77e9\u9635\u521d\u59cb\u5316\n\t\t}\n\tnum=num^(n-1);//\u5feb\u901f\u5e42\n\tans=ans*num;//\u4e0e\u521d\u59cb\u77e9\u9635\u76f8\u4e58\n\tlong long ansn=0;\n\tfor(int i=2; i<=10; i++)//\u7531\u4e8e\u6570\u5b57\u4e0d\u8ba1\u7b97\u524d\u5bfc0\uff0c\u6240\u4ee5\u4e0d\u8981\u52a0\u4e0a\u5f00\u5934\u4e3a0\u7684\u6570\u5b57\n\t\t(ansn+=ans.a[1][i])%=mod;\n\tprintf(\"%lld\",ansn);\n\treturn 0;\n}\n```\n\n\u51e0\u4e2a\u5c0f\u7ec6\u8282\uff1a\n\n1.  \u8bfb\u5165 $ k $ \u7684\u65f6\u5019\u8bb0\u5f97\u4f7f\u7528 long long \u7c7b\u578b\uff1b\n\n2.  \u77e9\u9635\u5feb\u901f\u5e42\u6b21\u6570\u4e3a $ k-1 $,\u4e0d\u8981\u5f04\u9519\u3002\n\n3.  \u8ba1\u7b97\u6570\u91cf\u7684\u65f6\u5019\u4e0d\u8ba1\u7b97\u524d\u5bfc0\uff0c\u8bb0\u5f97\u4e0d\u8981\u52a0\u4e0a\u7b54\u6848\u77e9\u9635\u4e2d\u7684\u7b2c\u4e00\u9879\u3002\n\n4.  \u8bb0\u5f97\u7279\u5224 $ k=1 $ \u7684\u60c5\u51b5\uff0c\u56e0\u4e3a $ 0 $ \u4e5f\u662f\u4e00\u4e2aSam\u6570\u3002\n\n5.  \u8bb0\u5f97\u53d6\u6a21\uff0c\u5230\u5904\u90fd\u8981\u53d6\u6a21\uff0c\u4e5f\u4e0d\u8981\u628a\u6a21\u6570\u5199\u9519\u3002\n\n\u611f\u8c22\u89c2\u770b\uff01",
        "postTime": 1618290956,
        "uid": 400201,
        "name": "Wuyanru",
        "ccfLevel": 7,
        "title": "P2106 Sam\u6570"
    },
    {
        "content": "#### P\u515a\u7684\u798f\u5229\n\u770b\u5230\u9898\u76ee\n\n## \u6211\u4eec\u7684\u7b2c\u4e00\u611f\u89c9\u662f\u66b4\u529b\n\n\u6240\u4ee5\u8eab\u4e3a\u849f\u84bb\u7684\u6211\u6253\u4e86\u4e2aDFS\n\n\u601d\u8def\u5f88\u597d\u60f3\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8d58\u8ff0\u4e86\n\n\u4ee3\u7801\u5982\u4e0b\uff08\u7279\u5224\u5c31\u4e0d\u5199\u4e86\uff09\uff1a\n\n```pascal\nvar n,i,j,l,r,x:longint;\n    s:int64;\nfunction max(x,y:longint):longint;\nbegin\n  if x>y then\n   exit(x);\n  exit(y);\nend;\nfunction min(x,y:longint):longint;\nbegin\n  if x<y then\n   exit(x);\n  exit(y);\nend;\nprocedure ss(x,k:int64);\nvar i:longint;\nbegin\n  if k=n then\n   begin\n    inc(s);\n    exit;\n   end;\n  for i:=max(0,x mod 10-2) to min(9,x mod 10+2) do\n   begin\n    ss(x*10+i,k+1);\n   end;\nend;\nbegin\n  read(n);\n  s:=0;\n  for i:=1 to 9 do\n   ss(i,1);\n  writeln(s);\nend.\n```\n\u8ba1\u7b97\u65f6\u95f4\u590d\u6742\u5ea6\n\n\u592a\u5927\u4e86\u62dc\u62dc\n\n\u5b9e\u6d4b\u8fc7n=11\u5de6\u53f3\uff08\u7535\u8111\u8dd1\u7684\u6bd4\u8f83\u5feb\uff09\n## \u63a5\u4e0b\u6765\u6211\u4eec\u53ef\u4ee5\u987a\u5229\u60f3\u51faDP\n\u65b9\u7a0b\u662ff[i][j]={f[i-1][k]|k=max(0,j-2)~min(9,j+2)}\n### \u6ce8\u610f\uff1a\u6211\u4eec\u8ba1\u7b97\u7b54\u6848\u7684\u65f6\u5019\u7edf\u8ba11~9\u7684f[]\u503c\n\u6b63\u786e\u6027\u8bc1\u660e\uff1a\n\n\u56e0\u4e3a\u6211\u4eec\u77e5\u9053\u6bcf\u4e2asam\u6570\u7684\u76f8\u90bb\u4e24\u4f4d\u7684\u6570\u5b57\u4e4b\u5dee\u4e0d\u8d85\u8fc7 2\n\n\u53c8\u56e0\u4e3a\u6211\u4eec\u524d\u9762\u6c42\u51fa\u7684\u4e5f\u90fd\u662fsam\u6570\n\n\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7edf\u8ba1\u4e0b\u4e00\u4f4d\u5408\u6cd5\u7684sam\u6570\n\n\u7531\u4e8ei\u8fd9\u7ef4\u53ef\u4ee5\u6eda\u6389\uff0c\u6240\u4ee5\u6211\u4eec\u6570\u7ec4\u53ea\u8981\u5f000~9\u5c31\u53ef\u4ee5\u4e86\n\n### \u6ce8\u610f\uff1a\u66f4\u65b0i\u65f6\u8981\u6e05\u7a7a\u6570\u7ec4\n\u4ee3\u7801\u5982\u4e0b\uff08\u7279\u5224\u4e5f\u4e0d\u5199\u4e86\uff09\uff1a\n```pascal\nconst mo=1000000007;\nvar n,i,j,l,r,x:longint;\n    s:int64;\n    f,ff:array[0..9] of int64;\nfunction max(x,y:longint):longint;\nbegin\n  if x>y then\n   exit(x);\n  exit(y);\nend;\nfunction min(x,y:longint):longint;\nbegin\n  if x<y then\n   exit(x);\n  exit(y);\nend;\nbegin\n  read(n);\n  for i:=0 to 9 do\n   f[i]:=1;\n  for i:=2 to n do\n   begin\n    fillchar(ff,sizeof(ff),0);\n    for j:=0 to 9 do\n     begin\n      l:=max(0,j-2);r:=min(j+2,9);\n      for x:=l to r do\n       ff[j]:=(ff[j]+f[x]) mod mo;\n     end;\n    f:=ff;\n   end;\n  s:=0;\n  for i:=1 to 9 do\n   s:=(s+f[i]) mod mo;\n  writeln(s);\nend.\n```\n## \u63a5\u4e0b\u6765\u6211\u4eec\u8981\u6b65\u5165\u6b63\u89e3\u4e86\n\u7531\u4e8e\u8fd9\u9898\u6570\u636e\u8303\u56f4\u4e3a10^18\n\nO(n)\u7684DP\u4e5f\u8fc7\u4e0d\u4e86\n\n\u53ea\u80fd\u8fc730\u5de6\u53f3\n### \u6240\u4ee5\u6211\u4eec\u8981\u4f7f\u7528\u77e9\u9635\u4f18\u5316\n\u77e9\u9635\u5feb\u901f\u5e42\u4e0d\u4f1a\u7684\u540c\u5b66\u5148\u770b\u4e0b[\u6a21\u677f](https://www.luogu.org/problemnew/show/P3390)\n\n\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u521d\u59cb\u77e9\u9635\u957f\u8fd9\u4e2a\u6837\u5b50\uff08\u5176\u5b9e\u5c31\u662f\u8f6c\u79fb\u65b9\u7a0b\u91cc\u7684i\uff0cj\u5566\uff09\uff08i\u662f\u7ad6\u7684\uff0cj\u662f\u6a2a\u7684\uff09\n![](https://cdn.luogu.com.cn/upload/pic/27508.png)\n\u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u4f7f\u7528**\u77e9\u9635\u5feb\u901f\u5e42\u6765\u7b97\u51fa\u8fd9\u4e2a\u77e9\u9635\u7684k\u6b21\u65b9**\n\n\u7136\u540e\u95ee\u9898\u5c31\u89e3\u51b3\u5566\n\n\u6211\u4eec\u53ea\u8981\u7528\u7b97\u51fa\u7684\u8fd9\u4e2a\u77e9\u9635\u518d\u4e58\u8fd9\u4e2a\u5c0f\u77e9\u9635\n\n![](https://cdn.luogu.com.cn/upload/pic/27511.png)\n\n\u7136\u540e\u7d2f\u8ba1\u7b54\u6848\u5c31\u597d\u4e86\uff08\u5176\u5b9e\u4e0d\u7528\u4e5f\u53ef\u4ee5\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u4e58\u4e86\u4e4b\u540e\u76f8\u5f53\u4e8e\u628a\u6574\u4e2a\u77e9\u9635\u7684\u503c\u5168\u52a0\u8d77\u6765\uff0c\u4f46\u662f\u5927\u591a\u65f6\u5019\u8fd9\u4e2a\u5c0f\u77e9\u9635\u4e0d\u662f\u51681\uff0c\u6240\u4ee5\u8fd8\u662f\u7528\u6bd4\u8f83\u597d\uff09\n### \u6ce8\u610f\uff1a\u522b\u5fd8\u4e86\u6211\u4eec\u8ba1\u7b97\u7b54\u6848\u7684\u65f6\u5019\u7edf\u8ba11~9\u7684f[]\u503c\n\u6700\u540e\u7684\u4ee3\u7801\u5982\u4e0b\uff08\u7279\u5224\u52a0\u4e0a\uff09\uff1a\n```pascal\ntype arr=array[0..101,0..101] of int64;\nconst mo=1000000007;\nvar n,i,j:longint;\n    k,s:int64;\n    x,a,ans:arr;\nfunction cheng(a,b:arr):arr;\nvar i,j,k:longint;\n    c:arr;\nbegin\n  fillchar(c,sizeof(c),0);\n  for i:=0 to 9 do\n   for j:=0 to 9 do\n    for k:=0 to 9 do\n     c[i,j]:=(c[i,j]+a[i,k]*b[k,j]) mod mo;\n  exit(c);\nend;\nbegin\n  read(k);\n  if k=1 then\n   begin\n    writeln(10);\n    halt;\n   end;\n  for i:=0 to 9 do\n   for j:=0 to 9 do\n    if abs(i-j)<=2 then\n     a[i,j]:=1\n    else\n     a[i,j]:=0;\n  for i:=0 to 9 do\n   ans[i,i]:=1;\n  dec(k);\n  while k>0 do\n   begin\n    if k mod 2=1 then\n     ans:=cheng(ans,a);\n    a:=cheng(a,a);\n    k:=k div 2;\n   end;\n  for i:=0 to 9 do\n   x[i,0]:=1;\n  x:=cheng(ans,x);\n  for i:=1 to 9 do\n   s:=(s+x[i,0]) mod mo;\n  writeln(s);\nend.\n```\nPS:\u4ee3\u7801\u5de8\u4e11\uff0c\u5927\u4f6c\u89c1\u8c05\u3002",
        "postTime": 1533797237,
        "uid": 22913,
        "name": "Dawn_Chase",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2106 \u3010Sam\u6570\u3011"
    }
]
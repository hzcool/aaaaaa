[
    {
        "content": "## \u7ebf\u6bb5\u6811\uff1f \u4e0d\u7528\u5427\n\u8fd8\u662f\u8981\u5206\u6210C\u4e2a\u5e8f\u5217\u6765\u5904\u7406\\\n\u6211\u7684\u601d\u8def\u662f\u5c06\u6bcf\u4e2a\u5e8f\u5217\u5206\u6210k\u4e2a\u989c\u8272\u76f8\u540c\u7684\u5757\uff0c\u7136\u540e\u6bcf\u4e2a\u5757\u90fd\u7b97\u4e00\u4e0b\u6709\u51e0\u4e2a\u6ee1\u8db3\u8981\u6c42\u5c31\u884c\u4e86\u3002\\\n\u5177\u4f53\u5c31\u662f\u7528\u961f\u5217\uff0c\u5b58\u4e09\u4e2a\u53d8\u91cfl,r,g,\u5206\u522b\u8868\u793a\u8fd9\u4e2a\u5757\u7684\u5de6\u7aef\u70b9\uff0c\u53f3\u7aef\u70b9\u548c\u989c\u8272\uff0c\u6bcf\u6b21\u8be2\u95ee\u5c31\u8fc7\u4e00\u904d\uff0c\u5c06\u8981\u52a0\u5165\u7684\u4e00\u6bb5\u989c\u8272\u52a0\u5165\uff0c\u518d\u5206\u7c7b\u8ba8\u8bba\u539f\u6709\u5757\u548c\u52a0\u5165\u5757\u7684\u4f4d\u7f6e\u5173\u7cfb\u4fdd\u8bc1\u4e00\u4e2a\u70b9\u4e0d\u51fa\u73b0\u5728\u4e24\u4e2a\u5757\u91cc\u5c31\u884c\u4e86\u3002\\\nps\uff1a\u4e3a\u4e86\u63d0\u5347\u8fd0\u7b97\u7684\u901f\u5ea6\uff0c\u8981\u5c06\u961f\u5217\u4e2d\u76f8\u90bb\u7684\u989c\u8272\u4e00\u6837\u7684\u5757\u5408\u5e76\u3002\\\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u4ffa\u4e5f\u4e0d\u77e5\u9053\uff0c\u53cd\u6b63\u8fc7\u4e86\u3002\\\n\u4ee3\u7801\u7565\u957f\uff08\u53cd\u6b63\u5206\u7c7b\u8ba8\u8bba\u5199\u4e86\u4e00\u79cd\u60c5\u51b5\u5c31\u53ef\u4ee5\u590d\u5236\u7c98\u8d34\u4e86\uff09\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint R,C,q,sum[16][50010],que[16][2][50010][3],len[16];\nint main()\n{\n\tscanf(\"%d%d%d\",&R,&C,&q);\n\tfor(int i=1;i<=R;i++)\n\t{\n\t\tgetchar();\n\t\tfor(int j=1;j<=C;j++)\n\t\t{\n\t\t\tbool tmp=getchar()-'0';\n\t\t\tsum[j][i]=sum[j][i-1]+tmp;\n\t\t}\n\t}\n\tfor(int i=1;i<=C;i++)\n\t{\n\t\tque[i][0][1][0]=1;\n\t\tque[i][0][1][1]=R;\n\t\tque[i][0][1][2]=0;\n\t\tlen[i]=1;\n\t}//\u4e00\u5f00\u59cb\u53ea\u6709\u4e00\u4e2a\u5757\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tbool nw=i%2;\n\t\tint x1,x2,y1,y2,kd;\n\t\tscanf(\"%d%d%d%d%d\",&x1,&x2,&y1,&y2,&kd);\n\t\tfor(int j=1;j<y1;j++)\n\t\t{\n\t\t\tfor(int e=1;e<=len[j];e++)\n\t\t\t{\n\t\t\t\tque[j][nw][e][0]=que[j][!nw][e][0];\n\t\t\t\tque[j][nw][e][1]=que[j][!nw][e][1];\n\t\t\t\tque[j][nw][e][2]=que[j][!nw][e][2];\n\t\t\t}\n\t\t}\n\t\tfor(int j=y2+1;j<=C;j++)\n\t\t{\n\t\t\tfor(int e=1;e<=len[j];e++)\n\t\t\t{\n\t\t\t\tque[j][nw][e][0]=que[j][!nw][e][0];\n\t\t\t\tque[j][nw][e][1]=que[j][!nw][e][1];\n\t\t\t\tque[j][nw][e][2]=que[j][!nw][e][2];\n\t\t\t}\n\t\t}\n\t\tfor(int j=y1;j<=y2;j++)\n\t\t{\n\t\t\tint tmp=0;\n\t\t\tfor(int e=1;e<=len[j];e++)\n\t\t\t{\n\t\t\t\tbool hv=0;\n\t\t\t\tint l=que[j][!nw][e][0],r=que[j][!nw][e][1];\n\t\t\t\tif(l>=x1&&r<=x2) hv=1;//\u88ab\u8981\u52a0\u5165\u7684\u5757\u538b\u4f4f\u4e86\u5c31\u53ef\u4ee5\u4e0d\u7ba1\u4e86\n\t\t\t\tif(x1==l)\n\t\t\t\t{\n\t\t\t\t\thv=1;\n\t\t\t\t\tif(tmp!=0&&que[j][nw][tmp][2]==kd) que[j][nw][tmp][1]=x2;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tque[j][nw][++tmp][2]=kd;\n\t\t\t\t\t\tque[j][nw][tmp][1]=x2;\n\t\t\t\t\t\tque[j][nw][tmp][0]=x1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(que[j][!nw][e][1]>=x1&&que[j][!nw][e][0]<x1)\n\t\t\t\t{\n\t\t\t\t\thv=1;\n\t\t\t\t\tque[j][nw][++tmp][0]=que[j][!nw][e][0];\n\t\t\t\t\tque[j][nw][tmp][1]=x1-1;\n\t\t\t\t\tque[j][nw][tmp][2]=que[j][!nw][e][2];\n\t\t\t\t\tif(tmp!=0&&que[j][nw][tmp][2]==kd) que[j][nw][tmp][1]=x2;\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tque[j][nw][++tmp][2]=kd;\n\t\t\t\t\t\tque[j][nw][tmp][1]=x2;\n\t\t\t\t\t\tque[j][nw][tmp][0]=x1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(que[j][!nw][e][1]>x2&&que[j][!nw][e][0]<=x2)\n\t\t\t\t{\n\t\t\t\t\tif(tmp!=0&&que[j][nw][tmp][2]==que[j][!nw][e][2])\n\t\t\t\t\t{\n\t\t\t\t\t\tque[j][nw][tmp][1]=r;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tque[j][nw][++tmp][0]=x2+1;\n\t\t\t\t\tque[j][nw][tmp][1]=r;\n\t\t\t\t\tque[j][nw][tmp][2]=que[j][!nw][e][2];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif(hv) continue;//\u4ee5\u4e0a\u662f\u5206\u7c7b\u8ba8\u8bba\n\t\t\t\tif(tmp!=0&&que[j][!nw][e][2]==que[j][nw][tmp][2]) que[j][nw][tmp][1]=r;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tque[j][nw][++tmp][0]=l;\n\t\t\t\t\tque[j][nw][tmp][1]=r;\n\t\t\t\t\tque[j][nw][tmp][2]=que[j][!nw][e][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tlen[j]=tmp;\n\t\t}\n\t\tint ans=0;\n\t\tfor(int j=1;j<=C;j++)\n\t\t{\n\t\t\tfor(int e=1;e<=len[j];e++)\n\t\t\t{\n\t\t\t\tint tmp=sum[j][que[j][nw][e][1]]-sum[j][que[j][nw][e][0]-1];\n\t\t\t\tif(que[j][nw][e][2]) ans+=tmp;\n\t\t\t\telse ans+=(que[j][nw][e][1]-que[j][nw][e][0]+1-tmp);\n\t\t\t}\n\t\t}\n\t\tprintf(\"%d\\n\",ans);\n\t}\n}\n```\n",
        "postTime": 1568346111,
        "uid": 114230,
        "name": "\u9893_\u5e9f_\u4eba",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2930 \u3010[USACO09HOL]\u5047\u671f\u7ed8\u753bHoliday Painting\u3011"
    },
    {
        "content": " _\u5199\u4e86\u4e00\u665a\u4e0a\u7684\u9898~~_ \n\n\u89c2\u5bdf\u5230\u5217\u6570\u53ea\u670915,\u53ef\u4ee5\u60f3\u5230\u5bf9\u4e8e\u6bcf\u4e00\u5217\u7ef4\u62a4\u4e00\u9897\u7ebf\u6bb5\u6811\n\n**sum\u8868\u793a\u8be5\u533a\u95f4\u4e0e\u76ee\u6807\u77e9\u9635\u4e2d\u8be5\u533a\u95f4\u76f8\u540c\u5143\u7d20\u4e2a\u6570**\n\n**lazy\u8868\u793a\u8be5\u533a\u95f4\u5e94\u88ab\u4fee\u6539\u6210\u4ec0\u4e48\u989c\u8272**\n\n**g\u5373\u76ee\u6807\u77e9\u9635\u4e2d\u8be5\u533a\u95f4\u767d\u8272\u683c\u5b50\u7684\u4e2a\u6570**\n\n\u663e\u7136\u4e00\u4e2a\u533a\u95f4\u7684sum=\u533a\u95f4\u957f\u5ea6-g(\u4fee\u6539\u4e3a0\u65f6) \u6216 g(\u4fee\u6539\u4e3a1\u65f6)\n\n```\n#define RG register\n#include<cstdio>\nusing namespace std;\nconst int N=50005;\nint n,m,q,X,Ans;\nint a[N][16];\ninline int read()\n{\n\tRG int x=0,w=1;RG char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')x=x*10+ch-'0',ch=getchar();\n\treturn x*w;\n}\nstruct segment{\n\tint sum[N<<2],lazy[N<<2],g[N<<2];\n\tinline void Pushup(int rt){sum[rt]=sum[rt<<1]+sum[rt<<1|1];}\n\tvoid Build(int rt,int l,int r,int k){\n\t\tif(l==r)\n\t\t{\n\t\t\tsum[rt]=a[l][k]^1;\n\t\t\tg[rt]=a[l][k];\n\t\t\treturn;\n\t\t}\n\t\tint mid=(l+r)>>1;\n\t\tBuild(rt<<1,l,mid,k);\n\t\tBuild(rt<<1|1,mid+1,r,k);\n\t\tPushup(rt);\n\t\tg[rt]=g[rt<<1]+g[rt<<1|1];\n\t}\n\tinline void Pushdown(int rt,int s){//s\u5373\u533a\u95f4\u957f\u5ea6\n\t\tint t=lazy[rt];\n\t\tif(t==-1)return;\n\t\tif(!t)\n\t\t{\n\t\t\tsum[rt<<1]=(s-(s>>1))-g[rt<<1];\n\t\t\tsum[rt<<1|1]=(s>>1)-g[rt<<1|1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsum[rt<<1]=g[rt<<1];\n\t\t\tsum[rt<<1|1]=g[rt<<1|1];\n\t\t}\n\t\tlazy[rt<<1]=lazy[rt<<1|1]=t;\n\t\tlazy[rt]=-1;\n\t}\n\tvoid Modify(int rt,int l,int r,int ll,int rr){\n\t\tif(ll<=l&&r<=rr)\n\t\t{\n\t\t\tif(X)sum[rt]=g[rt];\n\t\t\telse sum[rt]=r-l+1-g[rt];\n\t\t\tlazy[rt]=X;\n\t\t\treturn;\n\t\t}\n\t\tPushdown(rt,r-l+1);\n\t\tint mid=(l+r)>>1;\n\t\tif(ll<=mid)Modify(rt<<1,l,mid,ll,rr);\n\t\tif(rr>mid)Modify(rt<<1|1,mid+1,r,ll,rr);\n\t\tPushup(rt);\n\t}\n}T[16];\nint main()\n{\n\tn=read();\n\tm=read();\n\tq=read();\n\tRG char c;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tc=getchar();\n\t\t\twhile(c!='0'&&c!='1')c=getchar();\n\t\t\ta[i][j]=c-'0';\n\t\t}\n\tfor(int i=1;i<=m;i++)T[i].Build(1,1,n,i);\n\tRG int x1,x2,y1,y2;\n\twhile(q--)\n\t{\n\t\tx1=read();\n\t\tx2=read();\n\t\ty1=read();\n\t\ty2=read();\n\t\tX=read();\n\t\tfor(int i=y1;i<=y2;i++)T[i].Modify(1,1,n,x1,x2);\n\t\tAns=0;\n\t\tfor(int i=1;i<=m;i++)Ans+=T[i].sum[1];\n\t\tprintf(\"%d\\n\",Ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1526998803,
        "uid": 59646,
        "name": "\u4e2d\u56fd\u98de\u9c7c",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2930 \u3010[USACO09HOL]\u5047\u671f\u7ed8\u753bHoliday Painting\u3011"
    },
    {
        "content": "\u6765\u4e00\u53d1\u9898\u89e3~\n\n\u5176\u5b9e\u662f\u4e00\u9053\u6bd4\u8f83\u6c34\u7684\u7ebf\u6bb5\u6811\uff08\u867d\u7136\u672c\u4eba\u4e00\u5f00\u59cb\u70b8\u4e86\u597d\u51e0\u6b21\u3002\u3002\u3002\n\n\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u7684\u662f\u67d0\u4e2a\u533a\u95f4\u5185\u7b26\u5408\u8981\u6c42\u7684\u683c\u5b50\u4e2a\u6570\uff0c\u9996\u5148\u9700\u8981\u4e00\u4e2a\u524d\u7f00\u548c\u7684\u6570\u7ec4\uff0cs[i][j][0/1]\u8868\u793a\u7684\u662f\u7b2ci\u5217\u524dj\u884c\uff0c0\u7684\u4e2a\u6570/1\u7684\u4e2a\u6570\u3002\n\n\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e2a\u533a\u95f4\u7531\u4e8e\u6211\u4eec\u662f\u628a\u533a\u95f4\u8986\u76d6\u6210\u51680\u6216\u51681\uff0c\u56e0\u6b64\u5c31\u53ef\u4ee5\u7528s\u6570\u7ec4\u6765\u7ef4\u62a4\u8fd9\u4e2a\u7ebf\u6bb5\u6811\uff0c\u7ef4\u62a4\u4e00\u4e0b\u533a\u95f4\u548c\u5c31\u597d\u4e86\uff0c\u8981\u52a0\u61d2\u6807\u8bb0\u3002\n\n\u8be6\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<cctype>\n#define mid (l+r)/2\n#define lc o<<1\n#define rc o<<1|1\nusing namespace std;\n\ninline int read()\n{\n    char ch = getchar(); int x = 0, flag = 0;\n    while (!isdigit(ch)){ if (ch == '-') flag = 1; ch = getchar(); }\n    while (isdigit(ch)){ x = x * 10 + ch - '0'; ch = getchar(); }\n    return flag ? -x : x;\n}\n\ninline void write(int a){ if (a >= 10) write(a/10); putchar('0'+a%10); }\ninline void writeln(int a){ write(a); puts(\"\"); }\n\nconst int N = 50010, M = 20;\nint n, m, q, ans = 0;\nchar a[N][M];\nint s[M][N][2];\n\nstruct Tree{\n    int c[N<<2], lazy[N<<2];\n}T[M];\n\ninline void build(int id, int o, int l, int r)\n{\n    if (l == r){\n        T[id].c[o] = s[id][l][0]-s[id][l-1][0];\n        return;\n    }\n    build(id, lc, l, mid);\n    build(id, rc, mid+1, r);\n    T[id].c[o] = T[id].c[lc] + T[id].c[rc];\n}\n\ninline void pushdown(int id, int o, int l, int r)\n{\n    int t = T[id].lazy[o];\n    T[id].c[lc] = s[id][mid][t] - s[id][l-1][t];\n    T[id].c[rc] = s[id][r][t] - s[id][mid][t];\n    T[id].lazy[lc] = t;\n    T[id].lazy[rc] = t;\n    T[id].lazy[o] = -1;\n}\n\ninline void update(int id, int o, int l, int r, int x, int y, int v)\n{\n    if (x <= l && y >= r){\n        T[id].c[o] = s[id][r][v] - s[id][l-1][v];\n        T[id].lazy[o] = v;\n        return;\n    }\n    if (T[id].lazy[o] != -1) pushdown(id, o, l, r);\n    if (x <= mid) update(id, lc, l, mid, x, y, v);\n    if (y > mid) update(id, rc, mid+1, r, x, y, v);\n    T[id].c[o] = T[id].c[lc] + T[id].c[rc];\n}\n\nint main()\n{\n    n = read(), m = read(), q = read();\n    for (int i = 1; i <= n; i ++) scanf(\"%s\", a[i]+1);\n    for (int i = 1; i <= m; i ++)\n        for (int j = 1; j <= n; j ++){\n            s[i][j][0] = s[i][j-1][0] + (a[j][i] == '0');\n            s[i][j][1] = s[i][j-1][1] + (a[j][i] == '1');\n        }\n    for (int i = 1; i < M; i ++)\n        for (int j = 1; j < N<<2; j ++) T[i].lazy[j] = -1;\n    for (int i = 1; i <= m; i ++) build(i, 1, 1, n);\n    while (q --){\n        int r1, r2, c1, c2, x;\n        r1 = read(), r2 = read(), c1 = read(), c2 = read(), x = read();\n        for (int i = c1; i <= c2; i ++) update(i, 1, 1, n, r1, r2, x);\n        ans = 0;\n        for (int i = 1; i <= m; i ++) ans += T[i].c[1];\n        writeln(ans);\n    }\n    return 0;\n}\n```",
        "postTime": 1508238937,
        "uid": 19722,
        "name": "fy0123",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2930 \u3010[USACO09HOL]\u5047\u671f\u7ed8\u753bHoliday Painting\u3011"
    },
    {
        "content": "\u663e\u7136\u662f\u6bcf\u6b21\u64cd\u4f5c\u540e\u7edf\u8ba1\u8d21\u732e\u3002\n\n\u770b\u5230 $C\\le 15$ \u679c\u65ad\u9009\u62e9\u7ef4\u62a4 $C$ \u4e2a\u540c\u4e00\u7c7b\u6570\u636e\u7ed3\u6784\u652f\u6301\u8fd9\u4e2a\u64cd\u4f5c\u3002\n\n\u7136\u540e\u5c31\u53d8\u6210\u4e86\u5e8f\u5217\u4e0a\u7684\u64cd\u4f5c\u3002\n\n\u7528\u73c2\u6735\u8389\u6811\u505a\u76f8\u5f53\u7b80\u5355\u3002\u5bf9\u4e8e\u4e00\u4e2a\u8fde\u7eed\u6bb5\uff0c\u7edf\u8ba1\u5176\u4e0e\u201c\u76ee\u6807\u753b\u201d\u7684\u4e0d\u540c\u7684\u6570\u7684\u6570\u91cf\u3002\u82e5\u6b64\u8fde\u7eed\u6bb5\u4e3a $1$ \u5219\u4e3a\u76ee\u6807\u8fd9\u6bb5\u533a\u95f4\u4e2d $0$ \u7684\u4e2a\u6570\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\n\n\u7ef4\u62a4\u76ee\u6807\u7684\u524d\u7f00\u548c\u5373\u53ef\u3002\n\n\u6bcf\u6b21\u63a8\u5e73\u7684\u65f6\u5019\u51cf\u53bb\u533a\u95f4\u4e2d\u8fde\u7eed\u6bb5\u7684\u8d21\u732e\uff0c\u518d\u52a0\u4e0a\u63a8\u5e73\u540e\u7684\u8d21\u732e\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6\u662f\u5bf9\u7684\u3002\u6bcf\u6b21 split \u589e\u52a0\u4e86\u5e38\u6570\u4e2a\u5143\u7d20\uff0c\u6bcf\u6b21\u904d\u5386\u540e\u5220\u9664\u6b64\u5143\u7d20\uff0c\u6240\u4ee5\u6bcf\u4e2a\u5143\u7d20\u6700\u591a\u88ab\u8bbf\u95ee\u4e00\u6b21\u3002\u603b\u8bbf\u95ee\u590d\u6742\u5ea6 $\\log q$\u3002\n\n\u603b\u590d\u6742\u5ea6 $RC+qC\\log q$\uff0c\u8dd1\u5f97\u633a\u5feb\u7684\u3002",
        "postTime": 1611651075,
        "uid": 203623,
        "name": "Ntokisq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2930 \u3010[USACO09HOL]Holiday Painting G\u3011"
    }
]
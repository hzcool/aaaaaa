[
    {
        "content": "\u5de8\u5927\u591a\u7b80\u5355\u9898\u3002\n\n\u4e24\u4e2a\u56fe\u6848\u76f8\u7b49\uff0c\u81f3\u5c11\u8981\u6ee1\u8db3\u5b83\u4eec\u7684\u70b9\u6570\u76f8\u7b49\uff0c\u8fd9\u91cc\u5c31\u6709\u4e00\u4e2a\u5355\u8c03\u6027\u3002\n\n\u8003\u8651\u53cc\u6307\u9488\uff0c\u5f53\u524d\u53f3\u7aef\u70b9\u626b\u63cf\u5230 $r$\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06\u5de6\u7aef\u70b9\u79fb\u52a8\u5230\u4f4d\u7f6e $l$ \u4f7f\u5f97 $[l,r]$ \u5185\u753b\u51fa\u7684\u56fe\u6070\u6709\u548c\u7ed9\u5b9a\u56fe\u6848\u4e00\u6837\u7684\u70b9\u6570\u3002\n\n\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u6709\u4e24\u4e2a\uff1a\n\n- \u5982\u4f55\u6c42\u5f53\u524d\u56fe\u6848\u7684\u70b9\u6570\uff1a\u4e0d\u59a8\u8bbe\u8d77\u70b9\u662f $(0,0)$\uff0c\u7531\u4e8e\u6211\u4eec\u53ea\u9700\u8981 $2n\\times 2m$ \u4e2a\u70b9\uff0c\u6240\u4ee5\u5bf9\u6bcf\u4e2a\u4f4d\u7f6e\u7ef4\u62a4\u5f53\u524d\u6709\u51e0\u7b14\u7ecf\u8fc7\u4e86\u5b83\uff0c\u4e8b\u5b9e\u4e0a\u66f4\u7b80\u5355\u7684\u5b9e\u73b0\u662f\u76f4\u63a5\u7528 map \u7ef4\u62a4\u6bcf\u4e2a\u4e8c\u5143\u7ec4\u6709\u51e0\u7b14\u7ecf\u8fc7\u5b83\uff0c\u5f53\u8fd9\u4e2a\u503c\u6e05\u96f6\u662f\u70b9\u6570\u51cf\u5c11 $1$\uff0c\u5f53\u8fd9\u4e2a\u503c\u4ece $0$ \u53d8\u6210 $1$ \u65f6\u70b9\u6570\u589e\u52a0 $1$\uff1b\n\n- \u5982\u679c\u6bd4\u8f83\u4e24\u4e2a\u56fe\u6848\uff1a\u9996\u5148\u6211\u4eec\u5c06\u5b83\u4eec\u5bf9\u9f50\uff1a\u8ba9\u5b83\u4eec\u7684\u5de6\u8fb9\u754c\u548c\u4e0a\u8fb9\u754c\u5206\u522b\u662f $x=0,y=0$\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u7528\u54c8\u5e0c\u6bd4\u8f83\u4e86\uff0c\u8bbe\u8ba1\u54c8\u5e0c\u65f6\u8981\u652f\u6301\u5e73\u79fb\uff0c\u6240\u4ee5\u5bf9 $(x,y)$ \u8bbe\u5b9a $a^xb^y$ \u7684\u54c8\u5e0c\u503c\u5c31\u6bd4\u8f83\u5408\u9002\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(nm+l\\log l)$\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN=100010,P1=998244353,P2=10000019,P3=1000000009;\nint inv1,inv2,l,m,n,cnt,cnt2,tot,hs,hs2,mnx,mny,cur,pos[MAXN],typ[MAXN],nx[MAXN],ny[MAXN];\nstring s;\nmultiset <int> mx,my;\nmap <pair<int,int>,int> mp;\nint qpow (int a,int b) {\n\tif (b<0) {b=P3-1+b;}\n\tint res=1;\n\twhile (b) {\n\t\tif (b&1) {res=(1ll*res*a)%P3;}\n\t\ta=(1ll*a*a)%P3,b>>=1;\n\t}\n\treturn res;\n}\nint calc () {\n\tint mnnx=*(mx.begin()),mnny=*(my.begin());\n\treturn (1ll*hs2*((1ll*qpow(inv1,mnnx)*qpow(inv2,mnny))%P3))%P3;\n}\nint main () {\n\tgetline(cin,s);\n\tint len=s.length();\n\tfor (int i=0;i<len;i++) {\n\t\tif (s[i]>='0'&&s[i]<='9') {l=l*10+s[i]-'0';}\n\t}\n\tgetline(cin,s);\n\tlen=s.length();\n\tnx[0]=ny[0]=0;\n\tfor (int i=0;i<len;i++) {\n\t\tif (s[i]=='u') {\n\t\t\tcnt++;\n\t\t\ttyp[cnt]=1,pos[cnt]=i+1,nx[cnt]=nx[cnt-1]-1,ny[cnt]=ny[cnt-1];\n\t\t} else if (s[i]=='d') {\n\t\t\tcnt++;\n\t\t\ttyp[cnt]=2,pos[cnt]=i+1,nx[cnt]=nx[cnt-1]+1,ny[cnt]=ny[cnt-1];\n\t\t} else if (s[i]=='l') {\n\t\t\tcnt++;\n\t\t\ttyp[cnt]=3,pos[cnt]=i+1,nx[cnt]=nx[cnt-1],ny[cnt]=ny[cnt-1]-1;\n\t\t} else if (s[i]=='r') {\n\t\t\tcnt++;\n\t\t\ttyp[cnt]=4,pos[cnt]=i+1,nx[cnt]=nx[cnt-1],ny[cnt]=ny[cnt-1]+1;\n\t\t}\n\t}\n\tscanf(\"%d%d\",&n,&m);\n\tmnx=n,mny=m;\n\tfor (int i=1;i<=n;i++) {\n\t\tcin >> s;\n\t\tfor (int j=0;j<m;j++) {\n\t\t\tif (s[j]=='X') {\n\t\t\t\tmnx=min(mnx,i),mny=min(mny,j+1),cnt2++;\n\t\t\t\ths=(hs+(1ll*qpow(P1,i)*qpow(P2,j+1))%P3)%P3;\n\t\t\t}\n\t\t}\n\t}\n\tinv1=qpow(P1,P3-2),inv2=qpow(P2,P3-2);\n\ths=(1ll*hs*((1ll*qpow(inv1,mnx)*qpow(inv2,mny))%P3))%P3;\n\ttot=1,hs2=1;\n\tmx.insert(0),my.insert(0);\n\tmp[make_pair(0,0)]=1;\n\twhile (cur<cnt&&tot<cnt2) {\n\t\tcur++;\n\t\tmx.insert(nx[cur]),my.insert(ny[cur]);\n\t\tif (mp.find(make_pair(nx[cur],ny[cur]))==mp.end()) {\n\t\t\ttot++;\n\t\t\tmp[make_pair(nx[cur],ny[cur])]=1;\n\t\t\ths2=(hs2+(1ll*qpow(P1,nx[cur])*qpow(P2,ny[cur]))%P3)%P3;\n\t\t} else if (mp[make_pair(nx[cur],ny[cur])]==0) {\n\t\t\tmp[make_pair(nx[cur],ny[cur])]=1;\n\t\t\ttot++;\n\t\t\ths2=(hs2+(1ll*qpow(P1,nx[cur])*qpow(P2,ny[cur]))%P3)%P3;\n\t\t} else {\n\t\t\tmp[make_pair(nx[cur],ny[cur])]++;\n\t\t}\n\t}\n\tif (calc()==hs) {\n\t\tprintf(\"YES\\n1 %d\\n\",pos[cur]);\n\t\treturn 0;\n\t}\n\tfor (int i=1;i<cnt;i++) {\n\t\tmx.erase(mx.find(nx[i-1])),my.erase(my.find(ny[i-1]));\n\t\tif (--mp[make_pair(nx[i-1],ny[i-1])]==0) {\n\t\t\ttot--;\n\t\t\ths2=(hs2-(1ll*qpow(P1,nx[i-1])*qpow(P2,ny[i-1]))%P3+P3)%P3;\n\t\t}\n\t\twhile (cur<cnt&&tot<cnt2) {\n\t\t\tcur++;\n\t\t\tmx.insert(nx[cur]),my.insert(ny[cur]);\n\t\t\tif (mp.find(make_pair(nx[cur],ny[cur]))==mp.end()) {\n\t\t\t\ttot++;\n\t\t\t\tmp[make_pair(nx[cur],ny[cur])]=1;\n\t\t\t\ths2=(hs2+(1ll*qpow(P1,nx[cur])*qpow(P2,ny[cur]))%P3)%P3;\n\t\t\t} else if (mp[make_pair(nx[cur],ny[cur])]==0) {\n\t\t\t\tmp[make_pair(nx[cur],ny[cur])]=1;\n\t\t\t\ttot++;\n\t\t\t\ths2=(hs2+(1ll*qpow(P1,nx[cur])*qpow(P2,ny[cur]))%P3)%P3;\n\t\t\t} else {\n\t\t\t\tmp[make_pair(nx[cur],ny[cur])]++;\n\t\t\t}\n\t\t}\n\t\tif (calc()==hs) {\n\t\t\tprintf(\"YES\\n%d %d\\n\",pos[i+1],pos[cur]);\n\t\t\treturn 0;\n\t\t}\n\t}\n\tprintf(\"NO\\n\");\n\treturn 0;\n}\n\n```\n",
        "postTime": 1623655724,
        "uid": 113546,
        "name": "ix35",
        "ccfLevel": 10,
        "title": "[NWRRC2016]Easy Reading \u9898\u89e3"
    }
]
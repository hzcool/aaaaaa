[
    {
        "content": "\u7ed9\u5b9a\u5e73\u9762\u4e0a\u7684\u82e5\u5e72\u6761\u76f4\u7ebf\uff0c\u6c42\u56f4\u6210\u7684\u4e09\u89d2\u5f62\u7684\u4e2a\u6570\u3002\n\n\u9996\u5148\u8003\u8651\u4ec0\u4e48\u6837\u7684\u4e09\u6761\u76f4\u7ebf\u53ef\u4ee5\u56f4\u6210\u4e00\u4e2a\u4e09\u89d2\u5f62\u3002\u4e09\u6761\u76f4\u7ebf\u5fc5\u987b\u4e92\u4e0d\u5e73\u884c\uff0c\u4e5f\u5c31\u662f\u4e09\u6761\u76f4\u7ebf\u7684\u659c\u7387\u4e0d\u76f8\u7b49\u3002\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u76f4\u7ebf $x$\uff0c\u5047\u8bbe\u659c\u7387\u4e3a $k$\uff0c\u90a3\u6211\u4eec\u8981\u6c42\u51fa\u659c\u7387\u5c0f\u4e8e $k$ \u7684\u76f4\u7ebf\u4e2a\u6570\u548c\u659c\u7387\u5927\u4e8e $k$ \u7684\u76f4\u7ebf\u4e2a\u6570\uff0c\u4e24\u8005\u76f8\u4e58\u5c31\u662f\u76f4\u7ebf $x$ \u7684\u7b54\u6848\u3002\u6700\u540e\u518d\u628a\u8fd9\u4e9b\u76f8\u52a0\u5373\u53ef\u3002\n\n\u8fd9\u6837\u505a\u53ef\u4ee5\u4fdd\u8bc1\u4e0d\u91cd\u4e0d\u6f0f\uff0c\u56e0\u4e3a\u8ba1\u7b97\u6bcf\u4e00\u6761\u76f4\u7ebf\u65f6\u90fd\u5f53\u6210\u4e2d\u95f4\u659c\u7387\uff0c\u6240\u4ee5\u4e0d\u4f1a\u91cd\u590d\u4e5f\u4e0d\u4f1a\u9057\u6f0f\u3002\n\n\u4e0b\u9762\u662f AC \u4ee3\u7801\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\nconst int M = 1e9+7;\n\nint n,ans,r[300005];\ndouble k[300005];\n\nsigned main()\n{\n\tcin>>n;\n\tfor(int i=1,a,b,c;i<=n&&cin>>a>>b>>c;i++)\n\t\tk[i] = (b!=0 ? -1.0*a/b : 2e17);\n\tsort(k+1,k+1+n);\n\tint now=1;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(i<now) continue;\n\t\twhile(k[now]==k[i])\n\t\t\tr[i] = now, now++;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tif(r[i]>0)\n\t\t\tans += (i-1)*(n-r[i])%M*(r[i]-i+1)%M, ans %= M;\n\tcout<<ans<<endl;\n\t\n\treturn 0;\n}\n```\n\n\u795d\u5927\u5bb6 AC \u6109\u5feb\uff01",
        "postTime": 1634125403,
        "uid": 123298,
        "name": "kouylty",
        "ccfLevel": 7,
        "title": "\u9898\u89e3\u3010P7676 [COCI2013-2014#5] TROKUTI\u3011"
    },
    {
        "content": "\u8fd9\u9898\u6700\u591a\u8bc4\u7eff\u5427\u2026\u2026\n\n\u53d1\u73b0\u81ea\u5df1\u7684\u505a\u6cd5\u548c\u90a3\u7bc7\u9898\u89e3\u4e0d\u540c\uff0c\u6240\u4ee5\u6765\u53d1\u4e2a\u9898\u89e3\u3002\n\n\u9898\u610f\uff1a\u7ed9\u5b9a $n$ \u6761\u76f4\u7ebf\uff0c\u6c42\u8fd9\u4e9b\u76f4\u7ebf\u4e24\u4e24\u4ea4\u51fa\u7684\u4e09\u89d2\u7684\u4e2a\u6570\u3002\u4fdd\u8bc1\u65e0\u4e09\u7ebf\u5171\u70b9\u3002\n\n\u660e\u663e\u4efb\u610f\u4e09\u6761\u4e0d\u5e73\u884c\u7684\u76f4\u7ebf\u80fd\u786e\u5b9a\u4e00\u4e2a\u4e09\u89d2\u3002\u6240\u4ee5\u6709\u4e00\u4e2a\u505a\u6cd5\u662f\u5148\u7b97\u5168\u90e8\u518d\u6392\u9664\u9009\u4e86\u4e24\u6761\u6216\u4e09\u6761\u659c\u7387\u76f8\u540c\u7ebf\u7684\u60c5\u51b5\u3002\u7136\u800c\u8fd9\u7bc7\u9898\u89e3\u8bb2\u7684\u5e76\u4e0d\u662f\u8fd9\u4e2a\u505a\u6cd5\uff0c\u800c\u662f\u53e6\u4e00\u4e2a\u6211\u5148\u60f3\u5230\u7684\u505a\u6cd5\u3002\n\n\u89c2\u5bdf\u6837\u4f8b\u89e3\u91ca\uff0c\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rrp71ksq.png)\n\n\u6709\u4e09\u6761\u5e73\u884c\u76f4\u7ebf\uff0c\u53ef\u4e0d\u53ef\u4ee5\u5f53\u505a\u4e00\u6761\u770b\u5f85\u5462\uff1f\n\n\u4e24\u6761\u80fd\u4e0e $y=3$ \u4ea4\u51fa\u4e09\u89d2\u7684\u76f4\u7ebf\uff0c\u5fc5\u7136\u4e5f\u80fd\u4e0e $y=2$ \u4ea4\u51fa\u4e09\u89d2\u3002\u5206\u914d\u5f8b\u4e00\u4e0b\uff0c\u5373\u53ef\u628a\u4e24\u6761\u76f4\u7ebf\u5408\u5230\u4e00\u8d77\u3002\n\n\u8fd9\u6837\u7684\u8bdd\uff0c\u76f8\u5f53\u4e8e\u7ed9\u6bcf\u6761\u76f4\u7ebf\u4e00\u4e2a\u6743\u503c\uff0c\u8868\u793a\u6709\u51e0\u6761\u7ebf\u4e0e\u5b83\u659c\u7387\u4e00\u81f4\u3002\u6bcf\u6b21\u9009\u4e09\u6761\u76f4\u7ebf\u76f8\u4e58\uff0c\u8d21\u732e\u5373\u4e3a\u4e09\u6761\u76f4\u7ebf\u6743\u503c\u4e4b\u79ef\u3002\n\n\u7ea6\u5206\u7ed9\u5b9a\u659c\u7387\uff0c\u7528 `map` \u5224\u91cd\uff0c\u7136\u540e\u4e00\u904d\u80cc\u5305\uff0c\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6 $O(n \\log n)$\uff0c\u74f6\u9888\u5728\u5224\u91cd\u3002\n\n```cpp\n#include <cstdio>\n#include <map>\n#include <algorithm>\nusing namespace std;\nconst int M = 300005, mod = 1000000007;\nint n, a[M], b[M], c[M], h[M], cnt, dp[M][4];\nmap<pair<int, int> , int> t1; map<pair<int, int> , bool> t2;\npair<int, int> k[M];\nint main(){\n    scanf(\"%d\", &n);\n    for(int i = 1; i <= n; i++){\n        scanf(\"%d %d %d\", &a[i], &b[i], &c[i]);\n        int g = __gcd(a[i], b[i]); k[i] = make_pair(a[i]/g, b[i]/g);\n        if(k[i].first < 0) k[i].first = -k[i].first, k[i].second = -k[i].second;\n        t1[k[i]]++;\n    }\n    for(int i = 1; i <= n; i++) {\n        if(!t2[k[i]]) h[++cnt] = t1[k[i]]; t2[k[i]] = 1;\n    }\n    dp[0][0] = 1; \n    for(int i = 1; i <= cnt; i++){\n        dp[i][0] = dp[i-1][0];\n        for(int j = 1; j <= 3; j++){\n            dp[i][j] = (1ll * dp[i-1][j-1] * h[i] % mod + dp[i-1][j]) % mod;\n        }\n    }\n    printf(\"%d\\n\", dp[cnt][3]);\n}\n```",
        "postTime": 1660541821,
        "uid": 443664,
        "name": "Missa",
        "ccfLevel": 0,
        "title": "P7676 [COCI2013-2014#5] TROKUTI \u9898\u89e3"
    },
    {
        "content": "[\u60a8\u53ef\u5728\u6211\u7684\u535a\u5ba2\u4e2d\u67e5\u770b\u672c\u6587\uff0c\u8c22\u8c22\uff01](https://www.cnblogs.com/crab-in-the-northeast/p/luogu-p7676.html)\n\n\u9996\u5148\u8003\u8651\u4e09\u89d2\u5f62\u7684\u5f62\u6210\u6761\u4ef6\uff08\u6ce8\u610f\u5230\u9898\u9762\u4fdd\u8bc1\u4e86\u65e0\u4e09\u7ebf\u5171\u70b9\uff09\uff1a\n\n- \u4e09\u6761\u8fb9\uff1b\n- \u4efb\u610f\u4e24\u6761\u8fb9\u4e0d\u5e73\u884c\u3002\n\n\u8003\u8651\u8865\u96c6\uff0c\u7edf\u8ba1\u5b58\u5728\u4e24\u6761\u8fb9\u5e73\u884c\u7684\u4e09\u5143\u7ec4\u6570\u91cf\uff0c\u7528\u603b\u6570 $\\dbinom{n}{3}$ \u51cf\u53bb\u5373\u53ef\u3002\n\n\u5b58\u5728\u4e24\u6761\u8fb9\u5e73\u884c\uff0c\u4e5f\u5c31\u662f\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u4e4b\u4e00\uff1a\n\n- \u4e24\u6761\u8fb9\u5e73\u884c\uff0c\u53e6\u4e00\u6761\u8fb9\u4e0d\u4e0e\u8fd9\u4e24\u6761\u8fb9\u5e73\u884c\uff1b\n- \u4e09\u6761\u8fb9\u5747\u5e73\u884c\u3002\n\n\u4e24\u6761\u76f4\u7ebf\u5e73\u884c\u5f53\u4e14\u4ec5\u5f53\u5b83\u4eec\u7684\u659c\u7387\u76f8\u540c\uff08\u7ad6\u7ebf\u53ef\u770b\u505a $+\\infty$\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u7edf\u8ba1\u6bcf\u79cd\u659c\u7387\u51fa\u73b0\u7684\u6570\u91cf $c$\u3002\n\n\u6211\u4eec\u5bf9\u4e8e\u6bcf\u79cd\u659c\u7387\u90fd\u8fdb\u884c\u5982\u4e0b\u7edf\u8ba1\uff1a\n\n- $c \\ge 2$ \u65f6\uff0c\u6570\u91cf $\\dbinom{c}{2} \\times (n - c)$\uff0c\u4ee3\u8868\u5728\u659c\u7387\u4e3a $c$ \u7684\u8fd9\u4e9b\u5e73\u884c\u76f4\u7ebf\u4e2d\u9009\u53d6\u4e24\u6761\uff0c\u548c\u53e6\u5916\u4e00\u6761\u4e0e\u5176\u659c\u7387\u4e0d\u540c\u7684\u76f4\u7ebf\u7ec4\u6210\u7684\u4e09\u5143\u7ec4\u6570\u91cf\uff1b\n- $c \\ge 3$ \u65f6\uff0c\u53ef\u4ee5\u6784\u6210\u6ee1\u8db3\u6761\u4ef6\u4e8c\u7684\u4e09\u89d2\u5f62\uff0c\u6570\u91cf $\\dbinom{c}{3}$\uff0c\u4ee3\u8868\u659c\u7387\u4e3a $c$ \u7684\u8fd9\u4e9b\u5e73\u884c\u76f4\u7ebf\u4e2d\u9009\u53d6\u4e09\u6761\u7ec4\u6210\u7684\u4e09\u5143\u7ec4\u6570\u91cf\u3002\n\n\u8fd9\u6837\u6bcf\u4e2a\u4e0d\u5408\u6cd5\u7684\u4e09\u5143\u7ec4\u90fd\u53ef\u4ee5\u88ab\u4e0d\u91cd\u4e0d\u6f0f\u7edf\u8ba1\u4e00\u6b21\u3002\n\n\u81f3\u4e8e\u5982\u4f55\u7edf\u8ba1\u6bcf\u79cd\u659c\u7387\u51fa\u73b0\u7684\u6570\u91cf\uff0c\u5e94\u8be5\u91c7\u7528 map\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\ninline int read() {\n    int x = 0;\n    bool flag = true;\n    char ch = getchar();\n    while (!isdigit(ch)) {\n        if (ch == '-')\n            flag = false;\n        ch = getchar();\n    }\n    while (isdigit(ch)) {\n        x = (x << 1) + (x << 3) + ch - '0';\n        ch = getchar();\n    }\n    if(flag)\n        return x;\n    return ~(x - 1);\n}\n\nconst int mod = (int)1e9 + 7;\nconst int maxn = 300005;\n\nint a[maxn], b[maxn];\n\ninline int C3(int x) {\n    return x * (x - 1) / 2 * (x - 2) / 3;\n}\n\ninline int C2(int x) {\n    return x * (x - 1) / 2;\n}\n\nint gcd(int a, int b) {\n    return b ? gcd(b, a % b) : a;\n}\n\ntypedef std :: pair <int, int> pii;\nstd :: map <pii, int> m;\n\nsigned main() {\n    int n = read();\n    for (int i = 1; i <= n; ++i) {\n        int a = read(), b = read();\n        read();\n        \n        if (a == 0)\n            b = 1;\n        else if (b == 0)\n            a = 1;\n        else {\n            int d = gcd(a, b);\n            a /= d;\n            b /= d;\n        }\n\n        ++m[std :: make_pair(a, b)];\n    }\n\n    int ans = C3(n) % mod;\n    for (auto it : m) {\n        int cnt = it.second;\n        if (cnt >= 2)\n            ans -= C2(cnt) * (n - cnt) % mod;\n        if (cnt >= 3)\n            ans -= C3(cnt) % mod;\n        (ans += mod) %= mod;\n    }\n\n    printf(\"%lld\\n\", ans);\n    return 0;\n}\n```\n\n\u5982\u679c\u89c9\u5f97\u8fd9\u7bc7\u9898\u89e3\u6709\u52a9\u4e8e\u60a8\uff0c\u8bf7\u4e0d\u8981\u5fd8\u8bb0\u70b9\u8d5e\uff0c\u8c22\u8c22\uff01",
        "postTime": 1666979825,
        "uid": 120868,
        "name": "dbxxx",
        "ccfLevel": 6,
        "title": "P7676"
    }
]
[
    {
        "content": "### \u9898\u610f\u7b80\u8ff0\n\n\u5df2\u77e5\u4e00\u5f20 $n$ \u4e2a\u70b9\uff0c$m$ \u6761\u8fb9\u7684\u7b80\u5355\u6709\u5411\u56fe\uff0c\u6c42\u51fa\u8be5\u56fe\u7684\u6240\u6709\u54c8\u5bc6\u5c14\u987f\u56de\u8def\u3002\n\n$n \\leq 50$\uff0c\u54c8\u5bc6\u5c14\u987f\u56de\u8def\u6570\u91cf\u975e\u96f6\u5e76\u5c0f\u4e8e $10^4$\uff0c\u6570\u636e\u968f\u673a\u751f\u6210\u3002\n\n---\n\n### \u9898\u89e3\n\n\u8981\u89e3\u51b3\u4e00\u4e2a NPC \u95ee\u9898\uff0c\u6700\u597d\u7684\u65b9\u6cd5\u662f\uff1a\u628a\u5b83\u8f6c\u5316\u4e3a\u53e6\u4e00\u4e2a NPC \u95ee\u9898\u3002\n\n\u7cbe\u786e\u8986\u76d6\u95ee\u9898\u4e5f\u662f\u4e00\u4e2a NPC \u95ee\u9898\uff0c\u4f46\u662f\u821e\u8e48\u94fe\u7b97\u6cd5\uff08DLX\uff09\u53ef\u4ee5\u9ad8\u6548\u5730\u6c42\u89e3\u8fd9\u4e2a\u95ee\u9898\u3002\u53c2\u8003 DLX \u7684[\u6a21\u677f\u9898](https://www.luogu.com.cn/problem/P4929)\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u80fd\u591f\u89e3\u51b3 $N, M \\leq 500$ \u7684\u6570\u636e\u3002\n\n---\n\n\u54c8\u5bc6\u5c14\u987f\u56de\u8def\u53ef\u4ee5\u88ab\u8f6c\u5316\u4e3a\u7cbe\u786e\u8986\u76d6\u95ee\u9898\u3002\n\n\u54c8\u5bc6\u5c14\u987f\u56de\u8def\u8981\u6c42\u9009\u62e9\u4e00\u4e9b\u6709\u5411\u8fb9\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u548c\u51fa\u5ea6\u90fd\u6070\u597d\u4e3a $1$\u3002\n\n\u7cbe\u786e\u8986\u76d6\u95ee\u9898\u8981\u6c42\u9009\u62e9\u4e00\u4e9b\u96c6\u5408\uff0c\u4f7f\u5f97\u8fd9\u4e9b\u96c6\u5408\u4e24\u4e24\u4e0d\u4ea4\uff0c\u4e14\u5e76\u96c6\u6070\u597d\u662f\u96c6\u5408 $S$\u3002\n\n\u6240\u4ee5\uff0c\u4ee4\u96c6\u5408 $S := \\{in_1, in_2, \\cdots, in_n, out_1, out_2, \\cdots, out_n\\}$\uff0c\u8868\u793a\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u548c\u51fa\u5ea6\u90fd\u6070\u597d\u4e3a $1$\u3002\u6bcf\u6761\u6709\u5411\u8fb9 $u \\to v$ \u5bf9\u5e94\u96c6\u5408 $\\{out_u, in_v\\}$\u3002\u8981\u6c42\u9009\u62e9\u4e00\u4e9b\u8fb9\uff0c\u4f7f\u5f97\u8fd9\u4e9b\u8fb9\u5bf9\u5e94\u7684\u96c6\u5408\u4e24\u4e24\u4e0d\u4ea4\uff0c\u4e14\u5e76\u96c6\u6070\u597d\u4e3a $S$\u3002\n\n---\n\n\u4e0a\u9762\u7684\u8f6c\u5316\u5b58\u5728\u4e00\u4e2a\u95ee\u9898\uff1a\u53ea\u8003\u8651\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u548c\u51fa\u5ea6\uff0c\u5f62\u6210\u7684\u8def\u5f84\u53ef\u80fd\u662f\u82e5\u5e72\u4e2a\u56de\u8def\u7684\u5e76\u3002\n\n\u56e0\u4e3a\u6240\u6709\u7684\u6392\u5217\u6709 $n!$ \u4e2a\uff0c\u5bf9\u5e94\u6070\u597d\u4e00\u4e2a\u73af\u7684\u6392\u5217\u6709 $(n-1)!$ \u4e2a\uff0c\u6240\u4ee5\u4e0d\u5408\u6cd5\u7684\u89e3\u5927\u7ea6\u662f\u5408\u6cd5\u89e3\u7684 $n$ \u500d\u3002\u56e0\u4e3a $n$ \u5f88\u5c0f\uff0c\u6240\u4ee5\u5bf9\u590d\u6742\u5ea6\u7684\u5f71\u54cd\u4e0d\u5927\u3002\n\n\u6240\u4ee5\uff0c\u7528 DLX \u7b97\u6cd5\u6c42\u51fa\u4ee5\u4e0a\u7cbe\u786e\u8986\u76d6\u95ee\u9898\u7684\u6240\u6709\u89e3\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u89e3\uff0c\u9a8c\u8bc1\u5b83\u662f\u5426\u5bf9\u5e94\u539f\u56fe\u4e2d\u7684\u4e00\u6761\u54c8\u5bc6\u5c14\u987f\u56de\u8def\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\u4e0d\u4f1a\u8bc1\u660e\uff0c\u4f46\u662f $\\mathcal{O}(\\text{\u53ef\u8fc7})$\u3002\n\n\u671f\u671b\u5f97\u5206\uff1a$100$ \u5206\u3002\n",
        "postTime": 1651992827,
        "uid": 42299,
        "name": "zengminghao",
        "ccfLevel": 0,
        "title": "P8281\u300cMCOI-08\u300dFast Enumeration \u9898\u89e3"
    },
    {
        "content": "\u672c\u9898\u975e DLX \u505a\u6cd5\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u4ee5\u8bc1\u660e\u3002\r\n\r\n\u5c06 dfs \u641c\u7d22\u7a7a\u95f4\u62bd\u8c61\u4e3a\u4e00\u68f5\u6811\uff0c\u8282\u70b9\u4e2a\u6570 $n!$\uff0c\u6df1\u5ea6 $n$\u3002\u6bcf\u4e00\u4e2a\u8282\u70b9\u5bf9\u5e94\u539f\u56fe\u4e2d\u56fa\u5b9a\u56de\u8def\u3002\u5982\u679c\u5bf9\u4e8e\u4efb\u4f55\u8282\u70b9\u53ef\u4ee5 $O(T(n,m))$ \u5224\u65ad\u5b50\u6811\u5185\u662f\u5426\u6709\u89e3\uff0c\u53ef\u4ee5 $O(T(n,m)Kn^2)$ \u627e\u51fa\u6240\u6709\u56de\u8def\u3002\r\n\r\n\u786e\u5b9a\u5b50\u6811\u5185\u662f\u5426\u6709\u89e3\u5c31\u662f\u94a6\u5b9a\u67d0\u4e9b\u70b9\u5728\u6700\u7ec8\u56de\u8def\u4e2d\u7684\u51fa\u8fb9\uff0c\u5224\u65ad\u53ef\u5426\u5b8c\u6210\u56de\u8def\u3002\u901a\u8fc7 deletion-contraction \u5220\u6389\u4e0d\u53ef\u80fd\u9009\u7684\u8fb9\uff0c\u7f29\u6389\u94a6\u5b9a\u9009\u7684\u8fb9\uff0c\u5c06\u95ee\u9898\u8f6c\u5316\u6210\u5224\u65ad D-C \u540e\u7684\u56fe\u662f\u5426\u5b58\u5728\u56de\u8def\u3002\r\n\r\n\u5224\u65ad\u56de\u8def\u662f\u5426\u5b58\u5728\u53ef\u4ee5\u7528\u4e00\u4e9b\u542f\u53d1\u5f0f\uff0c\u6bd4\u5982\u8c03\u6574\u6cd5\uff0c\u6700\u540e\u65f6\u95f4\u590d\u6742\u5ea6 $O(Kn^4)$\u3002\u5f53\u7136\u7528\u66f4\u5f31\u5f97\u51fa\u53ef\u80fd\u6709\u89e3\u800c\u4e0d\u662f\u80af\u5b9a\u6709\u89e3\u4e5f\u53ef\u4ee5\u526a\u6389\u8db3\u591f\u591a\u7684\u8282\u70b9\uff0c\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u76f8\u5bf9\u96be\u8bc1\u3002",
        "postTime": 1682684073,
        "uid": 220037,
        "name": "w33z8kqrqk8zzzx33",
        "ccfLevel": 7,
        "title": "P8281"
    },
    {
        "content": "\u76f4\u63a5\u6c42\u54c8\u5bc6\u987f\u8def\u5f84\u663e\u7136\u4f1a\u70b8\u6389\uff0c\u4f46\u662f\u8fd9\u73a9\u610f\u662f\u4e2a NPC\u2026\u2026  \n\u771f\u7684\u6ca1\u529e\u6cd5\u4e86\u5417\uff1f\u663e\u7136\u4e0d\u662f\u3002  \n\u9996\u5148\u8bb2\u4e00\u53e5\u5e9f\u8bdd\uff1a\u54c8\u5bc6\u5c14\u987f\u8def\u5f84\u662f\u4e00\u4e2a\u73af\u3002\u6709\u4ec0\u4e48\u7528\u5462\uff1f\u53ef\u4ee5\u8003\u8651\u4ece\u539f\u56fe\u4e2d\u627e\u51fa $n$ \u6761\u8fb9\uff0c\u5c06\u5176\u62fc\u63a5\u6210\u4e00\u4e2a\u73af\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u83b7\u5f97\u4e86\u4e00\u4e2a $O(m^n)$ \u7684\u7b97\u6cd5\u3002\u4f46\u597d\u50cf\u6bd4\u539f\u6765\u66f4\u5783\u573e\u4e86\u5462\u2026\u2026  \n\u8fd9\u65f6\u5c31\u8981\u8003\u8651\u4e22\u6389\u4e00\u4e9b\u4e1c\u897f\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u53ea\u8981\u6c42\u8fd9 $n$ \u6761\u8fb9\u6784\u6210\u4e00\u4e2a\u73af\uff0c\u5373\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\u53ca\u51fa\u5ea6\u5747\u4e3a $1$\uff0c\u5177\u4f53\u662f\u4e0d\u662f\u4e00\u4e2a\u73af\u6700\u540e\u518d\u5224\u65ad\u3002\u63a5\u7740\uff0c\u6bcf\u4e2a\u70b9\u5165\u5ea6\u53ca\u51fa\u5ea6\u5fc5\u987b\u4e3a $1$\uff0c\u6bcf\u4e00\u6761\u8fb9 $u,v$ \u4f1a\u7ed9 $u$ \u7684\u51fa\u5ea6\u3001$v$ \u7684\u5165\u5ea6\u5206\u522b\u52a0 $1$\u3002\u6709\u6ca1\u6709\u60f3\u5230\u4e00\u4e2a\u5e38\u6570\u5de8\u5c0f\u7684\u6570\u636e\u7ed3\u6784\u5462\uff1f  \n\u6ca1\u9519\uff0c\u5c31\u662f\u821e\u8e48\u94fe\u3002\u8f6c\u5316\u4e3a\u7cbe\u786e\u8986\u76d6\u95ee\u9898\u540e\u6c42\u89e3\uff0c\u5c06\u6240\u6709\u7b26\u5408\u8981\u6c42\u7684\u7ec4\u5408\u8bb0\u5f55\u4e0b\u6765\uff0c\u6700\u540e\u6309\u5b57\u5178\u5e8f\u6392\u5e8f\u5373\u53ef\u3002  \n\u65f6\u95f4\u590d\u6742\u5ea6\u662f\u60ca\u4eba\u7684 $O(m^n)$\uff0c\u4f46\u662f\u80fd\u8fc7\uff0c\u56e0\u4e3a\u821e\u8e48\u94fe nb\u3002\u4ee3\u7801\u770b\u4e00\u4e50\u5c31\u597d\uff0c\u5199\u7684\u592a\u4e11\u4e86\u3002\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nconst int MAXN = 4e5;\n\nstruct edge {\n\tint u, v;\n\tbool operator < (const edge &rhs) const { return u == rhs.u ? v < rhs.v : u < rhs.u; }\n} a[60];\n\nint n, m, nxt[60];\n\nvector<int> res[10010]; int num;\n\nbool vis[60];\n\nstruct DancingLinksX {\n\t\n\tint n, m, cnt;\n\t\n\tint l[MAXN], r[MAXN], u[MAXN], d[MAXN], row[MAXN], col[MAXN];\n\tint head[MAXN], size[MAXN];\n\tint ans[MAXN];\n\t\n\tinline \n\tvoid init(int _n = 0, int _m = 0) {\n\t\tn = _n, m = _m;\n\t\tfor (int i = 0; i <= m; i++) r[i] = i + 1, l[i] = i - 1, u[i] = d[i] = i;\n\t\tr[m] = 0, l[0] = m;\n\t\tmemset(head, 255, sizeof head);\n\t\tmemset(size, 0, sizeof size);\n\t\tcnt = m + 1;\n\t}\n\t\n\tinline \n\tvoid link(int x, int y) {\n\t\tsize[y]++;\n\t\trow[cnt] = x, col[cnt] = y;\n\t\tu[cnt] = y, d[cnt] = d[y], u[d[y]] = cnt, d[y] = cnt;\n\t\tif (head[x] == -1) head[x] = r[cnt] = l[cnt] = cnt;\n\t\telse {\n\t\t\tr[cnt] = head[x], l[cnt] = l[head[x]];\n\t\t\tr[l[head[x]]] = cnt, l[head[x]] = cnt;\n\t\t}\n\t\tcnt++;\n\t}\n\t\n\tinline \n\tvoid remove(int p) {\n\t\tr[l[p]] = r[p], l[r[p]] = l[p];\n\t\tfor (int i = d[p]; i != p; i = d[i]) {\n\t\t\tfor (int j = r[i]; j != i; j = r[j]) u[d[j]] = u[j], d[u[j]] = d[j], size[col[j]]--;\n\t\t}\n\t}\n\t\n\tinline \n\tvoid resume(int p) {\n\t\tfor (int i = u[p]; i != p; i = u[i]) {\n\t\t\tfor (int j = l[i]; j != i; j = l[j]) u[d[j]] = j, d[u[j]] = j, size[col[j]]++;\n\t\t}\n\t\tr[l[p]] = p, l[r[p]] = p;\n\t}\n\t\n\tvoid dance(int step) {\n\t\tif (r[0] == 0) {\n\t\t\tmemset(vis, 0, sizeof vis);\n\t\t\tfor (int i = 0; i < step; i++) nxt[a[ans[i]].u] = a[ans[i]].v;\n\t\t\tfor (int p = 1; !vis[p]; p = nxt[p]) vis[p] = 1;\n\t\t\tfor (int i = 1; i <= ::n; i++) if (!vis[i]) return ;\n\t\t\tres[++num].push_back(1);\n\t\t\tfor (int p = nxt[1], i = 2; p != 1; p = nxt[p], i++) res[num].push_back(p);\n\t\t\treturn ;\n\t\t}\n\t\tint p = r[0];\n\t\tfor (int i = r[0]; i; i = r[i]) {\n\t\t\tif (size[i] < size[p]) p = i;\n\t\t}\n\t\tremove(p);\n\t\tfor (int i = d[p]; i != p; i = d[i]) {\n\t\t\tans[step] = row[i];\n\t\t\tfor (int j = r[i]; j != i; j = r[j]) remove(col[j]);\n\t\t\tdance(step + 1);\n\t\t\tfor (int j = l[i]; j != i; j = l[j]) resume(col[j]);\n\t\t}\n\t\tresume(p);\n\t}\n\t\n} DLX;\n\ninline \nbool cmp(vector<int> x, vector<int> y) {\n\tfor (int i = 1; i < n; i++) {\n\t\tif (x[i] < y[i]) return 1;\n\t\tif (x[i] > y[i]) return 0;\n\t}\n}\n\nint main() {\n\tscanf(\"%d%d\", &n, &m), DLX.init(m, n * 2);\n\tfor (int i = 1; i <= m; i++) scanf(\"%d%d\", &a[i].u, &a[i].v), DLX.link(i, a[i].u), DLX.link(i, n + a[i].v);\n\tDLX.dance(0);\n\tsort(res + 1, res + num + 1, cmp);\n\tfor (int i = 1; i <= num; i++) {\n\t\tfor (int j = 0; j < n; j++) printf(\"%d \", res[i][j]); puts(\"\");\n\t}\n}\n```",
        "postTime": 1669629439,
        "uid": 406941,
        "name": "Register_int",
        "ccfLevel": 6,
        "title": "P8281 \u9898\u89e3"
    }
]
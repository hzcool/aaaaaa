[
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\u6233\u6211](https://www.cnblogs.com/maomao9173/p/10838953.html)\n\n\u770b\u5230\u9898\u76ee\u663e\u7136\u662f\u63d2\u5934$dp$\uff0c\u4f46\u662f$n$\u548c$m$\u7684\u8303\u56f4\u4f3c\u4e4e\u4e0d\u662f\u5f88\u5c0f\u3002\u6211\u4eec\u5148\u4e0d\u8003\u8651\u590d\u6742\u5ea6\u8bbe\u4e00\u4e0b\u72b6\u6001\u8bd5\u8bd5\uff1a\n\n\u4e00\u5171\u6709\u4e09\u4e2a\u8fde\u901a\u5206\u91cf\uff0c\u6211\u4eec\u6309\u7167$1,2,3$\u7684\u987a\u5e8f\u6765\u8868\u793a\u4e00\u4e0b\u3002\u8f6e\u5ed3\u7ebf\u4e0a$0$\u4ee3\u8868\u6ca1\u6709\u63d2\u5934\u63a5\u5165\uff0c$x$\u8bf4\u660e\u6709\u7b2c$x$\u4e2a\u8fde\u901a\u5206\u91cf\u91cc\u7684\u63d2\u5934\u63a5\u5165\uff0c\u9700\u8981\u5728\u8fd9\u91cc\u8fde\u4e0b\u53bb\u3002\n\n\u6211\u4eec\u8bbe\u5f53\u524d\u683c\u5b50\u5de6\u8fb9\u7684\u4e00\u4f4d\u8f6e\u5ed3\u7ebf\u4e3a$b_1$\uff0c\u4e0a\u8fb9\u7684\u4e00\u4f4d\u8f6e\u5ed3\u7ebf\u4e3a$b_2$\u3002\n\n- \u5982\u679c$b_1 = b_2 = 0$\uff1a\n\n\t- \u5f53\u524d\u683c\u5b50\u53ef\u4ee5\u9009\u62e9\u4e0d\u653e\u3002\n    \n    - \u5f53\u524d\u683c\u5b50\u4e5f\u53ef\u4ee5\u5411\u4e0b\u65b0\u5efa\u4e00\u4e2a$L$\u3002\n    \n- \u5982\u679c$b1 = 0$\u4e14$b2 != 0$\uff1a\n\n\t- \u53ef\u4ee5\u8fde\u4e0b\u53bb\u3002\n    \n    - \u4e5f\u53ef\u4ee5\u5728\u8fd9\u91cc\u62d0\u5f2f\u5411\u53f3\u3002\n    \n- \u5982\u679c$b1 != 0$\u4e14$b2 = 0$\uff1a\n\n\t- \u53ef\u4ee5\u5411\u53f3\u8fde\u4e0b\u53bb\u3002\n    \n    - \u4e5f\u53ef\u4ee5\u5c31\u6b64\u7ed3\u675f\u3002\n\n\u8fde\u901a\u5206\u91cf\u4f1a\u51fa\u73b0\u4e2d\u65ad\u7684\u60c5\u51b5\u3002\u6bd4\u5982\u4f60\u5728\u5f88\u9760\u4e0a\u7684\u5730\u65b9\u9009\u4e24\u4e2a$L$\uff0c\u53c8\u5728\u6700\u4e0b\u9762\u9009\u4e86\u4e00\u4e2a$L$\uff0c\u8fd9\u65f6\u5019\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e2d\u95f4\u67d0\u4e9b\u8f6e\u5ed3\u7ebf\u4e0a\u5168\u90fd\u662f$0$\uff0c\u9047\u5230\u7b2c\u4e09\u4e2a\u5206\u91cf\u7684\u65f6\u5019\u4e0d\u597d\u5224\u65ad\u3002\u8fd9\u91cc\u6211\u4eec\u5728\u7b2c$m+1$\u4f4d\u4e0a\u518d\u653e\u4e00\u4e2a\u6570\uff0c\u8868\u793a\u76ee\u524d\u5df2\u7ecf\u51fa\u73b0\u51e0\u4e2a\u8fde\u901a\u5206\u91cf\uff0c\u5c31\u5bb9\u6613\u786e\u5b9a\u72b6\u6001\u7684\u53ef\u884c\u6027\u4e86\u3002\n\n\u72b6\u6001\u548c\u51b3\u7b56\u90fd\u5f88\u7b80\u5355\u3002\u4e0b\u9762\u6211\u4eec\u770b\u4e00\u4e0b\u590d\u6742\u5ea6\u9760\u8c31\u4e0d\u9760\u8c31\u3002\n\n\u4e00\u822c\u9010\u683c\u8f6c\u79fb\u7684\u63d2\u5934$dp$\u590d\u6742\u5ea6\u662f$O(NM*$\u72b6\u6001\u603b\u6570\u4e0a\u754c$)$\u3002\u4e00\u6761\u8f6e\u5ed3\u7ebf\u4e0a\u6700\u591a\u6709\u4e09\u4e2a\u8fde\u901a\u5206\u91cf\u63a5\u5165\uff0c\u6240\u4ee5\u7528$0,1,2,3$\u56db\u4e2a\u6570\u56db\u8fdb\u5236\u8868\u793a\u3002\u6bcf\u4e2a\u8fde\u901a\u5206\u91cf\u53ea\u53ef\u80fd\u63a5\u5165\u4e00\u6b21\uff08\u60f3\u4e00\u60f3\uff0c\u4e3a\u4ec0\u4e48\uff09\uff0c\u90a3\u4e48\u53ef\u4ee5\u51fa\u73b0\u8fde\u901a\u5206\u91cf\u7684\u9009\u62e9\u5c31\u6709$C_N^3$\u79cd\u3002\u8003\u8651\u4e09\u79cd\u8fde\u901a\u5206\u91cf\u5404\u81ea\u7684\u7f16\u53f7\u9009\u62e9\uff0c\u72b6\u6001\u603b\u6570\u5c31\u6709$C_N^3 * 4^3=259840$\u79cd\u3002\u8fd0\u7b97\u6b21\u6570\u5927\u6982\u662f$2e8$\u5de6\u53f3\uff0c\u5f00\u7740$O2$\u53ef\u4ee5\u8f7b\u677e\u5361\u8fc7\u53bb\u3002\n\n\uff08\u5f53\u7136\u4e0d\u5f00$O2$\u7565\u5fae\u5361\u5e38\u4e5f\u53ef\u4ee5\u4f46\u662f\u6211\u61d2=_=\n\n$Code$\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int unsigned long long\n\nconst int N = 30 + 5;\nconst int base = 999983;\nconst int M = 1000000 + 5;\n\nint n, m, can_use[N][N];\n\nint las, cur, cnt[2], nxt[M];\n\nint head[M]; int dp[2][M], Hash[2][M];\n\nvoid update (int zt, int val) {\n\tint _zt = zt % base;\n\tfor (int i = head[_zt]; i; i = nxt[i]) {\n\t\tif (Hash[cur][i] == zt) {\n\t\t\tdp[cur][i] += val; return;\n\t\t}\n\t}\n\tnxt[++cnt[cur]] = head[_zt];\n\thead[_zt] = cnt[cur];\n\tHash[cur][cnt[cur]] = zt;\n\tdp[cur][cnt[cur]] = val;\n}\n\nint get_val (int zt) {\n\tint _zt = zt % base;\n\tfor (int i = head[_zt]; i; i = nxt[i]) {\n\t\tif (Hash[cur][i] == zt) {\n\t\t\treturn dp[cur][i];\n\t\t}\n\t}\n\treturn 0;\n}\n\nint get_wei (int zt, int wei) {\n\treturn (zt >> (wei * 2)) % 4;\n}\n\nint alt_wei (int zt, int wei, int val) {\n\treturn zt - ((get_wei (zt, wei) - val) << (wei * 2));\n}\n\nvoid change_row () {\n\tfor (int i = 1; i <= cnt[cur]; ++i) {\n\t\tint &zt = Hash[cur][i];\n\t\tfor (int k = m; k >= 1; --k) {\n\t\t\tzt = alt_wei (zt, k, get_wei (zt, k - 1));\n\t\t}\n\t\tzt = alt_wei (zt, 0, 0);\n\t}\n}\n\nvoid print_zt (int zt) {\n\tfor (int k = 0; k<= m + 1; ++k) {\n\t\tcout << get_wei (zt, k) << \" \";\n\t}\t\n}\n\nvoid print (int x, int y) {\n\tcout << \"r = \" << x << \" c = \" << y << endl;\n\tfor (int i = 1; i <= cnt[cur]; ++i) {\n\t\tcout << \"zt = \";\n\t\tprint_zt (Hash[cur][i]);\n\t\tcout << \"dp = \" << dp[cur][i] << endl;\n\t} \n}\n\nint solve () {\n\tupdate (0, 1);\n//\tprint (0, 0);\n\tfor (int i = 1; i <= n; ++i) {\n\t\tchange_row ();\n\t\tfor (int j = 1; j <= m; ++j) {\n\t\t\tlas = cur, cur ^= 1, cnt[cur] = 0;\n\t\t\tmemset (head, 0, sizeof (head));\n\t\t\tfor (int k = 1; k <= cnt[las]; ++k) {\n\t\t\t\tint zt = Hash[las][k];\n\t\t\t\tint b1 = get_wei (zt, j - 1);\n\t\t\t\tint b2 = get_wei (zt, j - 0);\n\t\t\t\tint val = dp[las][k];\n//\t\t\t\tprint_zt (zt); cout << endl;\n//\t\t\t\tcout << \"b1 = \" << b1 << \" b2 = \" << b2 << endl;\n\t\t\t\tif (!can_use[i][j]) {\n\t\t\t\t\tif (!b1 && !b2) {\n\t\t\t\t\t\tupdate (zt, val);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (b1 == 0 && b2 == 0) {\n\t\t\t\t\t\tint b = get_wei (zt, m + 1), _zt = zt;\n\t\t\t\t\t\tif (b < 3 && can_use[i + 1][j]) {\n\t\t\t\t\t\t\t_zt = alt_wei (_zt, m + 1, b + 1); // \u65b0\u5efa\u8fde\u901a\u5206\u91cf \n\t\t\t\t\t\t\t_zt = alt_wei (_zt, j - 1, b + 1); // b1 \u90a3\u4e00\u4f4d\u6539\u4e3a\u65b0\u5206\u91cf\u7f16\u53f7 \n//\t\t\t\t\t\t\tprint_zt (zt); cout << \" -> \"; print_zt (_zt); cout << endl;\n\t\t\t\t\t\t\tupdate (_zt, val); \n\t\t\t\t\t\t}\n\t\t\t\t\t\tupdate (zt, val); // \u8fd9\u4e2a\u683c\u5b50\u4e0d\u5360\u7528 \n\t\t\t\t\t}\n\t\t\t\t\tif (b1 == 0 && b2 != 0) {\n\t\t\t\t\t\tif (can_use[i + 1][j]) {\n\t\t\t\t\t\t\tint _zt = zt; \n\t\t\t\t\t\t\t_zt = alt_wei (_zt, j - 1, b2);\n\t\t\t\t\t\t\t_zt = alt_wei (_zt, j - 0, 0);\n\t\t\t\t\t\t\t// 0_b2 -> b2_0\n//\t\t\t\t\t\t\tprint_zt (zt); cout << \" -> \"; print_zt (_zt); cout << endl;\n\t\t\t\t\t\t\tupdate (_zt, val); \n\t\t\t\t\t\t} \n\t\t\t\t\t\tif (can_use[i][j + 1]) {\n\t\t\t\t\t\t\tupdate (zt, val); \n\t\t\t\t\t\t\t// 0_b2 -> 0_b2\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (b1 != 0 && b2 == 0) {\n\t\t\t\t\t\tif (can_use[i][j + 1]) {\n\t\t\t\t\t\t\tint _zt = zt;\n\t\t\t\t\t\t\t_zt = alt_wei (_zt, j - 1, 0);\n\t\t\t\t\t\t\t_zt = alt_wei (_zt, j - 0, b1);\n\t\t\t\t\t\t\t// b1_0 -> 0_b1\n\t\t\t\t\t\t\t\n//\t\t\t\t\t\t\tprint_zt (zt); cout << \" -> \"; print_zt (_zt); cout << endl;\n\t\t\t\t\t\t\tupdate (_zt, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tint _zt = alt_wei (zt, j - 1, 0); \n\t\t\t\t\t\t// b1_0 -> 0_0\n//\t\t\t\t\t\t\tprint_zt (zt); cout << \" -> \"; print_zt (_zt); cout << endl;\n\t\t\t\t\t\tupdate (_zt, val);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} \n//\t\t\tprint (i, j);\n\t\t} \n\t}\n\tint fin = alt_wei (0, m + 1, 3);\n\treturn get_val (fin);\n} \n\nsigned main () {\n//\tfreopen (\"data.in\", \"r\", stdin);\n//\tfreopen (\"data.out\", \"w\", stdout);\n\tcin >> n >> m;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tfor (int j = 1; j <= m; ++j) {\n\t\t\tint ch = getchar ();\n\t\t\tif (ch != '.' && ch != '#') {\n\t\t\t\tch = getchar ();\n\t\t\t} \n\t\t\tif (ch == '.') can_use[i][j] = true;\n//\t\t\tcout << can_use[i][j] << \" \";\n\t\t}\n//\t\tcout << endl;\n\t}\n\tcout << solve () << endl;\n}\n```",
        "postTime": 1557388472,
        "uid": 58698,
        "name": "Nativ",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3170 \u3010[CQOI2015]\u6807\u8bc6\u8bbe\u8ba1\u3011"
    },
    {
        "content": "\u4e0d\u59a8\u6309\u884c\u8f6c\u79fb\uff0c\u90a3\u4e48\u8bb0\u5f55\u4e0a\u4e00\u884c\u4f38\u4e0b\u6765\u54ea\u4e9b\u7ad6\u7b14\u5212\u3002\u8fd9\u91cc\u7684\u72b6\u6001\u6570\u662f $\\binom m3 + \\binom m2 + \\binom m1 + 1$\u3002  \n\u5373\uff0c\u8bbe\u72b6\u6001 $f(i,p_1,p_2,p_3,k)$ \u8868\u793a\u7b2c $i$ \u884c\u4f38\u51fa\u7ad6\u7b14\u5212\u7684\u4f4d\u7f6e\u4e3a $p_1,p_2,p_3$\uff0c\u76ee\u524d\u4e00\u5171\u6709 $k$ \u4e2a L \u7684\u65b9\u6848\u6570\u3002\n\n\u8003\u8651\u884c\u95f4\u8f6c\u79fb\uff0c\u5047\u8bbe\u8fd9\u4e00\u884c\u6709 3 \u4e2a L\uff0c\u8bbe\u5b83\u4eec\u7684\u6700\u5de6\u7aef\u5206\u522b\u4e3a $p_1 < p_2 < p_3$\uff0c\u90a3\u4e48\u8f6c\u79fb\u6709\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a\n\n1. \u51ed\u7a7a\u51fa\u73b0 3 \u4e2a L\u3002\n2. \u4e0a\u4e00\u884c\u7559\u4e0b 1 \u4e2a L \u5e76\u5ef6\u7eed\u5230\u4e0b\u4e00\u884c\uff0c\u5728\u8fd9\u4e00\u884c\u51fa\u73b0 2 \u4e2a L\u3002\n3. \u4e0a\u4e00\u884c\u7559\u4e0b 1 \u4e2a L \u5e76\u622a\u6b62\u5230\u8fd9\u4e00\u884c\uff0c\u5728\u8fd9\u4e00\u884c\u51fa\u73b0 2 \u4e2a L\u3002\n4. \u4e0a\u4e00\u884c\u7559\u4e0b 2 \u4e2a L \u5e76\u5ef6\u7eed\u5230\u4e0b\u4e00\u884c\uff0c\u5728\u8fd9\u4e00\u884c\u51fa\u73b0 1 \u4e2a L\u3002\n5. \u4e0a\u4e00\u884c\u7559\u4e0b 2 \u4e2a L \u5e76\u6709 1 \u4e2a\u622a\u6b62\uff0c\u6709 1 \u4e2a\u5ef6\u7eed\u3002\u5728\u8fd9\u4e00\u884c\u51fa\u73b0 1 \u4e2a L\u3002\n6. \u4e0a\u4e00\u884c\u7559\u4e0b 2 \u4e2a L \u5e76\u622a\u6b62\u5230\u8fd9\u4e00\u884c\uff0c\u5728\u8fd9\u4e00\u884c\u51fa\u73b0 1 \u4e2a L\u3002\n7. \u4e0a\u4e00\u884c\u7559\u4e0b 3 \u4e2a L \u5e76\u5ef6\u7eed\u5230\u4e0b\u4e00\u884c\u3002\n8. \u4e0a\u4e00\u884c\u7559\u4e0b 3 \u4e2a L \u5e76\u6709 1 \u4e2a\u622a\u6b62\uff0c\u6709 2 \u4e2a\u5ef6\u7eed\u3002\n9. \u4e0a\u4e00\u884c\u7559\u4e0b 3 \u4e2a L \u5e76\u6709 2 \u4e2a\u622a\u6b62\uff0c\u6709 1 \u4e2a\u5ef6\u7eed\u3002\n10. \u4e0a\u4e00\u884c\u7559\u4e0b 3 \u4e2a L \u5e76\u622a\u6b62\u5230\u8fd9\u4e00\u884c\u3002\n\n\u7136\u540e\u8fd9\u4e00\u884c\u6709 2, 1, 0 \u4e2a L \u7684\u60c5\u51b5\u7c7b\u4f3c\u8ba8\u8bba\u5373\u53ef\u3002\n\n\u4e3a\u4e86\u8ba1\u7b97\u67d0\u4e2a L \u622a\u6b62\u5230\u8fd9\u4e00\u884c\u6709\u54ea\u4e9b\u65b9\u6848\u6570\uff0c\u9700\u8981\u9884\u5904\u7406\u6bcf\u4e2a\u4f4d\u7f6e\u53f3\u8fb9\u7684\u7b2c\u4e00\u4e2a\u969c\u788d\u7269\u7684\u5750\u6807\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(nm^3)$ \u5e26\u4e00\u4e2a\u5de8\u5927\u5e38\u6570\uff08\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\nconst int N = 30;\nint n,m;\nint nxt[N + 5][N + 5];\nlong long f[N + 5][N + 5][N + 5][N + 5][4];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tchar ch;\n\tfor(int i = 1;i <= n;++i)\n\t{\n\t\tfor(int j = 1;j <= m;++j)\n\t\t{\n\t\t\tscanf(\" %c\",&ch);\n\t\t\tif(ch == '#')\n\t\t\t\tnxt[i][j] = j;\n\t\t\telse\n\t\t\t\tnxt[i][j] = m + 1;\n\t\t}\n\t\tfor(int j = m - 1;j;--j)\n\t\t\tnxt[i][j] = min(nxt[i][j],nxt[i][j + 1]);\n\t}\n\tf[0][0][0][0][0] = 1;\n\tfor(int i = 1;i <= n;++i)\n\t\tfor(int k = 0;k <= 3;++k)\n\t\t{\n\t\t\tf[i][0][0][0][k] += f[i - 1][0][0][0][k];\n\t\t\tfor(int p1 = 1;p1 <= m;++p1)\n\t\t\t{\n\t\t\t\tif(nxt[i][p1] == p1)\n\t\t\t\t\tcontinue;\n\t\t\t\tif(k < 3)\n\t\t\t\t\tf[i][p1][0][0][k + 1] += f[i - 1][0][0][0][k];\n\t\t\t\tf[i][p1][0][0][k] += f[i - 1][p1][0][0][k];\n\t\t\t\tf[i][0][0][0][k] += f[i - 1][p1][0][0][k] * (nxt[i][p1] - p1 - 1);\n\t\t\t\tfor(int p2 = p1 + 1;p2 <= m;++p2)\n\t\t\t\t{\n\t\t\t\t\tif(nxt[i][p2] == p2)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tif(k < 2)\n\t\t\t\t\t\tf[i][p1][p2][0][k + 2] += f[i - 1][0][0][0][k];\n\t\t\t\t\tif(k < 3)\n\t\t\t\t\t\tf[i][p1][p2][0][k + 1] += f[i - 1][p1][0][0][k] + f[i - 1][p2][0][0][k],\n\t\t\t\t\t\tf[i][p2][0][0][k + 1] += f[i - 1][p1][0][0][k] * (min(nxt[i][p1],p2) - p1 - 1),\n\t\t\t\t\t\tf[i][p1][0][0][k + 1] += f[i - 1][p2][0][0][k] * (nxt[i][p2] - p2 - 1);\n\t\t\t\t\tf[i][p1][p2][0][k] += f[i - 1][p1][p2][0][k];\n\t\t\t\t\tf[i][p2][0][0][k] += f[i - 1][p1][p2][0][k] * (min(nxt[i][p1],p2) - p1 - 1);\n\t\t\t\t\tf[i][p1][0][0][k] += f[i - 1][p1][p2][0][k] * (nxt[i][p2] - p2 - 1);\n\t\t\t\t\tf[i][0][0][0][k] += f[i - 1][p1][p2][0][k] * (min(nxt[i][p1],p2) - p1 - 1) * (nxt[i][p2] - p2 - 1);\n\t\t\t\t\tfor(int p3 = p2 + 1;p3 <= m;++p3)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(nxt[i][p3] == p3)\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tif(k < 1)\n\t\t\t\t\t\t\tf[i][p1][p2][p3][k + 3] += f[i - 1][0][0][0][k];\n\t\t\t\t\t\tif(k < 2)\n\t\t\t\t\t\t\tf[i][p1][p2][p3][k + 2] += f[i - 1][p1][0][0][k] + f[i - 1][p2][0][0][k] + f[i - 1][p3][0][0][k],\n\t\t\t\t\t\t\tf[i][p2][p3][0][k + 2] += f[i - 1][p1][0][0][k] * (min(nxt[i][p1],p2) - p1 - 1),\n\t\t\t\t\t\t\tf[i][p1][p3][0][k + 2] += f[i - 1][p2][0][0][k] * (min(nxt[i][p2],p3) - p2 - 1),\n\t\t\t\t\t\t\tf[i][p1][p2][0][k + 2] += f[i - 1][p3][0][0][k] * (nxt[i][p3] - p3 - 1);\n\t\t\t\t\t\tif(k < 3)\n\t\t\t\t\t\t\tf[i][p1][p2][p3][k + 1] += f[i - 1][p1][p2][0][k] + f[i - 1][p2][p3][0][k] + f[i - 1][p1][p3][0][k],\n\t\t\t\t\t\t\tf[i][p2][p3][0][k + 1] += f[i - 1][p1][p2][0][k] * (min(nxt[i][p1],p2) - p1 - 1) + f[i - 1][p1][p3][0][k] * (min(nxt[i][p1],p2) - p1 - 1),\n\t\t\t\t\t\t\tf[i][p1][p2][0][k + 1] += f[i - 1][p1][p3][0][k] * (nxt[i][p3] - p3 - 1) + f[i - 1][p2][p3][0][k] * (nxt[i][p3] - p3 - 1),\n\t\t\t\t\t\t\tf[i][p1][p3][0][k + 1] += f[i - 1][p1][p2][0][k] * (min(nxt[i][p2],p3) - p2 - 1) + f[i - 1][p2][p3][0][k] * (min(nxt[i][p2],p3) - p2 - 1),\n\t\t\t\t\t\t\tf[i][p1][0][0][k + 1] += f[i - 1][p2][p3][0][k] * (min(nxt[i][p2],p3) - p2 - 1) * (nxt[i][p3] - p3 - 1),\n\t\t\t\t\t\t\tf[i][p2][0][0][k + 1] += f[i - 1][p1][p3][0][k] * (min(nxt[i][p1],p2) - p1 - 1) * (nxt[i][p3] - p3 - 1),\n\t\t\t\t\t\t\tf[i][p3][0][0][k + 1] += f[i - 1][p1][p2][0][k] * (min(nxt[i][p1],p2) - p1 - 1) * (min(nxt[i][p2],p3) - p2 - 1);\n\t\t\t\t\t\tf[i][p1][p2][p3][k] += f[i - 1][p1][p2][p3][k];\n\t\t\t\t\t\tf[i][p1][p2][0][k] += f[i - 1][p1][p2][p3][k] * (nxt[i][p3] - p3 - 1);\n\t\t\t\t\t\tf[i][p1][p3][0][k] += f[i - 1][p1][p2][p3][k] * (min(nxt[i][p2],p3) - p2 - 1);\n\t\t\t\t\t\tf[i][p2][p3][0][k] += f[i - 1][p1][p2][p3][k] * (min(nxt[i][p1],p2) - p1 - 1);\n\t\t\t\t\t\tf[i][p1][0][0][k] += f[i - 1][p1][p2][p3][k] * (min(nxt[i][p2],p3) - p2 - 1) * (nxt[i][p3] - p3 - 1);\n\t\t\t\t\t\tf[i][p2][0][0][k] += f[i - 1][p1][p2][p3][k] * (min(nxt[i][p1],p2) - p1 - 1) * (nxt[i][p3] - p3 - 1);\n\t\t\t\t\t\tf[i][p3][0][0][k] += f[i - 1][p1][p2][p3][k] * (min(nxt[i][p1],p2) - p1 - 1) * (min(nxt[i][p2],p3) - p2 - 1);\n\t\t\t\t\t\tf[i][0][0][0][k] += f[i - 1][p1][p2][p3][k] * (min(nxt[i][p1],p2) - p1 - 1) * (min(nxt[i][p2],p3) - p2 - 1) * (nxt[i][p3] - p3 - 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\tprintf(\"%lld\\n\",f[n][0][0][0][3]);\n}\n```",
        "postTime": 1632547105,
        "uid": 75840,
        "name": "deserter",
        "ccfLevel": 0,
        "title": "\u62d2\u7edd\u8f6e\u5ed3\u7ebf DP\uff0c\u4ece\u6211\u505a\u8d77"
    },
    {
        "content": "\u6a21\u62df\u8d5b T1\uff0c\u4f46\u662f\u88ab\u4e00\u5806\u4eba\u573a\u5207\u4e86\uff0c\u975e\u5e38\u6050\u6016\u3002\u636e\u8bf4\u53ef\u4ee5 $O(n^6)$ \u8fc7\u6389\uff01\n\n\u6211\u4eec\u8003\u8651\u5148\u679a\u4e3e\u4e09\u4e2a L \u7684\u6a2a\u7ebf\u7684\u7eb5\u5750\u6807\uff0c\u53ef\u4ee5 $O(n^3)$ \u679a\u4e3e\u3002\u6ce8\u610f\u8fd9\u91cc L \u662f\u88ab\u6807\u53f7\u7684\uff0c\u6240\u4ee5\u6700\u540e\u7b54\u6848\u8981\u9664\u4ee5 $6$\u3002\n\n\u7136\u540e\u4ece\u5de6\u5f80\u53f3 dp\uff0c$dp_{i,x,y,z}$ \u8868\u793a\u8f6c\u79fb\u5230\u7b2c $i$ \u5217\uff0c\u4e09\u4e2a L \u5f62\u7684\u72b6\u6001\u5206\u522b\u662f $x,y,z$ \u7684\u65b9\u6848\u6570\u3002\n\n\u4e0b\u9762\u662f\u72b6\u6001\u7684\u5b9a\u4e49\uff1a\n\n-  $0$ \u72b6\u6001\uff1a\u8fd8\u672a\u5f00\u59cb\u586b\u3002\n\n-  $1$ \u72b6\u6001\uff1a\u6b63\u5728\u586b\u3002\n\n-  $2$ \u72b6\u6001\uff1a\u8fd9\u4e00\u5217\u540e\u5df2\u7ecf\u586b\u5b8c\u3002\n\n\u5219\u521d\u59cb\u72b6\u6001\u4e3a $dp_{0,0,0,0}=1$\uff0c\u7ec8\u6b62\u72b6\u6001\u4e3a $dp_{m,2,2,2}$\u3002\n\ndp \u4e4b\u524d\uff0c\u5148\u5c06\u679a\u4e3e\u7684\u6a2a\u7ebf\u6309\u7167\u7eb5\u5750\u6807\u6392\u5e8f\u3002\u8fd9\u91cc\u8fd8\u53ef\u4ee5\u52a0\u4e2a\u8bb0\u5fc6\u5316\u526a\u679d\u3002\n\n\u4e2d\u95f4\u8f6c\u79fb\u65f6\uff0c\u4e00\u4e2a\u72b6\u6001\u53ea\u80fd\u8f6c\u79fb\u5230\u4ed6\u81ea\u5df1\u548c\u4e0b\u4e00\u4e2a\u72b6\u6001\uff08\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u6a2a\u7ebf\u7684\u957f\u5ea6\u81f3\u5c11\u4e3a $2$ \uff09\u3002\u4ece\u4e0a\u5230\u4e0b\u8003\u8651\u6a2a\u7ebf\uff0c\u679a\u4e3e\u4ed6\u4eec\u7684\u72b6\u6001\u548c\u8f6c\u79fb\u540e\u7684\u72b6\u6001\u3002\n\n\u5f53\u4e00\u4e2a L \u5c5e\u4e8e $1$ \u72b6\u6001\u6216\u8005\u8981\u8f6c\u79fb\u5230 $1$ \u72b6\u6001\u65f6\uff0c\u5b83\u4e0b\u9762\u8981\u586b\u7684\u4f4d\u7f6e\u5fc5\u987b\u4e0d\u4e3a `#`\u3002\n\n\u4e00\u4e2a L \u4ece $0$ \u72b6\u6001\u8f6c\u79fb\u5230 $1$ \u72b6\u6001\u65f6\uff0c\u9700\u8981\u8ba1\u7b97\u8be5 L \u5f62\u7684\u7ad6\u7ebf\u7684\u65b9\u6848\u6570\uff0c\u8fd9\u91cc\u53ef\u4ee5\u76f4\u63a5\u9884\u5904\u7406\u51fa\u6765\u3002\u7531\u4e8e\u4f1a\u6709 L \u5f62\u4ea4\u53c9\u7684\u60c5\u51b5\u53d1\u751f\uff0c\u8bb0\u5f55\u4e00\u4e0b\u4e0a\u4e00\u4e2a\u6b63\u5728\u586b\u7684 L \u7684\u6a2a\u7ebf\u7eb5\u5750\u6807\uff0c\u586b\u7ad6\u7ebf\u7684\u65f6\u5019\u4e0d\u80fd\u8d8a\u8fc7\u8fd9\u4e2a\u9650\u5236\u3002\n\n\u6700\u540e\u5c06\u6240\u6709\u7b54\u6848\u7684\u52a0\u8d77\u6765\uff0c\u9664\u4ee5 $6$\uff0c\u5c31\u505a\u5b8c\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(mn^3)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\nnamespace Spouter_27{\nusing namespace std;\n#define deb(x) cerr<<__LINE__<<\": \"<<#x<<\" \"<<x<<endl\n#define pii pair<ll,ll>\n#define mp make_pair\n#define fi first\n#define se second\ntypedef long long ll;\nconst ll N=37;\nll lowbit(ll x){return x&-x;}\nll popcount(ll x){return __builtin_popcount(x);}\nvoid sort_(ll &x,ll &y,ll &z){\n\tll t[3]={x,y,z};\n\tsort(t,t+3);\n\tx=t[0],y=t[1],z=t[2];\n}\nll n,m,a[N][N];\nll pre[N][N],vis[N][N][N];\nll dp[N][3][3][3];\nll ans,res;\nchar str[N];\nll get(ll x,ll y,ll z){\n\tsort_(x,y,z);//\u6392\u5e8f\n\tif(vis[x][y][z])\treturn vis[x][y][z];//\u8bb0\u5fc6\u5316\n\tmemset(dp,0,sizeof(dp));\n\tdp[0][0][0][0]=1;\n\tfor(int k=0;k<m;k++){\n\t\tfor(int dx=0;dx<=2;dx++)\n\t\tfor(int dy=0;dy<=2;dy++)\n\t\tfor(int dz=0;dz<=2;dz++){\n\t\t\tif(!dp[k][dx][dy][dz])\tcontinue;\n\t\t\tfor(int xx=dx;xx<=min(2,dx+1);xx++)\n\t\t\tfor(int yy=dy;yy<=min(2,dy+1);yy++)\n\t\t\tfor(int zz=dz;zz<=min(2,dz+1);zz++){\n\t\t\t\tll lst=0,cur=1;//lst\u8868\u793a\u7ad6\u7ebf\u7684\u9650\u5236\uff0ccur\u8868\u793a\u5f53\u524d\u7ad6\u7ebf\u65b9\u6848\u6570\u7684\u4e58\u79ef\n\t\t\t\tif(dx==1||xx==1){\n\t\t\t\t\tif(a[x][k+1]==1||x==lst)\tcontinue;\n\t\t\t\t\tif(dx==0)\tcur*=min(pre[x][k+1],x-lst)-1;\n\t\t\t\t\tlst=x;\n\t\t\t\t}\n\t\t\t\tif(dy==1||yy==1){\n\t\t\t\t\tif(a[y][k+1]==1||y==lst)\tcontinue;\n\t\t\t\t\tif(dy==0)\tcur*=min(pre[y][k+1],y-lst)-1;\n\t\t\t\t\tlst=y;\n\t\t\t\t}\n\t\t\t\tif(dz==1||zz==1){\n\t\t\t\t\tif(a[z][k+1]==1||z==lst)\tcontinue;\n\t\t\t\t\tif(dz==0)\tcur*=min(pre[z][k+1],z-lst)-1;\n\t\t\t\t\tlst=z;\n\t\t\t\t}\t\t\t\t\n\t\t\t\tdp[k+1][xx][yy][zz]+=dp[k][dx][dy][dz]*cur;\n\t\t\t}\n\t\t}\n\t}\n\treturn vis[x][y][z]=dp[m][2][2][2];\n}\nsigned main(){\n\tscanf(\"%lld %lld\",&n,&m);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%s\",str+1);\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(str[j]=='#')\ta[i][j]=1;\n\t\t\telse a[i][j]=0;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(a[i][j]==1)\tpre[i][j]=0;\n\t\t\telse pre[i][j]=pre[i-1][j]+1;\n\t\t}\n\t}\n\tfor(int x=1;x<=n;x++){\n\t\tfor(int y=1;y<=n;y++){\n\t\t\tfor(int z=1;z<=n;z++){\n\t\t\t\tans+=get(x,y,z);\n\t\t\t}\n\t\t}\n\t} \n\tprintf(\"%lld\\n\",ans/6);\n\treturn 0;\n}\n/*\n*/\n}signed main(){return Spouter_27::main();}\n\n```\n\n%%%He_Ren AK IOI!",
        "postTime": 1682338367,
        "uid": 310801,
        "name": "Spouter_27",
        "ccfLevel": 7,
        "title": "P3170 [CQOI2015]\u6807\u8bc6\u8bbe\u8ba1"
    },
    {
        "content": "\u697c\u4e0b\u82e5\u4e0d\u662fClaris\u672c\u4eba\u90a3\u53ef\u771f\u662f\u4f1a\u6c42\u540c\u5b58\u5f02\u554a\n\n\u8003\u8651\u96f7\u540c\u4e8e\u5730\u677f\uff08SCOI2011\uff09\u7684\u5199\u6cd5\n\n\u5b9a\u4e49\u4e24\u79cd\u63d2\u5934 \u4e00\u4e2a\u662f\u8f6c\u4e86\u5411\u7684\u4e00\u4e2a\u662f\u6ca1\u8f6c\u5411\u7684\n\n\u7136\u540e\u538b\u4e00\u4e0b\u8fdb\u6765\u591a\u5c11\u4e2a\u63d2\u5934 \u62d0\u4e86\u591a\u5c11\u4e2a\u5f2f\n\n\u6ce8\u610f\u5168\u56db\u8fdb\u5236\u5f00\u4e0d\u4e0b\uff0c\u8003\u8651\u53d8\u8fdb\u5236\u72b6\u538b\n\n\u7136\u540e\u6ce8\u610f\u7b54\u6848\u4e0d\u53d6\u6a21\n\n\u4e0d\u8981\u7528Hash_Table\u7684\u6a21\u6570\u6765\u53bb\u6a21\u4e86\n\n```cpp\nvoid Solve(){\n\tcnt[cur]=1;\n\tVal[cur][1]=1;\n\tQue[cur][1]=0;\n\tfor(int i=1;i<=n;++i){\n\t\tfor(int j=1;j<=cnt[cur];++j){\n\t\t\tQue[cur][j]=(Que[cur][j]%16)+48*(Que[cur][j]/16);\n\t\t}\n\t\tfor(int j=1;j<=m;++j){\t\t\n\t\t\tcur^=1;\n\t\t\tcnt[cur]=0;\n\t\t\tmemset(first,0,sizeof(first));\n\t\t\tfor(int k=1;k<=cnt[cur^1];++k){\n\t\t\t\tint now=Que[cur^1][k];\n\t\t\t\tint sum=Val[cur^1][k];\n\t\t\t\tint p=now%4;\n\t\t\t\tint In=(now/4)%4;\n\t\t\t\tint b1=(now/pow3[j-1])%3;\n\t\t\t\tint b2=(now/pow3[j])%3;\n\t\t\t\tif(!G[i][j]){\n\t\t\t\t\tif(!b1&&!b2){\n\t\t\t\t\t\tInsert(now,sum);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tif(!b1&&!b2){\n\t\t\t\t\t\tif(p<3&&G[i+1][j])Insert(now+1+pow3[j-1],sum);\n\t\t\t\t\t\tInsert(now,sum);\n\t\t\t\t\t}\n\t\t\t\t\tif(!b1&&b2==1){\n\t\t\t\t\t\t//Cas1\n\t\t\t\t\t\tif(G[i][j+1])Insert(now+4-pow3[j]*b2+pow3[j]*2,sum);\t\n\t\t\t\t\t\t//Cas2\n\t\t\t\t\t\tif(G[i+1][j])Insert(now-pow3[j]*b2+pow3[j-1]*1,sum);\n\t\t\t\t\t}\n\t\t\t\t\tif(b1==2&&!b2){\n\t\t\t\t\t\tif(In==3)ans=ans+sum;\n\t\t\t\t\t\tif(G[i][j+1])Insert(now-pow3[j-1]*b1+pow3[j]*2,sum);\n\t\t\t\t\t\tInsert(now-pow3[j-1]*b1,sum);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t}\n\t}\n\tcout<<ans;\n}\n```\n",
        "postTime": 1550910437,
        "uid": 28147,
        "name": "\u5289\u5b50\u98ba",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3170 \u3010[CQOI2015]\u6807\u8bc6\u8bbe\u8ba1\u3011"
    },
    {
        "content": "# Part 1\uff1a\u524d\u8a00\n\u770b\u5230\u9898\u89e3\u533a\u5168\u662f\u63d2\u5934 dp\uff0c\u8fd9\u91cc\u6765\u8865\u4e00\u4e2a\u6a21\u62df\u8d5b\u91cc\u51b2\u51fa\u6765\u7684\u5bb9\u65a5\u7684\u505a\u6cd5\uff0c\u590d\u6742\u5ea6 $O(n^6)$\u3002\u4f46\u662f\u88ab\u5361\u5e38\uff0c\u5f53\u524d\u5728\u6d1b\u8c37\u4e0a\u88ab\u6485\u6210\u4e86 80 \u5206\uff0c\u5982\u679c\u6709\u8001\u54e5\u80fd\u5e2e\u6211\u5361\u8fc7\u4e86\u53ef\u4ee5\u79c1\u4fe1\u6211\uff0c\u611f\u6fc0\u4e0d\u5c3d/kt\u3002\n\n\u7531\u4e8e\u672c\u4eba\u7565\u61d2\uff0c\u56e0\u6b64\u672c\u7bc7\u9898\u89e3\u53ef\u80fd\u504f\u5411\u9648\u8ff0\u7ed3\u8bba\uff0c\u5ffd\u7565\u4e86\u5f88\u591a\u5173\u4e8e\u4e00\u6b65\u4e00\u6b65\u63a8\u51fa\u7684\u5197\u957f\u601d\u8def\uff0c\u5f80\u8bfb\u8005\u89c1\u8c05\u3002\u8bf4\u4eba\u8bdd\u5c31\u662f\uff0c\u770b\u8fd9\u7bc7\u4e5f\u5c31\u56fe\u4e00\u4e50\uff0c\u771f\u56fe\u4e00\u4e50\u8fd8\u5f97\u770b\u8fd9\u7bc7\u3002\n\n**Warning\uff1a** \u5982\u679c\u4f60\u771f\u7684\u60f3\u5f7b\u5e95\u7406\u89e3\u8fd9\u4e2a\u505a\u6cd5\uff0c\u8bf7\u52a1\u5fc5\u753b\u56fe\uff0c\u5e76\u4fdd\u6301\u8010\u5fc3\uff0c\u6211\u573a\u4e0a\u6fc0\u70c8\u7684\u5199\u4e86\u56db\u4e2a\u534a\u5c0f\u65f6\u3002\n# Part 2\uff1a\u6b63\u6587\n\u9996\u5148\u770b\u5230\u8981\u6c42\u4e09\u4e2a L \u7684\u6570\u91cf\uff0c\u679c\u65ad\u60f3\u5230\u79cd\u82b1\uff0c\u679a\u4e3e\u4e09\u4e2a L \u7684\u62d0\u70b9\uff08\u8003\u8651\u5230\u679a\u4e3e\u4e0a\u53f3\u4e24\u4e2a\u70b9\u4e0d\u597d\u7ef4\u62a4\uff0c\u56e0\u4e3a\u8d21\u732e\u4e0d\u56fa\u5b9a\uff0c\u540c\u65f6\u4e5f\u4e0d\u597d\u7ef4\u62a4\u4e0d\u4ea4\u8fd9\u4e00\u9650\u5236\uff09\u3002\u4e0b\u6587\u4e2d\u6211\u4eec\u94a6\u5b9a\u4e09\u4e2a $l$ \u7684\u62d0\u70b9\u7684\u6a2a\u7eb5\u5750\u6807\u5206\u522b\u4e3a $(x_1,y_1),(x_2,y_2),(x_3,y_3)$\u3002\u4e0d\u59a8\u94a6\u5b9a $y_1<y_2<y_3$\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u6682\u4e0d\u8003\u8651\u76f8\u7b49\u5173\u7cfb\uff0c\u8fd9\u4e2a corner \u653e\u5230\u6700\u540e\u8ba8\u8bba\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u4e0b\u6587\u4e2d\uff0c\u6211\u4eec\u9ed8\u8ba4\u4e09\u4e2a\u62d0\u70b9\u6a2a\u7eb5\u5750\u6807\u4e92\u4e0d\u76f8\u540c\u3002\n\n\u6ce8\u610f\u5230\u4e24\u4e2a\u70b9\u76f8\u4e92\u4e4b\u95f4\u6709\u5f71\u54cd\u5f53\u4e14\u4ec5\u5f53\u5176\u5728\u53e6\u4e00\u4e2a\u62d0\u70b9\u7684\u5de6\u4e0a\u6216\u53f3\u4e0b\u77e9\u5f62\u4e2d\uff0c\u56e0\u6b64\u4e0d\u96be\u60f3\u5230\u679a\u4e3e\u6bcf\u4e2a\u8282\u70b9\uff0c\uff0c\u5e76\u6839\u636e\u7eb5\u5750\u6807\u987a\u5e8f\u5206\u7c7b\u8ba8\u8bba\uff0c\u4e0b\u6587\u4e2d\uff0c\u6211\u4eec\u6309\u7167\u4ece\u7b80\u5355\u5230\u590d\u6742\u7684\u89d2\u5ea6\u5206\u5f00\u8003\u8651\u3002\n\n\u540c\u65f6\uff0c\u56e0\u4e3a\u5f0f\u5b50\u592a\u957f\uff0c\u5e76\u4e0d\u5199\u51fa\u5177\u4f53\u5f0f\u5b50\uff0c\u53ef\u4ee5\u5230\u4ee3\u7801\u4e2d\u89c2\u770b\u5177\u4f53\u5f0f\u5b50\u3002\u4ee3\u7801\u4e2d\u7684 $sumx(i,j)$ \u548c $sumy(i,j)$ \u5206\u522b\u8868\u793a\u4ece $(i,j)$ \u53f7\u70b9\u5411\u4e0a\u6216\u5411\u53f3\u4e0d\u7ecf\u8fc7\u969c\u788d\u7684\u524d\u63d0\u4e0b\u7684\u6700\u957f\u957f\u5ea6\u3002\n\n- $x_1>x_2>x_3$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/wj7jved0.png)\n\n\u6b64\u65f6\u4e09\u4e2a L \u7684\u5173\u7cfb\u5171\u6709\u4e0a\u56fe\u4e2d\u7684\u4e00\u79cd\u60c5\u51b5\uff0c\u7531\u4e8e\u5176\u4e92\u4e0d\u5f71\u54cd\uff0c\u5f0f\u5b50\u662f\u6613\u5f97\u7684\uff0c\u5177\u4f53\u53ef\u89c1\u4ee3\u7801\u7684 `_123` \u90e8\u5206\u3002\n\n- $x_1>x_3>x_2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jcxe5ec6.png)\n\n\u6b64\u65f6\u4e09\u4e2a L \u7684\u5173\u7cfb\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u89c1\u4e0a\u56fe\u3002\u8003\u8651\u5230\u76f4\u63a5\u7edf\u8ba1\u6bd4\u8f83\u5197\u957f\uff0c\u6211\u4eec\u4f7f\u7528\u5bb9\u65a5\uff0c\u4e0d\u5408\u6cd5\u7684\u65b9\u6848\u5373\u4e3a\u4e24\u4e2a L \u6709\u4ea4\uff0c\u65b9\u6848\u6570\u5373\u4e3a\u4ee3\u7801\u4e2d\u7684 `_132` \u90e8\u5206\u3002\n\n- $x_2>x_1>x_3$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0bhnsljx.png)\n\n\u6b64\u65f6\u4e09\u4e2a L \u7684\u5173\u7cfb\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u89c1\u4e0a\u56fe\u3002\u540c\u6837\u4f7f\u7528\u5bb9\u65a5\uff0c\u7b54\u6848\u5373\u4ee3\u7801\u4e2d\u7684 `_213` \u90e8\u5206\u3002\n\n- $x_2>x_3>x_1$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6il9eq5p.png)\n\n\u6b22\u8fce\u6765\u5230\u5730\u72f1\u6a21\u5f0f /mgx\u3002\n\n\u4f60\u53ef\u80fd\u4f1a\u60f3\u5bf9\u4e0a\u9762\u4e09\u79cd\u60c5\u51b5\u5206\u5f00\u5bb9\u65a5\u4e00\u904d\uff0c\u4f46\u8fd9\u5b9e\u9645\u4e0a\u662f\u4e0d\u5bf9\u7684\uff0c\u56e0\u4e3a\u4e0b\u56fe\u4e2d\u7684\u60c5\u51b5\u4f1a\u88ab\u7b97\u4e24\u904d\u751a\u81f3\u591a\u904d\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zhszi5lp.png)\n\n\u600e\u4e48\u529e\uff1f\u5f3a\u884c\u94a6\u5b9a\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e2d\u7b2c\u4e00\u4e2a\u7684\u6a2a\u5411\u957f\u5ea6\u5fc5\u987b\u8986\u76d6\u8fc7\u7b2c\u4e8c\u4e2a\u7684\u6a2a\u5750\u6807\uff0c\u7b2c\u4e09\u79cd\u60c5\u51b5\u4e2d\u7b2c\u4e00\u4e2a\u7684\u6a2a\u5411\u957f\u5ea6\u5fc5\u987b\u957f\u4e8e\u7b2c\u4e09\u4e2a\u7684\u6a2a\u5750\u6807\u3002\u53ef\u4ee5\u53d1\u73b0\u8fd9\u6837\u8ba9\u6bcf\u79cd\u60c5\u51b5\u7edf\u8ba1\u4e86\u4e00\u6b21\uff0c\u56e0\u6b64\u5bf9\u6bcf\u79cd\u60c5\u51b5\u6309\u7167\u7b2c\u4e8c\u4e2a\u8ba8\u8bba\u7684\u8ba8\u8bba\u65b9\u5f0f\u505a\u4e00\u904d\u5e76\u52a0\u4e0a\u5f3a\u884c\u94a6\u5b9a\u7684\u9650\u5236\u5373\u53ef\u3002\u5177\u4f53\u5f0f\u5b50\u53ef\u4ee5\u89c1 `_231` \u90e8\u5206\u3002\n\n- $x_3>x_1>x_2$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/r8rpkeas.png)\n\n\u540c\u6837\u8ddf\u4e0a\u4e00\u4e2a\u505a\u6cd5\u7c7b\u4f3c\uff0c\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u94a6\u5b9a\u3002\n\n\u4f18\u5148\u7edf\u8ba1\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u7136\u540e\u5bf9\u4e8e\u7b2c\u4e09\u79cd\u60c5\u51b5\uff0c\u5f3a\u884c\u94a6\u5b9a\u4e09\u5fc5\u987b\u76d6\u8fc7\u4e00\uff0c\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u5f3a\u884c\u94a6\u5b9a\u4e09\u5fc5\u987b\u76d6\u8fc7\u4e8c\u3002\u5177\u4f53\u5f0f\u5b50\u89c1 `_312` \u90e8\u5206\u3002\u7531\u6b64\u548c\u4e0a\u9762\u4e00\u6837\uff0c\u53ef\u4ee5\u8bc1\u660e\u6bcf\u79cd\u60c5\u51b5\u90fd\u88ab\u7edf\u8ba1\u4e86\u4e00\u6b21\u3002\n\n- $x_3>x_2>x_1$\n\n\u5c0f\u65f6\u5019\u5199\u8fd9\u4e2a\u628a\u5bb6\u91cc\u6df9\u4e86/cf\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0kly74jo.png)\n\n\u4f9d\u7136\u628a\u6240\u6709\u60c5\u51b5\u5217\u51fa\u6765\u3002\u8fd9\u4e2a\u7684\u96be\u70b9\u5728\u4e8e\u4ec0\u4e48\uff1f\u6ca1\u6709\u660e\u786e\u7684\u5bb9\u65a5\u94a6\u5b9a\u987a\u5e8f\uff0c\u4ed6\u4eec\u7684\u5bb9\u65a5\u94a6\u5b9a\u5173\u7cfb\u6784\u6210\u4e86\u4e00\u4e2a\u56fe\u3002\n\n\u8003\u8651\u6211\u4eec\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u5bb9\u65a5\uff0c\u5373\u5904\u7406\u4e24\u4e2a\u540c\u65f6\u7f29\u8fdb\u53bb\u7684\u60c5\u51b5\uff0c\u8fd9\u4e2a\u4f1a\u5728\u591a\u79cd\u60c5\u51b5\u4e2d\u5206\u522b\u7edf\u8ba1\u3002\u56e0\u6b64\u6211\u4eec\u5728\u7edf\u8ba1\u4e00\u4e2a\u56fe\u7684\u65f6\u5019\uff0c\u5c06\u5176\u4e24\u8fb9\u7684\u90fd\u7f29\u8fdb\u53bb\uff0c\u5728\u524d\u9762\u5df2\u7edf\u8ba1\u7684\u56fe\u4e2d\u5bfb\u627e\u662f\u5426\u6709\u8ddf\u5b83\u5f62\u6210\u4e00\u6837\u7684\u56fe\u7684\u56fe\uff0c\u5982\u679c\u6709\uff0c\u6211\u4eec\u5f3a\u884c\u94a6\u5b9a\uff0c\u5426\u5219\u6211\u4eec\u628a\u4e24\u8fb9\u90fd\u7f29\u8fdb\u53bb\u7684\u56fe\u4e22\u5728\u8fd9\u4e2a\u56fe\u4e0a\u7edf\u8ba1\u3002\u4e0b\u9762\u4f9d\u7136\u76f4\u63a5\u7ed9\u51fa\u5bb9\u65a5\u65b9\u6848\u3002\n\n\u9996\u5148\u7edf\u8ba1\u4e0a\u56fe\u4e2d\u7b2c\u4e00\u884c\u7b2c\u4e09\u5217\u7684\u60c5\u51b5\uff0c\u7136\u540e\u7edf\u8ba1\u7b2c\u4e00\u884c\u7b2c\u4e00\u5217\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u94a6\u5b9a\u7b2c\u4e09\u4e2a\u76d6\u8fc7\u7b2c\u4e8c\u4e2a\u3002\u7136\u540e\u7edf\u8ba1\u7b2c\u4e8c\u884c\u7b2c\u4e8c\u5217\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u94a6\u5b9a\u7b2c\u4e00\u4e2a\u76d6\u8fc7\u7b2c\u4e8c\u4e2a\u3002\u4e0b\u9762\u7edf\u8ba1\u7b2c\u4e8c\u884c\u7b2c\u4e00\u5217\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u94a6\u5b9a\u7b2c\u4e00\u4e2a\u76d6\u8fc7\u7b2c\u4e8c\u4e2a\uff0c\u7b2c\u4e09\u4e2a\u76d6\u8fc7\u7b2c\u4e8c\u4e2a\uff0c\u6700\u540e\u7edf\u8ba1\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u7684\u60c5\u51b5\uff0c\u6b64\u65f6\u94a6\u5b9a\u7b2c\u4e00\u4e2a\u76d6\u8fc7\u7b2c\u4e8c\u4e2a\uff0c\u7b2c\u4e09\u4e2a\u76d6\u8fc7\u7b2c\u4e00\u4e2a\u3002~~\u4e0d~~\u5bb9\u6613\u8bc1\u660e\uff0c\u8fd9\u6837\u7edf\u8ba1\u4e86\u6bcf\u79cd\u60c5\u51b5\u4e00\u6b21\u4e14\u4ec5\u4e00\u6b21\u3002\u5177\u4f53\u5f0f\u5b50\u53ef\u4ee5\u89c1 `_321` \u90e8\u5206\u3002\n\n\u7ed3\u675f\u4e86\uff1f\u8fd8\u6ca1\u6709\u3002\u73b0\u5728\u6211\u4eec\u53bb\u8003\u8651\u5750\u6807\u76f8\u540c\u7684\u95ee\u9898\u3002\n\n\u5bf9\u4e8e $y$ \u76f8\u540c\uff0c\u6211\u4eec\u624b\u7b97\u4e00\u4e0b\u5728\u4e0a\u9762\u7684\u5bb9\u65a5\u4e2d\u53ef\u4ee5\u88ab\u6b63\u786e\u7edf\u8ba1\u3002\u73b0\u5728\u7684\u95ee\u9898\u5728\u4e8e $x$ \u76f8\u540c\u3002\u8003\u8651\u6b64\u65f6\u5bf9\u4e8e\u8fd9\u4e24\u4e2a L \u800c\u8a00\uff0c\u5176\u9700\u8981\u88ab\u7edf\u8ba1\u8986\u76d6\u5173\u7cfb\uff0c\u56e0\u6b64\u6211\u4eec\u5c06\u6bd4\u8f83\u8f6c\u4e3a $(x_i,-i)$ \u7684\u4e8c\u5143\u7ec4\u6bd4\u8f83\u5927\u5c0f\u3002\u6362\u8a00\u4e4b\uff0c\u6211\u4eec\u8ba9\u76f8\u7b49\u7684\u6570\u6784\u6210\u9006\u5e8f\u5bf9\uff0c\u8fd9\u6837\u5c31\u80fd\u5728\u4e0a\u8ff0\u7684\u7edf\u8ba1\u65b9\u6cd5\u4e2d\u4f53\u73b0\u8986\u76d6\u5173\u7cfb\u3002\u56e0\u6b64\u6211\u4eec\u4e0a\u8ff0\u7684\u516d\u4e2a\u6761\u4ef6\u53ef\u4ee5\u5199\u4e3a\u5982\u4e0b\u516d\u4e2a\u6761\u4ef6\u3002\n\n- $x_3<x_2<x_1$\n- $x_2\\le x_3<x_1$\n- $x_3<x_1\\le x_2$\n- $x_2<x_1\\le x_3$\n- $x_1\\le x_3<x_2$\n- $x_1\\le x_2\\le x_3$\n\n\u505a\u5b8c\u4e86\u3002\n\n\n# Part 3\uff1a\u4ee3\u7801\n\u592a\u957f\u4e86\uff0c\u4e22\u5230[\u526a\u8d34\u677f](https://www.luogu.com.cn/paste/4js5yr87)\u3002\n\n\u5efa\u8bae\u590d\u5236\u5230\u672c\u5730\u89c2\u770b\uff0c\u4e2d\u95f4\u7684\u7a7a\u683c\u662f\u4e3a\u4e86\u65b9\u4fbf\u5bf9\u9f50\u3002\n\n# Part 4\uff1a\u540e\u6587\n\n\u8fd9\u7bc7\u9898\u89e3\u4e0d\u662f\u7acb\u523b\u5199\u7684\uff0c\u800c\u662f\u4e00\u70b9\u70b9\u8865\u7684\u3002\u6211\u5199\u8fd9\u7bc7\u9898\u89e3\u7684\u65f6\u5019\u4e00\u76f4\u5728\u9707\u64bc\u6211\u5f53\u65f6\u5230\u5e95\u5728\u60f3\u4ec0\u4e48\u3002\u611f\u89c9\u4ee5\u540e\u8fd8\u662f\u4e0d\u80fd\u592a\u7ecf\u9a8c\u4e3b\u4e49\u7684\u5bf9\u7740\u6570\u636e\u8303\u56f4\u60f3\u590d\u6742\u5ea6\u4e86/qd\u3002\n",
        "postTime": 1682335857,
        "uid": 373699,
        "name": "EXODUS",
        "ccfLevel": 0,
        "title": "P3170\u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u770b\u5230\u9898\u5f88\u5bb9\u6613\u80fd\u60f3\u5230\u63d2\u5934 DP\u3002\u4f46\u662f\u6570\u636e\u8303\u56f4\u5f88\u5927\uff0c$n,m \\le 30$\uff0c\u76f4\u63a5\u538b\u4f1a\u5f88\u7206\u70b8\u3002\u4e0d\u8fc7\u53d1\u73b0\u5408\u6cd5\u72b6\u6001\u5f88\u5c11\uff0c\u56e0\u4e3a\u8f6e\u5ed3\u7ebf\u4e0a\u6700\u591a\u540c\u65f6\u53ea\u80fd\u6709\u4e09\u4e2a\u63d2\u5934\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u72b6\u6001\u90fd\u662f\u4e0d\u5408\u6cd5\u7684\u3002\n\n\u4e00\u79cd\u65b9\u6cd5\u662f\u76f4\u63a5\u54c8\u5e0c\u8868\u8bb0\u5f55\u5408\u6cd5\u72b6\u6001\uff0c\u53ef\u4ee5\u53c2\u8003\u5176\u4ed6\u9898\u89e3\uff0c\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u76f4\u63a5\u8bb0\u5f55\u8fd9\u4e09\u4e2a\u63d2\u5934\u7684\u4f4d\u7f6e\uff0c\u800c\u4e0d\u662f\u8bb0\u5f55\u6bcf\u4e2a\u4f4d\u7f6e\u6709\u6ca1\u6709\u63d2\u5934\u3002\n\n\u53d1\u73b0 $30$ \u8fd9\u4e2a\u6570\u6b63\u597d\u80fd\u538b\u5230 $32$ \u4e2d\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u538b\u7f29\u72b6\u6001\uff1a\u524d\u4e24\u4f4d\u4ee3\u8868\u5df2\u7ecf\u653e\u4e86\u51e0\u4e2a\u63d2\u5934\uff08$3=2^2-1$\uff09\uff0c\u540e\u9762\u6709\u4e09\u4e2a\u4e94\u4f4d\u8bb0\u5f55\u4e09\u4e2a\u63d2\u5934\u7684\u4f4d\u7f6e\uff08$31=2^5-1$\uff09\uff0c\u8fd9\u6837\u4e00\u4e2a\u72b6\u6001\u6700\u5927\u53ea\u6709 $2^{17}-1=131071$\u3002\n\n\u8f6c\u79fb\u5c31\u6bd4\u8f83\u8f7b\u677e\u4e86\uff0c\u5206\u4e94\u79cd\u60c5\u51b5\uff1a\n\n1. \u8fd9\u4e00\u683c\u662f\u969c\u788d\uff1a\u76f4\u63a5\u8f6c\u79fb\u8fc7\u53bb\u3002\n2. \u6ca1\u6709\u5411\u53f3\u548c\u5411\u4e0b\u7684\u63d2\u5934\uff1a\u8fd9\u4e00\u683c\u53ef\u4ee5\u4e0d\u653e\uff0c\u53ef\u4ee5\u4e3a\u4e00\u4e2a L \u7684\u8d77\u70b9\u3002\n3. \u53ea\u6709\u5411\u4e0b\u7684\u63d2\u5934\uff1a\u90a3\u4e48\u8bf4\u660e\u8fd9\u80af\u5b9a\u662f L \u4e0a\u9762\u8f6c\u79fb\u4e0b\u6765\u7684\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5411\u4e0b\u5ef6\u4f38\uff0c\u6216\u8005\u5411\u53f3\u62d0\u3002\n4. \u53ea\u6709\u5411\u53f3\u7684\u63d2\u5934\uff1a\u90a3\u4e48\u8bf4\u660e\u4e00\u5b9a\u662f L \u62d0\u5f2f\u4e4b\u540e\u8fc7\u6765\u7684\uff0c\u53ef\u4ee5\u7ee7\u7eed\u5411\u53f3\u5ef6\u4f38\uff0c\u6216\u8005\u5728\u8fd9\u91cc\u7ed3\u675f\u3002\n5. \u540c\u65f6\u6709\u5411\u53f3\u548c\u5411\u4e0b\u7684\u63d2\u5934\uff1a\u6b64\u79cd\u60c5\u51b5\u4e0d\u5408\u6cd5\uff0c\u76f4\u63a5\u8df3\u8fc7\u3002\n\n\u8fd9\u6837\u5b9e\u73b0\u7565\u9ebb\u70e6\uff0c\u6211\u4f7f\u7528\u4e86\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u5c01\u88c5\u72b6\u6001\uff0c\u81ea\u8ba4\u4e3a\u8fd8\u662f\u633a\u6e05\u65b0\u7684\uff09\u8fd9\u6837\u5c31\u53ef\u4ee5\u6bd4\u8f83\u65b9\u4fbf\u7684\u8f6c\u79fb\uff0c\u5177\u4f53\u770b\u4ee3\u7801\u5427\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int MAXN = 100005;\nstruct DATA {\n    int cnt, a, b, c;\n    DATA(int q) { // \u5c06 int \u8f6c\u6362\u4e3a\u72b6\u6001\n        cnt = q & 3;\n        a = q >> 2 & 31;\n        b = q >> 7 & 31;\n        c = q >> 12 & 31;\n    }\n    DATA(int cnt, int a, int b, int c) : cnt(cnt), a(a), b(b), c(c) {}\n    operator int() { // \u5c06\u72b6\u6001\u8f6c\u6362\u4e3a int\n        if (a > b) swap(a, b);\n        if (b > c) swap(b, c);\n        if (a > b) swap(a, b);\n        return cnt | (a << 2) | (b << 7) | (c << 12);\n    }\n    DATA replace(int a, int b, int d = 0) { // \u66ff\u6362\u63d2\u5934\u7684\u4f4d\u7f6e\uff0cd \u4ee3\u8868 cnt \u662f\u5426\u52a0 1\n        DATA c = *this;\n        if (c.a == a) c.a = b;\n        else if (c.b == a) c.b = b;\n        else if (c.c == a) c.c = b;\n        c.cnt += d;\n        return c;\n    }\n};\nint n, m;\nconst int T = 10007;\nstruct Hash { // \u54c8\u5e0c\u8868\n    int fst[T], nxt[T], tot, v[T], k[T];\n    void insert(int d, int vv) {\n        int h = d % T;\n        v[++tot] = vv;\n        k[tot] = d;\n        nxt[tot] = fst[h];\n        fst[h] = tot;\n    }\n    int find(int d) {\n        int h = d % T;\n        int p = fst[h];\n        while (p && k[p] != d) p = nxt[p];\n        return v[p];\n    }\n    void clear() {\n        tot = 0;\n        memset(fst, 0, sizeof fst);\n    }\n}mp[2];\nlong long f[2][MAXN], cnt;\nvoid S(int d, int a, long long b) { // \u66f4\u65b0\u7b54\u6848\u51fd\u6570\n    int q = mp[d].find(a);\n    if (q) f[d][q] += b;\n    else mp[d].insert(a, ++cnt), f[d][cnt] = b;\n}\nchar ch[44][44];\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i++) scanf(\"%s\", ch[i] + 1);\n    f[0][1] = 1, mp[0].insert(DATA{0, 0, 0, 0}, 1);\n    for (int i = 1, t = 0; i <= n; i++) {\n        for (int j = 1; j <= mp[t].tot; j++) { // \u65b0\u4e00\u884c\u72b6\u6001\u8981\u5411\u53f3\u5e73\u79fb\n            DATA ori = mp[t].k[j]; \n            if (ori.a) ori.a++; \n            if (ori.b) ori.b++; \n            if (ori.c) ori.c++;\n            mp[t].k[j] = ori;\n        }\n        for (int j = 1; j <= m; j++) {\n            t ^= 1, cnt = 0;\n            mp[t].clear();\n            for (int k = 1; k <= mp[t ^ 1].tot; k++) {\n                DATA s = mp[t ^ 1].k[k];\n                long long ans = f[t ^ 1][mp[t ^ 1].v[k]];\n                int r = s.a == j || s.b == j || s.c == j, \n                    d = s.a == j + 1 || s.b == j + 1 || s.c == j + 1;\n                if (ch[i][j] == '#') { // case 1\n                    S(t, s, ans);\n                } else if (!r && !d) { // case 2\n                    S(t, s, ans);\n                    if (ch[i + 1][j] == '.' && s.cnt < 3)\n                        S(t, s.replace(0, j, 1), ans);\n                } else if (!r && d) { // case 3\n                    if (ch[i + 1][j] == '.') S(t, s.replace(j + 1, j), ans);\n                    if (ch[i][j + 1] == '.') S(t, s, ans);\n                } else if (r && !d) { // case 4\n                    if (ch[i][j + 1] == '.') S(t, s.replace(j, j + 1), ans);\n                    S(t, s.replace(j, 0), ans);\n                } else if (r && d) { // case 5\n                    \"go to hell\";\n                }\n            }\n        }\n        if (i == n) {\n            printf(\"%lld\\n\", f[t][mp[t].find(DATA{3, 0, 0, 0})]);\n        }\n    }\n    return 0;\n}\n```",
        "postTime": 1646223557,
        "uid": 279652,
        "name": "APJifengc",
        "ccfLevel": 9,
        "title": "\u300c\u89e3\u9898\u62a5\u544a\u300d[CQOI2015]\u6807\u8bc6\u8bbe\u8ba1"
    },
    {
        "content": "\u8f6e\u5ed3\u7ebf\u63d2\u5934DP\u3002\n\n\u8bbef[i][j][a][b][c][d][e]f[i][j][a][b][c][d][e]\u8868\u793a\u8003\u8651\u5230\u4e86(i,j)(i,j)\uff0c\u8f6e\u5ed3\u7ebf\u4e0a3\u4e2a\u4e0b\u63d2\u5934\u7684\u4f4d\u7f6e\u5206\u522b\u4e3aa,b,ca,b,c\uff0c\u662f\u5426\u6709\u53f3\u63d2\u5934\uff0c\u5df2\u7ecf\u653e\u4e86ee\u4e2aLL\u7684\u65b9\u6848\u6570\u3002\n\n\u7136\u540e\u76f4\u63a5DP\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6O(nm4)O(nm4)\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n~~~\n#include<cstdio>\nconst int N=33,M=4530;\nint n,m,cnt,o,i,j,k,x,id[N][N][N];long long f[2][M][2][4];char a[N];\nstruct P{int a,b,c;P(){}P(int _a,int _b,int _c){a=_a,b=_b,c=_c;}}q[M];\nint main(){\n  scanf(\"%d%d\",&n,&m);\n  for(i=0;i<=m;i++)for(j=i?i+1:0;j<=m;j++)for(k=j?j+1:0;k<=m;k++)q[cnt++]=P(i,j,k);\n  for(i=0;i<cnt;i++){\n    id[q[i].a][q[i].b][q[i].c]=i;\n    id[q[i].a][q[i].c][q[i].b]=i;\n    id[q[i].b][q[i].a][q[i].c]=i;\n    id[q[i].b][q[i].c][q[i].a]=i;\n    id[q[i].c][q[i].a][q[i].b]=i;\n    id[q[i].c][q[i].b][q[i].a]=i;\n  }\n  for(f[0][0][0][0]=i=1;i<=n;i++){\n    for(k=0;k<cnt;k++)for(x=0;x<4;x++)f[o][k][1][x]=0;\n    scanf(\"%s\",a+1);\n    for(j=1;j<=m;j++){\n      o^=1;\n      for(k=0;k<cnt;k++)for(x=0;x<4;x++)f[o][k][0][x]=f[o][k][1][x]=0;\n      for(k=0;k<cnt;k++)for(x=0;x<4;x++){\n        if(f[o^1][k][0][x]){\n          if(a[j]=='.'){\n            f[o][k][0][x]+=f[o^1][k][0][x];\n            if(q[k].a==j)f[o][id[0][q[k].b][q[k].c]][1][x]+=f[o^1][k][0][x];\n            else if(q[k].b==j)f[o][id[q[k].a][0][q[k].c]][1][x]+=f[o^1][k][0][x];\n            else if(q[k].c==j)f[o][id[q[k].a][q[k].b][0]][1][x]+=f[o^1][k][0][x];\n            else if(x<3)f[o][id[j][q[k].b][q[k].c]][0][x+1]+=f[o^1][k][0][x];\n          }else if(q[k].a!=j&&q[k].b!=j&&q[k].c!=j)f[o][k][0][x]+=f[o^1][k][0][x];\n        }\n        if(f[o^1][k][1][x]&&a[j]=='.'){\n          if(q[k].a==j||q[k].b==j||q[k].c==j)continue;\n          f[o][k][0][x]+=f[o^1][k][1][x];\n          f[o][k][1][x]+=f[o^1][k][1][x];\n        }\n      }\n    }\n  }\n  return printf(\"%lld\",f[o][0][0][3]),0;\n}\n~~~",
        "postTime": 1548569399,
        "uid": 115066,
        "name": "yang2018",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3170 \u3010[CQOI2015]\u6807\u8bc6\u8bbe\u8ba1\u3011"
    }
]
[
    {
        "content": "\u8fd9\u9053\u9898\u5982\u679c\u4e0d\u8003\u8651\u6d2a\u6c34\u7684\u8bdd\uff0c\u5c31\u662f\u4e00\u9053\u88f8\u7684bfs\u3002\n\n\u52a0\u4e86\u8fd9\u4e2a\u6d2a\u6c34\u4e4b\u540e\u53ea\u9700\u8981\u5904\u7406\u6d2a\u6c34\u5230\u8fbe\u6bcf\u4e00\u4e2a\u683c\u5b50\u7684\u6700\u65e9\u65f6\u95f4\uff0c\u5728\u5e7f\u641c\u8fc7\u7a0b\u4e2d\u5982\u679c\u9047\u5230\u6709\u73b0\u5728\u7684\u65f6\u95f4\u5927\u4e8e\u7b49\u4e8e\u8fd9\u4e2a\u683c\u5b50\u7684\u6d2a\u6c34\u5230\u8fbe\u65f6\u95f4\u5c31\u76f4\u63a5\u6254\u6389\u3002\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f\u5728\u5904\u7406\u6d2a\u6c34\u7684\u65f6\u5019\u5982\u679c\u5f53\u524d\u662f\u907f\u96be\u6240\u6216\u8005\u969c\u788d\u7269\u5c31\u4e0d\u80fd\u52a0\u5165\u961f\u5217\u3002\n\n\u53e6\u5916\u4e00\u4e2a\u5751\u70b9\u5c31\u662f\u4f1a\u6709\u591a\u4e2a\u51fa\u6d2a\u6c34\u7684\u70b9\uff0c\u6240\u4ee5\u6d2a\u6c34\u8981\u5148\u8d4b\u503c\u6210\u4e00\u4e2a\u5f88\u5927\u7684\u503c\uff0c\u518d\u7528min\u66f4\u65b0\u800c\u4e0d\u662f\u76f4\u63a5\u8d4b\u503c\u3002\n\n\u5f53\u65f6\u8003\u8bd5\u7684\u65f6\u5019\u6ca1\u60f3\u4ed4\u7ec6\uff0c\u5176\u5b9e\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u628a\u6240\u6709\u51fa\u6c34\u70b9\u90fd\u52a0\u5165\u961f\u5217\uff0c\u7136\u540e\u518d\u641c\u7d22\uff0c\u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6\u4f1a\u5c0f\u5f88\u591a\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m;\nchar a[55][55];\nint fx[4][2]={1,0,0,1,-1,0,0,-1};\nstruct node {\n\tint x;\n\tint y;\n\tint cnt;//\u5f53\u524d\u7684\u65f6\u95f4\n};\nint water[55][55];\nbool h_used[55][55];\nqueue <node> Water;\nnode startt,endd;\nqueue <node> Q;\nnode X[2505];\nint xid;\nvoid Water_Bfs(){\n\twhile(!Water.empty()){\n\t\tnode noww=Water.front();\n\t\tWater.pop();\n\t\tnoww.cnt++;\n\t\tfor(int i=0;i<4;i++){\n\t\t\tnode _next=noww;\n\t\t\t_next.x+=fx[i][0],_next.y+=fx[i][1];\n\t\t\tif(_next.x<1||_next.y<1||_next.x>n||_next.y>m)continue;\n\t\t\tif(h_used[_next.x][_next.y])continue;\n\t\t\twater[_next.x][_next.y]=min(water[_next.x][_next.y],_next.cnt);\n\t\t\tWater.push(_next);\n\t\t\th_used[_next.x][_next.y]=1;\n\t\t}\n\t}\n}\nvoid Ans_Bfs(){\n\tQ.push(startt);\n\twhile(!Q.empty()){\n\t\tnode noww=Q.front();\n\t\tQ.pop();\n\t\tif(water[noww.x][noww.y]<=noww.cnt)\n\t\t\tcontinue;\n\t\tif(noww.x==endd.x&&noww.y==endd.y){\n\t\t\tcout<<noww.cnt;\n\t\t\treturn;\n\t\t}\n\t\tnoww.cnt++;\n\t\tfor(int i=0;i<4;i++){\n\t\t\tnode _next=noww;\n\t\t\t_next.x+=fx[i][0],_next.y+=fx[i][1];\n\t\t\tif(_next.x<1||_next.y<1||_next.x>n||_next.y>m)continue;\n\t\t\tif(h_used[_next.x][_next.y])continue;\n\t\t\tif(a[_next.x][_next.y]=='X')continue;\n\t\t\tQ.push(_next);\n\t\t\th_used[_next.x][_next.y]=1;\n\t\t}\n\t}\n\tcout<<\"KAKTUS\";\n}\nint main(){\n\tmemset(water,127,sizeof(water));\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;++i){\n\t\tfor(int j=1;j<=m;++j){\n\t\t\tcin>>a[i][j];\n\t\t\tif(a[i][j]=='S'){\n\t\t\t\tstartt.x=i;\n\t\t\t\tstartt.y=j;\n\t\t\t\tstartt.cnt=0;\n\t\t\t}\n\t\t\tif(a[i][j]=='D'){\n\t\t\t\tendd.x=i;\n\t\t\t\tendd.y=j;\n\t\t\t}\n\t\t\tif(a[i][j]=='X'){\n\t\t\t\tX[xid].x=i;\n\t\t\t\tX[xid++].y=j;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(a[i][j]=='*'){\n\t\t\t\tnode w;\n\t\t\t\tw.x=i;\n\t\t\t\tw.y=j;\n\t\t\t\tw.cnt=0;\n\t\t\t\tWater.push(w);\n\t\t\t\twater[i][j]=0;\n\t\t\t\tmemset(h_used,0,sizeof(h_used));\n\t\t\t\th_used[endd.x][endd.y]=1;\n\t\t\t\tfor(int k=0;k<xid;k++){\n\t\t\t\t\th_used[X[k].x][X[k].y]=1;\n\t\t\t\t}\n\t\t\t\tWater_Bfs();\n\t\t\t}\n\t\t}\n\t}\n\twater[endd.x][endd.y]=1e8;\n\tmemset(h_used,0,sizeof(h_used));\n\th_used[startt.x][startt.y]=1;\n\tAns_Bfs();\n}\n```\n",
        "postTime": 1572510544,
        "uid": 207667,
        "name": "\u6628\u65e5\u4e4b\u65e5",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4328 \u3010[COCI2006-2007#1] Slikar\u3011"
    },
    {
        "content": "[\u539f\u9898\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P4328)\n\n\u8fd9\u9898\u8fd8\u662f\u633a\u5751\u7684\uff0c\u6709\u4e00\u4e9b\u7ec6\u8282\u3002\n\n\u5148\u8bb2\u601d\u8def\u3002\n\n---\n**\u8fd9\u9898\u672c\u8d28\u4e0a\u662f\u6700\u77ed\u8def\u3002**\n\n\u5148\u5904\u7406\u51fa\u6d2a\u6c34\u5230\u8fbe\u6bcf\u4e2a\u683c\u5b50\u9700\u8981\u7684\u6700\u77ed\u65f6\u95f4\uff0c\u7136\u540e\u5e7f\u641c\u51fa\u7b54\u6848\u3002\n\n\u600e\u4e48\u5e7f\u641c\u76f8\u4fe1\u4e0d\u7528\u6211\u8bf4\u4e86\uff0c\u5982\u679c\u60a8\u6ca1\u6709\u5b66\u8fc7\u7684\u8bdd\u53ef\u4ee5\u5199\u4e00\u4e0b[\u8fd9\u9898](https://www.luogu.com.cn/problem/P2298)\uff0c\u8fd9\u9898\u6211\u6709\u5199\u8fc7[\u9898\u89e3](https://www.luogu.com.cn/blog/nizhuan/solution-p2298)\u3002\u5176\u4e2d\u6709\u5bf9\u5e7f\u641c\u7684\u4ecb\u7ecd\u3002\n\n\u90a3\u4e48\u95ee\u9898\u5269\u4e0b\u600e\u6837\u5904\u7406\u51fa**\u6d2a\u6c34\u5230\u8fbe\u6bcf\u4e2a\u683c\u5b50\u9700\u8981\u7684\u6700\u77ed\u65f6\u95f4**\u3002\n\n\u4e00\u5f00\u59cb\u6211\u60f3\u5229\u7528\u5e7f\u641c**\u641c\u5230\u5373\u6700\u77ed**\u7684\u7279\u6027\u5904\u7406\u3002\u4f46\u7531\u4e8e\u8fd9\u9898\u6709**\u591a\u5904\u6709\u6d2a\u6c34**\uff0c\u6240\u4ee5\u6211[WA](https://www.luogu.com.cn/record/list?pid=P4328&user=240191&status=14&page=1)\u4e86\u8bb8\u591a\u6b21\u3002\n\n\u60f3\u5230SPFA\u3002~~\u5c31\u662f\u90a3\u4e2a\u5df2\u6b7b\u7684\u7b97\u6cd5\u3002~~\n\n**\u7b97\u6cd5\u6d41\u7a0b\uff1a**\n1. \u4ece\u8d77\u70b9\u5f00\u59cb\uff0c\u628a\u62d3\u5c55\u5230\u7684\u70b9\u4fee\u6539min\u503c\uff0c\u5982\u679c\u53ef\u4ee5\u88ab\u4fee\u6539\uff0c\u5c06\u8be5\u8282\u70b9\u5165\u961f\u5e76\u6253\u6807\u8bb0\u3002\n2. \u961f\u5934\u51fa\u961f\uff0c\u53d6\u6d88\u6807\u8bb0\u3002\n\n\u5b9e\u9645\u4e0a\u5c31\u662f**\u6bcf\u6b21\u4ec5\u5bf9\u6700\u77ed\u8def\u4f30\u8ba1\u503c\u53d1\u751f\u53d8\u5316\u7684\u9876\u70b9\u7684\u6240\u6709\u51fa\u8fb9\u8fdb\u884c\u677e\u5f1b\u64cd\u4f5c**\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\u5427\u3002\n\n### Code\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <cstdlib>\n#include <cmath>\n#include <cstring>\n#include <queue>\n\nusing namespace std;\n\nint n,m,dis[60][60],sx,sy,nex[4][2]={{0,1},{1,0},{0,-1},{-1,0}};\nchar blood[60][60];\nbool vis[60][60];\nstruct node {int x,y,step;};\nqueue <node> q;\n\nint main()\n{\n// \tfreopen(\"work.in\",\"r\",stdin); freopen(\"work.out\",\"w\",stdout);\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tscanf(\" %c\",&blood[i][j]);\n\t\t\tif(blood[i][j] == 'S')//\u8bb0\u5f55\u8d77\u70b9\u4f4d\u7f6e\n\t\t\t{\n\t\t\t\tsx=i;\n\t\t\t\tsy=j;\t\n\t\t\t}\n\t\t\tdis[i][j]=1e9;//\u521d\u59cb\u5316\u6700\u77ed\u8def\n\t\t\tif(blood[i][j] == '*')\n\t\t\t{\n\t\t\t\tq.push((node) {i,j,0});\n\t\t\t\tdis[i][j]=0; \n\t\t\t\tvis[i][j]=true;\n\t\t\t}\n\t\t}\n\twhile(!q.empty())//\u6253\u6b65\u6570\u8868 \n\t{\n\t\tfor(int i=0,nx,ny;i<4;i++)\n\t\t{\n\t\t\tnx=nex[i][0]+q.front().x;\n\t\t\tny=nex[i][1]+q.front().y;\n\t\t\tif(nx < 1 || nx > n || ny < 1 || ny > m) continue ;\n\t\t\tif(blood[nx][ny] == 'X' || blood[nx][ny] == 'D' || vis[nx][ny]) continue ;//\u969c\u788d\u548c\u7ec8\u70b9\u6df9\u4e0d\u6389\n\t\t\tif(q.front().step+1 < dis[nx][ny])//SPFA\n\t\t\t{\n\t\t\t\tvis[nx][ny]=true;\n\t\t\t\tdis[nx][ny]=q.front().step+1;\n\t\t\t\tq.push((node) {nx,ny,dis[nx][ny]});\n\t\t\t}\n\t\t}\n\t\tvis[q.front().x][q.front().y]=false;//SPFA\u7279\u5f81\u64cd\u4f5c\n\t\tq.pop();\n\t}\n\n\tq.push((node) {sx,sy,0});//\u8d77\u70b9\u5165\u961f\n\tvis[sx][sy]=true;\n\twhile(!q.empty())\n\t{\n\t\tfor(int i=0,nx,ny;i<4;i++)\n\t\t{\n\t\t\tnx=nex[i][0]+q.front().x;\n\t\t\tny=nex[i][1]+q.front().y;\n\t\t\tif(nx < 1 || nx > n || ny < 1 || ny > m) continue ;\n\t\t\tif(blood[nx][ny] == 'X' || vis[nx][ny] || q.front().step+1 >= dis[nx][ny]) continue ;\n\t\t\tif(blood[nx][ny] == 'D') return printf(\"%d\",q.front().step+1),0;//\u627e\u5230\u76f4\u63a5\u8f93\u51fa\u7b54\u6848\n\t\t\tvis[nx][ny]=true;\n\t\t\tq.push((node) {nx,ny,q.front().step+1});\n\t\t}\n\t\tq.pop();\n\t}\n\tprintf(\"KAKTUS\");//\u627e\u4e0d\u5230\u65e0\u89e3\n// \tfclose(stdin); fclose(stdout);\n\treturn 0;\n}\n```\n##### [\u70b9\u5f00\u6709\u60ca\u559c](https://www.luogu.com.cn/problem/SP13076)\n## Thank you for your reading!",
        "postTime": 1607735513,
        "uid": 240191,
        "name": "MY\uff08\u4e00\u540d\u849f\u84bb\uff09",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4328 \u3010[COCI2006-2007#1] Slikar\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u5178\u578b\u7684BFS\u6c34\u9898\u3002\u6211\u4eec\u53ea\u9700\u7528\u4e24\u4e2aBFS\uff0c\u4e00\u4e2a\u7b97\u5e73\u5730\u88ab\u6c34\u6df9\u6ca1\u7684\u65f6\u95f4\uff0c\u53e6\u4e00\u4e2a\u7b97\u8d70\u7684\u65f6\u95f4\u5c31\u597d\u4e86\uff0c\u601d\u8def\u8fd8\u662f\u975e\u5e38\u597d\u60f3\u7684\uff0c\u4ee3\u7801\u4e5f\u4e0d\u96be\u5b9e\u73b0\u3002\n\u4e0b\u4e3aAC\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint r,m;\nint sx,sy,ex,ey;\nint v[51][51];\nchar maze[51][51];\nint a[51][51];\nint dx[4]= {-1,1,0,0},dy[4]= {0,0,-1,1};\nint ans=1000;\nstruct bfc {\n    int x,y,t;\n} k,b,c;\nqueue<bfc>q;\nvoid bfs1() {\n    while(!q.empty()) {\n        b=q.front();\n        q.pop();\n        for(int i=0; i<4; i++) {\n            c.x=b.x+dx[i];\n            c.y=b.y+dy[i];\n            c.t=b.t+1;\n            if(c.x>=1&&c.x<=r&&c.y>=1&&c.y<=m&&maze[c.x][c.y]=='.'&&v[c.x][c.y]==0) {\n                v[c.x][c.y]=1;\n                if(a[c.x][c.y]>c.t)\n                a[c.x][c.y]=c.t;\n                q.push(c);\n            }\n        }\n    }\n    return;\n}\nvoid bfs2() {\n    queue<bfc>que;\n    memset(v,0,sizeof(v));\n    k.x=sx;\n    k.y=sy;\n    k.t=0;\n    que.push(k);\n    while(!que.empty()) {\n        b=que.front();\n        que.pop();\n        for(int i=0; i<4; i++) {\n            c.x=b.x+dx[i];\n            c.y=b.y+dy[i];\n            c.t=b.t+1;\n            if(c.x==ex&&c.y==ey)\n                ans=min(ans,c.t);\n            if(c.x>=1&&c.x<=r&&c.y>=1&&c.y<=m&&a[c.x][c.y]>c.t&&maze[c.x][c.y]=='.'&&v[c.x][c.y]==0) {\n                v[c.x][c.y]=1;\n                que.push(c);\n            }\n        }\n    }\n    return;\n}\nint main() {\n    cin>>r>>m;\n    for(int i=1; i<=r; i++) {\n        for(int j=1; j<=m; j++) {\n            cin>>maze[i][j];\n            if(maze[i][j]=='D') {\n                ex=i;\n                ey=j;\n            }\n            if(maze[i][j]=='S') {\n                sx=i;\n                sy=j;\n            }\n            if(maze[i][j]=='*') {\n                k.x=i;\n                k.y=j;\n                k.t=0;\n                q.push(k);\n            }\n        }\n    }\n    memset(a,100,sizeof(a));\n    bfs1();\n    bfs2();\n    if(ans==1000)\n        cout<<\"KAKTUS\";\n    else\n        cout<<ans;\n    return 0;\n}\n```\n",
        "postTime": 1572508512,
        "uid": 251109,
        "name": "OnlyU",
        "ccfLevel": 0,
        "title": "P4328 Slikar\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u8003\u5bdf\u4e86$\\text{BFS}$\u7684\u7528\u6cd5\u3002\u7136\u800c\u8fd9\u79cd\u7b97\u6cd5\u5728\u672c\u9898\u9700\u8981\u4f7f\u7528\u4e24\u6b21\u2014\u2014\u7b2c\u4e00\u6b21\u662f\u6d2a\u6c34\u7684\u8513\u5ef6\uff0c\u7b2c\u4e8c\u6b21\u662f\u8def\u5f84\u7684\u641c\u7d22\u3002\n\n\u5bf9\u4e8e\u5b57\u7b26\u5f62\u5f0f\u7684\u5730\u56fe\uff0c\u672c\u849f\u84bb\u4e60\u60ef\u7528$\\text{int}$\u4e0e\u4e4b\u5bf9\u5e94\u4fdd\u5b58\u3002\u672c\u6587\u5b57\u7b26\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a\n\n|\u5b57\u7b26|\u6570\u503c|\u6ce8\u91ca|\n| :----------: | :----------: | :----------: |\n|$\\text S$|$-$|\u8d77\u70b9|\n|$\\text D$|$-2$|\u5de2\u7a74\uff08\u7ec8\u70b9\uff09|\n|$\\text X$|$-$|\u969c\u788d\u70b9|\n|$\\text *$|$-1$|\u6d2a\u6c34\u6e90\u5934|\n|$\\text .$|$1$|\u5e73\u5730|\n\n\u5176\u4e2d\uff0c$\\text{S}$\u548c$\\text{X}$\u5747\u4fdd\u7559\u9ed8\u8ba4\uff0c\u5373$0$\u3002\n\n\u4e3a\u4e86\u52a0\u5feb\u8bfb\u5165\u7684\u901f\u5ea6\uff0c\u4e0d\u59a8\u4f7f\u7528$\\text{getchar()}$\u51fd\u6570\u3002\u4e3a\u4e86\u907f\u514d$\\text{char(13)+char(10)}$\u7684\u6076\u5fc3\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u4e0d\u505c\u5730\u8bfb\u5165\u5b57\u7b26\uff0c\u76f4\u5230\u8bfb\u5165\u7684\u5b57\u7b26\u662f\u5730\u56fe\u4e2d\u7684\u5408\u6cd5\u5b57\u7b26\u4e3a\u6b62\u3002\n\n```cpp\nscanf(\"%d%d\",&r,&c);\nfor(int i=1;i<=r;i++)\n{\n    for(int j=1;j<=c;j++)\n    {\n        char ch=getchar();\n        while(ch!='D'&&ch!='S'&&ch!='X'&&ch!='.'&&ch!='*')ch=getchar();\n        switch(ch)//\u5bf9\u5730\u56fe\u5b57\u7b26\u8fdb\u884c\u8ba8\u8bba\n        {\n            case 'S':\n            {\n                //(sx,sy)\u4e3a\u521d\u59cb\u5750\u6807\n                sx=i;\n                sy=j;\n                break;\n            }\n            case 'D':\n            {\n                maps[i][j]=-2;\n                break;\n            }\n            case 'X':break;//\u7531\u4e8e\u5168\u5c40\u53d8\u91cf\u521d\u59cb\u6570\u503c\u4e3a0\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u8d4b\u503c\n            case '*':\n            {\n                maps[i][j]=-1;\n                break;\n            }\n            case '.':\n            {\n                maps[i][j]=1;\n                break;\n            }\n        }\n    }\n}\n```\n\n\u63a5\u7740\uff0c\u6211\u4eec\u5c06\u5f00\u59cb\u6a21\u62df\u6d2a\u6c34\u8513\u5ef6\u7684\u4e8b\u4ef6\u3002\u4e0d\u59a8\u7528\u4e00\u4e2a\u4e8c\u7ef4\u6570\u7ec4$\\text{flood}_{i,j}$\u4fdd\u5b58\u3002\n\n\u521d\u59cb\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u6ca1\u6709\u683c\u5b50\u88ab\u6d2a\u6c34\u6df9\u6ca1\uff0c\u6240\u4ee5\u65f6\u95f4\u53ef\u4ee5\u89c6\u4e3a$\\inf$\uff0c\u5373\uff1a\n\n```cpp\nmemset(flood,0x3f,sizeof(flood));\n```\n\n\u63a5\u7740\uff0c\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a\u4e8c\u7ef4\u5faa\u73af\uff0c\u53ea\u8981\u5bf9\u5e94\u6570\u503c\u4e3a$-1$\uff08\u5373\u6d2a\u6c34\u6e90\u5934\uff09\u5c31\u5f00\u59cb\u641c\u7d22\uff0c\u6807\u8bb0\u6df9\u6ca1\u65f6\u95f4\uff1a\n\n```cpp\nfor(int i=1;i<=r;i++)\n{\n    for(int j=1;j<=c;j++)\n    {\n        if(maps[i][j]!=-1)continue;\n        drown(i,j);//\u6267\u884c\u641c\u7d22\u51fd\u6570\uff0c\u63a5\u4e0b\u6765\u4f1a\u8bf4\u660e\n    }\n}\n```\n\n\u7f16\u5199\u6a21\u62df\u6d2a\u6c34\u8513\u5ef6\u7684\u641c\u7d22\u51fd\u6570\uff1a\n\n```cpp\nstruct node\n{\n    int x,y,step;\n}q[2501];\nvoid drown(int x,int y)\n{\n    memset(vis,false,sizeof(vis));//\u7531\u4e8e\u8981\u6267\u884c\u591a\u6b21\uff0c\u56e0\u6b64\u628avis\u6570\u7ec4\u5168\u90e8\u7f6e\u4e3a\u672a\u8bbf\u95ee\n    front=rear=1;//\u5934\u5c3e\u6307\u9488\u5747\u8bbe\u5b9a\u4e3a1\n    flood[x][y]=0;//\u6d2a\u6c34\u6e90\u5934\u5904\u5fc5\u5b9a\u57280\u65f6\u523b\u4ea7\u751f\u6d2a\u6c34\n    q[1]=(node){x,y,0};//\u521d\u59cb\u72b6\u6001\u4e3a\u6d2a\u6c34\u6e90\u5934\u5750\u6807\u548c\u6b65\u65700\n    while(front<=rear)\n    {\n        node f=q[front++];//\u4fdd\u5b58\u5143\u7d20\u5e76\u51fa\u961f\n        for(int i=0;i<4;i++)\n        {\n            int nx=f.x+dx[i],ny=f.y+dy[i];//\u4fdd\u5b58\u4e0b\u4e00\u5750\u6807\n            if(nx<1||ny<1||nx>r||ny>c||vis[nx][ny]||maps[nx][ny]==-2||!maps[nx][ny])continue;\n            /*\n            \u51fa\u73b0\u4e0b\u5217\u60c5\u51b5\u5c06\u65e0\u6cd5\u62d3\u5c55\uff1a\n            1. \u8d85\u51fa\u5730\u56fe\u8fb9\u754c\n            2. \u8be5\u5750\u6807\u5df2\u88ab\u8bbf\u95ee\u8fc7\n            3. \u8be5\u5750\u6807\u4e3a\u5de2\u7a74\uff08\u7ec8\u70b9\uff09\n            4. \u8be5\u5750\u6807\u4e3a\u969c\u788d\u7269\n            \u6ce8\u610f\uff01\u5373\u4f7f\u969c\u788d\u7269\u65e0\u6cd5\u5230\u8fbe\uff0c\u4e5f\u8981\u9632\u6b62\u7ee7\u7eed\u62d3\u5c55\u3002\n            */\n            vis[nx][ny]=true;//\u6807\u8bb0\u8bbf\u95ee\n            q[++rear]=(node){nx,ny,f.step+1};//\u5165\u961f\n            flood[nx][ny]=min(flood[nx][ny],q[rear].step);//\u53d6\u4e4b\u524d\u65f6\u95f4\u548c\u73b0\u5728\u65f6\u95f4\u7684\u6700\u5c0f\u503c\uff0c\u4f5c\u4e3a\u8be5\u5904\u88ab\u6df9\u6ca1\u7684\u65f6\u95f4\n        }\n    }\n}\n```\n\n\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u641c\u7d22\u6765\u5bfb\u627e\u8def\u5f84\u4e86\u3002\u961f\u5217\u53ef\u548c\u524d\u9762\u7684\u5408\u7528\u3002\n\n```cpp\nvoid solve(int x,int y)\n{\n    memset(vis,false,sizeof(vis));\n    front=rear=1;\n    q[1]=(node){x,y,0};\n    while(front<=rear)\n    {\n        node f=q[front++];\n        for(int i=0;i<4;i++)\n        {\n            int nx=f.x+dx[i],ny=f.y+dy[i];\n            if(nx<1||ny<1||nx>r||ny>c||vis[nx][ny]||!maps[nx][ny]||f.step+1>=flood[nx][ny])continue;\n            /*\n            \u51fa\u73b0\u4e0b\u5217\u60c5\u51b5\u5c06\u65e0\u6cd5\u62d3\u5c55\uff1a\n            1. \u8d85\u51fa\u5730\u56fe\u8fb9\u754c\n            2. \u8be5\u5750\u6807\u5df2\u88ab\u8bbf\u95ee\u8fc7\n            3. \u8be5\u5750\u6807\u4e3a\u969c\u788d\u7269\n            4. \u8be5\u5750\u6807\u5df2\u88ab\u6d2a\u6c34\u6df9\u6ca1\n            */\n            vis[nx][ny]=true;\n            q[++rear]=(node){nx,ny,f.step+1};\n            if(maps[nx][ny]==-2)//\u5224\u65ad\u662f\u5426\u5230\u8fbe\u5de2\u7a74\uff08\u7ec8\u70b9\uff09\n            {\n                printf(\"%d\",q[rear].step);\n                exit(0);\n                //\u8f93\u51fa\u6700\u5c11\u6b65\u6570\u5e76\u76f4\u63a5\u9000\u51fa\u6574\u4e2a\u7a0b\u5e8f\n            }\n        }\n    }\n}\n```\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nint r,c,front,rear,sx,sy,maps[51][51],flood[51][51],dx[]={-1,0,0,1},dy[]={0,-1,1,0};\nbool vis[51][51];\nstruct node\n{\n    int x,y,step;\n}q[2501];\nvoid drown(int x,int y)\n{\n    memset(vis,false,sizeof(vis));\n    front=rear=1;\n    flood[x][y]=0;\n    q[1]=(node){x,y,0};\n    while(front<=rear)\n    {\n        node f=q[front++];\n        for(int i=0;i<4;i++)\n        {\n            int nx=f.x+dx[i],ny=f.y+dy[i];\n            if(nx<1||ny<1||nx>r||ny>c||vis[nx][ny]||maps[nx][ny]==-2||!maps[nx][ny])continue;\n            vis[nx][ny]=true;\n            q[++rear]=(node){nx,ny,f.step+1};\n            flood[nx][ny]=std::min(flood[nx][ny],q[rear].step);\n        }\n    }\n}\nvoid solve(int x,int y)\n{\n    memset(vis,false,sizeof(vis));\n    front=rear=1;\n    q[1]=(node){x,y,0};\n    while(front<=rear)\n    {\n        node f=q[front++];\n        for(int i=0;i<4;i++)\n        {\n            int nx=f.x+dx[i],ny=f.y+dy[i];\n            if(nx<1||ny<1||nx>r||ny>c||vis[nx][ny]||!maps[nx][ny]||f.step+1>=flood[nx][ny])continue;\n            vis[nx][ny]=true;\n            q[++rear]=(node){nx,ny,f.step+1};\n            if(maps[nx][ny]==-2)\n            {\n                printf(\"%d\",q[rear].step);\n                exit(0);\n            }\n        }\n    }\n}\nint main()\n{\n    memset(flood,0x3f,sizeof(flood));\n    scanf(\"%d%d\",&r,&c);\n    for(int i=1;i<=r;i++)\n    {\n        for(int j=1;j<=c;j++)\n        {\n            char ch=getchar();\n            while(ch!='D'&&ch!='S'&&ch!='X'&&ch!='.'&&ch!='*')ch=getchar();\n            switch(ch)\n            {\n                case 'S':\n                {\n                    sx=i;\n                    sy=j;\n                    break;\n                }\n                case 'D':\n                {\n                    maps[i][j]=-2;\n                    break;\n                }\n                case 'X':break;\n                case '*':\n                {\n                    maps[i][j]=-1;\n                    break;\n                }\n                case '.':\n                {\n                    maps[i][j]=1;\n                    break;\n                }\n            }\n        }\n    }\n    for(int i=1;i<=r;i++)\n    {\n        for(int j=1;j<=c;j++)\n        {\n            if(maps[i][j]!=-1)continue;\n            drown(i,j);\n        }\n    }\n    solve(sx,sy);\n    puts(\"KAKTUS\");\n    return 0;\n}\n```",
        "postTime": 1595849678,
        "uid": 137367,
        "name": "hensier",
        "ccfLevel": 6,
        "title": "P4328 [COCI2006-2007#1] Slikar \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u5927\u610f\uff1a\u6c42\u4e00\u6761$S$\u5230$D$\u7684\u6700\u77ed\u8def\uff0c\u4f46\u662f\u6709\u4e24\u79cd\u969c\u788d\uff1a\u4e0d\u4f1a\u52a8\u7684$X$\u548c\u4e0d\u65ad\u6269\u5f20\u7684$*$\u3002\n\n\u5982\u679c\u6ca1\u6709$*$\u76f4\u63a5$bfs$\u4e00\u904d\u5c31\u53ef\u4ee5\u4e86\u3002\u4f46\u662f\u6709\u4e86\u4f1a\u6269\u5f20\u7684\u6d2a\u6c34\u4e00\u8d77\u7ade\u4e89...\u5176\u5b9e\u8fd8\u662f\u4e00\u6837\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5148$bfs$\u4e00\u904d\u8bb0\u4e0b\u6d2a\u6c34\u6269\u5f20\u5230\u5404\u4e2a\u70b9\u7684\u65f6\u95f4\uff0c\u518d$bfs$\u627e\u8def\u65f6\u770b\u4e00\u4e0b\u65f6\u95f4\u6709\u6ca1\u6709\u5230\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<cstdlib>\n#include<string>\n#include<queue>\n#include<map>\n#include<vector>\n#include<ctime>\n#include<set>\n\n#define ll long long\n#define R register\n#define IL inline\n#define Rf(a,b,c) for(R int (a)=(b);(a)<=(c);++(a))\n#define Tf(a,b,c) for(R int (a)=(b);(a)>=(c);--(a))\n#define MP make_pair\n#define PA pair<int,int>\n#define MES(a,b) memset((a),(b),sizeof((a)))\n#define MEC(a,b) memcpy((a),(b),sizeof((b)))\n#define D double\n\nusing namespace std;\n\nconst int N=105,inf=1e7;\n\nint dx[4]={0,1,0,-1};\nint dy[4]={1,0,-1,0};\nint n,m,a[N][N],dis[N][N],vis[N][N],sx,sy,tx,ty;\nchar s[N];\nqueue <int> q1,q2,q3;\n\nIL int read() {\n    int x=0,f=1;char ch=getchar();\n    while(ch>'9'||ch<'0'){if(ch=='-')f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){x*=10;x+=(ch-'0');ch=getchar();}\n    return x*f;\n}\nIL void write(int x) {\n    if(x<0) putchar('-'),x=-x;\n    if(x>9) write(x/10);\n    putchar(x%10+'0');\n}\n\n\nsigned main()\n{\n\tn=read();m=read();\n\tMES(dis,127/3);MES(vis,127/3);\n\tRf(i,1,n) {\n\t\tscanf(\"%s\",s+1);\n\t\tRf(j,1,m) {\n\t\t\tif(s[j]=='S') {\n\t\t\t\tsx=i;sy=j;\n\t\t\t}\n\t\t\tif(s[j]=='*') {\n\t\t\t\tq1.push(i);q2.push(j);\n\t\t\t\tvis[i][j]=0;\n\t\t\t}\n\t\t\tif(s[j]!='X') {\n\t\t\t\ta[i][j]=1;\n\t\t\t}\n\t\t\tif(s[j]=='D') {\n\t\t\t\ttx=i;ty=j;\n\t\t\t\ta[i][j]++;\n\t\t\t}\n\t\t}\n\t}\n\twhile(!q1.empty()) {\n\t\tR int nx=q1.front(),ny=q2.front();q1.pop();q2.pop();\n\t\tRf(i,0,3) {\n\t\t\tR int x=nx+dx[i],y=ny+dy[i];\n\t\t\tif(a[x][y]==1&&vis[x][y]>vis[nx][ny]+1) {\n\t\t\t\tvis[x][y]=vis[nx][ny]+1;\n\t\t\t\tq1.push(x);q2.push(y);\n\t\t\t}\n\t\t}\n\t}\n\tq1.push(sx);q2.push(sy);dis[sx][sy]=0;\n\twhile(!q1.empty()) {\n\t\tR int nx=q1.front(),ny=q2.front();q1.pop();q2.pop();\n\t\tRf(i,0,3) {\n\t\t\tR int x=nx+dx[i],y=ny+dy[i];\n\t\t\tif(a[x][y]&&dis[nx][ny]+1<vis[x][y]&&dis[x][y]>dis[nx][ny]+1) {\n\t\t\t\tdis[x][y]=dis[nx][ny]+1;\n\t\t\t\tq1.push(x);q2.push(y);\n\t\t\t}\n\t\t}\n\t}\n\tif(dis[tx][ty]>inf) puts(\"KAKTUS\");\n\telse write(dis[tx][ty]);\n    return 0;\n}\n\n\n```",
        "postTime": 1521433528,
        "uid": 35700,
        "name": "Khassar",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4328 \u3010[COCI2006-2007 Contest1] Slikar\u3011"
    },
    {
        "content": "* **\u3010\u9898\u76ee\u94fe\u63a5\u3011**\n\n[Link:P4328](https://www.luogu.com.cn/problem/P4328)\n\n* **\u3010\u89e3\u9898\u601d\u8def\u3011**\n\n\u53ea\u8981\u662f\u8fd9\u79cd\u6570\u636e\u8303\u56f4\u4e0d\u80fd$DFS$\u7684\u8ff7\u5bab\uff0c\u7b2c\u4e00\u65f6\u95f4\u5c31\u80fd\u60f3\u5230$BFS$\u3002\n\n\u5ca9\u77f3\u662f\u666e\u901a\u969c\u788d\u7269\uff0c\u5982\u679c\u5ffd\u7565\u6d2a\u6c34\u90fd\u53ef\u4ee5\u76f4\u63a5\u5957\u4e2a\u6a21\u677f\u8fc7\u6765\u4e86\u3002\n\n\u4f46\u662f\uff0c\u4f1a\u6269\u5f20\u7684\u6d2a\u6c34\u5982\u4f55\u5904\u7406\uff1f\n\n\u8bb0\u5f55\u4e0b\u6d2a\u6c34\u5230\u8fbe\u6bcf\u4e2a\u683c\u5b50\u7684\u6700\u77ed\u65f6\u95f4\uff0c\u5982\u679c\u5728\u641c\u7d22\u8fc7\u7a0b\u4e2d\u5f53\u524d\u7684\u65f6\u95f4\u5927\u4e8e\u6216\u7b49\u4e8e\u6d2a\u6c34\u5230\u8fbe\u8fd9\u683c\u7684\u65f6\u95f4\uff0c\u5c31\u4e0d\u5fc5\u518d\u5f80\u4e0b\u641c\u4e86\u3002\n\n\u6839\u636e\u8fd9\u4e2a\u601d\u8def\uff0c\u6211\u4eec\u5df2\u7ecf\u53ef\u4ee5\u5199\u51fa\u57fa\u672c\u6846\u67b6\u4e86\u3002\n\n**\u4f46\u662f\uff0c\u7ec6\u8282\u8fd8\u662f\u6709\u7684\uff01**\n\n~~\u4e0d\u8fc7\u6709\u53ef\u80fd\u4f60\u7684\u7a0b\u5e8f\u4e0d\u9700\u8981\u6ce8\u610f\u8fd9\u4e9b\u3002~~\n\n1. \u6bcf\u4e2a\u683c\u5b50\u7684\u6d2a\u6c34\u5230\u8fbe\u65f6\u95f4\u8981\u5148\u8d4b\u503c\u6210\u4e00\u4e2a\u5f88\u5927\u7684\u6570\uff08\u5927\u4e8e\u683c\u5b50\u603b\u6570\uff09\uff0c\u800c\u4e0d\u662f$0$\uff0c\u56e0\u4e3a\u6d2a\u6c34\u53ef\u80fd\u6839\u672c\u4e0d\u4f1a\u5230\u8fbe\u8fd9\u4e00\u683c\uff0c\u5982\u679c\u8d4b\u503c\u6210$0$\u90a3\u4e48\u7a0b\u5e8f\u5c31\u4f1a\u8bef\u5224\u6210\u8be5\u70b9\u65e0\u6cd5\u901a\u8fc7\u3002\n\n2. \u8bb0\u5f55\u683c\u5b50\u5df2\u88ab\u641c\u8fc7\u8981\u5728\u52a0\u5165\u961f\u5217\u65f6\u6807\u8bb0\uff0c\u4e0d\u7136\u8fd9\u4e2a\u683c\u5b50\u53ef\u80fd\u4f1a\u88ab\u4e0a\u4e0b\u5de6\u53f3\u7684\u76f8\u90bb\u7684\u683c\u5b50\u91cd\u590d\u52a0\u5165\u961f\u5217\uff0c\u5bfc\u81f4\u8bb8\u591a\u4e0d\u5fc5\u8981\u7684\u91cd\u590d\u641c\u7d22\u3002\n\n3. \u6d2a\u6c34\u51fa\u6c34\u70b9\u521d\u503c\u8981\u8d4b\u503c\u6210$0$\uff0c\u5426\u5219\u65f6\u95f4\u4f1a\u88ab\u8bef\u5224\uff0c\u641e\u4e0d\u597d\u8fd8\u4f1a\u9020\u6210\u6ea2\u51fa\u3002\n\n* **\u3010\u5b9e\u73b0\u7ec6\u8282\u3011**\n\n\u4ee3\u7801\u4e3a`point`\u7ed3\u6784\u91cd\u8f7d\u4e86\u8fd0\u7b97\u7b26\uff0c\u5e76\u52a0\u4e0a\u4e86\u5224\u65ad\u51fa\u754c\u7684\u51fd\u6570\uff0c\u7b80\u5316\u4ee3\u7801\uff0c\u8ba9\u601d\u8def\u66f4\u6e05\u6670\u3002\n\n\u4e3a\u8fd9\u4e2a\u7ed3\u6784\u8bbe\u8ba1\u4e86\u6784\u9020\u51fd\u6570\uff0c\u4f7f\u4e4b\u53ef\u4ee5\u4f7f\u7528\u5217\u8868\u521d\u59cb\u5316\u8bed\u6cd5\u3002\n\n\u4e3a\u4ec0\u4e48\u4e0d\u8bbe\u8ba1\u6210\u7c7b\u5462\uff1f\u56e0\u4e3a\u7c7b\u9ed8\u8ba4\u8bbf\u95ee\u6743\u9650\u4e3a\u79c1\u6709\uff0c\u800c\u7ed3\u6784\u9ed8\u8ba4\u8bbf\u95ee\u6743\u9650\u662f\u516c\u6709\uff0c\u800c`point`\u91cc\u7684\u51fd\u6570\u4e0e\u6210\u5458\u5747\u5e94\u4e3a\u516c\u6709\u3002\n\n\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5b8f\uff0c\u4ee5\u7b80\u5316\u4e8c\u7ef4\u6570\u7ec4\u7684\u4e0b\u6807\u8868\u793a\u3002\n\n* **\u3010\u4ee3\u7801\u3011**\n\n```cpp\n#include <iostream>\n#include <queue>\n\nusing namespace std;\n\n#define bdpr(prpoint) [prpoint.x][prpoint.y]//\u7b80\u5316\u4e0b\u6807\u8868\u793a\u5b8f\n\nstruct point\n{\n\tshort x,y,step=0;\n\tpoint(short a=0,short b=0,short c=0):x(a),y(b),step(c) {}\n\tpoint operator+=(point&& that)//\u91cd\u8f7d\u52a0\u6cd5\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u8868\u793a\u79fb\u52a8\n\t{\n\t\treturn {x+=that.x,y+=that.y};\n\t}\n\tpoint operator-=(point&& that)//\u91cd\u8f7d\u51cf\u6cd5\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u8868\u793a\u8fd8\u539f\n\t{\n\t\treturn {x-=that.x,y-=that.y};\n\t}\n\tbool operator==(const point& that)//\u91cd\u8f7d\u7b49\u4e8e\u5173\u7cfb\u8fd0\u7b97\u7b26\uff0c\u7528\u4e8e\u5224\u65ad\u4e24\u4e2a\u70b9\u662f\u5426\u76f8\u7b49\n\t{\n\t\treturn x==that.x&&y==that.y;\n\t}\n\tbool is_out(const int& line,const int& row)//\u5224\u65ad\u51fa\u754c\u51fd\u6570\n\t{\n\t\treturn (x<0||x>=line||y<0||y>=row);\n\t}\n};\n\nint main(int argc,char *argv[],char *env[])\n{\n\tint line,row;\n\tconst signed char movex[4]={1,-1,0,0},movey[4]={0,0,1,-1};\n\tcin>>line>>row;\n\tshort wtime[line][row];//\u6d2a\u6c34\u5230\u8fbe\u65f6\u95f4\n\tfor(int i=0;i<line;i++)//\u7ec6\u82821\n\t\tfor(int j=0;j<row;j++)\n\t\t\twtime[i][j]=32767;\n\tpoint stpos,edpos;//\u8d77\u70b9\u4e0e\u7ec8\u70b9\n\tqueue<point> wtlist;\n\tchar chunk[line][row];//\u5730\u56fe\n\tfor(int i=0;i<line;i++)//\u8bfb\u5165\u5e76\u6839\u636e\u672c\u683c\u5185\u5bb9\u5904\u7406\u53d8\u91cf\u521d\u503c\n\t\tfor(int j=0;j<row;j++)\n\t\t{\n\t\t\tcin>>chunk[i][j];\n\t\t\tswitch(chunk[i][j])\n\t\t\t{\n\t\t\t\tcase 'S':\n\t\t\t\t\tstpos={i,j,0};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'D':\n\t\t\t\t\tedpos={i,j,0};\n\t\t\t\t\tbreak;\n\t\t\t\tcase '*':\n\t\t\t\t\twtlist.push({i,j,0});\n\t\t\t\t\twtime[i][j]=0;//\u7ec6\u82823\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\tpoint tmp;\n\twhile(!wtlist.empty())\n\t{\n\t\tfor(int i=0;i<4;i++)\n\t\t\tif(!(wtlist.front()+={movex[i],movey[i]}).is_out(line,row)\n\t\t\t\t&&chunk bdpr(wtlist.front())!='X'\n\t\t\t\t&&chunk bdpr(wtlist.front())!='D'\n\t\t\t\t&&chunk bdpr(wtlist.front())!='*'\n\t\t\t\t&&wtime bdpr(wtlist.front())==32767)\n\t\t\t{\n\t\t\t\twtlist.push(wtlist.front());\n\t\t\t\ttmp=wtlist.front();\n\t\t\t\twtlist.front()-={movex[i],movey[i]};\n\t\t\t\twtime bdpr(tmp)=wtime bdpr(wtlist.front())+1;\n\t\t\t}\n\t\t\telse\n\t\t\t\twtlist.front()-={movex[i],movey[i]};\n\t\twtlist.pop();\n\t}\n\twtlist.push(stpos);\n\twhile(!wtlist.empty())\n\t{\n\t\tif(wtlist.front()==edpos)\n\t\t{\n\t\t\tcout<<wtlist.front().step;\n\t\t\treturn 0;\n\t\t}\n\t\twtlist.front().step++;\n\t\tfor(int i=0;i<4;i++)\n\t\t\tif(!(wtlist.front()+={movex[i],movey[i]}).is_out(line,row)\n\t\t\t\t&&chunk bdpr(wtlist.front())!='\\0'\n\t\t\t\t&&chunk bdpr(wtlist.front())!='X'\n\t\t\t\t&&chunk bdpr(wtlist.front())!='*'\n\t\t\t\t&&wtlist.front().step<wtime bdpr(wtlist.front()))\n\t\t\t{\n\t\t\t\twtlist.push(wtlist.front());\n\t\t\t\twtime bdpr(wtlist.back())='\\0';//\u7ec6\u82822\n\t\t\t\twtlist.front()-={movex[i],movey[i]};\n\t\t\t}\n\t\t\telse\n\t\t\t\twtlist.front()-={movex[i],movey[i]};\n\t\tchunk bdpr(wtlist.front())='\\0';\n\t\twtlist.pop();\n\t}\n\tcout<<\"KAKTUS\";\n \treturn 0;\n}\n```",
        "postTime": 1607599466,
        "uid": 372983,
        "name": "Antarctic_Cube",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4328 \u3010[COCI2006-2007#1] Slikar\u3011"
    },
    {
        "content": "# \u6c34 $bfs$\n\n### \u524d\u8a00\n\n\u65b0\u624b\u7ec3\u4e60\u641c\u7d22\u597d\u9898\uff0c\u96be\u5ea6\u5f88\u7b80\u5355\uff0c\u5efa\u8bae\u8bc4\u6a59\u3002\n\n\u9898\u76ee\u94fe\u63a5\uff1a[$\\text{Link}$](https://www.luogu.com.cn/problem/P4328)\n\n~~\u987a\u4fbf\u65e0\u803b\u5730\u6c42\u4e00\u6ce2\u4e92\u5173~~\n\n### \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a $r\\times c$ \u7684\u77e9\u9635\uff0c\u6bcf\u4e2a\u70b9\u662f\u4ee5\u4e0b\u5b57\u7b26\u4e2d\u7684\u4e00\u79cd\uff1a\n\n- `.` \u7a7a\u5730\uff1a\u5565\u90fd\u6ca1\u6709\u3002\n\n- `*` \u55b7\u6c34\u53e3\uff1a\u4ece\u8fd9\u91cc\u5f80\u5916\u53d1\u5c04\u6d2a\u6c34\uff0c\u6d2a\u6c34\u6bcf\u79d2\u4f1a\u6df9\u6ca1\u5468\u56f4 $4$ \u8054\u901a\u7684\u5e73\u5730\u3002\n\n- `S` \u7ec8\u70b9\uff1a\u8fd9\u91cc\u4e0d\u4f1a\u6709\u6d2a\u6c34\u8fdb\u6765\u3002\n\n- `D` \u8d77\u70b9\uff1a\u5c0f\u523a\u732c\u51fa\u53d1\u7684\u5730\u65b9\u3002\n\n- `X` \u969c\u788d\u7269\uff1a\u5c0f\u523a\u732c\u548c\u6d2a\u6c34\u90fd\u65e0\u6cd5\u5230\u8fbe\u8fd9\u4e2a\u70b9\u3002\n\n\u5c0f\u523a\u732c\u6bcf\u79d2\u4f1a\u5411\u5468\u56f4 $4$ \u8054\u901a\u7684\u6ca1\u6709\u969c\u788d\u7269\u4e14\u8fd8\u6ca1\u88ab\u7684\u6df9\u6ca1\u7684\u70b9\u79fb\u52a8\uff0c\u95ee\u6700\u5c0f\u65f6\u95f4\uff0c\u5982\u65e0\u6cd5\u5230\u8fbe\uff0c\u8f93\u51fa `KAKTUS`\u3002\n\n~~tm\u662f\u771f\u7684\u957f\uff0c\u8fd8\u4e0d\u5982\u81ea\u5df1\u53bb\u770b\u9898\u9762~~\n\n### \u89e3\u9898\u601d\u8def\n\n\u663e\u7136\u6ca1\u6709\u6d2a\u6c34\u7684\u5e72\u9884\u5c31\u662f\u4e2a\u5355\u7eaf\u7684 $bfs$ \u6a21\u677f\uff0c\u4f46\u52a0\u4e0a\u6d2a\u6c34\u8fd9\u4e2a\u4e1c\u897f\u540e\u5176\u5b9e\u4e5f\u4e0d\u96be\u529e\u3002\n\n\u53ef\u80fd\u6709\u4eba\u4f1a\u60f3\u4e00\u8fb9\u8dd1\u5c0f\u523a\u732c\u7684\u6700\u77ed\u8def\u4e00\u8fb9\u6765\u5224\u65ad\u6d2a\u6c34\uff0c\u9664\u975e\u60a8\u6709\u9ad8\u8d85\u7684\u4ee3\u7801\u7801\u529b\u548c~~\u5361\u5e38\u6280\u672f~~\u624d\u6709\u53ef\u80fd $AC$\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u8003\u8651**\u9884\u5904\u7406**\u51fa\u6bcf\u4e2a\u70b9\u5b83\u88ab\u6d2a\u6c34\u6df9\u6ca1\u7684\u65f6\u95f4\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5c31\u628a\u6700\u77ed\u8def\u548c\u6d2a\u6c34\u7684\u5224\u65ad\u7ed9\u9694\u5f00\u4e86\uff01\n\n\u95ee\u9898\u53c8\u6765\u4e86\uff0c\u5982\u4f55\u5224\u65ad\u6df9\u6ca1\u65f6\u95f4\uff1f\u4e0d\u96be\u60f3\u5230\uff0c\u628a\u6bcf\u4e2a\u51fa\u6c34\u53e3\u90fd\u5f53\u505a\u8d77\u70b9\u5e76\u585e\u5230\u961f\u5217\u91cc\uff0c\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u62d3\u5c55\u5230\u7684\u8282\u70b9\u90fd\u66f4\u65b0\u5b83\u7684\u65f6\u95f4\uff0c\u6700\u540e\u53ea\u8981\u5728\u6700\u77ed\u8def\u65f6\u7279\u5224\u4e00\u4e0b\u5c31 $OK$ \u4e86\u3002\n\n```cpp\n#include<cstdio>\n#include<queue>\n#include<iostream>\n#include<cstring>\nusing namespace std;\nconst int MAXN=60;\nconst int dx[5]={0,1,0,-1,0};\nconst int dy[5]={0,0,1,0,-1};\ninline int read()\n{\n\tint s=0,w=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')s=s*10+(ch-'0'),ch=getchar();\n\treturn s*w;\n} \nint n,m;\nint sx,sy;\nstruct node\n{\n\tint x,y,dis;\n\tnode(int x,int y,int dis):x(x),y(y),dis(dis){}\n};\nqueue<node>q;\nchar mapp[MAXN][MAXN];\nbool vis[MAXN][MAXN];\nint dis[MAXN][MAXN];\nvoid bfs()\n{\n\tmemset(dis,0x3f,sizeof(dis));\n\twhile(!q.empty())\n\t{\n\t\tnode now=q.front();\n\t\tq.pop();\n\t\tfor(register int i=1;i<=4;i++)\n\t\t{\n\t\t\tint xx=dx[i]+now.x;\n\t\t\tint yy=dy[i]+now.y;\n\t\t\tif(mapp[xx][yy]=='D') dis[xx][yy]=1e9;\n\t\t\tif(xx>=1&&xx<=n&&yy>=1&&yy<=m&&!vis[xx][yy]&&mapp[xx][yy]!='X'&&mapp[xx][yy]!='D')\n\t\t\t{\n\t\t\t\tdis[xx][yy]=min(dis[xx][yy],now.dis+1);\n\t\t\t\tvis[xx][yy]=true;\n\t\t\t\tq.push(node(xx,yy,now.dis+1));\n\t\t\t}\n\t\t}\n\t}\n}\nvoid bfs2(int x,int y)\n{\n\twhile(!q.empty()) q.pop();\n\tmemset(vis,false,sizeof(vis));\n\tvis[x][y]=true;\n\tq.push(node(x,y,0));\n\twhile(!q.empty())\n\t{\n\t\tnode now=q.front();\n\t\tq.pop();\n\t\tif(mapp[now.x][now.y]=='D')\n\t\t{\n\t\t\tprintf(\"%d\\n\",now.dis);\n\t\t\treturn;\n\t\t}\n\t\tfor(register int i=1;i<=4;i++)\n\t\t{\n\t\t\t\n\t\t\tint xx=dx[i]+now.x;\n\t\t\tint yy=dy[i]+now.y;\n\t\t\tif(xx>=1&&xx<=n&&yy>=1&&yy<=m&&vis[xx][yy]==0&&dis[xx][yy]>(now.dis+1)&&mapp[xx][yy]!='X')\n\t\t\t{\n//\t\t\t\tprintf(\"%d %d\\n\",xx,yy);\n\t\t\t\tvis[xx][yy]=true;\n\t\t\t\tq.push(node(xx,yy,now.dis+1));\n\t\t\t}\n\t\t}\n\t}\n\tputs(\"KAKTUS\");\n\treturn;\n}\nint main()\n{\n\tn=read(),m=read();\n\tfor(register int i=1;i<=n;i++)\n\t\tfor(register int j=1;j<=m;j++)\n\t\t{\n\t\t\tcin>>mapp[i][j];\n\t\t\tif(mapp[i][j]=='S') \n\t\t\t{\n\t\t\t\tsx=i,sy=j;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(mapp[i][j]=='*')\n\t\t\t\t{\n\t\t\t\t\tq.push(node(i,j,0));\n\t\t\t\t\tvis[i][j]=true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    bfs();\n    bfs2(sx,sy);\n    return 0;\n}\n```\n\n\u8fd9\u9898\u5176\u5b9e\u8ddf[$\\text{P1332 \u8840\u8272\u5148\u950b\u961f}$](https://www.luogu.com.cn/problem/P1332)\uff0c\u975e\u5e38\u50cf\uff0c\u53ea\u4e0d\u8fc7\u628a\u6d2a\u6c34\u53e3\u6362\u6210\u4e86\u611f\u67d3\u6e90\u3002\n\n$$\\texttt{The End.by UF}$$\n\n",
        "postTime": 1600951647,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4328 \u3010[COCI2006-2007#1] Slikar\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u4e2a\u5f88\u57fa\u7840\u7684\u5bbd\u641c\u9898\uff08bfs\uff09\uff0c\u6211\u4eec\u53ea\u9700\u8981bfs2\u6b21\u5373\u53ef\n\n\n\u4e3a\u4ec0\u4e48\u89812\u6b21\u5462\uff1f\u56e0\u4e3a\u6bd4\u8d77\u4e00\u822c\u7684\u5bbd\u641c\uff0c\u8fd9\u4e2a\u9898\u76ee\u6709\u4ee5\u4e0b2\u4e2a\u7279\u70b9\n\n1.\u6709\u963b\u788d\u7269\uff08\u77f3\u5934\uff09\n2.\u6709\u53e6\u5916\u7684\u9650\u5236\u6761\u4ef6\uff08\u6d2a\u6c34\uff09\n\n\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5148bfs\u4e00\u904d\uff0c\u628a\u5730\u56fe\u4e0a\u6bcf\u4e00\u4e2a\u70b9\u88ab\u6d2a\u6c34\u6df9\u6ca1\u7684\u65f6\u95f4\uff0c\u7528\u4e00\u4e2at\u6570\u7ec4\u8bb0\u5f55\u4e0b\u6765\n\n\u90a3\u4e48\u518dbfs\u7b2c\u4e8c\u904d\uff08\u4eba\u8d70\u7684\u8def\uff09\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u8981\u6bd4\u8f83t[i][j]\u548c\u5230\u8fbe\u5f53\u524d\u70b9\u7684\u65f6\u95f4\u5c31\u53ef\u4ee5\u4e86\n\n\u5982\u679c\u524d\u8005\u5927\u4e8e\u540e\u8005\uff0c\u5219\u8bf4\u660e\u6d2a\u6c34\u5230\u8fbe\u7684\u65f6\u95f4\u6bd4\u4eba\u5230\u8fbe\u7684\u8981\u665a\uff0c\u90a3\u4e48\u5c31\u662f\u53ef\u4ee5\u8d70\u7684\uff1b\u53cd\u4e4b\u5219\u662f\u4e0d\u80fd\u8d70\n\n\u8bdd\u4e0d\u591a\u8bf4\uff0c\u6765\u770b\u770b\u5177\u4f53\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int M=55;\nint n,m,sx,sy,ex,ey,ans=0x3f3f3f3f;\nchar str[M][M];\nint t[M][M],visited[M][M];//t\u7528\u4e8e\u8bb0\u5f55\u6d2a\u6c34\u5230\u8fbe\u67d0\u4e2a\u70b9\u7684\u65f6\u95f4 \nint dx[]={-1,1,0,0};\nint dy[]={0,0,-1,1};//\u4e0a\u4e0b\u5de6\u53f3 \nstruct flood\n{\n\tint x,y,t;//\u5750\u6807\u548c\u6d2a\u6c34\u5230\u8fbe\u7684\u65f6\u95f4 \n\tflood(const int &x,const int &y, const int &t):x(x),y(y),t(t){}\n};\nqueue<flood> qriver,q;\nvoid bfs_water()\n{\n\twhile(!qriver.empty())\n\t{\n\t\tflood now=qriver.front(); qriver.pop();\n\t\tfor(int i=0; i<4; i++)\n\t\t{\n\t\t\tint nx=now.x+dx[i],ny=now.y+dy[i];\n\t\t\tif(nx>=1 && nx<=n && ny>=1 && ny<=m)//\u5224\u65ad\u8fb9\u754c\n\t\t\t\tif(str[nx][ny]=='.' && !visited[nx][ny])//\u80fd\u8d70\u5f97\u901a\u4e14\u6ca1\u8bbf\u95ee\u8fc7'\n\t\t\t\t{\n\t\t\t\t\tvisited[nx][ny]=1;\n\t\t\t\t\tif(t[nx][ny]>now.t+1) t[nx][ny]=now.t+1;\n\t\t\t\t\tqriver.push(flood{nx,ny,now.t+1});\n\t\t\t\t}\t\n\t\t}\n\t}\n}\nvoid bfs_person()\n{\n\tmemset(visited,0,sizeof visited);\n\tq.push(flood{sx,sy,0});\n\twhile(!q.empty())\n\t{\n\t\tflood now=q.front(); q.pop();\n\t\tfor(int i=0; i<4; i++)\n\t\t{\n\t\t\tint nx=now.x+dx[i],ny=now.y+dy[i];\n\t\t\tif(nx==ex && ny==ey)\n\t\t\t    ans=min(ans,now.t+1); \n\t\t\tif(nx>=1 && nx<=n && ny>=1 && ny<=m)//\u5224\u65ad\u8fb9\u754c\n\t\t\t\tif(str[nx][ny]=='.' && t[nx][ny]>now.t+1&& !visited[nx][ny])//\u80fd\u8d70\u5f97\u901a\u4e14\u6ca1\u8bbf\u95ee\u8fc7\n\t\t\t\t{\n\t\t\t\t\tvisited[nx][ny]=1;\n\t\t\t\t\tif(t[nx][ny]>now.t+1) t[nx][ny]=now.t+1;\n\t\t\t\t\tq.push(flood{nx,ny,now.t+1});\n\t\t\t\t}\t\n\t\t}\n\t}\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tscanf(\"%s\",str[i]+1);\n\t\tfor(int j=1; j<=m; j++)\n\t\t{\n\t\t\tchar c=str[i][j];\n\t\t\tif(c=='S') sx=i,sy=j;\n\t\t\telse if(c=='D') ex=i,ey=j;\n\t\t\telse if(c=='*') qriver.push(flood{i,j,0});\n\t\t}\n\t}\n    memset(t,0x3f3f3f3f,sizeof t);\n\tbfs_water();\n\tbfs_person();\n\tif(ans==0x3f3f3f3f) puts(\"KAKTUS\");\n\telse printf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1581764147,
        "uid": 91375,
        "name": "crh1272336175",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4328 \u3010[COCI2006-2007#1] Slikar\u3011"
    },
    {
        "content": "## [~~\u4f20\u9001\u95e8~~](https://www.luogu.org/problem/P4328)\n\n\u5c31\u662f\u6709\u4e00\u4e2a\u5730\u56fe\u91cc\uff0c\u53ea\u6709\u4e94\u79cd\u5b57\u7b26\n\n- $'.'$\uff1a\u7a7a\u5730\uff0c\u6c34\u548c\u523a\u732c\u90fd\u53ef\u4ee5\u7ecf\u8fc7\u3002\n\n- $'X'$:\u969c\u788d\u7269\uff0c\u6c34\u548c\u523a\u732c\u90fd\u4e0d\u80fd\u7ecf\u8fc7\u3002\n\n- $'*'$\uff1a\u6d2a\u6c34\uff0c\u6bcf\u4e00\u65f6\u523b\u4f1a\u5411\u56db\u5468\u8513\u5ef6\u3002\n\n- $'S'$\uff1a\u8d77\u70b9\u3002\n\n- $'D'$\uff1a\u7ec8\u70b9\uff0c\u540c\u6837\uff0c\u6c34\u4e5f\u4e0d\u80fd\u7ecf\u8fc7\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u8bbe\u4e00\u4e0b\u4e09\u4e2a\u4e1c\u897f\uff1a\n\n- $map_{i,j}$\uff1a\u5730\u56fe\u4e0a\u70b9$[i][j]$\u7684\u5b57\u7b26\n\n- $vis_{i,j}$\uff1a\u70b9$[i][j]$\u53bb\u8fc7\u6ca1\u6709\uff080\u8868\u793a\u6ca1\u8d70\u8fc7\uff0c1\u8868\u793a\u8d70\u8fc7\u4e86\uff09\n\n- $time_{i,j}$\uff1a\u70b9$[i][j]$\u88ab\u6d2a\u6c34\u8986\u76d6\u7684\u65f6\u95f4\n\n\u7136\u540e\uff0c\u6211\u4eec\u5c31\u80fd\u8dd1\u4e24\u904d$BFS$\uff0c\u7b2c\u4e00\u6b21\u66f4\u65b0$time_{i,j}$\uff0c\u7b2c\u4e8c\u6b21\u5c31\u662f\u6c42\u7b54\u6848\u3002\n\n\u4e0a\u4ee3\u7801\u4e86\uff08\u4e0d\u61c2\u53ef\u4ee5\u770b\u6ce8\u91ca\uff09\uff1a\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<queue>\n#define N 60\nusing namespace std;\nstruct Queue\n{\n\tint x,y;\n};\nstruct Way\n{\n\tint x,y,time;\n};\nqueue<Queue>q;//\u6d2a\u6c34\u8513\u5ef6\u7684\u961f\u5217 \nqueue<Way>b;//\u523a\u732c\u56de\u5bb6\u7684\u961f\u5217 \nint n,m,time[N][N],dx[]={0,1,-1,0},dy[]={1,0,0,-1};\nbool vis[N][N];\nchar map[N][N];\nint main()\n{\n\tmemset(time,0x3f3f3f,sizeof time);//\u521d\u503c\u65e0\u9650\u5927\uff0c\u5426\u521960\u5206 \n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n;i++) \n\t{\n\t\tscanf(\"%s\",map[i]+1);//\u72ec\u7279\u7684\u8bfb\u5165\u65b9\u5f0f \n\t\tfor (int j=1;j<=m;j++) \n\t\t{\n\t\t\tif (map[i][j]=='*')//\u7acb\u523b\u5165\u961f \n\t\t\t{\n\t\t\t\tQueue t=(Queue){i,j};\n\t\t\t\tq.push(t);\n\t\t\t\ttime[i][j]=0;\n\t\t\t\tvis[i][j]=1;\n\t\t\t}\n\t\t\tif (map[i][j]=='S')//\u7acb\u523b\u5165\u961f \n\t\t\t{\n\t\t\t\tWay t=(Way){i,j,0};\n\t\t\t\tb.push(t);\n\t\t\t}\n\t\t}\n\t}\n\tfor (;!q.empty();)\n\t{\n\t\tQueue T=q.front();\n\t\tq.pop();\n\t\tfor (int i=0;i<4;i++)\n\t\t{\n\t\t\tint x=T.x+dx[i],y=T.y+dy[i];\n\t\t\tif (x>0&&x<=n&&y>0&&y<=m&&!vis[x][y]&&map[x][y]!='X'&&map[x][y]!='D')//\u5224\u65ad\u4e0b\u4e00\u4e2a\u70b9\u662f\u5426\u5408\u6cd5 \n\t\t\t{//\u5165\u961f \n\t\t\t\tQueue t=(Queue){x,y};\n\t\t\t\tq.push(t);\n\t\t\t\ttime[x][y]=time[T.x][T.y]+1;\n\t\t\t\tvis[x][y]=1;\n\t\t\t}\n\t\t}\n\t}\n\tmemset(vis,0,sizeof vis);//\u522b\u5fd8\u4e86\u66f4\u65b0 \n\tfor (;!b.empty();)\n\t{\n\t\tWay T=b.front();\n\t\tb.pop();\n\t\tfor (int i=0;i<4;i++)\n\t\t{\n\t\t\tint x=T.x+dx[i],y=T.y+dy[i],z=T.time;\n\t\t\tif (x>0&&x<=n&&y>0&&y<=m&&map[x][y]!='X'&&z+1<time[x][y]&&!vis[x][y])//\u5224\u65ad\u4e0b\u4e00\u4e2a\u70b9\u662f\u5426\u5408\u6cd5 \n\t\t\t{//\u5165\u961f\n\t\t\t\tWay t=(Way){x,y,z+1};\n\t\t\t\tb.push(t);\n\t\t\t\tvis[x][y]=1;\n\t\t\t\tif (map[x][y]=='D')//\u4e00\u65e6\u627e\u5230\uff0c\u5c31\u4e00\u5b9a\u662f\u6700\u4f18\u7684\uff0c\u7acb\u523b\u8f93\u51fa\uff0c\u7ed3\u675f\u7a0b\u5e8f \n\t\t\t\t{\n\t\t\t\t\tprintf(\"%d\",z+1);\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tputs(\"KAKTUS\");\n\treturn 0;\n}\n```",
        "postTime": 1565509753,
        "uid": 84705,
        "name": "CrazyDance",
        "ccfLevel": 6,
        "title": "COCI\u7684\u5927\u6c34\u9898\uff1f"
    },
    {
        "content": "\u4e00\u9053\u5178\u578b\u7684BFS~~\u6c34~~\u9898\uff0c\u76f8\u4fe1\u5927\u5bb6\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u6700\u77ed\u8def\uff0c\u548c\u5904\u7406\u969c\u788d\u7269\"x\"\uff0c\u662f\u6ca1\u6709\u95ee\u9898\u7684\n\n\u552f\u4e00\u4e0eBFS\u7ec3\u4e60\u9898\u4e0d\u540c\u7684\u5730\u65b9\u5c31\u662f\u5982\u4f55\u5904\u7406\u6d2a\u6c34\u7684\u95ee\u9898\u4e86\u3002\u6211\u4eec\u5148\u601d\u8003\u4e00\u4e0b\u600e\u4e48\u5224\u65ad\u5f53\u524d\u4f4d\u7f6e\u6709\u6ca1\u6709\u6d2a\u6c34\u5462\uff1f\u6bcf\u8d70\u4e00\u6b65\u5c31\u6a21\u62df\u6269\u6563\u4e00\u6b21\u6d2a\u6c34\u5417\uff1f\u8fd9\u6837\u53ef\u80fd\u6709\u70b9\u9ebb\u70e6\uff0c\u800c\u4e14\u65f6\u95f4\u590d\u6742\u5ea6\u8f83\u5927\uff08~~\u968f\u610fn\uff0cm\u53ea\u670950\uff0c\u600e\u4e48\u5199\u90fd\u4e0d\u4f1a\u8d85~~\uff09\u3002\n\n\u73b0\u5728\uff0c\u6211\u4eec\u6765\u60f3\u60f3\u6d2a\u6c34\u4e0e\u523a\u732c\u79fb\u52a8\u6709\u4ec0\u4e48\u5173\u7cfb\u3002\u5148\u95ee\u7684\u5927\u5bb6\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0c\u6d2a\u6c34\u4f1a\u56e0\u4e3a\u523a\u732c\u7684\u8d70\u5411\u800c\u6539\u53d8\u6269\u6563\u7684\u4f4d\u7f6e\u5417\uff1f\n\n\u663e\u800c\u6613\u89c1\uff0c\u6d2a\u6c34\u7684\u6269\u6563\u662f\u4e0d\u4f1a\u53d7\u523a\u732c\u8d70\u52a8\u5f71\u54cd\u7684\u3002\u90a3\u4e48\u6211\u4eec\u53ea\u8981\u5148\u9884\u5904\u7406\u4e00\u904d\u6d2a\u6c34\u5230\u8fbe\u5404\u70b9\u7684\u65f6\u95f4\uff0c\u518d\u7528BFS\u5237\u4e00\u8d9f\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u6700\u77ed\u8def\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n\n```\n#include<bits/stdc++.h>\n#define maxn 505\nusing namespace std;\nconst int flg[4][2]={{0,-1},{1,0},{0,1},{-1,0}};\nint n,m,ans,a[maxn][maxn],x,y,xx,yy;\nchar s[maxn][maxn];\nbool vis[maxn][maxn];\nstruct lc{\n\tint x,y,z;\n}Q[maxn*maxn];\ninline int read(){\n\tint ret=0;char ch=getchar();\n\twhile (ch<'0'||ch>'9') ch=getchar();\n\twhile (ch<='9'&&ch>='0') ret=ret*10+ch-'0',ch=getchar();\n\treturn ret;\n}\ninline bool check_(int x,int y){if (x<1||x>n||y<1||y>m||vis[x][y]||s[x][y]!='.') return 0;vis[x][y]=1;return 1;}\ninline void Bfs_(int x,int y){\n\tint hed=0,til=1;\n\tQ[1].x=x,Q[1].y=y,Q[1].z=0;\n\tmemset(vis,0,sizeof vis);\n\twhile (hed<=til){\n\t\thed++;\n\t\tfor (int i=0;i<4;i++){\n\t\t\tif (!check_(Q[hed].x+flg[i][0],Q[hed].y+flg[i][1])) continue;\n\t\t    Q[++til].x=Q[hed].x+flg[i][0],Q[til].y=Q[hed].y+flg[i][1],Q[til].z=Q[hed].z+1;\n\t\t    if (a[Q[til].x][Q[til].y]) a[Q[til].x][Q[til].y]=min(a[Q[til].x][Q[til].y],Q[til].z);\n\t\t    else a[Q[til].x][Q[til].y]=Q[til].z;\n\t\t}\n\t}\n}\ninline bool check(int x,int y,int z){if (x<1||x>n||y<1||y>m||vis[x][y]||(s[x][y]!='.'&&s[x][y]!='D')||(a[x][y]&&z>=a[x][y])) return 0;vis[x][y]=1;return 1;}\ninline void Bfs(int x,int y){\n\tint hed=0,til=1;\n\tQ[1].x=x,Q[1].y=y,Q[1].z=0;\n\tmemset(vis,0,sizeof vis);\n\twhile (hed<=til){\n\t\thed++;\n\t\tfor (int i=0;i<4;i++){\n\t\t\tif (!check(Q[hed].x+flg[i][0],Q[hed].y+flg[i][1],Q[hed].z+1)) continue;\n\t\t    Q[++til].x=Q[hed].x+flg[i][0],Q[til].y=Q[hed].y+flg[i][1],Q[til].z=Q[hed].z+1;\n            if (s[Q[til].x][Q[til].y]=='D'){printf(\"%d\",Q[til].z);exit(0);}\n\t\t}\n\t}\n}\nint main(){\n\tn=read(),m=read();\n\tfor (int i=1;i<=n;i++) scanf(\"%s\",s[i]+1);\n\tfor (int i=1;i<=n;i++)\n\tfor (int j=1;j<=m;j++){\n\t\tif (s[i][j]=='S') x=i,y=j;\n\t    if (s[i][j]=='*') Bfs_(i,j);\n\t}\n\tBfs(x,y);\n\tprintf(\"KAKTUS\");\n    return 0;\n}\n```\n",
        "postTime": 1563361393,
        "uid": 108047,
        "name": "LlLlCc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4328 \u3010[COCI2006-2007#1] Slikar\u3011"
    }
]
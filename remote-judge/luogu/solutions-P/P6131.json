[
    {
        "content": "### [\u4f20\u9001#1](https://www.luogu.com.cn/problem/P2124)  \n### [\u4f20\u9001#2](https://www.luogu.com.cn/problem/P6131)\n## \u601d\u8def\n\u89e3\u9898\u8fc7\u7a0b\u4e3b\u8981\u53ef\u4ee5\u5206\u4e3a2\u6b65\uff1a  \n1. \u8bfb\u5165\uff0c**\u5c06\u4e09\u4e2a\u6591\u70b9\u4f9d\u6b21\u7f16\u53f7**\u4e3a1,2,3\uff0c\u65b9\u6cd5\u6709\u5f88\u591a\uff0c\u5982 $dfs$ \u6216 $bfs$ \uff0c\u8fd9\u91cc\u4e0d\u7ec6\u8bb2\u4e86\u3002\n![](https://cdn.luogu.com.cn/upload/image_hosting/mpxro6hg.png)\n2. \u5173\u952e\u6b65\u9aa4\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e24\u4e2a\u6591\u70b9\uff0c\u65e0\u975e\u53ea\u6709\u4e0a\u56fe\u6240\u793a\u7684\u4e24\u79cd\u60c5\u51b5\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5206\u522b\u8ba1\u7b97\u4e24\u79cd\u60c5\u51b5\u6539\u53d8\u7684\u6700\u5c0f\u683c\u5b50\u6570\uff08\u4ee5\u4e0b\u79f0\u4e3a\u8ddd\u79bb\uff09\u3002  \n* \u7b2c\u4e00\u79cd\uff0c**\u5c06\u4e24\u4e2a\u6591\u70b9\u8fde\u901a\u81f3\u7b2c\u4e09\u4e2a\u6591\u70b9**\uff0c\u9700\u8981\u6211\u4eec\u5206\u522b\u8bb0\u5f55**\u6bcf\u4e24\u4e2a\u6591\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb**\uff0c\u4e00\u5171\u5c31**\u4e09\u79cd**\u60c5\u51b5\u3002  \n* \u7b2c\u4e8c\u79cd\uff0c**\u5c06\u4e09\u4e2a\u6591\u70b9\u8fde\u81f3\u4e00\u4e2a\u4e0d\u5728\u6591\u70b9\u4e0a\u7684\u70b9**\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5faa\u73af\u6bcf\u4e00\u4e2a\u4e0d\u5728\u6591\u70b9\u4e0a\u7684\u70b9\uff0c\u8ba1\u7b97\u8ddd\u79bb\u5e76\u6c42\u6700\u5c0f\u503c\u3002\n\n## \u8ba1\u7b97\u8fc7\u7a0b\n**\u4f9d\u6b21\u5faa\u73af\u6bcf\u4e00\u4e2a\u70b9**\uff0c\u5982\u679c\u662f\u2018 $X$ \u2019\uff0c\u90a3\u4e48\u8fdb\u884c\u7b2c\u4e00\u79cd\u64cd\u4f5c\uff1b\u82e5\u4e3a\u2018 $.$ \u2019\uff0c\u5219\u8fdb\u884c\u7b2c\u4e8c\u79cd\u64cd\u4f5c\u3002\n## \u5177\u4f53\u51fd\u6570\u5b9e\u73b0\n* \u66fc\u54c8\u987f\u8ddd\u79bb  \n\t>\u66fc\u54c8\u987f\u8ddd\u79bb(Manhattan distance or Manhattan length)\u6216\u65b9\u683c\u7ebf\u8ddd\u79bb\u662f\u7531\u5341\u4e5d\u4e16\u7eaa\u7684\u8d6b\u5c14\u66fc\u00b7\u95f5\u53ef\u592b\u65af\u57fa\u6240\u521b\u8f9e\u6c47\uff0c\u4e3a\u6b27\u51e0\u91cc\u5f97\u51e0\u4f55\u5ea6\u91cf\u7a7a\u95f4\u7684\u51e0\u4f55\u5b66\u4e4b\u7528\u8bed\uff0c\u7528\u4ee5\u6807\u660e\u4e24\u4e2a\u70b9\u4e0a\u5728\u6807\u51c6\u5750\u6807\u7cfb\u4e0a\u7684**\u7edd\u5bf9\u8f74\u8ddd\u4e4b\u603b\u548c**\u3002  \n    \u7531\u4ee5\u4e0a $bdfs$ \u7684\u7ed3\u679c\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u672c\u9898\u663e\u7136\u8981\u7528\u66fc\u54c8\u987f\u8ddd\u79bb\u51fd\u6570\uff0c\u6b64\u51fd\u6570\u5b9e\u73b0\u5e76\u4e0d\u96be\uff0c\u5c31\u662f\u4e24\u70b9\u7684\u6a2a\u7eb5\u5750\u6807\u5dee\u503c\u548c\uff08\u6211\u7684C++\u51fa $bug$ \u4e86\uff0c\u4e0d\u80fd\u7528 $abs$ \u51fd\u6570\uff0c\u6545\u4ee3\u7801\u4e2d\u81ea\u5df1\u5199\u4e86\u51fd\u6570\u4e14\u6ca1\u6709\u5355\u72ec\u5b9a\u4e49\u66fc\u54c8\u987f\u8ddd\u79bb\u51fd\u6570\uff09\u3002\n* \u7b2c\u4e00\u79cd\u64cd\u4f5c  \n\t\u7b2c\u4e00\u79cd\u64cd\u4f5c\u6211\u5199\u5f97\u6bd4\u8f83\u66b4\u529b\uff0c\u76f4\u63a5\u5faa\u73af\u6bcf\u4e2a\u70b9\uff0c\u5982\u679c\u4e0d\u662f\u540c\u6591\u70b9\u7684\u8bdd\uff0c\u76f4\u63a5\u6c42\u5b83\u4eec\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\n   ```cpp\n   for(int k=1;k<=n;k++){\n\t\tfor(int l=1;l<=m;l++){\n\t\t\tif(a[k][l]==0){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(a[k][l]!=a[i][j]&&dis[a[i][j]][a[k][l]]>abss(i-k)+abss(j-l)){\n\t\t\t\tdis[a[k][l]][a[i][j]]=min(dis[a[k][l]][a[i][j]],abss(i-k)+abss(j-l));\n\t\t\t}\n\t\t}\n\t}\n   ```\n* \u7b2c\u4e8c\u79cd\u64cd\u4f5c  \n\t\u7b2c\u4e8c\u79cd\u64cd\u4f5c\u6211\u5355\u72ec\u5199\u4e86\u51fd\u6570\uff0c\u76f4\u63a5\u66fc\u54c8\u987f\u6c42\u67d0\u4e2a\u4e0d\u5728\u4efb\u4e00\u6591\u70b9\u4e0a\u7684\u70b9\u5230\u4e09\u4e2a\u6591\u70b9\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u603b\u548c\u6700\u5c0f\u5373\u53ef\u3002\n    ```cpp\n    int xx[4];\n\txx[1]=xx[2]=xx[3]=999999;\n\tfor(int p=1;p<=n;p++){\n\t\tfor(int q=1;q<=m;q++){\n\t\t\tif(x[p][q]=='X'){\n\t\t\t\txx[a[p][q]]=min(xx[a[p][q]],abss(i-p)+abss(j-q)-1);\n\t\t\t}\n\t\t}\n\t}\t\n\treturn xx[1]+xx[2]+xx[3]+1;\n    ```\n\u7efc\u4e0a\uff0c\u5927\u5bb6\u53ef\u4ee5\u770b\u51fa\u6211\u7684\u4ee3\u7801\u7684**\u65f6\u95f4\u590d\u6742\u5ea6\u975e\u5e38\u9ad8**~~\uff0c\u4f46\u662f\u80fd\u5361\u8fc7~~\uff0c\u5efa\u8bae\u81ea\u5df1\u627e\u7b80\u5355\u89e3\u6cd5\u3002\n## \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define maxn 55\nusing namespace std;\nint n,m;\nchar x[maxn][maxn];\nint a[maxn][maxn]={};\nbool vis[maxn][maxn];\nint dx[4]={1,-1,0,0},dy[4]={0,0,1,-1};\nint f[5][5],tot=0;\nint dis[4][4],elseans=99999;\nint abss(int a){\n\tif(a<0){\n\t\treturn -a;\n\t}\n\treturn a;\n}\nvoid dfsset(int xx,int yy,int num){//dfsset\u51fd\u6570\u8bbe\u5b9a\u6591\u70b9\u7f16\u53f7\n\tfor(int i=0;i<4;i++){\n\t\txx+=dx[i];\n\t\tyy+=dy[i];\n\t\tif(xx>=1&&xx<=n&&yy>=1&&yy<=m&&x[xx][yy]!='.'&&!vis[xx][yy]){\n\t\t\tvis[xx][yy]=1;\n\t\t\ta[xx][yy]=num;\n\t\t\tdfsset(xx,yy,num);\n\t\t}\n\t\txx-=dx[i];\n\t\tyy-=dy[i];\n\t}\n}\nint trypoint(int i,int j){//\u7b2c\u4e8c\u79cd\u64cd\u4f5c\n\tint xx[4];\n\txx[1]=xx[2]=xx[3]=999999;\n\tfor(int p=1;p<=n;p++){\n\t\tfor(int q=1;q<=m;q++){\n\t\t\tif(x[p][q]=='X'){\n\t\t\t\txx[a[p][q]]=min(xx[a[p][q]],abss(i-p)+abss(j-q)-1);\n\t\t\t}\n\t\t}\n\t}\t\n\treturn xx[1]+xx[2]+xx[3]+1;\n}\nint main(){\n//\tfreopen(\"pageant.in\",\"r\",stdin);\n//\tfreopen(\"pageant.out\",\"w\",stdout);\n\tscanf(\"%d%d\\n\",&n,&m);\n\tfor(int i=1;i<=n;i++){//\u8bfb\u5165\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(j==m&&i!=n){\n\t\t\t\tscanf(\"%1c\\n\",&x[i][j]);\n\t\t\t}else{\n\t\t\t\tscanf(\"%1c\",&x[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\tint num=0;\n\tfor(int i=1;i<=n;i++){//\u8bbe\u5b9a\u6591\u70b9\u7f16\u53f7\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(x[i][j]=='.'){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(vis[i][j]==0){\n\t\t\t\tnum++;\n\t\t\t\ta[i][j]=num;\n\t\t\t\tdfsset(i,j,num);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmemset(dis,0x3f,sizeof(dis));\n\tfor(int i=1;i<=n;i++){//\u5faa\u73af\u67e5\u627e\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif(x[i][j]=='X'){\n\t\t\t\tfor(int k=1;k<=n;k++){//\u7b2c\u4e00\u79cd\u64cd\u4f5c\n\t\t\t\t\tfor(int l=1;l<=m;l++){\n\t\t\t\t\t\tif(a[k][l]==0){\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(a[k][l]!=a[i][j]&&dis[a[i][j]][a[k][l]]>abss(i-k)+abss(j-l)){\n\t\t\t\t\t\t\tdis[a[k][l]][a[i][j]]=min(dis[a[k][l]][a[i][j]],abss(i-k)+abss(j-l));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\telseans=min(elseans,trypoint(i,j));//\u7b2c\u4e8c\u79cd\u64cd\u4f5c\n\t\t\t}\n\t\t}\n\t}\n\tint anss=elseans;\n\tfor(int i=1;i<=3;i++){//\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u8fd9\u91cc\u8981\u628adis[1][2]\u548cdis[2][1]\u5408\u5e76\u4e00\u4e0b\uff0c\u4e0d\u71367\u4e2a\u70b9\u4f1a\u53d8\u7ea2\u54e6\n\t\tfor(int j=i+1;j<=3;j++){\n\t\t\tif(dis[i][j]!=0){\n\t\t\t\tdis[i][j]=min(dis[j][i],dis[i][j]);\n\t\t\t}\n\t\t}\n\t}\n\tanss=min(anss,min(dis[1][2]+dis[2][3]-2,min(dis[1][2]+dis[1][3]-2,dis[1][3]+dis[2][3]-2)));\n\tprintf(\"%d\",anss);\n\treturn 0;\n}\n```\n\n###### ~~\u5199\u9898\u89e3\u4e0d\u6613\uff0c\u70b9\u8d5e\u518d\u8d70\u5427~~",
        "postTime": 1604563692,
        "uid": 294382,
        "name": "qzhwlzy",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P6131 \u3010[USACO11NOV]Cow Beauty Pageant S\u3011"
    },
    {
        "content": "## \u9898\u76ee\u63cf\u8ff0\n\n\u7ed9\u4f60\u4e00\u4e2a $N\\times M$ \u7684\u5b57\u7b26\u77e9\u9635\uff0c\u6bcf\u4e2a\u70b9\u53ef\u80fd\u662f $X$ \u548c $.$ \uff0c\u7528 $X$ \u7ec4\u6210\u7684\u79f0\u4e3a\u4e00\u4e2a\u6591\u70b9\uff0c\u6211\u79f0\u4e3a\u8fde\u901a\u5757\uff0c $.$ \u6211\u79f0\u4e3a\u7a7a\u70b9\uff0c\u6c42\u628a\u6240\u6709\u8fde\u901a\u5757\u8fde\u8d77\u6765\u6700\u5c11\u9700\u8981\u4f7f\u7528\u591a\u5c11\u4e2a\u7a7a\u70b9\uff0c\u5176\u4e2d\uff0c $1\\le N,M\\le 50$ \u3002\n\n## \u601d\u8def\n\n\u9898\u76ee\u4fdd\u8bc1\u4e86\u53ea\u6709 $3$ \u4e2a\u8fde\u901a\u5757\uff0c\u5176\u5b9e\u5c31\u662f\u6591\u70b9\u5566\uff0c\u800c\u4e14\u6570\u636e\u8303\u56f4\u5c0f\u5f97\u611f\u4eba\uff0c\u4e8e\u662f\u8003\u8651 **\u641c\u7d22** \uff0c\u7531\u4e8e\u8bfb\u5165\u7684\u8fde\u901a\u5757\u90fd\u662f\u7528 $X$ \u8868\u793a\u7684\uff0c\u4e0d\u597d\u533a\u5206\uff0c\u6240\u4ee5\u6211\u4eec\u5148\u4f7f\u7528 **dfs** \u628a\u8fde\u901a\u5757\u6309\u987a\u5e8f\u6807\u53f7\u6210 $1,2,3$ \u5176\u4f59\u7684\u70b9\u6807\u4e3a $0$ \uff0c\u5b58\u5165 $ans$ \u6570\u7ec4\u4e2d\uff0c\u8bfb\u5165\u7684\u77e9\u9635\u4f1a\u53d8\u6210\u8fd9\u6837\uff1a\n\n```cpp\n0000000000000000\n0011110000222000\n0001111000022000\n0111100000022200\n0000000022222000\n0033300002220000\n```\n\n\u7136\u540e\u6211\u4eec\u679a\u4e3e\u6bcf\u4e2a\u8fde\u901a\u5757\uff0c\u628a\u4ece\u8fd9\u4e2a\u8fde\u901a\u5757\u5230\u53e6\u5916\u4e24\u4e2a\u8fde\u901a\u5757\u6240\u8981\u8d70\u7684 $.$ \u70b9\u7684\u4e2a\u6570\u52a0\u8d77\u6765\uff0c\u518d\u53d6\u4e2a\u6700\u5c0f\u503c\u5c31\u662f\u53ef\u80fd\u7684\u4e00\u79cd\u7b54\u6848\u4e86\uff0c\u4e3a\u4ec0\u4e48\u8bf4\u662f\u53ef\u80fd\u7684\u4e00\u79cd\u7b54\u6848\u5462\uff0c\u6211\u4eec\u770b\u770b\u8fd9\u4e24\u79cd\u8fde\u901a\u65b9\u6cd5\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/azfoxwwj.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/20x180u1.png)\n\n\u56fe\u4e2d\uff0c\u9ed1\u8272\u4e3a\u8def\u5f84\uff0c\u767d\u8272\u4e3a\u7a7a\u70b9\uff0c\u5176\u4ed6\u989c\u8272\u4e3a\u4e0d\u540c\u7684\u8fde\u901a\u5757\u3002\n\n\u8fd9\u5c31\u8bf4\u660e\u4e86\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u8d70\u6cd5\uff0c\u7b2c\u4e00\u79cd\u5728\u4e0a\u9762\u8bb2\u4e86\uff0c\u7b2c\u4e8c\u79cd\u6211\u4eec\u53ea\u7528\u679a\u4e3e\u6bcf\u4e2a\u7a7a\u70b9\uff0c\u7136\u540e\u628a\u8fd9\u4e2a\u7a7a\u70b9\u5206\u522b\u8d70\u5230 $3$ \u4e2a\u8fde\u901a\u5757\u65f6\u6240\u7ecf\u8fc7\u7684\u7a7a\u70b9\u52a0\u8d77\u6765\uff0c\u518d\u4ece\u4e2d\u53d6\u4e2a\u6700\u5c0f\u503c\u5c31\u5b9e\u73b0\u4e86\u7b2c\u4e8c\u79cd\u8d70\u6cd5\u3002\n\n\u8f93\u51fa\u4e24\u79cd\u8d70\u6cd5\u7684\u6700\u5c0f\u503c\u3002\n\n\u6ce8\uff1a\u4e24\u79cd\u8d70\u6cd5\u90fd\u7528 **bfs** \u5b9e\u73b0\u3002\n\n## \u4ee3\u7801\uff08\u5185\u6709\u6ce8\u91ca\uff09\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n//\u53d8\u91cf\u542b\u4e49\nconst int N = 55;\nint n, m;                   //\u8bfb\u5165\u7684\u77e9\u9635\nint cnt;                    //\u662f\u7b2c\u51e0\u4e2a\u8fde\u901a\u5757\nint minx1 = 1e9;            //\u7b2c\u4e00\u79cd\u8d70\u6cd5\u7684\u6700\u5c0f\u503c\nint minx2 = 1e9;            //\u7b2c\u4e8c\u79cd\u8d70\u6cd5\u7684\u6700\u5c0f\u503c\nint len1, len2;             //\u4f7f\u7528\u4e8e\u7b2c\u4e00\u79cd\u8d70\u6cd5\uff0c\u5206\u522b\u662fa1,a2\u6570\u7ec4\u7684\u957f\u5ea6\nint a1[N * N * 2];          //\u4ece\u8be5\u8fde\u901a\u5757\u5230\u53e6\u5916\u4e00\u4e2a\u8fde\u901a\u5757\u6240\u7ecf\u8fc7\u7684\u7a7a\u70b9\u6570\u91cf\nint a2[N * N * 2];          //\u540c\u4e0a\nint ans[N][N];              //\u5316\u4e3a\u6570\u5b57\u540e\u7684\u8bfb\u5165\u77e9\u9635\nint dx[4] = {0, 1, 0, -1};  //\u56db\u4e2a\u65b9\u5411\nint dy[4] = {1, 0, -1, 0};\nchar a[N][N];    //\u8bfb\u5165\u77e9\u9635\nbool vis[N][N];  //\u5e7f\u641c\u65f6\u4e0d\u80fd\u91cd\u590d\u8d70\n//\u6df1\u641c\nvoid dfs(int x, int y) {  //\u6c42\u8fde\u901a\u5757\n  for (int i = 0; i <= 3; i++) {\n    int nx = x + dx[i];\n    int ny = y + dy[i];\n    if (nx >= 1 && nx <= n && ny >= 1 && ny <= m && !ans[nx][ny] && a[nx][ny] == 'X') {\n      ans[nx][ny] = cnt;\n      dfs(nx, ny);\n    }\n  }\n}\n//\u5e7f\u641c\nstruct Node {\n  int x, y, s;\n};\n//\u7b2c\u4e00\u79cd\u8d70\u6cd5\uff0c\u6c42\u5230\u53e6\u5916\u4e00\u4e2a\u8fde\u901a\u5757\u6240\u7ecf\u8fc7\u7684\u7a7a\u70b9\u6570\u91cf\uff0c\u662f\u4e2a\u6a21\u677f\u5566\nint bfs(int x, int y, int s, int k, int l) {  //x,y\u8868\u793a\u5f53\u524d\u7684\u4e0b\u6807\uff0cs\u662f\u7a7a\u70b9\u6570\u91cf\uff0ck\u662f\u76ee\u6807\u70b9\uff0cl\u662f\u4e0d\u80fd\u8d70\u5230\u7684\u70b9\n  queue<Node> q;\n  memset(vis, 0, sizeof(vis));\n  Node cur = {x, y, s};\n  q.push(cur);\n  vis[x][y] = 1;\n  while (!q.empty()) {\n    Node cur = q.front();\n    q.pop();\n    if (ans[cur.x][cur.y] == k) {\n      return cur.s;\n    }\n    for (int i = 0; i <= 3; i++) {\n      int nx = cur.x + dx[i];\n      int ny = cur.y + dy[i];\n      if (nx >= 1 && nx <= n && ny >= 1 && ny <= m && ans[nx][ny] != l && !vis[nx][ny]) {\n        vis[nx][ny] = 1;\n        Node ne = {nx, ny, cur.s + 1};\n        q.push(ne);\n      }\n    }\n  }\n  return -1;  //\u8d70\u4e0d\u5230\n}\n//\u7b2c\u4e8c\u79cd\u8d70\u6cd5\uff0c\u548c\u7b2c\u4e00\u79cd\u5dee\u4e0d\u591a\nint Bfs(int x, int y, int s, int k) {  //\u53ef\u4ee5\u628a\u4e0a\u9762\u7684l\u7ed9\u7f29\u6389\n  queue<Node> q;\n  memset(vis, 0, sizeof(vis));\n  Node cur = {x, y, s};\n  q.push(cur);\n  vis[x][y] = 1;\n  while (!q.empty()) {\n    Node cur = q.front();\n    q.pop();\n    if (ans[cur.x][cur.y] == k) {\n      return cur.s;\n    }\n    for (int i = 0; i <= 3; i++) {\n      int nx = cur.x + dx[i];\n      int ny = cur.y + dy[i];\n      if (nx >= 1 && nx <= n && ny >= 1 && ny <= m && !vis[nx][ny] && (a[nx][ny] == '.' || ans[nx][ny] == k)) {\n        vis[nx][ny] = 1;\n        Node ne = {nx, ny, cur.s + 1};\n        q.push(ne);\n      }\n    }\n  }\n  return -1;  //\u65e0\u89e3\n}\nint main() {\n  //\u8bfb\u5165\n  cin >> n >> m;\n  for (int i = 1; i <= n; i++) {\n    for (int j = 1; j <= m; j++) {\n      cin >> a[i][j];\n    }\n  }\n  //\u628a\u77e9\u9635\u8f6c\u6362\u4e3a\u6570\u5b57\n  for (int i = 1; i <= n; i++) {\n    for (int j = 1; j <= m; j++) {\n      if (a[i][j] == 'X' && !ans[i][j]) {\n        cnt++;\n        ans[i][j] = cnt;\n        dfs(i, j);\n      }\n    }\n  }\n  //\u7b2c\u4e00\u79cd\u8d70\u6cd5\n  for (int k = 1; k <= 3; k++) {  //\u53ea\u67093\u4e2a\u8fde\u901a\u5757\n    len1 = 0, len2 = 0;           //\u8bb0\u5f97\u521d\u59cb\u5316\n    memset(a1, 0, sizeof(a1));\n    memset(a2, 0, sizeof(a2));\n    //\u5176\u4f59\u7684\u4e24\u4e2a\u8fde\u901a\u5757\u7684\u503c\n    int k1, k2;\n    if (k == 1) {\n      k1 = 2, k2 = 3;\n    } else if (k == 2) {\n      k1 = 1, k2 = 3;\n    } else {\n      k1 = 1, k2 = 2;\n    }\n    //\u679a\u4e3e\u6539\u8fde\u901a\u5757\u91cc\u7684\u6bcf\u4e2a\u70b9\n    for (int i = 1; i <= n; i++) {\n      for (int j = 1; j <= m; j++) {\n        if (ans[i][j] == k) {\n          int tmp1 = bfs(i, j, 0, k1, k);  //\u5230\u53e6\u4e00\u4e2a\u8fde\u901a\u5757\u6240\u7ecf\u8fc7\u7684\u7a7a\u70b9\u6570\u91cf\n          int tmp2 = bfs(i, j, 0, k2, k);  //\u540c\u4e0a\n          if (tmp1 != -1) {                //\u5fc5\u987b\u6709\u89e3\n            a1[++len1] = tmp1 - 1;         //\u56e0\u4e3a\u53e6\u5916\u90a3\u4e2a\u8fde\u901a\u5757\u7684\u8fb9\u754c\u70b9\u4f1a\u7b97\u4e0a\u53bb\uff0c\u6240\u4ee5\u8981\u51cf\u53bb\n          }\n          if (tmp2 != -1) {  //\u540c\u4e0a\n            a2[++len2] = tmp2 - 1;\n          }\n        }\n      }\n    }\n    //\u53d6\u6700\u5c0f\u503c\n    for (int i = 1; i <= len1; i++) {\n      for (int j = 1; j <= len2; j++) {\n        minx1 = min(minx1, a1[i] + a2[j]);  //\u8981\u642d\u914d\u627e\n      }\n    }\n  }\n  //\u7b2c\u4e8c\u79cd\u8d70\u6cd5\n  for (int i = 1; i <= n; i++) {\n    for (int j = 1; j <= m; j++) {\n      if (a[i][j] != '#') {  //\u679a\u4e3e\u7a7a\u70b9\n        int ans1, ans2, ans3;\n        ans1 = Bfs(i, j, 0, 1);  //\u5206\u522b\u52303\u4e2a\u8fde\u901a\u5757\u6240\u7ecf\u8fc7\u7684\u7a7a\u70b9\u6570\u91cf\n        ans2 = Bfs(i, j, 0, 2);\n        ans3 = Bfs(i, j, 0, 3);\n        if (ans1 != -1 && ans2 != -1 && ans3 != -1) {      //\u5fc5\u987b\u90fd\u80fd\u8d70\u5230\n          minx2 = min(minx2, ans1 + ans2 + ans3 - 3 + 1);  //\u56e0\u4e3a\u8fde\u901a\u5757\u7684\u8fb9\u754c\u70b9\u4f1a\u7b97\u4e0a\u53bb\uff0c\u6240\u4ee5\u8981\u51cf\u53bb\uff0c\u4e5f\u8981\u628a\u679a\u4e3e\u5230\u7684\u7a7a\u70b9\u52a0\u4e0a\n        }\n      }\n    }\n  }\n  //\u8f93\u51fa\n  cout << min(minx1, minx2);  //\u4e24\u79cd\u8d70\u6cd5\u53d6\u6700\u5c0f\n  return 0;\n}\n//\u7528\u5230\u4e86\u6df1\u641c\u5e7f\u641c\uff0c\u8fd9\u9898\u8fd8\u662f\u5f88\u96be\u7684QWQ\n//\u867d\u7136\u5f88\u957f\uff0c\u4f46\u7b2c\u4e8c\u4e2a\u5e7f\u641c\u662f\u590d\u5236\u7684QWQ\n```\n\n\n\u4e0d\u61c2\u5f97\u79c1\u4fe1\u95ee\u6211\u5427\u3002\n\n\u7801\u5b57\u4e0d\u6613\uff0c\u5e0c\u671b\u5ba1\u6838\u901a\u8fc7 QWQ \u3002",
        "postTime": 1632456673,
        "uid": 281408,
        "name": "wssdl",
        "ccfLevel": 5,
        "title": "P6131 \u9898\u89e3"
    },
    {
        "content": "## \u505a\u6cd5\n\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u3002\n\n\u9996\u5148\u6211\u4eec\u7528\u4e09\u4e2a ```vector``` \u6765\u5b58\u4e09\u4e2a\u6591\u70b9\u4e2d\u6bcf\u4e00\u4e2a\u70b9\u7684\u4f4d\u7f6e\uff0c\u8fd9\u4e00\u6b65\u7528\u6c42\u8054\u901a\u5757\u7684\u65b9\u6cd5\u5c31\u80fd\u6c42\u89e3\u3002\n\n\u7136\u540e\u7528\u4e09\u4e2a\u53d8\u91cf ```ans1```\u3001```ans2``` \u548c ```ans3``` \u6765\u5b58\u4e09\u4e2a\u6591\u70b9\u4e24\u4e24\u4e4b\u95f4\u7684\u6700\u77ed\u8ddd\u79bb\uff08\u5373\u8fde\u63a5\u8d77\u6765\u9700\u8981\u586b\u5145\u7684\u683c\u5b50\u6570\uff09\u3002\u6c42\u89e3\u7684\u65b9\u6cd5\u4e5f\u5f88\u7b80\u5355\u3002\u53ea\u8981\u5206\u522b\u679a\u4e3e\u4e24\u4e2a\u8fde\u901a\u5757\u7684\u70b9\uff0c\u53d6\u6700\u5c0f\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u518d\u51cf\u4e00\u5c31\u884c\u4e86\u3002\n\n\u6700\u540e\u7279\u522b\u8981\u6ce8\u610f\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u5c31\u662f\u4e09\u4e2a\u6591\u70b9\u6c47\u96c6\u5230\u5730\u56fe\u4e0a\u67d0\u4e00\u4e2a\u70b9\u7684\u60c5\u51b5\u3002\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u9700\u8981\u679a\u4e3e\u5730\u56fe\u4e0a\u7684\u6bcf\u4e00\u4e2a\u70b9\uff0c\u6c42\u51fa\u4e09\u5757\u6591\u70b9\u79bb\u8fd9\u4e2a\u70b9\u7684\u8ddd\u79bb\u518d\u76f8\u52a0\uff0c\u8fd8\u8981\u518d\u52a0\u4e0a\u4e00\uff08\u8fd9\u4e2a\u70b9\u672c\u8eab\uff09\uff0c\u6700\u540e\u53d6\u6700\u5c0f\u503c\u5c31\u884c\u4e86\u3002\u53ef\u4ee5\u628a\u8fd9\u4e2a\u8ddd\u79bb\u4f7f\u7528\u53d8\u91cf ```ans4``` \u5b58\u8d77\u6765\u3002\n\n\u6700\u540e\u5c31\u53ea\u5269\u4e0b\u4e86\u4e24\u79cd\u60c5\u51b5\uff0c\u5206\u522b\u662f\u4e24\u4e2a\u6591\u70b9\u901a\u8fc7\u7b2c\u4e09\u4e2a\u6591\u70b9\u8fde\u63a5\u8d77\u6765\u548c\u4e09\u4e2a\u6591\u70b9\u901a\u8fc7\u67d0\u4e00\u4e2a\u70b9\u8fde\u63a5\u8d77\u6765\u3002\u7b2c\u4e00\u79cd\u60c5\u51b5\u7684\u7b54\u6848\u663e\u7136\u662f $\\min(ans1+ans2,ans1+ans3,ans2+ans3)$\u3002\u800c\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u66f4\u7b80\u5355\u660e\u4e86\uff0c\u76f4\u63a5\u662f $ans4$\u3002\u6700\u540e\u5728\u8fd9\u4e24\u4e2a\u7b54\u6848\u4e4b\u95f4\u53d6 $\\min$ \u8f93\u51fa\u5c31\u884c\u4e86\u3002\n\n\u6211\u4e2a\u4eba\u89c9\u5f97\u8fd9\u9053\u9898\u5e94\u8be5\u8bc4\u7eff\u6216\u84dd\u3002\n\n## AC \u4ee3\u7801\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <vector>\n#include <queue>\n\nusing namespace std;\n\nstruct node\n{\n\tint x,y;\n};\n\nint n,m;\nbool mp[55][55],vis[55][55];\nvector<node> g[4];\nint dx[4]={0,0,1,-1},dy[4]={1,-1,0,0};\nint cnt;\n\ninline int mabs(int x) // \u5feb\u901f\u7edd\u5bf9\u503c \n{\n\treturn x<0?-x:x;\n}\n\ninline int dis(node a,node b) // \u6c42\u66fc\u54c8\u987f\u8ddd\u79bb\u51cf\u4e00\u7684\u51fd\u6570 \n{\n\treturn mabs(a.x-b.x)+mabs(a.y-b.y)-1;\n}\n\ninline void fillmap(int x,int y) // \u8fde\u901a\u5757\u586b\u5145 \n{\n\tvis[x][y]=true;\n\tqueue<node> q;\n\tq.push((node){x,y});\n\tg[++cnt].push_back((node){x,y}); // \u628a\u8d77\u70b9\u5b58\u5165 vector \n\twhile(!q.empty())\n\t{\n\t\tnode now=q.front();\n\t\tq.pop();\n\t\tfor(int i=0;i<4;i++)\n\t\t{\n\t\t\tint nx=now.x+dx[i],ny=now.y+dy[i];\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m&&mp[nx][ny]&&!vis[nx][ny])\n\t\t\t{\n\t\t\t\tvis[nx][ny]=true;\n\t\t\t\tq.push((node){nx,ny});\n\t\t\t\tg[cnt].push_back((node){nx,ny}); // \u5b58\u5165 vector \n\t\t\t}\n\t\t}\n\t}\n}\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tchar ch;\n\t\t\tscanf(\" %c\",&ch);\n\t\t\tif(ch=='X')\n\t\t\t{\n\t\t\t\tmp[i][j]=true; // true \u8868\u793a\u8fd9\u91cc\u6709\u70b9 \n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(!vis[i][j]&&mp[i][j])\n\t\t\t{\n\t\t\t\tfillmap(i,j); // \u53d1\u73b0\u4e00\u4e2a\u65b0\u7684\u8fde\u901a\u5757 \n\t\t\t}\n\t\t}\n\t}\n\tint len1=g[1].size(),len2=g[2].size(),len3=g[3].size();\n\tint ans1=1e8,ans2=1e8,ans3=1e8,ans4=1e8; // \u5bf9\u5e94\u4e0a\u6587\n\t// \u6c42\u89e3 ans1\u3001ans2 \u548c ans3 \n\tfor(int i=0;i<len1;i++)\n\t{\n\t\tfor(int j=0;j<len2;j++)\n\t\t{\n\t\t\tans1=min(ans1,dis(g[1][i],g[2][j]));\n\t\t}\n\t}\n\tfor(int i=0;i<len1;i++)\n\t{\n\t\tfor(int j=0;j<len3;j++)\n\t\t{\n\t\t\tans2=min(ans2,dis(g[1][i],g[3][j]));\n\t\t}\n\t}\n\tfor(int i=0;i<len2;i++)\n\t{\n\t\tfor(int j=0;j<len3;j++)\n\t\t{\n\t\t\tans3=min(ans3,dis(g[2][i],g[3][j]));\n\t\t}\n\t} \n\t// \u6c42\u89e3 ans4 \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\t// \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8fde\u901a\u5757\u6c42\u4e00\u4e0b\u6700\u77ed\u8ddd\u79bb \n\t\t\tint premin=1e8,preans=0;\n\t\t\tfor(int k=0;k<len1;k++) \n\t\t\t{\n\t\t\t\tpremin=min(premin,dis((node){i,j},g[1][k]));\n\t\t\t}\n\t\t\tpreans+=premin;\n\t\t\tpremin=1e8;\n\t\t\tfor(int k=0;k<len2;k++)\n\t\t\t{\n\t\t\t\tpremin=min(premin,dis((node){i,j},g[2][k]));\n\t\t\t}\n\t\t\tpreans+=premin;\n\t\t\tpremin=1e8;\n\t\t\tfor(int k=0;k<len3;k++)\n\t\t\t{\n\t\t\t\tpremin=min(premin,dis((node){i,j},g[3][k]));\n\t\t\t}\n\t\t\tpreans+=premin;\n\t\t\tans4=min(ans4,preans+1); // \u66f4\u65b0 \n\t\t}\n\t}\n\tprintf(\"%d\\n\",min(min(ans1+ans2,min(ans1+ans3,ans2+ans3))/*\u7b2c\u4e00\u79cd\u60c5\u51b5*/,ans4/*\u7b2c\u4e8c\u79cd\u60c5\u51b5*/)); // \u8f93\u51fa\u7b54\u6848 \n\treturn 0;\n}\n```\n",
        "postTime": 1619694205,
        "uid": 251130,
        "name": "lovely_ckj",
        "ccfLevel": 0,
        "title": "P6131 [USACO11NOV]Cow Beauty Pageant S \u9898\u89e3"
    },
    {
        "content": "\u672c\u9898\u89e3\u8bb2\u8ff0\u7eaf\u66b4\u529b\u7684 dfs + bfs \u65b9\u6cd5\u3002\n\n\u9898\u610f\u7b80\u5316\uff1a\u4e00\u5f20\u56fe\u4e2d\u6709\u4e09\u4e2a\u8fde\u901a\u5757\uff0c\u6c42\u628a\u8fd9\u4e09\u4e2a\u8fde\u901a\u5757\u8fde\u5230\u4e00\u8d77\u6700\u5c11\u9700\u8981\u8fde\u591a\u5c11\u4e2a\u7a7a\u767d\u90e8\u5206\u3002\n\n\u9996\u5148\u6211\u4eec\u5148\u9884\u5904\u7406\u4e00\u4e0b\u4e09\u4e2a\u8fde\u901a\u5757\uff0c\u7136\u540e\u628a\u4e00\u53f7\u8fde\u901a\u5757\u91cc\u6240\u6709\u7ed3\u70b9\u5168\u90e8\u5b58\u8d77\u6765\u3002\n\n\u63a5\u7740 bfs \u5c06\u4e00\u53f7\u8fde\u901a\u5757\u91cc\u6240\u6709\u8282\u70b9\u5168\u90e8\u653e\u5165\u961f\u5217\uff0c\u7136\u540e\u5f80\u4e0a\u4e0b\u5de6\u53f3\u56db\u4e2a\u65b9\u5411\u8d70\u3002\n\n\u5982\u679c\u627e\u5230\u4e86\uff08\u4e8c\u53f7\u3001\u4e09\u53f7\u8fde\u901a\u5757\u90fd\u8bbf\u95ee\u8fc7\u4e86\uff09\u5c31\u66f4\u65b0\u7b54\u6848\u3002\n\n\u5b9e\u4f8b\u4ee3\u7801\uff1a\n\n**\u6ce8\uff1a\u672c\u4ee3\u7801\u4e2d\u7531\u4e8e\u662f\u7528\u5982\u679c\u627e\u5230\u6bd4\u4ee5\u524d\u66f4\u4f18\uff08\u8981\u8fde\u7684\u4e2a\u6570\u66f4\u5c11\uff09\u4e14\u5176\u4ed6\u60c5\u51b5\u76f8\u540c\u7684\u8bdd\u518d\u6b21\u52a0\u5165\u961f\u5217\u8fdb\u884c\u5bfb\u627e\uff0c\u6240\u4ee5\u9700\u8981\u627e\u5230\u4e00\u4e2a\u66f4\u65b0\u4e00\u4e2a\u624d\u80fd\u6700\u4f18\uff0c\u5e76\u4e14\u9700\u8981\u7528 $vis$ \u8868\u793a\u5f53\u524d\u6700\u4f18**\n\n**\u5e76\u4e14 $vis$ \u8981\u662f\u56db\u7ef4\u7684\u56e0\u4e3a\u9700\u8981\u5750\u6807\u3001\u662f\u5426\u8bbf\u95ee\u8fc7\u4e8c\u53f7\u8fde\u901a\u5757\u3001\u662f\u5426\u8bbf\u95ee\u8fc7\u4e09\u53f7\u8fde\u901a\u5757**\n\n```cpp\n//\u7531\u4e8e\u8bc4\u6d4b\u673a\u6ce2\u52a8\u5f02\u5e38\uff0c\u53ef\u80fd\u9700\u8981\u5f00 O2 \u624d\u80fd\u8fc7\n#include <bits/stdc++.h>\nusing namespace std;\nvector<vector<int> > test;\nstruct node\n{\n\tint x,y,step,two,three;\t//\u5750\u6807\uff0c\u8981\u8fde\u7684\u90e8\u5206\uff08\u4ee5\u4e0b\u79f0\u4e3a\u6b65\u6570\uff09\n\tvector<vector<int> > sheep;\t//\u8868\u793a\u6709\u6ca1\u6709\u8fde\u8d77\u6765\u8fc7\uff0c\u4e00\u5b9a\u8981\u7528\u7684\u539f\u56e0\u4e3a\u53ef\u80fd\u8fde\u5b8c\u4ee5\u540e\u518d\u6b21\u56de\u6765\n\tnode(int x=-1,int y=-1,int step=0,int two=0,int three=0,vector<vector<int> > a=test5):x(x),y(y),step(step),two(two),three(three),sheep(a){}\t//\u6784\u9020\u51fd\u6570\n};\nint n,m;\nchar mp[60][60];\t//\u5730\u56fe\nint num[60][60];\t//\u901a\u8fc7\u5750\u6807\u77e5\u9053\u8fd9\u662f\u54ea\u4e00\u4e2a\u8fde\u901a\u5757\uff08\u4e0d\u662f\u5219\u4e3a 0 )\nint vis[60][60][2][2];\t// vis \u6570\u7ec4\uff0c\u610f\u4e49\u4e0a\u9762\u5df2\u7ecf\u8bf4\u8fc7\nint X[]={1,-1,0,0};\nint Y[]={0,0,1,-1};\t\nint cnt;\t//\u5f53\u524d\u5904\u7406\u54ea\u4e00\u4e2a\u8fde\u901a\u5757\nint size1;\t//\u7528\u4e8e\u7b2c\u4e00\u4e2a\u8fde\u901a\u5757\u7ed3\u70b9\u7684\u6570\u76ee\nnode one[3000];\nvoid dfs(int x,int y)\t//\u5bfb\u627e\u8fde\u901a\u5757\n{\n\tvis[x][y][0][0]=true;\t//\u6ce8\u610f\uff1a\u6b64\u5904\u6682\u65f6\u501f\u7528 vis \u6570\u7ec4\uff0c\u540e\u9762\u4e8c\u7ef4\u90fd\u4e3a 0\n\tnum[x][y]=cnt;\t\n\tif(cnt==1)\n\t{\n\t\tone[size1++]=node(x,y);\n\t}\n\tfor(int i=0;i<4;i++)\n\t{\n\t\tint xx=x+X[i];\n\t\tint yy=y+Y[i];\n\t\tif(xx>=1&&xx<=n&&yy>=1&&yy<=m&&!vis[xx][yy][0][0]&&mp[xx][yy]=='X')\n\t\t{\n\t\t\tdfs(xx,yy);\n\t\t}\n\t}\n}\nint ans=2147483647;\nint bfs()\n{\n\tqueue<node> q;\n\tfor(int i=0;i<60;i++)\n\t{\n\t\tfor(int j=0;j<60;j++)\n\t\t{\n\t\t\tfor(int k=0;k<2;k++)\n\t\t\t{\n\t\t\t\tfor(int l=0;l<2;l++)\n\t\t\t\t{\n\t\t\t\t\tvis[i][j][k][l]=65536;\t//\u8d4b\u503c\u4e3a\u8f83\u5927\u503c\uff0c\u539f\u56e0\u5df2\u7ecf\u5728\u201c\u6ce8\uff1a\u201d\u5904\u8bf4\u660e\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<size1;i++)\t\n\t{\t\n\t\tone[i].sheep=test;\t//test \u5c06\u5728 main \u4e2d\u521d\u59cb\u5316\uff0c\u4f5c\u7528\u4e3a\u4e3a\u4e86\u4e0a\u9762\u7ed3\u6784\u4f53\u6784\u9020\u51fd\u6570\u53ca\u6b64\u5904\u4f7f\u7528\uff0c\u610f\u4e3a\u6e05\u96f6\n\t\tq.push(one[i]);\n\t\tvis[one[i].x][one[i].y][0][0]=0;\t\n\t}\n\twhile(!q.empty())\n\t{\n\t\tnode f=q.front();\n\t\tq.pop();\n\t\tif(f.two&&f.three)\n\t\t{\n\t\t\tans=min(ans,f.step);\n\t\t\tcontinue;\n\t\t}\n\t\tif(f.step>=ans)\t//\u526a\u679d\uff0c\u5982\u679c\u8fd8\u6ca1\u6ee1\u8db3\u6761\u4ef6\u4f46\u662f\u5df2\u7ecf\u6bd4\u5f53\u524d\u7b54\u6848\u5927\u5219\u4e0d\u53ef\u80fd\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\t\tfor(int i=0;i<4;i++)\n\t\t{\n\t\t\tint xx=f.x+X[i];\n\t\t\tint yy=f.y+Y[i];\n\t\t\tif(xx>=1&&xx<=n&&yy>=1&&yy<=m)\n\t\t\t{\n\t\t\t\tnode temp=f;\n\t\t\t\ttemp.x=xx;\n\t\t\t\ttemp.y=yy;\n\t\t\t\tfor(int j=0;j<4;j++)\t//\u6ce8\u610f\u8fde\u63a5\u597d\u4e86\u4ee5\u540e\u56db\u5468\u7684\u90fd\u63a5\u4e0a\u4e86\n\t\t\t\t{\n\t\t\t\t\tint XX=xx+X[j];\n\t\t\t\t\tint YY=yy+Y[j];\n\t\t\t\t\tif(XX>=1&&XX<=n&&YY>=1&&YY<=m)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(num[XX][YY]==2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttemp.two=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(num[XX][YY]==3)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttemp.three=1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(num[xx][yy]==0&&temp.sheep[xx][yy]==0)\t//\u7a7a\u767d\u5e76\u4e14\u6ca1\u6709\u8fde\u63a5\u8fc7\n\t\t\t\t{\n\t\t\t\t\ttemp.sheep[xx][yy]=1;\n\t\t\t\t\ttemp.step++;\n\t\t\t\t}\n\t\t\t\tif(f.step>=vis[xx][yy][temp.two][temp.three])\t//\u5f53\u524d\u6b65\u6570\u5927\u4e8e\u6216\u7b49\u4e8e\u6700\u4f18\u6b65\u6570\uff0c\u8df3\u8fc7\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tvis[xx][yy][temp.two][temp.three]=f.step;\n\t\t\t\tq.push(temp);\n\t\t\t}\n\t\t}\n\t}\n\treturn ans;\n}\nvoid print(int x)\n{\n\tif(x<0)\n\t{\n\t\tx=-x;\n\t\tputchar('-');\n\t}\n\tif(x>=10)\n\t{\n\t\tprint(x/10);\n\t}\n\tputchar(x%10+'0');\n}\nint main()\n{\n\ttest.resize(60);\t//\u4f5c\u7528\u662f\u6e05\u96f6\n\tfor(int i=0;i<60;i++)\n\t{\n\t\ttest[i].resize(60);\n\t}\n\tfor(int i=0;i<60;i++)\n\t{\n\t\tfor(int j=0;j<60;j++)\n\t\t{\n\t\t\ttest[i][j]=0;\n\t\t}\n\t}\n\tios::sync_with_stdio(0);\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tcin>>mp[i][j];\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(!vis[i][j][0][0]&&mp[i][j]=='X')\n\t\t\t{\n\t\t\t\tcnt++;\n\t\t\t\tdfs(i,j);\n\t\t\t}\n\t\t}\n\t}\n\tprint(bfs());\n\treturn 0;\n}\n```\n\n\u5982\u679c\u6709\u9519\u8bef\u6216\u7b14\u8bef\u8bf7\u79c1\u4fe1\u6211\u4fee\u6539",
        "postTime": 1598525100,
        "uid": 173918,
        "name": "swl3992",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P6131 \u3010[USACO11NOV]Cow Beauty Pageant S\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u6c42\u5c06\u4e09\u4e2a\u8fde\u901a\u5206\u91cf\u8fde\u6210\u4e00\u4e2a\u7684\u6700\u5c11\u6b65\u6570\u3002\n\n\u9996\u5148\u5148 bfs \u6c42\u51fa\u4e09\u4e2a\u8fde\u901a\u5206\u91cf\uff0c\u7136\u540e\u5c31\u662f\u8fde\u63a5\u4e86\u3002\n\n\u8fde\u63a5\u8fd9\u91cc\u975e\u5e38\u5751\uff0c\u56e0\u4e3a\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1. \u76f4\u63a5\u9009\u5176\u4e2d\u7684\u4e24\u4e2a\u8fde\u63a5\uff1b\n2. \u9009\u62e9\u4e00\u4e2a\u70b9 $(x,y)$\uff0c\u4e09\u4e2a\u8fde\u901a\u5206\u91cf\u90fd\u8fde\u5230 $(x,y)$\u3002\n\n\u5bf9\u4e8e\u7b2c 1 \u79cd\u60c5\u51b5\uff0c\u663e\u7136\u628a\u8fde\u901a\u5206\u91cf\u7f29\u70b9\uff0c\u518d\u6c42\u4e2a\u6700\u5c0f\u751f\u6210\u6811\u5373\u53ef\u3002\n\n\u7b2c 2 \u79cd\u60c5\u51b5\u5c31\u76f4\u63a5\u66b4\u529b\u679a\u4e3e $(x,y)$ \u8ba1\u7b97\u4ee3\u4ef7\u3002\n\n\u5751\u70b9\u5f88\u591a\uff08\u7279\u522b\u662f\u6211\u5f88\u96be\u60f3\u5230\u60c5\u51b5 2\uff09\u3002\n\n```cpp\n// author: TMJYH09\n// create time: 2022/05/14 22:11:06\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n,m;\nchar a[55][55];\n\nvector <pair<int,int>>scc[55];\nint dfn;\n\nvoid bfs(int x,int y){\n    queue <pair<int,int>> q;\n    ++dfn;scc[dfn].push_back({x,y});\n    a[x][y]='.';q.push({x,y});\n    int dir[][2]={1,0,0,1,-1,0,0,-1};\n    while(!q.empty()){\n        pair<int,int>f=q.front();q.pop();\n        for(int i=0;i<4;i++){\n            int nx=f.first+dir[i][0];\n            int ny=f.second+dir[i][1];\n            if(nx>=1&&nx<=n&&ny>=1&&ny<=m&&a[nx][ny]=='X'){\n                a[nx][ny]='.';q.push({nx,ny});\n                scc[dfn].push_back({nx,ny});\n            }\n        }\n    }\n}\n\nstruct edge{\n    int u,v,w;\n}e[1005];\nint cnt;\nint fa[1005];\nint find(int x){return fa[x]==x?x:fa[x]=find(fa[x]);}\nint main(){\n    ios::sync_with_stdio(false),cin.tie(nullptr);\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=m;j++)\n            cin>>a[i][j];\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=m;j++)\n            if(a[i][j]=='X')bfs(i,j);\n    auto min_dis = [](int x,int y)->int{\n        int dis=0x3f3f3f3f;\n        for(int i=0;i<scc[x].size();i++){\n            for(int j=0;j<scc[y].size();j++){\n                dis=min(dis,abs(scc[x][i].first-scc[y][j].first)+abs(scc[x][i].second-scc[y][j].second));\n            }\n        }\n        return dis;\n    };\n    for(int i=1;i<=dfn;i++){\n        for(int j=i+1;j<=dfn;j++){\n            e[++cnt]={i,j,min_dis(i,j)};\n        }\n    }\n    // for(int i=1;i<=cnt;i++){\n    //     cout<<\"e[\"<<i<<\"].w: \"<<e[i].w<<endl;\n    // }\n    sort(e+1,e+cnt+1,[](const edge& x,const edge& y){return x.w<y.w;});\n    for(int i=1;i<=cnt;i++)fa[i]=i;\n    int ans=0;\n    for(int i=1;i<=cnt;i++){\n        int u=find(e[i].u),v=find(e[i].v);\n        if(u!=v){\n            fa[u]=v;\n            ans+=e[i].w;\n        }\n    }\n    ans=ans-cnt+1;\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=m;j++){\n            scc[0].clear();scc[0].push_back({i,j});\n            int _=min_dis(1,0)+min_dis(2,0)+min_dis(3,0);\n            ans=min(ans,_-2);\n        }\n    cout<<ans<<endl;\n    return 0;\n}\n```",
        "postTime": 1652540400,
        "uid": 482728,
        "name": "Engulf",
        "ccfLevel": 0,
        "title": "P6131 [USACO11NOV]Cow Beauty Pageant S"
    },
    {
        "content": "[\u539f\u9898\u94fe\u63a5](https://www.luogu.com.cn/problem/P6131)  \n\n**\u9898\u76ee\u5927\u610f\uff1a**  \n\u672c\u9898\u7ed9\u5b9a\u4e00\u4e2a\u5927\u5c0f\u4e3a $n\\times m$ \u7684\u77e9\u9635 $S$\uff0c\u5176\u4e2d\u6070\u597d\u5b58\u5728\u4e09\u4e2a\u5b57\u7b26 $\\tt X$ \u7ec4\u6210\u7684\u56db\u8fde\u901a\u5757\u3002\u73b0\u9700\u8981\u989d\u5916\u5c06\u4e00\u4e9b\u5730\u65b9\u4fee\u6539\u4e3a $\\tt X$\uff0c\u4f7f\u5f97\u65b0\u7684\u77e9\u9635 $S'$ \u4e2d\u6070\u597d\u5b58\u5728\u4e00\u4e2a\u5b57\u7b26 $\\tt X$ \u7ec4\u6210\u7684\u56db\u8fde\u901a\u5757\u3002\u6c42\u6700\u5c11\u9700\u8981\u6539\u53d8\u7684\u5b57\u7b26\u4e2a\u6570\u3002  \n\n**\u89e3\u9898\u601d\u8def\uff1a**  \n\u5982\u56fe\uff0c\u8bbe $S$ \u4e2d\u4e09\u4e2a\u56db\u8fde\u901a\u5757\u4e3a $A,B,C$\uff0c\u5219\u4f7f\u5f97\u6539\u53d8\u7684\u5b57\u7b26\u4e2a\u6570\u6700\u5c11\u7684\u65b9\u6848\u53ef\u4ee5\u6309\u6709\u65e0\u201c\u4e2d\u8f6c\u7ad9\u201d\u5206\u4e3a\u4e24\u79cd\u7c7b\u578b\u3002  \n![](https://cdn.luogu.com.cn/upload/image_hosting/t1vc8o9b.png)  \n\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u8ba1\u7b97\u51fa\u4e24\u79cd\u7c7b\u578b\u4e2d\u6700\u5c11\u9700\u8981\u6539\u53d8\u7684\u5b57\u7b26\u4e2a\u6570\uff0c\u5b83\u4eec\u7684\u6700\u5c0f\u503c\u5c31\u662f\u672c\u9898\u7684\u7b54\u6848\u3002  \n\n\u5bf9\u4e8e\u65e0\u201c\u4e2d\u8f6c\u7ad9\u201d\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u4e24\u4e2a\u4f4d\u7f6e\u7684\u5750\u6807\uff0c\u5206\u522b\u6c42\u51fa $A,B$ \u95f4\uff0c$B,C$ \u95f4\uff0c$A,C$ \u95f4\u7684\u6700\u5c0f\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u6b64\u79cd\u7c7b\u578b\u7684\u7ed3\u679c\u5373\u4e3a\u4e09\u4e2a\u6570\u4e24\u4e24\u76f8\u52a0\u7684\u6700\u5c0f\u503c\u51cf $2$ \u7684\u503c\u3002  \n\u5bf9\u4e8e\u6709\u201c\u4e2d\u8f6c\u7ad9\u201d\u7684\u7c7b\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u5206\u522b\u5bf9\u4e09\u4e2a\u56db\u8fde\u901a\u5757\u6c42\u51fa\u6bcf\u4e2a\u70b9\u4e0e\u5b83\u7684\u6700\u5c0f\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u7136\u540e\u904d\u5386 $S$ \u4e2d\u6240\u6709\u4f4d\u7f6e\uff0c\u5f97\u5230\u7ed3\u679c\u3002\u8bbe\u4f4d\u7f6e $(i,j)$ \u4e0e\u4e09\u4e2a\u56db\u8fde\u901a\u5757 $A,B,C$ \u7684\u6700\u5c0f\u66fc\u54c8\u987f\u8ddd\u79bb\u5206\u522b\u4e3a $a_{i,j},b_{i,j},c_{i,j}$\uff0c\u5219\u6b64\u79cd\u7c7b\u578b\u7684\u7ed3\u679c\u4e3a  \n$$\\min_{1\\leq i\\leq n,1\\leq j\\leq m}({a_{i,j}+b_{i,j}+c_{i,j}-2)}$$  \n\n**\u5b9e\u73b0\u4ee3\u7801\uff1a**  \n```cpp\n#include<iostream>\n#include<cstring>\n#include<queue>\nusing namespace std;\nconst int ud[4]={-1,0,1,0},lr[4]={0,1,0,-1};\nint n,m,pcnt,ansans,ans=0x7f7f7f7f,mp[55][55],tmp[55][55],vis[55][55][3];\nchar ahcr;\nint abs(int a){return a>0?a:-a;}\nvoid paint(int x,int y,int color){\n\tmp[x][y]=color;\n\tfor(int i=0;i<4;i++){\n\t\tint ax=x+ud[i],ay=y+lr[i];\n\t\tif(ax<1||ay<1||ax>n||ay>m||mp[ax][ay]!=0)continue;\n\t\tpaint(ax,ay,color);\n\t}\n//\u4f7f\u7528\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\uff0c\u5148\u5bf9\u81ea\u5df1\u67d3\u8272\uff0c\u7136\u540e\u5bf9\u6ca1\u6709\u67d3\u8fc7\u8272\u7684\u90bb\u5c45\u6309\u7167\u540c\u79cd\u65b9\u6cd5\u9012\u5f52\u67d3\u8272 \n\treturn;\n}\nint man(int a,int b,int c,int d){return abs(a-c)+abs(b-d);}\n//\u6c42\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u5373\u6a2a\u5750\u6807\u7684\u5dee\u7684\u7edd\u5bf9\u503c\u4e0e\u7eb5\u5750\u6807\u7684\u5dee\u7684\u7edd\u5bf9\u503c\u7684\u548c \nclass node{\n\tpublic:\n\t\tint fx,fy,tx,ty;\n\t\tint val(){return man(fx,fy,tx,ty);}\n\t\tnode(){fx=fy=1,tx=ty=100;}\n\t\tvoid output(){printf(\"%d %d %d %d\\n\",fx,fy,tx,ty);}\n}ab,bc,ac;\nclass node2{\n\tpublic:\n\t\tint x,y,tim;\n\t\tnode2(){x=y=tim=0;}\n\t\tnode2(int a,int b,int c){x=a,y=b,tim=c;}\n};\nvoid larger(int color,int lay){\n\tqueue<node2>q;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tif(mp[i][j]==color)\n\t\t\t\tq.push(node2{i,j,0}); \n\twhile(!q.empty()){\n\t\tnode2 now=q.front();q.pop();\n\t\tif(vis[now.x][now.y][lay]<=now.tim)continue;\n\t\tvis[now.x][now.y][lay]=now.tim;\n//\u8d70\u5230\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u82e5\u4e4b\u524d\u8d70\u5230\u8fd9\u4e2a\u5730\u65b9\u65f6\u7684\u6700\u5c0f\u6b65\u6570\u5c0f\u4e8e\u7b49\u4e8e\u5f53\u524d\u6b65\u6570\u5c31\u4e2d\u65ad\u64cd\u4f5c\uff0c\u5426\u5219\u66f4\u65b0\u5e76\u7ee7\u7eed\u64cd\u4f5c \n\t\tfor(int i=0;i<4;i++){\n\t\t\tnode2 tmp;tmp.x=now.x+ud[i],tmp.y=now.y+lr[i],tmp.tim=now.tim+1;\n\t\t\tif(tmp.x<1||tmp.y<1||tmp.x>n||tmp.y>m)continue;\n\t\t\tq.push(tmp);\n\t\t}\n\t}\n//\u5229\u7528\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\uff0c\u9010\u5c42\u6269\u5c55 \n\treturn;\n}\nint main(){\n\tmemset(mp,-1,sizeof mp);\n\tmemset(vis,0x3f,sizeof vis);\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin>>ahcr;\n\t\t\tif(ahcr=='X')mp[i][j]=0;\n\t\t}\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tif(mp[i][j]==0)\n\t\t\t\tpaint(i,j,++pcnt);\n//\u5bf9\u56db\u8fde\u901a\u5757\u8fdb\u884c\u7f16\u53f7 \n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tfor(int k=1;k<=n;k++)\n\t\t\t\tfor(int l=1;l<=m;l++){\n\t\t\t\t\tif(mp[i][j]==1&&mp[k][l]==2&&man(i,j,k,l)<ab.val())\n\t\t\t\t\t\tab.fx=i,ab.fy=j,ab.tx=k,ab.ty=l;\n\t\t\t\t\tif(mp[i][j]==2&&mp[k][l]==3&&man(i,j,k,l)<bc.val())\n\t\t\t\t\t\tbc.fx=i,bc.fy=j,bc.tx=k,bc.ty=l;\n\t\t\t\t\tif(mp[i][j]==1&&mp[k][l]==3&&man(i,j,k,l)<ac.val())\n\t\t\t\t\t\tac.fx=i,ac.fy=j,ac.tx=k,ac.ty=l;\n\t\t\t\t}\n//\u679a\u4e3e\u4e24\u4e2a\u4f4d\u7f6e\u7684\u5750\u6807\uff0c\u82e5\u6bd4\u4e4b\u524d\u7684\u6700\u5c0f\u503c\u8fd8\u8981\u5c0f\u5c31\u66f4\u65b0 \n\tansans=min(ab.val()+ac.val()-2,min(ac.val()+bc.val()-2,bc.val()+ab.val()-2));\n//\u5f97\u51fa\u7c7b\u578b\u4e00\u7684\u7ed3\u679c \n\tlarger(1,0),larger(2,1),larger(3,2);\n//\u8ba1\u7b97\u6bcf\u4e2a\u4f4d\u7f6e\u5bf9 A,B,C \u7684\u6700\u5c0f\u66fc\u54c8\u987f\u8ddd\u79bb \n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)\n\t\t\tans=min(ans,vis[i][j][0]+vis[i][j][1]+vis[i][j][2]-2);\n//\u904d\u5386 S \u4e2d\u6240\u6709\u4f4d\u7f6e\uff0c\u5f97\u51fa\u7c7b\u578b\u4e8c\u7684\u7ed3\u679c \n\tprintf(\"%d\",min(ans,ansans));\n\treturn 0;\n}\n```\n\n",
        "postTime": 1673695875,
        "uid": 567388,
        "name": "yzy4090",
        "ccfLevel": 5,
        "title": "P6131 [USACO11NOV]Cow Beauty Pageant S \u9898\u89e3"
    },
    {
        "content": "# \u89e3\u6790\n\u9996\u5148\uff0c\u6211\u4eec\u5148\u5bf9\u6240\u6709\u7684 `X` \u8fdb\u884c\u4e00\u4e2a\u904d\u5386\uff0c\u4ece\u800c\u5904\u7406\u51fa\u6bcf\u4e2a `X` \u5c5e\u4e8e\u54ea\u4e2a\u8fde\u901a\u5757\uff08\u6591\u70b9\uff09\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5206\u6790\u4e00\u4e0b\u5e94\u8be5\u5982\u4f55\u8fde\u63a5\u8fd9 $3$ \u4e2a\u6591\u70b9\u3002\n\n\u8fd9\u9898\u8fde\u63a5\u6591\u70b9\u7684\u65b9\u6cd5\u65e0\u975e\u5c31\u4e24\u79cd\uff1a\n\n1. \u9009\u62e9\u4e00\u4e2a\u6591\u70b9\uff0c\u8ba9\u53e6\u5916\u4e24\u4e2a\u6591\u70b9\u4e0e\u5176\u8fde\u63a5\u3002\n\n2. \u9009\u62e9\u4e00\u4e2a `.`\uff0c\u8ba9\u4e09\u4e2a\u6591\u70b9\u4e0e\u5176\u8fde\u63a5\u3002\n\n\u5b9e\u73b0\u7b2c\u4e00\u79cd\u65b9\u6cd5\u5f88\u7b80\u5355\uff0c\u53ea\u8981\u679a\u4e3e\u4efb\u610f\u4e24\u4e2a\u6591\u70b9\u91cc\u7684\u4e00\u5bf9\u70b9\uff0c\u8ba1\u7b97\u5b83\u4eec\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\uff0c\u53d6\u4e2a\u6700\u5c0f\u503c\u5c31\u884c\u4e86\u3002\n\n\u81f3\u4e8e\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u5219\u9700\u8981\u679a\u4e3e\u6bcf\u4e00\u4e2a\u4e0d\u7ec4\u6210\u6591\u70b9\u7684\u70b9\uff08\u5373 `.`\uff09\uff0c\u518d\u8ba1\u7b97\u8fd9\u4e2a\u70b9\u5230 $3$ \u4e2a\u6591\u70b9\u7684\u6700\u77ed\u8ddd\u79bb\u5373\u53ef\u3002\n\n\u8fd9\u6837\u4e00\u5957\u8ba1\u7b97\u4e0b\u6765\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u4e24\u79cd\u65b9\u6cd5\u5f97\u5230\u7684\u7b54\u6848\u4e2d\u53d6\u6700\u5c0f\u503c\u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2m^2)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n# AC code\n```c++\n#include<bits/stdc++.h>\n#define int1 long long\n#define p 55\nusing namespace std;\nint1 n,m,i,j,k,l,a[p][p],b[p][p],c,s,d[2][4] = {{1,-1},{0,0,1,-1}},t,u,v,xx,yy;\nchar ch;\nint1 read(){//\u4e11\u964b\u65e0\u6bd4\u7684\u5feb\u8bfb\u3002 \n\tint1 x = 0,f = 1;\n\tchar ch = getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch == '-'){\n\t\t\tf = -1;\n\t\t}\n\t\tch = getchar();\n\t}\n\twhile(isdigit(ch)){\n\t\tx = (x << 1) + (x << 3) + ch - '0';\n\t\tch = getchar();\n\t}\n\treturn x * f;\n}\nvoid print(int1 x){//\u4e11\u964b\u65e0\u6bd4\u7684\u5feb\u5199\u3002 \n  \tif(x < 0){\n    \tputchar('-');\n    \tx = -x;\n  \t}\n  \tif(x > 9){\n    \tprint(x / 10);\n  \t}\n  \tputchar(x % 10 + 48);\n  \treturn ;\n}\nvoid dfs(int1 x,int1 y){//\u904d\u5386\uff0c\u770b\u6bcf\u4e2a X \u5206\u522b\u5c5e\u4e8e\u54ea\u4e2a\u6591\u70b9\u3002 \n\tb[x][y] = c;//b\u6570\u7ec4\u7528\u6765\u8bb0\u5f55\u6bcf\u4e2a X \u5206\u522b\u5c5e\u4e8e\u7b2c\u51e0\u4e2a\u6591\u70b9\u3002 \n\tfor(int1 k = 0; k <= 3; k++){\n\t\txx = x + d[0][k],yy = y + d[1][k];\n\t\tif(!b[xx][yy] && a[xx][yy]){//\u5982\u679c\u4e0b\u4e00\u4e2a\u70b9\u662f X \u5e76\u4e14\u6ca1\u6709\u88ab\u904d\u5386\u8fc7\uff0c \n\t\t\tdfs(xx,yy);//\u904d\u5386\u3002 \n\t\t}\n\t}\n\treturn ;\n}\nint1 dis(int1 x,int1 y){//\u7528\u4e8e\u8ba1\u7b97\u8fde\u63a5\u7b2c x \u4e2a\u6591\u70b9\u4e0e\u7b2c y \u4e2a\u6591\u70b9\u9700\u8981\u6d82\u7684\u6700\u5c11\u683c\u5b50\u6570\u3002 \n\tint1 minn = 1145141919810;\n\tfor(i = 1; i <= n; i++){\n\t\tfor(j = 1; j <= m; j++){\n\t\t\tfor(k = 1; k <= n; k++){\n\t\t\t\tfor(l = 1; l <= m; l++){\n\t\t\t\t\tif((b[i][j] == x && b[k][l] == y) || (b[i][j] == y && b[k][l] == x)){//\u5982\u679c\u8fd9\u4e24\u4e2a\u70b9\u5206\u522b\u5c5e\u4e8e\u7b2c x \u4e2a\u6591\u70b9\u548c\u7b2c y \u4e2a\u6591\u70b9\uff0c \n\t\t\t\t\t\tminn = min(minn,abs(i - k) + abs(j - l) - 1);//\u7edf\u8ba1\u7b54\u6848\u3002 \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn minn;\n}\nint main(){\n\t//freopen(\"pageant.in\",\"r\",stdin);\n\t//freopen(\"pageant.out\",\"w\",stdout);\n  \tn = read(),m = read();\n  \tfor(i = 1; i <= n; i++){\n\t  \tfor(j = 1; j <= m; j++){\n\t\t  \tch = getchar();\n\t\t  \twhile(ch != 'X' && ch != '.'){\n\t\t\t  \tch = getchar();\n\t\t\t}\n\t\t\ta[i][j] = (ch == 'X');//a \u6570\u7ec4\u7528\u4e8e\u8bb0\u5f55\u8fd9\u4e2a\u70b9\u662f X \u8fd8\u662f . \u3002 \n\t\t}\n\t}\n\tfor(i = 1; i <= n; i++){\n\t  \tfor(j = 1; j <= m; j++){\n\t\t  \tif(!b[i][j] && a[i][j]){//\u5982\u679c\u8fd9\u4e2a\u70b9\u662f X \u5e76\u4e14\u6ca1\u6709\u88ab\u904d\u5386\u8fc7\uff0c \n\t\t\t  \tc++;\n\t\t\t  \tdfs(i,j);//\u904d\u5386\u6574\u4e2a\u6591\u70b9\u3002 \n\t\t\t}\n\t\t}\n\t}\n\tt = dis(1,2),u = dis(2,3),v = dis(1,3);//\u8ba1\u7b97\u6591\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002 \n\ts = min(t + u,min(u,t) + v),c = 1145141919810;\n\tfor(i = 1; i <= n; i++){\n\t\tfor(j = 1; j <= m; j++){\n\t\t\tif(!b[i][j]){//\u5982\u679c\u8fd9\u4e2a\u70b9\u662f . \uff0c \n\t\t\t\tint1 q[4] = {0,1145141919810,1145141919810,1145141919810}; \n\t\t\t\tfor(k = 1; k <= n; k++){//\u679a\u4e3e\u5176\u4ed6\u7684 X\u3002 \n\t\t\t\t\tfor(l = 1; l <= m; l++){\n\t\t\t\t\t\tif(b[k][l]){\n\t\t\t\t\t\t\tq[b[k][l]] = min(q[b[k][l]],abs(i - k) + abs(j - l) - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tc = min(c,q[1] + q[2] + q[3] + 1);//\u66f4\u65b0\u7b54\u6848\u3002 \n\t\t\t}\n\t\t}\n\t}\n\tprint(min(s,c));//\u53d6\u4e24\u79cd\u65b9\u6848\u4e2d\u7684\u6700\u5c0f\u503c\u3002 \n  \treturn 0;\n}\n/*\u66fe\u7ecf\u628a\u6211\u4ee3\u7801\u5361\u6389\u7684 hack \u6570\u636e\uff0c\u5982\u679c WA \u4e86\uff0c\u53ef\u4ee5\u81ea\u6d4b\u4e00\u4e0b\u3002 \n3 3\n..X\n.X.\nX..\n*/\n```",
        "postTime": 1665138896,
        "uid": 510555,
        "name": "owo_ImposterAnYu_owo",
        "ccfLevel": 5,
        "title": "Cow Beauty Pageant S"
    },
    {
        "content": "## \u9898\u76ee\u7406\u89e3\n\n\u6709\u4e09\u4e2a\u8fde\u901a\u5757\uff0c\u6c42\u6700\u5c0f\u6539\u53d8\u591a\u5c11\u4e2a\u683c\u5b50\u624d\u80fd\u4f7f\u5f97\u5b83\u4eec\u53d8\u6210\u4e00\u4e2a\u8fde\u901a\u5757\u3002\n\n~~\u7b80\u77ed\u5427\uff01~~\n\n## \u601d\u8def\u6307\u5f15\n\n\u770b\u5230\u8fd9\u9053\u9898\uff0c\u4e00\u4e0b\u5c31\u7784\u5230\u4e86\u201c\u8fde\u901a\u5757\u201d\u4e09\u5b57\uff0c\u4e8e\u662f ~~\u6211\u9ad8\u5174\u7684\u624b\u821e\u8db3\u8e48~~ \u4e00\u4e0b\u5b50\u5c31\u60f3\u5230\u4e86\u201c\u704c\u6c34\u6cd5\u201d\u3002 ~~\uff08\u4e0d\u662f\u704c\u6c34\u7684\u90a3\u4e2a\u704c\u6c34\uff09~~\n\n### \u704c\u6c34\u90e8\u5206\u7a0b\u5e8f\n\n\u704c\u6c34\uff0c\u65e0\u975e\u5c31\u662f\u628a\u4e00\u4e2a\u8fde\u901a\u5757\u7684\u6240\u6709\u683c\u6807\u8bb0\u4e00\u4e0b\uff0c\u4ee5\u533a\u5206\u5404\u4e2a\u8fde\u901a\u5757\u4e0e\u975e\u8fde\u901a\u5757\u3002\n\n```cpp\nvoid dfs(int x, int y)\n{\n\tif (x > n || x < 1 || y > m || y < 1) return;\n\tif (s[x][y] == '.') return;\n\tif (id[x][y] > 0) return;\n\tid[x][y] = col;  // col \u4e3a\u5f53\u524d\u8fde\u901a\u5757\u7684\u7f16\u53f7\uff0c\u5728\u4e3b\u51fd\u6570\u4e2d\u6709\u66f4\u65b0\n\tdfs(x + 1, y);\n\tdfs(x, y + 1);\n\tdfs(x - 1, y);\n\tdfs(x, y - 1);\n}\n\n```\n\n\u7136\u540e\u5462\uff0c\u518d\u770b\u6570\u636e\u8303\u56f4\uff0c\u56af\uff01$N$ \u548c $M$ \u6700\u9ad8\u624d\u4e3a $50$\uff01 ~~\u4ee4\u4eba\u632f\u594b\u554a\uff01~~\n\n\u5728\u6b64\u63d0\u9192\u5404\u4f4d\uff0c\u6570\u636e\u8303\u56f4\u662f\u601d\u8def\u786e\u5b9a\u7684\u6cd5\u5b9d\uff0c\u4f8b\u5982\uff1a$N$ \u4e3a $20$ \u4e00\u822c\u53ef\u4ee5\u7528\u72b6\u6001\u538b\u7f29\u52a8\u89c4\u7b49\u7b49\u3002\n\n\u5927\u80c6\u5206\u6790\u4e00\u4e0b\uff0c\u4e0a\u9650 $50$ \u7684\u8bdd\u6700\u9ad8\u53ef\u4ee5\u5230\u56db\u6b21\u65b9\uff0c\u518d\u52a0\u4e0a\u8fd9\u662f\u4e8c\u7ef4\u95ee\u9898\uff0c\u5c31\u53ef\u4ee5\u8054\u60f3\u5230\u66b4\u641c\u4efb\u4e24\u4e2a\u70b9\u7684\u4e0b\u6807\u3002\n\n\u5230\u8fd9\u91cc\uff0c\u57fa\u672c\u5df2\u7ecf\u786e\u5b9a\u601d\u8def\u4e86\u2014\u2014\u704c\u6c34+\u66b4\u641c+\u6a21\u62df\u3002\n\n\u704c\u6c34\u524d\u6587\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff0c\u73b0\u5728\u8bf4\u8bf4\u6a21\u62df\u662f\u600e\u4e48\u4e2a\u6a21\u62df\u6cd5\u3002\n\n### \u66b4\u641c+\u6a21\u62df\u90e8\u5206\u7a0b\u5e8f\uff1a\n\n\u6a21\u62df\u53ef\u4ee5\u5206\u4ee5\u4e0b\u7c7b\uff1a\n\n\u7b2c\u4e00\u7c7b\uff1a\u4e24\u4e2a\u70b9\u5904\u5728\u4e0d\u540c\u7684\u8fde\u901a\u5757\u3002\u8fd9\u65f6\u6211\u8bbe\u4e86\u4e00\u4e2a\u6570\u7ec4 $dis$\uff0c$dis_{i, j}$ \u8868\u793a $i$ \u53f7\u8fde\u901a\u5757\u5230 $j$ \u53f7\u8fde\u901a\u5757\u7684\u6700\u8fd1\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\n\n\u7b2c\u4e8c\u7c7b\uff1a\u4e24\u4e2a\u70b9\u4e00\u4e2a\u5728\u8fde\u901a\u5757\uff0c\u4e00\u4e2a\u662f\u975e\u8fde\u901a\u5757\u70b9\u3002\u6b64\u65f6\u8bbe\u4e00\u4e2a\u6570\u7ec4 $disP$\uff0c$disP_{i,x,y}$ \u8868\u793a $i$ \u53f7\u8fde\u901a\u5757\u5230\uff08$x$\uff0c$y$\uff09\u70b9\u7684\u6700\u8fd1\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u6d4b\u51fa\uff0c\u7b54\u6848\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1\u3001\u53e6\u4e24\u4e2a\u8fde\u901a\u5757\u8fde\u53e6\u4e00\u4e2a\u8fde\u901a\u5757\u3002\n\n```cpp\nXXXX.....X\nXXXXX***XX\nX.......XX\n*.....XXXX\nXXX......X\nXXXX......\n```\n2\u3001\u4e09\u4e2a\u8fde\u901a\u5757\u5171\u540c\u8fde\u4e00\u4e2a\u975e\u8fde\u901a\u5757\u70b9\u3002\n\n```cpp\nXX...XX\nXXX*XXX\n...X...\nXXXXXXX\n```\n\u6240\u4ee5\u66b4\u641c\u6a21\u62df\u90e8\u5206\u7a0b\u5e8f\u5982\u4e0b\uff1a\uff08\u5229\u7528 $dis$ \u4e0e $disP$ \u6570\u7ec4\u8bb0\u5f55\u5f53\u524d\u8ddd\u79bb\uff0c\u6700\u540e\u53d6\u6700\u5c0f\u503c\u5c31\u884c\u4e86\uff09\n\n```cpp\nfor (int i = 1; i <= n; i++)\n\tfor (int j = 1; j <= m; j++)\n\t\tfor (int x = 1; x <= n; x++)\n\t\t\tfor (int y = 1; y <= m; y++)\n\t\t\t{\n\t\t\t\tif (id[i][j] > 0 && id[x][y] > 0 && id[i][j] != id[x][y])\n\t\t\t\t\tdis[id[i][j]][id[x][y]] = min(dis[id[i][j]][id[x][y]], abs(i - x) + abs(j - y));\n\t\t\t\telse if (id[i][j] == 0 && id[x][y] > 0)\n\t\t\t\t\tdisP[id[x][y]][i][j] = min(disP[id[x][y]][i][j], abs(i - x) + abs(j - y));\n\t\t\t\telse continue;\n\t\t\t}\n```\n\n### \u8f93\u51fa\u7b54\u6848\n\n\u7b54\u6848\u53ef\u4ee5\u6709\u56db\u79cd\u5f62\u5f0f\uff1a$1$\u3001$2$ \u53f7\u8fde\u901a\u5757\u8fde $3$ \u53f7\u8fde\u901a\u5757\uff1b$1$\u3001$3$ \u53f7\u8fde\u901a\u5757\u8fde $2$ \u53f7\u8fde\u901a\u5757\uff1b$2$\u3001$3$ \u53f7\u8fde\u901a\u5757\u8fde $1$ \u53f7\u8fde\u901a\u5757\uff1b$1$\u3001$2$\u3001$3$ \u53f7\u8fde\u901a\u5757\u8fde\u5176\u5b83\u975e\u8fde\u901a\u5757\u70b9\n\n```cpp\nint ans = min(dis[2][3] + dis[1][3], min(dis[1][2] + dis[1][3], dis[1][2] + dis[2][3])) - 2;\nfor (int i = 1; i <= n; i++)\n\tfor (int j = 1; j <= m; j++)\n\t\tif (id[i][j] == 0)\n\t\t\tans = min(ans, disP[1][i][j] + disP[2][i][j] + disP[3][i][j] - 2);\ncout << ans << endl;\n```\n\n## AC Code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint col = 0;\nint n, m;\nstring s[55];\nint id[55][55];\nint dis[5][5];\nint disP[5][55][55];\n\nvoid dfs(int x, int y)\n{\n\tif (x > n || x < 1 || y > m || y < 1) return;\n\tif (s[x][y] == '.') return;\n\tif (id[x][y] > 0) return;\n\tid[x][y] = col;\n\tdfs(x + 1, y);\n\tdfs(x, y + 1);\n\tdfs(x - 1, y);\n\tdfs(x, y - 1);\n}\n\nint main()\n{\n\tcin >> n >> m;\n\tfor (int i = 1; i <= n; i++)\n\t{\n\t\tcin >> s[i];\n\t\ts[i] = \" \" + s[i];\n\t}\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tif (id[i][j] == 0 && s[i][j] == 'X')\n\t\t\t{\n\t\t\t\tcol++;\n\t\t\t\tdfs(i, j);\n\t\t\t}\n\tmemset(dis, 999999, sizeof(dis));\n\tmemset(disP, 999999, sizeof(disP));\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tfor (int x = 1; x <= n; x++)\n\t\t\t\tfor (int y = 1; y <= m; y++)\n\t\t\t\t{\n\t\t\t\t\tif (id[i][j] > 0 && id[x][y] > 0 && id[i][j] != id[x][y])\n\t\t\t\t\t\tdis[id[i][j]][id[x][y]] = min(dis[id[i][j]][id[x][y]], abs(i - x) + abs(j - y));\n\t\t\t\t\telse if (id[i][j] == 0 && id[x][y] > 0)\n\t\t\t\t\t\tdisP[id[x][y]][i][j] = min(disP[id[x][y]][i][j], abs(i - x) + abs(j - y));\n\t\t\t\t\telse continue;\n\t\t\t\t}\n\tint ans = min(dis[2][3] + dis[1][3], min(dis[1][2] + dis[1][3], dis[1][2] + dis[2][3])) - 2;\n\tfor (int i = 1; i <= n; i++)\n\t\tfor (int j = 1; j <= m; j++)\n\t\t\tif (id[i][j] == 0)\n\t\t\t\tans = min(ans, disP[1][i][j] + disP[2][i][j] + disP[3][i][j] - 2);\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n\n## \u540e\u8bb0\n\n\n#### \u751f\u6d3b\u4e2d\u4e0d\u7f3a\u80fd\u53d1\u7684\u9898\u89e3\uff0c\u53ea\u7f3a\u53d1\u73b0\u9898\u7684\u773c\u775b",
        "postTime": 1664897836,
        "uid": 548203,
        "name": "KK_lang",
        "ccfLevel": 5,
        "title": "Cow Beauty Pageant"
    },
    {
        "content": "\u4e00\u9053\u8f83\u4e3a\u590d\u6742\u7684\u641c\u7d22\u9898\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u4e2a\u8f83\u4e3a~~\u7e41\u7410~~\u7684\u505a\u6cd5\u3002\n\n---\n\n\u9996\u5148\uff0c\u6211\u4eec\u6709\u4e24\u79cd\u627e\u7b54\u6848\u7684\u65b9\u6cd5\u3002\u4e00\u79cd\u662f\u57fa\u4e8e\u4e00\u4e2a\u8fde\u901a\u5757\u627e\u53e6\u4e00\u4e2a\u8fde\u901a\u5757\uff0c\u4e00\u79cd\u662f\u57fa\u4e8e\u4e00\u4e2a\u70b9\u8fde\u4e09\u4e2a\u8fde\u901a\u5757\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e00\u79cd\u505a\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5148 dfs \u5bf9\u8d77\u70b9\u6240\u5904\u7684\u8fde\u901a\u5757\u8fdb\u884c\u5904\u7406\uff0c\u7136\u540e\u518d bfs \u627e\u5176\u4ed6\u7684\u4e00\u4e2a\u8fde\u901a\u5757\u3002\u6700\u540e\u8fd9\u6837\u5904\u7406\u4e24\u6b21\u3002\n\n\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u505a\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u6240\u6709 `X` \u70b9\u6536\u96c6\u8d77\u6765\uff0c\u7136\u540e\u679a\u4e3e\u70b9\u7136\u540e\u6c42\u6700\u5c0f\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u548c\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(n^2m^2)$\u3002\n\nAC Code\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int X[]={1,0,-1,0};\nconst int Y[]={0,1,0,-1};\nint n,m,a[55][55],c[55][55],f[55][55],sx,sy,k,qx[500005],qy[500005],qdep[500005],ans;\npair<int,int>b[2505];\n\nvoid dfs(int x,int y)\n{\n\tb[++k]={x,y};//\u8bb0\u5f55\u6240\u6709\u67d3\u8272\u7684\u5750\u6807\n\tc[x][y]=1;\n\ta[x][y]=2;//\u6807\u8bb0\n\tfor(int i=0;i<4;i++)\n\t{\n\t\tint x_=x+X[i],y_=y+Y[i];\n\t\tif(x_>0&&x_<=n&&y_>0&&y_<=m&&a[x_][y_]&&!c[x_][y_]) dfs(x_,y_);\n\t}\n}\n\nint bfs(int bx,int by)//\u627e\u53e6\u4e00\u4e2a\u8fde\u901a\u5757\n{\n\tmemset(f,0,sizeof(f));\n\tint h=1,t=1,res=INT_MAX;\n\tqx[h]=bx;\n\tqy[h]=by;\n\tqdep[h]=0;\n\twhile(h<=t)\n\t{\n\t\tint x=qx[h],y=qy[h],dep=qdep[h++];\n\t\tif(x<1||y<1||x>n||y>m||f[x][y]||a[x][y]==2&&h!=2) continue;\n\t\tif(a[x][y]==1)\n\t\t{\n\t\t\tif(res>=dep)\n\t\t\t{\n\t\t\t\tres=dep;\n\t\t\t\tsx=x;\n\t\t\t\tsy=y;//\u4fbf\u4e8e\u6267\u884c\u7b2c\u4e8c\u6b21 dfs \u548c bfs\n\t\t\t}\n\t\t}\n\t\tf[x][y]=1;\n\t\tfor(int i=0;i<4;i++)\n\t\t{\n\t\t\tqx[++t]=x+X[i];\n\t\t\tqy[t]=y+Y[i];\n\t\t\tqdep[t]=dep+1;\n\t\t}\n\t}\n\treturn --res;\n}\n\nint main()\n{\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tchar c;\n\t\t\tcin>>c;\n\t\t\ta[i][j]=c=='X'?1:0;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(a[i][j]==1)\n\t\t\t{\n\t\t\t\tsx=i;\n\t\t\t\tsy=j;\n\t\t\t\tgoto p;\n\t\t\t}\n\t\t}\n\t}\n\tp:;\n\tdfs(sx,sy);\n\tint s=INT_MAX;\n\tfor(int i=1;i<=k;i++)\n\t{\n\t\tmemset(f,0,sizeof(f));\n\t\ts=min(s,bfs(b[i].first,b[i].second));\n\t}\n\tans+=s;\n\tint nk=k;\n\tdfs(sx,sy);\n\ts=INT_MAX;\n\tfor(int i=1;i<=k;i++)\n\t{\n\t\tmemset(f,0,sizeof(f));\n\t\ts=min(s,bfs(b[i].first,b[i].second));\n\t}\n\tans+=s;//\u6267\u884c\u4e24\u6b21\n\tint mk=k;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(a[i][j]==1) b[++k]={i,j};\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tif(a[i][j]) continue;//\u5fc5\u987b\u679a\u4e3e\u975e\u586b\u5145\u70b9\n\t\t\ts=0;\n\t\t\tint t=INT_MAX;\n\t\t\tfor(int l=1;l<=nk;l++) t=min(t,abs(b[l].first-i)+abs(b[l].second-j));\n\t\t\ts+=t;\n\t\t\tt=INT_MAX;\n\t\t\tfor(int l=nk+1;l<=mk;l++) t=min(t,abs(b[l].first-i)+abs(b[l].second-j));\n\t\t\ts+=t;\n\t\t\tt=INT_MAX;\n\t\t\tfor(int l=mk+1;l<=k;l++) t=min(t,abs(b[l].first-i)+abs(b[l].second-j));\n\t\t\t//[1,nk] \u4e3a\u7b2c\u4e00\u4e2a\u8fde\u901a\u5757\uff0c[nk+1,mk] \u4e3a\u7b2c\u4e8c\u4e2a\u8fde\u901a\u5757\uff0c[mk+1,k] \u4e3a\u7b2c\u4e09\u4e2a\u8fde\u901a\u5757\n\t\t\tans=min(ans,s+t-2);//\u66fc\u54c8\u987f\u8ddd\u79bb\u548c\u4f1a\u91cd\u590d\u8ba1\u7b97\u679a\u4e3e\u7684\u70b9\uff0c\u6545\u51cf\u53bb\u4e8c\n\t\t}\n\t}\n\tcout<<ans;\n \treturn 0;\n}\n```",
        "postTime": 1664013757,
        "uid": 400269,
        "name": "_JYqwq_",
        "ccfLevel": 0,
        "title": "P6131 [USACO11NOV]Cow Beauty Pageant S\u3000\u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8\uff1aP6131 [USACO11NOV]Cow Beauty Pageant S](https://www.luogu.com.cn/problem/P6131)\r\n**\u5e7f\u641c\u4e24\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u628a\u4e24\u79cd\u60c5\u51b5\u5408\u5e76\u6210\u4e00\u79cd\u3002**\r\n- - -\r\n1.\u628a $3$ \u4e2a\u4e0d\u540c\u7684\u6591\u70b9\u6807\u4e0a\u5e8f\u53f7\u3002\r\n\r\n2.\u4ee5\u6bcf\u4e2a\u6591\u70b9\u548c\u975e\u8fde\u901a\u5757\u7684\u70b9\u5f53\u4f5c\u8d77\u70b9\u8dd1\u4e00\u8fb9\u5e7f\u641c\uff08```find_dot```\uff09\uff0c\r\n\u5728\u540c\u4e00\u8fde\u6591\u70b9\u4e0d\u8017\u65f6\uff0c\u6df1\u641c\u628a\u5728\u8fb9\u7f18\u7684\u70b9\u653e\u8fdb\u961f\u5217\uff08```ready```)\u3002\r\n\r\n3.\u627e\u5230\u6ee1\u8db3\u4e0e\u4e09\u4e2a\u8fde\u901a\u5757\u7684\u8ddd\u79bb\u6700\u5c0f\u503c\u65f6\u8fd4\u56de\u53d6 $\\min$\u3002\u4ee5\u67d0\u4e2a\u6591\u70b9\u4e3a\u8d77\u70b9\u65f6\uff0c\u5230\u81ea\u5df1\u7684\u8ddd\u79bb\u4e3a $0$\u3002\r\n- - -\r\n\u4ee3\u7801\uff1a\r\n```cpp\r\n#include<iostream>\r\n#include<cstring>\r\n#include<queue>\r\n\r\nusing namespace std;\r\n\r\nint n,m,dot_sum,xx[4]={0,0,1,-1},yy[4]={1,-1,0,0},a_b[4],cnt=1145141980;\r\nbool q_b[52][52];\r\nchar map[52][52];\r\n\r\nvoid check_dot(int x,int y){//\u628a3\u4e2a\u4e0d\u540c\u7684\u6591\u70b9\u6807\u4e0a\u5e8f\u53f7\r\n    map[x][y]=dot_sum;\r\n    for(int i=0;i<4;i++){\r\n        int nx=x+xx[i],ny=y+yy[i];\r\n        if(map[nx][ny]=='X') check_dot(nx,ny);\r\n    }\r\n}\r\n\r\nbool vis[52][52];\r\nstruct dot{int x,y,st;};queue<dot> q;\r\nvoid ready(int x,int y,int s,int st=0){//\u5728\u540c\u4e00\u8fde\u6591\u70b9\u4e0d\u8017\u65f6,\u6df1\u641c\u628a\u5728\u8fb9\u7f18\u7684\u70b9\u653e\u8fdb\u961f\u5217\r\n    vis[x][y]=1;\r\n    bool bo=1;\r\n    for(int i=0;i<4;i++){\r\n        int nx=x+xx[i],ny=y+yy[i];\r\n        if(map[nx][ny]=='.' && bo) bo=0,q.push((dot){x,y,st});\r\n        if(map[nx][ny]==s && !vis[nx][ny]) ready(nx,ny,s,st);\r\n    }\r\n}\r\n\r\nint find_dot(int ss=0){\r\n    while(!q.empty()){\r\n        int x=q.front().x,y=q.front().y,st=q.front().st;q.pop();\r\n        for(int i=0;i<4;i++){\r\n            int nx=x+xx[i],ny=y+yy[i],mapp=map[nx][ny];\r\n            if(!vis[nx][ny]){\r\n                if(mapp=='.'){\r\n                    vis[nx][ny]=1;\r\n                    q.push((dot){nx,ny,st+1});\r\n                } \r\n                if(mapp>0 && mapp<=3){\r\n                    a_b[mapp]=st;\r\n                    if(a_b[1]!=-1 && a_b[2]!=-1 && a_b[3]!=-1) return a_b[1]+a_b[2]+a_b[3];//\u627e\u5230\u6ee1\u8db3\u4e0e\u4e09\u4e2a\u8fde\u901a\u5757\u7684\u8ddd\u79bb\u6700\u5c0f\u503c\u65f6\u8fd4\u56de\u53d6min\r\n                    ready(nx,ny,mapp,st);//\u5728\u540c\u4e00\u8fde\u6591\u70b9\u4e0d\u8017\u65f6,\u6df1\u641c\u628a\u5728\u8fb9\u7f18\u7684\u70b9\u653e\u8fdb\u961f\u5217\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nint main(){\r\n    scanf(\"%d%d\",&n,&m);\r\n    for(int i=1;i<=n;i++) scanf(\"%s\",map[i]+1);\r\n\r\n    //\u628a3\u4e2a\u4e0d\u540c\u7684\u6591\u70b9\u6807\u4e0a\u5e8f\u53f7\r\n    for(int i=1;i<=n;i++) for(int j=1;j<=m;j++) if(map[i][j]=='X') dot_sum++,check_dot(i,j);\r\n    dot_sum=1;\r\n    for(int i=1;i<=n;i++){//\u4ee5\u6bcf\u4e2a\u6591\u70b9\u548c\u975e\u8fde\u901a\u5757\u7684\u70b9\u5f53\u4f5c\u8d77\u70b9\u8dd1\u4e00\u8fb9\u5e7f\u641c\r\n        for(int j=1;j<=m;j++){\r\n            while(!q.empty()) q.pop();\r\n\r\n            if(map[i][j]==dot_sum){\r\n                memset(vis,0,sizeof(vis));\r\n                memset(a_b,-1,sizeof(a_b));\r\n                ready(i,j,dot_sum);\r\n                a_b[dot_sum]=0;//\u4ee5\u67d0\u4e2a\u6591\u70b9\u4e3a\u8d77\u70b9\u65f6\u5230\u81ea\u5df1\u8ddd\u79bb\u8bbe\u4e3a0\r\n                cnt=min(cnt,find_dot(dot_sum));\r\n                dot_sum++;\r\n            }\r\n            if(map[i][j]=='.'){\r\n                memset(vis,0,sizeof(vis));\r\n                memset(a_b,-1,sizeof(a_b));\r\n                q.push((dot){i,j,0});\r\n                vis[i][j]=1;\r\n                cnt=min(cnt,find_dot()+1);//\u627e\u5230\u6ee1\u8db3\u4e0e\u4e09\u4e2a\u8fde\u901a\u5757\u7684\u8ddd\u79bb\u6700\u5c0f\u503c\u65f6\u8fd4\u56de\u53d6min\r\n            }\r\n        }\r\n    }\r\n\r\n    printf(\"%d\",cnt);\r\n}\r\n```",
        "postTime": 1657610747,
        "uid": 667763,
        "name": "jr_linys",
        "ccfLevel": 0,
        "title": "\u5408\u5e76\u4e24\u79cd\u60c5\u51b5\u7684\u65b9\u6cd5P6131"
    },
    {
        "content": "## \u9898\u610f\n\u7ed9\u5b9a\u4e00\u4e2a\u7531\u7a7a\u767d\u548c\u6591\u70b9\u7ec4\u6210\u7684\u5b57\u7b26\u77e9\u9635\uff0c\u6591\u70b9\u521a\u597d\u7ec4\u6210\u4e09\u4e2a\u56db\u65b9\u5411\u7684\u8fde\u901a\u5757\uff0c\u6c42\u6700\u5c11\u5c06\u591a\u5c11\u4e2a\u683c\u5b50\u53d8\u6210\u6591\u70b9\uff0c\u53ef\u4ee5\u5c06\u4e09\u4e2a\u8fde\u901a\u5757\u5408\u5e76\u3002\n## \u601d\u8def\n\u601d\u8003\u5408\u5e76\u8fde\u901a\u5757\u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u53d1\u73b0\u6709\u4e24\u79cd\u5408\u5e76\u7684\u65b9\u6cd5\uff1a\n\n1. \u4e24\u4e2a\u8fde\u901a\u5757\u5206\u522b\u8fde\u63a5\u5230\u53e6\u4e00\u4e2a\u8fde\u901a\u5757\u4e0a\u3002\n2. \u9009\u62e9\u4e00\u4e2a\u6c47\u5408\u70b9\uff0c\u4e09\u4e2a\u8fde\u901a\u5757\u5206\u522b\u8fde\u63a5\u5230\u6c47\u5408\u70b9\u4e0a\u3002\n\n\u5982\u679c\u5408\u5e76\u65f6\u8fde\u63a5\u7684\u8def\u5f84\u6709\u91cd\u53e0\uff0c\u53ea\u4f1a\u8ba9\u7b54\u6848\u53d8\u5927\u4f1a\u5f71\u54cd\u6700\u4f18\u7b54\u6848\u7684\u6c42\u89e3\uff0c\u800c\u6700\u4f18\u7b54\u6848\u5fc5\u7136\u4e3a\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u4e4b\u4e00\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u627e\u5230\u4e09\u4e2a\u8fde\u901a\u5757\uff0c\u7136\u540e\u5206\u522b\u4ece\u4e09\u4e2a\u8fde\u901a\u5757\u5f00\u59cb\u7528\u5bbd\u5ea6\u4f18\u5148\u904d\u5386\u6269\u5f20\uff0c\u8ba1\u7b97\u51fa\u6bcf\u4e2a\u683c\u5b50\u5206\u522b\u5230\u4e09\u4e2a\u8fde\u901a\u5757\u7684\u8ddd\u79bb\uff0c\u8fdb\u4e00\u6b65\u5c31\u53ef\u4ee5\u8ba1\u7b97\u51fa\u8fde\u901a\u5757\u4e4b\u95f4\u7684\u8ddd\u79bb\uff0c\u6700\u540e\u679a\u4e3e\u8fdb\u884c\u6c42\u89e3\u5373\u53ef\u3002\n## CODE\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int kMaxN = 51, kD[4][2] = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}};\nint a[kMaxN][kMaxN], d[kMaxN][kMaxN][3], l[3][3], q[kMaxN * kMaxN][2];\nint n, m, o, h, t, ans = 1e9;\nchar c;\nvoid R(int i, int x, int y, int l) {                                              // \u6269\u5c55\u4f4d\u7f6e(x, y)\u7684\u4f4d\u7f6e\uff0c\u7c7b\u578bi\uff0c\u8ddd\u79bbl\n  if (x < 1 || x > n || y < 1 || y > m || d[x][y][o] || !(i || a[x][y] == -1)) {  // \u8d8a\u754c\u3001\u91cd\u590d\u6216\u8005\u5b57\u7b26\u4e0d\u5339\u914d\n    return;\n  }\n  d[x][y][o] = l;  // \u8bb0\u5f55\u8ddd\u79bb\n  if (!i) {        // \u662f\u6269\u5c55\u6591\u70b9\n    a[x][y] = o;   // \u6807\u8bb0\u6591\u70b9\n  }\n  ++t, q[t][0] = x, q[t][1] = y;  // \u5c06\u4f4d\u7f6e\u52a0\u5165\u961f\u5217\n}\n\nvoid W(int x, int y) {                                  // \u4ece(x, y)\u6240\u5728\u6591\u70b9\u5f00\u59cb\u904d\u5386\u77e9\u9635\n  h = 0, t = -1;                                        // \u521d\u59cb\u5316\u961f\u5217\n  R(0, x, y, 1);                                        // \u52a0\u5165\u521d\u59cb\u4f4d\u7f6e\n  for (int i = 0; i <= t; i++) {                        // \u6309\u987a\u5e8f\u5904\u7406\u4f4d\u7f6e\n    for (int j = 0; j < 4; j++) {                       // \u679a\u4e3e\u65b9\u5411\n      R(0, q[i][0] + kD[j][0], q[i][1] + kD[j][1], 1);  // \u6269\u5c55\u6591\u70b9\n    }\n  }\n  for (; h <= t; h++) {                                                          // \u6309\u987a\u5e8f\u5904\u7406\u4f4d\u7f6e\n    for (int i = 0; i < 4; i++) {                                                // \u679a\u4e3e\u65b9\u5411\n      R(1, q[h][0] + kD[i][0], q[h][1] + kD[i][1], d[q[h][0]][q[h][1]][o] + 1);  // \u6269\u5c55\u5176\u4ed6\u4f4d\u7f6e\n    }\n  }\n}\n\nint main() {\n  cin >> n >> m;\n  for (int i = 1; i <= n; i++) {\n    for (int j = 1; j <= m; j++) {\n      cin >> c;\n      a[i][j] = (c == 'X') - 2;  // \u5b57\u7b26\u8f6c\u6570\u5b57\uff0c\u7a7a\u767d-2\u3001\u6591\u70b9-1\n    }\n  }\n  for (int i = 1; i <= n; i++) {\n    for (int j = 1; j <= m; j++) {  // \u679a\u4e3e\u7f51\u683c\n      if (a[i][j] == -1) {          // \u627e\u5230\u672a\u5904\u7406\u7684\u6591\u70b9\n        W(i, j), o++;               // \u4ece\u5f53\u524d\u6591\u70b9\u8fdb\u884c\u5bbd\u5ea6\u4f18\u5148\u904d\u5386\uff0c\u589e\u52a0\u6591\u70b9\u6570\u91cf\n      }\n    }\n  }\n  fill(l[0], l[0] + 9, 1e9);  // \u521d\u59cb\u5316\u6591\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\n  for (int i = 1; i <= n; i++) {\n    for (int j = 1; j <= m; j++) {                               // \u679a\u4e3e\u683c\u5b50\n      ans = min(ans, d[i][j][0] + d[i][j][1] + d[i][j][2] - 5);  // \u4e09\u4e2a\u6591\u70b9\u8fde\u63a5\u5230\u8be5\u70b9\uff0c\u66f4\u65b0\u7b54\u6848\n      if (a[i][j] >= 0) {                                        // \u5f53\u524d\u683c\u5b50\u662f\u6591\u70b9\n        for (int k = 0; k <= 2; k++) {                           // \u679a\u4e3e\u6591\u70b9\n          l[a[i][j]][k] = min(l[a[i][j]][k], d[i][j][k] - 1);    // \u66f4\u65b0\u6591\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\n        }\n      }\n    }\n  }\n  for (int i = 0; i <= 2; i++) {                      // \u679a\u4e3e\u6591\u70b9\n    ans = min(ans, l[i][0] + l[i][1] + l[i][2] - 2);  // \u8fde\u63a5\u5230\u8be5\u6591\u70b9\uff0c\u66f4\u65b0\u7b54\u6848\n  }\n  cout << ans;\n  return 0;\n}\n\n```",
        "postTime": 1655525624,
        "uid": 444534,
        "name": "\u54c8\u58eb\u5947\u61a8\u61a8",
        "ccfLevel": 5,
        "title": "P6131 [USACO11NOV]Cow Beauty Pageant S"
    },
    {
        "content": "[\u53cc\u500d\u7ecf\u9a8c\uff01](https://www.luogu.com.cn/problem/P2124)\n\n\u505a\u6cd5\uff1a $bfs$ \u5224\u8054\u901a\u5757 + $O(n^4)$ \u66b4\u529b\u6a21\u62df\n\n\u9996\u5148\uff0c $n$ \u548c $m$ \u8303\u56f4\u6781\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u641c\u7d22~~\u4e71\u641e~~\u3002\n\n\u5148\u8981\u786e\u5b9a\u6bcf\u4e00\u4e2a `X` \u5c5e\u4e8e\u54ea\u4e00\u4e2a\u8054\u901a\u5757,\u7528 $bfs$ \u5373\u53ef\u5b9e\u73b0\u3002\n\n\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u51fa\u6bcf\u4e24\u4e2a\u70b9\uff0c\u5206\u56db\u79cd\u60c5\u51b5\u6765\u8ba8\u8bba $a$ \u4e0e $b$ \u7684\u5173\u7cfb\u3002\uff08\u8bbe\u5b83\u4eec\u4e3a $a$ \u548c $b$\uff09\n\n\u4e0b\u9762 $dis$ \u4ee3\u8868\u6bcf\u4e24\u4e2a\u8054\u901a\u5757\u4e4b\u95f4\u7684\u6700\u5c0f\u8ddd\u79bb\uff0c $dis$_$n$ \u4ee3\u8868 $a$ \u5230\u6bcf\u4e2a\u8054\u901a\u5757\u7684\u8ddd\u79bb\uff0c $bel$ \u4ee3\u8868\u5f53\u524d\u70b9\u5c5e\u4e8e\u54ea\u4e2a\u8054\u901a\u5757\uff0c $dist(a,b)$ \u4e3a $a$\uff0c$b$ \u4e24\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb\u3002\n\n1. $a$ \u548c $b$ \u5747\u4e3a `X`\n  \n   \u5219 $a$ \u4e0e $b$ \u4e4b\u95f4\u7684\u8ddd\u79bb\u4e0e $a$\uff0c$b$ \u4e24\u70b9\u5c5e\u4e8e\u7684\u8054\u901a\u5757\u8ddd\u79bb\u53d6\u8f83\u5c0f\u503c\u3002\n   \n   \u5373\u4e3a `dis[bel[a.x][a.y]][bel[b.x][b.y]]=min(dis[bel[a.x][a.y]][bel[b.x][b.y]],dist(a,b))` \u3002\n   \n2. $a$ \u548c $b$ \u5747\u4e3a `.`\n   \n   \u6240\u4ee5 $a$ \u7684\u7b54\u6848\u548c $b$ \u6ca1\u4ec0\u4e48\u5173\u7cfb\uff0c\u8df3\u8fc7\u5373\u53ef\u3002\n   \n3. $a$ \u4e3a `X`\uff0c$b$ \u4e3a `.`\n\n   \u6240\u4ee5 $a$ \u4e0e $b$ \u8fd8\u662f\u6ca1\u6709\u5173\u7cfb\uff0c\u7ee7\u7eed\u8df3\u8fc7\u3002\n   \n4. $a$ \u4e3a `.`\uff0c$b$ \u4e3a `X`\n\n   \u5219 $a$ \u5230 $b$ \u4e4b\u95f4\u7684\u8ddd\u79bb\u4e0e $a$ \u5230   $b$ \u5c5e\u4e8e\u7684\u8054\u901a\u5757\u7684\u8ddd\u79bb\u53d6\u8f83\u5c0f\u503c\u3002\n   \n   \u5373\u4e3a `dis_n[bel[b.x][b.y]]=min(dis_n[bel[b.x][b.y]],dist(a,b))` \u3002\n   \n\u5173\u4e8e\u4e0a\u9762\u60c5\u51b52,4\u4e3a\u4ec0\u4e48\u8981\u8df3\u8fc7\uff0c\u56e0\u4e3a $a$ \u548c $b$ \u662f\u53ef\u4ee5\u4ea4\u6362\u7684\uff0c\u8fd9\u4e24\u79cd\u60c5\u51b5\u7b49\u5230\u540e\u9762\u4e00\u5b9a\u4f1a\u8003\u8651\u5230\u3002\n \n\u6bcf\u679a\u4e3e\u4e00\u4e2a $a$ \uff0c\u6211\u4eec\u90fd\u8981\u8003\u8651 $a$ \u4f5c\u4e3a\u4e09\u4e2a\u8054\u901a\u5757\u4ea4\u53c9\u7684\u70b9\u7684\u603b\u957f\u5ea6\uff0c\u5373\u4e3a `dis_n[1]+dis_n[2]+dis_n[3]` \u3002\n\n\u6700\u540e\uff0c\u8003\u8651\u4ea4\u53c9\u70b9\u5728\u8054\u901a\u5757\u4e2d\u7684\u60c5\u51b5\uff0c\u679a\u4e3e\u53d6\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n\u6ce8\u610f\uff0c\u5728\u8f93\u51fa\u7684\u65f6\u5019\u7b54\u6848\u8981\u51cf $2$ ,\u56e0\u4e3a\u4ea4\u53c9\u70b9\u7b97\u4e86\u4e09\u6b21\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MAXN=55;\nstruct node\n{\n\tint x,y;\n};\nint n,m;\nchar ma[MAXN][MAXN];\nint bel[MAXN][MAXN];\nint fx[5]={0,-1,1,0,0};\nint fy[5]={0,0,0,-1,1};\nint dis[MAXN][MAXN],dis_n[MAXN];\ninline int dist(node x,node y)//\u4e0a\u6587\u6240\u8ff0\u7684\u8ddd\u79bb\u51fd\u6570\n{\n\treturn abs(x.x-y.x)+abs(x.y-y.y);\n}\ninline void bfs(int x,int y,int col)//bfs\u5224\u8054\u901a\u5757\n{\n\tqueue<node>q;\n\tq.push((node){x,y});\n\tbel[x][y]=col;\n\twhile(!q.empty())\n\t{\n\t\tnode top=q.front();\n\t\tq.pop();\n\t\tfor(register int i=1;i<=4;i++)\n\t\t{\n\t\t\tint nx=top.x+fx[i],ny=top.y+fy[i];\n\t\t\tif(nx>=1&&nx<=n&&ny>=1&&ny<=m&&ma[nx][ny]=='X'&&bel[nx][ny]==0)\n\t\t\t{\n\t\t\t\tbel[nx][ny]=col;\n\t\t\t\tq.push((node){nx,ny});\n\t\t\t}\n\t\t}\n\t}\n}\nint main()\n{\n\tmemset(dis,0x7f,sizeof(dis));\n\tscanf(\"%d%d\",&n,&m);\n\tfor(register int i=1;i<=n;i++)\n\t\tfor(register int j=1;j<=m;j++)\n\t\t{\n\t\t\tcin>>ma[i][j];\n\t\t\tif(ma[i][j]=='.')bel[i][j]=-1;\n\t\t}\n\tint now=0;\n\tfor(register int i=1;i<=n;i++)\n\t\tfor(register int j=1;j<=m;j++)\n\t\t\tif(ma[i][j]=='X'&&!bel[i][j])bfs(i,j,++now);\n\tint ans=0x3f3f3f3f;\n\tfor(register int i=1;i<=n;i++)\n\t\tfor(register int j=1;j<=m;j++)\n\t\t{\n\t\t\tnode a;\n\t\t\ta.x=i,a.y=j;\n\t\t\tmemset(dis_n,0x3f,sizeof(dis_n));\n\t\t\tfor(register int k=1;k<=n;k++)\n\t\t\t\tfor(register int l=1;l<=m;l++)\n\t\t\t\t{\n\t\t\t\t\tnode b;\n\t\t\t\t\tb.x=k,b.y=l;\n\t\t\t\t\tif(ma[a.x][a.y]=='X'&&ma[b.x][b.y]=='X')\n\t\t\t\t\t\tdis[bel[a.x][a.y]][bel[b.x][b.y]]=min(dis[bel[a.x][a.y]][bel[b.x][b.y]],dist(a,b));//\u60c5\u51b51\n\t\t\t\t\tif(ma[a.x][a.y]=='.'&&ma[b.x][b.y]=='X')\n\t\t\t\t\t\tdis_n[bel[b.x][b.y]]=min(dis_n[bel[b.x][b.y]],dist(a,b));//\u60c5\u51b53\n\t\t\t\t}\n\t\t\tif(ma[a.x][a.y]!='X')ans=min(ans,dis_n[1]+dis_n[2]+dis_n[3]);//a\u4e3a\u4ea4\u53c9\u70b9\n\t\t}\n\tans=min(ans,min(dis[1][2]+dis[2][3],min(dis[1][3]+dis[2][3],dis[1][2]+dis[1][3])));//\u7edf\u8ba1\u7b54\u6848\n\tprintf(\"%d\",ans-2);\n\treturn 0;\n}\n```",
        "postTime": 1632297668,
        "uid": 126871,
        "name": "yzh_Error404",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P6131 \u3010Cow Beauty Pageant S\u3011"
    },
    {
        "content": "[\u9898\u76ee](https://www.luogu.com.cn/problem/P6131)\n\n[double\u7ecf\u9a8c](https://www.luogu.com.cn/problem/P2124)\n\n[\u535a\u5ba2](https://blog.csdn.net/yhhy666/article/details/109475772)\n\n\u56e0\u4e3an,m\u90fd\u5f88\u5c0f\uff0c\u5e76\u4e14\u6709\u4e14\u53ea\u6709\u4e09\u4e2a\u8054\u901a\u5757\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528BFS\u76f4\u63a5\u704c\u6c34\u4e00\u904d\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u7edf\u8ba1\u51fa\u6765\u90a3\u4e9b\u5904\u4e8e\u90a3\u4e9b\u8054\u901a\u5757\uff0c\u7136\u540e\u6c42\u8ddd\u79bb\n\n\u6c42\u8ddd\u79bb\u6211\u4eec\u5206\u6210\u4e24\u79cd\u4e0d\u540c\u7684\u60c5\u51b5\n\n**1**.\u8def\u5f84\u4e0d\u76f8\u4ea4\u7684\u65f6\u5019\uff0c\u90a3\u4e48\u4ed6\u7684\u8ddd\u79bb\u5c31\u662f \n_ans=min(ans, min(dis[1][2]+dis[2][3],min(dis[1][3]+dis[2][3],dis[1][2]+dis[1][3])));_  \n\u67093\u79cd\u7ec4\u5408\u65b9\u6cd5\uff0c\u53d6\u4e00\u4e2a\u6700\u5c0f\u503c\u5c31\u662f\u7b54\u6848\uff0c\n\n**2**.\u7136\u540e\u5c31\u662f\u8def\u5f84\u4f1a\u76f8\u4ea4\u5728\u4e00\u4e2a\u70b9\u4e0a\u9762\uff0c\u6211\u4eec\u5148\u7edf\u8ba1\u6bcf\u4e2a\u8054\u901a\u5757\u7684\u70b9\u5230\u8fd9\u4e2a\u70b9\u7684\u6700\u5c0f\u8def\u5f84\uff0c\u7136\u540e\u6240\u6709\u8def\u5f84\u5c31\u662f _ans=min(ans,dis2[1]+dis2[2]+dis2[3]+1);_ \n\u8fd9\u4e2a\u70b9\u5230\u8fbe\u5176\u4ed6\u4e09\u4e2a\u8054\u901a\u5757\u7684\u4ee3\u4ef7+\u8fd9\u4e2a\u70b9\u7684\u4ee3\u4ef7\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read()\n{\n\tint res=0,f=1;char ch=getchar();\n\twhile(!isdigit(ch)){if(ch=='-')f=-f;ch=getchar();}\n\twhile(isdigit(ch)){res=(res<<1)+(res<<3)+(ch&15);ch=getchar();}\n\treturn res*f;\n}\nint n,m,dis[55][55];\nint dis2[55]; \nint ans=0x3f3f3f3f;\nint vis[55][55],a[55][55];\nchar c[55][55];\nstruct d{\n\tint x;\n\tint y;\n};\nqueue<d>q;\nint dx[4]={0,0,1,-1};\nint dy[4]={1,-1,0,0};\nint num;\ninline void bfs(int x,int y,int cnt)//bfs\u704c\u6c34\u627e\u8054\u901a\u5757\n{\n\td st;st.x=x;st.y=y;\n\tvis[x][y]=1;a[x][y]=cnt;\n\tq.push(st);\n\twhile(!q.empty())\n\t{\n\t   d k;k=q.front();q.pop();\n\t   for(int i=0;i<4;i++)\n\t   {\n\t   \tint xx=dx[i]+k.x;\n\t   \tint yy=dy[i]+k.y;\n\t   \tif(xx>=1&&xx<=n&&yy>=1&&yy<=m)\n\t   \t{\n\t   \t\tif(!vis[xx][yy]&&c[xx][yy]=='X')\n\t   \t\t{\n\t   \t\t\tvis[xx][yy]=1;\n\t   \t\t\ta[xx][yy]=cnt;\n\t   \t\t\td ne;ne.x=xx;ne.y=yy;\n\t   \t\t\tq.push(ne);\n\t\t\t}\n\t\t}\n\t   }\t\n\t} \n}\nint main()\n{\n\tn=read();m=read();\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tcin>>c[i][j];\n\t\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\tif(!vis[i][j]&&c[i][j]=='X')++num,bfs(i,j,num);\n\t\n\tdis[1][2]=dis[2][1]=dis[1][3]=dis[3][1]=dis[2][3]=dis[3][2]=0x3f3f3f3f;//\u4e09\u4e2a\u4e0d\u540c\u65b9\u6cd5\u5148\u521d\u59cb\u5316\u4e3a\u221e\n\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=m;j++)\n\t{\n\t\t memset(dis2,63,sizeof(dis2));\n\t\t\tfor(int k=1;k<=n;k++)\n\t\t\tfor(int z=1;z<=m;z++)\n\t\t\t{\n\t\t\t\tif(c[k][z]=='X')\n\t\t\t\t{\n\t\t\t\t  if(c[i][j]!='X')dis2[a[k][z]]=min(dis2[a[k][z]],abs(i-k)+abs(j-z)-1);//\u76f8\u4ea4\u70b9\u7684\u6700\u5c0f\u4ee3\u4ef7\n\t\t\t\t  else dis[a[i][j]][a[k][z]]=min(dis[a[i][j]][a[k][z]],abs(i-k)+abs(j-z)-1);//\u6ca1\u6709\u76f8\u4ea4\u7684\u4ee3\u4ef7\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(c[i][j]!='X')ans=min(ans,dis2[1]+dis2[2]+dis2[3]+1);//\u6253\u64c2\u53f0\u53d6\u6700\u5c0f\u503c\n\t}\n//\tcout<<dis[1][2]<<' '<<dis[1][3]<<' '<<dis[2][3]<<endl;\n\tans=min(ans, min(dis[1][2]+dis[2][3],min(dis[1][3]+dis[2][3],dis[1][2]+dis[1][3])));\n\tcout<<ans;\n\treturn 0;\n}\n\n```\n",
        "postTime": 1604400800,
        "uid": 42760,
        "name": "\u22b1\u22db\u8d6b\u5b87\u22da\u22b0",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P6131 \u3010[USACO11NOV]Cow Beauty Pageant S\u3011"
    },
    {
        "content": "# P6131 \u9898\u89e3\nemm\n\u6709\u4e00\u9053\u4e00\u6a21\u4e00\u6837\u7684\u9898\u76ee\uff0c[P2124](https://www.luogu.com.cn/problem/P2124)  \n## \u524d\u7f6e\u7ed3\u675f\uff0c\u8fdb\u5165\u6b63\u9898\uff1a\n\u5148\u7b80\u5316\u4e00\u4e0b\u95ee\u9898\uff1a\u5982\u679c\u628a**\u4e09\u5757\u533a\u57df**\u53d8\u6210**\u4e09\u4e2a\u70b9**\u7684\u8bdd\u2026\u2026  \n\u5e94\u8be5\u600e\u4e48\u505a\uff1f  \n\u6709\u4ec0\u4e48**\u5e7a\u86fe\u5b50**\uff1f  \n\u9700\u8981\u6ce8\u610f**\u54ea\u4e9b\u70b9**\uff1f  \n\n\u89e3\u7b54\uff1a\u5206\u6210**\u4e24**\u7c7b  \n1. **\u76f4\u63a5**\u8fde\u63a5  \n![1](https://cdn.luogu.com.cn/upload/image_hosting/ggiy3egh.png?x-oss-process=image/resize,m_lfit,h_170,w_225)  \n2. \u8fde\u63a5\u5230**\u4e2d\u95f4\u4e00\u70b9**\uff0c\u8ddd\u79bb\u6700\u77ed  \n![2](https://cdn.luogu.com.cn/upload/image_hosting/wz04i9x2.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\n\u7b2c\u4e00\u79cd\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u8981\u66b4\u529b\u679a\u4e3e\u5c31\u884c\uff1b  \n\u7b2c\u4e8c\u79cd\u5c31\u679a\u4e3e\u6bcf\u4e00\u4e2a\u5728\u91cc\u9762\u7684\u70b9\uff0c\u7136\u540e\u6253\u64c2\u53f0\u5373\u53ef\u3002  \n\u4e8e\u662f\uff0c\u4e00\u4e2a**\u7b80\u5316**\u7684\u95ee\u9898\u5c31\u8fd9\u6837$over$\u4e86\u3002\n\n\u5982\u679c**\u70b9\u53d8\u6210\u9762**\uff0c\u6709\u4ec0\u4e48\u533a\u522b\u5417\uff1f  \n\u672c\u8d28\u4e0a\u6ca1\u6709\u533a\u522b\uff0c\u53ea\u4e0d\u8fc7\u8fde\u63a5\u7684\u70b9\u4e0d\u4e00\u6837\u4e86\u3002  \n\u90a3\u6709\u4ec0\u4e48\u96be\u7684\uff1f\u76f4\u63a5\u5904\u7406\u4e00\u4e0b\u4e0d\u5c31\u5f97\u4e86\u3002\n\n\u90a3\u4e48\u5f00\u59cb\u5b9a\u4e49\u51fd\u6570(\u672c\u4eba\u6bd4\u8f83\u559c\u6b22\u7528\u51fd\u6570)\uff1a  \n1. **$connect()$:\u8868\u793a\u4e00\u5757\u8fde\u5230\u53e6\u4e00\u5757\u7684\u6700\u77ed\u8ddd\u79bb\u3002**\n2. $dfs()$\u8fd9\u4e2a\u4e0d\u7528\u6211\u8bf4\u4e86\u5427\n\n```cpp\n\n// Copy right by ***\n//\n//\n// Don't copy and paste\n//\n//\n// If you copy and paste,it will be WA.\n//\n//\n// Understand is the first.\n// You can do it by yourself.\n//\n//\n// Welcome to visit my blog.\n//\n// cpp code:\n\n#include<bits/stdc++.h>\n#define MXN 55\nusing namespace std;\n//\nchar cow[MXN][MXN];\nint N,M,spots[MXN][MXN][2],gu[3];\nvoid dfs(int a,int b,int num){ // dfs() \n  if (a<0 || b<0 || a==N || b==M || cow[a][b]!='X') return;\n   // \u89e6\u72af\u8fb9\u754c \n  cow[a][b]='V'; // \u7701\u4e86\u5f00\u4e00\u4e2avis\uff0c\u53cd\u6b63\u4e0d\u7528\u8f93\u51fa\u5177\u4f53\u60c5\u51b5 \n   // \n   // \u8bf7\u52ff\u8fd9\u6837\u505a\uff0c\u6bd4\u8f83\u5371\u9669\uff0cvis\u662f\u6700\u4fdd\u9669\u7684 \n  spots[num][gu[num]][0]=a;\n  spots[num][gu[num]++][1]=b;\n   // \u8bb0\u5f55\u6bcf\u4e2a\u8fde\u901a\u5757\u6709\u54ea\u4e9b\u70b9\n  dfs(a-1,b,num);\n  dfs(a+1,b,num);\n  dfs(a,b-1,num);\n  dfs(a,b+1,num);\n   // \u7136\u540e\u5bf9\u56db\u4e2a\u65b9\u5411dfs \n}\nint dist(int a1,int b1,int a2,int b2){return abs(a1-a2)+abs(b1-b2);}\n // \u66fc\u54c8\u987f\u8ddd\u79bb \nint connect(int a,int b){\n  if (cow[a][b]=='V') return 1000; // INF\n  int i,j,ans=0; // \n  for (i=0; i<3; i++){ // \u679a\u4e3e\u8fde\u901a\u5757 \n    int mn=101; // INF\n    for (j=0; j<gu[i]; j++){ // \u679a\u4e3e\u8fde\u901a\u5757\u4e2d\u6240\u6709\u7684\u70b9 \n      int t=dist(spots[i][j][0],spots[i][j][1],a,b)-1;\n       // \n      if (t<mn) mn=t; // \u6c42\u6700\u77ed\u8ddd\u79bb\uff0c\u6253\u64c2\u53f0 \n    }\n    ans+=mn; // \u52a0\u4e0a\u7b54\u6848 \n  }\n  return ans+1; // \u52a0\u4e0a\u4e00\u5f00\u59cb\u679a\u4e3e\u7684\u90a3\u4e2a\u70b9 \n}\nint main(){\n  scanf(\"%d%d\",&N,&M);\n  int i,j,k,mn=301,num_spots=0,dsr[3];\n  for (i=0; i<N; i++) scanf(\"%s\",cow[i]);\n   // \n  for (i=0; i<N; i++)\n    for (j=0; j<M; j++)\n      if (cow[i][j]=='X') dfs(i,j,num_spots++); \n       // \u5982\u679c\u8fd9\u4e2a\u70b9\u662f'X'\uff0c\u5c31dfs \n  for (i=0; i<N; i++)\n    for (j=0; j<M; j++){\n      int t=connect(i,j);\n      if (t<mn) mn=t;\n       // \u8ba1\u7b97\u70b9(i,j)\u8fde\u63a53\u4e2a\u8fde\u901a\u5757\u7684\u6700\u77ed\u8ddd\u79bb \n    }\n   // \n  for (i=0; i<3; i++){\n    dsr[i]=101;// INF\n    for (j=0; j<gu[i]; j++)\n      for (k=0; k<gu[(i+1)%3]; k++){\n        int t=dist(spots[i][j][0],spots[i][j][1],spots[(i+1)%3][k][0],spots[(i+1)%3][k][1])-1;\n        if (t<dsr[i]) dsr[i]=t;\n      }\n  }\n   // 4\n  for (i=0; i<3; i++)\n    if (dsr[i]+dsr[(i+1)%3]<mn) mn=dsr[i]+dsr[(i+1)%3];\n     // \n  printf(\"%d\\n\",mn); // print\n  return 0;\n}\n```\n\u53cb\u60c5\u63d0\u793a\uff1a\u65e0\u8111\u7167\u6284\u6709\u5751  \n[\u5b89\u5229\u4e00\u4e0b\u6211\u7684blog](https://www.luogu.com.cn/blog/291706/)",
        "postTime": 1584353887,
        "uid": 291706,
        "name": "GspTools",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P6131 \u3010[USACO11NOV]Cow Beauty Pageant S\u3011"
    }
]
[
    {
        "content": "\u56e0\u4e3a$A_i,B_i$\u5f88\u5c0f\uff0c\u6211\u4eec\u628a\u6bcf\u5355\u4f4d\u6ce5\u571f\u5206\u5f00\u770b\u3002\n\n\u5bf9\u4e8e**\u6bcf\u5355\u4f4d**\u6ce5\u571f\u5728\u7b2c$i$\u4e2a\u4f4d\u7f6e\u4e0a\uff0c\u8bbe\u5904\u7406\u8be5**\u5355\u4f4d**\u6ce5\u571f\u82b1\u8d39$Vi$\u8d39\u7528\uff1a\n\n\n$V_i:$\n\n1. \u5982\u679c\u662f\u5c11\u4e86\u6ce5\u571f\uff0c\u53ef\u4ee5\u82b1\u8d39$X$\u8d39\u7528\u6765\u89e3\u51b3\uff0c\u6240\u4ee5$V_i=X$\uff0c\u8fd8\u53ef\u4ee5\u5411\u524d\u9762\u8981\u6ce5\u571f\uff0c\u8981\u6ce5\u571f\u4e00\u5b9a\u5411\u4e4b\u524d\u591a\u6ce5\u571f\u7684\u5730\u65b9\u8981\uff0c\u8981\u82b1\u8d39$Z|i-j|$\u8d39\u7528\uff0c\u4f46\u4e4b\u524d\u7684\u6ce5\u571f\u6211\u4eec\u5df2\u7ecf\u8003\u8651\u4e86\u5b83\u7684\u8d21\u732e\u4e86\uff0c\u6240\u4ee5\u4e4b\u524d\u7684\u6ce5\u571f\u7684\u8d21\u732e\u5c31\u8981\u518d\u51cf\u53bb\uff08\u5373\u4e4b\u524d\u7684\u90a3\u4e2a\u6ce5\u571f\u591a\u4e86\uff0c\u4f46\u662f\u4e0d\u9700\u8981\u5904\u7406\u4e86\uff0c\u540e\u9762\u5c11\u4e86\u7684\u90a3\u4e2a\u6ce5\u571f\u76f4\u63a5\u8981\u8fc7\u6765\u4e86\uff09\uff0c\u603b\u7684\u8d39\u7528\u4e3a$Z|i-j|-V_j$\uff0c\u6240\u4ee5$V_i=\\min(X,Z|i-j|-V_j)$\n\n1. \u5982\u679c\u662f\u591a\u4e86\u6ce5\u571f\uff0c\u53ef\u4ee5\u82b1\u8d39$Y$\u8d39\u7528\u6765\u89e3\u51b3\uff0c\u6240\u4ee5$V_i=Y$\u3002\u8fd8\u53ef\u4ee5\u5f80\u524d\u9762\u9001\u6ce5\u571f\uff0c\u9001\u6ce5\u571f\u4e00\u70b9\u5411\u4e4b\u524d\u5c11\u6ce5\u571f\u7684\u5730\u65b9\u9001\u3002\u540c\u7406\uff0c\u603b\u7684\u8d39\u7528\u4e3a$Z|i-j|-V_j$\uff0c\u6240\u4ee5$V_i=\\min(Y,Z|i-j|-V_j)$\n\n\n\u8fd9\u6837\u53ef\u4ee5\u76f4\u63a5$O(100n^2)$\u8ba1\u7b97\u4e86\uff0c\u53ef\u4ee5\u89e3\u51b3\u6b64\u9898\u7684\u5f31\u5316\u7248\uff1a[https://www.luogu.com.cn/problem/P3049](https://www.luogu.com.cn/problem/P3049)\n\n\u4f46\u662f\u5bf9\u4e8e\u6b64\u9898\uff0c\u6211\u4eec\u9700\u8981\u66f4\u5feb\u7684\u65b9\u6cd5\uff1a\n\n\n\u62c6\u5f00$V_i$\u7684\u8ba1\u7b97\uff1a\n\n$V_i=\\min(X,Z|i-j|-V_j)\\space(i>j)$\n\n$=\\min(X,iZ-jZ-V_j)\\space(i>j)$\n\n$=\\min(X,iZ+(-jZ-V_j))\\space(i>j)$\n\n\u6240\u4ee5\uff0c$V_i$\u7684\u8ba1\u7b97\u548c\u524d\u9762\u7684$j$\u6709\u5173\u7684\u53ea\u6709$(-jZ-V_j)$\uff0c\u8981\u8ba9\u5f53\u524d\u7684$V_i$\u6700\u5c0f\uff0c\u6211\u4eec\u9700\u8981\u8ba9$(-jZ-V_j)$\u6700\u5c0f\u3002\n\n\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u8ba9$V_i$\u6700\u5c0f\u5462\uff1f\u4e3a\u4ec0\u4e48\u4e0d\u628a\u8fd9\u4e2a$j$\u7559\u7ed9\u540e\u9762\u7684$V$\u5462\uff1f\n \n\u524d\u9762\u7684$(-jZ-V_j)$\u80af\u5b9a\u662f\u5411\u540e\u627e\u6700\u8fd1\u7684\u6700\u597d\u554a\uff0c\u8d8a\u5f80\u540e\u62d6\uff0c$i$\u8d8a\u5927\uff0c$V_i$\u5c31\u6709\u53ef\u80fd\u88ab$X$\u51b3\u5b9a\uff0c\u8fd8\u6709\u53ef\u80fd\u51fa\u73b0\u8ddd\u79bb\u66f4\u8fd1\u7684\u6765\u66f4\u65b0\u3002\n \n\n\n\u5f00\u4e24\u4e2a\u5c0f\u6839\u5806\uff0c\u4e00\u4e2a\u5b58\u672c\u6765\u5c11\u4e86\u6ce5\u571f\u7684\u5355\u4f4d\u6ce5\u571f\u7684$(-jZ-V_j)$\uff0c\u53ef\u4ee5\u7528\u6765\u66f4\u65b0\u73b0\u5728\u591a\u4e86\u6ce5\u571f\u7684\u5730\u65b9\u3002\n\n\u53e6\u4e00\u4e2a\u5b58\u672c\u6765\u591a\u4e86\u6ce5\u571f\u7684\u5355\u4f4d\u6ce5\u571f\u7684$(-jZ-V_j)$\uff0c\u53ef\u4ee5\u7528\u6765\u66f4\u65b0\u73b0\u5728\u5c11\u4e86\u6ce5\u571f\u7684\u5730\u65b9\u3002\n\n\u5f97\u5230\u5904\u7406\u5f53\u524d\u6ce5\u571f\u7684\u8d39\u7528\u540e\u628a$(-iZ-V_i)$\u5b58\u8fdb\u5806\u91cc\uff0c\u4f9b\u540e\u9762\u7684\u7b54\u6848\u66f4\u65b0\u3002\n\n\n\n\u53ef\u4ee5\u7406\u89e3\u4e3a\u540e\u6094\u7684\u8d2a\u5fc3\uff0c\u628a\u524d\u9762\u7684\u8d39\u7528\u7ed9\u51cf\u53bb\u3002\n \n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(10nlog(10n))$\n \nAC\u60c5\u51b5\uff1a[https://www.luogu.com.cn/record/42168237](https://www.luogu.com.cn/record/42168237)\n \n\u4ee3\u7801\u5982\u4e0b\uff1a\n \n ```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst long long int N=100001;\nlong long int n,a[N],b[N],x,y,z;\nlong long int V[N];\nlong long int ans;\npriority_queue<long long int,vector<long long int>,greater<long long int> > ovo,ovo2;\nint main(){\n\tscanf(\"%lld%lld%lld%lld\",&n,&x,&y,&z);\n\tfor(long long int i=1;i<=n;i++){\n\t\tscanf(\"%lld%lld\",&a[i],&b[i]);\n\t\tfor(long long int o=1;o<=a[i]-b[i];o++){\n\t\t\tV[i]=y;\n\t\t\tif(!ovo.empty()){\n\t\t\t\tV[i]=min(V[i],i*z+ovo.top());\n\t\t\t\tovo.pop();\n\t\t\t}\n\t\t\tovo2.push(-V[i]-i*z);\n\t\t\tans+=V[i];\n\t\t}\n\t\tfor(long long int o=1;o<=b[i]-a[i];o++){\n\t\t\tV[i]=x;\n\t\t\tif(!ovo2.empty()){\n\t\t\t\tV[i]=min(V[i],i*z+ovo2.top());\n\t\t\t\tovo2.pop();\n\t\t\t}\n\t\t\tovo.push(-V[i]-i*z);\n\t\t\tans+=V[i];\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n}\n\n```\n\n\n\n",
        "postTime": 1605775816,
        "uid": 104319,
        "name": "Why_not_use_longlong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2748 \u3010[USACO16OPEN]Landscaping P\u3011"
    },
    {
        "content": "# \u8d2a\u5fc3\n\n\u8003\u8651\u6bcf\u4e00\u4e2a\u82b1\u76c6\u7684\u6ce5\u571f\u8ddf\u524d\u9762\u66f4\u65b0\u540e\uff0c\u540e\u9762\u4e5f\u8bb8\u4f1a\u88ab\u66f4\u4f18\u7684\u65b9\u6848\u5f71\u54cd\uff0c\u56e0\u6b64dp\u5047\u4e86\n\n\u4e8e\u662f\u60f3\u5982\u4f55\u5c06\u8fd9\u4e2a\u201c\u540e\u6548\u6027\u201d\u5f25\u8865\uff1a\n\n\u5047\u8bbe\u53ea\u6709\u4e09\u76c6\u6ce5\u571f$i,j,k$\uff0c\u5176\u4e2d$i$\u5c11\u4e86\uff0c$j$\u591a\u4e86\uff0c$k$\u5c11\u4e86\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u8bbe\u4ed6\u4eec\u4e0e\u6807\u51c6\u76f8\u5dee\u7684\u90fd\u662f1\n\n\u5bf9\u4e8ei\uff0c\u6211\u4eec\u82b1\u8d39$x$\u5143\u8d2d\u4e701\u5355\u4f4d\u571f\n\n\u90a3\u4e48\uff0c\u5bf9\u4e8e$j$\uff0c\u6211\u4eec\u53ef\u4ee5\uff1a\n\n- \u79fb\u96641\u5355\u4f4d\u571f\uff0c\u5bf9\u7b54\u6848\u8d21\u732e\u4e3ay\n- \u5411i\u76c6\u5185\u8f6c\u79fb1\u5355\u4f4d\u571f\uff0c\u8d21\u732e\u4e3a$(j-i)\\times z - x$\n\n\u5230$j$\u65f6\uff0c\u5bf9\u7b54\u6848\u8d21\u732e\u5373\u4e3a\n$$\nmin(y,(j-i)\\times z - x)\n$$\n\n\u8bbe\u4e0a\u9762\u90a3\u4e2a\u5f0f\u5b50\u7b49\u4e8e$v$\n\n\u8fd9\u65f6\uff0c$k$\u6765\u4e86\uff0c\u540c\u6837\u5c11\u4e86\u4e00\u76c6\u571f\n\n\u540c\u6837\u7684\uff0c\u6211\u4eec\u6709\u4e24\u4e2a\u9009\u62e9\uff1a\n\n- \u4e701\u5355\u4f4d\u571f\uff0c\u5bf9\u7b54\u6848\u8d21\u732e\u4e3ax\n- \u5728$j$\u76c6\u62ff1\u5355\u4f4d\u571f\uff0c\u5bf9\u7b54\u6848\u8d21\u732e\u4e3a$(k-j)\\times z-v$\n\n\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\n\n\u8003\u8651\u5728\u8f6c\u79fb$j$\u65f6\uff0c\n\n$$\n(j-i)\\times z-x\n$$\n$$\n= j\\times z - i\\times z - x\n$$\n$$\n= j\\times z - (i \\times z + x)\n$$\n\u800c\u5728\u8f6c\u79fbk\u65f6\uff0c\u8fd9\u4e2a$x$\u6362\u6210\u4e86$v$\uff0c\u5373\u8981\u66f4\u6539\u7684\u72b6\u6001\u5bf9\u7b54\u6848\u7684\u8d21\u732e\n\n\u8981\u60f3\u8ba9\u8fd9\u4e2a\u4e1c\u897f\u6700\u5c0f\uff0c\u5c31\u8981$(i \\times z + x)$\uff08\u6216\u8005\u8bf4$(i \\times z + v)$\uff09\u6700\u5927\n\n\u5f88\u5bb9\u6613\u60f3\u5230\u5927\u6839\u5806\u7ef4\u62a4\n\n\u53d1\u73b0\u8fd9\u4e2a\u4e1c\u897f\u8ddf$j$\u6ca1\u6709\u5173\u7cfb\uff0c\u4e8e\u662f\u5728\u6bcf\u6b21\u5904\u7406\u5f53\u524d\u70b9\u65f6\u628a\u8fd9\u4e2a\u4e1c\u897f\u6254\u5230\u5927\u6839\u5806\u91cc\u7ef4\u62a4\u5373\u53ef\n\n### \u6ce8\u610f\uff1a\n\n1.\u7f3a\u571f\u7684\u82b1\u76c6\u8ddf\u591a\u571f\u7684\u82b1\u76c6\u4e0d\u80fd\u653e\u5728\u540c\u4e00\u4e2a\u5927\u6839\u5806\u91cc\uff0c\u8981\u5f00\u4e24\u4e2a\u5206\u522b\u5b58\n\n2.\u5728\u66f4\u6539\u4e4b\u524d\u7684\u64cd\u4f5c\u65f6\uff0c\u201cv\u201d\u7684\u610f\u4e49\u4f1a\u53d8\u5316\u2014\u2014\u5f53\u524d\u64cd\u4f5c\u7684\u8d21\u732e\n\n\u6240\u4ee5\u653e\u5728\u5927\u6839\u5806\u91cc\u7684\u4e1c\u897f\u662f`\u5f53\u524d\u64cd\u4f5c\u7684\u8d21\u732e+i*z`\n\n\u8bbe$d$\u4e3a\u5f53\u524d\u5927\u6839\u5806\u5806\u9876\n\n\u5219\u5728\u66f4\u6539\u64cd\u4f5c\u65f6\uff0c\u5f53\u524d\u8d21\u732e\u4e3a$i\\times z - d$\uff0c\u518d\u52a0\u4e0a$i\\times z$\u624d\u662f\u653e\u5728\u5806\u4e2d\u7684\u6570\u636e\uff0c\u5373$2\\times i\\times z - d$\n\n\u6700\u540e\u662f\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\npriority_queue<int>q1;\npriority_queue<int>q2;\nsigned main()\n{\n    int ans = 0;\n    int n, x, y, z;\n    cin >> n >> x >> y >> z;\n    for(int i = 1; i <= n; i++)\n    {\n        int a, b;\n        cin >> a >> b;\n//        if(a == b) continue;\n        if(a < b)\n        {\n            for(int j = 1; j <= b - a; j++)\n            {\n                if(!q1.size() || i * z - q1.top() >= x)\n                {\n                    ans += x;\n                    q2.push(i * z + x);\n                }\n                else\n                {\n                    int v = q1.top();\n                    q1.pop();\n                    ans += i * z - v;\n                    q2.push(i * z * 2 - v);\n                }\n            }\n        }\n        else\n        {\n            for(int j = 1; j <= a - b; j++)\n            {\n                if(!q2.size() || i * z - q2.top() >= y)\n                {\n                    ans += y;\n                    q1.push(i * z + y);\n                }\n                else\n                {\n                    int v = q2.top();\n                    q2.pop();\n                    ans += i * z - v;\n                    q1.push(i * z * 2 - v);\n                }\n            }\n        }\n    }\n    cout << ans;\n}\n\n```",
        "postTime": 1603710650,
        "uid": 75954,
        "name": "AuCloud",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2748 \u3010[USACO16OPEN]Landscaping P\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u7ed9\u51fa\u6570\u7ec4 $a$\uff0c\u6bcf\u6b21\u53ef\u4ee5\u82b1\u8d39 $x$ \u8ba9\u4e00\u4e2a\u6570\u51cf\u53bb $1$ \uff0c\u82b1\u8d39 $y$ \u8ba9\u4e00\u4e2a\u6570\u52a0\u4e0a $1$\uff0c\u6216\u8005\u82b1\u8d39 $ z\\left|i-j\\right| $ \u8ba9 $a_i$ \u51cf\u53bb $1$ \uff0c$a_j$ \u52a0\u4e0a $1$ \u3002\u6c42\u8ba9 $u$ \u53d8\u6210 $v$ \u7684\u6700\u5c0f\u82b1\u8d39\u3002\n\n\u5982\u679c\u6211\u4eec\u626b\u5230\u4e00\u4e2a $i$ \uff0c\u4e14\u524d\u9762\u6ca1\u6709\u5176\u4ed6\u6570\u53ef\u4ee5\u64cd\u4f5c\uff0c\u90a3\u5c31\u53ea\u80fd\u7ed9\u5b83\u52a0\u4e0a/\u51cf\u53bb\u4e86\u3002\u5982\u679c\u540e\u9762\u9047\u5230\u4e00\u4e2a $j$ \uff0c\u4e14\u52a0\u51cf\u662f\u548c $i$ \u76f8\u53cd\u7684\uff0c\u90a3\u5c31\u6709\u4e86\u591a\u79cd\u9009\u62e9\u4e86: \u7ee7\u7eed\u7ed9 $j$ \u8865\u4e0a\uff0c\u82b1\u8d39 $x$ \u6216 $y$  ;  \u628a\u524d\u9762\u7684\u67d0\u4e00\u4e2a $i$ \u7ed9\u6362\u8fc7\u6765\uff08\u53ea\u6362\u591a\u4f59\u7684\u90e8\u5206\uff09\uff0c\u82b1\u8d39 $ z \\left| i-j \\right| - cost_i$ \uff0c$cost_i$ \u662f $i$ \u5df2\u7ecf\u7684\u591a\u4f59\u90e8\u5206\u82b1\u8d39\u8fc7\u7684\u4ef7\u503c\uff0c \u6ce8\u610f\uff0c \u4ee5\u4e0a\u7684\u64cd\u4f5c\u5efa\u7acb\u5728 $\\left| u - v\\right| = 1$ \u7684\u524d\u63d0\u4e0a\uff0c \u4e5f\u5c31\u662f\u503c\u7684\u76f8\u5dee\u53ea\u6709\u4e00\u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u8fd0\u7528\u65f6\u76f4\u63a5\u8c03\u7528 $\\left|u - v \\right| $ \u6b21\u5c31\u597d\u4e86 \u3002\n\n$ z\\left | i - j \\right| - cost_i = zj - zi - v = zj - (zi + cost_i)$  \u628a $zj+cost_i$ \u6254\u8fdb\u5927\u6839\u5806\uff0c \u6bcf\u6b21\u51cf\u53bb\u6700\u5927\u3002\u5c31\u53ef\u4ee5\u786e\u4fdd\u8fd9\u4e00\u6b65\u52a0\u4e0a\u53bb\u7684\u6700\u5c0f\u4e86\u3002\n\n\n```cpp\n#include <iostream>\n#include <queue>\n#include <cmath>\n#define int long long\nusing namespace std;\npriority_queue<int> q[2];\nint c[2], n, z, ans;\nsigned main() {\n\tios::sync_with_stdio(false);\n\tcin >> n >> c[1] >> c[0] >> z;\n\tfor (int i = 1, a, b, f; i <= n; i++) {\n\t\tcin >> a >> b;\n\t\tif (a == b) continue;\n\t\tf = a > b; //\u52a0\u4e0a\u6216\u51cf\u53bb\n\t\tfor (int j = 1; j <= abs(a - b); j++) \n        if (q[f ^ 1].empty() || i * z - q[f ^ 1].top() > c[f ^ 1]) ans += c[f ^ 1], q[f].push(i * z + c[f ^ 1]);\n            else ans += i * z - q[f ^ 1].top(), q[f].push(i * z + i * z - q[f ^ 1].top()), q[f ^ 1].pop();\n    }\n    cout << ans;\n    return 0;\n}\n```\n",
        "postTime": 1638181517,
        "uid": 434929,
        "name": "Usada_Pekora",
        "ccfLevel": 7,
        "title": "P2748 \u53cd\u6094\u8d2a\u5fc3"
    }
]
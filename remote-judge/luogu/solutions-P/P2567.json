[
    {
        "content": "~~\u6210\u529f\u8f70\u4e0b\u4f60\u8c37rk1\uff0c\u751a\u81f3\u8d85\u8d8a\u4e86\u4e00\u4e2a\u6253\u8868\u9009\u624b~~  \n\u8fd9\u9898\u601d\u8def\u5f88\u660e\u663e\u5427\uff0c\u5148\u641e\u51fa\u6765\u6240\u6709\u8303\u56f4\u5185\u7684\u5408\u6cd5\u6570\u5b57\uff0c\u7136\u540e\u76f4\u63a5\u5bb9\u65a5\uff0c  \n\u5bb9\u65a5\u7684\u8bdd\u663e\u7136\u6ca1\u6709\u522b\u7684\u529e\u6cd5\u89e3\u51b3\uff0c\u53ea\u80fd\u591f\u7206\u641c\uff0c  \n\u90a3\u4e48\u6211\u4eec\u5c31\u6765\u5927\u529b\u526a\u679d\uff1a  \n1.\u5982\u679c\u5f53\u524d\u7684\u6240\u6709\u9009\u5b9a\u7684\u6570\u7684$lcm$\u5927\u4e8e$r$\u76f4\u63a5\u9000\u51fa\uff0c\u8fd9\u4e0d\u663e\u7136\u5417\u3002\u3002  \n2.\u5982\u679c\u4e00\u4e2a\u5408\u6cd5\u6570\u5b57\u662f\u53e6\u5916\u4e00\u4e2a\u5408\u6cd5\u6570\u5b57\u7684\u500d\u6570\uff0c\u90a3\u4e48\u8fd9\u4e2a\u6570\u6ca1\u6709\u610f\u4e49\uff0c\u8fd9\u4e0d\u8fd8\u662f\u663e\u7136\u5417\u3002  \n3.\u628a\u5408\u6cd5\u7684\u6240\u6709\u6570\u5b57\u4ece\u5927\u5f80\u5c0f\u6392\u5e8f\uff0c\u8fd9\u6837\u7206\u641c\u7684\u65f6\u5019\u66f4\u5feb\u7a81\u7834\u8fb9\u754c\u3002  \n\u597d\u4e86\uff0c\u8fd9\u6837\u5b50\u5c31\u53ef\u4ee5\u5728\u6d1b\u8c37\u4e0a$AC$\u4e86\uff0c\u7136\u800c$BZOJ$\u603b\u65f6\u9650\u5e76\u8fc7\u4e0d\u53bb\u3002  \n\u63a5\u7740\u526a\u679d\uff0c\u73b0\u5728\u56e0\u4e3a\u6240\u6709\u6570\u90fd\u4e0d\u6ee1\u8db3\u662f\u53e6\u5916\u4e00\u4e2a\u6570\u7684\u500d\u6570\uff0c  \n\u6240\u4ee5\u5408\u5e76\u4efb\u610f\u4e24\u4e2a\u6570\u7684\u65f6\u5019\uff0c$lcm$\u7684\u6700\u5c0f\u60c5\u51b5\u5c31\u662f\u4e58\u4e0a\u4e00\u4e2a$3$\u3002    \n\u6240\u4ee5\u5bf9\u4e8e\u6240\u6709$>r/3$\u7684\u5408\u6cd5\u6570\u5b57\uff0c\u663e\u7136\u4e0d\u80fd\u591f\u548c\u4efb\u4f55\u4e00\u4e2a\u6570\u5408\u5e76\u4e86\uff0c  \n\u6240\u4ee5\u8fd9\u4e00\u90e8\u5206\u53ef\u4ee5\u62ff\u51fa\u6765\u76f4\u63a5\u63d0\u524d\u7b97\u597d\uff0c\u518d\u7528\u5269\u4e0b\u7684\u6570\u5b57\u7206\u641c\u5c31\u597d\u5566\u3002  \n~~\u4e5f\u8bb8\u5e95\u4e0b\u90a3\u4e2a\u9898\u89e3\u8bf4\u53ea\u63d0\u524d\u8003\u8651r/2\u7684\u503c\u5c31\u662f\u6ca1\u6211\u5feb\u7684\u539f\u56e0\u5427\u3002\u3002\u3002~~\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\n#define ll long long\nint tot;\nll a[5050],ret,l,r;\nvoid dfs(ll x){if(x>r)return;if(x)a[++tot]=x;dfs(x*10+6);dfs(x*10+8);}\nconst int MOD=1000000007;\nbool check(ll a,ll b)\n{\n\tint A=a/MOD,B=b/MOD;\n\tif(A*B)return true;\n\treturn a*b>r;\n}\nvoid calc(int x,ll s,int cnt)\n{\n    if(x>tot&&s!=1)\n    {\n        if(cnt&1)ret+=r/s-l/s;\n        else ret-=r/s-l/s;\n        return;\n    }\n    if(x>tot)return;\n    calc(x+1,s,cnt);\n\tll d=a[x]/__gcd(s,a[x]);\n    if(!check(s,d))calc(x+1,s*d,cnt+1);\n}\nbool vis[5050];\nll Work()\n{\n\tdfs(0);sort(&a[1],&a[tot+1]);\n\tint t=0;\n\tfor(int i=1;i<=tot;++i)\n\t\tfor(int j=1;j<i;++j)\n\t\t\tif(a[i]%a[j]==0){vis[i]=true;break;}\n\tfor(int i=1;i<=tot;++i)\n\t\tif(!vis[i])\n\t\t{\n\t\t\tif(a[i]<=r/3)a[++t]=a[i];\n\t\t\telse ret+=r/a[i]-l/a[i];\n\t\t}\n\ttot=t;reverse(&a[1],&a[tot+1]);calc(1,1,0);\n\treturn ret;\n}\nint main()\n{\n\tcin>>l>>r;--l;\n\tcout<<Work()<<endl;\n\treturn 0;\n}\n\n```",
        "postTime": 1533297008,
        "uid": 21283,
        "name": "yybyyb",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P2567 \u3010[SCOI2010]\u5e78\u8fd0\u6570\u5b57\u3011"
    },
    {
        "content": "\u5148\u9884\u5904\u7406$[1,10^{10}]$\u5185\u7684\u6240\u6709\u5e78\u8fd0\u53f7\u7801\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5e78\u8fd0\u53f7\u7801$X$\uff0c\u5728$[A,B]$\u4e2d$X$\u7684\u500d\u6570\u7684\u4e2a\u6570\uff0c\u5c31\u662f\n\n$\\lfloor\\frac{B}{X}\\rfloor-\\lceil\\frac{A}{X}\\rceil+1$\u3002\n\n\u7136\u800c\uff0c\u4e24\u4e2a\u5e78\u8fd0\u53f7\u7801\u5bf9\u5e94\u7684\u8fd1\u4f3c\u5e78\u8fd0\u53f7\u7801\u53ef\u80fd\u6709\u4ea4\u96c6\u3002\u8003\u8651\u5230\u8fd9\u4e00\u70b9\uff0c\u5c31\u53ef\u4ee5\u7528\u5bb9\u65a5\uff0c\u4e5f\u5c31\u662f\uff1a\n\n\u9009$1$\u4e2a\u5e78\u8fd0\u53f7\u7801$-$\u9009$2$\u4e2a\u5e78\u8fd0\u53f7\u7801\u7684lcm$+$\u9009$3$\u4e2a\u5e78\u8fd0\u53f7\u7801\u7684lcm$-...$\n\n\u4f46\u662f\u76f4\u63a5\u505a\u662f$2^{2046}$\u7684\uff0c\u5543\u815a\u4f1aTLE\u3002\u8003\u8651$3$\u4e2a\u526a\u679d\uff1a\n\n1\u3001\u53d1\u73b0\u5bf9\u4e8e\u4e24\u4e2a\u5e78\u8fd0\u53f7\u7801$a,b$\uff0c\u5982\u679c$a|b$\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6240\u6709\u7684$b|x$\u5c31\u4e00\u5b9a\u6709$a|x$\uff0c\u56e0\u6b64\u8fd9\u6837\u7684$b$\u662f\u4e0d\u5fc5\u8981\u7684\u3002\u53bb\u6389\u6240\u6709\u8fd9\u6837\u7684$b$\u540e\uff0c\u8fd8\u5269\u4e0b$943$\u4e2a\u5e78\u8fd0\u53f7\u7801\u3002\n2\u3001\u5f53\u524d\u7684lcm\u4e00\u65e6\u5927\u4e8e$B$\u5c31\u4e0d\u518d\u7ee7\u7eed\u641c\u7d22\u3002\u8fd9\u6837\u590d\u6742\u5ea6\u5c31\u80fd\u5927\u5927\u964d\u4f4e\u3002\n\n3\u3001\u5c06\u9884\u5904\u7406\u51fa\u7684\u5e78\u8fd0\u53f7\u7801\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u4f7flcm\u80fd\u66f4\u5feb\u5730\u8d85\u8d8a\u4e0a\u754c$B$\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e4 + 5;\nll A, B, a[N], num[N], Ans;\nint tot, n; bool mark[N];\nvoid dfs1(int dep, int cnt, ll now, ll x) {\n    if (dep > cnt) return (void) (a[++tot] = now);\n    dfs1(dep + 1, cnt, now + x * 6, x * 10);\n    dfs1(dep + 1, cnt, now + x * 8, x * 10);\n}\nvoid sieve() {\n    int i, j;\n    for (i = 1; i <= tot; i++) {\n        if (!mark[i]) num[++n] = a[i];\n        for (j = i + 1; j <= tot; j++)\n            if (a[j] % a[i] == 0) mark[j] = 1;\n    }\n}\nll Cnt(ll l, ll r, ll PYZ) {\n    l = l / PYZ + (l % PYZ != 0); r /= PYZ;\n    return r - l + 1;\n}\nvoid dfs2(int dep, int cnt, ll val) {\n    if (val > B) return;\n    if (dep > n) {\n        if (cnt == 0) return;\n        Ans += Cnt(A, B, val) * ((cnt & 1) ? 1 : -1);\n        return;\n    }\n    dfs2(dep + 1, cnt, val);\n    ll tmp = val / __gcd(val, num[dep]);\n    if (1.0 * tmp * num[dep] <= B)\n        dfs2(dep + 1, cnt + 1, tmp * num[dep]);\n}\nbool comp(ll a, ll b) {return a > b;}\nint main() {\n    int i; cin >> A >> B;\n    for (i = 1; i <= 10; i++) dfs1(1, i, 0, 1);\n    sieve(); sort(num + 1, num + n + 1, comp);\n    cout << (dfs2(1, 0, 1), Ans) << endl;\n    return 0;\n}\n```",
        "postTime": 1511702932,
        "uid": 29936,
        "name": "xyz32768",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2567 \u3010[SCOI2010]\u5e78\u8fd0\u6570\u5b57\u3011"
    },
    {
        "content": "\u5173\u4e8e\u66f4\u591a\u5206\u5757\u6253\u8868\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u53c2\u89c1\u6211\u5199\u7684\u65e5\u62a5 [\u6d45\u8c08\u6253\u8868\u4e0e\u5176\u6280\u5de7](https://www.luogu.com.cn/blog/203623/guan-yu-da-biao)\n\n\u5206\u5757\u6253\u8868\u5982\u95ea\u7535\u822c\u7684\u556a\u7684\u4e00\u4e0b\u5c31\u8fc7\u4e86\uff0c\u5f88\u5feb\u554a\uff01\n\n\u8fd9\u9898\u8fd8\u4e0d\u7528\u5361\u8868\u957f\uff0c\u771f\u662f\u5206\u5757\u6253\u8868\u597d\u7684\u5165\u95e8\u9898\uff08\n\n\u5148 dfs \u51fa\u6240\u6709\u7684\u5e78\u8fd0\u6570\u5b57\uff0c\u53d1\u73b0\u53ea\u6709 2046 \u4e2a\u3002\n\n```cpp\nvoid dfs(ll d)\n{\n\tif(d>up) return;\n\tif(d) a[++cnt]=d;\n\tdfs(d*10+6),dfs(d*10+8);\n}\n```\n\n\n\u7136\u540e\u6211\u4eec\u9700\u8981\u8bbe\u8ba1\u51fa\u4e00\u4e2a\u51fd\u6570\u4ed6\u652f\u6301\u6c42 $[l,r]$ \u4e2d\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u7684\u4e2a\u6570\n\n\u679a\u4e3e\u5e78\u8fd0\u6570\u5b57\uff0c\u5229\u7528\u7c7b\u4f3c\u57c3\u7b5b\u548c P1835 \u7684\u505a\u6cd5\u7b5b\u51fa\u6765\u3002\n\n$10^{10}$ \u7684\u6570\u636e\u8303\u56f4\u7684\u8bdd\uff0c\u8868\u957f\u9009 $b=2\\times 10^6$ \u5dee\u4e0d\u591a\u3002\n\n```cpp\nint ask(ll l,ll r)\n{\n\tint i,s=0;\n\tmemset(t,0,sizeof(t));\n\tfor(i=1;i<=cnt;i++)\n\t\tfor(ll p=a[i],j=r/p*p;j>=l;j-=p)\n\t\t\tt[j-l]=1;\n\tfor(ll j=l;j<=r;j++)\n\t\ts+=t[j-l];\n\treturn s;\n}\n```\n\u7136\u540e\u5c31\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u51fd\u6570\u8fdb\u884c\u6253\u8868\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nll a[100005];\nint cnt;\nconst ll up=1e10;\nvoid dfs(ll d)\n{\n\tif(d>up) return;\n\tif(d) a[++cnt]=d;\n\tdfs(d*10+6),dfs(d*10+8);\n}\nconst int bl=2e6;\nbool t[bl+5];\nint ask(ll l,ll r)\n{\n\tint i,s=0;\n\tmemset(t,0,sizeof(t));\n\tfor(i=1;i<=cnt;i++)\n\t\tfor(ll p=a[i],j=r/p*p;j>=l;j-=p)\n\t\t\tt[j-l]=1;\n\tfor(ll j=l;j<=r;j++)\n\t\ts+=t[j-l];\n\treturn s;\n}\nsigned main()\n{\n\tfreopen(\"out\",\"w\",stdout);\n   dfs(0);\n    ll i,j,l,r;\n    for(i=0;i+bl<=up;i+=bl)\n    {\n    \tl=i+1,r=i+bl;\n    \tprintf(\"%d,\",ask(l,r));\n\t}\n}\n```\n\u8dd1\u4e86 8s \u5c31\u51fa\u6765\u4e86\uff0c\u5f88\u5feb\u554a\uff01\n\n\u6700\u540e\u8fd8\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u51fd\u6570\u505a\u6700\u7ec8\u7684\u63d0\u4ea4\u7a0b\u5e8f\uff1ahttps://www.luogu.com.cn/paste/c1lr3rkh",
        "postTime": 1626495962,
        "uid": 203623,
        "name": "Ntokisq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2567 [SCOI2010]\u5e78\u8fd0\u6570\u5b57"
    },
    {
        "content": "\u548c\u697c\u4e0b\u601d\u60f3\u5dee\u4e0d\u591a\n\n\u9884\u5904\u7406\u51fa\u5e78\u8fd0\u6570\uff0c\u628a\u6709\u500d\u6570\u5173\u7cfb\u7684\u4e24\u4e2a\u6570\u4e2d\u8f83\u5927\u7684\u6570\u5220\u6389\uff0c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u7ec4\u6210\u771f\u5e78\u8fd0\u6570\u6570\u5217\n\n\u518dDFS+\u5fae\u91cf\u526a\u679d\u6765\u5bb9\u65a5\n\n\u53d6\u4ef6\u67e5\u8be2[l,r]\u53ef\u4ee5\u8f6c\u6362\u4e3a\u524d\u7f00r\u548cl-1\u7684\u67e5\u8be2\n\n\u4f46\u662f\u9047\u5230\u4e86\u4e00\u4e2a\u5f88\u5927\u7684\u95ee\u9898\n\n6E+9\u79d2\u51fa\uff0c7E+9\u5c31\u5361\u6b7b\u4e86\n\n\u56e0\u4e3a\u8fd9\u4e4b\u95f4\u591a\u51fa\u4e86\u4e00\u500d\u7684\u771f\u5e78\u8fd0\u6570\uff0c\u5bfc\u81f4\u8fd0\u884c\u65f6\u95f4\u7ffb\u6307\u6570\u500d\n\n\u4e8e\u662f\u8003\u8651\u4e00\u4e0b\u600e\u4e48\u4f18\u5316\n\n\u5bf9\u4e8e>R/2\u7684\u771f\u5e78\u8fd0\u6570\uff0c\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u6bcf\u4e2a\u6709\u4e14\u4ec5\u67091\n\n\u56e0\u4e3a<=R/2\u7684\u771f\u5e78\u8fd0\u6570\u90fd\u4e0d\u662f>R/2\u7684\u771f\u5e78\u8fd0\u6570\u7684\u56e0\u6570\uff0c\u4e14>R/2\u7684\u90a3\u4e9b\u6570\u53ea\u6709\u672c\u8eab\u5bf9\u7b54\u6848\u6709\u8d21\u732e\uff0c\u7ffb\u500d\u5c31\u4f1a\u8d85\u8fc7R\u800c\u5931\u53bb\u8d21\u732e\n\n\u6240\u4ee5\u5bf9\u4e8e\u6c42\u524d\u7f00R\u7684\u4f2a\u5e78\u8fd0\u6570\u4e2a\u6570\uff0c\u6211\u4eec\u53ea\u4fdd\u7559<=R/2\u7684\u90a3\u4e9b\u5e78\u8fd0\u6570\u6765DFS\uff0c\u518d\u52a0\u4e0a>R/2\u4e14<=R\u7684\u771f\u5e78\u8fd0\u6570\n\n\u56e0\u4e3a\u524d\u7f00\u67e5\u8be2\u6700\u59271E+10\uff0c/2=5E+5 \u521a\u597d\u80fd\u79d2\u51fa\n\n---\n\u679c\u7136\u7384\u5b66\u51fa\u5947\u8ff9\u554a\n\n[\u4ee3\u7801](http://paste.ubuntu.com/25423772/)\n",
        "postTime": 1503999511,
        "uid": 25508,
        "name": "Night_Aurora",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2567 \u3010[SCOI2010]\u5e78\u8fd0\u6570\u5b57\u3011"
    },
    {
        "content": "\u5f88\u660e\u663e\uff0c\u8fd9\u9898\u7528\u5bb9\u65a5\u6765\u505a\u3002\n\n![\u5bb9\u65a5\u539f\u7406](https://imgconvert.csdnimg.cn/aHR0cDovL3d3dy5jcHBibG9nLmNvbS9pbWFnZXMvY3BwYmxvZ19jb20vdmljaS8wMDAucG5n?x-oss-process=image/format,png)\n\n\u5148\u9884\u5904\u7406\u51fa\u6240\u7528\u5c0f\u4e8e $b$ \u7684\u5e78\u8fd0\u6570\u5b57\uff0c\u7136\u540e\u8fdb\u884c\u6392\u5e8f\uff0c\u7b5b\u9009\u51fa\u4e0d\u662f\u5176\u5b83\u5e78\u8fd0\u6570\u5b57\u500d\u6570\u7684\u6570\u5b57\uff0c\u518d\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u65b9\u4fbf\u6765\u8fdb\u884c\u526a\u679d\u4f18\u5316\u3002\n\n**\u6ce8\u610f\u7531\u4e8e\u53ef\u80fd\u7206 long long\uff0c\u6240\u4ee5\u6bd4\u8f83\u65f6\u5e94\u5148\u8f6c\u6d6e\u70b9\u6570\u3002**\n\n\u6ce8\u610f $p$ \u8981\u53d6\u4e24\u6570\u7684\u6700\u5c0f\u516c\u500d\u6570\u3002\n\n\u6ee1\u5206\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nlong long s[10010],num[10010],a,b,ans = 0;\nint cnt = -1,n = 0;\nvoid dfs(long long p)\n{\n\tif(p > b) return;\n\tnum[++cnt] = p;\n\tdfs(p*10+6);\n\tdfs(p*10+8);\n}\nvoid get(int t,long long p,int u)\n{\n\tans += (b/p - (a-1)/p) * u;\n\tfor(int i = t+1;i <= n;++i) \n\t\tif(1.0*p/__gcd(p,s[i])*s[i] <= b)\n\t\t\tget(i,p/__gcd(p,s[i])*s[i],-u);\t\n}\nint main()\n{\n\tscanf(\"%lld%lld\",&a,&b);\n\tdfs(0);\n\tsort(num+1,num+cnt+1);\n\tfor(int i = 1;i <= cnt;++i)\n\t{\n\t\tif(!num[i]) continue; \n\t\tfor(int j = i+1;j <= cnt;++j)\n\t\t\tif(num[j] % num[i] == 0)\t\n\t\t\t\tnum[j] = 0;\n\t}\n\tfor(int i = 1;i <= cnt;++i) \n\t\tif(num[i])\n\t\t\ts[++n] = num[i];\n\treverse(s + 1,s + n + 1);\n\tget(0,1,1);\n\tcout<<b - a + 1 - ans;\t\t\n\treturn 0;\n} \n```\n",
        "postTime": 1643270926,
        "uid": 197648,
        "name": "Wangxun",
        "ccfLevel": 5,
        "title": "P2567 \u9898\u89e3"
    },
    {
        "content": "# P2567\u5e78\u8fd0\u6570\u5b57\n\n### Description\n\n\u8ba1\u7b97 $[l,r]$ \u4e4b\u95f4\u6709\u591a\u5c11\u4e2a\u6570\u6ee1\u8db3\u542b $6$ \u6216\u542b $8$\uff0c\u6216\u8005\u662f\u542b $6$ \u6216\u542b $8$ \u7684\u6570\u7684\u500d\u6570\u3002\n\n### Solution\n\n\u5bb9\u65a5\u3002\n\n\u6211\u4eec\u8981\u5148\u627e\u51fa\u5e78\u8fd0\u6570\u5b57\uff0c\u624d\u80fd\u68c0\u7d22\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u3002\u8fd9\u4e00\u90e8\u5206\u76f4\u63a5\u8dd1\u4e00\u4e2a\u641c\u7d22\u5373\u53ef\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u4f7f\u7528dfs\u6c42\u89e3\u3002\n\n\u641c\u7d22\u7684\u610f\u4e49\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5728 $[a,b]$ \u5185\uff0c\u662f $k$ \u7684\u500d\u6570\u7684\u6570\u7684\u4e2a\u6570\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a $k$\uff0c\u7b54\u6848\u663e\u7136\u4e3a $\\lfloor b/k \\rfloor -\\lceil a/k \\rceil +1$\u3002\n\n\u4f46\u641c\u7d22\u7684\u590d\u6742\u5ea6\u5947\u9ad8\u65e0\u6bd4\uff0c\u6545\u8003\u8651\u526a\u679d\u3002\n\n\u526a\u679d\u7684\u8fc7\u7a0b\u4e5f\u5341\u5206\u597d\u7406\u89e3\uff0c\u5373\u5f53 $x>b$\uff08$x$ \u610f\u540c\u4e0a\u65b9\uff09\u65f6\u53ef\u4ee5\u505c\u6b62\u641c\u7d22\uff1b\u6b64\u5916\uff0c\u53ef\u4ee5\u5c06\u539f\u5e8f\u5217\u8fdb\u884c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u4f7f $x$ \u5c3d\u5feb\u5927\u4e8e $b$ \u3002\n\n\u6b64\u65f6\u7684\u4ee3\u7801\u4f9d\u65e7\u9519\u8bef\uff0c\u539f\u56e0\u662f\u6211\u4eec\u7b97\u91cd\u4e86\u5f88\u591a\uff08\u8b6c\u5982 $6$ \u5728\u7b97 $2$ \u548c $3$ \u7684\u65f6\u5019\u90fd\u7b97\u4e86\uff09\uff0c\u8003\u8651\u5bb9\u65a5\u3002\n\n\u4ee4 $f_x$ \u6307\u5728\u9898\u76ee\u533a\u95f4\u5185 $x$ \u7684\u500d\u6570\u4e2a\u6570\uff0c\u5219 $Ans=f_a+f_b+f_c...-f_{\\rm{lcm}(a,b)}-f_{\\rm {lcm}(a,c)}-f_{\\rm{ lcm}(b,c)}...+f_{\\rm {lcm}(a,b,c)}+...$ \n\n### Code\n\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <cmath>\n#define int long long\nusing namespace std;\n\nconst int N=1e6+9;\nint a,b,ans;\nint l[N],tot,luc[N],len;\nbool mark[N];\nvoid dfs(int sta){\n    if(sta>b)return;\n    if(sta)l[++tot]=sta;\n    bfs(sta*10+6);\n    bfs(sta*10+8);\n}\nbool cmp(int a,int b){return a>b;}\n__int128 gcd(__int128 a,__int128 b){\n    if(!b)return a;\n    else return gcd(b,a%b);\n}\n__int128 lcm(__int128 a,__int128 b){\n\tif(!a)return b;\n\treturn a/gcd(a,b)*b;\n}\nvoid dfs_(int t,int num,__int128 lsm){\n\tif(lsm>b)return;\n    if(t>len){\n    \tif(!lsm)return;\n        int jud=(num%2)?1:-1;\n        ans+=jud*(floor(1.0*b/lsm)-ceil(1.0*a/lsm)+1);\n        return;\n    }   \n    dfs_(t+1,num+1,lcm(lsm,luc[t]));\n    dfs_(t+1,num,lsm);\n}\n\nsigned main(){\n    scanf(\"%lld%lld\",&a,&b);\n    dfs(0);\n    for(int i=1;i<=tot;i++){\n        if(!mark[i])luc[++len]=l[i];\n        for(int j=i+1;j<=tot;j++)\n            if(!(l[j]%l[i]))mark[j]=true;\n    }//\u7b5b\u53bb\u5df2\u7ecf\u662f\u500d\u6570\u7684\u5e78\u8fd0\u6570\u5b57\n    sort(luc+1,luc+1+len,cmp);\n    dfs_(1,0,0);\n    printf(\"%lld\",ans);\n    return 0;\n}\n```",
        "postTime": 1658986636,
        "uid": 623152,
        "name": "XiaosDog",
        "ccfLevel": 5,
        "title": "P2567 SCOI2010 \u5e78\u8fd0\u6570\u5b57"
    },
    {
        "content": "\u6b63\u5982\u9898\u76ee\u6807\u7b7e\u6240\u8bf4\uff0c\u8fd9\u662f\u4e00\u9053 $dfs$ \u526a\u679d + \u5bb9\u65a5\u539f\u7406\u7684\u9898\u76ee\u3002\n\n### \u601d\u8def\uff1a\n\n\u9996\u5148\uff0c\u8981\u4ece\u6240\u6709\u7684\u6570\u91cc\u9762\u7b5b\u51fa\u5e78\u8fd0\u6570\u5b57\u3002\n\n\u5982\u679c\u4ece $1$ \u5230 $10^{10}$ \u5faa\u73af\uff0c\u90a3\u662f\u80af\u5b9a\u4f1a\u8d85\u65f6\u7684\u3002\n\n\u7528\u5982\u4e0b\u4ee3\u7801\u8fdb\u884c\u9012\u5f52\uff0c\u6c42\u51fa\u542b\u6709 $6$ \u548c $8$ \u7684\u5e78\u8fd0\u6570\u5b57\uff1a\n```cpp\ninit(6);\ninit(8);\nvoid init(ll x)\n{\n\tif(x>=MAX)return;//\u82e5\u8d85\u51fa\u4e86\u8303\u56f4\u5219\u8fd4\u56de\n\tv.push_back(x);//\u5c06\u9012\u5f52\u5230\u7684\u6570\u653e\u5165vector\u4e2d\n\tinit(x*10+6);//\u9012\u5f52\u542b\u67096\u7684\u5e78\u8fd0\u6570\u5b57\n\tinit(x*10+8);//\u9012\u5f52\u542b\u67098\u7684\u5e78\u8fd0\u6570\u5b57\n}\n```\n\n\u73b0\u5728\uff0c\u6240\u6709\u7684\u5e78\u8fd0\u6570\u5b57\u5c31\u90fd\u5728 $v$ \u6570\u7ec4\u91cc\u4e86\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5e78\u8fd0\u6570\u5b57 $x$\uff0c\u5728\u533a\u95f4 $[L,R]$ \u4e2d\uff0c\u4f1a\u6709 $\\frac{(R-L+1)}{x}$ \u4e2a $x$ \u7684\u500d\u6570\uff0c\u4e5f\u5c31\u662f\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\uff08\u9664 $x$ \u4e4b\u5916\uff09\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u4efb\u610f\u7684\u591a\u4e2a\u5e78\u8fd0\u6570\u5b57\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u5b83\u4eec\u7684\u500d\u6570\uff0c\u4e5f\u5c31\u662f\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u662f\u4e0d\u91cd\u590d\u7684\uff0c\u8fd9\u6837\uff0c\u90a3\u4e2a\u6570\u5c31\u88ab\u8ba1\u7b97\u4e86\u591a\u6b21\u3002\u6211\u4eec\u8003\u8651\u7528\u5bb9\u65a5\u539f\u7406\u7b5b\u6389\u88ab\u8ba1\u7b97\u591a\u6b21\u7684\u6570\u3002\n\n\u5047\u8bbe\u5728\u533a\u95f4 $[L,R]$ \u4e2d\uff0c\u6709 $a,b$ \u4e24\u4e2a\u5e78\u8fd0\u6570\u5b57\uff0c\u5e76\u4e14 $L$ \u548c $R$ \u4e4b\u95f4\u7684\u8ddd\u79bb\u65e0\u9650\uff0c\u90a3\u4e48\u5f53\u4e00\u4e2a\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u662f $lcm(a,b)$ \u7684\u500d\u6570\u65f6\uff0c\u5b83\u5c31\u91cd\u590d\u5730\u88ab\u7edf\u8ba1\u4e86 $\\frac{(R-L+1)}{lcm(a,b)}$ \u6b21\u3002\n\n\u4f17\u6240\u5468\u77e5\uff0c$lcm(a,b)=a\\times b/gcd(a,b)$\n\n\u5bb9\u65a5\u539f\u7406\uff1a$\\frac{(R-L+1)}{a}+\\frac{(R-L+1)}{b}+\\frac{(R-L+1)}{c}-\\frac{(R-L+1)}{lcm(a,b)}-\\frac{(R-L+1)}{lcm(a,c)}-\\frac{(R-L+1)}{lcm(b,c)}+\\frac{(R-L+1)}{lcm(a,b,c)}$\n\n\u5c0f\u4f18\u5316\uff0c\u4e24\u4e2a\u5e78\u8fd0\u6570\u5b57\u82e5\u6210\u500d\u6570\u5173\u7cfb\uff0c\u5219\u5220\u53bb\u8f83\u5927\u7684\u5e78\u8fd0\u6570\u5b57\u3002\n\n\u5f53 $lcm(a,b)$ \u5927\u4e8e\u8303\u56f4\u65f6\u5c31\u4e0d\u80fd\u64cd\u4f5c\u4e86\uff0c\u6240\u4ee5\u8981\u7ed9\u8bb0\u5f55\u4e0b\u6765\u7684\u5e78\u8fd0\u6570\u5b57\u6392\u5e8f\u3002\n\n### \u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst ll MAX=1e10;\nll L,R,ans;\nvector<ll> v,t;//v\u8bb0\u5f55\u5e78\u8fd0\u6570\u5b57\ninline ll read()//\u5341\u5e74OI\u4e00\u573a\u7a7a\uff0c\u4e0d\u5f00longlong\u89c1\u7956\u5b97\n{\n\tll x=0,f=1;char c=getchar();//x\u548cf\u4e00\u5b9a\u8981\u5f00longlong\uff01\uff01\uff01\u5361\u4e86\u6211\u4e00\u5929\n\twhile(!isdigit(c)){if(c=='-')f=-1,c=getchar();}\n\twhile(isdigit(c)){x=x*10+c-48,c=getchar();}\n\treturn x*f;\n}\nvoid write(ll x)\n{\n\tif(x>9)write(x/10);\n\tif(x<0)putchar('-'),x=-x;\n\tputchar(x%10+'0');\n}\nll GCD(ll a,ll b)//\u8f97\u8f6c\u76f8\u9664\u6cd5\u6c42gcd\uff0c\u4e5f\u53ef\u4ee5\u7528__gcd\n{\n\treturn a?GCD(b%a,a):b;\n}\nvoid init(ll x)\n{\n\tif(x>=MAX)return;\n\tv.push_back(x);\n\tinit(x*10+6);\n\tinit(x*10+8);\n}\nvoid dfs(int pos,ll lcm,ll x,int cnt)//\u5bb9\u65a5\n{\n\tif(pos==-1) {\n\t\tif(cnt) {\n\t\t\tif(cnt&1)ans+=x/lcm;\n\t\t\telse ans-=x/lcm;\n\t\t}\n\t\treturn;\n\t}\n\t__int128 gcd=GCD(lcm,v[pos]);//\u4e0d\u7528__int128\u4f1a\u7206\n\tif(lcm/gcd*v[pos]<=x)\n\t    dfs(pos-1,lcm/gcd*v[pos],x,cnt+1);\n\tdfs(pos-1,lcm,x,cnt);\n}\nll solve(ll n)\n{\n\tans=0;\n\tll m=upper_bound(v.begin(),v.end(),n)-v.begin();\n\tdfs(m-1,1,n,0);\n\treturn ans;\n}\nint main()\n{\n\tinit(6);\n\tinit(8);\n\tsort(v.begin(),v.end());//\u6392\u5e8f\n\tfor(ll num1:v) {//\u5c06\u591a\u4f59\u7684\u500d\u6570\u53bb\u9664\n   //\u7b49\u540c\u4e8efor(ll i=0;i<v.size();i++)num1=v[i];\n\t\tbool f=true;\n\t\tfor(ll num2:t)\n\t\t    if(num1%num2==0) {\n\t\t    \tf=false;\n\t\t    \tbreak;\n\t\t\t}\n\t\tif(f)t.push_back(num1);\n\t}\n\tswap(t,v);//O(1)\u7684\u65f6\u95f4\u5185\u4ea4\u6362\u5730\u5740\uff0cv\u5f97\u5230\u4e86\u53bb\u91cd\u540e\u7684\u7ed3\u679c\n\tL=read(),R=read();\n\twrite(solve(R)-solve(L-1));\n\treturn 0;\n}\n```\n\n\u4ece\u611a\u4eba\u8282\u5c31\u5f00\u59cb\u60f3\uff0c\u5230\u4eca\u5929\u6e05\u660e\u8282\u624d\u505a\u597d\u3002\n\n\u611f\u8c22 @frelion \u5de8\u4f6c\u6559\u6211",
        "postTime": 1649064472,
        "uid": 525177,
        "name": "pengzy___",
        "ccfLevel": 0,
        "title": "P2567 \u5e78\u8fd0\u6570\u5b57 \u9898\u89e3"
    },
    {
        "content": "\u4e3b\u8981\u601d\u60f3\uff1a\u5bb9\u65a5\u3002\n\n\u9996\u5148\u6211\u4eec\u5148\u641c\u7d22\u51fa\u6570\u636e\u8303\u56f4\u5185\u7684\u6240\u6709\u5e78\u8fd0\u6570\u5b57\uff0c\u63a5\u4e0b\u6765\u7528\u5bb9\u65a5\u539f\u7406\u7206\u641c\u5373\u53ef\u3002\n\n\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u51e0\u70b9\uff1a\n\n\u7206\u641c\u80af\u5b9a\u4f1a\u8d85\u65f6\uff0c\u8003\u8651\u526a\u679d\uff1a\u4e0d\u9009\u8d85\u8fc7 $b$ \u8303\u56f4\u7684\u6570\u548c**\u662f\u5176\u4ed6\u5e78\u8fd0\u6570\u5b57\u7684\u6570**\uff0c\u540c\u65f6\u5c06\u6211\u4eec\u9009\u51fa\u7684\u6700\u7ec8\u5e78\u8fd0\u6570\u5b57\u5e8f\u5217\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u4f7f $\\operatorname{lcm}$ \u5c3d\u91cf\u5feb\u7684\u8d85\u8fc7\u4e0a\u5c4a\u3002\n\n\u5176\u6b21\uff0c\u6700\u7ec8\u5408\u6cd5\u7684\u6570\u5b57\u4f1a\u7206 long long\uff0c\u6240\u4ee5\u8981\u5f00 __int128 \u6216\u8005\u5c06\u6570\u5b57\u8f6c\u5316\u4e3a\u6d6e\u70b9\u6570\uff0c\u5426\u5219\u4f1a\u8d85\u65f6\u3002",
        "postTime": 1681708839,
        "uid": 774862,
        "name": "Tsinghua_pwtking",
        "ccfLevel": 0,
        "title": "P2567\u9898\u89e3"
    },
    {
        "content": "\u524d\u7f6e\u829d\u58eb\uff1a\u5bb9\u65a5\u539f\u7406\u3002\r\n\r\n### \u9884\u5904\u7406\r\n\r\n\u5bb9\u6613\u53d1\u73b0\uff0c $[1,10^{10}]$ \u4e4b\u95f4\u7684\u5e78\u8fd0\u6570\u5b57\u7684\u603b\u6570\u53ea\u6709 $2046$\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 dfs \u628a\u4ed6\u4eec\u9884\u5904\u7406\u51fa\u6765\uff0c\u63a5\u7740\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\r\n\r\n\u7a0b\u5e8f\u5982\u4e0b\uff1a\r\n\r\n```\r\nvoid p_dfs(ll p)\r\n{\r\n\tif(p>r) //\u5982\u679c p \u5927\u4e8e\u53f3\u8fb9\u754c\u5c31\u9000\u51fa\r\n\t{\r\n\t\treturn;\r\n\t}\r\n\tlucky[++cnt]=p; //\u5c06\u5e78\u8fd0\u6570\u5b57 p \u4fdd\u5b58\u5230\u6570\u7ec4\u4e2d \r\n\tp_dfs(p*10+6); //\u4e0b\u4e00\u4f4d\u662f 6\r\n\tp_dfs(p*10+8); //\u4e0b\u4e00\u4f4d\u662f 8\r\n}\r\n```\r\n### \u6838\u5fc3\u90e8\u5206\r\n\r\n\u5df2\u7ecf\u8ba1\u7b97\u51fa\u4e86\u5e78\u8fd0\u6570\u5b57\uff0c\u73b0\u5728\u8003\u8651\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u7684\u4e2a\u6570\u3002\r\n\r\n\u5728 $[l,r]$ \u8fd9\u4e2a\u533a\u95f4\u4e2d\uff0c\u5e78\u8fd0\u6570\u5b57 $x$ \u7684\u51fa\u73b0\u6b21\u6570\u4e3a $\\lfloor \\frac{r}{x} \\rfloor-\\lfloor\\frac{l-1}{x}\\rfloor$\u3002\u4f46\u662f\u4e24\u4e2a\u5e78\u8fd0\u6570\u5b57\u7684\u500d\u6570\uff0c\u5373\u8fd1\u4f3c\u5e78\u8fd0\u53f7\u7801\u53ef\u80fd\u6709\u4ea4\u96c6\uff0c\u6240\u4ee5\u9700\u8981\u5bb9\u65a5\uff0c\r\n\r\n\u5c31\u662f\u8fd9\u4e2a\uff1a \u9009 $1$ \u4e2a\u5e78\u8fd0\u6570\u5b57 $-$ $[l,r]$ \u4e4b\u95f4\u6570\u503c\u4e3a $2$ \u4e2a\u5e78\u8fd0\u6570\u5b57\u7684 lcm \u7684\u4e2a\u6570 $+$ $[l,r]$ \u4e4b\u95f4\u6570\u503c\u4e3a $3$ \u4e2a\u5e78\u8fd0\u6570\u5b57\u7684 lcm \u7684\u4e2a\u6570......\r\n\r\n\u7136\u540e\u62e5\u6709\u4e86\u8fd9\u4e2a\u4ee3\u7801\uff08\u6b64\u4ee3\u7801\u770b\u8bcd\u6765\u590d\u6742\u5ea6\u6781\u9ad8\uff0c\u4f46\u662f\u591a\u4e2a\u5e78\u8fd0\u6570\u5b57\u7684 lcm \u5f88\u5927\uff0c\u5f88\u5bb9\u6613\u8d85\u8fc7 $r$\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u5176\u5b9e\u633a\u5c0f\u7684\uff09\uff1a\r\n\r\n```\r\nll calc(ll x) //\u6c42 [l,r] \u4e4b\u95f4 x \u51fa\u73b0\u4e86\u51e0\u6b21\r\n{\r\n\treturn r/x-(l-1)/x; \r\n}\r\nll _lcm(ll a,ll b) //\u6c42 a,b \u7684 lcm\r\n{\r\n\treturn a*b/__gcd(a,b);\r\n}\r\nll dfs(ll last,ll lcm,ll opt)\r\n//last \u662f\u4e0a\u4e00\u4e2a\u5e78\u8fd0\u6570\u5b57\u7684\u4f4d\u7f6e\r\n//lcm \u662f\u524d\u51e0\u4e2a\u5e78\u8fd0\u6570\u5b57\u7684 lcm\r\n//opt \u662f\u5f53\u524d\u8981\u52a0\u8981\u51cf\uff08\u5728\u5bb9\u65a5\u4e2d\u7684\u7b26\u53f7\u6709\u53d8\u5316\uff09\r\n{\r\n\tll ans=0;\r\n\tfor(int i=last;i<2047;i++) //\u679a\u4e3e\u6bcf\u4e00\u4e2a\u5e78\u8fd0\u6570\u5b57\r\n\t{\r\n\t\tll tmp1=_lcm(lcm,lucky[i]); //\u52a0\u4e0a\u8fd9\u4e2a\u6570\u5b57\u7684 lcm\r\n\t\tif(tmp1<=r && tmp1>0) //\u4e0d\u8d85\u8fc7\u4e0a\u754c\uff0c\u5e76\u4e14\u8981 >0\uff08\u5c0f\u4f59 0 \u5c31\u6ea2\u51fa\u4e86\uff09\r\n\t\t{\r\n\t\t\tans+=opt*calc(tmp1); //\u7d2f\u52a0\u7b54\u6848\r\n\t\t\tans+=dfs(i+1,tmp1,-opt); //\u8bb0\u5f97\u53d8\u7b26\u53f7\r\n\t\t}\r\n\t}\r\n\treturn ans;\r\n}\r\n```\r\n\r\n~~\u7136\u540e\u5c31 T \u4e86\u2026\u2026~~\r\n\r\n[TLE \u8bb0\u5f55](https://www.luogu.com.cn/record/101737951)\r\n\r\n### \u526a\u679d\r\n\r\n\u53d1\u73b0\u4e00\u70b9\uff1a\u5982\u679c\u6709\u4e24\u4e2a\u5e78\u8fd0\u6570\u5b57 $x,y$ \u5e76\u4e14 $x \\bmod y=0$\uff0c\u90a3\u4e48 $y$ \u6839\u672c\u6ca1\u6709\u7528\uff0c\u56e0\u4e3a\u662f $y$ \u500d\u6570\u7684\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u4e00\u5b9a\u662f $x$ \u7684\u500d\u6570\u3002\r\n\r\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u9884\u5904\u7406\u65f6\u5c06 $y$ \u7ed9\u53bb\u9664\uff0c\u8fd9\u6837\u5b50\u5269\u4e0b\u7684\u5e78\u8fd0\u6570\u5b57\u4f1a\u5c11\u5f88\u591a\uff0c\u5927\u6982 $1000$ \u5de6\u53f3\u5427\uff0c\u6b64\u65f6\u5c31\u53ef\u4ee5\u901a\u8fc7\u4e86\u3002\r\n\r\n",
        "postTime": 1675870959,
        "uid": 807853,
        "name": "I_am_AKed_by_NOI",
        "ccfLevel": 0,
        "title": "p2567 \u8be6\u7ec6\u9898\u89e3"
    },
    {
        "content": "\u6b63\u5982\u9898\u76ee\u6807\u7b7e\u6240\u8bf4\uff0c\u8fd9\u662f\u4e00\u9053 $dfs$ \u526a\u679d + \u5bb9\u65a5\u539f\u7406\u7684\u9898\u76ee\u3002\n\n### \u601d\u8def\uff1a\n\n\u9996\u5148\uff0c\u8981\u4ece\u6240\u6709\u7684\u6570\u91cc\u9762\u7b5b\u51fa\u5e78\u8fd0\u6570\u5b57\u3002\n\n\u5982\u679c\u4ece $1$ \u5230 $10^{10}$ \u5faa\u73af\uff0c\u90a3\u662f\u80af\u5b9a\u4f1a\u8d85\u65f6\u7684\u3002\n\n\u7528\u5982\u4e0b\u4ee3\u7801\u8fdb\u884c\u9012\u5f52\uff0c\u6c42\u51fa\u542b\u6709 $6$ \u548c $8$ \u7684\u5e78\u8fd0\u6570\u5b57\uff1a\n```cpp\ninit(6);\ninit(8);\nvoid init(ll x)\n{\n\tif(x>=MAX)return;//\u82e5\u8d85\u51fa\u4e86\u8303\u56f4\u5219\u8fd4\u56de\n\tv.push_back(x);//\u5c06\u9012\u5f52\u5230\u7684\u6570\u653e\u5165vector\u4e2d\n\tinit(x*10+6);//\u9012\u5f52\u542b\u67096\u7684\u5e78\u8fd0\u6570\u5b57\n\tinit(x*10+8);//\u9012\u5f52\u542b\u67098\u7684\u5e78\u8fd0\u6570\u5b57\n}\n```\n\n\u73b0\u5728\uff0c\u6240\u6709\u7684\u5e78\u8fd0\u6570\u5b57\u5c31\u90fd\u5728 $v$ \u6570\u7ec4\u91cc\u4e86\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5e78\u8fd0\u6570\u5b57 $x$\uff0c\u5728\u533a\u95f4 $[L,R]$ \u4e2d\uff0c\u4f1a\u6709 $\\frac{(R-L+1)}{x}$ \u4e2a $x$ \u7684\u500d\u6570\uff0c\u4e5f\u5c31\u662f\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\uff08\u9664 $x$ \u4e4b\u5916\uff09\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u4efb\u610f\u7684\u591a\u4e2a\u5e78\u8fd0\u6570\u5b57\uff0c\u65e0\u6cd5\u4fdd\u8bc1\u5b83\u4eec\u7684\u500d\u6570\uff0c\u4e5f\u5c31\u662f\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u662f\u4e0d\u91cd\u590d\u7684\uff0c\u8fd9\u6837\uff0c\u90a3\u4e2a\u6570\u5c31\u88ab\u8ba1\u7b97\u4e86\u591a\u6b21\u3002\u6211\u4eec\u8003\u8651\u7528\u5bb9\u65a5\u539f\u7406\u7b5b\u6389\u88ab\u8ba1\u7b97\u591a\u6b21\u7684\u6570\u3002\n\n\u5047\u8bbe\u5728\u533a\u95f4 $[L,R]$ \u4e2d\uff0c\u6709 $a,b$ \u4e24\u4e2a\u5e78\u8fd0\u6570\u5b57\uff0c\u5e76\u4e14 $L$ \u548c $R$ \u4e4b\u95f4\u7684\u8ddd\u79bb\u65e0\u9650\uff0c\u90a3\u4e48\u5f53\u4e00\u4e2a\u8fd1\u4f3c\u5e78\u8fd0\u6570\u5b57\u662f $lcm(a,b)$ \u7684\u500d\u6570\u65f6\uff0c\u5b83\u5c31\u91cd\u590d\u5730\u88ab\u7edf\u8ba1\u4e86 $\\frac{(R-L+1)}{lcm(a,b)}$ \u6b21\u3002\n\n\u4f17\u6240\u5468\u77e5\uff0c$lcm(a,b)=a\\times b/gcd(a,b)$\n\n\u5bb9\u65a5\u539f\u7406\uff1a$\\frac{(R-L+1)}{a}+\\frac{(R-L+1)}{b}+\\frac{(R-L+1)}{c}-\\frac{(R-L+1)}{lcm(a,b)}-\\frac{(R-L+1)}{lcm(a,c)}-\\frac{(R-L+1)}{lcm(b,c)}+\\frac{(R-L+1)}{lcm(a,b,c)}$\n\n\u5c0f\u4f18\u5316\uff0c\u4e24\u4e2a\u5e78\u8fd0\u6570\u5b57\u82e5\u6210\u500d\u6570\u5173\u7cfb\uff0c\u5219\u5220\u53bb\u8f83\u5927\u7684\u5e78\u8fd0\u6570\u5b57\u3002\n\n\u5f53 $lcm(a,b)$ \u5927\u4e8e\u8303\u56f4\u65f6\u5c31\u4e0d\u80fd\u64cd\u4f5c\u4e86\uff0c\u6240\u4ee5\u8981\u7ed9\u8bb0\u5f55\u4e0b\u6765\u7684\u5e78\u8fd0\u6570\u5b57\u6392\u5e8f\u3002\n\n### \u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst ll MAX=1e10;\nll L,R,ans;\nvector<ll> v,t;//v\u8bb0\u5f55\u5e78\u8fd0\u6570\u5b57\ninline ll read()//\u5341\u5e74OI\u4e00\u573a\u7a7a\uff0c\u4e0d\u5f00longlong\u89c1\u7956\u5b97\n{\n\tll x=0,f=1;char c=getchar();//x\u548cf\u4e00\u5b9a\u8981\u5f00longlong\uff01\uff01\uff01\u5361\u4e86\u6211\u4e00\u5929\n\twhile(!isdigit(c)){if(c=='-')f=-1,c=getchar();}\n\twhile(isdigit(c)){x=x*10+c-48,c=getchar();}\n\treturn x*f;\n}\nvoid write(ll x)\n{\n\tif(x>9)write(x/10);\n\tif(x<0)putchar('-'),x=-x;\n\tputchar(x%10+'0');\n}\nll GCD(ll a,ll b)//\u8f97\u8f6c\u76f8\u9664\u6cd5\u6c42gcd\uff0c\u4e5f\u53ef\u4ee5\u7528__gcd\n{\n\treturn a?GCD(b%a,a):b;\n}\nvoid init(ll x)\n{\n\tif(x>=MAX)return;\n\tv.push_back(x);\n\tinit(x*10+6);\n\tinit(x*10+8);\n}\nvoid dfs(int pos,ll lcm,ll x,int cnt)//\u5bb9\u65a5\n{\n\tif(pos==-1) {\n\t\tif(cnt) {\n\t\t\tif(cnt&1)ans+=x/lcm;\n\t\t\telse ans-=x/lcm;\n\t\t}\n\t\treturn;\n\t}\n\t__int128 gcd=GCD(lcm,v[pos]);//\u4e0d\u7528__int128\u4f1a\u7206\n\tif(lcm/gcd*v[pos]<=x)\n\t    dfs(pos-1,lcm/gcd*v[pos],x,cnt+1);\n\tdfs(pos-1,lcm,x,cnt);\n}\nll solve(ll n)\n{\n\tans=0;\n\tll m=upper_bound(v.begin(),v.end(),n)-v.begin();\n\tdfs(m-1,1,n,0);\n\treturn ans;\n}\nint main()\n{\n\tinit(6);\n\tinit(8);\n\tsort(v.begin(),v.end());//\u6392\u5e8f\n\tfor(ll num1:v) {//\u5c06\u591a\u4f59\u7684\u500d\u6570\u53bb\u9664\n   //\u7b49\u540c\u4e8efor(ll i=0;i<v.size();i++)num1=v[i];\n\t\tbool f=true;\n\t\tfor(ll num2:t)\n\t\t    if(num1%num2==0) {\n\t\t    \tf=false;\n\t\t    \tbreak;\n\t\t\t}\n\t\tif(f)t.push_back(num1);\n\t}\n\tswap(t,v);//O(1)\u7684\u65f6\u95f4\u5185\u4ea4\u6362\u5730\u5740\uff0cv\u5f97\u5230\u4e86\u53bb\u91cd\u540e\u7684\u7ed3\u679c\n\tL=read(),R=read();\n\twrite(solve(R)-solve(L-1));\n\treturn 0;\n}\n```\n\n$2022.4.1-2022.4.4$\n\n\u611f\u8c22 @frelion \u5de8\u4f6c\u6559\u6211",
        "postTime": 1649634014,
        "uid": 525177,
        "name": "pengzy___",
        "ccfLevel": 0,
        "title": "P2567 \u5e78\u8fd0\u6570\u5b57 \u9898\u89e3"
    }
]
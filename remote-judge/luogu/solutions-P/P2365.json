[
    {
        "content": "\u5176\u4ed6\u9898\u89e3\u91cc\u9762\u7684\u659c\u7387\u4f18\u5316\u8bb2\u7684\u5bf9\u65b0\u624b\u4e0d\u53cb\u597d\uff0c\u6211\u8be6\u7ec6\u8bf4\u4e00\u4e0b\u5427\n\n[\u6b22\u8fce\u5230\u535a\u5ba2\u98df\u7528\u55b5~](https://www.cnblogs.com/ppprseter/p/9319788.html)\n\n\u5148\u8003\u8651$O(N^2)$\u7684\u505a\u6cd5\n\n\u56e0\u4e3a\u5206\u7684\u6279\u6570\u662f\u4e0d\u5b9a\u7684\uff0c\u6240\u6709\u6211\u4eec\u4e3a\u4e86\u907f\u514d\u7b97\u540e\u9762\u7684\u65f6\u5019\u8981\u7528\u5230\u524d\u9762\u5206\u4e86\u591a\u5c11\u6279\u8fd9\u4e2a\u72b6\u6001\uff0c\u6211\u4eec\u91c7\u7528**\u8d39\u7528\u63d0\u524d**\u7684\u601d\u60f3\uff0c\u5728\u5904\u7406\u524d\u9762\u65f6\u628a$S$\u4ea7\u751f\u7684\u8d39\u7528\u7ed9\u8ba1\u7b97\u4e86\u3002\n\n\u65b9\u7a0b:$f[i]$\u4ee3\u8868\u524d$i$\u4e2a\u4efb\u52a1\u5206\u6210\u82e5\u5e72\u6279\u4ea7\u751f\u7684\u6700\u5c0f\u8d39\u7528\n\n\u8f6c\u79fb:$f[i]=min_{i=0}^{i-1}(f[j]+t[i]*(c[i]-c[j])+S*(c[n]-c[j]))$\n\u5176\u4e2d,$t,c$\u5206\u522b\u662f\u4efb\u52a1\u65f6\u95f4\u548c\u8d39\u7528\u7684\u524d\u7f00\u548c\u7684\u6570\u7ec4\n\n\u8003\u8651\u5c06\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5316\u7b80\uff1a\n$f[j]=(S+t[i])*c[j]+f[i]-t[i]*c[i]-S*c[n]$\n\u6ce8\u610f\uff1a\u6211\u4eec\u8fd9\u91cc\u628a$min$\u53bb\u6389\u4e86\uff0c\u662f\u628a$j$\u7684\u53d6\u503c\u96c6\u5408\u6240\u6620\u5c04\u7684$f[j]$\u548c$c[j]$\u5206\u522b\u4f5c\u4e3a\u51fd\u6570\u7684$f(x)$\u548c$x$\n\n\u90a3\u4e48\u8fd9\u4e2a\u4e00\u6b21\u51fd\u6570\u7684\u659c\u7387$k$\u5c31\u7b49\u4e8e$(S+t[i])$\uff0c\u800c\u622a\u8ddd$b$\u7b49\u4e8e$f[i]-t[i]*c[i]-S*c[n]$\n\n\u6211\u4eec\u60f3\u8ba9\u8fd9\u4e2a$f[i]$\u6700\u5c0f\uff0c\u90a3\u4e48\u5176\u5b9e\u5c31\u7b49\u4ef7\u4e8e$b$\u6700\u5c0f\uff0c\u5728\u5750\u6807\u7cfb\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u62ff\u4e00\u4e2a\u5df2\u77e5\u659c\u7387\u7684\u76f4\u7ebf\u5411\u4e0a\u6ed1\u52a8\uff0c\u5f53\u5b83\u7b2c\u4e00\u6b21\u78b0\u89c1\u53d6\u503c\u96c6\u5408\u5185\u7684\u70b9$(c[j],f[j])$\u65f6\uff0c\u5c31\u53d6\u5230\u4e86\u5b83\u7684\u6700\u5c0f\u503c\n\n![](http://m.qpic.cn/psb?/V14VFGnz2yFhuP/mEoGtuSJj5qHvReQwcFCamm4O5jHFH.CSMKpXMVJByY!/b/dDEBAAAAAAAA&bo=ygR*AsoEfwIDGTw!&rf=viewer_4)\n\n![](http://m.qpic.cn/psb?/V14VFGnz2yFhuP/Sg2Pc0y*4a185db7acXaJgAsJK*t0dkTSGfRhSp7VZE!/b/dDABAAAAAAAA&bo=zgQTAs4EEwIDGTw!&rf=viewer_4)\n\n1.\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u4e00\u4e2a\u70b9\u53ef\u4ee5\u53d6\u5230\u6700\u5c0f\u503c\n\n\u901a\u8fc7\u624b\u73a9\u6211\u4eec\u53d1\u73b0\uff08\u5bf9\u4e8e\u8fd9\u4e2a\u624b\u73a9\u771f\u7684\u662f\u6700\u597d\u7684\u7406\u89e3\u65b9\u5f0f\u4e86\uff09\n\n\u5bf9\u4e8e\u70b9$J_2$\uff0c\u5f53\u4ee5$x$\u4e3a\u5173\u952e\u5b57\u6392\u5e8f\u540e\u7684\u4e24\u4e2a\u76f8\u90bb\u7684\u70b9$J_1$\u548c$J_3$\uff08\u5728\u6b64\u9898\u4e2d\u5bf9\u5e94$c[j]$\u7684\u5355\u8c03\u6027\uff09\n\n\u5f53\u659c\u7387$k_1<k_0<k_2$\u65f6\uff0c\u6b64\u70b9\u5c31\u662f\u6700\u4f18\u8f6c\u79fb\u70b9\n\n![](http://m.qpic.cn/psb?/V14VFGnz2yFhuP/kqmuzP9S9XnIHL2Hpe77MbUpWPsB*PnQTiN3C9u1UuQ!/b/dGcBAAAAAAAA&bo=*ARTAvwEUwIDCSw!&rf=viewer_4)\n\n2.\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u4e00\u4e2a\u70b9**\u53ef\u80fd**\u53ef\u4ee5\u53d6\u5230\u6700\u5c0f\u503c\uff0c\u4ec0\u4e48\u65f6\u5019**\u4e00\u5b9a**\u4e0d\u80fd\n\n\u5982\u4e0b\u56fe\uff0c\u5f53\u659c\u7387$k_1<k_2$\u65f6\uff0c$J_2$\u662f\u6709\u673a\u4f1a\u7684\uff0c\u6b64\u65f6\u4e09\u4e2a\u70b9**\u4e0b\u51f8**\n\n![](http://m.qpic.cn/psb?/V14VFGnz2yFhuP/DxTaNKXYHB*mr9ykGS*IWMYI0QcxpFmJ6LlcB.my.vg!/b/dDMBAAAAAAAA&bo=9gQ9AvYEPQIDGTw!&rf=viewer_4)\n\n\u5f53\u659c\u7387$k_1>=k_2$\u65f6\uff0c$J_2$\u4e0d\u4f1a\u6709\u4e00\u70b9\u673a\u4f1a\uff0c\u6b64\u65f6\u4e09\u4e2a\u70b9**\u4e0a\u51f8**\n\n![](http://m.qpic.cn/psb?/V14VFGnz2yFhuP/TIHx1N5Sgba8RwIEKT.VJ7GuWqdpcJSHTLYp3LaFlgQ!/b/dFYBAAAAAAAA&bo=3QQzAt0EMwIDGTw!&rf=viewer_4)\n\n\u6b64\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u4e00\u4e2a\u70b9\u96c6\u4e86\uff0c\u5176\u4e2d\u76f8\u90bb\u70b9\u7684\u659c\u7387$k$\u5fc5\u5b9a\u662f\u9012\u589e\u7684\n\n\u5f53\u9700\u8981\u505a\u51fa\u51b3\u7b56\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e8c\u5206\u8fd9\u4e2a\u70b9\u96c6\uff0c\u627e\u5230\u6700\u4f18\u8f6c\u79fb\u70b9\u3002\n\n\n\u9488\u5bf9\u4e8e\u6b64\u9898\uff0c\u6211\u4eec\u53d1\u73b0\u6bcf\u4e2a\u51b3\u7b56\u70b9\u7684\u659c\u7387$S+t[i]$\u662f\u5355\u8c03\u9012\u589e\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7ef4\u62a4\u961f\u9996\uff0c\u4fdd\u8bc1\u6bcf\u6b21\u4ece\u961f\u9996\u8f6c\u79fb\u3002\u5373\u5f53\u5f53\u524d\u659c\u7387\u5927\u4e8e\u961f\u9996\u4e0e\u7b2c\u4e8c\u4e2a\u70b9\u4e4b\u95f4\u7684\u659c\u7387\u65f6\uff0c\u5c31\u51fa\u961f\u3002\n\n\u7edf\u8ba1\u5b8c\u7b54\u6848\u540e\u518d\u7528\u4e8c\u5143\u7ec4$(f[i],c[i])$\u66f4\u65b0\u961f\u5c3e\u7684\u5143\u7d20\uff0c\u7136\u540e\u5c06\u5b83\u653e\u8fdb\u53bb\n\n**Code\uff1a**\n```cpp\n#include <cstdio>\n#include <cstring>\nconst int N=5010;\nint f[N],t[N],c[N],n,S,q[N],l,r;\nint main()\n{\n    scanf(\"%d%d\",&n,&S);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d%d\",t+i,c+i);\n        t[i]+=t[i-1];\n        c[i]+=c[i-1];\n    }\n    memset(f,0x3f,sizeof(f));\n    f[0]=0;\n    l=1,r=1;//\u6ce8\u610f\u6b64\u65f6\u5df2\u7ecf\u628a0\u4f5c\u4e3a\u5143\u7d20\u653e\u5165\u4e86q[1]\u4e2d\u53bb\u4e86\n    for(int i=1;i<=n;i++)\n    {\n        while(l<r&&f[q[l+1]]-f[q[l]]<=(S+t[i])*(c[q[l+1]]-c[q[l]])) l++;\n        f[i]=f[q[l]]+t[i]*c[i]+S*c[n]-c[q[l]]*(S+t[i]);\n        while(l<r&&(f[i]-f[q[r]])*(c[q[r]]-c[q[r-1]])<=(f[q[r]]-f[q[r-1]])*(c[i]-c[q[r]])) r--;\n        q[++r]=i;\n    }\n    printf(\"%d\\n\",f[n]);\n    return 0;\n}\n\n```",
        "postTime": 1531742566,
        "uid": 63727,
        "name": "ButterflyDew",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "\u770b\u5f88\u591a\u9898\u89e3\u91cc\u9762$O(n^2)$\u7684dp\u72b6\u6001\u90fd\u8bb2\u5f97\u4e0d\u600e\u4e48\u6e05\u695a\uff0c\u6211\u5c31\u518d\u8be6\u7ec6\u5730\u8bb2\u89e3\u4e00\u4e0b\u5427\n\n\u6211\u4eec\u5b9a\u4e49\uff1a$dp[i][j]$\u4e3a\u628a\u524d$i$\u4e2a\u4efb\u52a1\u5206\u6210$j$\u7ec4\uff0c\u6240\u9700\u8981\u7684\u6700\u5c0f\u8d39\u7528\n\n\u663e\u7136\u5bf9\u4e8e\u6bcf\u4e00\u4e2ai\uff0c\u90fd\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n**1.\u5c06i\u4e0ei-1\u5212\u5206\u5728\u540c\u4e00\u7ec4\u5185**\n\n**2.\u5c06i\u72ec\u7acb\u8bbe\u4e3a\u4e00\u7ec4**\n\n\u5148\u770b**\u7b2c\u4e00\u79cd\u60c5\u51b5**\uff1a\n\n\u6b64\u65f6\u7b2cj\u4e2a\u5206\u7ec4\u7684\u5de6\u7aef\u70b9\u672a\u77e5\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u5de6\u7aef\u70b9\n\n\u4ee4\u7b2cj\u4e2a\u4efb\u52a1\u5206\u7ec4\u533a\u95f4\u4e3a$[l,i]$\uff0c\u5219\u6709\uff1a\n\n$dp[i][j]=dp[l-1][j-1]+($\u7b2c$j$\u4e2a\u4efb\u52a1\u5206\u7ec4\u6240\u9700\u8d39\u7528$)$\n\n\u90a3\u4e48\u7b2cj\u4e2a\u4efb\u52a1\u5206\u7ec4\u6240\u9700\u8d39\u7528\u600e\u4e48\u6c42\u5462\uff1f\n\n\u56e0\u4e3a\u6b64\u65f6\u4e3a\u7b2cj\u4e2a\u4efb\u52a1\u5206\u7ec4\uff0c\u6240\u4ee5\u4e00\u5b9a\u6709j\u4e2a\u542f\u52a8\u65f6\u95f4(s)\uff0c\u6b64\u65f6\u5b8c\u6210\u7b2cj\u4e2a\u4efb\u52a1\u5206\u7ec4\u7684\u65f6\u95f4\u8282\u70b9\u4e3a$j*s+sumt[i]$\uff08\u8fd9\u91cc$sumt[i]$\u4e3a$t[1]+t[2]+\u2026+t[i]$\uff09,\u5373\u524di\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u603b\u65f6\u95f4+j\u4e2a\u51c6\u5907\u65f6\u95f4\n\n\u6240\u4ee5\u7b2cj\u4e2a\u4efb\u52a1\u6240\u9700\u8d39\u7528\u4e3a\n\n$(j*s+sumt[i])*(sumf[i]-sumf[l-1])$\n\n\uff08$sumf[i]-sumf[l-1]$\u4e3a\u533a\u95f4$[l,i]$\u7684\u8d39\u7528\u7cfb\u6570\u548c\uff09\n\n\u518d\u6765\u770b**\u7b2c\u4e8c\u79cd\u60c5\u51b5**\uff1a\n\n\u6b64\u65f6\u663e\u800c\u6613\u89c1\u7b2cj\u4e2a\u4efb\u52a1\u5206\u7ec4\u533a\u95f4\u4e3a$[i,i]$\uff0c\u505a\u6cd5\u540c\u4e0a\uff0c\u53ea\u4e0d\u8fc7\u5c06\u4e0a\u9762\u7684l\u6362\u6210\u4e86i\uff0c\u6240\u4ee5\u7b2cj\u4e2a\u4efb\u52a1\u6240\u9700\u8d39\u7528\u4e3a\uff1a\n\n$(j*s+sumt[i])*(sumf[i]-sumf[i-1])$\n\n\u4e24\u79cd\u60c5\u51b5\u7684\u72b6\u6001\u8f6c\u79fb\u975e\u5e38\u76f8\u4f3c\uff0c\u6240\u4ee5\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u53ea\u9700\u8bbe\u7f6el\u7684\u4e0a\u754c\u4e3ai\u5373\u53ef\u5b8c\u6210\u8f6c\u79fb\u3002\n\n\u6545\u603b\u7684\u8f6c\u79fb\u4e3a\uff1a\n\n$dp[i][j]=dp[l-1][j-1]+(j*s+sumt[i])*(sumf[i]-sumf[l-1])$$(1<=l<=i)$\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#define ll long long\nusing namespace std;\nconst int N=5011;\nconst int inf=0x7fffffff;\nint n,s,t[N],f[N],sumt[N],sumf[N];//\u56e0\u4e3af[i],t[i]<=100,\u6240\u4ee5\u524d\u7f00\u548c\u53ea\u9700\u7528int\u7c7b\u578b\u5b58\u50a8\u5373\u53ef \nll dp[N][N],ans;\nint main(){\n\tscanf(\"%d%d\",&n,&s);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d\",&t[i],&f[i]);\n\t\tsumt[i]=sumt[i-1]+t[i];\n\t\tsumf[i]=sumf[i-1]+f[i];\n\t}\n\tmemset(dp,127,sizeof(dp));//\u8d4b\u6700\u5927\u503c\n\tdp[0][0]=0; //\u521d\u59cb\u5316 \n\tans=inf; \n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=n;j++){\n\t\t\tfor(int l=1;l<=i;l++){\n\t\t\t\tdp[i][j]=min(dp[i][j],dp[l-1][j-1]+(j*s+sumt[i])*(sumf[i]-sumf[l-1]));\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tans=min(ans,dp[n][i]);\n\t}//\u53d6\u6700\u5927\u503c \n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n} \n```\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n^3)$,\u56e0\u4e3a\u5361\u7a7a\u95f4\uff0c\u6240\u4ee5\u671f\u671b\u5f97\u52060pts\n\n\u628aN\u6539\u6210\u53ef\u4ee5\u8fc7$O(n^3)$\u7684400\uff0c\u671f\u671b\u5f97\u520650pts\n\n\u6211\u4eec\u8003\u8651\u4f18\u5316\u3002\n\n\u56e0\u4e3a\u8fd9\u9898\u4e0d\u9650\u5206\u6210\u591a\u5c11\u4e2a\u7ec4\uff0c\u6240\u4ee5j\u5176\u5b9e\u662f\u591a\u4f59\u7684\n\n\u6211\u4eec\u56de\u987e\u4e0a\u9762\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u53ef\u4ee5\u53d1\u73b0j\u5728\u5176\u4e2d\u7684\u4f5c\u7528\u4ec5\u4ec5\u662f\u8ba1\u7b97\u8981\u52a0\u591a\u5c11\u4e2a\u542f\u52a8\u65f6\u95f4\u800c\u5df2\u3002\u6240\u4ee5\u6211\u4eec\u8981\u60f3\u529e\u6cd5\u4e0d\u901a\u8fc7j\u800c\u8ba1\u7b97\u51fa\u542f\u52a8\u65f6\u95f4\u3002\n\n\u5f88\u62b1\u6b49\uff0c\u505a\u4e0d\u5230\u3002\u4f46\u662f\u5f88\u663e\u7136\uff0c\u6bcf\u591a\u4e00\u4e2a\u4efb\u52a1\u5206\u7ec4\uff0c\u540e\u7eed\u4efb\u52a1\u7684\u7ed3\u675f\u65f6\u95f4\u5fc5\u5b9a\u4f1a\u5ef6\u8fdfs\u79d2\u3002\u8fd9\u4f1a\u9020\u6210\u540e\u7eed\u7684\u8d39\u7528\u591a\u51fa$(sumf[n]-sumf[l-1])*s$,\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u63d0\u524d\u52a0\u5728dp[i]\u91cc\n\n\u6240\u4ee5\uff0c\u6700\u7ec8$dp[i]$\u8868\u793a\uff08\u524di\u4e2a\u4efb\u52a1\u5206\u6210\u82e5\u5e72\u7ec4\u540e\u7684\u8d39\u7528+\u5206\u6210\u82e5\u5e72\u7ec4\u540e\u591a\u51fa\u7684\u540e\u7eed\u8d39\u7528\uff09\u7684\u6700\u5c0f\u503c\n\n\u72b6\u6001\u8f6c\u79fb\u5f0f\u4e3a\uff1a\n\n$dp[i]=min(dp[i],dp[l-1]+sumt[i]*(sumf[i]-sumf[l-1])+s*(sumf[n]-sumf[l-1]))(1<=l<=i)$\n\n\uff08[1,l-1]\u5206\u4e3a\u82e5\u5e72\u7ec4\u7684\u6700\u5c0f\u8d39\u7528+[1,l-1]\u591a\u51fa\u7684\u540e\u7eed\u8d39\u7528+\u4e0d\u7b97s\u7684\u8fd9\u4e2a\u4efb\u52a1\u5206\u7ec4\u7684\u8d39\u7528+[l,i]\u591a\u51fa\u7684\u540e\u7eed\u8d39\u7528\uff09\n\n\u4ee3\u7801\uff1a\n```\n#include <cstdio>\n#include <cstring>\n#include <iostream>\nusing namespace std;\nint n,s,t[5001],f[5001];\nint sumt[5001],sumf[5001];\nlong long dp[5001];\nint main(){\n\tscanf(\"%d%d\",&n,&s);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d\",&t[i],&f[i]);\n\t\tsumt[i]=sumt[i-1]+t[i];\n\t\tsumf[i]=sumf[i-1]+f[i];\n\t}\n\tmemset(dp,127,sizeof(dp));\n\tdp[0]=0;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int l=1;l<=i;l++){\n\t\t\tdp[i]=min(dp[i],dp[l-1]+sumt[i]*(sumf[i]-sumf[l-1])+s*(sumf[n]-sumf[l-1]));\n\t\t}//\u524di\u4e2a\u7684\u6700\u540e\u4e00\u7ec4\u4e3al~i \n\t}\n\tprintf(\"%lld\\n\",dp[n]);\n\treturn 0;\n}\n```\n\n\u65f6\u95f4\u590d\u6742\u5ea6$O(n^2)$,\u671f\u671b\u5f97\u5206100pts",
        "postTime": 1567316922,
        "uid": 14559,
        "name": "AFOier",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "\u3010\u9898\u76ee\u5927\u610f\u3011\n\nN\u4e2a\u4efb\u52a1\u6392\u6210\u4e00\u4e2a\u5e8f\u5217\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u7b49\u5f85\u5b8c\u6210\uff08\u987a\u5e8f\u4e0d\u5f97\u6539\u53d8\uff09\u3002\u4ece\u65f6\u523b0\u5f00\u59cb\uff0c\u8fd9\u4e9b\u4efb\u52a1\u88ab\u5206\u6279\u52a0\u5de5\uff0c\u7b2ci \u4e2a\u4efb\u52a1\u5355\u72ec\u5b8c\u6210\u6240\u9700\u7684\u65f6\u95f4\u662fTi\u3002\u5728\u6bcf\u6279\u4efb\u52a1\u5f00\u59cb\u524d\uff0c\u673a\u5668\u9700\u8981\u542f\u52a8\u65f6\u95f4S\uff0c\u800c\u5b8c\u6210\u8fd9\u6279\u4efb\u52a1\u6240\u9700\u7684\u65f6\u95f4\u662f\u5404\u4e2a\u4efb\u52a1\u9700\u8981\u65f6\u95f4\u7684\u603b\u548c\uff08\u540c\u4e00\u6279\u4efb\u52a1\u5c06\u5728\u540c\u4e00\u65f6\u523b\u5b8c\u6210\uff09\u3002\u6bcf\u4e2a\u4efb\u52a1\u7684\u8d39\u7528\u662f\u5b83\u7684\u5b8c\u6210\u65f6\u523b\u4e58\u4ee5\u4e00\u4e2a\u8d39\u7528\u7cfb\u6570Fi\u3002\u8bf7\u786e\u5b9a\u4e00\u4e2a\u5206\u7ec4\u65b9\u6848\uff0c\u4f7f\u5f97\u603b\u8d39\u7528\u6700\u5c0f\u3002\n\n\u3010\u7b97\u6cd5\u8ba8\u8bba\u3011\n\n\u8fd9\u9053\u9898\u91c7\u7528\u52a8\u6001\u89c4\u5212\u7684\u601d\u60f3\uff0c\u7528f[i]\u8868\u793a\u5b8c\u6210\u524di\u4e2a\u4efb\u52a1\u6240\u9700\u7684\u6700\u5c0f\u8d39\u7528\uff0c\u7528tim[i]\u8868\u793a\u524di\u9879\u4efb\u52a1\u6240\u9700\u7684\u65f6\u95f4\uff0c\u7528mon[i]\u8868\u793a\u524di\u9879\u4efb\u52a1\u4e00\u5171\u7684\u8d39\u7528\u7cfb\u6570\u3002\u52a8\u5f52\u5f0f\u5982\u4e0b\uff1a\n\nf[i]=min{f[j-1]+s\\*(mon[n]-mon[j-1])+\n\ntim[i]\\*(mon[i]-mon[j-1])|1<=j<=i};\n\n\u5982\u679c\u5728\u5b8c\u6210\u7b2cj\u9879\u4efb\u52a1\u662f\u542f\u52a8\u4e00\u6b21\u673a\u5668\uff0c\u540e\u9762\u7684\u6240\u6709\u4efb\u52a1\u5b8c\u6210\u7684\u65f6\u523b\u90fd\u8981\u52a0\u4e0as\uff0c\u6240\u4ee5\u6bcf\u542f\u52a8\u4e00\u6b21\u673a\u5668\u7684\u8d39\u7528\u4e3as\\*(mon[n]-mon[j-1])\uff1b\n\n\u5982\u679c\u628a\u7b2cj\u9879\u4efb\u52a1\u548c\u7b2ci\u9879\u4efb\u52a1\u548c\u5728\u4e00\u8d77\u505a\uff0c\u5219\u5b83\u4eec\u7684\u5b8c\u6210\u65f6\u523b\u4e3atim[i]\uff0c\u6240\u4ee5\u8d39\u7528\u4e3atim[i]\\*(mon[i]-mon[j-1])\u3002\n\n\u5f97\u5206\uff1a100\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(N^2)\n\n\u7a7a\u95f4\u590d\u6742\u5ea6\uff1aO(5\\*N)\n\n```cpp\n\n#include<iostream>\n#include<cstdlib>\n#include<cstdio>\nusing namespace std;\nint f[5001],g[5001];\nint len,wei,n,tim[5001],mon[5001],ti[5001],s;\nint main ()\n{\n    scanf (\"%d%d\",&n,&s);\n    for (int b=1;b<=n;++b)\n    {\n        scanf(\"%d%d\",&tim[b],&mon[b]);\n        tim[b]+=tim[b-1];\n        mon[b]+=mon[b-1];\n        f[b]=2147483647;\n    }\n    for (int i=1;i<=n;++i)\n        for (int j=1;j<=i;++j)\n            f[i]=min(f[i],f[j-1]+s*(mon[n]-mon[j-1])+tim[i]*(mon[i]-mon[j-1]));\n    printf (\"%d\",f[n]);\n    return 0;\n}\n\n```",
        "postTime": 1437558032,
        "uid": 171,
        "name": "Timothy",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "\u9996\u5148\uff0c\u8fd9\u662f\u4e00\u4e2aDP\u3002\n\n\uff08\u4f3c\u4e4e\u662f\u4e2a\u53eb\u5206\u7ec4DP\u7684\u4e1c\u897f\uff09\n\n\u663e\u7136\u7684\u72b6\u6001\u5b9a\u4e49\uff1a\u7528 $ dp_i $ \u8868\u793a\u524d $ i $ \u4e2a\u4efb\u52a1\u90fd\u88ab\u5b8c\u6210\uff0c\u6240\u9700\u7684\u65f6\u95f4\u6700\u5c0f\u503c\u3002\uff08\u56e0\u4e3a $ f $ \u7528\u8fc7\u4e86\uff0c\u53ea\u597d\u7528 $ dp $ \u4e86qwq\uff09\n\n\u663e\u7136\u7684\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$ dp_i = \\min\\limits_{1 \\leqslant j \\leqslant i}{dp_{j-1} + \\sum\\limits_{k = j}^i{tim \\times f_k}} $\n\n$ = \\min\\limits_{1 \\leqslant j \\leqslant i}{dp_{j-1} + tim \\times \\sum\\limits_{k = j}^i{f_k}} $\n\n$ j $ \u8868\u793a\u6700\u540e\u4e00\u7ec4\u662f\u4ece $ j $ \u5230 $ i $ \u7684\u4efb\u52a1\uff0c$ tim $ \u662f\u8fd9\u6279\u4efb\u52a1\u7684\u5b8c\u6210\u65f6\u95f4\u3002\n\n\u540e\u9762\u7684 $ \\sum\\limits_{k = j}^i{f_k} $ \u663e\u7136\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u7ef4\u62a4\u3002\u4f46\u662f\u53d8\u91cf $ tim $ \u7684\u51fa\u73b0\u4f3c\u4e4e\u7ed9\u7b97\u6cd5\u5e26\u6765\u4e86\u540e\u6548\u6027\uff0c\u56e0\u4e3a\u5b83\u4e0e\u4e4b\u524d\u5206\u8fc7\u7684\u7ec4\u6570\u6709\u5173\u3002\u66f4\u786e\u5207\u5730\u8bf4\uff0c\n\n$ tim = \\sum\\limits_{k = 1}^i{t_k} + num \\times S $\n\n\u5176\u4e2d $ num $ \u662f\u4e4b\u524d\u5df2\u7ecf\u5206\u8fc7\u7684\u7ec4\u6570\u3002\u540c\u6837\u5730\uff0c$ \\sum\\limits_{k = 1}^i{t_k} $ \u53ef\u4ee5\u7528\u524d\u7f00\u548c\u7ef4\u62a4\u3002\u800c\u5bf9\u4e8e $ num $\uff0c\u5982\u679c\u518d\u5f00\u4e00\u7ef4 $ dp $ \u6570\u7ec4\u7ef4\u62a4\uff08\u679a\u4e3e\uff09\uff0c\u5f00\u9500\u5c06\u4f1a\u5f88\u5927\u3002\n\n\u5982\u4f55\u89e3\u51b3\uff1f\n\n\u6ce8\u610f\u5230\u6bcf\u5728 $ j $ \u5230 $ i $ \u4e4b\u95f4\u5206\u4e00\u7ec4\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e4b\u540e\u6240\u6709\u7684 $ k $\uff0c\u5176\u8ba1\u7b97\u65f6\u7684 $ num $ \u90fd\u4f1a\u52a0\u4e0a $ 1 $\u3002\u5bf9\u4e8e $ tim $ \u800c\u8a00\u5c31\u662f\u52a0\u4e0a $ S $\u3002\u629b\u5f00\u8f6c\u79fb\u65b9\u7a0b\u8bb2\uff0c\u5c31\u662f **\u8fd9\u4e00\u7ec4** \u4ee5\u53ca\u540e\u7eed\u6240\u6709\u4efb\u52a1\u7684\u5b8c\u6210\u65f6\u95f4\u90fd\u8981\u52a0\u4e0a $ S $\u3002\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e2a\u4efb\u52a1 $ k $\uff0c\u5b83\u6240\u9700\u8981\u7684\u8d39\u7528\u4f1a\u52a0\u4e0a $ S \\times f_k $\uff0c\u540e\u9762\u7684\u6240\u6709\u4efb\u52a1\u603b\u5171\u5c31\u4f1a\u52a0\u4e0a $ \\sum\\limits_{k = j}^n{S \\times f_k} $\n\n$ = S \\times \\sum\\limits_{k = j}^n{f_k} $\n\n$ \\sum\\limits_{k = j}^n{f_k} $ \u53ef\u4ee5\u7528\u524d\u7f00\u548c\u7ef4\u62a4\uff01\u4e5f\u5c31\u662f\u8bf4\uff0c\u6240\u6709\u8fd9\u4e9b\u989d\u5916\u6d88\u8d39\u7684\u4ee3\u4ef7\u5728\u8ba1\u7b97 $ f_i $ \u65f6\u90fd\u5df2\u7ecf\u662f\u5df2\u77e5\u7684\u4e86\u3002\n\n\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4e0d\u628a\u8fd9\u4e9b\u8d39\u7528\u63d0\u5728\u8ba1\u7b97 $ f_i $ \u65f6\u5c31\u8ba1\u7b97\u5462\uff1f\n\n\u4e8e\u662f\u6211\u4eec\u5f97\u51fa\u4e86\u65b0\u7684\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$ f_i = \\min\\limits_{1 \\leqslant j \\leqslant i}{dp_{j-1} + \\sum\\limits_{k = 1}^i{t_k} \\times \\sum\\limits_{k = j}^i{f_k}} + \\sum\\limits_{k = j}^n{f_k} \\times S $\n\n\u8fd9\u65f6\u8ba1\u7b97\u5f53\u524d\u6bb5\u4ee3\u4ef7\u65f6\uff0c$ tim $ \u4e0d\u7528\u518d\u52a0\u4e0a\u673a\u5668\u7684\u542f\u52a8\u65f6\u95f4\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u65f6\u95f4\u9020\u6210\u7684\u4ee3\u4ef7\u90fd\u5df2\u7ecf\u5728\u4e4b\u524d\u7684 $ i $ \u4e2d\u8ba1\u7b97\u8fc7\u4e86\u3002\u800c\u8fd9\u4e00\u6b21\u542f\u52a8\u5bf9\u540e\u9762\u7684\u4efb\u52a1\u6240\u4ea7\u751f\u7684\u989d\u5916\u4ee3\u4ef7\uff0c\u5219\u662f $ \\sum\\limits_{k = j}^n{f_k} \\times S $\u3002\n\n\u6ce8\u610f\u5230\u65b9\u7a0b\u4e2d\u6240\u6709\u7684 $ \\sum $ \u90fd\u662f\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u7ef4\u62a4\u7684\u3002\n\n\u6240\u4ee5\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u7a0b\u5c31\u662f $ O(n) $ \u7684\u3002\u5171\u6709 $ O(n) $ \u4e2a\u72b6\u6001\u3002\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $ O(n^2) $\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3a $ O(n) $\uff0c\u5df2\u7ecf\u8db3\u4ee5\u901a\u8fc7\u6b64\u9898\u4e86\u3002\n\n\uff08\u4f3c\u4e4e\u8fd8\u6709\u66f4\u5feb\u7684\u505a\u6cd5\uff1f\u5e03\u5409\u5c9b\u8fd8\u662f\u8981%%%\u5927\u4f6c\u4eec\uff09\n\nCode:\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint t[5001],f[5001],st[5001],sf[5001],dp[5001];\nint main()\n{\n    int n,s;\n    scanf(\"%d %d\",&n,&s);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d %d\",&t[i],&f[i]);\n        st[i]=st[i-1]+t[i];\n        sf[i]=sf[i-1]+f[i];\n    }\n    memset(dp,0x7f,sizeof(dp));\n    dp[0]=0;\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=i;j++)\n            dp[i]=min(dp[i],dp[j-1]+st[i]*(sf[i]-sf[j-1])+s*(sf[n]-sf[j-1]));\n    printf(\"%d\\n\",dp[n]);\n    return 0;\n}\n```",
        "postTime": 1550307735,
        "uid": 73645,
        "name": "_ztyqwq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "O(N^2)\u7684\u65b9\u6cd5\u975e\u5e38\u7b80\u5355\uff0c\u8fd9\u91cc\u4e0d\u518d\u7ec6\u8bb2\u3002f[i]\u8868\u793a\u524di\u4e2a\u4efb\u52a1\u5206\u6210\u82e5\n\n\u5e72\u6279\u6267\u884c\u7684\u6700\u5c0f\u8d39\u7528\uff0csumC,sumT\u662f\u8d39\u7528\u7cfb\u6570\u548c\u65f6\u95f4\u7684\u524d\u7f00\u548c\u3002\n\n\u53ef\u5f97\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n\nf[i]=min(f[j]+sumC[i]\\*sumT[i]+s\\*sumC[n]-sumC[j]\\*(sumT[i]+s)); \n\n\u8fc7\u6389\u8fd9\u9053\u9898\u5df2\u662f\u8f7b\u8f7b\u677e\u677e\u3002\n\u9644\u4e0a\u4ee3\u7801:\n```cpp\n#include<bits/stdc++.h>\n#define N 5005\n#define oo 1000000000\nusing namespace std;\nint sumc[N],sumt[N];\nlong long f[N];\nint main(){\n    int n,s,t,c;\n    scanf(\"%d%d\",&n,&s);\n    for (int i=1;i<=n;++i){\n        scanf(\"%d%d\",&t,&c);\n        sumt[i]=sumt[i-1]+t;\n        sumc[i]=sumc[i-1]+c;\n    }\n    for (int i=1;i<=n;++i)\n        f[i]=oo;\n    for (int i=1;i<=n;++i)\n    for (int j=0;j<=i-1;++j)\n        f[i]=min(f[i],f[j]+sumc[i]*sumt[i]+s*sumc[n]-sumc[j]*(sumt[i]+s));\n    printf(\"%d\",f[n]);\n    return 0;\n}\n```\n\n------------\n\u4e0b\u9762\u5c31\u6765\u770b\u4e00\u770b\u5982\u4f55\u8fdb\u4e00\u6b65\u4f18\u5316\u3002 \n\n\u6211\u4eec\u4f1a\u53d1\u73b0\u540e\u9762\u7684\u72b6\u6001\u80af\u5b9a\u662f\u7531\u524d\u9762\u7684\u6700\u4f18\u72b6\u6001\u8f6c\u79fb\u800c\u6765\u7684\uff0c\u663e\n\n\u7136\u53ef\u4ee5\u60f3\u5230\u5355\u8c03\u961f\u5217\u4f18\u5316\u3002\u4f46\u548c\u5e73\u5e38\u7684\u5355\u8c03\u961f\u5217\u4f18\u5316\u4e0d\u540c\u7684\u662f\uff0c\n\nf[i]\u7684\u8f6c\u79fb\u4e2d\u9664\u4e86f[j],\u8fd8\u6709\u5176\u4ed6\u7684\u5173\u4e8ej\u7684\u5f0f\u5b50(\u4f8b\u5982sumc[j]),\u8fd9\u65f6\u5019\n\n\u5c31\u8981\u7528\u5230\u5355\u8c03\u961f\u5217\u7684\u659c\u7387\u4f18\u5316\u3002\n\n\u5728\u539f\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e2d\uff0c\u6211\u4eec\u628a\u53ea\u8ddfj\u6709\u5173\u7684\u5206\u6210\u4e00\u7c7b\uff0c\u628a\u65e2\u8ddfi\u6709\n\n\u5173\uff0c\u53c8\u8ddfj\u6709\u5173\u7684\u5206\u6210\u4e00\u7c7b\uff0c\u628a\u8ddfj\u65e0\u5173\u7684\u5206\u6210\u4e00\u7c7b\u3002\u5316\u7b80\u540e\u53ef\u5f97\n\n\u4e0b\u5f0f:  \n\nf[i]=f[j]-(sumT[i]+s)\\*sumC[j]+(sumC[i]\\*sumT[i]+s\\*sumC[n]);\n\n\u8bbey=f[j], k=sumT[i]+s, x=sumC[j],   C=sumC[i]\\*sumT[i]+s\\*sumC[n]  \n\n\u90a3\u4e48\u539f\u5f0f\u53ef\u5316\u4e3af[i]=y-kx+C  \n\n\u6700\u7ec8\u53ef\u5f97y=kx+f[i]-C  \n\n\u5f53\u6211\u4eec\u679a\u4e3ei\u7684\u65f6\u5019,k\u548cC\u662f\u5e38\u6570  \n\n\u90a3\u4e48\u4e0a\u5f0f\u662f\u4e0d\u662f\u5f88\u50cfy\u5173\u4e8ex\u7684\u4e00\u6b21\u51fd\u6570\u5462      \n\n\u5f53k\u4e00\u5b9a\u65f6\uff0c\u8981\u4f7ff[i]\u6700\u5c0f\uff0c\u5373\u622a\u8ddd\u6700\u5c0f\uff0c\u90a3\u4e48\u4f55\u65f6\u53d6\u5230\u8fd9\u4e2a\u6700\u5c0f\u503c\u5462\u3002\n\n\u6211\u4eec\u5c06\u76f4\u7ebfy=kx+b(Ps:b\u4e3a\u672a\u77e5\u6570)\u4ece\u4e0b\u5f80\u4e0a\u5e73\u79fb\uff0c\u5f53\u8be5\u76f4\u7ebf\u7b2c\n\n\u4e00\u6b21\u78b0\u5230\u67d0\u70b9(x(w),y(w))\u65f6\uff0c\u8be5\u70b9\u5373\u4e3a\u6700\u4f18\u72b6\u6001(1<=w<=i-1)\n\n\u5373K(w-1,w)<K(w,w+1)(K(x,y)\u8868\u793a\u76f4\u7ebfxy\u7684\u659c\u7387)\n\n\u5982\u56fe\n\n![](https://cdn.luogu.com.cn/upload/pic/25314.png )\n        \n        \u540c\u7406\u53ef\u77e5\uff0c\u82e5K(w-1,w)>K(w,w+1),w\u4e00\u5b9a\u4e0d\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u72b6\u6001\uff0c\u5982\u56fe\n![](https://cdn.luogu.com.cn/upload/pic/25315.png )\n\u53c8\u56e0\u4e3ax\u5355\u8c03\u9012\u589e\uff0c\u6240\u4ee5w\u4e5f\u4e0d\u53ef\u80fd\u5728\u4eca\u540e\u6210\u4e3a\u6700\u4f18\u72b6\u6001\uff0c\u76f4\u63a5\u820d\u53bb\u3002\u8fd9\u6837\u662f\u4e0d\u662f\u5c31\u505a\u5230\u4e86\u4f18\u5316\u5462\u3002\n\n\u56de\u5230\u4ee3\u7801\u5b9e\u73b0\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u5355\u8c03\u961f\u5217\u6765\u7ef4\u62a4\u8fd9\u4e2a\u201c\u4e0b\u51f8\u58f3\u201d\n\n1\u3001\u7ef4\u62a4K(j,i)(0<=j<i)\u7684\u5355\u8c03\u9012\u589e\uff08\u961f\u5c3e\u7ef4\u62a4\uff09\n\n2\u3001\u4fdd\u8bc1K(j,i)>k,\u5373\u53ef\u4ee5\u53d6\u5230\u8fd9\u4e2a\u6700\u4f18\u72b6\u6001\uff08\u961f\u9996\u7ef4\u62a4\uff09\n\n\u6b64\u65f6\uff0c\u5bf9\u4e8e\u6bcf\u4e2ai\uff0c\u53ef\u4ee5\u4ece\u961f\u9996\u7684\u6700\u4f18\u72b6\u6001\u76f4\u63a5\u8f6c\u79fb\n\n\u7531\u4e8e\u6bcf\u4e2a\u5143\u7d20\u53ea\u8fdb\u961f\u5217\u4e00\u6b21\uff0c\u53ea\u51fa\u961f\u5217\u4e00\u6b21\uff0c\u56e0\u800c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO\uff08N\uff09\n\n\u5230\u8fd9\u91cc\uff0c\u8fd9\u4e2a\u6240\u8c13\u7684\u659c\u7387\u4f18\u5316\u5c31\u7ed3\u675f\u4e86\uff0c\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 300005\n#define oo 1000000000\nusing namespace std;\nint sumT[MAXN],sumC[MAXN],que[MAXN];\nlong long f[MAXN];\nint cmp1(int x1,int x2,int x3){\n    return (f[x2]-f[x1])*(sumC[x3]-sumC[x2])>=(f[x3]-f[x2])*(sumC[x2]-sumC[x1]);\n}\nint cmp2(int x1,int x2,int k){\n    return f[x2]-f[x1]<=k*(sumC[x2]-sumC[x1]);\n}\nint main(){\n    int n,s,t,c;\n    scanf(\"%d\",&n);\n    scanf(\"%d\",&s);\n    for (int i=1;i<=n;++i){\n        scanf(\"%d%d\",&t,&c);\n        sumT[i]=sumT[i-1]+t;\n        sumC[i]=sumC[i-1]+c;\n    }\n    memset(f,0x3f,sizeof(f));\n    f[0]=0;\n    int head=1,tail=1;\n    que[1]=0;\n    for (int i=1;i<=n;++i){\n        while ( (head<tail) && (cmp2(que[head],que[head+1],sumT[i]+s)) ) ++head;\n        f[i]=f[que[head]]+(long long)sumC[i]*sumT[i]+s*sumC[n]-sumC[que[head]]*(sumT[i]+s);\n        while ( (head<tail) && (cmp1(que[tail-1],que[tail],i)) ) --tail;\n        que[++tail]=i;\n    }\n    printf(\"%lld\",f[n]);\n    return 0;\n}\n```\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u7ec6\u8282\u9700\u8981\u6ce8\u610f\uff0c\u5728\u8ba1\u7b97\u659c\u7387\u7684\u65f6\u5019\uff0c\u6700\u597d\u7528\u4ea4\u53c9\u76f8\n\n\u4e58\u7684\u65b9\u6cd5\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e9b\u5c0f\u504f\u5dee\uff0c\u76f8\u4e58\u7684\u7ed3\u679c\u662f\u5426\u8981\u7528\n\n(long long)\u6700\u597d\u4e5f\u5173\u6ce8\u4e0b\n\n\n------------\n\n\u8fd9\u662f\u672c\u849f\u84bb\u7b2c\u4e00\u6b21\u5199blog\uff0c\u5982\u6709\u4e0d\u8db3\u4e4b\u5904\u8bf7\u89c1\u8c05\u3002\n",
        "postTime": 1532508715,
        "uid": 18805,
        "name": "yujiaqi",
        "ccfLevel": 0,
        "title": "\u4ece\u4efb\u52a1\u5b89\u6392\u521d\u6b65\u63a5\u89e6\u659c\u7387\u4f18\u5316"
    },
    {
        "content": "### \u9898\u5916\u8bdd\n\u4eca\u5929\u5f00\u59cb\u5b66\u659c\u7387\u4f18\u5316\u4e86\uff0c\u4ee5\u524d\u770b\u8fc7\u4f46\u662f\u770b\u4e0d\u61c2\u88ab\u529d\u9000\u4e86\u3002\u7701\u9009\u9a6c\u4e0a\u8981\u5230\u4e86\uff0c\u8fd8\u662f\u5f97\u903c\u7740\u81ea\u5df1\u5b66\u4e0b\u53bb\uff0c\u8981\u4e0d\u7136\u53ea\u80fd\u7206\u96f6\u4e86\u3002   \n[\u914d\u5408\u535a\u5ba2\u98df\u7528](https://charley-xiao.github.io/2020/02/27/ConvexHull/)\n\n### \u9898\u76ee\u63cf\u8ff0   \n$n$\u4e2a\u4efb\u52a1\u6392\u6210\u4e00\u4e2a\u5e8f\u5217\u5728\u4e00\u53f0\u673a\u5668\u4e0a\u7b49\u5f85\u5b8c\u6210\uff08\u987a\u5e8f\u4e0d\u5f97\u6539\u53d8\uff09\uff0c\u8fd9$n$\u4e2a\u4efb\u52a1\u88ab\u5206\u6210\u82e5\u5e72\u6279\uff0c\u6bcf\u6279\u5305\u542b\u76f8\u90bb\u7684\u82e5\u5e72\u4efb\u52a1\u3002\n\u4ece\u96f6\u65f6\u523b\u5f00\u59cb\uff0c\u8fd9\u4e9b\u4efb\u52a1\u88ab\u5206\u6279\u52a0\u5de5\uff0c\u7b2c$i$\u4e2a\u4efb\u52a1\u5355\u72ec\u5b8c\u6210\u6240\u9700\u7684\u65f6\u95f4\u4e3a$t_i$\t \u3002\u5728\u6bcf\u6279\u4efb\u52a1\u5f00\u59cb\u524d\uff0c\u673a\u5668\u9700\u8981\u542f\u52a8\u65f6\u95f4$s$\uff0c\u800c\u5b8c\u6210\u8fd9\u6279\u4efb\u52a1\u6240\u9700\u7684\u65f6\u95f4\u662f\u5404\u4e2a\u4efb\u52a1\u9700\u8981\u65f6\u95f4\u7684\u603b\u548c\uff08\u540c\u4e00\u6279\u4efb\u52a1\u5c06\u5728\u540c\u4e00\u65f6\u523b\u5b8c\u6210\uff09\u3002\n\u6bcf\u4e2a\u4efb\u52a1\u7684\u8d39\u7528\u662f\u5b83\u7684\u5b8c\u6210\u65f6\u523b\u4e58\u4ee5\u4e00\u4e2a\u8d39\u7528\u7cfb\u6570$f_i$\t \u3002\u8bf7\u786e\u5b9a\u4e00\u4e2a\u5206\u7ec4\u65b9\u6848\uff0c\u4f7f\u5f97\u603b\u8d39\u7528\u6700\u5c0f\u3002  \n \n### \u521d\u6b65\u5206\u6790  \n\u9996\u5148\u8fd9\u4e2a\u9898\u6211\u8bfb\u4e86\u597d\u51e0\u904d\u624d\u8bfb\u61c2......  \n\u4f60\u53ef\u80fd\u4f1a\u95ee\uff1a\u4e0d\u5206\u6279\u4e0d\u662f\u6700\u597d\u7684\u5417\uff0c\u56e0\u4e3a\u8fd9\u6837\u5c31\u53ea\u6709\u4e00\u6b21\u673a\u5668\u542f\u52a8\u65f6\u95f4\u554a\u3002\u4f46\u662f\u4f60\u5ffd\u7565\u4e86\u4e00\u4e2a\u95ee\u9898\uff0c**\u6bcf\u4e2a\u4efb\u52a1\u7684\u5b8c\u6210\u65f6\u95f4\u89c4\u5b9a\u4e3a\u4ed6\u6240\u5728\u6279\u6b21\u7684\u6700\u540e\u4e00\u4e2a\u4efb\u52a1\u5b8c\u6210\u7684\u65f6\u95f4**\uff0c\u6240\u4ee5\u5206\u4e00\u6279\u4e0d\u4e00\u5b9a\u6700\u4f18\u3002  \n\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u4e4b\u540e\uff0c\u52a8\u6001\u89c4\u5212\u8f6c\u79fb\u65b9\u7a0b\u53ef\u4ee5\u5c1d\u8bd5\u5199\u51fa\u6765\u3002  \n\u7ef4\u62a4\u524d\u7f00\u548c\u6570\u7ec4$sumt[\\ ]$\u548c$sumf[\\ ]$\uff0c\u5206\u522b\u8868\u793a$t[\\ ]$\u548c$f[\\ ]$\u7684\u524d\u7f00\u548c\u3002  \n\u8bbe$dp[i,j]$\u8868\u793a**\u628a\u524d$i$\u4e2a\u4efb\u52a1\u5206\u6210$j$\u6279**\u7684\u6700\u5c0f\u8d39\u7528\u3002  \n\u90a3\u4e48\u5f88\u660e\u663e\uff0c\u7b2c$j$\u6279\u4efb\u52a1\u7684\u5b8c\u6210\u65f6\u95f4\u5c31\u662f\u7b2c$j$\u6279\u4e2d\u6700\u540e\u4e00\u4e2a\u4efb\u52a1\uff08\u5373$i$\uff09\u5728\u4e0d\u5206\u6279\u60c5\u51b5\u4e0b\u7ed3\u675f\u7684\u65f6\u95f4\uff08\u5373$sumt[i]$\uff09\u52a0\u4e0a\u524d\u9762\u4efb\u52a1\u9700\u8981\u7684\u5f00\u673a\u65f6\u95f4\uff08\u5373$s\\times j$\uff09\u3002  \n\u4e8e\u662f\u7ecf\u5178\u5957\u8def\uff1a  \n$$dp[i,j]=\\min\\limits_{0\\leq k< i}\\{dp[k,j-1]+(s\\times j+sumt[i])\\times(sumf[i]-sumf[k])\\}$$  \n\n\u4f46\u662f\u8fd9\u4e2a\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$\\mathcal O(n^3)$\uff0c\u9700\u8981\u4f18\u5316\u3002  \n\n### \u8d39\u7528\u63d0\u524d\u8ba1\u7b97\u4f18\u5316  \n\u6839\u636e\u4ee5\u5f80\u7684\u505a\u9898\u7ecf\u9a8c\uff0c\u6211\u4eec\u5c1d\u8bd5\u628a\u4e8c\u7ef4\u5316\u6210\u4e00\u7ef4\uff0c\u5373\u8ba9$dp[i]$\u8868\u793a\u524d$i$\u4e2a\u4efb\u52a1\u5206\u6279\u6267\u884c\u7684\u6700\u5c0f\u8d39\u7528\u3002  \n\u4f46\u662f\u8fd9\u6837\u6211\u4eec\u5c31\u4e0d\u77e5\u9053\u673a\u5668\u542f\u52a8\u8fc7\u51e0\u6b21\u4e86\uff01  \n\u522b\u614c\uff0c\u51b7\u9759\u5206\u6790\u4e00\u4e0b\u4f60\u4f1a\u53d1\u73b0\uff0c\u5982\u679c\u6211\u4eec\u8981\u4ece$dp[j]$\u8f6c\u79fb\u5230$dp[i]$\u7684\u8bdd\uff0c\u7531\u4e8e\u7b2c$j+1\\sim i$\u90fd\u662f\u5728\u540c\u4e00\u6279\u5185\u5b8c\u6210\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u628a$s$\u5bf9$j+1$\u540e\u7684\u5f71\u54cd\u8865\u5145\u5230\u8d39\u7528\u4e2d\u5c31\u53ef\u4ee5\u4e86\uff01  \n$$dp[i]=\\min\\limits_{0\\leq k<i}\\{dp[j]+sumt[i]\\times(sumf[i]-sumf[j])+s\\times (sumf[n]-sumf[j])\\}$$  \n\u65f6\u95f4\u590d\u6742\u5ea6$\\mathcal O(n^2)$  \n\u8fd9\u5c31\u662f**\u8d39\u7528\u63d0\u524d\u8ba1\u7b97**\u7684\u601d\u60f3\u3002  \n\n### \u659c\u7387\u4f18\u5316\u5206\u6790  \n\u4ed6\u6765\u4e86\u3002  \n\u6211\u4eec\u89c2\u5bdf\u8d39\u7528\u63d0\u524d\u8ba1\u7b97\u4f18\u5316\u7684\u5f0f\u5b50\uff1a  \n$$dp[i]=\\min\\limits_{0\\leq k<i}\\{dp[j]+sumt[i]\\times(sumf[i]-sumf[j])+s\\times (sumf[n]-sumf[j])\\}$$  \n\u6709\u4e09\u4e2a\u53d8\u91cf\uff1a$j,dp[j],dp[i]$\u3002  \n\u6211\u4eec\u628a$\\min$\u53bb\u6389\uff0c\u5316\u7b80\u4e00\u4e0b\u5f97\u5230\uff1a  \n$$dp[j]=(s+sumt[i])\\times sumf[j]+dp[i]-sumt[i]\\times sumf[i]-s\\times sumf[n]$$  \n\u8fd9\u662f\u4e2a$dp[j]$\u5173\u4e8e$sumf[j]$\u4e00\u6b21\u51fd\u6570\uff0c\u8fd8\u5e26\u6709\u5176\u4ed6\u53d8\u91cf\u3002  \n\u90a3\u4e48\u659c\u7387\u5c31\u662f$(s+sumt[i])$\uff0c\u622a\u8ddd\u662f$dp[i]-sumt[i]\\times sumf[i]-s\\times sumf[n]$\u3002  \n\u6211\u4eec\u6700\u7ec8\u7684\u76ee\u7684\u662f\u627e\u5230$f[i]$\u7684\u6700\u5c0f\u503c\uff0c\u5176\u5b9e\u5c31\u662f\u627e\u622a\u8ddd\u7684\u6700\u5c0f\u503c\u3002  \n**\u63a5\u4e0b\u6765\u662f\u91cd\u5934\u620f\uff01\u8bf7\u4e00\u5b9a\u8981\u548c\u6211\u4e00\u8d77\u5728\u7eb8\u4e0a\u6a21\u62df\uff01**  \n\u6211\u4eec\u5728\u5750\u6807\u7cfb\u5185\u753b\u51fa$f[j]$\u4e0e$sumf[j]$\u7684\u6563\u70b9\u56fe\uff0c\u7528\u4e00\u6761\u659c\u7387\u4e3a\u56fa\u5b9a\u6b63\u6574\u6570\u7684\u76f4\u7ebf\u81ea\u4e0b\u800c\u4e0a\u8fdb\u884c\u5e73\u79fb\uff0c\u7b2c\u4e00\u6b21\u63a5\u89e6\u5230\u4e00\u4e2a\u70b9\u7684\u65f6\u5019\u5c31\u5f97\u5230\u4e86\u6700\u5c0f\u622a\u8ddd\u3002  \n\u73b0\u5728\u6211\u4eec\u5c31\u9700\u8981\u8003\u8651\uff0c\u5bf9\u4e8e$j_1<j_2<j_3$\uff0c\u4f7f$j_2$\u6210\u4e3a\u6700\u4f18\u51b3\u7b56\u7684\u6761\u4ef6\u3002  \n\u6211\u4eec\u53d1\u73b0$j_2$\u5728$j_1,j_3$\u4e4b\u95f4\uff0c\u65e0\u975e\u5c31\u662f\u4e24\u4e2a\u4f4d\u7f6e\uff1a\u5728$j_1,j_3$\u4e24\u70b9\u8fde\u7ebf\u4e0a\u65b9\u548c\u4e0b\u65b9\u3002  \n\u5982\u679c\u5c06$j_1j_2,j_2j_3$\u8fde\u8d77\u6765\uff0c\u5f62\u8c61\u5730\u6211\u4eec\u79f0\u7b2c\u4e00\u79cd\u60c5\u51b5\u4e3a**\u4e0a\u51f8**\uff0c\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e3a**\u4e0b\u51f8**\u3002  \n**\u5982\u679c\u662f\u4e0a\u51f8\u7684\u8bdd\uff0c\u6211\u4eec\u53d1\u73b0\uff0c$j_2$\u6c38\u8fdc\u4e0d\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u51b3\u7b56\uff0c\u56e0\u4e3a\u8981\u4e48\u5148\u78b0\u5230$j_1$\uff0c\u8981\u4e48\u5148\u78b0\u5230$j_3$\uff0c\u6c38\u8fdc\u78b0\u4e0d\u5230$j_2$\u3002  \n\u5982\u679c\u662f\u4e0b\u51f8\u7684\u8bdd\uff0c$j_2$\u5c31\u6709\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u51b3\u7b56\u3002**  \n\u6211\u4eec\u77e5\u9053\u5bf9\u4e8e$f(x)$\uff0c\u8fde\u63a5$(x_1,f(x_1))$\u548c$(x_2,f(x_2))$\u76f4\u7ebf\u7684\u659c\u7387\u5c31\u662f$\\frac{f(x_2)-f(x_1)}{x_2-x_1}$\uff0c\u4fd7\u79f0\u201c\u7eb5\u51cf\u7eb5\u9664\u4ee5\u6a2a\u51cf\u6a2a\u201d\u3002  \n\u6240\u4ee5$j_2$\u6709\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u51b3\u7b56\u7684\u6761\u4ef6\u5c31\u662f\uff1a  \n$$\\frac{dp[j_2]-dp[j_1]}{sumf[j_2]-sumf[j_1]}<\\frac{dp[j_3]-dp[j_2]}{sumf[j_3]-sumf[j_2]}$$  \n\u4e5f\u5c31\u662f\u8bf4**\u6211\u4eec\u8981\u7ef4\u62a4\u4e00\u4e2a\u659c\u7387\u5355\u8c03\u9012\u589e\u7684\u4e0b\u51f8\u58f3**\u3002  \n\u7531\u4e8e$0\\leq j<i$\uff0c\u5f53$i$\u589e\u52a0\u65f6\uff0c\u5c31\u4f1a\u6709\u65b0\u7684\u51b3\u7b56\uff0c**\u5982\u679c\u6211\u4eec\u53ea\u4fdd\u7559\u8fde\u63a5\u76f8\u90bb\u4e24\u70b9\u659c\u7387\u5927\u4e8e$s+sumt[i]$\u7684\u90e8\u5206\uff0c\u90a3\u4e48\u6700\u5de6\u7aef\u7684\u5c31\u662f\u6700\u4f18\u51b3\u7b56\u3002**  \n\n### \u659c\u7387\u4f18\u5316\u5177\u4f53\u64cd\u4f5c  \n\u5efa\u7acb\u4e00\u4e2a\u5355\u8c03\u961f\u5217$q$\u3002  \n\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u53d8\u91cf$i$\uff1a  \n1. \u68c0\u67e5\u961f\u5934$q[l]$\u4e0e$q[l+1]$\uff0c\u5982\u679c$\\frac{dp[q[l+1]]-dp[q[l]]}{sumf[q[l+1]]-sumf[q[l]]}\\leq s+sumt[i]$\uff0c\u5c06$q[l]$\u51fa\u961f\uff0c\u7ee7\u7eed\u68c0\u67e5\u65b0\u961f\u5934\u3002  \n2. \u53d6\u961f\u5934$j=q[l]$\u4e3a\u6700\u4f18\u51b3\u7b56\uff0c\u8ba1\u7b97$dp[i]$\u3002  \n3. \u628a$i$\u63d2\u5165\u961f\u5c3e\uff0c\u5728\u63d2\u5165\u4e4b\u524d\uff0c\u82e5\u51b3\u7b56\u70b9$j_1=q[r-1],j_2=q[r],j_3=i$\u4e0d\u6ee1\u8db3\u659c\u7387\u5355\u8c03\u9012\u589e\uff0c\u5219\u628a$q[r]$\u51fa\u961f\uff0c\u7ee7\u7eed\u68c0\u67e5\u65b0\u961f\u5c3e\u3002  \n\n\u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u53d8\u6210\u4e86$\\mathcal O(n)$\u3002  \n\n### \u4ee3\u7801  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int size=1e6+9;\nint n,s;\nint sumt[size],sumf[size],dp[size];\nint l=1,r=1,q[size];\nint main(){\n\tios::sync_with_stdio(0);\n\tmemset(dp,0x3f,sizeof(dp));\n\tcin>>n>>s;\n\tfor(int i=1;i<=n;++i){\n\t\tint t,f;\n\t\tcin>>t>>f;\n\t\tsumt[i]=sumt[i-1]+t;\n\t\tsumf[i]=sumf[i-1]+f;\n\t}\n\tdp[0]=q[1]=0;\n\tfor(int i=1;i<=n;++i){\n\t\twhile(l<r&&dp[q[l+1]]-dp[q[l]]<=(s+sumt[i])*(sumf[q[l+1]]-sumf[q[l]])) l++;\n\t\tdp[i]=dp[q[l]]-(s+sumt[i])*sumf[q[l]]+sumt[i]*sumf[i]+s*sumf[n];\n\t\twhile(l<r&&(dp[q[r]]-dp[q[r-1]])*(sumf[i]-sumf[q[r]])>=(dp[i]-dp[q[r]])*(sumf[q[r]]-sumf[q[r-1]])) r--;\n\t\tq[++r]=i;\n\t}\n\tcout<<dp[n]<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1582728925,
        "uid": 223392,
        "name": "Belarus",
        "ccfLevel": 4,
        "title": "P2365\u659c\u7387\u4f18\u5316\u5b66\u4e60\u7b14\u8bb0"
    },
    {
        "content": "# \u7b97\u6cd5:\u659c\u7387\u4f18\u5316\u52a8\u6001\u89c4\u5212\n\n\u7531\u4e8e\u9898\u89e3\u91cc\u6ca1\u6709\u5173\u4e8e$t[i]<0$\u7684\u659c\u7387\u4f18\u5316\u505a\u6cd5,\u6211\u6253\u7b97\u5199\u4e00\u4e0b\u8fd9\u79cd**\u7279\u6b8a**\u7684\u659c\u7387\u4f18\u5316\u52a8\u6001\u89c4\u5212\n\n\u7531\u4e8e$t[i]$\u53ef\u4ee5**\u5c0f\u4e8e\u96f6**,\u6240\u4ee5\u659c\u7387$s+sumt[i]$**\u4e0d\u5177\u6709\u5355\u8c03\u6027**,\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u50cf\u539f\u6765\u4e00\u6837\u7ef4\u62a4\u4e0b\u51f8\u58f3\u3002\u6211\u4eec\u4e0d\u80fd\u53ea\u4fdd\u7559\u76f8\u90bb\u4e24\u70b9\u659c\u7387\u5927\u4e8e$s+sumt[i]$\u7684\u90e8\u5206,\u6211\u4eec\u8981\u628a**\u6574\u4e2a**\u4e0b\u51f8\u58f3\u90fd\u4fdd\u7559\u4e0b\u6765\u3002\u8fd9\u65f6\u961f\u9996\u4e5f\u5c31\u4e0d\u662f\u6700\u4f18\u89e3\u4e86\uff0c\u8981**\u4e8c\u5206**\u627e\u5230\u4e00\u4e2a\u5de6\u8fb9\u6bd4$s+sumt[i]$\u5c0f,\u53f3\u8fb9\u6bd4$s+sumt[i]$\u5927\u7684\u4f4d\u7f6e\u3002\u8fd9\u4e2a\u4f4d\u7f6e\u5c31\u662f\u7b54\u6848\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nconst int N=500005;\nint l,r,n,s,t,c,j,sumt[N],sumc[N],f[N],q[N];\nint find(int k)//\u4e8c\u5206\u67e5\u627e\u5de6\u8fb9\u6bd4$s+sumt[i]$\u5c0f,\u53f3\u8fb9\u6bd4$s+sumt[i]$\u5927\u7684\u4f4d\u7f6e\n{\n\tif(l==r)return q[l];\n\tint L=l,R=r;\n\twhile(L<R)\n\t{\n\t\tint mid=(L+R)/2;\n\t\tif(f[q[mid+1]]-f[q[mid]]<=k*(sumc[q[mid+1]]-sumc[q[mid]]))L=mid+1;\n\t\telse R=mid;\n\t}\n\treturn q[L];\n}\nsigned main()\n{\n\tscanf(\"%lld%lld\",&n,&s);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%lld%lld\",&t,&c);\n\t\tsumt[i]=sumt[i-1]+t;\n\t\tsumc[i]=sumc[i-1]+c;\n\t}\n\tl=r=1;q[1]=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint j=find(s+sumt[i]);//\u4e8c\u5206\u67e5\u627e\u7b54\u6848\n\t\tf[i]=f[j]+sumt[i]*(sumc[i]-sumc[j])+s*(sumc[n]-sumc[j]);\n\t\twhile(l<r&&(f[q[r]]-f[q[r-1]])*(sumc[i]-sumc[q[r]])>=\n\t\t(f[i]-f[q[r]])*(sumc[q[r]]-sumc[q[r-1]]))r--;//\u5982\u679c\u4e0d\u6784\u6210\u4e0b\u51f8\u58f3,\u5c31\u5220\u9664\u961f\u5c3e\n\t\tq[++r]=i;\n\t}\n\tcout<<f[n]<<endl;\n}\n```",
        "postTime": 1549194167,
        "uid": 39484,
        "name": "\u7c73\u5947",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "# \u5bf9\u4e8eDP\u65b0\u624b\u7684\u9898\u89e3\n------------\n\n~~**\u636e\u8bf4\u6b64\u9898\u8981\u7528\u5230\u659c\u7387\u4f18\u5316\uff0c\u4f46\u6211\u4e0d\u4f1a\u3002\u9003~**~~\n\n~~**\u4e0d\u7528\u659c\u7387\u4f18\u5316\u80fd\u505a\uff1f**~~\n\n**\u6570\u636e N<=5000**\n\n**\u8003\u8651O(n ^ 2)  dp**\n\n### **NO.1**\n  \n **\u8003\u8651\u6b63\u5411\u679a\u4e3e**\n  \n   \u5206\u6790\u5b8c\u9898\u76ee\u53ef\u77e5\uff0c\u540c\u4e00\u6279\u4efb\u52a1\u662f\u5728\u540c\u4e00\u65f6\u523b\u5b8c\u6210\u7684\u3002\n   \n   \u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u6c42\u51fa\u8d39\u7528\u7cfb\u6570Fi\u7684\u524d\u7f00\u548c\uff0c\u7528 \u4e00\u6279\u4efb\u52a1\u5b8c\u6210\u7684\u65f6\u523b*\u6b64\u6bb5\u7684\u8d39\u7528\u7cfb\u6570 \u5373\u4e3a\u6b64\u6bb5\u7684\u8d39\u7528\u3002\n   \n   \n   \u8bbedp[i] \u4e3a\u5b8c\u6210\u524di\u4e2a\u5355\u4e2a\u4efb\u52a1\u6700\u5c0f\u8d39\u7528\uff0c\u679a\u4e3e\u4e0a\u4e00\u4e2a\u65ad\u70b9\u7684\u4f4d\u7f6ej\n   \n   \u8f6c\u79fb\uff1a\n   \n   ```cpp\nfor(register int i=1;i<=n;i++)\n\t for(register int j=0;j<i;j++){\n\t  dp[i]=min(dp[i],dp[j]+(sumt[i]+s)*(sumf[i]-sumf[j]));\n\t } \n```\n   \u4e0d\u96be\u53d1\u73b0\uff0c\u524di\u4e2a\u4efb\u52a1\u5206\u6210\u51e0\u6bb5\u7684\u542f\u7528\u65f6\u95f4\u5177\u6709\u540e\u6548\u6027\u3002\n   \n   \u6b63\u5411\u5904\u7406\u540e\u6548\u6027\u7684\u65b9\u6cd5\u53c2\u7167\u5176\u4f59O\uff08n^2\uff09\u9898\u89e3\u5c31\u597d\u4e86\n \n###  **NO.2**\n   \n   \u8fd9\u91cc\u4ecb\u7ecd\u53e6\u4e00\u79cd\u65b9\u6cd5\n   \n   **~~\u6b63\u5411\u679a\u4e3e\u540e\u6548\u6027\u4e0d\u4f1a\u5904\u7406\uff0c\u600e\u4e48\u529e\uff1f\uff1f~~**\n   \n   \u65e2\u7136\u5177\u6709\u540e\u6548\u6027\uff0c\u4e0d\u59a8\u8003\u8651**\u5012\u7740\u679a\u4e3e\u3002**\n   \n   **\u5012\u7740Dp\uff0c\u540e\u6548\u6027\u5c31\u53ef\u4ee5\u5904\u7406\u4e86**\n   \n   \u540c\u6837\uff0c\u6211\u4eec\u6c42\u51fa\u8d39\u7528\u7cfb\u6570Fi\u7684\u540e\u7f00\u548c\uff0c\u65f6\u95f4\u7684\u540e\u7f00\u548c\u3002\n   \n   \u8bbedp[i] \u4e3a\u5b8c\u6210\u540ei\u4e2a\u5355\u4e2a\u4efb\u52a1\u7684\u6700\u5c0f\u8d39\u7528\uff0c\u679a\u4e3e\u65ad\u70b9\n   \n   \u8f6c\u79fb\uff1a\n   \n   ```cpp\nfor(register int i=n;i>=1;i--)\n\t for(register int j=i+1;j<=n+1;j++){\n\t \tint cost=sumf[i]*(s+sumt[i]-sumt[j]);\n\t \tdp[i]=min(dp[i],dp[j]+cost);\n\t } \n```\n   \n   cost\u662f\u7531\u5b8c\u6210\u6b64\u6bb5\u4efb\u52a1\u7684\u8d39\u7528\u548c(sumf[i]-sumf[j])*(s+sumt[i]-sumt[j])\uff0c\u548c\u6b64\u6bb5\u4efb\u52a1\u5bf9\u540e\u9762\u4ea7\u751f\u7684\u5f71\u54cd\u7684\u8d39\u7528\u548c\uff08sumf[j]\uff09*(s+sumt[i]-sumt[j])\u7684\u603b\u548c\n   \n   \u5373 **cost=sumf[i]*(s+sumt[i]-sumt[j])**;\n   \n   \u6b63\u786e\u6027\uff1a\n   \n   \u7531\u4e8e\u524d\u9762\u51e0\u6bb5\u90fd\u8fd8\u672a\u5b8c\u6210\uff0c\u6240\u4ee5\u6b64\u6bb5\u4e3a\u7b2c\u4e00\u6bb5\uff0c\u5219\u8d39\u7528\u7cfb\u6570\u4e3a(sumf[i]-sumf[j])\uff0c\u65f6\u95f4\u4e3a\u542f\u52a8\u65f6\u95f4+\u5b8c\u6210\u8fd9\u6bb5\u4efb\u52a1\u7684\u65f6\u95f4\u603b\u548c \u5373(s+sumt[i]-sumt[j])\u3002\n   \n   \u7531\u4e8e\u6b64\u6bb5\u9009\u4e86\uff0c\u6b64\u6bb5\u7684\u5b8c\u6210\u65f6\u95f4\u4f1a\u5bf9\u5df2\u5b8c\u6210\u7684\u4efb\u52a1\u4ea7\u751f\u8d21\u732e\uff0c\u8d21\u732e\u503c\u4e3a\uff08sumf[j]\uff09*(s+sumt[i]-sumt[j]).\n   \n   Code:\n   \n   ```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<queue>\n#include<algorithm> \nusing namespace std;\ninline int read(){\n    int x=0,f=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        if(ch=='-') f=-1;\n        ch=getchar();\n    }\n    while('0'<=ch&&ch<='9'){\n        x=x*10+ch-'0';\n        ch=getchar();\n    }\n    return x*f;\n}\nconst int N=5100;\nint n,s,t[N],f[N],sumf[N],dp[N],sumt[N];\nint main(){\n\tn=read();s=read();\n\tfor(register int i=1;i<=n;i++)\n\t t[i]=read(),f[i]=read();\n\tfor(register int i=n;i>=1;i--)\n\t sumt[i]=sumt[i+1]+t[i],\n\t sumf[i]=sumf[i+1]+f[i];\n\tmemset(dp,0x7f7f7f,sizeof(dp));\n\tdp[n+1]=0;\n\tfor(register int i=n;i>=1;i--)\n\t for(register int j=i+1;j<=n+1;j++){\n\t \tint cost=sumf[i]*(s+sumt[i]-sumt[j]);\n\t \tdp[i]=min(dp[i],dp[j]+cost);\n\t } \n\tcout<<dp[1]; \n\treturn 0;\n}\n```\n\n   \n  \n",
        "postTime": 1569633094,
        "uid": 96495,
        "name": "__Iron",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "## AC\u6b64\u9898\u4e09\u6b65\u8d70\n\n------------\n\n### \u7b2c\u4e00\u6b65\n\u8003\u8651\u6700\u57fa\u7840\u7684DP\n\n\u5148\u6c42\u51fa\u65f6\u95f4  _T_  \u7684\u524d\u7f00\u548c _ts_ \u548c\u8d39\u7528\u7cfb\u6570 _C_ \u7684\u524d\u7f00\u548c _fs_ \u3002\n\n\u8bbe _dp[i][j]_ \u8868\u793a\u628a\u5f53\u524d _i_ \u4e2a\u4efb\u52a1\u5206\u6210 _j_ \u6279\u6267\u884c\u7684\u6700\u5c0f\u8d39\u7528\uff0c\u5219\u7b2c _j_ \u6279\u4efb\u52a1\u5b8c\u6210\u7684\u65f6\u95f4\u5c31\u662f _j*S+ts[i]_ \u3002\u4ee5\u7b2c _j-1_ \u6279\u548c\u7b2c _j_ \u6279\u4efb\u52a1\u7684\u5206\u754c\u70b9\u4e3a _DP_ \u7684\u201c\u51b3\u7b56\u201d\uff0c\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a _dp[i][j]=min(dp[i][j],dp[k][j-1]+(s*j+ts[i])*(fs[i]-fs[k]));_ \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint t[5001],f[5001],ts[5001],fs[5001];//t[i]\u8868\u793a\u5f53\u524d\u4efb\u52a1\u6240\u9700\u7684\u65f6\u95f4T\uff0cf[i]\u8868\u793a\u5f53\u524d\u4efb\u52a1\u7684\u8d39\u7528\u7cfb\u6570C\uff0cts[i]\u548cfs[i]\u5206\u522b\u8868\u793a\u524d\u7f00\u548c \nint dp[5001][5001];//dp[i][j]\u8868\u793a\u7b2ci\u4e2a\u70b9\u548c\u7b2ci\u4e2a\u70b9\u4ee5\u524d\u5206\u6210j\u5757\u7684\u6700\u5c0f\u5316\u8d39 \nint ans=1<<30;//\u7b54\u6848 \nint main()\n{\n    int n,s;\n    scanf(\"%d%d\",&n,&s);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d%d\",&t[i],&f[i]);\n        ts[i]=ts[i-1]+t[i];\n        fs[i]=fs[i-1]+f[i];//\u524d\u7f00\u548c \n    }\n    memset(dp,0x3f,sizeof(dp));//\u8bbe\u6210\u6700\u5927\u503c \n    for(int i=1;i<=n;i++)\n        dp[i][1]=(ts[i]+s)*fs[i];//\u521d\u59cb\u5316 \n    for(int i=2;i<=n;i++)\n        for(int j=2;j<=i;j++)\n            for(int k=1;k<i;k++)\n                dp[i][j]=min(dp[i][j],dp[k][j-1]+(s*j+ts[i])*(fs[i]-fs[k]));//\u5f00\u59cb\u65e0\u8111DP \n    for(int i=1;i<=n;i++)\n        ans=min(ans,dp[n][i]);//\u6ce8\u610f\u5728\u6240\u6709dp[n][1~n]\u4e2d\u53d6\u6700\u5c0f\u503c \n    cout<<ans;//\u8f93\u51fa \n    return 0;\n}\n```\n##### \u2191\u65e0\u8111DP\n```cpp\n// luogu-judger-enable-o2 //\u6d1b\u8c37O2 \n#include<bits/stdc++.h>\n#pragma GCC optimize(2) //\u624b\u5f00O2\uff0c\u7384\u5b66\u4f18\u5316 \nusing namespace std;\nint t[5001],f[5001],ts[5001],fs[5001];\nunsigned int dp[5001][5001];//\u8bb0\u5f97\u4f7f\u7528unsigned int\uff0c\u5426\u5219\u4f1a\u7206\uff0clong long\u4f1a\u7206\u7a7a\u95f4\uff0c\u4e0d\u7528\u6323\u624e\u4e86\u5144dei~ \nunsigned int ans=1<<30;\nint main()\n{\n    int n,s;\n    scanf(\"%d%d\",&n,&s);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d%d\",&t[i],&f[i]);\n        ts[i]=ts[i-1]+t[i];\n        fs[i]=fs[i-1]+f[i];\n    }\n    memset(dp,0x3f,sizeof(dp));\n    for(int i=1;i<=n;i++)\n        dp[i][1]=(ts[i]+s)*fs[i];\n    for(int i=2;i<=n;i++)\n        for(int j=2;j<=i;j++)\n            for(int k=1;k<i;k++)\n                dp[i][j]=min(dp[i][j],dp[k][j-1]+(s*j+ts[i])*(fs[i]-fs[k]));\n    for(int i=1;i<=n;i++)\n        ans=min(ans,dp[n][i]);\n    printf(\"%d\",ans);\n    return 0;\n}\n```\n##### \u2191\u65e0\u8111\u4f18\u5316\u4e4b\u540e\u7684\u65e0\u8111DP\n#### \u65f6\u95f4\u590d\u6742\u5ea6O(n\u00b3)\u3002\n#### \u671f\u671b\u5f97\u5206\uff1a60\u5206\u3002\n#### \u6700\u7406\u60f3\u7684\u5206\uff08\u65e0\u8111\u4f18\u5316\uff09\uff1a80\u5206\u3002\n\n------------\n\n### \u7b2c\u4e8c\u6b65\n\u5ffd\u7136\u53d1\u73b0\u672c\u4f53\u6ca1\u6709\u89c4\u5b9a\u9700\u8981\u628a\u4efb\u52a1\u5206\u6210\u591a\u5c11\u6279\uff08O(\u2229_\u2229)O\u54c8\u54c8~\uff09\uff0c\u518d\u4e0a\u4e00\u4e2a\u63a5\u53d1\u4e2d\u4e4b\u6240\u4ee5\u9700\u8981\u6279\u6570 _j_ ,\u662f\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u77e5\u9053\u673a\u5668\u542f\u52a8\u4e86\u591a\u5c11\u6b21\uff0c\u4ee5\u8ba1\u7b97\u51fa\u6765\u6bcf\u6b21\u542f\u52a8\u9700\u8981\u7684\u65f6\u95f4 _S_ \u7684\u548c\uff0c\u4ece\u800c\u5176\u7b97\u51fa _i_ \u6240\u5728\u7684\u4e00\u6279\u4eba\u7269\u7684\u5b8c\u6210\u65f6\u523b\u3002\n\n\u4e8b\u5b9e\u4e0a\uff0c\u5728\u6267\u884c\u4e00\u6279\u4efb\u52a1\u65f6\uff0c\u6211\u4eec\u4e0d\u5bb9\u6613\u76f4\u63a5\u7684\u53ea\u5728\u6b64\u4e4b\u524d\u673a\u5668\u542f\u52a8\u8fc7\u591a\u5c11\u6b21\u3002\u4f46\u6211\u4eec\u77e5\u9053\uff0c\u673a\u5668\u56e0\u6267\u884c\u8fd9\u6279\u4efb\u52a1\u800c\u5212\u5206\u7684\u542f\u52a8\u65f6\u95f4 _S_ \uff0c\u4f1a\u7d2f\u52a0\u5230\u5728\u6b64\u4e4b\u540e\u6240\u6709\u4efb\u52a1\u7684\u5b8c\u6210\u65f6\u523b\u4e0a\u3002\n\n\u8bbe _dp[i]_ \u8868\u793a\u628a\u524d _i_ \u4e2a\u4efb\u52a1\u5206\u6210\u82e5\u5e72\u6279\u6267\u884c\u7684\u6700\u5c0f\u8d39\u7528\uff0c\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a _dp[i]=min(dp[i],dp[j]+ts[i]*(fs[i]-fs[j])+s*(fs[n]-fs[j]));_\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint ts[5001],fs[5001];\nunsigned long long dp[5001];//unsigned long long\u5e72\u8106\u70b9 \nint main()\n{\n    int n,s;\n    scanf(\"%d%d\",&n,&s);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d%d\",&ts[i],&fs[i]);\n        ts[i]+=ts[i-1];\n        fs[i]+=fs[i-1];\n        dp[i]=1<<30;\n    }\n    for(int i=1;i<=n;i++)\n    \tfor(int j=0;j<i;j++)\n    \t\tdp[i]=min(dp[i],dp[j]+ts[i]*(fs[i]-fs[j])+s*(fs[n]-fs[j]));//\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b \n    printf(\"%lld\",dp[n]);\n    return 0;\n}\n```\n##### \u2191\u4e0d\u7528\u4f18\u5316\u4e5f\u80fd\u8fc7\n#### \u65f6\u95f4\u590d\u6742\u5ea6\uff1aO(n\u00b2)\u3002\n#### \u671f\u671b\u5f97\u5206\uff1a\u6ee1\u5206\u3002\n\n------------\n\n### \u7b2c\u4e09\u6b65\n\u5927\u4f6c\uff1a\u8fd9\u9053\u9898\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u4ee5O(n)\u3002\n\n\u849f\u84bb\u7684\u6211\uff1a\u4e0d\u53ef\u80fd\uff0c\u5426\u5219\u6211\u5403\u2026\u2026\u771f\u9999\u2026\u2026\n\n\u9898\u76ee\u4e0d\u53d8\uff0c\u6570\u636e_1\u2264N\u22643*10^5,1\u2264S,Ti,Ci\u2264512_\uff0c\u4ec0\u4e48\uff1f\n\n#### \u8003\u8651\u659c\u7387\u4f18\u5316\n\u659c\u7387\u4f18\u5316\u4ec0\u4e48\u9b3c\uff1f\n\n\u697c\u4e0b\u5927\u4f6c\u6709\u8be6\u89e3\uff0c\u56e0\u4e3a\u6b64\u9898\u4e0d\u7528\u659c\u7387\u4f18\u5316\uff0c\u6240\u4ee5\u5728\u6b64\u672c\u849f\u84bb\u5c31\u4e0d\u505a\u8be6\u7ec6\u89e3\u91ca\u4e86QwQ~\n\n\u8d34\u4e2a\u4ee3\u7801\u518d\u8dd1\u5427~\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint ts[5001],fs[5001],que[5001];\nunsigned long long dp[5001];\nint main()\n{\n    int n,s;\n    scanf(\"%d%d\",&n,&s);\n    for(int i=1;i<=n;i++)\n    {\n        scanf(\"%d%d\",&ts[i],&fs[i]);\n        ts[i]+=ts[i-1];\n        fs[i]+=fs[i-1];\n        dp[i]=1<<30;\n    }\n    int head=1,tail=1;\n    for(int i=1;i<=n;i++)\n    {\n    \twhile(head<tail&&(dp[que[head+1]]-dp[que[head]])<=(s+ts[i])*(fs[que[head+1]]-fs[que[head]]))head++;\n    \tdp[i]=dp[que[head]]-(s+ts[i])*fs[que[head]]+ts[i]*fs[i]+s*fs[n];\n    \twhile(head<tail&&(dp[que[tail]]-dp[que[tail-1]])*(fs[i]-fs[que[tail]])>=(dp[i]-dp[que[tail]])*(fs[que[tail]]-fs[que[tail-1]]))tail--;\n    \tque[++tail]=i;\n    }\n    printf(\"%lld\",dp[n]);\n    return 0;\n}\n```\n#### \u65f6\u95f4\u590d\u6742\u5ea6O(n)\u3002\n#### \u671f\u671b\u5f97\u5206\uff1a\u6ee1\u5206\u3002\n\u611f\u8c22\u5404\u4f4d\u5927\uff08xue\uff09\u4f6c\uff08zhang\uff09~",
        "postTime": 1552544259,
        "uid": 93488,
        "name": "Porsche",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "# [P2365 \u4efb\u52a1\u5b89\u6392](https://www.luogu.org/problemnew/show/P2365)\n## \u7b97\u6cd5\uff1adp+\u659c\u7387\u4f18\u5316\n**\u9996\u5148\uff0c\u52a8\u6001\u89c4\u5212\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e0d\u96be\u5199\u51fa:**\n$f[i]=min(f[j]+time[i]*(\\sum_{k=j+1}^i{cost[k]})+S*(\\sum_{k=j+1}^ncost[k]))$  \n**\u53ef\u5199\u4f5c\uff1a**$f[i]=min(f[i],f[j]+tim[i]*(cost[i]-cost[j])+S*(cost[N]-cost[j]));$  \n**\u8fd9\u6837\u7684\u65b9\u7a0b\u662f$O(n^2)$\u7684\uff0c\u8db3\u4ee5\u901a\u8fc7\u6b64\u9898\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a**\n```\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\n#include<cstring>\nusing namespace std;\ntypedef long long LL;\nconst int MAXN=1024*5,INF=1024*1024*1024;\nint N,S,cost[MAXN],tim[MAXN]/**/,f[MAXN];\nint main(){\n    scanf(\"%d%d\",&N,&S);\n    for(int i=1;i<=N;i++){\n        scanf(\"%d%d\",&tim[i],&cost[i]);\n        tim[i]+=tim[i-1];\n        cost[i]+=cost[i-1];\n    }\n    for(int i=1;i<=N;i++){\n        f[i]=INF;\n        for(int j=0;j<i;j++){\n            f[i]=min(f[i],f[j]+tim[i]*(cost[i]-cost[j])+S*(cost[N]-cost[j]));\n        }\n    }\n    printf(\"%d\",f[N]);\n    return 0;\n}\n```\n---\n**\u4ed4\u7ec6\u89c2\u5bdf\u65b9\u7a0b\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u9053\u9898\u53ef\u4ee5\u659c\u7387\u4f18\u5316**  \n\u8bbe$f[i]$\u4e3a$f_i$,\u8bbe$\\sum_{k=1}^icost[i]$\u4e3a$s_i$,$k<j<i$\u3002\u5982\u679c\u8f6c\u79fbj\u6bd4\u8f6c\u79fbk\u66f4\u4f18\uff0c\u5219\n$\u2234f_j-t_i*(c_i-c_j)+S*(c_n-c_j)<f_k-t_i*(c_i-c_k)+S*(c_n-c_k)$\n$\u2234f_j-t_i*c_i-t_i*c_j+S*c_n-S*c_j<f_k-t_i*c_i-t_i*c_k+S*c_n-S*c_k$\n$\u2234f_j-t_i*c_j-S*c_j<f_k-t_i*c_k-S*c_k$  \n$\u2234f_j-c_j*(t_i+S)<f_k-c_k*(t_i+S)$  \n$\u2234f_j-f_k<(c_j-c_k)*(t_i+S)$  \n$\u2235c_j>c_k$\u5373 $c_j-c_k>0$  \n### $\u2234\\displaystyle\\frac{f_j-f_k}{c_j-c_k}<t_i+S$\u5373$j$\u5230$k$\u7684\u659c\u7387\u5c0f\u4e8e$t_i+S$\n### \u2234\u4ee5$c_i$\u4e3a\u6a2a\u8f74\uff0c$f_i$\u4e3a\u7eb5\u8f74\u5efa\u7acb\u5982\u56fe\u6240\u793a\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\uff0c\u7ef4\u62a4\u4e00\u4e2a\u4e0b\u51f8\u58f3\n![](https://cdn.luogu.com.cn/upload/pic/47722.png)\n### step1\uff1a\u6dd8\u6c70\u5b50\u95ee\u9898\u7ef4\u62a4\u961f\u5217\u65f6\uff0c\u5c06\u51f8\u58f3\u5de6\u7aef\u659c\u7387\u592a\u5c0f\u7684\u70b9\u5220\u9664\uff08\u7528$f=t_i+S$\u5207\u8fd9\u4e2a\u51f8\u58f3\uff09\uff0c\u6700\u5de6\u7aef\u70b9\u6839\u636e\u4e0a\u9762\u7684\u8bc1\u660e\u5373\u4e3a\u6700\u4f18\u5b50\u95ee\u9898\n### step2\uff1a\u7528\u539f\u65b9\u7a0b\u8f6c\u79fb\uff0c\u5f97\u5230$i$\u53f7\u70b9\u7684\u6a2a\u7eb5\u5750\u6807\n### step3\uff1a\u63d2\u5165$i$\u53f7\u70b9\uff0c\u7ef4\u62a4\u4e0b\u51f8\u58f3\uff08\u5982\u56fe\uff0c\u5728\u63d2\u5165$i$\u65f6\uff0c\u53d1\u73b0$i$\u7684\u659c\u7387\u5c0f\u4e8e$l$\uff0c\u5373$l$\u6ca1\u524d\u9014\uff0c\u76f4\u63a5\u5f39\u6389\uff09\n**\u5177\u4f53\u7ef4\u62a4\u65b9\u6cd5\u89c1\u4ee3\u7801\uff1a**\n```\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\n#include<cstring>\nusing namespace std;\ntypedef long long LL;\nconst int MAXN=1024*5,INF=1024*1024*1024;\nint N,S,cost[MAXN],tim[MAXN],f[MAXN];\nint dq[MAXN],L=1,R;\nint main() {\n    scanf(\"%d%d\",&N,&S);\n    for(int i=1; i<=N; i++) {\n        scanf(\"%d%d\",&tim[i],&cost[i]);\n        tim[i]+=tim[i-1];\n        cost[i]+=cost[i-1];\n    }\n    dq[++R]=0;\n    for(int i=1; i<=N; i++) {\n        while(L<R&&(f[dq[L+1]]-f[dq[L]])<=(tim[i]+S)*(cost[dq[L+1]]-cost[dq[L]])) {\n            L++;\n        }\n        f[i]=f[dq[L]]-cost[dq[L]]*(tim[i]+S)+tim[i]*cost[i]+S*cost[N];\n        while(L<R&&(f[dq[R]]-f[dq[R-1]])*(cost[i]-cost[dq[R]])\n                >=(f[i]-f[dq[R]])*(cost[dq[R]]-cost[dq[R-1]])) {\n            R--;\n        }\n        dq[++R]=i;\n    }\n    printf(\"%d\",f[N]);\n    return 0;\n}\n```",
        "postTime": 1545545528,
        "uid": 70252,
        "name": "guoshaoyang",
        "ccfLevel": 0,
        "title": "P2365 \u4efb\u52a1\u5b89\u6392"
    },
    {
        "content": "## \u3010\u5b66\u4e60\u7b14\u8bb0\u3011\u659c\u7387\u4f18\u5316\n\n\u52a0\u5f3a\u7248 [[SDOI2012\\]\u4efb\u52a1\u5b89\u6392](https://lydsy.com/JudgeOnline/problem.php?id=2726)\n\n\u659c\u7387\u4f18\u5316\u5165\u95e8\u9898\uff1a\n\n\u8bbe$f(x)$\u4e3a$F(x)$\u7684**\u540e**\u7f00\u548c\uff0c$t(x)$\u4e3a$T(x)$\u7684\u524d\u7f00\u548c\u3002$dp(i)$\u8868\u793a\u5b8c\u6210\u5230\u7b2c$i$\u4efb\u52a1\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u8f6c\u79fb\uff1a\n\n$dp(i)=\\min \\{dp(j) +f(j+1)\\times(S+t(i)-t(j)) \\}$\n\n\u62c6\u6389\uff1a\n\n- \u548c$j$\u65e0\u5173: \u6ca1\u6709\n- \u53ea\u548c$j$\u76f8\u5173:$dp(j)+f(j+1)\\times(S-t(j))$ \n- \u548c$i,j$\u76f8\u5173:$f(j+1)\\times t(i)$ \n\n\u6211\u4eec\u53d1\u73b0\u53ea\u548c$j$\u76f8\u5173\u7684\u53ef\u4ee5\u76f4\u63a5\u9884\u5904\u7406\uff0c\u73b0\u5728\u7684\u95ee\u9898\u662f\u786e\u5b9a\u4e86$i$\u5982\u4f55\u5feb\u901f\u627e\u5230\u4e00\u4e2a$j$\n\n\u4ee4$y_j=dp(j)+f(j+1)\\times(S-t(j))$\uff0c$x_j=f(j+1)$\uff0c\u539f\u5f0f\u53ef\u4ee5\u5199\u6210\uff1a\n$$\ndp(i)= y_j+x_jt(i)\n$$\n\n\n\u8f6c\u6362\u4e00\u4e0b\u5f0f\u5b50\n$$\ny_j=-t(i)x_j+dp(i)\n$$\n\n\n\u73b0\u5728\u95ee\u9898\u5c31\u53d8\u6210\u4e86\u786e\u5b9a\u4e86\u4e00\u4e2a$i$\uff0c\u8981\u5feb\u901f\u67e5\u8be2\u524d\u9762\u7684\u4e00\u4e2a$j$\u4f7f\u5f97$dp(i)$\u6700\u5c0f\n\n\u628a\u8fd9\u4e2a\u4e1c\u897f\u770b\u6210\u4e00\u6761\u76f4\u7ebf\uff0c\u5c31\u53d8\u6210\u4e86\u6211\u6709\u4e00\u6761\u5728\u5e73\u9762\u4e0a\u5e73\u79fb\u7684\u659c\u7387\u4e3a$-t(i)$\u7684\u76f4\u7ebf\uff0c\u73b0\u5728\u8981\u627e\u4e00\u4e2a\u70b9$(x_j,y_j)$\u4f7f\u5f97**\u8fc7\u8fd9\u4e2a\u70b9**\u7684\u659c\u7387\u4e3a$-t(i)$\u7684\u76f4\u7ebf\u7684**\u622a\u8ddd**\u5c3d\u91cf\u5c0f\u3002\n\n![\u659c\u7387\u4f18\u5316](https://cdn.luogu.com.cn/upload/pic/60540.png)\n\n> \u84dd\u7ebf:\u659c\u7387\u4e3a$-t(i)$\u7684\u7ebf\n>\n> \u7d2b\u70b9:$(x_j,y_j)$ \n\n\u5f88\u660e\u663e\uff0c\u53ef\u4ee5\u770b\u505a\u6709\u4e00\u6761\u5728$y$\u8d1f\u534a\u8f74\u65e0\u9650\u8fdc\u5904\u6709\u4e00\u6761\u76f4\u7ebf\u6162\u6162\u4e0a\u79fb(\u622a\u8ddd\u6162\u6162\u53d8\u5927)\uff0c\u8fd9\u6761\u76f4\u7ebf\u7a81\u7136\u7ecf\u8fc7\u4e00\u4e2a\u6211\u4eec\u96c6\u5408\u5185\u7684\u70b9\u65f6\uff0c\u5b83\u6b64\u65f6\u7684\u622a\u8ddd\u5c31\u662f\u6700\u5c0f\u7684\u622a\u8ddd\u3002\u5f88\u663e\u7136\uff0c\u8fd9\u4e2a\u70b9\u4e00\u5b9a\u5728\u51f8\u5305\u4e0a\u9762\uff0c\u800c\u4e14\u8fd9\u4e2a\u70b9\u5de6\u53f3\u4e24\u8fb9\u7684\u659c\u7387\u4e00\u5b9a\u662f\u5de6\u8fb9\u66f4\u5c0f\uff0c\u53f3\u8fb9\u66f4\u5927(\u659c\u7387\u662f\u8d1f\u6570)\u3002\n\n\u52a8\u6001\u7ef4\u62a4\u4e00\u4e0b\u51f8\u5305\u5c31\u597d\u4e86\u3002\n\n```cpp\n//@winlere\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;  typedef long long ll;\ninline int qr(){\n      register int ret=0,f=0;\n      register char c=getchar();\n      while(c<48||c>57)f|=c==45,c=getchar();\n      while(c>=48&&c<=57) ret=ret*10+c-48,c=getchar();\n      return f?-ret:ret;\n}\nint n,s;\nconst int maxn=3e5+5;\nint Ti[maxn],Fi[maxn];\nll st[maxn],sf[maxn];\nll x[maxn],y[maxn],q[maxn],dp[maxn];\nint cnt;\n\ninline ll getval(const int&i,const int&j){\n      return dp[j]+sf[j+1]*(s+st[i]-st[j]);\n}\n\ninline bool chek0(const int&i,const int&j,const ll&k){\n      return (long double)1.0*((y[i]+dp[i])-(y[j]+dp[j]))*(x[i]-x[k])<=(long double)1.0*((y[i]+dp[i])-(y[k]+dp[k]))*(x[i]-x[j]);\n}\n\ninline bool chek(const int&i,const int&j,const ll&k){\n      return (long double)1.0*(y[i]+dp[i])-(y[j]+dp[j])<=(long double)1.0*k*(x[i]-x[j]);\n}\n\ninline int lookup(const ll&k){\n      register int l=1,r=cnt-1,ret=cnt,mid;\n      while(l<=r){\n\t    mid=(l+r)>>1;\n\t    if(chek(q[mid],q[mid+1],k))\n\t\t  r=mid-1,ret=mid;\n\t    else l=mid+1;\n      }\n      return q[ret];\n}\nint main(){\n      \n      n=qr();s=qr();\n      for(register int t=1;t<=n;++t)\n\t    Ti[t]=qr(),Fi[t]=qr(),st[t]=st[t-1]+Ti[t];\n      for(register int t=n;t>=0;--t) sf[t]=sf[t+1]+Fi[t];\n      for(register int t=0;t<=n;++t) y[t]=sf[t+1]*(s-st[t]),x[t]=sf[t+1];\n      q[cnt=1]=0;\n      for(register int t=1;t<=n;++t){\n\t    dp[t]=getval(t,lookup(-st[t]));\n\t    while(cnt>1&&chek0(q[cnt-1],q[cnt],t)) --cnt;\n\t    q[++cnt]=t;\n      }\n      cout<<dp[n]<<endl;\n      return 0;\n}\n\n\n```\n\n\u53c2\u8003\u6587\u732e\uff1a\n\n[\u74e6\u52aa\u970d\u683c\u6728\u8328\u683c\u5170\u82ac\u591a\u795e\u5a01\u65e0\u654c\u65e0\u53cc\u8d85\u795e\u5927\u805a\u805ayyb\u7684\u535a\u5ba2](<https://www.cnblogs.com/cjyyb/p/10549560.html>)\n\n",
        "postTime": 1560082130,
        "uid": 113460,
        "name": "\u8c01\u662f\u9e3d\u738b",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "\n\u4e00\u9053\u659c\u7387\u4f18\u5316\u7684dp\n\n\u6613\u5f97\u65b9\u7a0b$f[j]=(S+t[i])\\times c[j]+f[i]-t[i]\\times c[i]+s\\times c[n]$,\u4e3a\u4ec0\u4e48\u8981\u5199\u6210\u8fd9\u8981\uff0c\u56e0\u4e3a\u8fd9\u6837\u5176\u5b9e\u5c31\u53ef\u4ee5\u5c06$min$\u62c6\u6389\uff0c\u5e76\u4e14\u662f\u4e00\u4e2a\u51fd\u6570\u5f62\u5f0f\uff0c$(S+t[i])$\u4e3a\u659c\u7387\uff0c$f[i]-t[i]\\times c[i]+s\\times c[n]$\u4e3a\u622a\u8ddd\u3002\n\n\u5e76\u4e14\u5f53\u6211\u4eec\u8981\u51b3\u7b56$i$\u7528\u54ea\u4e00\u4e2aj\u65f6\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u659c\u7387\u662f\u4e00\u6837\u7684,\u5c31\u53ea\u6709\u622a\u8ddd\u4f1a\u4e0d\u540c\u3002\u6240\u4ee5\u6211\u4eec\u8981\u8ba9\u622a\u8ddd\u8d8a\u77ed\u3002\n\n\u6240\u4ee5\u53d1\u73b0\u5f53\u659c\u7387\u4e3a\u4e0a\u5347\u65f6\uff0c\u5373\u4e3a\u4e0b\u51f8\u58f3\u7684\u5f62\u5f0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u53bb\u4f18\u5316\n\n\u4f46\u662f$t$\u6709\u53ef\u80fd\u662f\u8d1f\u6570\uff0c\u6211\u4eec\u5c06\u7ebf\u8fdb\u884c\u5e73\u79fb\u7684\u65f6\u5019\u8981\u4fdd\u8bc1\u6b64\u70b9\u4e4b\u524d\u7684\u659c\u7387\u90fd\u5c0f\u4e8e$k$,\u4e4b\u540e\u5168\u5927\u4e8e$k$,\u6240\u4ee5\u9700\u8981\u4e8c\u5206\u627e\u5230\u6b64\u533a\u95f4\n\n20181216 update:\n\n\u4e3a\u4ec0\u4e48\u5f53\u622a\u8ddd\u6700\u77ed\u662f\u4f1a\u53d6\u5230$min{f[i]}$,\u56e0\u4e3a$f[i]-t[i]\\times c[i]+s\\times c[n]$\u8fd9\u4e2a\u5f0f\u5b50\u4e2d$-t[i]\\times c[i]+s\\times c[n]$\u662f\u5b9a\u503c\uff0c\u800c\u53c8\u56e0\u4e3a$f[i]$\u662f$+f[i]$\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u7ef4\u62a4\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n\u4f46\u5f53\u622a\u8ddd\u51fa\u73b0$-f[i]$\u65f6\uff0c\u5c31\u5fc5\u987b\u8ba9\u622a\u8ddd\u6700\u5927\u4e86\uff0c\u8981\u7ef4\u62a4\u7684\u662f\u4e00\u4e2a\u4e0a\u51f8\u58f3\u3002\n```\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\n#include<climits>\n#define int long long\nusing namespace std;\ninline int read(){\n    int f=1,ans=0;char c=getchar();\n    while(c<'0'||c>'9'){if(c=='-')f=-1;c=getchar();}\n    while(c>='0'&&c<='9'){ans=ans*10+c-'0';c=getchar();}\n    return f*ans;\n}\nconst int N=300001;\nint l,r,num[N];\nint f[N],t[N],c[N],S,n,que[N];\nint query(int pos,int X){\n    int L=l,R=r,maxn=0;\n    int mid;\n    while(L<=R){\n        mid=L+R>>1;\n        if(f[que[mid+1]]-f[que[mid]]<=X*(c[que[mid+1]]-c[que[mid]])) L=mid+1,maxn=max(maxn,mid);\n        else R=mid-1;\n    }\n    return que[maxn+1];\n}\nsigned main(){\n    n=read(),S=read();\n    for(int i=1;i<=n;i++) t[i]=t[i-1]+read(),c[i]=c[i-1]+read();\n    l=1,r=1;f[0]=0;\n    for(int i=1;i<=n;i++){\n        int H=query(i,S+t[i]);\n        f[i]=f[H]-(S+t[i])*c[H]+t[i]*c[i]+S*c[n];\n        while(l<r&&(f[que[r]]-f[que[r-1]])*(c[i]-c[que[r]])>=(f[i]-f[que[r]])*(c[que[r]]-c[que[r-1]])) r--;\n        que[++r]=i;\n    }printf(\"%lld\\n\",f[n]);\n    return 0;\n}\n```",
        "postTime": 1546008314,
        "uid": 87382,
        "name": "_sry",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    },
    {
        "content": "\u5355\u8c03\u961f\u5217\u4f18\u5316DP\uff0c\u53ef\u4ee5\u505a\u5230On\n\n\u00b7\u00b7\u00b7\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\nint f[5001],t[5001],que[5001],dp[5001];\nint hd,tl,n,s;\nint main()\n{\n    scanf(\"%d%d\",&n,&s);\n    for (int i=1;i<=n;++i)\n    {\n        scanf(\"%d%d\",&t[i],&f[i]);\n        t[i]+=t[i-1];\n        f[i]+=f[i-1];\n    }\n    memset(dp,0x3f,sizeof dp);\n    dp[0]=0;hd=0;tl=0;\n    que[hd]=0;\n    for (int i=1;i<=n;++i)\n    {\n        while(hd<tl&&dp[que[hd+1]]-dp[que[hd]]<=(s+t[i])*(f[que[hd+1]]-f[que[hd]])) hd++;\n        dp[i]=min(dp[i],dp[que[hd]]+(f[i]-f[que[hd]])*t[i]+s*(f[n]-f[que[hd]]));\n        while(hd<tl&&(dp[i]-dp[que[tl]])*(f[que[tl]]-f[que[tl-1]])<=(dp[que[tl]]-dp[que[tl-1]])*(f[i]-f[que[tl]])) tl--;\n        que[++tl]=i;\n    }\n    printf(\"%d\\n\",dp[n]);\n}\n\u00b7\u00b7\u00b7\n```",
        "postTime": 1475330836,
        "uid": 23943,
        "name": "Orion_Rigel",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2365 \u3010\u4efb\u52a1\u5b89\u6392\u3011"
    }
]
[
    {
        "content": "\u9898\u610f\u9996\u5148\u53ef\u4ee5\u8f6c\u5316\u4e3a\u6c42\u7b1b\u5361\u5c14\u6811\u4e0a\u5927\u5c0f\u4e3a $4$ \u7684\u8fde\u901a\u5757\u4e2a\u6570\uff08\u5bf9\u5e94\u516d\u5143\u73af\u7684\u516d\u4e2a\u70b9\u4e3a\u8fd9\u56db\u4e2a\u70b9\u548c\u6700\u4e0a\u9762\u8282\u70b9\u4ee3\u8868\u533a\u95f4\u7684\u53f3\u7aef\u70b9 $+1$\uff0c\u5de6\u7aef\u70b9 $-1$\uff09\uff0c\u4f46\u4e0d\u80fd\u5305\u542b\u6839\u8282\u70b9\uff08\u516d\u5143\u73af\u4e0d\u5305\u542b $0$\uff0c$n+1$\uff09\uff0c\u7528\u4e00\u4e2a\u7b80\u5355\u7684 dp \u6c42\u89e3\u5c31\u884c\u4e86\u3002\n\n\u4fee\u6539\u64cd\u4f5c\u4f53\u73b0\u5728\u7b1b\u5361\u5c14\u6811\u4e0a\u5176\u5b9e\u5c31\u662f\u4e0a\u65cb\uff0c\u5bb9\u6613\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e00\u6761\u65b9\u5411\u76f8\u540c\u7684\u94fe\uff0c\u4e00\u4e2a\u70b9\u4e0a\u65cb\u5230\u94fe\u9876\u53ea\u4f1a\u4ea7\u751f $O(1)$ \u7684\u7236\u5b50\u5173\u7cfb\u6539\u53d8\uff0c\u4e5f\u53ea\u4f1a\u4ea7\u751f $O(1)$ \u7684 dp \u6570\u7ec4\u7684\u6539\u53d8\u3002\n\n\u6240\u4ee5\u76f4\u63a5\u7528 LCT \u53bb\u7ef4\u62a4\u5c31\u884c\u4e86\u3002\n\n\u6838\u5fc3\u4ee3\u7801\uff1a\n\n```cpp\ninline void upd(int x,int val){\n\tint l=ch[x][0],r=ch[x][1];\n\tcut(x,l),cut(x,r);\n\tv[x]+=val;\n\twhile(fa[x]&&cmp(x,fa[x])){\n\t\tsplay(x);\n\t\tif(s[x][0]){\n\t\t\tint fat=findnxt(x),h=fa[x];\n\t\t\tcut(h,x);\n\t\t\tif(d[x])link(h,l),l=fat;\n\t\t\telse link(h,r),r=fat;\n\t\t\tif(fa[fat]){\n\t\t\t\tint g=fa[fat];\n\t\t\t\tcut(g,fat),link(g,x);\n\t\t\t}\n\t\t}else{\n\t\t\tint fat=fa[x];\n\t\t\tcut(fat,x);\n\t\t\tif(d[x])link(fat,l),l=fat;\n\t\t\telse link(fat,r),r=fat;\n\t\t\tif(fa[fat]){\n\t\t\t\tint g=fa[fat];\n\t\t\t\tcut(g,fat),link(g,x);\n\t\t\t}\n\t\t}\n\t}\n\tlink(x,l),link(x,r);\n\tif(!fa[x]) rt=x;\n}\n```",
        "postTime": 1625579533,
        "uid": 55707,
        "name": "gxy001",
        "ccfLevel": 9,
        "title": "[Ynoi2010] Worst Case Top Tree"
    }
]
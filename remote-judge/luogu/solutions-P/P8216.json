[
    {
        "content": "## Preface\n\n\u96be\u70b9\uff1a\u53d1\u73b0\u8fd9\u662f\u4e00\u9053\u53ef\u505a\u9898\u3002\n\n## Analysis\n\n\u9898\u610f\u5f88\u7b80\u5355\uff0c\u7ed9\u4f60\u4e00\u4e9b**\u6a2a\u5e73\u7ad6\u76f4**\u7684\u7ebf\u6bb5\uff0c\u95ee\u4f60\u80fd\u5426\u7528\u5979\u4eec\u62fc\u51fa\u4e92\u4e0d\u76f8\u4ea4\u7684\u4e94\u4e2a\u5b57\u6bcd\uff1a$\\texttt{T H U P C}$\u3002\n\n\u9996\u5148\u8003\u8651\u5c06\u7ed9\u7684 $n$ \u6761\u7ebf\u6bb5\u5408\u5e76\u3002\u5177\u4f53\u5730\uff0c\u5c06\u4e24\u6761\u6216\u66f4\u591a\u6761 $x$\uff08\u5bf9\u4e8e\u7ad6\u7ebf\uff09 \u6216 $y$\uff08\u5bf9\u4e8e\u6a2a\u7ebf\uff09\u76f8\u540c\uff0c\u4e14\u76f8\u4ea4\u7684\u7ebf\u6bb5\u5408\u5e76\u6210\u4e00\u6761\u66f4\u5927\u7684\u7ebf\u6bb5\u3002\u8fd9\u6837\uff0c\u5982\u679c\u7b54\u6848\u662f `Yes`\uff0c\u90a3\u4e48\u6a2a\u7ebf\u6bb5\u6570\u91cf\u4e00\u5b9a\u662f $7$\uff0c\u7ad6\u7ebf\u6bb5\u6570\u91cf\u4e00\u5b9a\u662f $8$\u3002\u5982\u679c\u4e0d\u6ee1\u8db3\u8be5\u6761\u4ef6\uff0c\u5219\u4e3a `No`\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u53ea\u5269\u6a2a\u7ad6\u5171 $15$ \u6761\u7ebf\u6bb5\u4e86\u3002\u6211\u4eec\u7528 Dfs \u5373\u53ef\u8f7b\u677e\u5c06\u8fde\u901a\u5757\u6c42\u51fa\uff08\u67d3\u8272\uff09\u3002\u5982\u679c\u8fde\u901a\u5757\u6570\u91cf\u4e0d\u4e3a $5$\uff0c\u5219\u7b54\u6848\u4e3a `No`\u3002\n\n\u6700\u540e\uff0c\u6211\u4eec\u5bf9 $5$ \u4e2a\u8fde\u901a\u5757\u5206\u522b\u66b4\u529b\u5224\u65ad\u662f\u5426\u4e3a $\\texttt{T H U P C}$ \u4e2d\u7684\u4e00\u4e2a\uff0c\u5e76\u5224\u65ad $5$ \u4e2a\u8fde\u901a\u5757\u662f\u5426\u5206\u522b\u662f $\\texttt{T H U P C}$\u3002\u5982\u679c\u662f\uff0c\u5219\u7b54\u6848\u4e3a `Yes`\uff0c\u5426\u5219\u4e3a `No`\u3002\n\n\u603b\u4f53\u601d\u8def\u4e0d\u7528\u52a8\u8111\u5b50\uff0c\u4f46\u662f\u4ee3\u7801\u6253\u8d77\u6765\u5f88\u70e7\u5934\u53d1\uff08~~\u5c24\u5176\u662f\u5728\u6e38\u620f\u58f0\u4e2d~~\uff09\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u770b\u4ee3\u7801\u3002\n\n## Code\n\n**Talk is cheap, show me the code.**\n\n$842$ ms\uff0c$16.64$ MB\u3002\n\n```cpp\n// And in that light, I find deliverance.\n#define int long long\nint n,litot=0,rotot=0,tot=0;\nstruct node{\n\tint x,l,r,col;\n\tbool operator<(const node &p)const{\n\t\treturn x<p.x;\n\t}\n}line[100010],row[100010];\nmap<int,vector<pii> > li,ro;\nvoid dfs(int now,int type){\n\tif(type==0) line[now].col=tot;\n\telse row[now].col=tot;\n\tif(type==1){\n\t\tFor(i,1,7) if(!line[i].col){\n\t\t\tif(row[now].l<=line[i].x&&line[i].x<=row[now].r&&line[i].l<=row[now].x&&row[now].x<=line[i].r) dfs(i,0);\n\t\t}\n\t}else{\n\t\tFor(i,1,8) if(!row[i].col){\n\t\t\tif(line[now].l<=row[i].x&&row[i].x<=line[now].r&&row[i].l<=line[now].x&&line[now].x<=row[i].r) dfs(i,1);\n\t\t}\n\t}\n}\nvector<node> heng,shu;\nbool cT(int id){\n\theng.clear(),shu.clear();\n\tint cnt=0;\n\tFor(i,1,7) if(line[i].col==id) cnt++,heng.pb(line[i]);\n\tFor(i,1,8) if(row[i].col==id) cnt++,shu.pb(row[i]);\n\tif(!(heng.size()==1&&shu.size()==1)) return 0;\n\tif(heng[0].l<shu[0].x&&shu[0].x<heng[0].r&&shu[0].r==heng[0].x) return 1;\n\treturn 0;\n}\nbool cH(int id){\n\theng.clear(),shu.clear();\n\tint cnt=0;\n\tFor(i,1,7) if(line[i].col==id) cnt++,heng.pb(line[i]);\n\tFor(i,1,8) if(row[i].col==id) cnt++,shu.pb(row[i]);\n\tif(!(heng.size()==1&&shu.size()==2)) return 0;\n\tsort(shu.begin(),shu.end());\n\tif(shu[0].x==heng[0].l&&heng[0].r==shu[1].x&&shu[0].l==shu[1].l&&shu[0].r==shu[1].r&&shu[0].r>heng[0].x&&heng[0].x>shu[0].l) return 1;\n\treturn 0;\n}\nbool cU(int id){\n\theng.clear(),shu.clear();\n\tint cnt=0;\n\tFor(i,1,7) if(line[i].col==id) cnt++,heng.pb(line[i]);\n\tFor(i,1,8) if(row[i].col==id) cnt++,shu.pb(row[i]);\n\tif(!(heng.size()==1&&shu.size()==2)) return 0;\n\tsort(shu.begin(),shu.end());\n\tif(shu[0].x==heng[0].l&&heng[0].r==shu[1].x&&shu[0].l==shu[1].l&&shu[0].r==shu[1].r&&shu[0].r>heng[0].x&&heng[0].x==shu[0].l) return 1;\n\treturn 0;\n}\nbool cP(int id){\n\theng.clear(),shu.clear();\n\tint cnt=0;\n\tFor(i,1,7) if(line[i].col==id) cnt++,heng.pb(line[i]);\n\tFor(i,1,8) if(row[i].col==id) cnt++,shu.pb(row[i]);\n\tif(!(heng.size()==2&&shu.size()==2)) return 0;\n\tsort(shu.begin(),shu.end());\n\tsort(heng.begin(),heng.end());\n\tif(heng[0].l==heng[1].l&&heng[0].r==heng[1].r&&shu[0].r==shu[1].r&&shu[0].l<shu[1].l&&heng[0].l==shu[0].x&&heng[0].r==shu[1].x&&heng[1].x==shu[1].r&&heng[0].x==shu[1].l&&heng[1].x==shu[0].r) return 1;\n\treturn 0;\n}\nbool cC(int id){\n\theng.clear(),shu.clear();\n\tint cnt=0;\n\tFor(i,1,7) if(line[i].col==id) cnt++,heng.pb(line[i]);\n\tFor(i,1,8) if(row[i].col==id) cnt++,shu.pb(row[i]);\n\tif(!(heng.size()==2&&shu.size()==1)) return 0;\n\tsort(heng.begin(),heng.end());\n\tif(heng[0].l==heng[1].l&&heng[0].r==heng[1].r&&heng[0].x==shu[0].l&&heng[1].x==shu[0].r&&shu[0].x==heng[0].l) return 1;\n\treturn 0;\n}\nsigned main(){\n\tread(n);\n\tFor(i,1,n){\n\t\tint op,l,r,x;\n\t\tread(op,l,r,x);\n\t\tif(op==0) li[x].eb(min(l,r),max(l,r));\n\t\telse ro[x].eb(min(l,r),max(l,r));\n\t}\n\tfor(auto p:li){\n\t\tvector<pii> tmp=p.sec;\n\t\tint x=p.fir;\n\t\tsort(tmp.begin(),tmp.end());\n\t\tint l=-1e16,r=-1e16;\n\t\tfor(auto now:tmp){\n\t\t\tif(now.fir<=r) ckmax(r,now.sec);\n\t\t\telse{\n\t\t\t\tif(l!=-1e16){\n\t\t\t\t\tlitot++;\n\t\t\t\t\tline[litot]=(node){x,l,r};\n\t\t\t\t}\n\t\t\t\tl=now.fir,r=now.sec;\n\t\t\t}\n\t\t}\n\t\tif(l!=-1e16){\n\t\t\tlitot++;\n\t\t\tline[litot]=(node){x,l,r};\n\t\t}\n\t}\n\tfor(auto p:ro){\n\t\tvector<pii> tmp=p.sec;\n\t\tint x=p.fir;\n\t\tsort(tmp.begin(),tmp.end());\n\t\tint l=-1e16,r=-1e16;\n\t\tfor(auto now:tmp){\n\t\t\tif(now.fir<=r) ckmax(r,now.sec);\n\t\t\telse{\n\t\t\t\tif(l!=-1e16){\n\t\t\t\t\trotot++;\n\t\t\t\t\trow[rotot]=(node){x,l,r};\n\t\t\t\t}\n\t\t\t\tl=now.fir,r=now.sec;\n\t\t\t}\n\t\t}\n\t\tif(l!=-1e16){\n\t\t\trotot++;\n\t\t\trow[rotot]=(node){x,l,r};\n\t\t}\n\t}\n\tif(litot!=7) {puts(\"No\");return 0;}\n\tif(rotot!=8) {puts(\"No\");return 0;}\n\tFor(i,1,7) line[i].col=0;\n\tFor(i,1,8) row[i].col=0;\n\tFor(i,1,7) if(!line[i].col){\n\t\ttot++;\n\t\tdfs(i,0);\n\t}\n\tFor(i,1,8) if(!row[i].col) {puts(\"No\");return 0;}\n\tif(tot!=5) {puts(\"No\");return 0;}\n\tbool T=0,H=0,U=0,P=0,C=0;\n\tFor(i,1,5){\n\t\tif(cT(i)&&!T) T=1;\n\t\telse if(cH(i)&&!H) H=1;\n\t\telse if(cU(i)&&!U) U=1;\n\t\telse if(cP(i)&&!P) P=1;\n\t\telse if(cC(i)&&!C) C=1;\n\t\telse {puts(\"No\");return 0;}\n\t}\n\tputs(\"Yes\");\n}\n```\n\n## Postscript\n\n\u8003\u573a\u4e0a\u6700\u540e $2$ hour \u4e24\u4f4d\u961f\u53cb\u8bf4\u90fd\u8d21\u732e\u4e86 AC \u4e8e\u662f\u5f00\u59cb\u9893\u5e9f\uff0c\u849f\u84bb\u5728\u6700\u540e $40$ min \u53d1\u73b0\u4e86\u8fd9\u9053\u53ef\u505a\u7684\u6076\u5fc3\u9898\uff0c\u4e8e\u662f\u5f00\u59cb\u5728\u65c1\u8fb9\u4e24\u4f4d\u7684\u6cf0\u62c9\u6e38\u620f\u58f0\u4e2d\u5199\u4ee3\u7801\u3002\u8d5b\u540e $2$ min \u8c03\u5b8c\u4e86\u4ee3\u7801\uff0c\u4ea4\u4e0d\u4e0a\u53bb\u4e86\u3002$5$ \u5929\u540e\uff0c\u6570\u636e\u51fa\u6765\u4e86\uff0cAC\u3002\u4e0d\u514d\u6709\u4e9b\u9057\u61be\uff0c\u5bf9\u4e8e\u4e00\u652f\u521d\u4e2d\u961f\u4f0d\uff0crank $200$ \u5185\u5916\u5dee\u8ddd\u8fd8\u662f\u5f88\u5927\u7684\u3002\u4f5c\u6b64\u7bc7\uff0c\u517c~~\u53d1\u6cc4\u60c5\u7eea~~\u7eaa\u5ff5\u3002",
        "postTime": 1647511633,
        "uid": 169574,
        "name": "Enucai",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P8216 \u3010[THUPC2022 \u521d\u8d5b] \u753b\u56fe\u3011"
    },
    {
        "content": "\u5927\u6a21\u62df\uff0c\u5e94\u8be5\u8fd8\u7b97\u5927\u6a21\u62df\u91cc\u9762\u504f\u7b80\u5355\u7684\u3002\n\n~~\u6b63\u5982\u5b98\u65b9\u9898\u89e3\u8bf4\u7684\uff0c\u672c\u9898\u96be\u70b9\u5728\u4e8e\u6ce8\u610f\u5230\u8fd9\u9053\u9898\u662f\u53ef\u505a\u9898\u3002~~\n\n\u9996\u5148\uff0c\u4e00\u5f00\u59cb\u6709 $10^5$ \u6761\u7ebf\u6bb5\uff0c\u800c `THUPC` \u53ea\u6709 $15$ \u6761\uff0c\u6211\u4eec\u9700\u8981\u6309\u7167\u9898\u610f\u5c06\u201c\u51fa\u73b0\u540c\u65b9\u5411\u7ebf\u6bb5\u7684\u9996\u5c3e\u76f8\u8fde\u3001\u91cd\u53e0\u6216\u5305\u542b\u201d\uff0c\u5408\u5e76\u6210\u4e00\u6761\u7ebf\u6bb5\u3002\n\n\u8fd9\u90e8\u5206\u6bd4\u8f83\u597d\u5904\u7406\uff0c\u4ee5\u65b9\u5411\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c\u7136\u540e $x$ \u6216\u8005 $y$ \u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\uff0c\u6700\u540e $l$ \u6216\u8005 $d$ \u4e3a\u7b2c\u4e09\u5173\u952e\u5b57\u6392\u5e8f\u3002\u7136\u540e\u6309\u987a\u5e8f\u679a\u4e3e\u7ebf\u6bb5\uff0c\u65b9\u5411\u4e0d\u540c\u5fc5\u7136\u662f\u65b0\u7684\u7ebf\u6bb5\uff0c\u5982\u679c $x$ \u6216\u8005 $y$ \u4e0d\u540c\u4e5f\u662f\uff0c\u5426\u5219\u6839\u636e $l,r$ \u6216\u8005 $u,d$ \u5224\u65ad\u662f\u5426\u201c\u9996\u5c3e\u76f8\u8fde\u3001\u91cd\u53e0\u6216\u5305\u542b\u201d\uff0c\u8fdb\u884c\u5904\u7406\u5373\u53ef\u3002\n\n\u4e4b\u540e\u5982\u679c\u4e0d\u662f\u6070\u597d $15$ \u6761\u7ebf\u6bb5\uff0c\u90a3\u4e48\u5c31\u662f `No`\u3002\n\n\u7136\u540e\u6570\u636e\u89c4\u6a21\u7f29\u5c0f\u5230\u4e86 $15$\uff0c\u5c5e\u4e8e\u662f\u548b\u505a\u90fd\u884c\u4e86\u3002\u6211\u4eec\u8dd1\u4e00\u904d\u6d2a\u6c34\u586b\u5145\uff0c\u628a\u6bcf\u4e2a\u8fde\u901a\u5757\u6807\u8bb0\u51fa\u6765\uff0c\u770b\u4e00\u773c\u662f\u4e0d\u662f\u6070\u597d $5$ \u4e2a\u8fde\u901a\u5757\uff0c\u4e0d\u662f\u5c31\u662f `No`\u3002\n\n\u63a5\u7740\u5224\u65ad\u8fd9 $5$ \u4e2a\u8fde\u901a\u5757\u7684\u5927\u5c0f\u662f\u4e0d\u662f $2,3,3,3,4$\uff08\u987a\u5e8f\u53ef\u6253\u4e71\uff09\uff0c\u5982\u679c\u4e0d\u662f\u4e5f\u662f `No`\u3002\n\n\u7ee7\u7eed\u5224\u65ad\u5c31\u9700\u8981\u6293\u7279\u5f81\u3002\u53ef\u4ee5\u5148\u5224\u65ad\u5927\u5c0f\u4e3a $2$ \u7684\u8fde\u901a\u5757\u662f\u4e0d\u662f `T`\uff0c\u7136\u540e\u5224\u65ad\u5927\u5c0f\u4e3a $4$ \u7684\u8fde\u901a\u5757\u662f\u4e0d\u662f `P`\u3002\u6211\u4eec\u8fd8\u89c2\u5bdf\u5230\uff0c\u5269\u4f59\u7684\u8fde\u901a\u5757\u91cc\u53ea\u6709 `C` \u6709\u4e24\u6761\u6a2a\u5411\u7ebf\u6bb5\u3002\u8fd9\u4e9b\u90fd\u53ef\u4ee5\u6839\u636e\u9898\u76ee\u7684\u8981\u6c42\u5224\u6389\u3002\u6700\u540e\u5269\u4e0b\u7684 `U` \u548c `H` \u7c7b\u4f3c\u5224\u4e00\u4e0b\uff0c\u62ff bool \u53d8\u91cf\u5b58\u4e00\u4e0b\u5c31\u597d\u4e86\u3002\n\n\u5982\u679c\u6070\u597d\u662f `THUPC`\uff0c\u5c31 `Yes`\uff1b\u5426\u5219 `No`\u3002\n\n\u8d5b\u65f6\u4ee3\u7801\uff1a\n\n```cpp\n//By: Luogu@rui_er(122461) & registerGen(242702)\n//Team: \u4e16\u4e00\u5927\u9644\u4e2d\u8001\u540c\u5fd7\n#include <bits/stdc++.h>\n#define rep(x,y,z) for(int x=y;x<=z;x++)\n#define per(x,y,z) for(int x=y;x>=z;x--)\n#define debug printf(\"Running %s on line %d...\\n\",__FUNCTION__,__LINE__)\n#define fileIO(s) do{freopen(s\".in\",\"r\",stdin);freopen(s\".out\",\"w\",stdout);}while(false)\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5+5;\n\nint n, vis[N], sz[N];\n#define No do{return puts(\"No\")&0;}while(0)\n#define Yes do{return puts(\"Yes\")&0;}while(0)\ntemplate<typename T> void chkmin(T& x, T y) {if(x > y) x = y;}\ntemplate<typename T> void chkmax(T& x, T y) {if(x < y) x = y;}\nstruct Segment {\n\tint op, l, r, u, d;\n\tSegment(int op=0, int a=0, int b=0, int c=0, int d=0) : op(op), l(a), r(b), u(c), d(d) {}\n\t~Segment() {}\n\tfriend bool operator < (const Segment& a, const Segment& b) {\n\t\tif(a.op != b.op) return a.op < b.op;\n\t\tif(!a.op) {\n\t\t\tif(a.u != b.u) return a.u < b.u;\n\t\t\treturn a.l < b.l;\n\t\t}\n\t\telse {\n\t\t\tif(a.l != b.l) return a.l < b.l;\n\t\t\treturn a.d < b.d;\n\t\t}\n\t}\n}a[N], b[N];\nbool intersect(Segment a, Segment b) {\n\tif(a.op == b.op) return 0;\n\tif(a.op > b.op) swap(a, b);\n\tif(b.l < a.l || b.l > a.r) return 0;\n\tif(a.u > b.u || a.u < b.d) return 0;\n\treturn 1;\n}\nvoid dfs_floodfill(int u, int c) {\n\tvis[u] = c;\n\t++sz[c];\n\trep(i, 1, 15) {\n\t\tif(i == u || vis[i]) continue;\n\t\tif(intersect(b[i], b[u])) {\n\t\t\tdfs_floodfill(i, c);\n\t\t}\n\t}\n}\n\nint main() {\n\tscanf(\"%d\", &n);\n\trep(i, 1, n) {\n\t\tint op, A, B, C;\n\t\tscanf(\"%d%d%d%d\", &op, &A, &B, &C);\n\t\tif(!op) a[i] = Segment(op, A, B, C, C);\n\t\telse a[i] = Segment(op, C, C, B, A);\n\t}\n\tsort(a+1, a+1+n);\n\tint tot = 1;\n\tb[1] = a[1];\n\trep(i, 2, n) {\n\t\tif(a[i].op != b[tot].op) b[++tot] = a[i];\n\t\telse if(!a[i].op) {\n\t\t\tif(a[i].u == b[tot].u) {\n\t\t\t\tif(b[tot].r >= a[i].l) chkmax(b[tot].r, a[i].r);\n\t\t\t\telse b[++tot] = a[i];\n\t\t\t}\n\t\t\telse b[++tot] = a[i];\n\t\t}\n\t\telse {\n\t\t\tif(a[i].l == b[tot].l) {\n\t\t\t\tif(b[tot].u >= a[i].d) chkmax(b[tot].u, a[i].u);\n\t\t\t\telse b[++tot] = a[i];\n\t\t\t}\n\t\t\telse b[++tot] = a[i];\n\t\t}\n\t}\n//\trep(i, 1, tot) printf(\"%d %d %d %d %d\\n\", b[i].op, b[i].l, b[i].r, b[i].u, b[i].d);\n\tif(tot != 15) No;\n\tint totc = 0;\n\trep(i, 1, 15) {\n\t\tif(!vis[i]) dfs_floodfill(i, ++totc);\n\t}\n\tif(totc != 5) No;\n\tint buc[5] = {0, 0, 0, 0, 0};\n\trep(i, 1, 5) {\n\t\tif(sz[i] < 2 || sz[i] > 4) No;\n\t\t++buc[sz[i]];\n\t}\n\tif(buc[2] != 1 || buc[3] != 3 || buc[4] != 1) No;\n\tint H = 0, U = 0;\n\trep(i, 1, 5) {\n//\t\tprintf(\"COLOR %d: \", i);\n\t\tif(sz[i] == 2) { // T\n\t\t\tint ok = 0;\n\t\t\trep(j, 1, 15) { // - 1\n\t\t\t\tif(vis[j] != i || b[j].op) continue;\n\t\t\t\trep(k, 1, 15) { // | 2\n\t\t\t\t\tif(vis[k] != i || !b[k].op) continue;\n\t\t\t\t\tif(b[k].d < b[j].u\n\t\t\t\t\t && b[j].u == b[k].u\n\t\t\t\t\t && b[j].l < b[k].l\n\t\t\t\t\t && b[k].l < b[j].r)\n\t\t\t\t\t\tok = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!ok) No;\n//\t\t\tputs(\"T\");\n\t\t}\n\t\telse if(sz[i] == 4) { // P\n\t\t\tint ok = 0;\n\t\t\trep(j, 1, 15) { // | long 9\n\t\t\t\tif(vis[j] != i || !b[j].op) continue;\n\t\t\t\trep(k, 1, 15) { // | short 12\n\t\t\t\t\tif(vis[k] != i || !b[k].op) continue;\n\t\t\t\t\tif(j == k || b[j].u - b[j].d <= b[k].u - b[k].d) continue;\n\t\t\t\t\trep(l, 1, 15) { // - up 10\n\t\t\t\t\t\tif(vis[l] != i || b[l].op) continue;\n\t\t\t\t\t\trep(m, 1, 15) { // - down 11\n\t\t\t\t\t\t\tif(l == m || vis[m] != i || b[m].op) continue;\n\t\t\t\t\t\t\tif(b[j].d < b[m].d\n\t\t\t\t\t\t\t && b[m].d == b[k].d\n\t\t\t\t\t\t\t && b[k].d < b[j].u\n\t\t\t\t\t\t\t && b[j].u == b[l].u\n\t\t\t\t\t\t\t && b[l].u == b[k].u\n\t\t\t\t\t\t\t && b[j].l == b[l].l\n\t\t\t\t\t\t\t && b[l].l == b[m].l\n\t\t\t\t\t\t\t && b[m].l < b[l].r\n\t\t\t\t\t\t\t && b[l].r == b[m].r\n\t\t\t\t\t\t\t && b[m].r == b[k].l)\n\t\t\t\t\t\t\t\tok = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!ok) No;\n//\t\t\tputs(\"P\");\n\t\t}\n\t\telse { // H | U | C\n\t\t\tint _ = 0; // -\n\t\t\trep(j, 1, 15) {\n\t\t\t\tif(!b[j].op && vis[j] == i) {\n\t\t\t\t\t++_;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(_ == 2) { // C\n\t\t\t\tint ok = 0;\n\t\t\t\trep(j, 1, 15) { // | 13\n\t\t\t\t\tif(vis[j] != i || !b[j].op) continue;\n\t\t\t\t\trep(k, 1, 15) { // - up 14\n\t\t\t\t\t\tif(vis[k] != i || b[k].op) continue;\n\t\t\t\t\t\trep(l, 1, 15) { // - down 15\n\t\t\t\t\t\t\tif(k == l || vis[l] != i || b[l].op) continue;\n\t\t\t\t\t\t\tif(b[l].d >= b[k].d) continue;\n\t\t\t\t\t\t\tif(b[j].d == b[l].d\n\t\t\t\t\t\t\t && b[l].d < b[j].u\n\t\t\t\t\t\t\t && b[j].u == b[k].d\n\t\t\t\t\t\t\t && b[j].l == b[k].l\n\t\t\t\t\t\t\t && b[k].l == b[l].l\n\t\t\t\t\t\t\t && b[l].l < b[k].r\n\t\t\t\t\t\t\t && b[k].r == b[l].r)\n\t\t\t\t\t\t\t\tok = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!ok) No;\n//\t\t\t\tputs(\"C\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// H\n\t\t\t\tint okH = 0;\n\t\t\t\trep(j, 1, 15) { // | left 3\n\t\t\t\t\tif(vis[j] != i || !b[j].op) continue;\n\t\t\t\t\trep(k, 1, 15) { // - 4\n\t\t\t\t\t\tif(vis[k] != i || b[k].op) continue;\n\t\t\t\t\t\trep(l, 1, 15) { // | right 5\n\t\t\t\t\t\t\tif(j == l || vis[l] != i || !b[l].op) continue;\n\t\t\t\t\t\t\tif(b[l].l <= b[j].l) continue;\n\t\t\t\t\t\t\tif(b[j].d == b[l].d\n\t\t\t\t\t\t\t && b[l].d < b[k].d\n\t\t\t\t\t\t\t && b[k].d < b[j].u\n\t\t\t\t\t\t\t && b[j].u == b[l].u\n\t\t\t\t\t\t\t && b[j].l == b[k].l\n\t\t\t\t\t\t\t && b[k].l < b[k].r\n\t\t\t\t\t\t\t && b[k].r == b[l].l)\n\t\t\t\t\t\t\t\tokH = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// U\n\t\t\t\tint okU = 0;\n\t\t\t\trep(j, 1, 15) { // | left 6\n\t\t\t\t\tif(vis[j] != i || !b[j].op) continue;\n\t\t\t\t\trep(k, 1, 15) { // - 7\n\t\t\t\t\t\tif(vis[k] != i || b[k].op) continue;\n\t\t\t\t\t\trep(l, 1, 15) { // | right 8\n\t\t\t\t\t\t\tif(j == l || vis[l] != i || !b[l].op) continue;\n\t\t\t\t\t\t\tif(b[l].l <= b[j].l) continue;\n\t\t\t\t\t\t\tif(b[j].d == b[l].d\n\t\t\t\t\t\t\t && b[l].d == b[k].d\n\t\t\t\t\t\t\t && b[k].d < b[j].u\n\t\t\t\t\t\t\t && b[j].u == b[l].u\n\t\t\t\t\t\t\t && b[j].l == b[k].l\n\t\t\t\t\t\t\t && b[k].l < b[k].r\n\t\t\t\t\t\t\t && b[k].r == b[l].l)\n\t\t\t\t\t\t\t\tokU = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tH |= okH;\n\t\t\t\tU |= okU;\n//\t\t\t\tif(okH) puts(\"H\");\n//\t\t\t\tif(okU) puts(\"U\");\n\t\t\t}\n\t\t}\n\t}\n\tif(H && U) Yes;\n\telse No;\n\treturn 0;\n}\n```",
        "postTime": 1647437918,
        "uid": 122461,
        "name": "rui_er",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P8216\u3010[THUPC2022 \u521d\u8d5b] \u753b\u56fe\u3011"
    },
    {
        "content": "\u5199\u9898\u89e3\u7684\u539f\u56e0\uff1a\u8d5b\u65f6\u5199\u8fd9\u9898\uff0c30min \u65f6\u5c31\u53ea\u6709\u4e00\u5904\u5c0f bug\uff08\u5408\u5e76\u7ebf\u6bb5\u7684\u65f6\u5019\u6ca1\u8003\u8651\u91cd\u53e0\uff09\uff0c\u7ed3\u679c\u76f4\u5230\u6bd4\u8d5b\u7ed3\u675f\u4e5f\u6ca1\u627e\u51fa\u6765\uff0c\u8d5b\u540e 7min \u7684\u65f6\u5019\u53d1\u73b0\u7684\uff0c\u4e4b\u540e\u51fa\u6570\u636e\u4e00\u53d1\u5c31\u8fc7\u4e86\u3002\n\n------------\n\n\u5927\u6a21\u62df\u3002\n\n\u9996\u5148\u628a\u80fd\u9996\u5c3e\u76f8\u63a5\u7684\u7ebf\u6bb5\u5168\u90e8\u62fc\u63a5\u8d77\u6765\u3002**\u6ce8\u610f\uff1a\u7ebf\u6bb5\u53ef\u4ee5\u91cd\u53e0\uff01\uff01\uff01**\n\n\u62fc\u63a5\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u53d1\u73b0\u6c34\u5e73\u7ebf\u6bb5\u5e94\u5f53\u6709 $7$ \u6761\uff0c\u7ad6\u76f4\u7ebf\u6bb5\u5e94\u5f53\u6709 $8$ \u6761\u3002\u4e0d\u6ee1\u8db3\u8be5\u6761\u4ef6\u5219\u76f4\u63a5\u5224\u5b9a\u65e0\u89e3\u3002\n\n\u82e5\u6ee1\u8db3\u4e86\u8be5\u6761\u4ef6\uff0c\u5219\u9700\u8981\u53bb\u5bfb\u627e `T H U P C` \u4e94\u4e2a\u5b57\u6bcd\u3002\u56e0\u4e3a\u8fd9\u4e94\u4e2a\u5b57\u6bcd\u5404\u6709\u5176\u7279\u6b8a\u4e4b\u5904\uff0c\u65e0\u8bba\u6309\u4ec0\u4e48\u987a\u5e8f\u53bb\u5bfb\u627e\u90fd\u4e0d\u5f71\u54cd\u6b63\u786e\u6027\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u7b26\u5408\u8981\u6c42\u90a3\u4e48\u65e0\u8bba\u5982\u4f55\u4e5f\u80fd\u627e\u51fa\u6765\uff0c\u4e0d\u7b26\u5408\u8981\u6c42\u65e0\u8bba\u5982\u4f55\u4e5f\u627e\u4e0d\u51fa\u6765\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u66b4\u529b\u5bfb\u627e\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u5373\u53ef\u3002\n\n\u6211\u5728\u5b9e\u73b0\u8fd9\u4e00\u8fc7\u7a0b\u65f6\uff0c\u7528\u7684\u662f\u591a\u91cd\u5faa\u73af\u679a\u4e3e\uff0c\u7136\u540e\u66b4\u529b\u5224\u65ad\u3002\u6700\u7ec8\u5982\u679c\u4e94\u4e2a\u5b57\u6bcd\u5168\u90e8\u627e\u5230\u5219\u8f93\u51fa `YES`\uff0c\u5426\u5219\u8f93\u51fa `NO` \u5373\u53ef\u3002\n\ncode\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint n,ok=1,cnt1,cnt2,e1,e2,bj1[21],bj2[21];\nstruct seg\n{\n\tint l,r,x;\n} s1[1000001],s2[1000001],n1[1000001],n2[1000001];\nbool cmpp(seg a1,seg a2){return a1.x<a2.x;}\nbool cmp(seg a1,seg a2){return a1.l<a2.l;}\nbool check(int op1,seg s1,int op2,seg s2)\n{\n\t// s1 \u662f\u7eb5\u5411\u7ebf\u6bb5\uff0cs2 \u662f\u6a2a\u5411\u7ebf\u6bb5 \n\t// \u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a op1 \u548c op2 \u662f\u6ca1\u7528\u7684\n\tif(s1.x<s2.l||s1.x>s2.r) return 0;\n\tif(s2.x<s1.l||s2.x>s1.r) return 0;\n\treturn 1;\n}\nvoid findt()\n{\n\tif(!ok) return;\n\tfor(int i=1;i<=7;i++)\n\t\tfor(int j=1;j<=8;j++)\n\t\t\tif(n2[j].r==n1[i].x&&n1[i].l<n2[j].x&&n1[i].r>n2[j].x)\n\t\t\t{\n\t\t\t\tint flag=1;\n\t\t\t\tfor(int ii=1;ii<=7;ii++)\n\t\t\t\t\tif(ii!=i)\n\t\t\t\t\t\tif(check(2,n2[j],1,n1[ii])){flag=0;break;}\n\t\t\t\tfor(int ii=1;ii<=8;ii++)\n\t\t\t\t\tif(ii!=j)\n\t\t\t\t\t\tif(check(2,n2[ii],1,n1[i])){flag=0;break;}\n\t\t\t\tif(flag){bj1[i]=1;bj2[j]=1;return;}\n\t\t\t}\n\tok=0;\n//\tprintf(\"#1\\n\");\n}\nvoid findh()\n{\n\tif(!ok) return;\n\tfor(int i=1;i<=7;i++)\n\t\tfor(int j1=1;j1<=8;j1++)\n\t\t\tfor(int j2=1;j2<=8;j2++)\n\t\t\t{\n\t\t\t\tif(bj1[i]||bj2[j1]||bj2[j2]) continue;\n\t\t\t\tif(j1==j2) continue;\n\t\t\t\tif(n2[j1].l!=n2[j2].l||n2[j1].r!=n2[j2].r||n2[j1].x==n2[j2].x) continue;\n\t\t\t\tif(n1[i].l==min(n2[j1].x,n2[j2].x)&&n1[i].r==max(n2[j1].x,n2[j2].x)&&n2[j1].l<n1[i].x&&n1[i].x<n2[j1].r)\n\t\t\t\t{\n\t\t\t\t\tint flag=1;\n\t\t\t\t\tfor(int ii=1;ii<=7;ii++)\n\t\t\t\t\t\tif(ii!=i)\n\t\t\t\t\t\t\tif(check(2,n2[j1],1,n1[ii])||check(2,n2[j2],1,n1[ii])){flag=0;break;}\n\t\t\t\t\tfor(int ii=1;ii<=8;ii++)\n\t\t\t\t\t\tif(ii!=j1&&ii!=j2)\n\t\t\t\t\t\t\tif(check(2,n2[ii],1,n1[i])){flag=0;break;}\n\t\t\t\t\tif(flag){bj1[i]=1;bj2[j1]=1;bj2[j2]=1;return;}\n\t\t\t\t}\n\t\t\t}\n\tok=0;\n//\tprintf(\"#2\\n\");\n}\nvoid findu()\n{\n\tif(!ok) return;\n\tfor(int i=1;i<=7;i++)\n\t\tfor(int j1=1;j1<=8;j1++)\n\t\t\tfor(int j2=1;j2<=8;j2++)\n\t\t\t{\n\t\t\t\tif(bj1[i]||bj2[j1]||bj2[j2]) continue;\n\t\t\t\tif(j1==j2) continue;\n\t\t\t\tif(n2[j1].l!=n2[j2].l||n2[j1].r!=n2[j2].r||n2[j1].x==n2[j2].x) continue;\n\t\t\t\tif(n1[i].l==min(n2[j1].x,n2[j2].x)&&n1[i].r==max(n2[j1].x,n2[j2].x)&&n2[j1].l==n1[i].x)\n\t\t\t\t{\n\t\t\t\t\tint flag=1;\n\t\t\t\t\tfor(int ii=1;ii<=7;ii++)\n\t\t\t\t\t\tif(ii!=i)\n\t\t\t\t\t\t\tif(check(2,n2[j1],1,n1[ii])||check(2,n2[j2],1,n1[ii])){flag=0;break;}\n\t\t\t\t\tfor(int ii=1;ii<=8;ii++)\n\t\t\t\t\t\tif(ii!=j1&&ii!=j2)\n\t\t\t\t\t\t\tif(check(2,n2[ii],1,n1[i])){flag=0;break;}\n\t\t\t\t\tif(flag){bj1[i]=1;bj2[j1]=1;bj2[j2]=1;return;}\n\t\t\t\t}\n\t\t\t}\n\tok=0;\n//\tprintf(\"#3\\n\");\n}\nvoid findc()\n{\n\tif(!ok) return;\n\tfor(int i1=1;i1<=7;i1++)\n\t\tfor(int i2=1;i2<=7;i2++)\n\t\t\tfor(int j=1;j<=8;j++)\n\t\t\t{\n\t\t\t\tif(bj1[i1]||bj1[i2]||bj2[j]) continue;\n\t\t\t\tif(i1==i2) continue;\n\t\t\t\tif(n1[i1].l!=n1[i2].l||n1[i1].r!=n1[i2].r||n1[i1].x==n1[i2].x) continue;\n\t\t\t\tif(n2[j].l==min(n1[i1].x,n1[i2].x)&&n2[j].r==max(n1[i1].x,n1[i2].x)&&n1[i1].l==n2[j].x)\n\t\t\t\t{\n\t\t\t\t\tint flag=1;\n\t\t\t\t\tfor(int ii=1;ii<=7;ii++)\n\t\t\t\t\t\tif(ii!=i1&&ii!=i2)\n\t\t\t\t\t\t\tif(check(2,n2[j],1,n1[ii])){flag=0;break;}\n\t\t\t\t\tfor(int ii=1;ii<=8;ii++)\n\t\t\t\t\t\tif(ii!=j)\n\t\t\t\t\t\t\tif(check(2,n2[ii],1,n1[i1])||check(2,n2[ii],1,n1[i2])){flag=0;break;}\n\t\t\t\t\tif(flag){bj1[i1]=1;bj1[i2]=1;bj2[j]=1;return;}\n\t\t\t\t}\n\t\t\t}\n\tok=0;\n//\tprintf(\"#4\\n\");\n}\nvoid findp()\n{\n\tif(!ok) return;\n\tfor(int i1=1;i1<=7;i1++)\n\t\tfor(int i2=1;i2<=7;i2++)\n\t\t\tfor(int j1=1;j1<=8;j1++)\n\t\t\t\tfor(int j2=1;j2<=8;j2++)\n\t\t\t\t{\n\t\t\t\t\tif(bj1[i1]||bj1[i2]||bj2[j1]||bj2[j2]) continue;\n\t\t\t\t\tif(i1==i2||j1==j2) continue;\n\t\t\t\t\tif(n1[i1].l!=n1[i2].l||n1[i1].r!=n1[i2].r||n1[i1].x==n1[i2].x) continue;\n\t\t\t\t\tif(n2[j1].r!=n2[j2].r||n2[j1].l==n2[j2].l||n2[j1].x==n2[j2].x) continue;\n\t\t\t\t\tif(min(n2[j1].x,n2[j2].x)==n1[i1].l&&max(n2[j1].x,n2[j2].x)==n1[i1].r&&max(n1[i1].x,n1[i2].x)==n2[j1].r)\n\t\t\t\t\t{\n\t\t\t\t\t\tseg S1=n1[i1],S2=n1[i2],S3=n2[j1],S4=n2[j2];\n\t\t\t\t\t\tif(S1.x>S2.x) swap(S1,S2);\n\t\t\t\t\t\tif(S3.x>S4.x) swap(S3,S4);\n\t\t\t\t\t\tif(S3.l<S4.l&&S1.x==S4.l)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tint flag=1;\n\t\t\t\t\t\t\tfor(int ii=1;ii<=7;ii++)\n\t\t\t\t\t\t\t\tif(ii!=i1&&ii!=i2)\n\t\t\t\t\t\t\t\t\tif(check(2,n2[j1],1,n1[ii])||check(2,n2[j2],1,n1[ii])){flag=0;break;}\n\t\t\t\t\t\t\tfor(int ii=1;ii<=8;ii++)\n\t\t\t\t\t\t\t\tif(ii!=j1&&ii!=j2)\n\t\t\t\t\t\t\t\t\tif(check(2,n2[ii],1,n1[i1])||check(2,n2[ii],1,n1[i2])){flag=0;break;}\n\t\t\t\t\t\t\tif(flag){bj1[i1]=1;bj1[i2]=1;bj2[j1]=1;bj2[j2]=1;return;}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\tok=0;\n}\nint main()\n{\n\tios::sync_with_stdio(false);\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint op,l,r,x;\n\t\tcin>>op>>l>>r>>x;\n\t\tif(op==0) s1[++cnt1]={l,r,x};\n\t\telse s2[++cnt2]={l,r,x};\n\t}\n\tsort(s1+1,s1+1+cnt1,cmpp);sort(s2+1,s2+1+cnt2,cmpp);\n\tfor(int l=1,r=1;r<=cnt1;l=r+1)\n\t{\n\t\tr=l;\n\t\twhile(s1[r+1].x==s1[l].x&&r+1<=cnt1) r++;\n\t\tsort(s1+l,s1+1+r,cmp);\n\t\tseg cur=s1[l];\n\t\tfor(int j=l+1;j<=r;j++)\n\t\t{\n\t\t\tif(s1[j].l<=cur.r)\n\t\t\t\tcur.r=max(cur.r,s1[j].r);\n\t\t\telse\n\t\t\t{\n\t\t\t\tn1[++e1]=cur;\n\t\t\t\tcur=s1[j];\n\t\t\t}\n\t\t}\n\t\tn1[++e1]=cur;\n\t\tif(r==cnt1) break;\n\t}\n\tfor(int l=1,r=1;r<=cnt2;l=r+1)\n\t{\n\t\tr=l;\n\t\twhile(s2[r+1].x==s2[l].x&&r+1<=cnt2) r++;\n\t\tsort(s2+l,s2+1+r,cmp);\n\t\tseg cur=s2[l];\n\t\tfor(int j=l+1;j<=r;j++)\n\t\t{\n\t\t\tif(s2[j].l<=cur.r)\n\t\t\t\tcur.r=max(cur.r,s2[j].r);\n\t\t\telse\n\t\t\t{\n\t\t\t\tn2[++e2]=cur;\n\t\t\t\tcur=s2[j];\n\t\t\t}\n\t\t}\n\t\tn2[++e2]=cur;\n\t\tif(r==cnt2) break;\n\t}\n\tif(e1!=7||e2!=8) ok=0;\n\tfindc();findp();findu();findh();findt();\n\tcout<<(ok==1?\"Yes\":\"No\");\n\treturn 0;\n}\n/*\n17\n0 1 2 100\n0 1 2 -100\n0 2 9 90\n1 75 90 5\n1 65 70 4\n1 65 70 6\n0 4 6 68\n1 50 60 8\n1 50 60 20\n0 8 20 50\n1 52 58 12\n1 54 58 16\n0 12 16 58\n0 12 16 54\n1 -100 -99 1\n1 -99 -89 1\n1 -95 100 1\n\nYES\n*/\n```",
        "postTime": 1651404457,
        "uid": 153687,
        "name": "donghanwen1225",
        "ccfLevel": 8,
        "title": "P8216 \u9898\u89e3 & \u8d5b\u65f6\u6ca1\u8fc7\u6cc4\u6124"
    },
    {
        "content": "#### \u6b63\u9898\n\n\u9996\u5148\u6211\u4eec\u628a\u6240\u6709\u7ebf\u6bb5\u5206\u6210\u6c34\u5e73\u548c\u7ad6\u76f4\u4e24\u7c7b\u6392\u5e8f\uff0c\u5bf9\u4e8e\u6709\u4ea4\u4e14\u7c7b\u578b\u76f8\u540c\u7684\u7ebf\u6bb5\u5408\u5e76\u5373\u53ef\u3002\n\n\u7136\u540e\u5224\u65ad\u5269\u4e0b\u7684\u7ebf\u6bb5\u662f\u5426\u53ea\u6709 $15$ \u6761\uff0c\u5982\u679c\u6ca1\u6709\u76f4\u63a5\u5224\u65ad\u65e0\u89e3\uff0c\u5426\u5219\u76f4\u63a5\u8dd1\u4e00\u904d dfs\uff0c\u4f9d\u9898\u610f\u6a21\u62df\u5e76\u5224\u65ad\u5373\u53ef\u3002\u8bb0\u5f97\u6bcf\u641c\u7d22\u4e00\u4e2a\u56fe\u5f62\uff0c\u5c31\u8981\u5224\u65ad\u4e00\u6b21\uff0c\u5426\u5219\u6700\u574f\u7406\u8bba\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u80fd\u4f1a\u8d85\u65f6\u3002\n\n\u6709\u51e0\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u70b9\uff1a\n\n1. \u4e0d\u8981\u628a\u9898\u76ee\u63cf\u8ff0\u4e2d\u7684 $y$ \u548c\u8f93\u5165\u4e2d\u7684 $y$ \u641e\u6df7\uff1b\n2. `puts()` \u51fd\u6570\u7684\u8fd4\u56de\u503c\u4e0d\u4e00\u5b9a\u662f $0$\uff0c\u56e0\u6b64\u4e0d\u80fd\u76f4\u63a5 `return puts(\"\") ;`\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4 `RE`\uff08\u5f53\u65f6\u5728\u8003\u573a\u4e0a\u6211\u56e0\u4e3a\u8fd9\u4e2a\u7ed9\u6211\u4eec\u961f\u8d21\u732e\u4e86 $18$ \u53d1\u7f5a\u65f6\uff09\uff1b\n3. \u8bb0\u5f97\u6bcf\u52a0\u5165\u4e00\u6761\u7ebf\u6bb5\u5c31\u8981\u5224\u65ad\u662f\u5426\u548c\u4e4b\u524d\u7684\u56fe\u5f62\u76f8\u4ea4\uff1b\n\n\u5982\u679c\u6709\u4e0d\u61c2\u7684\u5730\u65b9\u53ef\u4ee5\u770b\u4ee3\u7801\u7406\u89e3\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u6bd4\u8f83\u7384\u5b66\uff0c\u4f46\u662f\u53ef\u4ee5\u7a33\u7a33\u8dd1\u8fc7\u3002\n\n```cpp\n#include <cstdio>\n#include <algorithm>\nusing namespace std ;\nconst int MAXN = 1e6 + 10 ;\nstruct node {\n\tlong long opt , l , r , y ;\n\tbool operator < (const node &x) const {\n\t\treturn y == x.y ? l < x.l : y < x.y ;\n\t}\n} a[MAXN] , b[MAXN] , c[MAXN] ;\nnode st[MAXN] , ans[MAXN] ;\nint n , c1 , c2 , tp , tot ;\nbool vis[MAXN] ;\nbool dd[20] = {0 , 0 , 1 , 1 , 0 , 1 , 1 , 0 , 1 , 1 , 0 , 0 , 1 , 1 , 0 , 0} ;\nbool ck (node x , node y) {\n\tif (x.opt == y.opt) return 0 ;\n\tif (x.y >= y.l && x.y <= y.r && y.y >= x.l && y.y <= x.r) return 1 ;\n\treturn 0 ;\n}\nint K;\nint check (int x) {\n\tif (x == 2) {\n\t\tif (ans[2].l >= ans[1].y || ans[1].y != ans[2].r) return 0 ;\n\t\tif (ans[1].l >= ans[2].y || ans[2].y >= ans[1].r) return 0 ;\n\t\treturn 1 ;\n\t}\n\tif (x == 5) {\t\n\t\tif (ans[3].l != ans[5].l || ans[5].l >= ans[4].y || ans[4].y >= ans[3].r || ans[3].r != ans[5].r) return 0 ;\n\t\tif (ans[3].y != ans[4].l || ans[4].l >= ans[4].r || ans[4].r != ans[5].y) return 0 ;\n\t\tfor (int i = 1 ; i < 3 ; i++)\n\t\t\tfor (int j = 3 ; j < 6 ; j++)\n\t\t\t\tif (ck (ans[i] , ans[j])) return 0 ;\n\t\treturn 1 ;\n\t}\n\tif (x == 8) {\n\t\tfor (int i = 1 ; i < 6 ; i++)\n\t\t\tfor (int j = 6 ; j < 9 ; j++)\n\t\t\t\tif (ck (ans[i] , ans[j])) return 0 ;\n\t\tif (ans[6].l != ans[8].l || ans[8].l != ans[7].y || ans[7].y >= ans[6].r || ans[6].r != ans[8].r) return 0 ;\n\t\tif (ans[6].y != ans[7].l || ans[7].l >= ans[7].r || ans[7].r != ans[8].y) return 0 ;\n\t\treturn 1 ;\n\t}\n\tif (x == 12) {\n\t\tfor (int i = 1 ; i < 9 ; i++)\n\t\t\tfor (int j = 9 ; j < 13 ; j++)\n\t\t\t\tif (ck (ans[i] , ans[j])) return 0 ;\n\t\tif (ans[9].l >= ans[11].y || ans[11].y != ans[12].l || ans[12].l >= ans[9].r || ans[9].r != ans[10].y || ans[10].y != ans[12].r) return 0 ;\n\t\tif (ans[9].y != ans[10].l || ans[10].l != ans[11].l || ans[11].l >= ans[10].r || ans[10].r != ans[11].r || ans[11].r != ans[12].y) return 0 ;\n\t\treturn 1 ;\n\t}\n\tif (x == 15) {\n\t\tfor (int i = 1 ; i < 13 ; i++)\n\t\t\tfor (int j = 14 ; j < 16 ; j++)\n\t\t\t\tif (ck (ans[i] , ans[j])) return 0 ;\n\t\tif (ans[13].l != ans[15].y || ans[15].y >= ans[13].r || ans[13].r != ans[14].y) return 0 ;\n\t\tif (ans[13].y != ans[14].l || ans[14].l != ans[15].l || ans[15].l >= ans[14].r || ans[14].r != ans[15].r) return 0 ;\n\t\treturn 1 ;\n\t}\n\treturn 1 ;\n}\nbool flag = 0 ;\nint pp = 0 ;\nvoid dfs (int x) {\n\tif (x > tot) {\n\t\tputs (\"Yes\") ;\n\t\tflag = 1 ;\n\t\treturn ;\n\t}\n\tfor (int i = 1 ; i <= tot ; i++) {\n\t\tif (vis[i]) continue ;\n\t\tif (c[i].opt != dd[x]) continue ;\n\t\tans[x] = c[i] ;\n\t\tif (!check (x)) continue ;\n\t\tvis[i] = 1 ;\n\t\tdfs (x + 1) ;\n\t\tif (flag) return ;\n\t\tvis[i] = 0 ;\n\t}\n}\nint main () {\n\tscanf (\"%d\" , &n) ;\n\tfor (int i = 1 , op ; i <= n ; i++) {\n\t\tscanf (\"%d\" , &op) ;\n\t\tif (!op) c1++ , scanf (\"%lld%lld%lld\" , &a[c1].l , &a[c1].r , &a[c1].y) ;\n\t\telse c2++ , scanf (\"%lld%lld%lld\" , &b[c2].l , &b[c2].r , &b[c2].y) ;\n\t}\n\tsort (a + 1 , a + c1 + 1) ;\n\tsort (b + 1 , b + c2 + 1) ;\n\tfor (int i = 1 ; i <= c1 ; i++) {\n\t\tif (i == 1 || a[i].y != a[i - 1].y) st[++tp] = a[i] ;\n\t\telse {\n\t\t\tif (a[i].l <= st[tp].r) st[tp].r = max (st[tp].r , a[i].r) ;\n\t\t\telse st[++tp] = a[i] ;\n\t\t}\n\t}\n\tc1 = tp ;\n\tfor (int i = 1 ; i <= c1 ; i++) a[i] = st[i] ;\n\ttp = 0 ;\n\tfor (int i = 1 ; i <= c2 ; i++) {\n\t\tif (i == 1 || b[i].y != b[i - 1].y) st[++tp] = b[i] ;\n\t\telse {\n\t\t\tif (b[i].l <= st[tp].r) st[tp].r = max (st[tp].r , b[i].r) ;\n\t\t\telse st[++tp] = b[i] ;\n\t\t}\n\t}\n\tc2 = tp ;\n\tfor (int i = 1 ; i <= c2 ; i++) b[i] = st[i] ;\n\tif (c1 + c2 != 15 || c2 != 8 || c1 != 7) {\n\t    puts (\"No\") ;\n\t    return 0 ;\n\t}\n\tfor (int i = 1 ; i <= c1 + c2 ; i++)\n\t\tc[i] = (i <= c1 ? a[i] : b[i - c1]) , c[i].opt = (i <= c1 ? 0 : 1) ;\n\ttot = c1 + c2 ;\n//\tprintf (\"%d\\n\" , tot) ;\n//\tfor (int i = 1 ; i <= tot ; i++)\n//\t\tprintf (\"%d %d %d %d\\n\" , c[i].opt , c[i].l , c[i].r , c[i].y) ;\n\tdfs (1) ;\n\tif (!flag) puts (\"No\") ;\n\treturn 0 ;\n}\n```",
        "postTime": 1647438204,
        "uid": 122641,
        "name": "GIFBMP",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P8216 \u3010\u753b\u56fe\u3011"
    }
]
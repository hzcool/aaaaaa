[
    {
        "content": "\u8fd9\u662f\u4e00\u4e2a\u590d\u6742\u5ea6\u5e94\u8be5\u662f\u5047\u7684\u7684\u505a\u6cd5\uff0c\u8dd1\u5f97\u6781\u5176\u5403\u529b...\u4e0d\u8fc7\u51fa\u9898\u4eba\u6ca1\u6709\u8ba4\u771f\u7684\u53bb\u5361\uff1f\n\n\u6211\u4eec\u5148\u89c2\u5bdf\u8fd9\u4e2a\u673a\u5668\u4eba\u7684\u79fb\u52a8\u89c4\u5219\uff0c\u53d1\u73b0\u6700\u5927\u503c\u51e0\u4e4e\u662f\u53ef\u4ee5\u904d\u5386\u6574\u4e2a\u533a\u95f4\u7684\u3002\u4e8b\u5b9e\u4e0a\uff0c\u6700\u53f3\u8fb9\u7684\u6700\u5927\u503c\u786e\u5b9e\u53ef\u4ee5\u904d\u5386\u6574\u4e2a\u533a\u95f4\u7684\uff0c\u540c\u65f6\u5176\u4f59\u6700\u5927\u503c\u5747\u4e0d\u53ef\u4ee5\u3002\n\n\u8fd9\u4e2a\u6700\u5927\u503c\u4f1a\u5c06\u533a\u95f4\u5212\u5206\u4e3a\u4e24\u8fb9\uff0c\u4e24\u8fb9\u90fd\u662f\u5b50\u95ee\u9898\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u7528\u533a\u95f4 dp \u6765\u8ba1\u7b97\u7b54\u6848\u3002\n\n\u8bbe $f_{l,r,k}$ \u8868\u793a\u533a\u95f4 $[l,r]$ \u7684\u6700\u5927\u503c\u4e3a $k$ \u7684\u65b9\u6848\u6570\uff0c\u8f6c\u79fb\u679a\u4e3e\u504f\u4e2d\u95f4\u7684\u4e00\u4e2a\u70b9\u6ee1\u8db3\u5f80\u5de6\u548c\u5f80\u53f3\u7684\u5dee\u503c\u4e0d\u8d85\u8fc7 $2$\uff0c\u5219\u6709 $f_{l,r,k}=(\\sum_{u\\le k}f_{l,mid-1,u})\\times (\\sum_{u<k}f_{mid+1,r,u})$\n\n\u770b\u7740\u590d\u6742\u5ea6\u975e\u5e38\u7684 $\\mathcal O(n^2w)$\uff0c\u7136\u800c\u5199\u4e2a\u8bb0\u5fc6\u5316\u641c\u7d22\u4f1a\u53d1\u73b0\u7531\u4e8e\u9898\u76ee\u6027\u8d28\u6709\u6548\u7684\u533a\u95f4\u6570\u4ec5\u4e3a $2100$ \u5de6\u53f3\uff0c\u6240\u4ee5\u5927\u6982\u53ef\u4ee5\u5f53\u4f5c $\\mathcal O(2000w)$\u3002\n\n\u503c\u57df\u5f88\u5927\u80af\u5b9a\u4e0d\u597d\u5904\u7406\uff0c\u5c06\u6bcf\u4e2a $[A_i,B_i]$ \u62c6\u6210 $[l,r),[r,r')...$ \u8fd9\u6837\u7684\u533a\u95f4\u5904\u7406\uff0c\u540c\u4e00\u6bb5\u533a\u95f4\u5185\u7684\u8f6c\u79fb\u76f8\u4f3c\uff0c\u5728 $l=r$ \u65f6\u5747\u6709 $f_{l,r,k}=1$\uff0c\u6bcf\u6b21\u8f6c\u79fb\u5c06\u8de8\u6bb5\u7684\u533a\u95f4\u89c6\u4e3a\u5e38\u6570\uff0c\u5982\u679c\u5c06\u540c\u6bb5\u7684 $f_{l,r,x}$ \u89c6\u4e3a\u5173\u4e8e $x$ \u7684\u591a\u9879\u5f0f\uff0c\u90a3\u4e48\u540c\u6bb5\u7684\u8f6c\u79fb\u662f\u4e00\u4e2a\u8ba1\u7b97\u524d\u7f00\u548c\u5e76\u5c06\u70b9\u503c\u5206\u5f00\u4e58\u8d77\u6765\u7684\u8fc7\u7a0b\uff0c\u5bb9\u6613\u53d1\u73b0\u533a\u95f4 $f_{l,r}$ \u7684\u6b21\u5e42\u4e0d\u8d85\u8fc7 $r-l$\n\n\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5927\u66b4\u529b\uff0c\u5bf9\u4e8e\u79bb\u6563\u5316\u5f97\u5230\u7684 $2n$ \u4e2a\u533a\u95f4\uff0c\u90fd\u62ff\u51fa\u6765\u8dd1\u4e00\u8fb9 dp\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u533a\u95f4 $[l,r]$ \u76f4\u63a5\u7ef4\u62a4 $n$ \u4e2a dp \u503c\u4f5c\u4e3a\u70b9\u503c\uff0c\u8f6c\u79fb\u7ed3\u675f\u540e\u76f4\u63a5\u7528\u70b9\u503c\u505a\u524d\u7f00\u548c\uff0c\u7531\u4e8e\u533a\u95f4\u603b\u6570\u4e3a $2000$\uff0c\u8fd9\u4e00\u90e8\u5206\u7684\u8fd0\u7b97\u6548\u7387\u5927\u6982\u662f $\\mathcal O(2000n)$\uff0c\u9700\u8981\u8ba1\u7b97 $2n$ \u6b21\uff0c\u590d\u6742\u5ea6\u5927\u6982\u662f $\\mathcal O(K\\cdot n^2),K=4000$\n\n\u7136\u540e\u6709\u70b9\u4fe1\u4ef0\uff0c\u5728\u503c\u57df\u8f83\u5c0f\u7684\u65f6\u5019\u8dd1\u66b4\u529b\uff0c\u4f60\u5c31\u80fd\u83b7\u5f97 $95$ \u7684\u9ad8\u5206\u3002\n\n\u7136\u540e\u76f4\u63a5\u7ef4\u62a4 $n$ \u4e2a\u70b9\u503c\u5b9e\u5728\u662f\u592a\u66b4\u529b\u4e86\uff0c\u4ecd\u7136\u662f\u9898\u76ee\u6027\u8d28\uff0c\u5927\u90e8\u5206\u7684\u533a\u95f4\u5176\u5b9e\u957f\u5ea6\u90fd\u5f88\u5c0f\uff0c\u6211\u4eec\u8003\u8651\u5229\u7528\u4e00\u4e0b\u533a\u95f4 $[l,r]$ \u662f\u5173\u4e8e\u533a\u95f4\u7684 $r-l$ \u6b21\u5e42\u7684\u591a\u9879\u5f0f\u8fd9\u4e2a\u6027\u8d28\u3002\n\n\u8003\u8651\u5bf9\u533a\u95f4 $[l,r]$ \u7ef4\u62a4 $r-l$ \u4e2a\u70b9\u503c\uff0c\u4f46\u662f\u8f6c\u79fb\u9700\u8981\u66f4\u591a\u7684\u70b9\u503c\uff0c\u8fd9\u4e0d\u597d\u5904\u7406\uff08\u5f53\u7136\u53ef\u4ee5\u76f4\u63a5\u66b4\u529b\u63d2\u503c\uff09\n\n\u4e00\u4e2a\u66f4\u65b9\u4fbf\u7684\u505a\u6cd5\u662f\uff0c\u5bf9\u4e8e\u533a\u95f4 $[l,r]$ \u6211\u4eec\u8003\u8651\u7ef4\u62a4\u4e00\u4e2a\u6b21\u5e42\u4e3a $r-l$ \u7684\u4e0b\u964d\u5e42\u591a\u9879\u5f0f\uff0c\u4f46\u662f\u8f6c\u79fb\u7684\u65f6\u5019\u5982\u679c\u4f7f\u7528\u66b4\u529b\u5377\u79ef\u611f\u89c9\u4e0a~~\u5c31\u5f88\u96be\u5199~~\u5f88\u6162\uff0c\u6240\u4ee5\u5728\u8fdb\u884c\u8f6c\u79fb\u7684\u65f6\u5019\u6211\u4eec\u4f7f\u7528\u70b9\u503c\u6765\u5904\u7406\u5373\u53ef\u3002\n\n\u8fd9\u610f\u5473\u7740\u6211\u4eec\u9700\u8981\u8fd9\u4e2a\u533a\u95f4\u7684 $2(r-l)$ \u4e2a\u70b9\u503c\uff0c\u4e0b\u964d\u5e42\u591a\u9879\u5f0f\u8f6c\u70b9\u503c\u662f\u975e\u5e38\u65b9\u4fbf\u7684\uff0c\u6211\u4eec\u76f4\u63a5\u4e58\u4ee5 $e^x$ \u7136\u540e\u4e58\u4e00\u4e0b\u9636\u4e58\u5373\u53ef\uff0c\u8fd8\u539f\u4e5f\u975e\u5e38\u7b80\u5355\u3002\u8fd9\u4e00\u90e8\u5206\u5bf9\u4e8e\u6bcf\u4e2a\u533a\u95f4\u66b4\u529b\u505a\u7684\u590d\u6742\u5ea6\u662f $\\mathcal O(|\\rm len|^2)$\uff0c\u603b\u4f53\u590d\u6742\u5ea6\u662f $\\mathcal O(\\sum |\\rm len|^2)$\n\n\u5b9e\u9645\u4e0a\u641c\u51fa\u6765\u7684 $\\sum \\rm |len|^2$ \u662f $\\rm 50W$ \u5de6\u53f3\uff0c\u6240\u4ee5\u6709\u70b9\u4fe1\u4ef0\uff0c\u5361\u4e00\u4e0b\u5e38\u6570\uff08\u4e3b\u8981\u662f\u5728\u5360\u590d\u6742\u5ea6\u8f6c\u70b9\u503c\u548c\u70b9\u503c\u8f6c\u7cfb\u6570\u65f6\u51cf\u5c11\u53d6\u6a21\u6b21\u6570\uff09\uff0c\u7136\u540e\u5728\u8bc4\u6d4b\u673a\u597d\u4e00\u70b9\u7684\u65f6\u5019\u5927\u80c6\u7684\u63d0\u4ea4\uff0c\u5c31\u53ef\u4ee5\u8fc7\u4e86\u3002\n\n\u590d\u6742\u5ea6\u662f $\\mathcal O(n\\sum |\\rm len|^2)$ \u7684\u3002\n\n\u5f53\u7136\uff0c\u5728\u533a\u95f4\u957f\u5ea6\u8f83\u5c0f\u7684\u65f6\u5019\u901a\u8fc7\u4e0b\u964d\u5e42\u6765\u901a\u8fc7\u8f83\u5c11\u7684\u70b9\u503c\u8ba1\u7b97\u7cfb\u6570\u7136\u540e\u5f97\u5230\u66f4\u591a\u7684\u70b9\u503c\u662f\u6bd4\u8f83\u4f18\u7684\uff0c\u4e0d\u8fc7\u5f53 $\\rm len>\\sqrt{n}$ \u65f6\u8fd9\u4e2a\u5c31\u4e0d\u662f\u975e\u5e38\u5fc5\u8981\u4e86\uff0c\u53ef\u4ee5\u8003\u8651\u8bbe\u7f6e\u4e00\u4e2a\u9608\u503c\u6bd4\u5982 $30\\sim 50$\uff0c\u5f53\u957f\u5ea6\u5927\u4e8e\u5b83\u7684\u65f6\u5019\u5c31\u76f4\u63a5\u7b97\u51fa $n$ \u4e2a\u70b9\u503c\uff0c\u4e4b\u540e\u5c31\u4e0d\u9700\u8981\u505a dft \u548c idft \u4e86\u3002\n\n\u4e0d\u8fc7\u6ca1\u6709\u8fd9\u6837\u526a\u679d\u4e5f\u8fc7\u4e86\uff1f...\n\n$Code:$\n\n```cpp\n//\u4ee3\u7801\u6709\u4ebf\u70b9\u4e11\n#include<bits/stdc++.h>\nusing namespace std ;\n#define Next( i, x ) for( register int i = head[x]; i; i = e[i].next )\n#define rep( i, s, t ) for( register int i = (s); i <= (t); ++ i )\n#define drep( i, s, t ) for( register int i = (t); i >= (s); -- i )\n#define re register\n#define pb push_back\n#define int long long\nint gi() {\n\tchar cc = getchar() ; int cn = 0, flus = 1 ;\n\twhile( cc < '0' || cc > '9' ) {  if( cc == '-' ) flus = - flus ; cc = getchar() ; }\n\twhile( cc >= '0' && cc <= '9' )  cn = cn * 10 + cc - '0', cc = getchar() ;\n\treturn cn * flus ;\n}\nconst int N = 300 + 5 ; \nconst int V = 1500 + 5 ; \nconst int P = 1e9 + 7 ; \nint n, D, dx, top, m, fac[V], inv[V], finv[V], A[N], B[N], K[V], st[V], vis[N][N] ; \nint cnt, op, Dp[2205][V], Id[N][N] ;\nlong long ffS, iv[V] ; \nstruct node {\n\tint x, y ; \n} qwq[V] ;\nvector<int> dp[2005] ; \nint abc( int x ) {\n\treturn ( x > 0 ) ? x : -x ; \n}\nvoid inc( int &x, int y ) {\n\t( ( x += y ) >= P ) && ( x -= P ) ; \n}\nint fpow( int x, int k ) {\n\tint ans = 1, base = x ; \n\twhile(k) {\n\t\tif( k & 1 ) ans = 1ll * ans * base % P ; \n\t\tbase = 1ll * base * base % P, k >>= 1 ; \n\t} return ans ; \n}\nint Lag( int u, int x, int tp ) {\n\tint fp = 1, ans = 0 ; \n\tfor( re int i = 0; i < tp; ++ i ) {\n\t\tans = ( ans + 1ll * fp * dp[u][i] % P ) % P,\n\t\tfp = 1ll * fp * ( x - i ) % P ; \n\t} return ans ; \n}\nint ffp[V], Ex[V], cnt ; \ninline void dft( int u ) {\n\tint l = dp[u].size(), le = l + 6 ;\n\tfor( re int i = 0; i < l + le; ++ i )\n\tfor( re int j = 0; j <= i && j < l; ++ j ) {\n\t\tEx[i] += dp[u][j] * inv[i - j] % P, ++ cnt ; \n\t}\n\tdp[u].resize(l + l + 5) ;\n\tfor( re int i = 0; i < dp[u].size(); ++ i ) dp[u][i] = Ex[i] % P * fac[i] % P ;\n\tfor( re int i = 0; i < l + le; ++ i ) Ex[i] = 0 ; \n} \ninline void idft( int u ) {\n\tint l = dp[u].size() ; \n\tfor( re int i = 0; i < l; ++ i ) dp[u][i] = dp[u][i] * inv[i] % P ; \n\tfor( re int i = 0; i < l; ++ i )\n\tfor( re int j = 0; j <= i; ++ j ) \n\t\tinc( Ex[i], dp[u][j] * finv[i - j] % P ), ++ cnt ; \n\tfor( re int i = 0; i < l; ++ i ) dp[u][i] = Ex[i] ;\n\tfor( re int i = 0; i < l; ++ i ) Ex[i] = 0 ; \n}\nvoid dfs( int l, int r, int L, int R ) {\n\tif( l > r || vis[l][r] == op ) return ;\n\tint ft = R - L + 1 ;\n\tvis[l][r] = op ; int u = Id[l][r] ; \n\tint lx = max( l, ( r + l - 2 ) / 2 ), rx = min( r, ( r + l + 2 ) / 2 ) ; \n\tdp[u].clear() ; \n\tif( l == r ) {\n\t\tdp[u].pb(Dp[u][op - 1]) ; int ff = 0 ; \n\t\tif( A[l] <= L && R <= B[l] ) dp[u].pb(1), ++ ff ; \n\t\tDp[u][op] = Lag(u, ft, ff + 1 ), dft(u) ; \n\t\tdp[u].resize(2 * (r - l) + 4) ; \n\t\treturn ; \n\t}\n\tdp[u].resize(r - l + 3) ; \n\tfor( re int i = lx; i <= rx; ++ i ) {\n\t\tint ll = i - l, rr = r - i ;\n\t\tif( abc(rr - ll) > 2 ) continue ;\n\t\tdfs( l, i - 1, L, R ), dfs( i + 1, r, L, R ) ; \n\t\tif( A[i] > L || B[i] < R ) continue ;\n\t\tif( i == l ) \n\t\t\tfor( re int j = 1; j <= r - l + 2; ++ j ) \n\t\t\t\tinc( dp[u][j], dp[Id[i + 1][r]][j - 1] ) ; \n\t\telse if( i == r ) \n\t\t\tfor( re int j = 1; j <= r - l + 2; ++ j ) \n\t\t\t\tinc( dp[u][j], dp[Id[l][i - 1]][j] ) ; \n\t\telse \n\t\t\tfor( re int j = 1; j <= r - l + 2; ++ j )\n\t\t\t\tinc( dp[u][j], 1ll * dp[Id[l][i - 1]][j] * dp[Id[i + 1][r]][j - 1] % P ) ; \n\t}\n\tfor( re int i = 1; i <= r - l + 2; ++ i ) inc( dp[u][i], dp[u][i - 1] ) ; \n\tfor( re int i = 0; i <= r - l + 2; ++ i ) inc( dp[u][i], Dp[u][op - 1] ) ; \n\tdp[u].resize(r - l + 2), idft(u) ; \n\tDp[u][op] = Lag(u, ft, r - l + 2), dft(u) ; \n\tdp[u].resize(2 * (r - l) + 4) ; \n}\nvoid Dfs( int l, int r ) {\n\tif( l > r || Id[l][r] ) return ;\n\tId[l][r] = ++ cnt ; if( l == r ) return ; \n\tint lx = max( l, ( r + l - 2 ) / 2 ), rx = min( r, ( r + l + 2 ) / 2 ) ;\n\tfor( re int i = lx; i <= rx; ++ i ) {\n\t\tint ll = i - l, rr = r - i ;\n\t\tif( abc(rr - ll) > 2 ) continue ;\n\t\tDfs( l, i - 1 ) ; Dfs( i + 1, r ) ; \n\t}\n}\nsigned main()\n{\n\tn = gi(), D = n + 50 ; fac[0] = inv[0] = iv[0] = 1 ; \n\trep( i, 1, n ) A[i] = gi(), B[i] = gi(), K[++ top] = A[i], K[++ top] = B[i] + 1 ; \n\trep( i, 1, D ) fac[i] = 1ll * fac[i - 1] * i % P, inv[i] = fpow( fac[i], P - 2 ) ; \n\trep( i, 1, D ) iv[i] = fpow( i, P - 2 ) ; \n\trep( i, 0, D ) finv[i] = (i & 1) ? P - inv[i] : inv[i] ; \n\tsort( K + 1, K + top + 1 ) ; \n\tm = top, top = 0 ; \n\trep( i, 1, m ) if( K[i] != K[i - 1] ) st[++ top] = K[i] ; \n\tDfs( 1, n ) ;\n\tfor( re int i = 2; i <= top; ++ i )\n\t\top = i, dx = min( D, st[i] - st[i - 1] ), dfs( 1, n, st[i - 1], st[i] - 1 ) ;\n\tprintf(\"%lld\\n\", Dp[Id[1][n]][op] % P ) ; \n\tcerr << cnt << endl ; \n\treturn 0 ;\n}\n```\n\n\n\n\n",
        "postTime": 1594080446,
        "uid": 30036,
        "name": "Soulist",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5469 \u3010[NOI2019]\u673a\u5668\u4eba\u3011"
    },
    {
        "content": "\u65e2\u7136\u8fd9\u9898\u6ca1\u9898\u89e3\u90a3\u6211\u5c31\u53d1\u4e00\u4e2a\u5427\uff0c\u8bb2\u5f97\u4e0d\u6e05\u695a\u8bf7\u89c1\u8c05\n\n\u819c\u62dc\u5f53\u573aA\u6389\u7684\u5de8\u4f6c(\u6211\u662fNOI Cu\u6eda\u7c97\u72d7)\n\n\u6b22\u8fce\u79fb\u6b65https://www.cnblogs.com/suncongbo/p/11217236.html\n\n\u9996\u5148\u6211\u4eec\u8003\u8651\uff0c\u4e00\u4e2a\u5e8f\u5217\u4f4d\u7f6e\u6700\u53f3\u8fb9\u7684\u6700\u5927\u503c\u53ef\u4ee5\u8d70\u904d\u6574\u4e2a\u5e8f\u5217\uff0c\u5e76\u4e14\u5176\u4f59\u4efb\u4f55\u70b9\u90fd\u4e0d\u80fd\u8de8\u8fc7\u8fd9\u4e2a\u4f4d\u7f6e\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u533a\u95f4dp, $dp[l][r][x]$\u8868\u793a\u533a\u95f4$[l,r]$\u6700\u5927\u503c\u4e0d\u8d85\u8fc7$x$\u7684\u65b9\u6848\u6570\uff0c\u679a\u4e3e\u6700\u5927\u503c\u70b9$mid$\u53ca\u5176\u503c$k$, $dp[l][r][x]=\\sum_{mid}\\sum_{k}dp[l][mid-1][k]\\times dp[mid+1][r][k-1]$, \u4e5f\u53ef\u4ee5\u8bbe$dp[l][r][x]$\u8868\u793a\u533a\u95f4$[l,r]$\u7684\u6700\u5927\u503c\u6070\u597d\u4e3a$x$\u7684\u65b9\u6848\u6570\uff0c\u679a\u4e3e\u6700\u5927\u503c\u70b9$mid$\u5219\u6709$dp[l][r][x]=\\sum_{mid}\\sum_{k\\le x}dp[l][mid-1][k]\\sum_{k<x}dp[mid+1][r][k]$.\n\n\u53ef\u83b7\u5f97$35$\u5206\uff0c\u5f53\u7136\u5982\u679c\u4f60\u6709\u68a6\u60f3\u6570\u7ec4\u5f00\u5927\u70b9\u5361\u5361\u5e38\u5c31\u6709$50$\u5206\u4e86\u3002\uff08\u7136\u800c\u6211\u5728\u8003\u573a\u4e0a\u6ca1\u68a6\u60f3$35$\u5206\u6eda\u7c97\u4e86\uff09\n\n\u7136\u540e\u6b63\u89e3\u7684\u8bdd\uff0c\u6070\u597d\u4e3a$x$\u90a3\u79cd\u72b6\u6001\u6bd4\u8f83\u597d\u3002\n\n\u9996\u5148\u79bb\u6563\u5316\uff0c\u90a3\u4e48\u6211\u4eec\u53d1\u73b0\u5f53$k$\u5728\u6bcf\u4e00\u6bb5\u533a\u95f4\u5185\u65f6\uff0c\u8f6c\u79fb\u662f\u7c7b\u4f3c\u7684\u3002\n\n\u4e00\u4e2a\u7ed3\u8bba\u662f\uff0c\u5f53$k$\u5728\u67d0\u4e00\u6bb5\u533a\u95f4\u5185\u65f6$dp[l][r][k]$\u662f\u5173\u4e8e$k$\u7684\u4e0d\u8d85\u8fc7$(r-l)$\u6b21\u591a\u9879\u5f0f\u3002\n\n\u8bc1\u660e: \u9996\u5148$l=r$\u65f6\u663e\u7136\u662f$0$\u6b21\u591a\u9879\u5f0f\uff0c\u5f53$l<r$\u65f6\uff0c\u6211\u4eec\u679a\u4e3e$mid$\u7136\u540e\u5de6\u8fb9\u6709\u4e00\u4e2a$mid-1-l$\u6b21\u591a\u9879\u5f0f\u53f3\u8fb9\u6709\u4e00\u4e2a$r-mid-1$\u6b21\u591a\u9879\u5f0f\uff0c\u53c8\u56e0\u4e3a\u8f6c\u79fb\u8981\u5bf9\u5de6\u53f3\u4e24\u8fb9\u591a\u9879\u5f0f\u505a\u524d\u7f00\u548c\u518d\u76f8\u4e58(\u8fd9\u4e2a\u5177\u4f53\u89c1\u4e0b\u4e00\u6bb5)\uff0c\u6240\u4ee5\u6b21\u6570\u8981$+1$($k$\u6b21\u591a\u9879\u5f0f\u7684\u524d\u7f00\u548c\u662f$(k+1)$\u6b21\u591a\u9879\u5f0f)\uff0c\u6240\u4ee5\u603b\u6b21\u6570\u4e3a$(mid-1-l+1)+(r-mid-1+1)=r-l$.\n\n\u8fd9\u91cc\u89e3\u91ca\u4e00\u4e0b\u5982\u4f55\u8f6c\u79fb: $dp[l][r][x]$, \u5de6\u53f3\u4e24\u8fb9\u5206\u5f00\u8003\u8651\uff0c\u8003\u8651\u73b0\u5728\u679a\u4e3e\u7684$k$, \u5047\u8bbe$k$\u5728$x$\u533a\u95f4\u524d\u9762\u7684\u533a\u95f4\u91cc\uff0c\u90a3\u4e48\u8fd9\u4e2a\u503c\u4e0e$x$\u533a\u95f4\u5185\u7684\u81ea\u53d8\u91cf\u65e0\u5173\u4e86\uff0c\u53d8\u6210\u4e86\u201c\u5e38\u6570\u201d(\u56e0\u4e3a\u8fd9\u4e2a\u533a\u95f4\u6240\u5305\u542b\u7684\u6570\u65e0\u8bba\u5982\u4f55\u90fd\u6bd4\u81ea\u53d8\u91cf\u5c0f)\uff0c\u800c\u8fd9\u4e2a\u201c\u5e38\u6570\u201d\u7684\u503c\u5c31\u662f$dp[l][r][k']$ ($k'$\u4e3a$k$\u6240\u5728\u7684\u533a\u95f4)\u8fd9\u4e2a\u591a\u9879\u5f0f\u5728\u6bcf\u4e2a$k'$\u533a\u95f4\u5185\u7684\u70b9\u7684\u70b9\u503c\u4e4b\u548c\uff0c\u628a\u8fd9\u4e2a\u503c\u52a0\u5230$dp[l][r][x]$\u591a\u9879\u5f0f\u7684\u5e38\u6570\u9879\u91cc\u3002\n\n\u5047\u8bbe$k$\u5728$x$\u533a\u95f4\u91cc\uff0c\u90a3\u4e48\u65b0\u7684\u591a\u9879\u5f0f\u76f4\u63a5\u5c31\u7b49\u4e8e\u8fd9\u4e2a\u591a\u9879\u5f0f\u5728\u533a\u95f4\u5185\u7684\u5c0f\u4e8e\u7b49\u4e8e\u81ea\u53d8\u91cf\u7684\u524d\u7f00\u548c(\u5982\u679c\u73b0\u5728\u679a\u4e3e\u7684\u662f\u5de6\u8fb9)\uff0c\u6216\u8005\u591a\u9879\u5f0f\u5728\u533a\u95f4\u5185\u5c0f\u4e8e\u81ea\u53d8\u91cf\u7684\u524d\u7f00\u548c(\u5982\u679c\u73b0\u5728\u679a\u4e3e\u7684\u662f\u53f3\u8fb9)\u3002\n\n\u4e8e\u662f\u8bb0\u5fc6\u5316\u641c\u7d22\u4e00\u6ce2\uff0c\u4f7f\u7528\u591a\u9879\u5f0f\u524d\u7f00\u548c\u8fdb\u884c\u8f6c\u79fb\uff0c\u8fd9\u6837\u679a\u4e3e$mid$\u4e4b\u540e\u590d\u6742\u5ea6\u4e3a\u591a\u9879\u5f0f\u6b21\u6570\u7684\u5e73\u65b9\u3002\n\n\u591a\u9879\u5f0f\u524d\u7f00\u548c\u9700\u8981\u9884\u5904\u7406$s_k(x)=\\sum^{x}_{i=0}x^k$, \u8fd9\u662f\u4e00\u4e2a$(k+1)$\u6b21\u591a\u9879\u5f0f\uff0c\u6240\u4ee5Lagrange\u63d2\u503c\u6c42\u51fa\u6765\u7cfb\u6570\u3002\u636e\u8bf4\u6709\u5176\u4ed6\u7684\u641e\u6cd5\uff0c\u4f46\u662f\u6211\u53ea\u80fd\u60f3\u5230\u8fd9\u4e00\u79cd\u3002\n\n\u88f8\u505a$80$\u5206\u8d77\u6b65(\u6211\u88f8\u505a\u4e86\u4e00\u6ce2\u5f97\u4e86$85$)\n\n\u526a\u679d\u4f18\u5316\u53ef\u83b7\u5f97$100$\u5206\u3002\n\n\u597d\u96be\u5199\u554a\uff0c\u6211\u597d\u83dc\u554a\u2026\u2026\n\n### \u4ee3\u7801\n```cpp\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<iostream>\n#include<vector>\n#include<algorithm>\n#define llong long long\nusing namespace std;\n\nconst int P = 1e9+7;\nconst int N = 301;\n\nllong quickpow(llong x,llong y)\n{\n\tllong cur = x,ret = 1ll;\n\tfor(int i=0; y; i++)\n\t{\n\t\tif(y&(1ll<<i)) {y-=(1ll<<i); ret = ret*cur%P;}\n\t\tcur = cur*cur%P;\n\t}\n\treturn ret;\n}\nllong mulinv(llong x) {return quickpow(x,P-2);}\n\nllong aux[N+4],aux2[N+4];\nstruct Polynomial\n{\n\tvector<llong> a; int n;\n\tPolynomial() {}\n\tPolynomial(int _n) {n = _n; for(int i=0; i<=n; i++) a.push_back(0ll);}\n\tvoid clear() {n = 0; a.clear(); a.push_back(0ll);}\n\tvoid output() {printf(\"deg%d, \",n); for(int i=0; i<=n; i++) printf(\"%lld \",a[i]); puts(\"\");}\n\tPolynomial operator +(Polynomial &arg) const\n\t{\n\t\tPolynomial ret(max(n,arg.n));\n\t\tfor(int i=0; i<=min(n,arg.n); i++)\n\t\t{\n\t\t\tret.a[i] = (a[i]+arg.a[i])%P;\n\t\t}\n\t\tfor(int i=min(n,arg.n)+1; i<=n; i++) ret.a[i] = a[i];\n\t\tfor(int i=min(n,arg.n)+1; i<=arg.n; i++) ret.a[i] = arg.a[i];\n\t\treturn ret;\n\t}\n\tPolynomial operator -(Polynomial &arg) const\n\t{\n\t\tPolynomial ret(max(n,arg.n));\n\t\tfor(int i=0; i<=min(n,arg.n); i++)\n\t\t{\n\t\t\tret.a[i] = (a[i]-arg.a[i]+P)%P;\n\t\t}\n\t\tfor(int i=min(n,arg.n)+1; i<=n; i++) ret.a[i] = a[i];\n\t\tfor(int i=min(n,arg.n)+1; i<=arg.n; i++) ret.a[i] = P-arg.a[i];\n\t\treturn ret;\n\t}\n\tPolynomial operator *(Polynomial &arg) const\n\t{\n\t\tPolynomial ret(n+arg.n);\n\t\tfor(int i=0; i<=n; i++)\n\t\t{\n\t\t\tfor(int j=0; j<=arg.n; j++)\n\t\t\t{\n\t\t\t\tret.a[i+j] = (ret.a[i+j]+a[i]*arg.a[j])%P;\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n\tllong calc(llong x)\n\t{\n\t\tllong ret = 0ll;\n\t\tfor(int i=n; i>=0; i--)\n\t\t{\n\t\t\tret = (ret*x+a[i])%P;\n\t\t}\n\t\treturn ret;\n\t}\n\tvoid interpoly(int _n,llong ax[],llong ay[])\n\t{\n\t\tn = _n; for(int i=0; i<=n; i++) a.push_back(0ll);\n\t\tfor(int i=0; i<=n+1; i++) aux[i] = 0ll;\n\t\taux[0] = 1ll;\n\t\tfor(int i=0; i<=n; i++)\n\t\t{\n\t\t\tfor(int j=i+1; j>0; j--)\n\t\t\t{\n\t\t\t\taux[j] = (aux[j-1]-aux[j]*ax[i]%P+P)%P;\n\t\t\t}\n\t\t\taux[0] = P-aux[0]*ax[i]%P;\n\t\t}\n\t\tfor(int i=0; i<=n; i++)\n\t\t{\n\t\t\tllong tmp = 1ll;\n\t\t\tfor(int j=0; j<=n; j++)\n\t\t\t{\n\t\t\t\tif(i==j) continue;\n\t\t\t\ttmp = tmp*(ax[i]-ax[j]+P)%P;\n\t\t\t}\n\t\t\tllong coe = mulinv(tmp);\n\t\t\tfor(int j=n+1; j>=0; j--) {aux2[j] = aux[j];}\n\t\t\tfor(int j=n; j>=0; j--)\n\t\t\t{\n\t\t\t\ta[j] = (a[j]+aux2[j+1]*coe%P*ay[i])%P;\n\t\t\t\taux2[j] = (aux2[j]+ax[i]*aux2[j+1])%P;\n\t\t\t}\n\t\t}\n\t}\n};\nPolynomial tmp1,tmp2,tmp3;\nPolynomial dp[2661][(N<<1)+3],sdp[2661][(N<<1)+3];\nllong lval[2661][(N<<1)+3],rval[2661][(N<<1)+3];\nint dpid[N+4][N+4];\nPolynomial spw[N+4];\nstruct Interval\n{\n\tllong lb,rb; //[1,2n]\n} a[N+3];\nvector<llong> disc;\nllong spwx[N+3],spwy[N+3];\nint mx[N+3][N+3];\nint n,nsta;\nllong ans;\n\nint getid(llong x) {return lower_bound(disc.begin(),disc.end(),x)-disc.begin();} //no +1\n\nPolynomial prefixsum(Polynomial poly)\n{\n\tPolynomial ret(poly.n+1);\n\tfor(int i=0; i<=poly.n; i++)\n\t{\n\t\tfor(int j=0; j<=i+1; j++)\n\t\t{\n\t\t\tret.a[j] = (ret.a[j]+poly.a[i]*spw[i].a[j])%P;\n\t\t}\n\t}\n\treturn ret;\n}\n\nvoid dfs(int l,int r,int x)\n{\n\tPolynomial tmp1,tmp2,tmp3;\n\tif(dpid[l][r] && dp[dpid[l][r]][x].a.size()>0) {return;}\n\tif(!dpid[l][r]) {nsta++; dpid[l][r] = nsta;}\n\tif(l==r)\n\t{\n\t\tif(!dpid[l][r]) {nsta++; dpid[l][r] = nsta;}\n\t\tdp[dpid[l][r]][x] = Polynomial(0); dp[dpid[l][r]][x].a[0] = (x>=a[l].lb&&x<=a[l].rb) ? 1ll : 0ll;\n\t\tsdp[dpid[l][r]][x] = prefixsum(dp[dpid[l][r]][x]);\n\t\tlval[dpid[l][r]][x] = sdp[dpid[l][r]][x].calc(disc[x-1]);\n\t\trval[dpid[l][r]][x] = sdp[dpid[l][r]][x].calc(disc[x]);\n\t\treturn;\n\t}\n\tdp[dpid[l][r]][x].clear(); sdp[dpid[l][r]][x].clear();\n\tif(mx[l][r]>x) return;\n\tfor(int lenl=(r-l+1)>>1; lenl<=(r-l+1)+1-((r-l+1)>>1); lenl++)\n\t{\n\t\tint mid = l+lenl-1;\n\t\tif(!(x>=a[mid].lb && x<=a[mid].rb)) {continue;} //\u6ce8\u610f\u6b64\u5904\u8981\u7279\u5224\n\t\ttmp1.clear(); tmp2.clear();\n\t\tif(mid>l)\n\t\t{\n\t\t\tfor(int k=1; k<=x; k++)\n\t\t\t{\n\t\t\t\tdfs(l,mid-1,k);\n\t\t\t\tif(k<x)\n\t\t\t\t{\n\t\t\t\t\ttmp1.a[0] = (tmp1.a[0]+rval[dpid[l][mid-1]][k]-lval[dpid[l][mid-1]][k]+P)%P;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttmp1 = tmp1+sdp[dpid[l][mid-1]][k];\n\t\t\t\t\ttmp1.a[0] = (tmp1.a[0]-lval[dpid[l][mid-1]][k]+P)%P;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttmp1 = Polynomial(0); tmp1.a[0] = 1ll;\n\t\t}\n\t\tif(mid<r)\n\t\t{\n\t\t\tfor(int k=0; k<=x; k++)\n\t\t\t{\n\t\t\t\tdfs(mid+1,r,k);\n\t\t\t\tif(k<x)\n\t\t\t\t{\n\t\t\t\t\ttmp2.a[0] = (tmp2.a[0]+rval[dpid[mid+1][r]][k]-lval[dpid[mid+1][r]][k]+P)%P;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttmp2 = tmp2+sdp[dpid[mid+1][r]][k];\n\t\t\t\t\ttmp2 = tmp2-dp[dpid[mid+1][r]][k];\n\t\t\t\t\ttmp2.a[0] = (tmp2.a[0]-lval[dpid[mid+1][r]][k]+P)%P;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttmp2 = Polynomial(0); tmp2.a[0] = 1ll;\n\t\t}\n\t\ttmp3 = tmp1*tmp2;\n\t\tdp[dpid[l][r]][x] = dp[dpid[l][r]][x]+tmp3;\n\t}\n\tsdp[dpid[l][r]][x] = prefixsum(dp[dpid[l][r]][x]);\n\tlval[dpid[l][r]][x] = sdp[dpid[l][r]][x].calc(disc[x-1]);\n\trval[dpid[l][r]][x] = sdp[dpid[l][r]][x].calc(disc[x]);\n}\n\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1; i<=n; i++) {scanf(\"%lld%lld\",&a[i].lb,&a[i].rb); disc.push_back(a[i].lb-1); disc.push_back(a[i].rb);}\n\tfor(int i=0; i<=n; i++)\n\t{\n\t\tspwx[0] = 0ll; spwy[0] = 0ll;\n\t\tfor(int j=1; j<=i+1; j++)\n\t\t{\n\t\t\tspwx[j] = j;\n\t\t\tspwy[j] = (spwy[j-1]+quickpow(j,i))%P;\n\t\t}\n\t\tspw[i].interpoly(i+1,spwx,spwy);\n\t}\n\tsort(disc.begin(),disc.end()); disc.erase(unique(disc.begin(),disc.end()),disc.end());\n\tfor(int i=1; i<=n; i++) {a[i].lb = getid(a[i].lb); a[i].rb = getid(a[i].rb);}\n\tnsta = 1; for(int i=0; i<disc.size(); i++)\n\t{\n\t\tdp[1][i] = Polynomial(0); dp[1][i].a[0] = 1ll;\n\t\tsdp[1][i] = prefixsum(dp[1][i]);\n\t\tlval[1][i] = sdp[1][i].calc(disc[i-1]);\n\t\trval[1][i] = sdp[1][i].calc(disc[i]);\n\t}\n\tfor(int i=1; i<=n; i++)\n\t{\n\t\tmx[i][i] = a[i].lb;\n\t\tfor(int j=i+1; j<=n; j++)\n\t\t{\n\t\t\tmx[i][j] = max(mx[i][j-1],(int)a[j].lb);\n\t\t}\n\t}\n\tans = 0ll;\n\tfor(int i=1; i<disc.size(); i++)\n\t{\n\t\tdfs(1,n,i);\n\t\tans = (ans+sdp[dpid[1][n]][i].calc(disc[i])-sdp[dpid[1][n]][i].calc(disc[i-1])+P)%P;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1563596379,
        "uid": 23613,
        "name": "suncongbo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5469 \u3010[NOI2019]\u673a\u5668\u4eba\u3011"
    },
    {
        "content": "\u8fd9\u9898\u8017\u8d39\u6211\u4e00\u4e2a\u4e0b\u5348\u52a0\u534a\u4e2a\u665a\u4e0a\u52a0\u5c0f\u534a\u4e2a\u65e9\u4e0a\uff0c\u4f5c\u6b64\u9898\u89e3\u4ee5\u8bb0\u4e4b\u3002\n\n\u5982\u679c\u6709\u4ec0\u4e48\u5199\u9519\u7684\u5730\u65b9\u8fd8\u8bf7\u795e\u7287\u4eec\u4e0d\u541d\u8d50\u6559\uff0c\u62dc\u8c22\uff01\n\n\n## \u62c9\u683c\u6717\u65e5\u63d2\u503c\u4f18\u5316 DP\n\n#### \u6734\u7d20 DP + \u524d\u7f00\u548c\u4f18\u5316\n\n\u672c\u8eab DP \u5c31\u6bd4\u8f83\u5de7\u5999\uff0c\u679a\u4e3e\u6700\u5927\u503c\u7684\u4f4d\u7f6e\u8fdb\u884c\u533a\u95f4 DP\uff0c\u5229\u7528\u4e86\u6700\u5927\u503c\u5de6\u8fb9\u7684\u533a\u95f4\u548c\u6700\u5927\u503c\u53f3\u8fb9\u7684\u533a\u95f4\u4e92\u4e0d\u5f71\u54cd\u7684\u6027\u8d28\uff08\u5982\u679c\u6709\u591a\u4e2a\u6700\u5927\u503c\u5c31\u9009\u53d6\u6700\u53f3\u8fb9\u7684\uff0c\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u5176\u5de6\u53f3\u4e24\u6bb5\u4e00\u5b9a\u4e92\u4e0d\u5e72\u6d89\uff09\u3002\u52a0\u4e0a\u524d\u7f00\u548c\u4f18\u5316\u53ef\u4ee5\u8fbe\u5230 $O(n^3w)$\u3002\u72b6\u6001\u8868\u793a\uff1a$f[l][r][k]$ \u8868\u793a\u5728\u533a\u95f4 $[l,r]$ \u4e2d\uff0c\u6700\u5927\u503c\u4e0e\u4e0b\u9650\u7684\u5dee\u4e0d\u8d85\u8fc7 $k$ \u7684\u65b9\u6848\u6570\u3002\u8f6c\u79fb\u5c31\u662f\u679a\u4e3e\u6700\u5927\u503c\u7684\u4f4d\u7f6e\u3002\u8f6c\u79fb\u65b9\u7a0b\uff1a$f[l][r][k]= \\sum \\limits_{l \\le i \\le r} {f[l][i-1][k] \\times f[i+1][r][k-1]}$\u3002\u89e3\u91ca\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u662f $f[i+1][r][k-1]$\uff0c\u56e0\u4e3a DP \u4e2d\u7684\u201c\u6700\u5927\u503c\u201d\u5c31\u662f\u6700\u9760\u53f3\u7684\u6700\u5927\u503c\uff0c\u6240\u4ee5\u6574\u533a\u95f4\u6700\u5927\u503c\u53f3\u8fb9\u7684\u533a\u95f4\u7684\u6700\u5927\u503c\u4e00\u5b9a\u6bd4\u6574\u533a\u95f4\u6700\u5927\u503c $k$ \u5c0f\uff08\u800c\u5de6\u533a\u95f4\u7684\u6700\u5927\u503c\u53ef\u4ee5\u4e3a $k$)\u3002\n\n\n#### \u5229\u7528\u6709\u6548\u6bb5\u8f83\u5c11\u8fdb\u884c\u4f18\u5316\n\n\u539f\u672c $O(n^3w)$ \u4e2d\u6709 $O(n^2)$ \u662f\u679a\u4e3e\u533a\u95f4\uff0c\u4f46\u5176\u5b9e\u5408\u6cd5\u7684\u533a\u95f4\u6570\u5f88\u5c11\u3002\u53ef\u4ee5\u9884\u5904\u7406\u5408\u6cd5\u533a\u95f4\u6570\u8fdb\u884c DP\uff0c\u8bb0\u5408\u6cd5\u533a\u95f4\u6570\u4e3a $m$\uff0c\u6253\u8868\u53d1\u73b0 $m$ \u5176\u5b9e\u6700\u591a\u4e5f\u5c31 $2500$ \u5de6\u53f3\u3002\u72b6\u6001\u8868\u793a\uff1a$f[i][k]$ \u8868\u793a\u7b2c $i$ \u4e2a\u5408\u6cd5\u6bb5\uff0c\u6700\u5927\u503c\u548c\u4e0b\u9650\u7684\u5dee\u503c\u4e0d\u8d85\u8fc7 $k$ \u7684\u65b9\u6848\u6570\u3002\u5bf9\u4e8e\u6240\u6709\u533a\u95f4\u6309\u7167\u957f\u5ea6\u6392\u5e8f\uff0c\u4f7f\u957f\u5ea6\u5355\u8c03\u4e0d\u51cf\uff0c\u4fdd\u8bc1\u6240\u6709\u533a\u95f4\u7684\u5b50\u533a\u95f4\u90fd\u5728\u5176\u4e4b\u524d\u88ab\u6c42\u51fa\u7ed3\u679c\u3002\u8f6c\u79fb\u65b9\u7a0b\u53d8\u4e3a\uff1a$f[id[l][r]][k]= \\sum \\limits_{l \\le i \\le r\u4e14\u5de6\u53f3\u533a\u95f4\u5747\u5408\u6cd5} {f[id[[l][i-1]][k] \\times f[id[i+1][r]][k-1]}$\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(nmw)$\u3002\u4f46\u662f\u8fd9\u4e2a DP \u7684\u590d\u6742\u5ea6\u4ecd\u7136\u4e0d\u53ef\u63a5\u53d7\uff0c\u539f\u56e0\u5728\u4e8e\u9700\u8981\u5728\u503c\u57df\u8303\u56f4\u679a\u4e3e\uff0c\u800c\u672c\u9898\u503c\u57df $w$ \u5f88\u5927\u3002\n\n#### \u62c9\u683c\u6717\u65e5\u63d2\u503c\u4f18\u5316\n\n\u4ecd\u7136\u662f\u72b6\u6001\u8868\u793a\uff1a$f[i][k]$ \u8868\u793a\u7b2c $i$ \u4e2a\u5408\u6cd5\u6bb5\uff0c\u6700\u5927\u503c\u548c\u4e0b\u9650\u7684\u5dee\u503c\u4e0d\u8d85\u8fc7 $k$ \u7684\u65b9\u6848\u6570\u3002\u6211\u4eec\u53d1\u73b0\u51fd\u6570 $f[i]$ \u4e3a\u5173\u4e8e $k$ \u7684 $n$ \u6b21\u591a\u9879\u5f0f\uff08\u957f\u5ea6\u4e3a $1$ \u7684\u533a\u95f4\u7684 $f[i][k]$ \u662f\u5173\u4e8e $k$ \u7684\u4e00\u6b21\u5f0f\uff0c\u518d\u6839\u636e\u8f6c\u79fb\u65b9\u7a0b\uff0c$f[i][k]$ \u8fd9\u4e2a\u5173\u4e8e $k$ \u7684\u51fd\u6570\u7684\u6b21\u6570\u5c31\u662f\u533a\u95f4 $i$ \u7684\u957f\u5ea6\uff0c\u6700\u957f\u7684\u533a\u95f4\u957f\u5ea6\u4e5f\u5c31\u662f $n$ \u4e86\uff09\uff0c\u53ef\u4ee5\u5148\u6c42\u51fa $n+1$ \u9879\u7684\u503c\uff0c\u518d\u7528\u62c9\u683c\u6717\u65e5\u63d2\u503c\u6c42\u51fa\u5176\u5b83\u4f4d\u7f6e\u7684\u503c\u3002\u7531\u4e8e\u4e0b\u6807\u662f\u8fde\u7eed\u7684\uff0c\u62c9\u683c\u6717\u65e5\u63d2\u503c\u53ef\u4ee5\u505a\u5230 $O(n)$\uff08\u7b80\u5355\u7684\u8bf4\uff1a\u539f\u672c\u7684 $x_i$ \u662f\u8fde\u7eed\u7684\uff08\u5c31\u662f $[1,n+1]$\uff09\uff0c\u5e26\u5165 $x=len$ \u540e\u4ecd\u7136\u662f\u8fde\u7eed\u7684\u6570\u3002\u516c\u5f0f $ \\sum\\limits_{1 \\le i \\le n}{y_i \\times \\prod\\limits_{1 \\le j \\le n}^{j \\neq i}{\\frac{x-x_j}{x_i-x_j}}}$ \u7684\u53f3\u534a\u90e8\u5206\uff08\u5373 $\\prod\\limits_{1 \\le j \\le n}^{j \\neq i}{\\frac{x-x_j}{x_i-x_j}}$\uff09\u7684\u5206\u5b50\u5206\u6bcd\u5176\u5b9e\u90fd\u662f\u4e00\u6bb5\u8fde\u4e58\u79ef\u6316\u53bb\u4e00\u4e2a\u6570\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u6210\u4e24\u7aef\u8fde\u4e58\u79ef\u76f8\u4e58\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u901a\u8fc7\u9884\u5904\u7406\u524d\u540e\u7f00\u79ef\u6765\u5b9e\u73b0 $O(1)$ \u6c42\u4e58\u79ef\uff0c$O(n)$ \u6c42 $n$ \u4e2a\u4e58\u79ef\u5f0f\u7684\u548c\uff0c\u5177\u4f53\u5b9e\u73b0\u89c1\u4ee3\u7801\uff09\u3002\n\n\u5982\u679c\u533a\u95f4\u957f\u5ea6\u8d85\u8fc7 $n+1$\uff0c\u5c31\u5148\u5c06\u524d $n+1$ \u9879 DP \u6c42\u51fa\uff0c\u540e\u9762\u90e8\u5206\u63d2\u503c\u6c42\uff0c\u5426\u5219\u76f4\u63a5 DP \u6c42\u3002\n\n\uff08\u6ce8\uff1a\u8fd9\u91cc\u63d0\u5230\u7684\u201c\u6bb5\u201d\u6307\u7684\u662f\u5c06\u6240\u6709\u4e0a\u4e0b\u754c\u6392\u5e8f\u4e4b\u540e\uff0c\u76f8\u90bb\u4e24\u4e2a\u503c\u4e4b\u95f4\u7684\u6bb5\u3002\u4e14\u4e0a\u4e0b\u754c\u5728\u8bfb\u5165\u7684\u65f6\u5019\u5df2\u7ecf\u8f6c\u5316\u6210\u5de6\u95ed\u53f3\u5f00\u7684\u5f62\u5f0f\uff0c\u4fdd\u8bc1\u4e86\u6bcf\u4e2a\u8fde\u7eed\u6bb5 DP \u7684\u6b63\u786e\u6027\u3002\u8bb0\u533a\u95f4\u957f\u5ea6 $r-l$ \u4e3a $len$\u3002 \uff09\n\u7b2c $i$ \u6bb5\u7684\u7b54\u6848\u7406\u8bba\u4e0a\u5e94\u8be5\u662f $f[i][len]$\uff0c\u5f53\u957f\u5ea6\u8d85\u8fc7 $n+1$ \u7684\u65f6\u5019\u5c31\u662f\u8fd9\u4e2a\u51fd\u6570\u5728 $x=len$ \u7684\u65f6\u5019\u7684\u503c\u3002\n\u6bcf\u6b21\u628a\u7b54\u6848\u5b58\u5728 $f[i][0]$ \u91cc\uff0c\u56e0\u4e3a\u8fd9\u4e00\u6bb5\u6240\u6709\u5408\u6cd5\u7684\u60c5\u51b5\u4e0d\u4f1a\u5f71\u54cd\u4e0b\u4e00\u6bb5\u7684\u6c42\u89e3\uff0c\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u7b54\u6848\u5c31\u662f\u6bcf\u6bb5\uff08\u201c\u6bb5\u201d\u662f\u6307\u503c\u57df\u6bb5\uff0c\u4e0d\u662f\u533a\u95f4\uff09\u7ed3\u679c\u76f8\u4e58\uff0c\u8fd9\u91cc\u76f4\u63a5\u7528\u524d\u4e00\u6bb5\u7ed3\u679c\u4f5c\u4e3a\u540e\u4e00\u6bb5\u7684\u8d77\u70b9\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e58\u6cd5\u539f\u7406\u3002\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u7b2c $i$ \u6bb5 DP \u7ed3\u675f\u4e4b\u540e\uff0c$f[i][0]$ \u5b58\u7684\u662f\u524d $i$ \u6bb5\u7b54\u6848\u4e4b\u79ef\uff09\u3002\n\u6700\u7ec8\u7b54\u6848\u5c31\u662f $f[id[1][n]][0]$ \u5566\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2m)$\u3002\n\n#### \u4ee3\u7801\u5b9e\u73b0\uff08\u4e00\u4e9b\u6ce8\u91ca\uff09\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read()\n{\n    int res=0; bool f=0;\n    char ch=getchar();\n    while(!isdigit(ch)) f|=(ch=='-'),ch=getchar();\n    while(isdigit(ch)) res=res*10+(ch^'0'),ch=getchar();\n    return f?-res:res;\n}\nconst int N=605,mod=1000000007;\nstruct node{\n    int l,r;\n    bool operator<(const node &t)const{return r-l<t.r-t.l;}\n}p[3030];\nint n,tot,id[N][N],a[N],b[N];\nint fac[N],inv[N];\ninline int qmi(int x,int y)\n{\n    int res=1;\n    while(y)\n    {\n        if(y&1) res=1ll*res*x%mod;\n        x=1ll*x*x%mod;\n        y>>=1;\n    }\n    return res;\n}\nvoid init(int n)//\u9884\u5904\u7406\u9636\u4e58\u548c\u9006\u5143\n{\n    fac[0]=inv[0]=1;\n    for(int i=1;i<=n;i++) fac[i]=1ll*fac[i-1]*i%mod;\n    inv[n]=qmi(fac[n],mod-2);\n    for(int i=n-1;i>=1;i--) inv[i]=1ll*inv[i+1]*(i+1)%mod;\n}\ninline void add(int &x,int y)\n{\n    x+=y;\n    if(x>=mod) x-=mod;\n}\nvoid dfs(int l,int r)//\u9884\u5904\u7406\u5408\u6cd5\u533a\u95f4\n{\n    if(id[l][r]||l>r) return;\n    id[l][r]=++tot;\n    p[tot]={l,r};\n    for(int i=l;i<=r;i++)//\u679a\u4e3e\u5206\u754c\u7ebf   \n        if(abs((i-l)-(r-i))<=2)\n            dfs(l,i-1),dfs(i+1,r);\n}\nint num[N],cnt;\nvoid read_and_change()\n{\n    for(int i=1;i<=n;i++)\n    {\n        num[++cnt]=a[i]=read();\n        num[++cnt]=b[i]=read()+1;//\u5de6\u95ed\u53f3\u5f00 \u540e\u9762\u65b9\u4fbf\n    }\n    sort(num+1,num+cnt+1);\n    cnt=unique(num+1,num+cnt+1)-num-1;\n    for(int i=1;i<=n;i++)\n    {\n        a[i]=lower_bound(num+1,num+cnt+1,a[i])-num;\n        b[i]=lower_bound(num+1,num+cnt+1,b[i])-num;\n    }\n}\nint f[3030][N],pre[N],suf[N];\ninline void lag(int l,int r,int len)\n{\n    if(len<=n+1) \n    {\n        for(int i=1;i<=tot;i++) f[i][0]=f[i][len];\n        return;\n    }\n    for(int i=1;i<=tot;i++) f[i][0]=0;\n    pre[0]=suf[n+2]=1;//pre\u3001suf\u5c31\u662f\u628a\u5e26\u5165len\u4e4b\u540e\u7684\u5f0f\u5b50\u7684\u5206\u5b50\u524d\u540e\u7f00\u524d\n    for(int i=1;i<=n+1;i++) pre[i]=1ll*pre[i-1]*((len-i+mod)%mod)%mod;\n    for(int i=n+1;i>=1;i--) suf[i]=1ll*suf[i+1]*((len-i+mod)%mod)%mod;\n    for(int i=1;i<=n+1;i++)\n    {\n        int val=1ll*pre[i-1]*suf[i+1]%mod/*\u5206\u5b50*/*inv[n+1-i]%mod*inv[i-1]%mod/*\u5206\u6bcd*/*(((n+1-i)&1)?mod-1:1)%mod/*\u5206\u6bcd\u7684\u7b26\u53f7*/;\n        for(int j=1;j<=tot;j++)\n            add(f[j][0],1ll*val*f[j][i]%mod);\n    }\n}\nint main()\n{\n    n=read();\n    init(n+5);\n    dfs(1,n); sort(p+1,p+tot+1);\n    read_and_change();//\u8bfb\u5165\u5e76\u79bb\u6563\u5316\n    for(int i=0;i<=n+1;i++) f[0][i]=1;\n    for(int t=1;t<cnt;t++)\n    {\n        int len=min(n+1,num[t+1]-num[t]);\n        for(int i=1;i<=tot;i++)\n        {\n            int l=p[i].l,r=p[i].r;\n            for(int j=l;j<=r;j++)\n                if(abs((j-l)-(r-j))<=2&&t>=a[j]&&t<b[j])\n                    for(int k=1;k<=len;k++)\n                        add(f[id[l][r]][k],1ll*f[id[l][j-1]][k]*f[id[j+1][r]][k-1]%mod);\n                        //\u6700\u521d\u7684DP\u4e2d\u7684\u201c\u6700\u5927\u503c\u201d\u5c31\u662f\u6700\u9760\u53f3\u7684\u6700\u5927\u503c\uff0c\u6240\u4ee5\u53f3\u533a\u95f4\u7684\u6700\u5927\u503c\u4e00\u5b9a\u6bd4k\u5c0f(j\u4f4d\u7f6e\u662fk)\n            for(int k=1;k<=len;k++) \n                add(f[id[l][r]][k],f[id[l][r]][k-1]);//\u524d\u7f00\u548c\u4f18\u5316\n        }\n        lag(num[t],num[t+1],num[t+1]-num[t]);\n        for(int i=1;i<=tot;i++)\n            for(int j=1;j<=len;j++)\n                f[i][j]=0;\n    }\n    printf(\"%d\\n\",f[id[1][n]][0]);\n    return 0;\n}\n```",
        "postTime": 1671809316,
        "uid": 546246,
        "name": "E_huan",
        "ccfLevel": 8,
        "title": "P5469 \u673a\u5668\u4eba \u9898\u89e3"
    },
    {
        "content": "#### \u672c\u7bc7\u9898\u89e3\u6ca1\u6709\u76f4\u63a5\u7ed9\u51fa\u6b63\u89e3\u601d\u8def\uff0c\u800c\u662f\u4e00\u6b65\u6b65\u6309\u90e8\u5206\u5206\u8d70\u5411\u6b63\u89e3\u3002\u4e0d\u559c\u6b22\u8fd9\u79cd\u65b9\u5f0f\u7684\uff0c\u5efa\u8bae\u79fb\u6b65\u5176\u4ed6\u9898\u89e3\u3002\n\n### \u89e3\u6790\n#### 0.\u9898\u610f\u5206\u6790\n* \u4e4d\u4e00\u770b\u4e5f\u6ca1\u4ec0\u4e48\uff0c\u4f46\u82e5\u4ee5\u666e\u904d\u7406\u6027\u800c\u8bba\uff0c\u6211\u4eec\u53ef\u4ee5\u5047\u8bbe\u5b58\u5728\u4e00\u4e2a\u5168\u5c40\u6700\u9ad8\u70b9\u3002\n\n* \u5982\u679c\u6700\u9ad8\u70b9\u6709\u591a\u4e2a\uff0c\u6211\u4eec\u53d6\u6700\u9760\u53f3\u7684\u4e00\u4e2a\uff08\u56e0\u4e3a\u5411\u5de6\u53f3\u9650\u5236\u4e0d\u540c\uff09\u3002\n\n* \u80fd\u591f\u770b\u51fa\uff0c\u8fd9\u4e2a\u6700\u9ad8\u70b9\uff08\u79f0\u4e3a $mid$\uff0c\u4e0b\u540c\uff09\u53ef\u4ee5\u8d70\u5230 $1/n$\uff0c\u4e14\u5176\u5de6\u53f3\u4e24\u8fb9\u7684\u533a\u95f4\u4e92\u76f8\u8d70\u4e0d\u5230\u3002\n\n* \u7a0d\u5fae\u624b\u63a8\u4e00\u4e0b\u53ef\u4ee5\u53d1\u73b0\uff0c\u5206\u5947\u5076\u8ba8\u8bba\u4e4b\u540e\u5408\u6cd5\u7684 $mid$ \u4e0d\u8d85\u8fc7 $3$ \u4e2a\uff0c\u800c\u4e14\u5728\u533a\u95f4\u7684\u4e2d\u4f4d\u6570\u5de6\u53f3\u3002\n\n* \u6211\u4f1a\u5206\u6cbb\uff01\u533a\u95f4 $[l,r]$ \u5408\u6cd5=\u6709\u5408\u6cd5 $mid$ +\u5de6\u533a\u95f4\u5408\u6cd5+\u53f3\u533a\u95f4\u5408\u6cd5\u3002\n\n* \u8054\u7cfb\u4e00\u4e0b\u6570\u636e\u8303\u56f4\u3002~~\u6211\u4f1a\u7206\u641c\uff01~~\n\n#### 1.dp \u8bbe\u8ba1\n* \u4ee4 $\\mathit{dp}_ {l,r,mx}$ \u8868\u793a\u533a\u95f4 $[l,r]$ \u7684\u6700\u5927\u503c**\u4e0d\u8d85\u8fc7** $mx$ \u7684\u603b\u65b9\u6848\u6570\uff0c\u5b9a\u4e49 $M=\\max_{i=1}^nB_i$\uff0c\u5219\u6240\u6c42\u7b54\u6848\u5373\u4e3a $\\mathit{dp}_ {1,n,M}$\u3002\n\n* \u63a8\u4e00\u4e0b\u8f6c\u79fb\u5f0f\u3002$\\mathit{dp}_ {l,r,mx}=\\dots$ \u989d\u597d\u50cf\u5f88\u96be\u63a8\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u8f85\u52a9\u72b6\u6001\u6765\u63a8\u4e00\u4e0b\u8bd5\u8bd5\u3002\n\n* \u5b9a\u4e49 $\\mathit{tp}_ {l,r,mx}$ \u4e3a\u533a\u95f4 $[l,r]$ \u7684\u6700\u5927\u503c**\u6070\u597d**\u4e3a $mx$ \u7684\u65b9\u6848\u6570\u3002\n\n* \u90a3\u4e48\u5bf9\u4e8e\u4e00\u4e2a $\\mathit{tp}_ {l,r,mx}$\uff0c\u611f\u6027\u7406\u89e3\u4e00\u4e0b\uff0c\u5b83\u7684\u65b9\u6848\u6570\u5e94\u5f53\u7b49\u4e8e\u6bcf\u79cd\u62c6\u5206\uff08\u6bcf\u79cd $mid$\uff0c\u6ce8\u610f\u6b64\u65f6\u7684 $a_{mid}=mx$\uff09\u4e0b\u5de6\u53f3\u4e24\u904d\u533a\u95f4\u7684\u5408\u6cd5\u65b9\u6848\u6570\u4e58\u79ef\u3002\n\n* \u5f62\u5f0f\u5316\u5982\u4e0b\uff1a\n$$\\mathit{tp}_ {l,r,mx}=\\sum\\limits_{mid\\in[l,r]\\ that\\ \\operatorname{abs}((mid-l)-(r-mid))\\leqslant 2} (\\sum\\limits_{i=1}^{mx} \\mathit{tp}_ {l,mid-1,i}) \\times (\\sum\\limits_{i=1}^{mx-1} \\mathit{tp}_ {mid+1,r,i})\\quad (1)$$\n\n* \u7a0d\u5fae\u89c2\u5bdf\u5b9e\u9645\u610f\u4e49\uff0c\u53ef\u4ee5\u53d1\u73b0\u4e0a\u5f0f\u7b49\u4ef7\u4e8e\n$$\\mathit{tp}_ {l,r,mx}=\\sum\\limits_{mid} \\mathit{dp}_ {l,mid-1,mx} \\times \\mathit{dp}_ {mid+1,r,mx-1}\\quad (2)$$\n\n* \u5c1d\u8bd5\u628a\u5f0f\u5de6\u5316\u6210 $\\mathit{dp}_ {l,r,mx}$\uff1a\n$$\\mathit{dp}_ {l,r,mx}=\\sum\\limits_{i=1}^{mx} \\sum\\limits_{mid}(\\mathit{dp}_ {l,mid-1,i} \\times \\mathit{dp}_ {mid+1,r,i-1)}\\quad (3)$$\n\n* \u628a\u4e24\u4e2a $\\sum$ \u6362\u4f4d\uff1a\n$$\\mathit{dp}_ {l,r,mx}=\\sum\\limits_{mid}\\sum\\limits_{i=1}^{\\min(mx,B_{mid})}(\\mathit{dp}_ {l,mid-1,i}\\times \\mathit{dp}_ {mid+1,r,i-1)}\\quad (4)$$\n\n* \u597d\u50cf\u6211\u4eec\u8d70\u8fdc\u4e86\u3002$(4)$ \u5f0f\u770b\u8d77\u6765\u5e76\u4e0d\u597d\u8f6c\u79fb\uff0c$(3)$ \u5f0f\u4e5f\u4e00\u6837\uff08\u56fa\u7136\u53ef\u4ee5\u524d\u7f00\u548c\u4f18\u5316\uff0c\u4f46\u6211\u503e\u5411\u4e8e\u4e0b\u9762\u8fd9\u79cd\u65b9\u5f0f\uff09\u3002\n\n* \u4ece\u5b9a\u4e49\u51fa\u53d1\uff1a$\\mathit{dp}_ {l,r,mx}= \\sum\\limits_{i=1}^{mx} \\mathit{tp}_ {l,r,i}$\u3002\n\n* \u6211\u4eec\u7528\u65b9\u4fbf\u8f6c\u79fb\u7684 $(2)$ \u5f0f\u6765\u8f6c\u79fb\u7f62\u3002\u6309\u533a\u95f4\u8f6c\u79fb\uff0c\u8f6c\u79fb\u5b8c\u6bd5\u540e\u8fdb\u884c\u524d\u7f00\u548c\u3002\n\n* \u73b0\u5728\u56de\u8fc7\u5934\u6765\u8003\u8651\u6211\u4eec\u7684\u521d\u59cb\u5316\u95ee\u9898\u3002\n\n* \u5bf9\u4e8e $l=r$ \u7684\u533a\u95f4\uff0c\u663e\u7136 $\\mathit{tp}_ {l,r,A_i\\sim B_i}=1$\uff0c\u8f6c\u5316\u6210 $dp$ \u4e0d\u96be\u3002\n\n* \u5b9e\u9645\u5199\u7684\u65f6\u5019\u4f1a\u53d1\u73b0\uff0c\u5bf9\u4e8e\u975e\u5e38\u77ed\u7684\u533a\u95f4\uff08\u5982 $len=2,3$\uff09\uff0c\u5b83\u7684 $mid$ \u53ef\u80fd\u662f\u5b83\u67d0\u4e00\u4fa7\u7684\u7aef\u70b9\uff0c\u5bfc\u81f4\u5b83\u62c6\u51fa\u4e86 $l>r$ \u7684\u533a\u95f4\uff08\u79f0\u4e3a\u865a\u533a\u95f4\uff0c\u4e0b\u540c\uff09\u3002\n\n* \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5176\u5b9e\u53e6\u4e00\u4fa7\u7684\u533a\u95f4\u7684\u65b9\u6848\u6570\u5c31\u662f\u8fd9\u79cd\u62c6\u5206\u5bf9\u6574\u4f53\u7684\u603b\u65b9\u6848\u6570\u7684\u8d21\u732e\u3002\u6240\u4ee5\u865a\u533a\u95f4\u7684 $\\mathit{tp}_ {l,r,0\\sim M}=1$\u3002\u6ce8\u610f\uff0c\u662f\u4ece $0$ \u5f00\u59cb\uff0c\u56e0\u4e3a\u53ef\u80fd\u6709\u533a\u95f4\u6700\u5927\u503c\u4e3a $1$ \u7136\u540e $mid$ \u5728\u53f3\u7aef\u70b9\u7684\u60c5\u51b5\uff0c\u8fd9\u53ef\u80fd\u662f\u5408\u6cd5\u7684\u3002\n\n* \u590d\u6742\u5ea6\uff1a\u72b6\u6001\u6570 $n^2$\uff08\u6309\u533a\u95f4\u6765\u8f6c\u79fb\uff09\uff0c\u5355\u6b21\u8f6c\u79fb $O(M)$\uff0c\u5171\u8ba1 $O(n^2M)$\u3002\n\n* \u5bf9\u4e8e $50$ \u5206\u90e8\u5206\u7684\u6570\u636e $\\approx9\\times 10^8$\uff0c\u4e0d\u592a\u80fd\u63a5\u53d7\u3002\u8003\u8651\u4e00\u4e0b\u4e0a\u9762\u8bf4\u7684 $mid$ \u9009\u62e9\u5f88\u6709\u9650\u7684\u9650\u5236\uff0c\u5bb9\u6613\u770b\u51fa\u533a\u95f4\u5176\u5b9e\u5f88\u7a00\u758f\u3002\u8bb0\u641c\u5b9e\u73b0\u6216\u9884\u5904\u7406\u51fa\u6240\u6709\u533a\u95f4\uff0c\u8bb0\u533a\u95f4\u6570\u4e3a $m$\uff0c\u6253\u8868\u53ef\u5f97 $m\\leqslant 2518$\uff0c$O(mM)$ \u5b8c\u5168\u80fd\u8fc7\u3002\n\n#### 2.dp \u4f18\u5316\n* \u597d\u50cf\u8f6c\u79fb\u5f0f\u672c\u8eab\u5df2\u7ecf\u5230\u6781\u9650\u4e86\uff0c\u6211\u4eec\u4e5f\u4f7f\u7528\u4e86\u6b63\u786e\u7684 dp \u5b9e\u73b0\u65b9\u5f0f\u3002\u4e0b\u4e00\u6b65\u4f18\u5316\u5728\u54ea\u91cc\uff1f\n\n* \u89c2\u5bdf\u5230\u8fd9\u91cc\u6709 10 \u5206\u7684\u6570\u636e\u4e2d $A_i,B_i$ \u5b8c\u5168\u4e00\u6837\uff0c\u540c\u65f6 $1\\times 10^9$ \u7684\u8303\u56f4\u7b97\u662f\u8ba9\u6211\u4eec\u6b7b\u4e86\u7ee7\u7eed\u66b4\u529b dp $mx$ \u8fd9\u4e00\u7ef4\u7684\u5fc3\u3002\n\n* \u8003\u8651\u628a $\\mathit{dp}_ {1,n,M}$ \u7684\u8f6c\u79fb\u5f0f\u5c55\u5f00\uff0c\u6211\u4eec\u77e5\u9053\u5c55\u5f00\u540e\u5f62\u5f0f\u5b8c\u5168\u4e00\u6837\uff08\u56e0\u4e3a\u5404\u4e2a\u70b9 $B_i$ \u90fd\u4e00\u6837\uff0c\u679a\u4e3e\u7684\u8303\u56f4\u6ca1\u6709\u533a\u522b\uff09\u3002\u505a\u8fc7\u3010APIO2016\u3011\u5212\u8247\u7684\u540c\u5b66\u5e94\u8be5\u770b\u5230\u8fd9\u4e2a\u6570\u636e\u5c31\u60f3\u5230\u6b63\u89e3\u4e86\u3002\n\n* \u5927\u80c6\u731c\u6d4b\uff0c\u8fd9\u662f\u4e2a $n$ \u6b21\u5de6\u53f3\u7684\u591a\u9879\u5f0f\uff01\u6211\u4eec\u53ef\u4ee5\u66b4\u529b dp \u51fa $mx=1\\sim n+(\\approx10)$ \u9879\uff0c\u7136\u540e\u62c9\u683c\u6717\u65e5\u63d2\u503c\u6cd5\uff01\n\n* \u601d\u8def\u4e00\u4e0b\u5c31\u6253\u5f00\u4e86\u554a\u670b\u53cb\u4eec\u3002\n\n* \u8003\u8651\u5b58\u4e0b\u6240\u6709\u7684\u201cdp \u8f6c\u79fb\u53d8\u5316\u70b9\u201d\u3002\u5bb9\u6613\u770b\u51fa\u8fd9\u4e9b\u70b9\u5e94\u8be5\u662f $A_i$ \u548c $B_i+1$\uff0c\u6392\u5e8f\u5e76\u53bb\u91cd\uff08\u8be5\u6570\u7ec4\u8bb0\u4e3a $key$\uff09\u4e4b\u540e\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4e00\u7cfb\u5217\u5de6\u95ed\u53f3\u5f00\u533a\u95f4 $[key_i,key_{i+1})$\uff0c\u533a\u95f4\u5185\u90e8\u7684\u8f6c\u79fb\u903b\u8f91\u662f\u5b8c\u5168\u4e00\u6837\u7684\uff01\n\n* \u8003\u8651\u6a21\u4eff\u3010NOI2020\u3011\u7f8e\u98df\u5bb6\uff08\u56e0\u4e3a\u6211\u5176\u5b9e\u6ca1\u6253\u8fc7\u5212\u8247\uff09\uff0c\u8fde\u7eed\u6bb5\u52a0\u901f\uff0c\u65ad\u70b9\u66b4\u529b dp\uff01\n\n* \u7b97\u4e00\u4e0b\u590d\u6742\u5ea6\u3002\u5927\u6982 $2n$ \u6bb5\uff0cdp \u90e8\u5206\u6bcf\u6bb5\u5927\u7ea6 $O(mn)$\uff0c\u62c9\u63d2\u6bcf\u6bb5\u8981\u63d2 $n$ \u6b21\uff0c\u5355\u6b21 $n^2$\uff0c\u603b\u8ba1 $O(n^2\\times (m+n^2))$\uff0c\u5b8c\u5168\u6ca1\u6551\u3002\n\n* \u6211\u4f1a\u4f18\u5316\uff01\u53c2\u8003 CF622F The Sum of the k-th Powers\uff0c\u62c9\u63d2\u5728\u5bf9\u5e94\u7684 $x_i$ \u53d6\u503c\u8fde\u7eed\u65f6\u5206\u6bcd\u4e3a\u9636\u4e58\uff0c\u5206\u5b50\u53ef\u505a\u524d\u540e\u7f00\u79ef\u3002\n\n* \u800c\u6211\u4eec dp \u7684\u90a3\u6bb5\u521a\u597d\u662f\u8fde\u7eed\u7684\uff01\u4e71\u641e\u628a\u5206\u6bcd\u7684\u9006\u5143\u9884\u5904\u7406\u51fa\u6765\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5 $O(n)$ \u63d2\u503c\u4e86\u3002\n\n* $O(n^2\\times (m+n))$\uff0c\u5927\u7ea6 $2\\times 10^8$\u3002\u7b49\u7b49\uff0c$2\\times 10^8$\uff1f\n\n* \u5bf9\u4e8e\u672c\u505a\u6cd5\uff0c\u672c\u9898**\u975e\u5e38\u5361\u5e38\uff01** \u636e\u8bf4\uff08\u5c0f\u5c0f\u58f0\uff09\u6b63\u89e3\u7684\u524d\u7f00\u548c\u90e8\u5206\u8981\u7528\u4e0b\u964d\u5e42\uff0c\u53ef\u60dc\u8fd9\u662f NOI+ \u8003\u70b9\u2026\u989d\u597d\u5427\u5c31\u662f\u6211\u4e0d\u4f1a\u2026\n\n* \u5361\u5e38\u6280\u5de7\uff1a\n\t* \u4fdd\u8bc1\u62c9\u63d2\u4e0d\u5e26\u5bf9\u5206\u6bcd\u6c42\u9006\u5143\u7684 $\\log$\u3002\n    \n\t* $usek=n+1$\u3002\uff08\u6211\u4e0d\u4f1a\u8bc1\u8fd9\u662f $n$ \u6b21\u591a\u9879\u5f0f\uff0c\u8bf7\u79fb\u6b65\u5176\u4ed6\u9898\u89e3\uff09\n    \n   * \u62c6 `%mod`\uff0c\u5c3d\u91cf\u5c11\u53d6\u6a21\u3002\n   \n   * \u5bf9\u533a\u95f4\u957f\u5ea6\u662f\u5426\u9700\u8981\u63d2\u5206\u7c7b\u8ba8\u8bba\u3002\n\n### \u793a\u8303\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define il inline\n#define re register\n#define b_s basic_string\n#define For(i,a,b) for(re int i=(a);i<=(b);++i)\n#define foR(i,a,b) for(re int i=(a);i>=(b);--i)\n#define uint unsigned int\n#define ll long long\n#define ull unsigned long long\nusing namespace std;\nil void rd(int &x){\n\tx=0;bool f=1;char ch=getchar();\n\twhile(!isdigit(ch)){if(ch=='-') f=0;ch=getchar();}\n\twhile(isdigit(ch)){x=(x<<3)+(x<<1)+(ch^48);ch=getchar();}\n\tx=f?x:-x;\n\treturn;\n}\n\nconst int maxn=307,maxm=2608;//maxm\u662f\u6700\u5927\u533a\u95f4\u6570\nconst ll mod=1e9+7;\nint n;\nint A[307],B[307];\n\nil ll qpow(ll x,ll t){\n\tint ret=1;\n\twhile(t){\n\t\tif(t&1) ret=ret*x%mod;\n\t\tx=x*x%mod;\n\t\tt>>=1;\n\t}\n\treturn ret;\n}\nil int inv(int x){return qpow(x,mod-2);}\n\nint id[maxn][maxn],toti;//0\u5c31\u662f\u533a\u95f4\u4e0d\u5b58\u5728 \nil bool ok(int l,int mid,int r){return abs((mid-l)-(r-mid))<=2;}\nil void sinte(int l,int r){//\u672c\u51fd\u6570\u662f\u7528\u4e8e\u533a\u95f4\u521d\u59cb\u5316\u7684\u9012\u5f52\u51fd\u6570\u3002 \n\tif(id[l][r]) return;\n\tid[l][r]=++toti;\n\tif(l>=r) return;\n\tFor(mid,l,r)\n\t\tif(ok(l,mid,r))\n\t\t\tsinte(l,mid-1),sinte(mid+1,r);\n}\n\nint key[607],totk;\nll invfact[307];\nint usek;\nil void init(){//\u672c\u51fd\u6570\u8d1f\u8d23\u8bfb\u5165\uff0c\u5e76\u53c2\u4e0e\u5230\u533a\u95f4\u521d\u59cb\u5316\u548c\u62c9\u63d2\u521d\u59cb\u5316\u4e2d\u3002\n\trd(n); usek=n+1;\n\tFor(i,1,n){\n\t\trd(A[i],B[i]);\n\t\tkey[++totk]=A[i],key[++totk]=B[i]+1;//A[i]\u662f\u5230\u8fd9\u91cc\u5c31\u53d8\uff0cB[i]\u662f\u4e0b\u4e00\u4e2a\u624d\u53d8\u3002\u6211\u4eec\u5e0c\u671bkey\u91cc\u9762\u5b58\u7684\u6bcf\u4e00\u4e2a\u90fd\u662f\u53d8\u7684\u70b9\uff0c\u8fd9\u6837\u4e00\u6765\u6211\u4eec\u5c31\u53ef\u4ee5\u53d6\u51fa\u5de6\u95ed\u53f3\u5f00\u533a\u95f4\u3002 \n\t}\n\tsort(key+1,key+1+totk);\n\ttotk=unique(key+1,key+1+totk)-key-1;//\u53bb\u91cd\u540e\u7ed3\u679c\u3002 \n\t\n\tsinte(1,n);\n\t\n\tinvfact[0]=1;\n\tFor(i,1,usek) invfact[i]=invfact[i-1]*inv(i)%mod;\n}\n\nint L,R,S,N;//\u5f53\u524d\u8003\u8651\u7684\u95ed\u533a\u95f4\u7684\u5de6\u53f3\u7aef\u70b9\uff0c\u8be5\u533a\u95f4\u957f\u5ea6\uff0c\u8ba1\u5212\u4e2d\u8981dp\u51fa\u7684\u957f\u5ea6 \nll dp[maxn][maxm]; bitset<maxm> vis;//\u8be5\u533a\u95f4\u662f\u5426\u5728\u672c\u8f6edp\u4e2d\u8bbf\u95ee\u8fc7 \n//dp[mx][now]\u8868\u793a\u7b2cnow\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\u4e0d\u8d85\u8fc7mx\u7684\u65b9\u6848\u6570\u3002\u5b9a\u4e49tp[mx][now]\u8868\u793a\u6070\u597d\u4e3a\u7684\u65b9\u6848\u6570\u3002\n//\u5bf9\u4e8e\u975e\u521d\u59cb\u533a\u95f4(r>l): \n//\u56e0\u4e3a\u6211\u4eec\u5728dfs\u5185\u5b9e\u9645\u4e0a\u662f\u9010\u4e2a\u533a\u95f4\u8f6c\u79fb\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u8fd9\u6837\u8f6c\u79fb\uff1adp(\u5b9e\u4e3atp)[mx][now]=\u2211mid [ (\u2211i=0~mx tp[i][left])*(\u2211i=0~mx-1 tp[i][right]) ]=\u2211mid (dp[mx][left]*dp[mx-1][right]) \n//\u7136\u540e\u6211\u4eec\u5bf9dp\u524d\u7f00\u548c\uff0c\u56e0\u4e3adp[mx][now]=\u2211i=1~mx tp[i][now]\u3002\u4e0d\u7528\u5173\u5fc3i=0\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u975e\u521d\u59cb\u533a\u95f4\u90a3\u91cc\u4e00\u5b9a\u662f0(A[i]>=1)(\u66f4\u5b9e\u8d28\u5730\uff0c\u53ea\u6709\u865a\u533a\u95f4\u4f1a\u7528\u5230\u90a3\u4e2a) \nil void dfs(int l,int r){\n\tre int now=id[l][r]; if(vis[now]) return; vis[now]=1;\n\tif(l>r){\n\t\tFor(i,0,N) \n\t\t\tdp[i][now]=1; \n\t\treturn;\n\t}\n\tif(l==r){\n\t\tif(A[l]<=L && R<=B[l])\n\t\t\tFor(i,1,N) \n\t\t\t\tdp[i][now]=1;\n\t}\n\tif(l<r){\n\t\tFor(mid,l,r)\n\t\t\tif(ok(l,mid,r)){\n\t\t\t\tdfs(l,mid-1); dfs(mid+1,r);\n\t\t\t\tif(A[mid]<=L && R<=B[mid])\n\t\t\t\t\tFor(i,1,N) \n\t\t\t\t\t\tdp[i][now]=(dp[i][now] + dp[i][id[l][mid-1]] * dp[i-1][id[mid+1][r]]) % mod;\n\t\t\t}\n\t}\n\tFor(i,1,N){\n\t\tdp[i][now]=dp[i-1][now]+dp[i][now];\n\t\tif(dp[i][now]>=mod) dp[i][now]-=mod;\n\t}\n\treturn;\n}\n\nll son[maxn],sonqian[maxn],sonhou[maxn];\nll mu[maxn],invmu[maxn];\nil void work(){\n\tfor(re int i=1;i<totk;++i){\n\t\tL=key[i],R=key[i+1]-1,S=R-L+1;\n\t\tif(S<=usek){\n\t\t\tN=S;\n\t\t\tdfs(1,n);\n\t\t\tFor(i,1,toti) dp[0][i]=dp[N][i];//\u6bcf\u6b21\u90fd\u628a\u4e0a\u4e00\u6bb5\u7684\u7ed3\u679c\u653e\u57280\u5904\uff0c\u6b64\u65f6\u76841\u5c31\u4ee3\u8868L\uff0c\u76f8\u5f53\u4e8e\u5e73\u79fb\u4e86\u6574\u4e2adp\u6570\u7ec4 \n\t\t}\n\t\telse{\n\t\t\tN=usek;\n\t\t\tdfs(1,n);\n\t\t\t//\u9996\u5148\u6211\u4eec\u5904\u7406\u5206\u5b50 son \u53ca\u5176\u524d\u540e\u7f00\u79ef\u3002  \u62c9\u63d2\u7684\u4ee3\u5165\u503c x \u5e94\u5f53\u4e3a\u533a\u95f4\u672b\u7aef R \u3002 \n\t\t\tsonqian[0]=sonhou[usek+1]=1; \n\t\t\tFor(j,1,usek){//\u56e0\u4e3a\u8fd9\u91cc1\u4ee3\u8868L\uff0c\u6240\u4ee5rj(j\u4e3a1~usek\u7684\u4efb\u610f\u503c)=j+L-1\n\t\t\t\tson[j]=S-j;//\u5b9e\u9645\u7684\u5f0f\u5b50\u662fson[j]=R-rj=R-L+1-j=S-j\uff0c\u7531else\u77e5S>usek>=j\uff0c\u6240\u4ee5\u4e0d\u7528\u5224\u8d1f\uff0c\u800c\u4e14 R<=1e9 \uff0c\u6240\u4ee5\u4e5f\u4e0d\u7528\u6a21 \n\t\t\t\tsonqian[j]=sonqian[j-1]*son[j]%mod;\n\t\t\t}\n\t\t\tfoR(j,usek,1) sonhou[j]=sonhou[j+1]*son[j]%mod;\n\t\t\t\n\t\t\t//\u7136\u540e\u6211\u4eec\u6765\u5904\u7406\u5206\u6bcd\n\t\t\tFor(i,1,usek){\n\t\t\t\tif(((usek-i)&1)==0) invmu[i]=invfact[i-1]*invfact[usek-i]%mod;\n\t\t\t\telse invmu[i]=mod-invfact[i-1]*invfact[usek-i]%mod;\n\t\t\t} \n\t\t\t\n\t\t\tfor(re int i=1;i<=usek;++i){\n\t\t\t\tll fenzi=sonqian[i-1]*sonhou[i+1]%mod;\n\t\t\t\tll xishu=fenzi*invmu[i]%mod;\n\t\t\t\tFor(now,1,toti)//\u6682\u65f6\u653e\u5728\u8fd9\u91cc\n\t\t\t\t\tdp[N+1][now]=(dp[N+1][now]+xishu*dp[i][now])%mod;\n\t\t\t}\n\n\t\t\tFor(now,1,toti) dp[0][now]=dp[N+1][now],dp[N+1][now]=0;\n\t\t}\n\t\tvis.reset();\n\t\tFor(i,1,N)\n\t\t\tFor(j,1,toti)\n\t\t\t\tdp[i][j]=0;//\u6e05\u7a7adp\u3002\n\t}\n}\n\nint main(){\n\tinit();\n\twork();\n\twt(dp[0][1]);\n\treturn 0;\n}\n```",
        "postTime": 1657802148,
        "uid": 601360,
        "name": "wei_xin",
        "ccfLevel": 7,
        "title": "P5469 [NOI2019] \u673a\u5668\u4eba \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u53d1\u73b0\uff0c\u4e00\u4e2a\u65b9\u6848\u662f\u53ef\u884c\u7684\u5f53\u4e14\u4ec5\u5f53\u4ee5\u4e0b\u6761\u4ef6\u6210\u7acb\uff1a\n\n- \u5168\u5c40\u6700\u540e\u4e00\u4e2a\u6700\u9ad8\u70b9\u8ddd\u79bb\u4e2d\u70b9\u7684\u8ddd\u79bb\u4e0d\u8d85\u8fc7 $1$\u3002\n- \u8be5\u70b9\u5de6\u8fb9\u548c\u53f3\u8fb9\u7684\u533a\u95f4\u90fd\u53ef\u884c\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u627e\u5230\u4e86\u4e00\u4e2a\u5f88\u7b80\u5355\u7684 DP \u5f0f\u5b50\uff1a\n$$f_{l,r,x}=\\left\\{\\begin{array}{l}[a_{m-1}\\le x\\le b_{m-1}]\\sum_{i=1}^xf_{l,m-2,i}\\sum_{i=1}^{x-1}f_{m,r,i}+[a_{m}\\le x\\le b_{m}]\\sum_{i=1}^xf_{l,m-1,i}\\sum_{i=1}^{x-1}f_{m+1,r,i}+[a_{m+1}\\le x\\le b_{m+1}]\\sum_{i=1}^xf_{l,m,i}\\sum_{i=1}^{x-1}f_{m+2,r,i},&len\\%2=1\\\\ [a_{m}\\le x\\le b_{m}]\\sum_{i=1}^xf_{l,m-1,i}\\sum_{i=1}^{x-1}f_{m+1,r,i}+[a_{m+1}\\le x\\le b_{m+1}]\\sum_{i=1}^xf_{l,m,i}\\sum_{i=1}^{x-1}f_{m+2,r,i},&len\\%2=0\\end{array}\\right.$$\n\n\u5176\u4e2d $m=\\lfloor\\frac{l+r}2\\rfloor,len=r-l+1$\n\n~~\u554a\u554a\u554a\u516c\u5f0f\u592a\u957f\u4e86\uff0c\u770b\u4e0d\u6e05\u7684\u8bdd\u53ef\u4ee5\u770b\u535a\u5ba2~~\n\n\u6700\u540e\u53ea\u8981\u7edf\u8ba1 $\\sum_if_{1,n,i}$ \u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(AM)$ ($M$ \u662f\u6709\u6548\u7684\u533a\u95f4\u6570\uff0c\u5927\u7ea6\u662f $n\\log n$ \u7684\u6837\u5b50\uff0c\u4e0d\u8fc7\u4e0d\u4f1a\u8bc1)\u3002\n\n\u7136\u540e\u8003\u8651\u4f18\u5316\u8fd9\u4e2a\u66b4\u529b DP\u3002\u6ce8\u610f\u5230\u6bcf\u4e2a\u533a\u95f4\u7684 $f_{l,r,x}$ \u662f\u5173\u4e8e $x$ \u7684\u4e00\u4e2a\u5206\u6bb5\u591a\u9879\u5f0f\u51fd\u6570\uff0c\u4e14\u6b21\u6570\u4e0d\u8d85\u8fc7 $r-l+2$\uff0c\u6bb5\u6570\u4e0d\u8d85\u8fc7 $2(r-l+1)$\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7528\u8fd9\u4e2a\u4f18\u5316\u3002\n\n\u5bf9\u4e00\u4e2a\u591a\u9879\u5f0f\u9700\u8981\u7ef4\u62a4\u7684\u64cd\u4f5c\u6709\uff1a\u76f8\u52a0\uff0c\u76f8\u4e58\uff0c\u4fdd\u7559\u4e00\u6bb5\u533a\u95f4\u7684\u5b9a\u4e49\uff0c\u5411\u53f3\u5e73\u79fb\u4e00\u5355\u4f4d\uff0c\u505a\u524d\u7f00\u548c\u3002\u8fde FFT \u5565\u7684\u90fd\u4e0d\u9700\u8981\uff0c\u66b4\u529b\u5c31\u53ef\u4ee5\u8fc7\u3002\u5173\u4e8e\u8fd9\u4e2a\u524d\u7f00\u548c\u64cd\u4f5c\uff0c\u6709\u4e2a\u7ecf\u5178\u7ed3\u8bba\u5c31\u662f\u81ea\u7136\u6570\u7684 $k$ \u6b21\u65b9\u548c\u53ef\u4ee5\u8868\u793a\u4e3a\u4e00\u4e2a $k+1$ \u6b21\u7684\u591a\u9879\u5f0f\uff0c\u9884\u5904\u7406\u7cfb\u6570\u5373\u53ef\u3002\u590d\u6742\u5ea6\u4e0d\u4f1a\u5206\u6790\uff0c\u5e94\u8be5\u4e0d\u4f1a\u8d85\u8fc7 $O(n^3\\log n)$\uff0c\u53ef\u4ee5\u901a\u8fc7\n\n\u7801\u91cf\u7565\u5927\uff0c\u6ce8\u610f\u7ec6\u8282\uff0c\u5426\u5219\u53ef\u80fd\u4f1aT\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N=305,P=1e9+7,INF=1e9+500;\nint n,a[N],b[N],bn[N<<1][N<<1],fact[N],invf[N],invp[N];bool vst[N][N];\nstruct polyn{\n\tint m,l,r;vector<int> a;\n\tvoid init(int len){\n\t\tfor(int i=0;i<a.size();i++)a[i]=0;\n\t\tfor(int i=a.size();i<len;i++)a.push_back(0);\n\t\tm=len;\n\t}\n\tpolyn fix(int nl,int nr){polyn res;res.init(m);res.l=nl,res.r=nr;for(int i=0;i<m;i++)res.a[i]=a[i];return res;}\n\tpolyn operator*(polyn f){\n\t\tpolyn res;res.init(m+f.m-1);res.l=max(l,f.l),res.r=min(r,f.r);\n\t\tfor(int i=0;i<m;i++)\n\t\t\tfor(int j=0;j<f.m;j++)\n\t\t\t\tres.a[i+j]=(res.a[i+j]+1ll*a[i]*f.a[j])%P;\n\t\treturn res;\n\t}\n\tpolyn operator+(polyn f){\n\t\tpolyn res;res.init(max(m,f.m));res.l=max(l,f.l),res.r=min(r,f.r);\n\t\tfor(int i=0;i<m;i++)res.a[i]=a[i];\n\t\tfor(int i=0;i<f.m;i++){res.a[i]+=f.a[i];if(res.a[i]>=P)res.a[i]-=P;}\n\t\treturn res;\n\t}\n\tpolyn prefsum(){\n\t\tpolyn res;res.init(m+1);res.l=l,res.r=r;\n\t\tfor(int i=0;i<m;i++)\n\t\t\tfor(int j=0;j<=i+1;j++)res.a[j]=(res.a[j]+1ll*a[i]*bn[i][j])%P;\n\t\tint fl=0;\n\t\tfor(int i=m;i>=0;i--)fl=(1ll*fl*(l-1)+res.a[i])%P;\n\t\tres.a[0]=(res.a[0]+P-fl)%P;\n\t\treturn res;\n\t}\n\tint sum(int x){int fr=0;for(int i=m-1;i>=0;i--)fr=(1ll*fr*x+a[i])%P;return fr;}\n\tpolyn trans(){\n\t\tpolyn res;res.init(m);res.l=l+1,res.r=min(r+1,INF);\n\t\tfor(int i=0;i<m;i++)\n\t\t\tfor(int j=0;j<=i;j++)res.a[j]=(res.a[j]+1ll*(i-j&1?P-a[i]:a[i])*fact[i]%P*invf[j]%P*invf[i-j])%P;\n\t\treturn res;\n\t}\n};\nstruct polyset{\n\tint cnt;vector<polyn> v;\n\tpolyset operator+(polyset f){\n\t\tpolyset res;res.cnt=0;\n\t\tfor(int i=0,j=0;i<cnt;i++){\n\t\t\twhile(j<f.cnt&&f.v[j].r<=v[i].r)res.v.push_back(f.v[j]+v[i]),res.cnt++,j++;\n\t\t\tif(j<f.cnt&&f.v[j].l<=v[i].r)res.v.push_back(f.v[j]+v[i]),res.cnt++;\n\t\t}\n\t\treturn res;\n\t}\n\tpolyset operator*(polyset f){\n\t\tpolyset res;res.cnt=0;\n\t\tfor(int i=0,j=0;i<cnt;i++){\n\t\t\twhile(j<f.cnt&&f.v[j].r<=v[i].r)res.v.push_back(f.v[j]*v[i]),res.cnt++,j++;\n\t\t\tif(j<f.cnt&&f.v[j].l<=v[i].r)res.v.push_back(f.v[j]*v[i]),res.cnt++;\n\t\t}\n\t\treturn res;\n\t}\n\tpolyset trans(){\n\t\tpolyset res;res.cnt=1;polyn p0;p0.init(0);p0.l=p0.r=0;\n\t\tres.v.push_back(p0);\n\t\tfor(int i=0;i<cnt;i++)res.v.push_back(v[i].trans()),res.cnt++;\n\t\treturn res;\n\t}\n\tpolyset fix(int l,int r){\n\t\tpolyset res;res.cnt=2;polyn p0;p0.init(0);p0.l=0,p0.r=l-1;\n\t\tres.v.push_back(p0);\n\t\tfor(int i=0;i<cnt;i++)if(v[i].l<=r&&v[i].r>=l)\n\t\t\tres.v.push_back(v[i].fix(max(l,v[i].l),min(r,v[i].r))),res.cnt++;\n\t\tp0.l=r+1,p0.r=INF;res.v.push_back(p0);\n\t\treturn res;\n\t}\n\tpolyset prefsum(){\n\t\tpolyset res;res.cnt=0;int tmp=0;\n\t\tfor(int i=0;i<cnt;i++){\n\t\t\tres.v.push_back(v[i].prefsum()),res.cnt++;\n\t\t\tres.v[res.cnt-1].a[0]=(res.v[res.cnt-1].a[0]+tmp)%P,tmp=res.v[res.cnt-1].sum(v[i].r);\n\t\t}\n\t\treturn res;\n\t}\n\tint sum(){return v[cnt-1].sum(INF);}\n} f[N][N],g[N][N];\nvoid dp(int l,int r){\n\tif(vst[l][r])return;\n\tvst[l][r]=1;\n\tif(r==l-1){\n\t\tpolyn p0;p0.init(1);p0.a[0]=1,p0.l=0,p0.r=INF;\n\t\tf[l][r].v.push_back(p0),g[l][r].v.push_back(p0);f[l][r].cnt=g[l][r].cnt=1;\n\t\treturn;\n\t}\n\tif(r==l){\n\t\tpolyn p0;p0.init(0);p0.l=0,p0.r=a[l]-1;f[l][r].v.push_back(p0);f[l][r].cnt=3;\n\t\tp0.init(2);p0.a[0]=(P+1-a[l])%P,p0.a[1]=1,p0.l=a[l],p0.r=b[l];f[l][r].v.push_back(p0);\n\t\tp0.init(1);p0.a[0]=b[l]-a[l]+1,p0.a[1]=0,p0.l=b[l]+1,p0.r=INF;f[l][r].v.push_back(p0);\n\t\tg[l][r]=f[l][r].trans();\n\t\treturn;\n\t}\n\tint mid=l+r>>1;\n\tif(r-l+1&1){\n\t\tdp(l,mid-2),dp(mid,r),dp(l,mid-1),dp(mid+1,r),dp(l,mid),dp(mid+2,r);\n\t\tf[l][r]=((f[l][mid-2]*g[mid][r]).fix(a[mid-1],b[mid-1])\n\t\t\t\t+(f[l][mid-1]*g[mid+1][r]).fix(a[mid],b[mid])\n\t\t\t\t+(f[l][mid]*g[mid+2][r]).fix(a[mid+1],b[mid+1])).prefsum();\n\t\tg[l][r]=f[l][r].trans();\n\t\treturn;\n\t}\n\tdp(l,mid-1),dp(mid+1,r),dp(l,mid),dp(mid+2,r);\n\tf[l][r]=((f[l][mid-1]*g[mid+1][r]).fix(a[mid],b[mid])\n\t\t\t+(f[l][mid]*g[mid+2][r]).fix(a[mid+1],b[mid+1])).prefsum();\n\tg[l][r]=f[l][r].trans();\n}\nint main(){\n\tinvp[1]=invf[0]=invf[1]=fact[0]=fact[1]=1;\n\tfor(int i=2;i<N;i++)fact[i]=1ll*fact[i-1]*i%P,invp[i]=1ll*(P-P/i)*invp[P%i]%P,invf[i]=1ll*invf[i-1]*invp[i]%P;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++)cin>>a[i]>>b[i];\n\tfor(int k=0;k<601;k++)\n\t\tfor(int j=k;j>=0;j--){\n\t\t\tint tmp=1ll*fact[k]*invf[j]%P*invf[k-j]%P;\n\t\t\tfor(int i=j+2;i<=k+1;i++)tmp=(tmp-1ll*bn[k][i]*fact[i]%P*invf[j]%P*invf[i-j]%P+P)%P;\n\t\t\tbn[k][j+1]=1ll*invp[j+1]*tmp%P;\n\t\t}\n\tdp(1,n);\n\tprintf(\"%d\\n\",f[1][n].sum());\n\treturn 0;\n}\n```",
        "postTime": 1614780247,
        "uid": 77174,
        "name": "FunnyCreatress",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P5469 \u3010 [NOI2019] \u673a\u5668\u4eba\u3011"
    },
    {
        "content": "[\u6d1b\u8c37\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P5469)\n\n\u795e\u4ed9\u9898\uff0c\u653e\u5728 D1T2 \u53ef\u80fd\u7565\u96be\u4e86\u4e00\u70b9\uff08\n\n\u9996\u5148\u663e\u7136\u5bf9\u4e8e P \u578b\u673a\u5668\u4eba\u800c\u8a00\uff0c\u5c06\u5b83\u653e\u5728 $i$ \u4e4b\u540e\u5b83\u4f1a\u8d70\u5230\u5de6\u8fb9\u7b2c\u4e00\u4e2a\u4e25\u683c $>a_i$ \u7684\u4f4d\u7f6e\uff0c\u5bf9\u4e8e Q \u578b\u673a\u5668\u4eba\u800c\u8a00\uff0c\u5c06\u5b83\u653e\u5728 $i$ \u4e4b\u540e\u5b83\u4f1a\u8d70\u5230\u53f3\u8fb9\u7b2c\u4e00\u4e2a $\\ge a_i$ \u7684\u4f4d\u7f6e\uff0c\u4e3a\u4e86\u907f\u514d\u5206\u7c7b\u8ba8\u8bba\u6211\u4eec\u53ef\u4ee5\u5047\u5b9a $a_0=a_{n+1}=\\infty$\u3002\u770b\u5230\u8fd9\u4e2a\u72b6\u6001\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u51fa\u4e00\u4e2a\u533a\u95f4 $dp$\uff0c$dp_{l,r,x}$ \u8868\u793a $[l,r]$ \u4e2d\u7684\u67f1\u5b50\u6700\u5927\u503c\u4e3a $x$\uff0c\u5e76\u4e14\u6709 $a_{l-1}>x,a_{r+1}\\ge x$ \u7684\u65b9\u6848\u6570\uff0c\u518d\u8bbe $sum_{l,r,x}$ \u8868\u793a $dp_{l,r,x}$ \u7684\u524d\u7f00\u548c\uff0c\u90a3\u4e48\u6211\u4eec\u663e\u7136\u53ef\u4ee5\u679a\u4e3e**\u6700\u9760\u540e\u7684\u6700\u5927\u503c**\u7684\u4f4d\u7f6e $t$\uff0c\u90a3\u4e48\u5bf9\u4e8e\u653e\u5728 $t$ \u7684 P \u578b\u673a\u5668\u4eba\uff0c\u663e\u7136\u5b83\u4f1a\u8d70\u5230 $l-1$\uff0cQ \u578b\u673a\u5668\u4eba\u4f1a\u8d70\u5230 $r+1$\uff0c\u56e0\u6b64 $dp_{l,r,x}$ \u53ef\u4ee5\u4ece $t$ \u8f6c\u79fb\u7684\u5145\u8981\u6761\u4ef6\u662f $|(t-l)-(r-t)|\\le 2$ \u4e14 $x\\in[a_l,a_r]$\uff0c\u56e0\u6b64\u8f6c\u79fb\u662f\u5e38\u6570\u7ea7\u522b\u7684\uff0c\u8fd9\u6837\u66b4\u529b\u505a\u662f $\\mathcal O(n^2A)$ \u7684\uff0c\u5176\u4e2d $A=\\max\\{b_i\\}$\uff0c\u53ef\u4ee5\u62ff\u5230 $35$ \u5206\u7684\u597d\u6210\u7ee9\uff0c\u4e0d\u8fc7\u6ce8\u610f\u5230\u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4\u800c\u8a00\uff0c\u5b83\u53ea\u53ef\u80fd\u4ece\u9760\u4e2d\u95f4\u7684\u4f4d\u7f6e\u8f6c\u79fb\u8fc7\u6765\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f88\u591a DP \u72b6\u6001\u662f\u8f6c\u79fb\u4e0d\u5230 $dp_{1,n,*}$ \u7684\uff0c\u6253\u4e2a\u8868\u53ef\u4ee5\u53d1\u73b0\u6709\u7528\u7684\u533a\u95f4\u6700\u591a $2518$ \u4e2a\uff0c\u56e0\u6b64\u5199\u4e2a\u8bb0\u641c\uff0c\u518d\u5361\u5361\u5e38\u5373\u53ef\u62ff\u5230 $50$ \u5206\u3002\n\n\u63a5\u4e0b\u6765\u601d\u8003\u6b63\u89e3\uff0c\u6ce8\u610f\u5230\u6709\u4e00\u6863\u90e8\u5206\u5206\u662f $A_i=1,B_i=10^9$\uff0c~~\u54b1\u4eec\u4e0d\u59a8\u6765\u5f53\u56de\u5fc3\u7406\u5b66\u5bb6\uff08\u5927\u96fe\uff09~~\uff0c\u601d\u7d22\u4e00\u4e0b\uff0c\u8fd9\u6863\u90e8\u5206\u5206\u6709\u5565\u7528\uff1f$A_i=1,B_i=10^9$ \u610f\u5473\u7740\u6240\u6709 $10^9$ \u4ee5\u5185\u7684\u6b63\u6574\u6570\u90fd\u53ef\u4ee5\u6210\u4e3a\u67f1\u5b50\u7684\u9ad8\u5ea6\uff0c\u4e5f\u5c31\u662f\u8bf4 $x\\in[a_l,a_r]$ \u8fd9\u4e2a\u6761\u4ef6\u5c31\u6ca1\u6709\u7528\u4e86\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u7528\u5173\u5fc3 $|(t-l)-(r-t)|\\le 2$ \u8fd9\u4e2a\u6761\u4ef6\u5373\u53ef\u3002\u63a5\u4e0b\u6765\u518d\u601d\u7d22\u4e00\u4e0b\uff0c$B_i$ \u8fd9\u4e48\u5927\uff0c\u51fa\u9898\u4eba\u4f1a\u8ba9\u6211\u4eec\u5e72\u561b\uff1f\u663e\u7136\u5bf9\u4e8e $l=r$ \u65f6\uff0c$dp_{l,r,x}=1,sum_{l,r,x}=x$\uff0c\u800c\u5bf9\u4e8e $r-l=1$ \u7684\u60c5\u51b5\uff0c$dp_{l,r,x}$ \u4f1a\u4ece $sum_{l,l,x}$ \u6216 $sum_{r,r,x}$ \u8f6c\u79fb\u8fc7\u6765\uff0c\u56e0\u6b64 $dp_{l,r,x}$ \u53ef\u4ee5\u5199\u6210 $kx$ \u7684\u5f62\u5f0f\uff0c$sum_{l,r,x}$ \u4e5f\u5c31\u53ef\u4ee5\u5199\u6210 $Ax^2+Bx$ \u7684\u5f62\u5f0f\u2026\u2026\u5bf9\uff01\u591a\u9879\u5f0f\uff01\u901a\u8fc7\u4e0a\u9762\u7684\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0\uff0c$dp_{l,r,x}$ \u662f\u5173\u4e8e $x$ \u7684 $r-l$ \u6b21\u591a\u9879\u5f0f\uff0c$sum_{l,r,x}$ \u662f\u5173\u4e8e $x$ \u7684 $r-l+1$ \u6b21\u591a\u9879\u5f0f\uff0c\u8bc1\u660e\u53ef\u4ee5\u5f52\u7eb3\u3002\u6211\u4eec\u53ef\u4ee5\u6c42\u51fa $sum_{l,r,x}$ \u7684\u4efb\u610f $r-l$ \u4e2a\u70b9\u503c\uff0c\u7136\u540e\u628a\u8fd9\u4e2a\u591a\u9879\u5f0f\u63d2\u51fa\u6765\u5373\u53ef\u901a\u8fc7 $11,12$ \u8fd9\u4e24\u4e2a\u6d4b\u8bd5\u70b9\uff0c\u7531\u4e8e\u70b9\u503c\u8fde\u7eed\uff0c\u63d2\u503c\u53ef\u4ee5\u7ebf\u6027\u3002\n\n\u8003\u8651\u6ee1\u5206\u505a\u6cd5\uff0c\u65e2\u7136\u6709\u4e86 $A_i,B_i$ \u7684\u9650\u5236\uff0c\u5e76\u4e14\u5b83\u4eec\u8303\u56f4\u8fd9\u4e48\u5927\uff0c\u90a3\u80af\u5b9a\u8981\u79bb\u6563\u5316\u54af\uff0c\u6211\u4eec\u6309\u7167[\u8fd9\u9898](https://www.cnblogs.com/ET2006/p/luogu-P3643.html)\u7684\u5957\u8def\u5c06\u6bcf\u4e2a\u533a\u95f4\u770b\u4f5c\u4e00\u4e2a\u5de6\u5f00\u53f3\u95ed\u7684\u533a\u95f4 $[A_i,B'_i)$\uff0c\u5176\u4e2d\u663e\u7136 $B'_i=B_i+1$\uff0c\u7136\u540e\u79bb\u6563\u5316\u3002\u8fd9\u6837\u4e00\u6765\u4e00\u4e2a\u6570 $i$ \u5c31\u53ef\u4ee5\u4ee3\u8868\u4e00\u4e2a\u5de6\u5f00\u53f3\u95ed\u7684\u533a\u95f4 $[C_i,C_{i+1})$\u3002\u6309\u7167\u4e4b\u524d\u7684\u601d\u8def\u6211\u4eec\u731c\u60f3\u5728\u6bcf\u4e2a\u8fd9\u6837\u5de6\u5f00\u53f3\u95ed\u7684\u533a\u95f4\u4e2d\uff0c$dp_{l,r,x}$ \u662f\u5173\u4e8e $x$ \u7684 $r-l$ \u6b21\u591a\u9879\u5f0f\uff0c$sum_{l,r,x}$ \u662f\u5173\u4e8e $x$ \u7684 $r-l+1$ \u6b21\u591a\u9879\u5f0f\uff0c\u4e8b\u5b9e\u4e0a\u8fd9\u4e2a\u731c\u60f3\u4e5f\u662f\u6b63\u786e\u7684\uff0c\u8bfb\u8005\u81ea\u8bc1\u4e0d\u96be\u3002\u56e0\u6b64\u8003\u8651\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u6bcf\u4e2a\u533a\u95f4\uff0c\u7136\u540e\u5bf9\u6bcf\u4e2a $l,r$\uff0c\u6c42\u51fa\u8be5\u533a\u95f4\u4e2d\u6700\u5c0f\u7684 $\\min(C_{i+1}-C_i,n+1)$ \u4e2a\u6570\u7684\u70b9\u503c\u5373\u53ef\uff0c\u5177\u4f53\u5b9e\u73b0\u5c31\u6bcf\u6b21\u679a\u4e3e\u4e00\u4e2a $C_i$ \u5c31\u5f00\u4e2a\u6570\u7ec4 `sum[l][r][x]` \u8868\u793a\u4e0a\u6587\u4e2d\u6240\u8bf4\u7684 $sum_{l,r,C_i+x-1}$\uff0c`dp[l][r][x]` \u8868\u793a\u4e0a\u6587\u4e2d\u6240\u8bf4\u7684 $dp_{l,r,C_i+x-1}$\uff0c\u6309\u7167\u4e0a\u9762\u7684\u5957\u8def\u8f6c\u79fb `dp[l][r][x]` \u5373\u53ef\uff0c\u6c42\u5b8c\u6240\u6709\u533a\u95f4\u7684 `dp` \u540e\u5bf9\u6bcf\u4e2a\u533a\u95f4\u8fdb\u884c\u4e00\u904d\u63d2\u503c\uff0c\u6c42\u51fa $sum_{l,r,x}$\uff0c\u5728 $C_{i+1}-1$ \u5904\u7684\u70b9\u503c\uff0c\u7136\u540e\u628a\u5b83\u5b58\u5165\u65b0\u7684 `sum[l][r][0]` \u5373\u53ef\uff0c\u6b63\u786e\u6027\u663e\u7136\uff0c\u590d\u6742\u5ea6 $\\mathcal O(2518n^2)$\uff0c\u8f7b\u5fae\u5361\u5e38\uff08\u4e0d\u8fc7\u5bf9\u4e8e\u6211\u8fd9\u4e2a\u5361\u5e38\u83dc\u9e21\u6765\u8bf4\u5c31\u5f97\u4ea4 $114514191981019260817998244353$ \u53d1\u54af\uff09\uff0c\u5f97\u7528\u4e00\u4e9b\u5361\u5e38\u6280\u5de7\uff0c\u8fd9\u91cc\u7a0d\u5fae\u4ecb\u7ecd\u4e00\u4e0b\u6211\u7684\u5361\u5e38\u6280\u5de7\uff1a\n\n- \u5bf9\u533a\u95f4 $[l,r]$ \u8fdb\u884c\u63d2\u503c\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u53ea\u7528\u524d $r-l+1$ \u4e2a\u70b9\u503c\u63d2\u503c\uff0c\u4e0d\u7528\u63d2 $n+1$ \u4e2a\u70b9\u503c\u3002\n- \u53ef\u4ee5\u7279\u5224\u6389 $C_{i+1}-C_i\\le n$ \u7684\u60c5\u51b5\uff0c\u8fd9\u6837 $C_{i+1}-1$ \u5904\u7684\u70b9\u503c\u6211\u4eec\u5728 DP \u7684\u65f6\u5019\u5df2\u7ecf\u6c42\u51fa\u6765\u4e86\n- \u63d2\u503c\u4e0d\u5fc5\u6309\u90e8\u5c31\u73ed\u5730\u6c42\u51fa\u524d\u7f00\u540e\u7f00\u79ef\uff0c\u7531\u4e8e\u6211\u4eec\u5df2\u7ecf\u7279\u5224\u6389\u4e86 $C_{i+1}-C_i\\le n$ \u7684\u60c5\u51b5\uff0c\u56e0\u6b64\u4e00\u5b9a\u6709 $C_i+j-1\\ne C_{i+1},j\\in[1,n+1]$\uff0c\u6b64\u65f6\u53ea\u8981\u9884\u5904\u7406\u4e00\u904d\u6bcf\u4e2a $C_{i}+j-1$ \u7684\u9006\u5143\u7136\u540e\u90a3\u5168\u90e8 $C_i+j-1$ \u7684\u4e58\u79ef\u4e58\u4e0a\u5bf9\u5e94\u7684\u9006\u5143\u5373\u53ef\u3002\n\n```cpp\nconst int MAXN=300;\nconst int MOD=1e9+7;\nconst int MAXS=2520;\nvoid add(int &x,int y){((x+=y)>=MOD)&&(x-=MOD);}\nint qpow(int x,int e){\n\tint ret=1;\n\tfor(;e;e>>=1,x=1ll*x*x%MOD) if(e&1) ret=1ll*ret*x%MOD;\n\treturn ret;\n}\nint n,a[MAXN+5],b[MAXN+5],key[MAXN*2+5],uni[MAXN*2+5],num=0;\nint id[MAXN+5][MAXN+5],itvl_n=0;pii itvls[MAXS+5];\nvoid find_itvl(int l,int r){\n\tif(id[l][r]) return;id[l][r]=++itvl_n;\n\titvls[itvl_n]=mp(l,r);if(l>r) return;\n\tfor(int i=l;i<=r;i++) if(abs((i-l)-(r-i))<=2)\n\t\tfind_itvl(l,i-1),find_itvl(i+1,r);\n}\nint dp[MAXS+5][MAXN+5];bool vis[MAXN+5][MAXN+5];\nvoid work(int l,int r,int len,int itv){\n\tif(l>r){\n\t\tfor(int i=0;i<=len;i++) dp[id[l][r]][i]=1;\n\t\treturn;\n\t} if(vis[l][r]) return;vis[l][r]=1;\n\tfor(int i=1;i<=len;i++) dp[id[l][r]][i]=0;\n\tfor(int x=l;x<=r;x++) if(abs((x-l)-(r-x))<=2) if(a[x]<=itv&&itv<b[x]){\n\t\twork(l,x-1,len,itv);work(x+1,r,len,itv);\n\t\tfor(int i=1;i<=len;i++){\n\t\t\tdp[id[l][r]][i]=(dp[id[l][r]][i]+1ll*\n\t\t\tdp[id[l][x-1]][i]*dp[id[x+1][r]][i-1])%MOD;\n\t\t}\n\t}\n\tfor(int k=1;k<=len;k++) add(dp[id[l][r]][k],dp[id[l][r]][k-1]);\n}\nint iv[MAXN+5],ifac[MAXN+5];\nvoid init_fac(int n){\n\tfor(int i=(ifac[0]=ifac[1]=1)+1;i<=n;i++) ifac[i]=1ll*ifac[MOD%i]*(MOD-MOD/i)%MOD;\n\tfor(int i=1;i<=n;i++) ifac[i]=1ll*ifac[i-1]*ifac[i]%MOD;\n}\nvoid getval(int l,int r){\n\tif(r-l+1<=n+1){\n\t\tfor(int i=1;i<=itvl_n;i++) dp[i][0]=dp[i][r-l+1];\n\t\treturn;\n\t} for(int i=1;i<=n+1;i++) iv[i]=qpow(r-(l+i-1),MOD-2);\n\tfor(int i=1;i<=itvl_n;i++){\n\t\tif(itvls[i].fi>itvls[i].se) continue;\n\t\tint len=itvls[i].se-itvls[i].fi+1,tot=1;\n\t\tfor(int j=1;j<=len+1;j++) tot=1ll*tot*(r-(l+j-1))%MOD;\n\t\tdp[i][0]=0;\n\t\tfor(int j=1;j<=len+1;j++){\n\t\t\tint mul=1ll*ifac[j-1]*ifac[len+1-j]%MOD*tot%MOD*iv[j]%MOD;\n\t\t\tif((len+1-j)&1) mul=MOD-mul;\n\t\t\tdp[i][0]=(dp[i][0]+1ll*mul*dp[i][j])%MOD;\n\t\t}\n\t}\n}\nint main(){\n//\tfreopen(\"robot.in\",\"r\",stdin);\n//\tfreopen(\"robot.out\",\"w\",stdout);\n\tscanf(\"%d\",&n);init_fac(n+3);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d\",&a[i],&b[i]);++b[i];\n\t\tkey[i*2-1]=a[i];key[i*2]=b[i];\n\t} sort(key+1,key+(n<<1)+1);\n\tfor(int i=1;i<=n<<1;i++) if(key[i]^key[i-1])\n\t\tuni[++num]=key[i];\n\tfor(int i=1;i<=n;i++){\n\t\ta[i]=lower_bound(uni+1,uni+num+1,a[i])-uni;\n\t\tb[i]=lower_bound(uni+1,uni+num+1,b[i])-uni;\n\t} find_itvl(1,n);\n\tfor(int i=1;i<num;i++){\n//\t\tprintf(\"%d %d\\n\",uni[i],uni[i+1]-1);\n\t\tmemset(vis,0,sizeof(vis));\n\t\tfor(int l=1;l<=n;l++) for(int r=l-1;r<=n;r++)\n\t\t\tif(id[l][r]) work(l,r,min(uni[i+1]-uni[i],n+1),i);\n\t\tgetval(uni[i],uni[i+1]-1);\n//\t\tfor(int j=1;j<=itvl_n;j++) printf(\"%d %d %d\\n\",i,j,dp[j][0]);\n\t} printf(\"%d\\n\",dp[id[1][n]][0]);\n\treturn 0;\n}\n```",
        "postTime": 1626606245,
        "uid": 115194,
        "name": "lTgMFePRoeZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5469 [NOI2019] \u673a\u5668\u4eba"
    }
]
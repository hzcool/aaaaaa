[
    {
        "content": "\u65b9\u6cd5\uff1a\u5b57\u7b26\u4e32\u6a21\u62df\u3002\n##### \u5f97\u5206\u5386\u7a0b\uff1a\n \u5982\u56fe\u6240\u793a\uff0c\u7ea2\u7ebf\u4e0b\u7684\u4e0d\u8981\u53bb\u770b\uff0c\u90a3\u662f\u6211\u5728\u63a2\u7a76\u6709\u51e0\u4e2aE\u7684\u300220~40\u5206\u7684\u662f\u6211\u6ca1\u6709\u5199\u6b63\u786e\u7684\u60c5\u51b5\uff1b60\u5206\u90a3\u4e2a\u662f\u6211\u628a\u4e58\u548c\u9664\u5199\u9519\u4e86 ~~\uff08\u548c\u4ee5\u4e0b\u9519\u8bef\uff09~~\uff1b80\u5206\u90a3\u4e2a\u662f\u6211\u6ca1\u5224\u65ad\u5b57\u7b26\u4e32\u7b2c\u4e00\u4f4d\u5c31\u662f\u8fd0\u7b97\u7b26\u7684\u7ed3\u679c ~~\uff08\u540c\u4e0a\uff09~~\uff1b90\u5206\u90a3\u4e2a\u662f\u6211\u628aE2\u5199\u9519\u4e86\uff0c\u6700\u540e\u7ec8\u4e8e\u8fc7\u4e86\u3002\n![](https://cdn.luogu.com.cn/upload/pic/71618.png)\n##### \u5751\u70b9\u5206\u6790\uff1a\n 1. \u5176\u5b83\u975e\u8fd0\u7b97\u7b26\u4e0d\u7b97\u5b57\u6bcd\u3002\n 2. \u4e58\u548c\u9664\u5343\u4e07\u4e0d\u8981\u5199\u9519\u3002\n 3. \u5b57\u7b26\u4e32\u7b2c\u4e00\u4f4d\u53ef\u80fd\u662f\u8fd0\u7b97\u7b26\u3002\n 4. \u9664\u4e86\u4e0d\u5339\u914d\u4e4b\u5916\uff0c\u2018\uff08\u2019\u548c\u2018\uff09\u2019\u4e0d\u5c5e\u4e8e\u9519\u8bef\u3002\n 5. \u591a\u4e2a\u9519\u8bef\u65f6\u4ec5\u8f93\u51fa\u9760\u524d\u7684\u90a3\u4e2a\u6307\u7684\u662f\u987a\u5e8f\u9760\u524d\u7684\u90a3\u4e2a\u800c\u4e0d\u662f\u6700\u5148\u51fa\u73b0\u7684\u90a3\u4e2a\u3002\n \n\u4ee5\u4e0a\u662f\u6211\u7ecf\u8fc7\u8840\u7684\u6559\u8bad\u5f97\u51fa\u7684\uff0c\u524d\u8f66\u4e4b\u8986\uff0c\u540e\u8f66\u4e4b\u9274\uff0c\u5e0c\u671b\u5927\u5bb6\u4e0d\u8981\u50cf\u6211\u4e00\u6837\u6302\u5728\u8fd9\u4e9b\u5751\u91cc\u4e86\u3002\n##### \u4ee3\u7801\uff1a\n20\u5206~90\u5206\u7684\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86\uff0c\u592a\u4e22\u4eba\u4e86......\n\u4ee5\u4e0b\u662f145\u884c\u7684\u4ee3\u7801\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstring a;\nstack<int>num;\nstack<char>fh;//\u8eab\u4e3aC\u515a\u600e\u4e48\u80fd\u591f\u4e0d\u7528STL\u5462\uff1f\nbool E1()\n{\n\tint i;\n\tfor(i=0;i<a.size();i++)\n\t if(a[i]=='/' && a[i+1]=='0')\n\t  return true;\n\treturn false;\n}//E1\u7684\u5224\u65ad\nbool E2()\n{\n\tint i,fz=0;\n\tfor(i=0;i<a.size();i++)\n\t if(a[i]=='(')\n\t  fz++;\n\t else\n\t  if(a[i]==')')\n\t   fz--;\n\tif(fz!=0)\n\t return true;\n\tfor(i=0;i<a.size();i++)\n\t if((a[i]>'9' || a[i]<'0') && a[i]!='+' && a[i]!='-' && a[i]!='*' && a[i]!='/' && (a[i]<'a' || a[i]>'z') && (a[i]<'A' || a[i]>'Z') && a[i]!='(' && a[i]!=')')\n\t  return true;\n\treturn false;\n}//E2\u7684\u5224\u65ad\nbool E3()\n{\n\tint i;\n\tfor(i=0;i<a.size();i++)\n\t if((a[i]>='a' && a[i]<='z') || (a[i]>='A' && a[i]<='Z'))\n\t  return true;\n\treturn false;\n}//E3\u7684\u5224\u65ad\nbool E4()\n{\n\tint i;\n\tfor(i=0;i<a.size();i++)\n\t if(a[i]=='+' || a[i]=='-' || a[i]=='*' || a[i]=='/')\n\t  if(a[i+1]=='+' || a[i+1]=='-' || a[i+1]=='*' || a[i+1]=='/' || i==0)\n\t   return true;//\u8981\u7279\u5224i\u7b49\u4e8e0\u7684\u60c5\u51b5\n\treturn false;\n}E4\u7684\u5224\u65ad\nvoid solve()\n{\n\tbool ok=false;\n\tint i,j,w;\n\tcout<<a<<\"=\";//\u6309\u683c\u5f0f\u8f93\u51fa\n\tfor(i=0;i<a.size();i++)\n\t{\n\t if(a[i]>='0' && a[i]<='9')\n\t {\n\t  if(ok==true)\n\t  {\n\t   w=num.top();\n\t   num.pop();\n\t   w=w*10+a[i]-'0';\n\t   num.push(w);\n\t  }\n\t  else\n\t   num.push(a[i]-'0'),ok=true;\n\t }//\u8bb0\u5f55\u6570\u5b57\n\t else\n\t {\n\t  ok=false;\n\t  if(a[i]=='+' || a[i]=='-')\n\t  {\n\t   fh.push(a[i]);\n\t   continue;\n\t  }//\u662f+\u6216-\u7684\u65f6\u5019\u628a\u5b83\u4eec\u653e\u5230\u6808\u4e2d\n\t  if(a[i]=='*')\n\t  {\n\t   for(j=i+1;j<a.size();j++)\n\t    if(a[j]>='0' && a[j]<='9')\n\t     if(ok)\n\t      w=w*10+a[j]-'0';\n\t     else\n\t      w=a[j]-'0',ok=true;\n\t    else\n\t     break;\n\t   w=w*num.top();\n\t   num.pop();\n\t   num.push(w);\n\t   i=j-1;\n\t  }\n\t  if(a[i]=='/')\n\t  {\n\t   for(j=i+1;j<a.size();j++)\n\t    if(a[j]>='0' && a[j]<='9')\n\t     if(ok==true)\n\t      w=w*10+a[j]-'0';\n\t     else\n\t      w=a[j]-'0',ok=true;\n\t    else\n\t     break;\n\t   w=num.top()/w;\n\t   num.pop();\n\t   num.push(w);\n\t   i=j-1;\n\t  }\n\t  ok=false;\n\t }\n\t}//\u5982\u679c\u662f*\u6216/\u65f6\u73b0\u573a\u5224\u65ad\uff08\u73b0\u70e4\u73b0\u5356\uff09\n\tw=num.top();\n\tnum.pop();\n\twhile(!num.empty())\n\t{\n\t if(fh.top()=='+')\n\t  w=w+num.top();\n\t else\n\t  w=num.top()-w;\n\t num.pop();\n\t fh.pop();\n\t}//\u6700\u7ec8\u5f97\u51fa\u7ed3\u679c\uff08\u540e\u671f\u52a0\u5de5\uff09\n\tcout<<w<<endl;\n}\nint main()\n{\n\tgetline(cin,a);\n\tif(E1())\n\t{\n\t cout<<\"E1\"<<endl;\n\t return 0;\n\t}\n\tif(E2())\n\t{\n\t cout<<\"E2\"<<endl;\n\t return 0;\n\t}\n\tif(E3())\n\t{\n\t cout<<\"E3\"<<endl;\n\t return 0;\n\t}\n\tif(E4())\n\t{\n\t cout<<\"E4\"<<endl;\n\t return 0;\n\t}\n\tsolve();//\u8fd9\u4e2a\u987a\u5e8f\u4e0d\u80fd\u98a0\u5012\n    return 0;\n}\n```\n\u6ce8\uff1a\u8bf7\u4e0d\u8981\u5728\u8bc4\u8bba\u533a\u8bc4\u8bba\uff0c\u76f4\u63a5\u79c1\u4fe1\u6211\u5c31\u53ef\u4ee5\u4e86",
        "postTime": 1565622037,
        "uid": 79072,
        "name": "hylong",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2718 \u3010\u7b80\u5355\u7684\u8868\u8fbe\u5f0f\u3011"
    },
    {
        "content": "### \u8bc4\u4ef7\uff1a\n\u5176\u5b9e\u8fd9\u9053\u9898\u96be\u5ea6\u4e0d\u662f\u5f88\u5927\uff0c\u4e3b\u8981\u5c31\u662f\u5f88\u591a\u4eba\u4e0d\u7406\u89e3\u4ec0\u4e48\u53eb\u9519\u8bef\u9760\u524d\u7684\u3002\u5bf9\u6211\u6765\u8bf4\uff0c\u9519\u8bef\u9760\u524d\u6307\u7684\u662f\u7f16\u53f7\u8f83\u5c0f\u7684\u9519\u8bef\u3002\n\n### \u89e3\u9898\u601d\u8def\uff1a\n1. \u7f16\u4e00\u4e2a\u67e5\u627e\u9519\u8bef\u7684\u51fd\u6570\u3002\u5148\u4ece\u7f16\u53f7\u8f83**\u5c0f**\u7684\u9519\u8bef\u5f00\u59cb\u5224\u65ad\uff0c\u5982\u679c\u6709\u9519\uff0c**\u76f4\u63a5**\u8fd4\u56de\u9519\u8bef\u7801\uff081\uff0c2\uff0c3\uff0c4\uff09\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5219\u8fd4\u56de0\u3002\n1. \u628a\u8fd9\u4e2a**\u4e2d\u7f00**\u8868\u8fbe\u5f0f\u8f6c\u6362\u4e3a**\u540e\u7f00**\u8868\u8fbe\u5f0f\u3002\u9047\u5230\u6570\u5b57\u76f4\u63a5\u51652\u53f7\u6808\uff1b\u9047\u5230\u5de6\u62ec\u53f7\uff0c\u76f4\u63a5\u51651\u53f7\u6808\uff1b\u9047\u5230\u4e58\u9664\u7b26\u53f7\uff0c\u5148\u628a\u62ec\u53f7\u540e\u9762\u3001\u8be5\u7b26\u53f7\u524d\u9762\u7684\u4e58\u9664\u7b26\u53f7\u5f39\u51fa1\u53f7\u6808\uff0c\u51652\u53f7\u6808\uff0c\u518d\u8fdb1\u53f7\u6808\uff1b\u9047\u5230\u52a0\u51cf\u7b26\u53f7\uff0c\u5148\u628a\u62ec\u53f7\u540e\u9762\u3001\u8be5\u7b26\u53f7\u524d\u9762\u7684\u6240\u6709\u7b26\u53f7\u5f39\u51fa1\u53f7\u6808\uff0c\u51652\u53f7\u6808\uff0c\u518d\u8fdb1\u53f7\u6808\uff1b\u9047\u5230\u53f3\u62ec\u53f7\uff0c\u4e00\u76f4\u628a\u7b26\u53f7\u5f39\u51fa1\u53f7\u6808\uff0c\u51652\u53f7\u6808\uff0c\u76f4\u5230\u9047\u5230\u6700\u8fd1\u7684\u5de6\u62ec\u53f7\uff0c\u5f39\u51fa1\u53f7\u6808\uff0c\u4f46\u4e0d\u51652\u53f7\u6808\uff1b\u5230\u4e86\u672b\u5c3e\uff0c\u4e00\u76f4\u628a\u7b26\u53f7\u5f39\u51fa1\u53f7\u6808\uff0c\u51652\u53f7\u6808\uff0c\u76f4\u5230\u6808\u7a7a\u3002\n1. \u8ba1\u7b97\u8fd9\u4e2a\u540e\u7f00\u8868\u8fbe\u5f0f\uff082\u53f7\u6808\uff09\uff0c\u9047\u5230\u6570\u5b57\u76f4\u63a5\u51653\u53f7\u6808\uff0c\u9047\u5230\u7b26\u53f7\u53d6\u51fa\u4e24\u4e2a\u6570\u8fdb\u884c\u8fd0\u7b97\uff0c\u6808\u9876\u6307\u9488\u51cf1\uff0c\u628a\u7ed3\u679c\u8d4b\u7ed9\u6808\u9876\u6307\u9488\u6240\u6307\u7684\u6570\u3002\u6700\u7ec8\u8fd4\u56de\u6808\u9876\u6307\u9488\u6240\u6307\u7684\u6570\u3002\n### \u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<cstdio>\nusing namespace std;\nstruct node{\n\tchar cstack[1000001];//\u5b57\u7b26\u6808\n\tint istack[1000001];//\u6574\u6570\u6808\n\tint top;//\u6808\u9876\u6307\u9488\n};\nnode a1,a2,a3;//\u4e09\u4e2a\u6808\nchar op[1000001];//\u4e2d\u7f00\u8868\u8fbe\u5f0f\nint ans;\nvoid turn(int s,int t,char str[],int &x)//\u5b57\u7b26\u8f6c\u6570\u5b57\n{\n\tint i=s;\n\twhile(i<t)\n\t\tx*=10,x+=(str[i++]-48);\n}\nbool isnum(char c)//\u5224\u65ad\u662f\u5426\u662f\u6570\u5b57\n{\n\tif(c>='0'&&c<='9') return true;\n\treturn false;\n}\nvoid mid_to_behind(char middle[])//\u4e2d\u7f00\u8f6c\u540e\u7f00\n{\n\tint i=0;\n\twhile(middle[i]!='\\0')\n\t{\n\t\tif(isnum(middle[i]))\n\t\t{\n\t\t\twhile(isnum(middle[i]))\n\t\t\t\ta2.cstack[++a2.top]=middle[i++];\n\t\t\ta2.cstack[++a2.top]=' ';//\u6ce8\u610f\u8981\u7559\u7a7a\u683c\n\t\t}\n\t\twhile(middle[i]=='(')\n\t\t\ta1.cstack[++a1.top]=middle[i++];\n\t\tif(middle[i]=='*'||middle[i]=='/')\n\t\t{\n\t\t\twhile(a1.cstack[a1.top]=='*'||a1.cstack[a1.top]=='/')\n\t\t\t\ta2.cstack[++a2.top]=a1.cstack[a1.top],a1.cstack[a1.top--]='\\0',a2.cstack[++a2.top]=' ';\n\t\t\ta1.cstack[++a1.top]=middle[i++];\n\t\t}\n\t\tif(middle[i]=='+'||middle[i]=='-')\n\t\t{\n\t\t\twhile(a1.cstack[a1.top]!='('&&a1.top>0)\n\t\t\t\ta2.cstack[++a2.top]=a1.cstack[a1.top],a1.cstack[a1.top--]='\\0',a2.cstack[++a2.top]=' ';\n\t\t\ta1.cstack[++a1.top]=middle[i++];\n\t\t}\n\t\twhile(middle[i]==')')\n\t\t{\n\t\t\twhile(a1.cstack[a1.top]!='(')\n\t\t\t\ta2.cstack[++a2.top]=a1.cstack[a1.top],a1.cstack[a1.top--]='\\0',a2.cstack[++a2.top]=' ';\n\t\t\ta1.cstack[a1.top--]='\\0',i++;\n\t\t}\n\t}\n\twhile(a1.top>0)\n\t\ta2.cstack[++a2.top]=a1.cstack[a1.top],a1.cstack[a1.top--]='\\0',a2.cstack[++a2.top]=' ';\n}\nint behind_op(char stack[])//\u8fd0\u7b97\u540e\u7f00\u8868\u8fbe\u5f0f\n{\n\tint i=1,j;\n\twhile(stack[i]!='\\0')\n\t{\n\t\tj=0;\n\t\tif(isnum(stack[i]))\n\t\t{\n\t\t\tj=i;\n\t\t\twhile(isnum(stack[++j]));\n\t\t\tturn(i,j,stack,a3.istack[++a3.top]);\n\t\t\ti=j;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tswitch(stack[i++])\n\t\t\t{\n\t\t\t\tcase '+':a3.istack[--a3.top]+=a3.istack[a3.top+1],a3.istack[a3.top+1]=0;break;\n\t\t\t\tcase '-':a3.istack[--a3.top]-=a3.istack[a3.top+1],a3.istack[a3.top+1]=0;break;\n\t\t\t\tcase '*':a3.istack[--a3.top]*=a3.istack[a3.top+1],a3.istack[a3.top+1]=0;break;\n\t\t\t\tcase '/':a3.istack[--a3.top]/=a3.istack[a3.top+1],a3.istack[a3.top+1]=0;break;\n\t\t\t}\n\t\t}\n\t}\n\treturn a3.istack[a3.top];\n}\nint judge(char s[])//\u5224\u65ad\u662f\u5426\u5408\u6cd5\n{\n\tfor(int i=0;s[i]!='\\0';i++)\n\t\tif(s[i+1]=='0'&&s[i]=='/')\n\t\t\treturn 1;\n\tfor(int i=0;s[i]!='\\0';i++)\n\t\tif((s[i]!='+'&&s[i]!='-'&&s[i]!='*'&&s[i]!='/'&&s[i]!='('&&s[i]!=')')&&!(s[i]>='A'&&s[i]<='Z')&&!(s[i]>='a'&&s[i]<='z')&&!(s[i]>='0'&&s[i]<='9'))\n\t\t\treturn 2;\n\tint top=0;\n\tfor(int i=0;s[i]!='\\0';i++)\n\t{\n\t\tif(s[i]=='(') top++;\n\t\tif(s[i]==')') top--;\n\t\tif(top<0) return 2;\n\t}\n\tif(top>0) return 2;\n\tfor(int i=0;s[i]!='\\0';i++)\n\t\tif((s[i]>='A'&&s[i]<='Z')||(s[i]>='a'&&s[i]<='z'))\n\t\t\treturn 3;\n\tfor(int i=0;s[i]!='\\0';i++)\n\t{\n\t\tif(s[i]=='+'||s[i]=='-'||s[i]=='*'||s[i]=='/')\n\t\t\tif(!isnum(s[i+1])||!i)\n\t\t\t\treturn 4;\n\t}\n\treturn 0;\n}\nint main()\n{\n\tgets(op);\n\tswitch(judge(op))\n\t{\n\t\tcase 1:puts(\"E1\");return 0;\n\t\tcase 2:puts(\"E2\");return 0;\n\t\tcase 3:puts(\"E3\");return 0;\n\t\tcase 4:puts(\"E4\");return 0;\n\t}\n\tmid_to_behind(op);\n\tans=behind_op(a2.cstack);\n\tprintf(\"%s=%d\",op,ans);\n\treturn 0;\n}\n```\n124\u884c\u4ee3\u7801\uff0c\u5e0c\u671b\u5927\u5bb6\u80fd\u652f\u6301\u6211\uff0c\u540c\u65f6\u8fd9\u4e5f\u662f\u6211\u7b2c\u4e00\u7bc7\u9898\u89e3\u3002\u5176\u5b9e\u8fd9\u4e2a\u7b97\u6cd5\u5e76\u4e0d\u4ec5\u5c40\u9650\u4e8e\u6574\u6570\uff0c\u5927\u5bb6\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u4e00\u4e0b\u6d6e\u70b9\u6570\u7684\u8fd0\u7b97\u3002\n### \u62d3\u5c55\uff1a\n\u505a\u5b8c\u8fd9\u9053\u9898\uff0c\u5927\u5bb6\u53ef\u4ee5\u5c1d\u8bd5\u53bb\u505a[\u590d\u6742\u7684\u8868\u8fbe\u5f0f](https://www.luogu.org/problemnew/show/U74242)\uff0c\u8c22\u8c22\u652f\u6301",
        "postTime": 1561719730,
        "uid": 181378,
        "name": "Alarm5854",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2718 \u3010\u7b80\u5355\u7684\u8868\u8fbe\u5f0f\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\u5148\u5224\u65ad\u8868\u8fbe\u5f0f\u662f\u5426\u5408\u6cd5\uff0c\u5408\u6cd5\u7684\u8ba1\u7b97\u8868\u8fbe\u5f0f\u503c\u3002\n### \u89e3\u6cd5\n\u5224\u65ad\u5b57\u7b26\u4e32\u662f\u5426\u5408\u6cd5\uff0c\u679a\u4e3e\u6bcf\u4e00\u4e2a\u5b57\u7b26\u662f\u5426\u7b26\u5408\u8981\u6c42\uff0c\u4e0b\u9762\u5217\u51fa\u5404\u79cd\u9519\u8bef\u7684\u5b9e\u9645\u5224\u65ad\u65b9\u6cd5\uff1a\n\n- E1 \u5f53\u524d\u4f4d\u7f6e\u662f `0` \u4e14\u524d\u4e00\u4f4d\u662f `/` \uff1a `s[i]=='0'&&s[i-1]=='/'`\n\n- E2 \u5de6\u62ec\u53f7\u7f3a\u5c11\u6216\u53f3\u62ec\u53f7\u591a\u4f59\uff1a `cnt!=0` (cnt \u4e3a\u62ec\u53f7\u4e2a\u6570) \uff0c\u548c\u9664\u4e86 + \uff0c - \uff0c \\* \uff0c / \u4e4b\u5916\u7684\u7b26\u53f7\uff1a `s[i]!='+'&&s[i]!='-'&&s[i]!='*'&&s[i]!='/'`\n\n- E3 \u5b57\u7b26\u662f\u5927\u5c0f\u5199\u5b57\u6bcd\uff1a `'0'<=s[i]&&s[i]<='9'`\n\n- E4 \u8fde\u7eed\u51fa\u73b0\u8fd0\u7b97\u7b26\uff1a `oper(s[i-1])&&oper(s[i])` (oper() \u5224\u65ad\u662f\u5426\u4e3a\u8fd0\u7b97\u7b26)\n\n\u5224\u65ad\u5408\u6cd5\u8868\u8fbe\u5f0f\u7684\u4ee3\u7801\u5b9e\u73b0\uff1a\n```cpp\nbool number(char c){//\u5224\u65ad\u6570\u5b57\n\treturn ('0'<=c&&c<='9');\n}\nint oper(char c){//\u7b26\u53f7\u5224\u65ad\n\tif(c=='*'||c=='/') return 2;\n\tif(c=='+'||c=='-') return 1;\n\treturn 0;\n}\nstring pk(){\n\tint ans=10;\n\tint cpu=0;\n\tif(oper(s[0])&&s[0]!='-'||oper(s[strlen(s)-1])) ans=min(4,ans);//\u9996\u4f4d\u4e0d\u51fa\u73b0\u8fd0\u7b97\u7b26\uff08\u9996\u4f4d\u8d1f\u53f7\u9664\u5916\uff09\n\tfor(int i=0;i<=strlen(s)-1;++i){\n\t\tif(s[i]=='(') ++cpu;\n\t\tif(s[i]==')') --cpu;//\u7edf\u8ba1\u62ec\u53f7\n\t\tif('A'<=s[i]&&s[i]<='Z'||'a'<=s[i]&&s[i]<='z') ans=min(3,ans);\n\t\telse if(cpu<0||(s[i]=='='&&i!=strlen(s)-1)||(oper(s[i])==0&&number(s[i])==0&&(s[i]!='('&&s[i]!=')'))) ans=min(2,ans);//\u4e0d\u662f\u8fd0\u7b97\u7b26\u548c\u62ec\u53f7\n\t\telse if(i&&oper(s[i-1])&&oper(s[i])) ans=min(4,ans);//\u8fde\u7eed\u7b26\u53f7\n\t\telse if(i&&s[i-1]=='/'&&s[i]=='0') ans=min(1,ans);//\u96640\n\t\telse if(i&&s[i-1]=='('&&s[i]==')') ans=min(2,ans);//\u7a7a\u62ec\u53f7\n        //\u5224\u65ad\u5404\u79cd\u60c5\u51b5\uff0c\u6ce8\u610f\u4e00\u5b9a\u8981\u5199else-if\uff0c\u4e0d\u7136\u4f1a\u91cd\u590d\u8ba1\u7b97\u5176\u4ed6\u60c5\u51b5\n\t}\n\tif(cpu!=0) ans=min(2,ans);//\u62ec\u53f7\u591a\u4f59\n\tif(ans==10) return \"Right!\";\n\tcout<<\"E\"<<ans<<endl;\n\treturn \"Never!\";\n}\n```\n\n\u90a3\u4e48\u5982\u4f55\u8ba1\u7b97\u8868\u8fbe\u5f0f\u7684\u503c\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2a\u6808\u628a\u5b83\u8f6c\u6362\u6210\u524d\u7f00\u8868\u8fbe\u5f0f\uff0c\u7136\u540e\u9012\u5f52\u8ba1\u7b97\u503c\u3002\n\u8f6c\u6362\u524d\u7f00\u8868\u8fbe\u5f0f\u7684\u8fc7\u7a0b\uff1a\n```cpp\n//\u8bbe\u6709\u4e2d\u95f4\u7ed3\u679c\u6808s1\uff0c\u8fd0\u7b97\u7b26\u6808s2\nfor(int i=strlen(s)-1;i>=0;--i){//1.\u4ece\u540e\u5f80\u524d\u904d\u5386\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\n\t\tif(i!=strlen(s)-1&&s[i]=='-'&&s[i-1]=='(')//2.\u5982\u679c\u62ec\u53f7\u540e\u9762\u6709\u8d1f\u53f7\uff0c\u5219\u5728s1\u88650\n\t\t\tx.push(\"0\");\n\t\tif(number(s[i])){//3.\u5982\u679c\u662f\u6570\u5b57\uff0c\u76f4\u63a5\u5165\u6808s1\n\t\t\tstr=s[i];\n\t\t\twhile(number(s[--i])) str=s[i]+str;\n\t\t\tx.push(str);\n\t\t\t++i;\n\t\t\tcontinue;\n\t\t}if(oper(s[i])){SD://4.\u5982\u679c\u662f\u8fd0\u7b97\u7b26\n\t\t\tif(p.empty()||oper(s[i])>=oper(p.top()))//4.1.\u5982\u679c\u6808\u4e3a\u7a7a\uff0c\u6216\u8005\u5f53\u524d\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u6bd4\u6808\u9876\u7b26\u53f7\u4f18\u5148\u7ea7\u9ad8\uff0c\u5219\u5165\u6808s2\uff0c\u5224\u65ad\u4e0b\u4e00\u4e2a\u5b57\u7b26\n\t\t\t\tp.push(s[i]);\n\t\t\telse{//4.2.\u5426\u5219\uff0c\u6808\u9876\u5143\u7d20\u4eces2\u51fa\u6808\uff0c\u5165\u6808s1\n\t\t\t\tstr=p.top();\n\t\t\t\tp.pop();\n\t\t\t\tx.push(str);\n\t\t\t\tgoto SD;//4.3.\u7136\u540e\uff0c\u8fd4\u56de4.1.\uff0c\u76f4\u5230\u7b26\u5408\u6761\u4ef64.1.\n\t\t\t}\n\t\t\tcontinue;\n\t\t}if(s[i]==')'){//5.\u9047\u5230\u53f3\u62ec\u53f7\u76f4\u63a5\u5165\u6808s2\n\t\t\tp.push(s[i]);\n\t\t\tcontinue;\n\t\t}while(p.top()!=')'){//6.\u9047\u5230\u5de6\u62ec\u53f7\uff0c\u4f9d\u6b21\u4eces2\u4e2d\u5c06\u8fd0\u7b97\u7b26\u51fa\u6808\uff0c\u5e76\u5165\u6808s1\n\t\t\tstr=p.top();\n\t\t\tp.pop();\n\t\t\tx.push(str);\n\t\t}\n\t\tp.pop();//7.\u53f3\u62ec\u53f7\u51fa\u6808\n        //8.\u76f4\u5230\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u4e3a\u6b62\n\t}\n\tif(s[0]=='-') x.push(\"0\");//9.\u5982\u679c\u7b2c\u4e00\u4f4d\u4e3a\u8d1f\u53f7\uff0c\u5219\u88650\n\twhile(!p.empty()){//10.\u5c06\u5269\u4f59\u7684\u7b26\u53f7\u4f9d\u6b21\u5f39\u51fas2\u538b\u5165s1\n\t\tstr=p.top();\n\t\tp.pop();\n\t\tx.push(str);\n\t}\n```\n\u8ba1\u7b97\u524d\u7f00\u8868\u8fbe\u5f0f\uff1a\n```cpp\nlong long f(){\n\tstring sk=x.top();//\u53d6\u8fd0\u7b97\u7b26/\u6570\u5b57\n\tint a; \n\tx.pop();\n\tif(sk==\"+\") return 1LL*f()+f();//\u9012\u5f52\u8ba1\u7b97\n\tif(sk==\"-\") return 1LL*f()-f();\n\tif(sk==\"*\") return 1LL*f()*f();\n\tif(sk==\"/\") return 1LL*f()/f();\n\treturn 1LL*(long long)(atof(sk.c_str()));//c_str()->\u628astring\u7c7b\u578b\u8f6c\u6210char*\n                           //atof->\u628achar*\u8f6c\u6210double\u6d6e\u70b9\u6570\n}\n```\n\u5b8c\u6210\u7684\u4ee3\u7801\u51fa\u7089\u5566\uff01\n```cpp\n#include<bits/stdc++.h>\n#include<bits/stl_algobase.h>\nusing namespace std;\nint n;\nchar s[555];\nstring str;\nstack<char>p;//STL\u5bb9\u5668\nstack<string>x;//\u6ce8\u610f\uff0c\u4e0d\u80fd\u7528char*\nbool flag;\nbool number(char c){//\u5224\u65ad\u6570\u5b57\n\treturn ('0'<=c&&c<='9');\n}\nint oper(char c){//\u7b26\u53f7\u5224\u65ad/\u5224\u65ad\u4f18\u5148\u7ea7\n\tif(c=='*'||c=='/') return 2;\n\tif(c=='+'||c=='-') return 1;\n\treturn 0;\n}\nlong long f(){\n\tstring sk=x.top();//\u53d6\u8fd0\u7b97\u7b26/\u6570\u5b57\n\tint a; \n\tx.pop();\n\tif(sk==\"+\") return 1LL*f()+f();//\u9012\u5f52\u8ba1\u7b97\n\tif(sk==\"-\") return 1LL*f()-f();\n\tif(sk==\"*\") return 1LL*f()*f();\n\tif(sk==\"/\") return 1LL*f()/f();\n\treturn 1LL*(long long)(atof(sk.c_str()));//c_str()->\u628astring\u7c7b\u578b\u8f6c\u6210char*\n                           //atof->\u628achar*\u8f6c\u6210double\u6d6e\u70b9\u6570\n}\nstring pk(){\n\tint ans=10;\n\tint cpu=0;\n\tif(oper(s[0])&&s[0]!='-'||oper(s[strlen(s)-1])) ans=min(4,ans);//\u9996\u4f4d\u4e0d\u51fa\u73b0\u8fd0\u7b97\u7b26\uff08\u9996\u4f4d\u8d1f\u53f7\u9664\u5916\uff09\n\tfor(int i=0;i<=strlen(s)-1;++i){\n\t\tif(s[i]=='(') ++cpu;\n\t\tif(s[i]==')') --cpu;//\u7edf\u8ba1\u62ec\u53f7\n\t\tif('A'<=s[i]&&s[i]<='Z'||'a'<=s[i]&&s[i]<='z') ans=min(3,ans);\n\t\telse if(cpu<0||(s[i]=='='&&i!=strlen(s)-1)||(oper(s[i])==0&&number(s[i])==0&&(s[i]!='('&&s[i]!=')'))) ans=min(2,ans);//\u4e0d\u662f\u8fd0\u7b97\u7b26\u548c\u62ec\u53f7\n\t\telse if(i&&oper(s[i-1])&&oper(s[i])) ans=min(4,ans);//\u8fde\u7eed\u7b26\u53f7\n\t\telse if(i&&s[i-1]=='/'&&s[i]=='0') ans=min(1,ans);//\u96640\n\t\telse if(i&&s[i-1]=='('&&s[i]==')') ans=min(2,ans);//\u7a7a\u62ec\u53f7\n        //\u5224\u65ad\u5404\u79cd\u60c5\u51b5\uff0c\u6ce8\u610f\u4e00\u5b9a\u8981\u5199else-if\uff0c\u4e0d\u7136\u4f1a\u91cd\u590d\u8ba1\u7b97\u5176\u4ed6\u60c5\u51b5\n\t}\n\tif(cpu!=0) ans=min(2,ans);//\u62ec\u53f7\u591a\u4f59\n\tif(ans==10) return \"Right!\";\n\tcout<<\"E\"<<ans<<endl;\n\treturn \"Never!\";\n}\nint main(){\n\tscanf(\"%s\",s);\n\tstring opi=pk();\n\tif(opi!=\"Right!\"){//\u8868\u8fbe\u5f0f\u4e0d\u5408\u683c\u76f4\u63a5\u7ed3\u675f\n\t\treturn 0;\n\t}\n\tprintf(\"%s=\",s);\n    //\u5426\u5219\uff0c\u4e2d\u7f00\u8868\u8fbe\u5f0f\u8f6c\u524d\u7f00\u8868\u8fbe\u5f0f\n\tfor(int i=strlen(s)-1;i>=0;--i){//1.\u4ece\u540e\u5f80\u524d\u904d\u5386\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\n\t\tif(i!=strlen(s)-1&&s[i]=='-'&&s[i-1]=='(')//2.\u5982\u679c\u62ec\u53f7\u540e\u9762\u6709\u8d1f\u53f7\uff0c\u5219\u5728s1\u88650\n\t\t\tx.push(\"0\");\n\t\tif(number(s[i])){//3.\u5982\u679c\u662f\u6570\u5b57\uff0c\u76f4\u63a5\u5165\u6808s1\n\t\t\tstr=s[i];\n\t\t\twhile(number(s[--i])) str=s[i]+str;\n\t\t\tx.push(str);\n\t\t\t++i;\n\t\t\tcontinue;\n\t\t}if(oper(s[i])){SD://4.\u5982\u679c\u662f\u8fd0\u7b97\u7b26\n\t\t\tif(p.empty()||oper(s[i])>=oper(p.top()))//4.1.\u5982\u679c\u6808\u4e3a\u7a7a\uff0c\u6216\u8005\u5f53\u524d\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u6bd4\u6808\u9876\u7b26\u53f7\u4f18\u5148\u7ea7\u9ad8\uff0c\u5219\u5165\u6808s2\n\t\t\t\tp.push(s[i]);\n\t\t\telse{//4.2.\u5426\u5219\uff0c\u6808\u9876\u5143\u7d20\u4eces2\u51fa\u6808\uff0c\u5165\u6808s1\n\t\t\t\tstr=p.top();\n\t\t\t\tp.pop();\n\t\t\t\tx.push(str);\n\t\t\t\tgoto SD;//4.3.\u7136\u540e\uff0c\u8fd4\u56de4.1.\n\t\t\t}\n\t\t\tcontinue;\n\t\t}if(s[i]==')'){//5.\u9047\u5230\u53f3\u62ec\u53f7\u76f4\u63a5\u5165\u6808s2\n\t\t\tp.push(s[i]);\n\t\t\tcontinue;\n\t\t}while(p.top()!=')'){//6.\u9047\u5230\u5de6\u62ec\u53f7\uff0c\u4f9d\u6b21\u4eces2\u4e2d\u5c06\u8fd0\u7b97\u7b26\u51fa\u6808\uff0c\u5e76\u5165\u6808s1\n\t\t\tstr=p.top();\n\t\t\tp.pop();\n\t\t\tx.push(str);\n\t\t}\n\t\tp.pop();//7.\u53f3\u62ec\u53f7\u51fa\u6808\n        //8.\u76f4\u5230\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u4e3a\u6b62\n\t}\n\tif(s[0]=='-') x.push(\"0\");//9.\u5982\u679c\u7b2c\u4e00\u4f4d\u4e3a\u8d1f\u53f7\uff0c\u5219\u88650\n\twhile(!p.empty()){//10.\u5c06\u5269\u4f59\u7684\u7b26\u53f7\u4f9d\u6b21\u5f39\u51fas2\u538b\u5165s1\n\t\tstr=p.top();\n\t\tp.pop();\n\t\tx.push(str);\n\t}\n\tprintf(\"%lld\\n\",f());//\u8ba1\u7b97\u524d\u7f00\u8868\u8fbe\u5f0f\n\treturn 0;\n}\n```\n\u987a\u5229\u7ed3\u675f\uff01",
        "postTime": 1626586061,
        "uid": 394167,
        "name": "Dragon_Horse",
        "ccfLevel": 5,
        "title": "P2718 \u7b80\u5355\u7684\u8868\u8fbe\u5f0f \u9898\u89e3"
    },
    {
        "content": "~~\u6211\u4e0d\u5f97\u4e0d\u8bf4\u5b9e\u8bdd\uff0c\u786e\u5b9e\u633a\u6c34\u7684~~\n\n\n------------\n\u4e0e [\u8fd9\u9898](https://www.luogu.com.cn/problem/P2379) \u548c [\u8fd9\u9898](https://www.luogu.com.cn/problem/U175007) \u6709\u5f02\u66f2\u540c\u5de5\u4e4b\u5999\u3002\n\n## \u4e00\u822c\u5bf9\u4e8e\u8ba1\u7b97\u7b97\u5f0f\u7684\u4e00\u7c7b\u9898\u76ee\u6211\u4eec\u901a\u5e38\u7528\u5230\u8fd9\u79cd\u65b9\u6cd5\uff1a\n1.\u4e2d\u7f00\u8f6c\u540e\u7f00\n\n2.\u540e\u7f00\u6c42\u503c\n\n### 1.\u4e2d\u7f00\u8f6c\u540e\u7f00\n\u4ece\u5de6\u5230\u53f3\u626b\u63cf\u6bcf\u4e00\u4e2a\u5b57\u7b26\u3002\u5982\u679c\u626b\u63cf\u5230\u7684\u5b57\u7b26\u662f\u64cd\u4f5c\u6570\uff08\u5982a\u3001b\u7b49\uff09\uff0c\u653e\u5165\u961f\u5217\u3002\n\n\n\n\u5982\u679c\u626b\u63cf\u5230\u7684\u5b57\u7b26\u662f\u4e00\u4e2a\u64cd\u4f5c\u7b26\uff0c\u5206\u4e09\u79cd\u60c5\u51b5\uff1a\n\n\uff081\uff09\u5982\u679c\u5806\u6808\u662f\u7a7a\u7684\uff0c\u76f4\u63a5\u5c06\u64cd\u4f5c\u7b26\u5b58\u50a8\u5230\u5806\u6808\u4e2d\uff08push it\uff09\n\n\uff082\uff09\u5982\u679c\u8be5\u64cd\u4f5c\u7b26\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u5806\u6808\u51fa\u53e3\u7684\u64cd\u4f5c\u7b26\uff0c\u5c31\u76f4\u63a5\u5c06\u64cd\u4f5c\u7b26\u5b58\u50a8\u5230\u5806\u6808\u4e2d\uff08push it\uff09\n\n\uff083\uff09\u5982\u679c\u8be5\u64cd\u4f5c\u7b26\u7684\u4f18\u5148\u7ea7\u4f4e\u4e8e\u5806\u6808\u51fa\u53e3\u7684\u64cd\u4f5c\u7b26\uff0c\u5c31\u5c06\u5806\u6808\u51fa\u53e3\u7684\u64cd\u4f5c\u7b26\u5bfc\u51fa\uff08pop it\uff09, \u76f4\u5230\u8be5\u64cd\u4f5c\u7b26\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u5806\u6808\u9876\u7aef\u7684\u64cd\u4f5c\u7b26\u3002\u5c06\u626b\u63cf\u5230\u7684\u64cd\u4f5c\u7b26\u5bfc\u5165\u5230\u5806\u6808\u4e2d\uff08push\uff09\u3002\n\n\n\u5982\u679c\u9047\u5230\u7684\u64cd\u4f5c\u7b26\u662f\u5de6\u62ec\u53f7\"\uff08\u201d\uff0c\u5c31\u76f4\u63a5\u5c06\u8be5\u64cd\u4f5c\u7b26\u8f93\u51fa\u5230\u5806\u6808\u5f53\u4e2d\u3002\n\n\u5982\u679c\u626b\u63cf\u5230\u7684\u64cd\u4f5c\u7b26\u662f\u53f3\u62ec\u53f7\u201c\uff09\u201d\uff0c\u5c06\u5806\u6808\u4e2d\u7684\u64cd\u4f5c\u7b26\u5bfc\u51fa\uff08pop\uff09\u5230\u961f\u5217\uff0c\u76f4\u5230\u9047\u89c1\u5de6\u62ec\u53f7\u201c\uff08\u201d\u3002\u5c06\u5806\u6808\u4e2d\u7684\u5de6\u62ec\u53f7\u79fb\u51fa\u5806\u6808\uff08pop \uff09\u3002\u7ee7\u7eed\u626b\u63cf\u4e0b\u4e00\u4e2a\u5b57\u7b26\u3002\n\n\u5982\u679c\u8f93\u5165\u7684\u4e2d\u7f00\u8868\u8fbe\u5f0f\u5df2\u7ecf\u626b\u63cf\u5b8c\u4e86\uff0c\u4f46\u662f\u5806\u6808\u4e2d\u4ecd\u7136\u5b58\u5728\u64cd\u4f5c\u7b26\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5e94\u8be5\u8bb2\u5806\u6808\u4e2d\u7684\u64cd\u4f5c\u7b26\u5bfc\u51fa\u5230\u961f\u5217\u5f53\u4e2d\u3002\n\n### 2.\u540e\u7f00\u8ba1\u7b97\n\n\u4ece\u5de6\u5411\u53f3\u626b\u63cf\uff0c\u9047\u5230\u6570\u5b57\u538b\u6808\uff0c\u9047\u5230\u64cd\u4f5c\u7b26\uff0c\u5f39\u51fa\u6808\u9876\u7684\u4e24\u4e2a\u5143\u7d20\uff0c\u5148\u5f39\u51fa\u7684\u5143\u7d20\u5728\u53f3\u8fb9\uff0c\u540e\u5f39\u51fa\u6765\u7684\u5728\u5de6\u8fb9\uff0c\u8fdb\u884c\u8ba1\u7b97\u540e\uff0c\u5c06\u7ed3\u679c\u538b\u6808\uff0c\u518d\u5f80\u540e\u626b\u63cf\uff0c\u76f4\u5230\u626b\u63cf\u7ed3\u675f\uff0c\u8f93\u51fa\u6808\u9876\u5143\u7d20\uff0c\u5373\u4e3a\u6700\u7ec8\u7ed3\u679c\u3002\n\n\n\n------------\n\u4ee5\u4e0a\u4e3a\u8ba1\u7b97\u7b97\u5f0f\u4e24\u6b65\u8d70\uff0c\u53ef\u4ee5\u8fdb\u884c\u4efb\u610f\u7efc\u5408\u7b97\u5f0f\u7684\u8ba1\u7b97\u3002\n\n\u7136\u800c\u6211\u8d70\u5b8c\u4e4b\u540e\u624d\u53d1\u73b0 `\u82e5\u51fa\u73b0\u5339\u914d\u7684\u62ec\u53f7\u5176\u4e2d\u4e00\u5b9a\u4e0d\u4f1a\u6709\u8ba1\u7b97\u64cd\u4f5c\uff0c\u4e5f\u4e0d\u5f71\u54cd\u8ba1\u7b97\u987a\u5e8f\u3002` \u8fd9\u53e5\u8bdd\uff0c\u8fd9\u6837\u5b50\u7684\u8bdd\u770b\u6765\u8fde\u4e24\u6b65\u8d70\u90fd\u4e0d\u9700\u8981\uff0c~~\u8fd9\u5c31\u542b\u6c34\u91cf\u592a\u591a\u4e86\u5427~~\u3002\n\n\u6211\u5199\u7684\u4ee3\u7801\u662f\u62ec\u53f7\u91cc\u6709\u8fd0\u7b97\u4e5f\u53ef\u4ee5\u8fdb\u884c\u7684\uff08\u4e5f\u53ef\u4ee5\u62ec\u53f7\u5d4c\u5957\uff09\uff0c\u540e\u6765\u61d2\u5f97\u6539\u4e86\u3002\n\n------------\n\n\u81f3\u4e8e\u9898\u76ee\u7684 Error \u5224\u65ad\uff0c\u786e\u5b9e\u6709\u4e0d\u5c11\u5751\u70b9\u3002\u4f46**\u5751\u70b9\u5e76\u4e0d\u662f\u9898\u76ee\u5f62\u6210\u7684\u4e3b\u4f53\u90e8\u5206**\uff0c\u6240\u4ee5\u6211\u5c31\u4e0d\u591a\u8bb2\u4e86\uff0c\u5927\u5bb6\u53ef\u4ee5\u4e0b\u8f7d\u6570\u636e\uff0c~~\u6bd5\u7adf\u6211\u4e5f\u662f\u8fd9\u4e48\u8fc7\u6765\u7684~~\u3002\n\n------------\n\n## \u6700\u540e\u770b\u4e00\u770b Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nstruct node {\n\tbool type;\n\tint n;\n\tchar c;\n};\nstack < char > st;\nstack < int > sta;\nqueue < node > q;\n\nint status(char c) {\n\tif (c == '+' || c == '-') return 1;\n\tif (c == '*' || c == '/') return 2;\n\treturn 3;\n}\n\nnamespace subtask {\n\tbool func(char c) {\n\t\tif (c == '+' || c == '-' || c == '*' || c == '/' || c == '()' || c == ')') return true;\n\t\treturn false;\n\t}\n\tbool func2(char c) {\n\t\tif (c == '+' || c == '-' || c == '*' || c == '/') return true;\n\t\treturn false;\n\t} \n\tbool error_1(string s) {\n\t\tfor (int i = 0; i < s.size(); i++)\n\t\t\tif (i != s.size() - 1 && s[i] == '/' && s[i + 1] == '0') return true;\n\t\treturn false;\n\t}\n\tbool error_2(string s) {\n\t\tint lft = 0, rgh = 0;\n\t\tfor (int i = 0; i < s.size(); i++) {\n\t\t\tchar c = s[i];\n\t\t\tif (c == '(') lft++;\n\t\t\tif (c == ')') rgh++;\n\t\t\tif (isalpha(c)) continue;\n\t\t\tif (!isdigit(c) && c != '+' && c != '-' && c != '*' && c != '/' && c != ')' && c != '(') return true;\n\t\t}\n\t\tif (lft != rgh) return true;\n\t\treturn false;\n\t}\n\tbool error_3(string s) {\n\t\tfor (int i = 0; i < s.size(); i++)\n\t\t\tif (isalpha(s[i])) return true;\n\t\treturn false;\n\t}\n\tbool error_4(string s) {\n\t\tif (s[0] != '(' && func(s[0])) return true;\n\t\tfor (int i = 0; i < s.size(); i++)\n\t\t\tif (i != s.size() - 1 && func2(s[i]) && func2(s[i + 1])) return true;\n\t\treturn false;\n\t}\n\tvoid solve(string s) {\n\t\tif (s[0] == '-') s.insert(0, \"0\");\n\t\tint x = 0, con = 0;\n\t\tfor (int i = 0; i < s.size(); ) {\n\t\t\tchar c = s[i];\n\t\t\twhile (isdigit(c) || c == '+' || c == '-' || c == '*' || c == '/' || c == '(' || c == ')') {\n\t\t\t\tif (c == '+' || c == '-' || c == '*' || c == '/' || c == '(') {\n\t\t\t\t\tif (st.empty()) st.push(c);\n\t\t\t\t\telse {\n\t\t\t\t\t\twhile (st.top() != '(' && status(c) <= status(st.top())) {\n\t\t\t\t\t\t\tq.push((node){0, 0, st.top()});\n\t\t\t\t\t\t\tst.pop();\n\t\t\t\t\t\t\tif (st.empty()) break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tst.push(c);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (c == ')') {\n\t\t\t\t\twhile (st.top() != '(') {\n\t\t\t\t\t\tq.push((node){0, 0, st.top()});\n\t\t\t\t\t\tst.pop();\n\t\t\t\t\t}\n\t\t\t\t\tst.pop();\n\t\t\t\t}\n\t\t\t\twhile (isdigit(c)) {\n\t\t\t\t\tcon = 1;\n\t\t\t\t\tx = x * 10 + c - '0';\n\t\t\t\t\tc = s[++i];\n\t\t\t\t}\n\t\t\t\tif (con) {\n\t\t\t\t\tq.push((node){1, x, ' '});\n\t\t\t\t\tcon = 0;\n\t\t\t\t\tx = 0;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tc = s[++i];\n\t\t\t}\n\t\t\twhile (!st.empty()) {\n\t\t\t\tq.push((node){0, 0, st.top()});\n\t\t\t\tst.pop();\n\t\t\t}\n\t\t\twhile (!q.empty()) {\n\t\t\t\tnode t = q.front();\n\t\t\t\tq.pop(); \n\t\t\t\tif (t.type) sta.push(t.n);\n\t\t\t\telse {\n\t\t\t\t\tint a = sta.top(), b;\n\t\t\t\t\tsta.pop();\n\t\t\t\t\tb = sta.top();\n\t\t\t\t\tsta.pop();\n\t\t\t\t\tif (t.c == '+') sta.push(a + b);\n\t\t\t\t\tif (t.c == '-') sta.push(b - a);\n\t\t\t\t\tif (t.c == '*') sta.push(a * b);\n\t\t\t\t\tif (t.c == '/') sta.push(b / a);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcout << s << '=' << sta.top();\n\t\t\tsta.pop();\n\t\t}\n\t} \n}\n\nint main()\n{\n\tstring s;\n\tcin >> s;\n\tif (subtask::error_1(s)) {\n\t\tputs(\"E1\");\n\t\treturn 0;\n\t}\n\tif (subtask::error_2(s)) {\n\t\tputs(\"E2\");\n\t\treturn 0;\n\t}\n\tif (subtask::error_3(s)) {\n\t\tputs(\"E3\");\n\t\treturn 0;\n\t}\n\tif (subtask::error_4(s)) {\n\t\tputs(\"E4\");\n\t\treturn 0;\n\t}\n\tsubtask::solve(s);\n\treturn 0;\n}\n```\n\n\u6700\u540e\u63a8\u8350\u4e00\u4e0b\u81ea\u5236\u7684\u8fd0\u7b97\u7a0b\u5e8f [ArithmeticUnit](https://www.luogu.com.cn/paste/6948psed)",
        "postTime": 1635654728,
        "uid": 351392,
        "name": "a1029",
        "ccfLevel": 0,
        "title": "P2718 \u7b80\u5355\u7684\u8868\u8fbe\u5f0f"
    },
    {
        "content": "## \u849f\u84bb\u7684\u7b2c\u4e8c\u7bc7\u9898\u89e3\n\n## \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6570\u5b66\u8868\u8fbe\u5f0f\uff0c\u8fdb\u884c\u8ba1\u7b97\u3002\n\n\u7531\u9898\u610f\u53ef\u77e5\uff1a\n\n1. \u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\u4e0d\u80fd\u9664\u4ee5 $\\text{0}$ \u3002\n\n1. \u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\u4e0d\u80fd\u542b\u6709\u9664 $\\text{+}$ \u3001$\\text{-}$ \u3001$\\text{/}$ \u3001$\\times$ \u3001$\\text{(}$ \u3001$\\text{)}$  \u4ee5\u5916\u7684\u4efb\u4f55\u975e\u6570\u5b57\u5b57\u7b26\u3002\n\n1. \u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\u7684\u62ec\u53f7\u5fc5\u987b\u662f\u76f8\u5bf9\u5e94\u7684\u3002\n\n1. \u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\u4e0d\u80fd\u51fa\u73b0\u591a\u4f59\u7684\u8fd0\u7b97\u7b26\u3002\n\n1. \u8f93\u51fa\u9519\u8bef\u65f6\uff0c\u8f93\u51fa\u9760\u524d\u7684\u9519\u8bef\u5e8f\u53f7\u3002\n\n## \u89e3\u51b3\n\n\u7ecf\u8fc7\u4e0a\u9762\u7684\u5206\u6790\uff0c\u6211\u4eec\u5df2\u7ecf\u6e05\u695a\u4e86\u8fd9\u9053\u9898\u7684\u6ce8\u610f\u4e8b\u9879\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c31\u6765\u89e3\u51b3\u95ee\u9898\u3002\n\n\u9996\u5148\uff0c\u770b\u5230\u9898\u76ee\uff0c\u5f88\u660e\u663e\u662f\u4e00\u9053\u5b57\u7b26\u4e32\u6a21\u62df\u9898\uff0c\u9700\u8981\u6211\u4eec\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u5904\u7406\u3002\n### \u6570\u5b66\u8868\u8fbe\u5f0f\u7684\u5904\u7406\n\u56e0\u4e3a\u662f\u6570\u5b66\u8868\u8fbe\u5f0f\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u7528\u6808\u6765\u7ef4\u62a4\u3002\n\n\u6211\u4eec\u5c06\u6570\u5b66\u7b26\u53f7\u5b58\u5728\u4e00\u4e2a\u6808\u4e2d\uff0c\u5c06\u6570\u5b57\u5b58\u5728\u53e6\u4e00\u4e2a\u6808\u4e2d\uff0c\u9010\u4e2a\u5bf9\u4ed6\u4eec\u8fdb\u884c\u5904\u7406\u3002\n\n\u5f53\u6570\u5b66\u7b26\u53f7\u4e3a**\u62ec\u53f7**\u65f6\uff0c\u7531\u9898\u610f\u53ef\u77e5\uff0c\u62ec\u53f7\u4e0d\u5f71\u54cd\u8fd0\u7b97\u987a\u5e8f\uff0c\u6240\u4ee5\u4e0d\u7528\u5165\u6808\uff0c\u76f4\u63a5\u8bb0\u5f55\u662f\u5426\u914d\u5957\u5373\u53ef\u3002\n\n\u5728\u8fd9\u91cc\uff0c\u6211\u7528\u4e00\u4e2a\u53d8\u91cf $\\text{iskh}$ \u8bb0\u5f55\u6765\u3002\u6bcf\u5f53\u51fa\u73b0\u5de6\u62ec\u53f7\uff0c$\\text{iskh+1}$\uff1b\u6bcf\u5f53\u51fa\u73b0\u53f3\u62ec\u53f7\uff0c$\\text{iskh-1}$\u3002\n\n\u5f53\u6570\u5b66\u7b26\u53f7\u4e3a**\u4e58\u6216\u9664**\u65f6\uff0c\u6211\u4eec\u5148\u5165\u6808\uff0c\u7136\u540e\u7b49\u5b58\u8fdb\u4e0b\u4e00\u4e2a\u6570\u5b57\u540e\uff0c\u53d6\u51fa\u6570\u5b57\u6808\u9876\u4e24\u4e2a\u5143\u7d20\uff0c\u76f4\u63a5\u8fdb\u884c\u8fd0\u7b97\uff0c\u5c06\u5f97\u5230\u7684\u7ed3\u679c\u518d\u6b21\u5b58\u5165\u6808\u4e2d\uff0c\u5e76\u628a\u6570\u5b66\u7b26\u53f7\u6808\u9876\u5143\u7d20\u5220\u9664\uff08\u5373 $\\times $ \u6216$\\text{/}$\uff09\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u6700\u7ec8\u7684\u8fd0\u7b97\u5c31\u53ea\u5269\u4e0b\u4e86\u52a0\u51cf\u6cd5\u3002\n\n\u5f53\u6570\u5b66\u7b26\u53f7\u4e3a**\u52a0\u6216\u51cf**\u65f6\uff0c\u76f4\u63a5\u5165\u6808\uff0c\u6700\u540e\u5904\u7406\u5373\u53ef\u3002\n\n\n### \u6570\u5b66\u8868\u8fbe\u5f0f\u5408\u6cd5\u7684\u5224\u65ad\n\n\u56e0\u4e3a\u8f93\u51fa\u9519\u8bef\u65f6\u8981\u8f93\u51fa**\u5e8f\u53f7\u8f83\u5c0f\u7684**\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5b58\u4e0b\u5b83\u9519\u8bef\u7684\u5e8f\u53f7\u6700\u5c0f\u503c\uff0c\u6211\u7528 $\\text{verg}$ \u6765\u5b58\u50a8\u3002\n\n\u5f53\u6570\u5b66\u7b26\u53f7\u4e3a\u9664\uff0c\u4e14\u9664\u6570\u4e3a $\\text{0}$ \u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8f93\u51fa $\\text{\u201cE1\u201d}$\u3002\uff08\u5f88\u663e\u7136\uff0c\u6ca1\u6709\u5e8f\u53f7\u6bd4\u8be5\u9519\u8bef\u7684\u5e8f\u53f7\u66f4\u5c0f\u4e86\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u8f93\u51fa\uff09\n\n\u5982\u679c\u51fa\u73b0\u975e\u8fd0\u7b97\u7b26\uff0c\u6216\u62ec\u53f7\u4e0d\u5339\u914d\uff0c\u5c06\u9519\u8bef\u5e8f\u53f7\u5b58\u4e3a$\\min(2,verg)$\n\n\u5982\u679c\u51fa\u73b0\u5b57\u6bcd\uff0c\u90a3\u4e48\u5c06\u9519\u8bef\u5e8f\u53f7\u5b58\u4e3a $\\min(3,verg)$\u3002\n\n\u5173\u4e8e\u591a\u4f59\u8fd0\u7b97\u7b26\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u53d8\u91cf\u5b58\u50a8\u4e00\u4e2a\u72b6\u6001\uff0c\u4ee5\u6b64\u6765\u5224\u65ad\u5f53\u524d\u51fa\u73b0\u7684\u6570\u5b66\u7b26\u53f7\u662f\u5426\u591a\u4f59\u3002\u6b64\u5916\u6ce8\u610f\uff0c**\u62ec\u53f7\u662f\u4e0d\u4f1a\u5f71\u54cd\u5f53\u524d\u5b57\u7b26\u662f\u5426\u591a\u4f59\u7684**\u3002\u5f53\u68c0\u6d4b\u5230\u5f53\u524d\u5b57\u7b26\u4e3a\u6570\u5b57\u8fd0\u7b97\u7b26\uff0c\u4e14\u5df2\u7ecf\u8fde\u7eed\u51fa\u73b0\u8fc7\u8fd0\u7b97\u7b26\u4e86\uff0c\u90a3\u4e48\u5c06\u9519\u8bef\u5e8f\u53f7\u5b58\u4e3a $\\min(4,verg)$\u3002\n\n\u8f93\u51fa\u65f6\uff0c\u5982\u679c $\\text{verg}$ \u53d1\u751f\u4e86\u6539\u53d8\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8f93\u51fa\u9519\u8bef\u5e8f\u53f7\uff0c\u5426\u5219\u6839\u636e\u6570\u5b57\u6808\u4e2d\u7684\u5269\u4f59\u5143\u7d20\u4e0e\u6570\u5b66\u7b26\u53f7\u6808\u4e2d\u7684\u5143\u7d20\u8fdb\u884c\u8ba1\u7b97\u3002\n## \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstring s;\nint l;\n//\u6570\u5b57\u6808\nint nb[101];\n//\u6570\u5b66\u7b26\u53f7\u6808\nchar cr[101];\n//\u6808\u9876\u6307\u9488\nint fln=0,flc=0;\nint num=0\uff0ciskh=0,verg =5;\nbool ischar=false;\nint main(){\n    cin >> s;\n    l=s.length();\n    for(int i=0;i<l;i++){\n    \t//\u5b58\u6570\n        if(s[i]>='0' && s[i]<='9'){\n            num *= 10;\n            num += s[i]-'0';\n            ischar = true;\n        }\n        //\u5b58\u50a8\u62ec\u53f7\u662f\u5426\u5339\u914d\n        else if(s[i] == '('){\n                iskh++;\n        }\n        else if(s[i] == ')'){\n                iskh--;\n        }\n        else {\n        nb[++fln]=num;\n        num=0;\n        //\u53d6\u51fa\u6570\u5b57\u6808\u9876\u4e24\u5143\u7d20\uff0c\u8fdb\u884c\u8ba1\u7b97\n        if(cr[flc] == '*'){\n            nb[fln-1]=nb[fln]*nb[fln-1];\n            fln--;\n            flc--;\n        }\n        if(cr[flc] == '/'){\n        \t//\u5224\u65ad\u662f\u5426\u53d1\u751f\u9519\u8bef1\n            if(nb[fln]==0){\n                cout << \"E1\";\n                return 0;\n            }\n            nb[fln-1]=nb[fln-1]/nb[fln];\n            fln--;\n            flc--;\n        }\n        //\u5b58\u6570\u5b66\u7b26\u53f7\n           if((s[i] == '*' || s[i] == '/' || s[i] == '+' || s[i] == '-') && s[i] != '(' && s[i] != ')'){\n                cr[++flc]=s[i];\n            }\n            //\u5224\u65ad\u662f\u5426\u53d1\u751f\u9519\u8bef2\n            else if( s[i]<'A' ||s[i]>'Z'&&s[i]<'a' || s[i]>'z'){\n            \tverg=min(2,verg);\n            \tcontinue;\n            }\n            //\u5224\u65ad\u662f\u5426\u53d1\u751f\u9519\u8bef3\n            else if(s[i]>='a' && s[i]<='z' || s[i]>='A' && s[i]<='Z'){\n            \tverg=min(3,verg);\n            \tcontinue;\n            }\n            //\u5224\u65ad\u662f\u5426\u53d1\u751f\u9519\u8bef4\n            if(!ischar){\n            verg=min(4,verg);\n            continue;\n            }\n            //\u8bb0\u5f55\u5df2\u7ecf\u51fa\u73b0\u4e00\u6b21\u8fd0\u7b97\u7b26\n            if(s[i] != '(' && s[i]!=')')ischar = false;\n        }\n    }\n    //\u8fd9\u4e00\u6bb5\u662f\u56e0\u4e3a\u6700\u540e\u4e00\u4e2anum\u65e0\u6cd5\u76f4\u63a5\u88ab\u5904\u7406\uff0c\u6240\u4ee5\u5728for\u5916\u5904\u7406\n    nb[++fln]=num;\n    if(cr[flc] == '*'){\n    \tnb[fln-1]=nb[fln]*nb[fln-1];\n    \tfln--;\n    \tflc--;\n    }\n    if(cr[flc] == '/'){\n    \tif(nb[fln]==0){\n        \tcout << \"E1\";\n        \treturn 0;\n    \t}\n    \tnb[fln-1]=nb[fln-1]/nb[fln];\n    \tfln--;\n    \tflc--;\n    }\n    //\u5224\u65ad\u662f\u5426\u62ec\u53f7\u4e0d\u5339\u914d\n    if(iskh != 0){\n        verg = min(2,verg);\n    }\n    int ans=nb[1];\n    //\u5224\u65ad\u662f\u5426\u53d1\u751f\u9519\u8bef\u5e76\u8f93\u51fa\n    if(verg != 5){\n    \tcout << 'E' << verg;\n    \treturn 0;\n    }\n    for(int i=1;i<fln;i++){\n        if(cr[i]=='+')ans+=nb[i+1];\n        if(cr[i]=='-')ans-=nb[i+1];\n    }\n    cout << s << '=' << ans;\n return 0;   \n}\n\n```\n",
        "postTime": 1616772583,
        "uid": 195388,
        "name": "alvis",
        "ccfLevel": 5,
        "title": "P2718 \u7b80\u5355\u7684\u8868\u8fbe\u5f0f \u9898\u89e3"
    },
    {
        "content": "### \u8868\u8fbe\u5f0f\u7684\u5b9a\u4e49\n```\n\u8868\u8fbe\u5f0f->\u9879->\n    \u028c   |\n    |   v\n    -- +\u6216-\n```\n### \u9879\u7684\u5b9a\u4e49\n```\n  \u9879->\u56e0\u5b50->\n    \u028c   |\n    |   v\n    -- *\u6216/\n```\n### \u56e0\u5b50\u7684\u5b9a\u4e49\n```\n\u56e0\u5b50----->\u6574\u6570----->\n    |           |\n    ->(->\u8868\u8fbe\u5f0f->)\n```\n##### \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include<iostream>\nusing namespace std;\nint start=0;\nint bds();\nstring s;\nbool ysf(char a){\n\tif(a=='+'||a=='-'||a=='*'||a=='/'){\n\t\treturn true;\n\t}\n\treturn false;\n}\nint yz(){\n\tint ans=0;\n\tchar in=s[start];\n\tif(in=='('){\n\t\tstart++;\n\t\tans=bds();\n\t\tstart++;\n\t}else{\n\t\twhile(isdigit(in)){\n\t\t\tans=ans*10+(in-'0');\n\t\t\tstart++;\n\t\t\tin=s[start];\n\t\t}\n\t}\n\treturn ans;\n}\nint xiang(){\n\tint ans=yz(),ans2;\n\tbool jx=true;\n\twhile(jx){\n\t\tchar in=s[start];\n\t\tif(in=='*'||in=='/'){\n\t\t\tstart++;\n\t\t\tans2=yz();\n\t\t\tif(in=='*'){\n\t\t\t\tans*=ans2;\n\t\t\t}else{\n\t\t\t\tans/=ans2;\n\t\t\t}\n\t\t}else{\n\t\t\tjx=false;\n\t\t}\n\t}\n\treturn ans;\n}\nint bds(){\n\tint ans=xiang(),ans2;\n\tbool jx=true;\n\twhile(jx){\n\t\tchar in=s[start];\n\t\tif(in=='+'||in=='-'){\n\t\t\tstart++;\n\t\t\tans2=xiang();\n\t\t\tif(in=='+'){\n\t\t\t\tans+=ans2;\n\t\t\t}else{\n\t\t\t\tans-=ans2;\n\t\t\t}\n\t\t}else{\n\t\t\tjx=false;\n\t\t}\n\t}\n\treturn ans;\n}\nint main(){\n\tint wrong=10,kuo=0,size;\n\tcin>>s;\n\tsize=s.size();\n\tif(ysf(s[0])){\n\t\twrong=4;\n\t} \n\tfor(int i=0;i<size;i++){\n\t\tif(s[i]=='/'&&s[i+1]=='0'){\n\t\t\tcout<<\"E1\";\n\t\t\treturn 0;\n\t\t}\n\t\tif(isalpha(s[i])){\n\t\t\tif(wrong>3){\n\t\t\t\twrong=3;\n\t\t\t}\n\t\t}else if(!ysf(s[i])&&!isdigit(s[i])&&s[i]!='('&&s[i]!=')'){\n\t\t\twrong=2;\n\t\t}\n\t\tif(ysf(s[i])&&ysf(s[i+1])){\n\t\t\tif(wrong>4){\n\t\t\t\twrong=4;\n\t\t\t}\n\t\t}\n\t\tif(s[i]=='('){\n\t\t\tkuo++;\n\t\t}\n\t\tif(s[i]==')'){\n\t\t\tkuo--;\n\t\t}\n\t\tif(kuo<0){\n\t\t\twrong=2;\n\t\t}\n\t}\n\tif(kuo!=0){\n\t\tcout<<\"E2\";\n\t\treturn 0;\n\t}\n\tif(wrong!=10){\n\t\tcout<<\"E\"<<wrong;\n\t\treturn 0;\n\t}\n\tcout<<s<<\"=\"<<bds();\n\treturn 0;\n}\n```",
        "postTime": 1537080018,
        "uid": 87799,
        "name": "xh39",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2718 \u3010\u7b80\u5355\u7684\u8868\u8fbe\u5f0f\u3011"
    },
    {
        "content": "\u5176\u5b9e\u6211\u90fd\u4e0d\u61c2\u6211\u5199\u4e86\u4ec0\u4e48..\n\n\u6211\u5bf9\u9519\u8bef\u7684\u7406\u89e3\u662f\u9760\u524d\u7684\u9519\u8bef\u6307\u7684\u662f\u7f16\u53f7\u5c0f\u7684\u9519\u8bef\n\n```cpp\nvar\n  a,x:string;\n  b:array[1..50] of longint;//\u50a8\u5b58\u8fd0\u7b97\u7b26\u548c\u8fd0\u7b97\u6570\n  c:array[1..50] of char;\n  x1,x2,x3:set of char;\n  i,e,s,kh,n,z1,z2,j,t,k:longint;// \u4e71\u4e03\u516b\u7cdf\u7684\u53d8\u91cf\nbegin\n  x1:=['+','-','*','/'];\n  x2:=['0'..'9'];\n  x3:=['a'..'z','A'..'Z'];//\u4f7f\u7528\u8bb0\u5f55\u65b9\u4fbf\u5224\u65ad\n  readln(a);\n  x:=a; kh:=0;//\u590d\u5236\u4e00\u4efdA\n  if pos('/0',a)<>0 then\n    if (a[pos('/0',a)+2]>'9')or(a[pos('/0',a)+2]<'1') then e:=1;//\u53d1\u73b0\u4efb\u4f55\u96640\u5c31\u6807\u8bb0\u4ea7\u751f\u9519\u8bef1\n  n:=length(a);\n  for i:=1 to n do\n    begin\n      if a[i] in x1 then inc(s)\n      else s:=0;\n      if (s>=2)and(e=0) then e:=4;//\u7edf\u8ba1\u8fd0\u7b97\u7b26\uff0c\u5982\u679c\u51fa\u73b0\u8fde\u7eed\u4e24\u4e2a\u8fd0\u7b97\u7b26\u800c\u4e14\u6ca1\u6709\u7f16\u53f71.2.3\u7684\u9519\u8bef\u51fa\u73b0\u5c31\u6807\u8bb0\u9519\u8bef4\n      if a[i]='(' then inc(kh);\n      if a[i]=')' then dec(kh);//\u7edf\u8ba1\u62ec\u53f7\n      if (not((a[i]in x1)or(a[i] in x2)or(a[i] in x3)or(a[i]='(')or(a[i]=')')))and(e<>1) then e:=2;//\u51fa\u73b0\u5947\u602a\u7684\u4e1c\u897f\u4e14\u6ca1\u6709\u7f16\u53f71\u7684\u9519\u8bef\u5c31\u6807\u8bb0\u9519\u8bef2\n      if (a[i] in x3)and(e<>1)and(e<>2) then e:=3;//\u51fa\u73b0\u5b57\u6bcd\u4e14\u6ca1\u6709\u7f16\u53f71.2\u7684\u9519\u8bef\u5c31\u6807\u8bb0\u9519\u8bef3\n    end;\n  if ((a[1]='/')or(a[1]='*')or(a[n] in x1))and(e=0) then e:=4;//\u9996\u4f4d\u51fa\u73b0\u4e58\u9664\u8fd0\u7b97\u6216\u672b\u4f4d\u51fa\u73b0\u8fd0\u7b97\u7b26\u4e14\u6ca1\u6709\u6807\u8bb0\u9519\u8bef4\n  if (a[1]='+')or(a[1]='-') then a:='0'+a;//\u4e3a\u4e86\u65b9\u4fbf\u7edf\u8ba1\uff0c\u5982\u9996\u4f4d\u6709\u524d\u5bfc\u52a0\u51cf\u5219\u589e\u52a0\u4e00\u4e2a\u8fd0\u7b97\u6570\n  if (kh<>0)and(e<>1) then e:=2;\n  if e<>0 then\n    begin\n      writeln('E',e);\n      halt;\n    end;//\u5047\u5982\u6709\u4efb\u4f55\u9519\u8bef\u53d1\u751f\u8f93\u51fa\u540e\u7ed3\u675f\u6574\u4e2a\u7a0b\u5e8f\n  z1:=1;  z2:=0;  a:=a+'X';\n  for i:=1 to n do\n    begin\n      if (a[i] in x2) then\n        if a[i+1] in x2 then b[z1]:=(b[z1]+ord(a[i])-ord('0'))*10//\u5982\u679c\u8fd9\u4e2a\u6570\u5b57\u540e\u9762\u8fd8\u662f\u6570\u5b57\u5219\u5904\u7406\n        else\n          begin\n            b[z1]:=b[z1]+ord(a[i])-ord('0');//\u540e\u9762\u6ca1\u6709\u4e86\u6570\u5b57\u4e86\u5c31\u76f4\u63a5\u52a0\u4e0a\u53bb\n            inc(z1);//\u7edf\u8ba1\u8fd0\u7b97\u6570\u4e2a\u6570\n          end;\n      if a[i] in x1 then\n        begin\n          inc(z2);\n          c[z2]:=a[i];//\u7edf\u8ba1\u8fd0\u7b97\u7b26\n        end;\n    end;\n  dec(z1);  i:=1;//\u53bb\u9664\u591a\u52a0\u7684\u8fd0\u7b97\u6570\u4e2a\u6570\n  while i<=z2 do//\u540e\u9762\u5220\u9664\u4e86\u8fd0\u7b97\u6570\uff0c\u4e0d\u80fd\u7528for\u5faa\u73af\n    begin\n      if c[i]='/' then//\u9664\u6cd5\n        begin\n          b[i]:=b[i] div b[i+1];\n          for j:=i+1 to z1 do b[j]:=b[j+1];//\u5220\u9664\u9664\u6570\n          dec(z1);\n          for j:=i to z2-1 do c[j]:=c[j+1];//\u5220\u9664\u9664\u6cd5\u7b26\u53f7\n          dec(z2);\n        end;\n      if c[i]='*' then//\u4e58\u6cd5\uff0c\u5927\u4f53\u540c\u4e0a\n        begin\n          b[i]:=b[i]*b[i+1];\n          for j:=i+1 to z1 do b[j]:=b[j+1];\n          dec(z1);\n          for j:=i to z2 do c[j]:=c[j+1];\n          dec(z2);\n        end;\n      if (c[i]='-')or(c[i]='+') then inc(i);//\u52a0\u51cf\u4e0d\u9e1f\u4ed6\n    end;\n  t:=b[1];//\u8fdb\u884c\u52a0\u51cf\u8fd0\u7b97\uff0c\u9996\u5148\u53d6\u51fa\u7b2c\u4e00\u4e2a\u6570\n  for i:=1 to z2 do\n    begin\n      if c[i]='+' then t:=t+b[i+1];\n      if c[i]='-' then t:=t-b[i+1];//\u8fd0\u7b97\n    end;\n  writeln(x,'=',t);//\u8f93\u51fa\nend//\u5176\u5b9e\u8fd9\u9053\u9898\u8bf4\u7684\u4e0d\u662f\u975e\u5e38\u6e05\u695a\n```",
        "postTime": 1485875458,
        "uid": 18301,
        "name": "owogon",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2718 \u3010\u7b80\u5355\u7684\u8868\u8fbe\u5f0f\u3011"
    },
    {
        "content": "# P2718\n\n\n\u63d0\u4f9b\u4e24\u4e2a\u601d\u8def\u5c0f\u5c0f\u4f18\u5316\u4ee3\u7801\u590d\u6742\u5ea6\u3002\n\n1.  \u5bf9\u4e8e\u9519\u8bef\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a $check$ \u6570\u7ec4 , \u5728\u5224\u65ad\u4f18\u5148\u7ea7\u65f6\u76f4\u63a5\u5faa\u73af\u5224\u65ad\u4e00\u8fb9\u5373\u53ef\u3002\n\n2.  \u5bf9\u4e8e\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a $map$  , \u53ef\u4ee5\u76f4\u63a5\u5224\u65ad\u662f\u5426\u4e3a\u8fd0\u7b97\u7b26\u53ca\u5b83\u7684\u4f18\u5148\u7ea7\u3002\n\n\u53e6\u5916 $E2$ \u4e2d\u7684\u9519\u8bef\u4e0d\u5305\u542b\u5b57\u6bcd, \u5199\u6761\u4ef6\u5224\u65ad\u9700\u8981\u533a\u5206\u3002\n\n\u5bf9\u4e8e\u8868\u8fbe\u5f0f\u8fd0\u7b97 , \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e24\u4e2a\u6808\u5206\u522b\u50a8\u5b58\u6570\u5b57\u4e0e\u8fd0\u7b97\u7b26,\u6211\u4eec\u8981\u4fdd\u8bc1\u8fd0\u7b97\u7b26\u6808\u5185\u7684\u5355\u8c03\u6027,\u5373\u5728\u6808\u5185\u6709\u9ad8\u4f18\u5148\u7ea7\u8fd0\u7b97\u7b26\u65f6\u78b0\u5230\u4f4e\u4f18\u5148\u7ea7\u8fd0\u7b97\u7b26\u65f6\u6211\u4eec\u8981\u5148\u8fdb\u884c\u8fd0\u7b97\u3002\n\n\u5bf9\u4e8e\u62ec\u53f7,\u9047\u5230\u5de6\u62ec\u53f7\u65f6\u5b58\u5165\u6808\u4e2d,\u9047\u5230\u53f3\u62ec\u53f7\u65f6\u5219\u4e0d\u65ad\u8fd0\u7b97\u76f4\u5230\u4ece\u8fd0\u7b97\u7b26\u6808\u4e2d\u53d6\u51fa\u5de6\u62ec\u53f7\u3002\n\n\u5728\u8fd0\u7b97\u65f6\u8981\u6ce8\u610f\u6808\u662f\u5426\u4e3a\u7a7a\u3002\n\n\u4ee3\u7801:\n\n```c++\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <stack>\n#include <unordered_map>\n\n#define re register\n\nusing namespace std;\n\nunordered_map <char, int> m = {{'+', 1}, {'-', 1}, {'*', 2}, {'/', 2}};\nstack <int> num;\nstack <char> oper;\n\nchar c[10005];\n\ninline bool ifop(char a) {\n  if (m[a] > 0 || isdigit(a) || a == '(' || a == ')') return true;\n  return false;\n}\n\ninline bool ifabc(char a) {\n  if ((a >= 'a' && a <= 'z') || (a >= 'A' && a <= 'Z')) return true;\n  return false;\n}\n\ninline int judge(char c[]) {\n  bool check[5] = {0, 0, 0, 0, 0};\n  re int l = 0, r = 0;\n  re int len = strlen(c);\n  for (re int i = 0; i < len; ++ i) {\n    if (c[i - 1] == '/' && c[i] == '0') check[1] = true;\n    if (ifabc(c[i])) check[3] = true;\n    if (!ifop(c[i]) && !ifabc(c[i])) check[2] = true;\n    if (c[i] == '(') ++ l;\n    if (c[i] == ')') ++ r;\n    if (m[c[0]] > 0 || (m[c[i]] > 0 && m[c[i - 1]] > 0) ) check[4] = true;\n  }\n  if (l != r) check[2] = true;\n  for (re int i = 1; i <= 4; ++ i) \n    if (check[i] == true)\n      return i;\n  return 0;\n}\n\ninline void eval() {\n  re int a = num.top();\n  num.pop();\n  re int b = num.top();\n  num.pop();\n  char op = oper.top();\n  oper.pop();\n  int c = 0;\n  if(op == '+') c = b + a;\n  if(op == '-') c = b - a;\n  if(op == ' *') c = b*  a;\n  if(op == '/') c = b / a;\n  num.push(c);\n}\n\nint main() {\n  scanf(\"%s\", c);\n  int len = strlen(c);\n  int fl = judge(c);\n  if (fl) {\n    printf(\"%dE\\n\",fl);\n    return 0;\n  }\n  for (re int i = 0; i < len; ++ i) {\n    if (isdigit(c[i])) {\n      if (!num.empty() && isdigit(c[i - 1])) {\n        int a = num.top()*  10;\n        num.pop();\n        num.push(a + (c[i] - '0'));\n      } else num.push(c[i] - '0');\n    } else {\n      if (c[i] == '(') oper.push(c[i]);\n      else if (c[i] == ')') {\n        while (oper.top() != '(') eval();\n        oper.pop();\n      } else {\n        while (num.size() > 1 && m[oper.top()] >= m[c[i]]) eval();\n        oper.push(c[i]);\n      }\n    }\n  }\n  while (num.size() > 1) eval();\n  printf(\"%s=\", c);\n  printf(\"%d\\n\", num.top());\n  return 0;\n}\n```\n",
        "postTime": 1656915635,
        "uid": 418670,
        "name": "baoziwu2",
        "ccfLevel": 4,
        "title": "P2718"
    },
    {
        "content": "\n$2021/4/1$ \u4f18\u5316\u7f29\u51cf\u4ee3\u7801\uff0c\u76f4\u63a5\u5220\u9664\u4e00\u4e2a\u51fd\u6570\u3002\n\n$2021/5/25$ \u5bf9\u8fdc\u53e4\u9898\u89e3\u8fdb\u884c\u66f4\u597d\u7684\u6392\u7248\u5e76\u4f7f\u7528\u66f4\u4e25\u8c28\u7684\u8868\u8ff0~~\u518d\u5220\u9664\u4e00\u4e9b\u4e0d\u53cb\u597d\u7684\u8bed\u8a00~~\u3002\n\n$2021/7/30$ \u4fee\u590d\u4e86\u4e00\u4e2a\u4e0d\u4e3a\u4eba\u77e5\u7684\u95ee\u9898\u3002\n\n------------\n\n\u8fd9\u9053\u9898\u561b\u3002\u3002\u3002\n\u7531\u4e8e\u6b63\u5728\u5b66\u6808\uff0c\u4e2d\u7f00\u8f6c\u540e\u7f00\u7136\u540e\u8ba1\u7b97\u5f0f\u5b50\u7684\u503c\uff0c\u5c31\u7528\u8fd9\u79cd\u65b9\u6cd5\u5199\u7684\u3002\n\n[See-\u540e\u7f00\u8868\u8fbe\u5f0f](https://www.luogu.com.cn/problem/P1449)  \n[See-\u8868\u8fbe\u5f0f\u6c42\u503c](https://www.luogu.com.cn/problem/P1981)\n  \n\u5982\u679c\u6709\u4e0d\u4e86\u89e3\u7684\uff0c\u53ef\u4ee5\u5148\u770b\u770b\u4e0a\u9762\u4e24\u9053\u9898\u3002\n \n\u8fd9\u91cc\u9644\u4e00\u4e0b\u524d\u4e24\u9053\u7684\u601d\u8def\uff0c~~\u5c31\u4e0d\u7c98\u4ee3\u7801\u4e86~~\u3002  \n \n### **\u540e\u7f00\u8868\u8fbe\u5f0f\u6c42\u503c**\n\u5bf9\u4e8e\u540e\u7f00\u8868\u8fbe\u5f0f\uff0c\u62ff\u4e00\u4e2a $\\texttt{int}$ \u578b\u7684\u6808\u3002\n- \u5f53\u5f0f\u5b50\u4e2d**\u51fa\u73b0\u4e00\u4e2a\u6570**\uff0c\u538b\u5165\u6808\u4e2d\u3002\n- \u51fa\u73b0\u4e00\u4e2a\u8fd0\u7b97\u7b26\u53f7\u65f6\uff0c\u4ece**\u6808\u9876\u5f39\u51fa\u4e24\u4e2a\u5143\u7d20**\uff0c\u628a\u5b83\u4eec\u8fdb\u884c\u8ba1\u7b97\u540e**\u5c06\u7ed3\u679c\u538b\u5165\u6808\u4e2d**\u3002\u6700\u540e\u6808\u4e2d\u53ea\u4f1a\u6709\u4e00\u4e2a\u5143\u7d20\uff0c\u5373\u7b54\u6848\u3002\n  \n\u5047\u8bbe\u6808\u9876\u662f $x$\uff0c\u6808\u9876\u5f39\u51fa\u540e\u7684\u6808\u9876\u4e3a $y$\uff0c\u8fd0\u7b97\u65f6\u5c31\u662f\u7528 $y$ \u53bb\u52a0\u51cf\u4e58\u9664 $x$\u3002  \n  \n\u4e0d\u8fc7\u5b9e\u9645\u4e0a\u8fd9\u5bf9\u540e\u7f00\u8868\u8fbe\u5f0f\u90a3\u9053\u9898\u800c\u8a00\u65e0\u6240\u8c13\uff0c\u56e0\u4e3a\u5b83\u53ea\u6709\u52a0\u548c\u4e58\uff0c\u4f46\u5bf9\u8fd9\u9053\u9898\u800c\u8a00\u7684\u51cf\u548c\u9664\u662f\u5f88\u91cd\u8981\u7684\u3002\n  \n\u4ec0\u4e48\uff1f\u4f60\u60f3\u95ee\u6709\u62ec\u53f7\u600e\u4e48\u529e\uff1f\u540e\u7f00\u8868\u8fbe\u5f0f\u91cc\u4f1a\u6709\u62ec\u53f7\u561b\u3002\n\n### **\u4e2d\u7f00\u8868\u8fbe\u5f0f\u8f6c\u540e\u7f00**\n\n\u8fd8\u662f\u62ff\u6765\u4e00\u4e2a\u6808\u3002  \n\n\u8fd9\u4e2a\u6808\u6765\u5b58**\u8fd0\u7b97\u7b26**\u3002\u904d\u5386\u5b57\u7b26\u4e32\u3002\n- \u9047\u5230\u6570\u76f4\u63a5\u8f93\u51fa\u3002\n- \u9047\u5230\u8fd0\u7b97\u7b26\u65f6(\u62ec\u53f7\u4e0d\u7b97),\u4e0e\u6b64\u65f6\u6808\u9876\u7684\u8fd0\u7b97\u7b26\u6bd4\u8f83\uff0c\u5982\u679c\u73b0\u5728\u7684\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7**\u5c0f\u4e8e\u7b49\u4e8e**\u6808\u9876\u7684\uff0c\u5219\u5f39\u51fa\u6808\u9876\u8fd0\u7b97\u7b26\u5e76\u8f93\u51fa\uff0c\u76f4\u5230\u5f53\u524d\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u6808\u9876\u8fd0\u7b97\u7b26\u6216\u6808\u7a7a\uff0c\u968f\u540e**\u538b\u5165\u5f53\u524d\u8fd0\u7b97\u7b26**\u3002\n\n\u6211\u4eec\u79f0 `+ -` \u7684\u4f18\u5148\u7ea7\u6bd4 `* / %` \u5c0f\u3002\n\n \u5982\uff1a\u73b0\u5728\u6808\u91cc\u5143\u7d20\u4e3a `+ *`\uff0c\u6b64\u65f6\u9047\u5230 `-` \u5219\u8981\u628a\u6808\u5f39\u7a7a\u5e76\u8f93\u51fa\uff0c\u7136\u540e\u538b\u5165\u51cf\u53f7\u3002\n  \n\u8bf6\uff0c**\u9047\u5230\u62ec\u53f7\u600e\u4e48\u529e\uff1f**\n \n  \n\u9047\u5230**\u5de6\u62ec\u53f7**\uff0c\u538b\u5165\u6808\uff0c\u51fa\u73b0\u53f3\u62ec\u53f7\u65f6\uff0c\u4ece**\u6808\u9876\u4e00\u76f4\u5f39\u5230\u5de6\u62ec\u53f7\u51fa\u73b0**\u5e76\u8f93\u51fa\uff0c\u5f39\u51fa\u5de6\u62ec\u53f7\u4f46**\u4e0d\u8f93\u51fa**\u3002\n  \n\n\u547c~  \n\n\u56de\u5230\u8fd9\u9053\u9898\uff0c\u9996\u5148\u5224\u65ad\u8981\u6ce8\u610f\uff1a**E1 \u51fa\u73b0\u65f6\uff0c\u8f93\u51fa E1\uff0cE1 \u6ca1\u51fa\u73b0\u4f46\u662f E2 \u51fa\u73b0\uff0c\u8f93\u51fa E2\uff0cE1 \u548c E2 \u90fd\u6ca1\u51fa\u73b0\uff0c\u4f46\u662f E3 \u51fa\u73b0\uff0c\u8f93\u51fa E3\uff0c\u4ee5\u6b64\u7c7b\u63a8**\u3002 \n  \n\u90a3\u8fd9\u4e2a\u9898\u7684\u601d\u8def\u5c31\u662f\uff0c\u5148\u628a\u539f\u4e2d\u7f00\u8868\u8fbe\u5f0f\u8f6c\u4e3a\u540e\u7f00\u8868\u8fbe\u5f0f\uff0c\u5c06\u80fd\u8ba1\u7b97\u7684\u8ba1\u7b97\uff0c\u4e2d\u95f4\u51fa\u73b0\u95ee\u9898\u65f6\u4f7f\u7528 $\\texttt{bool}$ \u7c7b\u578b\u8bb0\u5f55\uff0c\u5e76\u628a\u95ee\u9898\u5408\u7406\u5316\uff0c\u5373**\u4eba\u4e3a\u628a\u5f0f\u5b50\u6682\u65f6\u6539\u4e3a\u6b63\u786e**\u7684\uff0c\u7531\u4e8e\u6700\u540e\u8fd9\u4e2a\u5f0f\u5b50\u4e0d\u7528\u8ba1\u7b97\u7ed3\u679c\uff0c\u56e0\u6b64\u5177\u4f53\u6539\u6210\u4ec0\u4e48**\u4e0d\u5f71\u54cd\u7ed3\u679c**\uff0c\u5728\u8ba1\u7b97\u540e\u7f00\u8868\u8fbe\u5f0f\u7684\u503c\u65f6\uff0c\u8981\u5224\u65ad\u6808\u5185\u662f\u5426\u6709**\u8db3\u591f\u7684\u4e24\u4e2a**\u5143\u7d20\uff0c\u5426\u5219\u5c31\u8bf4\u660e**\u6709\u8fc7\u591a**\u7684\u8fd0\u7b97\u7b26\u53f7\u3002  \n\n\u5bf9\u4e8e\u9519\u8bef\u60c5\u51b5\u5904\u7406\u8be6\u89c1\u4ee3\u7801\u6ce8\u91ca\u3002 \n \n[AC code \u8bb0\u5f55](https://www.luogu.com.cn/record/48803316)  \n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstack <char>hz;\nstack <int>ans;\nint num, ft[100];\nbool e1, e2, e3, e4;\nchar c;\nstring s = \"\";\nint gas(char c)\n{\n\tint p = ans.top();\n\tans.pop();\n\tint q = ans.top();\n\tans.pop();\n\tif (c == '+')\treturn p + q;\n\tif (c == '-')\treturn q - p;\n\tif (c == '*') \treturn p * q;\n\tif (c == '/')\n\t{\n\t\tif (!p)\te1 = true, p = 1;\n\t\t//\u8ba1\u7b97\u9664\u6cd5\u65f6\uff0c\u9664\u6570\u51fa\u73b00\uff0c\u4f46\u662f\u4e3a\u4e86\u7ee7\u7eed\u8ba1\u7b97\uff0c\u5047\u5b9a\u9664\u6570\u662f1(\u5176\u5b9e\u56e0\u4e3a\u8fd9\u4e2a\u95ee\u9898\u662fE1\uff0c\u76f4\u63a5\u8f93\u51fa\u5e76\u7ed3\u675f\u6240\u6709\u4ee3\u7801\u5c31\u884c\u4e86)\n\t\treturn q / p;\n\t}\n}\n\nint main()\n{\n\tft['*'] = 1;\n\tft['/'] = 1;\n\tft['-'] = 2;\n\tft['+'] = 2; // ft\u5b58\u4f18\u5148\u7ea7\n\tbool fl = false;  //\u770b\u770bnum\u662f\u5426\u771f\u7684\u6709\u503c\uff0c\u4e0d\u5199\u53ef\u80fd\u4f1a\u591a\u5165\u68080\uff0c\u8840\u7684\u6559\u8bad\u3002\u3002\u3002\u4f46\u662f\u76f4\u63a5\u5224\u65adnum\u662f\u5426\u7b49\u4e8e0\u4e5f\u4e0d\u884c\uff0c\u81ea\u884c\u8111\u8865\u539f\u56e0\n\twhile ((c = getchar()) != '\\n' && c != EOF)\n\t{\n\t\ts += c;\n\t\tif (c >= 'A' && c <= 'Z' || c >= 'a' && c <= 'z')\tc = '1', e3 = true; // \u51fa\u73b0\u5b57\u6bcd\uff0c\u968f\u610f\u628a\u5b57\u6bcd\u6362\u6210\u4e00\u4e2a\u6b63\u6574\u6570\n\t\tif (c >= '0' && c <= '9') num = num * 10 + c - '0', fl = true;\n\t\telse\n\t\t{\n\t\t\tif (c != '+' && c != '-' && c != '*' && c != '/' && c != '(' && c != ')')\tc = '+', e2 = true;  //\u4e0d\u660e\u610f\u4e49\u7684\u7b26\u53f7\n\t\t\tif (fl) ans.push(num), num = 0, fl = false;\n\t\t\tif (c == ')')\n\t\t\t{\n\t\t\t\twhile (!hz.empty() && hz.top() != '(')\tans.push(gas(hz.top())), hz.pop();\n\t\t\t\tif (hz.empty()) e2 = true;   //\u62ec\u53f7\u4e0d\u5339\u914d\n\t\t\t\telse\thz.pop();\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\twhile (!hz.empty() && hz.top() != '(' && ft[hz.top()] <= ft[c])\n\t\t\t{\n\t\t\t\tif (ans.size() >= 2)\tans.push(gas(hz.top()));\n\t\t\t\telse\te4 = true; //\u8fc7\u591a\u8fd0\u7b97\u7b26\n\t\t\t\thz.pop();\n\t\t\t}\n\t\t\thz.push(c);\n\t\t}\t\n\t}\n\tif (fl)\tans.push(num);\n\twhile (!hz.empty())\t\n\t{\n\t\tif (hz.top() != '(' && hz.top() != ')' && ans.size() >= 2) ans.push(gas(hz.top()));\n\t\telse if (ans.size() < 2)\te4 = true; // \u8fc7\u591a\u8fd0\u7b97\u7b26\n\t\telse\te2 = true;  //\u62ec\u53f7\u4e0d\u5339\u914d\n\t\thz.pop();\n\t}\n\tif (!e1 && !e2 && !e3 && !e4)\tcout << s  << \"=\" << ans.top();\n\telse\n\t{\n\t\tif (e1)\tputs(\"E1\");\n\t\telse if (e2) puts(\"E2\");\n\t\telse if (e3) puts(\"E3\");\n\t\telse\tputs(\"E4\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1617005944,
        "uid": 409236,
        "name": "StayAlone",
        "ccfLevel": 6,
        "title": "P2718 \u7b80\u5355\u7684\u8868\u8fbe\u5f0f C++\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u662f\u6211\u7684**\u7b2c\u4e00\u7bc7**\u9898\u89e3\uff0c\u6211\u4e5f\u6ca1\u60f3\u5230\u6211\u5199\u7684\u7b2c\u4e00\u7bc7\u9898\u89e3\u5c31\u662f `\u63d0\u9ad8+/\u7701\u9009-` \u7684\u9898\u76ee\uff0c\u4f46\u5b9e\u9645\u4e0a\u8fd9\u9053\u9898\u5e76\u4e0d\u96be\uff0c\u5c31\u662f\u6a21\u62df\u6a21\u62df\uff0c\u7801\u91cf\u8f83\u5927\u800c\u5df2\uff08\u6bd5\u7adf\u6211\u8c03\u4e86\u597d\u4e45\uff09\u3002\n\n## \u9898\u76ee\u4f20\u9001\u95e8\n\n[\u7b80\u5355\u7684\u8868\u8fbe\u5f0f](https://www.luogu.com.cn/problem/P2718)\n\n## \u601d\u8def\n\n\u80fd\u6709\u4ec0\u4e48\u601d\u8def\u5462\uff1f\n\n\u666e\u901a\u4eba\u4e00\u770b\u5230\u9898\u76ee\u5c31\u4f1a\u731c\u5230\u662f**\u7eaf\u6a21\u62df**\uff0c\u4f46\u6211\u8111\u8def\u6e05\u5947\uff0c\u5c45\u7136\u60f3\u7684\u662f\u7528\u4e00\u5806\u4f4d\u8fd0\u7b97\u89e3\u51b3\u95ee\u9898\uff08\uff08\uff08\u3002\n\n\u53cd\u6b63\u6700\u8fd1\u4e5f\u5728\u505a\u5927\u6a21\u62df\uff0c\u5c31\u505a\u4e00\u505a\u5427\u3002\n\n**\u9996\u5148**\uff0c\u6211\u4eec\u5e94\u5f53\u7406\u89e3\u9898\u76ee\u542b\u4e49\uff0c\u7531`sample #3`\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u8fd9\u9053\u9898\u6240\u8c13\u7684\uff1a\n\n> \u591a\u4e2a\u9519\u8bef\u65f6\u4ec5\u8f93\u51fa\u9760\u524d\u7684\u90a3\u4e2a\n\n\u5c31\u6307\u7684\u662f\u9519\u8bef\u7f16\u53f7\u9760\u524d\u7684\u90a3\u4e00\u4e2a\u3002\n\n# Code\n\n\u6839\u636e\u4ee5\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa`main()`\uff1a\n\n```cpp\nint main()\n{\n\tscanf(\"%s\", &s);\n\tif (IsE1()) printf(\"E1\");\n\telse if (IsE2()) printf(\"E2\");\n\telse if (IsE3()) printf(\"E3\");\n\telse if (IsE4()) printf(\"E4\");\n\telse printf(\"%s=%d\", s, getans());\n\treturn 0;\n}\n```\n\u5176\u4e2d\u51fd\u6570\u7684\u4f18\u5148\u7ea7\uff1a`IsE1()` $>$ `IsE2()` $>$ `IsE3()` $>$ `IsE4()` $>$ `getans()`\u3002\n\n\u987e\u540d\u601d\u4e49\uff0c`IsE1()`\u5c31\u662f\u7528\u6765\u5224\u65ad\u5f97\u5426\u6709 $1$ \u7c7b\u9519\u8bef\uff0c\u5176\u4ed6\u540c\u7406\u3002\n\n`getans()`\u5c31\u662f\u7528\u6765\u5f97\u51fa\u6b63\u786e\u7b54\u6848\u7684\u51fd\u6570\u3002\n\n\u600e\u4e48\u5b9e\u73b0`IsE1()`\uff1f\n\n\u975e\u5e38\u7b80\u5355\uff0c\u7531\u9898\u610f\uff0c\u53ea\u9700\u8981\u5224\u65ad'/'\u53f7\u4e4b\u540e\u6709\u6ca1\u6709 $0$ \u5373\u53ef\uff0c\u53ef\u4ee5\u5199\u51fa\uff1a\n\n```cpp\nbool IsE1()\n{\n\tint len = strlen(s);\n\tfor (int i = 1; i < len; i++)\n\t\tif (s[i] == '0' && s[i - 1] == '/')\n\t\t\treturn 1;\n\treturn 0;\n}\n```\n\u600e\u4e48\u5b9e\u73b0`IsE2()`\uff1f\n\n\u4e5f\u4e0d\u662f\u5f88\u96be\uff0c\u5927\u5bb6\u90fd\u5199\u8fc7**\u62ec\u53f7\u5339\u914d**\u5427\uff0c\u7528\u6808\u5373\u53ef\u7b80\u5355\u5b9e\u73b0\u3002\n\n\u5728\u62ec\u53f7\u5339\u914d\u7684\u540c\u65f6\u5224\u65ad\u662f\u5426\u6709\u975e\u8fd0\u7b97\u7b26\uff08\u6ce8\u610f\uff0c\u51fa\u73b0\u5b57\u6bcd\u4e0d\u5c5e\u4e8e`E2`\u9519\u8bef\u8303\u7574\uff09\u3002\n\n\u5373\u53ef\u5199\u51fa\uff1a\n\n```cpp\nbool IsE2()\n{\n\tint len = strlen(s);\n\tstd::stack<char> f;//\u7528\u6765\u62ec\u53f7\u5339\u914d\u7684\u6808\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tif (s[i] == '(')\n\t\t\tf.push(s[i]);\n\t\telse if (s[i] == ')')\n\t\t\tif (f.empty()) return 1;\n\t\t\telse f.pop();\n\t\telse if ((s[i] < '0' || s[i] > '9') &&\n\t\t\ts[i] != '+' && s[i] != '-' &&\n\t\t\ts[i] != '*' && s[i] != '/' &&\n\t\t\t(s[i] < 'a' || s[i] > 'z') &&//\u6392\u9664\u5b57\u6bcd\u60c5\u51b5\n\t\t\t(s[i] < 'A' || s[i] > 'Z'))\n\t\t\treturn 1;\n\t}\n\tif (!f.empty()) return 1;\n\treturn 0;\n}\n```\n\u600e\u4e48\u5b9e\u73b0`IsE3()`\n\n\u5224\u65ad\u51fa\u73b0\u5b57\u6bcd\uff0c\u6700\u7b80\u5355\u7684\u4e00\u4e2a\u5224\u65ad\uff0c\u679a\u4e3e\u4e00\u904d\u5373\u53ef\u3002\n\n\u53ef\u5199\u51fa\uff1a\n\n```cpp\nbool IsE3()\n{\n\tint len = strlen(s);\n\tfor (int i = 0; i < len; i++)\n\t\tif ((s[i] >= 'a' && s[i] <= 'z') ||\n\t\t    (s[i] >= 'A' && s[i] <= 'Z'))\n\t\t\treturn 1;\n\treturn 0;\n}\n```\n\u600e\u4e48\u5b9e\u73b0`IsE4()`\n\n\u8fd9\u770b\u8d77\u6765\u5f88\u96be\u5b9e\u73b0\uff0c\u5b9e\u9645\u4e0a\u8f6c\u5316\u4e00\u4e0b\u601d\u8def\uff1a\u53ea\u8981\u8fd0\u7b97\u7b26\u4e4b\u540e\u8fd8\u6709\u8fd0\u7b97\u7b26\uff0c\u5c31\u5c5e\u4e8e`E4`\u7c7b\u578b\u9519\u8bef\u3002\n\n\u5373\u53ef\u5199\u51fa\uff1a\n\n```cpp\nbool IsE4()\n{\n\tint len = strlen(s);\n\tif (s[0] == '+' ||\n\t\ts[0] == '-' ||\n\t\ts[0] == '*' ||\n\t\ts[0] == '/')\n\t\treturn 1;\n\tfor (int i = 1; i < len; i++)\n\t\tif ((s[i] == '+' ||\n\t\t    s[i] == '-' ||\n\t\t\ts[i] == '*' ||\n\t\t\ts[i] == '/') &&\n\t\t\t(s[i + 1] == '+' ||\n\t\t\ts[i + 1] == '-' ||\n\t\t\ts[i + 1] == '*' ||\n\t\t\ts[i + 1] == '/'))\n\t\t\treturn 1;\n\treturn 0;\n}\n```\n\u600e\u4e48\u5b9e\u73b0`getans()`\uff1f\n\n\u8fd9\u4e2a\u4ed4\u7ec6\u60f3\u60f3\u5c31\u4e0d\u4f1a\u5f88\u96be\u4e86\uff0c\u5efa\u7acb\u4e00\u4e2a\u7b26\u53f7\u6808\uff0c\u4e00\u4e2a\u6570\u5b57\u6808\u548c\u4e00\u4e2a\u5e03\u5c14\u7c7b\u578b\u53d8\u91cf\uff0c\u5224\u65ad\u6570\u5b57\u662f\u5426\u4e3a\u4e24\u4f4d\u6570\uff0c\u5f00\u59cb\u904d\u5386\u539f\u5f0f\uff0c\u82e5\u4e3a\u62ec\u53f7\u5219\u8df3\u8fc7\uff0c\u82e5\u4e3a\u6570\u5b57\u5219\u5b58\u50a8\uff0c\u82e5\u4e3a\u52a0\u6216\u51cf\u5219\u5b58\u5230\u7b26\u53f7\u6808\uff0c\u82e5\u4e3a\u4e58\u6216\u9664\u5219\u5f53\u573a\u8ba1\u7b97\uff0c\u6700\u540e\u518d\u628a\u52a0\u53f7\u548c\u51cf\u53f7\u4ee5\u53ca\u5269\u4e0b\u7684\u6570\u636e\u8fdb\u884c\u8fd0\u7b97\u3002\n\n\u5373\u53ef\u5199\u51fa\uff1a\n\n```cpp\nint getans()\n{\n\tstd::stack<char> f;\n\tstd::stack<int> n;\n\tint len = strlen(s);\n\tbool IsTwo = 0;\n\tfor (int i = 0; i < len; i++)\n\t{\n\t\tif (s[i] == '(' || s[i] == ')') continue;\n\t\tif (s[i] >= '0' && s[i] <= '9')\n\t\t{\n\t\t\tif (IsTwo)\n\t\t\t{\n\t\t\t\tint tmp = n.top();\n\t\t\t\tn.pop();\n\t\t\t\tn.push(tmp * 10 + s[i] - '0');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tIsTwo = 1;\n\t\t\t\tn.push(s[i] - '0');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tIsTwo = 0;\n\t\t\tif (s[i] == '+' || s[i] == '-') f.push(s[i]);\n\t\t\telse\n\t\t\t{\n\t\t\t\tint u;\n\t\t\t\tfor (u = i + 1; u < len; u++)\n\t\t\t\t\tif (s[u] >= '0' && s[u] <= '9')\n\t\t\t\t\t\tbreak;\n\t\t\t\tint tmp = s[u] - '0';\n\t\t\t\tint y = i;\n\t\t\t\ti = u;\n\t\t\t\tif (u != len - 1)\n\t\t\t\t\tif (s[u + 1] >= '0' && s[u + 1] <= '9')\n\t\t\t\t\t\ttmp = tmp * 10 + s[u + 1] - '0', i++;\n\t\t\t\tint num = n.top();\n\t\t\t\tif (s[y] == '*') num *= tmp;\n\t\t\t\telse num /= tmp;\n\t\t\t\tn.pop();\n\t\t\t\tn.push(num);\n\t\t\t}\n\t\t}\n\t}\n\tint ans = n.top();\n\tn.pop();\n\twhile (!n.empty() && !f.empty())\n\t{\n\t\tchar c = f.top();\n\t\tif (c == '+')\n\t\t{\n\t\t\tint tmp = n.top();\n\t\t\tans += tmp;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint tmp = n.top();\n\t\t\tans = tmp - ans;\n\t\t}\n\t\tn.pop();\n\t\tf.pop();\n\t}\n\treturn ans;\n}\n```\n# THE END\n\n\u672c\u4eba\u662f\u4e00\u4e2a\u5927\u849f\u84bb\uff0c\u82e5\u6709\u4e0d\u8db3\uff0c\u8bf7\u8865\u5145\u3002",
        "postTime": 1665046117,
        "uid": 747475,
        "name": "SnapYust",
        "ccfLevel": 4,
        "title": "P2718 \u7b80\u5355\u7684\u8868\u8fbe\u5f0f \u9898\u89e3"
    }
]
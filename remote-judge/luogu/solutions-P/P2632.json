[
    {
        "content": "\u9898\u610f\uff1a\n\n\u7ed9\u51fa\u4e24\u6761\u76f4\u7ebf\uff0c\u4e0a\u9762\u5206\u522b\u6709 $n,m$ \u4e2a\u70b9\uff0c\u6c42\u5176\u6700\u5c0f\u751f\u6210\u6811\u3002\n___\n\u89c2\u5bdf\u53d1\u73b0\uff0c\u4e00\u4e2a\u70b9\u5728\u6700\u5c0f\u751f\u6210\u6811\u4e2d\u53ef\u80fd\u8fde\u63a5\u7684\u70b9\u53ea\u53ef\u80fd\u6709 $4$ \u4e2a\uff1a\u81ea\u5df1\u8fd9\u6761\u76f4\u7ebf\u4e0a\u76f8\u90bb\u7684\u4e24\u4e2a\u70b9\uff1b\u5411\u53e6\u4e00\u6761\u76f4\u7ebf\u505a\u5782\u7ebf\u5f97\u5230\u7684\u5782\u8db3\u65c1\u8fb9\u7684\u4e24\u4e2a\u70b9\uff08\u4e0b\u56fe\u4e2d $B$ \u5bf9\u5e94\u53ef\u4ee5\u9009\u62e9\u8fde\u63a5 $A_1,A_2$\uff0c\u4e0d\u53ef\u80fd\u8fde\u63a5 $BA_3$\uff09\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/1xy3uaol.png)\n\n\u4e0d\u80fd\u8de8\u8fc7\u81ea\u5df1\u76f4\u7ebf\u4e0a\u76f8\u90bb\u7684\u70b9\u975e\u5e38\u663e\u7136\uff1a\n\n\u65e2\u7136\u8fde\u63a5\u4e86 $A_1A_3$ \u4e3a\u4ec0\u4e48\u4e0d\u7528\u76f8\u540c\u7684\u4ee3\u4ef7\u8fde\u63a5 $A_1A_2,A_2A_3$\u3002\n\n\u5bf9\u4e8e\u8fde\u63a5\u53e6\u4e00\u6761\u76f4\u7ebf\u4e0a\u7684\u70b9\u7684\u60c5\u51b5\uff1a\n\n\u5047\u8bbe\u5728\u4e00\u4e2a\u751f\u6210\u6811\u4e2d $B$ \u8fde\u63a5\u5230\u4e86 $A_3$\uff0c\u5bf9\u5220\u9664 $A_2,A_3,B$ \u4e4b\u95f4\u7684\u8fb9\u4e4b\u540e\u7684\u8fde\u901a\u60c5\u51b5\u8fdb\u884c\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n\u82e5 $B$ \u4e0e $A_2$ \u5728\u540c\u4e00\u8fde\u901a\u5757\u5185\uff0c\u5219\u8fde\u63a5 $A2A3$ \u66f4\u4f18\u3002\n\n\u82e5 $A_2$ \u4e0e $A_3$ \u5728\u540c\u4e00\u8fde\u901a\u5757\u5185\uff0c\u5219\u8fde\u63a5 $BA_2$ \u66f4\u4f18\u3002\n\n\u82e5\u4e09\u70b9\u5747\u5728\u4e0d\u540c\u8fde\u901a\u5757\u5185\uff0c\u5219\u8fde\u63a5 $BA_2,A_2A_3$ \u66f4\u4f18\u3002\n\n\u6545\u6240\u6709\u8fde\u63a5\u4e86 $BA_3$ \u7684\u751f\u6210\u6811\u90fd\u4e0d\u662f\u6700\u5c0f\u751f\u6210\u6811\u3002\n\n\u7136\u540e\u6309\u7167\u9650\u5236\u52a0\u8fb9\u8dd1\u6700\u5c0f\u751f\u6210\u6811\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff08\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u4ee3\u7801\u591a\u8fde\u4e86 $25\\%$ \u7684\u65e0\u6548\u8fb9\uff0c\u4f46\u4e0d\u5f71\u54cd\u6b63\u786e\u6027\uff0c$O((n+m)log(n+m))$\uff09\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node{double x,y;}a[100001],b[100001];\nstruct e{int u,v;double d;}c[2000001];\ninline bool cmp1(node i,node j){return i.x<j.x;}\ninline bool cmp2(e i,e j){return i.d<j.d;}\nint n,m,cnt,fa[200001];\ndouble ax,ay,bx,by,cx,cy,dx,dy,t,ans;\nint find(int i){return fa[i]==i?i:fa[i]=find(fa[i]);}\ndouble dis(node i,node j){return (i.x-j.x)*(i.x-j.x)+(i.y-j.y)*(i.y-j.y);}\nint main()\n{\n\tscanf(\"%d%d%lf%lf%lf%lf%lf%lf%lf%lf\",&n,&m,&ax,&ay,&bx,&by,&cx,&cy,&dx,&dy);\n\tfor(int i=1;i<=n;i++)scanf(\"%lf\",&t),a[i]={ax*t+bx*(1-t),ay*t+by*(1-t)},fa[i]=i;\n\tfor(int i=1;i<=m;i++)scanf(\"%lf\",&t),b[i]={cx*t+dx*(1-t),cy*t+dy*(1-t)},fa[n+i]=n+i;\n\tsort(a+1,a+n+1,cmp1),sort(b+1,b+n+1,cmp1);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint l=1,r=m,midl,midr,ok=0;\n\t\twhile(l<r-5)\n\t\t{\n\t\t\tmidl=(l*2+r)/3,midr=(l+r*2)/3;\n\t\t\tif(dis(a[i],b[midl])<dis(a[i],b[midr]))r=midr;\n\t\t\telse l=midl;\n\t\t}\n\t\tfor(int j=l;j<r;j++)if(dis(b[i],a[j])<dis(b[i],a[j+1]))\n\t\t{\n\t\t\tif(j!=1)c[++cnt]={i,n+j-1,dis(a[i],b[j-1])};\n\t\t\tc[++cnt]={i,n+j,dis(a[i],b[j])},c[++cnt]={i,n+j+1,dis(a[i],b[j+1])};\n\t\t\tok=1;\n\t\t\tbreak;\n\t\t}\n\t\tif(!ok)\n\t\t{\n\t\t\tif(r!=1)c[++cnt]={i,n+r-1,dis(a[i],b[r-1])};\n\t\t\tc[++cnt]={i,n+r,dis(b[i],a[r])};\n\t\t\tif(r!=m)c[++cnt]={i,n+r+1,dis(a[i],b[r+1])};\n\t\t}\n\t}\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint l=1,r=n,midl,midr,ok=0;\n\t\twhile(l<r-5)\n\t\t{\n\t\t\tmidl=(l*2+r)/3,midr=(l+r*2)/3;\n\t\t\tif(dis(b[i],a[midl])<dis(b[i],a[midr]))r=midr;\n\t\t\telse l=midl;\n\t\t}\n\t\tfor(int j=l;j<r;j++)if(dis(b[i],a[j])<dis(b[i],a[j+1]))\n\t\t{\n\t\t\tif(j!=1)c[++cnt]={n+i,j-1,dis(b[i],a[j-1])};\n\t\t\tc[++cnt]={n+i,j,dis(b[i],a[j])},c[++cnt]={n+i,j+1,dis(b[i],a[j+1])};\n\t\t\tok=1;\n\t\t\tbreak;\n\t\t}\n\t\tif(!ok)\n\t\t{\n\t\t\tif(r!=1)c[++cnt]={n+i,r-1,dis(b[i],a[r-1])};\n\t\t\tc[++cnt]={n+i,r,dis(b[i],a[r])};\n\t\t\tif(r!=m)c[++cnt]={n+i,r+1,dis(b[i],a[r+1])};\n\t\t}\n\t}\n\tfor(int i=1;i<n;i++)c[++cnt]={i,i+1,dis(a[i],a[i+1])};\n\tfor(int j=1;j<m;j++)c[++cnt]={n+j,n+j+1,dis(b[j],b[j+1])};\n\tsort(c+1,c+cnt+1,cmp2);\n\tfor(int i=1;i<=cnt;i++)if(find(c[i].u)!=find(c[i].v))fa[fa[c[i].u]]=fa[c[i].v],ans+=sqrt(c[i].d);\n\tprintf(\"%.3lf\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1611235249,
        "uid": 44840,
        "name": "123456zmy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2632 \u3010Explorer\u3011"
    }
]
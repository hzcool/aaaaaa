[
    {
        "content": "## Link\n\n[ [ICPC2014 WF]Crane Balancing](https://www.luogu.com.cn/problem/P6894)\n\n## Solution\n\n\u9996\u5148\u8fd9\u9898\u770b\u7740\u4e00\u80a1\u6d53\u6d53\u7684\u8ba1\u7b97\u51e0\u4f55\u5473\uff0c\u800c\u4e14\u9898\u9762\u91cc\u5c31\u7ed9\u4e86\u4e00\u4e2a\u8c14\u8c14\u7684\u591a\u8fb9\u5f62\uff0c\u770b\u8d77\u6765\u975e\u5e38\u4e0d\u53ef\u505a\u3002\n\n\u4e0d\u8fc7\u4ed4\u7ec6\u5206\u6790\u4e00\u4e0b\uff0c\u5176\u5b9e\u4e5f\u4e0d\u662f\u5f88\u96be\u3002\n\n\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u7269\u4f53\u662f\u5426\u7a33\u5b9a\uff1f\n\n\u663e\u7136\uff0c\u53ea\u8981\u8d28\u5fc3\u5728\u5e95\u90e8\u4e24\u4e2a\u652f\u70b9\u95f4\uff0c\u5c31\u662f\u7a33\u5b9a\u7684\u3002\n\n\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u7269\u4f53\u6302\u4e0a\u4e00\u4e2a\u91cd\u7269\u662f\u5426\u7a33\u5b9a\uff1f\n\n\u6211\u4eec\u4e0d\u59a8\u5148\u628a\u591a\u8fb9\u5f62\u7684\u8d28\u5fc3\u6c42\u51fa\u6765\uff0c\u7136\u540e\u8003\u8651\u6302\u4e0a\u91cd\u7269\u540e\u8d28\u5fc3\u7684\u79fb\u52a8\uff0c\u79fb\u52a8\u5230\u7684\u65b0\u70b9\u5982\u679c\u5728\u4e24\u4e2a\u652f\u70b9\u5185\uff0c\u90a3\u5c31\u662f\u7a33\u5b9a\u7684\u3002\n\n\u4e8e\u662f\u6211\u4eec\u89e3\u51b3\u8fd9\u9053\u9898\u7684\u601d\u8def\u5927\u81f4\u660e\u786e\u4e86\uff1a\n\n1. \u6c42\u51fa\u591a\u8fb9\u5f62\u9762\u79ef $S$\uff0c\u548c\u8d28\u5fc3 $P$\u3002\n2. \u5bf9\u8d28\u5fc3\u548c\u91cd\u7269\u6302\u70b9\u7684\u4f4d\u7f6e\u5206\u7c7b\u8ba8\u8bba\uff08\u8fd9\u91cc\u6bd4\u8f83\u9ebb\u70e6\uff0c\u5c24\u5176\u662f\u8fd9\u9898\u8fd8\u6d89\u53ca\u5230\u4e00\u4e2a\u6d6e\u70b9\u6570\uff09\uff0c\u901a\u8fc7\u89e3\u65b9\u7a0b\u786e\u5b9a\u4e0a\u4e0b\u754c\u3002\n\n\u7136\u540e\u5c31\u662f\u4e00\u4e9b\u7ec6\u8282\u4e0a\u7684\u95ee\u9898\u3002\n\n\u6c42\u591a\u8fb9\u5f62\u9762\u79ef\u53ef\u4ee5\u7528\u5212\u5206\u4e09\u89d2\u5f62\u7136\u540e\u53c9\u79ef\u7684\u65b9\u6cd5\uff0c\u6c42\u8d28\u5fc3\u53ef\u4ee5\u8003\u8651\u6240\u6709\u5212\u5206\u51fa\u7684\u4e09\u89d2\u5f62\u505a\u5e26\u6743\u4e2d\u5fc3\uff0c\u4f46\u662f\u8981\u628a\u5f0f\u5b50\u5316\u7b80\u4e00\u4e0b\u3002~~\u4e0d\u7136\u4f60\u5f88\u53ef\u80fd\u4f1a\u50cf\u6211\u4e00\u6837\u4ea4\u4e0a\u4e00\u9762\u624d\u77e5\u9053\u95ee\u9898~~\n\n## Code\n\n```cpp\n#include <cstdio>\n#include <cmath>\n\n#define _N 110\n#define _EPS 1e-8\n#define _INF 1e18\n\nstruct Vec {\n\tdouble x, y;\n\tVec() {\n\t\tx = y = 0;\n\t}\n\tVec(double a, double b) {\n\t\tx = a, y = b;\n\t}\n};\n\ntypedef Vec Point;\n\nVec inline operator -(const Point& left, const Point& right) {\n\treturn Vec(left.x - right.x, left.y - right.y);\n}\nPoint inline operator +(const Point& left, const Vec& right) {\n\treturn Point(left.x + right.x, left.y + right.y);\n}\nVec inline operator *(const Vec& left, double right) {\n\treturn Vec(left.x * right, left.y * right);\n}\nVec inline operator /(const Vec& left, double right) {\n\treturn Vec(left.x / right, left.y / right);\n}\ndouble inline operator %(const Vec& left, const Vec& right) {\n\treturn left.x * right.y - left.y * right.x;\n}\n\nint n;\n\nPoint poly[_N];\n\ndouble mass[_N];\nPoint pt[_N];\n\ndouble curm;\nPoint ctr;\n\ndouble l = _INF, r = -_INF;\n\nint inline sgn(double v) {\n\tif (v > _EPS) {\n\t\treturn 1;\n\t}\n\tif (v < -_EPS) {\n\t\treturn -1;\n\t}\n\treturn 0;\n}\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 1; i <= n; i++) {\n\t\tscanf(\"%lf%lf\", &poly[i].x, &poly[i].y);\n\t\tif (sgn(poly[i].y) == 0) {\n\t\t\tl = fmin(l, poly[i].x), r = fmax(r, poly[i].x);\n\t\t}\n\t}\n\tfor (int i = 1; i <= n - 2; i++) {\n\t\tmass[i] = (poly[i] - poly[n]) % (poly[i + 1] - poly[n]);\n\t\tctr = ctr + (poly[i] + poly[i + 1] + poly[n]) * mass[i];\n\t\tcurm += mass[i];\n\t}\n\tctr = ctr / curm / 3.0;\n\tcurm = fabs(curm / 2);\n\tif (sgn(ctr.x - l) < 0) {\n\t\tdouble mn = curm * (l - ctr.x) / (poly[1].x - l), mx = curm * (r - ctr.x) / (poly[1].x - r);\n\t\tif (sgn(poly[1].x - l) <= 0) {\n\t\t\tputs(\"unstable\");\n\t\t} else if (sgn(poly[1].x - r) > 0) {\n\t\t\tprintf(\"%.0lf .. %.0lf\\n\", floor(mn + _EPS), ceil(mx - _EPS));\n\t\t} else {\n\t\t\tprintf(\"%.0lf .. inf\\n\", floor(mn + _EPS));\n\t\t}\n\t} else if (sgn(ctr.x - r) > 0) {\n\t\tdouble mn = curm * (ctr.x - r) / (r - poly[1].x), mx = curm * (ctr.x - l) / (l - poly[1].x);\n\t\tif (sgn(poly[1].x - r) >= 0) {\n\t\t\tputs(\"unstable\");\n\t\t} else if (sgn(poly[1].x - l) < 0) {\n\t\t\tprintf(\"%.0lf .. %.0lf\\n\", floor(mn + _EPS), ceil(mx - _EPS));\n\t\t} else {\n\t\t\tprintf(\"%.0lf .. inf\\n\", floor(mn + _EPS));\n\t\t}\n\t} else {\n\t\tif (sgn(poly[1].x - l) < 0) {\n\t\t\tdouble mx = curm * (ctr.x - l) / (l - poly[1].x);\n\t\t\tprintf(\"0 .. %.0lf\\n\", ceil(mx - _EPS));\n\t\t} else if (sgn(poly[1].x - r) > 0) {\n\t\t\tdouble mx = curm * (r - ctr.x) / (poly[1].x - r);\n\t\t\tprintf(\"0 .. %.0lf\\n\", ceil(mx - _EPS));\n\t\t} else {\n\t\t\tputs(\"0 .. inf\");\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n## Inspiration\n\n\u6211\u8ba4\u4e3a\u9996\u5148\u662f\u4e0d\u80fd\u88ab\u8fd9\u9898\u7684\u9898\u9762\u5413\u4f4f\uff0c\u56e0\u4e3a\u5f88\u591a\u4eba\u5bf9\u8ba1\u7b97\u51e0\u4f55\u90fd\u6709\u4e00\u4e2a\u6bd2\u7624\u7684\u5370\u8c61\u3002\u5176\u5b9e\u51b7\u9759\u5206\u6790\uff0c\u8fd9\u9053\u9898\u5e76\u4e0d\u4e0d\u53ef\u505a\u3002\n\n\u6838\u5fc3\u7ed3\u8bba\uff1a\n\n- \u628a\u591a\u8fb9\u5f62\u5316\u6210\u4e09\u89d2\u5f62\u5c31\u53ef\u4ee5\u7b80\u5355\u7684\u6c42\u51fa\u9762\u79ef\u548c\u8d28\u5fc3",
        "postTime": 1618750292,
        "uid": 244096,
        "name": "FangZeLi",
        "ccfLevel": 7,
        "title": "P6894\u9898\u89e3"
    }
]
[
    {
        "content": "$ 20 $ \u5206\u601d\u8def\uff1a\u7206\u641c\u5373\u53ef\u3002\n\n\u6ee1\u5206\u505a\u6cd5\uff1a\n\n\u4ee4 $ m = {n \\over 5} $\n\n\u4e00\u770b $ n \\leq 1000 $ \uff0c\u5c31\u77e5\u9053\u641c\u7d22\u662f\u4f1a\u8d85\u65f6\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u7528\u6784\u9020\u77e9\u9635\u7684\u601d\u60f3\u6765\u89e3\u51b3\u8fd9\u9053\u9898\u3002\u9898\u76ee\u8bf4 $ n $ \u662f $ 5 $ \u7684\u500d\u6570\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u6784\u9020 $ 5 \\times 5$ \u7684\u77e9\u9635\u62fc\u5408\u6210\u7b54\u6848\u77e9\u9635\u6765\u89e3\u51b3\u3002\n\n\u5148\u5047\u8bbe\u80fd\u6784\u9020\u8fd9\u6837\u7684 $ 5 \\times 5$ \u77e9\u9635\u53ef\u4ee5\u5b9e\u73b0\u5411\u4e0a\u8d70\uff0c\u5411\u5de6\u8d70\uff0c\u5411\u53f3\u8d70\uff0c\u5411\u4e0b\u8d70\uff0c\u4e0d\u59a8\u6765\u60f3\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u5bf9\u4e8e\u4e00\u4e2a $ m \\times m $ \u7684\u683c\u5b50\u56fe\uff0c\u4ece\u5750\u6807\u4e3a $ (1,1) $ \u7684\u683c\u5b50\u51fa\u53d1\uff0c\u6bcf\u6b21\u53ef\u4ee5\u5411\u4e0a\uff0c\u5411\u5de6\uff0c\u5411\u53f3\uff0c\u5411\u4e0b\u8d70\uff0c\u95ee\u600e\u4e48\u8d70\u624d\u80fd\u4e0d\u91cd\u4e0d\u6f0f\u5730\u8d70\u8fc7\u6bcf\u4e00\u4e2a\u683c\u5b50\u5e76\u6700\u7ec8\u56de\u5230\u8d77\u70b9\u3002\n\n\u5f53 $ m $ \u4e3a\u5076\u6570\u65f6\uff0c\u663e\u7136\u53ef\u4ee5\u8fd9\u6837\u8d70\uff08\u4ee5 $ m = 4 $ \u4e3a\u4f8b\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/6q72gvrl.png)\n\n\uff08\u56fe\u7565\u4e11\uff0c\u4e0d\u8981\u89c1\u602a\uff09\n\n\u5f53 $ m $ \u4e3a\u5947\u6570\u65f6\uff0c\u5982\u679c\u53ea\u6ee1\u8db3\u4ee5\u4e0a\u64cd\u4f5c\u5219\u65e0\u89e3\uff0c\u4f46\u5982\u679c\u53ef\u4ee5\u4ece $ (2,2) $ \u7684\u683c\u5b50\u76f4\u63a5\u5230 $ (1,1) $ \u7684\u683c\u5b50\uff0c\u5c31\u53ef\u4ee5\u6ee1\u8db3\uff08\u81f3\u4e8e\u5982\u4f55\u5b9e\u73b0\u7b49\u4e00\u4e0b\u4f1a\u8bb2\uff09\uff08\u4ee5 $ m = 5 $ \u4e3a\u4f8b\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/bzgnnkf6.png)\n\n\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u6784\u9020 $ 5 \\times 5 $ \u77e9\u9635\u4e86\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u77e9\u9635\uff0c\u5b83\u6b63\u4e2d\u5fc3\u7684\u683c\u5b50\u8fde\u63a5\u5176\u5185\u90e8\u683c\u5b50\u7684\u6570\u91cf\u6709\u56db\u683c\uff0c\u800c\u5176\u5b83\u4ec5\u6709\u4e09\u683c\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4ee5\u4e2d\u5fc3\u70b9\u4e3a\u8fde\u63a5\u5176\u5b83\u77e9\u9635\u7684\u8fdb\u884c\u8f6c\u79fb\uff0c\u5982\u4e0b\uff08\u7ea2\u8272\u4e3a\u77e9\u9635\u5185\u90e8\u7684\u8d77\u70b9\uff0c\u84dd\u8272\u4e3a\u7ec8\u70b9\uff0c\u4ee5\u5411\u5de6\u548c\u5411\u4e0a\u4e3a\u4f8b\uff0c\u5411\u53f3\u548c\u5411\u4e0b\u540c\u7406\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/at4kfta4.png)\n\n\u5bf9\u4e8e $ m $ \u4e3a\u5947\u6570\uff0c\u53ef\u4ee5\u5982\u4e0b\u5904\u7406\uff08\u7eff\u8272\u4e3a\u4e2d\u8f6c\u70b9\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/sn1lrvjw.png)\n\n\u5bf9\u4e8e $ m $ \u4e3a\u5076\u6570\uff0c\u76f4\u63a5\u4ece\u53f3\u5f80\u5de6\u8d70\u5373\u53ef\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/01gnpwqb.png)\n\n\u81f3\u4e8e\u5982\u4f55\u5728\u4e00\u4e2a $ 5 \\times 5 $ \u7684\u77e9\u9635\u4e2d\u505a\u5230\uff0c\u53ef\u4ee5\u624b\u73a9\uff08~~\u5982\u679c\u4e0d\u60f3\u53ef\u4ee5\u770b\u4ee3\u7801\uff09~~\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#define re register\n#define xia 3\n#define shang 4\n#define zuo 5\n#define you 6//\u610f\u601d\u662f\u62fc\u97f3\nusing namespace std;\nconst int MAXN=1e3+1;\nconst int mat[7][5][5]={\n\t{\n        {1,8,16,2,7},\n        {11,19,5,10,18},\n        {22,14,0,21,15},\n        {4,9,17,3,6},\n        {12,20,23,13,0}//0\u4e3a\u4e2d\u8f6c\u70b9\n    },\n    {\n        {22,3,9,23,2},\n        {16,25,20,17,7},\n        {10,13,1,4,12},\n        {21,18,8,24,19},\n        {15,5,11,14,6}\n    },\n    {\n        {1,12,5,2,13},\n        {7,18,15,10,19},\n        {23,3,0,22,4},\n        {16,11,6,17,14},\n        {8,21,24,9,20}//\u540c\u4e0a\n    },\n    {\n        {6,22,14,7,2},\n        {19,9,4,20,12},\n        {24,16,1,23,15},\n        {5,21,13,8,3},\n        {18,10,25,17,11}\n    },//\u5411\u4e0b\n    {\n        {9,22,25,8,2},\n        {17,12,4,20,15},\n        {24,7,1,23,6},\n        {10,21,16,11,3},\n        {18,13,5,19,14}\n    },//\u5411\u4e0a\n    {\n        {9,17,24,8,2},\n        {22,12,4,19,13},\n        {25,7,1,16,6},\n        {10,18,23,11,3},\n        {21,15,5,20,14}\n    },//\u5411\u5de6\n    {\n        {22,14,7,23,2},\n        {9,19,4,12,18},\n        {6,24,1,15,25},\n        {21,13,8,20,3},\n        {10,16,5,11,17}\n    }//\u5411\u53f3\n};//0\u30011\u77e9\u9635\u5904\u7406\u5947\u6570\u60c5\u51b5\uff0c2\u77e9\u9635\u5904\u7406\u5076\u6570\u60c5\u51b5\n//\u4ee5\u4e0a\u4e3a\u6784\u9020\u7684\u77e9\u9635\nint n,nn;\nint ans[MAXN][MAXN];\nstruct node{\n\tint id,add;\n\tinline void up(int x,int y){\n\t\tfor(re int i=1;i<=5;i++)\n\t\t\tfor(re int j=1;j<=5;j++)\n\t\t\t\tans[i+x][j+y]=mat[id][i-1][j-1]+add;\n\t}//\u5177\u4f53\u6765\u7b97\u6b65\u6570\n}b[201][201];\ninline void calc(int x,int y,int val){\n\twhile(b[x][y].id && b[x][y].id!=1 && b[x][y].id!=2){\n\t\tb[x][y].add=val;\n\t\tval+=25;\n\t\tif(b[x][y].id==xia) x++;\n\t\telse if(b[x][y].id==shang) x--;\n\t\telse if(b[x][y].id==zuo) y--;\n\t\telse if(b[x][y].id==you) y++;\n\t}\n\tif(b[x][y].id==1) b[x][y].add=val;\n}//\u7b97\u6bcf\u4e2a\u77e9\u9635\u5230\u8fbe\u524d\u7684\u6b65\u6570\nint main(){\n\tscanf(\"%d\",&n),nn=n/5;\n\tif(n==5)return puts(\"1 14 7 4 15\\n9 22 17 12 23\\n19 5 25 20 6\\n2 13 8 3 16\\n10 21 18 11 24\"),0;//\u7279\u5224\n\tif(nn&1){\n\t\tb[1][1].id=0,b[2][2].id=1;\n\t\tfor(re int i=2;i<=nn;i++){\n\t\t\tif(i&1) b[1][i].id=zuo;\n\t\t\telse b[1][i].id=xia;\n\t\t}\n\t\tfor(re int i=3;i<=nn;i++){\n\t\t\tif(i&1) b[2][i].id=shang;\n\t\t\telse b[2][i].id=zuo;\n\t\t}\n\t\tfor(re int i=2;i<nn;i++)\n\t\t\tb[i][1].id=xia;\n\t\tb[nn][1].id=you;\n\t\tfor(re int i=3;i<=nn;i++)\n\t\t\tif(i&1){\n\t\t\t\tfor(re int j=2;j<nn;j++)\n\t\t\t\t\tb[i][j].id=you;\n\t\t\t\tb[i][nn].id=shang;\n\t\t\t}else{\n\t\t\t\tfor(re int j=3;j<=nn;j++)\n\t\t\t\t\tb[i][j].id=zuo;\n\t\t\t\tb[i][2].id=shang;\n\t\t\t}\n\t\tcalc(2,1,23);//\u5947\u6570\u6709\u4e24\u4e2a0\uff0c\u6240\u4ee5\u4e3a25-2\n\t}\n    else{\n\t\tb[1][1].id=2;\n\t\tfor(re int i=2;i<nn;i++)\n\t\t\tb[i][1].id=xia;\n\t\tb[nn][1].id=you;\n\t\tfor(re int i=2;i<=nn;i++)\n\t\t\tb[1][i].id=zuo;\n\t\tfor(re int i=2;i<=nn;i++)\n\t\t\tif(i&1){\n\t\t\t\tfor(re int j=3;j<=nn;j++)\n\t\t\t\t\tb[i][j].id=zuo;\n\t\t\t\tb[i][2].id=shang;\n\t\t\t}else{\n\t\t\t\tfor(re int j=2;j<nn;j++)\n\t\t\t\t\tb[i][j].id=you;\n\t\t\t\tb[i][nn].id=shang;\n\t\t\t}\n\t\tcalc(2,1,24);//\u5076\u6570\u4e3a25-1\n\t}\n\tfor(re int i=1;i<=nn;i++)\n\t\tfor(re int j=1;j<=nn;j++)\n\t\t\tb[i][j].up((i-1)*5,(j-1)*5);\n\tif(nn&1) ans[5][5]=n*n-1;\n\tans[3][3]=n*n;\n\tfor(re int i=1;i<=n;i++,puts(\"\"))\n\t\tfor(re int j=1;j<=n;j++){\n\t\t\tprintf(\"%d \",ans[i][j]);\n\t\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1591077313,
        "uid": 112943,
        "name": "bits\u3002",
        "ccfLevel": 9,
        "title": "P6291 [eJOI2017]\u9a86\u9a7c \u9898\u89e3"
    }
]
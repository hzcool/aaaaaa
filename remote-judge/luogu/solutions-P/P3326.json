[
    {
        "content": "\u8fd9\u662f\u4e00\u9053~~\u7b80\u5355\u7684~~\u6a21\u62df\u9898\u3002\n\n\u636e\u8bf4\u53ef\u4ee5\u5c06\u4e09\u7ef4\u5e73\u9762\u4e0a\u7684\u6295\u5f71\u8f6c\u5316\u5230\u4e8c\u7ef4\u5e73\u9762\u4e0a\u7684\u95ee\u9898\u505a\u3002\n\n\u7136\u800c\u6211\u592a\u5f31\u4e86\uff0c\u53ea\u4f1a\u5206\u7c7b\u8ba8\u8bba\u3002\n\n\u6211\u4eec\u53d1\u73b0\u53ea\u8981\u5904\u7406\u6bcf\u4e2a\u5c0f\u7acb\u65b9\u4f53\u7684\u9876\u9762\uff0c\u524d\u9762\uff0c\u53f3\u9762\u7684\u989c\u8272\u5c31\u53ef\u4ee5\u4e86\u3002~~\u5e9f\u8bdd~~\n\n\u4ee4$cnt[i][j]$\u8868\u793a\u8f93\u5165\u6570\u636e\u4ece\u4e0a\u5230\u4e0b\u7b2c$i$\u884c\uff0c\u4ece\u5de6\u5230\u53f3\u7b2c$j$\u5217\u7684\u7acb\u65b9\u4f53\u4e2a\u6570\u3002\n\n\u5bf9\u4e8e\u9876\u9762\u7684\u989c\u8272\uff0c\u6211\u4eec\u5bf9\u6bcf\u675f\u5149\u7ebf\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n1. \u5bf9\u4e8e\u65b9\u5411\u7ad6\u76f4\u5411\u4e0b\u7684\u5149\u7ebf\uff0c\u6211\u4eec\u76f4\u63a5\u628a\u5149\u7ebf\u52a0\u4e0a\u53bb\u5373\u53ef\u3002\n2. \u5bf9\u4e8e\u4ece\u5de6\u5c04\u6765\u7684\u5149\u7ebf\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a$h>0$\uff0c\u4f7f\u5f97$cnt[x][y-h]-cnt[x][y]\\geqslant h$\uff0c\u5219\u8fd9\u675f\u5149\u7ebf\u4e0d\u80fd\u7167\u5230\u4f4d\u4e8e$(x,y)$\u7684\u6700\u4e0a\u9762\u7684\u5c0f\u7acb\u65b9\u4f53\u7684\u9876\u9762\u7684\u4efb\u4f55\u4e00\u90e8\u5206\u3002\u5176\u5b83\u7c7b\u4f3c\u7684\u5149\u7ebf\u540c\u7406\u3002\n3. \u5bf9\u4e8e\u4ece\u53f3\u4e0b\u65b9\u5411\u5c04\u6765\u7684\u5149\u7ebf\uff1a\n\n \u5982\u679c\u5b58\u5728\u4e00\u4e2a$h>0$\uff0c\u4f7f\u5f97$cnt[x+h][y+h]-cnt[x][y]\\geqslant h$\uff0c\u5219\u8fd9\u675f\u5149\u7ebf\u4e0d\u80fd\u7167\u5230\u4f4d\u4e8e$(x,y)$\u7684\u6700\u4e0a\u9762\u7684\u5c0f\u7acb\u65b9\u4f53\u7684\u9876\u9762\u7684\u4efb\u4f55\u4e00\u90e8\u5206\u3002\n \n \u5982\u679c\u5b58\u5728\u4e00\u4e2a$h>0$\uff0c\u4f7f\u5f97$cnt[x+h][y+h-1]-cnt[x][y]\\geqslant h$\uff0c\u5219\u8fd9\u675f\u5149\u7ebf\u4e0d\u80fd\u7167\u5230\u4f4d\u4e8e$(x,y)$\u7684\u6700\u4e0a\u9762\u7684\u5c0f\u7acb\u65b9\u4f53\u7684\u9876\u9762\u7684\u5de6\u8fb9\u90e8\u5206\u548c\u4e0b\u8fb9\u90e8\u5206\u3002\n \n \u5982\u679c\u5b58\u5728\u4e00\u4e2a$h>0$\uff0c\u4f7f\u5f97$cnt[x+h-1][y+h]-cnt[x][y]\\geqslant h$\uff0c\u5219\u8fd9\u675f\u5149\u7ebf\u4e0d\u80fd\u7167\u5230\u4f4d\u4e8e$(x,y)$\u7684\u6700\u4e0a\u9762\u7684\u5c0f\u7acb\u65b9\u4f53\u7684\u9876\u9762\u7684\u53f3\u8fb9\u90e8\u5206\u548c\u4e0a\u8fb9\u90e8\u5206\u3002\n \n \u5176\u5b83\u7c7b\u4f3c\u7684\u5149\u7ebf\u540c\u7406\u3002\n \n\u5bf9\u4e8e\u53f3\u9762\u7684\u989c\u8272\uff0c\u6211\u4eec\u8fd8\u662f\u5bf9\u6bcf\u675f\u5149\u7ebf\u5206\u7c7b\u8ba8\u8bba\uff0c\u4f46\u662f\u53ea\u8981\u8ba8\u8bba$3$\u675f\u5149\u7ebf\uff1a\n\n  \u4ee4\u8fd9\u4e2a\u5c0f\u7acb\u65b9\u4f53\u7684\u9ad8\u5ea6\u4e3a$Height$\u3002\n\n1. \u5bf9\u4e8e\u4ece\u6b63\u53f3\u65b9\u5411\u5c04\u6765\u7684\u5149\u7ebf\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a$h>0$\uff0c\u4f7f\u5f97$cnt[x][y+h]-Height\\geqslant h$\uff0c\u5219\u8fd9\u675f\u5149\u7ebf\u4e0d\u80fd\u627e\u5230\u8fd9\u4e2a\u7acb\u65b9\u4f53\u7684\u53f3\u8fb9\u3002\n\n2. \u5bf9\u4e8e\u4ece\u53f3\u4e0b\u65b9\u5411\u5c04\u6765\u7684\u5149\u7ebf\uff1a\n\n  \u5982\u679c\u5b58\u5728\u4e00\u4e2a$h>0$\uff0c\u4f7f\u5f97$cnt[x+h-1][y+h]-Height\\geqslant h-1$\uff0c\u5219\u8fd9\u4e2a\u5c0f\u7acb\u65b9\u4f53\u7684\u6574\u4e2a\u53f3\u9762\u4e0d\u80fd\u88ab\u8fd9\u675f\u5149\u7167\u5230\u3002\n\n  \u5982\u679c\u5b58\u5728\u4e00\u4e2a$h>0$\uff0c\u4f7f\u5f97$cnt[x+h][y+h]-Height\\geqslant h$\uff0c\u5219\u8fd9\u4e2a\u5c0f\u7acb\u65b9\u4f53\u7684\u6574\u4e2a\u53f3\u9762\u4e0d\u80fd\u88ab\u8fd9\u675f\u5149\u7167\u5230\u3002\n  \n  \u5982\u679c\u5b58\u5728\u4e00\u4e2a$h\\geqslant 0$\uff0c\u4f7f\u5f97$cnt[x+h+1][y+h+1]-Height\\geqslant h$\uff0c\u5219\u8fd9\u4e2a\u5c0f\u7acb\u65b9\u4f53\u53f3\u9762\u7684\u5de6\u8fb9\u90e8\u5206\u548c\u4e0b\u8fb9\u90e8\u5206\u4e0d\u80fd\u88ab\u8fd9\u675f\u5149\u7167\u5230\u3002\n  \n3. \u5bf9\u4e8e\u4ece\u53f3\u4e0a\u65b9\u5411\u5c04\u6765\u7684\u5149\u7ebf\uff0c\u5904\u7406\u65b9\u6cd5\u548c\u4ece\u53f3\u4e0b\u65b9\u5411\u5c04\u6765\u7684\u5149\u7ebf\u7c7b\u4f3c\u3002\n\n\u5bf9\u4e8e\u524d\u9762\u7684\u989c\u8272\uff0c\u5904\u7406\u65b9\u6cd5\u548c\u53f3\u9762\u7684\u989c\u8272\u7c7b\u4f3c\u3002\n\n\u81f3\u4e8e\u8f93\u51fa\u7684\u8bdd\u5176\u5b9e\u5c31\u662f\u8fd9\u9053\u9898[P1058](https://www.luogu.org/problemnew/show/P1058)\u3002\n\n\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nchar base[20][20]={\"\",\n\"\\0    +-------+\",\n\"\\0   /4\\\\1111\\'/|\",\n\"\\0  /44.*\\'22/1|\",\n\"\\0 /.3333\\\\2/1/|\",\n\"\\0+-------+1.2|\",\n\"\\0|\\\\11111/|\\\\:2|\",\n\"\\0|4\\\\111/2|4*2|\",\n\"\\0|44\\\\1/22|4:\\\\|\",\n\"\\0|444X222|4\\'3+\",\n\"\\0|44/3\\\\22|/3/ \",\n\"\\0|4/333\\\\2|3/  \",\n\"\\0|/33333\\\\|/   \",\n\"\\0+-------+    \"};\nconst int baseh=13;\nchar ans[5001][5001];int cnt[101][101];int n,m;int ansh,answ;\nchar getcube[20][20];\ninline void setit(int startx,int starty){for(int i=13,x=startx;i>=1;i--,x--) for(int j=1,y=starty;j<=13;j++,y++) if(getcube[i][j]!=' ') ans[x][y]=getcube[i][j];}\nstruct Col\n{\n\tbool R,B,G;Col(){R=B=G=0;}Col(char c){R=B=G=0;if(c=='R')R=1;if(c=='B') B=1;if(c=='G')G=1;}\n\tinline char getcol()\n\t{\n\t\tif(R==0&&B==0&&G==0) return 'K';if(R==0&&B==0&&G==1) return 'G';\n\t\tif(R==0&&B==1&&G==0) return 'B';if(R==0&&B==1&&G==1) return 'C';\n\t\tif(R==1&&B==0&&G==0) return 'R';if(R==1&&B==0&&G==1) return 'Y';\n\t\tif(R==1&&B==1&&G==0) return 'P';if(R==1&&B==1&&G==1) return 'W';\n\t\tassert(0);return '\\0';\n\t}\n};\ninline Col operator +(const Col &a,const Col &b){Col res;res.R=a.R||b.R;res.B=a.B||b.B;res.G=a.G||b.G;return res;}\ninline void Add(Col &a,char c){a=a+Col(c);}\n//\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u6837\u5b9a\u4e49\u53ef\u4ee5\u65b9\u4fbf\u5904\u7406\u989c\u8272\u91cd\u53e0\u7684\u95ee\u9898\nchar light[4][4];\nstruct Block\n{\n\tCol Ul,Ur,Uf,Ub;\n\tCol Fu,Fd,Fl,Fr;\n\tCol Ru,Rd,Rf,Rb;\n\tinline void Getcube()\n\t{\n\t\tfor(int i=1;i<=baseh;i++) for(int j=1;j<=baseh;j++)\n\t\t{\n\t\t\tgetcube[i][j]=base[i][j];\n\t\t\tif(i>=6&&j<=9)\n\t\t\t{\n\t\t\t\tif(base[i][j]=='1') getcube[i][j]=Fu.getcol();\n\t\t\t\tif(base[i][j]=='2') getcube[i][j]=Fr.getcol();\n\t\t\t\tif(base[i][j]=='3') getcube[i][j]=Fd.getcol();\n\t\t\t\tif(base[i][j]=='4') getcube[i][j]=Fl.getcol();\n\t\t\t}\n\t\t\tif(i>=5&&j>9)\n\t\t\t{\n\t\t\t\tif(base[i][j]=='1') getcube[i][j]=Ru.getcol();\n\t\t\t\tif(base[i][j]=='2') getcube[i][j]=Rb.getcol();\n\t\t\t\tif(base[i][j]=='3') getcube[i][j]=Rd.getcol();\n\t\t\t\tif(base[i][j]=='4') getcube[i][j]=Rf.getcol();\n\t\t\t}\n\t\t\tif(i<5)\n\t\t\t{\n\t\t\t\tif(base[i][j]=='1') getcube[i][j]=Ub.getcol();\n\t\t\t\tif(base[i][j]=='2') getcube[i][j]=Ur.getcol();\n\t\t\t\tif(base[i][j]=='3') getcube[i][j]=Uf.getcol();\n\t\t\t\tif(base[i][j]=='4') getcube[i][j]=Ul.getcol();\n\t\t\t}\n\t\t}\n\t\tgetcube[3][12]=Ru.getcol();\n\t\tgetcube[4][11]=Ru.getcol();\n\t}//\u5c06\u8fd9\u4e2a\u7acb\u65b9\u4f53\u7684\u5b9e\u9645\u8f93\u51fa\u653e\u5230getcube[][]\u5b57\u7b26\u6570\u7ec4\u4e2d\n}a[101][101][101];\ninline void SolveUpColor()\n{\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++)\n\t{\n\t\tint high=cnt[i][j];\n\t\ta[i][j][high].Ub=a[i][j][high].Uf=a[i][j][high].Ul=a[i][j][high].Ur=Col(light[2][2]);\n\t\t//light from up\n\t\tbool flag1=1,flag2=1;//flag1:left front,flag2:right back\n\t\tint curx=i-1,cury=j-1,curcnt=1;\n\t\twhile(curx&&cury&&flag1){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=flag2=0;curx--;cury--;curcnt++;}\n\t\tcurx=i;cury=j-1;curcnt=1;\n\t\twhile(flag1&&curx&&cury){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;curx--;cury--;curcnt++;}\n\t\tcurx=i-1;cury=j;curcnt=1;\n\t\twhile(flag2&&curx&&cury){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag2=0;curx--;cury--;curcnt++;}\n\t\tif(flag1) Add(a[i][j][high].Ul,light[1][1]),Add(a[i][j][high].Uf,light[1][1]);\n\t\tif(flag2) Add(a[i][j][high].Ub,light[1][1]),Add(a[i][j][high].Ur,light[1][1]);\n\t\t//light from left back\n\t\tflag1=1;curx=i-1;cury=j;curcnt=1;\n\t\twhile(flag1&&curx){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;curx--;curcnt++;}\n\t\tif(flag1)\n\t\t{\n\t\t\tAdd(a[i][j][high].Ul,light[1][2]),Add(a[i][j][high].Uf,light[1][2]);\n\t\t\tAdd(a[i][j][high].Ub,light[1][2]),Add(a[i][j][high].Ur,light[1][2]);\n\t\t}\n\t\t//light from back\n\t\tflag1=flag2=1;curx=i-1,cury=j+1;curcnt=1;//flag1:left back,flag2:right front\n\t\twhile(flag1&&curx&&cury<=m){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=flag2=0;curx--;cury++;curcnt++;}\n\t\tcurx=i-1,cury=j;curcnt=1;\n\t\twhile(flag1&&curx&&cury<=m){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;curx--;cury++;curcnt++;}\n\t\tcurx=i;cury=j+1;curcnt=1;\n\t\twhile(flag2&&curx&&cury<=m){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag2=0;curx--;cury++;curcnt++;}\n\t\tif(flag1) Add(a[i][j][high].Ul,light[1][3]),Add(a[i][j][high].Ub,light[1][3]);\n\t\tif(flag2) Add(a[i][j][high].Uf,light[1][3]),Add(a[i][j][high].Ur,light[1][3]);\n\t\t//light from right back\n\t\tflag1=1;curx=i;cury=j-1;curcnt=1;\n\t\twhile(flag1&&cury){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;cury--;curcnt++;}\n\t\tif(flag1)\n\t\t{\n\t\t\tAdd(a[i][j][high].Ul,light[2][1]),Add(a[i][j][high].Uf,light[2][1]);\n\t\t\tAdd(a[i][j][high].Ub,light[2][1]),Add(a[i][j][high].Ur,light[2][1]);\n\t\t}\n\t\t//light from left\n\t\tflag1=1;curx=i;cury=j+1;curcnt=1;\n\t\twhile(flag1&&cury<=m){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;cury++;curcnt++;}\n\t\tif(flag1)\n\t\t{\n\t\t\tAdd(a[i][j][high].Ul,light[2][3]),Add(a[i][j][high].Uf,light[2][3]);\n\t\t\tAdd(a[i][j][high].Ub,light[2][3]),Add(a[i][j][high].Ur,light[2][3]);\n\t\t}\n\t\t//light from right\n\t\tflag1=flag2=1;curx=i+1;cury=j-1;curcnt=1;//flag1:left back,flag2:right front\n\t\twhile(flag1&&curx<=n&&cury){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=flag2=0;curx++;cury--;curcnt++;}\n\t\tcurx=i;cury=j-1;curcnt=1;\n\t\twhile(flag1&&curx<=n&&cury){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;curx++;cury--;curcnt++;}\n\t\tcurx=i+1;cury=j;curcnt=1;\n\t\twhile(flag2&&curx<=n&&cury){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag2=0;curx++;cury--;curcnt++;}\n\t\tif(flag1) Add(a[i][j][high].Ul,light[3][1]),Add(a[i][j][high].Ub,light[3][1]);\n\t\tif(flag2) Add(a[i][j][high].Uf,light[3][1]),Add(a[i][j][high].Ur,light[3][1]);\n\t\t//light from left front\n\t\tflag1=1;curx=i+1;cury=j;curcnt=1;\n\t\twhile(flag1&&curx<=n){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;curx++;curcnt++;}\n\t\tif(flag1)\n\t\t{\n\t\t\tAdd(a[i][j][high].Ul,light[3][2]),Add(a[i][j][high].Uf,light[3][2]);\n\t\t\tAdd(a[i][j][high].Ub,light[3][2]),Add(a[i][j][high].Ur,light[3][2]);\n\t\t}\n\t\t//light from front\n\t\tflag1=flag2=1;curx=i+1;cury=j+1;curcnt=1;//flag1:left front,flag2:right back\n\t\twhile(flag1&&curx<=n&&cury<=m){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=flag2=0;curx++;cury++;curcnt++;}\n\t\tcurx=i+1;cury=j;curcnt=1;\n\t\twhile(flag1&&curx<=n&&cury<=m){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag1=0;curx++;cury++;curcnt++;}\n\t\tcurx=i;cury=j+1;curcnt=1;\n\t\twhile(flag2&&curx<=n&&cury<=m){if(cnt[curx][cury]-cnt[i][j]>=curcnt) flag2=0;curx++;cury++;curcnt++;}\n\t\tif(flag1) Add(a[i][j][high].Ul,light[3][3]),Add(a[i][j][high].Uf,light[3][3]);\n\t\tif(flag2) Add(a[i][j][high].Ur,light[3][3]),Add(a[i][j][high].Ub,light[3][3]);\n\t\t//light from right front\n\t}\n}//\u5904\u7406\u9876\u9762\u7684\u989c\u8272\ninline void SolveRightColor()\n{\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) for(int high=1;high<=cnt[i][j];high++)\n\t{\n\t\tif(j<m&&cnt[i][j+1]>=cnt[i][j]) continue;\n\t\tint flag1,flag2;int curx,cury,curhigh;\n\t\tflag1=1;curx=i;cury=j+1;curhigh=high;\n\t\twhile(flag1&&cury<=m){if(cnt[curx][cury]>=curhigh) flag1=0;cury++;curhigh++;}\n\t\tif(flag1)\n\t\t{\n\t\t\tAdd(a[i][j][high].Rb,light[2][3]);Add(a[i][j][high].Rd,light[2][3]);\n\t\t\tAdd(a[i][j][high].Rf,light[2][3]);Add(a[i][j][high].Ru,light[2][3]);\n\t\t}\n\t\t//light from right\n\t\tflag1=flag2=1;curx=i+1;cury=j+2;curhigh=high+1;//flag1:up back,flag2:front down\n\t\twhile(flag1&&curx<=n&&cury<=m){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx++;cury++;curhigh++;}\n\t\tcurx=i+1;cury=j+1;curhigh=high+1;\n\t\twhile(flag1&&curx<=n&&cury<=m){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx++;cury++;curhigh++;}\n\t\tcurx=i+1;cury=j+1;curhigh=high;\n\t\twhile(flag2&&curx<=n&&cury<=m){if(cnt[curx][cury]>=curhigh) flag2=0;curx++;cury++;curhigh++;}\n\t\tif(flag1) Add(a[i][j][high].Ru,light[3][3]),Add(a[i][j][high].Rb,light[3][3]);\n\t\tif(flag2) Add(a[i][j][high].Rf,light[3][3]),Add(a[i][j][high].Rd,light[3][3]);\n\t\t//light from right front\n\t\tflag1=flag2=1;curx=i-1;cury=j+2;curhigh=high+1;//flag1:up front,flag2:down back\n\t\twhile(flag1&&curx&&cury<=m){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx--;cury++;curhigh++;}\n\t\tcurx=i-1;cury=j+1;curhigh=high+1;\n\t\twhile(flag1&&curx&&cury<=m){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx--;cury++;curhigh++;}\n\t\tcurx=i-1;cury=j+1;curhigh=high;\n\t\twhile(flag2&&curx&&cury<=m){if(cnt[curx][cury]>=curhigh) flag2=0;curx--;cury++;curhigh++;}\n\t\tif(flag1) Add(a[i][j][high].Ru,light[1][3]),Add(a[i][j][high].Rf,light[1][3]);\n\t\tif(flag2) Add(a[i][j][high].Rd,light[1][3]),Add(a[i][j][high].Rb,light[1][3]);\n\t\t//light from right back\n\t}\n}//\u5904\u7406\u53f3\u9762\u7684\u989c\u8272\ninline void SolveFrontColor(){\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) for(int high=1;high<=cnt[i][j];high++)\n\t{\n\t\tif(i<n&&cnt[i+1][j]>=cnt[i][j]) continue;\n\t\tint flag1,flag2,curx,cury,curhigh;\n\t\tflag1=1;curx=i+2;cury=j;curhigh=high+1;\n\t\twhile(flag1&&curx<=n){if(cnt[curx][cury]>=curhigh) flag1=0;curx++;curhigh++;}\n\t\tif(flag1)\n\t\t{\n\t\t\tAdd(a[i][j][high].Fd,light[3][2]);Add(a[i][j][high].Fl,light[3][2]);\n\t\t\tAdd(a[i][j][high].Fr,light[3][2]);Add(a[i][j][high].Fu,light[3][2]);\n\t\t}\n\t\t//light from front\n\t\tflag1=flag2=1;curx=i+1;cury=j+1;curhigh=high+1;//flag1:left up,flag2:right down\n\t\twhile(flag1&&curx<=n&&cury<=m){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx++;cury++;curhigh++;}\n\t\tcurx=i+2;cury=j+1;curhigh=high+1;\n\t\twhile(flag1&&curx<=n&&cury<=m){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx++;cury++;curhigh++;}\n\t\tcurx=i+1;cury=j+1;curhigh=high;\n\t\twhile(flag2&&curx<=n&&cury<=m){if(cnt[curx][cury]>=curhigh) flag2=0;curx++;cury++;curhigh++;}\n\t\tif(flag1) Add(a[i][j][high].Fl,light[3][3]),Add(a[i][j][high].Fu,light[3][3]);\n\t\tif(flag2) Add(a[i][j][high].Fr,light[3][3]),Add(a[i][j][high].Fd,light[3][3]);\n\t\t//light from right front\n\t\tflag1=flag2=1;curx=i+1;cury=j-1;curhigh=high+1;//flag1:right up,flag2:left down\n\t\twhile(flag1&&curx<=n&&cury){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx++;cury--;curhigh++;}\n\t\tcurx=i+2;cury=j-1;curhigh=high+1;\n\t\twhile(flag1&&curx<=n&&cury){if(cnt[curx][cury]>=curhigh) flag1=flag2=0;curx++;cury--;curhigh++;}\n\t\tcurx=i+1;cury=j-1;curhigh=high;\n\t\twhile(flag2&&curx<=n&&cury){if(cnt[curx][cury]>=curhigh) flag2=0;curx++;cury--;curhigh++;}\n\t\tif(flag1) Add(a[i][j][high].Fr,light[3][1]),Add(a[i][j][high].Fu,light[3][1]);\n\t\tif(flag2) Add(a[i][j][high].Fl,light[3][1]),Add(a[i][j][high].Fd,light[3][1]);\n\t\t//light from left front\n\t}\n}//\u5904\u7406\u524d\u9762\u7684\u989c\u8272\ninline void print()\n{\n\tansh=0;answ=1+m*8+n*4;\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) ansh=max(ansh,1+4*(n-i+1)+8*cnt[i][j]);\n\tfor(int i=1;i<=ansh;i++) for(int j=1;j<=answ;j++) ans[i][j]=' ';\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) for(int k=1;k<=cnt[i][j];k++)\n\t{\n\t\tint getx=ansh-4*(n-i)-8*(k-1),gety=1+(j-1)*8+(n-i)*4;\n\t\ta[i][j][k].Getcube();\n\t\tsetit(getx,gety);\n\t}\n\tfor(int i=1;i<=ansh;i++)\n\t{\n\t\tfor(int j=1;j<=answ;j++) putchar(ans[i][j]);\n\t\tputchar('\\n');\n\t}\n}//\u8f93\u51fa\u4e0d\u89e3\u91ca\u4e86\ninline void init()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++) for(int j=1;j<=m;j++) scanf(\"%d\",&cnt[i][j]);\n\tfor(int i=1;i<=3;i++) for(int j=1;j<=3;j++) cin>>light[i][j];\n}\nint main()\n{\n\tinit();\n\tSolveUpColor();\n\tSolveRightColor();\n\tSolveFrontColor();\n\tprint();\n\treturn 0;\n}\n```\n\n\u672c\u9898\u5728\u7701\u9009\u5f53\u4e2d\u51fa\u73b0\uff0c\u8fd8\u662f\u6bd4\u8f83\u53ef\u505a\u7684\uff0c\u6bd5\u7adf\u7701\u9009\u6709$5$\u4e2a\u5c0f\u65f6\u3002\n\n~~\u53cd\u6b63ZJOI\u8003\u573a\u4e0a\u9047\u5230\u8fd9\u9898\u6211\u5c31\u5934\u94c1\u521a~~",
        "postTime": 1539516439,
        "uid": 84419,
        "name": "daifucong",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P3326 \u3010[SDOI2015]\u7acb\u4f53\u56fe\u3011"
    },
    {
        "content": "## \u300cSDOI2015\u300d\u7acb\u4f53\u56fe \u9898\u89e3\n\n>  \u5c0f\u6a21\u62df\uff0c\u5199\u7bc7\u9898\u89e3 ~~\u9020\u798f\u540e\u4eba~~ \u8bb0\u5f55\u4e00\u4e0b\u3002\n\n>  \u56e0\u4e3a\u6211\u4e0d\u559c\u6b22\u5f88\u957f\u7684\u4ee3\u7801\uff0c\u6240\u4ee5\u6211\u7528\u6295\u5f71\u6cd5\u505a\u7684\u8fd9\u9898\uff0c**\u4ee3\u7801\u4ec5\u6709 3.14k**\uff0c\u662f\u76ee\u524d\u6700\u77ed\u7684\u4e86\u3002\n\n> Mouther\uff1a\u4e3a\u4ec0\u4e48\u753b\u7684\u56fe\u90a3\u4e48\u4e11\uff1f\n>\n> Acc\uff1a\u4f60\u95ee Ubuntu \u53bb\u3002\n\n> Mouther\uff1aMouther \u662f\u4ec0\u4e48\u610f\u601d\uff1f\n>\n> Acc\uff1a\u5634\u5b50\u3002\n\n## \u9898\u89e3\n\n### \u5efa\u7acb\u5750\u6807\u7cfb\n\n\u8fd9\u9898\u91cc\u4e09\u7ef4\u5750\u6807\u7cfb\u5f88\u522b\u626d\uff0c\u8981\u4ece\u540e\u5411\u524d\u3001\u4ece\u5de6\u5f80\u53f3\u3001\u81ea\u4e0b\u800c\u4e0a\u5efa\u7acb\uff0c\u753b\u51fa\u6765\u5c31\u662f\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lrpee18f.png)\n\n### \u6295\u5f71\n\n\u7b80\u5355\u6765\u8bb2\uff0c\u6295\u5f71\u5c31\u662f\u628a\u4e09\u7ef4\u5750\u6807\u7cfb\u62cd\u6241\u5230\u4e00\u4e2a\u4e0e\u89c6\u89d2\u5782\u76f4\u7684\u5e73\u9762\u4e0a\uff0c\u4e5f\u5373\u5bf9\u5750\u6807\u7684\u67d0\u79cd\u53d8\u6362\uff0c\u90fd\u662f\u7c7b\u4f3c\u4e8e $(x,y,z)\\to (u,v)$\u200b\u200b\u200b \uff0c\u5176\u4e2d $u,v$\u200b \u662f\u5173\u4e8e $x,y,z$\u200b \u7684**\u7ebf\u6027\u7ec4\u5408**\u3002\n\n> Mouther\uff1a\u4e3a\u4ec0\u4e48\u662f\u7ebf\u6027\u7ec4\u5408\uff1f\n>\n> Acc\uff1a\u4eb2\uff0c\u5149\u7ebf\u662f\u4e0d\u80fd\u62d0\u5f2f\u7684\u3002\n\n> Mouther\uff1a\u82e5\u4e24\u4e2a\u70b9 $(x_1,y_1,z_1),(x_2,y_2,z_2)$ \u5728\u53d8\u6362\u540e\u5206\u522b\u5bf9\u5e94 $(u_1,v_1),(u_2,v_2)$ \uff0c\u4f46 $u_1=u_2,v_1=v_2$ \uff0c\u90a3\u4e48\u8c01\u624d\u5e94\u8be5\u5360\u636e\u8fd9\u4e2a\u4f4d\u7f6e\uff1f\n>\n> Acc\uff1a\u901a\u8fc7\u5e38\u8bc6\u5224\u65ad\uff0c\u6211\u4eec\u9700\u8981\u8ba9\u201c\u79bb\u89c6\u89d2\u66f4\u8fd1\u201d\u7684\u90a3\u4e2a\u70b9\u53bb\u5360\u636e\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u6309\u7167\u4ece\u8fdc\u5230\u8fd1\u7684\u987a\u5e8f\u4f9d\u6b21\u6267\u884c\u53d8\u6362\uff0c\u65b0\u6765\u7684\u70b9\u76f4\u63a5**\u8986\u76d6**\u4e4b\u524d\u7684\u70b9\uff0c\u8fd9\u6837\u5c31\u80fd\u4fdd\u8bc1\u53d8\u6362\u540e\u5750\u6807\u76f8\u540c\u7684\u70b9\u4e00\u5b9a\u662f\u7531\u6700\u665a\uff08\u79bb\u89c6\u89d2\u6700\u8fd1\uff09\u7684\u70b9\u5360\u636e\u3002\n\n> Mouther\uff1a\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u7684\u539f\u70b9\u3001\u6b63\u65b9\u5411\u5982\u4f55\u9009\u62e9\uff1f\n>\n> Acc\uff1a\u4e3a\u4e86\u5c3d\u91cf\u7b80\u5316\uff0c\u6211\u4eec\u76f4\u63a5\u9009\u62e9\u539f\u5750\u6807\u7cfb\u7684\u539f\u70b9\u3001$x$\u200b \u8f74\u548c$y$\u200b \u8f74\u5206\u522b\u4f5c\u4e3a\u65b0\u5750\u6807\u7cfb\u7684\u539f\u70b9\u3001$x$\u200b \u8f74\u4ee5\u53ca$y$\u200b\u200b \u8f74\u3002\n\n\u6211\u4eec\u5148\u4ece\u6700\u7b80\u5355\u7684\u89c6\u89d2\u5f00\u59cb\uff1a\n\n#### \u6b63\u4e0a\u65b9\n\n\u5f88\u7b80\u5355\uff0c$(x,y,z)\\to (x,y)$\u3002\n\n #### \u6b63\u5357\u65b9 $45\u00b0$ \u4ef0\u89d2\uff08\u524d\u65b9\uff09\n\n\u5728\u8fd9\u4e2a\u89c6\u89d2\u4e0b\uff0c\u4f60\u770b\u5230\u7684\u5750\u6807\u7cfb\u957f\u8fd9\u4e2a\u6837\u5b50\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/foy3q7zt.png)\n\n\u9ed1\u8272\u7684 $OXYZ$ \u662f\u4e09\u7ef4\u5750\u6807\u7cfb\uff0c\u7ea2\u8272\u7684 $\\color{red}{OUV}$\u662f\u9700\u8981\u6295\u5f71\u7684\u4e8c\u7ef4\u5750\u6807\u7cfb\u3002\u4ed6\u4eec\u7684\u539f\u70b9\u91cd\u5408\uff0c\u8fd9\u91cc\u9519\u5f00\u662f\u4e3a\u4e86\u533a\u5206\u3002\n\n\u90a3\u4e48\u6ce8\u610f\u5230 $y$ \u8fd9\u4e00\u7ef4\u4e0e\u5176\u5b83\u7ef4\u5ea6\u65e0\u5173\uff0c\u5373 $v=y$ \u3002\u800c\u89c2\u5bdf\u5230 $x$ \u8d8a\u5927\u3001$z$ \u8d8a\u5c0f\u4f1a\u5bfc\u81f4 $u$ \u8d8a\u5927\uff0c\u5f97\u51fa $u=x-z$\u200b\u200b\u3002\n\n> Mouther\uff1a\u4e3a\u4ec0\u4e48\u7cfb\u6570\u662f $1$ \u548c $-1$\uff1f\n>\n> Acc\uff1a\u4e8b\u5b9e\u4e0a\u53ea\u8981\u4fdd\u8bc1 $x$ \u7684\u7cfb\u6570\u4e0e $z$ \u7684\u7cfb\u6570\u6bd4\u4f8b\u662f $1:-1$ \u5c31\u884c\u3002\n\n\u73b0\u5728\u5bf9\u4e8e\u4e00\u4e2a\u6295\u5f71\u5230\u65b0\u5750\u6807\u7cfb\u4e0a\u7684\u7acb\u65b9\u4f53 $(u,v)$ \u6765\u8bf4\uff0c\u5b83\u53ef\u80fd\u88ab\u53e6\u4e00\u4e2a\u7acb\u65b9\u4f53 $(u',v')$ \u8986\u76d6\uff08\u5b8c\u5168\u906e\u6321\uff09\u3001\u906e\u6321\u4f4f\u4e0a\u9762 \u6216\u8005 \u906e\u6321\u4f4f\u6b63\u9762\u3002\n\n- \u88ab\u8986\u76d6\uff1a$(u',v')=(u,v)$ \n- \u88ab\u906e\u6321\u4e0a\u9762\uff1a$(u',v')=(u-1,v)$\n- \u88ab\u906e\u6321\u6b63\u9762\uff1a$(u',v')=(u+1,v)$\n\n\u540c\u7406\uff0c\u6211\u4eec\u80fd\u8f7b\u677e\u5f97\u5230\u5269\u4f59\u4e09\u4e2a\u6b63\u65b9\u5411\u7684\u53d8\u6362\u4ee5\u53ca\u906e\u6321\u5173\u7cfb\uff08\u7701\u7565\u8986\u76d6\u7684\u60c5\u51b5\uff09\u3002\n\n#### \u6b63\u5317\u65b9 $45\u00b0$ \u4ef0\u89d2\uff08\u540e\u65b9\uff09\n\n$(x,y,z)\\to (x+z,y)$\n\n- \u88ab\u906e\u6321\u4e0a\u9762\uff1a$(u',v')=(u+1,v)$\n\n> Mouther\uff1a\u4e3a\u4ec0\u4e48\u6ca1\u6709\u8ba8\u8bba\u88ab\u906e\u6321\u540e\u9762\u7684\u60c5\u51b5\uff1f\n>\n> Acc\uff1a\u5728\u8f93\u51fa\u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6b63\u9762\u3001\u4e0a\u9762\u548c\u53f3\u9762\u7684\u4fe1\u606f\u5c31\u591f\u4e86\uff0c\u5176\u5b83\u7684\u9762\u4e0d\u9700\u8981\u5904\u7406\uff0c\u5728\u4e4b\u540e\u4e5f\u90fd\u53ea\u8ba8\u8bba\u8fd9\u4e09\u4e2a\u9762\u3002\n\n#### \u6b63\u897f\u65b9 $45\u00b0$ \u4ef0\u89d2\uff08\u5de6\u65b9\uff09\n\n$(x,y,z)\\to (x,y+z)$\u200b\n\n- \u88ab\u906e\u6321\u4e0a\u9762\uff1a$(u',v')=(u,v+1)$\n\n#### \u6b63\u4e1c\u65b9 $45\u00b0$ \u4ef0\u89d2\uff08\u53f3\u65b9\uff09\n\n$(x,y,z)\\to (x,y-z)$\n\n- \u88ab\u906e\u6321\u4e0a\u9762\uff1a$(u',v')=(u,v-1)$\n- \u88ab\u906e\u6321\u53f3\u9762\uff1a$(u',v')=(u,v+1)$\n\n\u597d\u4e86\uff0c\u5269\u4e0b\u56db\u4e2a\u9ebb\u70e6\u7684\u65b9\u5411\uff0c\u6211\u4eec\u5148\u8ba8\u8bba\u6700\u76f4\u89c2\u7684\n\n#### \u4e1c\u5357\u65b9 $45\u00b0$ \u4ef0\u89d2\uff08\u53f3\u524d\u65b9\uff09\n\n\u5750\u6807\u7cfb\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t06ql5f1.png)\n\n\u73b0\u5728\u6709\u4e00\u4e2a\u53ef\u7231\u7684\u84dd\u8272\u65b9\u5757\u4f4d\u4e8e $(x,y,z),\\color{red}{(u,v)}$\u200b\uff08\u9009\u5b9a\u90a3\u4e2a\u7ea2\u8272\u7684\u70b9\u4f5c\u4e3a\u8fd9\u4e2a\u65b9\u5757\u7684\u57fa\u51c6\u70b9\uff09\u3002\n\n\u53d1\u73b0\u968f\u7740 $z$ \u7684\u589e\u5927\uff0c$u$ \u548c $v$\u200b \u200b\u200b\u90fd\u4f1a\u51cf\u5c0f\uff0c\u4e8e\u662f\u5f97\u5230\u6b64\u89c6\u89d2\u4e0b\u7684\u53d8\u6362\uff1a $(x,y,z)\\to (x-z,y-z)$\u3002\n\n- \u88ab\u906e\u6321\u6b63\u9762\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/526uw97z.png)\n\n\u6b64\u523b\u9ec4\u8272\u65b9\u5757\u906e\u6321\u4f4f\u4e86\u84dd\u8272\u65b9\u5757\u7684\u6b63\u9762\uff0c\u5b83\u4f4d\u4e8e\u65b0\u5750\u6807\u7cfb\u7684 $(u+1,v)$\uff08\u6cbf\u7740\u6a59\u8272\u7bad\u5934\u7684\u65b9\u5411\u5c31\u662f $u$ \u7684\u6b63\u65b9\u5411\uff09\u200b\u3002\n\n- \u88ab\u906e\u6321\u53f3\u9762\n\n\u4e0e\u4e0a\u4e00\u79cd\u60c5\u51b5\u57fa\u672c\u540c\u7406\uff0c\u5f97\u5230 $(u',v')=(u,v+1)$\u3002\n\n- \u88ab\u906e\u6321\u4e0a\u9762\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jl9x6yuj.png)\n\n\u6a59\u8272\u7bad\u5934\u662f $U$\u200b \u8f74\u8d1f\u65b9\u5411\uff0c\u7d2b\u8272\u7bad\u5934\u662f $V$\u200b\u200b\u200b \u8f74\u8d1f\u65b9\u5411\uff0c\u5f97\u5230 $(u',v')=(u-1,v-1)$\u3002\n\n\u7136\u540e\u5c31\u662f\u51e0\u79cd\u4e0d\u5b8c\u5168\u906e\u6321\uff0c\u56e0\u6b64\u6211\u4eec\u628a\u6b63\u65b9\u4f53\u7684\u4e00\u4e2a\u9762\u62c6\u5206\u6210\u56db\u90e8\u5206\uff0c\u5206\u522b\u6807\u53f7 $0,1,2,3$\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/75v4725y.png)\n\n- \u906e\u6321\u4e0a\u9762 $23$\uff0c\u906e\u6321\u53f3\u9762 $23$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4000isf5.png)\n\n$(u',v')=(u-1,v)$\n\n- \u906e\u6321\u4e0a\u9762 $01$\uff0c\u6b63\u9762 $12$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0a5cpzg6.png)\n\n$(u',v')=(u,v-1)$\n\n- \u906e\u6321\u6b63\u9762 $03$\uff0c\u53f3\u9762 $12$\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/tfx20zfs.png)\n\n$(u',v')=(u+1,v+1)$\n\n\u597d\u4e86\uff0c\u8fd9\u4e00\u4e2a\u89c6\u89d2\u5df2\u7ecf\u8ba8\u8bba\u5b8c\u4e86\uff0c\u4f60\u662f\u4e0d\u662f\u5df2\u7ecf\u9ebb\u4e86\u5462\uff1f\n\n\u540c\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u6162\u6162\u8ba8\u8bba\u5269\u4e0b\u4e09\u4e2a\u89c6\u89d2\uff0c\u76f8\u4fe1\u4f60\u53ef\u4ee5\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8d58\u8ff0\u4e86\u3002\n\n### \u5b9e\u73b0\n\n> Mouther\uff1a\u4e5d\u4e2a\u65b9\u5411\u4f60\u8981\u4e00\u4e2a\u4e00\u4e2a\u53bb\u6572\u5417\uff1f\n>\n> Acc\uff1aNO\uff0c\u6211\u4eec\u6709\u8111\u5b50\u3002\n\n#### \u989c\u8272\u7c7b `col`\n\n\u9996\u5148\uff0c\u5404\u79cd\u989c\u8272\u7684\u8986\u76d6\u5173\u7cfb\u5f88\u96be\u7528\u666e\u901a\u7684\u8fd0\u7b97\u6765\u5904\u7406\uff0c\u56e0\u6b64\u8fd9\u91cc\u9009\u62e9\u4f4d\u8fd0\u7b97\uff08\u72b6\u538b\uff09\u3002\n\n\u90a3\u4e48\u989c\u8272\u76f8\u52a0\u5c31\u53ef\u4ee5\u7528\u6216\u8fd0\u7b97\u6765\u89e3\u51b3\uff0c\u800c\u53bb\u6389\u4e00\u79cd\u989c\u8272\u53ef\u4ee5\u901a\u8fc7\u4e0e\u975e\uff0c\u4ee3\u7801\u4e2d\u5b9e\u73b0\u4e86\u91cd\u8f7d\u8fd0\u7b97\u7b26 `+`\uff08\u989c\u8272\u7ed3\u5408\uff09\u3001`-`\uff08\u53bb\u6389\u67d0\u79cd\u989c\u8272\uff09\u3002\n\n#### \u65b9\u5757\u7c7b `cub`\n\n\u6bcf\u4e2a\u65b9\u5757\u9700\u8981\u5904\u7406\u4e09\u4e2a\u9762\uff0c\u6bcf\u4e2a\u9762\u88ab\u5206\u6210\u56db\u90e8\u5206\uff0c\u901a\u8fc7\u4e00\u4e2a $3\\times 4$ \u7684 `col` \u6570\u7ec4\u5c31\u884c\u3002\n\n`void pt(int d,col x)`\u8868\u793a\u4ece $d$ \u8fd9\u4e2a\u65b9\u5411\u53bb\u6389 $x$ \u8fd9\u79cd\u989c\u8272\u3002\n\n`+=` \u662f\u5c06\u4e24\u4e2a\u65b9\u5757\u6bcf\u4e2a\u9762\u5206\u522b\u76f8\u52a0\u3002\n\n`void pnt(int x,int y,int z)` \u7684\u4f5c\u7528\u662f\u5c06\u7ed3\u679c\u8f93\u51fa\u5230\u753b\u5e03\u4e0a\u3002\n\n#### \u6295\u5f71\u7c7b `Ray`\n\n\u5c31\u662f\u4e00\u4e2a\u5e73\u9762\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u8bb0\u5f55\u8fd9\u91cc\u662f\u7531\u539f\u56fe\u4e2d\u90a3\u4e2a\u65b9\u5757\u6295\u5f71\u800c\u6765\u3002\n\n\u4e3a\u4e86\u80fd\u591f\u8bbf\u95ee\u8d1f\u6570\u4e0b\u6807\uff0c\u6211\u4f7f\u7528\u6307\u9488\u8fdb\u884c\u4e86\u5e73\u79fb\u3002\n\n#### \u4ee3\u7801\u7b80\u5316\n\n\u4ece\u8fd9\u4e5d\u79cd\u60c5\u51b5\u7684\u8ba8\u8bba\u4e2d\uff0c\u806a\u660e\u7684\u5c0f\u4f19\u4f34\uff08\u5c31\u662f\u4f60\uff09\u4e00\u5b9a\u53d1\u73b0\u4e86\u4e00\u4e9b\u89c4\u5f8b\uff1a\n\n\u5bf9\u4e8e\u53d8\u6362 $(x,y,z)\\to (x+k_1 z,y+k_2z),(k_1,k_2\\in\\{-1,1\\})$\u200b \uff0c$k_1,k_2$ \u53ef\u4e0d\u662f\u968f\u4fbf\u9009\u7684\uff0c\u5177\u4f53\u6765\u8bb2\u662f\u8fd9\u6837\u7684\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5fe951ms.png)\n\n\u6bcf\u4e2a\u683c\u5b50\u8868\u793a\u4e00\u4e2a\u65b9\u4f4d\u7684\u89c6\u89d2\u3002\n\n> Mouther\uff1a\u8fd9\u4e2a\u89c4\u5f8b\u6709\u4ec0\u4e48\u7528\u5462\uff1f\n>\n> Acc\uff1a\u7b80\u5316\u4ee3\u7801\uff0c\u4e5d\u4e2a\u60c5\u51b5\u7684\u5206\u7c7b\u8ba8\u8bba\u4e00\u4e2a\u5faa\u73af\u89e3\u51b3\u3002\n\n\u540c\u65f6\u6ce8\u610f\u5230\uff0c\u5bf9\u53d8\u6362 $(x,y,z)\\to (x+k_1 z,y+k_2z),(k_1,k_2\\in\\{-1,1\\})$\uff0c\u906e\u6321 $(u,v)$ \u4e0a\u9762\u7684\u65b9\u5757\u5c31\u662f $(u+k_1,v+k_2)$\u200b\uff0c\u53f3\u9762\u3002\u6b63\u9762\u4e5f\u6709\u7c7b\u4f3c\u7ed3\u8bba\u3002\u200b\n\n#### \u8f93\u51fa\n\n\u5f88\u7b80\u5355\uff0c\u5c31\u50cf\u90a3\u4e2a NOIP \u9898\u4e00\u6837\uff0c\u6309\u987a\u5e8f\u8f93\u51fa\u5230\u753b\u5e03\u4e0a\u5373\u53ef\u3002\n\n#### \u544a\u793a\n\n\u4e8b\u5b9e\u4e0a\u5b9e\u73b0\u7684\u7ec6\u8282\u5f88\u591a\u5f88\u591a\uff0c\u8fd9\u91cc\u4e0d\u4e00\u4e00\u5217\u4e3e\uff0c\u5982\u679c\u4f60\u771f\u7684\u4e0b\u5b9a\u51b3\u5fc3\u8981\u5199\u8fd9\u9053\u9898\uff0c\u76f8\u4fe1\u5b83\u4eec\u96be\u4e0d\u4f4f\u4f60\u3002\n\n## \u4ee3\u7801\n\n\u4f60\u4eec\u5c31\u60f3\u770b\u8fd9\u4e2a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nnamespace Acc{\n\tconst int N=109,M=209;\n\tchar val[]=\"KRGYBPCW\";\n\tchar o[15][15]={R\"(    +-------+)\",R\"(   /a\\bbbb'/|)\",R\"(  /aa.*'cc/j|)\",R\"( /.````\\c/j/|)\",R\"(+-------+j.k|)\",R\"(|\\fffff/|\\:k|)\",R\"(|e\\fff/g|i*k|)\",R\"(|ee\\f/gg|i:\\|)\",R\"(|eeeXggg|i'h+)\",R\"(|ee/d\\gg|/h/ )\",R\"(|e/ddd\\g|h/  )\",R\"(|/ddddd\\|/   )\",R\"(+-------+    )\"};\n\tstruct col{\n\t\tint x;\n\t\tcol(){x=0;}\n\t\tcol(char c){x=1<<(c=='R'?0:(c=='G'?1:2));}\n\t\tcol(int r,int g,int b){x=r<<0|g<<1|b<<2;}\n\t\tinline void operator+=(const col&_){x|=_.x;}\n\t\tinline void operator-=(const col&_){x&=~_.x;}\n\t}cur;\n\tchar Xr[3][4],ans[1250][1250];\n\tint n,m,G[N][N],L,T;\n\tinline void dn(int&x,int y){x=x>y?y:x;}\n\tinline void up(int&x,int y){x=x<y?y:x;}\n\tstruct cub{\n\t\tcol c[3][4];\n\t\tcub(col x=col()){for(int i=0;i<3;++i)for(int j=0;j<4;++j)c[i][j]=x;}\n\t\tinline void pt(int d,col x=cur){for(int i=0;i<4;++i)c[d][i]-=x;}\n\t\tinline void pt(int d,int a,int b,col x=cur){c[d][a]-=cur,c[d][b]-=x;}\n\t\tinline void operator+=(const cub&_){for(int i=0;i<3;++i)for(int j=0;j<4;++j)c[i][j]+=_.c[i][j];}\n\t\tvoid pnt(int x,int y,int z){\n\t\t\ty=4*x+8*y,up(L,x=4*x+8*z+12);\n\t\t\tint t,i,j;\n\t\t\tfor(i=0;i<13;++i)for(j=0;j<13;++j)if(o[i][j]>95&&o[i][j]<108)\n\t\t\t\tt=(o[i][j]>>2)&3,ans[x-i][y+j]=val[c[t][o[i][j]&3].x];\n\t\t\telse if(o[i][j]!=' ')ans[x-i][y+j]=o[i][j];\n\t\t}\n\t}a[N][N][N],b[N][N][N],now;\n\tstruct Ray{\n\t\tint x,y,z;\n\t\tRay(){x=y=z=-1;}\n\t\tRay(int a,int b,int c):x(a),y(b),z(c){}\n\t\tinline int operator~(){return ~x;}\n\t}f[M*2][M*2],*g[M*2],**mp;\n\tvoid work(){\n\t\tint i,j,k,H1=INT_MAX,H2=-H1,W1,W2,dx,dy,u,v,s1,t1,s2,t2,x,y,di,dj;\n\t\tfor(i=0;i<M*2;++i)g[i]=f[i]+M;\n\t\tfor(mp=g+M,cin>>n>>m,i=0;i<n;++i)for(j=0;j<m;++j)cin>>G[i][j];\n\t\tfor(i=0;i<3;++i)cin>>Xr[i];\n\t\tfor(u=0;u<3;++u)for(v=0;v<3;++v)if(Xr[u][v]!=42){\n\t\t\tdx=u?(u==1?0:-1):1,dy=v?(v==1?0:-1):1,di=dx?dx:1,dj=dy?dy:1;\n\t\t\tW2=H2=-(H1=W1=INT_MAX),s1=s2=0,t1=n,t2=m,now=cub(cur=col(Xr[u][v]));\n\t\t\tif(~dx)now.pt(1);if(~dy)now.pt(2);\n\t\t\tif(dx<0)s1=n-1,t1=-1;if(dy<0)s2=m-1,t2=-1;\n\t\t\tfor(i=s1;i!=t1;i+=di)for(j=s2;j!=t2;j+=dj)for(k=G[i][j]-1;~k;--k){\n\t\t\t\tif(~mp[x=i+k*dx][y=j+k*dy])continue;\n\t\t\t\tcub&p=b[i][j][k];p=now;\n\t\t\t\tif(~mp[x+dx][y+dy])p.pt(0);\n\t\t\t\tif(dx==-1 && ~mp[x+1][y])p.pt(1);\n\t\t\t\tif(dy==-1 && ~mp[x][y+1])p.pt(2);\n\t\t\t\tmp[x][y]=Ray(i,j,k),dn(H1,x),up(H2,x),dn(W1,y),up(W2,y);\n\t\t\t\tif(dx==-1 && dy==1){\n\t\t\t\t\tif(~mp[x-1][y])p.pt(0,1,2);\n\t\t\t\t\tif(~mp[x][y+1])p.pt(0,0,3),p.pt(1,2,3);\n\t\t\t\t\tif(~mp[x+1][y-1])p.pt(1,0,1);\n\t\t\t\t}else if(dx==1 && dy==-1){\n\t\t\t\t\tif(~mp[x][y-1])p.pt(0,1,2);\n\t\t\t\t\tif(~mp[x+1][y])p.pt(0,0,3),p.pt(2,1,2);\n\t\t\t\t\tif(~mp[x-1][y+1])p.pt(2,0,3);\n\t\t\t\t}else if(dx==1 && dy==1){\n\t\t\t\t\tif(~mp[x+1][y])p.pt(0,0,1);\n\t\t\t\t\tif(~mp[x][y+1])p.pt(0,2,3);\n\t\t\t\t}else if(dx==-1 && dy==-1){\n\t\t\t\t\tif(~mp[x-1][y])p.pt(0,2,3),p.pt(2,2,3);\n\t\t\t\t\tif(~mp[x][y-1])p.pt(0,0,1),p.pt(1,0,1);\n\t\t\t\t\tif(~mp[x+1][y+1])p.pt(1,0,3),p.pt(2,0,1);\n\t\t\t\t}\n\t\t\t\ta[i][j][k]+=b[i][j][k];\n\t\t\t}\n\t\t\tfor(i=H1;i<=H2;++i)for(j=W1;j<=W2;++j)if(~mp[i][j])mp[i][j]=Ray();\n\t\t}\n\t\tT=4*n+8*m;\n\t\tfor(i=0;i<n;++i)for(j=0;j<m;++j)for(k=0;k<G[i][j];++k)a[i][j][k].pnt(n-i-1,j,k);\n\t\tfor(i=L;~i;--i,putchar(10)){\n\t\t\tfor(k=T;~k;--k)if(ans[i][k])break;\n\t\t\tfor(j=0;j<=k;++j)putchar(ans[i][j]?ans[i][j]:32);\n\t\t}\n\t}\n}\nint main(){return Acc::work(),0;}\n```",
        "postTime": 1630303033,
        "uid": 383079,
        "name": "Acc_Robin",
        "ccfLevel": 6,
        "title": "\u300cSDOI2015\u300d\u7acb\u4f53\u56fe \u9898\u89e3"
    },
    {
        "content": "\u9898\u76ee\u7684\u6570\u636e\u8303\u56f4\u5f88\u5c0f\uff0c\u56e0\u6b64\u53ea\u9700\u6a21\u62df\u5373\u53ef\u3002\u5bf9\u4e8e\u4e00\u4e2a\u65b9\u5411\u7684\u5e73\u884c\u5149\uff0c\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u7acb\u65b9\u4f53\u6295\u5f71\u5230\u4e00\u4e2a\u5782\u76f4\u4e8e\u5149\u7ebf\u65b9\u5411\u7684\u5e73\u9762\u4e0a\uff0c\u7136\u540e\u5904\u7406\u7acb\u65b9\u4f53\u5728\u5e73\u9762\u4e0a\u7684\u8986\u76d6\u60c5\u51b5\uff0c\u8fdb\u800c\u8ba1\u7b97\u51fa\u7acb\u65b9\u4f53\u8868\u9762\u7684\u6bcf\u4e2a\u90e8\u5206\u4e0a\u6bcf\u79cd\u989c\u8272\u7684\u5149\u7167\u60c5\u51b5\u3002\u800c\u7acb\u65b9\u4f53\u5728\u5e73\u9762\u4e0a\u7684\u6295\u5f71\u53ef\u4ee5\u65b9\u4fbf\u7684\u7528\u5750\u6807\u53d8\u6362\u6765\u8868\u793a\u3002\n\n\n\u4ee5\u4ece\u53f3\u524d\u65b9\u5165\u5c04\u7684\u5149\u7ebf\u4e3a\u4f8b\uff0c\u5982\u679c\u6211\u4eec\u4ece\u540e\u5411\u524d\uff0c\u4ece\u5de6\u5411\u53f3\uff0c\u4ece\u4e0b\u5411\u4e0a\u5efa\u7acb\u4e09\u7ef4\u76f4\u89d2\u5750\u6807\u7cfb\u7684\u8bdd\uff0c\u5219\u53d8\u6362\n\n$$(x,y,z)\\to(x-z,y-z)$$\n\n\u53ef\u4ee5\u89c6\u4e3a\u5c06\u7acb\u65b9\u4f53\u6295\u5f71\u5230\u4e0e\u8be5\u65b9\u5411\u5149\u7ebf\u5782\u76f4\u7684\u4e00\u4e2a\u5e73\u9762\u7684\u4e00\u4e2a\u53d8\u6362\u3002\u800c\u4f4d\u4e8e $(u,v)$ \u7684\u7acb\u65b9\u4f53\u7684\u6295\u5f71\u6700\u591a\u4f1a\u88ab\u516d\u4e2a\u5176\u5b83\u6295\u5f71\u6240\u906e\u6321\uff1a\n\n$$\n\\begin{array}{c}\n(u-1,v)\\quad(u-1,v-1)\\quad(u,v-1)\\\\\n(u+1,v)\\quad(u+1,v+1)\\quad(u,v+1)\n\\end{array}\n$$\n\u53ea\u9700\u9010\u4e2a\u5224\u65ad\u5e76\u8bb0\u5f55\u906e\u6321\u72b6\u51b5\u5373\u53ef\u3002\n\n\n\u5bf9\u6bcf\u4e2a\u7acb\u65b9\u4f53\u8ba1\u7b97\u51fa\u5149\u7167\u60c5\u51b5\u540e\uff0c\u53ea\u9700\u5c06\u7acb\u65b9\u4f53\u4ece\u540e\u5411\u524d\uff0c\u4ece\u5de6\u5411\u53f3\uff0c\u4ece\u4e0b\u5411\u4e0a\u7684\u9010\u4e2a\u8f93\u51fa\u5230\u4e00\u4e2a\u865a\u62df\u753b\u5e03\u4e0a\uff0c\u518d\u5c06\u7b54\u6848\u4ece\u753b\u5e03\u8f93\u51fa\u5373\u53ef\u3002\n",
        "postTime": 1491968091,
        "uid": 26691,
        "name": "11Dimensions",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P3326 \u3010[SDOI2015]\u7acb\u4f53\u56fe\u3011"
    },
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a $m\\times n$ \u7684\u5e73\u9762\uff0c\u6bcf\u4e2a\u683c\u5b50\u4e0a\u6709 $h_{i.j}$ \u4e2a\u6b63\u65b9\u4f53\u53e0\u5728\u4e00\u8d77\u3002\n\n\u6709\u4e5d\u4e2a\u5177\u6709\u7ad6\u76f4\u5206\u91cf\u7684\u5149\u7ebf\uff0c\u989c\u8272\u4e3a\u4e09\u539f\u8272\u7684\u5171 $8$ \u79cd\u7ec4\u5408\uff0c\u8981\u6c42\u8f93\u51fa\u7acb\u4f53\u56fe\uff08\u4ece\u4e1c\u5357\u65b9\u5411\u89c2\u5bdf\uff09\u3002\n\n$n,m,\\max{h_{i,j}}\\le100$\u3002\n\n### \u7ea6\u5b9a\n1. \u89c4\u5b9a\u5750\u6807\u8f74\u4e3a\u5e38\u7528\u7684\u4e09\u7ef4\u5750\u6807\u753b\u6cd5\uff0c\u4ee5\u5357\u4e3a $x$ \u6b63\u65b9\u5411\uff0c\u4e1c\u4e3a $y$ \u6b63\u65b9\u5411\uff0c\u4e0a\u4e3a $z$ \u6b63\u65b9\u5411\u3002\n\n![](https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimg.puchedu.cn%2Fuploads%2F1%2F26%2F122280533%2F1641185377.jpg&refer=http%3A%2F%2Fimg.puchedu.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1662592780&t=92bce04a0c5b5236d6f35638e99df16a)\n\n2. \u89c4\u5b9a $x$ \u884c $y$ \u5217\uff0c\u4ece\u4e0b\u5f80\u4e0a\u7b2c $z$ \u7684\u683c\u5b50\u4e2d\u5fc3\u5750\u6807\u4e3a $(x,y,z)$\uff0c\u68f1\u957f\u4e3a $1$\u3002\n\n3. \u89c4\u5b9a $12$ \u4e2a\u4e09\u89d2\u5f62\u6309\u7167\u9876 ($0\\sim 3$)\u3001\u524d\uff08$4\\sim7$\uff09\u3001\u53f3\uff08$8\\sim11$\uff09\u8fdb\u884c\u7f16\u53f7\u3002\u5728\u540c\u4e00\u9762\u4e0a\uff0c\u5219\u5206\u522b\u5934\u9876\u5411\u5317\u3001\u4e0a\u3001\u4e0a\u89c2\u5bdf\uff0c\u4f9d\u6b21\u6309\u7167\u4e0a\u5de6\u53f3\u4e0b\u6392\u5217\u3002\u4ee5\u4e0b\u7528 $a\\sim l$ \u8868\u793a $12$ \u4e2a\u4e09\u89d2\u5f62\u7684\u4f4d\u7f6e\u3002\n\n```\n    +-------+\n   /b\\aaaa'/|\n  /bb.*'cc/i|\n /.dddd\\c/i/|\n+-------+i.k|\n|\\eeeee/|\\:k|\n|f\\eee/g|j*k|\n|ff\\e/gg|j:\\|\n|fffXggg|j'l+\n|ff/h\\gg|/l/ \n|f/hhh\\g|l/  \n|/hhhhh\\|/   \n+-------+    \n```\n### \u8ba1\u7b97\u989c\u8272\n\u4e3a\u907f\u514d\u5927\u89c4\u6a21\u8017\u8111\u7684\u5206\u7c7b\u8ba8\u8bba\uff0c\u8003\u8651\u4f7f\u7528\u539f\u59cb\u7684\u7b97\u6cd5\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u4e09\u89d2\u5f62\uff0c\u5411\u4e5d\u4e2a\u65b9\u5411\u5206\u522b\u53d1\u51fa\u5c04\u7ebf\uff0c\u53ea\u9700\u5224\u65ad\u662f\u5426\u88ab\u6b63\u65b9\u4f53\u906e\u6321\u5373\u53ef\u3002\n\n\u7531\u4e8e\u4e09\u89d2\u5f62\u53d1\u5c04\u6bd4\u8f83\u9ebb\u70e6\uff0c\u56e0\u6b64\u53ea\u53d6\u5176\u4e2d\u4e00\u4e2a\u70b9\uff08\u672c\u6587\u53d6\u9762\u4e2d\u5fc3\u5230\u8fb9\u7684\u7ebf\u6bb5\u7684\u4e2d\u70b9\uff09\u3002\u63a5\u7740\u5411\u6307\u5b9a\u65b9\u5411\u6bcf\u6b21\u8d70\u4e00\u5c0f\u6b65\uff0c\u5224\u65ad\u5904\u5728\u7684\u4f4d\u7f6e\u662f\u5426\u5305\u542b\u5728\u4e00\u4e2a\u6b63\u65b9\u4f53\u4e2d\u3002\u5bb9\u6613\u53d1\u73b0\uff0c\u5728\u4e4b\u524d\u7684\u7ea6\u5b9a\u4e0b\uff0c\u53ea\u9700\u5bf9\u6bcf\u4e2a\u5750\u6807\u503c\u8fdb\u884c\u56db\u820d\u4e94\u5165\u5373\u53ef\uff08\u4e0d\u8003\u8651\u8fb9\u754c\uff09\u3002\n\n\u6b65\u957f\uff08\u5750\u6807\u8f74\u5206\u91cf\uff09\uff0c\u4e0d\u80fd\u592a\u5927\uff0c\u5426\u5219\u4f1a\u76f4\u63a5\u7a7f\u900f\u6b63\u65b9\u4f53\uff1b\u4e0d\u80fd\u592a\u5c0f\uff0c\u5426\u5219\u6548\u7387\u8fc7\u4f4e\u3002\u672c\u6587\u6b65\u957f\u53d6 $0.125$\u3002\n\n\u5bf9\u4e8e\u548c\u5e73\u9762\u5e73\u884c\u7684\u5149\u7ebf\u65b9\u5411\uff0c\u5efa\u8bae\u76f4\u63a5\u8fdb\u884c\u7279\u5224\uff0c\u56e0\u4e3a\u96be\u4ee5\u7edf\u4e00\u5316\u5904\u7406\u3002\n\n\u989c\u8272\u53e0\u52a0\u4f7f\u7528 $3$ \u4f4d\u4e8c\u8fdb\u5236\uff0c\u5206\u522b\u5bf9\u5e94\u662f\u5426\u542b\u6709 $\\text{\\color{red}R\\color{green}G\\color{blue}B}$\u3002\u672c\u6587\u7684\u989c\u8272\u7f16\u53f7\uff08$0\\sim 7$\uff09\u5206\u522b\u5bf9\u5e94 $\\text{K\\color{red}R\\color{green}G\\color{dddd00}Y\\color{blue}B\\color{pink}P\\color{lightblue}C\\color{white}W}$\u3002$\\leftarrow$ \u8fd9\u91cc\u8fd8\u6709\u4e00\u4e2a\u767d\u8272\u3002\u4f7f\u7528\u6216\u8fd0\u7b97\u5373\u53ef\u53e0\u52a0\u989c\u8272\u3002\n\n### \u5982\u4f55\u8f93\u51fa\n\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c $(m,1,1)$ \u7684\u65b9\u5757**\u5de6\u524d\u4e0b\u9876\u70b9**\u4f4d\u4e8e $(L,0)$\uff08$L$ \u4e3a\u5e38\u6570\uff0c\u4ee5\u8f93\u51fa\u5927\u5c0f\u51b3\u5b9a\uff09\uff0c\u5bf9\u4e8e $(x,y,z)$ \u7684\u65b9\u5757\uff0c\u5b83\u7684**\u5de6\u524d\u4e0b\u9876\u70b9**\u4f4d\u4e8e $(L-4m-4x+8z-8,8y-8+4m-4x)$\u3002\u6309\u7167\u4ece\u8fdc\u5230\u8fd1\u7684\u987a\u5e8f\uff0c\u6839\u636e\u4e0a\u9762\u90a3\u4e2a\u793a\u610f\u56fe\uff0c\u8f93\u51fa\u65f6\u53bb\u6389\u5f00\u5934\u7a7a\u884c\u3002\n\n### \u4f18\u5316\n\u5982\u679c\u5bf9\u6bcf\u4e2a\u7acb\u65b9\u4f53\u90fd\u8fdb\u884c\u201c\u5149\u7ebf\u8ffd\u8e2a\u201d\uff0c\u90a3\u4e48\u6548\u7387\u8fc7\u4f4e\uff0c\u590d\u6742\u5ea6\u662f $\\mathcal O(n^4)$ \u7684\uff0c\u6d6e\u70b9\u8fd0\u7b97\u5e38\u6570\u5927\uff0c\u65e0\u6cd5\u901a\u8fc7\u3002\n\n\u6b64\u65f6\u53ef\u4ee5\u4ece\u8fd1\u5230\u8fdc\u6e32\u67d3\u3002\u5982\u679c\u8fdc\u7684\u7269\u4f53\u6240\u5360\u7684\u683c\u5b50\u5df2\u7ecf\u88ab\u5168\u90e8\u6e32\u67d3\uff08\u88ab\u5b8c\u5168\u906e\u6321\uff09\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u8df3\u8fc7\u5b83\u7684\u989c\u8272\u8ba1\u7b97\uff0c\u6b64\u65f6\u4e09\u89d2\u5f62\u6570\u91cf\u53ef\u4ee5\u964d\u5230 $\\mathcal O(n^2)$\uff0c\u590d\u6742\u5ea6\u964d\u5230 $\\mathcal O(n^3)$\u3002\n\n### \u4ee3\u7801\n\u4e0a\u9762\u793a\u610f\u56fe\u8f93\u5165\u65f6\uff0c\u9700\u8981\u5c06 `\\` \u66ff\u6362\u6210\u5176\u5b83\u6ca1\u6709\u51fa\u73b0\u8fc7\u7684\u5b57\u7b26\u3002\n\n\u957f\u5ea6\u4ec5 $2392$ \u5b57\u8282\uff08\u4e0d\u542b\u6ce8\u91ca\uff09\uff0c\u8fdc\u77ed\u4e8e\u7edd\u5927\u591a\u6570\u4ee3\u7801\u3002\u53ef\u4ee5\u53c2\u8003\u6ce8\u91ca\u7406\u89e3\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=105,M=2005;\nconst int drx[4]={-1,0,0,1},dry[4]={0,-1,1,0}; \n\nstring bs[13]={\n\"    +-------+\",\n\"   /b]aaaa'/|\",\n\"  /bb.*'cc/i|\",\n\" /.dddd]c/i/|\",\n\"+-------+i.k|\",\n\"|]eeeee/|]:k|\",\n\"|f]eee/g|j*k|\",\n\"|ff]e/gg|j:]|\",\n\"|fffXggg|j'l+\",\n\"|ff/h]gg|/l/ \",\n\"|f/hhh]g|l/  \",\n\"|/hhhhh]|/   \",\n\"+-------+    \"\n}; // ] \u5b57\u7b26\uff1a\u5982\u4e0a\u6587\nint m,n,h,hei[N][N],nc[128];\nchar lc[3][5],ans[M][M];\nstring cn=\"KRGYBPCW\";\nbool ext[N][N][N];\nbool check(int x,int y,int z,int s,int dx,int dy){\n\t--dx,--dy; int dz=1;\n\tdouble nx,ny,nz;\n\tif(s<4 &&s>=0) nz=z+0.5,nx=x+0.25*drx[s&3],ny=y+0.25*dry[s&3];\n\tif(s<8 &&s>=4) nx=x+0.5,ny=y+0.25*dry[s&3],nz=z-0.25*drx[s&3];\n\tif(s<12&&s>=8) ny=y+0.5,nx=x-0.25*dry[s&3],nz=z-0.25*drx[s&3];\n\t// \u8ba1\u7b97\u8d77\u59cb\u5750\u6807\n\tif(s<8&&s>=4&&!dx&&dy) return 0;\n\tif(s>=8&&dx&&!dy) return 0;\n\tif(s>=4&&!dx&&!dy) return 0;\n\t// \u5149\u7ebf\u64e6\u8fc7\u5e73\u9762\u7279\u5224\n\tdouble tx=dx*0.125,ty=dy*0.125,tz=dz*0.125;\n\tnx+=tx,ny+=ty,nz+=tz;\n\twhile(nx>0&&ny>0&&nz>0&&nx<m+1&&ny<n+1&&nz<h+1){\n\t\tif(ext[(int)(nx+0.5)][(int)(ny+0.5)][(int)(nz+0.5)]) return 0;\n\t\tnx+=tx,ny+=ty,nz+=tz;\n\t} // \"\u5149\u7ebf\u8ffd\u8e2a\"\n\treturn 1;\n}\nvoid print(int x,int y,int *s){\n\tfor(int i=0;i<13;++i)\n\tfor(int j=0;j<13;++j){\n\t\tif(ans[x-12+i][y+j]) continue;\n\t\tif(bs[i][j]==']') ans[x-12+i][y+j]='\\\\'; // \u53cd\u659c\u6760\u66ff\u6362\n\t\telse if(isalpha(bs[i][j])&&bs[i][j]!='X') ans[x-12+i][y+j]=cn[s[bs[i][j]-'a']]; // \u9762\u7f16\u53f7\n\t\telse if(bs[i][j]!=' ') ans[x-12+i][y+j]=bs[i][j];\n\t}\n}\nint main(){\n\tcin>>m>>n;\n\tfor(int i=1;i<=m;++i)\n\t\tfor(int j=1;j<=n;++j){\n\t\t\tscanf(\"%d\",&hei[i][j]),h=max(h,hei[i][j]);\n\t\t\tfor(int k=1;k<=hei[i][j];++k) ext[i][j][k]=1;\n\t\t}\n\tfor(int i:{0,1,2}) scanf(\"%s\",lc[i]);\n\tfor(int i=0;i<8;++i) nc[cn[i]]=i;\n\tfor(int i=m,sx,sy,col[12];i;--i)\n\tfor(int j=n;j;--j)\n\tfor(int k=hei[i][j];k;--k){\n\t\tsx=(k-1)*8+(m-i)*4,sx=M-1-sx,sy=(j-1)*8+(m-i)*4;\n\t\tmemset(col,0,sizeof(col)); bool und=1;\n\t\tfor(int w1=0;w1<13&&und;++w1)\n\t\tfor(int w2=0;w2<13&&und;++w2)\n\t\t\tif(!ans[sx-12+w1][sy+w2]) und=0;\n\t\tif(und) continue; // \u5b8c\u5168\u8986\u76d6\u76f4\u63a5\u8df3\u8fc7\n\t\tfor(int s=0;s<12;++s)\n\t\tfor(int w1:{0,1,2}) for(int w2:{0,1,2}){\n\t\t\tif(lc[w1][w2]=='*') continue;\n\t\t\tif(check(i,j,k,s,w1,w2)) col[s]|=nc[lc[w1][w2]];\n\t\t} // \u989c\u8272\u53e0\u52a0\n\t\tprint(sx,sy,col);\n\t}\n\tfor(int i=0;i<M;++i){\n\t\tbool fd=0;\n\t\tfor(int j=0;j<M;++j)\n\t\t\tif(ans[i][j]){fd=1; break;}\n\t\tif(!fd) continue;\n\t\tint j=M-1;\n\t\twhile(!ans[i][j]) --j; // \u53bb\u9664\u7a7a\u884c\n\t\tfor(int k=0;k<=j;++k) putchar(ans[i][k]?ans[i][k]:' ');\n\t\tputs(\"\");\n\t}\n\treturn 0;\n} \n```",
        "postTime": 1660005710,
        "uid": 133060,
        "name": "henryhu2006",
        "ccfLevel": 0,
        "title": "P3326 solution"
    },
    {
        "content": "\u672c\u6587\u8bb2\u89e3\u505a\u9898\u7684\u601d\u8def\uff0c\u800c\u4e0d\u662f\u5b9e\u73b0\u65b9\u6cd5\u3002\n\n\u9700\u8981\u505a\u7684\u4e8b\u60c5\u6709\u4e09\u4e2a\uff1a\n\n1. \u8f93\u5165\u3002\n\n\u8fd9\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\u3002\n\n2. \u6295\u5f71\u5904\u7406\u3002\n\n\u6c42\u51fa\u6bcf\u4e00\u4e2a\u5c0f\u7acb\u65b9\u4f53\u7684 12 \u4e2a\u5c0f\u4e09\u89d2\u5f62\u7684\u989c\u8272\u3002\n\n3. \u6e32\u67d3\u8f93\u51fa\u3002\n\n\u548c[\u8fd9\u9898](https://www.luogu.com.cn/problem/P1058)\u7c7b\u4f3c\uff0c\u6309\u987a\u5e8f\u6253\u5370\u51fa\u6765\uff0c\u8ba9\u524d\u9762\u7684\u81ea\u7136\u8986\u76d6\u540e\u9762\u7684\u3002\n\n\u5176\u4e2d\u6295\u5f71\u5904\u7406\u662f\u6700\u96be\u7684\u3002\u5c1d\u8bd5\u5206\u7c7b\u8ba8\u8bba\u3002\n\n\u6295\u5f71\u6709\u4e5d\u4e2a\u65b9\u5411\uff0c\u5206\u4e3a\u4e09\u7c7b\u3002\n\n1. \u6295\u5f71\u65b9\u5411\u4e3a\u6b63\u4e0a\u65b9\u3002\n\n2. \u6295\u5f71\u65b9\u5411\u4e3a\u4e1c\uff0c\u5357\uff0c\u897f\uff0c\u5317\u3002\n\n3. \u6295\u5f71\u65b9\u5411\u4e3a\u4e1c\u5357\uff0c\u4e1c\u5317\uff0c\u897f\u5357\uff0c\u897f\u5317\u3002\n\n\u7b2c\u4e00\u4e2a\u6700\u7b80\u5355\uff1a\u6700\u4e0a\u9762\u7684\u7acb\u65b9\u4f53\u7684\u9876\u9762\u6709\u5149\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\nfor (int i = 1; i <= n; i++) {\n\tfor (int j = 1; j <= m; j++) {\n\t\tif (h[i][j]) {\n\t\t\tfor (int k = 1; k <= 4; k++) {\n\t\t\t\tc[i][j][h[i][j]][k] |= l[1][1];\n\t\t\t}\n\t\t}\n\t} \n}\n```\n\n\n\u7b2c\u4e8c\u4e2a\uff1a\u53ef\u4ee5\u7528\u6a2a\u5e73\u7ad6\u76f4\u7684\u76f4\u7ebf\u5c06\u5149\u5206\u4e3a $m$ \u6216 $n$ \u675f\uff0c\u5206\u5f00\u8003\u8651\u3002\n\n\u4ee5\u6b63\u5357\u65b9\u7684\u5149\u7ebf\u4e3a\u4f8b\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\nfor (int i = 1; i <= m; i++) {\n\tfor (int j = n, t = 0; j >= 1; j--, t--) {\n\t\tif (h[j][i] >= t) {\n\t\t\tif (h[j][i]) {\n\t\t\t\tfor (int k = 1; k <= 4; k++) {\n\t\t\t\t\tc[j][i][h[j][i]][k] |= l[2][1];\n\t\t\t\t}\n\t\t\t\tfor (int d = t+1; d <= h[j][i]; d++) {\n\t\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\t\tc[j][i][d][k] |= l[2][1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tt = h[j][i] + 1;\n\t\t}\n\t}\n}\n```\n\n\u7b2c\u4e09\u4e2a\uff0c\u4e5f\u662f\u6700\u590d\u6742\u7684\u4e00\u4e2a\u3002\u53ef\u4ee5\u7528\u503e\u659c\u7684\u76f4\u7ebf\u5c06\u5149\u5206\u4e3a $m+n$ \u675f\uff0c\u5206\u5f00\u8003\u8651\u3002\n\n\u4ee5\u4e1c\u5357\u65b9\u7684\u5149\u7ebf\u4e3a\u4f8b\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\nfor (int p = 1; p <= m; p++) {\n\tfor (int i = n, j = p, s = 0, t = 0;;) {\n\t\tif (h[i][j] >= t) {\n\t\t\tif (h[i][j]) {\n\t\t\t\tfor (int k = 3; k <= 4; k++) {\n\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (int d = t+1; d <= h[i][j]; d++) {\n\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (s != t) {\n\t\t\t\tfor (int k = 5; k <= 8; k += 3) {\n\t\t\t\t\tc[i][j][t][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tt = h[i][j] + 1;\n\t\t\ts = h[i][j];\n\t\t}\n\t\tt--;\n\t\tj--;\n\t\tif (j < 1) break;\n\t\tif (h[i][j] >= s) {\n\t\t\tif (h[i][j]) {\n\t\t\t\tfor (int k = 1; k <= 2; k++) {\n\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (int d = s+1; d <= h[i][j]; d++) {\n\t\t\t\tfor (int k = 9; k <= 12; k++) {\n\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (s != t) {\n\t\t\t\tfor (int k = 9; k <= 10; k++) {\n\t\t\t\t\tc[i][j][s][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\ts = h[i][j] + 1;\n\t\t\tt = h[i][j];\n\t\t}\n\t\ts--;\n\t\ti--;\n\t\tif (i < 1) break;\n\t}\n}\nfor (int p = 1; p <= n; p++) {\n\tfor (int i = p, j = m, s = 0, t = 0;;) {\n\t\tif (h[i][j] >= s) {\n\t\t\tif (h[i][j]) {\n\t\t\t\tfor (int k = 1; k <= 2; k++) {\n\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (int d = s+1; d <= h[i][j]; d++) {\n\t\t\t\tfor (int k = 9; k <= 12; k++) {\n\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (s != t) {\n\t\t\t\tfor (int k = 9; k <= 10; k++) {\n\t\t\t\t\tc[i][j][s][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\ts = h[i][j] + 1;\n\t\t\tt = h[i][j];\n\t\t}\n\t\ts--;\n\t\ti--;\n\t\tif (i < 1) break;\n\t\tif (h[i][j] >= t) { \n\t\t\tif (h[i][j]) {\n\t\t\t\tfor (int k = 3; k <= 4; k++) {\n\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (int d = t+1; d <= h[i][j]; d++) {\n\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (s != t) {\n\t\t\t\tfor (int k = 5; k <= 8; k += 3) {\n\t\t\t\t\tc[i][j][t][k] |= l[2][2];\n\t\t\t\t}\n\t\t\t}\n\t\t\tt = h[i][j] + 1;\n\t\t\ts = h[i][j];\n\t\t}\n\t\tt--;\n\t\tj--;\n\t\tif (j < 1) break;\n\t}\n}\n```\n\n\u6700\u540e\u7ed9\u4e00\u4e2a\u603b\u4ee3\u7801\uff0c\u5c3d\u7ba1\u6709\u4e9b\u957f\uff0c\u5f71\u54cd\u89c2\u611f\u3002\n\n```cpp\n#include <cstdio>\nconst char lit[10] = {42, 82, 71, 66};\nconst char col[10] = {75, 82, 71, 89, 66, 80, 67, 87};\nconst char base[15][15] =\n{{43, 45, 45, 45, 45, 45, 45, 45, 43},\n{124, 47, 7, 7, 7, 7, 7, 92, 124, 47},\n{124, 8, 47, 7, 7, 7, 92, 6, 124, 11, 47},\n{124, 8, 8, 47, 7, 92, 6, 6, 124, 47, 11, 47},\n{124, 8, 8, 8, 88, 6, 6, 6, 124, 12, 39, 11, 43},\n{124, 8, 8, 92, 5, 47, 6, 6, 124, 12, 58, 92, 124},\n{124, 8, 92, 5, 5, 5, 47, 6, 124, 12, 42, 10, 124},\n{124, 92, 5, 5, 5, 5, 5, 47, 124, 92, 58, 10, 124},\n{43, 45, 45, 45, 45, 45, 45, 45, 43, 9, 46, 10, 124},\n{0, 47, 46, 3, 3, 3, 3, 92, 2, 47, 9, 47, 124},\n{0, 0, 47, 4, 4, 46, 42, 39, 2, 2, 47, 9, 124},\n{0, 0, 0, 47, 4, 92, 1, 1, 1, 1, 39, 47, 124},\n{0, 0, 0, 0, 43, 45, 45, 45, 45, 45, 45, 45, 43}};\nconst int Xy = 8;\nconst int Yx = 4;\nconst int Yy = 4;\nconst int Zx = 8;\nconst int height = 12;\nconst int width[15] = {8, 9, 10, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12};\nchar canvas[1500][1500];\nint canvasheight, canvaswidth[1500];\nint canvasleft = -1, canvasdown = -1;\nchar lighting[5][5];\nint n, m, h[105][105];\nint l[5][5];\nint c[105][105][105][14];\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= m; j++) {\n\t\t\tscanf(\"%d\", h[i] + j);\n\t\t}\n\t}\n\tfor (int i = 0; i <= 2; i++) {\n\t\tscanf(\"%s\", lighting[i]);\n\t}\n\tfor (int i = 0; i <= 2; i++) {\n\t\tfor (int j = 0; j <= 2; j++) {\n\t\t\tfor (int k = 0; k <= 3; k++) {\n\t\t\t\tif (lighting[i][j] == lit[k]) l[i][j] = k;\n\t\t\t}\n\t\t\tif (l[i][j]) l[i][j] = (1 << (l[i][j] - 1));\n\t\t}\n\t}\n\tfor (int p = 1; p <= m; p++) {\n\t\tfor (int i = 1, j = p, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 2; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj++;\n\t\t\tif (j > n) break;\t\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 3; k <= 4; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti++;\n\t\t\tif (i > m) break;\n\t\t}\n\t}\n\tfor (int p = 1; p <= n; p++) {\n\t\tfor (int i = p, j = 1, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 3; k <= 4; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti++;\n\t\t\tif (i > m) break;\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 2; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj++;\n\t\t\tif (j > n) break;\n\t\t}\n\t}\n\tfor (int i = 1; i <= m; i++) {\n\t\tfor (int j = 1, t = 0; j <= n; j++, t--) {\n\t\t\tif (h[j][i] >= t) {\n\t\t\t\tif (h[j][i]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k++) {\n\t\t\t\t\t\tc[j][i][h[j][i]][k] |= l[0][1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[j][i] + 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (int p = 1; p <= m; p++) {\n\t\tfor (int i = 1, j = p, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k += 3) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj--;\n\t\t\tif (j < 1) break;\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 2; k <= 3; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int d = s+1; d <= h[i][j]; d++) {\n\t\t\t\t\tfor (int k = 9; k <= 12; k++) {\n\t\t\t\t\t\tc[i][j][d][k] |= l[0][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s != t) {\n\t\t\t\t\tfor (int k = 9; k <= 12; k += 3) {\n\t\t\t\t\t\tc[i][j][s][k] |= l[0][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti++;\n\t\t\tif (i > n) break;\n\t\t}\n\t}\n\tfor (int p = 1; p <= n; p++) {\n\t\tfor (int i = p, j = m, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 2; k <= 3; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][2];\n\t\t\t\t\t}\n\t\t\t\t\tfor (int d = s+1; d <= h[i][j]; d++) {\n\t\t\t\t\t\tfor (int k = 9; k <= 12; k++) {\n\t\t\t\t\t\t\tc[i][j][d][k] |= l[0][2];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (s != t) {\n\t\t\t\t\t\tfor (int k = 9; k <= 12; k += 3) {\n\t\t\t\t\t\t\tc[i][j][s][k] |= l[0][2];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti++;\n\t\t\tif (i > n) break;\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k += 3) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[0][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj--;\n\t\t\tif (j < 1) break;\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1, t = 0; j <= m; j++, t--) {\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[1][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= m; j++) {\n\t\t\tif (h[i][j]) {\n\t\t\t\tfor (int k = 1; k <= 4; k++) {\n\t\t\t\t\tc[i][j][h[i][j]][k] |= l[1][1];\n\t\t\t\t}\n\t\t\t}\n\t\t} \n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = m, t = 0; j >= 1; j--, t--) {\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[1][2];\n\t\t\t\t\t}\n\t\t\t\t\tfor (int d = t+1; d <= h[i][j]; d++) {\n\t\t\t\t\t\tfor (int k = 9; k <= 12; k++) {\n\t\t\t\t\t\t\tc[i][j][d][k] |= l[1][2];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (int p = 1; p <= m; p++) {\n\t\tfor (int i = n, j = p, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 2; k <= 3; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int d = t+1; d <= h[i][j]; d++) {\n\t\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\t\tc[i][j][d][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s != t) {\n\t\t\t\t\tfor (int k = 5; k <= 6; k++) {\n\t\t\t\t\t\tc[i][j][t][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj++;\n\t\t\tif (j > m) break;\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k += 3) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti--;\n\t\t\tif (i < 1) break;\n\t\t}\n\t}\n\tfor (int p = 1; p <= n; p++) {\n\t\tfor (int i = p, j = 1, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k += 3) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti--;\n\t\t\tif (i < 1) break;\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 2; k <= 3; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int d = t+1; d <= h[i][j]; d++) {\n\t\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\t\tc[i][j][d][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s != t) {\n\t\t\t\t\tfor (int k = 5; k <= 6; k++) {\n\t\t\t\t\t\tc[i][j][t][k] |= l[2][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj++;\n\t\t\tif (j > m) break;\n\t\t}\n\t}\n\tfor (int i = 1; i <= m; i++) {\n\t\tfor (int j = n, t = 0; j >= 1; j--, t--) {\n\t\t\tif (h[j][i] >= t) {\n\t\t\t\tif (h[j][i]) {\n\t\t\t\t\tfor (int k = 1; k <= 4; k++) {\n\t\t\t\t\t\tc[j][i][h[j][i]][k] |= l[2][1];\n\t\t\t\t\t}\n\t\t\t\t\tfor (int d = t+1; d <= h[j][i]; d++) {\n\t\t\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\t\t\tc[j][i][d][k] |= l[2][1];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[j][i] + 1;\n\t\t\t}\n\t\t}\n\t}\n\tfor (int p = 1; p <= m; p++) {\n\t\tfor (int i = n, j = p, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 3; k <= 4; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int d = t+1; d <= h[i][j]; d++) {\n\t\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s != t) {\n\t\t\t\t\tfor (int k = 5; k <= 8; k += 3) {\n\t\t\t\t\t\tc[i][j][t][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj--;\n\t\t\tif (j < 1) break;\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 2; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int d = s+1; d <= h[i][j]; d++) {\n\t\t\t\t\tfor (int k = 9; k <= 12; k++) {\n\t\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s != t) {\n\t\t\t\t\tfor (int k = 9; k <= 10; k++) {\n\t\t\t\t\t\tc[i][j][s][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti--;\n\t\t\tif (i < 1) break;\n\t\t}\n\t}\n\tfor (int p = 1; p <= n; p++) {\n\t\tfor (int i = p, j = m, s = 0, t = 0;;) {\n\t\t\tif (h[i][j] >= s) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 1; k <= 2; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int d = s+1; d <= h[i][j]; d++) {\n\t\t\t\t\tfor (int k = 9; k <= 12; k++) {\n\t\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s != t) {\n\t\t\t\t\tfor (int k = 9; k <= 10; k++) {\n\t\t\t\t\t\tc[i][j][s][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts = h[i][j] + 1;\n\t\t\t\tt = h[i][j];\n\t\t\t}\n\t\t\ts--;\n\t\t\ti--;\n\t\t\tif (i < 1) break;\n\t\t\tif (h[i][j] >= t) {\n\t\t\t\tif (h[i][j]) {\n\t\t\t\t\tfor (int k = 3; k <= 4; k++) {\n\t\t\t\t\t\tc[i][j][h[i][j]][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (int d = t+1; d <= h[i][j]; d++) {\n\t\t\t\t\tfor (int k = 5; k <= 8; k++) {\n\t\t\t\t\t\tc[i][j][d][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s != t) {\n\t\t\t\t\tfor (int k = 5; k <= 8; k += 3) {\n\t\t\t\t\t\tc[i][j][t][k] |= l[2][2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tt = h[i][j] + 1;\n\t\t\t\ts = h[i][j];\n\t\t\t}\n\t\t\tt--;\n\t\t\tj--;\n\t\t\tif (j < 1) break;\n\t\t}\n\t}\n\tfor (int i = 0; i <= 1499; i++) {\n\t\tfor (int j = 0; j <= 1499; j++) {\n\t\t\tcanvas[i][j] = 32;\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= m; j++) {\n\t\t\tfor (int k = 1; k <= h[i][j]; k++) {\n\t\t\t\tint x = (n - i) * Yx + (k - 1) * Zx;\n\t\t\t\tint y = (j - 1) * Xy + (n - i) * Yy;\n\t\t\t\tif (canvasleft == -1 || canvasleft > y) canvasleft = y;\n\t\t\t\tif (canvasdown == -1 || canvasdown > x) canvasdown = x;\n\t\t\t\tif (x + height > canvasheight) canvasheight = x + height;\n\t\t\t\tfor (int a = 0; a <= height; a++) {\n\t\t\t\t\tif (y + width[a] > canvaswidth[x + a]) canvaswidth[x + a] = y + width[a];\n\t\t\t\t\tfor (int b = 0; b <= width[a]; b++) {\n\t\t\t\t\t\tif (base[a][b] >= 1 && base[a][b] <= 12) {\n\t\t\t\t\t\t\tcanvas[x + a][y + b] = col[c[i][j][k][base[a][b]]];\n\t\t\t\t\t\t} else if (base[a][b]) {\n\t\t\t\t\t\t\tcanvas[x + a][y + b] = base[a][b];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor (int i = canvasheight; i >= canvasdown; i--) {\n\t\tfor (int j = canvasleft; j <= canvaswidth[i]; j++) {\n\t\t\tputchar(canvas[i][j]);\n\t\t}\n\t\tif (i) putchar(10);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1652972184,
        "uid": 153422,
        "name": "0x3F",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3326\u3010[SDOI2015] \u7acb\u4f53\u56fe\u3011"
    }
]
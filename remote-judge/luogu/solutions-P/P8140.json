[
    {
        "content": "**P8140 sol**\n\n\u6240\u4ee5\u662f corner \u9898\u3002\n\n\u6211\u4eec\u8003\u8651\u679a\u4e3e\u7b54\u6848\uff0c\u5c06\u5f53\u524d\u7684\u6570\u5206\u4e3a\u524d\u534a\u90e8\u5206\u548c\u540e\u534a\u90e8\u5206\u3002\u540e\u534a\u90e8\u5206\u663e\u7136\u662f\u957f\u5ea6\u4e3a $\\text{ans}$ \u4e2a $\\text d$ \u7684\u5b57\u7b26\u4e32\u3002\n \n\u5bf9\u4e8e\u5176\u6c42\u6a21\u6570\u5bf9 $\\text b$\uff0c\u90a3\u4e48\u524d\u534a\u90e8\u5206\u5bf9\u4e8e $\\text b$ \u7684\u6a21\u6570 $\\text p$ \u4e5f\u53ef\u4ee5\u77e5\u6653\uff0c\u8bbe\u524d\u534a\u90e8\u5206\u53ef\u4ee5\u8868\u793a\u6210 $\\text{10}^{\\text v} \\times \\text x$ \u7684\u5f62\u5f0f\uff0c\u4ee4 $\\text a = \\text{10} ^ {\\text v},\\text c = \\text p$\uff0c\u6211\u4eec\u4f7f\u7528\u540c\u4f59\u65b9\u7a0b\u6c42\u89e3 $\\text{ax} \\equiv \\text c (\\text{mod} \\ \\text b)$ \u7684\u6700\u5c0f\u6574\u6570\u89e3 $\\text x$\uff0c\u7136\u540e\u6bd4\u8f83\u4e00\u4e0b\u8303\u56f4\u8d85\u6ca1\u6709\u5373\u53ef\u5224\u65ad\uff0c\u5728\u8fd9\u91cc\u76f4\u63a5\u66b4\u529b $\\text O(\\log_{\\text{10}} \\text a ^ 2)$ \u5224\u65ad\u5373\u53ef\u3002\n\ncorner\uff1a\n\n- \u5f53 $\\text d = \\text 0$ \u82e5 $\\text x = \\text 0$\uff0c\u8981\u5c06 $\\text x$ \u52a0\u5230\u6b63\u6574\u6570\uff1b\n\n- \u53ef\u80fd\u8981\u7279\u5224\u957f\u5ea6\u4e3a\u603b\u957f\u65f6\u7684\u60c5\u51b5\uff0c\u6211\u4e0d\u5224\u53cd\u6b63\u6302\u4e86\uff1b\n\n```cpp\n/*\n\u4e5f\u5c31 1e4\uff0c\u66b4\u529b\u6bd4\u7b97\u4e86\u3002 \n*/\n#include \"bits/stdc++.h\"\nusing namespace std;\nconst int Len = 1e5 + 5;\nint b,d,a,mod,mt[Len];\ninline int pt(int x)\n{\n\tint rs = 0;\n\twhile(x && x % 10 == d) \n\t{\n\t\trs ++;\n\t\tx /= 10;\n\t}\n\treturn rs;\n}\nchar s[Len];\nconst int Inf = 1e7;\nint gcd(int a,int b)\n{\n\tif(!b) return a;\n\treturn gcd(b , a % b);\n}\nint exgcd(int a,int b,int &x,int &y) \n{\n  \tif(!b) \n\t{\n    \tx = 1;\n    \ty = 0;\n    \treturn a;\n\t}\n\tint d = exgcd(b , a % b , x , y);\n\tint t = x;\n\tx = y;\n\ty = t - (a / b) * y;\n\treturn d;\n}\nint get(int a,int b,int mod)\n{\n\tint GCD = gcd(a , mod);\n\tif(b % GCD) return -1;\n\tint A = a / GCD , B = b / GCD , MOD = mod / GCD , x , y;\n\tint rcd = exgcd(A , MOD , x , y);\n\tx = 1ll * x * B % MOD;\n\tx %= MOD;\n\tif(x < 0) x += MOD;\n\tx %= MOD;\n\tif(!d && x == 0) x += MOD;\n\treturn x;\t\n}\nint main()\n{\n\t//freopen(\"03.in\",\"r\",stdin);\n\tscanf(\"%d %d\",&b,&d);scanf(\"%s\",s + 1);\n\tmod = b;mt[0] = 1;int len = strlen(s + 1);\n\tfor(int i = 1 ; i <= len ; i ++) mt[i] = 1ll * mt[i - 1] * 10 % mod;\n\tint as = 0 , sm = 0;\n\t//printf(\"!%d\\n\",len);\n\tfor(int i = 1 ; i < len ; i ++) \n\t{\n\t\tsm = 1ll * sm * 10 % mod + d , sm %= mod;\n\t\tint gt = get(mt[i] , mod - sm , mod) , b1 = 0 , b2 = 0;\n\t\tif(gt == -1) continue;\n\t\t//printf(\"%d %d %d %d\\n\",i,gt,mod - sm,mt[i]);\n\t\tif(len - i >= 7) b1 = 2;\n\t\telse\n\t\t{\n\t\t\tint x = 0;\n\t\t\tfor(int j = 1 ; j <= len - i ; j ++) x = x * 10 + (s[j] - '0');\n\t\t\tif(x > gt) b1 = 2;\n\t\t\telse if(x == gt) b1 = 1;\n\t\t\telse b1 = 0;\n\t\t\t//printf(\"%d %d\\n\",i,b1);\n\t\t}\n\t\t//if(len == i) b1 = 1;\n\t\tb2 = 1;\n\t\tfor(int j = len - i + 1 ; j <= len ; j ++) \n\t\t{\n\t\t\tif(s[j] - '0' != d)\n\t\t\t{\n\t\t\t\tif(s[j] - '0' < d) b2 = 0;\n\t\t\t\telse b2 = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(b1 == 2 || (b1 == 1 && b2)) as = i;\n\t}\n\tint ss = 0 , bl = 1;\n\tfor(int i = 1 ; i <= len ; i ++) ss = (1ll * ss * 10 + d) % mod;\n\tfor(int i = 1 ; i <= len ; i ++)\n\t{\n\t\tif(d != s[i] - '0')\n\t\t{\n\t\t\tif(d < s[i] - '0') bl = 2;\n\t\t\telse bl = 0;\n\t\t\tbreak;\n\t\t}\n\t} \n\t//printf(\"%d %d %d %d\\n\",d,ss,bl,len);\n\tif(d && !ss && bl) as = len;\n\tprintf(\"%d\\n\",as);\n\treturn 0;\n}\n```",
        "postTime": 1673838342,
        "uid": 132533,
        "name": "Hakuoro",
        "ccfLevel": 0,
        "title": "\u98ce\uff0c\u5439\u6765\u594f\u6298\u7684\u9999\u5473\uff01\u613f\u5947\u8ff9\u964d\u4e34\u6b64\u95f4\uff01"
    }
]
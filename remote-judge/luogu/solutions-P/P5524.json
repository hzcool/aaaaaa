[
    {
        "content": "## \u601d\u8def\n\n\u6211\u4eec\u8003\u8651\u5f00\u4e00\u68f5\u7ebf\u6bb5\u6811\uff0c\u8868\u793a\u533a\u95f4 $[l,r]$ \u6700\u540e\u4e00\u6b21\u64cd\u4f5c 2 \u7684**\u65f6\u95f4\u6233**\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c 1\uff1a\u6211\u4eec\u4ea4\u6362\u6811\u4e0a $x$ \u548c $y$ \u4e24\u70b9\u7684\u503c\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c 2\uff1a\u6211\u4eec\u8fdb\u884c\u533a\u95f4 $[l,r]$ \u8d4b\u503c\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c 3\uff1a\u6211\u4eec\u67e5\u8be2\u6811\u4e0a $x$ \u70b9\u7684\u503c\uff0c\u5e76\u8bb0\u5f55\u4e3a $t_i$\u3002\n\n\u8003\u8651\u5c06\u6240\u6709\u7684\u8be2\u95ee\u79bb\u7ebf\u4e0b\u6765\uff0c\u5bf9 $r$ \u505a\u626b\u63cf\u7ebf\uff1a\u9047\u5230\u64cd\u4f5c 3 \u65f6\uff0c\u6211\u4eec\u5728 $t_i$ \u7684\u4f4d\u7f6e\u52a0\u4e0a $val[t_i]$ \u5e76\u66f4\u65b0\u524d\u7f00\u548c\uff1b\u5bf9\u4e8e\u8be2\u95ee $[l,r]$\uff0c\u6211\u4eec\u67e5\u8be2 $l$ \u7684\u540e\u7f00\u548c\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u901a\u8fc7\u6811\u72b6\u6570\u7ec4\u5b9e\u73b0\u3002\n\n\u7531\u4e8e $n,m,q$ \u540c\u9636\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log n)$\u3002\n\n\n------------\n## \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<fstream>\n#include<algorithm>\n#include<cmath>\n#include<cstdlib>\n#include<cstring>\n#include<queue>\n#include<map>\n#include<set>\n#include<bitset>\n#define LL long long\n#define FOR(i, x, y) for(int i = (x); i <= (y); i++)\n#define ROF(i, x, y) for(int i = (x); i >= (y); i--)\n#define PFOR(i, x) for(int i = he[x]; i; i = r[i].nxt)\ninline int reads()\n{\n    int sign = 1, re = 0; char c = getchar();\n    while(c < '0' || c > '9'){if(c == '-') sign = -1; c = getchar();}\n    while('0' <= c && c <= '9'){re = re * 10 + (c - '0'); c = getchar();}\n    return sign * re;\n}\nint n, m, q;\nint ty[1000005], x[1000005], y[1000005], val[1000005];\nint tr[4000005];\n#define ls (now << 1)\n#define rs ((now << 1) | 1)\ninline void down(int now)\n{\n    if(tr[now])\n    {\n        tr[ls] = tr[rs] = tr[now];\n        tr[now] = 0;\n    }\n}\nvoid modify(int now, int l, int r, int L, int R, int ti)\n{\n    if(L <= l && r <= R) return void(tr[now] = ti);\n    down(now); int mid = (l + r) >> 1;\n    if(L <= mid) modify(ls, l, mid, L, R, ti);\n    if(mid < R) modify(rs, mid + 1, r, L, R, ti);\n}\nint query(int now, int l, int r, int to)\n{\n    if(l == r) return tr[now];\n    if(tr[now]) return tr[now];\n    int mid = (l + r) >> 1;\n    if(to <= mid) return query(ls, l, mid, to);\n    else return query(rs, mid + 1, r, to);\n}\nLL sum[1000005];\ninline int lb(int x) {return x & (-x);}\ninline void add(int x, int val)\n{\n    if(!x) return;\n    while(x <= m)\n        sum[x] += val,\n        x += lb(x);\n}\ninline LL get_sum(int x)\n{\n    if(x < 1) return 0;\n    LL re = 0;\n    while(x)\n        re += sum[x],\n        x ^= lb(x);\n    return re;\n}\n#define pii std::pair<int, int>\n#define mp std::make_pair\nstd::vector<pii> qst[1000005];\nLL ans[1000005];\nsigned main()\n{\n#ifndef ONLINE_JUDGE\n    freopen(\"test.in\", \"r\", stdin);\n    freopen(\"test.out\", \"w\", stdout);\n#endif\n    n = reads(), m = reads(), q = reads();\n    FOR(i, 1, m)\n    {\n        ty[i] = reads();\n        if(ty[i] == 1)\n        {\n            x[i] = reads(), y[i] = reads();\n            int vx = query(1, 1, n, x[i]), vy = query(1, 1, n, y[i]);\n            modify(1, 1, n, x[i], x[i], vy), modify(1, 1, n, y[i], y[i], vx);\n        }\n        else if(ty[i] == 2)\n        {\n            x[i] = reads(), y[i] = reads(), val[i] = reads();\n            modify(1, 1, n, x[i], y[i], i);\n        }\n        else\n        {\n            x[i] = reads();\n            y[i] = query(1, 1, n, x[i]);\n        }\n    }\n    FOR(i, 1, q)\n    {\n        int l = reads(), r = reads();\n        qst[r].emplace_back(mp(l, i));\n    }\n    FOR(i, 1, m)\n    {\n        if(ty[i] == 3) add(y[i], val[y[i]]);\n        for(pii j : qst[i]) ans[j.second] = get_sum(i) - get_sum(j.first - 1);\n    }\n    FOR(i, 1, q) printf(\"%lld\\n\", ans[i]);\n    return 0;\n}\n```\n",
        "postTime": 1662514519,
        "uid": 69288,
        "name": "zuytong",
        "ccfLevel": 7,
        "title": "P5524 [Ynoi2012] NOIP2015 \u5145\u6ee1\u4e86\u5e0c\u671b"
    },
    {
        "content": "[P5524](https://www.luogu.com.cn/problem/P5524)\n\n# \u9898\u610f\n\n\u6709 $m$ \u4e2a\u64cd\u4f5c\uff0c$q$ \u4e2a\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u4ece\u64cd\u4f5c $l$ \u5230\u64cd\u4f5c $r$ \u987a\u7740\u505a\u4e00\u904d\uff0c\u95ee\u64cd\u4f5c $3$ \u7684\u548c\u3002\n\n**\u4e00\u4e2a\u66f4\u597d\u7406\u89e3\u7684\u9898\u89e3\uff0c\u5e76\u4e14\u8c8c\u4f3c\u662f\u76ee\u524d\u4e3a\u6b62\u7684\u6700\u4f18\u89e3\u3002**\n\n## $n\\leq 1000$\n\n\u76f4\u63a5\u66b4\u529b\u6a21\u62df\u5373\u53ef\uff0c\u4eb2\u6d4b\u5206\u5757\u53ef\u8fc7\u3002\n\n\u4e3a\u4e86\u9632\u6b62\u6709\u4eba\u66b4\u529b\u5199\u6302\u4e86\u7136\u540e\u8dd1\u5230\u9898\u89e3\u91cc\u6765\u627e\u66b4\u529b\u7136\u540e\u53d1\u73b0\u9898\u89e3\u91cc\u9762\u6ca1\u6709\u66b4\u529b\u4ee3\u7801\uff0c~~\u5c31\u50cf\u66fe\u7ecf\u7684\u6211~~\uff0c\u6240\u4ee5\u8fd8\u662f\u653e\u4e00\u4e0b\u3002\n\n[\u8fd9\u91cc](https://www.luogu.com.cn/paste/jo9j3u64)\n\n## \u6ca1\u6709 $2$ \u64cd\u4f5c\n\n\u663e\u7136\u5982\u679c\u6ca1\u6709\u533a\u95f4\u63a8\u5e73\u7684\u8bdd\uff0c\u5168\u662f\u6362\u6765\u6362\u53bb\uff0c\u4e0d\u7ba1\u600e\u4e48\u6362\u6700\u540e\u54ea\u4e2a\u6570\u90fd\u662f $0$\uff0c\u6240\u4ee5\u6bcf\u6b21\u64cd\u4f5c $3$ \u53ea\u4f1a\u67e5\u5230 $0$\uff0c\u76f4\u63a5\u5168\u8f93\u51fa $0$ \u5373\u53ef\u3002\n\n\u8fd9\u4e2a\u90e8\u5206\u53ef\u4ee5\u7279\u5224\u3002\n\n## \u6ca1\u6709 $1$ \u64cd\u4f5c\n\n\u8003\u8651\u4e00\u4e0b\u5982\u679c\u67e5 $x$\uff0c\u4f1a\u67e5\u5230\u4ec0\u4e48\u503c\u3002\u663e\u7136\uff0c\u5982\u679c\u5728 $x$ \u4e4b\u524d\u6ca1\u6709\u533a\u95f4\u63a8\u5e73\u64cd\u4f5c\u80fd\u591f\u5f71\u54cd\u5230 $x$\uff0c\u90a3\u663e\u7136\u4f1a\u67e5\u5230 $0$\u3002\u5426\u5219\u7684\u8bdd\uff0c\u5c31\u4f1a\u67e5\u5230\u6700\u8fd1\u4e00\u4e2a\u5bf9\u5b83\u9020\u6210\u5f71\u54cd\u7684\u63a8\u5e73\u7684\u503c\u3002\n\n\u611f\u89c9\u5e94\u8be5\u633a\u597d\u7406\u89e3\u7684\uff0c\u4f46\u8fd8\u662f\u4e3e\u4e2a\u4f8b\u5427\u3002\n\n```\n\u4e00\u4e9b\u64cd\u4f5c\n2 3 6 114514//\u628a[3,6]\u8d4b\u503c\u4e3a114514\n\u53e6\u4e00\u4e9b\u64cd\u4f5c\uff0c\u5176\u4e2d\u4e0d\u4f1a\u5bf9\u7b2c5\u4e2a\u6570\u6709\u5f71\u54cd\n3 5//\u67e55\u7684\u503c\n```\n\u663e\u7136\u4f1a\u67e5\u5230 $114514$\u3002\u56e0\u4e3a\u4e0d\u7ba1\u7b2c\u4e00\u884c(\u53ef\u80fd\u4ee3\u8868\u82e5\u5e72\u4e2a\u64cd\u4f5c)\u5e72\u4e86\u4ec0\u4e48\uff0c\u5728\u7b2c\u4e8c\u884c\u7684\u7b2c\u4e94\u4e2a\u6570\u4e00\u5b9a\u4f1a\u88ab\u8d4b\u503c\u4e3a $114514$\u3002\u800c\u4e0d\u7ba1\u7b2c\u4e09\u884c\u5e72\u4e86\u4ec0\u4e48\uff0c\u56e0\u4e3a\u5bf9\u7b2c\u4e94\u4e2a\u6570\u6ca1\u6709\u5f71\u54cd\uff0c\u6240\u4ee5\u7b2c\u4e94\u4e2a\u6570\u7684\u503c\u4e0d\u4f1a\u6539\u53d8\u3002\n\n\u7efc\u4e0a\uff0c\u6211\u4eec\u53ea\u8981\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u64cd\u4f5c $3$ \u627e\u5230\u6700\u8fd1\u7684\u4e00\u4e2a\u5bf9\u5b83\u6709\u5f71\u54cd\u7684\u63a8\u5e73\u64cd\u4f5c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n#define ll long long\n#define fo(i,a,b) for(int i=a;i<=b;++i)\n#define of(i,a,b) for(int i=a;i>=b;--i)\n\nstruct node\n{\n\tll pos,val;\n}f[N];\nnode search(int id,int pos)\n{\n\tof(i,id-1,1)\n\t{\n\t\tif(op[i].ty==2&&op[i].l<=pos&&pos<=op[i].r)\n\t\t\treturn f[id]=node{i,op[i].x};\n\t}\n\treturn node{0,0};\n}\nvoid init()\n{\n\tfo(i,1,m)\n\t{\n\t\tif(op[i].ty==3)\n\t\t{\n\t\t\tf[i]=search(i,op[i].x);\n\t\t}\n\t}\n}\n```\n\n\u5173\u4e8e\u4ee3\u7801\u4e2d\u7684\u53d8\u91cf\uff1a\n\n`f[i]`\u6307\u6700\u8fd1\u4e00\u4e2a\u80fd\u5f71\u54cd\u5230\u5f53\u524d\u64cd\u4f5c\u7684\u64cd\u4f5c\u3002`f[i].pos`\u662f\u90a3\u4e2a\u64cd\u4f5c\u7684\u7f16\u53f7\uff0c`f[i].val`\u662f\u90a3\u4e2a\u64cd\u4f5c\u80fd\u5f71\u54cd\u5230\u7684\u503c\u3002\n\n## \u6b63\u89e3\n\u5176\u5b9e\u5230\u4e0a\u9762\u90a3\u4e00\u6b65\u79bb\u6b63\u89e3\u5df2\u7ecf\u975e\u5e38\u8fd1\u4e86\uff0c\u73b0\u5728\u8003\u8651\u52a0\u5165\u64cd\u4f5c $1$\u3002\n\n\u5047\u5982\u6211\u4eec\u8981\u67e5 $3$,\u4f46\u662f\u524d\u9762\u8fdb\u884c\u4e86`1 2 3`\u7684\u64cd\u4f5c\u3002(\u5728\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u4e4b\u95f4\u6ca1\u6709\u64cd\u4f5c\u4f1a\u5f71\u54cd\u5230 $3$)\u73b0\u5728\u4f1a\u67e5\u5230\u51e0\u5462\uff1f\n\n\u663e\u7136\u4f1a\u67e5\u5230\u539f\u6765 $2$ \u7684\u503c\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u9012\u5f52\u53bb\u627e\u539f\u6765 $2$ \u7684\u503c\u4e86\u3002\n\n\u4ee3\u7801\u4e5f\u5f88\u597d\u5b9e\u73b0\uff0c\u53ea\u8981\u5728`search`\u91cc\u9762\u52a0\u4e00\u70b9\u4e1c\u897f\u3002\n\n```cpp\nnode search(int id,int pos)\n{\n\tof(i,id-1,1)\n\t{\n\t\tif(op[i].ty==2&&op[i].l<=pos&&pos<=op[i].r)\n\t\t\treturn f[id]=node{i,op[i].x};\n\t\tif(op[i].ty==1)\n\t\t{\n\t\t\tif(op[i].x==pos)\n\t\t\t\treturn f[id]=search(i,op[i].y);\n\t\t\telse if(op[i].y==pos)\n\t\t\t\treturn f[id]=search(i,op[i].x);\n\t\t}\n\t}\n\treturn node{0,0};\n}\n```\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u89e3\u51b3\u8be2\u95ee\u7684\u95ee\u9898\u4e86\u3002\u73b0\u5728\u5c31\u53d8\u6210\u4e86\u8fd9\u4e2a\u95ee\u9898\uff1a\n\n\u6709 $q$ \u4e2a\u8be2\u95ee\uff0c\u6bcf\u6b21\u95ee\u5728 $l$ \u5230 $r$ \u4e4b\u95f4 $type_i=3$ \u4e14 $pos_i\\geq l$ \u7684\u6240\u6709 $i$ \u7684 $val_i$ \u4e4b\u548c\u3002\n\n\u4e3a\u4ec0\u4e48\u8981 $pos_i\\geq l$\uff0c\u524d\u9762\u8bf4\u4e86\uff0c`pos`\u662f\u6700\u8fd1\u4e00\u4e2a\u80fd\u9020\u6210\u5f71\u54cd\u7684\u64cd\u4f5c\u7f16\u53f7\u3002\u5982\u679c $pos_i<l$ \u90a3\u6839\u672c\u4e0d\u4f1a\u6267\u884c\u5230\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u663e\u7136\u4f1a\u67e5\u5230 $0$\uff0c\u6240\u4ee5\u4e0d\u7528\u8003\u8651\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u53c8\u5f00\u4e86\u4e00\u4e2a`struct`\u6765\u5b58\u3002\n\n```cpp\nstruct sth\n{\n\tll id,ty,pos,val;\n}a[N];\n\nfo(i,1,m)\n\ta[i]=sth{i,op[i].ty,f[i].pos,f[i].val};\n```\n\n~~\u7136\u540e\u5230\u8fd9\u4e00\u6b65\u6211\u5c31\u5361\u4f4f\u4e86\u3002\u53ef\u80fd\u6709dalao\u4e00\u773c\u770b\u51fa\u6765\u62ff\u6811\u72b6\u6570\u7ec4\u641e\uff0c\u4f46\u6211\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u6ca1\u60f3\u5230\u3002\u6211\u521a\u5f00\u59cb\u662f\u62ff\u7684\u56de\u6eda\u83ab\u961f\uff0c\u7136\u540e\u5199\u7740\u5199\u7740\u53d1\u73b0\u6269\u5c55\u7684\u65f6\u5019\u4f1a\u51fa\u95ee\u9898\uff0c\u5bfc\u81f4\u6d6a\u8d39\u4e86\u597d\u4e45\u7684\u65f6\u95f4\u3002~~\n\n\u60f3\u5230\u6811\u72b6\u6570\u7ec4\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8be2\u95ee\u6309 $l$ \u964d\u5e8f\u6392\u5e8f\uff0c\u7136\u540e\u6309 $pos$ \u964d\u5e8f\u4f9d\u6b21\u628a $val$ \u52a0\u5165\u6811\u72b6\u6570\u7ec4\uff0c\u62ff\u53cc\u6307\u9488\u641e\uff0c\u8be2\u95ee\u7684\u65f6\u5019\u76f4\u63a5\u67e5`query(r)-query(l-1)`\u5c31\u884c\u4e86\u3002\n\n## Code\n\n[\u8fd9\u91cc](https://www.luogu.com.cn/paste/8ww6hi41)",
        "postTime": 1662694587,
        "uid": 476620,
        "name": "Guolar_JueMu",
        "ccfLevel": 5,
        "title": "P5524"
    },
    {
        "content": "**P5524 sol**\n\n\u9996 A\uff0c\u6211\u7684\u9996 A \u88ab\u62a2\u4e86\uff01\uff01\uff01\n\n~~\u5c5e\u4e8e\u5e38\u6570\u5927\u5e08\u4e86\u3002~~\n\n\n-----------------------------------------------\n\n\u5176\u5b9e\u8fd8\u662f\u626b\u63cf\u7ebf\u7684\u5957\u8def\uff0c\u7ef4\u62a4\u6bcf\u4e2a\u989c\u8272\u6bb5\u6240\u5c5e\u7684\u64cd\u4f5c\u3002\n\n$1$ \u64cd\u4f5c\u53ef\u4ee5\u662f\u770b\u5728\u4ea4\u6362\u4e24\u4e2a\u989c\u8272\u6bb5\u4ee5\u53ca\u5b83\u4eec\u6240\u5c5e\u7684\u64cd\u4f5c\u3002\u901a\u8fc7\u5206\u7c7b\u8ba8\u8bba\u4e0d\u96be\u8bc1\u660e\u8fd9\u662f\u5bf9\u7684\u3002\u6ce8\u610f\u4e0d\u662f\u5c06\u6240\u5c5e\u7684\u64cd\u4f5c\u8d4b\u4e3a**\u5f53\u524d\u7684\u4ea4\u6362\u64cd\u4f5c\uff0c\u800c\u662f\u4ea4\u6362\u6240\u5c5e\u7684 $2$ \u64cd\u4f5c\u3002**\n\n\n\u5206\u7c7b\u8ba8\u8bba\u7684\u662f\u5de6\u7aef\u70b9\u7684\u7740\u843d\u60c5\u51b5\u3002\n\n\u53ef\u4ee5\u7406\u89e3\u6210\u4ea4\u6362\u4e86\u4e24\u4e2a $2$ \u64cd\u4f5c\u7684\u67d3\u8272\u5bf9\u8c61\uff0c\u4f46\u4e0d\u5b8c\u5168\u7b49\u4ef7\u3002\n\n\u663e\u7136\u5bf9\u4e8e\u6bcf\u6b21 $3$ \u64cd\u4f5c\uff0c\u6211\u4eec\u6bcf\u6b21\u626b\u63cf\u7ebf\u65f6\u67e5\u8be2\u6700\u540e\u4e00\u4e2a\u5f71\u54cd\u5230\u5b83\u7684\u64cd\u4f5c\uff0c\u663e\u7136\u8be5\u64cd\u4f5c\u5728\u5b83\u524d\u9762\uff0c\u5728\u8fd9\u4e2a\u4f4d\u7f6e\u52a0\u4e0a\u67e5\u8be2\u7684\u7b54\u6848\u5373\u53ef\u3002\n\n\u6811\u72b6\u6570\u7ec4\u8f85\u52a9\u6c42\u548c\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\log n)$\uff0c\u5e94\u8be5\u5199\u7ebf\u6bb5\u6811\u7684\uff0c\u5927\u610f\u4e86\uff01\uff01\uff01\n\n\u5982\u679c\u6709\u670b\u53cb\u4e5f\u662f\u989c\u8272\u6bb5\u5747\u644a\u88ab\u5361\u5e38\u4e86\uff0c\u90a3\u5c31\uff1a\n\n- set \u4e0d\u8981\u5957\u7ed3\u6784\u4f53\uff1b\n\n- \u521d\u59cb\u7684\u989c\u8272\u6bb5\u76f4\u63a5\u63d2\u5165\u4e00\u4e2a\u5373\u53ef\uff1b\n\n- \u6811\u72b6\u6570\u7ec4\u67e5\u8be2\u7684\u65f6\u5019\u5f97\u5148\u770b\u5f53\u524d\u6709\u6ca1\u6709\u6302\u8be2\u95ee\uff0c\u7136\u540e\u5bf9\u4e8e\u6240\u6709 $r$ \u7684\u67e5\u8be2\u53ef\u4ee5\u5728\u67e5\u4e4b\u524d\u9884\u5904\u7406\u51fa\u6765\uff1b\n\n- \u5361\u4e00\u4e0b\u5feb\u8bfb\n\n\u8fd9\u6837\u53ef\u4ee5\u865a\u5047\u901a\u8fc7\u6b64\u9898\uff0c\u611f\u8c22 lxl \u5f00\u4e86 1s\u3002",
        "postTime": 1662557606,
        "uid": 132533,
        "name": "Hakuoro",
        "ccfLevel": 0,
        "title": "\u751f\u800c\u4e3a\u4eba\uff0c\u7eb5\u4f7f\u518d\u575a\u5f3a\uff0c\u4e00\u65f6\u7684\u8f6f\u5f31\u4e5f\u4e0d\u53ef\u907f\u514d"
    },
    {
        "content": "### \u9898\u76ee\u5206\u6790\n\n\u770b\u9898\uff0c\u53d1\u73b0\u540c\u65f6\u5b9e\u73b0 1\uff0c2 \u4e24\u79cd\u64cd\u4f5c\u5e76\u4e0d\u597d\u5199\uff0c\u4e8e\u662f\u5148\u770b\u90e8\u5206\u5206\u3002\n\n\u5bf9\u4e8e\u53ea\u8003\u8651 1 \u64cd\u4f5c\u7684\u60c5\u51b5\uff0c\u53ea\u9700\u6a21\u62df\u7b80\u5355\u4ea4\u6362\u5373\u53ef\u3002\n\n\u5bf9\u4e8e 2 \u64cd\u4f5c\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u8fdb\u884c\u7684\u662f\u533a\u95f4\u8986\u76d6\uff0c\u53cd\u5411\u601d\u8003\u4f1a\u53d1\u73b0\uff0c\u67e5\u8be2\u65f6\u6bcf\u4e2a\u4f4d\u7f6e\u7684\u6570\u636e\u53ea\u4f1a\u88ab\u65f6\u95f4\u9760\u524d\u7684\u6700\u63a5\u8fd1\u7684\u8986\u76d6\u64cd\u4f5c\u6240\u5f71\u54cd\u3002\n\n\u56e0\u6b64\uff0c\u6211\u4eec\u4f7f\u7528\u626b\u63cf\u7ebf\u7ef4\u62a4\u5e8f\u53f7\uff0c\u518d\u7528\u6811\u72b6\u6570\u7ec4\u79bb\u7ebf\u56de\u7b54\u3002\n\n\u800c\u5f53 1,2 \u64cd\u4f5c\u7efc\u5408\u8003\u8651\u65f6\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u4e0a\u6587\u7684\u201c\u7ef4\u62a4\u5bf9\u6bcf\u4e2a\u6570\u9020\u6210\u5f71\u54cd\u7684\u8be2\u95ee\u7684\u5e8f\u53f7\u201d\u7684\u64cd\u4f5c\u6ca1\u6709\u5b8c\u5168\u53d8\u5316\uff0c\u53ea\u662f\u968f\u7740 1 \u64cd\u4f5c\u8fdb\u5165\u8fd9\u4e2a\u5e8f\u53f7\u6539\u53d8\u4e86\u3002\n\n\u601d\u8003\u4ea4\u6362\u65f6\u5bf9\u5e8f\u53f7\u9020\u6210\u7684\u5f71\u54cd\uff0c\u4f1a\u53d1\u73b0\u672c\u8d28\u4e0a\u53ea\u4e0d\u8fc7\u662f\u4e24\u4e2a\u6570\u5bf9\u5e94\u7684\u5e8f\u53f7\u4ea4\u6362\u4e86\u800c\u5df2\uff0c\u4e8e\u662f\u95ee\u9898\u8fce\u5203\u800c\u89e3\uff0c\u53ea\u9700\u589e\u52a0\u4e00\u6b65\u4ea4\u6362\u64cd\u4f5c\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#define ll long long\nusing namespace std;\nll tr[10000001];\nll ans[10000001];\nll ans2[10000004];\nll n,m,q,maxn;\nstruct Node{\n\tll l,r,val,tag;\n\t#define l(x) a[x].l\n\t#define r(x) a[x].r\n\t#define v(x) a[x].val\n\t#define t(x) a[x].tag\n}a[10000001];\nstruct quer{\n\tll opt,l,r,num;\n}qry[10000001];\nquer lis[10000001];\ninline ll read(){\n    ll x=0,f=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        if(ch=='-')f=-1;\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    return x*f;\n}\ninline void write(ll X)\n{\n    if(X<0) {X=~(X-1); putchar('-');}\n    if(X>9) write(X/10);\n    putchar(X%10+'0');\n}\nvoid build(ll x,ll l,ll r){\n\tl(x)=l;\n\tr(x)=r;\n\tif(l==r) return;\n\tll mid=(l+r)>>1;\n\tbuild(x*2,l,mid);\n\tbuild(x*2+1,mid+1,r);\n}\nvoid push_down(ll x){\n\tif(t(x)){\n\t\tif(l(x*2)==r(x*2)) v(x*2)=t(x);\n\t\telse t(x*2)=t(x);\n\t\tif(l(x*2+1)==r(x*2+1)) v(x*2+1)=t(x);\n\t\telse t(x*2+1)=t(x);\n\t\tt(x)=0;\n\t}\n}\nvoid change(ll x,ll l,ll r,ll val){\n\tif(l(x)>=l && r(x)<=r){\n\t\tif(l(x)==r(x))v(x)=val;\n\t\telse t(x)=val;\n\t\treturn;\n\t}\n\tpush_down(x);\n\tint mid=(l(x)+r(x))>>1;\n\tif(l<=mid) change(x*2,l,r,val);\n\tif(r>mid) change(x*2+1,l,r,val);\n}\nll lowbit(ll x){\n\treturn x&(-x);\n}\nll ask(ll x){\n\tll ans=0;\n\twhile(x){\n\t\tans+=tr[x];\n\t\tx-=lowbit(x);\n\t}\n\treturn ans;\n}\nvoid add(ll x,ll val){\n\twhile(x<=m){\n\t\ttr[x]+=val;\n\t\tx+=lowbit(x);\n\t}\n}\nll query(ll x,ll p){\n\tif(l(x)==r(x)) return v(x);\n\tpush_down(x);\n\tll mid=(l(x)+r(x))>>1;\n\tif(p<=mid) return query(x*2,p);\n\telse return query(x*2+1,p);\n}\nbool cmp(quer x,quer y){\n\treturn x.r<y.r;\n}\nint main(){\n\tn=read();m=read();q=read();\n\tfor(ll i=1;i<=m;i++){\n\t\tqry[i].opt=read();\n\t\tif(qry[i].opt==1){\n\t\t\tqry[i].l=read();\n\t\t\tqry[i].r=read();\n\t\t}\n\t\telse if(qry[i].opt==2){\n\t\t\tqry[i].l=read();\n\t\t\tqry[i].r=read();\n\t\t\tqry[i].num=read();\n\t\t}\n\t\telse qry[i].num=read();\n\t}\n\tbuild(1,1,n);\n\tfor(ll i=1;i<=m;i++){\n\t\tif(qry[i].opt==1){\n\t\t\tll tmp1=query(1,qry[i].l),tmp2=query(1,qry[i].r);\n\t\t\tchange(1,qry[i].r,qry[i].r,tmp1);\n\t\t\tchange(1,qry[i].l,qry[i].l,tmp2);\n\t\t}\n\t\telse if(qry[i].opt==2)change(1,qry[i].l,qry[i].r,i);\n\t\telse{\n\t\t\tll tmp1=query(1,qry[i].num);\n\t\t\tans[i]=tmp1;\n\t\t}\n\t}\n\tfor(ll i=1;i<=q;i++){\n\t\tlis[i].l=read();lis[i].r=read();\n\t\tlis[i].opt=i;\n\t}\n\tsort(lis+1,lis+q+1,cmp);\n\tll r=0;\n\tfor(ll i=1;i<=q;i++){\n\t\twhile(r<lis[i].r){\n\t\t\tr++;\n\t\t\tif(qry[r].opt==3 && ans[r])add(ans[r],qry[ans[r]].num);\n\t\t}\n\t\tans2[lis[i].opt]=ask(r)-ask(lis[i].l-1);\n\t}\n\tfor(ll i=1;i<=q;i++){\n\t\twrite(ans2[i]);\n\t\tputchar('\\n');\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1663665715,
        "uid": 421265,
        "name": "eastcloud",
        "ccfLevel": 4,
        "title": "P5524 [Ynoi2012] \u5145\u6ee1\u4e86\u5e0c\u671b \u9898\u89e3"
    },
    {
        "content": "\u6ce8\u610f\u5230\u53ea\u6709\u533a\u95f4\u8d4b\u503c\uff0c\u56e0\u6b64\u4e00\u4e2a\u8be2\u95ee\u7684\u503c\u53ea\u4f1a\u6709\u4e24\u79cd\uff1a$0$\uff0c\u6216\u8005\u524d\u9762\u6240\u6709\u64cd\u4f5c\u4e0b\u7684\u7b54\u6848\u3002\n\n\u8bc1\u660e\u8003\u8651\u53ea\u6709\u6700\u540e\u4e00\u6b21\u5bf9\u8be5\u4f4d\u7f6e\uff08\u4ea4\u6362\u4f4d\u7f6e\u4e4b\u524d\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u4ea4\u6362\u4e86\u7684\u8bdd\uff09\u7684\u8d4b\u503c\u662f\u6709\u7528\u7684\uff0c\u6b64\u524d\u7684\u64cd\u4f5c\u5168\u5220\u90fd\u4e0d\u6539\u53d8\u7ed3\u679c\uff0c\u4f46\u5220\u4e86\u8fd9\u4e2a\u4e4b\u540e\u5c31\u4f1a\u662f $0$\u3002\n\n\u6240\u4ee5\u5148\u6c42\u51fa\u6bcf\u6b21\u8be2\u95ee\u6240\u4f9d\u8d56\u7684\u4fee\u6539\u548c\u6700\u540e\u7684\u975e\u96f6\u503c\uff0c\u7136\u540e\u8003\u8651\u67e5\u8be2\u3002\n\n\u67e5\u8be2\u76f8\u5f53\u4e8e\u4e00\u4e2a\u4e8c\u7ef4\u504f\u5e8f\uff0c\u8981\u6c42 $l$ \u5c0f\u4e8e\u6240\u4f9d\u8d56\u7684\u4fee\u6539\u7684\u5e8f\u53f7\uff0c $r$ \u5927\u4e8e\u8fd9\u4e2a\u8be2\u95ee\u7684\u5e8f\u53f7\uff0c\u56e0\u4e3a\u663e\u7136\u6240\u4f9d\u8d56\u7684\u4fee\u6539\u7684\u5e8f\u53f7\u5c0f\u4e8e\u8fd9\u4e2a\u8be2\u95ee\u7684\u5e8f\u53f7\u3002\u79bb\u7ebf\u6392\u5e8f\u5373\u53ef\u3002",
        "postTime": 1662464649,
        "uid": 146070,
        "name": "Pekemetier",
        "ccfLevel": 8,
        "title": "P5524 [Ynoi2012] NOIP2017 \u5145\u6ee1\u4e86\u5e0c\u671b \u9898\u89e3"
    }
]
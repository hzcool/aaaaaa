[
    {
        "content": "\u9996\u5148\u6211\u4eec\u5b9a\u4e49\u201c\u5708\u201d\u4e3a\u4e0e\u539f\u70b9\u8ddd\u79bb\u76f8\u7b49\u7684\u70b9\u96c6\u3002\n\n```\n. . . 3 . . .\n. . 3 2 3 . .\n. 3 2 1 2 3 .\n3 2 1 0 1 2 3\n. 3 2 1 2 3 .\n. . 3 2 3 . .\n. . . 3 . . .\n```\n\n### \u66b4\u529b\uff1a\n\n\u628a\u5708\u653e\u5230\u5806\u91cc\uff0c\u7136\u540e\u6bcf\u6b21\u53d6\u51fa\u4ee3\u4ef7\u6700\u5c0f\u7684\u4e00\u5708\uff0c\u4fee\u6539\u5f53\u524d\u5708\u7684\u697c\u5c42\uff0c\u5411\u5916\u5708\u62d3\u5c55\u3002\n\n### \u6b63\u89e3\uff1a\n\n\u8003\u8651\u4e8c\u5206\u3002\n\n\u5982\u679c\u662f\u4e8c\u5206\u6700\u7ec8\u7b54\u6848\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u4e0d\u597d\u505a\uff0c\u6240\u4ee5\u6211\u4eec\u4e8c\u5206\u6240\u6709\u4f4f\u6237\u7684\u4ee3\u4ef7\u7684\u6700\u5927\u503c\uff0c\u5373 $c_i+dis \\cdot t$\uff08\u663e\u7136\u662f\u5177\u6709\u5355\u8c03\u6027\u7684\uff09\u3002\n\n```check``` \u51fd\u6570\uff1a\u7531\u4e8e\u5708\u7684\u603b\u6570\u662f $\\sqrt{n}$ \u7ea7\u522b\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u5708\u53ef\u4ee5\u4e8c\u5206\u51fa\u697c\u5c42\u7684\u6700\u5927\u503c\uff0c\u7136\u540e\u589e\u52a0\u4f4f\u6237\u603b\u6570\uff0c\u6700\u540e ```return cnt >= n```\u3002\n\n\u6211\u4eec\u4e8c\u5206\u51fa\u53ef\u884c\u4e0e\u4e0d\u53ef\u884c\u7684\u5206\u754c\u70b9\uff0c\u7136\u540e\u6700\u7ec8\u7b54\u6848\u53ea\u9700\u8981\u5728\u5206\u754c\u70b9\u7684\u4ee3\u4ef7\u7684\u57fa\u7840\u4e0a\u52a0\u4e0a\u4e00\u4e9b\u589e\u91cf\u5c31\u884c\u4e86\u3002\n\n\u5177\u4f53\u770b\u4ee3\u7801\u5427\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e6 + 5;\nll n, t, k, c[N], sum[N], cnt = 0, ans = 0, a[N];\nbool check(ll up) {\n\tcnt = 0; ans = 0;\n\tmemset(a, 0, sizeof(a));\n\tfor (ll i = 1;; ++i) {\n\t\tll dis = (i - 1) * t;\n\t\tint p = upper_bound(c + 1, c + k + 1, up - dis) - c - 1; //\u4e8c\u5206\u51fa\u7b2ci\u5708\u7684\u6700\u5927\u697c\u5c42 \n\t\tif (p < 1) break;\n\t\ta[i] = p;\n\t\tans += i * 4 * p * dis + sum[p] * i * 4;\n\t\tcnt += i * 4 * p;\n\t\tif (cnt >= n) return true;\n\t}\n\treturn false;\n}\nint main() {\n\tios::sync_with_stdio(false); cout.tie(0); cout.tie(0);\n\tcin >> n >> t >> k;\n\tfor (int i = 1; i <= k; ++i) cin >> c[i], sum[i] = sum[i - 1] + c[i]; \n\tll l = 1, r = 1e18;\n\twhile (r - l > 2) { //\u4e8c\u5206\u4f4f\u6237\u4ee3\u4ef7\u6700\u5927\u503c \n\t\tll mid = (l + r) / 2;\n\t\tif (check(mid)) r = mid;\n\t\telse l = mid;\n\t}\n\tll up;\n\tfor (ll i = r; i >= l; --i) {\n\t\tif (!check(i)) { //\u5206\u754c\u70b9 \n\t\t\tup = i + 1;\n\t\t\tbreak;\n\t\t}\n\t}\n\tint i, p;\n\tfor (i = 1;; ++i) { //\u8ba1\u7b97\u589e\u91cf \n\t\tll dis = (i - 1) * t;\n\t\tp = upper_bound(c + a[i] + 1, c + k + 1, up - dis) - c - 1;\n\t\tif (p <= a[i]) continue; //\u4e0d\u80fd\u5199\u6210break\uff01 \n\t\tif (cnt + i * 4 > n) break;\n\t\tans += i * 4 * (c[p] + dis);\n\t\tcnt += i * 4;\n\t}\n\tans += (n - cnt) * (c[p] + (i - 1) * t);\n\tcout << ans << endl;\n\treturn 0;\n}\n\n```\n",
        "postTime": 1661763804,
        "uid": 173864,
        "name": "EstasTonne",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7640 [BalticOI 2006 Day 2] CITY PLANNING"
    }
]
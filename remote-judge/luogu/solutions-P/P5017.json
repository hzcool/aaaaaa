[
    {
        "content": "### \u524d\u8a00\n\n\u542c\u8bf4\u4eca\u5e74\u666e\u53ca\u7ec4\u96be\u5ea6\u582a\u6bd4\u63d0\u9ad8 $Day\\ 1$\uff0c\u4f5c\u4e3a\u4e00\u540d~~\u534a\u9000\u5f79~~\u63d0\u9ad8\u9009\u624b\uff0c\u5fc3\u8840\u6765\u6f6e\uff0c\u7279\u5730\u6765\u63a5\u53d7\u8fd9\u9053\u7ecf\u5178\u597d\u9898\u7684\u6d17\u793c\u3002\n\n---\n\n### \u6b63\u6587\n\n\u8fd9\u662f\u4e00\u9053\u9898\u610f\u7b80\u660e\u7684\u9898\uff0c\u8bba\u89e3\u6cd5\u5374\u65e0\u6bd4\u591a\u6837\u3002\u6211\u4e2a\u4eba\u559c\u6b22\u5148\u628a\u9898\u610f\u62bd\u8c61\u5316\u3002\n\n\u6211\u4eec\u4e0d\u59a8\u8ba4\u4e3a\u65f6\u95f4\u662f\u4e00\u6761**\u6570\u8f74**\uff0c\u6bcf\u540d\u540c\u5b66\u6309\u7167\u5230\u8fbe\u65f6\u523b\u5206\u522b\u5bf9\u5e94\u6570\u8f74\u4e0a**\u53ef\u80fd\u91cd\u5408\u7684\u70b9**\u3002\u5b89\u6392\u8f66\u8f86\u7684\u5de5\u4f5c\uff0c\u7b49\u540c\u4e8e\u5c06\u6570\u8f74\u5206\u6210\u82e5\u5e72\u4e2a**\u5de6\u5f00\u53f3\u95ed**\u6bb5\uff0c\u6bcf\u6bb5\u7684\u957f\u5ea6 $\\geqslant m$\u3002\u539f\u672c\u7684\u7b49\u8f66\u65f6\u95f4\u4e4b\u548c\uff0c\u81ea\u7136\u5c31\u8f6c\u6362\u6210\u6240\u6709\u70b9\u5230\u5404\u81ea**\u6240\u5c5e\u6bb5\u53f3\u8fb9\u754c**\u7684**\u8ddd\u79bb\u4e4b\u548c**\u3002\n\n\u5982\u679c\u60a8\u65e0\u6cd5\u7406\u89e3\u590d\u6742\u7684\u6587\u5b57\u63cf\u8ff0\uff0c\u8bd5\u56fe\u7ed3\u5408\u4e0b\u9762\u7684\u8fd9\u5e45\u56fe\u601d\u8003\uff1a\n\n![](https://i.loli.net/2018/11/13/5bead5ac2c9c8.png)\n\n\u8fd9\u4e0d\u5c31\u6709\u4e2a\u9c9c\u660e\u7684\u7ebf\u6027 $dp$ \u6a21\u578b\u4e86\u5417\uff1f\u8bbe $f_i$ \u8868\u793a\u5bf9\u6570\u8f74\u4e0a $(-\\infty,\\ i]$ \u5206\u6bb5\uff0c\u4e14\u6700\u540e\u4e00\u6bb5\u7684\u53f3\u8fb9\u754c\u662f $i$\uff0c\u4f4d\u4e8e $(-\\infty,\\ i]$ \u5185\u7684\u70b9\u5230\u5404\u81ea\u6240\u5c5e\u6bb5\u53f3\u8fb9\u754c\u7684\u8ddd\u79bb\u4e4b\u548c\u6700\u5c0f\u503c\u3002\u8f6c\u79fb\u5f0f\uff1a\n\n$$f_i = \\min_{j \\leqslant i-m}\\{ f_j+ \\sum_{j < t_k \\leqslant i} i-t_k \\}$$\n\n\u8bbe\u6700\u540e\u4e00\u6bb5\u5bf9\u5e94 $(j,\\ i]$\uff0c\u65e2\u7136\u5b83\u7684\u957f\u5ea6 $\\geqslant m$\uff0c\u5219\u6709 $j \\leqslant i - m$\u3002\u6211\u4eec\u77e5\u9053 $j < t_k \\leqslant i$\uff0c\u610f\u5473\u7740\u7b2c $k$ \u4e2a\u70b9\u5728\u8fd9\u6bb5\u4e2d\uff0c\u5b83\u5230\u53f3\u7aef\u7684\u8ddd\u79bb $= i - t_k$\uff0c\u56e0\u800c\u4ea7\u751f\u8fd9\u4e48\u591a\u7684\u8d21\u732e\u3002\u7d2f\u52a0\u8d21\u732e\uff0c\u4e0e $j$ \u4ee5\u524d\u7684\u6700\u4f18\u7b54\u6848 $f_j$\uff0c\u5373\u53ef\u63a8\u51fa\u8f6c\u79fb\u5f0f\u3002\n\n\u53e6\u5916\uff0c\u7279\u5224 $(-\\infty,\\ i]$ \u5355\u72ec\u4f5c\u4e3a\u4e00\u6bb5\u7684**\u8fb9\u754c\u60c5\u51b5**\uff0c\u5373 $f_i = \\sum\\limits_{t_k \\leqslant i}i - t_k$\u3002\n\n\u7136\u800c\u6211\u4eec\u5bf9 $\\sum\\limits_{j < t_k \\leqslant i} i-t_k$ \u675f\u624b\u65e0\u7b56\uff0c\u5982\u4f55\u5feb\u901f\u6c42\u51fa\u5462\uff1f\u8fd9\u65f6**\u524d\u7f00\u548c**\u6709\u4e86\u91cd\u5927\u7528\u9014\u3002\u62c6\uff0c\u62c6\uff0c\u62c6\uff01\n\n$$\\sum_{j < t_k \\leqslant i} i-t_k = (\\sum_{j < t_k \\leqslant i}i)-(\\sum_{j < t_k \\leqslant i}t_k)=(cnt_i - cnt_j) \\times i - (sum_i - sum_j)$$\n\n\u5176\u4e2d\uff0c$cnt_i$ \u8868\u793a $(-\\infty,\\ i]$ \u4e2d\u70b9\u7684\u4e2a\u6570\uff0c$sum_i$ \u8868\u793a $(-\\infty,\\ i]$ \u4e2d\u70b9\u7684\u4f4d\u7f6e\u4e4b\u548c\u3002\u987a\u4fbf\u6539\u5199\u4e0b\u521a\u624d\u7684\u8f6c\u79fb\u5f0f\uff1a\n\n$$f_i = \\min_{j \\leqslant i-m}\\{ f_j +  (cnt_i - cnt_j) \\times i - (sum_i - sum_j)\\}$$\n\n\u8fd9\u91cc\u4ee4 $t = \\max\\limits_{1\\leqslant i \\leqslant n}\\{t_i\\}$\uff0c\u6700\u7ec8\u7b54\u6848\u53ea\u9700\u5728 $i \\geqslant t$ \u627e\u6700\u5c0f\u7684 $f_i$ \u5373\u53ef\u3002\u5b9e\u9645\u4e0a\uff0c$[t,\\ t + m)$ \u5305\u542b\u4e86\u6240\u6709\u53ef\u80fd\u7684\u7b54\u6848\u3002\n\n\u81f3\u6b64\uff0c\u6211\u4eec\u6709\u4e86 $50$ \u5206\u7684\u4f18\u79c0\u505a\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(t^2)$\u3002\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nconst int maxT = 4000105;\n\nint n, m, t, ti, ans = 1e9, cnt[maxT], sum[maxT], f[maxT];\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i++) {\n        scanf(\"%d\", &ti); t = std::max(t, ti);\n        cnt[ti]++; sum[ti] += ti;\n    }\n    for (int i = 1; i < t + m; i++) { cnt[i] += cnt[i - 1]; sum[i] += sum[i - 1]; } // \u524d\u7f00\u548c.\n    for (int i = 0; i < t + m; i++) {\n        f[i] = cnt[i] * i - sum[i]; // \u7279\u5224\u8fb9\u754c\u60c5\u51b5.\n        for (int j = 0; j <= i - m; j++) { f[i] = std::min(f[i], f[j] + (cnt[i] - cnt[j]) * i - (sum[i] - sum[j])); }\n    }\n    for (int i = t; i < t + m; i++) { ans = std::min(ans, f[i]); }\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u7206\u70b8\uff0c\u600e\u4e48\u529e\uff1f\u4f7f\u7528 $dp$ **\u4f18\u5316\u6cd5\u5b9d\u4e00\uff1a\u526a\u53bb\u65e0\u7528\u8f6c\u79fb**\uff01\n\n\u8fd9\u662f\u539f\u6765\u7684\u8f6c\u79fb\u5f0f\uff1a\n\n$$f_i = \\min_{j \\leqslant i-m}\\{ f_j +  (cnt_i - cnt_j) \\times i - (sum_i - sum_j)\\}$$\n\n\u5b9e\u9645\u4e0a\u53ea\u9700\u8981\uff1a\n\n$$f_i = \\min_{i - 2m < j \\leqslant i-m}\\{ f_j +  (cnt_i - cnt_j) \\times i - (sum_i - sum_j)\\}$$\n\n\u4e0d\u77e5\u4f60\u662f\u5426\u770b\u5230\u4e86\u533a\u522b\uff1f\u4ecd\u7136\u8003\u8651 $(j,\\ i]$ \u6bb5\u7684\u957f\u5ea6\uff0c\u7531\u4e8e\u5206\u7684\u6bb5\u6570\u4e0d\u4f1a\u589e\u5927\u7b54\u6848\uff0c\u5f53\u5b83\u7684\u957f\u5ea6 $\\geqslant 2m$ \u65f6\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u518d\u7ed9\u5b83\u5207\u4e00\u5200\uff0c\u5f97\u5230**\u4e0d\u52a3**\u7684\u7b54\u6848\u3002\u901a\u8fc7\u6b64\u6027\u8d28\uff0c\u53ef\u526a\u53bb\u5927\u91cf\u65e0\u7528\u8f6c\u79fb\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u81f3 $O(tm)$\uff0c\u6309\u7167\u5199\u6cd5\u5e38\u6570\u53ef\u83b7\u5f97 $70$ ~ $100$ \u4e0d\u7b49\u7684\u6210\u7ee9\uff0c\u5e76\u4e0d\u6392\u9664\u5728 $CCF$ \u5c11\u7237\u673a\u4e0a\u8d85\u65f6\u7684\u53ef\u80fd\u3002\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nconst int maxT = 4000105;\n\nint n, m, t, ti, ans = 1e9, cnt[maxT], sum[maxT], f[maxT];\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i++) {\n        scanf(\"%d\", &ti); t = std::max(t, ti);\n        cnt[ti]++; sum[ti] += ti;\n    }\n    for (int i = 1; i < t + m; i++) { cnt[i] += cnt[i - 1]; sum[i] += sum[i - 1]; } // \u524d\u7f00\u548c.\n    for (int i = 1; i < t + m; i++) {\n        f[i] = cnt[i] * i - sum[i]; // \u7279\u5224\u8fb9\u754c\u60c5\u51b5.\n        for (int j = std::max(i - m - m + 1, 0)/*\u526a\u53bb\u65e0\u7528\u8f6c\u79fb*/; j <= i - m; j++) { f[i] = std::min(f[i], f[j] + (cnt[i] - cnt[j]) * i - (sum[i] - sum[j])); }\n    }\n    for (int i = t; i < t + m; i++) { ans = std::min(ans, f[i]); }\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```\n\n\u4e0d\u7a33\uff0c\u5f88\u865a\uff0c\u600e\u4e48\u529e\uff1f\u4f7f\u7528 $dp$ **\u4f18\u5316\u6cd5\u5b9d\u4e8c\uff1a\u526a\u53bb\u65e0\u7528\u72b6\u6001**\uff01\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe\u6b63\u5728\u6c42 $f_i$\uff0c\u4f46\u5728 $(i-m,\\ i]$ \u4e2d\u6ca1\u6709\u4efb\u4f55\u70b9\uff0c\u8fd9\u4e2a $f_i$ \u76f8\u5bf9\u6765\u8bf4\u5c31\u662f **\u201c\u65e0\u7528\u201d** \u7684\u3002\u539f\u56e0\u662f\u82e5\u6700\u540e\u4e00\u6bb5\u957f\u5ea6\u6070\u597d $= m$\uff0c\u8fd9\u91cc\u9762\u53c8\u6ca1\u6709\u4efb\u4f55\u70b9\uff0c\u4e0d\u5206\u5272\u4e5f\u7f62\u3002\u957f\u5ea6 $>m$ \u65f6\uff0c\u5b8c\u5168\u53ef\u4ee5\u628a\u8fd9\u4e00\u6bb5\u7684\u53f3\u8fb9\u754c\u5f80\u5de6\u201c\u62d6\u201d\uff0c\u4ea7\u751f**\u4e0d\u52a3**\u7684\u7b54\u6848\u3002\n\n\u7136\u800c\u76f4\u63a5\u6254\u6389\u8fd9\u4e2a\u72b6\u6001\uff0c\u4f1a\u4e0e\u4e0a\u4e00\u4e2a\u4f18\u5316\u7f29\u5c0f\u8f6c\u79fb\u8303\u56f4\u8d77\u51b2\u7a81\uff0c\u6545**\u65e0\u7528**\u7684\u4f4d\u7f6e\u4ee4 $f_i = f_{i-m}$\uff0c\u9632\u6b62\u6f0f\u89e3\u3002\n\n\u53ef\u4ee5\u8bc1\u660e**\u201c\u6709\u7528\u201d**\u7684\u4f4d\u7f6e $\\leqslant nm$ \u4e2a\uff0c\u6545\u65f6\u95f4\u590d\u6742\u5ea6\u518d\u6b21\u4f18\u5316\u6210 $O(nm^2 + t)$\u3002\u671f\u671b\u5f97\u5206 $100$ \u5206\u3002\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nconst int maxT = 4000105;\n\nint n, m, t, ti, ans = 1e9, cnt[maxT], sum[maxT], f[maxT];\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i++) {\n        scanf(\"%d\", &ti); t = std::max(t, ti);\n        cnt[ti]++; sum[ti] += ti;\n    }\n    for (int i = 1; i < t + m; i++) { cnt[i] += cnt[i - 1]; sum[i] += sum[i - 1]; } // \u524d\u7f00\u548c.\n    for (int i = 0; i < t + m; i++) {\n        if (i >= m && cnt[i - m] == cnt[i]) { f[i] = f[i - m]; continue; } // \u526a\u53bb\u65e0\u7528\u72b6\u6001.\n        f[i] = cnt[i] * i - sum[i]; // \u7279\u5224\u8fb9\u754c\u60c5\u51b5.\n        for (int j = std::max(i - m - m + 1, 0)/*\u526a\u53bb\u65e0\u7528\u8f6c\u79fb*/; j <= i - m; j++) { f[i] = std::min(f[i], f[j] + (cnt[i] - cnt[j]) * i - (sum[i] - sum[j])); }\n    }\n    for (int i = t; i < t + m; i++) { ans = std::min(ans, f[i]); }\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```\n\n\u8fd9\u6837\u5199\u6beb\u65e0\u903c\u683c\uff0c\u600e\u4e48\u529e\uff1f\u4f7f\u7528 $dp$ **\u4f18\u5316\u6cd5\u5b9d\u4e09\uff1a\u5229\u7528\u5355\u8c03\u6027\u8d28**\uff01\n\n\u79fb\u9664\u524d\u4e24\u4e2a\u4f18\u5316\uff0c\u8f6c\u53d8\u753b\u98ce\uff0c$j$ \u662f $i$ \u7684\u51b3\u7b56\u70b9\uff0c\u6ee1\u8db3\uff1a\n\n$$f_i = f_j +  (cnt_i - cnt_j) \\times i - (sum_i - sum_j)$$\n\n\u8fd8\u662f\u62c6\uff0c\u62c6\uff0c\u62c6\uff01\n\n$$f_i = f_j +  cnt_i \\times i - cnt_j \\times i - sum_i + sum_j$$\n\n\u628a\u53ea\u8ddf $j$ \u6709\u5173\u7684\u9879\u79fb\u5230\u5de6\u8fb9\uff0c\u8ddf $i,\\ j$ \u6709\u5173\u7684\u4e58\u79ef\u653e\u5728\u4e2d\u95f4\uff0c\u53ea\u8ddf $i$ \u6709\u5173\u7684\u9879\u79fb\u5230\u6700\u53f3\u8fb9\uff1a\n\n$$\\underline{f_j + sum_j}_{\\ y} = \\underline{i_{_{}}}_{\\ k} \\times \\underline{cnt_j}_{\\ x} + \\underline{(f_i - cnt_i \\times i + sum_i)}_{\\ b}$$\n\n\u8fd9\u4e0d\u662f**\u659c\u7387\u4f18\u5316**\u88f8\u9898\u5417\uff01\u659c\u7387 $i$ \u5355\u8c03\u4e0a\u5347\uff0c\u7ef4\u62a4\u4e0b\u51f8\u58f3\u3002\u5bf9\u4e8e $i$ \u628a $i - m$ \u63a8\u5165\u961f\u5217\uff0c\u5373\u53ef\u4fdd\u8bc1\u51b3\u7b56\u70b9 $j \\leqslant i - m$\u3002\n\n\u6bcf\u4e2a\u72b6\u6001\u70b9\u6700\u591a\u8fdb\u51fa\u961f\u5217\u4e00\u6b21\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(t)$\uff0c\u4ecd\u80fd\u62ff\u5230 $100$ \u5206\u3002\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nconst int maxT = 4000105;\n\nint n, m, t, ti, ans = 1e9, l = 1, r, cnt[maxT], sum[maxT], q[maxT], f[maxT];\n\ninline double getSlope(int u, int v) { return (double) (f[v] + sum[v] - f[u] - sum[u]) / (cnt[u] == cnt[v] ? 1e-9 : cnt[v] - cnt[u]); }\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    for (int i = 1; i <= n; i++) {\n        scanf(\"%d\", &ti); t = std::max(t, ti);\n        cnt[ti]++; sum[ti] += ti;\n    }\n    for (int i = 1; i < t + m; i++) { cnt[i] += cnt[i - 1]; sum[i] += sum[i - 1]; } // \u524d\u7f00\u548c.\n    for (int i = 0; i < t + m; i++) {\n        if (i - m >= 0) {\n        \twhile (l < r && getSlope(q[r - 1], q[r]) >= getSlope(q[r], i - m)) { r--; }\n        \tq[++r] = i - m; // \u628a\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u89e3\u7684\u63a8\u5165\u961f\u5217. \n        }\n    \twhile (l < r && getSlope(q[l], q[l + 1]) <= i) { l++; } // \u628a\u4e0d\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u89e3\u7684\u5f39\u51fa\u961f\u5217. \n        f[i] = cnt[i] * i - sum[i]; // \u7279\u5224\u8fb9\u754c\u60c5\u51b5.\n        if (l <= r) { f[i] = std::min(f[i], f[q[l]] + (cnt[i] - cnt[q[l]]) * i - (sum[i] - sum[q[l]])); } // \u659c\u7387\u4f18\u5316\u8f6c\u79fb. \n    }\n    for (int i = t; i < t + m; i++) { ans = std::min(ans, f[i]); }\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```\n\n\u6559\u7ec3\u52a0\u5f3a\u4e86\u8fd9\u9898\uff0c$t \\leqslant 10^9$\uff0c\u590d\u6742\u5ea6\u4f9d\u8d56 $t$ \u7684\u505a\u6cd5\u90fd\u6302\u4e86\uff0c\u600e\u4e48\u529e\uff1f\n\n\u638c\u63e1\u524d\u4e24\u4e2a\u4f18\u5316\u7684\u6838\u5fc3\u601d\u60f3\u540e\uff0c\u4e0d\u96be\u53d1\u73b0**\u6700\u4f18\u60c5\u51b5**\u4e0b\uff0c\u6bcf\u4e2a\u70b9\u5230\u6240\u5c5e\u6bb5\u53f3\u8fb9\u754c\u7684\u8ddd\u79bb $< 2m$\u3002\u4ee4 $g_{i,\\ j}$ \u8868\u793a\u5bf9 $t_{1..n}$ **\u6392\u5e8f**\u540e\uff08$0 \\leqslant j < 2m$\uff09\uff0c\u7b2c $i$ \u4e2a\u70b9\u8ddd\u79bb\u6240\u5c5e\u6bb5\u53f3\u8fb9\u754c $j$ \u4e2a\u5355\u4f4d\u65f6\uff0c\u7b2c $1..i$ \u4e2a\u70b9\u8ddd\u79bb\u4e4b\u548c\u7684\u6700\u5c0f\u503c\u3002\n\n\u7406\u8bba\u4e0a\uff0c\u60f3\u8981\u5f97\u5230 $g_{i,\\ j}$\uff0c\u6211\u4eec\u9700\u8981\u679a\u4e3e $k,\\ l$\uff0c\u7528 $g_{k,\\ l}$ \u8f6c\u79fb\u3002\u53ef\u6709\u8da3\u7684\u662f\uff0c\u5f53\u524d\u7684\u7b2c $i$ \u4e2a\u70b9\uff0c\u8981\u4e48\u548c\u7b2c $i - 1$ \u4e2a\u70b9\u5728**\u540c\u4e00\u6bb5\u5185**\uff0c\u8981\u4e48\u629b\u5f03\u7b2c $i - 1$ \u4e2a\u70b9\uff0c**\u65b0\u5f00\u4e86\u4e00\u6bb5**\uff0c\u800c\u81ea\u5df1\u662f\u91cc\u9762\u7684\u7b2c\u4e00\u4e2a\u3002\n\n\u603b\u800c\u8a00\u4e4b\uff0c\u53ea\u8981\u679a\u4e3e\u4e00\u4e2a $k$\uff0c\u7528 $g_{i-1,\\ k}$ \u8f6c\u79fb\u5f97\u5230 $g_{i,\\ j}$\uff0c\u4e24\u8005\u6ca1\u6709\u533a\u522b\u7684\u3002\n\n\u5728\u540c\u4e00\u6bb5\u5185\u7684\u60c5\u51b5\u5f88\u7b80\u5355\uff0c\u4e0d\u7528\u679a\u4e3e $k$ \u5c31\u53ef\u4ee5\u76f4\u63a5\u8f6c\u79fb\uff1a\n\n$$g_{i,\\ j} = g_{i - 1,\\ t_i + j - t_{i-1}} + j$$\n\n\u65b0\u5f00\u4e00\u6bb5\u7684\u60c5\u51b5\uff0c\u540c\u6837\u8981\u4fdd\u8bc1\u6bb5\u957f $\\geqslant m$\uff1a\n\n$$g_{i,\\ j} = \\min\\limits_{t_{i-1} + k + m \\leqslant t_i + j} \\{ g_{i - 1,\\ k} \\} + j $$\n\n\u6613\u77e5\uff0c\u968f\u7740 $j$ \u7684\u589e\u5927\uff0c\u80fd\u591f\u8f6c\u79fb\u7684 $k$ \u7684\u4e0a\u9650\u4e5f\u4e0d\u65ad\u589e\u5927\uff0c\u6545\u4f7f\u7528**\u524d\u7f00\u6700\u5c0f\u503c**\u7ef4\u62a4\u53ef\u4ee5\u8f6c\u79fb\u7684 $g_{i-1,\\ k}$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\ \\log\\ n + nm)$\uff0c\u5373 $O(nm)$\uff0c\u76ee\u524d\u770b\u5e94\u8be5\u662f\u6700\u5feb\u7684 $dp$ \u505a\u6cd5\u4e86\u3002\u6ce8\u610f\u8fb9\u754c\u7ec6\u8282\uff0c$AC$ \u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nconst int maxN = 505, maxM = 205;\n\nint n, m, mm, ans = 1e9, t[maxN], g[maxN][maxM];\n\nint main() {\n    scanf(\"%d%d\", &n, &m); mm = m + m;\n    for (int i = 1; i <= n; i++) { scanf(\"%d\", &t[i]); }\n    std::sort(t + 1, t + n + 1); // \u6392\u5e8f. \n    for (int i = 1; i <= n; i++) {\n    \tg[i][0] = 1e9; // \u5148\u7279\u5224 j = 0 \u7684\u60c5\u51b5. \n    \tfor (int j = 0; j <= std::min(t[i] - t[i - 1] - m, m - 1); j++) { g[i][0] = std::min(g[i][0], g[i - 1][j]); }\n    \tfor (int j = 1; j < mm; j++) { g[i][j] = std::min(g[i][j - 1], t[i] + j - t[i - 1] - m >= 0 && t[i] + j - t[i - 1] - m < mm ? g[i - 1][t[i] + j - t[i - 1] - m] : (int) 1e9); } // \u524d\u7f00\u6700\u5927\u503c\u7ef4\u62a4\u65b0\u5f00\u4e00\u6bb5\u7684\u60c5\u51b5. \n    \tfor (int j = 0; j < mm; j++) { g[i][j] = std::min(g[i][j], t[i] + j - t[i - 1] < mm ? g[i - 1][t[i] + j - t[i - 1]] : (int) 1e9) + j; } // \u5206\u5728\u540c\u4e00\u6bb5\u5185\u7684\u60c5\u51b5, \u52a0\u4e0a j \u7684\u8d21\u732e. \n    }\n    for (int i = 0; i < m; i++) { ans = std::min(ans, g[n][i]); }\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```\n\n\u542c\u540c\u5b66\u8bf4\uff0c\u4ed6\u6709\u4e00\u4e2a $O(n)$ \u7684\u505a\u6cd5\uff0c\u600e\u4e48\u529e\uff1f\n\n\u5f88\u62b1\u6b49\uff0c\u4f5c\u8005\u83dc\u5f97\u53ef\u601c\uff0c\u628a $dp$ \u7528\u5230\u6781\u81f4\u4e5f\u53ea\u6709 $O(nm)$\uff0c\u4f46**\u4e0d\u6e05\u695a**\u8d2a\u5fc3\u6216\u4e71\u641e\u662f\u5426\u80fd\u5728 $O(n)$ \u5185\u89e3\u51b3\u672c\u9898\u3002\n\n---\n\n### \u5c3e\u6ce8\n\n\u6216\u8bb8\u60a8\u53d1\u73b0\u4e86\uff0c\u6211\u7ed9\u51fa\u7684\u4ee3\u7801\u90fd\u7279\u522b\u77ed\u3002\u662f\u7684\uff0c\u8fd9\u9053\u9898\u8003\u9a8c\u7684\u5c31\u662f $dp$ \u7684\u7075\u6d3b\u8fd0\u7528\uff0c\u5408\u7406\u526a\u679d\u4f18\u5316\uff0c\u5229\u7528\u597d\u5176\u6027\u8d28\uff0c\u751a\u81f3\u80fd\u591f\u7528\u66f4\u52a0\u4f18\u7f8e\u7684\u505a\u6cd5\u66b4\u8e29\u6807\u7b97\u3002\u81f3\u4e8e\u4ee3\u7801\uff0c\u53ea\u6709\u4f1a\u6572\u548c\u61d2\u5f97\u6572\u3002",
        "postTime": 1542115230,
        "uid": 26673,
        "name": "Sooke",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u8003\u573a\u4e0a\u9001\u6211\u9000\u5f79\u7684\u9898\u76ee\uff0c\u56e0\u4e3a\u8fd9\u9898\u76ee\u6ca1\u53d1\u73b0t4\u662f\u641c\u7d22\u6c34\u9898\u3002\n\n\u8fd9\u4e2a\u9898\u5982\u679c15\u5206\u949f\u4e4b\u5185\u5199\u51fa\u6765\u8bf4\u660edp\u7684\u6c34\u5e73\u5f88\u5f3a\u4e86\u3002\n\n\u9996\u5148\u5148\u8bf4\u4e00\u4e0b\u2026\u2026\u8d2a\u5fc3\u4e00\u822c\u90fd\u80fd\u88ab\u8003\u573a\u4e0a\u7684\u5927\u6837\u4f8bhack\u4e86\uff0c\u9ad8\u7ea7\u8d2a\u5fc3\u5e94\u8be5\u4e5f\u8fc7\u4e0d\u53bb\u3002\n\n---\n\n\u770b\u5230\u6ca1\u6709\u4eba\u53d1\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u65b9\u6cd5\u6211\u5c31\u8865\u4e00\u4e0b\uff0c\u4ee3\u7801\u4e5f\u5f88\u7b80\u77ed\u3002\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#include <cctype>\n\nusing namespace std;\n\nint read()\n{\n\tint x=0,f=1;char ch=getchar();\n\twhile (!isdigit(ch)){if (ch=='-') f=-1;ch=getchar();}\n\twhile (isdigit(ch)){x=x*10+ch-48;ch=getchar();}\n\treturn x*f;\n}\n\nint n,m,t[505],mem[505][505];\n\n//\u56e0\u4e3a0<=st-t[i]<=m\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bb0\u5fc6\u5316\uff0c\u628a\u8fd9\u4e2a\u4f5c\u4e3a\u72b6\u6001\u7684\u7b2c\u4e8c\u7ef4 \n\nint solve(int i,int st)//\u8bb0\u5fc6\u5316\u641c\u7d22\u3002i\uff1a\u7b2ci\u4e2a\u4eba\uff0cst\uff1a\u5f00\u59cb\u65f6\u95f4st \n{\n\tif (i==n+1)//\u6240\u6709\u4eba\u90fd\u4e0a\u8f66\u4e86 \n\t\treturn 0;\n\tif (st<t[i])//\u5982\u679c\u73b0\u5728\u7684\u65f6\u95f4\u6ca1\u6709\u4eba\uff0c\u5c31\u5230\u4e0b\u4e00\u4e2a\u4eba\u7684\u5230\u8fbe\u65f6\u95f4 \n\t\treturn solve(i,t[i]);\n\tif (mem[i][st-t[i]])//\u8bb0\u5fc6\u5316 \n\t\treturn mem[i][st-t[i]];\n\tint sum=0,j=i;\n\t//\u8f66\u7b49\u4eba \n\twhile (j<=n && t[j]<=st)\n\t\tsum+=t[j++];\n\tint best=st*(j-i)-sum+solve(j,st+m); \n\t//\u4eba\u7b49\u8f66\n\tfor (;j<=n;j++)\n\t{\n\t\tsum+=t[j];\n\t\tbest=min(t[j]*(j-i+1)-sum+solve(j+1,t[j]+m),best);\n\t}\n\treturn mem[i][st-t[i]]=best;\n}\n\nint main()\n{\n\t//memset(mem,-1,sizeof(mem));\n\tn=read(),m=read();\n\tfor (int i=1;i<=n;i++)\n\t\tt[i]=read();\n\tsort(t+1,t+n+1);//\u663e\u7136\u4ece\u5c0f\u5230\u5927\u6309\u7167\u65f6\u95f4\u6392\u5e8f\u66f4\u597d\u7b97 \n\tcout << solve(1,0) << endl;\n\treturn 0;\n}\n\n```",
        "postTime": 1542971934,
        "uid": 8457,
        "name": "chen_zhe",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "## updated on 2019.10.25\uff1a\n\n1. \u4ee5\u524d\u7684\u7a0b\u5e8f\u771f\u7684\u4e11\u2026\u2026\u73b0\u5728\u5df2\u7ecf\u628a\u7801\u98ce\u6539\u826f\u4e86\uff1b\n\n2. \u53bb\u6389\u4e86\u4e4b\u524d\u90a3\u4e9b\u5b8c\u5168\u662f\u884c\u4e3a\u827a\u672f\u7684~~\u5c51~~\u4f18\u5316\u3002\n\n   ~~\u5411\u90a3\u4e9b\u88ab\u6211\u7684naive\u8bb2\u89e3\u548c\u4e11\u964b\u7a0b\u5e8f\u529d\u9000\u7684\u76c6\u53cb\u4eec\u8bda\u6073\u5730\u9053\u4e2a\u6b49\uff08\u96fe~~\n\n   \uff08\u56e0\u4e3a\u7b14\u8005\u662f$2020$\u5c4a\u4e2d\u8003\u751f\uff0c\u6240\u4ee5\u8fd9\u5e94\u8be5\u662f\u6700\u540e\u4e00\u6b21\u5927\u6539\u4e86\uff0c\u4ee5\u540e\u5c31\u4e0d\u4f1a\u6709\u65f6\u95f4\u4e86\u2026\u2026\uff09\n\n------\n\n\u5efa\u8bae\u5927\u5bb6\u5728\u535a\u5ba2\u91cc\u98df\u7528\uff1a[\u4f20\u9001\u95e8](https://www.cnblogs.com/info---tion/p/11277515.html)\n\n------\n\n~~\u8981\u662fPJ\u7ec4\u518d\u8003\u8fd9\u4e48\u96be\u7684DP\uff0c\u6211\u5c31\u5f53\u5b98\u628aCCF\u53d6\u7f14\u4e86~~\n\n------\n\n\u5f00\u4e2a\u73a9\u7b11\u3002\n\n### \u6b64\u9898\u6b63\u89e3\uff1a$\\mathrm{DP}$+\u5404\u79cd\u526a\u679d or \u4f18\u5316\n\n------\n\n## \u4e00\u3001\u5f15\u7406\n\n- \u5bf9\u4e8e\u6bcf\u4e2a\u4e58\u5ba2\uff0c\u80fd\u642d\u8f7dta\u7684\u8f66\u7684\u53d1\u8f66\u65f6\u95f4**\u53ea\u6709$m$\u79cd\u60c5\u51b5**\uff1b\n- \u8bbe\u8fd9\u4e2a\u4e58\u5ba2\u5f00\u59cb\u7b49\u5019\u7684\u65f6\u95f4\u662f$t_i$\uff0c\u5219\u5bf9\u5e94\u7684$m$\u79cd\u60c5\u51b5\u662f$[t_i,t_i+m)$\u3002\n\n### \u8bc1\u660e\n\n1. \u5982\u679c\u5b58\u5728\u4e00\u79cd\u60c5\u51b5\uff0c\u5176\u53d1\u8f66\u65f6\u95f4\u662f$\\geqslant t_i+m$\u7684\uff0c\u5219\u7531\u9898\u610f\u53ef\u77e5\uff0c\u53d1\u8f66\u65f6\u95f4\u53ef\u4ee5\u63d0\u65e9\u82e5\u5e72\u8f6e**\uff08\u4e5f\u5c31\u662f\u51cf\u53bb\u82e5\u5e72\u4e2a$m$\uff09**\u5230\u8fbe$[t_i,t_i+m)$\u8fd9\u4e2a\u533a\u95f4\uff0c**\u8fd9\u6837\u505a\u4e0d\u4f1a\u5f71\u54cd\u53d1\u8f66\u65f6\u95f4$\\geqslant t_i+m$\u7684\u90a3\u8d9f\u8f66**\u3002\n2. \u5982\u679c$<m$\u7684\u8bdd\uff0c\u90a3\u8fd9\u4e2a\u4e58\u5ba2\u6839\u672c\u5c31\u5750\u4e0d\u4e0a\u8fd9\u8d9f\u8f66\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u8003\u8651\u3002\n\n------\n\n## \u4e8c\u3001\u57fa\u672c\u601d\u60f3\n\n- \u9996\u5148\uff0c\u9898\u76ee\u7ed9\u5b9a\u6211\u4eec\u7684\u8fd9$n$\u4e2a\u4eba\u5f00\u59cb\u7b49\u5019\u7684\u65f6\u95f4\u662f\u4e71\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5148**\u6309\u7167\u5f00\u59cb\u7b49\u8f66\u7684\u65f6\u95f4\u628a\u8fd9$n$\u4e2a\u4eba\u6392\u4e2a\u5e8f**\uff0c\u7136\u540e\u518d**\u79bb\u6563\u5316\uff08\u5177\u4f53\u6765\u8bf4\u5c31\u662f\u5c06\u7b49\u5f85\u65f6\u95f4\u76f8\u540c\u7684\u82e5\u5e72\u4e2a\u4eba\u201c\u5408\u5e76\u201d\u6210\u4e00\u4e2a\u4eba\uff09**\u3002\n\n  \u5728\u7ed3\u6784\u4f53\u4e2d\uff0c\u7528`pos`\u8868\u793a**\u8fd9\u4e00\u5806\u4eba\u7684\u7b49\u5f85\u65f6\u95f4**\uff0c`num`\u8868\u793a**\u8fd9\u4e00\u5806\u4eba\u7684\u4eba\u6570\u3002**\uff08\u5177\u4f53\u8fc7\u7a0b\u770b\u4ee3\u7801\uff09\n\n- \u8bbe$f(i,j)$\u8868\u793a\u7528\u6446\u6e21\u8f66\u5df2\u7ecf\u8f7d\u4e86\u524d$i$\u4e2a\u4eba\uff0c\u4e14\u642d\u8f7d\u4e86\u7b2c$i$\u4e2a\u4eba**\uff08\u4e0d\u4e00\u5b9a\u53ea\u642d\u8f7d\u7b2c$i$\u4e2a\u4eba\uff09**\u7684\u90a3\u8d9f\u6446\u6e21\u8f66\u7684\u53d1\u8f66\u65f6\u95f4\u662f\uff08$t_i+j$\uff09\u7684\u6700\u5c0f\u7b49\u5019\u65f6\u95f4\u548c\u3002\uff08$t_i$\u7684\u610f\u4e49\u4e0e\u9898\u610f\u76f8\u540c\uff09\n\n- **\u8fd9\u91cc\u8981\u6ce8\u610f\uff1a$t_i+j$\u9664\u4e86\u8981\u6ee1\u8db3$j<m$\uff08\u5bf9\u5e94\u4e0a\u9762\u7684\u5f15\u7406\uff09\uff0c\u540c\u65f6\u8fd8\u8981\u6ee1\u8db3$j<t_{i+1}-t_i$\uff08\u5373$t_i+j<t_{i+1}$\uff09**\n\n  - \u56e0\u4e3a\u5982\u679c$j\\geqslant t_{i+1}$\uff0c\u90a3\u8fd9\u8d9f\u8f66\u5c31\u53ef\u4ee5\u628a\u7b2c$i+1$\u4e2a\u4eba\u4e5f\u642d\u4e0a\u4e86\uff0c**\u663e\u7136\u8fdd\u53cd\u4e86$\\mathrm{DP}$\u72b6\u6001\u7684\u5b9a\u4e49**\u3002\n\n    \uff08\u5728\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u540d\u4e3a`border(i)`\u7684`#define`\u8868\u793a\u4e86\u8fd9\u4e24\u4e2a\u9650\u5236\uff09\n\n- \u5bf9\u4e8e\u6bcf\u4e2a$f(i,j)$\uff0c\u679a\u4e3e\u4e0a\u4e00\u8d9f\u6446\u6e21\u8f66\u7684\u51fa\u53d1\u65f6\u95f4\u3002\n\n> \u7b49\u7b49\uff01\u6570\u636e\u8303\u56f4\u5199\u7740\uff1a\n\n> $$1 \\leqslant t_i \\leqslant 4\\times10^6 $$\n\n> \u4f60\u8ddf\u6211\u8bf4\u679a\u4e3e\u65f6\u95f4\uff1f\u4f60\u8fd9\u6700\u8d77\u7801\u90fd$O(nt_i) \\sim \\mathrm{T}(2\\times10^9)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e86\uff0c\u600e\u4e48$\\mathrm{AC}$\uff1f\n\n\u522b\u7740\u6025\u554a\uff0c\u6211\u8fd8\u6ca1\u8bf4\u5b8c\u5462\u3002\n\n- \u5176\u5b9e\u5f15\u7406\u5df2\u7ecf\u544a\u8bc9\u6211\u4eec\uff0c\u6211\u4eec**\u4e0d\u9700\u8981\u628a\u6574\u4e2a$t_i$\u679a\u4e3e\u5b8c**\u3002\n\n  \u7531\u5f15\u7406\u53ef\u5f97\uff0c\u5bf9\u4e8e\u524d$i-1$\u4e2a\u4e58\u5ba2\uff0c\u6bcf\u4e2a\u4e58\u5ba2\u80fd\u642d\u8f7d\u7684\u6446\u6e21\u8f66\u7684\u53d1\u8f66\u65f6\u95f4\u53ea\u6709$m$\u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u679a\u4e3e\u8fd9$(i-1)\\times m$\u79cd\u60c5\u51b5\u5373\u53ef\u3002\u5176\u4ed6\u60c5\u51b5\u90fd\u662f\u5e9f\u7684\uff0c\u4e0d\u9700\u8981\u53bb\u8003\u8651\u3002\n\n    \u8fd9\u6837\u505a\u7684\u679a\u4e3e\u91cf\u4e3a$O(nm) \\sim \\mathrm{T}(5 \\times 10^4)$\uff0c\u76f8\u6bd4\u4e4b\u524d\u76f4\u63a5\u679a\u4e3e$t_i$\u7684\u65f6\u95f4\u590d\u6742\u5ea6$\\mathrm{T}(4 \\times 10^6)$\u6765\u8bb2\uff0c\u5df2\u7ecf\u5c0f\u5f88\u591a\u4e86\u3002\n\n- \u63a5\u7740\uff0c\u5047\u8bbe\u524d\u4e00\u8d9f\u6446\u6e21\u8f66\u5df2\u7ecf\u8f7d\u4e86\u524d$k$\u4e2a\u4eba\uff0c\u90a3\u4e48\u6211\u4eec\u8981\u505a\u7684\u5c31\u53ea\u6709\u4e24\u4ef6\u4e8b\uff1a\n\n  1. \u518d\u679a\u4e3e\u4e00\u4e2a$l$\uff0c\u5f97\u5230$f(k,l)$\u7684\u6700\u5c0f\u503c\u3002\n  2. \u8ba1\u7b97\u51fa\u7b2c$k+1$\u4e2a\u4eba\u5230\u7b2c$i$\u4e2a\u4eba\u7b49\u5019**\u5f53\u524d\u8fd9\u8d9f\u6446\u6e21\u8f66**\u7684\u7b49\u5019\u65f6\u95f4\u548c\u3002\n\n### \u6572\u91cd\u70b9\uff01\u6572\u91cd\u70b9\uff01\u6572\u91cd\u70b9\uff01\n\n\n\n- \u8fd9\u91cc\uff0c$l$\u7684\u53d6\u503c\u8303\u56f4\u6709**\u4e09\u4e2a\u6761\u4ef6\uff1a**\n\n  - \u524d\u4e24\u4e2a\u6761\u4ef6\u548c\u524d\u9762\u7684`border()`\u4e00\u6837\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002\n\n  - \u7b2c\u4e09\u4e2a\u6761\u4ef6\u662f$l\\leqslant (t_i+j)-m-t_k$\uff08\u5373$t_k+l\\leqslant (t_i+j)-m$\uff09\n\n    - \u539f\u56e0\u5f88\u7b80\u5355\uff0c\u5982\u679c$t_k+l> (t_i+j)-m$,\u90a3\u4e48\u4e24\u8d9f\u8f66\u4e4b\u95f4\u76f8\u9694\u7684\u65f6\u95f4\u80af\u5b9a\u5c31$<m$\uff0c\u663e\u7136\u4e0d\u5408\u9898\u610f\u3002\n\n      \uff08\u6240\u4ee5\u8fd9\u91cc\u8fd8\u8981\u518d\u5b9a\u4e49\u4e00\u4e2a`border2(i)=min( border(i),\u7b2c\u4e09\u4e2a\u6761\u4ef6 )`\uff09\n\n- \u5728\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e2d\u7684\u4f53\u73b0\u5c31\u662f\uff1a\n\n  $$f(i,j)=\\min\\limits_{0 \\leqslant k < i,l\\leqslant \\mathrm{border2(k)}} \\{f(k,l)+col(k+1,i,t_i+j)\\}$$\n\n    \u8fd9\u5f53\u4e2d\uff0c$col(k+1,i,t_i+j)$\u8868\u793a**\u7b2c$k+1$\u4e2a\u4e58\u5ba2\u5230\u7b2c$i$\u4e2a\u4e58\u5ba2**\u7b49\u5019**\u53d1\u8f66\u65f6\u95f4\u4e3a$t_i+j$\u7684\u90a3\u8d9f\u6446\u6e21\u8f66**\u7684\u65f6\u95f4\u548c\uff0c\u76f4\u63a5\u7528\u4e00\u4e2a`for`\u5faa\u73af\u7d2f\u8ba1\u5373\u53ef\u3002\n\n  \uff08\u5f53\u7136\uff0c\u5f53$k=0$\u65f6\uff0c$f(k,l)$\u6052\u4e3a\u96f6\uff0c\u8868\u793a\u8fd9\u8d9f\u8f66\u76f4\u63a5\u628a\u524d$i$\u4e2a\u4eba\u5168\u90e8\u8f7d\u5b8c\uff0c\u8fd9\u65f6\u7b49\u5f0f\u53f3\u4fa7\u5c31\u76f4\u63a5\u7b49\u4e8e$col(1,i,t_i+j)$\uff09\n\n- \u7b97\u4e00\u4e0b\u4e0a\u9762\u8fd9\u4e2a\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff1a\n\n  1. \u9996\u5148\uff0c$i$\u548c$j$\u5fc5\u987b\u679a\u4e3e\uff0c\u6240\u4ee5\u662f$O(nm)$\u7684\u3002\n  2. \u5176\u6b21\uff0c$k$\u548c$l$\u4e5f\u662f\u8981\u679a\u4e3e\u7684\uff0c\u6240\u4ee5\u53c8\u662f\u4e00\u4e2a$O(nm)$\u3002\n  3. \u6700\u540e\uff0c\u6bcf\u6b21\u679a\u4e3e$i,j,k,l$\uff0c\u90fd\u8981\u8ba1\u7b97\u4e00\u6b21$col$\u51fd\u6570\uff0c\u800c\u8fd9\u4e2a$col$\u51fd\u6570\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(n)$\u7684\u3002\n\n  \u7efc\u4e0a\u6240\u8ff0\uff0c\u8fd9\u4e2a\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(nm\\times nm\\times n)=O(n^3m^2)$\u3002\n\n  \u8fd9\u65f6\u95f4\u590d\u6742\u5ea6\u2026\u2026\u4e5f\u592a~~\u53ef\u89c2~~\u4e86\u5427\n\n  **\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4f18\u5316\uff01\u4f18\u5316\uff01\u4f18\u5316\uff01**\n\n------\n\n## \u4e09\u3001\u7a0b\u5e8f\u5b9e\u73b0 or \u526a\u679d\n\n- \u6211\u4eec\u6765\u5173\u6ce8\u4e00\u4e0b\u8fd9\u4e2a\u5f0f\u5b50\uff1a\n$$col(k+1,i,t_i+j)$$\n  \u5bf9\u4e8e\u6bcf\u4e2a$i,j$\uff0c\u5f53$k$\u6bcf\u589e\u52a0$1$\u65f6\uff0c$col$\u7684\u503c\u5c31\u53ea\u4f1a\u51cf\u6389$(t_i+j-t_k)\\times num_k$\uff08$num_k$\u5c31\u662f\u4e0a\u6587\u4e2d\u63d0\u5230\u7684\uff0c\u7ed3\u6784\u4f53\u4e2d**\u7b2c$k$\u5806\u4eba\u7684\u4eba\u6570**\uff09\u3002\n\n  \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u679a\u4e3e\u6bcf\u4e2a$i$\u548c$j$\u65f6\uff0c\u5c31\u628a$col(1,i,t_i+j)$\u7b97\u51fa\u6765\uff08\u7528\u4e00\u4e2a\u53d8\u91cf$val$\u5b58\u8d77\u6765\uff09\n\n  \u7136\u540e\uff0c$k$\u4ece$1$\u5f00\u59cb\u679a\u4e3e\uff0c\u6bcf\u5f53$k$\u5728\u5faa\u73af\u4e00\u5f00\u59cb\u7b49\u4e8e\u67d0\u4e2a\u503c$x$\u65f6\uff0c$val$\u5c31\u51cf\u53bb$(t_i+j-t_x)\\times num_x$\u3002\n\n  \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u53d8\u4e3a\uff1a\n  \n  $$f(i,j)=\\min\\limits_{0 \\leqslant k < i,l \\leqslant \\mathrm{border2(k)}} \\{f(k,l)+val\\}$$\n\n  \u8fd9\u6837\u4e00\u62bd\u51fa\u6765\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u53d8\u6210\u4e86$O(nm(n+nm))=O(n^2m+n^2m^2)$\t\t\n  \u53ea\u4fdd\u7559\u6700\u9ad8\u6b21\u9879\u540e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u964d\u4e3a\u4e86$O(n^2m^2)$\uff01**\u8fd9\u5c31\u662f$60$\u5206\u7684\u505a\u6cd5\uff01**\n\n------\n\n- \u5176\u5b9e\u5927\u5bb6\u6709\u6ca1\u6709\u60f3\u8fc7\uff0c**\u679a\u4e3e$l$**\u8fd9\u4e2a\u64cd\u4f5c\u663e\u5f97\u6709\u4e9b\u591a\u4f59\uff0c\u53ef\u4e0d\u53ef\u4ee5\u7701\u53bb\u5462\uff1f\uff08\u6bd5\u7adf\u53ea\u662f\u6c42\u4e00\u4e2a\u6700\u5c0f\u503c\u800c\u5df2\uff0c\u6211**\u6c42\u5b8c\u4e00\u6b21\u5c31\u628a\u8fd9\u4e2a\u6700\u5c0f\u503c\u5b58\u8d77\u6765**\u4e0d\u5c31\u884c\u4e86\u5417\uff1f\uff09\n\n  **\u6ca1\u9519\uff0c\u4e0a\u9762\u7684\u60f3\u6cd5\u662f\u6b63\u786e\u7684\uff01**\n\n- \u6211\u4eec\u5f00\u591a\u4e00\u4e2a\u6570\u7ec4$\\mathrm{Min}(i,j)= \\min\\limits_{j\\leqslant \\mathrm{border}(i)} \\{f(i,j)\\}$\n\n   \u5219\u4e4b\u524d\u7684\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a\n\n   $f(i,j)=\\min\\limits_{0 \\leqslant k < i} \\{\\mathrm{Min}(k,\\mathrm{border2}(k))+val\\}$\n\n   **$\\mathrm{Min}$\u53ef\u4ee5\u5728\u6c42\u6bcf\u4e2a$f(k,l)$\u7684\u65f6\u5019\u987a\u5e26\u7ef4\u62a4\u3002**\n\n   \u56e0\u4e3a\u8fd9\u91cc\u53ea\u679a\u4e3e\u4e86$i,j,k$\uff0c\u6240\u4ee5$\\mathrm{DP}$\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(n^2m)$\uff01\uff01\uff01\n\n## \u8fd9\u4e2a\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\uff01\uff01\uff01\n\n------\n\n## \u56db\u3001\u8003\u573a\u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n\nconst int maxn=502,maxm=102;\nconst int INF=0x7fffffff;\n\n#define border2(x) min( border(x),lpos-Mem[x].pos )\t//\u7b2c\u4e09\u4e2a\u6761\u4ef6\u662f\u7528\u5c0f\u4e8e\u7b49\u4e8e\u53f7\u8fde\u63a5\u7684\uff0c\u6240\u4ee5\u4e0d\u7528-1\n#define border(x) min( m-1,Mem[x+1].pos-Mem[x].pos-1 )\t//\u56e0\u4e3a\u4e24\u4e2a\u6761\u4ef6\u90fd\u662f\u7528\u5c0f\u4e8e\u53f7\u8fde\u63a5\u7684\uff0c\u6240\u4ee5\u5728\u5faa\u73af\u4e2d\u8981-1\n\nint f[maxn][maxm];\nint Min[maxn][maxm];\n\nint a[maxn];\n\nstruct Node{int pos,num;}Mem[maxn];int sz;\n\nint col(int l,int r,int pos)\n{\n    int res=0;\n    for(int i=l;i<=r;i++) res+=(pos-Mem[i].pos)*Mem[i].num;\n\n    return res;\n}\n\nint main()\n{\n    int n,m;\n    scanf(\"%d%d\",&n,&m);\n\n    for(int i=1;i<=n;i++) scanf(\"%d\",&a[i]);\n    sort(a+1,a+n+1);\n\n\ta[0]=-1;\n\n    for(int i=1;i<=n;i++)\n    {\n        if( a[i]!=a[i-1] ) Mem[++sz].pos=a[i];\n        Mem[sz].num++;\n    }\n\n    Mem[sz+1]=(Node){INF,0};\n    n=sz;\n\n    for(int i=1;i<=n;i++) for(int j=0;j<=m;j++) f[i][j]=Min[i][j]=INF;\n\n    for(int i=1;i<=n;i++)\n        for(int j=0;j<=border(i);j++)\n        {\n            int pos=Mem[i].pos+j,lpos=pos-m;\n\n            int val=col(1,i,pos);\n            f[i][j]=val;\n\n            for(int k=1; k<i and Mem[k].pos<=lpos ;k++)\n            {\n                val-=(pos-Mem[k].pos)*Mem[k].num;\n                f[i][j]=min( f[i][j],Min[k][border2(k)]+val );\n            }\n            \n            Min[i][j]=f[i][j];\n            if( j>0 ) Min[i][j]=min( Min[i][j],Min[i][j-1] );\n        }\n\n    printf(\"%d\",Min[n][m-1]);return 0;\n}\n```\n\n------\n\n\u53c8\u662f\u4e00\u5e74\u8fc7\u53bb\u4e86\uff0c\u8fd9\u91cc\u5c31\u795d\u5927\u5bb6$\\mathrm{CSP\\ 2019\\ J/S}$\u8ba4\u8bc1rp++\uff01\n\n\uff08\u8bdd\u8bf4\uff0c\u8001\u5b50\u6253\u5b8c\u8fd9\u6b21\u4e5f\u8981\u9690\u9000\u4e86\u5462\u3002\u3002\u3002",
        "postTime": 1541860354,
        "uid": 76049,
        "name": "info___tion",
        "ccfLevel": 6,
        "title": "NOIP 2018\u3010\u6446\u6e21\u8f66\u3011\u9898\u89e3"
    },
    {
        "content": "# \u8003\u573a\u4e0a\uff0c\u89e3\u51fa\u8fd9\u9053\u9898\u76ee\uff0c\u9760\u7684\u5c31\u662f**\u201c\u65e0\u77e5\u8005\u65e0\u754f\u201d**\u7684\u7cbe\u795e\u3002\n\n\u4e3b\u8981\u662f\u56e0\u4e3a\u524d\u4e24\u9898\u5f88\u7b80\u5355\uff0c\u672c\u4ee5\u4e3a\u4eca\u5e74PJ\u4e5f\u548c\u5f80\u5e38\u4e00\u6837\u96be\u5ea6\uff0cT3\u7b80\u5355\u7206\u641c\uff0cT4~~\u7a0d\u5fae~~\u96be\u4e00\u70b9\u3002\u770b\u5230T3\u4e0d\u53ef\u80fd\u7206\u641c\uff0c\u5c31\u5f80**\u7b80\u5355**DP\u60f3\u3002\u6ca1\u60f3\u5230\u8fd9\u4e48\u96be\u3002\u3002\u3002\u786c\u7740\u5934\u76ae\u60f3\u51fa\u6765\u4e86\u3002\n\n\u95f2\u8bdd\u5c11\u8bf4\uff0c\u5f00\u59cb\u8bb2\u8ff0\u601d\u8def\uff08\u601d\u8003\u8fc7\u7a0b\uff09\u3002\n\n\u4e0b\u9762\u4e24\u4e2a\u5730\u540d\u3002\u3002\u3002~~\uff08CCF\u6253\u5e7f\u544a\uff1f\uff01\uff09~~\u76f4\u63a5\u7528 A\u5730 \u548c B\u5730 \u4ee3\u66ff\u4e86\u3002\n\n\u9996\u5148\uff0c\u770b\u5b8c\u9898\u76ee\u610f\u601d\uff0c\u5c31\u60f3\u5230\u4e86\u7b97\u6cd5\u2014\u2014**DP**\u3002~~\u522b\u95ee\u6211\u600e\u4e48\u60f3\u5230\u7684\uff0c\u5b66OI\u7684\u4eba\uff0c\u8fd9\u4e2a\u9898\u76ee\u662fDP\u90fd\u770b\u4e0d\u51fa\u6765\u5417~~\n\n\u7136\u540e\uff0c\u54b1\u4eec\u76f4\u5954100%\u7684\u6570\u636e~~\uff08\u8fd9\u4e48\u6709\u81ea\u4fe1\uff1f\uff01\uff09~~\u3002\u53d1\u73b0 $ n $ \u548c $ m $ \u90fd\u5f88\u5c0f\uff0c\u4f46\u662f $ t_i $ \u5f88\u5927\uff0c\u5982\u679cDP\u590d\u6742\u5ea6\u4e2d\u51fa\u73b0\u4e86 $ t_i $\uff0c\u90a3\u4e48\u57fa\u672c\u53ea\u80fd\u662f\u7ebf\u6027\u7684\u4e86~~\uff08CCF\u8001\u5e74\u59ec\uff09~~\u3002\u4f46\u662f\u6709\u4f4d\u673a\u623f\u5de8\u4f6c\u5199\u4e86\u4e00\u4e2a $ O(tm) $ \u7684\uff0c\u542c\u8bf4\u6700\u8fd1CCF\u8bc4\u6d4b\u901f\u5ea6\u6709\u6240\u589e\u52a0\uff0c\u8bf4\u4e0d\u5b9a\u80fd\u8fc7\u3002\n\n\u53cd\u6b63 $ n,m $ \u90a3\u4e48\u5c0f\uff0c\u660e\u6446\u7740\u5c31\u662f\u8ba9\u4f60\u7528\u7684\u3002\n\n\u90a3\u4e48\u5982\u4f55\u5b9a\u4e49\u72b6\u6001\u5462\uff1f\n\n\u9996\u5148\uff0c\u6392\u5e8f\u662f\u5fc5\u7136\u7684\u3002\n\n\u63a5\u7740\uff0c\u6700\u5bb9\u6613\u60f3\u5230\u7684\uff0c\u6700\u7b80\u5355\u7684\u72b6\u6001\u5b9a\u4e49\uff1a\n\n**\u7528 $ f[i] $ \u8868\u793a\u524d $ i $ \u4e2a\u4eba\u90fd\u5df2\u7ecf\u5230\u8fbeB\u5730\uff08\u4e0a\u8f66\u4e5f\u53ef\u4ee5\u7b97\u5230\u8fbe\uff0c\u6bd5\u7adf\u4e0d\u7528\u7b49\u4e86\uff09\uff0c\u6240\u9700\u8981\u7684\u6700\u5c11\u603b\u7b49\u5019\u65f6\u95f4**\u3002\n\n\u72b6\u6001\u600e\u4e48\u8f6c\u79fb\uff1f\u8fd9\u4e2a\u9898\u6211\u4eec\u9009\u62e9**\u5237\u8868**\uff08\u56e0\u4e3a\u586b\u8868\u592a\u9ebb\u70e6\u4e86\uff0c\u4e0d\u5982\u76f4\u63a5\u601d\u8003\u6211\u8fd9\u4e2a\u72b6\u6001\u5230\u54ea\u91cc\u53bb\uff09\n\n**\u679a\u4e3e $ k $\uff0c$ f[k] = f[i] + $ \u7b2c $ (i+1) $\u4e2a\u5b66\u751f\u5230\u7b2c $ k $ \u4e2a\u5b66\u751f\u7684\u603b\u7b49\u8f66\u65f6\u95f4\u3002**\n\n**\u8fd9\u4e2a\u603b\u7b49\u8f66\u65f6\u95f4\u5c31\u662f $ \\sum\\limits_{x=i+1}^k{ (T-t[x]) } $\u3002$ T $ \u662f\u8f66\u91cd\u65b0\u5230\u8fbeA\u5730\u7684\u65f6\u95f4\u3002**\u600e\u4e48\u8ba1\u7b97\u5462\uff1f\n\n\u6709\u6ca1\u6709\u4eba\u60f3\u5f53\u7136\u5730\u628a $ T $ \u76f4\u63a5\u770b\u505a $ t[k] $\uff1f\n\n\u770b\u4f3c\u662f\u5bf9\u7684\uff0c\u4f46\u5b9e\u9645\u4e0a\uff0c\u7b2c $ i $ \u4e2a\u5b66\u751f\u5230\u8fbe\u65f6\uff0c\u8f66\u6709\u53ef\u80fd\u8fd8\u6ca1\u6709\u5230\u8fbeA\u5730\uff01\u4f46\u662f\u8fd9\u6837\u7684\u8bdd\u600e\u4e48\u505a\u5462\uff1f\n\n~~\u6211\u4eec\u7684\u4fe1\u5965\u6559\u7ec3LJ\uff1a~~\u201cDP\u4e0d\u4f1a\u7684\u4e1c\u897f\u5c31\u52a0\u4e00\u7ef4\u201d\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u4e00\u6b21\u8f66\u5230\u8fbe\u7684\u65f6\u95f4\u8bb0\u5f55\u4e0b\u6765\uff0c\u653e\u5230DP\u72b6\u6001\u7684\u4e00\u7ef4\u91cc\u53bb\u3002\u8fd9\u6837\u72b6\u6001\u5b9a\u4e49\u5c31\u53d8\u6210\u4e86\uff1a\n\n**\u7528 $ f[i][j] $ \u8868\u793a\u524d $ i $ \u4e2a\u4eba\u5728 $ j $ \u65f6\u523b\u90fd\u5df2\u7ecf\u5230\u8fbeB\u5730\uff08\u540c\u4e0a\uff09\uff0c\u6240\u9700\u8981\u7684\u6700\u5c11\u603b\u7b49\u5019\u65f6\u95f4\u3002**\n\n\u6b64\u65f6 $ j $ \u5c31\u662f\u524d $ i $ \u4e2a\u4eba\u6700\u540e\u5168\u90e8\u63a5\u8d70\u65f6\u8f66\u5230\u8fbe\u7684\u65f6\u95f4\u3002\n\n\u91cd\u65b0\u89c2\u5bdf\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff0c\u5176\u4e2d $ max( j + m, t[k]) $ \u5c31\u662f $ T $\u3002\u770b\u4f3c\u597d\u50cf\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\u4e86\u3002\n\n\u4f46\u662f\u8fd9\u6837\u4e00\u6765\uff0c$ j $ \u53c8\u662f $ t_i $ \u8fd9\u4e2a\u7ea7\u522b\u7684\u4e86\uff0c\u627f\u53d7\u4e0d\u8d77\uff0c\u600e\u4e48\u529e\u5462\uff1f\n\n\u6ce8\u610f\u5230\u6b64\u65f6\uff0c$ j \\geqslant t[i] + m $ \u7684\u60c5\u51b5\u90fd\u662f\u65e0\u610f\u4e49\u7684\uff0c\u56e0\u4e3a\u5982\u679c $ j \\geqslant t[i] + m $\uff0c\u5219\u8bf4\u660e\u7b2c $ i $ \u4e2a\u4eba\u7b49\u4e86 $ \\geqslant m $ \u5206\u949f\u3002\u4f46\u662f\u5373\u4f7f\u8f66\u5728 $ t[i] - 1 $ \u65f6\u523b\u5f00\u8d70\uff0c\u4ed6\u4e5f\u53ea\u4f1a\u7b49\u4e0a $ m - 1 $ \u5206\u949f\u554a\uff01\uff08\u6ce8\u610f\uff0c\u6b64\u65f6\u6211\u4eec\u8ba8\u8bba\u7684\u662f**\u8f66\u4e00\u5230\u5c31\u628a\u7b2c $ i $ \u4e2a\u4eba\u63a5\u8d70**\u7684\u60c5\u51b5\uff0c\u4e0d\u8003\u8651\u7b2c $ i + 1 $ \u4e2a\u4eba\u4ee5\u53ca\u4e4b\u540e\u7684\u4eba\uff0c\u5982\u6709\u4e0d\u89e3\u89c1\u72b6\u6001\u5b9a\u4e49\uff09\n\n\u6240\u4ee5~~\u79bb\u6563\u5316~~\u72b6\u6001\u5b9a\u4e49\u53d8\u6210\u4e86\uff1a\n\n**\u7528 $ f[i][j] $ \u8868\u793a\u5728\u7b2c $ i $ \u4e2a\u4eba\u7b49\u4e86\u521a\u597d $ j $ \u5206\u949f\u7684\u65f6\u523b\uff0c\u524d $ i $ \u4e2a\u4eba\u5df2\u7ecf\u5230\u8fbeB\u5730\uff08\u540c\u4e0a\uff09\uff0c\u6240\u9700\u8981\u7684\u6700\u5c11\u603b\u7b49\u5019\u65f6\u95f4\u3002**\n\n\u91cd\u65b0\u5ba1\u89c6\u7a7a\u95f4\u590d\u6742\u5ea6\uff0c\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\u4e86\u3002\n\n\u6b64\u65f6\u524d $ i $ \u4e2a\u4eba\u6700\u540e\u5168\u90e8\u63a5\u8d70\u65f6\u8f66\u5230\u8fbe\u7684\u65f6\u95f4\u5c31\u662f $ t[i] + j $\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e2d\u5e94\u8be5\u6dfb\u52a0\u7684\u90a3\u4e00\u7ef4\uff08$ f[k] \\rightarrow f[k][?] $ \u4e2d\u7684 $ ? $\uff09\uff0c\u4e5f\u5c31\u662f\u7b2c $ k $ \u4e2a\u4eba\u7684\u7b49\u5f85\u65f6\u95f4\u662f\uff1a\n\n$ max( t[i] + j + m - t[k], 0 ) = tmp $\uff08\u4e0b\u6587\u56e0\u4e3a\u8fd9\u4e2a\u91cf\u591a\u6b21\u51fa\u73b0\uff0c\u6240\u4ee5\u7b80\u5316\u4e3a $ tmp $\uff09\n\n$ t[i] + j + m $ \u5c31\u662f\u8f66\u5230\u7684\u65f6\u95f4\u3002\u51cf\u53bb $ t[k] $ \u5c31\u662f\u7b49\u5019\u7684\u65f6\u95f4\u3002~~\u8fd9\u4e2a\u5e94\u8be5\u5f88\u597d\u7406\u89e3\u5427~~\n\n\u73b0\u5728 $ T $ \u73c2\u4ee5~~\u4e0d\u7528\u601d\u8003\u5c31~~\u5f97\u51fa\uff1a$ T = $ \u7b2c $ k $ \u4e2a\u4eba\u7b49\u5019\u7684\u65f6\u95f4 $ + t[k] = tmp + t[k] $\uff08\u5f53\u7136\u53ef\u4ee5\u8fdb\u4e00\u6b65\u7b80\u5316~~\uff0c\u4f46\u662f\u683c\u5f0f\u4e00\u81f4\uff0c\u800c\u4e14\u5c11\u6253\u51e0\u4e2a\u5b57\u7b26~~\uff09\n\n\u6240\u4ee5\u73b0\u5728\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u957f\u8fd9\u6837\uff1a\n\n**$ f[k][tmp] = f[i][j] + $ \u7b2c $ (i+1) $\u4e2a\u5b66\u751f\u5230\u7b2c $ k $ \u4e2a\u5b66\u751f\u7684\u603b\u7b49\u8f66\u65f6\u95f4\u3002**\n\n**\u603b\u7b49\u8f66\u65f6\u95f4 $ = \\sum\\limits_{x=i+1}^k{ (T-t[x]) } $\u3002$ T = tmp + t[k] $\u3002**\n\n\uff08\u4e3a\u4ec0\u4e48 $ f[k][0 $ \u5230 $ tmp-1] $ \u4e0d\u8003\u8651\uff1f\u56e0\u4e3a\u5b83\u4eec\u4e0d\u53ef\u80fd\u8fbe\u5230\uff0c\u4e3a $ inf $\uff1b\u4e3a\u4ec0\u4e48 $ f[k][tmp+1 $ \u5230 $ m-1] $ \u4e0d\u8003\u8651\uff1f\u56e0\u4e3a\u5b83\u4eec\u53cd\u6b63\u4e0d\u662f\u6700\u4f18\u7684\uff0c\u4e0d\u8003\u8651\u4e5f\u6ca1\u4e8b\uff09\n\n**$ f[k][tmp] = f[i][j] + \\sum\\limits_{x=i+1}^k{ (tmp+t[k]-t[x]) } $**\n\n\u8ba1\u7b97\u4e00\u4e0b\u65f6\u95f4\u590d\u6742\u5ea6\uff08\u6700\u5dee\uff09\uff1a\u904d\u5386\u72b6\u6001 $ O(nm) $\uff0c\u679a\u4e3e\u8f6c\u79fb $ O(n) $\uff0c\u8f6c\u79fb\u8fc7\u7a0b\u3002\u3002\u3002\u600e\u4e48\u8fd8\u8981 $ O(n) $\uff1f\uff01$ O(n^3m) $ \u4e0d\u662f\u70b8\u4e86\u5417qwq\n\n\u4ed4\u7ec6\u89c2\u5bdf\u90a3\u4e2a $ \\sum $\uff0c\u53d1\u73b0 $ (tmp + t[k]) $ \u662f\u5b9a\u503c\uff0c\u6240\u4ee5\u63d0\u51fa\u6765\uff1a\n\n**$ f[k][tmp] = f[i][j] + (tmp + t[k]) \\times (k - i) - \\sum\\limits_{x=i+1}^k{t[x]} $**\n\n\u7136\u540e\u90a3\u4e2a $ \\sum $ \u73c2\u4ee5**\u524d\u7f00\u548c**\u4f18\u5316\uff01\n\n**$ f[k][tmp] = f[i][j] + (tmp + t[k]) \\times (k - i) - (t[k] - t[i]) $**\n\n\u81f3\u6b64\uff0c\u8f6c\u79fb\u590d\u6742\u5ea6 $ O(1) $\u3002\n\n\u6240\u4ee5\u4ee3\u7801\u5c31\u53ef\u4ee5\u5199\u51fa\u6765\u5566~\n\n\u6ce8\u610f\uff1a\u6211\u5199\u7684\u4ee3\u7801\u91cc\uff0c\u679a\u4e3e\u7684 $ k $ \u4e0d\u662f\u8f6c\u79fb\u65b9\u7a0b\u4e2d\u7684 $ k $\uff0c\u8f6c\u79fb\u65b9\u7a0b\u4e2d\u7684 $ k $ \u5728\u6211\u7684\u4ee3\u7801\u4e2d\u662f $ i + k $\uff08\u5177\u4f53\u770b\u4e86\u4ee3\u7801\u5c31\u660e\u767d\u4e86\uff09\u3002\u8fb9\u754c\u60c5\u51b5\u6211\u76f4\u63a5\u628a $ t[0] $ \u8bbe\u505a\u4e86 $ -inf $\uff08\u5047\u8bbe\u6709\u7b2c0\u4e2a\u4eba\uff0c\u4e0a\u8f66\u65f6\u95f4\u662f $ -inf $\uff0c\u4ece0\u5f00\u59cb\u505a\uff0c\u5c31\u53ef\u4ee5\u4e0d\u7528\u66f4\u65b0 $ f[i][0] $ \u4e86\uff09\u3002\n\n\u5f53\u7136\u8fd8\u6709\u66f4\u5feb\u7684\u505a\u6cd5\uff08\u6bd4\u5982 $ O(nm) $\uff09\uff0c\u4f46\u662f\u8003\u573a\u4e0a\u80fd\u60f3\u51fa~~\u5982\u6b64\u4f18\u79c0\u7684~~\u505a\u6cd5\u5c31\u5df2\u7ecf\u4e0d\u9519\u5566qwq~\n\n**UPDATE 11.21\uff1a**\n\n - \u542c\u8bf4\u6709\u6559\u7ec3\u628a $ O(t_i) $ \u7684\u8303\u56f4\u6539\u6210\u4e86 $ \\leqslant 10^9 $\uff0c\u8fd9\u4f3c\u4e4e\u66f4\u52a0\u652f\u6301\u4e0e\u575a\u5b9a\u4e86\u6211\u7684idea~\n\n - \u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c $ f[i][j] == inf $\uff0c\u5219\u8bf4\u660e\u8981\u4e48\u7b2c $ i $ \u4e2a\u4eba\u4e0d\u53ef\u80fd\u53ea\u7b49 $ j $ \u5206\u949f\uff0c\u8981\u4e48\u7b2c $ i $ \u4e2a\u4eba\u7b49\u5f85 $ j $ \u5206\u949f\u7684\u60c5\u51b5\u4e0d\u53ef\u80fd\u6210\u4e3a\u6700\u4f18\u89e3\u7684\u4e00\u90e8\u5206\uff0c\u6545\u53ef\u4ee5\u4e0d\u8f6c\u79fb\u3002\u6240\u4ee5\u2026\u2026\u590d\u6742\u5ea6\u662f $ O(nm) $ \uff08\u904d\u5386\u6240\u6709\u72b6\u6001\uff09$ \\times O( $ \u5e73\u5747\u6bcf\u4e2a\u72b6\u6001\u8f6c\u79fb\u590d\u6742\u5ea6 $ ) $\uff08\u4e3a $ O(0) $ \u6216 $ O(n) $\uff09\u3002\u6240\u4ee5\u603b\u590d\u6742\u5ea6\u662f $ O(nmk) $\u3002$ k $ \u4e3a**\u7384\u5b66**\u5e38\u6570\u3002$ 0 \\leqslant k \\leqslant n $\u3002\n\n - \u5b9e\u6d4b\uff1a$ k \\approx log(m) $\uff0c\u4e5f\u5c31\u662f\u8bf4\u5b9e\u9645\u590d\u6742\u5ea6\u5728 $ O(nmlogm) $ \u5de6\u53f3qwq\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint t[501],s[501],f[501][101];\nconst int inf=2139062143;\ninline int read()\n{\n\tint neg=1,x=0;\n\tchar c;\n\twhile((c=getchar())<'0'||c>'9')\n\t\tif(c=='-')\n\t\t\tneg=-1;\n\tx=c-'0';\n\twhile((c=getchar())>='0'&&c<='9')\n\t\tx=x*10+(c-'0');\n\treturn x*neg;\n}\nint main()\n{\n\tint n=read(),m=read();\n\tfor(int i=1;i<=n;i++)\n\t\tt[i]=read();\n\tsort(t+1,t+n+1);\n\tfor(int i=1;i<=n;i++)\n\t\ts[i]=s[i-1]+t[i];\n\tmemset(f,0x7f,sizeof(f));\n\tt[0]=-inf;\n\tf[0][0]=0;\n\tfor(int i=0;i<=n;i++)\n\t{\n\t\tint MAX=min(m-1,t[i+1]-t[i]);\n\t\tfor(int j=0;j<=MAX;j++)\n\t\t\tif(f[i][j]!=inf)\n\t\t\t\tfor(int k=1;i+k<=n;k++)\n\t\t\t\t{\n\t\t\t\t\tint tmp=max(t[i]+j+m-t[i+k],0);\n\t\t\t\t\tf[i+k][tmp]=min(f[i+k][tmp],f[i][j]+(tmp+t[i+k])*k-(s[i+k]-s[i]));\n\t\t\t\t}\n\t}\n\tint ans=inf;\n\tfor(int i=0;i<m;i++)\n\t\tans=min(ans,f[n][i]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1542463599,
        "uid": 73645,
        "name": "_ztyqwq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "## \u6b64\u9898\u505a\u6cd5\uff1aDP\uff01\n\n\u9996\u5148\u5c06t\u6570\u7ec4\u5347\u5e8f\u6392\u5e8f\n\n**\u8bbef[i][j]\u8868\u793a\u7b2ci\u4e2a\u4eba\u7b49\u4e86j\u5206\u949f\u7684\u8f66\uff0c\u8f7d\u5b8c\u524di\u4e2a\u4eba\u7684\u6700\u5c0f\u7b49\u8f66\u65f6\u95f4\u603b\u548c\u3002**\n\nj\u7684\u53d6\u503c\u8303\u56f4\uff1f\n\n\t\u7531\u9898\u53ef\u77e5\uff0c\u82e5\u8f66\u5728\u4eba\u5927\u9644\u4e2d\u505c\u4e86m\u5206\u949f\uff0c\u90a3\u4e48\u4e0d\u5982\u5728\u5230\u4eba\u5927\u9644\u4e2d\u65f6\u5148\u9001\u8d70\u4e00\u6279\u4eba\uff08\u5373\u4fbf\u5f53\u65f6\u6ca1\u4eba\uff09\uff0c\u6240\u4ee5\u505c\u8f66\u65f6\u95f4T1<m\n    \n    \u8bbe\u4e00\u4e2a\u4eba\u7b49\u5230\u8f66\u4ece\u4eba\u6c11\u5927\u5b66\u56de\u6765\u7684\u65f6\u95f4\u4e3aT2\n    \u56e0\u4e3a\u8f66\u5f80\u8fd4\u4e00\u6b21\u53ea\u9700m\u5206\u949f\uff0c\u6240\u4ee5T2<m\n    \n    \u7efc\u4e0a\uff0c\u4e00\u4e2a\u4eba\u7b49\u8f66\u7684\u65f6\u95f4\n**j=T1+T2<2m**\n\n\u8be5\u5982\u4f55\u8f6c\u79fb\uff1f\n1. \u82e5\u4e0b\u4e00\u4e2a\u4eba\u80fd\u8d76\u4e0a\u5f53\u6b21\u8f66\uff08\u5373t[i]+j>=t[i+1]),\n\t\u5219\u5c06f[i][j]+t[i]+j-t[i+1]\u8f6c\u79fb\u81f3f[i+1][t[i]+j-t[i+1]];\n2. \u82e5\u4e0b\u4e00\u4e2a\u4eba\u5728\u5f53\u6b21\u8f66\u56de\u6765\u4e4b\u524d\u5f00\u59cb\u7b49\u8f66\uff08\u5373t[i]+j+m>=t[i+1])\uff0c\n\t\u5219\u679a\u4e3e\u8f66\u56de\u6765\u540e\u505c\u7684\u65f6\u95f4k,\n    \u7528f[i][j]+t[i]+j+m+k-t[i+1]\u8f6c\u79fbf[i+1][t[i]+j+m+k-t[i+1]];\n3. \u82e5\u4e0b\u4e00\u4e2a\u4eba\u5728\u5f53\u6b21\u8f66\u56de\u6765\u4e4b\u540e\u624d\u5230\uff08\u5373t[i]+j+m<t[i+1]),\u5219\u679a\u4e3e\u4e0b\t\u4e00\u4e2a\u4eba\u7b49\u5f85\u7684\u65f6\u95f4k\uff0c\u5e76\u7528f[i][j]+k\u8f6c\u79fbf[i+1][k];\n\n\u7a7a\u95f4\u590d\u6742\u5ea6O(nm),\u65f6\u95f4\u590d\u6742\u5ea6O(nm^2),~~\u6b63\u786e\u6027\u663e\u7136~~\n\n\u9644AC\u4ee3\u7801\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\n\nint n,m,mi,a[510];\ntypedef long long ll;\nll f[510][210],ans;\n\nvoid min(ll &x,ll y) { y < x && (x = y); }\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i = 1;i <= n; ++ i)\n\t\tscanf(\"%d\",a + i), mi = mi < a[i] ? mi : a[i];\n\tfor(int i = 1;i <= n; ++ i) a[i] -= mi;\n\t\n\tsort(a + 1,a + n + 1);\n\tmemset(f,0x3f,sizeof f);\n\tfor(int i = 0;i < 2 * m; ++ i) f[1][i] = i;\n\tfor(int i = 1;i < n; ++ i)\n\t\tfor(int j = 0;j < 2 * m; ++ j)\n\t\t\tif(f[i][j] < 0x3f3f3f3f3f3f3f3f)\n\t\t\t{\n\t\t\t\tif(a[i] + j >= a[i + 1])\n\t\t\t\t\tmin(f[i + 1][a[i] + j - a[i + 1]],f[i][j] + a[i] + j - a[i + 1]);\n\t\t\t\tfor(int k = a[i] + j + m >= a[i + 1] ? 0 : a[i + 1] - a[i] - j - m;a[i] + j + m + k - a[i + 1] < m * 2; ++ k)\n\t\t\t\t\tif(a[i] + j + m + k >= a[i + 1])\n\t\t\t\t\t\tmin(f[i + 1][a[i] + j + m + k - a[i + 1]],f[i][j] + a[i] + j + m + k - a[i + 1]);\n\t\t\t\tif(a[i] + j + m < a[i + 1])\n\t\t\t\t\tfor(int k = 0;k < m * 2; ++ k)\n\t\t\t\t\t\tmin(f[i + 1][k],f[i][j] + k);\n\t\t\t}\n\t\n\tans = 0x3f3f3f3f3f3f3f3f;\n\tfor(int i = 0;i < m * 2; ++ i)\n\t\tmin(ans,f[n][i]);\n\tprintf(\"%lld\\n\",ans);\n\t\n\treturn 0;\n}\n```",
        "postTime": 1542286083,
        "uid": 64030,
        "name": "Green_Hand",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u6709\u4e2a\u81ea\u8ba4\u4e3a\u6bd4\u8f83\u597d\u60f3\u7684\u65b9\u6cd5\uff1a\n\n\u6211\u4eec\u5982\u679c\u5728\u65f6\u95f4 $T_1,T_2,T_3 ,\\dots ,T_k$ \u53d1\u8f66\uff08 $T_i \\ge T_{i-1}+m$ \uff09\uff0c\u90a3\u4e48\u603b\u4ee3\u4ef7\u5c31\u662f $\\sum \\limits _{i=1}^{k} \\sum \\limits _{T_{i-1} < t_j \\le T_i} (T_i - t_j)= \\left( \\sum \\limits _{i=1}^{k} (s[T_i]-s[T_{i-1}]) \\times T_i \\right) - \\sum \\limits _{i=1}^{n}t_i$ \uff0c\u5176\u4e2d $s[i]$ \u8868\u793a\u524d $i$ \u5206\u949f\u6765\u5230\u7ad9\u53f0\u7684\u603b\u4eba\u6570\u3002\n\n\u53d1\u73b0\u540e\u9762\u90a3\u4e2a $\\sum \\limits _{i=1}^{n}t_i$ \u662f\u56fa\u5b9a\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1dp\u6c42\u51fa\u524d\u9762\u7684\u548c\u5f0f\u7684\u6700\u5c0f\u503c\u3002\n\n\u4ee4 $f[i]$ \u8868\u793a\u56fa\u5b9a\u5728\u65f6\u523b $i$ \u53d1\u4e00\u6b21\u8f66\uff0c\u524d $i$ \u5206\u949f\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\u90a3\u4e48\u6709 $f[i]=\\min \\{ f[k]+(s[i]-s[k]) \\times i\\},k \\le i-m \\ \\text{or} \\ k=0$ \u3002\u7136\u540e\u5c31\u53ef\u4ee5\u659c\u7387\u4f18\u5316\u8f6c\u79fb\u4e86\u3002\u6700\u540e\u51cf\u53bb $\\sum \\limits _{i=1}^{n} t_i$ \u5373\u53ef\u3002\u590d\u6742\u5ea6 $O(\\max \\{ t_i \\})$ \u3002\n\n``` cpp\n#include<bits/stdc++.h>\n#define maxn 510\n#define maxt 5000010\n#define ll long long\nusing namespace std;\n\nint a[maxn],s[maxt],q[maxt],n,m,mx=0;\nll f[maxt],sum=0,ans=1LL<<60;\nint main(){\n\tios::sync_with_stdio(0); \n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>a[i],s[++a[i]]++,mx=max(mx,a[i]),sum+=a[i];\n\tint l=1,r=1;\n\tfor(int i=1;i<=mx+m;i++){\n\t\ts[i]+=s[i-1];\n\t\tif(i>m){\n\t\t\tint tmp=i-m;\n\t\t\twhile(l<r&&(f[tmp]-f[q[r]])*(s[q[r]]-s[q[r-1]])<=(f[q[r]]-f[q[r-1]])*(s[tmp]-s[q[r]]))\n\t\t\t\tr--;\n\t\t\tq[++r]=tmp;\n\t\t}\n\t\twhile(l<r&&f[q[l]]-i*s[q[l]]>=f[q[l+1]]-i*s[q[l+1]])\n\t\t\tl++;\n\t\tf[i]=f[q[l]]+i*(s[i]-s[q[l]]);\n\t\tif(i>=mx)\n\t\t\tans=min(ans,f[i]);\n\t}\n\tcout<<ans-sum<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1542185617,
        "uid": 31564,
        "name": "zhoutb2333",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u4e00\u773c\u5c31\u80fd\u770b\u51fa\u6765\u662fDP\u9898\uff0c\u7136\u540e\u4e00\u770b\u6570\u636e\u8303\u56f4\uff0cn\u3001m\u7684\u8303\u56f4\u5f88\u5c0f\uff0c\u7136\u800ct\u7684\u8303\u56f4\u8d85\u5927($10^6$)\uff0c\u4e8e\u662f\u811a\u6307\u5934\u5c31\u80fd\u60f3\u5230\u72b6\u6001\u662f\u7531n\uff0cm\u5b9a\u4e49\u7684\u3002\n\n\u7136\u540e\u79c9\u627f\u7740\u505a\u4e0d\u51fa\u52a0\u4e00\u7ef4\u7684\u4f18\u79c0\u4fe1\u4ef0\uff0c\u8d2f\u5f7b\u65e0\u540e\u6548\u6027\u539f\u5219\uff0c\u4e09\u7ef4dp\u89e3\u51b3\u6b64\u9898\u3002\n\n\u5177\u4f53\u505a\u6cd5\uff1a`dp[n][m][wn]`\u8868\u793a\u7b2c`n`\u4e2a\u4eba\u65f6\uff0c\u8ddd\u79bb\u8f66\u5230\u8fd8\u6709`m`\u5206\u949f\uff0c\u8fd9\u65f6\u5019\u6709`wn`\u4e2a\u4eba\u5728\u7b49\u3002\n\n```\n\u8bbegap[i]\u8868\u793a\u7b2ci\u4e2a\u4eba\u548c\u7b2ci+1\u4e2a\u4eba\u4e4b\u95f4\u7684\u65f6\u95f4\u5dee\n\ndp[i][j][k] = dp[i+1][j-gap[i]][k+1] + k*gap[i] (j>gap[i])\ndp[i][j][k] = min(dp[i+1][0][k+1] + k*gap[i],\n                  dp[i+1][max(0,j-gap[i]+m)][1] + k*j) (j<=gap[i])\n```\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u662f$\\Theta(n^2m)$\uff0c\u8003\u8651\u5230n\uff0cm\u7684\u6570\u636e\u8303\u56f4\uff0c\u5e94\u8be5\u80fd\u8fc7\n\n\u7136\u800c\uff0c\u6211\u4ee3\u7801\u4ecd\u65e7\u662f\u6211\u8c37\u6700\u4f4e\u6548\u7684\uff08\u6342\u8138\uff09\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\n\nint dp[505][105][505];\nint ti[505];\nint gap[505];\n\nbool cmp(int a,int b)\n{\n\treturn a<b;\n}\n\nint main()\n{\n\tint n,m;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1; i<=n; ++i)\n\t{\n\t\tscanf(\"%d\",ti+i);\n\t}\n\n\tsort(ti+1,ti+1+n,cmp);\n\tfor(int i=1; i<n; ++i)\n\t{\n\t\tgap[i] = ti[i+1]-ti[i];\n\t}\n\n\tfor(int k=1; k<=n; ++k)\n\t{\n\t\tfor(int j=1; j<=m; ++j)\n\t\t{\n\t\t\tdp[n][j][k] = j*k;\n\t\t}\n\t}\n\n\tfor(int i=n-1; i>=1; --i)\n\t{\n\t\tfor(int k=1; k<=i; ++k)\n\t\t{\n\t\t\tfor(int j=0; j<=min(gap[i],m); ++j)\n\t\t\t{\n\t\t\t\tdp[i][j][k] = min(dp[i+1][0][k+1]+gap[i]*k, dp[i+1][max(0,m-gap[i]+j)][1] + j*k);\n\t\t\t}\n\t\t\tfor(int j=min(gap[i]+1,m+1); j<=m; ++j)\n\t\t\t{\n\t\t\t\tdp[i][j][k] = dp[i+1][j-gap[i]][k+1] + gap[i]*k;\n\t\t\t}\n\t\t}\n\t}\n\n\tprintf(\"%d\\n\",dp[1][0][1]);\n\n\treturn 0;\n}\n```",
        "postTime": 1541949821,
        "uid": 49458,
        "name": "\u6728\u6728\uff01",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66 \u3011"
    },
    {
        "content": "\u672c\u6765\u53ea\u662f\u60f3\u6c3450\uff0c\u7ed3\u679c\u6539\u7740\u6539\u7740\u5c31\u53d1\u73b0\u597d\u50cf\u80fd\u8fc7\uff08\u6c57\u3001\r\n\r\n\u601d\u8def\uff1aDP~~\uff08\u5e9f\u8bdd\uff09~~\r\n\r\n\u8bb0T[i]\u4e3a\u65f6\u95f4i\u65f6\u7b49\u8f66\u7684\u4eba\u6570\uff08\u53ef\u80fd\u4e3a0\uff09\r\n\r\n\u9996\u5148\uff0c\u6211\u4eec\u8003\u8651\uff0c\u5047\u5982\u5728\u65f6\u95f4Tim\u7684\u65f6\u5019\u53d1\u4e00\u73ed\u8f66\u4f1a\u5f71\u54cd\u591a\u5c11\u4eba\uff1a\r\n\r\n1. \u4e4b\u524d\u7b49\u5f85\u7684\u4eba\u6ca1\u6709\u4e86\r\n2. \u4e0b\u4e00\u73ed\u8f66\u81f3\u5c11\u5728\u65f6\u95f4Tim+m\u53d1\uff0c\u6240\u4ee5\u5728\u65f6\u95f4Tim~\u65f6\u95f4Tim+m-1\u7684\u4eba\u90fd\u4e00\u5b9a\u4f1a\u53d7\u5f71\u54cd\r\n\r\n\u8bb0Peo[Tim]\u4e3a\u5728\u65f6\u95f4Tim\u53d1\u8f66\u65f6\u7684\u5f71\u54cd\u4eba\u6570\uff0ctmp[Tim]\u4e3a\u5728\u65f6\u95f4Tim\u53d1\u8f66\u65f6\u7684\u5f71\u54cd\u4eba\u6570\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u90a3\u4e48\uff0c\u8bb0f[Tim][i]\u4e3a\u65f6\u95f4Tim\u65f6\u6709i\u4e2a\u4eba\u7b49\u8f66\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4\uff0c\u5219\u5b83\u7684\u6700\u5c0f\u503c\u4e3a\u5728\u65f6\u95f4Tim\u65f6\u53d1\u8f66\u548c\u4e0d\u53d1\u8f66\u7684\u6700\u5c0f\u503c\u3002\r\n\r\n\u5982\u679cTim>maxT,\u76f4\u63a5\u53d1\u8f66\u5c31\u597d\u4e86\uff0cf[Tim][i]=0\uff1b\u5426\u5219\r\n\r\n- \u5982\u679c\u53d1\u8f66\u4e86\uff0c\u90a3\u4e48\u7b49\u5f85\u65f6\u95f4\u52a0\u4e0a\u5728\u65f6\u95f4Tim\u65f6\u53d1\u8f66\u7684\u5f71\u54cd\u4eba\u6570\u7684\u7b49\u5f85\u65f6\u95f4\uff0ci\u53d8\u4e3a\u5728\u65f6\u95f4Tim\u53d1\u8f66\u65f6\u7684\u5f71\u54cd\u4eba\u6570\uff0c\u4e0b\u4e00\u73ed\u8f66\u81f3\u5c11\u5728\u65f6\u95f4Tim+m,\u5373\u503c\u4e3af[Tim+m][Peo[Tim]]+tmp[Tim]\uff1b\r\n- \u5982\u679c\u6ca1\u53d1\u8f66\uff0c\u90a3\u4e48\u7b49\u5f85\u65f6\u95f4\u52a0\u4e0a\u5f53\u524d\u4eba\u6570\u4ee5\u53ca\u65f6\u95f4Tim\u7684\u4eba\u6570\uff0c\u7b49\u5f85\u4eba\u6570\u52a0\u4e0a\u5f53\u524d\u4eba\u6570\uff0c\u5373\u503c\u4e3af[Tim+1][i+T[tim]]+i+T[tim]\u3002\r\n\r\n\u6545f[Tim][i]=min(f[Tim+m][Peo[Tim]]+tmp[Tim]\uff0cf[Tim+1][i+T[tim]]+i+T[tim])\uff0c\u8fd9\u5c31\u662f50\u5206\u7684\u60f3\u6cd5\uff0c\u590d\u6742\u5ea6O(n\\*maxT<=5000000)\r\n\r\n\u63a5\u4e0b\u6765\u60f3\u4f18\u5316\r\n\r\n\u6211\u7684\u4f18\u5316\u4e3b\u8981\u9488\u5bf9maxT\r\n\r\n\u5927\u6982\u5c31\u662f\u8fd9\u6837\u7684\uff1a\r\n\r\n\u5982\u679c\u4e24\u4e2a\u6709\u4eba\u5750\u8f66\u65f6\u95f4Tim1,Tim2(Tim1<Tim2)\u4e4b\u95f4\u6ca1\u6709\u4efb\u4f55\u4eba\u5750\u8f66\uff0c\u5e76\u4e14Tim2-Tim1>2\\*m\u65f6\uff0c\u8fd9\u4e24\u4e2a\u4eba\u80af\u5b9a\u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd\uff0c\u800c\u4e14\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u4eba\uff0c\u90a3\u4e48\u628aTim2\u53caTim2\u4ee5\u540e\u5f80\u524d\u79fb\uff0c\u76f4\u5230Tim2-Tim1==2\\*m\u65f6\u4e5f\u6ca1\u6709\u5f71\u54cd\u3002\r\n\r\n\u6b64\u65f6maxT\u53d8\u4e3an\\*2\\*m<=100000\r\n\r\n\u603b\u590d\u6742\u5ea6O(n\\*maxT<=50000000)\uff0c\u5728\u52a0\u4e0a2\u79d2\u7684\u65f6\u9650\uff0c\u5361\u4e00\u5361\u5e38\u6570\u5c31\u8fc7\u4e86\r\n\u7a0b\u5e8f\u4ec5\u4f9b\u53c2\u8003\uff08\u70c2\u7684\u4e0d\u884c\u7684\u8bb0\u641c\uff09\uff1a\r\n\r\n```cpp\r\n#include<iostream>\r\n#include<cstdio>\r\n#include<algorithm>\r\n#include<cstring>\r\nusing namespace std;\r\nint n,m,a[1001],b[1001],T[1000001],f[100001][501],Peo[4000001],tmp[1000001];\r\nvoid Get()\r\n{\r\n\tfor(int i=1;i<=m-1;i++)\r\n    {\r\n      \tPeo[0]+=T[i];\r\n      \ttmp[0]+=T[i]*(m-i);\r\n    }\r\n\tfor(int Tim=1;Tim<=a[n];Tim++)\r\n\t{\r\n\t\tPeo[Tim]=Peo[Tim-1];\r\n\t\ttmp[Tim]=tmp[Tim-1];\r\n\t\tPeo[Tim]-=T[Tim];\r\n\t\ttmp[Tim]-=T[Tim]*(m-1);\r\n\t\tPeo[Tim]+=T[Tim+m-1];\r\n\t\ttmp[Tim]+=Peo[Tim];\r\n\t}\r\n    return ;\r\n}\r\nint DFS(int Tim,int P)\r\n{\r\n\tif(Tim>a[n]) return 0;\r\n\tif(f[Tim][P]<0x3f3f3f3f) return f[Tim][P];\r\n    return f[Tim][P]=min(DFS(Tim+1,P+T[Tim])+P+T[Tim],DFS(Tim+m,Peo[Tim])+tmp[Tim]);\r\n}\r\nint main()\r\n{\r\n    memset(f,0x3f3f3f3f,sizeof(f));\r\n\tscanf(\"%d%d\",&n,&m);\r\n    for(int i=1;i<=n;i++)\r\n      scanf(\"%d\",&a[i]);\r\n    sort(a+1,a+n+1);\r\n    for(int i=1;i<=n;i++) \r\n    {\r\n        b[i]=b[i-1];\r\n        if(a[i]-a[i-1]>m*2) b[i]+=a[i]-a[i-1]-m*2;\r\n    }\r\n    for(int i=1;i<=n;i++)\r\n    {\r\n        a[i]-=b[i];\r\n        T[a[i]]++;\r\n    }\r\n    Get();\r\n    printf(\"%d\",DFS(1,0));\r\n    return 0;\r\n}\r\n```",
        "postTime": 1542002647,
        "uid": 72089,
        "name": "zhouzihan_2004",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66 \u3011"
    },
    {
        "content": "## \u4e00\u3001\u524d\u8a00\n\u8fd8\u597d\u4eca\u5e74\u8003\u8bd5\u7684\u65f6\u5019\u82b1\u4e86\u4e00\u4e2a\u5c0f\u65f6\u628a\u8fd9\u9053\u9898\u6539\u5bf9\u4e86\uff0c\u4e0d\u7136\u4eca\u5e74\u666e\u53ca\u548c\u63d0\u9ad8\u90fd\u51c9\u4e86,qwq\n## \u4e8c\u3001\u601d\u8def\n- \u6211\u5c31\u4ee5\u81ea\u5df1\u8003\u8bd5\u7684\u65f6\u5019\u7684\u601d\u8def\u4e3a\u4f8b\u5427,\u8fd9\u9053\u9898\u770b\u51fa\u662f\u4e00\u9053\u52a8\u6001\u89c4\u5212\u9898\u5e94\u8be5\u662f\u4e0d\u96be\u7684\uff0c\u770b\u51fa\u8981\u5148\u6392\u5e8f\u4e5f\u5e94\u8be5\u662f\u4e0d\u96be\u7684\uff0c\u56e0\u4e3a\u4eba\u4eec\u5230\u7684\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\u7684\u8bdd\u66f4\u5229\u4e8e\u6211\u4eec\u8ba1\u7b97\uff0c\u6240\u4ee5\u5148\u5bf9**\u6240\u6709\u4eba\u5230\u7684\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u4e00\u904d**  \n\n### (1)30\u5206\n\n- \u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u561b\uff0c\u6211\u5f00\u59cb\u60f3\u7684\u662f\uff0c\u5047\u8bbef[i][j]\u8868\u793a**\u7b2ci\u4e2a\u4eba\u6240\u5728\u7684\u516c\u4ea4\u8f66\u7b2cj\u5206\u949f\u51fa\u53d1\u4f7f\u524di\u4e2a\u4eba\u7684\u7b49\u5f85\u65f6\u95f4\u7684\u6700\u5c0f\u503c**\uff0c\u7136\u540e\u5e94\u8be5\u4e0d\u96be\u63a8\u51fa\u4e00\u4e2a\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b,**\u8bbemaxt\u4e3a\u6700\u540e\u4e00\u4e2a\u4eba\uff08\u6392\u5e8f\u4e4b\u540e\u7684\uff09\u5230\u7684\u65f6\u95f4,t[i]\u4e3a\u7b2ci\u4e2a\u4eba\u5230\u7684\u65f6\u95f4\uff08\u6392\u5e8f\u4e4b\u540e\u7684\uff09,\u5219**\uff1a    \n\n- **\u5bf9\u4e8ei>1:f[i][j]=min(f[k][l]+cost(k+1,i,j)){1<i<=n,t[i]<=j<=maxt+m,0<=k<i,t[k]<=l<=j-m}**                                 \n\n **\u5426\u5219:f[i][j]=j-t[i]**\n\n- \u5176\u4e2dcost(k+1,i,j)\u4e3a**\u7b2ck+1-\u7b2ci\u4e2a\u4eba\u5750\u540c\u4e00\u8f86\u8f66\u4e14\u5750\u7684\u8f66\u4e3a\u5728j\u65f6\u523b\u51fa\u53d1\u7684\u4ee3\u4ef7**  **,\u5373\u4e3asum(j-t[x])(k+1<=x<=i)**                                        \n\n- \u4ee3\u7801\uff08\u5982\u679c\u4e0d\u7406\u89e3\u4e3a\u4ec0\u4e48j\u8981<=maxt+m\u7684\u8bdd\u6211\u7b49\u4f1a\u513f\u4f1a\u8bb2\u7684\uff09\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#include<queue>\n#include<vector>\n#include<stack>\n#include<map>\n#include<deque>\n#define inf 0x7ffffff/2\n#define eps 1e-6\n#define N 110\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ninline ll read()\n{\n\tchar ch=getchar();\n\tll s=0,w=1;\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){s=s*10+ch-'0';ch=getchar();}\n\treturn s*w;\n}\nint n,m;\nint f[N][N],t[N],maxt;\nint ans=inf;\ninline int cost(int l,int r,int x)//\u8ba1\u7b97cost \n{\n\tint sum=0;\n\tfor(register int i=l;i<=r;i++)sum+=(x-t[i]);\n\treturn sum;\n}\nint main()\n{\n\tn=read(),m=read();\n\tfor(register int i=1;i<=n;i++)t[i]=read();\n\t//\u8f93\u5165\n\tsort(t+1,t+n+1);//\u5bf9\u6bcf\u4e2a\u4eba\u5230\u8fbe\u7684\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\n\tmaxt=t[n];//\u6700\u540e\u4e00\u4e2a\u4eba\u5230\u8fbe\u7684\u65f6\u95f4\n    for(register int i=t[1];i<=maxt+m;i++)f[1][i]=i-t[1];\n\tfor(register int i=2;i<=n;i++)//dp\n\t{\n\t\tfor(register int j=t[i];j<=maxt+m;j++)\n        //\u8fd9\u91cc\u662fmaxt+t,\u4e0d\u662fmaxt,\u5f88\u91cd\u8981\n\t\t{\n\t\t\tf[i][j]=inf;//\u521d\u59cb\u5316\n\t\t\tfor(register int k=0;k<i;k++)\n\t\t\t{\n\t\t\t\tfor(register int l=t[k];l<=j-m;l++)\n\t\t\t\t{\n\t\t\t\t\tf[i][j]=min(f[i][j],f[k][l]+cost(k+1,i,j));\n                    //\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfor(register int i=maxt;i<=maxt+m;i++)ans=min(ans,f[n][i]);\n    //\u7edf\u8ba1\u7b54\u6848\n\tprintf(\"%d\\n\",ans);//\u8f93\u51fa\n\treturn 0;\n}\n\n\n```\n### (2)50\u5206\n- \u540e\u6765\u7ecf\u6211\u4ed4\u7ec6\u601d\u8003~~\uff08\u778e\u6349\u6478\uff09~~,\u5176\u5b9e\u6211\u4eec\u8fd9\u6837DP\u662f\u5f88\u591a\u4f59\u7684\uff0c\u6211\u4eec\u8fd9\u6837\u7684DP\u5176\u5b9e\u76f8\u5f53\u4e8e\u662f**\u679a\u4e3e\u4e86\u6bcf\u6b21\u516c\u4ea4\u8f66\u6240\u63a5\u7a0b\u7684\u4eba\u7684\u533a\u95f4\uff0c\u76f8\u5f53\u4e8e\u662f\u6309\u6bcf\u8d9f\u516c\u4ea4\u8f66DP\u7684**\uff0c\u4f46\u662f\u8fd9\u9053\u9898\u6211\u4eec\u5e76\u4e0d\u5173\u5fc3**\u6bcf\u8f86\u516c\u4ea4\u8f66\u8fd0\u4e86\u54ea\u4e9b\u4eba\uff0c\u6216\u8005\u662f\u516c\u4ea4\u8f66\u8fd0\u884c\u4e86\u51e0\u6b21**\uff0c\u6240\u4ee5\u6211\u4eec\u5e94\u8be5**\u4ee5\u6bcf\u4e2a\u4eba\u4e3a\u4e2d\u5fc3\u53bb\u601d\u8003DP**\u3002\n- \u540e\u6765\u6211\u5c45\u7136\u60f3\u5230\u4e86\uff0c**\u5bf9\u4e8e\u6bcf\u4e2a\u4eba\u6765\u8bf4\uff0c\u4ed6\u8981\u4e48\u5750\u4e0a\u4e00\u4e2a\u4eba\u4e58\u5750\u7684\u516c\u4ea4\u8f66\uff0c\u8981\u4e48\u5750\u4e00\u8f86\u65b0\u7684\u516c\u4ea4\u8f66**\n- \u90a3\u4e48\u5047\u8bbef[i][j]\u8868\u8fbe\u7684\u542b\u4e4930\u5206\u7684\u76f8\u540c\uff0c\u4e00\u4e2a\u65b0\u7684\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e5f\u5f88\u597d\u63a8\u51fa\u6765\u4e86  \n**\u5bf9\u4e8ei>1:f[i][j]=min(f[i-1][j],f[i-1][k])-t[i]+j(2<=i<=n,t[i]<=j<=maxt+m,t[i-1]<=k<=j-m)**         \n**\u5426\u5219:f[i][j]=i-t[i]**\n- \u4ee3\u7801:                                                             \n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<queue>\n#include<vector>\n#include<bitset>\n#include<set>\n#include<map>\n#define inf 0x7fffffff/2\n#define eps 1e-6\n#define N 510\n#define M 10010\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ninline ll read()\n{\n\tchar ch=getchar();\n\tll s=0,w=1;\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){s=s*10+ch-'0';ch=getchar();}\n\treturn s*w;\n}\nint f[N][M];\nint n,m;\nint t[N];\nint maxt;\nint main()\n{\n\tn=read(),m=read();\n\tfor(register int i=1;i<=n;i++)t[i]=read();\n\tsort(t+1,t+n+1);\n\tmemset(f,127,sizeof(f));//\u8fd9\u91cc\u5c31\u8981\u7ed9f\u7edf\u4e00\u8bbe\u4e0a\u6700\u5927\u503c\u4e86\uff0c\u907f\u514d\u6ca1\u6709\u5faa\u73af\u5230\u7684\u503c\u5f71\u54cd\u7ed3\u679c\n\tmaxt=t[n];\n\tfor(register int i=t[1];i<=maxt+m;i++)f[1][i]=i-t[1];\n\tfor(register int i=2;i<=n;i++)\n\t{\n\t\tfor(register int j=t[i];j<=maxt+m;j++)f[i][j]=min(f[i][j],f[i-1][j]+j-t[i]);//\u4e0e\u4e0a\u4e00\u4e2a\u5750\u540c\u4e00\u8f86\u8f66\n\t\tfor(register int j=t[i];j<=maxt+m;j++)\n\t\t{\n\t\t\tfor(register int k=t[i-1];k<=j-m;k++)\n\t\t\t{\n\t\t\t\tf[i][j]=min(f[i][j],f[i-1][k]+j-t[i]);//\u65b0\u5750\u4e00\u8f86\u8f66\n\t\t\t}\n\t\t}\n\t}\n\tint ans=inf;\n\tfor(register int j=n;j<=maxt+m;j++)ans=min(ans,f[n][j]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n\n```\n(\u6700\u540e\u5b9e\u6d4b\u53ea\u670940\u5206\uff0c\u5e94\u8be5\u52a0\u70b9\u5c0f\u4f18\u5316\u5c3150\u4e86)\n\n### (3)100\u5206\n- \u4e3a\u4ec0\u4e48\u62ff\u4e0d\u5230\u6ee1\u5206\u5462\uff0c\u6211\u4eec\u53d1\u73b0\uff0c**maxt\u7684\u8303\u56f4\u5b9e\u5728\u662f\u592a\u5927\u4e86\uff0c\u6709\u8db3\u8db34000000,\u800c\u6b64\u65f6\u6211\u4eec\u6ce8\u610f\u5230\uff0cn\u548cm\u7684\u5374\u53ea\u6709500\u548c100\uff0c\u4e0e4000000\u7684\u5dee\u8ddd\u592a\u5927\u4e86**\uff0c\u6211\u4eec\u60f3\u5230\uff0c\u5982\u679c\u4e24\u4e2a\u4eba\u7684\u65f6\u95f4\u76f8\u5dee\u5f97\u592a\u8fdc\u4e86\uff0c\u8fdc\u5f97\u53f8\u673a\u5e08\u5085\u65e9\u65e9\u9001\u5b8c\u4e86\u524d\u9762\u7684\u6240\u6709\u4eba\uff0c\u5374\u559d\u4e86\u51e0\u58f6\u8336\u624d\u7b49\u5230\u4e86\u4e0b\u4e00\u4e2a\u4eba,**\u90a3\u6211\u4eec\u5176\u5b9e\u53ef\u4ee5\u8ba9\u540e\u9762\u7684\u4eba\u65e9\u70b9\u5230**\uff0c~~\uff08\u514d\u5f97\u53f8\u673a\u62ff\u5de5\u8d44\u4e0d\u5e72\u4e8b\uff09~~\n- \u90a3\u8fd9\u4e2a\u592a\u8fdc\u4e86\u662f\u591a\u5c11\u5462\uff0c**\u7b54\u6848\u662f2m,\u4e0d\u662fm**(\u8fd9\u662f\u4e00\u4e2a\u7ea0\u7ed3\u4e86\u62111\u4e2a\u5c0f\u65f6\u7684\u95ee\u9898)\n- \u4e3a\u4ec0\u4e48\u5462\uff0c\u6211\u4eec\u5047\u8bbe\u5728m-1\u7684\u65f6\u523b\u6709inf\u4e2a\u4eba\u5750\u8f66\uff0cm\u7684\u65f6\u523b\u6709\u4e00\u4e2a\u4eba\u5750\u8f66\uff0c\u8fd9\u65f6\u5019\u7684\u6700\u4f18\u89e3\u5f53\u7136\u662f\u8ba9m-1\u4e2a\u4eba\u5148\u5750\u8f66\u8d70\uff0c**\u8fd9\u6837\u7684\u8bdd\uff0c\u5728m\u65f6\u523b\u7684\u4eba\u57282*m-1\u65f6\u523b\u624d\u80fd\u505a\u5230\u8f66\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u4eba\u5728\u7b2c3*m\u65f6\u523b\u5750\u8f66\uff0c\u5c06\u4ed6\u7684\u65f6\u95f4\u6539\u4e3a2m\u7684\u8bdd\u5c31\u4f1a\u5f71\u54cd\u7ed3\u679c**   \n(\u4e0a\u65b9j\u7684\u4e0a\u5c4a\u4e3amaxt+m\u800c\u4e0d\u662fmaxt\u4e5f\u662f\u8fd9\u4e2a\u9053\u7406)                             \n\u6240\u4ee5\u5927\u6982\u601d\u8def\u5c31\u51fa\u6765\u4e86\uff0c\u518d\u52a0\u4e00\u4e9b\u5c0f\u4f18\u5316\uff08\u5c06\u7b2c\u4e00\u4e2a\u4eba\u7684\u65f6\u95f4\u6539\u62100\uff0c\u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\uff0c\u7528\u4e00\u4e2aminn\u6570\u7ec4\u7ef4\u62a4\u65b0\u5750\u516c\u4ea4\u8f66\u7684\u60c5\u51b5\uff09\uff0c\u8fd9\u9053\u9898\u5c31\u8fc7\u4e86\n- \u4ee3\u7801:\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#include<queue>\n#include<vector>\n#include<bitset>\n#include<set>\n#include<map>\n#define inf 0x7fffffff/2\n#define eps 1e-6\n#define N 510\n#define M 110\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ninline ll read()\n{\n\tchar ch=getchar();\n\tll s=0,w=1;\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){s=s*10+ch-'0';ch=getchar();}\n\treturn s*w;\n}\nint f[2][N*M*10];\nint n,m;\nint t[N],minn[N*M*10];\nint maxt,subt/*\u8981\u51cf\u53bb\u7684\u503c*/;\nint flag;\nint main()\n{\n\tn=read(),m=read();\n\tfor(register int i=1;i<=n;i++)t[i]=read();\n\tsort(t+1,t+n+1);\n\tsubt=t[1];\n\tfor(register int i=1;i<=n;i++){t[i]-=subt;if(t[i]-t[i-1]>2*m){subt+=(t[i]-t[i-1]-2*m);t[i]=t[i-1]+2*m;}}\n\tmaxt=t[n];\n\tmemset(minn,127,sizeof(minn));\n\tfor(register int i=0;i<=maxt+m;i++)f[0][i]=i,minn[i]=0;//t[1]=0\n\tfor(register int i=2;i<=n;i++)\n\t{\n\t\tfor(register int j=0;j<=maxt+m;j++)f[1][j]=inf;\n\t\tfor(register int j=t[i];j<=maxt+m;j++)\n\t\t{\n\t\t\tf[1][j]=min(f[1][j],f[0][j]+j-t[i]);//\u548c\u4e0a\u4e00\u4e2a\u4eba\u5750\u540c\u4e00\u8f86\u8f66\n\t\t}\n\t\tfor(register int j=max(t[i],m);j<=maxt+m;j++)\n\t\t{\n\t\t\tf[1][j]=min(f[1][j],minn[j-m]+j-t[i]);//\u65b0\u5750\u4e00\u8f86\u8f66\n\t\t}\n\t\tfor(register int j=0;j<=maxt+m;j++)f[0][j]=f[1][j];//\u6eda\u52a8\u6570\u7ec4\n\t\tfor(register int j=0;j<=maxt+m;j++){if(!j)minn[j]=f[0][j];else minn[j]=min(minn[j-1],f[0][j]);}\n\t}\n\tint ans=inf;\n\tfor(register int j=0;j<=maxt+m;j++)ans=min(ans,f[0][j]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n\n```\n\u55ef\uff0c\u7136\u540e\u8fd9\u9053\u9898\u5c31\u53ef\u4ee5\u6ee1\u5206\u4e86\uff0c\u5982\u679c\u4f60\u770b\u4e86\u8fd9\u7bc7\u9898\u89e3\u6709\u4ec0\u4e48\u95ee\u9898\u6216\u4e0d\u89e3\u53ef\u4ee5\u95ee\u6211~~\uff08\u524d\u63d0\u662f\u8fd9\u7bc7\u9898\u89e3\u8fc7\u4e86\uff09~~\n\n",
        "postTime": 1542124050,
        "uid": 72419,
        "name": "WAPER4EVER",
        "ccfLevel": 7,
        "title": "\u6446\u6e21\u8f66\u9898\u89e3"
    },
    {
        "content": "### [\u66f4\u597d\u7684\u9605\u8bfb](https://www.cnblogs.com/yzhang-rp-inf/p/9769530.html)\n\nT3\u4e00\u770b\u5c31\u662f\u4e2adp\n\n\u53ef\u60dc\u6211\u8c03\u4e862\u4e2a\u5c0f\u65f6\n\n\u6211\u5199\u7684dp\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5f88\u7384\u5b66\n\n\u8003\u8651dp[i]\u8868\u793a\u5230\u7b2ci\u79d2\uff0c\u6700\u5c11\u8981\u7b49\u591a\u957f\u65f6\u95f4~~\uff08\u5e9f\u8bdd\uff09~~\n\n\u7136\u540e\u6211\u4eec\u5f97\u51fa\u4e86\u65b9\u7a0b dp[i]=Min(dp[i],dp[j]+cost(i,j)) (0<=i<=j<=4*10^6)\n\ncost\uff08i\uff0cj\uff09\u8868\u793a\u4ecei\u5f00\u59cb\u5230j\u4e4b\u95f4\u7684\u4eba\u5728\u7b2cj\u79d2\u4e0a\u8f66\u603b\u5171\u8981\u7b49\u591a\u957f\u65f6\u95f4\n\n\u8fd9\u4e2a\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u5927\u6982\u662fO\uff0810^16\uff09\uff0c\u80af\u5b9a\u4e0d\u884c\n\n\u8ba9\u6211\u4eec\u8003\u8651\u4f18\u5316\n\n\u6613\u5f97\u51fadp[j]=Min(dp[j],dp[i]+cost(i,j))  (0<=i<= 4 * 10^6,i+m<=j<i+ 2 * m)\n\n\u81ea\u884c\u8111\u8865\u4e00\u4e0b\u5427\n\n\u8fd9\u4e2a\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u5927\u6982\u662fO\uff0810^11\uff09,\u8fd8\u662f\u5f88\u6162\n\n\u6211\u4eec\u80fd\u4e0d\u80fdO(1)\u5f97\u51facost\uff08i\uff0cj\uff09\u5462\uff1f\n\n\u7b54\u6848\u662f\u80af\u5b9a\u7684\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u524d\u7f00\u548c\u4f18\u5316\n\n\u6211\u4eec\u53ef\u4ee5\u6c42\u51fa\u4ece\u7b2c1\u79d2\u5230\u7b2ci\u79d2\u4e0a\u8f66\u6240\u6709\u4eba\u4e00\u5171\u9700\u8981\u7b49timee[i]\u79d2\n\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u6c42\u51fa\u4ece\u7b2c1\u79d2\u5230\u7b2ci\u79d2\u4e00\u5171\u7684\u4eba\u6570sum[i]\n\n\u6240\u4ee5cost\uff08i\uff0cj\uff09\u53efO(1)\u6c42\u51fa\n\ncost\uff08i\uff0cj\uff09=timee[j]-timee[i]-num[i]*(j-i)\n\ndp[j]=Min(dp[j],dp[i]+timee[j]-timee[i]-num[i] * (j - i )) (0<=i<=4 * 10^6,i+m<=j<i+2 * m)\n\n\u590d\u6742\u5ea6\u662fO\uff0810^8\uff09\uff0cccf\u8001\u7237\u673a\u4e5f\u8bb8\u8dd1\u4e0d\u8fc7\n\n\u6211\u4eec\u8fd8\u8981\u7ee7\u7eed\u8003\u8651\u4f18\u5316\n\n\u53d1\u73b0n\u548cm\u90fd\u5f88\u5c0f\n\n\u6240\u4ee5\u4e24\u4e2a\u4eba\u4e4b\u95f4\u5f88\u53ef\u80fd\u9694\u7740\u5341\u4e07\u516b\u5343\u91cc\n\n\u5982\u679c\u6309\u4e0a\u8ff0\u8f6c\u79fb\u65b9\u7a0b\u5199\u7684\u8bdd\uff0c\u4f1a\u9020\u6210\u5927\u91cf\u65f6\u95f4\u635f\u5931\uff0c\u6240\u4ee5\u53ef\u4ee5\u7279\u5224\uff0c\u76f4\u63a5\u8df3\u8fc7\u4e2d\u95f4\uff0c\u628at[i]~t[i]+m-1\u7684\u6700\u5c0f\u503c\u8d4b\u503c\u5230t[i+1]\n\n\u6700\u540e\u7b54\u6848\u662fdp[t[n]]~dp[t[n]]+m-1\u4e2d\u6700\u5c0f\u503c\n\n\u590d\u6742\u5ea6\u5927\u7ea6\u662fO(n m^2),\u6bd4std\u5feb\u4e00\u70b9\n\n\u6211\u8003\u573a\u4e0a\u7684\u4ee3\u7801\uff08\u5341\u5206\u4e71qaq\uff09\n\n### \uff08\u5b9e\u9645\u8fd9\u6709\u53ef\u80fd\u662f\u4e2a\u5047\u7b97\u6cd5qaq\uff0c\u4f46\u5bf9\u62cd\u597d\u50cf\u6ca1\u6709\u95ee\u9898\uff09\n\n### \u6d1b\u8c37\u6c11\u95f4\u6570\u636e\u4e5f\u8fc7\u4e86\n\n```cpp\n#include <bits/stdc++.h>\n#define M 4000005\nusing namespace std;\ninline int read()\n{\n    register int x=0,f=1;register char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9')x=(x<<3)+(x<<1)+ch-'0',ch=getchar();\n    return x*f;\n}\ninline void write(register int x)\n{\n    if(!x) putchar('0');if(x < 0) x = -x , putchar('-');\n    static int sta[36];int tot=0;\n    while(x)sta[tot++] = x % 10,x /= 10;\n    while(tot)putchar(sta[--tot] + 48);\n} \ninline int Min(register int a,register int b)\n{\n\treturn a<b?a:b;\n}\nint t[505];\nint dp[M+500];\nint num[M+500];\nint timee[M+500];\nint main()\n{\n\tfreopen(\"bus.in\",\"r\",stdin);\n\tfreopen(\"bus.out\",\"w\",stdout);\n\tint n=read(),m=read();\n\tfor(register int i=1;i<=n;++i)\n\t\tt[i]=read();\n\tsort(t+1,t+1+n);\n\tfor(register int i=t[1],k=1;i<=t[n]+200;++i)\n\t{\n\t\ttimee[i]=timee[i-1]+k-1;\n\t\tdp[i]=timee[i];\n\t\twhile(t[k]==i)\n\t\t\t++k;\n\t\tnum[i]=k-1;\n\t}\n\tint k=1;\n\tfor(register int i=t[1];i<=t[n];++i)\n\t{\n\t\twhile(t[k]==i)\n\t\t\t++k;\n\t\tif(t[k-1]+m-1==i&&t[k]-m>i)\n\t\t{\n\t\t\tint qaq=1e9;\n\t\t\tfor(register int j=t[k-1];j<=t[k-1]+m-1;++j)\n\t\t\t\tqaq=Min(qaq,dp[j]);\n\t\t\tfor(register int j=t[k]-m+1;j<=t[k];++j)\n\t\t\t\tdp[j]=qaq;\n\t\t\ti=t[k]-m+1;\n\t\t}\n\t\tfor(register int j=i+m;j<i+2*m;++j)\n\t\t\tdp[j]=Min(dp[j],dp[i]+timee[j]-timee[i]-num[i]*(j-i));\n\t}\n\tint res=1e9;\n\tfor(register int i=t[n];i<=t[n]+200;++i)\n\t\tres=Min(res,dp[i]);\n\tprintf(\"%d\\n\",res);\n\treturn 0;\n } \n```",
        "postTime": 1541906266,
        "uid": 37881,
        "name": "yzhang",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66 \u3011"
    },
    {
        "content": "### \u524d\u8a00\uff1a\n\u56e0\u4e3a\u79cd\u79cd\u539f\u56e0\u9898\u89e3\u53ef\u80fd\u51fa\u7684\u6709\u70b9\u665a\u3002\n\n------------\n### \u6b63\u6587\uff1a\n\u65b9\u6cd5\uff1aDP\n\n\u8bbe$f[i]$\u4e3a\u7b2c$i$\u79d2\u5f00\u8f66\u53bb\u4eba\u6c11\u5927\u5b66\uff0c\u603b\u5171\u7b49\u5f85\u6700\u5c11\u7684\u65f6\u95f4\u3002\n\n- $Question\\ 1$\uff1a\u4e3a\u4ec0\u4e48\u662f\u7b2c$i\\ $\u79d2\u5f00\u8f66\u53bb\uff1f\n\n$Answer$\uff1a\n\n**\u7b2c\u4e00**\uff1a\u8fd9\u6837\u5b9a\u4e49\u53ef\u4ee5\u907f\u514d\u8bb0\u5f55\u8bb8\u591a\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u3002\u6bd4\u5982\uff1a\u5176\u4ed6\u53ef\u80fd\u9700\u8981\u8bb0\u5f55\u7b2c$i$\u79d2\u4e0d\u5f00\u8f66\u603b\u5171\u7b49\u5f85\u6700\u5c11\u7684\u65f6\u95f4\u3001\u6b64\u65f6\u8fd8\u6709\u591a\u5c11\u4eba\u3001\u8fd8\u6709\u591a\u4e45\u624d\u80fd\u5f00\u4e0b\u4e00\u73ed\u8f66\u7b49\u7b49\u3002\n\n**\u7b2c\u4e8c**\uff1a\u65e2\u7136\u662f\u7b2c$i$\u79d2\u5f00\u8f66\u53bb\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u524d$i$\u79d2\uff08\u5305\u62ec\u7b2c$i$\u79d2\uff09\u5230\u8fd9\u7ad9\u7684\u4eba\u5168\u90e8\u9001\u8d70\u3002\u5bf9\u540e\u9762\u6ca1\u6709\u5e72\u6270\n\n**\u7b2c\u4e09**\uff1a\u6839\u636e\u9898\u76ee\u8981\u6c42\u81f3\u5c11\u662f\u6709\u4e00\u6b21\u5f00\u8f66\u53bb\u4eba\u6c11\u5927\u5b66\u3002\u7b2c$i$\u79d2\u5f00\u8f66\u53bb\u53ef\u4ee5\u8ba9$i$\u4e4b\u524d\u7684\u4e00\u5b9a\u65f6\u95f4\u5185\u4e0d\u53bb\u3002\u6700\u540e\u53ea\u9700\u8981\u5728$t[n]$\u5230$t[n]+m$\u4e2d\u627e\u7b54\u6848\u3002~~\u6b63\u786e\u6027\u663e\u7136~~\n\np.s:\u4e0b\u6587\u7684$cost(i,j)$\u8868\u793a\u5728\u7b2c$i$\u79d2\u5230\u7b2c$j$\u79d2\u4e2d\u5f00\u59cb\u7b49\u5f85\u7684\u6240\u6709\u4eba\uff0c\u7b49\u5f85\u5230$j$\u79d2\u9700\u8981\u7b49\u5f85\u7684\u65f6\u95f4\u3002\uff08\u53ef\u4ee5\u770b\u505a\u7b2c$i$\u79d2\u5f00\u4e86\u4e00\u8d9f\u8f66\u7b49\u5f85\u5230$j$\u79d2\u9700\u8981\u7b49\u5f85\u7684\u65f6\u95f4\uff09\n\n\u6613\u5f97\u51fa$f[i]=min(f[j]+cost(j,i))$,$(j=0...i-m) $\n\u5373\u8ba4\u4e3a\u4e0a\u6b21\u53d1\u8f66\u5728\u7b2c$j$\u79d2\uff0c\u518d$+cost(j,i)$\u3002\n\n\u6b64\u65f6\u65f6\u95f4\u590d\u6742\u5ea6$O(t^3)$\u80af\u5b9a\u8d85\u65f6\n\n- $Question\\ 2$\uff1a\u5982\u4f55\u4f18\u5316\uff1f\n\n$Answer$\uff1a\n\n**\u7b2c\u4e00**\uff1a\u4ece$cost$\u51fa\u53d1\u8003\u8651\u3002\n\np.s\uff1a\u4e3a\u4e86\u65b9\u4fbf\u6709\u65f6$sum\\_time[i] $\u548c$sum\\_peo[i] $\u4f1a\u6253\u6210$time[i]$\u548c$peo[i]$\u3002\u8bf7\u8c05\u89e3\uff0c~~\u4f60\u77e5\u9053\u4e0b\u5212\u7ebf\u6709\u591a\u4f46\u6253\u5417~~\n\n\u6709\u6ca1\u6709\u529e\u6cd5\u7528$O(1)$\u6c42\u51fa$cost(i,j)$\u3002\u7b54\u6848\u662f\u6709\u7684\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u524d\u7f00\u548c\u3002$sum\\_time[i] $\u8bb0\u5f55\u524d$i$\u79d2\u4e00\u5171\u9700\u8981\u7b49\u5f85\u7684\u65f6\u95f4\u3002$sum\\_peo[i] $\u8bb0\u5f55\u524d\u5230$i$\u79d2\u4e00\u5171\u51fa\u73b0\u7684\u4eba\u6570\u3002\n\n$time[j]-time[i] $\u4ee3\u8868\u4e86\u524d$i$\u79d2\u6240\u6709\u51fa\u73b0\u7684\u4eba\u5728$j$\u5230$i$\u79d2\u6240\u7b49\u5f85\u7684\u65f6\u95f4\u3002\n\n\u6240\u4ee5\u8981\u51cf\u53bb\u524d$j$\u79d2\u51fa\u73b0\u7684\u4eba$sum\\_peo[i] $\u5728$j$\u5230$i$\u79d2\u6240\u7b49\u5f85\u7684\u65f6\u95f4$\u00d7(i-j)$\u3002\u5373$cost(i,j)=time[j]-time[i]-peo[i]\u00d7(j-i)$\n\n**\u7b2c\u4e8c**\uff1a\u4ece$j$\u51fa\u53d1\u8003\u8651\u3002\n\n\u9996\u5148$j$\u5faa\u73af\u7684\u7ec8\u70b9\u662f\u786e\u5b9a\u7684$i-m$\u3002\u56e0\u4e3a$i$\u8981\u5f00\u8f66\u53bb\uff0c$i-m+1$\u5230$i-1$\u5fc5\u987b\u90fd\u662f\u6ca1\u6709\u5f00\u8f66\u53bb\u7684\u3002\u7136\u540e\u6211\u4eec\u8003\u8651\u8d77\u70b9\uff0c\u7531\u4e8e$i-m$\u5f00\u8f66\u53bb\uff0c\u90a3\u4e48$i-2m+1$\u5230$i-m$\u90fd\u4e0d\u80fd\u5f00\u8f66\u6240\u4ee5\u4e0d\u80fd\u4fdd\u8bc1$cost(j,i)+f[j]$\u6700\u5c0f\uff0c\u4f46$f[i]$\u53ef\u4ee5\u8ba9$i-2m$\u5f00\u8f66\u53bb\u6240\u4ee5$j$\u7684\u8d77\u70b9\u5c31\u662f$i-2m+1$\u3002\n\n\u5373$j$\u7684\u5faa\u73af\u8303\u56f4\u662f$i-2m+1...i-m$\n\n**\u7b2c\u4e09**\uff1a\u4ece$i$\u51fa\u53d1\u8003\u8651\u3002\n\n\u7531\u4e8e$t$\u7684\u8303\u56f4\u5f88\u5927$0\u2264t\u22644\u00d710^6$\uff0c\u800c$n$\u7684\u8303\u56f4\u5f88\u5c0f$n\u2264500$\u3002\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5faa\u73af$n$\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u7b2c$i$\u4f4d\u540c\u5b66\u53ea\u6709\u5728$t[i]$\u5230$t[i]+m-1$\u8fd9\u6bb5\u65f6\u95f4\u8d70\u662f\u6709\u610f\u4e49\u7684\u3002\u82e5\u662f\u5728$t[i]+m$\u8d70\u8fd8\u4e0d\u5982\u5728$t[i]$\u5148\u8d70\u4e00\u904d\uff0c\u7136\u540e\u53ef\u4ee5\u5728$t[i]+m$\u8f66\u518d\u5f00\u4e00\u904d\u3002\u6240\u4ee5$t[i]+m$\u53ca\u4e4b\u540e\u8d70\u7684\uff0c\u90fd\u662f\u6d6a\u8d39\u65f6\u95f4\uff0c\u778e\u6643\u60a0\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ea\u9700\u8981\u8003\u8651$t[i]$\u5230$t[i]+m-1$\u8fd9\u4e00\u6bb5\u3002\n\n\u8fd9\u6837\u5c31\u51fa\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u679c$t[i]$\u4e0e$t[i+1]$\u5dee\u8ddd\u6bd4\u8f83\u5927\uff0c\u4e2d\u95f4\u5c31\u4f1a\u6709\u4e00\u6bb5$f[i]$\u8fd0\u884c\u4e0d\u5230\u3002\u4f46\u7531\u4e8e\u8fd9\u4e2a\u4e0d\u662f\u6700\u7ec8\u7b54\u6848\uff0c\u5c31\u6ca1\u6709\u5fc5\u8981\u6c42\u51fa\u5176\u51c6\u786e\u503c\u3002\u8fd9\u6837\u53ef\u4ee5\u5427$t[i-1]+m$\u5230$t[i]-1$\u8fd9\u4e00\u6bb5$f[i]$\u76f4\u63a5\u8d4b\u503c\u6210$f[i-m]$\uff08\u53ef\u4ee5\u89c6\u4e3a\u7b2c$i-m$\u79d2\u5f00\u8f66\u53bb\uff0c\u7b2c$i$\u79d2\u5230\uff09\u3002**\u6ce8\u610f**\u8fd9\u6837\u4e00\u6765\uff0c$f[t[i-1]+m]$\u5230$f[t[i]-1]$\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u4f46\u4e3a\u4ec0\u4e48\u5b83\u7684\u6700\u7ec8\u7b54\u6848\u662f\u6b63\u786e\u7684\u5462\uff1f\n\n\u4f60\u60f3\u554a\uff0c$t[i-1]$\u5230$t[i-1]+m-1$\u8fd9\u4e00\u6bb5\uff0c\u5df2\u7ecf\u6c42\u51fa\u6765\u4e86\uff0c\u4e14\u5728\u8fd9$m$\u4e2a\u5143\u7d20\u91cc\u6709\u4e00\u4e2a\u6700\u5c0f\u7684\u5143\u7d20\uff0c\u8fd9\u6837\u8d4b\u503c\u4e0b\u6765\u4e4b\u4e2d\u7684\u6ca1$m$\u4e2a\u8fde\u7eed\u7684\u5143\u7d20\u4e2d\u90fd\u6709\u4e00\u4e2a\u6700\u5c0f\u503c\uff0c\u800c\u8ba1\u7b97$f[i]$\u65f6\uff0c\u8981\u627e\u51fa\u7684\u662f$i-2m+1$\u5230$i-m$\u7684$m$\u4e2a\u5143\u7d20\u91cc\u7684\u6700\u5c0f\u503c\uff0c\u5fc5\u5b9a\u4f1a\u627e\u5230\u6240\u9700\u8981\u7684\u503c\uff0c\u6240\u4ee5\u6700\u7ec8\u7b54\u6848\u662f\u6b63\u786e\u7684\u3002\n\n\u8fd9\u6837\u6700\u539f\u59cb\u7684\u4ee3\u7801\u5c31\u51fa\u6765\u4e86\uff0c\u65f6\u95f4\u590d\u6742\u5ea6$O(nm^2+t)$\u53ef\u4ee5$AC$\u3002~~(\u5b9e\u9645\u4e0a\u8fd0\u884c\u7684\u4e5f\u4e0d\u6162\uff0c\u603b\u5171\u52a0\u8d77\u6765\u4e5f\u624d\u8fd0\u884c\u4e86850+ms)~~\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,t[505],f[4000105],sum_time[4000105],sum_peo[4000105];\nint main()\n{\n\tint i,j,k;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<=n;i++)\n\t\tscanf(\"%d\",&t[i]);\n\tsort(t+1,t+1+n);\t\t//\u80af\u5b9a\u662f\u8981\u6392\u5e8f\u7684\u5566\n\tfor(i=t[1],k=1;i<t[n]+m;i++){\n\t\tf[i]=sum_time[i]=sum_time[i-1]+k-1;\t\t//\u8ba1\u7b97\u524d\u7f00\u548c\uff0c\u987a\u4fbf\u628af\u7684\u521d\u59cb\u503c\u8ba1\u7b97\u51fa\u6765\uff0c\u4e00\u76f4\u4e0d\u5f00\u8f66\u7684f\u6700\u5927 \n\t\twhile(t[k]==i)k++;\t\t//k\u8868\u793a\u4eba\u6570 \n\t\tsum_peo[i]=k-1;\n\t}\n\tfor(i=1;i<=n;i++){\n\t\tfor(j=t[i-1]+m;j<t[i];j++)\t\t//\u9632\u6b62f[i-1]\u4e0ef[i]\u76f8\u5dee\u8fc7\u5927 \n\t\t\tf[j]=f[j-m];\n\t\tfor(j=max(t[i],m);j<t[i]+m;j++)\t//\u8ba1\u7b97\u7b2cj\u79d2,max\u9632\u6b62\u5c0f\u4e8e0\uff0c\u4e0b\u540c \n\t\t\tfor(k=max(0,j-2*m+1);k<=j-m;k++)\t//\u5728j-2m+1\u5230j-m\u627e\u6700\u5c0f\u503c \n\t\t\t\tf[j]=min(f[j],f[k]+sum_time[j]-sum_time[k]-sum_peo[k]*(j-k));\n\t}\n\tint ans=0x7fffffff;\n\tfor(i=t[n];i<t[n]+m;i++)\t//\u5728f[t[n]]\u5230f[t[n]+m-1]\u627e\u5230\u6700\u5c0f\u503c\uff0c\u5c31\u662f\u7b54\u6848 \n\t\tans=min(ans,f[i]);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\u7136\u800c\uff0c\u82e5$t[i-1]$\u4e0e$t[i]$\u76f8\u5dee\u592a\u5927\uff0c\u5c31\u7b97\u662f\u7ebf\u6027\u4e5f\u6d6a\u8d39\u65f6\u95f4\uff0c\u90a3\u53ea\u9700\u8981\u627e\u5230$t[i-1]$\u5230$t[i-1]+m-1$\u8fd9\u4e00\u6bb5\u7684\u6700\u5c0f\u503c\u3002\u76f4\u63a5\u8d4b\u503c\u5230$t[i]-m$\u5230$t[i]-1$\uff0c\u8ba1\u7b97$f[i]$\u5bfb\u627e\u7684\u672b\u5c3e\u662f$t[i]-m$\uff0c\u6240\u4ee5\u662f\u80fd\u627e\u5230\u6700\u5c0f\u503c\uff0c\u5982\u679c\u8ddd\u79bb\u4e0d\u591f\u8fd8\u662f\u7528\u539f\u65b9\u6cd5\u3002\uff08$t[i]$\u4e0e$t[i-1]$\u76f8\u5dee\u8d85\u8fc7$3m$\u65f6\uff09\n\n\u8fd9\u6837\u5c31\u628a\u65f6\u95f4\u590d\u6742\u5ea6\u964d\u5230$O(nm^2)$~~(\u5b9e\u9645\u4e0a\u4e5f\u6ca1\u5feb\u4e86\u591a\u5c11\uff0c\u603b\u5171\u8fd0\u884c\u65f6\u95f4\u5927\u6982\u5728780ms)~~\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,t[505],f[4000105],sum_time[4000105],sum_peo[4000105];\nint main()\n{\n\tint i,j,k;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<=n;i++)\n\t\tscanf(\"%d\",&t[i]);\n\tsort(t+1,t+1+n);\n\tfor(i=t[1],k=1;i<t[n]+m;i++){\n\t\tf[i]=sum_time[i]=sum_time[i-1]+k-1;\n\t\twhile(t[k]==i)k++;\n\t\tsum_peo[i]=k-1;\n\t}\n\tfor(i=1;i<=n;i++){\n\t\tif(t[i]-t[i-1]>3*m){\n\t\t\tint temp=0x7fffffff;\n\t\t\tfor(j=t[i-1];j<=t[i-1]+m;j++)\n\t\t\t\ttemp=min(temp,f[j]);\t\t//\u627e\u51fa\u6700\u5c0f\u503c \n\t\t\tfor(j=t[i]-m;j<t[i];j++)\n\t\t\t\tf[j]=temp;\t\t\t//\u76f4\u63a5\u8d4b\u503c\u4e0a\u53bb \n\t\t}else{\n\t\t\tfor(j=t[i-1]+m;j<t[i];j++)\n\t\t\t\tf[j]=f[j-m];\n\t\t}\n\t\tfor(j=max(t[i],m);j<t[i]+m;j++)\n\t\t\tfor(k=max(0,j-2*m+1);k<=j-m;k++)\n\t\t\t\tf[j]=min(f[j],f[k]+sum_time[j]-sum_time[k]-sum_peo[k]*(j-k));\n\t}\t\t//\u5176\u4ed6\u76f8\u540c \n\tint ans=0x7fffffff;\n\tfor(i=t[n];i<t[n]+m;i++)\n\t\tans=min(ans,f[i]);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\u867d\u7136\u80fd$AC$\u672c\u9898\uff0c\u4f46\u65f6\u95f4\u548c\u7a7a\u95f4\u8fd8\u662f\u6709\u4e00\u70b9\u7684\u5197\u4f59\u7684\u3002\n\n- $Question\\ 3$\uff1a\u5982\u4f55\u8fdb\u4e00\u6b65\u4f18\u5316\uff1f \u65f6\u95f4 $or$\u7a7a\u95f4\n\n$Answer$\uff1a$t$\u6700\u5927\u662f$4\u00d710^6$\uff0c\u800c$n\u00d7m$\u624d$5\u00d710^4$\uff0c\u4e2d\u95f4\u80af\u5b9a\u6709\u4e00\u6bb5\u662f\u6ca1\u7528\u7684\uff0c\u5373\u6d6a\u8d39\u65f6\u95f4\u4e5f\u6d6a\u8d39\u7a7a\u95f4\u3002\u53ef\u4ee5\u4ece\u8fd9\u4e2a\u89d2\u5ea6\u51fa\u53d1\u8003\u8651\u3002\n\n**\u7b2c\u4e00**\uff1a\u9996\u5148\u5e94\u8be5\u8003\u8651\u7684\u662f$t[1]$\uff0c\u82e5$t[1]$\u975e\u5e38\u5927\uff0c\u5c0f\u4e8e$t[1]$\u7684\u7a7a\u95f4\u5c31\u662f\u767d\u5f00\u7684\uff08\u82e5\u662f\u524d\u9762\u6709\u5faa\u73af\u7684\u4e5f\u6d6a\u8d39\u65f6\u95f4\uff09\u3002\u8fd9\u4e2a\u5f88\u5bb9\u6613\u89e3\u51b3\uff0c\u53ef\u4ee5\u76f4\u63a5\u628a$t[1]$\u8d4b\u503c\u4e3a$0$\uff0c~~\u6211\u4e60\u60ef\u5199\u6210$1$~~\u3002\u540e\u9762\u7684\u96c6\u4f53\u5f80\u524d\u79fb\u52a8$t[1]$\u79fb\u52a8\u7684\u8ddd\u79bb\u3002\n\n**\u7b2c\u4e8c**\uff1a\u518d\u8003\u8651\u540e\u9762\u7684\uff0c\u82e5$t[i]$\u4e0e$t[i+1]$\u5dee\u8ddd\u4e0d\u5927\uff0c\uff08\u5177\u4f53\u662f\u2264$2m-1$\uff09\u90a3\u4e48\u8981\u4fdd\u8bc1$t[i]$\u4e0e$t[i+1]$\u8ddd\u79bb\u4e0d\u53d8\uff0c\u4fdd\u8bc1\u5176\u6b63\u786e\u6027\u3002\u82e5$t[i]$\u4e0e$t[i+1]$\u5dee\u8ddd\u5927,\u5373\u8d85\u8fc7$2m-1$,\u5c31\u628a$t[i+1]$\u653e\u5230$t[i]+2m-1$\u7684\u4f4d\u7f6e\u3002\n\n~~\u4e3a\u4ec0\u4e48\u662f$2m-1$\u6211\u60f3\u5df2\u7ecf\u53ef\u4ee5\u4e0d\u7528\u8bf4\u4e86\u5427\u3002~~ \u8003\u8651\u6781\u503c\uff0c$t[i]+m-1$\u5f00\u8f66\u8d70\u6700\u5c0f\uff0c\u5728$t[i+1]-2m+1...t[i+1]-m$\u8fd9\u4e2a\u8303\u56f4\u627e\u5230\u8fd9\u4e2a\u6700\u5c0f\u503c\uff0c\u6240\u4ee5$t[i]$\u548c$t[i+1]$\u4e4b\u95f4\u6700\u5c0f\u8981\u67092m\u7684\u8ddd\u79bb\n\n**\u7b2c\u4e09**\uff1a\u5b9e\u9645\u64cd\u4f5c\uff0c\u5982\u4f55\u6539$t[i]$\u7684\u503c\u3002\u4e3a\u4e86\u6b63\u786e\u6027\uff0c\u6bcf\u6539\u4e00\u4e2a\u503c\u90fd\u8981\u628a\u540e\u9762\u7684\u4e00\u8d77\u79fb\u8fc7\u6765\uff0c\u8fd9\u6837\u7684\u590d\u6742\u5ea6\u5c31\u5f97$O(n^2)$\uff0c\u5f88\u4e0d\u5212\u7b97\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u8bb0\u5f55\u76f8\u5bf9\u4f4d\u7f6e\uff0c\u5373$t[i]$\u4e0e$t[i+1]$\u7684\u8ddd\u79bb\uff0c\u518d\u91cd\u65b0\u6784\u5efa\u4e00\u6b21$t[i]$\u3002\u590d\u6742\u5ea6$O(n)$\n\n\u8fd9\u6837\u6bcf\u4e2a\u6570\u7ec4\u53ea\u9700\u8981\u5f00\u5230$(n-1)\u00d7(2m-1)+m$\u5927\u7ea6$10^5$\n\u3002\u81f3\u4e8e\u65f6\u95f4\u7ec6\u7b97\u7684\u4e5f\u662f\u4f18\u5316\u4e86\u4e00\u622a\u3002\n\np.s\uff1a\u524d$m$\u7684\u65f6\u95f4\u4e86\u8981\u5f00\u8f66\uff0c\u90a3\u4e48\u8fd9\u80af\u5b9a\u662f\u7b2c\u4e00\u8d9f\u8f66\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,t[505],dist[505],f[100005],sum_time[100005],sum_peo[100005];\nint main()\n{\n\tint i,k;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<=n;i++)\n\t\tscanf(\"%d\",&t[i]);\n\tsort(t+1,t+1+n);\n\tfor(i=2;i<=n;i++)\n\t\tdist[i]=t[i]-t[i-1];\t\t//\u8bb0\u5f55\u8ddd\u79bb \n\tt[1]=1;\n\tfor(i=2;i<=n;i++)\n\t\tif(dist[i]>2*m-1)\n\t\t\tt[i]=t[i-1]+2*m-1;\t\t//\u8ddd\u79bb\u8fc7\u8fdc\uff0c\u653e\u5230\u6bd4\u8f83\u8fd1\u7684\u5730\u65b9 \n\t\telse\n\t\t\tt[i]=t[i-1]+dist[i];\t//\u5426\u5219\u4fdd\u6301\u8ddd\u79bb\u4e0d\u53d8 \n\tfor(i=t[1],k=1;i<=t[n]+m;i++){\n\t\tf[i]=sum_time[i]=sum_time[i-1]+k-1;\n\t\twhile(t[k]==i)k++;\n\t\tsum_peo[i]=k-1;\n\t}\n\tfor(i=m+1;i<=t[n]+m;i++)\t//m+1\u5f00\u59cb \n\t\tfor(k=max(0,i-2*m+1);k<=i-m;k++)\n\t\t\tf[i]=min(f[i],f[k]+sum_time[i]-sum_time[k]-sum_peo[k]*(i-k));\n\tint ans=0x7fffffff;\n\tfor(i=t[n];i<t[n]+m;i++)\n\t\tans=min(ans,f[i]);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n~~Emm~~\u8fd0\u884c\u4e0b\u6765\u901f\u5ea6\u8fd8\u662f\u6bd4\u8f83\u5feb\u7684\uff0c~~\u624d200\u591a\u70b9ms~~\u3002\u6bd5\u7adf\u522b\u4eba$O(nm)$\u7684\u590d\u6742\u5ea6\u90fd\u8981\u8fd0\u884c\u4e94\u5341\u51e0ms\n\n\u4f46\u6211\u5c31\u662f\u60f3\u5199\u4e00\u4e2a$O(nm)$\u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u8fd8\u6709\u4e0b\u6587\u3002\n\n\u663e\u7136\u5916\u5c42\u5faa\u73af\u662f\u4e0d\u53ef\u4ee5\u6539\u7684\uff0c\u53ea\u80fd\u8003\u8651\u5185\u5c42\u5faa\u73af\n\n- $Question\\ 4$:\u5173\u4e8e$cost$\u3002\n\n**\u6ce8\u610f**\uff1a\u5230\u8fd9\u91cc\u53ef\u80fd\u4f1a\u6ce8\u610f\u5230$cost$\u662f\u9012\u589e\u7684\uff0c\u82e5$cost(i,k)>cost(j,k)$\u90a3\u4e48$cost(i,k+v)>cost(j,k+v)$\u5c31\u4f1a\u8003\u8651\u7528\u8fd9\u70b9\u628a\u65f6\u95f4\u4f18\u5316\u5230$O(nm)$\uff0c\u4f46\u8ba1\u7b97$f[i]$\u65f6\uff0c\u8981\u52a0\u4e0a$f[j]$\u7684\u503c\uff08\u8fd9\u91cc\u7684$i$\u548c$j$\u4e0d\u662f\u524d\u9762$cost$\u91cc\u7684$i$\u548c$j$\uff09\u3002\u82e5$cost(i,k)+f[i]>cost(j,k)+f[j]$\u90a3\u4e48$cost(i,k+v)+f[i]>cost(j,k+v)+f[j]$\u8fd9\u4e2a\u662f\u9519\u8bef\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e0d\u80fd\u8fd9\u4e48\u5199\u3002\u5f53\u65f6\u5199\u4e86\u4e00\u4e0b\uff0c$WA$\u4e86\u4e09\u4e2a\u70b9\u3002\uff08\u9519\u5728$i>j$\u65f6\uff0c\u4f46$k$\u53d8\u5927\u65f6\uff0c\u5f0f\u5b50\u53ef\u80fd\u4e0d\u6210\u7acb\u4e86\uff09\n\n$Answer$\uff1a\n\n**\u9996\u5148\u8003\u8651**$cost(i,k)>cost(j,k)$\u3002\u4e2d\u7684$cost(i,k)$\u3002\n\n\u5df2\u77e5\uff1a$cost(i,k)=cost(i,j)+cost(j,k)+(peo[j]-peo[i])\u00d7(k-j)$\u3002\n\n$cost(i,k)+f[i]>cost(j,k)+f[j]$\u548c$cost(i,k+v)+f[i]>cost(j,k+v)+f[j]$\n\n\u79fb\u9879\u5f97\uff1a$cost(i,j)+cost(j,k)+(peo[j]-peo[i])\u00d7(k-j)>f[j]-f[i]$\u3002\n\n\u4e0e\n$cost(i,j)+cost(j,k+v)+(peo[j]-peo[i])\u00d7(k+v-j)>f[j]-f[i]$\u3002\n\n\u56e0\u4e3a$f[j]-f[i]$\u662f\u5b9a\u503c\u3002\u6240\u4ee5\uff0c\u53ea\u8981\u4fdd\u8bc1$i<j$\u5c31\u597d\u4e86\u3002\n\n\u90a3\u4e48\u9996\u5148\u53ef\u4ee5\u60f3\u5230$cost(i,k)+f[i]>cost(j,k)+f[j]$\u4e14$i<j$\u90a3\u4e48$cost(i,k+v)+f[i]>cost(j,k+v)+f[j]$\u3002\u8fd9\u6837$i$\u5c31\u53ef\u4ee5\u4e0d\u8981\u4e86\u3002\u5373\u8ba1\u7b97$f[i]$\u65f6\u3002\u7528\u94fe\u8868\uff0c\u5982\u679c\u4e0a\u9762\u5f0f\u5b50\u6210\u7acb\uff0c\u53ef\u4ee5\u76f4\u63a5\u5220\u9664\u8fd9\u4e2a\u5143\u7d20\u3002\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,t[505],dist[505],rec[100005][3],f[100005],sum_time[100005],sum_peo[100005];\ninline int cost(int a,int b){\n\treturn sum_time[b]-sum_time[a]-sum_peo[a]*(b-a);\n}\nint main()\n{\n\tint i,j,k,start,last,newest;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<=n;i++)\n\t\tscanf(\"%d\",&t[i]);\n\tsort(t+1,t+1+n);\n\tfor(i=2;i<=n;i++)\n\t\tdist[i]=t[i]-t[i-1];\n\tt[1]=1;\n\tfor(i=2;i<=n;i++)\n\t\tif(dist[i]>2*m-1)\n\t\t\tt[i]=t[i-1]+2*m-1;\n\t\telse\n\t\t\tt[i]=t[i-1]+dist[i];\n\tfor(i=t[1],k=1;i<t[n]+m;i++){\n\t\tf[i]=sum_time[i]=sum_time[i-1]+k-1;\n\t\twhile(t[k]==i)k++;\n\t\tsum_peo[i]=k-1; \n\t}\n\tstart=last=1;newest=2;\t//start\u8bb0\u5f55\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e,last\u8bb0\u5f55\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u7684\u4f4d\u7f6e,newest\u8bb0\u5f55\u518d\u653e\u4e00\u4e2a\u7684\u4f4d\u7f6e \n\trec[1][0]=0;rec[1][1]=1;rec[1][2]=0;\t//rec\u4e3a\u4e00\u4e2a\u53cc\u94fe\u8868\u7684\u5f62\u5f0f\uff0crec[i][0]\u8868\u793a\u4e0b\u4e00\u4e2a\u7684\u4f4d\u7f6e,rec[i][1]\u5b58\u503c\uff0crec[i][2]\u8868\u793a\u4e0a\u4e00\u4e2a\u7684\u4f4d\u7f6e \n\tf[m+1]=min(f[m+1],f[1]+cost(1,m+1));\n\tfor(i=m+2;i<t[n]+m;i++){\n\t\tint Min=f[i-m]+cost(i-m,i);\n\t\tfor(j=start;j;j=rec[j][0]){\n\t\t\tif(cost(rec[j][1],i)+f[rec[j][1]]>cost(i-m,i)+f[i-m]||rec[j][1]<i-2*m+1){\t//\u5220\u9664\u5143\u7d20 \n\t\t\t\tif(j==start)start=rec[j][0];\n\t\t\t\tif(j==last)last=rec[j][2];\n\t\t\t\trec[rec[j][2]][0]=rec[j][0];\n\t\t\t\trec[rec[j][0]][2]=rec[j][2];\n\t\t\t}\n\t\t\tMin=min(Min,f[rec[j][1]]+cost(rec[j][1],i));\t//\u627e\u5230\u6700\u5c0f\u503c \n\t\t}\n\t\trec[newest][1]=i-m;\n\t\trec[newest][2]=last;\t//\u653e\u5728\u5c3e\u90e8 \n\t\trec[last][0]=newest;\n\t\tif(start==0)start=newest;\t//\u9632\u6b62start==0 \n\t\tlast=newest;\n\t\tnewest++;\n\t\tf[i]=Min;\t//\u65e2\u7136Min\u662f\u627e\u5230\u7684\u6700\u5c0f\u503c\uff0c\u90a3\u4e48f[i]\u4e0eMin\u5c31\u4e0d\u7528\u6bd4\u8f83\u4e86\n\t}\n\tint ans=0x7fffffff;\n\tfor(i=t[n];i<t[n]+m;i++)\n\t\tans=min(ans,f[i]);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(nmk)k<=m$\u3002~~\u53cd\u6b63\u6211\u662f\u7b97\u4e0d\u6765$k$\u662f\u591a\u5c11~~\uff0c\u5b9e\u6d4b$k\u224870$\u3002\u7136\u800c\u8fd0\u884c\u4e0b\u6765\u9700\u8981160ms\u5de6\u53f3\n\n**\u63a5\u7740**\uff1a\u5982\u679c\u4e00\u4e9b\u5143\u7d20\u5728\u94fe\u8868\u91cc\uff0c\u90a3\u4e48\u5c31\u8bf4\u660e\u5f53\u65f6$cost(i,k)+f[i]<cost(j,k)+f[j]$\u800c\u73b0\u5728\uff0c\uff08\u8fd9\u91cc\u7684\uff09$k$\u53d8\u5927\u4e0a\u9762\u8fd9\u4e2a\u5f0f\u5b50\u5c31\u4e0d\u4e00\u5b9a\u6210\u7acb\u3002\u6240\u4ee5\u627e$Min$\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u628a\u5927\u7684\u5254\u9664\u3002\u56e0\u4e3a\u4fdd\u8bc1$i<j$\uff0c\u6240\u4ee5\u5012\u7740\u627e\u3002\n\n```cpp\nfor(j=last;j;j=rec[j][2])\n\tif(f[rec[j][1]]+cost(rec[j][1],i)<Min){\n\t\tMin=f[rec[j][1]]+cost(rec[j][1],i);\n\t}else{\n\t\tif(j==last)last=rec[j][2];\n\t\trec[rec[j][2]][0]=rec[j][0];\n\t\trec[rec[j][0]][2]=rec[j][2];\n\t}\n```\n\u5176\u4ed6\u90fd\u4e00\u6837\u5c31\u8fd9\u91cc\u6539\u52a8\u4e00\u4e0b\u3002$start$\u4e5f\u53ef\u4ee5\u53bb\u6389\u4e86\u3002~~\u65f6\u95f4\uff1a124ms~~\n\n**\u7136\u540e**\uff1a\u7ee7\u7eed\u8003\u8651\uff0c\u82e5\u4fdd\u8bc1$i<j$\u7684\u60c5\u51b5\u4e0b\uff0c$cost(i,k)+f[i]<cost(j,k)+f[j]$\u3002\u7406\u8bba\u4e0a\u662f\u4e0d\u80fd\u628a$i$\u7ed9\u5220\u9664\u3002\u4f46\u7531\u4e0a\u6587\u53ea\uff0c\u5f53$k$\u53d8\u5927\u65f6\u589e\u5927\u7684\u662f$(peo[j]-peo[i])\u00d7v$\u5c31\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6539\u8fdb\u3002\n\n$rec[i]$\u8868\u793a\uff0c$f[i]=min(f[j]+cost(j,i))$\u4e2d\u7684$j$\u3002\u90a3\u4e48\u5728\u8ba1\u7b97\u524d\u9762\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u628a$rec[i]$\u7b97\u51fa\u6765\uff0c\u4ee5\u8fbe\u5230\u4f18\u5316\u7684\u76ee\u7684\u3002\n\n- $Question\\ 5$:\u5982\u4f55\u7b97$rec[i]$\uff1f\n\n$Answer$\uff1a\n\np.s:\u8fd9\u91cc\u7684\u6bd4\u8f83\u6307\u7684\u662f$f[i]+cost(i,k)$\u6bd4\u8f83\u3002\n\n**\u7b2c\u4e00**\uff1a\u6bd4\u8f83$rec[i-1]$\u4e0e$rec[i]$\uff0c\u53d6\u5176\u4e2d\u8f83\u5c0f\u503c\u3002\u56e0\u4e3a\u6709\u65f6$rec[i]$\u53ef\u80fd\u4f1a\u6ca1\u8ba1\u7b97\u5230\u3002\n\n**\u7b2c\u4e8c**\uff1a\u8ba1\u7b97$f[i]$\u65f6$i-m$\u53ef\u4ee5\u5f00\u8f66\u3002\u6bd4\u8f83$rec[i]$\u548c$i-m$\u3002$i-m$\u5c0f\uff0c\u76f4\u63a5\u8d4b\u503c\u4e0a\u53bb\u3002\u5426\u5219\uff0c\u56e0\u4e3a$i-m>rec[i]$\uff0c\u6240\u4ee5\u5f53$k$\u53d8\u5927\u7684\u67d0\u4e00\u65f6\u523b\uff0c$i-m<rec[i]$\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\u51fa\u5176\u4f4d\u7f6e\uff0c\u5e76\u628a$i-m$\u8d4b\u503c\u8fdb\u53bb\u3002\n\n\u90a3\u4e48\u95ee\u9898\u53c8\u6765\u4e86\uff0c\u8fd9\u4e0d\u80fd\u4fdd\u8bc1\u6bcf\u4e00\u4e2a$f[i]$\u90fd\u6b63\u786e\u3002\u4f46\u4e3a\u4ec0\u4e48\u80fd\u4fdd\u8bc1\u6700\u540e\u7684\u6b63\u786e\u6027\u5462\uff1f\n\nEmm\u53ef\u80fd\u6bd4\u8f83\u7384\u5b66\u5427\u3002\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define ceil(a,b) (a/b+(a%b==0?0:1))\t//a/b\u5411\u4e0a\u53d6\u6574 \nusing namespace std;\nint n,m,t[505],dist[505],f[100005],sum_time[100005],sum_peo[100005],rec[100005];\ninline int cost(int a,int b){\n    return sum_time[b]-sum_time[a]-sum_peo[a]*(b-a);\n}\nint main()\n{\n    int i,k;\n    scanf(\"%d%d\",&n,&m);\n    for(i=1;i<=n;i++)\n        scanf(\"%d\",&t[i]);\n    sort(t+1,t+1+n);\n    for(i=2;i<=n;i++)\n        dist[i]=t[i]-t[i-1]; \n    t[1]=1;\n    for(i=2;i<=n;i++)\n        if(dist[i]>2*m-1)\n            t[i]=t[i-1]+2*m-1;\n        else\n            t[i]=t[i-1]+dist[i];\n    for(i=t[1],k=1;i<t[n]+m;i++){\n        f[i]=sum_time[i]=sum_time[i-1]+k-1;\n        while(t[k]==i)k++;\n        sum_peo[i]=k-1; \n    }\n    rec[m+1]=1;\t\t//\u663e\u7136rec[m+1]\u53ea\u80fd\u662f1 \n    f[m+1]=f[1]+cost(1,m+1);\t//\u76f4\u63a5\u628af[m+1]\u7b97\u51fa\u6765 \n    for(i=m+2;i<t[n]+m;i++){\n        if(cost(rec[i-1],i)+f[rec[i-1]]<cost(rec[i],i)+f[rec[i]])\t//rec[i-1]\u4e0erec[i]\u6bd4\u8f83\uff0c\u627e\u51fa\u8f83\u5c0f\u7684 \n            rec[i]=rec[i-1];\n        if(cost(rec[i],i)+f[rec[i]]>cost(i-m,i)+f[i-m]){\n            rec[i]=i-m;\t\t\t//i-m>rec[i]\n        }else{\n            int peo=sum_peo[i-m]-sum_peo[rec[i]],Cost=cost(i-m,i)+f[i-m]-cost(rec[i],i)-f[rec[i]];\t//peo\u4eba\u6570\u5dee\uff0cCost\u603b\u5171\u5dee\u591a\u5c11\u3002\u5373k+1,Cost-peo \n            if(peo!=0&&ceil(Cost,peo)<m)\t//\u88ab\u9664\u6570\u4e0d\u7b49\u4e8e0\uff0c\u627e\u51fa\u67d0\u4e00\u65f6\u523bi-m < rec[i] \u3002\u5927\u4e8em\u6ca1\u6709\u610f\u4e49\u3002\u9632\u6b62\u8d85\u51fa\u6570\u7ec4\u8303\u56f4 \n                rec[i+ceil(Cost,peo)]=i-m;\n        }\n        f[i]=f[rec[i]]+sum_time[i]-sum_time[rec[i]]-sum_peo[rec[i]]*(i-rec[i]);\n    }\n    int ans=0x7fffffff;\n    for(i=t[n];i<t[n]+m;i++)\n        ans=min(ans,f[i]);\n    printf(\"%d\",ans);\n    return 0;\n}\n```\n\u5927\u698270ms\u3002\n\n\u8fd9\u6837\u6211\u5c31\u53ef\u4ee5~~\u65e0\u803b~~\u7684\u8bf4\uff1a\u5176\u5b9e\u6211\u4ee3\u7801\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u4e5f\u662f$O(nm)$\u3002\u53ea\u4e0d\u8fc7\u5e38\u6570~~\u7a0d\u5fae~~\u6bd4$Sooke\\ dalao$\u7684\u5927\u4e00\u70b9\u3002\n\n------------\n### \u5176\u4ed6/\u5c3e\u8bb0\nEmm\u901b\u4e86\u4e00\u4e0b\u9898\u89e3\uff0c\u53d7\u5230\u9898\u89e3\u4e2d\u5927\u4f6c\u4eec\u7684\u542f\u53d1\u3002\n\n\u82e5$t[i]$\u4e0e$t[i-1]$\u76f8\u5dee\u8d85\u8fc7$2m-2$\uff08\u5373$t[i]-t[i-1]>2*m-2$\uff09\u3002\u5c31\u53ef\u4ee5\u4ece\u4e2d\u95f4\u5206\u6210\u4e24\u6bb5\u8ba1\u7b97\u3002\u56e0\u4e3a\u5728\u6709\u610f\u4e49\u7684\u8303\u56f4\u5185$t[i-1]$\u6700\u665a$t[i-1]+m-1$\u8d70\uff0c\u4e14\u8fd9\u4e2a\u65f6\u95f4\u5728\u8fc7\u53bb$m$\u79d2\uff0c$t[i]$\u5c31\u53ef\u4ee5\u8d70\u3002\u6240\u4ee5\u8fd9\u4e24\u6bb5\u662f\u4e92\u4e0d\u5e72\u6270\u7684\uff0c\u53ef\u4ee5\u5206\u5f00\u8ba1\u7b97\u3002\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#define ceil(a,b) (a/b+(a%b==0?0:1))\nusing namespace std;\nint n,m,t[505],f[100005],sum_time[100005],sum_peo[100005],rec[100005];\ninline int cost(int a,int b){\n    return sum_time[b]-sum_time[a]-sum_peo[a]*(b-a);\n}\ninline int work(int L,int R){\t//\u8ba1\u7b97 \n\tint i,k; \n\tfor(i=R;i>=L;i--)\n\t\tt[i]-=t[L]-1;\n    for(i=t[L],k=L;i<t[R]+m;i++){\n        f[i]=sum_time[i]=sum_time[i-1]+k-L;\n        while(t[k]==i)k++;\n        sum_peo[i]=k-L;\n    }\n    rec[m+1]=1;\n    f[m+1]=f[1]+cost(1,m+1);\n    for(i=m+2;i<t[R]+m;i++){\n        if(cost(rec[i-1],i)+f[rec[i-1]]<cost(rec[i],i)+f[rec[i]])\n            rec[i]=rec[i-1];\n        if(cost(rec[i],i)+f[rec[i]]>cost(i-m,i)+f[i-m]){\n            rec[i]=i-m;\n        }else{\n            int peo=sum_peo[i-m]-sum_peo[rec[i]],Cost=cost(i-m,i)+f[i-m]-cost(rec[i],i)-f[rec[i]];\n            if(peo!=0&&ceil(Cost,peo)<m)\n                rec[i+ceil(Cost,peo)]=i-m;\n        }\n        f[i]=f[rec[i]]+sum_time[i]-sum_time[rec[i]]-sum_peo[rec[i]]*(i-rec[i]);\n    }\n    int res=0x7fffffff;\n    for(i=t[R];i<t[R]+m;i++)\n        res=min(res,f[i]);\n    return res;\n}\nint main()\n{\n    int i,last=1,ans=0;\t//last\u8fd9\u4e00\u6bb5\u7684\u5f00\u5934 \n    scanf(\"%d%d\",&n,&m);\n    for(i=1;i<=n;i++)\n        scanf(\"%d\",&t[i]);\n    sort(t+1,t+1+n);\n    for(i=2;i<=n;i++)\n    \tif(t[i]-t[i-1]>2*m-2){\t\t//t[i-1]\u662f\u4e0a\u4e00\u6bb5\u7684\u672b\u5c3e \n    \t\tans+=work(last,i-1);\t//\u8ba1\u7b97 \n    \t\tlast=i;\t\t//\u4e0b\u4e00\u6bb5\u7684\u5f00\u5934 \n    \t}\n\tprintf(\"%d\",ans+work(last,n));\t//\u52a0\u4e0a\u6700\u540e\u4e00\u6bb5 \n    return 0;\n}\n```\n63ms\n\n~~\u771f\u662f\u4e3a\u4e86\u65f6\u95f4\u4e0d\u62e9\u624b\u6bb5~~\n\n\u6211\u89c9\u5f97\u5176\u5b9e\u5728\u4f18\u5316\u7684\u8fc7\u7a0b\u4e2d\u5b66\u5230\u7684\u66f4\u591a\u3002~~\u8fd9\u4e48\u505a\u4e0b\u6765\u5176\u5b9e\u4eca\u5e74\u7684\u9898\u76ee\u4e5f\u4e0d\u7b97\u7279\u522b\u96be\uff0c\u4e5f\u8bb8\u662f\u6211\u5fc3\u6001\u4e0d\u597d\uff0c\u4e5f\u8bb8\u662f\u6211\u592a\u84bb\u4e86\u5427\uff01~~\n\n## ~~\u5b8c~~",
        "postTime": 1543416838,
        "uid": 35126,
        "name": "xu826281112",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "[\u535a\u5ba2\u98df\u7528\u66f4\u4f73QAQ](https://www.cnblogs.com/louhancheng/p/10023188.html)  \n\u6211\u7528\u7684\u65b9\u6cd5\u3002\u3002\u3002\u6bd4\u8f83\u3002\u3002\u3002~~\u522b\u81f4~~\u3002\u3002\u3002\u4e3b\u8981\u662f\u7531\u4e8e\u770b\u4e0d\u61c2@Sooke \u5927\u4f6c\u7684\u4ee3\u7801    \n\u770b\u8fd9\u9053\u9898\u7684\u65f6\u5019\uff0c\u6211\uff08\u76f8\u4fe1\u5927\u5bb6\u4e5f\u662f\u8fd9\u6837\uff09\u6700\u5148\u60f3\u5230\u7684\u662f\u8d2a\u5fc3\uff0c\u4f46\u662f\u4ece\u6570\u636e\u8303\u56f4\u53ef\u4ee5\u770b\u51fa\uff0c\u5982\u679c\u662f\u8d2a\u5fc3\u9898\uff0c\u6570\u636e\u8303\u56f4\u4e0d\u4f1a\u90a3\u4e48\u5c0f\uff08\u76f8\u4fe1NOIP\u4e0d\u4f1a\u548cLuogu\u6708\u8d5b\u4e00\u6837\uff0c2018 11\u6708\u6708\u8d5b \u641e\u4e2a\u51e0\u767e\u5927\u5c0f\u6570\u636e\u9a97\u6211\u4eec\u7528DP\uff0c\u7ed3\u679c\u662f\u8d2a\u5fc3\uff09\u3002\u6709\u4e9b\u4eba\u4f1a\u60f3(including me)\uff0c\u662f\u4e0d\u662f\u5728\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u80fd\u53d1\u8f66\u5462\uff1f\uff1f\uff1f\u6ca1\u60f3\u6e05\u695a\u5c31\u4e0b\u624b\u7684\u8bdd\uff0c\u5c31\u4f1a\u6d6a\u8d39\u597d\u591a\u65f6\u95f4\u3002\u4ed4\u7ec6\u60f3\u60f3\uff0c\u5f88\u5bb9\u6613\u53d1\u73b0\u4e0d\u4e00\u5b9a\u8981\u6709\u4eba\u5230\u8fbe\u65f6\u53d1\u8f66\uff0c\u6bd4\u5982\u6709\u65f6\u5019\uff0cbus\u4e00\u56de\u6765\uff0c\u6709\u4e2a\u4eba\u7b49\u4e862\u5206\u949f\uff0c\u540e\u9762\u90a3\u4e2a\u4eba\u8fd8\u6709INF(hh) min \u624d\u4f1a\u6765\uff0c\u5982\u679c\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u80fd\u53d1\u8f66\uff0c\u90a3\u4e48bus\u5c06\u5728INF min\u540e\u624d\u7b49\u5230\u4e00\u4e2a\u4eba\uff0c\u539f\u6765\u7b49\u4e862\u5206\u949f\u7684\u90a3\u4e2a\u4eba\u4e0e\u53f8\u673a\u7b49\u5f97\u82b1\u90fd\u8c22\u4e86\uff0c\u6240\u4ee5\u8fd9\u65f6\u5019\u80af\u5b9a\u662f\u4e00\u56de\u6765\u5c31\u53d1\u8f66\uff0c\u867d\u7136\u6ca1\u6709\u4eba\u521a\u597d\u5230\u8fbe\u3002\n\n\u5f53\u7136\uff0c\u6211\u4eec\u5148\u6392\u5e8f\u3002\uff08DP\uff0c\u4ece\u6392\u5e8f\u505a\u8d77\uff09\u3002\n\n\u6211\u4eec\u7528f[i]\u8868\u793ai min \u65f6\u53d1\u4e00\u8f86\u8f66\uff0cps[i]\u8868\u793a1 ~ i \u7684\u4eba\u6570\uff0cts[i]\u8868\u793a1 ~ i \u6240\u6709\u4eba\u5f00\u59cb\u7b49\u7684\u65f6\u95f4\u4e4b\u548c\u3002\n\u8bbe\u4e0a\u4e00\u6b21\u53d1\u8f66\u662fjmin\u65f6\uff0c\u90a3\u4e48j min\u53ca\u4ee5\u524d\u7684\u4eba\u90fd\u5df2\u7ecf\u6eda\u7c97\u4e86\uff0c\u6211\u4eec\u8981\u6c42j + 1 ~ i\u6240\u6709\u4eba\u7b49\u5f85\u65f6\u95f4\u4e4b\u548c\u3002\n\u7b49\u5f85\u65f6\u95f4\u4e4b\u548c\u4e3a\u03a3(i - t[k]) \u53ef\u4ee5\u7b80\u5316\u4e3a i * \u4eba\u6570 - \u03a3(t[k])\uff0c \u4eba\u6570\u3001\u03a3(t[k])\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u6765\u7ef4\u62a4\uff08\u5373\u524d\u9762\u63d0\u5230\u7684ps\u3001ts\u6570\u7ec4\uff09\u3002\n\u7136\u540e\u5c31\u53ef\u4ee5\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\u2014\u2014\n\n```cpp\n( 0 <= i < m ) f[i] = ps[i] * i - ts[i]\n( i > m ) f[i] = min{ f[j] + ( ps[i] - ps[j] ) * i - ( ts[i] - ts[j] ) }( 0 <= j <= i - m )\n```\n\n\u84dd\u9e45\uff0c\u8fd9\u6837\u7684\u590d\u6742\u5ea6\u8fbe\u5230\u4e86O(MAXT ^ 2)!!!\u8fd9\u662f\u8fdc\u8fdc\u4e0d\u884c\u7684\u3002\u6240\u4ee5\u6211\u4eec\u8981\u8fdb\u884c\u4f18\u5316~\n\n### \u4f18\u5316I\n\n> \u5bf9\u4e8e\u4e24\u4e2a\u4ebaa\u3001b( ta < tb,b = a + 1) \u5982\u679c tb - ta >= 2 * m \u53ef\u4ee5\u4ece\u4e2d\u95f4\u65ad\u5f00\n>\n> \u5982\u679c\u7528work( l, r )\u8868\u793a\u5bf9l\u3001r\u533a\u95f4\u8303\u56f4\u5185\u8fdb\u884c\u4e00\u6b21DP  work( ls, ta ), ls = tb;\n\n\u5f88\u5bb9\u6613\u89e3\u91ca\uff0c\u56e0\u4e3a\u5982\u679c\u4e24\u4e2a\u4eba\u4e4b\u95f4\u65f6\u95f4\u95f4\u9694\u4e0d\u5c0f\u4e8e2m\u7684\u8bdd\uff0c\u4ed6\u4eec\u662f\u5b8c\u5168\u53ef\u4ee5\u5206\u4e24\u8d9f\u8f66\u8d70\u7684\u3002\u56e0\u4e3aa\u6700\u8fdf\u8d70\u7684\u65f6\u95f4\u4e3ata + m - 1\uff0c\u8f66\u56de\u6765\u7684\u65f6\u95f4\u4e3ata + 2m - 1,\u5982\u679ctb >= ta + 2m - 1\uff0c\u521a\u597d\u53ef\u4ee5\u76f4\u63a5\u7c97\u53d1QAQ\u3002(\u6216\u8005\u7406\u89e3\u4e3ab\u53ef\u4ee5\u4f5c\u4e3a\u8d77\u70b9)\n\n### \u4f18\u5316II\n\n> i - 2* m + 1 <= j <= i - m\n\n\u4e0d\u96be\u7406\u89e3\uff0c\u6bcf\u4e24\u8d9f\u8f66\u4e4b\u95f4\u95f4\u9694\u4e0d\u4f1a\u8d85\u8fc7\u6216\u7b49\u4e8e2m\uff08\u5426\u5219\u4e2d\u95f4\u4e3a\u4ec0\u4e48\u4e0d\u518d\u6765\u4e00\u8d9f\u5462\uff1f\uff1f\uff1f\uff09\n\n\u5b9e\u9645\u4e0a\uff0c\u8fd9\u5df2\u7ecf\u6ee1\u8db3\u9898\u76ee\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u8981\u6c42\uff0c\u4f46\u662f\u8fd8\u6709\u4e00\u4e2a~~\u4e71\u641e~~\u4f18\u5316\u3002(\u5728\u8003\u573a\u4e0a\u60f3\u5230\u7684)\n\n### \u4f18\u5316III\n\n> if ps[i] == ps[i - 1] \n>\n> \u200b\tj = i - m\n\n\u89e3\u91ca\u8fd9\u4e2a\u4f18\u5316\u8981\u4ece\u8d2a\u5fc3\u7684\u89d2\u5ea6\u8003\u8651\u3002\n\n\u56de\u5230\u539f\u6765\u90a3\u4e2a\u95ee\u9898:\u662f\u4e0d\u662f\u5728\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u80fd\u53d1\u8f66\u5462\uff1f\uff1f\uff1f\n\n\u524d\u9762\u5df2\u7ecf\u89e3\u91ca\u4e86\u7b54\u6848\u662f\u5426\u5b9a\u7684\u3002\u8fd9\u4ece\u4e00\u4e2a\u4fa7\u9762\u544a\u8bc9\u6211\u4eec\uff0c\u5982\u679c\u4e0d\u662f\u5728\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u53d1\u8f66\uff0c\u80af\u5b9a\u662f\u7531\u4e8e\u8f66\u6765\u4e0d\u53ca\u56de\u6765\u3002\n\n\u6240\u4ee5\uff0c\u5728\u6700\u4f18\u65b9\u6848\u4e2d\uff0c\u90a3\u8d9f\u8f66\u4e00\u5b9a\u4f1a\u5728\u521a\u597d\u56de\u6765\u65f6\u53d1\u8f66\u3002\u4e5f\u5c31\u662f\u8bf4\uff0ci min\u65f6\u8f66\u521a\u597d\u56de\u6765\uff0c\u4e0a\u4e00\u6b21\u53d1\u8f66\u662f\u5728 i - m min\u65f6\u3002\n\n~~\u771f\u662f\u7384\u4e4b\u53c8\u7384\u3002~~\n\n\u6700\u7ec8\u7684\u7a0b\u5e8f\u4e0d\u662f\u5728\u8003\u573a\u4e2d\u5199\u7684\uff0c\u56e0\u4e3a\u8003\u573a\u4e2d \u4f18\u5316I \u91c7\u7528\u4e86\u8def\u5f84\u538b\u7f29\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u51fa\u73b0\u4e00\u4e9b\u95ee\u9898\uff0c\u88ab\u5361\u638920\u5206\u3002\n\n\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u4e5f\u662f\u5728O(nm)\u7ea7\u522b\uff0c\u4f46\u5e38\u6570\u8981\u6bd4Sooke\u5927\u4f6c\u7684\u4ee3\u7801\u5927\u4e00\u4e9b\u3002\n\n\u7136\u540e\u4e0a\u4ee3\u7801\uff01\uff08\u867d\u7136\u4e0d\u662f\u6700\u597d\u7684\u89e3\uff0c\u4f4687ms\u4e5f\u51d1\u5408\u5427\u3002\uff09\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define MAXN 505\n#define MAXM 205\n\nint n, m, mm, ans;\nint t[MAXN], ps[MAXM * MAXN], ts[MAXM * MAXN];\nint f[MAXM * MAXN];\n\nvoid work( int l, int r ){\n\tmemset( ps, 0, sizeof ps ), memset( ts, 0, sizeof ts ), memset( f, 0, sizeof f );\n\tfor ( int i = l + 1; i <= r; ++i ){\n\t\tt[i] -= t[l]; ps[t[i]]++; ts[t[i]] += t[i];\n\t}\n\tt[l] = 0; ps[0]++;\n\tfor ( int i = 1; i < t[r] + m; ++i ) ps[i] += ps[i - 1], ts[i] += ts[i - 1];\n\tfor ( int i = 1; i < t[r] + m; ++i ){\n\t\tif ( i < m ){ f[i] = ps[i] * i - ts[i]; continue; }\n\t\tif ( ps[i] == ps[i - 1] ){ f[i] = f[i - m] + ( ps[i] - ps[i - m] ) * i - ( ts[i] - ts[i - m] ); continue; }\n\t\tf[i] = INT_MAX;\n\t\tfor ( int j = max( 0, i - mm + 1 ); j <= i - m; ++j ) f[i] = min( f[i], f[j] + ( ps[i] - ps[j] ) * i - ( ts[i] - ts[j] ) );\n\t}\n\tint cur(INT_MAX);\n\tfor ( int i = t[r]; i < t[r] + m; ++i ) cur = min( cur, f[i] );\n\tans += cur;\t\n}\n\nint main(){\n\tscanf( \"%d%d\", &n, &m ); mm = m << 1;\n\tfor ( int i = 1; i <= n; ++i ) scanf( \"%d\", &t[i] );\n\tsort( t + 1, t + n + 1 );\n\tint ls(1);\n\tfor ( int i = 1; i < n; ++i )\n\t\tif ( t[i + 1] - t[i] >= mm ) work( ls, i ), ls = i + 1;\n\twork( ls, n );\n\tprintf( \"%d\\n\", ans );\n\treturn 0;\n}\n```",
        "postTime": 1543640719,
        "uid": 70786,
        "name": "_louhc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "### \u524d\u8a00\uff08\u5410\u69fd\uff09\n\u672c\u849f\u84bb\u4eca\u5e74\u6b63\u662f\u5e7f\u4e1c\u7684 pj \u7ec4\u9009\u624b\uff08\u9003\uff09\n\n\u8fd9\u9053\u9898\u82b1\u4e86\u6211\u5927\u7ea6\u4e24\u4e2a\u5c0f\u65f6\u7684\u65f6\u95f4\uff0c\u5bfc\u81f4\u6211\u7b2c\u56db\u9898\u65f6\u95f4\u4e0d\u591f\uff0c\u601d\u8def\u9519\u4e86\uff0c\u53ea\u62ff\u4e8644\u5206\uff0c\u90fd\u602a\u8fd9\u7b2c\u4e09\u9898\u3002\n\n## \u6b63\u6587\n\n### \u5fc3\u8def\u5386\u7a0b\n\n\u6211\u662f\u4e00\u4e2a\u56fe\u8bba\u6a21\u677f\u9898\u6253\u7684\u8d85\u597d\u7684\u849f\u84bb\uff0c\u56e0\u6b64\u62ff\u5230\u8fd9\u9898\u7b2c\u4e00\u53cd\u5e94\u5c31\u662f\uff1a\n\n```cpp\nSPFA!\n```\n\u4e8e\u662f\u6211\u5c31\u52a8\u624b\u5f00\u6253\u90a3\u79cd\u6807\u51c6\u7684 SPFA \uff0c\u7528\u961f\u5217\u505a\uff0c\u7c7b\u4f3c\u5e7f\u641c\u3002\u7ecf\u8fc7\u8c03\u8bd5\uff0c\u9519\u4e86\uff0c\u8fd8\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff08\u73b0\u5728\u89c9\u5f97\u8fd9\u79cd\u601d\u8def\u5f88\u50bb\uff09\u3002\n\n\u6211\u5fc3\u7070\u610f\u51b7\uff0c\u51b3\u5b9a\u7528\u7c7b\u4f3c\u7684\uff0c\u6df1\u641c\u3002\n\n\u7206\u641c\u80af\u5b9a\u8d85\u65f6\uff0c\u4e8e\u662f\u57fa\u672c\u601d\u8def\u5c31\u786e\u5b9a\u4e0b\u6765\u4e86\uff1a\n```cpp\n\u8bb0\u5fc6\u5316\u641c\u7d22\uff01\n```\n### \u601d\u8def\u8bb2\u89e3\n\n1\u3001\u9996\u5148\u8f66\u80af\u5b9a\u8981\u7b49\u5230\u67d0\u4e2a\u4eba\u6765\u518d\u51fa\u53d1\u662f\u5427\uff0c\u4e8e\u662f\u53ef\u4ee5\u5148\u679a\u4e3e\u7b2c\u4e00\u6b21\u7684\u51fa\u53d1\u65f6\u95f4\u3002\n\n2\u3001\u4e00\u8f86\u8f66\u5230\u8fbe\u7684\u65f6\u5019\uff0c\u6216\u8bb8\u6709\u4e9b\u4eba\u5df2\u7ecf\u5728\u7b49\u4e86\uff0c\u6240\u4ee5\u8f66\u4e00\u5230\u5c31\u9a6c\u4e0a\u51fa\u53d1\u672a\u5c1d\u4e0d\u53ef\u80fd\u662f\u4e00\u79cd\u6700\u4f18\u89e3\u3002\n\n3\u3001\u65e2\u7136\u8981\u7b49\uff0c\u90a3\u5c31\u8981\u7b49\u5230\u4eba\u518d\u8d70\uff0c\u7b49\u51e0\u4e2a\u4eba\u90fd\u6709\u53ef\u80fd\u3002\u8981\u662f\u53d1\u8f66\u65f6\u65e0\u4eba\u4e0a\u8f66\uff0c\u90a3\u4e48\u53d1\u8f66\u65f6\u95f4\u5c31\u53ef\u4ee5\u63d0\u524d\u5230\u4e0a\u4e00\u4e2a\u4eba\u4e0a\u8f66\u7684\u65f6\u95f4\uff0c\u53ea\u6709\u66f4\u597d\u6ca1\u6709\u66f4\u574f\u3002\n\n### \u5177\u4f53\u5b9e\u73b0\n\n\u8bb0\u5fc6\u5316\u7684\u5b9e\u73b0\uff1a\u5f00 $f$ \u6570\u7ec4\uff0c$f_i$ \u8868\u793a\u8f66\u5728\u7b2c i \u5206\u949f\u53ef\u4ee5\u51fa\u53d1\uff0c\u6b64\u65f6\u5df2\u7ecf\u79ef\u7d2f\u7684\u6700\u5c11\u7684\u7b49\u8f66\u65f6\u95f4\u3002\n\ndfs\u7684\u5b9e\u73b0\uff1a\u4e24\u4e2a\u53c2\u6570 $t$ \u548c $k$ \uff0c$t$ \u8868\u793a\u4e0a\u6b21\u5728\u7b2c $t$ \u5206\u949f\u53d1\u8f66\uff0c $k$ \u8868\u793a\u4e0a\u6b21\u5df2\u7ecf\u63a5\u8d70\u4e86 $k$ \u4e2a\u4eba\u3002\n\n\u4e0b\u9762\u4e0a\u4ee3\u7801\uff08\u8003\u573a\u6e90\u4ee3\u7801\uff09\uff1a\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>//\u4e0d\u6562\u7528\u4e07\u80fd\u5934\u6587\u4ef6\nusing namespace std;\nlong long n,m,a[505],f[4000105],t,k,maxn,minn=1e9;\n//4000405\uff1a\u6700\u5927\u7684\u6709\u53ef\u80fd\u641c\u7d22\u5230\u7684\u65f6\u95f4\nvoid dfs(int t,int k){\n\tif(k==n){//\u5168\u90e8\u4eba\u90fd\u9001\u5b8c\u4e86\n\t\tif(f[t]<minn) minn=f[t];\n\t\treturn ;\n\t}\n\tlong long s=0,bian;\n\tfor(int i=k+1;i<=n;i++){\n\t\tif(a[i]<=t+m){\n\t\t\ts+=t+m-a[i];\n\t\t\tif(s>=minn)return;\n\t\t\tbian=i;\n\t\t}\n\t\telse break;\n\t}//s:\u5230\u8fbe\u540e\u9a6c\u4e0a\u51fa\u53d1\u4f1a\u8ba9\u5df2\u7ecf\u5230\u7684\u4eba\u7b49\u591a\u4e45\n\tif(t+m-a[n]>=0){//\u56de\u6765\u7684\u65f6\u5019\u5168\u90e8\u4eba\u90fd\u5728\u7b49\u4e86\n\t\tif(minn>f[t]+s) minn=f[t]+s;\n\t\treturn;\n\t}\n\tif(f[t]+s<f[t+m]&&t+m-a[k+1]>=0){//\u9a6c\u4e0a\u51fa\u53d1\n\t\tf[t+m]=f[t]+s;\n\t\tdfs(t+m,bian);\n\t}\n\ts=0;\n\tfor(int i=k+1;i<=n;i++){\n\t\ts+=(i-k-1)*(a[i]-a[i-1]);\n\t\tif(s>=minn)return;\n\t\tif(f[t]+s<f[a[i]]&&t+m<=a[i]&&a[i]!=a[i+1]){\n        //\u63a5\u5b8c\u7b2ci\u4e2a\u4eba\u540e\u518d\u51fa\u53d1\n        //a[i]!=a[i+1]\u526a\u679d\uff1a\u4e24\u4e2a\u4eba\u4e00\u8d77\u5230\u5c31\u4e24\u4e2a\u4eba\u4e00\u8d77\u9001\n\t\t\tf[a[i]]=f[t]+s;//\u66f4\u65b0\n\t\t\tdfs(a[i],i);//\u9012\u5f52\n\t\t}\n\t}\n}\nint main(){\n\tfreopen(\"bus.in\",\"r\",stdin);\n\tfreopen(\"bus.out\",\"w\",stdout);//\u770b\u4f60\u8fd8\u6284\u4e0d\u6284\u4ee3\u7801\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i];\n\t}\n\tsort(a+1,a+n+1);//\u6392\u5e8f\n\tfor(int i=1;i<=4000105;i++){\n\t\tf[i]=1e9;//\u521d\u59cb\u5316\u4e3a\u5f88\u5927\u7684\u6570\n\t}\n\tlong long p=0;\n\tfor(int i=1;i<=n;i++){\n\t\tp+=(i-1)*(a[i]-a[i-1]);\n\t\tf[a[i]]=p;\n\t\tif(a[i]!=a[i+1])dfs(a[i],i);//\u679a\u4e3e\u51fa\u53d1\u65f6\u95f4\n\t}\n\tcout<<minn;\n\tfclose(stdin);\n\tfclose(stdout);\n\treturn 0;\n}\n```\n\n### \u603b\u7ed3\n\n\u8fd9\u7bc7\u9898\u89e3\u5e76\u6ca1\u6709\u7528\u5230 dp \u7b49\u9ad8\u6df1\u7b97\u6cd5\uff0c\u7528\u7684\u53ea\u662f\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\n\u867d\u7136\u6700\u6162\u7684\u70b9\u7528\u4e86\u5c06\u8fd1 1s \uff0c\u4f46\u8fd9\u5bf9\u4e8e\u65b0\u624b\u6765\u8bf4\u786e\u5b9e\u798f\u97f3\u3002\u56e0\u4e3a\u5176\u5b9e\u638c\u63e1\u597d\u57fa\u7840\u7b97\u6cd5\uff0c\u63d0\u9ad8+\u7684\u9898\u4e5f\u662f\u53ef\u4ee5\u89e3\u51b3\u7684\u3002\n\n\u91cd\u8981\u7684\u662f\u7efc\u5408\u8fd0\u7528\u80fd\u529b\u3002\u6bd4\u5982\u8bf4\u8fd9\u9898\uff0c\u4f60\u672a\u5fc5\u80fd\u60f3\u5230\u8fd9\u79cd\u65b9\u6cd5\u3002\u5e7f\u4e1c\u53ea\u6709\u4e2a\u4f4d\u6570\u7684 pj \u7ec4\u9009\u624b AC \u4e86\u6b64\u9898\uff0c\u800c\u5927\u6982\u53ea\u6709\u6211\u4e00\u4e2a\u4eba\u662f\u8fd9\u4e48\u505a\u7684\u3002\u56e0\u6b64\u628a\u63e1\u597d\u57fa\u7840\u662f\u6700\u91cd\u8981\u7684\u3002",
        "postTime": 1543240767,
        "uid": 93041,
        "name": "__Watcher",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u53d1\u4e00\u4e2a $O(n^2)$ \u7684\u89e3\u6cd5\u5427\u3002\u4ee3\u7801\u5c31\u4e0d\u8d34\u4e86\u3002\n\n\u9996\u5148\u8bc1\u660e\u4e00\u4e2a\u6027\u8d28\uff1a\u5728\u5c06 $t_{1\\dots n}$ \u6392\u5e8f\u540e\uff0c\u6700\u4f18\u53d1\u8f66\u65f6\u523b\u4e00\u5b9a\u5f62\u5982\n$$t_{i_0}<t_{i_0}+m<t_{i_0}+2m<\\dots<t_{i_1}< t_{i_1}+m< t_{i_1}+2m< \\dots\\;(1\\le i_0 < i_1 <\\dots <i_k \\le n)$$\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u5b9a\u53ea\u80fd\u5728\n1. \u67d0\u4eba\u5230\u8fbe\u65f6\u53d1\u8f66\n2. \u6216\u8005\u5728\u76f8\u90bb\u4e24\u6b21\u3010\u67d0\u4eba\u5230\u8fbe\u65f6\u53d1\u8f66\u3011\u4e4b\u95f4\uff0c\u4ee5 $m$ \u7684\u9891\u7387\u53d1\u8f66\n\n\u5bf9\u7b54\u6848\u957f\u5ea6\u505a\u5f52\u7eb3\uff1a\n- \u7b2c\u4e00\u4e2a\u53d1\u8f66\u65f6\u523b\u4e00\u5b9a\u662f\u5728\u67d0\u4eba\u5230\u8fbe\u65f6\u3002\u5426\u5219\uff1a\n - \u5982\u679c\u53d1\u8f66\u524d\u65e0\u4eba\u5230\u8fbe\uff0c\u5219\u4e0d\u5fc5\u53d1\u8f66\n - \u5982\u679c\u53d1\u8f66\u524d\u6709\u4eba\u5230\u8fbe\uff0c\u5219\u4e00\u5b9a\u53ef\u4ee5\u63d0\u524d\u5230\u4e0a\u4e00\u4e2a\u4eba\u5230\u8fbe\u65f6\u53d1\u8f66\uff0c\u6b64\u65f6\u4e4b\u524d\u7684\u4eba\u7b49\u5f85\u65f6\u95f4\u51cf\u5c11\uff0c\u4e4b\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u548c\u53d1\u8f66\u5b89\u6392\u4e0d\u53d7\u5f71\u54cd\n- \u5047\u8bbe\u524d $n$ \u4e2a\u53d1\u8f66\u65f6\u523b\u90fd\u6ee1\u8db3\u4ee5\u4e0a\u89c4\u5f8b\u3002\u8003\u8651\u7b2c $n+1$ \u6b21\u53d1\u8f66\uff1a\n - \u5982\u679c\u53d1\u8f66\u65f6\u523b\u6709\u4eba\u5230\u8fbe\uff0c\u5219\u663e\u7136\u6ee1\u8db3\n - \u5982\u679c\u53d1\u8f66\u65f6\u523b\u65e0\u4eba\u5230\u8fbe\uff0c\u5219\u79bb\u7b2c $n$ \u6b21\u53d1\u8f66\u95f4\u9694\u5fc5\u7136\u4e3a $m$\uff0c\u5426\u5219\u82e5\u8d85\u8fc7 $m$\uff0c\u5c31\u4e00\u5b9a\u53ef\u4ee5\u63d0\u524d\u4e00\u5206\u949f\u53d1\u8f66\uff0c\u6b64\u65f6\u4e4b\u524d\u7684\u4eba\u7b49\u5f85\u65f6\u95f4\u4e0d\u589e\uff0c\u4e4b\u540e\u7684\u7b49\u5f85\u65f6\u95f4\u548c\u53d1\u8f66\u5b89\u6392\u4e0d\u53d7\u5f71\u54cd\n\n\u8bc1\u6bd5\u3002\u8fd9\u6837\u95ee\u9898\u5c31\u53d8\u6210\uff1a\u9009\u53d6\u4e00\u4e9b\u540c\u5b66\u7684\u5230\u8fbe\u65f6\u523b $1 \\le i_1 < i_2 < \\dots < i_k \\le n$ \u6765\u53d1\u8f66\uff0c\u7136\u540e\u5728\u65f6\u95f4\u6bb5 $[i_j, i_{j+1}]$ \u5185\u7684\u53d1\u8f66\u65f6\u523b\u4e3a $t_j+km,\\;k=0,1,\\dots, \\left \\lfloor{\\frac{t_{j+1}-t_j}{m}}\\right \\rfloor-1$\uff08\u6ce8\u610f\u6700\u540e\u9700\u8981$-1$\uff0c\u5426\u5219 $t_{j+1}$ \u79bb\u4e0a\u4e00\u6b21\u53d1\u8f66\u95f4\u9694\u4f1a\u5c0f\u4e8e $m$\uff09\uff0c\u5728\u8fd9\u6837\u7684\u53d1\u8f66\u89c4\u5219\u4e0b\uff0c\u7b49\u5f85\u65f6\u95f4\u4e4b\u548c\u6700\u5c11\u662f\u591a\u5c11\u3002\n\n\u9996\u5148\u7528 $O(n\\log(n))$ \u7684\u65f6\u95f4\u6392\u5e8f\uff0c\u518d\u7528 $O(n^2)$ \u7684\u65f6\u95f4\u9884\u5904\u7406\u51fa\uff1a\u4efb\u610f\u4e00\u5bf9\u540c\u5b66\u4e4b\u95f4\uff0c\u5728\u4ee5\u4e0a\u53d1\u8f66\u65b9\u5f0f\u4e4b\u4e0b\uff0c\u8fd9\u5bf9\u540c\u5b66\u4e4b\u95f4\u7684\u540c\u5b66\u7684\u7b49\u5f85\u65f6\u95f4\u4e4b\u548c\u3002\u7136\u540e\u5c31\u662f\u7b80\u5355\u7684DP\u4e86\u3002\u9636\u6bb5\u6570 $O(n)$\uff0c\u8f6c\u79fb\u6570 $O(n)$\uff0c\u8f6c\u79fb\u4ee3\u4ef7 $O(1)$.\n\n\u4e3a\u4e86\u907f\u514d\u5904\u7406\u7e41\u7410\u7684\u8fb9\u754c\u60c5\u51b5\uff0c\u53ef\u4ee5\u589e\u52a0\u4e24\u4f4d\u540c\u5b66\uff0c\u7b49\u5f85\u65f6\u95f4\u5206\u522b\u4e3a $t_1-2m$ \u548c $t_n+2m$\uff0c\u663e\u7136\u4ed6\u4eec\u4e0d\u5f71\u54cd\u7b54\u6848\uff0c\u56e0\u800c\u4e00\u5b9a\u53ef\u4ee5\u5b58\u5728\u4e8e\u6700\u4f18\u89e3\u4e2d\u3002\n\n\u603b\u590d\u6742\u5ea6\u4e3a $O(n^2)$.",
        "postTime": 1542117682,
        "uid": 92566,
        "name": "exprosic",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5dee\u70b9\u9001\u6211\u9000\u5f79\u3002\u3002\u3002\n\n\u8003\u573a\u4e0a\u4e00\u770b\uff0c\u8fd9\u4e0d\u662f\u4e00\u9053\u88f8\u7684DP\u5417\uff0c\u7136\u540e\u8c03\u4e86\u597d\u4e45\u6ca1\u8c03\u51fa\u6765\u3002\n\n\u95f2\u8bdd\u5c11\u8bf4\uff0c\u6765\u8bb2\u4e00\u4e0b\u601d\u8def\uff1a\n\n## \u4e00\uff0e\u8003\u573a\u4e0a\u7684\u4ee3\u7801\uff0830pts\uff09\n\u5bf9\u4e8e\u6bcf\u4e2a\u4eba$i$\u5230\u6765\u7684\u65f6\u95f4\u8bb0\u4e3a$t_i$, \u679a\u4e3e\u6b64\u6b21\u53d1\u8f66\u7684\u65f6\u95f4$i$\u4e0e\u4e0a\u6b21\u53d1\u8f66\u7684\u65f6\u95f4$j$\uff0c\u5219\u4ee3\u4ef7$f_i$=$min$($f_i$,$f_j$+$cost$);\u5176\u4e2d$cost$\u4e3a\u4ece$i+1$\u5230$j$\u65f6\u523b\u4e2d\u5230\u6765\u7684\u4eba\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O\uff08$t^2n$\uff09\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<string>\n#include<cstring>\n#include<algorithm>\n#include<cmath>\n#include<cstdlib>\n#define R register\n#define ll long long\nusing namespace std;\nconst int N=510,M=4000110;\nint n,m;\nint t[N]= {};\nint ans=0;\nint f[M]= {};\nint main() {\n\t//freopen(\"bus.in\",\"r\",stdin);\n\t//freopen(\"bus.out\",\"w\",stdout);\n\tscanf(\"%d%d\",&n,&m);//\u8bfb\u5165\u3001\u521d\u59cb\u5316\u3002\n\tfor(int i=1; i<=M; ++i)f[i]=0x3f3f3f3f;\n\tfor(int i=1; i<=n; ++i)scanf(\"%d\",&t[i]);\n\tsort(t+1,t+n+1);\n\tint tt=t[n];\n\tf[1]=0;\n\tfor(R int i=1; i<=m; i++) {\n\t\tint l=1,r=n,cost=0;\n\t\twhile(i<t[r])r--;\n\t\tfor(int k=l; k<=r; ++k) {\n\t\t\tcost+=i-t[k];\n\t\t}\n\t\tf[i]=min(f[i],cost);\n\t}\n\tfor(R int i=1; i<=tt; i++) {\n\t\tfor(R int j=1; j<=i-m; j++) {\n\t\t\tint l=1,r=n,cost=0;\n\t\t\twhile(j>=t[l])l++;//\u5bfb\u627e\u4ee3\u4ef7\u8fb9\u754c\n\t\t\twhile(i<t[r])r--;\n\t\t\tfor(int k=l; k<=r; ++k) {\n\t\t\t\tcost+=i-t[k];\n\t\t\t}\n\t\t\tf[i]=min(f[i],f[j]+cost);//\u627e\u6700\u5c0f\u503c\n\t\t}\n\t}\n\tprintf(\"%d\",f[tt]);\n\t//fclose(stdin);\n\t//fclose(stdout);\n\treturn 0;\n}\n```\n## \u4e8c\uff0e\u5bf9\u8003\u573a\u4ee3\u7801\u7684\u4f18\u53161\uff0850pts\uff09\n \uff08\u5176\u5b9e\u4e0a\u9762\u7684\u4ee3\u7801\u8fd8\u6709\u4e00\u5904\u5c0f\u9519\u8bef\uff0c\u4e0d\u8fc7CCF\u7684\u6570\u636e\u592a\u6c34\u4e86\uff0c\u6ca1\u6709\u5361\u5230\uff0c\u6700\u540e\u8f93\u51fa\u65f6\u4e0d\u4e00\u5b9a$f_{tt}$\u6700\u5c0f\uff0c\u800c\u662f\u4ece$f_{tt}$\u5230$f_{tt+m-1}$\u4e2d\u7684\u6700\u5c0f\u503c\u6700\u5c0f\uff09\u53e6\u5916\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u4e0a\u9762\u7684\u7a0b\u5e8f\u7684$dp$\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4f7f\u7528\u4e86$while$\u6765\u904d\u5386\u4ece$i+1$\u5230$j$\u65f6\u523b\u4e2d\u5230\u6765\u7684\u4eba\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u574f\u60c5\u51b5\u8fbe\u5230O\uff08$n$\uff09\uff0c\u5176\u5b9e\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u4f18\u5316\uff0c\u4f7f\u67e5\u8be2\u8fbe\u5230O(1),\u603b\u590d\u6742\u5ea6\u4e3aO\uff08$t^2$),\u7efc\u4e0a\u4e24\u70b9\u6539\u8fdb\u540e\u4ee3\u7801\u5982\u4e0b\uff08\u7ecf\u8fc7\u4e00\u5e74\uff0c\u7801\u98ce\u7a81\u53d8\uff0c\u4e0d\u8981\u4ecb\u610f\uff09\uff1a\n ```cpp\n#include<bits/stdc++.h>\n\n#define rep(i,o,p) for(register int i=o;i<=p;++i)\n\n#define R register\n\n#define ll long long\n\nusing namespace std;\n\nconst int M = 4000105;\n\nint n,m,tt,t,ans=0x3f3f3f3f,k[M],s[M],f[M];\n//k[i] \u8868\u793a\u4ece0\u5230i\u70b9\u7684\u4e2a\u6570\uff0cs[i]\u8868\u793a\u4ece0\u5230i\u70b9\u7684\u4f4d\u7f6e\u4e4b\u548c\u3002\n\nint main() {\n\tscanf(\"%d%d\", &n, &m);\n\trep(i,1,n) {\n\t\tscanf(\"%d\", &t);\n\t\ttt=max(t, tt);\n\t\t++k[t];\n\t\ts[t]+=t;\n\t}\n\trep(i,1,tt+m-1) \t\n\t\tk[i]+=k[i-1],s[i]+=s[i-1];\n\trep(i,0,tt+m-1) {\n\t\tf[i]=k[i]*i-s[i];\n\t\trep(j,0,i-m)\t\n\t\t\tf[i]=min(f[i],f[j]+(k[i]-k[j])*i-(s[i]-s[j]));\n\t}\n\trep(i,tt,tt+m-1)\t\tans=min(ans,f[i]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n## \u4e09\uff0e\u5bf9\u8003\u573a\u7684\u4ee3\u7801\u4f18\u53162\uff0870pts\uff09\n\u5bf9\u4e8e\u4e0a\u9762\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e00\u4e2a\u8d2a\u5fc3\uff0c\u82e5\u5728\u4e00\u6b21\u53d1\u8f66\u4e4b\u540e$2m+1$\u65f6\u95f4\u5185\u6ca1\u6709\u53d1\u8f66\uff0c\u90a3\u5fc5\u53ef\u4ee5\u5728$m$\u65f6\u523b\u53d1\u8f66\u4f7f\u4ee3\u4ef7\u66f4\u4f18\uff0c\u6545$j$\u7684\u8303\u56f4\u53ef\u4ee5\u4ece$[0,i-m]$\u6539\u4e3a$[i-2m+1,i-m]$,\u6ce8\u610f$j$>=0,\u65f6\u95f4\u590d\u6742\u5ea6\nO\uff08$tm$\uff09\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\n\n#define rep(i,o,p) for(register int i=o;i<=p;++i)\n\n#define R register\n\n#define ll long long\n\nusing namespace std;\n\nconst int M = 4000105;\n\nint n,m,tt,t,ans=0x3f3f3f3f,k[M],s[M],f[M];\n//k[i] \u8868\u793a\u4ece0\u5230i\u70b9\u7684\u4e2a\u6570\uff0cs[i]\u8868\u793a\u4ece0\u5230i\u70b9\u7684\u4f4d\u7f6e\u4e4b\u548c\u3002\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    rep(i,1,n) {\n        scanf(\"%d\", &t);\n        tt=max(t, tt);\n        ++k[t];\n        s[t]+=t;\n    }\n    rep(i,1,tt+m-1) \t\n        k[i]+=k[i-1],s[i]+=s[i-1];\n    rep(i,0,tt+m-1) {\n        f[i]=k[i]*i-s[i];\n        rep(j,max(i - m - m + 1,0),i-m)\t\n            f[i]=min(f[i],f[j]+(k[i]-k[j])*i-(s[i]-s[j]));\n    }\n    rep(i,tt,tt+m-1)\t\tans=min(ans,f[i]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n## \u56db\uff0e\u5bf9\u8003\u573a\u4e0a\u4ee3\u7801\u7684\u4f18\u53163\uff08100pts\uff09\n\u5bf9\u4e0a\u4ee3\u7801\u8003\u8651\u526a\u679d\uff0c\u82e5\u8be5\u533a\u95f4\u5185\u6ca1\u6709\u70b9\uff0c\u90a3\u5c31\u4e0d\u5fc5\u53bb\u679a\u4e3e$j$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O\uff08\u7384\u5b66\u80fd\u8fc7\uff09\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include<bits/stdc++.h>\n\n#define rep(i,o,p) for(register int i=o;i<=p;++i)\n\n#define R register\n\n#define ll long long\n\nusing namespace std;\n\nconst int M = 4000105;\n\nint n,m,tt,t,ans=0x3f3f3f3f,k[M],s[M],f[M];\n//k[i] \u8868\u793a\u4ece0\u5230i\u70b9\u7684\u4e2a\u6570\uff0cs[i]\u8868\u793a\u4ece0\u5230i\u70b9\u7684\u4f4d\u7f6e\u4e4b\u548c\u3002\n\nint main() {\n    scanf(\"%d%d\", &n, &m);\n    rep(i,1,n) {\n        scanf(\"%d\", &t);\n        tt=max(t, tt);\n        ++k[t];\n        s[t]+=t;\n    }\n    rep(i,1,tt+m-1) \t\n        k[i]+=k[i-1],s[i]+=s[i-1];\n    rep(i,0,tt+m-1) {\n    \tif(i>=m&&k[i-m]==k[i]){\n    \t\tf[i]=f[i-m];\n    \t\tcontinue;\n\t\t}\n        f[i]=k[i]*i-s[i];\n        rep(j,max(i - m - m + 1,0),i-m)\t\n            f[i]=min(f[i],f[j]+(k[i]-k[j])*i-(s[i]-s[j]));\n    }\n    rep(i,tt,tt+m-1)\t\tans=min(ans,f[i]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n## \u4e94\uff0e\u603b\u7ed3\n\u8fd9\u9053\u9898\u5230\u8fd9\u91cc\u5c31AC\u4e86\uff0c\u636e\u8bf4\u6709O\uff08nm\uff09\u7684\u7b97\u6cd5~~\u61d2\u7684\u5199~~\uff0c\u5982\u679c\u60f3\u4e86\u89e3\u8bf7\u79fb\u6b65\u5176\u4ed6\u795e\u7287\u7684\u9898\u89e3,\u795d\u5404\u4f4d$NOIP RP++$\uff0c\u8c22\u8c22\u5927\u5bb6\u3002",
        "postTime": 1563947049,
        "uid": 111630,
        "name": "ADivT",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "# \u89e3\u9898\u611f\u60f3\n\u8fd9\u9053\u9898\u7684\u8d28\u91cf\u6781\u597d\uff0c\u6839\u636e\u4e0d\u540c\u7684\u6d4b\u8bd5\u6570\u636e\uff0c\u7531\u7b80\u5165\u96be\uff0c\u6db5\u76d6\u4e86NOIP\u666e\u53ca\u7ec4\u9700\u8981\u638c\u63e1\u7684\u597d\u51e0\u4e2a\u7b97\u6cd5\u3002\n\n# \u9898\u76ee\u5206\u6790\n\u4ed4\u7ec6\u8bfb\u9898\u4e4b\u540e\uff0c\u5148\u8003\u8651\u8f93\u5165\u6570\u636e\u3002  \n\u8f93\u5165\u6570\u636e\u5f53\u4e2d\u4e58\u5ba2\u5230\u8fbe\u65f6\u95f4\u6570\u636e\u7684\u8f93\u5165\u987a\u5e8f\u4e0e\u89e3\u9898\u65e0\u5173\uff0c\u53ea\u6709\u5230\u8fbe\u65f6\u95f4\u4e0e\u89e3\u9898\u6709\u5173\u3002\u56e0\u6b64\u8f93\u5165\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u6309\u7167\u5230\u8fbe\u65f6\u95f4\u76f4\u63a5\u505a\u8f93\u5165\u6570\u636e\u6570\u7ec4\u3002\n\n\u9700\u8981\u7406\u89e3\u7684\u70b9\uff1a\u4e58\u5ba2\u4e0a\u8f66\u4e4b\u540e\u5c31\u7b97\u5b8c\u6210\u4efb\u52a1\uff0c\u8bb0\u5f55\u7b49\u5f85\u65f6\u95f4\u53ea\u5305\u62ec\u4e0a\u8f66\u4e4b\u524d\u7684\u7b49\u5f85\u65f6\u95f4\u3002\n\n\u8865\u5145\uff1a\n\u89c2\u5bdf\u6570\u636e\uff0c\u5bf9\u4e8e\u540e\u9762\u4e24\u7ec4\u6d4b\u8bd5\u70b9\uff0ctmax \u660e\u663e\u5927\uff0cn \u76f8\u5bf9\u6bd4\u8f83\u5c0f\u3002\u8fd9\u79cd\u60c5\u51b5\u5982\u679c\u7528\u6570\u7ec4\u5b58\u50a8\uff0c\u7a7a\u5143\u7d20\u592a\u591a\uff0c\u53cd\u800c\u4e0d\u5229\u4e8e\u67e5\u627e\u3002\u6240\u4ee5\u7528 map \u5b58\u50a8\u66f4\u5408\u9002\u3002\n\n## \u60c5\u51b5\u4e00\uff1am==1 \n\u5bf9\u4e8e m==1\uff0c\u5b9e\u9645\u4e0a\u6bcf\u8d9f\u90fd\u80fd\u63a5\u5230\u4e58\u5ba2\uff0c\u56e0\u6b64\u5b8c\u5168\u4e0d\u9700\u8981\u7b49\u5f85\uff0c\u76f4\u63a5\u8f93\u51fa 0\u3002\n\n## \u60c5\u51b5\u4e8c\uff1an <= 20 && m==2\n\u5bf9\u4e8e n<=20 && m==2\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u9488\u5bf9\u6bcf\u4e00\u4e2a\u4e58\u5ba2\u5230\u8fbe\u7684\u65f6\u95f4\u70b9\u548c\u9001\u5b8c\u4e58\u5ba2\u4e4b\u540e\u8fd4\u56de\u7684\u65f6\u95f4\u70b9\u505a \u201c\u53d1\u8f66\u201d \u6216\u8005 \u201c\u4e0d\u53d1\u8f66\u201d \u7684\u6df1\u5ea6\u641c\u7d22\uff0c\u65e2\u7136 n<=20 && m==2\uff0c\u56e0\u6b64\u641c\u7d22\u6df1\u5ea6\u4e0d\u8d85\u8fc710\u3002\n\n\u7b2c\u4e00\u6b21\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u53d1\u73b0 bus3 \u8fd0\u884c\u4e0d\u51fa\u6765\u3002\n\u7136\u540e\u6ce8\u610f\u5230 n \u6bd4\u8f83\u5927\uff0c\u56e0\u6b64\u9700\u8981\u5bf9\u6ca1\u6709\u4eba\u5230\u8fbe\u7684\u65f6\u5019\u7684\u53d1\u8f66\u60c5\u51b5\u505a\u526a\u679d\u3002\n\u5c31\u662f\u5f53\u6ca1\u6709\u4eba\u7b49\u8f66\u7684\u65f6\u5019\uff0c\u5c31\u4e0d\u505a\u53d1\u8f66\u5206\u652f\u7684\u63a2\u6d4b\u4e86\uff0c\u53ea\u505a\u5f53\u65f6\u4e0d\u53d1\u8f66\uff0c\u7b49\u5230\u6709\u4e58\u5ba2\u4e86\u518d\u53d1\u8f66\u7684\u63a2\u6d4b\u3002\n\n\u5b9e\u9645\u8fd0\u884c\u53d1\u73b0\uff1a  \n// bus4 \u6570\u636e\u8fed\u4ee3\u4e86 15k \u6b21\u3002  \n// bus5 \u6570\u636e\u8fed\u4ee3\u4e86 770k \u6b21\u3002  \n// bus6 \u6570\u636e\u8fed\u4ee3\u4e86 317k \u6b21\u3002  \n\n## \u60c5\u51b5\u4e09\uff1an<=500 && m<=100 && 0<=t<=10^4\nDP\uff1f\u6216\u8005\u8bb0\u5fc6\u5316\u641c\u7d22\uff1f\u597d\u50cf\u90fd\u884c\uff0c\u5148\u8ba8\u8bba DP\u3002\n\n\u4f7f\u7528\u4e24\u7ef4\u6570\u7ec4\u3002\n\u7b2c\u4e00\u7ef4\u662f\u4ece 0 \u5f00\u59cb\u8bb0\u7684\u65f6\u95f4\u3002\n\u7b2c\u4e8c\u7ef4\u662f\u4ece\u5f53\u524d\u65f6\u523b\u5f00\u59cb\uff08\u5305\u62ec\u5f53\u524d\u65f6\u523b\uff09\u4e0b\u4e00\u73ed\u8f66\u4ece\u73b0\u5728\u8ba1\u7b97\u62d6\u540e\u51e0\u5206\u949f\u51fa\u53d1\u3002\nDP\u5f53\u4e2d\u8bb0\u5f55\u7684\u6570\u636e\uff0c\u662f\u8bb0\u5f55\u8fd9\u79cd\u60c5\u51b5\u4e0b\u7684\u603b\u7b49\u5f85\u65f6\u95f4\u3002\n\n\u52a8\u6001\u89c4\u5212\u9700\u8981\u6309\u7167\u65f6\u95f4\u9006\u5e8f\u8ba1\u7b97\uff0c\u4ece tmax \u5f00\u59cb\u5411\u524d\u4e00\u76f4\u63a8\u5230 0 \u65f6\u523b\u3002\n\n\u5728 DP \u6570\u7ec4\u8bbe\u8ba1\u7684\u65f6\u5019\uff0c\u6709\u4e00\u4e2a\u8981\u6ce8\u610f\u7684\u5730\u65b9\u3002\n\u5c31\u662f\u4ece\u4e00\u6b21\u53d1\u8f66\uff0c\u5230\u4e0b\u6b21\u53d1\u8f66\uff0c\u6700\u957f\u7684\u95f4\u9694\u65f6\u95f4\u4e3a 2*m-1\u3002\n\u7406\u7531\u662f\uff1a\u5f53\u524d\u65f6\u95f4\u53d1\u8f66\u4e4b\u540e m \u5206\u949f\u56de\u5230\u53d1\u8f66\u5730\u70b9\u3002\n\u8fd9\u65f6\u5019\u4e0d\u4e00\u5b9a\u9a6c\u4e0a\u53d1\u8f66\u3002\n\u6709\u53ef\u80fd\u4e0b\u9762\u51e0\u5206\u949f\u5f53\u4e2d\u6709\u5ba2\u4eba\u5230\u8fbe\uff0c\u90a3\u65f6\u5019\u53d1\u8f66\u603b\u7b49\u5f85\u65f6\u95f4\u66f4\u77ed\u3002\n\u6bd4\u5982\u4e0b\u9762\u7684\u60c5\u51b5\uff1a\n\nm=2\n\n\u65f6\u95f4 | \u5230\u8fbe\u4eba\u6570\n  ---|---\n   1 | 3\n   2 | 1\n   3 | 0\n   4 | 3\n   5 | 0\n   6 | 0\n\u5728\u65f6\u95f4\u70b9 1 \u53d1\u8f66\uff0c\u65f6\u95f4\u70b9 3 \u56de\u6765\u3002\u8fd9\u65f6\u5019\u6709\u4e00\u4e2a\u4eba\u7b49\u5f85\u3002  \n\u5728\u65f6\u95f4\u70b9 3 \u9a6c\u4e0a\u53d1\u8f66\u4e0d\u662f\u597d\u65b9\u6cd5\uff0c\u5e94\u8be5\u7b49\u5230\u65f6\u95f4\u70b9 4 \u66f4\u5408\u9002\u3002  \n\u4e3a\u4ec0\u4e48\u8981\u8bb0\u5230 2m \u5462\uff1f  \n\u662f\u56e0\u4e3a\u8ba1\u7b97 dp[t] \u7684\u65f6\u5019\uff0c\u6700\u597d\u53ea\u4f9d\u8d56 dp[t+1]\u3002\n\u5982\u679c\u53ea\u4f9d\u8d56dp[t+1]\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u6eda\u52a8\u6570\u7ec4\u505a\u5b58\u50a8\u3002\n\u3010\u8fd9\u4e2a\u662f\u540e\u8bdd\uff0c\u5e94\u8be5\u53ea\u6709\u6700\u540e\u4e00\u7ec4\u6570\u636e\u9700\u8981\u538b\u7f29\u5b58\u50a8\u7a7a\u95f4\u3002\u3011\n\n\u72b6\u6001\u8f6c\u79fb\u516c\u5f0f\u662f\uff1a  \n-  \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u65f6\u523b\u7684\u5f53\u65f6\u53d1\u8f66 [t][0]\uff0c\u662f\u4ece dp[t+1][m-1] ~ dp[t+1][2*m-1] \u4e4b\u4e2d\u53d6\u6700\u5c0f\u503c\u3002\u610f\u601d\u662f\uff0c\u5982\u679c\u73b0\u5728\u53d1\u8f66\uff0c\u5e76\u4e14\u8fd9\u6b21\u53d1\u8f66\u56de\u6765\u4e4b\u540e\u6700\u591a\u62d6 m \u65f6\u95f4\u53d1\u8f66\u7684\u72b6\u6001\u4e2d\uff0c\u7b49\u5f85\u65f6\u95f4\u6700\u5c11\u7684\u90a3\u4e2a\u3002\n-  \u5bf9\u4e8e\u62d6\u540e\u53d1\u8f66\uff08j=1~m-1\uff09 dp[t][j] = dp[t+1][j-1] + \u5f53\u524d\u65f6\u523b\u5230\u8fbe\u4eba\u6570 * j\u3002\u65e2\u7136\u62d6\u4e86\u8fd9\u4e48\u957f\u65f6\u95f4\u53d1\u8f66\uff0c\u90a3\u5f53\u524d\u65f6\u523b\u5230\u8fbe\u7684\u4e58\u5ba2\u5c31\u8981\u7b49 j \u5206\u949f\u3002\n\n## \u60c5\u51b5\u56db\uff1an<=500 && m<=10 && 0<=t<=4*10^6\n\u5f53 t \u53d6\u503c\u8303\u56f4\u975e\u5e38\u5927\u7684\u65f6\u5019\uff0c\u4eba\u5230\u8fbe\u7684\u65f6\u95f4\u5c31\u975e\u5e38\u7a00\u8584\u4e86\u3002  \n\u6bd4\u5982\u8fd9\u4e2a\u53d6\u503c\uff0c\u5982\u679c\u6bcf\u4e2a\u4eba\u5230\u8fbe\u7684\u65f6\u95f4\u95f4\u9694\u6bd4\u8f83\u8fdc\uff0c\u4e5f\u5c31\u662f\u6bcf\u4e2a\u4eba\u90fd\u4e13\u8f66\u9001\uff0c\u53ea\u6d89\u53ca\u5230\u4e0d\u8d85\u8fc7 5000 \u5206\u949f\u3002\n\u6bd4\u8d77 400\u4e07 \u7684\u603b t \u65f6\u95f4\u90fd\u662f\u5f88\u7a00\u5c11\u7684\u3002  \n\u4e5f\u5c31\u662f\u8bf4\uff0c\u65f6\u95f4\u8f74\u4e0a\u6709\u5927\u91cf\u7684\u8d85\u8fc7 2m \u7684\u65f6\u95f4\u70b9\u662f\u5b8c\u5168\u6ca1\u6709\u4e58\u5ba2\u5230\u8fbe\u7684\u3002\n\n\u4e3a\u4ec0\u4e48\u8981\u8ba8\u8bba \u201c\u8d85\u8fc72m\u201d \u7684\u65f6\u95f4\uff1f\u662f\u56e0\u4e3a\u53d1\u8f66\u4e4b\u540e\u56de\u6765\u9700\u8981 m \u65f6\u95f4\u3002\n\u5982\u679c\u4e0b\u4e00\u6279\u4e58\u5ba2\u5728\u63a5\u4e0b\u6765\u7684 m \u65f6\u95f4\u5185\u5230\u8fbe\uff0c\u5c31\u6709\u53ef\u80fd\u9700\u8981\u7b49\u3002\n\u4f46\u662f\u5982\u679c\u4e0b\u4e00\u6279\u4e58\u5ba2\u5230\u8fbe\u7684\u65f6\u95f4\u8d85\u8fc7 m\uff0c\u90a3\u5c31\u4e0d\u59a8\u5148\u53d1\u4e00\u73ed\u8f66\u3002\n\n\u6240\u4ee5\uff0c\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u65b0\u7684\u5230\u8fbe\u65f6\u95f4\u5e8f\u5217\uff0c\u628a\u51e1\u662f\u4e24\u4e2a\u4e58\u5ba2\u5230\u8fbe\u65f6\u95f4\u8d85\u8fc7 2m \u7684\u60c5\u51b5\u76f4\u63a5\u538b\u7f29\u5230 2m \u65f6\u95f4\u3002\n\u8fd9\u6837\u5bf9\u65b0\u5e8f\u5217\u7684\u8ba1\u7b97\u7ed3\u679c\u4e0e\u539f\u6765\u7684\u65f6\u95f4\u5e8f\u5217\u5f97\u5230\u7684\u7ed3\u679c\u76f8\u540c\u3002\n\u8003\u8651\u5230 n<=500, m<=10\uff0c\u90a3\u65b0\u5e8f\u5217\u7684\u65f6\u95f4\u8f74\u5c31\u4e0d\u8d85\u8fc7 10^4\uff0c\u4e0e\u60c5\u51b5\u4e09\u76f8\u540c\u3002\n\n## \u60c5\u51b5\u4e94\uff1an<=500 && m<=100 && 0<=t<=4*10^6\n#### DP\n\u5982\u679c\u7528\u60c5\u51b5\u56db\u7684\u65b9\u6cd5\uff0c\u7136\u540e DP \u4f7f\u7528\u6eda\u52a8\u6570\u7ec4\u5b58\u50a8\u6570\u636e\uff0c\u81f3\u5c11\u5728 memory \u4e0a\u662f\u591f\u7684\u3002\n\n#### \u8bb0\u5fc6\u5316\u641c\u7d22\n\u8fd9\u9053\u9898\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u5bf9\u65f6\u95f4\u548c\u7a7a\u95f4\u7684\u9700\u6c42\u66f4\u5c0f\u3002\n\n\u5f15\u7406\uff1a\u53ea\u6709\u4e24\u4e2a\u65f6\u95f4\u70b9\u6709\u53d1\u8f66\u7684\u5fc5\u8981\uff1a\u4e00\u4e2a\u662f\u6709\u4e58\u5ba2\u5230\u8fbe\u7b49\u8f66\u5730\u70b9\u7684\u65f6\u95f4\u70b9\uff1b\u53e6\u4e00\u4e2a\u662f\u8f66\u9001\u5b8c\u4e0a\u4e00\u6ce2\u4e58\u5ba2\u56de\u5230\u53d1\u8f66\u70b9\u7684\u65f6\u5019\u3002\u5176\u4ed6\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u53d1\u8f66\u3002\n\n\u5982\u679c\u6211\u4eec\u505a\u4e00\u4e2a\u4e8c\u7ef4\u7684\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u641c\u7d22\u51fd\u6570\u5b9a\u4e49\u4e3a\uff1a  \n\n`int dfs_memory(int tm, int cs)`  \n\u5176\u4e2d tm \u662f\u65f6\u95f4\uff0ccs \u662f\u8be5\u65f6\u95f4\u70b9\u7b49\u5f85\u7684\u4e58\u5ba2\u3002\n\n\u610f\u601d\u662f\uff1a\u4ea4\u7ed9 search \u51fd\u6570\u4e00\u4e2a\u4efb\u52a1\uff0c\n\u5728 tm \u65f6\u95f4\u70b9\u6709 cs \u4e2a\u4e58\u5ba2\u5728\u7b49\u8f66\uff08\u51fd\u6570\u4e0d\u7528\u7ba1\u8fd9\u4e9b\u7b49\u8f66\u7684\u4e58\u5ba2\u662f\u521a\u597d\u5728 tm \u5230\u8fbe\u7684\u8fd8\u662f\u5df2\u7ecf\u7b49\u4e86\u4e00\u6bb5\u65f6\u95f4\u7684\uff09\uff0c\n\u8981\u6c42\u51fd\u6570\u8ba1\u7b97\u51fa\u8fd9\u79cd\u6761\u4ef6\u4e0b\u5b8c\u6210\u6240\u6709\u8fd0\u9001\u4efb\u52a1\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4\u3002\n\n# \u7f16\u7a0b\u4e2d\u53d1\u751f\u8fc7\u7684\u6f0f\u6d1e\n-  \u5728 DFS \u7684\u65f6\u5019\uff0c\u8ba8\u8bba\u5f53\u65f6\u53d1\u8f66\u7684\u5206\u652f\u3002  \n   \u5982\u679c\u8fd9\u65f6\u5019\u6ca1\u6709\u4eba\u7b49\u5f85\uff0c\u5219\u6839\u672c\u4e0d\u9700\u8981\u5f53\u65f6\u53d1\u8f66\uff0c\u8fd9\u4e00\u652f\u8981\u526a\u6389\u3002\n   \u5426\u5219\u641c\u7d22\u7684\u6df1\u5ea6\u592a\u6df1\uff0c\u5f88\u591a\u5b8c\u5168\u6ca1\u6709\u4eba\u5230\u8fbe\u7684\u65f6\u95f4\u70b9\u4e5f\u88ab\u641c\u7d22\u3002\n-  DP \u7b97\u6cd5\u5f53\u4e2d\uff0c\u7b2c\u4e8c\u7ef4\u6df1\u5ea6\u53d6 2m \u662f\u91cd\u70b9\u3002  \n   \u7b2c\u4e00\u7248\u4ee3\u7801\u5c31\u662f\u53ea\u53d6\u4e86 m\uff0c\u8fd9\u6837 t[i][0]=t[i+1][m-1]\uff0c\u770b\u8d77\u6765\u5f88\u5bf9\u3002  \n   \u4f46\u662f\u8fd9\u6837\u5c31\u56fa\u5b9a\u4e86\u9001\u4eba\u7684\u8f66\u56de\u6765\u4e4b\u540e\u5fc5\u987b\u9a6c\u4e0a\u53d1\u8f66\u3002\n   \u5b9e\u9645\u4e0a\u4e3a\u4e86\u7b49\u540e\u9762\u6709\u53ef\u80fd\u5230\u7684\u4e58\u5ba2\uff0c\u53ef\u4ee5\u6700\u591a\u62d6 m \u65f6\u95f4\u53d1\u8f66\u3002\n-  type4 \u8003\u8651\u8fc7\u4e24\u79cd\u7b97\u6cd5\u3002\u5176\u4e2d\u4e00\u79cd\u662f\u628a\u6570\u636e\u5206\u8282\u8ba1\u7b97\u3002\n   \u540e\u6765\u53d1\u73b0\u76f4\u63a5\u505a\u538b\u7f29\u72b6\u6001\u66f4\u597d\u3002\n-  \u8bb0\u5fc6\u5316\u641c\u7d22\u9700\u8981\u7528\u5230 map \u7684\u7279\u6027\u3002\n   \u6700\u91cd\u8981\u7684\u7279\u6027\u662f map \u5f53\u4e2d\u7684 key \u662f\u5df2\u7ecf\u6392\u5e8f\u597d\u7684\u3002\n   \u53e6\u5916\uff0clower_bound \u548c upper_bound \u7684\u7279\u6027\u5f97\u719f\u6089\u3002\n\n# \u4ee3\u7801\n\n```c++\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<iomanip>\n#include<map>\n\nusing namespace std;\n\nint n,m;        // \u7b49\u8f66\u4eba\u6570\uff0c\u5f80\u8fd4\u65f6\u95f4\u3002\nint tim[10005]; // \u6bcf\u4e2a\u65f6\u95f4\u70b9\u5230\u8fbe\u7684\u7b49\u8f66\u4eba\u6570\nint mt=0;       // \u5230\u8fbe\u65f6\u95f4\u7684\u6700\u5927\u503c\nmap<int,int> mtime;     // \u7528 map \u5b58\u50a8\u7684\u5230\u8fbe\u65f6\u95f4\u548c\u4eba\u6570\u7684\u5bf9\u5e94\u5173\u7cfb\u8868\n\n/**\ntim \u548c mtime \u7684\u5173\u7cfb\uff1a\n\u5f53\u5230\u8fbe\u65f6\u95f4\u5c11\u4e8e 10000 \u7684\u65f6\u5019\uff0c\u8f93\u5165\u6570\u636e\u76f4\u63a5\u8fdb tim\u3002\n\u5f53\u5230\u8fbe\u65f6\u95f4\u8d85\u8fc7 10000 \u7684\u65f6\u5019\uff0c\u5148\u8f93\u5165 mtime\uff0c\u7136\u540e\u8f6c\u5316\u5230 tim\u3002\n*/\n\n// \u666e\u901a DFS \u6d4b\u8bd5\uff1a\n// bus3 \u6570\u636e\u6d4b\u8bd5\uff0c\u8fed\u4ee3\u4e86 47k \u6b21\u3002\n// bus4 \u6570\u636e\u8fed\u4ee3\u4e86 15k \u6b21\u3002\n// bus5 \u6570\u636e\u8fed\u4ee3\u4e86 770k \u6b21\u3002\n// bus6 \u6570\u636e\u8fed\u4ee3\u4e86 317k \u6b21\u3002\nint dfs_normal(int tm, int cs)\n// tm:\u53ef\u4ee5\u53d1\u8f66\u7684\u6700\u65e9\u65f6\u95f4\uff1bcs: tm \u65f6\u95f4\u70b9\u7684\u7b49\u5f85\u4eba\u6570\n{\n    if(tm > mt) {\n        return 0;\n    }\n    int i;\n    // \u6d4b\u8bd5\u5982\u679c\u5f53\u65f6\u53d1\u8f66\u7684\u60c5\u51b5\u3002\n    // \u6ce8\u610f\uff0c\u7531\u4e8e n \u4f1a\u5230 100\uff0c\u6240\u4ee5\u5982\u679c\u6ca1\u4eba\u7b49\u8f66\u4e5f\u505a\u5f53\u65f6\u53d1\u8f66\u7684\u6d4b\u8bd5\uff0c\u9012\u5f52\u4f1a\u975e\u5e38\u6df1\u3002\n    // \u6240\u4ee5\u5fc5\u987b\u505a\u5f53\u65f6\u53d1\u8f66\u7684\u526a\u679d\uff0c\u5c31\u662f\u5982\u679c\u6ca1\u4eba\u7b49\u7740\uff0c\u5c31\u4e0d\u505a\u5f53\u65f6\u53d1\u8f66\u7684\u6d4b\u8bd5\u3002\n    int fache = 2000000000;\n    if(cs > 0) {\n        int waitman = 0;\n        int waitime = 0;\n        for(i=tm+1; i<=tm+m; i++) {\n            waitman += tim[i];\n            waitime += tim[i] * (tm+m-i);\n        }\n        fache = waitime + dfs_normal(tm+m, waitman);\n    }\n    int bufache = 2000000000;\n    for(i=tm+1; i<=mt; i++) {\n        if(tim[i] > 0) {\n            break;\n        }\n    }\n    if(i<=mt) {\n        bufache = cs * (i-tm) + dfs_normal(i, cs + tim[i]);\n    }\n    return min(fache, bufache);\n}\n\nint type2()\n{\n    int cost;\n    cost = dfs_normal(0,tim[0]);\n    return cost;\n}\n\nint dpdata[10005][205];\n// dp \u5b58\u50a8\u533a\u57df\uff0c\u7b2c\u4e00\u7ef4\u662f\u65f6\u95f4\uff0c\u7b2c\u4e8c\u7ef4\u662f\u4ece\u6b64\u523b\u8d77\u62d6\u5ef6\u51e0\u5206\u949f\u53d1\u8f66\u3002\nint type3()\n{\n    int retval = 2000000000;\n    for(int i=mt; i>=0; i--) {\n        for(int j=0; j<2*m; j++)\n        {\n            if(j==0) {\n                int minm=2000000000;\n                for(int k=m-1; k<2*m; k++) {\n                    minm=min(minm,dpdata[i+1][k]);\n\t\t\t\t}\n                dpdata[i][j]=minm;\n            } else {\n                dpdata[i][j] = dpdata[i+1][j-1] + j*tim[i];\n            }\n            if(i==0) {\n                retval = min(retval, dpdata[i][j]);\n            }\n        }\n    }\n    return retval;\n}\n\nint type4()\n{\n    map<int, int>::iterator iter;\n    int left = 0;\n    int ithis = 0;\n\t// \u6ce8\u610f\uff0ctype4 \u76f8\u5f53\u4e8e\u91cd\u6784\u4e00\u4e2a\u4e0e\u539f\u59cb\u6570\u636e\u7ed3\u679c\u76f8\u540c\u7684\u6570\u636e\u96c6\u3002\u6240\u4ee5\uff0cmt\u8981\u590d\u4f4d\u91cd\u65b0\u7b97\u3002\n    mt=0;\n    for(iter=mtime.begin(); iter!=mtime.end(); iter++) {\n        if(left == 0) {\n            ithis = 0;\n            tim[ithis] = iter->second;\n            left = iter->first;\n        }\n\t\t// \u5982\u679c\u4e24\u4e2a\u76f8\u90bb\u5230\u8fbe\u7684\u4e58\u5ba2\u5230\u8fbe\u65f6\u95f4\u7684\u95f4\u9694\u8d85\u8fc7 2*m\uff0c\u5219\u538b\u7f29\u5230 2*m\u3002\n        if( iter->first - left > 2*m ) {\n            ithis += 2*m;\n            tim[ithis] = iter->second;\n            left = iter->first;\n        } else {\n            ithis += iter->first - left;\n            tim[ithis] = iter->second;\n            left = iter->first;\n        }\n        mt=max(mt, ithis);\n    }\n\t// \u91cd\u6784 tim \u6570\u7ec4\u4e4b\u540e\uff0c\u8c03\u7528 type3 \u6c42\u89e3\u3002\n    return type3();\n}\n\n// \u8fd9\u4e2a\u51fd\u6570\uff0c\u662f\u8ba1\u7b97\u8bb0\u5fc6\u5316\u641c\u7d22\u7684 map \u7684 key\u3002\ninline int getindex(int tm, int cs)\n{\n    return tm*500+cs;\n}\n// \u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u5b58\u50a8 map\u3002\u5176\u4e2d key \u662f\u7528\u5230\u8fbe\u65f6\u95f4\u548c\u7b49\u5f85\u4eba\u6570\u7ec4\u5408\u800c\u6210\u7684\u3002\nmap<int, int> dfsdata;\n\nint dfs_memory(int tm, int cs)\n{\n\t// \u8bb0\u5fc6\u5316\u641c\u7d22\u662f\u76f4\u63a5\u7528 map \u7684\u539f\u59cb\u6570\u636e\uff0cmt \u662f\u6700\u5927\u65f6\u95f4\u3002\n    if(tm > mt) {\n        return 0;\n    }\n    map<int,int>::iterator itera;\n    itera = dfsdata.find(getindex(tm,cs));\n    if(itera != dfsdata.end()) {\n        // \u627e\u5230\u5386\u53f2\u6570\u636e\n        return itera->second;\n    }\n\n    // \u6d4b\u8bd5\u5982\u679c\u5f53\u65f6\u53d1\u8f66\u7684\u60c5\u51b5\u3002\n    int fache = 2000000000;\n    if(cs > 0) {\n        int waitman = 0;\n        int waitime = 0;\n        map<int,int>::iterator iterb;\n\t\t// upper_bound \u662f\u627e\u5927\u4e8e tm \u7684\u6700\u5c0f\u503c\u3002\n        for(iterb = mtime.upper_bound(tm); iterb != mtime.upper_bound(tm+m); iterb++) {\n            waitman += iterb->second;\n            waitime += iterb->second * (tm + m - iterb->first);\n        }\n        fache = waitime + dfs_memory(tm+m, waitman);\n    }\n    int bufache = 2000000000;\n    map<int,int>::iterator iterc;\n    iterc = mtime.upper_bound(tm);\n    if(iterc != mtime.end()) {\n        bufache = cs * (iterc->first - tm) + dfs_memory(iterc->first, cs + iterc->second);\n    }\n    fache = min(fache, bufache);\n    dfsdata[getindex(tm,cs)] = fache;\n    return fache;\n}\n\nint type5()\n{\n    return dfs_memory(0,0);\n}\n\n\nint main()\n{\n//\tfreopen(\"bus.in\",\"r\",stdin);\n//\tfreopen(\"bus.out\",\"w\",stdout);\n    int t;\n    cin>>n>>m;\n    if(m==1) {\n        cout<<0<<endl;\n        return 0;\n    }\n    if(m==2 && n<=20) {\n        for(int i=0; i<n; i++)\n        {\n            cin>>t;\n            tim[t]++;\n            mt=max(mt,t);\n        }\n        cout<<type2()<<endl;\n        return 0;\n    }\n    for(int i=0; i<n; i++) {\n        cin>>t;\n        mtime[t]++;\n        mt=max(mt,t);\n    }\n    if(mt<=10000) { // type3\n        map<int, int>::iterator iter;\n        for(iter=mtime.begin(); iter!=mtime.end(); iter++) {\n            tim[iter->first] = iter->second;\n        }\n        cout<<type3()<<endl;\n        return 0;\n    }\n    if(m<=10) {     // type4\n        cout<<type4()<<endl;\n        return 0;\n    }\n    cout<<type5()<<endl;\n    return 0;\n}\n```",
        "postTime": 1542264541,
        "uid": 110577,
        "name": "sujingmeng",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "     \n\u3010\u524d\u8a00\u3011\n  \n   \u8fd9\u9898\u6211\u5728\u590d\u8d5b\u8003\u573a\u4e0a\u82b1\u4e86\u5f88\u4e45\u7684\u65f6\u95f4\u2026\u2026\n \n   \u4f46\u662f\u6e23\u6e23\u5e76\u6ca1\u6709\u51fa\u6765\n\n   \u6211\u53c2\u8003\u522b\u7684\u5927\u4f6c\u53d1\u7684\u89e3\u6790\uff0c\u6574\u7406\u4e86\u4e00\u4efd\u5206\u6bb5\u5f97\u5206\u7684\u9898\u89e3\n\n\u301010\u5206\u3011\n\t    \n   \u8fd9\u4e2a\u6bb5\u5e94\u8be5\u6700\u597d\u7406\u89e3\u4e86\n   \n   \u76f8\u5f53\u4e8e\u6446\u6e21\u8f66\u6bcf\u4e2a\u65f6\u95f4\u6bb5\u90fd\u8f7d\u8d70\u5f53\u524d\u7684\u5b66\u751f\n   \n  \u56e0\u4e3a\u4e0b\u4e00\u4e2a\u65f6\u95f4\u6bb5\u548c\u6446\u6e21\u65f6\u95f4\u662f\u4e00\u6837\u7684\n  \n   \u6bcf\u6b21\u8f93\u51fa0\uff0c\u6ca1\u6709\u4eba\u5728\u7b49\n\n\u301030\u5206\u66b4\u641c\u3011\n\n  \u4f20\u8bf4\u4e0d\u662f\u8bf4\u4f1a\u4e86\u66b4\u641c\u666e\u53ca\u95ee\u9898\u5c31\u4e0d\u5927\u4e86\u5417\n  \u6211\u4eec~~\u6b63\u5f0f~~\u5f00\u59cb\u5206\u6790\u8fd9\u4e2a\u95ee\u9898\n  \n  \u9996\u5148\uff0c\u95ee\u9898\u6bcf\u6b21\u51fa\u73b0\u5206\u6b67\u7684\u65f6\u5019\u662f\u5728\n  \n \u201c\u7b49\u8fd9\u6ce2\u4eba\u201d\n  \u548c\n \u201c\u4e0d\u7b49\u8fd9\u6ce2\u4eba\u201d\n       \n  \u90a3\u66b4\u641c\u7684\u76ee\u7684\u5c31\u662f\u901a\u8fc7\u8fd9\u4e2a\u90e8\u5206\u6765\u8fdb\u884c\u679a\u4e3e\u6bcf\u4e00\u79cd\u53ef\u80fd\n        \n   **\u7b2c\u4e00\u70b9\uff0c\u9996\u5148\u65f6\u95f4\u8981\u6392\u5e8f\uff0c\u8fd9\u6837\u624d\u53ef\u80fd\u5224\u65ad\u7b49\u4eba**\n        \n  \u8fd9\u4e00\u70b9\u5e94\u8be5\u4e0d\u96be\u60f3\u5230\uff0c\u6216\u8005\u8bf4\u662f\u5fc5\u987b\u60f3\u5230\n        \n   **\u7b2c\u4e8c\u70b9\uff0c\u6bcf\u5c42\u5728\u679a\u4e3e\u4ec0\u4e48**\n        \n   \u65e0\u975e\u5c31\u662f\u679a\u4e3e\u4eba\u6570\u6216\u662f\u65f6\u95f4\u4f46\u56e0\u4e3a\u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\uff0c\u8fd9\u4e24\u4e2a\u56e0\u7d20\u5bf9\u95ee\u9898\u90fd\u4f1a\u4ea7\u751f\u5f71\u54cd\n   \n  \u6240\u4ee5\u6bcf\u5c42\u4e24\u4e2a\u90fd\u5e26\n        \n **\u7b2c\u4e09\u70b9\uff0c\u56de\u6eaf\u7684\u6761\u4ef6**\n        \n\u79bb\u5f00\u7684\u4eba\u8fbe\u5230\u4e86\u603b\u4eba\u6570\n        \n**\u7b2c\u56db\u70b9\uff0c\u5728\u54ea\u91cc\u4ea7\u751f\u5206\u6b67\uff0c\u5373\u66b4\u641c\u8d77\u5230\u4f5c\u7528**\n        \n\u53ef\u4ee5\u770b\u51fa\uff0c\u552f\u4e00\u4ea7\u751f\u5206\u6b67\u7684\uff0c\u5c31\u662f\u8981\u4e0d\u8981\u7b49\u8fd9\u4e2a\u4eba\n        \n\u6240\u4ee5\uff0c\u6211\u4eec\u6bcf\u5c42\u65f6\u95f4\u90fd\u5728\u679a\u4e3e\u5728\u8fd9\u4e2a\u65f6\u95f4\u70b9\u7b49\u4e0b\u4e00\u6ce2\u4eba\u548c\u76f4\u63a5\u8d70\u7684\u65f6\u95f4\uff0c\u90a3\u4e2a\u66f4\u5c0f\n        \n **\u7b2c\u4e94\u70b9\uff0c\u4e00\u4e9b\u7ec6\u8282**\n        \n  1.\u5c0f\u4e8e\u7b49\u4e8e\u5f53\u524d\u65f6\u95f4\u70b9\u7684\u4eba\u90fd\u8981\u4e0a\u8f66\uff0c\u8fdb\u884c\u8ba1\u7b97\n  \n2.\u8ba1\u7b97\u65f6\u95f4\n \n 3.\u5f53\u524d\u65f6\u95f4\u6ca1\u4eba\u5c31\u8df3\u5230\u4e0b\u4e00\u4e2a\u6709\u4eba\u7684\u65f6\u95f4\u70b9\n        \n        \n        \n        \n```cpp\n#include <cstdio>\n#include <algorithm>\n#include <iostream>\nusing namespace std;\nint n,m,t[510];\nint dfs(int i,int st)//i\u4ee3\u8868\u7b2ci\u4e2a\u4eba\uff0cst\u4ee3\u8868\u5f53\u524d\u65f6\u95f4 \n{\n    if(i==n+1)return 0;//\u6240\u6709\u4eba\u90fd\u4e0a\u8f66\u4e86 \n    if(st<t[i])return dfs(i,t[i]);//\u5982\u679c\u73b0\u5728\u7684\u65f6\u95f4\u6ca1\u6709\u4eba\uff0c\u5c31\u5230\u4e0b\u4e00\u4e2a\u4eba\u7684\u5230\u8fbe\u65f6\u95f4 \n    int sum=0,j=i;\n    while(j<=n&&t[j]<=st)//\u5f00\u8f66\u4e4b\u524d\u7684\u4eba\u90fd\u4e0a\u8f66 \n        sum+=t[j++];\n    int best=st*(j-i)-sum+dfs(j,st+m);//\u8ba1\u7b97\u7b49\u5f85\u65f6\u95f4 \n    for(;j<=n;j++)\n    {\n        sum+=t[j];\n        best=min(t[j]*(j-i+1)-sum+dfs(j+1,t[j]+m),best);\n        //\u5982\u679c\u4e0d\u5f00\u8f66\uff0c\u7b49\u5f85\u7b2cj\u4e2a\u4eba\u7684\u8bdd\u65f6\u95f4\u4f1a\u4e0d\u4f1a\u66f4\u4f18 \n    }\n    return best;\n} \nint main()\n{\n    cin>>n>>m;\n    for(int i=1;i<=n;i++)\n        cin>>t[i];\n    sort(t+1,t+n+1);//\u663e\u7136\u4ece\u5c0f\u5230\u5927\u6309\u7167\u65f6\u95f4\u6392\u5e8f\u66f4\u597d\u7b97 \n    printf(\"%d\\n\",dfs(1,0));\n    return 0;\n}\n```\n\u301030\u5206DP\u3011\n\n\u6211\u4eec\u518d\u4eceDP\u7684\u65b9\u5f0f\u6765\u5206\u6790\u8fd9\u4e2a\u95ee\u9898\n\n\u56e0\u4e3a\u6bcf\u4e00\u6b21\u7684\u53d8\u91cf\u5728\u4e8e**\u4eba\u6570\u548c\u5f53\u524d\u65f6\u95f4**\uff08\u4e5f\u5c31\u5173\u7cfb\u5230\u4e0a\u8f66\uff09\n\n\u6211\u4eec\u8bbedp[i][j]\u8868\u793a\u7b2ci\u4e2a\u4eba\u5728\u7b2cj\u5206\u949f\u4e0a\u8f66\u65f6\u603b\u7b49\u5f85\u65f6\u95f4\u7684\u6700\u5c0f\u503c\n\n\u6211\u4eec\u6bcf\u6b21\u5206\u6790\u7684\u76ee\u7684\u662f\u8981\u4e0d\u8981\u4e0a\u8f66\uff0c\u5176\u5b9e\u4e5f\u5c31**\u5173\u7cfb\u5230\u4e4b\u524d\u7684\u4eba**\n\n\u4e5f\u5c31\u662f\u5224\u65ad\u5728i\u4e4b\u524d\u7684\u4eba\u5982\u679c\u548ci\u4e00\u8d77\u4e0aj\u65f6\u95f4\u7684\u8f66\u4f1a\u4e0d\u4f1a\u66f4\u4f18\n\n\u90a3\u4e48dp[i][j]\u5c31\u662f\u75281\u5230i-1\u6765\u63a8\u5bfc\n\n**dp[i][j]=min(dp[k][l]+time(k+1,i,j))**\n\n{1<i<=n,t[i]<=j<=maxt+m,0<=k<i,t[k]<=l<=j-m}\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define inf 0x7ffffff/2\n#define eps 1e-6\n#define N 110\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nint n,m;\nint dp[N][N],t[N],maxt;\nint ans=inf;\ninline int cost(int l,int r,int x)//\u8ba1\u7b97cost \n{\n    int sum=0;\n    for(register int i=l;i<=r;i++)sum+=(x-t[i]);\n    return sum;\n}\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(register int i=1;i<=n;i++)scanf(\"%d\",&t[i]);\n    //\u8f93\u5165\n    sort(t+1,t+n+1);//\u5bf9\u6bcf\u4e2a\u4eba\u5230\u8fbe\u7684\u65f6\u95f4\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\n    maxt=t[n];//\u6700\u540e\u4e00\u4e2a\u4eba\u5230\u8fbe\u7684\u65f6\u95f4\n    for(register int i=t[1];i<=maxt+m;i++)dp[1][i]=i-t[1];\n    for(register int i=2;i<=n;i++)//dp\n    {\n        for(register int j=t[i];j<=maxt+m;j++)\n        //\u8fd9\u91cc\u662fmaxt+t,\u4e0d\u662fmaxt,\u5f88\u91cd\u8981\n        {\n            dp[i][j]=inf;//\u521d\u59cb\u5316\n            for(register int k=0;k<i;k++)\n            {\n                for(register int l=t[k];l<=j-m;l++)\n                {\n                    dp[i][j]=min(dp[i][j],dp[k][l]+cost(k+1,i,j));\n                    //\u52a8\u6001\u8f6c\u79fb\u65b9\u7a0b\n                }\n            }\n        }\n    }\n    for(register int i=maxt;i<=maxt+m;i++)ans=min(ans,dp[n][i]);\n    //\u7edf\u8ba1\u7b54\u6848\n    printf(\"%d\\n\",ans);//\u8f93\u51fa\n    return 0;\n}\n```\n\n\n\u301050\u5206DP\u8fdb\u9636\u3011\n\n\u60f3\u8981\u4f18\u5316\u4e00\u79cd\u4ee3\u7801\uff0c\u6211\u4eec\u5c31\u4ece\u4ee3\u7801\u4f18\u5316\u524d\u7684\u601d\u8def\u5165\u624b\n\n\u56e0\u4e3a\u6211\u4eec\u6bcf\u6b21\u7684dp\uff0c\u90fd\u662f\u5173\u6ce8\u4e8e\u8fd9\u8f86\u8f66\u4e0a\u8f7d\u4e86\u591a\u5c11\u4eba\u548c\u8d70\u4e86\u51e0\u6b21\u6765\u5f71\u54cd\u9012\u63a8\u548c\u7b54\u6848\uff0c\u4f46\u8f66\u4e0a\u8f7d\u591a\u5c11\u4eba\u548c\u7b54\u6848\u6709\u5927\u5173\u7cfb\u5417\n\n\u6ca1\u6709\n\n\u6240\u4ee5\u6211\u4eec\u4ece\u6bcf\u4e2a\u4eba\u5165\u624b\uff0c\u8f6c\u79fbdp\u8fc7\u7a0b\u7684\u4e2d\u5fc3\n\n\u6bcf\u4e2a\u4eba\u8981\u5173\u6ce8\u7684\u662f\u6211\u8981\u4e0a\u4e0a\u4e00\u4e2a\u4eba\u505a\u7684\u8f66\u5462\uff0c\u8fd8\u662f\u5750\u4e0b\u4e00\u73ed\u8f66\u5462\n\n**dp[i][j]=min(dp[i-1][j],dp[i-1][k])-t[i]+j**\n\n(2<=i<=n,t[i]<=j<=maxt+m,t[i-1]<=k<=j-m)\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#define inf 0x7fffffff/2\n#define eps 1e-6\n#define N 510\n#define M 10010\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\ninline ll read()\n{\n    char ch=getchar();\n    ll s=0,w=1;\n    while(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){s=s*10+ch-'0';ch=getchar();}\n    return s*w;\n}\nint f[N][M];\nint n,m;\nint t[N];\nint maxt;\nint main()\n{\n    n=read(),m=read();\n    for(register int i=1;i<=n;i++)t[i]=read();\n    sort(t+1,t+n+1);\n    memset(f,127,sizeof(f));//\u8fd9\u91cc\u5c31\u8981\u7ed9f\u7edf\u4e00\u8bbe\u4e0a\u6700\u5927\u503c\u4e86\uff0c\u907f\u514d\u6ca1\u6709\u5faa\u73af\u5230\u7684\u503c\u5f71\u54cd\u7ed3\u679c\n    maxt=t[n];\n    for(register int i=t[1];i<=maxt+m;i++)f[1][i]=i-t[1];\n    for(register int i=2;i<=n;i++)\n    {\n        for(register int j=t[i];j<=maxt+m;j++)f[i][j]=min(f[i][j],f[i-1][j]+j-t[i]);//\u4e0e\u4e0a\u4e00\u4e2a\u5750\u540c\u4e00\u8f86\u8f66\n        for(register int j=t[i];j<=maxt+m;j++)\n        {\n            for(register int k=t[i-1];k<=j-m;k++)\n            {\n                f[i][j]=min(f[i][j],f[i-1][k]+j-t[i]);//\u65b0\u5750\u4e00\u8f86\u8f66\n            }\n        }\n    }\n    int ans=inf;\n    for(register int j=n;j<=maxt+m;j++)ans=min(ans,f[n][j]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n\n\n\u3010100\u5206DP\u3011\n\n\u7ee7\u7eed\u4f18\u5316\u4e0a\u4e00\u6b21\u7684\u601d\u60f3\n\n\u4e0a\u4e00\u6b21\u601d\u60f3\u7f3a\u70b9\u5728\u54ea\u91cc\u5462\uff0c\u89c2\u5bdf\u5faa\u73af\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0cmaxt\u7279\u4e48\u592a\u5927\u4e86\uff0c\u548cn\uff0cm\u5dee\u4e86\u5f88\u591a\n\n\u6bd4\u65b9\u8bf4\uff0c\u4e0a\u4e00\u6ce2\u4eba\u660e\u660e\u5df2\u7ecf\u9001\u5b8c\u4e86\uff0c\u4f46\u53f8\u673a\u5e08\u5085\u6bcf\u4e2a\u70b9\u90fd\u8981\u6765\u5e2e\u4f60\u7b97\u4e00\u6b21\uff0c\u5c3d\u7ba1\u4e8b\u5b9e\u4e0a\u4e0b\u4e00\u6ce2\u4eba\u8fd8\u8981\u518d\u7b49\u51e0\u4e2a\u5c0f\u65f6\u751a\u81f3\u5927\u534a\u5929\u624d\u6765\uff0c\u662f\u4e0d\u662f\u5f88\u8017\u8d39\u65f6\u95f4\uff1f\n\n**\u6211\u4eec\u53ef\u4ee5\u8ba9\u4e0b\u4e00\u6ce2\u4eba\u201c\u65e9\u70b9\u201d\u6765**\n\n\u5177\u4f53\u65e9\u6765\u7684\u65f6\u95f4\uff0c\u4e3a2m-1\n\n>\u6211\u4eec\u5047\u8bbe\u5728m-1\u7684\u65f6\u523b\u6709inf\u4e2a\u4eba\u5750\u8f66\uff0cm\u7684\u65f6\u523b\u6709\u4e00\u4e2a\u4eba\u5750\u8f66\uff0c\u8fd9\u65f6\u5019\u7684\u6700\u4f18\u89e3\u5f53\u7136\u662f\u8ba9m-1\u4e2a\u4eba\u5148\u5750\u8f66\u8d70\uff0c\u8fd9\u6837\u7684\u8bdd\uff0c\u5728m\u65f6\u523b\u7684\u4eba\u57282m-1\u65f6\u523b\u624d\u80fd\u505a\u5230\u8f66\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u4eba\u5728\u7b2c3m\u65f6\u523b\u5750\u8f66\uff0c\u5c06\u4ed6\u7684\u65f6\u95f4\u6539\u4e3a2m\u7684\u8bdd\u5c31\u4f1a\u5f71\u54cd\u7ed3\u679c\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<algorithm>\n#define inf 0x7fffffff/2\n#define eps 1e-6\n#define N 510\n#define M 110\nusing namespace std;\ntypedef long long ll;\ntypedef unsigned long long ull;\nint f[2][N*M*10];\nint n,m;\nint t[N],minn[N*M*10];\nint maxt,subt/*\u8981\u51cf\u53bb\u7684\u503c*/;\nint flag;\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(register int i=1;i<=n;i++)scanf(\"%d%d\",&t[i]);\n    sort(t+1,t+n+1);\n    subt=t[1];\n    for(register int i=1;i<=n;i++){t[i]-=subt;if(t[i]-t[i-1]>2*m){subt+=(t[i]-t[i-1]-2*m);t[i]=t[i-1]+2*m;}}\n    maxt=t[n];\n    memset(minn,127,sizeof(minn));\n    for(register int i=0;i<=maxt+m;i++)f[0][i]=i,minn[i]=0;//t[1]=0\n    for(register int i=2;i<=n;i++)\n    {\n        for(register int j=0;j<=maxt+m;j++)f[1][j]=inf;\n        for(register int j=t[i];j<=maxt+m;j++)\n        {\n            f[1][j]=min(f[1][j],f[0][j]+j-t[i]);//\u548c\u4e0a\u4e00\u4e2a\u4eba\u5750\u540c\u4e00\u8f86\u8f66\n        }\n        for(register int j=max(t[i],m);j<=maxt+m;j++)\n        {\n            f[1][j]=min(f[1][j],minn[j-m]+j-t[i]);//\u65b0\u5750\u4e00\u8f86\u8f66\n        }\n        for(register int j=0;j<=maxt+m;j++)f[0][j]=f[1][j];//\u6eda\u52a8\u6570\u7ec4\n        for(register int j=0;j<=maxt+m;j++){if(!j)minn[j]=f[0][j];else minn[j]=min(minn[j-1],f[0][j]);}\n    }\n    int ans=inf;\n    for(register int j=0;j<=maxt+m;j++)ans=min(ans,f[0][j]);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```\n\n\u3010100\u5206\u8bb0\u5fc6\u5316\u641c\u7d22\u3011\n\n\u8fd9\u4e2a\u8bb0\u5fc6\u5316\u641c\u7d22\u5176\u5b9e\u5c31\u53ea\u6709\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u4e00\u4e2a\u4f18\u5316\uff0c\u522b\u7684\u601d\u60f3\u5b8c\u5168\u548c30\u5206\u7684\u6ca1\u6709\u53d8\uff08\u60f3\u4e0d\u5230\u5427\uff09\n\n\u6211\u4eec\u8bb0mem[i][t]\u4e3a\u7b2ci\u4e2a\u4ebat\u65f6\u7684\u6700\u4f18\u503c\uff0c\u6bcf\u6b21\u8bb0\u5fc6\u5c31\u53ef\u4ee5\u4e86\n\n```cpp\n\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <cmath>\n#include <cctype>\n\nusing namespace std;\n\nint read()\n{\n    int x=0,f=1;char ch=getchar();\n    while (!isdigit(ch)){if (ch=='-') f=-1;ch=getchar();}\n    while (isdigit(ch)){x=x*10+ch-48;ch=getchar();}\n    return x*f;\n}\n\nint n,m,t[505],mem[505][505];\n\n//\u56e0\u4e3a0<=st-t[i]<=m\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bb0\u5fc6\u5316\uff0c\u628a\u8fd9\u4e2a\u4f5c\u4e3a\u72b6\u6001\u7684\u7b2c\u4e8c\u7ef4 \n\nint solve(int i,int st)//\u8bb0\u5fc6\u5316\u641c\u7d22\u3002i\uff1a\u7b2ci\u4e2a\u4eba\uff0cst\uff1a\u5f00\u59cb\u65f6\u95f4st \n{\n    if (i==n+1)//\u6240\u6709\u4eba\u90fd\u4e0a\u8f66\u4e86 \n        return 0;\n    if (st<t[i])//\u5982\u679c\u73b0\u5728\u7684\u65f6\u95f4\u6ca1\u6709\u4eba\uff0c\u5c31\u5230\u4e0b\u4e00\u4e2a\u4eba\u7684\u5230\u8fbe\u65f6\u95f4 \n        return solve(i,t[i]);\n    if (mem[i][st-t[i]])//\u8bb0\u5fc6\u5316 \n        return mem[i][st-t[i]];\n    int sum=0,j=i;\n    //\u8f66\u7b49\u4eba \n    while (j<=n && t[j]<=st)\n        sum+=t[j++];\n    int best=st*(j-i)-sum+solve(j,st+m); \n    //\u4eba\u7b49\u8f66\n    for (;j<=n;j++)\n    {\n        sum+=t[j];\n        best=min(t[j]*(j-i+1)-sum+solve(j+1,t[j]+m),best);\n    }\n    return mem[i][st-t[i]]=best;\n}\n\nint main()\n{\n    //memset(mem,-1,sizeof(mem));\n    n=read(),m=read();\n    for (int i=1;i<=n;i++)\n        t[i]=read();\n    sort(t+1,t+n+1);//\u663e\u7136\u4ece\u5c0f\u5230\u5927\u6309\u7167\u65f6\u95f4\u6392\u5e8f\u66f4\u597d\u7b97 \n    cout << solve(1,0) << endl;\n    return 0;\n}\n```",
        "postTime": 1568177665,
        "uid": 39406,
        "name": "djww",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "# \u5199\u5728\u524d\u9762\uff1a\u9274\u4e8e\u6d1b\u8c37\u7684\u754c\u9762\u53ef\u4ee5\u4f1a\u6709\u672a\u77e5bug\uff0c\u6240\u4ee5\u7a33\u5b9a\u7684\u9605\u8bfb\u6548\u679c\uff0c\u8bf7\u70b9\u51fb[\u8fd9\u91cc](https://blog.csdn.net/kkkksc03/article/details/84798228),\u5982\u8981\u4efb\u4f55\u7591\u95ee\uff0c\u6b22\u8fce\u79c1\u4fe1\u4f5c\u8005\uff01\n\n# \u9898\u76ee\u94fe\u63a5\uff1ahttps://www.luogu.org/problemnew/show/P5017\nemm\uff0c\u8fd9\u6b21\u7684\u771f\u7684\u4e0d\u7b80\u5355\u7684\uff0cT3\u6bd4T4\u96be?\n\n\u9189\u4e86\u3002\u3002\u3002\n\n\u849f\u84bb\u80af\u5b9a\u6ca1\u6709\u5176\u4ed6\u5927\u4f6c\u8bb2\u7684\u597d\u554a\uff0c\u4f46\u80af\u5b9a\u5c3d\u529b\uff0c~~\u771f\u7684\u6572\u5f97\u5455\u5fc3\u6ca5\u8840\uff0c\u6c42\u8fc7~~ \u3002\u7eaa\u5ff5\u5199\u51fa\u7684\u4e00\u9053\u6bd4\u8f83\u7ecf\u5178\u7684\u7ebf\u6027\u52a8\u89c4\u3002\n\n\u5206\u6790\u9898\u610f\uff0c\u6211\uff08~~\u4ee5\u5f31\u8005\u7684\u89d2\u5ea6\u5148\u770b\u95ee\u9898\uff09~~ \u9996\u5148\u60f3\u5230\u7684\u662f\uff1a\u6392\u5e8f+\u8d2a\u5fc3\u3002\u672c\u4ee5\u4e3a\u4eca\u5929\u5982\u6b64\u7b80\u5355\uff0c\u7ed3\u679c\u53d1\u73b0\u662f\u81ea\u5df1\u592a\u5929\u771f\u4e86\u3002\u3002\u3002\u7136\u800c\u4e4b\u540e\u53d1\u73b0\uff1a\u5e76\u4e0d\u4e00\u5b9a\u8981\u4e00\u6b21\u63a5\u7740\u4e00\u6b21\u7684\u53d1\u8f66\uff0c\u6240\u4ee5\u8d2a\u5fc3\u7834\u4ea7\u3002\n\n\u4e4b\u540e\u5c31\u6709\u70b9\u6478\u4e0d\u7740\u5934\u8111\uff0c\u53bb\u6253\u4e86T4\uff0c\u51fa\u4e8e\u5ba3\u6cc4\u76f4\u63a5\u4e0a\u7206\u641c\uff0c\u60ca\u5947\u7684\u53d1\u73b0\u6837\u4f8b\u8fc7\u4e86\uff0c\u8d76\u5feb\u5f00\u5fc3\u7684\u56de\u6765\u518d\u770bT3.\n\n\u8fd9\u65f6\u5019\u5c31\u60f3\uff1a\u666e\u53ca\u6df1\u641c\uff0c\u6a21\u62df\uff0c\u7b7e\u5230\u90fd\u51fa\u4e86\uff0c\u8fd9\u9053\u9898\u591a\u534a\u5c31\u662f\u52a8\u89c4\u4e86\u5427\uff0c\u4e8e\u662f\uff0c\u626f\u4e86\u8fd9\u4e48\u4e00\u5927\u5806\u4e0b\u9762\u8fdb\u5165\u6b63\u9898\u3002\n# \u5206\u6790\uff1a\n\u601d\u8def\uff1a\u52a8\u89c4+\u524d\u7f00\u548c\uff08\u4f46\u636e\u67d0\u4e9b\u5927\u4f6c\u8bf4\u8fd8\u53ef\u4ee5\u7528\u659c\u7387\u4f18\u5316\uff1f\u5728\u8fd9\u91cc\u5f88\u62b1\u6b49\u6211\u592a\u5f31\u800c\u4e0d\u4f1a\uff09\u3002\n\n\u9996\u5148\u6211\u4eec\u76f4\u5207\u6838\u5fc3\u2014\u2014\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8bbe$f[i]$\u8868\u793ai\u65f6\u95f4\u524d\u6240\u6709\u4eba\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4\u3002\n\nPS:\u5728\u8fd9\u91cc\u5982\u679c\u4e0d\u597d\u786e\u5b9a\u65b9\u7a0b\u7684\u7ef4\u6570\u600e\u4e48\u529e\uff1f\u53ef\u4ee5\u7ed3\u5408\u6570\u636e\u8303\u56f4\u548c\u7a7a\u95f4\u9650\u5236\u6765\u8003\u8651\uff08\u591a\u534a\u662f\uff0c\u867d\u7136\u8fd9\u9898\u597d\u50cf\u4e5f\u53ef\u4ee5\u6709\u4e8c\u7ef4\u4e0et\u65e0\u5173\u7684\u6570\u7ec4\uff09\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e2a\u4eba\u7684\u65f6\u95f4\u90fd\u6807\u5728\u4e00\u6761\u65f6\u95f4\u8f74\u4e0a\u3002\u7136\u540e\u80fd\u66f4\u76f4\u89c2\u7684\u7406\u89e3\u3002\n\n![](https://i.loli.net/2018/11/13/5bead5ac2c9c8.png)\u8fd9\u91cc\u501f\u7528@sooke \u5927\u4f6c\u7684\u4e00\u5f20\u56fe\u3002\n\n\u6211\u4eec\u5047\u8bbe\u53d1\u8f66\u65f6\u95f4\u4e3a\u6bcf\u4e2a\u6765\u56de4min\uff0c\u5404\u4f4d\u7b49\u8f66\u7684\u540c\u5b66\u5982\u56fe\u4e2d\u84dd\u70b9\u6240\u793a\u3002\n\n\u7136\u540e\u6211\u4eec\u5047\u8bbe\u5f53\u524d\u8981\u6c42\u7684$f[i]$\u4e2d\u7684$i=11$\uff0c\u4e8e\u662f\u4e0b\u9762\u5f00\u59cb\u5206\u6790\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff1a\u5982\u679c\u4e4b\u524d\u7684\u90fd\u5df2\u7ecf\u7b97\u51fa\u7684\u8bdd\uff0c\u90a3\u4e48\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u53ef\u5982\u4e0b\u6240\u793a\uff1a\n\n##### $f[i]=min(f[i],f[j]+(cnt[i]-cnt[j])*i-(sum[i]-sum[j]));$\n\n\u5176\u4e2d$cnt[i]$\u4ee3\u8868\u7b2ci\u65f6\u95f4\u5230\u8fbe\u8f66\u7ad9\u7684\u540c\u5b66\u7684\u4eba\u6570\uff0c$sum[i]$\u4ee3\u8868\u7b2ci\u65f6\u95f4\u5230\u8fbe\u8f66\u7ad9\u7684\u540c\u5b66\u7684\u65f6\u95f4\u7684\u603b\u548c\u3002\n\n$j$\u5373\u4e3a\u4e0a\u4e00\u8f86\u8f66\u7684\u53d1\u8f66\u65f6\u95f4\u3002\n\n\u521a\u5f00\u59cb\u6211\u4eec\u5bf9\u4e8ej\u7684\u8303\u56f4\uff0c\u5e94\u8be5\u80fd\u60f3\u5230\u662f\uff1a\n\n##### $0<=j<=i-m$\n\n\u5f88\u660e\u663e\u7684( \u2299 o \u2299 )\uff01j\u7684\u53d6\u503c\u53ea\u8981\u5c0f\u4e8ei\u5e76\u4e14\u548ci\u76f8\u805a\u4e00\u4e2a\u5f80\u8fd4\u65f6\u95f4\u4e0d\u5c31\u884c\u4e86\u5417\uff1f\n\n\u7136\u540e\u7684\u7ed3\u679c\u662f\uff1a50\u5206\u3002\uff08\u5b98\u65b9\u6570\u636e\u4eb2\u6d4b\uff09\n\n\u4f46\u662fnoip\u90fd\u7ed3\u675f\u4e86\u5440\u540c\u5fd7\uff0c\u6211\u4eec\u4e0d\u80fd\u53ea\u5c40\u9650\u4e8e50\u5206\u5440\uff01\n\n**\u6240\u4ee5\u8fdb\u884c\u6539\u8fdb\uff1a**\n\n\u8fd9\u65f6\u5019\u6211\u4eec\u53c8\u60f3\uff1a\u53ef\u4e0d\u53ef\u4ee5\u5c06j\u7684\u8303\u56f4\u8fdb\u4e00\u6b65\u7f29\u5c0f\u5462\uff1f\n\n\u4f46\u5176\u5b9e\u662f~~\u80af\u5b9a~~\u53ef\u4ee5\u7684\u3002\u6211\u4eec\u53d1\u73b0j\u53ef\u4ee5\uff1a\n\n##### $i-2m+1<=j<=i-m$\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u56e0\u4e3a\u5982\u679c\u4e24\u8f66\u95f4\u7684\u76f8\u8ddd\u65f6\u95f4\u5927\u4e8e\u4e86\u4e00\u8d9f\u5f80\u8fd4\u7684\u65f6\u95f4\uff0c\u90a3\u4e48\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u5728\u4e24\u8005\u4e2d\u95f4\u7ee7\u7eed\u5206\u5272\uff0c\u5e76\u4e0d\u5f71\u54cd\u539f\u6765\u7684\u7b54\u6848\u3002\n\n\u8fd9\u4e2a\u65f6\u5019\u4e5f\u662f\u5927\u5927\u7684\u63d0\u5347\u4e86\u7a0b\u5e8f\u7684\u901f\u5ea6\uff0c\u7136\u800c\uff1a70\u5206\uff08\u5b98\u65b9\u6570\u636e\u4eb2\u6d4b\uff09\n\n\u6cea\u5954~\n\nand then \uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u8003\u8651\u6709\u6ca1\u6709\u4ec0\u4e48\u53ef\u4ee5\u526a\u53bb\u7684\u65e0\u7528\u72b6\u6001\u3002\n\n\u4ed4\u7ec6\u7814\u7a76\u53d1\u73b0\uff1a\u5f53\u4e24\u6b21\u53d1\u8f66\u4e4b\u95f4\u5982\u679c\u6ca1\u6709\u9700\u8981\u7b49\u5f85\u7684\u540c\u5b66\u7684\u8bdd\uff0c\u76f4\u63a5\u8df3\u8fc7\u5373\u53ef\u3002\n\n\u7ecf\u8fc7\u6539\u6b63\uff1a100\u5206\uff08\u5b98\u65b9\u4eb2\u6d4b\uff09\n\n\n\n\n\n# AC\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<cmath>\nusing namespace std;\nint a[501],cnt[4000005],sum[4000005],f[4000005];\nint main()\n{\n\tint n,m;\n\tscanf(\"%d%d\",&n,&m);\n\tint Time=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&a[i]);\n\t\tcnt[a[i]]++;\n\t\tsum[a[i]]+=a[i];\n\t\tTime=fmax(Time,a[i]);\n\t}\n\tfor(int i=1;i<Time+m;i++)\n\t{\n\t\tcnt[i]+=cnt[i-1];\n\t\tsum[i]+=sum[i-1];\n\t}\n\tfor(int i=0;i<Time+m;i++)\n\t{\n\t\tif (i>=m&&cnt[i-m]==cnt[i])\n\t\t{\n\t\t\t f[i]=f[i-m]; \n\t\t\t continue; \n\t\t} \n\t\tf[i]=cnt[i]*i-sum[i];\n\t\tint tmp;\n\t\ttmp=fmax(i-2*m+1,0); \n\t\tfor(int j=tmp;j<=i-m;j++)\n\t\t{\n\t\t\tf[i]=fmin(f[i],f[j]+(cnt[i]-cnt[j])*i-(sum[i]-sum[j]));\n\t\t}\n\t}\n\tint ans=2147483647;\n\tfor(int i=Time;i<Time+m;i++)\n\t{\n\t\tans=fmin(ans,f[i]);\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n\u5b8c\u7ed3\u6492\u82b1~\n```\n\n",
        "postTime": 1543928731,
        "uid": 45475,
        "name": "ShineEternal",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u8fd9\u9898\u6ca1\u6709\u60f3\u8c61\u5f97\u90a3\u4e48\u96be\u3002\n\n\u9996\u5148\u4e00\u770b\u8fd9\u9898\u5c31\u77e5\u9053\uff0c\u9700\u8981\u79bb\u6563\u5316\uff0c$dp$\u8f6c\u79fb\u4e00\u5b9a\u662f\u9650\u5b9a\u4e86\u8303\u56f4\u7684\uff0c\u6bd4\u5982\u8f6c\u79fb\u53ea\u7528\u4ece\u524d$m$\u4e2a\u8f6c\u79fb\u800c\u6ca1\u5fc5\u8981\u4ece\u7b2c\u4e00\u4e2a\u5f00\u59cb\u8f6c\u79fb\u3002\n\n\u6211\u4eec\u5148\u5199\u8f6c\u79fb\u65b9\u7a0b\u5427\uff0c$dp[i]$\u8868\u793a\u5728$i$\u8fd9\u4e2a\u65f6\u95f4\u70b9\u53d1\u8f66\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4\u3002\n\n\u6211\u4eec\u9996\u5148\u5047\u8bbe$sum[i]-sum[j]$\u8868\u793a\u4ece$j$\u65f6\u523b\u53d1\u8f66\u540e\uff0c\u5230$i$\u65f6\u523b\u8fd9\u6bb5\u65f6\u95f4\u6765\u4e58\u8f66\u7684\u540c\u5b66\u7684\u7b49\u5f85\u65f6\u95f4\u3002\uff08\u524d\u7f00\u548c\u601d\u60f3\uff09\n\n\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u8f6c\u79fb:$dp[i]=dp[j]+sum[i]-sum[j]$,\u800c\u4e14\u524d\u63d0\u662f$i-m \\ge j$\uff08\u4fdd\u8bc1\u6211\u53d1\u8f66\u65f6\u8f66\u56de\u6765\u4e86\uff09\u3002\n\n\u800c\u4e14\u6709\u4e2a\u8d2a\u5fc3\u7684\u60f3\u6cd5\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4e0a\u4e00\u6b21\u53d1\u8f66\u65f6\u95f4\u662f\u9650\u5b9a\u5728\u4e86\u4e00\u4e2a\u957f\u5ea6\u4e3a$m$\u7684\u65f6\u95f4\u6bb5\u7684\uff01\n\n\u6211\u4eec\u5047\u8bbe$k$\u662f\u4e0a\u4e00\u6b21\u53d1\u8f66\u540e\u8f66\u8fd4\u56de\u8fd9\u91cc\u7684\u65f6\u95f4\u70b9\uff0c\u90a3\u4e48$j=k-m$\uff0c\u5982\u679c$k \\le i-m$\u4f1a\u600e\u4e48\u6837\uff1f\u6211\u53ef\u4ee5\u5728$k$\u65f6\u523b\u53d1\u4e00\u8d9f\u8f66\u554a\uff0c\u5e76\u4e14\u8fd9\u8d9f\u8f66\u4e00\u5b9a\u4f1a\u5728$i$\u65f6\u523b\u524d\u8d76\u56de\u6765\u7684\uff01\u5728$k$\u65f6\u523b\u53d1\u8f66\u4e00\u5b9a\u6bd4\u7b49\u5230$i$\u65f6\u523b\u53d1\u8f66\u66f4\u4f18\u79c0\uff01\n\n\u6240\u4ee5$k$\u4e00\u5b9a\u662f$i-m \\lt k \\le i$\u7684\u3002\u90a3\u4e48$j$\u4e5f\u4e00\u5b9a\u662f$i-2m \\lt j\\le i-m$\u7684\u3002\n\n\u4f46\u662f\u8fd9\u6837\u8ba1\u7b97\uff0c\u6700\u5927\u7684\u590d\u6742\u5ea6\u4e5f\u8fbe\u5230\u4e86$4\\times 10^8$\uff0c\u90a3\u4e48\u600e\u4e48\u4f18\u5316\u5462\uff1f\u5f88\u5bb9\u6613\u53d1\u73b0\uff0c\u4e24\u70b9\u95f4\u8ddd\u79bb\u4e00\u65e6\u5927\u4e8e$2m$\u4e86\uff0c\u4e24\u70b9\u95f4\u7684\u53d1\u8f66\u65f6\u95f4\u5b8c\u5168\u4e0d\u53d7\u5bf9\u65b9\u5f71\u54cd\uff01\u6211\u4eec\u53ef\u4ee5\u5427\u8fd9\u4e2a\u5927\u4e8e$2m$\u7684\u8ddd\u79bb\u7f29\u5c0f\u4e3a$2m$\uff0c\u4e0d\u4f1a\u5f71\u54cd\u7b54\u6848\uff01\u8fd9\u4e00\u6b65\u5c31\u662f\u5f88\u5173\u952e\u7684\u79bb\u6563\u5316\u64cd\u4f5c\u3002\n\n\u597d\u4e86\uff0c\u590d\u6742\u5ea6\u4f18\u5316\u5230\u4e86$10^7$\uff0c\u4f46\u662f\u4e0a\u6587\u63d0\u5230\u7684$sum[i]-sum[j]$\u600e\u4e48\u6c42\u5462\uff1f\n\n\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u9700\u8981\u4e24\u4e2a\u6570\u7ec4$t$\u3001$sum$\uff0c$t[i]$\u8868\u793a\u201c\u4ece0\u79d2\u5f00\u59cb\u5230\u7b2c$i$\u79d2\u4e58\u5ba2\u4e00\u5171\u7b49\u5f85\u7684\u65f6\u95f4\u201d\uff0c$sum[i]$\u8868\u793a\u201c\u4ece0\u79d2\u5f00\u59cb\u5230\u73b0\u5728\u4e00\u5171\u6709\u591a\u5c11\u4f4d\u540c\u5b66\u5230\u4e86\u8f66\u7ad9\u3002\u201d\n\n\u90a3\u4e48$j-->i$\u7684\u603b\u7b49\u5f85\u65f6\u95f4\u662f\uff1a$t[i]-t[j]-sum[j]\\times (i-j)$\n\n\u81ea\u5df1\u601d\u8003\u4e00\u4e0b\u770b\u770b\u5bf9\u4e0d\u5bf9\u3002\n\n\u603b\u7684\u4ee3\u7801\u5728\u4e0b\u9762\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n,m;\n\nlong long t[100005];\nlong long sum[100005];\nlong long dp[100005];\n\nint cut;\nint a[505];\nint maxn=0;\n\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1; i<=n; i++)\n    {\n        scanf(\"%d\",&a[i]);\n        a[i]+=m;\n    }\n    sort(a+1,a+1+n);\n    for(int i=0; i<n; i++)\n    {\n        int lins=0;\n        if(a[i+1]-a[i]>2*m)\n            lins=a[i+1]-a[i]-2*m;\n        a[i]-=cut;\n        cut+=lins;\n        maxn=max(maxn,a[i]);\n    }\n    a[n]-=cut;\n    maxn=max(maxn,a[n]);\n\n    for(int i=1; i<=n; i++)\n        sum[a[i]]++;\n\n    for(int i=1; i<=maxn+m; i++)\n    {\n        sum[i]=sum[i-1]+sum[i];\n        t[i]=t[i-1]+sum[i-1];\n    }\n\n    memset(dp,0x3f,sizeof(dp));\n\n    for(int i=0; i<m; i++)\n        dp[i]=t[i];\n\n    for(int i=m; i<=maxn+m; i++)\n    {\n        for(int j=i-m+1; j<=i; j++)\n        {\n            int last=j-m;\n            if(last>=0)\n                dp[i]=min(dp[last]+t[i]-t[last]-sum[last]*(i-last),dp[i]);\n        }\n    }\n\n    long long ans=1e18;\n\n    for(int i=maxn; i<=maxn+m; i++)\n        ans=min(ans,dp[i]);\n    printf(\"%lld\\n\",ans);\n\n    return 0;\n}\n\n```",
        "postTime": 1548058964,
        "uid": 34663,
        "name": "redegg",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u6b64\u9898\u4e3a\u4e00\u4e2a\u4e0d\u662f\u90a3\u4e48\u7b80\u5355\u7684DP\uff0c\u8bbe\u72b6\u6001f[i]\u8868\u793a\u5c06\u5230\u8fbe\u65f6\u95f4\u5c0f\u4e8e\u7b49\u4e8ei\u7684\u4eba\u5168\u90e8\u8fd0\u8d70\u6240\u9700\u8981\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4\uff0c\u7136\u540e\u8f6c\u79fb\u3002\n\u5f53i\u65f6\u523b\u6ca1\u6709\u4eba\u5230\u8fbe\uff0cf[i]=min(f[i],f[i-1])\uff0c\u8fd9\u610f\u601d\u662fi\u65f6\u523b\u4e0d\u53d1\u8f66\u4e0e\u53d1\u8f66\u53d6\u6700\u5c0f\u503c\uff0c\u5982\u679c\u6709\u4eba\u5230\u8fbe\uff0c\u5c31\u5fc5\u987b\u53d1\u8f66\uff0c\u5426\u5219\u5c31i\u65f6\u523b\u7684\u4eba\u5c31\u8fd0\u4e0d\u8d70\u4e86\u3002\nf[i]=min(f[i],f[j]+w(j+1,i))\uff0cw(j+1,i)\u8868\u793a\u5230\u8fbe\u65f6\u523b\u5728[j+1,i]\u4e4b\u95f4\u7684\u4eba\u7b49\u5f85i\u65f6\u523b\u7684\u8f66\uff0c\u603b\u7b49\u5f85\u65f6\u95f4\u662f\u591a\u5c11\n\n\u8fd9\u6837\u8f6c\u79fb\u9700\u679a\u4e3ei\uff0cj\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(max(t[i])^2)\uff0c\u94c1\u5b9a\u8d85\u65f6\n\n\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u5982\u679c\u8fde\u77402m\u591a\u4e2a\u65f6\u523b\u90fd\u6ca1\u6709\u4eba\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u538b\u6210\u524d\u540e\u4e24\u4eba\u5c31\u662f\u76f8\u5dee2m\u4e2a\u65f6\u523b\u5230\uff0c\u56e0\u4e3a\u4e2d\u95f4\u7684\u4efb\u4f55\u53d1\u8f66\u90fd\u6ca1\u6709\u610f\u4e49\uff0c\u65f6\u95f4\u53ef\u4ee5\u964d\u4e3aO(n^2m^2)\n\n\u53e6\u5916\uff0c\u5982\u679c\u679a\u4e3ej\u65f6\uff0ci-j>2m\uff0c\u90a3\u4e48i\u4e0ej\u4e2d\u95f4\u80af\u5b9a\u53ef\u4ee5\u591a\u52a0\u4e00\u6b21\u53d1\u8f66\u53c8\u4e0d\u5f71\u54cd\u5168\u7a0b\uff0c\u80af\u5b9a\u6bd4\u539f\u6765\u66f4\u4f18\uff0c\u6240\u4ee5\uff0cj\u53ea\u9700\u8981\u5728i-2m~i-m\u4e2d\u679a\u4e3e\u4fbf\u53ef\uff0c\u6700\u7ec8\u65f6\u95f4\u590d\u6742\u5ea6O(nm^2)\n\n\u4ee3\u7801\uff1a\n```\n#include<stdio.h>\n#include<string.h>\n#include<algorithm>\n#include<stdlib.h>\n#include<math.h>\n#include<iostream>\nusing namespace std;\nint i,n,t,m,j,f[4000505],p[4000505],s,ans,u,mx,l,ts;\nint main()\n{\n    freopen(\"bus.in\",\"r\",stdin);\n    freopen(\"bus.out\",\"w\",stdout);\n    scanf(\"%d %d\",&n,&m);\n    for(i=1;i<=n;i++)\n    {\n        scanf(\"%d\",&t);\n        mx=max(mx,t);\n        p[t]++;\n    }\n    for(i=0;i<=mx+m;i++)\n    {\n        if(p[i]==0)\n            u++;\n        else\n            u=0;\n        if(u>2*m)\n        {\n            while(p[i]==0&&i<=mx+m)\n            {\n                f[i]=f[i-1];\n                i++;\n            }\n            u=0;\n        }\n        ans+=s;\n        if(i>=m)\n        {\n            s-=p[i-m];\n            ans-=p[i-m]*m;\n        }\n        if(p[i]==0&&i!=0)\n            f[i]=f[i-1];\n        else\n            f[i]=1<<30;\n        if(i<m)\n            f[i]=min(f[i],ans);\n        else\n        {\n            ts=ans;\n            for(j=i-m;j>=i-2*m&&j>=0;j--)\n            {\n                f[i]=min(f[i],ts+f[j]);\n                ts+=p[j]*(i-j);\n            }\n        }\n        s+=p[i];\n    }\n    cout<<f[mx+m];\n}\n```",
        "postTime": 1542983333,
        "uid": 26800,
        "name": "Sshenyyyu",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u5e94\u8be5\u4e0d\u96be\u60f3\u5230\u8fd9\u662f\u4e00\u9053dp  \n\u56e0\u4e3a\u6b64\u65f6\u7684\u72b6\u6001\u53ef\u7531\u5176\u4e4b\u540e\u7684\u72b6\u6001\u6240\u51b3\u5b9a   \n## %\u4f7f\u7528\u4e8c\u7ef4dp\u7684\u4eba\uff0c\u6211\u53ea\u4f1a\u4e09\u7ef4\n\u5148\u5c06\u5728\u540c\u4e00\u65f6\u95f4\u5230\u7684\u4eba\u5b58\u5728\u4e00\u8d77\u5206\u522b\u4e3a\uff1a  \n$t_i$(\u5230\u7684\u65f6\u95f4\uff09\u3001$r_i$(\u5230\u4e86\u591a\u5c11\u4eba\uff09  \n\u5b9a\u4e49$f[i][j][k]$\u4e3a\u7b2c$i$\u6b21\u4eba\u6765\u4e3a\u5f00\u59cb\uff0c\u73b0\u6709$j$\u4e2a\u4eba\u7b49\u5f85\n\uff08\u5305\u62ec\u521a\u6765\u7684\u4eba\uff09\uff0c\u8f66\u8fd8\u8981$k$\u79d2\u624d\u80fd\u6765\uff08$ 1\u2264i,j\u2264n $ \uff0c$0\u2264k<m$)  \n#### \u8f6c\u6362\u65b9\u7a0b\uff1a \n```\nif(k<t[i+1]-t[i])\t//\u8f66\u5728\u4e0b\u4e00\u6b21\u4eba\u6765\u4e4b\u524d\u5230\u8fbe\n{\n\tint a=j*k+f[i+1][r[i+1]][k+m-(t[i+1]-t[i])];\t\n    //\u8f66\u6765\u5c31\u8d70\n    int b=j*(t[i+1]-t[i])+f[i+1][r[i+1]+j][0];\t\n    //\u7b49\u4e0b\u4e00\u6b21\u4eba\u6765\u518d\u8d70\n    f[i][j][k]=min(a,b);//\u53d6min\n}\nelse //\u5230\u4e0b\u4e00\u6b21\u624d\u5230\uff08\u5df2\u5728\u4e0a\u4e00\u6b21\u6c42\u51fa\uff09\n\tf[i][j][k]=j*(t[i+1]-t[i])+f[i+1][r[i+1]+j][k-(t[i+1]-t[i])]; \n    //\u9012\u63a8\n```  \n#### \u8fb9\u754c\uff1a  \n```\nf[n][i][j]=i*j;\n```\n\u6240\u4ee5\u4ece$n$\u5f00\u59cb\u5012\u7740\u641c\u5373\u53ef   \n$O(n^2m)$  \n#### code:\n```\n#include<cctype>\n#include<cfloat>\n#include<climits>\n#include<cmath>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<ctime>\n#include<algorithm>\n#include<bitset>\n#include<deque>\n#include<iostream>\n#include<iterator>\n#include<limits>\n#include<list>\n#include<map>\n#include<new>\n#include<queue>\n#include<set>\n#include<stack>\n#include<string>\n#include<vector>\nusing namespace std;\nint rd()\n{\n    int x=0;char ch;do{ch=getchar();}while(ch>'9'||ch<'0');\n    for(;ch>='0'&&ch<='9';ch=getchar())x=x*10+ch-'0';\n    return x;\n}\nint n,m,t[505],r[505];\nlong long f[505][505][105];\nstruct tt{\n    int r,x;\n}a[505];\nint main()\n{\n//\tfreopen(\"bus.in\",\"r\",stdin);\n//\tfreopen(\"bus.out\",\"w\",stdout);\n    n=rd();m=rd();\n    for(int i=1;i<=n;i++)\n        t[i]=rd();\n    if(m==1)\n    {\n        cout<<0<<endl;\n        return 0;\n    }\n    sort(t+1,t+n+1);\n    int tot=0;\n    for(int i=1;i<=n;i++)\n    {\n        if(t[i]!=t[i-1] || i==1)\n        {\n            a[++tot].x=t[i];\n            a[tot].r=0;\n        }\n        a[tot].r++;\n    }\n    int flag=1;\n    for(int i=2;i<=tot;i++)\n        if(a[i].x-a[i-1].x<m)\n            flag=0;\n    if(flag)\n    {\n        cout<<0<<endl;\n        return 0;\n    }\n    for(int i=1;i<=n;i++)\n        for(int j=0;j<m;j++)\n            f[tot][i][j]=i*j;\n    for(int i=1;i<=tot;i++)\n    {\n        t[i]=a[i].x;\n        r[i]=a[i].r;\n    }\n    n=tot;\n    for(int i=n-1;i>0;i--)\n    {\n        int p=0;\n        for(int j=i;j>0;j--)\n        {\n            p+=r[j];\n            for(int k=0;k<min(t[i+1]-t[i],m);k++)\n            {\n                int ti=max(0,k+m+t[i]-t[i+1]);\n                f[i][p][k]=p*k+f[i+1][r[i+1]][ti];\n                long long o=f[i+1][r[i+1]+p][0]+p*(t[i+1]-t[i]);\n                f[i][p][k]=min(f[i][p][k],o);\n            }\n            for(int k=t[i+1]-t[i];k<m;k++)\n                f[i][p][k]=f[i+1][r[i+1]+p][k-t[i+1]+t[i]]+p*(t[i+1]-t[i]);\n        }\n    }\n    cout<<f[1][r[1]][0]<<endl;\n    return 0;\n}\n```",
        "postTime": 1542774069,
        "uid": 103990,
        "name": "asd_a",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u5ba3\u4f20\u535a\u5ba2->[link](https://blog.csdn.net/BWzhuzehao/article/details/108141420)\n\nupdate 2021/1/19\uff1a\n\n1. \u539f\u9898\u89e3\u90e8\u5206 Markdown \u548c Latex \u70b8\u4e86\uff0c\u73b0\u5728\u5df2\u7ecf\u4fee\u590d\u3002\n2. \u5bf9\u9898\u89e3\u5f53\u4e2d\u4e00\u4e9b\u8868\u8ff0\u4e0d\u660e\u7684\u53e5\u5b50\u505a\u4e86\u8fdb\u4e00\u6b65\u7684\u9610\u8ff0\u3002\n3. \u66f4\u6362\u4e86\u7801\u98ce\u3002\n\n---\n\n\u9996\u5148\uff0c\u770b\u5230\u8fd9\u9053\u9898\u5728\u666e\u53ca\u7ec4 T3 \u7684\u4f4d\u7f6e\uff0c\u6211\u4eec\u77e5\u9053\u53ea\u80fd\u662f \u641c\u7d22/\u56fe\u8bba/DP \u4e09\u8005\u4e4b\u4e00\u3002\n\n\u518d\u7ed3\u5408\u6570\u636e\u8303\u56f4\u6211\u4eec\u5c31\u53ef\u4ee5 ~~\u6839\u636e\u4e2a\u4eba\u7ecf\u9a8c~~ \u5206\u6790\u51fa\u8fd9\u9053\u9898\u662f DP \u9898\u3002\n\n\u4f46\u6216\u8bb8\u662f\u6211\u592a\u5f31\u4e86\uff0c\u6ca1\u6709\u60f3\u51fa DP \u600e\u4e48\u5199\uff0c\u6700\u540e\u7528\u4e86\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\n\n\u5728\u5199\u8bb0\u5fc6\u5316\u641c\u7d22\u65f6\uff0c\u6211\u7684\u65b9\u6cd5\u662f\uff1a **\u5148\u5199\u7206\u641c\uff0c\u901a\u8fc7\u5c0f\u6837\u4f8b\u4e4b\u540e\u518d\u52a0\u8bb0\u5fc6\u5316\u3002**\n\n\u5bf9\u4e8e\u672c\u9898\u800c\u8a00\uff0c\u6211\u6700\u5f00\u59cb\u60f3\u5230\u7684\u662f\u4ece\u7b2c $n$ \u4e2a\u4eba\u5012\u56de\u53bb\u5904\u7406\uff0c\u8bbe\u4ed6\u5728\u7b2c $x$ \u5206\u949f\u79bb\u5f00\uff08 $t_i \\leq x$\uff09\uff0c\u8fdb\u884c\u641c\u7d22\u3002 $dfs(k,g)$ \u8868\u793a\u7b2c $k$ \u4e2a\u4eba\u5728\u65f6\u95f4\u70b9 $g$ \u4e4b\u540e\u79bb\u5f00\uff0c\u679a\u4e3e\u7b2c $k-1$ \u79bb\u5f00\u65f6\u95f4\u70b9\u540e\u5224\u65ad\u4e0a\u4e00\u4e2a\u4eba\u662f\u5426\u4f1a\u4e0e\u8fd9\u4e2a\u4eba\u540c\u8f66\u3002\n\n\u4f46\u662f\u8fd9\u6837\u663e\u7136\u65f6\u95f4\u590d\u6742\u5ea6\u4e0e $O(nt)$ \u6709\u5173\uff0c\u59a5\u59a5\u7684 TLE\u3002\n\n\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u6709\u4e24\u6761\u8def\uff1a\u5f80 $O(nm)$ \u8d70\u6216\u8005\u5f80 $O(t)$ \u8d70\u3002\n\n\u63a5\u4e0b\u6765\uff0c\u6211\u5206\u6790\u4e86\u9898\u76ee\uff0c\u53d1\u73b0 **\u6bcf\u4e00\u4e2a\u4eba\u81f3\u591a\u7b49\u5f85 $2 \\times m$ \u5206\u949f** \uff0c\u56e0\u4e3a\u5bf9\u4e8e\u7b2c $i$ \u4e2a\u4eba\uff0c\u5982\u679c $x-t_i > 2m$ \uff0c\u8868\u660e\u6b64\u65f6\u4ed6\u5728\u7684\u65f6\u5019\u8f66\u5b50\u5df2\u7ecf\u5f00\u8fc7\u4e00\u904d\u4e86\uff0c\u800c\u4ed6\u5374\u8fd8\u662f\u5446\u5728\u539f\u5730\uff0c\u663e\u7136\u4e0d\u662f\u6700\u4f18\u7684\u9009\u62e9\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u53bb\u679a\u4e3e $x$ \uff0c\u53ea\u9700\u8981\u679a\u4e3e\u4e00\u4e2a\u6570 $k$ \uff08 $0 \\leq k \\leq 2m$ \uff0c\u5373\u4e3a\u7b49\u8f66\u65f6\u95f4\uff09\uff0c\u5219\u7b2c $i$ \u4e2a\u4eba\u53d1\u8f66\u65f6\u95f4\u4e3a $t_i+k$ \u3002\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u56e0\u4e3a $t$ \u7684\u8303\u56f4\u800c\u5f15\u8d77\u7684\u8d85\u65f6\uff0c\u65b9\u5411\u4e3a $O(nm)$\u3002\n\n\u90a3\u4e48\u63a5\u4e0b\u6765\u5982\u4f55\u5224\u65ad\u7b2c $i-1$ \u4e2a\u4eba\u4e0e\u7b2c $i$ \u4e2a\u4eba\u662f\u5426\u540c\u8f66\u5462\uff1f\n\n\u540c\u6837\uff0c\u6211\u4eec\u679a\u4e3e $k'$ \uff0c\u8868\u793a\u7b2c $i-1$ \u4e2a\u4eba\u7684\u7b49\u8f66\u65f6\u95f4\u3002\n\n- \u5982\u679c $t_{i-1}+k'=t_i+k$ \uff0c\u8868\u660e\u6b64\u65f6\u4e24\u4e2a\u4eba\u53d1\u8f66\u65f6\u95f4\u76f8\u540c\uff0c\u90a3\u4e48\u4e00\u8d77\u8d70\u3002\n- \u5982\u679c $t_{i-1}+k'+m \\leq t_i+k$ \uff0c\u8868\u660e\u6b64\u65f6\u7b2c $i-1$ \u4e2a\u4eba\u5750\u8f66\u5230\u8fbe\uff0c\u8f66\u5b50\u56de\u5230\u4eba\u5927\u9644\u4e2d\u4e4b\u540e\u7b2c $i$ \u4e2a\u4eba\u8fd8\u6ca1\u6709\u53d1\u8f66\uff0c\u90a3\u4e48\u7b2c $i-1$ \u4e2a\u4eba\u76f4\u63a5\u53d1\u8f66\u79bb\u5f00\u3002\n- \u5982\u679c $t_{i-1}+k'+m > t_i+k$ \uff0c\u8868\u660e\u7b2c $i-1$ \u4e2a\u4eba\u53d1\u8f66\u8d70\u540e\u7b2c $i$ \u4e2a\u4eba\u8fd8\u8981\u518d\u7b49\uff0c\u4f46\u662f\u8fd9\u79cd\u60c5\u51b5\u6309\u7167\u4e0a\u9762\u6240\u8ff0\u663e\u7136\u4e0d\u4f18\uff1a\n\t+ \u5982\u679c\u7b2c $i-1$ \u4e2a\u4eba\u8d70\u4e86\u4e4b\u540e\u7b2c $i$ \u4e2a\u4eba\u90fd\u8fd8\u6ca1\u6709\u5230\uff0c\u90a3\u4e48\u6211\u4eec\u5b8c\u5168\u4e0d\u9700\u8981\u53bb\u7406\u7b2c $i$ \u4e2a\u4eba\uff0c\u90a3\u4e48\u76f4\u63a5\u53d1\u8f66\u8d70\u4eba\uff0c\u800c\u4e14\u6b64\u65f6\u80af\u5b9a\u662f\u8d8a\u65e9\u8d70\u8d8a\u597d\uff0c\u90a3\u4e48\u6211\u4eec\u5728\u679a\u4e3e $k'$ \u7684\u65f6\u5019\u5df2\u7ecf\u89e3\u51b3\u4e86\u3002\n\t+ \u5426\u5219\uff0c\u8bf4\u660e\u7b2c $i-1$ \u4e2a\u4eba\u8ddf\u7b2c $i$ \u4e2a\u4eba\u5728\u4e00\u8d77\u7b49\u8f66\uff0c\u4f46\u662f\u7b2c $i-1$ \u4e2a\u4eba\u8d70\u4e86\u7b2c $i$ \u4e2a\u4eba\u8fd8\u5446\u5728\u90a3\u91cc\uff0c\u4e4b\u524d\u5df2\u7ecf\u89e3\u91ca\u8fc7\u80af\u5b9a\u4e0d\u662f\u6700\u4f18\u89e3\uff0c\u90a3\u4e48\u4e5f\u4e0d\u9700\u8981\u53bb\u7ba1\u3002\n\n\u5206\u6790\u5b8c\u6bd5\uff0c\u6b64\u65f6 $dfs(k,g)$ \u8868\u793a\u7b2c $k$ \u4e2a\u4eba\u5728 **\u7b2c $t_k+g$ \u7684\u65f6\u95f4\u53d1\u8f66\uff08\u800c\u4e0d\u662f\u7b2c $g$ \u65f6\u95f4\u70b9\u53d1\u8f66\uff09** \u65f6\u7684\u6700\u5c0f\u503c\u3002\u51fd\u6570\u4e2d\uff0c\u6211\u4eec\u679a\u4e3e $i$ \uff08$0 \\leq i < 2m$\uff09\uff0c\u8fdb\u884c\u4e0a\u8ff0\u5224\u65ad\uff0c\u5982\u679c\u6ee1\u8db3\u4efb\u610f\u6761\u4ef6\uff0c\u66f4\u65b0\u7b54\u6848\u3002\n\n\u66f4\u65b0\u7b54\u6848\u65f6\uff0c\u6211\u7684\u65b9\u5f0f\u662f\u51fd\u6570\u4e2d\u4ee4 $sum= INF$ \uff0c\u6ee1\u8db3\u4efb\u4e00\u6761\u4ef6\u65f6\uff0c $sum \\gets min(sum,dfs(k-1,i)+g)$\uff08 $dfs(k-1,i)+g$ \u8868\u793a\u7b2c $k-1$ \u4e2a\u4eba\u5728 $t_{k-1}+g$ \u65f6\u53d1\u8f66\u65f6\u7b49\u5f85\u65f6\u95f4\u6700\u5c0f\u503c\uff0c\u52a0\u4e0a\u7b2c $k$ \u4e2a\u4eba\u7b49\u5f85\u65f6\u95f4 $g$ \uff09\uff0c\u6700\u540e\u8fd4\u56de $sum$ \u5373\u53ef\u3002\n\n\u4e0d\u8981\u5fd8\u8bb0\u5bf9 $t$ \u6392\u5e8f\uff01\n\n\u66b4\u529b\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int MAXN = 500 + 10;\nint n, m, t[MAXN], f[MAXN][MAXN], ans;//f[i][j] \u8868\u793a\u7b2c i \u4e2a\u4eba\u5728\u7b49\u4e86 j \u65f6\u95f4\u540e\u53d1\u8f66\u7684\u6700\u4f18\u89e3\n\nint read()\n{\n\tint sum = 0, fh = 1; char ch = getchar();\n\twhile (ch < '0' || ch > '9') {if (ch == '-') fh = -1; ch = getchar();}\n\twhile (ch >= '0' && ch <= '9') {sum = (sum << 3) + (sum << 1) + (ch ^ 48); ch = getchar();}\n\treturn sum * fh;\n}\nint Min(int a, int b) {return (a < b) ? a : b;}\n\nint dfs(int k, int g)\n{\n\tif (k == 1) return g;\n\tint ans = 0x7f7f7f7f;\n\tfor (int i = 0; i < (m << 1); ++i)\n\t{\n\t\tif (t[k - 1] + i == t[k] + g) ans = Min(ans, dfs(k - 1, i) + g);\n\t\tif (t[k - 1] + i + m <= t[k] + g) ans = Min(ans, dfs(k - 1, i) + g);\n\t}\n\treturn ans;\n}//\u66b4\u529bdfs\n\nint main()\n{\n\tn = read(), m = read(), ans = 0x7f7f7f7f;\n\tfor (int i = 1; i <= n; ++i) t[i] = read();\n\tsort(t + 1, t + n + 1); memset(f, -1, sizeof(f));\n\tfor (int i = 0; i< (m << 1); ++i) ans = Min(ans, dfs(n, i));\n\tprintf(\"%d\\n\", ans); return 0;\n}\n```\n\n\u63a5\u4e0b\u6765\u52a0\u8bb0\u5fc6\u5316\u3002\u5176\u5b9e\u5728\u5199\u8bb0\u5fc6\u5316\u641c\u7d22\u7684\u65f6\u5019\uff0c\u6211\u4e2a\u4eba\u8ba4\u4e3a\u52a0\u8bb0\u5fc6\u5316\u662f\u6700\u7b80\u5355\u7684\uff0c **\u53ea\u8981\u7206\u641c\u5199\u597d\u5e76\u4e14\u5199\u5bf9\uff0c\u52a0\u8bb0\u5fc6\u5316\u6613\u5982\u53cd\u638c\u3002\u54ea\u91cc\u6709 return \uff0c\u54ea\u91cc\u52a0\u8bb0\u5fc6\u5316** \u3002\u6700\u540e\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nconst int MAXN = 500 + 10;\nint n, m, t[MAXN], f[MAXN][MAXN], ans;//f[i][j] \u8868\u793a\u7b2c i \u4e2a\u4eba\u5728\u7b49\u4e86 j \u65f6\u95f4\u540e\u53d1\u8f66\u7684\u6700\u4f18\u89e3\uff0c\u521d\u59cb\u5316\u4e3a -1\u3002\n\nint read()\n{\n\tint sum = 0, fh = 1; char ch = getchar();\n\twhile (ch < '0' || ch > '9') {if (ch == '-') fh = -1; ch = getchar();}\n\twhile (ch >= '0' && ch <= '9') {sum = (sum << 3) + (sum << 1) + (ch ^ 48); ch = getchar();}\n\treturn sum * fh;\n}\nint Min(int a, int b) {return (a < b) ? a : b;}\n\nint dfs(int k, int g)\n{\n\tif (f[k][g] != -1) return f[k][g];\n\tif (k == 1) return f[k][g] = g;\n\tint ans = 0x7f7f7f7f;\n\tfor (int i = 0; i < (m << 1); ++i)\n\t{\n\t\tif (t[k - 1] + i == t[k] + g) ans = Min(ans, dfs(k - 1, i) + g);\n\t\tif (t[k - 1] + i + m <= t[k] + g) ans = Min(ans, dfs(k - 1, i) + g);\n\t}\n\treturn f[k][g] = ans;\n}\n\nint main()\n{\n\tn = read(), m = read(), ans = 0x7f7f7f7f;\n\tfor (int i = 1; i <= n; ++i) t[i] = read();\n\tsort(t + 1, t + n + 1); memset(f, -1, sizeof(f));\n\tfor (int i = 0; i< (m << 1); ++i) ans = Min(ans, dfs(n, i));\n\tprintf(\"%d\\n\", ans); return 0;\n}\n```\n\n\u6700\u540e\u7684\u603b\u7ed3\uff1a\u5176\u5b9e\u5bf9\u4e8e\u666e\u53ca\u7684 DP \uff0c\u5982\u679c\u6ca1\u6709\u597d\u601d\u8def\u65f6\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5199\u8bb0\u5fc6\u5316\u641c\u7d22\uff0c\u6216\u8bb8\u5c31\u80fd\u89e3\u51fa DP \u9898\u800c\u6210\u529f\u7684\u83b7\u5f97\u9ad8\u5206\u3002",
        "postTime": 1597978480,
        "uid": 134000,
        "name": "Plozia",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "## [~~\u4f20\u9001\u95e8~~](https://www.luogu.org/problem/P5017)\n\n### \u5176\u5b9e\uff0c\u8fd9\u662f\u4e00\u79cd\u6bd4\u8f83\u5bb9\u6613\u63a8\u7684\u65b9\u6cd5\u3002\n\n\u4ed4\u7ec6\u89c2\u5bdf\u4e00\u4e0b\u8fd9\u9053\u9898\uff0c\u5b83\u7684 $n$ \u548c $m$ \u90fd\u5f88\u5c0f\uff0c\u660e\u6446\u7740\u5c31\u662f\u8ba9\u4f60\u7528\u7684\u561b\u3002\u5148\u5bf9 $a_i$ \u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u6211\u4eec\u5c31\u8bbe\u4e00\u4e2a\u5f88\u795e\u5947\u7684\u72b6\u6001\uff0c$f_{i,j}$ \u8868\u793a\u7b2c $i$ \u4e2a\u4eba\uff0c\u7b49\u5f85\u65f6\u95f4\u4e3a $j$ \u4e14\u524d $i$ \u4e2a\u4eba\u5df2\u5230\u8fbe\u7684\u65f6\u95f4\u6700\u5c0f\u548c\uff0c~~\u8f6c\u79fb\u663e\u7136\uff08\u54b3\u54b3\uff09~~\u3002\n\n\u7136\u540e\u6211\u4eec\u5206\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba\uff1a\n\n1. $a_{i+1}\\leq a_{i}+j$\u3002\u5219\u4e0b\u4e00\u4e2a\u4eba\u660e\u663e\u53ef\u4ee5\u548c\u5f53\u524d\u8fd9\u4e2a\u4eba\u5750\u540c\u4e00\u8f86\u8f66\u8d70\uff0c\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a\n\n$$ f_{i+1,a_i+j-a_{i+1}}= \\min(f_{i+1,a_i+j-a_{i+1}},f_{i,j}+a_{i}+j-a_{i+1}) $$\n\n2. $a_{i+1}>a_{i}+j$\uff08\u60c5\u51b5\u4e00\u7684\u53cd\u4f8b\uff09\u3002\u6211\u4eec\u5c31\u679a\u4e3e\u4e0b\u4e00\u53f0\u8f66\u7684\u65f6\u95f4\u4e0e\u4e0b\u4e00\u4e2a\u4eba\u5230\u6765\u65f6\u95f4\u7684\u5dee\uff0c\u6211\u4eec\u6709 $k$\uff1a\n\n$$ k = \\max(0,a_i+j+m-a_{i+1}) \\to (2m+1) $$\n\n\u8f6c\u79fb\u4e3a\uff1a\n\n$$ f_{i+1,k} = \\min(f_{i+1,k},f_{i,j}+k) $$\n\n$f$ \u6570\u7ec4\u521d\u503c\u4e3a\u65e0\u9650\u5927\uff0c\u4f46 $\\forall\\ f_{1,i} = i$\u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u4e0a\u4ee3\u7801\u5566\uff08\u7801\u98ce~~\u5f88\u597d\u770b~~\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u7684\u7406\u8bba\u6781\u9650\u590d\u6742\u5ea6\u662f\u5f88\u6162\u7684 $O(nm^2)$\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u4f1a\u5feb\u5f88\u591a\uff09\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#define N 5010\n#define inf 0x7f7f7f\nusing namespace std;\nint a[N],f[N][N*2/5],n,m,s=inf;\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n;i++) scanf(\"%d\",&a[i]);\n\tmemset(f,inf,sizeof(f));\n\tfor (int i=0;i<=n;i++) f[1][i]=i;\n\tsort(a+1,a+n+1);\n\tfor (int i=1;i<=n;i++) for (int j=0;j<=2*m;j++)\n\t{\n\t\tif (a[i+1]<=a[i]+j) f[i+1][a[i]+j-a[i+1]]=min(f[i+1][a[i]+j-a[i+1]],f[i][j]+a[i]+j-a[i+1]);\n\t\telse for (int k=max(0,a[i]+j+m-a[i+1]);k<=2*m+1;k++) f[i+1][k]=min(f[i+1][k],f[i][j]+k);\n\t}\n\tfor (int i=0;i<=m;i++) s=min(s,f[n][i]);\n\tprintf(\"%d\",s);\n\treturn 0;\n}\n```",
        "postTime": 1564822617,
        "uid": 84705,
        "name": "CrazyDance",
        "ccfLevel": 6,
        "title": "\u725b\u903c\u7684\u505a\u6cd5\u6765\u4e86"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u6bd4\u8f83\u96be\u60f3\u4f18\u5316\u7684DP\uff0c\u53bb\u5e74\u8003\u70b8\u4e86\uff0c\u4eca\u5e74\u5c31\u4e0d\u60f3\u518d\u78b0\u8fd9\u9053\u9898\uff0c\u4eca\u5929\u6bd4\u8f83\u95f2\uff0c\u53c8\u91cd\u65b0\u505a\u4e86\u4e00\u904d\n\n\u4e00\u5e74\u4e4b\u540e\u91cd\u65b0\u505a\u8fd9\u4e00\u9053\u9898\uff0c\u53d1\u73b0\u8fd8\u662f\u6709\u70b9\u5957\u8def\u7684\n\n\u53ef\u4ee5\u7528$f[j]$\u8868\u793a\u6700\u540e\u4e00\u6b21\u5230j\u7684\u6d6a\u8d39\u7684\u65f6\u95f4\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u6240\u6709\u4e0a\u4e00\u6b21\u7684\u65f6\u95f4\uff0c\u8ba1\u7b97\u4e0a\u4e00\u6b21\u5230\u8fd9\u4e00\u6b21\u6240\u6d6a\u8d39\u7684\u65f6\u95f4\u3002\n\n\u8bbe\u4e0a\u4e00\u6b21\u65f6\u95f4\u4e3a$i$,\u8fd9\u4e00\u6b21\u662f$j$\uff0c\u90a3\u4e48\n\n$$f[j]=min(f[j],f[i]+\\sum_{t[k]<=j}j-t[k] )$$\n\n$$\\text{\u62c6\u5f00\u8fd9\u4e2a\u67ff\u5b50}$$\n\n$$\\sum{j-t[k]}=cnt[j]*i-sum[j]$$\n\n\u8fd9\u4e00\u90e8\u5206\u7528\u524d\u7f00\u548c\u4f18\u5316\u8fc7\u53bb\u5c31\u884c\u4e86\uff0c\u80fd\u5f97$50pts$\n\n\u63a5\u4e0b\u6765\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u91cc\u6709\u5904\u7406\u91cd\u590d\u72b6\u6001\uff0c\u6bd4\u5982\u5f53$i=k,j=k-m$\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u72b6\u6001\uff0c\u5df2\u7ecf\u6709\u8fc7\u4e00\u6b21\uff0c\u90a3\u4e48\u5c31\u6ca1\u6709\u5fc5\u8981\u5728$i=k+m,j=k-m$\u7684\u65f6\u5019\u518d\u91cd\u590d\u8ba1\u7b97\u4e00\u904d\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u679a\u4e3e\u5230$i-m$\u5c31\u591f\u4e86\uff0c\u80fd\u5f97$70pts$\n\n\u63a5\u4e0b\u6765\u518d\u8003\u8651\u4e00\u6bb5\uff0c\u5982\u679c\u6ca1\u6709\u4efb\u4f55\u4eba\u5b58\u5728\uff0c\u90a3\u4e48\u5b8c\u5168\u662f\u6ca1\u6709\u5fc5\u8981\u66f4\u65b0\u7684\uff0c\u76f4\u63a5\u53d6\u4e4b\u524d\u7684\u72b6\u6001\u5c31\u597d\u4e86\n\n\u7efc\u4e0a\u53ef\u5f97$100pts$\n\n```cpp\n\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,mt,t;\nint f[4000005],ans[4000005];\nint cnt[4000005],sum[4000005]; \nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;++i){\n\t\tscanf(\"%d\",&t);\n\t\t++cnt[t];\n\t\tsum[t]+=t;\n\t\tmt=max(mt,t);\n\t}\n\tfor(int i=1;i<mt+m;++i)cnt[i]+=cnt[i-1],sum[i]+=sum[i-1];//\u524d\u7f00\u548c\u4f18\u5316\n\tfor(int i=1;i<mt+m;++i){\n\t\tif(i>=m&&cnt[i]==cnt[i-m]){f[i]=f[i-m];continue;}//\u4e2d\u95f4\u6ca1\u6709\u4eba\u76f4\u63a5\u8df3\u8fc7\n\t\tf[i]=cnt[i]*i-sum[i];//\u8fb9\u754c\u60c5\u51b5\u5148\u5904\u7406\n\t\tfor(int j=max(i-2*m+1,0);j<=i-m;++j)\n\t\t f[i]=min(f[i],f[j]+(cnt[i]-cnt[j])*i-(sum[i]-sum[j]));//\u4e0a\u9762\u7684\u5f0f\u5b50\u63a8\u5f97\n\t}\n\tint ans=1e9;\n    for(int i=mt;i<mt+m;++i)ans=min(ans,f[i]);//\u7edf\u8ba1\u7b54\u6848\n\tcout<<ans<<endl;  \n}",
        "postTime": 1572108170,
        "uid": 271907,
        "name": "Wai_t_ing",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "t\u6570\u7ec4\u4ee3\u8868\u8be5\u65f6\u523b\u7b49\u8f66\u65f6\u95f4\u7d2f\u52a0\u503c\uff0cr\u6570\u7ec4\u4ee3\u8868\u8be5\u65f6\u523b\u7b49\u5f85\u603b\u4eba\u6570\nf\u6570\u7ec4\u4ee3\u8868\u8be5\u65f6\u523b\u7b49\u5f85\u65f6\u95f4\u503c\u3002\n\u5219\u5bb9\u6613\u5f97\u5230\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\nf[i]=min(f[i],f[j]+(r[i]-r[j])*i-(t[i]-t[j])\n\n\u4f46\u8fd8\u662f\u4f1a\u5361\u65f6\u9650\n\n\u90a3\u4e48\uff0c\u526a\u679d\uff0c\u526a\u679d\uff0c\u518d\u526a\u679d\u3002\n\n1.\u5982\u679c\u65f6\u95f4\u6bb5\u91cc\u65e0\u4e58\u5ba2\uff0c\u5219\u7ee7\u627f\u5148\u7956\u7684\u9057\u5fd7\n\nf[i]=f[i-m];\n\n2.\u5982\u679c\u6240\u6709\u4e58\u5ba2\u90fd\u5728\u7b2c\u4e00\u6b21\u53d1\u8f66\u4e4b\u524d\n\nf[i]=r[i]*i-t[i];\n\n\u5982\u679c\u6bd4\u6700\u540e\u4e00\u4e2a\u4eba\u8fd8\u9760\u540e\n\nans=min(ans,f[i]);\n\n3.\u4e4b\u540e\u5c31\u662f\u5728\u533a\u95f4\u91cc\u524d\u7f00\u548c\u6c42dp\u4e86\uff08\u4e0a\u4e00\u8d9f\u548c\u4e0b\u4e00\u8d9f\u4e4b\u95f4\uff09\n\n4.\u5982\u679c\u662f\u6700\u540e\u4e00\u8d9f\u8f66\n\n ans=min(ans,f[i]);\n \n\u603b\u7684\u6765\u8bf4\uff0c\u6b64\u9898\u601d\u8def\u597d\u60f3\u4f46\u5751\u5f88\u591a\uff0c\u5404\u4f4dOIer\u6ce8\u610f\u54e6\n\n\u53e6\u5916\uff0c\u65f6\u95f4\u5faa\u73af\u7684\u53f3\u8fb9\u754c\u8fd8\u8981\u52a0\u4e0a\u8f66\u56de\u6765\u7684m\n\n\u6240\u4ee5\u662f\u5faa\u73af\u5230a[n]-m+1\n\n```cpp\n#include<iostream> \n#include<cstdio>\n#include<string.h>\n#include<algorithm>\n#include<cmath>\n#include<cstdlib>\nusing namespace std;\nconst int N=4000005;\nint n,m,t[N]/*\u8be5\u65f6\u523b\u7b49\u8f66\u65f6\u95f4\u7d2f\u52a0\u503c*/,r[N]/*\u8be5\u65f6\u523b\u7b49\u5f85\u603b\u4eba\u6570*/,a[505],f[N]/*\u8be5\u65f6\u523b\u7b49\u5f85\u65f6\u95f4\u503c*/,ans=0x3f3f3f3f;\nint main(){\n\tmemset(f,0x3f,sizeof(f));\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&a[i]);\n\tsort(a+1,a+n+1);\n\tint j;r[0]=0;t[0]=0;//\u9884\u5904\u7406 \n\tfor(j=1;j<=n;j++){\n\t\tif(a[j]!=0){\n\t\t\tbreak;\n\t\t}\n\t\tr[0]++;//\u96f6\u65f6\u51fa\u53d1\u6709\u51e0\u4e2a \n\t}\n\tfor(int i=1;i<=a[n]+m-1/*\u603b\u65f6\u95f4*/;i++){//\u65f6\u95f4\u5faa\u73af \n\t\tt[i]+=t[i-1];//\u9884\u5904\u7406 \n\t\tr[i]+=r[i-1];//\u9884\u5904\u7406 \n\t\tfor(;a[j]==i&&j<=n;j++){\n\t\t\tt[i]+=a[j];//i\u65f6\u523b\u7d2f\u52a0 \n\t\t\tr[i]++;//i\u65f6\u523b\u7b49\u5f85\u603b\u4eba\u6570 \n\t\t}\n\t}\n\tf[0]=0;\n\tfor(int i=1;i<=a[n]+m-1;i++){\n\t\tif(i>m&&r[i-m]==r[i]){//\u5982\u679c\u6ca1\u6709\u4e58\u5ba2 \n\t\t\tf[i]=f[i-m];//\u7ee7\u627f\u4e0a\u6b21\u53d1\u8f66\u7684\u503c \n\t\t\tcontinue;\n\t\t}\n\t\tif(i<=m-1){//\u7b2c\u4e00\u6b21\u53d1\u8f66\u4e4b\u524d \n\t\t\tf[i]=r[i]*i-t[i];//\u8ba1\u7b97\u524d\u7f00\u548c \n\t\t\tif(i>=a[n])/*\u6bd4\u6700\u540e\u4e00\u4e2a\u4eba\u9760\u540e*/ ans=min(ans,f[i]);\n\t\t\tcontinue;\n\t\t}\n\t\tint minj=i-2*m/*\u53d1\u8f66\u4e4b\u524d*/<0?0/*\u5982\u679c\u6bd40\u8fd8\u5411\u5de6\u53d60*/:i-2*m/*\u4e0d\u7136\u5219\u53d6\u5de6\u8fb9\u754c\uff08\u53d1\u8f66\u4e4b\u524d\uff09*/;//\u533a\u95f4\u8303\u56f4 \n\t\tfor(int j=minj;j<=i-m;j++){//\u65f6\u95f4\u533a\u95f4\u91ccdp\u65f6\u95f4\u70b9 \n\t\t\tf[i]=min(f[i],f[j]/*\u4e0a\u4e00\u8d9f\u53d1\u8f66*/+(r[i]-r[j])/*\u8fd9\u8d9f\u4e0e\u4e0a\u4e00\u8d9f\u4e4b\u95f4\u7684\u7b49\u5f85\u4eba\u6570*/*i-(t[i]-t[j])/*\u8be5\u65f6\u95f4\u7b49\u5f85\u7684\u65f6\u95f4\u503c*/);//\u524d\u7f00\u548c \n\t\t}\n\t\tif(i>=a[n]) ans=min(ans,f[i]);//\u6700\u540e\u4e00\u8d9f\u8f66\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1553515383,
        "uid": 165561,
        "name": "lian_sama",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u4e2a\u4eba\u8ba4\u4e3a \uff1a \u4e0d\u4e00\u5b9a\u6700\u4f18 \u4f46\u5e94\u8be5 \u6bd4\u8f83\u597d\u7406\u89e3\n\n\n\u8003\u573a \u8fd9\u4e00\u9898 \u6572\u4e863\u4e2a\u5c0f\u65f6 \u8fd8\u6ca1\u505a\u51fa\u6765 \u76f4\u63a5 ~~AFO~~\n\n\n\u770b\u51fa\u6765\u662fDP \u4f46\u63a8\u51fa\u6765\u7684 \u4e0e\u6837\u4f8b\u5b8c\u5168\u4e0d\u7b26\u5408\n\n\u770b\u89c1\u524d\u9762\u5927\u4f6c\u7684\u89e3\u9898\u601d\u8def\u4ee5\u540e \u604d\u7136\u5927\u609f~~\uff08\u4e00\u5934\u96fe\u6c34\uff09~~\n\n\u601d\u8def\uff1a \u6392\u597d\u5e8f\u540e \u53ef\u4ee5\u53d1\u73b0 \u4efb\u610f1\u4eba\u7b49\u5f85\u65f6\u95f4 \u4e0d\u4f1a\u8d85\u8fc7 2*m \u5426\u5219 \u4f60\u5728\u4e2d\u95f4\u518d\u53d1\u4e00\u8f86\u4e5f\u53ef\u4ee5\u554a\n\n\u4e5f\u4e0d\u7528\u5904\u7406\u524d\u7f00\u548c \u5c31\u662f\u6392\u5b8c\u5e8f\u5c31\u597d\u4e86\n\n\u5b9a\u4e49 : dp[I][j] \u4e3a\u7b2c i \u4e2a\u4eba \u7b49\u5f85\u4e86j\u5206\u949f\u540e \u524d\u9762\u6240\u6709\u4eba\uff08\u5305\u62ec\u81ea\u5df1\uff09\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4.\n\n\u8f6c\u79fb\u65b9\u7a0b: dp[i][j] = min{ dp[i-1][k]+j }  0<= j,k < m  (j \u662f\u679a\u4e3e\u7b2ci\u4e2a\u4eba\u7684\u7b49\u5f85\u65f6\u95f4. k \u662f\u679a\u4e3e\u7b2c i-1 \u4e2a\u4eba\u7684\u7b49\u5f85\u65f6\u95f4.\n\n\u65f6\u95f4\u590d\u6742\u5ea6 0(nm^2) \n\n\u521d\u59cb\u72b6\u6001\uff1a dp[1][i] = i; 0 <= i < m\n\n\u6ce8\u610f\u4e8b\u9879\uff1a \u5fc5\u987b\u662f\u6709\u8f66\u7684\u60c5\u51b5\u4e0b \u624d\u80fd\u8f6c\u79fb. \u5177\u4f53\u5904\u7406\u770b\u4ee3\u7801.\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```\n#include<bits/stdc++.h>\nusing namespace std;\n#define reg register\n#define M 505\nconst int INF = 1<<30;\n\ninline int read()\n{\n\treg int c = getchar(),sign = 1,num = 0;\n\twhile((c < '0' || c > '9') && c != '-') c = getchar();\n\tif(c == '-') sign = -1;\n\telse num = c - '0';\n\tc = getchar();\n\twhile(c >= '0' && c <= '9') num = (num<<3) + (num<<1) + (c - '0'),c = getchar();\n\treturn sign * num;\n}\nint t[M],dp[M][M];\n\nint main()\n{\n\tint n = read(),m = read();\n\tfor(int i=1; i<=n; i++) t[i] = read();\n\tsort(t+1,t+n+1);\n\tfor(int i=0; i<2*m; i++) dp[1][i] = i; //\u521d\u59cb\u72b6\u6001 \n\tfor(int i=2; i<=n; i++) {  \n\t\tfor(int j=0; j<2*m; j++) { // \u662f\u679a\u4e3e\u7b2ci\u4e2a\u4eba\u7684\u7b49\u5f85\u65f6\u95f4 \n\t\t\tdp[i][j] = INF; //\u6781\u5927\u503c  \n\t\t\tfor(int k=0; k<2*m; k++) { // \u662f\u679a\u4e3e\u7b2c i-1 \u4e2a\u4eba\u7684\u7b49\u5f85\u65f6\u95f4\n\t\t\t\tint cha = t[i] + j - (t[i-1] + k); // \u770b\u4e00\u4e0b \u51fa\u53d1\u65f6\u95f4\u4e0e\u4e0a\u4e00\u4e2a\u4eba\u7684\u95f4\u9694  \n\t\t\t\tif(cha == 0 || cha >= m) // \u76f8\u540c \u6216\u8005 \u95f4\u8ddd\u5927\u4e8em\uff08\u6709\u8f66\uff09 -> \u8f6c\u79fb \n\t\t\t\tdp[i][j] = min(dp[i][j],dp[i-1][k]+j);\n\t\t\t}\n\t\t}\n\t}\n\tint ans = INF;\n\tfor(int i=0; i<2*m; i++) ans = min(ans,dp[n][i]); //\u641c\u7b54\u6848  \n\tcout<<ans<<endl;\n\treturn 0;\n\n}\n```\n\n\n                                               \n                                               \n",
        "postTime": 1543682177,
        "uid": 91416,
        "name": "Sairfzy",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u9ad8\u4e2d\u849f\u84bb\u6765\u53d1\u4e2a\u9898\u89e3 ~~\u4e3a\u4e86\u5495\u503c\uff01qwq~~\n\nDP\u9898\uff0c\u4e00\u5f00\u59cb\u60f3\u8d2a\u5fc3\u7684\u6765\u7740\n\n\u7136\u540e\u60f3\u7740\u60f3\u7740\u5c31\u6210DP\u4e86qwq\n\n**\u89e3\u91ca\u4e00\u4e0b\u53d8\u91cf**\n\nq\u6570\u7ec4\u662f\u524d\u7f00\u548c\uff0c\u72b6\u6001\u8f6c\u79fb\u8981\u7528\n\nf[i][j]\u8868\u793a\u628a\u524di\u4e2a\u4eba\u9001\u5b8c\u540e\uff0c\u6700\u540e\u4e00\u8d9f\u8f66\u7684\u51fa\u53d1\u65f6\u95f4\u4e3aa[i]+j \u7684\u6700\u5c0f\u82b1\u8d39\n\nf[i][j]\u53ef\u4ee5\u4ecef[i][0...j-1]\u76f4\u63a5\u8f6c\u79fb\n\n\u4e5f\u53ef\u4ecef[k][z] (0<=k<=i-1,a[k]+z+m=a[i]+j)\u8f6c\u79fb\uff0c \u4f46\u8981\u52a0\u4e0a\u82b1\u8d39v\uff0cv=(i-k)*(a[i]+j)-(q[i]-q[k])\n\n\u81ea\u5df1\u7406\u89e3\u4e00\u4e0b\n\n\u8fd8\u6709\u5c31\u662fa[0]\u8981\u8d4b\u503c\u4e3a\u8d1f\u65e0\u7a77\uff0c\u8868\u793a\u8f66\u4e00\u5f00\u59cb\u5c31\u80fd\u51fa\u53d1qwq\n\n\u56e0\u4e3a\u5982\u679ca[0]=0\uff0c\u7a0b\u5e8f\u5c31\u4f1a\u8ba4\u4e3a\u201c\u524d\u4e00\u8d9f\u8f66\u201d(\u5b9e\u9645\u4e0a\u4e0d\u5b58\u5728\u7684\u4e00\u8d9f\u8f66)\u56de\u6765\u7684\u65f6\u95f4\u662fm\uff0c\u201c\u771f\u6b63\u7684\u7b2c\u4e00\u8d9f\u8f66\u201d\u51fa\u53d1\u65f6\u95f4\u6700\u65e9\u5c31\u662fm\uff0c\u8fd9\u6837\u5c31\u5495\u5495\u5495\u4e86\n\n\u5982\u679ca[0]=-INF\uff0c\u7a0b\u5e8f\u5c31\u4f1a\u8ba4\u4e3a\u201c\u524d\u4e00\u8d9f\u8f66\u201d\u56de\u6765\u7684\u65f6\u95f4\u662f\u8d1f\u65e0\u7a77\uff0c\u5373\u201c\u771f\u6b63\u7684\u7b2c\u4e00\u8d9f\u8f66\u201d\u65e0\u8bba\u4ec0\u4e48\u65f6\u5019\u90fd\u51c6\u5907\u597d\u4e86\u51fa\u53d1\uff0c\u5c31\u53ef\u4ee5\u4e86\n\nqwq\n\n```cpp\n\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\nlong long n,m,a[505],q[505],ans;\nlong long f[505][105];\nint main() {\n    scanf(\"%lld %lld\",&n,&m);\n    for(long long i=1;i<=n;i++) scanf(\"%lld\",&a[i]);\n    sort(a+1,a+n+1);\n    for(long long i=1;i<=n;i++) q[i]=q[i-1]+a[i];\n    memset(f,0x3f,sizeof(f));\n    memset(f[0],0,sizeof(f[0]));\n    a[0]=-(1<<30);\n    for(long long i=1,r;i<=n;i++) {\n        r=1<<30;//r\u8bb0\u5f55f[i][0...j-1]\u4e2d\u7684\u6700\u5c0f\u503c\n        for(long long j=0;j<=m;j++) {\n            f[i][j]=min(f[i][j],r);\n            for(long long k=0,z,v;k<i;k++) {\n                z=a[i]-a[k]+j-m;\n                z=z>m?m:z;//\u7279\u5224\n                if(z<0) continue ;//\u65e0\u6cd5\u8f6c\u79fb\n                v=(i-k)*(a[i]+j)-(q[i]-q[k]);\n                f[i][j]=min(f[i][j],f[k][z]+v);\n            }\n            r=min(f[i][j],r);\n        }\n    }\n    ans=1<<30;\n    for(long long i=0;i<=m;i++) ans=min(ans,f[n][i]);\n    printf(\"%lld\",ans);\n    return 0;\n}\n\n```",
        "postTime": 1542554708,
        "uid": 96546,
        "name": "qsmoonzh",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u4ecb\u7ecd\u4e00\u4e2a\u5e76\u6ca1\u6709\u5f88\u597d\u7684\u65b9\u6cd5\uff0c\u590d\u6742\u5ea6O($n^2$m)\u6bd4\u5f88\u591a\u4eba\u6162\u4e86\u70b9\uff0c\u5b9e\u6d4b380ms\n\n\u5177\u4f53\u601d\u8def\u662f\u8fd9\u4e48\u6765\u7684\uff1a\n\n- \u9996\u5148\u6211\u60f3\u7528A[i]\u8868\u793a\u628a\u524di\u4e2a\u4eba\u8fd0\u5230\u4eba\u5927\uff0c\u524di\u4e2a\u4eba\u4e00\u5171\u8981\u7b49\u7684\u65f6\u95f4\u3002\n- \u90a3\u4e48\u6211\u53e3\u80e1\u4e86\u4e00\u4e2a\u8f6c\u79fb\uff1aA[i]=min(A[j]+Wait[j+1][i]+extra)\uff0c\u6307\u7684\u5c31\u662f\u524dj\u4e2a\u4eba\u5df2\u7ecf\u8fd0\u5230\u4eba\u5927\u4e86\uff0c\u4ecej+1\u5230i\u8fd9\u4e9b\u4eba\u5750\u4e00\u8d9f\u8f66\u53bb\u4eba\u5927\u3002\n- \u8fd9\u91cc\u7684Wait[a][b]\u8868\u793a\u4ecea\u5230b\u7684\u4eba\u5750\u4e00\u8d9f\u8f66\uff0ca\u5230b\u8fd9\u4e9b\u4eba\u4e00\u5171\u8981\u7b49\u591a\u4e45\uff0c\u81f3\u4e8e\u8fd8\u8981\u52a0\u4e00\u4e2aextra\uff0c\u662f\u56e0\u4e3a\u8f66\u5728\u7b2cj\u4e2a\u4eba\u5230\u8fbe\u65f6\u51fa\u53d1\uff0c\u5f53\u5730i\u4e2a\u4eba\u6765\u4e86\uff0c\u8f66\u4e5f\u8bb8\u8fd8\u6ca1\u56de\u6765\uff0c\u4f60\u8fd8\u8981\u518d\u7b49\u4e00\u4f1a\uff0c\u8ba9\u8f66\u56de\u6765\uff0c\u8fd9\u6bb5\u65f6\u95f4\u7684\u7b49\u5f85\uff0c\u5c31\u662fextra\u3002\n\n\u611f\u89c9\u601d\u8def\u597d\u50cf\u5f88\u4e25\u5bc6\u7684\u6837\u5b50\uff0c\u8349\u8349\u5199\u5b8c\u4e00\u4ea4\uff0c\u5374\u53d1\u73b0\u53ea\u62ff\u4e8655\u5206\u3002\n\n\u95ee\u9898\u51fa\u73b0\u5728\u54ea\u91cc\uff1f\n\n1. \u5047\u8bbe\u9519\u8bef $\\rightarrow $ \u6211\u8bef\u4ee5\u4e3a\u7b2c\u8f66\u4e00\u5b9a\u4f1a\u5728\u7b2cj\u4e2a\u4eba\u6765\u5230\u7684\u65f6\u5019\u5f00\u51fa\uff0c\u4f46\u5b9e\u9645\u4e0a\u8f66\u90fd\u4e0d\u4e00\u5b9a\u4f1a\u5728\u7b2ci\u4e2a\u4eba\u6765\u7684\u65f6\u5019\u5f00\u51fa\uff08\u56e0\u4e3a\u8f66\u53ef\u80fd\u8fd8\u5728\u8def\u4e0a\uff09\n1. \u8fb9\u754c\u8981\u6ce8\u610f\uff0ct[0]\u8d4b\u521d\u503c\u4e3a$-Inf$ \n\n\u8fd9\u6837\u5206\u6790\u4e4b\u540e\uff0c\u6211\u4eec\u4f18\u5316\u4e00\u4e0b\u601d\u8def\uff1a\n\n- A[i][j]\u8868\u793a\u524di\u4e2a\u4eba\u5df2\u7ecf\u88ab\u8fd0\u5230\u4eba\u5927\u4e86\uff0c\u5e76\u4e14\u7b2ci\u4e2a\u4eba\u5230\u7b49\u8f66\u7684\u5730\u65b9\u4e4b\u540e\u53c8\u8fc7\u4e86j\u79d2\u8f66\u624d\u5f00\uff0c\u8fd9\u6837\u7684\u60c5\u51b5\u7684\u6700\u4f18\u89e3\u3002\n- \u8fd9\u6837\u6211\u4eec\u5206\u4e24\u79cd\u60c5\u51b5\uff1a\n\t1. \u7b2cj\u4e2a\u4eba\u5230\u4e86\u4ee5\u540e\uff0c\u7b49\u4e86k\u79d2\uff0c\u53d1\u8f66\uff0c\u4e4b\u540ei\u6765\u4e86\uff0c\u4e14\u6b64\u65f6\u8f66\u56de\u6765\u4e86\uff0c\u6b64\u65f6\u8f6c\u79fb\u4e3a\uff1a$ A[i][0]=min(A[i][0],A[j][k]+Wait[j+1][i]); $\n    1. \u7b2cj\u4e2a\u4eba\u5230\u4e86\u4ee5\u540e\uff0c\u7b49\u4e86k\u79d2\uff0c\u53d1\u8f66\uff0c\u4e4b\u540ei\u6765\u4e86\uff0c\u4f46\u662f\u8f66\u8fd8\u6ca1\u56de\u6765\uff0c\u6b64\u65f6\u8f6c\u79fb\u4e3a\uff1a$A[i][k+m+t[j]-t[i]]=min(A[i][k+m+t[j]-t[i]],A[j][k]+Wait[j+1][i]+(i-j)*(k+m+t[j]-t[i]));$\n    \n\u6700\u7ec8\u7b54\u6848\u5c31\u5728A[n][i]\u4e2d\u53d6\u4e2amin\u5c31\u597d\u4e86\uff0ci$\\in$ [0,m]\n\n\n------------\n\n```cpp \n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<algorithm>\n#define debug(x) cout<<#x<<\"=\"<<x<<endl\ntypedef long long ll;\nusing namespace std;\nconst int Inf=0x3f3f3f3f;\nconst int Maxn=1000;\nconst int Maxm=200;\nint n,m;\nint t[Maxn];\nint A[Maxn][Maxm];\nint Wait[Maxn][Maxn];\ninline int read()\n{\n    int rt=0,fl=1;char ch=getchar();\n    while(ch<'0'||ch>'9'){if(ch=='-') fl=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9'){rt=rt*10+ch-'0';ch=getchar();}\n    return rt*fl;\n}\nvoid read_ini()\n{\n    memset(A,0x3f,sizeof(A));\n    n=read(); m=read();\n    for(int i=1;i<=n;i++) t[i]=read();\n    sort(t+1,t+1+n);\n    for(int i=1;i<=n;i++)\n        for(int j=1;j<=i;j++) \n            for(int k=j;k<=i;k++) Wait[j][i]+=t[i]-t[k];\n    for(int i=0;i<=m;i++) A[1][i]=i,A[0][i]=0;\n    t[0]=-Inf;\n    for(int i=2;i<=n;i++)\n    {\n\t    for(int j=0;j<i;j++)\n        {    \n        \tfor(int k=0;k<=m;k++)\n        \t{\n        \t\tif(k+m+t[j]<=t[i])\n        \t\t{\n        \t\t\tA[i][0]=min(A[i][0],A[j][k]+Wait[j+1][i]); \n\t\t\t\t}\n        \t\telse\n        \t\t{\n        \t\t\tA[i][k+m+t[j]-t[i]]=min(A[i][k+m+t[j]-t[i]],A[j][k]+Wait[j+1][i]+(i-j)*(k+m+t[j]-t[i]));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans=Inf;\n\tfor(int i=0;i<=m;i++) ans=min(ans,A[n][i]);\n\tprintf(\"%d\\n\",ans);\n}\nint main()\n{\n    read_ini();\n    return 0;\n}\n```\n\n\n------------\n\u6574\u4f53\u6765\u8bf4\uff0c\u9898\u76ee\u96be\u5ea6\u4e0d\u662f\u5f88\u5927\uff0c\u4f46\u662f\u7ec6\u8282\u6bd4\u8f83\u591a\uff0c\u9700\u8981\u66f4\u7ec6\u5fc3\u4e00\u70b9\uff0c\u795d\u5927\u5bb6$RP++$\n",
        "postTime": 1542464969,
        "uid": 21596,
        "name": "Forever\u4e36CIL",
        "ccfLevel": 6,
        "title": "P5017 \u6446\u6e21\u8f66"
    },
    {
        "content": "## \u9898\u76ee\u80cc\u666f\n\u55ef\u55ef\uff0c\u8fd9\u4e00\u9898\u7684\u786e\u633a\u6bd2\u7624\u7684\uff08\u6bd5\u7adf\u662f\u7ed9\u666e\u53ca\u7ec4\u7684\u849f\u84bb\u505a\u7684\uff09\uff0c\u597d\u5427\uff0c\u8fd9\u662f2018NOIP\u666e\u53ca\u7ec4\u7684\u7b2c\u4e09\u9053\u9898\uff0c\u5f53\u65f6\u7684\u6211\u624d\u662f\u5c0f\u5b66\u516d\u5e74\u7ea7\u7684\u5c0f\u6e23\u6e23\uff0c\u53ea\u4f1a\u8bb0\u5fc6\u5316\u641c\u7d22\u7f62\u4e86\u3002\n\n\u7136\u800c\u4e00\u5e74\u591a\u8fc7\u53bb\u4e86\u2026\u2026\n\n### DP\uff1f\n\u90a3\u5f53\u7136\uff0c\u6bcb\u5eb8\u7f6e\u7591\u7684\u3002\n\n\u5148\u8bb2\u4e00\u4e0b\u666e\u901a\u505a\u6cd5\uff0c\u65b9\u7a0b\uff1a\n$$dp[i]=min(dp[i],dp[j]+(t[i]-t[j])\u00d7i-(s[i]-s[j]));$$\n\u5982\u679c\u4e0d\u61c2$t[i]$\u548c$s[i]$\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u90a3\u4e48\u8bf7\u770b\u4e00\u4e0b\u4e0b\u9762\u8fd9\u4e00\u6bb5\u4ee3\u7801\uff1a\n```cpp\nscanf(\"%d%d\",&n,&m);\nfor(int i=1;i<=n;i++)\n{\n\tscanf(\"%d\",&a);\n\tif(a>mx) mx=a;\n\tt[a]++;\n\ts[a]+=a;\n}\nfor(int i=1;i<mx+m;i++)\n{\n\tt[i]+=t[i-1];\n\ts[i]+=s[i-1];\n}\n```\n\u90a3\u4e48\u6211\u5c31\u4e0d\u8bf4\u4e86\u554a\uff08\u76f8\u4fe1\u5927\u5bb6\u4e00\u5b9a\u90fd\u80fd\u770b\u61c2\uff0c\u5982\u679c\u771f\u770b\u4e0d\u61c2\u8bf7\u8d70\u5427\uff09\n\n\u7136\u540e\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u8fd9\u4e2a\u65b9\u7a0b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f$0(t^2)$\uff0c\u5982\u679c\u4e0d\u52a0\u4f18\u5316\u7684\u8bdd\u5c31\u4e00\u5b9a\u4f1aTLE\u7684\uff0c\u6240\u4ee5\u2026\u2026\n# \u659c\u7387\u4f18\u5316\n\u9996\u5148\uff0c\u62c6\u5f00$min$\u51fd\u6570\uff0c\u5f97\uff1a\n$$dp[i]=dp[j]+(t[i]-t[j])\u00d7i-(s[i]-s[j]);$$\n$$dp[i]=dp[j]+t[i]\u00d7i-t[j]\u00d7i-s[i]+s[j];$$\n$$dp[i]-t[i]\u00d7i+s[i]=dp[j]+s[j]-t[j]\u00d7i;$$\n\u7136\u540e\u5c31\u662f\u6362\u5143\uff0c\u4ee4$x=t[j],y=dp[j]+s[j],k=i,b=dp[i]-t[i]\u00d7i+s[i]$\uff0c\u5f97\u5230\uff1a\n$$b=k\u00d7x+y$$\n\u56e0\u4e3a\u6211\u4eec\u60f3\u8981$dp[i]$\u6700\u5c0f\uff0c\u5176\u5b9e\u7b49\u540c\u4e8e\u8ba9$b$\u6700\u5c0f\uff0c\u56e0\u4e3a$-t[i]\u00d7i+s[i]$\u5df2\u7ecf\u786e\u5b9a\u4e86\u3002\n\n\u8865\u5145\u51e0\u4e2a\u9ad8\u4e2d\u6570\u5b66\u4e2d\u7684\u4e1c\u897f\uff1a\u5728\u4e00\u6b21\u51fd\u6570$y=k\u00d7x+b$\u4e2d\uff0c\u51fd\u6570\u56fe\u50cf\u7684\u659c\u7387\u662f$k$\uff0c\u622a\u8ddd\u662f$b$\u3002\n\n\u884c\u4e86\uff0c\u8fd9\u91cc\u6211\u4eec\u5c31\u662f\u60f3\u8ba9\u622a\u8ddd\u6700\u5c0f\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9$(x,y)$\uff0c\u8fd9\u4e48\u8bf4\u5427\uff0c\u5047\u5982\u6709\u4e00\u6761\u659c\u7387\u4e3a$k\u7684\u76f4\u7ebf\u7ecf\u8fc7\u4e86\u8fd9\u91cc\uff0c\u90a3\u4e48\u622a\u8ddd\u6700\u5c0f\u7684\u7f16\u53f7\u662f\u591a\u5c11\uff1f\n\n\u4e5f\u53ef\u4ee5\u8fd9\u4e48\u60f3\uff1a\u73b0\u5728\u6709\u4e00\u6761\u659c\u7387\u4e3a$k$\u7684\u8fb9\u4ece\u6700\u4e0b\u9762\u5f00\u59cb\u5f80\u4e0a\u626b\uff0c\u8bf7\u95ee\u6700\u5148\u78b0\u5230\u7684\u70b9\u7684\u7f16\u53f7\u662f\u591a\u5c11\uff1f\n\n\u61c2\u4e86\u5427\uff0c\u7136\u540e\uff0c\u56e0\u4e3a$k$\u662f\u9012\u589e\u7684\uff0c\u6240\u4ee5\u6bcf\u4e00\u6b21\u52a0\u5165\u7684\u70b9\u4e0e\u4e0a\u4e00\u4e2a\u70b9\u5f62\u6210\u7684\u659c\u7387\u8981\u9012\u589e\uff0c\u53ef\u662f\u5982\u4f55\u7ef4\u62a4\u5462\uff1f\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u7528\u4e00\u4e2a\u5355\u8c03\u961f\u5217\u5c31\u884c\u4e86\uff0c\u571f\u65b9\u6cd5\uff0c\u4e0d\u518d\u8bb2\u89e3\u4e86\u3002\u8ba1\u7b97\u4e24\u70b9\u4e4b\u95f4\u7684\u659c\u7387\uff1a$(dp[b]+s[b]-dp[a]-s[a])/(t[b]-t[a])$\n\n\u4f46\u662f\u6709\u4e00\u70b9\u7279\u522b\u8981\u547d\uff01\u4e07\u4e00$t[b]-t[a]=0$\u600e\u4e48\u529e\uff1f\u5176\u5b9e\u7279\u5224\u4e00\u4e0b\u5c31\u597d\u4e86\u3002\n```cpp\ndouble slope(int a,int b)\n{\n\tif(t[b]==t[a]) return (dp[b]+s[b]-dp[a]-s[a])*4000000;\n\treturn (double)(dp[b]+s[b]-dp[a]-s[a])/(t[b]-t[a]);\n}\n```\n\u5176\u4ed6\u7684\u4e1c\u897f\u5c31\u4e0d\u518d\u8bb2\u89e3\u4e86\uff0c~~\u6bd5\u7adf\u6765\u770b\u7684\u5e94\u8be5\u90fd\u662f\u5927\u4f6c\u5427~~\u3002\n\n### Code:\n```cpp\n#include<cstdio>\n#define N 4001010\n#define min(a,b) (a<(b)?a:(b))\nusing namespace std;\nint t[N],s[N],dp[N],a,mx,m,n,ans;\ndouble slope(int a,int b)\n{\n\tif(t[b]==t[a]) return (dp[b]+s[b]-dp[a]-s[a])*4000000;\n\treturn (double)(dp[b]+s[b]-dp[a]-s[a])/(t[b]-t[a]);\n}\nint l=1,r,d[N];\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&a);\n\t\tif(a>mx) mx=a;\n\t\tt[a]++;\n\t\ts[a]+=a;\n\t}\n\tfor(int i=1;i<mx+m;i++)\n\t{\n\t\tt[i]+=t[i-1];\n\t\ts[i]+=s[i-1];\n\t}\n\tfor(int i=0;i<mx+m;i++)\n\t{\n\t\tif(i-m>=0)\n\t\t{\n\t\t\twhile(l<r&&slope(d[r-1],d[r])>=slope(d[r],i-m)) r--;\n\t\t\td[++r]=i-m;\n\t\t}\n\t\twhile(l<r&&slope(d[l],d[l+1])<=i) l++;\n\t\tdp[i]=t[i]*i-s[i];\n\t\tif(l<=r) dp[i]=min(dp[i],dp[d[l]]+(t[i]-t[d[l]])*i-(s[i]-s[d[l]]));\n\t}\n\tans=0x3f3f3f3f;\n\tfor(int i=mx;i<mx+m;i++) ans=min(ans,dp[i]);\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1580741358,
        "uid": 99506,
        "name": "_LHF_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u795e\u4ed9$dp$\u9898\u3002\u770b\u4e86\u706f\u706b\u4e3f\u8473\u8564\u7684\u9898\u89e3\u624d\u505a\u51fa\u6765\u3002          \n\u6211\u4eec\u8bbe$dp[i][j]$\u8868\u793a\u5728\u7b2c$i$\u4e2a\u4eba\u7b49\u4e86$j$\u5206\u949f\u7684\u65f6\u523b\u524d$i$\u4e2a\u4eba\u90fd\u5df2\u7ecf\u5230\u4e86\u76ee\u7684\u5730\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4\u3002   \n\u5148\u8003\u8651\u4e00\u4e0b\u7a7a\u95f4\u590d\u6742\u5ea6\u95ee\u9898\u3002       \n\u56e0\u4e3a\u6709$n$\u4e2a\u4eba\uff0c\u6240\u4ee5\u7b2c\u4e00\u7ef4\u7a7a\u95f4\u590d\u6742\u5ea6\u662f$O(n)$\u7684\uff0c\u8fd9\u4e2a\u4e0d\u505a\u591a\u89e3\u91ca\u3002         \n\u5bf9\u4e8e\u7b2c\u4e8c\u7ef4\uff0c\u8003\u8651\u6700\u574f\u60c5\u51b5\uff0c\u8fd9\u4e2a\u4eba\u521a\u597d\u5f00\u8f66\u540e$1$\u5206\u949f\u5230\u8fbe\uff0c**\u90a3\u4e48\u8fd9\u4e2a\u4eba\u6700\u591a\u5c31\u7b49\u4e86$m-1$\u5206\u949f**\uff08\u56e0\u4e3a$m-1$\u5206\u949f\u540e\u8f66\u5c31\u5230\u76ee\u7684\u5730\u4e86...\uff09\u3002      \n\u6240\u4ee5\u7a7a\u95f4\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002\u8003\u8651\u7b97\u6cd5\u8bbe\u8ba1\u3002           \n\u5047\u8bbe\u5f53\u524d\u5230\u4e86\u7b2c$k$\u4e2a\u4eba\u3002      \n\u8bbe$wait_i$\u8868\u793a\u7b2c$i$\u4e2a\u4eba\u7684\u7b49\u5f85\u65f6\u95f4\u3002     \n\u90a3\u4e48$wait_k$\u5176\u5b9e\u5c31\u662f$max(t[i]+j+m-t[k],0)$      \n\u4e3a\u4ec0\u4e48\u5462\uff1f\u56e0\u4e3a$t[i]+j+m$\u662f\u8f66\u91cd\u65b0\u8fd4\u56de\u8d77\u59cb\u70b9\u7684**\u65f6\u523b**\uff08\u4e0d\u662f\u65f6\u95f4\uff09\uff0c\u800c$t[k]$\u5219\u662f\u51fa\u53d1\u7684**\u65f6\u523b**\uff0c\u4e24\u8005\u76f8\u51cf\u5c31\u53ef\u5f97\u5230\u7b49\u5f85\u65f6\u95f4\u3002             \n\u90a3\u4e48\u7b2c$k$\u4eba\u4e0a\u8f66\u7684\u65f6\u95f4\u5176\u5b9e\u5c31\u662f$t[k]+wait_k$   \n\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u63a8\u51fa\u8f6c\u79fb\u65b9\u7a0b\uff1a     \n$$dp[k][wait_k]=dp[i][j]+\\sum_{l=i+1}^k(t[k]+wait_k-t[l])$$         \n\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\u540e\u9762\u90a3\u4e2a$\\sum_{}$\u5176\u5b9e\u6c42\u7684\u662f\u7b2c$i+1\\sim j$\u4eba\u7684\u603b\u7b49\u8f66\u65f6\u95f4\uff08\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u518d\u770b\u770b\u6211\u4e0a\u9762\u7b97$wait_k$\u65f6\u7684\u65b9\u6cd5\uff0c\u662f\u4e00\u6837\u7684\uff09\u3002         \n\u63a5\u7740\u6211\u4eec\u53d1\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u90a3\u5c31\u662f\u8fd9\u4e2a$dp$\u7684\u590d\u6742\u5ea6\u662f$O(n^3m)$\u7684...\u4f1a\u70b8\u3002             \n\u90a3\u4e48\u6211\u4eec\u8fd8\u9700\u8981\u8fdb\u4e00\u6b65\u7684\u5316\u7b80\u5f0f\u5b50\u3002            \n$$dp[k][wait_k]=dp[i][j]+\\sum_{l=i+1}^k(t[k]+wait_k)-\\sum_{o=i+1}^{k}t[o]$$            \n\u53d1\u73b0\u4e86\u6ca1\u6709\uff1f\u7b2c1\u4e2a$\\sum_{}$\u662f\u5b9a\u503c\uff08\u53ef\u4ee5$O(1)$\u7b97\uff0c\u5176\u5b9e\u5c31\u662f$(t[k]+wait[k])*(k-i)$\uff0c\u4e0d\u591a\u505a\u89e3\u91ca\uff09\uff0c\u7b2c2\u4e2a$\\sum_{}$\u53ef\u4ee5\u524d\u7f00\u548c\u7136\u540e\u4e5f$O(1)$\u7b97\u3002\u6240\u4ee5$dp[i][j]$\u540e\u9762\u8fd9\u5768\u4e1c\u897f\u53ef\u4ee5\u76f4\u63a5\u7b97\u51fa\u6765\u3002     \n\u4e8e\u662f\u590d\u6742\u5ea6\u5c31\u5bf9\u4e86\u3002     \n\u518d\u89e3\u7b54\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u53ea\u9700\u8981\u7b97$dp[k][wait_k]$\u7684\u503c\u3002   \n\u5bf9\u4e8e$dp[k][0\\sim{wait_k-1}]$\uff0c\u8f66\u8fd8\u6ca1\u6709\u8fd4\u56de\u8d77\u59cb\u70b9\uff0c\u6240\u4ee5\u5e76\u4e0d\u7528\u8ba1\u7b97\u3002       \n\u5bf9\u4e8e$dp[k][{wait_k+1}\\sim{m-1}]$\u5728\u8fd9\u4e9b\u65f6\u95f4\u4e4b\u524d\u8f66\u5c31\u5df2\u7ecf\u56de\u6765\u4e86\uff0c\u591a\u4f59\u7684\u7b49\u5f85\u6ca1\u6709\u610f\u4e49\uff0c\u6240\u4ee5\u53ef\u4ee5\u820d\u6389\u3002 \n\u5e76\u653e\u4e0a\u81ea\u5df1\u4e11\u964b\u7684\u4ee3\u7801\u3002      \n```cpp\n#include <bits/stdc++.h>\n\nconst int maxn = 510;\nconst int maxm = 110;\nconst int mt = 4e6;    \nconst int inf = 0x3f3f3f3f;  \n\ntemplate<class t> inline void read(t& res) {\n\tres = 0;  char ch = getchar();  bool neg = 0;\n\twhile(!isdigit(ch))\n\t\tneg |= ch == '-', ch = getchar();\n\twhile(isdigit(ch))\n\t\tres = (res << 1) + (res << 3) + (ch & 15), ch = getchar();\n\tif(neg)\n\t\tres = -res;  \n}\n\nint n, m, i, k;\nint t[maxn], s[maxn];   \nint dp[maxn][maxm];  \n\ninline void cmax(int& a,int b) {\n\tif(a < b)\n\t\ta = b;\n}\ninline void cmin(int& a,int b) {\n\tif(a > b)\n\t\ta = b;    \n}\ninline int S(int l,int r) { return s[r] - s[l - 1]; }\n\nint main() {\n\tread(n);  read(m);\n\tfor(int i = 1;i <= n;i++)\n\t\tread(t[i]);\n\tstd::sort(t + 1,t + n + 1);\n\tfor(int i = 1;i <= n;i++)\n\t\ts[i] = s[i - 1] + t[i];\t \n\tmemset(dp,0x3f,sizeof(dp));\n\tdp[0][0] = 0;  t[0] = -inf;    \n\tfor(int i = 0;i <= n;i++) {\n\t\tint mt = std::min(t[i + 1] - t[i],m - 1);\n\t\tfor(int j = 0;j <= mt;j++) {  \n\t\t\tif(dp[i][j] != inf) {\n\t\t\t\tfor(int k = i + 1;k <= n;k++) {\n\t\t\t\t\tint a = std::max(0,t[i] + j + m - t[k]), b = a + t[k];\n\t\t\t\t\tcmin(dp[k][a],dp[i][j] + ((k - i) * b - S(i + 1,k)));  \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans = inf;\n\tfor(int i = 0;i < m;i++) \n\t\tcmin(ans,dp[n][i]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;   \n} \n```\n\n\n\n\n\n",
        "postTime": 1564494307,
        "uid": 117254,
        "name": "leafty",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u6211\u4eec\u5148\u770b\u4e00\u4e0b\u6570\u636e\u8303\u56f4:$n\u2264500,m\u2264100,0\u2264t_i\u22644\u00d710^6$\n\n\u663e\u7136\u590d\u6742\u5ea6\u548c$n,m$\u6709\u5173\uff0c\u65e2\u7136\u5982\u6b64\uff0c\u6211\u4eec\u8003\u8651\u7528$t$\u7684\u590d\u6742\u5ea6\u6765\u89e3\u51b3\u6b64\u9898\u5427\u3002\uff08\u6b64\u9898\u89e3\u6cd5\u4e0d\u6b62\u4e00\u79cd\uff09\n\n\n \u6211\u4eec\u7528$dp[i]$\u8868\u793a\u5728$i$\u65f6\u523b\u53d1\u8f66\uff08\u4e0d\u7ba1\u662f\u7b2c\u51e0\u6b21\uff09\uff0c\u6240\u6709\u5728$i$\u65f6\u523b\u4e4b\u524d\u5230\u8fbe\u7684\u4eba\u7684\u7b49\u5f85\u65f6\u95f4\u4e4b\u548c\u3002$tot[i]$\u8868\u793a\u7b2c$i$\u65f6\u523b\u6709\u591a\u5c11\u4eba**\u5f00\u59cb\u7b49\u8f66**\uff0c\u663e\u7136\u6709\uff1a\n \n $$dp[i]=min(dp[j]+\\sum_{k=j+1}^i tot[i]*(i-k))~~~(j \u2264 i- m )$$\n\n \n \u6211\u4eec\u518d\u8003\u8651\u4e00\u4e0b\u8fb9\u754c\u6761\u4ef6\uff0c$Min_t$\u8868\u793a\u6700\u5148\u5230\u7684\u4e00\u4e2a\u4eba\u6765\u7684\u65f6\u95f4\uff0c\u663e\u7136\u6709$dp[Min_t]=0$\u3002 $Max_t$\u8868\u793a\u6700\u540e\u4e00\u4e2a\u4eba\u6765\u7684\u65f6\u95f4\u3002\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u5728\u6700\u540e\u4e00\u4e2a\u4eba\u6765\u7684\u524d\u4e00\u79d2\u8f66\u5f00\u8d70\u4e86\uff0c\u90a3\u4e48\u603b\u65f6\u95f4\u6700\u591a\u4e3a$Max_t+m-1$\u3002\n \n \u6700\u540e\uff0c\u7b54\u6848\u5c31\u662f$min(dp[i])~~~(Max_t\u2264i\u2264Max_t+m-1)$(\u6700\u540e\u4e00\u4e2a\u4eba\u5f00\u59cb\u7b49\u8f66)\u3002\n \n \u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528$t^3$\u8f6c\u79fb\u4e86\u3002\u518d\u770b\u4e00\u4e0b\u6570\u636e\uff0c\u5f97\u5206$30$\u3002\n \n#### \u4f18\u53161\n \n\u8f6c\u79fb\u65f6\u7684\u590d\u6742\u5ea6\u4f53\u73b0\u5728\u6c42\u548c\uff0c\u8fd9\u4e2a\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u4f18\u5316\u3002\n\n\u6211\u4eec\u7528$tot[i]$\u8868\u793a\u524d$i$\u65f6\u523b\u7b49\u8f66\u7684\u4eba\u6570\u4e4b\u548c\uff08\u4e0e\u524d\u6587\u5b9a\u4e49\u4e0d\u540c\uff09\uff0c$sum[i]$\u8868\u793a\u524d$i$\u65f6\u523b\u5230\u8fbe\u7684\u4eba\u5982\u679c\u4ece0\u65f6\u523b\u5f00\u59cb\u7b49\u8f66\uff0c\u4ed6\u4eec\u7684\u65f6\u95f4\u4e4b\u548c\u3002\n\n\u90a3\u4e48\uff0c$tot[i]-tot[j]$\u5c31\u8868\u793a$i$\u5230$j$\u8fd9\u6bb5\u65f6\u95f4\u91cc\u5f00\u59cb\u7b49\u8f66\u7684\u4eba\u6570\u4e4b\u548c\uff0c$sum[i]-sum[j]$\u8868\u793a\u7b2c$j+1$\u65f6\u523b\u5230\u7b2c$i$\u65f6\u523b\u6765\u5230\u7684\u4eba\uff0c\u4ece$0$\u65f6\u523b\u5f00\u59cb\u7b49\u8f66\u5230\u4ed6\u4eec\u6765\u5230\u7684\u65f6\u95f4\u4e4b\u548c\u3002$(tot[i]-tot[j])*i-(sum[i]-sum[j])$\u5c31\u662f$j+1$\u5230$i$\u65f6\u523b\u6765\u5230\u7684\u4eba\u4ece\u5f00\u59cb\u7b49\u8f66\u5230\u4e0a\u8f66\u7684\u65f6\u95f4\u4e4b\u548c\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u8f6c\u79fb\u65f6\u6c42\u7684\u4e1c\u897f\uff0c\u5904\u7406\u524d\u7f00\u53ef\u4ee5$\\Theta(1)$\u8f6c\u79fb\u3002\u8f6c\u79fb\u53d8\u4e3a\uff1a\n\n$$dp[i]=min(dp[j]+(tot[i]-tot[j])*i-(sum[i]-sum[j]))~~~(j \u2264 i- m )$$\n\n\n\u603b\u590d\u6742\u5ea6$\\Theta(t^2)$\uff0c\u5f97\u520650\u3002\n\n#### \u4f18\u53162\n\u6211\u4eec\u5bf9\u4f18\u53161\u7684\u5f0f\u5b50\u7ee7\u7eed\u62c6\u5206\uff0c\u5e76\u5c06\u53ea\u4e0ei\u6709\u5173\u7684\u90e8\u5206\u62ff\u51fa\u63d0\u51fa\u6765\uff0c\u5f97\u5230\uff1a\n\n$$dp[i]=min(dp[j]+tot[j]*i+sum[j]))+tot[i]*i-sum[i]~~~(j \u2264 i- m )$$\n\n\u719f\u6089\u7684\u540c\u5b66\u53ef\u80fd\u4f1a\u770b\u51fa\uff0c\u8fd9\u5c31\u662f\u4e00\u9053\u659c\u7387\u4f18\u5316\u7684\u677f\u9898\u4e86\u3002\n\n\u8f6c\u79fb\u53ea\u4e0e$dp[j]+tot[j]*i+sum[j]$\u6709\u5173\uff0c\u6211\u4eec\u8003\u8651\u4e24\u4e2a\u51b3\u7b56\u70b9$u,v$\uff0c\u4e14$u$\u4f18\u4e8e$v$\uff0c\u5373\uff1a\n\n$$dp[u]+tot[u]*i+sum[u]<dp[v]+tot[v]*i+sum[v]$$\n\n\u79fb\u9879\u5f97\uff1a\n\n$$dp[u]-dp[v]+sum[u]-sum[v]<(sum[v]-sum[u])*i$$\n\n\u5f53$u<v$\u65f6\uff0c$sum[u]<sum[v]$\u3002\n\t\n$$\\frac{dp[u]-dp[v]+sum[u]-sum[v]}{sum[v]-sum[u]}<i$$\n\n\u5f53$u>v$\u65f6\uff0c$sum[u]>sum[v]$\u3002\n\t\n$$\\frac{dp[u]-dp[v]+sum[u]-sum[v]}{sum[v]-sum[u]}>i$$\n\n\u4ee4$x_i=sum[i],y_i=dp[i]+sum[i]$\uff0c\u5219\u539f\u5f0f\u53d8\u4e3a\uff1a\n\n$$\\frac{y_u-y_v}{x_u-x_v}<i$$\n\u6216\n$$\\frac{y_u-y_v}{x_u-x_v}>i$$\n\n\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u7ef4\u62a4\u659c\u7387\uff0c\u53ef\u4ee5\u8bc1\u660e\uff0c\u4e00\u5b9a\u662f\u4e00\u4e2a\u4e0b\u51f8\u5305\uff08\u5373\u5355\u8c03\u9012\u589e\uff09\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u4e00\u4e0b\u7f51\u4e0a\u659c\u7387\u4f18\u5316\u3002\n\n\u6700\u540e\uff0c\u8f6c\u79fb$\\Theta(1)$\u5b9e\u73b0\uff0c\u603b\u590d\u6742\u5ea6$\\Theta(t)$,100\u5206\u3002\n\n\u9644\u4e0a\u4ee3\u7801\uff1a\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\nusing namespace std;\n\nconst int MAXN = 500;\nconst int MAXT = 4000000;\nint n,m,x , Max_t;\nint tot[ MAXT + 5 ] , sum[ MAXT + 5 ] , dp[ MAXT + 5 ];\nint head = 1 , tail = 0;\nint Queue[ MAXT + 5 ];\n\ndouble delta_x( int u , int v ) {\n\treturn tot[ v ] - tot[ u ] == 0 ? 1e-9 : tot[ v ] - tot[ u ];\n}\ndouble delta_y( int u , int v ) {\n\treturn ( dp[ v ] + sum[ v ] ) - ( dp[ u ] + sum[ u ] );\n}\ndouble Slope( int u , int v ) {\n\treturn delta_y( u , v ) / delta_x( u , v );\n}\n\nint main( ) {\n\tscanf(\"%d %d\",&n,&m);\n\tfor( int i = 1 ; i <= n ; i ++ ) {\n\t\tscanf(\"%d\",&x);\n\t\tMax_t = max( Max_t , x );\n\t\ttot[ x ] ++ , sum[ x ] += x;\n\t}\n\tfor( int i = 1 ; i <= Max_t + m - 1 ; i ++ ) {\n\t\ttot[ i ] += tot[ i - 1 ];\n\t\tsum[ i ] += sum[ i - 1 ];\n\t}\n\t\n\tfor( int i = 0 ; i <= Max_t + m - 1 ; i ++ ) {\n\t\tif( i >= m ) {\n\t\t\twhile( head < tail && Slope( Queue[ tail - 1 ] , Queue[ tail ] ) > Slope( Queue[ tail ] , i - m ) )\n\t\t\t\ttail --;\n\t\t\tQueue[ ++ tail ] = i - m;\n\t\t}\n\t\twhile( head < tail && Slope( Queue[ head ] , Queue[ head + 1 ] ) <= i )\n\t\t\thead ++;\n\t\tdp[ i ] = tot[ i ] * i - sum[ i ];\n\t\tif( head <= tail ) dp[ i ] = min( dp[ i ] , dp[ Queue[ head ] ] + ( tot[ i ] - tot[ Queue[ head ] ] ) * i - sum[ i ] + sum[ Queue[ head ] ] );\n\t}\n\tint Ans = 0x3f3f3f3f;\n\tfor( int i = Max_t ; i <= Max_t + m - 1 ; i ++ )\n\t\tAns = min( Ans , dp[ i ] );\n\tprintf(\"%d\",Ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1564234371,
        "uid": 123802,
        "name": "chihik",
        "ccfLevel": 0,
        "title": "P5017 \u6446\u6e21\u8f66"
    },
    {
        "content": "\u6b64\u9898\u679a\u4e3e\u53d1\u8f66\u7684\u65f6\u95f4$t$\uff0c\u53ef\u5f97\u72b6\u6001\u8f6c\u4e49\u65b9\u7a0b$f_i=f_j+i*(s_i-s_j)$\n\n\u5176\u4e2d$c_i$\u8868\u793a\u7b2c$i$\u4e2a\u65f6\u523b\u4e58\u8f66\u4eba\u7684\u4e2a\u6570\uff0c$s_i=\\sum{c_i}$\n\n\u6700\u540e\u7b54\u6848\u5373\u4e3a$f_n-\\sum{s_i*i}$\n\n\u65f6\u95f4\u590d\u6742\u5ea6$\\mathcal{O}(max(t_i)^2)$\n\n\u663e\u7136\u8d85\u65f6\u3002\u7136\u800c\u8fd9\u79cd\u5f0f\u5b50\u4e0d\u96be\u60f3\u5230\u659c\u7387\u4f18\u5316\u3002\n\n\u4ee4$j_1 < j_2$\uff0c\u4e14$j_2$\u7684\u8f6c\u79fb\u6bd4$j_1$\u4f18\uff0c\n\n\u5316\u5f97\u5f0f\u5b50$$i< \\frac{f_{j_2}-f_{j_1}}{s_{j2}-s_{j1}}$$\n\n\u7136\u540e\u5c31\u53ef\u4ee5\u6109\u5feb\u7684\u4f18\u5316\u5566\u3002$n,m$\u591a\u5927\u8ddf\u6211\u6709\u4ec0\u4e48\u5173\u7cfb\u5462\uff1f\n\n\u5982\u679c\u6539\u6210$n,m \\leq 200,000$,\u90a3\u4e48\u5c31\u6709\u63d0\u9ad8T3\u5de6\u53f3\u96be\u5ea6\u4e86\uff0c\u53ef\u4ee5\u7528\u659c\u7387\u4f18\u5316\u3002\u6b64\u9898\u5f53\u4f5c\u6a21\u677f\u9898\u76ee\u4e0d\u9519\u3002\n\n\u4ee3\u7801\u6846\u67b6\n\n\u8bfb\u5165\uff1a\n```cpp\n    scanf(\"%d%d\", &n, &m);\n    for (RI i = 1; i <= n; ++i) {\n        scanf(\"%d\", &x);\n        c[x]++;\n        mx = max(x, mx);\n    }\n```\n\n\u8ba1\u7b97s\u4ee5\u53ca\u6700\u540e\u8981\u51cf\u53bb\u7684\u4e1c\u897f\n\n```cpp\n\tfor (int i = 1; i <= mx; ++i) {\n    \ts[i] = s[i - 1] + c[i];\n        res += c[i] * i;//\u6700\u540e\u5f97\u51cf\u53bbres\n    }\n```\n\n\u659c\u7387\u4f18\u5316\n\n```cpp\n\tf[0] = 0;\n    que[h = t = 1] = 0;\n    for (RI i = 1; i <= mx; ++i) {\n        while //\u8fd9\u4e2awhile\u6211\u4e0d\u6253\u4e86\n        f[i] = f[que[h]] + i * (s[i] - s[que[h]]);//\u8ba1\u7b97f[i]\n        que[++t] = i;//\u5165\u961f\n        while //\u8fd9\u4e2awhile\u6211\u4e5f\u4e0d\u6253\u4e86\n    }\n```",
        "postTime": 1542373959,
        "uid": 37084,
        "name": "Yemaster",
        "ccfLevel": 7,
        "title": "[NOIP2018]\u6446\u6e21\u8f66"
    },
    {
        "content": "pascal\u9898\u89e3\u597d\u5c11\u2026\u2026\n\n\u8fd9\u9053\u9898\u76ee\u5728\u8003\u573a\u4e0a\u7684\u65f6\u5019\uff0c\u6211\u7b2c\u4e00\u773c\u770b\u5230\u5c31\u89c9\u5f97\u662f\u52a8\u6001\u89c4\u5212\uff0c\u4f46\u662f\u5c31\u662f\u6ca1\u6709\u60f3\u51faDP\u65b9\u7a0b\uff0c\u6700\u540eNOIP\u5d29\u4e86\u2026\u2026\n\n\u4e0d\u8fc7\uff0c\u8003\u5b8c\u540e\uff0c\u6211\u53d1\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a\n\n\u5bf9\u4e8e50%\u7684\u6570\u636e\uff0cn\u2264500\uff0cm\u2264100\uff0c0\u2264ti\u226410^4\u3002\n\n\u5bf9\u4e8e100%\u7684\u6570\u636e\uff0cn\u2264500\uff0cm\u2264100\uff0c0\u2264ti\u22644*10^6\u3002\n\n\u53ea\u6709ti\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u8fd9\u9053\u9898\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u548cti\u65e0\u5173\uff0c\u90a3\u4e48\u6253\u51fa\u4e8650\u5206\u4ee3\u7801\u5c31\u76f8\u5f53\u4e8e100\u5206\u2026\u2026\n\n\u8fd9\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u4e00\u5b9a\u548cti\u6709\u5173\u3002\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u5feb\u5f97\u51fa\u8fd9\u6837\u4e00\u4e2aDP\u65b9\u7a0b\uff1a\n\nf[k]:=min(f[k-j]+s)\n\n\u5176\u4e2d\uff0cf[k]\u8868\u793a\u5728k\u65f6\u95f4\u5185\uff0c\u5728\u7b2ck\u65f6\u95f4\u53d1\u8f66\uff0c\u6240\u4ea7\u751f\u7684\u6700\u5c0f\u7b49\u5f85\u65f6\u95f4\u3002j\u5728m\u52302m\u4e4b\u95f4\uff0c\u56e0\u4e3a\u5982\u679c\u6211\u4eec\u5728\u4e4b\u524d\u8d85\u8fc72m\u65f6\u95f4\u53d1\u8f66\uff0c\u4e0d\u59a8\u5728k-m\u5230k-2m\u4e4b\u95f4\u53d1\u8f66\uff0c\u8fd9\u6837ti\u5728k-2m\u4ee5\u5916\u7684\u4eba\u5750\u90a3\u6b21\u8f66\uff0c\u7b49\u5f85\u65f6\u95f4\u660e\u663e\u66f4\u77ed\u3002\u800c\u4e00\u6b21\u8f66\u8981m\u65f6\u95f4\u624d\u80fd\u591f\u56de\u6765\uff0c\u6240\u4ee5\u662fm\u52302m\u3002\u90a3\u4e48\uff0cs\u5c31\u662fti\u5728k-j+1\u5230k\u4e4b\u95f4\u7684\u6240\u6709\u4eba\u5750\u8fd9\u6b21\u8f66\u9020\u6210\u7684\u7b49\u5f85\u65f6\u95f4\u3002\u6211\u4eec\u53ef\u4ee5\u5148\u6392\u5e8f\u518d\u67e5\u627e\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(max(ti)nm)\uff0c\u660e\u663e\u662f\u8d85\u65f6\u7684\uff0c\u4ee5\u4e0b\u6709\u51e0\u4e2a\u4f18\u5316\uff1a\n\n1\u3001\u524d\u7f00\u548c\n\n\u65e2\u7136\u662f\u5904\u7406k-j+1\u5230k\u4e4b\u95f4\u7684\u7b49\u5f85\u65f6\u95f4\uff0c\u5bf9\u4e8e\u6bcf\u4e2ati\uff0c\u7b49\u5f85\u65f6\u95f4\u4e3ak-ti\uff0cs\u5c31\u662f\uff1ak*(r-l+1)-l\u5230r\u4e4b\u95f4\u6240\u6709ti\u7684\u548c\u3002\u5176\u4e2d\u5728[l,r]\u533a\u95f4\u5185\u6240\u6709ti\u90fd\u662f\u5728k-j+1\u5230k\u4e4b\u95f4\u7684\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u7528\u524d\u7f00\u548c\u5904\u7406ti\uff08\u9700\u8981\u6392\u5e8f\uff0c\u8fd9\u6837\u624d\u80fd\u4f7f\u533a\u95f4\u8fde\u7eed\uff09\uff0cO(1)\u5373\u53ef\u5904\u7406\u51fas\u3002\n\n2\u3001\u4e8c\u5206\n\n\u5982\u679c\u6309\u7167\u666e\u901a\u65b9\u6cd5\u627e\u5230l\uff0cr\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n)\uff0c\u592a\u6162\uff0c\u4f46\u662f\uff0c\u6211\u4eec\u5df2\u7ecf\u5bf9ti\u8fdb\u884c\u4e86\u6392\u5e8f\uff0c\u6b64\u65f6\u6570\u636e\u5448\u73b0\u5355\u8c03\u6027\uff0c\u8fdb\u884c\u4e8c\u5206\u67e5\u627e\u5373\u53ef\u627e\u5230l\uff0cr\u7684\u4f4d\u7f6e\u3002\u65f6\u95f4\u590d\u6742\u5ea6O(log n)\u3002\n\n3\u3001\u79bb\u6563\u5316\n\n\u8fd9\u662f\u6700\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u867d\u7136\u6709\u524d\u9762\u8fd9\u4e48\u591a\u7684\u4f18\u5316\uff0c\u4f46\u662fmax(ti)\u592a\u5927\uff0c\u5373\u4f7f\u662f2s\u4e5f\u4f1a\u8d85\u65f6\uff0c\u4f46\u662f\uff0c\u5728\u6392\u5e8f\u4ee5\u540e\uff0c\u6211\u4eec\u8003\u8651\u76f8\u90bb\u7684\u4e24\u4e2a\u4eba\uff0c\u5982\u679c\u4ed6\u4eec\u7684ti\u76f8\u5dee\u8d85\u8fc72m\uff0c\u5047\u8bbe\u6709\u4e00\u73ed\u6b21\u8f66\u5728\u4ed6\u4eec\u4fe9\u7684\u7b49\u5f85\u65f6\u95f4\u4e4b\u95f4\u51fa\u53d1\uff0c\u56e0\u4e3a\u8981\u6709\u6700\u77ed\u7b49\u5f85\u65f6\u95f4\uff0c\u6240\u4ee5\u8fd9\u73ed\u8f66\u80af\u5b9a\u4f1a\u5728\u524d\u4e00\u4e2a\u4eba\u5230\u8fbe\u540em\u65f6\u95f4\u4e4b\u524d\u51fa\u53d1\uff08\u4e0d\u7136\uff0c\u5c31\u50cf\u4e0a\u9762\u5206\u6790\u7684\u90a3\u6837\uff0c\u4e0d\u662f\u6700\u77ed\u7b49\u5f85\u65f6\u95f4\uff09\uff0c\u4e5f\u5c31\u4f1a\u540e\u4e00\u4e2a\u4eba\u6765\u7b49\u8f66\u4e4b\u524d\u56de\u6765\u3002\u6b64\u65f6\uff0c\u63a5\u4e0b\u6765\u7684\u8fd9\u6bb5\u65f6\u95f4\u53ea\u6709\u8f66\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u5ffd\u7565\u8fd9\u6bb5\u65f6\u95f4\u4e0d\u53bb\u5904\u7406\uff0c\u5c06\u4ed6\u4eec\u4fe9\u7b49\u5f85\u65f6\u95f4\u5dee\u503c\u8bbe\u4e3a2m\uff0c\u662f\u6ca1\u6709\u5f71\u54cd\u7684\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u5c06max(ti)\u53d8\u4e3a2nm\uff08\u6709n\u4e2a\u4eba\uff0c\u6bcf\u4e24\u4e2a\u4eba\u65f6\u95f4\u76f8\u5dee\u4e0d\u8d85\u8fc72m\uff09\u3002\n\n\u4f18\u5316\u8fc7\u540e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(n lognm^2)\u3002\n\n\u4ee5\u4e0b\u662f\u4ee3\u7801\uff1a\n\n```pascal\nuses math;\nvar a,s:array[-1..500] of longint;\n    f:array[0..200000] of longint;\n    n,m,i,j,t,minn,r:longint;\nfunction erfen(opoi,opoj:longint):longint;\nvar l,r,mid,tot1,tot2:longint;\nbegin\n  l:=1;r:=n;tot1:=0;tot2:=0;\n  while l<=r do\n  begin\n    mid:=(l+r) div 2;\n    if a[mid]>=opoi then begin tot1:=mid;r:=mid-1;end\n    else l:=mid+1;\n  end;\n  l:=1;r:=n;\n  while l<=r do\n  begin\n    mid:=(l+r) div 2;\n    if a[mid]<=opoj then begin tot2:=mid;l:=mid+1;end\n    else r:=mid-1;\n  end;\n  exit(opoj*(tot2-tot1+1)-(s[tot2]-s[tot1-1]));\nend;\nbegin\n  minn:=maxlongint;\n  readln(n,m);\n  for i:=1 to n do read(a[i]);\n  for i:=1 to n-1 do\n    for j:=i+1 to n do\n      if a[i]>a[j] then\n      begin\n        t:=a[i];a[i]:=a[j];a[j]:=t;\n      end;\n  for i:=1 to n do\n    if a[i]-a[i-1]>2*m then\n    begin\n      for j:=i+1 to n do\n        a[j]:=a[j]-a[i]+a[i-1]+2*m;\n      a[i]:=a[i-1]+2*m;\n    end;\n  fillchar(f,sizeof(f),$7f);\n  for i:=1 to n do s[i]:=s[i-1]+a[i];\n  for i:=0 to m-1 do\n  begin\n    for j:=1 to n do\n      if (a[j-1]<=i) and (a[j]>i) then\n      begin\n        r:=j;\n        break;\n      end;\n    dec(r);\n    f[i]:=r*i-s[r];\n  end;\n  for i:=m to a[n]+m do\n    for j:=m to 2*m-1 do\n      if i>=j then\n        f[i]:=min(f[i],f[i-j]+erfen(i-j+1,i));\n  //for i:=0 to a[n]+m do write(f[i],' ');writeln;\n  for i:=a[n] to a[n]+m do\n    if f[i]<minn then minn:=f[i];\n  writeln(minn);\nend.\n```\n\n\u540e\u6765\uff0c\u6211\u7ffb\u4e86\u4e00\u4e0b\u522b\u4eba\u7684\u9898\u89e3\uff0c\u53d1\u73b0\u4ed6\u4eec\u7684\u590d\u6742\u5ea6\u90fd\u662fO(nm)\u3001O(nm^2)\u7684\uff0c\u6211\u611f\u5230\u81ea\u5df1\u7684\u9898\u89e3\u597d\u5f31\u2026\u2026\n\n\u7ecf@[CMinusMinus](https://www.luogu.org/space/show?uid=136721)\u63d0\u9192\uff0c\u6211\u53d1\u73b0\u627el\u3001r\u65e0\u9700\u4e8c\u5206\u67e5\u627e\uff0c\u53ef\u4ee5O(nm)\u9884\u5904\u7406\u4e00\u4e0b\u6bcf\u4e00\u4e2a\u65f6\u95f4\u70b9\u5bf9\u5e94\u7684l\u3001r\uff0cdp\u65f6\u76f4\u63a5\u7528\u5c31\u53ef\u4ee5\u4e86\u3002\n\nnext[i]\u8868\u793a\u6765\u7b49\u5f85\u65f6\u95f4\u5c0f\u4e8ei\u7684\u6240\u6709\u4eba\u4e2d\u65f6\u95f4\u6700\u5927\u7684\u90a3\u4e00\u4e2a\u3002\n\npre[i]\u8868\u793a\u6765\u7b49\u5f85\u65f6\u95f4\u4e0d\u5927\u4e8ei\u7684\u6240\u6709\u4eba\u4e2d\u65f6\u95f4\u6700\u5927\u7684\u90a3\u4e00\u4e2a\u3002\n\n\u90a3\u4e48\uff0c\u4e0a\u8ff0tot1\u5c31\u662fnext[opoi]+1\uff0ctot2\u5c31\u662fpre[opoj]\u3002\n\n\u4e8e\u662f\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(nm^2)\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```pascal\nuses math;\nvar a,s:array[-1..500] of longint;\n    f,pre,next:array[0..100000] of longint;\n    n,m,i,j,t,minn,r:longint;\nfunction erfen(opoi,opoj:longint):longint;\nvar tot1,tot2:longint;\nbegin\n  tot1:=next[opoi]+1;\n  tot2:=pre[opoj];\n  exit(opoj*(tot2-tot1+1)-(s[tot2]-s[tot1-1]));\nend;\nbegin\n  minn:=maxlongint;\n  readln(n,m);\n  if m=1 then begin writeln(0);exit;end;\n  for i:=1 to n do read(a[i]);\n  for i:=1 to n-1 do //\u6392\u5e8f\uff0c\u7531\u4e8en\u53ea\u6709500\uff0c\u4e0d\u60f3\u6253\u5feb\u6392\u3002\n    for j:=i+1 to n do\n      if a[i]>a[j] then\n      begin\n        t:=a[i];a[i]:=a[j];a[j]:=t;\n      end;\n  for i:=1 to n do //\u79bb\u6563\u5316\n    if a[i]-a[i-1]>2*m then\n    begin\n      for j:=i+1 to n do\n        a[j]:=a[j]-a[i]+a[i-1]+2*m;\n      a[i]:=a[i-1]+2*m;\n    end;\n  fillchar(f,sizeof(f),$7f);\n  for i:=1 to n do s[i]:=s[i-1]+a[i];\n  pre[0]:=1;\n  for i:=1 to a[n]+m do //\u5904\u7406pre\u6570\u7ec4\n  begin\n    pre[i]:=pre[i-1];\n    while (pre[i]<n) and (i>=a[pre[i]+1]) do inc(pre[i]);\n  end;\n  //for i:=0 to a[n]+m do write(pre[i],' ');writeln;\n  next[0]:=0;\n  for i:=1 to a[n]+m do //\u5904\u7406next\u6570\u7ec4\n  begin\n    next[i]:=next[i-1];\n    while (next[i]<n) and (i>a[next[i]+1]) do inc(next[i]);\n  end;\n  //for i:=0 to a[n]+m do write(next[i],' ');writeln;\n  for i:=0 to m-1 do\n  begin\n    r:=pre[i];\n    f[i]:=r*i-s[r];\n  end;\n  for i:=m to a[n]+m do //dp\n    for j:=m to 2*m-1 do\n      if i>=j then\n        f[i]:=min(f[i],f[i-j]+erfen(i-j+1,i));\n  //for i:=0 to a[n]+m do write(f[i],' ');writeln;\n  for i:=a[n] to a[n]+m do\n    if f[i]<minn then minn:=f[i];\n  writeln(minn);\nend.\n```\n\n\u65f6\u95f4\u5f88\u5feb\uff0c\u5408\u8ba1236ms\uff0c\u6700\u4e0a\u9762\u7684\u89811314ms\u3002",
        "postTime": 1542250797,
        "uid": 43697,
        "name": "chenyewei_1234",
        "ccfLevel": 7,
        "title": "P5017 \u6446\u6e21\u8f66"
    },
    {
        "content": "# [P5017 \u6446\u6e21\u8f66](https://www.luogu.org/problemnew/show/P5017) 2018\u5e74NOIP\u666e\u53ca\u7ec4\u7b2c\u4e09\u9898  \n   \u770b\u8fd9\u9053\u9898\u7684\u65f6\u5019\uff0c\u6211\uff08\u76f8\u4fe1\u5927\u5bb6\u4e5f\u662f\u8fd9\u6837\uff09\u6700\u5148\u60f3\u5230\u7684\u662f\u8d2a\u5fc3\uff0c\u4f46\u662f\u4ece\u6570\u636e\u8303\u56f4\u53ef\u4ee5\u770b\u51fa\uff0c\u5982\u679c\u662f\u8d2a\u5fc3\u9898\uff0c\u6570\u636e\u8303\u56f4\u4e0d\u4f1a\u90a3\u4e48\u5c0f\uff08\u76f8\u4fe1NOIP\u4e0d\u4f1a\u548cLuogu\u6708\u8d5b\u4e00\u6837\uff0c2018 11\u6708\u6708\u8d5b \u641e\u4e2a\u51e0\u767e\u5927\u5c0f\u6570\u636e\u9a97\u6211\u4eec\u7528DP\uff0c\u7ed3\u679c\u662f\u8d2a\u5fc3\uff09\u3002\u6709\u4e9b\u4eba\u4f1a\u60f3(including me)\uff0c\u662f\u4e0d\u662f\u5728\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u80fd\u53d1\u8f66\u5462\uff1f\uff1f\uff1f\u6ca1\u60f3\u6e05\u695a\u5c31\u4e0b\u624b\u7684\u8bdd\uff0c\u5c31\u4f1a\u6d6a\u8d39\u597d\u591a\u65f6\u95f4\u3002\u4ed4\u7ec6\u60f3\u60f3\uff0c\u5f88\u5bb9\u6613\u53d1\u73b0\u4e0d\u4e00\u5b9a\u8981\u6709\u4eba\u5230\u8fbe\u65f6\u53d1\u8f66\uff0c\u6bd4\u5982\u6709\u65f6\u5019\uff0cbus\u4e00\u56de\u6765\uff0c\u6709\u4e2a\u4eba\u7b49\u4e862\u5206\u949f\uff0c\u540e\u9762\u90a3\u4e2a\u4eba\u8fd8\u6709INF(hh) min \u624d\u4f1a\u6765\uff0c\u5982\u679c\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u80fd\u53d1\u8f66\uff0c\u90a3\u4e48bus\u5c06\u5728INF min\u540e\u624d\u7b49\u5230\u4e00\u4e2a\u4eba\uff0c\u539f\u6765\u7b49\u4e862\u5206\u949f\u7684\u90a3\u4e2a\u4eba\u4e0e\u53f8\u673a\u7b49\u5f97\u82b1\u90fd\u8c22\u4e86\uff0c\u6240\u4ee5\u8fd9\u65f6\u5019\u80af\u5b9a\u662f\u4e00\u56de\u6765\u5c31\u53d1\u8f66\uff0c\u867d\u7136\u6ca1\u6709\u4eba\u521a\u597d\u5230\u8fbe\u3002   \n\u5f53\u7136\uff0c\u6211\u4eec\u5148\u6392\u5e8f\u3002\uff08DP\uff0c\u4ece\u6392\u5e8f\u505a\u8d77\uff09\u3002   \n\u6211\u4eec\u7528f[i]\u8868\u793ai min \u65f6\u53d1\u4e00\u8f86\u8f66\uff0cps[i]\u8868\u793a1 ~ i \u7684\u4eba\u6570\uff0cts[i]\u8868\u793a1 ~ i \u6240\u6709\u4eba\u5f00\u59cb\u7b49\u7684\u65f6\u95f4\u4e4b\u548c\u3002   \n\u8bbe\u4e0a\u4e00\u6b21\u53d1\u8f66\u662fjmin\u65f6\uff0c\u90a3\u4e48j min\u53ca\u4ee5\u524d\u7684\u4eba\u90fd\u5df2\u7ecf\u6eda\u7c97\u4e86\uff0c\u6211\u4eec\u8981\u6c42j + 1 ~ i\u6240\u6709\u4eba\u7b49\u5f85\u65f6\u95f4\u4e4b\u548c\u3002   \n\u7b49\u5f85\u65f6\u95f4\u4e4b\u548c\u4e3a\u03a3(i - t[k]) \u53ef\u4ee5\u7b80\u5316\u4e3a i * \u4eba\u6570 - \u03a3(t[k])\uff0c \u4eba\u6570\u3001\u03a3(t[k])\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u6765\u7ef4\u62a4\uff08\u5373\u524d\u9762\u63d0\u5230\u7684ps\u3001ts\u6570\u7ec4\uff09\u3002\n\u7136\u540e\u5c31\u53ef\u4ee5\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\u2014\u2014\n```cpp\n( 0 <= i < m ) f[i] = ps[i] * i - ts[i]\n( i > m ) f[i] = min{ f[j] + ( ps[i] - ps[j] ) * i - ( ts[i] - ts[j] ) }( 0 <= j <= i - m )\n```\n\u84dd\u9e45\uff0c\u8fd9\u6837\u7684\u590d\u6742\u5ea6\u8fbe\u5230\u4e86O(MAXT ^ 2)!!!\u8fd9\u662f\u8fdc\u8fdc\u4e0d\u884c\u7684\u3002\u6240\u4ee5\u6211\u4eec\u8981\u8fdb\u884c\u4f18\u5316~   \n## \u4f18\u5316I   \n```cpp\n\u5bf9\u4e8e\u4e24\u4e2a\u4ebaa\u3001b( ta < tb,b = a + 1) \u5982\u679c tb - ta >= 2 * m \u53ef\u4ee5\u4ece\u4e2d\u95f4\u65ad\u5f00   \n\u5982\u679c\u7528work( l, r )\u8868\u793a\u5bf9l\u3001r\u533a\u95f4\u8303\u56f4\u5185\u8fdb\u884c\u4e00\u6b21DP work( ls, ta ), ls = tb;\n```\n\u5f88\u5bb9\u6613\u89e3\u91ca\uff0c\u56e0\u4e3a\u5982\u679c\u4e24\u4e2a\u4eba\u4e4b\u95f4\u65f6\u95f4\u95f4\u9694\u4e0d\u5c0f\u4e8e2m\u7684\u8bdd\uff0c\u4ed6\u4eec\u662f\u5b8c\u5168\u53ef\u4ee5\u5206\u4e24\u8d9f\u8f66\u8d70\u7684\u3002\u56e0\u4e3aa\u6700\u8fdf\u8d70\u7684\u65f6\u95f4\u4e3ata + m - 1\uff0c\u8f66\u56de\u6765\u7684\u65f6\u95f4\u4e3ata + 2m - 1,\u5982\u679ctb >= ta + 2m - 1\uff0c\u521a\u597d\u53ef\u4ee5\u76f4\u63a5\u7c97\u53d1QAQ\u3002(\u6216\u8005\u7406\u89e3\u4e3ab\u53ef\u4ee5\u4f5c\u4e3a\u8d77\u70b9)\n## \u4f18\u5316II\n```cpp\ni - 2* m + 1 <= j <= i - m\n```\n\u4e0d\u96be\u7406\u89e3\uff0c\u6bcf\u4e24\u8d9f\u8f66\u4e4b\u95f4\u95f4\u9694\u4e0d\u4f1a\u8d85\u8fc7\u6216\u7b49\u4e8e2m\uff08\u5426\u5219\u4e2d\u95f4\u4e3a\u4ec0\u4e48\u4e0d\u518d\u6765\u4e00\u8d9f\u5462\uff1f\uff1f\uff1f\uff09   \n\u5b9e\u9645\u4e0a\uff0c\u8fd9\u5df2\u7ecf\u6ee1\u8db3\u9898\u76ee\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u8981\u6c42\uff0c\u4f46\u662f\u8fd8\u6709\u4e00\u4e2a\u4e71\u641e\u4f18\u5316\u3002(\u5728\u8003\u573a\u4e0a\u60f3\u5230\u7684)\n## \u4f18\u5316III\n```cpp\nif ps[i] == ps[i - 1] \n j = i - m\n```\n\u89e3\u91ca\u8fd9\u4e2a\u4f18\u5316\u8981\u4ece\u8d2a\u5fc3\u7684\u89d2\u5ea6\u8003\u8651\u3002   \n\u56de\u5230\u539f\u6765\u90a3\u4e2a\u95ee\u9898:\u662f\u4e0d\u662f\u5728\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u80fd\u53d1\u8f66\u5462\uff1f\uff1f\uff1f   \n\u524d\u9762\u5df2\u7ecf\u89e3\u91ca\u4e86\u7b54\u6848\u662f\u5426\u5b9a\u7684\u3002\u8fd9\u4ece\u4e00\u4e2a\u4fa7\u9762\u544a\u8bc9\u6211\u4eec\uff0c\u5982\u679c\u4e0d\u662f\u5728\u6709\u4eba\u5230\u8fbe\u65f6\u624d\u53d1\u8f66\uff0c\u80af\u5b9a\u662f\u7531\u4e8e\u8f66\u6765\u4e0d\u53ca\u56de\u6765\u3002   \n\u6240\u4ee5\uff0c\u5728\u6700\u4f18\u65b9\u6848\u4e2d\uff0c\u90a3\u8d9f\u8f66\u4e00\u5b9a\u4f1a\u5728\u521a\u597d\u56de\u6765\u65f6\u53d1\u8f66\u3002\u4e5f\u5c31\u662f\u8bf4\uff0ci min\u65f6\u8f66\u521a\u597d\u56de\u6765\uff0c\u4e0a\u4e00\u6b21\u53d1\u8f66\u662f\u5728 i - m min\u65f6\u3002   \n~~\u771f\u662f\u7384\u4e4b\u53c8\u7384\u3002~~   \n\u6700\u7ec8\u7684\u7a0b\u5e8f\u4e0d\u662f\u5728\u8003\u573a\u4e2d\u5199\u7684\uff0c\u56e0\u4e3a\u8003\u573a\u4e2d \u4f18\u5316I \u91c7\u7528\u4e86\u8def\u5f84\u538b\u7f29\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u51fa\u73b0\u4e00\u4e9b\u95ee\u9898\uff0c\u88ab\u5361\u638920\u5206\u3002   \n\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u4e5f\u662f\u5728O(nm)\u7ea7\u522b\uff0c\u4f46\u5e38\u6570\u8981\u6bd4Sooke\u5927\u4f6c\u7684\u4ee3\u7801\u5927\u4e00\u4e9b\u3002   \n\u7136\u540e\u4e0a\u4ee3\u7801\uff01\uff08\u867d\u7136\u4e0d\u662f\u6700\u597d\u7684\u89e3\uff0c\u4f4687ms\u4e5f\u51d1\u5408\u5427\u3002\uff09  \n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define MAXN 505\n#define MAXM 205\n\nint n, m, mm, ans;\nint t[MAXN], ps[MAXM * MAXN], ts[MAXM * MAXN];\nint f[MAXM * MAXN];\n\nvoid work( int l, int r ){\n    memset( ps, 0, sizeof ps ), memset( ts, 0, sizeof ts ), memset( f, 0, sizeof f );\n    for ( int i = l + 1; i <= r; ++i ){\n        t[i] -= t[l]; ps[t[i]]++; ts[t[i]] += t[i];\n    }\n    t[l] = 0; ps[0]++;\n    for ( int i = 1; i < t[r] + m; ++i ) ps[i] += ps[i - 1], ts[i] += ts[i - 1];\n    for ( int i = 1; i < t[r] + m; ++i ){\n        if ( i < m ){ f[i] = ps[i] * i - ts[i]; continue; }\n        if ( ps[i] == ps[i - 1] ){ f[i] = f[i - m] + ( ps[i] - ps[i - m] ) * i - ( ts[i] - ts[i - m] ); continue; }\n        f[i] = INT_MAX;\n        for ( int j = max( 0, i - mm + 1 ); j <= i - m; ++j ) f[i] = min( f[i], f[j] + ( ps[i] - ps[j] ) * i - ( ts[i] - ts[j] ) );\n    }\n    int cur(INT_MAX);\n    for ( int i = t[r]; i < t[r] + m; ++i ) cur = min( cur, f[i] );\n    ans += cur;    \n}\n\nint main(){\n    scanf( \"%d%d\", &n, &m ); mm = m << 1;\n    for ( int i = 1; i <= n; ++i ) scanf( \"%d\", &t[i] );\n    sort( t + 1, t + n + 1 );\n    int ls(1);\n    for ( int i = 1; i < n; ++i )\n        if ( t[i + 1] - t[i] >= mm ) work( ls, i ), ls = i + 1;\n    work( ls, n );\n    printf( \"%d\\n\", ans );\n    return 0;\n}\n```",
        "postTime": 1554784773,
        "uid": 157767,
        "name": "CJXJR",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    },
    {
        "content": "```\n//100pts 500 100 4e6\n#include<cstdio>\n#include<algorithm>\n\n#define INF 2147483647\n\nint n,m;\nint data[1024];\nint sum[1024];\nint dp[1024][128];\n\nint main()\n{\n//freopen(\"bus.in\",\"r\",stdin);\n//freopen(\"bus.out\",\"w\",stdout);\nscanf(\"%d%d\",&n,&m);\nfor(int i=1;i<=n;++i)\n    scanf(\"%d\",data+i);\nstd::sort(data+1,data+n+1);\nfor(int i=1;i<=n;++i)sum[i]=sum[i-1]+data[i];\nfor(int i=1;i<=n;++i)\n    for(int j=0;j<m;++j)\n        {\n        int now=data[i]+j;\n        if(j)dp[i][j]=dp[i][j-1];\n        else dp[i][j]=now*i-sum[i];\n        for(int last=std::max(now-2*m+1,0);last<=now-m;++last)\n            {\n            int x=std::lower_bound(data+1,data+n+1,last+1)-data-1;\n            int y=std::min(last-data[x],m-1);\n            int tmp=dp[x][y]+(i-x)*now-(sum[i]-sum[x]);\n            if(tmp<dp[i][j])dp[i][j]=tmp;\n            }\n        }\nprintf(\"%d\\n\",dp[n][m-1]);\n//fclose(stdin);\n//fclose(stdout);\nreturn 0;\n}\n```\n\u8fd9\u9053\u9898\u5e94\u8be5\u662f\u6700\u96be\u7684\u4e86\uff01\uff01\uff01~~",
        "postTime": 1544419271,
        "uid": 135852,
        "name": "tudou123",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P5017 \u3010\u6446\u6e21\u8f66\u3011"
    }
]
[
    {
        "content": "\u6b64\u9898\u7684\u5173\u952e\u70b9\uff1a\n\n1.\u72b6\u6001\u8f6c\u6362\uff1a\u7531\u4e8e\u53ea\u670901\uff0c\u5e76\u4e14\u4e8c\u8fdb\u5236\u5bf9\u5e94\u7684\u5341\u8fdb\u5236\u7684\u503c\u662f\u552f\u4e00\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u8003\u8651\u5c06\u6570\u7ec4\u4f7f\u7528\u5bf9\u5e94\u7684\u5341\u8fdb\u5236\u6765\u8fdb\u884c\u4fdd\u5b58\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5224\u91cd\u4e5f\u5f88\u5bb9\u6613\u5b9e\u73b0\u3002\uff08\u56e0\u4e3a\u6700\u5927\u7684\u6570\u662f\u4e8c\u8fdb\u523616\u4e2a1\uff0c\u4e5f\u5c31\u662f2^16-1\uff0c\u4e0d\u4f1a\u8d85\u7a7a\u95f4\uff09\n\n2.\u641c\u7d22\u7b56\u7565\uff1a\u4efb\u4f55\u4e00\u79cd\u72b6\u6001\u90fd\u9700\u8981\u4ece16\u4e2a\u4f4d\u7f6e\u4f5c\u4e3a\u8d77\u70b9\u5f00\u59cb\u8fdb\u884c\u6269\u5c55\uff0c\u6269\u5c55\u540e\u5408\u6cd5\u7684\u5b50\u72b6\u6001\u5168\u90e8\u52a0\u5165\u961f\u5217\u4e2d\uff0c\u518d\u4ece\u961f\u5217\u4e2d\u53d6\u51fa\u961f\u9996\u503c\u8fdb\u884c\u6269\u5c55\uff0c\u5f53\u7136\u540c\u6837\u9700\u8981\u628a\u8fd9\u4e2a\u961f\u9996\u503c\u4ece16\u4e2a\u4f4d\u7f6e\u5747\u8003\u8651\u4f5c\u4e3a\u8d77\u70b9\u5f00\u59cb\u6269\u5c55\uff0c\u83b7\u53d6\u5230\u7684\u6240\u6709\u5408\u6cd5\u7684\u5b50\u72b6\u6001......\n\n3.\u8bb0\u5f55\u7ed3\u679c\uff1a\u7531\u4e8e\u5224\u91cd\u7684\u539f\u56e0\uff0c\u6bcf\u4e00\u4e2a\u6570\u7684\u7236\u8282\u70b9\u5fc5\u7136\u662f\u552f\u4e00\u7684\uff0c\u56e0\u6b64\u53ef\u4ece\u7ec8\u70b9\uff08\u76ee\u6807\u72b6\u6001\uff09\u51fa\u53d1\uff0c\u5f80\u524d\u627e\u5176\u7236\u8282\u70b9\u7684\u503c\u5e76\u4fdd\u5b58\uff0c\u8bb0\u5f55\u5f53\u524d\u7684\u8282\u70b9\u5750\u6807\u548c\u7236\u8282\u70b9\u7684\u5750\u6807\uff0c\u8f93\u51fa\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u4ece\u7ec8\u70b9\u4e0d\u65ad\u5f80\u524d\u9762\u63a8\u51fa\u8def\u5f84\u3002\n\n4.\u5904\u7406\u7ed3\u679c\uff1a\u901a\u8fc7\uff083\uff09\u5904\u7406\u5f97\u5230\u7684\u7ed3\u679c\u662f\u4ece\u7ec8\u70b9\u51fa\u53d1\u7684\uff0c\u5f53\u7136\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u7684\u4ee3\u7801\u64cd\u4f5c\u5b9e\u73b0\u8f93\u51fa\u6b63\u89e3\u3002\n\n\u7ec6\u8282\u8f83\u591a\uff0c\u9700\u8981\u7ec6\u81f4\u5199\u4ee3\u7801\uff08\u8981\u6562\u4e8e\u52a8\u624b\uff09\uff0c\u4ee3\u7801\u6ce8\u91ca\u4e2d\u6709\u5173\u952e\u6b65\u9aa4\u7684\u89e3\u91ca\uff0c\u53ef\u53c2\u8003\u4ee3\u7801\u7406\u89e3\u4ee5\u4e0a\u601d\u8def\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nchar c;\nint csz,mbz,cnt,a[5][5],b[5][5],vis[65540],father[65540],res[100000][4];\nint dx[4]={-1,1,0,0},dy[4]={0,0,-1,1};\nstruct Ans{\n\tint nx,ny,ox,oy,father;\n}ans[100000];\nqueue<int>q;\n\n//\u521d\u59cb\u5316\u8f93\u5165\u8d77\u70b9\u548c\u76ee\u6807\u70b9\nvoid init(){\n\tfor(int i=1;i<=4;i++){\n\t\tfor(int j=1;j<=4;j++){\n\t\t\tcin>>c;\n   \t\t\ta[i][j]=c-'0';\n\t\t}\n\t}\n\tfor(int i=1;i<=4;i++){\n\t\tfor(int j=1;j<=4;j++){\n\t\t\tcin>>c;\n   \t\t\tb[i][j]=c-'0';\n\t\t}\n\t}\n}\n//\u83b7\u53d64*4\u6570\u7ec4\u4e8c\u8fdb\u5236\u5f97\u5230\u5341\u8fdb\u5236\u6570\nint getDeci(int a[5][5]){\n\tint comb=0,cnt=0;\n\tfor(int i=4;i>=1;i--){\n\t\tfor(int j=4;j>=1;j--){\n\t\t\tcomb+=a[i][j]*pow(2,cnt);\n\t\t\tcnt++;\n\t\t}\n\t}\n\treturn comb;\n}\n//\u6839\u636ex\u4fee\u6539a\u6570\u7ec4\u7684\u503c\nvoid updateArr(int x,int a[5][5]){\n\twhile(x){\n\t\tfor(int i=4;i>=1;i--){\n\t\t\tfor(int j=4;j>=1;j--){\n\t\t\t\ta[i][j]=x%2;\n\t\t\t\tx/=2;\n\t\t\t}\n\t\t}\n\t}\n}\n//\u5224\u65ad\u662f\u5426\u8d8a\u754c\u4e14\u7236\u5b50\u503c\u8981\u4e0d\u540c\nbool legal(int ox,int oy,int nx,int ny){\n\tif(nx>=1&&nx<=4&&ny>=1&&ny<=4&&a[ox][oy]!=a[nx][ny]) \n\t\treturn true;\n\telse    return false;\n}\nvoid bfs(){\n\tq.push(csz);//\u4ece\u521d\u59cb\u503c\u5f00\u59cb\u6269\u5c55\n\tvis[csz]=1;\n\twhile(!q.empty()){\n\t\tint exted=q.front();  //exted\u7528\u6765\u5b58\u50a8\u6bcf\u6b21\u88ab\u6269\u5c55\u7684\u6570\n\t\tupdateArr(exted,a);  //\u5c06a\u6570\u7ec4\u4fee\u6539\u4e3a\u5f53\u524d\u88ab\u6269\u5c55\u7684\u6570\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\n\t\tq.pop();\n\t\tfor(int i=1;i<=4;i++){  //\u6bcf\u4e00\u79cd\u72b6\u6001\u7684\u6570\u90fd\u8981\u5206\u522b\u4ee5\u5b83\u7684\u5341\u516d\u4e2a\u70b9\u4e3a\u8d77\u70b9\u6765\u8fdb\u884c\u6269\u5c55\n\t\t\tfor(int j=1;j<=4;j++){\n\t\t\t\tint ox=i,oy=j;\n\t\t\t\tfor(int k=0;k<4;k++){\n\t\t\t\t\tint nx=ox+dx[k],ny=oy+dy[k];\n\t\t\t\t\t //\u6807\u8bb0\u662f\u5426\u6709\u6267\u884cswap\uff0c\u4ee5\u51b3\u5b9a\u662f\u5426\u9700\u8981\u518d\u6b21\u6267\u884cswap\u8fd8\u539fa\u6570\u7ec4\u72b6\u6001\n\t\t\t\t\tint flag=0;   \n\t\t\t\t\tif(legal(ox,oy,nx,ny)){\n\t\t\t\t\t\tflag=1;\n\t\t\t\t\t\tint fdeci=getDeci(a);   //\u5f53\u524d\u88ab\u6269\u5c55\u7684\u503c\uff08\u5f53\u524d\u88ab\u6269\u5c55\u51fa\u6765\u7684\u8282\u70b9\u7684\u7236\u8282\u70b9\u7684\u503c\uff09\n\t\t\t\t\t\tswap(a[ox][oy],a[nx][ny]);\n\t\t\t\t\t\tint deci=getDeci(a);    //swap\u540e\u7684a\u6570\u7ec4\u5bf9\u5e94\u7684\u5341\u8fdb\u5236\u503c\n\t\t\t\t\t\tif(!vis[deci]){\n\t\t\t\t\t\t\tvis[deci]=1;\n\t\t\t\t\t\t\tans[deci].father=fdeci; //\u5b58\u50a8\u8def\u5f84\n\t\t\t\t\t\t\tans[deci].nx=nx,ans[deci].ny=ny;\n\t\t\t\t\t\t\tans[deci].ox=ox,ans[deci].oy=oy;\n\t\t\t\t\t\t\tfather[deci]=fdeci;\n\t\t\t\t\t\t\tq.push(deci);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(deci==mbz)   //\u6269\u5c55\u5f97\u5230\u4e86\u76ee\u6807\u8282\u70b9\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(flag)            //\u9700\u8981\u8fd8\u539fa\u6570\u7ec4\u72b6\u6001\n\t\t\t\t\t\tswap(a[ox][oy],a[nx][ny]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tinit();\n\tcsz=getDeci(a),mbz=getDeci(b);//csz\uff1a\u521d\u59cb\u503c\uff0cmbz\uff1a\u76ee\u6807\u503c\n\tbfs();\n\tfather[csz]=0;\n\twhile(father[mbz]){ //\u4ece\u76ee\u6807\u8282\u70b9\u5f80\u524d\u63a8\u8def\u5f84\u5e76\u5b58\u50a8\u5230res\u6570\u7ec4\u4e2d\n\t\tcnt++;\n\t\tres[cnt][0]=ans[mbz].ox,res[cnt][1]=ans[mbz].oy,res[cnt][2]=ans[mbz].nx,res[cnt][3]=ans[mbz].ny,\n\t\tmbz=father[mbz];\n\t}\n\tcout<<cnt<<endl;\n\tfor(int i=cnt;i>=1;i--) //\u4ece\u8d77\u70b9--->\u7ec8\u70b9\u7684\u4ea4\u6362\u8fc7\u7a0b\n\t\tcout<<res[i][0]<<res[i][1]<<res[i][2]<<res[i][3]<<endl;\n\treturn 0;\n}\n```\n\n\u4ee3\u7801\u4ec5\u4f9b\u4e00\u79cd\u601d\u8def\u53c2\u8003\uff08**\u4e0d\u8981\u6284\u88ad\uff0c\u6ca1\u6709\u4efb\u4f55\u610f\u4e49**\uff09\uff0c\u80fd\u591f\u5199\u51fa\u6765AC\u7684\u540c\u5b66\u53ef\u5c1d\u8bd5\u8fdb\u4e00\u6b65\u4f7f\u7528\u53cc\u5411bfs\u8fdb\u884c\u4f18\u5316\u3002",
        "postTime": 1546016615,
        "uid": 66124,
        "name": "Andorxor",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": " [\u554a\u54c8\uff0c\u662f\u9898\u76ee](https://www.luogu.com.cn/problem/P1225)\n\n#### \u8fd9\u9053\u9898\u7684\u5c0f\u7ec6\u8282\u591a\u7684\u4e00\u6279\uff0c\u4e14\u5f85\u6211\u6162\u6162\u9053\u6765\u3002\n\n\u6bd5\u7adf\u6211\u5077\u5077\u5728\u82f1\u8bed\u65e9\u8bfb\u4e0a\u60f3\u7740\u6211\u53ef\u80fd\u51fa\u9519\u7684\u539f\u56e0\u3002\n\n-------\n#### \u5148\u8bf4\u4e00\u4e0b\u5927\u601d\u8def\u5427\uff0c\u5f88\u663e\u7136\u4e5f\u5f88\u7ecf\u5178\u7684\u95ee\u9898\u3002\u5c06\u7ed9\u51fa\u76844*4\u7684$01$\u77e9\u9635\u8f6c\u6210\u4e8c\u8fdb\u5236\u7684\u6574\u5f62\uff0c\u8dd1$bfs$\u3002\n\n- \u5173\u4e8e\u4e8c\u8fdb\u5236\u8f6c\u6362\u7684\u5c0f\u7ec6\u8282\u548c\u5177\u4f53\u64cd\u4f5c\uff1a\n\n1.~~\u4e00\u5f00\u59cb\u6211$re$\u4e86\u4e00\u7247~~\n\t\n   \t\u5b58\u4e00\u4e2a\u4e34\u65f6\u64cd\u4f5c\u7684\u6570\u7ec4b\uff0c\u4e8c\u8fdb\u5236\u8f6c\u6362\u6210\u4e3ab\uff1b\n    \n    \u518d\u7531b\u6570\u7ec4\u8f6c\u6210\u6574\u5f62\uff0c\u5c31\u8fd9\u6837\u8df3\u6765\u8df3\u53bb\uff0c\u8df3\u6765\u8df3\u53bb\u3002\n    \n   ```cpp\nvoid Exc(int x) {\n\tmemset(b,0,sizeof(b)  //\u6211re\u7684\u539f\u56e0\uff0c\u5fd8\u8bb0\u5c06b\u6570\u7ec4\u6e050\n\tint cnt1=n,cnt2=n;\n\twhile(x) {\n\t\tif(x&1)\tb[cnt2][cnt1--]='1';\n\t\telse\tb[cnt2][cnt1--]='0';\n\t\tif(cnt1==0)\t{\n\t\t\tcnt1=n;\n\t\t\tcnt2--;\n\t\t}\n\t\tx>>=1;\n\t}\n\treturn ;\n}\nint Bine() {\n\tint tmp=0; int cnt=0;\n\tfor(int i=n;i>=1;i--)\n\t\tfor(int j=n;j>=1;j--)\t{\n\t\t\tif(b[i][j]=='1') tmp+=1<<cnt;\n\t\t\tcnt++;\n\t\t}\t\n\treturn tmp;\n}\n\n```\n\n \u4e0d\u8fc7\u4e00\u5b9a\u8981\u5c06b\u6570\u7ec4\u6e050\u554a\uff01\uff01\n\n\u4e0d\u8fc7\u4e00\u5b9a\u8981\u6ce8\u610f\u987a\u5e8f\u5230\u5e95\u662f\u6b63\u5e8f\u8fd8\u662f\u5012\u5e8fa\uff01\uff01\n\n\n- \u5173\u4e8e$bfs$\u7684\u5177\u4f53\u5b9e\u73b0\uff1a\n\n\u5c06\u62d3\u5c55\u5230\u7684\u65b0\u7684\u5143\u7d20\u52a0\u5165\u5230\u961f\u4e2d\u5373\u53ef\n\n~~\u5624\u5624\u5624\uff0cA\u6389\u540e\u624d\u53d1\u73b0\u539f\u6765\u4e0a\u4e0b\u548c\u5de6\u53f3\u53ea\u9700\u8981\u5206\u522b\u6253\u4e00\u4e2a\u5c31\u53ef\u4ee5\u4e86~~\n\n\u56e0\u4e3a\u62d3\u5c55\u679a\u4e3e\u6bcf\u4e2a\u70b9\u65f6\uff0c\u4e0a\u9762\u7684\u70b9\u5411\u4e0b\u6362\u548c\u4e0b\u9762\u7684\u70b9\u5411\u4e0a\u6362\u662f\u4e00\u6837\u7684\uff0c\u540c\u7406\u5de6\u53f3\n\n1.\u64cd\u4f5c\u4e0d\u5728\u9610\u91ca\n\n2.\u7ef4\u62a4\u7684\u5947\u5947\u602a\u602a\u4e1c\u897f\n\n\t\t\u81ea\u7136\u800c\u7136\u5f97\u6709\u6b64\u65f6\u7684\u503c\n        \n      \t\u81ea\u7136\u800c\u7136\u4f60\u8fd8\u8981\u8bb0\u5f55\u65b9\u5f0f\uff1a\u7531\u8c01\u62d3\u5c55\u800c\u6765\uff0c\u5982\u4f55\u62d3\u5c55\u800c\u6765\n  \n  \t\t\u81ea\u7136\u800c\u7136\u8fd8\u8981\u6709\u62d3\u5c55\u4e86\u51e0\u6b65\n      \n ```cpp\n\t     q[++tail][0]=p;\n\t\tq[tail][1]=q[head][1]+1;\n\t\tq[tail][2]=head;\n```\n3.\u8840\u7684\u6559\u8bad\uff08\u5927\u6982\u4e5d\u5341\u5427\uff0c~~\u6bd5\u7adf\u6211\u4e00\u5f00\u59cb\u662f\u4e5d\u5341~~\uff09\uff1a\u4e00\u5b9a\u8981\u5148\u5165\u961f\u518dJudge\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u5c11\u4e00\u4e2a\u8def\u5f84\u3002\n\n\n\u4ee3\u7801\u5197\u957f,\u4e0d\u5728\u5c55\u5f00\n\n-\u5173\u4e8e\u8def\u5f84\u7684\u8f93\u51fa\uff1a\n\n\n\u6211\u4eec\u5df2\u7ecf\u5b58\u4e0b\u4e86\u961f\u5c3e\u6240\u5bf9\u5e94\u7684\u961f\u9996\uff0c\n\n\u9012\u5f52\u8f93\u51fa\u5c31\u597d\u3002\n\n```cpp\nvoid Print(int x) {\n\tif(!q[x][2])\treturn ;\n\tPrint(q[x][2]);\n\tprintf(\"%d%d%d%d\\n\",e[x].x,e[x].y,e[x].xx,e[x].yy);\n```\n\n### \u4e00\u4e9b\u5947\u5947\u602a\u602a\u7684\u7ec6\u8282\n\u8bb0\u5f97\u7279\u5224\uff1b\n\n\u8bb0\u5f97b\u6570\u7ec4\u7684\u6e050\uff1b\n\n\u8bb0\u5f97\u770b\u6e05\u64cd\u4f5c\u7684\u5750\u6807+1\u6216\u8005\u662f-1\uff1b\n\n\u8bb0\u5f97\u5148\u5165\u961f\u518dJudge\uff1b\n\n\u8bb0\u5f97\u8fb9\u754c\u5c0f\u5fc3\u4e00\u70b9\u5904\u7406\uff1b\n\n\u597d\u5566\u597d\u5566\uff0c\u7ed9\u4f60\u4eec\u4ee3\u7801\uff1b\n\n~~\u6700\u540e\u5728\u5077\u5077\u7ed9\u4f60\u4eec\u4e00\u4e2a\u5c0f\u5c0f\u7684\u624b\u73a9\u6570\u636e~~\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\n#include<queue>\n#include<map>\n#define N 4000010\nusing namespace std;\nint goal,a,head,tail;\nchar G[5][5],A[5][5],b[5][5];\nint q[N][4];\nstruct  zy {\n\tint x,y;\n\tint xx,yy;\n}e[N];\nconst int n=4;\nmap<int ,bool > v;\nvoid Exc(int x) {\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\tb[i][j]='0';\n\tint cnt1=n,cnt2=n;\n\twhile(x) {\n\t\tif(x&1)\tb[cnt2][cnt1--]='1';\n\t\telse\tb[cnt2][cnt1--]='0';\n\t\tif(cnt1==0)\t{\n\t\t\tcnt1=n;\n\t\t\tcnt2--;\n\t\t}\n\t\tx>>=1;\n\t}\n\treturn ;\n}\nint Bine() {\n\tint tmp=0; int cnt=0;\n\tfor(int i=n;i>=1;i--)\n\t\tfor(int j=n;j>=1;j--)\t{\n\t\t\tif(b[i][j]=='1') tmp+=1<<cnt;\n\t\t\tcnt++;\n\t\t}\t\n\treturn tmp;\n}\nvoid Print(int x) {\n\tif(!q[x][2])\treturn ;\n\tPrint(q[x][2]);\n\tprintf(\"%d%d%d%d\\n\",e[x].x,e[x].y,e[x].xx,e[x].yy);\n}\nvoid Judge(int x) {\n\tif(x==goal)\t {\n\t\tprintf(\"%d\\n\",q[tail][1]);\n\t\tPrint(tail);\n\t\texit(0);\n\t}\n\treturn ;\n}\nvoid Up() {\n\tfor(int i=2;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tswap(b[i][j],b[i-1][j]);\n\t\t\tint p=Bine();\n\t\t\tswap(b[i][j],b[i-1][j]);\n\t\t\tif(v[p])\tcontinue;\n\t\t\tq[++tail][0]=p;\t\n\t\t\tq[tail][1]=q[head][1]+1;\n\t\t\tq[tail][2]=head;\n\t\t\te[tail].x=i; e[tail].y=j;\n\t\t\te[tail].xx=i-1; e[tail].yy=j;\n\t\t\tJudge(p);\n\t\t\tv[p]=1;\n\t\t}\n}\nvoid Down() {\n\tfor(int i=1;i<=n-1;i++)\n\t\tfor(int j=1;j<=n;j++)\n\t\t{\n\t\t\tswap(b[i][j],b[i+1][j]);\n\t\t\tint p=Bine();\n\t\t\tswap(b[i][j],b[i+1][j]);\n\t\t\tif(v[p])\tcontinue;\n\t\t\tq[++tail][0]=p;\n\t\t\tq[tail][1]=q[head][1]+1;\n\t\t\tq[tail][2]=head;\n\t\t\te[tail].x=i; e[tail].y=j;\n\t\t\te[tail].xx=i+1; e[tail].yy=j;\n\t\t\tJudge(p);\n\t\t\tv[p]=1;\n\t\t}\n}\nvoid Left() {\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=2;j<=n;j++)\n\t\t{\n\t\t\tswap(b[i][j],b[i][j-1]);\n\t\t\tint p=Bine();\n\t\t\tswap(b[i][j],b[i][j-1]);\n\t\t\tif(v[p])\tcontinue;\n\t\t\tq[++tail][0]=p;\n\t\t\tq[tail][1]=q[head][1]+1;\n\t\t\tq[tail][2]=head;\n\t\t\te[tail].x=i; e[tail].y=j;\n\t\t\te[tail].xx=i; e[tail].yy=j-1;\n\t\t\tJudge(p);\n\t\t\tv[p]=1;\n\t\t}\n}\nvoid Right() {\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n-1;j++)\n\t\t{\n\t\t\tswap(b[i][j],b[i][j+1]);\n\t\t\tint p=Bine();\n\t\t\tswap(b[i][j],b[i][j+1]);\n\t\t\tif(v[p])\tcontinue;\n\t\t\tq[++tail][0]=p;\n\t\t\tq[tail][1]=q[head][1]+1;\n\t\t\tq[tail][2]=head;\n\t\t\te[tail].x=i; e[tail].y=j;\n\t\t\te[tail].xx=i; e[tail].yy=j+1;\n\t\t\tJudge(p);\n\t\t\tv[p]=1;\n\t\t}\n}\nvoid Bfs(int x)\n{\n\tq[++tail][0]=x;\n\tv[x]=1;\n\tJudge(x);\n\twhile(head<tail)\n\t{\n\t\tint now=q[++head][0];\n\t\tExc(now); \n\t\tJudge(now);\n\t\tUp();Down();Left();Right();\n\t}\n}\nint main()\n{\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\tcin>>A[i][j],b[i][j]=A[i][j];\n\ta=Bine();\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=n;j++)\tcin>>G[i][j],b[i][j]=G[i][j];\n\tgoal=Bine();\n\tBfs(a);\n\treturn 0;\n}\n/*\n0000\n0001\n0100\n0001\n1000\n0000\n0011\n\n*/\n\n\n```\n\n### \u9898\u89e3\u4e0d\u6613\uff0c\u5982\u6709\u4e0d\u59a5\u4e4b\u5904\u6216\u662f\u4e0d\u660e\u767d\u7684\uff0c\u968f\u65f6\u4e5f\u6b22\u8fce\u63d0\u9192\u6211\u3002\n\n[\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.com.cn/problem/P4289)",
        "postTime": 1609589672,
        "uid": 233816,
        "name": "_zy_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u601d\u8def\uff1a\u5e7f\u641c+map\u53bb\u91cd\uff0cmap\u91cc\u5b58\u8fc7\u7a0b\uff08\u5176\u5b9e\u53ef\u4ee5\u4e0d\u7528\u8fd9\u6837\uff0c~~\u6211\u53ea\u662f\u4e3a\u4e86\u5077\u61d2\uff0c\u4e0d\u60f3\u5f80\u56de\u63a8~~\uff09\u5c31\u8fd9\u6837\u4e86\uff0c\u5176\u4f59\u7684\u770b\u6ce8\u91ca\u3002\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nqueue<string>q;\nstring a,b;\nmap<string,string>m;\nvoid yy(int i,string ss){//\u4e0a\u4e0b\u6362\n\tstring sss=ss;\n\tchar c;\n\tc=ss[i];\n\tss[i]=ss[i+4];\n\tss[i+4]=c;\n\tif(m.count(ss)==0){\n\t\tq.push(ss);\n\t\tchar aa=49+i/4,bb=49+i%4,cc=50+i/4,dd=49+i%4;//\u8fd9\u91cc\u7684\u6a2a\u7ad6\u5750\u6807\u90fd\u662f\u4ece0\u5f00\u59cb\u7684\uff0c\u5b58\u8fdb\u53bb\u8981\u52a01\n\t\tm[ss]=m[sss]+aa+bb+cc+dd;\n\t}\n\treturn;\n}\nvoid xx(int i,string ss){//\u5de6\u53f3\u6362\n\tstring sss=ss;\n\tchar c;\n\tc=ss[i];\n\tss[i]=ss[i+1];\n\tss[i+1]=c;\n\tif(m.count(ss)==0){\n\t\tq.push(ss);\n\t\tchar aa=49+i/4,bb=49+i%4,cc=49+i/4,dd=50+i%4;\n\t\tm[ss]=m[sss]+aa+bb+cc+dd;\n\t}\n\treturn;\n}\n//\u8003\u8651\u56db\u4e2a\u65b9\u5411\u4f1a\u91cd\u590d\uff0c\u6240\u4ee5\u53ea\u9700\u8003\u8651\u4e24\u4e2a\u65b9\u5411\uff0c\u8fd9\u91cc\u662f\u53f3\u548c\u4e0b\u3002\nvoid bfs(){\n\tq.push(a);\n\tm[a]=\"\";\n\twhile(q.empty()==false){\n\t\tstring ss=q.front();\n\t\tfor(int i=0;i<16;i++){\n\t\t\tif(i<12){//\u4e0d\u662f\u6700\u540e\u4e00\u884c\u5c31\u548c\u4e0b\u9762\u6362\n\t\t\t\tyy(i,ss);\n\t\t\t}\n\t\t\tif(i%4!=3){//\u4e0d\u662f\u6700\u540e\u4e00\u5217\u5c31\u548c\u53f3\u8fb9\u6362\n\t\t\t\txx(i,ss);\t\n\t\t\t}\n\t\t}\n\t\tif(m.count(b)!=0){//\u51fa\u73b0\u76ee\u6807\u5e8f\u5217\n\t\t\tcout<<m[b].size()/4<<endl;\n\t\t\tfor(int j=0;j<m[b].size();j++){\n\t\t\t\tcout<<m[b][j];\n\t\t\t\tif(j%4==3)cout<<endl;//\u6bcf\u8f93\u51fa\u56db\u4e2a\u6362\u4e00\u884c\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tq.pop();\n\t}\n\treturn;\n}\nint main(){\n\tfor(int i=0;i<16;i++){\n\t\tchar c;\n\t\tcin>>c;\n\t\ta+=c;\n\t}\n\tfor(int i=0;i<16;i++){\n\t\tchar c;\n\t\tcin>>c;\n\t\tb+=c;\n\t}\n\tbfs();\n\treturn 0;\n}\n```",
        "postTime": 1546172596,
        "uid": 102754,
        "name": "getchar123",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "%%\u7ba1\u7406\u5458\u5927\u4f6c\u52a0\u4e86SPJ\n\n\u6211\u8fd8\u662f\u6765\u5199\u4e00\u4e2a\u9898\u89e3\u5427\n\n\uff08\u6709\u4e86SPJ\u5c31\u4e0d\u7528\u5728\u610f\u987a\u5e8f\u4e86\uff09\n\n\u5927\u81f4\u7684\u601d\u8def\uff1a\u72b6\u538b+BFS\n\nBFS\u662f\u5f88\u663e\u7136\u7684(\u8981\u6c42\u6700\u77ed\u7684\u53d8\u5e7b)\n\n\u4f7f\u7528\u72b6\u538b\u4e00\u662f\u63d0\u901f\uff0c\u4e8c\u662f\u8282\u7ea6\u5185\u5b58\n\n\u72b6\u538b\u80fd\u591f\u628aO(16)\u7684\u5224\u91cd\u4f18\u5316\u5230O\uff081\uff09\n\n\u56e0\u6b64\u72b6\u538b\u662f\u5f88\u91cd\u8981\u7684\u4e00\u70b9\u3002\n\n\u5269\u4e0b\u7684\u5177\u4f53\u5b9e\u73b0\u6709\u597d\u51e0\u4e2a\u7ec6\u8282\n\n\u6211\u5c31\u76f4\u63a5\u653e\u4ee3\u7801\u5427\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<cmath>\n#include<queue>\n#include<algorithm>\nusing namespace std;\nbool vis[(1<<16)];//\u72b6\u6001\nstruct Node\n{\n     int t;//\u72b6\u6001\n     int st;//\u6b65\u6570\n     int ff;//\u7236\u8282\u70b9 \n     int pos;//\u4ea4\u6362\u7684\u4f4d\u7f6e\n     int way;//\u4ea4\u6362\u7684\u65b9\u5f0f \n};\nint Beg,End;\nint h,t,s;\nNode Q[(1<<20)];//\u624b\u5199\u961f\u5217 \ninline int read()\n{\n    //register int x=0,t=1;\n    register char ch=getchar();\n    while(ch<'0'||ch>'9')ch=getchar();\n    //if(ch=='-'){t=-1;ch=getchar();}\n    //while(ch>='0'&&ch<='9'){x=x*10+ch-48;ch=getchar();}\n    return ch-48;\n}\nint change(int s,int Pos,int sw)\n//\u4ea4\u6362\uff0cs\u8868\u793a\u5f53\u524d\u72b6\u6001,Pos\u8868\u793a\u4f4d\u7f6e\uff0csw\u8868\u793a\u79fb\u52a8\u7684\u4f4d\u7f6e\n//\u5176\u4e2d1\u5411\u53f3\uff0c-1\u5411\u5de6\uff0c-4\u5411\u4e0a\uff0c4\u5411\u4e0b \n{\n         int a=bool(s&(1<<(Pos-1)));//\u68c0\u67e5\u662f0\u8fd8\u662f1\n         int b=bool(s&(1<<(Pos+sw-1)));//\u540c\u4e0a\n         if(a==b)return -1;//\u6ca1\u6709\u4ea4\u6362\u7684\u5fc5\u8981\n         if(a)\n                  s=s-(1<<(Pos-1))+(1<<(Pos+sw-1));\n         else\n                 s=s+(1<<(Pos-1))-(1<<(Pos+sw-1));\n         return s;\n}\nvoid outp(int t)//\u8f93\u51fa\n{\n         vector<Node> Ans;Ans.clear();\n         cout<<Q[t].st<<endl;\n         while(t!=1)\n         {\n                  Ans.push_back(Q[t]);\n                  t=Q[t].ff;\n         }\n         for(int i=Ans.size()-1;i>=0;--i)\n         {  \n                 //cout<<Ans[i].pos<<' '<<Ans[i].way<<endl;\n                 printf(\"%d%d%d%d\\n\",(Ans[i].pos+3)/4,(Ans[i].pos%4!=0?Ans[i].pos%4:4),\n                                     (Ans[i].pos+Ans[i].way+3)/4,\n                                     (Ans[i].pos+Ans[i].way)%4!=0?(Ans[i].pos+Ans[i].way)%4:4);\n         }\n}\nint main()\n{\n    for(int i=1;i<=16;++i)\n        Beg=Beg+(read()<<(i-1));\n    for(int i=1;i<=16;++i)\n        End=End+(read()<<(i-1));\n    \n    Q[1]=(Node){Beg,0,0,0,0};\n    h=0,t=1;\n    while(h<t)\n    {\n             ++h;\n             Node now=Q[h];\n             \n             for(int i=1;i<=12;++i)//\u679a\u4e3e\u6bcf\u4e2a\u4f4d\u7f6e \n                 if(true)//\u5411\u4e0b\u4ea4\u6362\n                 {\n                         s=change(now.t,i,4);\n                         if(s==-1)continue;//\u6ca1\u6709\u5fc5\u8981\u4ea4\u6362 \n                         if(vis[s])continue;//\u5df2\u7ecf\u8bbf\u95ee\u8fc7 \n                         vis[s]=true;//\u6807\u8bb0\u8bbf\u95ee\u8fc7\n                        Q[++t]=(Node){s,now.st+1,h,i,4};//\u8bb0\u5f55 \n                        if(s==End)//\u5230\u8fbe\u7ec8\u70b9\n                        {\n                               outp(t);\n                               return 0;\n                        } \n                 }\n                 \n             for(int i=1;i<=15;++i)//\u679a\u4e3e\u6bcf\u4e2a\u4f4d\u7f6e \n                    if(i%4!=0)//\u5411\u53f3\u4ea4\u6362\n                 {\n                         s=change(now.t,i,1);\n                         if(s==-1)continue;//\u6ca1\u6709\u5fc5\u8981\u4ea4\u6362 \n                         if(vis[s])continue;//\u5df2\u7ecf\u8bbf\u95ee\u8fc7 \n                         vis[s]=true;//\u6807\u8bb0\u8bbf\u95ee\u8fc7\n                        Q[++t]=(Node){s,now.st+1,h,i,1};//\u8bb0\u5f55 \n                        if(s==End)//\u5230\u8fbe\u7ec8\u70b9\n                        {\n                               outp(t);\n                               return 0;\n                        }  \n                 }\n             for(int i=2;i<=16;++i)//\u679a\u4e3e\u6bcf\u4e2a\u4f4d\u7f6e \n                    if(i%4!=1)//\u5411\u5de6\u4ea4\u6362\n                 {\n                         s=change(now.t,i,-1);\n                         if(s==-1)continue;//\u6ca1\u6709\u5fc5\u8981\u4ea4\u6362 \n                         if(vis[s])continue;//\u5df2\u7ecf\u8bbf\u95ee\u8fc7 \n                         vis[s]=true;//\u6807\u8bb0\u8bbf\u95ee\u8fc7\n                        Q[++t]=(Node){s,now.st+1,h,i,-1};//\u8bb0\u5f55 \n                        if(s==End)//\u5230\u8fbe\u7ec8\u70b9\n                        {\n                               outp(t);\n                               return 0;\n                        }  \n                 }\n                 \n             for(int i=5;i<=16;++i)//\u679a\u4e3e\u6bcf\u4e2a\u4f4d\u7f6e \n                 if(true)//\u5411\u4e0a\u4ea4\u6362\n                 {\n                         s=change(now.t,i,-4);\n                         if(s==-1)continue;//\u6ca1\u6709\u5fc5\u8981\u4ea4\u6362 \n                         if(vis[s])continue;//\u5df2\u7ecf\u8bbf\u95ee\u8fc7 \n                         vis[s]=true;//\u6807\u8bb0\u8bbf\u95ee\u8fc7\n                        Q[++t]=(Node){s,now.st+1,h,i,-4};//\u8bb0\u5f55 \n                        if(s==End)//\u5230\u8fbe\u7ec8\u70b9\n                        {\n                               outp(t);\n                               return 0;\n                        } \n                 }\n\n    }\n    cout<<\"No Answer!\"<<endl;\n    return 0;\n}\n```",
        "postTime": 1500105189,
        "uid": 21283,
        "name": "yybyyb",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u79cd\u9898\u76ee\u4e00\u770b\u5c31\u662f\u6253\u641c\u7d22\uff0c\u72b6\u6001\u79cd\u7c7b\u6709\u9650\uff0c\u5e7f\u641c\u7684\u7a7a\u95f4\u53ef\u4ee5\u63a5\u53d7\u3002\u8fd9\u91cc\u4e3b\u8981\u8bb2\u89e3\u4e24\u4e2a\u70b9\uff1a\u72b6\u538b\uff0c\u4ee5\u53ca\u53cc\u5411BFS\u3002\u5148\u8bf4\u72b6\u538b\u3002\n\n\u6211\u4eec\u89c4\u5b9a\u4e00\u4e0b\u68cb\u76d8\uff1a\n\n15 14 13 12\n\n11 10  9  8\n\n7  6  5  4\n\n3  2  1  0\n\n\u68cb\u76d8\u4e0a\u6bcf\u4e00\u4e2a\u68cb\u5b50\u5bf9\u5e94\u7684\u6743\u503c\u7b49\u4e8e2\u7684n\u6b21\u65b9(n\u662f\u4f4d\u7f6e\u7f16\u53f7) \uff0c\u90a3\u4e48\u4e00\u4e2a\u68cb\u76d8\u7684\u72b6\u6001\u5c31\u53ef\u4ee5\u7528\u5b83\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u6570\u6765\u8868\u793a\uff0c\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u6570\u8f6c\u5341\u8fdb\u5236\u540e\u6700\u5927\u4e3a2^16-1\uff0c\u537365535\u3002\u6240\u4ee5\u5f00\u4e00\u4e2a\u5927\u5c0f\u4e3a2^16\u7684bool\u578b\u6570\u7ec4\u5c31\u597d\u4e86\u3002\n\n\u5de6\u53f3\u4ea4\u6362\u6216\u4e0a\u4e0b\u4ea4\u6362\uff0c\u5c31\u662f\u628a\u7b2cn\u4f4d\u6570\u5b57\u548c\u7b2cn-1\u4f4d\u4ea4\u6362(n%4!=0) \u6216\u628a\u7b2cn\u4f4d\u6570\u5b57\u548c\u7b2cn-4\u4f4d\u4ea4\u6362(n>=4) \uff0c\u8fd9\u91cc\u7528\u5230\u4e86\u4f4d\u8fd0\u7b97\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ea\u8981\u628a\u9700\u8981\u4ea4\u6362\u7684\u4e24\u4f4d\u5206\u522b**\u6309\u4f4d\u4e0e(&)**\u4e0a\u4f4d\u7f6e\u7f16\u53f7\u6240\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u5c31\u5f97\u5230\u4e86\u5173\u4e8e\u8fd9\u4e00\u4f4d\u4e0a\u7684\u6570\u7684\u4fe1\u606f\uff0c\u518d\u5c06\u8fd9\u4e2a\u7ed3\u679c**\u5de6\u79fb/\u53f3\u79fb(<</>>)**\uff0c\u8fdb\u884c\u5e38\u89c4\u7684\u52a0\u51cf\u8fd0\u7b97\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u65b0\u751f\u6210\u72b6\u6001\u7684\u4e8c\u8fdb\u5236\u6570\u3002\u5b9e\u73b0\u5982\u4e0b\uff1a\n\nf=num&B[k];\n\nb=num&B[k-1];\n\nn=num+(f>>1)-f+(b<<1)-b;\n\n\u8fd9\u91cc\u4ee5\u5de6\u53f3\u4ea4\u6362\u4e3a\u4f8b\u3002num\u662f\u539f\u8282\u70b9\u7684\u4e8c\u8fdb\u5236\u6570\uff0cf\uff0cb\u662f\u9700\u8981\u4ea4\u6362\u7684\u4e24\u4f4d\uff0cB\u6570\u7ec4\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u8868(\u6253\u8868^\\_^)\uff0cn\u662f\u65b0\u751f\u6210\u8282\u70b9\u7684\u4e8c\u8fdb\u5236\u6570\u3002\u901a\u8fc7\u201c\u51cf\u53bb\u539f\u6765\u7684\uff0c\u52a0\u4e0a\u66f4\u65b0\u7684\u201d\u5c31\u53ef\u4ee5\u5f97\u5230\u65b0\u8282\u70b9\u3002\n\n\u518d\u8bb2\u8bb2\u53cc\u5411BFS\u3002\u5bf9\u4e8e\u8fd9\u9898\u6765\u8bf4\uff0c\u6211\u4eec\u628a\u5e38\u89c4BFS\u4e2d\u7684\u6240\u6709\u6570\u7ec4\u90fd\u5f00\u4e24\u904d\uff08\u5305\u62echead\uff0ctail\u6307\u9488\uff09\uff0c\u518d\u9644\u4e0a\u4e0b\u6807[0]\uff0c[1]\uff0c\u8fd9\u6837\u53ef\u4ee5\u65b9\u4fbf\u8c03\u7528\u3002\u4e00\u822c\u800c\u8a00\u53cc\u5411BFS\u6709\u4e00\u4e2a\u6a21\u677f\uff0c\u5927\u4f53\u5982\u4e0b\uff1a\n\n```cpp\nwhile (head[0]<tail[0]&&head[1]<tail[1])\n    {\n        BFS(0);\n        if (key) break;\n        BFS(1);\n        if (key) break;\n    }\n```\n\u5176\u4e2dkey\u53ef\u4ee5\u63a7\u5236\u7a0b\u5e8f\u5728\u627e\u5230\u89e3\u540e\u76f4\u63a5\u7ed3\u675f\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u5faa\u73af\u3002BFS\u51fd\u6570\u4e2d\u57fa\u672c\u6309\u539f\u5148\u5e7f\u641c\u7684\u6a21\u677f\u53bb\u6253\uff0c\u53ea\u662f\u8bb0\u5f97\u6240\u6709\u7684\u4e1c\u897f\u90fd\u8981\u52a0\u4e0a01\u4e0b\u6807\u8868\u793a\u54ea\u4e00\u8fb9\u7684\u961f\u5217\u3002\n\u8fd9\u91cc\u8fd8\u8bb2\u4e00\u4e2a\u5c0f\u6280\u5de7\uff1a\u4ea4\u6362\u76f8\u90bb\u7684\u4e24\u4e2a\u68cb\u5b50\uff0c\u901a\u5e38\u4f1a\u8003\u8651\u56db\u4e2a\u65b9\u5411\u4ea4\u6362\uff0c\u4f46\u660e\u663e\u4f1a\u53d1\u751f\u91cd\u590d\u3002\u6211\u4eec\u5c31\u53ea\u8003\u8651\u548c\u53f3\u8fb9\u7684\u68cb\u5b50\u4ea4\u6362\uff0c\u6216\u8005\u548c\u4e0b\u9762\u7684\u68cb\u5b50\u4ea4\u6362\uff0c\u53ef\u4ee5\u51cf\u5c11\u91cd\u590d\u3002\n\n\u6709\u4e00\u4e2a\u95ee\u9898\u5728\u4e8e\u8f93\u51fa\uff0c\u53cc\u5411BFS\u5bf9\u4e8e\u8fd9\u9053\u9898\u7684\u8f93\u51fa\u7565\u663e\u9ebb\u70e6\uff0c\u8fd9\u91cc\u91c7\u7528\u4e86\u9012\u5f52\u8c03\u7528\u8f93\u51fa\uff0c\u53ef\u4ee5\u53c2\u7167\u4ee3\u7801\u7406\u89e3\u4e00\u4e0b\u3002\n\n\u8bb2\u4e86\u8fd9\u4e48\u591a\uff0c\u6211\u4eec\u7ec8\u4e8e\u770b\u89c1\u4e86\u4ee3\u7801\u3001(\u4e2a\u4eba\u8bb0\u5f55\u53cc\u5411BFS\u8dd1\u4e8642ms\uff0c\u6b22\u8fce\u5404\u8def\u5927\u4f6c\u7834\u7eaa\u5f55)\n\n\n\n\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nint B[16]={1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768};\nint P[16]={44,43,42,41,34,33,32,31,24,23,22,21,14,13,12,11};\nint h[2][65536];//\u5bf9\u5e94hash\u7801\nbool vis[2][65536];\nint g[2][65536];\nint fa[2][65536];//\u5bf9\u5e94\u7236\u8282\u70b9\nint p[2][65536];//\u8bb0\u5f55\u4e0a\u4e00\u6b65\u53d8\u6362\u5f97\u6765\u7684\u4f4d\u7f6e(\u59cb\u7ec8\u662f\u5de6\u4e0a\u70b9) \nbool d[2][65536];//\u8bb0\u5f55\u4e0a\u4e00\u6b65\u662f\u5de6\u53f3\u4ea4\u6362(0)\u8fd8\u662f\u4e0a\u4e0b\u4ea4\u6362(1) \nint head[2],tail[2]={1,1};\nint start,target,s,key;\nvoid print0(int n)\n{\n    if (n==start) return ;\n    print0(fa[0][n]);\n    int a=p[0][n],b=p[0][n]-1-3*d[0][n];\n    printf(\"%d%d\\n\",P[a],P[b]);\n}\nvoid print1(int n)\n{\n    if (n==target) return ;\n    int a=p[1][n],b=p[1][n]-1-3*d[1][n];\n    printf(\"%d%d\\n\",P[a],P[b]);\n    print1(fa[1][n]);\n}\nvoid record(int n)\n{\n    printf(\"%d\\n\",g[0][n]+g[1][n]);\n    print0(n);\n    print1(n);\n}\nvoid BFS(int x)\n{\n    head[x]++;\n    int num=h[x][head[x]];\n    int f,b,n;\n    for (int k=15;k>=0;k--)\n    {\n        if (k%4!=0)//\u5de6\u53f3\u4ea4\u6362 \n        {\n            f=num&B[k];\n            b=num&B[k-1];\n            n=num+(f>>1)-f+(b<<1)-b;\n            if (vis[x][n]==0)\n            {\n                tail[x]++;\n                h[x][tail[x]]=n;\n                vis[x][n]=1;\n                g[x][n]=g[x][num]+1;\n                fa[x][n]=num;\n                p[x][n]=k;\n                d[x][n]=0;\n            } \n        }\n        if (vis[0][n]&&vis[1][n]) \n        {\n            record(n);\n            key=1;\n            return;\n        }\n        if (k>=4)//\u4e0a\u4e0b\u4ea4\u6362 \n        {\n            f=num&B[k];\n            b=num&B[k-4];\n            n=num+(f>>4)-f+(b<<4)-b;\n            if (vis[x][n]==0)\n            {\n                tail[x]++;\n                h[x][tail[x]]=n;\n                vis[x][n]=1;\n                g[x][n]=g[x][num]+1;\n                fa[x][n]=num;\n                p[x][n]=k;\n                d[x][n]=1;\n            } \n        }\n        if (vis[0][n]&&vis[1][n]) \n        {\n            record(n);\n            key=1;\n            return;\n        }\n    }\n}\nint main()\n{\n    //freopen(\"black and white.in\",\"r\",stdin);\n    for (int i=15;i>=0;i--)\n    {\n        scanf(\"%1d\",&s);\n        start+=s<<i;\n    }\n    for (int i=15;i>=0;i--)\n    {\n        scanf(\"%1d\",&s);\n        target+=s<<i;\n    }\n    h[0][1]=start;h[1][1]=target;\n    vis[0][start]=1;vis[1][target]=1;\n    while (head[0]<tail[0]&&head[1]<tail[1])\n    {\n        BFS(0);\n        if (key) break;\n        BFS(1);\n        if (key) break;\n    }\n    return 0;\n}\n\n```",
        "postTime": 1500118644,
        "uid": 47654,
        "name": "\u79df\u9165\u96e8",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u7ffb\u5b8c\u4e86\u6574\u4e2a\u9898\u89e3\uff0c\u53d1\u73b0\u597d\u50cf\u6ca1\u6709\u4e00\u4e2a\u4eba\u5199$DFS$\u7684\u3002\u8ba9\u6211\u6765\u7ed9\u5927\u5bb6\u666e\u53ca\u4e00\u4e0b\u5982\u4f55\u7528$DFS$ $29ms+0.8MB$ \u4f18\u96c5\u5730\u8dd1\u8fc7\u8fd9\u9053\u9898\u3002\n\n\u5b9a\u4e49$1$\u4e3a\u68cb\u5b50\uff0c$0$\u4e3a\u7a7a\u5730\uff0c\u9898\u76ee\u539f\u610f\u4e0d\u53d8\u3002\n\n\u9996\u5148\u63d0\u53d6\u51fa\u6240\u6709\u521d\u59cb\u548c\u76ee\u6807\u4e0d\u540c\u7684\u70b9\uff0c\u5b58\u8d77\u6765\uff0c\u521d\u59cb\u4e3a$1$\u7684\u70b9\u4e3a\u8d77\u70b9\uff0c\u76ee\u6807\u4e3a$1$\u7684\u70b9\u4e3a\u7ec8\u70b9\uff0c\u7136\u540e\u7528$DFS$\u679a\u4e3e\u6240\u6709\u7684\u53ef\u80fd\u6027\u3002$DFS$\u4e0d\u8bb0\u5f55\u8fc7\u7a0b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(2^{16})$\uff0c\u53ef\u4ee5\u63a5\u53d7\u3002\n\n\u800c\u5982\u4f55\u8bb0\u5f55\u65b9\u6848\u5462\uff1f\n\n\u91cd\u5b9a\u4e49\u8d70\uff1a\u5f53\u76ee\u7684\u6ca1\u6709\u68cb\u5b50\u65f6\uff0c\u76f4\u63a5\u79fb\u52a8\u548c\u4ea4\u6362\u7684\u6548\u679c\u662f\u4e00\u6837\u7684\u3002\n\n\u53d1\u73b0\u5982\u679c\u8def\u4e0a\u6ca1\u6709\u5176\u4ed6\u68cb\u5b50\u5c31\u53ef\u4ee5\u76f4\u63a5\u8d70\u8fc7\u53bb\uff0c\u800c\u6709\u68cb\u5b50\u7684\u8bdd\u6211\u4eec\u5c31\u53ef\u4ee5\u5148\u628a\u6321\u8def\u7684\u68cb\u5b50\u79fb\u5230\u81ea\u5df1\u7684\u76ee\u7684\u5730\uff0c\u7136\u540e\u81ea\u5df1\u79fb\u5230\u6321\u8def\u68cb\u5b50\u7684\u4f4d\u7f6e\u3002\u53ef\u8bc1\u660e\u8fd9\u662f\u6700\u4f18\u65b9\u6848\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\nusing namespace std;\nint jd(int a){//\u6c42\u7edd\u5bf9\u503c\n    return ((a>0)?a:-a);\n}\nint map1[10][10];//\u521d\u59cb\nint map2[10][10];//\u76ee\u6807\nstruct point{\n       int x,y;\n}needmove[20],moveto[20];\nint operator - (const point a,const point b){//\u66fc\u54c8\u987f\u8ddd\u79bb\n    return jd(a.x-b.x)+jd(a.y-b.y);\n}\nbool operator != (const point a,const point b){\n     return !((a.x==b.x)&&(a.y==b.y));\n}\nbool operator == (const point a,const point b){\n     return (a.x==b.x)&&(a.y==b.y);\n}\nint tovis[20];\nint l1,l2;\nint minn=10000;\nint minwei[1000];//\u6700\u4f18\u65b9\u6848\u8bb0\u5f55\n\nint nowwei[1000];//\u5f53\u524d\u72b6\u51b5\u8bb0\u5f55\nint toin(int a,int b,int c,int d){//\u5750\u6807\u8f6c\u6570\u5b57\n    return (a+1)*1000+(b+1)*100+(c+1)*10+(d+1);\n}\nint isit(point x){//\u5f53\u524d\u8fd9\u4e2a\u5730\u65b9\u662f\u5426\u6709\u5176\u4ed6\u68cb\u5b50\n    return map1[x.x][x.y];\n}\nint ln;\npoint pu(point ne,point to){//\u628ane\u4f4d\u7f6e\u7684\u68cb\u5b50\u79fb\u5230to\uff0c\u8fd4\u56de\u4e0a\u4e00\u4e2a\u68cb\u5b50\u9700\u8981\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\n     if(ne!=to){\n       if(ne.x>to.x)\n         to=pu((point){ne.x-1,ne.y},to);\n       else\n       if(ne.x<to.x)\n         to=pu((point){ne.x+1,ne.y},to);\n       else\n       if(ne.y>to.y)\n         to=pu((point){ne.x,ne.y-1},to);\n       else\n       if(ne.y<to.y)\n         to=pu((point){ne.x,ne.y+1},to);\n       //\u5148\u9012\u5f52\u79fb\u8d70\u524d\u9762\u7684\u5728\u81ea\u5df1\u79fb\n       if(isit(ne)){\n         point xsxs=ne;\n         while(ne!=to){\n              if(ne.x>to.x){\n                nowwei[ln]=toin(ne.x,ne.y,ne.x-1,ne.y);\n                ne.x--;\n              }\n              else\n              if(ne.x<to.x){\n                nowwei[ln]=toin(ne.x,ne.y,ne.x+1,ne.y);\n                ne.x++;\n              }\n              else\n              if(ne.y>to.y){\n                nowwei[ln]=toin(ne.x,ne.y,ne.x,ne.y-1);\n                ne.y--;\n              }\n              else\n              if(ne.y<to.y){\n                nowwei[ln]=toin(ne.x,ne.y,ne.x,ne.y+1);\n                ne.y++;\n              }\n              ln++;\n         }\n         return xsxs;//\u5982\u679c\u5f53\u524d\u8fd9\u4e2a\u5730\u65b9\u6709\u68cb\u5b50\u5c31\u8ba9\u4e0a\u4e00\u4e2a\u68cb\u5b50\u79fb\u52a8\u5230\u8fd9\u91cc\n       }\n       else\n         return to;//\u5426\u5219\u79fb\u52a8\u5230\u76ee\u7684\u5730\n     }\n     else\n       return to;\n}\nvoid dfs(int nowmove,int v){\n     if(v>minn)//\u526a\u679d\n       return;\n     if(nowmove==l1){//\u6700\u4f18\u72b6\u6001\u8bb0\u5f55\n       minn=v;\n       for(int i=0;i<v;i++)\n          minwei[i]=nowwei[i];\n       return;\n     }\n     for(int i=0;i<l2;i++)//\u679a\u4e3e\u6240\u6709\u60c5\u51b5\n        if(!tovis[i]){\n          tovis[i]=1;\n          int bfl=ln;\n          pu(needmove[nowmove],moveto[i]);\n          int qqc=v+jd(needmove[nowmove].x-moveto[i].x)+\n                    jd(needmove[nowmove].y-moveto[i].y);\n          map1[needmove[nowmove].x][needmove[nowmove].y]=0;\n          map1[moveto[i].x][moveto[i].y]=1;\n          dfs(nowmove+1,qqc);\n          map1[needmove[nowmove].x][needmove[nowmove].y]=1;\n          map1[moveto[i].x][moveto[i].y]=0;\n          ln=bfl;\n          tovis[i]=0;\n        }\n}\nint main(){\n    char junk;\n    for(int i=0;i<4;i++)\n       for(int j=0;j<4;j++){\n          junk=getchar();\n          if(junk!='1'&&junk!='0'){\n            j--;\n            continue;\n          }\n          map1[i][j]=junk-'0';\n       }\n    for(int i=0;i<4;i++)\n       for(int j=0;j<4;j++){\n          junk=getchar();\n          if(junk!='1'&&junk!='0'){\n            j--;\n            continue;\n          }\n          map2[i][j]=junk-'0';\n          if(map2[i][j]!=map1[i][j]){\n            if(map1[i][j])\n              needmove[l1++]=(point){i,j};\n            else\n              moveto[l2++]=(point){i,j};\n          }\n       }\n    dfs(0,0);\n    cout<<minn<<endl;\n    for(int i=0;i<minn;i++)\n       cout<<minwei[i]<<endl;\n    return 0;\n}\n```",
        "postTime": 1538985636,
        "uid": 38371,
        "name": "Ivystorm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "[${\\color{#a000e0}\\text{\u6b22\u8fce\u62dc\u8bbf\u6211\u8fd9\u4e2a\u849f\u84bb\u7684\u535a\u5ba2}}$](https://www.luogu.org/blog/Wendigo/)\n\n [P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011](https://www.luogu.org/problem/P1225)\n\n### \u6b64\u9898\u7b97\u6cd5:$Bfs$+\u72b6\u6001\u538b\u7f29\u8f6c\u79fb\n\n\u6b64\u9898\u7b80\u5355\u7248: [P4289 \u3010HAOI2008\u3011\u79fb\u52a8\u73a9\u5177](https://www.luogu.org/problem/P4289)\n\n\u5927\u81f4\u601d\u8def:\n\n>1.$ $\u5c06\u4e00\u4e2a\u72b6\u6001\u5305\u88c5\u6210\u7ed3\u6784\u4f53$statu$\u3002$lst$\u8868\u793a\u8fd9\u4e2a\u72b6\u6001\u7684\u4e0a\u4e00\u4e2a\u72b6\u6001\uff0c$sta$\u8868\u793a\u8fd9\u4e00\u4e2a\u72b6\u6001\uff0c$g$\u8868\u793a\u8d70\u5230\u8fd9\u4e2a\u72b6\u6001\u7528\u7684\u6b65\u6570\uff0c\u7528$read()$\u51fd\u6570\u8bfb\u5165\u4e00\u4e2a$statu$\u3002\n\n![](https://s2.ax1x.com/2019/11/01/KbEvDJ.jpg)\n\n\n\n```cpp\nstruct statu{\n\tint lst,sta,g;\n\tstatu(){sta=0;}\n\tvoid read(){\n\t\tint bit;\n\t\tscanf(\"%d\",&bit);\n\t\tbit=bit/1000*8\n\t\t+bit/100%10*4\n\t\t+bit/10%10*2+bit%10;\n\t\tsta=sta*16+bit;\n\t}\n}\n```\n>2.$ $\u4ece\u521d\u59cb\u72b6\u6001$now$\u5f00\u59cb$Bfs$\u3002\u4ee4$vis[]$\u6570\u7ec4\u4e3a\u72b6\u6001\u7684\u6700\u5c11\u6b65\u6570\u4ee5\u53bb\u91cd(\u672a\u51fa\u73b0\u8fc7\u7684\u72b6\u6001\u6570\u7ec4\u503c\u4e3a$-1$)\u3002$ant[][]$\u8bb0\u5f55\u4ece\u4e0a\u4e00\u4e2a\u72b6\u6001\u5230\u6b64\u72b6\u6001\u7684\u79fb\u52a8\u65b9\u6848\u3002\u987a\u4fbf\u7528$statu$\u7c7b\u578b\u7684$rec[]$\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u72b6\u6001\u5bf9\u5e94\u7684$statu$\u3002\n\n>3.$ $\u6bcf\u6b21\u4ea4\u6362\u80af\u5b9a\u4ea4\u6362\u5f02\u8272\u68cb\uff0c\u679a\u4e3e\u72b6\u6001\u4e2d\u7684\u6bcf\u4e2a\u9ed1\u5b50\uff0c\u4e0e\u56db\u4e2a\u65b9\u5411\u4e2d\u7684\u767d\u5b50\u4ea4\u6362\u6210\u4e3a\u65b0\u7684\u72b6\u6001\u3002$Bfs$\u4e2d\u5982\u679c\u6362\u6210\u4e86\u7ec8\u5c40\u5c31$return$\u3002\n\n![](https://s2.ax1x.com/2019/11/01/KbmQ8x.jpg)\n\n## \u4ee5\u4e0b\u662f\u4ee3\u7801+\u6ce8\u91ca\n\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint vis[1<<16];\nchar ant[1<<16][4];\nstruct statu{ //\u8868\u793a\u4e00\u79cd\u72b6\u6001\n\tint lst,sta,g;\n\tstatu(){sta=0;}\n\tvoid read(){ //\u8bfb\u5165\u51fd\u6570\n\t\tint bit;\n\t\tscanf(\"%d\",&bit);\n\t\tbit=bit/1000*8\n\t\t+bit/100%10*4\n\t\t+bit/10%10*2+bit%10;\n\t\tsta=sta*16+bit;\n\t}\n}now,ex,ans,rec[1<<16];\n//now\u8868\u793a\u5f00\u59cb\u72b6\u6001\uff0cex\u8868\u793a\u7ed3\u675f\u72b6\u6001\uff0crec\u8bb0\u5f55\u6bcf\u4e2a\u72b6\u6001\nqueue<statu> q;\nvoid bfs(){\n\tfor(int i=0;i<(1<<16);i++)\n\t\tvis[i]=-1; //\u56e0\u4e3a\u5f00\u59cb\u72b6\u6001\u7684\u6b65\u6570\u4e3a0\n\tvis[now.sta]=now.g=0;\n\tnow.lst=-1;\n\trec[now.sta]=now; //5\u6b65\u521d\u59cb\u5316\n\tq.push(now);\n\twhile(!q.empty()){\n\t\tstatu tp=q.front(),to;\n\t\tq.pop(); to.g=tp.g+1;\n\t\tto.lst=tp.sta;\n//\t\tcout<<\"yahoo\"<<endl;\n\t\tif(tp.sta==ex.sta){ //\u5f97\u51fa\u7b54\u6848\n\t\t\tans=tp;\n\t\t\treturn;\n\t\t} for(int i=1;i<=16;i++){\n\t\t\tif((tp.sta&(1<<(16-i)))==0)\n\t\t\t\tcontinue;\n\t\t\t//\u627e\u5230\u9ed1\u68cb\uff0c\u8bf7\u6ce8\u610f\u5224\u65ad\u53ef\u79fb\u52a8\u7684\u6807\u8bb0\n\t\t\t//\u4e0a\u79fbi>4\uff0c\u4e0b\u79fbi<13\uff0c\u5de6\u79fbi%4!=1\uff0c\u53f3\u79fbi%4!=0\n\t\t\t//\u5e76\u4e14\u79fb\u52a8\u5bf9\u8c61\u5f97\u662f\u767d\u68cb\n\t\t\tif(i>4&&(((1<<16-i+4)&tp.sta)==0)){\n\t\t\t\tto.sta=tp.sta^(1<<16-i);\n\t\t\t\tto.sta|=(1<<16-i+4);\n\t\t\t\tif(vis[to.sta]==-1){\n\t\t\t\t\tvis[to.sta]=to.g;\n\t\t\t\t\tant[to.sta][0]=(i+3)/4+'0';\n\t\t\t\t\tant[to.sta][1]=((i-1)%4+1)+'0';\n\t\t\t\t\tant[to.sta][2]=ant[to.sta][0]-1;\n\t\t\t\t\tant[to.sta][3]=ant[to.sta][1];\n\t\t\t\t\t//\u8bb0\u5f55\u65b9\u6848\n\t\t\t\t\trec[to.sta]=to; q.push(to);\n\t\t\t\t}\n\t\t\t} if(i<13&&(((1<<16-i-4)&tp.sta)==0)){\n\t\t\t\tto.sta=tp.sta^(1<<16-i);\n\t\t\t\tto.sta|=(1<<16-i-4);\n\t\t\t\tif(vis[to.sta]==-1){\n\t\t\t\t\tvis[to.sta]=to.g;\n\t\t\t\t\tant[to.sta][0]=(i+3)/4+'0';\n\t\t\t\t\tant[to.sta][1]=((i-1)%4+1)+'0';\n\t\t\t\t\tant[to.sta][2]=ant[to.sta][0]+1;\n\t\t\t\t\tant[to.sta][3]=ant[to.sta][1]; \n\t\t\t\t\trec[to.sta]=to; q.push(to);\n\t\t\t\t}\n\t\t\t} if(i%4!=1&&(((1<<16-i+1)&tp.sta)==0)){\n\t\t\t\tto.sta=tp.sta^(1<<16-i);\n\t\t\t\tto.sta|=(1<<16-i+1);\n\t\t\t\tif(vis[to.sta]==-1){\n\t\t\t\t\tvis[to.sta]=to.g;\n\t\t\t\t\tant[to.sta][0]=(i+3)/4+'0';\n\t\t\t\t\tant[to.sta][1]=((i-1)%4+1)+'0';\n\t\t\t\t\tant[to.sta][2]=ant[to.sta][0];\n\t\t\t\t\tant[to.sta][3]=ant[to.sta][1]-1; \n\t\t\t\t\trec[to.sta]=to; q.push(to);\n\t\t\t\t}\n\t\t\t} if(i%4!=0&&(((1<<16-i-1)&tp.sta)==0)){\n\t\t\t\tto.sta=tp.sta^(1<<16-i);\n\t\t\t\tto.sta|=(1<<16-i-1);\n\t\t\t\tif(vis[to.sta]==-1){\n\t\t\t\t\tvis[to.sta]=to.g;\n\t\t\t\t\tant[to.sta][0]=(i+3)/4+'0';\n\t\t\t\t\tant[to.sta][1]=((i-1)%4+1)+'0';\n\t\t\t\t\tant[to.sta][2]=ant[to.sta][0];\n\t\t\t\t\tant[to.sta][3]=ant[to.sta][1]+1; \n\t\t\t\t\trec[to.sta]=to; q.push(to);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} void print(int stas){ //\u9012\u5f52\u8f93\u51fa\u65b9\u6848\uff0crec[]\u6570\u7ec4\u53d1\u6325\u4f5c\u7528\u4e86(\u00b7`\u03c9`\u00b7)\n\tif(rec[stas].lst==-1)\n\t\treturn;\n\tprint(rec[stas].lst);\n\tprintf(\"%c%c%c%c\\n\",\n\tant[stas][0],ant[stas][1],\n\tant[stas][2],ant[stas][3]);\n} int main(){\n\tfor(int i=1;i<=4;i++)\n\t\tnow.read();\n\tfor(int i=1;i<=4;i++)\n\t\tex.read();\n\tbfs(),printf(\"%d\\n\",ans.g);\n\tprint(ans.sta);\n\treturn 0;\n}\n```\nP4289\u6bd4\u8fd9\u9898\u6c34\uff0c\u4e5f\u662f\u84dd\u9898\u3002\n\n\u4ee3\u7801\u4e0d\u77ed\uff0c\u56e0\u4e3a\u91cd\u590d\u7684\u90e8\u5206\u8f83\u591a\u3002\n\n\u8c22\u8c22\u5927\u5bb6! !\n\n\n\n\n\n",
        "postTime": 1572618332,
        "uid": 118365,
        "name": "George1123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "### \u9898\u76ee\uff1a\n\n[P1225 \u9ed1\u767d\u68cb\u6e38\u620f](https://www.luogu.com.cn/problem/P1225)\n### \u5206\u6790\uff1a\n$4*4$ \u7684\u77e9\u9635\u76f8\u5f53\u4e8e $16$ \u4f4d\u7684 $01$ \u4e32\uff0c\u660e\u663e\u7528\u4e8c\u8fdb\u5236\u72b6\u6001\u538b\u7f29\uff0c$2<<16$ \u4e0d\u8d85\u8fc7 $65535$ \u4ea4\u6362\u5373\u53ef\uff0c\u4f46\u662f\u5927\u5bb6\u8981\u8fd9\u4e2a\u72b6\u6001\u4e0d\u597d\u6807\u8bb0\u5904\u7406\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981 hash \u5904\u7406\uff0c\u8fd9\u4e2a $01$ \u77e9\u9635\uff0c \u4e0d\u96be\u60f3\u5230\u6211\u4eec\u5904\u7406\u6210\u4e8c\u8fdb\u5236\u6765\u5904\u7406\u3002 \n\n\u6211\u4eec\u600e\u4e48\u5904\u7406\u8fd9\u4e2a\u9898\u76ee\u4e2d $1 ,0$ \u5bf9\u5e94\u7684\u4f4d\u7f6e\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u7528\u6211\u4eec\u4e8c\u7ef4\u6570\u7ec4\u901a\u7528\u7684  hash \u65b9\u6cd5\uff0c\u5c31\u662f\u9664\u4ee5\u5217\u5bbd\u5f97\u884c\u53f7\uff0c\u5bf9\u5217\u5bbd\u53d6\u4f59\u5f97\u5230\u5217\u53f7\u7684\u505a\u6cd5\uff1a\u4ea4\u6362\u3002\n\n\u4f46\u662f\u5982\u4f55\u5b9e\u73b0\u5462\uff1f \u540c\u6837\u5730\u5f97\u5230\u4e0a\u4e0b\u4e24\u4e2a\u5750\u6807\u7684\u4f4d\u7f6e\uff0c\u540c\u65f6\u5176\u5b9e\u4ed6\u4eec\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u4e5f\u662f\u5e8f\u53f7\u6765\u8bb0\u5f55\u7684\uff0c\u7136\u540e\u6211\u4eec\u76f4\u63a5\u627e\u5230\u4e24\u4e2a\u4f4d\u7f6e\uff0c\u7528\u5f02\u6216\u5904\u7406\u5c31\u53ef\u4ee5\u4ea4\u6362 $0$ \u548c $1$ \u7684\u64cd\u4f5c\u3002\n\n\u600e\u4e48\u6253\u5370\u8fd9\u4e2a\u7b54\u6848\u5462\uff1f \n\n\u6211\u8ba4\u4e3a\u8fd9\u4e2a\u9898\u76ee\u8fd8\u6709\u4e00\u70b9\u5c31\u662f\u8bb0\u5f55\u8def\u5f84\u7684\u65b9\u6cd5\uff0c\u8bb0\u5f55\u8def\u5f84\u662f\u975e\u5e38\u8003\u9a8c\u4eba\u7684\uff0c\u4f46\u662f\u6211\u4eec\u9700 \u8981\u5f00\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c \u8fd9\u4e2a\u7ed3\u6784\u4f53\u9700\u8981\u8bb0\u5f55\u8fd9\u6b21 hash \u503c\u5bf9\u5e94\u7684\u54ea\u4e24\u4e2a\u5750\u6807\u8fdb\u884c\u4ea4\u6362\u4e86\uff0c\u540c\u65f6\u8fd9\u4e2a\u7ed3\u6784\u4f53\u80fd\u901a \u8fc7\u6700\u7ec8\u72b6\u6001\u7684 hash \u503c\u56de\u6eaf\u8f93\u51fa\u3002\n\n\n### \u4ee3\u7801\uff1a\n\u56e0\u4e3a\u524d\u9762\u5df2\u7ecf\u8bb2\u89e3\u8fc7\u4e86\u601d\u8def\uff0c\u6240\u4ee5\u6ce8\u91ca\u6bd4\u8f83\u5c11\uff0c\u8bf7\u8c05\u89e3\u3002\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N=(1<<16)+10;\nint pre[N],vis[N];\nint n,m;\nqueue <int> que;\nstruct node\n{\n\tint x,y,xx,yy;\n\tint pnum;//\u8bb0\u5f55\u4e0a\u4e00\u4e2a\u72b6\u6001 \n} ans[N];\nvoid dfs(int No)\n{\n\tif(ans[No].pnum!=n)\n\t{\n\t\tdfs(ans[No].pnum);\n\t}\n\tprintf(\"%d%d%d%d\\n\",ans[No].x,ans[No].y,ans[No].xx,ans[No].yy);\n}\nvoid bfs()\n{\n\tque.push(n);\n\twhile(!que.empty())//\u4e0a\u4e0b\u4e92\u6362 \n\t{\n\t\tint cur=que.front();\n\t\tque.pop();\n\t\tfor(int i=0;i<=11;i++)//\u4e0a\u4e0b\u4ea4\u6362 \n\t\t{\n\t\t\tint u=(cur&(1<<i))>>i;\n\t\t\tint v=(cur&(1<<(i+4)))>>(i+4);\n\t\t\tint tmp=(1<<(i+4))+(1<<i);\n\t\t\tif(u!=v)\n\t\t\t{\n\t\t\t\tint next=cur^tmp;\n\t\t\t\tif(vis[next]==0)\n\t\t\t\t{\n\t\t\t\t\tans[next].x=i/4+1;\n\t\t\t\t\tans[next].xx=ans[next].x+1;\n\t\t\t\t\tans[next].y=ans[next].yy=i%4+1;\n\t\t\t\t\tans[next].pnum=cur;\n\t\t\t\t\tvis[next]=vis[cur]+1;\n\t\t\t\t\tque.push(next);\n\t\t\t\t\tif(next==m)\n\t\t\t\t\t{\n\t\t\t\t\t\tprintf(\"%d\\n\",vis[m]);\n\t\t\t\t\t\tdfs(next);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n        for(int i=0;i<=15;i++)// \u5de6\u53f3\u4e92\u6362\n\t\t{\n            if(i%4==3) continue ;\n            int u = ( cur & (1<<i) ) >> i ;\n            int v = ( cur & (1<<(i+1)) ) >> (i+1);\n            int tmp = ( 1<<(i+1) ) + (1<<i) ;\n            if ( u != v )\n\t\t\t{\n                int next = cur ^ tmp ;\n                if( vis[next] == 0 )\n\t\t\t\t{\n                    ans[next].xx = ans[next].x = i / 4 + 1 ;\n                    ans[next].y =  i % 4 + 1 ;\n                    ans[next].yy = i % 4 + 2 ;\n                    ans[next].pnum = cur ;\n                    vis[next] = vis[cur] + 1 ;\n                    que.push(next);\n                    if ( next == m )\n\t\t\t\t\t{\n                        printf(\"%d\\n\",vis[m]);\n                        dfs(next);\n                        return ;\n                    }\n                }\n            }\n        }\n\t}\n} \nint main()\n{\n\tint x;\n\tfor(int i=0;i<16;i++)\n\t{\n\t\tscanf(\"%1d\",&x);//\u6ce8\u610f\u8bfb\u5165\u6280\u5de7 \n\t\tn+=x*(1<<i);\n\t}\n\tfor(int i=0;i<16;i++)\n\t{\n\t\tscanf(\"%1d\",&x);\n\t\tm+=x*(1<<i);\n\t}\n\tif(n==m)\n\t{\n\t\tprintf(\"0\\n\");\n\t\treturn 0;\n\t}\n\tbfs();\n\treturn 0;\n}\n```",
        "postTime": 1627199428,
        "uid": 502426,
        "name": "\u5feb\u4e50\u4e00\u51e1",
        "ccfLevel": 4,
        "title": "P1225 \u9ed1\u767d\u68cb\u6e38\u620f\u9898\u89e3"
    },
    {
        "content": "[\u5728blog\u67e5\u770b](https://www.cnblogs.com/liuxizai/p/13781404.html)\n\n\u5173\u4e8e\u8fd9\u9053\u9898\u76ee\u7684\u89e3\u6cd5\uff0c\u5176\u4ed6\u9898\u89e3\u5df2\u7ecf\u8bb2\u5f97\u975e\u5e38\u6e05\u695a\uff0c\u53e6\u5916\uff0c\u6211\u5728\u4ee3\u7801\u4e2d\u4e5f\u505a\u4e86\u7b80\u5355\u7684\u6ce8\u91ca\uff0c\u5e94\u8be5\u5f88\u5bb9\u6613\u5c31\u80fd\u7406\u89e3\u9898\u76ee\u7684\u505a\u6cd5\u3002\n\n\u4f5c\u4e3a\u4e00\u9053\u7ecf\u5178\u7684\u4f4d\u8fd0\u7b97\u8fd0\u7528\u9898\u76ee\uff0c\u6211\u4e3b\u8981\u662f\u60f3\u8be6\u7ec6\u8bb2\u8bb2\u5728\u8fd9\u9898\u4e2d\uff0c\u4f4d\u8fd0\u7b97\u662f\u5982\u4f55\u4f7f\u7528\u7684\u3002\n\n\u5982\u679c\u4f60\u6ca1\u6709\u63a5\u89e6\u8fc7\u4f4d\u8fd0\u7b97\uff0c\u53c2\u8003[OI-Wiki](https://oi-wiki.org/math/bit/)\u3002\n\n~~\u7528\u4e86\u4f4d\u8fd0\u7b97\u624d\u77e5\u9053\u8fd9\u4e1c\u897f\u6709\u591a\u723d~~\n\n## \u4f4d\u8fd0\u7b97\u7684\u4f7f\u7528\n\n\u8fd9\u9053\u9898\u76ee\u4e2d\uff0c`bfs`\u80af\u5b9a\u9700\u8981\u8fdb\u884c\u5224\u91cd\uff0c\u90a3\u4e48\u4f4d\u8fd0\u7b97\u5c31\u6709\u5f88\u5927\u7684\u4f18\u52bf\uff0c\u56e0\u4e3a\u68cb\u76d8\u5e03\u5c40\u4e00\u5171\u53ea\u6709$2^{16}$\u79cd\u53ef\u80fd\uff0c\u800c\u68cb\u76d8\u4e2d\u6bcf\u4e00\u4e2a\u70b9\u6070\u597d\u5bf9\u5e940\u62161\uff0c\u4e8e\u662f\u5bb9\u6613\u60f3\u5230\u5c06\u56db\u6392\u68cb\u76d8\u72b6\u6001\u538b\u6210\u4e00\u884c\uff0c\u7136\u540e\u5c06\u5176\u5f53\u505a\u4e8c\u8fdb\u5236\u8f6c\u4e3a\u5341\u8fdb\u5236\uff0c\u75280\u523065535\u8fd965536\u4e2a\u6570\u5bf9\u5e94\u6bcf\u79cd\u72b6\u6001\u3002\n\n\u4ee5\u4e0b\u4ee5\u6837\u4f8b\u4e3a\u4f8b\uff0c\u521d\u59cb\u68cb\u76d8\u5982\u4e0b\uff1a\n\n```\n1111\n0000\n1110\n0010\n```\n\n\u5c06\u5176\u5148\u538b\u6210\u4e00\u884c\uff1a\n\n```\n1111000011100010\n```\n\n\u8fd9\u5c31\u662f\u68cb\u76d8\u7684\u72b6\u6001\u7684\u4e8c\u8fdb\u5236\u7801\uff0c\u5c06\u5176\u8f6c\u4e3a\u5341\u8fdb\u5236\uff0c\u537361666\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\u8fdb\u884c\u4f4d\u8fd0\u7b97\uff0c\u6211\u4eec\u4e3a\u68cb\u76d8\u8fdb\u884c\u5982\u4e0b\u7f16\u53f7\uff1a\n\n```\n  0  1  2  3\n  4  5  6  7\n  8  9 10 11\n 12 13 14 15\n```\n\n\u6211\u4eec\u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\u5176\u5b9e\u5c31\u662f\u4e24\u79cd\uff1a\n\n1. \u83b7\u53d6\u7f16\u53f7\u4e3a$i$\u68cb\u5b50\u7684\u989c\u8272\n2. \u4ea4\u6362\u7f16\u53f7\u4e3a$i$\u548c\u7f16\u53f7\u4e3a$j$\u7684\u68cb\u5b50\n\n\u5bf9\u4e8e\u64cd\u4f5c1\uff0c\u7528\u4f4d\u8fd0\u7b97\u8868\u793a\u4e3a\uff1a`(n >> (15 - i)) & 1`\u3002\n\n\u539f\u7406\u5f88\u7b80\u5355\uff0c\u6bd4\u5982\u6211\u4eec\u60f3\u83b7\u53d6\u6837\u4f8b\u4e2d\u7f16\u53f7\u4e3a3\u7684\u68cb\u5b50\u989c\u8272\uff0c\u90a3\u4e48\u6211\u4eec\u5c063\u53f7\u68cb\u5b50\u79fb\u52a8\u5230\u7b2c0\u4f4d\u4e0a\uff0c\u79fb\u52a8\u7684\u4f4d\u6570\u5373\u4e3a`15 - i`\u4f4d\uff0c\u6240\u4ee5\u5c31\u6709\u4e86`n >> (15 - i)`\u3002\n\n```\n1111(000011100010)\n```\n\n\u63a5\u4e0b\u6765\uff0c\u5c06\u5176\u548c`1`\u8fdb\u884c\u4e0e\u8fd0\u7b97\uff0c\u5176\u5b9e\u5c31\u662f\u83b7\u5f97\u4e86\u7b2c0\u4f4d\u7684\u6570\u7801\u3002\n\n```\n1111 & 0001 = 1\n```\n\n\u64cd\u4f5c1\u5c31\u5b9e\u73b0\u4e86\uff0c\u5728\u7a0b\u5e8f\u4e2d\uff0c`15 - i`\u88ab\u5b9a\u4e49\u4e3a\u4e86`ni`\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c2\uff0c\u7528\u4f4d\u8fd0\u7b97\u8868\u793a\u4e3a\uff1a`n + (1 << (15 - j)) - (1 << (15 - i))`\u3002\n\n\u540c\u6837\u62ff\u6837\u4f8b\u4e3e\u4f8b\uff0c\u6211\u4eec\u60f3\u8981\u5c06\u7f16\u53f7\u4e3a1\u7684\u68cb\u5b50\u5411\u4e0b\u79fb\u52a8\uff0c\u5373\u4e3a\u5c06\u7f16\u53f7\u4e3a1\u7684\u68cb\u5b50\u4e0e\u7f16\u53f7\u4e3a`1 + 4 = 5`\u7684\u68cb\u5b50\u4e92\u6362\u3002\n\n\u4e3a\u65b9\u4fbf\u8fdb\u884c\u4f4d\u8fd0\u7b97\uff0c\u6211\u4eec\u5728\u7a0b\u5e8f\u4e2d\u7ea6\u5b9a\uff0c\u88ab\u79fb\u52a8\u68cb\u5b50\u53ea\u80fd\u662f\u9ed1\u68cb\uff0c\u76ee\u6807\u68cb\u5b50\u53ea\u80fd\u662f\u767d\u68cb\u3002\n\n\u5728\u4e8c\u8fdb\u5236\u6570\u5f53\u4e2d\uff0c\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u5c06\u67d0\u4e00\u4f4d\u4e0a\u7684`1`\u6539\u6210`0`\uff0c\u5c06\u67d0\u4e00\u4f4d\u4e0a\u7684`0`\u6539\u6210`1`\u3002\n\n\u5f88\u5bb9\u6613\u5f97\u5230\u4ee5\u4e0b\u7b97\u5f0f\uff1a\n$$\n(1111000011100010)_2 - (100000000000000)_2 + (10000000000)_2 = (1011010011100010)_2\n$$\n\u8f6c\u6362\u6210\u4f4d\u8fd0\u7b97\u5c31\u662f`n + (1 << (15 - j)) - (1 << (15 - i))`\u3002\n\n\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u80fd\u5728\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u4f4d\u8fd0\u7b97\u8fdb\u884c\u68cb\u76d8\u4e0a\u68cb\u5b50\u7684\u79fb\u52a8\u64cd\u4f5c\u4e86\u3002\n\n## Tip\n\n### \u672c\u9898\u4e0d\u80fd\u4f7f\u7528getchar\uff01\n\n### \u672c\u9898\u4e0d\u80fd\u4f7f\u7528getchar\uff01\n\n### \u672c\u9898\u4e0d\u80fd\u4f7f\u7528getchar\uff01\n\n[RE\u8bb0\u5f55](https://www.luogu.com.cn/record/39461032)\n\n## AC CODE\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node{\n\tint n; // \u5f53\u524d\u68cb\u76d8 \n\tint step; // \u8ba1\u6b65 \n\tstring way; // \u8bb0\u5f55\u64cd\u4f5c \n\tnode(int n, int step, string way): n(n), step(step), way(way) {}\n};\nint start, final, n, step, newn;\nchar t;\nstring way, newway;\nbool vis[65536];\nqueue<node>q;\nint main(){\n\tfor(int i = 0; i < 4; i++)\n\t\tfor(int j = 0; j < 4; j++)\n\t\t\tcin >> t, start = start * 2 + (int)(t-'0');\n\tfor(int i = 0; i < 4; i++){\n\t\tfor(int j = 0; j < 4; j++)\n\t\t\tcin >> t, final = final * 2 + (int)(t-'0');\n\t\tgetchar();\n\t}\n\tq.push(node(start, 0, \"\"));\n\tvis[start] = true;\n\twhile(!q.empty()){\n\t\tn = q.front().n, step = q.front().step, way = q.front().way;\n\t\tif(n == final){\n\t\t\tcout << step;\n\t\t\tfor(int i = 0; i < (signed)way.size(); i++){\n\t\t\t\tif(i % 4 == 0) cout << endl;\n\t\t\t\tcout << way[i];\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t\tstep++;\n\t\tq.pop();\n\t\tfor(int i = 0; i < 16; i++){\n\t\t\tint ni = 15 - i;\n\t\t\tif(((n >> ni) & 1) == 0) continue; // \u88ab\u79fb\u52a8\u68cb\u53ea\u9009\u9ed1\u68cb \n\t\t\t// \u5de6\u79fb \n\t\t\tif(i % 4 != 0){ // \u68cb\u5b50\u4e0d\u80fd\u4f4d\u4e8e\u68cb\u76d8\u7b2c\u4e00\u5217 \n\t\t\t\tint j = ni + 1;\n\t\t\t\tif(((n >> j) & 1) == 0){ // \u76ee\u6807\u68cb\u5e94\u662f\u767d\u68cb \n\t\t\t\t\tnewn = n + (1 << j) - (1 << ni);\n\t\t\t\t\tif(!vis[newn]){\n\t\t\t\t\t\tvis[newn] = true;\n\t\t\t\t\t\tnewway = way + (char)(i/4+1+'0');\n\t\t\t\t\t\tnewway += (char)(i%4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)/4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)%4+1+'0');\n\t\t\t\t\t\tq.push(node(newn, step, newway));\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t}\n\t\t\t// \u53f3\u79fb \n\t\t\tif(i % 4 != 3){ // \u68cb\u5b50\u4e0d\u80fd\u4f4d\u4e8e\u68cb\u76d8\u7b2c\u56db\u5217\n\t\t\t\tint j = ni - 1;\n\t\t\t\tif(((n >> j) & 1) == 0){\n\t\t\t\t\tnewn = n + (1 << j) - (1 << ni);\n\t\t\t\t\tif(!vis[newn]){\n\t\t\t\t\t\tvis[newn] = true;\n\t\t\t\t\t\tnewway = way + (char)(i/4+1+'0');\n\t\t\t\t\t\tnewway += (char)(i%4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)/4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)%4+1+'0');\n\t\t\t\t\t\tq.push(node(newn, step, newway));\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t}\n\t\t\t// \u4e0a\u79fb \n\t\t\tif(i >= 4){ // \u68cb\u5b50\u4e0d\u80fd\u4f4d\u4e8e\u68cb\u76d8\u7b2c\u4e00\u884c \n\t\t\t\tint j = ni + 4;\n\t\t\t\tif(((n >> j) & 1) == 0){\n\t\t\t\t\tnewn = n + (1 << j) - (1 << ni);\n\t\t\t\t\tif(!vis[newn]){\n\t\t\t\t\t\tvis[newn] = true;\n\t\t\t\t\t\tnewway = way + (char)(i/4+1+'0');\n\t\t\t\t\t\tnewway += (char)(i%4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)/4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)%4+1+'0');\n\t\t\t\t\t\tq.push(node(newn, step, newway));\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t}\n\t\t\t// \u4e0b\u79fb\n\t\t\tif(i <= 11){ // \u68cb\u5b50\u4e0d\u80fd\u4f4d\u4e8e\u68cb\u76d8\u7b2c\u56db\u884c \n\t\t\t\tint j = ni - 4;\n\t\t\t\tif(((n >> j) & 1) == 0){\n\t\t\t\t\tnewn = n + (1 << j) - (1 << ni);\n\t\t\t\t\tif(!vis[newn]){\n\t\t\t\t\t\tvis[newn] = true;\n\t\t\t\t\t\tnewway = way + (char)(i/4+1+'0');\n\t\t\t\t\t\tnewway += (char)(i%4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)/4+1+'0');\n\t\t\t\t\t\tnewway += (char)((15-j)%4+1+'0');\n\t\t\t\t\t\tq.push(node(newn, step, newway));\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t} \n\t\t}\n\t}\n}\n/*\n1111\n0000\n1110\n0010\n1010\n0101\n1010\n0101\n*/\n```\n\n[AC\u8bb0\u5f55](https://www.luogu.com.cn/record/39461528)\n\n- \u7528\u65f6\uff1a59ms\n- \u7a7a\u95f4\uff1a1.00MB",
        "postTime": 1602140138,
        "uid": 371439,
        "name": "Liuxizai",
        "ccfLevel": 6,
        "title": "\u300cSolution\u300dLuogu P1225 \u9ed1\u767d\u68cb\u6e38\u620f"
    },
    {
        "content": "\u672c\u9898\u8981\u7528bfs\n\n\u8fd9\u9053\u9898\u7684\u91cd\u70b9\u4e5f\u5c31\u662f\u5224\u91cd\u4e86\uff0c\u68cb\u76d8\u53ea\u67090\u548c 1\u4e24\u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a\u68cb\u76d8\u770b\u4f5c\u4e00\u4e2a16\u4f4d\u7684\u4e8c\u8fdb\u5236\u6570\uff0c\u4e8c\u8fdb\u5236\u6570\u5bf9\u5e94\u7684\u5341\u8fdb\u5236\u6570\u7684\u503c\u662f\u552f\u4e00\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4e00\u4e2ab\u6570\u7ec4\u6765\u5224\u91cd\uff0c\u5982\u679c\u68cb\u76d8\u6240\u5bf9\u5e94\u7684\u5341\u8fdb\u5236\u6570\u4e3anum\uff0c\u90a3\u4e48b[num]=1\u3002\n\n\u8f93\u51fa\u7ed3\u679c\u7684\u8bdd\uff0c\u52a0\u4e86SPJ\u5c31\u4e0d\u7528\u8003\u8651\u987a\u5e8f\u95ee\u9898\uff0c\u56e0\u6b64\u5728\u5e7f\u641c\u6269\u5c55\u8282\u70b9\u7684\u65f6\u5019\uff0c\u8bb0\u5f55\u6bcf\u4e2a\u8282\u70b9\u7684\u7236\u8282\u70b9\u548c\u7236\u8282\u70b9\u5230\u5b50\u8282\u70b9\u7684\u8def\u5f84\uff0c\u8f93\u51fa\u65f6\u53ef\u4ee5\u4ece\u7ec8\u70b9\u5f80\u524d\u641c\u7d22\u8def\u5f84\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nchar a[5][5];\nint num2[17]= {0,1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768}; //\u7528\u4e8e\u5c06\u4e8c\u8fdb\u5236\u6570\u8f6c\u6362\u4e3a\u5341\u8fdb\u5236\nint b[80000],road[80000][5],vis,c[18],q[80000][18],hd,tl=1,sum,ans[80000]; //b\u6570\u7ec4\u5224\u91cd\uff0croad\u6570\u7ec4\u8bb0\u5f55\u8def\u5f84\u548c\u7236\u8282\u70b9\uff0cvis\u8bb0\u5f55\u7b54\u6848\uff0cq\u6570\u7ec4\u6a21\u62df\u961f\u5217\uff0cans\u6570\u7ec4\u7528\u4e8e\u8f93\u51fa\u7b54\u6848 \nvoid print(int t)\n{\n\tcout<<q[t][0]<<endl; //\u8f93\u51fa\u8def\u5f84\u603b\u6570 \n\tint l=t,o=q[t][0]; \n\twhile(o!=0) \n\t{\n\t\tans[o]=l,l=road[l][0];\n\t\to--; \n\t} //\u5f80\u524d\u641c\u7d22\u8def\u5f84 \n\tfor(int i=1; i<=q[t][0]; i++)\n\t{\n\t\tfor(int j=1; j<=4; j++)\n\t\t\tcout<<road[ans[i]][j];\n\t\tcout<<endl;\n\t} //\u8f93\u51fa\u8def\u5f84 \n\treturn;\n}\nint main()\n{\n\tfor(int i=1; i<=4; i++)\n\t\tfor(int j=1; j<=4; j++)\n\t\t{\n\t\t\tcin>>a[i][j];\n\t\t\tq[1][(i-1)*4+j]=a[i][j]-'0',sum+=(a[i][j]-'0')*num2[(i-1)*4+j]; \n\t\t} //\u8f93\u5165\uff0c\u5e76\u5c06\u8d77\u70b9\u68cb\u76d8\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\u6570\u5b58\u50a8\u5728\u6570\u7ec4\uff0c\u518d\u8f6c\u5316\u4e3a\u5341\u8fdb\u5236 \n\tb[sum]=1,sum=0;\n\tfor(int i=1; i<=4; i++)\n\t\tfor(int j=1; j<=4; j++)\n\t\t{\n\t\t\tcin>>a[i][j];\n\t\t\tvis+=(a[i][j]-'0')*num2[(i-1)*4+j]; //\u8bb0\u5f55\u7ec8\u70b9\u68cb\u76d8 \n\t\t}\n\twhile(hd<tl)\n\t{\n\t\thd++;\n\t\tfor(int i=1; i<=16; i++)\n\t\t{\n\t\t\tif(i<=12) //\u4e0a\u4e0b\u4ea4\u6362 \n\t\t\t{\n\t\t\t\tsum=0;\n\t\t\t\tfor(int j=1; j<=16; j++)\n\t\t\t\t\tc[j]=q[hd][j];\n\t\t\t\tc[i+4]=q[hd][i],c[i]=q[hd][i+4]; //\u4ea4\u6362 \n\t\t\t\tfor(int j=1; j<=16; j++)\n\t\t\t\t\tsum+=c[j]*num2[j]; //\u8ba1\u7b97 \n\t\t\t\tif(b[sum]==0)\n\t\t\t\t{\n\t\t\t\t\ttl++,q[tl][0]=q[hd][0]+1,b[sum]=1; \t\t\t\t\n\t\t\t\t\tfor(int j=1; j<=16; j++)\n\t\t\t\t\t\tq[tl][j]=c[j]; //\u6269\u5c55\u8282\u70b9 \t\n\t\t\t\t\troad[tl][0]=hd,road[tl][1]=(i-1)/4+1,road[tl][2]=(i-1)%4+1,road[tl][3]=road[tl][1]+1,road[tl][4]=(i-1)%4+1; //\u8bb0\u5f55\u8def\u5f84\u548c\u7236\u8282\u70b9 \n\t\t\t\t\tif(sum==vis) //\u5982\u679c\u5230\u8fbe\u7ec8\u70b9\u68cb\u76d8 \n\t\t\t\t\t{\n\t\t\t\t\t\tprint(tl);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\tif(i%4!=0) //\u5de6\u53f3\u4ea4\u6362 \n\t\t\t{\n\t\t\t\tsum=0;\n\t\t\t\tfor(int j=1; j<=16; j++)\n\t\t\t\t\tc[j]=q[hd][j];\n\t\t\t\tc[i+1]=q[hd][i],c[i]=q[hd][i+1]; //\u4ea4\u6362 \n\t\t\t\tfor(int j=1; j<=16; j++)\n\t\t\t\t\tsum+=c[j]*num2[j]; //\u8ba1\u7b97 \n\t\t\t\tif(b[sum]==0)\n\t\t\t\t{\n\t\t\t\t\ttl++,q[tl][0]=q[hd][0]+1,b[sum]=1; \t \t\t\t\t\t\n\t\t\t\t\tfor(int j=1; j<=16; j++)\n\t\t\t\t\t\tq[tl][j]=c[j]; //\u6269\u5c55\u8282\u70b9\n\t\t\t\t\troad[tl][0]=hd,road[tl][1]=(i-1)/4+1,road[tl][2]=(i-1)%4+1,road[tl][3]=road[tl][1],road[tl][4]=(i-1)%4+2; //\u8bb0\u5f55\u8def\u5f84\u548c\u7236\u8282\u70b9 \n\t\t\t\t\tif(sum==vis) //\u5982\u679c\u5230\u8fbe\u7ec8\u70b9\u68cb\u76d8 \n\t\t\t\t\t{\n\t\t\t\t\t\tprint(tl);\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1563114745,
        "uid": 78001,
        "name": "dz_ice",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u9898\u89e3\u91cc\u7adf\u7136\u6ca1\u6709\u5199IDA\\*\uff0c\u6765\u4e00\u53d1\n\nIDA\\*\u7b97\u6cd5\u5c31\u662f\u57fa\u4e8e\u8fed\u4ee3\u52a0\u6df1\u7684A\\*\u7b97\u6cd5\u3002\u2014\u2014\u767e\u5ea6\u767e\u79d1\n\n\u5728\u8ba1\u7b97\u673a\u79d1\u5b66\u4e2d\uff0c\u8fed\u4ee3\u6df1\u5316\u641c\u7d22\uff08iterative deepening search\uff09\u6216\u8005\u66f4\u786e\u5207\u5730\u8bf4\u8fed\u4ee3\u6df1\u5316\u6df1\u5ea6\u4f18\u5148\u641c\u7d22 (iterative deepening depth-first search (IDS or IDDFS)) \u662f\u4e00\u4e2a\u72b6\u6001\u7a7a\u95f4\uff08\u72b6\u6001\u56fe\uff09\u641c\u7d22\u7b56\u7565\u3002\u5728\u8fd9\u4e2a\u641c\u7d22\u7b56\u7565\u4e2d\uff0c\u4e00\u4e2a\u5177\u6709\u6df1\u5ea6\u9650\u5236\u7684\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u7b97\u6cd5\u4f1a\u4e0d\u65ad\u91cd\u590d\u5730\u8fd0\u884c\uff0c\u5e76\u4e14\u540c\u65f6\u653e\u5bbd\u5bf9\u4e8e\u641c\u7d22\u6df1\u5ea6\u7684\u9650\u5236\uff0c\u76f4\u5230\u627e\u5230\u76ee\u6807\u72b6\u6001\u3002IDDFS \u4e0e\u5e7f\u5ea6\u4f18\u5148\u7b97\u6cd5\u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u5bf9\u5185\u5b58\u7684\u4f7f\u7528\u4f1a\u5c11\u5f88\u591a\uff1b\u5728\u6bcf\u4e00\u6b65\u8fed\u4ee3\u4e2d\uff0c\u5b83\u4f1a\u6309\u6df1\u5ea6\u4f18\u5148\u7b97\u6cd5\u4e2d\u7684\u987a\u5e8f\uff0c\u904d\u5386\u641c\u7d22\u6811\u4e2d\u7684\u8282\u70b9\uff0c\u4f46\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8282\u70b9\u7684\u7d2f\u79ef\u987a\u5e8f\u5b9e\u9645\u4e0a\u662f\u5e7f\u5ea6\u4f18\u5148\u7684\u3002 \u2014\u2014\u767e\u5ea6\u767e\u79d1\n\nA\\*\u641c\u5bfb\u7b97\u6cd5\u4fd7\u79f0A\u661f\u7b97\u6cd5\u3002A\\*\u7b97\u6cd5\u662f\u6bd4\u8f83\u6d41\u884c\u7684\u542f\u53d1\u5f0f\u641c\u7d22\u7b97\u6cd5\u4e4b\u4e00\uff0c\u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u8def\u5f84\u4f18\u5316\u9886\u57df\u3002\u5b83\u7684\u72ec\u7279\u4e4b\u5904\u662f\u68c0\u67e5\u6700\u77ed\u8def\u5f84\u4e2d\u6bcf\u4e2a\u53ef\u80fd\u7684\u8282\u70b9\u65f6\u5f15\u5165\u4e86\u5168\u5c40\u4fe1\u606f\uff0c\u5bf9\u5f53\u524d\u8282\u70b9\u8ddd\u7ec8\u70b9\u7684\u8ddd\u79bb\u505a\u51fa\u4f30\u8ba1\uff0c\u5e76\u4f5c\u4e3a\u8bc4\u4ef7\u8be5\u8282\u70b9\u5904\u4e8e\u6700\u77ed\u8def\u7ebf\u4e0a\u7684\u53ef\u80fd\u6027\u7684\u91cf\u5ea6\u3002\u2014\u2014 \u767e\u5ea6\u767e\u79d1\n\nemmmmm,\u4ee5\u4e0a\u90fd\u662f\u5e9f\u8bdd\uff0c\u770b\u4e0d\u61c2\u5c31\u4e0d\u7528\u53bb\u7ba1\u4e86\n\n\u8fed\u4ee3\u52a0\u6df1\u641c\u7d22\u5c31\u662f\u4eba\u4e3a\u7684\u89c4\u5b9a\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u7684\u6700\u5927\u6df1\u5ea6\uff0c\u5e76\u9010\u6e10\u653e\u5bbd\uff0c\u76f4\u5230\u80fd\u641c\u7d22\u51fa\u6b63\u786e\u7ed3\u679c\uff0c\u8fd9\u79cd\u641c\u7d22\u65b9\u5f0f\u7ed3\u5408\u4e86\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u548c\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u7684\u4f18\u52bf\uff0c\u7a7a\u95f4\u5360\u7528\u4f1a\u5c0f\u4e8e\u5e7f\u641c\u5e76\u4e14\u5728\u641c\u7d22\u6811\u5f88\u6df1\u65f6\u5feb\u4e8e\u6df1\u641c\n\n~~A\\*\u7684\u8bdd\u6211\u4e2a\u4eba\u4e5f\u4e0d\u592a\u61c2\uff0c\u5c31\u5f53\u505a\u5947\u602a\u7684\u526a\u679d\u5427~~\n\n\u5728IDA\\*\u4e2dA\\*\u90e8\u5206\u4e00\u822c\u5199\u6cd5\u4e3a\n\n```cpp\nif(nowdeep+h()>maxdeep)\n\treturn;\n```\n\n\u5176\u4e2dnowdeep\u662f\u73b0\u5728\u641c\u7d22\u5230\u7684\u6df1\u5ea6\uff0ch()\u662f\u4f30\u4ef7\u51fd\u6570\uff0c\u4f30\u8ba1\u8fd8\u9700\u591a\u5c11\u6b65\u624d\u80fd\u4ece\u5f53\u524d\u72b6\u6001\u5230\u76ee\u6807\u72b6\u6001\uff0cmaxdeep\u662f\u5141\u8bb8\u641c\u7d22\u7684\u6700\u5927\u6df1\u5ea6\uff0c\u5982\u679c\u5f53\u524d\u6b65\u6570\u52a0\u4e0a\u9884\u671f\u6b65\u6570\u4e0d\u80fd\u5728\u6700\u5927\u6b65\u6570\u5185\u5230\u8fbe\u76ee\u6807\u72b6\u6001\uff0c\u526a\u679d\n\n\u5176\u4ed6\u7684\u89c1\u6ce8\u91ca\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<map>\n#define ll long long\nusing namespace std;\nchar s[5][5],t[5][5];\nint stax1[1000000];\nint stay1[1000000];\nint stax2[1000000];\nint stay2[1000000];\nmap<ll,bool>a;\nbool check(){//\u68c0\u67e5\u662f\u5426\u8fbe\u5230\u76ee\u6807\u72b6\u6001\n    for(int i=1;i<=4;i++)\n    for(int j=1;j<=4;j++)\n    if(s[i][j]!=t[i][j])\n    return 0;\n    return 1;\n}\nint h(){//A*\u7684\u4f30\u4ef7\u51fd\u6570\n    int num=0;\n    for(int i=1;i<=4;i++)\n    for(int j=1;j<=4;j++)\n    if(s[i][j]!=t[i][j])\n    num++;//num\u4e3a\u4e0e\u76ee\u6807\u72b6\u6001\u4f4d\u7f6e\u4e0d\u540c\u7684\u68cb\u5b50\u6570\u91cf\uff0c\u56e0\u4e3a\u6bcf\u79fb\u52a8\u4e00\u6b21\u6700\u591a\n    return (num+1)/2;//\u4f1a\u4f7f\u4e24\u4e2a\u68cb\u5b50\u5f52\u4f4d\uff0c\u6240\u4ee5\u81f3\u5c11\u8fd8\u9700\u8981num/2\u6b65\n}\nll che(int deep){//\u628a\u5f53\u524d\u68cb\u5c40\u8f6c\u5316\u6210\u4e00\u4e2a17\u4f4d\u6574\u6570\n\tll f=deep+1;//\u5176\u4e2d\u6700\u9ad8\u4f4d\u662f\u6df1\u5ea6\uff08+1\u662f\u4e3a\u4e86\u9632\u6b62\u524d\u5bfc\u96f6\u7684\u51fa\u73b0\uff09\n\tfor(int i=1;i<=4;i++){//\u4f59\u4e0b16\u4f4d\u662f\u5f53\u524d\u77e9\u9635\n\t\tfor(int j=1;j<=4;j++){\n\t\t\tf=f*10+s[i][j]-'0';\n\t\t}\n\t}\n\treturn f;\n}\nbool dfs(int deep,int maxdeep){\n\ta[che(deep)]=1;//\u8bb0\u5f55\u5f53\u524d\u68cb\u5c40\u5df2\u7ecf\u8d70\u8fc7\n    if(deep+h()>maxdeep){//A*\u90e8\u5206\n    \treturn 0;\n\t}\n    if(check()){//\u68c0\u67e5\u662f\u5426\u5230\u8fbe\u76ee\u6807\u72b6\u6001\n    \treturn 1;\n\t}\n    for(int i=1;i<=4;i++){//\u53ea\u6709\u5411\u53f3\u548c\u5411\u4e0b\u8d70\u6709\u610f\u4e49\uff0c\u56e0\u4e3a\u5411\u5de6\u548c\u5411\u4e0a\u548c\n        for(int j=1;j<=4;j++){//\u4e0a\u65b9\u548c\u5de6\u4fa7\u7684\u70b9\u5411\u53f3\u548c\u5411\u4e0b\u8d70\u7b49\u4ef7\n            if(j+1<=4&&s[i][j]!=s[i][j+1]){//\u76f8\u540c\u989c\u8272\u4ea4\u6362\u6ca1\u6709\u610f\u4e49\n                swap(s[i][j],s[i][j+1]);\n                if(a[che(deep+1)]==0){//\u53ea\u6709\u4e0b\u4e00\u6b65\u7684\u68cb\u5c40\u6ca1\u6709\u5230\u8fbe\u8fc7\u624d\u8fdb\u5165\n\t                stax1[deep]=i;//\u8bb0\u5f55\u600e\u4e48\u8d70\u7684\n\t                stay1[deep]=j;\n\t                stax2[deep]=i;\n\t                stay2[deep]=j+1;\n\t                if(dfs(deep+1,maxdeep)){\n\t                \treturn 1;\n\t\t\t\t\t}\n\t\t\t\t}\n                swap(s[i][j],s[i][j+1]);//\u590d\u539f\u68cb\u5c40\n            }\n            if(i+1<=4&&s[i][j]!=s[i+1][j]){\n                swap(s[i][j],s[i+1][j]);\n                if(a[che(deep+1)]==0){\n\t                stax1[deep]=i;\n\t                stay1[deep]=j;\n\t                stax2[deep]=i+1;\n\t                stay2[deep]=j;\n\t                if(dfs(deep+1,maxdeep)){\n\t                \treturn 1;\n\t\t\t\t\t}\n\t            }\n                swap(s[i][j],s[i+1][j]);\n            }\n        }\n    }\n    return 0;\n}\nint slove(){\n    if(check()) return 0;\n    int ans=1;\n    while(!dfs(0,ans)){//\u8fed\u4ee3\u52a0\u6df1\n    \tans++;//\u9010\u6e10\u653e\u5bbd\u9650\u5236\n    \ta.clear();\n\t}\n    return ans;\n}\nint main(){\n    for(int i=1;i<=4;i++){\n        for(int j=1;j<=4;j++){\n            cin>>s[i][j];\n        }\n    }\n    for(int i=1;i<=4;i++){\n        for(int j=1;j<=4;j++){\n            cin>>t[i][j];\n        }\n    }\n    int ans=slove();\n    printf(\"%d\\n\",ans);\n    for(int i=0;i<ans;i++)\n    printf(\"%d%d%d%d\\n\",stax1[i],stay1[i],stax2[i],stay2[i]);\n    return 0;\n}\n```",
        "postTime": 1539176772,
        "uid": 40223,
        "name": "\u4e16\u754c\u7b2c\u4e00\u849f\u84bb",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "## \u4e0d\u60f3\u6253\u72b6\u538b\u7684\u770b\u8fc7\u6765\n\n\u601d\u8def\uff1a\u66b4\u641c\u3002\n\n* \u65b9\u6cd5\uff1a\n1. \u5c06 $1$ \u770b\u4e3a\u6709\u68cb\u5b50\uff0c$0$ \u770b\u4e3a\u7a7a\u767d\u3002\n2. \u82e5 \u5f00\u59cb\u65f6\u6ca1\u68cb\u5b50\u7ed3\u675f\u65f6\u6709\u68cb\u5b50 \u8bb0\u4e3a\u7ec8\u70b9 \uff0c\u53cd\u4e4b\u8bb0\u4e3a\u8d77\u70b9\u3002\n3. \u4e00\u679a\u65d7\u5b50\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u6b65\u6570\u662f\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\n4. \u5c06 \u8d77\u70b9\u4e0e\u7ec8\u70b9 \u4e00\u4e00\u5bf9\u5e94\uff0c\u76f4\u63a5\u8fdb\u884c\u66b4\u641c\uff08\u6ca1\u6709\u4efb\u4f55\u526a\u679dQwQ\uff09\u3002\n5. \u8f93\u51fa\u8def\u5f84\u3002\n\n\n$$$$\n$$$$\n* \u65f6\u95f4\u590d\u6742\u5ea6\u8bc1\u660e\uff1a\n\n    \u5c06 \u8d77\u70b9\u4e0e\u7ec8\u70b9 \u4e00\u4e00\u5bf9\u5e94\uff0c\u7531\u4e8e\u6700\u591a\u6709 $8$ \u4e2a\u68cb\u5b50\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6 $O(8!)$\uff0c\u4e5f\u5c31\u662f $O(40320)$\u3002  ~~\u8fc7\u4e8e\u5408\u7406~~\n\n\n\n$$$$\n$$$$\n* \u68cb\u5b50\u6b65\u6570\u5408\u7406\u6027\u8bc1\u660e\uff1a\n    \n    \u82e5\u65e0\u68cb\u5b50\u62e6\u8def\uff0c\u5219\u4e3a\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u3002~~\uff08\u4e0d\u4fe1\u4f60\u4e0d\u77e5\u9053\u8fd9\u4e2a\uff09~~\n    \n\t\u82e5\u6709\u68cb\u5b50\u62e6\u8def\uff0c\u8fd0\u7528\u9012\u5f52\u601d\u60f3\uff1a\n    \n\t\u8bbe $x1,y1$ \u5904\u6709\u4e00\u68cb\u5b50\u8981\u5230 $x2,y2$,\u4f46\u88ab\u8def\u4e0a\u5904\u4e8e $x3,y3$ \u7684\u68cb\u5b50\u62e6\u4f4f\u4e86\u8def\u3002\n    \n\t\u90a3\u4e48\u6211\u4eec\u5c06\u95ee\u9898\u8f6c\u5316\u4e3a\u4e24\u4e2a\u5b50\u95ee\u9898\uff1a $x1,y1$ \u7684\u68cb\u5b50\u5230 $x3,y3$ \u548c $x3,y3$ \u7684\u68cb\u5b50\u5230 $x2,y2$\u3002\n    \n\t\u7531\u4e8e\u8d70\u7684\u662f\u6700\u77ed\u8def\uff0c$x3,y3$ \u4f4d\u4e8e $x1,y1$ \u5230 $x2,y2$ \u8def\u4e0a\uff0c\u6240\u4ee5 \u5f53\u524d\u95ee\u9898\u6b65\u6570 \u7b49\u4e8e \u4e24\u4e2a\u5b50\u95ee\u9898\u6b65\u6570\uff0c\n    \n    \u5e76\u4e14\u4e0d\u5b58\u5728\u5bf9\u5f53\u524d\u68cb\u5b50\u9020\u6210\u5f71\u54cd\u7684\u8d70\u6cd5\uff08\u56e0\u4e3a\u4f60\u8d70\u4e00\u4e2a\u68cb\u5b50\u65f6\u53ea\u4f1a\u671d\u7ec8\u70b9\u65b9\u5411\u8d70\uff09\uff0c\n    \n   \u6240\u4ee5\u4e00\u679a\u65d7\u5b50\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u6b65\u6570\u662f\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\n\n\n\n$$$$\n$$$$\n* \u90a3\u4e48\u5982\u4f55\u8f93\u51fa\u8def\u5f84\u5462\uff1f\n\n\t\u6211\u4eec\u5728\u66b4\u641c\u65f6\u8bb0\u5f55\u6700\u4f18\u89e3\u8def\u5f84\u3002\n    \n    1. \u5bf9\u6240\u6709\u5bf9\u5e94\u5173\u7cfb\uff0c\u5c06 \u8d77\u70b9\u548c\u7ec8\u70b9 \u9010\u4e00\u6c42\u89e3\u8f93\u51fa\u3002\n    2. \u5bf9\u6bcf\u5bf9\u8d77\u70b9\u7ec8\u70b9\uff0c\u50cf \u5408\u7406\u6027\u8bc1\u660e \u4e2d\u7684\u4e00\u6837\u9012\u5f52\u6c42\u89e3\u8f93\u51fa\u3002\n\n\n\n$$$$\n$$$$\n\n\u82e5\u8fd8\u6709\u4ec0\u4e48\u4e0d\u660e\u767d\u7684\u770b\u4ee3\u7801\u5427\uff0c\u6ce8\u91ca\u5f88\u8be6\u7ec6\u7684~\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint a[10][2],topa=0;//\u8bb0\u5f55\u8d77\u70b9 \nint b[10][2],topb=0;//\u8bb0\u5f55\u7ec8\u70b9 \nint QwQ[10];//\u5f53\u524d\u89e3\nint jl[10];//\u6700\u4f18\u89e3 jilu \n\nint c[10][10];//\u8bb0\u5f55\u5f00\u59cb\u65f6\u5730\u56fe \n\nint ans=100000000;//\u8bb0\u5f55\u6700\u4f18\u89e3\u6b65\u6570 \n \nvoid read(){//\u7b80\u5355\u7684\u8bfb\u5165 \n\tchar d;\n\tfor(int i=1;i<=4;i++){// \u68cb\u76d8\u521d\u59cb\u72b6\u6001 \n        for(int j=1;j<=4;j++){\n            cin>>d;\n            c[i][j]=d-'0'; \n        }\n    }\n    //-------------------------------------------//\n\t \n    for(int i=1;i<=4;i++){//  \u68cb\u76d8\u6700\u7ec8\u72b6\u6001 \n        for(int j=1;j<=4;j++){\n            cin>>d;\n            if(c[i][j]!=d-'0'){//\u82e5\u4e0e \u521d\u59cb\u72b6\u6001 \u4e0d\u7b26 \n                if(d=='1'){topb++;b[topb][0]=i;b[topb][1]=j;}//\u7ec8\u70b9 \n                else if(d=='0'){topa++;a[topa][0]=i;a[topa][1]=j;}//\u8d77\u70b9 \n            }\n        }\n    }\n}\nvoid dfs(int x,int jll){     //\u6ca1\u526a\u679d\u7684\u65e0\u8111\u641c\n\n//----- x\u4e3a\u5f53\u524d\u8d77\u70b9\u7f16\u53f7 \uff0cjll \u4e3a\u5f53\u524d\u6b65\u6570 ------// \n\n    if(x==topa+1){//\u82e5\u5f53\u524d\u7ed3\u675f\u4e86 \n    \tif(jll<ans){//--------------------//\u66f4\u65b0\u7b54\u6848 \n    \t\tfor(int i=1;i<=topa;i++)\n        \t\tjl[QwQ[i]]=i;\n        \tans=jll;\n\t\t}\n\t\treturn ;\n    }\n    //---------------------------------------// \u641c\u7d22\u4e0b\u4e00\u5c42 \n    for(int i=1;i<=topa;i++){\n        if(QwQ[i]==0){\n            QwQ[i]=x;//\u8fd9\u4e2a\u7ec8\u70b9\u88ab\u5f53\u524d\u8d77\u70b9\u5360\u7528 \n            dfs(x+1,jll+abs(a[x][0]-b[i][0])+abs(a[x][1]-b[i][1]));//\u4e0b\u4e00\u5c42  \n            QwQ[i]=0;//\u8fd9\u4e2a\u7ec8\u70b9\u88ab\u5f53\u524d\u8d77\u70b9\u89e3\u9664\u5360\u7528\n        }\n    }\n}\nvoid print(int x,int y,int z){//\u9012\u5f52\u7684\u8f93\u51fa \n\n\tint xx=x,yy=y;\n\tif(xx>b[z][0])xx--;\n\telse if(xx<b[z][0])xx++;\n\telse if(yy>b[z][1])yy--;\n\telse if(yy<b[z][1])yy++;\n//------------  \u63a5\u4e0b\u6765\u4f4d\u4e8e x,y \u7684 \u68cb\u5b50\u8981\u5230 xx,yy  ----// \n\n\tif(!c[xx][yy]){//\u53bb\u5f80\u4f4d\u7f6e\u6ca1\u6709\u68cb\u5b50 \n\t\tprintf(\"%d%d%d%d\\n\",x,y,xx,yy);\n\t\tswap(c[x][y],c[xx][yy]);\n\t\t//\u76f4\u63a5\u53bb \n\t\tx=xx,y=yy;\n\t\tif(!c[b[z][0]][b[z][1]])print(xx,yy,z);\n\t\t//\u95ee\u9898\u53d8\u4e3a xx,yy \u7684\u68cb\u5b50\u5230\u7ec8\u70b9 \n\t}\n\telse{//\u53bb\u5f80\u4f4d\u7f6e\u6709\u68cb\u5b50 \n\n\t\tprint(xx,yy,z);\n\t\t//\u5148\u8ba9\u6321\u8def\u7684\u68cb\u5b50\u5230\u7ec8\u70b9 \n\t\tprintf(\"%d%d%d%d\\n\",x,y,xx,yy);\n\t\tswap(c[x][y],c[xx][yy]);\n\t\t//\u6211\u4ee3\u66ff\u6321\u8def\u7684\u68cb\u5b50\u7ad9\u8fd9\u4e86\u4f4d\u5b50 QaQ \n\t}\n}\nint main(){\n    read();//\u8bfb\u5165 \n    dfs(1,0);//\u66b4\u641c \n    cout<<ans<<endl;//\u7b54\u6848\n\t//------------------------------------//\u6253\u5370\u8def\u5f84 \n    for(int i=1;i<=topa;i++){            //\n    \tprint(a[i][0],a[i][1],jl[i]);   // \n\t}//       \u8d77\u70b9x   \u8d77\u70b9y   \u7ec8\u70b9\u7f16\u53f7 //\n\t//--------------------------------// \n}\n```\n\n\n\u8fd9\u7bc7\u9898\u89e3\u5c31\u5230\u8fd9\u4e86\uff0c\u82e5\u6709\u9519\u8bef\u6216\u4e0d\u8db3\u8bf7\u5728\u8bc4\u8bba\u533a\u6307\u51fa\u3002\n\n\u6302\u4e0a\u6b64\u9898\u5f31\u5316\u7248 [P4289 [HAOI2008]\u79fb\u52a8\u73a9\u5177](https://www.luogu.com.cn/problem/P4289) \u548c\u66b4\u641c\u51fa\u6700\u4f18\u89e3\u7684\u7684 [dalao](https://www.luogu.com.cn/record/41056059)\u3002\n",
        "postTime": 1614774492,
        "uid": 399239,
        "name": "\u5929\u5357\u661f\u9b54\u828b",
        "ccfLevel": 0,
        "title": "P1225 \u9ed1\u767d\u68cb\u6e38\u620f \u9898\u89e3"
    },
    {
        "content": "SPJ\u4f3c\u4e4e\u8fd8\u662f\u6709\u70b9\u95ee\u9898\uff0c\u7531\u4e8e\u8f93\u51fa\u89e3\u7684\u987a\u5e8f\u7684\u539f\u56e0\uff0c\u4ee5\u4e0b\u4ee3\u7801\u65e0\u6cd5\u5728\u6d1b\u8c37AC...\n\n\u5f88\u660e\u663e\uff0c\u672c\u9898\u7b26\u5408\u5bbd\u5ea6\u4f18\u5148\u641c\u7d22\u201c\u4ece\u4e00\u79cd\u72b6\u6001\u6269\u5c55\u5230\u5176\u4ed6\u72b6\u6001\uff0c\u76f4\u5230\u76ee\u6807\u72b6\u6001\u201d\u7684\u6027\u8d28\u3002\u53e6\u5916\u7531\u4e8e\u8d77\u59cb\u72b6\u6001\u548c\u76ee\u6807\u72b6\u6001\u90fd\u5f88\u660e\u786e\uff0c\u6240\u4ee5\u53ef\u4ee5\u91c7\u7528\u53cc\u5411\u641c\u7d22\u6765\u8fdb\u884c\u4f18\u5316\u3002\n\n\u5173\u4e8e\u72b6\u6001\u538b\u7f29\uff0c\u697c\u4e0b\u795e\u7287\u4eec\u5df2\u7ecf\u89e3\u91ca\u5f97\u975e\u5e38\u8be6\u7ec6\uff0c\u6545\u4e0d\u518d\u8d58\u8ff0\u3002\u6211\u4eec\u91cd\u70b9\u6765\u770b\u53cc\u5411\u641c\u7d22\u3002\n\n\u672c\u9898\u4e2d\uff0c\u53cc\u5411\u641c\u7d22\u7684\u601d\u8def\u662f\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u72b6\u6001\uff0c\u8bb0\u5f55\u4ece\u8d77\u59cb\u72b6\u6001\uff08\u6216\u76ee\u6807\u72b6\u6001\uff09\u5230\u8be5\u72b6\u6001\u6269\u5c55\u7684\u6b21\u6570\uff0c\u548c\u6bcf\u4e00\u6b21\u4ea4\u6362\u7684\u4e24\u4e2a\u76f8\u90bb\u68cb\u5b50\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u6b63\u5411\u641c\u7d22\uff08\u4ece\u8d77\u59cb\u72b6\u6001\u5f00\u59cb\u7684\u641c\u7d22\uff09\u548c\u53cd\u5411\u641c\u7d22\uff08\u4ece\u76ee\u6807\u72b6\u6001\u5f00\u59cb\u7684\u641c\u7d22\uff09\u540c\u65f6\u6269\u5c55\u5230\u67d0\u4e00\u72b6\u6001\uff0c\u5219\u7ed3\u675f\u641c\u7d22\u3002\n\n\u8bf7\u6ce8\u610f\u4ee3\u7801\u4e2dincr()\u51fd\u6570\u548csgn()\u51fd\u6570\u7684\u4f5c\u7528\u3002incr()\u7684\u4f5c\u7528\u662f\u5bf9\u6574\u6570\u7684\u7edd\u5bf9\u503c\u52a01\uff0csgn()\u8fd4\u56de\u6574\u6570\u7684\u7b26\u53f7\u3002\u4ece\u8d77\u59cb\u72b6\u6001\u6269\u5c55\u800c\u6765\u7684\u72b6\u6001\u5728vis[]\u4e2d\u8868\u793a\u4e3a\u6b63\u6570\uff0c\u4ece\u76ee\u6807\u72b6\u6001\u6269\u5c55\u800c\u6765\u7684\u5219\u8868\u793a\u4e3a\u8d1f\u6570\uff0c\u8981\u5f97\u5230\u603b\u7684\u6b65\u6570\uff0c\u53ea\u9700\u5c06\u5b83\u4eec\u7684\u7edd\u5bf9\u503c\u76f8\u52a0\u518d\u51cf1\u5373\u53ef\u3002\u7528\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff0c\u53ea\u9700\u89811\u4e2a\u961f\u5217\u5373\u53ef\u8fdb\u884c\u53cc\u5411\u641c\u7d22\uff0c\u8f93\u51fa\u65f6\u4e5f\u65e0\u9700\u4f7f\u7528\u9012\u5f52\u8c03\u7528\u7684\u65b9\u5f0f\uff0c\u6bd4\u8f83\u65b9\u4fbf\u3002\n\nP.S. \u6ce8\u610f\u5173\u952e\u5b57\u95ee\u9898\uff0c\u5f53\u5fc3\u88ab\u5751... ...\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<vector>\n#include<queue>\n#include<map>\n#include<iostream>\nusing namespace std;\nint a[5][5],start,endd,pnt=15;\nvector<int> ans1,ans2;\nmap<int,int> vis;\nmap<int,vector<int> >fun;\nint abs(int x)\n{\n    if(x>=0)return x;\n    return -x;\n}\nint sgn(int x)\n{\n    if(x==0)return 0;\n    if(x>0)return 1;\n    return -1;\n}\nint incr(int x)\n{\n    if(x<0)return x-1;\n    return x+1;\n}\nint bfs()\n{\n    queue<int> que;\n    que.push(start);\n    vis[start]=1;\n    que.push(endd);\n    vis[endd]=-1;\n    while(!que.empty())\n    {\n        int now=que.front();\n        que.pop();\n        bool r1,r2;long long temp;\n        for(int i=1; i<=4; i++)\n        {\n            for(int j=1; j<=4; j++)\n            {\n                if(i<4)\n                {\n                    r1=now&(1<<a[i][j]),r2=now&(1<<a[i+1][j]);\n                    temp=now-(1<<a[i][j])*r1+(1<<a[i+1][j])*r1-(1<<a[i+1][j])*r2+(1<<a[i][j])*r2;\n                    if(!vis[temp])\n                    {\n                        vector<int> c;\n                        c=fun[now];\n                        c.push_back(i*1000+j*100+(i+1)*10+j);\n                        que.push(temp);\n                        fun[temp]=c;\n                        vis[temp]=incr(vis[now]);\n                    }\n                    else if(sgn(vis[now])!=sgn(vis[temp]))\n                    {\n                        fun[temp].push_back(i*1000+j*100+(i+1)*10+j);\n                        ans1=fun[now],ans2=fun[temp];\n                        return abs(vis[now])+abs(vis[temp])-1;\n                    }\n                }\n                if(j<4)\n                {\n                    r1=now&(1<<a[i][j]),r2=now&(1<<a[i][j+1]);\n                    temp=now-(1<<a[i][j])*r1+(1<<a[i][j+1])*r1-(1<<a[i][j+1])*r2+(1<<a[i][j])*r2;\n                    if(!vis[temp])\n                    {\n                        vector<int> c;\n                        c=fun[now];\n                        c.push_back(i*1000+j*100+i*10+j+1);\n                        que.push(temp);\n                        fun[temp]=c;\n                        vis[temp]=incr(vis[now]);\n                    }\n                    else if(sgn(vis[now])!=sgn(vis[temp]))\n                    {\n                        fun[temp].push_back(i*1000+j*100+i*10+j+1);\n                        ans1=fun[now],ans2=fun[temp];\n                        return abs(vis[now])+abs(vis[temp])-1;\n                    }\n                }\n                \n            }\n        }\n    }\n}\nint main()\n{\n    for(int i=1; i<=16; i++)\n    {\n        int tmp;\n        scanf(\"%1d\",&tmp);\n        start<<=1;\n        start+=tmp;\n    }\n    for(int i=1; i<=16; i++)\n    {\n        int tmp;\n        scanf(\"%1d\",&tmp);\n        endd<<=1;\n        endd+=tmp;\n    }\n    for(int i=1; i<=4; i++)\n    {\n        for(int j=1; j<=4; j++)\n        {\n            a[i][j]=pnt;\n            pnt--;\n        }\n    }\n    int ans=bfs();\n    printf(\"%d\\n\",ans);\n    for(int i=0;i<ans1.size();i++)\n    {\n        printf(\"%d\\n\",ans1[i]);\n    }\n    for(int i=0;i<ans2.size();i++)\n    {\n        printf(\"%d\\n\",ans2[i]);\n    }\n    return 0;\n}\n```",
        "postTime": 1507565018,
        "uid": 19250,
        "name": "\u575a\u51b3\u6740\u6bd22008",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "[P1225 \u9ed1\u767d\u68cb\u6e38\u620f](https://www.luogu.com.cn/problem/P1225)\n\n\u7b80\u5316\u7248[P4289 [HAOI2008]\u79fb\u52a8\u73a9\u5177](https://www.luogu.com.cn/problem/P4289)\u3002\n\n## \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u4f60\u4e00\u4e2a $4\\times4$ \u7684 $01$ \u77e9\u9635\uff0c\u6bcf\u6b21\u53ef\u4ee5\u4ea4\u6362\u76f8\u90bb\u7684\u4e00\u5bf9 $0$ \u548c $1$ \u3002\u6c42\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u4f7f\u5f97\u521d\u59cb\u77e9\u9635\u53d8\u6210\u76ee\u6807\u77e9\u9635\uff0c\u5e76\u8f93\u51fa\u5982\u4f55\u64cd\u4f5c\u3002\n\n## Solution\n\n$01$ \u63d0\u793a\u4e8c\u8fdb\u5236\u72b6\u538b\u3002\n\n\u6709\u59cb\u6709\u7ec8\u8003\u8651**\u53cc\u5411\u5e7f\u641c**\u3002\n\n---\n\n\u53cc\u5411\u5e7f\u641c\u662f\u5565\uff1f\n\n\u4ece\u8d77\u70b9\u548c\u7ec8\u70b9\u5206\u522b\u62d3\u5c55\u72b6\u6001\uff0c\u5f53\u4e24\u8fb9\u7684\u89e3\u7b54\u6811\u7b2c\u4e00\u6b21\u91cd\u5408\u65f6\u627e\u5230\u7b54\u6848\u3002\n\n\u9700\u8981\u7279\u5224\u4e00\u5f00\u59cb\u5c31\u662f\u7b54\u6848\u3002\n\n\u6ce8\u610f\u8fd8\u539f\u72b6\u6001\u3002\n\n\u9012\u5f52\u8f93\u51fa\u65b9\u6848\u5373\u53ef\u3002\n\n[\u8fd8\u662f\u4e0d\u592a\u660e\u767d\u70b9\u8fd9\u91cc](https://www.luogu.com.cn/blog/nizhuan/xue-xi-bi-ji-shuang-xiang-guang-sou-hu-01bfs)\n\n\u5177\u4f53\u6765\u8bf4\u6bcf\u4e00\u4e2a\u6570\u5b57\u5bf9\u5e94\u4e00\u4e2a\u77e9\u9635\uff0c\u6bcf\u6b21\u4ece\u961f\u5934\u53d6\u51fa\u6570\u5b57\u8fd8\u539f\u77e9\u9635\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $1$ \u62d3\u5c55\u77e9\u9635\u3002\u91cd\u65b0\u72b6\u538b\u5224\u91cd\uff0c\u8bb0\u5f55\u524d\u9a71\u65b9\u4fbf\u540e\u9762\u9012\u5f52\u8f93\u51fa\u3002\n\n## Code\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n#include <iostream>\n#include <cmath>\n#include <cstring>\n#include <queue>\n\nusing namespace std;\n\nint s,e,vis[70000],a[10][10],step[70000],nxt[4][2]={{0,1},{1,0},{0,-1},{-1,0}};\npair <int,int> last[70000];\nqueue <int> q;\n\nvoid prints(int x)//\u9012\u5f52\u8f93\u51fa\n{\n\tif(!x) return ;\n\tprints(last[x].first);\n\tif(last[x].second) printf(\"%d\\n\",last[x].second); return ;\n}\n\nvoid printe(int x)\n{\n\tif(!x) return ;\n\tif(last[x].second) printf(\"%d\\n\",last[x].second);\n\tprinte(last[x].first); return ;\n}\n\nint main()\n{\n// \tfreopen(\"work.in\",\"r\",stdin); freopen(\"work.out\",\"w\",stdout);\n\tchar t;//\u72b6\u538b\n\tfor(int i=1;i<=16;i++) {scanf(\" %c\",&t); s=(s<<1)+t-'0';}\n\tfor(int i=1;i<=16;i++) {scanf(\" %c\",&t); e=(e<<1)+t-'0';}\n\tif(s == e) return printf(\"0\"),0;\n\tvis[s]=1; vis[e]=2; step[s]=0; step[e]=0; last[s].first=last[e].first=0;\n\tq.push(s); q.push(e);\n\tint x,now;\n\twhile(!q.empty())\n\t{\n\t\tx=now=q.front(); q.pop();\n\t\tfor(int i=4;i;i--)\n\t\t\tfor(int j=4;j;j--) {a[i][j]=x&1; x>>=1;}\n\t\tfor(int i=1,nx,ny;i<=4;i++)\n\t\t\tfor(int j=1;j<=4;j++)\n\t\t\t\tif(a[i][j])\n\t\t\t\t\tfor(int u=0;u<4;u++)\n\t\t\t\t\t{\n\t\t\t\t\t\tnx=i+nxt[u][0]; ny=j+nxt[u][1]; x=0;\n\t\t\t\t\t\tif(nx < 1 || nx > 4 || ny < 1 || ny > 4) continue;\n\t\t\t\t\t\tif(!a[nx][ny])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ta[i][j]=0; a[nx][ny]=1;\n\t\t\t\t\t\t\tfor(int k=1;k<=4;k++)\n\t\t\t\t\t\t\t\tfor(int l=1;l<=4;l++) x=(x<<1)+a[k][l];\n\t\t\t\t\t\t\ta[i][j]=1; a[nx][ny]=0;\n\t\t\t\t\t\t\tif(vis[x]+vis[now] == 3)//\u627e\u5230\u7b54\u6848\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif(vis[x] == 1) x^=now^=x^=now;\n\t\t\t\t\t\t\t\tprintf(\"%d\\n\",step[x]+step[now]+1);\n\t\t\t\t\t\t\t\tprints(now); printf(\"%d\\n\",i*1000+j*100+nx*10+ny); printe(x);\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(vis[x]) continue;\n\t\t\t\t\t\t\tlast[x].first=now; last[x].second=i*1000+j*100+nx*10+ny;\n\t\t\t\t\t\t\tvis[x]=vis[now]; step[x]=step[now]+1; q.push(x);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t}\n// \tfclose(stdin); fclose(stdout);\n\treturn 0;\n}\n```\n\u53cc\u5411\u5e7f\u641c\uff01\u5f88\u5feb\u554a\uff01\u4e0d\u52a0\u4f18\u5316\u622a\u81f32021\u5e745\u67081\u65e5\u8dd1\u5230\u4e86\u6700\u4f18\u89e3\u7b2c\u4e00\u9875\u3002\n\n# $\\text{Thank you for your reading!}$",
        "postTime": 1619842160,
        "uid": 240191,
        "name": "MY\uff08\u4e00\u540d\u849f\u84bb\uff09",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "## \u9898\u610f\u7b80\u8ff0\n\n\u6c42\u4ece\u4e00\u4e2a $4\\times4$ \u7684\u65b9\u9635\u53d8\u6210\u53e6\u4e00\u4e2a $4\\times4$ \u7684\u65b9\u9635\u6700\u5c11\u9700\u8981\u7684\u6b65\u6570\u4ee5\u53ca\u6b65\u9aa4\u3002\n**\uff08\u68cb\u5b50\u53ea\u80fd\u4e0e\u76f8\u90bb\u7684\u68cb\u5b50\u4ea4\u6362\uff09**\n\n\u8f93\u5165\uff1a\n\n* \u4e24\u4e2a $4\\times4$ \u7684\u65b9\u9635\uff0c\u53ea\u5305\u542b8\u4e2a0\u548c8\u4e2a1\u3002\n\n\u8f93\u51fa\uff1a\n\n* \u6700\u5c11\u9700\u8981\u7684\u6b65\u6570\u3002\n* \u64cd\u4f5c\u7684\u6bcf\u4e00\u6b65\uff0c\u683c\u5f0f $abcd$\uff0c\u8868\u793a\u5c06\u68cb\u5b50\u4ece $(a,b)$ \u79fb\u52a8\u5230 $(c,d)$\u3002\n\n## \u9898\u76ee\u5206\u6790\n\n\u8fd9\u9053\u9898\u4f7f\u7528bfs\u3002\n\n\u641c\u7d22\u65f6\u6ce8\u610f\u4ea4\u6362 $(a,b)$ \u548c $(a+1,b)$ \u4e0e \u4ea4\u6362 $(a+1,b)$ \u548c $(a,b)$ \u662f\u4e00\u6837\u7684\u6548\u679c\uff0c\u5f53\u679a\u4e3e\u5230 $(a+1,b)$ \u65f6\u518d\u53bb\u4e0e $(a,b)$ \u4ea4\u6362\u5c31\u6ca1\u6709\u610f\u4e49\u4e86\uff0c\u56e0\u4e3a\u5148\u679a\u4e3e $(a,b)$\uff0c\u5982\u679c\u80fd\u4ea4\u6362\u5df2\u7ecf\u4ea4\u6362\u8fc7\u4e86\u3002$(a,b)$ \u4e0e $(a,b+1)$ \u4e5f\u662f\u540c\u6837\u7684\u9053\u7406\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff0c\u5bf9\u4e8e\u6bcf\u4e2a $(a,b)$ \uff0c\u6211\u4eec\u641c\u7d22\u65f6\u4ec5\u9700\u4e0e\u53f3\u8fb9\u7684\u548c\u4e0b\u9762\u7684\u8fdb\u884c\u4ea4\u6362\u3002\u4ea4\u6362\u4e24\u4e2a\u76f8\u540c\u7684\u6570\u4e5f\u6ca1\u6709\u610f\u4e49\uff0c\u6240\u4ee5\u53ef\u4ee5\u8fdb\u884c\u5224\u65ad\u6765\u7701\u7565\u3002\n\n\u56e0\u4e3a\u68cb\u76d8\u53ea\u5305\u542b0\u548c1\uff0c\u4e14\u53ea\u670916\u4f4d\uff0c\u6240\u4ee5\u53ef\u4ee5\u538b\u7f29\u6210\u4e8c\u8fdb\u5236\u65b9\u4fbf\u50a8\u5b58\u3002\n\n![\"\u6837\u4f8b\"](https://cdn.luogu.com.cn/upload/image_hosting/yql12qcj.png)\n\u6bd4\u5982\u8bf4\u6837\u4f8b\uff0c\u5c06\u8f93\u5165\u7684\u4e24\u4e2a\u65b9\u9635\u8bb0\u4e3a $a$ \u548c $b$\uff0c\u5219 $a$ \u53ef\u4ee5\u538b\u7f29\u6210 $1111000011100010$ \u5373 $61666$\u3002\n\n![\"\u6837\u4f8b-\u4e8c\u8fdb\u5236\"](https://cdn.luogu.com.cn/upload/image_hosting/q5auaj6u.png)\n\n\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 ```a & (1<<i)``` \u6765\u53d6\u5f97\u4ece\u5de6\u5f80\u53f3\u7b2c $i$ \u4f4d\u7684\u503c\uff0c\u5219\u5b83\u53f3\u8fb9\u7684\u503c\u4e3a ```a & (1<<(i-1))```\uff0c\u4e0b\u9762\u7684\u503c\u4e3a ```a & (1<<(i-4))```\u3002\n![\"\"](https://cdn.luogu.com.cn/upload/image_hosting/5wjm99cg.png)\n![\"\"](https://cdn.luogu.com.cn/upload/image_hosting/c8dxbkuj.png)\n\n\u4e3a\u4e86\u8bb0\u5f55\u64cd\u4f5c\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u77e5\u9053\u7b2c $i$ \u4f4d\u5728\u539f\u672c\u7684\u65b9\u9635\u4e2d\u5bf9\u5e94\u7684\u5750\u6807\uff0c\u5b83\u7684\u7eb5\u5750\u6807\u5c31\u662f $\\lfloor i\\div4 \\rfloor$\uff0c\u6a2a\u5750\u6807\u5373\u4e3a $i\\mod4$\u3002\n\n\u7531\u4e8e\u8981\u88ab\u4ea4\u6362\u7684\u4e24\u4f4d\u5fc5\u5b9a\u662f\u4e00\u4e2a0\u4e00\u4e2a1\uff0c\u6240\u4ee5\u4ea4\u6362\u4e24\u4f4d\u53ef\u4ee5\u5c06\u8fd9\u4e24\u4f4d\u5f02\u62161\n\n$$\n0\\oplus1=1\n$$\n$$\n1\\oplus1=0\n$$\n\n\u8be6\u60c5\u8bf7\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstruct record //\u7528\u4e8e\u8bb0\u5f55\u6b65\u9aa4\n{\n    int x1;\n    int y1;\n    int x2;\n    int y2;\n};\nstruct status //\u6bcf\u4e00\u4e2a\u72b6\u6001\n{\n    int num;            //\u65b9\u9635\u7684\u4e8c\u8fdb\u5236\u5f62\u5f0f\n    int t;              //\u9700\u8981\u7684\u6b21\u6570\n    vector<record> rec; //\u8bb0\u5f55\u6b65\u9aa4\n};\nstatus a, b;     //\u521d\u59cb\u72b6\u6001\u548c\u76ee\u6807\u72b6\u6001\nqueue<status> q; //\u7528\u4e8ebfs\nbool vis[66666]; //\u8bb0\u5f55\u67d0\u4e2a\u65b9\u9635\u662f\u5426\u88ab\u641c\u8fc7\nvoid bfs()\n{\n    q.push(a);\n    while (!q.empty())\n    {\n        status tmp = q.front();\n        q.pop();\n        if (vis[tmp.num]) //\u5982\u679c\u641c\u5230\u8fc7\u90a3\u4e48\u5c31\u80af\u5b9a\u4e0d\u662f\u6700\u4f18\u89e3\n        {\n            continue;\n        }\n        vis[tmp.num] = 1;\n        if (tmp.num == b.num) //\u5982\u679c\u4e0e\u76ee\u6807\u76f8\u540c\u5c31\u8f93\u51fa\n        {\n            cout << tmp.t << endl;\n            for (vector<record>::iterator it = tmp.rec.begin(); it != tmp.rec.end(); ++it)\n            {\n                cout << (it->x1) << (it->y1) << (it->x2) << (it->y2) << endl;\n            }\n            return;\n        }\n        for (int i = 15; i >= 0; --i) //\u679a\u4e3e\u65b9\u9635\u6bcf\u4e00\u4f4d\n        {\n            /**\n             * 15-i\u8868\u793a\u73b0\u5728\u662f\u65b9\u9635\u4e8c\u8fdb\u5236\u7684\u54ea\u4e00\u4f4d\uff08\u4ece\u5de6\u5230\u53f3\uff09\n             * (15-i) / 4 \u5373 (15-i) >> 2 \u8868\u793a\u76f8\u5f53\u4e8e\u539f\u6765\u7684\u7b2c\u51e0\u884c\n             * (15-i) % 4 \u5373 (15-i) - (y << 2) \u8868\u793a\u76f8\u5f53\u4e8e\u539f\u6765\u7684\u7b2c\u51e0\u5217\n            */\n            int y = (15 - i) >> 2;\n            int x = (15 - i) - (y << 2);\n\n            /*tmp.num & (1<<i) \u8868\u793a\u5f53\u524d\u65b9\u9635\u7b2ci\u4f4d\uff0c\u8fd9\u91cc\u7528aaa\u50a8\u5b58\u65b9\u4fbf\u4f7f\u7528*/\n            int aaa = 1 << i;\n\n            status bbb; //\u4e34\u65f6\u50a8\u5b58\u4e0b\u4e00\u4e2a\u72b6\u6001\n            bbb.t = tmp.t + 1;\n            bbb.rec = tmp.rec;\n\n            /**\n             * \u5de6\u53f3\u4ea4\u6362\n             * \u9650\u5236 x<3 \u9632\u6b62\u51fa\u754c\n             * \u5982\u679c\u7b2ci\u4f4d\u4e0e\u7b2ci+1\u4f4d\u76f8\u7b49\u5c31\u4e0d\u7528\u4ea4\u6362\u4e86\n             * \u7b2ci+1\u4f4d\u572810\u8fdb\u5236\u91cc\u5bf9\u5e94\u7684\u503c\u5c31\u662f\u7b2ci\u4f4d\u7684\u503c\u7684\u4e00\u534a\n             * \u56e0\u4e3a\u8fd9\u91cc\u7684x\u548cy\u662f\u4ece0\u5f00\u59cb\u7684\uff0c\u6240\u4ee5\u8bb0\u5f55\u65f6\u8981\u52a0\u4e00\n             */\n            bbb.num = tmp.num ^ aaa ^ (aaa >> 1);\n            if (x < 3 and (tmp.num & aaa) ^ (tmp.num & (aaa >> 1)))\n            {\n                bbb.rec.push_back((record){y + 1, x + 1, y + 1, x + 2});\n                q.push(bbb);\n                bbb.rec.pop_back();\n            }\n\n            /**\n             * \u4e0a\u4e0b\u4ea4\u6362\n             * \u540c\u4e0a\uff0c\u4e0d\u8fc7\u8fd9\u6b21\u662f\u4e0e\u4e0b\u9762\u7684\u4ea4\u6362\uff0c\u9700\u8981\u53f3\u79fb\u4e00\u884c\u53734\u4f4d\n             */\n            bbb.num = tmp.num ^ aaa ^ (aaa >> 4);\n            if (y < 3 and (tmp.num & aaa) ^ (tmp.num & (aaa >> 4)))\n            {\n                bbb.rec.push_back((record){y + 1, x + 1, y + 2, x + 1});\n                q.push(bbb);\n                bbb.rec.pop_back();\n            }\n        }\n    }\n}\nint main()\n{\n    char ch;\n\n    /*\u5c06\u8bfb\u5165\u7684\u65b9\u9635\u53d8\u6210\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u5e76\u7528int\u4fdd\u5b58*/\n    for (int i = 15; i >= 0; --i)\n    {\n        cin >> ch;\n        a.num += (ch - '0') * (1 << i);\n    }\n    for (int i = 15; i >= 0; --i)\n    {\n        cin >> ch;\n        b.num += (ch - '0') * (1 << i);\n    }\n\n    /*\u7279\u5224\uff0c\u5982\u679c\u4e00\u5f00\u59cb\u5c31\u76f8\u540c\u90a3\u5c31\u4e0d\u9700\u8981\u641c\u7d22\u4e86*/\n    if (a.num == b.num)\n    {\n        cout << 0;\n        return 0;\n    }\n\n    bfs();\n    return 0;\n}\n```\n",
        "postTime": 1617436323,
        "uid": 309811,
        "name": "\u4e00\u53ea\u5c0fH",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u521a\u5b66\u4e86\u72b6\u6001\u538b\u7f29\u8001\u5e08\u8bb2\u4e86\u8fd9\u9898\u53d1\u4e2a\u9898\u89e3\n\n~~\u4ee3\u7801\u5565\u7684\u90fd\u770b\u7684\u8001\u5e08\u7684~~\n\n****\u72b6\u6001\u538b\u7f29+\u5e7f\u641c****\n\n\u8001\u5e08\u7ed9\u603b\u7ed3\u4e86\u4e00\u4e2a\u5927\u6982\u601d\u8003\u65b9\u5411\n\n1.\u68cb\u76d8\u53d8\u6574\u6570\u3002\n\n2.\u6574\u6570\u8fd8\u539f\u6210\u68cb\u76d8\u3002\n\n3.\u51b3\u7b56 \u5411\u5de6\uff1aa\u548ca-1\u5bf9\u8c03\uff1b\u5411\u4e0a\uff1aa\u548ca-4\u5bf9\u8c03\uff08\u7f6e\u53cd\uff09\n\n4.\u6c42a\u7684\u4e8c\u8fdb\u5236\uff0c\u7f6e\u53cd\n\n5.\u5e7f\u641c\u6846\u67b6\n\n\u5411\u5de6\u548c\u5411\u53f3\u662f\u4e00\u6837\u7684\uff0c\u5411\u4e0a\u548c\u5411\u4e0b\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u53ea\u8981\u679a\u4e3e\u4e24\u4e2a\u5c31\u53ef\u4ee5\u4e86~~\u8001\u5e08\u8fd8\u8bf4\u5e94\u8be5\u5148\u5f80\u4e0a\u4ea4\u6362\u518d\u5f80\u5de6\u4ea4\u6362\u4f46\u6211\u8fd8\u6ca1\u60f3\u51fa\u539f\u56e0..~~\n\n[\u4ee3\u7801 is here!](https://www.luogu.org/paste/9jm63nhj)",
        "postTime": 1526297002,
        "uid": 66141,
        "name": "WSEDSWZD",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u5206\u6790\u9898\u76ee\uff0c\u4e0d\u96be\u770b\u51fa\u672c\u9898\u53ef\u4ee5\u7528**\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22**\u505a\uff0c\u4f46\u662f\u7531\u4e8e\u76f4\u63a5\u641c\u7d22\u7684\u72b6\u6001\u592a\u591a\uff0c\u65f6\u95f4\u4e0a\u80af\u5b9a\u4f1aT\u6389\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u9002\u5f53\u52a0\u4ebf\u70b9\u4f18\u5316\uff1a\n\n## \u54c8\u5e0c\u8868\n\u901a\u8fc7\u9898\u4e2d\u7684\u884c\u5217\u90fd\u4e3a4\u4fbf\u53ef\u4ee5\u60f3\u5230\u7528\u4e8c\u8fdb\u5236\u6570\uff08\u72b6\u538b\uff09\u6765\u5efa\u7acb\u8868\u793a\u641c\u7d22\u72b6\u6001\uff0c\u5177\u4f53\u5185\u5bb9\u89c1\u6ce8\u91ca\u3002\n\n## \u53cc\u5411\u5e7f\u641c\n\u9898\u76ee\u4e2d\u5df2\u7ecf\u660e\u786e\u7ed9\u51fa\u4e86\u641c\u7d22\u521d\u59cb\u72b6\u6001\u548c\u76ee\u6807\u72b6\u6001\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c1d\u8bd5\u7528\u53cc\u5411\u5e7f\u641c\u6765\u51cf\u5c11\u641c\u7d22\u5de5\u4f5c\u91cf\u3002\n\n\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u80fd\u51cf\u5c11\u641c\u7d22\u5de5\u4f5c\u91cf\uff0c\u6211\u7ed9\u5927\u5bb6\u753b\u4e86\u4e24\u4e2a\u56fe\uff1a\n```cpp\n//\u5355\u5411\u641c\u7d22\n\t\t\t\t***\n\t\t\t ******\n\t\t  *********\n       \t*********** \n\t  *************\n   ****************\nT*****************S\n   ****************\n      *************\n         **********\t\n         \t*******\n\t\t\t   ****\n\t\t\t   \t***\n\n//\u53cc\u5411\u641c\u7d22\n         * *********\n\t  **** *********\n   ******* *********\nT********* ********S\n   ******* *********\n      **** *********\n         * *********\n```\n\u5177\u4f53\u7684\u4ee3\u7801\u4e3a\uff1a\n```cpp\nfor(t[0]=t[1]=w[1]=w[0]=1;t[0]<=w[0]&&t[1]<=w[1];t[0]=-~t[0],t[1]=-~t[1]){\n\t\tsolve(0);solve(1);\n\t}\n\n\n------------------------------------\n\ninline void solve(int k){\n\tRI x,y,xi,yi,p=d[k][t[k]],v;\n\tif(f[k^1][p]){\n\t\tprintf(\"%d\\n\",f[0][p]+f[1][p]);\n\t\tprint1(h[0][p]);print2(h[1][p]);\n\t\texit(0);\n\t}\n\tfor(RI i=1;i<=4;i=-~i)\n\t\tfor(RI j=1;j<=4;j=-~j)\n\t\t\tfor(RI t=0;t<4;t=-~t){\n\t\t\t\tx=i+mx[t];y=j+my[t];\n\t\t\t\tif(x<1||y<1||x>4||y>4) continue;\n\t\t\t\txi=get(i,j);yi=get(x,y);\n\t\t\t\tif(!(p&lg[xi])==!(p&lg[yi])) continue;\n\t\t\t\tv=p^lg[xi]^lg[yi];\n\t\t\t\tif(f[k][v]) continue;\n\t\t\t\td[k][++w[k]]=v;ans[k][w[k]].a=i;\n\t\t\t\tans[k][w[k]].b=j;ans[k][w[k]].c=x;\n\t\t\t\tans[k][w[k]].d=y;ans[k][w[k]].n=h[k][p];\n\t\t\t\th[k][v]=w[k];f[k][v]=-~f[k][p];\n\t\t\t}\n}\n```\n\u800c\u5728\u6b64\u4e4b\u4e2d\uff0c\u4e5f\u5de7\u5999\u5730\u8fd0\u7528\u4e86\u4e00\u4e9b\u4f4d\u8fd0\u7b97\uff0c\u5177\u4f53\u89c1\u6ce8\u91ca\u3002\n\n\u6700\u540e\u5949\u4e0a\u5b8c\u6574\u7684AC\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define RI register int\nusing namespace std;\nconst int N=1<<16;\nstruct wu{\n\tint t,n,a,b,c,d;\n}ans[2][N];\nint f[2][N],t[2],w[2],d[2][N],lg[17],h[2][N];\nint mx[]={0,1,0,-1},my[]={1,0,-1,0},pa[]={1,4,-1,-4};\ninline int get(int x,int y){return 21-(x<<2)-y;}//\u537316-((x-1)*4+y)\ninline void print1(int x){\n\tif(!x) return;\n\tprint1(ans[0][x].n);//\u4ece\u91cc\u5f80\u5916\u8f93\u51fa\n\tprintf(\"%d%d%d%d\\n\",ans[0][x].a,ans[0][x].b,ans[0][x].c,ans[0][x].d);\n}\ninline void print2(int x){\n\tif(!x) return;\n\tprintf(\"%d%d%d%d\\n\",ans[1][x].a,ans[1][x].b,ans[1][x].c,ans[1][x].d);\n\tprint2(ans[1][x].n);//\u4e0eprint1\u76f8\u53cd\n}\ninline void solve(int k){\n\tRI x,y,xi,yi,p=d[k][t[k]],v;\n\tif(f[k^1][p]){//\u5982\u679c\u53e6\u4e00\u8fb9\u4e5f\u641c\u5230\u4e86\u6b64\u72b6\u6001\uff0c\u8f93\u51fa\n\t\tprintf(\"%d\\n\",f[0][p]+f[1][p]);\n\t\tprint1(h[0][p]);print2(h[1][p]);\n\t\texit(0);\n\t}\n\tfor(RI i=1;i<=4;i=-~i)\n\t\tfor(RI j=1;j<=4;j=-~j)\n\t\t\tfor(RI t=0;t<4;t=-~t){\n\t\t\t\tx=i+mx[t];y=j+my[t];\n\t\t\t\tif(x<1||y<1||x>4||y>4) continue;\n\t\t\t\txi=get(i,j);yi=get(x,y);//\u5f97\u5230\u8fd9\u4e2a\u4f4d\u7f6e\u7684\u4f4d\u6743\n\t\t\t\tif(!(p&lg[xi])==!(p&lg[yi])) continue;//\u5f53\u76f8\u90bb\u7684\u68cb\u5b50\u989c\u8272\u76f8\u540c\u65f6\uff0c\u76f4\u63a5\u8df3\u8fc7\n\t\t\t\tv=p^lg[xi]^lg[yi];//\u76f4\u63a5\u5f97\u5230\u8f6c\u79fb\u540e\u7684\u72b6\u6001\uff0c\u4e0d\u61c2\u7684\u53ef\u4ee5\u624b\u63a8\u4e00\u4e0b\n\t\t\t\tif(f[k][v]) continue;//\u5224\u91cd\n\t\t\t\td[k][++w[k]]=v;ans[k][w[k]].a=i;//\u50a8\u5b58\u7b54\u6848\n\t\t\t\tans[k][w[k]].b=j;ans[k][w[k]].c=x;\n\t\t\t\tans[k][w[k]].d=y;ans[k][w[k]].n=h[k][p];\n\t\t\t\th[k][v]=w[k];f[k][v]=-~f[k][p];\n\t\t\t}\n}\nint main(){\n\tbool p;lg[1]=1;\n\tfor(RI i=2;i<=16;i=-~i) lg[i]=lg[i-1]<<1;//\u9884\u5904\u7406\u4e8c\u8fdb\u5236\u6570\n\tfor(RI i=1;i<=4;i=-~i)\n\t\tfor(RI j=1;j<=4;j=-~j)\n\t\t\tscanf(\"%1d\",&p),d[0][1]=(d[0][1]<<1)+p;\n\tfor(RI i=1;i<=4;i=-~i)\n\t\tfor(RI j=1;j<=4;j=-~j)\n\t\t\tscanf(\"%1d\",&p),d[1][1]=(d[1][1]<<1)+p;\n\tfor(t[0]=t[1]=w[1]=w[0]=1;t[0]<=w[0]&&t[1]<=w[1];t[0]=-~t[0],t[1]=-~t[1]){\n\t\tsolve(0);solve(1);//\u53cc\u5411\u5e7f\u641c\n\t}\n}\n```\n\n\u603b\u4e4b\uff0c\u8fd9\u662f\u4e00\u9053\u7ecf\u5178\u7684\u5e7f\u641c\u9898\u3002\u5bf9\u4e8e\u5927\u90e8\u5206\u7684\u5e7f\u641c\u9898\uff0c\u4e00\u822c\u7528\u672c\u9898\u7684\u4e2d\u7684\u54c8\u5e0c\u8868\u548c\u53cc\u5411\u5e7f\u641c\u4f18\u5316\u5c31\u53ef\u4ee5\u8f7b\u677eA\u8fc7\uff0c\u6240\u4ee5\u8fd9\u4e5f\u662f\u4e24\u79cd\u5341\u5206\u5b9e\u7528\u7684\u4f18\u5316\u65b9\u6cd5\u3002",
        "postTime": 1622291565,
        "uid": 133037,
        "name": "_OccDreamer_",
        "ccfLevel": 6,
        "title": "\u9ed1\u767d\u68cb\u6e38\u620f"
    },
    {
        "content": "\u4ecb\u7ecd\u4e00\u79cd**\u4e0d\u7528\u8f6c\u4e8c\u8fdb\u5236**\u7684\u505a\u6cd5\uff1a\n\n**\u4f18\u70b9**\uff1a \u4ee3\u7801\u7b80\u77ed\uff0c\u51e0\u4e4e\u662f\u4e8c\u8fdb\u5236\u505a\u6cd5\u7684\u4e00\u534a\u3002\n\n**\u7f3a\u70b9**\uff1a \u56e0\u4e3a\u7528\u4e86```map```\uff0c~~\u5438\u6c27\u4e0d\u5982\u522b\u4eba\u4e0d\u5438\u6c27\u8dd1\u5f97\u5feb~~\u3002\n\n\n------------\n\n\n## \u6b63\u9898\uff1a\n\n\u6211\u7b2c\u4e00\u773c\u770b\u5230\u8fd9\u9898\uff0c\u60f3\u5230\u4e86[P2324 \u9a91\u58eb\u7cbe\u795e](https://www.luogu.com.cn/problem/P2324),\u6240\u4ee5\u4e00\u76f4\u5728\u60f3\u4f30\u4ef7\u51fd\u6570\uff0c\u526a\u679d\u4e4b\u7c7b\u7684\uff0c\u641e\u4e86\u534a\u5929\u53ea\u62ff\u4e86 $30$ \u5206\u3002\n\n\u540e\u6765~~\u770b\u4e86\u9898\u89e3~~\u624d\u53d1\u73b0\u6839\u672c\u6ca1\u6709\u90a3\u4e48\u590d\u6742\uff0c\u76f4\u63a5\u66b4\u529b ```Bfs``` \u5c31\u5f73\u4e8d\u4e86\u3002\n\n\u7136\u800c\u9898\u89e3\u91cc\u90fd\u662f\u628a\u72b6\u6001\u8f6c\u6362\u4e8c\u8fdb\u5236\u64cd\u4f5c\u7684\uff0c\u5bf9\u4e8e\u4f4d\u8fd0\u7b97\u5c0f\u767d\u6765\u8bb2\u5f88\u4e0d\u53cb\u597d\uff0c\u90a3\u4e48\u8003\u8651\u628a\u72b6\u6001\u7528\u5176\u4ed6\u65b9\u6cd5\u5b58\u4e0b\u6765\u5c31\u597d\u4e86\uff0c\u6240\u4ee5\u6211\u4f7f\u7528\u4e86 ```string``` \uff0c\u5e76\u7528 ```map``` \u5224\u91cd\uff0c\u5177\u4f53\u770b\u4ee3\u7801\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int dx[]={-1,1,-4,4};\nstring init,goal;\nchar ch;\nstruct step//\u8bb0\u5f55\u6b65\u9aa4\n{\n\tint x1,y1,x2,y2;\n};\nqueue<string> q;\nmap<string,int> m;\nmap<string,string> pre;\nmap<string,step> op;\nvoid print(string x)//\u9012\u5f52\u8f93\u51fa\u65b9\u6848\n{\n\tif(!pre.count(x)) return ;\n\tprint(pre[x]);\n\tprintf(\"%d%d%d%d\\n\",op[x].x1,op[x].y1,op[x].x2,op[x].y2);\n}\nstring read()//\u628a 4\u00d74\u7684\u77e9\u9635\u8f6c\u5316\u6210\u5b57\u7b26\u4e32\n{\n\tstring res=\"\",tmp;\n\tfor(int i=1;i<=4;i++)\n\t\tcin>>tmp,res=res+tmp;\n\treturn res;\n}\nsigned main()\n{\n\tinit=read();//\u521d\u59cb\u72b6\u6001\n\tgoal=read();//\u76ee\u6807\u72b6\u6001\n\tq.push(init);\n\tstring tmp=q.front();\n\tm[init]=0;\n\twhile(!q.empty())\n\t{\n\t\tstring u=q.front(),v=u;\n\t\tq.pop();\n\t\tif(u==goal)\n\t\t{\n\t\t\tcout<<m[u]<<endl;\n\t\t\tprint(u);\n\t\t\texit(0);\n\t\t}\n\t\tfor(int i=0;i<16;i++)\n\t\t\tfor(int j=0;j<4;j++)\n\t\t\t{\n\t\t\t\tif((i==4 || i==8 || i==12) && j==0) continue;\n           \t//\u5f00\u5934 \u4e0d\u80fd\u8df3\u7684\u4e0a\u4e00\u884c\u7684 \u672b\u5c3e   \n\t\t\t\tif((i==3 || i==7 || i==11) && j==1) continue;\n           \t//\u672b\u5c3e  \u4e0d\u80fd\u8df3\u7684\u4e0b\u4e00\u884c\u7684 \u5f00\u5934      \n\t\t\t\tint tx=i+dx[j];\n\t\t\t\tif(tx<0 || tx>15) continue;//\u5224\u8d8a\u754c\n\t\t\t\tswap(v[i],v[tx]);\n\t\t\t\tif(!m.count(v))\n\t\t\t\t{\n\t\t\t\t\tm[v]=m[u]+1;\n\t\t\t\t\tpre[v]=u;\n\t\t\t\t\top[v]=((step){i/4+1,i%4+1,tx/4+1,tx%4+1});\n            \t//\u5b58\u5165\u6b65\u9aa4\n\t\t\t\t\tq.push(v);\n\t\t\t\t}\n\t\t\t\tswap(v[i],v[tx]);\n\t\t\t}\n\t\t}\n}\n```\n**\u53cc\u500d\u7ecf\u9a8c**\uff1a[P4289 \u79fb\u52a8\u73a9\u5177](https://www.luogu.com.cn/problem/P4289)\n",
        "postTime": 1620184829,
        "uid": 297566,
        "name": "Tan_Wei_Ye",
        "ccfLevel": 0,
        "title": "P1225 \u9ed1\u767d\u68cb\u6e38\u620f \u3010BFS\u3011"
    },
    {
        "content": "\u770b\u89c1\u5f88\u591adalao\u5199\u4e86\u4ec0\u4e48\u53cc\u5411BFS\uff0c\u849f\u84bb\u8868\u793a\u4e0d\u4f1a\u5199\u554a\u3002\n\n**\u600e\u4e48\u529e\u529e\uff1f**\n\n\u5148\u6765\u5206\u6790\u4e00\u4e0b\u9898\u76ee\uff0c\u4e00\u773c\u770b\u53bb\u5c31\u662f\u4e00\u4e2a\u641c\u7d22\u9898\uff0c\u8003\u8651DFS\u4e0eBFS\u3002\n\n\u5148\u653e\u4e00\u4efdDFS\u7684\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nbool a[5][5],b[5][5];\nchar c;\nint dx[5]={0,0,0,1,-1};\nint dy[5]={0,1,-1,0,0};\nint ans=0x3f3f3f3f;\nint ax[110],bx[110],ay[110],by[110];\nint ansx1[110],ansx2[110],ansy1[110],ansy2[110];\nint cnt=0,ans_cnt;\nmap<string,int>mp;\ninline string get()\n{\n    string s=\"\";\n    for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)s+=a[i][j]+'0';\n    return s;\n}\ninline bool check()\n{\n    for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)\n            if(a[i][j]!=b[i][j])return 0;\n    return 1;\n}\ninline void DFS(int x,int y,int tot)\n{\n    /*for(int i=1;i<=4;i++)\n    {\n        for(int j=1;j<=4;j++)cout<<a[i][j];\n        cout<<endl;\n    }\n    cout<<tot<<endl;*/\n    //Sleep(100);\n    if(tot>=ans)return;\n    if(check())\n    {\n        ans=tot;\n        ans_cnt=cnt;\n        for(int i=1;i<=cnt;i++)\n        {\n            ansx1[i]=ax[i];\n            ansx2[i]=bx[i];\n            ansy1[i]=ay[i];\n            ansy2[i]=by[i];\n        }\n    }\n    if(y==5)return;\n    if(x==5)x=1,y++;\n    /*string s=get();\n    cout<<s<<endl;\n    if(mp[s]<tot&&mp[s]!=0)return;\n    mp[s]=tot;*/\n    DFS(x+1,y,tot);\n    for(int i=1;i<=4;i++)\n    {\n        int aa=dx[i]+x,bb=dy[i]+y;\n        if(aa<1||aa>4||bb<1||bb>4||a[aa][bb]==a[x][y])continue;\n        cnt++;\n        ax[cnt]=x;ay[cnt]=y;\n        bx[cnt]=aa;by[cnt]=bb;\n        swap(a[aa][bb],a[x][y]);\n        DFS(x+1,y,tot+1);\n        cnt--;\n        swap(a[aa][bb],a[x][y]);\n    }\n}\nint main()\n{\n    for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)\n        {\n            cin>>c;\n            if(c=='1')a[i][j]=1;\n            else a[i][j]=0;\n        }\n    for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)\n        {\n            cin>>c;\n            if(c=='1')b[i][j]=1;\n            else b[i][j]=0;\n        }\n    DFS(1,1,0);\n    cout<<ans<<endl;\n    for(int i=1;i<=ans_cnt;i++)\n    {\n        cout<<ansx1[i]<<ansy1[i]<<ansx2[i]<<ansy2[i]<<endl;\n    }\n    return 0;\n}\n```\n\n\u8fd9\u91cc\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u8fdb\u884c\u4e0a\u4e0b\u5de6\u53f3\u7684\u4ea4\u6362\u3002\u770b\u4e0a\u53bb\u5f88(fei)\u6709(chang)\u9053(che)\u7406(dan)\u7684\u6837\u5b50\uff0c\u4f46\u662f\u5f88\u660e\u663e\uff0c\u6709\u65f6\u5019\u4ea4\u6362\u5b8c\u4e0b\u9762\u7684\u70b9\u8fd8\u53ef\u4ee5\u53bb\u4ea4\u6362\u4e0a\u9762\u7684\u70b9\uff0c\u6240\u4ee5\u6709\u65f6\u5019\u4f1a\u641c\u4e0d\u5230\u7b54\u6848\uff0c\u53ea\u80fd\u62ff\u523060\u5206\n\n~~\u84dd\u9898\u80fd\u62ff60\u5206\u4e5f\u5f88\u4e0d\u9519\u4e86\u5462~~\n\n**\u600e\u4e48\u529e\u529e\uff1f**\n\n\u90a3\u4e48\u5f53\u7136\u8981\u7528BFS\u5566\uff0c\uff08\u849f\u84bb\u4e0d\u4f1a\u8bb0\u5f55\u65b9\u6848\u7684\u597d\u529e\u6cd5\uff0c\u53ea\u80fd\u66b4\u529b\u5b58\u50a8\u5566\uff09\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nbool a[5][5],b[5][5];\nchar c;\nint dx[5]={0,0,0,1,-1};\nint dy[5]={0,1,-1,0,0};//\u4e0a\u4e0b\u5de6\u53f3\nint ans=0x3f3f3f3f;\nint ansx1[100],ansx2[100],ansy1[100],ansy2[100];\nmap<string,int>mp;//\u526a\u679d\u4e13\u7528\nstruct Node\n{\n    bool cc[5][5];//\u8bb0\u5f55\u5f53\u524d\u5c40\u52bf\n    int tot;//\u8bb0\u5f55\u603b\u6570\n    int x1[20],x2[20],y1[20],y2[20];//\u8bb0\u5f55\u65b9\u6848\n};\ninline void BFS()\n{\n    queue<Node>q;\n    Node now;\n    now.tot=0;\n    for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)\n            now.cc[i][j]=a[i][j];//\u628a\u5c40\u52bfcopy\u4e00\u4efd\n    q.push(now);\n    while(q.size())\n    {\n        Node now=q.front();\n        /*for(int i=1;i<=4;i++)\n        {\n            for(int j=1;j<=4;j++)cout<<now.cc[i][j];\n            cout<<endl;\n        }\n        cout<<now.tot<<endl;*/\n        q.pop();\n        bool flag=1;\n        for(int i=1;i<=4;i++)\n            for(int j=1;j<=4;j++)if(now.cc[i][j]!=b[i][j])flag=0;\n        if(flag)//\u627e\u5230\u7b54\u6848\n        {\n            ans=now.tot;//\u66f4\u65b0\u7b54\u6848\n            for(int i=1;i<=ans;i++)\n            {\n                ansx1[i]=now.x1[i];\n                ansx2[i]=now.x2[i];\n                ansy1[i]=now.y1[i];\n                ansy2[i]=now.y2[i];\n            }//\u66f4\u65b0\u65b9\u6848\n            return;\n        }\n        string s=\"\";\n        for(int i=1;i<=4;i++)\n            for(int j=1;j<=4;j++)s+=now.cc[i]\n        //cout<<q.size()<<\" \"<<s<<\" \"<<mp[s]<<endl;\n        if(mp[s]!=0&&mp[s]<=now.tot)continue;[j]+'0';//\u5f53\u524d\u72b6\u6001\u5982\u679c\u5df2\u7ecf\u6709\u66f4\u4f18\u89e3\u4e86\uff0c\u90a3\u5c31\u4e0d\u7528\u641c\u4e86\uff08\u72b6\u6001\u538b\u7f29\u7684\u601d\u60f3\uff09\n        mp[s]=now.tot;\n        Node next;\n        next.tot=now.tot+1;\n        for(int i=1;i<=4;i++)\n            for(int j=1;j<=4;j++)next.cc[i][j]=now.cc[i][j];//\u628a\u65b9\u6848copy\u4e00\u4efd\uff08\u7531\u4e8e\u849f\u84bb\u60f3\u4e0d\u5230\u597d\u65b9\u6cd5\uff0c\u8fd8\u8bf7dalao\u52ff\u55b7\uff09\n        for(int i=1;i<=now.tot;i++)\n        {\n            next.x1[i]=now.x1[i];next.y1[i]=now.y1[i];\n            next.x2[i]=now.x2[i];next.y2[i]=now.y2[i];\n        }\n        for(int i=1;i<=4;i++)\n        {\n            for(int j=1;j<=4;j++)\n            {\n                for(int k=1;k<=4;k++)\n                {\n                    int aa=dx[k]+i;\n                    int bb=dy[k]+j;\n                    if(aa<1||bb<1||aa>4||bb>4||now.cc[i][j]==now.cc[aa][bb])continue;//\u8d85\u8fc7\u8fb9\u754c\u6216\u4e3a\u76f8\u540c\u6570\u5b57\uff0c\u90a3\u4e48\u5c31continue\n                    swap(next.cc[aa][bb],next.cc[i][j]);//\u4ea4\u6362\n                    next.x1[next.tot]=i;next.y1[next.tot]=j;\n                    next.x2[next.tot]=aa;next.y2[next.tot]=bb;//\u6dfb\u52a0\u65b0\u65b9\u6848\n                    q.push(next);\n                    swap(next.cc[aa][bb],next.cc[i][j]);//\u56de\u6eaf\n                }\n            }\n        }\n    }\n}\nint main()\n{\n    for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)\n        {\n            cin>>c;\n            if(c=='1')a[i][j]=1;\n            else a[i][j]=0;\n        }\n    for(int i=1;i<=4;i++)\n        for(int j=1;j<=4;j++)\n        {\n            cin>>c;\n            if(c=='1')b[i][j]=1;\n            else b[i][j]=0;\n        }\n    BFS();\n    cout<<ans<<endl;\n    for(int i=1;i<=ans;i++)\n    {\n    \tcout<<ansx1[i]<<ansy1[i]<<ansx2[i]<<ansy2[i]<<endl;\n    }\n    return 0;\n}\n```",
        "postTime": 1560946404,
        "uid": 107468,
        "name": "hulean",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u672c\u9898\u662f\u4e00\u9053\u5178\u578b\u7684\u5bbd\u5ea6\u4f18\u5148\u641c\u7d22\u9898\u3002\u5bbd\u5ea6\u4f18\u5148\u641c\u7d22\u7684\u65b9\u6cd5\u672c\u8eab\u5e94\u8be5\u662f\u5f88\u663e\u7136\u7684\uff1a\u6839\u636e\u9898\u76ee\u7684\u63cf\u8ff0\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u68cb\u76d8\u72b6\u6001\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ea4\u6362\u76f8\u90bb\u4e24\u4e2a\u683c\u5b50\u4e2d\u7684\u68cb\u5b50\u5f97\u5230\u65b0\u7684\u72b6\u6001\uff08\u4e00\u6b21\u6700\u591a\u5f97\u523024\u4e2a\u65b0\u72b6\u6001\uff09\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u9898\u76ee\u7ed9\u51fa\u7684\u8d77\u59cb\u72b6\u6001\u5f00\u59cb\u4e0d\u505c\u7684\u6269\u5c55\uff0c\u76f4\u81f3\u6269\u5c55\u51fa\u76ee\u6807\u72b6\u6001\u3002\u6700\u540e\uff0c\u53ea\u9700\u8f93\u51fa\u6269\u5c55\u7684\u8def\u5f84\u5373\u53ef\u3002\n\n\u4e0a\u8ff0\u7b97\u6cd5\u5df2\u7ecf\u53ef\u4ee5\u5b8c\u5168\u89e3\u51b3\u672c\u9898\u4e86\u3002\u4f46\u662f\uff0c\u6211\u4eec\u73b0\u5728\u8981\u7ee7\u7eed\u5f80\u7ec6\u8282\u91cc\u8ba8\u8bba\u672c\u9898\uff0c\u8ba8\u8bba\u672c\u9898\u7684\u5b9e\u73b0\u3002\n\n\u5bbd\u5ea6\u4f18\u5148\u641c\u7d22\u7684\u6838\u5fc3\u662f\u72b6\u6001\u7684\u6269\u5c55\uff0c\u72b6\u6001\u7684\u6269\u5c55\u662f\u901a\u8fc7\u72b6\u6001\u8f6c\u6362\u5b9e\u73b0\u7684\u3002\u666e\u901a\u7684\u72b6\u6001\u8f6c\u6362\u7684\u65b9\u6cd5\u5c31\u662f\u6309\u7167\u9898\u76ee\u7684\u5b9a\u4e49\u6a21\u62df\u5b9e\u73b0\u3002\u8fd9\u91cc\uff0c\u6211\u4eec\u8981\u8ba8\u8bba\u7684\u662f\u9ad8\u6548\u7b80\u6d01\u7684\u72b6\u6001\u8f6c\u6362\u7684\u65b9\u6cd5\u3002\n\n\u9996\u5148\u662f\u72b6\u6001\u7684\u8868\u793a\u3002\u9898\u76ee\u4e2d\u7684\u68cb\u76d8\u662f\u753116\u4e2a\u683c\u5b50\u7ec4\u6210\u7684(4\u00d74)\uff0c\u5982\u4e0b\u56fe\u3002\n\na1    a2    a3    a4\n\na5    a6    a7    a8\n\na9    a10    a11    a12\n\na13    a14    a15    a16\n\n\u8fd916\u4e2a\u683c\u5b50\uff0c\u6bcf\u4e2a\u683c\u5b50\u91cc\u975e0\u53731\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u68cb\u76d8\u5199\u6210\u4e00\u4e2a\u957f\u5ea6\u4e3a16\u768401\u4e32\u3002\n\na1    a2    a3    a4    a5    a6    a7    a8    a9    a10    a11    a12    a13    a14    a15    a16\n\n\u8fd9\u4e2a0l\u4e32\u53ef\u4ee5\u7528\u4e00\u4e2a16bit\u7684\u6574\u6570\u6765\u8868\u793a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a0\uff5e65535\u7684\u6574\u6570\u6765\u8868\u793a\u4e00\u4e2a\u72b6\u6001\u3002\n\n\u4e0b\u9762\u6700\u5173\u952e\u7684\u5c31\u662f\u72b6\u6001\u7684\u8f6c\u6362\u4e86\u3002\u6839\u636e\u9898\u76ee\u7684\u5b9a\u4e49\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u4ea4\u6362\u68cb\u76d8\u4e0a\u76f8\u90bb\u4e24\u4e2a\u683c\u5b50\u4e2d\u7684\u68cb\u5b50\u3002\u663e\u7136\uff0c\u5982\u679c\u76f8\u90bb\u4e24\u4e2a\u683c\u5b50\u4e2d\u7684\u68cb\u5b50\u76f8\u540c\uff0c\u4ea4\u6362\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651\u76f8\u90bb\u683c\u5b50\u4e2d\u68cb\u5b50\u989c\u8272\u4e0d\u540c\u7684\u60c5\u51b5\u3002\u76f8\u90bb\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u5de6\u53f3\u76f8\u90bb\u548c\u4e0a\u4e0b\u76f8\u90bb\u3002\u5982\u56fe\uff0ca1\u548ca2\u4e3a\u5de6\u53f3\u76f8\u90bb\uff0c\u800ca8\u548ca12\u4e3a\u4e0a\u4e0b\u76f8\u90bb\u3002\u6211\u4eec\u8ba8\u8bba\u72b6\u6001\u8f6c\u6362\u7684\u65f6\u5019\uff0c\u5c06\u5bf9\u8fd9\u4e24\u79cd\u201c\u76f8\u90bb\u201d\u5206\u522b\u5904\u7406\u3002\n\na1    a2    a3    a4\n\na5    a6    a7    a8\n\na9    a10    a11    a12\n\na13    a14    a15    a16\n\n\u56fe7-2\n\u9996\u5148\u6765\u770b\u5de6\u53f3\u76f8\u90bb\u7684\u60c5\u51b5\uff0c\u4ee5a15\u548ca16\u4e3a\u4f8b\u3002\u5b83\u4eec\u4ea4\u6362\u4ee5\u540e\uff0c\u5f97\u5230\u7684\u68cb\u76d8\u72b6\u6001\u4e3a\uff1a\n\na1    a2    a3    a4\n\na5    a6    a7    a8\n\na9    a10    a11    a12\n\na13    a14    a16    a15\n\n\u56fe7-3\n\u4f46\u662f\uff0c\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u6765\u8003\u8651\u95ee\u9898\uff0ca15\uff1d??a16\uff0c\u6240\u4ee5\u7ecf\u8fc7\u8f6c\u6362\u540e\uff0c\u5c31\u76f8\u5f53\u4e8e\u5c06a15\u548ca16\u53d6\u53cd\u3002\u4ece\u4f4d\u64cd\u4f5c\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u8bbe\u539f\u72b6\u6001\u4e3as\uff0c\u90a3\u4e48a15\u548ca16\u4ea4\u6362\u540e\u5f97\u5230\u7684\u65b0\u72b6\u6001s15\u4e3a\uff1a\n\n    s15=s xor 3\n\n\u540c\u6837\u7684\uff0c\u8fd8\u53ef\u4ee5\u63a8\u51faa14\u548ca15\u4ea4\u6362\u540e\u5f97\u5230\u7684\u65b0\u72b6\u6001s14\u4e3a\uff1a\n\n    s14=s xor 6=s xor (3\\*21)\n\n\u5f53\u7136\uff0c\u8fd8\u6709\u4ee5\u4e0b\u5f88\u591a\u72b6\u6001\u516c\u5f0f\uff1a\n\n    s13=s xor 12=s xor(3\\*22)\n\n    s11=s xor 48=s xor(3\\*24)\n\n    s10=s xor 96=s xor(3\\*25)\n\n\u8fd9\u91cc\u6709\u4e24\u4e2a\u9700\u8981\u6ce8\u610f\u4e4b\u70b9\uff1a\n\n\uff081\uff09\u4ea4\u6362\u7684\u4e24\u4e2a\u68cb\u5b50\u7684\u989c\u8272\u5fc5\u987b\u4e0d\u540c\uff0c\u5426\u5219\u516c\u5f0f\u4e0d\u6210\u7acb\uff1b\n\n\uff082\uff09\u6839\u636e\u72b6\u6001\u8f6c\u6362\u7684\u5b9a\u4e49s4\u3001s8\u3001s12\u3001s16\u5bf9\u5e94\u7684\u516c\u5f0f\u4e0d\u6210\u7acb\uff0c\u56e0\u4e3a\u5b83\u4eec\u53f3\u8fb9\u6ca1\u6709\u76f8\u90bb\u7684\u68cb\u5b50\u3002\n\n\u6700\u540e\uff0c\u6211\u4eec\u603b\u7ed3\u4e00\u4e0b\u5de6\u53f3\u76f8\u90bb\u60c5\u51b5\u4e0b\u7684\u72b6\u6001\u8f6c\u6362\u516c\u5f0f\uff08\u68cb\u5b50\u989c\u8272\u5fc5\u987b\u4e0d\u540c\uff09\n\n    sk=s xor(3\\*215-k)\uff0c\u5176\u4e2dk\u22604, 8, 12, 16\n\n\u4e0e\u201c\u5de6\u53f3\u76f8\u90bb\u201d\u5bf9\u5e94\u7684\u662f\u201c\u4e0a\u4e0b\u76f8\u90bb\u201d\u3002\u201c\u4e0a\u4e0b\u76f8\u90bb\u201d\u60c5\u51b5\u7684\u5206\u6790\u4e0e\u201c\u5de6\u53f3\u76f8\u90bb\u201d\u7c7b\u4f3c\uff0c\u8fd9\u91cc\u5c31\u4e0d\u8be6\u7ec6\u5c55\u5f00\u4e86\uff0c\u53ea\u5217\u51fa\u8f6c\u6362\u7684\u516c\u5f0f\uff08\u540c\u6837\uff0c\u68cb\u5b50\u989c\u8272\u4e5f\u5fc5\u987b\u4e0d\u540c\uff09\n\n    sk=s xor(17\\*212-k)\uff0c\u5176\u4e2dk\u226412\n\n\u6709\u4e86\u4e0a\u9762\u4e24\u4e2a\u72b6\u6001\u8f6c\u6362\u7684\u516c\u5f0f\uff0c\u6211\u4eec\u53ea\u9700\u5c06\u8d77\u59cb\u72b6\u6001\u548c\u76ee\u6807\u72b6\u6001\u8f6c\u6362\u621016bit\u7684\u6574\u6570\uff0c\u5229\u7528\u516c\u5f0f\u4ece\u8d77\u59cb\u72b6\u6001\u6269\u5c55\u81f3\u76ee\u6807\u72b6\u6001\u5373\u53ef\u3002\u6574\u4e2a\u8fc7\u7a0b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(24\\*216)\u3002\n\n\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u8003\u8651\u95ee\u9898\u3002\u672c\u9898\u7ed9\u51fa\u4e86\u8d77\u59cb\u72b6\u6001\u548c\u76ee\u6807\u72b6\u6001\uff0c\u90a3\u4e48\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u4ece\u8fd9\u4e24\u4e2a\u72b6\u6001\u5f00\u59cb\uff0c\u5206\u522b\u6269\u5c55\u2014\u2014\u4e5f\u5c31\u662f\u7528\u53cc\u5411\u5bbd\u5ea6\u4f18\u5148\u641c\u7d22\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u672c\u9898\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u53cc\u5411\u641c\u7d22\u6269\u5c55\u51fa\u7684\u72b6\u6001\u603b\u6570\u8981\u6bd4\u5355\u5411\u5c11\u5f88\u591a\uff0c\u65f6\u95f4\u548c\u7a7a\u95f4\u590d\u6742\u5ea6\u90fd\u4f1a\u6709\u6240\u964d\u4f4e\u3002\n\n\n\n\n\n```cpp\ntype arr=array[1..5,1..5] of char;\n      rec=record\n      m:arr;\n      step:longint;\n      ans:array[1..100,1..5] of char;\n end;\n const dx:array[1..4] of longint=(1,-1,0,0);\n       dy:array[1..4] of longint=(0,0,-1,1);\n var start,ans:rec;\n     f:array[0..200000] of boolean;\n     spos,epos:arr;\n     fr,r,i,j:longint;\n     a:array[1..200000] of rec;\n function equal(m:arr):boolean;\n var i,j:longint;\n begin\n  for i:=1 to 4 do\n   for j:=1 to 4 do\n    if m[i,j]<>epos[i,j] then exit(false);\n  exit(true);\n end;\n function hash(m:arr):longint;//\u4e8c\u8fdb\u5236\u8f6c\u5341\u8fdb\u5236\uff0c\u7528\u4f4d\u8fd0\u7b97\uff0c\u6548\u7387\u9ad8\n var res,i,j:longint;\n begin\n  res:=0;\n  for i:=1 to 4 do\n   for j:=1 to 4 do\n    begin\n     res:=(res shl 1);\n     res:=res+ord(m[i,j])-ord('0');\n    end;\n  exit(res);\n end;\n procedure bfs;\n var t,i,j,k,x,y:longint;\n     now,next:rec;\n     temp:char;\n begin\n  fillchar(f,sizeof(f),true);\n  t:=hash(spos);\n  f[t]:=false;\n  fr:=0;r:=1;\n  while fr<>r do\n   begin\n    inc(fr);\n    now:=a[fr];\n    if equal(now.m) then\n     begin\n      ans:=now;\n      exit;\n     end;\n    for i:=1 to 4 do\n     for j:=1 to 4 do\n      for k:=1 to 4 do\n       begin\n        next:=now;\n        inc(next.step);\n        x:=i+dx[k];\n        y:=j+dy[k];\n        if (x>=1)and(x<=4)and(y>=1)and(y<=4) then\n         begin\n          temp:=next.m[i,j];\n          next.m[i,j]:=next.m[x,y];\n          next.m[x,y]:=temp;\n          next.ans[next.step,1]:=chr(ord('0')+i);\n          next.ans[next.step,2]:=chr(ord('0')+j);\n          next.ans[next.step,3]:=chr(ord('0')+x);\n          next.ans[next.step,4]:=chr(ord('0')+y);\n          next.ans[next.step,5]:=#0;//\u5b58\u50a8\u54ea\u4e24\u4e2a\u5750\u6807\u6362\u4e86\u4f4d\u7f6e\n          if equal(next.m) then\n           begin\n            ans:=next;\n            exit;\n           end;\n          t:=hash(next.m);\n          if f[t] then\n           begin\n            f[t]:=false;\n            inc(r);\n            a[r]:=next;\n           end;\n         end;\n       end;\n    end;\n end;\n begin\n  for i:=1 to 4 do\n   begin\n    for j:=1 to 4 do\n     read(spos[i,j]);\n    readln;\n   end;\n  for i:=1 to 4 do\n   begin\n    for j:=1 to 4 do\n     read(epos[i,j]);\n    readln;\n   end;\n  for i:=1 to 4 do\n   for j:=1 to 4 do\n    start.m[i,j]:=spos[i,j];\n  start.step:=0;\n  a[1]:=start;\n  bfs;\n  writeln(ans.step);\n  for i:=1 to ans.step do\n  begin\n    for j:=1 to 4 do\n     write(ans.ans[i,j]);\n    writeln;\n   end;\n end.\n\n```",
        "postTime": 1477834049,
        "uid": 9538,
        "name": "\u5434\u56fd\u94e8",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "# \u65b0\u624b\u53cb\u597d\u4e03\u5341\u884c\u4ee3\u7801\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P1225)\n\n \u8fd9\u9053\u9898\u5927\u4f53\u7684\u601d\u8def\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u7528 bfs \u6a21\u62df\u65b9\u9635\u7684\u53d8\u5316\u3002\u5bf9\u4e8e\u6bcf\u4e00\u6b65\u64cd\u4f5c**\u66b4\u529b\u679a\u4e24\u4e2a\u6570\u4ea4\u6362\u7684\u6240\u6709\u65b9\u6848\uff08\u5982\u679c\u6709\u91cd\u590d\u7684\u5c31\u8df3\u51fa\uff09**\uff0c\u7136\u540e\u5224\u65ad\u662f\u5426\u4e0e\u7b54\u6848\u76f8\u7b26\uff0c**\u5982\u679c\u5339\u914d\u6210\u529f\u5c31\u8f93\u51fa\uff0c\u5982\u679c\u4e0d\u6210\u529f\u5c31\u5c06\u5176\u538b\u5165 bfs \u5927\u961f\u5217\u7ee7\u7eed\u641c\u7d22\u3002** ~~\u60f3\u5fc5\u672c\u849f\u84bb\u90fd\u80fd\u60f3\u51fa\u6765~~ \uff0c\u6211\u5728\u8fd9\u91cc\u5c31\u4e0d\u8be6\u7ec6\u89e3\u91ca\u4e86\u3002\n\n \u4f46\u662f\u4f5c\u4e3a\u4e00\u9053\u84dd\u9898\uff0c\u5b83\u7684\u4ee3\u7801\u8fd8\u662f\u6709\u4ebf\u70b9\u70b9\u957f\u7684\u3002\u672c\u849f\u84bb\u4e3a\u4e86\u51cf\u5c11\u4ee3\u7801\u91cf\uff0c\u672c\u849f\u84bb\u5728\u8fd9\u91cc\u4f7f\u7528\u4e86\u4e00\u4e9b\u5c0f\u4f18\u5316\uff1a\n1. **\u4f7f\u7528\u51fd\u6570 work \u5c06\u65b0\u7684\u72b6\u6001\u538b\u5165\u961f\u5217**\uff0c\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u540c\u65f6\u4ee3\u66ff\u961f\u5217\u521d\u59cb\u5316\u65f6\u548c bfs \u65f6\u7684\u5165\u961f\u64cd\u4f5c\uff0c\u5341\u51e0\u884c\u4ee3\u7801\u77ac\u95f4\u84b8\u53d1\u3002\n\n2. \u5728\u8fd0\u884c\u65f6\u628a\u77e9\u9635\u7684\u7b2c\u4e00\u884c\u7b2c\u4e00\u4e2a\u6570\u5f53\u4f5c\u72b6\u6001\u7684\u6700\u9ad8\u4f4d\uff0c\u8bb0\u4e3a 16 \u4f4d\uff0c\u7b2c\u4e00\u884c\u7b2c\u4e8c\u4e2a\u5f53\u505a\u72b6\u6001\u7684\u7b2c\u4e8c\u9ad8\u4f4d\uff0c\u8bb0\u4e3a 15 \u4f4d\u00b7\u00b7\u00b7\u00b7\u00b7\u00b7\u4ee5\u6b64\u7c7b\u63a8\u3002**\u8fd9\u6837\u77e9\u9635\u8868\u793a\u7684\u4e8c\u8fdb\u5236\u4e0e\u72b6\u538b\u503c\u662f\u5b8c\u5168\u76f8\u7b49\u7684**,\u7531\u6b64\u5b9e\u73b0\u72b6\u538b\u4f1a\u66f4\u52a0\u7b80\u4fbf\uff0c\u5927\u5bb6\u5728\u4e0b\u9762\u7684\u7a0b\u5e8f\u91cc\u53ef\u4ee5\u770b\u5230\u3002\n\n\n3. **\u5728bfs \u8fc7\u7a0b\u4e2d\u52a0\u5165\u4f4d\u8fd0\u7b97\uff0c\u4ee3\u66ff\u5c06\u72b6\u6001\u8f6c\u4e3a\u6570\u7ec4\uff0c\u518d\u5c06\u6570\u7ec4\u8f6c\u4e3a\u72b6\u6001\u7684\u64cd\u4f5c**\u3002\u8fd9\u4e5f\u662f\u672c\u7a0b\u5e8f\u7684\u6700\u5927\u7279\u8272\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\n- \t\u4e00\u53f7\u64cd\u4f5c\uff1a\u6c42 $x$ \u5728\u4e8c\u8fdb\u5236\u4e2d\u7684\u7b2c $k$ \u4f4d\uff1a $a=(x>>(k-1))\\&1;$\n- \t\u4e8c\u53f7\u64cd\u4f5c\uff1a\u5c06 $x$ \u7684\u7b2c $k$ \u4f4d\u7531 $0$ \u53d8\u4e3a $1$ : $x=x\\bigoplus(1<<(k-1);$\n- \t\u4e09\u53f7\u64cd\u4f5c\uff1a\u5c06 $x$ \u7684\u7b2c $k$ \u4f4d\u53cd\u8f6c\uff1a $x=x(1<<(k-1));$\n\n\n\n\u8bfb\u5165\u5e76\u521d\u59cb\u5316\u65f6\uff0c\u53ea\u9700\u8981\u4f7f\u7528\u64cd\u4f5c $2$ \u5bf9\u6570\u636e\u8fdb\u884c\u7d2f\u52a0\uff0c\u5c31\u80fd\u5f97\u5230\u6700\u521d\u72b6\u6001\u5bf9\u5e94\u7684\u6574\u6570\u4e86\uff1b\u5982\u679c\u8981\u4ea4\u6362\u4e24\u4e2a\u76f8\u90bb\u7684\u6570\uff0c\u5148\u7528\u64cd\u4f5c $1$ \u5224\u65ad\u4e24\u4e2a\u6570\u662f\u5426\u76f8\u540c\uff0c\u5982\u679c\u4e0d\u540c\u7684\u8bdd\uff08\u5982\u679c\u76f8\u540c\u4ea4\u6362\u5c31\u6ca1\u6709\u610f\u4e49\u4e86\uff0c\u5728\u8fd9\u91cc\u53ea\u8003\u8651\u4e0d\u540c\u7684\u60c5\u51b5\uff09\u5c31\u5c06\u4e24\u4e2a\u6570\u5206\u522b\u53cd\u8f6c\u5f97\u5230\u4e0b\u4e00\u72b6\u6001\u3002\n\n\u8fd9\u79cd\u65b9\u6cd5\u6bd4\u8f83\u597d\u60f3\u5230\uff0c\u6bd4\u8f83\u597d\u7406\u89e3\uff08\u5c31\u662f\u5bf9\u4e8e\u65b0\u624b\u6bd4\u8f83\u53cb\u597d\uff09\uff0c\u800c\u4e14**\u4e0d\u7528\u5728\u6574\u6570\u4e0e\u6570\u7ec4\u4e4b\u95f4\u6765\u56de\u5207\u6362**\uff0c\u51cf\u5c11\u4e86\u5927\u91cf\u7684\u4ee3\u7801\u91cf\uff0c\u540c\u65f6\u8282\u7ea6\u4e86\u65f6\u95f4\uff0c\u5927\u5bb6\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b\u8fd9\u4e2a\u65b9\u6cd5\u3002\n\n\n## \u8d34\u4ee3\u7801\u54af\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint a,b,f[100000];//a:\u539f\u59cb\u72b6\u6001 b\uff1a\u76ee\u6807\u72b6\u6001  f\uff1a\u72b6\u6001\u6807\u8bb0 \u53bb\u91cd\nint c[3][905];//\u7a7a\u6570\u7ec4 \u5907\u7528 \nstruct st\n{\n\tint way[3][905],num,s;//way\u8bb0\u5f55\u6b64\u72b6\u6001\u4ee5\u524d\u7684\u8fc7\u7a0b\uff0cnum\u8bb0\u5f55\u6b65\u9aa4\u6570\uff0cs\u662f\u5f53\u524d\u72b6\u6001 \n};\nqueue<st>q;\nvoid work(int now,int x,int y,int nu,int w[3][905])//\u5f53\u524d\u72b6\u6001\uff0c\u4e24\u4e2a\u8981\u4ea4\u6362\u7684\u6240\u5728\u4f4d\u7f6e\uff0c\u6b65\u9aa4\uff0c\u4ee5\u524d\u7684\u6b65\u9aa4 \n{\n\tint x2=(now>>(x-1))&1;\n\tint y2=(now>>(y-1))&1;\n\tif(x2==y2)return;\n\tnow=now^(1<<(x-1));\n\tnow=now^(1<<(y-1));//\u4ea4\u6362x\u4f4d\u7f6e\u548cy\u4f4d\u7f6e\u7684\u6570 \n\tif(f[now])return;//\u53bb\u91cd \u6709\u70b9\u7c7b\u4f3c\u4e8e\u8bb0\u5fc6\u5316\u641c\u7d22 \n\tf[now]=nu;\n\tst fr;//\u66f4\u65b0\u60c5\u51b5 \n\tfr.num=nu;\n\tfr.s=now;\n\tw[1][nu]=x;\n\tw[2][nu]=y;//\u66f4\u65b0\u6b65\u9aa4 \n\tmemcpy(fr.way,w,sizeof(fr.way));//\u5c06\u65b0\u6b65\u9aa4\u52a0\u5165 \n\tq.push(fr);//\u5165\u961f \n}\nint main()\n{\n\tfor(int i=1;i<=16;i++)\n\t{\n\t\tchar x;\n\t\tcin>>x;\n\t\tif(x=='1')a+=1<<(16-i);//\u521d\u59cb\u72b6\u6001\u521d\u59cb\u5316 \n\t}\n\tfor(int i=1;i<=16;i++)\n\t{\n\t\tchar x;\n\t\tcin>>x;\n\t\tif(x=='1')b+=1<<(16-i);//\u76ee\u6807\u72b6\u6001\u521d\u59cb\u5316 \n\t}\n\tf[a]=1;\n\tfor(int i=1;i<=16;i++)\n\t{\n\t\tif(i%4!=0)work(a,i,i+1,1,c);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u5de6\u8fb9\u7684\u4ea4\u6362 \n\t\tif(i%4!=1)work(a,i,i-1,1,c);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u53f3\u8fb9\u7684\u4ea4\u6362 \n\t\tif(i<=12)work(a,i,i+4,1,c);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u4e0a\u9762\u7684\u4ea4\u6362 \n\t\tif(i>4)work(a,i,i-4,1,c);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u4e0b\u9762\u7684\u4ea4\u6362 //ps:\u6b64\u56fe\u7684\u5de6\u4e0a\u89d2\u662f\u7b2c16\u4f4d\uff0c\u53f3\u4e0b\u89d2\u662f\u7b2c1\u4f4d \n\t}\n\twhile(!q.empty())\n\t{\n\t\tst now=q.front();\n\t\tq.pop();\n\t\tif(now.s==b)//\u5982\u679c\u4e0e\u76ee\u6807\u72b6\u6001\u91cd\u56de\uff0c\u5219\u8f93\u51fa \n\t\t{\n\t\t\tcout<<now.num<<endl;\n\t\t\tfor(int i=1;i<=now.num;i++)\n\t\t\t{\n\t\t\t\tcout<<(16-now.way[1][i]+1-1)/4+1; \n\t\t\t\tcout<<(16-now.way[1][i]+1-1)%4+1;\n\t\t\t\tcout<<(16-now.way[2][i]+1-1)/4+1;\n\t\t\t\tcout<<(16-now.way[2][i]+1-1)%4+1<<endl;//\u5206\u522b\u8868\u793a\u8981\u4ea4\u6362\u7684\u4e24\u4e2a\u6570\u6240\u5728\u7684\u884c\uff0c\u5217 \n\t\t\t}\n\t\t\treturn 0;//\u5982\u679c\u627e\u5230\u76f4\u63a5\u5347\u5929 \n\t\t}\n\t\tfor(int i=1;i<=16;i++)\n\t\t{\n\t\t\tif(i%4!=0)work(now.s,i,i+1,now.num+1,now.way);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u5de6\u8fb9\u7684\u4ea4\u6362 \n\t\t\tif(i%4!=1)work(now.s,i,i-1,now.num+1,now.way);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u53f3\u8fb9\u7684\u4ea4\u6362 \n\t\t\tif(i<=12)work(now.s,i,i+4,now.num+1,now.way);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u4e0a\u9762\u7684\u4ea4\u6362 \n\t\t\tif(i>4)work(now.s,i,i-4,now.num+1,now.way);//\u5982\u679c\u6ca1\u6709\u8d8a\u754c\uff0c\u5219i\u548c\u4e0b\u9762\u7684\u4ea4\u6362 //ps:\u6b64\u56fe\u7684\u5de6\u4e0a\u89d2\u662f\u7b2c16\u4f4d\uff0c\u53f3\u4e0b\u89d2\u662f\u7b2c1\u4f4d \n\t\t}\n\t}\n}\n```\n\n\n\n------------\n\n## THE END",
        "postTime": 1615108763,
        "uid": 133427,
        "name": "\u849f\u84bb\u601d\u7fd4",
        "ccfLevel": 6,
        "title": "P1225\u89e3\u9898"
    },
    {
        "content": "[$$\\large\\texttt{My Blog}$$](https://yzxoi.top/archives/1562)\n## Preface\n> [\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P1225)\n\n\u8fd9\u9898\u771f\u7684\u6076\u5fc3\uff0c\u72b6\u538b\u5199\u9519\u4e86\u8c03\u534a\u5929\u3002\u3002\u3002\n\n## Description\n\u7ed9\u5b9a\u4e00\u4e2a $4\\times 4$ \u7684\u68cb\u76d8\uff0c\u6bcf\u4e00\u683c\u653e\u4e00\u4e2a\u68cb\u5b50\uff0c\u5171\u6709 $8$ \u4e2a\u9ed1\u68cb\uff0c$8$ \u4e2a\u767d\u68cb\u3002\u6bcf\u6b21\u53ef\u4ee5\u4ea4\u6362\u76f8\u90bb\u4e24\u4e2a\u683c\u5b50\u7684\u68cb\u5b50\uff0c\u95ee\u6700\u5c11\u8981\u591a\u5c11\u6b65\u624d\u80fd\u4ece\u521d\u59cb\u72b6\u6001\u5230\u8fbe\u6700\u7ec8\u72b6\u6001\u3002\u5e76\u4e14\u9700\u8981\u8f93\u51fa\u4ea4\u6362\u65b9\u6cd5\u3002\n\n## Solution\n\u7531\u4e8e\u68cb\u76d8\u5341\u5206\u5c0f\uff08\u53ea\u6709 $4\\times 4$ \uff09\uff0c\u6240\u4ee5\u8003\u8651\u98df\u7528 $bfs$\u3002\n\n\u8fd9\u9053\u9898\u4e3b\u8981\u95ee\u9898\u662f\u72b6\u6001\u5982\u4f55\u8003\u8651\u3002\n\n\u7531\u4e8e\u53ea\u6709\u9ed1\u68cb\u548c\u767d\u68cb\uff0c\u6240\u4ee5\u5f88\u81ea\u7136\u7684\u5c31\u60f3\u5230\u4e86\u72b6\u538b\u7684\u601d\u60f3\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5c06\u6574\u4e2a\u68cb\u76d8\u76f4\u63a5\u72b6\u538b\u6210\u4e00\u4e2a $16$ \u4f4d\u4e8c\u8fdb\u5236\u6570\uff0c\u518d\u8fdb\u884c $bfs$ \u8f6c\u79fb\u3002\n\n> $2^0$ $2^1$ $2^2$ $2^3$ \\\n$2^4$ $2^5$ $2^6$ $2^7$ \\\n$2^8$ $2^9$ $2^{10}$ $2^{11}$ \\\n$2^{12}$ $2^{13}$ $2^{14}$ $2^{15}$ \n\n```cpp\nfor(int i=0;i<4;i++)\n\tfor(int j=0;j<4;j++){\n\t\tchar c=gc();W(c!='0'&&c!='1') c=gc();\n\t\tS|=(c&15)<<i*4+j;//\u76f4\u63a5\u72b6\u538b\n\t}\n```\n\n\u90a3\u4e48\u5728 $bfs$ \u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u6839\u636e\u8fd9\u4e2a\u72b6\u538b\u65b9\u6cd5\u63d0\u53d6\u51fa\u9700\u8981\u4ea4\u6362\u7684\u4e24\u4f4d\uff0c\u5e76\u4e14\u66b4\u529b\u4ea4\u6362\u540e\u518d\u538b\u56de\u53bb\u5373\u53ef\u3002\n\n```cpp\nI int v(int p,int x,int y){return p>>x*4+y&1;}//\u83b7\u53d6\u8be5\u72b6\u6001\u4e0b\u7684\u8be5\u4f4d\u7f6e\u6743\u503c\nI int swp(int p,int x,int y,int xx,int yy){\n\tint v1=v(p,x,y),v2=v(p,xx,yy);//\u83b7\u53d6\u8fd9\u4e24\u4f4d\u7684\u6743\u503c\n\tp&=((1<<16)-1)^1<<x*4+y,p&=((1<<16)-1)^1<<xx*4+yy,//\u628a\u8be5\u72b6\u6001\u4e0b\u7684\u8fd9\u4e24\u4f4d\u6e05\u7a7a\n\tp|=v2<<x*4+y,p|=v1<<xx*4+yy;//\u8d4b\u503c\n\treturn p;\n}\n```\n\n\u53e6\u5916\uff0c\u5728 $bfs$ \u7684\u8fc7\u7a0b\u4e2d\uff0c\u8bb0\u5f55\u4e00\u4e0b\u7236\u4eb2\u53ca\u8def\u5f84\u5373\u53ef\uff0c\u6700\u540e\u9012\u5f52\u8f93\u51fa\u3002\n\n## Code\n```cpp\n// Problem: P1225 \u9ed1\u767d\u68cb\u6e38\u620f\n// Contest: Luogu\n// URL: https://www.luogu.com.cn/problem/P1225\n// Memory Limit: 125 MB\n// Time Limit: 1000 ms\n\n// Auther: yzxoi\n// Site: yzxoi.top \n\n#include<cstdio>\n#include<queue>\n#include<cstring>\n#define W while\n#define I inline\n#define LL long long\n#define gc getchar\n#define ig(c) ('0'<=(c)&&(c)<='9')\n#define pc(c) putchar((c))\n#define min(x,y) ((x)<(y)?(x):(y))\n#define max(x,y) ((x)>(y)?(x):(y))\nI int read(){int x=0,f=1;char c=gc();W(!ig(c)) f=c=='-'?-1:f,c=gc();W(ig(c)) x=(x<<3)+(x<<1)+(c&15),c=gc();return x*f;}\nI void write(int x){x<0&&(pc('-'),x=-x,0),x<10?(pc(x+'0'),0):(write(x/10),pc(x%10+'0'),0);}\nconst int N=114514;\nconst int dx[]={0,0,1,-1},\n          dy[]={1,-1,0,0};\nint S,T,dis[N],vis[N],pre[N];\nstruct node{int x,y,xx,yy;}pp[N];\nstd::queue<int> q;\nI int v(int p,int x,int y){return p>>x*4+y&1;}\nI int swp(int p,int x,int y,int xx,int yy){int v1=v(p,x,y),v2=v(p,xx,yy);p&=((1<<16)-1)^1<<x*4+y,p&=((1<<16)-1)^1<<xx*4+yy,p|=v2<<x*4+y,p|=v1<<xx*4+yy;return p;}\nI void print(int p){\n\tfor(int i=0;i<4;i++){\n\t\tfor(int j=0;j<4;j++){\n\t\t\tprintf(\"%d \",p>>i*4+j&1);\n\t\t}\n\t\tpc('\\n');\n\t}\n}\nI void bfs(int x){\n\tW(!q.empty()) q.pop();\n\tq.push(x);\n\tmemset(dis,63,sizeof(dis));\n\tdis[x]=0;\n\tW(!q.empty()){\n\t\tint u=q.front();q.pop();\n\t\tfor(int i=0;i<4;i++)\n\t\t\tfor(int j=0;j<4;j++)\n\t\t\t\tfor(int k=0;k<4;k++){\n\t\t\t\t\tint xx=i+dx[k],yy=j+dy[k],p;\n\t\t\t\t\tif(xx>=0&&xx<4&&yy>=0&&yy<4&&v(u,i,j)^v(u,xx,yy)) dis[p=swp(u,i,j,xx,yy)]>dis[u]+1&&(dis[p]=dis[u]+1,pre[p]=u,pp[p]=(node){i,j,xx,yy},!vis[p]&&(vis[p]=1,q.push(p),0),0);\n\t\t\t\t}\n\t}\n}\nI void printpre(int x){\n\tif(pre[x]) printpre(pre[x]);\n\telse return ;\n\twrite(pp[x].x+1),write(pp[x].y+1),write(pp[x].xx+1),write(pp[x].yy+1),pc('\\n');\n}\nint main(){\n\tfor(int i=0;i<4;i++)\n\t\tfor(int j=0;j<4;j++){\n\t\t\tchar c=gc();W(c!='0'&&c!='1') c=gc();\n\t\t\tS|=(c&15)<<i*4+j;\n\t\t}\n\tfor(int i=0;i<4;i++)\n\t\tfor(int j=0;j<4;j++){\n\t\t\tchar c=gc();W(c!='0'&&c!='1') c=gc();\n\t\t\tT|=(c&15)<<i*4+j;\n\t\t}\n\tbfs(S);\n\twrite(dis[T]),pc('\\n');\n\tprintpre(T);\n\treturn 0;\n}\n```",
        "postTime": 1603766697,
        "uid": 37103,
        "name": "yzxoi",
        "ccfLevel": 7,
        "title": "Luogu P1225 \u9ed1\u767d\u68cb\u6e38\u620f \u9898\u89e3"
    },
    {
        "content": "$BFS$\u7ecf\u5178\u9898\u3002\n\n\u8003\u8651\u53ea\u6709$01$\uff0c\u6211\u4eec\u5c06\u68cb\u76d8\u7684\u72b6\u6001\u538b\u7f29\u6210\u4e00\u4e2a$16$\u4f4d$2$\u8fdb\u5236\u6570\uff0c\u6bcf\u6b21\u628a\u72b6\u6001\u5b58\u5230\u4e00\u4e2a\u6570\u7ec4\u91cc\u3002\u518d\u7528\u54c8\u5e0c\u8868\u5224\u91cd\u3002\u4ee3\u7801\u4e2d\u7528$map$\u4ee3\u66ff\u4e86\u54c8\u5e0c\u8868\u3002\n\n\u4ea4\u6362\u65f6\u4f7f\u7528\u4f4d\u8fd0\u7b97\uff0c\u679a\u4e3e\u6bcf\u4e2a\u4f4d\u7f6e\u548c\u5979\u7684\u76f8\u90bb\u4f4d\u7f6e\uff0c\u4e0d\u540c\u5219\u4ea4\u6362\u3002\n\n\u8bb0\u4e00\u4e2a$father$\u8868\u793a\u662f\u7531\u54ea\u4e2a\u72b6\u6001\u6269\u5c55\u6765\u7684\u3002\u8f93\u51fa\u65f6\u6cbf\u7740$father$\u8df3\u56de\u539f\u72b6\u6001\u3002\n\n\u4ee3\u7801\n```cpp\n#pragma GCC optimize(2)\n#include<bits/stdc++.h>\n#define eps 1e-20\n#define re register\n#define N 2001001\n#define MAX 2001\nusing namespace std;\ntypedef long long ll;\ntypedef double db;\ninline void read(re ll &ret)\n{\n    ret=0;re ll pd=0;re char c=getchar();\n    while(!isdigit(c)){pd|=c=='-';c=getchar();}\n    while(isdigit(c)){ret=(ret<<1)+(ret<<3)+(c^48);c=getchar();}\n\tret=pd?-ret:ret;\n}\nll a,b,tot,sum[N],cnt;\nchar s[MAX][MAX];\nll d[5]={0,-4,4,1,-1};\nll dx[5]={0,-1,0,1,0};\nll dy[5]={0,0,1,0,-1};\nstruct node\n{\n\tll a,deep,t,data;\n\tll fa;\n/*\tnode(re ll x,re ll y,re ll z,re ll w)\n\t{\n\t\ta=x;\n\t\tdeep=y;\n\t\tt=w;\n\t\tfa=z;\n\t}*/\n};\nnode ans[N];\nqueue<node>q;\nmap<ll,bool>vis;\nint main()\n{\n\tfor(re int i=1;i<=4;i++)\n\t\tfor(re int j=1;j<=4;j++)\n\t\t{\n\t\t\ts[i][j]=getchar();\n\t\t\twhile(s[i][j]!='0'&&s[i][j]!='1')\n\t\t\t\ts[i][j]=getchar();\n\t\t\ta=(a<<1)+(s[i][j]&15);\n\t\t}\n\tfor(re int i=1;i<=4;i++)\n\t\tfor(re int j=1;j<=4;j++)\n\t\t{\n\t\t\ts[i][j]=getchar();\n\t\t\twhile(s[i][j]!='0'&&s[i][j]!='1')\n\t\t\t\ts[i][j]=getchar();\n\t\t\tb=(b<<1)+(s[i][j]&15);\n\t\t}\n\tre node tmp;\n\ttmp.a=a;\n\ttmp.deep=0;\n\ttmp.fa=0;\n\ttmp.t=0;\n\ttmp.data=++tot;\n\tans[tot]=tmp;\n\tq.push(tmp);\n\twhile(!q.empty())\n\t{\n\t\tre node tmp=q.front();\n\t\tq.pop();\n\t\tif(vis[tmp.a])continue;\n\t\tvis[tmp.a]=true;\n\t/*\tprintf(\"%lld\\n\",tmp.deep);\n\t\tre node tt=tmp;\n\t\twhile(tmp.fa)\n\t\t{\n\t\t\tprintf(\"%lld\\n\",tmp.t);\n\t\t\ttmp=ans[tmp.fa];\n\t\t}\t\n\t\ttmp=tt;\n\t\tputchar('\\n');\n\t\tcout<<tmp.a<<endl;\n\t\tfor(re int i=15;i!=-1;i--)\n\t\t{\n\t\t\tprintf(\"%lld\",bool((1ll<<i)&tmp.a));\n\t\t\tif(i==12||i==8||i==4||i==0)\n\t\t\t\tputchar('\\n');\n\t\t}\n\t\t\t\n\t\tputchar('\\n');\n\t\tsystem(\"pause\");\n\t*/\n\t\tif(tmp.a==b)\n\t\t{\n\t\t\tprintf(\"%lld\\n\",tmp.deep);\n\t\t\twhile(tmp.fa)\n\t\t\t{\n\t\t\t\tsum[++cnt]=tmp.t;\n\t\t\t\ttmp=ans[tmp.fa];\n\t\t\t}\n\t\t\tfor(re int i=cnt;i;i--)\n\t\t\t\tprintf(\"%lld\\n\",sum[i]);\n\t\t\texit(0);\n\t\t}\n\t \tnode nn=tmp;\n\t\tfor(re int i=0;i<16;i++)\n\t\t{\n\t\t\tfor(re int j=1;j<=4;j++)\n\t\t\t{\n\t\t\t\tif(16-i+d[j]<=0||16-i+d[j]>16)continue;\n\t\t\t\tre ll w=ll(ceil(((16-i)/4.0))),x=((16-i)%4==0?4:(16-i)%4),y=ll(ceil(((16-i)+d[j])/4.0)),z=(((16-i)+d[j])%4==0?4:((16-i)+d[j])%4);\n\t\t\t\tre bool flag=false;\n\t\t\t\tfor(re int k=1;k<=4;k++)\n\t\t\t\t\tif(w+dx[k]==y&&x+dy[k]==z)\n\t\t\t\t\t{\n\t\t\t\t\t\tflag=true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tif(!flag)continue;\n\t\t\t\tre bool t1=((1<<i)&tmp.a),t2=((1<<(i-d[j]))&tmp.a);\n\t\t\t\tnn=tmp;\n\t\t\t\tif(t1)\n\t\t\t\t\tnn.a|=(1<<(i-d[j]));\n\t\t\t\telse \n\t\t\t\t\tnn.a&=(~(1<<(i-d[j])));\n\t\t\t\tif(t2)\n\t\t\t\t\tnn.a|=(1<<(i));\n\t\t\t\telse \n\t\t\t\t\tnn.a&=(~(1<<(i)));\n\t\t\t\tnn.deep++;\n\t\t\t\tnn.t=ll(ceil(((16-i)/4.0)))*1000+((16-i)%4==0?4:(16-i)%4)*100+ll(ceil(((16-i)+d[j])/4.0))*10+(((16-i)+d[j])%4==0?4:((16-i)+d[j])%4);\n\t\t\t\tnn.fa=tmp.data;\n\t\t\t\tnn.data=++tot;\n\t\t\t\tans[tot]=nn;\n\t\t\t\tq.push(nn);\n\t\t\t}\n\t\t}\n\t}\n    exit(0);\n}\n```\n",
        "postTime": 1581832673,
        "uid": 176990,
        "name": "Celtic",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "\u8003\u8651`IDDFS`\u3002\n\n\u8bbe\u5931\u914d\u4f4d\u6570\u76ee\u4e3a$n$\uff0c\u663e\u7136\u6700\u5c11\u6b65\u6570$\\geq \\left \\lceil \\frac {n} {2} \\right \\rceil$\n\n\u4ece$\\left \\lceil \\frac {n} {2} \\right \\rceil$\u5f00\u59cb\u641c\u7d22\uff0c\u5b8c\u5168\u5339\u914d\u65f6\u7684\u6b65\u6570\u5373\u4e3a\u6700\u5c11\u6b65\u6570\u3002\n\n\u4f46\u5e38\u89c4\u7684`IDDFS`\u5728\u6b65\u6570\u5f88\u5927\u65f6\u8017\u65f6\u5f88\u957f\uff0c\u65e0\u6cd5\u901a\u8fc7\u6b64\u9898\u3002\n\n\u6570\u636e\u8303\u56f4\u8f83\u5c0f\uff0c\u53ef\u4ee5\u4f7f\u7528\u72b6\u6001\u538b\u7f29\u4fdd\u5b58\u5f53\u524d\u7684\u68cb\u76d8\u3002\n\n\u8bbe$f_{i,j}$\u8868\u793a\u68cb\u76d8\u72b6\u6001\u4e3a$i$\uff0c\u5269\u4f59\u6b65\u6570\u4e3a$j$\u65f6\u80fd\u5426\u53d8\u5316\u5230\u76ee\u6807\u6e38\u620f\u72b6\u6001\u3002\n\n\u5728\u641c\u7d22\u7684\u540c\u65f6\u8bb0\u5f55$f_{i,j}$\uff0c\u53ef\u4ee5\u6781\u5927\u4f18\u5316\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<cstdio>\n#define reg register\nusing namespace std;\n\nconst int dx[4]={1,0,-1,0};\nconst int dy[4]={0,1,0,-1};\nint dp[65537][65];//\u8bb0\u5fc6\u5316\nint ans[65][4];\nint tgt[4][4],map[4][4];\nint rest,from=0;\n\ninline void swap(int &a,int &b)\n{\n    int tmp=a;\n    a=b;\n    b=tmp;\n    return;\n}\n\ninline int trans()//\u83b7\u53d6\u5f53\u524d\u72b6\u6001\n{\n\tint res=0;\n\tfor(reg int i=0;i<4;i++)\n\t\tfor(reg int j=0;j<4;j++)\n\t\t\tres=res|(map[i][j]<<((3-i)*4+3-j));\n\treturn(res);\n}\n\ninline int calc()//\u8ba1\u7b97\u5931\u914d\u4f4d\u6570\u76ee\n{\n    int res=0;\n    for(reg int i=0;i<4;i++)\n        for(reg int j=0;j<4;j++)\n            res+=tgt[i][j]^map[i][j];\n    return(res);\n}\n\nbool dfs(int rst,int ned,int stt)//rst\u4e3a\u5269\u4f59\u6b65\u6570\uff0cned\u4e3a\u5931\u914d\u4f4d\u6570\u76ee\uff0cstt\u4e3a\u5f53\u524d\u72b6\u6001\n{\n    if(rst==0)\n        return(ned==0);\n    if(dp[rst][stt])\n    \treturn(dp[rst][stt]==2?true:false);\n    if((rst<<1)<ned)//\u526a\u679d\n        return(false);\n    bool res=false;\n    for(reg int i=0;i<4;i++)\n        for(reg int j=0;j<4;j++)\n            if(tgt[i][j]!=map[i][j])\n                for(reg int k=0;k<4;k++)\n                {\n                    int qx=i+dx[k],qy=j+dy[k];\n                    if(qx<0||qx==4||qy<0||qy==4||map[qx][qy]==map[i][j])\n                        continue;\n                    swap(map[qx][qy],map[i][j]);\n                    res=res|dfs(rst-1,calc(),trans()); \n                \tif(res)\n                \t\treturn(dp[rst][stt]=res?2:1,res);\n                    swap(map[qx][qy],map[i][j]);\n                }\n    return(dp[rst][stt]=res?2:1,res);\n}\n\nint main()\n{\n    for(reg int i=0;i<4;i++)\n        for(reg int j=0;j<4;j++)\n            scanf(\"%1d\",&map[i][j]);\n    for(reg int j=0;j<4;j++)\n        for(reg int i=0;i<4;i++)\n            scanf(\"%1d\",&tgt[j][i]);\n    from=trans();//\u521d\u59cb\u72b6\u6001\n    rest=calc();\n    reg int lim=rest>>1;\n    for(;lim<=64;++lim)\n        if(dfs(lim,rest,from))\n            break;\n    printf(\"%d\\n\",lim); \n    return(0);\n}\n```",
        "postTime": 1573010451,
        "uid": 14854,
        "name": "\u672a\u89c1\u5807\u5f00",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    },
    {
        "content": "### \u672c\u9898\u4e3a\u4e00\u9053\u6bd4\u8f83\u6807\u51c6\u7684bfs\u9898\n\n\u8fd9\u9053\u9898\u8fd8\u60f3\u8fd8\u6709\u4e00\u4e2a\u7b80\u6613\u7248\u672c\uff0c\u4e0d\u7528\u8f93\u51fa\u6b65\u9aa4\uff1a[P4289](https://www.luogu.org/problem/P4289)\n\n\u73b0\u5728\u6211\u4eec\u770b\u5230\u8fd9\u9053\u9898\uff1a\u201c\u68cb\u76d8\u201d\uff0c\u53c8\u662f\u4e00\u9053\u641c\u7d22\u9898\uff0c\u90a3\u591a\u534a\u662f\u5e7f\u641c\u4e86\uff0c\u90a3\u6211\u4eec\u5e7f\u641c\u600e\u4e48\u53bb\u91cd\u5462\uff0c16\u4f4d\u5982\u679c\u662f\u6574\u578b\u90a3\u4e48\u80af\u5b9a\u88c5\u4e0d\u4e0b\uff0c\u4f46\u6211\u4eec\u77e5\u9053$4*4$\u7684\u77e9\u9635\u4e2d\u6bcf\u4e2a\u6570\u8981\u4e48\u662f0\uff0c\u8981\u4e48\u662f1\u3002\n\nso\u6211\u4eec\u5c06\u5176\u8f6c\u5316\u4e3a\u4e00\u4e2a\u6700\u591a\u4e3a16\u4f4d\u7684\u4e8c\u8fdb\u5236\u7684\u6570\uff0c\u518d\u5c06\u5176\u8f6c\u5316\u4e3a\u5341\u8fdb\u5236\u5c31\u53ef\u4ee5\u5c06\u5176\u4f5c\u4e3a\u6570\u7ec4\u4e0b\u6807\u53bb\u91cd\u4e86\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0$(1111111111111111)_2$(16\u4e2a1),\u8f6c\u5316\u4e3a\u5341\u8fdb\u5236\u4e3a65535,\u6240\u4ee5\u6570\u7ec4\u6700\u591a\u53ea\u8981\u5f001e5\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u8f6c\u5316\u4ee3\u7801\u5982\u4e0b\n\n```cpp\nint conver(int tmp[4][4])\n{\n\tint res=0,base=1;\n\tfor(re int i=3;i>=0;i--)\n\t{\n\t\tfor(re int j=3;j>=0;j--)\n\t\t{\n\t\t\tres+=tmp[i][j]*base;\n\t\t\tbase*=2;\n\t\t}\n\t}\n\treturn res;\n}\n```\n\u641c\u7d22\u65f6\uff0c\u6211\u4eec\u5f39\u51fa\u4e00\u4e2a\u503c\uff0c\u5982\u679c\u5c31\u662f\u76ee\u6807\u503c\u7684\u8bdd\uff0c\u5c31\u76f4\u63a5break\uff0creturn\u76ee\u6807\u7684\u6b65\u6570\u3002\u5982\u679c\u4e0d\u662f\uff0c\u628a\u5b83\u8f6c\u5316\u4e3a\u77e9\u9635\uff0c\u6211\u4eec\u518d\u679a\u4e3e\uff0c\u5c06\u6bcf\u4e00\u4e2a\u68cb\u5b50\u4e0e\u5468\u56f4\u56db\u4e2a\u683c\u5b50\u4e2d\u4e0e\u81ea\u5df1\u5f02\u8272\u7684\u68cb\u5b50\u4ea4\u6362(\u6362\u540c\u8272\u68cb\u5b50\u6ca1\u6709\u610f\u4e49\uff0c\u56e0\u4e3a\u540c\u8272\u95f4\u68cb\u5b50\u6ca1\u6709\u533a\u522b\uff09\u3002\n\n\u4ea4\u6362\u4ee5\u540e\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u77e9\u9635\uff0c\u7edf\u8ba1\u5b83\u7684\u6b65\u6570\uff0c\u524d\u9a71\uff0c\u4ee5\u53ca\u4ea4\u6362\u7684\u4e24\u4e2a\u68cb\u5b50\u7684\u5750\u6807\uff0c\u628a\u8fd9\u4e2a\u5750\u6807\u5316\u4e3a\u4e00\u4e2a\u56db\u4f4d\u6570\uff0c\u518d\u628a\u5b83\u538b\u5165\u961f\u5217\u4e2d\u3002\n\n\u6700\u540e\u8f93\u51fa\u6211\u4eec\u76ee\u6807\u7684\u6b65\u6570\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u81f3\u4e8e\u4e2d\u95f4\u6b65\u9aa4\uff0c\u6211\u4eec\u4ece\u76ee\u6807\u5f00\u59cb\uff0c\u4e0d\u65ad\u5730\u8be2\u95ee\u5b83\u7684\u524d\u9a71\uff0c\u5c06\u4e2d\u95f4\u4ea4\u6362\u7684\u4e24\u4e2a\u5750\u6807\u8f6c\u5316\u6210\u7684\u6570\u538b\u5165\u6808\u4e2d\uff0c\u6700\u540e\u518d\u5168\u90e8\u5f39\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff0c\u6709\u4e86\u6ce8\u91ca\u5e94\u8be5\u4f1a\u66f4\u6e05\u6670\u4e00\u4e9b\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define in inline//\u7384\u5b66\u4f18\u5316 \n#define re register\nint tag;//\u6211\u4eec\u7684\u76ee\u6807 \nconst int N=1e6+10;//\u6570\u7ec4\u5f00\u5927\u4e00\u70b9\u9632\u6b62\u7206\u6389 \nint xx[4]={0,-1,0,1};//\u679a\u4e3e\u5176\u4e0a\u5de6\u4e0b\u53f3 \nint yy[4]={1,0,-1,0};\nin int read()//\u5feb\u8bfb \n{\n\tint w=0,r=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch))\n\t{\n\t\tif(ch=='-')r=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch))\n\t{\n\t\tw=(w<<1)+(w<<3)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn w*r;\n}\n\nint st[4][4];//\u8d77\u59cb\u8f93\u5165 \nin int conver(int tmp[4][4])//\u77e9\u9635\u8f6c\u5341\u8fdb\u5236\u6570 \n{\n\tint res=0,base=1;\n\tfor(re int i=3;i>=0;i--)\n\t{\n\t\tfor(re int j=3;j>=0;j--)\n\t\t{\n\t\t\tres+=tmp[i][j]*base;\n\t\t\tbase*=2;\n\t\t}\n\t}\n\treturn res;\n}\nqueue<int > q;//bfs\u6240\u7528\u961f\u5217 \n\nstruct Map//\u53bb\u91cd\u6570\u7ec4 \n{\n\tint pre;//\u524d\u9a71 \n\tint val;//\u6b65\u6570 \n\tint step;//\u4ea4\u6362\u7684\u4e24\u4e2a\u5750\u6807\u6240\u5316\u5f97\u56db\u4f4d\u6570\uff1b \n}mp[N];\nstruct node//\u6bcf\u4e2a\u68cb\u5b50\u7684\u5750\u6807 \n{\n\tint x,y;\n}nd[20];//\u53ea\u670916\u4e2a\u68cb\u5b50 \nint cnt=0;\nin int bfs()//\u5e7f\u641c \n{\n\twhile(!q.empty())\n\t{\n\t\tint c[4][4];//\u4e34\u65f6\u50a8\u5b58\u6570\u7ec4 \n\t\tint u=q.front(),n=u;//\u5c06\u72b6\u6001\u5f39\u51fa \n\t\tif(u==tag)break;//\u5982\u679c\u627e\u5230\u7ed3\u679c\uff0c\u90a3\u4e48break \n\t\tq.pop();\n\t\tfor(re int i=3;i>=0;i--)//\u8f6c\u5316\u4e3a\u77e9\u9635\u72b6\u6001 \n\t\t{\n\t\t\tfor(re int j=3;j>=0;j--)\n\t\t\t{\n\t\t\t\tc[i][j]=n%2;\n\t\t\t\tn/=2;\n\t\t\t}\n\t\t}\n\t\tfor(re int i=1;i<=16;i++)//\u679a\u4e3e\u6bcf\u4e2a\u68cb\u5b50 \n\t\t{\n\t\t\tint stx=nd[i].x,sty=nd[i].y; \n\t\t\tfor(re int j=0;j<4;j++)//\u679a\u4e3e\u56db\u4e2a\u65b9\u5411 \n\t\t\t{\n\t\t\t\tint nx=stx+xx[j],ny=sty+yy[j];\n\t\t\t\tif(nx<0||nx>3||ny<0||ny>3||c[nx][ny]==c[stx][sty])continue;//\u8d8a\u754c\u6216\u540c\u8272\u90fd\u4e0d\u4ea4\u6362 \n\t\t\t\tswap(c[stx][sty],c[nx][ny]);//\u4ea4\u6362 \n\t\t\t\tint tmp=conver(c);//\u65b0\u7684\u72b6\u6001 \n\t\t\t\tif(!mp[tmp].val)//\u5224\u65ad\u662f\u5426\u91cd\u590d \n\t\t\t\t{\n\t\t\t\t\tmp[tmp].val=mp[u].val+1;//\u8bb0\u5f55\u6b65\u6570 \n\t\t\t\t\tmp[tmp].pre=u;//\u8bb0\u5f55\u524d\u9a71 \n\t\t\t\t\tmp[tmp].step=(stx+1)*1000+(sty+1)*100+(nx+1)*10+(ny+1);//\u8f6c\u5316\u4e3a\u56db\u4f4d\u6570\u4fdd\u5b58\u6b65\u9aa4\uff0c\u56e0\u4e3a\u6211\u662f0\u4e0b\u6807\u5f00\u59cb\uff0c\u6240\u4ee5\u8981\u52a0\u4e00 \n\t\t\t\t\tq.push(tmp);//\u538b\u5165\u961f\u5217 \n\t\t\t\t}\n\t\t\t\tswap(c[stx][sty],c[nx][ny]);//\u8fd9\u91cc\u4e00\u5b9a\u8981\u6362\u56de\u6765\uff0c\u4e0d\u7136gg \n\t\t\t}\n\t\t}\n\t}\n\treturn mp[tag].val;//\u627e\u5230\u4e86\u5c31\u8fd4\u56de\u6b65\u6570 \n}\nint ed[4][4];//\u76ee\u6807\u8f93\u5165 \nint main()\n{\n//\tfreopen(\"toy.in\",\"r\",stdin);\n//\tfreopen(\"toy.out\",\"w\",stdout);\n\tfor(re int i=0;i<4;i++)//\u8f93\u5165 \n\t{\n\t\tint tmp=read();//\u5148\u83b7\u53d6\u4e00\u884c\uff0c\u518d\u5206\u5272 \n\t\tfor(re int j=3;j>=0;j--)\n\t\t{\n\t\t\tst[i][j]=tmp%10;\n\t\t\ttmp/=10;\n\t\t}\n\t}\n\tcnt=0;\n\tfor(re int i=0;i<=3;i++)//\u8bb0\u5f55\u6bcf\u4e2a\u68cb\u5b50\u5750\u6807\uff0c\u8fd9\u91cc\u6211\u662f0\u4e0b\u6807\u5f00\u59cb \n\t{\n\t\tfor(re int j=0;j<=3;j++)\n\t\t{\n\t\t\tcnt++;\n\t\t\tnd[cnt].x=i;\n\t\t\tnd[cnt].y=j;\n\t\t}\n\t}\n\tfor(re int i=0;i<4;i++)\n\t{\n\t\tint tmp=read();\n\t\tfor(re int j=3;j>=0;j--)\n\t\t{\n\t\t\ted[i][j]=tmp%10;\n\t\t\ttmp/=10;\n\t\t}\n\t}\n\tq.push(conver(st));//\u8d77\u59cb\u72b6\u6001\u538b\u5165 \n\ttag=conver(ed);//\u83b7\u53d6\u76ee\u6807\u503c \n\tint rev=bfs();//\u50a8\u5b58\u6b65\u6570 \n\tcout<<rev<<endl; \n\tstack<int> st;\n\tfor(re int i=tag,j=0;j<rev;j++,i=mp[i].pre)//\u4ece\u76ee\u6807\u503c\u5f00\u59cb\uff0c\u5f80\u524d\u83b7\u53d6\u524d\u9a71\uff0c\u5c06\u6b65\u9aa4\u538b\u5165\u6808\uff0c\u6b65\u6570\u5df2\u77e5 \n\t{\n\t\tst.push(mp[i].step);\n\t}\n\twhile(!st.empty())//\u7528\u6808\u9006\u5e8f\u8f93\u51fa \n\t{\n\t\tcout<<st.top()<<endl;\n\t\tst.pop();\n\t}\n\treturn 0;\n}\n```\n\n\u6d4b\u8bd5\u5e73\u5747\u6bcf\u4e2a\u70b925ms\n\n\u8fd9\u9053\u9898\u7ec6\u8282\u8fd8\u662f\u86ee\u591a\u7684\uff0c\u8c03\u4e86\u597d\u4e45\u3002\u3002\u3002\n",
        "postTime": 1569554454,
        "uid": 137521,
        "name": "rayluo",
        "ccfLevel": 7,
        "title": "\u9ed1\u767d\u68cb\u6e38\u620f"
    },
    {
        "content": "\u8fd9\u4efd\u4ee3\u7801\u5341\u5206\u590d\u6742\uff08\u56e0\u4e3a\u6211\u95f2\u7684\u86cb\u75bc\n\u5c01\u88c5\u4e86\u4e00\u4e2abitset\u7c7b\uff0c\u56e0\u4e3aSTL\u7684bitset\u6709\u6bd2\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u4f1aMLE\uff0c\u6240\u4ee5\u6211\u624b\u5199\u4e86\u4e00\u4e2a\u3002\u867d\u7136\u529f\u80fd\u6ca1\u6709bitset\u5b8c\u5584\u3002\u4f46\u662f\u652f\u6301MAP\uff0c\u8fd9\u5c31\u8868\u793a\u6211\u4eec\u53ef\u4ee5\u5229\u7528map\u6765\u67e5\u91cd\uff0c\u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u7528unordered_map\u6765\u5b9e\u73b0O(1)\u7684\u67e5\u627e\uff0c\u4f46\u662f\u8fd9\u6837\u91cd\u8f7d\u7684\u51fd\u6570\u6709\u70b9\u591a\uff0c\u6211\u6bd4\u8f83\u61d2\uff0c\u800cmap\u53ea\u9700\u8981\u91cd\u8f7d<\u7b26\u53f7\u5373\u53ef\u3002\n\u4e0b\u9762\u662f\u6211\u5b8c\u6574\u7684\u4ee3\u7801\uff0c\u57fa\u672c\u601d\u8def\u548c\u5176\u4ed6\u9898\u89e3\u4e00\u6837\uff0c\u56e0\u4e3a\u6570\u636e\u8303\u56f4\u5f88\u5c0f\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u76f4\u63a5\u7528bfs\u6765\u641c\u7d22\u3002\n```cpp\n#include <bits/stdc++.h>\nusing namespace std; \ninline int read() {\n    char ch = getchar(); int x = 0;short f = 1;\n    while(ch < '0' || ch > '9') {\n        if(ch == '-') f = -1;\n        ch = getchar();\n    } while('0' <= ch && ch <= '9') {\n        x = x * 10 + ch - '0';\n        ch = getchar();\n    } return x * f;\n}\nclass shit {\nprivate:\n\tint num = 0;\npublic:\n\tbool  operator [] (int index) {\n\t\treturn (num >> index) & 1;\n\t}\n\tvoid set (int index,bool v) {\n\t\tif (!v) {\t//\u8bbe\u7f6e\u6210false \n\t\t\tnum = (num & (~(1 << index)));\n\t\t\treturn ;\n\t\t}\n\t\t//\u5426\u5219\u8bbe\u7f6e\u4e3atrue\n\t\tnum = (num | (1 << index));\n\t\treturn ; \n\t}\n\tbool operator < (const shit &target) const{\n\t\treturn num < target.num;\n\t}\n\tbool operator == (shit target) {\n\t\treturn target.num == num;\n\t}\n};\nstruct deal {\n\tbool used;\n\tint last;\n\tint x1,x2,y1,y2;\n};\ndeal road [1000000];\nint cnt = 0; \nstruct node {\n\tshit stat;\n\tint cost;\n\tint index;\n};\ninline void print (shit f) {\n\tfor (int i = 0;i < 4;i ++) {\n\t\tfor (int j = 0;j < 4;j ++) {\n\t\t\tcout << (f[4 * i + j])?1:0;\n\t\t}\n\t\tcout << endl;\n\t}\n}\ninline void print (deal t) {\n\tif (!t.used) {\n\t\treturn ;\n\t}\n\tprint (road[t.last]);\n\tcout << t.y1 + 1 << t.x1 + 1 << t.y2 + 1 << t.x2 + 1 << endl;\n}\nmap <shit,bool> went;\nint main() {\n\t//bfs\n\tqueue<node> q;\n\tnode begin;\n\tbegin.cost = 0;\n\tbegin.index = 0;\n\tfor (int i = 0;i < 4;i ++) {\n\t\tstring line;cin >> line ;\n\t\tfor (int j = 0;j < 4;j ++) {\n\t\t\tif (line [j] == '1') {\n\t\t\t\tbegin.stat.set((i * 4 + j),1); \n\t\t\t}\n\t\t}\n\t}\n\tnode last;\n\tlast.cost = 0;\n\tfor (int i = 0;i < 4;i ++) {\n\t\tstring line;cin >> line ;\n\t\tfor (int j = 0;j < 4;j ++) {\n\t\t\tif (line [j] == '1') {\n\t\t\t\tlast.stat.set((i * 4 + j),1); \n\t\t\t}\n\t\t}\n\t}\n\tq.push (begin);\n\twhile (!q.empty ()) {\n\t\tnode rtop = q.front ();q.pop ();\n\t\tif (went.find (rtop.stat) != went.end ()) {\n\t\t\tcontinue ;\n\t\t}\n\t\twent [rtop.stat] = true;\n\t\tif (rtop.stat == last.stat) {\n\t\t\tcout << rtop.cost << endl;\n\t\t\tprint (road[rtop.index]);\n\t\t\treturn 0;\n\t\t}\n\t\t//\u935a\ufe40\u57af\u704f\u8fa8\u7047\u6d93\u53e5\u6c26\u93b9?\n\t\tfor (int i = 0;i < 4;i ++) {\n\t\t\tfor (int j = 0;j < 4;j ++) {\n\t\t\t\tint index = 4 * i + j;\n\t\t\t\tnode top = rtop;\n\t\t\t\t++ top.cost;\n\t\t\t\t\tif (j - 1 >= 0) {\t//\u6d93\u5ea1\u4e4f\u6748\u901b\u6c26\u93b9?\n\t\t\t\t\t\tbool temp = top.stat [index];\n\t\t\t\t\t\ttop.stat.set(index,top.stat [index - 1]); \n\t\t\t\t\t\ttop.stat.set(index - 1,temp); \n\t\t\t\t\t\troad [++cnt].last = rtop.index;\n\t\t\t\t\t\troad [cnt].used = true;\n\t\t\t\t\t\ttop.index = cnt;\n\t\t\t\t\t\troad [cnt].x1 = j;road [cnt].y1 = i;\n\t\t\t\t\t\troad [cnt].x2 = j - 1;road [cnt].y2 = i;\n\t\t\t\t\t\tq.push (top);\n\t\t\t\t\t\ttop.stat = rtop.stat;\n\t\t\t\t\t}\n\t\t\t\t\tif (j + 1 < 4) {\n\t\t\t\t\t\tbool temp = top.stat [index];\n\t\t\t\t\t\ttop.stat.set(index,top.stat [index + 1]); \n\t\t\t\t\t\ttop.stat.set(index + 1,temp); \n\t\t\t\t\t\troad [++ cnt].last = rtop.index;\n\t\t\t\t\t\ttop.index = cnt;\n\t\t\t\t\t\troad [cnt].used = true;\n\t\t\t\t\t\troad [cnt].x1 = j;road [cnt].y1 = i;\n\t\t\t\t\t\troad [cnt].x2 = j + 1;road [cnt].y2 = i;\n\t\t\t\t\t\tq.push (top);\n\t\t\t\t\t\ttop.stat = rtop.stat;\n\t\t\t\t\t}\n\t\t\t\t\tif (i - 1 >= 0) {\n\t\t\t\t\t\tbool temp = top.stat [index];\n\t\t\t\t\t\ttop.stat.set(index,top.stat [index - 4]); \n\t\t\t\t\t\ttop.stat.set(index - 4,temp); \n\t\t\t\t\t\troad [++ cnt].last = rtop.index;\n\t\t\t\t\t\ttop.index = cnt;\n\t\t\t\t\t\troad [cnt].used = true;\n\t\t\t\t\t\troad [cnt].x1 = j;road [cnt].y1 = i;\n\t\t\t\t\t\troad [cnt].x2 = j;road [cnt].y2 = i - 1;\n\t\t\t\t\t\tq.push (top);\n\t\t\t\t\t\ttop.stat = rtop.stat;\n\t\t\t\t\t}\n\t\t\t\t\tif (i + 1 < 4) {\n\t\t\t\t\t\tbool temp = top.stat [index];\n\t\t\t\t\t\ttop.stat.set(index,top.stat [index + 4]); \n\t\t\t\t\t\ttop.stat.set(index + 4,temp); \n\t\t\t\t\t\troad [++ cnt].last = rtop.index;\n\t\t\t\t\t\ttop.index = cnt;\n\t\t\t\t\t\troad [cnt].used = true;\n\t\t\t\t\t\troad [cnt].x1 = j;road [cnt].y1 = i;\n\t\t\t\t\t\troad [cnt].x2 = j;road [cnt].y2 = i + 1;\n\t\t\t\t\t\tq.push (top);\n\t\t\t\t\t\ttop.stat = rtop.stat;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\t}\n\treturn 0; \n}\n```\n",
        "postTime": 1565144939,
        "uid": 203326,
        "name": "Dorbmon",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P1225 \u3010\u9ed1\u767d\u68cb\u6e38\u620f\u3011"
    }
]
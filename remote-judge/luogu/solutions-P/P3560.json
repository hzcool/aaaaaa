[
    {
        "content": "# Solution\n\n\u5148\u6c42\u51fa\u6bcf\u4e2a\u6570\u7684 $\\text{Hash}$ \u503c\uff0c\u518d\u5c06\u76ee\u6807\u4e32\u7684\u5404\u4e2a\u6570\u7684 $\\text{Hash}$ \u503c\u4e58\u4e0a\u5404\u81ea\u51fa\u73b0\u6b21\u6570\uff0c\u6240\u5f97\u548c\u5373\u4e3a\u76ee\u6807\u4e32\u7684 $\\text{Hash}$ \u503c\u3002\n\n\u8bb0\u76ee\u6807\u4e32\u957f\u5ea6\u4e3a $len$\u3002\n\n\u540c\u7406\u6c42\u51fa\u539f\u4e32\u6bcf\u4e2a\u957f\u5ea6\u4e3a $len$ \u7684\u5b57\u4e32\u7684 $\\text{Hash}$ \u503c\uff0c\u5e76\u4e0e\u76ee\u6807\u4e32\u6bd4\u8f83\u5373\u53ef\u3002\u5229\u7528\u53cc\u6307\u9488\u4ece\u5de6\u5230\u53f3\u626b\u63cf\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002",
        "postTime": 1657439793,
        "uid": 302636,
        "name": "zhaoyp",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P3560 \u3010[POI2013]LAN-Colorful Chain\u3011"
    },
    {
        "content": "[\u9898\u9762](https://www.luogu.org/problemnew/show/P3560)\n\n\u9898\u5916\u8bdd\uff1a\u4ecd\u7136(\u4e3a\u4ec0\u4e48\u662f\u4ecd\u7136)%\u4e00\u53d1\u4e0b\u9762\u7684\u989c\u795e233\n\n\u6bd4\u8f83\u88f8\u7684Hash\u9898\uff0c\u5148\u6253\u4e2aHash\u8868\u3002\u628a\u6bcf\u4e2a\u989c\u8272\u62c6\u6210\u4e00\u4e2a\u4e2a\u62c6\u6210\u4e00\u4e32$1$\u5bf9\u5e94\u5728Hash\u8868\u4e0a\uff0c\u518d\u4e58\u4e0a\u51fa\u73b0\u6b21\u6570\u3002\u6309\u8fd9\u4e2a\u65b9\u6cd5\u628a\u6240\u6709\u597d\u7684\u989c\u8272Hash\u6210\u4e00\u4e2a\u957f\u4e32\u3002\u6700\u540e\u5728\u5e8f\u5217\u4e0a\u79fb\u52a8\u5de6\u53f3\u7aef\u70b9$O(n)$\u626b\u8fc7\u53bb\uff0c\u6bcf\u6b21Hash\u4e00\u904d\u5224\u65ad\u5373\u53ef\u3002\n\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst unsigned long long mod=23333333333333333,bas=131;\nunsigned long long hsh[1000009];\nint cnt[1000009],num[1000009];\nunsigned long long goal,noww;\nint n,m,rd,l=1,r,ans,maxx;\nint main ()\n{\n\tscanf(\"%d%d\",&n,&m);\n\thsh[0]=1;\n\tfor(int i=1;i<=n;i++)\n\t\thsh[i]=hsh[i-1]*bas%mod;\n\tfor(int i=1;i<=m;i++)\n\t\tscanf(\"%d\",&cnt[i]),maxx+=cnt[i];//\u8bb0\u5f55\u76ee\u6807\u4e32\u7684\u957f\u5ea6\n\tfor(int i=1;i<=m;i++)\n\t\tscanf(\"%d\",&rd),goal+=hsh[rd]*cnt[i];//\u6784\u5efa\u76ee\u6807\u4e32\n\tfor(int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&num[i]);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tnoww+=hsh[num[i]];//\u4fee\u6539\u5f53\u524d\u4e32\n\t\tif(++r-l+1>maxx) noww-=hsh[num[l++]];//\u79fb\u52a8\u5de6\u53f3\u7aef\u70b9\n\t\tif(noww==goal) ans++;\n\t}\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1527323919,
        "uid": 56967,
        "name": "ydnhaha",
        "ccfLevel": 0,
        "title": "\u89e3\u9898\uff1aPOI 2013 Colorful Chain----Hash"
    },
    {
        "content": "+ \u7b80\u8981\u9898\u610f\uff1a\u7ed9\u51fa\u4e00\u4e2a\u5e8f\u5217 $\\{a_n\\}$\uff0c\u6c42\u5176\u6709\u591a\u5c11\u4e2a\u5b50\u4e32 $\\{a_l,a_{l+1}\\cdots,a_r\\}$ \u6ee1\u8db3\u5bf9\u4e8e\u6570\u5b57 $c_i$\uff0c\u6070\u597d\u51fa\u73b0 $l_i$ \u6b21\u3002\n\n\u6211\u4eec\u5176\u5b9e\u4e0d\u5173\u5fc3\u8fd9\u4e2a\u6570\u5230\u5e95\u51fa\u73b0\u5728\u5565\u4f4d\u7f6e\uff0c\u53ea\u5173\u5fc3\u51fa\u73b0\u4e86\u591a\u5c11\u6b21\u3002\n\n\u4e00\u4e2a\u6734\u7d20\u7684\u60f3\u6cd5\u662f\u7528\u6876\u8bb0\u5f55\u6bcf\u4e2a\u6570\u51fa\u73b0\u4e86\u591a\u5c11\u6b21\uff0c\u7136\u540e\u626b\u4e00\u904d\uff0c\u6bcf\u6b21\u68c0\u67e5\u3002\u8fd9\u6837\u7684\u590d\u6742\u5ea6\u662f $O(nV)$ \u7684\u3002\n\n$n$ \u4f30\u8ba1\u662f\u8dd1\u4e0d\u6389\uff0c\u6211\u4eec\u8003\u8651\u600e\u4e48\u641e\u6389 $V$ \u8fd9\u4e00\u7ef4\u3002\n\n\u6211\u4eec\u7528\u7c7b\u4f3c\u5b57\u7b26\u4e32\u54c8\u5e0c\u7684\u65b9\u6cd5\u54c8\u5e0c\u8fd9\u4e2a\u5e8f\u5217\u4f3c\u4e4e\u662f\u53ef\u884c\u7684\uff01\n\n\u6211\u4eec\u7ed9\u6bcf\u4e2a\u6570\u5b57\u90fd\u94a6\u5b9a\u4e00\u4e2a\u54c8\u5e0c\u503c $H_x$\uff0c\u5c06\u5bf9\u4e8e\u4e00\u4e2a\u5b50\u4e32\u5c06\u4e4b $H_{a_i}$ \u7d2f\u52a0\u5373\u53ef\u3002\n\n\u7531\u4e8e\u90fd\u662f\u6070\u597d\u51fa\u73b0\uff0c\u6240\u4ee5\u80fd\u5408\u7406\u7684\u5b57\u7b26\u4e32\u663e\u7136\u662f\u957f\u5ea6\u4e3a $\\sum l_i$ \u7684\u3002\n\n\u8fd9\u6837\u5bf9\u4e8e\u6bcf\u4e2a\u957f\u5ea6\u5408\u6cd5\u7684\u4e32\u54c8\u5e0c\uff0c\u548c\u539f\u4e32\u6bd4\u5bf9\u5373\u53ef\u3002\u8fd9\u91cc\u7528\u4e24\u4e2a\u4e0d\u540c\u7684\u8d28\u6570\u53d6\u6a21\u3002\u65e2\u7136 $\\text{Hash}(l,r)=\\sum\\limits_{i=l}^r H_{a_i}$\uff0c\u5219\u73b0\u5728\u68c0\u67e5\u7684\u533a\u95f4 $\\text{Hash}(l,r)$ \u53ef\u4ee5\u5feb\u901f\u4ece\u524d\u4e00\u4e2a\u533a\u95f4\u7684 $\\text{Hash}(l-1,r-1)$ \u63a8\u5f97\u3002\n\n```cpp\n#include <iostream>\n#define rep(i,l,r) for(i=l;i<=r;++i)\nusing namespace std;\nusing ull=unsigned long long;\nconst int N=1000005;\null li[N],h[2][N],v[N];\nconst ull bse=122,p1=10000007ll,p2=10000537ll;\null n1,m1,n2,m2,ci,len,n,m,i,ret,l;\nint main ()\n{\n\tcin>>n>>m;\n\th[0][0]=h[1][0]=1;\n\trep(i,1,n)\n\t{\n\t\th[0][i]=h[0][i-1]*bse%p1;\n\t\th[1][i]=h[1][i-1]*bse%p2;\n\t}\n\trep(i,1,m)\n\t{\n\t\tcin>>li[i];\n\t\tlen+=li[i];\n\t}\n\trep(i,1,m)\n\t{\n\t\tcin>>ci;\n\t\tm1+=h[0][ci]*li[i];\n\t\tm2+=h[1][ci]*li[i];\n\t}\n//\tcout<<m1<<' '<<m2<<endl;\n\trep(i,1,n)\n\t\tcin>>v[i];\n\tl=1;\n\trep(i,1,len-1)\n\t{\n\t\tn1+=h[0][v[i]];\n\t\tn2+=h[1][v[i]];\n\t}\n\trep(i,len,n)\n\t{\n\t\tn1+=h[0][v[i]];\n\t\tn2+=h[1][v[i]];\n\t\tif(i-l+1>len)\n\t\t{\n\t\t\tn1-=h[0][v[l]];\n\t\t\tn2-=h[1][v[l]];\n\t\t\t++l;\n\t\t}\n\t\tif(n1==m1 && n2==m2)\n\t\t\t++ret;\n\t}\n\tprintf(\"%d\",ret);\n\treturn 0;\n}\n```",
        "postTime": 1685629733,
        "uid": 575994,
        "name": "Etinorally",
        "ccfLevel": 5,
        "title": "LAN-Colorful Chain"
    },
    {
        "content": "## Solution\n\u6613\u77e5 $\\sum l_i$ \u4e3a\u5b50\u4e32\u957f\u5ea6\uff0c\u6240\u4ee5\u4ece\u5934\u5f00\u59cb\u62ff\u4e00\u6bb5\u533a\u95f4\u5f80\u540e\u6ed1\uff0c\u7b2c\u4e00\u6b21\u7684\u7b54\u6848\u66b4\u529b\u5f97\u51fa\uff0c\u540e\u9762\u7684\u7b54\u6848\u53ef\u6839\u636e\u4e0a\u4e00\u6b21\u7684\u7b54\u6848\u52a0\u4e00\u4e2a\u6570\u51cf\u4e00\u4e2a\u6570\u5f97\u5230\u3002\u5f00\u4e00\u4e2a\u6876\uff0c\u7ef4\u62a4 $now$ \u4e3a\u7b26\u5408\u8981\u6c42\u7684\u6570\u7684\u6570\u91cf\uff0c\u82e5 $now=m$\uff0c\u5219\u7b54\u6848\u52a0 $1$\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define pb push_back\n#define mkp make_pair\n#define fi first\n#define se second\nusing ll=long long;\nusing pii=pair<int,int>;\nusing pll=pair<ll,ll>;\nusing ull=unsigned long long;\ninline void read(int &x){\n  char ch=getchar();\n  int r=0,w=1;\n  while(!isdigit(ch))w=ch=='-'?-1:1,ch=getchar();\n  while(isdigit(ch))r=(r<<1)+(r<<3)+(ch^48),ch=getchar();\n  x=r*w;\n}\nconst int N=1e6+7;\nint p[N],n,m,a[N],c[N],l[N],cnt[N],ans,len,now;\nvoid add(int x){\n  if(++cnt[a[x]]==p[a[x]])now++;\n  if(cnt[a[x]]==p[a[x]]+1)now--;\n  if(now==m)ans++;\n}\nvoid del(int x){\n  if(--cnt[a[x]]==p[a[x]])now++;\n  if(cnt[a[x]]==p[a[x]]-1)now--;\n  if(now==m)ans++;\n}\nint main(){\n  read(n);read(m);\n  for(int i=1;i<=m;i++)read(l[i]),len+=l[i];\n  for(int i=1;i<=m;i++)read(c[i]),p[c[i]]=l[i];\n  for(int i=1;i<=n;i++)read(a[i]);\n  for(int i=1;i<=len;i++)add(i);\n  for(int i=2;i<=n-len+1;i++)del(i-1),add(i+len-1);\n  cout<<ans;\n  return 0;\n}\n```",
        "postTime": 1675415953,
        "uid": 415256,
        "name": "Epoch_L",
        "ccfLevel": 5,
        "title": "P3560"
    },
    {
        "content": "## Preface\n> \u968f\u673a\u8df3\u9898\u8df3\u5230\u7684\u2026\u2026\u4e3a\u4ec0\u4e48 solution \u91cc\u9762\u5168\u662f\u5b57\u7b26\u4e32 hash \u554a qwq\n## Analysis\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u628a\u6570\u5217 $c$ \u91cc\u7684\u6570\u5b57\u79f0\u4e3a\u300c\u5173\u952e\u6570\u5b57\u300d\u3002\n\n\u6211\u4eec\u8003\u8651\u7528\u4e00\u4e2a ```vector``` \u6570\u7ec4\u628a\u6240\u6709\u6570\u5b57\u51fa\u73b0\u7684\u4f4d\u7f6e\u8bb0\u4e0b\u6765\u3002\uff08\u4e3a\u4e86\u65b9\u4fbf\uff0c\u8fd9\u91cc\u53ef\u4ee5\u5148\u4e0d\u7ba1\u662f\u4e0d\u662f\u5173\u952e\u6570\u5b57\uff09\n\n\u7136\u540e\u626b\u4e00\u904d\uff0c\u6bcf\u8d70\u5230\u4e00\u4e2a\u4f4d\u7f6e\u5c31\u5e72\u4e09\u4ef6\u4e8b\u60c5\uff1a\n\n1. \u4ee5**\u8be5\u70b9\u4e3a\u8d77\u70b9**\u8ba1\u7b97\u7ec8\u70b9\u3002\n2. \u5224\u65ad\u662f\u5426\u5408\u6cd5\u5e76\u66f4\u65b0\u7b54\u6848\u3002\n3. \u5c06\u8fd9\u4e2a\u70b9\u6316\u6389\u3002\n\n\u7136\u540e\u9010\u4e00\u5b9e\u73b0\u3002\n\n### \u5982\u4f55\u7b97\u7ec8\u70b9\uff1f\n\u4e4b\u524d\u4e0d\u662f\u641e\u4e86\u4e00\u5806 ```vector``` \u5417\uff1f\u6700\u5f00\u59cb\u626b\u4e00\u904d\uff0c\u627e\u5230\u7b2c $i$ \u4e2a\u5173\u952e\u6570\u5b57\u7b2c $l_i$ \u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u53d6\u4e00\u4e2a $\\max$\uff0c\u5f97\u5230\u7684\u7ed3\u679c $mx$ \u5373\u4e3a\u7ec8\u70b9\u3002\n\n\u8bbe\u7f6e\u6307\u9488 $cur$\uff0c\u521d\u59cb\u503c\u5747\u4e3a $0$\uff0c$cur_i$ \u8868\u793a\u7b2c $i$ \u4e2a\u5173\u952e\u6570\u5b57\u76ee\u524d\u4ece\u7b2c $cur_i$ \u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e\u5f00\u59cb\u53d6\u3002 \n\n\u81f3\u4e8e\u5982\u4f55\u66f4\u65b0\uff0c\u4e0b\u9762\u518d\u8bf4\u3002\n\n### \u5982\u4f55\u5224\u65ad\u662f\u5426\u5408\u6cd5\uff1f\n\u8fd9\u4e2a\u7b80\u5355\uff0c\u7531\u4e8e\u53d6\u4e86 $\\max$\uff0c\u53ef\u4ee5\u786e\u4fdd\u6bcf\u4e2a\u5173\u952e\u6570\u5b57\u90fd**\u6309\u7167\u8981\u6c42\u88ab\u5305\u542b\u4e86**\uff0c\u63a5\u4e0b\u6765\u53ea\u8981\u770b\u6709\u6ca1\u6709\u6df7\u8fdb\u522b\u7684\u6570\u5b57\u3002\n\n\u8ba1\u7b97\u7ec8\u70b9\u548c\u8d77\u70b9\u4e4b\u95f4\u7684\u6570\u5b57\u6570\u91cf $len$\uff0c\u5982\u679c $len=\\sum l_i$ \u5c31\u662f\u5408\u6cd5\u7684\u3002\n\n### \u5982\u4f55\u628a\u8fd9\u4e2a\u70b9\u6316\u6389\uff1f\n\u9996\u5148\uff0c\u5224\u65ad\u8fd9\u4e2a\u70b9\u662f\u4e0d\u662f\u5173\u952e\u6570\u5b57\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5c31\u4e0d\u7528\u7ba1\u3002\n\n\u5426\u5219\uff0c\u66f4\u65b0 $cur$\uff0c\u5c06\u5176\u81ea\u589e $1$\u3002\n\n\u7136\u540e\u66f4\u65b0\u7ec8\u70b9\uff0c$mx\\leftarrow \\max\\{mx,\\text{\u8be5\u6570\u5b57\u7b2c cur+l \u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e}\\}$\u3002\n\n> \u6b64\u5904\u7684 $l$ \u5373\u4e3a\u5f53\u524d\u6570\u5b57**\u9700\u8981**\u51fa\u73b0\u7684\u6570\u91cf\u3002\n\n\u5b9e\u73b0\u65f6\u8fd8\u6709\u4e00\u4e9b\u7ec6\u8282\uff0c\u6bd4\u5982\u5173\u952e\u6570\u5b57\u4e0d\u591f\u7528\u4e86\u5c31\u53ef\u4ee5\u76f4\u63a5\u8f93\u51fa\u7b54\u6848\u5e76\u7ec8\u6b62\u7a0b\u5e8f\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\n#define il inline\n#define mkp make_pair\n#define pii pair<int,int>\n#define lll __int128\n#define ll long long\n#define For(i,j,k) for(int i=(j); i<=(k); ++i)\n#define ForDown(i,j,k) for(int i=(j); i>=(k); --i)\n#define pb push_back\n#define init(filename) freopen(filename \".in\" ,\"r\",stdin);freopen(filename \".out\" ,\"w\",stdout)\ntemplate<typename T> \nil void read(T &x){ x=0;int f=1;char c=getchar();while(!isdigit(c)){if(c=='-')f=-1;c=getchar();}while(isdigit(c)){x=x*10+c-'0';c=getchar();}x*=f;}\ntemplate<typename T, typename ... Args>\nil void read(T &x, Args &... y){ read(x);read(y...); }\n\n#define int ll\nint n,m;\nconst int MAXN=1e6+5;\nint c[MAXN],l[MAXN],a[MAXN],id[MAXN],cur[MAXN]; // id \u7528\u4e8e\u8f6c\u6362\u5173\u952e\u6570\u5b57\u7684\u503c\u4e0e\u7f16\u53f7\u3002\nvector<int> ptr[MAXN]; // \u51fa\u73b0\u4f4d\u7f6e\n\nsigned main()\n{\n\tread(n,m);\n\tFor(i,1,m) read(l[i]);\n\tFor(i,1,m) read(c[i]);\n\tFor(i,1,n) read(a[i]);\n\n\tmemset(cur,-1,sizeof(cur));\n\tFor(i,1,n)\n\t{\n\t\tptr[a[i]].pb(i);\n\t}\n\tll ans=0,mx=0,sum=0;\n\tFor(i,1,m)\n\t{\n\t\tcur[c[i]]=0,id[c[i]]=i;\n\t\tif(ptr[c[i]].size()<l[i]) return !printf(\"0\");\n\t\tmx=max(mx,0ll+ptr[c[i]][l[i]-1]),sum+=l[i];\n\t}\n\tFor(i,1,n)\n\t{\n\t\tif(mx-i+1==sum) ++ans; // mx-i+1 \u5c31\u662f len\n\t\tif(~cur[a[i]])\n\t\t{\n\t\t\tcur[a[i]]++;\n\t\t\tif(ptr[a[i]].size()<cur[a[i]]+l[id[a[i]]]) break;\n\t\t\tmx=max(mx,0ll+ptr[a[i]][cur[a[i]]+l[id[a[i]]]-1]);\n\t\t}\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1664532977,
        "uid": 356003,
        "name": "Xiaohuba",
        "ccfLevel": 7,
        "title": "P3560\u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n\n\u5bf9\u4e8e\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217\uff0c\u6c42\u6709\u591a\u5c11\u4e2a\u5b50\u4e32\uff08\u6ce8\u610f\u5b50\u4e32\u7684\u5143\u7d20\u662f\u8fde\u7eed\u7684\uff09\uff0c\u6ee1\u8db3\u7ed9\u51fa $m$ \u4e2a\u6570\u5b57\uff0c\u4f7f\u6bcf\u4e2a\u7ed9\u51fa\u7684\u6570\u5b57 $c_{i}$ \u5728\u5b50\u4e32\u4e2d\u51fa\u73b0\u4e86 $l_{i}$ \u6b21\uff0c\u4e14\u4e0d\u542b\u7ed9\u51fa\u6570\u5b57\u4e4b\u5916\u7684\u5176\u4ed6\u6570\u5b57\u3002\n\n\u6570\u636e\u8303\u56f4\uff1a$1 \\le m \\le n \\le 1e6$\u3002\n\n## \u89e3\u9898\u601d\u8def\n\u5bf9\u4e8e\u7ed9\u51fa\u7684\u6570\u5b57\uff0c\u56e0\u4e3a\u9898\u76ee\u8981\u6c42\u7684\u5b50\u4e32\u4e2d\u4e0d\u542b\u5176\u4ed6\u6570\u5b57\uff0c\u6240\u4ee5\u53ef\u4ee5\u60f3\u5230\u5b50\u4e32\u957f\u5ea6 $\\sum l_{i}$ \u662f\u4e00\u5b9a\u7684\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u50cf\u4e00\u4e2a\u6ed1\u52a8\u7a97\u53e3\u4e00\u6837\u5212\u8fc7\u53bb\u3002\u91cd\u70b9\u662f\u600e\u6837\u5904\u7406\u5728\u6ed1\u52a8\u65f6\u6570\u5b57\u4e2a\u6570\u7684\u53d8\u5316\u91cf\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u5411\u53f3\u6ed1\u52a8\u65f6\u53f3\u7aef\u70b9\u52a0\u5165\u5b50\u4e32\uff0c\u5de6\u7aef\u70b9\u79bb\u5f00\u5b50\u4e32\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u6620\u5c04\u6765\u7edf\u8ba1\u6570\u5b57\u51fa\u73b0\u7684\u6b21\u6570\u3002\u79bb\u5f00\u65f6\u6570\u5b57\u7684\u503c\u51cf\u4e00\uff0c\u52a0\u5165\u65f6\u52a0\u4e00\uff0c\u770b\u6700\u540e\u7b26\u5408\u8981\u6c42\u7684\u6570\u5b57\u662f\u5426\u5230\u8fbe $m$ \u4e2a\uff0c\u5982\u679c\u662f\uff0c\u65b9\u6848\u6570\u52a0\u4e00\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$O(n)$\u3002\n\n##\tcode\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nstruct node\n{\n\tint limit;\n\tint x;\n\tint f;\n};\nmap<int,node> mp;\nint a[1000005];\nint n,m;\nint len;\nint c[1000005];\nint l[1000005];\nint i,j;\nint cnt,ans;\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<=m;i++)\n\t\tscanf(\"%d\",&l[i]);\n\tfor(i=1;i<=m;i++)\n\t\tscanf(\"%d\",&c[i]),\n\t\tmp[c[i]].limit=l[i],\n\t\tmp[c[i]].f=1,\n\t\tlen+=l[i];\n\tfor(i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tfor(i=1;i<len;i++)\n\t{\n\t\tmp[a[i]].x++;\n\t\tif(!mp[a[i]].f)\n\t\t\tcontinue;\n\t\tif(mp[a[i]].x==mp[a[i]].limit)\n\t\t\tcnt++;\n\t\telse if(mp[a[i]].x==mp[a[i]].limit+1)\n\t\t\tcnt--;\n\t}\n\tfor(i=1;i<=n-len+1;i++)\n\t{\n\t\tj=i+len-1;\n\t\tmp[a[j]].x++;\n\t\tif(mp[a[j]].f)\n\t\t{\n\t\t\tif(mp[a[j]].x==mp[a[j]].limit)\n\t\t\t\tcnt++;\n\t\t\telse if(mp[a[j]].x==mp[a[j]].limit+1)\n\t\t\t\tcnt--;\n\t\t}\n\t\tmp[a[i-1]].x--;\n\t\tif(mp[a[i-1]].f)\n\t\t{\n\t\t\tif(mp[a[i-1]].x==mp[a[i-1]].limit)\n\t\t\t\tcnt++;\n\t\t\telse if(mp[a[i-1]].x==mp[a[i-1]].limit-1)\n\t\t\t\tcnt--;\n\t\t}\n\t\tif(cnt==m)\n\t\t\tans++; \n\t}\n\tprintf(\"%d\",ans);\n}\n```\n",
        "postTime": 1657438746,
        "uid": 184615,
        "name": "tongzhenxuan",
        "ccfLevel": 6,
        "title": "P3560 [POI2013]LAN-Colorful Chain \u9898\u89e3"
    },
    {
        "content": "\u6700\u4e0a\u9762\u8fd9\u4e2a\u9898\u610f\u662f\u6211\u8bfb\u9519\u4e86\uff0c\u4e0d\u8fc7\u4f60\u4e5f\u53ef\u4ee5\u505a\u505a\u770b\u3002\n\n\u6b63\u786e\u7684\u9898\u610f\u7684\u505a\u6cd5\u5728\u5e95\u4e0b\u3002\n\n# [POI2013]LAN-Colorful Chain\n\n## \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a$1e6$\u7684\u5e8f\u5217\uff0c\u7ed9\u5b9a$1e6$\u7684\u8be2\u95ee\uff0c\u6bcf\u4e2a\u8be2\u95ee\u5305\u542b$s_i,l_i$\n\n\u95ee\u4f60$l_i$\u957f\u5ea6\u7684$s_i$\u8fd9\u4e2a\u4e32\u51fa\u73b0\u4e86\u51e0\u6b21\u3002\n\n~~sb\u6d1b\u8c37\u667a\u969c\u7ffb\u8bd1\u3002\u8981\u4e0d\u662f\u505a\u6c34\u9898\u5c31\u7528LOJ\u548cBZOJ~~\n\n## \u9898\u89e3\n\n\u672c\u6765\u60f3\u7528\u9ad8\u7ea7\u4e00\u70b9\u7684SA\u968f\u4fbf\u505a\u3002\n\n\u53ea\u9700\u8981\u540e\u7f00\u6392\u5e8f\u540e\u4e8c\u5206\u5373\u53ef\u3002\n\n\u7ed3\u679c\u53d1\u73b0$\\sum l_i$\u662f\u6ca1\u6709\u9650\u5236\u7684\u3002\u8fd9\u6837\u5c31\u4e0d\u80fd\u5bf9\u90a3\u4e9b\u8be2\u95ee\u4e32\u76f4\u63a5\u5efaSA\u4e86\u3002\n\n\u7136\u800c\u7531\u4e8e\u90fd\u662f\u4e00\u6837\u7684\u5b57\u7b26\u3002\n\n\u6240\u4ee5\u6211\u4eec\u9884\u5904\u7406\u6bcf\u4e2a\u540e\u7f00\u6700\u957f\u76f8\u540c\u5b57\u7b26\u524d\u7f00\u957f\u5ea6$h_i$\uff0c\u6307\u9488\u6a21\u62df\u5373\u53ef\uff0c\u7531\u4e8e\u6709\u5355\u8c03\u53f3\u79fb\uff0c\u8fd9\u4e2a\u590d\u6742\u5ea6\u662f$O(n)$\u7684\u3002\n\n```cpp\n\t inline void pre()\n\t {\n\t\t int r = 1;\n\t\t for(int i = 1 ; i <= n ; ++i)\n\t\t {\n\t\t\t r = std::max(r , i);\n\t\t\t if(i != r) {\n\t\t\t\t h[i] = r - l + 1;\n\t\t\t\t continue;\n\t\t\t }\n\t\t\t while(r < n) if(s[r + 1] == s[i]) ++ r;\n\t\t }\n\t }\n```\n\n\n\n\u81f3\u4e8e\u540e\u7f00\u9996\u5b57\u6bcd\u662f\u4ec0\u4e48\uff0c$O(1)$\u5f97\u5230\u5373\u53ef\u3002\u3002\n\n\u7136\u540e\u540e\u7f00\u6392\u5e8f\u3002\u7136\u540e\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4$h_{sa_i}$\n\n\u7136\u540e\u5bf9\u4e8e\u4e00\u4e2a\u8be2\u95ee$(s_i,l_i)$\uff0c\u6211\u4eec\u4e8c\u5206\u51fa\u5408\u6cd5\u7684\u540e\u7f00\u533a\u95f4\u3002\uff08\u4e00\u4e2a\u663e\u7136\u7684\u5e73\u51e1\u6027\u8d28\uff0c\u540e\u7f00\u6392\u5e8f\u540e\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u4e32\u4f5c\u4e3a\u6a21\u5f0f\u4e32\u5339\u914d\u7684\u540e\u7f00\u96c6\u5408\u6392\u5e8f\u540e\u662f\u8fde\u7eed\u7684\uff0c\u53cd\u8bc1\u6cd5\u5373\u53ef\u8bc1\u660e\uff09\u3002\n\n\u8bb0\uff1a$c_i^{l_i}$\u8868\u793a\u4e00\u4e2a\u957f\u5ea6\u4e3a$l_i$\u7684\u5b57\u7b26\u4e3a$c_i$\u4e32\u3002\n\n>\u8bc1\u660e\uff1a\u8bbe\u8be2\u95ee\u662f$(c_i,l_i)$,\u5047\u8bbe\u6392\u5e8f\u540e\u4e0d\u662f\u8fde\u7eed\u7684\uff0c\u5373$\\exists s_k , LCP(c_i^{l_i},s_k) < L \\and (LCP(s_{k-1},c_i^{l_i}) >= L \\or LCP(s_{k+1},c_i^{l_i}) >= L) $\n>\n>\u6b64\u65f6\u7b2c$L$\u4e2a\u5b57\u7b26\u4e0e\u5b57\u5178\u5e8f\u6392\u5e8f\u77db\u76fe\uff0c\u56e0\u6b64\u539f\u547d\u9898\u6210\u7acb\u3002\n>\n>\u5f53\u7136\u8fd9\u4e2a\u4e00\u53e5\u8bdd\u8bc1\u660e\u6709\u70b9\u4e0d\u662f\u592a\u4e25\u8c28\u3002\n>\n>\u4ece\u5b57\u5178\u5e8f\u7684\u5b9a\u4e49\u51fa\u53d1\uff0c\u9996\u5148\u7b2c\u4e00\u4e2a\u5b57\u7b26\u662f$s_i$\uff0c\u5f00\u5934\u6bd4$s_i$\u5c0f\u7684\u90fd\u5728\u524d\u9762\uff0c\u5927\u7684\u90fd\u5728$s_i$\u540e\u9762\u3002\n>\n>\u6240\u4ee5\u5f00\u5934\u662f$s_i$\u7684\u6784\u6210\u4e00\u4e2a\u8fde\u7eed\u533a\u95f4$[l,r]$\u3002\n>\n>\u5c06$[l,r]$\u6309\u7167$[1,n]$\u7684\u65b9\u6cd5\u5f52\u7eb3\u8bc1\u660e\uff0c\u5f97\u5230\u7ed3\u8bba\uff1a\n>\n>\u5bf9\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u7684\u76f8\u540c\u524d\u7f00$S$\uff0c\u5176\u5339\u914d\u540e\u7f00\u5fc5\u4e3a\u8fde\u7eed\u533a\u95f4\u3002\n\n\u7136\u540e\u7ebf\u6bb5\u6811\u67e5\u8be2\u533a\u95f4\u548c\u5c31\u5b8c\u6210\u4e86\u4e00\u6b21\u8be2\u95ee\u3002\u3002\u3002\u3002\u3002\n\n\u6240\u4ee5SA\u4e0a\u4e8c\u5206\u4e00\u4e2a\u533a\u95f4\uff0c\u518d\u7ebf\u6bb5\u6811\u67e5\u8be2\u4e00\u4e2a\u533a\u95f4\u548c\u3002\n\n\u4ed4\u7ec6\u60f3\u60f3\u771f\u7684\u9700\u8981\u7ebf\u6bb5\u6811\u5417\uff1f\u9759\u6001\u67e5\u8be2\u4e00\u4e2a\u533a\u95f4\u548c\u5e94\u8be5\u7528\u5565\uff1f\n\n\u6570\u7ec4\uff01\n\n$sum_i = \\sum\\limits_{j=1}^{i}h_{sa_j}$\n\n\u590d\u6742\u5ea6\u662f$O(nlogn+mlogn+m)$\n\n\u4e8c\u5206\u51fa\u533a\u95f4\u8fd9\u4e2a\u4e1c\u897f\u633a\u9ebb\u70e6\u3002\n\n\n----\n\u4e00\u770b\u8f93\u51fa\u53ea\u6709\u4e00\u4e2a\u6570\uff0c\u7136\u540e\u770b\u4e86\u904d\u9898\u3002\n\n\u539f\u6765\u662f\u6070\u597d$m$\u4e2a$(s_i,l_i)$\u7684\u5b57\u4e32\u6709\u591a\u5c11\u4e2a\u3002\n\n\u8fd9\u4e0d\u662fsb\u9898\u5417\uff1f\uff1f\u76f4\u63a5\u53cc\u6307\u9488\u5f00\u59cb\u626b\uff0c**\u5373\u65f6\u5224\u65ad\u5f53\u524d\u5b57\u7b26\u52a0\u5165**\uff0c\u5982\u679c\u8d85\u4e86\u4e00\u76f4\u79fb\u52a8\u5de6\u6307\u9488\uff0c\u5426\u5219\u79fb\u52a8\u53f3\u6307\u9488\u5e76\u66f4\u65b0\u6570\u7ec4\uff0c\u4e3a\u4e86\u907f\u514d\u5927\u91cf\u66b4\u529b\u91cd\u590d\u626b\u63cf\uff0c\u7528\u53d8\u91cf\u8bb0\u5f55\u6709\u591a\u5c11\u4e2a\u6ee1\u8db3\u4e86\uff0c$m$\u4e2a\u6ee1\u8db3\u65f6$Ans += 1$\u3002\u7b54\u6848\u6700\u5927\u662fn\u3002\n\n\u8bf4\u7684\u66f4\u6e05\u6670\u4e00\u70b9\u3002\n\n\u6309\u7167\u53f3\u7aef\u70b9\u5206\u7c7b\uff0c\u6bcf\u4e2a\u53f3\u7aef\u70b9\u6700\u591a\u6709\u4e00\u4e2a\u7b26\u5408\u7b54\u6848\u3002\n\n\u9700\u8981\u6ce8\u610f\u5230\u7684\u662f\uff0c\u7531\u4e8e\u6bcf\u4e2a\u5b57\u7b26\u90fd\u662f\u7ed9\u5b9a\u6570\u76ee\u7684\uff0c\u56e0\u6b64\u5f53\u4e00\u4e2a\u53f3\u7aef\u70b9\u4e0e\u5de6\u7aef\u70b9\u5f62\u6210\u7684\u5b57\u4e32\u67d0\u4e2a\u5b57\u7b26\u8d85\u8fc7\u6570\u76ee\u7684\u65f6\u5019\uff0c\u5de6\u7aef\u70b9\u5411\u53f3\u79fb\u52a8\u76f4\u5230\u6ee1\u8db3\u6761\u4ef6\u4f4d\u7f6e\u8fd9\u4e2a\u8d2a\u5fc3\u505a\u6cd5\u662f\u6b63\u786e\u7684\uff1a\n\n>\u5bf9\u4e8e\u65b0\u7684\u53f3\u7aef\u70b9$r$\uff0c\u5982\u679c\u5de6\u7aef\u70b9\u4fdd\u6301\u4e0d\u52a8\uff0c\u5219\u6bcf\u4e2a\u5b57\u7b26\u6570\u76ee\u53ea\u4f1a\u589e\u52a0\u4e0d\u4f1a\u4e0b\u964d\uff0c\u6240\u4ee5\u591a\u7684\u5b57\u7b26\u8fd8\u662f\u4e0d\u7b26\u5408\u7b54\u6848\uff0c\u5047\u5982\u90fd\u6ca1\u6709\u5927\u4e8e\uff0c\u5219\u9700\u8981\u66f4\u591a\u5b57\u7b26\uff0c\u6b64\u65f6\u79fb\u52a8\u5de6\u7aef\u70b9\u6ca1\u6709\u610f\u4e49\u3002\u56e0\u6b64\u5de6\u7aef\u70b9\u6709\u5355\u8c03\u6027\u3002\n\n~~\u771f\u7684\u61d2\u5f97\u7ed9\u666e\u53ca\u9898\u5199\u4e00\u4e2a\u5f62\u800c\u4e0a\u7684\u7b26\u53f7\u7cfb\u7edf\u8bc1\u660e\u4e86~~\n\n\u7136\u540e\u5c31\u662f\u6307\u9488\u6a21\u62df\u7684\u4e00\u5806\u7ec6\u8282\u3002\u3002\u3002\n\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <algorithm>\n#include <iostream>\n#define maxn 1000005\nint cnt[maxn] , cur , ans , ln[maxn] , n , m , c[maxn] , l[maxn], s[maxn];\n\nvoid print()\n{\n\tfor(int i = 1 ; i <= n ; ++i)\n\t\tprintf(\"%d \",cnt[i]);\n\tputchar(10);\n}\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i = 1 ; i <= m ; ++i)\n\t\tscanf(\"%d\",&l[i]);\n\tfor(int i = 1 ; i <= m ; ++i)\n\t\tscanf(\"%d\",&c[i]);\n\tfor(int i = 1 ; i <= n ; ++i)\n\t\tscanf(\"%d\",&s[i]);\n\tfor(int i = 1 ; i <= m ; ++i)\n\t\tln[c[i]] = std::max(ln[c[i]] , l[i]);\n//\tfor(int i = 1 ; i <= n ; ++i)\n//\t\tprintf(\"%d \",ln[i]);\n//\tputchar(10);\n\n\tint l = 1 , r = 0; // [l,r]\n\twhile(r < n)\n\t{\n\t\t++r;\n\t\t++cnt[s[r]];\n\t\tif(cnt[s[r]] == ln[s[r]]) ++cur;\n\t\telse if(cnt[s[r]] == ln[s[r]] + 1) --cur;\n\t\tif(cur == m) ++ ans;\n//\t\tprint();\n\t\tif(cnt[s[r]] > ln[s[r]])\n\t\t{\n\t\t\twhile(cnt[s[r]] > ln[s[r]])\n\t\t\t{\n\t\t\t\t--cnt[s[l]];\n\t\t\t\tif(cnt[s[l]] == ln[s[l]]) ++cur;\n\t\t\t\telse if(cnt[s[l]] == ln[s[l]] - 1) --cur;\n\t\t\t\t++l;\n//\t\t\t\tprint();\n\t\t\t\tif(cur == m) ++ans;\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\",ans);\n}\n```\n",
        "postTime": 1556449461,
        "uid": 100712,
        "name": "Starrydream",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3560 \u3010[POI2013]LAN-Colorful Chain\u3011"
    },
    {
        "content": "\u663e\u7136\u8fd9\u4e2a\u9898\u5c31\u662f\u8ba9\u6c42\u4e00\u4e9b\u957f\u5ea6\u4e3a$\u2211li$\u7684\u5b50\u4e32\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u6ed1\u52a8\u7a97\u53e3\u53bb\u505a\uff0c\u5173\u952e\u5c31\u662f\u5982\u4f55\u5feb\u901f\u786e\u5b9a\u4e00\u4e2a\u5b50\u4e32\u662f\u6ee1\u8db3\u8981\u6c42\u7684\u3002\n\n\u4e8e\u662f\u6211\u5c31\u60f3\uff0c\u5982\u679c\u4e00\u4e2a\u5b50\u4e32\u662f\u6ee1\u8db3\u8981\u6c42\u7684\uff0c\u90a3\u4e48\u5b83\u91cc\u8fb9\u6240\u6709\u6570\u7684\u51fa\u73b0\u6b21\u6570\u90fd\u662f\u4e25\u683c\u786e\u5b9a\u7684\uff08\u672a\u4f5c\u89c4\u5b9a\u7684\u6570\u5c31\u662f0\u4e2a\uff09\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u8bb0\u5f55\u6570\u5b57\u51fa\u73b0\u6b21\u6570\u7684\u6570\u7ec4cnt\u662f\u552f\u4e00\u786e\u5b9a\u7684\uff0c\u4e8e\u662f\u6211\u5c31\u60f3\u5230\u4e86\u54c8\u5e0c\uff0c\u628a\u8fd9\u4e2a\u6570\u7ec4\u770b\u505a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u628a\u5b83\u7528\u54c8\u5e0c\u641e\u51fa\u6765\u5373\u53ef\u5feb\u901f\u5224\u65ad\u3002\u6211\u5728\u7ef4\u62a4\u54c8\u5e0c\u503c\u7684\u65f6\u5019\uff0c\u56e0\u4e3a\u6211\u4eec\u662f\u6ed1\u52a8\u7a97\u53e3\uff0c\u6bcf\u6b21\u79fb\u52a8\u7684\u65f6\u5019\u80af\u5b9a\u4f1a\u6709\u4e2a\u6570\u79bb\u5f00\uff0c\u6709\u4e2a\u6570\u8fdb\u6765\uff0c\u8fd9\u79cd\u6539\u53d8\u4f1a\u5f71\u54cdcnt\u6570\u7ec4\uff0c\u6211\u76f4\u63a5\u5728\u5bf9\u5e94\u4f4d\uff08\u54c8\u5e0c\u53ef\u4ee5\u770b\u505a\u4e00\u4e2a\u4f4d\u6570\u5f88\u957f\u7684k\u8fdb\u5236\u6570\uff09\u4e0a\u8fdb\u884c\u4fee\u6539\uff1a\n\n```cpp\nhsh=(((hsh-cnt[ints[i]]*kx[ints[i]])%p)+p)%p;\ncnt[ints[i]]++;\nhsh=(hsh+cnt[ints[i]]*kx[ints[i]])%p;\n```\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u5982\u6211\u4eec\u73b0\u5728\u7ef4\u62a4\u7684\u662f10\u8fdb\u5236\u6570\uff0c\u73b0\u5728\u662f123456789\uff0c\u6211\u4eec\u60f3\u628a6\u6539\u4e3a1\uff0c\u90a3\u5c31\u5148\u51cf\u53bb$6\u00d710^3$\uff0c\u53d8\u6210123450789\uff0c\u518d\u76f4\u63a5\u52a0\u4e0a1$\u00d710^3$\uff0c\u53d8\u6210123451789\uff0c\u5927\u6982\u5c31\u662f\u8fd9\u4e2a\u9053\u7406\uff0c\u8fd9\u6837\u5c31\u80fd\u5feb\u901f\u4fee\u6539\u54c8\u5e0c\u503c\u4e86\u3002\n\n\u8fd8\u6709\uff0c\u4e3a\u4e86\u4fdd\u9669\u8d77\u89c1\uff0c\u5e94\u8be5\u628a\u54c8\u5e0c\u7684\u4f4d\u6570\u8bbe\u4e3a\u5e8f\u5217\u7684\u6700\u5927\u6570\uff0c\u628a\u54c8\u5e0c\u7684\u8fdb\u5236\u8bbe\u4e3a\u6700\u591a\u7684\u51fa\u73b0\u6b21\u6570\uff08\u5373cnt\u6570\u7ec4\u7684\u6700\u5927\u53ef\u80fd\u503c\uff09\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#define int long long\n#define p 100000000003\nusing namespace std;\nint ints[1000001];\nint cnt[1000001];\nint kx[1000001];\nint fcnt[1000001];\nchar buf[100000000];int pptr=-1;\ninline char get_char(){\n\tpptr++;return(buf[pptr]);\n}\n#define getchar get_char\ninline int get(){\n\tint n;char c;while((c=getchar())||1)if(c>='0'&&c<='9')break;\n\tn=c-'0';while((c=getchar())||1){\n\t\tif(c>='0'&&c<='9')n=n*10+c-'0';\n\t\telse return(n);\n\t}\n}\nint tmp[1000001];\nsigned main(){\n\tfread(buf,1,100000000,stdin);\n\t\n\tint n=get(),m=get();int kp=0;int ln=0;int sid=0;\n    //kp\u4e3a\u8fdb\u5236\uff0cln\u4e3a\u54c8\u5e0c\u957f\u5ea6\uff0csid\u4e3a\u5b50\u4e32\u957f\u5ea6\n\tfor(register int i=1;i<=m;i++)tmp[i]=get(),kp=max(kp,tmp[i]),sid+=tmp[i];\n\tfor(register int i=1;i<=m;i++){\n\t\tint a=get();ln=max(ln,a);fcnt[a]=tmp[i];\n\t}\n\tfor(register int i=1;i<=n;i++){\n\t\tln=max(ln,ints[i]=get());cnt[ints[i]]++;kp=max(kp,cnt[ints[i]]);\n\t}memset(cnt,0,sizeof(cnt));\n\t//printf(\"%d %d\\n\",ln,kp);\n\tkx[0]=1;int realhsh=0;\n\tfor(register int i=1;i<=ln;i++){\n\t\tkx[i]=(kx[i-1]*kp)%p;\n\t\trealhsh=(realhsh+kx[i]*fcnt[i])%p;\n\t}//\u5148\u628a\u7b54\u6848\u5b50\u4e32\u7684\u54c8\u5e0c\u503c\u6c42\u51fa\u6765\n\tint hsh=0;int ans=0;\n\tfor(register int i=1;i<sid;i++){\n\t\thsh=(((hsh-cnt[ints[i]]*kx[ints[i]])%p)+p)%p;\n\t\tcnt[ints[i]]++;\n\t\thsh=(hsh+cnt[ints[i]]*kx[ints[i]])%p;\n\t}\u54c8\u54c8\u54c8\u60a8\u522b\u60f3\u6284\u4ee3\u7801\n\tfor(register int i=sid;i<=n;i++){\n\t\thsh=(((hsh-cnt[ints[i]]*kx[ints[i]])%p)+p)%p;\n\t\tcnt[ints[i]]++;\n\t\thsh=(hsh+cnt[ints[i]]*kx[ints[i]])%p;\n        //\u8fdb\u6765\u4e00\u4e2a\u6570\n\t\tif(i!=sid){\n\t\t\thsh=(((hsh-cnt[ints[i-sid]]*kx[ints[i-sid]])%p)+p)%p;\n\t\t\tcnt[ints[i-sid]]--;\n\t\t\thsh=(hsh+cnt[ints[i-sid]]*kx[ints[i-sid]])%p;\n\t\t}//\u51fa\u53bb\u4e00\u4e2a\u6570\n\t\tif(hsh==realhsh)ans++;//\u627e\u5230\u5339\u914d\u6210\u529f\u7684\u5b50\u4e32\u54c8\u54c8\u54c8\n\t}\n\tcout<<ans<<endl;\n\treturn(0);\n}\n```",
        "postTime": 1527510298,
        "uid": 56917,
        "name": "\u989c\u4f1f\u4e1a_C_Asm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3560 \u3010[POI2013]LAN-Colorful Chain\u3011"
    }
]
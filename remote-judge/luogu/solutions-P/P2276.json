[
    {
        "content": "\u9996\u5148\u53ef\u4ee5\u89c2\u5bdf\u51fa\u4e00\u9897 $n$ \u4e2a\u8282\u70b9\u7684\u4e8c\u53c9\u6811\uff0c\u5f53\u5176\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u65f6\u5019\uff0c\u5176\u5f62\u6001\u4e3a\u4e00\u6761\u5411\u53f3\u504f\u7684\u94fe\uff0c\u5f53\u5176\u5b57\u5178\u5e8f\u6700\u5927\u7684\u65f6\u5019\uff0c\u662f\u4e00\u6761\u5411\u5de6\u504f\u7684\u94fe\u3002\n\n\u7531\u4e8e\u6bcf\u4e00\u79cd\u7f16\u7801\u5bf9\u5e94\u552f\u4e00\u7684\u4e00\u9897\u4e8c\u53c9\u6811\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u5efa\u6811\u3002\n\n\u7136\u540e\u8003\u8651\u6811\u4e0a\u5206\u6cbb\uff0c\u5c1d\u8bd5\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\uff1a\n\n1. \u53d8\u5927\u53f3\u5b50\u6811\u7684\u5b57\u5178\u5e8f\n\n2. \u53d8\u5927\u5de6\u5b50\u6811\u7684\u5b57\u5178\u5e8f\uff0c\u5e76\u5c06\u53f3\u5b50\u6811\u53d8\u6210\u4e00\u6761\u94fe\n\n3. \u5c06\u5de6\u5b50\u6811\u7684\u5927\u5c0f $+1$ \uff0c\u53f3\u5b50\u6811\u7684\u5927\u5c0f $-1$ \uff0c\u7136\u540e\u90fd\u8f6c\u5316\u6210\u4e00\u6761\u5411\u53f3\u504f\u7684\u94fe\n\n\u9012\u5f52\u8fb9\u754c\u4e3a $sz[u]==2$\n\n**\u6ce8\u610f**\uff1a\u5f53 $n$ \u4e2a\u8282\u70b9\u65e0\u89e3\u65f6\uff0c\u8f93\u51fa $n+1$ \u4e2a\u8282\u70b9\u7684\u6811\u7684\u6700\u5c0f\u5b57\u5178\u5e8f\uff0c\u5373\u4e00\u6761\u53f3\u504f\u94fe\n\n\u987a\u4fbf\u8bf7\u6c42\u52a0\u5f3a\u4e00\u4e0b\u6570\u636e\n\n### Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 5000 + 5;\nint a[N], ls[N], rs[N], sz[N], n = 0, tot = 0, w = 1;\nvector<int> v[N]; //v[u]\u8868\u793au\u8fd9\u68f5\u5b50\u6811\u7684\u5b57\u5178\u5e8f\nvoid dfsp(int siz) { //\u5efa\u6811\n\tsz[++n] = siz;\n\tif (siz == 1) return;\n\tint lz = a[w + 1], rz = siz - a[w + 1] - 1, u = n;\n\tif (lz >= 1) {ls[u] = n + 1; if (lz > 1) ++w; dfsp(lz);}\n\tif (rz >= 1) {rs[u] = n + 1; if (rz > 1) ++w; dfsp(rz);}\n}\nbool dfs(int u) { //\u4fee\u6539\n\tif (sz[u] == 2) {\n\t\tif (rs[u] == 0) return false; //\u53ea\u6709\u5de6\u513f\u5b50\uff0c\u6ca1\u6cd5\u53d8\u5927\n\t\tv[u].push_back(1);\n\t\treturn true;\n\t}\n\tint lz = sz[ls[u]], rz = sz[rs[u]], num = 0;\n\tif (rz >= 2 && dfs(rs[u])) return true; //\u5de6\n\tif (lz >= 2 && dfs(ls[u])) { //\u53f3\n\t\tfor (int i = 1; i < sz[rs[u]]; ++i) v[rs[u]].push_back(0);\n\t\treturn true;\n\t} if (rz) { //\u5de6\u5b50\u6811+1\uff0c\u53f3\u5b50\u6811-1\n\t\tv[u].push_back(lz + 1);\n\t\tif (rz == 1) num = sz[u] - 2; //\u6ce8\u610f\u7279\u5224\u4e00\u4e0b\u53f3\u5b50\u6811\u5927\u5c0f\u4e3a1\u7684\u60c5\u51b5\n\t\telse num = sz[u] - 3;\n\t\tfor (int i = 1; i <= num; ++i) v[u].push_back(0);\n\t\treturn true;\n\t}\n\treturn false;\n}\nvoid print(int u) {\n\tif (!u || sz[u] == 1) return;\n\tif (v[u].size()) {\n\t\tfor (int i = 0; i < v[u].size(); ++i) cout << v[u][i] << \" \";\n\t\treturn;\n\t}\n\tcout << sz[ls[u]] << \" \";\n\tprint(ls[u]); print(rs[u]);\n}\nint main() {\n\tios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n\twhile (cin >> a[++tot]){}\n\t--tot; dfsp(a[1]);\n\tif (dfs(1)) {cout << n << \" \"; print(1);}\n\telse { //n\u4e2a\u8282\u70b9\u65e0\u6cd5\u6ee1\u8db3\u8981\u6c42\uff0c\u8f93\u51fan+1\u4e2a\u8282\u70b9\u7684\u6700\u5c0f\u5b57\u5178\u5e8f\n\t\tcout << n + 1 << \" \";\n\t\tfor (int i = 1; i <= n; ++i) cout << 0 << \" \";\n\t\tcout << endl;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1661689033,
        "uid": 173864,
        "name": "EstasTonne",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2276 [HNOI2002]\u519c\u573a\u7684\u679c\u6811"
    }
]
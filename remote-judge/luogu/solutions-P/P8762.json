[
    {
        "content": "\u600e\u4e48\u5176\u4ed6\u9898\u89e3\u8fd9\u4e48\u4e0d\u4eba\u6027\u5316\uff0c\u8fd9\u9053\u9898\u53ef\u4ee5\u4e0d\u9700\u8981\u524d\u7f00\u548c\uff0c\u5229\u7528\u6570\u5b66\u601d\u60f3\u5c31\u80fd\u8f7b\u677e\u8fc7\u5173\u3002\n\n\u9996\u5148\uff0c\u6211\u4eec\u7684\u4efb\u52a1\u662f\u6c42\u51fa $l$ \u548c $r$ \u6240\u5728\u7684\u884c\u5750\u6807\u548c\u5217\u5750\u6807\uff0c\u5bf9\u4e8e\u884c\u5750\u6807\uff0c\u6211\u4eec\u53ef\u4ee5\u624b\u5199\u4e00\u4e2a\u4e8c\u5206\u67e5\u627e\uff0c\u901a\u8fc7\u679a\u4e3e\u524d $mid$ \u884c\u4ee5\u524d\u7684\u6570\u7684\u4e2a\u6570\u6765\u5224\u65ad $l$ \u548c $r$ \u662f\u5426\u5728\u8fd9\u4e00\u884c\uff1a\n\n```cpp\nll Find(ll n){\n\tll l=1,r=1000000;\n\twhile(l<r){\n\t\tll mid=(l+r)/2;//mid\u4ee3\u8868\u884c\n\t\tif((1+mid)*mid/2>=n) r=mid;//\u6c42\u7b2cmid\u884c\u53ca\u4ee5\u524d\u7684\u6570\u7684\u4e2a\u6570\n\t\telse l=mid+1;\n\t}\n\treturn r;\n}\n```\n\n\u7136\u540e\u6211\u4eec\u5f97\u77e5\u4e86 $n$ \u7684\u884c\u6570\uff0c\u90a3\u4e48\u5217\u6570\u5c31\u662f `n-Find(n-1)`\uff0c\u6b64\u65f6\u6211\u4eec\u5df2\u7ecf\u5f97\u77e5\u4e86 $n$ \u7684\u5750\u6807\uff0c\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u6c42 $l$ \u548c $r$ \u7684\u533a\u95f4\u548c\u4e86\u3002\n\n\u9996\u5148\u6211\u4eec\u8981\u77e5\u9053\u5982\u4f55\u6c42\u524d $n$ \u884c\u7684\u548c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u524d $n$ \u884c\u6c42\u548c\u51fd\u6570\uff1a\n\n```cpp\nll Ans(ll n){\n\treturn n*(n+1)/6*(n+2)/6;//\u524d n \u884c\u90fd\u662f\u7b49\u5dee\u6570\u5217\uff0c\u5408\u8d77\u6765\u5f97\u51fa\u4ee5\u4e0b\u516c\u5f0f\n}\n```\n\n\u4e4b\u540e\u6211\u4eec\u8981\u6c42\u7b2c $n$ \u884c\u7684\u548c\uff0c\u4e5f\u5c31\u662f 1  \u4e00\u76f4\u6570\u5230 $n$ \u7684\u6a2a\u5750\u6807\u7684\u548c\uff0c\u6211\u4eec\u4f7f\u7528\u9ad8\u65af\u516c\u5f0f\uff1a\n\n```cpp\nll f(ll n){\n\treturn (1+n)*n/2;//\uff08\u9996\u9879+\u672b\u9879\uff09*\u9879\u6570/2\n}\n```\n\n\u6700\u540e\uff0c\u6211\u4eec\u5df2\u7ecf\u5f97\u5230\u4e86\u524d $l$ \u4e2a\u6570\u548c\u524d $r$ \u4e2a\u6570\u7684\u548c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u628a\u5b83\u4eec\u76f8\u51cf\u5c31\u53ef\u4ee5\u5f97\u51fa\u7b54\u6848\uff0c\u5f53\u7136\uff0c\u4fdd\u9669\u8d77\u89c1\uff0c\u6211\u4eec\u8981\u4f7f\u7528 `unsigned long long`\uff0c\u4e0b\u9762\u662f\u5b8c\u6574\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll unsigned long long\n#define F(i,a,b) for (int i=a;i<=b;i++)\n#define Test ios::sync_with_stdio(false),cin.tie(nullptr),cout.tie(nullptr)\nusing namespace std;\nconst int N=1e7+10,NN=1e4+10;\nll n,m,k,x,y,u,v,w,cnt=0,ans=0,t=0,l,r,len,T;\nll mini=INT_MAX,maxi=0,Mod;\nstring s1,s2;\nll a[5];\nll Find(ll n){//\u4e8c\u5206\n\tll l=1,r=10000000;\n\twhile(l<r){\n\t\tll mid=(l+r)/2;\n\t\tif((1+mid)*mid/2>=n) r=mid;\n\t\telse l=mid+1;\n\t}\n\treturn r;\n}\nll f(ll n){//\u9ad8\u65af\u516c\u5f0f\n\treturn (1+n)*n/2;\n}\nll Ans(ll n){//\u524d n \u884c\u7684\u548c\n\treturn n*(n+1)*(n+2)/6;\n}\nint main(){\n\tTest;\n\tcin>>T;\n\twhile(T--){\n\t\tcin>>l>>r;\n\t\ta[1]=l-f(Find(l)-1);//\u524d l \u884c\n\t\ta[2]=r-f(Find(r)-1);//\u524d r \u884c\n\t\tll ans1=Ans(Find(l)-1)+a[1]*(a[1]-1)/2;//\u524d l \u4e2a\u6570\u7684\u548c\n\t\tll ans2=Ans(Find(r)-1)+(a[2]+1)*a[2]/2;//\u524d r \u4e2a\u6570\u7684\u548c\n\t\tcout<<ans2-ans1<<\"\\n\";\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1673244630,
        "uid": 654958,
        "name": "Light_az",
        "ccfLevel": 0,
        "title": "P8762\u9898\u89e3"
    },
    {
        "content": "## \u5206\u6790+\u601d\u8def+\u4ee3\u7801\n\n#### \u524d\u9644\u9605\u8bfb\u672c\u9898\u89e3\u6240\u5fc5\u987b\u638c\u63e1\u7684\u7b97\u6cd5[\u524d\u7f00\u548c](https://www.luogu.com.cn/blog/ztntonny/qian-zhui-hu-jian-shu)\uff0c\u5927\u4f6c\u8bf7\u5ffd\u7565\u3002\n\n\u89c2\u5bdf\u4e0b\u9762\u7684\u8868\u683c\uff1a\n\n| \u6570\u5217 | 1 | 1 | 2 | 1 | 2 | 3 | 1 | 2 | 3 | 4 | 1 | 2 | 3 | 4 | 5 |\n| :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: | :----------: |\n| \u5e8f\u53f7 | num.1 | num.2 | num.3 | num.4 | num.5 | num.6 | num.7 | num.8 | num.9 | num.10 | num.11 | num.12 | num.13 | num.14 | num.15 |\n| \u5c42\u7ea7 | lev.1 | lev.2 | lev.2 | lev.3 | lev.3 | lev.3 | lev.4 | lev.4 | lev.4 | lev.4 | lev.5 | lev.5 | lev.5 | lev.5 | lev.5 |\n\n\u5176\u4e2d\u201c\u5c42\u7ea7\u201d\u662f\u4e00\u4e2a\u5173\u952e\uff0c\u6211\u4eec\u5206\u6790\u8fd9\u4e2a\u6570\u5217\uff0c\u662f\u591a\u4e2a\u7b49\u5dee\u6570\u5217\u7ec4\u6210\u7684\uff0c\u90a3\u4e48\u5c31\u81ea\u7136\u60f3\u8981\u6a21\u62df\uff0c\u4f46\u662f\u770b\u5230 $10^{12}$ \u7684\u6570\u636e\u89c4\u6a21\u53c8\u671b\u800c\u751f\u602f\uff0c\u6240\u4ee5\u901a\u8fc7\u4e00\u4e9b\u6280\u5de7\u6765\u62ff\u4e0b\u3002\u4e0b\u9762\u5229\u7528\u4e00\u4e9b\u524d\u7f00\u548c\u7684\u601d\u60f3\u6765\u5b9e\u73b0\uff0c\u6211\u4eec\u628a\u6570\u5217\u5f62\u8c61\u7684\u5212\u6210\u4e00\u4e2a\u7b49\u5dee\u6570\u5217\uff1a\n\n```\n{1},{1,2},{1,2,3},{1,2,3,4},{1,2,3,4,5}......\n```\n\n\u4ece\u800c\u6bcf\u4e00\u9879\u7684\u6570\u503c\u90fd\u4ee3\u8868\u4e86\u8be5\u6bb5\u6240\u5bf9\u5e94\u7684\u5b50\u7b49\u5dee\u6570\u5217\u7684\u9879\u6570\uff0c\u90a3\u4e48\u5c06\u5176\u8f6c\u5316\u4e3a\u524d\u7f00\u548c\u5f62\u5f0f\uff1a\n\n```\n{1},{1+2},{1+2+3},{1+2+3+4},{1+2+3+4+5}......\n```\n\n\u66f4\u76f4\u89c2\u7684\uff1a\n\n```\n{s[1]},{s[2]},{s[3]},{s[4]},{s[5]}......\n```\n\n\u5176\u4e2d ```s[i]``` \u4ee3\u8868 $1$ \u5230 $i$ \u7684\u6570\u503c\u548c\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u524d\u7f00\u548c\u6570\u7ec4 ```s[]```\uff0c\u4ece\u800c\u5199\u51fa\u524d\u7f00\u548c\u4ee3\u7801\uff1a\n\n```\nfor ( int i = 1; i < 2000005; i++ )\n\ts[i] = s[i - 1] + i;\n```\n\n\u7136\u540e\u518d\u5206\u6790\u6570\u7ec4\u672c\u8eab\u7684\u524d\u7f00\u548c\uff0c\u53ef\u4ee5\u5148\u4e0d\u8003\u8651\u5177\u4f53\u5230\u6bcf\u4e00\u4e2a\u6570\u503c\u5f97\uff0c\u4f46\u662f\u8981\u6bcf\u4e00\u4e2a\u5143\u7d20\u5bf9\u5e94\u7684\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u6570\u7ec4\uff1a\n\n```\n{s[1]},{s[2]},{s[3]},{s[4]},{s[5]}......\n```\n\n\u4e3a\u4e86\u6c42\u6bcf\u4e00\u4e2a\u5143\u7d20\u5bf9\u5e94\u7684\u524d\u7f00\u548c\uff0c\u90a3\u4e48\u5199\u51fa\u9884\u5904\u7406\u4ee3\u7801\uff1a\n\n```cpp\nfor ( int i = 1; i < 2000005; i++ )\n\ts[i] = s[i - 1] + i , f[i] = f[i - 1] + s[i];\n```\n\n```f[i]``` \u5373\u4e3a\u6240\u6c42\uff0c\u4f46\u662f\u8fd9\u6ca1\u6709\u7cbe\u786e\u5230\u6570\u503c\uff0c\u8bbe\u8981\u6c42\u7684\u6570\u503c $a$ \u5728\u7b2c $lev$ \u5c42\uff0c\u90a3\u4e48\u8fd8\u9700\u8981\u518d\u8865\u4e00\u4e2a\u5faa\u73af\uff1a\n\n```cpp\nfor ( int i = 1; i <= a - s[lev]; i++ )\tsum += i;\n```\n\n\u6765\u5f25\u8865\u5728 $a$ \u6240\u5728\u9636\u68af\u5185\u90e8\u7684\u5c0f\u4e8e $a$ \u7684\u6570\u503c\u548c\uff0c\u6613\u53d1\u73b0\u8fd9\u4e2a\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a\n\n```cpp\nsum += ( a - s[lev] + 1 ) * ( a - s[lev] ) / 2;\n```\n\n\u5c31\u662f $\\mathcal{O(1)}$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e86\uff0c\u90a3\u4e48\u5982\u4f55\u6c42\u51fa $lev$ \u5462\uff1f\u7528\u4e00\u4e2astl\u5e93\u7684\u81ea\u5e26\u4e8c\u5206\u67e5\u627e\u51fd\u6570\u6765\u89e3\u51b3\uff0c\u4e5f\u53ef\u4ee5\u624b\u5199\uff1a\n\n```cpp\nll lev = max( 0ll , (ll)( lower_bound( s , s + 2000005 , a ) - s - 1 ) );\n//\u4e0d\u8fc7\u597d\u50cf\u76f4\u63a5\u66b4\u529b\u641c\u4e5f\u53ef\u4ee5\uff0c\u6ca1\u8bd5\u8fc7\u8fd8\u662f\u7528\u6700\u7701\u65f6\u95f4\u7684\u5566 \uff1a)\n```\n\n\u90a3\u4e48\u73b0\u5728\u5199\u51fa\u4e86\u6c42\u51fa\u7b2c $i$ \u4e2a\u6570\u503c\u7684\u5bf9\u5e94\u524d\u7f00\u548c\u7684\u6838\u5fc3\u4ee3\u7801\uff1a\n\n```cpp\nfor ( int i = 1; i < 2000005; i++ )\n\ts[i] = s[i - 1] + i , f[i] = f[i - 1] + s[i];\ncin >> t;\nwhile ( t-- )\n{\n\tcin >> a;\n\tll lev = max( 0ll , (ll)( lower_bound( s , s + 2000005 , a ) - s - 1 ) );\n\tll sum = f[lev];\n\tsum += ( r - s[lev] + 1 ) * ( r - s[lev] ) / 2 ;\n\tcout << sum << endl;\n}\n```\n\n\u4e0b\u9762\u5e94\u7528\u524d\u7f00\u548c\u7684\u601d\u60f3\uff0c$r$ \u5230 $l$ \u7684\u548c\u5c31\u662f ```sum[l]-sum[r - 1]```\uff0c\u5217\u51fa\u4e3b\u7a0b\u5e8f\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nll s[2000005] , f[2000005] , ans , t , r , l; \nint main()\n{\n\tfor ( int i = 1; i < 2000005; i++ )\n\t\ts[i] = s[i - 1] + i , f[i] = f[i - 1] + s[i];\n\tcin >> t;\n\twhile ( t-- )\n\t{\n\t\tcin >> r >> l;\n\t\tr--;\n\t\tll levr = max( 0ll , (ll)( lower_bound( s , s + 2000005 , r ) - s - 1 ) ) , levl = max( 0ll , (ll)( lower_bound( s , s + 2000005 , l ) - s - 1 ) );\n\t\tll sumr = f[levr] , suml = f[levl];\n\t\tsumr += ( r - s[levr] + 1 ) * ( r - s[levr] ) / 2 , suml += ( l - s[levl] + 1 ) * ( l - s[levl] ) / 2;\n\t\tcout << suml - sumr << endl;\n\t}\n\treturn 0;\n}\n```\n\n\u4e8e\u662f\u6211\u4eec\u5c31\u5b8c\u7f8e\u7684AC\u5566~\u5e0c\u671b\u8fd9\u4efd\u9898\u89e3\u5bf9\u60a8\u6709\u5e2e\u52a9\uff01\n\n```cpp\n//\u5bf9\u4e86\u8865\u4e00\u53e5\uff0c\u5927\u5bb6\u4e0d\u8981\u5fd8\u4e86\u5f00long long\u54e6\u2014\u2014\u2014\u2014\u8981\u4e0d\u7136\u4f1a\u5f97\u5230\u6ee1\u5c4f\u70ed\u8840\u6cb8\u817e\u7684\u989c\u8272\uff08doge\n```",
        "postTime": 1672304623,
        "uid": 726395,
        "name": "ztntonny",
        "ccfLevel": 4,
        "title": "P8762\u9898\u89e3"
    },
    {
        "content": "\u5c31\u50cf\u5176\u4ed6\u9898\u89e3\u90a3\u6837\uff0c\u6211\u4eec\u5c06\u8fd9\u4e2a\u6570\u5217\u5206\u89e3\u6210\u4e00\u4e2a\u4e8c\u7ef4\u7684\u4e09\u89d2\u5f62\uff0c\u5927\u6982\u957f\u8fd9\u6837\uff1a\n\n```\n1\n1 2\n1 2 3\n1 2 3 4\n...\n```\n\n\u6765\u63a8\u5bfc\u51e0\u4e2a\u516c\u5f0f\u3002\n\n\u7b2c $i$ \u884c\u7684\u6570\u5b57\u603b\u548c\uff1a\n\n$$\n1+2+...+i=\\frac{1+2+...+i+1+2+...+i}{2}=\\frac{(1+i)+(2+i-1)+...+(i+1)}{2}=\\frac{i\\times(i+1)}{2}\n$$\n\n\u524d $i$ \u884c\u7684\u6570\u5b57\u603b\u548c\uff1a\n\n$$\n\\frac{1\\times 2}{2}+\\frac{2\\times 3}{2}+...+\\frac{i\\times (i+1)}{2}=\\frac 1 2 (1\\times 2+2\\times 3+...+i\\times (i+1)) =\\frac 1 6 \\times (1\\times 2\\times 3+2\\times 3\\times (4-1)+...+i\\times (i+1)\\times(i+2-i+1))=\\frac 1 6 \\times i\\times (i+1)\\times (i+2)\n$$\n\n\u4e8e\u662f\u6211\u4eec\u7528\u7c7b\u4f3c\u524d\u7f00\u548c\u7684\u601d\u60f3\uff0c\u628a\u95ee\u9898\u62c6\u6210\u51e0\u4e2a\u5f0f\u5b50\u52a0\u52a0\u51cf\u51cf\u5373\u53ef\u3002\n\n\u8fd9\u91cc\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u51fd\u6570\u6765\u6c42\u67d0\u4e2a\u6570\u5b57\u5728\u54ea\u4e00\u884c\uff0c\u4e8c\u5206\u5373\u53ef\uff0c\u5b9e\u73b0\u5982\u4e0b\uff1a\n\n```cpp\nlong long fd(long long x)\n{\n    long long l=1,r=10000000,ans;\n    while(l<=r)\n    {\n        long long mid=(l+r)/2;\n        if(mid*(mid+1)/2<x)l=mid+1;\n        else \n        {\n            r=mid-1;\n            ans=mid;\n        }\n    }\n    return ans;\n}\n```\n\n\u5168\u90e8\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long n,l,r,ans,t1,t2,st,ed,k1,k2;\nlong long fd(long long x)\n{\n    long long l=1,r=10000000,ans;\n    while(l<=r)\n    {\n        long long mid=(l+r)/2;\n        if(mid*(mid+1)/2<x)l=mid+1;\n        else \n        {\n            r=mid-1;\n            ans=mid;\n        }\n    }\n    return ans;\n}\nint main()\n{\n    scanf(\"%lld\",&n);\n    while(n--)\n    {\n        scanf(\"%lld%lld\",&l,&r);\n        st=fd(l),ed=fd(r);//\u627e\u51fa\u884c\n        t1=l-st*(st-1)/2;//\u5212\u5f52\u4e3a\u51e0\u4e2a\u5b8c\u6574\u7684\u884c\uff0c\u65b9\u4fbf\u8ba1\u7b97\n        t2=r-ed*(ed-1)/2;\n        k1=(st-1)*st*(st+1)/6;//\u6c42\u51fa\u4e24\u4e2a\u884c\u7684\u524d\u7f00\u548c\n        k2=(ed-1)*ed*(ed+1)/6;\n        cout<<k2-k1+(t2+1)*t2/2-(t1-1)*t1/2<<endl;//\u8fd0\u7b97\uff0c\u628a\u521a\u624d\u5904\u7406\u6389\u7684\u8865\u4e0a\n    }\n}\n```",
        "postTime": 1677576442,
        "uid": 501947,
        "name": "DengDuck",
        "ccfLevel": 6,
        "title": "P8762 [\u84dd\u6865\u676f 2021 \u56fd ABC] 123 \u9898\u89e3"
    },
    {
        "content": "# Description\n\n[P8762 [\u84dd\u6865\u676f 2021 \u56fd ABC] 123](https://www.luogu.com.cn/problem/P8762)\n\n\u5bf9\u4e8e\u6570\u5217\uff1a$1,1,2,1,2,3,1,2,3,4,\\cdots$, \u6c42\u5176\u4e2d\u7b2c $l_{i}$ \u4e2a\u6570\u5230\u7b2c $r_{i}$ \u4e2a\u6570\u7684\u548c\u3002\u5171 $T$ \u7ec4\u8be2\u95ee\u3002\n\n\u6570\u636e\u8303\u56f4\uff1a$1 \\leq T \\leq 100000$\uff0c$1 \\leq l_{i} \\leq r_{i} \\leq 10^{12}$\u3002 \n\n# Analysis\n\n\u9996\u5148\uff0c\u4e8c\u5206\u67e5\u627e $l$ \u548c $r$ \u6240\u5728\u7684\u4f4d\u7f6e\u3002\u7136\u540e\uff0c\u8ba1\u7b97 $l$ \u548c $r$ \u4e4b\u95f4\u6240\u6709\u6570\u7684\u548c $sum$\u3002\u7531\u4e8e\u6570\u636e\u8303\u56f4\u5f88\u5927\uff0c\u82e5\u76f4\u63a5\u5229\u7528 `for` \u5faa\u73af\u6c42\u548c\uff0c\u4e00\u5b9a\u4f1a\u8d85\u65f6\u3002\n\n\u6211\u4eec\u5c06\u6570\u5b57\u8868\u73b0\u4e3a\u4e8c\u7ef4\u6570\u7ec4\u7684\u5f62\u5f0f\uff08\u6b64\u5904\u5217\u4e3e\u524d\u4e94\u884c\uff09\uff1a\n\n```\n1\n1\uff0c2\n1\uff0c2\uff0c3\n1\uff0c2\uff0c3\uff0c4\n1\uff0c2\uff0c3\uff0c4\uff0c5\n```\n\u56e0\u4e3a\u6bcf\u4e00\u884c\u90fd\u662f\u4ee5 $1$ \u4e3a\u9996\u7684\u7b49\u5dee\u5e8f\u5217\uff0c\u56e0\u6b64\uff0c\u5bf9\u4e8e\u7b2c $n$ \u884c\uff0c\u5176\u6240\u6709\u6570\u7684\u548c\u4e3a $\\dfrac{n(n+1)}{2}$\u3002\u7531\u6b64\uff0c\u6211\u4eec\u4e5f\u53ef\u5f97\u51fa\u524d $n$ \u884c\u6240\u6709\u6570\u7684\u548c\u4e3a $\\dfrac{n(n+1)(n+2)}{6}$\u3002\n\n# Code\n\n> \u6709\u70b9\u4e71\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define pb push_back\ntypedef pair<int,int>PII;\nconst int Max=1e5+5;\nconst int INF=1e15+5;\ninline int read()\n{\n    register char c = getchar();\n    register int x = 0, f = 1;\n    while (c < '0' || c > '9') {if (c == '-') f = -1;c = getchar();}\n    while (c >= '0' && c <= '9') {x = (x << 3) + (x << 1) + c - 48;c = getchar();}\n    return x * f;\n}\ninline int Power(int base, int power)\n{\n    int result = 1;\n    while (power > 0)\n    {\n        if (power % 2 == 1)\n        {\n            result = result * base;\n        }\n        power = power / 2;\n        base = (base * base);\n    }\n    return result;\n}\ninline int gcd(int x,int y)\n{\n    if(x==0&&y!=0) return y;\n    if(x!=0&&y==0) return x;\n    if(x==0&&y==0) return 0;\n    if(x%y==0) return y;\n    return gcd(y,x%y);\n}\ninline int binary(int x)\n{\n    int l=0,r=1e7;\n    while(l<=r)\n    {\n        int mid=(l+r)/2;\n        int m=mid;\n        mid=mid*(mid+1)/2;\n        if(mid>x) r=m-1;\n        else l=m+1;\n    }\n    return r;\n}\nsigned main()\n{\n    int t;\n    t=read();\n    while(t--)\n    {\n        int left,right;\n        left=read(),right=read();\n        int l=binary(left);\n        int r=binary(right);\n        int sum=0;\n        if(l==r)\n        {\n            if((l+1)*l/2!=left) left=left-l*(l+1)/2;\n            else left=l;\n            if((r+1)*r/2!=right) right=right-r*(r+1)/2;\n            else right=l;\n            sum+=((right*(right+1)/2)-(left-1)*left/2);\n            printf(\"%lld\\n\",sum);\n            continue;\n        }\n        if((l+1)*l/2==left&&(r+1)*r/2==right)\n        {\n            if(l+1<=r)\n            {\n                int len=r-l-1;\n                sum+=((l+1)*(l+2)/2)*(r-l);\n                if(len>=0) sum=sum+(l+2)*(len*(len+1)/2);\n                len--;\n                if(len>=0) sum+=(len*(len+1)*(len+2)/6);\n            }\n            sum+=l;\n        }\n        else if((l+1)*l/2!=left&&(r+1)*r/2==right)\n        {\n            if(l+2<=r)\n            {\n                int len=r-l-2;\n                sum+=((l+2)*(l+3)/2)*(len+1);\n                if(len>=0) sum=sum+(l+3)*(len*(len+1)/2);\n                len--;\n                if(len>=0) sum+=(len*(len+1)*(len+2)/6);\n            }\n            left=left-l*(l+1)/2;\n            sum+=((l+1)*(l+2)/2-left*(left+1)/2+left);\n        }\n        else if((l+1)*l/2==left&&(r+1)*r/2!=right)\n        {\n            if(l+1<=r)\n            {\n                int len=r-l-1;\n                sum+=((l+1)*(l+2)/2)*(r-l);\n                if(len>=0) sum=sum+(l+2)*(len*(len+1)/2);\n                len--;\n                if(len>=0) sum+=(len*(len+1)*(len+2)/6);\n            }\n            sum+=l;\n            right=right-r*(r+1)/2;\n            sum+=(right*(right+1)/2);\n        }\n        else\n        {\n            left=left-l*(l+1)/2;\n            right=right-r*(r+1)/2;\n            if(l+2<=r)\n            {\n                int len=r-l-2;\n                sum+=((l+2)*(l+3)/2)*(len+1);\n                if(len>=0) sum=sum+(l+3)*(len*(len+1)/2);\n                len--;\n                if(len>=0) sum+=(len*(len+1)*(len+2)/6);\n            }\n            sum+=((l+1)*(l+2)/2-left*(left+1)/2+left);\n            sum+=(right*(right+1)/2);\n        }\n        printf(\"%lld\\n\",sum);\n    }\n    return 0;\n}\n```\n",
        "postTime": 1672658028,
        "uid": 897776,
        "name": "Infinite_Eternity",
        "ccfLevel": 0,
        "title": "P8762 [\u84dd\u6865\u676f 2021 \u56fd ABC] 123"
    },
    {
        "content": "\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u4f7f\u7528\u524d\u7f00\u548c\uff0c\u8fd9\u91cc\u63d0\u4f9b\u89e3\u91ca\uff1a  \n\u521d\u8bfb\u9898\u76ee\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u6570\u5217\u5f88\u8ff7\u60d1\uff0c\u4f3c\u4e4e\u4e0d\u80fd\u4f7f\u7528\u6570\u5b66\u65b9\u6cd5\u6765\u89e3\u3002\n$$\n1,1,2,1,2,3,1,2,3,4,\\cdots\n$$\n\n \u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230 **\u6570\u5f62\u7ed3\u5408** \u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u5c06\u6570\u5217\u770b\u4f5c\u4e00\u4e2a\u4e09\u89d2\u5f62\uff0c\u4e8e\u662f\u4ed6\u53d8\u6210\u4e86\uff1a   \n$$1$$\n$$1,2$$\n$$1,2,3$$\n$$1,2,3,4$$\n$$\\cdots\\cdots$$\n\n \u4e8e\u662f\u672c\u9898\u53d8\u5f97\u597d\u601d\u8003\u4e86\u4e9b\uff1a\u6211\u4eec\u53ea\u8981\u8bb0\u5f55\u6bcf\u4e00\u884c\u7684\u603b\u548c\uff0c\u518d\u8bb0\u5f55\u5230\u6570\u5217\u7b2c $n$ \u9879\u7684\u524d\u7f00\u548c\uff0c\u7136\u540e\u5728\u6bcf\u6b21\u8f93\u5165 $l,r$ \u65f6\uff0c\u7b54\u6848\u4fbf\u7b49\u4e8e\u6570 $r$ \u6240\u5728\u7684\u884c\u6700\u540e\u4e00\u4e2a\u6570\u4f4d\u7f6e\u7684\u524d\u7f00\u548c\uff0c\u51cf\u53bb\u6570 $r$ \u6240\u5728\u884c\u7684\u4f4d\u4e8e $r$ \u540e\u9762\u7684\u6570\u7684\u603b\u548c\uff0c\u51cf\u53bb $l,r$ \u4e24\u6570\u6240\u5728\u884c\u4e4b\u95f4\u6240\u6709\u884c\u7684\u548c\uff0c\u518d\u51cf\u53bb\u6570 $l$ \u6240\u5728\u884c\u7684\u4f4d\u4e8e $l$ \u4e4b\u524d\u7684\u6240\u6709\u6570\u7684\u548c\u3002  \n \u4f7f\u7528 `tmp * (tmp + 1) / 2` \u7684\u65b9\u5f0f\u6765\u4f30\u8ba1\u884c\uff0c\u6700\u540e\u518d\u8fdb\u884c\u524d\u7f00\u548c\u76f8\u51cf\u3002   \n ",
        "postTime": 1675432496,
        "uid": 661294,
        "name": "while_true",
        "ccfLevel": 0,
        "title": "P8762 [\u84dd\u6865\u676f 2021 \u56fd ABC] 123 \u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P8762)\n\n### \u9898\u76ee\u5927\u610f\uff1a\n\n\u6709\u4e00\u4e2a\u6570\u5217\uff0c\u6709 $ n $ \u6bb5\uff0c\u6bcf\u4e00\u6bb5\u7531 $ 1 $ \u5230 $ n $ \u7ec4\u6210\uff0c\u73b0\u7ed9\u5b9a $ l $ \u548c $ r $\uff0c\u6c42 $ l $ \u5230 $ r $ \u533a\u95f4\u7684\u548c\u3002\n\n### \u89e3\u51b3\u65b9\u6848\uff1a\n\n\u4e00\u770b\u8fd9\u4e2a\u9898\u76ee\uff0c\u4f60\u5c31\u60f3\u8d77\u4e86\u54ea\u4e2a\u7b97\u6cd5\uff1f\u5bf9\uff0c\u5c31\u662f\u524d\u7f00\u548c\u3002\u6211\u4eec\u53ef\u4ee5\u7528 $ a $ \u6570\u7ec4\u6765\u5b58\u50a8\u7b2c $ i $ \u6bb5\u7684\u548c\u4ee5\u53ca\u7b2c $ i $ \u6bb5\u53ca\u4e4b\u524d\u6240\u6709\u6570\u7684\u4e2a\u6570\u3002\u540c\u65f6\u7528 $ b $ \u6570\u7ec4\u5b58\u50a8\u7b2c $ i $ \u6bb5\u53ca\u4e4b\u524d\u7684\u6240\u6709\u6570\u7684\u548c\u3002\u901a\u8fc7\u6253\u8868\u53ef\u77e5\uff0c\u6bcf\u4e00\u9879\u6570\u4e4b\u524d\u7684\u548c\u90fd\u662f\u6709\u89c4\u5f8b\u7684\uff0c\u5bb9\u6613\u5f97\u5230\u4ee5\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\nlong long sum(long long x)\n{\n    long long k=floor(sqrt(x*2));\n    while(k*(k+1)/2>x)k--;\n    return b[k]+a[x-a[k]];\n}\n```\n\n### \u6ce8\u610f\u5f00  ```long long``` \n\n\n#### AC\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<climits>\n#include<algorithm>\n#include<cmath>\n#include<queue>\nusing namespace std;\ninline long long read()\n{\n\tlong long s=0,w=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){s=s*10+ch-'0';ch=getchar();}\n\treturn s*w;\n}\nconst long long N=5000000;\nlong long a[5000010],b[5000010];\nlong long sum(long long x)\n{\n    long long k=floor(sqrt(x*2));\n    while(k*(k+1)/2>x)k--;\n    return b[k]+a[x-a[k]];\n}\nint main()\n{\n\tfor(long long i=1;i<=N;++i)\n\t{\n        a[i]=a[i-1]+i;\n        b[i]=b[i-1]+a[i];   \n    }\n    long long t=read();\n    while(t--)\n    {\n    \tlong long l=read(),r=read();\n    \tcout<<sum(r)-sum(l-1)<<endl;\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1677495386,
        "uid": 649435,
        "name": "songaiwu",
        "ccfLevel": 5,
        "title": "P8762 [\u84dd\u6865\u676f 2021 \u56fd ABC] 123"
    }
]
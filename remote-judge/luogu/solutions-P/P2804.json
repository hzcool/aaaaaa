[
    {
        "content": "\u601d\u8003\u5f53\u524d\u95ee\u9898\n\n\u6211\u4eec\u5f97\u5230\u6570\u5217a\uff0c\u8981\u6c42\u591a\u5c11\u4e2a\u533a\u95f4\u7684\u548c\u5e73\u5747\u6570\u5927\u4e8em\n\n\u90a3\u4e48\u6211\u4eec**\u628a\u6570\u5217a\u6bcf\u4e00\u4e2a\u6570\u51cf\u53bbm** \u5f97\u5230\u6570\u5217A\n\n\u90a3\u4e48\u5982\u679c\u6570\u5217A\u4e2d\u67d0\u4e2a\u533a\u95f4\u7684\u548c\u5982\u679c\u5927\u4e8e0\uff0c\u539f\u6570\u5217a\u4e2d\u8fd9\u4e2a\u533a\u95f4\u7684\u5e73\u5747\u6570\u5c31\u5927\u4e8em\uff08\u8fd9\u4e2a\u8fd8\u662f\u597d\u60f3\u7684\uff0c\u5e73\u5747\u6570\u5927\u4e8em\uff0c\u90a3\u4e48\u548c\u5c31\u5927\u4e8em\u4e58\u4ee5\u533a\u95f4\u957f\u5ea6\uff09\n\n\u95ee\u9898\u8f6c\u5316\u4e3a\u6c42\u5f53\u524d\u6570\u5217A\u4e2d\u6709\u591a\u5c11\u4e2a\u533a\u95f4\u7684\u548c\u5927\u4e8e0\n\n\u7ee7\u7eed\u601d\u8003\n\n\u6211\u4eec\u6c42\u51faA\u6570\u5217\u7684**\u524d\u7f00\u548c**\u6570\u5217S\n\n\u90a3\u4e48\u4e00\u4e2a\u533a\u95f4A[i]...A[j](i<=j)\u7684\u548c\u5927\u4e8e0\u7684\u8981\u6c42\u5c31\u662f\n\n**S[j]-S[i-1]>0**\n\n\u4e5f\u5c31\u662f\n\n**S[j]>s[i-1]**\n\n\u81f3\u6b64\uff0c\u95ee\u9898\u5df2\u7ecf\u975e\u5e38\u6e05\u6670\u4e86\n\n\u95ee\u9898\u8f6c\u5316\u4e3a\u6c42S[j]\u4e4b\u524d\u6709\u591a\u5c11\u4e2aS[i]>S[j],\u628a\u76f8\u5bf9\u4e8e\u6bcf\u4e00\u4e2aS[j]\u7684\u7b54\u6848\u4e2a\u6570\u76f8\u52a0\u5c31\u662fans\n\n\u4e5f\u5c31\u662f\u6c42\u524d\u7f00\u548c\u6570\u5217S\u7684**\u9006\u5e8f\u5bf9**\n\n\u6ce8\u610f \u8981\u8ffd\u52a0S[0]=0,\u56e0\u4e3a\u8fd9\u4e2a\u4ee3\u8868\u4ece\u5f00\u5934\u5f00\u59cb\u7684\u4e00\u4e2a\u533a\u95f4\u4e5f\u8981\u8ba1\u7b97(\u5426\u5219\u4f1a\u5c11\u7b97\u4e00\u4e9b\u7b54\u6848)\n\n\u4e0b\u9762\u8d34\u51fa\u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\u7684\u4ee3\u7801 \u671f\u671b\u590d\u6742\u5ea6O(nlogn)\n\n\u697c\u4e3b\u4e0a\u5927\u5b66\u4e86 \u591a\u5e74\u6ca1\u4e0a\u6d1b\u8c37 \u770b\u5230\u8fd9\u9898\u8bc4\u8bba\u533a\u91cc\u6709\u8ba8\u8bba\u5173\u4e8e\u987a\u9006\u5e8f\u7684\u95ee\u9898\n\u697c\u4e3b\u7684\u610f\u601d\u662f \u201d\u987a\u201c \u201c\u9006\u201d \u662f\u5bf9\u4e8e\u8fd9\u4e2a\u201c\u5e8f\u201d\u800c\u8a00\u7684 \u53ef\u4ee5\u8ba4\u4e3a\u662f\u5347\u5e8f\u7684\u987a\u5e8f\u5bf9\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u662f\u964d\u5e8f\u7684\u9006\u5e8f\u5bf9\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <cstdlib>\n#include <algorithm>\nusing namespace std;\nint a[200010],sum[200010],ans,temp[200010];\n//sum\u4e3a\u524d\u7f00\u548c\nint n,m;\nint merge(int l,int mid,int r){\n    int p1=l,p2=mid+1,k=l-1;\n    while(p1<=mid&&p2<=r){\n        if(sum[p1]<sum[p2]){\n            ans+=(mid-p1+1);\n            ans%=92084931;\n            temp[++k]=sum[p2];\n            p2++;\n        }\n        else if(sum[p1]>=sum[p2]){\n            temp[++k]=sum[p1];\n            p1++;\n        }\n    }\n    while(p1<=mid) temp[++k]=sum[p1++];\n    while(p2<=r) temp[++k]=sum[p2++];\n    for(int i=l;i<=r;i++)\n        sum[i]=temp[i];\n}\nvoid mergesort(int l,int r){\n    if(l<r){\n        int mid=(l+r)>>1;\n        mergesort(l,mid);\n        mergesort(mid+1,r);\n        merge(l,mid,r);\n    }\n}\nint main(){\n    scanf(\"%d %d\",&n,&m);\n    for(int i=1;i<=n;i++){\n        scanf(\"%d\",&a[i]);\n        a[i]-=m;\n        sum[i]=sum[i-1]+a[i];\n    }\n    mergesort(0,n);\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1478761949,
        "uid": 9431,
        "name": "cabasky",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2804 \u3010\u795e\u79d8\u6570\u5b57\u3011"
    },
    {
        "content": "\u672c\u9898\u5206\u6790\u697c\u4e0a\u5df2\u7ecf\u8bb2\u7684\u5341\u5206\u8be6\u7ec6\uff0c\u8fd9\u91cc\u5c31\u4e0d\u591a\u8bb2\u4e86\u3002\u8fd9\u91cc\u6211\u8bf4\u4e00\u4e9b\u6ce8\u610f\u70b9( \u7ed9\u7528 \u6811\u72b6\u6570\u7ec4 \u7684\u7ae5\u978b\u4eec )\uff1a\n\n1.\u6570\u636e\u6709\u975e\u6b63\u6570\uff0c\u6240\u4ee5\u9700\u8981\u91cd\u6784\u6570\u636e\uff08\u6211\u7528\u6392\u5e8f\u7684\u987a\u5e8f\uff0c\u91cd\u590d\u7b97\u540c\u4e00\u4e2a\u6570\uff09\n\n2.\u7531\u4e8e \u987a\u5e8f\u5bf9  \uff0c\u6240\u4ee5 \u51cf\u53bb \u4e4b\u524d\u7b49\u4e8e x \u7684\u6b21\u6570\uff0c\u5305\u62ec\u8fd9\u4e2ax\n\n3.\u7531\u4e8e\u516c\u5f0f\u4e3a  S[ j  ]> S[ i-1 ] \uff0c\u6545\u8981\u8ba1\u7b97 \u30101\uff0cj\u3011 \u7684\u8bdd \u5c31\u8981\u7528 S[ j ] - S[ 0 ]\n\n\n\u732e\u4e0a\u6211\u7684\u4ee3\u7801\uff0c\u6709\u70b9\u4e11\uff08\u5e26\u6587\u4ef6\u8f93\u5165\u8f93\u51fa\uff09\uff1a\n\n\n\n\n\n\n\n\n    \n    \n```cpp\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <algorithm>\n#define Open(s) freopen(s\".in\",\"r\",stdin); freopen(s\".out\",\"w\",stdout);\n#define Close fclose(stdin); fclose(stdout);\n#define lowbit(x) x&(-x)\n#define mo 92084931\nusing namespace std;\nint n,M;\nint ans;\nint maxb;         // \u4e0a\u754c\nint a[200001];  //\u8bfb\u5165\u6570\u5b57\nint b[200001];  //\u6811\u72b6\u6570\u7ec4\nint c[200001];  //\u5224\u91cd\nvoid input(int x)\n{\n    ++c[x];\n    if(c[x]>=mo) c[x]-=mo;\n    for(;x<=maxb;x+=lowbit(x))\n    {\n        ++b[x];\n        if(b[x]>=mo) b[x]-=mo;\n    }\n}\nint getsum(int x)\n{\n    int sum=-1*(c[x]);\n    for(;x;x-=lowbit(x))\n    {\n        sum+=b[x];\n        if(sum>=mo) sum-=mo;\n    }\n    return sum;\n}\nbool cmp(int x,int y)\n{\n    return a[x]<a[y];\n}\nint main()\n{\n    Open(\"smsz\");\n    scanf(\"%d %d\", &n, &M);\n    for(int i=1;i<=n;++i)\n    {\n        int x;\n        scanf(\"%d\",&x);\n        a[i]=a[i-1]+x-M;\n        c[i]=i;\n    }\n    sort(c,c+n+1,cmp);\n    for(int i=0;i<=n;++i)\n    {\n        for(int j=i+1;j<=n && a[c[i]]==a[c[j]];++j)\n            b[c[j]]=-1;        // \u6682\u65f6\u501f\u7528 b \u6570\u7ec4\uff0c\u4e0d\u662f\u6811\u72b6\u6570\u7ec4\n        a[c[i]]=a[c[i-1]]+1;\n        if(b[c[i]]<0)\n        {\n            a[c[i]]+=b[c[i]];\n            b[c[i]]=0;\n        }\n        if(a[c[i]]>maxb) maxb=a[c[i]];\n    }\n    memset(c,0,sizeof(c));\n    for(int i=0;i<=n;++i)\n    {\n        input(a[i]);\n        ans+=getsum(a[i]);\n        for(;ans>=mo;ans-=mo);   \n    }\n    printf(\"%d\",ans);\n    Close;\n    return 0;\n}\n\n```",
        "postTime": 1500431697,
        "uid": 48277,
        "name": "SCKer",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2804 \u3010\u795e\u79d8\u6570\u5b57\u3011"
    },
    {
        "content": "## Main~Idea\n\n\u6709\u4e00\u4e2a\u957f\u4e3a $n$ \u7684\u6570\u5217\uff0c\u6c42\u5176\u4e2d\u6709\u591a\u5c11**\u8fde\u7eed**\u7684\u4e00\u6bb5\u6570\u4f7f\u5176**\u5e73\u5747\u6570**\u5927\u4e8e $m$\u3002\n\n## Solution\n\n\u56e0\u4e3a\u8981\u6c42\u662f\u8fde\u7eed\u7684\u4e00\u6bb5\u6570\u4e14\u5176\u5e73\u5747\u6570\u5927\u4e8e $m$\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u524d\u7f00\u548c\u7684\u6570\u7ec4\u8bb0\u5f55\u5f53\u524d\u548c\u4e0e\u5e73\u5747\u6570\u6070\u597d\u7b49\u4e8e $m$ \u7684\u548c\u7684\u5dee\u3002\n\n\u7136\u540e\u679a\u4e3e\u5e8f\u5217\u6700\u540e\u4e00\u4e2a\u6570 $i$\uff0c\u6c42\u5728\u5176\u524d\u9762\u7684\u524d\u7f00\u548c\u6570\u7ec4\u6709\u591a\u5c11\u4e2a\u6570\u5c0f\u4e8e\u81ea\u8eab\uff08\u4f7f\u8fd9\u4e24\u4e2a\u4f5c\u5dee\u540e\u5927\u4e8e $0$\uff0c\u4e5f\u5c31\u662f\u4e24\u4e2a\u6570\u4e4b\u95f4\u7684\u5e73\u5747\u6570\u5927\u4e8e $m$\uff09\uff0c\u6c42\u548c\u5373\u53ef\u3002\n\n\u7ec6\u770b\u8fd9\u64cd\u4f5c\uff0c\u6211\u4eec\u7acb\u523b\u53ef\u4ee5\u60f3\u5230\u4e00\u79cd\u53ef\u7231\u7684\u6570\u636e\u7ed3\u6784\u2014\u2014**\u6743\u503c\u7ebf\u6bb5\u6811**\uff01\n\n\u56e0\u4e3a\u6570\u636e\u6709\u4e9b\u5927\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u884c\u79bb\u6563\u5316\u3002\n\n\u5206\u6790\u5b8c\u6bd5\uff0c\u5b8c\u7ed3\u6492\u82b1\uff01\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define IOS ios::sync_with_stdio(false); cin.tie(0); cout.tie(0)\n#define ls (rt << 1)\n#define rs (rt << 1 | 1)\n#define mid (l + r >> 1)\n#define ri register int\n#define ll long long\n#define N 200010\n#define mod 92084931\n\nll n, m, a[N], b[N], tr[N << 3], size, ans;\n\ninline void change(ll rt, ll l, ll r, ll p, ll cnt) {\n\ttr[rt] += cnt;\n\tif (l == r) return;\n\tif (p <= mid) change(ls, l, mid, p, cnt);\n\telse change(rs, mid + 1, r, p, cnt);\n} //\u6743\u503c\u7ebf\u6bb5\u6811\u57fa\u672c\u64cd\u4f5c\u2014\u2014\u589e\u5220\u6570\u5b57\ninline ll query(ll rt, ll l, ll r, ll e) {\n\tif (l > e) return 0;\n\tif (r <= e) return tr[rt];\n\treturn query(ls, l, mid, e) + query(rs, mid + 1, r, e);\n} //\u67e5\u627e\u6709\u591a\u5c11\u4e2a\u6570\u5c0f\u4e8e\u7b49\u4e8e e\n\nint main() {\n\tIOS;\n\tcin >> n >> m;\n\tfor (ri i = 1; i <= n; ++i) cin >> a[i], b[i] = b[i - 1] + a[i] - m, a[i] = b[i];\n\tsort(b + 1, b + n + 1);\n\tsize = unique(b + 1, b + n + 1) - b - 1; //\u79bb\u6563\u5316\u53bb\u91cd\n\tfor (ri i = 1; i <= n; ++i) {\n\t\tif (a[i] > 0) ans++; //\u6ce8\u610f\uff1a\u5982\u679c\u4ece 1 \u5230 i \u7684\u5e73\u5747\u6570\u5927\u4e8e m\uff0c\u5f97\u53e6\u5916\u7edf\u8ba1\n\t\t(ans += (query(1, 1, size, lower_bound(b + 1, b + size + 1, a[i]) - b - 1))) %= mod; //\u4e0a\u6587\u7684\u67e5\u627e\n\t\tchange(1, 1, size, lower_bound(b + 1, b + size + 1, a[i]) - b, 1); //\u589e\u52a0\n\t}\n\tcout << ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1625997634,
        "uid": 159548,
        "name": "Zachary_Cloud",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2804 \u795e\u79d8\u6570\u5b57"
    },
    {
        "content": "CSP \u4e4b\u524d\u5148\u6765\u6c35\u4e00\u9898\u3002\n\n\u9996\u5148\u8fd9\u9898\u76ee\u4e00\u773c\u53ef\u4ee5\u770b\u51fa\u4e00\u4e2a $O(n^2)$ \u7684\u66b4\u529b\u3002\n\n\u5361\u5e38\u5361\u7684\u597d\u53ef\u4ee5\u8fc7 $50\\%$ \u7684\u6570\u636e\u3002\n\n\u6bd4\u8d5b\u7684\u65f6\u5019\u5982\u679c\u770b\u4e0d\u51fa\u6b63\u89e3\u5148\u62ff\u90e8\u5206\u5206\uff1a\n\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u5c0f\u5730\u6280\u5de7\uff0c\u5c31\u662f\u8bf4\u5982\u679c\u8981\u6c42\u4e00\u6bb5\u533a\u95f4\u7684\u5e73\u5747\u6570\u662f\u5426\u5927\u4e8e $m$\uff0c\u90a3\u4e48\u53ef\u4ee5\u5148\u628a\u8fd9\u4e00\u6bb5\u533a\u95f4\u7684\u6570\u5168\u90e8\u51cf\u53bb $m$\u3002\n\n\u7136\u540e\u53ef\u4ee5\u9884\u5904\u7406\u524d\u7f00\u548c\uff0c\u5199\u51fa\u4e00\u4e2a\u66b4\u529b\u7a0b\u5e8f\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#define int long long\nusing namespace std;\nconst int INF=2e5+5;\nconst int Mod=92084931;\nint n,m,a[INF],sum[INF],ans;\nsigned main()\n{\n\tscanf(\"%lld %lld\",&n,&m);\n\tfor (int i=1;i<=n;i++) scanf(\"%lld\",&a[i]),a[i]-=m,sum[i]=sum[i-1]+a[i];\n\tfor (int i=1;i<=n;i++) {\n\t\tfor (int j=i;j<=n;j++)\n\t\t\tif (sum[j]-sum[j-i]>0) ans=(ans+1)%Mod;\n\t}//\u5982\u679c\u4e00\u6bb5\u533a\u95f4\u548c\u5927\u4e8e 0 \u90a3\u4e48\u80af\u5b9a\u5e73\u5747\u503c\u5927\u4e8e m\u3002\n\tcout<<ans<<\"\\n\";\n\treturn 0;\n}\n//\u6ca1\u52a0\u4f18\u5316\uff0c\u5b9e\u6d4b 45 \u5206\u3002\n```\n\n\u7136\u800c\u4f5c\u8005\u8fd9\u91cc\u5c45\u7136\u795e\u5947\u7684\u6572\u4e86\u4e00\u4e2a\u4e8c\u5206\u3002\u3002\u3002\n\n\u8fd9\u9898\u76ee\u6309\u6211\u7684\u65b9\u6cd5\u6ca1\u53ef\u4ee5\u8bc1\u660e\u5355\u8c03\u6027\u7684\u5730\u65b9\u3002\n\n\u6240\u4ee5\u4e8c\u5206\u663e\u7136\u4e0d\u884c\u3002\n\n\u90a3\u4e48\u5316\u7b80\u4e00\u4e0b\u4e0a\u9762\u7684 `sum[j]-sum[j-i]>0` \u5c31\u7b49\u4e8e `sum[j]>sum[j-i]`\u3002\n\n\u6b38\uff0c\u8fd9\u4e0b\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e\u7b54\u6848\u7684\u8d21\u732e\u53ea\u6709\uff1a\n\n\u6ce8\uff1a$sum_i$ \u8868\u793a $\\sum\\limits_{j=1}^i$ \u3002\n\n$i<j$ \u5e76\u4e14 $sum_i<sum_j$\n\n\u8fd9\u4e00\u79cd\u60c5\u51b5\u3002\n\n\u90a3\u4e48\u628a\u8fd9\u4e00\u4e2a\u6a21\u578b\u8f6c\u5316\u4e00\u4e0b\u80fd\u60f3\u5230\u4ec0\u4e48\uff1f\n\n**\u9006\u5e8f\u5bf9\uff1f**\n\n\u4f46\u5f88\u53ef\u60dc\u8fd9\u9898\u76ee\u6ca1\u6709$i<j$ \u5e76\u4e14 $sum_i>sum_j$\u7684\u6027\u8d28\uff0c\u4e0d\u8fc7\u5982\u679c\u80fd\u60f3\u5230\u9006\u5e8f\u5bf9\u90a3\u4e0d\u59a8\u63a5\u7740\u60f3\u4e0b\u53bb\uff1f\n\n\u4f5c\u8005\u64c5\u957f pj \u7684\u7b97\u6cd5\uff0c\u6240\u4ee5\u60f3\u5230\u4e86\u5f52\u5e76\u3002\n\ncode:\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#define int long long\nusing namespace std;\nconst int INF=2e5+5;\nconst int Mod=92084931;\nint n,m,a[INF],b[INF],sum[INF],ans;\nvoid qsort(int l,int r) {\n\tif (l==r) return ;\n\tint Mid=(l+r)>>1;\n\tqsort(l,Mid);qsort(Mid+1,r);\n\tint ll=l,rr=Mid+1,o=l;\n\twhile (ll<=Mid && rr<=r) {\n\t\tif (sum[ll]<sum[rr]) {\n\t\t\tans+=r-rr+1;if (ans>Mod) ans-=Mod;\n\t\t\tb[o++]=sum[ll++];\n        //\u5bf9\u4e8e\u4e00\u4e2a sum[ll]<sum[rr] \u7684\u60c5\u51b5\n        //\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f r-rr+1 \u89e3\u91ca\u6210\u8bed\u8a00\u5c31\u662f\u5f53\u524d sum[ll] \u8fd9\u4e2a\u6570\u5c0f\u4e8e sum[rr] \u5fc5\u7136\u4e5f\u5c0f\u4e8e sum[rr+1] ,sum[rr+2],sum[rr+3] ... sum[r] \u6240\u4ee5\u52a0\u4e0a r-rr+1\u3002\n\t\t}\n\t\telse b[o++]=sum[rr++];\n\t}\n\twhile (ll<=Mid) b[o++]=sum[ll++];\n\twhile (rr<=r) b[o++]=sum[rr++];\n\tfor (int i=l;i<=r;i++) sum[i]=b[i];\n\treturn ;\n}\nsigned main()\n{\n\tscanf(\"%lld %lld\",&n,&m);\n\tfor (int i=1;i<=n;i++) scanf(\"%lld\",&a[i]),a[i]-=m,sum[i]=sum[i-1]+a[i];\n\tqsort(0,n); //\u4ece 0 \u5f00\u59cb\uff0c\u4e0d\u8981\u5fd8\u8bb0\u9009\u62e9 sum[1]~sum[i] \u7684\u60c5\u51b5\u3002\n//\tfor (int i=1;i<=n;i++) cout<<sum[i]<<\" \";\n\tcout<<ans<<\"\\n\";\n\treturn 0;\n}\n```\n\n\u4f5c\u8005\u6bd4\u8f83\u83dc\uff0c\u6240\u4ee5\u6709\u95ee\u9898\u8fd8\u8bf7\u6307\u51fa\u3002\n\n**\u8c22\u8c22\u89c2\u8d4f\uff01**",
        "postTime": 1601624097,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2804 \u3010\u795e\u79d8\u6570\u5b57\u3011"
    },
    {
        "content": "\u697c\u4e0b\u5df2\u7ecf\u8bb2\u5f97\u86ee\u6e05\u695a\u4e86\uff0c\u7a0d\u5fae\u518d\u8865\u5145\u4e00\u4e0b\u3002\n\n\u9898\u76ee\u8981\u6c42: (a1+a2+a3+...+an) / n > m\n\n\u7a0d\u5fae\u53d8\u5f62\u4e00\u4e0b\uff1a\n\na1+a2+a3+...+an > m\\*n\n\n(a1-m)+(a2-m)+(a1-m)+...+(an-m) > 0\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u628a\u7ed9\u51fa\u7684\u6570\u5217\u4e2d\u6240\u6709\u7684\u6570\u90fd\u51cf\u53bbm,\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\u6c42\u533a\u95f4\u52a0\u548c\u5927\u4e8e0\u7684\u65b9\u6848\u6570\n\n\u5bb9\u6613\u60f3\u5230\u9020\u524d\u7f00\u548c\uff0c\u5bf9\u4e8e\u53f3\u7aef\u70b9i\uff0c\u5728\u4e4b\u524d\u627esum[i]-sum[j]>0\u7684\u5de6\u7aef\u70b9j ( [j+1,i]\u52a0\u548c\u5927\u4e8e0 )\n\n\u6bcf\u6b21\u90fd\u5728\u4e4b\u524d\u627e\u6709\u51e0\u4e2a\u6570\u6bd4\u5b83\u5c0f\u7684\uff0c\u53ef\u4ee5\u7528\u6811\u72b6\u6570\u7ec4nlogn\u5b9e\u73b0\uff0c\u5f52\u5e76\u6392\u5e8f\u6c42\u9006\u5e8f\u5bf9\u4e5f\u4e0d\u9519\u3002\n\n\u8d34\u4e0a\u6781\u4e11\u4ee3\u7801\uff0c\u5927\u725b\u89c1\u7b11\uff1a\n\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\nconst int maxn=200005,MOD=92084931;\nint n,m,sum[maxn],bit[maxn],c[maxn],ans;\nint lowbit(int x){ return x&(-x); }\nvoid Updata(int x){\n    for(;x<=c[0];x+=lowbit(x)) bit[x]=(bit[x]+1)%MOD;\n}\nint Query(int x){\n    int res=0;\n    for(;x;x-=lowbit(x)) res=(res+bit[x])%MOD;\n    return res;\n}\nint _find(int x){\n    int L=1,R=c[0];\n    while(L<=R){\n        int mid=L+(R-L)/2;\n        if(c[mid]==x) return mid;\n        if(c[mid]<x) L=mid+1;\n                else R=mid-1;\n    }\n}\nint main(){\n    scanf(\"%d%d\",&n,&m);\n    c[c[0]=1]=0;\n    for(int i=1;i<=n;i++){\n        int x; scanf(\"%d\",&x);\n        sum[i]=sum[i-1]+x-m; //\u6bcf\u4e2a\u6570\u90fd\u51cf\u53bbm,\u5e76\u9020\u524d\u7f00\u548c \n        c[++c[0]]=sum[i];\n    }\n    sort(c+1,c+1+c[0]);\n    c[0]=unique(c+1,c+1+c[0])-(c+1); //c\u6570\u7ec4\u662f\u7528\u6765\u79bb\u6563sum\u7684 \n    Updata(_find(sum[0]));\n    for(int i=1;i<=n;i++){\n        ans=(ans+Query(_find(sum[i])-1))%MOD;\n        Updata(_find(sum[i]));\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1478941793,
        "uid": 5595,
        "name": "\u90d1\u7ff0",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2804 \u3010\u795e\u79d8\u6570\u5b57\u3011"
    },
    {
        "content": "\n### \u524d\u7f6e\u77e5\u8bc6\uff1a[\u9006\u5e8f\u5bf9](https://www.luogu.com.cn/problem/P1908)\n\n\u8fd9\u9053\u9898\u80af\u5b9a\u662f\u4e0d\u53ef\u4ee5\u6253\u66b4\u529b\u7684\uff0c\u56e0\u4e3a\u6570\u636e\u592a\u5927\u4e86\uff0c\u9996\u5148\u6211\u4eec\u8981\u77e5\u9053\u5982\u4f55\u5224\u65ad\u5e73\u5747\u6570\uff0c\u6211\u91c7\u7528\u7684\u65b9\u6cd5\u662f\uff1a\u5c06\u6bcf\u4e2a\u6570\u51cf\u53bb\u5e73\u5747\u503c $M$ \uff0c\u5982\u679c\u51cf\u540e\u7684\u503c\u5927\u4e8e\u96f6\uff0c\u8bf4\u660e\u8fd9\u4e2a\u6570\u5927\u4e8e $M$ \uff0c\u518d\u505a\u4e00\u4e2a\u524d\u7f00\u548c\u6570\u7ec4\uff0c\u5bf9\u4e8e\u524d\u7f00\u548c\u6570\u7ec4 $ a_i $ ~ $ a_j $ \u8fd9\u4e2a\u5e8f\u5217\u6765\u8bf4\uff0c\u5982\u679c\u5b83\u7684\u7d2f\u52a0\u503c\u5927\u4e8e\u96f6\uff0c\u8bf4\u660e\u8fd9\u4e2a\u5e8f\u5217\u7684\u5e73\u5747\u503c\u4e5f\u5927\u4e8e $M$ \uff0c\u90a3\u4e48\u5982\u4f55\u77e5\u9053\u6709\u591a\u5c11\u4e2a\u5e8f\u5217\u7684\u5e73\u5747\u503c\u5927\u4e8e\u96f6\u5462\uff1f\u6211\u4eec\u60f3\u4e00\u60f3\uff0c\u4e00\u4e2a\u5e8f\u5217\u7684\u603b\u548c\u662f\u7531 $ a_j $ \u51cf\u53bb $ a_i $ \u51b3\u5b9a\u7684\uff0c\u90a3\u4e48\u60f3\u8981\u5b83\u7684\u503c\u5927\u4e8e\u96f6\uff0c $a_j$ \u4e00\u5b9a\u8981\u5927\u4e8e $a_i$ \uff0c\u6240\u4ee5\u8fd9\u9053\u9898\u6211\u4eec\u89e3\u51b3\u5b8c\u524d\u7f00\u548c\uff0c\u518d\u5957\u4e0a\u9006\u5e8f\u5bf9\u6a21\u677f\uff0c\u8fd9\u9053\u9898\u5c31\u5b8c\u7f8e\u89e3\u51b3\u4e86\u3002\u8fd8\u6709\uff0c\u6700\u540e\u7279\u5224\u662f\u5426\u6709\u53ea\u6709\u4e00\u4e2a\u6570\u7684\u5e8f\u5217\u7684\u503c\u662f\u5927\u4e8e $M$ \u7684\uff0c\u4e0b\u9762\u662f\u5b8c\u6574\u4ee3\u7801\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,cnt=0,t=0,k,x,y;\nlong long ans=0;\nint a[200001],b[200001],c[200001];\nvoid sort1(int l,int r){//\u9006\u5e8f\u5bf9\u6a21\u677f \n\tif(l==r)\n\t\treturn ;\n\tint mid=(l+r)/2;//\u5f52\u5e76 \n\tsort1(l,mid);\n\tsort1(mid+1,r);\n\tcnt=l-1;\n\tint i=l,j=mid+1;\n\twhile(i<=mid&&j<=r){//\u6c42\u9006\u5e8f\u5bf9 \n\t\tif(a[i]>=a[j])\n\t\t\tb[++cnt]=a[i++];\n\t\telse{\n\t\t\tb[++cnt]=a[j++];\n\t\t\tans+=mid-i+1;//\u8bb0\u5f55\u9006\u5e8f\u5bf9 \n\t\t\tans%=92084931;\n\t\t}\n\t}\n\twhile(i<=mid) b[++cnt]=a[i++];//\u6392\u5e8f \n\twhile(j<=r) b[++cnt]=a[j++];\n\tfor(int i=l;i<=r;i++){//\u66f4\u65b0\u6392\u5e8f\u540e\u7684\u503c \n\t\ta[i]=b[i];\n\t}\n\treturn ;\n}\nint main(){\n\tcin>>n>>m;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>c[i];\n\t\tc[i]-=m;//\u51cf\u53bb\u5e73\u5747\u503c \n\t\ta[i]=a[i-1]+c[i];//\u524d\u7f00\u548c \n\t}\n\tfor(int i=1;i<=n;i++)//\u7279\u5224\u4e00\u4e2a\u6570\u5b57\u7684\u5e8f\u5217 \n\t\tif(a[i]>0)\n\t\t\tans++;\n\tsort1(1,n);//\u5f52\u5e76 \n\tcout<<ans%92084931;//\u8f93\u51fa \n\treturn 0;\n}\n```\n",
        "postTime": 1666668166,
        "uid": 654958,
        "name": "Light_az",
        "ccfLevel": 0,
        "title": "P2804\u9898\u89e3"
    },
    {
        "content": "[$\\text{Link}$](https://www.luogu.com.cn/problem/P2804)\n\n## \u798f\u5229\n\n[\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.com.cn/problem/P2717)\n\n## \u9898\u610f\n\n\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u533a\u95f4 $a_{1\\sim n}$\uff0c\u6c42\u5176\u4e2d\u6709\u591a\u5c11\u4e2a**\u8fde\u7eed**\u5b50\u5e8f\u5217\u7684\u5e73\u5747\u6570**\u5927\u4e8e** $m$\uff1f\u7b54\u6848\u5bf9 $92084931$ \u53d6\u6a21\u3002\n\n## \u5206\u6790\n\n\u9996\u5148\u6211\u4eec\u77e5\u9053\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u533a\u95f4\uff0c\u5982\u679c\u6bcf\u4e2a\u6570\u90fd\u51cf\u53bb $m$\uff0c\u90a3\u4e48\u8fd9\u4e2a\u533a\u95f4\u7684\u5e73\u5747\u6570\u5c31\u4f1a\u51cf\u5c11 $m$\uff1b\u540c\u65f6\uff0c\u5b83\u7684\u4efb\u610f\u8fde\u7eed\u5b50\u533a\u95f4\u7684\u5e73\u5747\u6570\u90fd\u4f1a\u51cf\u5c11 $m$\u3002\n\n\u65e2\u7136\u8fd9\u6837\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4ee4\u6574\u4e2a\u533a\u95f4\u90fd\u51cf\u5c11 $m$\uff0c\u4e8e\u662f\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\uff1a\n\n>\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u533a\u95f4 $a_{1\\sim n}$\uff0c\u6c42\u5176\u4e2d\u6709\u591a\u5c11\u4e2a**\u8fde\u7eed**\u5b50\u5e8f\u5217\u7684\u5e73\u5747\u6570**\u5927\u4e8e** $0$\uff1f\u7b54\u6848\u5bf9 $92084931$ \u53d6\u6a21\u3002\n\n\u65e2\u7136\u4e00\u4e2a\u8fde\u7eed\u5b50\u533a\u95f4\u7684\u5e73\u5747\u6570\u5927\u4e8e $0$ \uff0c\u90a3\u4e48\u8fd9\u4e2a\u8fde\u7eed\u5b50\u533a\u95f4\u7684\u548c\u4e5f\u5927\u4e8e $0$\uff0c\u4e8e\u662f\u95ee\u9898\u53c8\u7b80\u5316\u4e86\uff1a\n\n>\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u533a\u95f4 $a_{1\\sim n}$\uff0c\u6c42\u5176\u4e2d\u6709\u591a\u5c11\u4e2a**\u8fde\u7eed**\u5b50\u5e8f\u5217\u7684\u548c**\u5927\u4e8e** $0$\uff1f\u7b54\u6848\u5bf9 $92084931$ \u53d6\u6a21\u3002\n\n\u6c42\u548c\u90e8\u5206\u663e\u7136\u53ef\u4ee5\u7528[\u524d\u7f00\u548c](https://oi-wiki.org/basic/prefix-sum/)\u8ba1\u7b97 $s_i=\\sum_{j=1}^i a_j=s_{i-1}+a_i$ \u6765\u89e3\u51b3\uff08\u7279\u522b\u5730\uff0c$s_0=0$\uff09\uff0c\u4e00\u4e2a\u533a\u95f4\u548c $[i,j]$ \u53ef\u4ee5\u8f6c\u5316\u4e3a $s_j-s_{i-1}$\uff0c\u95ee\u9898\u518d\u6b21\u53d8\u5f62\uff1a\n\n>\u4e00\u4e2a\u957f\u5ea6\u4e3a $n+1$ \u7684\u533a\u95f4 $s_{0\\sim n}$\uff0c\u6c42\u5176\u4e2d\u6709\u591a\u5c11\u5bf9 $i,j(1\\le i<j\\le n)$ \u4f7f $s_j-s_{i-1}>0$\uff1f\u7b54\u6848\u5bf9 $92084931$ \u53d6\u6a21\u3002\n\n$s_j-s_{i-1}>0$ \u663e\u7136\u76f8\u5f53\u4e8e $s_{i-1}<s_j$\uff0c\u6240\u4ee5\u5176\u5b9e\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f**\u987a\u5e8f\u5bf9**\uff08\u5c31\u662f\u628a[\u9006\u5e8f\u5bf9](https://www.luogu.com.cn/problem/P1908)\u53cd\u8fc7\u6765\u6c42\uff09\u3002\n\n\u6c42\u987a\u5e8f\u5bf9\u7684\u65b9\u6cd5\u5f88\u591a\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u4e2a**\u503c\u57df\u5206\u5757**\u505a\u6cd5\uff0c\u8c8c\u4f3c\u6bd4\u6743\u503c\u7ebf\u6bb5\u6811\u597d\u5199\u4e00\u70b9\u3002\n\n## \u4ee3\u7801\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\sqrt n)$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nlong long read(){\n    long long x=0,f=1;char ch=getchar();\n    while(!isdigit(ch)){if(ch=='-') f=-1;ch=getchar();}\n    while(isdigit(ch)){x=x*10+ch-48;ch=getchar();}\n    return x*f;\n}\nvoid write(long long x){\n    if(x<0) putchar('-'),x=-x;\n    if(x>9) write(x/10);\n    putchar(x%10+'0');\n}\nconst int N=2e5+10;\nconst ll mod=92084931;\nint n;\nll m,a[N],s[500],len,v[N],sum;\nint discrete(int n,ll *a){\n    int b[N];\n    for(int i=1;i<=n;i++)\n        b[i]=a[i];\n    sort(b+1,b+n+1);\n    int tot=unique(b+1,b+n+1)-(b+1);\n    for(int i=1;i<=n;i++)\n        a[i]=lower_bound(b+1,b+tot+1,a[i])-b;\n    return tot;\n}\nll ask(int w){\n\tint k=w/len;\n\tll ans=0;\n\tfor(int i=0;i<k;i++)\n\t\tans=(ans+s[i])%mod;\n\tfor(int i=k*len;i<w;i++)\n\t\tans=(ans+v[i])%mod;\n\treturn ans;\n}\nvoid add(int w){\n\tv[w]++;\n\ts[w/len]++;\n}\nint main(){\n\tn=read()+1;m=read();//\u628a\u4e0b\u6807\u4ece2\u5f00\u59cb\u7edf\u8ba1\uff0c\u8fd9\u6837\u65b9\u9762\u5728\u524d\u9762\u63d2\u51650 \n\tfor(int i=2;i<=n;i++)\n\t\ta[i]=read()-m+a[i-1];//\u628aa\u6570\u7ec4\u76f4\u63a5\u5f53\u524d\u7f00\u548c\u7528 \n\tint tot=discrete(n,a);//\u79bb\u6563\u5316 \n\tlen=sqrt(tot);\n\tadd(a[1]);//\u63d2\u51650 \n\tfor(int i=2;i<=n;i++){\n\t\tsum=(sum+ask(a[i]))%mod;\n\t\tadd(a[i]);\n\t}\n\twrite(sum);\n    return 0;\n}\n```\n",
        "postTime": 1631712848,
        "uid": 419144,
        "name": "chenjunxiu",
        "ccfLevel": 7,
        "title": "P2804 \u795e\u79d8\u6570\u5b57"
    },
    {
        "content": "# \u8fd9\u9053\u9898\u8ddf\u5b8c\u5168\u6ca1\u5fc5\u8981\u626f\u5230\u9006\u5e8f\u5bf9\u4e0a\u9762\uff1b\n\n\u603b\u4f53\u601d\u8def\u548c\u697c\u4e0a\u7684\u4e00\u6837\uff1b\n\n\u4f46\u662f\u5c31\u662f\u540e\u9762\u7684\u90a3\u51e0\u53e5\u8bdd\uff0c\u8ba9\u6211\u5341\u5206\u7591\u60d1\uff0c\n\n\u5c31\u662f\u8fd9\u51e0\u53e5\n\n\u201c \u81f3\u6b64\uff0c\u95ee\u9898\u5df2\u7ecf\u975e\u5e38\u6e05\u6670\u4e86\n\n\u95ee\u9898\u8f6c\u5316\u4e3a\u6c42S[j]\u4e4b\u524d\u6709\u591a\u5c11\u4e2aS[i]>S[j],\u628a\u76f8\u5bf9\u4e8e\u6bcf\u4e00\u4e2aS[j]\u7684\u7b54\u6848\u4e2a\u6570\u76f8\u52a0\u5c31\u662fans\n\n\u4e5f\u5c31\u662f\u6c42\u524d\u7f00\u548c\u6570\u5217S\u7684\u9006\u5e8f\u5bf9  \u201d\n\n\u8fd9\u660e\u660e\u662f\u987a\u5e8f\u5bf9\uff0c\u4e3a\u5565\u8981\u8f6c\u4e3a\u9006\u5e8f\u5bf9\u5462\uff1f\uff1f\uff1f\n\n\u5b8c\u5168\u53ef\u4ee5\u7528\u6743\u503c\u7ebf\u6bb5\u6811\u6c42\u89e3\u554a\uff1b\n\n```cpp\n#include<bits/stdc++.h>\n#define LL long long\n#define pa pair<int,int>\n#define lson k<<1\n#define rson k<<1|1\n#define N 500100\n#define M 200010\nusing namespace std;\nconst LL mod=92084931;\nint n,m;\nint z;\nLL sum;\nint s[M];//\u5dee\u503c\u524d\u7f00\u548c \nint a[M],b[M];\nstruct Node{\n\tint l,r,w;\n}tree[M<<2];\ninline void build(int k,int ll,int rr){\n\ttree[k].w=0,tree[k].l=ll,tree[k].r=rr;\n\tif(ll==rr) return;\n\tint mid=(ll+rr)>>1;\n\tbuild(lson,ll,mid);\n\tbuild(rson,mid+1,rr);\n}\ninline int ask(int k){\n\tif(tree[k].l==tree[k].r) return tree[k].w;\n\tint s=0;\n\tint mid=(tree[k].l+tree[k].r)>>1;\n\tif(z<=mid) s+=ask(lson);//\u641c\u7d22\u5de6\u5b50\u6811\n\telse s+=ask(rson)+tree[lson].w;//\u641c\u7d22\u53f3\u5b50\u6811\uff0c\u5de6\u5b50\u6811\u76f4\u63a5\u76f8\u52a0 \n\treturn s; \n}\ninline void add(int k){\n\tif(tree[k].l==tree[k].r){\n\t\ttree[k].w++;\n\t\treturn;\n\t}\n\tint mid=(tree[k].l+tree[k].r)>>1;\n\tif(z<=mid) add(lson);\n\telse add(rson);\n\ttree[k].w=tree[lson].w+tree[rson].w;\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tbuild(1,1,n);\n\tint x; \n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&x);\n\t\ts[i]=x-m;\n\t\ts[i]+=s[i-1];\t\n\t\ta[i]=s[i];\n\t\tb[i]=s[i];\n\t}\n\tsort(b+1,b+n+1);\n\tint len=unique(b+1,b+n+1)-b-1;\n\tfor(int i=1;i<=n;i++){//\u79bb\u6563\u5316\uff0c\u6709\u8d1f\u6570\uff1b \n\t    int pos=lower_bound(b+1,b+len+1,s[i])-b;\n\t    s[i]=pos;\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tz=s[i]-1;\n\t\tsum=sum+(LL)ask(1);//\u67e5\u627e\u5c0f\u4e8e\u7b49\u4e8es[i]-1\u7684\u6570;\n\t\tif(a[i]>0) sum++;//\u76f8\u5f53\u4e8e1\u5230i\u7684\u5e73\u5747\u6570\u5927\u4e8em \n\t\tsum%=mod;\n\t\tz=s[i];\n\t\tadd(1);\n\t}\n\tcout<<sum<<endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1571468286,
        "uid": 211144,
        "name": "waOooo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2804 \u3010\u795e\u79d8\u6570\u5b57\u3011"
    },
    {
        "content": "# \u524d\u8a00\n\n\u4e8c\u5206\u9898\u5355\u4e2d\u7684\u4e0d\u662f\u7279\u522b\u4e0e\u4e8c\u5206\u6cbe\u8fb9\u7684\u9898\u76ee\u3002\n\n\u5176\u5b9e\u5c31\u4e00\u5f52\u5e76\u6392\u5e8f\u6c42\u987a\u5e8f\u5bf9\u3002\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u8fd8\u6709\u4eba\u5199\u6743\u503c\u7ebf\u6bb5\u6811\uff0c\u9ebb\u70e6\u6b7b\u4e86\u3002\n\n# \u6b63\u6587\n\n\u5173\u4e8e\u533a\u95f4\u5e73\u5747\u6570\u7684\u95ee\u9898\uff0c\u6700\u597d\u89e3\u51b3\u5de5\u5177\u662f\u4ec0\u4e48\uff1f\n\n\u80af\u5b9a\u662f\u6bcf\u4e00\u4e2a\u6570\u90fd\u51cf\u53bb\u5e73\u5747\u6570\u554a\u3002\n\n\u4e8e\u662f\u6211\u4eec\u60f3\u5230\u53ea\u8981\u6bcf\u4e00\u4e2a\u6570\u90fd\u51cf\u53bb\u5e73\u5747\u6570\u540e\u7684\u65b0\u533a\u95f4\u7684\u548c\u5927\u4e8e\u96f6\uff0c\u90a3\u4e48\u5b83\u5c31\u5408\u6cd5\u4e86\u3002\n\n\u5c1d\u8bd5\u7528\u524d\u7f00\u548c\u7ef4\u62a4\u65b0\u7684\u533a\u95f4\u5b50\u6bb5\u548c\uff0c\u90a3\u4e48\u5f53\uff1a\n\n$$\nsum_r - sum_{l - 1} > 0\n$$\n\n\u533a\u95f4 $[l, r]$ \u5c31\u662f\u5408\u6cd5\u7684\u3002\n\n\u79fb\u9879\u53ef\u5f97\uff1a\n\n$$\nsum_r > sum_{l - 1}\n$$\n\n\u90a3\u4e48\u8fd9\u7b54\u6848\u4e0d\u5c31\u662f\u987a\u5e8f\u5bf9\u4e2a\u6570\u5417\uff1f\n\n\u95ee\u9898\u5c31\u53d8\u5f97\u5c31\u5f88\u7b80\u5355\u8fa3\u3002\u590d\u6742\u5ea6 $\\mathcal{O}(N \\log_2 N)$, \u53ef\u4ee5\u901a\u8fc7\u6b64\u9898\u3002\n\n# \u4ee3\u7801\n\n``` cpp\n#include <bits/stdc++.h>\n#define MOD (92084931)\nusing namespace std;\n\nint N, M, ans;\nint arr[200005], sum[200005], tmp[200005];\n\nvoid merge(int l, int r)\n{\n    int lp, rp, p;\n    int mid = (l + r) >> 1;\n    lp = l, rp = mid + 1, p = l - 1;\n    while(lp <= mid && rp <= r)\n    {\n        if(sum[lp] < sum[rp])\n            ans = (ans + (mid - lp + 1)) % MOD, \n            tmp[++ p] = sum[rp ++];\n        if(sum[lp] >= sum[rp])\n            tmp[++ p] = sum[lp ++];\n    }\n\n    while(lp <= mid) tmp[++ p] = sum[lp ++];\n    while( rp <= r ) tmp[++ p] = sum[rp ++];\n    for(int i = l; i <= r; ++ i) \n        sum[i] = tmp[i];\n}\n\nvoid merge_sort(int l, int r)\n{\n    if(l < r)\n    {\n        int mid = (l + r) >> 1;\n        merge_sort(   l   , mid);\n        merge_sort(mid + 1,  r );\n        merge(l, r);\n    }\n}\n\nint main()\n{\n    cin >> N >> M;\n    for(int i = 1; i <= N; ++ i)\n        cin >> arr[i], arr[i] -= M, sum[i] = sum[i - 1] + arr[i];\n\n    merge_sort(0, N); // Caution: l - 1!!!!\n    cout << ans << endl;\n    return 0;\n}\n```\n\n# \u540e\u8a00\n\n\u5173\u4e8e\u533a\u95f4\u5e73\u5747\u6570\u7684\u95ee\u9898\uff0c\u6bcf\u4e00\u4e2a\u6570\u90fd\u51cf\u53bb\u5e73\u5747\u6570\u7684\u505a\u6cd5\u96c0\u98df\u5f88\u5b9e\u7528\u3002",
        "postTime": 1657155793,
        "uid": 224558,
        "name": "JackMerryYoung",
        "ccfLevel": 5,
        "title": "P2804 \u795e\u79d8\u6570\u5b57 \u9898\u89e3"
    },
    {
        "content": "## Subject\n[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2804)\n\n## Analysis\n\u9898\u76ee\u6d89\u53ca\u5230\u533a\u95f4\u548c\uff0c\u6211\u4eec\u8003\u8651\u4f7f\u7528\u524d\u7f00\u548c\u3002\n\n\u9898\u76ee\u8981\u6c42\u7684\u662f\u6709\u591a\u5c11\u4e2a\u533a\u95f4 $[L,R]$ \u6ee1\u8db3 $\\dfrac{sum[R]-sum[L-1]}{R-L+1}>M$\uff0c\u4e5f\u5c31\u662f $sum[R]-sum[L-1]>(R-L+1)\\times M$\u3002\n\n\u5c06\u6bcf\u4e00\u4e2a\u6570\u90fd\u51cf\u53bb $M$\uff0c\u524d\u7f00\u548c\u76f8\u5e94\u5730\u53d8\u5316\uff0c\u5c31\u53d8\u6210\u4e86 $sum[R]-sum[L-1]>0$\uff0c\u5373 $S[L-1]<sum[R]$\uff0c\u5c31\u53d8\u6210\u4e86\u5bf9\u4e8e\u524d\u7f00\u548c\u6570\u7ec4\u6c42\u987a\u5e8f\u5bf9\u3002\n\n\u6211\u4eec\u90fd\u4f1a\u6c42\u9006\u5e8f\u5bf9\u3002\u5bf9\u6bd4\u987a\u5e8f\u5bf9\u548c\u9006\u5e8f\u5bf9\u7684\u6761\u4ef6\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u5c06\u539f\u5e8f\u5217\u5012\u8fc7\u6765\uff0c\u6c42\u9006\u5e8f\u5bf9\uff0c\u5c31\u662f\u539f\u5e8f\u5217\u7684\u987a\u5e8f\u5bf9\u3002\u7528\u6811\u72b6\u6570\u7ec4\u5b9e\u73b0\uff0c\u590d\u6742\u5ea6 $O(n \\log n)$\u3002\n\n\u6ce8\u610f\uff0c\u8fd9\u91cc\u9700\u8981\u5c06 $sum[0]$ \u52a0\u8fdb\u53bb\uff0c\u624d\u80fd\u6c42\u51fa\u5305\u542b $a_1$ \u7684\u7684\u533a\u95f4\u548c\u3002\n\n## Code\n```cpp\n#include<cmath>\n#include<vector>\n#include<cstdio>\n#include<iostream>\n#include<cstring>\n#include<algorithm>\nusing namespace std;\nconst int M=2e5+10;\nconst int inf=0x3f3f3f3f;\nconst int Mod=92084931;\ninline int Read(void){\n    int s=0,f=1;char c=getchar();\n    while(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\n    while(isdigit(c)){s=s*10+c-48;c=getchar();}\n    return s*f;    \n}\nstruct Node{\n    int sum,idx;\n    bool operator<(const Node &x)const{\n        if(sum==x.sum) return idx<x.idx;\n        return sum<x.sum;\n    }\n}num[M];\nint n,x,m,ans;\nint sum[M];\nint lowbit(int x){\n    return x&(-x);\n}\nvoid Add(int x,int val){\n    for(int i=x;i<=n+1;i+=lowbit(i))\n        sum[i]=(sum[i]+val)%Mod;\n    return;\n}\nint Query(int x){\n    int ans=0;\n    for(int i=x;i;i-=lowbit(i))\n        ans=(ans+sum[i])%Mod;\n    return ans;\n}\nsigned main(void){\n    n=Read();m=Read();\n    for(int i=2;i<=n+1;i++){\n        x=Read();\n        num[i].sum=num[i-1].sum+x-m;\n    }\n    for(int i=1;i<=n+1;i++)\n        num[i].idx=n-i+2;\n    sort(num+1,num+2+n);\n    for(int i=1;i<=n+1;i++){\n        Add(num[i].idx,1);\n        ans=(ans+i-Query(num[i].idx))%Mod;\n    }\n    printf(\"%d\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1631348859,
        "uid": 246005,
        "name": "StupidSeven",
        "ccfLevel": 4,
        "title": "P2804"
    }
]
[
    {
        "content": "**\u622a\u6b62\u672c\u6587\u63d0\u4ea4\uff082022.4.2\uff09\u524d\uff0c\u6d1b\u8c37\u9898\u89e3\u533a\u7684\u4e09\u7bc7\u535a\u5ba2\u8bc1\u660e\u5747\u4e3a\u9519\u8bef\u7684\uff0c\u5e0c\u671b\u7ba1\u7406\u5458\u770b\u5230\u540e\u64a4\u6389\u3002**\n\n\u56e0\u4e3a\u671f\u671b\u7684\u7ebf\u6027\u6027\uff0c\u7b54\u6848\u5373\u4e3a $\\sum\\limits_{i=2}^k(1-a_{i-1})a_{i}$\u3002\n\n\u9898\u610f\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u7ed9 $m=\\sum c_i$ \u4e2a $[0,1]$ \u95f4\u7684\u5b9e\u6570\uff0c\u4ece\u4e2d\u9009\u51fa $k$ \u4e2a\u6392\u6210\u4e00\u4e2a\u5e8f\u5217 $a$\uff0c\u6700\u5c0f\u5316 $\\sum\\limits_{i=2}^k(1-a_{i-1})a_{i}$\uff0c\u5047\u8bbe $k\\ge 2$\u3002\n\n**\u5f15\u7406 1\uff1a\u9009\u51fa\u7684 $k$ \u4e2a\u6570\u6309\u7167\u5355\u8c03\u4e0d\u589e\u6392\u5217\u3002**\n\n\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7f51\u4f20\u7684\u5bf9\u4e8e\u964d\u5e8f\u6570\u7ec4\u4ea4\u6362\u4e24\u4e2a\u6570\u540e\u8bc1\u660e\u7b54\u6848\u53d8\u5927\u7684\u8bc1\u6cd5\u662f\u7edd\u5bf9\u9519\u8bef\u7684\uff0c\u8fd9\u53ea\u80fd\u8bc1\u660e\u964d\u5e8f\u6570\u7ec4\u8981\u4f18\u4e8e\u964d\u5e8f\u6570\u7ec4\u4ea4\u6362\u4e24\u4e2a\u6570\u7684\u7b54\u6848\uff0c\u4e0d\u80fd\u8bc1\u660e\u964d\u5e8f\u6570\u7ec4\u6bd4\u5176\u4ed6\u6240\u6709\u60c5\u51b5\u66f4\u4f18\uff0c~~\u5c5e\u4e8e\u662f\u5b66 exchange argument \u6ca1\u5b66\u4f1a\u8fd8\u4e71\u7528\u4e86~~\u3002\n\n\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u9009\u5b9a $k$ \u4e2a\u6570\u4e3a $a_1,\\cdots,a_k$\uff0c\u8981\u4e3a\u8fd9\u4e9b\u6570\u5b9a\u5e8f\uff0c\u6b64\u65f6 $\\sum a_i$ \u662f\u5b9a\u503c\uff0c\u9898\u76ee\u8981\u6c42\u6700\u5c0f\u5316 $\\sum\\limits_{i=2}^k(a_i-a_{i-1}a_{i})$\uff0c\u6211\u4eec\u53ef\u4ee5\u8f6c\u4e3a\u6700\u5927\u5316 $\\sum\\limits_{i=1}^ka_i-\\sum\\limits_{i=2}^k(a_i-a_{i-1}a_{i})=1\\times a_1+\\sum\\limits_{i=2}^ka_{i-1}a_{i}$\u3002\n\n\u5047\u8bbe $a$ \u964d\u5e8f\u6392\u5e8f\u540e\u7684\u6570\u7ec4\u4e3a $b$\u3002\n\n\u7531\u6392\u5e8f\u4e0d\u7b49\u5f0f\u5f97 $1\\times a_1+\\sum\\limits_{i=2}^ka_{i-1}a_{i}\\le 1\\times b_1+\\sum\\limits_{i=2}^kb_{i-1}b_{i}$\uff0c\u6240\u4ee5\u9009\u51fa\u7684 $k$ \u4e2a\u6570\u4e00\u5b9a\u6309\u7167\u5355\u8c03\u4e0d\u589e\u6392\u5217\u3002\n\n**\u5f15\u7406 2\uff1a\u9009\u51fa\u7684 $k$ \u4e2a\u6570\u662f\u6240\u6709\u6570\u964d\u5e8f\u6392\u5e8f\u540e\u7684\u4e00\u6bb5\u524d\u7f00\u52a0\u4e00\u6bb5\u540e\u7f00\u3002**\n\n\u6211\u4eec\u8bbe\u9009\u62e9\u7684\u6570\u4e0b\u6807\u6309\u987a\u5e8f\u4e3a $i_1,\\cdots,i_k$\uff0c\u6240\u6709 $m$ \u4e2a\u6570\u6392\u5e8f\u540e\u7684\u6570\u5217\u4e3a $x$\u3002\n\n\u82e5$i_1\\ne 1$\uff0c\u663e\u7136\u6709 $(1-x_1)x_{i_2}\\le(1-x_{i_1})x_{i_2}$\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4ee4 $i_1=1$\u3002\n\n\u82e5$i_k\\ne m$\uff0c\u663e\u7136\u6709 $(1-x_{i_{k-1}})x_m\\le(1-x_{i_{k-1}})x_{i_k}$\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4ee4 $i_k=m$\u3002\n\n\u6240\u4ee5\u4e00\u5b9a\u4f1a\u9009\u62e9\u4e00\u6bb5\u524d\u7f00\u548c\u4e00\u6bb5\u540e\u7f00\u3002\n\n\u5047\u8bbe\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u6570\u4e0d\u5c5e\u4e8e\u524d\u7f00\u6216\u540e\u7f00\u3002\n\n\u4e0d\u5931\u4e00\u822c\u6027\u5730\uff0c\u6211\u4eec\u8bbe\u9009\u62e9\u7684\u524d\u7f00\u4e3a $1\\sim l$\uff0c\u9009\u62e9\u7684\u540e\u7f00\u4e3a $m-r+1\\sim m$\u3002\n\n\u8003\u8651\u5c06 $i_{l+1}$ \u66ff\u6362\u4e3a $l+1$\uff0c\u6b64\u65f6\u7b54\u6848\u4f1a\u53d8\u5316 $(1-x_{l})x_{l+1}+(1-x_{l+1})x_{i_{l+2}}-(1-x_{l})x_{i_{l+1}}-(1-x_{i_{l+1}})x_{i_{l+2}}=(1-x_l-x_{i_{l+2}})(x_{l+1}-x_{i_{l+1}})$\uff0c\u7531\u4e8e $x_{l+1}\\ge x_{i_{l+1}}$\uff0c\u6240\u4ee5\u5f53 $1-x_l-x_{i_{l+2}}\\le 0$ \u65f6\uff0c\u66ff\u6362\u4e0d\u4f1a\u66f4\u52a3\u3002\n\n\u8003\u8651\u5c06 $i_{k-r}$ \u66ff\u6362\u4e3a $m-r$\uff0c\u6b64\u65f6\u7b54\u6848\u4f1a\u53d8\u5316 $(1-x_{i_{k-r-1}})x_{m-r}+(1-x_{m-r})x_{m-r+1}-(1-x_{i_{k-r-1}})x_{i_{k-r}}-(1-x_{i_{k-r}})x_{m-r+1}=(1-x_{i_{k-r-1}}-x_{m-r+1})(x_{m-r}-x_{i_{k-r}})$\uff0c\u7531\u4e8e $x_{m-r}\\le x_{i_{k-r}}$\uff0c\u6240\u4ee5\u5f53 $1-x_{i_{k-r-1}}-x_{m-r+1}\\ge 0$ \u65f6\uff0c\u66ff\u6362\u4e0d\u4f1a\u66f4\u52a3\u3002\n\n\u63a5\u4e0b\u6765\u53ea\u9700\u8bc1\u660e $x_l+x_{i_{l+2}}\\ge 1$ \u548c $x_{i_{k-r-1}}+x_{m-r+1}\\le 1$ \u5fc5\u6709\u4e00\u4e2a\u6210\u7acb\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u8fdb\u884c\u82e5\u5e72\u6b21\u8c03\u6574\uff0c\u5c06\u4e0d\u5728\u524d\u540e\u7f00\u4e0a\u7684\u6570\u90fd\u653e\u5230\u524d\u7f00\u6216\u540e\u7f00\u4e0a\uff0c\u663e\u7136\u8c03\u6574\u5728\u6709\u9650\u6b65\u5185\u4e00\u5b9a\u7ed3\u675f\u3002\n\n\u663e\u7136\u6709 $x_l+x_{m-r+1}\\ge 1$ \u548c $x_l+x_{m-r+1}\\le 1$ \u5fc5\u6709\u4e00\u4e2a\u6210\u7acb\u3002\n\n\u82e5 $x_l+x_{m-r+1}\\ge 1$ \uff0c\u7531\u4e8e $x_{i_{l+2}}\\ge x_{m-r+1}$\uff0c\u6240\u4ee5 $x_l+x_{i_{l+2}}\\ge 1$ \u6210\u7acb\u3002\n\n\u82e5 $x_l+x_{m-r+1}\\le 1$ \uff0c\u7531\u4e8e $x_{i_{k-r-1}}\\le x_l$\uff0c\u6240\u4ee5  $x_{i_{k-r-1}}+x_{m-r+1}\\le 1$ \u6210\u7acb\u3002\n\n\u5728\u77e5\u9053\u8fd9\u4e24\u4e2a\u6027\u8d28\u540e\u8fd9\u9053\u9898\u5c31\u53ef\u4ee5\u505a\u4e86\uff0c $x_1$ \u548c $x_m$ \u5fc5\u9009\uff0c\u7ef4\u62a4\u5f53\u524d\u9009\u62e9\u7684\u524d\u7f00\u548c\u540e\u7f00\uff0c\u5229\u7528\u5f15\u7406 2 \u4e2d\u7684\u5f0f\u5b50\u5224\u65ad\u5f53\u524d\u5e94\u8be5\u6269\u5927\u524d\u7f00\u8fd8\u662f\u540e\u7f00\uff0c\u7531\u4e8e\u9009\u62e9\u76f8\u7b49\u7684\u6570\u4e0d\u4f1a\u6539\u53d8  $x_l+x_{m-r+1}$\uff0c\u6240\u4ee5\u4e00\u6b21\u53ef\u4ee5\u628a\u76f8\u7b49\u7684\u6570\u5168\u9009\u4e86\uff0c\u590d\u6742\u5ea6\u74f6\u9888\u5728\u6392\u5e8f $O(n\\log n)$\u3002\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<functional>\n#include<utility>\nvoid solve(){\n\tint n,k;\n\tscanf(\"%d %d\",&n,&k);\n\tstd::pair<long double,int> p[100010];\n\tfor(int i=1,x,y;i<=n;i++){\n\t\tscanf(\"%d/%d %d\",&x,&y,&p[i].second),p[i].first=1.*x/y;\n\t\tif(!p[i].second) --n,--i;\n\t}\n\tstd::sort(p+1,p+n+1,std::greater());\n\tif(k==1) return puts(\"0.000000\"),void();\n\tlong double pl=p[1].first,pr=p[n].first;\n\tint l=1,r=n;\n\tk-=2,p[1].second--,p[n].second--;\n\tlong double ans=0;\n\twhile(k){\n\t\twhile(!p[l].second) ++l;\n\t\twhile(!p[r].second) --r;\n\t\tint x;\n\t\tif(pl+pr>=1){\n\t\t\tif(p[l].first==pl) x=std::min(k,p[l].second);\t\n\t\t\telse x=1;\n\t\t\tk-=x,p[l].second-=x;\n\t\t\tans+=(1-pl)*p[l].first+(x-1)*(1-p[l].first)*p[l].first;\n\t\t\tpl=p[l].first;\n\t\t}else{\n\t\t\tif(p[r].first==pr) x=std::min(k,p[r].second);\n\t\t\telse x=1;\n\t\t\tk-=x,p[r].second-=x;\n\t\t\tans+=(1-p[r].first)*pr+(x-1)*(1-p[r].first)*p[r].first;\n\t\t\tpr=p[r].first;\n\t\t}\n\t}\n\tans+=(1-pl)*pr;\n\tprintf(\"%.6Lf\\n\",ans);\n}\nint main(){\n\tint T;\n\tscanf(\"%d\",&T);\n\twhile(T--) solve();\n\treturn 0;\n}\n```\n\n",
        "postTime": 1648871325,
        "uid": 55707,
        "name": "gxy001",
        "ccfLevel": 9,
        "title": "P4110 [HEOI2015]\u5c0fL\u7684\u767d\u65e5\u68a6"
    }
]
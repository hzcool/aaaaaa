[
    {
        "content": "[\u4f20\u9001\u95e8 qwq](https://www.luogu.com.cn/problem/P8200)\n\n\u8fd9\u662f\u4e00\u9053\u9ec4\u9898\uff0c\u663e\u7136\u51fa\u9898\u4eba\u60f3\u8ba9\u6211\u4eec\u7528\u5f88\u7b80\u5355\u7684\u529e\u6cd5\u79d2\u6389\u8fd9\u9053\u9898\uff0c\u6240\u4ee5\u6211\u4f7f\u7528\u6811\u5256\u5957\u7ebf\u6bb5\u6811\u3002\n\n\u8003\u8651\u5f02\u6216\u7684\u6027\u8d28\uff0c\u5982\u679c\u4e00\u6761\u8fb9\u7684\u6743\u503c\u88ab\u5f02\u6216\u4e24\u904d\uff0c\u5c31\u76f8\u5f53\u4e8e\u6ca1\u5f02\u6216\u3002\n\n\u518d\u6765\u770b\u8fd9\u9053\u9898\u3002\u5bf9\u4e8e\u4e00\u6b21\u8be2\u95ee $(x,y,k)$\uff0c\u6211\u4eec\u4efb\u53d6\u4e00\u4e2a\u70b9 $t$\uff0c\u5982\u679c $t$ \u4e0d\u5728 $x$ \u5230 $y$ \u7684\u94fe\u4e0a\uff0c\u8bbe\u6cbf\u7740 $t$ \u5411\u4e0a\u6216\u5411\u4e0b\u8d70\uff0c\u9996\u6b21\u5230\u8fbe $x$ \u5230 $y$ \u7684\u94fe\u4e0a\u65f6\u5904\u4e8e\u70b9 $p$\uff0c\u5219\uff1a\n\n$$\ndis_{x,t}\\oplus dis_{y,t}=dis_{x,p}\\oplus dis_{y,p}\\oplus dis_{t,p}\\oplus dis_{t,p}=dis_{x,y}\n$$\n\n\u5982\u679c $t$ \u5728 $x$ \u5230 $y$ \u7684\u94fe\u4e0a\uff0c\u663e\u7136\uff1a\n\n$$\ndis_{x,t}\\oplus dis_{y,t}=dis_{x,y}\n$$\n\n\u53d1\u73b0\u67ff\u5b50\u662f\u4e00\u6837\u7684\u3002\n\n\u4e8e\u662f\u53d1\u73b0\u5bf9\u4e8e\u8fd9\u4e2a\u67e5\u8be2\uff0c\u6211\u4eec\u53ea\u8981\u5224\u65ad $x$ \u5230 $y$ \u8fd9\u6761\u94fe\u4e0a\u7684\u5f02\u6216\u548c\u662f\u5426\u7b49\u4e8e $k$ \u5c31\u597d\u4e86\u3002\u6811\u5256\u5957\u7ebf\u6bb5\u6811\uff0c\u7ebf\u6bb5\u6811\u7ef4\u62a4\u533a\u95f4\u5f02\u6216\u548c\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nunsigned long long read(){\n\tunsigned long long ss=0,ww=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-')\n\t\t\tww=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9'){\n\t\tss=ss*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn ss*ww;\n}\nint readi(){\n\tint ss=0,ww=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){\n\t\tif(ch=='-')\n\t\t\tww=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9'){\n\t\tss=ss*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn ss*ww;\n}\nint n,m;\nconst int N=500010;\nint head[N],nex[N*2],to[N*2],cnt;\nunsigned long long e[N*2];\nvoid add(int x,int y,unsigned long long z){\n\tcnt++;\n\tnex[cnt]=head[x];\n\tto[cnt]=y;\n\te[cnt]=z;\n\thead[x]=cnt;\n}\nunsigned long long a[N],t[N];\nunsigned long long st[N*4];\nint sz[N],son[N],tp[N],fa[N],dfn[N],dep[N],tot;\nvoid dfs1(int x,int f){\n\tfa[x]=f;\n\tdep[x]=dep[fa[x]]+1;\n\tsz[x]=1;\n\tint maxn=-1;\n\tfor(int i=head[x];i;i=nex[i]){\n\t\tint y=to[i];\n\t\tif(y==f)\n\t\t\tcontinue;\n\t\tt[y]=e[i];\n\t\tdfs1(y,x);\n\t\tsz[x]+=sz[y];\n\t\tif(sz[y]>maxn){\n\t\t\tmaxn=sz[y];\n\t\t\tson[x]=y;\n\t\t}\n\t}\n}\nvoid dfs2(int x,int top){\n\ttp[x]=top;\n\ttot++;\n\tdfn[x]=tot;\n\ta[tot]=t[x];\n\tif(son[x])\n\t\tdfs2(son[x],top);\n\tfor(int i=head[x];i;i=nex[i]){\n\t\tint y=to[i];\n\t\tif(y==fa[x]||y==son[x])\n\t\t\tcontinue;\n\t\tdfs2(y,y);\n\t}\n}\nunsigned long long res;\nvoid build(int root,int l,int r){\n\tif(l==r){\n\t\tst[root]=a[l];\n\t\treturn;\n\t}\n\tint mid=(l+r)/2;\n\tbuild(root*2,l,mid);\n\tbuild(root*2+1,mid+1,r);\n\tst[root]=st[root*2]^st[root*2+1];\n}\nvoid ask(int root,int l,int r,int x,int y){\n\tif(l>=x&&r<=y){\n\t\tres=(res^st[root]);\n\t\treturn;\n\t}\n\tint mid=(l+r)/2;\n\tif(mid>=x)\n\t\task(root*2,l,mid,x,y);\n\tif(mid+1<=y)\n\t\task(root*2+1,mid+1,r,x,y);\n}\nint main(){\n\tn=readi();\n\tm=readi();\n\tfor(int i=1;i<n;i++){\n\t\tint x,y;\n\t\tunsigned long long z;\n\t\tx=readi();\n\t\ty=readi();\n\t\tz=read();\n\t\tadd(x,y,z);\n\t\tadd(y,x,z);\n\t}\n\tdfs1(1,1);\n\tdfs2(1,1);\n\tbuild(1,1,n);\n\tfor(int i=1;i<=m;i++){\n\t\tint x,y;\n\t\tunsigned long long k;\n\t\tx=readi();\n\t\ty=readi();\n\t\tk=read();\n\t\tres=0;\n\t\twhile(tp[x]!=tp[y]){\n\t\t\tif(dep[tp[x]]<dep[tp[y]])\n\t\t\t\tswap(x,y);\n\t\t\task(1,1,n,dfn[tp[x]],dfn[x]);\n\t\t\tx=fa[tp[x]];\n\t\t}\n\t\tif(x!=y){\n\t\t\tif(dep[x]>dep[y])\n\t\t\t\tswap(x,y);\n\t\t\task(1,1,n,dfn[x]+1,dfn[y]);\n\t\t}\n\t\tif(res==k)\n\t\t\tprintf(\"YES\\n\");\n\t\telse\n\t\t\tprintf(\"NO\\n\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1647092319,
        "uid": 140360,
        "name": "LKawaii",
        "ccfLevel": 0,
        "title": "P8200 \u9898\u89e3"
    },
    {
        "content": "## F1. \u751f\u6d3b\u5728\u6811\u4e0a\uff08easy version\uff09\n\n**\u9898\u610f**\uff1a\u7ed9\u5b9a\u4e00\u68f5\u6811\uff0c\u70b9\u6570\u4e3a $n$\uff0c\u8fb9\u6709\u8fb9\u6743\u3002\u5b9a\u4e49\u6811\u4e0a\u4e24\u70b9\u95f4\u8def\u5f84\u7684\u6743\u503c\u662f\u5176\u7b80\u5355\u8def\u5f84\u4e0a\u8fb9\u6743\u7684\u5f02\u6216\u548c\u3002\u6709 $q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u7ed9\u5b9a\u4e24\u4e2a\u8282\u70b9 $x, y$ \u67e5\u8be2\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u70b9 $u$\uff0c\u4f7f $u$ \u5230 $x$ \u548c $u$ \u5230 $y$ \u7684\u8def\u5f84\u7684\u6743\u503c\u7684\u5f02\u6216\u4e3a $k$\u3002\n\n$1 \\leq n,q \\leq 5 \\times 10^5$\uff0c$0 \\leq w_i \\lt 2^{64}$\u3002\n\n**\u5173\u952e\u8bcd**\uff1a\u524d\u7f00\u548c\uff0c\u6784\u9020\u3002\n\n**\u53c2\u8003\u96be\u5ea6**\uff1a\u9ec4+/\u7eff-\u3002\n\n**\u89e3\u6790**\uff1a\uff08\u5982\u679c\u60a8\u5bf9\u62bd\u8c61\u4ee3\u6570\u7684\u76f8\u5173\u6982\u5ff5\u5b8c\u5168\u4e0d\u4e86\u89e3\uff0c\u53ef\u4ee5\u76f4\u63a5\u53bb\u770b\u7b2c\u4e09\u6bb5\u3002\u524d\u4e24\u6bb5\u662f\u5bf9\u7b2c\u4e09\u6bb5\u6240\u8ff0\u7684\u663e\u7136\u7684\u6027\u8d28\u7684\u7b80\u5355\u8bf4\u660e\uff0c\u60a8\u53ef\u4ee5\u9ed8\u8ba4\u8fd9\u4e2a\u7ed3\u8bba\u662f\u6b63\u786e\u7684\uff09\u6ce8\u610f\u5230\u5f02\u6216\u8fd0\u7b97\u6784\u6210\u4e00\u4e2a Abel \u7fa4\uff1a\u5373\u5f02\u6216\u8fd0\u7b97\u6ee1\u8db3\u4ea4\u6362\u5f8b\u3001\u7ed3\u5408\u5f8b\uff0c\u5176\u96f6\u5143\u4e3a 0\uff1b\u5bf9\u6bcf\u4e2a $x$\uff0c\u5b58\u5728\u5176\u9006\u5143 $x$\uff0c\u6ee1\u8db3 $x \\bigoplus x = 0$\u3002\n\n\u6839\u636e\u7ed3\u5408\u5f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u9898\u76ee\u4e2d\u6240\u6c42\u7684\u5f0f\u5b50\u62c6\u5f00\uff0c\u76f4\u63a5\u5199\u4f5c $u$ \u5230 $x$ \u548c $u$ \u5230 $y$ \u7684\u8def\u5f84\u4e0a\u6bcf\u4e00\u6761\u8fb9\u7684\u5f02\u6216\u548c\uff08\u800c\u4e0d\u7528\u5148\u6c42\u4e24\u6761\u8def\u5f84\u7684\u6743\u503c\u518d\u505a\u5f02\u6216\uff09\uff1b\u518d\u6839\u636e\u4ea4\u6362\u5f8b\uff0c\u53ef\u4ee5\u628a\u76f8\u540c\u7684\u8fb9\u4ea4\u6362\u5230\u76f8\u90bb\u7136\u540e\u62ec\u5728\u4e00\u8d77\u8ba1\u7b97\uff1b\u56e0\u4e3a $x$ \u7684\u9006\u5143\u662f\u81ea\u8eab\uff08\u4e5f\u5c31\u662f\u4e00\u4e2a\u6570\u5f02\u6216\u81ea\u8eab\u662f 0\uff09\uff0c\u6240\u4ee5\u4e24\u6761\u8def\u5f84\u4e0a\u76f8\u540c\u7684\u8fb9\u7684\u505a\u5f02\u6216\u7684\u7ed3\u679c 0\u3002\n\n\u7b80\u5355\u6765\u8bf4\uff0c\u5982\u679c $u$ \u5230 $x$ \u548c $u$ \u5230 $y$ \u7684\u8def\u5f84\u4e0a\u7ecf\u8fc7\u4e86\u67d0\u6761\u76f8\u540c\u7684\u8fb9\uff0c\u90a3\u4e48\u8fd9\u6761\u8fb9\u5bf9\u5f02\u6216\u548c\u7684\u8d21\u732e\u4e3a 0\uff0c\u4e8e\u662f\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651\u8def\u5f84\u4e0a\u4e0d\u540c\u7684\u8fb9\u3002\n\n\u663e\u7136\uff0c$u$ \u5230 $x$ \u7684\u8def\u5f84\u548c $u$ \u5230 $y$ \u7684\u8def\u5f84\u603b\u662f\u5148\u7ecf\u8fc7\u82e5\u5e72\u6761\u76f8\u540c\u7684\u8fb9\uff0c\u7136\u540e\u4e0e $(x, y)$ \u6240\u6210\u7684\u94fe\u6709\u4e00\u4e2a\u4ea4\u70b9 $t$\uff0c\u63a5\u7740\u5728\u8fd9\u4e2a\u4ea4\u70b9\u5904\u5206\u5f00\uff0c\u4e00\u4e2a\u8d70\u5411 $x$ \u4e00\u4e2a\u8d70\u5411 $y$\uff0c\u5982\u56fe\uff1a![](https://cdn.luogu.com.cn/upload/image_hosting/x024zkpa.png)\n\n\u56fe\u4e2d\u7ea2\u8272\u8def\u5f84\u662f $u$ \u5230 $x$ \u7684\u8def\u5f84\uff0c\u84dd\u8272\u8def\u5f84\u662f $u$ \u5230 $y$ \u7684\u8def\u5f84\uff0c\u4e8c\u8005\u5728 $(u, t)$ \u90e8\u5206\u662f\u91cd\u590d\u7684\u3002\u4e0d\u96be\u9a8c\u8bc1\uff0c\u65e0\u8bba $u$ \u5728\u54ea\u4e2a\u4f4d\u7f6e\uff0c\u90fd\u6ee1\u8db3\u8fd9\u4e2a\u6027\u8d28\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53d1\u73b0\uff0c\u65e0\u8bba $u$ \u5728\u54ea\u91cc\uff0c$\\mathrm{dis}_{x, u} \\bigoplus \\mathrm{dis}_{x, v}$ \u603b\u7b49\u4e8e $\\mathrm{dis}_{x, y}$\uff0c\u4e5f\u5c31\u662f $x$ \u5230 $y$ \u8def\u5f84\u4e0a\u8fb9\u7684\u5f02\u6216\u548c\u3002\u4e8e\u662f\u95ee\u9898\u8f6c\u5316\u6210\u4e86\u6c42 $\\mathrm{dis}_{x, y}$\u3002\u6211\u4eec\u8bbe $s_x$ \u8868\u793a $x$ \u5230\u6839\u7684\u7b80\u5355\u8def\u5f84\u4e0a\u8fb9\u6743\u7684\u5f02\u6216\u548c\uff0c\u5219 $s_x  \\bigoplus s_y$ \u5373\u4e3a $\\mathrm{dis}_{x, y}$\uff08\u56e0\u4e3a\u4ed6\u4eec\u5230\u6839\u7684\u8def\u5f84\u4e0a\u76f8\u540c\u7684\u90e8\u5206\u505a\u5f02\u6216\u5bf9\u5f02\u6216\u548c\u6ca1\u6709\u8d21\u732e\uff0c\u4e0d\u76f8\u540c\u7684\u90e8\u5206\u6070\u597d\u5c31\u662f $x$ \u5230 $y$ \u7684\u94fe\uff09\u3002\n\n\u663e\u7136 $s$ \u662f\u53ef\u4ee5\u9012\u63a8\u7684\uff1a$s_u = s_{fa} \\bigoplus w_u$\uff0c\u5176\u4e2d $fa$ \u8868\u793a $u$ \u7684\u7236\u8282\u70b9\u3002\u4e8e\u662f\u5728\u6811\u4e0a\u505a\u4e00\u6b21 dfs\uff0c\u6c42\u51fa $s$ \u6570\u7ec4\u5373\u53ef\u3002\u5982\u679c $\\mathrm{dis}_{x, y} = k$\uff0c\u5219 `Yes`\uff0c\u5426\u5219\u8f93\u51fa `No`\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$\u3002\n\n\n(C++)\n\n```cpp\n#include <array>\n#include <vector>\n#include <iostream>\n\nconst int maxn = 1000005;\n\nint n, q;\nstd::array<std::vector<std::pair<int, unsigned long long> >, maxn> e;\nstd::array<unsigned long long, maxn> b;\n\nvoid dfs(const int u, const int f);\n\nint main() {\n  std::ios::sync_with_stdio(false);\n  std::cin.tie(0);\n  std::cin >> n >> q;\n  unsigned long long k;\n  for (int u, v, i = 1; i < n; ++i) {\n    std::cin >> u >> v >> k;\n    e[u].push_back({v, k}); e[v].push_back({u, k});\n  }\n  dfs(1, 0);\n  \n  std::array<std::string, 2> ans{\"nO\", \"yEs\"};\n  for (int i = 1, u, v; i <= q; ++i) {\n    std::cin >> u >> v >> k;\n    std::cout << ans[(b[u] ^ b[v]) == k] << '\\n';\n  }\n}\n\nvoid dfs(const int u, const int f) {\n  for (auto [v, w] : e[u]) if (v != f) {\n    b[v] = b[u] ^ w;\n    dfs(v, u);\n  }\n}\n```\n",
        "postTime": 1647088003,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "P8200"
    },
    {
        "content": "**Upd\uff1a2022.3.13\uff1a\u4fee\u6539\u4e86\u539f\u591a\u4f59\u505a\u6cd5**\n\n\u9898\u76ee\u63cf\u8ff0\u4e0d\u8bf4\u4e86\u3002\u8bbe $d_{a,b}$ \u8868\u793a\u6811\u4e0a\u4e24\u70b9\u8def\u5f84\u5f02\u6216\u548c\u3002\u5047\u8bbe\u4e24\u4e2a\u70b9\u4e3a $x,y$\uff0c\u9898\u76ee\u6240\u8981\u6c42\u7684\u5c31\u662f\u662f\u5426\u5b58\u5728\u4e00\u70b9 $p$ \u4f7f\u5f97 $d_{p,x} \\oplus d_{p,y}=k$\u3002\n\n\u8bbe $z=\\text{LCA}(x,y)$\uff0c\u5219\u4e0a\u9762\u5f0f\u5b50\u8f6c\u5316\u4e3a $d_{p,z} \\oplus d_{z,x} \\oplus d_{p,z} \\oplus d_{z,y}$\u3002\n\n\u6839\u636e\u5f02\u6216\u7684\u6027\u8d28\uff0c$a\\oplus a=0$\uff0c\u4e0a\u5f0f\u5373\u8f6c\u5316\u4e3a $d_{z,x} \\oplus d_{z,y}$\u3002\u6211\u4eec `dfs` \u4e00\u904d\uff0c\u9884\u5904\u7406\u51fa\u4ece\u6839\u8282\u70b9\u5230\u6bcf\u4e2a\u8282\u70b9\u7684\u5f02\u6216\u548c\u3002\u5bb9\u6613\u53d1\u73b0\u8fd9\u4e2a `dfs` \u662f $O(n)$ \u7684\u3002\u6240\u4ee5\u4e0a\u5f0f\u53ef\u4ee5\u7ee7\u7eed\u7b80\u5316\u4e3a $d_{1,x} \\oplus d_{1,z} \\oplus d_{1,y} \\oplus d_{1,z}$\uff0c\u7136\u540e\u5c31\u4f1a\u53d1\u73b0 $d_{1,z}$ \u6070\u597d\u88ab\u6d88\u6389\u4e86\uff0c\u4e8e\u662f\u8fd9\u9898\u5c31\u4e0d\u7528\u6c42 $\\text{LCA}$ \u4e86\uff0c\u76f4\u63a5\u7b97 $d_{1,x} \\oplus d_{1,y}$ \u662f\u5426\u7b49\u4e8e $k$ \u5c31\u884c\u4e86\u3002\n\n\u6ce8\u610f\u4e24\u70b9\uff1a\n\n1\u3001\u8981\u5f00 `unsigned long long`\u3002\n\n2\u3001\u6ce8\u610f\u5f02\u6216\u8fd0\u7b97\u7684\u4f18\u5148\u7ea7\uff08\u5c31\u662f\u56e0\u4e3a\u8fd9\u4e2a\u8003\u573a\u4e0a\u4e00\u76f4\u6ca1\u8fc7\u6837\u4f8b\uff09\u3002\n\n### Code\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int unsigned long long\nint n, m, p, x, y, z, k, h[1000010], s[500010];\nstruct node{\n\tint x, y, z, next;\n}d[1000010];\nvoid add(int x, int y, int z){\n\td[++p].y = y, d[p].z = z, d[p].next = h[x], h[x] = p;\n}\nvoid dfs(int a, int b){\n\tfor (int i=h[a]; i; i=d[i].next){\n\t\tint to = d[i].y;\n\t\tif (to == b) continue;\n\t\ts[to] = s[a] ^ d[i].z;\n\t\tdfs(to, a);\n\t}\n}\nsigned main(){\n\tscanf (\"%llu%llu\", &n, &m);\n\tfor (int i=1; i<n; i++){\n\t\tscanf (\"%llu%llu%llu\", &x, &y, &z);\n\t\tadd(x, y, z);\n\t\tadd(y, x, z);\n\t}\n\tdfs(1, 0);\n\twhile (m --){\n\t\tscanf (\"%llu%llu%llu\", &x, &y, &k);\n\t\tif ((s[x] ^ s[y]) == k) puts (\"Yes\");\n\t\telse puts (\"No\");\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1647098855,
        "uid": 399286,
        "name": "\u82cf\u8054\u5c0f\u6e23",
        "ccfLevel": 0,
        "title": "[\u9898\u89e3] P8200 \u751f\u6d3b\u5728\u6811\u4e0a\uff08easy version\uff09"
    },
    {
        "content": "\n## \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u9897\u6811\uff0c$\\mathrm{dis}_{a, b}$ \u8868\u793a\u70b9 $a$ \u5230 $b$ \u7684\u8def\u5f84\u4e0a\u7684\u8fb9\u6743\u5f02\u6216\u548c\u3002\n\n\u8fdb\u884c $m$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u5bf9\u4e8e\u70b9 $a$ \u548c\u70b9 $b$\uff0c\u662f\u5426\u6709\u4e00\u4e2a $i$ \u6ee1\u8db3 $\\mathrm{dis}_{i, a}\\bigoplus\\mathrm{dis}_{i, b}=k$\u3002\n\n## \u601d\u8def\n\n\u5f88\u660e\u663e\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u89e3\u51b3\u672c\u9898\u7684\u7b2c\u4e00\u6b65\u662f\u9700\u8981\u6c42\u51fa\u6bcf\u4e00\u4e2a $\\mathrm{dis}_{a, b}$\uff08\u53ef\u4ee5\u5feb\u901f\u67e5\u8be2\uff09\u3002\n\n\u6839\u636e\u5f02\u6216\u6027\u8d28\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7b49\u5f0f\uff1a\n\n$\\mathrm{dis}_{a, b}=\\mathrm{dis}_{1,a}\\bigoplus\\mathrm{dis}_{1, b}$\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $\\mathrm{dis}_{1,a}$ \u6211\u4eec\u53ef\u4ee5\u4ee5 $O(n)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5168\u90e8\u9884\u5904\u7406\u51fa\u6765\u3002\n\n### \u5efa\u6811&\u9884\u5904\u7406 code:\n\n```cpp\nint dis[N],head[N],tot,n,m;\nstruct node {\n\tint to,w,nxt;\n}; node Edge[N];\nvoid Add_Edge(int u,int v,int w) {\n\t++tot; Edge[tot]=node{v,w,head[u]}; head[u]=tot;\n}\nvoid Dfs(int u,int fa) {\n\tfor(int i=head[u];i;i=Edge[i].nxt) {\n\t\tint v=Edge[i].to,w=Edge[i].w;\n\t\tif(v!=fa)\n\t\t\tdis[v]=(dis[u]^w),Dfs(v,u);\n\t}\n}\n```\n\n\u90a3\u4e48\u63a5\u4e0b\u6765\u6700\u76f4\u63a5\u7684\u60f3\u6cd5\u5c31\u53ea\u9700\u8981\u679a\u4e3e $i$ \u7136\u540e\u5224\u65ad\u662f\u5426\u6709 $i$ \u6ee1\u8db3\u6761\u4ef6\u5c31\u884c\u4e86\u3002\n\n\u4f46\u662f\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6 $O(nm)$\uff0c\u9488\u5bf9 $n,m\\le5\\cdot10^5$ \u7684\u6570\u636e\u8fd8\u662f\u671b\u800c\u7ec8\u6b62\u7684\u3002\n\n\u63a5\u4e0b\u6765\u4e0d\u59a8\u8ba9\u6211\u4eec\u63a8\u4e00\u4e2a\u7ed3\u8bba\uff1a\n\n$\\quad\\mathrm{dis}_{i, a}\\bigoplus\\mathrm{dis}_{i, b}$\n\n$=(\\mathrm{dis}_{1, i}\\bigoplus\\mathrm{dis}_{1, a})\\bigoplus(\\mathrm{dis}_{1, i}\\bigoplus\\mathrm{dis}_{1, b})$\n\n$=\\mathrm{dis}_{1, i}\\bigoplus\\mathrm{dis}_{1, a}\\bigoplus\\mathrm{dis}_{1, i}\\bigoplus\\mathrm{dis}_{1, b}$\n\n$=(\\mathrm{dis}_{1, i}\\bigoplus\\mathrm{dis}_{1, i})\\bigoplus\\mathrm{dis}_{1, a}\\bigoplus\\mathrm{dis}_{1, b}$\n\n$=0\\bigoplus\\mathrm{dis}_{1, a}\\bigoplus\\mathrm{dis}_{1, b}$\n\n$=\\mathrm{dis}_{1, a}\\bigoplus\\mathrm{dis}_{1, b}$\n\n\u600e\u4e48\u6837\uff0c\u53d1\u73b0\u4e86\u4ec0\u4e48\uff1f\u5176\u5b9e\u6211\u4eec\u5e76\u4e0d\u9700\u8981 $\u300c$ \u679a\u4e3e $i$ \u7136\u540e\u5224\u65ad\u662f\u5426\u6709 $i$ \u6ee1\u8db3\u6761\u4ef6 $\u300d$\uff0c\u5176\u5b9e\u6211\u4eec\u53ea\u9700\u8981\u5224\u65ad $\\mathrm{dis}_{1, a}\\bigoplus\\mathrm{dis}_{1, b}$ \u662f\u5426 $=k$ \u5c31\u884c\u4e86\uff01\n\n### \u67e5\u8be2 code:\n```cpp\nwhile(m--) {\n\t\tint a,b,k;\n\t\tread(a,b,k); //\u5feb\u8bfb\n\t\tputs((dis[a]^dis[b])==k? \"Yes\":\"No\");\n\t}\n```\n\n\u5269\u4e0b\u90e8\u5206\u8fd8\u8bf7\u81ea\u884c\u5b8c\u6210\u3002",
        "postTime": 1647137109,
        "uid": 468657,
        "name": "lsj2009",
        "ccfLevel": 6,
        "title": "P8200 code"
    },
    {
        "content": "\u51fa\u9898\u4eba\u8868\u793a\u8fd9\u9898\u633a\u767d\u7ed9\u7684\uff08\n\n\u8bb0 $Xor[i]$ \u4e3a\u4ece\u6839\u8282\u70b9\u5230 $i$ \u53f7\u8282\u70b9\u7684\u5f02\u6216\u548c\uff0c\u90a3\u4e48\u4ece\u8282\u70b9 $a$ \u5230\u8282\u70b9 $b$ \u7684\u5f02\u6216\u548c\u5c31\u662f $Xor[a] \\bigoplus Xor[b]$\uff0c\u5176\u4e2d $\\bigoplus$ \u8868\u793a\u6309\u4f4d\u5f02\u6216\u3002\n\n\u7531\u4e8e $1\\sim a$ \u5230 $1\\sim b$ \u7684\u8def\u5f84\u5728 $1\\sim \\text{LCA}(a, b)$ \u5904\u90fd\u662f\u4e00\u81f4\u7684\uff0c\u4e8e\u662f\u5f02\u6216\u4e4b\u540e\u6d88\u53bb\u5373\u5f97\u4e0a\u5f0f\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ioclear std::ios::sync_with_stdio(false);std::cin.tie(nullptr);std::cout.tie(nullptr);\n#define endl '\\n'\n#define pii std::pair<int, i64>\n\nconst int mmax = 5e5 + 10;\nusing i64 = unsigned long long;\n\nint n, m;\ni64 Xor[mmax];\nstd::vector<pii> edge[mmax];\n\nvoid dfs(int cur, int fa)\n{\n\tfor(auto v : edge[cur])\n\t\tif(v.first != fa)\n\t\t\tXor[v.first] = Xor[cur] ^ v.second, dfs(v.first, cur);\n\treturn;\n}\n\nint main()\n{\n\tsrand(unsigned(time(NULL)));\n\tioclear;\n\tstd::cin >> n >> m;\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\tint x, y;\n\t\ti64 w;\n\t\tstd::cin >> x >> y >> w;\n\t\tedge[x].push_back({y, w});\n\t\tedge[y].push_back({x, w});\n\t}\n\tdfs(1, 0);\n\tfor(int i = 1;i <= m;i++)\n\t{\n\t\tint x, y;\n\t\ti64 k;\n\t\tstd::cin >> x >> y >> k;\n\t\tif((Xor[x] ^ Xor[y]) == k)\n\t\t\t{\n\t\t\t\tif(rand() & 1)\n\t\t\t\t\tstd::cout << \"yeS\\n\";\n\t\t\t\telse\n\t\t\t\t\tstd::cout << \"YEs\\n\";\n\t\t\t}\n\t\telse\n\t\t\t{\n\t\t\t\tif(rand() & 1)\n\t\t\t\t\tstd::cout << \"No\\n\";\n\t\t\t\telse\n\t\t\t\t\tstd::cout << \"nO\\n\";\n\t\t\t}\n\t}\n}\n\n```\n",
        "postTime": 1647097410,
        "uid": 26538,
        "name": "Dusker",
        "ccfLevel": 4,
        "title": "P8200"
    },
    {
        "content": "\u5410\u69fd\uff1aSPJ\u6709\u4ec0\u4e48\u5b9e\u9645\u4f5c\u7528\u5417......\n\n### \u7b80\u8981\u9898\u610f\n\n\u7ed9\u4f60\u4e00\u68f5\u6811,\u8fb9\u6709\u8fb9\u6743,\u82e5\u5e72\u6b21\u8be2\u95ee,\u6bcf\u6b21\u8be2\u95ee\u4e24\u70b9 $a$,$b$ ,\u6c42\u662f\u5426\u6709\u70b9 $t$ \u6ee1\u8db3 $dis_{a,t} \\oplus dis_{b,t}=k$\u3002\n\n### \u89c2\u5bdf&\u5206\u6790\n\n\u663e\u7136\u679a\u4e3e\u6240\u6709\u70b9\u662f\u4e0d\u884c\u7684,\u6211\u4eec\u9700\u8981\u6362\u4e00\u79cd\u601d\u8def\u3002\n\n\u5206\u4e09\u79cd\u60c5\u51b5\u8ba8\u8bba\uff1a\n\n- \u5f53 $t$ \u5728 $a$\uff0c$b$ \u8def\u5f84\u4e0a\u65f6\uff0c$dis_{a,t} \\oplus dis_{b,t}=dis_{a,b}$\n\n- \u5f53 $t$ \u5728 $a$\uff0c$b$ \u5176\u4e2d\u4e00\u70b9\u7684\u5b50\u6811\u5185\u65f6\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/avzy3m3x.png)\n\n\u5982\u4e0a\u56fe\uff0c$3\\leftrightarrow  4$ \u8fd9\u6761\u8fb9\u88ab\u91cd\u590d\u8ba1\u7b97\u4e86\uff0c\u7531\u4e8e $a \\oplus a=0$ \u6240\u4ee5\u6b64\u65f6 $dis_{a,t} \\oplus dis_{b,t}=dis_{a,b}$\n\n- \u5f53 $t$ \u5728 $a$\uff0c$b$ \u8def\u5f84\u7684\u4efb\u610f\u4e00\u70b9\u4e0a\u6216\u8be5\u70b9\u7684\u7956\u5148\u4e0a\u6216\u5b50\u6811\u5185\u65f6\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/h66wpn7u.png)\n\n\u5982\u4e0a\u56fe\uff0c$1\\leftrightarrow  2$ \u8fd9\u6761\u8fb9\u88ab\u91cd\u590d\u8ba1\u7b97\u4e86\uff0c\u6240\u4ee5\u6b64\u65f6 $dis_{a,t} \\oplus dis_{b,t}=dis_{a,b}$\n\n\u7efc\u4e0a\u6240\u8ff0\uff0c\u5bf9\u4e8e\u4efb\u610f\u6811\u4e0a\u70b9 $t$\uff0c$dis_{a,t} \\oplus dis_{b,t}=dis_{a,b}$\n\n\u82e5 $k=dis_{a,b}$ \u5219\u4e00\u5b9a\u5b58\u5728\u70b9 $t$ \u4f7f\u5f97 $dis_{a,t} \\oplus dis_{b,t}=k$\u3002\n\n\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u70b9 $i$ \u5230\u6839\u7684\u8def\u5f84\u5f02\u6216\u548c $deep_i$ \u5373\u53ef\uff0c\u65e0\u9700\u6c42 lca \u56e0\u4e3a $dis_{a,b}=deep_a \\oplus deep_b$ \u8bc1\u660e\u53ef\u89c1\u56fe\u4e8c\u3002\n\n### CODE\n\n### \u4e00\u5b9a\u8981\u5f00 unsigned long long \uff01\n\n```cpp\n#include<bits/stdc++.h> \n#define N 500010\n#define re register\n#define int unsigned long long\n#define DB double\nusing namespace std;\nint n,m,head[N],cc;\nstruct EDGE{int v,w,nxt;}e[N<<1];\ninline void add_edge(int u,int v,int w)\n{\n\te[++cc].v=v;e[cc].w=w;e[cc].nxt=head[u];head[u]=cc;\n\te[++cc].v=u;e[cc].w=w;e[cc].nxt=head[v];head[v]=cc;\n}\nint dis[N]; \ninline void dfs(int u,int fa)\n{\n\tfor(re int i=head[u];~i;i=e[i].nxt)\n\t{\n\t\tint v=e[i].v;if(v==fa) continue;\n\t\tdis[v]=dis[u]^e[i].w;dfs(v,u);\n\t}\n}\nsigned main()\n{\n\tmemset(head,-1,sizeof(head));\n\tios::sync_with_stdio(false);cin.tie(0);cout.tie(0);\n\tcin>>n>>m;\n\tfor(re int i=1,u,v,w;i<n;i++)\n\t{\n\t\tcin>>u>>v>>w;\n\t\tadd_edge(u,v,w);\n\t}\n\tdfs(1,0);\n\twhile(m--)\n\t{\n\t\tint a,b,k;cin>>a>>b>>k;\n\t\tif((dis[a]^dis[b])==k) cout<<\"YES\\n\";\n\t\telse cout<<\"NO\\n\";\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1647155529,
        "uid": 251324,
        "name": "stntn",
        "ccfLevel": 0,
        "title": "P8200 \u751f\u6d3b\u5728\u6811\u4e0a\uff08easy version\uff09\u9898\u89e3"
    },
    {
        "content": "\u5efa\u8bae\u8bc4\u7ea7\uff1a\u7eff\n\n\u9996\u5148\u89c2\u5bdf\u6027\u8d28\u3002\n\n\u5bf9\u4e8e\u8282\u70b9 $x$ \u5230 $a$ \u548c $x$ \u5230 $b$\uff0c\u5047\u8bbe $x$ \u5230 $a$ \u7684\u8def\u5f84\u6bd4 $x$ \u5230 $b$ \u7684\u8def\u5f84\u77ed\uff0c\u90a3\u4e48\u53ef\u4ee5\u5f97\u5230 $x$ \u5230 $b$ \u7684\u8def\u5f84\u5c31\u662f $x$ \u5230 $a$ \u7136\u540e\u518d\u4ece $a$ \u5230 $b$\u3002\u53c8\u7531\u4e8e\u8fd9\u9053\u9898\u662f\u5f02\u6216\uff0c$x\u2a01x=0$\uff0c\u6240\u4ee5 $x$ \u5230 $a$ \u7684\u8def\u5f84\u5c31\u76f4\u63a5\u6ca1\u4e86\u3002\u63a5\u4e0b\u6765\u53ea\u8981\u7b97 $a$ \u5230 $b$ \u5c31\u884c\u4e86\u3002\n\n\u90a3 $a$ \u5230 $b$ \u7684\u8def\u5f84\u600e\u4e48\u7b97\u5462\uff1f\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u641e\u4e00\u4e2a $len_i$ \u8868\u793a\u6839\u8282\u70b9\u5230 $i$ \u7684\u8def\u5f84\u5f02\u6216\u540e\u7684\u7ed3\u679c\uff0c\u6700\u7ec8\u53ef\u4ee5\u5f97\u5230\u7ed3\u679c\u5c31\u662f $len_a \u2a01 len_b \u2a01 len_{\\text{LCA(a,b)}}\u2a01 len_{\\text{LCA(a,b)}}$\u3002\u8bb0\u5f97\u5f00\u4e00\u4e2a`unsigned long long`\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define int unsigned long long\nusing namespace std;\ntemplate <typename T> inline void read(T& x) {\n\tx=0;T f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9') {if(ch=='-')f=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')x=(x<<1)+(x<<3)+(ch^48),ch=getchar();\n\tx=x*f;\n\treturn;\n}\ntemplate <typename T,typename ...Arg>void read(T& x,Arg& ...arg){\n\tread(x);\n\tread(arg...);\n}\ntemplate <typename T>void write(T x) {\n\tif(x<0)putchar('-'),x=-x;\n\tif(x<10)putchar(x+'0');\n\telse write(x/10),putchar(x%10+'0');\n}\ntemplate <typename T,typename ...Arg>void write(T& x,Arg& ...arg){\n\twrite(x);\n\tputchar(' ');\n\twrite(arg...);\n}\nconst int maxn = 5e5 + 5;\nstruct edge{\n    int to,next,w;\n}pool[maxn << 1];\nint head[maxn]{0},cnt,fa[maxn][25],depth[maxn]{0},n,m,len[maxn]{0};\ninline void addedge(int u,int v,int w){\n    pool[++cnt].next = head[u];\n    pool[cnt].to = v;\n    pool[cnt].w = w;\n    head[u] = cnt;\n}\nbool vis[maxn]{0};\nvoid dfs(int now){\n    vis[now] = 1;\n    for(int i = head[now];i;i = pool[i].next){\n        int to = pool[i].to;\n        if(vis[to])    continue;\n        depth[to] = depth[now] + 1;\n        len[to] = len[now] ^ pool[i].w;\n        fa[to][0] = now;\n        dfs(to);\n    }\n}\nint lca(int x,int y){\n    if(depth[x] < depth[y])    swap(x,y);\n    for(int i = 24;i>=0;--i){ \n        if(depth[fa[x][i]] >= depth[y])\n            x = fa[x][i];\n        if(i==0) break;\n    } \n    if(x == y)    return x;\n    for(int i = 24;i>=0;--i){\n        if(fa[x][i] != fa[y][i])\n            x = fa[x][i],y = fa[y][i];\n        if(i==0) break;\n\t}\n    return fa[x][0];\n}\nsigned main(){\n    read(n,m);\n    for(int i = 1;i<=n - 1;++i){\n        int a,b,c;\n        read(a,b,c);\n        addedge(a,b,c);\n        addedge(b,a,c);\n    }\n    depth[1] = 1;\n    dfs(1);\n    for(int i = 1;i<=24;++i)\n        for(int j = 1;j<=n;++j)\n            fa[j][i] = fa[fa[j][i-1]][i-1];\n    while(m--){\n        int a,b,k;\n        read(a,b,k);\n        int p=lca(a,b);\n        int x=len[a]^len[b]^(len[p]^len[p]);\n        if(x==k){\n        \tcout<<\"Yes\"<<endl;\n\t\t}\n\t\telse{\n\t\t\tcout<<\"No\"<<endl;\n\t\t}\n    }\n    return 0;\n}\n```\n",
        "postTime": 1647087657,
        "uid": 327444,
        "name": "Tothetime_tolife",
        "ccfLevel": 0,
        "title": "P8200 \u9898\u89e3"
    }
]
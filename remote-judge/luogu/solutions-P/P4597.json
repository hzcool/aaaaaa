[
    {
        "content": "\u8868\u793a\u5b8c\u5168\u770b\u4e0d\u61c2\u697c\u4e0b\u7684\u5927\u4f6c\u4eec\u8bf4\u5565\u2026\u2026\u7279\u522b\u662f\u67d0\u7eff\u2026\u2026\u67d0c\u59d3\u5927\u4f6c\n\n\u6765\u8bf4\u8bf4\u4e2a\u4eba\u7684\u7406\u89e3\u5427\n\n\u5927\u4f6c\u4eec\u8bf4\uff1a\u8003\u8651\u5f53\u524d\u7684\u6570$x$\u548c\u4e4b\u524d\u7684\u6700\u5927\u6570$y$\uff0c\uff08\u9ed8\u8ba4$x<y$\uff0c\u56e0\u4e3a\u5982\u679c$x>=y$\u5df2\u7ecf\u6ee1\u8db3\u975e\u964d\u4e86\uff09\u4e3a\u4e86\u8ba9\u5b83\u975e\u964d\uff0c\u6211\u4eec\u8981\u5728\u533a\u95f4$[x,y]$\u91cc\u627e\u5230\u4e00\u4e2a\u6570$z$\uff0c\u4f7f$y$\u51cf\u5c0f\u5230$z$,$x$\u589e\u5927\u5230$z$\uff0c\u90a3\u4e48\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e0d\u7ba1\u53d6\u7684\u6570\u662f\u4ec0\u4e48\uff0c\u4ee3\u4ef7\u90fd\u662f$y-x$\n\n\u4e0d\u96be\u770b\u51fa\uff0c$y$\u51cf\u5c0f\u7684\u8d8a\u591a\uff0c\u540e\u9762\u7684\u5e8f\u5217\u8d8a\u5bb9\u6613\u53d8\u6210\u975e\u964d\uff0c\u90a3\u4e48\u53ea\u8981\u8ba9$y$\u51cf\u5c0f\u5230$x$\u5c31\u597d\u4e86\n\n\u770b\u5230\u8fd9\u91cc\uff0c\u6211\u4e00\u76f4\u6709\u4e00\u4e2a\u7591\u95ee\uff0c\u5982\u679c\u4ee4$y$\u51cf\u5c0f\u5230$x$\u4e4b\u540e\uff0c\u5e8f\u5217\u4e0d\u6ee1\u8db3\u975e\u964d\u4e86\u600e\u4e48\u529e\uff1f\n\n\u4ed4\u7ec6\u60f3\u4e86\u60f3\uff0c\u5b9e\u9645\u4e0a\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a\u4e3a\u4e86\u8ba9\u5e8f\u5217\u975e\u964d\uff0c$y$\u4e0d\u80fd\u5c0f\u4e8e$y$\u4e4b\u524d\u7684\u6700\u5927\u503c\u3002\u800c\u7531\u4e8e$y$\u662f\u6574\u4e2a\u5e8f\u5217\u7684\u6700\u5927\u503c\uff0c\u5982\u679c\u5b83\u4e4b\u524d\u7684\u6700\u5927\u503c$z$\u5c0f\u4e8e\u7b49\u4e8e$x$\uff0c\u90a3\u4e48\u5c06$y$\u51cf\u5c0f\u5230$x$\u4ecd\u80fd\u4fdd\u8bc1\u5e8f\u5217\u662f\u975e\u964d\u7684\u3002\u5426\u5219\u7684\u8bdd\uff0c$z$\u5927\u4e8e$x$\u5c0f\u4e8e$y$\uff0c\u4ecd\u662f\u5728\u533a\u95f4$[x,y]$\u5185\uff0c\u90a3\u4e48\u79fb\u52a8\u7684\u4ee3\u4ef7\u662f$y-x$\uff0c\u6240\u4ee5\u7528\u4e8e\u66f4\u65b0\u7b54\u6848\u662f\u6ca1\u6709\u95ee\u9898\u7684\n\n\u90a3\u4e48\u8fd9\u91cc\u4e3a\u4ec0\u4e48\u8981\u8ba9$y$\u51cf\u5230\u6700\u5c0f\u5462\uff1f\u8fd9\u662f\u56e0\u4e3a$x$\u548c$y$\u4e0d\u8bba\u5982\u4f55\u8c03\u6574\uff0c\u4ed6\u4eec\u7684\u4ee3\u4ef7\u4e4b\u548c\u90fd\u5df2\u7ecf\u4e0d\u53d8\u4e86\uff0c\u4f46\u95ee\u9898\u662f\u4ed6\u4eec\u76ee\u524d\u9009\u7684\u6700\u4f18\u65b9\u6848\u5e76\u4e0d\u662f\u4e4b\u540e\u7684\u6700\u4f18\u3002\u4e3a\u4e86\u6ee1\u8db3\u4ed6\u4eec\u5728\u4e4b\u540e\u6700\u4f18\uff0c\u53ea\u6709\u628a$y$\u51cf\u5c0f\u5230$x$\uff0c\u624d\u80fd\u4fdd\u8bc1\u4e4b\u540e\u66f4\u6709\u53ef\u80fd\u975e\u964d\u3002\n\n\u6982\u62ec\u4e00\u4e0b\uff0c\u5bf9\u4e8e\u5f53\u524d\u7684\u6570\uff0c\u65e0\u8bba\u6700\u4f18\u89e3\u5982\u4f55\uff0c\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f\u4e00\u5b9a\u7684\u3002\u800c\u4e3a\u4e86\u4fdd\u8bc1\u4e4b\u540e\u7684\u89e3\u4e5f\u6700\u4f18\uff0c\u4ee4$y$\u51cf\u5c0f\u5230$x$\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u4e4b\u540e\u7684\u89e3\u6700\u4f18\uff0c\u4e14\u4e0d\u4f1a\u5f71\u54cd\u5f53\u524d\u7684\u6700\u4f18\u89e3\n\n\u4ee3\u7801\u597d\u77ed\u2026\u2026\n```\n//minamoto\n#include<cstdio>\n#include<iostream>\n#include<queue>\nusing namespace std;\n#define getc() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nchar buf[1<<21],*p1=buf,*p2=buf;\ninline int read(){\n    #define num ch-'0'\n    char ch;bool flag=0;int res;\n    while(!isdigit(ch=getc()))\n    (ch=='-')&&(flag=true);\n    for(res=num;isdigit(ch=getc());res=res*10+num);\n    (flag)&&(res=-res);\n    #undef num\n    return res;\n}\npriority_queue<int> q;\nint n;long long ans;\nint main(){\n\tn=read();\n\twhile(n--){\n\t\tint x=read();q.push(x);\n\t\tif(x<q.top()){\n\t\t\tans+=q.top()-x;\n\t\t\tq.pop();q.push(x);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1534053502,
        "uid": 41781,
        "name": "bztMinamoto",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4597 \u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "\u770bchen_zhe\u5927\u4f6c\u7684\u9898\u89e3\u770b\u7684\u6709\u70b9\u8ff7~~\uff08\u6211\u592a\u5f31\u4e86\uff09~~\n\n\u6765\u4e00\u53d1\u81ea\u8ba4\u4e3a\u8fd8\u7b97\u597d\u7406\u89e3\u7684\u89e3\u91ca\uff0c\u6b22\u8fce\u6307\u51fabug\n\n\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\u70b9\u51fb\u8fd9\u91cc\uff1a[\u535a\u5ba2\u4f20\u9001\u95e8](http://www.cnblogs.com/devilk-sjj/p/9038078.html)\n\n## **\u3010\u7b97\u6cd5\u5206\u6790\uff1a\u3011**\n\u5bf9\u4e8e\u4e00\u4e2a\u5e8f\u5217\uff0c\u53ef\u4ee5\u770b\u6210\u9ad8\u5ea6\u4e0d\u540c\u7684\u51e0\u6839\u7ebf\n\n\u5982\uff1a\u5e8f\u5217{3\u3001 4\u3001 1\u3001 5}\u53ef\u4ee5\u770b\u505a\u8fd9\u6837\n\n\n```cpp\n                  ----                \n     ----\n---- \n          \n            ----\n```\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5927\u6570$a$\u548c\u4e00\u4e2a\u5c0f\u6570$b$\uff0c\u8981\u505a\u7684\u5c31\u662f\u5728\u4ed6\u4eec\u4e4b\u95f4\u7684\u4efb\u610f\u4f4d\u7f6e\u627e\u5230\u4e00\u4e2a\u57fa\u51c6\uff0c\u5c06\u5927\u6570\u5411\u4e0b\u632a\u5230\u90a3\u4e2a\u57fa\u51c6\uff0c\u5c0f\u6570\u5411\u4e0a\u632a\u5230\u90a3\u4e2a\u57fa\u51c6\n\n\u79fb\u52a8\u7684\u8ddd\u79bb\u7b49\u4ef7\u4e8e$a - b$\n\n\u7531\u4e8e\u662f\u975e\u964d\u5e8f\u5217\uff0c\u5c06$a$\u5411\u4e0b\u79fb\u52a8\u7684\u8ddd\u79bb\u8d8a\u591a\u8d8a\u53ef\u4ee5\u4f7f\u4e4b\u540e\u7684\u6570\u5b57\u66f4\u5bb9\u6613\u53d8\u6210\u975e\u964d\u5e8f\u5217\n\n\u6240\u4ee5\u8fd9\u4e2a\u57fa\u51c6\u5e94\u8be5\u662f\u9009\u62e9\u4e4b\u524d\u7684\u6700\u5927\u6570$c$\uff0c\n\n\u5f53\u4e4b\u524d\u7684\u6700\u5927\u6570\u5728$[a,\\ b]$\u8fd9\u4e2a\u533a\u95f4\u5185\uff0c\u5c06$a$\u5411\u4e0b\u79fb\u5230$c$\u5e76\u5c06$b$\u5411\u4e0a\u79fb\u5230$c$\u7684\u8ddd\u79bb\u7b49\u4ef7\u4e8e\u5c06$a$\u5411\u4e0b\u79fb\u52a8\u5230$b$\u7684\u8ddd\u79bb\n\n\u3000\u3000\u6240\u4ee5\u5c31\u628a$a$\u79fb\u5230$b$\u5c31\u597d\u4e86\n\n\u3000\u3000\u800c\u7531\u4e8e\u4e4b\u524d\u5df2\u7ecf\u6709\u4e00\u4e2a$c$\u503c\uff0c\u4e0d\u628a$a$,$b$\u79fb\u52a8\u5230$c$\u4e5f\u80fd\u4fdd\u8bc1\u4e4b\u540e\u7b54\u6848\u7684\u6b63\u786e\u6027\n\n\u3000\u3000\u3000\u3000\u800c\u5f53\u4e4b\u540e\u5982\u679c\u6709\u8bb8\u591a\u4e2a\u5c0f\u6570\u7684\u65f6\u5019\uff0c\u8fd9\u4e48\u505a\u4e5f\u80fd\u4fdd\u8bc1\u4e4b\u540e\u7b54\u6848\u7684\u6b63\u786e\u6027\uff0c\u56e0\u4e3a\u5f53\u524d\u7684$c$\u548c\u5f53\u524d$b$\u5728\u8fd9\u79cd\u60c5\u51b5\u91cc\u5e94\u8be5\u662f\u540c\u5c5e\u4e8e[\u4e4b\u540e\u7684$a,~~$\u4e4b\u540e\u7684$b$]\u7684\u533a\u95f4\u5185\n\n\u5f53\u4e4b\u524d\u7684\u6700\u5927\u6570\u6bd4$b$\u8fd8\u8981\u5c0f\u7684\u65f6\u5019\uff0c$b$\u5c31\u53d8\u6210\u4e86\u4e4b\u524d\u975e\u964d\u5e8f\u5217\u7684\u4e00\u90e8\u5206\uff0c$a - b$\u76f8\u5f53\u4e8e\u5c06$a$\u5411\u4e0b\u79fb\u52a8\u5230$b$\n\n\u7531\u4e8e$c$\u662f\u4e4b\u524d\u7684\u6700\u5927\u6570\uff08\u4e5f\u5c31\u662f\u8bf4\u73b0\u5728\u7684$a > c$\uff09\uff0c\u6240\u4ee5\u4e0d\u5b58\u5728$c$\u6bd4$a$\u5927\u7684\u60c5\u51b5\n\n**\u7136\u540e\u5f00\u4e2a\u5927\u6839\u5806\u778e\u641e\uff1a**\n\n\u5bf9\u4e8e\u8bfb\u8fdb\u7684\u4e00\u4e2a\u6570num\uff0c\u628a\u5b83push\u5230\u4f18\u5148\u961f\u5217\u91cc\u53bb\n\n\u5982\u679c\u8fd9\u4e2anum\u6bd4\u4e4b\u524d\u7684\u6700\u5927\u503cmaxn\uff08\u5c31\u662f\u5806\u9876\u5143\u7d20\uff09\u8981\u5c0f\u7684\u8bdd\n\n\u3000\u3000ans += maxn - num\n\n\u3000\u3000\u5e76\u628amaxn\u5f39\u51fa\uff0c\u518dpush\u8fdb\u4e00\u4e2anum(\u628amaxn\u79fb\u52a8\u5230\u4e86num\u7684\u4f4d\u7f6e\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u6b63\u786e\u6027\u7684\u8bc1\u660e\u89c1\u4e0a\u9762)\n  \nAc\u4ee3\u7801\uff1a\n```cpp\n//\u5e8f\u5217sequence\u52a0\u5f3a\u7248\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\nusing namespace std;\n\nint n;\nlong long ans;\npriority_queue<int> q;\n\ninline int read() {\n    int x = 0, f = 1; char ch = getchar();\n    while(ch < '0' || ch > '9') { if(ch == '-') f = -1; ch = getchar(); }\n    while(ch >= '0' && ch <= '9')\n        x = (x << 3) + (x << 1) + ch - 48, ch = getchar();\n    return x * f;\n}\n\nint main() {\n    n = read();\n    for(int i = 1; i <= n; i++) {\n        int num = read();\n        q.push(num);\n        if(num < q.top()) {\n            ans += q.top() - num;\n            q.pop();\n            q.push(num);\n        }\n    }\n    printf(\"%lld\\n\", ans);\n}\n```",
        "postTime": 1526304388,
        "uid": 24922,
        "name": "DEVILK",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4597 \u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "\u7ed9\u4e2a\u63d0\u793a\uff1a\n\n\u8bbe$f_i(x)$\u8868\u793a$a_i$\u8f6c\u5230x\uff0c\u4e14$a_i$\u4e4b\u524d\u6240\u6709\u7684\u6570\u5b57\u8f6c\u5230x\u6240\u9700\u7684\u4ee3\u4ef7\u3002 \n\n$f_i(x) = |a_i - x| + min_{x' \\leq x} f_{i-1} (x')$\n\n\u4e3e\u4f8b\u5b50\uff1a$f_3(x) = |a_3 - x| + min_{x' \\leq x} (|a_2-x'|+min_{x'' \\leq x'} |a_1-x''|)$ \n\n\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u662f\u4e2a\u4e0b\u51f8\u7684\u51fd\u6570\uff0c\u7136\u540e\u5206\u6bb5\u3002 \n\n\u5f53\u7136\u8fd9\u4e2a\u4e0b\u51f8\u4e4b\u7c7b\u7684\u4e1c\u897f\u5176\u5b9e\u53ef\u4ee5\u4e0d\u7528\u8bc1\u660e\u554a\uff0c\u611f\u6027\u7406\u89e3\u5373\u53ef\u3002\n\n\u5f53\u521d\u6211\u81ea\u5df1\u505a\u7684\u7b14\u8bb0\u5df2\u7ecf\u5fd8\u8bb0\u4e86opt\u662f\u4ec0\u4e48\u610f\u601d\u4e86\uff1a\n\n$Task1: opt_{i-1} \\leq a_i $\u65f6 $opt_i == a_i$ \n\n$$f_i(x) = |a_i-x|+min_{x' \\leq x} f_{i-1}(x')$$\n\n$$f_i(x) = a_i-min_{x' \\leq x} f_{i-1}(x')$$\n\n$Task1.1: x\\leq opt_{i-1}$\n\n$$f_i(x)=a_i-x+f_{i-1}(x)$$\n\n$Task1.2: x == opt_{i-1}$\n\n$$f_i(x) = a_i-x+f_{i-1}(opt_{i-1})$$\n$f_{i-x}(opt_{i-1})$\u663e\u7136\u4e3a\u5e38\u6570 \n\n$Task1.3 x\\geq opt_{i-1}$\n\n$$f_i(x) = -a_i+x+f_{i-1}(opt_{i-1})$$ \n\n$Task2: a_i \\leq opt_{i-1}$\n\n$Task 2.1: x\\leq a_i$\n\n$$f_i(x) = a_i -x +f_{i-1} (x) == Task1.1$$\n\n$Task 2.2 a_i \\leq x \\leq opt_{i-1} $\n\n$$f_i(x) = x-a_i+f_{i-1}(x) $$\n\n$Task 2.3 opt_{i-1} \\leq x$\n\n$$f_i(x) = x-a_i +f_{i-1}(opt_{i-1}) == Task1.3$$\n*/\n\n\u7136\u540e\u5f00\u4e2a\u5806\u778e\u641e\n\n```\nwhile (n--)\n{\n    int a;\n    a=read();\n    q.push(a);\n    if (q.top()>=a)\n    {\n        ans+=q.top()-a;\n        q.pop();\n        q.push(a);\n    }\n}\n ```\n\n\uff08\u5e94\u8be5\u6ca1\u6253\u9519\u5427\uff09",
        "postTime": 1526203802,
        "uid": 8457,
        "name": "chen_zhe",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4597 \u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "### \u524d\u8a00\n\nsmarthehe \u795e\u770b\u6211\u6700\u8fd1\u603b\u4e0d\u5237\u9898\u5c31\u7ed9\u6211\u63a8\u4e86 CF713C\uff0c\u7136\u540e\u6211\u731c\u4e86 dp \u662f\u4e0b\u51f8\u58f3\uff0c\u7136\u540e\u7ed9\u731c\u5bf9\u4e86\u3002\u3002\u7136\u540e\u627e\u5230\u4e86\u4e09\u500d\u7ecf\u9a8c\uff1aCF713C\u3001CF13C\u3001\u8fd8\u6709\u8fd9\u9898\u3002\u3002\n\n\u7136\u540e\u6211\u4e5f\u91c7\u7528\u4e86\u5927\u90e8\u5206\u9898\u89e3\u4f7f\u7528\u7684\u5199\u6cd5\uff0c\u6211\u8ba4\u4e3a\u51fa\u5904\u5e94\u8be5\u6765\u81ea\u4e8e [ko_osaga](https://codeforces.ml/blog/entry/47094?#comment-315161)\uff0c\u6211\u5c06\u4f1a\u505a\u8be6\u7ec6\u89e3\u91ca\u3002\n\n### \u9898\u89e3\n\n\u9996\u5148\u6211\u4eec\u5f04\u51fa\u4e00\u4e2a dp\uff0c\u8bbe $f_{i,j}$ \u8868\u793a\u5230\u7b2c $i$ \u4e2a\u6570\uff0c\u628a\u8fd9\u4e2a\u6570\u53d8\u6210 $j$\uff0c\u8003\u8651 $[1,i]$ \u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u8f6c\u79fb\u65b9\u7a0b\u662f\n\n$$ f_{i,j}=\\min_{k\\le j} f_{i-1,k} +|a_i-j| $$\n\n\u6240\u4ee5\u73b0\u5728\u6211\u4eec\u6709\u4e86\u4e00\u4e2a $\\Theta(n\\max a_i)$ \u7684\u590d\u6742\u5ea6\uff0c\u5b9e\u5728\u662f\u592a\u597d\u4e86\uff0c\u80fd\u901a\u8fc7 0 \u4e2a\u52a0\u5f3a\u524d\u9898\u76ee\u7684\u6570\u636e\uff01\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u8bc1\u660e\u5bf9\u6bcf\u4e2a $i$\uff0c$f_{i,x}$ \u662f\u5173\u4e8e $x$ \u7684\u4e00\u4e2a\u4e0b\u51f8\u58f3\u3002\n\n\u9996\u5148 $i=1$ \u7684\u65f6\u5019\u662f\u7684\u5bf9\u5427\u3002\u3002\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u6bcf\u6b21\u53d1\u751f\u4e86\u4ec0\u4e48\u53d8\u5316\uff0c\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/t77qt3rh.png)\n\n\uff08\u7ebf\u6bb5\u4e0a\u6807\u7684\u662f\u659c\u7387\uff0c\u56fe\u4e2d\u753b\u7684\u7ebf\u6bb5\u659c\u7387\u53ef\u80fd\u4e0d\u592a\u51c6\uff09\n\n\u5206 4 \u79cd\u60c5\u51b5\uff0c\u8ba8\u8bba\u4e0b\u51f8\u58f3\u4e2d\u7684\u6bcf\u4e00\u4e2a\u7ebf\u6bb5\uff1a\n\n1. \u7ebf\u6bb5\u5355\u964d\uff0c\u5728 $a_i$ \u5de6\u4fa7\n\n\u6b64\u65f6 $\\min\\limits_{k\\le j} f_{i-1,k}=f_{i-1,j}$\uff0c\u6240\u4ee5 $f_{i,j}=f_{i-1,j}+a_i-j$\uff0c\u7a0d\u5fae\u770b\u770b\u5c31\u80fd\u53d1\u73b0\u662f\u659c\u7387\u51cf 1 \u3002\uff08\u6570\u503c -1\uff0c\u4e0d\u662f\u7edd\u5bf9\u503c -1 \uff01\uff09\n\n2. \u7ebf\u6bb5\u5355\u964d\uff0c\u5728 $a_i$ \u53f3\u4fa7\n\n\u4eff\u6548\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c$f_{i,j}=f_{i-1,j}+j-a_i$\uff0c\u662f\u659c\u7387\u589e 1 \u3002\n\n3. \u7ebf\u6bb5\u4e0d\u5355\u964d\uff0c\u5728 $a_i$ \u5de6\u4fa7\n\n\u6b64\u65f6\u627e\u5230\u4e4b\u524d\u6700\u540e\u4e00\u4e2a\u5355\u964d\u7684\u70b9 $\\text{op}$\uff0c\u5219 $f_{i,j}=\\text{op}+a_i-j$\uff0c\u6b64\u65f6\u7ebf\u6bb5\u659c\u7387\u53d8\u6210 -1 \u3002\n\n4. \u7ebf\u6bb5\u4e0d\u5355\u964d\uff0c\u5728 $a_i$ \u53f3\u4fa7\n\n$f_{i,j}=\\text{op}+j-a_i$\uff0c\u6b64\u65f6\u7ebf\u6bb5\u659c\u7387\u53d8\u6210 1\n\n\u56e0\u6b64\u8fd9\u662f\u4e2a\u51f8\u5305\uff0c\u76f4\u63a5\u6309\u7167\u4e0a\u9762\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u6709 $\\Theta(n^2)$ \u4e86\u3002\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u7528\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\u51f8\u5305\uff0c\u5176\u5b9e\u6211\u4eec\u6709\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5c31\u662f\u76f4\u63a5\u4f7f\u7528\u5927\u6839\u5806\uff0c\u5806\u4e2d\u6bcf\u4e2a\u5143\u7d20\u5e94\u5f53\u662f\u4e8c\u5143\u7ec4 $(x,k)$ \u8868\u793a\u4e00\u6761\u7ebf\u6bb5\u7684\u53f3\u7aef\u70b9\u548c\u8fd9\u6761\u7ebf\u6bb5\u7684\u659c\u7387\uff0c\u5e76\u4e14\u6211\u4eec\u820d\u5f03\u6389\u6240\u6709\u4e0d\u5355\u964d\u7684\u7ebf\u6bb5\uff0c**\u4f46\u662f\u8003\u8651\u5230 priority_queue \u53ef\u91cd\uff0c\u6211\u4eec\u820d\u5f03\u6389\u7b2c\u4e8c\u4e2a\u5143\u7d20\uff0c\u7136\u540e\u6211\u4eec\u8ba4\u4e3a\u4e00\u4e2a\u5143\u7d20\u7684 $k$ \u662f\u4e0e\u5b83\u76f8\u540c\u7684\u6700\u5de6\u8fb9\u7684\u5143\u7d20\u5230\u6700\u5927\u5143\u7d20\u4e4b\u95f4\u7684\u8ddd\u79bb\u7684\u76f8\u53cd\u6570**\u3002\u4f8b\u5982\u7528 $\\{1,2,3,3\\}$ \u8868\u793a $\\{(1,-4),(2,-3),(3,-2),(3,-2)\\}$\u3002\n\n\u6211\u4eec\u52a0\u5165\u4e86 $a_i$\uff0c\u4e24\u79cd\u60c5\u51b5\uff1a\n\n1. $a_i\\ge \\text{op}$\uff0c\u6b64\u65f6 $a_i$ \u6210\u4e3a\u65b0\u7684\u51b3\u7b56\u70b9\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u66f4\u65b0\u7b54\u6848\uff0c\u53ea\u9700\u8981\u538b\u5982 $a_i$\u3002\n\n2. $a_i<\\text{op}$\uff0c\u6b64\u65f6\u6240\u6709\u5806\u4e2d\u7684\u659c\u7387\u90fd -1\uff0c\u659c\u7387\u4e3a -1 \u7684\u5e94\u5f53\u5f39\u51fa\uff0c\u7531\u4e8e\u8fd9\u4e2a\u5199\u6cd5\u5f88\u806a\u660e\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u628a\u6700\u5927\u7684\u5143\u7d20\u5f39\u51fa\uff0c\u5728\u5f39\u51fa\u4e4b\u524d\u66f4\u65b0\u7b54\u6848\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint n, t; long long ans;\npriority_queue<int> Q;\n\nint main() {\n    scanf(\"%d\", &n);\n    while (n--) {\n        scanf(\"%d\", &t), Q.push(t);\n        if (Q.top() != t) ans += Q.top() - t, Q.pop(), Q.push(t);\n    } printf(\"%lld\\n\", ans);\n    return 0;\n}\n```\n\n\n",
        "postTime": 1582876716,
        "uid": 62308,
        "name": "Mr_Wu",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P4597 \u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "\u611f\u89c9\u5341\u5206\u5389\u5bb3\u7684\u9898\uff0c\u8bb0\u5f55\u4e00\u4e0b\uff08\n\n\u6709\u4e2a\u5f88\u663e\u7136\u7684 $\\mathcal{O}(n\\max a)$  \u7684 dp\uff0c\u8bbe $f_{i,j}$ \u4e3a $a_i$ \u53d8\u4e3a $j$\uff0c\u8003\u8651\u539f\u5e8f\u5217 $[1,i]$ \u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u663e\u7136\u6709\uff1a\n\n$$\nf_{i,j}=\\min_{k\\leq j}f_{i-1,k}+|a_i-j|\n$$\n\n\u7ed3\u8bba1\uff1a$f_{i,j}$ \u5173\u4e8e $j$ \u7684\u70b9\u76f8\u90bb\u4e24\u4e2a\u8fde\u8d77\u6765\u662f\u4e00\u4e2a\u4e0b\u51f8\u58f3\u3002\n\n\u8bc1\u660e\uff1a\n\n$f_{1,j}=|a_1-j|$\uff0c\u662f\u4e00\u4e2a\u7edd\u5bf9\u503c\u51fd\u6570\uff0c\u9876\u70b9\u5728 $a_1$\u3002\n\n\u8003\u8651 $f_{i-1}\\to f_{i}$ \u4f1a\u53d1\u751f\u600e\u6837\u7684\u53d8\u5316\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\u4e00\u4e0b\uff0c\u5177\u4f53\u53ef\u4ee5\u770b[\u8fd9\u91cc\u7684\u8bc1\u660e](https://www.luogu.com.cn/blog/Mr-Wu/solution-p4597)\uff0c\u6211\u8ba4\u4e3a\u5199\u5f97\u975e\u5e38\u5730\u597d\uff0c\u65e0\u9700\u591a\u8865\u5145\uff0c\u4e0d\u8fc7\u8bf7\u52a1\u5fc5\u770b\u61c2\u6709\u5173\u4e0b\u51f8\u58f3\u7684\u8bc1\u660e\uff0c\u540e\u9762\u7684\u505a\u6cd5\u4f1a\u6d89\u53ca\u5230\u52a0\u5165 $a_i$ \u5bf9\u4e0b\u51f8\u58f3\u7ebf\u6bb5\u7684\u5f71\u54cd\u3002\n\n\u4e0b\u51f8\u58f3\u7684\u659c\u7387\u80af\u5b9a\u662f\u9012\u589e\u7684\u3002\u5148\u94a6\u5b9a\u7ebf\u6bb5\u7684\u659c\u7387\u662f\u4e0d\u65ad $+1$ \u7684\uff0c\u5982\u679c\u4e2d\u95f4\u51fa\u73b0\u4e86\u65ad\u5c42\u7684\u73b0\u8c61\u5c31\u5f53\u4f5c\u8fd9\u4e2a\u65ad\u7684\u5730\u65b9\u6709\u957f\u5ea6\u4e3a $0$ \u7684\u7ebf\u6bb5\uff0c\u8fd9\u4e9b\u7ebf\u6bb5\u7684\u659c\u7387\u8865\u5145\u4e86\u4e2d\u95f4\u65ad\u5c42\u7684\u5730\u65b9\u3002\n\n\u518d\u8bbe $op_i$ \u4e3a $f_i$ \u7684\u659c\u7387\u4e3a $0$ \u7684\u90a3\u4e00\u6761\u7ebf\u6bb5\u7684\u5de6\u7aef\u70b9\uff0c\u4e5f\u662f\u659c\u7387\u4e3a $1$ \u7684\u90a3\u4e00\u6761\u7ebf\u6bb5\u7684\u53f3\u7aef\u70b9\u3002\n\n\u6211\u4eec\u9700\u8981\u660e\u786e\u4e00\u70b9\uff0c\u6700\u7ec8\u7b54\u6848\u662f $f_{n,op_n}$\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u53ea\u5173\u5fc3 $f_{n,op_n}$ \u7684**\u7eb5\u5750\u6807**\uff0c\u4e0d\u5173\u5fc3 $op_n$ \u5177\u4f53\u662f\u51e0\uff0c\u56e0\u4e3a\u95ee\u9898\u53ea\u8981\u6c42\u8f93\u51fa\u6700\u5c0f\u7684\u4ee3\u4ef7\u3002\n\n\u73b0\u5728\u53ef\u4ee5\u5b8c\u5168\u4e0d\u7ba1\u659c\u7387 $>1$ \u7684\u7ebf\u6bb5\u4e86\uff0c\u5b83\u4eec\u600e\u4e48\u53d8\u548c\u6c42\u7b54\u6848\u6ca1\u6709\u5173\u7cfb\u3002\n\n--- \n\n\u8003\u8651\u7ef4\u62a4\u8fd9\u4e9b\u659c\u7387 $\\leq 0$ \u7684\u7ebf\u6bb5\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u53ef\u91cd\u5143\u7d20\u7684\u7531\u5927\u5230\u5c0f\u7684\u4f18\u5148\u961f\u5217\uff08\u6216\u8005\u8bf4\u5927\u6839\u5806\uff09\uff0c\u5176\u5143\u7d20\u4e3a\u7ebf\u6bb5\u7684\u53f3\u7aef\u70b9\uff0c\u4e00\u4e2a\u53f3\u7aef\u70b9\u53ef\u4ee5\u91cd\u590d\u591a\u6b21\uff0c\u5176\u7ebf\u6bb5\u7684\u659c\u7387\u4e3a\u5176\u9700\u8981\u5b8c\u5168 pop \u51fa\u7684\u6b21\u6570\u7684\u76f8\u53cd\u6570\u3002\n\n\u4e3e\u4e2a\u6817\u5b50\uff0c\u5927\u6839\u5806\u4e3a $\\{3,2,2,1,1\\}$\uff0c\u90a3\u4e48\u53f3\u7aef\u70b9\u4e3a $2$ \u7684\u7ebf\u6bb5\u7684\u659c\u7387\u4e3a $-3$\uff0c\u56e0\u4e3a\u5f39\u51fa\u5168\u90e8\u7684 $2$ \u9700\u8981\u628a\u4e00\u4e2a $3$\uff0c\u4e24\u4e2a $2$ \u5168\u90e8\u5f39\u51fa\u3002\n\n\u73b0\u5728\u60ca\u5947\u5730\u53d1\u73b0\uff0c\u8fd9\u4e2a\u4f18\u5148\u961f\u5217\u6070\u597d\u5bf9\u4e0a\u4e86\u6211\u4eec\u524d\u9762\u94a6\u5b9a\u7684\u659c\u7387\u4e0d\u65ad $+1$ \u9012\u589e\"\u7684\"\u66b4\u8bba\"\u3002\n\n\u5173\u4e8e\u8981\u7528\u5230\u7684\u7ed3\u8bba\u4e0a\u9762\u7ed9\u51fa\u7684\u94fe\u63a5\u5df2\u7ecf\u8bc1\u660e\uff0c\u6211\u73b0\u5728\u91cd\u65b0\u53d9\u8ff0\u4e00\u904d\u3002\n\n1. \u7ebf\u6bb5\u5355\u964d\u4e14\u5728 $a_i$ \u5de6\u4fa7\uff0c\u659c\u7387 $-1$\uff08\u5176\u659c\u7387\u7684\u6570\u503c\u51cf\u53bb $1$\uff09\uff1b\n\n1. \u7ebf\u6bb5\u5355\u964d\u4e14\u5728 $a_i$ \u53f3\u4fa7\uff0c\u659c\u7387 $+1$\uff1b\n\n1. \u7ebf\u6bb5\u4e0d\u5355\u964d\u4e14\u5728 $a_i$ \u5de6\u4fa7\uff0c\u659c\u7387\u53d8\u4e3a $-1$\uff1b\n\n1. \u7ebf\u6bb5\u4e0d\u5355\u964d\u4e14\u5728 $a_i$ \u53f3\u4fa7\uff0c\u659c\u7387\u53d8\u4e3a $1$\uff1b\n\n\n\u8003\u8651\u4ece $f_{i-1}$ \u5230 $f_i$\uff0c\u4e00\u4e2a $a_i$ \u4f1a\u5bf9\u7b54\u6848\u9020\u6210\u600e\u6837\u7684\u5f71\u54cd\u3002\n\n\u8bbe\u7b54\u6848\u4e3a $ans$\uff0c\u4e5f\u5c31\u662f\u8003\u8651 $i$ \u589e\u52a0\u65f6 $ans$ \u5982\u4f55\u6539\u53d8\u3002\n\nCase1: $a_i\\geq op_{i-1}$\n\n\u8fd9\u4e2a\u65f6\u5019 $a_i$ \u524d\u9762\u7684\u7ebf\u6bb5\u659c\u7387\u90fd $<0$ \u4e86\uff0c\u800c $op_{i-1}$ \u53c8\u662f $f_{i-1,j}$ \u53d6\u5230\u6700\u5c0f\u503c\u65f6\u7684 $j$\uff0c\u53c8\u5728 $a_i$ \u524d\u9762\uff0c\u6240\u4ee5\u53ef\u4ee5\u4ece $op_{i-1}$ \u8f6c\u79fb\u800c\u6765\u3002\u7b54\u6848\u53d8\u4e3a $f_{i,a_i}$ \u5904\u7684\u53d6\u503c\u5373\u4e3a $f_{i-1,op_{i-1}}+|a_i-a_i|$\uff0c$ans$ \u4e0d\u53d8\u3002\n\n\u7531\u4e8e\u524d\u9762\u7684\u7ebf\u6bb5\u659c\u7387\u90fd\u4f1a $-1$\uff0c\u8981\u7ef4\u62a4\u5806\u7684\u610f\u4e49\uff0c\u5c31\u628a $a_i$ push \u8fdb\u5806\u4e2d\uff0c\u8fd9\u6837\u5806\u4e2d\u6240\u6709\u5143\u7d20\u5176 pop \u5b8c\u7684\u6b21\u6570\u90fd $+1$\uff0c\u5219\u659c\u7387\u5c31 $-1$\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/70fzs2um.png)\n\nCase2: $a_i<op_{i-1}$\n\n\u9996\u5148\u8003\u8651\u7b54\u6848\u6539\u53d8\u6210\u4ec0\u4e48\u6837\u5b50\uff0c\u6ce8\u610f\u5230\u65b0\u7684\u51b3\u7b56\u70b9 $op_i$ \u5373\u4e3a\u56fe\u4e2d\u7ea2\u70b9\u548c $op_{i-1}$ \u4e4b\u95f4\u7684\u659c\u7387\u53d8\u4e3a\u4e86 $0$\uff0c\u6240\u4ee5 $f_{i,op_i}=f_{i,op_{i-1}}=f_{i-1,op_{i-1}}+op_{i-1}-a_i$\u3002\u4f8b\u5982\u56fe\u4e2d\uff0c\u8fd9\u4e2a\u65f6\u5019\u6bcf\u90e8\u5206\u7684\u7ebf\u6bb5\u7684\u659c\u7387\u7531\u56fe\u4e2d\u9ed1\u8272\u7684\u53d8\u6210\u7ea2\u8272\u7684\uff0c\u4e2d\u95f4\u6709\u4e00\u6bb5 $-3,-1$ \u4e2d\u95f4\u65ad\u5f00\u4e86\uff0c\u5c11\u4e86 $-2$\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u7531\u4e8e\u6211\u4eec push \u8fdb\u53bb\u4e86 $a_i$\uff0c\u8fd8\u60f3\u8981\u7ef4\u62a4\u5806\u7684\u610f\u4e49\uff0c\u5c31\u8981\u628a $op_{i-1}$ \u5f39\u51fa\uff0c\u518d\u628a $a_i$ \u538b\u8fdb\u53bb\uff0c\u4f7f\u5176\u62e5\u6709\u659c\u7387\u4e3a $-2$ \u7684\u6bb5\u3002\n\n\u6211\u4eec\u8981\u7ef4\u62a4\u5806\u80fd\u591f\u4ee5 $1$ \u9012\u589e\u5b9e\u9645\u4e0a\u662f\u8ba9\u6bcf\u6b21 $a_i<top$ \u7684\u65f6\u5019\u4fdd\u8bc1\u52a0\u8fdb\u53bb $a_i$ \u540e $top$ \u4f5c\u4e3a\u53f3\u7aef\u70b9\u4ee3\u8868\u7684\u7ebf\u6bb5\u659c\u7387\u53d8\u4e3a\u4e86 $-1$\uff0c\u4fdd\u8bc1\u5b83\u4e00\u5b9a\u662f\u9700\u8981\u5f39\u51fa\u7684\u70b9\u3002\u6240\u4ee5\u591a push \u8fdb\u53bb\u662f\u5bf9\u7684\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/5zvvzbnh.png)\n\n> \u56fe\u4e2d\u4e3a\u4e00\u4e2a\u6817\u5b50\uff0c\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4e24\u6761\u7ebf\u6bb5\u4e4b\u95f4\u7684\u957f\u5ea6\u53ef\u80fd\u4e3a $0$\uff0c\u4f46\u8fd9\u4e0d\u5f71\u54cd\u7b54\u6848\u3002\n\n\u7efc\u4e0a\u6240\u8ff0\uff0c\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a\u5f88\u7b80\u6d01\u7684\u4ee3\u7801\u6765\u5b8c\u6210\u8fd9\u4e2a\u8fc7\u7a0b\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n\\log n)$\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\ntemplate <typename T> T Max(T x, T y) { return x > y ? x : y; }\ntemplate <typename T> T Min(T x, T y) { return x < y ? x : y; }\ntemplate <typename T>\nT &read(T &r) {\n\tr = 0; bool w = 0; char ch = getchar();\n\twhile(ch < '0' || ch > '9') w = ch == '-' ? 1 : 0, ch = getchar();\n\twhile(ch >= '0' && ch <= '9') r = (r << 3) + (r << 1) + (ch ^ 48), ch = getchar();\n\treturn r = w ? -r : r;\n}\nconst int N = 500010;\nint n, a;\nstd::priority_queue<int>q;\nlong long ans;\nsigned main() {\n\tread(n);\n\tfor(int i = 1; i <= n; ++i) {\n\t\tread(a); q.push(a);\n\t\tif(a < q.top()) {\n\t\t\tans += q.top() - a;\n\t\t\tq.pop();\n\t\t\tq.push(a);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans);\n\treturn 0;\n}\n```\n\n\u611f\u8c22slyz\u7684\u4e24\u4f4d\u5b66\u957f\u7684\u6307\u70b9\u4ee5\u53ca [Mr_Wu \u7684\u9898\u89e3](https://www.luogu.com.cn/blog/Mr-Wu/solution-p4597)\u3002\n\n\u7b14\u8005\u624d\u758f\u5b66\u6d45\uff0c\u5982\u6709\u9519\u8bef\u6b22\u8fce\u6307\u51fa\uff0c\u5982\u6709\u7591\u60d1\u4e5f\u6b22\u8fce\u63d0\u51fa\u3002",
        "postTime": 1625665563,
        "uid": 223298,
        "name": "do_while_true",
        "ccfLevel": 8,
        "title": "\u300c\u9898\u89e3\u300d\u6d1b\u8c37P4597 \u5e8f\u5217sequence"
    },
    {
        "content": "\u672c\u5173\u5361\u9700\u8981\u7684\u88c5\u5907\uff1a\u5806+\u5f3a\u5927\u7684\u601d\u8003\n\n\u770b\u4e86\u8bb8\u591a\u5806\u505a\u6cd5\u7684\u9898\u89e3\uff0c\u90fd\u53ea\u770b\u7684\u4e2a\u534a\u61c2\uff08\u5c31\u662f\u56e0\u4e3a\u6211\u592a\u5f31\u4e86\uff09\uff0c\u6700\u540e\u81ea\u5df1\u6a21\u62df\u4e86\u4e00\u4e0b\u5c31\u61c2\u4e86\uff1f\uff01\n\n\u8fd9\u91cc\u5199\u4e00\u4efd\u81ea\u8ba4\u4e3a\u8fd8\u7b97\u80fd\u4e00\u6b21\u770b\u61c2\u7684\u9898\u89e3\u3002\n\n\u867d\u7136\u65b9\u6cd5\u76f8\u540c\uff0c\u4f46\u8fd9\u662f\u4e00\u79cd\u65b0\u65b9\u5f0f\u6765\u7406\u89e3\u8fd9\u4e2a\u505a\u6cd5\uff0c\u8fd9\u662f\u9053\u601d\u7ef4\u9898\u3002\n\n----------\n\n\n\u5148\u4e0a\u64cd\u4f5c\uff1a\n```\n//q\u4e3a\u5927\u6839\u5806\uff0c\u88c5b\u6570\u5217\nfor(int i=1;i<=n;i++)\n{\n\tq.push(a[i]);\n\tif(a[i]<a.top())\n\t{\t\n    \t\tans+=q.top()-a[i];\n\t\tq.pop();q.push(a[i]); \n\t}\n}\n```\n\u6ca1\u9519\uff0c\u6838\u5fc3\u4ee3\u7801\u5c31\u8fd9\u4e9b\uff0c\u8981\u5148\u770b\u61c2\u4ee3\u7801\u6d41\u7a0b\u3002\n\n\u5206\u6790\uff1a\n\n\u6211\u4eec\u5047\u8bbe\u201c\u6700\u5c0f\u82b1\u8d39\u201d\u662f**s**\uff0c**x**\u5bf9\u5e94\u7684b\u6570\u7ec4\u7684\u503c\u8bbe\u4e3a**bx**\u3002\n\n\u4e00\u5f00\u59cb\uff0c\u5047\u5982\u9047\u5230\u524d\u51e0\u4e2a\u662f\u9012\u589e\u7684\uff08\u53ea\u6709\u4e00\u4e2a\u4e5f\u5f53\u4f5c\u9012\u589e\uff09\uff0c\u90a3\u4e48\u5c31\u4ee4```bi=ai```\u5c31\u597d\u4e86\u3002\n\n\u7136\u540e\u65b0\u6765\u4e86\u4e00\u4e2a\u6570**x**\u6bd4\u524d\u9762b\u6570\u5217\u4e2d\u7684\u6700\u5927\u503c\u6570**y**\u5c0f\uff0c\u4e0d\u6ee1\u8db3\u9012\u589e\uff0c\u53ea\u9700\u8ba9\u4ed6\u4eec\u201c\u4e92\u76f8\u9760\u8fd1\u5230\u4e00\u8d77\u201d\uff0c\u4f7f```bx=by```,\u5c31\u80fd\u6ee1\u8db3**s**\u8fd8\u662f\u6700\u5c0f\u7684\u3002\n\n\u8be6\u7ec6\u70b9\uff1a\n\n\u4e3a\u4ec0\u4e48y\u8981\u53d6\u6700\u5927\u503c\uff0c\u56e0\u4e3a\u8981\u6ee1\u8db3\u9012\u589e\uff0c\u6211\u4eec\u81f3\u5c11\u8981\u8ba9**bx**\u4e3a\u6700\u5927\u503c\uff0c\u800c\u4e14**by**\u4e0d\u53d8\uff0c\u8fd9\u6837**s**\u81f3\u5c11\u8981\u52a0```y-x```\uff0c\n\n\u5982\u679c\u4e0d\u60f3\u8ba9**bx**\u8dd1\u5230**y**\u90a3\u4e48\u5927\uff0c\u5c31\u5e94\u8be5\u8ba9**by**\u5c0f\u4e00\u70b9\uff0c\u5047\u8bbe\u51cf\u5c0f\u4e86**c**\uff0c\n\n\u8fd9\u6837**bx**\u80fd\u51cf**c**\uff0c\u4f46\u662f\u56e0\u4e3a**by**\u51cf**c**\u540e\u53c8\u6bd4**y**\u5c0f\u4e86\uff0c\u6240\u4ee5**bx**\u53d8\u5c0f\u8ba9**s**\u51cf\u4e86**c**\uff0c\u4f46**by**\u7684\u51cf\u5c11\u4e5f\u8ba9**s**\u52a0\u4e86**c**\uff0c\u6240\u4ee5**s**\u52a0\u7684\u6700\u5c0f\u503c\u5c31\u662f```y-x```\u3002\n\n\u6211\u4eec\u8ba9**x**\u548c**y**\u8c03\u6574\u5c31\u591f\u4e86\uff0c\u56e0\u4e3a\u522b\u7684\u6570\u4e00\u52a8\u5c31\u4f1a\u4f7f**s**\u589e\u52a0\u3002\n\n\u90a3\u4e3a\u4e86\u8ba9\u672a\u6765\u66f4\u5bb9\u6613\u6ee1\u7ec4\u9012\u589e\uff0c\u5e94\u4f7f**bx**\u548c**by**\u8d8a\u5c0f\u8d8a\u597d\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba9```by=x```\u3002\n\n**\u5c0f\u7ed3**\uff1a\n\u5c31\u662f\u53ef\u4ee5\u4f7f\n```\nby=x;\nans+=y-x;//ans+=q.top()-a[i]\n```\n\n\n----------\n\n**Boss is coming\uff01**\n\n\u95ee\u9898\u6765\u4e86\uff0c\u5047\u8bbe**y**\u4e4b\u524d\u7684\u6700\u5927\u503c\u4e3a**z**\uff0c\u5982\u679c```x<z<y```,\u56e0\u4e3a```bz=z>x=by```,\u90a3```by=x```\u4f1a\u4f7f**b**\u6570\u5217\u4e0d\u6ee1\u8db3\u9012\u589e\uff0c\u50cf\u8fd9\u79cd\u60c5\u51b5\uff1a\n```\n\t     y\n       z\n     -     x\n   -\n -\n```\n\u8c03\u6574\u540e\uff1a\n```\n\t     \n       z\n     -   y x\n   -\n -\n```\n\u6211\u4eec\u5148\u8ba9\u5b83\u4e0d\u6ee1\u8db3\uff0c\u7ee7\u7eed\u4e0a\u9762\u7684\u5904\u7406\u65b9\u6cd5\uff0c\n\n\u73b0\u5728\u7a81\u51fa\u6765\u4e86\u4e00\u4e2a**z**\uff0c\u6211\u4eec\u7b49\u5f85\u7740\u672a\u6765\u6709\u4e00\u4e2a\u65b0\u6765\u7684\u6570\u628a\u73b0\u5728\u7684\u6700\u5927\u503c**z**\u62c9\u4e0b\u53bb\uff0c\u4f7f\u5e8f\u5217\u5408\u6cd5\u3002\n\n\u5982\u679c\u5230\u6700\u540e\u4e0d\u5408\u6cd5\uff0c\u56e0\u4e3a\u5728\u8c03\u6574**x**\u548c**y**\u65f6\uff0c**bx**\uff0c**by**\u79fb\u5230\u533a\u95f4[x,y]\u4e2d\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e\u90fd\u80fd\u6ee1\u8db3**s**\u52a0\u7684\u6700\u5c0f\uff0c\n\n\u800c```y>z>x```,**z**\u5728\u8fd9\u4e2a\u533a\u95f4\u5185\uff0c\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u6700\u540e\u5c06\u4e0d\u5408\u6cd5\u7684\u518d\u8c03\u6574\u5230\u5408\u6cd5\uff0c\u800c**s**\u4e0d\u53d8\u3002\n\n\u8865\u5145\uff1a\n\u4e3a\u4ec0\u4e48\u5230\u8fd9\u91cc\u4ecd\u53d6\u6700\u5927\u503c**y**\uff1f\n\n\u5176\u5b9e\u6211\u4eec\u53ea\u662f\u5047\u8bbeby=x\u8fd9\u6837\u6700\u597d\u7684\u60c5\u51b5\uff0c\u5b9e\u9645\u4e0a\u4ecd\u9700\u53d6\u6700\u5927\u503c\u6ee1\u8db3\u9012\u589e\uff0c\u4e5f\u5c31\u662f\u8ba9\u6700\u540e\u4e0d\u5408\u6cd5\u7684\u5e8f\u5217\u4e00\u5b9a\u80fd\u8c03\u6574\u5230\u5408\u6cd5\uff0c\u5e76\u4e14\u4f7f**s**\u6700\u5c0f\u3002\n\n\u4e0a\u9762\u4ee3\u7801\u81f3\u6b64\u8bf4\u660e\u5b8c\u6bd5\u3002\n\n\n----------\n\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```\n#include<cstdio>\n#include<queue>\nusing namespace std;\nint n;\npriority_queue<int>q;\nlong long ans;\nint main()\n{\n\tscanf(\"%d\",&n);\n\tans=0;\n\twhile(n--)\n\t{\n\t\tint a;scanf(\"%d\",&a);\n\t\tq.push(a);\n\t\tif(a<q.top())\n\t\t{\n\t\t\tans+=(long long)(q.top()-a);\n\t\t\tq.pop();q.push(a); \n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1576849047,
        "uid": 119032,
        "name": "L_key",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4597 \u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "\u672c\u6587\u540c\u6b65\u53d1\u8868\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a[Link](https://www.watertomato.com/p4597-%e5%ba%8f%e5%88%97sequence-%e9%a2%98%e8%a7%a3/)\u3002\n\n## \u9898\u610f\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/P4597)\u3002\n\n\u7ed9\u5b9a\u4e00\u4e2a\u5e8f\u5217\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u628a\u67d0\u4e2a\u6570 $+1$ \u6216 $-1$\u3002\u8981\u6c42\u628a\u5e8f\u5217\u53d8\u6210\u975e\u964d\u6570\u5217\u3002\u800c\u4e14\u8981\u6c42\u4fee\u6539\u540e\u7684\u6570\u5217\u53ea\u80fd\u51fa\u73b0\u4fee\u6539\u524d\u7684\u6570\u3002\n\n## \u89e3\u6790\n\n\u7ed9\u51fa\u4e00\u79cd\u8be5\u9898\u9898\u89e3\u533a\u4e2d\u90fd\u6ca1\u6709\u63d0\u5230\u7684\u505a\u6cd5\uff1a\u6574\u4f53\u4e8c\u5206\u3002\n\n\u5bf9\u4e8e\u6574\u4e2a\u533a\u95f4\u6309\u7167\u503c\u57df\u8fdb\u884c\u4e8c\u5206\uff0c\u521d\u59cb\u503c\u57df\u4e3a\u8d1f\u6781\u5927\u503c\u5230\u6b63\u6781\u5927\u503c\uff0c\u6bcf\u6b21\u4e8c\u5206\u90fd\u627e\u51fa $mid$ \u503c\u7684\u5206\u754c\u7ebf\uff0c\u7136\u540e\u5bf9\u4e8e\u5de6\u53f3\u4e24\u4e2a\u533a\u95f4\u4f9d\u6b21\u4e8c\u5206\u3002\u7531\u4e8e\u5206\u754c\u7ebf\u5de6\u4fa7\u7684\u90a3\u4e2a\u6570\u53d6 $mid$ \u4e00\u5b9a\u6bd4\u53d6 $mid+1$ \u4f18\u79c0\uff0c\u7531\u9898\u76ee\u8981\u6c42\u7684\u975e\u964d\u6570\u5217\u53ef\u4ee5\u63a8\u77e5\u6574\u4f53\u4e5f\u7b26\u5408\u8be5\u8981\u6c42\uff0c\u56e0\u6b64\u6574\u4f53\u4e8c\u5206\u4e00\u5b9a\u662f\u6b63\u786e\u7684\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n\\log v)$\uff0c$v$ \u4e3a\u503c\u57df\uff0c\u8db3\u591f\u901a\u8fc7\u672c\u9898\u3002\n\n\u8be6\u89c1\u4ee3\u7801\u3002\n\n\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=1e6+5;\nconst int inf=2e9+7;\nint n,a[N],b[N];\ninline void solve(int L,int R,int l,int r){\n\tif(L>R||l>=r) return;//\u8fb9\u754c\n\tint mid=(l+r)>>1,sum=0;\n\tfor(int i=L;i<=R;i++) sum+=abs(a[i]-mid-1);\n\tint minn=sum,p=L-1;//\u521d\u503c\u5168\u90e8\u5b9a\u4e3a mid+1\n\tfor(int i=L;i<=R;i++){\n\t\tsum-=abs(a[i]-mid-1);sum+=abs(a[i]-mid);\n\t\tif(sum<minn){\n\t\t\tminn=sum;\n\t\t\tp=i;\n\t\t}//\u627e\u51fa\u5206\u754c\u7ebf\n\t}\n\tfor(int i=L;i<=p;i++) b[i]=mid;\n\tfor(int i=p+1;i<=R;i++) b[i]=mid+1;//\u5c1d\u8bd5\u8d4b\u503c\n\tsolve(L,p,l,mid);solve(p+1,R,mid+1,r);//\u5bf9\u4e8e\u4e24\u4e2a\u533a\u95f4\u4f9d\u6b21\u7ee7\u7eed\u4e8c\u5206\n}\nsigned main(){\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++) scanf(\"%lld\",&a[i]);\n\tsolve(1,n,-inf,inf);//\u6574\u4f53\u4e8c\u5206\n\tint ans=0;\n\tfor(int i=1;i<=n;i++) ans+=abs(a[i]-b[i]);\n\tprintf(\"%lld\\n\",ans);//\u7edf\u8ba1\u7b54\u6848\n\treturn 0;\n}\n```",
        "postTime": 1626082033,
        "uid": 195229,
        "name": "water_tomato",
        "ccfLevel": 7,
        "title": "P4597 \u5e8f\u5217sequence \u9898\u89e3"
    },
    {
        "content": "\u672c\u6587\u7ae0\u53c2\u8003\u4e86\u795e\u7287 wzporz \u7684\u8fd9\u7bc7[\u9898\u89e3](https://www.luogu.com.cn/blog/Emoairx/boi2004-sequence-ti-xie)\n\n\n\n------------\n\n\n\u8003\u8651 dp\n\n\u8bbe $f_{i,j}$ \u4e3a\u7b2c $i$ \u4e2a\u6570\u5b57\u5c0f\u4e8e\u7b49\u4e8e $j$ \u4e14\u524d $i$ \u4e2a\u6570\u5b57\u6ee1\u8db3\u975e\u964d\u5e8f\u5217\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002\n\n\u663e\u7136\uff0c\u6709\u7ecf\u7531\u6700\u5c0f\u4ee3\u4ef7\u4fee\u6539\u540e\u7684\u5408\u6cd5\u5e8f\u5217\u7531\u4fee\u6539\u524d\u7684\u6570\u5b57\u7ec4\u6210\u3002\n\n\u8003\u8651 dp \u8f6c\u79fb\u3002\u7b2c\u4e00\u6b65\u6709 $f_{i,j}=f_{i-1,j}+|a_i-j|$\n\n\u7b2c\u4e8c\u6b65\u6709 $f_{i,j}=\\min(f_{i,j-1},f_{i,j})$\n\n\u590d\u6742\u5ea6\u4e3a $\\mathcal{O(n \\max a_i)}$\uff0c\u8003\u8651\u5982\u4f55\u4f18\u5316\u3002\n\n\u7b2c\u4e00\u6b65\u53ef\u4ee5\u5f97\u51fa $f_i$ \u662f\u4e2a\u4e0a\u51f8\u58f3\uff0c\u7b2c\u4e8c\u6b65\u53ef\u4ee5\u5f97\u51fa $f_i$ \u662f\u4e2a\u4e00\u6b21\u51fd\u6570\u659c\u7387\u5747 $\\le 0$ \u7684\u4e0a\u51f8\u58f3\u3002\n\n\u7136\u540e\u8003\u8651\u4ece $f_{i-1}$ \u5230 $f_{i}$ \u7684\u53d8\u5316\u3002\u8bbe $f_i$ \u4e2d\u659c\u7387\u4e3a $0$ \u7684\u4e00\u6b21\u51fd\u6570\u7684\u8d77\u59cb\u70b9\u6a2a\u5750\u6807\u4e3a $pos$\n\n1. $a_i<pos$\n\n**\u4e5f\u5c31\u662f\u4ee4 $-\u221e \\sim a_i$ \u4e2d\u6240\u6709\u4e00\u6b21\u51fd\u6570\u659c\u7387\u52a0\u4e00\uff0c\u4ee4 $a_i \\sim \u221e$ \u4e2d\u6240\u6709\u659c\u7387\u5927\u4e8e $0$ \u7684\u4e00\u6b21\u51fd\u6570\u659c\u7387\u51cf\u4e00\u3002**\n\n\u663e\u7136\u7b54\u6848\u589e\u52a0\u4e86 $pos-a_i$\n\n\u6548\u679c\u5982\u4e0b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/41rxli78.png)\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/zub5ofqu.png)\n\n\n2. $a_i \\ge pos$\n\n**\u4e5f\u5c31\u662f\u4ee4 $-\u221e \\sim a_i$ \u4e2d\u6240\u6709\u4e00\u6b21\u51fd\u6570\u7684\u659c\u7387\u52a0\u4e00\u3002**\n\n\u663e\u7136\u7b54\u6848\u6ca1\u6709\u589e\u52a0\u3002\n\n\u6548\u679c\u5982\u4e0b\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/opnvl21y.png)\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/x9gk8fqe.png)\n\n\n\u8003\u8651\u53ea\u7ef4\u62a4\u4e00\u6b21\u51fd\u6570\"\u62d0\u70b9\"\u7684\u6a2a\u5750\u6807\uff0c\u5bf9\u4e8e\u8fd9\u4e24\u79cd\u5206\u7c7b\u8ba8\u8bba\uff08\u663e\u7136 $pos$ \u5c31\u662f\"\u62d0\u70b9\"\u6a2a\u5750\u6807\u4e2d\u7684\u6700\u5927\u503c\uff09\n\n\u5982\u679c $a_i<pos$\uff0c$pos$ \u4e0d\u4f5c\u4e3a\u4e00\u6b21\u51fd\u6570\u7684\"\u62d0\u70b9\"\uff0c\u76f4\u63a5\u53bb\u6389\n\n\u5982\u679c $a_i \\ge pos$\uff0c\u52a0\u5165 $a_i$ \u4f5c\u4e3a\u4e00\u6b21\u51fd\u6570\u7684\"\u62d0\u70b9\"\u3002\n\n\u4e0a\u8ff0\u64cd\u4f5c\u76f4\u63a5\u7528\u5806\u7ef4\u62a4\u5373\u53ef\u3002\n\n\u7136\u800c\u4e0a\u9762\u7684\u5206\u7c7b\u8ba8\u8bba\u662f\u9519\u7684\uff0c\u539f\u56e0\u662f\u53bb\u6389 $pos$ \u9700\u8981\u6ee1\u8db3\u6761\u4ef6\uff1a\u4ee5 $pos$ \u4e3a\u7ec8\u70b9\u7684\u4e00\u6b21\u51fd\u6570\u7684\u659c\u7387\u662f $1$\u3002\n\n\u5982\u679c\u4e0d\u5b58\u5728\u659c\u7387\u4e3a $1$ \u7684\u4e00\u6b21\u51fd\u6570\u600e\u4e48\u529e\uff1f\n\n\u53d1\u73b0\u659c\u7387\u4e3a $1$ \u4e0d\u5b58\u5728\u80af\u5b9a\u662f\u56e0\u4e3a $a_i<pos$ \u65f6 \"\u4ee4\u90e8\u5206\u659c\u7387\u52a0\u4e00,\u90e8\u5206\u659c\u7387\u51cf\u4e00\" \u7684\u64cd\u4f5c\u3002\n\n\u6211\u4eec\u8bbe $a_i<pos$ \u65f6 $a_i$ \u4e8e $f_{i-1}$ \u6240\u5728\u7684\u4e00\u6b21\u51fd\u6570\u7684\u659c\u7387\u4e3a $k$\u3002\u90a3\u4e48 $f_i$ \u4e2d\u8fd9\u6bb5\u4e00\u6b21\u51fd\u6570\u80af\u5b9a\u5206\u4e3a\u4e86\u4e24\u6bb5\uff0c\u4e00\u6bb5\u659c\u7387\u4e3a $k-1$\uff0c\u4e00\u6bb5\u659c\u7387\u4e3a $k+1$\u3002\u6240\u4ee5\u659c\u7387 $k$ \u662f\u4e0d\u5b58\u5728\u7684\u3002**\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f80\u5806\u4e2d\u518d\u6254\u4e00\u4e2a $a_i$\uff0c\u6765\u8868\u793a\u8fd9\u4e2a\u4e0d\u5b58\u5728\u7684\u659c\u7387\u3002**\n\n\u8fd9\u6837\uff0c\u5982\u679c\u659c\u7387 $1$ \u4e0d\u5b58\u5728\u7684\u8bdd\uff0c\u53bb\u6389 $pos$ \u540e\u5806\u91cc\u8fd8\u6709\u4e00\u4e2a $pos$\uff0c\u5e76\u4e0d\u5f71\u54cd\u6b63\u786e\u6027\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\npriority_queue<int> q;\nint a[500005];\nsigned main(){\n\tint n;\n\tlong long ans=0;\n\tcin>>n;\n\tfor(int i=1;i<=n;++i)\n\t\tcin>>a[i];\n\tq.push(a[1]);\n\tfor(int i=2;i<=n;++i){\n\t\tint u=q.top();\n\t\tif(a[i]<u) q.pop(),ans+=(long long)u-a[i],q.push(a[i]),q.push(a[i]);\n\t\telse q.push(a[i]);\n\t}\n\tcout<<ans;\n\treturn 0;\n}\n```\n\n\n\n\n------------\n\n\n\u987a\u4fbf\u4e00\u63d0\uff0c\u4e0a\u8ff0\u90e8\u5206\u601d\u8def\u8fd8\u53ef\u4ee5\u7528\u5728 [APIO2016 \u70df\u706b\u8868\u6f14](https://www.luogu.com.cn/problem/P3642) \u548c [A New Beginning](https://codeforces.com/contest/1534/problem/G) \u4e2d\u3002\u8fd9\u79cd\u6280\u5de7\u597d\u50cf\u53eb Slope Trick\n\n\u7531\u4e8e\u8bfb\u8005\u672c\u4eba\u6c34\u5e73\u6709\u9650\uff0c\u6240\u4ee5\u53ef\u80fd\u6709\u8bb8\u591a\u9519\u8bef\uff0c\u6b22\u8fce\u8bfb\u8005\u5728\u8bc4\u8bba\u533a\u4e0b\u67e5\u6f0f\u8865\u7f3a\uff08",
        "postTime": 1608020821,
        "uid": 344016,
        "name": "wurzang",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4597 \u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "## \u9898\u9762\n\n[P4597 \u5e8f\u5217sequence](https://www.luogu.com.cn/problem/P4597)\n\n## \u89e3\u7b54\n\n### \u65b9\u6cd51\uff08\u4e0d\u662f\u91cd\u70b9\uff0c\u56e0\u4e3a\u8d85\u65f6\uff0c\u53ef\u4ee5\u4e0d\u770b\uff09\n\u65b9\u6cd5\uff1a$\\color{red}\\text{\u52a8\u6001\u89c4\u5212}$\n\n\u5b9a\u4e49\u72b6\u6001$dp_{i,j}$\u8868\u793a\u5c06\u524d$i$\u4e2a\u6570\u975e\u964d\u5e8f\u6392\u5217\uff0c\u6700\u540e\u4e00\u9879\u662f$j$\u9700\u64cd\u4f5c\u7684\u6700\u5c0f\u6b21\u6570\u3002\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a$dp_{i,j}=\\max{dp_{i-1,k} + |i - k|}$\n\n> \u800c\u4e14\u8981\u6c42\u4fee\u6539\u540e\u7684\u6570\u5217\u53ea\u80fd\u51fa\u73b0\u4fee\u6539\u524d\u7684\u6570\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u79bb\u6563\u5316\uff0c$j$\u7684\u8303\u56f4\u53d8\u4e3a$[1, n]$\u3002\n\n\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f$O(n^2)$\u3002~~\u53c8\u957f\u53c8\u81ed\u8fd8TLE\u7684~~\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <cstring>\n\nusing namespace std;\n\nconst int MAX = 505;\nint dp[MAX][MAX], a[MAX], b[MAX], tot, n, m;\n\nint main() {\n\tcin >> n;\n\tmemset(dp, 0xcf, sizeof(dp));\n\tfor (int i = 1; i <= n; i++)\n\t\tcin >> a[i], dp[i][0] = 0;\n\tcin >> m;\n\tfor (int j = 1; j <= m; j++)\n\t\tcin >> b[j], dp[0][j] = 0;\n\tfor (int i = 1; i <= n; i++) {\n\t\tint val = 0, pos = 0;\n\t\tfor (int j = 1; j <= m; j++) {\n\t\t\tif (a[i] == b[j])\n\t\t\t\tdp[i][j] = val + 1, pre[i][j] = pos;\n\t\t\telse\n\t\t\t\tdp[i][j] = dp[i - 1][j], pre[i][j] = j;\n\t\t\tif (b[j] < a[i] && dp[i - 1][j] >= val)\n\t\t\t\tval = dp[i - 1][j], pos = j;\n//\t\t\tcout << i << \" \" << j << \" \" << dp[i][j] << \" \" /*<< pre[i][j] */<< endl;\n\t\t}\n\t}\n\tint p = 1, ans = dp[n][1];\n\tfor (int i = 1; i <= m; i++)\n\t\tif (dp[n][i] > ans)\n\t\t\tans = dp[n][i], p = i;\n\tcout << dp[n][p] << endl;\n\treturn 0;\n}\n```\n\u5f88\u660e\u663e\u65e0\u6cd5\u901a\u8fc7\u3002\n\n### \u65b9\u6cd52\uff08\u91cd\u70b9\uff09\n\u65b9\u6cd5\uff1a$\\color{red}\\text{\u8d2a\u5fc3}$\n\n\u5047\u5982$a_i$\u81f3$a_j$\u5df2\u7ecf\u975e\u964d\u5e8f\u6392\u5217\uff0c\u4f46\u662f$a_{j+1}$<$a_k(i \\le k \\le j$\u4e14$a_k$\u662f$a_i$\u81f3$a_j$\u7684\u6700\u5927\u503c)\u7684\u8bdd,\u6211\u4eec\u5fc5\u987b\u8c03\u6574\u3002\u6700\u5bb9\u6613\u60f3\u5230\u5c06$a_k$\u51cf\u5c0f\uff0c$a_{j+1}$\u589e\u5927\uff0c\u76f4\u5230\u76f8\u7b49\u3002\u8fd9\u6837\u82b1\u8d39\u4e86$a_k-a_j+1$\u6b21\u64cd\u4f5c\u3002\u6700\u597d\u7684\u8bdd\uff0c\u6211\u4eec\u5e94\u8be5\u628a$a_k$\u51cf\u5c11\u5230$a_{j+1}$\uff0c\u8fd9\u6837\u80fd\u591f\u6700\u5927\u9650\u5ea6\u51cf\u5c11\u540e\u9762\u7684\u6570\u5927\u4e8e$a_k$\u7684\u6570\u91cf\u3002\n\n\u4f46\u662f\u51fa\u73b0\u4e86\u4e00\u4e2a\u95ee\u9898\u3002$a_k$\u53d8\u5c0f\u4e86\uff0c$a_i$\u5230$a_j$\u5c31\u6709\u53ef\u80fd\u4e0d\u662f\u975e\u964d\u5e8f\u6392\u5217\u4e86\u3002\u4e0d\u8fc7\u8fd9\u4e2a\u95ee\u9898\u5b9e\u9645\u4e0a\u4e0d\u9700\u8981\u8003\u8651\uff0c\u56e0\u4e3a\u6211\u4eec\u8fd9\u6837\u904d\u5386\u6570\u7ec4\u540e\u5f97\u5230\u7684\u7b54\u6848\uff0c\u7b56\u7565\u662f\u6709\u6d3b\u52a8\u7a7a\u95f4\u7684\u3002\u5047\u5982\u6211\u4eec\u5df2\u7ecf\u901a\u8fc7\u53e6\u5916\u4e00\u4e9b\u8c03\u6574\u4f7f$a_m$\u81f3$a_n$\u6ee1\u8db3\u6761\u4ef6\uff0c\u800c\u4e14$a_{m-1}>a_m$\uff0c\u5219$a_{m}$\u4e00\u5b9a\u662f\u4e0e\u4e4b\u540e\u7684\u4e00\u4e2a\u6570\u76f8\u7b49\u7684\u3002\u539f\u56e0\u5728\u524d\u6587\uff1a\n\n> \u6211\u4eec\u5e94\u8be5\u628a$a_k$\u51cf\u5c11\u5230$a_{j+1}$\n\n\u6211\u4eec\u5c31\u53ef\u4ee5\u628a$a_{m}$\u4e0d\u4e0b\u8c03\u8fc7\u591a\uff0c\u5c11\u4e0b\u8c03\u4e00\u4e9b\u5373\u53ef\u3002\u56e0\u4e3a\u539f\u6765$a_{m-1} <= a_m$($a_m$\u662f\u6700\u5927\u503c\u5440)\uff0c\u53ea\u9700\u8981\u4e0b\u8c03\u5230$a_{m-1}$\u7684\u5927\u5c0f\u5c31\u884c\u4e86\u3002\u600e\u4e48\u4fdd\u8bc1\u4e0d\u4e0b\u8c03\u5230\u540e\u9762\u7684\u90a3\u4e2a\u6570\u4e0d\u4f1a\u4ea7\u751f\u65b0\u7684\u8c03\u6574\u5462\uff1f\u8fd9\u662f\u56e0\u4e3a\u5982\u679c\u6709$a_{m}' > a_p(p > m)$\u7684\u8bdd\uff0c\u6309\u7167\u539f\u6765\u7684\u7b56\u7565\uff0c$a_{m-1}$\u4f5c\u4e3a\u65b0\u7684\u6700\u5927\u503c\uff0c\u4f1a\u51cf\u5c0f\u6210$a_p$\uff0c\u91cd\u65b0\u53d8\u56de\u975e\u964d\u5e8f\u5217\u3002\n\n\u5b9e\u73b0\uff1a\u56e0\u4e3a\u9700\u8981\u6c42\u6700\u5927\u503c\uff0c\u6240\u4ee5\u8981\u4e00\u4e2a\u5806\u3002\u65f6\u95f4\u590d\u6742\u5ea6$O(n \\log n)$\u3002\n\n#### Code\n```cpp\n#include <iostream>\n#include <queue>\n#include <cstdio>\n\nusing namespace std;\n\nint main() {\n\tint n, x;\n\tlong long ans = 0;\n\tpriority_queue <int> Q;\n\tscanf(\"%d%d\", &n, &x);\n\tQ.push(x); \n\twhile (--n) {\n\t\tint tp = Q.top();\n\t\tscanf(\"%d\", &x);\n\t\tif (x < tp) {\n\t\t\tans = ans + tp - x;\n\t\t\tQ.pop();\n\t\t\tQ.push(x);\n\t\t}\n\t\tQ.push(x);\n\t}\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n\n### THE END",
        "postTime": 1596532560,
        "uid": 253946,
        "name": "ClHg2",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4597 \u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u601d\u7ef4\u6027\u5f88\u5f3a\u7684\u9898\uff0c\u5199\u4e00\u53d1\u9898\u89e3\u5e2e\u52a9\u6211\u81ea\u5df1\u548c\u5927\u5bb6\u7406\u89e3\u3002\n\n**\u539f\u9898\u94fe\u63a5\uff1a**[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P4597)\n\n\n------------\n### \u9898\u76ee\u5927\u610f\uff1a\n\n\u589e\u51cf\u6570\u5217\u4e2d\u7684\u6570\u4f7f\u5176\u53d8\u4e3a\u6570\u5217\u4e2d\u7684\u5176\u4ed6\u6570\u8fdb\u800c\u4f7f\u5f97\u6570\u5217\u53d8\u4e3a\u975e\u964d\u5e8f\u6570\u5217\u3002\n\n------------\n### \u5206\u6790\uff1a\n\n\u8fd9\u9053\u9898\u7684\u5b9e\u8d28\u662f\u4e00\u4e2a\u53cd\u6094\u8d2a\u5fc3\u3002\n\n#### \u89c4\u5219\uff1a\n\n\u6211\u4eec\u4ece\u5934\u5f00\u59cb\u626b\u8fd9\u4e2a\u6570\u5217\uff0c\u5bf9\u4e8e $a_1\\sim a_i$ \u7684\u6570\u5217\uff1a\n\n1.\u82e5 $a_{x+1} \\le a_1  \\sim a_x$ \u4e2d\u7684\u6700\u5927\u503c,\u76f4\u63a5\u52a0\u5165\u5373\u53ef\u3002\n\n2.\u5426\u5219\u6211\u4eec\u8981\u5c06 $a_{x+1}$ \u4e0e $a_1 \\sim a_x$ \u4e2d\u7684\u6700\u5927\u503c\u7684\u5dee\u503c\u8ba1\u5165\u7b54\u6848\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\n\n\u6211\u4eec\u770b\u5230\u8fd9\u6837\u4e00\u4e2a\u6570\u5217\uff1a$[4,7,5,8]$\u3002\n\n\u6211\u4eec\u5f88\u5bb9\u6613\u770b\u51fa\u7b54\u6848\uff1a\u5e8f\u5217 $[4,7,7,8],ans=2$\u3002\n\n\u4f46\u5982\u679c\u6570\u5217\u662f\u8fd9\u6837\u7684\uff1a$[4,7,2,6]$\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5c06\u53d1\u73b0\uff1a\u6211\u4eec\u5728\u52a0\u5165\u7b2c\u4e09\u4e2a\u5143\u7d20\u65f6\uff0c\u5e8f\u5217\u53d8\u4e3a $4,4,2$,\u8fd9\u6837\u7684\u5e8f\u5217\u5c31\u4e0d\u4e25\u683c\u4e0b\u964d\u4e86\uff0c\u4f46\u6211\u4eec\u63a5\u7740\u6a21\u62df\uff0c\u52a0\u5b8c\u7b2c\u56db\u4e2a\u5143\u7d20\u540e\u5c31\u53d8\u6210\u4e86 $[4,4,2,4],ans=5$\u3002\n\n\u90a3\u6b63\u786e\u7684\u5e8f\u5217\u662f\u600e\u4e48\u6837\u7684\u5462\uff1f\n\n\u6211\u4eec\u624b\u63a8\u4e00\u4e0b\u53ef\u4ee5\u53d1\u73b0\uff0c\u662f $[4,5,5,6],ans=5$\u3002\n\n**$ans$ \u662f\u4e00\u6837\u7684\uff01**\n\n\u518d\u591a\u51e0\u7ec4\u6570\u636e\uff1f\n\n\u6211\u4eec\u4f77\u5bb9\u6613\u53d1\u73b0\uff0c$ans$ \u7684\u6700\u5c0f\u503c\u662f\u53ef\u4ee5\u88ab\u6570\u5217\u4e2d\u6570\u4e4b\u95f4\u7684\u5173\u7cfb\u7b97\u51fa\u6765\u7684\uff0c\u800c\u4e0e\u5e8f\u5217\u5904\u7406\u540e\u662f\u4ec0\u4e48\u6837\u7684\uff0c\u662f\u5347\u5e8f\u8fd8\u662f\u964d\u5e8f\u65e0\u5173\u3002\n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\uff1a\u201c\u6982\u62ec\u4e00\u4e0b\uff0c\u5bf9\u4e8e\u5f53\u524d\u7684\u6570\uff0c\u65e0\u8bba\u6700\u4f18\u89e3\u5982\u4f55\uff0c\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f\u4e00\u5b9a\u7684\u3002\u800c\u4e3a\u4e86\u4fdd\u8bc1\u4e4b\u540e\u7684\u89e3\u4e5f\u6700\u4f18\uff0c\u4ee4 $y$ \u51cf\u5c0f\u5230 $x$ \uff0c\u53ef\u4ee5\u4fdd\u8bc1\u4e4b\u540e\u7684\u89e3\u6700\u4f18\uff0c\u4e14\u4e0d\u4f1a\u5f71\u54cd\u5f53\u524d\u7684\u6700\u4f18\u89e3\u3002\u201d\u8fd9\u6bb5\u8bdd\u3002\u2014\u2014\u8f7d\u81ea [bztMinamoto](https://www.luogu.com.cn/user/41781) \u5927\u4f6c\u7684\u9898\u89e3\u3002\n\n\u7136\u540e\u52a0\u4e2a\u4f18\u5148\u961f\u5217\u7ef4\u62a4\u533a\u95f4\u6700\u5927\u503c\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6109\u5feb\u5730\u5199\u51fa\u8fd9\u9898\u4ee3\u7801\u5566\uff01\n\n------------\n### AC \u4ee3\u7801\n\n```cpp\n#include<cstdio>\n#include<iostream>\n#include<queue>\n#define ll long long//\u8bb0\u5f97\u5f00 long long\n\nusing namespace std;\n\nconst int N=5e5+10;\nll n,a[N],ans=0;\npriority_queue<ll> q;\n\nint main(){\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++) scanf(\"%lld\",&a[i]);\n\tfor(int i=1;i<=n;i++){\n\t\tq.push(a[i]);\n\t\tif(a[i]<q.top()){\n\t\t\tans+=q.top()-a[i];\n\t\t\tq.pop();\n\t\t\tq.push(a[i]);//\u628amaxn\u79fb\u52a8\u5230a[i]\u7684\u4f4d\u7f6e \n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```\n### \u53c2\u8003\u8d44\u6599\uff1a[\u5927\u4f6c\u535a\u5ba2](https://blog.csdn.net/Dove_xyh/article/details/104744900)\n\n**_Thanks for reading!_**",
        "postTime": 1657196375,
        "uid": 403146,
        "name": "Stephen_LDM",
        "ccfLevel": 4,
        "title": "P4597 \u5e8f\u5217 sequence"
    },
    {
        "content": "## \u601d\u8def\n\n\u6574\u4f53\u4e8c\u5206\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u6bcf\u5c42\u679a\u4e3e\u5f53\u524d\u53d6\u591a\u5c11\u4e2a\u4e2d\u95f4\u8282\u70b9 $\\operatorname{mid}$ \u4f7f\u5f97\u7b54\u6848\u6700\u4f18\uff0c\u8fd9\u6837\u5c31\u5177\u5907\u4e86\u53ef\u4e8c\u5206\u6027\u3002\n\n\u6574\u4f53\u4e8c\u5206\u65f6\u95f4\u590d\u6742\u5ea6 $O(n\\log n)$\uff0c\u8dd1\u7684\u633a\u5feb\u3002\n\n## \u5177\u4f53\u505a\u6cd5\n\n\u9996\u5148\u7edf\u8ba1\u4e00\u4e2a $\\operatorname{sum}=\\sum\\limits_{i=l}^{r}{a[i]-\\operatorname{mid}-1}$ \n\n\u7136\u540e\u66b4\u529b\u627e $\\operatorname{mid}$\uff08\u5176\u5b9e\u53ef\u4ee5\u7528\u6570\u636e\u7ed3\u6784\u4f18\u5316\uff0c\u4e0d\u8fc7\u6ca1\u5fc5\u8981\uff09\n\n\u7136\u540e\u66f4\u65b0\u6211\u4eec\u627e\u5230\u7684\u65b9\u6848\u3002\n\n\u63a5\u7740\u5411\u4e0b\u4e8c\u5206\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\n\nint n;\nint a[1000005];\nint b[1000005];\n\nvoid bs(int l,int r,int vl,int vr){\n\tif(l>r||vl>=vr)return;\n\tint mid=(vl+vr)>>1;\n\tint sum=0;\n\tfor(int i=l;i<=r;i++){\n\t\tsum+=abs(a[i]-mid-1);\n\t}\n\tint minn=sum,minid=l-1;\n\tfor(int i=l;i<=r;i++){\n\t\tsum-=abs(a[i]-mid-1);\n\t\tsum+=abs(a[i]-mid);\n\t\tif(sum<minn){\n\t\t\tminn=sum;\n\t\t\tminid=i;\n\t\t}\n\t}\n\tfor(int i=l;i<=minid;i++){\n\t\tb[i]=mid;\n\t}\n\tfor(int i=minid+1;i<=r;i++){\n\t\tb[i]=mid+1;\n\t}\n\tbs(l,minid,vl,mid);\n\tbs(minid+1,r,mid+1,vr);\n}\n\nsigned main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>a[i];\n\t}\n\tbs(1,n,LLONG_MIN,LLONG_MAX);\n\tint ans=0;\n\tfor(int i=1;i<=n;i++){\n\t\tans+=abs(a[i]-b[i]);\n\t}\n\tcout<<ans<<'\\n';\n\treturn 0;\n}\n```\n\n## \u6269\u5c55\n\n\u6574\u4f53\u4e8c\u5206\u4e60\u9898\uff1a[P4331 [BalticOI 2004]Sequence \u6570\u5b57\u5e8f\u5217](https://www.luogu.com.cn/problem/P4331)\n",
        "postTime": 1658562592,
        "uid": 413065,
        "name": "xiezheyuan",
        "ccfLevel": 5,
        "title": "P4597 \u5e8f\u5217 sequence \u9898\u89e3"
    },
    {
        "content": "# \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u4e00\u4e2a\u6709 $n$ \u4e2a\u6b63\u6574\u6570\u7684\u6570\u7ec4\uff0c\u4e00\u6b21\u64cd\u4f5c\u4e2d\uff0c\u53ef\u4ee5\u628a\u4efb\u610f\u4e00\u4e2a\u5143\u7d20\u52a0\u4e00\u6216\u51cf\u4e00\u3002\u6c42\u4f7f\u5f97\u539f\u5e8f\u5217\u4e25\u683c\u9012\u589e\u7684\u6c42\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u3002\n\n# \u9898\u76ee\u5206\u6790\n\n$\\rm CF713C$\uff1a\n\n\u867d\u7136\u53ef\u4ee5\u7528 $\\mathcal{O(n^2)}$ \u7684\u663e\u7136 $\\verb!Dp!$ \u6c34\u8fc7\uff0c\u4f46\u662f\u4e3a\u4e86\u5b8c\u6210 $\\rm P4597$ \u548c $\\rm P4331$\uff0c\u6240\u4ee5\u8fd8\u662f\u5b66\u4e86\u5b66 $\\mathcal{O(n\\log n)}$ \u7684\u4f18\u79c0\u505a\u6cd5\u3002\n\n\u5148\u628a\u201c\u4e25\u683c\u9012\u589e\u201d\u6539\u6210\u201c\u975e\u4e25\u683c\u9012\u589e\u201d\u3002\n\n\u5177\u4f53\u5730\uff0c$a_1\\lt a_2\\lt a_3\\to a_1\\le a_2-1\\le a_3-2\\to a_1-1\\le a_2-2\\le a_3-3$\uff0c\u5373 $a_i\\to a_i-i$\u3002\n\n\u7136\u540e\u7528\u5927\u6839\u5806\u6765\u7ef4\u62a4\u3002\u7b97\u5230 $a[i]$ \u65f6\uff0c\u53d6\u524d\u9762\u7684\u6700\u5927\u6570 $maxx$ \u51fa\u6765\u3002\u56e0\u4e3a\u8981\u4fdd\u6301\u975e\u4e25\u683c\u9012\u589e\uff0c\u6240\u4ee5 $a[i]$ \u5c0f\u4e8e $maxx$ \u65f6\u5c31\u5fc5\u987b\u505a\u51fa\u4e00\u4e9b\u51b3\u7b56\u4e86\uff0c\u8fd9\u4e5f\u5c31\u662f $|maxx-a[i]|$\u3002\n\n$\\rm P4597$\uff1a\n\n\u677f\u5b50\u3002\n\n# \u4ee3\u7801\n\n$\\rm CF713C$:\n\n```cpp\n//2022/5/3\n#define _CRT_SECURE_NO_WARNINGS\n#include <iostream>\n#include <cstdio>\n#include <climits>//need \"INT_MAX\",\"INT_MIN\"\n#include <cstring>//need \"memset\"\n#include <numeric>\n#include <algorithm>\n#include <queue>\n#define int long long\n#define enter putchar(10)\n#define debug(c,que) std::cerr << #c << \" = \" << c << que\n#define cek(c) puts(c)\n#define blow(arr,st,ed,w) for(register int i = (st);i <= (ed); ++ i) std::cout << arr[i] << w;\n#define speed_up() ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)\n#define mst(a,k) memset(a,k,sizeof(a))\n#define Abs(x) ((x) > 0 ? (x) : -(x))\n#define stop return(0)\nconst int mod = 1e9 + 7;\ninline int MOD(int x) {\n\tif(x < 0) x += mod;\n\treturn x % mod;\n}\nnamespace Newstd {\n\tchar buf[1 << 21],*p1 = buf,*p2 = buf;\n\tinline int getc() {\n\t\treturn p1 == p2 && (p2 = (p1 = buf) + fread(buf,1,1 << 21,stdin),p1 == p2) ? EOF : *p1 ++;\n\t}\n\tinline int read() {\n\t\tint ret = 0,f = 0;char ch = getc();\n\t\twhile (!isdigit(ch)) {\n\t\t\tif(ch == '-') f = 1;\n\t\t\tch = getc();\n\t\t}\n\t\twhile (isdigit(ch)) {\n\t\t\tret = (ret << 3) + (ret << 1) + ch - 48;\n\t\t\tch = getc();\n\t\t}\n\t\treturn f ? -ret : ret;\n\t}\n\tinline void write(int x) {\n\t\tif(x < 0) {\n\t\t\tputchar('-');\n\t\t\tx = -x;\n\t\t}\n\t\tif(x > 9) write(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n}\nusing namespace Newstd;\n\nconst int N = 3005;\nint a[N];\nstd::priority_queue<int>q;\nint n;\n#undef int\nint main(void) {\n#ifndef ONLINE_JUDGE\n\tfreopen(\"in.txt\",\"r\",stdin);\n#endif\n\t#define int long long\n\tn = read();\n\tfor (register int i = 1;i <= n; ++ i) a[i] = read() - i;\n\tint ans = 0;\n\tfor (register int i = 1;i <= n; ++ i) {\n\t\tq.push(a[i]);\n\t\tif (q.top() > a[i]) {\n\t\t\tans = ans + Abs(q.top() - a[i]);\n\t\t\tq.pop();\n\t\t\tq.push(a[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\n\treturn 0;\n}\n```\n\n$\\rm P4597$\uff1a\n\n```cpp\n//2022/5/3\n#define _CRT_SECURE_NO_WARNINGS\n#include <iostream>\n#include <cstdio>\n#include <climits>//need \"INT_MAX\",\"INT_MIN\"\n#include <cstring>//need \"memset\"\n#include <numeric>\n#include <algorithm>\n#include <queue>\n#define int long long\n#define enter putchar(10)\n#define debug(c,que) std::cerr << #c << \" = \" << c << que\n#define cek(c) puts(c)\n#define blow(arr,st,ed,w) for(register int i = (st);i <= (ed); ++ i) std::cout << arr[i] << w;\n#define speed_up() ios::sync_with_stdio(false),cin.tie(0),cout.tie(0)\n#define mst(a,k) memset(a,k,sizeof(a))\n#define Abs(x) ((x) > 0 ? (x) : -(x))\n#define stop return(0)\nconst int mod = 1e9 + 7;\ninline int MOD(int x) {\n\tif(x < 0) x += mod;\n\treturn x % mod;\n}\nnamespace Newstd {\n\tchar buf[1 << 21],*p1 = buf,*p2 = buf;\n\tinline int getc() {\n\t\treturn p1 == p2 && (p2 = (p1 = buf) + fread(buf,1,1 << 21,stdin),p1 == p2) ? EOF : *p1 ++;\n\t}\n\tinline int read() {\n\t\tint ret = 0,f = 0;char ch = getc();\n\t\twhile (!isdigit(ch)) {\n\t\t\tif(ch == '-') f = 1;\n\t\t\tch = getc();\n\t\t}\n\t\twhile (isdigit(ch)) {\n\t\t\tret = (ret << 3) + (ret << 1) + ch - 48;\n\t\t\tch = getc();\n\t\t}\n\t\treturn f ? -ret : ret;\n\t}\n\tinline void write(int x) {\n\t\tif(x < 0) {\n\t\t\tputchar('-');\n\t\t\tx = -x;\n\t\t}\n\t\tif(x > 9) write(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n}\nusing namespace Newstd;\n\nconst int N = 5e5 + 5;\nint a[N];\nstd::priority_queue<int>q;\nint n;\n#undef int\nint main(void) {\n#ifndef ONLINE_JUDGE\n\tfreopen(\"in.txt\",\"r\",stdin);\n#endif\n\t#define int long long\n\tn = read();\n\tfor (register int i = 1;i <= n; ++ i) a[i] = read();\n\tint ans = 0;\n\tfor (register int i = 1;i <= n; ++ i) {\n\t\tq.push(a[i]);\n\t\tif (q.top() > a[i]) {\n\t\t\tans += Abs(q.top() - a[i]);\n\t\t\tq.pop();\n\t\t\tq.push(a[i]);\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\n\treturn 0;\n}\n```",
        "postTime": 1651588346,
        "uid": 430409,
        "name": "Coros_Trusds",
        "ccfLevel": 6,
        "title": "CF713C Sonya and Problem Wihtout a Legend/P4597 \u5e8f\u5217 sequence"
    },
    {
        "content": "# P4597.\u5e8f\u5217sequence\n\u8fd9\u9053\u9898\u76ee\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u76f4\u63a5\u4e0a STL\u3002\n\n\u6211\u4eec\u4e00\u4e2a\u6570\u4e00\u4e2a\u6570\u5730\u653e\u8fdb\u4e00\u4e2a\u5927\u6839\u5806(\u4f18\u5148\u961f\u5217)\uff0c\n\n\u5176\u5b9e\u5c31\u662f\u7b97\u5230\u5f53\u524d\u6570\u65f6\uff0c\n\n\u53d6\u524d\u9762\u6700\u5927\u7684\u6570\u51fa\u6765\u3002\n\n\u5047\u5982\u73b0\u5728\u8fd9\u4e2a\u6570\u6bd4\u524d\u9762\u6700\u5927\u6570\u5927\u6216\u76f8\u7b49\u5c31\u6ca1\u4e8b\uff0c\n\n\u53cd\u4e4b\u6211\u4eec\u5219\u9700\u8981\u8003\u8651\u5982\u4f55\u6539\u4e3a\u4e0d\u964d\u3002\n\n\u6211\u4eec\u80af\u5b9a\u662f\u5c06\u5927\u7684\u5f80\u5c0f\u79fb\uff0c\u5c06\u5c0f\u7684\u5f80\u5927\u79fb\uff0c\n\n\u90a3\u4e48\u82b1\u8d39\u4e00\u5b9a\u662f $|a-b|$\u3002\n\n\u4e3a\u4e86\u4e0d\u5f71\u54cd\u5148\u524d\u7684\u7b54\u6848\uff0c\n\n\u5f53\u7136\u90fd\u662f\u79fb\u5230\u540c\u4e00\u57fa\u51c6\uff0c\n\n\u5373\u662f\u5148\u524d\u7684\u6700\u5927\u6570\u3002\n\n\u4ee3\u7801\u4e0d\u96be\u5199\u51fa\u3002\n```cpp\n#include<bits/stdc++.h>\n#define BetterIO ios::sync_with_stdio(false)\nusing namespace std;\nlong long Total;\npriority_queue< long long >Queue;\nint main(void)\n{\n\tBetterIO;\n\tregister long long i;cin>>Total;\n\tregister long long Ans(0);\n\tfor(i=1;i<=Total;i++)\n\t{\n\t\tregister long long Now;cin>>Now;\n\t\tQueue.push(Now);\n\t\tif(Queue.top()>Now)\n\t\t{\n\t\t\tAns+=Queue.top()-Now;\n\t\t\tQueue.pop();\n\t\t\tQueue.push(Now);\n\t\t}\n\t}\n\tcout<<Ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1629974891,
        "uid": 132168,
        "name": "_Clown_",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4597\u3010\u5e8f\u5217sequence\u3011"
    },
    {
        "content": "# \u3010\u7b97\u6cd5\u5206\u6790\u3011\n\u5047\u8bbe\u6211\u4eec\u8981\u628a $a$ \u8f6c\u4e3a $b$ \uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981 $\\left\\vert a-b \\right\\vert$ \u7684\u4ee3\u4ef7\u3002\u6240\u4ee5\uff0c\u65e2\u7136\u600e\u4e48\u79fb\u90fd\u662f $\\left\\vert a-b \\right\\vert$ \uff0c\u90a3\u5c31\u76f4\u63a5\u5c06 $a$ \u79fb\u5230 $b$ \u5c31\u597d\u4e86\u3002    \n**\u7136\u540e\u5f00\u4e2a\u5927\u6839\u5806\u778e\u641e\uff1a**    \n\u5047\u5982\u6211\u4eec\u8bfb\u5165\u4e86\u4e00\u4e2a\u6570 $a$ \uff0c\u7531\u4e8e\u524d\u9762\u5df2\u7ecf\u6392\u597d\u4e86\u5e8f\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u53ea\u9700\u8981\u8003\u8651 $a$ \u548c\u5f53\u524d\u5df2\u6392\u5e8f\u5e8f\u5217\u7684\u6700\u5927\u503c\u5c31\u53ef\u4ee5\u4e86\u3002\n- \u5982\u679c\u5f53\u524d\u8f93\u5165\u503c $a$ \u4e0d\u6bd4\u961f\u5217\u6700\u5927\u503c\u5c0f\uff0c\u90a3\u5c31\u4e8c\u8bdd\u4e0d\u8bf4\uff0c\u76f4\u63a5\u585e\uff01\n- \u5982\u679c $a$ \u6bd4\u6700\u5927\u503c\u5c0f\uff0c\u90a3\u4e48\u5c31\u5c06\u7b54\u6848\u52a0\u4e0a\u5b83\u4eec\u7684\u5dee\uff0c\u518d\u5c06 $a$ \u5165\u961f\u3002    \n\n\u81f3\u4e8e\u5982\u4f55\u627e\u6700\u5927\u503c\uff0c\u5982\u679c\u679a\u4e3e\u4e00\u904d\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n^2)$ \uff0c\u9762\u5bf9 $n\\leqslant5\\times10^5$ \u7684\u6570\u636e\u91cf\u80af\u5b9aTLE\u3002   \n\u6240\u4ee5\u6211\u4eec\u7528\u5806\uff0c\u4e5f\u5c31\u662fSTL\u7684priority_queue\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(n\\log n)$ \u3002    \n**\u4ee3\u7801\u5982\u4e0b\uff1a**\n```\n#include<iostream>\n#include<cstdio>\n#include<queue>\nusing namespace std;\n#define ll long long\npriority_queue<ll> q;               //\uff01\uff01\u4e0d\u5f00long long\u4f1a\u5341\u4e2aWA\nll ans=0;\nint main() {\n  int n;\n  cin>>n;\n  while(n--) {\n  \tll a;\n  \tcin>>a;\n  \tq.push(a);                      //\u7528\u5927\u6839\u5806\u6765\u6392\u5e8f\n  \tif(q.top()>=a) {\n  \t\tans+=q.top()-a;\n\t\tq.pop();\n  \t\tq.push(a);\n  \t}\n  }\n  cout<<ans<<endl;\n  return 0;\n}\n```\n\u5e0c\u671b\u7ba1\u7406\u5458\u5ba1\u6838\u901a\u8fc7\uff01     \n\u770b\u5728\u624b\u6572\u7684\u4efd\u4e0a\uff0c\u7ed9\u4e2a\u8d5e\u518d\u8d70\u597d\u4e0d\u597d~",
        "postTime": 1645537580,
        "uid": 536743,
        "name": "\u79e6\u5c4e\u7687",
        "ccfLevel": 0,
        "title": "P4597\u5e8f\u5217 \u9898\u89e3"
    }
]
[
    {
        "content": "## \u9898\u610f\n\n\u9898\u610f\u53ef\u76f4\u63a5\u8f6c\u5316\u4e3a\uff1a\n\n\u6bcf\u5929\u5171\u6709 $12$ \u4e2a\u5c0f\u65f6\uff0c\u6bcf\u8d70\u4e00\u6761\u8def\u4f1a\u6d88\u8017\u4e00\u5b9a\u5c0f\u65f6\uff0c\u7528\u5c3d\u540e\u6216\u5927\u4e8e\u5269\u4f59\u65f6\u95f4\u5f53\u5929\u5c06\u4e0d\u80fd\u518d\u8d70\u3002\n\n\u4ee5\u53ca\uff0c\u5947\u6570\u5929\u8d70\u8def\u7684\u6b63\u65b9\u5411\uff0c\u5076\u6570\u5929\u8d70\u8def\u7684\u53cd\u65b9\u5411\uff0c\u6c42\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u6240\u7528\u6700\u77ed\u65f6\u95f4\uff08\u4f18\u5148\u5929\u6570\uff0c\u5929\u6570\u76f8\u540c\u6bd4\u8f83\u5f53\u5929\u5269\u4f59\u65f6\u95f4\uff09\u65f6\u7684\u8def\u5f84\u3002\n\n\u6837\u4f8b\u4e3a\uff1a\n\n\u7b2c\u4e00\u5929\uff1a$1\\to5\\to4$\u3002\n\n\u7b2c\u4e8c\u5929\uff1a\u7559\u5728 $4$\u3002\n\n\u7b2c\u4e09\u5929\uff1a$4\\to3$\u3002\n\n## \u5206\u6790\n\n\u5982\u679c\u60f3\u8981\u4fdd\u8bc1\u8d70\u7684\u65f6\u95f4\u6700\u77ed\uff0c\u5c31\u5e94\u8be5\u4f7f\u7528\u6700\u77ed\u8def\uff0c\u6211\u4eec\u4ece\u4e00\u4e2a\u70b9\u51fa\u53d1\u5230\u4e00\u4e2a\u70b9\u65f6\uff0c\u4ee5\u5929\u6570\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c\u5f53\u524d\u5929\u6570\u6240\u5269\u65f6\u95f4\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u8fdb\u884c\u4f18\u5148\u961f\u5217\u7684\u6807\u51c6\u8fdb\u884c Dij\uff0c\u5982\u679c\u5f53\u524d\u5929\u7684\u65f6\u95f4\u52a0\u4e0a\u8d70\u8fd9\u6761\u7684\u65f6\u95f4\u5c0f\u4e8e\u7b49\u4e8e $12$ \u5219\u53ef\u4ee5\u8f6c\u79fb\uff0c\u5982\u679c\u5927\u4e8e\u5219\u65e0\u6cd5\u8f6c\u79fb\u3002\n\n\u4f46\u662f\u8fd9\u5e76\u4e0d\u80fd\u8986\u76d6\u6837\u4f8b\u7684\u7b49\u5019\u60c5\u51b5\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5224\u65ad\u662f\u5426\u80fd\u591f\u5728\u4e00\u4e2a\u5730\u70b9\u7b49\u4e00\u5929\uff0c\u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u5728\u5224\u65ad\u4e4b\u540e\u8fdb\u884c\u4e00\u6b21\u4e0b\u4e00\u5929\u7684\u8fc7\u6e21\uff0c\u5728\u8f6c\u79fb\u8fc7\u7a0b\u4e2d\u8bb0\u5f55\u76f8\u5173\u4fe1\u606f\uff0c\u6700\u540e\u5230\u7ec8\u70b9\u65f6\u76f4\u63a5\u8f93\u51fa\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<queue>\nusing namespace std;\nint read()\n{\n\tint x=0,f=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9')\n\t{\n\t\tif(ch=='-') f=-f;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\nstruct node{\n\tint da,ti,np;\n\tfriend bool operator < (node x,node y)\n\t{\n\t\tif(x.da==y.da) return x.ti>y.ti;\n\t\treturn x.da>y.da;\n\t}\n};//\u5929\u6570\uff0c\u5929\u6570\u76f8\u540c\u6bd4\u8f83\u65f6\u95f4\npriority_queue<node> q;\nint hpla[110],st,to[2010],nxt[2010],head[2010],val[2010],fl[2010],cnt,vis[110][2][20],pre[110],hpt[110],hpti[110];\nint ansp[110],ansx[110],anst[110],ansti[110];\nvoid addedge(int x,int y,int z,int ff)\n{\n\tto[++cnt]=y;\n\tnxt[cnt]=head[x];\n\thead[x]=cnt;\n\tval[cnt]=z;\n\tfl[cnt]=ff;//\u6b63\u56fe\u8fd8\u662f\u53cd\u56fe\n}\nvoid out(int x,int &nc)\n{\n//\tcout<<x<<nc<<endl;\n//\tif(x==0) return;\n\tansp[nc]=pre[x];\n\tansx[nc]=x;\n\tanst[nc]=hpt[x];\n\tansti[nc]=hpti[x];//\u53d6\u51fa\u8def\u5f84\n\tnc++;\n\tif(pre[x]==st) return;\n\tout(pre[x],nc);\n}\nint main()\n{\n\tint x,y,z;st=read();\n\tint ed=read(),n=read(),m=read();\n\tmemset(hpt,0x3f,sizeof(hpt));\n\tmemset(hpti,0x3f,sizeof(hpti));\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tx=read(),y=read(),z=read();\n\t\taddedge(x,y,z,1);\n\t\taddedge(y,x,z,0);\n\t}\n\tvis[st][1][0]=1;\n\tq.push((node){1,0,st});\n\twhile(!q.empty())\n\t{\n\t\tnode nq=q.top();\n\t\tq.pop();\n//\t\tcout<<nq.np<<\" \"<<nq.da<<\" \"<<nq.ti<<endl;\n\t\tif(nq.np==ed)//\u5230\u4e86\u76f4\u63a5\u8f93\u51fa\n\t\t{\n\t\t\tint cc=0;\n\t\t\tout(nq.np,cc);\n\t\t\tfor(int i=cc-1;i>=0;i--)\n\t\t\t{\n\t\t\t\tcout<<ansp[i]<<\" \"<<ansx[i]<<\" \"<<anst[i]<<\" \"<<ansti[i]<<endl;\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t\tx=nq.np;\n\t\tint d=nq.da,tt=nq.ti;\n\t\tfor(int i=head[x];i;i=nxt[i])\n\t\t{\n\t\t\tint ft=to[i],ro=val[i];\n\t\t\tif(tt+ro<=12)//\u5982\u679c\u4e00\u5929\u8fd8\u672a\u7ed3\u675f\n\t\t\t{\n//\t\t\t\tcout<<ft<<\" \"<<ro<<endl;\n\t\t\t\tif(!vis[ft][d%2][tt+ro]&&d%2==fl[i])//\u5f53\u524d\u65f6\u95f4\u6ca1\u6709\u8d70\u8fc7\n\t\t\t\t{\n\t\t\t\t\tif(d<hpt[ft]||(d==hpt[ft]&&tt+ro<hpla[ft]))//\u5269\u4f59\u65f6\u95f4\u66f4\u4f18\n\t\t\t\t\t{\n\t\t\t\t\t\tpre[ft]=x;\n\t\t\t\t\t\thpt[ft]=d;\n\t\t\t\t\t\thpti[ft]=ro;\n\t\t\t\t\t\thpla[ft]=ro+tt;\n\t\t\t\t\t}\n\t\t\t\t\tvis[ft][d%2][tt+ro]=1;\n\t\t\t\t\tq.push((node){d,tt+ro,ft});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(!vis[x][(d+1)%2][0])//\u6ce8\u610f\uff01\u53ef\u4ee5\u9009\u62e9\u5728\u67d0\u4e2a\u5730\u65b9\u505c\u7559\u4e00\u5929\n\t\t{\n\t\t\tq.push((node){d+1,0,x});\n\t\t}\n\t}\n}\n```\n",
        "postTime": 1626769738,
        "uid": 100619,
        "name": "logfk",
        "ccfLevel": 8,
        "title": "P7655 [BalticOI 1996 Day 2] A FAST JOURNEY \u9898\u89e3"
    },
    {
        "content": "\u7adf\u7136\u6ca1\u4eba\u5199 SPFA\uff0c\u5403\u6211\u4e00\u7bc7\uff01\n\n\u5173\u4e8e SPFA \u2014\u2014\u5b83\u6b7b\u4e86\u3002\n\n\u6211\u504f\u4e0d\u4fe1\uff01\n\n### \tSPFA\n* \u7531 bellman-ford \u7b97\u6cd5\u4f18\u5316\u800c\u6765\u3002\n* \u53ea\u6709\u81ea\u5df1\u88ab\u66f4\u65b0\u8fc7\u7684\uff0c\u624d\u4f1a\u53bb\u66f4\u65b0\u522b\u7684\u70b9\u3002\n* \u7f51\u683c\u56fe\u4e0d\u884c\uff0c\u5bb9\u6613\u88ab\u5361\u3002\n\n### \u8fd9\u9053\u9898\n\n\u96be\u70b9\u6709\u4e24\u4e2a:\n\n1. \u57ce\u5e02\u53ef\u4ee5\u505c\u7559\n\n2. \u9700\u6253\u5370\u8def\u5f84\n\n\u53ef\u4ee5\u7528\u7ed3\u6784\u4f53\u6765\u5b58\u50a8\u6bcf\u6761\u8fb9\u7684\u4fe1\u606f\uff0c\u5f53\u8d70\u8fd9\u6761\u8fb9\u7684\u65f6\u95f4\u52a0\u4e0a\u4e4b\u524d\u5728\u672c\u5929\u6240\u6d88\u8017\u7684\u65f6\u95f4\u65f6\u5c0f\u4e8e $12$ \u5c0f\u65f6\uff0c\u5c31\u6c42\u4e00\u4e0b\u6700\u77ed\u8def\u3002\n\n\u6ce8\u610f\u53ef\u4ee5\u505c\u7559\uff0c\u56e0\u4e3a\u9053\u8def\u4f1a\u53d8\u5411\uff0c\u4f46\u53ea\u80fd\u505c\u7559 $1$ \u5929\uff0c\u4e0d\u7136\u53c8\u53d8\u56de\u53bb\u4e86\u3002\n\n\u518d\u7528\u4e00\u4e2a\u7ed3\u6784\u4f53\u5b58\u50a8\u8def\u5f84\uff0c\u6700\u540e\u9012\u5f52\u8f93\u51fa\u3002\n\n### \u540e\u8bb0\n\uff082021.12.25 \u624b\u8d31\uff0c\u628a\u5df2\u7ecf\u901a\u8fc7\u7684\u9898\u89e3\u4e0d\u5c0f\u5fc3\u53c8\u63d0\u4ea4\u4e86\u4e00\u904d~\uff09\n\n\u4e24\u4f4d\u5927\u4f6c\u7ed9\u51fa\u4e86\u4ee3\u7801\uff0c\u628a Dijkstra \u6362\u6210 SPFA \u5c31\u884c\u3002",
        "postTime": 1638077982,
        "uid": 314625,
        "name": "\u4fe1\u606f\u5411\u9633\u82b1\u6728",
        "ccfLevel": 4,
        "title": "P7655 \u9898\u89e3"
    },
    {
        "content": "# P7655 [BalticOI 1996 Day 2] A FAST JOURNEY\u9898\u89e3\n\n## \u524d\u8a00\uff1a\n\n\u672c\u9898\u662f\u4e00\u9053\u6700\u77ed\u8def\u597d\u9898\uff0c\u60f3\u8bad\u7ec3\u7684\u53ef\u4ee5\u505a\u505a\uff0c\u4f46\u662f\u672c\u849f\u84bb\u7531\u4e8e\u592a\u83dc\u4e86\uff0c\u505a\u4e86\u597d\u4e45\u624d\u505a\u51fa\u6765\u3002\n\n## \u9898\u610f\uff1a\n\n\u6709 n \u4e2a\u57ce\u5e02 k \u6761\u9053\u8def\uff0c\u5728\u5947\u6570\u5929\u7684\u65f6\u5019\u9053\u8def\u6309\u7ed9\u5b9a\u7684\u65b9\u5411\uff0c\u5728\u5076\u6570\u5929\u53cd\u7740\u6765\uff0c\u6bcf\u5929\u6700\u591a\u884c\u9a76 12 \u5c0f\u65f6\uff0c\u53ef\u4ee5\u5728\u4e00\u4e2a\u57ce\u5e02\u505c\u7559\uff0c\u6c42 A \u5230 B \u7684\u6700\u77ed\u8def\u5f84\uff0c\u6253\u5370\u51fa\u6700\u77ed\u8def\u5f84\u3002\n\n## \u601d\u8def\uff1a\n\n\u4ee5\u4e0b\u662f\u5806\u4f18\u5316\u7684 dijktra\u3002\n\n\u65e2\u7136\u6709\u5929\u548c\u5c0f\u65f6\uff0c\u5fc5\u7136\u662f\u4ee5\u5929\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c\u5c0f\u65f6\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u5efa\u5176\u5c0f\u6839\u5806\uff0c\u5982\u679c\u8bf4\u5f53\u5929\u8d70\u8fd9\u6761\u8def\u7684\u65f6\u95f4\u52a0\u4e0a\u4e4b\u524d\u5728\u672c\u5929\u6240\u6d88\u8017\u7684\u65f6\u95f4\u65f6\u5c0f\u4e8e 12 \u5c0f\u65f6\uff0c\u5373\u4e0d\u6ee1\u4e00\u5929\uff0c\u90a3\u4e48\u6211\u4eec\u518d\u6765\u9009\u53d6\u6700\u77ed\u8def\u3002\n\n\u5f88\u660e\u663e\uff0c\u6700\u77ed\u8def\u80af\u5b9a\u662f\u5148\u6bd4\u8f83\u65e5\u671f\uff0c\u5728\u65e5\u671f\u7684\u76f8\u540c\u65f6\u6bd4\u8f83\u65f6\u95f4\u5373\u53ef\u3002\n\n\u90a3\u4e48\u73b0\u5728\u8981\u6ce8\u610f\u4e00\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2a\u57ce\u5e02\u505c\u7559\u3002\n\n\u65e2\u7136\u505c\u7559\uff0c\u80af\u5b9a\u53ea\u80fd\u9009\u62e9\u505c\u7559 1 \u5929\uff0c\u56e0\u4e3a\u4e00\u65e6\u505c\u7559 2 \u5929\uff0c\u5c31\u53c8\u56de\u5230\u6ca1\u505c\u7559\u7684\u65f6\u5019\u4e86\uff0c\u90a3\u4e48\u505c\u7559\u5c31\u6ca1\u610f\u4e49\u4e86\u3002\n\n\u8bf4\u8bf4\u6253\u5370\u8def\u5f84\u3002\n\n\u5176\u5b9e\u5427\uff0c\u6253\u5370\u8def\u5f84\u53ef\u4ee5\u770b\u770b[\u8fd9\u9898](https://www.luogu.com.cn/problem/P1144)\u3002\n\n\u8fd8\u662f\u5177\u4f53\u8bf4\u8bf4\u5427\uff08~~\u5c31\u662f\u4e3a\u4e86\u51d1\u6587\u5b57~~\uff09\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u7ed3\u6784\u4f53\u50a8\u5b58\uff0c\u5728\u6bcf\u6b21\u5165\u5806\u7684\u65f6\u5019\uff0c\u5c06\u6240\u6709\u4fe1\u606f\u50a8\u5b58\u4e0b\u6765\uff0c\u5f53\u5230\u8fbe\u7ec8\u70b9\u65f6\uff0c\u6211\u4eec\u5728\u9012\u5f52\u8f93\u51fa\u5373\u53ef\u3002\n\n\u672c\u4eba\u7531\u4e8e\u624b\u5199\u5806\uff0c\u4ee3\u7801\u4f1a\u6bd4\u697c\u4e0a\u957f\uff0c\u8fd8\u8bf7\u591a\u591a\u5305\u6db5\u3002\n\n## \u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n\n#define inf 0x3f3f3f3f\n\nconst int N = 1e3 + 7;\n\nusing namespace std;\n\nint s, t;\n\nint n, m;\n\nbool flag[107][3][17];\n\nstruct distance {\n\tint ti, da;\n} dis[107];\n\nstruct Remember {\n\tint u, v, da, w;\n} mem[107];\n\nstruct Edge {\n\tint to, next, w, op;\n} edge[N << 1];\n\nstruct node {\n\tint da, ti, id;\n};\n\nstruct HEAP {\n\tint sz;\n\tnode heap[N << 2 | 1];\n\t\n\tinline int empty() {\n\t\treturn sz == 0;\n\t}\n\t\n\tinline node top() {\n\t\treturn heap[1];\n\t}\n\t\n\tinline void push(node a) {\n\t\tint now = ++ sz;\n\t\t\n\t\theap[now] = (node) {a.da, a.ti, a.id};\n\t\t\n\t\twhile (now != 1) {\n\t\t\tint fa = now >> 1;\n\t\t\t\n\t\t\tif (heap[fa].da > heap[now].da)\n\t\t\t\tswap(heap[fa], heap[now]);\n\t\t\telse if (heap[fa].da == heap[now].da && heap[fa].ti > heap[now].ti)\n\t\t\t\tswap(heap[fa], heap[now]);\n\t\t\telse break;\n\t\t\t\n\t\t\tnow = fa;\n\t\t} \n\t\t\n\t\treturn ;\n\t}\n\t\n\tinline void pop() {\n\t\tswap(heap[1], heap[sz]);\n\t\tsz --;\n\t\t\n\t\tint now = 1;\n\t\t\n\t\twhile (now << 1 <= sz) {\n\t\t\tint son = now << 1;\n\t\t\t\n\t\t\tif (son + 1 <= sz) {\n\t\t\t\tif (heap[son + 1].da < heap[son].da) son ++;\n\t\t\t\telse if (heap[son + 1].da == heap[son].da && heap[son + 1].ti < heap[son].ti) son ++;\n\t\t\t}\n\t\t\t\n\t\t\tif (heap[son].da < heap[now].da)\n\t\t\t\tswap(heap[son], heap[now]);\n\t\t\telse if (heap[son].da == heap[now].da && heap[son].ti < heap[now].ti)\n\t\t\t\tswap(heap[son], heap[now]);\n\t\t\telse break;\n\t\t\n\t\t\tnow = son;\n\t\t}\n\t\t\n\t\treturn ;\n\t}\n} Heap;\n \nint head[107], cnt;\n\ninline void addedge(int u, int v, int w, int op) {\n\tedge[++ cnt] = (Edge) {v, head[u], w, op};\n\thead[u] = cnt;\n}\n\ninline void print(int u, int st) {\n\tif (mem[u].u == st) {\n\t\tprintf(\"%d %d %d %d\\n\", mem[u].u, mem[u].v, mem[u].da, mem[u].w);\n\t\t\n\t\treturn ; \n\t}\t\n\t\n\tprint(mem[u].u, st);\n\t\n\tprintf(\"%d %d %d %d\\n\", mem[u].u, mem[u].v, mem[u].da, mem[u].w);\n}\n\ninline void dijkstra(int st, int fi) {\n\tmemset(dis, inf, sizeof(dis));\n\tdis[st].ti = 0, dis[st].da = 0;\n\t\n\tHeap.push((node) {1, 0, st});\n\t\n\twhile (! Heap.empty()) {\n\t\tnode k = Heap.top();\n\t\t\n\t\tHeap.pop();\n\t\t\n\t\t//printf(\"%d \", k.id); \n\t\t\n\t\tif (k.id == fi) {\n\t\t\tprint(fi, st);\n\t\t\t\n\t\t\treturn ;\n\t\t}\n\t\t\n\t\tif (flag[k.id][k.da & 1][k.ti]) continue;\n\t\t\n\t\tflag[k.id][k.da & 1][k.ti] = 1;\n\t\t\n\t\tfor (int i = head[k.id]; ~i; i = edge[i].next) {\n\t\t\tint v = edge[i].to;\n\t\t\t\n\t\t\tif (k.ti + edge[i].w <= 12) {\n\t\t\t\tint w = k.ti + edge[i].w;\n\t\t\t\t\n\t\t\t\tif (! flag[v][k.da & 1][w] && (k.da & 1) == edge[i].op) {\n\t\t\t\t\tif ((k.da < dis[v].da) || (k.da == dis[v].da && w < dis[v].ti)) {\n\t\t\t\t\t\tdis[v].da = k.da;\n\t\t\t\t\t\tdis[v].ti = w;\n\t\t\t\t\t\t\n\t\t\t\t\t\tmem[v].u = k.id;\n\t\t\t\t\t\tmem[v].v = v;\n\t\t\t\t\t\tmem[v].da = dis[v].da;\n\t\t\t\t\t\tmem[v].w = edge[i].w;\n                        \n\t\t\t\t\t\tHeap.push((node) {k.da, w, v});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (! flag[k.id][k.da + 1 & 1][0])\n\t\t\tHeap.push((node) {k.da + 1, 0, k.id});\n\t}\n}\n\nint main() {\n\tmemset(head, -1, sizeof(head));\n\t\n\tscanf(\"%d %d\", &s, &t);\n\tscanf(\"%d %d\", &n, &m);\n\t\n\tfor (int i = 1; i <= m; i ++) {\n\t\tint u, v, w;\n\t\t\n\t\tscanf(\"%d %d %d\", &u, &v, &w);\n\t\t\n\t\taddedge(u, v, w, 1);\n\t\taddedge(v, u, w, 0);\n\t}\n\t\n\tdijkstra(s, t);\n\t\n\treturn 0;\n} \n```\n\n## \u540e\u8bb0\uff1a\n\n\u611f\u8c22 [flysnow](https://www.luogu.com.cn/user/238445) \u5927\u4f6c\u7684\u6559\u5bfc\u3002\n\n$Atlantis.$",
        "postTime": 1633138614,
        "uid": 328170,
        "name": "Kalium",
        "ccfLevel": 0,
        "title": "P7655 [BalticOI 1996 Day 2] A FAST JOURNEY\u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n- \u7ed9\u4f60\u4e00\u4e2a $n$ \u4e2a\u70b9\uff0c$m$ \u6761\u8fb9\u7684\u6709\u5411\u56fe\uff0c\u6bcf\u9694\u4e00\u5929\u6240\u6709\u8fb9\u4f1a\u53cd\u5411\u3002\n- \u4e00\u5929\u53ea\u80fd\u8d70 12 \u5c0f\u65f6\u3002\n- \u6c42 $A$ \u5230 $B$ \u7684\u6700\u77ed\u8def\u3002\n- $n \\le 100,m \\le 1000$\n\n## \u5206\u6790\n\u4e00\u770b $n,m$ \u8fd9\u4e48\u5c0f\uff0c\u968f\u4fbf\u4e71\u641e\u90fd\u53ef\u4ee5\u8fc7\u3002\u8003\u8651 DP\u3002\n\n\u8bbe $f_{i,j,k}$ \u8868\u793a**\u80fd\u5426**\u5728\u7b2c $i$ \u5929\u8d70 $j$ \u5c0f\u65f6\u5230\u8fbe\u7f16\u53f7\u4e3a $k$ \u7684\u7ed3\u70b9\u3002\n\n\u663e\u7136\u6709 $f_{i,j,k} \\Rightarrow f_{i,j+w,v},f_{i,j,k} \\Rightarrow f_{i+1,0,k},f_{1,0,A}=1$\uff0c\u5176\u4e2d $v$ \u4e3a $k$ \u5728\u7b2c $i$ \u5929\u7684\u51fa\u8fb9\uff0c$w$ \u4e3a\u8fb9\u6743\u3002\n\n\u7136\u540e\u627e\u5230 $i$ \u6700\u5c0f\u7684 $f_{i,j,B}$ \u4f7f\u5f97 $f_{i,j,B}=1$\u3002\u5982\u679c $i$ \u76f8\u540c\u5c31\u627e $j$ \u6700\u5c0f\u7684\u3002\n\n\u7136\u800c\u9898\u76ee\u8981\u6c42\u8f93\u51fa\u65b9\u6848\uff0c\u5176\u5b9e DP \u8f93\u51fa\u65b9\u6848\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u65b0\u5f00\u4e00\u4e2a\u6570\u7ec4 $g$\uff0c\u5b58\u4e00\u4e0b\u5f53\u524d\u72b6\u6001\u7684 $f$ \u662f\u7531\u54ea\u4e2a\u72b6\u6001\u8f6c\u79fb\u8fc7\u6765\u7684\u3002\u9012\u5f52\uff0c\u4ece\u672b\u72b6\u6001\u53cd\u63a8\u5230\u521d\u72b6\u6001\uff0c\u5373\u53ef\u8f93\u51fa\u65b9\u6848\u3002\n\n\u672c\u9898 $f$ \u6709 3 \u4e2a\u72b6\u6001\uff0c$g$ \u5b58 3 \u4e2a\u503c\u5c31\u884c\u3002\n\n\u7136\u540e\u6ce8\u610f\u4e00\u4e0b\uff0c\u7531\u4e8e\u672c\u9898\u6ca1\u6709 spj\uff0c\u6240\u4ee5(\u5e94\u8be5)\u662f\u8f93\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u65b9\u6848\uff0c\u89e3\u51b3\u65b9\u6848\u662f\u8ba9 $g$ \u5b58\u5f53\u524d\u72b6\u6001\u88ab\u63a8\u5230\u7684\u7b2c\u4e00\u4e2a\u72b6\u6001\uff0c\u56e0\u4e3a\u7b2c\u4e00\u4e2a\u63a8\u5230\u7684\u65f6\u95f4\u80af\u5b9a\u6700\u65e9\u3002(\u6211\u56e0\u4e3a\u8fd9\u4e2a WA \u4e86\u4e24\u53d1)\n\n\u56e0\u4e3a\u6700\u574f\u60c5\u51b5\u4e0b\u6bcf\u4e2a\u70b9\u90fd\u8d70\u4e00\u5929\uff0c\u518d\u505c\u4e00\u5929\uff0c\u6240\u4ee5\u5929\u6570\u4e0d\u8d85\u8fc7 $2n$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(nm)$\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u5b9e\u9645\u4e0a\u8981\u4e58\u4e0a\u4e00\u4e2a 12 \u7684\u5e38\u6570\u3002~~\u8dd1\u5f97\u98de\u5feb~~\n\n\u7136\u540e\u7a7a\u95f4\u4e0a $f$ \u5176\u5b9e\u53ef\u4ee5\u538b\u6389\u7b2c\u4e00\u7ef4\uff0c\u4f46\u662f\u6ca1\u6709\u5fc5\u8981\u3002(\u56e0\u4e3a $g$ \u538b\u4e0d\u6389)\n\n\u7ec6\u8282\u89c1\u4ee3\u7801\u3002\n\n## \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\n#define N 105\nusing namespace std;\nint n,m,S,T;\nstruct node {\n\tint v,w;\n\tnode(int x,int y) {v=x,w=y;}\n};\nvector<node> head1[N],head2[N];//head1\u5b58\u5947\u6570\u5929\u7684\u8fb9\uff0chead2\u5b58\u5076\u6570\u5929\u7684\u8fb9\nvoid init() {\n\tfor(int i=1;i<=m;++i) {\n\t\tint s,e,w;\n\t\tscanf(\"%d%d%d\",&s,&e,&w);\n\t\thead1[s].push_back(node(e,w));\n\t\thead2[e].push_back(node(s,w));\n\t}\n}\nbool f[N<<1][13][N];\nint g[N<<1][13][N][3];\nvoid out(int date,int tim,int now) {\n\tint *p=g[date][tim][now];\n\tif(p[0]>1||p[1]||p[2]!=S) out(p[0],p[1],p[2]);\n\tif(now!=p[2]) printf(\"%d %d %d %d\\n\",p[2],now,date,tim-p[1]);\n\t//\u6ce8\u610f\u5982\u679c\u505c\u5728\u539f\u5904\u4e0d\u8981\u8f93\u51fa\n}\nint main() {\n\tscanf(\"%d%d%d%d\",&S,&T,&n,&m);\n\tinit();\n\tf[1][0][S]=1;\n\tint ansd=0,anst=0;\n\tfor(int i=1;i<=n<<1&&!ansd;++i) {\n\t\tfor(int j=0;j<=12;++j) {\n\t\t\tif(f[i][j][T]) {\n\t\t\t\tansd=i,anst=j;//\u5982\u679c\u627e\u5230\u7b54\u6848\uff0c\u76f4\u63a5\u9000\u51fa\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tfor(int k=1;k<=n;++k) {\n\t\t\t\tif(!f[i][j][k]) continue;\n\t\t\t\tif(i&1) {\n\t\t\t\t\tint sz=head1[k].size();\n\t\t\t\t\tfor(int l=0;l<sz;++l) {\n\t\t\t\t\t\tint v=head1[k][l].v,w=head1[k][l].w;\n\t\t\t\t\t\tif(j+w<=12&&!f[i][j+w][v]) {\n\t\t\t\t\t\t\tf[i][j+w][v]=1;\n\t\t\t\t\t\t\tg[i][j+w][v][0]=i,g[i][j+w][v][1]=j,g[i][j+w][v][2]=k;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tint sz=head2[k].size();\n\t\t\t\t\tfor(int l=0;l<sz;++l) {\n\t\t\t\t\t\tint v=head2[k][l].v,w=head2[k][l].w;\n\t\t\t\t\t\tif(j+w<=12&&!f[i][j+w][v]) {\n\t\t\t\t\t\t\tf[i][j+w][v]=1;\n\t\t\t\t\t\t\tg[i][j+w][v][0]=i,g[i][j+w][v][1]=j,g[i][j+w][v][2]=k;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!f[i+1][0][k]) {\n\t\t\t\t\tf[i+1][0][k]=1;\n\t\t\t\t\tg[i+1][0][k][0]=i,g[i+1][0][k][1]=j,g[i+1][0][k][2]=k;\n\t\t\t\t\t//\u522b\u5fd8\u4e86\u53ef\u4ee5\u4e0d\u8d70\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tout(ansd,anst,T);\n\treturn 0;\n}\n```",
        "postTime": 1660659402,
        "uid": 263112,
        "name": "Y_ATM_K",
        "ccfLevel": 7,
        "title": "P7655 [BalticOI 1996 Day 2] A FAST JOURNEY"
    }
]
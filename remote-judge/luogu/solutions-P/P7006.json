[
    {
        "content": "\u5148\u8003\u8651\u6bcf\u6b21\u76f4\u63a5\u5224\u65ad\u6bcf\u4e2a $j$ \u662f\u5426\u53ef\u884c\u3002\n\n\u5df2\u7ecf\u6709 $b_j=l_1$\uff0c\u5269\u4e0b\u7684 $p-1$ \u4e2a\u4eba\u8fdb\u884c\u64cd\u4f5c\uff0c\u53ef\u4ee5\u5047\u8bbe\u8fd9 $p-1$ \u4e2a\u4eba\u8054\u5408\u5bf9\u6297\u4f60\uff0c\u7136\u540e\u5c31\u6709\u4e00\u4e2a\u663e\u7136\u7684\u7b56\u7565\uff1a\n\n\u4e0d\u7ba1 $l_i$ \u662f\u5426\u7b49\u4e8e $h_1$\uff0c\u603b\u662f\u4f1a\u4f18\u5148\u9009\u62e9\u4e00\u4e2a\u7b49\u4e8e $h_1$ \u7684\u6570\u5c06\u5176\u8986\u76d6\uff0c\u7136\u540e\u5c3d\u91cf\u8ba9\u67d0\u4e2a $\\neq h_1$ \u7684\u6570\u51fa\u73b0\u5c3d\u53ef\u80fd\u591a\u3002\n\n\u56e0\u6b64\u9700\u8981\u8003\u8651 $h_1$ \u81f3\u5c11\u6709\u51e0\u4e2a\uff1a\n\n\u8bbe\u539f\u5148\u6709 $x$ \u4e2a $h_1$\uff0c$l_i,i\\in [2,p]$ \u4e2d\u6709 $y$ \u4e2a\u4e0d\u7b49\u4e8e $h_1$ \u7684\u6570\uff0c\u5219\u4e00\u4e2a\u663e\u7136\u7684\u4e0b\u754c\u662f $\\max(x-y,0)$\u3002\n\n\u7279\u522b\u7684\uff0c\u5f53 $l_p=h_1$ \u65f6\u9700\u8981\u5bf9 $1$ \u53d6 $\\max$\u3002\u8bb0 $h_1$ \u81f3\u5c11\u6709 $N=\\max(x-y,[l_p=h_1])$\u3002\n\n\u7136\u540e\u8981\u8003\u8651\u5176\u4ed6\u6570\u6700\u591a\u80fd\u51fa\u73b0\u591a\u5c11\u6b21\uff1a\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u6570 $a\\ne h_1$\uff0c\u7edf\u8ba1\u51fa $a$ \u5728 $b$ \u4e2d\u7684\u51fa\u73b0\u6b21\u6570 $p_a$\uff0c\u4ee5\u53ca\u5728 $l_i,i\\in [2,p]$ \u4e2d\u7684\u51fa\u73b0\u6b21\u6570 $q_a$\u3002\u663e\u7136 $a$ \u6700\u540e\u6700\u591a\u51fa\u73b0 $M=\\max\\limits_{a\\ne h_1}(p_a+q_a)$\u3002\n\n\u663e\u7136\u5982\u679c $N>M$\uff0c\u5219\u4f60\u662f\u5fc5\u80dc\u7684\u3002\u4f46\u5982\u679c $N\\le M$\uff0c\u662f\u5426\u6709\u53ef\u80fd\u5fc5\u80dc\u5462\uff1f\n\n\u4e8b\u5b9e\u4e0a\uff0c\u5f53\u4e14\u4ec5\u5f53 $n=1,l_p=h_1$ \u6b64\u65f6\u6709 $N=M=1$ \u4f60\u624d\u662f\u5fc5\u80dc\u7684\uff0c\u5426\u5219\u53ea\u8981\u5176\u4ed6\u4eba\u8054\u5408\u8d77\u6765\u5c31\u4e00\u5b9a\u53ef\u4ee5\u8ba9 $h_1$ \u51fa\u73b0 $N$ \u6b21\uff0c$a$ \u51fa\u73b0 $M$ \u6b21\u3002\n\n\u8fd9\u6837\u76f4\u63a5\u505a\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f $\\mathcal O(n^2)$\u3002\n\n\u8003\u8651\u4f18\u5316\uff0c\u53d1\u73b0\u5bf9\u4e8e\u4e0d\u540c\u7684 $j$\uff0c\u5927\u90e8\u5206\u7684\u91cf\u90fd\u662f\u76f8\u540c\uff0c\u9664\u4e86\u4e24\u90e8\u5206\uff1a\n\n1. \u9996\u5148\u5c31\u662f $x$ \u4f1a\u53d1\u751f $\\pm 1$ \u7684\u53d8\u5316\uff0c\u800c $y$ \u4e0d\u53d8\uff0c$N$ \u4ecd\u7136\u53ef\u4ee5\u5feb\u901f\u5f97\u5230\u3002\n  \n2. \u539f\u5148 $b_j$ \u51fa\u73b0\u6b21\u6570\u4f1a $-1$\uff0c$l_1$ \u7684\u51fa\u73b0\u6b21\u6570\u4f1a $+1$\u3002\n  \n  \u82e5 $l_1\\ne h_1$\uff0c\u5219 $p_{l_1}+q_{l_1}$ \u4f1a\u6bd4\u539f\u5148 $+1$\uff0c\u9700\u8981\u5355\u72ec\u5224\u65ad\u3002\n  \n  \u5bf9\u4e8e $b_j$ \u51fa\u73b0\u6b21\u6570 $-1$\uff0c\u53ef\u4ee5\u9884\u5904\u7406\u51fa\u662f\u5426\u6709\u5176\u4ed6\u7684 $a$ \u4e0e $b_j$ \u6709\u76f8\u540c\u6216\u66f4\u5927\u7684\u503c\u3002\n  \n  \u540c\u6837\u4e5f\u53ef\u4ee5\u5feb\u901f\u5f97\u5230\u3002\n  \n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal O(n+c)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define R(i,a,b) for(int i=(a),i##E=(b);i<=i##E;i++)\n#define L(i,a,b) for(int i=(b),i##E=(a);i>=i##E;i--)\nusing namespace std;\nint n,p,c,h;\nint b[1111111],cnt[1111111];\nint l[1111111];\nvector<int>ans;\nint mx,mmx,cy;\ninline int check(int x)\n{\t\n\tif(n==1&&l[p]==h) return 1;\n\t--cnt[b[x]];\n\t++cnt[l[1]];\n\tint del=cnt[h]-cy;\n\tbool ok=1;\n\tif(del<=0) ok=0;\n\tif(cnt[mx]>=del) ok=0;\n\tif(cnt[mmx]>=del) ok=0;\n\tif(l[1]!=h&&cnt[l[1]]>=del) ok=0;\n\t++cnt[b[x]];\n\t--cnt[l[1]];\n\treturn ok;\n}\nsigned main()\n{\n\tios::sync_with_stdio(false);\n\tcin.tie(NULL);\n\tcin>>n>>p>>c>>h;\n\tR(i,1,n) cin>>b[i],++cnt[b[i]];\n\tR(i,1,p) cin>>l[i];\n\tR(i,2,p) if(l[i]!=h) ++cy,++cnt[l[i]];\n\t//cout<<cy<<endl;\n\tR(i,1,c) if(i!=h) \n\t{\n\t\tif(cnt[i]>cnt[mx]) mmx=mx,mx=i;\n\t\telse if(cnt[i]>cnt[mmx]) mmx=i;\n\t}  \n\tR(i,1,n) if(check(i)) ans.emplace_back(i);\n\tcout<<ans.size()<<endl;\n\tfor(int x:ans) cout<<x<<' ';\n\tcout<<endl;\n}\n```",
        "postTime": 1641048650,
        "uid": 115779,
        "name": "\u6781\u5bd2\u795e\u51b0",
        "ccfLevel": 0,
        "title": "2"
    }
]
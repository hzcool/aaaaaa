[
    {
        "content": "## \u601d\u8def\n\n\u8003\u8651\u627e\u4e00\u4e2a\u6709\u6548\u4f18\u79c0\u7684\u5224\u5b9a\u6761\u4ef6\u3002\n\n$C+C=Z,Z+Z=C$ \u8ba9\u6211\u60f3\u5230\u4e86\u4e09\u8fdb\u5236\u52a0\u6cd5\uff0c$1+1=2,2+2=1$\u3002\n\n\u8f6c\u6210\u4e09\u8fdb\u5236\uff0c\u52a0\u8d77\u6765\u662f\u4e09\u7684\u500d\u6570\u5c31\u4e0d\u5408\u6cd5\uff0c\u5426\u5219\u5c31\u5408\u6cd5\u3002\n\n\u73b0\u5728\u95ee\u9898\u5c31\u662f\u8ba1\u6570 `N` \u7684\u8f6c\u5316\u3002\n\n$1$ \u548c $2$ \u4e0d\u597d\u8ba1\u6570\uff0c\u53d8\u6210 $0$ \u548c $1$\u3002\u5408\u6cd5\u65b9\u6848\u4e0d\u597d\u8ba1\u6570\uff0c\u8ba1\u6570\u4e0d\u5408\u6cd5\u7684\u3002\n\n\u5047\u8bbe\u73b0\u5728\u6709 $b$ \u4e2a `C`\uff0c$c$ \u4e2a `Z`\uff0c$d$ \u4e2a `N`\u3002\n$$\n\\sum\\limits_{i=0,i+b+2c+d\\equiv0}^d C(d,i)\n$$\n\u8bb0 $x=-b-c-c-d\\mod 3$\uff0c\u4e0a\u9762\u90a3\u4e2a\u5f0f\u5b50\u662f $f(d,x)$\u3002\n\n\u6839\u636e\u6768\u8f89\u4e09\u89d2\uff0c\u6709 $f(d,x)=f(d-1,x)+f(d-1,x-1)$\uff0c\u56e0\u4e3a $0\\leq x\\leq 2$\uff0c\u76f4\u63a5\u9884\u5904\u7406\u5373\u53ef\u3002\n\n\u7136\u540e\u53d1\u73b0\u6837\u4f8b\u8fc7\u4e0d\u6389\uff0c\u53d1\u73b0\u6709 `CZCZCZC` \u548c `ZCZCZCZCZ` \u9171\u7d2b\u7684\u60c5\u51b5\uff0c\u53bb\u6389\u5373\u53ef\u3002\u6ce8\u610f\u4e0d\u8981\u53bb\u4e86 $n=1$ \u548c $n$ \u4e3a\u5076\u6570\u7684\u60c5\u51b5\u3002\n\n## code\n\n```cpp\n#include<stdio.h>\n#define mod 1000000007\n#define N 200009\ninline char nc()\n{\n\tstatic char buf[99999],*l,*r;\n\treturn l==r&&(r=(l=buf)+fread(buf,1,99999,stdin),l==r)?EOF:*l++;\n}\ninline void read(int&x)\n{\n\tchar c=nc();for(;c<'0'||'9'<c;c=nc());\n\tfor(x=0;'0'<=c&&c<='9';x=(x<<3)+(x<<1)+(c^48),c=nc());\n}\nint n,q,b,c,d,fac[N],inv[N],e,f,cc[N][3];char a[N];\ninline long long ksm(long long a,int b)\n{\n\tlong long ans=1;\n\tfor(;b;b>>=1,a*=a,a%=mod)if(b&1)ans*=a,ans%=mod;\n\treturn ans;\n}\ninline int C(const int&n,const int&m)\n{\n\treturn n<m?0:(long long)(fac[n])*inv[m]%mod*inv[n-m]%mod;\n}\ninline void work()\n{\n\tint x=(3-(b+c+c+d)%3)%3,ans=ksm(2,d)-cc[d][x];\n\t// for(int i=x;i<=d;i+=3)ans-=C(d,i),ans>>31&&(ans+=mod);\n\tif(n>1&&(n&1)&&e==b+c)--ans;\n\tif(n>1&&(n&1)&&f==b+c)--ans;\n\tans>>31&&(ans+=mod);\n\tprintf(\"%d\\n\",ans);\n}\nmain()\n{\n\tread(n);read(q);\n\tcc[0][0]=1;cc[0][1]=cc[0][2]=0;\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tcc[i][0]=cc[i-1][0]+cc[i-1][2]-mod;cc[i][0]>>31&&(cc[i][0]+=mod);\n\t\tcc[i][1]=cc[i-1][0]+cc[i-1][1]-mod;cc[i][1]>>31&&(cc[i][1]+=mod);\n\t\tcc[i][2]=cc[i-1][1]+cc[i-1][2]-mod;cc[i][2]>>31&&(cc[i][2]+=mod);\n\t}\n\tfor(int i=0;i<n;++i)o:switch(a[i]=nc())\n\t{\n\t\tcase'C':++b;if(i&1)++e;else++f;break;\n\t\tcase'Z':++c;if(i&1)++f;else++e;break;\n\t\tcase'N':++d;break;\n\t\tdefault:goto o;\n\t}\n\twork();\n\tfor(int u,v;q--;work())\n\t{\n\t\tread(u);v=nc();--u;\n\t\tswitch(a[u])\n\t\t{\n\t\t\tcase'C':--b;if(u&1)--e;else--f;break;\n\t\t\tcase'Z':--c;if(u&1)--f;else--e;break;\n\t\t\tcase'N':--d;break;\n\t\t}\n\t\tswitch(a[u]=v)\n\t\t{\n\t\t\tcase'C':++b;if(u&1)++e;else++f;break;\n\t\t\tcase'Z':++c;if(u&1)++f;else++e;break;\n\t\t\tcase'N':++d;break;\n\t\t}\n\t}\n}\n```\n\n",
        "postTime": 1682689517,
        "uid": 90693,
        "name": "_\u2022\u0301\u3078\u2022\u0301\u256c_",
        "ccfLevel": 7,
        "title": "P9252 [PA 2022] Wielki Zderzacz Termion\u00f3w \u9898\u89e3"
    }
]
[
    {
        "content": "\u9898\u76ee\u5927\u610f\uff1a\n\n\u7ed9\u4e00\u68f5\u6811\uff0c\u6bcf\u4e2a\u70b9\u6709\u4e00\u4e2a\u6743\u503c\uff0c\u8981\u6c42\u4fee\u6539\u4e00\u4e9b\u70b9\u7684\u6743\u503c\uff0c\u4f7f\u5f97\uff1a\n\n\u2460\u540c\u4e00\u4e2a\u7236\u4eb2\u7684\u513f\u5b50\u6743\u503c\u5fc5\u987b\u76f8\u540c\n\n\u2461\u7236\u4eb2\u7684\u53d6\u503c\u5fc5\u987b\u662f\u6240\u6709\u513f\u5b50\u6743\u503c\u4e4b\u548c\n\n  \n\u9898\u89e3\uff1a\n\n\u5bf9\u4e8e\u6811\u4e0a\u4efb\u4e00\u4e2a\u70b9\uff0c\u5176\u6743\u503c\u4e00\u65e6\u786e\u5b9a\uff0c\u6574\u68f5\u6811\u7684\u6743\u503c\u5373\u53ef\u786e\u5b9a\u3002\n\n\u4f8b\u5982\u4e0b\u56fe\uff1a\n\n![](https://cdn.vijos.org/fs/edcd77a00729ab812d23d310913f869f233d25c5)\n\n\u4ece\u6839\u5f80\u4e0b\u9012\u63a8\uff0c\u7d2f\u8ba1\u8def\u5f84\u4e0a\u7684\u6743\u503c\uff0c\u5982\u4e0b\u56fe\uff1a\n\n![](https://cdn.vijos.org/fs/8a86edc4f233279fb7996cf99fcf6c2cde146906)\n\n\u5c06\u8def\u5f84\u4e0a\u6743\u503c\u7684\u7d2f\u4e58\u79ef\u5373\u4e3af[i]\uff0cf[i]\u76f8\u540c\u7684\u8868\u793a\u4ed6\u4eec\u540c\u5c5e\u4e8e\u540c\u4e00\u79cd\u5408\u6cd5\u65b9\u6848\uff08\u60f3\u4e00\u60f3\uff0c\u4e3a\u4ec0\u4e48\uff1f\uff09\uff0c\u6700\u540esort\u4e00\u904d\u5bfb\u627e\u76f8\u540c\u6700\u591a\u7684\u5373\u53ef\u3002\n\n**\u6ce8\u610f\u5c06\u6240\u6709\u6743\u503c\u7d2f\u4e58\u4f1a\u7206long long\uff0c\u4f46\u4f7f\u7528\u9ad8\u7cbe\u5ea6\u592a\u9ebb\u70e6\uff0c\u5de7\u5999\u8fd0\u7528log\u8f6c\u4e3a\u52a0\u6cd5\u3002**\n\n  \n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<algorithm>\n#include<iostream>\n#include<iomanip>\n#include<cstring>\n#include<cstdlib>\n#include<vector>\n#include<cstdio>\n#include<cmath>\n#include<queue>\nusing namespace std;\ntypedef long long LL;\ninline const LL Get_Int() {\n    LL num=0,bj=1;\n    char x=getchar();\n    while(x<'0'||x>'9') {\n        if(x=='-')bj=-1;\n        x=getchar();\n    }\n    while(x>='0'&&x<='9') {\n        num=num*10+x-'0';\n        x=getchar();\n    }\n    return num*bj;\n}\nvector<int>edges[500005];\nLL n,cnt=1,ans=1;\ndouble a[500005],f[500005];\nvoid AddEdge(int x,int y) {\n    edges[x].push_back(y);\n}\nvoid Dfs(int Now,double sum) {\n    f[Now]=sum+log((double)a[Now]);\n    for(int i=0; i<edges[Now].size(); i++) {\n        int Next=edges[Now][i];\n        Dfs(Next,sum+log((double)edges[Now].size()));\n    }\n}\nint main() {\n    n=Get_Int();\n    for(int i=1; i<=n; i++)a[i]=Get_Int();\n    for(int i=1; i<n; i++) {\n        int x=Get_Int(),y=Get_Int();\n        AddEdge(x,y);\n    }\n    Dfs(1,log(1.0));\n    sort(f+1,f+n+1);\n    for(int i=2; i<=n; i++)\n        if(f[i]-f[i-1]<=1e-8) {\n            cnt++;\n            ans=max(ans,cnt);\n        } else cnt=1;\n    printf(\"%lld\\n\",n-ans);\n    return 0;\n}\n```",
        "postTime": 1501299681,
        "uid": 31877,
        "name": "BillYang",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3237 \u3010[HNOI2014]\u7c73\u7279\u8fd0\u8f93\u3011"
    },
    {
        "content": "[\u7c73\u7279\u8fd0\u8f93](https://www.luogu.com.cn/problem/P3237)\n\n\u8fd9\u9898\u7ffb\u8bd1\u9898\u9762\u5f88\u91cd\u8981\n\n\u7ed9\u51fa\u4e00\u68f5\u6811\u4ee5\u53ca\u4e0a\u9762\u70b9\u7684\u70b9\u6743\n\u8981\u6c42\u4fee\u5c3d\u53ef\u80fd\u5c11\u7684\u70b9\uff0c\u4f7f\u6811\u4e0a\u6240\u6709\u70b9\u6ee1\u8db3\u6761\u4ef6\n\n1.\u6bcf\u4e2a\u70b9\u7684\u70b9\u6743=\u5176\u513f\u5b50\u7684\u70b9\u6743\u548c\n2.\u5176\u6240\u6709\u513f\u5b50\u70b9\u6743\u76f8\u7b49\n\n\u5b9a\u4e49f\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u70b9\u4fdd\u6301\u5176\u70b9\u6743\u65f6\uff0c\u6839\u8282\u70b9\u7684\u70b9\u6743\n\nin\u6570\u7ec4\u8868\u793a\u4e00\u4e2a\u70b9\u6709\u51e0\u4e2a\u513f\u8d3c\uff08\u5982\u679c\u7528vector\u5c31\u5f53\u6211\u653e\u5c41\uff09\n$$f[x]=a[x]*\\prod in[fa]$$\n\u6ce8\u610f$\\prod in[fa]$\u662fx\u7684\u6240\u6709\u7956\u5148in\u503c\u4e4b\u79ef\n\n\u5f97\u6bcf\u4e2a\u70b9\u7684\u70b9\u6743\u90fd\u88ab\u6839\u8282\u70b9\u5b89\u6392\u7684\u660e\u660e\u767d\u767d\u2014\u2014\u53ea\u7531\u6839\u8282\u70b9\u51b3\u5b9a\n\u6700\u540e\u80af\u5b9a\u662ff\u76f8\u7b49\u7684\u70b9\u8d8a\u591a\u8d8a\u597d\u4e86\uff08\u9700\u8981\u66f4\u6539\u7684\u70b9\u66f4\u5c11\uff09\n![in_tree.png](https://i.loli.net/2020/08/02/n358JO1oVvWGASx.png)\n![f_tree.png](https://i.loli.net/2020/08/02/joPubhm5Xctq6Vy.png)\n```\n#include<cmath>\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#define ll long long\n#define ld long double\n#define N 510000\nusing namespace std;\nll n,in[N],head[N],cnt,ret,ans;\nld f[N],a[N];\n\nstruct Star_Plstinum{\n\tll to,nxt;\n}q[N*10];\n\nvoid add(ll u,ll v){\n\tq[++cnt].to=v;\n\tq[cnt].nxt=head[u];\n\thead[u]=cnt;\n}\n\nvoid dfs(ll x,ll fa,ld sum){\n\tf[x]=sum+log(a[x]);\n\tfor(ll i=head[x];i;i=q[i].nxt){\n\t\tll v=q[i].to;\n\t\tif(v!=fa){\n\t\t\tdfs(v,x,sum+log(in[x]));\n\t\t}\n\t}\n}\n\nint main(){\n\tcin>>n;\n\tfor(ll i=1;i<=n;i++){\n\t\tscanf(\"%Lf\",&a[i]);\n\t}\n\tfor(ll i=1;i<n;i++){\n\t\tll a1,a2;\n\t\tscanf(\"%lld%lld\",&a1,&a2);\n\t\tadd(a1,a2),add(a2,a1);\n\t\tin[a1]++;\n\t}\n\tdfs(1,0,0);\n\tsort(1+f,1+f+n);\n\tret=1;\n\tfor(ll i=2;i<=n;i++){\n\t\tif(f[i]-f[i-1]<=1e-9){\n\t\t\tret++;\n\t\t\tans=max(ret,ans);\n\t\t}\n\t\telse ret=1;\n\t}\n\tcout<<n-ans;\n}\n```",
        "postTime": 1596903052,
        "uid": 251882,
        "name": "\u849f\u84bb\u4e01",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3237 \u3010[HNOI2014]\u7c73\u7279\u8fd0\u8f93\u3011"
    },
    {
        "content": "### $Describe$\n\n\u8c01\u51fa\u7684\u9898\u76ee\u554a?\u8fd9\u4e48\u957f\u7684\u9898\u9762,\u770b\u5b8c\u5c31\u6eda\u7c97\u4e86.\u5f3a\u70c8\u8c34\u8d23  \n>\u7ed9\u4e00\u68f5\u6811\uff0c\u6bcf\u4e2a\u70b9\u6709\u4e00\u4e2a\u6743\u503c\uff0c\u8981\u6c42\u4fee\u6539\u4e00\u4e9b\u6743\u503c\uff0c\u4f7f\uff1a    \n1. \u4e00\u4e2a\u70b9\u7684\u6743\u503c\u5fc5\u987b\u662f\u5176\u6240\u6709\u513f\u5b50\u7684\u6743\u503c\u4e4b\u548c   \n2. \u4e00\u4e2a\u70b9\u7684\u513f\u5b50\u6743\u503c\u5fc5\u987b\u76f8\u540c    \n\u6c42\u6700\u5c11\u7684\u88ab\u4fee\u6539\u7684\u6570\u76ee  \n\n### $Solution$\n\n\u968f\u4fbf\u753b\u4e00\u753b\u56fe\u5c31\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u663e\u8457\u7684\u89c4\u5f8b,\u53ea\u8981\u786e\u5b9a\u4e86\u4e00\u4e2a\u70b9\u7684\u6743\u503c\u5c31\u53ef\u4ee5\u77e5\u9053\u6574\u9897\u6811\u7684\u503c\u4e86.\n\n\u8fd9\u91cc\u5c31\u4e0d\u8be6\u7ec6\u7684\u7ed9\u51fa\u56fe\u8fdb\u884c\u89e3\u91ca\u4e86,\u81ea\u5df1\u753b\u4e00\u753b\u56fe\u5c31\u53ef\u4ee5\u77e5\u9053\u4e86.\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u4ee4$val[x]$\u8868\u793a$x$\u8fd9\u4e2a\u70b9\u4e0d\u53d8\u7684\u8bdd,\u6839\u8282\u70b9\u7684\u503c.\n\n\u4f46\u662f\u5c06\u5b50\u8282\u70b9\u7684\u4e2a\u6570\u6210\u8d77\u6765\u4f1a\u7206$long\\ long$,\u6240\u4ee5\u9700\u8981\u8fd0\u7528\u4e00\u70b9\u5c0f\u6280\u5de7:$log$\n\n\u8fd0\u7528\u516c\u5f0f:$log(a*b)=log(a)*log(b)$\n\n\u7b54\u6848\u5c31\u662f$n-val$\u6570\u7ec4\u4e2d\u76f8\u540c\u4e2a\u6570\u6700\u591a\u7684.\n\n\n### $Code$\n\n\n```  cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst double eps=1e-6;\nint read(){\n    int x=0,f=1;char c=getchar();\n    while(c<'0'||c>'9') f=(c=='-')?-1:1,c=getchar();\n    while(c>='0'&&c<='9') x=x*10+c-'0',c=getchar();\n    return x*f;\n}\nstruct node {\n    int to,next;\n}a[500010<<1];\ndouble val[500010];\nint v[500010],head[500010],s[500010],cnt;\nvoid add(int x,int y){\n    a[++cnt].next=head[x],a[cnt].to=y,head[x]=cnt;\n    a[++cnt].next=head[y],a[cnt].to=x,head[y]=cnt;\n}\nvoid dfs(int x,int fa,double ans){\n    val[x]=ans+log(v[x]),s[x]--;\n    for(int i=head[x];i;i=a[i].next){\n    int v=a[i].to;\n    if(v==fa)\n        continue;\n    dfs(v,x,ans+log(s[x]));\n    }\n}\nmain(){\n    int n=read(),x,y,maxx=0,js=1;\n    for(int i=1;i<=n;i++)\n    v[i]=read();\n    for(int i=1;i<n;i++)\n    x=read(),y=read(),add(x,y),s[x]++,s[y]++;\n    s[1]++,dfs(1,0,0);\n    sort(val+1,val+1+n);\n    for(int i=2;i<=n;i++){\n    if(val[i]-val[i-1]<eps)\n        js++;\n    else maxx=max(maxx,js),js=1;\n    }\n    printf(\"%d\",n-maxx);\n}\n```",
        "postTime": 1550478364,
        "uid": 19805,
        "name": "\u64a4\u4e91",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P3237 \u3010[HNOI2014]\u7c73\u7279\u8fd0\u8f93\u3011"
    },
    {
        "content": "# \u54c8\u5e0c\n### \u5206\u6790\n\u6839\u636e\u9898\u610f\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u672c\u9898\u7684\u6574\u68f5\u6811\u9700\u8981\u6ee1\u8db3\u5982\u4e0b\u7684\u6027\u8d28\uff1a\n\n\t1.\u8282\u70b9x\u7684\u6240\u6709\u5b50\u8282\u70b9\u5927\u5c0f\u5fc5\u987b\u76f8\u7b49\n\t2.\u8282\u70b9x\u7684\u6240\u6709\u5b50\u8282\u70b9\u7684\u5bb9\u91cf\u4e4b\u548c\u7b49\u4e8ex\u7684\u5bb9\u91cf\n\n\u6839\u636e\u8fd9\u51e0\u4e24\u4e2a\u6027\u8d28\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u5982\u679c\u6211\u4eec\u786e\u5b9a\u4e86\u6839\u8282\u70b9\u7684\u5bb9\u91cf\uff0c\u6574\u68f5\u6811\u7684\u5bb9\u91cf\u5c31\u53ef\u4ee5\u552f\u4e00\u786e\u5b9a\u3002\n\n\u56e0\u6b64\uff1a\u5bf9\u4e8e\u4e00\u4e2a\u8282\u70b9\uff0c\u82e5\u5176\u5bb9\u91cf\u5df2\u7ecf\u786e\u5b9a\u4e3aa,\u5219\u5176k\u4e2a\u5b50\u8282\u70b9\u7684\u5bb9\u91cf\u90fd\u4e3a$\\frac{a}{k}$\u3002\u6211\u4eec\u5c31\u8fd9\u6837\u9012\u63a8\u6bcf\u4e2a\u8282\u70b9\u7684\u5bb9\u91cf\u5173\u4e8e\u6839\u8282\u70b9\u5bb9\u91cf$a_0$\u7684\u5173\u7cfb\u3002\n\n\u6700\u7ec8\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u53ef\u4ee5\u552f\u4e00\u786e\u5b9a$a_x=k_xa_0$\n\n\u73b0\u5728\uff0c\u6211\u4eec\u53ea\u9700\u8981\u786e\u5b9a\u4e00\u4e2a\u6700\u4f18\u7684$a_0$\u4f7f\u5f97\u9700\u8981\u91cd\u5efa\u7684\u5b58\u50a8\u5668\u6700\u5c11\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u53d8\u7684$a_x$\u6700\u591a\u3002\n\n\u4e8e\u662f\u6211\u4eec\u53cd\u8fc7\u6765\u8003\u8651\u6bcf\u4e2a$a_x$\u3002\u6c42\uff1a\u5982\u679c$a_x$\u4e0d\u53d8\uff0c\u90a3\u4e48$a_0$\u662f\u591a\u5c11\uff0c\u5c06\u8fd9\u4e2a\u503c\u5bf9\u5e94\u7684\u54c8\u5e0c\u8868\u4e2d\u7684\u4f4d$+1$\uff0c\u6700\u7ec8\u54c8\u5e0c\u8868\u4e2d\u6700\u5927\u7684\u503c\u5c31\u662f\u6700\u591a\u4e0d\u53d8\u7684$a_x$\u6570\u91cf\u3002\n\n\u7531\u4e8e$a_0$\u4e00\u5b9a\u53ef\u4ee5\u8868\u793a\u4e3a$a_x$\u7684\u6574\u6570\u500d\uff0c\u6240\u4ee5\u6211\u4eec\u8fdb\u884c\u6574\u6570\u54c8\u5e0c\u5373\u53ef\u3002\n\n\u95ee\u9898\u662f\u6211\u4eec\u6240\u6c42\u7684\u6574\u6570\u5f80\u5f80\u5f88\u5927\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e2a\u6574\u6570\u53d6\u6a21\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u6211\u4eec\u5c06\u6574\u6570\u5bf9\u591a\u4e2a\u6570\u53d6\u6a21\u5373\u53ef\u3002\u8fd9\u6837\u51b2\u7a81\u7684\u53ef\u80fd\u6027\u5c06\u5f88\u4f4e\u3002\n\n```cpp\n#include <iostream>\n#include <cstring>\n#include <cstdio>\n#define TSIZ 1234567LL\n#define MX 1000001\n#define D 3\n\nusing namespace std;\n\ntypedef long long ll;\n\nconst ll mod[D]={14233333LL,998244353LL,10000009LL};\nint n,w[MX];\n\nll ksm(ll x,ll t,ll p)\n{\n\tll ans=1;\n\twhile(t)\n\t{\n\t\tif(t&1)ans=ans*x%p;\n\t\tt>>=1;\n\t\tx=x*x%p;\n\t}\n\treturn ans;\n}\n\nstruct graph\n{\n\tint fst[MX],nxt[MX],v[MX],d[MX],lnum;\n\tvoid init(){memset(fst,0xff,sizeof(fst)),lnum=-1;}\n\tvoid addeg(int nu,int nv)\n\t{\n\t\tnxt[++lnum]=fst[nu];\n\t\tfst[nu]=lnum;\n\t\tv[lnum]=nv;\n\t\td[nv]++;\n\t}\n}G;\n\nstruct numbr\n{\n\tll x[D];\n\tnumbr operator * (const ll y){numbr t;for(int i=0;i<D;i++)t.x[i]=x[i]*y%mod[i];return t;}\n\tbool operator == (const numbr y)const{for(int i=0;i<D;i++)if(x[i]!=y.x[i])return 0;return 1;}\n};\n\nstruct hasht\n{\n\tnumbr real[MX];\n\tint fst[TSIZ],nxt[MX],cnt[MX],hnum;\n\tvoid init(){memset(fst,0xff,sizeof(fst)),hnum=-1;}\n\tvoid insert(numbr x,int a)\n\t{\n\t\tll p=0;\n\t\tfor(int i=0;i<D;i++)p=(p+x.x[i])%TSIZ;\n\t\tfor(int i=fst[p];i!=-1;i=nxt[i])\n\t\t\tif(x==real[i])\n\t\t\t{\n\t\t\t\tcnt[i]+=a;\n\t\t\t\treturn;\n\t\t\t}\n\t\tnxt[++hnum]=fst[p];\n\t\tfst[p]=hnum;\n\t\tcnt[hnum]=a;\n\t\treal[hnum]=x;\n\t}\n\tint count(numbr x)\n\t{\n\t\tll p=0;\n\t\tfor(int i=0;i<D;i++)p=(p+x.x[i])%TSIZ;\n\t\tfor(int i=fst[p];i!=-1;i=nxt[i])\n\t\t\tif(x==real[i])\n\t\t\t\treturn cnt[i];\n\t\treturn 0;\n\t}\n}H;\n\nvoid input()\n{\n\tint a,b;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%d\",&w[i]);\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tscanf(\"%d%d\",&a,&b);\n\t\tG.addeg(a,b);\n\t\tG.addeg(b,a);\n\t}\n}\n\nint ans=MX;\nvoid dfs(int x,int f,numbr now)\n{\n\tnumbr nxt=(now*ll(G.d[x]-(x!=1)));\n\tH.insert(now*(ll)w[x],1);\n\tfor(int i=G.fst[x];i!=-1;i=G.nxt[i])\n\t\tif(G.v[i]!=f)\n\t\t\tdfs(G.v[i],x,nxt);\n\tans=min(ans,n-H.count(now*w[x]));\n}\n\nint main()\n{\n\tG.init(),H.init();\n\tnumbr beg;for(int i=0;i<D;i++)beg.x[i]=1;\n\tinput();\n\tdfs(1,0,beg);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1522321774,
        "uid": 41155,
        "name": "totorato",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P3237 \u3010[HNOI2014]\u7c73\u7279\u8fd0\u8f93\u3011"
    },
    {
        "content": "# \u9898\u610f\n\u7ed9\u4e00\u68f5\u6811\uff0c\u6bcf\u4e2a\u70b9\u6709\u4e00\u4e2a\u6743\u503c\uff0c\u8981\u6c42\u4fee\u6539\u4e00\u4e9b\u70b9\u7684\u6743\u503c\uff0c\u4f7f\u5f97\uff1a\n\n1\u3001\u4e00\u4e2a\u8282\u70b9\u7684\u5b50\u8282\u70b9\u5fc5\u987b\u5168\u90e8\u76f8\u540c\n\n2\u3001\u7236\u8282\u70b9\u5fc5\u987b\u662f\u6240\u6709\u5b50\u8282\u70b9\u6743\u503c\u4e4b\u548c\n\n\u6700\u5c11\u8981\u4fee\u6539\u591a\u5c11\u4e2a\uff1f\n\n\n------------\n## \u601d\u8def\n\n\u8fd9\u9898\u7b2c\u4e00\u773c\u770b\u6211\u4eec\u4f1a\u60f3\u5230\u66b4\u529b\u601d\u8def\uff1a\u5f88\u660e\u663e\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u70b9\u7b26\u5408\u8981\u6c42\uff08\u6216\u5b50\u8282\u70b9\u4fee\u6539\u540e\u7b26\u5408\u8981\u6c42\uff09\uff0c\u5c31\u76f4\u63a5\u5229\u7528\uff0c\u7136\u540e\u5728\u6811\u4e0a\u8dd1\uff0c~~\u66b4\u529b\u6a21\u62df~~\n\n\u4e0d\u8fc7\u5728\u753b\u5b8c\u56fe\u540e\u6211\u4eec\u4f1a\u53d1\u73b0\u2014\u2014\n\n**\u53ea\u8981\u786e\u5b9a\u4e00\u4e2a\u503c\uff0c\u5c31\u53ef\u4ee5\u786e\u5b9a\u6574\u4e2a\u6811\u6240\u6709\u8282\u70b9\u7684\u503c**\n\n\u56e0\u4e3a\u6211\u4eec\u6bcf\u4e2a\u8282\u70b9\u90fd\u53d7\u81ea\u5df1\u5b50\u8282\u70b9\u7684\u9650\u5236\uff0c\u8fd9\u5f88\u5bb9\u6613\u660e\u767d\uff08~~\u4e0d\u660e\u767d\u5c31\u81ea\u5df1\u624b\u753b\u4e00\u4e0b~~\uff09\uff0c\u7136\u540e\u4ece\u8fd9\u4e2a\u7ed3\u8bba\u53ef\u4ee5\u63a8\u51fa\uff1a\n\n**\u6211\u4eec\u53ef\u4ee5\u4ee5\u6839\u8282\u70b9\u7684\u503c\u4e3a\u8054\u7cfb\uff0c\u627e\u5230\u6027\u8d28\u76f8\u540c\u7684\u8282\u70b9\u6709\u591a\u5c11\u4e2a~~**\n\n\u6211\u4eec\u8bbe $f[i]$ \u8868\u793a\u5230\u4ece1\u53f7\u5e97\u904d\u5386\u5230i\u53f7\u8282\u70b9\u7684\u603b\u8fb9\u6570\uff0c\u8fd9\u6837\u9898\u76ee\u4fbf\u6e05\u6670\u7684\u53d8\u6210\u4e86\u4e00\u4e2a\u6811\u5f62DP\uff0c\u7531 $f[i] $ \u7684\u6027\u8d28\u53ef\u77e5\u8fd9\u662f\u4e00\u4e2a\u7531\u4e0a\u81f3\u4e0b\u7684\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u63a8\u51fa \n$f[i]=f[i's fa]* du[i's fa] $\n( $du[i]$ \u8868\u793a\u8282\u70b9i\u7684\u4e0b\u4e00\u5c42\u5b50\u6811\u8282\u70b9\u6570\u91cf ) \uff0c\n\n\u53ef\u77e5 $f[i]*a[i]$\u5373\u4e3a\u6839\u8282\u70b9\u7684\u6743\u503c\u3002\u53ea\u8981\u627e\u5230\u6700\u591a\u503c\u76f8\u540c\u7684 $f[i]*a[i]$ ,\u5e76\u7528\u603b\u6570\u51cf\u53bb\u5373\u4e3a\u7b54\u6848\uff08\u4e2a\u4eba\u8ba4\u4e3a\u81ea\u5df1\u5728\u4ee3\u7801\u5199\u7684\u6bd4\u8f83\u6e05\u695a\uff09\n\n\u8be6\u7ec6\u5206\u6790\u89c1\u4ee3\u7801\n\n **\u4e0d\u8fc7\u6570\u636e\u8fc7\u5927\u4f1a\u7206long long,\u5bf9\u6b64\u53ef\u4ee5\u5199\u9ad8\u7cbe\u5ea6\u6216\u8005\u7528$log(loga+logb==log(a*b))$**\n\n\u6211\u8ba4\u4e3a\u6211\u7801\u98ce\u8fd8\u4e0d\u9519\uff0c\u800c\u4e14~~\u5e94\u8be5\u90fd\u770b\u7684\u660e\u767d\u5427~~\n```cpp\n#include<bits/stdc++.h>\n#define num 5000001\nusing namespace std;\nint n,tot=0,ans=0,cnt=0;\ndouble a[num],f[num];//\u8868\u793a\u5230\u7b2ci\u53f7\u8282\u70b9\u4e00\u5171\u6709\u51e0\u6761\u8fb9 \nint h[num],du[num];\n//\u501f\u6b64\u53ef\u8868\u8fbe\u6839\u7684\u6743\u503c\uff0c\u501f\u6b64\u82e5f\u76f8\u540c\u7684\u8d8a\u591a\uff0c\u5219\u91cd\u5efa\u6570\u91cf\u8d8a\u5c11\uff08\u663e\u7136\uff09 \n//\u4f46\u53ef\u60dcf\u7684\u503c\u4f1a\u5f88\u5927\uff0c\u53ef\u4ee5\u7528\u9ad8\u7cbe\u5ea6\uff0c\u4f46\u8fd8\u53ef\u4ee5\u7528log \nstruct qbl{\n\tint v,next;\n}e[num];\nvoid add(int u,int v){\n\te[++tot].v=v;e[tot].next=h[u];h[u]=tot;\n}\nvoid dfs(int x,int fa){//\u7ecf\u5178\u6811\u5f62DP\n\tif(fa==1) f[x]=f[fa]+log((double)du[fa]);\n\telse if(fa==0) f[x]=log((double)1.0);\n\telse f[x]=f[fa]+log((double)(du[fa]-1));\n\t//\u5de7\u5999\u7684log\u52a0\u6cd5\u4ee3\u66ff\u4e58\u6cd5\uff08\u8bb0\u4f4f\u53ef\u4ee5\u7528\u5c0f\u6570\uff09 \n\tfor(int i=h[x];i;i=e[i].next){\n\t\tint y=e[i].v;if(y==fa) continue;\n\t\tdfs(y,x);\t\n\t}\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;i++) cin>>a[i];\n\tfor(int i=1;i<n;i++){\n\t\tint a,b;cin>>a>>b;\n\t\tadd(a,b);add(b,a);\n\t\tdu[a]++;du[b]++;\n\t}\n\tdfs(1,0);\n\tfor(int i=1;i<=n;i++) f[i]=f[i]+log((double)a[i]);\n\tsort(f+1,f+1+n);\n\tfor(int i=1;i<=n;i++){\n\t\tif(f[i]-f[i-1]<=0.0000001){cnt++;ans=max(cnt,ans);}\n\t\telse cnt=1;\n\t}\n\tans=n-ans;\n\tcout<<ans<<endl;\n\treturn 0;\n} \n```\n",
        "postTime": 1627300543,
        "uid": 97946,
        "name": "RAIH",
        "ccfLevel": 4,
        "title": "P3237 [HNOI2014]\u7c73\u7279\u8fd0\u8f93"
    },
    {
        "content": "\u7b80\u5316\u9898\u610f:\n\n\u4e00\u68f5$n$\u4e2a\u70b9\u7684\u6811,\u6bcf\u4e00\u4e2a\u70b9\u6709\u4e2a\u521d\u59cb\u70b9\u6743,\u7b2c$i$\u4e2a\u70b9\u70b9\u6743\u4e3a$A_i$,\u8981\u6c42\u4efb\u610f\u8282\u70b9\u7684\u5b50\u8282\u70b9\u6743\u503c\u76f8\u7b49,\u7236\u8282\u70b9\u6743\u503c\u7b49\u4e8e\u5b50\u8282\u70b9\u7684\u548c,\u95ee\u6700\u5c11\u9700\u8981\u6539\u53d8\u591a\u5c11\u70b9\u7684\u6743\u503c\u3002\n\n\u8bbe\u8282\u70b9$i$\u7684\u5b50\u8282\u70b9\u6570\u91cf\u4e3a$sz_i$,\u70b9$i$\u4fee\u6539\u4ee5\u540e\u7684\u70b9\u6743\u4e3a$w_i$\u3002\n\n\u53d1\u73b0\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u70b9$i$\u7684\u6743\u503c\u53ef\u4ee5\u5f97\u5230\u6240\u6709\u76f8\u90bb\u70b9\u7684\u6743\u503c:\u5b83\u7684\u6bcf\u4e00\u4e2a\u5b50\u8282\u70b9\u5c31\u662f$\\frac{w_i}{sz_i}$,\u5b83\u7684\u7236\u8282\u70b9$fa$\u7684\u70b9\u6743\u5c31\u662f$w_i\\times sz_{fa}$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5047\u8bbe\u6211\u4eec\u786e\u5b9a\u4e86\u6839\u8282\u70b9\u7684\u70b9\u6743,\u90a3\u4e48\u6211\u4eec\u5c31\u786e\u5b9a\u4e86\u6bcf\u4e00\u4e2a\u70b9\u7684\u70b9\u6743\u3002\u5bf9\u4e8e\u4efb\u610f\u70b9$i$,\u8bbe\u5b83\u7684\u7236\u4eb2\u5230\u6839\u7684\u8def\u5f84\u4e0a\u7684\u70b9\u4e3a$p_1,p_2,p_3,...,p_m$,\u90a3\u4e48\u8be5\u70b9\u7684\u6743\u503c\u5c31\u662f$\\frac{w_1}{\\Pi_{i=1}^mP_i}$,\u5373\u6839\u8282\u70b9\u7684\u70b9\u6743\u4e58\u8def\u5f84\u4e0a\u6240\u6709\u70b9\u7684\u5b50\u8282\u70b9\u6570\u91cf\u7684\u4e58\u79ef\u3002\n\n\u6211\u4eec\u8bbe\u4e00\u4e2a\u70b9$i$\u7684\u7236\u8282\u70b9\u5230\u6839\u8282\u70b9\u7684\u8def\u5f84\u4e0a\u6240\u6709\u70b9\u5b50\u8282\u70b9\u6570\u91cf\u7684\u4e58\u79ef\u4e3a$k_i$,\u5e76\u94a6\u5b9a$k_1=1$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u6709$w_i=\\frac{w_1}{k_i}$\u3002\n\n\u4e8e\u662f$w_1=w_i\\times k_i$\u3002\n\n\u6211\u4eec\u8981\u6c42\u6ee1\u8db3$w_i=A_i$\u7684$i$\u6570\u91cf\u6700\u591a\u3002\n\n\u5df2\u77e5\u5982\u679c\u70b9$i$\u6ee1\u8db3\u6761\u4ef6,\u90a3\u4e48$w_1=k_i\\times A_i$\u3002\n\n\u6240\u4ee5\u6211\u4eec\u8981\u627e\u4e00\u4e2a$w_1$,\u4f7f\u5f97\u4e0a\u8ff0\u6761\u4ef6\u6ee1\u8db3\u7684\u6570\u91cf\u6700\u591a\u3002\n\n\u6240\u4ee5\u6211\u4eec\u628a\u6bcf\u4e00\u4e2a\u70b9$i$\u7684$k_i\\times A_i$\u5b58\u5165\u54c8\u5e0c\u8868,\u770b\u4e00\u4e0b\u8868\u4e2d\u6570\u91cf\u6700\u591a\u7684\u503c\u7684\u6570\u91cf\u5373\u53ef\u3002\n\n\u6ce8\u610f\u8fd9\u4e2a\u503c\u662f\u53ef\u4ee5\u6ee1\u8db3\u7684\u6700\u5927\u6570\u91cf,\u6211\u4eec\u8981\u8f93\u51fa\u7684\u662f\u9700\u8981\u4fee\u6539\u7684\u6700\u5c0f\u6570\u91cf,\u6240\u4ee5\u8981\u7528$n$\u51cf\u8fd9\u4e2a\u6700\u5927\u503c\u7136\u540e\u8f93\u51fa\u3002\n\ncode:\n\n\u54c8\u5e0c\u6a21\u6570\u5efa\u8bae\u53d63\u4e2a\u4ee5\u4e0a\u6bd4\u8f83\u4fdd\u9669\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int mod1=19260817;\nconst int mod2=998244353;\nconst int mod3=1e9+7;\nstruct edge{\n    int t,nxt;\n}e[1000010];\nstruct hv{\n    int m1,m2,m3;\n    bool operator>(const hv&y)const{\n        return m1==y.m1?(m2==y.m2?m3>y.m3:m2>y.m2):m1>y.m1;\n    }\n    bool operator<(const hv&y)const{\n        return m1==y.m1?(m2==y.m2?m3<y.m3:m2<y.m2):m1<y.m1;\n    }\n    hv operator*(const int&y)const{\n        hv tmp;\n        tmp.m1=1ll*m1*y%mod1,tmp.m2=1ll*m2*y%mod2,tmp.m3=1ll*m3*y%mod3;\n        return tmp;\n    }\n}k[500010];\nint n,a[500010],u,v,cnt,be[500010],sz[500010],vis[500010],ans;\nmap<hv,int>mp;\nvoid scan(int&x){\n    x=0;\n    char c=getchar();\n    while(!isdigit(c))c=getchar();\n    while(isdigit(c))x=x*10+c-'0',c=getchar();\n}\nvoid add(int x,int y){\n    e[++cnt].t=y,e[cnt].nxt=be[x],be[x]=cnt;\n}\nvoid Getk(int x){\n    vis[x]=1;\n    hv upd=k[x]*sz[x];\n    for(int i=be[x];i;i=e[i].nxt)!vis[e[i].t]?k[e[i].t]=upd,Getk(e[i].t),0:0;\n}\nint main(){\n    scan(n);\n    for(int i=1;i<=n;++i)scan(a[i]);\n    for(int i=1;i<n;++i)scan(u),scan(v),add(u,v),add(v,u),++sz[u],++sz[v];\n    for(int i=2;i<=n;++i)--sz[i];\n    k[1]=(hv){1,1,1},Getk(1);\n    for(int i=1;i<=n;++i)ans=max(ans,++mp[k[i]*a[i]]);\n    printf(\"%d\",n-ans);\n    return 0;\n}\n```",
        "postTime": 1551865920,
        "uid": 26294,
        "name": "xryjr233",
        "ccfLevel": 9,
        "title": "[2019.3.6]LuoguP3237/BZOJ3573 [Hnoi2014]\u7c73\u7279\u8fd0\u8f93(\u6570\u5b66/\u54c8\u5e0chash)"
    },
    {
        "content": "[link](https://www.luogu.com.cn/problem/P3237)\n\n\u6211\u9519\u4e86\uff0c\u6211\u518d\u4e5f\u4e0d\u7528\u56fe\u7247\u4ee3\u7801\u4e86\n\n## \u524d\u8a00\n\n\u6b64\u9898\u9898\u76ee\u63cf\u8ff0\u975e\u5e38\u7e41\u7410\uff0c\u53ef\u4ee5\u5316\u7b80\u4e3a\uff1a\n1. \u4e00\u4e2a\u8282\u70b9\u7684\u6240\u6709\u513f\u5b50\u8282\u70b9\u7684\u70b9\u6743\u76f8\u7b49\n2. \u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u7684\u6743\u503c\u662f\u5b83\u6240\u6709\u513f\u5b50\u7684\u6743\u503c\u7684\u548c\n3. \u6c42\u6784\u9020\u4e00\u68f5\u6ee1\u8db3\u4e0a\u8ff0\u6761\u4ef6\u7684\u6811\u81f3\u5c11\u8981\u4fee\u6539\u591a\u5c11\u4e2a\u70b9\u7684\u70b9\u6743\n\n## \u9898\u89e3\n\u4e86\u89e3\u5b8c\u9898\u76ee\u610f\u601d\u4e4b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u660e\u663e\u770b\u51fa\uff1a\u53ea\u8981\u4e00\u4e2a\u70b9\u7684\u70b9\u6743\u786e\u5b9a\uff0c\u6811\u4e0a\u6240\u6709\u70b9\u7684\u6743\u503c\u90fd\u786e\u5b9a\u4e86\u3002\n\n\u5982\u679c\u968f\u4fbf\u8003\u8651\u4e00\u4e2a\u70b9\u7684\u6743\u503c\u5e76\u5c06\u5176\u62d3\u5c55\u5230\u6574\u4e2a\u6811\u7684\u6743\u503c\u4f1a\u975e\u5e38\u9ebb\u70e6\uff08\u751a\u81f3\u7b97\u4e0d\u51fa\u7b54\u6848\uff09\u3002\n\n\u6211\u4eec\u968f\u624b\u6784\u9020\u4e00\u9897\u7b26\u5408\u8981\u6c42\u7684\u6811\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/rbcm3qtl.png)\n\n\u5f88\u663e\u7136\uff0c\u5728\u4e00\u4e2a\u56fa\u5b9a\u7684\u5408\u6cd5\u56fe\u5f53\u4e2d\uff0c**\u4e00\u4e2a\u70b9\u7684\u70b9\u6743\u548c\u6839\u8282\u70b9\u7684\u70b9\u6743\u4e4b\u6bd4\u4e0d\u53d8**\uff0c\u5e76\u4e14 **\u6839\u8282\u70b9\u7684\u70b9\u6743\u603b\u662f\u4e00\u4e2a\u70b9\u7684\u70b9\u6743\u7684\u6574\u6570\u500d**\n\n\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6c42\u51fa\u5728\u4e00\u4e2a**\u5408\u6cd5**\u7684\u56fe\u5f53\u4e2d\u6839\u8282\u70b9\u7684\u70b9\u6743\u4e0e\u8282\u70b9 $i$ \u7684\u70b9\u6743\u7684\u6574\u6570\u500d $k_i$ \u3002\n\n\u901a\u8fc7 $k_i$ \u4e58\u4e0a\u5b9e\u9645\u70b9\u6743 $a_i$ \u5f97\u5230\u4e00\u4e2a\u201c\u7406\u60f3\u6839\u8282\u70b9\u201d\u7684\u70b9\u6743\u3002\n\n\u90a3\u4e48\u201c\u7406\u60f3\u6839\u8282\u70b9\u201d\u7684\u70b9\u6743\u76f8\u540c\u7684\u8282\u70b9\u5c31\u5904\u4e8e\u540c\u4e00\u4e2a\u81ea\u5df1\u70b9\u6743\u6b63\u786e\u7684\u201c\u7406\u60f3\u6811\u201d\u5f53\u4e2d\u3002\n\n\u6c42\u51fa\u51fa\u73b0\u6b21\u6570\u6700\u591a\u7684\u201c\u7406\u60f3\u6839\u8282\u70b9\u201d\u7684\u70b9\u6743\u51fa\u73b0\u7684\u6b21\u6570 $sum$ , $n-sum$ \u5373\u4e3a\u7b54\u6848\u3002\n\n\u4f7f\u7528\u54c8\u5e0c\u5373\u53ef\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long \nusing namespace std;\nconst int maxn = 5e5 + 5;\nconst int mod = 998244353;\n\nmap <int,int> Map;\nint n;\nint a[maxn];\nvector <int> G[maxn];\nint q[maxn];\nint cnt,ans;\n\nvoid dfs(int u,int fa)\n{\n\tif(u != 1)\n\t{\n\t\tif(fa == 1)\n\t\t\tq[u] = G[fa].size();\n\t\telse\n\t\t\tq[u] = q[fa] * (G[fa].size() - 1) % mod;\n\t}\n\t\t\n\tfor(int i = 0;i < G[u].size();i++)\n\t\tif(G[u][i] != fa)\n\t\t\tdfs(G[u][i],u);\n}\n\nsigned main()\n{\n\tcin >> n;\n\tfor(int i = 1;i <= n;i++)\n\t\tcin >> a[i];\n\tfor(int i = 1;i < n;i++)\n\t{\n\t\tint u,v;\n\t\tcin >> u >> v;\n\t\tG[u].push_back(v);\n\t\tG[v].push_back(u);\n\t}\n\tq[1] = 1;\n\tdfs(1,0);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\t++Map[a[i] * q[i] % mod];\n\t\tans = max(ans,Map[a[i] * q[i] % mod]);\n\t}\n\tcout << n - ans;\n\treturn 0;\n}\n```\n\n",
        "postTime": 1657326981,
        "uid": 413301,
        "name": "Digital_Sunrise",
        "ccfLevel": 7,
        "title": "[HNOI2014]\u7c73\u7279\u8fd0\u8f93 \u9898\u89e3"
    },
    {
        "content": "\n\u66f4\u597d\u7684\u9605\u8bfb\uff1a[\u70b9\u6211](https://payphone-x.top/2020/05/22/luoguP3237/)\n\n---------------\n\n## \u5206\u6790\n\n~~\u771f\u5c31tm\u9605\u8bfb\u7406\u89e3\u9898\u5457~~\n\n\u9898\u610f\u5373\u7ed9\u4f60\u4e00\u9897\u6811\uff0c\u9700\u8981\u4f60\u6539\u53d8\u4e00\u4e9b\u70b9\u7684\u70b9\u6743\uff0c\u4f7f\u5176\u6ee1\u8db3\u4ee5\u4e0b\u6027\u8d28\uff1a\n\n1. \u6bcf\u4e2a\u70b9\u7684\u5b50\u8282\u70b9\u6743\u503c\u5747\u76f8\u540c\n2. \u7236\u8282\u70b9\u6743\u503c\u4e3a\u5176\u5404\u5b50\u8282\u70b9\u7684\u6743\u503c\u548c\u3002\n\n\u8003\u8651\u5982\u4f55\u8ba1\u7b97\u3002\u4ed4\u7ec6\u89c2\u5bdf\uff0c\u4e0d\u96be\u53d1\u73b0**\u5f53\u4e00\u4e2a\u70b9\u7684\u70b9\u6743\u786e\u5b9a\u540e\uff0c\u6574\u68f5\u6811\u7684\u70b9\u6743\u4e5f\u5c06\u968f\u4e4b\u786e\u5b9a**\u3002\n\n\u8bbe$f[i]$\u8868\u793a$i$\u8282\u70b9\u7684\u6743\u503c\u4e3a$val[i]$\u65f6\uff0c\u6839\u8282\u70b9\u7684\u6743\u503c\u662f$i$\u8282\u70b9\u7684\u51e0\u500d\u3002\u5373\n\n$$val[root] = f[i] \\times val[i]$$\n\n\u8f6c\u79fb\u6bd4\u8f83\u7b80\u5355\uff0c\u4e3a\n\n$$f[to] = f[x] \\times (in[x] - 1)$$\n\n\u5176\u4e2d\uff0c$in[x]$\u8868\u793a\u7684\u662f\u8282\u70b9$x$\u7684\u5ea6\u6570(\u5373\u6709\u591a\u5c11\u8fb9\u4e0e\u8282\u70b9$x$\u76f8\u8fde)\u3002\u800c$in[x] - 1$\u662f\u56e0\u4e3a**\u6bcf\u4e2a\u70b9\u5bf9\u7b54\u6848\u4ea7\u751f\u8d21\u732e\u7684\u8fb9\u4e3a\u8be5\u70b9\u4e0e\u5b50\u8282\u70b9\u7684\u8fde\u8fb9**\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u51cf\u53bb\u7236\u8282\u70b9\u4ea7\u751f\u7684\u5ea6\u6570\n\n\u7279\u522b\u5730\uff0c\u5bf9\u4e8e\u6839\u8282\u70b9\u6211\u4eec\u9700\u8981\u7279\u6b8a\u5904\u7406\uff0c\u5373$f[to] = f[1] \\times in[x]$\u3002\u56e0\u4e3a\u6839\u8282\u70b9\u6ca1\u6709\u7236\u4eb2\u3002\n\n\u6700\u540e\u5bf9$f$\u6570\u7ec4\u8fdb\u884c\u6392\u5e8f\uff0c\u5982\u679c$f[i] = f[j]$\u5219\u8bf4\u660e$i$\u4e0e$j$\u53ef\u4ee5\u540c\u65f6\u6ee1\u8db3\u6761\u4ef6\uff0c\u4e0d\u9700\u8981\u66f4\u6539\u3002\u56e0\u6b64\u53ea\u9700\u627e\u51fa$f$\u6570\u7ec4\u4e2d\u7684\u6700\u957f\u76f8\u7b49\u5e8f\u5217\uff0c\u7136\u540e\u7528\u603b\u6570\u51cf\u6389\u5373\u53ef\u3002\n\n\u4f46\u8fd8\u6709\u6700\u540e\u4e00\u4e2a\u95ee\u9898\uff1a\u8282\u70b9\u70b9\u6743\u7684\u8303\u56f4\u662f$10^8$\uff0c\u76f4\u63a5\u4e58\u4e00\u5b9a\u4f1a\u6ea2\u51fa\u3002\n\n\u5bf9\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5~~\u5199\u4e2a\u9ad8\u7cbe~~\u91c7\u7528**\u6574\u6570\u54c8\u5e0c**\u6216\u8005\u662f**\u5229\u7528\u516c\u5f0f**$log(a) + log(b) = log(a \\times b)$\u8f6c\u6362\u4e3a\u52a0\u6cd5(**\u6ce8\u610f\u53ef\u80fd\u4ea7\u751f\u7684\u7cbe\u5ea6\u8bef\u5dee**)\u3002\n\n\u5269\u4e0b\u7684\u89c1\u4ee3\u7801\u6ce8\u91ca\u3002\n\n--------------------------------------------------\n\n## Code[Accepted]\n\n```Cpp\n#include <bits/stdc++.h>\n\n#define ll long long\n#define rep(i , l , r) for (int i = (l); i <= (r); i ++)\n#define per(i , r , l) for (int i = (r); i >= (l); i --)\n#define PE(i , x) for(int i = head[x]; i; i = edge[i].last)\n\nusing namespace std;\n\nconst int N = 10001;\nconst int M = 500101;\nconst int HA = 998244353;\nconst int INF = 2147483647;\nconst double eps = 1e-8;\nconst long long INFL = 9223372036854775807;\n\nint n , num[M] , in[M];\n\nstruct Edge{\n    int to , last;\n}edge[M << 1];\n\nint edge_num;\nint head[M << 1];\n\nI void add_edge(int from , int to){\n    edge[++ edge_num] = (Edge){to , head[from]}; head[from] = edge_num;\n    edge[++ edge_num] = (Edge){from , head[to]}; head[to] = edge_num;\n}\n\ndouble f[M];\n\nvoid dfs(int x , int fa , double val){\n    f[x] = val + log(num[x]);\n    in[x] --;   \n    //\u5bf9\u4e8e\u7b54\u6848\u4ea7\u751f\u8d21\u732e\u7684\u8fb9\u4e3a\u8be5\u8282\u70b9\u4e0e\u5176\u5b50\u8282\u70b9\u7684\u8fde\u8fb9\uff0c\u56e0\u6b64\u9700\u8981\u51cf\u53bb\u7236\u8282\u70b9\u7684\u5ea6\u6570   \n    PE(i , x){\n        int to = edge[i].to;\n        if(to == fa) continue;\n        dfs(to , x , val + log(in[x]));\n    }\n}\n\nint main() {\n    #ifdef LOCAL\n        freopen(\"try.in\" , \"r\" , stdin);\n        freopen(\"try1.out\" , \"w\" , stdout);\n    #endif\n    scanf(\"%d\" , &n);\n    rep(i , 1 , n){\n        scanf(\"%d\" , &num[i]);\n    }\n    int u , v;\n    rep(i , 1 , n - 1){\n        scanf(\"%d%d\" , &u , &v);\n        add_edge(u , v);\n        in[u] ++ , in[v] ++;\n    }\n    in[1] ++;    //1\u53f7\u8282\u70b9\u6ca1\u6709\u7236\u4eb2\uff0c\u9700\u8981\u5355\u72ec\u52a0\u4e00\u4e2a\u5ea6\u6570\n    dfs(1 , 0 , log(1));\n    sort(f + 1 , f + 1 + n);\n    int ans = 1 , cnt = 0;\n    rep(i , 2 , n){\n        if(f[i] - f[i - 1] < eps){  //\u6ce8\u610f\u53ef\u80fd\u5b58\u5728\u7684\u7cbe\u5ea6\u8bef\u5dee\n            cnt ++;\n        }\n        else{\n            ans = max(ans , cnt);\n            cnt = 1;\n        }\n    }\n    printf(\"%d\\n\" , n - ans);\n\n    return 0;\n}\n```\n\n---------------------------------------\n\n# THE END\n",
        "postTime": 1590154987,
        "uid": 129639,
        "name": "_Album_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3237 \u3010[HNOI2014]\u7c73\u7279\u8fd0\u8f93\u3011"
    },
    {
        "content": "\u9898\u76ee\u610f\u601d\u662f\u904d\u5730\u53ef\u627e\u7684\uff0c\u4f46\u662f\u6211\u4eec\u600e\u4e48\u53bb\u8bb0\u5f55\u67d0\u4e2a\u70b9\u503c\u786e\u5b9a\u65f6\u6839\u8282\u70b9\u7684\u503c\u5462\uff1f\n\n\u6211\u4e00\u5f00\u59cb\u60f3\u5230\u4e00\u4e2adfs n\u6b21\u7684\u7b97\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6n^2\uff0c\u70b8\uff01\n\n\u5176\u5b9e\u4f60\u753b\u4e2a\u56fe\u81ea\u5df1\u63a8\u4e00\u4e0b\uff0c\u89c4\u5f8b\u663e\u800c\u6613\u89c1\n\n\u8fd9\u91cc\u5199\u56fe\u7247\u63cf\u8ff0\n\nsum\u6307\u7684\u662f\u5176\u513f\u5b50\u7684\u6570\u91cf\uff1b\n\n\u5f535\u53f7\u70b9=x\u786e\u5b9a\uff0c2\u597d\u70b9\u662fx\\*2\uff0c\u6839\u8282\u70b9\u662fx\\*2\\*3\n\n\u4e03\u53f7\u70b9\u540c\u7406\uff1b\n\n\u8fd9\u6837\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u597d\u529e\u4e86\uff1b\n\n\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u4e00\u4e2a\u95ee\u9898\uff0c\u6839\u8282\u70b9\u7684\u503c\u4f1a\u70b8\u98de\uff01\uff01\uff0c\u90a3\u6211\u4eec\u600e\u4e48\u529e\u5462\uff1f\n\n\u7f51\u4e0a\u4e00\u67e5\uff0c\n\n1.hash\n2.log\n\u6211\u4e24\u4e2a\u90fd\u4e0d\u61c2\u554a\uff1b\u4f46\u662flog\u6bd4\u8f83\u7b80\u5355\n\n\u6211\u4eec\u770b\u770b\n\n![](http://img.blog.csdn.net/20170217192448695?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGFyZ2VjdWIyMzM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\n\nloga(MN)=logaM+logaN \n\n\u8fd9\u4e0d\u5c31\u597d\u529e\u4e86\u561b\uff0c\u6211\u4eec\u53ea\u8981\u628a\u4e0a\u56fe\u4e2d\u6839\u8282\u70b9\u7684\u5404\u4e2a\u503clog\u518d\u52a0\u8d77\u6765\uff0c\u5b8c\u7f8e\u538b\u7f29\u4e86\u7a7a\u95f4\u554a\uff01\uff1b\n\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\nusing namespace std;\nstruct cs{\n    int to,next;\n}a[500000];\nint head[500001],sum[500001],vv[500001];\ndouble s[500001];\nint n,m,x,y,ll,ans;\nvoid init(int x,int y){\n    ll++;\n    a[ll].to=y;\n    a[ll].next=head[x];\n    head[x]=ll;\n    sum[x]++;\n}\nvoid dfs(int x,double y){\n    s[x]=y+log(double(vv[x]));\n    for(int k=head[x];k;k=a[k].next)dfs(a[k].to,y+log(double(sum[x])));\n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)scanf(\"%d\",&vv[i]);\n    for(int i=2;i<=n;i++)scanf(\"%d%d\",&x,&y),init(x,y);\n    dfs(1,double(log(1.0)));\n    sort(s+1,s+n+1);\n    m=ans=1;\n    for(int i=2;i<=n;i++)\n    if(s[i]-s[i-1]<1e-8)m++,ans=max(ans,m);else m=1;\n    printf(\"%d\",n-ans);\n}\n```",
        "postTime": 1487335026,
        "uid": 7442,
        "name": "\u5de8\u578b\u65b9\u5757",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P3237 \u3010[HNOI2014]\u7c73\u7279\u8fd0\u8f93\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u8ba9\u4f60\u6539\u6700\u5c11\u7684\u70b9\u7684\u70b9\u6743\uff0c\u4f7f\u5f97\uff1a\n\n1. \u6240\u6709\u513f\u5b50\u7684\u70b9\u6743\u76f8\u540c\u3002\n\n2. \u8bbe\u70b9 $x$ \u62e5\u6709 $a$ \u4e2a\u70b9\u6743\u4e3a $b$ \u7684\u513f\u5b50\uff0c\u5219 $a$ \u7684\u70b9\u6743\u4e3a $a \\times b$\u3002\n\n## \u601d\u8def\n\n\u8001\u5e08\u7ed9\u6211\u8bb2\u4e86\u4e00\u4e0b\u8fd9\u4e2a\u9898\uff0c\u4e8e\u662f\u5c31\u6765\u505a\u4e00\u4e0b\u3002\n\n\u9996\u5148\u6839\u636e\u6761\u4ef6\uff0c\u4e0d\u96be\u63a8\u51fa\uff0c\u4e00\u65e6\u6811\u4e0a\u4efb\u610f\u70b9\u7684\u70b9\u6743\u786e\u5b9a\uff0c\u90a3\u4e48\u6574\u68f5\u6811\u7684\u6240\u6709\u70b9\u7684\u70b9\u6743\u4e5f\u90fd\u80fd\u786e\u5b9a\uff0c\u53ea\u4e0d\u8fc7\u6839\u8282\u70b9\u662f\u6700\u7b80\u5355\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4ee5\u6839\u8282\u70b9\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\n\n\u6709\u4e86\u4e0a\u9762\u7684\u6761\u4ef6\uff0c\u663e\u7136\u53ef\u4ee5\u8bbe $f_i$ \u8868\u793a\u5f53 $i$ \u7684\u70b9\u6743\u786e\u5b9a\u65f6\uff0c\u6839\u8282\u70b9\u7684\u70b9\u6743\u3002\u5219\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u662f\uff1a\n\n$$f_i = a_i \\times \\prod\\limits_{x \\in \\text{father}_i}in_x$$\n\n\u5219\u4e0d\u53d8\u7684\u70b9\u7684\u4e2a\u6570\u5c31\u662f\u5c06 $f$ \u6392\u4e00\u904d\u5e8f\uff0c\u5728 $f$ \u5f53\u4e2d\u627e\u6700\u957f\u76f8\u540c\u7684\u957f\u5ea6\u3002\u7b54\u6848\u5c31\u662f\u7528 $n$ \u51cf\u53bb\u8fd9\u4e2a\u503c\u3002\n\n\u5f53\u7136\uff0c$a_i \\le 10^8$\uff0c\u8fde\u4e58\u4f1a\u7206 $\\text{long long}$\uff0c\u6240\u4ee5\u9700\u8981\u5c06\u4e58\u6cd5\u8f6c\u6362\u6210 $\\log$\uff0c\u56e0\u4e3a $\\log$ \u6709 $\\log(a) \\times \\log(b) = \\log(a \\times b)$ \u7684\u6027\u8d28\uff0c\u6240\u4ee5\u53ef\u4ee5\u4ee3\u66ff\u4e58\u6cd5\u3002\n\n## \u4ee3\u7801\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n\n#define endl '\\n'\n#define DEBUG cout << \"fuck ccf!!!\\n\";\n#define DeBuG cout << \"fuck ccf\";\n#define int long long\n\nusing namespace std;\n\nconst int N = 5e5 + 5;\nconst double eps = 1e-8;\n\nint n;\ndouble a[N], in[N];\n\nint head[N], tot;\n\nstruct Node{\n  int to, next;\n}edges[N * 2];\n\nvoid add(int u, int v){\n  tot++;\n  edges[tot].to = v;\n  edges[tot].next= head[u];\n  head[u] = tot;\n}\n\ndouble f[N];\n\nvoid dfs(int x, int fa, double ans){\n  f[x] = ans + (double)log((double)a[x]);\n  in[x]--;   //\u8fd9\u91cc\u56e0\u4e3a\u8981\u7b97\u4e0a\u7236\u8282\u70b9\uff0c\u6240\u4ee5\u9700\u8981\u51cf\u53bb\n  for(int i = head[x]; i; i = edges[i].next){\n    if(edges[i].to != fa){\n      dfs(edges[i].to, x, ans + (double)log((double)in[x]));\n    }\n  }\n}\n\nvoid Solve(){\n  cin >> n;\n  for(int i = 1; i <= n; i++){\n    cin >> a[i];\n  }\n  for(int i = 1; i < n; i++){\n    int u, v;\n    cin >> u >> v;\n    add(u, v);\n    add(v, u);\n    in[u]++;\n    in[v]++;\n  }\n  in[1]++;  //\u56e0\u4e3a 1 \u6ca1\u6709\u7236\u8282\u70b9\uff0c\u53c8\u56e0\u4e3a 1 \u5728\u540e\u9762\u53c8\u4f1a\u51cf\uff0c\u6240\u4ee5 ++\n  dfs(1, 0, (double)log(1));   //\u6811\u5f62 dp\n  sort(f + 1, f + 1 + n);\n  int ans = 1, pos = 0;\n  for(int i = 2; i <= n; i++){   //\u6c42\u6700\u957f\u7684\u76f8\u540c\u5b50\u4e32\u957f\u5ea6\n    if(f[i] - f[i - 1] < eps){\n      pos++;\n      ans = max(ans, pos);\n    }\n    else{\n      pos = 1;\n    }\n  }\n  cout << n - ans;\n}\n\nsigned main(){\n  Solve();\n  return 0;\n}\n```",
        "postTime": 1661049821,
        "uid": 363006,
        "name": "_Alexande_",
        "ccfLevel": 5,
        "title": "P3237 \u9898\u89e3"
    }
]
[
    {
        "content": "\u82b1\u4e86\u4e24\u5929\u7ec8\u4e8e\u641e\u61c2\u4e86\u8fd9\u9053\u9898 qwq\uff0c\u6765\u4e00\u53d1\u9898\u89e3\n\n> \u7ed9\u5b9a $n$ \u4e2a\u4e92\u4e0d\u76f8\u4ea4\u7684\u591a\u8fb9\u5f62\uff0c\u95ee\u6700\u5927\u6df1\u5ea6\u3002\u6df1\u5ea6\u7684\u5b9a\u4e49\u4e3a\uff1a\u82e5\u591a\u8fb9\u5f62 $i$ \u5305\u542b\u591a\u8fb9\u5f62 $j$ \u5219 $dep_i = \\max\\{dep_j\\} + 1$\u3002\n\n\u626b\u63cf\u7ebf\uff0c\u52a8\u6001\u7ef4\u62a4\u533a\u95f4\u3002\u4ece\u5de6\u5411\u53f3\u679a\u4e3e\u4ea4 $x$ \u8f74\u3001\u5e73\u884c\u4e8e $y$ \u8f74\u7684\u626b\u63cf\u7ebf\uff0c\u7ef4\u62a4\u6bcf\u4e00\u4e2a\u591a\u8fb9\u5f62\u5728\u8fd9\u6761\u626b\u63cf\u7ebf\u4e0a\u5305\u542b\u7684\u6700\u5927 $y$ \u533a\u95f4\u3002\n\n\u5728\u4efb\u610f\u65f6\u95f4\u8fd9\u6bb5\u533a\u95f4\u90fd\u662f\u8fde\u7eed\u7684\uff0c\u6240\u4ee5\u53ea\u9700\u7ef4\u62a4\u4e24\u4e2a\u7aef\u70b9\u5373\u53ef\u3002\n\n\u5c06\u6240\u6709\u70b9\u6309\u7167 $x$ \u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c$y$ \u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u5347\u5e8f\u6392\u5e8f\uff0c\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u6bcf\u4e2a\u70b9\u3002\n\n\u82e5\u5f53\u524d\u679a\u4e3e\u5230 $a$ \u70b9\uff0c\u591a\u8fb9\u5f62 $X$\uff1b\u5728\u8fd9\u4e9b\u533a\u95f4\u7aef\u70b9\u4e2d\u627e\u4e00\u4e2a $b$\uff0c\u6ee1\u8db3 $y_b > y_a$\uff0c$b$ \u6700\u5c0f\u3002\u82e5 $b$ \u6240\u5728\u591a\u8fb9\u5f62\u4e3a $Y$\uff0c\u5219\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n\n- \u82e5 $b$ \u88ab\u5f53\u524d\u533a\u95f4\u5305\u542b\u5219 $dep_X = dep_Y + 1$\u3002\n\n- \u5426\u5219\uff0c$dep_X = dep_Y$\u3002\n\n\u5982\u4f55\u5224\u65ad\u5305\u542b\u5173\u7cfb\uff1f\u4e00\u4e2a\u591a\u8fb9\u5f62\u7684\u8fb9 $(x,\\,y)$\uff0c\u6807\u8bb0\u9006\u65f6\u9488\u7684\u7ec8\u70b9 $y$\u3002\u82e5 $b$ \u6709\u6807\u8bb0\u5219 $b$ \u4e0d\u88ab\u5305\u542b\uff0c\u5426\u5219\u88ab\u5305\u542b\u3002~~\u8bfb\u8005\u81ea\u8bc1\u4e0d\u96be~~ \u5b9e\u9645\u4e0a\u5206\u7c7b\u8ba8\u8bba\u4e00\u4e0b\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u6700\u540e\uff0c\u5982\u4f55\u7ef4\u62a4\u6bcf\u4e2a\u591a\u8fb9\u5f62\u5305\u542b\u7684\u533a\u95f4\uff1f\u7531\u4e8e\u6392\u5e8f\u540e\u7684\u6027\u8d28\uff08$x$ \u7b2c\u4e00\u5173\u952e\u5b57\u5347\u5e8f\uff0c$y$ \u7b2c\u4e8c\u5173\u952e\u5b57\u5347\u5e8f\uff09\uff0c\u591a\u8fb9\u5f62\u6bcf\u6761\u8fb9\u7684\u8d77\u70b9\u5c31\u52a0\u5165\u5230\u533a\u95f4\uff0c\u7ec8\u70b9\u4e0d\u52a0\u5165\u3002\n\n$\\text{Code}$\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define se second\n#define It iterator\n\nusing namespace std;\n\nconst int N = 4e4 + 5;\nconst int K = 2e5 + 5;\n\nstruct O_WYS {\n\tint id, x, y, f;\n\tO_WYS() {}\n\tO_WYS(int i, int _x, int _y, int fl) : id(i), x(_x), y(_y), f(fl) {}\n\tbool operator < (const O_WYS &oth) const {\n\t\treturn x == oth.x ? y < oth.y : x < oth.x;\n\t} \n} sq[K];\n\nint n, cnt, d[N], in[3], vis[N];\nmap<int, int> mp;\n\nint main() {\n\tcin >> n;\n\tfor(int i = 1; i <= n; i++) {\n\t\tint k, tmp;\n\t\tscanf(\"%d%d\", &k, in);\n\t\ttmp = in[0];\n\t\tfor(int j = 1; j < k; j++) {\n\t\t\tscanf(\"%d\", in + (j & 1));\n\t\t\tsq[++cnt] = O_WYS(i, in[0], in[1], (j & 1));\n\t\t}\n\t\tsq[++cnt] = O_WYS(i, tmp, in[1], (k & 1));\n\t}\n\tsort(sq + 1, sq + cnt + 1);\n\tfor(int i = 1; i <= cnt; i++) {\n\t\tint y = sq[i].y, id = sq[i].id;\n\t\tmap<int, int> :: It it = mp.find(y);\n\t\tif(it != mp.end()) mp.erase(it);\n\t\telse {\n\t\t\tmp[y] = i;\n\t\t\tif(!vis[id]) {\n\t\t\t\tit = mp.upper_bound(y);\n\t\t\t\tif(it != mp.end()) {\n\t\t\t\t\tif(sq[it -> se].f) vis[id] = vis[sq[it -> se].id];\n\t\t\t\t\telse vis[id] = vis[sq[it -> se].id] + 1;\n\t\t\t\t}\n\t\t\t\telse vis[id] = 1;\n\t\t\t}\n\t\t}\n\t}\n\tint ans = 0;\n\tfor(int i = 1; i <= n; i++) ans = max(ans, vis[i]);\n\tcout << ans << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1605102899,
        "uid": 242543,
        "name": "BreezeEnder",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4633 [POI2004]WYS"
    },
    {
        "content": "\u849f\u84bb\u4eca\u5929\u624d\u521a\u8865\u5b8c\u8fd9\u9053\u9898\uff0c\u60f3\u987a\u4fbf\u5199\u4e00\u53d1\u9898\u89e3\n\n> \u505a\u6cd5: \u626b\u63cf\u7ebf+\u7ebf\u6bb5\u6811\u7ef4\u62a4\n\n\u8fd9\u9053\u9898,\u5e72\u60f3\u633a\u96be\u60f3\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6362\u4e2a\u601d\u8def\u53bb\u7406\u89e3\u8fd9\u9053\u9898,\u800c\u4e0d\u662f\u6b7b\u677f\u7684\u60f3**\u600e\u4e48\u5305\u56f4**\n\n\u53ef\u4ee5\u5c06**\u6bcf\u6761\u7ad6\u76f4\u7684\u7ebf**\u8fdb\u884c\u7ef4\u62a4\uff0c\u7528\u626b\u63cf\u7ebf\u7684\u505a\u6cd5\u3002\n\n\u63a5\u7740\u5b58\u4e0b\u6bcf\u6761\u7ad6\u76f4\u7684\u7ebf\uff0csort\u6392\u5e8f\u76f8\u5e94\u7684x\u503c\n\n\u6700\u540e\u7528\u7ebf\u6bb5\u6811\u7ef4\u62a4\uff0c\u8fd9\u6761\u8fb9\u662f\u53f3\u8fb9\u7684\u8fb9\u8fd8\u662f\u5de6\u8fb9\u7684\u8fb9\uff0c\u5982\u679c\u662f\u53f3\u8fb9\u7684\u8fb9\u90a3\u63a5\u4e0b\u6765\u7684\u7ebf\u5c42\u6570\u76f8\u5f53\u4e8e\u8fd9\u6761\u7ebf\u5de6\u8fb9\u7684\u5c42\u6570-1,\u5426\u5219\u5c31\u4e3a\u8fd9\u6761\u8fb9\u5de6\u8fb9\u7684\u5c42\u6570+1\n\n\n\n#### Code:\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int M=200000+5;\nstruct node{\n\tint x,y1,y2,flag;\n\tbool operator < (const node &_) const{\n\t\treturn x<_.x;\n\t}\n}A[M];\n\nint B[M],C[M];\n/************Segment_Tree************/\nstruct Seg_Tree{\n\tint l,r,sum,lazy;\n\t#define l(x) tree[x].l\n\t#define r(x) tree[x].r\n\t#define sum(x) tree[x].sum\n\t#define lazy(x) tree[x].lazy\n}tree[M<<2];\n\nvoid Down(int p){\n\tif(!lazy(p)) return;\n\tsum(p<<1)+=lazy(p); lazy(p<<1)+=lazy(p);\n\tsum(p<<1|1)+=lazy(p); lazy(p<<1|1)+=lazy(p);\n\tlazy(p)=0;\n\treturn;\n}\n\nvoid Up(int p){\n\tsum(p)=min(sum(p<<1),sum(p<<1|1));\n}\n\nvoid build(int p, int l, int r){\n\tl(p)=l, r(p)=r, sum(p)=lazy(p)=0;\n\tif(l==r) return;\n\tint mid=l+r>>1;\n\tbuild(p<<1,l,mid); build(p<<1|1,mid+1,r);\n\treturn;\n}\n\nvoid Upd(int p, int l, int r, int x){\n\tif(l(p)==l && r(p)==r){\n\t\tsum(p)+=x; lazy(p)+=x;\n\t\treturn;\n\t}\n\tDown(p);\n\tint mid=l(p)+r(p)>>1;\n\tif(r<=mid) Upd(p<<1,l,r,x);\n\telse if(l>mid) Upd(p<<1|1,l,r,x);\n\telse Upd(p<<1,l,mid,x), Upd(p<<1|1,mid+1,r,x);\n\tUp(p);\n}\n\nint Que(int p, int l, int r){\n\tif(l(p)==l && r(p)==r){\n\t\treturn sum(p);\n\t}\n\tDown(p);\n\tint mid=l(p)+r(p)>>1;\n\tif(r<=mid) return Que(p<<1,l,r);\n\telse if(l>mid) return Que(p<<1|1,l,r);\n\telse return min(Que(p<<1,l,mid),Que(p<<1|1,mid+1,r));\n}\n/************Main************/\nint main(){\n\tint n,cnt=0,tot=0;\n\tscanf(\"%d\",&n);\n\tfor(int i=1,x; i<=n; i++){\n\t\tscanf(\"%d\",&x);\n\t\tfor(int j=1; j<=x; j++) scanf(\"%d\",&C[j]);\n     \t//\u5b58\u5165\u6bcf\u6761\u7ad6\u76f4\u7684\u7ebf\n\t\tfor(int j=3; j<x; j+=2) A[++tot]=(node)<%C[j],C[j-1],C[j+1],C[j-1]<C[j+1]?-1:1%>,B[++cnt]=C[j-1],B[++cnt]=C[j+1];\n\t\tA[++tot]=(node)<%C[1],C[2],C[x],C[2]<C[x]?1:-1%>,B[++cnt]=C[2],B[++cnt]=C[x];\n\t}\n\tsort(B+1,B+cnt+1); cnt=unique(B+1,B+cnt+1)-B-1;\n\tsort(A+1,A+tot+1); build(1,1,tot);\n\tint ans=0;\n\tfor(int i=1; i<=tot; i++){\n\t\tint a=lower_bound(B+1,B+cnt+1,A[i].y1)-B,b=lower_bound(B+1,B+cnt+1,A[i].y2)-B;//\u5bf9\u6bcf\u6761\u7ebf\u7684y\u503c\u8fdb\u884c\u79bb\u6563\u5316,\u65b9\u4fbf\u653e\u5165\u6811\u4e2d\n\t\tint l=min(a,b),r=max(a,b);\n\t\tUpd(1,l,r,A[i].flag);\n\t\tans=max(ans,Que(1,l,r));\n\t}\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n\u849f\u84bb\u4e5f\u662f\u7b2c\u4e00\u6b21\u5199\u535a\u5ba2\uff0c\u6b22\u8fce\u5927\u4f6c\u4eec\u6765\u55b7",
        "postTime": 1562413324,
        "uid": 81715,
        "name": "ppp204",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4633 \u3010[POI2004]WYS\u3011"
    }
]
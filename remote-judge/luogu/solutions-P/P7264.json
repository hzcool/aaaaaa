[
    {
        "content": "\n[\u6b22\u8fce\u5230\u6211\u7684\u535a\u5ba2\u67e5\u770b](https://mivik.gitee.io/2021/solution/mivik-round-nurture-mirror/)\n\n## Subtask 1\n\n\u7531\u4e8e\u53ef\u4ee5\u76f4\u8d70\uff0c\u4e24\u4e2a\u70b9\u4e4b\u95f4\u8981\u8d70\u591a\u5c11\u683c\u5c31\u662f\u5b83\u4eec\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u4e86\uff0c\u7136\u540e\u4e2d\u95f4\u9700\u8981\u62c6\u9664\u7684\u969c\u788d\u7269\u76f4\u63a5\u5224\u4e00\u4e0b\u5c31\u597d\u4e86\u3002\n\n## Subtask 2\n\n\u5982\u679c\u4f60\u5584\u4e8e\u89c2\u5bdf\uff0c\u90a3\u4e48\u4f60\u4f1a\u53d1\u73b0\u5f53\u8d77\u70b9\u4f4d\u4e8e $(0,0)$ \u65f6\uff0c\u4e24\u4e2a\u70b9\u4e4b\u95f4\u8981\u8d70\u591a\u5c11\u683c\u4f9d\u65e7\u7b49\u4e8e\u4ed6\u4eec\u7684\u66fc\u54c8\u987f\u8ddd\u79bb\u3002\u4e3a\u4ec0\u4e48\u5462\uff1f\n\n\u6211\u4eec\u6ce8\u610f\u5230\u65f6\u523b\u90fd\u5fc5\u987b\u6709 $x\\&y=0$\uff0c\u521d\u59cb\u65f6\u662f\u6ee1\u8db3\u6761\u4ef6\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u8003\u8651\u6bcf\u6b21\u53d6\u51fa $(x|y)$ \u7684 lowbit\uff0c\u7136\u540e\u628a\u8fd9\u4e00\u4f4d\u8d70\u6389\uff0c\u4e00\u76f4\u8fd9\u6837\u76f4\u5230\u8d70\u5230 $(0,0)$\uff0c\u6211\u4eec\u7684\u603b\u8def\u5f84\u662f $(x+y)$\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5047\u8bbe $(x,y)=(4,3)$\uff0c\u90a3\u4e48\u6211\u4eec\u5148\u5199\u51fa\u4e8c\u8fdb\u5236\uff1a\n\n> x: 100\n>\n> y: 011\n\n\u7136\u540e lowbit \u662f $y$ \u7684 1\uff0c\u6240\u4ee5\u6211\u4eec\u4ece $(4,3)$ \u8d70\u5230 $(4,2)$\uff0c\u53d8\u6210\u4e86\uff1a\n\n> x: 100\n>\n> y: 010\n\nlowbit \u662f $y$ \u7684 2\uff0c\u6240\u4ee5\u6211\u4eec\u4ece $(4,2)$ \u8d70\u5230 $(4,0)$\uff0c\u53d8\u6210\u4e86\uff1a\n\n> x: 100\n>\n> y: 000\n\n\u7136\u540e\u76f4\u63a5\u8d70\u5230 $(0,0)$ \u5c31\u53ef\u4ee5\u4e86\u3002\u5bb9\u6613\u53d1\u73b0\u6700\u77ed\u7684\u8def\u5f84\u662f\u552f\u4e00\u7684\uff0c\u56e0\u4e3a\u5982\u679c\u4f60\u51cf\u5c11\u7684\u90a3\u4e00\u7ef4\u4e0d\u662f lowbit \u6240\u5728\u7684\u90a3\u4e00\u7ef4\u7684\u8bdd\uff0c\u90a3\u4e48\u5fc5\u5b9a\u4f1a\u4ea7\u751f\u4e00\u5806 1\uff0c\u7136\u540e\u8fd9\u5806 1 \u5c31\u4f1a\u548c lowbit \u6240\u5728\u7684\u90a3\u4e00\u7ef4\u4f4d\u4e0e\u4e0d\u4e3a 0 \u4e86\uff0c\u4e0d\u5408\u6cd5\u3002\n\n\u7efc\u4e0a\uff0c\u6211\u4eec\u6a21\u62df\u4e00\u4e0b\u4e0a\u9762\u90a3\u4e2a\u8fc7\u7a0b\u5c31\u597d\u4e86\u3002\n\n[mivik.h](https://mivik.gitee.io/mivik.h)\n\n```cpp\n// Mivik 2021.1.6\n#include <mivik.h>\n\n#include <algorithm>\n#include <list>\n\nusing std::list;\n\nMI cin;\n\ntypedef long long qe;\n\nconst int N = 200005;\n\nstruct point { qe x, y; };\ntemplate<> struct Q<point> { inline void operator()(MI &r, point &t) {\n\tr > t.x > t.y;\n} };\nint N;\npoint st, en, bar[N];\nbool vis[N];\nlist<int> rem; // \u8fd8\u6ca1\u88ab\u5904\u7406\u7684\u969c\u788d\u7269\nint main() {\n\tcin > n;\n\tfor (int i = 1; i <= n; ++i) {\n\t\tcin > bar[i];\n\t\trem.push_back(i);\n\t}\n\tcin > st > en;\n\tif (st.x || st.y) {\n\t\tcout < \"Orz\\n\";\n\t\treturn 0;\n\t}\n\tauto &[x, y] = en;\n\tcout < (x + y) < endl;\n\tfor (int i = 0; i < 60; ++i) { // \u626b\u63cf lowbit\n\t\tif ((x >> i) & 1) {\n\t\t\tconst qe to = x & (x - 1);\n\t\t\tfor (auto it = rem.begin(); it != rem.end(); ) {\n\t\t\t\tauto &p = bar[*it];\n\t\t\t\tif (p.y == y && to <= p.x && p.x <= x) {\n\t\t\t\t\tvis[*it] = 1;\n\t\t\t\t\tit = rem.erase(it);\n\t\t\t\t} else ++it;\n\t\t\t}\n\t\t\tx = to;\n\t\t} else if ((y >> i) & 1) {\n\t\t\tconst qe to = y & (y - 1);\n\t\t\tfor (auto it = rem.begin(); it != rem.end(); ) {\n\t\t\t\tauto &p = bar[*it];\n\t\t\t\tif (p.x == x && to <= p.y && p.y <= y) {\n\t\t\t\t\tvis[*it] = 1;\n\t\t\t\t\tit = rem.erase(it);\n\t\t\t\t} else ++it;\n\t\t\t}\n\t\t\ty = to;\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; ++i) cout < vis[i];\n\tcout < endl;\n}\n```\n\n## \u6ee1\u5206\u505a\u6cd5\n\n\u5b9e\u9645\u4e0a\u6211\u4eec\u53ef\u4ee5\u9012\u5f52\u3002\u6bcf\u6b21\u628a\u4e00\u4e2a\u5bbd\u548c\u9ad8\u90fd\u4e3a $2^n$ \u7684\u8ff7\u5bab\uff08\u4ee5 $(0,0)$ \u4e3a\u5de6\u4e0a\u89d2\uff09\u5e73\u5747\u5206\u6210\u56db\u4e2a\u90e8\u5206\uff0c\u5373\u5de6\u4e0a\u5de6\u4e0b\u53f3\u4e0a\u548c\u53f3\u4e0b\uff0c\u4f46\u53f3\u4e0b\u662f\u4e0d\u80fd\u8d70\u7684\u6240\u4ee5\u6211\u4eec\u5ffd\u7565\u3002\u5982\u679c\u5f53\u524d\u4f4d\u7f6e\u548c\u7ec8\u70b9\u5728\u4e00\u4e2a\u5757\u5c31\u7ee7\u7eed\u5411\u4e0b\u9012\u5f52\uff0c\u5426\u5219\u6211\u4eec\u4f7f\u4e24\u4e2a\u70b9\u90fd\u7edf\u4e00\u201c\u8d70\u201d\u5230\u5de6\u4e0a\u89d2\u90a3\u4e00\u5757\u7136\u540e\u518d\u9012\u5f52\u5230\u5de6\u4e0a\u89d2\u3002\u5bb9\u6613\u53d1\u73b0\u8fd9\u6837\u5bf9\u7b54\u6848\u662f\u6ca1\u6709\u5f71\u54cd\u7684\u3002\n\n\u6839\u636e\u6211\u4eec\u5728 Subtask 2 \u4e2d\u5f97\u5230\u7684\u7ed3\u8bba\uff0c\u5728\u4e00\u4e2a\u5757\u5185\u7684\u70b9\u662f\u53ef\u4ee5\u7528 $abs(x-\\text{\u5de6\u4e0a\u89d2x})+abs(y-\\text{\u5de6\u4e0a\u89d2y})$ \u7684\u6b65\u6570\u8d70\u5230\u5de6\u4e0a\u89d2\u7684\uff0c\u56e0\u6b64\u8ba1\u7b97\u8ddd\u79bb\u5c31\u5bb9\u6613\u4e86\u3002\u4f46\u662f\u969c\u788d\u7269\u7684\u5224\u65ad\u5462\uff1f\n\n\u5b9e\u9645\u4e0a\u6211\u4eec\u53ea\u9700\u8981\u5224\u65ad\u4e00\u4e0b $dist(st,p)+dist(p,en)$ \u662f\u5426\u7b49\u4e8e $dist(st,en)$ \u5c31\u597d\u4e86\uff0c\u56e0\u4e3a\u6839\u636e\u4e0a\u9762\u7684\u8bf4\u660e\u6211\u4eec\u77e5\u9053\u4e24\u70b9\u95f4\u7684\u6700\u77ed\u8def\u5f84\u53ea\u6709\u4e00\u6761\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O\\left(\\log^2(10^{18})n\\right)$\u3002\u4f46\u6211\u7684\u5b9e\u73b0 \u7a0d \u5fae \u7814\u7a76\u4e86\u4e00\u4e0b\u4e8c\u8fdb\u5236\u672c\u8d28\u7136\u540e\u5199\u4e86\u4e00\u4e2a $O(1)$ \u5224\u4e0a\u9762\u90a3\u4e2a\u4e1c\u897f\u7684\u51fd\u6570\uff0c\u6240\u4ee5\u5c31\u5c11\u4e86\u4e2a\u5e73\u65b9\u4e86\u3002\n\n[mivik.h](https://mivik.gitee.io/mivik.h)\n\n[\u4ee3\u7801](https://paste.ubuntu.com/p/m3mpBFhC67/)\n",
        "postTime": 1609594801,
        "uid": 45182,
        "name": "Mivik",
        "ccfLevel": 9,
        "title": "[Mivik Round 2021] [\u9898\u89e3] Mirror"
    },
    {
        "content": "\u8d5b\u65f6\u4ee3\u7801\u8fc7\u4e86\uff0c\u4f46\u662f\u88ab\u81ea\u5df1hack\u4e86/jk\n\n\u8fd9\u4e2a\u9898\u6709\u4e09\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u6027\u8d28\uff1a\n\n1.\u8def\u7ebf\u662f\u53ef\u9006\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u4ece\u8d77\u70b9\u8d70\u5230\u7ec8\u70b9\u548c\u4ece\u7ec8\u70b9\u8d70\u5230\u8d77\u70b9\u662f\u4e00\u6837\u7684\u3002\n\n2.\u5176\u6b21\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u6574\u4e2a\u5730\u56fe\u662f\u4e2a\u6811\u5f62\u7ed3\u6784\uff0c\u6240\u4ee5\u4e24\u70b9\u4e4b\u95f4\u7684\u6700\u77ed\u8def\u7ebf\u662f\u552f\u4e00\u7684\u3002\n\n3.\u7136\u540e\u6211\u4eec\u8fd8\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u5730\u56fe\u6709\u5206\u5f62\u7684\u6027\u8d28\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/gwp336ti.png)\n\n\uff08\u2460\uff0c\u2461\uff0c\u2462\u662f\u5b8c\u5168\u76f8\u540c\u7684\uff09\n\n\u6240\u4ee5\u8fd9\u5c31\u542f\u53d1\u6211\u4eec\u5206\u6cbb\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\n\n4.\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u4ece\u4e00\u4e2a\u70b9 $ (x,y) $ \u51fa\u53d1\uff0c\u8981\u4e48\u662f $ ( x - \\operatorname{ lowbit}(x),y) $ \u5230 $ (x,y) $ \u4e0a\u90fd\u53ef\u4ee5\u8d70\uff08\u6b64\u65f6 $ \\operatorname{ lowbit}(x) < \\operatorname{ lowbit}(y) $ \uff09 \u6216\u8005\u662f $ ( x,y - \\operatorname{ lowbit}(y)) $ \u5230 $ (x,y) $ \u4e0a\u90fd\u53ef\u4ee5\u8d70\uff08\u6b64\u65f6 $ \\operatorname{ lowbit}(y) < \\operatorname{ lowbit}(x) $ \uff09\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5148\u627e\u5230\u5305\u542b\u8d77\u70b9\u548c\u7ec8\u70b9\u7684\u6700\u5c0f\u7684\u8fb9\u957f\u4e3a $ 2^k $ \u7684\u6b63\u65b9\u5f62\uff08\u800c\u4e14\u5b83\u7684\u5de6\u4e0a\u89d2\u7684\u4e24\u4e2a\u5750\u6807\u7684lowbit\u5927\u4e8e $ 2^k $ \u6216\u4e3a $ 0 $ \uff09\uff0c\u7136\u540e\u8ba9\u4e24\u4e2a\u70b9\u4e0d\u505c\u5730\u8d70\u5230 \u67d0\u4e2a\u5750\u6807\u51cf\u53bblowbit \u7684\u4f4d\u7f6e\uff0c\u76f4\u5230\u8d70\u5230\u6b63\u65b9\u5f62\u7684\u5de6\u4e0a\u89d2\uff0c\u7136\u540e\u53bb\u6389\u8d70\u91cd\u7684\u90e8\u5206\uff0c\u8d70\u7684\u8fc7\u7a0b\u4e2d\u5224\u4e00\u4e0b\u6bcf\u4e2a\u969c\u788d\u7269\u8d70\u6ca1\u8d70\u8fc7\u5c31\u884c\u4e86\n\n\u4e8e\u662f\u6211\u5c31\u628a\u8d77\u70b9\u548c\u7ec8\u70b9\u7684x\u503c\u51cf\u53bb\u76f8\u540c\u7684highbit\uff0cy\u503c\u540c\u7406\uff0c\u7136\u540e\u8fc7\u4e86\u8fd9\u4e2a\u9898\n\n\u8d5b\u540e\u4e00\u60f3\u53d1\u89c9\u4e0d\u5bf9\u52b2\uff0chack:\n\n\t0\n    4 3\n    4 11\n    \n\t\u6b63\u89e3\uff1a22\n\t\u8f93\u51fa\uff1a8\n\n\u6211\u7684\u7a0b\u5e8f\u4f1a\u628a\u8d77\u70b9\u548c\u7ec8\u70b9\u7b97\u4e3a $ (0,3) $ \u548c $ (0,11) $ (\u6a2a\u5750\u6807\u51cf\u53bb\u4e86\u76f8\u540c\u76844)\n\n\u4e8e\u662f\u6211\u53c8\u6539\u6210\u53bb\u6389\u56db\u4e2a\u5750\u6807\u503c\u5171\u540c\u7684highbit\uff0c\u8fc7\u4e86\u81ea\u5df1\u7684hack\uff0c\u7136\u540e\u4e00\u4ea4\uff1a[WA on test 1](https://www.luogu.com.cn/record/44949008)\n\n\u539f\u6765\u662f\u76f4\u63a5\u5230\u8fbe\u65f6\uff0c\u4e24\u4e2a\u70b9\u4ecd\u7136\u90fd\u8dd1\u5230\u4e86\u6b63\u65b9\u5f62\u7684\u5de6\u4e0a\u89d2\uff0c\u7279\u5224\u4e00\u4e0b\u76f4\u63a5\u5230\u8fbe\u7684\u60c5\u51b5\u5c31\u8fc7\u4e86\n\n\u4e3a\u4ec0\u4e48\u76f4\u63a5\u7279\u5224\u5c31\u53ef\u4ee5\u5462\uff0c\u611f\u6027\u7406\u89e3\u4e00\u4e0b\u5c31\u662f\u8bf4\uff1a\n\n\u5982\u679c\u9700\u8981\u62d0\u7684\u8bdd\uff0c\u82e5\u4e24\u4e2a\u70b9\u5728\u6b63\u65b9\u5f62\u5bf9\u89d2\u7ebf\u4e24\u7aef\uff0c\u8fd9\u4e2a\u6b63\u65b9\u5f62\u7684\u5de6\u4e0a\u89d2\u4e00\u5b9a\u4e3a\u4e00\u4e2a\u62d0\u70b9\u3002\n\n\u82e5\u5728\u6b63\u65b9\u5f62\u5bf9\u89d2\u7ebf\u540c\u4e00\u4fa7\uff0c\u5219\u662f\u5b83\u4eec\u4e00\u5b9a\u4f1a\u5728\u8fd9\u4e00\u4fa7\u7684\u6700\u5de6\u8fb9\uff08\u4e24\u70b9\u90fd\u5728\u5de6\u4e0b\u65b9\uff09\u6216\u6700\u4e0a\u8fb9\uff08\u4e24\u70b9\u90fd\u5728\u53f3\u4e0a\u65b9\uff09\u76f8\u9047\n\n\u6240\u4ee5\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\uff0c\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\nusing namespace std;\ntypedef long long ll;\nint n;\nll ans;\nbool r[200001];\ninline ll lowbit(const ll &x){return x&(-x);}\nstruct node{\n\tll x,y;\n\tinline node move(){//\u8fd9\u4e2a\u76f4\u7ebf\u7684\u6700\u8fb9\u4e0a\n\t\tll xt=lowbit(x),yt=lowbit(y);\n\t\tnode ans=(node){x,y};\n\t\tif(xt>yt)\n\t\t\twhile(ans.y&&lowbit(ans.y)<xt)ans.y-=lowbit(ans.y);\n\t\telse\n\t\t\twhile(ans.x&&lowbit(ans.x)<yt)ans.x-=lowbit(ans.x);\n\t\treturn (!x||!y)?(node){0,0}:ans;\n\t}\n}b,e,z[200001];\ninline ll mmin(const ll &x,const ll &y){\n\treturn x<y?x:y;\n}\ninline bool on(const node &f,const node &t,const node &c){\n\tconst ll lx=mmin(f.x,t.x),rx=f.x^t.x^lx,ly=mmin(f.y,t.y),ry=f.y^t.y^ly;\n\treturn c.x>=lx&&c.x<=rx&&c.y>=ly&&c.y<=ry;\n   \t//\u5224\u65ad\u4e00\u4e2a\u70b9c\u5728\u4e0d\u5728f\u5230t\u7684\u8def\u5f84\u4e0a\n}\ninline ll bs(const ll &x){return x<0?-x:x;}\ninline ll dis(const node &x,const node &y){return bs(x.x-y.x)+bs(x.y-y.y);}\nint main(){\n\tios::sync_with_stdio(false);\n\tcin>>n;\n\tfor(int i=1;i<=n;++i)\n\t\tcin>>z[i].x>>z[i].y;\n\tcin>>b.x>>b.y>>e.x>>e.y;\n\tfor(ll i=1ll<<60;i;i>>=1)\n\t\tif((b.x&i)!=(e.x&i)||(b.y&i)!=(e.y&i)||(b.x&i)!=(e.y&i))break;\n\t\telse if(b.x&i){\n\t\t\tb.x^=i,e.x^=i,b.y^=i,e.y^=i;\n\t\t\tfor(int j=1;j<=n;++j)\n\t\t\t\tif(z[j].x<i||z[j].y<i)z[j]=(node){-1,-1};//\u4e0d\u53ef\u80fd\u5230\u8fd9\u91cc\n\t\t\t\telse z[j].x^=i,z[j].y^=i;//\u4e0d\u8981\u5fd8\u4e86\u628a\u969c\u788d\u4e5f\u53bb\u6389hignbit\n\t\t}\n\tif(on(e,e.move(),b)||on(b,b.move(),e)){//\u7279\u5224\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tr[i]|=on(b,e,z[i]);\n\t\tcout<<dis(b,e)<<endl;\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tcout<<r[i];\n\t\treturn 0;\n\t}\n\tans=b.x+b.y+e.x+e.y;//\u4e24\u4e2a\u70b9\u90fd\u8d70\u5230\u5de6\u4e0a\u89d2\u7684\u8ddd\u79bb\n\twhile(b.x&&b.y){//\u8d77\u70b9\u8d70\u5230\u8fb9\u4e0a\n\t\tconst node c=b.move();\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tr[i]|=on(b,c,z[i]);\n\t\tb=c;\n\t}\n\twhile(e.x&&e.y){//\u7ec8\u70b9\u8d70\u5230\u8fb9\u4e0a\n\t\tconst node c=e.move();\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tr[i]|=on(e,c,z[i]);\n\t\te=c;\n\t}\n\tif((b.y&&e.y)||(b.x&&e.x))//\u5728\u540c\u4e00\u8fb9\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tr[i]|=on(b,e,z[i]);\n\telse//\u4e0d\u5728\u540c\u4e00\u8fb9\n\t\tfor(int i=1;i<=n;++i)\n\t\t\tr[i]|=(on(b,(node){0,0},z[i])||on(e,(node){0,0},z[i]));\n\tans-=mmin(b.x,e.x)+mmin(b.y,e.y)<<1;//\u53bb\u6389\u91cd\u590d\u7684\u90e8\u5206\n\tcout<<ans<<endl;\n\tfor(int i=1;i<=n;++i)\n\t\tcout<<r[i];\n\treturn 0;\n}\n```\n",
        "postTime": 1610620082,
        "uid": 179182,
        "name": "CCCCOrz",
        "ccfLevel": 7,
        "title": "P7264\u9898\u89e3"
    },
    {
        "content": "\u60f3\u6765\u60f3\u53bb\u8fd8\u662f\u6765\u5199\u4e00\u53d1\u9898\u89e3\u5427\uff08\n\n# \u9898\u610f\n\n\u7ed9\u4f60\u4e00\u4e2a[\u5982\u56fe\u6240\u793a](https://www.luogu.com.cn/problem/P7264)\u7684\u5206\u5f62\u8ff7\u5bab\uff0c\u8ba9\u4f60\u6c42\u4e24\u70b9\u95f4\u6700\u77ed\u8ddd\u79bb\u4ee5\u53ca\u8def\u5f84\u4e0a\u7684\u70b8\u5f39\u6570\u91cf\n\n# \u9898\u89e3\n\n\u8d5b\u65f6\u5148\u7785\u4e86\u4e00\u773cT3\u53d1\u73b0\u5341\u5206\u6076\u5fc3\uff0c\u5c31\u56de\u53bb\u597d\u597d\u6574T1T2\u4e86\uff0c\u73b0\u5728\u60f3\u60f3\u6211\u5e72\u561b\u6765\u770bT3\u5462\uff08\n\n![](https://s3.ax1x.com/2021/01/11/s3INGD.png)\n\n\u5947\u5947\u602a\u602a\u7684\u5206\u5f62\uff0c\u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u7684\u770b\u89c1\u5c06\u6bcf\u4e2a\u5927\u6b63\u65b9\u5f62\u5206\u6210\u56db\u4efd\uff0c\u5de6\u4e0a\u53f3\u4e0a\u5de6\u4e0b\u7684\u90e8\u5206\u662f**\u5b8c\u5168\u76f8\u540c**\u7684\uff0c\u800c\u53f3\u4e0b\u90e8\u5206\u662f\u5168\u9ed1\u6240\u4ee5\u4e0d\u9700\u8981\u8003\u8651\u3002\u6240\u4ee5\u5f88\u5bb9\u6613\u60f3\u5230\u9012\u5f52\u3002\n\n\u7ee7\u7eed\u89c2\u5bdf\uff0c\u9009\u51e0\u4e2a\u70b9\u624b\u753b\u4e00\u4e0b\uff0c\u53d1\u73b0**\u4e24\u70b9\u4e4b\u95f4\u6700\u77ed\u8def\u552f\u4e00**\uff08\u8fd9\u4e2a\u4e0d\u77e5\u9053\u548b\u8bc1\u660e\uff0c\u5927\u5bb6\u611f\u6027\u7406\u89e3\uff08\uff1f\uff09\n\n\u6ce8\u610f\u662f\u6700\u77ed\u8def\uff0c\u4e0d\u662f\u6240\u6709\u53ef\u80fd\u8def\u5f84\u3002\n\n\u800c\u5bf9\u4e8e\u6bcf\u4e2a\u6b63\u65b9\u5f62\u4e2d\u6bcf\u4e2a\u70b9\uff0c\u663e\u7136\u5b58\u5728\u4e00\u6761\u901a\u5411\u6b63\u65b9\u5f62\u5de6\u4e0a\u89d2\u7684\u8def\uff0c\u8fd9\u6837\u9012\u5f52\u518d\u56de\u6eaf\u4e0a\u6765\uff0c\u4e00\u5b9a\u4f1a\u5728\u6700\u5927\u7684\u6b63\u65b9\u5f62\u7684\u5de6\u4e0a\u89d2\u76f8\u9047\u3002\u8fd9\u4e2a\u5c31\u662f\u4e00\u6761**\u53ef\u884c\u8def\u5f84**\n\n\u4f46\u662f\u8bf7\u770b\u4e0b\u56fe\uff1a\n\n![](https://s3.ax1x.com/2021/01/11/s3qSP0.png)\n\n\u4ece\u9ec4\u8272\u5757\u51fa\u53d1\u5230\u6a59\u8272\u5757\uff0c\u6700\u77ed\u8def\u5f84\u663e\u7136\u662f\u7eff\u8272\u90e8\u5206\uff0c\u7136\u800c\u5728\u4e0a\u9762\u7684\u65b9\u6cd5\u91cc\u6211\u4eec\u591a\u7b97\u4e86\u7ea2\u8272\u7684\u90e8\u5206\u4e24\u6b21\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u5e76\u4e0d\u662f\u6700\u4f18\u3002\n\n\u5982\u4f55\u89e3\u51b3\uff1f\u8003\u8651\u8fd9\u4e2a\u6700\u77ed\u8def\u7684\u6027\u8d28\uff1a\u5fc5\u5b9a\u662f\n\n\u67d0\u4e24\u4e2a\u6b63\u65b9\u5f62\u5de6\u4e0a\u89d2\u7684\u8fde\u7ebf\u957f\u5ea6+\u4e24\u4e2a\u70b9\u5206\u522b\u5230\u81ea\u5df1\u5bf9\u5e94\u7684\u6b63\u65b9\u5f62\u7684\u5de6\u4e0a\u89d2\u70b9\u7684\u8ddd\u79bb\n\n\u611f\u6027\u7406\u89e3\uff1a\u4e0b\u56fe\u4e2d\u7d2b\u8272\u7ebf\u6bb5+\u4e24\u6761\u84dd\u8272\u7ebf\u6bb5\n\n![](https://s3.ax1x.com/2021/01/11/s3L49P.png)\n\n\u6211\u4eec\u53ef\u4ee5\u6bcf\u6b21\u9012\u5f52\u65f6\u628a\u5f53\u524d\u6b63\u65b9\u5f62\u5de6\u4e0a\u89d2\u4f5c\u4e3a\u201c\u62d0\u70b9\u201d\u8bb0\u5f55\u4e0b\u6765\uff0c\u540c\u65f6\u8bb0\u5f55\u5f53\u524d\u5230\u70b9\u7684\u8ddd\u79bb\u662f\u591a\u5c11\uff0c\u5728\u4e24\u8fb9\u90fd\u9012\u5f52\u5b8c\u4e4b\u540e\u7528\u7c7b\u4f3cFloyd\u4e00\u6837\u7684\u65b9\u6cd5\u679a\u4e3e\u70b9\u5bf9\u6c42\u6700\u77ed\u8def\u3002\n\n\u770b\u8d77\u6765\u5341\u5206\u66b4\u529b\uff0c\u4f46\u662f\u5206\u6790\u4e00\u4e0b\u590d\u6742\u5ea6\uff1a\n\n$10^{18}$\u5927\u6982\u662f$2^{60}$\uff0c\u6211\u4eec\u6bcf\u6b21\u9012\u5f52\u4e00\u5c42\u76f8\u5f53\u4e8e\u628a\u5b83\u9664\u4ee5\u4e8c\u3002\u6240\u4ee560\u5c42\u5c31\u4f1a\u9012\u5f52\u5b8c\u6bd5\uff0c\u4e5f\u5c31\u662f\u8bf4\u5bf9\u4e8e\u8d77\u70b9\u548c\u7ec8\u70b9\uff0c\u6bcf\u4e2a\u70b9\u7684\u201c\u62d0\u70b9\u201d\u6700\u591a$60$\u4e2a\uff0c\u5e73\u65b9\u7ea7\u679a\u4e3e\u5b8c\u5168\u6ca1\u95ee\u9898\u3002\n\n\u8fd9\u6837\uff0c\u7b2c\u4e00\u95ee\u7684\u8ddd\u79bb\u5c31\u89e3\u51b3\u4e86\uff01\n\n\u5269\u4e0b\u7684\u5c31\u5341\u5206\u597d\u505a\u4e86\uff1a\n\n\u7ee7\u7eed\u66b4\u529b\u679a\u4e3e\u6bcf\u4e2a\u70b8\u5f39\u4f4d\u7f6e\uff0c\u679a\u4e3e\u8def\u5f84\u4e0a\u7684\u70b9\u5bf9\uff0c\u770b\u662f\u5426\u5728\u4e24\u8005\u4e4b\u95f4\u5c31\u6ca1\u95ee\u9898\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6~~O(\u53ef\u8fc7)~~$O(Nlog^210^{18})$\n\n# \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\nusing namespace std;\nint zx[1000001], zy[1000001], id[1000001];\nint ans = 0, cnt;\nstruct hehe{\n    int x, y;\n}p[3][1000001], guai[1000001], l[1000001];\nbool ddd[1000001];\nmap<pair<int,int>, int>mp[3];\nint tot[3];\nbool in(int a,int b,int c,int d,int x,int y)\n{\n\tif(a<=x&&x<=c&&b<=y&&y<=d)\n\t\treturn 1;\n\treturn 0;\n}\nint f(int a,int b,int c,int d,int x,int y,int opt)\n{\n\tint l=c-a+1,mid;\n\tmid=l>>1;\n\tp[opt][++tot[opt]]=hehe{a,b};\n\n\tif(in(a,b,a+mid-1,b+mid-1,x,y))\n\t{\n\n\t\tif(mid==1)\n\t\t{\n\t\t\tp[opt][++tot[opt]]=hehe{x,y};\n\t\t\treturn mp[opt][make_pair(a,b)]=0;\n\t\t}\n\t\treturn mp[opt][make_pair(a,b)]=f(a,b,a+mid-1,b+mid-1,x,y,opt);\n\t}\n\telse if(in(a+mid,b,c,b+mid-1,x,y))\n\t{\n\t\tif(mid==1)\n\t\t{\n\t\t\tp[opt][++tot[opt]]=hehe{x,y};\n\t\t\treturn mp[opt][make_pair(a,b)]=1;\n\t\t}\n\t\treturn mp[opt][make_pair(a,b)]=f(a+mid,b,c,b+mid-1,x,y,opt)+mid;\n\t}\n\telse if(in(a,b+mid,a+mid-1,d,x,y))\n\t{\n\t\tif(mid==1)\n\t\t{\n\t\t\tp[opt][++tot[opt]]=hehe{x,y};\n\t\t\treturn mp[opt][make_pair(a,b)]=1;\n\t\t}\n\t\treturn mp[opt][make_pair(a,b)]=f(a,b+mid,a+mid-1,d,x,y,opt)+mid;\n\t}\n    return 0;\n}\n/*int fz(int x1, int y1, int x2, int y2, int x, int y, int op)//\u5199\u5931\u8d25\u7684\u9012\u5f52\n{\n    p[op][++tot[op]] = hehe{x1, y1};\n    int xx = (x1 + x2) >> 1;\n    int yy = (y1 + y2) >> 1;\n    if(x <= xx && y <= yy)\n    {\n        if(x2 - x1 == 0)\n        {\n            p[op][++tot[op]] = hehe{x, y};\n            return mp[op][make_pair(x1, y1)] = 0;\n        }\n        return mp[op][make_pair(x1, y1)] = fz(x1, y1, xx, yy, x, y, op);\n    }\n    else if(x <= xx && y > yy)\n    {\n        if(x2 - x1 == 0)\n        {\n            p[op][++tot[op]] = hehe{x, y};\n            return mp[op][make_pair(x1, y1)] = 1;\n        }\n        return mp[op][make_pair(x1, y1)] = fz(x1, yy, xx, y2, x, y, op) + (x2 - x1 + 1) / 2;\n    }\n    else\n    {\n        if(x2 - x1 == 0)\n        {\n            p[op][++tot[op]] = hehe{x, y};\n            return mp[op][make_pair(x1, y1)] = 1;\n        }\n        return mp[op][make_pair(x1, y1)] = fz(xx, y1, x2, yy, x, y, op) + (x2 - x1 + 1) / 2;\n    }\n}*/\nsigned main()\n{\n    int x1, x2, y1, y2;\n    int n;\n    cin >> n;\n    for(int i = 1; i <= n; i++)\n    {\n        cin >> l[i].x >> l[i].y;\n    }\n    cin >> x1 >> y1 >> x2 >> y2;\n    int ysx = 0, ysy = 0, zxx = 1ll << 60, zxy = 1ll << 60;\n    f(ysx, ysy, zxx, zxy, x1, y1, 1);\n    f(ysx, ysy, zxx, zxy, x2, y2, 2);\n    int ans = 0x7f7f7f7f7f7f7f7f;\n    int num1 = 0, num2 = 1;\n    for(int i = 1; i <= tot[1]; i++)\n    {\n        for(int j = 1; j <= tot[2]; j++)\n        {\n            if(p[1][i].x == p[2][j].x || p[1][i].y == p[2][j].y)\n            {\n                int ll = abs(p[1][i].x - p[2][j].x + p[1][i].y - p[2][j].y);\n                auto qwq = make_pair(p[1][i].x, p[1][i].y), qaq = make_pair(p[2][j].x, p[2][j].y);\n                if(ans > mp[1][qwq] + mp[2][qaq] + ll)\n                {\n                    num1 = i, num2 = j;\n                    ans = mp[1][qwq] + mp[2][qaq] + ll;\n                }\n            }\n        }\n    }\n    for(int i = tot[1]; i >= num1; i--)\n    {\n        guai[++cnt] = p[1][i];\n    }\n    for(int i = num2; i <= tot[2]; i++)\n    {\n        guai[++cnt] = p[2][i];\n    }\n    cout << ans << endl;\n    for(int i = 1; i <= n; i++)\n    {\n        for(int j = 1; j < cnt; j++)\n        {\n            if(guai[j].x == guai[j + 1].x)\n            {\n                if(l[i].x == guai[j].x && ((guai[j].y <= l[i].y && l[i].y <= guai[j + 1].y) || (guai[j + 1].y <= l[i].y && l[i].y <= guai[j].y)))\n                {\n                    ddd[i] = 1;\n                }\n            }\n            if(guai[j].y == guai[j + 1].y)\n            {\n                if(l[i].y == guai[j].y && ((guai[j].x<=l[i].x&&l[i].x<=guai[j+1].x) || (guai[j+1].x<=l[i].x&&l[i].x<=guai[j].x)))\n                {\n                    ddd[i] = 1;\n                }\n            }\n        }\n        cout << ddd[i];\n    }\n    return 0;\n}\n```",
        "postTime": 1610348552,
        "uid": 75954,
        "name": "AuCloud",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P7264 \u3010Mirror\u3011"
    },
    {
        "content": "\u7531\u4e8e\u51fa\u9898\u4eba\u63d0\u4f9b\u7684\u9898\u89e3\u7684\u8bc1\u660e\u4e0d\u751a\u6e05\u6670\uff0c\u4e8e\u662f\u6253\u7b97\u81ea\u5df1\u5199\u4e00\u7bc7\u9898\u89e3\u8c08\u4e00\u8c08\u60f3\u6cd5\u3002\n\n> $\\verb!upd 2021.1.10 23:14!$ \u4fee\u6b63\u4e86\u4e00\u4e9b\u7b14\u8bef\u3002\u7ba1\u7406\u5ba1\u6838\u592a\u5feb\u4e86\u8fd8\u6ca1\u6765\u5f97\u53ca\u52d8\u8bef $\\verb!qwq!$\n\n## \u9898\u76ee\u5927\u610f\n\n- \u4e00\u4e2a\u65e0\u7a77\u5927\u7684\u77e9\u9635\uff0c\u5750\u6807\u4e3a $(x,y)$ \u7684\u683c\u5b50\u53ef\u4ee5\u901a\u8fc7\u5f53\u4e14\u4ec5\u5f53 $x\\operatorname{and} y=0$ \uff0c\u5176\u4e2d $\\operatorname{and}$ \u662f\u4e8c\u8fdb\u5236\u4e0b\u7684\u4e0e\u64cd\u4f5c\u3002\n\n- \u73b0\u5728\u77e9\u9635\u4e0a\u6709 $n$ \u4e2a\u4f4d\u7f6e $(x_i,y_i)$ \u4e3a\u70b8\u5f39\u3002\u8be2\u95ee\u4ece $(s_x,s_y)$ \u5230 $(t_x,t_y)$ \u7684**\u6700\u77ed\u8def\u5f84**\u4e0a\u6709\u54ea\u4e9b\u70b8\u5f39\u3002\n\n## \u9898\u89e3\n\n\u901a\u8fc7\u5927\u773c\u89c2\u5bdf\u6cd5\uff0c\u6211\u4eec\u80fd\u591f\u4ece\u9898\u76ee\u4e2d\u6240\u7ed9\u7684 $64\\times 64$ \u7684\u77e9\u9635\u56fe\u4e0a\u89c2\u5bdf\u5230\u8fd9\u6837\u4e24\u4e2a\u5f88\u91cd\u8981\u7684\u7ed3\u8bba\uff1a\n\n- \u8fd9\u5f20\u56fe\u5f62\u6210\u4e86\u4e00\u4e2a\u6811\u5f62\u7ed3\u6784\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e24\u70b9\u4e4b\u95f4\u7684\u8def\u5f84**\u552f\u4e00\u786e\u5b9a**\u3002\n\n- \u5047\u4f7f\u6ee1\u8db3 $x>0,y>0$ \u7684\u70b9 $(x,y)$ \u53ef\u4ee5\u901a\u8fc7\uff0c\u90a3\u4e48 $(x-1,y)$ \u548c $(x,y-1)$ \u4e2d**\u6709\u4e14\u4ec5\u6709**\u4e00\u4e2a\u70b9\u53ef\u4ee5\u901a\u8fc7\u3002\n\n\u6211\u4eec\u5148\u8003\u8651\u7b2c\u4e8c\u4e2a\u7ed3\u8bba\uff0c\u56e0\u4e3a\u6839\u636e\u8fd9\u4e2a\u7ed3\u8bba\u53ef\u4ee5\u53cd\u8fc7\u6765\u8bc1\u660e\u7b2c\u4e00\u4e2a\u7ed3\u8bba\u3002\n\n\u4e8b\u5b9e\u4e0a\uff0c\u5047\u4f7f $x>0,y>0$ \u7684 $(x,y)$ \u53ef\u4ee5\u901a\u8fc7\uff0c\u90a3\u4e48 $x\\operatorname{and} y=0$ \u3002\u4e8e\u662f\u5bf9\u4e8e\u4e0d\u5b58\u5728\u67d0\u4e2a\u4e8c\u8fdb\u5236\u4f4d\uff0c\u4f7f\u5f97 $x,y$ \u7684\u8fd9\u4e00\u4f4d\u540c\u65f6\u76f8\u540c\u3002\u600e\u4e48\u6837\u8003\u8651 $x-1$ \u540e\u5b83\u7684\u4e8c\u8fdb\u5236\u503c\u7684\u53d8\u5316\u5462\uff1f\u8003\u8651 $x,y$ \u7684\u6700\u53f3\u4fa7\u7684\u4e3a $1$ \u7684\u4f4d\uff0c\u56e0\u4e3a\u51cf $1$ \u64cd\u4f5c\u53ea\u4f1a\u5f71\u54cd\u5230\u8fd9\u4e00\u4f4d\u4ee5\u53ca\u66f4\u4f4e\u4f4d\u7684\u4e8c\u8fdb\u5236\u503c\u3002\u4e0d\u59a8\u8bbe $x$ \u6700\u53f3\u4fa7\u7684\u4f4d\u662f $p$ \uff0c $y$ \u6700\u53f3\u4fa7\u7684\u4f4d\u662f $q$ \uff0c\u5176\u6240\u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u4f4d\u662f $2^p$ \u548c $2^q$ \u3002\u663e\u7136\uff0c $p\\neq q$ \uff08\u4e0d\u7136 $x,y$ \u7684\u4e0e\u503c\u5c31\u4e0d\u4e3a $0$ \u4e86\uff09 \u90a3\u4e48\u8981\u4e48 $p<q$ \uff0c\u8981\u4e48 $p>q$ \u3002\n\n\u5f53 $p<q$ \u65f6\uff0c $2^p-1$ \u7684\u672b\u5c3e $p-1$ \u4f4d\u5168\u90e8\u90fd\u662f $1$ \uff0c\u5e76\u4e14\u4e0d\u4f1a\u5f71\u54cd\u5230 $x$ \u7684 $p+1$ \u4f4d\u4ee5\u540e\u7684\u6570\u4f4d\u3002\u4f46\u662f\u7531\u4e8e $p<q$ \uff0c\u4e8e\u662f\u8fd9\u90e8\u5206 $1$ \u548c $y$ \u7684\u4e0e\u503c\u4ecd\u7136\u4e3a $0$ \uff0c\u4e8e\u662f $(x-1) \\operatorname{and} y=0$ \uff0c\u4e8e\u662f $(x-1,y)$ **\u53ef\u4ee5\u901a\u8fc7**\u3002\u540c\u65f6\uff0c $2^q-1$ \u7684\u672b\u5c3e $q-1$ \u4f4d\u5168\u90e8\u90fd\u662f $1$ \uff0c\u7531\u4e8e $p<q$ \uff0c\u4e8e\u662f\u6b64\u65f6 $x \\operatorname{and} (y-1)\\neq 1$ \uff0c\u4e5f\u5c31\u662f $(x,y-1)$ **\u4e0d\u53ef\u901a\u8fc7**\u3002\n\n\u5f53 $p>q$ \u65f6\u5982\u6cd5\u70ae\u5236\uff0c\u53ef\u4ee5\u53d1\u73b0 $(x-1,y)$ \u4e0e $(x,y-1)$ \u4e2d\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u53ef\u4ee5\u901a\u8fc7\u3002\u6211\u4eec\u4e0d\u59a8\u5c06\u5176\u4e0e\u5176\u5de6\u4fa7/\u4e0a\u4fa7\u90a3\u4e2a\u53ef\u8fbe\u7684\u70b9\u8fde\u8fb9\u3002\n\n\u8003\u8651\u7b2c $0$ \u884c\u548c\u7b2c $0$ \u5217\u7684\u6570\u5b57\u3002\u663e\u7136\uff0c\u9664\u4e86 $(0,0)$ \uff0c\u90fd\u53ef\u4ee5\u5411\u5de6\u4fa7\u6216\u8005\u4e0a\u4fa7\u7684\u70b9\u8fde\u8fb9\u3002\u4e8e\u662f\u6240\u6709\u70b9\u8054\u901a\uff0c\u5e76\u4e14\u8fb9\u6570\u662f\u603b\u70b9\u6570 $-1$ \u3002\u8fd9\u65f6\u5df2\u7ecf\u6ee1\u8db3**\u6574\u5f20\u56fe\u662f\u6811\u5f62\u7ed3\u6784**\u8fd9\u6837\u7684\u7ed3\u8bba\u4e86\u3002\n\n\u4e0b\u9762\u8003\u8651\u5982\u4f55\u6784\u9020\u89e3\u6cd5\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5728\u521a\u521a\u7684\u8bba\u8bc1\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u63d0\u5230\u4e86\u6700\u4f4e\u7684\u4e3a $1$ \u7684\u4f4d\u3002\u6211\u4eec\u53ef\u4ee5\u7528 $\\operatorname{lowbit}$ \u51fd\u6570\u8fdb\u884c\u6c42\u503c\uff0c\u5176\u4e2d $\\operatorname{lowbit}(x)$ \u8868\u793a $x$ \u7684\u6700\u4f4e\u4f4d\u7684 $1$ \u5bf9\u5e94\u7684\u4e8c\u8fdb\u5236\u6570\u7684\u503c\uff0c\u5e76\u4e14 $\\operatorname{lowbit}(x)=x\\operatorname{and}(-x)$ \uff08\u6811\u72b6\u6570\u7ec4\u4e2d\u4e5f\u7ecf\u5e38\u7528\u5230\u8fd9\u4e2a\u7ed3\u8bba\uff09\u3002\u7531\u4e8e\u8def\u5f84\u552f\u4e00\uff0c\u5e76\u4e14\u6bcf\u4e2a\u70b9\u53ea\u80fd\u5411\u4e0a\u6216\u8005\u5411\u5de6\u8d70\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u6bcf\u4e2a\u70b9\u6bcf\u6b21\u8d70\u7684\u65f6\u5019**\u6700\u8fdc\u8d70\u591a\u5c11**\u3002\n\n\u6211\u4eec\u5148\u627e\u51fa $(s_x,s_y),(t_x,t_y)$ \u5982\u679c\u5206\u522b\u5411\u5de6\u4e0a\u89d2\u8d70\uff0c\u6700\u7ec8\u4f1a\u8d70\u5230\u54ea\u91cc\uff08\u4e0d\u59a8\u8bbe\u4e3a $(p_x,p_y)$ \uff09 \u3002\u89c2\u5bdf\u53ef\u5f97\u8be5\u56fe\u4e3a\u4e00\u4e2a\u5206\u5f62\uff0c\u5e76\u4e14\u6bcf\u4e00\u4e2a\u5b50\u6b63\u65b9\u5f62\u7684\u7b2c $0$ \u884c\u7b2c $0$ \u5217\u90fd\u662f\u53ef\u901a\u8fc7\u7684\u4f4d\u7f6e\u3002\u4e8e\u662f\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u8fd9\u4e2a\u5b50\u6b63\u65b9\u5f62\u7684\u8fb9\u957f $2^k$ \u3002\u6211\u4eec\u80fd\u591f\u901a\u8fc7 $\\left\\lfloor\\dfrac{s_x}{2^k}\\right\\rfloor,\\left\\lfloor\\dfrac{s_y}{2^k}\\right\\rfloor$ \u8ba1\u7b97\u51fa $(s_x,s_y)$ \u6240\u5728\u7684\u8fd9\u4e2a\u6b63\u65b9\u5f62\u662f\u7b2c\u51e0\u6392\u7b2c\u51e0\u4e2a\u7684\u6b63\u65b9\u5f62\u3002\u53ea\u8981\u5224\u65ad\u8d77\u70b9\u548c\u7ec8\u70b9\u662f\u5426\u5728\u540c\u4e00\u4e2a\u6b63\u65b9\u5f62\u4e2d\u5c31\u884c\u4e86\uff0c\u53ef\u4ee5\u8ba1\u7b97\u51fa $(p_x,p_y)$ \u3002\u7531\u4e8e\u662f\u4e00\u4e2a\u5b50\u56fe\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u521a\u521a\u51fa\u73b0\u8fc7\u7684**\u6240\u6709\u5750\u6807**\uff08\u5305\u62ec\u8d77\u70b9\u7ec8\u70b9\u548c\u70b8\u5f39\u5750\u6807\uff09\u5411\u5de6\u5e73\u79fb $p_x$ \u3001\u5411\u4e0a\u5e73\u79fb $p_y$ \uff0c\u4e8e\u662f\u8d77\u70b9\u548c\u7ec8\u70b9\u6700\u7ec8\u5e94\u5f53\u5728\u7b2c $0$ \u884c\u6216\u8005\u7b2c $0$ \u5217\u4f1a\u5408\u4e86\u3002\n \n\u5047\u8bbe\u5f53\u524d\u70b9\u5728 $(x,y)$ \uff0c\u6ee1\u8db3 $x\\neq 0$ \u4e14 $y \\neq 0$ \u3002\u8003\u8651\u6bcf\u6b21\u5411\u5de6\u6216\u8005\u5411\u4e0a\u8d70\u5c3d\u53ef\u80fd\u8fdc\u7684\u8ddd\u79bb\u3002\u540c\u6837\uff0c\u6211\u4eec\u6c42\u51fa $x,y$ \u7684\u6700\u4f4e\u4f4d $p,q$ \u3002\u4e0d\u59a8\u8bbe $p<q$ \uff0c\u90a3\u4e48\u8be5\u70b9\u53ef\u4ee5\u4e0d\u505c\u5411\u5de6\u8d70\u3002\u4ec0\u4e48\u65f6\u5019\u8fd9\u4e2a\u70b9\u8981\u6539\u53d8\u65b9\u5411\u4e86\u5462\uff1f\n\n\u4e0d\u59a8\u4e3e\u4e2a\u4f8b\u5b50\uff1a\n\n$$\\begin{aligned}\nx&=554_{(10)}&=1000101010_{(2)} \\cr\ny&=336_{(10)}&=0101010000_{(2)} \\cr\n\\end{aligned}$$\n\n\u663e\u7136\uff0c\u7531\u4e8e $p<q$ \uff0c\u6211\u4eec\u8981\u4e0d\u65ad\u51cf\u53bb $x$ \u7684\u503c\uff0c\u4e5f\u5c31\u662f\u5411\u4e0a\u8d70\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e8e $x$ \u7684\u540e $q$ \u4f4d\uff0c\u65e0\u8bba\u5b83\u7684\u503c\u5982\u4f55\uff0c\u4e0e\u4e0a $y$ \u90fd\u662f $0$ \u3002\u90a3\u4e48\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u8981\u4e0d\u65ad\u51cf\u53bb\u8fd9\u540e $q$ \u4f4d\uff0c\u76f4\u5230\u4ed6\u4eec\u5168\u90e8\u4e3a $0$ \u3002\n\n$$\\begin{aligned}\nx&=544_{(10)}&=1000100000_{(2)} \\cr\ny&=336_{(10)}&=0101010000_{(2)} \\cr\n\\end{aligned}$$\n\n\u6b64\u65f6 $p,q$ \u7684\u5927\u5c0f\u5173\u7cfb\u5c31\u5bf9\u8c03\u4e86\u3002\u4e8e\u662f\u6211\u4eec\u5e94\u5f53\u5411\u5de6\u8d70\u4e86\u3002\u8fd9\u4e00\u90e8\u5206\u4e00\u5171\u82b1\u8d39\u4e86 $554-544=10$ \u6b65\u3002\n\n\u53ef\u4ee5\u8bc1\u660e\uff0c\u5168\u8fc7\u7a0b\u4e2d\u8d70\u7684\u6b65\u6570\u4e0d\u4f1a\u8d85\u8fc7 $\\log_2(x+y)$ \u3002\u56e0\u4e3a\u6bcf\u8d70\u4e00\u6bb5\u8def\uff0c$x$ \u6216 $y$ \u7684 $\\operatorname{lowbit}$ \u503c\u81f3\u5c11\u52a0\u4e0a $1$ \u3002\n\n\u7136\u540e\u8fd9\u6761\u8def\u5c31\u88ab\u6211\u4eec\u62c6\u5206\u6210\u4e86 $\\log_2(x+y)$ \u4e2a\u7ebf\u6bb5\u3002\u5206\u522b\u5bf9 $(s_x,s_y),(t_x,t_y)$ \u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\uff0c\u76f4\u5230\u4ed6\u4eec\u7684\u6a2a\u5750\u6807\u6216\u8005\u5217\u5750\u6807\u5230\u8fbe\u4e86 $0$ \u3002\n\n\u8003\u8651\u6700\u540e\u4e00\u6b65\u3002\u4e8b\u5b9e\u4e0a\u6211\u4eec\u8981\u8003\u8651\u4ed6\u4eec\u4f1a\u4e0d\u4f1a\u5728 $(0,0)$ \u76f8\u9047\uff0c\u800c\u8fd9\u53d6\u51b3\u4e8e\u4ed6\u4eec\u662f\u5426\u5728\u540c\u4e00\u884c\u6216\u8005\u540c\u4e00\u5217\u4e0a\u4e86\u3002\u8fd9\u90e8\u5206\u53ea\u9700\u8981\u5224\u65ad\u4e00\u4e0b\uff0c~~\u7559\u7ed9\u8bfb\u8005\u81ea\u51e0\u5904\u7406~~\u3002\n\n\u90a3\u4e48\u6700\u540e\u7ebf\u6bb5\u603b\u6570\u5e94\u8be5\u662f $\\log_2v$ \u7ea7\u522b\u7684\uff08 $v$ \u662f\u503c\u57df\uff09\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u70b8\u5f39\uff0c\u679a\u4e3e\u6240\u6709\u7ebf\u6bb5\uff0c\u5224\u65ad\u8fd9\u4e2a\u70b8\u5f39\u662f\u5426\u5728\u8fd9\u6761\u7ebf\u6bb5\u4e0a\u3002\u603b\u590d\u6742\u5ea6 $\\mathcal O(n\\log v)$ \u3002\u7531\u4e8e\u4e0d\u50cf\u9898\u89e3\u4e2d\u7528\u5230\u6bd4\u8f83\u9ebb\u70e6\u7684\u9012\u5f52\uff0c\u6240\u4ee5\u901f\u5ea6\u98de\u8d77\uff0c\u62ff\u5230\u4e86\u8d5b\u65f6\u6700\u5757\u3002\n\n## \u53c2\u8003\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define up(l,r,i) for(int i=l,END##i=r;i<=END##i;++i)\n#define dn(r,l,i) for(int i=r,END##i=l;i>=END##i;--i)\nusing namespace std;\ntypedef long long i64;\nconst int INF =2147483647;\nconst int MAXN =2e5+3,MAXM=500+3;\ni64 n,X[MAXN],Y[MAXN],s1,s2,t1,t2,ans;\ni64 A[MAXM],B[MAXM],C[MAXM],p;\ni64 P[MAXM],Q[MAXM],R[MAXM],q;\nvoid del(i64 &x,i64 &y){\n    while(x!=0&&y!=0){\n        if(!((x-1)&y)){i64 t=y&-y,l=x&(t-1); A[++p]=y,B[p]=x-l,C[p]=x,x-=l,ans+=l;}\n        else          {i64 t=x&-x,l=y&(t-1); P[++q]=x,Q[q]=y-l,R[q]=y,y-=l,ans+=l;}\n    }\n}\ni64 qread(){\n    i64 w=1,c,ret;\n    while((c=getchar())> '9'||c< '0') w=(c=='-'?-1:1); ret=c-'0';\n    while((c=getchar())>='0'&&c<='9') ret=ret*10+c-'0';\n    return ret*w;\n}\nint main(){\n    n=qread(); up(1,n,i) X[i]=qread(),Y[i]=qread();\n    s1=qread(),s2=qread(),t1=qread(),t2=qread();\n    up(1,60,i){\n        i64 l=1ll<<i,a1=s1/l,a2=s2/l,b1=t1/l,b2=t2/l,p1,p2;\n        if(a1==b1&&a2==b2){\n            p1=a1*l,p2=a2*l,s1-=p1,s2-=p2,t1-=p1,t2-=p2;\n            up(1,n,j) X[j]-=p1,Y[j]-=p2; break;\n        }\n    }\n    del(s1,s2),del(t1,t2);\n    printf(\"%lld\\n\",ans+llabs(s1-t1)+llabs(s2-t2));\n    P[++q]=min(s1,t1),Q[q]=min(s2,t2),R[q]=max(s2,t2);\n    A[++p]=min(s2,t2),B[p]=min(s1,t1),C[p]=max(s1,t1);\n    up(1,n,i){\n        bool f=0;\n        up(1,p,j) if(Y[i]==A[j]&&X[i]>=B[j]&&X[i]<=C[j]) f=true;\n        up(1,q,j) if(X[i]==P[j]&&Y[i]>=Q[j]&&Y[i]<=R[j]) f=true;\n        putchar(f?'1':'0');\n    }\n    return 0;\n}\n```",
        "postTime": 1610289951,
        "uid": 330759,
        "name": "\u56e7\u4ed9",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7264 \u3010Mirror\u3011"
    }
]
[
    {
        "content": "### P7675 DOMINE\n### 1.\u505a\u6cd5\n~~COCI \u51fa\u7684\u9898\u540d\u5b57\u90fd\u662f\u4ec0\u4e48\u73a9\u610f~~\n\n\u76f4\u63a5\u8d2a\u5fc3\u663e\u7136\u4e0d\u884c\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u7ec4\u6570\u636e\uff1a\n```\n2 2\n1 -100 -100\n100 100 1\n```\n\n\u7b54\u6848\u4e3a $202$\uff0c\u4f46\u662f\u8d2a\u5fc3\u4f1a\u5f97\u5230\u9519\u8bef\u7684 $101$\u3002\n\n\u6b63\u786e\u7684\u505a\u6cd5\u5219\u662f $1\\times2$ \u9aa8\u724c\u7684\u5e38\u89c1\u505a\u6cd5\uff1a\u72b6\u538b dp\u3002\n\n### 2.\u72b6\u538b dp\n\u5c06\u51e0\u4e2a\u72b6\u6001\u538b\u7f29\u5728\u4e00\u4e2a int \u91cc\u9762\u5c31\u662f\u72b6\u538b\uff0c\u6bd4\u5982\uff1a\n\n\u51e0\u4e2a\u7403\u9009\u6216\u4e0d\u9009\uff1b\n\n\u53c2\u52a0\u6216\u4e0d\u53c2\u52a0\uff1b\n\n\u8fd8\u6709\uff0c\u68cb\u76d8\u4e2d\u8be5\u4f4d\u7f6e\u662f\u5426\u4e3a\u4e00\u4e2a $1\\times2$ \u9aa8\u724c\u7684\u4e0a\u534a\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u672c\u9898\u4e2d\u7684\u72b6\u6001\u3002\n\n\u6ce8\u610f\u5230\u5bbd\u5ea6\u59cb\u7ec8\u4e3a $3$\uff0c\u6240\u4ee5\u4e00\u5171\u53ea\u6709 $2^3=8$ \u4e2a\u72b6\u6001\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(nk)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n\n### 3.\u4ee3\u7801\n\n\u5c06\u72b6\u6001\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6574\u6570\uff0c\u4ece\u6700\u4f4e\u4f4d\u5f00\u59cb\u6570\uff0c\u7b2c\u4e09\uff0c\u4e8c\uff0c\u4e00\u4f4d\u5206\u522b\u4ee3\u8868\u8be5\u884c\u7b2c\u4e00\uff0c\u4e8c\uff0c\u4e09\u5217\u662f\u5426\u4e3a\u4e00\u4e2a\u7ad6\u7740\u653e\u7684\u9aa8\u724c\u7684\u4e0a\u534a\u90e8\u5206\u3002\n\n$f[i][j][k]$ \u4ee3\u8868\u7b2c $i$ \u884c\uff0c\u5df2\u7ecf\u653e\u4e86 $j$ \u4e2a\u9aa8\u724c\uff08\u534a\u4e2a\u9aa8\u724c\u4e5f\u7b97\uff09\uff0c\u72b6\u6001\u4e3a $k$\u3002\n\n\u6709\u4e09\u79cd\u8f6c\u79fb\u65b9\u6cd5\uff1a\n\n1\uff1a\u76f4\u63a5\u8f6c\u79fb\uff0c\u4e0d\u5728\u8be5\u884c\u653e\u6a2a\u7740\u7684\u9aa8\u724c\uff1b\n\n2\uff1a\u5728\u524d\u4e24\u4e2a\u4f4d\u7f6e\u653e\u6a2a\u7740\u7684\u9aa8\u724c\uff1b\n\n3\uff1a\u5728\u540e\u4e24\u4e2a\u4f4d\u7f6e\u653e\u6a2a\u7740\u7684\u9aa8\u724c\u3002\n\n\u653e\u4e00\u5f20\u56fe\u7247\uff08\u8f6c\u79fb\u5904\u7406\u7684\u662f\u4e2d\u95f4\u4e00\u884c\uff09\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0cdzq37p.png)\n\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long n,a1,a2,a3,f[1001][1001][8],k,t,cnt,cnt2;\nconst int INF=-1e18;\ninline int read(){\n\tchar c=getchar();bool f=0;t=0; \n\twhile(!isdigit(c)) f|=c=='-',c=getchar();\n\twhile(isdigit(c))t=(t<<1)+(t<<3)+(c^48),c=getchar();\n\tif(f)t=-t;return t;\n}\nint get(int state){\n    return ((state&4)?a1:0)+((state&2)?a2:0)+((state&1)?a3:0);\n    //\u7279\u5b9a\u72b6\u6001\u8986\u76d6\u7684\u6570\u4e4b\u548c\n}\nint cont(int state){\n\treturn ((state&4)>>2)+((state&2)>>1)+(state&1);\n//\u7279\u5b9a\u72b6\u6001\u9700\u8981\u9aa8\u724c\u6570\n}\nint q(int state,int i,int j){\n    t=INF;cnt2=cont(state);\n    if (j<cnt2) return INF; //\u9aa8\u724c\u4e0d\u591f\n    for (int st=0,a;st<8;++st){\n        if (st&state) continue; //\u4e00\u4e2a\u683c\u5b50\u4e0a\u4e24\u5f20\u724c\n        a=st|state;cnt=cont(a);\n        if (j<cnt) continue; //\u9aa8\u724c\u4e0d\u591f\n        if (!(a&3)&&j>cnt){\n            t=max(t,get(a)+f[i-1][j-cnt2-1][st]+a2+a3);\n            //\u7b2c\u4e09\u79cd\u65b9\u5f0f\u8f6c\u79fb\n        }\n        if (!(a&6)&&j>cnt){\n            t=max(t,get(a)+f[i-1][j-cnt2-1][st]+a2+a1);\n            //\u7b2c\u4e8c\u79cd\u65b9\u5f0f\n        }\n        t=max(t,f[i-1][j-cnt2][st]+get(a));\n        //\u7b2c\u4e00\u79cd\u65b9\u5f0f\n    }\n    if (t-INF<30) return INF;\n    return t;\n}\nint main(){\n    scanf(\"%d%d\",&n,&k);\n    for (register int i=0;i<=k;++i) for (register int j=0;j<8;++j) f[0][i][j]=INF;\n    f[0][0][0]=0;\n    for (register int i=1;i<=n;++i){\n        a1=read();\n        a2=read();\n        a3=read();//\u4e09\u4e2a\u53d8\u91cf\u91cd\u590d\u5229\u7528\n        for (register int j=1;j<=k;++j){\n            for (register int l=0;l<8;++l) f[i][j][l]=q(l,i,j);\n        }\n    }\n    cout<<f[n][k][0];\n    return 0;\n}\n```",
        "postTime": 1648529518,
        "uid": 369782,
        "name": "_lmh_",
        "ccfLevel": 6,
        "title": "P7675\u9898\u89e3"
    }
]
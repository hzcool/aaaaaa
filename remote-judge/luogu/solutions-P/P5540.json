[
    {
        "content": "\u6ca1\u89c1\u8fc7\u7684\u8bdd\uff08\u5927\u6982\uff09\u8fd8\u662f\u6bd4\u8f83\u96be\u7684 qaq\n\n---\n\n\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u68f5\u751f\u6210\u6811\u7684 $\\displaystyle\\sum_{e\\in T}a_e$ \u548c $\\displaystyle\\sum_{e\\in T}b_e$ \u770b\u505a\u4e8c\u7ef4\u5750\u6807 $(x,y)$ \u3002\u4e8e\u662f\u6211\u4eec\u5c31\u76f8\u5f53\u4e8e\u8981\u627e\u4e00\u4e2a $x\\times y$ \u6700\u5c0f\u7684\u70b9\u3002\n\n\u8fd9\u4e2a\u4e1c\u897f\u53ef\u4ee5\u5206\u4e09\u6b65\u6c42\uff1a\n\n### \u6c42\u51fa\u4e0e $x$ \u8f74\u548c $y$ \u8f74\u6700\u8fd1\u7684\u70b9\n\n\u8fd9\u4e2a\u8fd8\u662f\u5f88\u7b80\u5355\u7684\u3002\n\n\u628a $a_i$ \u4f5c\u4e3a\u8fb9\u6743\uff0c\u6c42\u51fa\u7684\u6700\u5c0f\u751f\u6210\u6811\u5c31\u662f\u4e0e $x$ \u8f74\u6700\u8fd1\u7684\u70b9\u3002\n\n\u628a $b_i$ \u4f5c\u4e3a\u8fb9\u6743\uff0c\u6c42\u51fa\u7684\u6700\u5c0f\u751f\u6210\u6811\u5c31\u662f\u4e0e $y$ \u8f74\u6700\u8fd1\u7684\u70b9\u3002\n\n\u4e3a\u4e86\u4e0b\u9762\u8bb2\u89e3\u7684\u65b9\u4fbf\uff0c\u8bbe\u4e0e $x$ \u8f74\u6700\u8fd1\u7684\u70b9\u4e3a $A$ \uff0c\u4e0e $y$ \u8f74\u6700\u8fd1\u7684\u70b9\u4e3a $B$ \u3002\n\n### \u627e\u5230\u4e00\u4e2a\u5728 $AB$ \u7684\u5de6\u4e0b\u65b9\u4e14\u79bb $AB$ \u6700\u8fdc\u7684\u70b9\n\n\u53ef\u80fd\u6709\u4e00\u70b9\u96be\u5ea6\u3002\n\n\u5047\u8bbe\u8fd9\u4e2a\u70b9\u662f $C$ \uff0c\u90a3\u4e48\u5927\u6982\u662f\u8fd9\u4e2a\u6837\u5b50\uff1a\n\n![](https://m-sea-blog.com/usr/uploads/2021/02/1133855288.png)\n\n\u4e8b\u5b9e\u4e0a\uff0c$C$ \u5c31\u662f\u5728 $AB$ \u7684\u5de6\u4e0b\u65b9\u4e14 $S_{\\triangle ABC}$ \u6700\u5927\u7684\u70b9\u3002\n\n\u5bb9\u6613\u77e5\u9053 $S_{\\triangle ABC}=-\\frac{\\vec{AB}\\times\\vec{AC}}{2}$ \u3002\u4e8e\u662f\u6211\u4eec\u53ea\u8981\u6700\u5c0f\u5316 $\\vec{AB}\\times\\vec{AC}$ \u5373\u53ef\u3002\n\n\u63a8\u4e00\u63a8\u5f0f\u5b50\uff1a\n\n$$\\begin{aligned}\\vec{AB}\\times\\vec{AC}&=(x_B-x_A)(y_C-y_A)-(x_C-x_A)(y_B-y_A)\\\\&=(x_B-x_A)y_C-(x_B-x_A)y_A-(y_B-y_A)x_C+(y_B-y_A)x_A\\\\&=(x_B-x_A)y_C+(y_A-y_B)x_C-(x_B-x_A)y_A+(y_B-y_A)x_A\\end{aligned}$$\n\n\u540e\u4e24\u9879\u662f\u5e38\u6570\uff0c\u6211\u4eec\u53ea\u9700\u6700\u5c0f\u5316\u524d\u4e24\u9879\u3002\u4e8e\u662f\u5c06\u8fb9\u6743\u8bbe\u4e3a $(x_B-x_A)b_i+(y_A-y_B)a_i$ \uff0c\u7136\u540e\u6c42\u6700\u5c0f\u751f\u6210\u6811\u5373\u53ef\u3002\n\n### \u9012\u5f52\u5904\u7406 $AC$ \u4e0e $BC$\n\n\u628a\u5f53\u524d $AC$ \u548c $BC$ \u62ff\u53bb\u505a\u7b2c\u4e8c\u6b65\u7684\u8fc7\u7a0b\u5373\u53ef\u3002\n\n\u5f53\u65b0\u7b97\u51fa\u7684 $C$ \u4e0d\u5728 $AB$ \u7684\u5de6\u4e0b\u65b9\u65f6\u5c31\u53ef\u4ee5\u7ec8\u6b62\u4e86\u3002\n\n------\n\n\u5efa\u8bae\u753b\u56fe\u5e76\u7ed3\u5408\u4ee3\u7801\u7406\u89e3\u4e00\u4e0b\u3002\n\n```cpp\n// ===================================\n//   author: M_sea\n//   website: http://m-sea-blog.com/\n// ===================================\n#include <algorithm>\n#include <iostream>\n#include <cstdlib>\n#include <cstring>\n#include <cstdio>\n#include <cmath>\n#define re register\nusing namespace std;\ntypedef long long ll;\n\ninline int read() {\n    int X=0,w=1; char a=getchar();\n    while (a<'0'||a>'9') { if (a=='-') w=-1; a=getchar(); }\n    while (a>='0'&&a<='9') X=X*10+a-'0',a=getchar();\n    return X*w;\n}\n\nconst int N=200+10;\nconst int M=10000+10;\nconst int inf=0x3f3f3f3f;\n\nstruct UFS { //\u5e76\u67e5\u96c6\n    int f[N];\n    inline void init(int n) { for (re int i=1;i<=n;++i) f[i]=i; }\n    inline int find(int x) { return x==f[x]?x:f[x]=find(f[x]); }\n    inline void merge(int x,int y) { x=find(x),y=find(y); if (x!=y) f[x]=y; }\n    inline int check(int x,int y) { return find(x)==find(y); }\n};\n\nstruct Edge { int u,v,w,a,b; };\ninline int cmp(Edge a,Edge b) { return a.w<b.w; }\n\n//\u8ba1\u7b97\u51e0\u4f55\u76f8\u5173\nstruct Point { int x,y; };\ntypedef Point Vector;\nVector operator -(Point a,Point b) { return (Point){a.x-b.x,a.y-b.y}; }\ninline int cross(Vector a,Vector b) { return a.x*b.y-a.y*b.x; }\n\nint n,m;\nUFS S;\nPoint ans=(Point){inf,inf};\nEdge e[M];\n\n//Kruskal\uff0c\u8fd4\u56de\u627e\u5230\u7684\u70b9\ninline Point Kruskal() {\n    Point res=(Point){0,0}; int tot=0;\n    sort(e+1,e+m+1,cmp); S.init(n);\n    for (re int i=1;i<=m;++i) {\n        int u=e[i].u,v=e[i].v,a=e[i].a,b=e[i].b;\n        if (S.check(u,v)) continue;\n        S.merge(u,v),res.x+=a,res.y+=b,++tot;\n        if (tot==n-1) break;\n    }\n    /*\u66f4\u65b0\u7b54\u6848*/\n    ll Ans=1ll*ans.x*ans.y,now=1ll*res.x*res.y;\n    if (Ans>now||(Ans==now&&ans.x>res.x)) ans=res;\n    return res;\n}\n\n//\u9012\u5f52\u5904\u7406\ninline void solve(Point A,Point B) {\n    for (re int i=1;i<=m;++i) e[i].w=e[i].b*(B.x-A.x)+e[i].a*(A.y-B.y);\n    Point C=Kruskal();\n    if (cross(B-A,C-A)>=0) return; //\u8fb9\u754c\n    solve(A,C),solve(C,B);\n}\n\nint main() {\n    n=read(),m=read();\n    for (re int i=1;i<=m;++i)\n        e[i].u=read()+1,e[i].v=read()+1,e[i].a=read(),e[i].b=read();\n    for (re int i=1;i<=m;++i) e[i].w=e[i].a;\n    Point A=Kruskal();\n    for (re int i=1;i<=m;++i) e[i].w=e[i].b;\n    Point B=Kruskal();\n    solve(A,B); printf(\"%d %d\\n\",ans.x,ans.y);\n    return 0;\n}\n```\n\n",
        "postTime": 1567165995,
        "uid": 38370,
        "name": "M_sea",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P5540 \u3010[BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811\u3011"
    },
    {
        "content": "\u5c06$\\sum a_i$\u548c$\\sum b_i$\u5206\u522b\u770b\u6210$x$\u548c$y$\uff0c\u5e76\u5c06\u5b83\u6295\u5c04\u5230\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u4e0a\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u662f\u60f3\u627e\u5230$x \\times y$\u6700\u5c0f\u7684\u70b9\u3002\n\n\u5148\u627e\u51fa$x$\u6700\u5c0f\u7684\u70b9$\\mathrm{A}$\u4ee5\u53ca$y$\u6700\u5c0f\u7684\u70b9$\\mathrm B$\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u9700\u8981\u6c42\u51fa\u4e00\u4e2a\u70b9$\\mathrm C$\uff0c\u4f7f\u5f97$\\mathrm C$\u5728$\\mathrm {AB}$\u5de6\u4fa7\u4e14$\\mathrm C$\u8ddd\u79bb$\\mathrm {AB}$\u6700\u8fdc\u3002\n\n\u4e5f\u5c31\u662f\u8ba9$S_{\\triangle ABC}$\u6700\u5927\uff0c\u5373$\\overrightarrow{\\mathrm{AB}} \\times \\overrightarrow{\\mathrm{AC}}$\u6700\u5c0f\uff08\u56e0\u4e3a$\\overrightarrow{\\mathrm{AB}} \\times \\overrightarrow{\\mathrm{AC}} < 0$\uff09\n\n![tree.png](https://i.loli.net/2019/08/30/X9FlBnVtmqNi3vx.png)\n\n$$\\begin{aligned}\\because \\overrightarrow{\\mathrm{AB}} \\times \\overrightarrow{\\mathrm{AC}} &= (x_{\\mathrm{B}} - x_{\\mathrm{A}})(y_{\\mathrm{C}} - y_{\\mathrm{A}}) - (y_{\\mathrm{B}} - y_{\\mathrm{A}})(x_\\mathrm{C} - x_\\mathrm{A}) \\\\&= (x_\\mathrm B - x_\\mathrm A) \\times y_\\mathrm C + (y_\\mathrm A - y_\\mathrm B) \\times x_\\mathrm C + y_\\mathrm B x_\\mathrm A - x_\\mathrm B y_\\mathrm A\\end{aligned}$$\n\n\u6240\u4ee5\u8003\u8651\u6700\u5c0f\u5316$(x_\\mathrm B - x_\\mathrm A) \\times y_\\mathrm C + (y_\\mathrm A - y_\\mathrm B) \\times x_\\mathrm C$\u3002\n\n\u4e8e\u662f\u53ef\u4ee5\u76f4\u63a5\u5c06\u8fb9\u6743\u6539\u4e3a$w_i = (y_\\mathrm A - y_\\mathrm B) \\times a_i + (x_\\mathrm B - x_\\mathrm A)\\times b_i$\uff0c\u8dd1\u6700\u5c0f\u751f\u6210\u6811\u7b97\u6cd5\u5373\u53ef\u5f97\u5230$\\mathrm C$\u70b9\u3002\n\n\u63a5\u4e0b\u6765\u9012\u5f52\u5904\u7406$\\mathrm {AC, CB}$\u5373\u53ef\u3002\n\n\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u51b3\u7b56\u70b9\u6784\u6210\u4e86\u4e00\u4e2a\u542b\u6709$n!$\u4e2a\u70b9\u7684\u51f8\u5305\u3002\u56e0\u4e3a\u5728$n$\u4e2a\u70b9\u7684\u51f8\u5305\u4e0a\u7684\u70b9\u6570\u671f\u671b\u662f$\\sqrt {\\ln n}$\u7684\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u4e3a$\\mathrm{O}(n\\log n\\sqrt {\\ln n!})$\u3002\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n#include <vector>\n\ninline int read()\n{\n\tint data = 0, w = 1; char ch = getchar();\n\twhile (ch != '-' && (ch < '0' || ch > '9')) ch = getchar();\n\tif (ch == '-') w = -1, ch = getchar();\n\twhile (ch >= '0' && ch <= '9') data = data * 10 + (ch ^ 48), ch = getchar();\n\treturn data * w;\n}\n\nconst int N(205), M(10010);\nstruct vector { int x, y; }; vector ans = (vector) {(int) 1e9, (int) 1e9};\ninline vector operator - (const vector &lhs, const vector &rhs)\n\t{ return (vector) {lhs.x - rhs.x, lhs.y - rhs.y}; }\ninline int operator * (const vector &lhs, const vector &rhs)\n\t{ return lhs.x * rhs.y - lhs.y * rhs.x; }\nvoid chkmin(vector &x, vector y)\n{\n\tlong long _x = 1ll * x.x * x.y, _y = 1ll * y.x * y.y;\n\tif (_x > _y || (_x == _y && x.x > y.x)) x = y;\n}\n\nint n, m, fa[N], rnk[N];\nint find(int x) { return fa[x] == x ? x : fa[x] = find(fa[x]); }\nint merge(int x, int y)\n{\n\tx = find(x), y = find(y);\n\treturn (rnk[x] == rnk[y] ? fa[x] = y, ++rnk[y] :\n\t\t\t(rnk[x] < rnk[y] ? fa[x] = y : fa[y] = x));\n}\n\nstruct edge { int x, y, a, b, w; } e[M];\ninline int operator < (const edge &lhs, const edge &rhs) { return lhs.w < rhs.w; }\nvector Kruskal()\n{\n\tvector res = (vector) {0, 0}; int cnt = 0;\n\tfor (int i = 1; i <= n; i++) fa[i] = i, rnk[i] = 1;\n\tstd::sort(e + 1, e + m + 1);\n\tfor (int i = 1; i <= m && cnt < n - 1; i++)\n\t{\n\t\tint x = find(e[i].x), y = find(e[i].y);\n\t\tif (x != y) merge(x, y), res.x += e[i].a, res.y += e[i].b, ++cnt;\n\t}\n\treturn res;\n}\n\nvoid solve(const vector &A, const vector &B)\n{\n\tfor (int i = 1; i <= m; i++)\n\t\te[i].w = e[i].a * (A.y - B.y) + e[i].b * (B.x - A.x);\n\tvector C = Kruskal(); chkmin(ans, C);\n\tif ((B - A) * (C - A) >= 0) return;\n\tsolve(A, C), solve(C, B);\n}\n\nint main()\n{\n\tn = read(), m = read();\n\tfor (int i = 1; i <= m; i++)\n\t\te[i] = (edge) {read() + 1, read() + 1, read(), read(), 0};\n\tfor (int i = 1; i <= m; i++) e[i].w = e[i].a;\n\tvector A = Kruskal(); chkmin(ans, A);\n\tfor (int i = 1; i <= m; i++) e[i].w = e[i].b;\n\tvector B = Kruskal(); chkmin(ans, B);\n\tsolve(A, B); printf(\"%d %d\\n\", ans.x, ans.y);\n\treturn 0;\n}\n```",
        "postTime": 1567167893,
        "uid": 46800,
        "name": "xgzc",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5540 \u3010\u3010\u6a21\u677f\u3011\u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811\u3011"
    },
    {
        "content": "\u5e7f\u544a\uff1a\u8131\u66f4\u8bb8\u4e45\u7684[$blog$](https://www.cnblogs.com/heyujun/p/10398181.html)\n\n\u5982\u679c\u6211\u4eec\u53ea\u6709\u4e00\u4e2a\u6761\u4ef6\u8981\u6ee1\u8db3\u7684\u8bdd\u76f4\u63a5\u6700\u5c0f\u751f\u6210\u6811\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f46\u662f\u73b0\u5728\u6211\u4eec\u6709\u4e24\u7ef4\u554a\u3002\u3002\u3002\n\n\u6211\u4eec\u5c06\u6bcf\u4e2a\u65b9\u6cd5\u7684**\u8d39\u7528\u548c\u65f6\u95f4**\u770b\u4f5c\u4e00\u4e2a\u4e8c\u7ef4\u5750\u6807$(x,y)$\n\n\u5219\u6211\u4eec\u8981\u6c42$x\\centerdot y=k$\u6700\u5c0f\u5373\u8981\u6c42\u53cd\u6bd4\u4f8b\u51fd\u6570$y=\\frac kx$\u7684\u56fe\u50cf\u79bb\u5750\u6807\u8f74\u6700\u8fd1\u3002\n\n\u90a3\u4e48\u6211\u4eec\u600e\u4e48\u6c42\u5462\uff1f\u5206\u4e0b\u9762\u4e09\u6b65\uff1a\n\n* $Step1$\n\n\u5206\u522b\u6c42\u51fa\u79bb$y,x$\u8f74\u6700\u8fd1\u7684\u70b9\uff0c\u8fd9\u4e2a\u901a\u8fc7\u76f4\u63a5\u6700\u5c0f\u751f\u6210\u6811\u4e00\u7ef4\u6392\u5e8f\u53ef\u4ee5\u6c42\u51fa\u3002\n\n* $Step2$\n\n\u73b0\u5728\u6211\u4eec\u7684\u60c5\u51b5\u662f\u8fd9\u6837\u7684\uff1a\n\n![img](https://i.loli.net/2019/02/18/5c6ab34002bc8.png)\n\n$A$,$B$\u662f\u6211\u4eec\u521a\u624d\u56fa\u5b9a\u7684\uff0c\u73b0\u5728\u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u4e2a\u70b9$C$\uff0c\u4f7f$C$\u5728$AB$\u5de6\u4fa7\u4e14\u79bb$AB$\u6700\u8fdc\u3002\n\n\u8fd9\u4e2a\u600e\u4e48\u529e\u5462\uff1f\n\n\u5176\u5b9e\u5c31\u662f\u8ba9$S_{\\triangle ABC}$\u7684\u9762\u79ef\u6700\u5927\u3002\n\n\u56e0\u4e3a\u6709\n\n$\\vec {AB}=(B.x-A.x,B.y-A.y)$\n\n$\\vec {AC}=(C.x-A.x,C.y-A.y)$\n\n\u4e14\u6709$S_{\\triangle ABC}=\\frac {\\vec{AB}*\\vec{AC}}2$(\u4f46\u662f\u8fd9\u4e2a\u9762\u79ef\u662f\u6709\u5411\u7684\u4e14\u4e3a\u8d1f\uff0c\u6240\u4ee5\u8981\u4f7f\u8fd9\u4e24\u4e2a\u5411\u91cf\u4e58\u8d77\u6765\u6700\u5c0f)\n\n\u6240\u4ee5\u6211\u4eec\u8981\u6700\u5c0f\u5316\uff1a\n\n$\\vec{AB}*\\vec{AC}$\n\n$=(B.x-A.x)*(C.y-A.y)-(B.y-A.y)*(C.x-A.x)$\n\n$=(B.x-A.x)*C.y+(A.y-B.y)*C.x+...$\n\n\u56e0\u4e3a~~\u6211\u61d2~~\u540e\u9762\u90e8\u5206\u662f\u5e38\u6570\uff0c\u6240\u4ee5\u7701\u7565\u4e86\u3002\n\n\u90a3\u4e48\u6211\u76f4\u63a5\u5c06\u6539\u8fb9\u6743\u4e3a$(B.x-A.x)y[i]+(A.y-B.y)x[i]$\uff0c\u505a\u6700\u5c0f\u751f\u6210\u6811\u5373\u53ef\u3002\n\n* $Step3$\n\n\u73b0\u5728\u627e\u5230\u4e86$C$\uff0c\u9012\u5f52\u5904\u7406$(A,C)$\u3001$(C,B)$\u5373\u53ef\u3002\n\n\u7ec8\u6b62\u6761\u4ef6$\\vec {BA} * \\vec{CA}\\geq0$\uff0c\u8bf4\u660e\u6b64\u65f6$C$\u5df2\u7ecf\u8dd1\u5230$AB$\u53f3\u4fa7\u53bb\u4e86\u3002\n\n\u4ee3\u7801\n\n```cpp\n#include <iostream> \n#include <cstdio> \n#include <cstdlib> \n#include <cstring> \n#include <cmath> \n#include <algorithm> \nusing namespace std;  \nconst int MAX_N = 205; \nconst int MAX_M = 1e4 + 5; \nstruct Point { int x, y; } ;\nPoint ans = {(int)1e9, (int)1e9}; \nPoint operator - (const Point &l, const Point &r) { return (Point){l.x - r.x, l.y - r.y}; } \nint cross(const Point &l, const Point &r) { return l.x * r.y - l.y * r.x; } \nint N, M, pa[MAX_N], rnk[MAX_N]; \nint getf(int x) { return pa[x] == x ? x : pa[x] = getf(pa[x]); } \ninline void unite(int x, int y) { \n    x = getf(x), y = getf(y); \n    if (rnk[x] == rnk[y]) pa[x] = y, ++rnk[y]; \n    else (rnk[x] < rnk[y]) ? (pa[x] = y) : (pa[y] = x); \n} \nstruct Edge { int u, v, c, t, w; } e[MAX_M]; \ninline bool operator < (const Edge &l, const Edge &r) { return l.w < r.w; }\n#define RG register \ninline Point kruskal() { \n    Point res = (Point){0, 0}; \n    int tot = 0; \n    for (RG int i = 1; i <= N; ++i) pa[i] = i, rnk[i] = 1; \n    sort(&e[1], &e[M + 1]); \n    for (RG int i = 1; i <= M; ++i) { \n        int u = getf(e[i].u), v = getf(e[i].v); \n        if (u != v) unite(u, v), res.x += e[i].c, res.y += e[i].t, ++tot;\n        if (tot == N - 1) break; \n    } \n    long long Ans = 1ll * ans.x * ans.y, now = 1ll * res.x * res.y; \n    if (Ans > now || (Ans == now && res.x < ans.x)) ans = res; \n    return res; \n} \nvoid Div(const Point &A, const Point &B) { \n    for (RG int i = 1; i <= M; ++i) e[i].w = e[i].t * (B.x - A.x) + e[i].c * (A.y - B.y); \n    Point C = kruskal(); \n    if (cross(B - A, C - A) >= 0) return ; \n    Div(A, C); Div(C, B); \n} \nint main() { \n#ifndef ONLINE_JUDGE \n    freopen(\"cpp.in\", \"r\", stdin); \n#endif\n    scanf(\"%d%d\", &N, &M); \n    for (RG int i = 1; i <= M; i++) scanf(\"%d%d%d%d\", &e[i].u, &e[i].v, &e[i].c, &e[i].t); \n    for (RG int i = 1; i <= M; i++) ++e[i].u, ++e[i].v, e[i].w = e[i].c; \n    Point A = kruskal(); \n    for (RG int i = 1; i <= M; i++) e[i].w = e[i].t; \n    Point B = kruskal(); \n    Div(A, B); \n    printf(\"%d %d\\n\", ans.x, ans.y); \n    return 0; \n} \n```",
        "postTime": 1567232719,
        "uid": 42506,
        "name": "\u4f55\u4fde\u5747",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5540 \u3010\u3010\u6a21\u677f\u3011\u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u7684\u5177\u4f53\u89e3\u6cd5\u5c31\u4e0d\u5728\u8fd9\u91cc\u91cd\u590d\u4e86\uff0c\u6211\u53ea\u5728\u8fd9\u91cc\u8bf4\u4e00\u4e2a\u88ab\u4f17\u591a\u4eba\u5ffd\u7565\u7684\u4f18\u5316\uff0c\u6210\u500d\u5237\u65b0\u6700\u4f18\u89e3\u3002\n\n\u5728\u5982\u4e0b\u7684\u5206\u6cbb\u4e2d\uff0c\u5982\u679c\u6211\u4eec\u7684\u7aef\u70b9\u662f\u4e24\u4e2a\u9ed1\u70b9\uff0c\u663e\u7136\u4e0b\u4e00\u6b65\u9012\u5f52\u5230\u7684\u70b9\u5728\u7eff\u8272\u533a\u57df\u5185\u3002\u56e0\u6b64\uff0c\u5f97\u5230\u7684\u7b54\u6848\u4e0d\u4f1a\u5c11\u4e8e\u84dd\u8272\u533a\u57df\u7684\u9762\u79ef\uff0c\u5982\u679c\u84dd\u8272\u533a\u57df\u6bd4\u5f53\u524d\u7b54\u6848\u5927\uff08\u6216\u8005\u6301\u5e73\uff09\uff0c\u90a3\u81ea\u7136\u4e0d\u7528\u7b97\u4e86\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/n2d74q3p.png)\n\n\u5c31\u662f\u8fd9\u6837\u4e00\u4e2a\u96be\u5ea6\u4e0d\u9ad8\u7684\u4f18\u5316\uff0c\u53ea\u9700\u8981\u4e00\u884c\u4f18\u5316\uff0c\u5c31\u53ef\u4ee5\u6210\u500d\u52a0\u5feb\u641c\u7d22\u6548\u7387\u3002\n\u800c\u4e14\u5728\u6b64\u7c7b\u9898\u76ee\u4e2d\u90fd\u6709\u4e0d\u4fd7\u7684\u8868\u73b0\uff0c\u4e0d\u77e5\u9053\u4e4b\u524d\u4e3a\u4ec0\u4e48\u6ca1\u6709\u7528\u7684\n\n```cpp\nvoid sov(int a1,int b1,int a2,int b2){\n    if(a1*b2>=aa*ab)return;//aa\u548cbb\u662f\u5386\u53f2\u7b54\u6848\n\tint x=b1-b2,y=a2-a1;ans(x,y);\n    //\u8fd9\u4e2a\u51fd\u6570\u6c42\u89e3\u4ee5xa+yb\u505a\u8fb9\u6743\uff0c\u5bf9\u5e94\u7684sum a\u548csum b\u8fd4\u56de\u7ed9x,y\n   if(x*y<aa*ab||(x*y==aa*ab&&x<aa)){aa=x;ab=y;}\n\tif((y-b1)*1LL*(a2-a1)-(b2-b1)*1LL*(x-a1)>=0)return;\n\tsov(a1,b1,x,y);sov(x,y,a2,b2);\n}\n```\n\u53e6\u5916\uff0c\u6700\u5c0f\u751f\u6210\u6811\u6700\u597d\u9009\u62e9 prim \u7684 $O(n^2)$\uff0c\u6548\u7387\u6bd4 $O(m\\log m)$ \u5feb\u4e0d\u5c11\uff0c\uff08\u7528\u4f18\u5148\u961f\u5217\u7ef4\u62a4\u7684 prim \u4e5f\u662f $O(m\\log m)$\n\n\u5b8c\u6574\u4ee3\u7801\u8d34[\u526a\u8d34\u677f](https://www.luogu.com.cn/paste/8xurmh00)",
        "postTime": 1661328568,
        "uid": 211538,
        "name": "Math_rad_round",
        "ccfLevel": 7,
        "title": "P5540 [BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811"
    },
    {
        "content": "\u7ed9\u5b9a $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u6bcf\u6761\u8fb9\u6709\u4e24\u4e2a\u6743\u503c $a_i,b_i$\uff0c\u6c42\u4e00\u68f5\u751f\u6210\u6811\u4f7f\u5f97\n$$\n\\left(\\sum\\limits_{e\\in T} a_e\\right)\\left(\\sum\\limits_{e\\in T} b_e\\right)\n$$\n\u6700\u5c0f\uff0c\u8f93\u51fa\u4e58\u79ef\u6700\u5c0f\u65f6\u7684 $\\sum\\limits_{e\\in T} a_e$ \u548c $\\sum\\limits_{e\\in T} b_e$\u3002$n\\leqslant 200$\uff0c$m\\leqslant 10000$\uff0c$0\\leqslant a_i,b_i\\leqslant 255$\uff0c$a_i,b_i\\in N$\u3002\n\n\n\n\u5bf9\u4e8e\u4efb\u610f\u4e00\u68f5\u751f\u6210\u6811\uff0c\u6211\u4eec\u628a\u5176\u6620\u5c04\u5230\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\u4e2d\u7684\u4e00\u4e2a\u70b9 $(\\sum a_e,\\sum b_e)$\uff0c\u90a3\u4e48\u6211\u4eec\u6240\u6c42\u5373\u4e3a $xy$ \u6700\u5c0f\u7684\u70b9\u3002\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\u5b83\u4e00\u5b9a\u5728\u6240\u6709\u70b9\u6784\u6210\u7684\u5de6\u4e0b\u51f8\u58f3\u4e0a\u3002\n\n\u6211\u4eec\u5148\u5206\u522b\u4ee4 $a_e=0$ \u548c $b_e=0$\uff0c\u8fd9\u6837\u6c42\u51fa\u7684\u662f\u53ea\u6709\u4e00\u79cd\u6743\u503c\u65f6\u7684\u6700\u5c0f\u751f\u6210\u6811\uff0c\u6545\u5176\u6a2a/\u7eb5\u5750\u6807\u4e00\u5b9a\u6700\u5c0f\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a\u70b9\u4e00\u5b9a\u5728\u51f8\u5305\u4e0a\uff08\u66f4\u7cbe\u786e\u7684\u8bf4\uff0c\u5de6\u4e0b\u51f8\u58f3\u7684\u4e24\u4e2a\u7aef\u70b9\uff09\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u8003\u8651\u6240\u6709\u8fd8\u53ef\u80fd\u5728\u51f8\u58f3\u4e0a\u7684\u70b9\uff0c\u8bbe\u521a\u624d\u786e\u5b9a\u7684\u4e24\u4e2a\u70b9\u4e3a $A,B$\uff0c\u5219\u5982\u679c\u4e00\u4e2a\u70b9 $C$ \u53ef\u80fd\u6210\u4e3a\u51f8\u58f3\u4e0a\u7684\u70b9\uff0c\u5176\u4e00\u5b9a\u5728 $AB$ \u7684\u5de6\u4e0b\u65b9\u3002\u540c\u65f6\uff0c\u5728 $AB$ \u5de6\u4e0b\u65b9\u8ddd\u79bb $AB$ \u6700\u8fdc\u7684\u70b9\u4e00\u5b9a\u5728\u51f8\u58f3\u4e0a\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u6c42\u51fa\u8fd9\u4e2a\u8ddd\u79bb $AB$ \u6700\u8fdc\u7684\u70b9 $C$\u3002\n\n![](https://s1.ax1x.com/2020/10/16/07LUEV.md.png)\n\n\u5982\u56fe\u6240\u793a\uff08\u5176\u5b9e\u6bcf\u4e2a\u70b9\u90fd\u5e94\u8be5\u662f\u6574\u70b9\uff0c\u6211\u6ca1\u753b\u597d\uff09\uff0c\u6211\u4eec\u73b0\u5728\u5df2\u77e5 $A,B$ \u7684\u5750\u6807\uff0c\u60f3\u8981\u6c42\u51fa\u8fd9\u4e2a\u70b9 $C$\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u8981\u627e\u5230\u90a3\u4e2a\u4f7f\u5f97 $\\triangle ABC$ \u7684\u9762\u79ef\u6700\u5927\u7684\u70b9\u3002\u5047\u8bbe $A,B,C$ \u7684\u5750\u6807\u5206\u522b\u4e3a $(x_A,y_A),(x_B,y_B),(x_C,y_C)$\uff0c\u5219 $S_{\\triangle ABC}=-\\dfrac{1}{2}(\\overrightarrow{AB}\\times \\overrightarrow{AC})$ \uff0c\u6545\u6211\u4eec\u9700\u8981\u8ba9 $\\overrightarrow{AB}\\times \\overrightarrow{AC}$ \u6700\u5c0f\u3002\u4e0b\u9762\u6211\u4eec\u6765\u63a8\u4e00\u4e0b\u5f0f\u5b50\uff1a\n$$\n\\begin{aligned}\n&\\overrightarrow{AB}\\times \\overrightarrow{AC}\\\\\n=&(x_B-x_A)(y_C-y_A)-(x_C-x_A)(y_B-y_A)\\\\\n=&x_By_C-x_By_A-x_Ay_C+x_Ay_A-x_Cy_B+x_Cy_A+x_Ay_B-x_Ay_A\\\\\n=&(x_B-x_A)y_C+(y_A-y_B)x_C-x_By_A+x_Ay_B\n\\end{aligned}\n$$\n\u540e\u4e24\u9879\u662f\u5e38\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u8ba9 $(x_B-x_A)y_C+(y_A-y_B)x_C$ \u6700\u5c0f\uff0c\u53ea\u9700\u8981\u5bf9\u6bcf\u6761\u8fb9 $e$\uff0c\u5c06 $v_e$ \u8bbe\u4e3a $(y_A-y_B)a_e+(x_B-x_A)b_e$\uff0c\u7136\u540e\u6c42\u6700\u5c0f\u751f\u6210\u6811\u5f97\u5230\u7684\u90a3\u68f5\u6811\u5373\u4e3a\u70b9 $C$\u3002\u8fd9\u91cc\u53ef\u80fd\u6709\u591a\u4e2a\u70b9 $C$ \u5728\u540c\u4e00\u6761\u76f4\u7ebf\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u5e76\u4e0d\u91cd\u8981\u3002\n\n\u7136\u540e\uff0c\u6211\u4eec\u770b\u521a\u624d\u90a3\u5f20\u56fe\uff0c$D,E$ \u4e5f\u662f\u51f8\u58f3\u4e0a\u7684\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5bf9 $AC,BC$ \u9012\u5f52\u505a\u4e0b\u53bb\uff0c\u76f4\u5230\u5f53\u524d\u76f4\u7ebf\u5de6\u4e0b\u65b9\u6ca1\u6709\u70b9\uff0c\u4e5f\u5c31\u662f\u53c9\u79ef\u5927\u4e8e\u7b49\u4e8e $0$\uff0c\u6700\u540e\u53d6\u6240\u6709\u70b9\u7684\u6700\u5c0f\u503c\u3002\n\n\u8003\u8651\u5206\u6790\u590d\u6742\u5ea6\uff0c\u521a\u624d\u90a3\u4e2a\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u53eb\u505a QuickHull \u7684\u6c42\u51f8\u5305\u7b97\u6cd5\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u6211\u4eec\u4e00\u5171\u505a\u4e86 $O(\u51f8\u58f3\u4e0a\u7684\u70b9\u6570)$ \u6b21\u6700\u5c0f\u751f\u6210\u6811\u3002\u7531\u4e8e\u6240\u6709\u751f\u6210\u6811\u5bf9\u5e94\u7684\u70b9\u90fd\u662f\u6574\u70b9\uff0c\u800c\u4e14\u70b9\u6570\u8fdc\u8fdc\u9ad8\u4e8e\u503c\u57df\u8303\u56f4 $na$\uff0c\u636e EI \u8bf4\u6b64\u65f6\u51f8\u58f3\u4e0a\u7684\u70b9\u6570\u6700\u5927\u662f $O((na)^{\\frac{2}{3}})$ \u7684\uff0c\u6240\u4ee5\u603b\u590d\u6742\u5ea6\u4e3a $O(n^{\\frac{8}{3}}a^{\\frac{2}{3}})$\uff08prim \u5b9e\u73b0 MST\uff09\u3002\n\n\u4ee3\u7801\uff08\u6bd4\u8f83\u61d2\u6240\u4ee5\u5199\u4e86 kruskal \u591a\u4e00\u4e2a $\\log$\uff09\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nint n,m,fa[205];\nll ans=3e9,ansx,ansy;\nstruct edge{int s,t,a,b,v;}e[10005];\nbool cmp(edge x,edge y){return x.v<y.v;}\nint find(int x){return fa[x]==x?x:fa[x]=find(fa[x]);}\nvoid mst(ll &rx,ll &ry)\n{\n    rx=ry=0;\n    for(int i=1;i<=n;i++)fa[i]=i;\n    sort(e+1,e+m+1,cmp);\n    for(int i=1;i<=m;i++)\n    {\n        int fx=find(e[i].s),fy=find(e[i].t);\n        if(fx==fy)continue;\n        rx+=e[i].a,ry+=e[i].b,fa[fx]=fy;\n    }\n    if(rx*ry<ans)ans=rx*ry,ansx=rx,ansy=ry;\n}\nvoid solve(ll ax,ll ay,ll bx,ll by)\n{\n    for(int i=1;i<=m;i++)e[i].v=(ay-by)*e[i].a+(bx-ax)*e[i].b;\n    ll rx,ry;\n    mst(rx,ry);\n    if((ay-by)*rx+(bx-ax)*ry-bx*ay+ax*by<0)solve(ax,ay,rx,ry),solve(rx,ry,bx,by);\n}\nint main()\n{\n    ll ax,ay,bx,by;\n    scanf(\"%d%d\",&n,&m);\n    for(int i=1;i<=m;i++)scanf(\"%d%d%d%d\",&e[i].s,&e[i].t,&e[i].a,&e[i].b),e[i].s++,e[i].t++,e[i].v=e[i].a;\n    mst(ax,ay);\n    for(int i=1;i<=m;i++)e[i].v=e[i].b;\n    mst(bx,by);\n    solve(ax,ay,bx,by);\n    printf(\"%lld %lld\",ansx,ansy);\n    return 0;\n}\n```\n\n",
        "postTime": 1602813728,
        "uid": 96912,
        "name": "AzusaCat",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P5540 \u3010[BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811\u3011"
    },
    {
        "content": "\u7b97\u662f\u4e2a\u5957\u8def\u5427\u3002\n\n\u628a\u6700\u5c0f\u751f\u6210\u6811\u6362\u6210\u9009\u6570\u4f7f\u5f97\u672c\u8d28\u4e0d\u540c\u5b50\u96c6\u5f02\u6216\u6570\u91cf\u6700\u591a\u5c31\u6210\u4e86\u6628\u5929\u7684\u6a21\u62df\u8d5b T3\u3002~~\u5199\u8d77\u6765\u9664\u4e86\u628a Kruskal \u6362\u6210\u7ebf\u6027\u57fa\u5916\u5c31\u6ca1\u6709\u4efb\u4f55\u533a\u522b\uff08~~\n\n------------\n\n\u524d\u7f6e\u829d\u58eb\uff1a[\u6700\u5c0f\u751f\u6210\u6811](https://oi-wiki.org/graph/mst/)\u3001[\u51f8\u5305](https://oi-wiki.org/geometry/convex-hull/)\n\n\u8003\u8651\u628a\u6240\u6709\u5408\u6cd5\u65b9\u6848 $(\\sum a, \\sum b)$\uff0c\u6211\u4eec\u5c06\u5176\u5f53\u6210\u4e00\u4e2a\u5b9e\u6570\u5bf9\u653e\u5728\u4e00\u4e2a\u4e8c\u7ef4\u5e73\u9762\u4e0a\u3002\n\n\u90a3\u4e48\u6211\u4eec\u6240\u6c42\u7684\u7b54\u6848\u4e00\u5b9a\u5728\u8fd9\u4e9b\u70b9\u56f4\u6210\u7684**\u4e0b\u51f8\u5305\u4e0a**\u3002\n\n\u9996\u5148\u6211\u4eec\u4e0d\u96be\u6c42\u51fa\u79bb $x, y$ \u8f74\u6700\u8fd1\u7684\u4e24\u4e2a\u70b9\u2014\u2014\u5bf9 $a, b$ \u4e24\u7ef4\u5206\u522b Kruskal \u5373\u53ef\u3002\n\n\u4e0b\u9762\u8bbe\u5f53\u524d\u8ba8\u8bba\u7684\u4e24\u4e2a\u70b9\u4e3a $P, Q$\uff0c\u5176\u4e2d $x_P \\leq x_Q, y_P \\geq y_Q$\u3002\n\n\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u6c42\u4e00\u4e2a\u70b9 $R$\uff0c\u4f7f\u5f97 $x_P \\leq x_R \\leq x_Q, y_P \\geq y_R \\geq y_Q$ \u4e14 $R$ \u5230 $PQ$ \u7684\u8ddd\u79bb\u6700\u5927\u3002\n\n\u663e\u7136\u8fd9\u5c31\u662f\u8981\u6c42 $S_{\\Delta PQR}$ \u6700\u5927\uff0c\u5373\u6c42 $\\vec{PQ} \\times \\vec{PR}$ \u6700\u5c0f\u3002\n\n\u5bf9\u8be5\u5f0f\u5c55\u5f00\uff0c\u5f97\u5230\uff1a$x_R(y_P - y_Q) + y_R(x_Q - x_P) + (x_P y_Q - x_Q y_P)$\u3002\n\n\u540e\u9762\u90a3\u5768\u662f\u5e38\u6570\uff0c\u6211\u4eec\u53ea\u5173\u5fc3\u524d\u9762\u90a3\u90e8\u5206\u3002\n\n\u4e0d\u96be\u53d1\u73b0\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u5206\u914d\u5230\u6bcf\u6761\u8fb9\u4e2d\u2014\u2014\u5373\u4ee4\u8fb9\u6743\u4e3a $a(y_P - y_Q) + b(x_Q - x_P)$\uff0c\u7136\u540e\u6c42\u6700\u5c0f\u751f\u6210\u6811\u5373\u53ef\u3002\n\n\u73b0\u5728\u6211\u4eec\u5f97\u5230\u4e86\u4e24\u4e2a\u65b0\u7684\u5b50\u95ee\u9898\uff1a$P, R$ \u548c $R, Q$\u3002\n\n\u5206\u6cbb\u4e0b\u53bb\u5e76\u8bb0\u5f55\u4e2d\u9014\u5f97\u5230\u7684\u6240\u6709\u7b54\u6848\u7684\u6700\u5c0f\u503c\u5373\u53ef\u3002\u5f53 $R = P$ \u6216 $R = Q$ \u505c\u6b62\u5206\u6cbb\u3002\n\n\u73b0\u5728\u6211\u4eec\u6765\u8003\u8651\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u6211\u4eec\u4f1a\u5bf9\u4e0b\u51f8\u5305\u4e0a\u7684\u6bcf\u4e2a\u70b9\u8fdb\u884c\u4e00\u6b21 Kruskal\uff0c\u800c\uff08\u636e\u8bf4\uff09\u4e0b\u51f8\u5305\u4e0a\u70b9\u6570\u81f3\u591a\u4e3a $O(\\sqrt{w})$\uff0c\u5176\u4e2d $w = \\max(\\sum a_i, \\sum b_i)$\u3002\u4e8e\u662f\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\sqrt{w} (n + m \\log m))$\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <algorithm>\n\nusing namespace std;\n\ntypedef long long ll;\n\ntypedef struct {\n\tint start;\n\tint end;\n\tint dis1;\n\tint dis2;\n\tint dis3;\n} Edge;\n\nint ansx = 0x7fffffff, ansy = 0x7fffffff;\nint u[10007], v[10007], a[10007], b[10007], root[207];\nEdge edge[10007];\n\nbool operator <(const Edge a, const Edge b){\n\tif (a.dis3 != b.dis3) return a.dis3 < b.dis3;\n\treturn a.dis1 < b.dis1;\n}\n\ninline void init(int n){\n\tfor (register int i = 1; i <= n; i++){\n\t\troot[i] = i;\n\t}\n}\n\nint get_root(int x){\n\tif (root[x] == x) return x;\n\treturn root[x] = get_root(root[x]);\n}\n\ninline void update(pair<int, int> pr){\n\tll x = (ll)ansx * ansy, y = (ll)pr.first * pr.second;\n\tif (x > y || (x == y && ansx > pr.first)){\n\t\tansx = pr.first;\n\t\tansy = pr.second;\n\t}\n}\n\ninline pair<int, int> kruskal(int n, int m){\n\tint dot_cnt = 1;\n\tpair<int, int> ans(0, 0);\n\tfor (register int i = 1; i <= m; i++){\n\t\tint x_root = get_root(edge[i].start), y_root = get_root(edge[i].end);\n\t\tif (x_root != y_root){\n\t\t\troot[x_root] = y_root;\n\t\t\tans.first += edge[i].dis1;\n\t\t\tans.second += edge[i].dis2;\n\t\t\tif (++dot_cnt == n) break;\n\t\t}\n\t}\n\tupdate(ans);\n\treturn ans;\n}\n\ninline void solve(int n, int m, pair<int, int> pr1, pair<int, int> pr2){\n\tint t1 = pr1.second - pr2.second, t2 = pr2.first - pr1.first;\n\tpair<int, int> pr3;\n\tinit(n);\n\tfor (register int i = 1; i <= m; i++){\n\t\tedge[i].start = u[i];\n\t\tedge[i].end = v[i];\n\t\tedge[i].dis1 = a[i];\n\t\tedge[i].dis2 = b[i];\n\t\tedge[i].dis3 = t1 * a[i] + t2 * b[i];\n\t}\n\tsort(edge + 1, edge + m + 1);\n\tpr3 = kruskal(n, m);\n\tif (pr3 != pr1 && pr3 != pr2){\n\t\tsolve(n, m, pr1, pr3);\n\t\tsolve(n, m, pr3, pr2);\n\t}\n}\n\nint main(){\n\tint n, m;\n\tpair<int, int> pr1, pr2;\n\tcin >> n >> m;\n\tfor (register int i = 1; i <= m; i++){\n\t\tcin >> u[i] >> v[i] >> a[i] >> b[i];\n\t\tu[i]++;\n\t\tv[i]++;\n\t}\n\tinit(n);\n\tfor (register int i = 1; i <= m; i++){\n\t\tedge[i].start = u[i];\n\t\tedge[i].end = v[i];\n\t\tedge[i].dis1 = edge[i].dis3 = a[i];\n\t\tedge[i].dis2 = b[i];\n\t}\n\tsort(edge + 1, edge + m + 1);\n\tpr1 = kruskal(n, m);\n\tinit(n);\n\tfor (register int i = 1; i <= m; i++){\n\t\tedge[i].start = u[i];\n\t\tedge[i].end = v[i];\n\t\tedge[i].dis1 = a[i];\n\t\tedge[i].dis2 = edge[i].dis3 = b[i];\n\t}\n\tsort(edge + 1, edge + m + 1);\n\tpr2 = kruskal(n, m);\n\tsolve(n, m, pr1, pr2);\n\tcout << ansx << \" \" << ansy;\n\treturn 0;\n}\n```",
        "postTime": 1668944398,
        "uid": 201007,
        "name": "Leasier",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 P5540 \u3010[BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811\u3011"
    },
    {
        "content": "\u795e\u4ed9\u9898\uff08\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u751f\u6210\u6811\uff0c\u6211\u4eec\u4ee4 $\\sum a=x$\uff0c$\\sum b=y$\uff0c\u5e76\u628a $(x,y)$ \u4f5c\u4e3a\u5750\u6807\u653e\u8fdb\u5750\u6807\u7cfb\u91cc\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f $x\\cdot y$ \u6700\u5c0f\u7684\u70b9\u503c\n\n\u8003\u8651\u5206\u6cbb\n\n\u5047\u8bbe\u6211\u4eec\u5206\u6cbb\u5230\u4e86\u5de6\u53f3\u7aef\u70b9 $A,B$\uff0c\u6211\u4eec\u8981\u5728\u6a2a\u7eb5\u5750\u6807\u90fd\u5728 $A,B$ \u4e4b\u95f4\u5c3d\u53ef\u80fd\u63a5\u8fd1\u5750\u6807\u8f74\u7684\u70b9\n\n\u8bb0 $A(x_a,y_a)$\uff0c$B(x_b,y_b)$\uff0c\u8bbe\u8981\u6c42\u7684\u70b9 $Q(x_0,y_0)$\uff0c\u4f7f\u5f97 $S_{\\Delta ABQ}$ \u6700\u5927\n\n\u5219\n$$\n\\begin{aligned}\nS_{\\Delta ABQ}&=-\\frac 1 2 \\overrightarrow {AQ}\\times \\overrightarrow{AB}\\cr\n&=-\\frac 1 2[(x_0-x_a)(y_b-y_a)-(y_0-y_a)(x_b-x_a)]\\cr\n&=-\\frac 1 2(x_0y_b-x_0y_a-x_ay_b+x_ay_a-y_0x_b+y_0x_a+y_ax_b-y_ax_a)\n\\end{aligned}\n$$\n\n\u628a\u5e38\u91cf\u53bb\u6389\uff0c\u53ea\u8003\u8651\u5269\u4e0b\u7684 $x_0(y_b-y_a)-y_0(x_b-x_a)$\uff0c\u5373\u8981\u6c42 $x_0(y_b-y_a)-y_0(x_b-x_a)$ \u6700\u5c0f\n\n\u628a $x_0$ \u66ff\u6362\u4e3a $\\sum a$\uff0c\u628a $y_0$ \u66ff\u6362\u4e3a $\\sum b$\uff0c\u4e8e\u662f\u628a\u8fb9\u6743\u66ff\u6362\u6210 $a(y_b-y_a)-b(x_b-x_a)$ \u8dd1 kruskal \u5373\u53ef\n\n\u8dd1\u5b8c\u9700\u8981\u9a8c\u8bc1 $Q$ \u662f\u5426\u5728\u76f4\u7ebf $AB$ \u4e0b\u4fa7\uff0c\u5728\u7684\u8bdd\u4ee5 $A,Q$\uff0c$Q,B$ \u4e3a\u5de6\u53f3\u7aef\u70b9\u7ee7\u7eed\u5206\u6cbb\uff0c\u4e0d\u5728\u7684\u8bdd\u5c31\u4e0d\u7ee7\u7eed\u5206\u6cbb\u4e86\n\n\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u4e3a\u4ec0\u4e48\u627e\u5230 $S_{\\Delta ABQ}$ \u6700\u5927\u7684 $Q$ \u4e4b\u540e\u4e0d\u76f4\u63a5\u4ee5 $Q$ \u4e3a\u7b54\u6848\u800c\u8981\u5206\u6cbb\u9012\u5f52\u5462\uff1f\n\n\u8fd9\u91cc\u6709\u4e00\u5f20\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/o57dqizf.png)\n\n\u56fe\u4e2d $S_{\\Delta ABQ}>S_{\\Delta ABQ'}$\uff0c\u4f46\u662f $x_Qy_Q=2.25>1.5=x_{Q'}y_{Q'}$\n\n\u4e5f\u5c31\u662f\u8bf4 $Q'$ \u6bd4 $Q$ \u66f4\u4f18\uff0c\u4e8e\u662f\u4e0d\u80fd\u76f4\u63a5\u5f97\u5230\u7b54\u6848\n\ncode:\n```cpp\n#include<bits/stdc++.h>\n#define MAXN 10010\n#define int long long\nconst int inf=1e9;\nusing namespace std;\nint n,m;\nstruct Node{int u,v,a,b,val;}Edge[MAXN];\nbool cmp(Node x,Node y){return x.val<y.val;}\nstruct vect{\n\tint x,y;\n\tvect(int xx=0,int yy=0){x=xx;y=yy;}\n}ans;\nint operator *(vect a,vect b){return a.x*b.y-a.y*b.x;}\nvect operator -(vect a,vect b){return vect(a.x-b.x,a.y-b.y);}\nbool operator < (vect a,vect b){\n\tif(a.x*a.y!=b.x*b.y)return a.x*a.y<b.x*b.y;\n\treturn a.x<b.x;\n}\nint f[MAXN];\nint get(int x){return x==f[x]?x:f[x]=get(f[x]);}\nvect kruskal(){\n\tsort(Edge+1,Edge+m+1,cmp);\n\tfor(int i=1;i<=n;i++)f[i]=i;\n\tvect ret;\n\tfor(int i=1;i<=m;i++){\n\t\tint u=Edge[i].u,v=Edge[i].v;\n\t\tint a=Edge[i].a,b=Edge[i].b;\n\t\tu=get(u);v=get(v);\n\t\tif(u==v)continue;\n\t\tf[u]=v;ret.x+=a;ret.y+=b;\n\t}\n\tif(ret<ans)ans=ret;\n\treturn ret;\n}\nvoid solve(vect l,vect r){\n\tfor(int i=1;i<=m;i++)\n\t\tEdge[i].val=(r.x-l.x)*Edge[i].b+(l.y-r.y)*Edge[i].a;\n\tvect mid=kruskal();\n\tif((r-l)*(mid-l)>=0)return;\n\tsolve(l,mid);solve(mid,r);\n}\nsigned main(){\n\tscanf(\"%lld%lld\",&n,&m);\n\tfor(int i=1;i<=m;i++){\n\t\tint u,v,a,b;scanf(\"%lld%lld%lld%lld\",&u,&v,&a,&b);\n\t\tu++,v++;Edge[i]=(Node){u,v,a,b,0};\n\t}ans.x=inf;ans.y=inf;\n\tfor(int i=1;i<=m;i++)Edge[i].val=Edge[i].a;\n\tvect L=kruskal();\n\tfor(int i=1;i<=m;i++)Edge[i].val=Edge[i].b;\n\tvect R=kruskal();solve(L,R);//L,R\u4e3a\u5168a\u548c\u5168b\uff0c\u4f5c\u4e3a\u9012\u5f52\u521d\u59cb\u503c\n\tprintf(\"%lld %lld\",ans.x,ans.y);\n\treturn 0;\n}\n```",
        "postTime": 1616078939,
        "uid": 65681,
        "name": "UltiMadow",
        "ccfLevel": 7,
        "title": "[\u9898\u89e3] P5540 [BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811"
    },
    {
        "content": "\u9009\u81ea [\u6d45\u8c08\u4e00\u7c7b\u6700\u5c0f\u4e58\u79ef\u95ee\u9898](https://www.luogu.com.cn/blog/shenxinge/qian-tan-yi-lei-zui-xiao-sheng-ji-wen-ti)\n\n>\u9898\u76ee\u63cf\u8ff0\n\n>\u7ed9\u51fa\u4e00\u4e2a $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u7b2c $i$ \u6761\u8fb9\u6709\u4e24\u4e2a\u6743\u503c $a_i$ \u548c $b_i$ \u3002\u6c42\u8be5\u56fe\u7684\u4e00\u68f5\u751f\u6210\u6811 $T$ \uff0c\u4f7f\u5f97\n$$\\left(\\sum_{e\\in T}a_e\\right)\\times\\left(\\sum_{e\\in T}b_e\\right)$$\n>\u6700\u5c0f\u3002\n\n\u4ee4 $x=\\sum_{e\\in T}a_e$ , $y=\\sum_{e\\in T}$ , \u90a3\u4e48\u6bcf\u4e00\u68f5\u751f\u6210\u6811\u5bf9\u5e94\u4e8c\u7ef4\u5e73\u9762\u4e0a\u7684\u70b9 $x,y$ \u3002\n\n#### \u51f8\u6027\u8bc1\u660e\n\n\u6211\u4eec\u8003\u8651\u7528\u66f2\u7ebf $k=xy$ \u6765\u622a\u8fd9\u4e9b\u70b9 , \u4e8e\u662f\u9700\u8981\u627e\u5230 $k$ \u6700\u5c0f\u7684\u66f2\u7ebf\u4f7f\u5f97\u6709\u70b9\u5728\u8fd9\u6761\u66f2\u7ebf\u4e0a , \u5bb9\u6613\u53d1\u73b0\u8fd9\u4e2a\u70b9\u80af\u5b9a\u5728\u4e0b\u51f8\u58f3\u4e0a , \u8003\u8651\u8bc1\u660e \u3002\n\n\u6211\u4eec\u8bbe\u51f8\u5305\u4e0a\u7684\u70b9 $(a,b)$ , $(a+c,b+d)$ , \u6709 $c>0,d<0$ \u3002\n\n\u90a3\u4e48\u6211\u4eec\u5047\u5b9a\u4e00\u4e2a\u51f8\u5305\u5185\u7684\u70b9 $(a+ct,b+dt)$ , \u6709 $0 \\leq t \\leq 1$ \u3002\n\n\u90a3\u4e48\u8fd9\u4e2a\u70b9\u7684\u4ee3\u4ef7\u662f :\n\n$$(a+ct)(b+dt)=cdt^2+(ad+bc)t+ab$$\n\n\u7531\u4e8e $cd<0$ , \u5173\u4e8e $t$ \u7684\u4ee3\u4ef7\u51fd\u6570\u662f\u4e00\u4e2a\u5f00\u53e3\u5411\u4e0b\u7684\u4e8c\u6b21\u51fd\u6570 , \u90a3\u4e48\u8fd9\u4e2a\u6700\u5c0f\u503c\u4e00\u5b9a\u5b58\u5728\u4e8e\u8fb9\u754c\u4e5f\u5c31\u662f $t=0$ \u6216\u8005\u662f $t=1$ \u7684\u60c5\u51b5 , \u7531\u6b64\u5f97\u8bc1\u51f8\u6027\u3002\n\n#### quick-convex \u6784\u9020\n\n\u6709\u8be5\u7ed3\u8bba\u4ee5\u540e\u53ef\u4ee5\u627e\u5230 $x$ \u6700\u5927\u7684\u70b9\u548c $y$ \u6700\u5927\u7684\u70b9 , \u4f7f\u7528\u4e00\u6b65 $quick-convex$ \u7b97\u6cd5\u5373\u53ef\u5b8c\u6210 \u3002\n\n\u63a5\u4e0b\u6765\u5177\u4f53\u8bb2\u8ff0\u5982\u4f55\u4f7f\u7528 `quick-convex` \u7b97\u6cd5 \u3002\n\n\u5bf9\u4e8e\u76ee\u524d\u5df2\u6709\u70b9 $A$ \u548c $B$ \uff0c \u76ee\u7684\u662f\u8981\u6c42 $AB$ \u7ebf\u6bb5\u6700\u4e0b\u65b9\u7684\u70b9 $C$ \u3002\u5c06\u5176\u5206\u4e3a $AC$ \u548c $CB$ \u4e24\u6bb5 \uff0c \u7136\u540e\u63a5\u7740\u5206\u6cbb\u4e0b\u53bb \u3002\n\n\u8003\u8651\u5982\u4f55\u627e\u5230\u6700\u4e0b\u65b9\u7684\u70b9 $C$ \uff0c \u53ef\u4ee5\u7528\u9762\u79ef\u8003\u8651 \u3002 \u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u4e2a\u70b9 $C$ \u4f7f\u5f97 $S_{\\Delta ABC}$ \u6700\u5c0f \u3002\n\n\u7528\u5411\u91cf\u8868\u793a $\\vec{AB} , \\vec{AC}$ , \u9762\u79ef\u662f $S=-\\frac{\\vec{AB}\\times \\vec{AC}}{2}$ , \u8003\u8651\u6253\u5f00\u8fd9\u4e2a\u67ff\u5b50 \u3002\n\n$${\\vec{AB}} \\times {\\vec{AC}}={(x_B-x_A)(y_C-y_A)-(x_C-x_A)(y_B-y_A)}$$\n\n$$=(x_B-x_A)y_C+(y_A-y_B)x_C-(x_B-x_A)y_A+(y_B-y_A)x_A$$\n\n\u53d1\u73b0\u540e\u9762\u4e24\u9879\u662f\u5e38\u6570 , \u524d\u9762\u4e24\u9879\u4e0e $C$ \u6709\u5173 \u3002 \n\n\u8003\u8651\u5c06\u8fb9\u6743\u6539\u4e3a $(x_B-x_A)b_i + (y_A-y_B)a_i$ \u5373\u53ef\u5f97\u5230 $C$ \u7684\u5750\u6807 \u3002\n\n#### \u53e6\u4e00\u79cd\u8f6c\u5316\n\n\u770b\u5230\u8fd9\u4e2a\u8fb9\u6743 \uff0c \u6211\u4eec\u5176\u5b9e\u53d1\u73b0\u8fd9\u662f\u4e00\u4e2a\u6700\u5c0f\u5316\u548c $AB$ \u540c\u659c\u7387\u5728 $y$ \u8f74\u622a\u8ddd\u6700\u5c0f\u76f4\u7ebf\u7684\u95ee\u9898 \u3002 \u4ee4\u76f4\u7ebf $AB$ \u659c\u7387\u4e3a $-k$ \uff0c \u9700\u8981\u6700\u5c0f\u5316 $kx+y$ \u7684\u503c \uff0c \u628a\u6bcf\u6761\u8fb9\u6743\u66ff\u6362\u6210 $ka_i+b_i$ \u53ef\u4ee5\u5f97\u5230\u548c\u4e0a\u9762\u4e00\u6837\u7684\u67ff\u5b50\u3002\n\n#### \u5173\u952e\u4ee3\u7801\n\n```cpp\ninline void solve(Point A,Point B)\n{\n\tFor(i,1,m)\n\t\te[i].w=e[i].b*(B.x-A.x)+e[i].a*(A.y-B.y);\n\tPoint C=kruskal();\n\tif(cross((B-A),(C-A))>=0) return;\n\tsolve(A,C),solve(C,B);\n}\n```\n\n\n#### \u65f6\u95f4\u590d\u6742\u5ea6\u5206\u6790\n\n\u771f\u7684\u6ca1\u6709\u8425\u517b \uff0c \u6ca1\u6709\u5fc5\u8981\u53bb\u770b\u3002\n\n\u53e6\u5916\u8fd9\u79cd\u505a\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5176\u5b9e\u4e00\u76f4\u662f\u4e2a\u8ff7 \uff0c \u7406\u8bba\u5206\u6790\u6bd4\u8f83\u56f0\u96be\u3002\n\n\u63a5\u4e0b\u6765\u5c06\u8bc1\u660e $n$ \u4e2a\u70b9\u51f8\u5305\u4e0a\u7684\u70b9\u662f $R^{\\frac{2}{3}}$ \u7ea7\u522b\u7684 , \u5176\u4e2d $R$ \u4e3a\u70b9\u7684\u5750\u6807\u8303\u56f4 , \u662f $[0-R]$ \u7684 , \u672c\u9898\u4e2d $R=max(suma,sumb)$\u3002\n\n\u8003\u8651\u6211\u4eec\u6784\u9020\u51fa\u7684\u51f8\u58f3\u5927\u5c0f\u4e3a $T$ , \u6211\u4eec\u5f97\u5230\u7684\u51f8\u58f3\u70b9\u96c6\u4e3a $V$ , \u8fd9\u4e2a\u51f8\u58f3\u662f\u4e00\u4e2a\u5de6\u4e0b\u51f8\u58f3 \u3002 \u8003\u8651\u7ffb\u8f6c\u51f8\u58f3\u53d8\u4e3a\u53f3\u4e0b\u51f8\u58f3 , \u5f97\u5230\u7684\u70b9\u96c6\u6309\u6a2a\u5750\u6807\u8fdb\u884c\u6392\u5e8f\u5f97\u5230 $(x_i,y_i)$ \uff0c\u7531\u4e8e\u662f\u53f3\u4e0b\u4e0b\u51f8\u58f3 , \u659c\u7387\u4ece0\u5f00\u59cb\u4f9d\u6b21\u9012\u589e \uff0c \u800c\u4e14\u659c\u7387\u4e24\u4e24\u4e0d\u76f8\u7b49 \u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u8bbe $v_iv_{i+1}$ \u7684\u659c\u7387\u4e3a $\\frac{p}{q}$ , $p,q$ \u4e3a\u4e92\u8d28\u7684\u6b63\u6574\u6570 \u3002 \u53ef\u4ee5\u5f97\u5230 :\n\n$\\frac{y_{i+1}-y_i}{x_{i+1}-x_i} = \\frac{p}{q}$ , \u663e\u7136\u662f\u6709 $y_{i+1}-y_i=p \\times t,x_{i+1}-x_i=q \\times t$ , $t \\geq 1$ \u3002\n\n\u90a3\u4e48\u5c31\u6709 $(x_{i+1}+y_{i+1})-(x_i+y_i)=(p+q) \\times t \\geq p+q$\n\n\u6240\u6709\u67ff\u5b50\u76f8\u52a0 \uff0c \u90a3\u4e48\u5c31\u6709 $x_T+y_T-(x_1+y_1) \\geq \\sum_{i=1}^{T-1} p_i+q_i$ \u3002\n\n\u5bb9\u6613\u5f97\u77e5 \n\n$$x_T+y_T-(x_1+y_1) \\leq R+R$$ \n\n$$sum_{i=1}^{T-1} p_i+q_i \\leq 2 \\times R$$\n\n\u4e8e\u662f\u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684 $T'$ \u4f7f\u5f97\u5bf9\u4e8e\u5206\u5b50\u5206\u6bcd\u548c\u524d $T'$ \u5c0f\u7684\u5206\u5b50\u5206\u6bcd\u5747\u4e3a\u6b63\u6574\u6570\u7684\u65e2\u7ea6\u5206\u6570 (\u6ce8\u610f\u4e0d\u662f\u65e2\u7ea6\u771f\u5206\u6570) , \u5176\u5206\u5b50\u5206\u6bcd\u7684\u548c\u5927\u4e8e $2 \\times R$ , \u8fd9\u4e2a $T'$ \u5c31\u662f $T$ \u7684\u4e0a\u754c\u3002\u6211\u4eec\u5728\u4e0b\u6587\u6240\u53d9\u8ff0\u7684 $T$ \u7684\u610f\u4e49\u5373\u4e3a $T'$ \u4e5f\u5c31\u662f $T$ \u7684\u4e0a\u754c\u3002\n\n\u5206\u5b50\u5206\u6bcd\u5747\u4e3a\u65e2\u7ea6\u5206\u6570\u7684\u524d $i$ \u5c0f\u5206\u5b50\u5206\u6bcd\u548c\u7684\u5927\u5c0f\u8bb0\u4e3a $F_i$ ,\u5b9e\u8d28\u4e0a\u662f\u6b63\u6574\u6570\u5230\u6b63\u6709\u7406\u6570\u7684\u6b63\u5219\u53cc\u5c04\u4e2d\u7684\u5206\u6bcd $\\leq 1$ \u7684\u60c5\u51b5 [A038567](https://oeis.org/A038567) \uff0c\u6784\u9020\u5e8f\u5217 $P$ \u4f7f\u5f97\u6bcf\u4e2a\u6570 $i$ \u90fd\u6070\u597d\u5728 $P$ \u4e2d\u8fde\u7eed\u51fa\u73b0 $i$ \u6b21 , \u4e5f\u5c31\u662f\u6570\u5217 [A002024](https://oeis.org/A002024) , \u4ee4\u5176\u524d $i$ \u9879\u7684\u548c\u4e3a $G_i$ \u3002\u8003\u8651\u5230\u5206\u5b50\u5206\u6bcd\u548c\u4e3a $i$ \u4e14\u5206\u5b50\u5206\u6bcd\u90fd\u4e3a\u6b63\u6574\u6570\u7684\u65e2\u7ea6\u5206\u6570\u4e0d\u4f1a\u8d85\u8fc7 $i$ \u4e2a , \u6240\u4ee5\u4e00\u5b9a\u6709 $F(i) \\geq G(i)$ , \u8981\u8bc1 $F(T) \\geq 2 \\times R $ \u53ea\u9700\u8981\u8bc1\u660e $G(T) \\geq 2 \\times R $ \u5373\u53ef \u3002\n\n\u8003\u8651\u5982\u4f55\u5bf9\u4e8e $G(T)$ \u6c42\u548c , \u6211\u4eec\u8003\u8651 $P$ \u7684\u8be6\u5c3d\u5b9a\u4e49\u662f\u5bf9\u4e8e $i \\geq 1$ , $\\frac{i\\times (i-1)}{2} < j \\le \\frac{i \\times (i+1)}{2}$ , \u6709 $P_i=j$ \u3002\n\n\u4e8e\u662f\u5bf9\u4e8e\u4e0b\u6807\u4e3a $\\frac{i \\times (i+1)}{2}$ \u7684 $G(\\frac{i \\times (i+1)}{2})=\\sum_{j=1}^{i} i^2$\n\n\u8003\u8651\u4ee4 $t=\\lfloor \\sqrt{T} \\rfloor$ \u5bb9\u6613\u5f97\u5230 $G(T) \\geq G(\\frac{t \\times (t+1)}{2}) = \\sum_{i=1}^{t} i^2$\n\n\u4f17\u6240\u5468\u77e5\u5e73\u65b9\u548c\u7b49\u4e8e :\n\n$$\\sum_{i=1}^{t} i^2=\\frac{t(t+1)(2t+1)}{6}$$\n\n\u4e5f\u5c31\u662f:\n\n$$\\frac{t(t+1)(2t+1)}{6} \\geq 2 \\times R$$\n\n\u7684\u6700\u5c0f\u7684 $T$ , \u89e3\u51fa\u6765\u53ef\u4ee5\u8fd1\u4f3c\u8ba4\u4e3a\u662f $R^{\\frac{2}{3}}$ \u7ea7\u522b\u7684 (\u4e0d\u4f1a\u771f\u7684\u6709\u4eba\u53bb\u89e3\u5427\uff09 \uff0c\u7531\u4e8e\u653e\u7f29\u7684\u95ee\u9898\u5176\u5b9e\u79bb\u4e0a\u754c\u6709\u4e00\u5b9a\u7684\u8ddd\u79bb , \u5176\u5b9e\u8dd1\u8d77\u6765\u6548\u7387\u662f\u5f88\u9ad8\u7684 \u3002 \n\n\u5176\u5b9e\u5bf9\u4e8e\u8fd9\u4e2a\u95ee\u9898\u6211\u4eec\u53ea\u53d6\u4e86\u5de6\u4e0b\u51f8\u58f3 , \u5bb9\u6613\u5f97\u77e5\u5bf9\u4e8e\u4e00\u4e2a\u51f8\u5305\u6765\u8bf4 \uff0c \u5b83\u7684\u5927\u5c0f\u662f $4T$ \uff0c \u5176\u5b9e\u66f4\u63a5\u8fd1\u4e8e $R^{\\frac{2}{3}}$ \u3002\n\n\u56de\u5230\u672c\u9898 , \u8fd9\u6837\u7684\u8bdd\u51f8\u5305\u4e0a\u7684\u70b9\u7684\u4e2a\u6570\u4e3a $O((na)^{\\frac{2}{3}}) $ \u7ea7\u522b \uff0c \u6240\u4ee5\u672c\u4f53\u7684\u590d\u6742\u5ea6\u4e8b\u5b9e\u4e0a\u662f $O((na)^{\\frac{2}{3}}m logm) $ \u7684 , $logm$ \u5728\u4e8e\u5bf9\u8fb9\u6392\u5e8f , \u5982\u679c\u4f60\u4f1a $O(m)$ \u7ebf\u6027\u6700\u5c0f\u751f\u6210\u6811\u7684\u8bdd\u90a3\u5c31\u53ef\u4ee5\u505a\u5230 $O((na)^{\\frac{2}{3}}m) $ \u3002\n\n#### \u603b\u7ed3\u4e0e\u8bc4\u4ef7\n\u5176\u5b9e\u80fd\u770b\u51fa\u6765\u8fd9\u79cd\u5957\u8def\u63a8\u5e7f\u4e0d\u662f\u5f88\u591a , \u9898\u76ee\u76f8\u5bf9\u8f83\u5c11\u56e0\u4e3a\u5b83\u5b9e\u5728\u592a\u8fc7\u4e8e $educational$ \u4ee5\u81f3\u4e8e\u4e00\u9053\u7c7b\u4f3c\u7684\u9898\u76ee\u53ea\u80fd\u533a\u5206\u505a\u8fc7\u8fd9\u9053\u9898\u76ee\u4e0e\u6ca1\u6709\u505a\u8fc7\u8fd9\u9053\u9898\u76ee\u7684\u4eba \u3002 \u662f\u4e00\u79cd\u56fe\u8bba\u548c\u8ba1\u7b97\u51e0\u4f55\u7684\u7ed3\u5408\u6bd4\u8f83\u597d\u7684\u7c7b\u578b \u3002\n\n\u56e0\u4e3a\u4e8c\u7ef4\u4e58\u79ef\u5f62\u5f0f\u592a\u8fc7\u4e8e\u5b8c\u7f8e\u8054\u60f3\u5230\u4e8c\u7ef4\u5e73\u9762 \uff0c \u5bfc\u81f4\u6211\u5f88\u96be\u6709\u522b\u7684\u4f18\u7f8e\u7684 $idea$ \u8bb2\u4e00\u4e9b\u4ee3\u4ef7\u5f62\u6210\u7684\u70b9\u6620\u5c04\u5230\u4e8c\u7ef4\u5e73\u9762\u4e0a \u3002 \u5982\u679c\u6709\u7684\u8bdd\u8bf7\u52a1\u5fc5\u544a\u8bc9\u6211 (\u56e0\u4e3a\u7b14\u8005\u662f\u5728\u592a\u83dc\u4e86,\u6c34\u5e73\u771f\u7684\u6709\u9650,\u80fd\u529b\u771f\u7684\u4e0d\u591f) \n\n`quick-convex` \u505a\u6cd5\u662f\u4e00\u79cd\u589e\u91cf\u6cd5 \uff0c \u7406\u8bba\u4e0a\u6765\u8bb2\u53ef\u4ee5\u63a8\u5e7f\u5230\u9ad8\u7ef4\u7a7a\u95f4 , \u4f46\u6211\u89c9\u5f97\u6ca1\u6709\u5fc5\u8981 \uff0c \u800c\u4e14\u65f6\u95f4\u590d\u6742\u5ea6\u7684\u5206\u6790\u4f1a\u53d8\u5f97\u66f4\u52a0\u56f0\u96be , \u5b9e\u73b0\u4e5f\u4f1a\u5f88\u9ebb\u70e6 , \u7b49\u6211\u4f1a\u4e86\u4e09\u7ef4\u51f8\u5305\u518d\u6765\uff08\u5176\u5b9e\u8981\u9000\u5f79\u4e86 , \u4e5f\u6ca1\u6709\u673a\u4f1a\u53bb\u5b66\u4e86\uff09\u3002",
        "postTime": 1674398008,
        "uid": 235855,
        "name": "shenxinge",
        "ccfLevel": 6,
        "title": "[\u9898\u89e3] \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811"
    },
    {
        "content": "\u4e0d\u59a8\u5c06 $\\sum \\limits_{e \\in T} a_e$ \u548c $\\sum \\limits_{e \\in T} b_e$ \u5206\u522b\u4f5c\u4e3a $x,y$ \u653e\u5165\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\uff0c\u9898\u76ee\u8981\u6c42\u5373\u6c42\u4e00\u4e2a $x \\cdot y$ \u6700\u5c0f\u7684\u70b9\u5bf9 $(x,y)$\u3002\n\n\u4e0d\u96be\u53d1\u73b0 $(x,y)$ \u53ef\u80fd\u6700\u5c0f\u503c\u6240\u5728\u7684\u70b9\u4e00\u5b9a\u4e3a\u4e00\u4e2a\u5de6\u4e0b\u51f8\u58f3\u3002\n\n\u867d\u7136\u751f\u6210\u6811\u7684\u4e2a\u6570\u6781\u591a\uff0c\u4f46\u662f\u671f\u671b\u7684\u5728\u5de6\u4e0b\u51f8\u58f3\u7684\u70b9\u8f83\u5c11\uff0c\u627e\u5230\u8fd9\u4e9b\u6700\u5c0f\u503c\u70b9\u5373\u53ef\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5982\u4f55\u6c42\uff1a\n\n![https://cdn.luogu.com.cn/upload/image_hosting/ev68ov2k.png?x-oss-process=image/resize,m_lfit,h_1170,w_2225](https://cdn.luogu.com.cn/upload/image_hosting/ev68ov2k.png?x-oss-process=image/resize,m_lfit,h_1170,w_2225)\n\n\u8003\u8651\u4e09\u4e2a\u70b9 $A,B,C$\u3002\u5176\u4e2d $C$ \u70b9\u672a\u77e5\uff0c$A,B$ \u5df2\u77e5\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u6c42\u51fa\u79bb $AB$ \u6700\u8fdc\u7684\u5728\u5176\u5de6\u4e0b\u7684\u70b9 $C$\uff0c\u7136\u540e\u5206\u6cbb\u6c42 $AC$ \u548c $BC$ \u7684\u7b54\u6848\u3002\n\n\u5373\u6700\u5927\u5316 $S_{\\triangle ABC}$\u3002\n\n$S_{\\triangle ABC} = -\\dfrac{\\overrightarrow{AB} \\times\\overrightarrow{AC} }{2}$\u3002\n\n\u9700\u6700\u5927\u5316 $S_{\\triangle ABC}$\uff0c\u5373\u8003\u8651\u6700\u5c0f\u5316 $\\overrightarrow{AB} \\times\\overrightarrow{AC}$\u3002\n\n$\\begin{aligned} & \\; \\; \\; \\; \\;\\overrightarrow{AB} \\times\\overrightarrow{AC} \\\\&= (x_b - x_a)(y_c-y_a)-(y_b-y_a)(x_c-x_a)\\\\ &= x_by_c-x_by_a-x_ay_c+x_ay_a-y_bx_c+y_bx_a+y_ax_c-y_ax_a \\\\ &= (x_b-x_a)y_c + (y_a-y_b)x_c + (x_a-x_b)y_a + (y_b - y_a)x_a\\end{aligned}$\u3002\n\n\u663e\u7136\u53ea\u6709 $y_c$ \u548c $x_c$ \u4e3a\u53d8\u91cf\uff0c$a,b$ \u5747\u4e3a\u5b9a\u503c\u3002\n\n\u6240\u4ee5\u5c06 $(x_b-x_a)b_i + (y_a-y_b)a_i$ \u4f5c\u4e3a\u6743\u503c\u6c42\u6700\u5c0f\u751f\u6210\u6811\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\n\nconst int N = 1e5 + 5;\n\nclass CG\n{\npublic:\n\tstruct Point\n\t{\n\t\tint x, y;\n\t\tPoint(int _x, int _y): x(_x), y(_y){}\n\t\tPoint()\n\t\t{\n\t\t\tx = y = 0;\n\t\t}\n\t};\n\ttypedef Point Vector;\n\tfriend Vector operator-(const Vector a, const Vector b)\n\t{\n\t\treturn Vector(a.x - b.x, a.y - b.y);\n\t}\n};\nint cj(CG::Vector a, CG::Vector b)\n{\n\treturn a.x * b.y - a.y * b.x;\n}\nCG::Point ans = CG::Point(1e9, 1e9);\n\nint n, m;\nint u[N], v[N], a[N], b[N];\n\nclass Union_Find\n{\npublic:\n\tint fa[N];\n\tvoid Init()\n\t{\n\t\tfor (int i = 0; i <= n; i++) fa[i] = i;\n\t}\n\tint find(int u)\n\t{\n\t\treturn fa[u] == u ? u : fa[u] = find(fa[u]);\n\t}\n\tvoid merge(int u, int v)\n\t{\n\t\tfa[find(u)] = find(v);\n\t}\n};\n\nstruct Edge\n{\n\tint u, v, w, aaa, bbb;\n\tbool operator<(const Edge& x) const\n\t{\n\t\treturn w < x.w;\n\t}\n}c[N];\n\nUnion_Find uf;\n\nclass Kruskal\n{\npublic:\n\tCG::Point kruskal()\n\t{\n\t\tCG::Point res = CG::Point(0, 0);\n\t\tsort(c + 1, c + m + 1);\n\t\tuf.Init();\n\t\tint cnt = 0;\n\t\tfor (int i = 1; i <= m && cnt < n - 1; i++)\n\t\t{\n\t\t\tint u = c[i].u, v = c[i].v;\n\t\t\tif (uf.find(u) != uf.find(v))\n\t\t\t{\n\t\t\t\tcnt++;\n\t\t\t\tuf.merge(u, v);\n\t\t\t\tres.x += c[i].aaa;\n\t\t\t\tres.y += c[i].bbb;\n\t\t\t}\n\t\t}\n\t\tif (res.x * res.y < ans.x * ans.y || (res.x * res.y == ans.x * ans.y && res.x < ans.x))\n\t\t{\n\t\t\tans = res;\n\t\t}\n\t\treturn res;\n\t}\n}k;\n\nvoid solve(CG::Point x, CG::Point y)\n{\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tc[i].w = (y.x - x.x) * c[i].bbb + (x.y - y.y) * c[i].aaa;\n\t}\n\tCG::Point C = k.kruskal();\n\tif (cj(y - x, C - x) >= 0) return;\n\tsolve(x, C);\n\tsolve(C, y);\n}\n\nsigned main()\n{\n\tscanf(\"%lld%lld\", &n, &m);\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tscanf(\"%lld%lld%lld%lld\", &u[i], &v[i], &a[i], &b[i]);\n\t\tu[i]++;\n\t\tv[i]++;\n\t\tc[i].aaa = a[i];\n\t\tc[i].bbb = b[i];\n\t\tc[i].u = u[i], c[i].v = v[i];\n\t}\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tc[i].w = c[i].aaa;\n\t}\n\tCG::Point A = k.kruskal();\n\tfor (int i = 1; i <= m; i++)\n\t{\n\t\tc[i].w = c[i].bbb;\n\t}\n\tCG::Point B = k.kruskal();\n\tsolve(A, B);\n\tprintf(\"%lld %lld\\n\", ans.x, ans.y);\n\treturn 0;\n}\n```\n",
        "postTime": 1666581345,
        "uid": 332914,
        "name": "happybob",
        "ccfLevel": 6,
        "title": "P5540 [BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811"
    },
    {
        "content": "### \u524d\u7f6e\u829d\u58eb\n\n1. Kruskal \u6700\u5c0f\u751f\u6210\u6811\u7b97\u6cd5\u3002\n\n2. \u5411\u91cf\u53c9\u79ef\u8ba1\u7b97\u516c\u5f0f\uff1a\n\t$A \\times B = a_x \\times b_y - a_y \\times b_x$\n    \n### \u601d\u8def\n\n\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u6709\u4e86\u4e00\u9897\u751f\u6210\u6811\uff0c\u5206\u522b\u4e3a $\\displaystyle\\sum_{e \\in T}{a_1}$ \u548c $\\displaystyle\\sum_{e \\in T}{b_1}$\uff0c\u5982\u679c\u6b64\u65f6\u5b58\u5728\u4e00\u9897\u4e58\u79ef\u66f4\u5c0f\u7684\u751f\u6210\u6811\uff0c\u5206\u522b\u4e3a $\\displaystyle\\sum_{e \\in T}{a_2}$ \u548c $\\displaystyle\\sum_{e \\in T}{b_2}$\uff0c\u90a3\u4e48\u6b64\u65f6\u53ef\u80fd\u4f1a\u6709 $\\displaystyle\\sum_{e \\in T}{a_2} > \\displaystyle\\sum_{e \\in T}{a_1}$ \u7684\u60c5\u51b5\u5b58\u5728\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u5355\u72ec\u8003\u8651\u4e24\u4e2a\u503c\u3002\n\n\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u80fd\u591f\u540c\u65f6\u987e\u53ca\u5230 $a$ \u4ee5\u53ca $b$ \u7684\u4e1c\u897f\u6765\u5904\u7406\u5b83\uff0c\u53c8\u56e0\u4e3a\u8fd9\u662f\u4e24\u4e2a\u503c\u6c42\u548c\u540e\u76f8\u4e58\uff0c\u6240\u4ee5\u6211\u4eec\u60f3\u5230\u4e86\u5750\u6807\u8f74\u3002\n\n\u6211\u4eec\u73b0\u5728\u628a $\\displaystyle\\sum_{e \\in T}{a}$ \u548c $\\displaystyle\\sum_{e \\in T}{b}$ \u770b\u505a\u5750\u6807\u7cfb\u7684 $x$ \u548c $y$ \u5750\u6807\uff0c\u90a3\u4e48\u6bcf\u4e00\u9897\u751f\u6210\u6811\u5c31\u662f\u5750\u6807\u7cfb\u4e0a\u7684\u4e00\u4e2a\u70b9\u3002\n\n\u56e0\u4e3a\u6211\u4eec\u4e0d\u77e5\u9053\u6700\u7ec8\u7684\u7b54\u6848\u4f1a\u662f\u4ec0\u4e48\u6837\u5b50\uff0c\u6709\u53ef\u80fd $\\displaystyle\\sum_{e \\in T}{a}$ \u5f88\u5927\u800c $\\displaystyle\\sum_{e \\in T}{b}$ \u63a5\u8fd1\u4e8e\u96f6\uff0c\u4e5f\u6709\u53ef\u80fd $\\displaystyle\\sum_{e \\in T}{a}$ \u63a5\u8fd1\u4e8e\u96f6\u800c $\\displaystyle\\sum_{e \\in T}{b}$ \u5f88\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u9996\u5148\u9700\u8981\u5bf9\u7b54\u6848\u786e\u5b9a\u4e00\u4e2a\u8303\u56f4\uff0c\u7136\u540e\u8003\u8651\u5982\u4f55\u7f29\u5c0f\u70b9\u3002\n\n\u5148\u89e3\u51b3\u8303\u56f4\u7684\u95ee\u9898\u3002\n\n\u5f88\u660e\u663e\uff0c\u6211\u4eec\u5148\u6c42\u51fa\u79bb $x$ \u8f74\u6700\u8fd1\u7684\u4e00\u4e2a\u70b9 $A$ \u4ee5\u53ca\u79bb $y$ \u8f74\u6700\u8fd1\u7684\u4e00\u4e2a\u70b9 $B$\uff0c\u4e0d\u96be\u53d1\u73b0\uff0c\u5728\u5750\u6807\u7cfb\u4e2d\uff0c\u7b54\u6848\u66f4\u5c0f\u7684\u4e00\u4e2a\u751f\u6210\u6811\u6240\u5bf9\u5e94\u7684\u70b9 $C$ \u4e00\u5b9a\u4f4d\u4e8e $AB$ \u7684\u5de6\u4e0b\u65b9\uff0c\u5982\u56fe\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lh5fsiu1.png)\n\n\u6240\u4ee5\u6211\u4eec\u9700\u8981\u627e\u5230\u8ddd\u79bb $AB$ \u6700\u8fdc\u7684 $C$ \u70b9\u3002\n\n\u6839\u636e\u4e09\u89d2\u5f62\u9762\u79ef\u7684\u516c\u5f0f\uff0c\u5047\u8bbe $C$ \u70b9\u8ddd\u79bb $AB$ \u7684\u8ddd\u79bb\u4e3a $h$\uff0c\u90a3\u4e48 $S_{\\triangle{ABC}}= \\frac{1}{2} \\times AB \\times h$\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u6700\u5927\u5316 $S_{\\triangle{ABC}}$ \u5c31\u884c\u4e86\u3002\n\n\u4e0d\u8fc7\u6c42\u51fa\u9ad8\u662f\u5f88\u56f0\u96be\u7684\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u9700\u8981\u642c\u51fa\u53e6\u5916\u4e00\u4e2a\u5de5\u5177\uff1a**\u5411\u91cf**\u3002\n\n\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u5c31\u6709\u4e86\u4e00\u4e2a\u516c\u5f0f\uff1a\n\n$$\n\tS_{\\triangle{ABC}}= \\frac{\\overrightarrow{AB} \\times \\overrightarrow{AC}}{2}\n$$\n\n\u6ce8\u610f\u6b64\u5904\u662f\u5411\u91cf\u53c9\u79ef\u800c\u4e0d\u662f\u70b9\u79ef\u3002\n\n\u6211\u4eec\u518d\u6765\u63a8\u4e00\u6ce2\u67ff\u5b50\uff1a\n\n$$\n \\begin{aligned}\\overrightarrow{AB} \\times \\overrightarrow{AC} &=\n (x_B-x_A)(y_C-y_A)-(x_C-x_A)(y_B-y_A)\n \\\\&=(x_B-x_A)y_C+(y_A-y_B)x_C-(x_B-x_A)y_A+(y_B-y_A)x_A\n \\end{aligned}\n$$\n\n\u5f88\u660e\u663e\uff0c\u5bf9\u4e8e\u5df2\u77e5\u7684\u4e24\u4e2a\u70b9 $A$ \u4ee5\u53ca $B$ \u548c\u6240\u6c42\u7684 $C$\uff0c\u540e\u4e24\u9879\u4e3a\u5e38\u6570\uff0c\u800c\u53ef\u80fd\u53d1\u751f\u6539\u53d8\u7684\uff0c\u53ea\u6709\u524d\u9762\u4e24\u9879\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5728\u6bcf\u4e00\u6b21\u627e\u6700\u5c0f\u751f\u6210\u6811\u7684\u65f6\u5019\uff0c\u53ea\u9700\u8981\u6309\u7167\u6b64\u65f6\u6bcf\u6761\u8fb9\u7684 $a$ \u503c\u548c $b$ \u503c\u91cd\u65b0\u8d4b\u503c\uff0c\u7136\u540e\u6c42\u51fa\u5c3d\u91cf\u8fdc\u79bb $AB$ \u7684\u70b9 $C$\uff0c\u5373\u8dd1\u4e00\u6b21\u6700\u5c0f\u751f\u6210\u6811\u3002\n\n\u4e3a\u4e86\u4fdd\u8bc1\u641c\u5bfb\u5230\u7b54\u6848\uff0c\u6211\u4eec\u5728\u6c42\u51fa $C$ \u540e\uff0c\u8fd8\u8981\u4ee5 $A$ \u548c $C$ \u4ee5\u53ca $B$ \u548c $C$ \u5206\u522b\u518d\u6b21\u8fdb\u884c\u9012\u5f52\u67e5\u627e\u3002\n\n\u5bf9\u4e8e\u5224\u65ad\u627e\u4e0d\u5230\u66f4\u597d\u7684\u7b54\u6848\u7684\u60c5\u51b5\uff0c\u53ea\u9700\u8981\u5224\u65ad\u627e\u5230\u7684\u70b9 $C$ \u5728 $AB$ \u53f3\u4e0a\u65b9\uff0c\u5373 $\\overrightarrow{AB} \\times \\overrightarrow{AC} \\ge 0$ \u5c31\u884c\u4e86\u3002\n\n### \u4e00\u4e9b\u7ec6\u8282\n\n1. \u6ce8\u610f\u5411\u91cf\u53c9\u79ef\u7684\u4f7f\u7528\u3002\n\n2. \u6ce8\u610f\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u51fa\u73b0\u7684\u7206 ``int`` \u7684\u95ee\u9898\u3002\n\nCode\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read(){\n\tint sss=0;\n\tchar chh=getchar();\n\twhile(chh<'0'||chh>'9') chh=getchar();\n\twhile(chh>='0'&&chh<='9'){\n\t\tsss=sss*10+chh-'0';\n\t\tchh=getchar();\n\t}\n\treturn sss;\n}\nint n,m;\nint fa[205];\nstruct node{\n\tint u,v,w,a,b;\n}edge[10005];\nstruct point{\n\tint x,y;\n};\npoint ans={(int)1e15,(int)1e15};\nint find(int x){\n\tif(fa[x]==x) return x;\n\treturn fa[x]=find(fa[x]);\n}\nbool cmp(const node& x,const node& y){\n\treturn x.w<y.w;\n} \ninline point operator - (const point &a,const point &b){ //\u5411\u91cf\u51cf\u6cd5 \n\treturn (point){a.x-b.x,a.y-b.y}; \n}\ninline int operator * (const point &a,const point &b){//\u5411\u91cf\u5dee\u79ef \n\treturn a.x*b.y-a.y*b.x; \n}\npoint kruskal(){\n\tpoint now={0,0};\n\tsort(edge+1,edge+m+1,cmp);\n\tint tot=0;\n\tfor(register int i=1;i<=n+1;i++) fa[i]=i;\n\tfor(register int i=1;i<=m;i++){\n\t\tif(tot==n-1) break;\n\t\tint fau=find(edge[i].u),fav=find(edge[i].v);\n\t\tif(fau!=fav){\n\t\t\tfa[fau]=fav;\n\t\t\ttot++;\n\t\t\tnow.x+=edge[i].a;\n\t\t\tnow.y+=edge[i].b;\n\t\t}\n\t}\n\tint ori_ans=ans.x*ans.y,now_ans=now.x*now.y;//\u66f4\u6539\u7b54\u6848 \n\tif(ori_ans>now_ans||(ori_ans==now_ans&&ans.x>now.x)){\n\t\tans=now;\n\t}\n\treturn now;\n}\nvoid solve(const point& A,const point& B){\n\tfor(register int i=1;i<=m;i++){\n\t\tedge[i].w=edge[i].a*(A.y-B.y)+edge[i].b*(B.x-A.x);//\u516c\u5f0f\uff0c\u65b0\u7684\u8fb9\u6743 \n\t}\n\tpoint C=kruskal();\n\tif((B-A)*(C-A)>=0) return;//\u5411\u91cf\u4e58\u6cd5 \n\tsolve(A,C),solve(C,B);\n}\nsigned main(){\n\tn=read(),m=read();\n\tfor(register int i=1;i<=m;i++){\n\t\tedge[i].u=read()+1;\n\t\tedge[i].v=read()+1;\n\t\tedge[i].a=read();\n\t\tedge[i].b=read();\n\t}\n\t//\u627eX\u6700\u5c0f\u7684\u5e97 \n\tfor(register int i=1;i<=m;i++){\n\t\tedge[i].w=edge[i].a;\n\t}\n\tpoint A=kruskal();\n\t//\u627eY\u6700\u5c0f\u7684\u70b9 \n\tfor(register int i=1;i<=m;i++){\n\t\tedge[i].w=edge[i].b;\n\t}\n\tpoint B=kruskal();\n\tsolve(A,B);//\u9012\u5f52\u67e5\u627e \n\tcout<<ans.x<<\" \"<<ans.y;\n\treturn 0;\n}\n```",
        "postTime": 1649841005,
        "uid": 367316,
        "name": "Foreverxxx",
        "ccfLevel": 0,
        "title": "P5540 [BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811 \u9898\u89e3"
    },
    {
        "content": "## \u524d\u7f6e\u77e5\u8bc6\n\n1. Kruskal \u6700\u5c0f\u751f\u6210\u6811\n2. \u5411\u91cf\u7684\u53c9\u79ef\u516c\u5f0f\uff1a $a \\times b = a_x \\times b_y - a_y \\times b_x$\n\n## \u5206\u6790\n\n\u6211\u4eec\u5c06 $\\sum_{e\\in T}a_e$ \u548c $ \\sum_{e\\in T}b_e$ \u653e\u8fdb\u5e73\u9762\u76f4\u89d2\u5750\u6807\u7cfb\uff0c\u5373\u6bcf\u4e00\u4e2a\u70b9\u4e3a $(a_e, b_e)$\uff0c\u73b0\u5728\u8ba9\u4f60\u5728\u8fd9\u4e9b\u70b9\u4e2d\u627e\u51fa\u4e00\u4e2a\u6700\u5c0f\u7684\u70b9 $(x, y)$ \u4f7f\u5f97 $x \\times y$ \u6700\u5c0f\u3002\n\n\u6211\u4eec\u4f1a\u53d1\u73b0 $(x, y)$ \u7684\u6700\u5c0f\u503c\u6240\u5728\u7684\u70b9\u4e00\u5b9a\u662f\u5728\u5de6\u4e0b\u51f8\u58f3\u4e2d\u3002\n\n\u751f\u6210\u6811\u7684\u65b9\u6cd5\u867d\u591a\uff0c\u4f46\u662f\u5728\u5de6\u4e0b\u51f8\u58f3\u7684\u70b9\u6bd4\u8f83\u5c11\uff0c\u6240\u4ee5\u73b0\u5728\u7684\u95ee\u9898\u8f6c\u5316\u4e3a **\u627e\u8fd9\u4e2a\u6700\u5c0f\u503c\u7684\u70b9**\n\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/io7j1q1f.png)\n\n\u5047\u8bbe $A$ \u70b9\u4e3a\u8ddd\u79bb $x$ \u8f74\u6700\u9760\u8fd1\u7684\u70b9\uff0c $B$ \u70b9\u4f4d\u8ddd\u79bb $y$ \u8f74\u6700\u9760\u8fd1\u7684\u70b9\uff0c\u4e3a\u4e86\u627e\u5230\u7b54\u6848 $C$ \u70b9\uff0c\u9898\u76ee\u76f8\u5f53\u4e8e\u7ed9\u4e86\u6211\u4eec $m$ \u4e2a\u70b9\uff0c\u8ba9\u6211\u4eec\u627e\u4e00\u4e2a\u70b9 $C_i(1\\le i\\le m)$ \u4f7f\u5f97 $C_i$ \u70b9\u79bb $AB$ \u6700\u8fdc\u3002\n\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/55423r0z.png)\n\n\u8ba9 $C$ \u79bb $AB$ \u6700\u8fdc\uff0c\u5373\u8ba9 $S_\\triangle ABC$ \u5c3d\u91cf\u5927\uff0c\u56e0\u4e3a $AB$ \u957f\u5ea6\u4e0d\u53d8\uff0c\u53d8\u7684\u662f $S_\\triangle ABC$ \u7684\u9ad8 $h$\u3002$h$ \u65e2\u662f $C$ \u79bb $AB$ \u7684\u8ddd\u79bb\u3002\n\n\u6839\u636e\u4e09\u89d2\u5f62\u7684\u5411\u91cf\u516c\u5f0f\u5f97\uff1a\n\n$$S_\\triangle ABC = -\\dfrac{\\overrightarrow {AB}\\times \\overrightarrow{AC}}{2}$$\n\n\u4e3a\u4e86\u8ba9 $S_\\triangle ABC$ \u5c3d\u91cf\u5927\uff0c\u65e2\u8ba9 $\\overrightarrow {AB}\\times \\overrightarrow{AC}$ \u5c3d\u91cf\u5c0f\uff0c\u7528\u53c9\u79ef\u8868\u793a\u5373\u53ef\u5f97\u5230\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/89imuu44.png)\n\n\u663e\u7136\u53ea\u6709 $x_C,y_C$ \u4e3a\u53d8\u91cf\uff0c\u5176\u4ed6\u5168\u4e3a\u5b9a\u503c\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c06\u6240\u6709\u7684 $(x_B-x_A)\\times b_i + (y_A-y_B)\\times a_i$ \u7684\u6743\u503c\u4f5c\u4e3a\u4e00\u4e2a\u56fe\uff0c\u4ece\u4e2d\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u751f\u6210\u6811\u5c31\u505a\u5b8c\u4e86\u8fd9\u4e00\u9898\u3002\n\n# AC \u4ee3\u7801\n\n```cpp\n/*****************************************\n\u5907\u6ce8\uff1a\n******************************************/\n#include<queue>\n#include<math.h>\n#include<stack>\n#include<stdio.h>\n#include<iostream>\n#include<vector>\n#include<iomanip>\n#include<map>\n#include<string.h>\n#include<algorithm>\nusing namespace std;\ntypedef long long LL;\nconst int MAXN = 1e5 + 10;\nconst int MR = 10 + 5;\nconst int INF = 0x3f3f3f3f;\nconst int MOD = 998244353;\nint n, m;\nstruct _union//\u5e76\u67e5\u96c6\n{\n\tint fa[MAXN];\n\tvoid init()//\u521d\u59cb\u5316\n\t{\n\t\tfor(int i = 0;i < MAXN; i++)\n\t\t{\n\t\t\tfa[i] = i;\n\t\t}\n\t}\n\tint find(int id)\n\t{\n\t\tif(fa[id] == id)return id;\n\t\treturn fa[id] = find(fa[id]);\n\t}\n\tvoid merge(int x,int y)//\u5408\u5e76x,y\n\t{\n\t\tx=find(x);\n\t\ty=find(y);\n\t\tfa[x]=y;\n\t}\n}unionf;\nstruct node//\u5b58\u56fe\n{\n\tint u, v, w;//\u8bb0\u5f55\u56fe\n\tint wa, wb;//\u8bb0\u5f55\u5f53\u524d\u7684ai\u548cbi\u7684\u503c\n}e[MAXN];\nbool cmp(node a,node b)//\u5bf9\u8fd9\u4e2a\u56fe\u6392\u5e8f\n{\n\treturn a.w < b.w;\n}\nstruct point//\u8bb0\u5f55\u4e00\u4e2a\u70b9\n{\n\tint x, y;\n\tpoint(int a,int b)\n\t{\n\t\tx = a;\n\t\ty = b;\n\t}\n\tpoint()\n\t{\n\t\tx = y = 0;\n\t}\n\tfriend point operator -(const point &a,const point &b)\n\t{\n\t\tpoint ans = point(a.x-b.x, a.y-b.y);\n\t\treturn ans;\n\t}\n}ans = point(INF, INF);\nint chaji(point a,point b)//\u5411\u91cfA,B\u7684\u53c9\u79ef\n{\n\treturn a.x * b.y - a.y * b.x;\n}\npoint kruskal()//\u6700\u5c0f\u751f\u6210\u6811\u6c42\u51fa\u70b9\u5bf9\n{\n\tpoint res = point(0, 0);\n\tsort(e + 1,e + m + 1, cmp);\n\tunionf.init();\n\tint cnt = 0;\n\tfor(int i = 1;i <= m; i++)\n\t{\n\t\tint u = e[i].u;\n\t\tint v = e[i].v;\n\t\tif(unionf.find(u) == unionf.find(v))continue;\n\t\tcnt++;\n\t\tunionf.merge(u, v);\n\t\tres.x += e[i].wa;\n\t\tres.y += e[i].wb;\n\t\tif(cnt == n - 1)break;\n\t}\n\tint num1 = res.x * res.y;\n\tint num2 = ans.x * ans.y;\n\tif(num1 < num2 || (num1 == num2 && res.x < ans.x))\n\t{\n\t\tans = res;\n\t}\n\treturn res;\n}\nvoid solve(point x,point y)//\u5206\u6cbb\n{\n\tfor(int i = 1;i <= m; i++)\n\t{\n\t\te[i].w = (y.x - x.x) * e[i].wb + (x.y - y.y) * e[i].wa;\n\t}\n\tpoint tmp = kruskal();\n\tif(chaji(y - x, tmp - x) >= 0)return ;\n\tsolve(x, tmp);\n\tsolve(tmp, y);\n}\nsigned main()\n{\n\tcin >> n >> m;\n\tfor(int i = 1, u, v, wa, wb;i <= m; i++)\n\t{\n\t\tcin >> u >> v >> wa >> wb;\n\t\tu++, v++;\n\t\te[i] = {u, v, 0, wa, wb};\n\t}\n\tfor(int i = 1;i <= m; i++)e[i].w = e[i].wa;\n\tpoint tmpa = kruskal();\n\tfor(int i = 1;i <= m; i++)e[i].w = e[i].wb;\n\tpoint tmpb = kruskal();\n\tsolve(tmpa, tmpb);\n\tcout << ans.x << ' ' << ans.y;\n\treturn 0;\n}\n\n```\n\n",
        "postTime": 1667621790,
        "uid": 341036,
        "name": "\u8521\u7ae3\u51ef",
        "ccfLevel": 4,
        "title": "P5540 [BalkanOI2011] timeismoney | \u6700\u5c0f\u4e58\u79ef\u751f\u6210\u6811 \u9898\u89e3"
    }
]
[
    {
        "content": " ### [COCI2015-2016#6] \n#  SAN\n\n### \u9898\u76ee\u5927\u610f\n\n[\u9898\u76ee\u63cf\u8ff0](https://www.luogu.com.cn/problem/P7802)\n\n\u7ed9\u5b9a\u4e00\u5f20\u8868\uff0c\u89c4\u5b9a\u7b2c $i$ \u884c \u7b2c\u4e00\u5217 \u4e3a $i$ ( $A_{i1}=i$ )\n\u7136\u540e\u6bcf\u4e00\u884c\u8fdb\u884c\u9012\u63a8 $A_{ij}=A_{i(j-1)}+rev(A_{i(j-1)})$\n\n\u6c42\u8868\u4e2d $x$ \u4ee5\u5185\u7684\u6570\u6709\u591a\u5c11\n\n## \u601d\u8003\n\n\u89c2\u5bdf\u4e86\u9898\u76ee\uff0c\u6ce8\u610f\u8fd9\u53e5\u8bdd \uff1a \u6709\u8da3\u7684\u662f\uff0c\u8868\u4e2d\u7684\u6bcf\u4e2a\u6570\u5b57\u51fa\u73b0\u7684\u6b21\u6570\u662f\u6709\u9650\u7684\n\nhaha ,\u6709\u8da3\u7684\u662f\uff0c\u6211\u4eec\u4e5f\u53d1\u73b0\u5728 $10^{10}$ \u4ee5\u5185\u51fa\u73b0\u7684\u5728\u7b2c\u4e8c\u5217\u7684\u6570\u4e5f\u662f\u6709\u9650\u7684\n\n$A_{ij}=A_{i(j-1)}+rev(A_{i(j-1)})$ \u4e2d $A_{ij}$ \u6ee1\u8db3\u4e86\u4ec0\u4e48\u6027\u8d28\uff1f\u901a\u8fc7\u5176\u8ba1\u7b97\u65b9\u5f0f\u53ef\u4ee5\u53d1\u73b0 \uff0c\u5b83\u7684\u6bcf\u4e00\u4f4d\u5e94\u8be5\u5173\u4e8e\u4e2d\u95f4\u4f4d\u5bf9\u79f0\n\n\u5373\uff0c\u5982\u679c\u5b83\u4e3a\u4e03\u4f4d\u6570\uff0c\u90a3\u53ef\u4ee5\u5199\u4f5c $p_1p_2p_3p_4p_3p_2p_1$ ( $0<=p_i<=18$ )\n\u56e0\u6b64\uff0c\u6211\u4eec\u5b8c\u5168\u53ef\u4ee5\u901a\u8fc7\u641c\u7d22\u7b97\u51fa\u5728\u7b2c\u4e8c\u5217\u51fa\u73b0\u7684\u6570\uff0c\u4ee5\u53ca\u6b21\u6570\uff08\u6309\u7167\u8fd9\u4e2a\u6027\u8d28\uff0c\u6240\u6709\u5728\u7b2c\u4e8c\u5217\u540e\u51fa\u73b0\u7684\u6570\u90fd\u4e00\u5b9a\u662f\u5728\u7b2c\u4e8c\u5217\u51fa\u73b0\u8fc7\u7684\uff09\n\n\n## \u7ec6\u8282\n\n\u60f3\u5230\u4e86\u8fd9\u91cc\uff0c\u6b64\u9898\u57fa\u672c\u7ed3\u675f\u4e86\uff0c\u4f46\u849f\u84bb\u8c03\u4e86\u592a\u4e45\u4e86\uff0c\u8fd8\u662f\u6253\u7b97\u5206\u4eab\u4e00\u4e0b\u9700\u8981\u6ce8\u610f\u7684\u7ec6\u8282\n\n1. \u5982\u4f55\u7edf\u8ba1\u5728\u7b2c\u4e8c\u5217\u51fa\u73b0\u7684\u6570\u7684\u6b21\u6570\n\n\u82e5\u6211\u4eec\u641c\u5230\u4e00\u4e2a\u6570 $x=p_1p_2p_3p_2p_1$ \uff0c\u90a3\u5b83\u4ee5\u8fd9\u79cd\u5f62\u6001\u51fa\u73b0\u5728\u8868\u4e2d\u7684\u6b21\u6570\u5e94\u4e3a $f_1 \\times f_2 \\times f_3$ ( $f_i$ \u4e3a $p_i$ \u7684\u62c6\u6570\u65b9\u6848\u6570)\n\n\u9700\u8981\u6ce8\u610f\u7684\u662f \u5176\u4ed6\u4f4d\u53ef\u4ee5\u62c6\u6210 $p_i = x_1+x_2$ ( $0<=x_1<=9 $ \u4e14 $0<=x_2<=9$ \uff09\n\n\u4f46\u662f\uff01\uff01\u9996\u4f4d\u7684\u52a0\u6570 $x_1$ \u4e0d\u53ef\u4ee5\u4e3a\u96f6\uff01\uff01\u56e0\u4e3a\u8fd9\u6837\u6620\u5c04\u5230\u7684\u7b2c\u4e00\u5217\u7684\u6570\u662f\u4e0d\u5408\u6cd5\u7684\n $p_1=x_1+x_2$ ( $1<=x_1<=9 $ \u4e14 $0<=x_2<=9$ )\n \n\u6b64\u5916\u4e2d\u95f4\u4f4d $p_3$ \u53ea\u80fd\u62c6\u6210 $p_3=x+x$ \uff0c\u56e0\u6b64\u5fc5\u987b\u662f\u5076\u6570\uff0c\u4e14 $f_3=1$ \n\n2. \u641c\u7d22\u8fc7\u7a0b\u4e2d\u4e00\u4e2a\u6570\u4f1a\u88ab\u591a\u6b21\u641c\u7d22\n\n\u5b83\u662f\u4ee5\u4e0d\u540c\u5f62\u6001\u88ab\u641c\u5230\u7684\uff0c\u6bcf\u4e00\u79cd\u90fd\u5fc5\u987b\u8981\u88ab\u8bb0\u5f55\uff0c\u6700\u540e\uff08\u6b21\u6570\uff09\u5408\u5e76\u5230\u4e00\u8d77\n\n\u6bd4\u5982 $121$ \uff0c\u7b2c\u4e00\u6b21\u88ab\u641c\u5230\u662f $11,11$ ($f=8(11=2+9,3+8,4+7,5+6...)$)\n\n\u7136\u540e\u53c8\u4f1a\u88ab\u641c\u5230\u662f $1,2,1$ $f=1 \\times 1(1=1+0,2=1+1)$ \n\n\u81f3\u6b64\uff0c$121$ \u5e94\u8be5\u5728\u7b2c\u4e8c\u5217\u51fa\u73b0\u4e86$9$\u6b21\u4e86\n\n\u4e3a\u4e86\u8fd9\u4e2a\u5408\u5e76\u64cd\u4f5c\uff0c\u5b66\u4e60\u4e86\u4e2a\u65b9\u4fbf\u7684 $STL$ \uff0c\u53bb\u91cd\uff1a\uff08\u8fd4\u56de\u53bb\u91cd\u540e\u7684\u5143\u7d20\u4e2a\u6570\uff09\n\n```cpp\nCnt_a=unique(a+1,a+1+cnt_a)-a-1;\n```\n\n\n3. \u5982\u4f55\u6c42\u7b2c\u4e8c\u5217\u4ee5\u540e\u7684\u6570\n\n\u4ee5\u4e3a\u4e00\u4e2a\u6570\u7684\u540e\u7ee7\u662f\u552f\u4e00\u7684\uff0c\u90a3\u4e48\u5b83\u51fa\u73b0\u7684\u591a\u5c11\u6b21\uff0c\u5b83\u7684\u540e\u7ee7\u5c31\u4e00\u5b9a\u51fa\u73b0\u7684\u591a\u5c11\u6b21\uff0c\u90a3\u4e48\u4e00\u4e2a\u6570\u7684\u51fa\u73b0\u6b21\u6570\u5c31\u4e3a\u5b83\u6240\u6709\u524d\u7ee7\u6b21\u6570\u7684\u548c\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u679a\u4e3e\u6240\u6709\u7b2c\u4e8c\u5217\u7684\u6570\u5411\u540e\u9012\u63a8\u5f97\u5230\u4e86\n\n4. \u6ce8\u610f\u8fd8\u8981\u52a0\u4e0a\u5728\u7b2c\u4e00\u5217\u51fa\u73b0\u7684\u6b21\u6570\n\n\n## Code\n\n```cpp\n# define N 4000005\n# define LL long long\nconst int p=10;\nconst LL M=1e10;\nint q,tot=0;\nLL L,R,f[N+5],a[N+5],pow_10[11],b[N+5],c[N+5];\ninline LL rev(LL x)\n{\n \tLL ret=0;\n\twhile(x)\n\t{\n\t\tret=(ret*10)+x%p;\n\t\tx/=p;\n\t}\n\treturn ret;\n}\ninline int find(LL x) // \u4e8c\u5206\u67e5\u627e \n{\n\tint l=0,r=tot,mid;\n\twhile(l<r)\n\t{\n\t\tmid=(l+r+1)>>1;\n\t\tif(a[mid]<=x) l=mid;\n\t\telse r=mid-1;\n\t}\n\treturn l;\n}\ninline LL calc(LL x)\n{\n\tif(x==0) return 0;\n\tint pl=find(x);\t\n\treturn f[find(x)]+x; //\u6ce8\u610f\u52a0\u4e0a\u7b2c\u4e00\u5217\u51fa\u73b0\u7684\u6b21\u6570\uff08x\uff09 \n}\nLL hh[2][20]={{1,2,3,4,5,6,7,8,9,10,9,8,7,6,5,4,3,2,1},{0,1,2,3,4,5,6,7,8,9,9,8,7,6,5,4,3,2,1}};// hh[1]:\u9996\u4f4d ,hh[0]:\u975e\u9996\u4f4d \nvoid dfs(int ed,int dep,LL s,LL t) \n{\n\tif(s>M) return ;\n\tif(dep==(ed+1>>1)) \n\t{\n\t\tc[++tot]=t;\n\t\tb[tot]=a[tot]=s;\n\t\treturn;\n\t}\n\tif((dep<<1|1)==ed)  // mid : i = x+x\n\t{\n\t\tfor(LL i=(dep==0);i<=18;i++) \n\t\t\tif(!(i&1))dfs(ed,dep+1,s+pow_10[dep]*i,t);\n\t}\n\telse\n\t{\n\t\tfor(LL i=(dep==0);i<=18;++i)\n\t\t\tdfs(ed,dep+1,s+(pow_10[dep]+pow_10[ed-dep-1])*i,t*hh[dep==0][i]);\n\t}\n\t\n}\ninline void PreWork()\n{\n\tpow_10[0]=1;\n\tfor(int i=1;i<=10;++i) pow_10[i]=pow_10[i-1]*10LL;\n\tfor(int i=1;i<=10;++i)\n\t\tdfs(i,0,0,1);\n\tsort(a+1,a+1+tot);\n\tint cnt=tot;\n\ttot=unique(a+1,a+1+tot)-a-1; // \u53bb\u91cd \n\tfor(int i=1;i<=cnt;++i) \n\t{\n\t\tint pos=find(b[i]);\n\t\tf[pos]+=c[i]; // \u5408\u5e76\u5f97\u5230\u5728\u7b2c\u4e8c\u5217\u51fa\u73b0\u7684\u603b\u6b21\u6570 \n\t}\n\tfor(int i=1;i<=tot;++i)\n\t{\t\n\t\tLL tmp=a[i]+rev(a[i]); //\u4ece\u7b2c\u4e8c\u5217\u9012\u63a8\u540e\u5217 \n\t\tif(tmp>M||tmp<0) continue;\n\t\tf[find(tmp)]+=f[i];\t\n\t}\n\tfor(int i=1;i<=tot;++i) f[i]+=f[i-1]; // \u524d\u7f00\u548c \n}\nint main()\n{\n\tPreWork();\n\tread(q);\t\n\twhile(q--)\n\t{\n\t\tread(L),read(R);L--;\n\t\tprint(calc(R)-calc(L)),putchar('\\n');\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1636250345,
        "uid": 525272,
        "name": "XUAN\u2014",
        "ccfLevel": 6,
        "title": "SAN"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P7802)\n\n[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/lbh2021/p/15116381.html)\n\n## \u7b97\u6cd5\u5206\u6790\uff1a\u6570\u4f4d dp\n\n\u5728\u8bb2\u6b63\u89e3\u4e4b\u524d\u5148\u8bf4\u4e00\u4e0b\u90e8\u5206\u5206\u3002\n\n\u6ce8\u610f\u5230\u5bf9\u4e8e $50\\%$ \u7684\u6570\u636e\uff0c$1\\le L,R\\le10^6$\uff0c\u4f3c\u4e4e\u53ef\u4ee5\u66b4\u529b\u505a\u51fa\u6765\u3002\u4f46\u7531\u4e8e\u6211\u4eec\u4e0d\u77e5\u9053\u6bcf\u4e2a\u6570\u53ef\u80fd\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u76f4\u63a5\u5f00\u4e8c\u7ef4\u6570\u7ec4\u6a21\u62df\u975e\u5e38\u5bb9\u6613\u70b8~~\uff08\u4e8b\u5b9e\u8bc1\u660e\u5b83\u5c31\u70b8\u4e86\u2026\u2026\uff09~~\uff0c\u56e0\u6b64\u6211\u4eec\u8981\u6362\u4e00\u79cd\u65b9\u5f0f\u679a\u4e3e\u3002\u6ce8\u610f\u5230\u6bcf\u4e00\u4e2a\u6570\u5b57\u4ec5\u80fd\u8f6c\u53d8\u6210\u4e3a\u53e6\u4e00\u79cd\u6570\u5b57\uff0c\u4e14\u6bcf\u4e2a\u6570\u5b57\u81f3\u5c11\u51fa\u73b0\u4e00\u6b21\uff08\u5728\u7b2c\u4e00\u5217\uff09\u3002\u4e8e\u662f\u53ef\u4ee5\u9012\u63a8\u5f97\u5230 $cnt_{j}=\\sum cnt_i(j=rev(i))$ \u7136\u540e\u524d\u7f00\u548c\u7edf\u8ba1\u5373\u53ef\u3002\n\n\u7ed9\u51fa $50\\%$ \u7684\u4ee3\u7801\u3002\u53ef\u4ee5\u83b7\u5f97 $80$ pts \u7684~~\u597d~~\u6210\u7ee9\u3002\n\n```cpp\nnamespace p50 {\n\tconst int N=1e6;\n\tint cnt[N+5];\n\tinline void init() {\n\t\tF(i,1,N)++cnt[i];\n\t\tint p;\n\t\tF(i,1,N) {\n\t\t\tp=i+rev(i);\n\t\t\tif(p<=N)cnt[p]+=cnt[i];\n\t\t}\n\t\tF(i,1,N)cnt[i]+=cnt[i-1];\n\t}\n\tint main() {\n\t\tinit();\n\t\tn=read();\n\t\tint l,r;\n\t\tF(i,1,n) {\n\t\t\tl=read(),r=read();\n\t\t\tprintf(\"%d\\n\",cnt[r]-cnt[l-1]);\n\t\t}\n\t}\n}\n```\n\n\u63a5\u4e0b\u6765\u8bb2\u4e00\u4e0b\u6b63\u89e3\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a $x$\uff0c\u8bb0 $y=x+rev(x)$\u3002\u76f4\u63a5\u679a\u4e3e $x$ \u80af\u5b9a\u8d85\u65f6\uff0c\u56e0\u6b64\u8003\u8651\u679a\u4e3e $y$\u3002\u5728 $y$ \u6709$10$ \u4f4d\u65f6\uff0c\u5148\u4e0d\u8ba1\u7b97\u8fdb\u4f4d\uff0c\u90a3\u4e48 $y$ \u7684\u524d\u4e94\u4f4d\u4e0e\u540e\u4e94\u4f4d\u662f\u5bf9\u79f0\u7684\u3002\u9664\u6700\u9ad8\u4f4d\u4e0d\u4e3a $0$\uff08\u90a3\u6700\u4f4e\u4f4d\u4e5f\u4e0d\u4e3a $0$\uff09\uff0c\u5176\u4f59\u6bcf\u4e00\u4f4d\u53ef\u80fd\u662f $0\\sim 18$ \u7684\u4e00\u79cd\u3002\u90a3\u4e48\u603b\u5171\u6709 $18\\times 19^4=2345778$ \u79cd\u60c5\u51b5\u3002\u662f\u5f88\u5c0f\u7684\uff0c\u56e0\u6b64\u8003\u8651\u7528 dfs\uff0c\u5148\u786e\u5b9a\u4f4d\u6570\uff0c\u518d\u6570\u4f4d dp \u679a\u4e3e $y$ \u7684\u6bcf\u4e00\u4f4d\u3002\n\n\u6709\u4e86\u60c5\u51b5\uff0c\u63a5\u4e0b\u6765\u8003\u8651\u7edf\u8ba1\u6b21\u6570\u3002\u4e8b\u5b9e\u4e0a\uff0cdfs \u65f6\u5df2\u7ecf\u7b97\u51fa\u4e86\u51fa\u73b0\u5728\u7b2c\u4e8c\u5217\u7684\u6b21\u6570\uff0c\u56e0\u4e3a\u679a\u4e3e\u7684\u65f6\u5019\u679a\u4e3e\u7684\u5c31\u662f $x+rev(x)$\u3002\u5bf9\u4e8e\u66f4\u540e\u9762\u7684\u5217\uff0c\u7531\u4e8e\u540e\u9762\u6bcf\u4e2a\u6570\u90fd\u662f\u7531\u524d\u9762\u7684\u6570\u8f6c\u79fb\u6765\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u679a\u4e3e\u6bcf\u4e00\u4e2a\u6ee1\u8db3\u8981\u6c42\u7684\u6570\u3002\u7531\u4e8e\u6240\u6709\u7684\u53ef\u80fd\u7684\u6570\u90fd\u5df2\u7ecf\u5904\u7406\u51fa\u6765\u4e86\uff0c\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2a\u6570\u7ec4 $sum$ \u7edf\u8ba1\u4e00\u4e2a\u6570\u51fa\u73b0\u7684\u6b21\u6570\u3002\u548c\u4e0a\u9762\u7c7b\u4f3c\u7684\uff0c$sum_y=\\sum sum_x(x+rev(x)=y)$\u3002\u56e0\u4e3a\u7b2c\u4e8c\u884c\u5df2\u7ecf\u7edf\u8ba1\u8fc7\u4e86\uff0c\u6240\u4ee5\u51cf\u4e00\u3002\u5bf9 $sum$ \u505a\u524d\u7f00\u548c\u5373\u53ef\u505a\u5230\u5feb\u901f\u67e5\u8be2\u3002\n\n\u4ee3\u7801\u5728\u7ec6\u8282\u5904\u7565\u6709\u4e0d\u540c\uff0c\u6ce8\u610f\u4e00\u4e0b\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define reg register\n#define F(i,a,b) for(reg int i=(a);i<=(b);++i)\nusing namespace std;\nbool beginning;\ninline ll read();\nconst int M=4e6+5,N=20;\nint n,cnt,p[N],q[N];\nll pw[N] {1},sum[M],a[M],tot[M],b[M];\ninline ll rev(ll x) {\n\tll ans=0;\n\twhile(x)ans=ans*10+x%10,x/=10;\n\treturn ans;\n}\nvoid dfs(int n,int x,ll s,ll t) {\n\tif(x==(n+1>>1)) {\n\t\ttot[++cnt]=t;\n\t\tb[cnt]=a[cnt]=s;//\u8bb0\u5f55\u53ef\u80fd\u7684\u60c5\u51b5 \n\t\treturn;\n\t}\n\tF(i,(x==0),18) {\n\t\tif(n==(x<<1|1) and (i&1))continue;\n\t\tll tmp=x?p[i]:q[i];\n\t\tif(n==(x<<1|1))tmp=1;\n\t\tif(!tmp)continue;\n\t\tif(n==(x<<1|1))dfs(n,x+1,s+pw[x]*i,t*tmp);\n\t\telse dfs(n,x+1,s+(pw[x]+pw[n-x-1])*i,t*tmp);\n\t}\n}\ninline void init() {\n\tF(i,1,15)pw[i]=pw[i-1]*10;\n\tF(i,0,9)F(j,0,9)++p[i+j],q[i+j]+=(i!=0);\n\t//\u51fa\u73b0\u67d0\u4e2a\u548c\u7684\u4e0d\u540c\u7ec4\u5408\u60c5\u51b5\u6570 \n\tF(i,1,10)dfs(i,0,0,1);\n\t//\u9884\u5904\u7406 \n\tint m=cnt;\n\tsort(a+1,a+cnt+1);\n\tcnt=unique(a+1,a+cnt+1)-a-1;\n\tF(i,1,m) {\n\t\tint pos=lower_bound(a+1,a+cnt+1,b[i])-a;\n\t\tsum[pos]+=tot[i];//\u521d\u503c \n\t}\n\tF(i,1,cnt) {\n\t\tll t=a[i]+rev(a[i]);\n\t\tint pos=lower_bound(a+1,a+cnt+1,t)-a;\n\t\tif(pos!=cnt+1 and a[pos]==t)sum[pos]+=sum[i];\n\t\t++sum[i];\n\t\tsum[i]+=sum[i-1];\n\t}\n}\n\ninline ll cal(ll x) {\n\tif(!x)return 0;\n\tint pos=upper_bound(a+1,a+cnt+1,x)-a-1;\n\treturn x+sum[pos]-pos;\n}\nbool ending;\nint main() {\n//\tsystem(\"color fc\");\n// \tprintf(\"%.2lfMB\\n\",1.0*(&beginning-&ending)/1024/1024);\n\tinit();\n\tn=read();\n\tll l,r;\n\tF(i,1,n) {\n\t\tl=read(),r=read();\n\t\tprintf(\"%lld\\n\",cal(r)-cal(l-1));\n\t}\n\treturn 0;\n}\ninline ll read() {\n\treg ll x=0;\n\treg char c=getchar();\n\twhile(!isdigit(c))c=getchar();\n\twhile(isdigit(c))x=(x<<3)+(x<<1)+(c^48),c=getchar();\n\treturn x;\n}\n```\n\n[AC](https://www.luogu.com.cn/record/55309029)\n\n\u6b22\u8fce\u4ea4\u6d41\u8ba8\u8bba\uff0c\u8bf7\u70b9\u4e2a\u8d5e\u54e6~",
        "postTime": 1628430156,
        "uid": 415473,
        "name": "\u262f\u262f\u67ab\u262f\u262f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P7802 [COCI2015-2016#6] SAN"
    },
    {
        "content": "\u5bf9\u4e8e\u4e00\u4e2a\u6570 $\\overline{s_1s_2s_3}$\uff0c\u8fdb\u884c\u4e00\u6b21\u53d8\u6362\u540e\u4f1a\u53d8\u6210 $\\overline{(s_1+s_3)(s_2+s_2)(s_3+s_1)}$\uff0c\u4e0d\u8003\u8651\u8fdb\u4f4d\u7684\u8bdd\uff0c\u5f88\u660e\u663e\u6bcf\u53d8\u5316\u4e00\u6b21\u5c31\u4f1a\u53d8\u6210\u4e00\u4e2a\u56de\u6587\u4e32\uff0c\u4e14\u8fd9\u4e2a\u56de\u6587\u4e32\u6700\u9ad8\u4f4d\u662f $18$\u3002\n\n\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u5148\u9884\u5904\u7406\u51fa\u6765\u6240\u6709\u56de\u6587\u4e32\u7684\u53ea\u7528\u4e00\u6b21\u5c31\u80fd\u6784\u6210\u8fd9\u4e2a\u56de\u6587\u4e32\u7684\u65b9\u6848\u6570\u3002\u6c42\u8fd9\u4e2a\u7684\u65b9\u6848\u6570\u5373\u4e3a\u6bcf\u4e2a\u4f4d\u5b50\u4e0a\u53ef\u80fd\u7684\u6570\u7684\u4e58\u79ef\u3002\n\n\u8fd9\u4e2a\u53ef\u4ee5\u5229\u7528\u6570\u4f4d dp \u6c42\u89e3\u3002\n\n\u5148\u679a\u4e3e\u603b\u4f4d\u6570\uff0c\u518d\u679a\u4e3e\u6bcf\u4e00\u4f4d\uff0c\u7b2c\u4e00\u4f4d\u4e0d\u80fd\u4e3a $0$\uff0c\u6ce8\u610f\u4e2d\u95f4\u4f4d\u6570\u9700\u8981\u7279\u6b8a\u5904\u7406\uff0c\u7136\u540e\u6700\u540e\u65b9\u6848\u6570\u76f8\u4e58\u3002\n\n\u5148\u79bb\u6563\u5316\uff0c\u7136\u540e\u5904\u7406\u4e0d\u662f\u5728\u7b2c\u4e00\u6b21\u5c31\u6784\u6210\u7684\u60c5\u51b5\uff0c\u5982\u679c\u4e00\u4e2a\u56de\u6587\u4e32\u80fd\u88ab\u56de\u6587\u4e32\u7ec4\u6210\uff0c\u90a3\u4e48\u65b9\u6848\u6570\u9012\u5f52\u7d2f\u52a0\u5373\u53ef\u3002\n\n\u4f46\u8fd8\u6709\u4e2a\u95ee\u9898\uff0c\u5982 $5+5=10,10+1=11$\uff0c\u6240\u4ee5 $5$ \u4f1a\u51fa\u73b0\u5728\u4ee5 $5,10$ \u5f00\u59cb\u7684\u8868\u4e2d\uff0c\u4f46\u7edf\u8ba1\u65f6\u5b9e\u9645\u4e0a\u53ea\u7edf\u8ba1\u4e86 $10$\u3002\n\n\u8fd9\u4e2a\u597d\u5904\u7406\uff0c\u5bf9\u4e8e $18$ \u4ee5\u5185\u7684\u6570\uff0c\u6c42\u51fa\u5176\u88ab $18$ \u4ee5\u4e0b\u7684\u6570\u6784\u6210\u7684\u65b9\u6848\u6570\u5373\u53ef\u3002\n\n\u5bf9\u7b2c\u4e00\u4f4d\u7279\u6b8a\u5904\u7406\uff0c\u6c42\u51fa\u5728 $18$ \u4e00\u4e0b\u4e0d\u5305\u62ec $0$ \u6784\u6210\u7684\u65b9\u6848\u6570\u3002\n\n\u6700\u540e\u6c42\u524d\u7f00\u548c\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u8be2\u95ee\uff0c\u4e8c\u5206\u627e\u5230\u7b2c\u4e00\u4e2a\u4e0d\u5927\u4e8e\u5b83\u7684\u56de\u6587\u6570\uff0c\u7528\u524d\u7f00\u548c\u6c42\u533a\u95f4\u548c\u5373\u53ef\u3002\n\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#define int long long\nusing namespace std;\nconst int N=4e6+5;\nint sum[N],cnt,power[15],p[20],q[20],lim[N];\nstruct node\n{\n\tint name,data;\n}b[N];\nint cmp(node fi,node se)\n{\n\treturn fi.data<se.data;\n}\nint getnum(int x)\n{\n\tint sum=0;\n\twhile(x)\n\t{\n\t\tsum=sum*10+x%10;\n\t\tx/=10;\n\t}\n\treturn sum;\n}\nint findsum(int x)\n{\n\tint l=0,r=cnt;\n\twhile(l<r)\n\t{\n\t\tint mid=(l+r+1)>>1;\n\t\tif(b[mid].data<=x)l=mid;\n\t\telse r=mid-1;\n\t}\n\treturn l;\n}\nint clac(int x)\n{\n\tint num=sum[findsum(x)];\n\treturn num+x;\n}\nvoid dfs(int n,int x,int tot,int num)\n{\n\tif(x>(n+1)/2)\n\t{\n\t\tlim[++cnt]=num;\n\t\tb[cnt]={cnt,tot};\n\t\treturn;\n\t}\n\tfor(int i=0;i<=18;i++)\n\t{\n\t\tif(x==1&&i==0)continue;\n\t\tif(n%2==1&&x==n/2+1&&i%2==1)continue;\n\t\tint tmp=p[i];\n\t\tif(x==1)tmp=q[i];\n\t\tif(tmp==0)continue;\n\t\tif(n%2==1&&x==n/2+1)dfs(n,x+1,tot+i*power[x-1],num*1);\n\t\telse dfs(n,x+1,tot+i*power[x-1]+i*power[n-x],num*tmp);\n\t}\n}\nvoid prepare()\n{\n\tpower[0]=1;\n\tfor(int i=1;i<=12;i++)power[i]=power[i-1]*10;\n\tfor(int i=0;i<=9;i++)for(int j=0;j<=9;j++)p[i+j]++,q[i+j]+=(i!=0);\n\tfor(int i=1;i<=10;i++)dfs(i,1,0,1);\n\tsort(b+1,b+1+cnt,cmp);\n\tint bef=-1e18,cnp=0;\n\tfor(int i=1;i<=cnt;i++)\n\t{\n\t\tif(b[i].data!=bef)b[cnp]={cnp,b[i-1].data},cnp++;\n\t\tbef=b[i].data;\n\t\tsum[cnp]+=lim[b[i].name];\n\t}\n\tfor(int i=1;i<=cnp;i++)\n\t{\n\t\tint num=b[i].data+getnum(b[i].data);\n\t\tint tim=findsum(num);\n\t\tif(b[tim].data==num)sum[tim]+=sum[i];\n\t\tsum[i]+=sum[i-1];\n\t\t\n\t}\n}\nsigned main()\n{\n\tprepare();\n\tint q;\n\tscanf(\"%lld\",&q);\n\tfor(int i=1;i<=q;i++)\n\t{\n\t\tint l,r;\n\t\tscanf(\"%lld%lld\",&l,&r);\n\t\tint ans=clac(r)-clac(l-1);\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1666261134,
        "uid": 275793,
        "name": "Gmt\u4e36FFF",
        "ccfLevel": 5,
        "title": "P7802 [COCI2015-2016#6] SAN \u9898\u89e3"
    },
    {
        "content": "### \u9898\u76ee\u63cf\u8ff0\n\u8bbe $rev(x)$ \u4e3a $x$ \u5728\u5341\u8fdb\u5236\u4e0b\u6570\u5b57\u7ffb\u8f6c\u540e\u6240\u5f62\u6210\u7684\u65b0\u6570\u5b57\uff0c\u5b9a\u4e49\u4e00\u5f20\u65e0\u9650\u8868 $A$ \uff0c\u5176\u4e2d $\\forall i \\in N^{*}$ \uff0c\u6709 $A_{i,1}=i$ \uff0c $\\forall i,j \\in N^{*},j\\neq1$ \uff0c\u6709 $A_{i,j}=A_{i,j-1}+rev(A_{i,j-1})$ \uff0c\u6709 $Q$ \u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u8be2\u95ee\u7ed9\u51fa $a,b$ \uff0c\u6c42\u5728\u8fd9\u5f20\u8868\u4e2d\uff0c $[a,b]$ \u95f4\u7684\u5143\u7d20\u51fa\u73b0\u7684\u6b21\u6570\u603b\u548c\u3002\n\n### \u5206\u6790\n\u8bbe $f(x)=x+rev(x)$ \n\n\u6211\u4eec\u8003\u8651\u8fd9\u6837\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5f88\u663e\u7136\u7684\u662f\uff0c\u5217\u8868\u4e2d\u6bcf\u4e00\u884c\u7684\u5143\u7d20\u662f\u5355\u8c03\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4efb\u610f\u7684 $a_{i,j}$ \uff0c\u5176\u4e2d\u6709 $i,j \\geq 2$ \uff0c $a_{i,j}>a_{i,j-1}$ \u6052\u6210\u7acb\u3002\u56e0\u6b64\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u6bcf\u4e00\u4e2a\u51fa\u73b0\u5728\u5217\u8868\u4e2d\u7684\u6570\u5b57\u4e00\u5b9a\u80fd\u4e14\u4ec5\u80fd\u88ab\u6bd4\u8fd9\u4e2a\u6570\u5b57\u5c0f\u7684\u6570\u5b57\u8f6c\u79fb\u8fc7\u6765\u3002\u56e0\u6b64\uff0c\u5728\u503c\u57df\u5728 $10^6$ \u8303\u56f4\u5185\u65f6\uff0c\u6709\u4e00\u4e2a\u975e\u5e38 trivial \u7684\u505a\u6cd5\uff0c\u6211\u4eec\u8bbe $dp_{i}$ \u4e3a $i$ \u5728\u8868\u5185\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u90a3\u4e48\uff0c\u5f88\u663e\u7136\uff0c\u6211\u4eec\u53ef\u4ee5\u5237\u8868\u8f6c\u79fb\uff0c\u5c06\u6240\u6709\u7684\u72b6\u6001\u521d\u59cb\u5316\u4e3a $1$ \uff0c\u4e4b\u540e\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u6570\uff0c\u5df2\u7ecf\u901a\u8fc7\u6240\u6709\u6bd4\u5b83\u5c0f\u7684\u6570\u8fdb\u884c\u8f6c\u79fb\u8fc7\u540e\uff0c\u5b83\u5728\u8868\u4e2d\u7684\u51fa\u73b0\u6b21\u6570\u5c31\u5df2\u7ecf\u88ab\u786e\u5b9a\u4e86\uff0c\u6b64\u65f6\uff0c\u7528\u8fd9\u4e2a\u6570\u6765\u66f4\u65b0\u4e4b\u540e\u7684\u72b6\u6001\uff0c\u4e0d\u59a8\u8bbe\u8fd9\u4e2a\u6570\u4e3a $x$ \uff0c\u5219\u4ee4 $dp_{f(x)}$ \u52a0\u4e0a $dp_{x}$ \u5373\u53ef\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a\n$$dp_{f(x)}=dp_{f(x)}+dp_{x}$$\n\n### \u8fdb\u4e00\u6b65\u8003\u8651\n\n\u6211\u4eec\u5148\u8bc1\u660e\u4e00\u4e2a\u5f15\u7406\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u6620\u5c04 $g:N^*\\rightarrow N^*$ \uff0c\u5bf9\u4e8e\u4e00\u4e2a\u6b63\u6574\u6570 $a$ \uff0c\u82e5 $\\forall i \\in N^*$  \uff0c\u6709 $g(i)\\neq a$ \u3002\u5219   $\\forall i,j \\in N^*$  \uff0c\u6709 $g^j(i)\\neq a$ \u6210\u7acb\u3002\n\n\u6211\u4eec\u5229\u7528\u53cd\u8bc1\u6cd5\uff0c\u5047\u8bbe $g^j(i)= a$ \uff0c\u5219 $g(g^{j-1}(i))=a$ \uff0c\u7531\u4e8e $g$ \u662f $N^*\\rightarrow N^*$ \u7684\u6620\u5c04\uff0c\u5219   $g^{j-1}(i)\\in N^*$ \uff0c\u4e14 $g(g^{j-1}(i))=a$ \uff0c\u4e0e$\\forall i \\in N^*$ \uff0c\u6709 $g(i)\\neq a$ \u7684\u6761\u4ef6\u77db\u76fe\uff0c\u6545\u5f97\u8bc1\u3002\n\n\u5f88\u663e\u7136\uff0c $f$ \u662f\u4e00\u4e2a\u6ee1\u8db3\u8fd9\u4e2a\u6761\u4ef6\u7684\u6620\u5c04\uff0c\u6211\u4eec\u628a\u8868\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20\u7528 $f(x)$ \u8868\u793a\u51fa\u6765\u3002\n\n $\\forall i \\in N^{*}$ \uff0c\u6709 $A_{i,1}=i$\uff0c$\\forall i,j \\in N^{*},j\\neq1$ \uff0c\u6709 $A_{i,j}=f^{j-1}(i)$ \u3002\u5f88\u663e\u7136\uff0c\u6839\u636e\u8fd9\u4e2a\u5f15\u7406\uff0c\u6211\u4eec\u5f97\u51fa\u4e86\u4e00\u4e2a\u91cd\u8981\u7684\u7ed3\u8bba\uff1a\u5728\u8fd9\u4e2a\u8868\u683c\u4e2d\uff0c\u7b2c\u4e8c\u5217\u6ca1\u6709\u51fa\u73b0\u8fc7\u7684\u6570\uff0c\u5728\u7b2c\u4e09\u5217\u53ca\u4ee5\u540e\u4e00\u5b9a\u4e0d\u4f1a\u518d\u6b21\u51fa\u73b0\u3002\n\n\u6211\u4eec\u518d\u6b21\u8003\u8651\u53e6\u4e00\u4ef6\u4e8b\u60c5\uff0c\u5047\u5982\u5728\u4e0d\u8003\u8651\u8fdb\u4f4d\u7684\u60c5\u51b5\u4e0b\uff0c\u5728\u7b2c\u4e8c\u5217\u4e2d\u51fa\u73b0\u7684\u67d0\u4e2a\u6570 $x$ \u6709 $k+1$ \u4f4d\uff0c\u5206\u522b\u4e3a $0 - k$ \u4f4d\uff0c\u7531 $rev(x)$ \u7684\u5b9a\u4e49\u53ef\u4ee5\u77e5\u9053\uff0c\u5bf9\u4e8e\u7b2c $i$ \u4f4d\u800c\u8a00\uff0c\u5176\u4e0e\u7b2c $k-i$ \u4f4d\u4e00\u5b9a\u662f\u76f8\u540c\u7684\uff0c\u5e76\u4e14\uff0c\u5f53 $k$ \u662f\u5076\u6570\u65f6\uff0c\u7b2c $\\frac{k}{2}$ \u4f4d\u5fc5\u4e3a\u5076\u6570\uff0c\u90a3\u4e48\uff0c\u901a\u8fc7 dfs \uff0c\u53ef\u4ee5\u6c42\u51fa\u5728\u503c\u57df\u5185\u54ea\u4e9b\u6570\u662f\u51fa\u73b0\u4e86\u7684\uff0c\u6839\u636e\u6bcf\u4e00\u4f4d\u7684\u7ec4\u6210\u60c5\u51b5\u6570\uff0c\u4e5f\u53ef\u4ee5\u5229\u7528\u4e58\u6cd5\u539f\u7406\u6c42\u51fa\u51fa\u73b0\u6b21\u6570\uff0c\u6ce8\u610f\u9996\u4f4d\u4e0d\u80fd\u4e3a $0$ \uff0c\u5f88\u663e\u7136\uff0c\u7531\u4e8e\u63d0\u5230\u7684\u7b2c $i$ \u4f4d\u4e0e\u7b2c $k-i$ \u4f4d\u76f8\u540c\u7684\u6027\u8d28\uff0c\u5219\u53ef\u4ee5\u51fa\u73b0\u7684\u6570\u7684\u4e2a\u6570\u5728 $\\sqrt{n}$ \u7684\u7ea7\u522b\u5185\u3002\u6211\u4eec\u53ef\u4ee5\u5728 dfs \u7684\u65f6\u5019\u5904\u7406\u51fa\u73b0\u7684\u6570\u4e0e\u5176\u51fa\u73b0\u6b21\u6570\uff0c\u5c06\u5176\u79bb\u6563\u5316\u4e0b\u6765\uff0c\u518d\u8fdb\u884c dp \u7684\u8f6c\u79fb\u3002\u5f88\u663e\u7136\uff0c\u7ef4\u62a4\u4e00\u4e2a\u79bb\u6563\u5316\u540e\u7684\u524d\u7f00\u548c\uff0c\u8be2\u95ee\u65f6\u76f4\u63a5\u67e5\u627e\u533a\u95f4\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(\\sqrt{n}\\log n+Q\\log n)$ \u3002\n\n### tips:\n\n\u8fd9\u9898\u4ee3\u7801\u7ec6\u8282\u975e\u5e38\u7e41\u6742\uff0c\u6ce8\u610f\u60f3\u6e05\u695a\u6bcf\u4e2a\u7ec6\u8282\u90e8\u5206\uff0c\u4e0d\u8981\u6f0f\u6389\u5206\u7c7b\u8ba8\u8bba\u7684\u6b65\u9aa4\u3002~~\u7531\u4e8e\u672c\u4eba\u5199\u4ee3\u7801\u65f6\u601d\u7ef4\u8fc7\u4e71\uff0c\u662f\u5178\u578b\u7684\u53cd\u9762\u6559\u6750\uff0c\u4ee3\u7801\u5c31\u4e0d\u653e\u4e86~~\u3002",
        "postTime": 1645605339,
        "uid": 525349,
        "name": "Sakura_xyz",
        "ccfLevel": 4,
        "title": "P7802 [COCI2015-2016#6] SAN \u9898\u89e3"
    }
]
[
    {
        "content": "# [\u8bed\u8a00\u6708\u8d5b202302] \u5927\u7897\u5bbd\u9762 \u9898\u89e3\r\n\r\n## Source & Knowledge\r\n\r\n2023 \u5e74 2 \u6708\u8bed\u8a00\u6708\u8d5b\uff0c\u7531\u6d1b\u8c37\u7f51\u6821\u5165\u95e8\u8ba1\u5212/\u57fa\u7840\u8ba1\u5212\u63d0\u4f9b\u3002\r\n\r\n\u672c\u9898\u8003\u67e5\u4e8c\u7ef4 bool \u6570\u7ec4\u3001\u679a\u4e3e\u6280\u5de7\u3002\r\n\r\n## \u6587\u5b57\u9898\u89e3\r\n\r\n### \u9898\u76ee\u5927\u610f\r\n\r\n\u6709 $n$ \u4e2a\u4eba\uff0c\u5176\u4e2d $p$ \u5bf9\u4eba\u662f\u654c\u4eba\uff0c$q$ \u5bf9\u4eba\u662f\u670b\u53cb\uff0c\u5176\u4f59\u6bcf\u5bf9\u4eba\u5747\u662f\u964c\u751f\u4eba\u3002\r\n\r\n\u670b\u53cb\u4e4b\u95f4\u4f1a\u63e1\u624b\u4e00\u6b21\uff0c  \r\n\u654c\u4eba\u4e4b\u95f4\u4e0d\u4f1a\u63e1\u624b\uff0c  \r\n\u5bf9\u4e00\u5bf9\u964c\u751f\u4eba\u800c\u8a00\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u4eba\u7684\u670b\u53cb\u4e4b\u4e00\u662f\u53e6\u4e00\u4e2a\u4eba\u7684\u654c\u4eba\uff0c\u5219\u4e0d\u63e1\u624b\uff0c\u5426\u5219\u63e1\u624b\u3002\r\n\r\n\u6c42\u4e00\u5171\u63e1\u4e86\u51e0\u6b21\u624b\u3002\r\n\r\n\u5982\u679c\u4ee4 $m = p + q$\uff0c\u4fdd\u8bc1\uff1a\r\n- \u5bf9 $20\\%$ \u7684\u6570\u636e\uff0c\u4fdd\u8bc1 $m = 0$\u3002\r\n- \u5bf9 $50\\%$ \u7684\u6570\u636e\uff0c\u4fdd\u8bc1 $n, m \\leq 100$\u3002\r\n- \u5bf9 $70\\%$ \u7684\u6570\u636e\uff0c\u4fdd\u8bc1 $n, m \\leq 10^3$\u3002\r\n- \u5bf9 $100\\%$ \u7684\u6570\u636e\uff0c\u4fdd\u8bc1 $2 \\leq n \\leq 3 \\times 10^4$\uff0c$1 \\leq u, v \\leq n$\uff0c$0 \\leq p,q \\leq m \\leq 10^3$\u3002\r\n\r\n### \u5206\u6790\r\n\r\n#### \u7b97\u6cd5\u4e00\uff1a\u5747\u4e3a\u964c\u751f\u4eba\u7684\u60c5\u51b5\r\n\r\n\u5982\u679c $m = 0$\uff0c\u5219\u610f\u5473\u7740\u5927\u5bb6\u90fd\u662f\u964c\u751f\u4eba\uff0c\u4e0d\u5b58\u5728\u654c\u4eba\u548c\u670b\u53cb\u5173\u7cfb\u3002\u90a3\u4e48\u4e00\u5bf9\u964c\u751f\u4eba\u4e4b\u95f4\u4e00\u5b9a\u4f1a\u63e1\u624b\u3002\u8003\u8651\u5bf9\u4e8e\u6bcf\u4e2a\u4eba\uff0c\u90fd\u4f1a\u548c\u5176\u5b83 $n - 1$ \u4e2a\u4eba\u63e1\u624b\u4e00\u6b21\uff0c\u603b\u5171\u63e1\u624b $n \\times (n - 1)$ \u6b21\u3002\u800c $a$ \u548c $b$ \u63e1\u624b\u4e0e $b$ \u548c $a$ \u63e1\u624b\u662f\u540c\u4e00\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u8ba1\u7b97\u4e86\u4e24\u6b21\uff0c\u6240\u4ee5\u603b\u65b9\u6848\u6570\u8981\u9664\u6389 $2$\u3002\u56e0\u6b64\u5f53 $m = 0$ \u65f6\uff0c\u7b54\u6848\u5c31\u662f $n \\times (n - 1) / 2$\u3002\r\n\r\n#### \u7b97\u6cd5\u4e8c\uff1a\u4f9d\u7167\u9898\u610f\u679a\u4e3e\r\n\r\n\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u6bcf\u5bf9\u4eba $(i,j)$\u3002\u8bb0\u5f55\u63e1\u624b\u6b21\u6570 `ans`\u3002\r\n- \u5982\u679c $i$ \u548c $j$ \u662f\u670b\u53cb\uff0c\u5219\u4ed6\u4eec\u63e1\u624b\uff0c\u4ee4 `ans++`\u3002\r\n- \u5982\u679c $i$ \u548c $j$ \u662f\u654c\u4eba\uff0c\u5219\u4ed6\u4eec\u4e0d\u63e1\u624b\uff0c`ans` \u4e0d\u53d8\u3002\r\n- \u5982\u679c $i$ \u548c $j$ \u662f\u964c\u751f\u4eba\uff0c\u5219\u4ee4 $k$ \u4ece $1$ \u5230 $n$ \u679a\u4e3e\uff0c\u5982\u679c\u5b58\u5728\u4e00\u4e2a $k$ \u4f7f\u5f97 $k$ \u662f $i$ \u7684\u670b\u53cb\u4e14\u662f $j$ \u7684\u654c\u4eba\uff08\u6216\u662f $j$ \u7684\u670b\u53cb\u4e14\u662f $i$ \u7684\u654c\u4eba\uff09\uff0c\u5219\u7b26\u5408\u964c\u751f\u4eba\u4e4b\u95f4\u4e0d\u63e1\u624b\u7684\u6761\u4ef6\uff0c`ans` \u4e0d\u53d8\uff0c\u5426\u5219\u4ee4 `ans++`\uff0c\u8bb0\u5f55\u7b54\u6848\u3002\r\n\r\n\u5224\u65ad\u4e24\u4eba\u662f\u5426\u662f\u654c\u4eba\u6216\u670b\u53cb\u53ef\u4ee5\u7528\u4e24\u4e2a\u4e8c\u7ef4\u6570\u7ec4 isFriend \u548c isEnemy \u8bb0\u5f55\u3002\r\n  \r\n\u679a\u4e3e\u90e8\u5206\u4ee3\u7801\u5982\u4e0b\uff1a\r\n\r\n```cpp\r\nfor (int i = 1; i <= n; ++i) \r\n  for (int j = i + 1; j <= n; ++j) if (isFriend[i][j]) {\r\n    ++ans;\r\n  } else if (!isEnemy[i][j]) {\r\n    bool flag = true; // flag \u8bb0\u5f55\u662f\u5426\u63e1\u624b\r\n    for (int k = 1; k <= n; ++k) \r\n      if ((isFriend[i][k] && isEnemy[k][j]) || (isFriend[j][k] && isEnemy[k][i])) { // \u6ce8\u610f\u5224\u65ad\u6761\u4ef6\u9700\u8981\u52a0\u62ec\u53f7\r\n        flag = false; // \u6b64\u65f6\u7b26\u5408\u4e0d\u63e1\u624b\u6761\u4ef6\u3002\r\n        break; // \u65e0\u9700\u7ee7\u7eed\u679a\u4e3e\r\n      }\r\n    if (flag) ++ans; // \u5982\u679c\u679a\u4e3e\u7ed3\u675f\u540e flag \u4ecd\u662f 1\uff0c\u5219\u8868\u793a\u4e0d\u5b58\u5728\u4e0d\u63e1\u624b\u7684\u6761\u4ef6\uff0c\u5219\u63e1\u624b\u3002\r\n  }\r\n```\r\n\r\n\u8fd9\u4e00\u7b97\u6cd5\u9700\u8981\u4e09\u5c42\u957f\u5ea6\u4e3a $n$ \u7684 for \u5faa\u73af\uff0c\u56e0\u6b64\u8fd0\u7b97\u91cf\u5728 n^3 \u5de6\u53f3\u3002\u53ef\u4ee5\u901a\u8fc7 $n \\leq 100$ \u7684\u6570\u636e\u3002\u5f53 $n = 10^3$ \u65f6\uff0c\u8fd0\u7b97\u91cf\u5728 $10^9$ \u5de6\u53f3\uff0c\u800c\u8ba1\u7b97\u673a\u4e00\u79d2\u53ea\u80fd\u5904\u7406\u5927\u7ea6 $10^8$ \u6b21\u8fd0\u7b97\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u4f1a\u8d85\u65f6\u3002\r\n\r\n#### \u7b97\u6cd5\u4e09\uff1a\u4f18\u5316\u70b9\u5bf9\u679a\u4e3e\r\n\r\n\u6ce8\u610f\u5230\u964c\u751f\u4eba\u70b9\u5bf9\u6570\u91cf\u5b9e\u5728\u662f\u592a\u591a\u4e86\uff0c\u5927\u7ea6\u6709 $n^2 - m$ \u5bf9\u3002\u4f46\u662f\u5927\u90e8\u5206\u964c\u751f\u4eba\u90fd\u6ee1\u8db3\u63e1\u624b\u6761\u4ef6\uff0c\u662f\u65e0\u6548\u679a\u4e3e\u3002\u8003\u8651\u6b63\u96be\u5219\u53cd\uff0c\u6211\u4eec\u5148\u7b97\u51fa\u672c\u8eab\u5047\u8bbe\u6240\u6709\u964c\u751f\u4eba\u90fd\u63e1\u624b\u65f6\u7684\u7b54\u6848\uff0c\u7136\u540e\u51cf\u53bb\u4e0d\u63e1\u624b\u7684\u964c\u751f\u4eba\u5bf9\u6570\u3002\r\n\r\n\u9996\u5148\u7b97\u51fa\u6240\u6709\u964c\u751f\u4eba\u90fd\u63e1\u624b\u7684\u7b54\u6848\uff1a\u5728\u7b97\u6cd5\u4e00\u4e2d\u5df2\u7ecf\u89e3\u91ca\u4e86\u4e00\u5171\u6709 $n \\times (n - 1) / 2$ \u5bf9\u4eba\u3002\u4e14\u6709 $q$ \u5bf9\u654c\u4eba\u3002\u8fd9 $q$ \u5bf9\u654c\u4eba\u4e0d\u63e1\u624b\uff0c\u5176\u4ed6\u4eba\u5747\u63e1\u624b\u3002\u6240\u4ee5\u6b64\u65f6\u7b54\u6848\u662f $n \\times (n - 1) / 2$\u3002\r\n\r\n\u63a5\u4e0b\u6765\u8003\u5bdf\u4e00\u5bf9\u654c\u4eba\u5173\u7cfb $(u, v)$ \u53ef\u4ee5\u9020\u6210\u54ea\u4e9b\u4eba\u4e0d\u63e1\u624b\uff1a\u8003\u8651\u679a\u4e3e $v$ \u7684\u670b\u53cb $w$\u3002\u8003\u5bdf $u$ \u548c $w$\uff0c\u6ee1\u8db3\u300e$v$ \u662f $u$ \u7684\u654c\u4eba\u4e14\u662f $w$ \u7684\u670b\u53cb\u300f\uff0c\u6240\u4ee5\u5982\u679c $u$ \u548c $w$ \u662f\u964c\u751f\u4eba\uff0c\u5219\u5b83\u4eec\u4e0d\u63e1\u624b\u3002\u7c7b\u4f3c\u7684\u4e5f\u8981\u679a\u4e3e $u$ \u7684\u670b\u53cb\u3002\u6240\u4ee5\u53ef\u4ee5\u6309\u7167\u679a\u4e3e\u654c\u4eba\u5173\u7cfb-\u670b\u53cb\u5173\u7cfb\u7684\u65b9\u5f0f\u6765\u5224\u5b9a\u4e0d\u63e1\u624b\u7684\u964c\u751f\u4eba\u3002\u5982\u4f55\u679a\u4e3e $v$ \u7684\u670b\u53cb\u5462\uff1f\u53ef\u4ee5\u4ee4 $w = 1 \\sim n$ \u90fd\u679a\u4e3e\u4e00\u904d\uff0c\u68c0\u67e5 `isFriend[w][v]` \u662f\u5426\u4e3a `true` \u5373\u53ef\u3002\u6bcf\u6b21\u679a\u4e3e\u5230\u4e00\u5bf9\u4e0d\u63e1\u624b\u7684\u964c\u751f\u4eba\uff0c\u5c31\u4ee4 `ans--`\u3002\r\n\r\n\u6700\u540e\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u7b54\u6848\u53ef\u80fd\u4f1a\u7b97\u91cd\u3002\u6240\u4ee5\u9700\u8981\u4e00\u4e2a\u989d\u5916\u7684\u6570\u7ec4 `calced[u][v]` \u8868\u793a\u6211\u4eec\u5df2\u7ecf\u8ba1\u7b97\u8fc7 $u$ \u548c $v$ \u4e0d\u63e1\u624b\u7684\u60c5\u51b5\u4e86\u3002\r\n\r\n```cpp\r\nint enemy[2][maxm];\r\nfor (int i = 1; i <= q; ++i) { // \u56e0\u4e3a\u8981\u679a\u4e3e\u654c\u4eba\u5173\u7cfb\uff0c\u6240\u4ee5\u8bfb\u5165\u65f6\u9700\u8981\u8bb0\u5f55\u654c\u4eba\u7684\u4fe1\u606f\r\n  cin >> enemy[0][i] >> enemy[1][i];\r\n  isEnemy[enemy[0][i]][enemy[1][i]] = isEnemy[enemy[1][i]][enemy[0][i]] = true;\r\n}\r\n\r\nfor (int i = 1; i <= q; ++i) { // \u679a\u4e3e\u654c\u4eba\u5173\u7cfb\r\n  int u = enemy[0][i], v = enemy[1][i];\r\n  for (int w = 1; w <= n; ++w) if (isFriend[v][w] && (!isEnemy[u][w]) && (!isFriend[u][w]) && (!calced[u][w])) {\r\n    --ans;\r\n    calced[u][w] = calced[w][u] = true;\r\n  }\r\n  swap(u, v); // \u4ea4\u6362 u,v \u518d\u6765\u4e00\u904d\uff0c\u76f8\u5f53\u4e8e\u679a\u4e3e\u539f\u5148 u \u7684\u670b\u53cb\u3002\r\n  for (int w = 1; w <= n; ++w) if (isFriend[v][w] && (!isEnemy[u][w]) && (!isFriend[u][w]) && (!calced[u][w])) {\r\n    --ans;\r\n    calced[u][w] = calced[w][u] = true;\r\n  }\r\n}\r\n```\r\n\r\n\u8fd9\u4e00\u7b97\u6cd5\u4e00\u5171\u9700\u8981\u5f00\u4e09\u4e2a\u5927\u5c0f\u4e3a $n^2$ \u7684 bool \u6570\u7ec4\u3002\u5f53 $n = 3 \\times 10^4$ \u65f6\u4f1a\u8d85\u8fc7\u7a7a\u95f4\u9650\u5236\u3002\u6ce8\u610f\u5230 `calced` \u6570\u7ec4\u53ef\u4ee5\u548c `isEnemy` \u6570\u7ec4\u5408\u5e76\uff1a\u5982\u679c\u4e24\u4e2a\u4eba\u662f\u654c\u4eba\uff0c\u90a3\u4e48\u4ed6\u4eec\u5f53\u7136\u5df2\u7ecf\u4ece\u7b54\u6848\u4e2d\u88ab\u53bb\u9664\u4e86\u3002\u6240\u4ee5 `calced[u][v]` \u5373\u53ef\u4ee5\u7528\u6765\u8868\u793a $(u,v)$ \u662f\u5df2\u7ecf\u8ba1\u7b97\u8fc7\u4e0d\u4f1a\u63e1\u624b\u7684\u964c\u751f\u4eba\uff0c\u4e5f\u53ef\u4ee5\u8868\u793a\u4ed6\u4eec\u672c\u8eab\u662f\u654c\u4eba\u3002\u603b\u4e4b\u7528 `calced` \u6570\u7ec4\u6765\u8868\u793a\u5df2\u7ecf\u8ba1\u7b97\u8fc7\u4e0d\u4f1a\u63e1\u624b\u7684\u4eba\uff0c\u5219\u53ef\u4ee5\u7701\u53bb `isEnemy` \u6570\u7ec4\u3002\u6b64\u65f6\u53ea\u9700\u8981\u5f00\u4e24\u4e2a\u5927\u5c0f\u4e3a $n^2$ \u7684 bool \u6570\u7ec4\uff0c\u7a7a\u95f4\u53ef\u4ee5\u627f\u53d7\u3002\r\n\r\n```cpp\r\nint enemy[2][maxm];\r\nfor (int i = 1; i <= q; ++i) { // \u56e0\u4e3a\u8981\u679a\u4e3e\u654c\u4eba\u5173\u7cfb\uff0c\u6240\u4ee5\u8bfb\u5165\u65f6\u9700\u8981\u8bb0\u5f55\u654c\u4eba\u7684\u4fe1\u606f\r\n  cin >> enemy[0][i] >> enemy[1][i];\r\n  calced[enemy[0][i]][enemy[1][i]] = calced[enemy[1][i]][enemy[0][i]] = true;\r\n}\r\n\r\nfor (int i = 1; i <= q; ++i) { // \u679a\u4e3e\u654c\u4eba\u5173\u7cfb\r\n  int u = enemy[0][i], v = enemy[1][i];\r\n  for (int w = 1; w <= n; ++w) if (isFriend[v][w] && (!isFriend[u][w]) && (!calced[u][w])) {\r\n    --ans;\r\n    calced[u][w] = calced[w][u] = true;\r\n  }\r\n  swap(u, v); // \u4ea4\u6362 u,v \u518d\u6765\u4e00\u904d\uff0c\u76f8\u5f53\u4e8e\u679a\u4e3e\u539f\u5148 u \u7684\u670b\u53cb\u3002\r\n  for (int w = 1; w <= n; ++w) if (isFriend[v][w] && (!isFriend[u][w]) && (!calced[u][w])) {\r\n    --ans;\r\n    calced[u][w] = calced[w][u] = true;\r\n  }\r\n}\r\n```\r\n\r\n## \u89c6\u9891\u9898\u89e3\r\n\r\n**\u5b8c\u6574\u4ee3\u7801\u8bf7\u5728\u89c6\u9891\u4e2d\u89c2\u770b**\u3002\r\n\r\n![](bilibili:BV1L24y1q7Tv?page=7)",
        "postTime": 1522933093,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "B3712 [\u8bed\u8a00\u6708\u8d5b202302] \u5927\u7897\u5bbd\u9762 \u9898\u89e3"
    }
]
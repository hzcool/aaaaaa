[
    {
        "content": "\u8fd9\u9053\u9898\u7684\u6076\u5fc3\u5185\u5b58\u4e0e\u6076\u5fc3\u6570\u636e\u5bfc\u81f4\u5b58\u56fe **~~\u53ea~~** \u4e0d\u53ea\u80fd\u7528**\u94fe\u5f0f\u524d\u5411\u661f**(\u4e2a\u4eba\u4e0d\u5e38\u7528STL),\u4e8e\u662f......\n\n### \u6c38\u8fdc\u559c\u6b22\u94fe\u5f0f\u524d\u5411\u661f!!!\n\n## Code:\n```\n#include<cstdio>\n#define reg register\n#define ll long long\nusing namespace std;\ninline int Read(){//\u5feb\u8bfb,\u4f18\u5316\u65f6\u95f4\n    reg int x=0,f=1;reg char ch=getchar();\n    while((ch<'0' || ch>'9') && ch!='-') ch=getchar();\n    if(ch=='-') f=-1,ch=getchar();\n    while(ch>='0' && ch<='9'){\n        x=(x<<3)+(x<<1)+(ch&15);\n        ch=getchar();\n    }\n    return x*f;\n}\ninline void Print(const ll x){//\u5feb\u8f93,\u4e5f\u662f\u4f18\u5316\u65f6\u95f4\n    if(x<0){putchar('-');Print(-x);}\n    if(x<10) putchar(x+48);\n    else{Print(x/10);putchar(x%10+48);}\n}\ninline void Println(const ll x){Print(x);putchar('\\n');}\nll b[200105],c[200105];\nint n,head[200105],top;//\u4e0a\u53f8\u5173\u7cfb\u4e0d\u4f1a\u8d85\u8fc7\u4eba\u6570,\u6240\u4ee5\u53ef\u4ee5\u7528int\nstruct p{\n    int to,nxt;\n}e[200105];//\u94fe\u5f0f\u524d\u5411\u661f\u5b58\u56fe\ninline void dfs(const int Number){\n    b[Number]=1;\n    for(reg int i=head[Number];i;i=e[i].nxt){\n        reg int some=e[i].to;\n        dfs(some);//\u7edf\u8ba1\u4ed6\u7684\u52a9\u624b\n        c[Number]+=c[some];\n        b[Number]+=b[some];\n    }\n    c[Number]+=b[Number];\n}\ninline void add(int u,int v){//\u94fe\u5f0f\u524d\u5411\u661f\u5efa\u8fb9\n    e[++top].to=v;\n    e[top].nxt=head[u];\n    head[u]=top;\n}\nint main(){\n    n=Read();\n    for(reg int i=2;i<=n;++i){\n    \treg int x=Read();\n        add(x,i);\n    }\n    dfs(1);//\u6162\u6162\u7edf\u8ba1\u5427......\n    for(reg int i=1;i<=n;++i){\n        Print(c[i]);putchar(' ');\n    }\n    putchar('\\n');\n    return 0;\n}\n```\n\n\u94fe\u5f0f\u524d\u5411\u661f\u662f\u89e3\u51b3\u56fe\u8bba\u95ee\u9898\u7684\u5229\u5668,\u5927\u5bb6\u4e00\u5b9a\u8981\u5b66\u4f1a\u54e6",
        "postTime": 1563519288,
        "uid": 42714,
        "name": "momentous",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4615 \u3010[COCI2017-2018#5] Birokracija\u3011"
    },
    {
        "content": "\u8fd9\u9898\u96be\u70b9\u5728\u600e\u4e48\u5904\u7406\u7236\u4eb2\u7ed3\u70b9\u4e0e\u5176\u5b50\u7ed3\u70b9\u7684\u5173\u7cfb\n\n\u7531\u9898\u76ee\u63cf\u8ff0\u53ef\u4ee5\u5f97\u77e5\uff1a**\u6bcf\u4e00\u4e2a\u4eba\u7684\u91d1\u5e01\u6570\u662f\u5176\u5404\u4e2a\u513f\u5b50\u7684\u91d1\u5e01\u6570\u8fd8\u6709\u4ee5\u5176\u4e3a\u6839\u7684\u5b50\u6811\u7684\u7ed3\u70b9\u6570\u7684\u548c**\n\n\u89e3\u91ca\uff1a\n\n1.\u513f\u5b50\u91d1\u5e01\u548c\uff1a\u7531\u4e8e\u6bcf\u505a\u4e00\u6b21\u4efb\u52a1\u5c31\u4f1a\u6709\u4e00\u4e2a\u7ed3\u70b9\u88ab\u5220\u9664\uff0c\uff0c\u56e0\u6b64**\u6bcf\u4e00\u6b21\u64cd\u4f5c\u8fd9\u6761\u94fe\u4e0a\u7684\u70b9\u5230\u6700\u5e95\u7aef\u8ddd\u79bb\u90fd\u51cf1**\uff0c\u56e0\u6b64\u4e00\u4e2a\u513f\u5b50\u4f1a\u52a0\u4e0a\u7684\u91d1\u5e01\u6570\u4e00\u4e2a\u7236\u4eb2\u4e5f\u4f1a\u52a0\u4e00\u904d\u3002\n\n2.\u4ee5\u5176\u4e3a\u6839\u7684\u5b50\u6811\u7ed3\u70b9\u548c\uff1a\u7531\u9898\u610f\u53ef\u77e5\u6bcf\u4e00\u6b21\u4efb\u52a1\u7236\u4eb2\u6240\u83b7\u5f97\u91d1\u5e01\u6570\u4e0e\u5176\u7f16\u53f7\u6700\u5c0f\u7684\u513f\u5b50\u83b7\u5f97\u7684\u91d1\u5e01\u6570\u5dee\u4e3a1,\u800c\u6709\u591a\u5c11\u4e2a\u8fd9\u6837\u76841\u5462\uff1f \u5c31\u662f**\u4ee5\u5176\u4e3a\u6839\u7684\u5b50\u6811\u7684\u5927\u5c0f**\uff0c\u6240\u4ee5\u6bcf\u4e00\u6b21\u524d\u5411\u661f\u5b8c\u5c31\u8981\u52a0\u4e0a\u8fd9\u4e2a\u6811\u7684\u5927\u5c0f\u3002\n\ncode\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#include<algorithm>\n#include<queue>\nusing namespace std;\n#define int long long\n#define MAXN 5000086\nint n,tot,ans[MAXN],size[MAXN];\nstruct node\n{\n\tint first,next,go;\n}p[MAXN];\ninline void star(int a,int b)\n{\n\tp[++tot].next=p[a].first;\n\tp[a].first=tot;\n\tp[tot].go=b;\n}\ninline void dfs(int x)\n{\n\tans[x]=0,size[x]=1;\n\tfor(int i=p[x].first;i;i=p[i].next)\n\t{\t\n\t\tint y=p[i].go;\n\t\tdfs(y);\n\t\tsize[x]+=size[y];\n\t\tans[x]+=ans[y];\n\t}\n\tans[x]+=size[x];\n}\nsigned main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tint x;\n\t\tscanf(\"%lld\",&x);\n\t\tstar(x,i);\n\t}\n\tdfs(1);\n\tfor(int i=1;i<=n;i++) printf(\"%lld \",ans[i]);\n\treturn 0;\n}\n```\n",
        "postTime": 1603692523,
        "uid": 366746,
        "name": "\u70db\u6728",
        "ccfLevel": 0,
        "title": "P4615 [COCI2017-2018#5] Birokracija"
    },
    {
        "content": "## \u9898\u76ee\u63cf\u8ff0\u5982\u4e0b\n\n\u6bcf\u4e2a\u4eba\u90fd\u4f1a\u505a\u4e00\u6b21\u4efb\u52a1,\u505a\u5b8c\u4efb\u52a1\u5c31\u4f1a\u79bb\u5f00\u3002\n\n\u505a\u4efb\u52a1\u7684\u4eba\u4f1a\u5f97\u5230\u4e00\u4e2a\u786c\u5e01\u3002\u4e0a\u53f8\u5f97\u5230\u4e24\u4e2a\uff0c\u4e0a\u53f8\u7684\u4e0a\u53f8\u5f97\u5230\u4e09\u4e2a\uff0c\u4ee5\u6b64\u7c7b\u63a8\u76f4\u5230\u4e0a\u53f8\u5c31\u662f\u81ea\u5df1\u7684\u4eba\u7ed3\u675f\u3002\n\n\u6700\u540e\u6c42\u7684\u5c31\u662f\u6bcf\u4e2a\u4eba\u7684\u786c\u5e01\u603b\u548c\u3002\n\n## \u89e3\u9898\u601d\u8def\n**\u56e0\u4e3a\u505a\u4e00\u6b21\u4efb\u52a1\uff0c\u4e0a\u53f8\u5f97\u5230\u7684\u94b1\u6bd4\u4e0b\u5c5e\u591a\u4e00\u4e2a\u786c\u5e01\uff0c\u6240\u4ee5\u603b\u7ed3\u5230\u4e86\u4e00\u4e0b\u4e09\u70b9\u3002**\n\n- \u6bcf\u4e2a\u4eba\u7684\u786c\u5e01\u6570\u91cf\u7b49\u4e8e\u6240\u6709\u4e0b\u5c5e\u7684\u94b1\u7684\u548c\u52a0\u4e0a\u80fd\u591f\u5f97\u5230\u94b1\u7684\u4efd\u6570\u7684\u6570\u91cf\u3002\n\n- \u6bcf\u4e2a\u4eba\u94b1\u7684\u4efd\u6570\u7684\u6570\u91cf\u7b49\u4e8e\u6240\u6709\u4e0b\u5c5e\u7684\u94b1\u7684\u4efd\u6570\u7684\u6570\u91cf\u7684\u548c\u52a0\u4e00\u3002\n\n- \u505a\u4efb\u52a1\u7684\u4eba\u53ef\u4ee5\u5f97\u5230\u4e00\u4efd\u94b1\u3002\n\n**\u6700\u540e\u89e3\u9898\u65b9\u6cd5\u5c31\u662f\u7528\u6df1\u641c\u6c42\u4e0b\u5c5e\u94b1\u7684\u4efd\u6570\u548c\u4e0b\u5c5e\u603b\u5171\u5f97\u7684\u94b1**\n\n## \u6ce8\u610f\u4e8b\u9879\n\n-  \u8bb0\u5f97\u4e0d\u8981\u5fd8\u4e86\u52a0\u4e00\u7684\u3002\n\n-  \u6b64\u9898\u7528\u5e76\u67e5\u96c6\u7684\u6ce8\u610f\u4e0d\u8981\u5408\u5e76\u6bcf\u4e2a\u70b9\u3002\n\n-  \u5982\u679c\u516c\u53f8\u6210\u4e00\u5b57\u94fe\uff0c\u90a3\u4e48\u6700\u591a\u7684\u94b1\u5c31\u5f97\u7528 ```long long```  \u624d\u53ef\u4ee5\u5b58\u4e0b\u3002\n\n## \u5949\u4e0a\u4ee3\u7801\n```\n#include<bits/stdc++.h>\n#define LL long long\nusing namespace std;\nLL ans[200100],gs[200100];//ans\u5b58\u6bcf\u4e2a\u4eba\u7684\u94b1 gs\u5b58\u6bcf\u4e2a\u4eba\u80fd\u5f97\u5230\u7684\u94b1\u7684\u4efd\u6570\nint N,per[200100],SS;//per\u5b58\u6bcf\u4e2a\u4eba\u7684\u4e0a\u53f8\nint main() {\n    scanf(\"%d\",&N);\n    for(int i=1; i<=N; i++) per[i]=i;\n    for(int i=2; i<=N; i++) {\n        scanf(\"%d\",&SS);\n        per[i]=SS;\n    }\n    for(int i=N; i>1; i--) {  //\u9898\u76ee\u4e2d\u8bf4ai<i\uff0c\u6240\u4ee5\u5927\u80c6\u4ece\u540e\u5f80\u524d\u679a\u4e3e\n        ans[i]=1;\n        gs[i]++;              //\u6bcf\u4e2a\u4eba\u90fd\u4f1a\u505a\u4e00\u6b21\u4efb\u52a1\uff0c\u6240\u4ee5\u81f3\u5c11\u6709\u4e00\u4efd\u94b1\n        gs[per[i]]+=gs[i];    //\u4e0a\u53f8\u94b1\u7684\u4efd\u6570\u7b49\u4e8e\u6bcf\u4e2a\u4e0b\u5c5e\u7684\u4efd\u6570\u4e4b\u548c\u52a0\u4e00\n    }\n    for(int i=N; i>1; i--) {  //\u7b97\u51fa\u6bcf\u4e2a\u4eba\u7684\u94b1\u6570\n        ans[i]=ans[i]+gs[i]-1;\n        ans[per[i]]+=ans[i];\n    }\n    ans[1]=ans[1]+gs[1]+1;\n    for(int i=1; i<=N; i++)\n        printf(\"%lld \",ans[i]);\n    return 0;\n}\n```",
        "postTime": 1626570057,
        "uid": 510815,
        "name": "B\u5929\u9009\u4e4b\u5b50B",
        "ccfLevel": 0,
        "title": "\u6b64\u9898\u6df1\u641c"
    },
    {
        "content": "### \u9898\u610f\u63cf\u8ff0\n\u6709\u4e00\u4e2a$n$\u4eba\u7684\u516c\u53f8\uff0c\u5448\u6811\u5f62\u7ed3\u6784\uff0c\u7236\u4eb2\u8868\u793a\u7ed3\u70b9\u4e0a\u53f8\uff0c\u513f\u5b50\u7ed3\u70b9\u8868\u793a\u4e0b\u5c5e\n\n\u6709\u4e00\u4e2a\u4efb\u52a1\uff0c\u6bcf\u6b21\u4f1a\u4ece$CEO$\uff08\u5373$1$\u53f7\u6839\u7ed3\u70b9\uff09\u51fa\u53d1\uff0c\u6709\u4e0b\u5c5e\u7684\u6d3e\u7ed9\u7f16\u53f7\u6700\u5c0f\u7684\u4e0b\u5c5e\uff0c\u6ca1\u6709\u7684\u5219\u81ea\u5df1\u6267\u884c\n\n\u6bcf\u6b21\u4eb2\u81ea\u6267\u884c\u4efb\u52a1\u7684\u5f97\u5230$1$\u679a\u786c\u5e01\uff0c\u4ed6\u7684\u4e0a\u53f8\u5f97\u5230$2$\u679a\uff0c\u4ed6\u4e0a\u53f8\u7684\u4e0a\u53f8\u5f97\u5230$3$\u679a\uff0c\u4ee5\u6b64\u7c7b\u63a8\n\n\u4e0d\u8fc7\u6bcf\u6b21\u4eb2\u81ea\u6267\u884c\u4efb\u52a1\u7684\u4eba\u4f1a\u610f\u8bc6\u5230\u516c\u53f8\u7684\u4e0d\u516c\uff0c\u9a6c\u4e0a\u79bb\u5f00\u516c\u53f8\n\n\u6700\u540e\u6240\u6709\u4eba\u90fd\u79bb\u5f00\u516c\u53f8\u540e\uff0c\u6c42\u6bcf\u4e2a\u4eba\u5404\u83b7\u5f97\u591a\u5c11\u786c\u5e01\n### \u89e3\u9898\u601d\u8def\n-  \u4e00\u68f5\u5b50\u6811\u662f\u5426\u6709\u4eba\u79bb\u5f00\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd\u53e6\u4e00\u68f5\u5b50\u6811\u7684\u786c\u5e01\u4ef7\u683c\uff0c\u56e0\u6b64\u7f16\u53f7\u5e76\u4e0d\u9700\u8981\u8003\u8651\u6700\u5c0f\n\n- \u6bcf\u4e00\u4e2a\u4eba\u90fd\u4f1a\u79bb\u5f00\u516c\u53f8\uff0c\u56e0\u6b64\u4e00\u68f5\u5b50\u6811\u7684\u6267\u884c\u4efb\u52a1\u8005\uff0c\u5373\u53f6\u7ed3\u70b9\u5c31\u662f\u8fd9\u68f5\u5b50\u6811\u7684\u7ed3\u70b9\u6570\n\n- \u4e00\u4e2a\u7ed3\u70b9\u7684\u786c\u5e01\u6570\u662f\u5b83\u6240\u6709\u513f\u5b50\u7684\u786c\u5e01\u52a0\u4e0a\u4efb\u52a1\u6570\uff08\u5305\u62ec\u81ea\u5df1\u7684\uff09\uff08\u6240\u6709\u4efb\u52a1\u6c47\u4e0a\u6765\uff0c\u539f\u5148\u7684\u52a0\u4e0a$1$\u7684\u5dee\u8ddd\uff09\n\n> **\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u6700\u91cd\u8981\u7684\u5f0f\u5b50\uff1a**\n\n$$ans_u=size_u+\\sum{ans_v}$$\n### \u6ce8\u610f\u4e8b\u9879\n- \u8bb0\u5f97\u5f00```long long```\uff0c\u6bd4\u5982\u4e00\u6761\u94fe\u7684\u60c5\u51b5\uff0c$CEO$\u5c31\u4f1a\u5f97\u5230$\\frac{n\\times(n-1)}{2}$\u679a\u786c\u5e01\uff0c\u800c$n$\u6700\u5927\u662f$200000$\n\n- \u6700\u540e$CEO$\u81ea\u5df1\u4e5f\u4f1a\u6267\u884c\u4e00\u6b21\u4efb\u52a1\uff0c\u4e0d\u8981\u5ffd\u7565\n\n### \u4ee3\u7801\n\n```cpp\n#include <cstdio>\n#include <vector>\n#define int long long\nusing namespace std;\nint n,ans[200001],sz[200001];\nvector<int> e[200001];\nint read(){\n    char ch=getchar();int res=0,w=1;\n    while(ch<'0'||ch>'9') {if(ch=='-') w=-1;ch=getchar();}\n    while(ch>='0'&&ch<='9') {res=res*10+ch-'0';ch=getchar();}\n    return res*w;\n}\nvoid dfs(int x){\n\tsz[x]=ans[x]=1;\n\tfor(register int i=0;i<e[x].size();i++) {dfs(e[x][i]);ans[x]+=ans[e[x][i]]+sz[e[x][i]];sz[x]+=sz[e[x][i]];}\n}\nsigned main(){\n\tn=read();\n\tfor(register int i=1;i<n;i++) e[read()].push_back(i+1);\n\tdfs(1);\n\tfor(register int i=1;i<=n;i++) printf(\"%lld \",ans[i]);\n\tputs(\"\");\n    return 0;\n}\n```\n",
        "postTime": 1556711445,
        "uid": 80679,
        "name": "Register",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 P4615 \u3010[COCI2017-2018#5] Birokracija\u3011"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u6709\u4e00\u4e2a $n$ \u4eba\u7684\u516c\u53f8\uff0c\u5448\u6811\u5f62\u7ed3\u6784\uff0c\u7236\u4eb2\u8868\u793a\u7ed3\u70b9\u4e0a\u53f8\uff0c\u513f\u5b50\u7ed3\u70b9\u8868\u793a\u4e0b\u5c5e\u3002\n\n\u6709\u4e00\u4e2a\u4efb\u52a1\uff0c\u6bcf\u6b21\u4f1a\u4ece $CEO$ \uff08\u5373 $1$ \u53f7\u6839\u7ed3\u70b9\uff09\u51fa\u53d1\uff0c\u6709\u4e0b\u5c5e\u7684\u6d3e\u7ed9\u7f16\u53f7\u6700\u5c0f\u7684\u4e0b\u5c5e\uff0c\u6ca1\u6709\u7684\u5219\u81ea\u5df1\u6267\u884c\u3002\n\n\u6bcf\u6b21\u4eb2\u81ea\u6267\u884c\u4efb\u52a1\u7684\u5f97\u5230 $1$ \u679a\u786c\u5e01\uff0c\u4ed6\u7684\u4e0a\u53f8\u5f97\u5230 $2$ \u679a\uff0c\u4ed6\u4e0a\u53f8\u7684\u4e0a\u53f8\u5f97\u5230 $3$ \u679a\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\n\n\u4e0d\u8fc7\u6bcf\u6b21\u4eb2\u81ea\u6267\u884c\u4efb\u52a1\u7684\u4eba\u4f1a\u610f\u8bc6\u5230\u516c\u53f8\u7684\u4e0d\u516c\uff0c\u9a6c\u4e0a\u79bb\u5f00\u516c\u53f8\u3002\n\n\u6700\u540e\u6240\u6709\u4eba\u90fd\u79bb\u5f00\u516c\u53f8\u540e\uff0c\u6c42\u6bcf\u4e2a\u4eba\u5404\u83b7\u5f97\u591a\u5c11\u786c\u5e01\u3002\n\n[\u53c2\u8003](https://www.luogu.com.cn/blog/shrshrshr/solution-p4615)\n## \u5206\u6790\n\u6709\u4e00\u68f5\u6811\uff08\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u6309\u7167\u9898\u76ee\u6837\u4f8b2\uff0c\u7528\u7ea2\u8272\u6570\u5b57\u8868\u793a\u6536\u5230\u7684\u786c\u5e01\u6570\uff09\n\n![first\u9898\u89e31](https://ftp.bmp.ovh/imgs/2021/06/e028c66f09a1a46b.png)\n\n\u6613\u77e5\uff0c\u6bcf\u4e2a\u8282\u70b9\u83b7\u5f97\u7684\u786c\u5e01\u6570\u5c31\u662f**\u6240\u6709**\u5b50\u8282\u70b9\u7684 $($ \u786c\u5e01\u6570\u91cf $+$ \u52a0\u6570\u4e2a\u6570 $)+1$\u3002\n\n\u5982\u8282\u70b9 $2$ \u83b7\u5f97\u7684\u786c\u5e01\u6570\u91cf\u5c31\u662f $(4$ \u7684\u786c\u5e01\u6570\u91cf $+4$ \u7684\u52a0\u6570\u4e2a\u6570 $)+(3$ \u7684\u786c\u5e01\u6570\u91cf $+3$ \u7684\u52a0\u6570\u4e2a\u6570 $)=(3+2)+(2+1)=5+3=8$ \u4e0e\u9898\u76ee\u63cf\u5199\u7684\u76f8\u540c\u3002\n\n\u53c8\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u8282\u70b9 $i$ \u7684\u52a0\u6570\u4e2a\u6570\u7b49\u4e8e\u4ee5\u8282\u70b9 $i$ \u4e3a\u6839\u7684\u6811\u7684\u8282\u70b9\u4e2a\u6570\uff0c\u4ee4\u5b83\u4e3a $Size_i$ \uff0c\u4e14\u4ee4\u8fd9\u4e2a\u8282\u70b9\u83b7\u5f97\u7684\u786c\u5e01\u6570\u91cf\u4e3a $Coin_i$ \u3002\n\n\u6240\u4ee5\u6211\u4eec\u5f97\u5230\u4e00\u4e2a\u597d\u516c\u5f0f\uff1a\n\n$Coin_n=(\\sum\\limits_{x=Son(n)}{Coin_x})+Size_i$\n\n\u800c $Size_n=(\\sum\\limits_{x=Son(n)}{Size_x})+1$\n\n\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4ece\u5b50\u8282\u70b9\u5411\u6839\u8282\u70b9\u8fdb\u884c\u6811\u5f62DP\u3002\n\n\u8fd9\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u8003\u8651\u8fdb\u884cDFS\u626b\u4e00\u904d\u6765\u786e\u5b9a $Size$ \u548c $Coin$ \u3002\n\n## DFS\n\nDFS\u6211\u5c31\u4e0d\u8bb2\u4e86\uff0c\u4e0d\u4f1a\u7684\u81ea\u884c\u770b\u5176\u4ed6\u9898\u89e3 \u3002\n\n## \u505a\u6cd5\n\u6ce8\u610f\u5230\u9898\u76ee\u4e2d**\u8f93\u5165\u8f93\u51fa\u683c\u5f0f\u4e2d**\u6709\u63d0\u5230 $1\\le a_i< i$ \u6240\u4ee5\u6211\u4eec\u7684\u4ece**\u5b50\u8282\u70b9\u5230\u6839\u8282\u70b9**\u5c31\u53ef\u4ee5\u76f4\u63a5\u4ece $n$ \u66f4\u65b0$Coin$ \u548c $Size$ \u5230 $1$\u3002\n\nDP\u8fc7\u7a0b\u5982\u4e0b\uff1a(`size`\u5373 $Size$ ,`f`\u5373 $Coin$ ,`fa`\u5373\u50a8\u5b58\u7236\u8282\u70b9\u7f16\u53f7\u3002)\n\n```cpp\nfor(int i=n;i>=1;i--)\n{\n\tsize[i]++;\n\tsize[fa[i]]+=size[i];\n\tf[i]+=size[i];\n\tf[fa[i]]+=f[i];\n}\n```\n\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u6109\u5feb\u7684A\u4e86\u8fd9\u9053\u9898\u4e86\uff01\n## \u4ee3\u7801\n\n```cpp\n#include<iostream>\n#include<cstdio>\nusing namespace std;\n#define ll long long\nconst int MAXN=2e5+10;\ninline int read()\n{\n \tint x(0),f(1);char c=getchar();\n    while(c>'9'||c<'0')f=c=='-'?-1:1,c=getchar();\n    while(c>='0'&&c<='9')x=x*10+c-48,c=getchar();\n    return f*x;\n}\nint fa[MAXN];\nll f[MAXN];\nll size[MAXN]; \nint main()\n{\n\tint n=read();\n\tfor(int i=2;i<=n;i++)\n\tfa[i]=read();\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tsize[i]++;\n\t\tsize[fa[i]]+=size[i];\n\t\tf[i]+=size[i];\n\t\tf[fa[i]]+=f[i];\n\t}\n\tfor(int i=1;i<=n;i++)\n\tprintf(\"%lld \",f[i]);\n\treturn 0;\n} \n```\n\n\n![\u6539\u6210.rar](https://ftp.bmp.ovh/imgs/2021/06/26eb38e6f0e29dd7.jpg)\n\n\u672c\u849f\u84bb\u7b2c\u4e00\u6b21\u5199\u9898\u89e3\uff0c\u6709\u95ee\u9898\u8bf7\u5728\u535a\u5ba2\u4e2d\u63d0\u95eeQWQ\u3002",
        "postTime": 1622881135,
        "uid": 376137,
        "name": "Lazy_Labs",
        "ccfLevel": 0,
        "title": "P4615 [COCI2017-2018#5] Birokracija\u9898\u89e3"
    },
    {
        "content": "### \u6211\u7231 STL\uff0c\u5373\u4f7f\u5b83\u6162\n\n\u5178\u578b\u6811\u4e0a DP\u3002\n\n\u601d\u7ef4\u96be\u5ea6\u6bd4\u8f83\u5927\u3002\n\n\u8fd9\u9898\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\u6bcf\u4e00\u4e2a\u4eba\u90fd\u81f3\u5c11\u81ea\u5df1\u505a\u4e00\u6b21\u5de5\u4f5c\uff0c\n\n\u8fd9\u6b21\u5de5\u4f5c\u83b7\u5f97\u7684\u91d1\u5e01\u4e3a 1\u3002\n\n\u6240\u4ee5 $f[x] = 1$\u3002\n\n\u4e00\u4e2a\u4eba\u7684\u8001\u677f\u80af\u5b9a\u6bd4\u8fd9\u4e2a\u4eba\u6536\u5165\u591a\u3002\n\n\u5bf9\u4e8e\u6bcf\u6b21\u5de5\u4f5c\u4e00\u4e2a\u4eba\u7684\u8001\u677f\u4e00\u5b9a\u6536\u5165\u6bd4\u52a9\u624b\u591a 1\u3002\n\n\u800c\u4e00\u4e2a\u4eba\u80fd\u53c2\u4e0e\u7684\u5de5\u4f5c\u7684\u6b21\u6570\uff0c\n\n\u5c31\u662f\u4ed6\u7684\u52a9\u624b\u6570\uff08\u5305\u62ec\u52a9\u624b\u7684\u52a9\u624b\uff09\u3002\n\n\u6211\u4eec\u4ee4 $se[x]$ \u8868\u793ax\u7684\u52a9\u624b\u6570\uff08\u5305\u62ec\u52a9\u624b\u7684\u52a9\u624b\uff09\u3002\n\n\u90a3\u4e48 $f[x] += f[y] + se[y]$\u3002\n\n\u8fd9\u6837\u505a\u65f6\u95f4\u7a7a\u95f4\u590d\u6742\u5ea6\u90fd\u662f $O(n)$\u3002\n\n\u7f16\u7a0b\u590d\u6742\u5ea6\u6781\u4f4e\u3002\n\n\u6700\u540e AC \u4ee3\u7801\uff0830 \u884c\u641e\u5b9a\uff09\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 200005;\n#define int long long\nvector <int> a[N];\nint n,se[N],f[N];\nvoid build(int x){\n    se[x] = 1;\n    for(int i = 0;i < a[x].size();i++){\n        build(a[x][i]);\n        se[x] += se[a[x][i]];\n    }\n}\nvoid dfs(int x){\n    f[x] = 1;\n    for(int i = 0;i < a[x].size();i++){\n        dfs(a[x][i]);\n        f[x] += f[a[x][i]] + se[a[x][i]];\n    }\n}\nsigned main(){\n    scanf(\"%lld\",&n);\n    for(int i = 2,o;i <= n;i++){\n        scanf(\"%lld\",&o); \n        a[o].push_back(i);\n    }\n    build(1),dfs(1);\n    for(int i = 1;i <= n;i++) printf(\"%lld \",f[i]);\n    return 0;\n}\n```\n\n\n",
        "postTime": 1597115678,
        "uid": 239433,
        "name": "WZKQWQ",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P4615 \u3010[COCI2017-2018#5] Birokracija\u3011"
    },
    {
        "content": "\u7531\u9898\u610f\u53ef\u4ee5\u770b\u51fa\u9886\u5bfc\u7684\u4e0b\u5c5e\u662f\u6309\u7167\u4ece\u5c0f\u5230\u5927\u7684\u987a\u5e8f\u8f93\u5165\u7684\uff0c\n\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u4ece\u8001\u677f\u5f00\u59cb\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u4e00\u6b21\u5c31\u53ef\u4ee5\u4e86\uff0c\u5e76\u4e0d\u9700\u8981\u6392\u5e8f\uff01\uff01\uff01\n\n\u4e3a\u4e86\u505a\u9898\u7b80\u4fbf\uff0c\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5\u5f00 vector \u8bb0\u5f55\u9886\u5bfc\u7684\u4e0b\u5c5e\u3002 \uff08\u672c\u4eba\u611f\u89c9\u5f88\u65b9\u4fbf\uff09\n\n\u7531\u9898\u610f\u53ef\u4ee5\u63a8\u51fa\uff0c\u6bcf\u4e00\u4e2a\u4eba\u7684\u91d1\u5e01\u6570\u662f\u5176\u6240\u6709\u4e0b\u5c5e\u7684\u91d1\u5e01\u6570\u8fd8\u6709\u4ee5\u5176\u4e3a\u6839\u7684\u5b50\u6811\u7684\u7ed3\u70b9\u6570\u7684\u548c\u3002\n\u90a3\u4e48\u4e00\u4e2a\u7b80\u5355\u7684\u6811\u89c4\u4ee3\u7801\u5c31\u51fa\u6765\u4e86\u3002\n\nCode\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,xx,tot=0;\nlong long coin[200004],s[200004];\nvector<int> son[200004];\ninline int read(){\n    int sss=0,www=1;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n\t\tif(ch=='-')www=-1;\n\t\tch=getchar();\n\t}\n    while(ch>='0'&&ch<='9') sss=sss*10+ch-'0',ch=getchar();\n    return sss*www;\n}\nvoid dfs(int x){\n\ts[x]=1;\n\tcoin[x]=1;\n\tfor(int i=0;i<son[x].size();i++){\n\t\tdfs(son[x][i]);\n\t\tcoin[x]+=coin[son[x][i]]+s[son[x][i]];\n\t\ts[x]+=s[son[x][i]];\n\t}\n}\nint main(){\n\tn=read();\n\tfor(int i=2;i<=n;i++){\n\t\txx=read();\n\t\tson[xx].push_back(i);\n\t}\n\tdfs(1);\n\tfor(int i=1;i<=n;i++)cout<<coin[i]<<\" \";\n\treturn 0;\n}\n```",
        "postTime": 1629190139,
        "uid": 367316,
        "name": "Foreverxxx",
        "ccfLevel": 0,
        "title": "P4615 COCI[2017-2018#5] Birokracija"
    },
    {
        "content": "\n------------\n\u89e3\u9898\u601d\u8def\uff1a\n\n\u9996\u5148\u53ef\u4ee5\u77e5\u9053\u4e24\u4e2a\u4e0d\u540c\u5b50\u6811\u662f\u4e92\u76f8\u4e0d\u5e72\u6d89\u7684\uff0c\u6bcf\u4e00\u4e2a\u8282\u70b9\u7684\u503c\u53ea\u548c\u5176\u5b50\u6811\u6709\u5173\uff0c\u7531\u6b64\u60f3\u5230\u6811\u5f62DP\u3002\n\n\u7136\u540e\u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u4f1a\u628a\u6240\u6709\u5b50\u6811\u505a\u8fc7\u7684\u4efb\u52a1\u4ef7\u503c\u7684\u603b\u548c\uff0c\u7136\u540e\u518d\u5728\u6bcf\u4e00\u4e2a\u4efb\u52a1\u7684\u57fa\u7840\u4e0a\u52a0\u4e00\uff0c\u4e5f\u5c31\u76f8\u5f53\u4e8e\u6700\u7ec8\u52a0\u4e0a\u5b50\u8282\u70b9\u6570\u91cf\u4e4b\u548c\uff0c\u610f\u5473\u7740\u6bcf\u6709\u4e00\u4e2a\u8282\u70b9\u5c31\u4f1a\u505a\u4e00\u6b21\u4efb\u52a1\u3002\n\n\u6240\u4ee5DP\u65f6\u8bb0\u5f55\u4e0b\u5b50\u6811\u603b\u4ef7\u503c\u548c\u5b50\u6811\u5927\u5c0f\u5373\u53ef\u3002\n\n\u6240\u4ee5\u65b9\u7a0b\u4e3a $F_i=size_i+\\sum F_{son_i}$\n\n------------\n```\n#include<cstdio>\nusing namespace std;\nconst int MAXN=200005;\nlong long head[MAXN],next[MAXN*2],num[MAXN*2],n,x,tot,f[MAXN],size[MAXN];\nvoid add(int x,int y){\n\tnext[++tot]=head[x];head[x]=tot;num[tot]=y;\n}\nvoid dfs(int now,int fa){\n\tfor(int i=head[now];i;i=next[i])\n\tif(num[i]!=fa){\n\t\tdfs(num[i],now);\n\t\tf[now]+=f[num[i]];\n\t\tsize[now]+=size[num[i]];\n\t}\n\tsize[now]++;\n\tf[now]+=size[now];\n}\nint main(){\n\tscanf(\"%lld\",&n);\n\tfor(int i=2;i<=n;i++){\n\t\tscanf(\"%lld\",&x);\n\t\tadd(i,x);add(x,i);\n\t}\n\tdfs(1,0);\n\tfor(int i=1;i<=n;i++){\n\t\tprintf(\"%lld \",f[i]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1621331022,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4615 [COCI2017-2018#5] Birokracija"
    },
    {
        "content": "\u7b80\u5355\u6811\u5f62dp\u9898 \u9047\u5230\u8fd9\u79cd\u9898\u6839\u636e\u7ecf\u9a8c\u4e00\u822c\u5148\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u8282\u70b9\u7684\u6df1\u5ea6\u4fe1\u606f\u548c\u5b50\u6811\u5927\u5c0f\u3002\n\n\u7136\u540e\u5206\u6790\u4e00\u6ce2\uff0c~~\u778e\u641e\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b~~\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u70b9 $now$ \u83b7\u5f97\u7684\u91d1\u5e01\u6570 $f[now]=f[v]+size[v]+1$\n\n\u56e0\u4e3a\u91d1\u5e01\u6570\u662f\u4ece\u4e0b\u5f80\u4e0a\u4e00\u4e2a\u4e00\u4e2a\u52a0\u7684\uff0c $v$ \u70b9\u7684\u6df1\u5ea6\u6bd4 $now$ \u5c0f $1$ \uff0c\u6240\u4ee5\u5b83\u7684\u5b50\u6811\u7684\u6bcf\u4e00\u4e2a\u70b9\u90fd\u591a\u8d21\u732e\u4e00\u4e2a\u91d1\u5e01\uff0c$+1$ \u662f\u56e0\u4e3a\u5b83\u81ea\u5df1\u4e5f\u4f1a\u5de5\u4f5c\u3002\n\n\u53ef\u4ee5\u76f4\u63a5\u5728\u521d\u59cb\u5316\u91cc\u628a $f$ \u6570\u7ec4\u8d4b\u6210 $1$ \uff0c\u8fd9\u6837\u5728\u8f6c\u79fb\u65b9\u7a0b\u91cc\u5c31\u4e0d\u7528 $+1$ \u4e86\u3002\n``` \n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\nint n;\nstruct node{\n\tint nxt,to;\n}edge[400010];\nint size[400010],head[400010];\nlong long f[400010];\nint idx;\nvoid add(int u,int v)\n{\n\tedge[++idx].nxt=head[u];\n\tedge[idx].to=v;\n\thead[u]=idx;\n}\nvoid dfs(int now,int fath)\n{\n\tf[now]=1;\n\tsize[now]=1;\n\tfor(int i=head[now];i;i=edge[i].nxt)\n\t{\n\t\tint v=edge[i].to;\n\t\tif(v==fath)\n\t\tcontinue;\n\t\tdfs(v,now);\n\t\tsize[now]+=size[v];\n\t\tf[now]+=f[v]+size[v];\n\t}\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tint v;\n\t\tscanf(\"%d\",&v);\n\t\tadd(i,v);\n\t\tadd(v,i);\n\t}\n\tdfs(1,0);\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tprintf(\"%lld \",f[i]);\n\t}\n\treturn 0;\n}",
        "postTime": 1597149780,
        "uid": 250699,
        "name": "Herkaii",
        "ccfLevel": 4,
        "title": "P4615 [COCI2017-2018#5] Birokracija"
    },
    {
        "content": "\u89c2\u5bdf\u9898\u610f\uff1a\u672c\u9898\u7ed9\u51fa\u4e86\u4e00\u68f5\u6811\uff0c\u6bcf\u4e2a\u8282\u70b9\u4ece\u81ea\u5df1\u5f00\u59cb\u5f80\u4e0a\u8df3\u81f3\u6839\uff0c\u5bf9\u4e8e\u81f3\u6839\u8def\u5f84\u4e0a\u7684\u6bcf\u4e00\u4e2a\u70b9\u8d21\u732e\u4ece\u4e00\u5f00\u59cb\u589e\u503c\u4e3a $1$ \u7684\u8d21\u732e\u6700\u540e\u8981\u6c42\u8f93\u51fa\u6bcf\u4e2a\u70b9\u83b7\u5f97\u7684\u8d21\u732e\u3002  \n\n\u6bcf\u4e2a\u70b9\u53ea\u4f1a\u8d21\u732e\u4e00\u6b21\uff0c\u6570\u636e\u8303\u56f4\u53c8\u8fbe\u5230\u4e86 $2e5$ \uff0c\u76f4\u63a5\u4e00\u773c\u6811\u5f62 $dp$ \u3002  \n\n\u7136\u540e\u5f00\u59cb\u8003\u8651\u5982\u4f55\u8f6c\u79fb\uff0c\u601d\u8003\u4e4b\u540e\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u8fd9\u6837\u4e00\u4e2a\u6027\u8d28\uff1a\u5373\u5bf9\u4e8e\u4e00\u4e2a\u70b9 $x$ \uff0c\u548c\u5b83\u7684\u4e00\u4e2a\u5b50\u8282\u70b9 $y$ \uff0c $x$ \u4ece $y$ \u53ca\u5176\u5b50\u6811\u4e2d\u83b7\u5f97\u8d21\u732e\u4e3a $y$ \u7684\u8d21\u732e\u52a0\u4e0a $y$ \u7684\u5b50\u6811\u5927\u5c0f\u3002\u56e0\u4e3a $x$ \u7684\u6df1\u5ea6\u6bd4 $y$ \u7b2c\u4e00\u5c42\uff0c\u6240\u4ee5 $y$ \u53ca\u5176\u5b50\u6811\u5185\u7684\u6240\u6709\u70b9\u5411\u5b83\u4eec\u7684\u7236\u4eb2\u505a\u8d21\u732e\u65f6\uff0c\u7ed9\u5230 $x$ \u7684\u8d21\u732e\u80af\u5b9a\u6bd4\u7ed9\u5230 $y$ \u7684\u591a\u4e00\u3002  \n\n\u7531\u8fd9\u6761\u6027\u8d28\u5c31\u53ef\u4ee5\u5f97\u51fa\u975e\u5e38\u663e\u7136\u7684\u8f6c\u79fb\u65b9\u7a0b\u4e86\uff1a  \n$f[x] = f[y] + size[y] + 1$  \n$f[i]$ \u8868\u793a $i$ \u83b7\u5f97\u7684\u603b\u8d21\u732e\uff08\u94b1\uff09\uff0c $size[i]$ \u4e3a $i$ \u7684\u5b50\u6811\u5927\u5c0f\uff0c\u8fd9\u91cc $+ 1$ \u662f\u56e0\u4e3a\u81ea\u5df1\u4e5f\u8981\u505a\u4e00\u6b21\u4efb\u52a1\u3002  \n\u5bf9\u4e8e\u8fd9\u4e2a\u65b9\u7a0b\uff0c\u5728\u6811\u4e0a\u8dd1\u4e00\u904d $dfs$ \u5373\u53ef\u7edf\u8ba1\u51fa\u5168\u90e8\u7b54\u6848\uff0c\u7ec6\u8282\u770b\u4ee3\u7801  \n\n\u4ee5\u4e0b\u4e3a\u4ee3\u7801\u90e8\u5206  \n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstdlib>\n#include <cstring>\n#include <cmath>\n#define ll long long\nusing namespace std;\n\nconst int N = 200010;\n\nint n;\nint head[N], ver[N], Next[N], cnt;\nll f[N], size[N];\n\ninline void add(int x, int y) {\n\tver[++cnt] = y; Next[cnt] = head[x]; head[x] = cnt;\n}\n\ninline void dfs(int x) {\n\tf[x] = 1;\n\tsize[x] = 1;\n\t// size\uff0cf\u5747\u9700\u521d\u59cb\u5316\u4e3a 1\uff08\u81ea\u5df1\u8981\u505a\u4e00\u6b21\u4efb\u52a1\uff09\n\tfor (int i = head[x]; i; i = Next[i]) {\n\t\tint y = ver[i];\n\t\tdfs(y);\n\t\tsize[x] += size[y];\n\t\tf[x] += f[y] + size[y];\n\t\t// \u7d2f\u52a0\u7b54\u6848\n\t}\n}\n\ninline int read() {\n\tint x = 0; char ch = getchar();\n\twhile (ch < '0' || ch > '9') ch = getchar();\n\twhile (ch >= '0' && ch <= '9') x = x * 10 + ch - '0', ch = getchar();\n\treturn x;\n}\n\nint main() {\n\tn = read();\n\tint x;\n\tfor (int i = 2; i <= n; i++) x = read(), add(x, i);\n\t// \u7ed9\u51fa\u4e86\u7236\u5b50\u5173\u7cfb\u4fdd\u5b58\u5355\u5411\u8fb9\u5373\u53ef\n\tdfs(1);\n\tfor (int i = 1; i <= n; i++) printf(\"%lld \", f[i]);\n\treturn 0;\n}\n```\n",
        "postTime": 1572831006,
        "uid": 18282,
        "name": "Phykyer",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P4615 \u3010[COCI2017-2018#5] Birokracija\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5176\u5b9e\u975e\u5e38\u7b80\u5355.  \n\u628a\u9898\u76ee\u4e2d\u7684\u5173\u7cfb\u7b80\u5316\u4e3a\u4e00\u68f5\u6811,\u9886\u5bfc\u4e3a\u7236\u4eb2,\u4e0b\u5c5e\u4e3a\u513f\u5b50,\u8fd9\u6837\u5c31\u53ef\u4ee5\u6e05\u695a\u7684\u5f97\u5230.  \n\u4e00\u4e2a\u8282\u70b9\u7684\u7b54\u6848(\u80fd\u83b7\u5f97\u7684\u94b1\u6570),\u5c31\u662f\u6211\u4eec\u7684\u7b54\u6848\u4e86.  \n\u800c\u4e14\u6bcf\u4e2a\u4e0d\u540c\u5b50\u6811\u4e2d\u7684\u8282\u70b9\u4e0d\u4f1a\u4e92\u76f8\u5f71\u54cd,  \n\u6240\u4ee5\u6bcf\u4e2a\u8282\u70b9\u7684\u7b54\u6848\u5c31\u662f\u5b83\u7684\u6240\u6709\u513f\u5b50\u7684\u7b54\u6848\u4e4b\u548c\u518d\u52a0\u4e0a\u5b83\u7684\u513f\u5b50\u4e2a\u6570,\u5373\u53ef\u5f97\u51fa\u7b54\u6848.  \n## $Code$\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<vector>\n\nusing namespace std;\n\n#define ll long long\n#define Pll pair<long long,long long>\n\nconst int MAXX = 2*1e5;\n\nint n;\n\nll dis[MAXX+5];\n\nvector<ll> g[MAXX+5];\n\nPll dfs(ll x)\n{\n\tPll a={0,0},b={1,1};\n\tfor(int i=0;i<(int)g[x].size();i++)\n\t{\n\t\ta=dfs(g[x][i]);\n\t\tb.first+=a.first+a.second;\n\t\tb.second+=a.second;\n\t}\n\tdis[x]=b.first;\n\treturn b;\n}\n\nint main()\n{\n//\tfreopen(\"birokracija.in\",\"r\",stdin);\n//\tfreopen(\"birokracija.out\",\"w\",stdout);\n\tscanf(\"%d\",&n);\n\tfor(int i=2,x;i<=n;i++)\n\t\tscanf(\"%d\",&x),\n\t\tg[x].push_back(i);\n\tdfs(1);\n\tfor(int i=1;i<=n;i++)\n\t\tprintf(\"%lld \",dis[i]);\n\treturn 0;\n}\n```\n",
        "postTime": 1566027392,
        "uid": 123055,
        "name": "\u4ea6\u7b19\u7bab",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4615 \u3010[COCI2017-2018#5] Birokracija\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u9898\u89e3\u592a\u5c11\u4e86\uff0c\u6211\u6765\u53d1\u4e00\u7bc7\u5427\n\n\u9996\u5148\uff0c\u6211\u4eec\u53ef\u4ee5\u603b\u7ed3\u51fa\u4e00\u4e2a\u89c4\u5f8b\n\n\u8bbeci\u4e3a\u7b2ci\u4e2a\u5458\u5de5\u7684\u603b\u6536\u5165\n\nbi\u4e3a\u7b2ci\u4e2a\u5458\u5de5\u7684\u603b\u4efb\u52a1\uff08\u5305\u62ecTa\u7684\u4e0b\u5c5e\uff09\n\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff1a\n\nci=Ta\u7684\u6240\u6709\u4e0b\u5c5e\u7684\u6536\u5165+Ta\u7684\u6240\u6709\u4e0b\u5c5e\u7684\u4efb\u52a1\u6570+1\n\nbi=Ta\u7684\u6240\u6709\u4e0b\u5c5e\u7684\u4efb\u52a1\u6570+1\n\n\u9898\u76ee\u4e2d\u8981\u6c42\u7f16\u53f7\u7684\u95ee\u9898\uff0c\u5176\u5b9e\u4e0d\u6210\u95ee\u9898\n\n\u4e0b\u9762\u662f\u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\nlong long c[200005],b[200005],l[200005];\nint a[200005][55];\nint n;\nvoid dfs(int v)\n{\n    if (l[v]==0) return;\n    for (int i=1;i<=l[v];i++)\n        dfs(a[v][i]);\n    for (int i=1;i<=l[v];i++)\n    {\n        c[v]=c[v]+c[a[v][i]]+b[a[v][i]];\n        b[v]=b[v]+b[a[v][i]];\n    }\n        \n}\nint main()\n{\n    scanf(\"%d\",&n);\n    for (int i=2;i<=n;i++)\n    {\n        int x;\n        scanf(\"%d\",&x);\n        l[x]++;\n        a[x][l[x]]=i;\n    }\n    for (int i=1;i<=n;i++)\n        b[i]=c[i]=1;\n    dfs(1);\n    for (int i=1;i<=n;i++)\n        printf(\"%lld \",c[i]);\n    printf(\"\\n\");\n    return 0;\n}\n```\n\n\u7528\u65f61118ms,\u5185\u5b5857148kb,\u4ee3\u7801\u957f\u5ea60.5kb\n\n\u8c22\u8c22\u5927\u4f6c\u4eec\u7684\u89c2\u8d4f",
        "postTime": 1550500134,
        "uid": 36957,
        "name": "RainFestival",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4615 \u3010[COCI2017-2018#5] Birokracija\u3011"
    },
    {
        "content": "\u597d\u4e45\u6ca1\u5199\u9898\u89e3\u4e86\uff0c\u8fd9\u91cc\u6765\u4e00\u53d1\n\n\u9898\u76ee\u4e2d\u8bf4\u8fd9\u662f\u4e00\u68f5\u6811\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528dfs\u6765\u89e3\u51b3\n\n\u81ea\u5df1\u753b\u4e2a\u56fe\u73a9\u4e00\u4e0b\uff0c\u4e0d\u96be\u53d1\u73b0\u5b50\u8282\u70b9\u4e0e\u7236\u8282\u70b9\u7684\u5173\u7cfb\uff1a\u6bcf\u4e2a\u513f\u5b50\u7ed3\u70b9\u5bf9\u7236\u8282\u70b9\u7684\u8d21\u732e\u5c31\u662f\u81ea\u8eab\u7684\u7b54\u6848\u52a0\u4e0a\u81ea\u5df1\u7684sum\u503c\uff08\u5177\u4f53\u770b\u4ee3\u7801\u6ce8\u91ca\uff09\n\n\u653e\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\n#include<cmath>\n#include<queue>\n#include<vector>\n#define N 200010\n#define LL long long\nusing namespace std;\nint n;\nvector<int> e[N];//vector\u5b58\u56fe\u7b80\u5355\u7c97\u66b4,\u6570\u636e\u5c0f\u4e0d\u7528\u62c5\u5fc3\u8d85\u65f6 \nLL ans[N],sum[N];//ans\u662f\u7b54\u6848,sum\u8bb0\u5f55\u8be5\u8282\u70b9\u8d21\u732e\u4e86\u51e0\u679a\u786c\u5e01 \ninline int read()\n{\n\tint x,t=1;\n\tchar c;\n\twhile(c=getchar(),c<'0' || c>'9')  if(c=='-')  t=-1;\n\tx=c-'0';\n\twhile(c=getchar(),c>='0' && c<='9')  x=x*10+c-'0';\n\treturn x*t;\n}\ninline void dfs(int x)\n{\n\tsum[x]=1; \n\tfor(register int i=e[x].size()-1;i>=0;i--)\n\t{\n\t\tint to=e[x][i];\n\t\tdfs(to);\n\t\tans[x]+=ans[to],sum[x]+=sum[to];\n\t}\n\tans[x]+=sum[x];//\u6bcf\u4e2a\u513f\u5b50\u7ed3\u70b9\u5bf9\u7236\u8282\u70b9\u7684\u8d21\u732e\u5c31\u662f\u81ea\u8eab\u7684\u7b54\u6848\u52a0\u4e0a\u81ea\u5df1\u7684sum\u503c\n}\nint main()\n{\n\tn=read();\n\tfor(register int i=2;i<=n;i++)\n\t{\n\t\tint x=read();\n\t\te[x].push_back(i);\n\t}\n\tdfs(1);//\u4ece\u6839\u8282\u70b9\u5f00\u59cb \n\tfor(register int i=1;i<=n;i++)  printf(\"%lld \",ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1550414205,
        "uid": 31331,
        "name": "ysy666",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P4615 \u3010[COCI2017-2018#5] Birokracija\u3011"
    }
]
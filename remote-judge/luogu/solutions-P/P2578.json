[
    {
        "content": "\u8fdb\u4e00\u6b65\u5f3a\u5316\u5e7f\u641c\uff0c\u589e\u5f3a\u4ee3\u7801\u80fd\u529b\u7684\u8f83\u597d\u7ec3\u4e60\u9898\u3002\n\n\u601d\u8def\u4e0a\u548c\u516b\u6570\u7801/\u9b54\u677f\u7b49\u9898\u7c7b\u4f3c\uff0c\u6bcf\u6b21\u4e00\u4e2a\u72b6\u6001\u6309\u7167\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u6269\u5c55\uff0c\u4f7f\u7528\u961f\u5217\u5b58\u50a8\u6bcf\u4e00\u79cd\u72b6\u6001\uff0c\u76f4\u5230\u5f39\u51fa\u7684\u72b6\u6001\u662f\u76ee\u6807\u72b6\u6001\u5219\u7ed3\u675f\u3002\u51e0\u4e2a\u5173\u952e\u70b9\uff1a\n\n1.\u8f93\u5165\u7684\u662f3*3\u7684\u77e9\u9635\uff0c\u6309\u7167\u6570\u7ec4\u5b58\u50a8\u540e\uff0c\u53ef\u4ee5\u8f6c\u6362\u62109\u4f4d\u6570\u6765\u8868\u793a\u72b6\u6001\u3002\n\n\n2.\u4e24\u79cd\u64cd\u4f5c\uff0c\u81ea\u884c\u6a21\u62df\u4e0b\u5904\u7406\u8fc7\u7a0b\u5373\u53ef\u3002\n\n```cpp\nvoid move1(int a[4][4]){    //\u64cd\u4f5c\u4e00\n    int tmp=a[1][1];\n    a[1][1]=a[2][1],a[2][1]=a[3][1],a[3][1]=a[3][2];\n    a[3][2]=a[3][3],a[3][3]=a[2][3],a[2][3]=a[1][3],a[1][3]=a[1][2],a[1][2]=tmp;\n}\nvoid move2(int a[4][4]){    //\u64cd\u4f5c\u4e8c\n    int tmp=a[2][3];\n    a[2][3]=a[2][2],a[2][2]=a[2][1],a[2][1]=tmp;\n}\n```\n3.\u5224\u91cd\uff1a\u6b64\u5904\u5982\u679c\u7528\u666e\u901a\u7684\u6570\u7ec4\u6765\u5b58\u50a8\u4e5d\u4f4d\u6570\u4f5c\u4e3a\u4e0b\u6807\u5224\u91cd\u5f53\u7136\u662f\u4f1a\u8d85\u51fa\u7a7a\u95f4\uff0c\u4f7f\u7528map\u7684\u65b9\u6cd5\u6765\u8fdb\u884c\u5224\u91cd\u4f1aTLE\u4e94\u4e2a\u70b9\uff0c\u56e0\u6b64\u8fd9\u91cc\u4f7f\u7528\u7684\u5eb7\u6258\u5c55\u5f00\u7684\u65b9\u5f0f\u83b7\u53d6\u6bcf\u4e00\u79cd\u72b6\u6001\uff08\u6bcf\u4e00\u4e2a\u4e5d\u4f4d\u6570\uff09\u552f\u4e00\u6620\u5c04\u7684\u6570\u5b57\u4f5c\u4e3a\u6570\u7ec4\u4e0b\u6807\uff0c\u8fd9\u6837\u662f\u4e0d\u4f1a\u8d85\u7a7a\u95f4\u7684\uff0c\u56e0\u4e3a\u4e5d\u4f4d\u6570\u7684\u5168\u6392\u5217\u7684\u53ef\u80fd\u6027\u4e5f\u5c31\u662f9\u7684\u9636\u4e58\u3002\uff08\u4e0d\u4e86\u89e3\u5eb7\u6258\u5c55\u5f00\u7684\u540c\u5b66\u53ef\u767e\u5ea6\u8be6\u7ec6\u4e86\u89e3\uff09\n\n\n4.\u8f93\u51fa\u8def\u5f84\uff0c\u53ef\u4ee5\u4f7f\u7528\u6570\u7ec4\u6765\u4fdd\u5b58\u6bcf\u4e00\u79cd\u72b6\u6001\u7684\u524d\u9a71\u662f\u8c01\u3002\uff08\u4ece\u540e\u5f80\u524d\uff0c\u60f3\u60f3\u4e3a\u4ec0\u4e48\uff09\n\n**\u5177\u4f53\u8fc7\u7a0b\u770b\u4ee3\u7801\uff0c\u6ce8\u91ca\u5199\u7684\u5f88\u8be6\u7ec6\uff0c\u4ee3\u7801\u6bd4\u8f83\u957f\uff0c\u7ec6\u7ec6\u770b\u6e05\u695a\u6bcf\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u5e94\u8be5\u662f\u53ef\u4ee5\u5f88\u5bb9\u6613\u770b\u61c2\u4ee3\u7801\uff0c\u4e4b\u540e\u518d\u81ea\u884c\u5b9e\u73b0\u5373\u53ef\u3002**\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint cs[4][4],a[4][4],b[4][4],vis[1000000],mb=12345678,cnt,csz;\nlong long ans[100000];\nmap<long long,long long>father; //\u7528\u4e8e\u5b58\u8def\u5f84\nvoid init();\nvoid bfs();\nlong long getDec(int a[4][4]);\nvoid updateArr(long long s,int a[4][4]);\nint getCantor(long long tmp);\nvoid move1(int a[4][4]);\nvoid move2(int a[4][4]);\nvoid print(long long x);\nint getCantor(long long tmp)    //\u6839\u636e\u4e5d\u4f4d\u6570\u5b57\u83b7\u53d6\u5bf9\u5e94\u7684\u5eb7\u6258\u5c55\u5f00\u503c\n{\n\tint a[9]={0},i=8,ans=0;\n\twhile(tmp!=0){\n\t\ta[i]=tmp%10;\n\t\ttmp/=10;\n\t\ti--;\n\t}\n\tfor(i=0;i<9;i++)\n\t{\n\t\tint x=0;int c=1,m=1;\n\t\tfor(int j=i+1;j<9;j++)\n\t\t{\n\t\t\tif(a[j]<a[i])x++;\n\t\t\tm*=c;c++;\n\t\t}\n\t\tans+=x*m;\n\t}\n\treturn ans;\n}\nvoid print(long long x){    //\u5c06\u6570\u5b57\u6309\u71673*3\u7684\u6570\u7ec4\u7684\u5f62\u5f0f\u8f93\u51fa\n    updateArr(x,a);\n    for(int i=1;i<=3;i++){\n        for(int j=1;j<=3;j++)\n            cout<<a[i][j]<<\" \";\n        cout<<endl;\n    }\n    cout<<endl;\n}\nlong long getDec(int a[4][4]){  //3*3\u6570\u7ec4\u8f6c\u5316\u6210\u5bf9\u5e94\u7684\u6570\u5b57\n    long long s=0;\n    for(int i=1;i<=3;i++)\n        for(int j=1;j<=3;j++)\n            s=s*10+a[i][j];\n    return s;\n}\nvoid updateArr(long long s,int a[4][4]){    //\u4f7f\u7528\u6570\u5b57\u6765\u66f4\u65b0\u4fee\u6539a\u6570\u7ec4\u7684\u503c\n    for(int i=3;i>=1;i--){\n        for(int j=3;j>=1;j--){\n            a[i][j]=s%10;\n            s/=10;\n        }\n    }\n}\nvoid move1(int a[4][4]){    //\u64cd\u4f5c\u4e00\n    int tmp=a[1][1];\n    a[1][1]=a[2][1],a[2][1]=a[3][1],a[3][1]=a[3][2];\n    a[3][2]=a[3][3],a[3][3]=a[2][3],a[2][3]=a[1][3],a[1][3]=a[1][2],a[1][2]=tmp;\n}\nvoid move2(int a[4][4]){    //\u64cd\u4f5c\u4e8c\n    int tmp=a[2][3];\n    a[2][3]=a[2][2],a[2][2]=a[2][1],a[2][1]=tmp;\n}\nvoid init(){            //\u5904\u7406\u8f93\u5165\n    for(int i=1;i<=3;i++)\n        for(int j=1;j<=3;j++)\n            cin>>cs[i][j];\n    csz=getDec(cs);\n}\nvoid bfs(){\n    queue<long long>q;\n    q.push(csz);\n    while(!q.empty()){\n        long long exted=q.front();\n        q.pop();\n        if(exted==mb)   //\u627e\u5230\u4e86\u76ee\u6807\n            return;\n        updateArr(exted,a); //\u6839\u636e\u6b64\u6b21\u62d3\u5c55\u7684\u7ed3\u70b9\u66f4\u65b0a\u6570\u7ec4\u7684\u503c\n        memcpy(b,a,sizeof(a));//\u590d\u5236\u4e00\u4e2aa\u6570\u7ec4\uff1ab\u6570\u7ec4\uff0c\u65b9\u4fbf\u505a\u4e24\u79cd\u64cd\u4f5c\uff08\u5c31\u4e0d\u9700\u8981\u505a\u5b8c\u4e00\u79cd\u64cd\u4f5c\u540e\u6062\u590d\uff09\n        long long fa_a=getDec(a),fa_b=getDec(b);//\u5f97\u5230a\u3001b\u6570\u7ec4\u6ca1\u64cd\u4f5c\u524d\u5bf9\u5e94\u7684\u6570\u503c\n        move1(a),move2(b);                      //\u5206\u522b\u7528a\u3001b\u6570\u7ec4\u505a\u4e24\u79cd\u64cd\u4f5c\n        long long son_a=getDec(a),son_b=getDec(b);//\u5f97\u5230a\u3001b\u6570\u7ec4\u64cd\u4f5c\u540e\u5bf9\u5e94\u7684\u6570\u503c\n        int cantor_a=getCantor(son_a),cantor_b=getCantor(son_b);//\u5f97\u5230\u64cd\u4f5c\u540e\u7684\u6570\u503c\u7684\u5eb7\u6258\u5c55\u5f00\u5f0f\n        if(!vis[cantor_a])                                      //\u5224\u91cd\uff1a\u662f\u5426\u51fa\u73b0\u8fc7\n            q.push(son_a),vis[cantor_a]=1,father[son_a]=fa_a;   //\u4f7f\u7528father\u6570\u7ec4\u6765\u8bb0\u5f55\u8def\u5f84\n        if(!vis[cantor_b])\n            q.push(son_b),vis[cantor_b]=1,father[son_b]=fa_b;\n    }\n}\nint main(){\n    init();\n    csz=getDec(cs); //csz\uff1a\u521d\u59cb\u503c\n    bfs();\n    father[csz]=0;\n    long long tmp=mb;   //mb\uff1a\u76ee\u6807\n    while(father[tmp]){\t//\u5982\u6b64\u627e\u5230\u7684\u662f\u5012\u8fc7\u6765\u7684\u987a\u5e8f\uff0c\u6240\u4ee5\u4f7f\u7528ans\u6570\u7ec4\u5c06\u7ed3\u679c\u5b58\u4e00\u904d\n        cnt++;\n        tmp=father[tmp];\n        ans[cnt]=tmp;   \n    }\n    if(!cnt){\n        cout<<\"UNSOLVABLE\"<<endl;\n        return 0;\n    }\n    cout<<cnt<<endl;\n    for(int i=cnt;i>=1;i--){  //\u5c06ans\u6570\u7ec4\u5012\u7740\u8f93\u51fa\u4e00\u904d\uff0c\u5373\u5f97\u5230\u4ece\u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u6b21\u5e8f\n        print(ans[i]);\n    }\n    print(mb);\n    return 0;\n}\n```\n",
        "postTime": 1546623462,
        "uid": 66124,
        "name": "Andorxor",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2578)\n\n[\u535a\u5ba2\u98df\u7528\u5e94\u8be5\u4e0d\u4f1a\u66f4\u4f73](https://www.luogu.com.cn/blog/EXODUS/p2578-ti-xie)\n\n\u9996\u5148\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u9898\u76ee\u91cc\u6709\u4e24\u79cd\u64cd\u4f5c\uff0c\u8981\u4e48\u65cb\u8f6c\uff0c\u8981\u4e48\u79fb\u52a8\u3002\u5e0c\u671b\u8fd8\u539f\u6210\u76ee\u6807\u72b6\u6001\uff0c\u4e0d\u7531\u5f97\u8ba9\u4eba\u60f3\u8d77\u6765\u597d\u50cf\u4f3c\u4e4e\u5927\u6982\u5e94\u8be5\u5dee\u4e0d\u591a\u6709\u4e00\u9053\u53eb\u516b\u6570\u7801\u96be\u9898\u7684\u9898\uff0c\u6545\u8003\u8651\u641c\u7d22\u3002\n\n\u9996\u5148\u6392\u9664dfs\uff0c\u56e0\u4e3adfs\u7b97\u6cd5\u4e0d\u641c\u5230\u5934\u4e0d\u8fd4\u56de\uff0c\u6700\u574f\u60c5\u51b5\u4e0b\u4f1a\u628a\u6240\u6709\u65b9\u6848\u641c\u4e00\u904d\uff0c\u5373\u4f7f\u641c\u5230\u4e86\u8fd8\u6709\u53ef\u80fd\u4e0d\u662f\u6b63\u89e3\uff0c\u5373\u4f7f\u9ad8\u6548\u526a\u679d\u4e5f\u5f88\u6709\u53ef\u80fd\u4f1aTLE\uff0c\u6240\u4ee5\u8003\u8651bfs\u3002\n\n\u9996\u5148\uff0c\u8bf7\u81ea\u5b66bfs\u3002\n\u53ef\u4ee5\u770b\u770b\u8fd9\u4e09\u4e2adalao\u7684\n\n[1](https://www.cnblogs.com/1starfish/p/9403991.html) [2](https://www.imooc.com/article/285772) [3](https://blog.csdn.net/qq_41759198/article/details/81510147)\n\n### \u6b22\u8fce\u56de\u6765\n\n\n------------\n\u9996\u5148\uff0c\u6839\u636e\u9898\u610f\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u4e24\u4e2a\u79fb\u52a8\u51fd\u6570\n```cpp\nvoid move1(node &x){\n\tlong long tmp=x.num[1];\n    x.num[1]=x.num[4];\n    x.num[4]=x.num[7];\n    x.num[7]=x.num[8];\n    x.num[8]=x.num[9];\n    x.num[9]=x.num[6];\n    x.num[6]=x.num[3];\n    x.num[3]=x.num[2];\n    x.num[2]=tmp;\n}\nvoid move2(node &x){\n\tswap(x.num[4],x.num[6]);\n\tswap(x.num[6],x.num[5]);\n}\n```\n\n\u5206\u522b\u5bf9\u5e94\u7b2c\u4e00\u3001\u4e8c\u79cd\u79fb\u52a8\u65b9\u5f0f\u3002\n\n\u5728\u8fd9\u91cc\u6211\u7528\u4e00\u7ef4\u4ee3\u66ff\u4e8c\u7ef4\uff0c$num_{i}$\u8868\u793a\u7b2c$(i-1)\\%3+1$\u5c42\u7684\u7b2c$i\\%3$\u4e2a\u6570\uff0c$node$\u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u8868\u793a\u67d0\u4e2a\u65f6\u6001\u4e0b\u7684\u68cb\u76d8\u72b6\u51b5\u3002\n\n## \u63a5\u4e0b\u6765\u662fbfs\n\n```cpp\nvoid bfs(){\n\tnode tmp0;\n\tfor(int i=1;i<=9;i++){\n\t\ttmp0.num[i]=first_num[i];\n\t}\n\ttmp0.now=0;\n\ttmp0.id=1;\n\tq.push(tmp0);\n\twhile(!q.empty()){\n\t\ttot++;\n\t\tnode tmp=q.front();\n\t\tq.pop();\n\t\tif(vis[int(tmp.num[1]*1e7+tmp.num[2]*1e6+tmp.num[3]*1e5+tmp.num[4]*1e4+tmp.num[5]*1e3+tmp.num[6]*1e2+tmp.num[7]*1e1+tmp.num[8])]){\n\t\t\tcontinue;\n\t\t}\n\t\tvis[int(tmp.num[1]*1e7+tmp.num[2]*1e6+tmp.num[3]*1e5+tmp.num[4]*1e4+tmp.num[5]*1e3+tmp.num[6]*1e2+tmp.num[7]*1e1+tmp.num[8])]=1;\n\t\tbool flag=1;\n\t\tfor(int i=1;i<=9;i++){\n\t\t\tif(tmp.num[i]!=i-1){\n\t\t\t\tflag=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(flag){\n\t\t\tprint(tmp.id);\n\t\t\texit(0);\n\t\t}\n\t\tnode m1=tmp;\n\t\tmove1(m1);\n\t\tm1.id=(tmp.id*2ll);\n\t\tq.push(m1);\n\t\tnode m2=tmp;\n\t\tmove2(m2);\n\t\tm2.id=(tmp.id*2ll+1ll);\n\t\tq.push(m2);\n\t}\n\tcout<<\"UNSOLVABLE\";\n\texit(0);\n}\n```\n$tmp0$\u8868\u793a\u4e00\u5f00\u59cb\u7684\u72b6\u6001\uff0c\u5c06\u5176\u52a0\u5165\u961f\u5217\uff0c\u6bcf\u6b21\u53d6\u51fa\u961f\u9996\u5143\u7d20\u5e76\u8fdb\u884c\u5224\u91cd\u3002$flag$\u7528\u6765\u5224\u65ad\u73b0\u5728\u662f\u4e0d\u662f\u76ee\u6807\u72b6\u6001\u3002$m1$\u8868\u793a\u5f53\u524d\u72b6\u6001\u8fdb\u884c$move1$\u540e\u7684\u7ed3\u679c\uff0c$m2$\u8868\u793a\u5f53\u524d\u72b6\u6001\u8fdb\u884c$move1$\u540e\u7684\u7ed3\u679c\u3002\u4e0b\u9762\u8bf4\u4e00\u4e0b\u5224\u91cd\u3002\n\n## \u5224\u91cd\ndalao\uff1a\u5eb7\u62d3\u5c55\u5f00\u3002\n\n#### ~~\u8fd9\u5bf9\u840c\u65b0\u6781\u4e0d\u53cb\u597d\uff01\uff01\uff01~~\n\u8003\u8651\u516b\u6570\u7801\u96be\u9898\u7684\u5224\u91cd\u6280\u5de7\u3002\u628a\u539f\u6765\u7684\u6570\u770b\u6210\u4e00\u4e2a\u5927\u6570\uff0c\u7528vis\u6570\u7ec4\u8bb0\u4e0b\u3002\n\n### \u95ee\u9898\u662f\uff1a\u4ed6\u5f00\u4e0d\u4e0a\u53bb\u554a\uff01\uff01\uff01\n### \uff08\u4f60\u8bf4map\uff1f\u62b1\u6b49TLE\uff1b\u4f60\u8bf4unordered_map?CCF\u4e0d\u627f\u8ba4\uff09\n\u518d\u6b21\u8003\u8651\u8fdb\u884c\u72b6\u6001\u538b\u7f29\u3002\u56e0\u4e3a\u6709\u4e5d\u4e2a\u4e0d\u53d8\u7684\u6570\uff0c\u6240\u4ee5\u6700\u540e\u4e00\u4e2a\u6570\u53ef\u4ee5\u8003\u8651\u4e0d\u8868\u793a\uff0c\u8fd9\u6837\u6570\u7ec4\u5927\u5c0f\u53ea\u8981\u5f00\u5230$10^7$\u5de6\u53f3\u7684$bool$\u7c7b\u578b\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e0d\u4f1aMLE\u3002\n\n## \u4e0b\u9762\u662f\u6700\u540e\u4e00\u4e2a\u95ee\u9898\uff1a\u8f93\u51fa\u3002\n\n\u770b\u5230\u6709\u7684dalao\u7528$map$\u5b58\u524d\u9a71\uff0c\u6ca1\u5fc5\u8981\u3002\n\n\u89c2\u5bdf\u8fd9\u5e45\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/nedwspej.png)\n\n\u8fd9\u4e0d\u5c31\u662f\u9897\u4e8c\u53c9\u6811\u5417\uff1f\uff01\n\n\u7b49\u7b49\uff0c\u4e8c\u53c9\u6811\uff1f\uff01\n\n\u5982\u679c\u6211\u628a\u5de6\u5b50\u8282\u70b9\u62bd\u8c61\u6210\u8fdb\u884c$move1$\u64cd\u4f5c\u7684\u7236\u8282\u70b9\uff0c\u53f3\u5b50\u8282\u70b9\u62bd\u8c61\u6210\u8fdb\u884c$move2$\u64cd\u4f5c\u7684\u7236\u8282\u70b9\uff0c\u90a3\u4e48\u4ece\u6839\u8282\u70b9\u5230\u8fbe\u76ee\u6807\u8282\u70b9\u7684\u8def\u5f84\u53ef\u4ee5\u770b\u505a\u4ece\u521d\u59cb\u72b6\u6001\u5230\u76ee\u6807\u72b6\u6001\u7684\u65b9\u5f0f\uff0c\u800c\u8def\u5f84\u4e0a\u7ecf\u8fc7\u7684\u6240\u6709\u8282\u70b9\u5c31\u662f\u8981\u8f93\u51fa\u7684\u65b9\u5f0f\uff0c\u800c\u4e0a\u6587node\u4e2d\u7684$id$\uff0c\u5c31\u662f\u8d77\u5230\u4e86\u5224\u522b\u513f\u5b50\u7684\u4f5c\u7528\u3002\n\n\u4e0a\u56fe\u4e2d\u7684$5$\u53f7\u8282\u70b9\u5e94\u4e3a$7$\u53f7\uff0c\u56e0\u4e3a$2$\u53f7\u8282\u70b9\u7684\u5b50\u8282\u70b9\u4e0d\u5728\u4e86\u3002\n\n\u81f3\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa$move$\u51fd\u6570\u7684\u9006\u51fd\u6570\uff1a$return$\u51fd\u6570\n```cpp\nvoid return1(node &x){\n\tlong long tmp=x.num[1];\n    x.num[1]=x.num[2];\n    x.num[2]=x.num[3];\n    x.num[3]=x.num[6];\n    x.num[6]=x.num[9];\n    x.num[9]=x.num[8];\n    x.num[8]=x.num[7];\n    x.num[7]=x.num[4];\n    x.num[4]=tmp;\n}\nvoid return2(node &x){\n\tswap(x.num[4],x.num[5]);\n\tswap(x.num[5],x.num[6]);\n}\n```\n## \u63a5\u4e0b\u6765\u662f\u8f93\u51fa\n```cpp\nvoid print(long long id){\n\tlong long cnt=0;\n\tnode ansf;\n\tlong long x=log2(id);\n\t//if(x<0){\n\t\t//cout<<\"UNSOLVABLE\";\n\t\t//exit(0);\n\t//}\n\tfor(int i=1;i<=9;i++){\n\t\tansf.num[i]=i-1;\n\t\tans[i][cnt]=ansf.num[i];\n\t}\n\twhile(id>1){\n\t\tlong long x=id%2;\n\t\tid/=2;\n\t\tif(x==1){\n\t\t\treturn2(ansf);\n\t\t\tcnt++;\n\t\t\tfor(int i=1;i<=9;i++){\n\t\t\t\tans[i][cnt]=ansf.num[i];\n\t\t\t}\n\t\t}else{\n\t\t\treturn1(ansf);\n\t\t\tcnt++;\n\t\t\tfor(int i=1;i<=9;i++){\n\t\t\t\tans[i][cnt]=ansf.num[i];\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",x);\n\tfor(int i=1;i<=9;i++){\n\t\tprintf(\"%lld \",first_num[i]);\n\t\tif(!(i%3)){\n\t\t\tprintf(\"\\n\");\n\t\t}\n\t}\n\tprintf(\"\\n\");\n\tfor(int i=cnt-1;i>=0;i--){\n\t\tfor(long long j=1;j<=9;j++){\n\t\t\tprintf(\"%lld \",ans[j][i]);\n\t\t\tif(!(j%3)){\n\t\t\t\tprintf(\"\\n\");\n\t\t\t}\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\t\n}\n```\n\u89e3\u91ca\u4e00\u4e0b\uff1a\u5f53\u6211\u4eec\u53d1\u73b0\u76ee\u6807\u8282\u70b9\u7684\u7f16\u53f7\u4e3a$id$\u65f6\uff0c\u8fdb\u884c\u5206\u89e3\u4e8c\u8fdb\u5236\u3002\u82e5\u4e3a$0$\u8fdb\u884c$return1$\u51fd\u6570\u5e76\u4fdd\u5b58\u7b54\u6848\uff0c\u82e5\u4e3a$1$\u8fdb\u884c$return2$\u51fd\u6570\u5e76\u4fdd\u5b58\u7b54\u6848\uff08\u5e94\u8be5\u80fd\u60f3\u51fa\u6765\uff0c\u4e0d\u591a\u8bf4\u4e86\uff09\n\u6700\u540e\u653e\u4e0a\u6807\u7a0b\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nbool vis[987654321];\nstruct node{\n\tlong long num[14];\n\tlong long now;\n\tlong long id;\n};\nqueue<node>q;\nlong long first_num[14];\nlong long ans[9][142857];\nlong long tot;\nvoid move1(node &x){\n\tlong long tmp=x.num[1];\n    x.num[1]=x.num[4];\n    x.num[4]=x.num[7];\n    x.num[7]=x.num[8];\n    x.num[8]=x.num[9];\n    x.num[9]=x.num[6];\n    x.num[6]=x.num[3];\n    x.num[3]=x.num[2];\n    x.num[2]=tmp;\n}\nvoid move2(node &x){\n\tswap(x.num[4],x.num[6]);\n\tswap(x.num[6],x.num[5]);\n}\nvoid return1(node &x){\n\tlong long tmp=x.num[1];\n    x.num[1]=x.num[2];\n    x.num[2]=x.num[3];\n    x.num[3]=x.num[6];\n    x.num[6]=x.num[9];\n    x.num[9]=x.num[8];\n    x.num[8]=x.num[7];\n    x.num[7]=x.num[4];\n    x.num[4]=tmp;\n}\nvoid return2(node &x){\n\tswap(x.num[4],x.num[5]);\n\tswap(x.num[5],x.num[6]);\n}\nvoid print(long long id){\n\tlong long cnt=0;\n\tnode ansf;\n\tlong long x=log2(id);\n\tfor(int i=1;i<=9;i++){\n\t\tansf.num[i]=i-1;\n\t\tans[i][cnt]=ansf.num[i];\n\t}\n\twhile(id>1){\n\t\tlong long x=id%2;\n\t\tid/=2;\n\t\tif(x==1){\n\t\t\treturn2(ansf);\n\t\t\tcnt++;\n\t\t\tfor(int i=1;i<=9;i++){\n\t\t\t\tans[i][cnt]=ansf.num[i];\n\t\t\t}\n\t\t}else{\n\t\t\treturn1(ansf);\n\t\t\tcnt++;\n\t\t\tfor(int i=1;i<=9;i++){\n\t\t\t\tans[i][cnt]=ansf.num[i];\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",x);\n\tfor(int i=1;i<=9;i++){\n\t\tprintf(\"%lld \",first_num[i]);\n\t\tif(!(i%3)){\n\t\t\tprintf(\"\\n\");\n\t\t}\n\t}\n\tprintf(\"\\n\");\n\tfor(int i=cnt-1;i>=0;i--){\n\t\tfor(long long j=1;j<=9;j++){\n\t\t\tprintf(\"%lld \",ans[j][i]);\n\t\t\tif(!(j%3)){\n\t\t\t\tprintf(\"\\n\");\n\t\t\t}\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\t\n}\nvoid bfs(){\n\tnode tmp0;\n\tfor(int i=1;i<=9;i++){\n\t\ttmp0.num[i]=first_num[i];\n\t}\n\ttmp0.now=0;\n\ttmp0.id=1;\n\tq.push(tmp0);\n\twhile(!q.empty()){\n\t\ttot++;\n\t\tnode tmp=q.front();\n\t\tq.pop();\n\t\tif(vis[int(tmp.num[1]*1e7+tmp.num[2]*1e6+tmp.num[3]*1e5+tmp.num[4]*1e4+tmp.num[5]*1e3+tmp.num[6]*1e2+tmp.num[7]*1e1+tmp.num[8])]){\n\t\t\tcontinue;\n\t\t}\n\t\tvis[int(tmp.num[1]*1e7+tmp.num[2]*1e6+tmp.num[3]*1e5+tmp.num[4]*1e4+tmp.num[5]*1e3+tmp.num[6]*1e2+tmp.num[7]*1e1+tmp.num[8])]=1;\n\t\tbool flag=1;\n\t\tfor(int i=1;i<=9;i++){\n\t\t\tif(tmp.num[i]!=i-1){\n\t\t\t\tflag=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(flag){\n\t\t\tprint(tmp.id);\n\t\t\texit(0);\n\t\t}\n\t\tnode m1=tmp;\n\t\tmove1(m1);\n\t\tm1.id=(tmp.id*2ll);\n\t\tq.push(m1);\n\t\tnode m2=tmp;\n\t\tmove2(m2);\n\t\tm2.id=(tmp.id*2ll+1ll);\n\t\tq.push(m2);\n\t}\n\tcout<<\"UNSOLVABLE\";\n\texit(0);\n}\nsigned main()\n{\n\tfor(int i=1;i<=9;i++){\n\t\tcin>>first_num[i];\n\t}\n\tbfs();\n\treturn 0;\n}\n```\n# \u6700\u540e\uff1a\u4e00\u5b9a\u5f00$long\\ long$\n\n\u6709\u95ee\u9898\u8bf7\u79c1\u804a\uff0c\u6b22\u8fce\u5404\u4f4d\u5927\u4f6c\u66b4\u8e29\u3002\n\n\u770b\u5230\u8fd9\u4e86\uff0c\u4e0d\u70b9\u4e2a\u8d5e\u884c\u5417\uff1f\uff1f\n## $The\\ end$",
        "postTime": 1613192239,
        "uid": 373699,
        "name": "EXODUS",
        "ccfLevel": 0,
        "title": "P2578\u9898\u89e3"
    },
    {
        "content": "### \u5e7f\u641c\u597d\u9898\u4e00\u9053\uff0c~~\u6df1\u641c\u51e0\u4e4e\u9a7e\u9a6d\u4e0d\u4e86~~\n\n\u5173\u4e8e\u8868\u793a\u72b6\u6001\u7684\u65b9\u6cd5\uff0c\u5927\u6982\u6709\u4ee5\u4e0b\u51e0\u79cd\n\n#### \u65b9\u6cd51:  **9\u4f4d10\u8fdb\u5236\u8868\u793a**\n\n\u4f18\u70b9\uff1a\u5bb9\u6613\u5c06\u77e9\u9635\u6620\u5c04\u6210\u6570\u5b57\n\n\u7f3a\u70b9\uff1a\u96be\u4ee5\u8868\u793a\u8f6c\u79fb\uff0c\u65e0\u6cd5\u8bb0\u5f55vis\u6570\u7ec4\n\n\n~~\u7a7a\u95f4\u70b8\u6b7b\u4f60\uff0c\u4e0d\u4fe1\u4f60\u8bd5\u8bd5\u4e0b\u9762\u4ee3\u7801\u4ea4\u4e0a\u53bb~~\n\n```cpp\n#include<cstring>\nbool vis[876543211];\nint main()\n{\n    memset(vis,0,sizeof(vis));\n    /*\n\t\u6ce8\u610f\uff1a\u6d1b\u8c37\u8bc4\u6d4b\u673a\u5236\u662f\u8bbf\u95ee\u591a\u5c11\u7a7a\u95f4\u7b97\u591a\u5c11\u7a7a\u95f4\uff0c\n\t\t  \u800c\u4e00\u822c\u6bd4\u8d5b\u4e2d\u8bc4\u6d4b\u673a\u5236\u662f\u5f00\u591a\u5927\u6570\u7ec4\u7b97\u591a\u5927\n\t\t  memset\u4e00\u4e0b \u53ef\u786e\u4fdd\u904d\u5386\u5185\u90e8\u5168\u90e8\u7a7a\u95f4 \n    */ \n\treturn 0;\n}\n```\n\n#### \u65b9\u6cd52: * *9\u7ef4\u6570\u7ec4\u8868\u793a\n\n\u4f18\u70b9\uff1a\u5bb9\u6613\u5c06\u77e9\u9635\u6620\u5c04\u6210\u6570\u7ec4\u7684\u4e00\u4e2a\u5bf9\u5e94\u7a7a\u95f4\u3001\u6781\u6613\u8868\u793a\u8f6c\u79fb\n\n\u7f3a\u70b9\uff1a~~\u8fd8\u662f\u70b8\u7a7a\u95f4~~\n```cpp\n#include<cstring>\nbool vis[9][9][9][9][9][9][9][9][9];\nint main()\n{\n    memset(vis,0,sizeof(vis));\n\treturn 0;\n}\n```\n\n#### \u65b9\u6cd53\uff1a \u5eb7\u6258\u5c14\u5c55\u5f00\n\u770b\u770b**\u767e\u5ea6\u5b9a\u4e49**\n\n\n------------\n\n\n\u5eb7\u6258\u5c55\u5f00\u662f\u4e00\u4e2a\u5168\u6392\u5217\u5230\u4e00\u4e2a\u81ea\u7136\u6570\u7684\u53cc\u5c04\uff0c\u5e38\u7528\u4e8e\u6784\u5efa\u54c8\u5e0c\u8868\u65f6\u7684\u7a7a\u95f4\u538b\u7f29\u3002 \u5eb7\u6258\u5c55\u5f00\u7684\u5b9e\u8d28\u662f\u8ba1\u7b97\u5f53\u524d\u6392\u5217\u5728\u6240\u6709\u7531\u5c0f\u5230\u5927\u5168\u6392\u5217\u4e2d\u7684\u987a\u5e8f\uff0c\u56e0\u6b64\u662f\u53ef\u9006\u7684\u3002\n\n----------\n\n\u901a\u4fd7\u5730\u8bf4\uff0c\u5c31\u662f\u5c06\u4e00\u4e2a\u6570\u5217\u6839\u636e\u5b57\u5178\u5e8f\u6620\u5c04\u6210\u4e00\u4e2a\u8f83\u5c0f\u7684\u6570\uff0c\u7136\u540e\u4f18\u5316\u7a7a\u95f4\u3002\n\n###### \uff08\u4ee3\u4ef7\u662f\u7565\u589e\u5927\u65f6\u95f4\u5e38\u6570\uff09\n\n\u8fd9\u6837\u914d\u540810\u8fdb\u5236\u8868\u8fbe\u72b6\u6001\uff0c\u7b80\u5355\u505a\u4e00\u4e2a\u8bb0\u5fc6\u5316\u4f18\u5316\uff08\u7531\u4e8e\u5e7f\u641c\u662f \u6b65\u6570\u5c11->\u6b65\u6570\u591a \u641c\u7d22\uff0c\u5982\u679c\u4e24\u6b21\u641c\u7d22\u5230\u540c\u4e00\u72b6\u6001\uff0c\u7b2c\u4e8c\u6b21\u4e00\u5b9a **\u4e0d\u4f18\u4e8e** \u7b2c\u4e00\u6b21\uff09\n\n\u8fd9\u6837\u5199\u4ee5\u540e\uff0c\u4f60\u5c31\u4f1a\u53d1\u73b0\n\n#### _ Submit++\uff0cPassed++\uff1b_ \n\n\u7531\u4e8e\u5f88\u591aDalao\u5df2\u7ecf\u53d1\u8fc7\u8fd9\u6837\u7684\u4ee3\u7801\u4e86\uff0c\u6211\u5c31\u4e0d\u7c98\u8fd9\u4e00\u65b9\u6cd5\u7684\u4ee3\u7801\u4e86\u3002\n\n~~\u7136\u800c\uff0c\u6700\u540e\u51e0\u4e2a\u6d4b\u8bd5\u70b9\u90fd\u8981\u8dd1\u5927\u7ea6**900ms**\uff0c\u5f88\u4e0d\u723d\uff0c\u6709\u6728\u6709\uff1f~~\n\n~~\u4e8e\u662f\u4e4e\uff0c\u5929\u5730\u7384\u9ec4\uff0c\u5b87\u5b99\u6d2a\u8352\u2026\u2026~~\n### \u65b9\u6cd53+\uff1a 16\u8fdb\u5236\u4f18\u5316+\u5eb7\u6258\u5c14\u5c55\u5f00\n#### \u4e0d\u4e45\uff0c\u65b9\u6cd53+\u6a2a\u7a7a\u51fa\u4e16\n##  \u524d\u65b9\u9ad8\u80fd \n##  \u524d\u65b9\u9ad8\u80fd \n##  \u524d\u65b9\u9ad8\u80fd \n\n\u8fd9\u91cc\u9009\u752816\u8fdb\u5236\u7684\u539f\u56e0\u662f\uff1a\n\n1.\u4e0e10\u8fdb\u5236\u76f8\u540c\u7684\u662f\uff0c\u53ef\u4ee5\u76f4\u63a5\u7528\u4e00\u4f4d\u8868\u8fbe\u77e9\u9635\u76841\u4e2a\u4f4d\u7f6e\uff0c\u800c\u4e14\u90fd\u662f\u4e00\u4e2along long int\u8868\u8fbe\u4e00\u4e2a\u72b6\u6001\uff0c\u7a7a\u95f4\u6ca1\u6709\u4efb\u4f55\u52a3\u52bf\n\n2.\u53ef\u4ee5\u901a\u8fc7\u7701\u65f6\u95f4\uff0c\u529f\u80fd\u5f3a\u5927\u7684\u4e8c\u8fdb\u5236\u4f4d\u8fd0\u7b97\uff0c\u5feb\u901f\u9ad8\u6548\u5730\u5b9e\u73b0\u72b6\u6001\u8f6c\u79fb\n\n#### \u4e3e\u4e2a\u6817\u5b50\uff1a\n\n#### a b c\n#### d e f\n#### g h i\n\n\u752816\u8fdb\u5236\u8868\u8fbe\u5c31\u662f\n#### abcdefghi\n\u6267\u884c\u64cd\u4f5c2\u4ee5\u540e\u53d8\u4e3a\n#### a b c\n#### f d e\n#### g h i\n\u752816\u8fdb\u5236\u8868\u8fbe\u5c31\u662f\n#### abcfdeghi\n\u6211\u4eec\u6bd4\u8f83\u4e24\u4e2a\u72b6\u6001\u53d1\u73b0\n#### \u524d\u4e09\u4f4dabc\u548c\u6700\u540e\u4e09\u4f4dghi\u4e0d\u53d8\n\n#### \u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5229\u7528 and \u8fd0\u7b97\u4e00\u6b21\u6027\u63d0\u53d6\u8fd96\u4f4d\n\n#### t&\uff08fff000fff\uff09\uff0cf\u8868\u793a16\u8fdb\u5236\u4e2d\u768415\nthen\uff1f\n\n#### d\u548ce\u53ef\u4ee5\u770b\u505a\u4e00\u4e2a\u6574\u4f53\uff0c\u5373\u53ef\u4ee5\u540c\u7406\n\n#### t&\uff08000ff0000\uff09\u63d0\u53d6\u7136\u540e\u53f3\u79fb1\u4e2a16\u8fdb\u5236\u4f4d\uff08>>4\uff09\u8f6c\u79fb\n\n#### \u540c\u7406\u53ef\u4ee5\uff08t&00000f000\uff09<<8\u8f6c\u79fbf\n\n### \u6700\u540e\u7684\u6700\u540e\uff0c\u4e09\u90e8\u5206\u6216\u4ee5\u4e0b\u5c31\u662f\u8f6c\u79fb\u4ee5\u540e\u7ed3\u679c\u3002\n\n### \u5f88\u6109\uff08du\uff09\u5feb\uff08liu\uff09\uff0c\u6709\u6728\u6709\n\n\u7531\u4e8e\u64cd\u4f5c1\u6784\u6210\u590d\u6742\uff0c\u4e0d\u8be6\u7ec6\u8bb2\u89e3\uff0c\u4f46\u662f\u65e0\u8bba\u591a\u590d\u6742\uff0c\u4e5f\u4e00\u5b9a\u6bd410\u8fdb\u5236\u65f6\u95f4\u5e38\u6570\u5c0f\u5f88\u591a\n\n\u4e0a\u4ee3\u7801\n```cpp\n#include<cstdio>\nbool vis[362883];//\u6bcf\u4e00\u79cd\u72b6\u6001\u662f\u5426\u4ee5\u8bbf\u95ee\u8fc7 \nlong long sta[362883];//\u6bcf\u4e00\u79cd\u72b6\u6001\u768416\u8fdb\u5236\u4e0b\u7684\u6570\u503c \nlong long Q[362883];//\u961f\u5217\uff0c\u8bb0\u5f55\u72b6\u6001\u7f16\u7801  \nint pre[362883];//\u524d\u9a71 \nint steps[362883];//\u6b65\u6570 \ninline int Binary_Find(long long num) \n{\n    register int l=1,r=362880/*9\u7684\u9636\u4e58*/,mid;\n    while(l<=r)\n    {\n        mid=(l+r)>>1;\n        if(sta[mid]==num)\n        {\n            return mid;\n        }\n        if(sta[mid]<num)\n        {\n            l=mid+1;\n        }\n        else r=mid-1;\n    }\n}\nint num;\ninline long long Spin(long long t)//\u64cd\u4f5c1\u00b7\u8c1c\u4e4b16\u8fdb\u5236\u72b6\u6001\u8f6c\u79fb \n{\n\t//\u6211\u4e5f\u4e0d\u60f3\u6362\u884co(\u2565\ufe4f\u2565)o \n    return \n\t((t&15732480)<<12)|((t&68451041280)>>4)|((t&255)<<4)|\n\t((t&61440)>>12)|(t&983040)|((t&251658240)>>12);\n}\ninline long long Push(long long t)//\u64cd\u4f5c2\u00b7\u8c1c\u4e4b16\u8fdb\u5236\u72b6\u6001\u8f6c\u79fb \n{\n    return (t&68702703615)|(t&4294967296)|((t&61440)<<8)|((t&16711680)>>4);\n}\nvoid dfs(int cnt,long long alr)\n{//\u6df1\u641c\u63d0\u524d\u83b7\u53d6\u51fa\u6240\u6709\u72b6\u6001\u768416\u8fdb\u5236\u8868\u793a \n    if(cnt==9)\n    {\n        sta[++num]=alr;\n    }//\u5eb7\u6258\u5c55\u5f00\uff0c\u5373\u5e8f\u5217\u6620\u5c04\u6210\u5b57\u5178\u5e8f\u6392\u5e8f \n    for(register int i=0;i<=8;++i)\n    {\n        if(!vis[i])\n        {\n            vis[i]=1;\n            dfs(cnt+1,(alr<<4)|i);\n            vis[i]=0;\n        }\n    }\n}\nvoid print(int pos)//\u9012\u5f52\u8f93\u51fa\u8def\u5f84 \n{\n    if(pos==0)\n    {\n        return;\n        //\u4e00\u5b9a\u8981\u52a0\u5728\u9012\u5f52\u8bed\u53e5\u524d\u9762\uff0c\u4e0d\u7136\u6b7b\u5faa\u73af \n    }\n    print(pre[pos]);\n    long long t=Q[pos];\n    long long base=64424509440;\n    printf(\"%d \",(t&base)>>32);\n    base>>=4;\n    printf(\"%d \",(t&base)>>28);\n    base>>=4;\n    printf(\"%d\\n\",(t&base)>>24);\n    base>>=4;\n    printf(\"%d \",(t&base)>>20);\n    base>>=4;\n    printf(\"%d \",(t&base)>>16);\n    base>>=4;\n    printf(\"%d\\n\",(t&base)>>12);\n    base>>=4;\n    printf(\"%d \",(t&base)>>8);\n    base>>=4;\n    printf(\"%d \",(t&base)>>4);\n    base>>=4;\n    printf(\"%d\\n\\n\",t&base);\n    return;\n}\nint main()\n{\n    dfs(0,0);\n    /*\n\t\u4e3a\u5565\u4e0d\n\tsort(sta+1,sta+362881)\uff1f\n\t\u7b54\uff1a\u6839\u636edfs\u7684\u7279\u6027\uff0c\u641c\u7d22\u8bb0\u5f55\u51fa\u7684\u72b6\u6001\u987a\u5e8f\u4e00\u5b9a\u5355\u8c03\uff0c\u53ef\u4ee5\u624b\u52a8\u6a21\u62df\u4e00\u4e0b\u3002 \n\t*/\n    int x;\n    for(int i=1;i<=9;++i)\n    {\n    \tscanf(\"%d\",&x);\n    \tQ[1]=(Q[1]<<4)|x;\n\t\t//\u5c06\u521d\u59cb\u72b6\u6001\u8f6c\u5316\u4e3a16\u8fdb\u5236 \n    }\n    int head=1;\n    int tail=1;\n    int pos;\n    while(head<=tail)\n    {//\u5e7f\u641c \n        long long cur=Q[head];\n        if(cur==305419896/*\u641c\u7d22\u76ee\u6807\u72b6\u6001\uff0c\u537316\u8fdb\u5236\u4e0b\u7684012345678*/) \n        {\n            break;\n        }\n        long long Next=Push(cur);\n        pos=Binary_Find(Next);\n        if(!vis[pos])\n        {\n            vis[pos]=1;\n            /*\n\t\t\t\u7531\u4e8e\u5e7f\u641c\u662f \u6b65\u6570\u5c11->\u6b65\u6570\u591a \u641c\u7d22\uff0c\n\t\t\t\u5982\u679c\u4e24\u6b21\u641c\u7d22\u5230\u540c\u4e00\u72b6\u6001\uff0c\n\t\t\t\u7b2c\u4e8c\u6b21\u4e00\u5b9a *\u4e0d\u4f18\u4e8e* \u7b2c\u4e00\u6b21 \uff0c\u76f4\u63a5\u526a\u679d\u51cf\u6389 \n\t\t\t*/\n            Q[++tail]=Next;\n            steps[tail]=steps[head]+1;\n            pre[tail]=head;\n        }\n        Next=Spin(cur);\n        pos=Binary_Find(Next);\n        if(!vis[pos])\n        {\n            vis[pos]=1;\n            Q[++tail]=Next;\n            steps[tail]=steps[head]+1;\n            pre[tail]=head;\n        }\n        ++head;\n    }\n    printf(\"%d\\n\",steps[head]);\n    print(head);\n    return 0;\n}\n```",
        "postTime": 1547224202,
        "uid": 113400,
        "name": "2018\u8fb9\u5883",
        "ccfLevel": 9,
        "title": "P2578 [ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f \u9898\u89e3"
    },
    {
        "content": "\u5176\u5b9e\u6839\u672c\u4e0d\u7528\u4ec0\u4e48\u4e5d\u7ef4\u6570\u7ec4\u4e4b\u7c7b\u7684\u90a3\u4e48\u9ebb\u70e6\u5566\n\n\uff08\u90a3\u6837\u5199\u8d77\u6765\u591a\u9ebb\u70e6\u554a\uff09\n\n\u4e5f\u4e0d\u7528\u5eb7\u62d3\u5c55\u5f00\u554a\n\n\uff08\u90a3\u6837\u5199\u8d77\u6765\u5bb9\u6613\u51fa\u9505\u8fd8\u96be\u8c03\u554a\uff09\n\n\u5176\u5b9e\u76f4\u63a5\u72b6\u538b\u5c31\u884c\u4e86\uff08\u5177\u4f53\u770b\u4ee3\u7801QwQ\uff09\n\n\u800c\u4e14\u8fd8\u6709\u4ef6\u4e8b\n\n\u5c31\u662f\u72b6\u538b\u6839\u672c\u4e0d\u7528\u628a\u6bcf\u4e00\u4f4d\u90fd\u7ed9\u538b\u8fdb\u53bb\uff0c\u53ea\u9700\u8981\u628a\u524d8\u4f4d\u8bb0\u5f55\u5c31\u884c\u4e86\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\n\n\u56e0\u4e3a\u663e\u800c\u6613\u89c1\uff0c\u6211\u4eec\u53ea\u8981\u77e5\u9053\u524d8\u4f4d\uff0c\u90a3\u4e48\u6700\u540e\u4e00\u4f4d\u80af\u5b9a\u5c31\u662f\u5df2\u77e5\u7684\n\n\u6240\u4ee5\u8bb0\u5f55\u6700\u540e\u4e00\u4f4d\u663e\u7136\u662f\u591a\u4f59\u7684\n\n\u90a3\u4e48\u6211\u4eec\u628a\n\n```cpp\n1 2 3\n4 5 6\n7 8 0\n```\n\u8fd9\u4e2a\u77e9\u9635\uff0c\u6211\u4eec\u53ef\u4ee5\u72b6\u538b\u6210\n\n```cpp\n123456789\n```\n\n\u663e\u7136\uff0c\u8fd9\u4e2a\u6570\u80af\u5b9a\u5728$10 ^ 8$\u4ee5\u5185\n\n\u90a3\u4e48\uff0c\u6211\u4eec\u5f00\u4e00\u4e2a$10 ^ 8$\u89c4\u6a21\u7684$bool$\u6570\u7ec4\u7684\u5185\u5b58\u6d88\u8017\u662f\u5b8c\u5168\u53ef\u4ee5\u63a5\u53d7\u7684\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u6109\u5feb\u7684$BFS$\u5566\uff5e\uff5e\n\n\u4e0a\u4ee3\u7801\uff01\n\n```cpp\n#include<bits/stdc++.h>\n\nbool hsh[100000000];\n\nint Zip(int xx[]){ // \u5c06\u4e00\u4e2a\u8868\u793a\u77e9\u9635\u7684\u6570\u7ec4\u8f6c\u5316\u4e3a\u4e00\u4e2a\u8868\u793a\u72b6\u6001\u7684\u6570\u7ec4\n\tint Ans = 0;\n\tfor(int i = 1; i <= 8; i++){\n\t\tAns *= 10;\n\t\tAns += xx[i];\n\t}\n\treturn Ans;\n}\n\nstruct Point{\n\tint Step;\n\tint Sit[10];\n    int Last;\n}q[1000010];\nint qf = 1, qe = 1;\n\nvoid Dfs(int Cur){\n    if(Cur != 1)\n        Dfs(q[Cur].Last);\n    printf(\"%d %d %d\\n%d %d %d\\n%d %d %d\\n\\n\", q[Cur].Sit[1], q[Cur].Sit[2], q[Cur].Sit[3], q[Cur].Sit[4], q[Cur].Sit[5], q[Cur].Sit[6], q[Cur].Sit[7], q[Cur].Sit[8], q[Cur].Sit[9]);\n}\nint main(){\n\tchar s;\n\tq[1].Step = 0;\n\tfor(int i = 1; i <= 9; i++){\n        scanf(\"%d\", &q[1].Sit[i]);\n\t}\n\twhile(qf <= qe){\n    \tif(Zip(q[qf].Sit) == 1234567){\n\t\t\tprintf(\"%d\\n\", q[qf].Step);\n            Dfs(qf);\n\t\t\treturn 0;\n\t\t}\n\t\tPoint Prev = q[qf];\n        q[++qe] = Prev;\n        q[qe].Last = qf;\n        q[qe].Step++;\n        std::swap(q[qe].Sit[7], q[qe].Sit[4]);\n        std::swap(q[qe].Sit[8], q[qe].Sit[7]);\n        std::swap(q[qe].Sit[9], q[qe].Sit[8]);\n        std::swap(q[qe].Sit[6], q[qe].Sit[9]);\n        std::swap(q[qe].Sit[3], q[qe].Sit[6]);\n        std::swap(q[qe].Sit[2], q[qe].Sit[3]);\n        std::swap(q[qe].Sit[1], q[qe].Sit[2]);\n        int kkk = Zip(q[qe].Sit);\n        if(hsh[kkk])\n            qe--;\n        hsh[kkk] = true;\n\n        q[++qe] = Prev;\n        q[qe].Last = qf;\n        q[qe].Step++;\n        std::swap(q[qe].Sit[6], q[qe].Sit[5]);\n        std::swap(q[qe].Sit[5], q[qe].Sit[4]);\n        kkk = Zip(q[qe].Sit);\n        if(hsh[kkk])\n            qe--;\n        hsh[kkk] = true;\n        \n        qf++;\n\t}\n    printf(\"-1\");\n}\n```",
        "postTime": 1543208317,
        "uid": 36362,
        "name": "Dilute",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "## [P2578 [ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f](https://www.luogu.com.cn/problem/P2578)\n## \u9898\u76ee\u5927\u610f\n\u7ed9\u5b9a\u4e00\u4e2a\u4e5d\u5bab\u683c\uff0c\u901a\u8fc7\u4e24\u79cd\u64cd\u4f5c\u53d8\u6210\u76ee\u6807\u72b6\u6001\uff0c\u8f93\u51fa\u6700\u5c11\u6b65\u6570\u4e0e\u53d8\u5316\u8fc7\u7a0b\u3002\u82e5\u65e0\u6cd5\u53d8\u6210\u76ee\u6807\u72b6\u6001\uff0c\u8f93\u51fa \"UNSOLVABLE\" \u3002\n## solution:\n\u8003\u8651\u4f7f\u7528\u5e7f\u641c\u4f18\u5316( $\\text{BFS}+\\text{Hash}$ )\u3002\n\u4e0b\u9762\u5f00\u59cb\u5e7f\u641c\u3002\u961f\u5217\u4e2d\u6211\u5b58\u4e86\u7ed3\u6784\u4f53\u7c7b\u578b\uff0c\u5305\u62ec\u4e24\u4e2a\u6210\u5458\uff1a\n```cpp\nstruct SI{\n\tstring str; //\u5f53\u524d\u72b6\u6001\n\tint fl;//\u5f53\u524d\u6b65\u6570\n}q[mo];//mo\u4e3a\u54c8\u5e0c\u6a21\u6570\n```\n\u6211\u4eec\u7528\u4e00\u4e2a $\\text{string}$ \u7c7b\u578b\u6765\u8868\u793a\u5f53\u524d\u7684\u72b6\u6001\uff0c\u8fd9\u6837\u65b9\u4fbf\u901a\u8fc7\u4e0b\u6807\u5b9e\u73b0\u4e24\u79cd\u64cd\u4f5c\u3002\n\u4e0b\u9762\u6211\u4eec\u6784\u5efa\u51fa\u5e7f\u641c\u6846\u67b6\uff1a\n```cpp\nint h=1,t=0;\n\u5c06\u521d\u59cb\u72b6\u6001\u5165\u961f;\nwhile(h<=t){\n\t\u53d6\u51fa\u961f\u5934\uff1b\n\t\u5982\u679c\u5f53\u524d\u72b6\u6001\u4e0e\u76ee\u6807\u72b6\u6001\u76f8\u540c\uff0c\u8fd4\u56de\u5f53\u524d\u6b65\u6570\uff1b\n\t\u901a\u8fc7\u4e24\u79cd\u64cd\u4f5c\u751f\u6210\u4e24\u4e2a\u65b0\u72b6\u6001\uff1b\n  \t\u5224\u65ad\u65b0\u72b6\u6001\u662f\u5426\u51fa\u73b0\u8fc7\uff0c\u82e5\u6ca1\u6709{\n\t\t\u5c06\u8be5\u72b6\u6001\u7684\u5b57\u7b26\u4e32\u4e0e\u5f53\u524d\u6b65\u6570+1\u505a\u6210\u7ed3\u6784\u9898\u52a0\u5165\u961f\u5c3e\uff1b\n\t\t\u5c06\u8be5\u72b6\u6001\u586b\u5165\u54c8\u5e0c\u8868\uff1b\n\t\t\u8bb0\u5f55\u8def\u5f84\uff1b\n   }\n}\n```\n\u53d8\u6362\u51fd\u6570\u5982\u4e0b\uff0c\u76f4\u63a5\u6a21\u62df\u5c31\u597d\u3002\n\n\u8def\u5f84\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a $\\text{map<long long,long long> lujing}$ \u6765\u8bb0\u5f55\u3002 $\\text{lujing[str]}$ \u4e3a\u6b64\u72b6\u6001\u7684\u524d\u4e00\u6b65\uff0c\u901a\u8fc7 $\\text{while}$ \u5faa\u73af\u8bb0\u5f55\u7b54\u6848\uff0c\u6700\u540e\u5012\u5e8f\u8f93\u51fa\u540e\u518d\u8f93\u51fa\u76ee\u6807\u72b6\u6001\u5373\u53ef\u3002\u7701\u9009\u9898\uff0c\u5f00\u4e2a $O2$ \u4e5f\u7f62\n## \u63a5\u4e0b\u6765\u662f\u7ec6\u8282\u7684\u5904\u7406\uff1a\n\u8bb0\u5f55\u8def\u5f84\u65f6\u9700\u8981\u5c06 $\\text{string}$ \u7c7b\u578b\u8f6c\u6362\u6210\u4e00\u4e2a\u4e5d\u4f4d\u6570:\n```cpp\nlong long zhuan(string str){\n\tlong long s0,s1,s2,s3,s4,s5,s6,s7,s8;\n\ts0=(str[0]-'0')*100000000,s1=(str[1]-'0')*10000000,s2=(str[2]-'0')*1000000,\n\ts3=(str[3]-'0')*100000,   s4=(str[4]-'0')*10000,   s5=(str[5]-'0')*1000,\n\ts6=(str[6]-'0')*100,      s7=(str[7]-'0')*10,      s8=(str[8]-'0')*1;\n\treturn s0+s1+s2+s3+s4+s5+s6+s7+s8;\n}\n```\n\u8f93\u51fa\u8fd9\u91cc\u9700\u8981\u5c06\u8fd9\u4e2a\u4e5d\u4f4d\u6570\u62c6\u5f00\uff0c\u4e00\u4f4d\u4e00\u4f4d\u8f93\u51fa\uff1a\n```cpp\n//\u4e3a\u4e86\u907f\u514d\u5199\u5d29\uff0c\u6211\u4e00\u4f4d\u4e00\u4f4d\u62c6\u5f00\u7684[\u6342\u8138]\ninline void print(long long lu){\n\tlong long s0,s1,s2,s3,s4,s5,s6,s7,s8;\n\ts8=lu%10,lu/=10,s7=lu%10,lu/=10,s6=lu%10,lu/=10,\n\ts5=lu%10,lu/=10,s4=lu%10,lu/=10,s3=lu%10,lu/=10,\n\ts2=lu%10,lu/=10,s1=lu%10,lu/=10,s0=lu%10,lu/=10,\n\tprintf(\"%lld %lld %lld\\n\",s0,s1,s2);\n\tprintf(\"%lld %lld %lld\\n\",s3,s4,s5);\n\tprintf(\"%lld %lld %lld\\n\\n\",s6,s7,s8);//\u6b64\u5904\u4e24\u4e2a\u6362\u884c\uff01\n}\n```\n\u770b\u5230\u8fd9\u7684\u540c\u5b66\uff0c\u53ef\u4ee5\u81ea\u5df1\u53bb\u5199\u4ee3\u7801\u4e86(~~tf\u53e3\u543b~~)\n\n[code](https://www.luogu.com.cn/paste/b5d0uuae)\n### End\n## \u4f5c\u8005\u7684\u788e\u788e\u5ff5\uff1a\n\n\u6709\u7528\u7559\u8d5e(~~\u8a00\u7b80\u610f\u8d45~~)",
        "postTime": 1613483034,
        "uid": 297501,
        "name": "Th1nkS2",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2578 \u3010\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "## \u601d\u8def\n\n\u663e\u800c\u6613\u89c1\uff0c\u8fd9\u662f\u4e00\u9053BFS\u7684\u9898\uff0c\u4f46\u5f00\u4e5d\u7ef4bool\u6570\u7ec4\u5224\u91cd\u4f1aMLE\u3002\u4e8e\u662f\u8003\u8651\u5c06\u6bcf\u4e2a\u72b6\u6001\u8f6c\u6210\u4e00\u4e2a\u4e5d\u4f4d\u6570\uff0c\u7528unordered_map\u5224\u91cd\u3002\u7136\u540e\u8bb0\u5f55\u524d\u9a71\uff0c\u6700\u540e\u9012\u5f52\u8f93\u51fa\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<stdio.h>\n#include<map>\n#include<queue>\n#define int long long\nusing namespace std;\nchar s[10];\nstruct node\n{\n\tint a[3][3];//\u68cb\u76d8\u72b6\u6001\n\tint x,y,num,pre;//\u4f4d\u7f6e\uff0c\u6b65\u6570\uff0c\u524d\u9a71\n} huaji;\nmap<int,bool> m;//\u5224\u91cd\nint pos[4][2]= {0,1,1,0,-1,0,0,-1},minn=1427750;//\u4f4d\u7f6e\u6570\u7ec4\nint ans[3][3]= {0,1,2,3,4,5,6,7,8};//\u76ee\u6807\u72b6\u6001\nint check(node huajii)//\u5224\u65ad\u662f\u5426\u4e3a\u76ee\u6807\u72b6\u6001\n{\n\tfor(int i=0; i<3; i++)\n\t{\n\t\tfor(int j=0; j<3; j++)\n\t\t{\n\t\t\tif(ans[i][j]!=huajii.a[i][j])\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n\treturn 1;\n}\nint mytoint(node huajii)//\u8f6c\u4e3a9\u4f4d\u6570\n{\n\tint anss=0;\n\tfor(int i=0; i<3; i++)\n\t{\n\t\tfor(int j=0; j<3; j++)\n\t\t{\n\t\t\tanss=anss*10+huajii.a[i][j];\n\t\t}\n\t}\n\treturn anss;\n}\nnode q[1000000];//\u961f\u5217\nvoid print(node tt)//\u8f93\u51fa\n{\n\tif(tt.pre==-1)\n\t{\n\t\tfor(int i=0; i<3; i++)\n\t\t{\n\t\t\tfor(int j=0; j<3; j++)\n\t\t\t{\n\t\t\t\tprintf(\"%d \",tt.a[i][j]);\n\t\t\t}\n\t\t\tprintf(\"\\n\");\n\t\t}\n\t\tprintf(\"\\n\");\n\t\treturn;\n\t}\n\tprint(q[tt.pre]);\n\tfor(int i=0; i<3; i++)\n\t{\n\t\tfor(int j=0; j<3; j++)\n\t\t{\n\t\t\tprintf(\"%d \",tt.a[i][j]);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\tprintf(\"\\n\");\n}\nsigned main()\n{\n//\tscanf(\"%s\",&s);\n//\tfor(int i=0; i<9; i++)\n//\t{\n//\t\tif(s[i]=='0')\n//\t\t{\n//\t\t\thuaji.x=i/3;\n//\t\t\thuaji.y=i%3;\n//\t\t}\n//\t\thuaji.a[i/3][i%3]=s[i]-'0';\n//\t}\n\tfor(int i=0; i<3; i++)\n\t{\n\t\tfor(int j=0; j<3; j++)\n\t\t{\n\t\t\tscanf(\"%d\",&huaji.a[i][j]);\n\t\t\tif(huaji.a[i][j]==0)\n\t\t\t{\n\t\t\t\thuaji.x=i,huaji.y=j;\n\t\t\t}\n\t\t}\n\t}\n\thuaji.num=0;\n\thuaji.pre=-1;\n\tint tail=0,head=1;\n\tq[tail]=huaji;\n\twhile(tail!=head)\n\t{\n\t\tnode ls=q[tail];\n\t\ttail++;\n\t\tif(check(ls))\n\t\t{\n\t\t\tprintf(\"%lld\\n\",ls.num);\n\t\t\tprint(ls);\n\t\t\treturn 0;\n\t\t}\n\t\tnode nodenew;\n\t\tnodenew.pre=tail-1;\n\t\tnodenew.a[0][0]=ls.a[1][0];\n\t\tnodenew.a[0][1]=ls.a[0][0];\n\t\tnodenew.a[0][2]=ls.a[0][1];\n\t\tnodenew.a[1][0]=ls.a[2][0];\n\t\tnodenew.a[1][1]=ls.a[1][1];\n\t\tnodenew.a[1][2]=ls.a[0][2];\n\t\tnodenew.a[2][0]=ls.a[2][1];\n\t\tnodenew.a[2][1]=ls.a[2][2];\n\t\tnodenew.a[2][2]=ls.a[1][2];\n\t\tnodenew.num=ls.num+1;\n\t\tif(!m[mytoint(nodenew)])\n\t\t{\n\t\t\tm[mytoint(nodenew)]=1;\n\t\t\tq[head++]=nodenew;\n\t\t}//\u64cd\u4f5c1\n\t\tnode nodeneww;\n\t\tnodeneww.pre=tail-1;\n\t\tnodeneww.a[0][0]=ls.a[0][0];\n\t\tnodeneww.a[0][1]=ls.a[0][1];\n\t\tnodeneww.a[0][2]=ls.a[0][2];\n\t\tnodeneww.a[1][0]=ls.a[1][2];\n\t\tnodeneww.a[1][1]=ls.a[1][0];\n\t\tnodeneww.a[1][2]=ls.a[1][1];\n\t\tnodeneww.a[2][0]=ls.a[2][0];\n\t\tnodeneww.a[2][1]=ls.a[2][1];\n\t\tnodeneww.a[2][2]=ls.a[2][2];\n\t\tnodeneww.num=ls.num+1;\n\t\tif(!m[mytoint(nodeneww)])\n\t\t{\n\t\t\tm[mytoint(nodeneww)]=1;\n\t\t\tq[head++]=nodeneww;\n\t\t}//\u64cd\u4f5c2\n\t}\n\tprintf(\"UNSOLVABLE\");//\u65e0\u6cd5\u5230\u8fbe\n\treturn 0;\n}\n```\n",
        "postTime": 1616158720,
        "uid": 278350,
        "name": "mutable",
        "ccfLevel": 0,
        "title": "\u849f\u84bb\u7684\u7b2c\u4e8c\u7bc7\u9898\u89e3"
    },
    {
        "content": "  \u5173\u4e8e\u8fd9\u9053\u9898\uff0c\u53d1\u73b0\u522b\u7684dalao\u4eec\u4ee3\u7801\u5f88\u957f\uff0c\u5176\u5b9e\u7528\u4e0d\u4e86\u90a3\u4e48\u591a\uff0c60\u884c\u5185\u5c31\u53ef\u4ee5\u89e3\u51b3\u7684\n\n  ~~\u7801\u98ce\u4e0d\u597d\uff0c\u4e0d\u559c\u52ff\u55b7~~\n  \n(\u8fd9\u4e9b\u8bdd\u597d\u50cf\u4e4b\u524d\u8bf4\u8fc7)\n\n\u597d\uff0c\u6211\u4eec\u7ee7\u7eed\n# \u601d\u8def\n\n\u663e\u800c\u6613\u89c1\uff0c\u53c8\u662fBFS\uff0c\u6211\u4eec\u53ea\u9700\u5f00\u4e2a\u7ed3\u6784\u4f53\uff0c\u7528queue\u8fdb\u884c\u5bbd\u641c\u5c31\u53ef\u4ee5\u4e86\n\n\u81f3\u4e8e\u8f93\u51fa\u987a\u5e8f\uff0c\u6211\u4eec\u5728\u7ed3\u6784\u4f53\u91cc\u5efa\u4e2a\u5b57\u7b26\u4e32\u4fdd\u5b58\u8def\u5f84\uff0c\u53ea\u9700\u628a\u64cd\u4f5c\u8bb0\u5f55\u4e0b\u6765\uff0c\n\n\u6700\u540e\u7ed3\u675f\u65f6\u91cd\u65b0\u6267\u884c\u64cd\u4f5c\u5c31\u53ef\u4ee5\u4e86\n\n\n\n~~\u6240\u4ee5\u8fd9\u9053\u9898\u4f9d\u7136\u5f88\u6c34~~\n\n\u8bbf\u95ee\u6807\u8bb0\u5c31\u5f00\u4e2a\u4e5d\u7ef4\u6570\u7ec4\u5b58\u5c31\u884c\u4e86\uff0c\u4e0d\u4f1a\u7206\u6389\u7684\n\n# \u4ee3\u7801\n\n```\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<queue>\nusing namespace std;\nstruct aq\n{\n\tint t,y,u,g,h,j,b,n,m,time;   //time\u8868\u793a\u7b2c\u51e0\u6b21\u64cd\u4f5c\uff0c\u5176\u4f59\u5bf9\u7167\u952e\u76d8\n\tstring c;\t\t\t\t\t //\u5b58\u8def\u5f84\n}m,z;\nbool ok[9][9][9][9][9][9][9][9][9];//\u8bbf\u95ee\u7528\u6570\u7ec4\nint main()\n{\n\t//\u8bfb\u53d6\u5f88\u591a\u5f88\u591a\u7684\u4e1c\u897f\uff0c\u7136\u540e\u5904\u7406\u5e76\u538b\u5165\u961f\u5217\n\tcin>>m.t>>m.y>>m.u>>m.g>>m.h>>m.j>>m.b>>m.n>>m.m;\n    queue<aq>qa;\n    qa.push(m);\n\tok[m.t][m.y][m.u][m.g][m.h][m.j][m.b][m.n][m.m]=1;\n    //\u961f\u5217\u5f00\u542fBFS\u641c\u7d22\n\twhile(!qa.empty())\n\t{\n\t\tz=qa.front();qa.pop();\n        //\u5982\u679c\u6ee1\u8db3\u6761\u4ef6\u5219\u8fdb\u884c\u64cd\u4f5c\n\t\tif(z.t==0&&z.y==1&&z.u==2&&z.g==3&&z.h==4&&z.j==5&&z.b==6&&z.n==7&&z.m==8)\n\t\t{\n        \t//\u5148\u8f93\u51fa\u6b21\u6570\u7136\u540e\u8f93\u51fa\u8d77\u59cb\u72b6\u6001\n\t\t\tcout<<z.time<<\"\\n\"<<m.t<<\" \"<<m.y<<\" \"<<m.u<<\"\\n\"<<m.g<<\" \"<<m.h<<\" \"<<m.j<<\"\\n\"<<m.b<<\" \"<<m.n<<\" \"<<m.m<<\"\\n\\n\";\n\t\t\tint k=z.c.length();\n\t\t\tfor(int i=0;i<k;i++)//\u904d\u5386\u5b57\u7b26\u4e32\u8fdb\u884c\u64cd\u4f5c\n\t\t\t{\n\t\t\t\tif(z.c[i]=='1')//\u4ee3\u8868  1  \u64cd\u4f5c\n\t\t\t\t{\n\t\t\t\t\tswap(m.t,m.g);swap(m.g,m.b);swap(m.b,m.n);swap(m.n,m.m);\n\t\t\t\t\tswap(m.m,m.j);swap(m.j,m.u);swap(m.u,m.y);\n\t\t\t\t}\n\t\t\t\tif(z.c[i]=='2')//\u4ee3\u8868  2  \u64cd\u4f5c\n\t\t\t\t{\n\t\t\t\t\tswap(m.g,m.j);swap(m.j,m.h);\n\t\t\t\t}\n                //\u8f93\u51fa\u64cd\u4f5c\u540e\u72b6\u6001\n\t\t\t\tcout<<m.t<<\" \"<<m.y<<\" \"<<m.u<<\"\\n\"<<m.g<<\" \"<<m.h<<\" \"<<m.j<<\"\\n\"<<m.b<<\" \"<<m.n<<\" \"<<m.m<<\"\\n\\n\";\n\t\t\t}\n\t\t\treturn 0;\n\t\t}\n\t\tz.time++;\n        //\u64cd\u4f5c 1\n\t\tif(!ok[z.g][z.t][z.y][z.b][z.h][z.u][z.n][z.m][z.j])\n\t\t{\n\t\t\tqa.push((aq){z.g,z.t,z.y,z.b,z.h,z.u,z.n,z.m,z.j,z.time,z.c+\"1\"});\n\t\t\tok[z.g][z.t][z.y][z.b][z.h][z.u][z.n][z.m][z.j]=1;\n\t\t}\n        //\u64cd\u4f5c 2\n\t\tif(!ok[z.t][z.y][z.u][z.j][z.g][z.h][z.b][z.n][z.m])\n\t\t{\n\t\t\tqa.push((aq){z.t,z.y,z.u,z.j,z.g,z.h,z.b,z.n,z.m,z.time,z.c+\"2\"});\n\t\t\tok[z.t][z.y][z.u][z.j][z.g][z.h][z.b][z.n][z.m]=1;\n\t\t}\n\t}\n    //\u65e0\u89e3\u60c5\u51b5\n\tcout<<\"UNSOLVABLE\";\n}\n//\u5f88\u77ed\u7684\u51e0\u5341\u884c\u4ee3\u7801\n```",
        "postTime": 1539353945,
        "uid": 89785,
        "name": "\u7a7a\u306e\u8ecc\u8de1",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "* **\u3010\u9898\u76ee\u94fe\u63a5\u3011**\n\n[Link:P2578](https://www.luogu.com.cn/problem/P2578)\n\n* **\u3010\u89e3\u9898\u601d\u8def\u3011**\n\n\u8fd9\u662f\u4e00\u7bc7\u9002\u5408\u521d\u5b66\u8005\u7684\u9898\u89e3\uff0c\u6ca1\u6709\u5eb7\u6258\u5c55\u5f00\uff0c\u6ca1\u6709\u4e5d\u7ef4\u6570\u7ec4\uff0c\u6ca1\u6709\u5341\u516d\u8fdb\u5236\u5e38\u6570\u4f18\u5316\uff0c\u5438\u5b8c\u6c27\u5374\u6bd4\u6240\u6709\u9898\u89e3\u8dd1\u7684\u90fd\u5feb\uff0c\u751a\u81f3\u7b2c\u4e00\u6b21\u63d0\u4ea4\u5c31\u6bd4\u4e4b\u524d\u9898\u89e3\u4e2d\u6700\u5feb\u7684 $\\color{orange}\\small\\mathsf{EXODUS}$ \u8fd8\u5feb\u4e86 $100ms$ \u5de6\u53f3\u3002\n\n\u6b63\u5982 $\\color{red}\\small\\mathsf{zltzlt}\\color{blue}(\\mathsf{qwqaa})$ \u6240\u8bf4\uff0c\u8fd9\u662f\u4e00\u9053\u6c34\u5230\u4e0d\u80fd\u518d\u6c34\u7684\u7d2b\u9898\u3002\n\n\u601d\u8def\u80af\u5b9a\u662f\u5e7f\u641c\uff0c\u5176\u5b83\u9898\u89e3\u5df2\u7ecf\u8bf4\u8fc7\u4e86\u3002\u6b64\u5904\u505a\u5927\u81f4\u603b\u7ed3\uff1a\n\n1. \u7528\u4e00\u4e2a\u6570\u7ec4\u5b58\u50a8\u72b6\u6001\u53bb\u91cd\u3002\n2. \u518d\u5f00\u4e00\u4e2a\u6570\u7ec4\uff0c\u8868\u793a\u8fd9\u4e2a\u72b6\u6001\u4ece\u54ea\u4e2a\u72b6\u6001\u8f6c\u79fb\u800c\u6765\u3002\n3. \u89c4\u5212\u597d\u5982\u4f55\u538b\u7f29\u72b6\u6001\uff0c\u4e00\u822c\u7528\u5eb7\u6258\u5c55\u5f00\u3002\n4. \u641c\u7d22\u4e00\u904d\uff0c\u901a\u8fc7\u3002\n\n\u6211\u8bf4\u4e00\u8bf4\u6211\u5bf9\u8fd9\u4e2a\u601d\u8def\u7684\u5177\u4f53\u5316\u3002\n\n\u6570\u7ec4\u53bb\u91cd\uff0c\u672c\u6765\u60f3\u7528```vector```\uff0c\u4f46\u662f\u540e\u6765\u53d1\u73b0\u67e5\u627e\u592a\u8017\u65f6\u95f4\uff0c\u4fbf\u6ca1\u6709\u91c7\u7eb3\u3002\n\n\u6b63\u597d\u8981\u5b58\u524d\u9a71\uff0c\u6240\u4ee5\u51b3\u5b9a\u7528```unordered_map```\uff0c\u54c8\u5e0c\u7684\u590d\u6742\u5ea6\u975e\u5e38\u4f18\u79c0\u3002\n\n\u538b\u7f29\u72b6\u6001\u4e2d\u5eb7\u6258\u5c55\u5f00\u8f83\u590d\u6742\uff0c\u6240\u4ee5\u53ef\u4ee5\u8f6c\u6362\u4e3a $9$ \u4f4d\u6570\u5b58\u50a8\uff0c\u7a7a\u95f4\u5b8c\u5168\u4e0d\u5360\u52a3\u52bf\u3002\n\n\u7531\u4e8e\u5341\u8fdb\u5236\u6570\u5b57\u4e0d\u4fbf\u64cd\u4f5c\uff0c\u53ef\u4ee5\u518d\u8f6c\u4e3a\u5b57\u7b26\u6570\u7ec4\u3002\n\n\u4ee5\u4e0a\u4e24\u4e2a\u529f\u80fd\u53ef\u4ee5\u96c6\u6210\u5728\u4e00\u4e2a\u51fd\u6570\u91cc\u3002\n\n* **\u3010\u5b9e\u73b0\u7ec6\u8282\u3011**\n\n\u5728\u641c\u7d22\u4e2d\u5982\u679c\u5148\u641c\u64cd\u4f5c $1$\uff0c\u6062\u590d\u539f\u72b6\u6001\u6210\u672c\u8f83\u5927\uff0c\u6240\u4ee5\u672c\u4ee3\u7801\u9009\u62e9\u5148\u641c\u64cd\u4f5c $2$\uff0c\u8fd8\u539f\u540e\u518d\u641c\u64cd\u4f5c $1$\uff0c\u6700\u540e\u4e0b\u4e00\u6b21\u5faa\u73af\u76f4\u63a5\u8986\u76d6\u539f\u5b57\u7b26\u6570\u7ec4\u3002\n\n* **\u3010\u4ee3\u7801\u5b9e\u73b0\u3011**\n\n```cpp\n#include <unordered_map>\n#include <iostream>\n#include <queue>\n#include <stack>\n\nusing namespace std;\n\nenum convert_state{int_mtx=false,mtx_int=true};//\u6307\u793aconvert\u51fd\u6570\u8f6c\u6362\u65b9\u5f0f\uff0cint_mtx\u4e3a\u6570\u503c\u8f6c\u77e9\u9635\uff0cmtx_int\u4e3a\u77e9\u9635\u8f6c\u6570\u503c\n\ninline void convert(convert_state cvtstate,int& inttarg,char(* mtxtarg)[3]/*\u5fc5\u987b\u5199\u6210\u8fd9\u6837\u4e0d\u7136\u7f16\u8bd1\u4e0d\u7ed9\u8fc7*/)\n{\n\tif(!cvtstate)//\u6570\u503c\u8f6c\u77e9\u9635\n\t{\n\t\tint intarg=inttarg;\n\t\tfor(int i=2;i>=0;i--)\n\t\t\tfor(int j=2;j>=0;j--)\n\t\t\t\tmtxtarg[i][j]=intarg%10+'0',intarg/=10;\n\t}\n\telse//\u77e9\u9635\u8f6c\u6570\u503c\n\t{\n\t\tinttarg=0;\n\t\tfor(int i=0;i<3;i++)\n\t\t\tfor(int j=0;j<3;j++)\n\t\t\t\tinttarg=inttarg*10+mtxtarg[i][j]-'0';\n\t}\n}\n\nint main(int argc,char *argv[],char *envp[])\n{\n\tunordered_map<int,int> states;//\u53bb\u91cd\u7528unordered_map\n\tchar matrix[3][3];\n\tfor(int i=0;i<3;i++)\n\t\tfor(int j=0;j<3;j++)\n\t\t\tcin>>matrix[i][j];\n\tqueue<int> BFS_que;\n\tint tmp,temp;\n\tconvert(mtx_int,tmp,matrix);\n\tBFS_que.push(tmp);\n\tstates[tmp]=-1;\n\twhile(!BFS_que.empty())\n\t{\n\t\tconvert(int_mtx,BFS_que.front(),matrix);\n\t\ttemp=BFS_que.front();\n\t\tswap(matrix[1][2],matrix[1][1]);//\u64cd\u4f5c2\n\t\tswap(matrix[1][0],matrix[1][1]);\n\t\tconvert(mtx_int,tmp,matrix);\n\t\tswap(matrix[1][0],matrix[1][1]);\n\t\tswap(matrix[1][2],matrix[1][1]);\n\t\tif(states.find(tmp)==states.end())\n\t\t{\n\t\t\tBFS_que.push(tmp);\n\t\t\tstates[tmp]=temp;\n\t\t}\n\t\tif(tmp==12345678)//\u5982\u679c\u7b26\u5408\u6761\u4ef6\uff0c\u9000\u51fa\n\t\t\tbreak;\n\t\ttmp=matrix[0][0];//\u64cd\u4f5c1\n\t\tmatrix[0][0]=matrix[1][0];\n\t\tmatrix[1][0]=matrix[2][0];\n\t\tmatrix[2][0]=matrix[2][1];\n\t\tmatrix[2][1]=matrix[2][2];\n\t\tmatrix[2][2]=matrix[1][2];\n\t\tmatrix[1][2]=matrix[0][2];\n\t\tmatrix[0][2]=matrix[0][1];\n\t\tmatrix[0][1]=tmp;\n\t\tconvert(mtx_int,tmp,matrix);\n\t\tif(states.find(tmp)==states.end())\n\t\t{\n\t\t\tBFS_que.push(tmp);\n\t\t\tstates[tmp]=temp;\n\t\t}\n\t\tif(tmp==12345678)\n\t\t\tbreak;\n\t\tBFS_que.pop();\n\t}\n\tif(BFS_que.empty())//\u5982\u679c\u662f\u56e0\u4e3a\u641c\u5b8c\u4e86\u90fd\u6ca1\u51fa\u7ed3\u679c\u800c\u9000\u51fa\uff0c\u8f93\u51fa\u65e0\u89e3\n\t\treturn cout<<\"UNSOLVABLE\"&&0;\n\ttmp=12345678;\n\tstack<int> answer;//\u770b\u5230\u4e86zltzlt\u7684\u9898\u89e3\uff0c\u51b3\u5b9a\u91c7\u7528\u4ed6\u7684\u65b9\u6cd5\n\twhile(tmp!=-1)\n\t{\n\t\tanswer.push(tmp);\n\t\ttmp=states[tmp];\n\t}\n\tcout<<answer.size()-1<<endl;//\u522b\u5fd8\u4e86\u8f93\u51fa\u64cd\u4f5c\u6b21\u6570\n\twhile(!answer.empty())\n\t{\n\t\tconvert(int_mtx,answer.top(),matrix);\n\t\tfor(int i=0;i<3;i++)\n\t\t{\n\t\t\tfor(int j=0;j<3;j++)\n\t\t\t\tcout<<matrix[i][j]<<' ';\n\t\t\tendl(cout);\n\t\t}\n\t\tendl(cout);\n\t\tanswer.pop();\n\t}\n \treturn 0;\n}\n\n```\n\n* **\u3010\u5f69\u86cb\u3011**\n\n$\\color{red}\\small\\mathsf{zltzlt}$ \u7528\u624b\u5199\u961f\u5217\u7684\u771f\u6b63\u539f\u56e0\uff1a\u4ed6\u7528```queue```\u5c31\u4e0d\u884c\uff0c\u6362\u624b\u5199\u961f\u5217\u5c31\u8fc7\u4e86\uff08",
        "postTime": 1615009895,
        "uid": 372983,
        "name": "Antarctic_Cube",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "# \u9898\u89e3 P2578 \u3010\u4e5d\u6570\u7801\u6e38\u620f\u3011\n[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P2578)\n\n\u8fd9\u9898\u662f\u4e00\u9053\u597d\u7684\u5e7f\u641c\u9898\uff0c\u53ef\u4ee5\u5de9\u56fa\u5e7f\u641c\u3002\n\n\u6211\u4eec\u7528\u7ed3\u6784\u4f53\u6570\u7ec4\u5b58\u50a8\u6bcf\u4e2a\u72b6\u6001\u7684\u503c\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u7528\u961f\u5217\u5462\uff1f\u7b49\u4e00\u4e0b\u5c31\u4f1a\u77e5\u9053\u4e86\u3002\n\n\u5bf9\u4e8e\u64cd\u4f5c 1 \u4e0e\u64cd\u4f5c 2\uff0c\u6211\u4eec\u76f4\u63a5\u6309\u9898\u610f\u6a21\u62df\uff0c\u5faa\u73af\u90fd\u4e0d\u7528\uff08\u53cd\u6b63\u5927\u5c0f\u53ea\u67093*3\uff09\uff0c\u5177\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n\n_state Do(_state a,int f) {\n\tif (f == 1) {//\u64cd\u4f5c1\n\t\tint t = a.w[1][1];\n\t\ta.w[1][1] = a.w[2][1];\n\t\ta.w[2][1] = a.w[3][1];\n\t\ta.w[3][1] = a.w[3][2];\n\t\ta.w[3][2] = a.w[3][3];\n\t\ta.w[3][3] = a.w[2][3];\n\t\ta.w[2][3] = a.w[1][3];\n\t\ta.w[1][3] = a.w[1][2];\n\t\ta.w[1][2] = t;\n\t}\n\telse {//\u64cd\u4f5c2\n\t\tint t = a.w[2][3];\n\t\ta.w[2][3] = a.w[2][2];\n\t\ta.w[2][2] = a.w[2][1];\n\t\ta.w[2][1] = t;\n\t}\n\treturn a;\n}\n```\n\uff08\u76f8\u4fe1\u770b\u5230\u4ee3\u7801\u90fd\u77e5\u9053\u5b83\u5728\u5e72\u4ec0\u4e48\uff09\n\n\u7136\u540e\u662f\u5982\u4f55\u5224\u91cd\u3002\u628a\u4e5d\u5bab\u683c\u6309\u987a\u5e8f\u62fc\u6210\u4e00\u4e2a\u4e5d\u4f4d\u6570\uff0c\u518d\u7528 $\\texttt{map}$ \u5224\u91cd\u5373\u53ef\u3002\n\n\u6700\u540e\u662f\u8f93\u51fa\u8def\u5f84\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u6bcf\u4e2a\u72b6\u6001\u4e2d\u8bb0\u5f55\u4e00\u4e2a\u6570\u4ee3\u8868\u5b83\u7684\u7236\u4eb2\uff0c\u4e5f\u5c31\u662f\u5b83\u662f\u4ece\u54ea\u4e00\u4e2a\u72b6\u6001\u8f6c\u79fb\u8fc7\u6765\u7684\u3002\u6700\u540e\u53ea\u8981\u4e00\u76f4\u6cbf\u7740\u7236\u4eb2\u9012\u5f52\u76f4\u5230\u5230\u8fbe\u521d\u59cb\u72b6\u6001\uff0c\u5728\u8fc7\u7a0b\u4e2d\u8f93\u51fa\u4e5d\u5bab\u683c\u5373\u53ef\uff0c\u975e\u5e38\u65b9\u4fbf\u3002\n\n\u5269\u4e0b\u7684\u7ec6\u8282\u5728\u4ee3\u7801\u91cc\u5c55\u793a\u3002\n\n**Code:**\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstruct _state {\n\tint w[4][4];\n\tint step,pre;\n}q[1000010];\nmap<int,int> m;\nint cal(_state t) {//\u628a\u4e5d\u5bab\u683c\u53d8\u6210\u4e00\u4e2a\u6570 \n\tint nm = 0;\n\tfor (int i = 1;i <= 3;i ++ ) {\n\t\tfor (int j = 1;j <= 3;j ++ ) {\n\t\t\tnm = nm * 10 + t.w[i][j];\n\t\t}\n\t}\n\treturn nm;\n}\n_state Do(_state a,int f) {\n\tif (f == 1) {//\u64cd\u4f5c1 \n\t\tint t = a.w[1][1];\n\t\ta.w[1][1] = a.w[2][1];\n\t\ta.w[2][1] = a.w[3][1];\n\t\ta.w[3][1] = a.w[3][2];\n\t\ta.w[3][2] = a.w[3][3];\n\t\ta.w[3][3] = a.w[2][3];\n\t\ta.w[2][3] = a.w[1][3];\n\t\ta.w[1][3] = a.w[1][2];\n\t\ta.w[1][2] = t;\n\t}\n\telse {//\u64cd\u4f5c2 \n\t\tint t = a.w[2][3];\n\t\ta.w[2][3] = a.w[2][2];\n\t\ta.w[2][2] = a.w[2][1];\n\t\ta.w[2][1] = t;\n\t}\n\treturn a;\n}\nvoid print(int x) {//\u8f93\u51fa \n\tif (q[x].pre) print(q[x].pre);//\u4e00\u76f4\u9012\u5f52\u5b83\u7684\u7236\u4eb2 \n\tfor (int i = 1;i <= 3;i ++ ) {//\u8f93\u51fa\u4e5d\u5bab\u683c \n\t\tfor (int j = 1;j <= 3;j ++ ) printf(\"%d \",q[x].w[i][j]);\n\t\tputs(\"\");\n\t}\n\tputs(\"\");//\u8981\u591a\u4e00\u4e2a\u6362\u884c \n}\nvoid bfs() {\n\tint head = 1,tail = 1;//\u624b\u5199\u961f\u5217 \n\tfor (int i = 1;i <= 3;i ++ ) {\n\t\tfor (int j = 1;j <= 3;j ++ ) {\n\t\t\tscanf(\"%d\",&q[head].w[i][j]);\n\t\t}\n\t}\n\tq[head].step = 0;//\u6b65\u6570 \n\tq[head].pre = 0;//\u7236\u4eb2 \n\tfor (;head <= tail;head ++ ) {\n\t\t_state cur = q[head];\n\t\tif (cal(cur) == 12345678) {//\u6210\u4e3a\u76ee\u6807\u72b6\u6001 \n\t\t\tprintf(\"%d\\n\",cur.step);\n\t\t\tprint(head);//\u8f93\u51fa\u8def\u5f84 \n\t\t\treturn;\n\t\t}\n\t\tfor (int i = 1;i <= 2;i ++ ) {//\u4e24\u79cd\u64cd\u4f5c \n\t\t\t_state nw;\n\t\t\tif (i == 1) nw = Do(cur,1);\n\t\t\telse nw = Do(cur,2);\n\t\t\tif (m[cal(nw)]) continue;//\u5224\u91cd \n\t\t\tm[cal(nw)] = 1;\n\t\t\tq[++tail] = nw;\n\t\t\tq[tail].step ++;\n\t\t\tq[tail].pre = head;//\u8bb0\u5f55\u7236\u4eb2 \n\t\t}\n\t}\n\tprintf(\"UNSOLVABLE\");\n}\nint main() {\n\tbfs();\n\treturn 0;\n}\n```\n\n**Time\uff1a2.04s**\n\n\uff08\u5982\u679c\u628a $\\texttt{map}$ \u6539\u6210 $\\texttt{unordered\\_map}$ \uff0c\u5c311.11s\uff09",
        "postTime": 1614853806,
        "uid": 94777,
        "name": "Jsxts_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "\u697c\u4e0b\u5de8\u4f6c\u4eec\u4e3a\u4f55\u8981\u7528\u5eb7\u62d3\u5c55\u5f00\uff1f\n\n~~\u60a8\u4eec\u8ba9\u6211\u8fd9\u4e2a\u849f\u84bb\u600e\u4e48\u529e~~\n\n\u4e8e\u662f\uff0c\u6211\u4eec\u628a\u6bcf\u4e2a\u72b6\u6001\u7684\u4e5d\u4e2a\u6570\u8fde\u5728\u4e00\u8d77\u770b\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\n\n\u7528hash\u6765\u5224\u91cd\n\nbfs\u6c34\u8fc7\n\n\u81f3\u4e8e\u8bb0\u5f55\u8def\u5f84\uff0c\u7531\u4e8estring\u6709+\u64cd\u4f5c\uff0c\u6211\u4eec\u628a\u6bcf\u4e00\u6b65\u7684\u72b6\u6001\u90fd\u52a0\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u957f\u5ea6\u4e3a\uff089*\u6b65\u6570\uff09\u7684\u5b57\u7b26\u4e32\n\n\u5904\u7406\u5904\u7406\u8f93\u51fa\u5c31\u884c\n\n\n\n```cpp\n#include<bits/stdc++.h>\n#define inf 0x7fffffff\n#define ll long long\nusing namespace std;\nstring goal=\"012345678\";\n#define mod 671088\nvector<int> H[mod];\nunsigned p=1e9+7;\nvoid Add(unsigned x)\n{\n\tunsigned i=x%mod;\n\tH[i].push_back(x);\n}\nbool Get(unsigned x)\n{\n\tint q=x%mod;\n\tfor(int i=0;i<H[q].size();i++)\n\t{\n\t\tif(H[q][i]==x)return 1;\n\t}\n\treturn 0;\n}\n//hash\u5224\u91cd\u2191\nstruct node{\n\tstring now;//\u5f53\u524d\u72b6\u6001\n\tstring road;//\u8def\u5f84\n\tint step;//\u6b65\u6570\n};\nsigned main()\n{\n\tstring a;\n\tfor(int i=1;i<=9;i++)//\u8bfb\u5165\u4e0d\u597d\u641e\uff1f\u7528int\u8bfb\u5165\uff01\n\t{\n\t\tint x;\n\t\tscanf(\"%d\",&x);\n\t\ta+=x+'0';\n\t}\n\tqueue<node> q;\n\tq.push((node){a,a,0});\n\twhile(!q.empty())\n\t{\n\t\tnode now=q.front();\n\t\tq.pop();\n\t\tif(now.now==goal)\n\t\t{\n\t\t\tprintf(\"%d\\n\",now.step);\n\t\t\tint i=0,lap=0;\n\t\t\twhile(lap!=now.step)\n\t\t\t{\n\t\t\t\tcout<<now.road[i]<<\" \";\n\t\t\t\ti++;\n\t\t\t\tif(i%3==0)cout<<\"\\n\";\n\t\t\t\tif(i%9==0)\n\t\t\t\t{\n\t\t\t\t\tlap++;\n\t\t\t\t\tcout<<\"\\n\";\n\t\t\t\t}\n\t\t\t}\n            //\u8f93\u51fa\u4e00\u904d\u6700\u7ec8\u72b6\u6001\n\t\t\tcout<<\"0 1 2\\n3 4 5\\n6 7 8\\n\";\n\t\t\treturn 0;\n\t\t}\n\t\tstring s;//\u5f3a\u884c\u65cb\u8f6c\n\t\ts=now.now.substr(3,1)+now.now.substr(0,1)+now.now.substr(1,1)+now.now.substr(6,1)+now.now.substr(4,1)+now.now.substr(2,1)+now.now.substr(7,1)+now.now.substr(8,1)+now.now.substr(5,1);\n\t\t//\u4e3a\u4f55\u4e0d\u80fd\u5199now[3]+now[0]+..... ?\n        \t//string\u4e2d\u53d6\u51fa\u4e00\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u4e3achar\uff0cchar\u4e0d\u652f\u6301\u64cd\u4f5c\uff0c\u4f1a\u51fa\u73b0\u871c\u6c41\u9519\u8bef\n       \t \tunsigned hash=0;\n\t\tfor(int i=0;i<s.size();i++)\n\t\t{\n\t\t\thash=hash*p+s[i];\n\t\t}\n\t\tif(!Get(hash))\n\t\t{\n\t\t\tq.push((node){s,now.road+s,now.step+1});\n\t\t\tAdd(hash);\n\t\t}\n\t\t\n\t\ts=now.now;\n\t\tchar a1=s[3],a2=s[4],a3=s[5];\n\t\ts[3]=a3,s[4]=a1,s[5]=a2;\n\t\thash=0;\n\t\tfor(int i=0;i<s.size();i++)\n\t\t{\n\t\t\thash=hash*p+s[i];\n\t\t}\n\t\tif(!Get(hash))\n\t\t{\n\t\t\tq.push((node){s,now.road+s,now.step+1});\n\t\t\tAdd(hash);\n\t\t}//\u590d\u5236\u4e0a\u9762\u7684\u4ee3\u7801\n\t}\n\tprintf(\"UNSOLVABLE\");//\u641c\u5b8c\u4e86\u5c31\u65e0\u89e3\n\treturn 0;\n}\n```\n",
        "postTime": 1565757065,
        "uid": 52577,
        "name": "404_notfound",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "## \u611f\u89c9\u5176\u5b9e\u5e76\u6ca1\u6709\u7d2b\u9898\u96be\u5ea6\u3002\u3002\n\n### \u7528\u6570\u5b57\u8bb0\u5f55\u72b6\u6001\uff0c\u9700\u8981\u65f6\u9010\u4f4d\u5206\u5272\n\n### \u4e0a\uff01\n\n```\nint a[10],ten[10];\nint s,t;\nint zq[3][10000001];\nint l,r;\nbool vis[87654322]={0};\n```\n#### zq[0][i]\u8868\u793a\u72b6\u6001\uff1bzq[1][i]\u8868\u793a\u6b65\u6570\uff1bzq[2][i]\u8868\u793a\u5176father\n#### vis\u7528hash\u7701\u5185\u5b58\uff0c\u56e0\u4e3a\u53ea\u9700\u524d8\u4f4d\u6570\u786e\u5b9a\uff0c\u6574\u4e2a\u72b6\u6001\u5c31\u786e\u5b9a\u4e86\n\n```\ninline void read(){\n    for(int i=9;i>=1;i--){\n        scanf(\"%d\",&a[i]);\n        s+=(a[i]*ten[i]);\n    }\n}\ninline void print(int x){\n    if(zq[2][x])print(zq[2][x]);\n    printf(\"%d %d %d\\n\",zq[0][x]/ten[9]%10,zq[0][x]/ten[8]%10,zq[0][x]/ten[7]%10);\n    printf(\"%d %d %d\\n\",zq[0][x]/ten[6]%10,zq[0][x]/ten[5]%10,zq[0][x]/ten[4]%10);\n    printf(\"%d %d %d\\n\",zq[0][x]/ten[3]%10,zq[0][x]/ten[2]%10,zq[0][x]/ten[1]%10);\n    //\u9010\u4f4d\u5206\u5272\u3002\u3002\u3002\n    printf(\"\\n\");\n}\n```\n\u8f93\u5165\n\u8f93\u51fa\uff1a\u56de\u6eaf\u4ee5\u6253\u5370\u8def\u5f84\n\n```\ninline void make1(){\n    int nnew=0,pre=zq[0][l];\n    nnew+=(pre/ten[4]%10*ten[1]);\n    nnew+=(pre/ten[1]%10*ten[2]);\n    nnew+=(pre/ten[2]%10*ten[3]);\n    nnew+=(pre/ten[3]%10*ten[6]);\n    nnew+=(pre/ten[6]%10*ten[9]);\n    nnew+=(pre/ten[9]%10*ten[8]);\n    nnew+=(pre/ten[8]%10*ten[7]);\n    nnew+=(pre/ten[7]%10*ten[4]);\n    nnew+=(pre/ten[5]%10*ten[5]);\n    if(vis[nnew/10])return ;\n    vis[nnew/10]=1;\n    zq[0][r]=nnew;\n    zq[1][r]=zq[1][l]+1;\n    zq[2][r]=l;\n    if(zq[0][r]==t){\n        printf(\"%d\\n\",zq[1][r]);\n        print(r);\n        exit(0);\n    }\n    r++;\n}\ninline void make2(){\n    int nnew=0,pre=zq[0][l];\n    nnew+=(pre/ten[4]%10*ten[6]);\n    nnew+=(pre/ten[1]%10*ten[1]);\n    nnew+=(pre/ten[2]%10*ten[2]);\n    nnew+=(pre/ten[3]%10*ten[3]);\n    nnew+=(pre/ten[6]%10*ten[5]);\n    nnew+=(pre/ten[9]%10*ten[9]);\n    nnew+=(pre/ten[8]%10*ten[8]);\n    nnew+=(pre/ten[7]%10*ten[7]);\n    nnew+=(pre/ten[5]%10*ten[4]);\n    if(vis[nnew/10])return ;\n    vis[nnew/10]=1;\n    zq[0][r]=nnew;\n    zq[1][r]=zq[1][l]+1;\n    zq[2][r]=l;\n    if(zq[0][r]==t){\n        printf(\"%d\\n\",zq[1][r]);\n        print(r);\n        exit(0);\n    }\n    r++;\n}\n```\n\u6728\u6709\u4ec0\u4e48\u6280\u5de7\uff08\u9010\u4f4d\u5206\u5272+\u5bbd\u641c\u6a21\u677f+\u9898\u610f\uff09\n\n#### ten\u6570\u7ec4\u4e0b\u65b9\u89e3\u91ca\n\n```\nint main()\n{\n    t=12345678;\n    ten[1]=1;\n    for(int i=2;i<=9;i++)\n        ten[i]=10*ten[i-1];\n    read();\n    if(s==t){\n        printf(\"0\\n0 1 2\\n3 4 5\\n6 7 8\\n\");\n        return 0;\n    }\n    l=1,r=2;\n    zq[0][l]=s;zq[1][l]=0;zq[2][l]=0;\n    vis[s/10]=1;\n    while(l<r){\n        make1();\n        make2();\n        l++;\n    }\n    printf(\"UNSOLVABLE\\n\");\n    return 0;\n}\n```\n\u5e94\u8be5\u5f88\u597d\u7406\u89e3\u5427\u3002\n\n### ten\u6570\u7ec4\u8868\u793a\u4e5d\u5bab\u683c\u7528\u6570\u5b57\u8868\u793a\u540e\u5728\u54ea\u4e00\u4f4d\uff0c\u6bd4\u5982\n\n### 012345678\u4e2d5\u6240\u5bf9\u5e94\u7684ten[3]\u4e3a1000\uff0c\n\n### \u8981\u53d6\u51fa5\u53ea\u9700\n\n### 012345678/ten[3]%10\u5c31\u53ef\u4ee5\u4e86\n\n# \u4ecd\u7136\u4e0d\u89c9\u5f97\u6709\u96be\u5ea6\u3002\u3002",
        "postTime": 1558773786,
        "uid": 74343,
        "name": "\u7cd6hhhh\uff1f",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u9898....BFS\uff0c\u4e0d\u662f\u5f88\u660e\u663e\u5417\uff1f\u53ea\u662f\u53bb\u91cd\u7684\u8868...9^9=387420489\u3002\u8981\u70b8...\n\u4f46\u56e0\u4e3a\u6700\u540e\u4e00\u4e2a\u6570\u5fc5\u7136\u662f\u4e0e\u524d\u9762\u7684\u6570\u4e0d\u540c\u3002\u6240\u4ee5\u53ef\u4ee5\u5220\u6389\u4e00\u4e2a9,9^8=...~~\u61d2\u5230\u4e0d\u60f3\u7b97\u53cd\u6b63\u53ef\u4ee5\u8fc7~~\u65e2\u7136\u7528\u6765\u53bb\u91cd\u7684\u8868\u6253\u597d\u4e86\uff0c\u90a3\u5c31\u7b80\u5355\u4e86\n```cpp\n#include<bits/stdc++.h>//\u6807\u51c6\u7684\u4e07\u80fd\u5934\nusing namespace std;\nconst int Max=9*9*9*9*9*9*9;//\u53e4\u602a\u7684\u5361\u8fc7\u53bb\u4e86\nint now[Max][9],come[Max],r[9],u[Max];\nbool boo[9][9][9][9][9][9][9][9];//\u6240\u8c13\u7684\u5feb\u8981\u70b8\u7684\u53bb\u91cd\u7528\u7684\u8868\nint i,j,k,m,n,h=1,t=1,x;\nint write(int x)//\u5012\u7740\u8f93\u51fa\uff0c\u9012\u5f52\u6700\u65b9\u4fbf\u4e86\n{\n  if(come[x]!=-1)write(come[x]);//\u8fdb\u5165\u4e0b\u4e00\u5c42\n  cout<<now[x][0]<<\" \"<<now[x][1]<<\" \"<<now[x][2]<<endl;\n  cout<<now[x][3]<<\" \"<<now[x][4]<<\" \"<<now[x][5]<<endl;\n  cout<<now[x][6]<<\" \"<<now[x][7]<<\" \"<<now[x][8]<<endl;\n  cout<<endl;\n  return 0;\n}\nint main()//\u5440\n{\n  for(i=0;i<9;i++)cin>>r[i];\n  h=1;t=1;u[1]=0;\n  for(k=0;k<9;k++)now[h][k]=r[k];\n  boo[now[t][0]][now[t][1]][now[t][2]][now[t][3]][now[t][4]][now[t][5]][now[t][6]][now[t][7]]=true;\n  come[1]=-1;\n  while(t<=h)\n  {\n    if(now[t][0]==0&&now[t][1]==1&&now[t][2]==2&&now[t][3]==3&&now[t][4]==4&&now[t][5]==5&&now[t][6]==6&&now[t][7]==7)//\u6076\u5fc3\u7684\u4ee3\u7801*1\n    {cout<<u[t]<<endl;write(t);/*\u8f93\u51fa*/return 0;}//\u7ec8\u4e8e\u627e\u5230\u89e3\u4e86\uff01\uff01\uff01\n    for(k=0;k<9;k++)r[k]=now[t][k];\n    x=r[5];r[5]=r[4];r[4]=r[3];r[3]=x;\n    if(!boo[r[1]][r[2]][r[3]][r[4]][r[5]][r[6]][r[7]][r[8]])//\u6076\u5fc3\u7684\u4ee3\u7801*2\n    {h++;\n      u[h]=u[t]+1;\n      for(k=0;k<9;k++)now[h][k]=r[k];\n      boo[r[1]][r[2]][r[3]][r[4]][r[5]][r[6]][r[7]][r[8]]=true;\n      come[h]=t;}\n    for(k=0;k<=9;k++)r[k]=now[t][k];\n    x=r[0];r[0]=r[3];r[3]=r[6];r[6]=r[7];r[7]=r[8];r[8]=r[5];r[5]=r[2];r[2]=r[1];r[1]=x;//\u6076\u5fc3\u7684\u4ee3\u7801*3\n    if(!boo[r[1]][r[2]][r[3]][r[4]][r[5]][r[6]][r[7]][r[8]])\n    {h++;\n      u[h]=u[t]+1;\n      for(k=0;k<=9;k++)now[h][k]=r[k];\n      boo[r[1]][r[2]][r[3]][r[4]][r[5]][r[6]][r[7]][r[8]]=true;\n      come[h]=t;}\n    t++;\n  }\n  return 0;\n}\n//\u6076\u5fc3\u7684\u4ee3\u7801\u7ec8\u4e8e\u5b8c\u4e86\n```\n\u8fd9\u662f\u4e00\u5230\u8ba9\u4ee3\u7801\u66f4\u6076\u5fc3\u7684~~\u6c34\u9898~~\n",
        "postTime": 1547643143,
        "uid": 86625,
        "name": "Limit",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "\u8fd9\u4e2a\u9898\u548c\u9b54\u677f\u7684\u9898\u6bd4\u8f83\u50cf\uff0c\u6700\u5f00\u59cb\u5199\u7684\u65f6\u5019\u60f3\u7684\u662f\u628a9\u4e2a\u6570\u770b\u505a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7528map\u6765\u5224\u91cd\uff0c\u540e\u9762\u5199\u5b8c\u4e86\u4e4b\u540e\u53d1\u73b0string\u51fa\u4e86\u95ee\u9898\uff0c\u8c03\u8bd5\u4e8630\u5206\u949f\u6ca1\u8c03\u51fa\u6765\uff0c\u5c31\u653e\u5f03\u4e86\uff0c\u4e0b\u5348\u6765\u5199\uff0c\u5176\u5b9e\u4e0d\u60f3\u9ebb\u70e6\u7684\u8bdd\uff0c\u8fd8\u662f\u5b58\u6570\u5b57\uff0c\u53ea\u662f\u6211\u4eec\u7528\u5eb7\u62d3\u5c55\u5f00\u6765\u5224\u91cd\uff0c\u5eb7\u62d3\u5c55\u5f00\u5bf9\u5e8f\u5217\u5168\u6392\u5217\u6709\u6548\u7684\u7f16\u7801\u65b9\u6cd5\uff0c\u4f46\u662f\u8fd9\u9053\u9898\u4e2d\u6211\u4eec\u6709\u4e00\u4e2a0\uff0c\u6240\u4ee5\u6211\u4eec\u628a\u6240\u6709\u7684\u6570\u90fd\u52a0\u4e0a1\uff0c\u5c31\u53d8\u6210\u4e861-9\uff0c\u6574\u4e2a9\u4e2a\u6570\u53ea\u6709\u4e24\u79cd\u53d8\u5316\uff0c\u6211\u4eec\u5c06\u8fd9\u4e24\u79cd\u53d8\u5316\u5206\u522b\u8bbe\u4e3a\u4e24\u4e2a\u51fd\u6570\uff0c\u7528\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u50a8\u5b58\u4fe1\u606f\u8fdb\u884c\u5e7f\u641c\uff0c\u5c06\u6bcf\u79cd\u72b6\u6001\u50a8\u5b58\u8d77\u6765\uff0c\u4f46\u662f\u6ce8\u610f\u9898\u4e2d\u7684\u8f93\u51fa\uff0c\u5982\u679c\u6b63\u5411\u8fdb\u884c\u5149\u641c\u7684\uff0c\u4e0d\u80fd\u8bb0\u5f55\u53d8\u5316\u7684\u8fc7\u7a0b\uff0c\u56e0\u6b64\u6211\u4eec\u5012\u7740\u6765\uff0c\u4e24\u79cd\u64cd\u4f5c\u4e5f\u5c31\u90fd\u8981\u53cd\u7740\u6765\uff0c\u5e7f\u641c\u5c31\u4e0d\u7528\u591a\u6570\u4e86\u5427\uff0c\u4ee3\u7801\u4e2d\u6ce8\u660e\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n#include<cstdlib>\n#include<queue>\nusing namespace std;\nconst long long maxn=5*1e6+5;\nlong long a[15],b[15],last,tp[15],nn=1,vis[maxn];\nlong long contor(){\n    int nm=0,fj=1;\n    int k=0;\n    for(int i=1;i<=9;i++){\n        for(int j=i+1;j<=9;j++){\n            fj*=(9-j+1);\n            if(a[i]>a[j]) k++;\n        }\n        nm+=(k*fj);\n        k=0;\n        fj=1;\n    }\n    return nm;\n}\nstruct node{//prev\u4ee3\u8868\u8fd9\u4e00\u4e2a\u662f\u7531\u54ea\u4e00\u4e2a\u53d8\u5316\u800c\u6765\u7684\uff0cstp\u8868\u793a\u6b65\u6570\uff0cid\u8868\u793a\u81ea\u5df1\u662f\u5e8f\u53f7\uff0cct\u8868\u793a\u8fd9\u4e2a\u7ed3\u6784\u50a8\u5b58\u7684\u5e8f\u5217\u8fdb\u8fc7\u5eb7\u62d3\u5c55\u5f00\u4e4b\u540e\u7684\u7f16\u7801\uff0cai\u6570\u7ec4\u5b58\u7684\u662f\u8fd99\u4e2a\u6570\u7684\u987a\u5e8f\u3002\n    long long prev,stp,id,ct;\n    long long ai[15];\n}e[maxn];\nqueue<node>q;//\u5f00\u4e00\u4e2a\u7ed3\u6784\u4f53\u961f\u5217\nvoid c1(){//\u7b2c\u4e00\u4e2a\u53d8\u5316\u64cd\u4f5c\uff0c\uff08\u8981\u53cd\u7740\u6765\uff09\n    memcpy(tp,a,sizeof(tp));\n    tp[1]=a[2];\n    tp[2]=a[3];\n    tp[3]=a[6];\n    tp[4]=a[1];\n    tp[6]=a[9];\n    tp[7]=a[4];\n    tp[8]=a[7];\n    tp[9]=a[8];\n    memcpy(a,tp,sizeof(a));\n}\nvoid c2(){//\u7b2c\u4e8c\u4e2a\u53d8\u5316\n    memcpy(tp,a,sizeof(tp));\n    tp[4]=a[5];\n    tp[5]=a[6];\n    tp[6]=a[4];\n    memcpy(a,tp,sizeof(a));\n}\nvoid bfs(){//bfs\u8fc7\u7a0b\n    q.push(e[1]);\n    while(!q.empty()){\n        node f=q.front();\n        q.pop();\n        if(f.ct==last){//\u5982\u679c\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u5c31\u8f93\u51fa\n            printf(\"%lld\\n\",f.stp);\n            for(long long i=1;i<=9;i++){\n                printf(\"%lld \",f.ai[i]-1);\n                if(i%3==0) cout<<endl;\n            }\n            cout<<endl;\n            for(long long i=f.prev;i;i=e[i].prev){\n                for(long long j=1;j<=9;j++){\n                    printf(\"%lld \",e[i].ai[j]-1);\n                    if(j%3==0) cout<<endl;\n                }\n                cout<<endl;\n            }\n            exit(0);\n        }\n        else{//\u5426\u5219\uff0c\u6211\u4eec\u7ee7\u7eed\u5c06\u5e8f\u5217\u8fdb\u884c\u53d8\u5316\n            for(long long i=1;i<=9;i++) a[i]=f.ai[i];\n            c1();\n            long long fl=contor();\n            if(!vis[fl]){\n                e[++nn].prev=f.id;\n                e[nn].id=nn;\n                e[nn].stp=f.stp+1;\n                e[nn].ct=fl;\n                vis[fl]++;\n                for(long long i=1;i<=9;i++){\n                    e[nn].ai[i]=a[i];\n                }\n                q.push(e[nn]);\n            }\n            for(long long i=1;i<=9;i++) a[i]=f.ai[i];\n            c2();\n            fl=contor();\n            if(!vis[fl]){\n                e[++nn].prev=f.id;\n                e[nn].id=nn;\n                e[nn].stp=f.stp+1;\n                e[nn].ct=fl;\n                vis[fl]++;\n                for(long long i=1;i<=9;i++){\n                    e[nn].ai[i]=a[i];\n                }\n                q.push(e[nn]);\n            }\n        }\n    }\n}\nint main(){\t\n    for(long long i=1;i<=9;i++){//\u76ee\u6807\u72b6\u6001\n        scanf(\"%lld\",&a[i]);\n        a[i]+=1;\n    }\t\n    last=contor();\n    for(long long i=1;i<=9;i++) a[i]=i;//\u8d77\u59cb\u72b6\u6001\n    vis[contor()]++;\n    e[1].prev=0;\n    e[1].stp=0;\n    e[1].id=1;\n    e[1].ct=contor();\n    for(long long i=1;i<=9;i++) e[1].ai[i]=a[i];\n    bfs();//\u5e7f\u641c\n    printf(\"UNSOLVABLE\");\n    return 0;\n}\n```",
        "postTime": 1539937769,
        "uid": 46743,
        "name": "loaky",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "### \u641c\u7d22\u597d\u9898 \uff01\n#### \u6211\u7528\u7684BFS\n##### \u601d\u8def\n\u76f4\u63a5\u679a\u4e3e\u6bcf\u79cd\u64cd\u4f5c\uff0c\u7136\u540e\u7528\u4e00\u4e2a8\u7ef4\u6570\u7ec4\u5224\u65ad\u5f53\u524d\u5c40\u9762\u6709\u6ca1\u6709\u51fa\u73b0\u8fc7\uff0c\u4e3a\u4ec0\u4e48\u7528\u516b\u7ef4\u5462\uff1f\u56e0\u4e3a\u4e5d\u4e2a\u683c\u5b50\u516b\u4e2a\u683c\u5b50\u662f\u786e\u5b9a\u7684\uff0c\u90a3\u4e48\u5269\u4e0b\u7684\u4e00\u4e2a\u4e5f\u662f\u786e\u5b9a\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u7ba1\u4ed6\u3002\n\u697c\u4e0b\u7684\u8bb2\u7684\u90fd\u592a\u590d\u6742\uff0c\u8fd9\u5c31\u662f\u4e00\u9053\u88f8\u7684BFS\uff0c\u4e00\u5f00\u59cb\u6211\u60f3\u7528IDFS\uff0c\u7ed3\u679cTLE\u4e86\uff0c\u5206\u6790\u4e86\u4e00\u4e0b\uff0c\u53d1\u73b0\u53ea\u67099!\u79cd\u72b6\u6001\uff0c\u6240\u4ee5\u6211\u6362\u4e86BFS\uff0c\u6211\u4eec\u4ece\u7ed3\u679c\u72b6\u6001\u5411\u8d77\u59cb\u72b6\u6001\u641c\u7d22\uff0c\u7136\u540e\u5bf9\u4e8e\u6bcf\u79cd\u60c5\u51b5\uff0c\u8bb0\u4e00\u4e2aid\uff0c\u4e00\u4e2alast\uff0c\u7136\u540e\u538b\u5165\u4e00\u4e2a\u7ed3\u6784\u4f53\u91cc\uff0c\u7136\u540e\u8f93\u51fa\u7684\u65f6\u5019\u53ea\u9700\u8981\u5012\u5e8f\u8f93\u51fa\u5c31\u597d\uff0c\u56e0\u4e3a\u5012\u7740\u641c\u7684 \uff0c\u6240\u4ee5\u5012\u5e8f\u8f93\u51fa\u5c31\u662f\u6b63\u7684\n##### \u6ce8\u610f\u70b9\n\u64cd\u4f5c2\u662f\u53ea\u80fd\u79fb\u52a8\u4e2d\u95f4\u7684\u90a3\u884c\uff0c\u6211\u56e0\u4e3a\u4e09\u884c\u90fd\u52a8\u4e86\uff0cWA\u4e86\u534a\u5929QAQ\n#### \u4ee3\u7801\n```cpp\n//By AcerMo\n#include<queue>\n#include<cmath>\n#include<cstdio>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\nusing namespace std;\nstruct emm\n{\n\tint b[3][3],co,la,id;\n\tbool friend operator < (emm x,emm y)\n\t{return x.co>y.co;}\n}ad,no,t[1000500];\npriority_queue<emm>q;\nint a[4][4],cnt;\nbool f[9][9][9][9][9][9][9][9];\ninline void cha1()\n{\n\tad=no;\n\tad.b[1][0]=no.b[0][0];ad.b[2][0]=no.b[1][0];\n\n\tad.b[2][1]=no.b[2][0];ad.b[2][2]=no.b[2][1];\n\t\n\tad.b[1][2]=no.b[2][2];ad.b[0][2]=no.b[1][2];\n\n\tad.b[0][1]=no.b[0][2];ad.b[0][0]=no.b[0][1];\n\n\tif (f[ad.b[0][0]][ad.b[0][1]][ad.b[0][2]][ad.b[1][0]][ad.b[1][1]][ad.b[1][2]][ad.b[2][0]][ad.b[2][1]]) return ;\n\n\tf[ad.b[0][0]][ad.b[0][1]][ad.b[0][2]][ad.b[1][0]][ad.b[1][1]][ad.b[1][2]][ad.b[2][0]][ad.b[2][1]]=1;\n\n\tad.co=no.co+1;ad.la=no.id;ad.id=++cnt;t[cnt]=ad;\n\n\treturn (void)(q.push(ad));\n}\ninline void cha2()\n{\n\tad=no;\n\tad.b[1][2]=no.b[1][0];ad.b[1][0]=no.b[1][1];ad.b[1][1]=no.b[1][2];\n\t\n\tif (f[ad.b[0][0]][ad.b[0][1]][ad.b[0][2]][ad.b[1][0]][ad.b[1][1]][ad.b[1][2]][ad.b[2][0]][ad.b[2][1]]) return ;\n\t\n\tf[ad.b[0][0]][ad.b[0][1]][ad.b[0][2]][ad.b[1][0]][ad.b[1][1]][ad.b[1][2]][ad.b[2][0]][ad.b[2][1]]=1;\n\t\n\tad.co=no.co+1;ad.la=no.id;ad.id=++cnt;t[cnt]=ad;\n\n\treturn (void)(q.push(ad));\n}\ninline bool che()\n{\n\tfor (int i=0;i<3;i++)\n\tfor (int k=0;k<3;k++)\n\tif (a[i][k]!=no.b[i][k]) \n\treturn 0;return 1; \n}\ninline void BFS()\n{\n\tfor (int i=0;i<3;i++)\n\tfor (int k=0;k<3;k++)\n\tno.b[i][k]=i*3+k;\n\tno.co=0;no.id=0;t[0]=no;q.push(no);\n\twhile (q.size())\n\t{\n\t\tno=q.top();q.pop();\n\t\tif (che()) return (void)(cout<<no.co);\n\t\tcha2();cha1();\n\t}\n\treturn ;\n}\nsigned main()\n{\n\tfor (int i=0;i<3;i++)\n\tfor (int k=0;k<3;k++)\n\tscanf(\"%d\",&a[i][k]);\n\tBFS();int e=no.id;puts(\"\");\n\twhile (1)\n\t{\n\t\tfor (int i=0;i<3;i++)\n\t\t{\n\t\t\tfor (int k=0;k<3;k++)\n\t\t\tcout<<t[e].b[i][k]<<\" \";\n\t\t\tputs(\"\");\n\t\t}\n\t\tif (!e) break;\n\t\tputs(\"\");e=t[e].la;\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1539175406,
        "uid": 71558,
        "name": "AcerMo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": ">~~\u8fd9\u9053\u9898\u76ee\u662f\u6211\u8bef\u6253\u8bef\u649e\u627e\u5230\u7684~~\n>>[R7787384\u8bb0\u5f55(\u6211\u7684)](https://www.luogu.org/record/show?rid=7787384)\n\n>>\u7b49\u5f85\u8bc4\u6d4b\u6709\u4e9b\u4e0d\u8010\u70e6\u4e86\uff0c\u5c31\u7ffb\u5230\u4e86\u4e0b\u9762\u4e00\u4e2a\u8bc4\u6d4b\n\n>>[R7787385\u8bb0\u5f55](https://www.luogu.org/record/show?rid=7787385)\n\n>\u4e8e\u662f~~\u849f\u84bb\u7684\u6211\u7528$map$\u5f00$O_2$\u745f\u745f\u53d1\u6296\u5730\u5361\u7740\u65f6\u9650\u8fc7\u4e86~~\n\n### \u8fd9\u4e0d\u662f\u592a\u96be\uff0c\u611f\u89c9\u548c[$\\color{blue}Magic Squares$](https://www.luogu.org/problemnew/show/P2730)\u6709\u70b9\u50cf\n\n\u770b\u5230\u9898\u76ee\u4e2d\u8981\u6c42\u6700\u77ed\u53d8\u6362\u6b21\u6570\uff0c\u81ea\u7136\u60f3\u5230\u4e86\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u3002\u9898\u76ee\u4e2d\u6709\u8bf4\u660e\u8981\u6253\u5370\u6bcf\u4e00\u6b65\u7684\u53d8\u6362\uff0c\u90a3\u4e48\u6211\u4eec\u7528\u7ed3\u6784\u4f53\u5b58\u50a8\u4e00\u4e2a\u4eba\u5de5\u961f\u5217\uff0c\u5e76\u4e14\u8bb0\u5f55\u4e0b\u6bcf\u4e00\u4e2a\u72b6\u6001\u7684\u524d\u9a71\u8282\u70b9\u4e0b\u6807\u3002\n\n\u5bf9\u4e8e\u72b6\u6001\u7684\u4fdd\u5b58\uff0c\u6211\u83ab\u540d\u7684\u60f3\u5230\u4e86\u7528$\\color{red} string$+$map$\u3002\n\n\u7528$\\color{red} string$\u6709\u51e0\u5927\u597d\u5904\uff1a\n- \u8c03\u8bd5\u65f6\u65b9\u4fbf\u67e5\u770b\n- \u7f16\u7a0b\u5b9e\u73b0\u7b80\u5355\n- \u5199\u72b6\u6001\u6539\u53d8\u51fd\u6570\u65b9\u4fbf\u5feb\u6377\n- \u53ef\u4ee5\u76f4\u63a5\u4f5c\u4e3aSTL\u76f8\u5173\u5bb9\u5668\u7c7b\u578b\n- **\u6700\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u4e0d\u7528\u8bb0\u5eb7\u6258\u5c55\u5f00\uff01**\n>\u4ec5\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u201c\u8df3\u677f\u201d\u2014\u2014\u5148\u5199\u4e00\u4e2aSTL\u7248\u7684\u7a0b\u5e8f\uff0c\u786e\u4fdd\u4e3b\u7b97\u6cd5\u6b63\u786e\uff0c\u7136\u540e\u628aSTL\u66ff\u6362\u6210\u5408\u9002\u7684hash\u3002\n>--by lrj\n\n[$\\color{orange}\\text{\u4ee3\u7801\u5b9e\u73b0}$](http://cc.amazingcounters.com/counter.php?i=3223571&c=9671026)\u76f8\u5bf9\u7b80\u5355\uff0c\u5728\u6b64\u4e0d\u591a\u52a0\u8d58\u8ff0\u3002",
        "postTime": 1528622091,
        "uid": 35871,
        "name": "ZigZagKmp",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "\u6298\u78e8\u4e86\u6211\u4e00\u4e0b\u5348\uff0c\u6211\u8fd8\u662f\u592a\u84bb\u4e86\n\n\u5176\u5b9e\u8fd9\u9898\u4e0d\u7528\u8bb0\u5f55\u524d\u9a71\uff0c\u7528\u4e8c\u53c9\u6811\u7b49\u7b49\uff0c\u76f4\u63a5\u66b4\u529b\u5c31\u53ef\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6bcf\u4e2a\u72b6\u6001\u91cc\u4fdd\u5b58\u4e00\u4e2a\u5b57\u7b26\u4e32\u53d8\u91cf\uff0c\u7528\u6765\u8bb0\u5f55\u8d70\u5230\u8fd9\u4e00\u6b65\u6240\u6709\u7684\u8def\u7a0b\uff0c\n\u6700\u540e\u8f93\u51fa\u6700\u7ec8\u72b6\u6001\u91cc\u7684\u5b57\u7b26\u4e32\u53d8\u91cf\u5c31OK\u4e86\u3002\n\n\u603b\u4f53\u601d\u8def\u5404\u4f4ddalao\u4eec\u90fd\u8bb2\u8fc7\u4e86\uff0c\u5c31\u662f\u526a\u679dBFS+\u54c8\u5e0c\uff0c\u6211\u5c31\u4e0d\u518d\u8fc7\u591a\u53bb\u8bf4\u4e86\u3002\n\n\n~~\u4e00\u5b9a\u4e00\u5b9a\u8981\u5438\u6c27\u624d\u80fd\u8fc7\uff0c\u6211\u5c31\u662f\u56e0\u4e3a\u4e00\u5f00\u59cb\u6ca1\u5438\u6c27\uff0c\u6700\u540e4\u4e2a\u70b9tle~~\n\n```cpp\n#include <cstdio>\n#include <set>\n#include <queue>\n#include <string>\nusing namespace std;\n\nstring new_path(int matrix[4][4]) {\n\tstring path;\n\tfor (int i = 1; i <= 3; i++) {\n\t\tfor (int j = 1; j <= 3; j++) {\n\t\t\tpath += (char)(matrix[i][j] + '0');\n\t\t\tpath += ' ';\n\t\t}\n\t\tpath += '\\n';\n\t}\n\treturn path + '\\n';\n}\n\nstruct Status {\n\tint matrix[4][4], step;\n\tstring path;\n\t\n\tint get_hash() {\n\t\tint hash = 0;\n\t\tfor (int i = 1; i <= 3; i++)\n\t\t\tfor (int j = 1; j <= 3; j++)\n\t\t\t\thash = hash * 10 + matrix[i][j];\n\t\treturn hash;\n\t}\n\t\n\tStatus change1() {\n\t\tStatus changed;\n\t\tchanged.step = step + 1;\n\t\tchanged.matrix[1][1] = matrix[2][1];\n    \tchanged.matrix[1][2] = matrix[1][1];\n    \tchanged.matrix[1][3] = matrix[1][2];\n    \tchanged.matrix[2][1] = matrix[3][1];\n    \tchanged.matrix[2][2] = matrix[2][2];\n    \tchanged.matrix[2][3] = matrix[1][3];\n    \tchanged.matrix[3][1] = matrix[3][2];\n    \tchanged.matrix[3][2] = matrix[3][3];\n    \tchanged.matrix[3][3] = matrix[2][3];\n    \tchanged.path = path + new_path(changed.matrix);\n\t\treturn changed;\n\t}\n\t\n\tStatus change2() {\n\t\tStatus changed;\n\t\tchanged.step = step + 1;\n\t\tfor (int i = 1; i <= 3; i++) {\n\t\t\tchanged.matrix[1][i] = matrix[1][i];\n\t\t\tchanged.matrix[3][i] = matrix[3][i];\n\t\t}\n\t\tchanged.matrix[2][1] = matrix[2][3];\n\t\tchanged.matrix[2][2] = matrix[2][1];\n\t\tchanged.matrix[2][3] = matrix[2][2];\n\t\tchanged.path = path + new_path(changed.matrix);\n\t\treturn changed;\n\t}\n};\n\nint main() {\n\t// read\n\tStatus init;\n\tinit.step = 0;\n\tfor (int i = 1; i <= 3; i++)\n\t\tfor (int j = 1; j <= 3; j++)\n\t\t\tscanf(\"%d\", &init.matrix[i][j]);\n\tinit.path = new_path(init.matrix);\n\n\t// BFS\n\tset<int> visit;\n\tqueue<Status> que;\n\tque.push(init);\n\twhile (!que.empty()) {\n\t\tStatus &status = que.front(), changed1, changed2;\n\t\tint hash1, hash2;\n\t\tif (status.get_hash() == 12345678) {\n\t\t\tprintf(\"%d\\n\", status.step);\n\t\t\tputs(status.path.c_str());\n\t\t\treturn 0;\n\t\t}\n\t\tchanged1 = status.change1();\n\t\tchanged2 = status.change2();\n\t\thash1 = changed1.get_hash();\n\t\thash2 = changed2.get_hash();\n\t\tif (!visit.count(hash1)) {\n\t\t\tvisit.insert(hash1);\n\t\t\tque.push(changed1);\n\t\t}\n\t\tif (!visit.count(hash2)) {\n\t\t\tvisit.insert(hash2);\n\t\t\tque.push(changed2);\n\t\t}\n\t\tque.pop();\n\t}\n\t\n\t// no answer\n\tputs(\"UNSOLVABLE\");\n\treturn 0;\n}\n```\n",
        "postTime": 1615022440,
        "uid": 461366,
        "name": "Qing_fy",
        "ccfLevel": 0,
        "title": "P2578\u9898\u89e3"
    },
    {
        "content": "## \u601d\u8def\n\n\u5f88\u660e\u663e\u9700\u8981\u4f7f\u7528\u5e7f\u641c\u3002\n\n\u4f7f\u7528\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u8868\u793a\u4e00\u4e2a\u72b6\u6001\uff08`a` \u662f\u5f53\u524d\u7684\u4e5d\u5bab\u683c\uff1b`last` \u662f\u5f53\u524d\u72b6\u6001\u662f\u4ece\u54ea\u4e2a\u72b6\u6001\u64cd\u4f5c\u5f97\u6765\u7684\uff0c\u5373\u8be5\u72b6\u6001\u7684\u7236\u72b6\u6001\uff1b`step` \u662f\u5f53\u524d\u6267\u884c\u4e86\u51e0\u6b21\u64cd\u4f5c\uff09\uff1a\n\n```cpp\nstruct state {\n    int a[9], last, step;\n};\n```\n\n\u4e4b\u540e\u662f\u5e7f\u641c\u7684\u6846\u67b6\uff08\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4f7f\u7528\u624b\u5199\u961f\u5217\uff09\uff1a\n\n```cpp\n    while (head <= tail) {\n        state u = stas[head];\n        ...\n        ++head;\n    }\n```\n\n\n\u63a5\u4e0b\u6765\u662f\u6a21\u62df\u64cd\u4f5c $1$ \u548c\u64cd\u4f5c $2$\uff1a\n\n```cpp\nstate move_1(state s) {\n    state res = s;\n    res.a[0] = s.a[3];\n    res.a[1] = s.a[0];\n    res.a[2] = s.a[1];\n    res.a[5] = s.a[2];\n    res.a[8] = s.a[5];\n    res.a[7] = s.a[8];\n    res.a[6] = s.a[7];\n    res.a[3] = s.a[6];\n    return res;\n}\n\nstate move_2(state s) {\n    state res = s;\n    res.a[3] = s.a[5];\n    res.a[4] = s.a[3];\n    res.a[5] = s.a[4];\n    return res;\n}\n```\n\n\u4e24\u6b21\u64cd\u4f5c\u540e\u90fd\u9700\u8981\u5c06\u64cd\u4f5c\u540e\u7684\u72b6\u6001\u6dfb\u52a0\u8fdb\u961f\u5217\u3002\n\n**\u8bb0\u5f97\u5224\u91cd\uff0c\u4e0d\u7136\u4f1a MLE\u3002**\n\n\u4e3a\u4e86\u65b9\u4fbf\u5224\u91cd\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u51fd\u6570\uff0c\u5c06\u4e00\u4e2a\u72b6\u6001\u8f6c\u5316\u4e3a\u4e00\u4e2a\u6574\u6570\uff0c\u8fd9\u6837\u5c31\u53ea\u9700\u5224\u65ad\u8be5\u6574\u6570\u662f\u5426\u51fa\u73b0\u8fc7\u5373\u53ef\uff1a\n\n```cpp\nint state2int(state s) {\n    int res = 0;\n    for (int i = 0; i < 9; ++i) {\n        res = 10 * res + s.a[i];\n    }\n    return res;\n}\n```\n\n\n\u6700\u540e\u662f\u5224\u65ad\u5230\u8fbe\u76ee\u6807\u72b6\u6001\u65f6\uff0c\u6253\u5370\u8def\u5f84\u3002\n\n\u4e00\u76f4\u6cbf\u7740\u7236\u72b6\u6001\u627e\u5230\u521d\u59cb\u72b6\u6001\uff0c\u5bfb\u627e\u7684\u540c\u65f6\u4f7f\u7528\u4e00\u4e2a\u6808\u5b58\u653e\u904d\u5386\u5230\u7684\u6240\u6709\u72b6\u6001\uff0c\u65b9\u4fbf\u540e\u9762\u9006\u5e8f\u8f93\u51fa\u3002\n\n\u5176\u4ed6\u7ec6\u8282\u89c1\u5b8c\u6574\u4ee3\u7801\u3002\n\n## \u5b8c\u6574\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\nint head = 1, tail;\nstruct state {\n    int a[9], last, step;\n} beg, stas[2000000];\nset<int> vis;\nbool flag;\n\nint state2int(state s) {\n    int res = 0;\n    for (int i = 0; i < 9; ++i) {\n        res = 10 * res + s.a[i];\n    }\n    return res;\n}\n\nstate move_1(state s) {\n    state res = s;\n    res.a[0] = s.a[3];\n    res.a[1] = s.a[0];\n    res.a[2] = s.a[1];\n    res.a[5] = s.a[2];\n    res.a[8] = s.a[5];\n    res.a[7] = s.a[8];\n    res.a[6] = s.a[7];\n    res.a[3] = s.a[6];\n    return res;\n}\n\nstate move_2(state s) {\n    state res = s;\n    res.a[3] = s.a[5];\n    res.a[4] = s.a[3];\n    res.a[5] = s.a[4];\n    return res;\n}\n\nvoid push(state s) {\n    stas[++tail] = s;\n    vis.insert(state2int(s));\n}\n\nint main() {\n    for (int i = 0; i < 9; ++i) {\n        scanf(\"%d\", &beg.a[i]);\n    }\n    beg.last = -1;\n    beg.step = 0;\n    push(beg);\n    while (head <= tail) {\n        state u = stas[head];\n        if (state2int(u) == 12345678) {\n            stack<state> st;\n            printf(\"%d\\n\", u.step);\n            flag = 1;\n            int idx = head;\n            while (idx != -1) {\n                st.push(stas[idx]);\n                idx = stas[idx].last;\n            }\n            while (st.size()) {\n                state u = st.top();\n                st.pop();\n                for (int i = 0; i < 3; ++i) {\n                    for (int j = 0; j < 3; ++j) {\n                        printf(\"%d \", u.a[i * 3 + j]);\n                    }\n                    putchar('\\n');\n                }\n                putchar('\\n');\n            }\n            break;\n        }\n        ++u.step;\n        u.last = head;\n        state v = move_1(u);\n        if (!vis.count(state2int(v))) {\n            push(v);\n        }\n        v = move_2(u);\n        if (!vis.count(state2int(v))) {\n            push(v);\n        }\n        ++head;\n    }\n    if (!flag) {\n        puts(\"UNSOLVABLE\");\n    }\n    return 0;\n}\n```\n",
        "postTime": 1614950157,
        "uid": 485611,
        "name": "Iron_Heart",
        "ccfLevel": 0,
        "title": "P2578 \u9898\u89e3"
    },
    {
        "content": "\u601d\u8def\u548c\u4e4b\u524d\u7684\u5927\u4f6c\u4eec\u5dee\u4e0d\u591a\uff0c\u4e3b\u8981\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u4f5c\u4e86\u4f18\u5316\uff1a\n\n* \u72b6\u6001\u7684\u8868\u793a\n\n~~\u6211\u4e5f\u4e0d\u77e5\u9053\u6709\u6ca1\u6709\u6548\u679c~~\u3002\u89c2\u5bdf\u4e24\u4e2a\u64cd\u4f5c\uff0c\u53d1\u73b0\u7b2c\u4e8c\u4e2a\u64cd\u4f5c\u53ea\u4f1a\u79fb\u52a83\u4e2a\u5143\u7d20\uff0c\u4e8c\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u8981\u79fb\u52a88\u4e2a\u3002\u4e8e\u662f\u6211\u6309\u7167\u4ee5\u4e0b\u65b9\u5f0f\u5b9a\u4e49\u6211\u7684\u72b6\u6001\uff1a\u7528\u4e00\u4e2a9\u4f4d\u5341\u8fdb\u5236\u6570\u8868\u793a\uff0c\u7b2c\u4e00\u4f4d\uff08\u6700\u9ad8\u4f4d\uff09\u653e\u4e5d\u5bab\u683c\u4e2d\u95f4\u7684\u6570\uff0c\u540e\u9762\u76848\u4f4d\u5f02\u5e38\u4e3a\u4ece\u4e5d\u5bab\u683c\u5de6\u4e0a\u89d2\u5f00\u59cb\u987a\u65f6\u9488\u6392\u5217\u7684\u6570\u3002\n\n\u5982\u4ee5\u4e0b\u68cb\u76d8\uff1a\n\n|  0|  1|  2|\n| -----------: | -----------: | -----------: |\n|  **3**| **4** | **5** |\n| **6** | **7** | **8** |\n\n\u5bf9\u5e94\u72b6\u6001\u6570\uff1a\n\n**401258763**\n\u3002\n\n\u8fd9\u6837\u64cd\u4f5c\u4e00\u5c31\u53d8\u5f97\u5341\u5206\u7b80\u5355\u3002\u6b8b\u5ff5\u7684\u662f\uff0c\u64cd\u4f5c\u4e8c\u53d8\u9ebb\u70e6\u4e86\u3002\u4e0d\u8fc7\u6211~~\u76f2\u76ee~~\u5206\u6790\u4e86\u4e00\u4e0b\uff0c\u89c9\u5f97\u603b\u4f53\u4e0a\u8fd8\u662f\u6709\u4f18\u5316\u7684\u3002\n\n\u5f53\u7136\u5982\u679c\u752816\u8fdb\u5236\u7684\u8bdd\u6216\u8bb8\u80fd\u51cf\u5c0f\u5e38\u6570\uff0c~~\u61d2\u5f97\u5f04\u4e86~~\n\n* \u72b6\u6001\u7684\u5b58\u50a8\n\n\u5728\u4e0a\u6587\u7684\u57fa\u7840\u4e0a\u6211\u4f7f\u7528\u4e86hashmap\u3002\u4e3b\u8981\u662f\u7b80\u5355\uff0c\u76f8\u5bf9\u5eb7\u6258\u5c55\u5f00\u5e94\u8be5\u8981\u5feb\u4e00\u70b9\u3002\n\n~~\u7531\u4e8e\u6bd4\u8f83\u7b80\u5355\u5c31\u4e0d\u63d0\u4e86~~\n\n* \u641c\u7d22\u7684\u65b9\u5f0f\n\n\u8fd9\u5e94\u8be5\u662f\u6211\u6700\u6709\u6548\u7684\u4f18\u5316\u3002\u5728\u8fd9\u91cc\u6211\u4f7f\u7528\u4e86\u53cc\u7aef\u961f\u5217BFS\u3002\u53cc\u7aef\u961f\u5217BFS\u5c31\u662f\u4ece\u8d77\u70b9\u548c\u7ec8\u70b9\u5206\u522b\u6269\u5c55\uff0c\u4f7f\u7528\u4e24\u4e2a\u961f\u5217\uff0c\u6bcf\u6b21\u6269\u5c55\u8282\u70b9\u6570\u8f83\u5c11\u7684\u90a3\u4e2a\u3002\u6bd4\u8f83\u7b80\u5355\uff0c\u5177\u4f53\u4e0d\u8bb2\u4e86\uff0c\u53ef\u4ee5\u770b\u540e\u6587\u7684\u4ee3\u7801\u5b9e\u73b0\u3002\u8fd9\u91cc\u53ea\u63d0\u4e00\u4e2a\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u3002\u5c31\u662f\u4ece\u7ec8\u70b9\u6269\u5c55\u7684\u65f6\u5019\u8981\u7528\u9006\u64cd\u4f5c\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5bf9\u4e8e\u4ee5\u4e0b\u72b6\u6001\u4e3a**\u76ee\u6807\u72b6\u6001**\n\n|  0|  1|  2|\n| -----------: | -----------: | -----------: |\n|  **3**| **4** | **5** |\n| **6** | **7** | **8** |\n\n\uff0c\n\u4ee5\u4e0b\u72b6\u6001\u4e3a**\u8d77\u59cb\u72b6\u6001**\n\n|  0|  1|  2|\n| -----------: | -----------: | -----------: |\n|  **4**| **5** | **3** |\n| **6** | **7** | **8** |\n\n\u7684\u60c5\u51b5\u3002\u5f88\u660e\u663e\uff0c\u53ea\u8981\u4e00\u6b65\u64cd\u4f5c\u4e8c\u5373\u53ef\u5b8c\u6210\u3002\u4f46\u662f\u53cd\u5411\u4ece\u7ec8\u70b9\u5f00\u59cb\u6269\u5c55\u7684\u8bdd\uff0c\u5c31\u4e0d\u80fd\u76f4\u63a5\u7528\u539f\u6765\u7684\u64cd\u4f5c\u4e8c\u3002\n\n~~\u8bed\u6587\u4e0d\u597d\u771f\u9ebb\u70e6\uff0c\u8fd8\u662f\u770b\u4f8b\u5b50\u5427~~\n\n\u5c31\u662f\u8bf4\uff0c\u64cd\u4f5c\u4e8c\u662f\u628a\u4e2d\u95f4\u4e00\u884c\u5411\u53f3\u79fb\uff0c\u4f46\u5982\u679c\u53cd\u5411\u6269\u5c55\u7684\u8bdd\uff0c\u5f80\u53f3\u79fb\u5c31\u4f1a\u53d8\u6210\u8fd9\u6837\n\n|  0|  1|  2|\n| -----------: | -----------: | -----------: |\n|  **5**| **3** | **4** |\n| **6** | **7** | **8** |\n\n\u8fd9\u5c31\u4e0d\u662f\u8d77\u59cb\u72b6\u6001\u4e86\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5728\u4ece\u7ec8\u70b9\u53cd\u5411\u6269\u5c55\u7684\u65f6\u5019\uff0c\u8981\u7528\u4e00\u4e2a\u64cd\u4f5c\u7684\u9006\u64cd\u4f5c\u3002\u6bd4\u5982\u64cd\u4f5c\u4e8c\u7684\u9006\u64cd\u4f5c\u5c31\u662f\u628a\u4e2d\u95f4\u4e00\u884c\u5411\u5de6\u79fb\u3002\n\n\u8fd8\u6709\u5c31\u662f\u8def\u5f84\u8f93\u51fa\u7684\u65f6\u5019\u6709\u4e00\u4e9b\u533a\u522b\u3002\n\n\u597d\u4e86\uff0c\u5177\u4f53\u7ec6\u8282\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <queue>\n\nint ans;\n\ninline void reada(int &x) {\n  while (x = getchar(), x > '9' || x < '0'); x -= 48;\n}\n\nclass Hash{\n  public:\n    inline void assign(int Key, int val) {\n      int p = Key % _kMOD;\n      for (int e = first_[p]; e; e = next_[e]) {\n        if (val1_[e] == Key) { val2_[e] = val; return;}\n      }\n      next_[++edge_num_] = first_[p], first_[p] = edge_num_, \n      val1_[edge_num_] = Key, val2_[edge_num_] = val;\n    }\n\n    inline void modify(int Key, int val) {\n      int p = Key % _kMOD;\n      for (int e = first_[p]; e; e = next_[e]) {\n        if (val1_[e] == Key) { val2_[e] += val; return;}\n      }\n      next_[++edge_num_] = first_[p], first_[p] = edge_num_, \n      val1_[edge_num_] = Key, val2_[edge_num_] = val;\n    }\n\n    int query(int Key) const{\n      int p = Key % _kMOD;\n      for (int e = first_[p]; e; e = next_[e]) {\n        if (val1_[e] == Key) return val2_[e];\n      }\n      return 0;\n    }\n  protected:\n    static const int _kMOD     = 999983;\n    static const int _kMaxSize = 363000;\n  private:\n    int edge_num_;\n    int first_[_kMOD], next_[_kMaxSize] , val1_[_kMaxSize], val2_[_kMaxSize];\n};\n\nint start_con;\nint end_con = 401258763;\n\nconstexpr int pow10[10] = {1, 10, 100, 1000, 10000, 100000, 1000000, \n                           10000000, 100000000, 1000000000};\n\ninline void conv(int &con, const int arr[]) {\n  con = arr[4] * pow10[8] + arr[0] * pow10[7] + arr[1] * pow10[6] + \n        arr[2] * pow10[5] + arr[5] * pow10[4] + arr[8] * pow10[3] + \n        arr[7] * pow10[2] + arr[6] * pow10[1] + arr[3] * pow10[0];\n}\n\ninline void iconv(int con, int arr[]) {\n  arr[3] = con % 10, con /= 10,\n  arr[6] = con % 10, con /= 10,\n  arr[7] = con % 10, con /= 10,\n  arr[8] = con % 10, con /= 10,\n  arr[5] = con % 10, con /= 10,\n  arr[2] = con % 10, con /= 10,\n  arr[1] = con % 10, con /= 10,\n  arr[0] = con % 10, con /= 10,\n  arr[4] = con % 10;\n}\n\nvoid out_put_con(int con) {\n  int x[9];\n  iconv(con, x);\n  putchar(x[0] + '0'), \n  putchar(' '), \n  putchar(x[1] + '0'), \n  putchar(' '), \n  putchar(x[2] + '0'), \n  putchar('\\n'), \n  putchar(x[3] + '0'), \n  putchar(' '), \n  putchar(x[4] + '0'), \n  putchar(' '), \n  putchar(x[5] + '0'), \n  putchar('\\n'), \n  putchar(x[6] + '0'), \n  putchar(' '), \n  putchar(x[7] + '0'), \n  putchar(' '), \n  putchar(x[8] + '0'), \n  putchar('\\n');\n}\n\n\nHash dis1, dis2, pre1, pre2, vis;\nint mid;\n\nvoid operator_A(int &con) {\n  int h = con / pow10[8], t = con % pow10[8];\n  con = h * pow10[8] + (t % 10) * pow10[7] + t / 10;\n}\nvoid operator_B(int &con) {\n  int s1, s2, s3, s4, s5;\n  s5 = con % 10,\n  con /= 10,\n  s4 = con % pow10[3],\n  con /= pow10[3],\n  s3 = con % 10,\n  con /= 10,\n  s2 = con % pow10[3],\n  con /= pow10[3],\n  s1 = con;\n  con = s3 + s4 * 10 + s1 * pow10[4] + \n        s2 * pow10[5] + s5 * pow10[8];\n}\n\nvoid inv_operator_A(int &con) {\n  int h = con / pow10[8], t = con % pow10[8];\n  con = h * pow10[8] + (t / pow10[7]) + (t % pow10[7]) * 10;\n}\n\nvoid inv_operator_B(int &con) {\n  int s1, s2, s3, s4, s5;\n  s5 = con % 10,\n  con /= 10,\n  s4 = con % pow10[3],\n  con /= pow10[3],\n  s3 = con % 10,\n  con /= 10,\n  s2 = con % pow10[3],\n  con /= pow10[3],\n  s1 = con;\n  con = s1 + s4 * 10 + s5 * pow10[4] + \n        s2 * pow10[5] + s3 * pow10[8];\n}\n\nvoid (*FPArray[])(int&) = {operator_A, operator_B, inv_operator_A, inv_operator_B};\n\nint BFS(int start_con, int end_con) {\n  std::queue<int> q1, q2, *q;\n  Hash *dis, *pre;\n  int qv, fpa;\n  bool flag = false;\n  q1.emplace(start_con), q2.emplace(end_con);\n  vis.assign(start_con, 1), vis.assign(end_con, 2);\n  dis1.assign(start_con, 0), dis2.assign(end_con, 0);\n  while ((!q1.empty()) && (!q2.empty())) {\n    if (q1.size() <= q2.size()) {\n      q = &q1, dis = &dis1, pre = &pre1, qv = 1, fpa = 0;\n    } else {\n      q = &q2, dis = &dis2, pre = &pre2, qv = 2, fpa = 2;\n    }\n    int qf = q->front(), dist = dis->query(qf);\n    q->pop();\n    for (int i = 0, qtf; i != 2; ++i) {\n      qtf = qf;\n      (i + fpa)[FPArray](qtf);\n      int v = vis.query(qtf);\n      if (v == qv) continue;\n      vis.modify(qtf, qv);\n      dis->assign(qtf, dist + 1);\n      pre->assign(qtf, qf);\n      if (v + qv == 3) {\n        mid = qtf;\n        flag = true;\n        break;\n      }\n      q->emplace(qtf);\n    }\n    if (flag) break;\n  }\n  if (flag) {\n    return dis1.query(mid) + dis2.query(mid);\n  }\n  return -1;\n}\n\nvoid print_path_A(int x) {\n  if (!x) return;\n  print_path_A(pre1.query(x));\n  out_put_con(x), putchar('\\n');\n}\n\nvoid print_path_B(int x) {\n  while (x) {\n  \tout_put_con(x), putchar('\\n');\n  \tx = pre2.query(x);\n  }\n}\n\nvoid print_path(int mid) {\n  print_path_A(pre1.query(mid)), print_path_B(mid);\n}\n\nint main() {\n  int x[9];\n  reada(x[0]),\n  reada(x[1]),\n  reada(x[2]),\n  reada(x[3]),\n  reada(x[4]),\n  reada(x[5]),\n  reada(x[6]),\n  reada(x[7]),\n  reada(x[8]);\n  conv(start_con, x);\n  ans = BFS(start_con, end_con);\n  if (ans == -1) {  puts(\"UNSOLVABLE\");}\n  else {\n    printf(\"%d\\n\", ans);\n    print_path(mid);\n  }\n  return 0;\n}\n```\n\u6ce8\u91ca\uff1a\n\n\u4e3a\u4e86$\\overset{\\text{\u6bd2\u7624}}{\\text{\u65b9\u4fbf}}$\uff0c\u6211\u4f7f\u7528\u4e86\u6307\u9488\u3002~~\u800c\u4e14\u662f\u51fd\u6570\u6307\u9488~~\u3002\u5728```void (*FPArray[])(int&)``` \u90a3\u91cc\u5b9a\u4e49\u4e86\u4e00\u4e2a\u540d\u4e3aFPArray\u7684\u51fd\u6570\u6307\u9488\u6570\u7ec4\u3002```i[FParray](con)```\u8868\u793a\u8c03\u7528FPArray\u4e2d\u7b2ci\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u4e3acon\u3002\n\nconv\u51fd\u6570\u7528\u4e8e\u5c06\u72b6\u6001\u6570\u503c\u8f6c\u6362\u6210\u72b6\u6001\u6570\u7ec4\uff0ciconv\u5219\u76f8\u53cd\u3002\n\nhashmap vis\u91cc1\u4e3a\u6b63\u9762\u6269\u5c55\u8fc7\uff0c2\u4e3a\u53cd\u5411\u6269\u5c55\u8fc7\uff0c3\u4e3a\u76f8\u9047\u3002\n\n\u51fa\u9505\u4e86\u6216\u8005\u6709\u95ee\u9898\u8bc4\u8bba\u6216\u8005@\u6211\u5427\u3002\n\n\u4ea4\u4e86\u4e00\u4e0b\uff0c173ms\uff0c\u6ca1\u5438\u6c27~~\u5438\u4e86\u4e5f\u6ca1\u7528~~\uff0c\u76ee\u524d\u6392\u7b2c\u4e94\u3002\u4e0d\u4f1a\u5361\u5e38\u3002$\\overset{\\text{\u4e0d\u4f1a}}{\\text{\u4e0d\u60f3}}$\u4f18\u5316\u4e86\u3002\u5982\u679c\u8981\u51b2\u699c\u6211\u5efa\u8bae\u624b\u5199\u961f\u5217\u3001\u5faa\u73af\u5c55\u5f00\u3001\u6539\u54c8\u5e0c\u6a21\u6570\u3001\u8f93\u51fa\u4f18\u5316\u4e4b\u7c7b\u3002\n\n\u987a\u4fbf%%12ms\u7684\u5927\u4f6c\uff0c\u4e0d\u77e5\u9053\u7528\u7684\u4ec0\u4e48\u795e\u4ed9\u7b97\u6cd5Orz\n\n\u795d\u4f60\u4eec\u6210\u529f\uff08\u6ed1\u7a3d",
        "postTime": 1563443578,
        "uid": 113385,
        "name": "encore",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "~~\u65e2\u7136\u8fa3\u4e48\u591a\u7684\u9898\u89e3\u90fd\u662fp\uff0c\u90a3\u4e48\u6211\u5c31\u6765\u6c34\u4e00\u6ce2c++\u7684\u9898\u89e3\u5427~~\n# \u6572\u677f\u5b50 \u5212\u91cd\u70b9\n- \u5eb7\u6258\u5224\u91cd\uff0c\u697c\u4e0a\u597d\u591a\u5927\u4f6c\u90fd\u975e\u5e38\u8ba4\u771f\u7684\u8bb2\u4e86\uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\n- \u9006\u5411\u641c\u7d22\uff0c\u65e2\u7136\u672b\u72b6\u6001\u90fd\u662f\u76f8\u540c\u7684\uff0c\u90a3\u5c31\u4ece\u672b\u72b6\u6001\u5f00\u59cb\u641c\u7d22\uff0c\u628a\u80fd\u591f\u5230\u8fbe\u7684\u70b9\u7528~~\u5c0f\u672c\u672c\u8bb0\u5f55\u4e0b\u7b54\u6848\u6765~~book,ans\u6570\u7ec4\uff08\u5176\u5b9e\u597d\u50cf\u5f00\u4e00\u4e2a\u4e5f\u884c\uff09\u8bb0\u5f55\u4e0b\u6765\uff0c\u5bf9\u4e8e\u4e0d\u80fd\u5230\u8fbe\u7684\u6570\u636e\u5224\u65ad\u5c31\u5f88\u5feb\u4e86\uff08\u5f53\u7136\u5bf9\u4e8e\u4e00\u7ec4\u6570\u636e\u6ca1\u6709\u90a3\u4e48\u591a\u7684\u4f18\u52bf\uff0c\u4f46\u5982\u679c\u662f\u8f93\u5165\u591a\u7ec4\u6570\u636e\uff0c\u90a3\u5b83\u9884\u5904\u7406\u6269\u5c55\u51fa\u4e86\u6240\u6709\u72b6\u6001\u7684\u4f18\u52bf\u5c31\u80fd\u591f\u5b8c\u5168\u4f53\u73b0\u51fa\u6765\u4e86\uff09\uff1b\u641c\u7d22\u7684\u65f6\u5019\u6211\u8fd8\u7528\u4e86\u4e00\u4e2a\u7ed3\u6784\u4f53\u8bb0\u5f55\u5f53\u524d\u72b6\u6001\u4ee5\u53ca\u5f53\u524d\u72b6\u6001\u662f\u7531\u54ea\u4e00\u4e2a\u72b6\u6001\u6269\u5c55\u800c\u6765\u7684\uff0c\u7136\u540e\u8f93\u51fa\u65b9\u6848\u7684\u65f6\u5019\u5c31\u6572\u6781\u65b9\u4fbf\u4e86\n\n\u4ee3\u7801\u7ec6\u8282\u6ca1\u6709\u5f88\u591a\uff0c\u8fd9\u9053\u9898\u5dee\u4e0d\u591a\u53ef\u4ee5\u8bf4\u662f\u5e7f\u641c\u6a21\u677f\uff0c\u8ddf\u516b\u6570\u7801\u5dee\u4e0d\u591a\n\n\u6069\uff0c\u57fa\u7840\u975e\u5e38\u91cd\u8981\uff0c\u57fa\u7840\u9898\u4e5f\u8981\u8d85\u7ea7\u8ba4\u771f\u53bb\u505a\u53bb\u7406\u89e3\uff01\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#include <queue>\nusing namespace std;\nconst int maxn=500005;\nconst int sum[10]={1,1,2,6,24,120,720,5040,40320,362880};\nint book[maxn],ans[maxn],cnt;\nstruct node{\n\tint a[4][4],step;\n};\nstruct littlecase{\n\tnode g;\n\tint last;\n}f[maxn];\n\ninline int check(node x){//\u5eb7\u6258\u8ba1\u7b97\n\tint cc[10],c=0,ans=0;\n\tfor(int i=1;i<=3;++i)for(int j=1;j<=3;++j) cc[++c]=x.a[i][j];\n\tfor(int i=1;i<9;++i){\n\t\tc=0;\n\t\tfor(int j=i+1;j<=9;++j){\n\t\t\tif(cc[j]<cc[i]) c++;\n\t\t}\n\t\tans+=c*sum[9-i];\n\t}\n\treturn ans;\n}\n\ninline void pre(){//\u9006\u5411\u641c\u7d22\u9884\u5904\u7406\u51fa\u80fd\u591f\u5230\u8fbe\u7684\u6240\u6709\u72b6\u6001\n\tqueue<node>q;\n    book[0]=true;//\u8bb0\u5f97true\u4e00\u4e0b\uff0c\u4ee5\u514d\u6570\u636e\u4e3a\u672b\u72b6\u6001\u65f6\u8f93\u51fa\u4e3a\u4e0d\u80fd\u5230\u8fbe\n\tnode start;\n    int cnt=-1;//\u6ce8\u610f\u4e3a-1\n\tfor(int i=1;i<=3;++i)for(int j=1;j<=3;++j)start.a[i][j]=++cnt;\n\tstart.step=0;\n\tf[0].g=start;\n\tf[0].last=0;\n\tq.push(start);\n\tint a1,a2,a3,num;\n\twhile(q.size()){\n\t\tnode tem=q.front();q.pop();\n\t\tnode now;\n\t\tcnt++;\n\t\tint hh=check(tem);\n\t\t//tem\u8bb0\u5f55\u4e3a\u4e0a\u4e00\u4e2a\u72b6\u6001\uff0cnow\u4e3a\u6269\u5c55\u7684\u72b6\u6001\uff0c\u6bcf\u6b21now=tem\u5c31\u53ef\u4ee5\u907f\u514d\u518d\u56de\u53bb\u4e00\u904d\u7684\u64cd\u4f5c = =\n        //\u4ee5\u4e0b\u4e24\u79cd\u6269\u5c55\u65b9\u5f0f\n\t\tnow=tem;\n\t\ta1=now.a[2][1];\n\t\ta2=now.a[2][2];\n\t\ta3=now.a[2][3];\n\t\tnow.a[2][1]=a2;\n\t\tnow.a[2][2]=a3;\n\t\tnow.a[2][3]=a1;\n\t\tnow.step++;\n\t\tint z=check(now);\n\t\tif(!book[z]){\n\t\t\tf[z].g=now;\n\t\t\tf[z].last=hh;\n\t\t\tbook[z]=1;\n\t\t\tans[z]=now.step;\n\t\t\tq.push(now);\n\t\t}\n\t\t\n\t\tnow=tem;\n\t\tnum=now.a[1][1];\n\t\tnow.a[1][1]=now.a[1][2];\n\t\tnow.a[1][2]=now.a[1][3];\n\t\tnow.a[1][3]=now.a[2][3];\n\t\tnow.a[2][3]=now.a[3][3];\n\t\tnow.a[3][3]=now.a[3][2];\n\t\tnow.a[3][2]=now.a[3][1];\n\t\tnow.a[3][1]=now.a[2][1];\n\t\tnow.a[2][1]=num;\n\t\tnow.step++;\n\t\tz=check(now);\n\t\tif(!book[z]){\n\t\t\tf[z].g=now;\n\t\t\tf[z].last=hh;\n\t\t\tbook[z]=1;\n\t\t\tans[z]=now.step;\n\t\t\tq.push(now);\n\t\t}\n\t}\n}\n\nint main(){\n\tpre();\n\tnode getin;\n\tfor(int i=1;i<=3;++i)for(int j=1;j<=3;++j)scanf(\"%d\",&getin.a[i][j]);\n\tint ss=check(getin),k;\n\tif(book[ss]){\n\t\tprintf(\"%d\\n\",ans[ss]);\n\t\tk=ss;\n\t\tfor(int i=0;i<=ans[ss];++i){\n\t\t\tfor(int i=1;i<=3;++i){\n\t\t\t\tfor(int j=1;j<=3;++j){\n\t\t\t\t\tprintf(\"%d \",f[k].g.a[i][j]);\n\t\t\t\t}\n\t\t\t\tprintf(\"\\n\");\n\t\t\t}\n\t\t\tprintf(\"\\n\");\n\t\t\tk=f[k].last;\n\t\t}\n\t} \n\telse printf(\"UNSOLVABLE\\n\");\n\treturn 0;\n}\n```",
        "postTime": 1539042866,
        "uid": 103198,
        "name": "qiianr",
        "ccfLevel": 0,
        "title": "P2578 [ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f"
    },
    {
        "content": "\u7adf\u7136\u6ca1\u6709C++\u7684\u9898\u89e3\u4e48\n\n\u6765\u4e00\u4e2aC++\u7684\u9898\u89e3...\n\n\u8fd9\u9053\u9898\u2026\u2026\u611f\u89c9&\u7ec6\u8282\u5404\u79cd\u9519\n\n\u9996\u5148\u8fd9\u4e2a\u8f93\u51fa\u72b6\u6001\u5f88\u9ebb\u70e6...\n\n\u4ece\u521d\u59cb\u72b6\u6001\u5230\u672b\u72b6\u6001\u662f\u4e00\u68f5\u6811\n\n\u4ece\u6839\u8282\u70b9\u641c\u5b50\u53f6\u8981\u9012\u5f52\u5f88\u9ebb\u70e6\n\n\u6240\u4ee5\u89e3\u51b3\u65b9\u6848\u6709\u4e24\u79cd\n\n\u5c06\u8f93\u5165\u72b6\u6001\u5b9a\u4f4d\u672b\u72b6\u6001,\u521d\u72b6\u6001\u4e3a\n\n0 1 2\n3 4 5\n6 7 8\n\u5012\u7740\u641c\n\n\u7136\u540e\u7c7b\u4f3c\n\n```cpp\nwhile(!c)\n{\n    cout<<list[c]; \n    c=list[c];\n}\n```\n\u5f53\u7136\u6211\u4eec\u5b9a\u4e49\u4e3a node list[1000000];\u8f93\u51fa\u6570\u7ec4,\n\u597d\u50cf\u662f\u4e2a\u94fe\u8868\u5427...\uff08\u8fd8\u662f\u4e00\u68f5\u6811,,\u8fd8\u662f\u5565\u94fe\u8868\u6811,,\u50bb\u50bb\u5206\u4e0d\u6e05\u554a\uff09\n\n\u5b9a\u4e49\u4e2aprint\u51fd\u6570.\n\n\u7136\u540e,,\u5f53\u7136,,q.tail\u7684\u7236\u8282\u70b9\u5f53\u7136\u662fq.head\u5566\n\n\u4f46\u662fSTL\u7684queue\u597d\u50cf\u4e0d\u652f\u6301\u9171\u7d2b\u5440\n\n\u4e8e\u662f\u5e72\u8106\u624b\u5199\u961f\u5217\n\n\u548cSTL\u7528\u6cd5\u5b8c\u5168\u4e00\u6837\n\n\u7279\u522b\u6ce8\u610f\u7684\u5c31\u662f\u6570\u7ec4\u4e00\u5b9a\u8981\u5f00\u5f97\u8d3c\u5927\n\n\u4e0d\u7136\u65e0\u8f93\u51fa,,\u9b3c\u77e5\u9053\u7279\u4e48\u89811000000\u5440\n\n\u6211\u5f00\u76841000\uff0c\u53ea\u670940\u5206\u5462\uff0c\u90c1\u95f7\u4e86\u534a\u5929\n\n\u8f93\u51fa\u5f53\u7136\u6211\u662f\u7528\u94fe\u8868\u4e86\u5440\n\n\u5982\u679c\u4f1a\u7528\u6307\u9488\u5199\u94fe\u8868\u6700\u597d,,\u8282\u7ea6\u7a7a\u95f4\u548c\u65f6\u95f4\n\n\u5927\u6982\u662f\u8fd9\u4e48\u5199\u5427..\u5fd8\u4e86,\u4e00\u5e74\u6ca1\u7528\u8fc7\u4e86\n\n```cpp\nType*list=new list; \n//\u52a8\u6001\u94fe\u8868\u5efa\u7acb\nType temp=list;\nlist=new Type;\nlist->father=temp;\nscanf(list.data)\n//\u904d\u5386\nwhile(list!=NULL)\n{\n    print(list->data);\n    list=list->father;\n}\n```\n\u54ce\u5440\u2026\u2026\u5e9f\u8bdd\u534a\u5929\u4e86,,\u5176\u5b9e\u6211\u4e5f\u4e0d\u4f1a\n\u4e0b\u9762\u624d\u662f\u91cd\u70b9\n\n```cpp\n#include<iostream>\n#include<cstring>\ntemplate<typename T_queue>                                           //\u6a21\u677f\u7c7b, \nclass queue                                                           //\u53ef\u4ee5\u8bbf\u95ee\u4e0b\u6807\u7684\u961f\u5217 \n{\n```\npublic:\n```cpp\n    queue(){head=1;tail=0;std::memset(data,0,sizeof(data));}\n    void push(T_queue a){data[++tail]=a;}\n    void pop(){if(head<=tail)head++;}\n    T_queue front(){return data[head];}\n    T_queue back(){return data[tail];}\n    bool empty(){return head>tail;}\n    T_queue data[2000000];\n    int tail,head;\n    int father;\n};\ntemplate<typename T_stack>\nclass stack                                                     //\u6808 \n{\n```\npublic:\n```cpp\n    stack(){std::memset(data,0,sizeof(data));tail=0;}\n    void push(T_stack a){data[++tail]=a;}\n    void pop(){if(tail>0)tail--;}\n    bool empty(){return tail==0;};\n    T_stack top(){return data[tail];}\n```\nprivate:\n```cpp\n    T_stack data[2000000];\n    int tail;\n};\nclass node                //\u5f53\u524d\u72b6\u6001\u6700\u5c0f\u6b65\u6570,\u5f53\u524d\u72b6\u6001. \n{\n```\npublic:\n```cpp\n    int a[10],step;\n}s;\n///////////////////////// \nint temp_stack_list[2000000];                                           //temp_Type\u524d\u7f00\u4ee3\u8868Type\u53d8\u91cf\u9884\u5904\u7406\u7528\u7684\u4e34\u65f6\u53d8\u91cf \nint f[]={1,1,2,6,24,120,720,5040,40320,326880},book[1000000];  //\u9636\u4e58\u6253\u8868 \nqueue<node>q;\nstack<int*>list;  //\u7528\u6cd5\u548cSTL\u5b8c\u5168\u4e00\u6837,,\u9664\u4e86\u4e0b\u6807\u8bbf\u95ee \n//////////////////////////\u4ee5\u4e0a\u5b9a\u4e49\u5168\u5c40\u53d8\u91cf \nusing namespace std;\nvoid next(int*a,int i)                         //\u4e24\u79cd\u72b6\u6001\u53d8\u5316\u65b9\u5f0f \n{                                             \n    if(i==1)\n    {\n        int temp_a0=a[0];\n        a[0]=a[3];a[3]=a[6];a[6]=a[7];a[7]=a[8];a[8]=a[5];a[5]=a[2];a[2]=a[1];\n        a[1]=temp_a0;\n        return;\n    }\n    if(i==2)\n    {\n        int temp_a5=a[5];\n        a[5]=a[4];a[4]=a[3];\n        a[3]=temp_a5;\n        return;\n    }\n}\nint inline cantor_expansion(int*a)             //\u5eb7\u62d3\u5c55\u5f00 ,,\u7279\u6b8a\u7684hash\u51fd\u6570 \n{\n    int ans=0;\n    for(int i=0;i<9;i++)\n    {\n        int tmp=0;                   \n        for(int j=i+1;j<9;j++)\n            if(a[i]>a[j])tmp++;\n        ans+=tmp*f[8-i];\n    }\n    return ans;\n}\nvoid print(int*a)                              //\u6253\u5370\u6570\u7ec4 \n{\n    for(int i=0;i<9;i++)\n    {\n        cout<<a[i]<<\" \";\n        if((i+1)%3==0)\n            cout<<endl;    \n    }\n}\nint main()\n{\n    int end=0;\n    for(int i=0;i<9;i++)cin>>s.a[i];\n    if(cantor_expansion(s.a)==0)\n    {\n        cout<<0;\n        return 0;\n    }\n    q.push(s);\n    book[cantor_expansion(s.a)]=1;\n    while(!q.empty())                       //\u88f8\u7684\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u4e5f\u80fd\u8fc7,,\u5176\u4ed6\u7684\u61d2\u5f97\u5199,,\u5acc\u4ee3\u7801\u4e0d\u591f\u957f\u4e48 \n    {\n        for(int i=2;i>0;--i)\n        {\n            node now_status=q.front();\n            next(now_status.a,i);\n            now_status.step=q.front().step+1;\n            if(cantor_expansion(now_status.a)==end)\n            {\n                cout<<now_status.step<<endl;\n                q.push(now_status);\n                temp_stack_list[q.tail]=q.head;\n                int p=q.tail;\n                do\n                {\n                    list.push(q.data[p].a);             //\u5165\u6808,,\u628a\u8f93\u51fa\u987a\u5e8f\u98a0\u5012\u4e0b \n                    p=temp_stack_list[p];\n                }\n                while(p);\n                cout<<endl;\n                print(list.top());\n                list.pop();\n                while(!list.empty())\n                {\n                    cout<<endl<<endl;\n                    print(list.top());                 //\u8f93\u51fa \n                    list.pop();\n                }                \n                return 0;\n            }\n            if(book[cantor_expansion(now_status.a)]==0)\n            {\n                book[cantor_expansion(now_status.a)]=1;\n                q.push(now_status);\n                temp_stack_list[q.tail]=q.head;                     //\u4f2a\u94fe\u8868 \n            }        \n        }\n        q.pop();\n    }\n    cout<<\"UNSOLVABLE\"; \n} \n\n```",
        "postTime": 1502621738,
        "uid": 36507,
        "name": "shijunfeng00",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "# BFS\u7ecf\u5178\u8001\u9898\u3002\u76f8\u4fe1\u4e3b\u8981\u67b6\u6784\u8bb8\u591a\u540c\u5b66~~\u5e94\u8be5~~\u6ca1\u6709\u95ee\u9898~\n\n\u4f46\u662f\u8fd9\u91cc\u6709\u4e00\u4e2a\u95ee\u9898\uff1a\u5224\u91cd\u3002\n\n\u5982\u679c\u7528\u4e00\u822c\u7684\u6807\u8bb0\u6570\u7ec4\uff0c\u663e\u7136MLE\u5566O(9^9)\u81ea\u5df1\u7b97\u4e00\u4e0b~\n\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u7b97\u6cd5\u53ef\u4ee5\u5feb\u901f\u628a\u6392\u5217\u8f6c\u5316\u6210\u6570\u5b57\uff0c\u53eb**\u5eb7\u6258\u5c55\u5f00**\u3002\n\n\u65b9\u6cd5\uff1a\u8bbe\u4e00\u4e2a\u6570\u5217\uff08\u6570\u5217\u4e2d\u7684\u6570\u4e0d\u91cd\u590d\uff09\u4e2d\u7b2ci\u4e2a\u6570\u524d\u9762\u6709Ti\u4e2a\u6570\u6bd4\u4ed6\u5c0f\uff0c\u7136\u540e\u628aTi\u4ee3\u5165\u516c\u5f0fTi\\*(i-1)!,\u628a\u6bcf\u4e2aTi\u52a0\u8d77\u6765\u5c31\u884c\u4e86\u3002\u5177\u4f53\u7684\u5927\u5bb6\u53ef\u4ee5**\u53bb\u767e\u5ea6**~\n\n## \u9644\u4e0a\u6211\u7684\u5947\u602a\u7684\u6ca1\u6709\u51e0\u4e2a\u4eba\u53ef\u4ee5\u770b\u61c2\u7684\u4ee3\u7801~\n\n'''\n```cpp\nuses math;\nvar i,j,k,l,m,n,t,x,y,z,Head,Tail:longint;\nAmpere,Volta,Joule,Watt:array[0..400000]of longint;\nOhm:array[0..8]of longint;\nNewton:array[0..400000,0..8]of longint;//Newton\uff08\u725b\u987f\uff09\u662f\u961f\u5217\u6570\u7ec4\nfunction Cantor(x:longint):longint;//\u5eb7\u6258\u5c55\u5f00\nvar i,j,t:longint;\nbegin\n Cantor:=0;\n for i:=0 to 8 do\n begin\n  t:=0;\n  for j:=0 to i-1 do\n   if Newton[x,i]<Newton[x,j] then inc(t);\n  inc(Cantor,Joule[i]*t);\n end;\nend;\nProcedure Kill(x:longint);\nvar i,j,k:longint;\nbegin\n if Watt[x]<>0 then Kill(Watt[x]);\n for i:=0 to 8 do\n begin\n  write(Newton[x,i]);\n  if (i=2)or(i=5)or(i=8) \n   then writeln\n   else write(' ');\n end;\n if x<>Head then writeln;\nend;\nFunction Ok:boolean;\nvar i:longint;\nbegin\n for i:=0 to 8 do\n  if i<>Newton[Head,i] then exit(false);\n exit(true);\nend;\nprocedure Round;\nvar t,i:longint;\nbegin\n inc(Tail);\n Ampere[Tail]:=Ampere[Head]+1;\n for i:=0 to 8 do Newton[Tail,i]:=Newton[Head,i];\n t:=Newton[Tail,0];\n Newton[Tail,0]:=Newton[Tail,3];\n Newton[Tail,3]:=Newton[Tail,6];\n Newton[Tail,6]:=Newton[Tail,7];\n Newton[Tail,7]:=Newton[Tail,8];\n Newton[Tail,8]:=Newton[Tail,5];\n Newton[Tail,5]:=Newton[Tail,2];\n Newton[Tail,2]:=Newton[Tail,1];\n Newton[Tail,1]:=t;\n t:=Cantor(Tail);\n if Volta[t]=1 then\n begin\n  dec(Tail);\n  exit;\n end;\n Volta[t]:=1;\n Watt[Tail]:=Head;\nend;\nprocedure Change;\nvar t:longint;\nbegin\n inc(Tail);\n Ampere[Tail]:=Ampere[Head]+1;\n for i:=0 to 8 do Newton[Tail,i]:=Newton[Head,i];\n t:=Newton[Tail,3];\n Newton[Tail,3]:=Newton[Tail,5];\n Newton[Tail,5]:=Newton[Tail,4];\n Newton[Tail,4]:=t;\n t:=Cantor(Tail);\n if Volta[t]=1 then\n begin\n  dec(Tail);\n  exit;\n end;\n Volta[t]:=1;\n Watt[Tail]:=Head;\nend;\nbegin\n for i:=0 to 8 do read(Ohm[i]);\n Head:=0;\n Tail:=1;\n Joule[1]:=1;\n Watt[1]:=0;\n for i:=2 to 9 do Joule[i]:=i*Joule[i-1];\n for i:=0 to 8 do Newton[1,i]:=Ohm[i];\n while Head<Tail do\n begin\n  inc(Head);\n  if OK then\n  begin\n   writeln(Ampere[Head]);\n   Kill(Head);\n   halt;\n  end;\n  Round;\n  Change;\n end;\n writeln('UNSOLVABLE');\nend.\n'''\n```",
        "postTime": 1497275527,
        "uid": 34961,
        "name": "\u53d6\u540d\u6700\u70e6",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "#\u4e0b\u9762Pascal\u7684\u6ce8\u91ca\u6bd4\u8f83\u5c11\uff0c\u6709\u70b9\u9ebb\u70e6\uff0c\u6211\u4e5f\u6765\u51d1\u4e2a\u70ed\u95f9#\n\n##ZJOI\u7684\u9898\u4f1a\u662f\u6c34\u9898\uff1f\u597d\u5427\uff0c\u786e\u5b9e\u6709\u70b9\u96be\uff08shui\uff09##\n\n\u5f53\u7136\u6700\u5c0f\u6b21\u6570\u80af\u5b9a\u7528BFS\u30029\u4e2a\u6570\u6700\u591a\u4e5f\u53ea\u4f1a\u51fa\u73b09!\u79cd\u65b9\u6cd5\uff0c400000\u7684\u961f\u5217\u8db3\u591f\u4e86\u3002\u4f46\u662f\u5224\u91cd\u600e\u4e48\u529e\u5462\uff1f\u6570\u7ec4\u5143\u7d20\u5fc5\u987b\u8fde\u7eed\u554a\uff0c\u80af\u5b9a\u4e0d\u80fd\u5f009^9\u7684\u6570\u7ec4\u53bb\u5224\u91cd\u5427\u3002\u8fd9\u91cc\u4ecb\u7ecd\u4e00\u79cd\u7279\u6b8a\u7684\u54c8\u5e0c\uff1a\n\n\u5eb7\u6258\u5c55\u5f00\u3002\u7528\u5eb7\u6258\u5c55\u5f00\u7684\u516c\u5f0f\u80fd\u6c42\u51fa\u4e00\u4e2a\u6392\u5217\u662f\u6240\u6709\u6392\u5217\u4e2d\u7684\u7b2c\u51e0\u4e2a\uff08\u4ece0\u5f00\u59cb\uff09\u3002\u90a3\u4e48012345678\u5c31\u5bf9\u5e940\uff0c876543210\u5c31\u5bf9\u5e94362879\uff0c\u4e00\u5171362880\u4e2a\uff0c\u4e5f\u5c31\u662f9!\u3002\u90a3\u4e48\u5b58\u50a8\u7a7a\u95f4\u5c31\u5927\u5927\u51cf\u5c11\u4e86\u3002\u5176\u4ed6\u5c31\u662f\u88f8\u7684BFS\u4e86\u3002\n\n```cpp\ntype\n  arr=array[0..8]of longint;\nvar\n  q:array[0..400000]of arr;\n  b:array[0..400000]of boolean;\n  pre,s:array[0..400000]of longint;\n  h,t:longint;\nfunction cantor(x:longint):longint; //\u5eb7\u6258\u5c55\u5f00\uff0c\u5bf9q[x]\u8fdb\u884c\u54c8\u5e0c\nvar\n  i,j,k,tmp,ans:longint;\nbegin\n  tmp:=1; ans:=0;\n  for i:=0 to 8 do \n    begin\n      k:=0;\n      for j:=0 to i-1 do \n        if q[x,j]>q[x,i] then inc(k);\n      ans:=ans+k*tmp;\n      tmp:=tmp*(i+1);\n    end;\n  exit(ans);\nend;\nfunction move1():longint; //\u64cd\u4f5c1\uff0c\u987a\u4fbf\u8fd4\u56de\u65b0\u7684\u6392\u5217\u7684\u5eb7\u6258\u5c55\u5f00\nvar\n  tmp:longint;\nbegin\n  inc(t);\n  q[t,0]:=q[h,3];\n  q[t,1]:=q[h,0];\n  q[t,2]:=q[h,1];\n  q[t,3]:=q[h,6];\n  q[t,4]:=q[h,4];\n  q[t,5]:=q[h,2];\n  q[t,6]:=q[h,7];\n  q[t,7]:=q[h,8];\n  q[t,8]:=q[h,5];\n  tmp:=cantor(t);\n  if b[tmp] then begin dec(t); exit; end; //\u5df2\u7ecf\u51fa\u73b0\u8fc7\u4e86\uff0c\u5c31\u5220\u53bb\n  b[tmp]:=true; pre[t]:=h; s[t]:=s[h]+1; //\u5165\u961f\uff0cpre\u8868\u793a\u524d\u4e00\u4e2a\u72b6\u6001\uff0cs\u8868\u793a\u8f6c\u6362\u4e86\u51e0\u6b21\n  exit(tmp);\nend;\nfunction move2():longint; //\u4e0e\u64cd\u4f5c1\u540c\u7406\nvar\n  tmp:longint;\nbegin\n  inc(t); q[t]:=q[h];\n  q[t,3]:=q[h,5];\n  q[t,4]:=q[h,3];\n  q[t,5]:=q[h,4];\n  tmp:=cantor(t);\n  if b[tmp] then begin dec(t); exit; end;\n  b[tmp]:=true; pre[t]:=h; s[t]:=s[h]+1;\n  exit(tmp);\nend;\nprocedure print(x:longint); //\u9012\u5f52\u8f93\u51fa\uff0c\u5229\u7528pre\u6570\u7ec4\nbegin\n  if pre[x]>0 then print(pre[x]);\n  writeln(q[x,0],' ',q[x,1],' ',q[x,2]);\n  writeln(q[x,3],' ',q[x,4],' ',q[x,5]);\n  writeln(q[x,6],' ',q[x,7],' ',q[x,8]);\n  writeln;\nend;\nprocedure bfs();\nvar\n  i:longint;\nbegin\n  fillchar(b,sizeof(b),0);\n  h:=0; t:=1; pre[1]:=0; s[1]:=0;\n  for i:=0 to 8 do read(q[1,i]); //\u521d\u59cb\u72b6\u6001\u8fdb\u961f\u5217\n  b[cantor(1)]:=true; //\u521d\u59cb\u72b6\u6001\u7f6etrue\n  while h<t do \n    begin\n      inc(h);\n      if move1()=0 then begin writeln(s[t]); print(t); exit; end;\n      if move2()=0 then begin writeln(s[t]); print(t); exit; end;\n    end; //\u8fd4\u56de\u503c\u4e5f\u5c31\u662f\u54c8\u5e0c\u503c\u7b49\u4e8e0\uff0c\u8bf4\u660e\u662f0123456789\uff08\u76ee\u6807\u72b6\u6001\uff09\uff0c\u5c31\u8f93\u51fa\n  writeln('UNSOLVABLE'); //\u961f\u5217\u7a7a\u4e86\u8bf4\u660e\u4e0d\u884c\nend;\nbegin\n  bfs();\nend.\n```",
        "postTime": 1504158244,
        "uid": 20561,
        "name": "AutumnKite",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    },
    {
        "content": "\u586b\u4e00\u4e0b\u697c\u4e0a\u53d6\u540d\u6700\u70e6\u540c\u5b66\uff08\u90a3\u4e2a\u6211\u5c31\u4e0d\u8bf4\u771f\u540d\u4e86...\uff09\u57cb\u4e0b\u7684\u5751...\n\n\u5eb7\u6258\u5c55\u5f00...\u7b2c\u4e00\u904d\u770b\u5230\u8fd9\u4e2a\u540d\u79f0\u7684\u65f6\u5019\u6211\u662f\u4e00\u8138\u61f5\u903c\u7684...\uff08\u5eb7\u6258\uff1f\u5eb7\u7199\u51e0\u4e16\u5b59\uff1f)\n\n\u5176\u5b9e\u5b83\u7684\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u538b\u7f29\u5224\u91cd\u91cf...\n\n\u4e3e\u4e2a\u7b80\u5355\u7684\u6817\u5b50...\u6211\u4eec\u8981\u5224\u65ad\u7684\u5185\u5bb9\u5b9e\u8d28\u662f9\u7684\u5168\u6392\u5217...\n\n\u5982\u679c\u76f4\u63a5\u5f00\u6570\u7ec4\u5c31\u662f[123456789..987654321]\uff08\u5f53\u7136\u5982\u679c\u4f60\u5014\u5f3a\u5730\u8981\u4ece0\u5f00\u59cb\u6211\u4e5f\u4e0d\u62e6\u7740...\uff09\n\n\u4e00\u7b978\u4ebf\u591a\uff0c\u70b8\u5185\u5b58...\u9884\u8ba1\u5a01\u529b\u8fbe\u5230\u5b66\u6821\u673a\u623f\u70c2\u6389...\n\n\u6211\u77e5\u9053\u70ed\u7231\u4e16\u754c\u548c\u5e73\u5e76\u4e14\u5e0c\u671b\u6709\u4e2a\u597d\u6210\u7ee9\u7684\u4f60\u4e0d\u4f1a\u613f\u610f\u8fd9\u6837\u5b50\u7684...\n\n\u4ed4\u7ec6\u60f3\u60f3\u5176\u4e2d\u6709\u5f88\u591a\u662f\u6d6a\u8d39\u6389\u7684\uff0c\u6bd4\u5982198307177\u8fd9\u79cd\u6709\u91cd\u590d\u6570\u5b57\u7684\uff0c\u4e0d\u53ef\u80fd\u51fa\u73b0...\n\n\u6240\u4ee5\u5eb7\u6258\u5c55\u5f00\u5c31\u6a2a\u7a7a\u51fa\u4e16\u4e86...\n\n\u516c\u5f0f\u662f\u8fd9\u4e2a\u6837\u5b50...\n\nX=a[n]\\*(n-1)!+a[n-1]\\*(n-2)!+...+a[i]\\*(i-1)!+...+a[2]\\*1!+a[1]\\*0!\n\n\u5b83\u6c42\u5f97\u7684\u5b9e\u9645\u4e0a\u662f\u67d0\u4e2a\u6392\u5217\u6570\u7684\u7f16\u53f7...\n\n\u6bd4\u5982123456789\u5bf9\u5e94\u7684\u662f0\uff0c123456798\u5bf9\u5e94\u7684\u662f1\uff0c987654321\u5bf9\u5e94\u7684\u662f362879...\n\n\u8fd9\u6837\u7684\u8bdd\u5c31\u5269\u4e0b9!=362880\u79cd\uff0c\u5b58\u50a8\u7a7a\u95f4\u8fd8\u53ef\u4ee5\u7559\u4e00\u90e8\u5206\u7ed9\u4f60\u4f4f...\uff08\u5f00\u73a9\u7b11...\uff09\n\n\u5177\u4f53\u539f\u7406\u8ddf\u90a3\u4e2aNOIP2014\u666e\u53ca\u7b2c\u56db\u9898\u7684\u706b\u661f\u4eba\u4e2d\u201c\u6c42\u4e0b\u4e00\u4e2a\u6392\u5217\u6570\u201d\u7c7b\u4f3c...\n\n\u5eb7\u6258\u5c55\u5f00\u5c31\u662f\u628a\u90a3\u4e00\u9898\u5012\u4e86\u4e00\u4e0b\uff0c\u4ece\u6c42\u7b2cn\u4e2a\u6392\u5217\u6570\u53d8\u6210\u4e86\u6c42\u67d0\u4e2a\u6392\u5217\u6570\u662f\u7b2c\u51e0\u4e2a...\n\n\u7a0b\u5e8f\u8fd9\u4e2a\u6837\u5b50\u7684...\u90a3\u4e2a\u6211P\u515a...\n\n\n\n```cpp\nfunction Joker(s:array[1..9]of longint):longint;\nvar i,j,t:longint;\nbegin\n Joker:=0;\n for i:=2 to 9 do\n  begin\n\u3000\u3000t:=0;\n\u3000\u3000for j:=1 to i-1 do\n\u3000\u3000 if s[i]>s[j] then inc(t);\n\u3000\u3000for j:=2 to i-1 do t:=t*j;\n\u3000\u3000inc(Joker,t);\n  end;\nend;\n```\n\u521d\u5b66\u8005\u5efa\u8bae\u624b\u7b97\u51e0\u4e2a\u6392\u5217\u6570\u8bd5\u8bd5\u770b...\u6709\u52a9\u4e8e\u7406\u89e3...\n\u6211\u5e9f\u8bdd\u53ef\u80fd\u6709\u70b9\u591a...\u8c22\u8c22\u4f60\u4eec\u5fcd\u7740\u770b\u5230\u8fd9\u91cc...\n",
        "postTime": 1497707302,
        "uid": 24716,
        "name": "Beginner_df016",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P2578 \u3010[ZJOI2005]\u4e5d\u6570\u7801\u6e38\u620f\u3011"
    }
]
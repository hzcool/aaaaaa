[
    {
        "content": "\u9898\u76ee\u4f20\u9001\u95e8\uff1a[P8756 [\u84dd\u6865\u676f 2021 \u7701 AB2] \u56fd\u9645\u8c61\u68cb](https://www.luogu.com.cn/problem/P8756)\u3002\n# \u601d\u8def\n\u8fd9\u9053\u9898\u7531\u4e8e $1 \\le N \\le 6$ \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u4e00\u5217\u7684\u72b6\u6001\u7528 $0$ \u6216 $1$ \u8868\u793a\uff0c\u6ca1\u653e\u9a6c\u6216\u653e\u9a6c\uff0c\u4e8e\u662f\u6211\u4eec\u5c31\u60f3\u5230\u4e86**\u72b6\u6001\u538b\u7f29 dp**\u3002\n\n**\u72b6\u6001\u8bbe\u8ba1**:\n\n$x$ \u4e3a\u8fd9\u4e00\u5217\u7684\u60c5\u51b5\uff0c$y$ \u4e3a\u4e0a\u4e00\u5217\u7684\u60c5\u51b5\uff0c$z$ \u4e3a\u4e0a\u4e0a\u5217\u7684\u60c5\u51b5\uff0c$get(x)$ \u8868\u793a $x$ \u72b6\u6001\u4e2d\u9a6c\u7684\u4e2a\u6570\uff0c$f_{i,j,x,y} $ \u8868\u793a\u7b2c $i$ \u5217\u653e\u4e86 $j$ \u4e2a\u9a6c\u4e14\u5f53\u524d\u5217\u7684\u60c5\u51b5\u4e3a $x$ \uff0c\u4e0a\u4e00\u5217\u4e3a $y$ \u7684\u65b9\u6848\u6570\u3002\n\n**\u72b6\u6001\u521d\u59cb\u5316**\uff1a\n\n$f_{0,0,0,0}=1$ \u4e00\u5f00\u59cb\u5c31\u6709\u4e00\u79cd\u60c5\u51b5\u3002\n\n**\u6c42\u9a6c\u7684\u4e2a\u6570**\uff1a\n\n\u5176\u5b9e\u5c31\u662f\u6c42\u4e8c\u8fdb\u5236\u4e2d $1$ \u7684\u4e2a\u6570\uff0c\u968f\u4fbf\u600e\u4e48\u5199\u90fd\u53ef\u4ee5\u3002\n```cpp\nint get(int x){\n\tint ans=0;\n\twhile(x) ans++,x&=x-1;\n\treturn ans;\n}\n```\n\n**\u5224\u65ad\u662f\u5426\u4e92\u76f8\u653b\u51fb**\uff1a\n\n1. \u8fd9\u4e00\u5217\u4e0e\u4e0a\u4e00\u5217\u5224\u65ad\uff1a \n\n```\n*    *\n2    *\n*    *\n*    1\n*    *\n2    *\n*    *\n```\n\n\u5982\u4e0a\u56fe\uff0c\u6807\u8bb0\u4e3a $1$ \u7684\u662f\u9a6c\u7684\u4f4d\u7f6e\uff0c\u6807\u8bb0\u4e3a $2$ \u7684\u662f\u5b83\u7684\u653b\u51fb\u8303\u56f4\uff0c\u6240\u4ee5\u53ea\u8981\u901a\u8fc7\u5de6\u79fb\u4e24\u4f4d\u548c\u53f3\u79fb\u4e24\u4f4d\u6765\u5224\u65ad\u662f\u5426\u4e92\u76f8\u653b\u51fb\u3002\n\n\u6240\u4ee5\u5224\u65ad\u65b9\u6cd5\u4e3a\uff1a\n\n```cpp\nif (x&(y<<2)||x&(y>>2)) continue;\n```\n2. \u8fd9\u4e00\u5217\u4e0e\u4e0a\u4e0a\u5217\u5224\u65ad\uff1a\n\n```\n*    *    *\n*    *    *\n2    *    *\n*    *    1\n2    *    *\n*    *    *\n*    *    *\n```\n\u5982\u56fe\uff0c\u6807\u8bb0\u4e3a $1$ \u7684\u662f\u9a6c\u7684\u4f4d\u7f6e\uff0c\u6807\u8bb0\u4e3a $2$ \u7684\u662f\u5b83\u7684\u653b\u51fb\u8303\u56f4\uff0c\u6240\u4ee5\u53ea\u8981\u901a\u8fc7\u5de6\u79fb\u4e00\u4f4d\u548c\u53f3\u79fb\u4e00\u4f4d\u6765\u5224\u65ad\u662f\u5426\u4e92\u76f8\u653b\u51fb\u3002\n\n\u6240\u4ee5\u5224\u65ad\u7684\u65b9\u6cd5\u4e3a\uff1a\n```cpp\nif (x&(z<<1)||x&(z>>1)) continue;\n```\n\n**\u65b9\u7a0b\u8f6c\u79fb**\uff1a\n\n\u9996\u5148\u6211\u4eec\u9700\u8981\u679a\u4e3e $j$ ,\u8303\u56f4\u5c31\u662f $get(x)+get(y)+get(z)$ \u4e00\u76f4\u5230 $K$\u3002\u65b9\u7a0b\u7684\u8f6c\u79fb\u5c31\u53ef\u4ee5\u8f7b\u677e\u5199\u51fa\u6765\u4e86\uff0c\u5c31\u662f\u52a0\u4e0a\uff0c\u4e0a\u4e00\u5217\u53bb\u6389\u8fd9\u4e00\u5217\u9a6c\u7684\u4e2a\u6570\u5373 $f_{i-1,j-get(x),y,z}$\u3002\n\n\u6240\u4ee5\u6700\u540e\u7684\u65b9\u7a0b\u5c31\u662f $f_{i,j,x,y}=f_{i,j,x,y}+f_{i-1,j-get(x),y,z}$\u3002\n\n\u6240\u4ee5\u6700\u540e\u7684\u7b54\u6848\u4e3a\u6240\u6709\u72b6\u6001\u7684\u603b\u548c\uff0c\u5373\uff1a$ans=ans+f_{m,k,i,j}$\u3002$i$ \u548c $j$ \u662f\u6240\u6709\u72b6\u6001\u3002\n\n**\u603b\u4f53\u601d\u8def**\uff1a\n\n\u5148\u6bcf\u4e00\u5217\u679a\u4e3e\uff0c\u518d\u679a\u4e3e\u8fd9\u4e00\u5217\u72b6\u6001\uff0c\u4e0a\u4e00\u5217\u72b6\u6001\uff0c\u5224\u65ad\u662f\u5426\u4e92\u76f8\u653b\u51fb\uff0c\u4e4b\u540e\u518d\u679a\u4e3e\u4e0a\u4e0a\u5217\u7684\u72b6\u6001\uff0c\u5224\u65ad\u662f\u5426\u4e92\u76f8\u653b\u51fb\uff0c\u6700\u540e\u8f6c\u79fb\u5373\u53ef\u3002\n\n\u6700\u540e\u4e00\u5b9a\u8981\u8bb0\u4f4f**\u9898\u76ee\u8981\u53d6\u6a21**\u3002\n# \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int mod=1000000007;\nint f[101][21][1<<6][1<<6];\nint get(int x){\n\tint ans=0;\n\twhile(x) ans++,x&=x-1;\n\treturn ans;\n}\nmain(){\n\tint n,m,k;\n\tcin>>n>>m>>k;\n\tf[0][0][0][0]=1;\n\tfor (int i=1;i<=m;i++)//\u679a\u4e3e\u6bcf\u4e00\u5217\n\t\tfor (int x=0;x<(1<<n);x++)//\u679a\u4e3e\u8fd9\u4e00\u5217\n\t\t\tfor (int y=0;y<(1<<n);y++){//\u679a\u4e3e\u4e0a\u4e00\u5217\n\t\t\t\tif (x&(y<<2)||x&(y>>2)) continue;\n\t\t\t\tfor (int z=0;z<(1<<n);z++){//\u679a\u4e3e\u4e0a\u4e0a\u5217\n\t\t\t\t\tif (y&(z<<2)||y&(z>>2)) continue;\n\t\t\t\t\tif (x&(z<<1)||x&(z>>1)) continue;\n\t\t\t\t\tint t=get(x)+get(y)+get(z);\n\t\t\t\t\tfor (int j=t;j<=k;j++)//\u65b9\u7a0b\u8f6c\u79fb\n\t\t\t\t\t\tf[i][j][x][y]=(f[i][j][x][y]+f[i-1][j-get(x)][y][z])%mod;\n\t\t\t\t}\n\t\t\t}\n\tint ans=0;\n\tfor (int i=0;i<(1<<n);i++)\n\t\tfor (int j=0;j<(1<<n);j++)\n\t\t\tans+=f[m][k][i][j],ans%=mod;\n\tcout <<ans;\n    return 0;\n}\n\n```\n",
        "postTime": 1671882490,
        "uid": 658198,
        "name": "gesong",
        "ccfLevel": 4,
        "title": "P8756 [\u84dd\u6865\u676f 2021 \u7701 AB2] \u56fd\u9645\u8c61\u68cb \u9898\u89e3"
    },
    {
        "content": "### \u601d\u8def\n\u7b2c\u4e00\u773c\u60f3\u5230\u52a8\u6001\u89c4\u5212\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u9053\u9898\u6570\u636e\u5341\u5206\u5c0f\uff0c\u8003\u8651\u4f7f\u7528\u72b6\u6001\u538b\u7f29\u3002\n\n$f_{i,a,b,k}$ \u6570\u7ec4 $i$ \u4e3a\u7b2c\u591a\u5c11\u884c\uff0c$a$ \u4e3a\u7b2c $i-1$ \u884c\u7684\u72b6\u6001\uff0c\u7b2c $i$ \u884c\u4e2d\u72b6\u6001\u4e3a $b$ \u7684\u65b9\u6848\u6570\uff0c\u6700\u7ec8\u65b9\u6848\u6570\u662f $f_{m,i,j,k}$ \u7684\u548c\u3002\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\u6211\u4eec\u5728\u5faa\u73af\u7684\u65f6\u5019\u6ce8\u610f\u8981\u5224\u65ad\uff0c$a$ \u4e0e $b$ \u7684\u72b6\u6001\u662f\u5426\u51b2\u7a81\u4e86\uff0c\u6ca1\u6709\u5c31\u518d\u4e00\u6b21\u5224\u65ad $i$ \u7684\u72b6\u6001\u662f\u5426\u4e0e $a$ \u548c $b$ \u7684\u72b6\u6001\u540c\u65f6\u51b2\u7a81\uff0c\u6ca1\u6709\u5c31\u8ba1\u7b97\u53ef\u4ee5\u6446\u653e\u7684\u68cb\u5b50\u6570\u3002\n\n### \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int MOD=1e9+7;\nint n,m,k;\nint ans;\nint f[101][1<<6][1<<6][21];\n//f[i][a][b][k] \u7b2ci-1\u884c\u72b6\u6001\u4e3aa\uff0c\u7b2ci\u884c\u72b6\u6001\u4e3ab\uff0c\u6b64\u65f6\u6709k\u4e2a\u68cb\u5b50\u7684\u65b9\u6848\u6570\nint count(int x){\n    int res=0;\n    while(x){\n        res++;\n        x-=x&-x;\n    }\n    return res;\n}\nint main(){\n    cin>>n>>m>>k;\n    f[0][0][0][0]=1;\n    for(int i=1;i<=m;i++){\n        for(int a=0;a<1<<n;a++){\n            for(int b=0;b<1<<n;b++){\n                if(a&(b<<2)||b&(a<<2)) continue;\n                for(int c=0;c<1<<n;c++){\n                    //\u5224\u65ad\u7b2ci\u884c\u662f\u5426\u4e0e\u524d\u4e24\u884c\u51b2\u7a81\n                    if(c&(a<<1)||a&(c<<1)) continue;\n                    if(c&(b<<2)||b&(c<<2)) continue;\n                    //\u8ba1\u7b97\u7b2ci\u884c\u6709\u591a\u5c11\u4e2a\u68cb\u5b50\n                    int t=count(c);\n                    for(int j=t;j<=k;++j){\n                        f[i][b][c][j]=(f[i][b][c][j]+f[i-1][a][b][j-t])%MOD;\n                    }\n                }\n            }\n        }\n    }\n \n    for(int i=0;i<1<<n;i++){\n        for(int j=0;j<1<<n;j++){\n            ans=(ans+f[m][i][j][k])%MOD;\n        }\n    }\n    cout<<ans<<endl;\n    return 0;\n}\n```",
        "postTime": 1683789134,
        "uid": 651908,
        "name": "8NewOC",
        "ccfLevel": 0,
        "title": "P8756 [\u84dd\u6865\u676f 2021 \u7701 AB2] \u56fd\u9645\u8c61\u68cb"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f\n\n\u516b\u7687\u540e\u95ee\u9898\uff0c\u4e0d\u8fc7\u8fd9\u91cc\u7684\u7687\u540e\u662f\u9a6c\uff0c\u8d70\u65e5\u5b57\u3002\u6c42\u65b9\u6848\u6570\u3002\n\n------------\n## \u601d\u8def\n\n\u72b6\u6001\u538b\u7f29\u3002\u6ce8\u610f\u5230 $n$ \u5f88\u5c0f\uff0c\u6211\u4eec\u5c31\u538b\u7f29\u6bcf\u4e00\u5217\u7684\u72b6\u6001\uff0c\u7528 $1$ \u8868\u793a\u6709\u9a6c\uff0c\u5426\u5219\u6ca1\u6709\u3002\n\n\u7531\u4e8e\u524d\u4e24\u884c\u7684\u72b6\u6001\u90fd\u4f1a\u5f71\u54cd\u5230\u8fd9\u4e00\u5217\u7684\u72b6\u6001\uff08\u524d\u4e24\u5217\u7684\u9a6c\u90fd\u53ef\u4ee5\u5403\u5230\u8fd9\u4e00\u5217\u7684\u9a6c\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u7edf\u8ba1\u65b9\u6848\u6570\u65f6\u8981\u8bb0\u5f55\u524d\u4e24\u884c\u7684\u72b6\u6001\u3002\n\n\u6211\u4eec\u7528 $f_{i,s_1,s_2,k}$ \u8868\u793a\u5f53\u524d\u8003\u8651\u7684\u662f\u7b2c $i$ \u884c\uff0c\u8fd9\u4e00\u884c\u7684\u72b6\u6001\u662f $s_1$\uff0c\u4e0a\u4e00\u884c\u7684\u72b6\u6001\u662f $s_2$\uff0c\u5f53\u524d\u4e00\u5171\u653e\u4e86 $k$ \u4e2a\u9a6c\u3002\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u5e76\u4e0d\u80fd\u76f4\u63a5\u5f97\u77e5\u4e0e\u5f53\u524d $s_1,s_2$ \u76f8\u5339\u914d\u7684 $k$\uff0c\u4f46\u9898\u76ee\u4e2d\u7ed9\u5b9a\u7684 $k$ \u5f88\u5c0f\uff0c\u540c\u6837\u53ef\u4ee5\u679a\u4e3e\u3002\u4e8e\u662f\u6211\u4eec\u6709\u5982\u4e0b\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$$f_{i,s_1,s_2,k+\\text{cnt}(s_1)}=f_{i,s_1,s_2,k+\\text{cnt}(s_1)}+f_{i-1,s_2,s_3,k}$$\n\n\u5176\u4e2d\uff0c$k$ \u662f\u4e0a\u6587\u63d0\u5230\u7684\u679a\u4e3e\u7684 $k$\uff0c$\\text{cnt}(s_1)$ \u8868\u793a $s_1$ \u8fd9\u4e2a\u72b6\u6001\u4e2d\u9a6c\u7684\u6570\u91cf\uff0c$s_1,s_2,s_3$ \u662f\u5408\u6cd5\u7684\u8fde\u7eed\u4e09\u884c\u7684\u72b6\u6001\u3002\n\n\u5982\u4f55\u5224\u65ad\u8fd9\u4e09\u4e2a\u72b6\u6001\u5408\u4e0d\u5408\u6cd5\u5462\uff1f\u9a6c\u53ef\u4ee5\u8c03\u5230\u4e0a\u4e00\u5217\u7684\u5411\u5de6\u5411\u53f3\u5206\u522b\u4e24\u884c\u7684\u4f4d\u7f6e\u6216\u8c03\u5230\u4e0a\u4e0a\u5217\u7684\u5411\u5de6\u5411\u53f3\u5206\u522b\u4e24\u884c\u7684\u4f4d\u7f6e\uff0c\u6240\u4ee5\u6211\u4eec\u628a $s_2$ \u5de6\u79fb\u3001\u53f3\u79fb\u4e24\u4f4d\uff0c$s_1$ \u5de6\u79fb\u3001\u53f3\u79fb\u4e00\u4f4d\u5224\u65ad\u5373\u53ef\u3002\u5177\u4f53\u5982\u4e0b\uff1a\n\n```cpp\nbool pd(int s1, int s2, int s3) {\n\treturn (s1 & (s2 << 2) || s1 & (s2 >> 2) || s1 & (s3 << 1) || s1 & (s3 >> 1) || s2 & (s3 << 2) || s2 & (s3 >> 2));\n}\n```\n\n\u5728\u7b2c\u4e00\u5217\uff0c\u7531\u4e8e\u9a6c\u65e0\u6cd5\u653b\u51fb\u540c\u4e00\u5217\u7684\u9a6c\uff0c\u6240\u4ee5\u600e\u4e48\u653e\u90fd\u662f\u5408\u6cd5\u7684\uff0c\u7279\u5224\u5373\u53ef\u3002\u5728\u6700\u540e\u7edf\u8ba1\u7b54\u6848\u65f6\u5bf9\u6240\u6709\u5408\u6cd5\u7684 $s_1,s_2$ \u90fd\u8981\u7d2f\u8ba1\u3002\n\n\u603b\u590d\u6742\u5ea6 $O(mk2^{3n})$\uff0c\u53ef\u8fc7\u3002\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u72b6\u6001\u7684\u9a6c\u7684\u6570\u91cf\u5148\u8bb0\u5f55\u4e0b\u6765\u8282\u7701\u65f6\u95f4\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#define Strelitzia_H 0\nint n, m, k, f[101][1 << 6][1 << 6][21], cnt[1 << 6], ans;\nbool pd(int s1, int s2, int s3) {\n\treturn (s1 & (s2 << 2) || s1 & (s2 >> 2) || s1 & (s3 << 1) || s1 & (s3 >> 1) || s2 & (s3 << 2) || s2 & (s3 >> 2));\n}\nint getcnt(int nows) {\n\tint nowcnt = 0;\n\twhile (nows) nowcnt += (nows & 1), nows >>= 1;\n\treturn nowcnt;\n}\nsigned main() {\n\tn = read(), m = read(), k = read();\n\tfor (int i = 0; i < (1 << n); i++) cnt[i] = getcnt(i);\n\tfor (int i = 0; i < (1 << n); i++) if (cnt[i] <= k) f[1][i][0][cnt[i]] = 1;\n\tfor (int s1 = 0; s1 < (1 << n); s1++) for (int s2 = 0; s2 < (1 << n); s2++)\n\t\t\tif (!pd(s1, s2, 0) && cnt[s1] + cnt[s2] <= k)\n\t\t\t\tf[2][s1][s2][cnt[s1] + cnt[s2]] = (f[2][s1][s2][cnt[s1] + cnt[s2]] + f[1][s2][0][cnt[s2]]) % mod3;\n\tfor (int i = 3; i <= m; i++)\n\t\tfor (int s1 = 0; s1 < (1 << n); s1++)\n\t\t\tfor (int s2 = 0; s2 < (1 << n); s2++)\n\t\t\t\tfor (int s3 = 0; s3 < (1 << n); s3++) {\n\t\t\t\t\tif (pd(s1, s2, s3) || cnt[s1] + cnt[s2] + cnt[s3] > k) continue;\n\t\t\t\t\tfor (int nowk = cnt[s2] + cnt[s3]; nowk + cnt[s1] <= k; nowk++)\n\t\t\t\t\t\tf[i][s1][s2][nowk + cnt[s1]] = (f[i][s1][s2][nowk + cnt[s1]] + f[i - 1][s2][s3][nowk]) % mod3;\n\t\t\t\t}\n\tfor (int s1 = 0; s1 < (1 << n); s1++) for (int s2 = 0; s2 < (1 << n); s2++)\n\t\t\tans = (ans + f[m][s1][s2][k]) % mod3;\n\treturn printf(\"%lld\", ans), Strelitzia_H;\n}\n```",
        "postTime": 1671542200,
        "uid": 676638,
        "name": "Strelitzia_",
        "ccfLevel": 4,
        "title": "P8756 \u9898\u89e3"
    }
]
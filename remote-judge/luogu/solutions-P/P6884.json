[
    {
        "content": "[link](https://www.luogu.com.cn/problem/P6884)\n\n\u9996\u5148\u4e00\u4e2a\u91cd\u8981\u7ed3\u8bba\u662f\uff0c\u7531\u4e8e\u8fd9\u4e2a\u5f0f\u5b50\u4e2d\u6240\u6709\u53c2\u6570\u7684\u53d6\u503c\u8303\u56f4\u90fd\u662f\u4efb\u610f\u5b9e\u6570\uff0c\u6240\u4ee5\u4efb\u610f\u4e00\u4e2a\u5f0f\u5b50\u7684\u53d6\u503c\u90fd\u5e94\u8be5\u662f\u8fde\u7eed\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u5047\u5982\u4e00\u4e2a\u5f0f\u5b50\u7684\u6700\u5927\u53d6\u503c\u4e3a $X$\uff0c\u5219 $\\forall x\\in[0,X]$ \u90fd\u662f\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u4e00\u4e9b\u53c2\u6570\u7684\u503c\u5f97\u5230\u7684\uff0c\u8fd9\u6837\u4e00\u6765\u5173\u4e8e\u4e00\u4e2a\u4eba\u7c7b\u9ad8\u8d28\u91cf\u67ff\u5b50\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\u5b83\u53ef\u80fd\u7684\u6700\u5927\u503c\u5c31\u53ef\u4ee5\u77e5\u9053\u5b83\u6240\u6709\u53ef\u80fd\u7684\u53d6\u503c\u3002\n\n\u4f46\u6700\u5927\u503c\u5982\u4f55\u6c42\u5462\uff1f\u5982\u679c\u662f\u548c\u7684\u5f62\u5f0f\u90a3\u5f88\u7b80\u5355\uff0c\u76f4\u63a5\u628a\u8fd9\u4e2a\u5f0f\u5b50\u4e2d\u6240\u6709\u90e8\u5206\u7684\u6700\u5927\u503c\u52a0\u8d77\u6765\uff0c\u7136\u540e\u548c limit \u53d6\u8f83\u5c0f\u503c\u5373\u53ef\uff0c\u56e0\u4e3a\u6839\u636e\u4e0a\u9762\u7684\u7ed3\u8bba\uff0c\u5047\u5982\u548c\u5927\u4e8e\u4e86 limit\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u5f0f\u5b50\u7684\u53c2\u6570\u4f7f\u5f97\u5b83\u7684\u503c\u53d8\u5f97\u5c0f\u4e00\u4e9b\u7136\u540e\u4f7f\u5f97\u6574\u4e2a\u5927\u5f0f\u5b50\u7684\u503c\u521a\u597d\u7b49\u4e8e limit\u3002\n\n\u90a3\u4e58\u7684\u5f62\u5f0f\u600e\u4e48\u529e\u5462\uff1f\u5c0f\u5b66\u5965\u6570\u8bf4\u8fc7\u548c\u5b9a\u5dee\u5c0f\u79ef\u5927\uff0c\u4e5f\u5c31\u662f $a\\times b\\le(\\frac{a+b}{2})^2$ \uff0c\u4e14\u5f53 $a=b$ \u65f6\u53ef\u4ee5\u53d6\u5230\u7b49\u53f7\u3002\u4e8e\u662f\u53ef\u4ee5\u63a8\u800c\u5e7f\u4e4b\u5f97\u5230 $\\prod\\limits_{i=1}^Na_i\\le(\\frac{\\sum a_i}{N})^N$\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2a\u4e58\u79ef\u5f0f\u5404\u9879\u7684\u548c\u786e\u5b9a\u4e4b\u540e\uff0c\u8fd9\u4e9b\u9879\u8d8a\u63a5\u8fd1\u6700\u540e\u7684\u4e58\u79ef\u4e5f\u5c31\u8d8a\u5927\uff0c\u6392\u5e8f\u4e4b\u540e\u9009\u62e9\u5373\u53ef\u3002\n\n\n\u4e2a\u4eba\u7528\u7684\u9012\u5f52\u5199\u6cd5\uff0c\u4eba\u50bb\u5e38\u719f\u5927\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002\n\n```cpp\n#include<bits/stdc++.h>\n//#define feyn\nconst int N=1000010;\nconst int M=100;\nusing namespace std;\ninline void read(int &wh){\n    wh=0;int f=1;char w=getchar();\n    while(w<'0'||w>'9'){if(w=='-')f=-1;w=getchar();}\n    while(w<='9'&&w>='0'){wh=wh*10+w-'0';w=getchar();}\n    wh*=f;return;\n}\ninline double min(double s1,double s2){\n\treturn s1<s2?s1:s2;\n}\n\nstack<int>st;\nint m,len,a[M],pl[N];\nchar w[N];\n\ninline double f(int l,int r){//\u8fd4\u56de\u4e00\u4e2a\u533a\u95f4\u5bf9\u5e94\u7684\u9ad8\u8d28\u91cf\u67ff\u5b50\u7684\u6700\u5927\u53d6\u503c\n\tif(l==r)return a[1];//\u5982\u679c\u62ec\u53f7\u4e2d\u53ea\u6709\u4e00\u4e2a\u6570\u76f4\u63a5\u53cd\u6094limit \n\tint n=0;double data[M];//\u8bb0\u5f55\u8fd9\u4e2a\u533a\u95f4\u5185\u6240\u6709\u67ff\u5b50\u7684\u6700\u5927\u503c \n\tchar op;\n\tfor(int i=l;i<=r;i++){\n\t\tif(w[i]=='(')data[++n]=f(i+1,pl[i]-1),i=pl[i];\n\t\telse op=w[i];//\u8bb0\u5f55\u8fd9\u4e9b\u67ff\u5b50\u7528\u4ec0\u4e48\u7b26\u53f7\u8fde\u63a5 \n\t}\n\tif(n==1)return data[1];\n\tif(op=='+'){\n\t\tdouble sum=0;\n\t\tfor(int i=1;i<=n;i++)sum+=data[i];\n\t\treturn min(a[n],sum);//\u5982\u4e0a\u6587\uff0c\u8fd4\u56de\u548c\u548climit\u7684\u8f83\u5c0f\u503c \n\t}\n\tif(op=='*'){\n\t\tdouble ava,ans=1,sum=a[n];\n\t\tsort(data+1,data+n+1);//\u4ece\u5c0f\u5230\u5927\u8d2a\u5fc3\u9009\u62e9 \n\t\tint pl=1;\n\t\twhile(pl<=n){\n\t\t\tava=sum/(n-pl+1);\n\t\t\tif(ava<=data[pl]){\n\t\t\t\tfor(;pl<=n;pl++)ans*=ava;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tfor(;pl<=n;pl++){\n\t\t\t\tif(data[pl]<=ava)ans*=data[pl],sum-=data[pl];\n\t\t\t\telse break;\n\t\t\t}\n\t\t}\n\t\treturn ans;//\u8fd4\u56de\u5373\u53ef \n\t}\n}\n\nsigned main(){\n\t\n\t#ifdef feyn\n\tfreopen(\"in.txt\",\"r\",stdin);\n\t#endif\n\t\n\tread(m);\n\tfor(int i=1;i<=m;i++)read(a[i]);\n\tscanf(\"%s\",w+1);len=strlen(w+1);\n\tfor(int i=1;i<=len;i++){\n\t\tif(w[i]=='(')st.push(i);\n\t\tif(w[i]==')')pl[st.top()]=i,st.pop();\n\t\t//\u9884\u5904\u7406\u51fa\u6bcf\u4e2a\u5de6\u62ec\u53f7\u5bf9\u5e94\u53f3\u62ec\u53f7\u7684\u4f4d\u7f6e \n\t}\n\tprintf(\"%f\\n\",f(1,len));\n\t\n\treturn 0;\n}\n```",
        "postTime": 1659054597,
        "uid": 302383,
        "name": "Feyn",
        "ccfLevel": 0,
        "title": "P6884"
    },
    {
        "content": "### \uff08\u7b2c\u4e00\u6b21\u53d1\u9898\u89e3\uff0c\u505a\u7684\u4e0d\u597d\u8bf7\u591a\u8c05\u89e3)  \n\u800c\u4e14\u9898\u76ee\u6709\u70b9\u5c0f\u9519\u8bef\uff0c\u7c97\u4f53\u8868\u793a\u5927\u5c0f\u5173\u7cfb\u7684\u8bcd\u90fd\u5e94\u8be5\u662f**\u5c0f\u4e8e\u7b49\u4e8e**\u3002\n\n------------\n\n### \u9996\u5148\u6211\u4eec\u8981\u63a2\u8ba8\u4e0b\u5982\u4f55\u5f97\u5230\u6bcf\u4e00\u4e2a\u6709\u8d28\u91cf\u7684\u7b97\u672f\u8868\u8fbe\u5f0f\u7684\u6700\u5927\u503c  \n'+' \u7ec4\u6210\u7684\u8868\u8fbe\u5f0f\u7b80\u5355  \n\u4e00\u4e2a\u7531 '+' \u7ec4\u6210\u7684\u8868\u8fbe\u5f0f: $ X=(x_1 + x_2 + ... + x_n) $  \n\u8868\u8fbe\u5f0f X \u6700\u5927\u503c\u5c31\u662f\u6240\u6709\u88ab\u5305\u542b\u8868\u8fbe\u5f0f $x$ \u7684\u6700\u5927\u503c\u7684\u548c\u4e0e\u5f53\u524d\u8868\u8fbe\u5f0f\u7684\u9650\u5236\u6700\u5927\u503c $z_n$\u7684\u6700\u5927\u503c  \n\n'* ' \u7ec4\u6210\u7684\u8868\u8fbe\u5f0f\uff0c\u5c31\u8981\u6d89\u53ca**\u5747\u503c\u4e0d\u7b49\u5f0f**\u4e86\u3002  \n\n\u5747\u503c\u4e0d\u7b49\u5f0f\u7684\u4e00\u90e8\u5206\u662f\u51e0\u4f55\u5e73\u5747\u6570\u5c0f\u4e8e\u7b49\u4e8e\u7b97\u672f\u5e73\u5747\u6570  \n\u5373\uff1a$\\sqrt[n]{x_1 \\times x_2 \\times...\\times x_n } \\le \\frac{1}{n}\\sum_{i=1}^nx_i $  \n\u6240\u4ee5 \uff1a$ x_1 \\times x_2 \\times...\\times x_n \\le (\\frac{1}{n}\\sum_{i=1}^nx_i)^n $  \n\n\u4e00\u4e2a\u7531 '* ' \u7ec4\u6210\u7684\u8868\u8fbe\u5f0f: $ X=(x_1 * x_2 * ... * x_n) $\u7684\u503c\u5c31\u662f\u5de6\u5f0f  \n\u6240\u4ee5\u8868\u8fbe\u5f0f $X$ \u6700\u5927\u503c\u7b49\u4e8e\u6240\u6709\u88ab\u5305\u542b\u8868\u8fbe\u5f0f $x$ \u7684\u6700\u5927\u503c\u7684\u5e73\u5747\u6570\u7684n\u6b21\u65b9.\n\n\u4f46\u662f\u5427\uff0c\u8fd9\u662f\u7406\u60f3\u60c5\u51b5\uff0c\u5b9e\u9645\u4f1a\u51fa\u73b0\u67d0\u88ab\u5305\u542b\u8868\u8fbe\u5f0f $x$ \u7684\u6700\u5927\u503c\u5c0f\u4e8e\u5e73\u5747\u6570\u7684\u60c5\u51b5\u3002  \n\n\u8fd9\u65f6\u5148\u5355\u72ec\u628a\u7b54\u6848\u4e58\u4e0a\u8fd9\u9879\u7684\u6700\u5927\u503c\uff0c\u628a\u5e73\u5747\u6570\u4e0e\u6700\u5927\u503c\u4e4b\u5dee\u9664\u4ee5\u5269\u4e0b\u7684\u6570\u7684\u6570\u91cf\u518d\u52a0\u5230\u5e73\u5747\u6570\u4e0a\u3002 \uff08\u4e5f\u80fd\u7528\u5747\u503c\u4e0d\u7b49\u5f0f\u8bc1\u660e\u6700\u4f18\uff09  \n\n\u8fd8\u4f1a\u51fa\u73b0\u521a\u5f00\u59cb\u67d0\u88ab\u5305\u542b\u8868\u8fbe\u5f0f $x$ \u7684\u6700\u5927\u503c\u5927\u4e8e\u7b49\u4e8e\u5e73\u5747\u6570\uff0c\u4f46\u540e\u9762\u968f\u7740\u5e73\u5747\u6570\u7684\u6539\u53d8\u5bfc\u81f4\u6700\u5927\u503c\u5c0f\u4e8e\u5e73\u5747\u6570\u4e86\uff0c\u6240\u4ee5\u5f00\u4e2a while \u5faa\u73af\u6267\u884c\u5230\u4ee5\u4e0a\u60c5\u51b5\u4e0d\u51fa\u73b0\u5c31\u597d\u3002  \n\uff08\u5fd8\u8bb0\u8003\u8651\u8fd9\u4e2a\u4e86\uff0c\u56e0\u6b64\u8003\u8bd5\u65f6\u4e22\u4e86 10 \u5206\u545c\u545c\uff09\n\n\n------------\n\n\n\u5b9e\u73b0\u7684\u8bdd\u7528 DFS \u505a\uff1a   \n\u6bcf\u4e00\u4e2a DFS \u8fd4\u56de\u7684\u662f\u6b64\u8868\u8fbe\u5f0f\u7684\u6700\u5927\u503c\u3002  \n\n\u9047\u5230 '(' \u5c31\u5f80\u4e0b\u4e00\u5c42\u3002  \n\n\u9047\u5230 '?' \u5c31...\u5176\u5b9e\u4e0d\u7528\u7ba1\u7684\u5566\uff0c\u56e0\u4e3a\u6bcf\u4e2a '?' \u90fd\u662f\u88ab\u4e00\u961f\u62ec\u53f7\u5708\u8d77\u6765\u7684\uff0c\u53ea\u8981\u53ea\u68c0\u67e5\u5230\u62ec\u53f7\uff0c\u6ca1\u6709 '+' \u548c '* ' ,\u80af\u5b9a\u53ea\u6709\u4e00\u4e2a '?' ,\u5c31\u662f\u53ea\u6709\u4e00\u4e2a\u88ab\u5305\u542b\u8868\u8fbe\u5f0f $x$ ,\u6240\u4ee5\u8fd4\u56de$ z_1 $  \n\n\u9047\u5230 '+' \u6216\u8005 '* ' \u8bb0\u5f55\u4e00\u4e0b\u3002  \n\n\u9047\u5230 ')'\u5c31\u7b97\u51fa\u6b64\u8868\u8fbe\u5f0f\u6700\u5927\u503c\uff0c\u7136\u540e\u8fd4\u56de\u3002\n\n\n\n------------\n(\u6ce8\u610f\u4e00\u4e0b\u8f93\u5165\u554a\uff0c\u7b2c\u4e00\u884c\u540e\u9762\u6709\u4e2a\u7a7a\u683c)  \n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\ndouble z[55];\nll a[100005],ato=0;\ndouble dfs()\n{\n\tll t=-1;//\u5982\u679c\u6ca1\u6709 '+','*'\uff0c\u76f4\u63a5\u8fd4\u56de\u53ea\u6709\u4e00\u4e2a\u95ee\u53f7\u7684\u65f6\u5019\u7684\u6700\u5927\u503cz[1]\n\tll num=0;\n\tvector<double> bds;\n\tchar c;\n\twhile(1){ \n\t\tc=getchar();\n\t\tif(c=='(') \n\t\t{\n\t\t\tbds.push_back(dfs());//\u9047 '(' \u8fdb\u4e0b\u4e00\u5c42\n\t\t\tnum++;\n\t\t} \n\t\telse{\n\t\t\tif(c=='+') t=0;//\u8bb0\u5f55\n\t\t\telse{\n\t\t\t\tif(c=='*') t=1;//\u8bb0\u5f55\n\t\t\t\telse{\n\t\t\t\t\tif(c==')')//\u5f00\u59cb\u7b97\u6700\u5927\u503c\n\t\t\t\t\t{\n\t\t\t\t\t\tif(t==0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdouble tot=0;\n\t\t\t\t\t\t\tfor(int i=0; i<num; i++)\n\t\t\t\t\t\t\t\ttot+=bds[i]; \n\t\t\t\t\t\t\treturn min(tot,z[num]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(t==1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdouble lnum=num,aver=z[num]/lnum,tot=1,dtaver=0;\n\t\t\t\t\t\t\tato=0;\n\t\t\t\t\t\t\tfor(int i=0; i<num; i++)\n\t\t\t\t\t\t\ta[++ato]=i;\n\t\t\t\t\t\t\twhile(1)//\u4e0d\u65ad\u5224\u65ad\u662f\u5426\u5b58\u5728\u67d0\u8868\u8fbe\u5f0f\u6700\u5927\u503c\u5c0f\u4e8e\u5e73\u5747\u6570\u5e76\u6539\u53d8\u5e73\u5747\u6570\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tbool lb=0;\n\t\t\t\t\t\t\t\tll lato=ato;\n\t\t\t\t\t\t\t\tato=0;\n\t\t\t\t\t\t\t\tfor(int j=1; j<=lato; j++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tll i=a[j];\n\t\t\t\t\t\t\t\t\tif(bds[i]<aver) \n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttot*=bds[i];\n\t\t\t\t\t\t\t\t\t\tdtaver=dtaver+(aver-bds[i]);\n\t\t\t\t\t\t\t\t\t\tlnum--; \n\t\t\t\t\t\t\t\t\t\tlb=1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ta[++ato]=i;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(lb==0||lnum<=0) break;\n\t\t\t\t\t\t\t\tdtaver/=lnum;\n\t\t\t\t\t\t\t\taver+=dtaver;\n\t\t\t\t\t\t\t\tdtaver=0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(lnum>0)//\u5269\u4e0b\u7684\u6570\u76f4\u63a5\u6309\u5e73\u5747\u6570\u4e58\u5c31\u597d\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdtaver/=lnum;\n\t\t\t\t\t\t\t\taver+=dtaver;\n\t\t\t\t\t\t\t\tfor(int i=1; i<=lnum; i++)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttot*=aver; \n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn tot;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn z[1];//\u76f4\u63a5\u8fd4\u56de z[1]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t}\t\t\n\t\t} \n\t}\n}\nint main()\n{\n\tll k;\n\tcin>>k;\n\tfor(int i=1; i<=k; i++)\n\t\tcin>>z[i];\n\tchar lc=getchar();\n\twhile(lc!='(') lc=getchar();\n\tprintf(\"%.6f\", dfs());//%.6f \u4fdd\u7559 6 \u4f4d\u5c0f\u6570\n}\n```",
        "postTime": 1628079072,
        "uid": 208967,
        "name": "Hasinon",
        "ccfLevel": 9,
        "title": "\u88ab\u9a73\u56de\u4e24\u6b21\u540e\u4fee\u6539\u4e86\u7684\u9898\u89e3"
    }
]
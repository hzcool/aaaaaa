[
    {
        "content": "## [\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/P7860)\n\n\u597d\u9898\u3002\n\n\u4e3b\u8981\u601d\u8def\u548c\u53e6\u4e00\u4f4d\u5de8\u4f6c\u5dee\u4e0d\u591a\uff0c\u8be6\u7ec6\u8bb2\u4e00\u4e0b\u5224\u65ad\u7684\u90e8\u5206\u3002\n\n### \u89e3\u51b3\u601d\u8def\uff1a\n\n\u9996\u5148\u8003\u8651\u672c\u9898\u4e0e\u62d3\u6251\u6392\u5e8f\u6709\u548c\u5173\u7cfb\u3002\u53ef\u4ee5\u60f3\u5230\uff0c\u67d0\u4e9b\u68cd\u5b50\u7684\u5148\u540e\u79fb\u52a8\u987a\u5e8f\u662f\u6709\u9650\u5236\u7684\u3002\u6bd4\u5982\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/4q2z4b9t.png)\n\n\u8fd9\u91cc\u7ea2\u8272\u7684\u5fc5\u987b\u6bd4\u84dd\u8272\u7684\u5148\u79fb\u52a8\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728 $x$ \u8f74\u7684\u6295\u5f71\u6709\u91cd\u53e0\uff0c\u84dd\u8272\u5728\u4e0a\uff0c\u4f1a\u88ab\u7ea2\u8272\u5361\u4f4f\u3002\n\n\u6240\u4ee5\uff0c\u68cd\u5b50\u4e24\u4e24\u4e4b\u95f4\u53ef\u80fd\u5b58\u5728\u9650\u5236\u5173\u7cfb\uff0c\u8fd9\u5c31\u7b26\u5408\u62d3\u6251\u6392\u5e8f\u7684\u6761\u4ef6\u4e86\u3002\u8003\u8651\u6839\u636e\u6bcf\u4e00\u5bf9\u9650\u5236\u5173\u7cfb\u5efa\u8fb9\u3002\u82e5 $u$ \u5fc5\u987b\u6bd4 $v$ \u5148\u79fb\u52a8\uff0c\u5c31\u4ece $u$ \u5411 $v$ \u8fde\u8fb9\uff0c\u8fd9\u6837\u5c31\u8f6c\u5316\u4e3a\u6c42\u62d3\u6251\u5e8f\u95ee\u9898\u4e86\u3002\n\n------------\n\n\n\u5176\u6b21\uff0c\u4e5f\u662f\u8f83\u9ebb\u70e6\u7684\u4e00\u90e8\u5206\uff0c\u5c31\u662f\u5982\u4f55\u6839\u636e\u4e24\u7ebf\u6bb5\u7684\u5750\u6807\u5224\u65ad\u5176\u79fb\u52a8\u5148\u540e\u9650\u5236\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u5728\u8bfb\u5165\u65f6\u5224\u65ad\u5e76\u4ea4\u6362\u597d\uff0c\u7528 $x1,y1$ \u8868\u793a\u5de6\u8fb9\u7aef\u70b9\uff0c$x2,y2$ \u8868\u793a\u5de6\u8fb9\u7aef\u70b9\u3002\n\n$\\text {check}$ \u51fd\u6570\uff0c\u5206\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\u8ba8\u8bba\uff1a\n\n1. \u6ca1\u6709\u9650\u5236\u5173\u7cfb\uff0c\u8fd4\u56de $0$\u3002\n2. $u$ \u6bd4 $v$ \u8981\u5148\u79fb\u52a8\uff0c\u8fd4\u56de $-1$\u3002\n3. $v$ \u6bd4 $u$ \u8981\u5148\u79fb\u52a8\uff0c\u8fd4\u56de $1$\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u8bbe $u$ \u4e3a\u9760\u5de6\u7684\u7ebf\u6bb5\uff0c\u82e5\u4e0d\u662f\uff0c\u5728\u5f00\u59cb\u5224\u65ad\u524d\u5c06\u4ea4\u6362\u4e00\u4e0b\uff0c\u5e76\u9700\u8981\u628a $op$\uff08\u8fd4\u56de\u503c\uff09\u53d6\u53cd\u3002\n\n\u9996\u5148\u770b $op=0$\uff0c\u5373\u4e24\u7ebf\u6bb5\u5728 $x$ \u8f74\u4e0a\u6295\u5f71\u4e0d\u91cd\u5408\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ziqfmu82.png)\n\n\u8089\u773c\u53ef\u89c1\uff0c$u.x2<v.x1$\uff0c\u6ce8\u610f\u7b49\u53f7\u4e0d\u53ef\u4ee5\u53d6\u5230\uff08\u7167\u63d0\u4ea4\u610f\u601d\u6765\u770b...\uff09\u3002\n\n\u7136\u540e\u770b\u4e00\u822c\u60c5\u51b5\u3002\u591a\u753b\u51e0\u4e2a\u56fe\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u53ea\u9700\u8981\u6bd4\u8f83 **$u$ \u4e0a $x=v.x1$ \u65f6 $u.y'$ \u7684\u503c\u4e0e $v.y1$ \u7684\u5927\u5c0f** \u5373\u53ef\uff08\u6216 **$v$ \u4e0a $x=u.x2$ \u65f6 $v.y'$ \u7684\u503c\u4e0e $u.y2$ \u7684\u5927\u5c0f**\uff09\u3002\u5728\u4e0b\u7684\u5148\u79fb\uff0c\u5728\u4e0a\u7684\u540e\u79fb\u3002\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/ow2ue0li.png)\n\n\u81f3\u4e8e\u5982\u4f55\u6c42\u51fd\u6570\u503c\u3002\u3002\u4e0a\u8fc7\u521d\u4e2d\u6570\u5b66\u90fd\u4f1a\u3002\u5177\u4f53\u53ef\u4ee5\u770b\u7a0b\u5e8f\uff0c\u53d8\u91cf\u540d\u90fd\u9075\u4ece $y=kx+b$ \u7684\u57fa\u672c\u5f62\u5f0f\u4e86\u3002\n\n\u7136\u9e45\uff0c\u8fd9\u6837\u5199\u83b7\u5f97\u4e86 $95$ \u5206\u7684\u9ad8\u5206\u3002\u54ea\u91cc\u51fa\u95ee\u9898\u4e86\uff1f\n\n\u8fd8\u6709\u4e00\u79cd\u6bd4\u8f83\u5751\u7684\u60c5\u51b5\uff0c\u5c31\u662f $u$ \u662f\u7ad6\u76f4\u7684\uff01\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/aycp585b.png)\n\n\u8fd9\u65f6\u5019\u51fd\u6570 $u$ \u7684 $k$ \u662f\u65e0\u9650\u5927\u7684\uff0c\u4e0d\u662f\u4e00\u6b21\u51fd\u6570\uff0c\u65e0\u6cd5\u6c42\u51fa\u503c\u3002\u6240\u4ee5\u9700\u8981\u7279\u5224\uff0c\u7b97\u51fa $x=u.x1$ \u65f6 $v$ \u7684\u51fd\u6570\u503c\u518d\u6bd4\u8f83\u3002\n\n\n------------\n\n### Code\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,in[5005];\nstruct node{\n\tint x1,x2,y1,y2;\n}b[5005];\nvector<int> a[5005];\nqueue<int> q;\nint check(node u,node v){ //0:\u65e0\u5173\uff0c-1:\u5148\u79fbu\uff0c1:\u5148\u79fbv \n\tint op=1;\t\t\n\tif(u.x1>v.x1) swap(u,v),op=-op;\t\n\tif(u.x2<v.x1) return 0; \n\tdouble K,B,tmp;\n\tif(!(u.x2-u.x1)){\n\t\tK=1.0*(v.y2-v.y1)/(v.x2-v.x1);\n\t\tB=(double)v.y1-K*v.x1;\n\t\ttmp=K*u.x1+B;\n\t\tif(u.y1>tmp) return op;\n\t\treturn -op;\n\t}\n\tK=1.0*(u.y2-u.y1)/(u.x2-u.x1);\n\tB=(double)u.y1-K*u.x1;\n\ttmp=K*v.x1+B;   //\u6c42\u51fd\u6570\n\tif(tmp>v.y1) return op;\n\treturn -op;\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d%d%d\",&b[i].x1,&b[i].y1,&b[i].x2,&b[i].y2);\n\t\tif(b[i].x1>b[i].x2) swap(b[i].x1,b[i].x2),swap(b[i].y1,b[i].y2);\n\t}\n\tfor(int i=1;i<n;i++){\n\t\tfor(int j=i+1;j<=n;j++){\n\t\t\tint op=check(b[i],b[j]);\n\t\t\tif(op==-1) a[i].push_back(j),in[j]++; \n\t\t\tif(op==1) a[j].push_back(i),in[i]++;   //\u8fde\u8fb9\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++) if(!in[i]) q.push(i),printf(\"%d \",i);\n\twhile(q.size()){        //\u62d3\u6251\n\t\tint k=q.front();\n\t\tq.pop();\n\t\tfor(int i=0;i<a[k].size();i++){\n\t\t\tint tmp=a[k][i];\n\t\t\tin[tmp]--;\n\t\t\tif(!in[tmp]) q.push(tmp),printf(\"%d \",tmp);\n\t\t}\n\t}\n\treturn 0;\n} \n```",
        "postTime": 1662463329,
        "uid": 241485,
        "name": "Binary_1110011_",
        "ccfLevel": 6,
        "title": "P7860 \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\u9700\u8981\u6c42\u4e00\u4e2a\u4efb\u610f\u7684\u987a\u5e8f\uff0c\u800c\u6728\u68cd\u7684\u79fb\u52a8\u987a\u5e8f\u7684\u5148\u540e\u5b58\u5728\u9650\u5236\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u60f3\u5230...\n\n**\u62d3\u6251\u6392\u5e8f\uff01**\n\n\u5bf9\u6bcf\u4e24\u6761\u8fb9\u5224\u65ad\u662f\u5426\u6709\u987a\u5e8f\u8981\u6c42\uff0c\u628a\u6728\u68cd\u770b\u4f5c\u70b9\uff0c\u987a\u5e8f\u8981\u6c42\u770b\u4f5c\u8fb9\uff0c\u5efa\u4e00\u5f20\u6709\u5411\u56fe\uff0c\u8dd1\u4e00\u904d\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5176\u4ed6\u7684\u4e1c\u897f\uff1a\n\n\u62d3\u6251\u6392\u5e8f\uff1a  \n\u5728\u5efa\u56fe\u7684\u65f6\u5019\u7edf\u8ba1\u6bcf\u4e2a\u70b9\u7684\u5165\u5ea6\uff0c\u7136\u540e\u628a\u6240\u6709\u5165\u5ea6\u4e3a 0 \u7684\u70b9\u6254\u5230\u4e00\u4e2a\u961f\u5217\u91cc\u3002\u663e\u7136\uff0c\u5165\u5ea6\u4e3a 0 \u4ee3\u8868\u8fd9\u4e2a\u6728\u68cd\u53ef\u4ee5\u79fb\u52a8\u4e86\u3002\u56e0\u6b64\u6211\u4eec\u8f93\u51fa\u5b83\uff08\u8bb0\u5f97\u51cf\u4e00\u4e0b\u5b83\u8fde\u7684\u70b9\u7684\u5165\u5ea6\uff09\uff0c\u4e00\u76f4\u5230\u8f93\u51fa\u5168\u90e8\u3002\n\n\u5148\u540e\u987a\u5e8f\uff1a   \n\u5982\u679c\u4e24\u4e2a\u6728\u68cd\u5728 x \u8f74\u7684\u6295\u5f71\u6709\u91cd\u53e0\uff0c\u90a3\u4e48\u4ed6\u4eec\u5c31\u6709\u5148\u540e\u5173\u7cfb\u3002   \n\u6c42\u5176\u4e2d\u4e00\u4e2a\u7684\u4e00\u822c\u5f0f\u7136\u540e\u4ee3\u5165\u6bd4\u8f83\u5373\u53ef    \n\u8fd9\u91cc\u7ec6\u8282\u4e0d\u5c11\uff0c\u8bb0\u5f97\u6ce8\u610f\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=5010;\nstruct posi{\t\t\t// \u6728\u68cd\u4f4d\u7f6e\n\tint xa,xb,ya,yb;\n}a[N];\nint n,ind[N];\t\t\t// \u5165\u5ea6\nvector<int> v[N];\nqueue<int> q;\nint judge(posi xx,posi yy){\t\t// \u5224\u65ad\u987a\u5e8f\n\tint f=1;\t\t\t// \u8bb0\u5f55\u662f\u5426swap\u8fc7\n\tif(xx.xa>yy.xa) swap(xx,yy),f=-f;\t// \u628ax\u5c0f\u7684\u4f5c\u4e3axx\u65b9\u4fbf\u6bd4\u8f83\n\tif(xx.xb<yy.xa) return 0;\t//\u65e0\u987a\u5e8f\t\t\t\t\n\tint A=xx.ya-xx.yb,B=xx.xb-xx.xa,C=xx.xa*xx.yb-xx.ya*xx.xb;     \t// \u6c42\u4e00\u822c\u5f0f\n\tif(!B){\t\t\t// \u5224\u65ad\u659c\u7387\u4e0d\u5b58\u5728\n\t\tif(xx.ya>yy.ya) return f;\n\t\treturn -f;\n\t}\n\tdouble y=-1.0*(C+A*yy.xa)/B;\t// \u8bb0\u5f97\u7528double\n\tif(y>yy.ya) return f;\n\treturn -f;\n}\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<=n;++i){\n\t\tcin>>a[i].xa>>a[i].ya>>a[i].xb>>a[i].yb;\n\t\tif(a[i].xa>a[i].xb){\n\t\t\tswap(a[i].xa,a[i].xb);\n\t\t\tswap(a[i].ya,a[i].yb);\n\t\t}\n\t}\n\t\t\n\tfor(int i=1;i<n;++i){\t\t\t//\u5efa\u56fe\n\t\tfor(int j=i+1;j<=n;++j){\n\t\t\tint ud=judge(a[i],a[j]);\t// \u5148\u540e\u987a\u5e8f\n\t\t\tif(ud==1){\n\t\t\t\tv[j].push_back(i);\n\t\t\t\t++ind[i];\n\t\t\t}\n\t\t\tif(ud==-1){\n\t\t\t\tv[i].push_back(j);\n\t\t\t\t++ind[j];\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=1;i<=n;++i)\t\t\t// \u62d3\u6251\u6392\u5e8f\uff08\u548cBFS\u5f88\u50cf\uff09\n\t\tif(!ind[i])\n\t\t\tq.push(i);\n\twhile(!q.empty()){\n\t\tint now=q.front();\n\t\tcout<<now<<' ';\n\t\tq.pop();\n\t\tfor(int i=0;i<v[now].size();++i){\n\t\t\tint nex=v[now][i];\n\t\t\t--ind[nex];\n\t\t\tif(!ind[nex]) q.push(nex);\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1635599056,
        "uid": 112276,
        "name": "Skaditxdy",
        "ccfLevel": 6,
        "title": "P7860\u7684\u9898\u89e3"
    }
]
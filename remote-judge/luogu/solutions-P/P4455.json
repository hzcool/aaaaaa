[
    {
        "content": "[\u9898\u76ee\u94fe\u63a5](https://www.luogu.org/problemnew/show/P4455)\r\n\r\n\u4e00\u53e5\u8bdd\u9898\u610f\uff1a\u7ed9\u5b9an\u4e2a\u70b9m\u6761\u6709\u5411\u8fb9\uff0c\u6c42\u4ee51\u53f7\u70b9\u4e3a\u6839\u7684\u6811\u5f62\u56fe\u6570\u91cf\u3002\r\n\r\n\r\nsolution\uff1a\u6784\u9020\u6709\u5411\u56fe\u57fa\u5c14\u970d\u592b\u77e9\u9635\uff0c\u6c42\u51fadet(M[1][1])\r\n\r\n\r\n------------\r\n\r\n\u8bc1\u660e\u6709\u5411\u56fe\u7684\u77e9\u9635\u6811\u5b9a\u7406\uff1a\r\n\r\n\u601d\u8def\u548c\u8bc1\u660e\u65e0\u5411\u56fe\u7684\u5dee\u4e0d\u591a\uff0c\u6784\u9020\u8f85\u52a9\u77e9\u9635\u3002\r\n\r\n\u6784\u9020\u4e24\u4e2a\u77e9\u9635A\u548cB\uff0c\u6bcf\u5217\u4ee3\u8868\u4e00\u6761\u8fb9x->y\u3002\t\r\n\u5728A\u7684\u4e00\u5217\u4e2d\uff0c\u7b2cx\u884c\u4e3a-1\uff0c\u7b2cy\u884c\u4e3a1\uff0c\u5176\u4f59\u662f0\t\r\n\u5728B\u7684\u4e00\u5217\u4e2d\uff0c\u7b2cy\u884c\u4e3a1\uff0c\u5176\u4f59\u4e3a0\r\n\r\nA\u5c31\u662f\u6309\u7167\u8fb9\u7684\u65b9\u5411\u5b9a\u6b63\u8d1f\u7684\u65e0\u5411\u56fe\u6b63\u5e38\u7684\u8f85\u52a9\u77e9\u9635\t\t\r\nB\u6211\u4eec\u628a\u5b83\u53eb\u505a\u5165\u5ea6\u77e9\u9635\r\n\r\n\u8fd9\u6837A*B(T)\u662f\u57fa\u5c14\u970d\u592b\u77e9\u9635C\uff1a\t\r\nCij\u662fA\u7684\u7b2ci\u884c \u70b9\u4e58 B\u7684\u7b2ci\u884c\t\r\ni=j\u65f6\u5f53\u4e14\u4ec5\u5f53\u8fb9\u662fx->i\u624d\u6709\u8d21\u732e\uff0c\u5e76\u4e14\u8d21\u732e\u90fd\u662f1\t\r\ni!=j\u65f6\u53ea\u6709i->j\u65f6\u624d\u662f-1\uff0c\u5426\u5219\u90fd\u662f0\t\r\n\r\n\u8bbeA'\u4e3aA\u53bb\u6389\u7b2c1\u884c\u9009n-1\u5217\uff0cB'\u540c\u7406\r\n\r\n\u8003\u8651\u548c\u65e0\u5411\u56fe\u4e00\u6837\u67ef\u897f\u6bd4\u5185\uff0c\u8fd9\u6837\u76f8\u5f53\u4e8e\u9009\u51fa\u4e86n-1\u6761\u6709\u5411\u8fb9\t\r\n\u73b0\u5728\u6211\u4eec\u8003\u8651\u54ea\u4e00\u4e9b\u60c5\u51b5\u53ef\u4ee5\u5bf9\u6700\u540e\u7b54\u6848\u4ea7\u751f\u8d21\u732e\u3002\t\t\r\n\u8003\u8651det(A')=0\u53ef\u4ee5\u6392\u9664\u6389\u6709\u73af\u7684\u60c5\u51b5(\u5305\u62ec\u4e86\u4e24\u70b9\u95f4\u6709\u4e24\u4e2a\u65b9\u5411\u7684\u8fb9)\t\r\n\u73b0\u5728\u4e0d\u8003\u8651\u8fb9\u7684\u65b9\u5411\u7684\u8bdd\uff0c\u5269\u4e0b\u6709\u53ef\u80fd\u505a\u51fa\u8d21\u732e\u7684\u662f\u68f5\u6811\t\r\n\r\n\u6211\u4eec\u5148\u8bc1 **a.\u5f53\u4e14\u4ec5\u5f53\u8fd9\u662f\u4e2a\u6811\u5f62\u56fe\uff0c\u4e14\u4ee51\u4e3a\u6839\u65f6det(B')!=0**\t\r\n\u518d\u8bc1 **b.\u7b26\u5408\u8fd9\u6837\u7684\u60c5\u51b5\u65f6det(A')det(B')=1**\t\t\r\n\u8fd9\u6837\u6700\u540e\u7684\u7b54\u6848\u5c31\u662f\u4ee51\u4e3a\u6839\u7684\u6811\u5f62\u56fe\u8ba1\u6570\u4e86\r\n\r\n\r\n\r\n------------\r\na.\t\r\n\u9996\u5148\u4ee5i\u4e3a\u6839\u7684\u6811\u5f62\u56fe\u76f8\u5f53\u4e8ei\u7684\u5165\u5ea6\u4e3a0\uff0c\u5176\u4ed6\u6bcf\u4e2a\u70b9\u5165\u5ea6\u4e3a1\t\r\n\u73b0\u5728B\u77e9\u9635\u4e2d\u6709\u96641\u5916\u7684n-1\u4e2a\u70b9\uff0c\u6709n-1\u6761\u8fb9\u5bf9\u5e94n-1\u4e2a\u5217\u5411\u91cf\uff0c\u6bcf\u4e2a\u6709\u4e00\u884c\u4e3a-1\r\n- \u5982\u679c1\u53f7\u70b9\u7684\u5165\u5ea6>0\uff0c\u5269\u4e0b\u53ea\u6709n-2\u4e2a\u4e0d\u4e3a0\u7684\u6570\uff0c\u800cB'\u662f\u4e2a\u5927\u5c0f\u4e3an-1\u7684\u65b9\u9635\uff0c\u884c\u5217\u5f0f\u7684\u6bcf\u9879\u9700\u8981n-1\u4e2a\u6570\uff0c\u6545det(B')=0\t\r\n\r\n- 1\u53f7\u70b9\u7684\u5165\u5ea6\u4e3a0\u65f6\uff0c\u53ea\u67091\u53f7\u70b9\u53ef\u80fd\u6210\u4e3a\u6811\u5f62\u56fe\u7684\u6839\uff0c\u53ea\u9700\u8981\u5224\u65ad\u662f\u5426\u662f\u6811\u5f62\u56fe\u3002\u5269\u4e0bn-1\u4e2a\u5165\u5ea6\u5206\u914d\u7ed9n-1\u4e2a\u70b9\uff0c\u5982\u679c\u4e0d\u662f\u6bcf\u4e2a\u70b9\u4e00\u4e2a\u5ea6\u6570\uff0c\u62bd\u5c49\u539f\u7406\u6709\u4e00\u4e2a\u70b9p\u5165\u5ea6>=2\uff0cB\u77e9\u9635\u4e2d\u5bf9\u5e94\u7684\u4e24\u4e2a\u5217\u5411\u91cf\u76f8\u540c\uff0cdet(B\u2019)=0\r\n\r\n**\u7ed3\u8bba\uff1a\u5f53\u4e14\u4ec5\u5f53\u5b83\u662f\u4e2a\u4ee51\u4e3a\u6839\u7684\u6811\u5f62\u56fe\u65f6\uff0cdet(A')det(B')!=0**\t\t\r\n\r\nb.\t\r\n\r\n\u6cd5\u4e00\uff1a\t\t\r\n\r\n\u4ece\u53f6\u5b50\u5f80\u4e0a\u5904\u7406\uff0c\u8003\u8651x->y->z\t\r\n\u628ax->y\u7684\u5217\u5411\u91cf*-1\uff0c\uff08\u4e5f\u5c31\u662f\u7b2cy\u884c\u4e3a1\uff09\t\r\n\u52a0\u5230y->z\u7684\u5217\u5411\u91cf\u4e0a\uff0c\u628a\u5b83\u53d8\u6210y=1,z=-1\t\t\r\n\u6211\u4eec\u53d1\u73b0\u5b83\u628a\u53f6\u8282\u70b9\u53d8\u6210\u4e86\u8ddfA\u77e9\u9635\u4e00\u6837\u7684\u5f62\u5f0f\uff0c\u884c\u5217\u5f0f\u7684\u503c\u5e76\u6ca1\u6709\u53d8\t\t\r\n\u7136\u540e\u4e00\u76f4\u8fd9\u6837\u5904\u7406\u76f4\u5230A'=B',\t\t\r\n\u6211\u4eec\u53d1\u73b0\u81ea\u5df1\u8bc1\u51fa\u4e86det(A')=det(B')\t\r\n\u6240\u4ee5\u5e73\u65b9\u4e00\u4e0bdet(A')det(B')=1\r\n\r\n\u6cd5\u4e8c\uff1a\t\t\r\n\r\n\u663e\u7136\u6709det(B')=det(I)=1\t\t\r\n\u6309\u7167\u65e0\u5411\u56fe\u7684\u65b9\u6cd5\u6c42det(A')\uff0c\u4e0d\u9700\u8981\u6539\u8fb9\u7684\u65b9\u5411\uff0c\u90a3\u4e48\u663e\u7136det(A')=det(I)=1\t\t\r\n\u590d\u8ff0\u4e00\u4e0b\u8bc1\u660e\u8fc7\u7a0b\uff0c\u4ece\u53f6\u5b50\u5230\u6839\u5904\u7406\u5f62\u5982x->y->z\u7684\u8fb9\t\t\t\r\n\u628ax->y\u52a0\u5230y->z\u4e0a\uff0c\u53d8\u6210x->y,x->z\uff0c\u6b64\u65f6det\u4e0d\u53d8\t\r\n\u6700\u540e\u6bcf\u6761\u8fb9\u4f1a\u53d8\u62101->z,\u800c\u7b2c\u4e00\u884c\u5df2\u7ecf\u88ab\u5220\u6389\u4e86\t\t\r\n\u5269\u4e0b\u7684\u662f\u4e2a\u5355\u4f4d\u77e9\u9635\uff0c\u5373det(A')=det(I)=1\t\t\r\n\r\n**\u7ed3\u8bba\uff1a\u5f53\u5b83\u662f\u4e2a\u4ee51\u4e3a\u6839\u7684\u6811\u5f62\u56fe\u65f6\uff0cdet(A')det(B')=1,\u5426\u5219=0**\t\r\n\r\n\u8bc1\u660e\u5982\u679c\u6709\u4e0d\u5bf9\u7684\u5730\u65b9\u8bf7\u8054\u7cfb\u6211\uff0c\u8c22\u8c22~\r\n",
        "postTime": 1524141414,
        "uid": 196,
        "name": "xiezhiyu",
        "ccfLevel": 0,
        "title": "[CQOI2018]\u793e\u4ea4\u7f51\u7edc"
    },
    {
        "content": "# \u9898\u89e3\n\nUPD\uff1a\u4ee5\u524d\u5199\u7684\u592a\u5dee\u4e86\uff0c\u91cd\u5199\u3002\n\n\u6c42\u7684\u5176\u5b9e\u5c31\u662f\u6709\u5411\u56fe\u4e2d\u4ee51\u4e3a\u6839\u7684\u751f\u6210\u6811\u6570\u91cf\u3002Matrix Tree\u5b9a\u7406\u88f8\u9898\u3002\n\n\u5165\u5ea6\u77e9\u9635\u5bf9\u5e94\u7684\u5916\u5411\u6811\uff0c\u51fa\u5ea6\u77e9\u9635\u5bf9\u5e94\u7740\u5185\u5411\u6811\uff08\u90fd\u662f\u6307\u5411\u7236\u4eb2\u7684\u8fb9\u7684\u4e8b\u662f\u51fa\u5ea6\u6216\u8005\u5165\u5ea6\uff09\u65e0\u6839\u6811\u5c31\u662f\u4e24\u6761\u6709\u5411\u8fb9\u90fd\u52a0\u4e0a\n\n\u6709\u5411\u6811\u5fc5\u987b\u5220\u6389\u6839\u6240\u5728\u7684\u90a3\u4e00\u884c\u548c\u4e00\u5217\uff0c\u65e0\u6839\u6811\u53ef\u4ee5\u4efb\u610f\n\n\u7136\u540e\u5bf9\u4e8e\u8fd9n\u22121\u9636\u7684\u77e9\u9635\u6c42\u4e00\u4e2a\u884c\u5217\u5f0f\u5c31\u884c\u4e86\uff0c\u4e5f\u53eb\u4e3b\u5b50\u5f0f\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nvoid read(int&x) {\n\tx=0;int w=1;char ch=getchar();\n\tfor(; !isdigit(ch); ch=getchar())if(ch=='-') w=-w;\n\tfor(; isdigit(ch); ch=getchar()) x=x*10+ch-'0';\n\tx*=w;\n}\n\nconst int mod=1e4+7;\nint fpow(int x,int k) {\n\tint ans=1;\n\tfor(; k; k>>=1,x=x*x%mod)\n\t\tif(k&1) ans=ans*x%mod;\n\treturn ans;\n}\n\nint A[255][255];\nint gauss(int n) {\n\tint p=1;\n\tfor(int i=1; i<n; i++) {\n\t\tint k=i;\n\t\tfor(int j=i+1; j<=n; j++)\n\t\t\tif(A[j][i]>A[k][i]) k=j;\n\t\tif(k!=i) swap(A[k],A[i]),p*=-1;\n\t\tif(!A[i][i])\n\t\t\treturn 0;\n\t\tint inv=fpow(A[i][i],mod-2);\n\t\tfor(int j=i+1; j<=n; j++) {\n\t\t\tint coef=A[j][i]*inv%mod;\n\t\t\tfor(int k=i; k<=n; k++) A[j][k]=(A[j][k]+mod-coef*A[i][k]%mod)%mod;\n\t\t}\n\t}\n\tif(p<0) p+=mod;\n\tfor(int i=1; i<=n; i++) p=p*A[i][i]%mod;\n\treturn p;\n}\nint main() {\n\tint n,m;\n\tread(n),read(m);\n\tfor(int x,y; m--;) {\n\t\tread(x),read(y); // y->x\n\t\t--A[y-1][x-1],++A[x-1][x-1];\n\t}\n\tfor(int i=0; i<n; i++)for(int j=0; j<n; j++)\n\t\tif(A[i][j]<0) A[i][j]+=mod;\n\tprintf(\"%d\\n\",gauss(n-1));\n\treturn 0;\n}\n```\n# \u5feb\u901f\u6c42\u89e3\u884c\u5217\u5f0f\n\n\u6c42\u884c\u5217\u5f0f\u7684\u4e00\u822c\u65b9\u6cd5\u662f\u628a\u77e9\u9635\u901a\u8fc7\u57fa\u7840\u884c\u53d8\u6362\u6216\u8005\u5217\u53d8\u6362\u628a\u77e9\u9635\u6d88\u6210\u4e00\u4e2a\u4e0a\u4e09\u89d2\u77e9\u9635\uff0c\u7136\u540e\u5bf9\u89d2\u7ebf\u4e0a\u7684\u503c\u76f8\u4e58\u5373\u53ef\n\n\u5177\u4f53\u7684\u53d8\u6362\u662f\n\n1. \u884c\u5217\u4ea4\u6362\uff0c\u884c\u5217\u5f0f\u4e0d\u53d8 \u5c31\u662fai,j\u53d8\u6210aj,i\uff08\u4f46\u662f\u4e00\u822c\u7528\u4e0d\u4e0a\u8fd9\u4e2a\uff09\n\n2. \u884c\u5217\u5f0f\u4e00\u884c\u7684\u56e0\u5b50\u53ef\u4ee5\u63d0\u51fa \u5c31\u662f\u4e00\u884c\u90fd\u9664k,\u6c42\u5b8c\u8fd9\u4e2a\u884c\u5217\u5f0f\u540e\u518d\u4e58\u4e0ak\n\n3. \u4e24\u884c\u4e92\u6362\uff0c\u884c\u5217\u5f0f\u53cd\u53f7\n\n4. \u5c06\u4e00\u884c\u7684\u500d\u6570\u52a0\u5230\u53e6\u4e00\u884c\u4e0a\uff0c\u884c\u5217\u5f0f\u4e0d\u53d8\n\n\u597d\u50cf\u5199\u7684\u8bdd\u53ea\u9700\u898134\u5c31\u591f\u4e86\n",
        "postTime": 1525932355,
        "uid": 37834,
        "name": "autoint",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4455 \u3010[CQOI2018]\u793e\u4ea4\u7f51\u7edc\u3011"
    },
    {
        "content": "### \u9898\u76ee\u5927\u610f\uff1a\n \u7ed9\u5b9an\u4e2a\u70b9m\u6761\u8fb9\uff0c\u6c42\u4ee51\u53f7\u70b9\u4e3a\u6839\u7684\u6811\u5f62\u56fe\u6570\u91cf\u3002\n### \u601d\u8def\uff1a\n\u601d\u8def\uff1a\u77e9\u9635\u6811\u88f8\u9898\uff0c\u672c\u9898\u662f\u5916\u5411\u6811\uff0c\u6240\u6709\u6309\u5916\u5411\u6811\u7684\u89c4\u5219\u5efa\u56fe\u8dd1\u77e9\u9635\u6811\u5b9a\u7406\u5373\u53ef\u3002  \n\u5982\u679c\u7b2c8\u548c\u7b2c11\u4e2a\u6570\u636e\u70b9WA\u4e86\uff0c\u53ef\u4ee5\u8003\u8651\u662f\u4e0d\u662f\u9ad8\u65af\u6d88\u5143\u7684\u90e8\u5206\u5199\u9519\u4e86\uff0c\u8fd9\u4e5f\u662f\u6211\u5728\u89e3\u9898\u8fc7\u7a0b\u4e2d\u6240\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\u3002  \n\n\n### \u5efa\u56fe\uff1a\n\n\u5220\u53bb\u6307\u5b9a\u6839\u6240\u5728\u7684\u884c\u548c\u5217\uff0c\u6c42\u77e9\u9635\u884c\u5217\u5f0f\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n```c\nwhile(m--){\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tx--;y--;\n\t\tK[x][x]++;\n\t\tK[y][x]--;\n}\n```\n\u6ce8\u610fx\uff0cy\u5fc5\u987b\u81ea\u51cf1\uff0c\u4e3a\u7684\u662f\u4fdd\u8bc1\u6811\u4ee51\u53f7\u70b9\u4e3a\u6839\n\u9ad8\u65af\u6d88\u5143\u7684\u90e8\u5206\u4e0d\u518d\u8d58\u8ff0\n  \n### \u4ee3\u7801\uff1a\n```c\n#include<iostream>\n#include<cstring>\n\nusing namespace std;\n\ntypedef long long LL;\n\nconst int N=260;\nconst int mod=1e4+7;\n\nint n,m;\nLL K[N][N];\n\n//\u9006\u5143\ninline LL qpow(LL x,LL n){\n\tLL ret=1;\n\twhile(n){\n\t\tif(n&1)\n\t\tret=1ll*ret*x%mod;\n\t\tx=1ll*x*x%mod;\n\t\tn>>=1;\n\t}\n\treturn ret;\n}\n\n//\u884c\u5217\u5f0f\ninline LL gauss(){\n\tint ret=1;\n\tn--;//\u6ce8\u610fn\u7684\u53d6\u503c\n\tfor(int i = 1 ; i <= n ; ++i){\n        for(int j = i ; j <= n ; ++j)\n            if(K[j][i]){\n                swap(K[i] , K[j]);\n                if(i != j)\n                    ret = mod - ret;\n                break;\n            }\n        int t = qpow(K[i][i] , mod - 2);\n        for(int j = i + 1 ; j <= n ; ++j)\n            if(K[j][i])\n                for(int k = n ; k >= i ; --k)\n                    K[j][k] = (K[j][k] - K[i][k] * t % mod * K[j][i] % mod + mod) % mod;\n    }\n\tfor(int i=1;i<=n;i++)\n\t\tret=1ll*ret*K[i][i]%mod;\n\treturn ret;\n}\n\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tint x,y;\n\twhile(m--){\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tx--;y--;\n\t\tK[x][x]++;\n\t\tK[y][x]--;\n\t}\n\tcout<<gauss();\n}\n```\n------------\n\n",
        "postTime": 1617236031,
        "uid": 263057,
        "name": "\u6708\u4e0b\u8424\u706b",
        "ccfLevel": 0,
        "title": "[CQOI2018]\u793e\u4ea4\u7f51\u7edc"
    },
    {
        "content": "# \u9898\u610f\n\u7ed9\u4e00\u9897\u6709\u5411\u56fe\uff0c\u6c42\u5b50\u5916\u5411\u6811\u4e2a\u6570\n\n\u4e00\u773c\u80fd\u770b\u51fa\u662f\u77e9\u9635\u6811\u677f\u5b50\u5427\u3002\u3002\u3002\n\ncode:\n```cpp\n#include<iostream>\n#include<cstdio>\nconst int M=255,mod=10007;\nint n,m,a[M][M];\ninline int Del(const int&a,const int&b){\n\treturn a-b<0?a-b+mod:a-b;\n}\ninline int pow(int a,int b=mod-2){\n\tint ans=1;\n\tfor(;b;b>>=1,a=a*a%mod)if(b&1)ans=ans*a%mod;\n\treturn ans;\n}\ninline int Gauss(){\n\tregister int i,j,k,d,inv,ans=1;\n\tfor(i=2;i<=n;++i){\n\t\tfor(j=i+1;j<=n;++j){\n\t\t\tif(a[j][i]){\n\t\t\t\tstd::swap(a[i],a[j]);ans=mod-ans;break;\n\t\t\t}\n\t\t}\n\t\tinv=pow(a[i][i]);\n\t\tfor(j=i+1;j<=n;++j){\n\t\t\td=a[j][i]*inv%mod;\n\t\t\tfor(k=i;k<=n;++k)a[j][k]=Del(a[j][k],d*a[i][k]%mod);\n\t\t}\n\t\tans=ans*a[i][i]%mod;\n\t}\n\treturn ans;\n}\nsigned main(){\n\tregister int i,u,v;\n\tscanf(\"%d%d\",&n,&m);\n\tfor(i=1;i<=m;++i){\n\t\tscanf(\"%d%d\",&u,&v);u^=v^=u^=v;\n\t\tif(++a[v][v]==mod)a[v][v]=0;\n\t\tif(!~--a[u][v])a[u][v]=mod-1;\n\t}\n\tprintf(\"%d\\n\",Gauss());\n}\n```",
        "postTime": 1608559488,
        "uid": 160839,
        "name": "Prean",
        "ccfLevel": 7,
        "title": "\u7ebf\u6027\u4ee3\u6570 \u77e9\u9635\u6811 P4455"
    },
    {
        "content": "\u4ee51\u4e3a\u6839\u7684\u6709\u5411\u56fe\u751f\u6210\u6811\u8ba1\u6570\n\n\u505a\u6cd5\uff1a\n\u5bf9\u4e8e\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u6211\u4eec\u6784\u9020\u5982\u4e0b $A$ \u77e9\u9635\uff1a\uff08\u5176\u4e2d $ai$, $j$ \u8868\u793a\u77e9\u9635\u7b2c $i$ \u884c\u7b2c $j$ \u5217\u7684\u5143\u7d20\uff09\n\u5bf9\u4e8e $i!=j$\uff0c$a_{ij}$, \u4e3a $i$ \u5230 $j$ \u7684\u8fb9\u6570\u7684\u76f8\u53cd\u6570\uff1b\n$a_{ii}$ \u4e3a $i$ \u7684\u51fa\u5ea6\u3002\n\u90a3\u4e48\u8fd9\u4e2a\u77e9\u9635\u5220\u53bb\u7b2c 1 \u884c\u7b2c 1 \u5217\u4e4b\u540e\u7684\u884c\u5217\u5f0f\u4e3a\u4ee5 1 \u53f7\u70b9\u4e3a\u6839\u7684\u6811\u5f62\u56fe\u7684\u6570\u91cf\u3002\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<cstring>\nusing namespace std;\ninline int read()\n{\n\tint k=0,f=1;char c=getchar();\n\tfor(;!isdigit(c);c=getchar()) if(c=='-') f=-1;\n\tfor(;isdigit(c);c=getchar()) k=k*10+c-'0';return f*k;\n}\nconst int mod=10007;\nint n,m,a[255][255],w[255][255];\nint ksm(int x,int k) {int as=1;for(;k;k>>=1,x=x*x%mod) if(k&1) as=as*x%mod;return as;}\nint gauss()\n{\n\tint now=1,as=1;\n\tfor(int i=2;i<=n;i++)\n\t{\n\t\tint pos=i;\n\t\tfor(;pos<=n;pos++) if(a[pos][i]) break;\n\t\tif(pos!=i)\n\t\t{\n\t\t\tnow=-now;\n\t\t\tfor(int j=2;j<=n;j++) swap(a[i][j],a[pos][j]);\n\t\t}\n\t\tif(!a[i][i]) return 0;as=as*a[i][i]%mod;\n\t\tint inv=ksm(a[i][i],mod-2);\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tif(!a[j][i]) continue;\n\t\t\tint mul=a[j][i]*inv%mod;\n\t\t\tfor(int k=2;k<=n;k++)\n\t\t\ta[j][k]=(a[j][k]-a[i][k]*mul)%mod;\n\t\t}\n\t}\n\tas=as*now;\n\treturn (as%mod+mod)%mod;\n}\nint main()\n{\n\tint b,c;\n\tn=read();m=read();\n\tfor(int i=1;i<=m;i++)\n\tb=read(),c=read(),a[b][c]-=1,a[b][b]++;\n\tfor(int i=1;i<=n;i++)\n\tfor(int j=1;j<=n;j++)\n\tif(a[i][j]<0) a[i][j]+=mod;\n\tcout<<gauss()<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1524144608,
        "uid": 36103,
        "name": "wxgwxg",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 P4455 \u3010[CQOI2018]\u793e\u4ea4\u7f51\u7edc\u3011"
    }
]
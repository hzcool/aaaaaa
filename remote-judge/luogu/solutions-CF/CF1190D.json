[
    {
        "content": "> [LG \u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1190D) & [CF \u9898\u9762\u4f20\u9001\u95e8](http://codeforces.ml/problemset/problem/1190/D)\u3002\n\n> \u9898\u610f\u7b80\u8ff0\uff1a\u4e00\u4e2a\u4e8c\u7ef4\u5e73\u9762\u5185\u6709 $n$ \u4e2a\u70b9\uff0c\u4f60\u53ef\u4ee5\u753b\u4e00\u4e2a\u5411\u4e0a\u5f00\u53e3\u7684\u77e9\u5f62\uff0c\u6c42\u8be5\u77e9\u5f62\u80fd\u5305\u542b\u591a\u5c11\u79cd\u4e0d\u540c\u7684\u975e\u7a7a\u70b9\u96c6\u3002\n\n\u8fd9\u6076\u610f\u8bc4\u5206\u592a\u660e\u663e\u3002\n\n\u8fd9\u9898\u662f\u6211\u6253\u8fc7\u7684\u7b2c\u4e00\u573a CF \u91cc\u9762\u7684\u3002\u5f53\u65f6\u6211\u8fd8\u662f\u592a naive \u4e86\u3002\n\n---\n\n\u6392\u5e8f\u662f\u5fc5\u8981\u7684\u3002\u5c06\u6240\u6709\u7684\u70b9\u4ee5 $y$ \u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c$x$ \u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u3002\n\n\u8003\u8651\u5f53\u524d\u904d\u5386\u5230\u70b9 $i$\uff0c\u90a3\u4e48\u5176\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff08\u5305\u542b\u70b9 $i$ \u4e14\u4e0d\u5305\u542b\u4efb\u4f55\u7f16\u53f7\u5927\u4e8e $i$ \u7684\u70b9\u7684\u5f00\u53e3\u957f\u65b9\u5f62\u4e2a\u6570\uff09\u4e3a\uff1a$ansl\\times ansr$\u3002\n\n- $ansl$ \u8868\u793a\u524d $i$ \u4e2a\u70b9\u843d\u5728\u533a\u95f4 $[-\\infty,x_i]$ \u7684\u4e0d\u540c\u6a2a\u5750\u6807\u4e2a\u6570\u3002\n\n- $ansr$ \u8868\u793a\u524d $i$ \u4e2a\u70b9\u843d\u5728\u533a\u95f4 $[x_i,\\infty]$ \u7684\u4e0d\u540c\u6a2a\u5750\u6807\u4e2a\u6570\u3002\n\n\u5176\u5b9e\u5f88\u5bb9\u6613\u7406\u89e3\uff1a\u56e0\u4e3a\u8981\u5305\u542b\u70b9 $i$\uff0c\u6240\u4ee5 $l<x_i<r$\u3002\u5de6\u90e8\u4e0d\u540c\u7684\u70b9\u96c6\u5171\u6709 $ansl$ \u79cd\uff08\u6bcf\u4e2a\u843d\u5728\u533a\u95f4 $[-\\infty,x_i]$ \u7684\u6a2a\u5750\u6807\u5de6\u8fb9\uff09\uff0c\u53f3\u90e8\u4e0d\u540c\u7684\u70b9\u96c6\u5171\u6709 $ansr$ \u79cd\uff08\u6bcf\u4e2a\u843d\u5728\u533a\u95f4 $[x_i,\\infty]$ \u7684\u6a2a\u5750\u6807\u53f3\u8fb9\uff09\u3002\u6839\u636e\u4e58\u6cd5\u539f\u7406\uff0c\u70b9 $i$ \u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662f $ansl\\times ansr$\u3002\n\n**\u4f46\u662f\uff01\u5982\u679c\u7eb5\u5750\u6807\u76f8\u540c\uff0c\u4e0d\u5c31 GG \u4e86\u5417\uff1f\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u8981\u4fdd\u8bc1 $y$ \u76f8\u540c\u65f6\uff0c$x$ \u8981\u6709\u5e8f\u3002**\n\n**\u5f53 $y_i=y_{i+1}$ \u65f6\uff1a**\n\n- \u5982\u679c $x$ \u4ece\u5c0f\u5230\u5927\u6392\uff0c\u90a3\u4e48 $ansr$ \u8981\u53d8\u6210\u524d $i$ \u4e2a\u70b9\u843d\u5728\u533a\u95f4 $[x_i,x_{i+1})$ \u7684\u4e0d\u540c\u6a2a\u5750\u6807\u4e2a\u6570\uff0c\u8fd9\u6837\u624d\u80fd\u4fdd\u8bc1\u4e0d\u5305\u542b\u4efb\u4f55\u7f16\u53f7\u5927\u4e8e $i$ \u7684\u70b9\uff08\u60f3\u4e00\u60f3\uff0c\u4e3a\u4ec0\u4e48\uff09\u3002\n\n- \u5982\u679c $x$ \u4ece\u5927\u5230\u5c0f\u6392\uff0c\u90a3\u4e48 $ansl$ \u8981\u53d8\u6210\u524d $i$ \u4e2a\u70b9\u843d\u5728\u533a\u95f4 $(x_{i+1},x_i]$ \u7684\u4e0d\u540c\u6a2a\u5750\u6807\u4e2a\u6570\uff0c\u539f\u56e0\u540c\u4e0a\u3002\n\n\u8ba1\u7b97\u5f53\u524d\u843d\u5728\u533a\u95f4 $[l,r]$ \u7684\u4e0d\u540c\u6a2a\u5750\u6807\u4e2a\u6570\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\u8f7b\u677e\u5b9e\u73b0\u3002\u5982\u679c\u4e0d\u52a8\u6001\u5f00\u70b9\uff0c\u90a3\u4e48\u8fd8\u9700\u5c06\u6240\u6709\u6a2a\u5750\u6807\u79bb\u6563\u5316\u3002\n\n```cpp\nconst int N=2e5+5;\n\nstruct point{\n\tint x,y;\n\tbool operator < (const point &v) const {\n\t\treturn y==v.y?x>v.x:y>v.y;\n\t}\n}c[N];\n\nint n,p[N],sz;\nll ans;\n\nint val[N<<2];\nvoid modify(int l,int r,int pos,int x){\n\tif(l==r){\n\t\tval[x]=1;\n\t\treturn;\n\t}\n\tint m=l+r>>1;\n\tif(pos<=m)modify(l,m,pos,x<<1);\n\telse modify(m+1,r,pos,x<<1|1);\n\tval[x]=val[x<<1]+val[x<<1|1];\n}\nint query(int l,int r,int ql,int qr,int x){\n\tif(ql<=l&&r<=qr)return val[x];\n\tint m=l+r>>1,ans=0;\n\tif(ql<=m)ans+=query(l,m,ql,qr,x<<1);\n\tif(m<qr)ans+=query(m+1,r,ql,qr,x<<1|1);\n\treturn ans;\n}\n\nint main(){\n\tn=read();\n\tfor(int i=1;i<=n;i++)c[i].x=p[i]=read(),c[i].y=read();\n\tsort(p+1,p+n+1),sz=unique(p+1,p+n+1)-p-1;\n\tfor(int i=1;i<=n;i++)c[i].x=lower_bound(p+1,p+sz+1,c[i].x)-p;\n\tsort(c+1,c+n+1);\n\tfor(int i=1;i<=n;i++){\n\t\tmodify(1,sz,c[i].x,1);\n\t\tans+=1ll*query(1,sz,(c[i+1].y==c[i].y?c[i+1].x+1:1),c[i].x,1)*query(1,sz,c[i].x,sz,1);\n\t}\n\tcout<<ans<<endl;\n\treturn 0; \n}\n```\n\n\u8981\u662f\u5f53\u65f6\u6211\u60f3\u5230\u8fd9\u79cd\u89e3\u6cd5\u591a\u597d\u554a\uff0c\u4f46\u662f\u6211\u592a\u83dc\u4e86\u3002",
        "postTime": 1585658659,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1190D \u3010Tokitsukaze and Strange Rectangle\u3011"
    },
    {
        "content": "~~\u626b\u63cf\u7ebf\u677f\u5b50\u9898\uff1f~~\n\n\u9996\u5148\u79bb\u6563\u5316\u662f\u7406\u6240\u5f53\u7136\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u77e9\u5f62\u65e0\u4e0a\u754c\uff0c\u6211\u4eec\u8003\u8651\u6309$y$\u6392\u5e8f\uff0c\u4ece\u4e0a\u5f80\u4e0b\u679a\u4e3e$y$\u3002~~\uff08\u5176\u5b9e\u4e5f\u7b97\u662f\u51fa\u9898\u4eba\u7684\u6697\u793a\uff09~~\n\n\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u662f\u5982\u4f55\u7edf\u8ba1\u4e0b\u754c\u4e3a$y$\u7684\u77e9\u5f62\u6570\u91cf\uff0c\u4e8b\u5b9e\u4e0a\u6211\u4eec\u53ea\u5173\u5fc3\u77e9\u5f62\u7684$l$\u548c$r$,\u81ea\u7136\u800c\u7136\u60f3\u5230\u679a\u4e3e,\u679a\u4e3e\u4ec0\u4e48\uff1f$l,r$\uff1f$No$\u679a\u4e3e$l$\u548c$r$\u4f1a\u8ba9\u590d\u6742\u5ea6\u7206\u70b8\u3002\n\n\u8003\u8651\u5982\u4f55\u4f18\u5316\uff0c~~\uff08\u5f53\u7136\u662f\u6362\u4e2a\u4e1c\u897f\u679a\u4e3e\uff09~~\n\u6211\u4eec\u9009\u62e9\u679a\u4e3e$y$\u76f8\u540c\u7684\u70b9\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u70b9$(x_1,y_1)$\uff0c\u5728$x=x_1$\u5de6\u4fa7\u7684\u70b9\u4f1a\u5bf9$l$\u4ea7\u751f\u8d21\u732e\uff0c\u5728$x=x_1$\u53f3\u4fa7\u7684\u70b9\u4f1a\u5bf9$r$\u4ea7\u751f\u8d21\u732e\u3002\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u8fd9\u6837\u6709**\u91cd\u590d**\u7684\u77e9\u5f62\uff01\n\n~~\u4ed4\u7ec6~~\u601d\u8003\u4e00\u6ce2\uff0c\u4e8b\u5b9e\u4e0a\u4e0d\u540c\u7684$l$\u4ea7\u751f\u7684\u77e9\u5f62\u662f\u4e0d\u540c\u7684\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u70b9$(x_i,y_i)$\uff0c\u53ea\u6709\u5728$x=x_{i-1}$(\u8fd9\u91cc$y_{i-1}=y_i$)\u5230$x=x_i$\u4e4b\u95f4\u7684$l$\u8fd8\u6ca1\u6709\u88ab\u7edf\u8ba1\u8fc7\u3002\u8fd9\u6837\u6211\u4eec\u53ea\u9700\u8981\u7edf\u8ba1$x=x_i$\u53f3\u4fa7\u7684\u70b9\u548c$x=x_{i-1}$\u5230$x=x_i$\u4e4b\u95f4\u7684\u70b9\u7684\u6570\u91cf\uff0c\u518d\u6839\u636e\u4e58\u6cd5\u539f\u7406\u5f97\u5230\u7b54\u6848\u5c31\u884c\u4e86\u3002\n\n\u840c\u65b0\uff1a\u7edf\u8ba1\u8981$O(n)$\u679a\u4e3e\u554a\u3002\n\n\u795e\u7287\uff1a\u51fa\u95e8\u5de6\u8f6c\u6811\u72b6\u6570\u7ec4\u3002\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst ll maxn=200010;\nconst ll INF=2147483647;\nstruct node\n{\n\tll x,y;\n}a[maxn];\nnode r[maxn];\nbool cmpy(node x,node y)\n{\n\tif(x.y == y.y)return x.x < y.x;\n\treturn x.y > y.y;\n}\nll n,ix[maxn],iy[maxn],totx,toty,cnt[maxn],tot,res;\nbool vis[maxn];\nll lowbit(ll x)\n{\n\treturn x & (-x);\n}\nvoid update(ll x)\n{\n\twhile(x <= n)\n\t{\n\t\tcnt[x]++;\n\t\tx += lowbit(x);\n\t}\n\treturn;\n}\nll qry(ll x)\n{\n\tll tem = 0;\n\twhile(x)\n\t{\n\t\ttem += cnt[x];\n\t\tx -= lowbit(x);\n\t}\n\treturn tem;\n}\nint main()\n{\n\tcin>>n;\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tcin>>a[i].x>>a[i].y;\n\t\tix[i] = a[i].x;\n\t\tiy[i] = a[i].y;\n\t}\n\tsort(ix + 1,ix + n + 1);\n\tsort(iy + 1,iy + n + 1);\n\ttotx = unique(ix + 1,ix + n + 1) - ix - 1;\n\ttoty = unique(iy + 1,iy + n + 1) - iy - 1;\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\ta[i].x = lower_bound(ix + 1,ix + totx + 1,a[i].x) - ix;\n\t\ta[i].y = lower_bound(iy + 1,iy + toty + 1,a[i].y) - iy;\n\t}\n\t//for(int i = 1;i <= n;i++)cout<<i<<\" \"<<a[i].x<<\" \"<<a[i].y<<endl;\n\tsort(a + 1,a + n + 1,cmpy);\n\tfor(int i = 1;i <= n;i++)\n\t{\n\t\tif(i < n && a[i].y == a[i + 1].y)\n\t\t{\n\t\t\tif(!vis[a[i].x])\n\t\t\t{\n\t\t\t\tupdate(a[i].x);\n\t\t\t\tvis[a[i].x] = 1;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif(!vis[a[i].x])\n\t\t{\n\t\t\tupdate(a[i].x);\n\t\t\tvis[a[i].x] = 1;\n\t\t}\n\t\tll pos = i;\n\t\twhile(a[pos - 1].y == a[pos].y && pos > 1)pos--;\n\t\tll item = 0;\n\t\tfor(int j = pos;j <= i;j++)\n\t\t{\n\t\t\tres += 1ll * (qry(n) - qry(a[j].x - 1))*(qry(a[j].x) - qry(item));\n\t\t\t//cout<<j<<\" \"<<res<<\"\\n\";\n\t\t\titem = a[j].x;\n\t\t}\n\t}\n\tcout<<res;\n\treturn 0;\n}\n```\n",
        "postTime": 1563113827,
        "uid": 64166,
        "name": "Frozencode",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1190D \u3010Tokitsukaze and Strange Rectangle\u3011"
    },
    {
        "content": "\u5c0f\u6e05\u65b0\u8ba1\u6570\u9898\u3002\n\n\u8003\u8651\u5bf9\u4e8e\u6240\u6709\u70b9\u6309 $y$ \u503c\u5927\u5c0f\u6392\u5e8f\uff0c\u7531\u4e0a\u5230\u4e0b\u7b97\u8d21\u732e\uff0c\u6709\u5de6\u5230\u53f3\u7b97\u8d21\u732e\uff0c\u6bcf\u4e2a\u70b9\u7b97**\u81ea\u5df1\u5fc5\u9009**\u80fd\u9020\u6210\u7684\u8d21\u732e\u3002\u8003\u8651\u6709\u54ea\u51e0\u79cd\u8d21\u732e\u3002\n\n\u5bf9\u5de6\u8fb9\u6240\u6709 $x$ \u503c\u6bd4\u5b83\u5c0f\uff0c$y$ \u503c\u4e0d\u5c0f\u4e8e\u5b83\u7684\u8d21\u732e\uff1a\n\n&nbsp;&nbsp;&nbsp;\u6b64\u65f6\u76f8\u5f53\u4e8e\u8ba1\u7b97\u5f53\u524d\u70b9\u7684 $x$ \u524d\u9762\u6709\u591a\u5c11\u79cd\u4e0d\u540c\u7684 $x$ \u503c\u3002\n\n\u5bf9\u53f3\u8fb9\u6240\u6709 $x$ \u503c\u4e0d\u5c0f\u4e8e\u5b83\uff0c$y$ \u503c\u4e0d\u5c0f\u4e8e\u5b83\u7684\u8d21\u732e\uff1a\n\n&nbsp;&nbsp;&nbsp;\u53d1\u73b0\u5982\u679c\u7b97\u5165\u4e86 $y$ \u503c\u4e0e\u5b83\u76f8\u540c\u4e14 $x$ \u6bd4\u5b83\u5927\u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u5728\u8ba1\u7b97\u540e\u9762\u8fd9\u4e2a $x$ \u65f6\u8fd9\u6bb5\u533a\u95f4\u4e5f\u4f1a\u91cd\u590d\u7b97\u4e00\u6b21\u3002\u56e0\u6b64\u6b64\u65f6\u7684 $x$ \u8ba1\u7b97\u8303\u56f4\u5e94\u8be5\u4ece\u5f53\u524d $x$ \u5f00\u59cb\uff0c\u5230\u4e0b\u4e00\u4e2a $x_{next}-1$ \u7ed3\u675f\u3002\n\n\u5bf9\u6240\u6709\u8de8\u5b83\u7684\u533a\u95f4\uff1a\n\n&nbsp;&nbsp;&nbsp;\u53d1\u73b0\u5c31\u662f\u4e0a\u9762\u4e24\u79cd\u60c5\u51b5\u5de6\u53f3\u62fc\u51d1\u4e00\u4e0b\u5373\u53ef\uff0c\u56e0\u6b64\u5c31\u662f $l_{ans}\\times r_{ans}$ \u3002\n\n## code\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define IN inline\n#define RI register\n#define I inline ll\n#define V inline void\n#define B inline bool\n#define vd void()\n#define db double\nusing namespace std;\nconst ll maxn=2e5+10;\n\nll n;\nstruct Node{\n\tll x,y;\n}q[maxn];\nll c[maxn];\nll d[maxn];\nll ln;\nll ld;\n\nI read(){\n\tll x=0,f=0;char c=getchar();\n\twhile(!isdigit(c)) f|=c=='-',c=getchar();\n\twhile(isdigit(c)) x=(x<<1)+(x<<3)+(c^48),c=getchar();\n\treturn f?-x:x; \n}\n\nB cmp(Node dx,Node dy) {return (dx.y==dy.y)?dx.x<dy.x:dx.y>dy.y;}\n\nbool ik[maxn];\nll ans;\n\nstruct Tree{\n\tll tr[maxn];\n\tI lowbit(ll x) {return x&(-x);}\n\tV ins(ll x) {while(x<=ld) ++tr[x],x+=lowbit(x);}\n\tI qry(ll x) {ll re=0;while(x)re+=tr[x],x-=lowbit(x);return re;}\n}tr,tr2;\n\nsigned main(){\n\tn=read();\n\tfor(RI int i=1;i<=n;++i) q[i].x=read(),q[i].y=read();\n\tfor(RI int i=1;i<=n;++i) d[i]=q[i].x,c[i]=q[i].y;\n\tsort(c+1,c+n+1),sort(d+1,d+n+1);\n\tln=unique(c+1,c+n+1)-c-1,ld=unique(d+1,d+n+1)-d-1;\n\tfor(RI int i=1;i<=n;++i) q[i].y=lower_bound(c+1,c+ln+1,q[i].y)-c;\n\tfor(RI int i=1;i<=n;++i) q[i].x=lower_bound(d+1,d+ld+1,q[i].x)-d;\n\tsort(q+1,q+n+1,cmp);\n\tfor(RI int i=1;i<=n;++i){\n\t\t++ans;\n\t\tll re=tr.qry(q[i].x-1);\n\t\tll tk=tr2.qry(ld-q[i].x);\n\t\tif(q[i+1].y==q[i].y) \n\t\t\ttk-=tr2.qry(ld-q[i+1].x+1);\n\t\tans+=re+tk;\n\t\tif(re&&tk) ans+=max(1ll,re)*max(1ll,tk);\n\t\tif(!ik[q[i].x]) tr.ins(q[i].x),tr2.ins(ld-q[i].x+1),ik[q[i].x]=1;\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n} \n```\n\n",
        "postTime": 1657500198,
        "uid": 104163,
        "name": "XeniaF",
        "ccfLevel": 7,
        "title": "CF1190D"
    },
    {
        "content": "### \u79bb\u6563\u5316+\u6811\u72b6\u6570\u7ec4\n\n\u6839\u636e\u6570\u636e\u8303\u56f4\uff0c$1 \\leq n \\leq 2*10^{5},1 \\leq x_{i},y_{i} \\leq 10^{9}$\uff0c\u79bb\u6563\u5316\u5f88\u597d\u60f3\u5230\n\n\u81f3\u4e8e\u5982\u4f55\u5b9e\u73b0\u79bb\u6563\u5316\u5728\u6b64\u4e0d\u518d\u591a\u8bb2\n\n\u7531\u4e8e\u8fd9\u4e2a\u77e9\u5f62\u6ca1\u6709\u4e0a\u5c4a\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u4ece\u4e0a\u5230\u4e0b\u679a\u4e3e\u7eb5\u5750\u6807\n\n\u63a5\u7740\u80af\u5b9a\u4e0d\u80fd\u518d\u679a\u4e3e$x=l,r$\uff0c\u90a3\u4e48\u8003\u8651\u4f18\u5316\n\n\u5bf9\u4e8e\u70b9$(x_{i},y_{i})$\uff0c\u5728\u76f4\u7ebf$x=x_{i}$\u5de6\u4fa7\u7684\u70b9\u4f1a\u5bf9$l$\u4ea7\u751f\u8d21\u732e\uff1b\u540c\u7406\uff0c\u53f3\u4fa7\u7684\u70b9\u4f1a\u5bf9$r$\u4ea7\u751f\u8d21\u732e\u3002\u4f46\u662f\u8fd9\u6837\u4e0d\u80fd\u6392\u9664\u91cd\u590d\u7684\u77e9\u5f62\n\n\u4e0d\u8fc7\uff0c\u5bf9\u4e8e\u70b9$x_{i}$,\u6211\u4e48\u53ea\u8981\u7edf\u8ba1\u6a2a\u5750\u6807\u4ece$x_{i-1}$\u5230$x_{i}$\u4e2d\u7684\u70b9\u5c31\u884c\u4e86\u3002\n\n\u8fd9\u91cc\u5c31\u662f\u6bcf\u4e00\u4e2a\u70b9\u52a0\u8fdb\u53bb\uff0c\u7edf\u8ba1\u4e00\u4e2a\u533a\u95f4=>\n\n\u5355\u70b9\u4fee\u6539\u533a\u95f4\u67e5\u8be2=>\n\n\u6811\u72b6\u6570\u7ec4\n\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\n#include<iostream>\n#include<cstdio>\n#define ll long long\nusing namespace std;\n\nbool v[200010];\nll n,totx,toty,ans,X[200010],Y[200010],sum[200010];\nstruct node{\n\tll x,y;\n}a[200010];\n//sum\u662f\u6811\u72b6\u6570\u7ec4\u7684\u6c42\u548c\u6570\u7ec4\n//v[i]\u8868\u793a\u76f4\u7ebfx=i\u6709\u6ca1\u6709\u88ab\u7edf\u8ba1\n\ninline ll read(){\n\tll x=0,tmp=1;\n\tchar ch=getchar();\n\twhile(!isdigit(ch)){\n\t\tif(ch=='-') tmp=-1;\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)){\n\t\tx=(x<<3)+(x<<1)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn tmp*x;\n}\n\ninline bool cmp(node a,node b){\n\treturn a.y==b.y?a.x<b.x:a.y>b.y;\n}\n\ninline ll lowbit(ll x){\n\treturn x&(-x);\n}\n\ninline void update(ll x){\n\twhile(x<=n){\n\t\tsum[x]++;\n\t\tx+=lowbit(x);\n\t}\n\treturn;\n}\n\ninline ll query(ll x){\n\tll ans=0;\n\twhile(x){\n\t\tans+=sum[x];\n\t\tx-=lowbit(x);\n\t}\n\treturn ans;\n}\n\nint main(){\n\tn=read();\n\tfor(ll i=1; i<=n; i++){\n\t\tX[i]=a[i].x=read();\n\t\tY[i]=a[i].y=read();\n\t}\n\tsort(X+1,X+1+n);\n\tsort(Y+1,Y+1+n);\n\ttotx=unique(X+1,X+1+n)-X-1;\n\ttoty=unique(Y+1,Y+1+n)-Y-1;\n\tfor(ll i=1; i<=n; i++){\n\t\ta[i].x=lower_bound(X+1,X+1+totx,a[i].x)-X;\n\t\ta[i].y=lower_bound(Y+1,Y+1+toty,a[i].y)-Y;\n\t}//\u79bb\u6563\u5316\n   \n\tsort(a+1,a+1+n,cmp);\n\tfor(ll i=1; i<=n; i++){\n\t\tif(i<n&&a[i].y==a[i+1].y){//\u4e00\u4e2a\u70b9\u548c\u540e\u9762\u7684\u70b9\u6a2a\u5750\u6807\u76f8\u540c\n\t\t\tif(!v[a[i].x]){\n\t\t\t\tupdate(a[i].x);\n\t\t\t\tv[a[i].x]=1;//\u8bbf\u95ee\u8fc7\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif(!v[a[i].x]){//\u8fd9\u6761\u76f4\u7ebf\u6ca1\u8bbf\u95ee\u5230\n\t\t\tupdate(a[i].x);//\u5355\u70b9\u4fee\u6539\n\t\t\tv[a[i].x]=1;//\u6807\u8bb0\u4e3a\u8bbf\u95ee\n\t\t}\n\t\t//\u533a\u95f4\u67e5\u8be2\n\t\tll now=i;\n\t\twhile(a[now-1].y==a[now].y&&now>1) now--;\n\t\tll Next=0;\n\t\tfor(ll j=now; j<=i; j++){\n\t\t\tans+=(query(n)-query(a[j].x-1))*(query(a[j].x)-query(Next));\n\t\t\tNext=a[j].x;\n\t\t}\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```",
        "postTime": 1563537005,
        "uid": 27924,
        "name": "xukuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1190D \u3010Tokitsukaze and Strange Rectangle\u3011"
    }
]
[
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF540D)\n\n---\n\n\u6c34\u7d2b\uff0c\u8003\u573a\u4e0a\u4e8c\u5341\u5206\u949f\u6784\u601d\u52a0\u5199\u5b8c ~~\u53c8\u8c03\u4e86\u5341\u5206\u949f\uff0c\u8fd8\u662f\u82b1\u592a\u957f\u65f6\u95f4\u4e86~~\u3002\n\n\u8003\u8651\u5982\u4f55\u5b9a\u4e49 $\\text{dp}$\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a $\\text{r,s,p}$ \u975e\u5e38\u5c0f\uff0c$\\Theta$($n^3$) \u5b8c\u5168\u6ca1\u95ee\u9898\u3002\n\n\u6839\u636e\u6570\u636e\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u4e09\u7ef4\u7684 $dp_{i,j,k}$\uff0c\u8868\u793a\u5269\u4e0b $\\text{i}$ \u4e2a $\\text{r}$\uff0c$\\text{j}$ \u4e2a $\\text{s}$\uff0c$\\text{k}$ \u4e2a $\\text{p}$ \u7684\u6982\u7387\u3002\n\n\u90a3\u4e48\uff0c\u5bf9\u4e8e\u5355\u72ec\u4e00\u79cd\uff0c\u4f8b\u5982 $r$ \u79cd\uff0c\u5b83\u8fd9\u4e2a\u79cd\u65cf\u7684\u5b58\u6d3b\u7684\u6982\u7387 $\\sum_{1}^{r} dp_{i,0,0}$\u3002\n\n\u8003\u8651\u9012\u63a8\u5f0f\uff1a\n\n\u8bbe $tot = i * j + j * k + k * i$\uff0c\u4e5f\u5c31\u662f\u6240\u6709\u76f8\u9047\u7684\u4e8b\u4ef6\u3002\n\n$\\operatorname{r}$ \u5bf9 $\\operatorname{s}$\uff0c$\\operatorname{s}$ \u4eba\u6570\u51cf\u5c11\u4e00\u4eba\uff0c\u76f8\u9047\u6982\u7387\u4e3a $i * j / tot$\uff0c\n\n$\\operatorname{s}$ \u5bf9 $\\operatorname{p}$\uff0c\n$\\operatorname{p}$ \u4eba\u6570\u51cf\u5c11\u4e00\u4eba\uff0c\u76f8\u9047\u6982\u7387\u4e3a $j * k / tot$\uff0c\n\n$\\operatorname{p}$ \u5bf9 $\\operatorname{r}$\uff0c$\\operatorname{r}$ \u4eba\u6570\u51cf\u5c11\u4e00\u4eba\uff0c\u76f8\u9047\u6982\u7387\u4e3a $k * i / tot$\u3002\n\n\u6839\u636e\u4e0a\u8ff0\u6761\u4ef6\uff0c\u53ef\u5806\u51fa\u8f6c\u79fb\u5f0f\uff0c\u6ce8\u610f\u8fb9\u754c\u6761\u4ef6\u3002\n\n```cpp\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\ntemplate<typename T>void read(T &x) {\n    T f = 1;x = 0;char s = getchar();\n    while(s < '0' || s > '9') {if(s == '-')f = -1;s = getchar();}\n    while(s >= '0' && s <= '9') {x = x * 10 + s - '0';s = getchar();}\n    x *= f;\n}\ntemplate<typename T>void print(T x) {\n    if(x < 0) putchar('-'),x = -x;\n    if(x > 9) print(x / 10);\n    putchar(x % 10 + '0');\n}\n\nconst int maxn = 105;\n\nint r,s,p;\ndouble dp[maxn][maxn][maxn],rwin,swin,pwin;\n\nint main () {\n\tscanf (\"%d %d %d\",&r,&s,&p);\n\tdp[r][s][p] = 1.0;\n\tfor (int i = r ; i >= 0 ; -- i) {\n\t\tfor (int j = s ; j >= 0 ; -- j) {\n\t\t\tfor (int k = p ; k >= 0 ; -- k) {\n\t\t\t\tdouble tot = i * j + j * k + i * k;\n\t\t\t\tif (i && j) dp[i][j - 1][k] += dp[i][j][k] * i * j / tot;\n\t\t\t\tif (j && k) dp[i][j][k - 1] += dp[i][j][k] * j * k / tot;\n\t\t\t\tif (k && i) dp[i - 1][j][k] += dp[i][j][k] * i * k / tot;\n\t\t\t\tif (i && !j && !k) rwin += dp[i][j][k];\n\t\t\t\tif (!i && j && !k) swin += dp[i][j][k];\n\t\t\t\tif (!i && !j && k) pwin += dp[i][j][k]; \n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%.12f %.12f %.12f\",rwin,swin,pwin);\n\treturn 0;\n}\n```",
        "postTime": 1597391519,
        "uid": 163516,
        "name": "Strelitzia",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF540D \u3010Bad Luck Island\u3011"
    },
    {
        "content": "[CF540D](https://www.luogu.com.cn/problem/CF540D)\n\n\u663e\u800c\u6613\u89c1\u5730\u8054\u60f3\u5230\u77f3\u5934\u526a\u5200\u5e03\u3002\n\n$f[i][j][k]$\u8868\u793a\u5f53\u524d\u6709i\u4e2a\u526a\u5200\uff0cj\u4e2a\u5e03\uff0ck\u4e2a\u77f3\u5934\u7684\u6982\u7387\n\n\u9898\u76ee\u8981\u6c42\u7559\u4e0b\u5355\u4e00\u79cd\u65cf\uff0c\u7528\u526a\u5200\u4e3e\u4f8b\uff0c\u90a3\u4e48\u5c31\u662f$f[i][0][0],i \\in [1,r]$\u7684\u548c\u3002\n\n\u540c\u65f6\u8003\u8651\u72b6\u6001\u8f6c\u79fb\uff0c\u663e\u7136\u6ca1\u6709\u5e73\u5c40\u60c5\u51b5\uff0c\u56e0\u6b64\u6bcf\u6b21i,j,k\u4e2d\u5fc5\u7136\u6709\u4e00\u4e2a\u8981-1\n\n\u540c\u65f6\u51fa\u73b0i,j,k\u4e2d\u6709\u4e00\u4e2a-1\u7684\u603b\u6982\u7387\u5e94\u8be5\u662f$i*j+j*k+k*i$\uff08\u8fd9\u4e2a\u5e94\u8be5\u4e0d\u7528\u89e3\u91ca\uff09\n\n\u540c\u65f6\u526a\u5200\u8d62\u5e03\u5e94\u8be5\u662fi*j\u7684\uff08\u4e0d\u9700\u8981\u89e3\u91ca\uff09\n\n\u8003\u8651\u8fb9\u754c\uff0c\u663e\u7136\u8d62\u5bb6\u548c\u8f93\u5bb6\u90fd\u5fc5\u987b\u6709\u4e00\u4e2a\u624d\u80fd\u73a9\u8fd9\u4e00\u5c40\uff0c\u6bd4\u5982\u526a\u5200(i)\u8981\u8d62\u7684\u8bdd\uff0c\u5fc5\u987b\u4fdd\u8bc1\u6709\u4e00\u4e2a\u4ee5\u4e0a\u7684\u5e03($j\\ge1$)\u624d\u80fd\u8d62\u3002\n\n\u53e6\u5916\u80af\u5b9a\u6709\u5b66\u6821\u7684ppt\u4e2d\u8f6c\u79fb\u5199\u7684\u662f=\u800c\u4e0d\u662f\u52a0\u7b49\u4e8e\uff0c\u4f46\u662f\u4e3e\u4e00\u4e2ai,j,k\uff08\u8fd9\u91cc\u6682\u65f6\u4e0d\u8003\u8651\u8fb9\u754c\uff09\uff0c\u90a3\u4e48\u5c31\u6709$[i+1,j,k],[i,j+1,k],[i,j,k+1]$\u53ef\u4ee5\u8f6c\u79fb\uff0c\u6240\u4ee5\u8981\u5199\u6210+=\u3002\n\n\u8fd9\u4e2a\u65f6\u5019\u4ee3\u7801\u5c31\u5f88\u597d\u5199\u51fa\u6765\u4e86\uff1a\n\n```cpp\n#include<towenjian.h>\n\nusing namespace std;\n\ndouble f[110][110][110],rwin=0.0,swin=0.0,pwin=0.0;\nint r,s,p,tot;\n\nint main()\n{\n    scanf(\"%d %d %d\",&r,&s,&p);\n    int tot;\n    f[r][s][p]=1.0;\n    int i,j,k;\n    for(i=r;i>=0;i--)\n    for(j=s;j>=0;j--)\n    for(k=p;k>=0;k--)\n    {\n        tot=i*j+j*k+k*i;\n        if(i&&k) f[i-1][j][k]+=1.0*f[i][j][k]*k*i/tot;\n        if(j&&i) f[i][j-1][k]+=1.0*f[i][j][k]*i*j/tot;\n        if(k&&j) f[i][j][k-1]+=1.0*f[i][j][k]*j*k/tot;\n        if(!j&&!k&&i) rwin+=f[i][j][k];\n        if(!i&&!k&&j) swin+=f[i][j][k];\n        if(!i&&!j&&k) pwin+=f[i][j][k]; //\u5982\u679c\u770b\u4e0d\u61c2\u4e0a\u9762\u7684\u8bb2\u89e3\u53ef\u4ee5\u770b\u4ee3\u7801\u6765\u7406\u89e3\n    }\n    printf(\"%.9lf %.9lf %.9lf\",rwin,swin,pwin);\n}\n```\n\n",
        "postTime": 1585639221,
        "uid": 38636,
        "name": "\u5bd2\u51b0\u5927\u5927",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF540D \u3010Bad Luck Island\u3011"
    },
    {
        "content": "\u4e00\u770b\u5c31\u662fDP\u9898~~\uff08\u5f88\u6c34\u7684\u4e00\u9053\u7d2b\u9898\uff09~~\n\n\u8bbe$dp[i][j][k]$\u4e3a\u7559\u4e0b$i$\u4e2a$r$\u65cf\u7684\u4eba\uff0c\u6b7b\u53bb$j$\u4e2a$s$\u65cf\u7684\u4eba\uff0c\u6b7b\u53bb$k$\u4e2a$p$\u65cf\u7684\u4eba\u7684\u6982\u7387\uff08\u8ddf\u5176\u4ed6\u7684\u9898\u89e3\u6709\u70b9\u5dee\u522b\uff0c\u4f46\u672c\u8d28\u76f8\u540c\uff09\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ndouble dp[101][101][101];\nint a, b, c;\nint main() {\n    scanf(\"%d%d%d\", &a, &b, &c);\n    for (int i = 1; i <= 100; i++)\n        for (int j = 1; j <= 100; j++) {\n            dp[i][j][0] = 1;\n            for (int k = 1; k <= 100; k++)\n                dp[i][j][k] += (i * j * dp[i][j - 1][k] + j * k * dp[i][j][k - 1] + k * i * dp[i - 1][j][k]) / (i * j + j * k + k * i);\n        }\n    printf(\"%.12lf %.12lf %.12lf\\n\", dp[a][b][c], dp[b][c][a], dp[c][a][b]);\n    return 0;\n}\n```",
        "postTime": 1556934828,
        "uid": 13746,
        "name": "Trimsteanima",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF540D \u3010Bad Luck Island\u3011"
    },
    {
        "content": "# CF540D Bad Luck Island \u9898\u89e3\n\n## 0x01 \u9898\u610f\n\n\u5728\u5b64\u5c9b\u4e0a\u6709\u4e09\u79cd\u4eba\uff0c\u5206\u522b\u6709 $r,s,p$ \u4e2a\uff0c \u6bcf\u4e24\u4e2a\u4eba\u76f8\u9047\u7684\u6982\u7387\u76f8\u7b49\uff0c\u76f8\u9047\u65f6 $r$ \u5403 $s$\uff0c$s$ \u5403 $p$\uff0c$p$ \u5403 $r$\uff0c\u5206\u522b\u6c42\u6700\u540e\u5269\u4e0b\u4e00\u79cd\u79cd\u65cf\u7684\u6982\u7387\u3002\n\n## 0x02 \u89e3\n\n\u6982\u7387 $DP$\u3002\n\n\u56e0\u4e3a $r,s,p$ \u90fd\u5f88\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f00\u4e00\u4e2a\u4e09\u7ef4\u6570\u7ec4\u8bb0\u5f55\u73b0\u5728\u7684\u72b6\u6001\uff0c\u8bbe $f[i][j][k]$ \u8868\u793a\u53d1\u751f\u6709 $i$ \u4e2a $r$ \u79cd\u65cf\u7684\u4eba\u88ab\u5403\uff0c$j$ \u4e2a $s$ \u79cd\u65cf\u7684\u4eba\u88ab\u5403\uff0c$k$ \u4e2a $p$ \u79cd\u65cf\u7684\u4eba\u88ab\u5403\u8fd9\u4e2a\u4e8b\u4ef6\u7684\u6982\u7387\u3002\n\n\u8003\u8651\u7531\u4e00\u4e2a\u72b6\u6001\u80fd\u591f\u8f6c\u79fb\u5230\u54ea\u4e9b\u72b6\u6001\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u4ee5\u4e0b\u7ed3\u8bba\uff1a\n\n\u5bf9\u4e8e\u4e00\u4e2a\u5df2\u7ecf\u6c42\u51fa\u7684 $f[i][j][k]$\uff1a\n\n- \u5f53\u4e0b\u4e00\u6b21\u662f $r$ \u548c $s$ \u76f8\u9047\uff0c\u53ef\u4ee5\u8f6c\u79fb\u5230 $f[i][j+1][k]$\uff1b\n\n- \u5f53\u4e0b\u4e00\u6b21\u662f $s$ \u548c $p$ \u76f8\u9047\uff0c\u53ef\u4ee5\u8f6c\u79fb\u5230 $f[i][j][k+1] $\uff1b\n\n- \u5f53\u4e0b\u4e00\u6b21\u662f $r$ \u548c $p$ \u76f8\u9047\uff0c\u53ef\u4ee5\u8f6c\u79fb\u5230 $f[i+1][j][k]$\uff1b\n\n\u53ea\u8981\u6c42\u51fa\u76f8\u9047\u7684\u6982\u7387\u7d2f\u52a0\u5c31\u884c\u4e86\u3002\n\n\u5f53\u8f6c\u79fb\u5230\u53ea\u5269\u4e00\u4e2a\u79cd\u65cf\u65f6\uff0c\u8981\u7edf\u8ba1\u7b54\u6848\u3002\n\n## 0x03 \u7801\n\n```c++\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nconst int N=110;\ntemplate<typename T>\ninline void read(T &x){\n    x=0;bool flag=0;char c=getchar();\n    for(;!isdigit(c);c=getchar()) if(c=='-') flag=1;\n    for(;isdigit(c);c=getchar()) x=x*10+(c^48);\n    if(flag) x=-x;\n}\n\nint r,s,p;\ndouble f[N][N][N],ansr=0,anss=0,ansp=0;\n\nsigned main(){\n\n\tread(r),read(s),read(p);\n\tf[0][0][0]=1.0;\n\tfor(int i=0;i<=r;i++){\n\t\tfor(int j=0;j<=s;j++){\n\t\t\tfor(int k=0;k<=p;k++){\n\t\t\t\tdouble a=r-i,b=s-j,c=p-k,tot=a*b+b*c+c*a;\n\t\t\t\tif(a&&b) f[i][j+1][k]+=f[i][j][k]*a*b/tot;\n\t\t\t\tif(b&&c) f[i][j][k+1]+=f[i][j][k]*b*c/tot;\n\t\t\t\tif(c&&a) f[i+1][j][k]+=f[i][j][k]*a*c/tot;\n\t\t\t\tif(a&&!b&&!c) ansr+=f[i][j][k];\n\t\t\t\tif(!a&&b&&!c) anss+=f[i][j][k];\n\t\t\t\tif(!a&&!b&&c) ansp+=f[i][j][k];\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprintf(\"%.9lf %.9lf %.9lf\\n\",ansr,anss,ansp);\n\t\n    return 0;\n}\n```\n\n",
        "postTime": 1626783986,
        "uid": 81736,
        "name": "wsy_jim",
        "ccfLevel": 3,
        "title": "CF540D Bad Luck Island \u9898\u89e3"
    },
    {
        "content": "\u65e2\u7136\u6ca1\u6709\u5927\u4f6c\u5199\u9898\u89e3\u90a3\u672c\u849f\u84bb\u5c31\u539a\u989c\u65e0\u803b\u5730\u5199(~~\u6c34~~)\u4e00(~~\u7ecf~~)\u4e0b(~~\u9a8c~~)\u5427\n\n\u9898\u76ee\u8981\u6c42\u7b97\u51fa\u4e2a\u79cd\u4eba\u5355\u72ec\u7559\u4e0b\u7684\u5b58\u6d3b\u7387\n\n\u56e0\u4e3an,m,p\u7684\u8303\u56f4\u6781\u5c0f\uff0c\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u65b9\u4fbf\u5730\u8bbe3\u4f4ddp\u72b6\u6001dp[i][j][k]\u8868\u793a\u5269\u4f59i\u4e2a\u77f3\u5934\uff0cj\u4e2a\u526a\u5200\uff0ck\u4e2a\u5e03\u7684\u6982\u7387\n\n\u5f53\u524d\u7684\u76f8\u9047\u7684\u603b\u60c5\u51b5\u6570\u4e3ai*j+i*k+j*k\n\n\n\u5982\u679c\u9047\u5230\u7684\u4e24\u4e2a\u76f8\u540c\u7684\u4eba\u4e0d\u53d1\u751f\u53d8\u5316\u8f6c\u79fb\u53ef\u53ef\u4ee5\u5ffd\u7565\n\n\n\u5982\u679c\u9047\u5230\u4e0d\u540c\u7684\u4eba \u5404\u81ea\u7684\u60c5\u51b5\u5206\u522b\u4e3ai*j,i*k,j*k\n\n\u8f6c\u79fb\u65b9\u4ee5\u77f3\u5934\u526a\u5200\u76f8\u9047\u4e3a\u4f8b\u8f6c\u79fb\u65b9\u7a0b\u5c31\u4e3ai*jdp[i][j-1][k] += (i*j)/(i*j+i*k+j*k)*dp[i][j][k]\n\n\u6700\u540e\u7b97\u51fa\u5404\u81ea\u5728\u5176\u4ed6\u4eba\u4e3a0\u65f6\u81ea\u5df1\u4ece1\u5230\u6700\u5927\u7684\u6982\u7387\u7d2f\u52a0\u8d77\u6765\n\n\u8f93\u51fa\u5373\u53ef\n\n# \u4ee3\u7801\n```c\n#include<bits/stdc++.h> \nusing namespace std;\n#define ll long long\n#define C getchar()-48\ninline ll read()\n{\n    ll s=0,r=1;\n    char c=C;\n    for(;c<0||c>9;c=C) if(c==-3) r=-1;\n    for(;c>=0&&c<=9;c=C) s=(s<<3)+(s<<1)+c;\n    return s*r;\n} \nconst int N=1e2+10;\nint n,m,p;\ndouble dp[N][N][N];\nint main()\n{\n\tn=read(),m=read(),p=read();\n\tdp[n][m][p]=1.0;\n\tfor(int i=n;i>=0;i--)\n\tfor(int j=m;j>=0;j--)\n\tfor(int o=p;o>=0;o--)\n\t{\n\t\tif(i&&j) dp[i][j-1][o]+=(1.0*i*j/(i*j+j*o+i*o))*dp[i][j][o];\n\t\tif(j&&o) dp[i][j][o-1]+=(1.0*j*o/(i*j+j*o+i*o))*dp[i][j][o];\n\t\tif(i&&o) dp[i-1][j][o]+=(1.0*i*o/(i*j+j*o+i*o))*dp[i][j][o];\n\t}\t\n\tdouble ed1=0,ed2=0,ed3=0;\n\tfor(int i=1;i<=n;i++) ed1+=dp[i][0][0];\n\tfor(int j=1;j<=m;j++) ed2+=dp[0][j][0];\n\tfor(int o=1;o<=p;o++) ed3+=dp[0][0][o];\n\tprintf(\"%.10f %.10f %.10f\\n\",ed1,ed2,ed3);\n    return 0;\n}\n```",
        "postTime": 1549978557,
        "uid": 102510,
        "name": "q1436177712",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF540D \u3010Bad Luck Island\u3011"
    },
    {
        "content": "\u4e00\u4e2a\u8239\u65b0\u601d\u8def\n\n\u8bbe$f[i][j][k][id]$\u4e3a$RSP$\u5206\u522b\u6709$i,j,k$\u4e2a\uff0c\u6700\u540e\u53ea\u5269\u4e0b$id$\u8fd9\u4e2a\u79cd\u65cf\u7684\u6982\u7387\u3002$(id=0(R),1(S),2(P))$\n\n\u6709\u8f6c\u79fb\n\n```\nif (i!=0&&j!=0) f[i][j][k][id]+=(((double)(i*j)/(double)(i*j+j*k+k*i)))*f[i][j-1][k][id];\nif (j!=0&&k!=0) f[i][j][k][id]+=(((double)(j*k)/(double)(i*j+j*k+k*i)))*f[i][j][k-1][id];\nif (k!=0&&i!=0) f[i][j][k][id]+=(((double)(k*i)/(double)(i*j+j*k+k*i)))*f[i-1][j][k][id];\n```\n\n\u5de6\u8fb9\u662f\u679a\u4e3e\u51fa\u73b0\u4e24\u79cd\u4e0d\u540c\u79cd\u65cf\u7684\u6982\u7387\u3002\n\n\u6709\u4e00\u4e2a\u5751\u70b9\uff0c\u5c31\u662f\u5982\u679c\u6709\u4e24\u4e2a\u76f8\u540c\u7684\u79cd\u65cf\u4ed6\u4eec\u662f\u4e0d\u4f1a\u4e92\u76f8\u4f24\u5bb3\u7684\uff0c\u6240\u4ee5\u4e0d\u53ef\u4ee5\u7b97\u5230\u6982\u7387\u91cc\uff01\u6211\u88ab\u5751\u4e86\u5f88\u4e45\u3002\u3002\u3002\n\n\u6240\u4ee5\u6211\u5199\u4e86\u8bb0\u5fc6\u5316\u641c\u7d22\u3002\u3002\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ndouble f[102][102][102][3];\nint R,S,P,id;\ninline double dfs(int R,int S,int P,int id){\n    if (R>0&&S==0&&P==0&&id==0) return 1.0;\n    if (R==0&&S>0&&P==0&&id==1) return 1.0;\n    if (R==0&&S==0&&P>0&&id==2) return 1.0;\n    if (f[R][S][P][id]>0) return f[R][S][P][id];\n    f[R][S][P][id]=0;\n    if (R!=0&&S!=0) f[R][S][P][id]+=(((double)(R*S)/(double)(R*S+S*P+P*R)))*dfs(R,S-1,P,id);\n    if (S!=0&&P!=0) f[R][S][P][id]+=(((double)(S*P)/(double)(R*S+S*P+P*R)))*dfs(R,S,P-1,id);\n    if (P!=0&&R!=0) f[R][S][P][id]+=(((double)(P*R)/(double)(R*S+S*P+P*R)))*dfs(R-1,S,P,id);\n    return f[R][S][P][id];\n}\nint main(){\n    cin>>R>>S>>P;\n    for (int i=0;i<=R;i++){\n        for (int j=0;j<=S;j++){\n            for (int k=0;k<=P;k++){\n                for (int ii=0;ii<=2;ii++){\n                    f[i][j][k][ii]=-1.0;\n                }\n            }\n        }\n    }\n    printf(\"%.12lf %.12lf %.12lf\",dfs(R,S,P,0),dfs(R,S,P,1),dfs(R,S,P,2));\n    return 0;\n}\n```",
        "postTime": 1558334819,
        "uid": 20309,
        "name": "Fading",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF540D \u3010Bad Luck Island\u3011"
    },
    {
        "content": " **\u9996\u5148**\uff0c\u8fd9\u662f\u4e00\u9053\u6bd4\u8f83**\u7684\u7d2b\u9898\u7684  ~~(\u4e30\u5bcc\u60f3\u8c61\u7a7a\u95f4)~~\n   \n\u6211\u4eec\u5148\u8bbe f\uff08a,b,c\uff09\u4e3a\u5269\u4e0ba\u4e2ar\u65cf\u7684\u6982\u7387\uff0cb\u4e2as\u65cf\u7684\u6982\u7387\uff0cc\u4e2ap\u65cf\u7684\u6982\u7387  \n  \n  ![](https://cdn.luogu.com.cn/upload/pic/51504.png)\n  \n  \u4e0a\u9762\u5c31\u662f\u9012\u63a8\u7684\u5f0f\u5b50\uff0c\u4ece\u800c\u63a8\u51fa\u2193\n  ![](https://cdn.luogu.com.cn/upload/pic/51508.png )\n  \u800c\u8fd9\u4e2a\u7b80\u5355\u7684\u7b49\u5f0f\u5c31\u53ef\u4ee5\u7528\u6765\u9012\u5f52\u7684\uff0c\u4f46\u662f\u6700\u91cd\u8981\u7684\u9012\u5f52\u8fb9\u754c\u5462\uff1f\n  ![](https://cdn.luogu.com.cn/upload/pic/51509.png)\u663e\u800c\u6613\u89c1\u5427  \n  \u6700\u540e\u5728\u628a\u5404\u4e2a\u79cd\u65cf\u7684\u6982\u7387\u7d2f\u52a0\u4e00\u4e0b  \n  **\u4e0b\u9762\u662f\u4e00\u4e9b\u7ec6\u8282**\uff1a  \n  1\u3001\u5f53a>r||b>s||c>p\u65f6\u8981return 0\uff1b~~\uff08\u56e0\u4e3a\u662f\u8fbe\u4e0d\u5230\u7684\uff09~~  \n  2\u3001\u9700\u8981\u5224\u65ad\u4e00\u4e0b\uff0c\u8981\u662f\u9664\u4ee5\u96f6\u5c31\u5c34\u5c2c\u4e86~~  \n  3\u3001\u4e58\u9664\u7684\u65f6\u5019\u8981\u6ce8\u610f\u4e0b\u5f62\u5f0f\uff0c\u514d\u5f97C++\u7ed9\u81ea\u52a8\u4e0b\u53d6\u6574\u4e86  \n  4\u3001\u56e0\u4e3a\u662f\u9012\u5f52\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97\uff0c\u8981\u8bb0\u641c\u4e00\u4e0b  \n  5\u3001\u76f4\u63a5\u7528%lf\u8f93\u51fa\u53ea\u4f1a\u67096\u4f4d\uff0c\u52a0\u4e00\u4e2a .12 \u624d\u884c  \n   ~~** \u6211\u624d\u4e0d\u4f1a\u8bf4\u8fd9\u4e9b\u90fd\u662f\u6211\u72af\u8fc7\u7684\u9519\u8bef**~~  \n   \u4e0b\u9762\u5c31\u662f\u4ee3\u7801\uff08\u91cc\u9762\u6709\u4e00\u4e9b\u5c0f\u6ce8\u91ca\uff09\u2193\n   ```cpp\n#include<cstdio>\n#include<iostream>\n#include<cmath>\nusing namespace std;\ndouble r,s,p,qq,aa,bb,cc,ff[110][110][110];\nint a,b,c;\ndouble f(int a,int b,int c){\n\tif(ff[a][b][c]) return ff[a][b][c];//\u8bb0\u641c \n\tif(a > r || b > s || c > p) return 0;//\u9632RE \n\tif(a == r && b == s && c == p) return 1;//\u9012\u5f52\u8fb9\u754c \n\tdouble v=0,ll,kk;\n\tif(b!=0||c!=0){\n\t\tll =(a + 1) * c;\n\t\tkk =(((a+1) * b) + ((a + 1) * c) + (b * c));\n\t\tv += f(a+1,b,c) * (ll / kk);\n\t}\n\tif(a!=0||c!=0){\n\t\tll =(b + 1) * a;\n\t\tkk =(((b+1) * a) + ((b + 1) * c) + (a * c));\n\t\tv += f(a,b+1,c) * (ll / kk);\n\t}\n\tif(b!=0||a!=0){\n\t\tll = (c + 1) * b;\n\t\tkk = (((c+1) * b) + ((c + 1) * a) + (b * a));\n\t\tv += f(a,b,c+1) * (ll / kk);\n\t}\n\tff[a][b][c] = v;\n\treturn v;\n}\nint main(){\n\tscanf(\"%lf%lf%lf\",&r,&s,&p);\n\tfor(int i=r;i>0;i--) aa+=f(i,0,0);//\u4e0a\u4e0b\u7d2f\u52a0\u90fd\u53ef\u4ee5\u7684 \n\tfor(int i=s;i>0;i--) bb+=f(0,i,0);\n\tfor(int i=p;i>0;i--) cc+=f(0,0,i);\n\tprintf(\"%.12lf %.12lf %.12lf\",aa,bb,cc);\n}\n```",
        "postTime": 1549977742,
        "uid": 164682,
        "name": "pipi",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF540D \u3010Bad Luck Island\u3011"
    },
    {
        "content": "~~\u5176\u5b9e\u6211\u4e00\u5f00\u59cb\u770b\u5230\u662f ```*1900``` \u7684\u671f\u671b dp\uff0c\u5413\u5f97\u591f\u545b\u3002~~\n\n## \u601d\u8def\n\n### 1. dp \u5b9a\u4e49\uff1a\n\n\u9996\u5148\u53d1\u73b0\u8fd9\u9053\u9898\u6ca1\u6cd5\u8d2a\u5fc3\uff0c\u90a3\u5c31 dp\u3002\u53c2\u8003\u6570\u636e\u8303\u56f4\uff0c\u5927\u6982\u662f $O(n^3)$ \u505a\u6cd5\u3002\u90a3\u4e48\u5c31\u6309\u7167\u6211\u4eec\u8981\u6c42\u7684\u8bbe dp\u3002\u4ee4 $dp_{(i,j,k)}$ \u8868\u793a\u8fd8\u5269 $i$ \u4e2a $r$ \u65cf\u4eba\uff0c$j$ \u4e2a $s$ \u65cf\u4eba\uff0c$k$ \u4e2a $p$ \u65cf\u4eba\u7684\u65f6\u5019\u7684\u6982\u7387\u3002\u90a3\u4e48\u8f93\u51fa\u8981\u6c42\u662f\u5269\u4e0b\u5355\u79cd\u65cf\u4eba\uff0c\u90a3\u4e48\u663e\u800c\u6613\u89c1\u53e6\u5916\u4e24\u4e2a\u65cf\u4eba\u5f97\u662f 0\u3002\n\n\u4e8e\u662f\u6211\u4eec\u5206\u522b\u8f93\u51fa $\\sum\\limits_{i=1}^r dp_{(i,0,0)}$\uff0c$\\sum\\limits_{j=1}^s dp_{(0,j,0)}$ \u548c $\\sum\\limits_{k=1}^p dp_{(0,0,k)}$ \u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u4e2a\u53ef\u4ee5\u5728 dp \u7684\u65f6\u5019\u4e00\u5757\u6c42\u51fa\u6765\u3002\n\n### 2. \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n\n\u8f6c\u79fb\u65b9\u7a0b\u8fd8\u662f\u6bd4\u8f83\u597d\u60f3\u7684\u3002\u6bcf\u6b21\u80af\u5b9a\u6b7b\u8003\u8651\u6b7b\u54ea\u4e00\u4e2a\u65cf\u7684\u4eba\u3002\u9650\u5236\u662f\uff0c\u5982\u679c\u4f60\u8981\u8fd9\u4e2a\u65cf\u91cc\u4e00\u4e2a\u4eba\u6b7b\uff0c\u90a3\u4e48**\u8fd9\u4e2a\u65cf\u5fc5\u987b\u6709\u4eba\uff0c\u800c\u4e14\u5403\u4ed6\u7684\u90a3\u4e2a\u65cf\u4e5f\u5fc5\u987b\u6709\u4eba**\u3002\n\n\u4e8e\u662f\u5f97\u5230\u4e86\u8fd9\u6837\u7684\u4ee3\u7801\uff08\u5047\u8bbe\u6ee1\u8db3\u4e0a\u8ff0\u9650\u5236\uff09\n\n$dp_{(i-1,j,k)} = dp_{(i-1,j,k)} + dp_{(i,j,k)} \\times p1$\n\n$dp_{(i,j-1,k)} = dp_{(i,j-1,k)} + dp_{(i,j,k)} \\times p2$\n\n$dp_{(i,j,k-1)} = dp_{(i,j,k-1)} + dp_{(i,j,k)} \\times p3$\n\n\u5176\u4e2d\uff0c$p1$\uff0c$p2$\uff0c$p3$ \u8868\u793a\u4e24\u4e2a\u65cf\u78b0\u9762\u7684\u51e0\u7387\uff1a\u5047\u8bbe\u4e09\u4e2a\u65cf\u5206\u522b\u5269\u4e0b $i,j,k$ \u4eba\uff0c\u90a3\u4e48 $r,s$ \u4e24\u65cf\u78b0\u9762\u6982\u7387\u5c31\u662f $\\dfrac{i \\times j}{i\\times j + i \\times k + j \\times k}$\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u8f6c\u79fb\u65b9\u7a0b\u91cc\u7684 $p1$\u3002$p2,p3$ \u4ee5\u6b64\u7c7b\u63a8\u3002\n\n\u6700\u540e\u6309\u9898\u76ee\u8981\u6c42\u6c42\u548c\u8f93\u51fa\u5373\u53ef\u3002\u6ce8\u610f\u4fdd\u7559\u81f3\u5c11 7 \u4f4d\u5c0f\u6570\uff0c\u6211\u88ab\u5751\u4e86\u4e00\u6b21\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ndouble dp[105][105][105],sum1,sum2,sum3;\nint main()\n{\n\tint r,s,p; scanf(\"%d%d%d\",&r,&s,&p);\n\tdp[r][s][p]=1.0;\n\tfor(int i=r;i>=0;i--)\n\t\tfor(int j=s;j>=0;j--)\n\t\t\tfor(int k=p;k>=0;k--)\n\t\t\t{\n\t\t\t\tdouble tot=i*j+j*k+i*k;\n\t\t\t\tif(i && j) dp[i][j-1][k]+=dp[i][j][k]*i*j/tot;\n\t\t\t\tif(j && k) dp[i][j][k-1]+=dp[i][j][k]*j*k/tot;\n\t\t\t\tif(i && k) dp[i-1][j][k]+=dp[i][j][k]*i*k/tot;\n\t\t\t\tif(i && !j && !k) sum1+=dp[i][j][k];\n\t\t\t\tif(!i && j && !k) sum2+=dp[i][j][k];\n\t\t\t\tif(!i && !j && k) sum3+=dp[i][j][k]; \n\t\t\t}\n\t\t\t\t\n\tprintf(\"%.10lf %.10lf %.10lf\",sum1,sum2,sum3);\n\treturn 0;\n}\n\n```\n\n$$\\large{\\text{THE END}}$$\n\n$$\\text{Thanks for reading.}$$",
        "postTime": 1633446323,
        "uid": 195198,
        "name": "E1_de5truct0r",
        "ccfLevel": 7,
        "title": "CF540D"
    },
    {
        "content": "\u8fd8\u662f\u4e0d\u662f\u5f88\u61c2\u3002\u3002\u3002$1900$ \u662f\u600e\u4e48\u8bc4\u6210\u7d2b\u7684\u554a\u3002\n\n\u663e\u7136\u5b9a\u4e49 $dp_{i,j,k}$ \u4e3a\u5269\u4e0b $i$ \u4e2a $\\operatorname{R}$\uff0c$j$ \u4e2a $\\operatorname{S}$\uff0c$k$ \u4e2a $\\operatorname{P}$\u3002\u5237\u8868\u770b\u8d77\u6765\u6709\u70b9\u9ebb\u70e6\uff0c\u6211\u4eec\u76f4\u63a5\u628a\u5f53\u524d\u72b6\u6001\u8f6c\u79fb\u5230\u53ef\u80fd\u7684\u72b6\u6001\u3002\n\n\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n- $\\operatorname{R}$ \u4e0e $\\operatorname{S}$ \u76f8\u9047\uff0c$\\operatorname{S}$ \u51cf\u5c11\u4e00\u4e2a\u3002\u6761\u4ef6\u4e3a $i,j > 1$\uff1b   \n- $\\operatorname{R}$ \u4e0e $\\operatorname{P}$ \u76f8\u9047\uff0c$\\operatorname{R}$ \u51cf\u5c11\u4e00\u4e2a\u3002\u6761\u4ef6\u4e3a $i,k > 1$\uff1b   \n- $\\operatorname{S}$ \u4e0e $\\operatorname{P}$ \u76f8\u9047\uff0c$\\operatorname{P}$ \u51cf\u5c11\u4e00\u4e2a\u3002\u6761\u4ef6\u4e3a $j,k > 1$\u3002\n\n\u8003\u8651\u8ba1\u7b97\u6709\u591a\u5c11\u79cd\u53ef\u80fd\u3002\u6211\u4eec\u4e00\u5171\u6709 $i$ \u4e2a $\\operatorname{R}$\uff0c$j$ \u4e2a $\\operatorname{S}$\uff0c$k$ \u4e2a $\\operatorname{P}$\uff0c$\\operatorname{R}$ \u548c $\\operatorname{S}$ \u76f8\u9047\u7684\u72b6\u6001\u5171\u6709 $i \\times j$ \u79cd\uff0c\u5176\u5b83\u76f8\u9047\u65b9\u6848\u663e\u7136\uff0c\u4e8e\u662f\u8fd9\u9053\u9898\u5c31\u505a\u51fa\u6765\u4e86\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ndouble dp[105][105][105];\nint r,s,p;\nint main(){\n\tscanf(\"%d %d %d\",&r,&s,&p);\n\tdp[r][s][p]=1;\n\tfor(int i=r;~i;--i)\n\t{\n\t\tfor(int j=s;~j;--j)\n\t\t{\n\t\t\tfor(int k=p;~k;--k)\n\t\t\t{\n\t\t\t\tdouble pro=i*j+j*k+i*k;\n\t\t\t\tif(i && k)\tdp[i-1][j][k]+=dp[i][j][k]*(double)i*(double)k/pro;\n\t\t\t\tif(i && j)\tdp[i][j-1][k]+=dp[i][j][k]*(double)i*(double)j/pro;\n\t\t\t\tif(j && k)\tdp[i][j][k-1]+=dp[i][j][k]*(double)j*(double)k/pro;\n\t\t\t}\n\t\t}\n\t}\n\tdouble rr=0,ss=0,pp=0;\n\tfor(int i=1;i<=r;++i)\trr+=dp[i][0][0];\n\tfor(int i=1;i<=s;++i)\tss+=dp[0][i][0];\n\tfor(int i=1;i<=p;++i)\tpp+=dp[0][0][i];\n\tprintf(\"%.10f %.10f %.10f\",rr,ss,pp);\n\treturn 0;\n}\n```",
        "postTime": 1597309961,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF540D \u3010Bad Luck Island\u3011"
    }
]
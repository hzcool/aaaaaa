[
    {
        "content": "N = 1e5, C = 3e5 \u7684\u80cc\u5305DP\n\n\u7279\u6b8a\u6027\u8d28\u662f\u7269\u54c1\u91cd\u91cf\u53ea\u67093\u79cdw[i]=1/2/3\n\n\u3010\u7b97\u6cd50\u3011\n\n\u9996\u5148\u8003\u8651w[i]=1/2\u4e24\u79cd\u91cd\u91cf\uff0c\u53ef\u4ee5\u5404\u81ea\u6309v[i]\u5927->\u5c0f\u6392\u5e8f\u540e\u8d2a\u5fc3\uff0c\u8bbeDP\u72b6\u6001\uff1a\n```\ndp[j] = \u53ea\u8003\u8651w[i]=1/2\uff0cj\u91cd\u91cf\u7684\u6700\u5927\u4ef7\u503c\n\ndp[j] = max{s1[n1] + s2[j-n1]}\n\u5176\u4e2ds1,s2\u4e3a\u6392\u5e8f\u540ev\u7684\u524d\u7f00\u548c\uff0cn1 = \u9009\u591a\u5c11\u4e2a1\u7269\u54c1\n```\n\n\u518d\u8003\u8651\u679a\u4e3e\u9009\u53d6w[i]=3\u7684\u7269\u54c1\u6570\u91cfn3\uff0c\u5c31\u6709\u4e86\u4e00\u4e2a\u603b\u590d\u6742\u5ea6O(C^2)\u7684\u7b97\u6cd5\u3002\n```\nans = max{s3[n3] + dp[C-3*n3]}\n```\n\u5f53\u7136\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u4e0d\u80fd\u901a\u8fc7 C = 3e5 \u7684\u6570\u636e\n\n\u3010\u7b97\u6cd51\u3011\n\n\u8003\u8651\u5c06dp\u72b6\u6001\u8bbe\u6210\u4e00\u4e2a4\u5143\u7ec4\uff1a\n```\ndp[j] = {c,n1,n2,n3} \n\u4ee3\u8868\u603b\u5bb9\u91cf\u4e3aj\u65f6\u7684\u6700\u5927\u4ef7\u503c=c\uff0c\u540c\u65f6\u5bf9\u5e94\u9009\u53d6\u4e86n1-n3\u4e2a1-3\u7269\u54c1\n```\n\"\u6211\u4e3a\u4eba\u4eba\"\u5f0f\u66f4\u65b0\uff0c\u6709\u4e09\u79cd\u66f4\u65b0\u65b9\u5f0f\uff1a\n```\n{c+v1[n1+1],n1+1,n2,n3} -> dp[j+1]\n{c+v2[n2+1],n1,n2+1,n3} -> dp[j+2]\n{c+v3[n3+1],n1,n2,n3+1} -> dp[j+3]\n\n\u5176\u4e2dv1[i]-v3[i] = \u4ef7\u503c\u7b2ci\u5927\u76841-3\u7269\u54c1\u4ef7\u503c\n```\n\n\u8fd9\u6837\u590d\u6742\u5ea6\u662fO(3\\*C)\u4e0d\u4f1aTLE\uff0c\u4f46\u4e0d\u5e78\u7684\u662f\u4f1aWA\u3002\n\n\u4f8b\u5982\n```\nConsider the case n=4, m=7 with 4 items\nA = (1,3)\nB1 = B2 = (2,4)\nC = (3,6)\n\nThen the (only) optimal solution\ndp[4] = A + C\ndp[5] = A + B1 + B2\ndp[6] = A + B1/B2 + C\ndp[7] = B1 + B2 + C\n\nbut there is no way to create the solution for dp[7] by adding items to any of the three solutions before.\n(https://codeforces.com/blog/entry/52010?#comment-360499)\uff1a\n```\n\u5e78\u8fd0\u7684\u662f\u6211\u4eec\u53ef\u4ee5\u4fee\u6b63\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u8003\u8651\u7b2c4\u79cd\u8f6c\u79fb\uff1a\n```\n{c-v1[n1]+v3[n3+1],n1-1,n2,n3+1} -> dp[j+2]\n```\n\u5373\u62ff\u8d70\u4e00\u4e2a1\u7269\u54c1\u6dfb\u4e0a\u4e00\u4e2a3\u7269\u54c1\uff0c\u8fd9\u6837dp[7]\u5c31\u80fd\u4ecedp[5]\u8f6c\u79fb\u8fc7\u6765\uff0c\u53ef\u4ee5AC\u672c\u9898\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define MAXN 300005\n#define LL long long\nusing namespace std;\n\nstruct Node{\n\tLL c;\n\tint n1, n2, n3;\n\tNode(LL c=0, int n1=0, int n2=0, int n3=0):c(c), n1(n1), n2(n2), n3(n3){}\n} dp[MAXN];\nint N,M;\nint v[4][MAXN];\nint cnt[4];\n\nvoid update(Node& a, Node b){\n\tif(a.c < b.c) a = b;\n} \n\nint main() {\n\tcin>>N>>M;\n\tfor(int i=1;i<=N;i++) {\n\t\tint w,x;\n\t\tcin>>w>>x;\n\t\tv[w][++cnt[w]] = x;\n\t}\n\t\n\tfor(int w=1;w<=3;w++){\n\t\tsort(v[w]+1, v[w]+1+cnt[w], greater<int>());\n\t}\n\n\tdp[0] = Node(0,0,0,0);\n\tLL ans = 0;\n\tfor(int j=0;j<=M;j++){\n\t\tLL c = dp[j].c;\n\t\tint n1 = dp[j].n1, n2 = dp[j].n2, n3 = dp[j].n3;\n\t\tif(j+1<=M && n1 < cnt[1]) update(dp[j+1], Node(c+v[1][n1+1], n1+1, n2, n3));\n\t\tif(j+2<=M && n2 < cnt[2]) update(dp[j+2], Node(c+v[2][n2+1], n1, n2+1, n3));\n\t\tif(j+3<=M && n3 < cnt[3]) update(dp[j+3], Node(c+v[3][n3+1], n1, n2, n3+1));\n\t\t\n\t\tif(j+2<=M && n1 && n3 < cnt[3]) update(dp[j+2], Node(c-v[1][n1]+v[3][n3+1], n1-1, n2, n3+1));\n\n\t\tans = max(ans, c);\n\t}\n\tcout<<ans<<endl;\n\treturn 0;\n}\n```\n\n\u3010\u7b97\u6cd52\u3011\n\n\u5047\u8bbe\u53ea\u8003\u8651w[i]=2/3\u4e24\u79cd\u7269\u54c1\uff0c\u540c\u6837\u53ef\u4ee5\u5404\u81ea\u6309v[i]\u5927->\u5c0f\u6392\u5e8f\u540e\u8d2a\u5fc3\uff0c\u679a\u4e3en3\u53ef\u4ee5\u5728O(N)\u65f6\u95f4\u5185\u8ba1\u7b97\u7b54\u6848\uff1a\n```\nans = max{s3[n3] + s2[(M-3*n3)/2]}\n```\n\n\u90a3\u4e48\u600e\u4e48\u8003\u8651w[i]=1\u7684\u7269\u54c1\u5462\uff1f\n\n\u8003\u8651\u5206\u7c7b\u8ba8\u8bba\uff1a\n\n1. \u6700\u4f18\u89e3\u53d6\u4e86\u5076\u6570\u4e2a1\u7269\u54c1\uff0c\u90a3\u4e48\u5c06\u6240\u67091\u7269\u54c1\u6392\u5e8f\u540e\u4e24\u4e24\u6253\u5305\uff0c\u89c6\u4e3a(n1/2)\u4e2a2\u7269\u54c1\u5373\u53ef\uff1b\n2. \u6700\u4f18\u89e3\u53d6\u4e86\u5947\u6570\u4e2a1\u7269\u54c1\uff0c\u90a3\u4e48\u5fc5\u53d6\u4ef7\u503c\u6700\u5927\u7684\u90a3\u4e2a1\u7269\u54c1\uff0c\u5269\u4e0b\u76841\u7269\u54c1\u4e24\u4e24\u6253\u5305\u89c6\u4e3a2\u7269\u54c1\u5373\u53ef\uff1b\n\n\u6700\u540e2\u79cd\u60c5\u51b5\u53d6max\uff0c\u603b\u590d\u6742\u5ea6O(N)\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define MAXN 100005\n#define LL long long\nusing namespace std;\n\nint N,C;\nvector<int> Adj[4];\nvector<int> v2;\nint n1,n2,n3;\n\nLL s[4][MAXN];\nLL ans1,ans2;\n\nvoid calS2(){\n\tsort(v2.begin(), v2.end(), greater<int>());\n\tfor(int i=0;i<v2.size();i++){\n\t\ts[2][i+1] = s[2][i] + v2[i];\n\t}\n\treturn;\n}\n\nint main(){\n\tcin>>N>>C;\n\t\n\tint w,v;\n\tfor(int i=1;i<=N;i++){\n\t\tcin>>w>>v;\n\t\tAdj[w].push_back(v);\n\t}\n\t\n\t//sort3\n\tsort(Adj[3].begin(), Adj[3].end(), greater<int>());\n\tfor(int i=0;i<Adj[3].size();i++){\n\t\ts[3][i+1] = s[3][i] + Adj[3][i];\n\t}\n\n\t//even\n\tsort(Adj[1].begin(), Adj[1].end(), greater<int>());\n\tfor(int i=1;i<Adj[1].size();i+=2){\n\t\tv2.push_back(Adj[1][i] + Adj[1][i-1]);\n\t}\n\tfor(int i=0;i<Adj[2].size();i++){\n\t\tv2.push_back(Adj[2][i]);\n\t}\n\tcalS2();\n\tfor(n3=0;n3<=Adj[3].size();n3++){\n\t\tif(C-3*n3 < 0) continue;\n\t\tn2 = min((C-3*n3)/2, int(v2.size()));\n\t\tans1 = max(ans1, s[3][n3] + s[2][n2]);\n\t}\n\tif(Adj[1].size()==0){\n\t\tcout<<ans1<<endl;\n\t\treturn 0;\n\t}\n\n\t//odd\n\tsort(Adj[1].begin(), Adj[1].end(), greater<int>());\n\tv2.clear();\n\tfor(int i=2;i<Adj[1].size();i+=2){\n\t\tv2.push_back(Adj[1][i] + Adj[1][i-1]);\n\t}\n\tfor(int i=0;i<Adj[2].size();i++){\n\t\tv2.push_back(Adj[2][i]);\n\t}\n\n\tcalS2();\n\tfor(n3=0;n3<=Adj[3].size();n3++){\n\t\tif(C-3*n3-1 < 0) continue;\n\t\tn2 = min((C-3*n3-1)/2, int(v2.size()));\n\t\tans2 = max(ans2, s[3][n3] + s[2][n2] + Adj[1][0]);\n\t}\n\tcout<<max(ans1, ans2);\n\treturn 0;\n}\n```\n",
        "postTime": 1568267224,
        "uid": 21017,
        "name": "\u8096\u7136",
        "ccfLevel": 7,
        "title": "\u3010CF808E\u3011 Selling Souvenirs"
    },
    {
        "content": "(\u8fd9\u662f\u4e2a\u590d\u6742\u5ea6\u4e25\u683c\u7684\u505a\u6cd5,\u5e76\u4e0d\u9700\u8981\u4ec0\u4e48\u5206\u7c7b\u8ba8\u8bba)\n\n\u9996\u5148,\u80fd\u591f\u53d1\u73b0\u8fd9\u662f\u4e2a\u7ecf\u5178\u7684\u80cc\u5305\u95ee\u9898,\u4f46\u662f\u7269\u54c1\u91cd\u91cf\u53ea\u67093\u79cd\u3002\n\n\u4e0d\u59a8\u628a\u7269\u54c1\u6309\u7167\u91cd\u91cf\u5927\u5c0f\u5206\u4e3a1\u7c7b,2\u7c7b\u548c3\u7c7b\u3002\n\n\u628a\u6bcf\u4e00\u7c7b\u6309\u7167\u4ef7\u503c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f,\u663e\u7136,\u540c\u4e00\u7c7b\u91cc\u9762\u5c3d\u91cf\u8981\u9009\u524d\u9762\u6bd4\u8f83\u5927\u7684\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u5f97\u5230\u679a\u4e3e\u67d0\u4e24\u7c7b,\u53e6\u4e00\u7c7b\u5c3d\u91cf\u62ff\u7684$O(n^2)$sb\u5927\u66b4\u529b\u3002\n\n\u6211\u4eec\u4ece\u5c0f\u5230\u5927\u679a\u4e3e3\u7c7b\u7269\u54c1\u9009\u4e86\u51e0\u4e2a,\u53ef\u4ee5\u53d1\u73b02\u7c7b\u7269\u54c1\u4e2a\u6570\u7684\u53d8\u52a8\u548c1\u7c7b\u7269\u54c1\u7684\u4e2a\u6570\u53d8\u52a8\u4e0d\u4f1a\u592a\u5927,\u90a3\u4e48\u4f60\u53ef\u4ee5\u5199\u4e00\u4e2a\u53d8\u52a8\u4e2a\u6570\u57285\u4ee5\u5185\u7684\u679a\u4e3e,\u6210\u529fA\u6389\u6b64\u9898\u3002\n\n\u8bc1\u660e?\n\n\u6211\u4eec\u77e5\u9053\u4e0a\u4e00\u6b21\u7684\u65b9\u6848\u662f\u5177\u6709\u6700\u4f18\u6027\u7684\u3002\n\n\u6211\u8fd9\u65f6\u591a\u589e\u52a0\u4e86\u4e00\u4e2a3\u7c7b\u7269\u54c1,\u90a3\u4e48\u6700\u591a\u4f1a\u5f03\u6389\u524d\u9762\u9009\u62e9\u76845\u4e2a\u5355\u4f4d\u91cd\u91cf\u7684\u7269\u54c1\u3002\n\n\u95ee\u9898\u5728\u4e8e\u6211\u4eec\u4e0d\u4e00\u5b9a\u5168\u5728\u4e22\u5f03,\u53ef\u80fd\u4f1a\u62ff\u56de\u4e00\u4e9b\u4e1c\u897f\u3002\n\n\u5047\u5982\u6211\u5f03\u4e86\u4e00\u4e2a2,\u62ff\u4e86\u4e24\u4e2a1,\u90a3\u4e48\u4e00\u5b9a\u4e0d\u4f18,\u56e0\u4e3a\u8fd9\u79cd\u65b9\u6848\u5728\u4e0a\u4e00\u6b21\u4e0d\u4f18,\u8fd9\u4e00\u6b21\u4e5f\u4e0d\u4f18\u3002\u5982\u679c\u8fd9\u6837\u66f4\u4f18\u7684\u8bdd,\u4e0a\u4e00\u6b21\u5fc5\u7136\u4e5f\u8fd9\u6837\u505a\u3002\n\n\u5f031\u62ff1,\u5f032\u62ff2\u8fd9\u4e9b\u4e5f\u90fd\u4e0d\u53ef\u53d6,\u6240\u4ee5\u4e0d\u53ef\u80fd\u62ff\u56de\u8d85\u8fc71\u4e2a1.\n\n\u8bc1\u6bd5\u3002\n\n\u5177\u4f53\u5b9e\u73b0\u9700\u8981\u6ce8\u610f\u7279\u5224$m$\u6bd4\u8f83\u5927\u7684\u60c5\u51b5\u3002\n\n\u4ee3\u7801\u76f8\u5bf9dp\u89e3\u6cd5\u6709\u4e00\u70b9\u957f,\u4f46\u662f\u4ec0\u4e48\u601d\u7ef4\u542b\u91cf\u90fd\u6ca1\u6709\u2026\u2026\n\n```cpp\n#include<algorithm>\n#include<cstdio>\n#define MaxN 100500\nusing namespace std;\nint n1,n2,n3,m,p1,p2,p3,n;\nlong long ans,a1[MaxN],a2[MaxN],a3[MaxN];\nbool cmp(const long long &A,const long long &B)\n{return A>B;}\nint main()\n{\n  scanf(\"%d%d\",&n,&m);\n  for (int i=1,w,c;i<=n;i++){\n    scanf(\"%d%d\",&w,&c);\n    if (w==1)a1[++n1]=c;\n    if (w==2)a2[++n2]=c;\n    if (w==3)a3[++n3]=c;\n  }sort(a1+1,a1+n1+1,cmp);\n  sort(a2+1,a2+n2+1,cmp);\n  sort(a3+1,a3+n3+1,cmp);\n  for (int i=1;i<=n1;i++)a1[i]+=a1[i-1];\n  for (int i=1;i<=n2;i++)a2[i]+=a2[i-1];\n  for (int i=1;i<=n3;i++)a3[i]+=a3[i-1];\n  if (m>=n1*1+n2*2+n3*3){\n    printf(\"%lld\",a1[n1]+a2[n2]+a3[n3]);\n    return 0;\n  }p1=p2=1;\n  if (m>=n1*1+n2*2){\n    p1=n1;p2=n2;p3=(m-p1*1-p2*2)/3;\n    ans=a1[n1]+a2[n2]+a3[p3];\n  }else {\n    long long maxx=0;\n    for (int i=0;i<=n1&&i<=m;i++)\n      if (maxx<a1[i]+a2[(m-i)/2]){\n        p1=i;p2=(m-i)/2;\n        maxx=a1[p1]+a2[p2];\n      }\n    ans=max(ans,maxx);\n  }\n  for (int i=p3+1;i<=n3&&i*3<=m;i++){\n    long long maxx=0,sp1,sp2;\n    for (int j=-4;j<=1;j++)\n      if (0<=p1+j&&p1+j<=n1&&(m-p1-j-i*3)>=0){\n        if (maxx<a1[p1+j]+a2[(m-p1-j-i*3)/2]+a3[i]){\n          maxx=a1[p1+j]+a2[(m-p1-j-i*3)/2]+a3[i];\n          sp1=p1+j;\n          sp2=(m-p1-j-i*3)/2;\n        }\n      }\n    ans=max(ans,maxx);\n    p1=sp1;p2=sp2;\n  }printf(\"%lld\",ans);\n  return 0;\n}\n```\n\n\u539f\u6765\u8fdb\u884c\u4e25\u683c\u5206\u7c7b\u8ba8\u8bba\u7684\u4ee3\u7801:\n\n```cpp\n#include<algorithm>\n#include<cstdio>\n#define MaxN 100500\nusing namespace std;\nint n1,n2,n3,m,p1,p2,p3,n;\nlong long ans,a1[MaxN],a2[MaxN],a3[MaxN];\nbool cmp(const long long &A,const long long &B)\n{return A>B;}\nint main()\n{\n  scanf(\"%d%d\",&n,&m);\n  for (int i=1,w,c;i<=n;i++){\n    scanf(\"%d%d\",&w,&c);\n    if (w==1)a1[++n1]=c;\n    if (w==2)a2[++n2]=c;\n    if (w==3)a3[++n3]=c;\n  }sort(a1+1,a1+n1+1,cmp);\n  sort(a2+1,a2+n2+1,cmp);\n  sort(a3+1,a3+n3+1,cmp);\n  for (int i=1;i<=n1;i++)a1[i]+=a1[i-1];\n  for (int i=1;i<=n2;i++)a2[i]+=a2[i-1];\n  for (int i=1;i<=n3;i++)a3[i]+=a3[i-1];\n  if (m>=n1*1+n2*2+n3*3){\n    printf(\"%lld\",a1[n1]+a2[n2]+a3[n3]);\n    return 0;\n  }p1=p2=1;\n  if (m>=n1*1+n2*2){\n    p1=n1;p2=n2;p3=(m-p1*1-p2*2)/3;\n    ans=a1[n1]+a2[n2]+a3[p3];\n  }else {\n    long long maxx=0;\n    for (int i=0;i<=n1&&i<=m;i++)\n      if (maxx<a1[i]+a2[(m-i)/2]){\n        p1=i;p2=(m-i)/2;\n        maxx=a1[p1]+a2[p2];\n      }\n    ans=max(ans,maxx);\n  }\n  for (int i=p3+1;i<=n3&&i*3<=m;i++){\n    if (p1*1+p2*2+i*3-m==1){\n      long long maxx=0;int op=0;\n      if (p1>=1&&a1[p1-1]+a2[p2]+a3[i]>maxx){\n        op=1;\n        maxx=a1[p1-1]+a2[p2]+a3[i];\n      }if (p2<n1&&p2>=1&&a1[p1+1]+a2[p2-1]+a3[i]>maxx){\n        op=2;\n        maxx=a1[p1+1]+a2[p2-1]+a3[i];\n      }if (p2>=1&&a1[p1]+a2[p2-1]+a3[i]>maxx){\n        op=3;\n        maxx=a1[p1]+a2[p2-1]+a3[i];\n      }\n      if (op==1)p1-=1;\n      if (op==2){p2-=1;p1+=1;}\n      if (op==3)p2-=1;\n    }else if (p1*1+p2*2+i*3-m==2){\n      long long maxx=0;int op=0;\n      if (p1>=2&&a1[p1-2]+a2[p2]+a3[i]>maxx){\n        op=1;\n        maxx=a1[p1-2]+a2[p2]+a3[i];\n      }if (p2>=1&&a1[p1]+a2[p2-2]+a3[i]>maxx){\n        op=2;\n        maxx=a1[p1]+a2[p2-2]+a3[i];\n      }\n      if (op==1)p1-=2;\n      if (op==2)p2-=1;\n    }else {\n      long long maxx=0;int op=0;\n      if (p1>=3&&a1[p1-3]+a2[p2]+a3[i]>maxx){\n        op=1;\n        maxx=a1[p1-3]+a2[p2]+a3[i];\n      }if (p1>=1&&p2>=1&&a1[p1-1]+a2[p2-1]+a3[i]>maxx){\n        op=2;\n        maxx=a1[p1-1]+a2[p2-1]+a3[i];\n      }if (p1<n1&&p2>=2&&a1[p1+1]+a2[p2-2]+a3[i]>maxx){\n        op=3;\n        maxx=a1[p1+1]+a2[p2-2]+a3[i];\n      }if (p2>=2&&a1[p1]+a2[p2-2]+a3[i]>maxx){\n        op=4;\n        maxx=a1[p1]+a2[p2-2]+a3[i];\n      }\n      if (op==1)p1-=3;\n      if (op==2){p1-=1;p2-=1;}\n      if (op==3){p1+=1;p2-=2;}\n      if (op==4)p2-=2;\n    }\n    ans=max(ans,a1[p1]+a2[p2]+a3[i]);\n  }printf(\"%lld\",ans);\n  return 0;\n}\n```",
        "postTime": 1565331981,
        "uid": 58705,
        "name": "command_block",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF808E \u3010Selling Souvenirs\u3011"
    },
    {
        "content": "# \u9898\u76ee\n\n[\u4f20\u9001\u95e8](http://codeforces.com/problemset/problem/808/E)\n\n# \u9898\u89e3\n\n\u8fd9\u9053\u9898\u6709\u4e24\u79cd\u505a\u6cd5\uff0c\u524d\u8005 $\\mathcal O(n)$\uff0c\u540e\u8005 $\\mathcal O(n\\log_{\\frac{3}{2}}n)$ .\uff08\u6b64\u5904\u5c06 $n,m$ \u89c6\u4f5c\u540c\u9636\uff0c\u4e0d\u4f5c\u660e\u663e\u533a\u5206\uff09\n\n\u9996\u5148\u5b9a\u4e49 $a[i][j]$ \u4e3a\u91cd\u91cf\u4e3a $i$ \u800c\u4ef7\u683c\u5728\u91cd\u91cf\u4e3a $i$ \u7684\u7b2c $j$ \u8d35\u7684\u7269\u54c1.\n\n**\u65b9\u6cd5\u4e00 \u2014\u2014 DP**\n\n\u4ee4 $f[i]$ \u8868\u793a\u5728\u7a7a\u95f4\u4e3a $i$ \u65f6\uff0c\u53ea\u9009\u91cd\u91cf\u4e3a $1$ \u548c $2$ \u7684\u5546\u54c1\u7684\u6700\u5927\u4ef7\u503c\uff0c\u90a3\u4e48\u6211\u4eec\u6709\u521d\u59cb\u5316 $f[1]=a[1][1]$\n\n\u800c\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6bcf $2$ \u7684\u8de8\u5ea6\u4e3a\u4e00\u4e2a\u5355\u4f4d\uff0c\u6bcf\u6b21\u8003\u8651\u662f\u9009\u4e00\u4e2a $2$ \u7269\u54c1\u8fd8\u662f\u4e24\u4e2a $1$ \u7269\u54c1\uff0c\u8fdb\u884c\u6bd4\u8f83\u4e4b\u540e\u66f4\u65b0 $f$ \u6570\u7ec4\u5373\u53ef\n\n\u5728\u5f97\u5230 $f$ \u6570\u7ec4\u4e4b\u540e\uff0c\u6211\u4eec\u7528 $\\mathcal O(\\frac{m}{3})$ \u7684\u590d\u6742\u5ea6\u66b4\u529b\u679a\u4e3e $3$ \u7269\u54c1\u9009\u4e86\u591a\u5c11\u4e2a\uff0c\u7528 $\\mathcal O(1)$ \u5373\u53ef\u7b97\u51fa\u4ef7\u503c\n\n**\u65b9\u6cd5\u4e8c \u2014\u2014 \u4e09\u5206\u67e5\u627e**\n\n\u540c\u6837\u7684\u601d\u8def\uff0c\u9996\u5148\u66b4\u529b\u679a\u4e3e\u9009\u4e86\u591a\u5c11\u4e2a $3$ \u7269\u54c1\uff0c\u7136\u540e\uff0c\u5728\u91cd\u91cf\u56fa\u5b9a\u65f6\uff0c\u4ee5 $2$ \u7269\u54c1\u7684\u6570\u91cf\u4e3a $x$\uff0c\u5b9a\u4e49 $f(x)$ \u4e3a\u4ef7\u503c\uff0c\u53ef\u4ee5\u8bc1\u660e $f(x)$ \u662f\u5355\u5cf0\u7684\n\n>\u5728 $x$ \u8d8a\u5927\u65f6\uff0c\u9009\u5165\u7684 $2$ \u7269\u54c1\u4ef7\u503c\u4f1a\u8d8a\u6765\u8d8a\u5c0f\uff0c\u800c\u5269\u4e0b\u7684\u7a7a\u95f4\u6765\u9009 $1$ \u7269\u54c1\uff0c\u4e00\u5b9a\u662f\u5c3d\u91cf\u5f80\u5927\u9009\uff0c\u6240\u4ee5\uff0c\u5f53 $f(x)$ \u4e0b\u964d\u65f6\uff0c\u8868\u793a\u518d\u52a0\u5165\u7684\u4e00\u4e2a $2$ \u7269\u54c1\u4ef7\u503c\u5df2\u7ecf\u5c11\u4e8e\u6254\u6389\u7684\u4fe9 $1$ \u7269\u54c1\u7684\u4ef7\u683c\uff0c\u800c\u6254\u6389\u7684 $1$ \u7269\u54c1\u4f1a\u968f $x$ \u589e\u52a0\u800c\u8d8a\u6765\u8d8a\u5927\uff0c\u800c\u52a0\u5165\u7684 $2$ \u7269\u54c1\u4ef7\u503c\u4f1a\u968f $x$ \u589e\u52a0\u800c\u8d8a\u6765\u8d8a\u5c0f\uff0c\u6240\u4ee5\uff0c\u5f53 $f(x)$ \u5f00\u59cb\u4e0b\u964d\u4e4b\u540e\uff0c\u5c31\u6ca1\u6709\u53ef\u80fd\u518d\u589e\u52a0\uff0c\u5373\u53ef\u8bc1\u660e $f(x)$ \u662f\u5355\u5cf0\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u4e09\u5206\n\n\u90a3\u4e48\uff0c\u5916\u5708\u679a\u4e3e $3$ \u7269\u54c1\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$ \u505a\u4e09\u5206\uff0c\u6700\u540e\u6807\u8bb0\u6700\u5927\u4ef7\u503c\u5373\u53ef.\n\n# \u4ee3\u7801\n\n**\u65b9\u6cd5\u4e00\u4e0e\u65b9\u6cd5\u4e8c**\n\n```cpp\nhttps://www.cnblogs.com/Arextre/p/13379824.html\n```\n",
        "postTime": 1595859108,
        "uid": 125355,
        "name": "Vladilena",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF808E \u3010Selling Souvenirs\u3011"
    },
    {
        "content": "\u611f\u89c9\u4e0e\u697c\u4e0b\u7684\u5206\u7c7b\u8ba8\u8bba DP \u505a\u6cd5\u4e0d\u662f\u5f88\u4e00\u6837\u554a\u3002\n\n\u540c\u6837\u662f\u53ea\u8003\u8651 $w_1,w_2$ \u4e24\u4e2a\u91cd\u91cf\u7684\u7269\u54c1\uff0c\u8bbe $f_i$ \u8868\u793a\u91cd\u91cf\u4e3a $i$ \u65f6\u7684\u6700\u5927\u4ef7\u503c\u3002\n\n\u7136\u540e\u5c31\u8003\u8651\u6700\u540e\u9009\u53d6\u7684\u67d0\u4e2a\u91cd\u91cf\u7684\u7269\u54c1\uff0c\u4e00\u5b9a\u662f\u5c06\u4ef7\u683c\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u540e\u7684\u4e00\u6bb5\u524d\u7f00\u3002\n\n\u90a3\u4e48\uff0c\u5bf9\u4e8e $f_i$\uff0c\u5b83\u53ef\u4ee5\u662f $f_{i-1}$ \u9009\u53d6\u4e00\u4e2a $w_1$ \u540e\u5f97\u6765\uff0c\u6216\u8005 $f_{i-2}$ \u9009\u53d6\u4e24\u4e2a $w_1$ \u6216\u8005\u4e00\u4e2a $w_2$ \u5f97\u6765\u3002\n\n\u5bf9\u4e8e\u4ece $f_{i-1}$ \u7684\u8f6c\u79fb\uff0c\u6211\u4eec\u663e\u7136\u53ea\u8981\u6c42 $f_{i-1}$ \u9009\u53d6 $w_1$ \u7684\u6570\u91cf\u5c3d\u91cf\u5c11\uff0c\u624d\u80fd\u5f97\u5230\u4e00\u4e2a\u6700\u5927\u7684 $w_1$\uff0c\u5f53\u7136\u82e5\u8981\u9009\u53d6 $w_2$\uff0c\u6211\u4eec\u5e94\u5f53\u8ba9 $w_2$ \u9009\u53d6\u7684\u5c3d\u91cf\u5c11\u3002\n\n\u6240\u4ee5\u8bf4\u5c31\u53ef\u4ee5\u8bb0\u5f55\u7aef\u70b9 $p_{i,0/1}$\uff0c\u8868\u793a\u5f53\u91cd\u91cf\u4e3a $i$ \u65f6\uff0c$w_1$ \u9009\u53d6\u7684\u5c3d\u91cf\u5c11 / $w_2$ \u9009\u53d6\u7684\u5c3d\u91cf\u5c11\u65f6\uff0c\u9009\u53d6\u4e86\u591a\u5c11\u4e2a $w_1$\u3002\n\n\u7136\u540e\u6c42\u51fa $f$ \u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u679a\u4e3e\u9009\u53d6\u4e86\u591a\u5c11\u4e2a $w_3$ \u52a0\u8d77\u6765\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\u6211\u8fd8\u6ca1\u5199\uff0c\u4f46\u6628\u665a\u6211\u771f\u7684\u548c lzqy \u70ab\u996d\u4e86\u3002\n\nUpdate 2.20 11:44\uff1a\n\n\u5988\u7684\u50bb\u903c\uff0c\u771f\u4f60\u5988\u96be\u5199\uff0c\u8c03\u4e86\u8001\u5b50\u4e24\u4e2a\u5c0f\u65f6\u3002\n\n\u6211\u5c31\u4e0d\u4fe1\u8fd8\u6709\u50bb\u903c\u4f1a\u7528\u8fd9\u79cd\u505a\u6cd5\u3002\n\n```cpp\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<iostream>\n#include<set>\n#include<vector>\n#include<queue>\n#include<stack>\n#include<cstring>\n#include<cstdlib>\n#include<ctime>\n#define rep(i,a,b) for(register int i=a;i<=b;++i)\n#define rev(i,a,b) for(register int i=a;i>=b;--i)\n#define gra(i,u) for(register int i=head[u];i;i=edge[i].nxt)\n#define Clear(a) memset(a,0,sizeof(a))\n#define yes puts(\"YES\")\n#define no puts(\"NO\")\nusing namespace std;\ntypedef long long ll;\nconst int INF(1e9+10);\nconst ll LLINF(1e18+10);\ninline int read()\n{\n\tint s=0,w=1;\n\tchar ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')w=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9')s=s*10+(ch-'0'),ch=getchar();\n\treturn s*w;\n}\ntemplate<typename T>\ninline T Min(T x,T y){return x<y?x:y;}\ntemplate<typename T>\ninline T Max(T x,T y){return x>y?x:y;}\ntemplate<typename T>\ninline void Swap(T&x,T&y){T t=x;x=y;y=t;return;}\ntemplate<typename T>\ninline T Abs(T x){return x<0?-x:x;}\n\nconst int MAXN(1e5+10);\nconst int MAXM(3e5+10);\n\nint n,m;\nvector<int>G[4]; \nll f[MAXM];\nint pos[MAXM][2];\n\ninline bool cmp(int x,int y){return x>y;}\n\nint main()\n{\n//\tfreopen(\"read.txt\",\"r\",stdin);\n\tn=read(),m=read();\n\trep(i,1,3) G[i].push_back(INF);\n\trep(i,1,n)\n\t{\n\t\tint w=read(),c=read();\n\t\tG[w].push_back(c);\n\t}\n\trep(i,1,3) sort(G[i].begin(),G[i].end(),cmp);\n\tint s1=G[1].size(),s2=G[2].size();\n\tif(s1!=1)\n\t{\n\t\tf[1]=G[1][1],pos[1][0]=1,pos[1][1]=1;\n\t}\n\trep(i,2,m)\n\t{\n\t\tf[i]=f[i-1],pos[i][0]=pos[i-1][0],pos[i][1]=pos[i-1][1];\n\t\tif(pos[i-1][0]+1<s1)\n\t\t{\n\t\t\tf[i]=f[i-1]+G[1][pos[i-1][0]+1];\n\t\t\tpos[i][0]=pos[i-1][0]+1;\n\t\t\tif(f[i]==f[i-1]+G[1][pos[i-1][1]+1]) pos[i][1]=pos[i-1][1]+1;\n\t\t\telse pos[i][1]=pos[i-1][0]+1;\n\t\t}\n\t\tif(i==2&&s2!=1)\n\t\t{\n\t\t\tif(f[i]<G[2][1])\n\t\t\t{\n\t\t\t\tf[i]=G[2][1];\n\t\t\t\tpos[i][0]=0,pos[i][1]=0;\n\t\t\t}\n\t\t\telse if(f[i]==G[2][1])\n\t\t\t{\n\t\t\t\tpos[i][0]=0;\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((i-2-pos[i-2][1])%2==0&&(i-2-pos[i-2][1])/2<s2-1)//\u4e00\u4e2a w2 \n\t\t{\n\t\t\tint p2=(i-2-pos[i-2][1])/2;\n\t\t\t\n\t\t\t\n\t\t\tif(f[i]<f[i-2]+G[2][p2+1])\n\t\t\t{\n\t\t\t\tf[i]=f[i-2]+G[2][p2+1];\n\t\t\t\tpos[i][0]=pos[i-2][1],pos[i][1]=pos[i-2][1];\n\t\t\t}\t\n\t\t\telse if(f[i]==f[i-2]+G[2][p2+1])\n\t\t\t{\n\t\t\t\tpos[i][0]=Min(pos[i][0],pos[i-2][1]);\n\t\t\t\tpos[i][1]=Max(pos[i][1],pos[i-2][1]);\n\t\t\t}\n\t\t\t\n\t\t\tp2=(i-2-pos[i-2][0])/2;\n\t\t\tif(f[i]==f[i-2]+G[2][p2+1])\n\t\t\t{\n\t\t\t\tpos[i][0]=Min(pos[i][0],pos[i-2][0]);\n\t\t\t\tpos[i][1]=Max(pos[i][1],pos[i-2][0]);\n\t\t\t}\n\t\t } \n\t\t \n\t\tif(i>=3&&pos[i-2][0]<s1-2)\n\t\t{\n\t\t\tint p=pos[i-2][0];\n\t\t\tif(f[i]<f[i-2]+G[1][p+1]+G[1][p+2])\n\t\t\t{\n\t\t\t\tf[i]=f[i-2]+G[1][p+1]+G[1][p+2];\n\t\t\t\tpos[i][0]=pos[i-2][0]+2,pos[i][1]=pos[i-2][0]+2;\n\t\t\t}\n\t\t\telse if(f[i]==f[i-2]+G[1][p+1]+G[1][p+2])\n\t\t\t{\n\t\t\t\tpos[i][0]=Min(pos[i][0],pos[i-2][0]+2);\n\t\t\t\tpos[i][1]=Max(pos[i][1],pos[i-2][0]+2);\n\t\t\t}\n\t\t\t\n\t\t\tp=pos[i-2][1];\n\t\t\tif(f[i]==f[i-2]+G[1][p+1]+G[1][p+2])\n\t\t\t{\n\t\t\t\tpos[i][0]=Min(pos[i][0],pos[i-2][1]+2);\n\t\t\t\tpos[i][1]=Max(pos[i][1],pos[i-2][1]+2);\n\t\t\t}\n//\t\t\tif(f[i]==14) puts(\"YES\");\n\t\t}\n//\t\t\tprintf(\"check:%d\\n\",i);\n//\t\t\tprintf(\"f:%lld\\n\",f[i]);\n//\t\t\tprintf(\"pos:%d %d\\n\",pos[i][0],pos[i][1]);\n//\t\tputs(\"\");\n\t}\n\tll sum=0,ans=f[m];\n\trep(i,1,(int)G[3].size()-1)\n\t{\n\t\tsum+=G[3][i];\n\t\tif(i*3<=m) ans=Max(ans,sum+f[m-i*3])/*,printf(\"%d %lld\\n\",i,sum+f[m-i*3])*/;\n\t}\n//\tif(n==100&&m==101)\n//\t{\n//\t\tprintf(\"%d %d %d\\n\",s1,s2,G[3].size());\n//\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n/*\n6 12\n1 7\n1 10\n2 8\n1 2\n2 9\n3 5\n*/\n```",
        "postTime": 1676855663,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u548c lzqy \u70ab\u996d\u4e86"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u7269\u54c1\u91cd\u91cf\u5f88\u5c0f\u7684 01 \u80cc\u5305\uff0c~~\u6839\u636e\u7ecf\u9a8c\u6211\u4eec\u53ef\u4ee5\u778e\u641e\u4e00\u4e0b qwq\u3002~~\n\n\u4f17\u6240\u5468\u77e5 01 \u80cc\u5305\u4f7f\u7528\u8d2a\u5fc3\u662f\u9519\u7684\uff0c\u4f46\u662f\u5f53\u7269\u54c1\u91cd\u91cf\u5f88\u5c0f\u65f6\uff0c\u8d2a\u5fc3\u5c31\u4f1a\u975e\u5e38\u63a5\u8fd1\u7b54\u6848\uff0c\u6240\u4ee5\u53ef\u4ee5\u5148\u5bf9\u5927\u90e8\u5206\u7a7a\u95f4\u8d2a\u5fc3\uff0c\u5269\u4e0b\u5c0f\u90e8\u5206\u518d\u80cc\u5305\u5373\u53ef\u3002\n\n~~\u867d\u7136\u662f\u9519\u7684\u4f46\u662f\u975e\u5e38\u96be\u88ab\u5361\u6389\u3002~~\n\n\u5177\u4f53\u8d2a\u5fc3\u5b9e\u73b0\u7684\u8bdd\uff0c\u6bcf\u6b21\u82b1 $6$ \u4e2a\u5355\u4f4d\u80cc\u5305\u7a7a\u95f4\u6765\u88c5\u4e00\u4e9b\u4e1c\u897f\uff0c\u679a\u4e3e\u6240\u6709\u88c5\u4e1c\u897f\u7684\u65b9\u6848\u4e14\u6bcf\u79cd\u91cd\u91cf\u7684\u7269\u54c1\u90fd\u4ece\u4ef7\u503c\u6700\u5927\u7684\u5f00\u59cb\u88c5\uff0c\u76f4\u5230\u7a7a\u95f4\u5269\u4f59\u8f83\u5c0f\u505c\u6b62\u8d2a\u5fc3\uff0c\u7136\u540e\u5f00\u59cb\u80cc\u5305\u3002\n\ncode\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long n,m,f[300001],now[4],sum,sv,ans;\nvector<long long> v[4];\ninline bool cmp(long long a,long long b){return a>b;}\nint main(){\n\tios::sync_with_stdio(false);\n\tcin>>n>>m;\n\tfor (int i=1;i<=n;++i){\n\t\tlong long x,y;\n\t\tcin>>x>>y;\n\t\tv[x].push_back(y);\n\t\tsv+=y; sum+=x;\n\t}\n\tif (sum<=m){cout<<sv; return 0;}//\u7279\u5224\u5168\u90fd\u80fd\u88c5\u4e0b\u7684\u60c5\u51b5 \n\tfor (int i=1;i<=3;++i) sort(v[i].begin(),v[i].end(),cmp);\n\tnow[1]=now[2]=now[3]=-1;\n\twhile (m>=220){//\u5269\u8fd9\u4e9b\u5c31\u5b8c\u5168\u591f\u4e86 \n\t\tlong long tmp1=0,tmp2=0,tmp3=0,tmp4=0,tmp5=0,tmp6=0,tmp7=0;//1*6 1*4+2 1*2+2*2 2*3 1*3+3 1+2+3 3*2\u5171\u4e03\u79cd\u65b9\u6cd5 \n\t\tif (now[1]+6<v[1].size()) tmp1=v[1][now[1]+1]+v[1][now[1]+2]+v[1][now[1]+3]+v[1][now[1]+4]+v[1][now[1]+5]+v[1][now[1]+6];\n\t\tif (now[1]+4<v[1].size() && now[2]+1<v[2].size()) tmp2=v[1][now[1]+1]+v[2][now[2]+1]+v[1][now[1]+2]+v[1][now[1]+3]+v[1][now[1]+4];\n\t\tif (now[1]+2<v[1].size() && now[2]+2<v[2].size()) tmp3=v[1][now[1]+1]+v[2][now[2]+1]+v[1][now[1]+2]+v[2][now[2]+2];\n\t\tif (now[2]+3<v[2].size()) tmp4=v[2][now[2]+1]+v[2][now[2]+2]+v[2][now[2]+3];\n\t\tif (now[1]+3<v[1].size() && now[3]+1<v[3].size()) tmp5=v[1][now[1]+1]+v[1][now[1]+2]+v[1][now[1]+3]+v[3][now[3]+1];\n\t\tif (now[1]+1<v[1].size() && now[2]+1<v[2].size() && now[3]+1<v[3].size()) tmp6=v[1][now[1]+1]+v[2][now[2]+1]+v[3][now[3]+1];\n\t\tif (now[3]+2<v[3].size()) tmp7=v[3][now[3]+1]+v[3][now[3]+2];\n\t\tif (tmp1>=tmp1 && tmp1>=tmp2 && tmp1>=tmp3 && tmp1>=tmp4 && tmp1>=tmp5 && tmp1>=tmp6 && tmp1>=tmp7) ans+=tmp1,now[1]+=6;\n\t\telse if (tmp2>=tmp1 && tmp2>=tmp2 && tmp2>=tmp3 && tmp2>=tmp4 && tmp2>=tmp5 && tmp2>=tmp6 && tmp2>=tmp7) ans+=tmp2,now[1]+=4,++now[2];\n\t\telse if (tmp3>=tmp1 && tmp3>=tmp2 && tmp3>=tmp3 && tmp3>=tmp4 && tmp3>=tmp5 && tmp3>=tmp6 && tmp3>=tmp7) ans+=tmp3,now[1]+=2,now[2]+=2;\n\t\telse if (tmp4>=tmp1 && tmp4>=tmp2 && tmp4>=tmp3 && tmp4>=tmp4 && tmp4>=tmp5 && tmp4>=tmp6 && tmp4>=tmp7) ans+=tmp4,now[2]+=3;\n\t\telse if (tmp5>=tmp1 && tmp5>=tmp2 && tmp5>=tmp3 && tmp5>=tmp4 && tmp5>=tmp5 && tmp5>=tmp6 && tmp5>=tmp7) ans+=tmp5,now[1]+=3,++now[3];\n\t\telse if (tmp6>=tmp1 && tmp6>=tmp2 && tmp6>=tmp3 && tmp6>=tmp4 && tmp6>=tmp5 && tmp6>=tmp6 && tmp6>=tmp7) ans+=tmp6,++now[1],++now[2],++now[3];\n\t\telse ans+=tmp7,now[3]+=2; \n\t\tm-=6;\n\t}\n\tfor (int pp=1;pp<=3;++pp)//\u5269\u4e0b\u4e00\u70b9\u7a7a\u95f4\u80cc\u5305 \n\tfor (int i=now[pp]+1;i<v[pp].size();++i) for (int j=m;j>=pp;--j) f[j]=max(f[j],f[j-pp]+v[pp][i]);\n\tlong long anss=0;\n\tfor (int i=0;i<=m;++i) anss=max(anss,f[i]);\n\tcout<<ans+anss;\nreturn 0;\n}\n```",
        "postTime": 1665197768,
        "uid": 351749,
        "name": "lanos212",
        "ccfLevel": 0,
        "title": "CF808E Selling Souvenirs"
    },
    {
        "content": "~~\u7adf\u7136\u6ca1\u6709\u7528\u4e09\u5206\u505a\u7684\u4eba\uff0c\u8d76\u7d27\u6765\u53d1\u4e00\u53d1~~\n\n\u56e0\u4e3a\u5b83\u603b\u5171\u53ea\u6709\u4e09\u79cd\u91cd\u91cf\uff0c\u5148\u6839\u636e\u91cd\u91cf\u5206\u7ec4\uff0c\u663e\u800c\u6613\u89c1\uff0c\u5982\u679c\u8981\u5728\u4efb\u610f\u4e00\u7ec4\u4e2d\u9009\u62e9\u4e00\u5b9a\u7684\u793c\u54c1\uff0c\u5219\u6211\u4eec\u4e00\u5b9a\u4f1a\u9009\u62e9\u5176\u4e2d\u4ef7\u503c\u6700\u5927\u7684\u90e8\u5206\uff0c\u53ef\u4ee5\u5148\u5c06\u6bcf\u7ec4\u793c\u7269\u5185\u6309\u4ef7\u683c\u5148\u6392\u597d\u5e8f\u3002\n\n\u663e\u800c\u6613\u89c1\uff0c\u5982\u679c\u5df2\u7ecf\u77e5\u9053\u4e862,3\u4e24\u7ec4\u7684\u5404\u81ea\u4e70\u7684\u6570\u91cf\uff0c\u5219\u7b2c\u4e00\u7ec4\u4e70\u7684\u6570\u91cf\u4e5f\u662f\u53ef\u4ee5\u6c42\u51fa\u6765\u7684\u3002\u6545\u800c\uff0c\u679a\u4e3e\u4e8c\u4e09\u7ec4\u9009\u7684\u6570\u91cf\uff0c\u518d\u5f97\u51fa\u603b\u4ef7\u503c\u662f\u4e00\u5b9a\u53ef\u4ee5\u5f97\u51fa\u7b54\u6848\u7684\u3002\n\n\u4f46\u4e0a\u8ff0\u505a\u6cd5\u65f6\u95f4\u590d\u6742\u5ea6\u8fbe\u5230\u4e86  \n$$ O(n^{2})$$  \n\u660e\u663e\u662f\u8fc7\u4e0d\u4e86\u8fd9\u9053\u9898\u7684\uff0c\u8003\u8651\u4f18\u5316\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u518d\u679a\u4e3e1\uff0c2\u4e24\u7ec4\u5206\u754c\u7ebf\u65f6\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e2a\u5355\u5cf0\u51fd\u6570\uff0c\u4e8e\u662f\u53ef\u4ee5\u7528\u4e09\u5206\u6765\u5bfb\u627e\u5b83\u7684\u6700\u9ad8\u70b9\u3002\u4f46\u662f\u518d\u8fd9\u4e2a\u5355\u5cf0\u4e0a\u4f1a\u51fa\u73b0\u5e73\u53f0\uff0c\u5f71\u54cd\u6211\u4eec\u7684\u5224\u65ad\uff0c\u8bf4\u4ee5\u9700\u8981\u518d\u5e73\u53f0\u51fa\u73b0\u65f6\uff0c\u5bf9\u5176\u8fdb\u884c\u7279\u6b8a\u5904\u7406\uff0c\u5c06\u53f3\u7aef\u820d\u5f03\uff0c\u53ea\u53d6\u5de6\u7aef\u3002\n\n\u4e8e\u662f\uff0c\u5c31\u53ef\u4ee5\n$$ O(nlog_{n})$$\n\u7684\u65f6\u95f4\u4e2d\u5904\u7406\u6389\u4e86\u3002\n\n## \u6e90\u7801\n~~\u6709\u4e9b\u96be\u8c03~~\n```cpp\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n#include<iostream>\n#include<algorithm>\n#include<vector>\n#include<queue>\n#include<map>\n#include<bitset>\nusing namespace std;\ntypedef long long LL;\n#define gc() getchar()\ntemplate<typename _T>\nvoid read(_T &x){\n\t_T f=1;x=0;char s=gc();\n\twhile(s>'9'||s<'0'){if(s=='-')f=-1;s=gc();}\n\twhile(s>='0'&&s<='9'){x=(x<<3)+(x<<1)+(s^48);s=gc();}\n\tx*=f;\n}\nLL n,m,ans;\nvector<LL>c[5];\nbool cmp(LL x,LL y){return x>y;}\nLL check(LL x,LL y){\n\t//printf(\"%d %d\\n\",x,y/2);\n\tif(y%2)x++;\n\tif(c[1].size()==0||x==0)x=0;\n\telse x=c[1][min(x-1,(LL)c[1].size()-1)];\n\tif(c[2].size()==0||y<2)y=0;\n\telse y=c[2][min(y/2-1,(LL)c[2].size()-1)];\n\treturn x+y;\n}\nsigned main(){\n\tread(n);read(m);\n\tfor(int i=1;i<=n;i++){\n\t\tLL W,C;read(W);read(C);\n\t\tc[W].push_back(C);\n\t}\n\tfor(int i=1;i<4;i++)sort(c[i].begin(),c[i].end(),cmp);\n\tfor(int i=1;i<4;i++){\n\t\tint siz=c[i].size();\n\t\tfor(int j=1;j<siz;j++)\n\t\t\tc[i][j]+=c[i][j-1]; \n\t}\n\tfor(int i=0;i<=c[3].size()&&i*3<=m;i++){\n\t\tLL l=0,r=min(m-3*i,(LL)c[1].size()),tmp=m-3*i;\n\t\t//printf(\"%d %d %d\\n\",tmp,l,r);\n\t\tif(c[1].size()+2ll*c[2].size()<=tmp)\n\t\t\tans=max(ans,(i?c[3][i-1]:0)+check(c[1].size(),2ll*c[2].size()));\n\t\telse{\n\t\t\twhile(l<r){\n\t\t\t\tLL mid1=l+(r-l)/3;\n\t\t\t\tLL mid2=r-(r-l)/3;\n\t\t\t\tLL tmp1=check(mid1,tmp-mid1);\n\t\t\t\tLL tmp2=check(mid2,tmp-mid2);\n\t\t\t\tif(tmp1>tmp2)r=mid2-1;\n\t\t\t\telse l=mid1+1;\n\t\t\t\t//printf(\"%d %d %d %d\\n\",mid1,mid2,tmp1,tmp2);\n\t\t\t\t//printf(\"%d %d %d\\n\",i,l,r);\n\t\t\t}\n\t\t\tans=max(ans,(i?c[3][i-1]:0)+check(l,tmp-l));\n\t\t}\n\t}\n\tprintf(\"%lld\\n\",ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1595501061,
        "uid": 105141,
        "name": "StaroForgin",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF808E \u3010Selling Souvenirs\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u771f\u7684\u8c03\u7684\u6211\u5fc3\u6001\u7206\u70b8\u554a\u2026\u2026\u53ef\u80fd\u662f\u6211\u592a\u83dc\u4e86\u3002\n\n\u4e00\u5f00\u59cb\u770b\u5230\u8fd9\u9053\u9898\uff0c\u4f60\u7684\u60f3\u6cd5\u662f\uff1a\u8fd9\u4e0d\u662f\u88f8\u80cc\u5305\u561b\uff1f\n\n\u6253\u5230\u4e00\u534a\uff0c\u4f60\u7684\u60f3\u6cd5\u662f\uff1a\u8fd9\u6570\u636e\u4e0d\u50cf\u662f\u80cc\u5305\u80fd\u8fc7\u7684\u9898\uff1f\n\n\u518d\u8fc7\u4e00\u4f1a\u513f\uff0c\u4f60\u7684\u60f3\u6cd5\u662f\uff1a$w_i\u22643?$\u8fd9\u770b\u8d77\u6765\u662f\u4e00\u4e2a\u7a81\u7834\u53e3\u3002\n\n\u6240\u4ee5\u6211\u4eec\u8981\u9488\u5bf9\u8fd9\u4e2a$w_i\u22643$\u6765\u505a\u8fd9\u9053\u9898\u3002\u8fd9\u91cc\u6211\u7ed9\u51fa\u6211\u505a\u8fd9\u9053\u9898\u65f6\u5019\u7684\u60f3\u6cd5\u3002\n\n\u9996\u5148\uff0c\u5f88\u81ea\u7136\u7684\u628a\u7269\u54c1\u6309\u7167\u91cd\u91cf\u5206\u7c7b\uff0c\u6211\u4eec\u6682\u4e14\u628a$w_i=1$\u7684\u53eb\u505a\u4e00\u7c7b\u7269\u54c1\uff0c$w_i=2$\u7684\u53eb\u505a\u4e8c\u7c7b\u7269\u54c1\uff0c$w_i=3$\u7684\u53eb\u505a\u4e09\u7c7b\u7269\u54c1\u3002\n\n\u7531\u4e8e\u4ef7\u503c\u8981\u6700\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u5f88\u81ea\u7136\u5730\u60f3\u5230\uff0c\u6211\u4eec\u9009\u7684\u7269\u54c1\u80af\u5b9a\u662f\u6bcf\u7c7b\u4e2d\u4ef7\u503c\u6700\u5927\u7684\u7269\u54c1\u3002\u4e8e\u662f\u6709\u4e00\u79cd\u8d2a\u5fc3\u7684\u505a\u6cd5\u3002\n\n\u6211\u662f\u849f\u84bb$QnQ$\uff0c\u6240\u4ee5\u6211\u73b0\u5728\u8ba4\u4e3a\u5148\u5168\u90e8\u9009\u4e09\u7c7b\u7269\u54c1\uff0c\u518d\u5168\u90e8\u9009\u4e8c\u7c7b\u7269\u54c1\uff0c\u518d\u62ff\u5269\u4e0b\u7684\u9009\u4e00\u7c7b\u7269\u54c1\u65b9\u6848\u6700\u4f18\u3002\n\n\u5750\u6211\u5de6\u8fb9\u7684\u662f$dalao$\uff0c\u4ed6\u544a\u8bc9\u6211\u5982\u679c\u628a\u9009\u53d6\u7684\u4e8c\u7c7b\u7269\u54c1\u4ef7\u503c\u6700\u4f4e\u7684\u7269\u54c1\u62ff\u6389\u51e0\u4e2a\uff0c\u53bb\u6362\u4e00\u7c7b\u7269\u54c1\u4e2d\u4ef7\u503c\u6700\u5927\u7684\u8fd8\u6ca1\u9009\u7684\u7269\u54c1\uff0c\u80fd\u5f97\u5230\u66f4\u591a\u7684\u4ef7\u503c\u3002\n\n\u5750\u6211\u53f3\u8fb9\u7684\u662f$julao$\uff0c\u4ed6\u544a\u8bc9\u6211\u5982\u679c\u628a\u9009\u53d6\u7684\u4e00\u7c7b\u7269\u54c1\u4ef7\u503c\u6700\u4f4e\u7684\u7269\u54c1\u62ff\u6389\u51e0\u4e2a\uff0c\u53bb\u6362\u4e8c\u7c7b\u7269\u54c1\u4e2d\u4ef7\u503c\u6700\u5927\u7684\u8fd8\u6ca1\u9009\u7684\u7269\u54c1\uff0c\u80fd\u5f97\u5230\u66f4\u591a\u7684\u4ef7\u503c\u3002\n\n\u5750\u6211\u524d\u9762\u7684\u662f$jilao$\uff0c\u4ed6\u544a\u8bc9\u6211\u5982\u679c\u628a\u9009\u53d6\u7684\u4e09\u7c7b\u7269\u54c1\u4ef7\u503c\u6700\u4f4e\u7684\u7269\u54c1\u62ff\u6389\u51e0\u4e2a\uff0c\u53bb\u6362\u4e00\u7c7b\u4e8c\u7c7b\u7269\u54c1\uff0c\u80fd\u5f97\u5230\u66f4\u591a\u7684\u4ef7\u503c\u3002\n\n\u6211\u8fd9\u4e2a\u849f\u84bb\u53d7\u5230\u4e86\u6781\u5927\u7684\u6253\u51fb$QhQ$\uff0c\u6b63\u5f53\u6211\u8981\u653e\u5f03\u6211\u7684\u505a\u6cd5\u7684\u65f6\u5019\uff0c\u5750\u6211\u540e\u9762\u7684$Female-Dressed-dalao$\u9f13\u52b1\u6211\u8bf4\u8981\u575a\u6301\u6211\u7684\u505a\u6cd5$!Q\\omega Q!$\n\n\u4e8e\u662f\u6211\u628a\u56db\u79cd\u7ed3\u5408\u8d77\u6765\uff0c\u5f97\u5230\u4e86\u4ee5\u4e0b\u7684\u505a\u6cd5\uff1a\n\n1. \u5148\u6309\u7167\u849f\u84bb\u7684\u8d2a\u5fc3\u601d\u60f3\uff0c\u5148\u9009\u5b8c\u4e09\u7c7b\u7269\u54c1\uff0c\u518d\u9009\u5b8c\u4e8c\u7c7b\u7269\u54c1\uff0c\u518d\u9009\u4e00\u7c7b\u7269\u54c1\uff0c\u8f6c\u5165\u6b65\u9aa4\u4e8c\u3002\n2. \u6309\u7167$dalao$\u548c$julao$\u7684\u601d\u8def\u53bb\u8c03\u6574\u6211\u4eec\u7684\u9009\u62e9\uff0c\u8f6c\u5165\u6b65\u9aa4\u4e09\u3002\n3. \u518d\u6309\u7167$jilao$\u7684\u601d\u8def\uff0c\u6211\u4eec\u6bcf\u6b21\u53bb\u6389\u6211\u4eec\u9009\u7684\u4ef7\u503c\u6700\u4f4e\u7684\u4e09\u7c7b\u7269\u54c1\uff0c\u8f6c\u5165\u6b65\u9aa4\u56db\u3002\n4. \u518d\u6309\u7167\u849f\u84bb\u7684\u8d2a\u5fc3\u601d\u60f3\uff0c\u9009\u5b8c\u4e8c\u7c7b\u7269\u54c1\uff0c\u518d\u9009\u4e00\u7c7b\u7269\u54c1\uff0c\u8f6c\u5165\u6b65\u9aa4\u4e8c\u3002\n\n\u5982\u6b64\u8c03\u6574\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u5c31\u53ef\u4ee5\u5f97\u5230\u6211\u4eec\u6700\u7ec8\u7684\u7b54\u6848\u5566\uff01\u65f6\u95f4\u590d\u6742\u5ea6\u6709\u4e9b\u7384\u5b66\uff0c\u4f46\u662f\u80fd\u8fc7\u3002\n\n\u6ce8\u610f\u5f00**long long**\uff0c\u5426\u5219\u4f60\u8fde\u600e\u4e48T\u7684\u90fd\u4e0d\u77e5\u9053\uff01\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n\nint n,m;\nvector<int>V[4];\nll ans,val;\n\nsigned main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor (int i=1;i<=n;i++) \n\t{\n\t\tint W,C;scanf(\"%d%d\",&W,&C);\n\t\tV[W].push_back(C);\n\t}\n\tint p1=V[1].size(),p2=V[2].size(),p3=V[3].size();\n\tsort(V[1].begin(),V[1].end());\n\tsort(V[2].begin(),V[2].end());\n\tsort(V[3].begin(),V[3].end());//\u5206\u7c7b\n\tint r1=V[1].size()-1,r2=V[2].size()-1,r3=V[3].size()-1;\n\tfor (;r3>=0&&m>=3;--r3) val+=V[3][r3],m-=3;\n\tfor (;r2>=0&&m>=2;--r2) val+=V[2][r2],m-=2;\n\tfor (;r1>=0&&m>=1;--r1) val+=V[1][r1],m--;//\u849f\u84bb\u7684\u7b2c\u4e00\u6b65\u60f3\u6cd5\n\twhile (r1>=0&&r2<p2-1)\n\t{\n\t\tll svr1=r1,svr2=r2,svval=val,svm=m;\n\t\tm+=2;r2++;val-=V[2][r2];\n\t\twhile (m&&r1>=0) {val+=V[1][r1];--r1;--m;}\n\t\tif (val<=svval) {r1=svr1;r2=svr2;val=svval;m=svm;break;}\n\t}\n\twhile (r2>=0&&r1<p1-1)\n\t{\n\t\tll svr1=r1,svr2=r2,svval=val,svm=m;\n\t\twhile (r1<p1-1&&m<2) ++r1,++m,val-=V[1][r1];\n\t\twhile (m>=2&&r2>=0) val+=V[2][r2],--r2,m-=2;\n\t\tif (val<=svval) {r1=svr1;r2=svr2;val=svval;m=svm;break;}\n\t}//\u7b2c\u4e8c\u6b65\uff0c\u4e0d\u65ad\u5730\u8c03\u6574\n\tans=val;\n\twhile (r3<p3-1)\n\t{\n\t\tm+=3;r3++;val-=V[3][r3];\n\t\tfor (;r2>=0&&m>=2;--r2) val+=V[2][r2],m-=2;\n\t\tfor (;r1>=0&&m>=1;--r1) val+=V[1][r1],m--;\n\t\twhile (r1>=0&&r2<p2-1)\n\t\t{\n\t\t\tll svr1=r1,svr2=r2,svval=val,svm=m;\n\t\t\tm+=2;r2++;val-=V[2][r2];\n\t\t\twhile (m&&r1>=0) {val+=V[1][r1];--r1;--m;}\n\t\t\tif (val<=svval) {r1=svr1;r2=svr2;val=svval;m=svm;break;}\n\t\t}\n\t\twhile (r2>=0&&r1<p1-1)\n\t\t{\n\t\t\tll svr1=r1,svr2=r2,svval=val,svm=m;\n\t\t\twhile (r1<p1-1&&m<2) ++r1,++m,val-=V[1][r1];\n\t\t\twhile (m>=2&&r2>=0) val+=V[2][r2],--r2,m-=2;\n\t\t\tif (val<=svval) {r1=svr1;r2=svr2;val=svval;m=svm;break;}\n\t\t}\n\t\tif (val>ans) ans=val;\n\t}//\u7b2c\u4e8c\u3001\u4e09\u3001\u56db\u6b65\n\tcout<<ans<<endl;\n} \n```\n",
        "postTime": 1564800381,
        "uid": 29575,
        "name": "Holy_Push",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF808E \u3010Selling Souvenirs\u3011"
    }
]
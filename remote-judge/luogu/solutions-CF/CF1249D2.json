[
    {
        "content": "# \u66b4\u529b+\u8d2a\u5fc3\n\u76f4\u63a5\u66b4\u529b\u7ef4\u62a4\u626b\u63cf1~2e5\u7684\u5750\u6807\u6bb5,\u4e3a\u4e86\u6709\u5e8f\u5904\u7406\u6bcf\u4e00\u6bb5\u533a\u95f4,\u7528\u4e00\u4e2aset\u6309\u7167\u533a\u95f4\u53f3\u7aef\u70b9\u4e3a\u6392\u5e8f\u5173\u952e\u5b57\u7ef4\u62a4\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u6bb5\u533a\u95f4,\u5728\u626b\u5230${l_i}$\u5750\u6807\u65f6\u5c06\u5176\u52a0\u5165set,\u5728\u626b\u5230${r_i}+1$\u7684\u5750\u6807\u65f6\u5c06\u5176\u5f39\u51fa\u3002\n\n\u56e0\u4e3a\u4e3a\u4e86\u4fdd\u8bc1\u4e0d\u8d85\u8fc7k\u6bb5\u7684\u7ea6\u675f,\u9700\u8981\u518d\u5f39\u51fa\u4e00\u4e9b\u533a\u95f4\u3002\u800c\u53d6\u957f\u7684\u533a\u95f4\u4e00\u5b9a\u4e0d\u4f1a\u6bd4\u53d6\u77ed\u7684\u533a\u95f4\u66f4\u4f18(\u957f\u533a\u95f4\u7684\u540e\u6548\u6027\u66f4\u4e45),\u6240\u4ee5\u53ef\u4ee5\u4e00\u76f4\u5f39\u51fa\u6700\u672b\u4e00\u6bb5\u533a\u95f4\u76f4\u5230set\u4e2d\u6240\u5b58\u533a\u95f4\u6570\u91cf\u5c0f\u4e8e\u7b49\u4e8ek\u3002\n\n```cpp\n#include <set>\n#include <vector>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#define ll long long\nusing namespace std;\ninline int read()\n{\n\tchar ch=getchar();\n\tint f=1,x=0;\n\twhile(ch<'0'||ch>'9')\n\t{\n\t\tif(ch=='-')f=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9')\n\t{\n\t\tx=(x<<3)+(x<<1)+(ch^48);\n\t\tch=getchar();\n\t}\n\treturn x*f;\n}\nint l[200001],r[200001];\nvector<pair<int,int> > pos[200001];\nint main()\n{\n    int n=read(),k=read();\n    for(int i=1;i<=n;++i)\n    {\n    \tl[i]=read();\n        r[i]=read();\n    \tpos[l[i]].push_back(make_pair(r[i],i));\n    }\n    vector<int> ans;\n    set<pair<int,int> > s;\n    for(int i=1;i<200001;++i)\n    {\n    \tfor(int j=0;j<pos[i].size();++j)\n    \t\ts.insert(pos[i][j]);\n    \twhile(!s.empty()&&s.begin()->first<i)s.erase(s.begin());\n    \twhile(s.size()>k)\n        {\n    \t\tset<pair<int,int> >::iterator it=s.end();\n            it--;\n    \t\tans.push_back(it->second);\n    \t\ts.erase(it);\n    \t}\n    }\n    printf(\"%d\\n\",ans.size());\n    sort(ans.begin(),ans.end());\n    for(int i=0;i<ans.size();++i)\n    \tprintf(\"%d \",ans[i]);\n    return 0;\n}\n```\n~~\u6211\u662f\u849f\u84bb~~",
        "postTime": 1571837885,
        "uid": 116113,
        "name": "Lucifer_Bartholomew",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1249D2 \u3010Too Many Segments (hard version)\u3011"
    },
    {
        "content": "\u5bf9\u4e8e\u8fd9\u79cd\u533a\u95f4\u8986\u76d6\u95ee\u9898\u5927\u90e8\u5206\u60c5\u51b5\u662f\u8d2a\u5fc3\uff0c\u5c0f\u90e8\u5206\u60c5\u51b5\u662fDP\uff0c\u8fd8\u6709\u6781\u5c11\u90e8\u5206\u662f\u7f51\u7edc\u6d41\u2014\u2014 @Binary_Search_Tree\n\n\u6ca1\u9519\uff0c\u6b64\u9898\u5c31\u662f\u5229\u7528\u5806\u7684\u8d2a\u5fc3\u6765\u89e3\u51b3\u533a\u95f4\u8986\u76d6\u95ee\u9898\u3002\n\n\u9996\u5148\u5c06\u8bfb\u5165\u7684\u7ebf\u6bb5\u6309\u5de6\u7aef\u70b9\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u5e76\u4e22\u5230\u4e00\u4e2a\u5dee\u5206\u6570\u7ec4\u79bb\u91cc\u53bb\uff0c\u6392\u5b8c\u5e8f\u540e\u6211\u4eec\u6309\u70b9\u8003\u8651\u3002\n\n\u8003\u86511~i-1\u4e2a\u70b9\u5df2\u7ecf\u5408\u6cd5\uff0c\u5bf9\u4e8e\u7b2ci\u4e2a\u70b9\u9996\u5148\u5c06\u8986\u76d6\u8fd9\u4e2a\u70b9\u7684\u7ebf\u6bb5\u653e\u8fdb\u5806\u91cc\u3002\n\n\u7136\u540e\u5982\u679c\u8fd9\u4e2a\u70b9\u4e0d\u5408\u6cd5\uff0c\u6211\u4eec\u80af\u5b9a\u5c3d\u91cf\u5220\u9664\u8986\u76d6\u5b83\u4e14\u53f3\u7aef\u70b9\u66f4\u5927\u7684\u7ebf\u6bb5\u3002\n\n\u6240\u4ee5\u7ef4\u62a4\u4ee5\u53f3\u7aef\u70b9\u4e3a\u5173\u952e\u5b57\u7684\u5927\u6839\u5806\u5373\u53ef\u3002\n\ncode:\n\n```cpp\n#include <cstdio>\n#include <queue>\n#include <vector>\n#include <algorithm>\nusing namespace std;\n \ninline void read (int& s) {\n\ts = 0;\n\tstatic char c = getchar ();\n\twhile (c < '0' || c > '9') c = getchar ();\n\twhile (c >= '0' && c <= '9') s = (s << 3) + (s << 1) + (c ^ 48), c = getchar ();\n\treturn ;\n}\n \nconst int N = 200003;\nint k, n, ans, a[N], sum[N], mx;\nstruct stu {\n\tint x, y, id;\n}s[N], p;\n \ninline int cmp2 (const stu p, const stu q) {\n\tif (p.x == q.x) return p.y < q.y;\n\treturn p.x < q.x;\n}\n \nstruct cmp {\n\tinline int operator () (const stu& p, const stu& q) const {\n\t\treturn p.y < q.y;\n\t}\n};\n \npriority_queue <stu, vector <stu>, cmp> q;\n \nint main () {\n\tread (n), read (k);\n\tint i; for (i = 1; i <= n; ++i) {\n\t\tread (s[i].x), read (s[i].y), s[i].id = i;\n\t\t++sum[s[i].x];\n\t\t--sum[s[i].y + 1];\n\t} //\u5148\u4e22\u8fdb\u5dee\u5206\u6570\u7ec4\n\tsort (s + 1, s + 1 + n, cmp2); //\u6309\u5de6\u7aef\u70b9\u6392\u5e8f\n\tint j = 1;\n\tfor (i = 1; i < N; ++i) {\n\t\twhile (j <= n && s[j].x <= i) q.push (s[j++]);//\u5c06\u8986\u76d6\u8fd9\u4e2a\u70b9\u7684\u7ebf\u6bb5\u4e22\u8fdb\u5806\u91cc\n\t\tsum[i] += sum[i - 1]; \n\t\twhile (sum[i] > k) {\n\t\t\tp = q.top ();\n\t\t\tq.pop ();\n\t\t\ta[++ans] = p.id;\n\t\t\t--sum[i];\n\t\t\t++sum[p.y + 1];\n\t\t} //\u5c3d\u91cf\u5220\u9760\u53f3\u7684\u7ebf\u6bb5\n\t}\n\tprintf (\"%d\\n\", ans);\n\tif (ans) {\n\t\tfor (i = 1; i < ans; ++i) printf (\"%d \", a[i]);\n\t\tprintf (\"%d\\n\", a[ans]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1571830745,
        "uid": 31193,
        "name": "\u68a7\u6850\u706f",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1249D2 \u3010Too Many Segments (hard version)\u3011"
    },
    {
        "content": "**\u9898\u76ee\u5927\u610f**\r\n\r\n\u7ed9\u5b9a $n$ \u4e2a\u533a\u95f4\uff0c\u8981\u6c42\u5220\u9664\u6700\u5c11\u6570\u91cf\u7684\u533a\u95f4\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u70b9\u88ab\u8986\u76d6\u7684\u6b21\u6570\u4e0d\u8d85\u8fc7 $k$\uff0c\u6c42\u65b9\u6848\u3002\r\n\r\n**\u89e3\u9898\u601d\u8def**\r\n\r\n\u524d\u7f00\u548c\u3001\u5dee\u5206\u3001\u4f18\u5148\u961f\u5217\u3001\u8d2a\u5fc3\u3002\r\n\r\n\u6211\u4eec\u9996\u5148\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u80fd\u591f\u8ba1\u7b97\u51fa\u5f53\u524d\u70b9 $x$ \u5904\u88ab\u51e0\u6761\u7ebf\u6bb5\u8986\u76d6\u7684\u95ee\u9898\u3002\u6211\u4eec\u9700\u8981\u5148\u5c06\u6240\u6709\u7ebf\u6bb5\u6309\u5de6\u7aef\u70b9\u6392\u5e8f\uff0c\u7528\u5dee\u5206\u7ef4\u62a4\u7ebf\u6bb5\u7ed3\u675f\uff0c\u7136\u540e\u679a\u4e3e\u6bcf\u6761\u7ebf\u6bb5\uff0c\u6bcf\u679a\u4e3e\u4e00\u4e2a\u7ebf\u6bb5\u6211\u4eec\u5c31\u8ba9 $cnt+1$\uff0c \u8868\u793a\u5f53\u524d\u70b9 `a[i].l` \u6709 $cnt$ \u4e2a\u7ebf\u6bb5\u8986\u76d6\uff0c\u540c\u65f6 `sum[a[i].r]--`\uff0c\u8868\u793a\u7ebf\u6bb5\u5728 `a[i].r` \u5728\u8fd9\u91cc\u7ed3\u675f\u3002\u8fd8\u6ca1\u5b8c\uff0c\u6211\u4eec\u5728\u5224\u65ad\u5f53\u524d\u70b9 `a[i].l` \u88ab\u51e0\u6761\u7ebf\u6bb5\u8986\u76d6\u65f6\uff0c\u8fd8\u9700\u8981\u53bb\u6389\u53f3\u7aef\u70b9\u5df2\u7ecf\u5c0f\u4e8e `a[i].l` \u7684\u7ebf\u6bb5\uff0c\u8fd9\u6837\u5c31\u5f97\u5230\u4e86\u5f53\u524d\u70b9 `a[i].l` \u6709 $cnt$ \u4e2a\u7ebf\u6bb5\u8986\u76d6\u3002\u7136\u540e\u5224\u65ad $cnt>k$\uff0c\u5982\u679c $cnt>k$ \u8bf4\u660e\u9700\u8981\u53bb\u6389\u7ebf\u6bb5\uff0c\u6211\u4eec\u4f18\u5148\u53bb\u6389\u53f3\u7aef\u70b9\u6700\u5927\u7684\u7ebf\u6bb5\u3002\r\n\r\n**AC \u4ee3\u7801\uff0c\u8bf7\u52ff\u6284\u88ad**\r\n\r\n```cpp\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nconst int maxn = 2e5 + 5;\r\nint n, k;\r\nint sum[200005], cnt, pos;\r\nvector<int> ans;\r\npriority_queue<pair<int, int> > p;\r\nstruct node {\r\n    int l, r, id;\r\n} a[200005];\r\nbool cmp(node x, node y) {\r\n    if(x.l == y.l) {\r\n        return x.r > y.r;\r\n    }\r\n    return x.l < y.l;\r\n}\r\nint main() {\r\n    cin >> n >> k;\r\n    for(int i = 1; i <= n; i++) {\r\n        cin >> a[i].l >> a[i].r;\r\n        a[i].id = i;\r\n    }\r\n    sort(a + 1, a + 1 + n, cmp);\r\n    for(int i = 1; i <= n; i++) {\r\n        p.push(make_pair(a[i].r, a[i].id));\r\n        cnt++;\r\n        sum[a[i].r]--;\r\n        while(pos < a[i].l) {\r\n            cnt = cnt + sum[pos];\r\n            pos++;\r\n        }\r\n        if(a[i].l != a[i + 1].l) {\r\n            while(cnt > k) {\r\n                while(!p.empty() && p.top().first < a[i].l) {\r\n                    p.pop();\r\n                }\r\n                ans.push_back(p.top().second);\r\n                sum[p.top().first]++;\r\n                p.pop();\r\n                cnt--;\r\n            }\r\n        }\r\n    }\r\n    cout << ans.size() << \"\\n\";\r\n    for(int i = 0; i < ans.size(); i++) {\r\n        cout << ans[i] << \" \";\r\n    }\r\n    cout << \"\\n\";\r\n    return 0;\r\n}\r\n```",
        "postTime": 1663738475,
        "uid": 482592,
        "name": "cyfqwq",
        "ccfLevel": 4,
        "title": "CF1249D2 Too Many Segments (hard version)\u9898\u89e3"
    },
    {
        "content": "\u672c\u9898\u662f [CF1249D1 Too Many Segments (easy version)](https://www.luogu.com.cn/problem/CF1249D1) \u7684\u52a0\u96be\u7248\uff0c\u5728\u89e3\u51b3\u672c\u9898\u4e4b\u524d\uff0c\u53ef\u4ee5\u5148\u770b\u770b\u672c\u9898\u7684\u7b80\u5355\u7248\u672c\uff0c\u53ef\u80fd\u4f1a\u5bf9\u4f60\u89e3\u8fd9\u9053\u9898\u8d77\u5230\u4e00\u4e2a\u8fc7\u5ea6\u4f5c\u7528\u3002~~\u4ee5\u9632\u6b62\u8bb2\u4e86\u4e00\u5927\u5806\u5230\u540e\u6765\u81ea\u5df1\u5374\u6ca1\u6709\u601d\u8def\u3002~~\n\n## \u9898\u76ee\u5927\u610f\n\n\u6570\u8f74\u4e0a\u6709 $n$ \u6761\u7ebf\u6bb5\uff0c\u73b0\u5728\u8981\u6c42\u6570\u8f74\u4e0a\u7684\u70b9\u4e0d\u80fd\u5b58\u5728\u8d85\u8fc7 $k$ \u6761\u7ebf\u6bb5\u8986\u76d6\u5b83\uff0c\u5982\u679c\u5b58\u5728\u8d85\u8fc7\u7684\u60c5\u51b5\uff0c\u6c42\u5220\u9664\u6700\u5c11\u7684\u7ebf\u6bb5\u6570\u91cf\u4ee5\u53ca\u6240\u5220\u9664\u7ebf\u6bb5\u7684\u7f16\u53f7\u3002$(n\\le200000)$\n\n## \u601d\u8def\n\n1.\u601d\u8def\u4e00\uff1a \u66b4\u529b\n\n\u66b4\u529b\u679a\u4e3e\u6bcf\u4e00\u4e2a\u7ebf\u6bb5\uff0c\u518d\u66b4\u529b\u626b\u4e00\u904d\u6570\u8f74\u4e0a\u7684\u70b9\uff0c\u8bb0\u5f55\u4e00\u4e0b\u6709\u591a\u5c11\u6761\u7ebf\u6bb5\u8986\u76d6\u4e86\u8be5\u70b9\uff0c\u5982\u679c\u8be5\u70b9\u88ab\u8d85\u8fc7 $k$ \u4e2a\u7ebf\u6bb5\u6240\u8986\u76d6\uff0c\u90a3\u4e48\uff0c\u5c06\u53f3\u7aef\u70b9\u6700\u9760\u53f3\u7684\u7ebf\u6bb5\u5220\u9664\uff0c\u5982\u56fe\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/lnob6xkn.png)\n\n## Code:\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 205;\nstruct Node{\n  int l, r, i;\n}a[N];\nint n, k, sum[N], s[N], tot;\n\nbool cmp(Node x, Node y){\n  if(x.r == y.r) return x.l < y.l;\n  return x.r < y.r;\n}\n\nint main(){\n  cin >> n >> k;     \n  for(int i = 1;i <= n;i++){\n    cin >> a[i].l >> a[i].r;//\u5de6\u53f3\u7aef\u70b9\n    a[i].i = i;\n  }\n  sort(a + 1, a + n + 1, cmp);//\u6309\u53f3\u7aef\u70b9\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\n  for(int i = 1;i <= n;i++){\n    for(int j = a[i].l;j <= a[i].r;j++){//\u679a\u4e3e\u7ebf\u6bb5\u6240\u8986\u76d6\u7684\u7aef\u70b9\n      sum[j]++;\n      if(sum[j] > k){//\u8be5\u70b9\u88ab\u8d85\u8fc7 k \u4e2a\u7ebf\u6bb5\u6240\u8986\u76d6\n        s[++tot] = a[i].i;//\u5c06\u53f3\u7aef\u70b9\u6700\u9760\u53f3\u7684\u7ebf\u6bb5\u5220\u9664\n        break;\n      }\n    }\n  }\n  cout << tot << '\\n';\n  for(int i = 1;i <= tot;i++){\n    cout << s[i] << ' ';//\u8f93\u51fa\n  }\n  return 0;\n}\n```\n2.\u601d\u8def\u4e8c\uff1a**\u4f18\u5316** \u66b4\u529b\n\n\u770b\u4e00\u773c $n$ \u7684\u8303\u56f4\uff0c\u76f4\u63a5\u61f5\u6bd4\uff0c\u770b\u6765\u8981\u4e0a $O(n\\log n)$ \u7ea7\u522b\u7684\u6570\u636e\u7ed3\u6784\u4f18\u5316\u4e86\u3002\n\n\u4e0d\u96be\u53d1\u73b0\uff0c\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u5efa\u7acb\u5728\u53f3\u7aef\u70b9\u6709\u5e8f\u7684\u60c5\u51b5\u4e0b\u624d\u8fdb\u884c\u7684\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a\u6709\u5e8f\u96c6\u5408\u5c06\u53f3\u7aef\u70b9\u653e\u8fdb\u6709\u5e8f\u96c6\u5408\u4e2d\uff0c\u5728\u4ece\u5de6\u5230\u53f3\u679a\u4e3e\u5de6\u7aef\u70b9\uff0c\u679a\u4e3e\u5de6\u7aef\u70b9\u7684\u540c\u65f6\u5224\u65ad\u5f53\u524d\u5de6\u7aef\u70b9\u6240\u5bf9\u5e94\u7684\u70b9\u662f\u5426\u88ab\u8d85\u8fc7 $k$ \u4e2a\u7ebf\u6bb5\u6240\u8986\u76d6\u3002\u64cd\u4f5c\u540c\u601d\u8def\u4e00\u3002\n\n\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u6b64\u57fa\u7840\u4e0a\u52a0\u4e00\u4e2a\u4f18\u5316\uff1a\u6bcf\u4e2a\u7ebf\u6bb5\u90fd\u662f\u6709\u201c\u65f6\u6548\u6027\u201d\u7684\u3002\u5f53\u6240\u679a\u4e3e\u7684\u5de6\u7aef\u70b9\u5927\u4e8e\u6709\u5e8f\u96c6\u5408\u5185\u67d0\u4e00\u4e2a\u7ebf\u6bb5\u7684\u53f3\u7aef\u70b9\uff0c\u8bf4\u660e\u8be5\u7ebf\u6bb5\u201c\u8fc7\u671f\u4e86\u201d\uff0c\u4e0d\u4f1a\u518d\u5f71\u54cd\u5230\u4e4b\u540e\u7684\u7ed3\u679c\u3002\u8fd9\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5220\u9664\u6b64\u7ebf\u6bb5\u3002\n\n## AC Code:\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 200005;\nstruct Node{\n  int r, id;\n}a[N];\nint n, k, h[N], tot;\nset<Node> s;\nvector<Node> v[N];\n\nbool operator < (Node x, Node y){\n  if(x.r == y.r) return x.id < y.id;\n  return x.r < y.r;\n}\n\nint main(){\n  cin >> n >> k;\n  for(int i = 1;i <= n;i++){\n    int a1, b1;\n    Node c;\n    cin >> a1 >> b1;\n    c.id = i;\n    c.r = b1;\n    v[a1].push_back(c);\n  }\n  for(int i = 1;i < N;i++){\n    while(s.size() && (*s.begin()).r < i){//\u201c\u8fc7\u671f\u4e86\u201d\u76f4\u63a5\u5220\u9664\n      s.erase(*s.begin());\n    }\n    for(int j = 0;j < v[i].size();j++){\n      s.insert(v[i][j]);\n    }\n    while(s.size() > k){//\u8be5\u70b9\u88ab\u8d85\u8fc7 k \u4e2a\u7ebf\u6bb5\u6240\u8986\u76d6\n      a[++tot] = *s.rbegin();\n      s.erase(*s.rbegin());//\u5c06\u53f3\u7aef\u70b9\u6700\u9760\u53f3\u7684\u7ebf\u6bb5\u5220\u9664\n    }\n  }\n  cout << tot << '\\n';\n  for(int i = 1;i <= tot;i++){\n    cout << a[i].id << ' ';\n  }\n  return 0;//\u5b8c\u7ed3\u6492\u82b1\n}\n```\n~~\u5b89\u5229\u4e0b\u81ea\u5df1\u7684[\u535a\u5ba2](https://yzy001633.blog.luogu.org/)\uff0c\u9003\uff01~~\n\n## end",
        "postTime": 1657953045,
        "uid": 519573,
        "name": "Daniel_yao",
        "ccfLevel": 0,
        "title": "CF1249D2 Too Many Segments (hard version) \u9898\u89e3"
    },
    {
        "content": "~~\u6211\u4e0d\u4f1a\u7528 set~~\n\n- \u9898\u610f\n\n\u4e0d\u591a\u8d58\u8ff0\uff0c\u54b1\u76f4\u63a5\u4e0a\u6b63\u9898\u3002\n\n- \u5206\u6790\n\n\u4e0d\u96be\u53d1\u73b0\u8fd9\u662f\u9053\u8d2a\u5fc3\uff0c\u6211\u600e\u4e48\u77e5\u9053\u7684\uff1f\u76f4\u63a5\u770b CF \u4e0a\u7684 tag \u5373\u53ef\u3002\n\n\u600e\u4e48\u8d2a\u5fc3\uff1f\u8003\u8651\u4e00\u4e0b\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u574f\u70b9\uff0c\u663e\u7136\u8981\u5220\u9664\u7684\u7ebf\u6bb5\u7684\u6570\u91cf\u662f\u4e0d\u53ef\u80fd\u53d8\u7684\uff0c\u90a3\u4e48\u7684\u8bdd\u662f\u4e0d\u662f\u5220\u9664\u8d8a\u957f\u7684\u8d8a\u597d\uff1f\u663e\u7136\u8ddf\u957f\u7684\u7ebf\u6bb5\u81ea\u7136\u80fd\u8986\u76d6\u5230\u66f4\u591a\u7684\u70b9\u3002\n\n\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\uff0c\u5148\u7528 vector \u7ef4\u62a4\u8981\u63d2\u5165\u7684\u70b9\uff0c\u518d\u5c06 set \u4e2d\u53f3\u7aef\u70b9\u5728\u5f53\u524d\u70b9\u4e4b\u524d\u7684\u7ed9\u5e72\u6389\uff0c\u8fd9\u4e9b\u8981\u5220\u7684\u70b9\u663e\u7136\u5728 set \u7684\u6700\u524d\u9762\uff0c\u6700\u540e\u5728 set \u7684\u5143\u7d20\u6570\u91cf\u5927\u4e8e $k$ \u65f6\uff0c\u4e0d\u65ad\u53bb\u6389\u672b\u5c3e\u5143\u7d20\u5373\u53ef\u3002\n\n\u5206\u6790\u4e00\u4e0b\u590d\u6742\u5ea6\uff0c\u7ef4\u62a4\u4e00\u4e2a\u4ee5\u53f3\u7aef\u70b9\u4e3a\u5173\u952e\u503c\u7684 set \u662f $O(\\log n)$ \u7684\uff0c\u679a\u4e3e\u6bcf\u4e00\u4e2a\u70b9\u662f $O(m)$\uff0c$m$ \u4e3a\u7ebf\u6bb5\u8986\u76d6\u5230\u7684\u533a\u95f4\u957f\u5ea6\uff0c\u540c\u9636\u4e0e $n$\u3002\u6240\u4ee5\u603b\u590d\u6742\u5ea6\u5dee\u4e0d\u591a\u662f $O(n\\log n)$\uff0c\u90a3\u4e0d\u76f4\u63a5\u51b2\u8fc7\u53bb\uff01\n\n- \u5c0f\u6e05\u65b0 code\n\n```cpp\n#include <bits/stdc++.h>\n#define mp make_pair\nusing namespace std;\n\nnamespace IO{\n\tchar ibuf[(1 << 20) + 1], *iS, *iT;\n\t#if ONLINE_JUDGE\n\t#define gh() (iS == iT ? iT = (iS = ibuf) + fread(ibuf, 1, (1 << 20) + 1, stdin), (iS == iT ? EOF : *iS++) : *iS++)\n \t#else\n\t#define gh() getchar()\n\t#endif\n\t#define reg register\n\tinline long long read () {\n\t\treg char ch = gh();\n\t\treg long long x = 0;\n\t\treg char t = 0;\n\t\twhile (ch < '0' || ch > '9')   t |= ch == '-', ch = gh();\n\t\twhile (ch >= '0' && ch <= '9') x = (x << 1) + (x << 3) + (ch ^ 48), ch = gh();\n\t\treturn t ? -x : x;\n\t}\n\tinline void write(long long x) {\n\t\tif (x < 0) {\n\t\t\tx = ~(x - 1);\n\t\t\tputchar('-');\n\t\t}\n\t\tif (x > 9)\n\t\t\twrite(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n}\n\nusing IO::read;\nusing IO::write;\n\nconst int maxn = 2e5 + 500;\n\nstruct node {\n\tint l, r;\n} a[maxn];\n\nint n, k, m, ans[maxn];\nset < pair<int, int> > st;\nvector <int> ev[maxn];\n\nint main () {\n\tn = read(), k = read();\n\tfor (int i = 1; i <= n; i++) a[i] = {read(), read()};\n\tfor (int i = 1; i <= n; i++) ev[a[i].l].push_back(i);\n\tfor (int i = 1; i < maxn; i++) {\n\t\tfor (auto u : ev[i]) st.insert(mp(a[u].r, u));\n\t\twhile (!st.empty() && (*st.begin()).first < i) st.erase(st.begin());\n\t\twhile (st.size() > k) {\n\t\t\tans[++m] = (*prev(st.end())).second;\n\t\t\tst.erase(prev(st.end()));\n\t\t}\n\t}\n\twrite(m), putchar('\\n');\n\tfor (int i = 1; i <= m; i++) write(ans[i]), putchar(' ');\n}\n```",
        "postTime": 1663248373,
        "uid": 317495,
        "name": "JWRuixi",
        "ccfLevel": 7,
        "title": "Solution CF12492"
    }
]
[
    {
        "content": "\u603b\u7684\u6765\u8bf4\uff0c\u4f60\u9700\u8981\u5bf9\u4e00\u4e2a\u5b57\u7b26\u4e32\u5b8c\u6210\u4ee5\u4e0b\u4e24\u79cd\u64cd\u4f5c\uff1a\n\n1. \u5355\u70b9\u4fee\u6539\n2. \u533a\u95f4\u67e5\u8be2\n\n\u800c\u7528\u6811\u72b6\u6570\u7ec4\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e24\u79cd\u64cd\u4f5c\u3002\n\n\u56e0\u4e3a\u82f1\u8bed\u5c0f\u5199\u5b57\u6bcd\u53ea\u670926\u4e2a\uff0c\u6240\u4ee5\u53ef\u4ee5\u5f0026\u4e2a\u6570\u7ec4\uff0c\u5206\u522b\u4e3a\u6bcf\u4e00\u4e2a\u5b57\u7b26\u4e2a\u6570\u7684\u6811\u72b6\u6570\u7ec4\u3002\n\n\u5355\u70b9\u4fee\u6539\uff1a\n\n- \u628a\u539f\u5148\u5b57\u7b26\u6570\u91cf\u51cf1\uff1b\n- \u628a\u6307\u5b9a\u5b57\u7b26\u6570\u91cf\u52a01\uff1b\n- \u4fee\u6539\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\u3002\n\n\u533a\u95f4\u67e5\u8be2\uff1a\n\n- \u4f9d\u6b21\u6c42\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u7684\u533a\u95f4\u548c\uff08$sum(r)-sum(l-1)$\uff09\uff0c\u5982\u679c\u4e0d\u4e3a\u96f6\uff0c$ans$\u52a0\u4e00\uff1b\n- \u6700\u540e\u7684$ans$\u5373\u4e3a\u7b54\u6848\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\Theta(kq\\text{log}_2n)$\uff0c$k$\u4e3a\u5e38\u6570\uff08\u5b57\u6bcd\u6570\u91cf\uff0c26\uff09\n\n### Code\n\n**Time** 202ms\n\n**Memory** 10280KB\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cstring>\n#define debug printf(\"\\n-------------\\n\")\n#define fackit {printf(\"-1\\n\");return;}\nusing namespace std;\ntypedef long long ll;\nchar s[100010];\nint len,q,tree[26][100010];\n//\u6811\u72b6\u6570\u7ec4\u6a21\u677f\nint lowbit(int x){return x&(-x);}\nvoid add(int ch,int x,int k)//\u8fd9\u91cc\u7684ch\u4ee3\u8868\u5b57\u6bcd\uff080~25\uff09\uff0c\u4e0b\u540c\n{\n\twhile(x<=len)\n\t{\n\t\ttree[ch][x]+=k;\n\t\tx+=lowbit(x);\n\t}\n}\nint sum(int ch,int x)\n{\n\tint tot=0;\n\twhile(x>0)\n\t{\n\t\ttot+=tree[ch][x];\n\t\tx-=lowbit(x);\n\t}\n\treturn tot;\n}\nint main()\n{\n\tscanf(\"%s\",s+1);\n\tlen=strlen(s+1);\n\tfor(int i=1;i<=len;i++)\n\t\tadd(s[i]-'a',i,1);//\u628a\u5b57\u7b26\u4e32\u4e2d\u6bcf\u4e00\u4e2a\u5b57\u7b26\u8fdb\u884c\u5355\u70b9\u4fee\u6539\n\tscanf(\"%d\",&q);\n\twhile(q--)\n\t{\n\t\tint opt,x,y,ans=0;\n\t\tchar z;\n\t\tscanf(\"%d\",&opt);\n\t\tswitch(opt)\n\t\t{\n\t\t\tcase 1:\n\t\t\t\tscanf(\"%d\",&x);\n\t\t\t\tscanf(\" %c\",&z);\n\t\t\t\tadd(s[x]-'a',x,-1);//\u539f\u5b57\u7b26\u51cf1\n\t\t\t\tadd(z-'a',x,1);//\u65b0\u5b57\u7b26\u52a01\n\t\t\t\ts[x]=z;//\u4fee\u6539\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\uff0c\u7528\u6307\u5b9a\u5b57\u7b26\u66ff\u6362\u539f\u5b57\u7b26\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tscanf(\"%d %d\",&x,&y);\n\t\t\t\tfor(int i=0;i<=25;i++)//\u904d\u5386\u6bcf\u4e00\u4e2a\u5b57\u6bcd\n\t\t\t\t\tans+=(sum(i,y)-sum(i,x-1)>0?1:0);//\u5982\u679c\u4e0d\u4e3a\u96f6\uff0cans\u52a0\u4e00\n\t\t\t\tprintf(\"%d\\n\",ans);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n\u5176\u5b9e\u8fd9\u9053\u9898\u4e5f\u53ef\u4ee5\u7528\u7ebf\u6bb5\u6811\uff0c\u4f46\u662f\u6709\u4ee5\u4e0b\u9690\u60a3\uff1a\n\n- \u5361\u5e38\uff08\u65f6\u95f4+\u7a7a\u95f4\uff09\n- ~~\u96be\u5199~~\n\n\u9664\u6b64\u4e4b\u5916\uff0c\u672c\u9898\u7684pretest\u8fc7\u6c34\uff0c\u5bfc\u81f4$\\Theta(nq)$\u7684\u66b4\u529b\u4e5f\u80fdAC\u3002\u8fd9\u6837\u4f1a\u6709\u5f88\u591a\u4eba\u88abhack/FST\u3002~~\u4e3a\u5728\u6bd4\u8d5b\u4e2d\u6240\u6709\u6253\u66b4\u529bAC\u7684\u4eba\u9ed8\u54c0~~\n\n\u8fd8\u6709\u5176\u4ed6\u5f88\u591a\u505a\u6cd5\uff0c\u53ea\u8981\u4fdd\u8bc1\u65f6\u95f4\u590d\u6742\u5ea6\u6b63\u786e\u5c31\u53ef\u4ee5\u3002",
        "postTime": 1569997004,
        "uid": 50130,
        "name": "woshishei",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u67d0DIV3\u539f\u9898\n\n\u770b\u5230\u8fd9\u9898\u6709\u4e0d\u5c11\u7684\u5de8\u4f6c\u7528\u6811\u72b6\u6570\u7ec4\u6216\u7ebf\u6bb5\u6811\u505a\uff0c\u5948\u4f55\u672c\u849f\u84bb\u5728\u8001\u5e08\u5c06\u8fd9\u5757\u5185\u5bb9\u65f6\u6ca1\u6709\u597d\u597d\u5730\u542c\u8bfe\uff08\u8fd9\u5c31\u662f\u6211\u849f\u7684\u539f\u56e0\u5427\uff09\uff0c\u6240\u4ee5\u53ea\u80fd\u591f\u60f3\u522b\u7684\u65b9\u6cd5\u3002\n\n\u9996\u5148\u770b\u9898\uff0c\u4e00\u4e32\u957f\u5ea6\u4e3a100000\u7684\u5c0f\u5199\u5b57\u7b26\u4e32\uff0c\u6709q\u6b21\u8be2\u95ee\uff0c\u6bcf\u6b21\u6709\u4e24\u79cd\u60c5\u51b5\n\n1.  1  pos  c     \u5c06\u5b57\u7b26\u4e32pos\u4f4d\u7684\u5b57\u7b26\u6539\u4e3ac\n\n2.  2  l  r     \u641c\u7d22l\u5230r\u4e2d\u6709\u591a\u5c11\u4e0d\u540c\u5b57\u6bcd\n\n\u5f53\u65f6\u672c\u849f\u84bb\u5728\u505a\u7684\u65f6\u5019\uff0c\u6700\u5148\u60f3\u5230\u7684\u5c31\u662f\u66b4\u529b\uff08\u6bd5\u7adfn^2\u4ec0\u4e48\u90fd\u80fd\u7ef4\u62a4\uff09\uff0c\u53ef\u662f\u5c31\u7b97\u4e24\u79d2\u65f6\u9650\uff0c\u4e5f\u662f\u4f1a\u8d85\u65f6\u7684\uff0c\u4e8e\u662f\u5c31\u662f\u4f18\u5316\uff0c\u53d8\u4e00\u4e0b\u60f3\u5230\u4e86\u66b4\u529b\u7684\u4f18\u5316\uff1a\u5206\u5757\n\n\u60f3\u597d\u4e86\u5927\u81f4\u7684\u65b9\u5411\uff0c\u90a3\u63a5\u4e0b\u6765\u8be5\u5982\u4f55\u505a\u5462\uff1f\n\n\u6211\u4eec\u7528l[i]\u8868\u793a\u533a\u95f4i\u7684\u8d77\u70b9\uff0cr[i]\u8868\u793a\u7ec8\u70b9\uff0cbelong[i]\u8868\u793a\u7b2ci\u4e2a\u5b57\u7b26\u5c5e\u4e8e\u54ea\u4e00\u4e2a\u533a\u95f4\uff0cnum[i][j]\u8868\u793a\u5728\u7b2ci\u4e2a\u533a\u95f4\u4e2d\uff0c\u6709\u591a\u5c11\u4e2aj\u5b57\u6bcd\uff08\u6211\u5728\u6bd4\u8d5b\u4e2d\u7528\u7684\u662fint\uff0c\u4f60\u4eec\u4e5f\u53ef\u4ee5\u6539\u6210bool\uff0c\u4f46\u662f\u5728\u4fee\u6539\u65f6\u53ef\u80fd\u4f1a\u96be\u4e00\u4e9b\uff09\uff0chave[i]\u8868\u793a\u5728\u8fd9\u6b21\u7684\u67e5\u8be2\u4e2d\uff0ci\u8fd9\u4e2a\u5b57\u7b26\u6709\u6ca1\u6709\u51fa\u73b0\n\n\u81f3\u4e8e\u4fee\u6539\uff0c\u5c31\u662f\u5c06pos\u6240\u5c5e\u7684\u533a\u95f4\u4e2d\u539f\u5148\u5b57\u7b26\u7684\u4e2a\u6570\u51cf\u4e00\uff0c\u65b0\u6539\u6210\u7684\u5b57\u7b26\u4e2a\u6570\u52a0\u4e00\uff0c\u7136\u540e\u76f4\u63a5\u5728\u539f\u6570\u7ec4\u4e0a\u6539\u53d8\u5373\u53ef\n\n\u90a3\u4e48\u4ee3\u7801\u5c31\u597d\u5199\u4e86\n\n```cpp\n#include<cmath>\n#include<stdio.h>\n#include<cstring>\n#include<algorithm>\n#define re register\nusing namespace std;\nconst int MAXN=100005,MAXM=350,MAXCH=30;\nchar ch[MAXN];\nint n,q,sum,block,l[MAXM],r[MAXM],belong[MAXN],num[MAXM][MAXCH];\nbool have[MAXCH];\ntemplate <typename T> void in(register T& a){\n    register T x=0,f=1;\n\tregister char c=getchar();\n    while(!isdigit(c)){\n\t    c=='-'?f=-1:f=1;\n\t\tc=getchar();\n\t}\n    while(isdigit(c)){\n        x=(x<<1)+(x<<3)+c-'0';\n\t    c = getchar();\n\t}\n    a=x*f;\n}\ninline void init(){\n\tscanf(\"%s\",ch+1);\n\tn=strlen(ch+1);\n\tsum=sqrt(n);//\u786e\u8ba4\u6bcf\u4e2a\u533a\u95f4\u7684\u957f\u5ea6\n\tblock=n/sum;//\u786e\u8ba4\u6709\u591a\u5c11\u4e2a\u533a\u95f4\n\tif(n%sum!=0) block++;\n\tfor(re int i=1;i<=n;i++){\n\t\tbelong[i]=(i-1)/sum+1;\n\t\tnum[belong[i]][ch[i]-'a'+1]++;\n\t}//\u8ba1\u7b97i\u5c5e\u4e8e\u54ea\u4e2a\u533a\u95f4\uff0c\u5e76\u9884\u5904\u7406num\u6570\u7ec4\n\tfor(re int i=1;i<=block;i++){\n\t\tl[i]=r[i-1]+1;\n\t\tr[i]=l[i]+sum-1;\n\t}\n\tr[block]=n;//\u5904\u7406\u8d77\u70b9\u548c\u7ec8\u70b9\n}\ninline void Query(int a,int b){\n\tint ans=0;\n\tmemset(have,0,sizeof have);//\u5c06have\u7f6e\u96f6\n\tfor(re int i=a;i<=min(b,r[belong[a]]);i++){//\u641c\u7d22\u4e0d\u662f\u6574\u533a\u95f4\u7684\u90e8\u5206\n\t\tif(have[ch[i]-'a'+1]==0){\n\t\t\tans++;\n\t\t\thave[ch[i]-'a'+1]=1;\n\t\t}\n\t\tif(ans==26){\n\t\t\tprintf(\"26\\n\");\n\t\t\treturn ;//\u5c0f\u4f18\u5316\uff0c\u5c0f\u5199\u5b57\u6bcd\u90fd\u6709\u4e86\u5c31\u53ef\u4ee5\u4e0d\u505a\u4e86\n\t\t}\t\n\t}\n\tif(belong[a]!=belong[b])//\u5de6\u53f3\u4e0d\u662f\u4e00\u4e2a\u533a\u95f4\uff0c\u628a\u53f3\u8fb9\u7684\u975e\u6b63\u533a\u95f4\u626b\u4e00\u904d\n\t\tfor(re int i=l[belong[b]];i<=b;i++){\n\t\t\tif(have[ch[i]-'a'+1]==0){\n\t\t\t\tans++;\n\t\t\t\thave[ch[i]-'a'+1]=1;\n\t\t\t}\n\t\t\tif(ans==26){\n\t\t\t\tprintf(\"26\\n\");\n\t\t\t\treturn ;\n\t\t\t}\n\t\t}\n\tfor(re int i=belong[a]+1;i<belong[b];i++){\n\t\tfor(re int j=1;j<=26;j++){//\u641c\u7d22\u6bcf\u4e2a\u6574\u533a\u95f4\u7684\u5b57\u6bcd\n\t\t\tif(ans==26){\n\t\t\t\tprintf(\"26\\n\");\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tif(num[i][j]==0) continue;\n\t\t\tif(have[j]) continue;\n\t\t\tans++;\n\t\t\thave[j]=1;\n\t\t}\n\t\tif(ans==26){\n\t\t\tprintf(\"26\\n\");\n\t\t\treturn ;\n\t\t}\n\t}\n\tprintf(\"%d\\n\",ans);\n}\ninline void Do(){\n\tin(q);\n\tfor(re int i=1;i<=q;i++){\n\t\tint opt;\n\t\tin(opt);\n\t\tif(opt==1){//\u4fee\u6539\n\t\t\tint pos;\n\t\t\tchar c;\n\t\t\tin(pos);\n\t\t\tscanf(\"%c\",&c);\n\t\t\tnum[belong[pos]][ch[pos]-'a'+1]--;\n\t\t\tnum[belong[pos]][c-'a'+1]++;\n\t\t\tch[pos]=c;\n        }\n\t\telse{\n\t\t\tint l,r;\n\t\t\tin(l);in(r);\n\t\t\tQuery(l,r);//\u67e5\u627e\n\t\t}\n\t}\n}\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tinit();\n\tDo();\n\treturn 0;\n}\n```\n\u672c\u4eba\u7684\u7801\u98ce\u548c\u8bed\u6587\u6c34\u5e73\u53ef\u80fd\u4e0d\u600e\u4e48\u597d\uff0c\u8bf7\u591a\u5305\u6db5",
        "postTime": 1570113641,
        "uid": 116239,
        "name": "\u65f6\u95f4\u91cd\u6d17",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u7ed9\u4e00\u4e2a\u5b57\u7b26\u4e32s\uff0c\u8d44\u74f7\u4e24\u79cd\u64cd\u4f5c\n\n\u64cd\u4f5c1\uff1a\u5c06\u67d0\u4e00\u4f4d\u7684\u5b57\u7b26\u6539\u6210\u7ed9\u5b9a\u7684\u4e00\u4e2a\u5b57\u7b26\n\n\u64cd\u4f5c2\uff1a\u8be2\u95ee\u4e00\u6bb5\u533a\u95f4\u5185\u4e0d\u540c\u5b57\u7b26\u7684\u4e2a\u6570\n\n\u4f7f\u7528\u7ebf\u6bb5\u6811\u6c42\u89e3\uff0c$tree[i][k]$\u8868\u793a$k$\u4ee3\u8868\u7684\u8fd9\u4e00\u6bb5\u533a\u95f4\u5185\uff0c\u662f\u5426\u6709ASCII\u7801\u4e3a$i+48$\u7684\u5b57\u7b26\uff0c\u5efa\u6811\u3001\u4fee\u6539\u3001\u8be2\u95ee\u6309\u6b63\u5e38\u7684\u7ebf\u6bb5\u6811\u5199\u5c31\u53ef\u4ee5\u4e86\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstring s;\nchar cc[2];\nint tree[26][400005];\nint t[26],len,q,opt;\nvoid pushup(int k)\n{\n\tfor(int i=0;i<26;++i)\n\t{\n\t\ttree[i][k]=tree[i][k<<1]|tree[i][k<<1|1];//\u53ea\u8981\u4e24\u4e2a\u5b50\u533a\u95f4\u4e2d\u6709\u8fd9\u4e2a\u5b57\u7b26\uff0c\u5f53\u524d\u533a\u95f4\u5185\u5c31\u6709\u8fd9\u4e2a\u5b57\u7b26\n\t}\n}\nvoid build(int l,int r,int k)\n{\n\tif(l==r)\n\t{\n\t\ttree[s[l-1]-'a'][k]=1;\n\t\treturn;\n\t}\n\tint m=(l+r)>>1;\n\tbuild(l,m,k<<1);\n\tbuild(m+1,r,k<<1|1);\n\tpushup(k);\n}\nvoid modify(int l,int r,int k,int pos,int v)\n{\n\tif(l==r)\n\t{\n\t\tfor(int i=0;i<26;++i)\n\t\t{\n\t\t\ttree[i][k]=0;\n\t\t}\n\t\ttree[v][k]=1;\n\t\treturn;\n\t}\n\tint m=(l+r)>>1;\n\tif(pos<=m)modify(l,m,k<<1,pos,v);\n\telse modify(m+1,r,k<<1|1,pos,v);\n\tpushup(k);\n}\nvoid query(int L,int R,int l,int r,int k)\n{\n\tif(L<=l&&r<=R)\n\t{\n\t\tfor(int i=0;i<26;++i)t[i]|=tree[i][k];//\u7528t[i]\u50a8\u5b58\u5f53\u524d\u533a\u95f4\u6709\u54ea\u4e9b\u5b57\u7b26\n\t\treturn;\n\t}\n\tint m=(l+r)>>1;\n\tif(L<=m)query(L,R,l,m,k<<1);\n\tif(R>m)query(L,R,m+1,r,k<<1|1);\n}\nint main()\n{\n\tcin>>s;\n\tlen=s.length();\n\tbuild(1,len,1);\n\tscanf(\"%d\",&q);\n\tfor(int i=1;i<=q;++i)\n\t{\n\t\tscanf(\"%d\",&opt);\n\t\tif(opt==1)\n\t\t{\n\t\t\tint pos;\n\t\t\tscanf(\"%d\",&pos);\n\t\t\tscanf(\"%s\",cc);\n\t\t\tmodify(1,len,1,pos,cc[0]-'a');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tint l,r,tmp=0;\n\t\t\tscanf(\"%d%d\",&l,&r);\n\t\t\tquery(l,r,1,len,1);\n\t\t\tfor(int i=0;i<26;++i)\n\t\t\t{\n\t\t\t\tif(t[i])\n\t\t\t\t{\n\t\t\t\t\t++tmp;\n\t\t\t\t\tt[i]=0;//\u7edf\u8ba1\u7b54\u6848\u65f6\u987a\u5e26\u5c06t\u6570\u7ec4\u6e05\u7a7a\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf(\"%d\\n\",tmp);\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1569976357,
        "uid": 34217,
        "name": "Katsura_Hinagiku",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u5df2\u6709\u7684\u7ebf\u6bb5\u6811/\u6811\u72b6\u6570\u7ec4\u505a\u6cd5\u90fd\u662f\u5f0026\u4e2a\u7684\uff0c\u6216\u8005\u662f\u4e00\u4e2a\u6811\u91cc\u9762\u6bcf\u4e2a\u70b926\u4e2a\u6876\u7684\uff0c\u63d0\u4f9b\u4e00\u4e2a\u4e0d\u5e2626\u7684\u505a\u6cd5\n\n\u8003\u8651\u4e8c\u8fdb\u5236\u538b\u7f29\uff0c\u628a0(a)~25(z)\u53d8\u62101<<0\u52301<<25\uff0c\u7d2f\u8ba1\u533a\u95f4or\u548c\n\n\u4fee\u6539\u5c31\u76f4\u63a5\u5355\u70b9\u4fee\u6539\n\n\u67e5\u8be2\u5c31\u76f4\u63a5\u6c42\u533a\u95f4or\u548c\uff0c\u7136\u540e\u770b\u8fd9\u4e2aor\u548c\u91cc\u6709\u51e0\u4e2a1\n\n```cpp\n#include<cstdio>\n#include<cstring>\nconst int N=1e5+10;\ninline const int lowbit(int x)\n{\n\treturn x&-x;\n}\nint n,m;\nchar s[N];\nclass Segment_Tree\n{\n\tprivate:\n\t\tstruct tree\n\t\t{\n\t\t\tint orsum;\n\t\t\ttree *lson,*rson;\n\t\t\tinline const void pushup()\n\t\t\t{\n\t\t\t\torsum=lson->orsum|rson->orsum;\n\t\t\t}\n\t\t\tinline const void update(int l,int r,int pos,char c)\n\t\t\t{\n\t\t\t\tif (l==r)return orsum=1<<c-'a',void();\n\t\t\t\tint mid=l+r>>1;\n\t\t\t\tif (pos<=mid)lson->update(l,mid,pos,c);\n\t\t\t\telse rson->update(mid+1,r,pos,c);\n\t\t\t\tpushup();\n\t\t\t}\n\t\t\tinline const int query(int l,int r,int L,int R)\n\t\t\t{\n\t\t\t\tif (l>R||r<L)return 0;\n\t\t\t\tif (l>=L&&r<=R)return orsum;\n\t\t\t\tint mid=l+r>>1;\n\t\t\t\treturn lson->query(l,mid,L,R)|rson->query(mid+1,r,L,R);\n\t\t\t}\n\t\t}*root,memory_pool[N<<1],*tail;\n\t\tinline const void build(tree *&p,int l,int r)\n\t\t{\n\t\t\tp=tail++;\n\t\t\tif (l==r)return p->orsum=1<<s[l]-'a',void();\n\t\t\tint mid=l+r>>1;\n\t\t\tbuild(p->lson,l,mid);\n\t\t\tbuild(p->rson,mid+1,r);\n\t\t\tp->pushup();\n\t\t}\n\tpublic:\n\t\tinline const void build()\n\t\t{\n\t\t\ttail=memory_pool;build(root,1,n);\n\t\t}\n\t\tinline const void update(int x,char c)\n\t\t{\n\t\t\troot->update(1,n,x,c);\n\t\t}\n\t\tinline const int query(int l,int r)\n\t\t{\n\t\t\tint sum=root->query(1,n,l,r),cnt=0;\n\t\t\tfor (;sum;sum^=lowbit(sum))cnt++;\n\t\t\treturn cnt;\n\t\t}\n}sgt;\nint main()\n{\n\tscanf(\"%s\",s+1);\n\tn=strlen(s+1);\n\tsgt.build();\n\tscanf(\"%d\",&m);\n\twhile (m--)\n\t{\n\t\tint opt;\n\t\tscanf(\"%d\",&opt);\n\t\tif (opt&1){int x;char c;scanf(\"%d %c\",&x,&c);sgt.update(x,c);}\n\t\telse {int l,r;scanf(\"%d%d\",&l,&r);printf(\"%d\\n\",sgt.query(l,r));}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1572568079,
        "uid": 14374,
        "name": "zhengrunzhe",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a\u65b0\u601d\u8def\uff1a\n\u8003\u8651\u5230\u5c0f\u5199\u5b57\u6bcd\u53ea\u670926\u4e2a\uff0c\n\u5bf9\u4e8e\u6bcf\u4e2a\u5b57\u6bcd\u5f00\u4e00\u4e2amultiset\uff0c\u7ef4\u62a4\u5176\u51fa\u73b0\u7684**\u4f4d\u7f6e**\n\n------------\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u4fee\u6539\uff0c\u5728\u539f\u5b57\u4e32\u4e2d\u4fee\u6539\u7684\u540c\u65f6\uff0c\u5728multiset\u91cc\u76f8\u5e94\u4fee\u6539\uff1b\n\u5bf9\u4e8e\u6bcf\u4e2a\u67e5\u8be2\uff0c\u5bf9\u6240\u6709\u5b57\u6bcd\uff0c\u5728multiset\u91cc\u4e8c\u5206\u627e\u662f\u5426\u6709[l,r]\u5176\u4e2d\u7684\u4e00\u4e2a\u4f4d\u7f6e\uff0c\n\u5982\u679c\u5b58\u5728\u7b54\u6848\u5c31\u52a0\u4e00\uff0c\u6700\u540e\u6c42\u548c\u56de\u7b54\u3002\u663e\u800c\u6613\u89c1\u4e00\u6b21\u67e5\u8be2\u662fO(26*logn)\u7684\u3002\n\n\n------------\n\u4f18\u70b9\u662f\u4ee3\u7801\u76f4\u89c2\u8f83\u77ed\uff0c\u6211\u77e5\u9053\u8fd8\u80fd\u7528\u5f88\u591alog\u6570\u636e\u7ed3\u6784\u6bd4\u5982\u7ebf\u6bb5\u6811\u5e73\u8861\u6811\uff0c\u4f60\u5f00\u5fc3\u5c31\u597d\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1000005;\nstring s;\nint q,x,l,r,pos;char c;\nset<int>M[200];\nint main(){\n\tios::sync_with_stdio(0);\n\tcin>>s;\n\tcin>>q;\n\tfor(int i=0;i<s.size();++i){\n\t\tM[s[i]].insert(i+1);\n\t}\n\twhile(q--){\n\t\tcin>>x;\n\t\tif(x==1){\n\t\t\tcin>>pos>>c;\n\t\t\tM[s[pos-1]].erase(pos);\n\t\t\ts[pos-1]=c;\n\t\t\tM[c].insert(pos);\n\t\t}else{\n\t\t\tcin>>l>>r;\n\t\t\tint sum=0;\n\t\t\tfor(int i='a';i<='z';++i){\n\t\t\t\tif(M[i].lower_bound(l)==M[i].end())continue;\n\t\t\t\tint p=*(M[i].lower_bound(l));\n\t\t\t\tif(p<=r)sum++;\n\t\t\t}\n\t\t\tcout<<sum<<endl;\n\t\t}\n\t}\n\treturn 0;\n\t}\n\n```\n",
        "postTime": 1570352068,
        "uid": 112316,
        "name": "Linne",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "## Solution to CF1234D\n\n### \u3010\u9898\u76ee\u5927\u610f\u3011\n\u6709\u4e00\u4e2a\u5e8f\u5217\uff0c\u4e24\u79cd\u64cd\u4f5c\uff1a\n\n1. \u628a$x$\u4f4d\u7f6e\u4e0a\u7684\u5143\u7d20\u6539\u4e3a$v$\n2. \u627e\u51fa$l$\u5230$r$\u4e4b\u95f4\u4e0d\u540c\u5143\u7d20\u7684\u4e2a\u6570\n\n### \u3010\u5927\u4f53\u601d\u8def\u3011\n\u56e0\u4e3a\u5143\u7d20\u662f26\u4e2a\uff08\u5c0f\u5199\u5b57\u6bcd\uff09\uff0c\u53c8\u8981\u533a\u95f4\u6c42\u548c\uff0c\u5f88\u5feb\u5c31\u60f3\u5230\u7528[\u6811\u72b6\u6570\u7ec4](https://www.luogu.org/problem/P3374)\uff08\u4e0d\u4f1a\u6811\u72b6\u6570\u7ec4\u7684\u5148\u70b9\u4e00\u4e0b\u94fe\u63a5\uff09\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u5f0026\u4e2a\u6811\u72b6\u6570\u7ec4\uff0c\u5206\u522b\u8bb0\u5f55\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u7684\u533a\u95f4\u4e2a\u6570\u3002\n\n\u4fee\u6539\u65f6\uff0c\u9700\u8981\u505a\u4f9d\u6b21\u4ee5\u4e0b\u4e09\u4ef6\u4e8b\uff1a\n\n1. \u628a\u4fee\u6539\u5b57\u6bcd\u7684\u533a\u95f4\u4e2a\u6570$+1$\n1. \u628a\u88ab\u4fee\u6539\u5b57\u6bcd\u7684\u533a\u95f4\u4e2a\u6570$-1$\n3. \u628a\u88ab\u4fee\u6539\u5b57\u6bcd\u66ff\u6362\u4e3a\u4fee\u6539\u5b57\u6bcd\n\n\u67e5\u8be2\u65f6\uff0c\u6c42\u51fa\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u5728\u8fd9\u6bb5\u533a\u95f4\u4e0a\u7684\u4e2a\u6570\u3002\u5982\u679c\u5927\u4e8e$0$\uff0c\u5219$ans+1$\u3002\n\n\u4e0b\u9762\u662fAC\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define lowbit(x) x&-x\n\nint n,q,oper;\nint c[30][100005]; // \u6811\u72b6\u6570\u7ec4 \nchar s[100005];\n\nvoid fix(int ch,int x,int val)\n{\n\twhile(x<=n)\n\t{\n\t\tc[ch][x] += val;\n\t\tx += lowbit(x);\n\t}\n}\n\nint ask(int ch,int x)\n{\n\tint s=0;\n\twhile(x)\n\t{\n\t\ts += c[ch][x];\n\t\tx -= lowbit(x);\n\t}\n\treturn s;\n}\n\nint main()\n{\n\tscanf(\"%s\",s+1); // \u8bfb\u5165\u521d\u59cb\u5b57\u7b26\u4e32 \n\tn = strlen(s+1); \n\tfor(int i=1;i<=n;i++)\n\t\tfix(s[i]-96,i,1); // \u5148\u628a\u521d\u59cb\u7684\u4e32\u4e2d\u5b57\u6bcd\u7d2f\u8ba1\u533a\u95f4\u4e2a\u6570(\u521d\u59cb\u5316) \n\tcin>>q;\n\twhile(q--)\n\t{\n\t\tcin>>oper;\n\t\tif(oper==1) // \u4fee\u6539 \n\t\t{\n\t\t\tint x;\n\t\t\tchar ch;\n\t\t\tcin>>x>>ch;\n\t\t\tfix(ch-96,x,1); // \u628a\u4fee\u6539\u5b57\u6bcd\u7684\u533a\u95f4\u4e2a\u6570+1\n\t\t\tfix(s[x]-96,x,-1); // \u628a\u88ab\u4fee\u6539\u5b57\u6bcd\u7684\u533a\u95f4\u4e2a\u6570-1\n\t\t\ts[x] = ch; // \u628a\u88ab\u4fee\u6539\u5b57\u6bcd\u66ff\u6362\u4e3a\u4fee\u6539\u5b57\u6bcd\n\t\t}\n\t\telse if(oper==2) // \u67e5\u8be2 \n\t\t{\n\t\t\tint l,r,ans=0;\n\t\t\tcin>>l>>r;\n\t\t\tfor(int i=1;i<=26;i++)\n\t\t\t{\n\t\t\t\tint s=ask(i,r)-ask(i,l-1); // \u6c42\u51fa\u6bcf\u4e00\u4e2a\u5b57\u6bcd\u5728\u8fd9\u6bb5\u533a\u95f4\u4e0a\u7684\u4e2a\u6570\n\t\t\t\tif(s>0)\n\t\t\t\t\tans++; // \u5982\u679c\u5927\u4e8e0\uff0c\u5219ans++(\u4e0d\u662fans+=s)\n\t\t\t}\n\t\t\tcout<<ans<<endl;\n\t\t}\n\t}\n\t\n\treturn 0;\n}\n```\n\u795d\u5927\u5bb6AC\u6109\u5feb\uff01",
        "postTime": 1570175802,
        "uid": 123298,
        "name": "kouylty",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u6ce5\u840c\u90fd\u7ef4\u62a426\u4e2a\u7ebf\u6bb5\u6811\uff1f\uff1f\uff1f\n\n\u5176\u5b9e\u53ef\u4ee5\u5728\u7ebf\u6bb5\u6811\u6bcf\u4e2a\u8282\u70b9\u4e2d\u7ef4\u62a4\u4e00\u4e2alt\u6570\u7ec4\uff0clt[i]\u8868\u793a\u7b2ci\u4e2a\u5b57\u6bcd\u51fa\u6ca1\u51fa\u73b0\u8fc7\u3002\u67e5\u8be2\u7684\u65f6\u5019\u5c31\u6a21\u4eff\u5c0f\u767d\u901b\u516c\u56ed\u7684\u65b9\u6cd5\uff0c\u76f4\u63a5\u4e00\u8fb9\u67e5\u8be2\u4e00\u8fb9\u5728\u5efa\u4e00\u68f5\u7ebf\u6bb5\u6811\u5c31\u597d\u4e86\u3002\u8fd9\u6837\u5e38\u6811\u5e94\u8be5\u8981\u5c0f\u4e00\u4e9b\u3002\n\n\u8be6\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n\nusing namespace std;\n\nchar s[100005], c;\nint q, md, l, r, ans = 0;\n\nstruct node {\n\tint l, r;\n\tbool lt[26];\n\tnode *left = NULL;\n\tnode *right = NULL;\n\t\n\tinline void update() {\n\t\tif (this -> left == NULL) return ;\n\t\tfor (int i = 0; i < 26; ++i)\n\t\t\tthis -> lt[i] = 0;\n\t\tfor (int i = 0; i < 26; ++i)\n\t\t\tthis -> lt[i] = (this -> left -> lt[i] || this -> right -> lt[i]);\n\t}\n\t\n\tinline void build(int l, int r) {\n\t\tthis -> l = l; this -> r = r;\n\t\tmemset(this -> lt, 0, sizeof(this -> lt));\n\t\tif (l >= r) this -> lt[s[l] - 'a'] = 1;\n\t\telse {\n\t\t\tthis -> left = new node; this -> left -> build(l, l + r >> 1);\n\t\t\tthis -> right = new node; this -> right -> build((l + r >> 1) + 1, r);\n\t\t\tthis -> update();\n\t\t}\n\t}\n\t\n\tinline void modify(int t, char c) {\n\t\tif (this -> l >= this -> r) {\n\t\t\tthis -> lt[s[t] - 'a'] = 0;\n\t\t\tthis -> lt[c - 'a'] = 1;\n\t\t\treturn ;\n\t\t}\n\t\tif (t <= this -> left -> r) this -> left -> modify(t, c);\n\t\telse this -> right -> modify(t, c); this -> update();\n\t\treturn ;\n\t}\n\t\n\tinline node* query(int l, int r) {\n\t\tnode *cur = new node; cur -> l = this -> l; cur -> r = this -> r;\n\t\tfor (int i = 0; i < 26; ++i) cur -> lt[i] = this -> lt[i];\n\t\tif (l <= this -> l && r >= this -> r) return cur;\n\t\tif (r <= this -> left -> r) { delete cur; return this -> left -> query(l, r); }\n\t\tif (l >= this -> right -> l) { delete cur; return this -> right -> query(l, r); }\n\t\tcur -> left = this -> left -> query(l, r); cur -> right = this -> right -> query(l, r);\n\t\tcur -> update(); delete cur -> left; delete cur -> right; return cur;\n\t}\n};\n\nint main() {\n\tscanf(\"%s\", s + 1); scanf(\"%d\", &q);\n\tnode *root = new node; root -> build(1, strlen(s + 1));\n\twhile (q--) {\n\t\tscanf(\"%d\", &md);\n\t\tif (md == 1) {\n\t\t\tscanf(\"%d %c\", &l, &c);\n\t\t\troot -> modify(l, c);\n\t\t\ts[l] = c;\n\t\t} else if (md == 2) {\n\t\t\tscanf(\"%d %d\", &l, &r); node *rt = root -> query(l, r);\n\t\t\tfor (int i = 0; i < 26; ++i) ans += rt -> lt[i];\n\t\t\tprintf(\"%d\\n\", ans); ans = 0; delete rt;\n\t\t}\n\t}\n\treturn 0;\n} \n```\n",
        "postTime": 1570077788,
        "uid": 98096,
        "name": "Smallbasic",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u4f3c\u4e4e\u76f4\u63a5\u7ebf\u6bb5\u6811\u4f1a\u51fa\u95ee\u9898\uff1f\n\n\u4e3a\u4e86\u4fdd\u9669\u8d77\u89c1\u6211\u7528\u4e86\u52a8\u6001\u5f00\u70b9\uff0c\u4fdd\u8bc1\u4e0d\u4f1a\u6302\u3002\n\n\u5efa $26$ \u68f5\u7ebf\u6bb5\u6811\uff0c\u7136\u540e\u6b63\u5e38\u64cd\u4f5c\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\n--- \n\n\n\u8bbe\u5b57\u7b26\u4e32\u4e3a $s$\u3002\n\n\u5bf9\u4e8e\u628a\u7b2c $x$ \u4e2a\u5b57\u7b26\u4fee\u6539\u4e3a $y$ \u7684\u64cd\u4f5c\uff1a\n\n1. \u5c06\u7b2c $s[x]-'a'+1$ \u68f5\u7ebf\u6bb5\u6811\u7684\u7b2c $x$ \u4e2a\u4f4d\u7f6e\u4fee\u6539\u4e3a $0$\u3002\n2. \u5c06 $s[x]$ \u4fee\u6539\u4e3a $y$\u3002\n3. \u5c06\u7b2c $s[x]-'a'+1$ \u68f5\u7ebf\u6bb5\u6811\u7684\u7b2c $x$ \u4e2a\u4f4d\u7f6e\u4fee\u6539\u4e3a $1$\u3002\u6ce8\u610f\u6b64\u65f6 $s[x]$ \u5df2\u7ecf\u53d1\u751f\u6539\u53d8\u3002\n\n\u5bf9\u4e8e\u67e5\u8be2 $[l,r]$ \u4e2d\u4e0d\u540c\u5b57\u7b26\u6570\u91cf\u7684\u64cd\u4f5c\uff1a\n\n\u5c06 $26$ \u68f5\u7ebf\u6bb5\u6811\u5206\u522b\u62ce\u51fa\u6765\u6c42\u89e3\u3002\u5982\u679c\u7b2c $i$ \u68f5\u7ebf\u6bb5\u6811\u7684 $[l,r]$ \u533a\u95f4\u548c\u4e0d\u4e3a $0$\uff0c\u5219\u672c\u6b21\u7b54\u6848 $+1$\u3002\n\n\u53e6\u5916\u7531\u4e8e\u662f\u5355\u70b9\u4fee\u6539\u533a\u95f4\u67e5\u8be2\uff0c\u6240\u4ee5\u7ebf\u6bb5\u6811\u663e\u5f97\u6709\u70b9\u6d6a\u8d39\u3002\u7528\u6811\u72b6\u6570\u7ec4\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u4f46\u662f\u6211\u611f\u89c9\u5f88\u96be\u5199...\n\n```cpp\n# include <bits/stdc++.h>\n# define rr register\nconst int N=100010;\nstruct Node{\n\tint lc,rc,sum;\n}tree[(N<<2)*26];\nint id;\nint root[30];\nchar s[N];\nint n,q;\ninline void make(int &x){\n\tif(!x)\n\t\tx=++id;\n\treturn;\n}\nvoid change(int &k,int l,int r,int x,int v){\n\tmake(k);\n\tif(l==r&&l==x){\n\t\ttree[k].sum+=v;\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tif(x<=mid)\n\t\tchange(tree[k].lc,l,mid,x,v);\n\telse\n\t\tchange(tree[k].rc,mid+1,r,x,v);\n\ttree[k].sum=tree[tree[k].lc].sum+tree[tree[k].rc].sum;\n\treturn;\t\t\n}\nint ask(int &k,int l,int r,int L,int R){\n\tmake(k);\n\tif(L<=l&&r<=R){\n\t\treturn tree[k].sum;\n\t}\n\tint mid=(l+r)>>1,res=0;\n\tif(L<=mid)\n\t\tres+=ask(tree[k].lc,l,mid,L,R);\n\tif(mid<R)\n\t\tres+=ask(tree[k].rc,mid+1,r,L,R);\n\treturn res;\t\t\n}\nint main(void){\n\tscanf(\"%s\",s+1);\n\tn=strlen(s+1);\n\tfor(rr int i=1;i<=n;++i){\n\t\tchange(root[s[i]-'a'+1],1,n,i,1);\n\t}\n\tscanf(\"%d\",&q);\n\tint opt,x,y;\n\tchar tmp;\n\twhile(q--){\n\t\tscanf(\"%d%d\",&opt,&x);\n\t\tif(opt==1){\n\t\t\tstd::cin>>tmp;\n\t\t\tchange(root[s[x]-'a'+1],1,n,x,-1);\n\t\t\ts[x]=tmp;\n\t\t\tchange(root[s[x]-'a'+1],1,n,x,1);\n\t\t}else{\n\t\t\tscanf(\"%d\",&y);\n\t\t\tint sum=0;\n\t\t\tfor(rr int i=1;i<=26;++i){\n\t\t\t\tif(ask(root[i],1,n,x,y))\n\t\t\t\t\t++sum;\n\t\t\t}\n\t\t\tprintf(\"%d\\n\",sum);\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1570017284,
        "uid": 108949,
        "name": "Meatherm",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u8fd9\u4e0d\u662f\u6811\u72b6\u6570\u7ec4\u88f8\u9898\uff1f\n## \u601d\u8def\n\u7531\u4e8e\u90fd\u662f\u5c0f\u5199\u5b57\u6bcd\uff0c\u663e\u7136\u6211\u4eec\u53ef\u4ee5\u5f00 $\\verb!26!$ \u4e2a\u6811\u72b6\u6570\u7ec4/\u7ebf\u6bb5\u6811\u6765\u8bb0\u5f55\u6bcf\u4e00\u4e2a\u5c0f\u5199\u5b57\u6bcd\u5728\u6bcf\u4e2a\u533a\u95f4\u5185\u7684\u4e2a\u6570\u3002\u7531\u4e8e\u53ea\u9700\u8981\u652f\u6301\u5355\u70b9\u4fee\u6539/\u533a\u95f4\u67e5\u8be2\uff0c\u6211\u4eec\u9009\u62e9\u6613\u4e8e\u5b9e\u73b0\u4ee5\u53ca\u5e38\u6570\u5c0f\u7684\u6811\u72b6\u6570\u7ec4\u3002\n\n\u6bcf\u6b21\u4fee\u6539\u65f6\u6211\u4eec\u5728\u539f\u6765\u5b57\u6bcd\u5bf9\u5e94\u7684\u6811\u72b6\u6570\u7ec4\u5185 $\\verb!update!$ \u4e00\u4e2a $\\verb!-1!$\uff0c\u5728\u4fee\u6539\u5b57\u6bcd\u5bf9\u5e94\u7684\u6811\u72b6\u6570\u7ec4\u5185 $\\verb!update!$ \u4e00\u4e2a $\\verb!1!$\u3002\u81f3\u4e8e\u67e5\u8be2\u5219\u53ef\u76f4\u63a5\u66b4\u529b\u67e5\u8be2 $\\verb!26!$ \u4e2a\u6811\u72b6\u6570\u7ec4\uff0c\u9047\u5230\u5728\u8fd9\u4e2a\u533a\u95f4\u5185\u5b57\u6bcd\u6570\u603b\u548c\u4e0d\u4e3a\u96f6\u7684\u7b54\u6848\u5c31\u52a0\u4e00\u3002\u90a3\u4e48\u8fd9\u9898\u5c31\u505a\u5b8c\u4e86\u3002\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define rint register int\nint n;\nint const N=1e5+10;\nstruct Tree{\n\tint c[N];\n\tinline int lowbit(int x){return x&-x;}\n\tinline void update(int x,int plus){while (x<=n) c[x]+=plus,x+=lowbit(x);}\n    inline int query(int x){\n    \tint now=0;\n    \twhile (x) now+=c[x],x-=lowbit(x);\n\t    return now;\n\t}\n}T[26];//\u628a\u6811\u72b6\u6570\u7ec4\u5408\u4e3a\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u4e0a\u9762\u90fd\u662f\u57fa\u672c\u64cd\u4f5c\nsigned main(){\n\tios::sync_with_stdio(false);\n\tcin.tie(0),cout.tie(0);\n\tstring s;cin>>s;n=s.length(),s=\" \"+s;\n    for (rint i=1;i<=n;++i) T[s[i]-'a'].update(i,1);//\u9884\u5904\u7406\n\tint q;cin>>q;\n    while (q--){\n    \tint type;cin>>type;\n    \tif (type&1){\n    \t\tint pos;char c;cin>>pos>>c;\n    \t\tT[s[pos]-'a'].update(pos,-1);\n    \t\tT[c-'a'].update(pos,1);\n    \t\ts[pos]=c;\n\t\t}else{\n\t\t\tint l,r;cin>>l>>r;\n\t\t\tint ans=0;\n\t\t\tfor (rint i=0;i<26;++i)\n\t\t\t    if (T[i].query(r)-T[i].query(l-1)>0) ++ans;\n\t\t    cout<<ans<<'\\n';\n\t\t}\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1658966278,
        "uid": 253608,
        "name": "Tx_Lcy",
        "ccfLevel": 7,
        "title": "CF1234D Distinct Characters Queries"
    },
    {
        "content": "### \u524d\u8a00\n\n~~\u770b\u5230\u51e0\u4e4e\u6240\u6709\u5de8\u4f6c\u90fd\u662f\u7528\u6811\u72b6\u6570\u7ec4\u6216\u7ebf\u6bb5\u6811\u901a\u8fc7\u8fd9\u9053\u9898\u7684,\u4f46\u5c0f\u849f\u84bb\u6700\u8fd1\u505a\u83ab\u961f\u5df2\u505a\u50bb,\u6240\u4ee5\u5c31\u7528\u83ab\u961f\u5199\u7684\u5566,\u7136\u540e\u6765\u5199\u7bc7\u9898\u89e3~~\n\n### \u5173\u4e8e\u83ab\u961f\n\n\u83ab\u961f\u5b9e\u8d28\u5c31\u662f\u4e2a\u4f18\u96c5\u7684\u66b4\u529b\uff0c\u6838\u5fc3\u4e3a\u5206\u5757 $+$ \u6392\u5e8f,\u518d\u52a0\u4e0a\u5de6\u53f3\u4e24\u4e2a\u6307\u9488\u8df3\u6765\u8df3\u53bb\u3002\u6392\u5e8f\u7684\u8bdd\u4e00\u822c\u662f\u5148\u6309\u5de6\u7aef\u70b9\u6240\u5728\u5757\u6392\u5e8f\uff0c\u82e5\u76f8\u540c\uff0c\u518d\u6309\u53f3\u7aef\u70b9\u6240\u5728\u5757\u6392\u5e8f\u3002\u7136\u540e\u518d\u5c06\u5de6\u53f3\u6307\u9488\u8df3\u6765\u8df3\u53bb\u3002\n\n### \u5173\u4e8e\u8fd9\u9053\u9898\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u9053\u9898\u9700\u8981\u4fee\u6539\uff0c\u666e\u901a\u83ab\u961f\u663e\u7136\u7ef4\u62a4\u4e0d\u4e86\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u4f7f\u7528\u5e26\u4fee\u83ab\u961f\u4e86\u3002\n\n\u5e26\u4fee\u83ab\u961f\u5c31\u662f\u5728\u666e\u901a\u83ab\u961f\u7684\u57fa\u7840\u4e0a\uff0c\u591a\u7ef4\u62a4\u4e00\u7ef4\u65f6\u95f4\uff08\u6b64\u65f6\u4fee\u6539\u5230\u4e86\u54ea\u91cc\uff09\u3002\u82e5\u5f53\u524d\u65f6\u95f4\u5927\u4e86\uff0c\u90a3\u4e48\u8bf4\u660e\u5f53\u524d\u8fdb\u884c\u7684\u4fee\u6539\u64cd\u4f5c\u6bd4\u9700\u8981\u7684\u591a\uff0c\u5219\u6539\u56de\u6765\uff0c\u5426\u5219\u6539\u8fc7\u53bb\u3002\u53ea\u6709\u5f53\u524d\u533a\u95f4\u548c\u65f6\u95f4\u4e0e\u8be2\u95ee\u533a\u95f4\u548c\u65f6\u95f4\u76f8\u540c\u65f6\u624d\u8bb0\u5f55\u7b54\u6848\u3002\n\n\u90a3\u4e48\u63a5\u4e0b\u6765\u5c31\u4e0a\u4ee3\u7801\u4e86\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define fr(i,a,b) for(register int i = a;i <= b;++i)\n#define N 100010\n#define M 50\nusing namespace std;\n\nstring s;\nint a[N],cnt[M],id[N],ans[N];\nstruct query{\n\tint l,r,t,pos;\n\tbool operator < (const query &p)const{\n\t\treturn id[l] ^ id[p.l] ? l < p.l : ((id[r] ^ id[p.r]) ? r < p.r : t < p.t);\n\t}\n}q[N];\nstruct upd{\n\tint pos,w;\n}d[N];\nint cnt1,cnt2,tot;\n\ninline int read(){\n\tint x = 0,f = 1;char c = getchar();\n\twhile(!isdigit(c)){if(c == '-')f = -1;c = getchar();}\n\twhile(isdigit(c)){x = x * 10 + c - '0';c = getchar();}\n\treturn f * x;\n}\n\nint main(){\n\tcin>>s;\n\tint n = s.size(),m = read(),sum = pow(n,2.0 / 3.0);\n\tfr(i,1,n)a[i] = s[i - 1] - 'a' + 1,id[i] = (i - 1) / sum + 1;\n\tfr(i,1,m){\n\t\tint opt = read();\n\t\tif(opt == 2){int x = read(),y = read();q[++cnt1] = {x,y,cnt2,cnt1};}\n\t\telse{int x = read();char c;cin>>c;d[++cnt2] = {x,c - 'a' + 1};}\n\t}\n\tsort(q + 1,q + cnt1 + 1);\n\tint l = 1,r = 0,t = 0;\n\tfr(i,1,cnt1){\n\t\tint ql = q[i].l,qr = q[i].r,qt = q[i].t;\n\t\twhile(l < ql)tot -= !--cnt[a[l++]];//\u5229\u7528\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u53ef\u4ee5\u8fd9\u4e48\u5199\n\t\twhile(l > ql)tot += !cnt[a[--l]]++;\n\t\twhile(r < qr)tot += !cnt[a[++r]]++;\n\t\twhile(r > qr)tot -= !--cnt[a[r--]];\n\t\twhile(t < qt){//\u5f53\u524d\u65f6\u95f4\u6bd4\u8be2\u95ee\u533a\u95f4\u5c0f\uff0c\u8bf4\u660e\u9700\u8981\u591a\u8fdb\u884c\u4fee\u6539\n\t\t\tt++;\n\t\t\tif(ql <= d[t].pos && qr >= d[t].pos)tot -= !--cnt[a[d[t].pos]] - !cnt[d[t].w]++;\n\t\t\tswap(a[d[t].pos],d[t].w);\n\t\t}\n\t\twhile(t > qt){//\u5f53\u524d\u65f6\u95f4\u6bd4\u8be2\u95ee\u533a\u95f4\u5927\uff0c\u8bf4\u660e\u9700\u8981\u628a\u4e4b\u524d\u6539\u8fc7\u7684\u6539\u56de\u6765\n\t\t\tif(ql <= d[t].pos && qr >= d[t].pos)tot -= !--cnt[a[d[t].pos]] - !cnt[d[t].w]++;\n\t\t\tswap(a[d[t].pos],d[t].w);\n\t\t\tt--;\n\t\t}\n\t\tans[q[i].pos] = tot;\n\t}\n\tfr(i,1,cnt1)printf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```\n",
        "postTime": 1572355253,
        "uid": 18157,
        "name": "Naffygo",
        "ccfLevel": 0,
        "title": "CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "### \u9898\u76ee\u89e3\u6790\uff1a\n\n[\u535a\u5ba2\u5730\u5740](http://littleseven.top/)\n\n\u770b\u7740\u7ed9\u51fa\u7684\u8fd9\u4fe9\u7c7b\u578b\u7684\u64cd\u4f5c\u8fd9\u4e48\u719f\u5462\uff1f\uff1f\uff1f\n\n~~\u7ebf~~   ~~\u6bb5~~   ~~\u6811~~\n\n~~\u6811~~   ~~\u72b6~~   ~~\u6570~~   ~~\u7ec4~~\n\n\u90a3\u5c31\u6574\u554a\uff01\uff01\uff01\uff01\n\n26\u9897\u7ebf\u6bb5\u6811   OR   26\u9897\u6811\u72b6\u6570\u7ec4\n\n\uff08\u663e\u7136\u540e\u8005\u597d\u5199\uff0c\u90a3\u5c31\u5199\uff09\n\n\u6570\u636e\u7ed3\u6784\u9898\u76f4\u63a5\u770b\u4ee3\u7801\u5c31\u597d\uff0c\u8fd9\u662f26\u9897\u6811\u72b6\u6570\u7ec4\u3002\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nint tree[26][100010];\n\nint n, m;\n\nchar s[100010];\n\nvoid update(int ch, int x, int v) {\n\tfor (int i = x; i <= n; i += (i & -i)) {\n\t\ttree[ch][i] += v;\n\t}\n}\n\nint query(int ch, int x) {\n\tint res = 0;\n\tfor (int i = x; i; i -= (i & -i)) {\n\t\tres += tree[ch][i];\n\t}\n\treturn res;\n}\n\nint main() {\n\tscanf(\"%s\", s + 1);\n\tn = strlen(s + 1);\n\tfor (int i = 1; i <= n; i ++ ) {\n\t\tupdate(s[i] - 'a', i, 1);\n\t}\n\tscanf(\"%d\", &m);\n\tfor (int i = 1; i <= m; i ++ ) {\n\t\tint opt;\n\t\tscanf(\"%d\", &opt);\n\t\tif (opt == 1) {\n\t\t\tint a;\n\t\t\tchar ch;\n\t\t\tscanf(\"%d %c\", &a, &ch);\n\t\t\tupdate(s[a] - 'a', a, -1);\n\t\t\tupdate(ch - 'a', a, 1);\n\t\t\ts[a] = ch;\n\t\t}\n\t\telse {\n\t\t\tint a, b, ans = 0;\n\t\t\tscanf(\"%d%d\", &a, &b);\n\t\t\tfor (int i = 0; i < 26; i ++ ) {\n\t\t\t\tif ((query(i, b) - query(i, a - 1))) {\n\t\t\t\t\tans ++ ;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprintf(\"%d\\n\", ans);\n\t\t}\n\n\t}\n\treturn 0;\n\n}\n```",
        "postTime": 1570160893,
        "uid": 144702,
        "name": "littleseven",
        "ccfLevel": 3,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u9898\u76ee\u5927\u610f\uff1a\u7ed9\u4f60\u4e00\u4e32\u7531\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u7ec4\u6210\u7684\u5b57\u7b26\u4e32\uff0c\u6709\u4e24\u79cd\u64cd\u4f5c\uff1a1 x y\uff08y\u4e3a\u4e00\u4e2a\u5c0f\u5199\u5b57\u6bcd\uff09\uff0c\u628ax\u4f4d\u7f6e\u7684\u5b57\u6bcd\u6539\u6210y\u30022 x y \u67e5\u8be2x~y\u4e2d\u6709\u591a\u5c11\u79cd\u4e0d\u540c\u7684\u82f1\u6587\u5b57\u6bcd\u3002\n\n\u539f\u9898\uff1aP1903\uff0c\u7528\u5f85\u4fee\u83ab\u961f\u5b9e\u73b0\n\nPS\uff1a\u4ee3\u7801\u53ea\u662f\u66f4\u6539\u7b2c\u4e00\u7bc7\u9898\u89e3\u7684\u8f93\u5165\u8f93\u51fa\n\n```\n#include<bits/stdc++.h> \nusing namespace std;\ntypedef long long ll;\ntemplate<class Read>void in(Read &x){\n    x=0;\n    int f=0;\n    char ch=getchar();\n    while(ch<'0'||ch>'9'){\n        f|=(ch=='-');\n        ch=getchar();\n    }\n    while(ch>='0'&&ch<='9'){\n        x=(x<<1)+(x<<3)+(ch^48);\n        ch=getchar();\n    }\n    x=f?-x:x;\n    return;\n}\nint n,q,m,a[1000005],b[1000005],ans,now1,now2,now,sum[1000005],l=2,r=1;\nstruct Node{\n\tint x;\n\tint c;\n}g[1000005];\nstruct node{\n    int x;\n    int y;\n    int c;\n    int id;\n}f[1000005];\nbool cmp(node x,node y){\n\treturn x.x/m==y.x/m?(x.y/m==y.y/m?x.c<y.c:x.y<y.y):x.x<y.x;\n}\nvoid add(int x){if(b[x]++==0)++ans;}\nvoid del(int x){if(--b[x]==0)--ans;}\nvoid work(int x,int y){\n\tif(g[y].x>=f[x].x&&g[y].x<=f[x].y){\n\t\tdel(a[g[y].x]);\n\t\tadd(g[y].c);\n\t}\n\tint t=a[g[y].x];\n\ta[g[y].x]=g[y].c;\n\tg[y].c=t;\n}\nint main(){\n    string s;\n    cin>>s;\n    for(int i=0;s[i];i++){\n    \tn++;\n    \ta[n]=s[i]-'a';\n\t}\n\tm=pow(n,2.0/3.0);\n\tin(q);\n\tfor(int i=1;i<=q;i++){\n\t\tint opt;\n\t\tin(opt);\n\t\tif(opt==1){\n\t\t\tin(g[++now1].x);\n\t\t\tchar ch[10];\n\t\t\tscanf(\"%s\",ch);\n\t\t\tg[now1].c=ch[0]-'a';\n\t\t}\n\t\telse{\n\t\t\tin(f[++now2].x);\n\t\t\tin(f[now2].y);\n\t\t\tf[now2].c=now1;\n\t\t\tf[now2].id=now2;\n\t\t}\n\t}\n    sort(f+1,f+1+now2,cmp);\n    for(int i=1;i<=now2;i++){\n    \twhile(l>f[i].x)add(a[--l]);\n    \twhile(r<f[i].y)add(a[++r]);\n    \twhile(l<f[i].x)del(a[l++]);\n    \twhile(r>f[i].y)del(a[r--]);\n    \twhile(now<f[i].c)work(i,++now);\n    \twhile(now>f[i].c)work(i,now--);\n    \tsum[f[i].id]=ans;\n\t}\n    for(int i=1;i<=now2;i++)printf(\"%d\\n\",sum[i]);\n    return 0;\n}\n```\n",
        "postTime": 1570070574,
        "uid": 132290,
        "name": "\u5f00\u59cb\u65b0\u7684\u8bb0\u5fc6",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    },
    {
        "content": "\u5bf9\u4e8e\u8fd9\u79cd\u533a\u95f4\u64cd\u4f5c\uff0c\u5355\u70b9\u4fee\u6539\u95ee\u9898\uff0c\u4e0d\u96be\u60f3\u5230\u8981\u7528**\u6811\u72b6\u6570\u7ec4**\u548c**\u7ebf\u6bb5\u6811**\u8fd9\u7c7b\u6570\u636e\u7ed3\u6784\u4e86\u3002\n\n\u9996\u5148\u5148\u601d\u8003\u95ee\u9898\u7684\u672c\u8d28\uff1a\u8981\u6c42\u627e\u5230\u5b50\u4e32s[l,r]\u4e2d\u4e0d\u540c\u5b57\u7b26\u7684\u4e2a\u6570\uff0c\u5e76\u4e14\u652f\u6301\u5355\u70b9\u4fee\u6539\u3002\n\n\u8fd9\u4e2a\u95ee\u9898\u7684\u5173\u952e\u70b9\uff0c\n\n### **\u5c31\u5728\u4e8es\u4e2d\u53ea\u5305\u542b\u5c0f\u5199\u5b57\u6bcd**\u3002\n\n\u6240\u4ee5\uff1f\u7b54\u6848\u5f88\u5c0f\u3002\n\n\u6240\u4ee5\uff1f\n\n\u4e0d\u8981\u5ffd\u7565\u4e86\uff0c\u5c0f\u5199\u62c9\u4e01\u5b57\u6bcd\u53ea\u670926\u4e2a\u3002\n\n\u600e\u6837\u7edf\u8ba1\uff1f\u600e\u6837\u4fee\u6539\uff1f\u4e0d\u8981\u6025\uff0c\n\n### \u5efa\u7acb\u8d7726\u4e2a\u6811\u72b6\u6570\u7ec4\u6216\u8005\u7ebf\u6bb5\u6811\u5c31\u597d\u4e86\u3002\n\n**\u7edf\u8ba1\u300226\u4e2a\u6811\u72b6\u6570\u7ec4\u5df2\u7ecf\u5904\u7406\u597d\u4e86\uff0c\u6211\u4eec\u628a\u6709\u8fd9\u4e00\u5b57\u6bcd\u7684\u4f4d\u7f6e\u6dfb\u4e0a1\u5373\u53ef\u3002\u4e0d\u8981\u5fd8\u8bb0\u4e86\uff0c\u6811\u72b6\u6570\u7ec4\u662f\u6839\u636e\u524d\u7f00\u548c\u6765\u6c42\u533a\u95f4\u548c\u7684\u3002\u6211\u4eec\u7528s[1,r]\u51cf\u53bbs[1,l-1]\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u5b57\u6bcd\u5728\u533a\u95f4[l,r]\u4e0a\u7684\u4e2a\u6570\u4e86\u3002**\n\n**\u4fee\u6539\u3002\u6211\u4eec\u4e00\u8fb9\u4fee\u6539\uff0c\u987a\u4fbf\u628a\u4fee\u6539\u7684\u5185\u5bb9\u4e5f\u5728\u539f\u4e32\u6807\u8bb0\u51fa\u6765\u3002\u4fee\u6539\u65f6\uff0c\u539f\u4e32\u5bf9\u5e94\u4f4d\u7f6e\u4e0a\u7684\u5b57\u7b26\u5728\u6811\u72b6\u6570\u7ec4\u4e2d\u51cf1\uff1b\u800c\u53d6\u4ee3\u7684\u5b57\u7b26\u5728\u6811\u72b6\u6570\u7ec4\u4e2d\u52a01\u3002\u8fd9\u6837\u5904\u7406\u5c31\u5f88\u65b9\u4fbf\u4e86\u3002**\n\n## \u4ee3\u7801\n\n\u4e0b\u9762\u5c06\u4f7f\u7528\u6811\u72b6\u6570\u7ec4\u8fdb\u884c\u6c42\u89e3\u3002\n```cpp\n#include <iostream>\n#include <cstdlib>\n#include <cstring>\n#include <cstdio>\nusing namespace std;\nint sz[27][100001],q;\u3000//sz\u662f\u6811\u72b6\u6570\u7ec4, sz[1]\u4ee3\u8868a\u7684\u6811\u72b6\u6570\u7ec4\u3002\nint type,l,r,n,m;\nchar x,s[100002];\nint lowbit(int x)\u3000//lowbit\u51fd\u6570 \u53162\u8fdb\u5236,\u53d6\u51fa\u6700\u4f4e\u4f4d1\u53ca\u5176\u540e\u76840\u8fde\u63a5\u6210\u76842\u8fdb\u5236\u6570,\u518d\u5316\u4e3a10\u8fdb\u5236\u6570\n{\n\treturn x&(-x);\n}\nvoid modify(int idd,int pos,int s) //idd\u4e3a\u7b2cidd\u4e2a\u6811\u72b6\u6570\u7ec4 pos\u4e3a\u4fee\u6539\u7684\u4f4d\u7f6e s\u4e3a\u52a0\u4e0a\u7684\u6570\u503c\n{\n\tfor (int i=pos;i<=n;i+=lowbit(i))\n\t{\n\t\tsz[idd][i]+=s;\n\t}\n\treturn;\n}\nint sum(int idd,int x) //\u8ba1\u7b97\u6811\u72b6\u6570\u7ec4idd\u4e2didd\u5728\u533a\u95f4[1,x]\u4e2d\u51fa\u73b0\u7684\u6b21\u6570\n{\n\tint ans=0;\n\tfor (int i=x;i>=1;i-=lowbit(i))\n\t{\n\t\tans+=sz[idd][i]; \n\t}\n\treturn ans;\n}\nint main(void)\n{\n\tscanf(\"%s\",s+1);n=strlen(s+1);\n\tfor (int i=1;i<=strlen(s+1);i++) //\u4fee\u6539\u6811\u72b6\u6570\u7ec4\n\t{\n\t\tmodify(s[i]-'a'+1,i,1);\n\t}\n\tcin>>m;\n\tfor (int i=1;i<=m;i++)\n\t{\n\t\tcin>>type;\n\t\tif (type==1)\n\t\t{\n\t\t\tscanf(\"%d %c\",&l,&x);\n\t\t\tmodify(s[l]-'a'+1,l,-1); //\u8981\u628a\u539f\u6765\u7684\u51cf1\n\t\t\tmodify(x-'a'+1,l,1);      //\u4e5f\u8981\u628a\u4fee\u6539\u7684\u52a0\u4e0a1\n\t\t\ts[l]=x;                       //\u628a\u65b0\u7684\u5957\u5230\u539f\u5b57\u4e32\u4e0a\n\t\t}\n\t\tif (type==2)\n\t\t{\n\t\t\tcin>>l>>r;\n\t\t\tint pk=0;\n\t\t\tfor (int j=1;j<=26;j++) //26\u4e2a\u5b57\u6bcd,\u904d\u538626\u4e2a\u6811\u72b6\u6570\u7ec4\n\t\t\t{\n\t\t\t\tpk+=((sum(j,r)-sum(j,l-1))==0)?0:1; //\u82e5\u4e3a0,\u5219\u6ca1\u6709\u51fa\u73b0\u8fc7;\u82e5\u4e0d\u4e3a0,\u5c31\u662f\u6709\u51fa\u73b0\u8fc7\n\t\t\t}\n\t\t\tcout<<pk<<endl;\n\t\t}\n\t}\n}\n\n```\n",
        "postTime": 1569998270,
        "uid": 88656,
        "name": "Ludo",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1234D \u3010Distinct Characters Queries\u3011"
    }
]
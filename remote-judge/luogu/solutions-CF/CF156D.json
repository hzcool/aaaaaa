[
    {
        "content": "# \u8bf7\u5728\u535a\u5ba2\u4e2d\u67e5\u770b\r\n\r\n\u8bbe $s_i$ \u4e3a\u7b2c $i$ \u4e2a\u8fde\u901a\u5757\u7684\u70b9\u6570\uff0c$d_i$ \u4e3a\u7b2c $i$ \u4e2a\u8fde\u901a\u5757\u7684\u5ea6\u6570\u3002\r\n\r\n\u5bf9\u4e8e\u7ed9\u5b9a\u7684 $d$ \u5e8f\u5217\u6784\u9020 Prufer \u5e8f\u5217\u7684\u65b9\u6848\u6570\u4e3a\uff1a\r\n\r\n$$\r\n\\binom{k-2}{d_1-1,d_2-1,\\cdots,d_k-1}=\\frac{(k-2)!}{(d_1-1)!(d_2-1)!\\cdots(d_k-1)!}\r\n$$\r\n\r\n\u5bf9\u4e8e\u7ed9\u5b9a\u7684 $d$ \u5e8f\u5217\u4f7f\u56fe\u8fde\u901a\u7684\u65b9\u6848\u6570\u4e3a\uff1a\r\n\r\n$$\r\n\\binom{k-2}{d_1-1,d_2-1,\\cdots,d_k-1}\\cdot\\prod_{i=1}^k{s_i}^{d_i}\r\n$$\r\n\r\n\u679a\u4e3e $d$ \u5e8f\u5217\u4f7f\u56fe\u8fde\u901a\u7684\u65b9\u6848\u6570\u4e3a\uff1a\r\n\r\n$$\r\n\\sum_{d_i\\ge 1,\\sum_{i=1}^kd_i=2k-2}\\binom{k-2}{d_1-1,d_2-1,\\cdots,d_k-1}\\cdot\\prod_{i=1}^k{s_i}^{d_i}\r\n$$\r\n\r\n\u8bbe $e_i=d_i-1$\uff1a\r\n\r\n$$\r\n\\sum_{e_i\\ge 0,\\sum_{i=1}^ke_i=k-2}\\binom{k-2}{e_1,e_2,\\cdots,e_k}\\cdot\\prod_{i=1}^k{s_i}^{e_i+1}\r\n$$\r\n\r\n\u8003\u8651\u591a\u5143\u4e8c\u9879\u5f0f\u5b9a\u7406\uff1a\r\n\r\n$$\r\n(x_1 + \\dots + x_m)^p = \\sum_{c_i \\ge 0,\\sum_{i=1}^m c_i = p}\\binom{p}{c_1, c_2, \\cdots ,c_m}\\cdot \\prod_{i=1}^m{x_i}^{c_i}\r\n$$\r\n\r\n\u539f\u5f0f\u53d8\u4e3a\uff1a\r\n\r\n$$\r\n(s_1+s_2+\\cdots+s_k)^{k-2}\\cdot\\prod_{i=1}^ks_i\r\n$$\r\n\r\n\u5373\uff1a\r\n\r\n$$\r\nn^{k-2}\\cdot\\prod_{i=1}^ks_i\r\n$$\r\n\r\n```cpp\r\nconst int N = 1e5 + 7;\r\nint n, m, k, f[N], s[N];\r\nmodint ans = 1;\r\n\r\nint get(int x) {\r\n\treturn x == f[x] ? x : (f[x] = get(f[x]));\r\n}\r\n\r\nint main() {\r\n\trd(n), rd(m), rd(P);\r\n\tif (P == 1) return print(0), 0;\r\n\tfor (int i = 1; i <= n; i++) f[i] = i;\r\n\tfor (int i = 1, x, y; i <= m; i++) rd(x), rd(y), f[get(x)] = get(y);\r\n\tfor (int i = 1; i <= n; i++) ++s[get(i)];\r\n\tfor (int i = 1; i <= n; i++) if (i == get(i)) ++k, ans *= s[i];\r\n\tif (k == 1) return print(1), 0;\r\n\tprint(ans *= (modint)n ^ (k - 2));\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1581343466,
        "uid": 100544,
        "name": "xht",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF156D \u3010Clues\u3011"
    },
    {
        "content": "## \u5199\u5728\u524d\u9762\n\n\u5bf9\u4e8e\u6811\u5f62\u6001\u7684\u8ba1\u6570\u95ee\u9898\uff0c\u4e00\u79cd\u5e38\u7528\u7684\u89e3\u9898\u601d\u8def\u662f\u501f\u52a9 [Prufer \u5e8f\u5217](https://oi-wiki.org/graph/prufer/)\u5c06\u6811\u548c\u7ec4\u5408\u6570\u8054\u7cfb\u5728\u4e00\u8d77\u3002\n\n## \u7b97\u6cd5\u4e00\n\n\u5982\u679c\u539f\u56fe\u662f\u4e00\u68f5\u6811\uff0c\u90a3\u4e48\u6839\u636e Cayley \u516c\u5f0f\uff1a\u7b54\u6848\u4e3a $n^{n-2}$\u3002\n\n## \u7b97\u6cd5\u4e8c\n\n\u5982\u679c\u628a\u6bcf\u4e00\u4e2a\u8fde\u901a\u5757\u770b\u6210\u4e00\u4e2a\u70b9\uff0c\u90a3\u4e48\u603b\u7684\u8fde\u8fb9\u65b9\u6848\u4e3a $n^{k-2}$\uff08\u7531\u4e8e\u8981\u8fde $k-1$ \u6761\u8fb9\uff0c\u6240\u4ee5 Prufer \u5e8f\u5217\u7684\u957f\u5ea6\u4e3a $k-2$\uff0c\u53c8\u56e0\u4e3a\u5728\u6bcf\u4e00\u4f4d\u4e0a\u586b\u4e00\u4e2a $1\\sim n$ \u7684\u6570\u6240\u5f62\u6210\u7684 Prufer \u5e8f\u5217\u90fd\u6709\u610f\u4e49\uff0c\u6240\u4ee5\u6839\u636e\u4e58\u6cd5\u539f\u7406\u5f97\u51fa\u7b54\u6848\u4e3a $n^{k-2}$\uff09\u3002\n\n\u4f46\u662f\u4ec5\u4ec5\u6784\u9020\u51fa Prufer \u5e8f\u5217\u662f\u4e0d\u591f\u7684\uff0c\u8981\u7528 Prufer \u5e8f\u5217\u5bf9\u6811\u7684\u5f62\u6001\u6570\u91cf\u8fdb\u884c\u8ba1\u7b97\u8fd8\u9700\u8981\u8bc1\u660e Prufer \u5e8f\u5217\u7684\u6570\u91cf\u4e0e\u6811\u7684\u5f62\u6001\u7684\u6570\u91cf\u4e4b\u95f4\u7684\u5173\u7cfb\uff08\u4f8b\u5982\u5bf9\u4e8e\u4e00\u822c\u7684\u6811\uff0c\u4e24\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\u662f\u4e00\u4e00\u5bf9\u5e94\uff09\u3002\n\n\u8003\u8651[\u7528 Prufer \u5e8f\u5217\u91cd\u5efa\u6811](https://oi-wiki.org/graph/prufer/#prufer_3)\u7684\u8fc7\u7a0b\uff0c\u6bcf\u6b21\u6211\u4eec\u90fd\u4f1a\u5c06 Prufer \u5e8f\u5217\u7684\u6700\u524d\u9762\u7684\u4e00\u4e2a\u70b9  $u$ \u62ff\u51fa\u6765\u8fdb\u884c\u8fde\u8fb9\uff0c\u4f46\u662f\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u4e0e $u$ \u8fde\u8fb9\u7684\u4f1a\u662f\u8fde\u901a\u5757\u5185\u7684\u54ea\u4e00\u4e2a\u70b9\uff0c\u6240\u4ee5\u9009\u5b9a\u4e00\u4e2a\u8fde\u901a\u5757\u5185\u4e0e $u$ \u8fde\u8fb9\u7684\u70b9\u4f1a\u4f7f\u7b54\u6848\u4e58\u4e0a $s_i$\uff08\u5373\u8fde\u901a\u5757\u7684\u5927\u5c0f\uff09\u3002\n\n\u7efc\u4e0a\u6240\u8ff0\uff0c\u6700\u7ec8\u7684\u7b54\u6848\u4e3a $n^{k-2}\\times \\prod\\limits_{i=1}^k s_k$\u3002\n\n## [\u53c2\u8003\u4ee3\u7801](https://codeforces.com/contest/156/submission/86086658)\n\n```cpp\n#include<cstdio>\nusing namespace std;int p,f[100005],sz[100005];\nint ff(int x) {return x==f[x]?x:f[x]=ff(f[x]);}\ninline int qpow(int a,int b) {int rtv=1;\n\tfor (;b;b>>=1,a=1LL*a*a%p) if (b&1) rtv=1LL*rtv*a%p;\n\treturn rtv;\n}int main() {int n,m,u,v,ans=1,cnt=0;scanf(\"%d%d%d\",&n,&m,&p);\n\tfor (register int i=1;i<=n;++i) f[i]=i,sz[i]=1;\n\tfor (register int i=1;i<=m;++i) {scanf(\"%d%d\",&u,&v);\n\t\tint fu=ff(u),fv=ff(v);if (fu^fv) f[fu]=fv,sz[fv]+=sz[fu];\n\t}for (register int i=1;i<=n;++i) if (f[i]==i) ++cnt,ans=1LL*ans*sz[i]%p;\n\tprintf(\"%I64d\",cnt<2?1%p:1LL*ans*qpow(n,cnt-2)%p);return 0;\n}\n```",
        "postTime": 1593997108,
        "uid": 23688,
        "name": "\u798f\u5dde\u5468\u5723\u529b",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF156D \u3010Clues\u3011"
    },
    {
        "content": "\u8003\u8651\u5171\u6709$k$\u4e2a\u8fde\u901a\u5757\uff0c\u7b2c$i$\u4e2a\u8054\u901a\u5757\u7684\u5927\u5c0f\u4e3a $s_i$ \uff0c\u5728\u6700\u7ec8\u751f\u6210\u7684\u6811\u7684\u5ea6\u6570\u4e3a $d_i$ \u7684\u65b9\u6848\u6570\u3002\n\n\u5bf9\u5e94\u5230prufer\u5e8f\u5217\u4e0a\u5c31\u662f\n$$\n{k-2\\choose d_1-1,d_2-1\\cdots d_k-1}\\prod {{s_i}^{d_i}}=\\frac{(k-2)!}{\\prod (d_i-1)!}\\prod {{s_i}^{d_i}}\n$$\n\u770b\u5230\u8fd9\u4e2a$d_i-1$\u7684\u5f62\u5f0f\u4f3c\u4e4e\u4e0d\u662f\u5f88\u4f18\u7f8e\uff0c\u8bbe$f_i=d_i-1$\uff0c\u5373\n$$\n{k-2\\choose e_1,e_2,\\cdots ,e_k}\\prod{s_i^{e_i+1}}\n$$\n\u8fd9\u662f\u4e2a\u591a\u9879\u5f0f\u5b9a\u7406\u7684\u5f62\u5f0f\uff0c\u591a\u9879\u5f0f\u5b9a\u7406\u5373\u4e3a\u9879\u6570\u591a\u4e8e $1$ \u7684\u60c5\u51b5\u4e0b\n$$\n(x_1+x_2+\\cdots+x_t)^m=\\sum_{\\sum n_i=t}{{t\\choose n_1,n_2,\\cdots,n_t}}\\prod x_i^{n_i}\n$$\n$n_i$ \u4e3a $x_i$ \u8fd9\u9879\u7684\u7cfb\u6570\uff0c\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u8bc1\u660e\uff1a\u4ece $m$ \u9879\u4e2d\u9009\u62e9 $n$ \u4e2a\u6570\uff0c\u90a3\u4e48\u7ec4\u5408\u4e3a $(n_1,n_2,\\cdots,n_t)$\u7684\u65b9\u6848\u5c31\u6709 \n$$\nt\\choose n_1,n_2,\\cdots,n_t\n$$\n\u79cd\uff0c\u6bcf\u79cd\u6743\u503c\u4e3a $\\prod x_i^{n_i}$\u3002\n\n\u7531\u4e8e$\\sum s_i=n$\u4e8e\u662f\u539f\u5f0f\u5373\u53ef\u5316\u4e3a \n$$\nn^{k-2}\\prod s_i\n$$\n",
        "postTime": 1625206329,
        "uid": 179600,
        "name": "shao0320",
        "ccfLevel": 8,
        "title": "CF156D Clues"
    },
    {
        "content": "### \u9898\u610f\n\n\u7ed9\u5b9a\u4e00\u5f20 $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u8bbe\u6700\u5c11\u52a0 $k$ \u6761\u8fb9\u80fd\u4f7f\u56fe\u8054\u901a\uff0c\u6c42\u52a0 $k$ \u6761\u8fb9\u4f7f\u56fe\u8054\u901a\u7684\u65b9\u6848\u6570\uff0c\u5bf9 $p$ \u53d6\u6a21\u3002\n\n$\\texttt{Data Range:}1\\leq n\\leq 10^5$\uff0c$0\\leq m\\leq 10^5$\u3002\n\n### \u9898\u89e3\n\n\u7b80\u5355\u9898\u3002\n\n\u4e00\u4e2a\u5f88\u660e\u663e\u7684\u60f3\u6cd5\u662f\u5c06\u6bcf\u4e00\u4e2a\u8fde\u901a\u5757\u5185\u7684\u70b9\u7f29\u6210\u4e00\u4e2a\uff0c\u6743\u503c\u4e3a\u8fd9\u4e2a\u8fde\u901a\u5757\u7684\u70b9\u6570\uff0c\u4e8e\u662f\u53ea\u9700\u8981\u6c42\u8fd9\u4e2a\u65b0\u56fe\u4e2d\u8fde $k$ \u6761\u8fb9\u8fde\u6210\u6811\u7684\u6743\u503c\u548c\u3002\n\n\u8bbe\u6bcf\u4e2a\u70b9\u6743\u503c\u4e3a $w_i$\uff0c\u8003\u8651\u5982\u4f55\u8ba1\u7b97\u6811\u7684\u6743\u503c\u3002\u5bf9\u4e8e\u6bcf\u4e00\u6761\u6811\u8fb9 $(u,v)$\uff0c\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u4e3a $w_uw_v$\uff0c\u6240\u4ee5\u5982\u679c\u8bbe\u6bcf\u4e2a\u70b9\u7684\u5ea6\u6570\u4e3a $d_i$\uff0c\u4e00\u68f5\u6811\u7684\u6743\u503c\u4e3a $\\prod w_i^{d_i}$\u3002\n\n\u5bf9\u4e8e\u5ea6\u6570\u7684\u95ee\u9898\u81ea\u7136\u8003\u8651 Prufer \u5e8f\u5217\uff0c\u8bbe\u65b0\u7684 $d_i$ \u4e3a\u539f\u6765\u7684 $d_i-1$\uff0c\u5219\u7b54\u6848\u4e3a\n\n$$\\sum_{d_1+\\cdots+d_n=n-2}\\binom{n-2}{d_1,\\cdots,d_n}w_i^{d_i+1}$$\n\n\u663e\u7136\u662f\u5377\u79ef\u7684\u5f62\u5f0f\uff0c\u5c06\u4e00\u4e2a $w_i$ \u63d0\u51fa\u6765\u4e4b\u540e\u5373\n\n$$(n-2)!\\prod w_i\\sum_{d_1+\\cdots+d_n=n-2}\\frac{w_i^{d_i}}{d_i!}$$\n\n\u53f3\u8fb9\u5f88\u660e\u663e\u53ef\u4ee5\u7528 GF \u8868\u793a\uff0c\u5373\n\n$$(n-2)!\\prod w_i[x^{n-2}]e^{\\sum w_ix}$$\n\n\u5373\n\n$$\\prod w_i\\left(\\sum w_i\\right)^{n-2}$$\n\n\u76f4\u63a5\u505a\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef int ll;\ntypedef long long int li;\nconst ll MAXN=2e5+51;\nll n,m,MOD,u,v,totd,prod;\nll ffa[MAXN],bel[MAXN],sz[MAXN];\ninline ll read()\n{\n    register ll num=0,neg=1;\n    register char ch=getchar();\n    while(!isdigit(ch)&&ch!='-')\n    {\n        ch=getchar();\n    }\n    if(ch=='-')\n    {\n        neg=-1;\n        ch=getchar();\n    }\n    while(isdigit(ch))\n    {\n        num=(num<<3)+(num<<1)+(ch-'0');\n        ch=getchar();\n    }\n    return num*neg;\n}\ninline ll qpow(ll base,ll exponent)\n{\n    ll res=1;\n    while(exponent)\n    {\n        if(exponent&1)\n        {\n            res=(li)res*base%MOD;\n        }\n        base=(li)base*base%MOD,exponent>>=1;\n    }\n    return res;\n}\ninline ll find(ll x)\n{\n\treturn x==ffa[x]?x:ffa[x]=find(ffa[x]);\n}\nint main()\n{\n\tn=read(),m=read(),MOD=read(),prod=1;\n\tfor(register int i=1;i<=n;i++)\n\t{\n\t\tffa[i]=i;\n\t}\n\tfor(register int i=1;i<=m;i++)\n\t{\n\t\tu=find(read()),v=find(read()),u!=v?ffa[v]=u:1;\n\t}\n\tfor(register int i=1;i<=n;i++)\n\t{\n\t\tfind(i)==i?bel[i]=++totd:1;\n\t}\n\tif(totd==1)\n\t{\n\t\treturn puts(MOD==1?\"0\":\"1\"),0;\n\t}\n\tfor(register int i=1;i<=n;i++)\n\t{\n\t\tsz[bel[find(i)]]++;\n\t}\n\tfor(register int i=1;i<=totd;i++)\n\t{\n\t\tprod=(li)prod*sz[i]%MOD;\n\t}\n\tprintf(\"%d\\n\",(li)prod*qpow(n,totd-2)%MOD);\n}\n```",
        "postTime": 1617699266,
        "uid": 60990,
        "name": "Karry5307",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF156D \u3010Clues\u3011"
    },
    {
        "content": "\u8bb0\u539f\u56fe\u7684\u8fde\u901a\u5757\u6570\u4e3a $k$\uff0c\u5404\u4e2a\u8fde\u901a\u5757\u7684\u5927\u5c0f\u4e3a $c_i$\u3002\n\n\u628a\u4e24\u4e2a\u8fde\u901a\u5757\u8fde\u8d77\u6765\u7684\u65b9\u6848\u6570\u663e\u7136\u4e3a $c_ic_j$\uff0c\u786e\u5b9a\u6811\u7684\u5f62\u6001\u540e\uff0c\u8fde\u51fa\u6765\u7684\u65b9\u6848\u6570\u5c31\u662f\u628a\u6bcf\u6761\u8fb9\u7684\u65b9\u6848\u6570\u4e58\u8d77\u6765\u3002\n\n\u628a\u8fde\u901a\u5757\u770b\u4f5c\u70b9\u3002\u628a\u8fb9\u6743\u644a\u5230\u70b9\u4e0a\u3002\u8bb0\u6700\u7ec8\u7684\u6811\u4e0a\u7b2c $i$ \u4e2a\u8fde\u901a\u5757\u7684\u5ea6\u6570\u4e3a $d_i$\uff0c\u90a3\u4e48\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662f $c_i^{d_i}$\u3002\n\n\u8003\u8651 prufer \u5e8f\u5217\u4ee5\u4fdd\u8bc1\u53ef\u4ee5\u8fde\u6210\u4e00\u68f5\u6811\u3002\u4e00\u4e2a\u70b9\u6bcf\u5728 prufer \u5e8f\u5217\u4e0a\u51fa\u73b0\u4e00\u6b21\uff0c\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662f $c_i$\u3002\u56e0\u4e3a\u4e00\u4e2a\u5ea6\u6570\u4e3a $x$ \u7684\u70b9\u53ea\u4f1a\u5728 prufer \u5e8f\u5217\u4e0a\u51fa\u73b0 $x-1$ \u6b21\uff0c\u6240\u4ee5\u8fd8\u9700\u8981\u989d\u5916\u7b97\u4e00\u6b21\u8d21\u732e\u3002\n\n\u6700\u7ec8\u7684\u7b54\u6848\u5c31\u662f $\\prod c_i \\times (\\sum c_i)^{k-2}=\\prod c_i \\times n^{k-2}$\u3002",
        "postTime": 1666335139,
        "uid": 186587,
        "name": "BBD186587",
        "ccfLevel": 0,
        "title": "CF156D"
    },
    {
        "content": "### \u9898\u610f\n \n- \u4e00\u4e2a $n$ \u4e2a\u70b9 $m$ \u6761\u8fb9\u7684\u5e26\u6807\u53f7\u65e0\u5411\u56fe\u6709 $k$ \u4e2a\u8fde\u901a\u5757\uff0c\u6c42\u6dfb\u52a0 $k-1$ \u6761\u8fb9\u4f7f\u5f97\u6574\u4e2a\u56fe\u8054\u901a\u7684\u65b9\u6848\u3002\n\n- $1\\le n\\le 10^5,0\\le m\\le 10^5$\u3002\n\n### \u505a\u6cd5\n\n~~icpc \u8003\u4e86\u539f\u9898\uff0c\u5728\u4e0d\u77e5\u9053 Prufer \u5e8f\u5217\u7684\u60c5\u51b5\u4e0b\u627e\u51fa\u4e86\u89c4\u5f8b\u7136\u540e A \u4e86\u3002~~\n\n\u524d\u7f6e\u829d\u58eb\uff1a\n\n- Prufer \u5e8f\u5217\n- \u591a\u5143\u4e8c\u9879\u5f0f\u5b9a\u7406\n\n\u5c3d\u53ef\u80fd\u8bb2\u5f97\u5f88\u8be6\u7ec6\u4e86\u3002\n\n\n\u8bbe $s_i$ \u4e3a\u7b2c $i$ \u4e2a\u8fde\u901a\u5757\u7684\u5927\u5c0f\uff0c$d_i$ \u4e3a\u7b2c $i$ \u4e2a\u8fde\u901a\u5757\u7684\u5ea6\u6570\u3002\u6211\u4eec\u5148\u628a\u6bcf\u4e2a\u8fde\u901a\u5757\u90fd\u770b\u4f5c\u4e00\u4e2a\u70b9\uff0c\u5219\u6613\u77e5\u5171 $\\displaystyle \\frac{(k-2)!}{\\prod\\limits_{i=1}^k(d_i-1)!}$ \u79cd\u65b9\u6848\u3002\n\n> why?\u9996\u5148 $k$ \u4e2a\u70b9\u7684\u8bdd Prufer \u5e8f\u5217\u5e94\u8be5\u957f $k-2$\u3002\u5047\u8bbe\u5e8f\u5217\u4e2d\u6bcf\u4e2a\u6570\u90fd\u4e0d\u76f8\u540c\uff0c\u5219\u6709 $(k-2)!$ \u79cd\u65b9\u6cd5\u3002\u56e0\u4e3a\u70b9 $i$ \u5728\u5e8f\u5217\u4e2d\u51fa\u73b0\u4e86 $d_i-1$ \u6b21\uff0c\u6240\u4ee5\u6bcf\u4e00\u79cd\u65b9\u6848\u91cd\u590d\u7b97\u4e86 $(d_i-1)!$ \u6b21\u3002\n\n\u5bf9\u4e8e\u7b2c $i$ \u4e2a\u8fde\u901a\u5757\u800c\u8a00\uff0c\u5176\u8fde\u63a5\u65b9\u5f0f\u5e94\u8be5\u6709 $s_i^{d_i}$ \u79cd\u3002\n\n> why?\u5411\u5916\u5171 $d_i$ \u6761\u8fb9\uff0c\u6bcf\u6761\u8fb9\u5404\u53ef\u4ee5\u9009\u62e9 $s_i$ \u4e2d\u7684\u4e00\u4e2a\u70b9\uff0c\u6240\u4ee5 $s_i^{d_i}$ \u79cd\u3002\n\n\u7136\u540e\u5c31\u5230\u4e86\u5feb\u4e50\u7684\u63a8\u5f0f\u5b50\u65f6\u95f4\u3002\n\n$$ \\binom{k-2}{d_1-1,d_2-1,\\cdots,d_k-1}\\cdot \\prod_{i=1}^k s_i^{d_i}=\\frac{(k-2)!}{\\prod\\limits_{i=1}^k(d_i-1)!}\\cdot \\prod_{i=1}^k s_i^{d_i}$$\n\n\u73b0\u5728\u8981\u679a\u4e3e $d$ \u5e8f\u5217\uff1a\n\n$$\\sum_{d_i\\ge1,\\sum_{i=1}^k{d_i}=2k-2}\\binom{k-2}{d_1-1,d_2-1,\\cdots,d_k-1}\\cdot \\prod_{i=1}^k s_i^{d_i}$$\n\n\u5f88\u4ee4\u4eba\u96be\u53d7\uff0c\u597d\u5728\u6211\u4eec\u6709\u591a\u5143\u4e8c\u9879\u5f0f\u5b9a\u7406\uff1a\n\n$$(x_1+\\cdots+x_m)^p=\\sum_{c_i\\ge0,\\sum_{i=1}^m{c_i}=p}\\binom{p}{c_1,c_2,\\cdots,c_m}\\cdot \\prod_{i=1}^m x_i^{c_i}$$\n\n\u5bf9\u539f\u5f0f\u7a0d\u52a0\u6539\u52a8\uff0c\u4ee4 $e_i=d_i-1$\uff0c\u5219\u6709\uff1a\n\n$$\\sum_{e_i\\ge0,\\sum_{i=1}^{k}e_i=k-2}\\binom{k-2}{e_1,e_2\\cdots,e_k}\\cdot\\prod_{i=1}^k s_i^{e_i+1}=(s_1+s_2+\\cdots+s_k)^{k-2}\\cdot\\prod_{i=1}^k s_i=n^{k-2}\\prod_{i=1}^k s_i$$\n\n\u6240\u4ee5\u6700\u540e\u7b54\u6848\u5c31\u662f $\\displaystyle n^{k-2}\\cdot\\prod_{i=1}^k s_i$\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,mod,ans=1,k;\nint f[100005];\nint siz[100005];\nint find(int x)\n{\n\treturn f[x]==x?x:f[x]=find(f[x]);\n}\ninline int qpow(int a,int b)\n{\n\tint res=1,p=a;\n\twhile(b)\n\t{\n\t\tif(b&1)\tres=1ll*res*p%mod;\n\t\tp=1ll*p*p%mod;b>>=1; \n\t}\n\treturn res;\n}\ninline int read()\n{\n\tint x=0,f=1;char c=getchar();\n\twhile(c<'0'||c>'9'){if(c=='-')f=-f;c=getchar();}\n\twhile(c>='0'&&c<='9'){x=x*10+c-'0';c=getchar();}\n\treturn x*f;\n}\nint main()\n{\n\tn=read(),m=read(),mod=read();\n\tif(mod==1)\treturn puts(\"0\"),0;\n\tfor(int i=1;i<=n;i++)\tf[i]=i;\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tint u=read(),v=read();\n\t\tint p=find(u),q=find(v);\n\t\tf[q]=p;\n\t}\n\tfor(int i=1;i<=n;i++)\tsiz[find(i)]++;\n\tfor(int i=1;i<=n;i++)\n\t\tif(siz[i])\tk++,ans=1ll*ans*siz[i]%mod;\n\tif(k<2)\tans=1;\n\telse ans=1ll*ans*qpow(n,k-2)%mod;\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n```\n\n",
        "postTime": 1638885941,
        "uid": 181775,
        "name": "_Fontainebleau_",
        "ccfLevel": 0,
        "title": "\u300cCF156D Clues\u300d"
    }
]
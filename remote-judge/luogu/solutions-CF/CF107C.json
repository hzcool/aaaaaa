[
    {
        "content": "\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\uff1a[\u70b9\u8fd9\u91cc](https://www.cnblogs.com/acceptedzhs/p/13972263.html)\n\n\u7f51\u4e0a\u7684\u9898\u89e3\u5927\u90fd\u4e0d\u662f\u5f88\u660e\u767d\uff08\u6ce8\u91ca\u90fd\u6ca1\u6709\uff09\uff0c\u6211\u8fd9\u91cc\u53c2\u8003\u4e86\u4e00\u4e0b\u8fd9\u7bc7\u9898\u89e3\uff1a[\u70b9\u8fd9\u91cc](https://blog.csdn.net/alan_cty/article/details/78335605)\uff0c\u540c\u65f6\u52a0\u5165\u4e86\u5f88\u591a\u6ce8\u91ca\u65b9\u4fbf\u5927\u5bb6\u7406\u89e3\u3002\n\n\u9996\u5148\uff0c$n$\u5f88\u5c0f\uff0c\u5bb9\u6613\u60f3\u5230\u72b6\u538b\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4f9d\u6b21\u786e\u5b9a\u6392\u5217\u4e2d\u6bcf\u4e00\u4f4d\u5e94\u8be5\u5750\u54ea\u4e2a\u4eba\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\u67d0\u4e00\u4f4d\u9009\u8f88\u5206\u4e3a$j$\u7684\u4eba\u7684\u65b9\u6848\u6570\u3002\n\n\u8bbe$f_{i,j}$\u8868\u793a\u5f53\u524d\u72b6\u6001\u7684\u65b9\u6848\u6570\uff0c\u5176\u4e2d$i$\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\uff0c\u503c\u4e3a$1$\u7684\u4f4d\u8868\u793a\u5bf9\u5e94\u7684\u5ea7\u4f4d\u5df2\u7ecf\u5b89\u6392\u7ed9\u4e86\u8f88\u5206\u4e3a$1 \\sim cnt_i$\u7684\u4eba\uff08$1$\u4e3a\u6700\u8001\uff0c$cnt_i$\u8868\u793a$i$\u5728\u4e8c\u8fdb\u5236\u4e0b$1$\u7684\u4f4d\u6570\uff09\uff0c$j$\u8868\u793a\u7b2c$x$\u4e2a\u5ea7\u4f4d\u786e\u5b9a\u7531\u8f88\u5206\u4e3a$j$\u7684\u4eba\u6765\u5750\u3002\n\n\u6700\u7ec8\u7ed3\u679c\u662f$f_{{2^n-1},y}$\uff0c$y \\in [1,n]$\u3002\n\n\u5982\u4f55\u8f6c\u79fb\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u8f88\u5206$cnt_i+1$\u7684\u4eba\u5750\u54ea\u4e2a\u4f4d\u7f6e\uff0c\u8fdb\u884c\u8f6c\u79fb\u5373\u53ef\u3002\uff08\u5177\u4f53\u89c1\u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\uff09\n\nCode:\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\ntypedef long long ll;\nconst int BIT=(1<<17),M=110,N=25;\nint n,m,cnt[BIT],a[M];\nll f[BIT][N],b[N],p[N],year;\n//f[i][j]\n//i\u4e2d1\u7684\u4f4d\u8868\u793a\u5bf9\u5e94\u7684\u5ea7\u4f4d\u5df2\u7ecf\u5b89\u6392\u7ed9\u4e86\u8f88\u5206\u4e3a1~cnt[i]\u7684\u4eba(1\u4e3a\u6700\u8001)\n//j\u8868\u793a\u7b2cx\u4f4d\u786e\u5b9a\u5b89\u6392\u7ed9\u8f88\u5206\u4e3aj\u7684\u4eba\u5750\n//b[i]\u8868\u793a\u8f88\u5206\u4e3ai\u7684\u4eba\u5728\u54ea\u4e2a\u4f4d\u7f6e\n\n//\u8f88\u5206\u4e3a1~n\uff0c1\u4e3a\u6700\u8001\uff0cn\u4e3a\u6700\u5e74\u8f7b\nvoid solve(int x){\n    memset(f,0,sizeof(f));\n    f[0][0]=1;int maxb=(1<<n);\n    //\u6309\u8f88\u5206\u4ece\u8001\u5230\u5e74\u8f7b\u4f9d\u6b21\u5b89\u6392\u5ea7\u4f4d\n    for(int i=0;i<maxb;i++){\n        for(int j=0;j<=n;j++){\n            int y=cnt[i]+1;\n            if(b[y]){//\u82e5\u8f88\u5206\u4e3acnt[i]+1\u7684\u4eba\u5df2\u7ecf\u5b89\u6392\u4e86\u5ea7\u4f4d\n                //\u5b89\u6392\u8fc7\u7684\u5ea7\u4f4d\u4e0d\u6ee1\u8db3\u8fd9\u4e00\u4e2a\u5ea7\u4f4d\u7684\u8981\u6c42\uff0ccontinue\n                if((a[b[y]]&i)!=a[b[y]]) continue;\n                //\u5f53\u524d\u5ea7\u4f4d\u5df2\u7ecf\u88ab\u5360\u7528\u4e86\uff0c\u4e5fcontinue\n                if((1<<(b[y]-1)&i)==(1<<b[y]-1)) continue;\n                //\u5982\u679c\u8f88\u5206\u4e3acnt[i]+1\u7684\u4eba\u521a\u597d\u5750\u5728x\u4f4d\u7f6e\u4e0a\uff0c\u90a3\u4e48j=cnt[i]+1\n                if(b[y]==x) f[i|(1<<b[y]-1)][y]+=f[i][j];\n                //\u5426\u5219\u7ee7\u7eed\u4fdd\u6301\u539f\u6765\u7684j\n                else f[i|(1<<b[y]-1)][j]+=f[i][j];\n            }\n            else{\n                for(int k=1;k<=n;k++){//\u679a\u4e3e\u8f88\u5206\u4e3acnt[y]+1\u7684\u4eba\u5e94\u8be5\u653e\u54ea\u4e2a\u4f4d\u7f6e\n                    if(!(i&(1<<k-1))){\n                        if((a[k]&i)!=a[k]) continue;\n                        //\u4e0e\u4e0a\u9762\u7c7b\u4f3c\u7684\u8f6c\u79fb\n                        if(k==x) f[i|(1<<k-1)][y]+=f[i][j];\n                        else f[i|(1<<k-1)][j]+=f[i][j];\n                    }\n                }\n            }\n        }\n    }\n}\n\nint main(){\n    scanf(\"%d%lld%d\",&n,&year,&m);year-=2000;\n    //cnt[i]\u8868\u793ai\u5728\u4e8c\u8fdb\u5236\u4e0b1\u7684\u4e2a\u6570\n    for(int i=1;i<BIT;i++) cnt[i]=cnt[i^(i&(-i))]+1;\n    for(int i=1;i<=m;i++){\n        int x,y;scanf(\"%d%d\",&x,&y);\n        a[y]|=(1<<x-1);\n        //a[i]\u662f\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\uff0c\u5176\u4e2d1\u7684\u4f4d\u8868\u793a \u8fd9\u4e00\u4f4d\u5bf9\u5e94\u7684\n        //\u5ea7\u4f4d\u4e0a\u5750\u7684\u4eba \u7684\u8f88\u5206 \u5fc5\u987b\u6bd4 i\u5ea7\u4f4d\u4e0a\u5750\u7684\u4eba \u7684\u8f88\u5206 \u5927\n    }\n    for(int i=1;i<=n;i++){\n        solve(i);ll sum=0;\n        for(int j=1;j<=n;j++){\n            if(!b[j]&&sum+f[(1<<n)-1][j]>=year){\n                //\u521a\u597d\u52a0\u4e0a\u8fd9\u4e2a\u4f4d\u7f6e\u5750\u8f88\u5206\u4e3aj\u7684\u4eba\u7684\u65b9\u6848\u6570\u53ef\u4ee5\u5927\u8fc7year\n                b[j]=i;p[i]=j;\n                year-=sum;break;\n            }\n            sum+=f[(1<<n)-1][j];\n        }\n        if(!p[i]){//\u8fd9\u4e00\u4f4d\u65e0\u6cd5\u786e\u5b9a\uff0c\u65e0\u89e3\n            puts(\"The times have changed\");\n            return 0;\n        }\n    }\n    for(int i=1;i<=n;i++) printf(\"%lld \",p[i]);\n    puts(\"\");\n    return 0;\n}\n\n```\n\n\n\n\n\n",
        "postTime": 1605315734,
        "uid": 107236,
        "name": "Zesty_Fox",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF107C \u3010Arrangement\u3011"
    },
    {
        "content": "\u4e00\u4e9b\u7ea6\u5b9a\uff1a\u7528 $cnt_x$ \u6765\u4ee3\u8868\u96c6\u5408 $x$ \u7684\u5143\u7d20\u4e2a\u6570\uff1b\u5982\u679c $x$ \u662f\u4e00\u4e2a\u96c6\u5408\uff0c$y$ \u662f\u4e00\u4e2a\u5143\u7d20\uff0c\u90a3\u4e48 $x+y$ \u5c31\u662f\u628a\u5143\u7d20\u653e\u5165\u96c6\u5408\u5f62\u6210\u7684\u65b0\u96c6\u5408\u3002\n\n\u5410\u69fd\u539f\u7ffb\u8bd1\u3002\u539f\u7ffb\u8bd1\u628a\u6bcf\u4e2a\u9650\u5236\u6761\u4ef6\u7ffb\u8bd1\u6210\u4e86\u7b2c $a_i$ \u4e2a\u6570\u5e94\u8be5\u6392\u5728\u7b2c $b_i$ \u4e2a\u6570\u4e4b\u524d\u8f93\u51fa\uff0c\u800c\u4e14\u628a\u7b2c $k$ \u5c0f\u7ffb\u8bd1\u6210\u4e86\u7b2c $k$ \u5927\u3002\u522b\u8bf4\u8fd9\u8fd8\u771f\u7684\u662f\u4e00\u9053\u53ef\u4ee5\u505a\u7684\u9898\u76ee\uff0c\u751a\u81f3\u53ef\u4ee5\u8fc7\u6837\u4f8b\u3002\u7136\u540e\u6211\u5c31\u5361\u4e86\u4e00\u4e2a\u5c0f\u65f6\uff0c\u76f4\u5230\u8bfb\u4e86\u4e00\u4e0b\u539f\u9898\u9762\u3002\u5c31\u5f88\u60b2\u60e8\u3002\n\n\u53ef\u4ee5\u505a\u4e00\u4e0b [CF123C](https://www.luogu.com.cn/problem/CF123C)\uff0c\u4e8c\u8005\u601d\u8def\u6709\u8bb8\u591a\u76f8\u4f3c\u4e4b\u5904\uff0c\u90fd\u662f\u7ed9\u5b9a\u4e86\u4e00\u4e9b\u9650\u5236\u6761\u4ef6\uff0c\u90fd\u662f\u7ed9\u5b9a\u4e86\u4e00\u4e2a\u4f18\u5148\u987a\u5e8f\uff0c\u65b9\u6cd5\u4e5f\u4e00\u6837\uff0c\u5373\u6309\u4f18\u5148\u987a\u5e8f\u679a\u4e3e\u4f4d\u7f6e\uff0c\u7136\u540e\u4ece\u5c0f\u5230\u5927\u679a\u4e3e\u8fd9\u4e2a\u4f4d\u7f6e\u653e\u4ec0\u4e48\u6570\uff08\u90a3\u9053\u9898\u662f\u62ec\u53f7\uff09\uff0c\u7136\u540e\u7528 DP \u6c42\u51fa\u76ee\u524d\u786e\u5b9a\u4e00\u4e9b\u4f4d\u7f6e\u4e4b\u540e\u7684\u65b9\u6848\u6570\uff0c\u548c\u6240\u6c42\u7684 $k$ \u6bd4\u8f83\u3002\u5982\u679c\u591a\u4e86\u4ee3\u8868\u8fd9\u4e2a\u4f4d\u7f6e\u662f\u6b63\u786e\u7684\uff0c\u5982\u679c\u5c11\u4e86\u4ee3\u8868\u8fd9\u4e2a\u4f4d\u7f6e\u653e\u7684\u6570\u8fd8\u4e0d\u591f\u5927\uff0c\u90a3\u4e48\u628a $k$ \u51cf\u53bb\u6b64\u65f6\u6c42\u51fa\u7684\u65b9\u6848\u6570\u7136\u540e\u7ed9\u8fd9\u4e2a\u4f4d\u7f6e\u586b\u4e0a\u4e00\u4e2a\u7a0d\u5927\u7684\u6570\u5373\u53ef\u3002\n\n\u5177\u4f53\u5230\u8fd9\u9053\u9898\u7684 DP \u8fc7\u7a0b\uff0c\u7531\u4e8e $n$ \u5f88\u5c0f\uff0c\u60f3\u5230\u7528\u72b6\u538b DP\u3002\u7528 $f_x$ \u6765\u4ee3\u8868\u5df2\u7ecf\u5b89\u6392\u4e86 $1$ \u5230 $cnt_x$ \u7684\u6570\u4e86\uff0c\u8fd9\u4e9b\u6570\u5bf9\u5e94\u7684\u4f4d\u7f6e\u96c6\u5408\u662f $x$ \u7684\u65b9\u6848\u6570\uff0c\u8f6c\u79fb\u4e0a\u679a\u4e3e\u7b2c $cnt_x+1$ \u4e2a\u6570\u653e\u5728\u54ea\u4e2a\u4f4d\u7f6e\u3002\u4e00\u4e2a\u5408\u6cd5\u7684\u4f4d\u7f6e $y$ \u5e94\u8be5\u6ee1\u8db3\u4ee5\u4e0b\u56db\u4e2a\u6761\u4ef6\uff1a\n\n- $y$ \u4e0d\u5e94\u8be5\u5728 $x$ \u96c6\u5408\u4e2d\u3002\n\n- \u4ee4\u6240\u6709\u88ab\u8981\u6c42\u5728 $y$ \u4e4b\u524d\u7684\u4f4d\u7f6e\u96c6\u5408\u4e3a $s$ \uff0c\u90a3\u4e48 $s$ \u5e94\u8be5\u662f $x$ \u7684\u5b50\u96c6\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e9b\u4f4d\u7f6e\u4e00\u5b9a\u5206\u914d\u5230\u4e86\u6bd4\u5f53\u524d $cnt_x+1$ \u5c0f\u7684\u6570\u3002\n\n- \u4e4b\u524d $cnt_x+1$ \u6ca1\u6709\u5206\u914d\u597d\u4f4d\u7f6e\uff0c\u6216\u8005\u5206\u914d\u4e86\u5e76\u4e14 $y$ \u5c31\u662f\u8fd9\u4e2a\u4f4d\u7f6e\u3002\n\n- \u4e4b\u524d\u4f4d\u7f6e $y$ \u6ca1\u6709\u5206\u914d\u8fc7\u6570\uff0c\u6216\u8005\u5206\u914d\u4e86\u6570\u5e76\u4e14 $cnt_x+1$ \u5c31\u662f\u8fd9\u4e2a\u6570\u3002\n\n\u6ee1\u8db3\u4ee5\u4e0a\u56db\u4e2a\u6761\u4ef6\u5c31\u8bf4\u660e\u72b6\u6001 $x$ \u53ef\u4ee5\u8f6c\u79fb\u5230\u72b6\u6001 $x+y$ \uff0c\u7d2f\u52a0\u5373\u53ef\u3002\u4e8b\u5b9e\u8bc1\u660e\u5e76\u4e0d\u9700\u8981\u518d\u5f00\u4e00\u7ef4\uff0c\u7136\u800c\u4e0d\u77e5\u4e3a\u4f55\u5b83\u4eec\u518d\u5f00\u4e00\u7ef4\u7684 DP \u8dd1\u5f97\u6bd4\u6211\u5feb\uff0c\u545c\u545c\u545c\u3002\n\n\u4ee3\u7801\u6ca1\u4ec0\u4e48\u7ec6\u8282\u3002\n\n```cpp\n#include<bits/stdc++.h>\n//#define feyn\n#define int long long\nusing namespace std;\nconst int N=17;\nconst int M=1<<N-1;\nconst int maxn=1e18;\ninline void read(int &wh){\n    wh=0;int f=1;char w=getchar();\n    while(w<'0'||w>'9'){if(w=='-')f=-1;w=getchar();}\n    while(w<='9'&&w>='0'){wh=wh*10+w-'0';w=getchar();}\n    wh*=f;return;\n}\ninline void add(int &s1,int s2){s1+=s2;if(s1>maxn)s1=maxn;}\n\nint m,n,rk,s[N],f[M],bl[N],to[N],cnt[M]={1};\ninline int solve(bool ws){\n\tmemset(f,0,sizeof(f));f[0]=1;\n\tfor(int i=0;i<(1<<m);i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tif((i&(1<<j-1))!=0||(s[j]&i)!=s[j]||(to[j]!=0&&cnt[i]!=to[j])||(bl[cnt[i]]!=0&&bl[cnt[i]]!=j))continue;\n\t\t\tadd(f[i+(1<<j-1)],f[i]);\n\t\t}\n\t}\n\treturn f[(1<<m)-1];\n}\n\nsigned main(){\n\t\n\t#ifdef feyn\n\tfreopen(\"in.txt\",\"r\",stdin);\n\t#endif\n\t\n\tread(m);read(rk);read(n);rk-=2000;int s1,s2,ch=0,pl,nd;\n\twhile(n--){read(s1);read(s2);s[s2]|=(1<<s1-1);}\n\tfor(int i=1;i<(1<<m);i++)cnt[i]=cnt[i>>1]+(i&1);\n\tfor(int i=1;i<=m;i++){\n\t\tfor(pl=1;pl<=m;pl++){\n\t\t\tif(((1<<pl-1)&ch)!=0||bl[pl])continue;\n\t\t\tbl[pl]=i;to[i]=pl;\n\t\t\tif((nd=solve(false))>=rk)break;\n\t\t\telse rk-=nd,bl[pl]=0;\n\t\t\t\n\t\t}\n\t\tif(pl>m){printf(\"The times have changed\\n\");return 0;}\n\t\tprintf(\"%I64d \",pl);\n\t}\n\t\n\treturn 0;\n}\n```",
        "postTime": 1662805646,
        "uid": 302383,
        "name": "Feyn",
        "ccfLevel": 0,
        "title": "CF107C"
    }
]
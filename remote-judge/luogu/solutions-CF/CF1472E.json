[
    {
        "content": "# CF1472E\n\n## [CF\u4f20\u9001\u95e8](http://codeforces.com/problemset/problem/1472/E)\n## [\u6d1b\u8c37\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1472E)\n\n## $QuestionMeaning$\n\n$Polycarp$\u60f3\u8981\u7ed9\u4ed6\u7684\u670b\u53cb\u4eec\u62cd\u4e00\u5f20\u7167\u7247\uff0c\u4ed6\u7684\u670b\u53cb\u4eec\u90fd\u6709$h$\uff08\u8eab\u9ad8\uff09\u3001$w$\uff08\u5bbd\u5ea6\uff09\u4e24\u4e2a\u6570\u503c\uff0c\u5f53\u4e00\u4e2a\u4eba$A$\u7684\u8eab\u9ad8\u6bd4\u53e6\u5916\u4e00\u4e2a\u4eba$B$\u7684\u8eab\u9ad8\u77ee\uff0c\u4e14\u5bbd\u5ea6\u6bd4\u4ed6\u5c0f\u65f6\uff0c$A$\u53ef\u4ee5\u7ad9\u5728$B$\u7684\u524d\u9762\uff0c\u6216\u8005\u5f53$A$\u8eab\u9ad8\u6bd4$B$\u5bbd\u5ea6\u5c0f\u65f6\uff0c\u4e14\u5bbd\u5ea6\u6bd4$B$\u8eab\u9ad8\u5c0f\u65f6\uff0c$A$\u53ef\u4ee5\u8eba\u5728$B$\u524d\u9762\uff08\u5c0f\uff0c\u610f\u4e3a\u4e25\u683c\u5c0f\u4e8e\uff09\u3002\n\n\u73b0\u5728$Polycarp$\u60f3\u77e5\u9053\u6bcf\u4e2a\u4eba\u662f\u5426\u6709\u5bf9\u5e94\u7684\u4eba\u53ef\u4ee5\u7ad9\u6216\u8eba\u5728\u4ed6\u7684\u524d\u9762\uff0c\u5982\u679c\u6709\uff0c\u5219\u8f93\u51fa\u90a3\u4e2a\u4eba\u7684\u7f16\u53f7\uff0c\u82e5\u6709\u591a\u4e2a\uff0c\u5219\u8f93\u51fa\u4efb\u610f\u4e00\u4e2a\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8f93\u51fa$-1$\u3002\n\n## $Solution$\n\n\u8003\u8651\u8d2a\u5fc3\uff1a\n\n\u8bbe\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a$i$\uff08$1 \\leq i \\leq n$\uff09$w > h$\n\n\u8bbe\u6709\u4e0b\u6807\u4e3a$i$\u3001$j$\u7684\u4e24\u4e2a\u5c0f\u670b\u53cb\uff0c\u4e14\u4e24\u4e2a\u5c0f\u670b\u53cb\u7684$h$\u548c$w$\u6ee1\u8db3$1$\u5f0f\u65f6\uff1a\n$$\nw_i < w_j\n$$\n\u6b64\u65f6\u591a\u4e86\u4e00\u4e2a\u4e0b\u6807\u4e3a$k$\u5c0f\u670b\u53cb\uff0c\u4e14\u4e0e\u4e0b\u6807\u4e3a$j$\u7684\u5c0f\u670b\u53cb\u7684$h$\u3001$w$\u6ee1\u8db3$2$\u5f0f\u65f6\uff1a\n$$\nw_j < w_k\n$$\n\u90a3\u4e48\u4e09\u4e2a\u5c0f\u670b\u53cb\u4e00\u5b9a\u6ee1\u8db3$3$\u5f0f\uff1a\n$$\nw_i < w_j < w_k\n$$\n\u7531\u6b64\u53ef\u5f97\uff0c\u82e5\u6709\u4e00\u4e2a\u6ee1\u8db3\u4e86$1$\u5f0f\u7684\u60c5\u51b5\u4e0b\uff0c\u82e5\u6ee1\u8db3$2$\u5f0f\uff0c\u90a3\u4e48$i$\u5c31\u53ef\u4ee5\u5339\u914d$j$\uff0c$j$\u5c31\u53ef\u4ee5\u5339\u914d$k$\u3002\n\n\u5219\u5c06\u5176\u6392\u5e8f\u540e\u5904\u7406\u5373\u53ef\u3002\n\n## $Code$\n```\n#include <algorithm>\n#include <iostream>\n\nusing namespace std;\n\nconst int kMaxN = 2e5 + 1;\n\nstruct E {\n  int h, w, p;\n} e[kMaxN];\nint l[kMaxN];\n\nint t, n, p;\n\nint main() {\n  cin >> t;\n  while (t--) {\n    cin >> n;\n    for (int i = 1; i <= n; i++) {\n      cin >> e[i].h >> e[i].w;\n      if (e[i].h > e[i].w) {\n        swap(e[i].h, e[i].w);\n      }\n      l[i] = i;\n    }\n    sort(l + 1, l + 1 + n, [](int i, int j) { return e[i].h < e[j].h || (e[i].h == e[j].h && e[i].w > e[j].w); });\n    p = l[1];\n    for (int i = 1; i <= n; i++) {\n      if (e[l[i]].w > e[p].w) {\n        e[l[i]].p = p;\n      } else {\n        e[l[i]].p = -1;\n        p = l[i];\n      }\n    }\n    for (int i = 1; i <= n; i++) {\n      cout << e[i].p << \" \";\n    }\n    cout << endl;\n  }\n  return 0;\n}\n```",
        "postTime": 1611473148,
        "uid": 369251,
        "name": "\u80d6\u5934\u9c7c\u5b66\u5458",
        "ccfLevel": 5,
        "title": "CF1472E"
    },
    {
        "content": "~~\u6392\u5e8f+\u8d2a\u5fc3\u6c34\u9898~~\n\n## \u601d\u8def\n\n\u9996\u5148\u4f60\u5148\u8981\u60f3\u660e\u767d\u8fd9\u4e2a\u9898\u5230\u5e95\u5565\u610f\u601d\u3002\u8bf4\u767d\u4e86\uff0c\u5c31\u662f\u5bf9\u4e8e\u4e24\u4e2a\u4e8c\u5143\u7ec4$(x1,y1)$\u548c$(x2,y2)$\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u4e8c\u5143\u7ec4\u4e2d\u7684\u6700\u5927\u503c\u5927\u4e8e\u7b2c\u4e8c\u4e2a\u4e8c\u5143\u7ec4\u4e2d\u7684\u6700\u5927\u503c\uff0c\u7b2c\u4e00\u4e2a\u4e8c\u5143\u7ec4\u4e2d\u7684\u6700\u5c0f\u503c\u5927\u4e8e\u7b2c\u4e8c\u4e2a\u4e8c\u5143\u7ec4\u4e2d\u7684\u6700\u5c0f\u503c\uff0c\u90a3\u4e48\u5c31\u7b26\u5408\u6761\u4ef6\u3002\n\n\u60f3\u5230\u8fd9\u91cc\uff0c\u8fd9\u4e2a\u9898\u5176\u5b9e\u5df2\u7ecf\u5207\u4e86\u3002\u9996\u5148\u628a$maxx$\u548c$minn$\u5b58\u5230\u7ed3\u6784\u4f53\u91cc\uff0c\u6309\u7167\u8eab\u9ad8\u6392\u5e8f\u3002\u8fd9\u6837\u6211\u4eec\u6b63\u7740\u5faa\u73af\u7684\u65f6\u5019\u4f1a\u53d1\u73b0\uff0c\u5bf9\u4e8e\u7b2c$x$\u4e2a\u4eba\uff0c\u7b26\u5408\u6761\u4ef6\u7684\u4eba\uff08\u80fd\u7ad9\u5230\u4ed6\u524d\u9762\u7684\u4eba\uff09\u53ea\u53ef\u80fd\u5728\u4ed6\u524d\u9762\u3002\u8fd9\u6837\u6211\u4eec\u7ef4\u62a4\u4e00\u4e2a\u6700\u5c0f\u503c\uff0c\u4ee3\u8868\u6bcf\u4e2a\u4e8c\u5143\u7ec4\u4e2d**\u8f83\u5c0f\u7684\u90a3\u4e2a\u503c**\u5f97\u6700\u5c0f\u503c\u3002\u4e00\u8fb9\u5faa\u73af\u4e00\u8fb9\u66f4\u65b0\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5728\u5faa\u73af\u5230\u7b2c$x$\u4e2a\u4eba\u7684\u65f6\u5019\uff0c\u4fdd\u5b58\u4e4b\u524d\u7684\u6b21\u5c0f\u503c\uff0c\u548c\u5f53\u524d\u4e8c\u5143\u7ec4\u7684\u6b21\u5c0f\u503c\u6bd4\u8f83\u5373\u53ef\u3002\uff08\u56e0\u4e3a\u524d\u9762\u7684\u4eba\u8f83\u5927\u503c\u4e00\u5b9a\u90fd\u5c0f\u4e8e\u7b2c$x$\u4e2a\u4eba\u7684\u8f83\u5927\u503c\uff09\u3002\n\n## Code\n```\n#include<iostream>\n#include<cstdio>\n#include<algorithm>\n#include<algorithm>\n#include<cstring>\n#include<set>\n#include<queue>\nusing namespace std;\nconst int N=200005,INF=2147483647;\nint T,n,numm,maxn,minx;\nint ans[N];\nstruct People{\n\tint maxx,minn,num;\n}peo[N];\nbool cmp(People a,People b){\n\treturn a.maxx<b.maxx;\n}\nbool cmp2(People a,People b){\n\treturn a.num<b.num;\n}\nint main()\n{\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tscanf(\"%d\",&n);\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tans[i]=-1;\n\t\t}\n\t\tfor(int i=1,a,b;i<=n;i++){\n\t\t\tscanf(\"%d%d\",&a,&b);\n\t\t\tpeo[i].maxx=max(a,b);\n\t\t\tpeo[i].minn=min(a,b);\n\t\t\tpeo[i].num=i;\n\t\t}\n\t\tsort(peo+1,peo+1+n,cmp);\n\t\t\n//\t\tfor(int i=1;i<=n;i++){\n//\t\t\tprintf(\"maxx=%d minn=%d num=%d\\n\",peo[i].maxx,peo[i].minn,peo[i].num);\n//\t\t}\n\t\tminx=INF;\n\t\tfor(int i=1,t=i+1;i<=n;i=t){\n\t\t\twhile(peo[i].maxx==peo[t].maxx&&t<=n) t++;//\u63d0\u524d\u628a\u8f83\u5927\u503c\u76f8\u7b49\u7684\u4e8c\u5143\u7ec4\u90fd\u5904\u7406\u51fa\u6765\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u524d\u9762\u7ef4\u62a4\u7684\u6b21\u5c0f\u503c\u7684\u6700\u5c0f\u503c\u6240\u4ee3\u8868\u7684\u4eba\uff08\u6709\u70b9\u7ed5\uff09\u7684\u8f83\u5927\u503c\u4e00\u5b9a\u5c0f\u4e8e\u5f53\u524d\u4eba\u7684\u8f83\u5927\u503c\n\t\t\tfor(int j=i;j<=t-1;j++){\t\t\n\t\t\t\tif(peo[j].minn>minx){\n\t\t\t\t\tans[peo[j].num]=numm;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(int j=i;j<=t-1;j++){\n\t\t\t\tif(peo[j].minn<minx){\n\t\t\t\t\tminx=peo[j].minn;\n\t\t\t\t\tnumm=peo[j].num;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsort(peo+1,peo+1+n,cmp2);\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tprintf(\"%d \",ans[i]);\n\t\t}\n\t\tprintf(\"\\n\");\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1610628089,
        "uid": 306982,
        "name": "\u4e8cgou\u5b50",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1472E \u3010Correct Placement\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u7bc7 Python \u9898\u89e3\u3002\u51c6\u786e\u5730\u8bf4\uff0c\u662f\u4e00\u7bc7 pypy3 \u9898\u89e3\u3002\n\n### \u601d\u8def\n\n\u6211\u4eec\u5148\u5bf9\u6240\u6709\u4eba\u8fdb\u884c\u6392\u5e8f\u3002\n\n\u73b0\u5728\u8ba9\u6211\u4eec\u904d\u5386\u6240\u6709\u7684\u4eba\uff0c\u5728\u6392\u5e8f\u540e\u7684\u6570\u7ec4\u4e2d\u67e5\u627e\u4eba\u7684\u4f4d\u7f6e\uff08\u901a\u8fc7\u4e8c\u5206\u67e5\u627e\uff09\u3002\u663e\u7136\uff0c\u53ea\u6709\u6392\u597d\u5e8f\u7684\u6570\u7ec4\u4e2d\u6bd4\u88ab\u627e\u5230\u7684\u4eba\u665a\u7684\u4eba\u624d\u80fd\u7ad9\u5728\u6211\u4eec\u9762\u524d\uff08\u4ed6\u4eec\u7684\u8eab\u9ad8\u90fd\u4e25\u683c\u4f4e\u4e8e\u6211\u4eec\u7684\u8eab\u9ad8\uff09\u3002\n\n\u5728\u6240\u6709\u8fd9\u4e9b\u4eba\u4e2d\uff0c\u6211\u4eec\u9009\u62e9\u6700\u7626\u7684\u4eba\u3002\u4e3a\u4e86\u5feb\u901f\u627e\u5230\u8fd9\u6837\u7684\u4eba\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u6392\u5e8f\u6570\u7ec4\u7684\u6bcf\u4e2a\u540e\u7f00\u627e\u5230\u4e00\u4e2a\u6700\u7626\u7684\u4eba\u3002\n\n\u4e3a\u4e86\u5904\u7406\u4e00\u4e2a\u4eba\u8eba\u7740\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u4ea4\u6362\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u5e76\u91cd\u590d\u4e0a\u9762\u7684\u7b97\u6cd5\u3002\n\n### \u4ee3\u7801\n\n\u672c\u6765\u4e0d\u60f3\u653e\u4ee3\u7801\u7684\uff0c\u4e3a\u4e86\u8fc7\u5ba1\uff0c\u8fd8\u662f\u653e\u4e0a\u5427\n```python\nimport sys,io,os\ninput=sys.stdin.readline\nfrom collections import *\nimport bisect,math\ndef inp(): return input()\ndef inpu(): return int(inp())\ndef sep(): return map(int,input().split())\ndef strsep(): return map(str,input().split())\ndef lis(): return list(sep())\ndef stringlis(): return list(strsep())\ndef main():\n    how_much_noob_I_am = 1\n    how_much_noob_I_am = inpu()\n    for i in range(how_much_noob_I_am):\n        n=inpu()\n        l=[]\n        m=[]\n        d=defaultdict(int)\n        pp=[]\n        for i in range(n):\n            a,b=sep()\n            l.append([a,b])\n            m.append([a,b])\n            d[(a,b)] = i+1\n            pp.append([a,b])\n        l.sort(key=lambda x:(x[0],x[1]))\n        m.sort(key=lambda x:(x[0],x[1]))\n        mm=[]\n        ll=[]\n        for i in l:\n            ll.append(i[1])\n        for i in m:\n            mm.append(i[1])\n        p=[]\n        ans=float(\"inf\")\n        for i in mm:\n            ans=min(ans,i)\n            p.append(ans)\n        ans=float(\"inf\")\n        r=[]\n        for i in ll:\n            ans=min(ans,i)\n            r.append(ans)\n        ans=[-1]*(n)\n        for i in range(n):\n            if ans[i]!=-1:\n                continue\n            lo=0\n            hi=n-1\n            ans2=-1\n            while(lo<=hi):\n                mid=(lo+hi)//2\n                if r[mid]<pp[i][1]:\n                    hi=mid-1\n                    ans2=mid\n                else:\n                    lo=mid+1\n            if ans2==-1:\n                continue\n            if l[ans2][0]<pp[i][0] and l[ans2][1]<pp[i][1]:\n                ans[i] = d[tuple(l[ans2])]\n        for i in range(n):\n            if ans[i]!=-1:\n                continue\n            lo=0\n            hi=n-1\n            ans2=-1\n            while(lo<=hi):\n                mid=(lo+hi)//2\n                if p[mid]<pp[i][0]:\n                    hi=mid-1\n                    ans2=mid\n                else:\n                    lo=mid+1\n            if ans2==-1:\n                continue\n            if m[ans2][0]<pp[i][1] and m[ans2][1]<pp[i][0]:\n                ans[i] = d[tuple(m[ans2])]\n        print(*ans)\nif __name__ == '__main__':\n    main()\n```",
        "postTime": 1642468721,
        "uid": 542047,
        "name": "EC75",
        "ccfLevel": 0,
        "title": "CF1472E\u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898\u8981\u6c42\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u96c6\u5408 $\\{w_i,h_i\\text\\}$ \u8981\u5728 $n$ \u4e2a\u96c6\u5408\u4e2d\u627e\u5230\u4e00\u4e2a\u96c6\u5408 $\\{w_j,h_j\\text\\}$ \u4f7f\u5f97 $w_i>w_j,h_i>h_j$ \u6216 $w_i>h_j,h_i>w_j$\u3002\n\n\u5bb9\u6613\u53d1\u73b0\uff0c$w_i>h_j,h_i>w_j$ \u5176\u5b9e\u5c31\u662f\u5c06 $w_i$ \u548c $h_i$ \u4e92\u76f8\u4ea4\u6362\u503c\u540e\u9700\u8981\u6ee1\u8db3\u7684\u6761\u4ef6 $w_i>w_j,h_i>h_j$\n\n\u6211\u4eec\u4e0d\u59a8\u6784\u9020 $m$ \u4e2a\u96c6\u5408\uff08\u5206\u522b\u662f $\\{w_1,h_1\\},\\{w_2,h_2\\},\u00b7\u00b7\u00b7,\\{w_m,h_m\\}$\uff09\uff0c\u6ee1\u8db3\u4ee5\u4e0b\u4e09\u4e2a\u6761\u4ef6\uff1a\n\nA\uff1a\u8fd9 $m$ \u4e2a\u96c6\u5408\u662f\u901a\u8fc7\u9898\u76ee\u7ed9\u5b9a\u7684 $n$ \u4e2a\u96c6\u5408\u5220\u6389 $n-m$ \u4e2a\u5f97\u6765\u7684\u3002\n\nB\uff1a$m$ \u8981\u5c3d\u53ef\u80fd\u7684\u5927\n\nC\uff1a\u4fdd\u8bc1 $w_k<w_{k+1}$ \u4e14 $h_k>h_{k+1}$ $(1\\le k<n)$\n\nD\uff1a$h_i$ \u8981\u5c3d\u53ef\u80fd\u7684\u5c0f\n\n\uff08\u4f18\u5148\u7ea7\uff1aA>D>C>B\uff09\n\n\u8fd9\u6837\u6211\u4eec\u5c31\u53ea\u9700\u8981\u4e8c\u5206\u51fa\u6700\u5927\u7684 $a$ \u4f7f\u5f97 $w_a<w_i$\uff08\u5de6\u9762\u7684 $w_a$ \u662f\u6784\u9020\u51fa\u6765\u7684\uff0c\u53f3\u9762\u7684 $w_i$ \u662f\u9898\u76ee\u7ed9\u5b9a\u7684\uff0c\u4ee3\u8868\u524d $a$ \u4e2a\u96c6\u5408\u6ee1\u8db3\u9898\u76ee\u4e2d $w_i>w_j$ \u7684\u8981\u6c42\uff09\u4e8c\u5206\u51fa\u6700\u5c0f\u7684 $b$ \u4f7f\u5f97 $h_b<h_i$\uff08\u540c\u4e0a\uff0c\u4ee3\u8868\u540e $(m-b+1)$ \u4e2a\u96c6\u5408\u6ee1\u8db3\u9898\u76ee\u4e2d $h_i>h_j$ \u7684\u8981\u6c42\uff09\u3002\u7136\u540e\u5224\u65ad $a$ \u662f\u5426\u5927\u4e8e\u7b49\u4e8e $b$\uff08\u5373\u662f\u5426\u6709\u96c6\u5408\u6ee1\u8db3\u9898\u76ee\u6240\u6709\u8981\u6c42\uff09\uff0c\u82e5\u662f\uff0c\u5219\u8f93\u51fa $a$ \u5bf9\u5e94\u7684\u7f16\u53f7\u5373\u53ef\u3002\n\n\u7136\u540e\u4ea4\u6362 $w_i$ \u548c $h_i$ \u7684\u503c\uff08\u6307\u9898\u76ee\u4e2d\u7ed9\u5b9a\u7684 $w_i$ \u548c $h_i$\uff09\uff0c\u91cd\u590d\u4e0a\u4e00\u6b21\u64cd\u4f5c\u3002\n\n\u82e5\u4e24\u6b21\u64cd\u4f5c\u90fd\u6ee1\u8db3 $a<b$\u3002\u5c31\u8bf4\u660e\u6ca1\u6709\u96c6\u5408\u53ef\u4ee5\u6ee1\u8db3\u9898\u76ee\u4e2d\u7684\u6761\u4ef6\uff0c\u6b64\u65f6\u5e94\u8f93\u51fa`-1`\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(\\sum n\\log n)$",
        "postTime": 1611389893,
        "uid": 80614,
        "name": "ZCPB",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1472E \u3010Correct Placement\u3011"
    },
    {
        "content": "## \u539f\u9898\u7ffb\u8bd1\uff1a\n\nPolycarp \u60f3\u8981\u7ed9\u4ed6\u7684\u670b\u53cb\u4eec\u62cd\u4e00\u5f20\u7167\u7247\uff0c\u4ed6\u7684\u670b\u53cb\u4eec\u90fd\u6709h\uff08\u8eab\u9ad8\uff09\u3001w\uff08\u5bbd\u5ea6\uff09\u4e24\u4e2a\u6570\u503c\uff0c\u5f53\u4e00\u4e2a\u4eba $A$ \u7684\u8eab\u9ad8\u6bd4\u53e6\u5916\u4e00\u4e2a\u4eba $B$ \u7684\u8eab\u9ad8\u77ee\uff0c\u4e14\u5bbd\u5ea6\u6bd4\u4ed6\u5c0f\u65f6\uff0c $A$ \u53ef\u4ee5\u7ad9\u5728 $B$ \u7684\u524d\u9762\uff0c\u6216\u8005\u5f53 $A$ \u8eab\u9ad8\u6bd4 $B$ \u5bbd\u5ea6\u5c0f\u65f6\uff0c\u4e14\u5bbd\u5ea6\u6bd4 $B$ \u8eab\u9ad8\u5c0f\u65f6\uff0c$A$ \u53ef\u4ee5\u8eba\u5728 $B$ \u524d\u9762\uff08\u5c0f\uff0c\u610f\u4e3a\u4e25\u683c\u5c0f\u4e8e\uff09\u3002\n\n\u73b0\u5728 Polycarp \u60f3\u77e5\u9053**\u6bcf\u4e2a\u4eba**\u662f\u5426\u6709\u5bf9\u5e94\u7684\u4eba\u53ef\u4ee5\u7ad9\u6216\u8eba\u5728\u4ed6\u7684\u524d\u9762\uff0c\u5982\u679c\u6709\uff0c\u5219\u8f93\u51fa\u90a3\u4e2a\u4eba\u7684\u7f16\u53f7\uff0c\u82e5\u6709\u591a\u4e2a\uff0c\u5219\u8f93\u51fa**\u4efb\u610f\u4e00\u4e2a**\uff0c\u5982\u679c\u6ca1\u6709\u5219\u8f93\u51fa-1\u3002\n## Solution\uff1a\n\u8fd9\u9053CF1700\u5206\u7684\u9898\u76ee\u5361\u4e86\u6211\u597d\u51e0\u5929\uff08\n\n\u96be\u5ea6\u4f30\u8ba1\u4e3a\u7eff\u9898\u6216\u8005\u9ec4\u9898\uff1f\n\n\u90a3\u4e48\u6211\u4eec\u4e00\u5f00\u59cb\u6700\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u4e5f\u8bb8\u5927\u5bb6\u90fd\u4f1a\u60f3\u5230\u4e00\u4e2a\u4e00\u4e2a\u53bb\u6bd4\u8f83\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(N^2)$\uff0c\u5f53\u573a\u7206\u70b8\u3002\n\n\u4e8e\u662f\u6211\u4eec\u60f3\u5230\u5148\u7ed9\u5176\u4e2d\u4e00\u4e2a\u5173\u952e\u5b57\u6392\u5e8f\uff0c\u518d\u53bb\u7ef4\u62a4\u53e6\u5916\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u7136\u800c\u6700\u7c97\u66b4\u7684\u6bd4\u8f83\u8fd8\u662f$O(N^2)$\u3002\n\n\u4e8e\u662f\u6211\u4eec\u60f3\u8981\u4f18\u5316\u8fd9\u4e2a\u6bd4\u8f83\u8fc7\u7a0b\uff0c\u600e\u4e48\u529e\uff1f\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u6392\u5e8f\u8fc7\u540e\uff0c\u6211\u4eec\u53ea\u9700\u8981\u627e\u6392\u5728\u5f53\u524d\u8fd9\u4e2a\u6570\u524d\u9762\u7684\u6570\u5c31\u884c\u4e86\uff0c\u540c\u65f6\uff0c\u7531\u4e8e\u8f93\u51fa\u7684\u662f\u4efb\u610f\u4e00\u4e2a\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u7b26\u5408\u5f53\u524d\u8fd9\u4e2a\u6570\u7684\u7b54\u6848\uff0c\u4e5f\u6709\u53ef\u80fd\u662f\u4e0b\u4e00\u4e2a\u6570\u7684\u7b54\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u8981\u627e\u51fa\u5728\u8fd9\u4e2a\u6570\u4e4b\u524d\u7684\u7684\u5c3d\u53ef\u80fd\u5c0f\u7684\u6570\uff0c\u7136\u540e\u4e0d\u65ad\u66f4\u65b0\u6700\u5c0f\u6570\uff0c\u5e76\u5224\u65ad\u6b64\u6570\u662f\u5426\u7b26\u5408\u7b54\u6848\u5373\u53ef\u3002\u770b\u4e0d\u61c2\u7684\u540c\u5b66\u8fd8\u53ef\u4ee5\u770b\u770b\u4ee3\u7801\u4e2d\u7684\u6ce8\u91ca\u3002\n\n~~\u65f6\u95f4\u590d\u6742\u5ea6\u6bd4\u8f83\u7384\u5b66\uff0c\u6211\u81ea\u5df1\u4e5f\u65e0\u6cd5\u8ba1\u7b97\uff08\u60b2~~\n\n```cpp\n//\u6d1b\u749f\u306e\u4ee3\u7801( \u2022\u0300 \u03c9 \u2022\u0301 )\u2727\n#include<bits/stdc++.h> \nusing namespace std;\nint ans[1919810];\nstruct cccp\n{\n    int h, w;\n}a[1919810];\nint t, n;\ninline int read()//\u5feb\u8bfb\n{\n    int x = 0, f = 1;\n    char c = getchar();\n    while (c < '0' || c > '9')\n    {\n        if (c == '-')\n            f = -1;\n        c = getchar();\n    }\n    while (c >= '0' && c <= '9')\n    {\n        x = (x << 3) + (x << 1) + (c ^ '0');\n        c = getchar();\n    }\n    return x * f;\n}\nbool cmp(cccp a, cccp b)\n{\n    return a.h < b.h;\n}\nint main()\n{\n    t = read();\n    while (t--)\n    {\n\n        n = read();\n        vector<cccp> v(n);\n        for (int i = 0;i < n;i++)\n        {\n            ans[i] = -2;\n            a[i].h = read();\n            a[i].w = read();\n            if (a[i].h > a[i].w) swap(a[i].h, a[i].w);//\u4fdd\u8bc1h\u5e8f\u5217\u4e3a\u5c0f\u7684\u6570\uff08\u4f46\u662f\u7528\u5927\u7684\u8fdb\u884c\u6bd4\u8f83\u4e5f\u884c\uff0c\u4f46\u4e00\u5b9a\u662f\u4e24\u4e2a\u4e2d\u6700\u5c0f\u6216\u6700\u5927\n            v[i] = cccp{ a[i].h,i };\n        }\n        sort(v.begin(), v.end(), cmp);//\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u53ea\u7ef4\u62a4\u53e6\u5916\u4e00\u4e2a\u65e0\u5e8f\u7684\u5e8f\u5217\n        int j = 0, qwq = -1;//qwq\u7528\u4e8e\u5b58\u50a8\u5f53\u524d\u6b21\u6570\u7b26\u5408\u8981\u6c42\u7684\u6700\u5c0f\u7684\u6570\u7684\u5e8f\u53f7\n        for (int i = 0;i < n;i++)\n        {\n            int nw = v[i].w;//\u5f53\u524d\u6570\u5b57\u7684\u5e8f\u53f7\n            while (a[nw].h > v[j].h)//\u627e\u51fa\u5728\u8fd9\u4e2a\u6570\u4e4b\u524d\uff08\u4e0d\u4e00\u5b9a\u7b26\u5408\u8981\u6c42\uff09\u7684\u6700\u5c0f\u6570\uff0c\u540c\u65f6\u7531\u4e8e\u4e3a\u4e25\u683c\u5c0f\u4e8e\uff0c\u6240\u4ee5\u5f53\u904d\u5386\u5230\u5f53\u524d\u6570\u7ec4\u65f6while\u5faa\u73af\u4fbf\u4f1a\u7ed3\u675f\n            {\n                if (qwq == -1 || a[qwq].w > a[v[j].w].w) qwq = v[j].w;\n                j++;\n            }\n            if (qwq != -1 && a[nw].w > a[qwq].w) ans[nw] = qwq;//\u82e5\u7b26\u5408\u8981\u6c42\u5219\u52a0\u5165\u7b54\u6848\u4e2d\n        }\n        for (int i = 0;i < n;i++)\n        {\n            printf(\"%d \", ans[i] + 1);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n```\n",
        "postTime": 1610418802,
        "uid": 198719,
        "name": "\u6d1b\u749f",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF1472E \u3010Correct Placement\u3011"
    },
    {
        "content": "\u611f\u89c9\u6211\u7684\u505a\u6cd5\u6bd4\u8f83\u9ebb\u70e6\uff1f\n\n\u770b\u5230\u9898\u76ee\u7ed9\u51fa\u4e24\u79cd\u6761\u4ef6\uff0c\u8003\u8651\u5408\u5e76\u8fd9\u4e24\u79cd\u6761\u4ef6\uff0c\u4e0d\u7136\u5206\u522b\u8ba1\u7b97\u9700\u8981\u5bb9\u65a5\u3002\n\n\u5bb9\u6613\u89c2\u5bdf\u51fa\uff0c\u53ea\u6709 $\\max(w_i,h_i)>\\max(w_j,h_j)$ \u4e14 $\\min(w_i,h_i)>\\min(w_j,h_j)$ \u65f6 $j$ \u80fd\u7ad9\u5230 $i$ \u524d\u9762\u3002\n\n\u90a3\u4e48\u6211\u4eec\u4ee4 $A_i=max(w_i,h_i),B_i=min(w_i,h_i)$\uff0c\u90a3\u4e48\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\u4e00\u4e2a\u4e8c\u7ef4\u504f\u5e8f\u95ee\u9898\u3002\n\n~~\u4e8e\u662f\u6211\u5c31\u8ddf\u4e2a SB \u4e00\u6837\u6572\u4e86\u4e2a\u6570\u70b9~~\n\n\u8fd9\u9898\u5e76\u4e0d\u662f\u6c42\u4e2a\u6570\uff0c\u800c\u662f\u4efb\u610f\u8f93\u51fa\u4e00\u4e2a\u80fd\u7ad9\u5728 $i$ \u524d\u9762\u7684\u4eba\u3002\n\n\u4e8e\u662f\u66f4\u7b80\u5355\u4e86\uff0c\u628a $A$ \u6392\u5e8f\uff08\u5957\u8def\uff09\uff0c\u7136\u540e\u7ef4\u62a4 $B$ \u7684\u6700\u5c0f\u503c\u7684\u90a3\u4e2a\u4eba\u5c31\u884c\u4e86\u3002\n\n\u5176\u5b9e\u8fd8\u8981\u79bb\u6563\u5316\u4e00\u4e0b\uff0c\u76f8\u7b49\u7684\u6570\u4e5f\u8981\u5224\u4e00\u4e0b\uff0c~~\u771f\u9ebb\u70e6~~\n\ncode\uff1a\n```cpp\n#include\"bits/stdc++.h\"\nusing namespace std;\n#define ri register int\n#define ll long long\n#define N 300010\nint t,n,m,pre[N],s[N<<1],top,ans[N];\ninline ll rd(){\n    ll x=0;\n    char ch=getchar();\n    while(!isdigit(ch)) ch=getchar();\n    while(isdigit(ch)) {x=x*10+(ch^48);ch=getchar();}\n    return x;\n}\nstruct node{\n    int h,w,a,b;\n    int idx;\n}a[N];\ninline bool cmp1(node a,node b){return a.a<b.a;}\nint main(){\n    t=rd();\n    while(t--){\n        for(ri i=1;i<=n;++i) pre[i]=c[i]=0;top=0;\n        n=rd();\n        for(ri i=1;i<=n;++i) a[i].h=rd(),a[i].w=rd(),a[i].idx=i,s[++top]=a[i].h,s[++top]=a[i].w;\n        sort(s+1,s+1+top);\n        int len=unique(s+1,s+1+top)-s-1;\n        for(ri i=1;i<=n;++i) a[i].h=lower_bound(s+1,s+1+len,a[i].h)-s,a[i].w=lower_bound(s+1,s+1+len,a[i].w)-s;\n        for(ri i=1;i<=n;++i) a[i].a=max(a[i].h,a[i].w),a[i].b=min(a[i].h,a[i].w);sort(a+1,a+1+n,cmp1);\n        for(ri i=1;i<=n;++i) if(a[i-1].a==a[i].a) pre[i]=pre[i-1];else pre[i]=i-1;a[n+1].a=-1;int mn=0x3f3f3f3f,pos=-1;\n        for(ri i=1;i<=n;++i){\n            if(a[i].a!=a[i+1].a){\n                for(ri j=pre[i]+1;j<=i;++j) ans[a[j].idx]=(a[j].b-1>=mn)?pos:-1;\n                for(ri j=pre[i]+1;j<=i;++j) if(mn>a[j].b) pos=a[j].idx,mn=min(a[j].b,mn);\n            }\n        }\n        for(ri i=1;i<=n;++i) cout<<ans[i]<<\" \";cout<<endl;\n    }\n    return 0;\n}\n```\n",
        "postTime": 1609989750,
        "uid": 135839,
        "name": "Fairicle",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1472E \u3010Correct Placement\u3011"
    },
    {
        "content": "\u9898\u610f\uff1a\u7ed9\u5b9a $n$ \u4e2a\u957f\u65b9\u5f62\uff0c\u5bf9\u6bcf\u4e2a\u957f\u65b9\u5f62\u6c42\u53e6\u4e00\u957f\u65b9\u5f62\u4f7f\u540e\u8005\u957f\u5bbd\u5747\u5c0f\u4e8e\u524d\u8005\u3002\n\n\u6838\u5fc3\u601d\u60f3\uff1a\u6392\u5e8f\n\n\u89e3\uff1a\n\n\u5bb9\u6613\u53d1\u73b0\u6bcf\u4e2a\u957f\u65b9\u5f62\u90fd\u662f\u7531\u201c\u957f\u201d\uff08\u8f83\u957f\u8fb9\uff09\u4e0e\u201c\u5bbd\u201d\uff08\u8f83\u77ed\u8fb9\uff09\u786e\u5b9a\u7684\u3002\n\n\u56e0\u6b64\u53ef\u4ee5\u60f3\u5230\u5c06\u6240\u6709\u957f\u65b9\u5f62\u6309\u957f\u4e3a\u7b2c\u4e00\u5173\u952e\u5b57\uff0c\u5bbd\u4e3a\u7b2c\u4e8c\u5173\u952e\u5b57\u6392\u5e8f\uff0c\u7136\u540e\u5bf9\u6bcf\u4e2a\u957f\u65b9\u5f62\u5206\u914d\u524d\u9762\u957f\u65b9\u5f62\u4e2d\u5bbd\u6700\u77ed\u7684\u3002\u4f46\u662f\u8fd9\u6837\u957f\u76f8\u7b49\u7684\u957f\u65b9\u5f62\u53ef\u80fd\u4f1a\u5bf9\u5f7c\u6b64\u9020\u6210\u5e72\u6270\u3002\n\n\u6539\u4e3a\u6309\u5bbd\u9006\u5e8f\u6392\u5217\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u4e00\u4e2a\u957f\u65b9\u5f62\u4e4b\u524d\u7684\u5bbd\u5c0f\u4e8e\u5b83\u7684\u957f\u65b9\u5f62\u7684\u957f\u4e00\u5b9a\u4e5f\u5c0f\u4e8e\u5b83\u3002\n\n\u56e0\u6b64\u5148\u7f16\u53f7\u518d\u6392\u5e8f\uff0c\u5b8c\u6210\u540e\u518d\u6309\u7f16\u53f7\u8f93\u51fa\u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n```\n#include <bits/stdc++.h>\nusing namespace std;\nlong long t, n, temp;\nstruct ppl\n{\n\tlong long h, w, i, res;\n}a[200001];//\u957f\u65b9\u5f62\nbool cmp(ppl x, ppl y)\n{\n\tif(x.h!=y.h)\n\t\treturn x.h<y.h;\n\telse\n\t\treturn x.w>y.w;\n}//\u6392\u5e8f\nbool rec(ppl x, ppl y)\n{\n\treturn x.i<y.i;\n}//\u6392\u56de\u539f\u5f62\u5f0f\nint main()\n{\n\tcin>>t;\n\tfor(int i=1; i<=200000; i++)\n\t\ta[i].i=i;//\u9884\u7f16\u53f7\n\tfor(int i=1; i<=t; i++)\n\t{\n\t\tcin>>n;\n\t\tfor(int j=1; j<=n; j++)\n\t\t\tcin>>a[j].h>>a[j].w;\n\t\tfor(int j=1; j<=n; j++)\n\t\t\tif(a[j].h<a[j].w)\n\t\t\t\tswap(a[j].h, a[j].w);\n\t\tfor(int j=1; j<=n; j++)\n\t\t\ta[j].res=-1;//\u521d\u59cb\u5316\n\t\tsort(a+1, a+n+1, cmp);\n\t\ttemp=1;\n\t\tfor(int j=1; j<=n; j++)\n\t\t\tif(a[j].w>a[temp].w)\n\t\t\t\ta[j].res=a[temp].i;\n\t\t\telse\n\t\t\t\ttemp=j;//\u4f9d\u6b21\u5206\u914d\uff0c\u7ef4\u62a4\u6700\u5c0f\u503c\n\t\tsort(a+1, a+n+1, rec);\n\t\tfor(int j=1; j<=n; j++)\n\t\t\tcout<<a[j].res<<\" \";\n\t\tcout<<endl;//\u8f93\u51fa\n\t}\n\treturn 0;\n}\n\n```",
        "postTime": 1670337736,
        "uid": 191387,
        "name": "\u03a6\u03c1\u03b1\u03bd\u03ba",
        "ccfLevel": 0,
        "title": "CF1472E Correct Placement \u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1472E)\n\n\u89e3\u9898\u601d\u8def\uff1a\u8d2a\u5fc3\n\n\u6839\u636e\u9898\u610f\uff0c\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0c\u5982\u679c $i$ \u80fd\u7ad9\u6216\u8eba\u5728 $j$ \u524d\u9762\uff0c\u90a3\u4e48 $\\min(h_i,w_i)<\\min(h_j,w_j) \\land \\max(h_i,w_i)<\\max(h_j,w_j)$\uff0c\u5426\u5219\u6613\u8bc1\u8fd9\u662f\u4e0d\u53ef\u80fd\u7684\u3002\u6240\u4ee5\u4e0d\u59a8\u5c06\u4e00\u4e2a\u4e8c\u5143\u7ec4\u4e2d\u5c0f\u5143\u7d20\u7684\u653e\u524d\u9762\uff0c\u5927\u5143\u7d20\u7684\u653e\u540e\u9762\u3002\u7136\u540e\u6392\u5e8f\u4e00\u904d\uff0c\u6839\u636e\u8d2a\u5fc3\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4e8c\u5143\u7ec4\uff0c\u770b\u770b\u5b83\u4e4b\u524d\u7b2c\u4e00\u5173\u952e\u5b57\u6bd4\u5b83\u5c0f\u7684\u6709\u6ca1\u6709\u7b2c\u4e8c\u5173\u952e\u5b57\u6bd4\u5b83\u5c0f\u7684\u5373\u53ef\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u7ef4\u62a4\u4e00\u4e2a\u6700\u5c0f\u503c\u6765\u5b9e\u73b0\u3002\n\n\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u56e0\u4e3a\u9898\u76ee\u4e2d\u63d0\u5230\u7684\u90fd\u662f\u4e25\u683c\u5c0f\u4e8e\uff0c\u6240\u4ee5\u7b49\u4e8e\u662f\u4e0d\u884c\u7684\uff0c\u9700\u8981\u5728\u5904\u7406\u6700\u5c0f\u503c\u65f6\u505a\u4e00\u4e9b\u5904\u7406\u3002\n\ncode\uff1a\n\n```cpp\nint n,b,ans[maxn];\nvector<int> vec;\nstruct node{\n\tint a,b,id;\n\tbool operator<(const node &x)const{return a<x.a;}\n}d[maxn];\nvoid solve(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d%d\",&d[i].a,&d[i].b);\n\t\tif(d[i].a>d[i].b)swap(d[i].a,d[i].b);\n\t\td[i].id=i;\n\t}\n\tsort(d+1,d+n+1);\n\tint minx=-1;\n\tmemset(ans,-1,sizeof ans);\n\tfor(int i=1;i<=n;i++){\n\t\tvec.pb(i);\n\t\tif(~minx&&d[i].b>d[minx].b)ans[d[i].id]=d[minx].id;\n\t\tif(d[i].a!=d[i+1].a){\n\t\t\tfor(int i=0;i<vec.size();i++){\n\t\t\t\tif(minx==-1||d[vec[i]].b<d[minx].b)minx=vec[i];\n\t\t\t}\n\t\t\tvec.clear();\n\t\t}\n\t}\n\tvec.clear();//\u56e0\u4e3a\u662f\u591a\u7ec4\u6570\u636e\uff0c\u6240\u4ee5\u6700\u540e\u4e5f\u8981\u6e05\u7a7a\u3002\n\tfor(int i=1;i<=n;i++)printf(\"%d \",ans[i]);\n\tputs(\"\");\n}\nsigned main(){\n\tint t=1;\n\tscanf(\"%d\",&t);\n\twhile(t--)solve();\n}\n",
        "postTime": 1662547307,
        "uid": 578590,
        "name": "yinhee",
        "ccfLevel": 0,
        "title": "CF1472E\u9898\u89e3"
    }
]
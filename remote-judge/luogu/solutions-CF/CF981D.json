[
    {
        "content": "[$$\\Large\\texttt{My Blog}$$](https://hydingsy.github.io)\n\n---\n\n> \u9898\u76ee\u94fe\u63a5\uff1a[Codeforces 981D](https://codeforces.com/contest/981/problem/D)\n\n\u7ed9\u51fa $n$ \u672c\u4e66\uff0c\u6bcf\u672c\u4e66\u6709\u4e00\u4e2a\u4ef7\u503c $a_i$\u3002\u5c06\u8fd9 $n$ \u672c\u4e66\u6309\u7167\u987a\u5e8f\u653e\u5230 $k$ \u4e2a\u4e66\u67b6\u4e0a\uff08\u8fde\u7eed\u82e5\u5e72\u672c\u4e66\u653e\u5728\u4e00\u4e2a\u4e66\u67b6\u4e0a\uff0c\u63a5\u4e0b\u6765\u8fde\u7eed\u82e5\u5e72\u672c\u653e\u5728\u4e0b\u4e00\u4e2a\u4e66\u67b6\u4e0a\uff09\uff0c\u5b9a\u4e49\u4e00\u4e2a\u4e66\u67b6\u7684\u7f8e\u89c2\u7a0b\u5ea6\u4e3a\u8fd9\u4e2a\u4e66\u67b6\u4e0a\u6240\u6709\u4e66\u7684\u4ef7\u503c\u603b\u548c\uff0c\u5b9a\u4e49 $k$ \u4e2a\u4e66\u67b6\u7684\u7f8e\u89c2\u7a0b\u5ea6\u4e3a\u6bcf\u4e2a\u4e66\u67b6\u7f8e\u89c2\u7a0b\u5ea6\u7684\u6309\u4f4d\u4e0e\u548c\uff0c\u6c42\u8fd9 $k$ \u4e2a\u4e66\u67b6\u7684\u6700\u5927\u7f8e\u89c2\u7a0b\u5ea6\u3002\n\n\u6570\u636e\u8303\u56f4\uff1a$1\\leqslant k\\leqslant n\\leqslant 50$\uff0c$0<a_i<2^{50}$\n\n------\n\n## Solution\n\n\u5bf9\u4e8e\u6309\u4f4d\u4e0e\u548c\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u8d2a\u5fc3\u9009\u62e9\u3002\u8fd9\u4e2a\u8d2a\u5fc3\u7684\u8bc1\u660e\u663e\u7136\uff1a\u5982\u679c\u4e00\u4f4d\u4e3a $1$ \u80af\u5b9a\u6bd4\u8fd9\u4e00\u4f4d\u4e3a $0$ \u4e14\u540e\u9762\u90fd\u4e3a $1$ \u66f4\u4f18\u3002\n\n\u5982\u679c\u5f53\u524d\u6700\u4f18\u89e3\u4e3a $ans$\uff0c\u63a5\u4e0b\u6765\u8d2a\u5fc3\u7b2c $i$ \u4f4d\uff0c\u6211\u4eec\u7528 $\\texttt{DP}$ \u9a8c\u8bc1 $ans'=ans\\ \\texttt{OR}\\ 2^i$ \u8fd9\u4e2a\u7b54\u6848\u662f\u5426\u53ef\u884c\u3002$\\texttt{DP}$ \u7684\u72b6\u6001\u5b9a\u4e49\u4e3a\uff1a$f[i][j]$ \u8868\u793a\u524d $i$ \u672c\u4e66\u653e\u5230 $j$ \u4e2a\u4e66\u67b6\u662f\u5426\u53ef\u4ee5\u5f97\u5230\u7b54\u6848 $x$ \u4f7f\u5f97 $ans'\\in x$\uff08$x\\ \\texttt{AND}\\ ans'=ans'$\uff09\u3002\u8f6c\u79fb\u65b9\u7a0b\u4e3a $f[i][j]|=f[k][j-1]\\ \\texttt{AND}\\ [sum(k+1,i)\\ \\texttt{AND}\\ x=x]$\uff0c\u5982\u679c $f[n][k]=1$ \u5219\u76f4\u63a5\u66f4\u65b0\u7b54\u6848\u3002\n\n**\u65f6\u95f4\u590d\u6742\u5ea6**\uff1a$O(n^2 k\\log \\sum a_i)$\n\n------\n\n## Code\n\n```cpp\n#include <cstdio>\n#include <cstring>\n\nconst int N=55;\nint n,k;\nlong long a[N];\nbool f[N][N];\n\nbool check(long long x) {\n    memset(f,0,sizeof(f));\n    f[0][0]=1;\n    for(int i=1;i<=n;++i) {\n        for(int j=1;j<=k;++j) {\n            for(int k=0;k<i;++k) {\n                f[i][j]|=f[k][j-1]&(((a[i]-a[k])&x)==x);\n            }\n        }\n    }\n    return f[n][k];\n}\nint main() {\n    scanf(\"%d%d\",&n,&k);\n    for(int i=1;i<=n;++i) scanf(\"%lld\",&a[i]),a[i]+=a[i-1];\n    long long ans=0;\n    for(int i=60;i>=0;--i) {\n        long long now=ans|(1LL<<i);\n        if(check(now)) ans|=(1LL<<i);\n    }\n    printf(\"%lld\\n\",ans);\n    return 0;\n}\n```",
        "postTime": 1543030552,
        "uid": 49725,
        "name": "Siyuan",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF981D \u3010Bookshelves\u3011"
    },
    {
        "content": "\u6309\u4f4d\u8d2a\u5fc3+DP\u7684\u597d\u9898qwq\n\n\u9996\u5148\u770b\u5230\u9898\u76ee\u7684\u8981\u6c42\uff0c\u7edf\u8ba1\u4ef7\u503c\u7684\u65f6\u5019\u7684\u64cd\u4f5c\u662f\u6309\u4f4d\u4e0e\uff0c\u5c31\u8981\u6709\u6309\u4f4d\u5206\u522b\u8ba1\u7b97\u7684\u610f\u8bc6\n\n~~\u5f00\u59cb\u6ca1\u610f\u8bc6\u5230\u7ed3\u679c\u60f3\u4e86\u597d\u4e45\u8fd8\u662f\u770b\u4e86\u9898\u89e3\u624d\u60f3\u5230~~\n\n\u7531\u4e8e\u7edf\u8ba1\u4ef7\u503c\u7684\u65b9\u5f0f\u4e0d\u662f\u52a0\u548c\uff0c\u6240\u4ee5\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e24\u4e2a\u8f83\u5927\u7684\u503cAND\u8d77\u6765\u66f4\u5c0f\u751a\u81f3\u53d8\u62100\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5DP\n\n\u8003\u8651\u6309\u4f4d\u8d2a\u5fc3\n\n\u663e\u7136\u9ad8\u4f4d\u4e3a1\u540e\u7684\u503c\u4e00\u5b9a\u6bd4\u9ad8\u4f4d\u4e0d\u4e3a1\u7684\u503c\u8981\u5927\uff0c\u6240\u4ee5\u4ece\u9ad8\u4f4d\u5411\u4e0b\u8d2a\u5fc3\uff0c\u6bcf\u6b21\u68c0\u67e5\u80fd\u5426\u5728\u4f7f\u524di\u4e2a\u4f4d\u503c\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u65b0\u52a0\u5165\u7684\u4f4d\u53d8\u4e3a1\n\n\u68c0\u67e5\u7684\u65f6\u5019\u7528\u533a\u95f4dp\u5b9e\u73b0\u5373\u53ef\n\n\u8bbe$dp[i][j]$\u8868\u793a\u524dj\u672c\u4e66\u5206\u5230\u524di\u4e2a\u4e66\u67b6\u4e0a\u662f\u5426\u80fd\u4f7f\u524d\u9762\u7684\u4f4d\u4e0d\u53d8\u4e14\u5f53\u524d\u68c0\u67e5\u7684\u4f4d\u4e3a1\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a\n\n```cpp\ndp[i][j]|=dp[i-1][kx]&&(((sum[j]-sum[kx])&&x)==x) \n```\n\n\u603b\u7684\u590d\u6742\u5ea6\u662f$O(n^{2}k)$\n\n**\u6ce8\u610f\u4f4d\u8fd0\u7b97\u4f18\u5148\u7ea7\u548c\u679a\u4e3e\u7684\u6700\u9ad8\u4f4d\u7684\u4f4d\u6570**\n\n\u4ee3\u7801\n```cpp\n\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#define int long long\nusing namespace std;\nint n,k,a[51],sum[51],dp[51][51],ans=0;\nint check(int x){\n    memset(dp,0,sizeof(dp));\n    dp[0][0]=1;\n    for(int i=1;i<=k;i++)\n        for(int j=1;j<=n;j++)\n            for(int kx=0;kx<j;kx++)\n                dp[i][j]|=dp[i-1][kx]&&(((sum[j]-sum[kx])&x)==x);\n    return dp[k][n];\n}\nsigned main(){\n    scanf(\"%lld %lld\",&n,&k);\n    for(int i=1;i<=n;i++)\n        scanf(\"%lld\",&a[i]);\n    for(int i=1;i<=n;i++)\n        sum[i]=sum[i-1]+a[i];\n    for(int i=60;i>=0;i--){\n        int mid=ans|(1LL<<i);\n        if(check(mid))\n            ans|=(1LL<<i);\n    }\n    printf(\"%lld\",ans);\n    return 0;\n}\n\n```\n\n[\u6700\u540e\u7ed9\u81ea\u5df1\u7684\u535a\u5ba2\u6253\u4e2a\u5e7f\u544a](https://www.cnblogs.com/dreagonm/)",
        "postTime": 1541064321,
        "uid": 149849,
        "name": "Libre_dreagonm",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF981D \u3010Bookshelves\u3011"
    },
    {
        "content": "\u7ed9\u51fa\u4e00\u79cd\u66b4\u529b**\u80fd\u8fc7**\u7684\u505a\u6cd5\u3002\n## Problem\n\u7ed9\u51fa $n$ \u4e2a\u6570\uff0c\u8981\u6c42\u5206\u6210 $k$ \u7ec4\uff0c\u4f7f\u6bcf\u7ec4\u6570\u548c\u7684\u6309\u4f4d\u4e0e\u503c\u6700\u5927\u3002\n## Solution\n\u8003\u8651 dp\u3002\u8bbe $f_{i,j}$ \u8868\u793a\u628a\u524d $i$ \u4e2a\u6570\u5206\u6210 $j$ \u4e2a\u7ec4\u7684\u8d21\u732e\u3002\n\n\u7136\u540e\u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n$$f_{i,r}=f_{i-1,l-1}\\operatorname{AND}(s_r-s_{l-1})[1\\le l\\le r]$$\n\n$s_i$ \u8868\u793a $\\sum_{i=1}^{n}$\n\n\u4f46\u662f\u8003\u8651\u5230 $\\operatorname{and}$ \u64cd\u4f5c\u53d6\u6700\u5927\u503c\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u89e3\uff0c\u6240\u4ee5\u4e00\u79cd\u60f3\u6cd5\u5c31\u8bde\u751f\u4e86\uff1a**\u628a\u6240\u6709\u72b6\u6001\u90fd\u5b58\u8d77\u6765\uff01**\n\n\u6bcf\u4e2a $f_{i,j}$ \u7ef4\u62a4\u6240\u6709\u8f6c\u79fb\u5230\u5f53\u524d\u70b9\u7684\u53ef\u80fd\u7684\u8d21\u732e\uff0c\u6bcf\u6b21\u7528 $f_{i,j}$ \u4e2d\u7684\u6240\u6709\u6570\u5168\u90e8\u8f6c\u79fb\u4e00\u904d\u5373\u53ef\u3002\n\n\u7531\u4e8e\u591a\u4e2a\u76f8\u540c\u7684\u503c\u5f97\u8d21\u732e\u76f8\u540c\uff0c\u6240\u4ee5\u5bf9\u6bcf\u4e2a\u70b9\u5f00\u4e00\u4e2a ```unordered_set<>``` \u53bb\u91cd\u3002\u6700\u540e\u6c42\u51fa $f_{n,k}$ \u7684\u6700\u5927\u503c\u5c31\u884c\u4e86\u3002\n\n## Code\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define ri register\n#define all(x) x.begin(),x.end()\nusing namespace std;\nconst int N=101;\nint n,k;\nll a[N],s[N];\nunordered_set<ll>f[N][N];\nnamespace pts1{\n\tinline void work(){printf(\"%lld\\n\",a[1]);}\n}\nnamespace pts100{\n\tll ans=0;\n\tinline void work(){\n\t\tfor(int i=1;i<=n;i++)s[i]=s[i-1]+a[i];//\u524d\u7f00\u548c\n\t\tfor(int i=1;i<=n;i++)f[i][1].insert(s[i]);//\u521d\u59cb\u5316\n\t\tfor(int i=2;i<=k;i++)\n\t\t\tfor(int l=1;l<=n;l++)\n\t\t\t\tfor(int r=l;r<=n;r++)\n\t\t\t\t\tfor(ll v:f[l-1][i-1])//\u66b4\u529b\u8f6c\u79fb\n\t\t\t\t\tf[r][i].insert(v&(s[r]-s[l-1]));\n\t\tfor(ll i:f[n][k])ans=max(ans,i);//unordered_set<>\u662f\u65e0\u5e8f\u7684\n\t\tprintf(\"%lld\\n\",ans);\n\t}\n}\nint main(){\n\tscanf(\"%d%d\",&n,&k);\n\tfor(int i=1;i<=n;i++)scanf(\"%lld\",&a[i]);\n\tif(n==1)pts1::work();\n\telse pts100::work();\n\treturn 0;\n}\n```",
        "postTime": 1652936647,
        "uid": 262322,
        "name": "panyanppyy",
        "ccfLevel": 5,
        "title": "CF981D"
    }
]
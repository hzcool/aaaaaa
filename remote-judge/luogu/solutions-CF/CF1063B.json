[
    {
        "content": "\u5927\u5bb6\u597d\uff0c\u5f88\u9ad8\u5174\u80fd\u4e3a\u5927\u5bb6\u8bb2\u89e3\u6211\u81ea\u5df1\u7684\u601d\u8def\uff0c\u5982\u679c\u6709\u4ec0\u4e48\u8bf4\u4e0d\u592a\u6e05\u695a\u7684\uff0c\u8bf7\u591a\u591a\u89c1\u8c05\uff0c\u8c22\u8c22\u5927\u5bb6\u3002\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\n\u597d\u7684\uff0c\u73b0\u5728\u5f00\u59cb\u771f\u6b63\u8bb2\u9898\uff0c\u6211\u4eec\u5148\u8bfb\u9898\u3002\n# \u9898\u76ee\u5927\u610f\n\u7ed9\u4f60\u4e00\u4e2an*m\u7684\u77e9\u9635\uff0c\u8ba9\u4f60\u628a\uff08r,c\uff09\u5f53\u505a\u8d77\u70b9\u53bb\u56db\u5904\u4e71\u8d70\uff0c\u4f46\u662f\u6709\u4e00\u4e2a\u89c4\u5b9a\uff0c\u4f60\u53ef\u4ee5\u968f\u4fbf\u5f80\u4e0a\u5f80\u4e0b\u8d70\uff0c\u4f46\u4f60\u5f80\u5de6\u8d70\u7684\u6b21\u6570\u4e0d\u80fd\u8d85\u8fc7x\uff0c\u5f80\u53f3\u8d70\u7684\u6b21\u6570\u4e0d\u80fd\u8d85\u8fc7y\uff0c\u4e5f\u5c31\u662f\u5de6\u8d70\u6b21\u6570$\\leq x$\uff0c\u53f3\u8d70\u6b21\u6570$\\leq y$\u3002\u6700\u540e\u95ee\u4f60\u7684\u662f\u4f60\u6700\u591a\u80fd\u8d70\u591a\u5c11\u4e2a\u4f4d\u7f6e\uff08\u8d77\u70b9\u4e5f\u7b97\uff09\u3002\n\n## \u7406\u89e3\u4e86\u9898\u76ee\u5927\u610f\uff0c\u4e00\u5207\u5c31\u597d\u529e\u4e86\n# \u601d\u8def\n\u9996\u5148\uff0c\u53ea\u662f\u4e00\u9053\u7ecf\u5178\u5bbd\u641c\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4ece\u8d77\u70b9\u5f00\u59cb\u5bbd\u641c\uff0c\u6bcf\u7ecf\u8fc7\u4e00\u4e2a\u70b9\uff0c\u5c31\u628a\u5b83\u6807\u8bb0\u4e00\u4e0b\uff0c\u9632\u6b62\u91cd\u590d\u904d\u5386\uff0c\u77e5\u9053\u4efb\u4f55\u7684\u70b9\u90fd\u4e0d\u6ee1\u8db3\u904d\u5386\u6761\u4ef6\u6216\u5df2\u7ecf\u88ab\u904d\u5386\u8fc7\u4ee5\u540e\u7ed3\u675f\u5bbd\u641c\uff0c\u7ed3\u679c\u5c31\u662f\u4f60\u904d\u5386\u5230\u7684\u70b9\u7684\u4e2a\u6570\u3002\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include<cstdio>\nusing namespace std;\nint n,m,st,en,i,x,y,r,c,d[4000001][6],fx[5][3],xx,yy,ans;\nchar a[2001][2001];\nbool bz[2001][2001];\nint main()\n{\n    fx[1][1]=fx[3][2]=-1;fx[2][1]=fx[4][2]=1;\n    scanf(\"%d%d\",&n,&m);\n    scanf(\"%d%d\",&r,&c);\n    scanf(\"%d%d\",&x,&y);\n    getchar();\n    for (int i=1;i<=n;i++)\n    {\n        for (int j=1;j<=m;j++)\n            a[i][j]=getchar();\n        getchar();\n    }\n    st=0;\n    en=1;\n    bz[r][c]=true;\n    d[1][1]=r;\n    d[1][2]=c;\n    d[1][3]=1;\n    d[1][4]=x;\n    d[1][5]=y;\n    ans=1;\n    while (st<en)\n    {\n        st++;\n        for (int i=1;i<=4;i++)\n        {\n            xx=d[st][1]+fx[i][1];\n            yy=d[st][2]+fx[i][2];\n            if (i==3&&d[st][4]-1<0) continue;\n            if (i==4&&d[st][5]-1<0) continue;\n            if (xx>0&&xx<=n&&yy>0&&yy<=m&&bz[xx][yy]==false&&a[xx][yy]=='.')\n            {\n                d[++en][1]=xx;\n                d[en][2]=yy;\n                d[en][3]=d[st][3]+1;\n                if (i==3) d[en][4]=d[st][4]-1;\n                else d[en][4]=d[st][4];\n                if (i==4) d[en][5]=d[st][5]-1;\n                else d[en][5]=d[st][5];\n                ans++;\n                bz[xx][yy]=true;\n            }\n        } \n    }\n    printf(\"%d\",ans);\n    return 0;\n} \n```\n\n#### \u6ce8\uff1ad[st][3]\u6ca1\u7528\uff0c\u6211\u6ca1\u4e8b\u5e72\u6253\u591a\u4e86\u3002\n## \u4f46\u662f\uff0c\u53ea\u8981\u4f60\u6309\u7167\u6211\u8fd9\u6837\u7684\u6253\u6cd5\u53bb\u4ea4\uff0c\u4f60\u80af\u5b9a\u4f1a\u8fd9\u6837\u3002\n![](https://cdn.luogu.com.cn/upload/pic/57162.png)\n\n# \u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\uff1f\n\u522b\u6025\uff0c\u7b49\u6211\u6162\u6162\u8bf4\u3002\n\n\u5176\u5b9e\uff0c\u4e5f\u8bb8\u6211\u4eec\u4ed4\u7ec6\u60f3\u4e00\u60f3\uff0c\u6211\u7684\u7a0b\u5e8f\u662f\u6709\u6f0f\u6d1e\u7684\uff0c\u6bd4\u5982\u8bf4\uff0c\u4e00\u4e2a\u70b9\u53ef\u80fd\u7ecf\u8fc7\u8bb8\u591a\u79cd\u8def\u5f84\u5230\u8fbe\uff0c\u8fd9\u4e9b\u4e0d\u540c\u7684\u8def\u5f84\u7684\u5de6\u8d70\u6b21\u6570\u548c\u53f3\u8d70\u6b21\u6570\u53c8\u4e0d\u540c\uff0c\u6240\u4ee5\u5c31\u4f1a\u5bfc\u81f4\u6211\u8fd9\u8003\u8651\u6700\u5148\u5230\u8fbe\u7684\uff0c\u5176\u5b9e\u5176\u4ed6\u7684\u5230\u8fbe\u65b9\u6cd5\u4e5f\u53ef\u80fd\u9020\u6210\u7b54\u6848\u7684\u4e0d\u540c\u3002\n\n\u6240\u4ee5\u5f53\u6211\u4eec\u9047\u5230\u540c\u4e00\u4e2a\u70b9\u88ab\u7ecf\u8fc7\u591a\u6b21\u65f6\uff0c\u4ec0\u4e48\u65f6\u5019\u820d\u5f03\uff0c\u4ec0\u4e48\u65f6\u5019\u7ee7\u7eed\u7559\u4e0b\u8fd9\u4e2a\u72b6\u6001\u5462\uff1f\n\n\u6211\u4eec\u53ef\u4ee5\u8bb0\u5f55\u4e00\u4e2a\u70b9\u7684\u6700\u5c11\u5de6\u79fb\u6b21\u6570\u548c\u6700\u5c11\u53f3\u79fb\u6b21\u6570\uff0c\u5f53\u6211\u4eec\u770b\u89c1\u4e00\u4e2a\u70b9\u88ab\u904d\u5386\u591a\u6b21\u65f6\uff0c\u5c31\u628a\u8fd9\u4e2a\u8def\u5f84\u7684\u5de6\u79fb\u6b21\u6570\u548c\u53f3\u79fb\u6b21\u6570\u4e0e\u6700\u5c11\u5de6\u79fb\u6b21\u6570\u548c\u53f3\u79fb\u6b21\u6570\u6bd4\u8f83\uff0c\u5982\u679c\u66f4\u4f18\u5c31\u66f4\u65b0\uff0c\u5e76\u7ee7\u7eed\u5f80\u524d\u904d\u5386\uff0c\u5982\u679c\u5176\u4e2d\u6709\u4e00\u4e2a\u66f4\u4f18\uff0c\u5c31\u7ee7\u7eed\u904d\u5386\uff0c\u4f46\u4e0d\u66f4\u65b0\uff0c\u81f3\u4e8e\u90fd\u4e0d\u4f18\uff0c\u90a3\u8fd8\u8981\u6765\u5e72\u4ec0\u4e48\u76f4\u63a5\u6254\u6389\u3002\n\n\u6240\u4ee5AC\u4ee3\u7801\u5c31\u662f\u8fd9\u6837\u7684\uff0c\u6211\u8ba4\u4e3a\uff08\u8ba4\u4e3a\uff0c\u4e0d\u662f\u80af\u5b9a\uff09\u6211\u7684\u7a0b\u5e8f\u5e94\u8be5\u662f\u6bd4\u5176\u4ed6\u4eba\u8981\u77ed\u4e00\u4e9b\u7684\uff0c\u6240\u4ee5\u6253\u8d77\u6765\u4e5f\u4e0d\u4f1a\u7eb3\u90a3\u4e48\u8d39\u52b2\u3002\n\n```cpp\n#include<cstdio>\nusing namespace std;\nint i,j,en=1,ans=1,n,m,st,x,y,r,c,xx,yy,d[10000001][5]//\u5bbd\u641c\u72b6\u6001\uff0c1\u8868\u793a\u7b2c\u51e0\u884c\uff0c2\u8868\u793a\u7b2c\u51e0\u5217\uff0c3\u8868\u793a\u5de6\u79fb\u6b21\u6570\uff0c4\u8868\u793a\u53f3\u79fb\u6b21\u6570\uff0c,bz[2001][2001]//\u5de6\u79fb\u6b21\u6570,bz2[2001][2001];//\u53f3\u79fb\u6b21\u6570\nchar a[2001][2001];\nconst int max=0x7FFFFFFF,fx[4][2]={-1,0,1,0,0,-1,0,1};\nint main()\n{\n    scanf(\"%d%d%d%d%d%d\\n\",&n,&m,&r,&c,&x,&y);\n    for (i=1;i<=n;i++)\n    {\n        for (j=1;j<=m;j++)\n            a[i][j]=getchar(),bz[i][j]=max,bz2[i][j]=max;//\u56e0\u4e3a\u662f\u8981\u8bb0\u5f55\u6700\u5c11\u7684\u6b21\u6570\uff0c\u6240\u4ee5\u4e00\u5f00\u59cb\u5c31\u8981\u9644\u4e00\u4e2a\u6781\u5927\u503c\n        getchar();\n    }\n    d[1][1]=r;\n    d[1][2]=c;\n    bz[r][c]=0;\n    bz2[r][c]=0;//\u521d\u59cb\u5316\n    while(st<en)\n    {\n        st++;\n        for(i=0;i<4;i++)//\u56db\u4e2a\u65b9\u5411\u8d70\u4e00\u8d70\n        {\n            int xx=d[st][1]+fx[i][0],yy=d[st][2]+fx[i][1],u=0,v=0;//\u5c06\u8981\u8d70\u53bb\u7684\u5730\u70b9\n            if(i==2) u++;\n            if(i==3) v++;//\u8fd9\u662f\u76f4\u63a5\u770b\u8981\u4e0d\u8981\u52a0\u4e0a\u5de6\u79fb\u6216\u53f3\u79fb\u7684\u6b65\u6570\n            if(u+d[st][3]>x||v+d[st][4]>y||xx<=0||xx>n||yy<=0||yy>m||a[xx][yy]!='.'||(bz[xx][yy]<=d[st][3]+u&&bz2[xx][yy]<=d[st][4]+v)) continue;//\u5224\u65ad\u4e00\u4e0b\u662f\u4e0d\u662f\u9700\u8981\u820d\u5f03\u7684\u72b6\u6001\n            if(bz[xx][yy]>d[st][3]+u&&bz2[xx][yy]>d[st][4]+v)//\u90fd\u66f4\u4f18\u5c31\u66f4\u65b0\n            {\n            \tif(bz[xx][yy]==max&&bz2[xx][yy]==max) ans++;//\u5982\u679c\u8fd9\u4e2a\u70b9\u8fd8\u6ca1\u8d70\u8fc7\uff0c\u5c31\u628a\u7b54\u6848+1\n            \tbz[xx][yy]=d[st][3]+u;\n\t\t\t\tbz2[xx][yy]=d[st][4]+v;\n        \t}\n            d[++en][1]=xx;\n            d[en][2]=yy;\n            d[en][3]=d[st][3]+u;\n            d[en][4]=d[st][4]+v;//\u5982\u679c\u6709\u5176\u4e2d\u4e00\u4e2a\u66f4\u4f18\uff0c\u5c31\u7ee7\u7eed\u5f80\u4e0b\u8d70\u3002\n        }\n    }\n\tprintf(\"%d\",ans);\n    return 0;\n} \n```\n\u6211\u7684\u9898\u89e3\u5230\u6b64\u7ed3\u675f\uff0c\u5e0c\u671b\u5927\u5bb6\u80fd\u542c\u61c2\uff0c\u628a\u8fd9\u9053\u9898\u5feb\u5feb\u505a\u5bf9\uff01\uff01\n",
        "postTime": 1555679515,
        "uid": 157857,
        "name": "ImmortalWatcher",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "\u6211\u4eec\u53d1\u73b0\uff0c\u65e0\u8bba $(sx, sy)$ \u4ee5\u4ec0\u4e48\u6837\u7684\u8def\u5f84\u8d70\u5230 $(x, y)$\uff0c\u5411\u5de6\u548c\u5411\u53f3\u8d70\u7684\u6b65\u6570\u7684\u5dee\u7684\u90fd\u4e00\u6837\uff0c\u5747\u4e3a $sy-y$\u3002\u5b9a\u4e49\u5411\u5de6\u8d70\u7684\u6b65\u6570\u4e3a $l$\uff0c\u5411\u53f3\u8d70\u7684\u6b65\u6570\u662f $r$,\u4e0a\u53e5\u8bdd\u7b49\u4ef7\u4e8e $l-r=sy-y$\n\n\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u6700\u5c0f\u5316\u5176\u4e2d\u4e00\u4e2a\u503c\u5373\u53ef\u3002\u5047\u8bbe\u6211\u4eec\u6700\u5c0f\u5316 $l$\uff0c\u90a3\u4e48\u6574\u5f20\u56fe\u7684\u8fb9\u6743\u53ea\u6709 0 - 1\uff0c\u53ef\u4ee5\u505a 0 - 1 bfs\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<queue>\n#include<cstring>\n#define maxn 2010\nusing namespace std;\n\nint n, m, sx, sy, X, Y;\n\nint ma[maxn][maxn];\n\nchar c[maxn];\n\nstruct node{\n\tint x, y;\t\n\tnode(int _x = 0, int _y = 0){x = _x; y = _y;}\n};\n\nint dx[] = {0, -1, 1, 0, 0};\nint dy[] = {0, 0, 0, 1, -1};\n\ndeque<node> Q; int dis[maxn][maxn];\nvoid bfs(){ memset(dis, -1, sizeof dis);\n\tQ.push_front(node(sx, sy)); dis[sx][sy] = 0;\n\twhile(!Q.empty()){\n\t\tnode t = Q.front(); Q.pop_front();\n\t\tfor(int i = 1; i <= 4; ++i){\n\t\t\tint x = t.x + dx[i], y = t.y + dy[i]; \n\t\t\tif(x < 1 || x > n || y < 1 || y > m || ma[x][y]) continue;\n\t\t\tif(dis[x][y] != -1 && dis[x][y] <= dis[t.x][t.y] + (i == 4)) continue;\n\t\t\tdis[x][y] = dis[t.x][t.y] + (i == 4);\n\t\t\tif(i == 4) Q.push_back(node(x, y));\n\t\t\telse Q.push_front(node(x, y)); \n\t\t}\n\t}\n}\n\nint ans;\nint main(){\n\tscanf(\"%d%d%d%d%d%d\", &n, &m, &sx, &sy, &X, &Y);\n\tfor(int i = 1; i <= n; ++i){\n\t\tscanf(\"%s\", c + 1);\n\t\tfor(int j = 1; j <= m; ++j) if(c[j] == '*') ma[i][j] = 1;\n\t} bfs();\n\tfor(int i = 1; i <= n; ++i)\n\t\tfor(int j = 1; j <= m; ++j){\n\t\t\tif(dis[i][j] == -1) continue;\n\t\t\tint a = dis[i][j], b = j - sy + a;\n\t\t\tif(a <= X && b <= Y) ++ans; \n\t\t}\n\tcout << ans;\n\treturn 0; \n}\n```",
        "postTime": 1539571668,
        "uid": 34531,
        "name": "DDOSvoid",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "\u8fd9\u9898\u6709\u5411\u5de6\u6700\u5927\u6b65\u6570\u548c\u5411\u53f3\u6700\u5927\u6b65\u6570\u4e24\u4e2a\u7ea6\u675f\uff0c\u6240\u4ee5\u5f88\u70e6\u3002\u80fd\u4e0d\u80fd\u53ea\u6709\u4e00\u4e2a\u7ea6\u675f\u5462\uff1f\u8fd9\u4e2a\u65f6\u5019\u5f80\u5f80\u8981\u89c2\u5bdf\u51e0\u4e2a\u7ea6\u675f\u6761\u4ef6\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\n\n**1.\u5411\u5de6\u8d70\u7684\u6b65\u6570-\u5411\u53f3\u8d70\u7684\u6b65\u6570=\u8d77\u70b9\u6a2a\u5750\u6807-\u7ec8\u70b9\u6a2a\u5750\u6807**\n\n\u6709\u4e86\u8fd9\u4e2a\u5f0f\u5b50\uff0c\u5c31\u53ef\u4ee5\u7528\u5411\u5de6\u8d70\u7684\u6b65\u6570\u540c\u65f6\u8868\u793a\u5411\u53f3\u8d70\u7684\u6b65\u6570\u3002\n\n**2.\u5411\u5de6\u8d70\u7684\u6b65\u6570\u8d8a\u591a\uff0c\u5411\u53f3\u8d70\u7684\u6b65\u6570\u8d8a\u591a**\n\n\u8fd9\u4e2a\u6761\u4ef6\u662f\u53ef\u4ee5\u7531\u4e0a\u9762\u90a3\u4e2a\u5f0f\u5b50\u63a8\u6765\u7684\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u4fdd\u8bc1\u4e86\u5411\u5de6\u8d70\u7684\u6b65\u6570\u6700\u5c11\u65f6\u4e00\u5b9a\u662f\u5168\u5c40\u6700\u4f18\u89e3\u3002\n\n\u6240\u4ee5\u6574\u4e2a\u95ee\u9898\u88ab\u8f6c\u5316\u6210\u4e86\u53ea\u7528\u7ba1\u5411\u5de6\u6b65\u6570\u768401\u6700\u77ed\u8def\uff0c\u7528SPFA\u5373\u53ef\u89e3\u51b3\uff0c\u8ba1\u7b97\u7b54\u6848\u65f6\u6ee1\u8db3**\u5411\u5de6\u6b65\u6570<=\u5411\u5de6\u6700\u5927\u6b65\u6570&&\u5411\u5de6\u6b65\u6570+\u6a2a\u5750\u6807\u4e4b\u5dee<=\u6700\u5927\u5411\u53f3\u6b65\u6570**\u5c31\u8ba1\u5165\u7b54\u6848\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff1a\n\n```\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\n#include <queue>\n\nusing namespace std;\n\ntypedef pair<int,int> pii;\n\nconst int N=2010;\nconst int dir[4][2]={{0,-1},{0,1},{1,0},{-1,0}};\n\nint n,m,r,c,x,y,dis[N][N],ans;\nbool g[N][N],inq[N][N];\nchar s[N];\nqueue<pii> q;\n\nint main()\n{\n\tint i,j,tx,ty;\n\tpii t;\n\t\n\tmemset(dis,0x3f,sizeof(dis));\n\t\n\tscanf(\"%d%d%d%d%d%d\",&n,&m,&r,&c,&x,&y);\n\t\n\tfor (i=1;i<=n;++i)\n\t{\n\t\tscanf(\"%s\",s);\n\t\tfor (j=1;j<=m;++j)\n\t\t{\n\t\t\tif (s[j-1]=='.')\n\t\t\t{\n\t\t\t\tg[i][j]=true;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tdis[r][c]=0;\n\t\n\tq.push(pii(r,c));\n\t\n\twhile (!q.empty())\n\t{\n\t\tt=q.front();\n\t\tq.pop();\n\t\tinq[t.first][t.second]=false;\n\t\tfor (i=0;i<4;++i)\n\t\t{\n\t\t\ttx=t.first+dir[i][0];\n\t\t\tty=t.second+dir[i][1];\n\t\t\tif (g[tx][ty]&&dis[tx][ty]>dis[t.first][t.second]+(i==0))\n\t\t\t{\n\t\t\t\tdis[tx][ty]=dis[t.first][t.second]+(i==0);\n\t\t\t\tif (!inq[tx][ty])\n\t\t\t\t{\n\t\t\t\t    inq[tx][ty]=true;\n\t\t\t\t    q.push(pii(tx,ty));\n\t\t\t\t}\n\t\t\t}\n\t\t} \n\t}\n\t\n\tfor (i=1;i<=n;++i)\n\t{\n\t\tfor (j=1;j<=m;++j)\n\t\t{\n\t\t\tif (g[i][j]&&dis[i][j]<=x&&dis[i][j]+j-c<=y)\n\t\t\t{\n\t\t\t\t++ans;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprintf(\"%d\",ans);\n\t\n\treturn 0;\n}\n```",
        "postTime": 1539525616,
        "uid": 49742,
        "name": "ouuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "# \u672c\u9898\u91c7\u7528BFS\u3002\n\n\u8fd9\u9053\u9898\u76ee\u4e0e\u666e\u901a BFS \u88f8\u9898**\u5927\u81f4\u76f8\u540c**\u4f46\u662f\u6709\u4e00\u70b9\u533a\u522b\uff0c\u5982\u4e0b\u2193\u3002\n\n\u4e0d\u5e78\u7684\u662f\uff0c\u4f60\u7684\u952e\u76d8\u5feb\u574f\u4e86\uff0c**\u6240\u4ee5\u4f60\u53ea\u80fd\u5411\u5de6\u79fb\u52a8\u4e0d\u8d85\u8fc7 $x$ \u683c**\uff0c**\u5e76\u4e14\u5411\u53f3\u79fb\u52a8\u4e0d\u8d85\u8fc7 $y$ \u683c**\u3002\u56e0\u4e3a\u4e0a\u4e0b\u952e\u60c5\u51b5\u826f\u597d\uff0c\u6240\u4ee5\u5bf9\u5411\u4e0a\u548c\u5411\u4e0b\u7684\u79fb\u52a8\u6b21\u6570\u6ca1\u6709\u9650\u5236\u3002\n\n\u5f88\u81ea\u7136\u5730\u60f3\u5230\uff0c\u53ef\u4ee5\u5728BFS\u7684\u7ed3\u6784\u4f53\u91cc\u589e\u52a0\u8bb0\u5f55\u5de6\u53f3\u79fb\u52a8\u7684\u6b65\u6570\u7684\u53d8\u91cf $l,r$ \u3002\n\n```cpp\nstruct node{\n\tint x,y,l,r;\n};\n```\n\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6bcf\u5230\u8fbe\u4e00\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u5224\u65ad\u5de6\u53f3\u6b65\u6570\u662f\u5426\u8d85\u8fc7\u9650\u5236\u3002\n\n## BUT\n\u5f53\u6211\u4eec\u8fd9\u4e48\u53bb\u505a\u7684\u65f6\u5019\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a\u95ee\u9898\uff1a\u4e00\u4e2a\u70b9\u53ef\u80fd\u6709**\u591a\u79cd\u901a\u8fbe\u7684\u65b9\u6cd5**\uff0c\u4f46\u662f\uff0c\u4e0d\u540c\u7684\u901a\u8fbe\u65b9\u6cd5\u4e5f\u6709\u4e0d\u540c\u7684\u5de6\u53f3\u79fb\u52a8\u6b21\u6570\uff0c\u7b2c\u4e00\u6b21\u5230\u8fbe\u8fd9\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u53ef\u80fd**\u5de6\u53f3\u79fb\u52a8\u6b21\u6570\u5e76\u4e0d\u662f\u6700\u5c0f\u7684**\uff0c\u5bfc\u81f4\u4e0b\u4e00\u4e2a\u70b9\u65e0\u6cd5\u8bbf\u95ee\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u9700\u8981\u53d6\u8fd9\u4e9b\u65b9\u6cd5\u7684\u6700\u5c0f\u503c\u3002\n\n## \u5982\u4f55\u53d6\u6700\u5c0f\u503c\u5462\uff1f\n\u6211\u4eec\u53ef\u4ee5\u5728 BFS \u641c\u7d22\u7684\u8fc7\u7a0b\u4e2d\u505a\u4e00\u4e9b\u5224\u65ad\uff1a\n\n\u5982\u679c\u8fd9\u4e2a\u70b9\u6765\u8fc7\uff0c\u5224\u65ad\u7b2c\u4e8c\u6b21\u6765\u662f\u5426\u6709\u66f4\u5c0f\u7684\u5de6\u53f3\u79fb\u52a8\u6b21\u6570\u3002\n\n\u5982\u679c\u6ca1\u6765\u8fc7\uff0c\u5c31\u7167\u5e38\u8bbf\u95ee\u3002\n\n\u5224\u65ad\u7684\u4ee3\u7801\uff1a\n\n```cpp\nif(x>=1&&x<=n&&y>=1&&y<=m){\n\tif(a[x][y]=='.'&&nl<=l&&nr<=r){\n\t\tq.push((node){x,y,nl,nr});\n\t\tp[x][y].l=nl;\n\t\tp[x][y].r=nr;\n\t\ta[x][y]='+';\n\t\tans++;\n\t}\n\telse if(a[x][y]=='+'){\n\t\tif(nl<p[x][y].l&&nr<p[x][y].r){\n\t\t\tq.push((node){x,y,nl,nr});\n\t\t\tp[x][y].l=nl;\n\t\t\tp[x][y].r=nr;\n\t\t}\n\t}\n}\n```\n## \u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u80fd\u6109\u5feb\u5730BFS\u4e86\uff01\n\n# code\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nstruct node{\n\tint x,y,l,r;\n};//\u72b6\u6001\u7ed3\u6784\u4f53\nint n,m,sx,sy,l,r,ans=1;\nnode off[4]={{0,1,0,1},{1,0,0,0},{0,-1,1,0},{-1,0,0,0}};//\u65b9\u5411\u5411\u91cf\nchar a[2005][2005];//\u5730\u56fe\nnode p[2005][2005];//\u8bb0\u5f55\u8fd9\u4e2a\u70b9\u5de6\uff0c\u53f3\u79fb\u52a8\u8bbf\u95ee\u7684\u6b21\u6570\nint main(){\n\tcin>>n>>m>>sx>>sy>>l>>r;\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin>>a[i][j];\n\t\t}\n\t}\n  \t//BFS\uff1a\n\tqueue<node>q;\n\tq.push((node){sx,sy,0,0});\n\ta[sx][sy]='+'; \n\tp[1][1].l=p[1][1].r=0;\n\twhile(!q.empty()){\n\t\tnode k=q.front();\n\t\tfor(int i=0;i<4;i++){\n\t\t\tint x=k.x+off[i].x;\n\t\t\tint y=k.y+off[i].y;\n\t\t\tint nl=k.l+off[i].l;\n\t\t\tint nr=k.r+off[i].r;\n\t\t\tif(x>=1&&x<=n&&y>=1&&y<=m){\n\t\t\t\tif(a[x][y]=='.'&&nl<=l&&nr<=r){//\u6ca1\u8bbf\u95ee\u8fc7\u7684\u70b9\u8bbf\u95ee\n\t\t\t\t\tq.push((node){x,y,nl,nr});\n\t\t\t\t\tp[x][y].l=nl;\n\t\t\t\t\tp[x][y].r=nr;\n\t\t\t\t\ta[x][y]='+';\n\t\t\t\t\tans++;\n\t\t\t\t}\n\t\t\t\telse if(a[x][y]=='+'){//\u88ab\u8bbf\u95ee\u8fc7\u7684\u70b9\u91cd\u65b0\u5224\u65ad\n\t\t\t\t\tif(nl<p[x][y].l&&nr<p[x][y].r){\n\t\t\t\t\t\tq.push((node){x,y,nl,nr});\n\t\t\t\t\t\tp[x][y].l=nl;\n\t\t\t\t\t\tp[x][y].r=nr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tq.pop();\n\t}\n    cout<<ans;\n\treturn 0;\n}\n\n```\n\n\n",
        "postTime": 1616230342,
        "uid": 247220,
        "name": "StarryWander",
        "ccfLevel": 4,
        "title": "CF1063B"
    },
    {
        "content": "\u5148\u7ed9\u4e2a\u516c\u5f0f\uff1a\n$$\\boxed{r-l=s-e}$$\n\u5176\u4e2d $r$ \uff0c $l$ \u8868\u793a\u5411\u5de6\uff0c\u53f3\u8d70\u7684\u6b65\u6570\uff0c $s$ \uff0c $e$ \u8868\u793a\u8d77\u70b9\u548c\u7ec8\u70b9\u7684\u7eb5\u5750\u6807\u3002\n\n\u53ef\u89c1\u5f53\u8d77\u70b9\u7ec8\u70b9\u786e\u5b9a\u65f6\uff0c\u5411\u5de6\u7684\u6b65\u6570\u8d8a\u5c0f\uff0c\u5411\u53f3\u4e5f\u8d8a\u5c0f\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002\n\n\u8003\u8651\u4f7f\u7528 bfs \u3002\n\n\u5148\u8ba9\u8d77\u70b9\u5750\u6807\u4f34\u968f\u5de6\u53f3\u6b65\u6570\uff08 $0$ \uff09 \u5165\u961f\uff0c\u6bcf\u4e00\u6b21\u53d6\u51fa\u961f\u9996\uff0c\u5982\u679c\u5750\u6807\u4e0d\u5408\u6cd5\u6216\u8005\u6709\u6bd4\u5b83\u5de6\u53f3\u6b65\u6570\u66f4\u5c0f\u6216\u8005\u5de6\u53f3\u6b65\u6570\u5df2\u8d85\u51fa\u6700\u5927\u8303\u56f4\u5c31\u91cd\u65b0\u64cd\u4f5c\uff0c\u4e0d\u7136\u5411\u5176\u56db\u5468\u6269\u5c55\u961f\u5217\uff0c\u76f4\u5230\u961f\u5217\u7a7a\u4e3a\u6b62\u3002\n\n## $Code$\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<map>\n#include<queue>\nusing namespace std;\nconst int MAXN=2e3+5;\nchar a[MAXN][MAXN];\nint n,m,r,c,x,y;\nstruct node{\n\tint x,y,r,s;//\u5750\u6807,step->x-1\n}dp,dq;\nqueue <node> us;\nint xx[MAXN][MAXN];\nint dx[4]={-1,0,0,1},dy[4]={0,1,-1,0},dr[4]={0,0,1,0},ds[4]={0,1,0,0};\nint ans=0;\nint main(){\n\tcin>>n>>m>>r>>c>>x>>y;\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++){\n\t\t\tcin>>a[i][j];\n\t\t\txx[i][j]=1e9;\n\t\t}\n\tdp.x=r,dp.y=c,dp.r=0,dp.s=0;\n\tus.push(dp);\n\twhile(!us.empty()){\n\t\tdp=us.front();\n\t\tus.pop();\n\t\tif(xx[dp.x][dp.y]<=dp.r||dp.r>x||dp.s>y||a[dp.x][dp.y]!='.')\n\t\t\tcontinue;\n\t\tif(xx[dp.x][dp.y]==1e9)\n\t\t\tans++;\n\t\txx[dp.x][dp.y]=dp.r;\n\t\tfor(int i=0;i<4;i++){\n\t\t\tdq.x=dp.x+dx[i];\n\t\t\tdq.y=dp.y+dy[i];\n\t\t\tdq.r=dp.r+dr[i];\n\t\t\tdq.s=dp.s+ds[i];\n\t\t\tus.push(dq);\n\t\t}\n\t}\n\tcout<<ans;\n}\n```\n",
        "postTime": 1620224790,
        "uid": 248400,
        "name": "Inaba_Meguru",
        "ccfLevel": 7,
        "title": "CF1063B Labyrinth \u9898\u89e3"
    },
    {
        "content": "01bfs\u6a21\u677f\u9898 \u849f\u84bb\u4e0d\u4f1a\u4f18\u5316 \u76f4\u63a5\u7206\u641c \u8d85\u4e0d\u4e86\u65f6\n\u8fd9\u9053\u989801bfs\u7684\u5927\u4f53\u601d\u8def\u5c31\u662f\u7ef4\u62a4\u4e00\u4e2a\u53cc\u7aef\u961f\u5217\uff0c\u628a\u5411\u4e0a\u548c\u5411\u4e0b\u8d70\u770b\u6210\u8fb9\u6743\u4e3a0\uff0c\u628a\u5411\u5de6\u548c\u5411\u53f3\u8d70\u770b\u6210\u8fb9\u6743\u4e3a1\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a01\u8fb9\u6743\u7684\u6700\u77ed\u8def\u95ee\u9898\u3002\u5982\u679c\u8fb9\u6743\u4e3a0\u7684\u8bdd\uff0c\u4ece\u961f\u5934\u63d2\u5165\uff0c\u5982\u679c\u8fb9\u6743\u4e3a1\u7684\u8bdd\uff0c\u4ece\u961f\u5c3e\u63d2\u5165\u3002\u4fdd\u8bc1\u6bcf\u6b21\u51fa\u961f\u7684\u90fd\u662f\u6700\u5c0f\u7684\u3002\n```\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<deque>\n#include<algorithm>\nusing namespace std;\nint n,m,r,c,x,y;\nchar s[2010][2010];\nbool vis[2010][2010];\nint xx[4]={1,-1,0,-0};\nint yy[4]={0,0,-1,1};\nint ans;\nstruct node{\n\tint x,y,l,r;//x,y\u8868\u793a\u5f53\u524d\u5750\u6807\uff0cl,r\u5206\u522b\u8868\u793a\u8fd8\u80fd\u5411\u5de6\u548c\u5411\u53f3\u8d70\u7684\u6b65\u6570\n};\nint main()\n{\n\tcin>>n>>m>>r>>c>>x>>y;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tfor(int j=1;j<=m;j++)\n\t\t{\n\t\t\tcin>>s[i][j];\n\t\t}\n\t}\n\tdeque<node> q;//\u53cc\u7aef\u961f\u5217\n\tq.push_back((node){r,c,x,y});\n\twhile(!q.empty())\n\t{\n\t\tnode p;\n\t\tp=q.front();\n\t\tq.pop_front();\n\t\tif(vis[p.x][p.y]==1||(p.l<0)||(p.r<0)) continue;\n\t\tvis[p.x][p.y]=1;\n\t\tans++;\n\t\tfor(int i=0;i<4;i++)\n\t\t{\n\t\t\tint dx=p.x+xx[i];\n\t\t\tint dy=p.y+yy[i];\n\t\t\tif(dx<=0||dx>n||dy<=0||dy>m||s[dx][dy]=='*'||vis[dx][dy]==1) continue;\n\t\t\tif(i==0||i==1)\n\t\t\t{\n\t\t\t\tq.push_front((node){dx,dy,p.l,p.r});\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(i==2)\n\t\t\t{\n\t\t\t\tq.push_back((node){dx,dy,p.l-1,p.r});\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(i==3)\n\t\t\t{\n\t\t\t\tq.push_back((node){dx,dy,p.l,p.r-1});\n\t\t\t}\n\t\t}\n\t}\n\tcout<<ans;\n\treturn 0;\n}",
        "postTime": 1587264926,
        "uid": 250699,
        "name": "Herkaii",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "\u4e00\u9053\u9ec4\u9898\u5c45\u7136\u88ab\u8bc4\u7d2b\u4e86\u2026\u2026\n\n\u76f4\u63a5BFS\n\n\u6211\u5c06\u4e0a\u4e0b\u79fb\u52a8\u7684\u52a0\u5165\u5bf9\u5934\uff0c\u5de6\u53f3\u79fb\u52a8\u7684\u52a0\u5165\u961f\u5c3e\uff0c\u8fdb\u884c\u5e38\u89c4\u7684BFS\u5373\u53ef\n\n### \u6700\u5173\u952e\u7684\u8bc1\u660e\uff1a\u8bc1\u660enode\u4e2d\u4e0d\u5b58\u5728(a.l>b.l&&a.r>b.r)\u6216(a.l<b.l&&a.r<b.r)\u7684\u60c5\u51b5\n\n\u56e0\u4e3aa.l-b.l==-(a.r-b.r)\n\n\u5373a.l-b.l==b.r-a.r\n\n\u6240\u4ee5\u539f\u547d\u9898\u6210\u7acb\n\n\n#### \u7528STL\u4e2d\u7684\u53cc\u7aef\u961f\u5217\u7ef4\u62a4\u6570\u7ec4\n\n\u5165\u961f\u65f6\uff0c\u5411\u4e0a\u6216\u5411\u4e0b\u7684\u5728\u961f\u5934\u5165\u961f\uff0c\u5411\u5de6\u6216\u5411\u53f3\u7684\u5728\u961f\u5c3e\u5165\u961f\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\n\nconst ll lx[4]={-1,1,0,0},\n\t\t ly[4]={0,0,-1,1};\n//0:\u5411\u4e0a\n//1:\u5411\u4e0b\n//2:\u5411\u5de6\n//3:\u5411\u53f3\n\nll n,m,r,c,L,R,ans=1;//ans\u7684\u521d\u503c\u4e3a1\uff0c\u56e0\u4e3a\u8d77\u70b9\u4e00\u5b9a\u53ef\u4ee5\u8d70\u5230\nchar a[2010][2010];\nbool b[2010][2010];\n//b\u4e3afalse\u4ee3\u8868\u8fd9\u4e2a\u70b9\u6ca1\u6709\u88ab\u8d70\u8fc7,\u4e3atrue\u4ee3\u8868\u8d70\u8fc7\nstruct node{\n\tll x,y,l,r;\n    //x\u4ee3\u8868\u5f53\u524d\u4f4d\u7f6e\u6240\u5728\u884c\n    //y\u4ee3\u8868\u5f53\u524d\u4f4d\u7f6e\u6240\u5728\u5217\n    //l\u4ee3\u8868\u5f53\u524d\u4f4d\u7f6e\u8fd8\u80fd\u5411\u5de6\u79fb\u52a8\u7684\u6b21\u6570\n    //r\u4ee3\u8868\u5f53\u524d\u4f4d\u7f6e\u8fd8\u80fd\u5411\u53f3\u79fb\u52a8\u7684\u6b21\u6570\n};\ndeque<node> q;\n\nint main(){\n\tscanf(\"%lld %lld\",&n,&m);//\u77e9\u9635\u7684\u5927\u5c0f\n\tscanf(\"%lld %lld\",&r,&c);//\u73b0\u5728\u7684\u4f4d\u7f6e\n\tscanf(\"%lld %lld\",&L,&R);//\u53ef\u4ee5\u5411\u5de6\u6216\u6709\u79fb\u52a8\u7684\u6b21\u6570\n\tfor(ll i=1; i<=n; i++){\n\t\tscanf(\"%s\",a[i]+1);//\u8f93\u5165\u70b9\u9635\n\t}\n\t\n\tmemset(b,false,sizeof(b));//b\u6ca1\u6709\u88ab\u8d70\u8fc7\n\tb[r][c]=true;//\u8d77\u70b9\u76f4\u63a5\u6807\u8bb0\u4e3a\u88ab\u8d70\u8fc7\n\tq.push_back(node{r,c,L,R});\n\twhile(!q.empty()){\n\t\tnode Next=q.front();//\u53d6\u51fa\u961f\u5934\n        q.pop_front();//\u961f\u5934\u51fa\u961f\uff0c\u56e0\u4e3a\u540e\u9762\u7684\u5165\u961f\u53ef\u80fd\u5728\u961f\u5934\u5165\u961f\uff0c\u6240\u4ee5\u8981\u5148\u51fa\u961f\n\t\tfor(ll i=0; i<4; i++){//\u7a77\u4e3e4\u4e2a\u65b9\u5411\n\t\t\tll x=Next.x+lx[i],y=Next.y+ly[i];//\n\t\t\tif(x>=1&&x<=n&&y>=1&&y<=m&&(a[x][y]=='.')&&(b[x][y]==false)){\n            \t//\u7ee7\u7eed\u641c\u7d22\u7684\u6761\u4ef6\uff1a\n                //1.\u6ca1\u6709\u8303\u56f4\u8d85\u9650\n                //2.\u8fd9\u4e2a\u70b9\u53ef\u4ee5\u8d70\n                //3.\u4ee5\u524d\u6ca1\u6709\u8d70\u8fc7\n\t\t\t\tswitch(i){\n\t\t\t\t\tcase 0:\n\t\t\t\t\tcase 1:{\n                    //\u5411\u4e0a\u6216\u5411\u4e0b\u8d70\n\t\t\t\t\t\tans++;//\u8ba1\u6570\u5668+1\uff0c\u4e0b\u540c\n\t\t\t\t\t\tb[x][y]=true;//\u6539\u6210\u8d70\u8fc7\n\t\t\t\t\t\tq.push_front(node{x,y,Next.l,Next.r});//\u961f\u5934\u5165\u961f\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 2:{\n                    //\u5411\u5de6\u8d70\n\t\t\t\t\t\tif(Next.l){\n\t\t\t\t\t\t\tans++;\n\t\t\t\t\t\t\tq.push_back(node{x,y,Next.l-1,Next.r});\n\t\t\t\t\t\t\tb[x][y]=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 3:{\n                    //\u5411\u53f3\u8d70\n\t\t\t\t\t\tif(Next.r){\n\t\t\t\t\t\t\tans++;\n\t\t\t\t\t\t\tq.push_back(node{x,y,Next.l,Next.r-1});\n\t\t\t\t\t\t\tb[x][y]=true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\t\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%lld\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1540362740,
        "uid": 27924,
        "name": "xukuan",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "\u9996\u5148\uff0c\u76f4\u63a5\u770b\u9898\u76ee\uff0c\u521d\u6b65\u53d1\u73b0\u8fd9\u662f\u4e00\u9053bfs\n\n### 1.\u4e0a\u4e0b\u53ef\u4ee5\u968f\u610f\u79fb\u82e5\u5e72\u6b65\n\n### 2.\u5de6\u53f3\u79fb\u52a8\u6709\u4e00\u5b9a\u9650\u5236\n\n\u521a\u5f00\u59cb\u7684\u6211\uff0c\u6253\u51fa\u4e86\u5982\u4e0b\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <queue>\nusing namespace std;\nstruct Point\n{\n    int x;\n    int y;\n    int lstep;//\u5411\u5de6\u8d70\u7684\u6b65\u6570 \n    int rstep;//\u5411\u53f3\u8d70\u7684\u6b65\u6570 \n};\nconst int D[4][2] = { 0,1,1,0,0,-1,-1,0 };\nint n, m;\nint si, sj;\nint lMax, rMax;//\u5411\u5de6\u3001\u5411\u53f3\u6700\u5927\u53ef\u8d70\u6b65\u6570 \nchar mp[2001][2001];\nbool vis[2001][2001];//\u5224\u65ad\u662f\u5426\u8d70\u8fc7 \nbool check(int i, int j, int l, int r)//\u5224\u65ad\u8fd9\u4e00\u6b65\u662f\u5426\u53ef\u8d70 \n{\n    return (i >= 0 && i < n&& j >= 0 && j < m&& l <= lMax && r <= rMax && !vis[i][j] && mp[i][j] != '*');\n    //\u5224\u65ad\u662f\u5426\u8d70\u51fa\u5730\u56fe\uff0c\u5de6\u53f3\u79fb\u52a8\u6b65\u6570\u662f\u5426\u6ee1\u8db3\u8981\u6c42\u4ee5\u53ca\u662f\u5426\u8d70\u8fc7\u8fd9\u4e2a\u70b9\u5e76\u4e14\u8fd9\u4e2a\u70b9\u53ef\u4ee5\u8d70\n}\nint bfs(int i, int j)//\u5e7f\u641c \n{\n    queue<Point> q;\n    q.push({ i,j,0,0 });\n    Point tmp, p;\n    int cnt = 1;//\u53ef\u5230\u8fbe\u7684\u70b9\u7684\u4e2a\u6570 \n    vis[i][j] = true;//\u7b2c\u4e00\u4e2a\u70b9\u8bbe\u4e3a\u8d70\u8fc7\n    while (!q.empty())\n    {\n        tmp = q.front(), p = tmp;\n        q.pop();\n        for (int i = 0; i < 4; i++)\n        {\n            p = tmp;\n            p.x += D[i][0], p.y += D[i][1];//\u79fb\u52a8\n            if (i == 0) p.rstep++;//\u5411\u53f3\u8d70 \n            if (i == 2) p.lstep++;//\u5411\u5de6\u8d70 \n            if (check(p.x, p.y, p.lstep, p.rstep))//\u82e5\u8fd9\u4e00\u6b65\u53ef\u8d70 \n                q.push(p), vis[p.x][p.y] = true, cnt++;//\u5c06\u8fd9\u4e2a\u70b9\u5165\u961f,\u4e2a\u6570\u52a0\u4e00 \n        }\n    }\n    return cnt;\n}\nint main()\n{\n    cin >> n >> m;\n    cin >> si >> sj;\n    cin >> lMax >> rMax;\n    for (int i = 0; i < n; i++)\n        for (int j = 0; j < m; j++)\n            cin >> mp[i][j];\n    si--, sj--;//\u6211\u8fd9\u91cc\u4e0b\u6807\u4ece0\u5f00\u59cb \n    cout << bfs(si, sj);\n    return 0;\n}\n```\n\u7136\u540e\u5c31\u4f1a\u53d1\u73b0\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/pv4gar1f.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\n\n### \u56e0\u4e3a\u6709\u65f6\u5019\u8d70\u5230\u540c\u4e00\u4e2a\u70b9\uff0c\u6240\u7528\u5de6\u53f3\u6b65\u6570\u53ef\u80fd\u4e0d\u540c\n\n\u6240\u4ee5\u5f53\u6211\u4eec\u8d70\u5230\u5df2\u8d70\u8fc7\u7684\u70b9\uff0c\u9700\u8981\u518d\u4e00\u6b21\u5224\u65ad\u5f53\u524d\u5de6\u53f3\u5df2\u8d70\u7684\u6b65\u6570\u662f\u5426\u53ef\u4ee5\u518d\u8d70\u5230\u5176\u4ed6\u70b9\n\n\u82e5\u8fd9\u4e2a\u70b9 \u73b0\u5728\u5de6\u79fb\u7684\u6b21\u6570 < \u6700\u5c0f\u5de6\u79fb\u6b21\u6570 \n\n\u4e14 \u73b0\u5728\u53f3\u79fb\u7684\u6b21\u6570 < \u6700\u5c0f\u53f3\u79fb\u6b21\u6570\n\n\u5219\u5c06\u8fd9\u4e2a\u70b9\u7684\u6700\u5c11\u79fb\u52a8\u6b21\u6570\u66f4\u65b0\u3002\n\n\u82e5\u53ea\u6709\u4e00\u4e2a\u65b9\u5411 < \u6700\u5c0f\u6b21\u6570\uff0c\u5219\u4e0d\u66f4\u65b0\uff0c\u4f46\u4ecd\u628a\u5b83\u5165\u961f\n\nAC\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <iostream>\n#include <cstring>\n#include <queue>\nusing namespace std;\nstruct Point\n{\n    int x;\n    int y;\n    int lstep;//\u5411\u5de6\u8d70\u7684\u6b65\u6570 \n    int rstep;//\u5411\u53f3\u8d70\u7684\u6b65\u6570 \n};\nconst int D[4][2] = { 0,1,1,0,0,-1,-1,0 };\nint n, m;\nint si, sj;\nint lMax, rMax;//\u5411\u5de6\u3001\u5411\u53f3\u6700\u5927\u53ef\u8d70\u6b65\u6570 \nchar mp[2001][2001];\nbool vis[2001][2001];//\u5224\u65ad\u662f\u5426\u8d70\u8fc7 \nint cnt[2001][2001][2];//\u8d70\u5230\u8fd9\u4e2a\u70b9\u7684\u6700\u5c11\u5de6\u53f3\u79fb\u52a8\u6b21\u6570\uff0ccnt[i][j][0]\u8868\u793a\u8d70\u5230(i,j)\u5411\u5de6\u8d70\u7684\u6b65\u6570\uff0c[1]\u4ee3\u8868\u5411\u53f3\nbool check(int i, int j, int l, int r)//\u5224\u65ad\u8fd9\u4e00\u6b65\u662f\u5426\u53ef\u8d70 \n{\n    return (i >= 0 && i < n&& j >= 0 && j < m&& l <= lMax && r <= rMax && !vis[i][j] && mp[i][j] != '*');\n    //\u5224\u65ad\u662f\u5426\u8d70\u51fa\u5730\u56fe\uff0c\u5de6\u53f3\u79fb\u52a8\u6b65\u6570\u662f\u5426\u6ee1\u8db3\u8981\u6c42\u4ee5\u53ca\u662f\u5426\u8d70\u8fc7\u8fd9\u4e2a\u70b9\u5e76\u4e14\u8fd9\u4e2a\u70b9\u53ef\u4ee5\u8d70\n}\nint bfs(int i, int j)\n{\n    queue<Point> q;\n    q.push({ i,j,0,0 });\n    Point tmp, p;\n    int ccnt = 1;//\u56e0\u4e3acnt[2001][2001][2]\u4e4b\u524d\u7684\u7edf\u8ba1\u6b21\u6570\u7684cnt\u51b2\u7a81\uff0c\u56e0\u6b64\u628a\u7edf\u8ba1\u6b21\u6570\u7684\u91cd\u547d\u540d\u4e3accnt\n    vis[i][j] = true;//\u7b2c\u4e00\u4e2a\u70b9\u8bbe\u4e3a\u8d70\u8fc7\n    while (!q.empty())\n    {\n        tmp = q.front(), p = tmp;\n        q.pop();\n        for (int i = 0; i < 4; i++)\n        {\n            p = tmp;\n            p.x += D[i][0], p.y += D[i][1];\n            if (i == 0) p.rstep++;//\u5de6\u6b65\u6570+1\n            if (i == 2) p.lstep++;//\u53f3\u6b65\u6570+1\n            if (check(p.x, p.y, p.lstep, p.rstep))\n                q.push(p), vis[p.x][p.y] = true, ccnt++, cnt[p.x][p.y][0] = p.lstep, cnt[p.x][p.y][1] = p.rstep;//\u6211\u4eec\u7b2c\u4e00\u6b21\u8d70\u5230\u8fd9\u4e2a\u70b9\n            else if (p.x >= 0 && p.y >= 0 && p.x < n && p.y < m && vis[p.x][p.y])//\u82e5\u5df2\u7ecf\u8d70\u8fc7\u8fd9\u4e2a\u70b9\n            {\n                if (p.lstep < cnt[p.x][p.y][0] && p.rstep < cnt[p.x][p.y][1])//\u5de6\u3001\u53f3\u90fd\u5c0f\u4e8e\u6700\u5c0f\u503c\n                    q.push(p), cnt[p.x][p.y][0] = p.lstep, cnt[p.x][p.y][1] = p.rstep;//\u5165\u961f\u5e76\u66f4\u65b0\n                if ((p.lstep < cnt[p.x][p.y][0] && p.rstep > cnt[p.x][p.y][1]) || (p.lstep > cnt[p.x][p.y][0] && p.rstep < cnt[p.x][p.y][1]))//\u5176\u4e2d\u4e00\u4e2a\u5c0f\u4e8e\u6700\u5c0f\u503c\n                    q.push(p);//\u53ea\u9700\u8981\u5165\u961f\n            }\n        }\n    }\n    return ccnt;\n}\nint main()\n{\n    memset(cnt, 0x3f, sizeof(cnt));//\u5148\u8d4b\u503c\u4e3a\u6700\u5927\u503c\n    cin >> n >> m;\n    cin >> si >> sj;\n    cin >> lMax >> rMax;\n    for (int i = 0; i < n; i++)\n        for (int j = 0; j < m; j++)\n            cin >> mp[i][j];\n    si--, sj--;//\u8fd9\u91cc\u6570\u7ec4\u4e0b\u6807\u4ece0\u5f00\u59cb\n    cout << bfs(si, sj);\n    return 0;\n}\n```\n![](https://cdn.luogu.com.cn/upload/image_hosting/cmbqfjxv.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n",
        "postTime": 1611329134,
        "uid": 263374,
        "name": "FanYongchen",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1063B\u3010Labyrinth\u3011"
    },
    {
        "content": "**\u8fd9\u662f\u4e00\u9053\u5e7f\u641c\u9898**\n\n\u9996\u5148\u8981\u660e\u786e\u79fb\u52a8\u65b9\u5411\uff0c\u4e0a\u4e0b\u79fb\u52a8\u6ca1\u6709\u9650\u5236\uff0c\u5411\u5de6\u4e0d\u8d85\u8fc7$x$\u6b21\uff0c\u5411\u53f3\u4e0d\u8d85\u8fc7$y$\u6b21\uff0c\u6240\u4ee5\u8981\u5224\u65ad\u5411\u5de6\u548c\u5411\u53f3\u662f\u5426\u5408\u7406\uff0c\u53ef\u4ee5\u4fdd\u5b58\u5230\u8fbe\u6bcf\u4e2a\u70b9\uff0c\u8fd9\u4e2a\u70b9\u8fd8\u53ef\u4ee5\u7528\u591a\u5c11\u4e2a\u5411\u5de6\u548c\u5411\u53f3\u952e\uff0c\u90a3\u5c31\u9700\u8981\u4e00\u4e2a\u53cc\u7aef\u961f\u5217\u4e86\n\n```cpp\nstruct node{\n\tint x;//\u884c \n\tint y;//\u5217 \n\tint l;//\u5de6\u6709\u591a\u5c11\u6b21 \n\tint r;//\u53f3\u6709\u591a\u5c11\u6b21 \n}dq[N*N*2];//\u53cc\u7aef\u961f\u5217 \n```\n\u6839\u636e\u4e0a\u4e0b\u79fb\u52a8\u65b9\u5411\u5165\u961f\uff0c\u5982\u679c\u5411\u5de6\u6216\u5411\u53f3\u5c31\u961f\u5c3e\u5165\u961f\uff0c\u5411\u4e0a\u5411\u4e0b\u79fb\u52a8\u5c31\u5728\u5bf9\u5934\u5165\u961f,\u4f7f\u7528\u4e00\u4e2a $switch$\n```cpp\n#include<bits/stdc++.h>\n#include<iostream>\nusing namespace std;\nconst int N=2010;\nstruct node{\n\tint x;\n\tint y;\n\tint l;\n\tint r;\n}dq[N*N*2];\nchar g[N][N];//\u5730\u56fe\nbool vis[N][N];//\u6807\u8bb0\u8bbf\u95ee\u6570\u7ec4\nint head,tail,r,c,x,y,n,m,ans;\nconst int dx[]={-1,1,0,0};\nconst int dy[]={0,0,1,-1};//\u65b9\u5411\u6570\u7ec4\nvoid bfs(){\n\thead=N*N;\n\ttail=N*N;\n\ttail++;\n\tdq[tail].x=r-1;\n\tdq[tail].y=c-1;\n\tdq[tail].l=x;\n\tdq[tail].r=y;\n\tvis[r-1][c-1]=1;//\u5c06\u7b2c\u4e00\u4e2a\u70b9\u5165\u961f\n\twhile(head!=tail){\n\t\thead ++;\n\t\tnode t1=dq[head];\n\t\tfor(int i=0;i<4;i++){\n\t\t\tnode t2=t1;\n\t\t\tt2.x+=dx[i];\n\t\t\tt2.y+=dy[i];\n\t\t\tif(t2.x<0||t2.x>=n||t2.y<0||t2.y>=m||g[t2.x][t2.y]=='*'||vis[t2.x][t2.y]){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tswitch(dy[i]){\n\t\t\t\tcase 0://\u4e0a\u4e0b\u79fb\u52a8,\u5bf9\u5934\u5165\u5217\n\t\t\t\tans++;\n\t\t\t\tdq[head]=t2;\n\t\t\t\thead--;\n\t\t\t\tvis[t2.x][t2.y]=1;\n\t\t\t\tbreak;\n\t\t\t\tcase 1://\u5411\u53f3\u79fb\u52a8,\u5bf9\u5c3e\u5165\u5217\n\t\t\t\tif(!t2.r)break;\n\t\t\t\tans++;\n\t\t\t\ttail++;\n\t\t\t\tdq[tail]=t2;\n\t\t\t\tdq[tail].r--;\n\t\t\t\tvis[t2.x][t2.y]=1;\n\t\t\t\tbreak;\n\t\t\t\tcase -1://\u5411\u5de6\u79fb\u52a8,\u5bf9\u4f4d\u5165\u5217\n\t\t\t\tif(!t2.l)break;\n\t\t\t\tans++;\n\t\t\t\ttail++;\n\t\t\t\tdq[tail]=t2;\n\t\t\t\tdq[tail].l--;\n\t\t\t\tvis[t2.x][t2.y]=1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\nint main(){\n\tans=1;\n\tcin>>n>>m>>r>>c>>x>>y; \n\tfor(int i=0;i<n;i++){\n\t\tcin>>g[i];\n\t}\n\tbfs();\n\tcout<<ans;\n\treturn 0;\n}\n```\n",
        "postTime": 1606471129,
        "uid": 389997,
        "name": "\u590f\u7c73\u4e9a\u4e01",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "\u521d\u89c1\u8fd9\u9898\uff0c\u6211\u8ba4\u4e3a\u8fd9\u4e0d\u5c31\u662f\u4e00\u4e2a\u5e26\u4e86\u5de6\u53f3\u79fb\u52a8\u6b21\u6570\u9650\u5236\u7684\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u9898\u76ee\u5417\uff1f\u4e8e\u662f\u6211\u76f4\u63a5\u5199\u4e86\u4e00\u4e2a\u666e\u901a\u7684\u5e7f\u641c\u4ee3\u7801\u4ea4\u4e86\u4e0a\u53bb\u3002\n\n\u6b63\u5982\u6211\u6240\u60f3\u7684\uff0c\u666e\u901a\u7684\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u4ee3\u7801\u5728\u7b2c 40 \u4e2a\u6d4b\u8bd5\u70b9\u6302\u4e86\u3002\n\n\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\n\n\u6211\u4eec\u6765\u770b\u4e00\u7ec4\u6d4b\u8bd5\u6570\u636e\uff1a\n\n\t10 10\n\t10 4\n\t10 9\n\t...*******\n\t.*.*******\n\t.*.*******\n\t.*.*******\n\t.*.*******\n\t.*.*......\n\t.*.*.*****\n\t.*........\n\t.********.\n\t..........\n    \n\u624b\u52a8\u6a21\u62df\u540e\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u6309\u7167\u4e00\u822c\u7684\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\u7684\u987a\u5e8f\u62d3\u5c55\uff0c\u4f1a\u5f97\u5230\u9519\u8bef\u7684\u7b54\u6848\u3002\u56e0\u4e3a\u62d3\u5c55\u7684\u9014\u4e2d\uff0c\u4e24\u4e2a\u62d3\u5c55\u8def\u5f84\u4f1a\u91cd\u5408\u5728\u67d0\u4e00\u70b9\u3002\u800c\u5176\u4e2d\u80fd\u62d3\u5c55\u66f4\u591a\u683c\u70b9\u7684\u65b9\u6848\u56e0\u4e3a\u5148\u5230\u7684\u52a3\u7684\u65b9\u6848\u800c\u88ab\u820d\u5f03\u4e86\u3002\n\n\u53d1\u73b0\u95ee\u9898\u540e\uff0c\u6211\u4eec\u8003\u8651\u5982\u4f55\u907f\u514d\u6b64\u60c5\u51b5\u3002\n\n\u4e00\u79cd\u53ef\u884c\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff0c\u7528\u53e6\u5916\u4e00\u4e2a\u4e8c\u4f4d\u6570\u7ec4\uff0c\u8bb0\u5f55\u62d3\u5c55\u5230\u6bcf\u4e2a\u70b9\u65f6\uff0c\u80fd\u5411\u5de6\u79fb\u52a8\u548c\u5411\u53f3\u79fb\u52a8\u7684\u6b65\u6570\u4e4b\u548c\u7684\u6700\u5927\u503c\uff0c\u4ee5\u6b64\u6765\u6bd4\u8f83\u65b9\u6848\u7684\u4f18\u52a3\u3002\u5f53\u62d3\u5c55\u5230\u4e00\u4e2a\u5df2\u7ecf\u62d3\u5c55\u8fc7\u7684\u70b9\u65f6\uff0c\u6bd4\u8f83\u65b0\u7684\u65b9\u6848\u662f\u5426\u6bd4\u4e4b\u524d\u5230\u8fbe\u8fd9\u4e2a\u70b9\u7684\u65b9\u6848\u66f4\u4f18\uff0c\u5982\u679c\u66f4\u4f18\u5219\u62d3\u5c55\u66f4\u4f18\u7684\u65b9\u6848\u3002\n\n\u5f53\u7136\u4e5f\u53ef\u4ee5\u9009\u62e9\u5176\u5b83\u7684\u65b9\u5f0f\u6765\u6bd4\u8f83\u65b9\u6848\u7684\u4f18\u52a3\u3002\u5177\u4f53\u7684\u5b9e\u73b0\u53ef\u4ee5\u81ea\u884c\u5c1d\u8bd5\u3002\n\n\u4e0b\u9762\u662f\u672c\u4eba\u6839\u636e\u4e0a\u8ff0\u65b9\u6cd5\u5b9e\u73b0\u7684\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#define ll long long\n#define rgt register int\nusing namespace std;\n\nconst int mxn = 2020;\n\nint n,m,r,c,nl,nr,hd,tl,cnt;\nchar mp[mxn][mxn];  //\u6e38\u620f\u5730\u56fe\u5b58\u50a8\nint flr[mxn][mxn];  //\u8bb0\u5f55\u80fd\u5de6\u53f3\u79fb\u52a8\u6b65\u6570\u4e4b\u548c\uff0c\u7528\u4e8e\u6bd4\u8f83\u65b9\u6848\u4f18\u52a3\nint dx[4]={-1,1,0,0};\nint dy[4]={0,0,1,-1};\nstruct que_mode{\n\tint qx;\n\tint qy;\n\tint fl;  //\u80fd\u5411\u5de6\u79fb\u52a8\u7684\u6b65\u6570\n\tint fr;  //\u80fd\u5411\u53f3\u79fb\u52a8\u7684\u6b65\u6570\n}que[mxn*mxn];\n\nint main(){ \n\tchar cc;\n\tscanf(\"%d%d%d%d%d%d\",&n,&m,&r,&c,&nl,&nr);\n\tfor(rgt i=1;i<=n;i++){\n\t\tscanf(\"%c\",&cc);\n\t\tfor(rgt j=1;j<=m;j++){\n\t\t\tscanf(\"%c\",&mp[i][j]);\n\t\t}\n\t}   //\u8bfb\u5165\u6570\u636e\n    \n\ttl++;\n\tque[tl].qx=r;\n\tque[tl].qy=c;\n\tque[tl].fl=nl;\n\tque[tl].fr=nr;  //\u8d77\u70b9\u5165\u961f\n\tmp[r][c]='+';  //\u5c06\u8d70\u8fc7\u7684\u70b9\u7528+\u6807\u8bb0\n\tflr[r][c]=nl+nr;\n\tcnt++;  //\u7edf\u8ba1\n    \n\twhile(hd!=tl){\n\t\thd++;\n\t\tfor(rgt px,py,i=0;i<4;i++){\n\t\t\tpx=que[hd].qx+dx[i];\n\t\t\tpy=que[hd].qy+dy[i];\n\t\t\tif(px>0&&py>0&&px<=n&&py<=m&&mp[px][py]!='*'){\n\t\t\t\tif(mp[px][py]!='+'){  //\u62d3\u5c55\u6ca1\u6709\u8d70\u8fc7\u7684\u70b9\n                \n\t\t\t\t\tif(i==2){  //\u5411\u53f3\u79fb\u52a8\n\t\t\t\t\t\tif(que[hd].fr>0){\n\t\t\t\t\t\t\ttl++;\n\t\t\t\t\t\t\tque[tl].qx=px;\n\t\t\t\t\t\t\tque[tl].qy=py;\n\t\t\t\t\t\t\tque[tl].fr=que[hd].fr-1;  //\u6263\u9664\u76f8\u5e94\u6b65\u6570\n\t\t\t\t\t\t\tque[tl].fl=que[hd].fl;\n\t\t\t\t\t\t\tmp[px][py]='+';\n\t\t\t\t\t\t\tflr[px][py]=que[tl].fl+que[tl].fr;\n\t\t\t\t\t\t\tcnt++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n                    \n\t\t\t\t\tif(i==3){  //\u5411\u5de6\u79fb\u52a8\n\t\t\t\t\t\tif(que[hd].fl>0){\n\t\t\t\t\t\t\ttl++;\n\t\t\t\t\t\t\tque[tl].qx=px;\n\t\t\t\t\t\t\tque[tl].qy=py;\n\t\t\t\t\t\t\tque[tl].fr=que[hd].fr;\n\t\t\t\t\t\t\tque[tl].fl=que[hd].fl-1;  //\u6263\u9664\u76f8\u5e94\u6b65\u6570\n\t\t\t\t\t\t\tmp[px][py]='+';\n\t\t\t\t\t\t\tflr[px][py]=que[tl].fl+que[tl].fr;\n\t\t\t\t\t\t\tcnt++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n                    \n             //\u5176\u5b83\u60c5\u51b5\u6b63\u5e38\u5165\u961f\n\t\t\t\t\ttl++;\n\t\t\t\t\tque[tl].qx=px;\n\t\t\t\t\tque[tl].qy=py;\n\t\t\t\t\tque[tl].fr=que[hd].fr;\n\t\t\t\t\tque[tl].fl=que[hd].fl;\n\t\t\t\t\tmp[px][py]='+';\n\t\t\t\t\tflr[px][py]=que[tl].fl+que[tl].fr;\n\t\t\t\t\tcnt++;\n                    \n\t\t\t\t}else {\n\t\t\t\t\tif(flr[px][py]<que[hd].fl+que[hd].fr){\n                //\u9047\u5230\u66f4\u4f18\u65b9\u6848\uff0c\u62d3\u5c55\u5df2\u7ecf\u8d70\u8fc7\u7684\u70b9\u3011\n                \n\t\t\t\t\t\tif(i==2){  //\u5411\u53f3\u79fb\u52a8\n\t\t\t\t\t\t\tif(que[hd].fr>0&&flr[px][py]<que[hd].fl+que[hd].fr-1){\n\t\t\t\t\t\t\t\ttl++;\n\t\t\t\t\t\t\t\tque[tl].qx=px;\n\t\t\t\t\t\t\t\tque[tl].qy=py;\n\t\t\t\t\t\t\t\tque[tl].fr=que[hd].fr-1;\n\t\t\t\t\t\t\t\tque[tl].fl=que[hd].fl;\n\t\t\t\t\t\t\t\tflr[px][py]=que[tl].fl+que[tl].fr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n                        \n\t\t\t\t\t\tif(i==3){  //\u5411\u5de6\u79fb\u52a8\n\t\t\t\t\t\t\tif(que[hd].fl>0&&flr[px][py]<que[hd].fl+que[hd].fr-1){\n\t\t\t\t\t\t\t\ttl++;\n\t\t\t\t\t\t\t\tque[tl].qx=px;\n\t\t\t\t\t\t\t\tque[tl].qy=py;\n\t\t\t\t\t\t\t\tque[tl].fr=que[hd].fr;\n\t\t\t\t\t\t\t\tque[tl].fl=que[hd].fl-1;\n\t\t\t\t\t\t\t\tflr[px][py]=que[tl].fl+que[tl].fr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n                        \n                //\u5176\u5b83\u60c5\u51b5\u6b63\u5e38\u5165\u961f        \n\t\t\t\t\t\ttl++;\n\t\t\t\t\t\tque[tl].qx=px;\n\t\t\t\t\t\tque[tl].qy=py;\n\t\t\t\t\t\tque[tl].fr=que[hd].fr;\n\t\t\t\t\t\tque[tl].fl=que[hd].fl;\n\t\t\t\t\t\tflr[px][py]=que[tl].fl+que[tl].fr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprintf(\"%d\\n\",cnt);  //\u8f93\u51fa\u7edf\u8ba1\u7ed3\u679c\n\treturn 0;\n}\n\n```\n",
        "postTime": 1597499608,
        "uid": 57421,
        "name": "fls233666",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "\u5148\u6765\u8bf4\u660e\u4e00\u4e0b\u9898\u76ee\u7684\u610f\u601d\uff08\u539f\u9898\u76ee\u597d\u50cf\u6709\u70b9\u7cca\uff09\uff1a\u6240\u8c13\u5411\u5de6\u79fb\u52a8\u4e0d\u8d85\u8fc7x\u683c\uff0c\u6307\u7684\u662f\u4e0d\u80fd\u5411\u5de6\u79fb\u52a8x\u6b21\uff0c\u5373\u4e0d\u80fd\u6309\u8d85\u8fc7x\u6b21\u201c\u5411\u5de6\u201d\u952e\u3002\u5411\u53f3y\u683c\u540c\u7406\u3002  \n  \n\u597d\u50cf\u8fd8\u6ca1\u6709\u9898\u89e3\uff0c\u6240\u4ee5\u5148\u628a\u81ea\u5df1\u4e0d\u662f\u5f88\u4f18\u8d8a\u7684\u5bbd\u641c\u5199\u51fa\u6765\u3002  \n  \n**BFS**  \n~~Baidu First Search~~  \n\u6700\u6734\u7d20\u7684\u5bbd\u5ea6\u641c\u7d22\u5927\u5bb6\u5e94\u8be5\u90fd\u4f1a\u4e86\u3002\u6734\u7d20\u7684\u5bbd\u5ea6\u641c\u7d22\u6709\u4e00\u4e2a\u961f\u5217\u3002  \n\uff08\u6211\u4eec\u4e60\u60ef\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u5305\u542b\u6a2a\u5750\u6807\uff0c\u7eb5\u5750\u6807\u548c\u65f6\u95f4\uff09  \n```\nstruct data\n{\n\tint x;\n\tint y;\n\tint t;\n}q[100010];\n```  \n\u8fd9\u9898\u7684\u74f6\u9888\u662f\u5411\u5de6\u548c\u5411\u53f3\u79fb\u52a8\u7684\u6b21\u6570\u6709\u9650\u5236\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48\u4e0d\u628a\u5f53\u524d\u5411\u5de6\u548c\u5411\u53f3\u79fb\u52a8\u7684\u6b21\u6570\u4e5f\u5199\u5728\u8fd9\u4e2a\u7ed3\u6784\u4f53\u91cc\u5462\uff1f\u8fd9\u6837\u5c31\u53ef\u4ee5\u76f4\u63a5\u5728\u5bbd\u641c\u7684\u65f6\u5019\u5224\u65ad\uff0c\u628a\u4e0d\u7b26\u5408\u8981\u6c42\u7684\u60c5\u51b5\u622a\u6389\u4e86\u3002\u540c\u65f6\u8fd9\u9898\u53ea\u9700\u8981\u6c42\u80fd\u904d\u5386\u5230\u7684\u8282\u70b9\u7684\u4e2a\u6570\uff0c\u6240\u4ee5\u65f6\u95f4\u53ef\u4ee5\u4e0d\u52a0\u5165\u7ed3\u6784\u4f53\u3002  \n\u6700\u540e\u5199\u51fa\u6765\u662f\u8fd9\u6837\u7684\u3002  \n```\nstruct data\n{\n\tint x;\n\tint y;\n\tint l;\n\tint r;\n}q[16000000];\n```  \n\uff08\u961f\u5217\u7684\u7a7a\u95f4\u6211\u5f00\u6210\u4e86\u70b9\u6570\u7684\u56db\u500d\uff09  \n\u53ef\u662f\u76f8\u6bd4\u6734\u7d20\u7684\u5bbd\u5ea6\u641c\u7d22\uff0c\u5728\u904d\u5386\u5230\u540c\u4e00\u4e2a\u70b9\u7684\u65f6\u5019\uff0c\u4e24\u6761\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u5411\u5de6\u548c\u5411\u53f3\u79fb\u52a8\u7684\u6b21\u6570\u4e5f\u4e0d\u540c\u3002\u8fd9\u65f6\u5019\u5c31\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u4f4d\u7f6e\u76f8\u540c\u4f46\u5de6\u53f3\u79fb\u52a8\u6b21\u6570\u4e0d\u540c\u7684\u72b6\u6001\u3002\u8981\u60f3\u529e\u6cd5\u526a\u679d\u3002  \n\u4e3e\u4e2a\u4f8b\u5b50\uff1a  \n\u8def\u5f84A\u5230p\u70b9\u9700\u8981\u5de6\u79fb1\u6b21\uff0c\u53f3\u79fb1\u6b21\uff0c\u8def\u5f84B\u5230p\u70b9\u9700\u8981\u5de6\u79fb3\u6b21\uff0c\u53f3\u79fb2\u6b21\u3002\u5f88\u660e\u663e\uff0c\u8d70\u8def\u5f84B\u5230\u8fbep\u70b9\u540e\uff0c\u80fd\u518d\u904d\u5386\u5230\u7684\u8282\u70b9\u6570\u5fc5\u5b9a\u5c0f\u4e8e\u7b49\u4e8e\u8d70\u8def\u5f84A\u540e\u80fd\u518d\u904d\u5386\u5230\u7684\u8282\u70b9\u6570\u3002\u8fd9\u65f6\u5019\u5c31\u4e0d\u9700\u8981\u518d\u7528\u8def\u5f84B\u53bb\u66f4\u65b0p\u70b9\u4e86\u3002  \n\n**\u600e\u6837\u526a\u679d**  \n\u6734\u7d20\u7684\u5bbd\u641c\u6709\u4e00\u4e2avisited\u6570\u7ec4\uff0c\u7528\u4e8e\u6807\u8bb0\u67d0\u4e2a\u70b9\u662f\u5426\u904d\u5386\u8fc7\u3002\u628a\u8fd9\u4e2a\u6570\u7ec4\u9b54\u6539\u4e00\u4e0b\u3002\n```\nstruct data2\n{\n\tint l;\n\tint r;\n}visited[2010][2010];\n```\n\u4e00\u5f00\u59cb\u6240\u6709\u4f4d\u7f6e\u7684.l\u548c.r\u7684\u521d\u59cb\u503c\u90fd\u662f\u65e0\u7a77\u5927\u3002  \n\u8fd8\u662f\u7528\u4e0a\u9762\u8def\u5f84A\u548c\u8def\u5f84B\u7684\u4f8b\u5b50\u3002  \n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u8fd9\u91cc\u628a\u8d70\u8def\u5f84A\u9700\u8981\u7684\u5de6\u79fb\u6b21\u6570\u8868\u793a\u4e3amlA\uff0c\u53f3\u79fb\u6b21\u6570\u8868\u793a\u4e3amrA\u3002\u540c\u7406\uff0c\u5bf9\u4e8e\u8def\u5f84B\u6709mlB\uff0cmrB\u3002\n\u5047\u8bbe\u7b2c\u4e00\u6b21\u904d\u5386\u5230\u70b9p(x,y)\u662f\u8d70\u8def\u5f84A\u3002\u8fd9\u65f6\u5019\u53d1\u73b0 visited[x][y].l>mlA\u800c\u4e14visited[x][y].r>mrA\u3002\u90a3\u4e48\u6211\u4eec\u7528\u8def\u5f84A\u66f4\u65b0p(x,y)\uff0c\u5373visited[x][y].l=mlA,visited[x][y].r=mrA\u3002\u7136\u540e\u7ee7\u7eed\u5411\u4e0b\u641c\u7d22\u3002  \n\u7b2c\u4e8c\u6b21\u8d70\u8def\u5f84B\u518d\u904d\u5386\u5230\u70b9p(x,y)\uff0c\u8fd9\u65f6\u5019visited[x][y].l<mlB\u800c\u4e14visited[x][y].r<mrB\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u4e0d\u7528\u8def\u5f84B\u66f4\u65b0p(x,y)\u3002\u4e5f\u4e0d\u518d\u641c\u7d22\u4e0b\u53bb\u3002  \n\n\u5982\u679c\u53ea\u662f\u5de6\u79fb\u548c\u53f3\u79fb\u6b21\u6570\u7684\u5176\u4e2d\u4e00\u4e2a\u6bd4\u5f53\u524d\u7684visited[x][y]\u4f18\uff0c\u90a3\u4e48\u4e0d\u66f4\u65b0visited[x][y]\uff0c\u4f46\u662f\u8981\u7ee7\u7eed\u641c\u7d22\u4e0b\u53bb\u3002  \n```\n....N...*\n.******.*\n..*****.*\n*.*****.*\n*.*****.*\n```\n\u6bd4\u5982\u4e0a\u56fe\u3002\u73b0\u5728\u5230\u8fbeN\u5904\uff0c\u7ee7\u7eed\u5411\u4e0b\u641c\u7d22\u3002\u5982\u679c\u8d70\u5de6\u8fb9\u7684\u8def\u5f84\uff0c\u9700\u8981\u5de6\u79fb4\u6b21\uff0c\u53f3\u79fb1\u6b21\u3002\u5982\u679c\u8d70\u53f3\u8fb9\u7684\u8def\u5f84\uff0c\u9700\u8981\u5de6\u79fb0\u6b21\uff0c\u53f3\u79fb3\u6b21\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4e0a\u9762\u6240\u8bf4\u7684\u6700\u540e\u4e00\u79cd\u60c5\u51b5\uff0c\u4e0d\u540c\u7684\u5de6\u79fb\u6b21\u6570\u548c\u53f3\u79fb\u6b21\u6570\u53ef\u80fd\u53ef\u4ee5\u904d\u5386\u5230\u4e0d\u540c\u7684\u70b9\u3002\u56e0\u6b64\u9700\u8981\u7ee7\u7eed\u641c\u7d22\u4e0b\u53bb\u3002  \n  \n**\u5982\u4f55\u9632\u6b62\u91cd\u590d\u641c\u5230\u4e00\u4e2a\u70b9**  \n\u8fd9\u91cc\u6307\u7684\u91cd\u590d\u641c\u5230\u662f\u5728\u5de6\u79fb\u548c\u53f3\u79fb\u6b21\u6570\u76f8\u540c\u7684\u65f6\u5019\u91cd\u590d\u641c\u5230\u4e00\u4e2a\u70b9\u3002  \n```\nN\n.\n.\n.\n.\n```\n\u4f8b\u5982\u8fd9\u5f20\u56fe\u3002N\u70b9\u5728\u4e0a\u4e0b\u79fb\u52a8\u7684\u65f6\u5019\uff0c\u5de6\u79fb\u548c\u53f3\u79fb\u6b21\u6570\u6ca1\u6709\u53d8\u3002\u6709\u53ef\u80fd\u5728\u4e24\u4e2a\u70b9\u4e4b\u95f4\u6765\u56de\u8d70\u3002  \n\u6240\u4ee5\u6211\u4eec\u5728\u5224\u65ad\u662f\u5426\u7ee7\u7eed\u641c\u4e0b\u53bb\u7684\u8bed\u53e5\u4e0a\u9762\u505a\u4e00\u4e9b\u6539\u52a8\u3002\n```\nif(visited[nex][ney].l<=ml&&visited[nex][ney].r<=mr)continue;\n```\n\u628a\u539f\u5148\u7684\u5c0f\u4e8e\u6539\u6210\u5c0f\u4e8e\u7b49\u4e8e\uff08\u8fd9\u91cc\u7684continue\u662f\u8df3\u8fc7\u8fd9\u6b21\u5f80\u4e0b\u641c\u7d22\u7684\u5faa\u73af\uff09\u3002  \n  \n**\u4e11\u4ee3\u7801\u548c\u4e00\u4e9b\u6ce8\u91ca**\n```\n#include <iostream>\n#include <cstdio>\n#include <cstring>\n#include <string>\n#include <cmath>\n#include <cctype>\n#include <algorithm>\n#include <vector>\n#include <stack>\n#include <queue>\n#include <set>\n#include <cstdlib>\n#include <ctime>\n\n#define oo 2147483647\n\nusing namespace std;\n\nstruct data\n{\n\tint x;\n\tint y;\n\tint l;\n\tint r;\n}q[16000000];\n\nstruct data2\n{\n\tint l;\n\tint r;\n}visited[2010][2010];\n\nconst int mx[4]={0,1,0,-1};\nconst int my[4]={1,0,-1,0};\n\nint n,m,i,j,k,l,r,c,maxl,maxr,ans;\nchar map[2010][2010];\n\nbool check(int nex,int ney)\n{\n\treturn (nex<=0||nex>n||ney<=0||ney>m||map[nex][ney]=='*')?0:1;\n}\n//\u4e0a\u9762\u7684check\u7b49\u4ef7\u4e8eif(\u6761\u4ef6)return 0;else return 1;\nvoid BFS()\n{\n\tint i,j,head=0,tail=0;\n\thead=1;\n\tq[head].x=r;\n\tq[head].y=c;\n\tq[head].l=0;\n\tq[head].r=0;//\u521d\u59cb\u5316\n\twhile(tail<head)//\u849f\u84bb\u5199\u5bbd\u641c\u4e60\u60ef\u628atail\u548chead\u5012\u8fc7\u6765\u3002\u3002\u3002\u8bf7\u539f\u8c05\uff01\n\t{\n\t\ttail++;\n\t\tint nx=q[tail].x,ny=q[tail].y;\n\t\tfor(i=0;i<4;i++)\n\t\t{\n\t\t\tint nex=nx+mx[i],ney=ny+my[i];\n\t\t\tint ml=0,mr=0;\n\t\t\tif(i==0)mr++;\n\t\t\tif(i==2)ml++;\n            //\u8fd9\u91cc\u7684ml\u548cmx\u662f\u8fd9\u6837\u6269\u5c55\u4e4b\u540e\u5de6\u79fb\u548c\u53f3\u79fb\u6b21\u6570\u7684\u6539\u53d8\u91cf\n\t\t\tif(ml+q[tail].l>maxl)continue;\n\t\t\tif(mr+q[tail].r>maxr)continue;\n            //\u5982\u679c\u5de6\u53f3\u79fb\u52a8\u6b21\u6570\u8d85\u8fc7\u89c4\u5b9a\uff0c\u90a3\u4e48\u4e0d\u518d\u6269\u5c55\n\t\t\tif(!check(nex,ney))continue;//\u68c0\u67e5x,y\u662f\u5426\u8d8a\u754c\n\t\t\tif(visited[nex][ney].l<=q[tail].l+ml&&visited[nex][ney].r<=q[tail].r+mr)continue;\n            //\u4e0a\u9762\u6240\u8bf4\u7684\u9632\u6b62\u91cd\u590d\u641c\u7d22\u548c\u526a\u679d\n\t\t\tif(visited[nex][ney].l>q[tail].l+ml&&visited[nex][ney].r>q[tail].r+mr)\n\t\t\t{\n\t\t\t\tif(visited[nex][ney].l==oo&&visited[nex][ney].r==oo)ans++;//\u5982\u679c\u4ee5\u524d\u6ca1\u6709\u641c\u7d22\u5230\u8fd9\u4e2a\u70b9\uff0c\u90a3\u4e48\u52a0\u5165\u7b54\u6848\n\t\t\t\tvisited[nex][ney].l=q[tail].l+ml;\n\t\t\t\tvisited[nex][ney].r=q[tail].r+mr;\n\t\t\t}\n\t\t\thead++;\n\t\t\tq[head].x=nex;\n\t\t\tq[head].y=ney;\n\t\t\tq[head].l=q[tail].l+ml;\n\t\t\tq[head].r=q[tail].r+mr;\n\t\t}\n\t}\n}\n\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tscanf(\"%d%d\",&r,&c);\n\tscanf(\"%d%d\",&maxl,&maxr);getchar();\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tfor(j=1;j<=m;j++)\n\t\t{\n\t\t\tmap[i][j]=getchar();\n\t\t\tvisited[i][j].l=oo;\n\t\t\tvisited[i][j].r=oo;\n\t\t}\n\t\tgetchar();\n\t}\n\tvisited[r][c].l=0;\n\tvisited[r][c].r=0;\n\tans++;\n\tBFS();\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\n**\u849f\u84bb\u5199\u6587\uff0c\u5982\u679c\u4e0d\u5f53\u4e4b\u5904\uff0c\u8bf7\u4e0d\u7559\u60c5\u9762\u5730\u6253\u8138\uff01**",
        "postTime": 1539831101,
        "uid": 48393,
        "name": "IronELement",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    },
    {
        "content": "# \u9898\u89e3 CF1063B \u3010Labyrinth\u3011\n\n### [\u5b89\u5229\u535a\u5ba2](https://www.cnblogs.com/little-sun0331/p/10004515.html)\n\n\u5b8c\u4e86\u6211\u53d1\u73b0\u6211\u505aCF\u7684\u9898\u5927\u90e8\u5206\u601d\u8def\u90fd\u548c\u522b\u4eba\u4e0d\u4e00\u6837qwq\n\n\u8fd9\u9053\u9898\u5176\u5b9e\u5f88\u6c34\uff0c\u4e0d\u81f3\u4e8e\u5230\u7d2b\u9898\n\n\u6211\u4eec\u53ea\u8981bfs\u4e00\u4e0b\uff0c\u5411\u56db\u4e2a\u65b9\u5411\u641c\u7d22\uff0c\u526a\u4e0b\u679d\uff0c\u5c31A\u4e86\uff08\u597d\u50cf\u8fd8\u8dd1\u7684\u86ee\u5feb\uff1f\uff09\n\n\u662f\u4e00\u9053\u953b\u70bc\u4ee3\u7801\u80fd\u529b\u7684\u597d\u9898\n\n**Code\uff1a**\n\n```cpp\n#include <bits/stdc++.h>\n\n#define check(x, y) (x >= 0 && x < n && y >= 0 && y < m)//\u5224\u65ad\u662f\u5426\u8d8a\u754c\n\nconst int MaxN = 2010;\nconst int dx[] = {0, 1, -1, 0}, dy[] = {-1, 0, 0, 1};//bfs\u65b9\u5411\u6570\u7ec4\n\nstruct p\n{\n    int x, y;\n    int cntx, cnty;\n};\n\nint ans;\n\nint n, m, x, y, limx, limy;\n\nstd::string s[MaxN];\n\nint vis[MaxN][MaxN];\n\nint disx[MaxN][MaxN], disy[MaxN][MaxN];\n\nvoid bfs(int x, int y)\n{\n    memset(disx, 0x3f, sizeof(disx));\n    memset(disy, 0x3f, sizeof(disy) );\n    std::queue<p> q;\n    q.push((p){x, y, 0, 0});\n    disx[x][y] = disy[x][y] = 0;\n    while (!q.empty())\n    {\n        p tmp = q.front();\n        q.pop();\n        x = tmp.x, y = tmp.y;\n        for (int i = 0; i <= 3; i++)\n        {\n            int nx = x + dx[i], ny = y + dy[i];\n            if (!check(nx, ny) || s[nx][ny] == '*')//\u5f53\u524d\u4f4d\u7f6e\u662f\u5426\u5408\u6cd5\n                continue;\n            int cntx = tmp.cntx + bool(dy[i] == -1), cnty = tmp.cnty + bool(dy[i] == 1);//\u8ba1\u7b97\u5411\u5de6/\u53f3\u8d70\u6b65\u6570\n            if (cntx < std::min(disx[nx][ny], limx + 1) || cnty < std::min(disy[nx][ny], limy + 1))//\u5224\u65ad\uff0c\u526a\u679d\n            {\n                disx[nx][ny] = cntx;\n                disy[nx][ny] = cnty;//\u66f4\u65b0\u5411\u5de6/\u53f3\u8d70\u6b65\u6570\n                q.push((p){nx, ny, cntx, cnty});\n\n            }\n        }\n    }\n}\n\nint main()\n{\n    scanf(\"%d%d\", &n, &m);\n    scanf(\"%d%d\", &x, &y), --x, --y;\n    scanf(\"%d%d\", &limx, &limy);\n    for (int i = 0; i < n; i++)\n        std::cin >> s[i];\n    bfs(x, y);\n    for (int i = 0; i < n; i++)\n        for (int j = 0; j < m; j++)\n            if (disx[i][j] <= limx && disy[i][j] <= limy)\n                ++ans;//\u7edf\u8ba1\u7b54\u6848\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```",
        "postTime": 1542897859,
        "uid": 61966,
        "name": "little_sun",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1063B \u3010Labyrinth\u3011"
    }
]
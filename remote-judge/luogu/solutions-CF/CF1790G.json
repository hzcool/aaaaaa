[
    {
        "content": "\u6211\u4eec\u8ba1 $v_i$ \u8868\u793a $i$ \u53f7 token \u80fd\u5728 bonus \u8282\u70b9\u4e0a\u6700\u957f\u80fd\u8df3\u7684\u8def\u7a0b\uff0c\u4e00\u5171\u6709\u4e09\u79cd\u60c5\u51b5\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/y94g36fr.png)\n\n\uff08\u5e26\u6709\u7ea2\u8272\u9634\u5f71\u7684\u4e3a bonus \u8282\u70b9\uff0c\u4e14\u5e26\u7bad\u5934\u7684\u8fb9\u8868\u793a **token \u53ef\u4ee5\u8d70\u7684\u6709\u5411\u8fb9**\uff09\n\n- \u4e0e $i$ \u53f7\u8282\u70b9\u76f8\u90bb\u7684\u8282\u70b9\u6ca1\u6709 bonus \u8282\u70b9\uff0c$v_i=0$\n\n- \u4e0e $i$ \u53f7\u8282\u70b9\u76f8\u90bb\u7684\u8282\u70b9\u6709 bonus \u8282\u70b9\n\n\t + \u6240\u6709\u76f8\u90bb\u7684 bonus \u8282\u70b9\u5747\u6ca1\u6709\u4e0e\u4e4b\u76f8\u90bb\u7684 bonus \u8282\u70b9\uff0c$v_i=1$\n     \n     + \u76f8\u90bb\u7684 bonus \u8282\u70b9\u6709\u4e0e\u4e4b\u76f8\u90bb\u7684 bonus \u8282\u70b9 \u6216 i \u53f7\u8282\u70b9\u672c\u8eab\u662f bonus \u8282\u70b9\uff0c$v_i=\\infty$\n\n\u5bf9\u4e8e\u4e00\u4e2a token \u8282\u70b9 $u$ \u80fd\u8d70\u5230 $1$ \u53f7\u8282\u70b9\uff0c\u6709\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6\uff1a\n\n- \u5b58\u5728\u8def\u5f84 $u\\rightarrow x_1\\rightarrow x_2\\cdots x_l \\rightarrow 1$\uff0c\u6ee1\u8db3 $x_i(1\\le i\\le l)$ \u90fd\u4e3a bonus \u8282\u70b9\u3002\n\n- \u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\u4e2d\u7684\u8def\u5f84\u4e2d\uff0c\u6ee1\u8db3 $\\min\\{l\\}\\le \\sum\\limits_{u'\\in S\u2227u'\\not=u}v_{u'}$\uff0c\u5176\u4e2d $S$ \u8868\u793a bonus \u8282\u70b9\u6784\u6210\u7684\u96c6\u5408\u3002\n\n\u5904\u7406 $v$ \u6570\u7ec4\uff0c\u679a\u4e3e $u'\\in S$ \u7b49\u65f6\u95f4\u590d\u6742\u5ea6\u5747\u4e3a\u7ebf\u6027\uff0c\u6700\u5927\u590d\u6742\u5ea6\u4e3a\u6700\u77ed\u8def $O((n+m) \\log n)$\u3002\n\n\u4ee5\u4e0b\u662f\u4ee3\u7801\u7247\u6bb5\u542b\u5fae\u91cf\u6ce8\u91ca\uff1a\n\n```\nvoid dij() {\n\tfor (int i = 1; i <= n; i ++) vis[i] = 0, dis[i] = 1e18;\n\tdis[1] = 0, q.push({0, 1});\n\t\n\twhile (!q.empty()) {\n\t\tint st = q.top().second; q.pop();\n\t\tif (vis[st] || tok[st]) continue; vis[st] = 1;\n        // \u8fd9\u91cc\u6ce8\u610f\uff0c\u5f53\u524d\u70b9\u82e5\u662f token\uff0c\u5219\u4e0d\u80fd\u5f80\u4e0b\u8d70\n\t\tfor (int i = h[st]; i > 0; i = e[i].nxt) {\n\t\t\tint v = e[i].v;\n\t\t\tif ((red[v] || tok[v]) && 1 + dis[st] < dis[v])\n\t\t\t\tdis[v] = dis[st] + 1, q.push({dis[v], v});\n\t\t}\n\t}\n}\n \nvoid work() {\n\tn = read(), m = read(), p = read(), b = read(); en = 0;\n\tfor (int i = 1; i <= n; i ++) \n\t\th[i] = tok[i] = red[i] = inf[i] = val[i] = 0;\n\tfor (int i = 1; i <= p; i ++) tok[read()] = 1;\n\tfor (int i = 1; i <= b; i ++) red[read()] = 1;\n\tfor (int i = 1; i <= m; i ++) {\n\t\tint u = read(), v = read();\n\t\taddEdge(u, v), addEdge(v, u);\n\t}\n\t\n\tdij();\n\t\n\tfor (int i = 1; i <= n; i ++) if (red[i]) {\n\t\t\tfor (int j = h[i]; j > 0; j = e[j].nxt) {\n\t\t\t\tint v = e[j].v; if (red[v]) inf[i] = 1;\n\t\t\t} //\u56fe\u7247\u4e2d\u60c5\u51b5 1 \u4e2d\u7684\u7b2c\u4e00\u79cd\n\t\t}\n\t\n\tint ans = 0;\n\tfor (int i = 1; i <= n; i ++) if (tok[i]) {\n\t\tfor (int j = h[i]; j > 0; j = e[j].nxt) {\n\t\t\tint v = e[j].v; if (inf[v]) val[i] = max(val[i], 1000000LL); //\u56fe\u7247\u4e2d\u60c5\u51b5 1 \u4e2d\u7684\u7b2c\u4e8c\u79cd\n\t\t\telse if (red[v]) val[i] = max(val[i], 1LL);\n            //\u56fe\u7247\u4e2d\u60c5\u51b5 2\n\t\t}\n\t\tans += val[i];\n\t}\n\t\n\tfor (int i = 1; i <= n; i ++) \n\t\tif (tok[i] && (ans - val[i] + 1 >= dis[i] || dis[i] <= 1)) {\n\t\t\tcout << \"YES\\n\";\n\t\t\treturn ;\n\t\t}\n\tcout << \"NO\\n\";\n}\n```",
        "postTime": 1674886457,
        "uid": 224663,
        "name": "AcO2d",
        "ccfLevel": 0,
        "title": "CF1790G Tokens on Graph \u9898\u89e3"
    }
]
[
    {
        "content": "\u5f88\u597d\u5947\u65c1\u8fb9\u90a3\u4f4d\u8001\u54e5\u4e3a\u4ec0\u4e48\u8981\u7528\u5e73\u8861\u6811\u3002\n\n\u601d\u8def\u76f8\u540c\uff0c\u5c06\u8981\u67e5\u8be2\u7684\u5185\u5bb9\u79bb\u6563\u5316\u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define ld long double\n#define ___ ((ld)0.0000000001)\nusing namespace std;\nconst int N = 1e5+5;\nint n, w, tot;\nll ans;\nld l[N], r[N], b[N];\nint l2[N], r2[N];\npair<int, int> a[N];\nstruct tree{\n\tint a[N];\n\tvoid add(int x, int k){\n\t\tfor (; x <= tot; x += x&-x) a[x] += k;\n\t}\n\tint ask(int x){\n\t\tint res = 0;\n\t\tfor (; x; x -= x&-x) res += a[x];\n\t\treturn res;\n\t} \n}T;\nbool eq(ld x, ld y){\n\treturn fabs(x-y) < ___;\n}\nvoid work(ld &x){\n\tx = floor(x*1e11)/1e11;\n}\nint uq(ld *a, int *c){\n\tfor (int i = 1; i <= n; i++) work(a[i]), b[i] = a[i];\n\tsort(b+1, b+1+n);\n\tint tot = unique(b+1, b+1+n)-b-1;\n\tfor (int i = 1; i <= n; i++) c[i] = lower_bound(b+1, b+1+tot, a[i])-b;\n\treturn tot;\n}\nbool cmp(pair<int, int> x, pair<int, int> y){\n\treturn x.second == y.second ? x.first > y.first : x.second < y.second;\n}\nint main(){\n\tstd::ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n//\tfreopen(\"in.txt\", \"r\", stdin);\n//\tfreopen(\"out.out\", \"w\", stdout);\n\tcin >> n >> w;\n\tfor (int i = 1; i <= n; i++){\n\t\tint x, v;\n\t\tcin >> x >> v;\n\t\tx = -x;\n\t\tl[i] = (ld)x/((ld)v-w), r[i] = (ld)x/((ld)v+w);\n\t}\n\ttot = uq(l, l2);\n\tuq(r, r2);\n\tfor (int i = 1; i <= n; i++) a[i] = make_pair(l2[i], r2[i]);\n\tsort(a+1, a+1+n, cmp);\n\tfor (int i = 1; i <= n; i++){\n\t\tans += T.ask(tot)-T.ask(a[i].first-1);\n\t\tT.add(a[i].first, 1);\n\t}\n\tcout << ans;\n\treturn 0;\n}\n```",
        "postTime": 1607054697,
        "uid": 171288,
        "name": "Tony2",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF924D \u3010Contact ATC\u3011"
    },
    {
        "content": "\u8bbe $f_i(v_{wind})$ \u8868\u793a\u98ce\u901f\u4e3a $v_{wind}$ \u65f6\u98de\u673a $i$ \u5230\u8fbe\u539f\u70b9\u7684\u65f6\u95f4\uff0c\u5219\u6709 $f_i(v_{wind})=\\frac{x_i}{v_i+v_{wind}}$\u3002\n\n\u5bf9\u4e8e\u4e00\u5bf9\u98de\u673a $(i,j)(i<j)$\uff0c\u5b83\u5bf9\u7b54\u6848\u6709\u8d21\u732e\u5f53\u4e14\u4ec5\u5f53 $f_i$ \u4e0e $f_j$ \u5728\u533a\u95f4 $[-w,w]$ \u5185\u6709\u4ea4\u70b9\u3002\u5bb9\u6613\u53d1\u73b0\u51fd\u6570 $f$ \u5177\u6709\u5355\u8c03\u6027\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bbe $l_i=f_i(-w),r_i=f_i(w)$\uff0c\u5219\u4e0a\u8ff0\u6761\u4ef6\u7b49\u4ef7\u4e8e $(l_i\\leq l_j\\wedge r_i\\geq r_j)\\vee (l_i\\geq l_j\\wedge r_i\\leq r_j)$\u3002\u53ef\u4ee5\u7406\u89e3\u4e3a\u533a\u95f4 $[l_i,r_i]$ \u4e0e $[l_j,r_j]$ \u95f4\u5b58\u5728\u5305\u542b\u5173\u7cfb\u3002\u5982\u679c\u8981\u7edf\u8ba1\u8fd9\u6837\u7684 $(i,j)$ \u7684\u6570\u91cf\uff0c\u53ef\u4ee5\u7528\u626b\u63cf\u7ebf + \u6570\u636e\u7ed3\u6784\u6765\u5904\u7406\u3002\u8fd9\u91cc\u7684\u6570\u636e\u7ed3\u6784\u9700\u8981\u652f\u6301\u63d2\u5165\u64cd\u4f5c\u548c\u67e5\u8be2\u6709\u591a\u5c11\u4e2a\u6570\u5927\u4e8e\u7b49\u4e8e\u7ed9\u5b9a\u7684\u6570\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u9009\u62e9\u5e73\u8861\u6811\u3002\u6ce8\u610f\u8ba8\u8bba\u53bb\u91cd\u65f6\u8981\u8c28\u614e\uff0c\u7cbe\u5ea6\u8981\u6c42\u4e3a $10^{-10}$ \u53ef\u80fd\u9700\u8981\u4f7f\u7528 long double\u3002\u4e0b\u9762\u662f\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n#include <map>\nusing namespace std;\ntypedef long long ll;\ntypedef long double ld;\nconst int MAXN=110000;\nconst ld EPS=1E-11;\nint dcmp(ld x)\n{\n\tif (fabs(x)<EPS) return 0;\n\treturn x<0?-1:1;\n}\nstruct Splay\n{\n\tstruct Node\n\t{\n\t\tint c[2], fa, siz;\n\t\tld val;\n\t} tr[MAXN];\n\tint cnt, root;\n\tinline int newNode(ld k)\n\t{\n\t\tint x=++cnt;\n\t\ttr[x].c[0]=tr[x].c[1]=tr[x].fa=0;\n\t\ttr[x].val=k; tr[x].siz=1;\n\t\treturn x;\n\t}\n\tinline void init()\n\t{\n\t\tcnt=root=0;\n\t}\n\t#define lc tr[x].c[0]\n\t#define rc tr[x].c[1]\n\t#define par tr[x].fa\n\tinline void pushup(int x)\n\t{\n\t\ttr[x].siz=tr[lc].siz+tr[rc].siz+1;\n\t}\n\tinline bool getlr(int x)\n\t{\n\t\treturn tr[par].c[1]==x;\n\t}\n\tinline void rotate(int x)\n\t{\n\t\tint y=par, z=tr[y].fa;\n\t\tbool k=getlr(x); int w=tr[x].c[k^1];\n\t\tif (z) tr[z].c[getlr(y)]=x; par=z;\n\t\ttr[y].c[k]=w; if (w) tr[w].fa=y;\n\t\ttr[x].c[k^1]=y; tr[y].fa=x; pushup(y); \n\t}\n\tvoid splay(int x, int y)\n\t{\n\t\twhile (par!=y)\n\t\t{\n\t\t\tif (tr[par].fa!=y)\n\t\t\t\trotate(getlr(x)^getlr(par)?x:par);\n\t\t\trotate(x);\n\t\t}\n\t\tpushup(x);\n\t\tif (!y) root=x;\n\t}\n\t// \u67e5\u627e\u7b2c\u4e00\u4e2a\u503c\u5927\u4e8e\u7b49\u4e8e k \u7684\u7ed3\u70b9 \n\tint find(ld k)\n\t{\n\t\tint x=root, y=0;\n\t\twhile (x)\n\t\t\tif (~dcmp(tr[x].val-k)) y=x, x=lc;\n\t\t\telse x=rc;\n\t\tif (y) splay(y, 0);\n\t\treturn y;\n\t}\n\t// \u63d2\u5165\u4e00\u4e2a\u503c\u4e3a k \u7684\u7ed3\u70b9 \n\tvoid insert(ld k)\n\t{\n\t\tif (!root)\n\t\t{\n\t\t\troot=newNode(k);\n\t\t\treturn;\n\t\t}\n\t\tint x=find(k);\n\t\tif (!x)\n\t\t{\n\t\t\tx=root; while (rc) x=rc;\n\t\t\trc=newNode(k);\n\t\t\ttr[rc].fa=x; splay(rc, 0);\n\t\t}\n\t\telse if (!lc)\n\t\t{\n\t\t\tlc=newNode(k);\n\t\t\ttr[lc].fa=x; pushup(x);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tx=lc; while (rc) x=rc;\n\t\t\trc=newNode(k);\n\t\t\ttr[rc].fa=x; splay(rc, 0);\n\t\t}\n\t}\n\t// \u67e5\u8be2\u503c\u5c0f\u4e8e k \u7684\u7ed3\u70b9\u6570\n\tinline int rank(ld k) \n\t{\n\t\tint x=find(k);\n\t\tif (!x) return tr[root].siz;\n\t\treturn tr[lc].siz;\n\t}\n\t#undef lc\n\t#undef rc\n\t#undef par\n} splay;\nstruct Plane\n{\n\tint x, v;\n\tld l, r;\n\tbool operator < (const Plane& rhs) const\n\t{\n\t\treturn dcmp(l-rhs.l)==-1||dcmp(l-rhs.l)==0&&dcmp(r-rhs.r)==-1;\n\t}\n};\nbool cmpl(const Plane& lhs, const Plane& rhs)\n{\n\treturn lhs.l<rhs.l;\n}\nbool cmpr(const Plane& lhs, const Plane& rhs)\n{\n\treturn lhs.r<rhs.r;\n}\nll calc(vector<Plane> a)\n{\n\tll res=0;\n\tsort(a.begin(), a.end(), cmpl);\n\tsplay.init();\n\tfor (int i=0, j=0; i<a.size(); i++)\n\t{\n\t\twhile (j<a.size()&&dcmp(a[j].l-a[i].l)!=1)\n\t\t\tsplay.insert(a[j++].r);\n\t\tres+=j-splay.rank(a[i].r);\n\t}\n\tsort(a.begin(), a.end(), cmpr);\n\tsplay.init();\n\tfor (int i=0, j=0; i<a.size(); i++)\n\t{\n\t\twhile (j<a.size()&&dcmp(a[j].r-a[i].r)!=1)\n\t\t\tsplay.insert(a[j++].l);\n\t\tres+=j-splay.rank(a[i].l);\n\t}\n\tmap<Plane, int> dic;\n\tfor (Plane p:a) dic[p]++;\n\tfor (Plane p:a)\n\t\tif (dic.count(p)) res-=dic[p];\n\treturn res;\n}\nvector<Plane> pla;\nint main()\n{\n//\tfreopen(\"D.in\", \"r\", stdin);\n//\tfreopen(\"D.out\", \"w\", stdout);\n\tint n, w;\n\tscanf(\"%d%d\", &n, &w);\n\tfor (int i=1; i<=n; i++)\n\t{\n\t\tPlane t;\n\t\tscanf(\"%d%d\", &t.x, &t.v);\n\t\tpla.push_back(t);\n\t}\n\tfor (Plane& p:pla)\n\t{\n\t\tp.l=-(ld)p.x/(p.v-w);\n\t\tp.r=-(ld)p.x/(p.v+w);\n\t}\n\tprintf(\"%lld\\n\", (calc(pla)-(int)pla.size())/2);\n\treturn 0;\n}\n```\n\n\u53ef\u80fd\u4e5f\u53ef\u4ee5\u5206\u6cbb\u505a\uff0c\u8fd9\u6837\u53ef\u4ee5\u7701\u6389\u5199\u5e73\u8861\u6811\u3002",
        "postTime": 1581505942,
        "uid": 43064,
        "name": "\u6500\u5ca9\u9ad8\u624b",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF924D \u3010Contact ATC\u3011"
    }
]
[
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1778B)\n\n\u6ce8\u610f\u5230\u5f53 $a$ \u662f\u4e0d\u597d\u7684\uff0c\u5fc5\u987b\u6240\u6709\u7684 $a_i$ \u90fd\u6ee1\u8db3\u9898\u76ee\u6761\u4ef6\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ea\u9700\u4fee\u6539\u4e00\u5bf9\u6570\uff08\u663e\u7136\u8fd9\u6837\u6b65\u6570\u6700\u5c11\uff09\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u5bf9\u6570\uff0c\u6211\u4eec\u6709\u4e24\u79cd\u65b9\u6cd5\u5c06\u5176\u53d8\u4e3a\u597d\u7684\uff1a\n\n- \u64cd\u4f5c $p$ \u6570\u7ec4\u76f4\u5230 $\\operatorname{pos}(a_{i+1})<\\operatorname{pos}(a_{i})$\u3002\n\n- \u540c\u65f6\u79fb\u52a8 $a_i,a_{i+1}$ \u7684\u4f4d\u7f6e\uff0c\u76f4\u5230 $\\operatorname{pos}(a_{i+1})>\\operatorname{pos}(a_{i})+d$\u3002\n\n\u4e24\u79cd\u60c5\u51b5\u6b65\u6570\u5206\u522b\u53d6\u6700\u5c0f\u503c\uff0c\u5176\u4e2d\u540e\u8005\u9700\u8981\u7279\u5224\u662f\u5426\u4f1a\u79fb\u52a8\u51fa\u754c\u3002\n\n\u65e0\u89e3\u5f88\u597d\u5224\u65ad\uff0c\u5177\u4f53\u89c1\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=1e5+10;\nint n,m,d,a[N],p[N],l[N];\nint solve()\n{\n    int ret=1e9;\n    scanf(\"%d%d%d\",&n,&m,&d);\n    for(int i=1;i<=n;i++)scanf(\"%d\",&p[i]);\n    for(int i=1;i<=m;i++)scanf(\"%d\",&a[i]);\n    for(int i=1;i<=n;i++)l[p[i]]=i;\n    for(int i=1;i<m;i++)\n        if(l[a[i+1]]>l[a[i]]&&l[a[i+1]]<=l[a[i]]+d)\n        {\n            ret=min(ret,l[a[i+1]]-l[a[i]]);\n            if(d+1<n)ret=min(ret,l[a[i]]+d-l[a[i+1]]+1);\n        }\n        else return 0;\n    return ret;\n}\nsigned main()\n{\n    int T;\n    scanf(\"%d\",&T);\n    while(T--)printf(\"%d\\n\",solve());\n    return 0;\n}\n```",
        "postTime": 1685072045,
        "uid": 736801,
        "name": "ACRUSHj",
        "ccfLevel": 0,
        "title": "CF1778B The Forbidden Permutation"
    },
    {
        "content": "## \u9898\u610f\uff1a\n\u9898\u610f\u7ffb\u8bd1\u4e2d\u5df2\u6709\u3002\n\n## \u5206\u6790\uff1a\n\u5982\u679c\u5b58\u5728 ${\\rm pos}(a_i) > {\\rm pos}(a_{i+1})$ \u6216\u8005 ${\\rm pos}(a_{i+1})-{\\rm pos}(a_i)>d$ \u76f4\u63a5\u8fd4\u56de $0$ \u5373\u53ef\u3002\u5982\u679c\u4e0d\u662f\uff0c\u5bf9\u4e8e\u6bcf\u4e2a $a_i(1\\leq i <m)$ \u5206\u7c7b\u8ba8\u8bba ${\\rm pos}(a_i)<{\\rm pos}(a_{i+1})$\uff1a\n- \u5c06 ${\\rm pos}(a_{i+1})$ \u5411\u5de6\u79fb\uff0c\u9700\u8981\u79fb\u52a8 ${\\rm pos}(a_{i+1})-{\\rm pos}(a_i)$ \u6b21\u3002\n- \u5c06 ${\\rm pos}(a_{i+1})$ \u5411\u53f3\u79fb\uff0c\u9700\u8981\u79fb\u52a8 $d+1-{\\rm pos}(a_{i+1})+{\\rm pos}(a_i)$ \u6b21\u3002\u8fd9\u91cc\u8981\u6ce8\u610f\u5e94\u8be5\u4fdd\u8bc1 $d + 1 < n$\uff0c\u5426\u5219\u4f1a\u53d1\u751f\u8d8a\u754c\u3002\n\n\u6bcf\u6b21\u53d6\u4e24\u8005\u7684\u6700\u5c0f\u503c\u66f4\u65b0\u7b54\u6848\u3002\n\n## \u4ee3\u7801\uff1a\n\u4e3b\u8981\u7247\u6bb5\uff1a\n```cpp\ninline void solve() {\n\tint n, m, d, ans = inf64;\n\tcin >> n >> m >> d;\n\tvector<int> p(n + 1), a(m + 1);\n\tmap<int, int> pos;\n\tfor (int i = 1; i <= n; i ++) {\n\t\tcin >> p[i];\n\t\tpos[p[i]] = i;\n\t}\n\tfor (int i = 1; i <= m; i ++) {\n\t\tcin >> a[i];\n\t}\n\tfor (int i = 1; i < m; i ++) {\n\t\tif (pos[a[i]] > pos[a[i + 1]] || pos[a[i + 1]] - d > pos[a[i]]) {\n\t\t\tcout << 0 << '\\n';\n\t\t\treturn ;\n\t\t}\n\t\tint res = min(pos[a[i + 1]] - pos[a[i]], (d + 1 < n ? d + 1 - pos[a[i + 1]] + pos[a[i]] : inf64));\n\t\tans = min(ans, res);\n\t}\n\tcout << ans << '\\n';\n}\n```\n",
        "postTime": 1678627376,
        "uid": 706290,
        "name": "NOI365",
        "ccfLevel": 0,
        "title": "CF1778B\u9898\u89e3"
    },
    {
        "content": "## sol\n\n\u9884\u5904\u7406\u6c42\u51fa\u6bcf\u4e2a\u6570\u7684 $pos$\u3002\n\n\u6839\u636e $pos$ \u548c $a$ \u6570\u7ec4\u80fd\u5f97\u5230 $a$ \u5e8f\u5217\u7684\u6bcf\u4e2a\u4f4d\u7f6e\u6570\u7ec4\u3002\n\n\u5f88\u663e\u7136\uff0c\u6709\u4ee5\u4e0b\u60c5\u51b5\uff1a\n\n1. \u5982\u679c\u975e\u5347\u5e8f\uff0c\u5219\u4e00\u5b9a\u662f\u597d\u7684\uff0c\u7b54\u6848\u4e3a $0$\u3002\n\n2. \u5426\u5219\uff0c\u53d1\u73b0\u67d0\u4e2a `dis=pos[a[i+1]]-pos[a[i]]>d`, \u5219\u4e5f\u662f\u597d\u7684\uff0c\u7b54\u6848\u4e3a $0$\u3002\n\n3. \u5bf9\u4e8e\u7b26\u5408\u6761\u4ef6\u7684 $pos_{a_{i}}$ \u548c $pos_{a_{i+1}}$\uff0c\u6709\u4e24\u79cd\u65b9\u6cd5\uff1a\u5c06\u5bf9\u5e94\u7684 $a_{i+1}$ \u4e00\u76f4\u79fb\u5230 $a_{i}$ \u7684\u524d\u9762\uff0c\u9700\u8981 $dis$ \u6b21\uff1b\u6216\u8005\u5c06 $a_i$ \u548c $a_{i+1}$ \u8fdc\u79bb\uff0c\u9700\u8981 $pos_{a_{i}}-1+n-pos_{a_{i+1}}$ \u6b21\uff0c\u7b2c\u4e8c\u79cd\u60c5\u51b5\u8fd8\u9700\u8981\u8003\u8651\u662f\u5426\u5de6\u8fb9\u548c\u53f3\u8fb9\u52a0\u8d77\u6765\u591f\u79fb\u52a8\u3002\n\n## Code\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define INF 0x3f3f3f3f\n#define FOR(i,a,b) for(int i=(a);i<=(b);i++)\n#define RFOR(i,a,b) for(int i=(a);i>=(b);i--)\ntypedef long long ll;\nusing namespace std;\ninline int read(){\n\tint x=0,f=1;char c=getchar();\n\twhile(!isdigit(c)){if(c=='-')f=-1;c=getchar();}\n\twhile(isdigit(c)){x=x*10+c-48;c=getchar();}\n\treturn x*f;\n}\nconst int N=1e6+5;\nint t,n,m,d,ans;\nint p[N],a[N],pos[N];\nint main(){\n\tt=read();\n\twhile(t--){\n\t\tn=read(),m=read(),d=read();\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tp[i]=read();\n\t\t\tpos[p[i]]=i;\n\t\t}\n\t\tfor(int i=1;i<=m;i++) a[i]=read();\n\t\tans=INF;\n\t\tfor(int i=1;i<m;i++){\n\t\t\tint dis=pos[a[i+1]]-pos[a[i]];\n\t\t\tif(pos[a[i+1]]<=pos[a[i]] || dis>d){\n\t\t\t\tans=0;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tans=min(ans,dis);\n\t\t\tif((pos[a[i]]-1+n-pos[a[i+1]])>=d-dis+1){\n\t\t\t\tans=min(ans,d-dis+1);\n\t\t\t}\n\t\t}\n\t\tprintf(\"%d\\n\",ans);\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1676705600,
        "uid": 675646,
        "name": "Dyousks",
        "ccfLevel": 0,
        "title": "CF1778B The Forbidden Permutation \u9898\u89e3"
    },
    {
        "content": "\u5982\u679c\u5e8f\u5217 $a$ \u5df2\u7ecf\u662f\u597d\u7684\uff0c\u8f93\u51fa $0$\u3002\n\n\u5982\u679c\u60f3\u8ba9\u5e8f\u5217 $a$ \u6210\u4e3a\u597d\u7684\u5e8f\u5217\uff0c\u53ea\u9700\u6709\u4e00\u4e2a $i$ \u4e0d\u6ee1\u8db3 $\\mathrm{pos}(a_i)<\\mathrm{pos}(a_{i+1})\\le\\mathrm{pos}(a_i)+d$ \u5373\u53ef\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u4e0d\u597d\u7684\u5e8f\u5217\uff0c\u53ea\u9700\u8981\u901a\u8fc7\u64cd\u4f5c\u8ba9\u5176\u4e2d\u4e00\u4e2a $i$ \u4e0d\u6ee1\u8db3 $\\mathrm{pos}(a_i)<\\mathrm{pos}(a_{i+1})\\le\\mathrm{pos}(a_i)+d$ \u5c31\u80fd\u8ba9\u5176\u53d8\u4e3a\u597d\u7684\u5e8f\u5217\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u6ee1\u8db3 $\\mathrm{pos}(a_i)<\\mathrm{pos}(a_{i+1})\\le\\mathrm{pos}(a_i)+d$ \u7684 $i$\uff0c\u8ba9\u5176\u53d8\u4e3a\u4e0d\u6ee1\u8db3\u7684\u64cd\u4f5c\u65b9\u5f0f\u6709\u4e24\u79cd\uff1a\n\n\u4e00\u79cd\u662f\u901a\u8fc7\u64cd\u4f5c\u4f7f $\\mathrm{pos}(a_i)\\ge\\mathrm{pos}(a_{i+1})$\u3002\u56e0\u4e3a $a$ \u4e2d\u7684\u6570\u5b57\u4e24\u4e24\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u4f1a\u53d6\u5230\u7b49\u53f7\uff0c\u5373 $\\mathrm{pos}(a_i)>\\mathrm{pos}(a_{i+1})$\u3002\u6700\u5c0f\u7684\u64cd\u4f5c\u6b21\u6570\u5373\u4e3a $\\mathrm{pos}(a_{i+1})-\\mathrm{pos}(a_i)$\u3002\n\n\u53e6\u4e00\u79cd\u662f\u901a\u8fc7\u64cd\u4f5c\u4f7f $\\mathrm{pos}(a_{i+1})>\\mathrm{pos}(a_i)+d$\u3002\u8fd9\u610f\u5473\u7740\u5728 $p$ \u4e2d\uff0c$a_i$ \u548c $a_{i+1}$ \u4e4b\u95f4\u81f3\u5c11\u8981\u9694\u7740 $d$ \u4e2a\u6570\u5b57\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53 $d+2\\le n$ \u65f6\u624d\u80fd\u8fdb\u884c\u8fd9\u79cd\u64cd\u4f5c\u3002\u6700\u5c0f\u7684\u64cd\u4f5c\u6b21\u6570\u5373\u4e3a $d-(\\mathrm{pos}(a_{i+1})-\\mathrm{pos}(a_i)-1)$\u3002\n\n\u6700\u540e\u7684\u7ed3\u679c\u5c31\u662f\u6240\u6709\u7684 $i$ \u64cd\u4f5c\u6b21\u6570\u7684\u6700\u5c0f\u503c\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint t,n,m,d,p[100001],pos[100001],a[100001],ans;\nint main()\n{\n    cin>>t;\n    while(t--)\n    {\n        int f=0;\n        ans=1145141919;\n        cin>>n>>m>>d;\n        for(int i=1;i<=n;i++)\n        {\n            cin>>p[i];\n            pos[p[i]]=i;\n        }\n        for(int i=1;i<=m;i++)\n            cin>>a[i];\n        for(int i=1;i<m&&!f;i++)\n            if(!(pos[a[i]]<pos[a[i+1]]&&pos[a[i+1]]<=pos[a[i]]+d))\n                f=1;\n        if(f)\n        {\n            cout<<0<<'\\n';\n            continue;\n        }\n        for(int i=1;i<m;i++)\n            if(pos[a[i]]<pos[a[i+1]]&&pos[a[i+1]]<=pos[a[i]]+d)\n            {\n                ans=min(ans,pos[a[i+1]]-pos[a[i]]);\n                if(d<=n-2)\n                    ans=min(ans,d-(pos[a[i+1]]-pos[a[i]]-1));\n            }\n        cout<<ans<<'\\n';\n    }\n    return 0;\n}\n```",
        "postTime": 1675330728,
        "uid": 555301,
        "name": "zfx1569_HCl_2023",
        "ccfLevel": 0,
        "title": "CF1778B\u9898\u89e3"
    },
    {
        "content": "\u5982\u679c $a$ \u5df2\u7ecf\u662f\u597d\u7684\uff0c\u7b54\u6848\u663e\u7136\u4e3a $0$\u3002\u5bf9\u4e8e\u6bcf\u4e00\u5bf9 $a_i$ \u548c $a_{i+1}(i<m)$\uff0c\u53ef\u4ee5\u53d1\u73b0\u53ea\u6709\u4e24\u79cd\u60c5\u51b5\u53ef\u4ee5\u4f7f $a$ \u53d8\u597d\uff1a\n\n\u8bbe $y$ \u4e3a $a_i$ \u4e0e $a_{i+1}$ \u4e2d $pos$ \u8f83\u53f3\u7684\uff0c$x$ \u4e3a\u8f83\u5de6\u7684\u3002\n\n1.\u4f7f $pos(y)>pos(x)+d$\uff0c\u9700\u8981 $d-(pos(y)-pos(x))+1$ \u6b21\u64cd\u4f5c\u3002\n\n2.\u4f7f $pos(y)<pos(x)$\uff0c\u9700\u8981 $pos(y)-pos(x)$ \u6b21\u64cd\u4f5c\u3002\n\n\u4e8e\u662f\u5bf9\u4e8e\u6bcf\u5bf9 $a_i$ \u548c $a_{i+1}$ \u6c42\u6700\u5c0f\u503c\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint t, n, m, d, ans, p[200005], a[200005], pos[200005];\nint main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cout.tie(0);\n    cin >> t;\n    while(t--) {\n        cin >> n >> m >> d, ans = 1e9;\n        for(int i = 1; i <= n; i++)\n            cin >> p[i], pos[p[i]] = i;\n        for(int i = 1; i <= m; i++)\n            cin >> a[i];\n        for(int i = 1; i < m; i++) {\n            ans = min(ans, max(0, pos[a[i + 1]] - pos[a[i]]));\n            if(1 + d < n)\n                ans = min(ans, max(0, pos[a[i]] + d + 1 - pos[a[i + 1]]));\n        }\n        cout << ans << '\\n';\n    }\n    return 0;\n}\n```\n",
        "postTime": 1676387213,
        "uid": 374330,
        "name": "ACACACACACACACACACAC",
        "ccfLevel": 6,
        "title": "CF1778B"
    }
]
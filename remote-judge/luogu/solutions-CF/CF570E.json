[
    {
        "content": "## [\u9898\u76ee\u4f20\u9001\u5668](https://www.luogu.com.cn/problem/CF570E)\n## [\u66f4\u723d\u7684\u9605\u8bfb\u4f53\u9a8c](https://yaohaoyou.blog.luogu.org/cf570e-pig-and-palindromes-ti-xie)\n\n# \u9898\u610f\n\u4ece $(1,1)$ \u5230 $(n,m)$\uff0c\u6bcf\u6b21\u53ea\u80fd\u5411\u4e0b\u6216\u5411\u53f3\uff0c\u6c42\u4f7f\u8def\u8fc7\u7684\u8def\u5f84\u4e3a\u56de\u6587\u4e32\u7684\u8def\u5f84\u6570\u3002\n\n# \u601d\u8def\n$0 \\le n,m \\le 500$ \u7684\u6570\u636e\u53ef\u4ee5\u770b\u51fa\u8fd9\u662f\u4e00\u9053 dp \u9898\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u53ea\u8981\u601d\u8003\u5982\u4f55\u8bbe\u8ba1 dp \u4e86\u3002\n\n### \u72b6\u6001\u5b9a\u4e49\n$dp_{i,j}$ \u4e3a\u4ece\u4e2d\u70b9\u51fa\u53d1\uff0c\u8d70\u4e86 $s$ \u6b65\u540e\uff0c\u5de6\u4e0a\u7684\u70b9\u7684\u6a2a\u5750\u6807\u4e3a $i$\uff0c\u53f3\u4e0b\u7684\u70b9\u6a2a\u5750\u6807\u4e3a $j$ \u7684\u56de\u6587\u8def\u5f84\u6570\u3002\n\n\u5de6\u4e0a\u89d2\uff1a$(x,s+1-x)$\uff0c\u53f3\u4e0b\u89d2\uff1a$(x,n+m-s-x+1)$\u3002\n\n### \u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\n$dp_{s,i,j}=dp_{s-1,i-1,j}+dp_{s-1,i,j+1}+dp_{s-1,i-1,j+1}+dp_{s-1,i,j}$\u3002\n\n### \u521d\u59cb\u5316\n$dp_{1,1,n}=1$\u3002\n\n### \u4f18\u5316\n\u76f4\u63a5 dp \u7684\u8bdd\u7a7a\u95f4\u590d\u6742\u5ea6\u5c06\u662f $O(n^3)$\uff0c\u4f1a MLE\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u548c\u5012\u5e8f\u641c\u7d22\uff0c\u6211\u4f7f\u7528\u7684\u662f\u6eda\u52a8\u6570\u7ec4\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6\u5c31\u662f $O(n^2)$\u3002\n\n### \u603b\u7ed3\n\u8fd9\u9053\u9898\u7684 dp \u601d\u8def\u548c\u72b6\u6001\u8f6c\u79fb\u6bd4\u8f83\u590d\u6742\uff0c\u5bfc\u81f4\u6211\u8d5b\u65f6 $21$ \u5206\uff0c\u63a8\u51fa\u65b9\u7a0b\u540e\u5c31\u6bd4\u8f83\u7b80\u5355\u4e86\u3002\u4e0d\u5f00 ```long long``` \u89c1\u7956\u5b97\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^3)$\u3002\n\n## AC Code\n```cpp\n#include <bits/stdc++.h>  // \u5f00\u59cb\u4e86\n#define int long long  // \u5f00 long long\nusing namespace std;\nconst int maxn = 510, mod = 1e9 + 7;\nint n,m, ans,now=1, dp[2][maxn][maxn];  // \u6eda\u52a8\u6570\u7ec4\nstring ss[maxn];\nsigned main() {\n\t// IO\n\tios::sync_with_stdio(false);\n\tcin.tie(0);\n\tcout.tie(0);\n\n\tcin >> n >> m;\n\tfor (int i = 1; i <= n; i++) {\n\t\tcin >> ss[i];\n\t\tss[i]=' '+ss[i];\n\t}\n\tif (ss[1][1] == ss[n][m])  // \u7279\u5224\uff0c\u5982\u679c\u8d77\u70b9\u4e0d\u7b49\u4e8e\u7ec8\u70b9\u5c31\u8f93\u51fa 0\n\t\tdp[1][1][n] = 1;\n\telse {\n\t\tcout << 0;\n\t\treturn 0;\n\t}\n\tfor (int i = 2; i <= (n+m)/2; i++) {  // dp \u8f6c\u79fb\n\t\tnow = now ^ 1;\n\t\tmemset(dp[now],0,sizeof(dp[now]));  // \u8981\u6e05\u7a7a\n\t\tfor (int nx = 1; nx <= min(i,n); nx++) {\n\t\t\tint ny = i + 1 - nx;\n\t\t\tfor (int tx = n; tx >=max(n - i,nx) ; tx--) {\n\t\t\t\tint ty = n + m - i - tx + 1;\n\t\t\t\tif (ss[nx][ny] == ss[tx][ty])\n\t\t\t\t\tdp[now][nx][tx] = dp[now^1][nx - 1][tx] +\n\t\t\t\t\t                    dp[now^1][nx][tx + 1] +\n\t\t\t\t\t                    dp[now^1][nx - 1][tx + 1] +\n\t\t\t\t\t                    dp[now^1][nx][tx];\n\t\t\t\t\tdp[now][nx][tx]%=mod;\n\t\t\t}\n\t\t}\n\t}\n\t// \u7edf\u8ba1\n\tif((n+m)&1) {\n\t\tfor(int i=1; i<=n; i++) {\n\t\t\tans += (dp[now][i][i]+dp[now][i][i + 1]);\n\t\t\tans %= mod;\n\t\t}\n\t} else\n\t\tfor (int i = 1; i <= n; i++) {\n\t\t\tans += dp[now][i][i];\n\t\t\tans %= mod;\n\t\t}\n\t// \u8f93\u51fa\n\tcout << ans;\n\treturn 0; // \u62dc\u62dc\n\n}\n```",
        "postTime": 1677850638,
        "uid": 739274,
        "name": "yaohaoyou",
        "ccfLevel": 5,
        "title": "CF570E Pig and Palindromes \u9898\u89e3"
    },
    {
        "content": "# [Pig and Palindromes](https://www.luogu.com.cn/problem/CF570E)\n\u9996\u5148\u770b\u5230 $n \\le 500$ \u53cc\u5411\u641c\u7d22\u4f1a\u70b8\uff0c\u81ea\u7136\u60f3\u5230 DP\u3002\n## \u9898\u610f\n\u6c42\u4ece $(1,1)$ \u8d70\u5230 $(n,m)$ \u7684\u6240\u6709\u8def\u5f84\u4e2d\u56de\u6587\u4e32\u7684\u4e2a\u6570\uff0c\u6bcf\u6b65\u53ea\u80fd\u5411\u53f3\u6216\u5411\u4e0b\u3002\n\n\u56e0\u4e3a\u662f\u56de\u6587\u4e32\uff0c\u6240\u4ee5\u53ef\u4ee5\u628a\u9898\u76ee\u8f6c\u5316\u4e3a\uff1a\u4e24\u4eba\u4ece $(1,1)$ \u548c $(n,m)$ \u5206\u522b\u51fa\u53d1\uff0c\u5728\u56fe\u4e2d\u67d0\u70b9\u76f8\u9047\uff0c\u4e24\u6761\u8def\u5f84\u6784\u6210\u7684\u5b57\u7b26\u4e32\u76f8\u540c\uff0c\u6c42\u8d70\u6cd5\u4e2a\u6570\u3002\n## \u72b6\u6001\u8bbe\u8ba1\n\u53ef\u4ee5\u66b4\u529b\u7684\u8bbe $dp_{i,j,p,q}$ \u4e3a\u7b2c\u4e00\u4e2a\u4eba\u8d70\u5230 $(i,j)$\uff0c\u7b2c\u4e8c\u4e2a\u4eba\u8d70\u5230 $(p,q)$ \u7684\u65b9\u6cd5\u6570\uff0c\u4f46\u662f\u56db\u7ef4\u7684\u72b6\u6001\u80af\u5b9a\u65f6\u7a7a\u7206\u70b8\u3002\n\n\u6211\u4eec\u53d1\u73b0\u53ea\u8981\u6b65\u6570\u548c\u6a2a\u5750\u6807\u786e\u5b9a\u4e86\uff0c\u7eb5\u5750\u6807\u4e5f\u5c31\u786e\u5b9a\u4e86\u3002\u6240\u4ee5\u53ef\u4ee5\u628a\u72b6\u6001\u538b\u7f29\u4e3a $dp_{step,i,p}$ \u8868\u793a\u8d70\u4e86 $step$ \u6b65\uff0c\u7b2c\u4e00\u548c\u7b2c\u4e8c\u4e2a\u4eba\u7684\u6a2a\u5750\u6807\u5206\u522b\u4e3a $i$ \u548c $p$\u3002\u5219\u6613\u5f97 $j=step-i+1$ \u4e14 $q=n+m-step-p+1$\u3002\n## \u8f6c\u79fb\u65b9\u7a0b\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u5f88\u597d\u60f3\u4e86\u3002$i$ \u548c $p$ \u5206\u522b\u53ef\u4ee5\u4ece $4$ \u4e2a\u65b9\u5411\u4e0a\u8f6c\u79fb\u8fc7\u6765\uff0c\u6761\u4ef6\u662f $map_{i,j}=map_{p,q}$\u3002\n$$dp_{step,i,p}=dp_{step-1,i-1,p}+dp_{step-1,i,p+1}+dp_{step-1,i-1,p+1}+dp_{step-1,i,p}$$\n\u679a\u4e3e\u7684\u8303\u56f4\u8981\u8003\u8651\u6b65\u6570\u548c\u6a2a\u7eb5\u5750\u6807\u7684\u5927\u5c0f\uff0c\u5177\u4f53\u89c1\u4ee3\u7801\u3002\n## \u7ec6\u8282\u5904\u7406\n\u521d\u59cb\u503c\uff1a$dp_{1,1,n}=1$\u3002\n\n\u7b54\u6848\uff1a\u6613\u77e5\u4e24\u70b9\u76f8\u9047\u7684\u4f4d\u7f6e\u603b\u662f\u5728\u77e9\u5f62\u7684\u5bf9\u89d2\u7ebf\u4e0a\uff0c\u6240\u4ee5\u9700\u8981\u5206 $n+m$ \u7684\u5947\u5076\u8ba8\u8bba\u3002\n\n\u4f18\u5316\uff1a$dp$ \u6570\u7ec4\u7684\u7a7a\u95f4 $500^3=125000000$ \u8fd8\u662f\u4f1a MLE\u3002\u6211\u4eec\u53d1\u73b0\u6bcf\u4e00\u6b65\u7684\u679a\u4e3e\u53ea\u9700\u8981\u4e0a\u4e00\u6b65\u7684\u7b54\u6848\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u3002\u5f53\u7136\u5012\u5e8f\u679a\u4e3e\u4e5f\u53ef\u4ee5\u4f18\u5316\u3002\n## \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,m,ans,now=1;\nint dp[2][505][505];\nchar s[505][505];\nsigned main()\n{\n    scanf(\"%lld%lld\",&n,&m);\n    for(int i=1;i<=n;i++)\n    {\n        getchar();\n        for(int j=1;j<=m;j++)\n        {\n            s[i][j]=getchar();\n        }\n    }\n    if(s[1][1]!=s[n][m])//\u5c0f\u7279\u5224\n    {\n        printf(\"0\");\n        return 0;\n    }\n    dp[1][1][n]=1;\n    for(int k=2;k<=(n+m)/2;k++)\n    {\n        now^=1;//\u6eda\u52a8\u6570\u7ec4\n        memset(dp[now],0,sizeof dp[now]);//\u8bb0\u5f97\u6e05\u7a7a\n        for(int i=1;i<=min(k,n);i++)\n        {\n            for(int p=n;p>=max(n-k,i);p--)\n            {\n                int j=k-i+1,q=n+m-k-p+1;\n                if(s[i][j]==s[p][q])\n                    dp[now][i][p]=(dp[now^1][i-1][p]+dp[now^1][i][p+1]+dp[now^1][i-1][p+1]+dp[now^1][i][p])%1000000007;//\u72b6\u6001\u8f6c\u79fb\n            }\n        }\n    }\n    if((n+m)&1)//\u5947\u6570\u7684\u60c5\u51b5\n        for(int i=1;i<=n;i++)\n        {\n            ans=(ans+dp[now][i][i]+dp[now][i][i+1])%1000000007;\n        }\n    else//\u5076\u6570\u7684\u60c5\u51b5\n        for(int i=1;i<=n;i++)\n        {\n            ans=(ans+dp[now][i][i])%1000000007;\n        }\n    printf(\"%lld\",ans);\n}\n\n```\n\u5e0c\u671b\u672c\u7bc7\u9898\u89e3\u53ef\u4ee5\u5e2e\u5230\u5927\u5bb6\uff01\uff01\uff01",
        "postTime": 1677766563,
        "uid": 631576,
        "name": "cyz2010",
        "ccfLevel": 0,
        "title": "CF570E\u9898\u89e3"
    },
    {
        "content": "[CF570E](https://www.luogu.com.cn/problem/CF570E)\n\n[Pig and Palindromes](https://codeforces.com/problemset/problem/570/E)\n\n\u8fd9\u9898\u662f [P3126](https://www.luogu.com.cn/problem/P3126) \u52a0\u5f3a\u7248\u3002\n\n### \u601d\u8def\n\n\u8981\u8d70\u6210\u56de\u6587\u7684\u8def\u5f84\uff0c\u5373\u4ece\u5de6\u4e0a\u89d2 $(1,1)$ \u5f00\u59cb\u5411\u53f3\u4e0b\u548c\u53f3\u4e0b\u89d2 $(n,n)$ \u5f00\u59cb\u5411\u5de6\u4e0a\uff0c\u8d70\u81f3\u76f8\u5b57\u6bcd\u5b57\u6bcd\u90fd\u76f8\u540c\u3002dp \u8ba1\u6570\u3002\n\n\u8bbe $dp_{i,j,jj,k,kk}$ \u8868\u793a\u8d70\u4e86 $i$ \u6b65\u540e\uff0c\u4ece\u5de6\u4e0a\u8d70\u5230 $(j,jj)$ \uff0c\u4ece\u53f3\u4e0b\u8d70\u81f3 $(k,kk)$ \u7684\u65b9\u6848\u6570\u3002\n\n\u8f6c\u79fb\u5982\u4e0b\uff1a\n\n$dp_{i,j,jj,k,kk}=dp_{i-1,j-1,jj,k+1,kk}+dp_{i-1,j-1,jj,k,kk+1}+dp_{i-1,j,jj-1,k+1,kk}+dp_{i-1,j,jj-1,k,kk+1}$\n\n\u663e\u7136\u7a7a\u95f4\u53d7\u4e0d\u4e86\u3002\n\n\u56e0\u4e3a\u53ea\u80fd\u5411\u53f3\u4e0b\u6216\u5de6\u4e0a\u8d70\uff0c\u6240\u4ee5\u5f53\u8d70\u4e86 $i$ \u6b65\u540e\u4e24\u8fb9\u6240\u5728\u7684\u4f4d\u7f6e\u662f\u53ef\u4ee5\u7528 $i$ \u548c\u6a2a\u5750\u6807\u8868\u793a\u7684\u3002\u53ef\u4ee5\u5206\u522b\u8868\u793a\u4e3a $(j,2+i-1-j)$ \u548c $(k,n+m-i+1-k)$ \u3002\n\n\u6240\u4ee5\u72b6\u6001\u6539\u4e3a\u8bbe $dp_{i,j,k}$ \u8868\u793a\u8d70\u4e86 $i$ \u6b65\u540e\uff0c\u4ece\u5de6\u4e0a\u8d70\u5230 $(j,2+i-1-j)$\uff0c\u4ece\u53f3\u4e0b\u8d70\u81f3 $(k,n+m-i+1-k)$ \u7684\u65b9\u6848\u6570\u3002\n\n\u6761\u4ef6\u662f $c[j][jj]=c[k][kk]$\uff0c\u8f6c\u79fb\uff1a$dp_{i,j,k}=dp_{i-1,j-1,k+1}+dp_{i-1,j-1,k}+dp_{i-1,j,k+1}+dp_{i-1,j,k}$\n\n$500^3$ \u7684\u7a7a\u95f4\u8fd8\u4f1a\u7206\u70b8\uff0c\u8003\u8bd5\u5230\u6700\u540e\u4e00\u4f1a\u624d\u6539\u6eda\u52a8\u6570\u7ec4\uff0c\u5dee\u70b9\u6302\u6389\u3002\n\n\u6700\u540e\u53ef\u80fd\u76f8\u9047\u6216\u76f8\u90bb\uff0c\u6240\u4ee5\uff0c\u5f53 $n+m$ \u4e3a\u5076\u65f6\u76f8\u9047\uff0c\u7b54\u6848\u6765\u81ea $dp_{(n+m)/2,i,i}$\uff0c\u5426\u5219\u76f8\u90bb\uff0c\u7b54\u6848\u6765\u81ea $dp_{(n+m)/2,i,i}+dp_{(n+m)/2,i,i+1}$\u3002\n\n### code\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\n#define mod 1000000007\nusing namespace std;\nconst int maxn=510;\n\nint n,m,t,dp[3][maxn][maxn],ans;\nchar c[maxn][maxn];\nvoid sovle(){\n\tcin>>n>>m;t=n+m>>1;\n\tfor(int i=1;i<=n;i++)cin>>c[i]+1;\n\tif(c[1][1]!=c[n][m]){\n\t\tcout<<\"0\\n\";\n\t\treturn ;\n\t}\n\tdp[1][1][n]=1;\n\tfor(int i=2;i<=t;i++){\n\t\tfor(int j=1;j<=min(i,n);j++){\n\t\t\tfor(int k=n;k>=max(n-i,j);k--){\n\t\t\t\tint jj,kk;dp[i&1][j][k]=0;\n\t\t\t\tjj=2+i-1-j;kk=n+m-i+1-k;\n//\t\t\t\tcout<<i<<\" \"<<j<<\" \"<<jj<<\" \"<<k<<\" \"<<kk<<\"\\n\";\n\t\t\t\tif(c[j][jj]==c[k][kk]){\n\t\t\t\t\tdp[i&1][j][k]+=dp[(i-1)&1][j-1][k+1],dp[i&1][j][k]%=mod;\n\t\t\t\t\tdp[i&1][j][k]+=dp[(i-1)&1][j-1][k],dp[i&1][j][k]%=mod;\n\t\t\t\t\tdp[i&1][j][k]+=dp[(i-1)&1][j][k+1],dp[i&1][j][k]%=mod;\n\t\t\t\t\tdp[i&1][j][k]+=dp[(i-1)&1][j][k],dp[i&1][j][k]%=mod;\n\t\t\t\t}\n//\t\t\t\tcout<<dp[i&1][j][k]<<\"\\n\";\n\t\t\t}\n\t\t}\n\t}\n\tif((n+m)&1)for(int i=1;i<=n;i++)ans+=dp[t&1][i][i+1],ans%=mod,ans+=dp[t&1][i][i],ans%=mod;\n\telse for(int i=1;i<=n;i++)ans+=dp[t&1][i][i],ans%=mod;\n\tcout<<ans<<\"\\n\";\n}\n\nint T;\nsigned main(){\n//\tcin.tie(0);cout.tie(0);\n//\tios::sync_with_stdio(false);\n\tT=1;\n\twhile(T--)sovle();\n}\n```\n\n",
        "postTime": 1678175563,
        "uid": 754153,
        "name": "gdf_yhm",
        "ccfLevel": 5,
        "title": "CF570E\u9898\u89e3"
    },
    {
        "content": "## CF570E and Luogu P3126 \u9898\u89e3\n\n### \u9898\u76ee\u4f20\u9001\u95e8\uff1a\n[CF570E](https://codeforces.com/contest/570/problem/E) | [CF570E on Luogu](https://www.luogu.com.cn/problem/CF570E) | \n[Luogu P3126](https://www.luogu.com.cn/problem/P3126)\n\n### \u9898\u610f\uff08CF570E\uff09\uff1a\n\n\u7ed9\u5b9a\u4e00\u4e2a\u7531\u5c0f\u5199\u5b57\u6bcd\u7ec4\u6210\u7684 $n \\times m$ \u7684\u77e9\u9635 $A$\uff0c\u6c42\u4ece $A_{1, 1}$ \u5230 $A_{n, m}$ \u7684\u6240\u6709\u8def\u5f84\u4e2d\uff0c\u56de\u6587\u4e32\u7684\u4e2a\u6570\u3002\u9014\u4e2d\u53ea\u80fd\u5411\u4e0b\u6216\u5411\u53f3\u8d70\u4e00\u683c\u3002\n\n### \u601d\u8def\uff1a\n\n\u53ef\u4ee5\u5c06\u95ee\u9898\u7406\u89e3\u4e3a\uff1a\n\n\u4e24\u4e2a\u70b9\u5206\u522b\u4ece $(1, 1)$ \u548c $(n, m)$ \u51fa\u53d1\uff0c\u540c\u65f6\u5206\u522b\u5411\u53f3 / \u4e0b\u548c\u5411\u5de6 / \u4e0a\u8d70\uff0c\u4fdd\u8bc1\u540c\u65f6\u7ecf\u8fc7\u7684\u5b57\u6bcd\u76f8\u540c\uff0c\u6700\u7ec8\u76f8\u9047\uff08\u6216\u76f8\u90bb\uff09\u3002\n\n\u8003\u8651\u5728\u77e9\u9635\u4e0a\u8fdb\u884c dp\u3002\u8bbe\u72b6\u6001 `dp[step][i][j][x][y]` \u8868\u793a\u8d70\u4e86 $step$ \u6b65\uff0c\u5de6\u4e0a\u7684\u90a3\u4e2a\u70b9\u5728 $(i, j)$\uff0c\u53f3\u4e0b\u7684\u90a3\u4e2a\u70b9\u5728 $(x, y)$\uff0c\u5bb9\u6613\u5199\u51fa\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff08~~\u592a\u957f\u4e86\u6211\u5c31\u4e0d\u5199\u4e86~~\uff09\u3002\n\n\u4e0d\u8fc7\u8fd9\u6837\u76f4\u63a5\u4e94\u7ef4 `for` \u5faa\u73af\u7684\u8bdd\u5fc5\u7136\u4f1a\u65f6\u7a7a\u53cc\u7206\u70b8\u3002\u7531\u4e8e\u4e00\u6b65\u53ea\u80fd\u5411\u53f3\u6216\u5411\u4e0b\u8d70\u4e00\u683c\uff0c$i$ \u548c $j$ \u4e0e\u6b65\u6570 $step$ \u5b58\u5728\u6570\u91cf\u5173\u7cfb\uff0c\u5373 $i + j - 1= step$\u3002\u540c\u7406\uff0c\u53ea\u8981\u6309\u7167\u6240\u7ed9\u7684\u6837\u4f8b\u5199\u51e0\u4e2a\u6570\uff0c\u5c31\u4f1a\u53d1\u73b0 $x + y - 1 = n + m - step$\u3002\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u4e00\u6b65\uff0c $j$ \u548c $y$ \u5206\u522b\u53ef\u4ee5\u7531 $i$ \u548c $x$ \u8ba1\u7b97\u51fa\u6765\u3002\u8fd9\u6837\u65f6\u7a7a\u590d\u6742\u5ea6\u5c31\u53d8\u6210\u4e86\u4e09\u7ef4\u3002\n\n\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\uff1a\n\n`dp[step][i][x] = dp[step-1][i-1][x+1] + dp[step-1][i][x+1] + dp[step-1][i-1][x] + dp[step-1][i][x];`\n\n\u521d\u503c\uff1a`dp[1][1][n] = 1;`\n\n\u4f18\u5316\u540e\u7684\u7a7a\u95f4 $500 ^ 3 = 125,000,000$ \u663e\u7136\u4f1a MLE\u3002\u6ce8\u610f\u5230\u72b6\u6001\u8f6c\u79fb\u7684\u7b2c\u4e00\u7ef4\u53ea\u7528\u5230\u4e86 `step-1`\uff0c\u6240\u4ee5\u53ef\u4ee5\u8fdb\u884c\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u3002\uff08\u5176\u5b9e\u5269\u4e0b\u4e24\u7ef4\u5e94\u8be5\u4e5f\u80fd\u4f18\u5316\uff0c\u4ee3\u7801\u5c31\u4ea4\u7ed9\u5404\u4f4d dalao \u5566\uff09\n\n\u7ec6\u8282\uff1a\u7531\u4e8e $n + m$ \u7684\u5947\u5076\u6027\u4e0d\u540c\uff0c\u6700\u7ec8\u4e24\u4e2a\u70b9\u53ef\u80fd\u4f1a\u76f8\u9047\u5728\u540c\u4e00\u70b9\uff0c\u4e5f\u53ef\u80fd\u4f1a\u76f8\u90bb\uff0c\u5373\u8def\u5f84\u957f\u5ea6\u53ef\u80fd\u4e3a\u5947\u6570\u6216\u5076\u6570\uff0c\u8fd9\u65f6\u8981\u8fdb\u884c\u7279\u5224\u3002\n\n### \u53c2\u8003\u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <cstring>\n#define f(x, y, z) for (int x = (y); (x) <= (z); (x)++)\n#define g(x, y, z) for (int x = (y); (x) >= (z); (x)--)\nusing namespace std;\ntypedef long long ll;\nint const N = 550;\nint const MOD = 1e9 + 7;\nint n, m, t, step;\nll ans, dp[2][N][N];\nchar c[N][N];\n\nsigned main() {\n\t\n\t// CF570E\n\tscanf(\"%d%d\", &n, &m);\n\t\n\t// Luogu P3126\n//\tscanf(\"%d\", &n);\n//\tm = n;\n\t\n\tf(i, 1, n) scanf(\"%s\", c[i] + 1);\n\tif (c[1][1] != c[n][m]) { //\u7279\u5224\u4e00\u4e0b\n\t\tputs(\"0\");\n\t\treturn 0;\n\t}\n\tstep = 1;\n\tdp[1][1][n] = 1;\n\tt = (n + m) >> 1;\n\tf(k, 2, t) {\n\t\tstep ^= 1;\n\t\tmemset(dp[step], 0, sizeof dp[step]);\n\t\tf(i, 1, min(k, n)) {\n\t\t\tint j = k + 1 - i;\n\t\t\tg(x, n, max(n - k, i)) {\n\t\t\t\tint y = n + m - k + 1 - x;\n\t\t\t\tif (c[i][j] == c[x][y]) {\n\t\t\t\t\tdp[step][i][x] += dp[step ^ 1][i - 1][x + 1], dp[step][i][x] %= MOD;\n\t\t\t\t\tdp[step][i][x] += dp[step ^ 1][i][x + 1], dp[step][i][x] %= MOD;\n\t\t\t\t\tdp[step][i][x] += dp[step ^ 1][i - 1][x], dp[step][i][x] %= MOD;\n\t\t\t\t\tdp[step][i][x] += dp[step ^ 1][i][x], dp[step][i][x] %= MOD;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n    // \u5bf9n + m\u7684\u5947\u5076\u6027\u8fdb\u884c\u7279\u5224\n\tif ((n + m) & 1) f(i, 1, n)\n\t\tans = (ans + dp[step][i][i] + dp[step][i][i + 1]) % MOD;\n\telse f(i, 1, n) \n\t\tans = (ans + dp[step][i][i]) % MOD;\n\tprintf(\"%d\\n\", ans);\n\t\n\treturn 0;\n}\n```",
        "postTime": 1661522485,
        "uid": 375425,
        "name": "f2021ljh",
        "ccfLevel": 0,
        "title": "CF570E and Luogu P3126 \u9898\u89e3"
    },
    {
        "content": "\u611f\u89c9\u6709\u70b9\u50cf\u4f20\u7eb8\u6761\uff0c\u4f20\u7eb8\u6761\u662f\u662f\u7ef4\u62a4\u4e24\u4e2a\u70b9\u540c\u65f6\u4ece\u8d77\u70b9\u51fa\u53d1\uff0c\u4fdd\u8bc1\u6b65\u6570\u76f8\u540c\uff0c\u8f6c\u79fb\u5230\u7ec8\u70b9\uff0c\u8fd9\u9053\u9898\u662f\u4e00\u4e2a\u70b9\u4ece\u8d77\u70b9\uff0c\u53e6\u4e00\u4e2a\u70b9\u4ece\u7ec8\u70b9\u51fa\u53d1\uff0c\u4fdd\u8bc1\u6b65\u6570\u76f8\u540c$f[step][i][j][k][p]$\u8868\u793a\u8d70\u4e86$step$\u6b65\uff0c\u4e00\u4e2a\u70b9\u8d70\u5230$(i,j),$\u53e6\u4e00\u4e2a\u70b9\u8d70\u5230$(k,p)$\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u72b6\u6001\u5728\u65f6\u7a7a\u590d\u6742\u5ea6\u4e0a\u90fd\u8fc7\u4e0d\u53bb\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u4f18\u5316\uff0c\u4e8e\u662f\u6211\u4eec\u53d1\u73b0$j$\u548c$p$\u90fd\u53ef\u4ee5\u901a\u8fc7$step$\u7b97\u51fa\u6765\uff0c\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u6eda\u52a8\u6570\u7ec4\u5b58\u50a8$step$\u8fd9\u4e00\u4f4d\uff0c\u5e76\u4e14\u5728\u7ec6\u8282\u5904\u7406\u4e0a\u8fd9\u9053\u9898\u8fd8\u662f\u633a\u9ebb\u70e6\u7684\n```cpp\n#include <bits/stdc++.h>\n#define base 131\n#define mod 1000000007\n#define ll long long\nusing namespace std;\nint dx[]={-1,-1,0,0},dy[]{1,0,1,0},f[2][1000][1000];\nchar s[1000][1000];\nint main(){\n    int n=read(),m=read();\n    for (int i=1;i<=n;++i)    \n        scanf(\"%s\",s[i]+1);\n    if (s[1][1]!=s[n][m]){\n        puts(\"0\");\n        return 0;\n    }\n    f[1][1][n]=1;\n    int now=1;\n    for (int st=2;st<=(n+m)>>1;++st){\n        now^=1;\n        memset(f[now],0,sizeof(f[now]));\n        for (int i=1;i<=min(st,n);++i)\n            for (int k=n;k>=max(n-st,i);--k){\n                int j=st-i+1,p=m-(st-(n-k))+1;\n                if (s[i][j]==s[k][p])\n                    for (int t=0;t<4;++t)\n                        f[now][i][k]=(f[now][i][k]+f[now^1][i+dx[t]][k+dy[t]])%mod;//\u5de6\u8fb9\u7684\u70b9\u53ef\u4ee5\u7531\u5de6\u4e0e\u4e0a\u8f6c\u79fb\u8fc7\u6765\uff0c\u53f3\u8fb9\u7684\u70b9\u53ef\u4ee5\u7531\u53f3\u4e0e\u4e0b\u8f6c\u79fb\u8fc7\u6765\n            }\n    }\n    ll ans=0;\n    if ((n+m)&1)\n        for (int i=1;i<=n;++i)\n            ans=(ans+f[now][i][i]+f[now][i][i+1])%mod;\n    else \n        for (int i=1;i<=n;++i)\n            ans=(ans+f[now][i][i])%mod;//n\u4e0em\u7684\u5947\u5076\u6027\u9700\u8981\u7279\u5224\n    printf(\"%d\",ans);\n}\n```",
        "postTime": 1553942320,
        "uid": 54260,
        "name": "tcchyc",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF570E \u3010Pig and Palindromes\u3011"
    }
]
[
    {
        "content": "\u6211\u4eec\u66b4\u529b\u679a\u4e3e\u4e00\u4e0b$delim_{1}$  \n\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e2a$delim_{1}$\uff0cO(n)\u626b\u4e00\u904d+\u524d\u7f00\u548c\u6c42\u51fa\u6700\u5927$delim_{0}$\u548c$delim_{2}$\uff0c\u7136\u540e\u8bb0\u5f55\u4e00\u4e0b\u5b83\u4eec\u7684\u4f4d\u7f6e\u5c31\u884c\u5566\n\n\u653e\u4e2a\u4ee3\u7801\n```cpp\n#include <cstdio>\n#define ll long long\n\ninline ll read(){\n    ll x = 0; int zf = 1; char ch = ' ';\n    while (ch != '-' && (ch < '0' || ch > '9')) ch = getchar();\n    if (ch == '-') zf = -1, ch = getchar();\n    while (ch >= '0' && ch <= '9') x = x * 10 + ch - '0', ch = getchar(); return x * zf;\n}\n\nlong long qzh[5005];\n\nint main(){\n    int n = read();\n    for (int i = 1; i <= n; ++i)\n        qzh[i] = read();\n    for (int i = 1; i <= n; ++i)\n        qzh[i] += qzh[i - 1];\n    long long cur1, cur2, ans = 0;\n    int pos1, pos3, p1 = 0, p2 = 0, p3 = 0;\n    for (int i = 0; i <= n; ++i){\n        cur1 = cur2 = 0;\n        pos1 = 0, pos3 = i;\n        for (int j = 0; j <= i; ++j)\n            if (qzh[j] - (qzh[i] - qzh[j]) > cur1){\n                cur1 = qzh[j] - (qzh[i] - qzh[j]);\n                pos1 = j;\n            }\n        for (int j = i; j <= n; ++j)\n            if ((qzh[j] - qzh[i]) - (qzh[n] - qzh[j]) > cur2){\n                cur2 = (qzh[j] - qzh[i]) - (qzh[n] - qzh[j]);\n                pos3 = j;\n            }\n        if (cur1 + cur2 > ans){\n            ans = cur1 + cur2;\n            p1 = pos1;\n            p2 = i;\n            p3 = pos3;\n        }\n    }\n    printf(\"%d %d %d\", p1, p2, p3);\n    return 0;\n}\n```",
        "postTime": 1557804343,
        "uid": 20462,
        "name": "lukelin",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF846C \u3010Four Segments\u3011"
    },
    {
        "content": "## \u9898\u76ee\u5927\u610f ##\n\u7ed9\u5b9a $a_1 \\text{,} a_2...a_n$\uff0c\u6c42 $i,j,k(0\\le i\\le j\\le k\\le n)$ \u6ee1\u8db3 $\\sum_{x = 1}^{i}a_x - \\sum_{x=i+1}^{j}a_x+ \\sum_{x=j+1}^{k}a_x-\\sum_{x=k+1}^{n}a_x$ \u6700\u5927\u3002\n\n\u82e5\u6709\u591a\u79cd\u65b9\u6848\uff0c\u8f93\u51fa\u4efb\u610f\u4e00\u79cd\u3002\n\n## \u601d\u8def ##\n###\t\u7b2c\u4e00\u6b65\n\u9996\u5148\u8003\u8651\u66b4\u529b\u679a\u4e3e\uff0c\u679a\u4e3e $i,j,k$\uff0c\u7136\u540e\u5229\u7528**\u524d\u7f00\u548c**\u8ba1\u7b97\uff0c\u65f6\u95f4\u590d\u6742\u5ea6$O(n^3)$\uff0c\u663e\u7136\u8d85\u65f6\u3002\n\n### \u7b2c\u4e8c\u6b65\n\u6709\u6ca1\u6709\u4ec0\u4e48\u53ef\u4ee5\u4f18\u5316\u7684\u5730\u65b9\u2026\u2026\u4ed4\u7ec6\u60f3\u4e00\u60f3\uff0c\u6211\u4eec\u8981\u6c42\u7684\u5f0f\u5b50\uff0c\u524d\u4e24\u9879\u53ea\u548c $i,j$ \u6709\u5173\uff0c\u540e\u4e24\u9879\u53ea\u548c $j,k$ \u6709\u5173\uff0c\u5982\u679c $j$ \u56fa\u5b9a\u4e86\uff0c\u5b83\u4eec\u5c31\u4e0d\u4f1a\u4e92\u76f8\u5e72\u6270\u4e86\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528**\u8d2a\u5fc3**\u7684\u601d\u60f3\u3002\n\n\u5bf9\u4e8e\u7ed9\u5b9a\u7684 $j$\uff0c\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e $i$ \u6765\u8ba1\u7b97\u51fa\u524d\u9762\u4e24\u9879\u7684\u6700\u5927\u503c\uff0c\u518d\u679a\u4e3e $k$ \u8ba1\u7b97\u51fa\u540e\u9762\u4e24\u9879\u7684\u6700\u5927\u503c\uff0c\u5b83\u4eec\u4fe9\u7684\u548c\u4e00\u5b9a\u662f\u5bf9\u4e8e\u8fd9\u4e2a\u7279\u5b9a\u7684 $j$ \u6240\u80fd\u5f97\u5230\u7684\u7684\u6700\u5927\u503c\u3002\n\n\u6240\u4ee5\uff0c\u6211\u4eec\u53ea\u8981\u679a\u4e3e $j$\uff0c\u7136\u540e\u6309\u7167\u4e0a\u8ff0\u65b9\u6cd5\u8ba1\u7b97\uff0c\u5c31\u80fd\u5f97\u51fa\u6700\u4f18\u7684 $i,j,k$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $O(n^2)$\u3002\n\n## \u4ee3\u7801\n```cpp\n#include <iostream>\nusing namespace std;\ntypedef long long ll; \nconst ll inf = 0x3f3f3f3f3f3f3f3f; \nint n;\nll pre[5005], ansi, ansj, ansk, anssum = -inf; //\u5341\u5e74OI\u4e00\u573a\u7a7a\uff0c\u4e0d\u5f00long long\u89c1\u7956\u5b97\ninline ll sum(int l, int r) {\n\tif (l == r) return 0;\n\treturn pre[r] - pre[l]; //\u56e0\u4e3a\u539f\u5f0f\u4e2d\u90fd\u662fx+1\u4e0ey\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7b97\u5c3e\u4e0d\u7b97\u5934\n}\n\nint main() {\n\tcin >> n;\n\tfor (int i = 1; i <= n; i++) {\n\t\tint x;\n\t\tcin >> x;\n\t\tpre[i] = pre[i - 1] + x;\n\t}\n\tfor (int j = 0; j <= n; j++) {\n\t\tll maxx = -inf; //\u524d\u4e24\u9879\u6216\u540e\u4e24\u9879\u7684\u6700\u5927\u503c\n\t\tint ri, rk; //\u5bf9\u4e8e\u5f53\u524d\u7684j\uff0c\u6700\u4f18\u7684i\uff0ck\n\t\tll ls = 0;//\u5bf9\u4e8e\u5f53\u524d\u7684j\uff0c\u5f0f\u5b50\u7684\u6700\u5927\u503c\n\t\tfor (int i = 0; i <= j; i++) {\n\t\t\tll s = sum(0, i) - sum(i, j);\n\t\t\tif (s > maxx) maxx = s, ri = i;\n\t\t}\n\t\tls += maxx;\n\t\tmaxx = -inf;\n\t\tfor (int k = j; k <= n; k++) {\n\t\t\tll s = sum(j, k) - sum(k, n);\n\t\t\tif (s > maxx) maxx = s, rk = k;\n\t\t}\n\t\tls += maxx;\n\t\tif (ls > anssum) { //\u5982\u679c\u5f53\u524d\u7684\u6700\u5927\u503c\u5927\u4e8e\u5168\u5c40\u6700\u5927\u503c\u5219\u66f4\u65b0\n\t\t\tanssum = ls;\n\t\t\tansi = ri;\n\t\t\tansj = j;\n\t\t\tansk = rk;\n\t\t}\n\t}\n\tcout << ansi << ' ' << ansj << ' ' << ansk << endl;\n\treturn 0;\n}\n```\n",
        "postTime": 1659621861,
        "uid": 536396,
        "name": "Uuuuuur_",
        "ccfLevel": 5,
        "title": "CF846C Four Segments"
    },
    {
        "content": "\u771f\u7684\u6ca1\u6709\u4eba\u7528\u7ebf\u6027\u89e3\u6cd5\uff1f\uff1f\uff1f\n\n~~\u2308\u8fd9\u9898\u80fd\u5f00\u52301e5\u7684\u230b~~\n\n\u7ebf\u6027\u89e3\u6cd5\u4e3a\u5206\u9636\u6bb5dp\u3002\n\n\u8fdb\u5165\u6b63\u9898\uff1a\u8bbe$dp_{i,0/1/2/3}$\u4e3a\u524d$i$\u4e2a\u5143\u7d20\uff0c\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u5c5e\u4e8e\u7b2c$1/2/3/4$\u6bb5\u7684\u6700\u5927\u548c\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\u4e3a$dp_{i,j}=\\max\\limits_{k<j}\\{dp_{i-1,k}\\pm a_i\\}$\uff0c\u5176\u4e2d\u770b\u662f\u7b2c\u51e0\u6bb5\u6765\u9009\u62e9\u662f$+a_i$\u8fd8\u662f$-a_i$\u3002\n\n\u5bfb\u627e\u65b9\u6848\u65f6\uff0c\u53ef\u4ee5\u7528\u4e00\u4e2a$0 \\leq path_{i,j} \\leq 3$\u6570\u7ec4\u6765\u8ba1\u7b97\u7b2c$i$\u4e2a\u4f4d\u7f6e\u662f\u4ece\u54ea\u91cc\u8f6c\u79fb\u8fc7\u6765\u7684\u3002\n\n\u6700\u540e\u4ece\u540e\u5f80\u524d\u626b\u4e00\u904d\uff0c\u5f00\u4e00\u4e2a\u53d8\u91cf$pos$\uff0c\u6700\u5f00\u59cb\u8d4b\u503c\u4e3a3\uff0c\u5982\u679c$path_i \\neq i$\u5219\u8868\u793a\u7b2c$i-1$\u4f4d\u540e\u9762\u6709\u5206\u754c\u70b9\uff0c\u5c31\u5c06$j$\u6ee1\u8db3$path_{i,pos} \\leq j < pos$\u7684$delim_j$\u5168\u90e8\u8d4b\u503c\u4e3a$i-1$\uff0c\u6700\u540e\u8f93\u51fa\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u6ce8\u610flong long\u7684\u95ee\u9898\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u5e94\u8be5\u662f$\\Theta(16N)$\u5de6\u53f3\u3002\n\n\u6211\u7684\u7ebf\u6027\u89e3\u6cd5\u662f\u76ee\u524d\u7684\u6700\u4f18\u89e3\uff0c\u6b22\u8fce\u6253\u7834\uff08\n\n```cpp\n#include <iostream>\n#include <cmath>\n#include <cstring>\n#include <cstdio>\nusing namespace std;\n\nint n, path[5005][5];\nlong long dp[5005][5], a[5005];\n\nvoid Read() {\n\tscanf(\"%d\", &n);\n\tfor (int i = 1;i <= n;i++) {\n\t\tscanf(\"%I64d\", &a[i]);\n\t}\n}\n\nvoid Solve() {\n\t//dp\u8981\u521d\u59cb\u5316\u4e3a\u65e0\u7a77\u5c0f\uff0c\u56e0\u4e3a\u53ef\u80fd\u65e0\u6cd5\u8fbe\u5230\u6b63\u503c\n\tmemset(dp, 0xcf, sizeof(dp)); dp[0][1] = 0;\n\tfor (int i = 1;i <= n;i++) {\n\t\tfor (int j = 1;j <= 4;j++) {\n\t\t\tfor (int k = 1;k <= j;k++) {\n\t\t\t\tlong long cur = ((j & 1) ? 1 : -1) * a[i] + dp[i - 1][k];//\u8ba1\u7b97\u8f6c\u79fb\u503c\n\t\t\t\tif (dp[i][j] < cur) {\n\t\t\t\t\tdp[i][j] = cur;//dp\u8f6c\u79fb\n\t\t\t\t\tpath[i][j] = k;//\u8bb0\u5f55\u8def\u5f84\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint pos, ans[4]; long long mx = 0xcfcfcfcfcfcfcfcf;\n\t//\u5904\u7406\u5206\u754c\u70b9\u5728n\u4e0a\u7684\u60c5\u51b5\n\tfor (int i = 1;i <= 4;i++) {\n\t\tif (dp[n][i] > mx) {\n\t\t\tmx = dp[n][i]; pos = i;\n\t\t}\n\t}\n\tfor (int i = pos;i <= 3;i++) {\n\t\tans[i] = n;\n\t}\n\tfor (int i = n;i >= 1;i--) {\n\t\tif (path[i][pos] != pos) {\n\t\t\tfor (int j = path[i][pos]; j < pos;j++) {\n\t\t\t\tans[j] = i - 1;//\u8bb0\u5f55\u5206\u754c\u70b9\n\t\t\t}\n\t\t}\n\t\tpos = path[i][pos];\n\t}\n\tprintf(\"%d %d %d\", ans[1], ans[2], ans[3]);\n}\n\nint main() {\n\tRead(); Solve();\n\treturn 0;\n}\n```",
        "postTime": 1566989705,
        "uid": 61088,
        "name": "Solystic",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF846C \u3010Four Segments\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3an\u7684\u5e8f\u5217a\uff0c\u6c42\u51fa\u4e09\u4e2a\u70b9i,j,k(0<=i<=j<=k<=n)\uff0c\u4f7f\u5f97a[1]+...+a[i]-a[i+1]-...-a[j]+a[j+1]+...+a[k]-a[k+1]-...-a[n]\u6700\u5927\n\n## \u601d\u8def\n\n\u6700\u5f00\u59cb\u6ca1\u60f3\u51fa\u6765,\u7136\u540e\u770b\u4e86\u9898\u89e3\n\n\u5148\u5bf9\u5e8f\u5217\u6c42\u524d\u7f00\u548c,\u8bbe\u4e3a$sum$\n\n\u90a3\u4e48\u6700\u5927\u503c\u4e3a$max\\{ sum_i-(sum_j-sum_i)+(sum_k-sum_j)-(sum_n-sum_k)\\}$\n\n\u5316\u7b80\u540e\u5c31\u662f\u6c42$max\\{sum_i+sum_k-sum_j\\}$\u65f6$i,j,k$\u7684\u4f4d\u7f6e\n\n\u9898\u89e3\u91cc\u9762\u662f\u679a\u4e3e$j$,\u7136\u540e\u518d$O(n)$\u626b\u524d\u7f00\u548c\u6c42$sum_i,sum_k$\u7684\u6700\u5927\u503c\n\n\u4f46$j$\u662f\u9010\u6e10\u53d8\u5316\u7684,\u6211\u4eec\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u6765\u7ef4\u62a4$sum_k$\u7684\u6700\u5927\u503c,\u81f3\u4e8e$sum_i$\u7684\u6700\u5927\u503c\u76f4\u63a5\u7ef4\u62a4\u5373\u53ef\n\n\u65f6\u95f4\u590d\u6742\u5ea6$ O(n)$\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\nint n,ansi,ansj,ansk,l=1,r=0;\nint a[5010],q[5010];\nsigned main(){\n\tlong long ans=(-(1ll<<62));\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++){scanf(\"%lld\",&a[i]);a[i]+=a[i-1];}\n\tfor(int i=1;i<=n;i++){\n\t\twhile(l<=r && a[i]>a[q[r]])r--;\n\t\tq[++r]=i;\n  }\n\tint ki=0,kk,sum1,sum2,sum3;\n\tfor(int j=0;j<=n;j++){\n\t\tif(q[l]<j)l++;kk=q[l];\n\t\tif(a[ki]<a[j])ki=j;\n\t\tif(a[kk]+a[ki]-a[j]>ans)ans=a[kk]+a[ki]-a[j],ansi=ki,ansj=j,ansk=kk;\n\t}\n\tprintf(\"%lld %lld %lld\\n\",ansi,ansj,ansk);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1605183000,
        "uid": 59623,
        "name": "fpjo",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF846C \u3010Four Segments\u3011"
    },
    {
        "content": "# Four Segments\n\u7ed9\u5b9a\u957f\u5ea6\u4e3an\u7684\u5e8f\u5217a\uff0c\u6c42\u51fa\u4e09\u4e2a\u70b9i,j,k(0<=i<=j<=k<=n)\uff0c\u4f7f\u5f97a[1]+...+a[i]-a[i+1]-...-a[j]+a[j+1]+...+a[k]-a[k+1]-...-a[n]\u6700\u5927\n## \u5e7f\u544a\u63d2\u5165\n\u5728\u6211\u7684\u535a\u5ba2\u91cc\u770b\u9898\u89e3\u4f7f\u7528\u6548\u679c\u66f4\u4f73\u54e6QwQ\n\n[\u6155\u5bb9\u7433\u7684\u540e\u82b1\u56ed](https://muronglin.top/hgoi-20190514/)\n\n[\u535a\u5ba2\u56ed(\u540c\u6b65\u66f4\u65b0)](https://www.cnblogs.com/muronglin/p/hgoi-20190514.html)\n## \u89e3\u6cd5\n\u5982\u679c\u66b4\u529b\u5c31\u662fn\u7684\u7acb\u65b9\uff0c\u65e0\u6cd5\u63a5\u53d7\u554aQAQ\n\n\u60f3\u4e00\u60f3\u4f18\u5316\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u70b9\u90fd\u53ef\u4ee5O(n)\u6c42\u51fa\u4ee5\u5b83\u4e3aj\u70b9\u7684\u6700\u4f18i\u70b9\u548ck\u70b9\uff0c\u4e14i\u70b9\u548ck\u70b9\u4e0d\u76f8\u5e72\n\n\u5c31\u53ef\u4ee5\u4f18\u5316\u6210n\u65b9\u4e86\n## ac\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h> \nusing namespace std;\nlong long n,a[5010],l[5010],r[5010],sl,sr,suml,sumr,sum,ans=-23333333333333,res=0;\nint main()\n{\n\tscanf(\"%lld\",&n);\n\tfor(int i=1;i<=n;i++)scanf(\"%lld\",&a[i]),a[i]+=a[i-1];\n\tfor(int i=0;i<=n;i++)\n\t{\n\t\tl[i]=0,r[i]=i;\n\t\tsl=0,sr=a[i];\n\t\tfor(int j=1;j<=i;j++)\n\t\t{\n\t\t\tsuml=a[j]-a[0],sumr=a[i]-a[j];\n\t\t\tif(suml-sumr>sl-sr)sl=suml,sr=sumr,l[i]=j;\n\t\t}\n\t\tsum=sl-sr;\n\t\tsl=0,sr=a[n]-a[i];\n\t\tfor(int j=i+1;j<=n;j++)\n\t\t{\n\t\t\tsuml=a[j]-a[i],sumr=a[n]-a[j];\n\t\t\tif(suml-sumr>sl-sr)sl=suml,sr=sumr,r[i]=j;\n\t\t}\n\t\tsum+=sl-sr;\n\t\tif(sum>ans)ans=sum,res=i;\n\t}\n\tprintf(\"%lld %lld %lld\\n\",l[res],res,r[res]);\n\treturn 0;\n}\n```",
        "postTime": 1557808120,
        "uid": 24663,
        "name": "\u6ce0\u5c0f\u6bd2",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF846C \u3010Four Segments\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u5b9a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217 $a$\uff0c\u6c42\u51fa\u4e09\u4e2a\u70b9$d_0,d_1,d_2(0 \\le d_0 \\le d_1 \\le d_2 \\le n)$\uff0c\u4f7f\u5f97 $\\sum_{i=1}^{d_0}a_i-\\sum_{i=d_0+1}^{d1}a_i+\\sum_{i=d_1+1}^{d_2}a_i-\\sum_{i=d_2+1}^na_i$ \u6700\u5927\u3002\n\n## \u601d\u8def1\n\n\u5176\u5b9e\u8fd9\u9053\u9898\u5c31\u76f8\u5f53\u4e8e\u628a\u5e8f\u5217 $a$ \u5272\u6210 4 \u6bb5\uff0c\u6b63\u7531\u4e8e\u6b64\u6211\u4eec\u624d\u6709\u4e86\u66b4\u529b\u679a\u4e3e\u89e3\u6cd5\uff1a\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$\uff0c\u7531\u4e8e $n$ \u8f83\u5c0f\uff0c\u56e0\u6b64\u4e0d\u505a\u9884\u5904\u7406\u5199\u6210\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2)$ \u7684\u4ee3\u7801\u4e5f\u884c\u3002\n\n\u4e0b\u9762\u6765\u8bb2\u66b4\u529b\u7684\u601d\u8def\uff0c\u4f60\u53ef\u4ee5\u679a\u4e3e $d_1$ \u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u76f8\u5e94\u7684\u627e\u51fa $d_0$ \u4e0e $d_2$ \u7684\u4f4d\u7f6e\u3002\n\n\u5148\u6765\u770b\u770b\u5bf9\u4e8e\u4e00\u4e2a $d_1$ \u5982\u4f55\u627e $d_0$\u3002\u6839\u636e\u9898\u610f\uff0c\u5728 $d_1$ \u524d\uff08\u5305\u62ec $d_1$\uff09\u7684\u8fd9\u4e9b\u6570\u7684\u548c\u4e3a $\\sum_{i=1}^{d_0}a_i-\\sum_{i=d_0+1}^{d1}a_i$\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06 $\\sum_{i=d_0+1}^{d1}a_i=\\sum_{i=1}^{d_1}a_i-\\sum_{i=0}^{d_0}a_i$ \u5e26\u5165\u5f97\u548c\u4e3a $2 \\times \\sum_{i=1}^{d_0}a_i-\\sum_{i=1}^{d1}a_i$\uff0c\u5176\u4e2d $\\sum_{i=1}^{d1}a_i$ \u4e3a\u5e38\u6570\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u6700\u5927\u5316 $\\sum_{i=1}^{d_0}a_i$\u3002\n\n\u540c\u6837\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230 $d_2$\uff0c\u8fd9\u91cc\u7b80\u7565\u7684\u5199\u4e00\u4e0b\n:\n\n$\\sum_{i=d_1+1}^{d_2}a_i-\\sum_{i=d_2+1}^na_i=(\\sum_{i=d_1+1}^{n}a_i-\\sum_{i=d_2+1}^{n}a_i)-\\sum_{i=d_2+1}^na_i=\\sum_{i=d_1+1}^n-2 \\times \\sum_{i=d2+1}^n$\u3002\n\n\u540c\u6837\u7684 $\\sum_{i=d_1+1}^n$ \u4e3a\u5e38\u91cf\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6700\u5c0f\u5316 $\\sum_{i=d2+1}^n$ \u5373\u53ef\u3002\n\n\u6211\u4eec\u8bb0 $P_{d_1}$ \u8868\u793a $(\\sum_{i=1}^{d_0})_{max}$\uff0c $S_{d_1}$ \u8868\u793a $(\\sum_{i=d2+1}^n)_{min}$\uff0c\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u4e2a $d_1$\uff0c\u6700\u540e\u7684\u7ed3\u679c\u5c31\u662f $2 \\times P_{d_1}-\\sum_{i=1}^{d_1}a_i+\\sum_{i=d_1+1}^n a_i-2 \\times S_{d_1}$\u3002\u6700\u540e\u53d6\u6700\u5927\u7684\u5373\u53ef\u3002\n\n## \u4ee3\u78011\n\n\u4e0b\u9762\u653e\u4e0a\u6211\u7684\u4ee3\u7801\uff0c\u5927\u5bb6\u53ef\u4ee5\u501f\u9274\u4e00\u4e0b\u3002\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nlong long n,a[5005],sum[5005],s[5005],ans=-1e18,p,q,r;\nint main(){\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cin>>n;\n    for(int i=1;i<=n;i++)cin>>a[i];\n    for(int i=1;i<=n;i++)sum[i]=a[i]+sum[i-1];\n    for(int i=n-1;i>=0;i--)s[i]=a[i+1]+s[i+1];\n    for(int i=0;i<=n;i++){\n\tlong long maxi=-1e18,mini=1e18,mp=0,mr=0;\n\tfor(int j=0;j<=i;j++){\n\t    if(sum[j]>maxi){\n\t\tmaxi=sum[j];\n\t\tmp=j;\n\t    }\n\t}\n\tfor(int j=n;j>=i;j--){\n\t    if(s[j]<mini){\n\t\tmini=s[j];\n\t\tmr=j;\n\t    }\n\t}\n\tif(2*sum[mp]-sum[i]+s[i]-2*s[mr]>ans){\n\t    ans=2*sum[mp]-sum[i]+s[i]-2*s[mr];\n            p=mp,q=i,r=mr;\n\t}\n    }\n    cout<<p<<\" \"<<q<<\" \"<<r<<endl;\n    return 0;\n}\n```\n\n\n## \u601d\u8def2\n\n\u52a8\u6001\u89c4\u5212\u3002\n\n\u52a8\u6001\u89c4\u5212\u53ef\u4ee5\u89e3\u51b3\u4e0d\u8bba\u5206\u6210\u51e0\u6bb5\u7684\u9898\uff0c\u601d\u8def\u662f\u8fd9\u6837\u7684\uff1a\n\n$dp(i,j)$ \u8868\u793a\u524d\u7f00 $a_0,a_1,\u2026,a_i$\u3002$a_i$ \u5c5e\u4e8e\u7b2c $j$ \u6bb5\u65f6\u7684\u6700\u4f18\u503c\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e $a_{i+1}$ \u4e00\u5171\u53ef\u4ee5\u5206\u4ee5\u4e0b\u4e09\u79cd\u60c5\u51b5\uff1a\n\n\u7b2c\u4e00\u79cd\uff0c\u5c06 $a_{i+1}$ \u5f52\u4e3a\u7b2c $j$ \u6bb5\uff0c\u90a3\u4e48\u53ef\u4ee5\u5f97\u5230 $dp(i+1,j)=max(dp(i,j)+(-1)^j a_{i+1})$\u3002\n\n\u7b2c\u4e8c\u79cd\uff0c\u5c06 $a_{i+1}$ \u5f52\u4e3a\u7b2c $j+1$ \u6bb5\uff0c\u90a3\u4e48\u53ef\u4ee5\u5f97\u5230 $dp(i+1,j+1)=max(dp(i,j)+(-1)^{j+1} a_{i+1})$\u3002\n\n\u7b2c\u4e09\u79cd\uff0c$j+1$ \u6bb5\u4e3a\u7a7a\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f97\u5230 $dp(i,j+1)=max(dp(i,j))$\u3002\n\n\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u601d\u8003\u4ee5\u4e0b\u5982\u679c\u8981\u8f93\u51fa\u65b9\u6848\u6570\u600e\u4e48\u529e\uff1f\uff08\u63d0\u793a\uff1a\u5b9a\u4e49 $from(i,j)$ \u8868\u793a\u4ece\u90a3\u4e2a\u72b6\u6001\u8f6c\u79fb\u8fc7\u6765\u3002\uff09\n\n## \u4ee3\u78012\n\n\u6b64\u5904\u6211\u672c\u4e0d\u60f3\u653e\u4ee3\u7801\uff0c\u56e0\u4e3a\u90a3\u4f4d\u5927\u795e\u5199\u7684\u4e0d\u662f C++\uff0c\u6b64\u5904\u653e\u4e0a Java \u4ee3\u7801\uff0c\u5404\u4f4d\u53ef\u4ee5\u6b23\u8d4f\u4e00\u4e0b\u3002\n\n```java\n//package educational.round28;\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.PrintWriter;\nimport java.util.Arrays;\nimport java.util.InputMismatchException;\n\npublic class C {\n\tInputStream is;\n\tPrintWriter out;\n\tString INPUT = \"\";\n\t\n\tvoid solve()\n\t{\n\t\tint n = ni();\n\t\tint[] a = na(n);\n\t\tlong[] cum = new long[n+1];\n\t\tfor(int i = 0;i < n;i++)cum[i+1] = cum[i] + a[i];\n\t\tlong[][] dp = new long[4][n+1];\n\t\tfor(int i = 0;i < 4;i++){\n\t\t\tArrays.fill(dp[i], Long.MIN_VALUE / 10);\n\t\t}\n\t\tdp[0][0] = 0;\n\t\tdp[1][0] = 0;\n\t\tdp[2][0] = 0;\n\t\tdp[3][0] = 0;\n\t\tfor(int i = 0;i < n;i++){\n\t\t\tdp[0][i+1] = dp[0][i] + a[i];\n\t\t\tdp[1][i+1] = Math.max(dp[0][i+1], dp[1][i] - a[i]);\n\t\t\tdp[2][i+1] = Math.max(dp[1][i+1], dp[2][i] + a[i]);\n\t\t\tdp[3][i+1] = Math.max(dp[2][i+1], dp[3][i] - a[i]);\n\t\t}\n\t\tint K = 3, cur = n;\n\t\tint[] sep = new int[4];\n\t\twhile(cur > 0){\n\t\t\twhile(K > 0 && dp[K-1][cur] == dp[K][cur]){\n\t\t\t\tsep[K] = cur;\n\t\t\t\tK--;\n\t\t\t}\n\t\t\tcur--;\n\t\t}\n\t\tout.println(sep[1]+ \" \" + sep[2] +\" \" + sep[3]);\n\t}\n\t\n\tvoid run() throws Exception\n\t{\n\t\tis = oj ? System.in : new ByteArrayInputStream(INPUT.getBytes());\n\t\tout = new PrintWriter(System.out);\n\t\t\n\t\tlong s = System.currentTimeMillis();\n\t\tsolve();\n\t\tout.flush();\n\t\ttr(System.currentTimeMillis()-s+\"ms\");\n\t}\n\t\n\tpublic static void main(String[] args) throws Exception { new C().run(); }\n\t\n\tprivate byte[] inbuf = new byte[1024];\n\tpublic int lenbuf = 0, ptrbuf = 0;\n\t\n\tprivate int readByte()\n\t{\n\t\tif(lenbuf == -1)throw new InputMismatchException();\n\t\tif(ptrbuf >= lenbuf){\n\t\t\tptrbuf = 0;\n\t\t\ttry { lenbuf = is.read(inbuf); } catch (IOException e) { throw new InputMismatchException(); }\n\t\t\tif(lenbuf <= 0)return -1;\n\t\t}\n\t\treturn inbuf[ptrbuf++];\n\t}\n\t\n\tprivate boolean isSpaceChar(int c) { return !(c >= 33 && c <= 126); }\n\tprivate int skip() { int b; while((b = readByte()) != -1 && isSpaceChar(b)); return b; }\n\t\n\tprivate double nd() { return Double.parseDouble(ns()); }\n\tprivate char nc() { return (char)skip(); }\n\t\n\tprivate String ns()\n\t{\n\t\tint b = skip();\n\t\tStringBuilder sb = new StringBuilder();\n\t\twhile(!(isSpaceChar(b))){ // when nextLine, (isSpaceChar(b) && b != ' ')\n\t\t\tsb.appendCodePoint(b);\n\t\t\tb = readByte();\n\t\t}\n\t\treturn sb.toString();\n\t}\n\t\n\tprivate char[] ns(int n)\n\t{\n\t\tchar[] buf = new char[n];\n\t\tint b = skip(), p = 0;\n\t\twhile(p < n && !(isSpaceChar(b))){\n\t\t\tbuf[p++] = (char)b;\n\t\t\tb = readByte();\n\t\t}\n\t\treturn n == p ? buf : Arrays.copyOf(buf, p);\n\t}\n\t\n\tprivate char[][] nm(int n, int m)\n\t{\n\t\tchar[][] map = new char[n][];\n\t\tfor(int i = 0;i < n;i++)map[i] = ns(m);\n\t\treturn map;\n\t}\n\t\n\tprivate int[] na(int n)\n\t{\n\t\tint[] a = new int[n];\n\t\tfor(int i = 0;i < n;i++)a[i] = ni();\n\t\treturn a;\n\t}\n\t\n\tprivate int ni()\n\t{\n\t\tint num = 0, b;\n\t\tboolean minus = false;\n\t\twhile((b = readByte()) != -1 && !((b >= '0' && b <= '9') || b == '-'));\n\t\tif(b == '-'){\n\t\t\tminus = true;\n\t\t\tb = readByte();\n\t\t}\n\t\t\n\t\twhile(true){\n\t\t\tif(b >= '0' && b <= '9'){\n\t\t\t\tnum = num * 10 + (b - '0');\n\t\t\t}else{\n\t\t\t\treturn minus ? -num : num;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\t\n\tprivate long nl()\n\t{\n\t\tlong num = 0;\n\t\tint b;\n\t\tboolean minus = false;\n\t\twhile((b = readByte()) != -1 && !((b >= '0' && b <= '9') || b == '-'));\n\t\tif(b == '-'){\n\t\t\tminus = true;\n\t\t\tb = readByte();\n\t\t}\n\t\t\n\t\twhile(true){\n\t\t\tif(b >= '0' && b <= '9'){\n\t\t\t\tnum = num * 10 + (b - '0');\n\t\t\t}else{\n\t\t\t\treturn minus ? -num : num;\n\t\t\t}\n\t\t\tb = readByte();\n\t\t}\n\t}\n\t\n\tprivate boolean oj = System.getProperty(\"ONLINE_JUDGE\") != null;\n\tprivate void tr(Object... o) { if(!oj)System.out.println(Arrays.deepToString(o)); }\n}\n```\n",
        "postTime": 1650155394,
        "uid": 305424,
        "name": "yuheng_wang080904",
        "ccfLevel": 0,
        "title": "CF846C"
    }
]
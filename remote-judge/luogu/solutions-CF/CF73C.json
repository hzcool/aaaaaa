[
    {
        "content": "\u7b80\u5355dp\u9898\uff0c\u4f46\u662f\u6211\u592a\u5f31\u4e86\uff0c\u53ea\u597d\u6765\u5199\u4e00\u5199\n\n------------\n\n\u8bbe $f[i][j][y]$ \u8868\u793a\u524d $i$ \u4e2a\u5b57\u7b26\uff0c \u4fee\u6539 $j$ \u6b21\uff0c \u8fd9\u4e00\u4f4d\u5b57\u7b26\u662f $y$ \u7684\u6700\u5927\u9ed8\u5951\u5ea6\n\n\u8fdb\u800c\u53ef\u4ee5\u9000\u51fa\u65b9\u7a0b\n\n$$f[i][j][y]=\\max\\{f[i][j][y],f[i-1][j-1][x]+C(x,y)\\}(y !=S_i)$$\n\n$$=\\max\\{f[i][j][y],f[i-1][j][x]+C(x,y)\\}(y==S_i)$$\n\n\uff08\u62ec\u53f7\u91cc\u662f\u6761\u4ef6\uff09\n\n\u679a\u4e3e $x$ \uff0c $C(x,y)$ \u5c31\u662f\u9898\u76ee\u4e2d\u7ed9\u51fa $x,y$ \u76f8\u90bb\u7684\u4ef7\u503c\n\n------------\n\n\u521d\u59cb\u5316\uff1a\n\n```cpp\nmemset(f, 0xaf, sizeof(a));\nfor(int i=0;i<26;++i)\n\tif(i+'a' == s[0]) f[1][0][i] = 0;\n   else f[1][1][i] = 0;\n```\n\n\uff08\u5e26\u7740\u5927\u5bb6\u590d\u4e60\u4e00\u4e0b ``memset(f, 0xaf, sizeof(f))`` \u662f\u8d4b\u6781\u5c0f\u503c\uff09\n\n\u628a\u6709\u7528\u7684\u72b6\u6001\uff0c\u6216\u8005\u8bf4\u5b58\u5728\u7684\u72b6\u6001\u7406\u51fa\u6765\uff0c\u5176\u4ed6\u7684\u72b6\u6001\u8d4b\u6781\u5c0f\u503c\uff0c\u4e0d\u80fd\u4ece\u90a3\u4e9b\u72b6\u6001\u8f6c\u79fb\u8fc7\u6765\u3002\u53ea\u6709\u5728dp\u7684\u8fc7\u7a0b\u4e2d\uff0c\u54ea\u4e9b\u72b6\u6001\u624d\u53ef\u4ee5\u4e0d\u65ad\u6709\u503c\u3002\n\n------------\n\n\u7edf\u8ba1\u7b54\u6848\uff1a\n\n$$ans=\\max\\{f[len][i][j]\\}(0<=i<=k)(0<=j<26)$$\n\n------------\n\nCode\n\n```cpp\n#include<algorithm>\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<cmath>\n#include<map>\n#define INF 0x3f3f3f3f\nusing namespace std;\ninline int read() {\n\tint x=0,f=1; char ch=getchar();\n\twhile(ch<'0' || ch>'9') { if(ch=='-') f=-1; ch=getchar(); }\n\twhile(ch>='0'&&ch<='9') { x=(x<<3)+(x<<1)+(ch^48); ch=getchar(); }\n\treturn x * f;\n}\nconst int N = 107;\nint k,n;\nstring s;\nmap<string,int> C;\nint f[N][N][30];\nint main()\n{\n\tcin>>s; k = read(), n = read();\n\tfor(int i=1;i<=n;++i) {\n\t\tstring a,b,c; cin>>a>>b;\n\t\tc = a+b; C[c] = read();\n\t}\n\tmemset(f, 0xaf, sizeof(f));\t//\u6240\u6709\u72b6\u6001\u90fd\u6ca1\u6709\n\tfor(int i=0;i<26;++i)\n\t\tif(i+'a' == s[0]) f[1][0][i] = 0;\n\t\telse f[1][1][i] = 0; \n\tfor(int i=2;i<=s.length();++i)\n\t\tfor(int j=0;j<=min(i,k);++j)\n\t\t\tfor(int x=0;x<26;++x)\n\t\t\t\tfor(int y=0;y<26;++y) {\n\t\t\t\t\tstring chx,chy,ch;\n\t\t\t\t\tchx = x+'a', chy = y+'a';\n\t\t\t\t\tch = chx + chy;\n\t\t\t\t\tif(y+'a' == s[i-1]) {\t//\u5b57\u7b26\u4e32\u7684s_i \u5c0f\u4e00\u4f4d \n\t\t\t\t\t\tf[i][j][y] = max(f[i][j][y],f[i-1][j][x]+C[ch]);\n\t\t\t\t\t} else if(j>0) {\n\t\t\t\t\t\tf[i][j][y] = max(f[i][j][y],f[i-1][j-1][x]+C[ch]);\n\t\t\t\t\t}\n\t\t\t\t}\n\tint ans = -INF;\n\tfor(int i=0;i<=k;++i)\n\t\tfor(int j=0;j<26;++j)\n\t\t\tans = max(ans,f[s.length()][i][j]);\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n/*\nakcbd 2\n3\na d 55\nb z 100\nb c 50\n\n155\n*/\n```\n\n------------\n\n\u4e0d\u59a8\u70b9\u4e2a\u8d5e\u5427\uff08~~\u867d\u7136\u5728\u6d1b\u8c37\u505a\u8fd9\u79cdCF\u9898\u7684\u4eba\u5c11~~\uff09",
        "postTime": 1572276060,
        "uid": 147511,
        "name": "\u57fa\u5730A_I",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF73C \u3010LionAge II\u3011"
    },
    {
        "content": "DP\u3002\n\n\u8bbe$dp[i][j][k]$\u4ee3\u8868**\u5904\u7406\u5230\u7b2c$i$\u4f4d\uff0c\u5df2\u7ecf\u66f4\u6362\u4e86$j$\u6b21\uff0c\u73b0\u5728\u4f4d\u7f6e\u662f$k$** \u7684\u6700\u4f18\u89e3\u3002\n\n\u5916\u5c42\u679a\u4e3e$i,j$\uff0c\u7136\u540e\u679a\u4e3e\u539f\u5148\u7684$p$\u548c\u73b0\u5728\u7684$q$\u3002\u8f6c\u79fb\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7$j \\to j + (s[i+1] \\neq q)$\u6765\u5224\u65ad\u662f\u4e0d\u662f\u505a\u51fa\u4e86\u66f4\u6539\u64cd\u4f5c\u3002\u72b6\u6001\u8f6c\u79fb\u662f\n$$dp[i][j+\\left(s[i+1]\\neq q\\right)][q]=\n\\max(dp[i][j+\\left(s[i+1]\\neq q\\right)][q], dp[i][j][p] + dist[p][q])$$\n\n\u5176\u4e2d$dist[p][q]$\u4ee3\u8868$p$\u548c$q$\u4e4b\u95f4\u4ea7\u751f\u7684\u6743\u503c\uff0c\u521d\u59cb\u5bf9\u4e8e\u6240\u6709$1 \\leq i \\leq n, dp[0][s[0] \\neq i][i]=0$\uff0c\u628a\u5176\u4ed6\u7684$dp$\u503c\u8bbe\u4e3a$-\\text{INF}$\u5373\u53ef\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\n#define pb push_back\n#define mp make_pair\n#define lsh(i) (1 << (i))\n#define lshll(i) (1LL << (i))\n#define repn(i, n) for (int (i) = 1; (i) <= n; (i)++)\n#define rep(i, n) for (int (i) = 0; (i) < n; (i)++)\nconst int INF = 0x3f3f3f3f;\nconst long double EPS = 1e-6;\nconst int N = 130, K = 30;\nstring s;\nint k, n, m;\nint d[K][K], dp[N][N][K];\nint main() {\n\tcin >> s;\n\tn = s.length();\n\trep(i, n) s[i] -= 'a';\n\tcin >> k >> m;\n\trepn(i, m) {\n\t\tchar f, t;\n\t\tint b;\n\t\tcin >> f >> t >> b;\n\t\td[f - 'a'][t - 'a'] = b;\n\t}\n\tmemset(dp, -INF, sizeof(dp));\n\trep(i, 26) dp[0][s[0] != i][i] = 0; \n\trep(i, n - 1) {\n\t\trep(j, k + 1) {\n\t\t\trep(p, 26) {\n\t\t\t\tif (dp[i][j][p] != -INF) {\n\t\t\t\t\trep(q, 26) {\n\t\t\t\t\t\tdp[i + 1][j + (s[i + 1] != q)][q] = max(dp[i + 1][j + (s[i + 1] != q)][q], dp[i][j][p] + d[p][q]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tint ans = -INF;\n\trep(i, k + 1)\n\t\trep(c, 26)\n\t\t\tans = max(ans, dp[n - 1][i][c]);\n\tcout << ans << endl;\n\treturn 0;\n}\n```",
        "postTime": 1572666896,
        "uid": 87696,
        "name": "Lily_White",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF73C \u3010LionAge II\u3011"
    },
    {
        "content": "\u975e\u5e38\u6c99\u96d5\u7684 $dp$\n\n$dp[i][j][k]$ \u8868\u793a\u5904\u7406\u5230\u4f4d\u7f6e $i$, \u8fd8\u5269\u4e0b $j$ \u6b21\u673a\u4f1a, \u4e0a\u4e00\u4f4d\u586b\u5199\u7684\u662f $k$\n\n\u5982\u679c\u4e0d\u6539\uff1a $dp[i][j][k]+val(k,s[i+1])\\rightarrow dp[i+1][j][s[i+1]]$\n\n\u5982\u679c\u6539\uff0c\u679a\u4e3e\u5f53\u524d\u4f4d\u7f6e\u586b\u7684\u5b57\u7b26 $c$\n\n$dp[i][j][k]+val(k,c)\\rightarrow dp[i+1][j-1][c]$\n\n$dp[0][k][26]=0$\n\n\u6211\u5199\u4e86\u8bb0\u5fc6\u5316\u641c\u7d22\n\n```cpp\nstring s ;\nint dp[7 * N][N][30] ;\nint val[30][30] ;\nint n, k ;\n\nint solve(int i, int rem, int pre) {\n\tif (rem < 0) return -iinf ;\n\tif (!s[i]) return 0 ;\n\tint& ans = dp[i][rem][pre] ;\n\tif (~ans) return ans ;\n\tans = solve(i + 1, rem, s[i] - 'a') + val[pre][s[i] - 'a'] ;\n\trep(j, 0, 25) chmax(ans, solve(i + 1, rem - 1, j) + val[pre][j]) ;\n\treturn ans ;\n}\n\nsigned main() {\n\tcin >> s >> k >> n ;\n\twhile (n--) {\n\t\tchar a, b ; int c ;\n\t\tcin >> a >> b >> c ;\n\t\tval[a - 'a'][b - 'a'] = c ;\n\t}\n\tass(dp, -1) ;\n\tprintf(\"%d\\n\", solve(0, k, 26)) ;\n\treturn 0 ;\n}\n\n```",
        "postTime": 1562893632,
        "uid": 54900,
        "name": "__Hacheylight__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF73C \u3010LionAge II\u3011"
    }
]
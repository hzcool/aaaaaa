[
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\n\u7ed9\u5b9a\u5e73\u9762\u4e0a $n$ \u4e2a\u70b9\uff0c\u4f60\u9009\u4e00\u4e2a\u70b9\u6570\u4e3a $k$ \u7684\u51f8\u5305\uff0c\u4f7f\u5f97\u51f8\u5305\u5185\u6ca1\u6709\u5176\u4ed6\u70b9\u3002\u6c42\u8fd9\u6837\u7684\u51f8\u5305\u7684\u9762\u79ef\u6700\u5927\u503c\u3002\n\n$3 \\leq n \\leq 200,3 \\leq k \\leq \\min(n,50)$\n\n### \u9898\u76ee\u5206\u6790\n\n\u5355\u72ec\u6c42\u4e00\u4e2a\u51f8\u5305\u6bd4\u8f83\u56f0\u96be\uff0c\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u51f8\u5305\u6700\u5de6\u8fb9\u7684\u70b9\uff0c\u5c06\u5176\u62c6\u5206\u6210\u4e00\u4e2a\u4e0a\u51f8\u58f3\u548c\u4e0b\u51f8\u58f3\uff0c\u7136\u540e\u5206\u522b\u6c42\u7b54\u6848\u3002\u4ee5\u4e0b\u4ee5\u4e0a\u51f8\u58f3\u4e3a\u4f8b\u3002\n\n\u8003\u8651 dp\uff0c\u8bbe $f_{i,j}$ \u8868\u793a\u4ece\u8d77\u70b9\u51fa\u53d1\uff0c\u7ecf\u8fc7 $j$ \u4e2a\u70b9\u5230\u4e86\u70b9 $i$ \u7684\u9762\u79ef\u6700\u5927\u503c\u3002\u8f6c\u79fb\u7684\u8bdd\u627e\u5230\u4e00\u4e2a\u5408\u6cd5\u7684 $k$\uff0c\u7136\u540e\u4ece $f_{k,j-1}$ \u8f6c\u79fb\u5230 $f_{i,j}$\u3002\n\n\u600e\u4e48\u627e\u5408\u6cd5\u7684 $k$ \u5462\uff1f\u56e0\u4e3a\u6211\u4eec\u8981\u6c42\u7684\u662f\u4e0a\u51f8\u58f3\uff0c\u4e5f\u5c31\u662f\u659c\u7387\u8981\u9012\u51cf\uff0c\u6240\u4ee5\u6211\u4eec\u6309\u7167\u4e24\u70b9\u95f4\u7684\u659c\u7387\u4ece\u5927\u5230\u5c0f\u8f6c\u79fb\uff0c\u6765\u4fdd\u8bc1\u659c\u7387\u7684\u9650\u5236\u3002\n\n\u5177\u4f53\u6765\u8bf4\uff0c\u679a\u4e3e\u6bcf\u4e24\u4e2a\u70b9\uff0c\u7b97\u51fa\u4ed6\u4eec\u7684\u659c\u7387\uff0c\u7136\u540e\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\u3002\n\n\u63a5\u7740\uff0c\u6211\u4eec\u8981\u4fdd\u8bc1\u51f8\u5305\u5185\u6ca1\u6709\u5176\u4ed6\u70b9\u3002\u5bf9\u4e8e\u4e00\u4e2a\u4e0a\u51f8\u5305\uff0c\u6211\u4eec\u5c06\u5176\u6309\u4e0b\u56fe\u8fdb\u884c\u5206\u5272\uff1a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/0kdohvqx.png)\n\n\u6211\u4eec\u53ea\u7528\u4fdd\u8bc1\u6bcf\u4e2a\u4e09\u89d2\u5f62\u4e2d\u95f4\u6ca1\u6709\u70b9\u3002\u5982\u679c\u6211\u4eec\u66b4\u529b\u679a\u4e3e\u70b9\u6765\u8ba1\u7b97\u662f\u5426\u5728\u4e2d\u95f4\uff0c\u90a3\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^4)$\uff0c\u5f88\u60ac\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u8f83\u4e3a\u4f18\u79c0\u7684\u7b97\u6cd5\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u4e09\u89d2\u5f62 $\\Delta ABC$\uff0c\u5982\u679c\u4e2d\u95f4\u5b58\u5728\u4e00\u4e2a\u70b9 $P$\uff0c\u90a3\u4e48\u5fc5\u987b\u6ee1\u8db3\uff1a\n\n$$(A-P)\\times(B-P)>0,(B-P)\\times(C-P)>0,(C-P)\\times(A-P)>0$$\n\n\u5176\u4e2d $\\times$ \u4e3a\u53c9\u79ef\u7b26\u53f7\uff0c\u9ed8\u8ba4 $A,B,C$ \u6309\u9006\u65f6\u9488\u6392\u5e8f\u3002\n\n\u6240\u4ee5\u5148\u5bf9\u6bcf\u4e24\u4e2a\u70b9 $X,Y$ \u5904\u7406\u51fa\u6ee1\u8db3 $(X-P)\\times(Y-P)>0$ \u7684\u70b9 $P$ \u96c6\u5408 $S_{X,Y}$\uff0c\u7136\u540e\u5c06 $S_{A,B},S_{B,C},S_{C,A}$ \u53d6\u4ea4\u5373\u53ef\u3002\u8fd9\u4e2a\u4e1c\u897f\u53ef\u4ee5\u7528 $\\operatorname{bitset}$ \u7ef4\u62a4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $O(\\frac{n^4}{\\omega})$\u3002\n\n\u6700\u540e\u5904\u7406\u51fa\u4e0a\u51f8\u58f3\u4e0e\u4e0b\u51f8\u58f3\u7684\u7b54\u6848\uff0c\u7136\u540e\u679a\u4e3e\u7ec8\u70b9\uff0c\u628a\u9762\u79ef\u52a0\u8d77\u6765\u4e0e\u7b54\u6848\u53d6\u6700\u5927\u503c\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nbitset<220> B[220][220],tmp; \nll n,k,cnt=0;\ndouble f[220][55],g[220][55],ans=0;\nbool ck[220][220][220];\nstruct point{\n\tdouble x,y;\n}a[220];\nstruct node{\n\tll x,y;\n\tdouble slp;\n}b[40040];\npoint operator-(const point &x,const point &y){\n\treturn (point){x.x-y.x,x.y-y.y};\n}\ndouble slope(point x,point y){\n\tif(x.x==y.x) return 1e18;\n\treturn (x.y-y.y)/(x.x-y.x);\n}\ndouble cross(point x,point y){\n\treturn x.x*y.y-x.y*y.x;\n}\nbool cmp(node x,node y){\n\treturn x.slp>y.slp;\n}\nvoid solve(ll s){\n\tfor(ll i=1;i<=n;i++) for(ll j=0;j<=k;j++) f[i][j]=g[i][j]=-1e18;\n\tf[s][1]=g[s][1]=0;\n\tfor(ll i=1;i<=cnt;i++){\n\t\tll x=b[i].x,y=b[i].y;\n\t\tif(x!=s&&y!=s&&!ck[s][x][y]) continue;\n\t\tfor(ll j=2;j<=k;j++){\n\t\t\tif(f[x][j-1]==-1e18) continue;\n\t\t\tf[y][j]=max(f[y][j],f[x][j-1]+cross(a[y]-a[s],a[x]-a[s]));\n\t\t}\n\t}\n\tfor(ll i=cnt;i>=1;i--){\n\t\tll x=b[i].x,y=b[i].y;\n\t\tif(x!=s&&y!=s&&!ck[s][x][y]) continue;\n\t\tfor(ll j=2;j<=k;j++){\n\t\t\tif(g[x][j-1]==-1e18) continue;\n\t\t\tg[y][j]=max(g[y][j],g[x][j-1]+cross(a[x]-a[s],a[y]-a[s]));\n\t\t}\n\t}\n\tfor(ll i=1;i<=n;i++) for(ll j=2;j<=k;j++) ans=max(ans,f[i][j]+g[i][k+2-j]);\n}\nint main(){\n\tscanf(\"%lld %lld\",&n,&k);\n\tfor(ll i=1;i<=n;i++) cin>>a[i].x>>a[i].y;\n\tfor(ll i=1;i<=n;i++){\n\t\tfor(ll j=i+1;j<=n;j++){\n\t\t\tif(a[i].x<a[j].x||(a[i].x==a[j].x&&a[i].y<a[j].y)) b[++cnt]=(node){i,j};\n\t\t\telse b[++cnt]=(node){j,i};\n\t\t\tb[cnt].slp=slope(a[i],a[j]);\n\t\t}\n\t}\n\tsort(b+1,b+cnt+1,cmp);\n\tfor(ll i=1;i<=n;i++){\n\t\tfor(ll j=1;j<=n;j++){\n\t\t\tif(i==j) continue;\n\t\t\tfor(ll p=1;p<=n;p++){\n\t\t\t\tif(i==p||j==p) continue;\n\t\t\t\tif(cross(a[j]-a[i],a[p]-a[i])>0) B[i][j][p]=1;\n\t\t\t}\n\t\t}\n\t}\n\tfor(ll i=1;i<=n;i++){\n\t\tfor(ll j=1;j<=n;j++){\n\t\t\tif(i==j) continue;\n\t\t\tfor(ll p=1;p<=n;p++){\n\t\t\t\tif(i==p||j==p) continue;\n\t\t\t\ttmp.set();\n\t\t\t\tif(B[i][j][p]) tmp&=B[i][j];\n\t\t\t\telse tmp&=B[j][i];\n\t\t\t\tif(B[j][p][i]) tmp&=B[j][p];\n\t\t\t\telse tmp&=B[p][j];\n\t\t\t\tif(B[p][i][j]) tmp&=B[p][i];\n\t\t\t\telse tmp&=B[i][p];\n\t\t\t\tif(tmp.none()) ck[i][j][p]=ck[i][p][j]=ck[j][i][p]=ck[j][p][i]=ck[p][i][j]=ck[p][j][i]=1;\n\t\t\t}\n\t\t}\n\t}\n\tfor(ll i=1;i<=n;i++) solve(i);\n\tprintf(\"%.2lf\",ans/2);\n}\n```",
        "postTime": 1648796900,
        "uid": 224336,
        "name": "AFewSuns",
        "ccfLevel": 8,
        "title": "\u3010\u9898\u89e3\u3011CF852H Bob and stages"
    }
]
[
    {
        "content": "\u4e00\u5f00\u59cb\u5148\u7528\u5e76\u67e5\u96c6\u5904\u7406\u51fa\u6bcf\u4e2a\u8054\u901a\u5757\u7684\u5927\u5c0f\uff0c\u53d1\u73b0\u6bcf\u8fde\u4e00\u6761\u8fb9\u5c31\u662f\u5c06\u4e24\u4e2a\u8054\u901a\u5408\u5e76\u5728\u4e00\u8d77\u3002\n\n\u4ee4 $f(i)$ \u8868\u793a\u5927\u5c0f\u4e3a $i$ \u7684\u8054\u901a\u5757\u6700\u5c11\u9700\u8981 $f(i)$ \u4e2a\u521d\u59cb\u8054\u901a\u5757\u5408\u5e76\u5f97\u5230\uff0c\u5219\u7b54\u6848\u53ef\u4ee5\u8868\u793a\u4e3a $\\min \\{f(x)\\}$ \uff0c\u5176\u4e2d $x$ \u662f $[1,n]$ \u7684 lucky number\u3002\n\n\u7528\u591a\u91cd\u80cc\u5305\u8ba1\u7b97\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\Theta(n\\times \\sqrt{n}\\times \\log_2 {n})$\n\n\u53c2\u8003\u4ee3\u7801\n```cpp\n#pragma GCC optimize(\"Ofast\") \n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\ninline int read()\n{\n\tint x=0;\n\tbool flag=1;\n\tchar c=getchar();\n\twhile(c<'0'||c>'9')\n\t{\n\t\tif(c=='-')\n\t\t\tflag=0;\n\t\tc=getchar();\n\t}\n\twhile(c>='0'&&c<='9')\n\t{\n\t\tx=(x<<1)+(x<<3)+c-'0';\n\t\tc=getchar();\n\t}\n\treturn (flag?x:~(x-1));\n}\nint n,m,fa[100001],size[100001],cnt[100001],dp[100001];\nint find(int x)\n{\n\treturn x==fa[x]?x:fa[x]=find(fa[x]);\n}\nbool isl(int x)\n{\n\tfor(;x;x/=10)\n\t\tif(x%10!=4&&x%10!=7)\n\t\t\treturn 0;\n\treturn 1;\n}\nsigned main()\n{\n\tn=read();\n\tm=read();\n\tfor(int i=1;i<=n;i++)\n\t\tfa[i]=i;\n\twhile(m--)\n\t{\n\t\tint x=read(),y=read();\n\t\tfa[find(x)]=find(y);\t\n\t}\t\n\tfor(int i=1;i<=n;i++)\n\t\tsize[find(i)]++;\n\tfor(int i=1;i<=n;i++)\n\t\tcnt[size[i]]++;\n\tfor(int i=1;i<=n;i++)\n\t\tdp[i]=114514114514114514;\n\tfor(int i=1;i<=n;i++)\n\t\tif(cnt[i])\n\t\t{\n\t\t\tint num=cnt[i];\n\t\t\tfor(int p=1;num;p<<=1)\n\t\t\t{\n\t\t\t\tp=min(p,num);\n\t\t\t\tnum-=p;\n\t\t\t\tint w=p*i;\n\t\t\t\tfor(int l=n-w;l>=0;l--)\n\t\t\t\t\tdp[l+w]=min(dp[l+w],dp[l]+p);\n\t\t\t}\n\t\t}\n\tint ans=114514114514114514;\n\tfor(int i=1;i<=n;i++)\n\t\tif(isl(i))\n\t\t\tans=min(ans,dp[i]);\n\tif(ans==114514114514114514)\n\t\tans=-1;\n\telse\n\t\tans--;\n\tcout<<ans;\n\treturn 0;\n}\n```\n\n\n~~\u641e\u4e0d\u61c2\u4e3a\u5565\u662f\u7d2b\u9898\\yun~~",
        "postTime": 1622298611,
        "uid": 240812,
        "name": "45dino",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF95E \u3010Lucky Country\u3011"
    },
    {
        "content": "\u9996\u5148\u6211\u4eec\u5e76\u67e5\u96c6\u8dd1\u51fa\u6bcf\u4e2a\u5757\u7684\u5927\u5c0fsize\n\n\u9898\u76ee\u5c31\u8f6c\u5316\u6210\u7ed9\u4f60\u4e00\u5806\u6570\uff0c\u6700\u5c11\u5408\u5e76\u51e0\u6b21\u4f7f\u8fd9\u4e9b\u6570\u5b57\u53ea\u67094\u548c7\n\n\u5c31\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u80cc\u5305\u95ee\u9898\n\n\u6ce8\u610f\u8981\u7528\u4e8c\u8fdb\u5236\u4f18\u5316\u5373\u53ef\n\n```cpp\n#define R register\n\n#define size dede//CF size \u662f\u5173\u952e\u5b57\n\nconst int N = 1e5 + 10;\n\nint n, m, ans = 1234567890;\nint f[N], size[N], a[N];\nint w[N], v[N], tot;\n\ninline int getf(int x)\n{\n\treturn f[x] == x ? x : f[x] = getf(f[x]);\n}\n\ninline bool check(int x)\n{\n\twhile(x)\n\t{\n\t\tif(x % 10 != 4 && x % 10 != 7) return false;\n\t\tx /= 10;\n\t}\n\treturn true;\n}\n\nsigned main()\n{\n\tinto();\n\tread(n); read(m);\n    //\u521d\u59cb\u5316\u5e76\u67e5\u96c6\n\tfor(R int i = 1; i <= n; i++) f[i] = i, size[i] = 1;\n\tfor(R int i = 1, x, y; i <= m; i++)\n\t{\n\t\tread(x); read(y);\n\t\tint t1 = getf(x), t2 = getf(y);\n\t\tif(t1 != t2)\n\t\t{\n\t\t\tif(size[t1] < size[t2]) swap(t1, t2);//\u611f\u89c9\u662f\u591a\u4f59\u7684\uff0c\u53ea\u662f\u5408\u5e76\u60ef\u4e86\u5c0f\u5e76\u5230\u5927\n\t\t\tf[t2] = t1;\n\t\t\tsize[t1] += size[t2];\n\t\t}\n\t}\n\tfor(R int i = 1; i <= n; i++)\n\t\tif(getf(i) == i)\n\t\t\ta[size[i]]++;\n\tmemset(f, 0x3f, sizeof f);\n\tf[0] = 0;\n    //\u4e8c\u8fdb\u5236\u4f18\u5316\n\tfor(R int i = 1; i <= n; i++)\n\t{\n\t\tint sum = 1, now = 1;\n\t\tif(!a[i]) continue;\n\t\tw[++tot] = i; v[tot] = 1;\n\t\twhile(sum < a[i])\n\t\t{\n\t\t\tnow <<= 1;\n\t\t\tsum += now;\n\t\t\tif(sum > a[i])\n\t\t\t{\n\t\t\t\tsum -= now;\n\t\t\t\tw[++tot] = i * (a[i] - sum);\n\t\t\t\tv[tot] = a[i] - sum;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tw[++tot] = i * now;\n\t\t\tv[tot] = now;\n\t\t}\n\t}\n\tfor(R int i = 1; i <= tot; i++)\n\t\tfor(R int j = n; j >= 0; j--)\n\t\t\tif(j - w[i] >= 0)\n\t\t\t\tf[j] = min(f[j], f[j - w[i]] + v[i]);\n\tfor(R int i = 1; i <= n; i++) if(check(i)) ans = min(ans, f[i]);\n\tif(ans > n) puts(\"-1\");\n\telse writeln(ans - 1);//\u6ce8\u610f\u8981-1\uff0c\u56e0\u4e3a\u4e00\u5f00\u59cb\u81ea\u5df1\u662f\u4e00\u5757\u4e0d\u9700\u8981\n\treturn 0;\n}\n```",
        "postTime": 1605264125,
        "uid": 103023,
        "name": "AvA_sleeper",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF95E \u3010Lucky Country\u3011"
    },
    {
        "content": "\u9996\u5148\u8dd1\u51fa\u6bcf\u4e2a\u5730\u533a\u7684\u5927\u5c0f\uff0c\u56e0\u4e3a\u8fb9\u662f\u53cc\u5411\u7684\uff0c\u6240\u4ee5\u4e0d\u7528\u8fde\u901a\u5206\u91cf\uff0c\u76f4\u63a5\u4e0a\u5e76\u67e5\u96c6\u53bb\u7ef4\u62a4\u5373\u53ef\u3002\u5047\u8bbe\u6bcf\u4e2a\u8fde\u901a\u5757\u7684\u5927\u5c0f\u4e3a$x_i$\uff0c \u73b0\u5728\u95ee\u9898\u5c31\u53d8\u6210\u95ee\u6700\u5c11\u8981\u7528\u591a\u5c11\u4e2a$x_i$\u53ef\u4ee5\u7ec4\u6210\u4e00\u4e2a\u5e78\u8fd0\u6570\u5b57\u4e86\u3002\u56e0\u4e3a\u9898\u76ee\u8981\u6c42\u7684\u662f\u8fde\u63a5\u7684\u6b21\u6570\uff0c\u6240\u4ee5\u628a\u8fd9\u4e2a\u7b54\u6848\u51cf$1$\u5373\u53ef\u3002\n\n\u6211\u4eec\u53d1\u73b0\u6240\u6709\u6570\u5b57\u7684\u548c\u662f\u7b49\u4e8e$n$\u7684\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528dp\uff0c\u8bbe$f[i][j]$\u4e3a\u524di\u4e2a\u6570\uff0c\u7ec4\u6210\u548c\u4e3a$j$\u7684\u6570\uff0c\u8bbe\u7b2ci\u4e2a\u6570\u4e3a$a_i$\uff0c\u6700\u5c0f\u8981\u7528\u591a\u5c11\u4e2a\u6570\uff0c\u6709\n$$f[i][j]=min(f[i-1][j-a_i]+1)$$\n\u663e\u7136\u8fd9\u4f1a\u8d85\u65f6\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u4e0d\u540c\u7684$a_i$\u9876\u591a\u53ea\u6709$\\sqrt{n}$\u4e2a\uff0c\u56e0\u4e3a\u6240\u6709$a_i$\u7684\u548c\u4e3a$n$\uff0c\u800c$1$\u5230$\\sqrt{n}$\u7684\u548c\u5c31\u5df2\u7ecf\u8d85\u8fc7$n$\u4e86\u3002\u6240\u4ee5\u53ef\u4ee5\u53d8\u4e3a\u4e00\u4e2a\u591a\u91cd\u80cc\u5305\uff0c\u7136\u540e\u4f7f\u7528\u4e8c\u8fdb\u5236\u4f18\u5316\u591a\u91cd\u80cc\u5305\u53ef\u4ee5\u505a\u5230$O(n*\\sqrt{n}*logk)$\uff0c\u5176\u4e2d$k$\u4e3a\u6bcf\u79cd\u6570\u5b57\u7684\u4e2a\u6570\u3002\u867d\u7136$k$\u6700\u5927\u53ef\u4ee5\u662f$1e5$\uff0c\u4f46\u662f\u8fd9\u6837$a_i$\u7684\u603b\u6570\u5c31\u5f88\u5c0f\uff0c\u4e00\u822c\u7684\u590d\u6742\u5ea6\u5e94\u8be5\u662f$O(n*\\sqrt{n})$\u7684\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <cmath>\n#include <cstring>\n\nconst int maxn=1e5+7;\n\nusing namespace std;\n\nint n,m,cnt,x,y;\nint p[maxn],f[maxn],b[maxn],size[maxn],w[maxn],v[maxn];\n\nint find(int x)\n{\n    int y=x,root;\n    while (p[x]) x=p[x];\n    root=x;\n    x=y;\n    while (p[x])\n    {\n        y=p[x];\n        p[x]=root;\n        x=y;\n    }\n    return root;\n}\n\nvoid uni(int x,int y)\n{\n    int u=find(x);\n    int v=find(y);\n    if (u==v) return;\n    if (size[x]>size[y]) p[v]=u,size[u]+=size[v];\n                    else p[u]=v,size[v]+=size[u];\n}\n\nbool check(int x)\n{\n    while (x>0)\n    {\n        if ((x%10!=4) && (x%10!=7)) return false;\n        x/=10;\n    }\n    return true;\n}\n\nint main()\n{\n    scanf(\"%d%d\",&n,&m);\n    for (int i=1;i<=n;i++) size[i]=1;\t\n    for (int i=1;i<=m;i++)\n    {\n        scanf(\"%d%d\",&x,&y);\n        uni(x,y);\n    }\t\n    for (int i=1;i<=n;i++)\n    {\n        if (find(i)==i) b[size[i]]++;\n    }\t\t\n    memset(f,0x3f3f3f3f,sizeof(f));\n    f[0]=0;\t\n    for (int i=1;i<=n;i++)\n    {\n        if (!b[i]) continue;\n        int sum=1,power=1,k=1;\n        w[++cnt]=i;\n        v[cnt]=1;\n        while (sum<b[i])\n        {\n            power*=2;\n            sum+=power;\n            if (sum>=b[i])\n            {\n                sum-=power;\n                w[++cnt]=i*(b[i]-sum);\n                v[cnt]=b[i]-sum;\n                break;\n            }\n            w[++cnt]=i*power;\n            v[cnt]=power;\n        }\n    }\t\n    for (int i=1;i<=cnt;i++)\n    {\n        for (int j=n;j>=0;j--)\n        {\n            if (j-w[i]>=0)\n            f[j]=min(f[j],f[j-w[i]]+v[i]);\n        }\n    }\t\n    int ans=0x3f3f3f3f;\t\n    for (int i=4;i<=n;i++)\n    {\n        if (check(i))\n        {\n            ans=min(ans,f[i]-1);\n        }\n    }\n    if (ans>n) printf(\"-1\");\n          else printf(\"%d\",ans);\n}\n```",
        "postTime": 1532056146,
        "uid": 18895,
        "name": "liangzihao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF95E \u3010Lucky Country\u3011"
    },
    {
        "content": "## Solution\n\n\u7d2b\u9898\uff1f\n\n\u9996\u5148\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u5c9b\u5c7f\u4e4b\u95f4\u7684\u8fde\u901a\u5173\u7cfb\u3002\n\n\u7136\u540e\u5c06\u95ee\u9898\u8f6c\u5316\u4e3a\u6709\u82e5\u5e72\u4e2a\u8054\u901a\u5757\uff0c\u9009\u62e9\u5176\u4e2d\u4e00\u90e8\u5206\uff0c\u4f7f\u5b83\u4eec\u7684\u548c\u662f\u5e78\u8fd0\u6570\u3002\n\n\n\u8f6c\u5316\u540e\u7684\u95ee\u9898\u5c31\u662f\u591a\u91cd\u80cc\u5305\u7684\u6a21\u7248\uff0c\u8bb0\u5f97\u52a0\u4e0a\u4f18\u5316\uff08\u6211\u540c\u5b66\u6ca1\u52a0\u4f18\u5316\u75af\u72c2 T\uff09\u3002\n\n\u53ea\u9700\u8981\u4e8c\u8fdb\u5236\u5206\u7ec4\u5373\u53ef\uff0c\u8fd8\u7528\u4e0d\u4e0a\u5355\u8c03\u961f\u5217\u3002\n\n\u6ce8\u610f\u7b54\u6848\u662f\u6700\u5c11\u8054\u901a\u5757\u6570\u91cf\u51cf\u4e00\uff0c\u8bb0\u5f97\u5224\u65e0\u89e3\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\n//#define int long long\nusing namespace std;\nconst int N=1e5+5;\nint f[N],g[N],a[N],k,dp[N],x,y,n,m,i,j,sum;\nvoid init(int n){\n\tfor (int i=1;i<=n;i++) f[i]=i,g[i]=1;\n}\nint find(int x){\n\treturn f[x]=(f[x]==x?x:find(f[x]));\n}\nvoid merge(int x,int y){\n\tx=find(x),y=find(y);\n\tif (x!=y) g[x]+=g[y],f[y]=f[x];\n}\nbool lucky(int x){\n\twhile (x!=0){\n\t\tif (x%10!=4 && x%10!=7) return false;\n\t\tx/=10;\n\t}\n\treturn true;\n}\nsigned main(){\n\tios::sync_with_stdio(0),cin.tie(0),cout.tie(0);\n\tcin>>n>>m;\n\tinit(n);\n\tfor (i=1;i<=m;i++) cin>>x>>y,merge(x,y);\n\tfor (i=1;i<=n;i++)\n\t\tif (find(i)==i) a[g[i]]++;\n\tmemset(dp,0x3f,sizeof(dp));\n\tdp[0]=0;\n\tfor (i=1;i<=n;i++){\n\t\tif (a[i]==0) continue;\n\t\tsum=0;\n\t\tfor (k=1;sum+k<=a[i];sum+=k,k<<=1){\n\t\t\tfor (j=n;j>=0;j--)\n\t\t\t\tif (j-i*k>=0)\n\t\t\t\t\tdp[j]=min(dp[j],dp[j-i*k]+k);\n\t\t\t\telse\n\t\t\t\t\tbreak;\n\t\t}\n\t\tk=a[i]-sum;\n\t\tif (k==0) continue;\n\t\tfor (j=n;j>=0;j--)\n\t\t\tif (j-i*k>=0)\n\t\t\t\tdp[j]=min(dp[j],dp[j-i*k]+k);\n\t\t\telse\n\t\t\t\tbreak;\n\t}\n\tint ans=dp[n+1];\n\tfor (i=1;i<=n;i++)\n\t\tif (lucky(i))\n\t\t\tans=min(ans,dp[i]);\n\treturn cout<<(ans==dp[n+1]?-1:ans-1),0;\n}\n```\n",
        "postTime": 1668259263,
        "uid": 562686,
        "name": "yeshubo_qwq",
        "ccfLevel": 5,
        "title": "CF95E Lucky Country \u9898\u89e3"
    },
    {
        "content": "\u7b80\u8981\u9898\u610f\uff1a\u6709\u4e00\u5f20\u65e0\u5411\u56fe\uff0c\u4f60\u9700\u8981\u52a0\u4e00\u4e9b\u8fb9\u4f7f\u5f97\u56fe\u4e0a\u51fa\u73b0\u4e00\u4e2a\u5927\u5c0f\u4e3a\u5e78\u8fd0\u6570\u7684\u8fde\u901a\u5757\uff1b\u4e00\u4e2a\u6570\u662f\u5e78\u8fd0\u6570\u5f53\u4e14\u4ec5\u5f53\u8fd9\u4e2a\u6570\u7684\u6240\u6709\u6570\u7801\u90fd\u662f `4` \u6216 `7`\u3002\n\n\u5148\u7528\u5e76\u67e5\u96c6\u8dd1\u51fa\u6240\u6709\u8fde\u901a\u5757\u7684\u5927\u5c0f\u3002\n\n\u8f6c\u5316\u4e3a\u82e5\u5e72\u4e2a\u6570\uff0c\u9009\u4e00\u4e9b\u8ba9\u5b83\u4eec\u7684\u548c\u662f\u5e78\u8fd0\u6570\u3002\n\n\u76f4\u63a5\u80cc\u5305\u505a\u7684\u8bdd\uff0c\u590d\u6742\u5ea6 $O(n^3)$ \uff0c\u9700\u8981\u4f18\u5316\u3002\n\n\u89c2\u5bdf\u5230\u6240\u6709\u8fde\u901a\u5757\u5927\u5c0f\u6700\u591a\u53ea\u6709 $O(\\sqrt{n})$ \u79cd\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u5927\u5c0f\u76f8\u540c\u7684\u8fde\u901a\u5757\u4e00\u8d77\u8003\u8651\u3002\n\n\u8fd9\u6837\u7f29\u8d77\u6765\u4e4b\u540e\u590d\u6742\u5ea6\u53ef\u4ee5\u964d\u5230 $O(n^2)$\u3002\n\n\u8fd9\u662f\u4e00\u4e2a\u5f88\u660e\u663e\u7684\u5b8c\u5168\u80cc\u5305\u6a21\u578b\uff0c\u4f7f\u7528\u4e8c\u8fdb\u5236\u4f18\u5316\u89e3\u51b3\u3002\n\n\u590d\u6742\u5ea6\u4e0d\u4f1a\u5206\u6790\uff0c\u5927\u6982 $O(n \\sqrt{n})$ \u5427\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int NR=1e5+10;\nint n,m,cnt[NR],fa[NR],size[NR];\nint f[NR],tot,w[NR],v[NR];\n\nvoid init(){\n\tfor(int i=1;i<=n;i++)fa[i]=i,size[i]=1; \n}\nint get(int x){\n\tif(fa[x]==x)return x;\n\treturn fa[x]=get(fa[x]);\n}\nvoid merge(int x,int y){\n\tx=get(x);y=get(y);\n\tif(x==y)return;\n\tfa[x]=y;size[y]+=size[x];\n}\nbool check(int x){\n\tif(!x)return 1;\n\tif(x%10==4||x%10==7)return check(x/10);\n\treturn 0;\n}\n\nint main(){\n\tcin>>n>>m;init(); \n\tfor(int i=1,x,y;i<=m;i++)\n\t\tscanf(\"%d%d\",&x,&y),merge(x,y);\n\tfor(int i=1;i<=n;i++)\n\t\tif(get(i)==i)cnt[size[i]]++;\n\tfor(int i=1;i<=n;i++){\n\t\tint now=1;\n\t\twhile(cnt[i]>0){\n\t\t\tw[++tot]=min(cnt[i],now)*i;v[tot]=min(cnt[i],now);\n\t\t\tcnt[i]-=now;now<<=1;\n\t\t}\n\t}\n\tmemset(f,999999,sizeof(f));f[0]=0;\n\tfor(int i=1;i<=tot;i++)\n\t\tfor(int j=n-w[i];j>=0;j--)f[j+w[i]]=min(f[j+w[i]],f[j]+v[i]);\n\tint ans=1e9;\n\tfor(int i=1;i<=n;i++)\n\t\tif(check(i))ans=min(ans,f[i]);\n\tif(ans<1e9)cout<<ans-1<<endl;\n\telse puts(\"-1\");\n\treturn 0;\n}\n\n\n\n\n\n\n\n\n```",
        "postTime": 1655470922,
        "uid": 117771,
        "name": "intel_core",
        "ccfLevel": 7,
        "title": "CF95E \u9898\u89e3"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/xixike/p/15738312.html)\n\n## Desciption\n\n[CF95E Lucky Country](https://www.luogu.com.cn/problem/CF95E)\n\n## Solution\n\n\u975e\u5e38\u5de7\u5999\u7684 $dp$ \u9898\uff0csto xy\u5b66\u957f orz\n\n\u540c\u4e00\u4e2a\u533a\u57df\u7684\u5c9b\u5c7f\u660e\u663e\u53ea\u80fd\u5728\u4e00\u8d77\uff0c\u6240\u4ee5\u7528\u5e76\u67e5\u96c6\u5408\u5e76\u4e00\u4e0b\u540c\u4e00\u533a\u57df\u5185\u7684\u5c9b\u5c7f\u3002\n\n\u7136\u540e\u6211\u4eec\u8981\u627e\u51fa\u7528\u6700\u5c11\u7684\u8fb9\u8fde\u51fa\u4e00\u4e2a\u5e78\u8fd0\u5730\u533a\u3002\n\n\u90a3\u8fd9\u4e0d\u5c31\u662f\u4e00\u4e2a\u80cc\u5305\u5417\uff01\n\n\u6734\u7d20\u7684\u72b6\u6001\uff1a$dp_{i, j}$ \u8868\u793a\u8003\u8651\u5230\u524d $i$ \u4e2a\u533a\u57df\uff0c\u4e00\u5171\u6709 $j$ \u4e2a\u5c9b\u5c7f\u7684\u6700\u5c0f\u8fde\u8fb9\u6570\u3002\n\n\u6734\u7d20\u7684\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$\ndp_{i, j} = \\min\\{dp_{i - 1, j - a_i} + 1\\}\n$$\n\n> $a_i$\uff1a\u8868\u793a\u533a\u57df $i$ \u4e2d\u7684\u5c9b\u5c7f\u4e2a\u6570\u3002\n\n\u663e\u7136\u4f1a T\uff0c\u8003\u8651\u4f18\u5316\u3002\n\n\u7ecf\u5178\u7684**\u4e8c\u8fdb\u5236\u62c6\u5206**\u5c31\u767b\u573a\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u4e8c\u8fdb\u5236\u62c6\u4e00\u4e0b\u8dd1\u4e2a 01\u80cc\u5305 \u5373\u53ef\u3002\n\n## Code\n\n```cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nnamespace IO{\n    inline int read(){\n        int x = 0;\n        char ch = getchar();\n        while(!isdigit(ch)) ch = getchar();\n        while(isdigit(ch)) x = (x << 3) + (x << 1) + ch - '0', ch = getchar();\n        return x;\n    }\n\n    template <typename T> inline void write(T x){\n        if(x < 0) putchar('-'), x = -x;\n        if(x > 9) write(x / 10);\n        putchar(x % 10 + '0');\n    }\n}\nusing namespace IO;\n\nconst int N = 1e5 + 10;\nint n, m, tot, cnt;\nint f[N], siz[N];\nint a[N], dp[N], w[N], v[N];\n\ninline int find(int x){\n    return f[x] == x ? x : f[x] = find(f[x]);\n}\n\ninline void prework(){\n    for(int i = 1; i <= n; ++i){\n        if(!a[i]) continue;\n        int tmp = 1;\n        while(a[i]){\n            w[++cnt] = i * tmp, v[cnt] = tmp;\n            a[i] -= tmp, tmp <<= 1;\n            if(a[i] < tmp && a[i]){\n                w[++cnt] = i * a[i], v[cnt] = a[i];\n                break;\n            }\n        }\n    }\n}\n\ninline bool check(int x){\n    while(x){\n        if(x % 10 != 4 && x % 10 != 7) return 0;\n        x /= 10;\n    }\n    return 1;\n}\n\nint main(){\n    n = read(), m = read();\n    for(int i = 1; i <= n; ++i) f[i] = i, siz[i] = 1;\n    for(int i = 1; i <= m; ++i){\n        int fu = find(read()), fv = find(read());\n        if(fu != fv){\n            if(siz[fu] < siz[fv]) swap(fu, fv);\n            f[fu] = fv, siz[fv] += siz[fu];\n        }\n    }\n    for(int i = 1; i <= n; ++i)\n        if(find(i) == i) a[siz[i]]++;\n    memset(f, 0x3f, sizeof(f));\n    prework();\n    f[0] = 0;\n    for(int i = 1; i <= cnt; ++i)\n        for(int j = n; j >= w[i]; --j)\n            f[j] = min(f[j], f[j - w[i]] + v[i]);\n    int ans = 1e9;\n    for(int i = 1; i <= n; ++i)\n        if(check(i)) ans = min(ans, f[i]);\n    write(ans > n ? -1 : ans - 1);\n    puts(\"\");\n    return 0;\n}\n```\n\n$$\n\\_EOF\\_\n$$\n\n",
        "postTime": 1640618237,
        "uid": 158846,
        "name": "xixike",
        "ccfLevel": 0,
        "title": "CF95E Lucky Country \u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee](https://www.luogu.com.cn/problem/CF95E)\n\n\u5c06\u6240\u6709\u8054\u901a\u5757\u627e\u51fa\u6765\u540e \u5c31\u662f\u4e00\u4e2a\u591a\u91cd\u80cc\u5305\u88f8\u9898\u4e86\n\n\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u5355\u8c03\u961f\u5217\u7684\u505a\u6cd5 \n\n\u6ce8\u610f\u8981\u521d\u59cb\u5316\u6bcf\u6b21\u7684\u961f\u9996\u4e3a\u6781\u5927\u503c \u56e0\u4e3a\u8981\u6c42\u6700\u5c0f \u7136\u540e\u5c31\u662f\u679a\u4e3e%$sz[i]$\u7684\u4f59\u6570 \u679a\u4e3e\u4e2a\u6570 \u5148\u628a\u5f53\u524d\u503c\u538b\u5165\u961f\u5217 \u518d\u4ece\u961f\u5217\u627e\u6700\u5927\u503c\u66f4\u65b0 \n\n\u56e0\u4e3a\u4e0d\u540c\u7269\u54c1\u7684\u4e2a\u6570\u53ea\u6709$\\sqrt{n}$\u4e2a \n\n\u6240\u4ee5\u590d\u6742\u5ea6\u5c31\u662f$O(n*\\sqrt{n})$\n\n\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u7adf\u7136\u6ca1\u6709\u8dd1\u8fc7\u4e8c\u8fdb\u5236\u62c6\u5206 \n\n\n```\n#include <bits/stdc++.h>\n\nusing namespace std;\ntemplate <typename T>\ninline void read(T &x)\n{\n    x = 0;\n    int f = 1;\n    char ch = getchar();\n    while (ch < '0' || ch > '9')\n    {\n        if (ch == '-')\n            f = -1;\n        ch = getchar();\n    }\n    while (ch >= '0' && ch <= '9')\n    {\n        x = x * 10 + ch - '0';\n        ch = getchar();\n    }\n    if (f == -1)\n        x = -x;\n}\nint n, m, tot;\nconst int N = 1e5 + 55;\nint f[N];\nint fa[N];\nint stk[N], h, t = 1;\nint sz[N], v[N], w[N], sum[N];\nint g[N];\ninline int find(int x) { return x == fa[x] ? x : fa[x] = find(fa[x]); }\ninline bool check(int x)\n{\n    while (x)\n    {\n        if (x % 10 != 4 && x % 10 != 7)\n            return false;\n        x /= 10;\n    }\n    return true;\n}\nint vis[N];\nint main()\n{\n    read(n);\n    read(m);\n    for (int i = 1; i <= n; ++i)\n        fa[i] = i, sz[i] = 1;\n    for (int i = 1, x, y; i <= m; ++i)\n    {\n        read(x), read(y);\n        int fx = find(x), fy = find(y);\n        if (fx == fy)\n            continue;\n        if (sz[x] < sz[y])\n            swap(x, y);\n        sz[fx] += sz[fy];\n        fa[fy] = fx;\n    }\n    for (int i = 1; i <= n; ++i)\n    {\n        if (fa[i] == i)\n        {\n            if (!vis[sz[i]])\n            {\n                w[++tot] = sz[i];\n                vis[sz[i]] = 1;\n            }\n            sum[sz[i]]++;\n        }\n    }\n    memset(f, 0x3f3f3f, sizeof(f));\n    f[0] = 0;\n    for (int i = 1; i <= tot; ++i)\n    {\n        for (int r = 0; r < w[i]; ++r)//\u679a\u4e3e\u4f59\u6570\n        {\n            h = 0, t = 1;\n            g[1] = 1 << 30;//\u521d\u59cb\u5316\n            for (int k = 0; k * w[i] + r <= n; ++k)//\u679a\u4e3e\u9009\u51e0\u4e2a\n            {\n                int tmp = f[k * w[i] + r] - k;//\u5148\u538b\u5165$i-1$\u65f6\u7684\u503c\n                while (h < t && k - stk[h + 1] > sum[w[i]])\n                    h++;\n                f[k * w[i] + r] = min(f[k * w[i] + r], g[h + 1] + k);\n                while (h < t && g[t] >= tmp)\n                    t--;\n                stk[++t] = k;\n                g[t] = tmp;\n            }\n        }\n    }\n    int ans = 1 << 30;\n    for (int i = 1; i <= n; ++i)\n        if (check(i) && f[i] <= n)\n            ans = min(ans, f[i]);\n    if (ans > n)\n        cout << -1;\n    else\n        cout << ans - 1;\n    return 0;\n}\n```\n\n",
        "postTime": 1606569374,
        "uid": 251572,
        "name": "minxu",
        "ccfLevel": 0,
        "title": "CF95E Lucky Country"
    },
    {
        "content": "Codeforces 95E Lucky Country\n\n\u5982\u679c\u4e00\u4e2a\u6570\u4e2d\u4e0d\u5305\u542b\u96644\u548c7\u4e4b\u5916\u7684\u6570\u5b57\u5219\u662f\u5e78\u8fd0\u6570\u3002\n\n\u6709n\u4e2a\u5c9b\u5c7f\uff0c\u901a\u8fc7\u53cc\u5411\u9053\u8def\u8fde\u63a5\u3002\u8fd9\u4e9b\u5c9b\u5c7f\u88ab\u5206\u4e3a\u51e0\u4e2a\u5730\u533a\u3002\n\n\u6bcf\u4e2a\u5c9b\u5c5e\u4e8e\u6070\u597d\u4e00\u4e2a\u533a\u57df\uff0c\u540c\u4e00\u533a\u57df\u4e2d\u7684\u4efb\u4f55\u4e24\u4e2a\u5c9b\u4e4b\u95f4\u5b58\u5728\u9053\u8def\uff0c\u4e0d\u540c\u533a\u57df\u7684\u4efb\u4f55\u4e24\u4e2a\u5c9b\u4e4b\u95f4\u6ca1\u6709\u8def\u5f84\u3002\n\n\u5982\u679c\u4e00\u4e2a\u5730\u533a\u7684\u5c9b\u5c7f\u6570\u91cf\u662f\u4e00\u4e2a\u5e78\u8fd0\u6570\u5b57\uff0c\u5219\u8fd9\u4e2a\u5730\u533a\u662f\u5e78\u8fd0\u7684\u3002\n\n\u95ee\u6700\u5c11\u589e\u52a0\u51e0\u6761\u9053\u8def\u80fd\u521b\u5efa\u4e00\u4e2a\u5e78\u8fd0\u5730\u533a\u3002\n\n\u89e3\u6790\uff1a\n\n\u53ef\u4ee5\u901a\u8fc7SCC\u5904\u7406\u5f3a\u8fde\u901a\uff0c\u4f46\u662f\u6211\u9009\u62e9\u4e86\u5e76\u67e5\u96c6\n\ndp\u901a\u8fc7\u4e8c\u8fdb\u5236\u63d0\u901f $O( a^2 )->O(nlogn)$\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <algorithm>\n#include <cmath>\n#include <cstring>\n#include <cctype>\n#include <cstdlib>\n#include <bitset>\n#include <queue>\n#include <map>\n#include <set>\n#include <stack>\n#include <vector>\n#include <string>\n#include <functional>\n\nusing namespace std ;\n\nconst int eps=1e-6 ;\nconst int inf=(1<<29);\n\n#define pb push_back\n#define rep(i,a,b) for(int (i)=(a);(i)<=(b);(i)++)\n#define Rep(i,a,b) for(int (i)=(a);(i)< (b);(i)++) \n#define REP(i,a,b) for(int (i)=(a);(i)>=(b);(i)--)\n\ntypedef unsigned long long ull ;\ntypedef long long ll ;\n\ninline int read(){\n\tchar c ;\n\tint f=1 ;\n\twhile((c=getchar())<'0' || c>'9') if (c=='-') f=-1 ;\n\tint res=c-'0' ;\n\twhile((c=getchar())>='0' && c<='9') res=res*10+c-'0' ;\n\treturn res*f ;\n}\n\nconst int N = 100010 ;\n\nmap <int,int> mp ;\nint f[N],rank[N],dp[N] ;\nint n,m ;\n\nint find(int x){\n\treturn (f[x]==x)?x:f[x]=find(f[x]) ;\n}\n\nvoid merge(int x,int y){\n\tint X=find(x),Y=find(y) ;\n\tif (X==Y) return ; //\u73b0\u5728\u5df2\u7ecf\u662f\u540c\u4e00\u4e2a\u96c6\u5408 \n\tif (rank[X]<=rank[Y]){\n\t\tf[X]=Y;\n\t\trank[Y]+=rank[X] ;\n\t}\n\telse {\n\t\tf[Y]=X ;\n\t\trank[X]+=rank[Y] ;\n\t}\n}\n\nvoid F(int V,int C,int K){\n\tREP(i,V,C*K) dp[i]=min(dp[i],dp[i-C*K]+K) ;\n}\n\nbool lucky(int x){\n\tif (x%10!=4 && x%10!=7) return false ;\n\tif (x<10) return true ;\n\treturn lucky(x/10) ;\n}\n\nint main(){\n\tn=read();m=read();\n\tRep(i,0,n){\n\t\tf[i]=i;\n\t\trank[i]=1;\n\t}\n\tRep(i,0,m) {\n\t\tint x=read(),y=read();\n\t\tmerge(x-1,y-1) ;\n\t} \n\tRep(i,0,n) if (find(i)==i) mp[rank[i]]++;\n\t\n\tRep(i,0,n+1) dp[i]=inf ;\n\t\n\tdp[0]=0;\n\tfor (map<int,int> ::iterator it=mp.begin();it!=mp.end();it++){\n\t\tint sz=(it->first),sum=(it->second) ;\n\t\twhile (sum>0){\n\t\t\tF(n,sz,(sum+1)/2) ;\n\t\t\tsum/=2 ;\n\t\t} \n\t} \n\tint ans=inf ;\n\tRep(i,0,n+1) if (lucky(i)) ans=min(ans,dp[i]) ;\n\tprintf(\"%d\\n\",ans==inf?-1:ans-1) ;\n\t \n\treturn 0 ;\n}\n\n```",
        "postTime": 1543199458,
        "uid": 54900,
        "name": "__Hacheylight__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF95E \u3010Lucky Country\u3011"
    },
    {
        "content": "\u8fd9\u662f\u4e00\u9053\u6c34\u9898\uff0c\u5148\u901a\u8fc7dfs\u6c42\u51fa\u6240\u4ee5\u8fde\u901a\u5757\u7684\u5927\u5c0f\uff0c\u7136\u540edp\u5373\u53ef\n\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=100005;\nconst int INF=0x3f3f3f3f;\nint n,m,x,y,sum;\nint vis[N],dp[N];\nvector<int>e[N],v;\nmap<int,int>mp;\nvoid dfs(int x)\n{\n\tvis[x]=1;\n\tfor(int i=0;i<e[x].size();i++)\n\t\tif(!vis[e[x][i]])\n\t\t\tdfs(e[x][i]);\n\tsum++;\n}\nbool lucky(int x)\n{\n\twhile(x)\n\t{\n\t\tif(x%10!=4&&x%10!=7)\n\t\t\treturn false;\n\t\tx/=10;\n\t}\n\treturn true;\n}\nint main()\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfor(int i=1;i<=m;i++)\n\t{\n\t\tscanf(\"%d%d\",&x,&y);\n\t\te[x].push_back(y);\n\t\te[y].push_back(x);\n\t}\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tif(!vis[i])\n\t\t{\n\t\t\tsum=0;\n\t\t\tdfs(i);\n\t\t\tmp[sum]++;\n\t\t}\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tdp[i]=INF;\n\tfor(auto itr=mp.begin();itr!=mp.end();itr++)\n\t{\n\t\tint c=itr->first,k=itr->second;\n\t\twhile(k>0)\n\t\t{\n\t\t\tfor(int i=n;i>=c*((k+1)/2);i--)\n\t\t\t\tdp[i]=min(dp[i],dp[i-c*((k+1)/2)]+(k+1)/2);\n\t\t\tk/=2;\n\t\t}\n\t}\n\tint ans=INF;\n\tfor(int i=1;i<=n;i++)\n\t\tif(lucky(i))\n\t\t\tans=min(ans,dp[i]);\n\tif(ans==INF)\n\t\tprintf(\"-1\\n\");\n\telse\n\t\tprintf(\"%d\\n\",ans-1);\n\treturn 0;\n}\n\n```",
        "postTime": 1532002528,
        "uid": 67896,
        "name": "AllureLove",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF95E \u3010Lucky Country\u3011"
    }
]
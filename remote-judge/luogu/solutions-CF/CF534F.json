[
    {
        "content": "### \u9898\u76ee\u5927\u610f\n\n\u7ed9\u51fa\u5e8f\u5217 $a[1\\cdots n]$\uff0c$b[1\\cdots m]$\uff0c\u6784\u9020\u4e00\u4e2a $n\\times m$ \u7684 $01$ \u77e9\u9635\uff0c\u6ee1\u8db3\uff1a\n\n- \u5bf9\u6bcf\u4e2a $1\\le i\\le n$\uff0c\u7b2c $i$ \u884c\u7684\u6781\u957f\u8fde\u7eed $1$ \u6bb5\u6570\u91cf\u4e3a $a[i]$\u3002\n- \u5bf9\u6bcf\u4e2a $1\\le j\\le m$\uff0c\u7b2c $j$ \u5217\u7684\u6781\u957f\u8fde\u7eed $1$ \u6bb5\u6570\u91cf\u4e3a $b[i]$\u3002\n\n\u8f93\u51fa\u65f6\u5bf9 $0$ \u8f93\u51fa `.`\uff0c\u5bf9 $1$ \u8f93\u51fa `*`\u3002\n\n$1\\le n\\le 5$\uff0c$1\\le m\\le 20$\uff0c\u4fdd\u8bc1\u6709\u89e3\u3002\n\n---\n\n\u6ce8\u610f\u5230\u8fd9\u4e2a $n$ \u6bd4\u8f83\u5c0f\uff0c\u56e0\u6b64\u53ef\u4ee5\u72b6\u538b $n$ \u7684\u8fd9\u4e00\u7ef4\uff0c\u626b\u63cf $m$ \u7684\u8fd9\u4e00\u7ef4\u3002\n\n\u5148\u7ed9\u51fa\u6bcf\u884c\u6bcf\u5217\u8fde\u901a\u5757\u7684\u6c42\u6cd5\uff0c\u8fd9\u91cc\u91c7\u53d6 \u201c\u5f53\u4e14\u4ec5\u5f53\u7b2c $i-1$ \u4f4d\u4e3a $0$\uff0c\u7b2c $i$ \u4f4d\u4e3a $1$ \u7684\u65f6\u5019\u8d21\u732e $1$ \u7684\u7edf\u8ba1\u65b9\u5f0f\u201d\u3002\u7531\u8fd9\u4e2a\u7edf\u8ba1\u65b9\u5f0f\u53ef\u4ee5\u53d1\u73b0\uff0c\u5bf9\u4e00\u4e2a\u957f\u4e3a $l$ \u7684\u5e8f\u5217\uff0c\u5176 $1$ \u8fde\u901a\u5757\u7684\u4e2a\u6570\u6700\u591a\u4e3a $\\lceil l/2\\rceil$\uff0c\u7531\u4e8e\u9898\u76ee\u4fdd\u8bc1\u4e86\u6709\u89e3\uff0c\u6545\u6709 $a_i\\le 10$\uff0c$b_i\\le 3$\u3002\n\n\u4e00\u4e2a\u6734\u7d20\u7684 dp \u60f3\u6cd5\u662f\u4ee4 $dp[i][s][bitmask]$ \u5206\u522b\u8868\u793a\u524d $i\u200b$ \u5217\uff0c\u6bcf\u4e00\u884c\u76ee\u524d\u7684\u8fde\u901a\u5757\u4e2a\u6570\uff0c\u524d\u4e00\u5217\u7684 $0/1$ \u72b6\u6001\uff0c\u662f\u5426\u53ef\u4ee5\u8fbe\u5230\uff0c\u8f6c\u79fb\u5c31\u679a\u4e3e\u4e0b\u4e00\u5217\u7684 $0/1$ \u72b6\u6001\uff0c\u66f4\u65b0\u4e00\u4e0b\u6bcf\u4e00\u884c\u76ee\u524d\u7684\u8fde\u901a\u5757\u4e2a\u6570\uff0c\u8fd8\u539f\u65b9\u6848\u5c31\u8bb0\u4e00\u4e0b\u524d\u9a71\u72b6\u6001\u3002\u4f46\u8fd9\u6837\u505a dp \u7684\u72b6\u6001\u6570\u662f $20\\times 11^5\\times 2^5$ \u7684\uff0c\u8f6c\u79fb\u8fd8\u8981 $2^5$\uff0c\u6548\u7387\u592a\u4f4e\uff08\u8003\u8651\u5230\u6bcf\u4e00\u5217\u7684\u8fde\u901a\u5757\u4e2a\u6570\u8fd8\u6709\u9650\u5236\uff0c\u8fd9\u91cc\u4e0d\u662f $2^5$ \u800c\u662f $2^4\u200b$\uff0c\u4e0d\u8fc7\u4e5f\u8fd8\u662f\u592a\u5927\u4e86\uff09\u3002\n\n\u7136\u540e\u8003\u8651 meet in the middle\uff0c\u628a $m$ \u5217\u5206\u4e3a\u524d $1\\cdots \\lfloor m/2\\rfloor$ \u5217\u548c\u540e $\\lfloor m/2\\rfloor+1\\cdots m$ \u5217\uff0c\u4e24\u8fb9\u5206\u522b\u8dd1\u4e0a\u9762\u7684 dp\uff08\u6ce8\u610f\u6b64\u65f6\u5de6\u4fa7\u6709\u8d21\u732e\u7684\u4f4d\u7f6e\u4e3a $0\\sim 1,1\\sim 2,\\cdots ,\\lfloor m/2\\rfloor-1\\sim \\lfloor m/2\\rfloor$\uff0c\u53f3\u4fa7\u6709\u8d21\u732e\u7684\u4f4d\u7f6e\u4e3a $\\lfloor m/2\\rfloor+1\\sim \\lfloor m/2\\rfloor+2,\\cdots ,m-1\\sim m$\uff0c\u4e2d\u95f4 $\\lfloor m/2\\rfloor\\sim \\lfloor m/2\\rfloor+1$ \u5728\u540e\u9762\u5408\u5e76\u5de6\u53f3\u4e24\u4fa7\u65f6\u8fdb\u884c\u8ba1\u7b97\uff09\uff0c\u6ce8\u610f\u5230\u8fd9\u65f6\u4e00\u8fb9\u7684\u72b6\u6001\u6570\u964d\u4f4e\u5230 $10\\times 6^5\\times 2^5$\uff0c\u8f6c\u79fb\u8fd8\u662f $2^5$\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u5408\u5e76\u7684\u65f6\u5019\uff0c\u679a\u4e3e\u5de6\u4fa7\u7684\u6bcf\u884c\u8fde\u901a\u5757\u4e2a\u6570\uff0c\u7b2c $\\lfloor m/2\\rfloor$ \u5217\u7684 $0/1$ \u72b6\u6001\uff0c\u7b2c $\\lfloor m/2\\rfloor+1$ \u5217\u7684 $0/1$ \u72b6\u6001\uff0c\u53ef\u4ee5\u7b97\u51fa\u53f3\u4fa7\u6bcf\u884c\u7684\u8fde\u901a\u5757\u4e2a\u6570\uff0c\u53d6\u51fa\u5bf9\u5e94\u7684 dp \u72b6\u6001\u5c31\u53ef\u4ee5\u5feb\u901f\u5408\u5e76\u4e86\u3002\n\n\u4ee3\u7801\u7565\u5fae\u96be\u5199\n\n```cpp\nint dpL[22][7780][32],dpR[22][7780][32],Add[32][32],ns[7780][32];\npair<int,int> pre[22][7780][32],suf[22][7780][32];\nint n,m,LIM,B,a[22],b[22],ans[22][22];\nvector<int> rec[22];\nint P[6]={1,6,36,216,1296,7776};\nint main(){\n\tscanf(\"%d%d\",&n,&m); LIM=P[n],B=m/2;\n\tfor (int i=1; i<=n; i++) scanf(\"%d\",&a[i]);\n\tfor (int i=1; i<=m; i++) scanf(\"%d\",&b[i]);\n\tfor (int i=0; i<(1<<n); i++){\n\t\tfor (int j=0; j<(1<<n); j++) for (int k=0; k<n; k++)\n\t\t\tif (!((i>>k)&1) && ((j>>k)&1)) Add[i][j]|=1<<k;\n\t\tfor (int j=0; j<LIM; j++)\n\t\t\tfor (int k=0,t=j; k<n; k++,t/=6) ns[j][i]+=(t%6+((i>>k)&1))*P[k];\n\t\tint c=0;\n\t\tfor (int j=1; j<=n; j++)\n\t\t\tif (((i>>(j-1))&1) && !((i>>j)&1)) c++;\n\t\trec[c].push_back(i);\n\t}\n\tdpL[0][0][0]=1;\n\tfor (int x:rec[b[m]]) dpR[m][0][x]=1;\n\tfor (int i=0; i<B; i++) for (int j=0; j<LIM; j++) for (int k:rec[b[i]]){\n\t\tif (!dpL[i][j][k]) continue;\n\t\tfor (int t:rec[b[i+1]]){\n\t\t\tdpL[i+1][ns[j][Add[k][t]]][t]=1;\n\t\t\tpre[i+1][ns[j][Add[k][t]]][t]={j,k};\n\t\t}\n\t}\n\tfor (int i=m; i>B+1; i--) for (int j=0; j<LIM; j++) for (int k:rec[b[i]]){\n\t\tif (!dpR[i][j][k]) continue;\n\t\tfor (int t:rec[b[i-1]]){\n\t\t\tdpR[i-1][ns[j][Add[t][k]]][t]=1;\n\t\t\tsuf[i-1][ns[j][Add[t][k]]][t]={j,k};\n\t\t}\n\t}\n\tfor (int i=0; i<LIM; i++) for (int j=0; j<(1<<n); j++){\n\t\tif (!dpL[B][i][j]) continue;\n\t\tfor (int k=0; k<(1<<n); k++){\n\t\t\tint sta=0;\n\t\t\tfor (int t=0,cur=i; t<n; t++,cur/=6){\n\t\t\t\tint v=a[t+1]-cur%6-((Add[j][k]>>t)&1);\n\t\t\t\tif (v<0 || v>5){ sta=-1; break; }\n\t\t\t\telse sta+=v*P[t];\n\t\t\t}\n\t\t\tif (sta==-1 || !dpR[B+1][sta][k]) continue;\n\t\t\tfor (int t=B,cj=i,ck=j; t>=1; t--){\n\t\t\t\tfor (int l=0; l<n; l++) ans[l+1][t]=(ck>>l)&1;\n\t\t\t\tauto d=pre[t][cj][ck]; cj=d.first,ck=d.second;\n\t\t\t}\n\t\t\tfor (int t=B+1,cj=sta,ck=k; t<=m; t++){\n\t\t\t\tfor (int l=0; l<n; l++) ans[l+1][t]=(ck>>l)&1;\n\t\t\t\tauto d=suf[t][cj][ck]; cj=d.first,ck=d.second;\n\t\t\t}\n\t\t\tfor (int t=1; t<=n; t++,puts(\"\"))\n\t\t\t\tfor (int l=1; l<=m; l++) putchar(ans[t][l]?'*':'.');\n\t\t\treturn 0;\n\t\t}\n\t}\n}\n```\n\n",
        "postTime": 1677069495,
        "uid": 44599,
        "name": "wishapig",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF534F Simplified Nonogram"
    }
]
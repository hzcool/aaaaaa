[
    {
        "content": "\u9634\u95f4\u505a\u6cd5\uff0c\u5e76\u4e14\u53ef\u4ee5\u5361\uff08\n\n\u5b9a\u4e49\u4e24\u6761\u8def\u5f84\u201c\u51b2\u7a81\u201d\u8868\u793a\u8fd9\u4e24\u6761\u8def\u5f84\u4f1a\u4f7f\u5f97\u7b54\u6848\u4e3a $\\texttt{Human}$\u3002\n\n\u9996\u5148\u6211\u4eec\u8003\u8651\u5982\u4f55\u5feb\u901f\u5224\u5b9a\u4e00\u6761\u8def\u5f84\u662f\u5426\u4f1a\u4e0e\u522b\u7684\u8def\u5f84\u4ea7\u751f\u51b2\u7a81\u3002\n\n\u4ece\u5de6\u5f80\u53f3\u904d\u5386\u8fd9\u6761\u8def\u5f84\u4e2d\u7684\u6bcf\u4e00\u4e2a\u70b9\uff0c\u5047\u8bbe\u5f53\u524d\u7684\u70b9\u4e3a $u$\u3002\n\n\u6211\u4eec\u518d\u904d\u5386\u6240\u6709 $u$ \u51fa\u73b0\u7684\u8def\u5f84\uff0c\u5bf9\u4e8e\u7b2c $i$ \u6761\u8def\u5f84\u7ef4\u62a4\u4e00\u4e2a $p_i$ \u8868\u793a\u8fd9\u6761\u8def\u5f84\u4e2d\u5f53\u524d\u8bbf\u95ee\u7684\u70b9\u3002\n\n- \u5982\u679c $a_{i,p_i+1}=u$\uff0c\u90a3\u4e48 $p_i\\leftarrow p_i+1$\u3002\n\n- \u5426\u5219\u627e\u5230 $a_i$ \u4e2d $u$ \u51fa\u73b0\u7684\u4f4d\u7f6e $p'$\uff08\u76f4\u63a5\u66b4\u529b\u5f80\u524d\u8df3\uff09\u3002\u5982\u679c $p'>p_i$ \u90a3\u4e48\u7b54\u6848\u5c31\u662f $\\texttt{Human}$\uff0c\u5426\u5219 $p_i\\leftarrow p'$\u3002\n\n\u8fd9\u6837\u505a\u7684\u590d\u6742\u5ea6\u662f $O(\\sum k_i)$\u3002\n\n\u4f46\u6211\u4eec\u663e\u7136\u4e0d\u80fd\u5bf9\u4e8e\u6bcf\u4e00\u6761\u8def\u5f84\u90fd\u5224\u65ad\u4e00\u904d\u3002\n\n\u7531\u4e8e\u8fd9\u9898\u6570\u636e\u770b\u8d77\u6765\u5c31\u975e\u5e38\u96be\u9020\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u4f7f\u7528\u4e00\u4e9b\uff08\u65e0\u6cd5\u8bc1\u660e\u6b63\u786e\u6027\u7684\uff09\u968f\u673a\u5316\u3002\n\n\u76f4\u63a5\u968f\u673a $1000$ \u6761\u4e0d\u540c\u7684\u8def\u5f84\u5224\u65ad\u5373\u53ef\uff0c\u5b9e\u6d4b\u53ef\u4ee5\u8fc7\u3002\n\nupd: \u4ee5\u4e0b\u6570\u636e\u53ef\u4ee5\u4f7f\u6211\u7684\u7a0b\u5e8f WA\u3002\n\n```\n1\n300000 149999\n2 1 2\n2 1 2\n...\n2 1 2\n3 1 3 5\n3 1 4 5\n```\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 300005\n#define LIM 1000005\n#define pb push_back\n#define gc() (P1==P2 && (P2=(P1=buf)+fread(buf,1,LIM,stdin),P1==P2)?EOF:*P1++)\nconst int B=1e3;\nchar *P1,*P2,buf[LIM];\nint T,n,m,b[N],ps[N];vector<int> a[N],vc[N];\nint rd()\n{\n\tint res=0;char c=0;while(!isdigit(c)) c=gc();\n\twhile(isdigit(c)) res=res*10+c-48,c=gc();return res;\n}\nbool slv(int x)\n{\n\tfor(int i=1;i<=n;++i) ps[i]=a[i].size()-1;\n\tfor(auto i:a[x]) for(auto j:vc[i])\n\t{\n\t\tif(ps[j]<a[j].size()-1 && a[j][ps[j]+1]==i) ++ps[j];\n\t\telse while(~ps[j] && a[j][ps[j]]!=i) --ps[j];\n\t\tif(ps[j]==-1) return 0;\n\t}return 1;\n}\nvoid slv()\n{\n\tsrand(time(0));n=rd();for(int i=1;i<=n;++i) vc[i].clear();\n\tn=rd();for(int i=1;i<=n;++i) b[i]=i,a[i].clear();\n\tfor(int i=1,x;i<=n;++i)\n\t{m=rd();for(int j=1;j<=m;++j) x=rd(),a[i].pb(x),vc[x].pb(i);}\n\trandom_shuffle(b+1,b+n+1);\n\tfor(int i=1;i<=min(n,B);++i) if(!slv(i)) {puts(\"Human\");return;}\n\tputs(\"Robot\");\n}\nint main() {T=rd();while(T--) slv();return 0;}\n```",
        "postTime": 1645798328,
        "uid": 119621,
        "name": "Kubic",
        "ccfLevel": 10,
        "title": "CF1056H Detect Robots"
    },
    {
        "content": "\u8003\u8651\u5982\u4f55\u66b4\u529b\u5224\u5b9a\uff1a\n\n\u679a\u4e3e\u4e00\u4e2a\u4e32\u7684\u4e24\u4e2a\u5b57\u7b26 $A\\to C\\to...\\to B$\uff0c\u5982\u679c\u4e4b\u524d\u51fa\u73b0\u8fc7 $A\\to D\\to...\\to B$ \u7684\u8def\u5f84\uff0c\u68c0\u67e5 $C$ \u662f\u5426\u7b49\u4e8e $D$\uff0c\u5982\u679c\u4e0d\u7b49\u4e8e\u5c31\u8f93\u51fa `Human` \u3002\n\n\u53ef\u4ee5\u679a\u4e3e $B$ \u7136\u540e\u679a\u4e3e $B$ \u7ed3\u5c3e\u7684\u8def\u5f84\u4e00\u8d77\u5904\u7406\u3002\n\n\uff08\u8bbe $S=\\sum len$\uff09\n\n\u76f4\u63a5\u7528\u4e0a\u9762\u7684\u66b4\u529b\u7684\u8bdd\uff0c\u53d1\u73b0\u4e32\u957f\u5ea6\u5c0f\u7684\u65f6\u5019\u53ef\u4ee5\u63a5\u53d7\uff0c\u5982\u679c\u4e32\u957f $\\le \\sqrt{S}$ \u7684\u8bdd\u590d\u6742\u5ea6\u662f $S\\sqrt{S}$\u3002\n\n\u8003\u8651\u6839\u53f7\u5206\u6cbb\uff0c\u5c0f\u4e32\u5bf9\u5c0f\u4e32\u7684\u53ef\u4ee5\u66b4\u529b\u7b97\u3002\u5269\u4e0b\u8fd8\u6709\u5927\u4e32\u5bf9\u5c0f\u4e32\uff0c\u5927\u4e32\u5bf9\u5927\u4e32\u3002\n\n\u5927\u4e32\u7684\u4e2a\u6570\u53ea\u6709\u6839\u53f7\u4e2a\uff0c\u8003\u8651\u53ef\u4e0d\u53ef\u4ee5 $O(S)$ \u5224\u65ad\u4e0e\u5176\u4ed6\u6240\u6709\u4e32\u3002\u8bb0\u5f55 $pos_i$ \u8868\u793a $i$ \u5728\u5927\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff0c\u5bf9\u4e8e\u5176\u4ed6\u4e32\u90fd\u4ece\u540e\u5411\u524d\u626b\uff0c\u8bb0\u5f55\u540e\u9762\u5b57\u6bcd\u7684 $\\max pos$\uff0c\u5982\u679c\u73b0\u5728\u8fd9\u4e2a\u5b57\u6bcd\u7684 $pos<mx$ \u5219\u5224\u65ad\u4e00\u4e0b\u3002\n\n\u590d\u6742\u5ea6\u5c31\u662f $S\\sqrt S$ .\n\n\n```cpp\n#include<bits/stdc++.h>\n#define For(i,a,b) for(register int i=(a);i<=(b);++i)\n#define Rep(i,a,b) for(register int i=(a);i>=(b);--i)\nusing namespace std;\ninline int read()\n{\n    char c=getchar();int x=0;bool f=0;\n    for(;!isdigit(c);c=getchar())f^=!(c^45);\n    for(;isdigit(c);c=getchar())x=(x<<1)+(x<<3)+(c^48);\n    if(f)x=-x;return x;\n}\n\n#define fi first\n#define se second\n#define pb push_back\n#define mkp make_pair\ntypedef pair<int,int>pii;\ntypedef vector<int>vi;\n\n#define maxn 300005\n#define inf 0x3f3f3f3f\n\nint n,m,B;\nvi a[maxn];\nbool cmp(vi a,vi b){return a.size()>b.size();}\n\nvector<pii>v[maxn];\nint pos[maxn];\nint vis[maxn];\n\nvoid work()\n{\t\n\tn=read(),m=read();\n\tFor(i,1,n) v[i].clear();\n\tFor(i,1,m){\n\t\tint sz=read(); a[i].resize(sz);\n\t\tFor(j,0,sz-1) a[i][j]=read();\n\t\tif(a[i].size()<=B){\n\t\t\tFor(k,1,sz-1)\n\t\t\t\tFor(j,0,k-1)\n\t\t\t\t\tv[a[i][k]].pb(mkp(a[i][j],a[i][j+1]));\n\t\t}\n\t}\n\t// solve big\n\tFor(i,1,m)\n\t{\n\t\tif(a[i].size()<=B)continue;\n\t\tint sz=a[i].size();\n\t\tFor(j,1,n) pos[j]=-1;\n\t\tFor(j,0,sz-1) pos[a[i][j]]=j;\n\t\tFor(j,i+1,m){\n\t\t\tint r=-1;\n\t\t\tRep(p,(int)a[j].size()-1,0)\n\t\t\t\tif(pos[a[j][p]]!=-1){\n\t\t\t\t\tif(pos[a[j][p]]>r) r=pos[a[j][p]];\n\t\t\t\t\telse if(a[j][p+1]!=a[i][pos[a[j][p]]+1]) {puts(\"Human\");return;}\n\t\t\t\t}\n\t\t}\n\t}\n\t// solve small\n\t\n\tFor(i,1,n) vis[i]=0;\n\tFor(i,1,n){\n\t\tfor(auto it:v[i]){\n\t\t\tif(vis[it.fi] && vis[it.fi]!=it.se) {puts(\"Human\");return;}\n\t\t\tvis[it.fi]=it.se;\n\t\t}\n\t\tfor(auto it:v[i])\n\t\t\tvis[it.fi]=0;\n\t}\n\tputs(\"Robot\");\n}\n\nsigned main()\n{\n\tB=sqrt(300000)/2;\n\tint T=read();\n\twhile(T--)work();\n\treturn 0;\n}\n```",
        "postTime": 1635953486,
        "uid": 151935,
        "name": "Rainbow_qwq",
        "ccfLevel": 0,
        "title": "CF1056H"
    },
    {
        "content": "#### \u9898\u76ee\u5927\u610f\uff1a\n\t\u6709\u4e00\u5f20n\u4e2a\u70b9\u7684\u56fe\uff0c\u7ed9\u4f60m\u6761\u8def\u5f84\uff0c\u5982\u679c\u5b58\u5728\u4e24\u4e2a\u70b9A\u3001B,\u4ed6\u4eec\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u8def\u5f84\u4e2d\u5747\u51fa\u73b0\u4e14\u5728\u4e24\u6761\u8def\u7ecf\u4e2dA->B\u4e4b\u95f4\u7684\u70b9\u4e0d\u540c\uff0c\u5219\u8f93\u51fa\u201cHuman\u201d,\u5426\u5219\u8f93\u51fa\"Robot\".\n---\n\u6211\u4eec\u5b9e\u9645\u4e0a\u6c42\u7684\u662f\u6240\u6709\u6570\u5bf9(A,B)(A<B)\uff0c\u6ee1\u8db3\u6240\u6709s[A]==s[B]\u65f6s[A+1]\u76f8\u540c\u3002\n\n\u8003\u8651\u6839\u53f7\u5206\u5757\uff0c\u8bbe\u5757\u957f\u4e3aB\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a|S|>B\u7684\u4e32\uff0c\u6211\u4eec\u66b4\u529b\u5224\u65ad\u5b83\u548c\u5176\u4ed6\u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u5173\u7cfb\u3002\n\n\u6bcf\u4e00\u4e2a\u4e32\u6211\u4eec\u7684\u64cd\u4f5c\u6b21\u6570\u4e3an*$\\sum_{|S|>B}$|S|\uff0c\u8fd9\u4e00\u90e8\u5206\u590d\u6742\u5ea6\u4e3an\u221an\u3002\n\n\u5982\u679c|S|<=B\uff0c\u6211\u4eecn^2\u679a\u4e3e\u5f53\u70b9\u5bf9i\u3001j\uff0c\u7531s[i]\u5411s[j]\u8fde\u4e00\u6761\u8fb9\u6743\u4e3as[i+1]\u7684\u8fb9\n\n\u6700\u540e\u5bf9\u6240\u6709\u8fb9\u8fdb\u884c\u5904\u7406\uff0c\u590d\u6742\u5ea6\u4e3an\u221an\u3002\n```cpp\n#include<cstdio>\n#include<cmath>\n#include<cstring>\n#define re register\n#define FOR(i,a,b) for(i=a;i<=b;++i)\n#define ROF(i,a,b) for(i=a;i>=b;--i)\n#define TU(x) for(k=head[x];v=e[k].to,k;k=e[k].nex)\nusing namespace std;\nconst int N(300010);\nint t,n,m,cn1,B,cn2;\nint head[N],c[N],s[N],ud[N],st[N],ed[N],len[N];\nstruct Edge{int nex,to,val;}e[N*20];\ninline int read()\n{\n\tre int x(0),t(1);re char ch(getchar());\n\twhile((ch<'0'||ch>'9')&&ch!='-')ch=getchar();\n\tif(ch=='-')t=-1,ch=getchar();\n\twhile(ch>='0'&&ch<='9')x=x*10+(ch^'0'),ch=getchar();\n\treturn x*t;\n}\ninline void add(int x,int y,int z){e[++cn1]=(Edge){head[x],y,z};head[x]=cn1;}\ninline void solve()\n{\n\tre int i,j,k,v;\n\tFOR(i,1,m)\n\t{\n\t\tst[i]=cn2+1;\n\t\tlen[i]=read();\n\t\tFOR(j,1,len[i])s[++cn2]=read();\n\t\ted[i]=cn2;\n\t}\n\tB=sqrt(cn2);\n\tFOR(i,1,m)\n\tif(len[i]<=B)//\u957f\u5ea6\u4e0d\u8db3B\u7684\u8fde\u8fb9\n\t\tFOR(j,st[i],ed[i])FOR(k,j+1,ed[i])\n\t\tadd(s[j],s[k],s[j+1]);\n\telse//\u5426\u5219\u66b4\u529b\u626b\u6240\u6709\u4e32\n\t{\n\t\tFOR(j,st[i],ed[i])c[s[j]]=j;\n       \t\t//c[i]\u8868\u793ai\u5b57\u7b26\u5728\u4e32\u4e2d\u51fa\u73b0\u7684\u6700\u540e\u4f4d\u7f6e\n\t\tFOR(j,1,m)\n\t\t{\n\t\t\tif(j==i||(j<i&&len[j]>B))continue;\n\t\t\tv=c[s[ed[j]]];\n   //v\u8868\u793a\u6b63\u5728\u88ab\u6bd4\u8f83\u7684\u4e32\u5df2\u7ecf\u88ab\u6bd4\u8f83\u7684\u6240\u6709\u5b57\u7b26\u5728\u539f\u4e32\u91cc\u51fa\u73b0\u7684\u6700\u665a\u4f4d\u7f6e\n\t\t\tROF(k,ed[j]-1,st[j])\n\t\t\t{\n\t\t\t\tif(!c[s[k]])continue;\n\t\t\t\tif(v>c[s[k]])\n\t\t\t\t{\n\t\t\t\t\tif(s[c[s[k]]+1]!=s[k+1])\n\t\t\t\t\t{\n\t\t\t\t\t\tputs(\"Human\");\n\t\t\t\t\t\tFOR(j,st[i],ed[i])c[s[j]]=0;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse v=c[s[k]];\n\t\t\t}\n\t\t}\n\t\tFOR(j,st[i],ed[i])c[s[j]]=0;\n\t}\n\tFOR(i,1,n)\n\t{\n\t\tTU(i)\n\t\t{\n\t\t\tif(!ud[v])ud[v]=e[k].val;\n\t\t\telse if(ud[v]!=e[k].val)\n\t\t\t{\n\t\t\t\tputs(\"Human\");\n\t\t\t\tTU(i)ud[v]=0;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tTU(i)ud[v]=0;\n\t}\n\tputs(\"Robot\");\n}\nint main()\n{\n\tt=read();\n\twhile(t--)\n\t{\n\t\tn=read();m=read();\n\t\tsolve();\n\t\tmemset(head,cn1=0,sizeof(head));\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1569678571,
        "uid": 108254,
        "name": "colemak",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1056H \u3010Detect Robots\u3011"
    }
]
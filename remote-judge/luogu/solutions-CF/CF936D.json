[
    {
        "content": "**\u9898\u610f\u7b80\u8ff0\uff1a\u4f60\u64cd\u7eb5\u4e00\u4e2a\u5766\u514b\u57282n\u7684\u6709\u969c\u788d\u7269\u7684\u77e9\u9635\u4e0a\u8d70\uff0c\u5766\u514b\u6bcf\u79d2\u4f1a\u5411\u53f3\u79fb\u52a8\u4e00\u683c\uff0c\u6bcf\u4e00\u79d2\u4f60\u53ef\u4ee5\u9009\u62e9\u5207\u6362\u884c\u6216\u4e0d\u5207\u6362\uff08\u5148\u5411\u53f3\u8d70\u518d\u5207\u6362\uff09\u3002\u53e6\u5916\u5766\u514b\u88c5\u6709\u70ae\u5f39\uff0c\u6bcf\u6b21\u6253\u5b8c\u540e\u9700\u8981t\u7684\u65f6\u95f4\u586b\u5145\uff08\u521a\u5f00\u59cb\u6ca1\u6709\u88c5\u5f39<=>\u7b2c\u4e00\u6b21\u5f00\u70aet\u79d2\u540e\uff09**\n\n\u9996\u5148\u8003\u8651\u6ca1\u6709\u5207\u6362\u884c\u7684\u60c5\u51b5\uff0c\u90a3\u76f8\u5f53\u4e8e\u6bcf\u6b21\u6211\u80fd\u6253\u70ae\u5c31\u6253\u4e00\u5b9a\u662f\u6700\u4f18\u7684\uff0c\u6240\u4ee5\u6bcf\u683c\u79ef\u7d2f\u4e00\u4e2a\u503c\uff0c\u7b49\u5230t\u4e86\u9a6c\u4e0a\u6253\u6389\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u6362\u884c\u7684\u8bdd\uff0c\u76f8\u5f53\u4e8e\u6211\u524d\u9762\u79ef\u7d2f\u518d\u591a\u7684\u6743\u503c\u4e5f\u53ea\u80fd\u5e26t\u7684\u6743\u503c\u5411\u4e0b\u8d70\n\u4e8e\u662f\u6211\u4eec\u8003\u8651\u4e00\u4e2adp:  \n\u8bbe$f[i][j]$\u8868\u793a\u5230\u7b2ci\u884c\u7b2cj\u5217\u65f6\u6700\u591a\u79ef\u7d2f\u591a\u5c11\u6743\u503c, \u5219  \n**$f[i][j] = max(f[i $^$ 1][j], f[i][j - 1] + 1)$**\n\n\u5982\u679c\u8981\u4ece$f[i][j-1]$\u8f6c\u79fb\u8fc7\u6765\u5fc5\u987b\u6ee1\u8db3\u5982\u679c$(i, j)$\u6709\u969c\u788d\u76ee\u524d\u79ef\u7d2f\u6743\u503c\u8981\u6bd4t\u5927\n\u800c\u8981\u4ece$f[i$^$1][j]$\u8f6c\u79fb\u8fc7\u6765\u9700\u8981\u6ee1\u8db3$(i,j)$\u6ca1\u6709\u969c\u788d\u7269   \n\u73b0\u5728\u7684\u590d\u6742\u5ea6\u662f$O(n)$\u7684\uff0c\u4f46$n$\u662f1e9\u7684\uff0c\u600e\u4e48\u529e\u5462\uff1f\n\n\u8003\u8651\u4e00\u79cd\u6362\u884c\u7684\u60c5\u51b5  ![](https://cdn.luogu.com.cn/upload/image_hosting/5bc60j3e.png)\n\u5728\u53ef\u884c\u6027\u76f8\u540c\u60c5\u51b5\u4e0b\u7ea2\u8272\u8def\u7ebf\u79ef\u7d2f\u7684\u6743\u503c\u8981\u6bd4\u7eff\u8272\u7684\u5927\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8d2a\u5fc3\u9009\u62e9\u7ea2\u8272\u7684\u8def\u7ebf\uff0c\u5373\u5728\u969c\u788d\u7269\u540e\u76f4\u63a5\u9009\u62e9\u6362\u884c\u6216\u4e0d\u6362\u884c  \n\u4e8e\u662f\u5173\u952e\u70b9\u5c31\u53d8\u6210\u4e86\u53ea\u6709\u969c\u788d\u7269\u6240\u5728\u70b9\u548c\u969c\u788d\u7269\u6240\u5728\u70b9\u540e\u9762\u7684\u90a3\u4e2a\u70b9  \n\u590d\u6742\u5ea6$O(m1 + m2)$  \n\u8f93\u51fa\u65b9\u6848\u53ea\u9700\u8bb0\u4ece\u54ea\u4e2a\u72b6\u6001\u8f6c\u79fb\u800c\u6765\n```\n#include <bits/stdc++.h>\n#define ll long long\n#define res register int\n#define inf 0x3f3f3f3f\n#define pi pair<int, int>\n#define fi first\n#define se second\n#define N 2000005\nusing namespace std;\nint n, m1, m2, lisan[N], tot, x1[N], x2[N], t, f[2][N], g[2][N];\nbool ifok[2][N];\nint ansx, ansy;\nvector<int> Ans1;\nvector<pi> Ans2;\ninline int read(){\n    res w = 0, X = 0; register char ch = 0;\n    while(!isdigit(ch)){w |= ch == '-'; ch = getchar();}\n    while(isdigit(ch)){X = (X << 1) + (X << 3) + (ch ^ 48); ch = getchar();}\n    return w ? -X : X;\n}\ninline void update(res x, res y, res val, res op){\n\tif(f[x][y] < val){\n\t\tf[x][y] = val;\n\t\tg[x][y] = op;\n\t}\n}\nint main(){\n\tn = read(), m1 = read(), m2 = read(), t = read();\n\tfor(res i = 1; i <= m1; i++)\n\t  x1[i] = read(), lisan[++tot] = x1[i], lisan[++tot] = x1[i] + 1;\n\tfor(res i = 1; i <= m2; i++)\n\t  x2[i] = read(), lisan[++tot] = x2[i], lisan[++tot] = x2[i] + 1;\n\tlisan[++tot] = 0, lisan[++tot] = n + 1;\n\tsort(lisan + 1, lisan + tot + 1);\n\ttot = unique(lisan + 1, lisan + tot + 1) - lisan - 1;\n\tfor(res i = 1; i <= m1; i++)\n\t  ifok[0][lower_bound(lisan + 1, lisan + tot + 1, x1[i]) - lisan] = 1;\n\tfor(res i = 1; i <= m2; i++)\n\t  ifok[1][lower_bound(lisan + 1, lisan + tot + 1, x2[i]) - lisan] = 1;\n    memset(f, -1, sizeof(f));\n\tf[0][1] = f[1][1] = 0; \n\tg[1][1] = 1;\n\tfor(res i = 1; i <= tot; i++){\n\t\tfor(res j = 0; j < 2; j++)\n\t\t  if(~f[j][i] && !ifok[j ^ 1][i])\n\t\t    update(j ^ 1, i, min(f[j][i], t), 1);\n\t\tfor(res j = 0; j < 2; j++)\n\t\t  if(~f[j][i] && f[j][i] + lisan[i + 1] - lisan[i] - 1 >= t * ifok[j][i + 1])\n\t\t    update(j, i + 1, f[j][i] + lisan[i + 1] - lisan[i] - t * ifok[j][i + 1], 0);\n\t}\n//\tfor(res i = 1; i <= tot; i++, puts(\"\"))\n//\t  for(res j = 0; j < 2; j++)\n//\t    printf(\"%d \", f[j][i]);\n\tif(f[0][tot] < f[1][tot])\n\t  ansx = 1;\n\telse\n\t  ansx = 0;\n\tif(f[ansx][tot] == -1){\n\t\tputs(\"No\");\n\t\treturn 0;\n\t}\n\tansy = tot;\n\tres last = 1e9;\n\tfor(; ansx || (ansy != 1);){\n\t\tif(g[ansx][ansy] == 1)\n\t\t  Ans1.push_back(lisan[ansy]), ansx ^= 1;\n\t\telse{\n\t\t\tif(ifok[ansx][ansy]){\n\t\t\t\tlast = min(last - t, lisan[ansy] - 1);\n\t\t\t\tAns2.push_back(make_pair(last, ansx));\n\t\t\t}\n\t\t\tansy--;\n\t\t}\n\t}\n\tputs(\"Yes\");\n\tprintf(\"%d\\n\", Ans1.size());\n\tfor(res i = Ans1.size() - 1; ~i; i--)\n\t  printf(\"%d \", Ans1[i]);\n\tprintf(\"\\n%d\\n\", Ans2.size());\n\tfor(res i = Ans2.size() - 1; ~i; i--)\n\t  printf(\"%d %d\\n\", Ans2[i].fi, Ans2[i].se + 1);\n\treturn 0;\n}\n```\n",
        "postTime": 1567431051,
        "uid": 26848,
        "name": "miaokehao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF936D \u3010World of Tank\u3011"
    }
]
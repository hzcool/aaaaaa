[
    {
        "content": "\u8bb0$cnt_i$\u8868\u793a$u_j=i$\u7684$j$\u7684\u6570\u91cf.\u8bb0\u6700\u4f18\u89e3\u4e3a$B$.  \n\u663e\u7136$B\\ge\\sum_{i=1}^nmax(0,a_i-cnt_i)$\n\n\u63a5\u4e0b\u6765\u8bc1\u660e$B=\\sum_{i=1}^nmax(0,a_i-cnt_i)$\n\n\u7531\u9898\u610f\u5f97\u5f15\u74061:\u8fbe\u5230\u8d44\u6e90$t_j$\u4e2a\u8d44\u6e90$s_j$\u7684\u5956\u52b1\u6700\u591a\u662f\u4e00\u4e2a\u989d\u5916\u7684\u8d44\u6e90  \n\u5047\u8bbe\u8d44\u6e90$u$\u9700\u8981$a(u)$\u4e2a,\u73b0\u5728\u5df2\u7ecf\u6709\u4e86$x$\u4e2a$(x<a(u))$\n- $x=a(u)-1$.\u5efa\u9020/\u88ab\u5956\u52b1 \u4e00\u4e2a\u8d44\u6e90$u$,$x=a(u)$,\u65e0\u6cd5\u83b7\u5f97\u5956\u52b1.\n- $x<a(u)-1$.\u5efa\u9020/\u88ab\u5956\u52b1 \u4e00\u4e2a\u8d44\u6e90$u$,$x<a(u)$,\u81f3\u591a\u5956\u52b1\u4e00\u4e2a\u8d44\u6e90$v$.\u82e5$v\\ne u$,\u4e0d\u4f1a\u5bf9$u$\u4ea7\u751f\u8d21\u732e;\u5426\u5219$x+1$,\u6700\u7ec8\u5fc5\u7136\u5230\u8fbe\u524d\u4e00\u79cd\u60c5\u51b5.  \n\n\u4e8e\u662f\u8bc1\u6bd5.(\u5176\u5b9e\u8fd9\u7bc7\u8bc1\u660e\u5b58\u5728\u6f0f\u6d1e....\u5982\u679c\u6709\u66f4\u597d\u7684\u8bc1\u660e\u53ef\u4ee5\u8054\u7cfb\u6211,\u4e5f\u53ef\u4ee5\u53e6\u5199\u4e00\u7bc7\u9898\u89e3)\n\n\u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba,\u7528`std::map`\u7ef4\u62a4\u5373\u53ef\u505a\u5230$\\mathcal O(q\\log n)$.\u5b98\u65b9\u8fd8\u6709\u7ebf\u6027\u7684\u505a\u6cd5.  \n```cpp\n/**********/\n#define MAXN 200011\nstd::map<ll,ll>p[MAXN];\nll a[MAXN],cnt[MAXN];\nint main()\n{\n    ll n=read(),ans=0;\n    for(ll i=1;i<=n;++i)a[i]=read(),ans+=a[i];\n    ll q=read();\n    while(q--)\n    {\n        ll s=read(),t=read(),u=read();\n        if(p[s].count(t))\n        {\n            ll v=p[s][t];\n            if(cnt[v]<=a[u])++ans;\n            --cnt[v];\n            p[s].erase(t);\n        }\n        if(u)\n        {\n            if(cnt[u]<a[u])--ans;\n            ++cnt[u];\n            p[s][t]=u;\n        }\n        printf(\"%lld\\n\",ans);\n    }\n    return 0;\n}\n```",
        "postTime": 1585918135,
        "uid": 73142,
        "name": "\u4e07\u5f18",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1266E \u3010Spaceship Solitaire\u3011"
    }
]
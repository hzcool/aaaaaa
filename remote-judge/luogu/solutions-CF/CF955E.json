[
    {
        "content": "\u8003\u8651\u5728 $T$ \u70b9\u91ca\u653e\u58f0\u6ce2\uff0c\u90a3\u4e48\u7b2c $i$ \u4e2a\u4f4d\u7f6e\u7684\u51b0\u9525\u4f1a\u5728 $f_T(i)=a_i+|T-i|$ \u65f6\u523b\u4e4b\u540e\u843d\u5730\uff0c\u82e5\u5b58\u5728\u6700\u5c0f\u7684 $j$ \u4f7f\u5f97 $f_T(j)<j$\uff0c\u90a3\u4e48 Krakozyabra \u4f1a\u5728 $j$ \u65f6\u523b\u88ab\u6321\u4f4f\uff0c\u7136\u540e\u518d\u7b49\u5230\u5de6\u4fa7\u51b0\u9525\u843d\u4e0b\u3002\u8003\u8651\u5230\u540e\u9762\u53ef\u80fd\u6709\u51b0\u9525\u66f4\u65e9\u843d\u4e0b\uff0c\u53ef\u4ee5\u5f97\u5230\u7b54\u6848\u4e3a\n$$\\max\\{\\min_{1\\leq i<j}\\{f_T(i)\\},\\min_{j\\leq i\\leq n}\\{f_T(i)\\}\\}$$\n\u6b64\u65f6\u590d\u6742\u5ea6\u4e3a $\\text{O}(n^2)$\uff0c\u8003\u8651\u4f18\u5316\u3002\u5c06 $f_T$ \u4e2d\u7684\u7edd\u5bf9\u503c\u62c6\u6389\uff0c\u5206\u522b\u4e3a $f_T(i)=a_i+T-i\\ (i\\leq T)$\uff0c$f_T(i)=a_i-T+i\\ (i>T)$\uff0c\u7528\u4e24\u4e2a\u6570\u7ec4 $\\text{pre,\\ suf}$ \u5b58\u50a8\u3002\u8003\u8651\u8f6c\u5316 $f_T(i)<i$ \u8fd9\u4e2a\u4e0d\u7b49\u5f0f\uff0c\u6839\u636e\u524d\u9762\u63d0\u5230\u7684\u62c6\u7edd\u5bf9\u503c\uff0c\u82e5 $i\\leq T$\uff0c\u5373\u4e3a $T<i\\times 2-a_i$\uff1b\u82e5 $i>T$\uff0c\u5373\u4e3a $a_i<T$\u3002\u81f3\u6b64\uff0c\u53ef\u4ee5\u901a\u8fc7\u679a\u4e3e $T$\uff0c\u4e8c\u5206 $i$\uff0c\u914d\u5408\u4efb\u610f\u4e00\u79cd rmq \u7b97\u6cd5\u5f97\u5230\u7b54\u6848\u3002\n```cpp\n#include<bits/stdc++.h>\n#define N 100000\n#define reg register\n#define inl inline\n#define inf 1e9\nusing namespace std;\nint n,a[N+5],_[N+5],minx[N+5][25],pre[N+5][25],suf[N+5][25];\ninl int Query(reg int l,reg int r)\n{\n\tif(l>r) return inf;\n\treg int k=_[r-l+1];\n\treturn min(minx[l][k],minx[r-(1<<k)+1][k]);\n}\ninl int QryP(reg int l,reg int r)\n{\n\tif(l>r) return inf;\n\treg int k=_[r-l+1];\n\treturn min(pre[l][k],pre[r-(1<<k)+1][k]);\n}\ninl int QryS(reg int l,reg int r)\n{\n\tif(l>r) return inf;\n\treg int k=_[r-l+1];\n\treturn min(suf[l][k],suf[r-(1<<k)+1][k]);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(reg int i=1;i<=n;i++)\n\t{\n\t\tscanf(\"%d\",&a[i]);\n\t\tminx[i][0]=a[i];\n\t\tpre[i][0]=a[i]-i;\n\t\tsuf[i][0]=a[i]+i;\n\t}\n\tfor(reg int i=2;i<=n;i++) _[i]=_[i>>1]+1;\n\tfor(reg int j=1;j<=20;j++)\n\t{\n\t\tfor(reg int i=1;i<=n-(1<<j)+1;i++)\n\t\t{\n\t\t\tminx[i][j]=min(minx[i][j-1],minx[i+(1<<(j-1))][j-1]);\n\t\t\tpre[i][j]=min(pre[i][j-1],pre[i+(1<<(j-1))][j-1]);\n\t\t\tsuf[i][j]=min(suf[i][j-1],suf[i+(1<<(j-1))][j-1]);\n\t\t}\n\t}\n\treg int now=1,ans=inf;\n\tfor(reg int i=1;i<=n;i++)\n\t{\n\t\twhile(now<=i && now*2-a[now]<=i) now++;\n\t\treg int x,y,pos=-1;\n\t\tif(now<=i) pos=now;\n\t\telse\n\t\t{\n\t\t\treg int l=i,r=n;\n\t\t\twhile(l<=r)\n\t\t\t{\n\t\t\t\treg int mid=(l+r)>>1;\n\t\t\t\tif(Query(i,mid)<i)\n\t\t\t\t{\n\t\t\t\t\tpos=mid;\n\t\t\t\t\tr=mid-1;\n\t\t\t\t}\n\t\t\t\telse l=mid+1;\n\t\t\t}\n\t\t\tif(!~pos) continue;\n\t\t}\n\t\tif(pos<=i)\n\t\t{\n\t\t\tx=QryP(1,pos-1)+i;\n\t\t\ty=min(QryP(pos,i)+i,QryS(i+1,n)-i);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tx=QryS(pos,n)-i;\n\t\t\ty=min(QryP(1,i)+i,QryS(i+1,pos-1)-i);\n\t\t}\n\t\tans=min(ans,max(x,y));\n\t}\n\tprintf(\"%d\\n\",ans>=inf/2?-1:ans);\n\treturn 0;\n}\n```",
        "postTime": 1606047047,
        "uid": 23243,
        "name": "VenusM1nT",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF955E \u3010Icicles\u3011"
    }
]
[
    {
        "content": "\u9996\u5148\uff0c\u4e3a\u4e86\u4f7f\u7ed3\u679c\u6700\u5927\uff0c\u4e00\u5b9a\u662f\u5bf9\u676f\u5b50\u6309\u7167\u6c34\u7684\u6570\u91cf\u4ece\u5c0f\u5230\u5927\u8fdb\u884c\u64cd\u4f5c\u3002\n\n\u53d1\u73b0\u4e00\u4e2a\u6570\u5217\u4e2d\uff0c\u5982\u679chi\u662f\u7b2ck\u5927\u7684\uff0c\u90a3\u4e48\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662fhi/2^k\u3002\n\n\u4e8e\u662f\u53ef\u4ee5\u820d\u5f03k\u8f83\u5927\u7684\u6570\u5b57\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u6570\u5b57\uff0c\u6c42\u51fa\u5de6\u53f3\u6bd4\u5b83\u5927\u7684\u524d30\u4e2a\u6570\u5b57\uff0c\u7136\u540e\u76f4\u63a5\u7edf\u8ba1\u7b54\u6848\u3002\n\n\u6c42\u51fa\u6570\u5b57\u53ef\u4ee5\u5148\u6392\u5e8f\u7136\u540e\u7528\u94fe\u8868\u4f9d\u6b21\u63d2\u5165\uff0c\u7edf\u8ba1\u7b54\u6848\u662f\u4e2a\u5377\u79ef\u7684\u5f0f\u5b50\uff0c\u5c55\u5f00\u5c31\u53ef\u4ee5\u7ebf\u6027\u505a\u4e86\u3002\n\n\u4ee3\u7801\u5982\u4e0b\n\n```cpp\n#include<bits/stdc++.h>\n#define IT set<int>::iterator\n#define getchar() (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)? EOF:*p1++)\nusing namespace std;\ntypedef double ld;\nconst int N=1000010,lim=22;\nchar buf[1<<23],*p1=buf,*p2=buf;\nint l[N],r[N],nxt[N],st[N],tp;\nint h[N],n,id[N],rk[N];\nld er[31],ans;\nint a[31],b[31];\nint read()\n{\n\tint res=0,fl=0;\n\tchar a=getchar();\n\twhile(a<'0'||a>'9') {if(a=='-') fl=1;a=getchar();}\n\twhile(a>='0'&&a<='9') res=res*10+a-'0',a=getchar();\n\treturn fl? -res:res;\n}\nbool cmp(int a,int b) {return h[a]>h[b];}\nint main()\n{\n\tfreopen(\"drink.in\",\"r\",stdin);\n\tfreopen(\"drink.out\",\"w\",stdout);\n\tint i,j,li,lj;\n\tn=read();\n\tfor(i=1;i<=n;i++) h[i]=read(),id[i]=i;\n\tsort(id+1,id+n+1,cmp);\n\tfor(i=1;i<=n;i++) rk[id[i]]=i;\n\tfor(er[0]=1,i=1;i<=30;i++) er[i]=er[i-1]*2;\n\tfor(i=1;i<=n+1;i++)\n\t{\n\t\twhile(tp&&rk[st[tp]]>rk[i]) nxt[st[tp]]=i,tp--;\n\t\tst[++tp]=i;\n\t}\n\tr[0]=n+1;\n\tfor(i=1;i<=n;i++)\n\t{\n\t\tmemset(a,0,sizeof(a)),memset(b,0,sizeof(b));\n\t\tr[id[i]]=nxt[id[i]],l[id[i]]=l[nxt[id[i]]],r[l[id[i]]]=l[r[id[i]]]=id[i];\n\t\tfor(li=id[i],lj=0;lj<lim&&li!=0;lj++,li=l[li]) a[lj]=li-l[li];\n\t\tfor(li=id[i],lj=0;lj<lim&&li!=n+1;lj++,li=r[li]) b[lj]=r[li]-li;\n\t\tld ti=0;\n\t\tfor(j=0;j<lim;j++) ti+=(ld)(b[j])/er[j];\n\t\tfor(j=0;j<lim;j++) ans+=(ld)(h[id[i]])*ld(a[j])/er[j+1]*ti;\n\t}\n\tprintf(\"%.10lf\",ans/(ld)n/(ld)n);\n\treturn 0;\n}\n```\n",
        "postTime": 1591950119,
        "uid": 223768,
        "name": "Yukikaze_",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF380E \u3010Sereja and Dividing\u3011"
    }
]
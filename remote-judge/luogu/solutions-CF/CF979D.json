[
    {
        "content": "\u7b80\u5355\u6570\u5b66 + 01trie  \n\n\u9996\u5148\u6211\u4eec\u8981\u5bf9\u6bcf\u4e2a\u6570 $i$ \u5f00\u4e00\u4e2a 01trie\uff0c\u91cc\u9762\u5b58\u6709 $i$ \u7684\u6240\u6709\u500d\u6570\u3002  \n\u56e0\u4e3a$k|gcd(v,x)$ \u5373 $k|v\\ \\&\\&\\ k|x$\uff0c\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e $2$ \u64cd\u4f5c\u53ea\u9700\u8981\u5728 $k$ \u8fd9\u9897 01trie \u4e0a\u9762\u8d2a\u5fc3\u627e $v$ \u5373\u53ef\u3002\n\n\u90a3\u4e48\u6211\u4eec\u5728 $1$ \u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u628a $u$ \u63d2\u5165\u5230 $u$ \u7684\u6240\u6709\u7ea6\u6570\u7684 01trie \u91cc\u5373\u53ef\uff08\u7ea6\u6570\u8981 $\\mathcal{O}(nlogn)$ \u9884\u5904\u7406\uff09\u3002\n\n\u65f6\u95f4\u548c\u7a7a\u95f4\u90fd\u662f $\\mathcal{O}(nlog^2n)$ \u7684\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define R register int\nusing namespace std;\nnamespace Luitaryi {\ninline int g() { R x=0,f=1;\n\tregister char s; while(!isdigit(s=getchar())) f=s=='-'?-1:f;\n\tdo x=x*10+(s^48); while(isdigit(s=getchar())); return x*f;\n} const int N=100010,M=20000010,Y=100000,B=16,Inf=1e9;\nint q,L,tot,rt[N],t[M][2],mn[M],vl[M];\nvector <int> fac[N];\nbool vis[N];\ninline void ins(int& tr,int x,int d) {\n\tif(!tr) tr=++tot,mn[tr]=Inf;\n\tmn[tr]=min(mn[tr],x);\n\tif(d<0) return vl[tr]=x,void();\n\tins(t[tr][x>>d&1],x,d-1);\n}\ninline int find(int tr,int x,int d) {\n\tif(!tr) return -1;\n\tif(d<0) return vl[tr]; R t0=t[tr][0],t1=t[tr][1];\n\tif(!t0||mn[t0]>L) return find(t1,x,d-1);\n\tif(!t1||mn[t1]>L) return find(t0,x,d-1);\n\treturn find(t[tr][(x>>d&1)^1],x,d-1);\n}\ninline void main() {\n\tfor(R i=1;i<=Y;++i) for(R j=i;j<=Y;j+=i) fac[j].push_back(i);\n\tq=g(); for(R i=1,op,x,k,s;i<=q;++i) { \n\t\top=g(); if(op&1) {\n\t\t\tx=g(); if(vis[x]) continue; vis[x]=true;\n\t\t\tfor(R i=0,lim=fac[x].size();i<lim;++i) ins(rt[fac[x][i]],x,B);\n\t\t} else {\n\t\t\tx=g(),k=g(),s=g(); L=s-x;\n\t\t\tif(x%k||s-x<0) {puts(\"-1\"); continue;}\n\t\t\tprintf(\"%d\\n\",find(rt[k],x,B));\n\t\t}\n\t}\n}\n} signed main() {Luitaryi::main(); return 0;}\n```\n2019.11.11",
        "postTime": 1573457752,
        "uid": 115086,
        "name": "Tari",
        "ccfLevel": 7,
        "title": "Jack's \u9898\u89e3 CF979D \u3010Kuro and GCD and XOR and SUM\u3011"
    },
    {
        "content": "\u5e7f\u544a\uff1a[\u535a\u5ba2\u98df\u7528\u6548\u679c\u66f4\u4f73](https://hikaru.com.cn/hikaru/248/)\n#### Description\n\n[here](https://codeforces.com/problemset/problem/979/D)\n\n#### Solution\n\n\u66b4\u529b\u3002\u66b4\u529b\u3002\u66b4\u529b\u3002\n\n\u6bcf\u6b21\u5224\u65ad\u4e00\u4e0b $k$ \u80fd\u5426\u6574\u9664 $x$ \uff0c\u5982\u679c\u4e0d\u80fd\u4e00\u5b9a\u65e0\u89e3\uff0c\u8f93\u51fa $-1$ \u3002\n\n\u7136\u540e\u8bbe\u5b9a\u4e00\u4e2a\u503c\uff0c\u4e0d\u8981\u592a\u5927\uff0c\u6bd4\u8fd9\u4e2a\u503c\u5c0f\u7684\u76f4\u63a5\u679a\u4e3e\uff0c\u6bd4\u8fd9\u4e2a\u503c\u5927\u7684\u5c31\u6309\u500d\u6570\u6765\u679a\u4e3e\u3002\n\n#### Code\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<cstring>\n#include<algorithm>\n\nusing namespace std;\n\nconst int N=100010;\n\nbool vis[N];\nint q,t,cnt,last;\nint x,k,s;\n\nint main(){\n\tscanf(\"%d\",&q);\n\twhile(q--){\n\t\tscanf(\"%d\",&t);\n\t\tif(t == 1){\n\t\t\tscanf(\"%d\",&x);\n\t\t\tvis[x]=true;\n\t\t\tcnt++,last=x;\n\t\t}\n\t\telse{\n\t\t\tscanf(\"%d%d%d\",&x,&k,&s);\n\t\t\tif(cnt == 1){\n\t\t\t\tif(last%k == 0 && x% k== 0 && last+x<=s)\n\t\t\t\t\tprintf(\"%d\\n\",last);\n\t\t\t\telse puts(\"-1\");\n\t\t\t}\n\t\t\telse{\n\t\t\t\tint res=-1;\n\t\t\t\tif(k >= 100 && x%k == 0)\n\t\t\t\t\tfor(int i=k;i<=s-x;i+=k)\n\t\t\t\t\t\tif(vis[i])\n\t\t\t\t\t\t\tres=max(res,x^i);\n\t\t\t\tif(k < 100 && x%k == 0)\n\t\t\t\t\tfor(int i=s;i>=0;--i){\n\t\t\t\t\t\tint v=x^i;\n\t\t\t\t\t\tif(vis[v] && v%k == 0 && x+v <= s){\n\t\t\t\t\t\t\tres=i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tif(res >= 0) res^=x;\n\t\t\t\tif(cnt > 1) printf(\"%d\\n\",res);\n\t\t\t}\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1629510015,
        "uid": 214654,
        "name": "NatsumeHikaru",
        "ccfLevel": 0,
        "title": "\u3010CF979D\u3011Kuro and GCD and XOR and SUM\u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "\u501f\u9274\u4e86[\u5927\u4f6c](https://blog.csdn.net/riba2534/article/details/80344026)\n\n\u5148\u8bb2\u4e00\u4e0b2\u64cd\u4f5c\u7684\u610f\u601d\uff1a\n\nx k s\uff1a\u4ece\u5f53\u524d\u96c6\u5408\u4e2d\u627e\u51fa\u4e00\u4e2a\u6700\u5927\u7684v\uff0c\u4f7f\u5f97:\n\n\u2460v + x \u2264 s  \u5373 v \u2264 s - x\n       \n\u2461k | gcd ( v , x)  \u5373 x \u662f k \u7684\u500d\u6570 \uff08\u82e5 x \u4e0d\u662f k \u7684\u500d\u6570 => \u76f4\u63a5\u8f93\u51fa \u201c-1\u201d\uff09\u4e14 v \u662f k \u7684\u500d\u6570\n       \n\u2462x xor v\u6700\u5927 \n\n\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4ece\u96c6\u5408\u4e2d\u627e\u51fa \u2264 s - x \u4e14\u4e3a k \u7684\u500d\u6570\u7684\u6570\uff0c\u518d\u6765\u5224\u65ad\u6700\u5927\u7684\u5f02\u6216\u548c\u3002\n\n\u7528 set \u9884\u5904\u7406\u4e00\u4e0b\u52a0\u5165\u5230\u96c6\u5408\u7684\u6570u\uff0c\u8bb0\u5f55 u \u7684\u5404\u4e2a\u56e0\u5b50\u3002\n\n\u518d\u52a0\u5165\u4e00\u4e9b\u4f18\u5316\uff08\u770b\u4ee3\u7801\uff09\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int N = 100000+5;\nint Q;\nset<int>s[N]; \nint main() {\n\tscanf(\"%d\", &Q);\n\twhile (Q--) {\n\t\tint t; scanf(\"%d\", &t);\n\t\tif (t == 1) {\n\t\t\tint u; scanf(\"%d\", &u);//\u7528 set \u9884\u5904\u7406\u4e00\u4e0b\u52a0\u5165\u5230\u96c6\u5408\u7684\u6570u\uff0c\u8bb0\u5f55 u \u7684\u5404\u4e2a\u56e0\u5b50\u3002 \n\t\t\tfor (int i = 1; i <= (int)sqrt(u); i ++ ) \n\t\t\t\tif (u % i == 0) s[i].insert(u), s[u/i].insert(u);\n\t\t}\n\t\telse {\n\t\t\tint x, k, ss, ans = -1, maxn = -1; scanf(\"%d%d%d\", &x, &k, &ss);\n\t\t\tif (x % k) {printf(\"-1\\n\"); continue;} //\u82e5 x \u4e0d\u662f k \u7684\u500d\u6570 => \u76f4\u63a5\u8f93\u51fa \u201c-1\u201d \n\t\t\tset<int>::iterator it = s[k].upper_bound(ss - x);//\u627e\u5230 > x\u7684\u5143\u7d20\u4e2d\u6700\u5c0f\u7684\u4e00\u4e2a \n\t\t\tif(s[k].empty() || it == s[k].begin()) {printf(\"-1\\n\"); continue;} //\u5982\u679c\u627e\u4e0d\u5230 => \u524d\u4e24\u4e2a\u6761\u4ef6\u4e0d\u7b26\u5408 => \u76f4\u63a5\u8f93\u51fa \u201c-1\u201d \n\t\t\t--it;\n\t\t\tfor (; it != s[k].begin(); --it) { \n\t\t\t\tint v = *it;\n\t\t\t\tif (maxn > x + v) break;//v xor x \u6700\u5927\u7684\u7ed3\u679c\u5c31\u662f x + v\uff0c\u53c8 v \u5728\u9012\u51cf \n\t\t\t\tif (maxn < (v ^ x)) maxn = v ^ x, ans = v;//\u627e\u51fa\u6700\u5927\u7684\u5f02\u6216\u503c \n\t\t\t}\n\t\t\tif (maxn < (*it ^ x)) ans = *it;//\u5224\u65ads[k].begin() \n\t\t\tprintf(\"%d\\n\", ans);\n\t\t}\n\t}\n\treturn 0;\n}\n\n```\n\n",
        "postTime": 1564646888,
        "uid": 108379,
        "name": "FadedAW",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF979D \u3010Kuro and GCD and XOR and SUM\u3011"
    }
]
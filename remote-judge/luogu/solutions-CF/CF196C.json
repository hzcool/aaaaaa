[
    {
        "content": "\n### Description\n\n\u7ed9\u5b9a\u4e00\u68f5 $n$ \u4e2a\u70b9\u7684\u65e0\u6839\u6811\u548c\u5e73\u9762\u4e0a\u7684 $n$ \u4e2a\u70b9\uff0c\u6c42\u51fa\u4efb\u610f\u4e00\u4e2a\u6620\u5c04\u4f7f\u5f97\u8fd9\u4e9b\u70b9\u80fd\u591f\u4e00\u4e00\u5bf9\u5e94\uff0c\u540c\u65f6\u9664\u4e86\u5728\u9876\u70b9\u5904\u4e0d\u5141\u8bb8\u7ebf\u6bb5\u4ea4\u53c9\u3002\n\n\u9898\u76ee\u4fdd\u8bc1\u4e0d\u5b58\u5728\u4e09\u70b9\u5171\u7ebf\u3002\n\n### Solution\n\n\u89c2\u5bdf\u9898\u76ee\u53d1\u73b0\uff0c\u5982\u679c\u9700\u8981\u8ba9\u5e73\u9762\u4e0a\u7684\u8fde\u8fb9\u4e0d\u76f8\u4ea4\uff0c\u90a3\u4e48\u65e0\u6839\u6811\u4e0a\u4e00\u68f5\u5b50\u6811\u5bf9\u5e94\u7684\u5750\u6807\u533a\u95f4\u90fd\u4e0d\u80fd\u4e0e\u5176\u4ed6\u5b50\u6811\u5bf9\u5e94\u7684\u5750\u6807\u533a\u95f4\u76f8\u4ea4\uff0c\u53ef\u4ee5\u8003\u8651\u8f6c\u5316\u4e3a\u5bf9\u4e8e\u6bcf\u68f5\u5b50\u6811\u5206\u914d\u5408\u6cd5\u7684\u70b9\u6765\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u7531\u4e8e\u4e0d\u5b58\u5728\u4e09\u70b9\u5171\u7ebf\uff0c\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5229\u7528\u6781\u89d2\u6392\u5e8f\u7684\u6027\u8d28\u5206\u6cbb\u89e3\u51b3\u95ee\u9898\u3002\n\n\u6bcf\u6b21\u5206\u6cbb\u5230\u4e00\u4e2a\u5b50\u6811\u5bf9\u5e94\u7684\u5750\u6807\u533a\u95f4\uff0c\u628a\u533a\u95f4\u8303\u56f4\u5185\u5de6\u4e0b\u89d2\u7684\u70b9\u4f5c\u4e3a\u5b50\u6811\u7684\u6839\u5bf9\u5e94\u7684\u70b9\uff0c\u4ee5\u6b64\u4e3a\u57fa\u51c6\u5bf9\u5269\u4e0b\u7684\u70b9\u6781\u89d2\u6392\u5e8f\u3002\u5bf9\u4e8e\u4e00\u4e2a\u70b9\u7684\u513f\u5b50\uff0c\u5219\u5728\u533a\u95f4\u5185\u5212\u5206\u4e00\u6bb5\u5927\u5c0f\u4e3a\u5176\u5b50\u6811\u5927\u5c0f\u7684\u5b50\u533a\u95f4\u8fdb\u884c\u9012\u5f52\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u68f5\u5b50\u6811\u76f4\u63a5\u5206\u914d\u5176\u5b50\u6811\u5927\u5c0f\u4e2a\u70b9\u3002\n\n\u9898\u76ee\u4fdd\u8bc1\u4e0d\u5b58\u5728\u4e09\u70b9\u5171\u7ebf\uff0c\u56e0\u6b64\u89e3\u4e00\u5b9a\u5b58\u5728\u3002\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n^2 \\log n)$\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ninline int read()\n{\n    int x=0,f=1,c=getchar();\n    while(c<48) c=='-'&&(f=-1),c=getchar();\n    while(c>47) x=x*10+c-'0',c=getchar();\n    return x*f;\n}\n\ntypedef long long ll;\nconst int MAXN = 2005;\nstruct Point {ll x,y,id;} p[MAXN],tmp;\nstd::vector<int> G[MAXN];\nll size[MAXN],ans[MAXN];\nll n;\n\ninline void addedge(int u,int v)\n{\n    G[u].push_back(v);\n    G[v].push_back(u);\n}\n\ninline bool cmp(Point a,Point b)\n{\n    ll ax=a.x-tmp.x,ay=a.y-tmp.y;\n    ll bx=b.x-tmp.x,by=b.y-tmp.y;\n    if(ax>=0 && bx<=0) return 1;\n    if(ax<=0 && bx>=0) return 0;\n    return ax*by>ay*bx;\n}\n\nvoid dfs(int x,int fa)\n{\n    size[x]=1;\n    for(int &y : G[x])\n    {\n        if(y==fa) continue;\n        dfs(y,x); size[x]+=size[y];\n    }\n}\n\nvoid sol(ll l,ll r,ll x,ll fa)\n{\n    ll cur=l;\n    for(ll i=l+1; i<=r; i++)\n        if(p[i].x<p[cur].x||\n                (p[i].x==p[cur].x&&p[i].y<p[cur].y))cur=i;\n    swap(p[l],p[cur]);\n    tmp=p[l]; ans[p[l].id]=x;\n    sort(p+l+1,p+r+1,cmp);\n    ll now=l+1;\n    for(int &y : G[x])\n    {\n        if(y==fa) continue;\n        sol(now,now+size[y]-1,y,x);\n        now+=size[y];\n    }\n}\n\nint main(int argc, char const *argv[])\n{\n    n=read();\n    for(int i=1; i<n; ++i)\n        addedge(read(),read());\n    ll x,y,w;\n    for(int i=1; i<=n; ++i)\n    {\n        x=read(); y=read();\n        p[i]=(Point) {x,y,i};\n    }\n    dfs(1,0); sol(1,n,1,0);\n    for(ll i=1; i<=n; i++)\n        printf(\"%lld%c\",ans[i],\" \\n\"[i==n]);\n    return 0;\n}\n```\n\n\n\n",
        "postTime": 1593950747,
        "uid": 107735,
        "name": "shiroi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF196C \u3010Paint Tree\u3011"
    },
    {
        "content": "### $\\text{Difficulty : 2200}$\n---\n\u5b66\u4e86\u6781\u5750\u6807\u7cfb\u4e4b\u540e\u6216\u8bb8\u4f1a\u66f4\u5bb9\u6613\u60f3\u5230\uff1f\n\n---\n### \u89e3\u9898\u601d\u8def\uff1a\n\n\u9996\u5148\u5904\u7406\u4e00\u4e0b\u7ed9\u51fa\u7684\u6811\uff0c\u4efb\u9009\u4e00\u4e2a\u70b9\u4f5c\u4e3a\u6839\u8282\u70b9\uff0c\u7136\u540e\u8fdb\u884c\u4e00\u4e2a $\\text{DFS}$\uff0c\u8ba1\u7b97\u51fa\u4ee5\u67d0\u4e00\u4e2a\u70b9\u4e3a\u6839\u7684\u5b50\u6811\u5927\u5c0f\u3002\n\n\u7136\u540e\u8003\u8651\u5206\u6cbb\uff0c\u5c06\u4e00\u4e9b\u70b9\u5212\u5206\u7ed9\u6811\u4e0a\u7684\u4e00\u4e2a\u5b50\u6811\u8fdb\u884c\u5206\u914d\u3002\u627e\u51fa\u6700\u5de6\u8fb9\u7684\u4e00\u4e2a\u70b9\u4f5c\u4e3a\u6839\u8282\u70b9\uff0c\u7136\u540e\u5c06\u533a\u95f4\u5185\u7684\u6240\u6709\u70b9\u6309\u7167\u6781\u89d2\u6392\u5e8f\u3002\u6309\u7167\u987a\u5e8f\u4f9d\u6b21\u5212\u5206\u7ed9\u5404\u4e2a\u5b50\u6811\u9012\u5f52\u4e0b\u53bb\u5373\u53ef\u3002\n\n---\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<algorithm>\nusing namespace std;\n#define int long long\nconst int MAXN=3005;\nstruct str{\n\tint x,y,id;\n}p[MAXN],tmp;\nint n,head[MAXN],nxt[MAXN],num[MAXN],tot,u,v,size[MAXN],cur,ans[MAXN];\nbool cmd(str a,str b){\n\tint ax=a.x-tmp.x;\n\tint ay=a.y-tmp.y;\n\t\n\tint bx=b.x-tmp.x;\n\tint by=b.y-tmp.y;\n\t\n\treturn ax*by>ay*bx;\n}\nvoid add(int x,int y){\n\tnxt[++tot]=head[x];\n\thead[x]=tot;\n\tnum[tot]=y;\n}\nvoid dfs(int now,int fa){\n\tfor(int i=head[now];i;i=nxt[i]){\n\t\tif(num[i]!=fa){\n\t\t\tdfs(num[i],now);\n\t\t\tsize[now]+=size[num[i]];\n\t\t}\n\t}\n\tsize[now]++;\n\treturn;\n}\nvoid work(int now,int l,int r,int fa){\n\tcur=l;\n\tfor(int i=l+1;i<=r;i++){\n\t\tif(p[i].x<p[cur].x)\n\t\tswap(p[i],p[cur]);\n\t\telse \n\t\tif(p[i].y<p[cur].y&&p[i].x==p[cur].x)swap(p[i],p[cur]);\n\t}\n\ttmp=p[cur];\n\tsort(p+l+1,p+r+1,cmd);\n\tans[p[cur].id]=now;\n\tint x=cur+1;\n\tfor(int i=head[now];i;i=nxt[i]){\n\t\tif(num[i]==fa)continue;\n\t\twork(num[i],x,x+size[num[i]]-1,now);\n\t\tx+=size[num[i]];\n\t}\n}\nsigned main(){\n\tscanf(\"%I64d\",&n);\n\tfor(int i=1;i<n;i++){\n\t\tscanf(\"%I64d%I64d\",&u,&v);\n\t\tadd(u,v);add(v,u);\n\t}\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%I64d%I64d\",&p[i].x,&p[i].y);\n\t\tp[i].id=i;\n\t}\n\tdfs(1,1);\n\twork(1,1,n,1);\n\tfor(int i=1;i<=n;i++)\n\tprintf(\"%I64d \",ans[i]);\n\tprintf(\"\\n\");\n\treturn 0;\n}\n```\n",
        "postTime": 1648823755,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "CF196C Paint Tree \u9898\u89e3"
    }
]
[
    {
        "content": "# CF1536D\n\n> \u9898\u610f:\u521d\u59cb\u7ed9\u51fa\u957f\u5ea6\u4e3a$n$\u7684\u5e8f\u5217$a$,\u6c42\u662f\u5426\u5b58\u5728\u957f\u5ea6\u4e3a$2n-1$\u7684\u5e8f\u5217$b$,\u6ee1\u8db3$\\forall i\\in[1,n],b_{1\\sim 2i-1}$\u7684\u4e2d\u4f4d\u6570\u4e3a$a_i$\n>\n> $1\\leq T \\leq 10^4,\\Sigma n\\leq 2\\times 10^5,|a_i|\\leq 10^9$\n\n\u53ef\u4ee5\u77e5\u9053\uff0c\u5f53$i$\u53d8\u4e3a$i+1$\u65f6\uff0c\u76f8\u5f53\u4e8e\u5411$b$\u4e2d\u52a0\u51652\u4e2a\u5143\u7d20(i=0\u65f6\u9664\u5916)\uff0c\u800c\u8fd9\u6837\u53ea\u4f1a\u8ba9\u4e2d\u4f4d\u6570\u5728\u6392\u5e8f\u540e\u7684$b$\u4e2d\u79fb\u52a8\u81f3\u591a\u4e00\u4f4d\n\n\u4f8b\u5982:$\\{1,\\underline 3,5\\}+(4,6)\\rightarrow \\{1,3,\\underline 4,5,6\\}$,\u4f4d\u7f6e\u4ece$'3'$\u79fb\u52a8\u5230$'4'$\u79fb\u52a81\u4f4d\n\n\u6240\u4ee5\u5982\u679c**\u539f**$b$\u4e2d\u5b58\u5728\u6211\u4eec\u60f3\u8981\u6210\u4e3a\u4e2d\u4f4d\u6570\u7684$a_i$,\u5219\u4ed6\u4eec\u5728$b$\u4e2d\u7684\u8ddd\u79bb\u4e0d\u80fd\u8d85\u8fc7$1$,\u6b64\u65f6\u6211\u4eec\u52a0\u5165\u4e24\u4e2a$\\pm\\infty$\u4f7f\u4e2d\u4f4d\u6570\u79fb\u52a8\n\n\u82e5$a_i=a_{i-1}$,\u5219\u52a0\u5165\u4e00\u4e2a$+\\infty$\u4e00\u4e2a$-\\infty$,\u4f7f\u4e2d\u4f4d\u6570\u4e0d\u53d8\n\n\u5982\u679c\u539fb\u4e2d\u5b58\u5728\u6211\u4eec\u60f3\u8981\u6210\u4e3a\u4e2d\u4f4d\u6570\u7684$a_i$,\u5219\u4e0d\u80fd\u5b58\u5728\u5143\u7d20$a_{i-1}<b_x<a_i$,\u6b64\u65f6\u52a0\u5165\u4e00\u4e2a$\\pm\\infty$\u548c$a_i$\u4f7f\u4e2d\u4f4d\u6570\u53d8\u4e3a$a_i$\n\n\u4e3a\u4ec0\u4e48\u52a0\u5165$\\pm \\infty$\n\n\u8d2a\u5fc3\u5730\u60f3\uff0c\u6700\u7406\u60f3\u7684\u60c5\u51b5\u4fbf\u662f\u4e0d\u5b58\u5728\u975e$a$\u4e2d\u7684\u5143\u7d20\u6321\u5728$a_{i-1}$\u548c$a_i$\u4e4b\u95f4\uff0c\u800c\u4e3a$\\pm \\infty$\u65f6\u5219\u6ee1\u8db3\u8fd9\u4e2a\u6761\u4ef6\n\n\u8fd9\u6837\u8fd9\u9053\u9898\u5c31\u6210\u4e86\u4e2a\u6a21\u62df\u9898\uff0c\u5982\u679c\u4f7f\u7528$\\tt set$\u65f6\u95f4\u590d\u6742\u5ea6$O(n\\log n)$,\u4f7f\u7528\u94fe\u8868\u65f6\u95f4\u590d\u6742\u5ea6$O(n)$\n\n```cpp\n//link sum:864ms largest:31ms\n#include<bits/stdc++.h>\nusing namespace std;\n# define ll long long\n# define read read1<ll>()\n# define Type template<typename T>\nType T read1(){\n\tT t=0;\n\tchar k;\n\tbool vis=0;\n\tdo (k=getchar())=='-'&&(vis=1);while('0'>k||k>'9');\n\twhile('0'<=k&&k<='9')t=(t<<3)+(t<<1)+(k^'0'),k=getchar();\n\treturn vis?-t:t;\n}\n# define fre(k) freopen(k\".in\",\"r\",stdin);freopen(k\".out\",\"w\",stdout)\nstruct node{\n\tnode *l,*r;\n\tint v;\n\tnode(int _v=0){l=r=NULL;v=_v;}\n}*x,*a=new node[200000];\nint main(){\n\tfor(int T=read;T--;){\n\t\tint s=read;bool vis=1;\n\t\tx=new node(read);\n\t\tfor(int i=2;i<=s;++i){\n\t\t\tint g=read;\n\t\t\tif(x->v==g)continue;\n\t\t\tif(x->v<g)\n\t\t\t\tif(x->r&&x->r->v<g){vis=0;while(++i<=s)read;break;}\n\t\t\t\telse\n\t\t\t\t\tif(x->r)\n\t\t\t\t\t\tif(x->r->v!=g){\n\t\t\t\t\t\t\tnode *t=a++;t->v=g;\n\t\t\t\t\t\t\tt->l=x;t->r=x->r;\n\t\t\t\t\t\t\tx->r->l=t;x->r=t;x=t;\n\t\t\t\t\t\t}else x=x->r;\n\t\t\t\t\telse{\n\t\t\t\t\t\tnode *t=a++;t->v=g;\n\t\t\t\t\t\tt->l=x;x->r=t;x=t;\n\t\t\t\t\t}\n\t\t\telse\n\t\t\t\tif(x->l&&x->l->v>g){vis=0;while(++i<=s)read;break;}\n\t\t\t\telse\n\t\t\t\t\tif(x->l)\n\t\t\t\t\t\tif(x->l->v!=g){\n\t\t\t\t\t\t\tnode *t=a++;t->v=g;\n\t\t\t\t\t\t\tt->r=x;t->l=x->l;\n\t\t\t\t\t\t\tx->l->r=t;x->l=t;x=t;\n\t\t\t\t\t\t}else x=x->l;\n\t\t\t\t\telse{\n\t\t\t\t\t\tnode *t=a++;t->v=g;\n\t\t\t\t\t\tt->r=x;x->l=t;x=t;\n\t\t\t\t\t}\n\t\t}puts(vis?\"YES\":\"NO\");\n\t}\n\treturn 0;\n}\n```\n\n```cpp\n//set sum:? largest:78ms\n#include<bits/stdc++.h>\nusing namespace std;\n# define ll long long\n# define read read1<ll>()\n# define Type template<typename T>\nType T read1(){\n\tT t=0;\n\tchar k;\n\tbool vis=0;\n\tdo (k=getchar())=='-'&&(vis=1);while('0'>k||k>'9');\n\twhile('0'<=k&&k<='9')t=(t<<3)+(t<<1)+(k^'0'),k=getchar();\n\treturn vis?-t:t;\n}\n# define fre(k) freopen(k\".in\",\"r\",stdin);freopen(k\".out\",\"w\",stdout)\nint s;\nset<int>se;\nint main(){\n\tfor(int T=read;T--;){\n\t\ts=read;se.clear();\n\t\tauto w=se.begin();\n\t\tbool vis=1;\n\t\tfor(int i=1;i<=s;++i){\n\t\t\tint x=read;\n\t\t\tif(i==1){se.insert(x);w=se.begin();continue;}\n\t\t\tif(x==*w)continue;\n\t\t\tif(x>*w){++w;\n\t\t\t\tif(w==se.end()||*w>=x)se.insert(x),w=se.lower_bound(x);\n\t\t\t\telse{vis=0;while(++i<=s)read;break;} \n\t\t\t}else\n\t\t\t\tif(w==se.begin()||*--w<=x)se.insert(x),w=se.lower_bound(x);\n\t\t\t\telse{vis=0;while(++i<=s)read;break;} \n\t\t}puts(vis?\"YES\":\"NO\");\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1623492943,
        "uid": 108067,
        "name": "\u4e1b\u96e8",
        "ccfLevel": 0,
        "title": "CF1536D Omkar and Medians"
    },
    {
        "content": "\u672c\u6587\u540c\u6b65\u53d1\u8868\u4e8e\u4e2a\u4eba\u535a\u5ba2\uff1a[Link](https://www.watertomato.com/cf1536d-omkar-and-medians-%e9%a2%98%e8%a7%a3/)\u3002\n\n## \u9898\u610f\n\n[\u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/CF1536D)\u3002\n\n\u8bb0 $b_i$ \u4e3a $a_1 \\sim a_{2i-1}$ \u7684\u4e2d\u4f4d\u6570\uff0c\u7ed9\u5b9a\u5e8f\u5217 $b$\uff0c\u8be2\u95ee\u662f\u5426\u5b58\u5728\u5408\u6cd5\u7684\u5e8f\u5217 $a$\u3002\n\n## \u89e3\u6790\n\n\u8003\u8651 $b_i$ \u548c $b_{i-1}$ \u7684\u5173\u7cfb\u3002\u6211\u4eec\u5148\u5047\u8bbe $b_1 \\sim b_{i-1}$ \u5747\u5408\u6cd5\u3002\n\n- \u82e5 $b_{i-1}=b_i$\uff0c\u5219\u65b0\u589e\u7684\u4e24\u4e2a\u6570\u53ea\u9700\u4e00\u5927\u4e00\u5c0f\u5730\u53d6\u5373\u53ef\uff0c$b_i$ \u4e5f\u4e00\u5b9a\u5408\u6cd5\u3002\n- \u82e5 $b_{i-1}<b_i$\uff0c\u56e0\u4e3a $b_{i-1}$ \u662f $2i-3$ \u4e2a\u6570\u7684\u4e2d\u4f4d\u6570\uff0c\u6240\u4ee5\u5e8f\u5217\u4e2d\u4e00\u5b9a\u6709 $i-1$ \u4e2a\u6570\u6bd4 $b_i$ \u5c0f\u3002\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a $b_j(j<i-1)$ \uff0c\u5982\u679c\u5176\u6ee1\u8db3 $b_j \\le b_{i-1}$\uff0c\u5219\u5b83\u53ef\u4ee5\u4f5c\u4e3a\u8fd9 $i-1$ \u4e2a\u6570\u4e2d\u7684\u4e00\u4e2a\u6570\uff0c\u4e0d\u5f71\u54cd\u7ed3\u679c\u3002\u82e5\u5176\u6ee1\u8db3 $b_{i-1} < b_j < b_i$\uff0c\u5219\u6b64\u65f6\u6211\u4eec\u53d1\u73b0\u5e8f\u5217\u4e2d\u81f3\u5c11\u6709 $i$ \u4e2a\u6570\u6bd4 $b_i$ \u5c0f\uff0c\u8fd9\u5c31\u662f\u4e0d\u5408\u6cd5\u7684\u3002\n- \u82e5 $b_{i-1}>b_i$\uff0c\u540c\u7406\u5bfb\u627e\u6709\u65e0\u4e00\u4e2a $b_j$ \u6ee1\u8db3 $b_{i-1}>b_j>b_i$ \u5373\u53ef\u3002\n\n\u6211\u4eec\u53d1\u73b0\u6240\u6709\u76f8\u540c\u7684\u6570\u51fa\u73b0\u4e00\u6b21\u548c\u51fa\u73b0\u591a\u6b21\u5728\u7edf\u8ba1\u7b54\u6848\u65f6\u6ca1\u6709\u533a\u522b\uff0c\u56e0\u4e3a\u53ef\u4ee5\u7b80\u5355\u5730\u4f7f\u7528\u4e00\u4e2a set \u7ef4\u62a4\uff0c\u6bcf\u6b21\u67e5\u8be2\u65f6\uff1a\n\n- \u82e5 $b_{i-1}<b_i$\uff0c\u67e5\u8be2 $b_{i-1}$ \u7684\u540e\u7ee7\u662f\u5426\u4e3a $b_i$\uff0c\u82e5\u4e0d\u662f\u5219\u4e0d\u5b58\u5728\u5408\u6cd5\u5e8f\u5217 $a$\u3002\n- \u82e5 $b_{i-1}>b_i$\uff0c\u67e5\u8be2 $b_i$ \u7684\u540e\u7ee7\u662f\u5426\u4e3a $b_{i-1}$\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N=2e5+5;\nint T,n;\nint b[N];\nset<int> s;\nint main(){\n\tscanf(\"%d\",&T);\n\twhile(T--){\n\t\tbool fl=1;\n\t\ts.clear();\n\t\tscanf(\"%d\",&n);\n\t\tfor(int i=1;i<=n;i++){\n\t\t\tscanf(\"%d\",&b[i]);\n\t\t\tif(!s.count(b[i])) s.insert(b[i]);//\u76f8\u540c\u7684\u6570\u65e0\u610f\u4e49\uff0c\u76f4\u63a5\u4e0d\u52a0\u5165 set \u5373\u53ef\u3002\n\t\t\tif(b[i]==b[i-1]) continue;\n\t\t\tif(b[i-1]<b[i]){\n\t\t\t\tif(s.upper_bound(b[i-1])!=s.find(b[i])){\n\t\t\t\t\tfl=0;//\u82e5 b[i-1] \u7684\u540e\u7ee7\u4e0d\u4e3a b[i]\uff0c\u5c31\u4e0d\u5408\u6cd5\u3002\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(s.upper_bound(b[i])!=s.find(b[i-1])){\n\t\t\t\t\tfl=0;//\u540c\u7406\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(fl){\n\t\t\tprintf(\"YES\\n\");\n\t\t}\n\t\telse{\n\t\t\tprintf(\"NO\\n\");\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1623147998,
        "uid": 195229,
        "name": "water_tomato",
        "ccfLevel": 7,
        "title": "CF1536D Omkar and Medians \u9898\u89e3"
    }
]
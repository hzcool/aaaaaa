[
    {
        "content": "\u5148\u6446\u7ed3\u8bba\uff1a\u4e00\u76f4\u7ef4\u62a4\u73b0\u5728\u7684\u53ef\u884c\u8f6c\u79fb\u6bcf\u6b21\u968f\u4fbf\u62ce\u51fa\u6765\u4e00\u4e2a\u8f6c\u79fb\u4e00\u5b9a\u53ef\u4ee5\u8f6c\u79fb\u5b8c\u6240\u6709\u64cd\u4f5c\u3002\n\n\u8bc1\u660e\u5982\u4e0b\uff1a\uff08\u611f\u8c22 Codeforces \u725b\u4eba [VastoLorde95](http://codeforces.com/profile/VastoLorde95) [\u63d0\u4f9b\u60f3\u6cd5](http://codeforces.com/blog/entry/19518?#comment-245502)\uff09\n\n\n> \u8003\u8651\u6700 naive \u7684\u8f6c\u79fb\u96c6\u5408\uff1a\u6bcf\u4e00\u4e2a\u8f6c\u79fb\u7684\u5f62\u5f0f\u5747\u4e3a `A -> A,A` \u4e14\u6bcf\u4e2a\u76f8\u540c\u7684\u8f6c\u79fb\u5747\u51fa\u73b0\u56db\u6b21\u3002\u663e\u800c\u6613\u89c1\u6b64\u65f6\u6709\u89e3\u4e14\u4ee5\u4efb\u4f55\u987a\u5e8f\u6267\u884c\u7686\u53ef\u3002    \n\u8003\u8651\u5c06\u4efb\u4f55\u4e00\u4e2a\u53ef\u884c\u89e3\u4e2d\u67d0\u4e2a `A -> X,A` \u7684\u7b2c\u4e8c\u4e2a `A` \u8f6c\u5316\u4e3a `Y`\uff08\u5373\u6539\u4e3a `A -> X,Y`\uff09\uff0c\u663e\u7136\u6b64\u65f6 `Y` \u6700\u540e\u4f1a\u5269\u4f59 $9$ \u4e2a\u4e14 `A` \u4f1a\u5269\u4f59 $7$ \u4e2a\uff0c\u90a3\u4e48\u4e3a\u4e86\u4f7f `Y` \u4e2d\u6700\u7ec8\u5269\u4f59 $8$ \u4e2a\uff0c\u6211\u4eec\u5fc5\u987b\u5c06\u67d0\u4e2a `Y -> Y,N` \u6539\u4e3a `Y -> M,N`\uff0c\u5219\u6b64\u65f6 `M` \u6700\u540e\u4f1a\u5269\u4f59 $9$ \u4e2a\uff0c\u4ee5\u6b64\u7c7b\u63a8\u6700\u7ec8\u4e00\u5b9a\u4f1a\u5c06\u67d0\u4e2a `Z -> Z,B` \u6539\u4e3a `Z -> A,B` \uff08\u7531\u4e8e\u53ea\u6709\u8f6c\u79fb\u5230 `A` \u624d\u80fd\u4f7f\u6240\u6709\u5269\u4f59\u7684\u5747\u4e3a $8$ \u4e2a\u800c\u505c\u6b62\u8f6c\u79fb\uff09\uff0c\u90a3\u4e48\u663e\u7136\u5982\u679c\u5148\u6267\u884c\u6240\u6709\u672c\u6b21\u64cd\u4f5c\u6539\u53d8\u8f6c\u79fb\u7684\u7136\u540e\u518d\u6267\u884c\u8fd9\u6b21\u64cd\u4f5c\u6ca1\u6709\u6539\u53d8\u7684\u8f6c\u79fb\u4ecd\u7136\u53ef\u4ee5\u5b8c\u6210\u6240\u6709\u8f6c\u79fb\u3002  \n\u6613\u8bc1\u901a\u8fc7\u6709\u9650\u6b21\u7684\u4e0a\u8ff0\u8f6c\u79fb\u53ef\u4ee5\u5c06\u57fa\u672c\u60c5\u51b5\u8f6c\u79fb\u4e3a\u4efb\u4f55\u7b26\u5408\u9898\u610f\uff08\u4e5f\u5c31\u662f\u53ef\u80fd\u51fa\u73b0\uff09\u7684\u60c5\u51b5\uff0c\u6545\u6240\u6709\u7b26\u5408\u9898\u610f\u53ef\u80fd\u51fa\u73b0\u7684\u60c5\u51b5\u5747\u6709\u89e3\u4e14\u4efb\u610f\u8f6c\u79fb\u7686\u53ef\u3002\n\n\uff08\u5b9e\u9645\u5b9e\u73b0\u4e2d\u4e3a\u4e86\u5b9e\u73b0\u7b80\u5355\u91c7\u7528\u4e86\u5012\u63a8\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5982\u679c\u76f4\u63a5\u6a21\u62df\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e24\u4e2a\u8d85\u8fc7 $9$\uff09\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <cstdio>\n#include <unordered_set>\n#define set std::unordered_set\n#define N 30010\nint n,top;\nint a[N*4],b[N*4],c[N*4];\nbool vis[N*4];\nint ans[N*4];\nint f[N];\nset<int> usable[N];\nvoid fix(int o)\n{\n\t//\u4e4c\u62c9\uff01\uff01\uff01\n\tint WuLa=*usable[o].begin();\n\tusable[o].erase(usable[o].begin());\n\tf[b[WuLa]]--,f[c[WuLa]]--,f[a[WuLa]]++;\n\tvis[WuLa]=true;\n\tans[top++]=WuLa;\n\tusable[b[WuLa]].erase(WuLa);\n\tusable[c[WuLa]].erase(WuLa);\n\tif(f[a[WuLa]]==9) fix(a[WuLa]);\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tconst int left=n*4;\n\tfor(int i=0;i<left;i++) scanf(\"%d%d%d\",a+i,b+i,c+i);\n\tfor(int i=0;i<left;i++)\n\t{\n\t\t//\u53ef\u4ee5\u7528\u6765\u201c\u51cf\u5c0f\u201d\u503c\u7684 \n\t\tusable[b[i]].insert(i);\n\t\tusable[c[i]].insert(i);\n\t}\n\tfor(int i=1;i<=n;i++) f[i]=8;\n\t//\u4ece\u672b\u5c3e\u5f00\u59cb\u8fd8\u539f\n\ttop=0; \n\tfor(int i=0;i<left;i++)\n\t{\n\t\tif(vis[i]) continue;\n\t\t//\u8fd8\u539f\u64cd\u4f5c\n\t\tf[b[i]]--,f[c[i]]--,f[a[i]]++;\n\t\tvis[i]=true;\n\t\tans[top++]=i;\n\t\tusable[b[i]].erase(i);\n\t\tusable[c[i]].erase(i);\n\t\tif(f[a[i]]==9) fix(a[i]);\n\t}\n\tputs(\"YES\");\n\tfor(int i=top-1;i>=0;i--) printf(\"%d \",ans[i]+1);\n}\n```",
        "postTime": 1636641310,
        "uid": 298051,
        "name": "xkcdjerry",
        "ccfLevel": 7,
        "title": "CF566B \u9898\u89e3"
    }
]
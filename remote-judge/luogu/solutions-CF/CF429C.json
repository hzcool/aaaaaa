[
    {
        "content": "\n\u66f4\u6728\u68d2\u7684\u9605\u8bfb\u4f53\u9a8c $\\to$ [`George1123`](https://www.cnblogs.com/George1123/p/13864073.html)\n\n---\n\n## \u9898\u9762\n\n> [CF429C Guess the Tree](https://www.luogu.com.cn/problem/CF429C)\n\n> \u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6570\u7ec4 $a_i$\uff0c\u95ee\u662f\u5426\u6709\u4e00\u68f5\u6811\uff0c\u6bcf\u4e2a\u8282\u70b9\u8981\u4e48\u662f\u53f6\u5b50\u8981\u4e48\u81f3\u5c11\u6709\u4e24\u4e2a\u513f\u5b50\uff0c\u800c\u4e14 $i$ \u53f7\u70b9\u7684\u5b50\u6811\u5927\u5c0f\u662f $a_i$\u3002\n\n> \u6570\u636e\u8303\u56f4\uff1a$1\\le n\\le 24$\u3002\n\n---\n\n## \u9898\u89e3\n\n\u53d1\u73b0 $n$ \u5f88\u5c0f\uff0c\u60f3\u5230\u53ef\u4ee5\u72b6\u538b\u3002\n\n\u8bbe\u53f6\u5b50\u8282\u70b9\u6709 $ln$ \u4e2a\uff0c\u6240\u4ee5\u4e2d\u95f4\u8282\u70b9\u6709 $mn=n-ln$ \u4e2a\u3002\n\n\u7531\u4e8e\u201c\u6bcf\u4e2a\u8282\u70b9\u8981\u4e48\u662f\u53f6\u5b50\u8981\u4e48\u81f3\u5c11\u6709\u4e24\u4e2a\u513f\u5b50\u201d\uff0c\u6240\u4ee5 $ln\\ge\\lceil\\frac n2\\rceil$\uff0c$mn\\le n-\\lceil\\frac n2\\rceil \\le 11$\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u5148\u7279\u5224 $2mn\\ge n$ \u7684\u60c5\u51b5\u7b54\u6848\u4e3a `NO`\u3002\n\n\u7136\u540e\u5269\u4e0b\u7684\u53ef\u4ee5 `dp`\uff0c**\u8bbe $f_{t,s,i}$\uff1a**\n\n$t$ \u8868\u793a\u662f\u4e00\u68f5\u68ee\u6797\u8fd8\u662f\u4e00\u4e2a\u5b50\u6811\uff08\u4e3a\u4e86\u5bf9\u4ed8\u201c\u6bcf\u4e2a\u8282\u70b9\u8981\u4e48\u662f\u53f6\u5b50\u8981\u4e48\u81f3\u5c11\u6709\u4e24\u4e2a\u513f\u5b50\u201d\uff0c\u5982\u679c\u662f\u5b50\u6811 $t=0$\uff0c\u5426\u5219 $t=1$\uff09\u3002\n\n$s$ \u8868\u793a\u5305\u542b\u7684\u4e2d\u95f4\u8282\u70b9\u96c6\u5408\uff0c$s< 2^{mn}\\le 2048$\u3002\n\n$i$ \u8868\u793a\u5305\u542b\u7684\u53f6\u5b50\u8282\u70b9\u4e2a\u6811\uff0c\u56e0\u4e3a\u53f6\u5b50\u8282\u70b9\u90fd\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u8fd9\u6837\u53ef\u4ee5\u4f18\u5316\u72b6\u538b\u3002\n\n\u503c\u8868\u793a\u662f\u5426\u5b58\u5728\u8fd9\u6837\u7684\u68ee\u6797\uff0c\u5982\u679c\u5b58\u5728 $=1$\uff0c\u5426\u5219 $=0$\u3002\n\n**\u8003\u8651\u600e\u4e48\u8f6c\u79fb\uff1a**\n\n1. \u4e00\u68f5\u68ee\u6797\uff08\u5b50\u6811\uff09\u548c\u53e6\u4e00\u68f5\u68ee\u6797\uff08\u5b50\u6811\uff09\u5408\u5e76\u6210\u65b0\u7684\u68ee\u6797\u3002\n\n2. \u4e00\u68f5\u68ee\u6797\u4e0a\u9762\u52a0\u4e00\u4e2a $a=$ \u68ee\u6797\u5927\u5c0f $+1$ \u7684\u8282\u70b9\u6210\u4e3a\u4e00\u68f5\u5b50\u6811\uff08\u600e\u4e48\u6c42\u4e00\u68f5\u68ee\u6797\u7684\u5927\u5c0f\uff1f\u5176\u5b9e\u5c31\u662f ${\\rm popcount}(s)+i$ \u5566\uff09\u3002\n\n\u7136\u540e\u5c31\u5269\u521d\u59cb\u5316\u7684\u95ee\u9898\u4e86\uff0c\u56e0\u4e3a $i$ \u8fd9\u7ef4\u5c31\u50cf\u4e00\u4e2a\u80cc\u5305\uff0c\u800c\u4e14\u56e0\u4e3a $s$ \u8fd9\u4e00\u7ef4\u4fdd\u8bc1\u4e0d\u4f1a\u6709\u91cd\u70b9\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728 `dp` \u4e2d\u7528\u65e0\u9650\u80cc\u5305\u7684\u65b9\u5f0f\uff0c\u8fd9\u6837\u5c31\u53ea\u9700\u8981\u521d\u59cb\u5316 $f_{0,0,1}=1$ \u4e86\u3002\n\n**\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(ln^2 3^{mn})$**\uff0c\u7ec6\u8282\u770b\u4ee3\u7801\u3002\n\n---\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n//Start\ntypedef long long ll;\ntypedef double db;\n#define mp(a,b) make_pair((a),(b))\n#define x first\n#define y second\n#define bg begin()\n#define ed end()\n#define sz(a) int((a).size())\n#define pb(a) push_back(a)\n#define R(i,a,b) for(int i=(a),i##E=(b);i<i##E;i++)\n#define L(i,a,b) for(int i=(b)-1,i##E=(a)-1;i>i##E;i--)\nconst int iinf=0x3f3f3f3f;\nconst ll linf=0x3f3f3f3f3f3f3f3f;\n\n//Data\nconst int N=24,mN=11;\nint n,sn,ln,mn,a[N],b[1<<mN];\nint f[2][1<<mN][N+1]; // \u68ee\u6797\u8fd8\u662f\u5b50\u6811\uff0c\u4e2d\u95f4\u8282\u70b9\u96c6\uff0c\u53f6\u5b50\u8282\u70b9\u6570\nbool get(int s,int i){ // \u8fd4\u56de f[1][s][i] \u7684\u503c\n    for(int su=s;su;su=s&(su-1))if(!(su&(s^su)))R(j,0,i+1)\n        if((f[0][su][j]||f[1][su][j])&&(f[0][s^su][i-j]||f[1][s^su][i-j])) return true;\n    R(j,0,i+1)if((f[0][0][j]||f[1][0][j])&&(f[0][s][i-j]||f[1][s][i-j])) return true; // \u56e0\u4e3a su!=0\uff0c\u8865\u4e0a\u5faa\u73af\u4e2d\u7f3a\u5c11\u7684 su=0\n    return false;\n}\n\n//Main\nint main(){\n    ios::sync_with_stdio(0);\n    cin.tie(0),cout.tie(0);\n    cin>>n; R(i,0,n) cin>>a[i]; sort(a,a+n,greater<int>());\n    R(i,0,n)if(a[i]>1) mn++; ln=n-mn,sn=1<<mn,sort(a,a+mn); \n    if(mn*2>=n) cout<<\"NO\\n\",exit(0);\n    R(i,1,sn) b[i]=b[i>>1]+(i&1);\n    f[0][0][1]=true;\n    R(s,0,sn)R(i,0,ln+1)if(get(s,i)){\n        f[1][s][i]=true;\n        R(t,0,mn)if(!(s&(1<<t))&&a[t]==b[s]+i+1) // \u52a0\u65b0\u7684 a= \u68ee\u6797\u5927\u5c0f+1 \u7684\u8282\u70b9\u5f62\u6210\u5b50\u6811\n            f[0][s^(1<<t)][i]=true;\n    }\n    if(f[0][sn-1][ln]) cout<<\"YES\\n\";\n    else cout<<\"NO\\n\";\n    return 0;\n}\n```\n\n---\n\n**\u795d\u5927\u5bb6\u5b66\u4e60\u6109\u5feb\uff01**",
        "postTime": 1603435385,
        "uid": 118365,
        "name": "George1123",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF429C \u3010Guess the Tree\u3011"
    },
    {
        "content": "## \u7ffb\u8bd1\n### \u9898\u9762\u63cf\u8ff0\n\u4f60\u88ab\u8981\u6c42\u6784\u5efa\u8fd9\u6837\u4e00\u68f5\u6709\u6839\u6811\uff1a\n- \u6b64\u6811\u9664\u53f6\u8282\u70b9\u5916\u7684\u8282\u70b9\u90fd\u81f3\u5c11\u6709\u4e24\u4e2a\u513f\u5b50\u3002\n- $i$ \u53f7\u8282\u70b9\u5b50\u6811\u5927\u5c0f\u4e3a $c_i$ \u3002\n### \u8f93\u5165\u683c\u5f0f\n\u7b2c\u4e00\u884c\u8bfb\u5165\u4e00\u4e2a\u6b63\u6574\u6570 $n (1<=n<=24)$ \uff0c\u8868\u793a\u6811\u7684\u5927\u5c0f \u3002\n\n\u7b2c\u4e8c\u884c\u8bfb\u5165 $n$ \u4e2a\u6b63\u6574\u6570 $c_i$ \u8868\u793a $i$ \u53f7\u8282\u70b9\u5b50\u6811\u5927\u5c0f\u4e3a $c_i$  \u3002\n\n### \u8f93\u51fa\u683c\u5f0f\n\u5982\u679c\u80fd\u6784\u5efa\u8f93\u51fa YES \uff0c\u5426\u5219\u8f93\u51fa NO \u3002\n\n## \u9898\u89e3\n\u6ce8\u610f\u5230 $n$ \u7279\u522b\u5c0f\uff0c\u8003\u8651\u72b6\u538b\u6216\u66b4\u641c \u3002\n\n\u5148\u628a $c$ \u6570\u7ec4\u4ece\u5927\u5230\u5c0f\u6392\u5e8f\uff0c\u5219\u6bcf\u4e2a\u8282\u70b9\u7684\u7236\u4eb2\u53ea\u53ef\u80fd\u6392\u5728\u5b83\u7684\u524d\u9762\u3002 \u66b4\u641c\u6bcf\u6b21\u641c\u7236\u8282\u70b9 \uff0c \u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n!)$ \uff0c\u4f1a T \uff0c\u8003\u8651\u4f18\u5316\u3002\u9996\u5148\u6ce8\u610f\u5230\u5728\u975e\u53f6\u8282\u70b9\uff08\u5373\u5b50\u6811\u5927\u5c0f\u5927\u4e8e\u4e00\u7684\uff09\u7684\u7236\u4eb2\u786e\u5b9a\u4e0b\u6765\u540e\uff0c\u53f6\u8282\u70b9\u65e0\u8bba\u662f\u54ea\u4e2a\u8282\u70b9\u7684\u513f\u5b50\u90fd\u6ca1\u5173\u7cfb \u3002 \u56e0\u6b64\u6211\u4eec\u6709\u4e2a\u4f18\u5316\uff1a\u641c\u5230\u53f6\u8282\u70b9\u540e\u76f4\u63a5\u8bbe\u4e3a\u5b50\u6811\u672a\u6ee1\u7684\u8282\u70b9\u7684\u513f\u5b50\u3002\u8bbe\u6b64\u6811\u4e2d\u53f6\u8282\u70b9\u6709 $m$ \u4e2a \uff0c \u5219\u4f18\u5316\u540e\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O((n-m)!)$ \u3002\n\n\u63a5\u4e0b\u6765\u5c31\u662f\u4e2a\u795e\u5947\u7684\u7ed3\u8bba\u4e86\uff1a\u5408\u6cd5\u6784\u5efa\u51fa\u7684\u6811\u4e2d \uff0c \u53f6\u8282\u70b9\u7684\u4e2a\u6570\u4e0d\u5c0f\u4e8e\u4e00\u534a\uff01\u8bc1\u660e\u5176\u5b9e\u5f88\u7b80\u5355\uff1a\u6ce8\u610f\u5230\u6761\u4ef6\u4e00 \uff0c \u6211\u4eec\u6709\uff1a\u6839\u8282\u70b9\u7684\u5ea6\u6570\u4e3a 0 \u6216\u5927\u4e8e 1 \uff0c \u5176\u4ed6\u8282\u70b9\u7684\u5ea6\u6570\u4e3a 1 \u6216\u5927\u4e8e 2  \u3002 \u5f53\u6811\u4e2d\u9664\u53f6\u8282\u70b9\u5916\u7684\u8282\u70b9\u90fd\u53ea\u6709\u4e24\u4e2a\u513f\u5b50\u65f6 \uff0c \u53f6\u8282\u70b9\u7684\u4e2a\u6570\u4e3a $x$ , \u6709 $n\\times 2-2=a+(n-a)\\times3-1$ , $a=\\frac{n+3}{2}$ \uff0c\u5927\u4e8e\u4e00\u534a \u3002\u5f53\u4e00\u4e2a\u8282\u70b9\u5ea6\u6570\u52a0\u4e00 \uff0c \u5219\u53e6\u4e00\u8282\u70b9\u5ea6\u6570\u51cf\u4e00 \uff0c \u800c\u53f6\u8282\u70b9\u5ea6\u6570\u4e0d\u53ef\u518d\u51cf \uff0c \u56e0\u6b64\u53f6\u8282\u70b9\u7684\u6570\u76ee\u4e0d\u51cf \uff0c \u8bc1\u6bd5\u3002\n\n**tip:** \u8bfb\u5165\u65f6\u9047\u5230\u5b50\u6811\u5927\u5c0f\u4e3a 2 \u7684\u76f4\u63a5\u8f93\u51fa NO \uff01\uff01\uff01\n\n### \u4ee3\u7801\n\u7531\u4e8e\u6211\u4e0d\u77e5\u9053\u8f93\u5165\u7ed9\u51fa\u7684\u6811\u662f\u5426\u5b58\u5728\uff08\u5ffd\u7565\u7b2c\u4e00\u4e2a\u6761\u4ef6\uff09\uff0c\u56e0\u6b64\u6211\u5199\u4e86\u5f88\u591a\u5224\u65ad\u3002\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,a[1000000],bo,b[1000000],t,c[1000000];\nbool cmp(int x,int y)\n{\n\treturn x>y;\n}\nvoid dfs(int x)\n{\n\tif(x>n)\n\t{\n\t\tint bo=0;\n\t\tfor(int i=1;i<=n;i++) bo+=a[i];\n\t\tif(bo) return;\n\t\tbo=1;\n\t\tfor(int i=1;i<=n;i++) if(b[i]==1) bo=0;\n\t\tif(!bo) return;\n\t\tputs(\"YES\");\n\t\texit(0);\n\t}\n\tif(a[x]==1)\n\t{\n\t\tint bo=0;\n\t\tfor(int i=1;i<x;i++) b[i]+=a[i],bo+=a[i];\n\t\tif(bo!=n-x+1) return;\n\t\tbo=1;\n\t\tfor(int i=1;i<=n;i++) if(b[i]==1) bo=0;\n\t\tif(!bo) return;\n\t\tputs(\"YES\");\n\t\texit(0);\n\t}\n\tfor(int i=t;i<=c[x];i++)\n\t\tif(a[i]>=a[x])\n\t\t{\n\t\t\tint tt=t;\n\t\t\t++b[i];\n\t\t\ta[i]-=a[x];\n\t\t\t--a[x];\n\t\t\tif(i==t&&a[i]==0) ++t;\n\t\t\tdfs(x+1);\n\t\t\t++a[x];\n\t\t\ta[i]+=a[x];\n\t\t\t--b[i];\n\t\t\tt=tt;\n\t\t}\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&a[i]),bo+=a[i]==2;\n\tif(bo)\n\t{\n\t\tputs(\"NO\");\n\t\treturn 0;\n\t}\n\tsort(a+1,a+n+1,cmp);\n\tif(n==1)\n\t{\n\t\tif(a[1]==1) puts(\"YES\"); else puts(\"NO\");\n\t\treturn 0;\n\t}\n\tfor(int i=2;i<=n;i++) if(a[i]==a[i-1]) c[i]=c[i-1]; else c[i]=i-1;\n\t--a[1];\n\tt=1;\n\tdfs(2);\n\tputs(\"NO\");\n}\n```\n",
        "postTime": 1603353213,
        "uid": 112921,
        "name": "zhimao",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF429C \u3010Guess the Tree\u3011"
    }
]
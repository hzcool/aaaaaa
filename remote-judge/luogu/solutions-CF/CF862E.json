[
    {
        "content": "\u9996\u5148 $f(j)=\\displaystyle|\\sum_{i=1}^{n}(-1)^{i-1}a_i+(-1)^ib_{i+j}|=|\\sum_{i=1}^{n}(-1)^{i-1}a_i+\\sum_{i=1}^{n}(-1)^{i}b_{i+j}|$\n\n\u6211\u4eec\u5148\u5904\u7406\u51fa ```suma```\uff0c\u8868\u793a $\\displaystyle\\sum_{i=1}^{n}(-1)^{i-1}a_i$ \u7684\u503c\u3002\n\n\u7136\u540e\u5904\u7406\u51fa ```sumb[i]```\uff0c\u8fd9\u4e2a\u662f\u7b49\u4e8e $-(sumb[i-1]+b_i)+b_{i+n}* n$ \u662f\u5426\u4e3a\u5947\u6570\uff0c\u4e3a\u5947\u6570\u5c31\u4e58 $-1$\uff0c\u5426\u5219\u4e58 $1$\u3002\n\n\u7136\u540e\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u6b21\u7684\u66f4\u65b0\uff0c\u53ea\u6709 $r-l+1$ \u4e3a\u5947\u6570\u65f6\uff0c\u4e14 $l$ \u4e5f\u4e3a\u5947\u6570\u65f6\uff0c```suma``` \u624d\u4f1a\u53d1\u751f\u53d8\u5316\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u6b21\u66f4\u65b0\u5c31\u5224\u65ad\u4e00\u4e0b\u5c31\u884c\u4e86\u3002\n\n\u90a3\u4e48\u5bf9\u4e8e $f(j)$ \u7684\u6700\u5c0f\u503c\uff0c\u6211\u4eec\u4e8c\u5206\u4e00\u4e0b\uff0c\u5728 ```sumb``` \u4e2d\u627e\u6700\u63a5\u8fd1 ```suma``` \u7684\u5c31\u884c\u4e86\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\n#define reg register\n#define ll long long\n#define int long long\n#define ull unsigned long long\n#define db double\n#define pi pair<int, int>\n#define pl pair<ll, ll>\n#define vi vector<int>\n#define vl vector<ll>\n#define vpi vector<pi>\n#define vpl vector<pl>\n#define pb push_back\n#define er erase\n#define SZ(x) (int) x.size()\n#define lb lower_bound\n#define ub upper_bound\n#define all(x) x.begin(), x.end()\n#define rall(x) x.rbegin(), x.rend()\n#define mkp make_pair\nusing namespace std;\nchar ch, B[1 << 20], *S = B, *T = B;\n#define getc() (S == T && (T = (S = B) + fread(B, 1, 1 << 20, stdin), S == T) ? 0 : *S++)\n#define isd(c) (c >= '0' && c <= '9')\nint aa, bb;\nint rd() {\n  while(ch = getc(), !isd(ch) && ch != '-');\n  ch == '-' ? aa = bb = 0 : (aa = ch - '0', bb = 1);\n  while(ch = getc(), isd(ch))\n    aa = aa * 10 + ch - '0';\n  return bb ? aa : -aa;\n}\nconst int MAXN = 1e5 + 10;\nint n, m, q, a[MAXN], b[MAXN], suma, sumb[MAXN];\nint ask(int l, int r, int x, int delta) {\n  if((r - l) % 2 == 0) {\n    if(l % 2 == 1)\n      suma += x;\n    else\n      suma -= x;\n  }\n  int *pos = lb(sumb, sumb + delta, -suma);\n  int ans = 1e18 + 10;\n  if(pos != sumb + delta)\n    ans = min(ans, abs(suma + *pos));\n  if(pos != sumb) {\n    --pos;\n    ans = min(ans, abs(suma + *pos));\n  }\n  return ans;\n}\ninline void work() {\n  scanf(\"%lld%lld%lld\", &n, &m, &q);\n  suma = 0;\n  for(reg int i = 1, mul = 1; i <= n; ++i, mul *= -1) {\n    scanf(\"%lld\", &a[i]);\n    suma += a[i] * mul;\n    // printf(\"%d \", suma);\n  }\n  // puts(\"\");\n  int delta = m - n + 1;\n  sumb[0] = 0;\n  for(reg int i = 1, mul = -1; i <= m; ++i, mul *= -1) {\n    scanf(\"%lld\", &b[i]);\n    if(i <= n)\n      sumb[0] += b[i] * mul;\n  }\n  for(reg int i = 1; i + n <= m; ++i)\n    sumb[i] = -(sumb[i - 1] + b[i]) + b[i + n] * ((n & 1) ? -1 : 1);\n  // for(reg int i = 1; i <= m; ++i)\n    // printf(\"%d \", &b[i]);\n  // puts(\"\");\n  sort(sumb, sumb + delta);\n  printf(\"%lld\\n\", ask(1, 1, 0, delta));\n  for(reg int i = 1; i <= q; ++i) {\n    int l, r, x;\n    scanf(\"%lld%lld%lld\", &l, &r, &x);\n    printf(\"%lld\\n\", ask(l, r, x, delta));\n  }\n}\nsigned main() {\n  // freopen(\"input.txt\", \"r\", stdin);\n  work();\n  return 0;\n}\n```",
        "postTime": 1584085570,
        "uid": 157411,
        "name": "Nylch",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF862E \u3010Mahmoud and Ehab and the function\u3011"
    }
]
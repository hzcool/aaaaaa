[
    {
        "content": "\u601d\u8def \u90e8\u5206\u6765\u81ea [\u5b98\u65b9\u9898\u89e3\uff08\u4fc4\u8bed\uff09](https://codeforces.com/blog/entry/816)\u3002\r\n\r\n\u4e25\u91cd\u6000\u7591\u8fd9\u9898\u653e\u5230 2022 \u5e74\u81f3\u5c11 *2600\uff0c\u6d1b\u8c37\u5efa\u8bae\u8bc4\u7d2b\u3002\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48 2010 \u5e74\u7684\u5916\u56fd\u5c0f\u54e5\u6c34\u5e73\u8fd9\u4e48\u5f3a\u3002\r\n\r\n\u8fd9\u79cd\u9898\u6ca1\u6709\u4ec0\u4e48\u597d\u7684\u8d2a\u5fc3\u89e3\u6cd5\uff0c\u60f3 DP\u3002\r\n\r\n\u535a\u5f08\u8bba\u7684\u5e38\u89c1\u89e3\u6cd5\u662f\u5b58\u50a8\u4e00\u4e2a\u6e38\u620f\u72b6\u6001\u548c\u5f53\u524d\u64cd\u4f5c\u7684\u73a9\u5bb6\uff0c\u7136\u540e\u7ed3\u679c\u662f\u5f53\u524d\u73a9\u5bb6\u662f\u5426\u6709\u5fc5\u80dc\u7b56\u7565\u3002\r\n\r\n\u6240\u4ee5\u6211\u4eec\u8003\u8651\u7528\u4e00\u4e2a `dp[str]` \u6570\u7ec4\u5b58\u50a8\u4e09\u5143\u7ec4 $(result,a,b)$\uff0c\u5176\u4e2d $result$ \u8868\u793a\u5f53\u524d\u73a9\u5bb6\u662f\u5426\u53ef\u4ee5\u83b7\u80dc\uff0c$a$ \u548c $b$ \u8868\u793a\u5f53\u524d\u73a9\u5bb6\u91c7\u53d6\u6700\u4f18\u7b56\u7565\u65f6\u5f53\u524d\u73a9\u5bb6\u548c\u5bf9\u624b\u7684\u5206\u6570\u3002\r\n\r\n\u6709\u4e24\u4e2a\u95ee\u9898\uff1a\u7b2c\u4e00\u4e2a\u662f\u6570\u7ec4\u7684\u5b58\u50a8\uff0c\u6211\u4eec\u603b\u4e0d\u80fd\u628a\u5b57\u7b26\u4e32\u5f53\u4e0b\u6807\u5427\u3002\u6240\u4ee5\u6211\u4eec\u7528 `std::unordered_map` \u5b58\u50a8\u5b57\u7b26\u4e32\u5bf9\u5e94\u7684\u5e8f\u6570\uff0c\u7136\u540e\u6ca1\u4e86\u3002\r\n\r\n\u7b2c\u4e8c\u4e2a\u662f\u8f6c\u79fb\u3002\u8003\u8651 trival \u7684\u535a\u5f08\u8bba DP\uff0c\u5148\u624b\u5fc5\u8d25\u6001\u8f6c\u79fb\u5230\u7684\u4e00\u5b9a\u662f\u5fc5\u80dc\u6001\u3002\r\n\r\n\u4f46\u662f\u53d1\u73b0\u8fd9\u4e2a\u4e1c\u897f\u6ca1\u6cd5\u8f6c\u79fb\u3002\r\n\r\n\u6211\u4eec\u5012\u63a8\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u80fd\u8f6c\u79fb\u5230\u5fc5\u8d25\u6001\u7684\u8282\u70b9\uff0c\u4e00\u5b9a\u662f\u5fc5\u80dc\u6001\u3002\u6211\u4eec\u679a\u4e3e\u653e\u4e0a\u53bb\u7684\u5b57\u6bcd\uff0c\u7136\u540e\u53bb\u66f4\u65b0\u7b54\u6848\u3002\r\n\r\n\u4ee3\u7801\u4e2d\u91c7\u7528 `std::set` \u9884\u5904\u7406\u72b6\u6001\u8f6c\u79fb\uff0c\u4f7f\u7528\u8bb0\u5fc6\u5316\u641c\u7d22\u8fdb\u884c\u8f6c\u79fb\u3002\r\n\r\n```\r\n#include<bits/stdc++.h>\r\nusing namespace std;\r\nusing Status=pair<bool,pair<int,int> >;\r\nint n,a[14000],b[14000],vis[14000];\r\nstring s[31];\r\nmap<string,int> mp;\r\n#define get_id(str) ((mp.count(str))?(mp[str]):(mp[str]=mp.size()-1))\r\nset<int> g[14000];\r\nStatus dp[14000];\r\nStatus dfs(int u)\r\n{\r\n\tif(!vis[u])\r\n\t{\r\n\t\tvis[u]=1;\r\n\t\tif(g[u].empty())return make_pair(0,make_pair(0,0));\r\n\t\telse\r\n\t\t{\r\n\t\t\tStatus res=make_pair(0,make_pair(0,0));\r\n\t\t\tfor(int v:g[u])\r\n\t\t\t{\r\n\t\t\t\tStatus p=dfs(v);\r\n\t\t\t\tres=max(res,make_pair(!p.first,make_pair(a[v]-p.second.second,-p.second.first)));\r\n\t\t\t}\r\n\t\t\tdp[u]=res;\r\n\t\t}\r\n\t}\r\n\treturn dp[u];\r\n}\r\nint main()\r\n{\r\n\tcin>>n;\r\n\tmp[\"\"]=0;\r\n\tfor(int i=1;i<=n;i++)\r\n\t{\r\n\t\tmemset(b,0,sizeof b);\r\n\t\tcin>>s[i];\r\n\t\tfor(int j=0;j<(int)s[i].size();j++)\r\n\t\t{\r\n\t\t\tfor(int k=1;k+j<=(int)s[i].size();k++)\r\n\t\t\t{\r\n\t\t\t\tb[get_id(s[i].substr(j,k))]=1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(int j=0;j<14000;j++)a[j]+=b[j];\r\n\t}\r\n\tfor(pair<string,int> i:mp)\r\n\t{\r\n\t\tint mx=0,sm=0;\r\n\t\tfor(int j=0;j<(int)i.first.size();j++)\r\n\t\t{\r\n\t\t\tmx=max(mx,i.first[j]-'a'+1);\r\n\t\t\tsm+=i.first[j]-'a'+1;\r\n\t\t}\r\n\t\ta[i.second]+=mx*sm;\r\n\t\tif(i.first!=\"\")\r\n\t\t{\r\n\t\t\tif(mp.count(i.first.substr(1,i.first.size()-1)))g[mp[i.first.substr(1,i.first.size()-1)]].insert(i.second);\r\n\t\t\tif(mp.count(i.first.substr(0,i.first.size()-1)))g[mp[i.first.substr(0,i.first.size()-1)]].insert(i.second);\r\n\t\t}\r\n\t}\r\n\tStatus p=dfs(0);\r\n\tcout<<((p.first)?\"First\":\"Second\")<<endl<<p.second.first<<' '<<-p.second.second;\r\n}\r\n```",
        "postTime": 1668501181,
        "uid": 313716,
        "name": "decltype_auto",
        "ccfLevel": 0,
        "title": "solution-cf38f"
    }
]
[
    {
        "content": "# \u641c\u7d22+\u4e8c\u5206\u7b54\u6848\n\n\u540c\u6b65\u53d1\u8868\u4e8e\uff1a[\u535a\u5ba2\u98df\u7528\uff1aCF912E Prime Gift\u9898\u89e3(\u641c\u7d22+\u4e8c\u5206\u7b54\u6848)](https://www.cnblogs.com/cjoierljl/p/9812791.html)\n\n\u7167\u4f8b\uff1a[eternal\u98ce\u5ea6\u7684\u535a\u5ba2\u3002\u3002\u3002](https://www.cnblogs.com/cjoierljl/)$\\leftarrow$\u6b22\u8fce\u6765\u8e29\n\n## \u5148\u7ffb\u8bd1\u4e00\u4e0b\u9898\u610f\n\u7ed9\u4f60$n$\u4e2a\u8d28\u6570\uff0c\u8ba9\u4f60\u6c42\u8fd9$n$\u4e2a\u8d28\u6570\u80fd\u4e58\u8d77\u6765\u7ec4\u6210\u7684\u7b2c$K$\u5927\u6570\uff08$n\\le 16,K$\u597d\u5927\u516b\u5927\uff09\n\n## \u601d\u8def\n### \u641c\u7d22\u90e8\u5206\n\u770b\u5230\u8fd9\u4e2a\u6570\u636e\u8303\u56f4\uff0c\u5f88\u5bb9\u6613\u60f3\u5230\u641c\u7d22\u5bf9\u5427\n\n\u4f46\u662f\u53c8\u4e0d\u80fd\u76f2\u76ee\u5730\u641c\u7d22\uff0c\u8003\u8651$meet-in-the-middle$\n\n\u641c\u51fa\u524d$8$\u4e2a\u548c\u540e$8$\u4e2a\u80fd\u62fc\u51fa\u7684\u6240\u6709\u72b6\u6001\n\n\u5f88\u663e\u7136\u968f\u4fbf\u7b97\u4e00\u4e0b\u662f\u5b58\u7684\u4e0b\u6765\u7684\uff08\u4e0d\u786e\u5b9a\u6570\u7ec4\u5f00\u591a\u5927\u5c31\u5f00\u4e2a$vector$\uff09\n\n### \u4e8c\u5206\u90e8\u5206\n\n\u6211\u4eec\u53d1\u73b0\u8fd8\u662f\u65e0\u6cd5\u5f88\u5feb\u627e\u5230\u7b2c$K$\u5927\u7684\u7b54\u6848\u5bf9\u5427\n\n\u8fd9\u79cd\u65f6\u5019\u5c31\u5e94\u8be5\u60f3\u5230\u4e8c\u5206\u7b54\u6848$+check$\u6765\u89e3\u51b3\uff0c\u90a3\u4e48\u6211\u4eec\u5bf9\u7b54\u6848\u4e8c\u5206\n\n\u95ee\u9898\u5c31\u8f6c\u5316\u6210\u4e86\u7ed9\u4f60\u4e00\u4e2a\u6570\u548c\u4e24\u4e2a\u6570\u5217\uff0c\u8ba9\u4f60\u627e\u51fa\u5b83\u5728\u8fd9\u4e24\u4e2a\u6570\u5217\u4e2d\u6bcf\u4e2a\u6570\u5217\u4efb\u9009\u4e24\u4e2a\u4e58\u8d77\u6765\u7684\u6570\u4e2d\u6392\u540d\u4e3a\u591a\u5c11\n\n\u8fd9\u4e2a\u5c31\u4e0d\u662f\u5f88\u96be\u4e86\uff0c\u90a3\u4e24\u4e2a\u6307\u9488\u626b\u4e00\u904d\u5c31\u5b8c\u4e8b\u4e86\u3002\u3002\u3002\n\n\u5982\u679c\u4e0d\u77e5\u9053\u600e\u4e48\u626b\u7684\u8bdd\u53ef\u4ee5\u8003\u8651\u770b\u4e00\u770b\u4ee3\u7801\uff08~~\u5982\u679c\u4f60\u770b\u5f97\u61c2\u7684\u8bdd~~\uff09\n## Code\uff08\u65e5\u5e38\u6ca1\u6ce8\u91ca\uff09\n```\n#include<bits/stdc++.h>\n#define il inline\n#define rg register\n#define ldb double\n#define lst long long\n#define rgt register int\n#define N 20\n#define pb push_back\nusing namespace std;\nconst lst Inf=1e18;\nil int read()\n{\n\tint s=0,m=0;char ch=getchar();\n\twhile(!isdigit(ch)){if(ch=='-')m=1;ch=getchar();}\n\twhile( isdigit(ch))s=(s<<3)+(s<<1)+(ch^48),ch=getchar();\n\treturn m?-s:s;\n}\n\nlst n,K;\nvector<lst> v[3];\nlst p[N],Sz[3];\n\nvoid Dfs(int rt,int now,lst ss)\n{\n\tif(now>n){v[rt].pb(ss),++Sz[rt];return;}\n\tfor(lst w=1;;w*=p[now])\n\t{\n\t    Dfs(rt,now+2,ss*w);\n\t    if((1e18)/p[now]<w*ss)return;\n\t    //\u7528\u9664\u6cd5\u662f\u56e0\u4e3a\u6015\u7206long long\n\t}\n}\n\nint main()\n{\n\tn=read(),v[1].pb(0),v[2].pb(0);\n\tfor(rgt i=1;i<=n;++i)p[i]=read();\n\tsort(&p[1],&p[n+1]),Dfs(1,1,1),Dfs(2,2,1);\n\tsort(&v[1][1],&v[1][Sz[1]+1]);\n\tsort(&v[2][1],&v[2][Sz[2]+1]);\n\tlst le=1,ri=1e18,mid,tot,Ans;K=read();\n\twhile(le<=ri)\n\t{\n\t\tmid=(le+ri)>>1,tot=0;\n\t\tfor(rgt i=1,j=Sz[2];i<=Sz[1]&&j>=1;++i,tot+=j)\n\t\t\twhile(j&&mid/v[1][i]<v[2][j])--j;//\u7528\u9664\u6cd5\u662f\u56e0\u4e3a\u6015\u7206long long\n\t\tif(tot<K)le=mid+1;\n\t\telse Ans=mid,ri=mid-1;\n\t}return printf(\"%lld\\n\",Ans),0;\n}\n```",
        "postTime": 1539864216,
        "uid": 66596,
        "name": "eternal\u98ce\u5ea6",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF912E \u3010Prime Gift\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u7684\u6838\u5fc3\u5c31\u662f\u4e00\u4e2a\u53eb\u505a meet-in-the-middle \u7684\u7b97\u6cd5\u3002\n\nmeet-in-the-middle\uff0c\u5c31\u662f\u4e2d\u9014\u76f8\u9047\u6cd5\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u79cd\u641c\u7d22\u7684\u65b9\u6cd5\u3002\n\n\u6bd4\u5982\u8bf4\u5bf9\u4e8e\u8fd9\u9053\u9898\u7ed9\u4f60 16 \u4e2a\u7d20\u6570\uff0c\n\n\u4f60\u53ef\u4ee5\u5148\u641c 8 \u4e2a\u7d20\u6570\uff0c\u628a\u6240\u6709\u4e58\u79ef\u5b58\u5728\u4e00\u4e2a\u6570\u7ec4 $A$ \u4e2d\u3002\n\n\u63a5\u7740\u518d\u641c\u53e6\u5916 8 \u4e2a\u7d20\u6570\uff0c\u628a\u6240\u6709\u4e58\u79ef\u5b58\u5728\u53e6\u4e00\u4e2a\u6570\u7ec4 $B$ \u4e2d\u3002\n\n\u6700\u540e\uff0c\u518d\u5229\u7528\u4e8c\u5206\u7b54\u6848\u7684\u601d\u60f3\uff0c\n\n\u5c06 $A$ \u6570\u7ec4\u4e0e $B$ \u6570\u7ec4\u4e2d\u7684\u7edf\u8ba1\u7ed3\u679c\u7ed3\u5408\u51fa\u6765\u5f97\u5230\u7b54\u6848\u3002\n\n\u6a21\u62df\u8d5b\u51fa\u9898\u65f6\u53d1\u73b0\u4e86\u8fd9\u9053\u9898\uff0c\u521a\u597d\u662f\u8fd0\u7528\u4e86\u4e8c\u5206\u7b54\u6848\u7684\u3002\n\n\u4e8c\u5206\u7b54\u6848\u7684\u601d\u60f3\u4e0e\u4e0a\u534a\u5e74\u7684\u7ecd\u5174\u5e02\u590d\u8d5b\u7684 T3 \u5f88\u50cf\uff08\u90a3\u6b21 Licykoc dalao \u53bb\u4e86 APIO\uff09\u3002\n\nmeet-in-the-middle \u8fd9\u4e2a\u7b97\u6cd5\u4e5f\u5728\u4ee5\u524d\u7684\u6a21\u62df\u8d5b\u4e2d\u505a\u8fc7\u3002\n\n\u52a0\u4e0a CF 2400 \u7684\u96be\u5ea6\uff0c\u6709\u505a\u6211\u7684\u6a21\u62df\u8d5b T4 \u7684\u98ce\u8303\u3002\n\n\u641c\u7d22\u7684\u90e8\u5206\u5e94\u8be5\u4e0d\u7528\u6211\u8bb2\u4e86\u3002\n\n\u4e3b\u8981\u65f6\u641c\u5b8c\u4e4b\u540e\u7684\u4e8c\u5206\u90e8\u5206\u3002\n\n\u4e8c\u5206\u7b54\u6848\u641c\u6240\u6709 $A$ \u6570\u7ec4\u4e2d\u7684\u6570\u5b57\u548c $B$ \u6570\u7ec4\u4e2d\u7684\u6570\u5b57\u7684\u4e58\u79ef\u4e2d\u7b2c $k$ \u5c0f\u7684\u90a3\u4e00\u4e2a\u6570\u3002\n\n\u5148\u628a\u4e8c\u5206\u7684\u677f\u5b50\u653e\u5728\u8fd9\u513f\uff1a\n\n```cpp\nlong long l=0,r=1e18;\nwhile (l<r) {\n\tlong long mid=(l+r)>>1;\n\tif (check(mid)>=k) r=mid; // check(mid) \u8868\u793a\u5c0f\u4e8e\u7b49\u4e8e mid \u7684\u4e58\u79ef\u6709\u51e0\u4e2a\n\telse l=mid+1;\n}\n```\n\n\u63a5\u7740\u8ba9\u6211\u4eec\u5173\u6ce8\u4e00\u4e0b check \u51fd\u6570\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u7528 two-pointers \u7684\u65b9\u6cd5\u3002\n\n\u9996\u5148\u5c06 $A$ \u6570\u7ec4\uff0c$B$ \u6570\u7ec4\u6392\u5e8f\u5e76\u53bb\u91cd\u3002\n\n\u9996\u5148 $i$ \u6307\u9488\u6765\u679a\u4e3e $A$ \u6570\u7ec4\uff1a\n\n```cpp\nfor(int i=1;i<=lenA;i++)\n```\n\n\u91cc\u9762\u53ef\u4ee5\u518d\u5957\u4e00\u4e2a\u6307\u9488 $j$\uff0c\u6765\u679a\u4e3e $B$ \u6570\u7ec4\u3002\n\n\u56e0\u4e3a $A$ \u6570\u7ec4\u662f\u4ece\u5c0f\u5230\u5927\u6392\u7684\uff0c\u4e58\u79ef\u76f8\u7b49\uff08\u53ef\u4ee5\u770b\u4f5c\u90fd\u662f $mid$\uff09\uff0c\u6240\u4ee5 $j$ \u6307\u9488\u80af\u5b9a\u662f\u9012\u51cf\u7684\u3002\n\n\u53ef\u80fd\u8fd8\u662f\u4e0d\u592a\u61c2\uff0c\u770b\u770b\u4ee3\u7801\u5c31\u61c2\u4e86\u3002\n\n```cpp\ninline long long check(long long mid) {\n\tlong long ans=0; int j=lenB;\n\tfor(int i=1;i<=lenA;i++) {\n\t\twhile (j>0&&B[j]>mid/A[i]) j--; // j \u8868\u793a\u4e00\u4e2a\u6570\u4e3a A[i] \u65f6\uff0c\u53e6\u4e00\u4e2a\u6570 B[j] \u6700\u5927\u65f6\uff08\u6ee1\u8db3 B[j]*A[i]<=mid\uff09\u7684\u4e0b\u6807\n\t\tans+=1ll*j;\n\t}\n\treturn ans; // ans \u8868\u793a\u5c0f\u4e8e\u7b49\u4e8e mid \u7684\u4e58\u79ef\u6709\u51e0\u4e2a\n}\n```\n\n\u4e8e\u662f\u8fd9\u9053\u9898\u5c31\u89e3\u51b3\u4e86\u3002\n\n~~\u5176\u5b9e\u653e\u5728 CSP-J \u6a21\u62df\u8d5b\u4e2d\u4e5f\u4e0d\u4f1a\u88ab\u7fa4\u6bb4\u3002~~\n\n## Talk is cheap, show your code!\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef long long LL;\n#define REP(a,b,c) for(int a=b;a<=c;a++)\nint n,a[110],k;\nLL A[5000010],B[5000010];\nint lenA=0,lenB=0;\ninline void dfs1(int x,LL s) {\n\tA[++lenA]=s;\n\tif (x>n) return ;\n\tfor(LL i=1;;i*=a[x]) {\n\t\tif (1e18/i<s) break;\n\t\tdfs1(x+2,s*i);\n\t}\n}\ninline void dfs2(int x,LL s) {\n\tB[++lenB]=s;\n\tif (x>n) return ;\n\tfor(LL i=1;;i*=a[x]) {\n\t\tif (1e18/i<s) break;\n\t\tdfs2(x+2,s*i);\n\t}\n}\ninline LL check(LL mid) {\n\tLL ans=0; int j=lenB;\n\tREP(i,1,lenA) {\n\t\twhile (j>0&&B[j]>mid/A[i]) j--;\n\t\tans+=1ll*j;\n\t}\n\treturn ans;\n}\nint main() {\n\tios::sync_with_stdio(false); cin.tie(0); cout.tie(0);\n\tcin>>n; REP(i,1,n) cin>>a[i]; cin>>k;\n\tsort(a+1,a+n+1);\n\tdfs1(1,1); dfs2(2,1);\n\tLL l=0,r=1e18;\n\tsort(A+1,A+lenA+1);\n\tsort(B+1,B+lenB+1);\n\tlenA=unique(A+1,A+lenA+1)-A-1;\n\tlenB=unique(B+1,B+lenB+1)-B-1;\n\twhile (l<r) {\n\t\tLL mid=(l+r)>>1;\n\t\tif (check(mid)>=k) r=mid;\n\t\telse l=mid+1;\n\t}\n\tcout<<r<<endl;\n\treturn 0;\n}\n```\n\u5b8c\u7ed3\u6492\u82b1! \u306e_^",
        "postTime": 1634477771,
        "uid": 355448,
        "name": "Fido_Puppy",
        "ccfLevel": 0,
        "title": "CF912E Prime Gift"
    },
    {
        "content": "\u9898\u610f  \n\u7ed9\u5b9a\u4e00\u4e2a\u7d20\u6570\u96c6\u5408\uff0c\u6c42\u7b2ck\u5c0f\u7684\u6570\uff0c\u6ee1\u8db3\u8fd9\u4e2a\u6570\u7684\u6240\u6709\u8d28\u56e0\u5b50\u96c6\u5408\u4e3a\u7ed9\u5b9a\u7684\u96c6\u5408\u7684\u5b50\u96c6\u3002\n\n\u4fdd\u8bc1\u7b54\u6848\u4e0d\u8d85\u8fc7$10^{18}$\n\n\u8003\u8651\u4e8c\u5206\u7b54\u6848\u3002\n\n\u6839\u636e\u6298\u534a\u7684\u601d\u60f3\uff0c\u9996\u5148\u6211\u4eec\u628a\u8fd9\u4e2a\u96c6\u5408\u7684\u6570\u5206\u6210\u4e24\u7ec4\u3002\n\n\u7136\u540e\u5206\u522b\u751f\u6210\u8fd9\u4e24\u7ec4\u8d28\u6570\u6240\u80fd\u8868\u793a\u51fa\u7684\u6b63\u6574\u6570\u7684\u96c6\u5408\u3002\n\n\u7136\u540e\u628a\u8fd9\u4e2a\u96c6\u5408sort\u4e00\u4e0b\uff0c\u6211\u4eec\u5f97\u5230\u4e86\u4e24\u4e2a\u6709\u5e8f\u7684\u6570\u5217\u3002\n\n\u5728\u8ba1\u7b97\u5c0f\u4e8e\u7b49\u4e8e\u67d0\u4e2a\u6570$x$\u7684\u7b26\u5408\u9898\u76ee\u6761\u4ef6\u7684\u6570\u7684\u65f6\u5019\uff0c\u6211\u4eec\u679a\u4e3e\u7b2c\u4e00\u4e2a\u96c6\u5408\u4e2d\u7684\u6570\uff0c\n\n\u7528\u53cc\u6307\u9488\u5b9a\u4f4d\u548c\u5f53\u524d\u679a\u4e3e\u5230\u7684\u6570\u4e58\u79ef\u6070\u597d\u5c0f\u4e8e\u7b49\u4e8e$x$\u7684\u4f4d\u7f6e\u3002\n\n\u7136\u540e\u7d2f\u52a0\u3002\n\n\u8fd9\u91cc\u6709\u4e00\u4e2a\u7ec6\u8282\uff0c\u6211\u4eec\u8981\u4fdd\u8bc1\u4e24\u4e2a\u6b63\u6574\u6570\u7684\u96c6\u5408\u7684\u5927\u5c0f\u8981\u5c3d\u53ef\u80fd\u63a5\u8fd1\u3002\n\n\u6240\u4ee5\u5206\u7ec4\u65b9\u5f0f\u8981\u7a0d\u5fae\u8bb2\u7a76\u4e00\u4e0b\uff0c\n\n\u6211\u8fd9\u91cc\u5148\u5bf9\u6574\u4e2a\u6570\u5217sort\uff0c\u518d\u6839\u636e\u4f4d\u7f6e\u7684\u5947\u5076\u6027\u628a\u6574\u4e2a\u6570\u5217\u5206\u6210\u4e24\u7ec4\u3002\n\n\u8fd9\u9053\u9898\u7684\u6781\u9650\u6570\u636e\u7684\u96c6\u5408\u5e94\u8be5\u662f\u524d$16$\u5c0f\u7684\u8d28\u6570\u2026\u2026\n```\n#include <bits/stdc++.h>\nusing namespace std;\n#define rep(i, a, b)\tfor (int i(a); i <= (b); ++i)\n#define dec(i, a, b)\tfor (int i(a); i >= (b); --i)\ntypedef long long LL;\nconst int N = 63;\nint n;\nint cnt;\nLL a[N], c[N], k, l, r;\nvector <LL> s[2];\nvoid dfs(int i, int x, LL now){\n    s[i].push_back(now);\n    rep(j, x, cnt) if (1e18 / c[j] >= now) dfs(i, j, now * c[j]);\n}\nLL solve(LL x){\n    int j = 0;\n    LL ret = 0;\n    dec(i, s[0].size() - 1, 0){\n        while (j < s[1].size() && s[1][j] <= x / s[0][i]) ++j;\n        ret += j;\n    }\n    return ret;\n}\nint main()\n{\n    scanf(\"%d\", &n);\n    rep(i, 1, n) scanf(\"%lld\", a + i);\n    sort(a + 1, a + n + 1);\n    scanf(\"%lld\", &k);\n    cnt = 0;\n    rep(i, 1, n) if (i & 1) c[++cnt] = a[i];\n    dfs(0, 1, 1);\n    cnt = 0;\n    rep(i, 1, n) if (!(i & 1)) c[++cnt] = a[i];\n    dfs(1, 1, 1);\n    sort(s[0].begin(), s[0].end());\n    sort(s[1].begin(), s[1].end());\n    l = 1, r = 1e18;\n    while (l + 1 < r){\n        LL mid = (l + r) / 2;\n        if (solve(mid) >= k) r = mid;\n        else l = mid + 1;\n    }\n    if (solve(l) >= k) printf(\"%lld\\n\", l); \n    else printf(\"%lld\\n\", r);\n    return 0;\n}```",
        "postTime": 1534649009,
        "uid": 98856,
        "name": "\u61a8\u8c46Beng",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF912E \u3010Prime Gift\u3011"
    },
    {
        "content": "\u524d\u8a00\uff1a\u8c8c\u4f3c\u8fd9\u9898\u7684\u5751\u6211\u5168\u8e29\u4e86\uff0c\u597d\u50cf\u8fd8\u53d1\u73b0\u4e86\u4e00\u70b9\u66f4\u5feb\u7684\u65b9\u6cd5\uff0c\u4e8e\u662f\u5199\u4e0b\u8fd9\u7bc7\u9898\u89e3\u3002\n\n## Part 1 \u601d\u8def  \n\n\u6ce8\u610f\u5230 $n$ \u7684\u53d6\u503c\u5f88\u5c0f\uff0c\u8fd9\u542f\u793a\u6211\u4eec\u53ef\u4ee5\u7528\u641c\u7d22\uff0c\u4f46\u662f\u663e\u7136\u4e0d\u80fd\u4f7f\u7528\u6734\u7d20\u7684\u7206\u641c\uff0c\u54ea\u6015\u7ed9\u51fa\u4e86 $10^{18}$ \u8fd9\u4e2a\u4e0a\u9650\uff0c\u6570\u636e\u89c4\u6a21\u4ecd\u662f\u4e0d\u53ef\u4f30\u91cf\u7684\uff0c\u6bd4\u8f83\u53ef\u53d6\u7684\u505a\u6cd5\u662f\u4f7f\u7528\u6298\u534a\u641c\u7d22\u8fd9\u4e00\u641c\u7d22\u7b56\u7565\u3002  \n\n\u5751\u70b9\u4e00\uff1a[@charleshe \u5728\u8ba8\u8bba\u533a\u63d0\u5230\u7684](https://www.luogu.com.cn/discuss/564514)  \n\n\u6bd4\u5982\u4f60\u524d\u9762\u516b\u4e2a\u6570\u5b57\u662f $2,3,5,7,11,13,17,19$\uff0c\u800c\u540e\u9762\u7684\u6570\u5b57\u6bd4\u8f83\u5927\uff0c\u663e\u7136\u524d\u9762\u7684\u53ef\u80fd\u6bd4\u540e\u9762\u591a\u5f97\u591a\u3002\u8fd9\u4f1a\u5bfc\u81f4\u5408\u5e76\u7b54\u6848\u7684\u6548\u7387\u6781\u4f4e\u3002\u6211\u4eec\u5e0c\u671b\u7684\u662f\u4e24\u7ec4\u6570\u636e\u80fd\u5c3d\u53ef\u80fd\u5e73\u5747\uff0c\u5bb9\u6613\u60f3\u5230\u4e00\u5927\u4e00\u5c0f\u9519\u4f4d\u5373\u53ef\u3002  \n\n\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6709\u4e86\u4e24\u7ec4\u7d20\u6570\u5206\u522b\u7ec4\u5408\u800c\u6210\u7684\u6240\u6709\u53ef\u80fd\u7684\u6570\u5b57\uff0c\u8bb0\u4e3a $A$ \u548c $B$\u3002  \n\u9996\u5148\u8981\u5bf9\u4e24\u8005\u6392\u5e8f\uff0c\u53bb\u91cd\u3002  \n\n\u7136\u540e\u5408\u5e76\u7684\u65b9\u6cd5\uff0c~~\u4e3a\u4e86\u6162\u4e00\u70b9~~\uff0c\u6211\u4eec\u4ee5\u4e8c\u5206\u67e5\u627e\u914d\u5408\u53cc\u6307\u9488\u5224\u5b9a\u4e3a\u4f8b\u3002  \n\u56e0\u4e3a $A$ \u548c $B$ \u90fd\u662f\u5355\u8c03\u9012\u589e\u7684\uff0c\u6211\u4eec\u679a\u4e3e $A$ \u7684\u5143\u7d20\uff0c\u6b64\u65f6\u80fd\u548c\u5176\u642d\u914d\u7684 $B$ \u4e2d\u7684\u5143\u7d20\u4e00\u5b9a\u662f\u8d8a\u6765\u8d8a\u5c11\u7684\u3002  \n\n\u6ca1\u542c\u61c2\uff1f\u770b\u4ee3\u7801\uff01  \n\n```cpp\nint check(int mid){\n\tint rt=0,r=b.size()-1;\n\tF(i,0,a.size()-1){\n\t\twhile(r>=0&&mid<a[i]*b[r]) r--;\n\t\trt+=r+1;\n\t\tif(r<0) return rt;\n\t}\n\treturn rt;\n}\n```\n\n\u518d\u6b21\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u5b8c\u6210\u4e86\u8fd9\u90e8\u5206\u4ee3\u7801\uff0c\u4f46\u662f\u8f93\u51fa\u7684\u65f6\u5019\u5374\u53d1\u73b0\u7b54\u6848\u9519\u4e86\u5f88\u591a\u3002  \n\n\u5751\u70b9\u4e8c\uff1a\u7206 ``long long``\u3002  \n\n\u4f60\u4f1a\u8bf4\uff1a$10^{18}$ \u600e\u4e48\u4f1a\u7206 ``long long`` \u5462\uff1f  \n\n\u5b9e\u9645\u4e0a\uff0c\u5728\u5229\u7528\u8fd9\u4e00\u4e0a\u754c\u65f6\uff0c\u4e00\u65e6\u8d85\u8fc7\u4e0a\u754c\uff0c\u51e0\u4e4e\u4e00\u5b9a\u662f\u8d85\u51fa ``long long`` \u8303\u56f4\u7684\u3002  \n\n\u600e\u4e48\u529e\uff1f\u8fd9\u4e00\u70b9\u5f88\u591a\u4eba\u7528\u4e86\u9664\u6cd5\u6216\u8005\u6d6e\u70b9\u6570\u7684\u65b9\u5f0f\uff0c\u7136\u800c\uff0c\u8fd9\u4e00\u505a\u6cd5\u5e76\u4e0d\u662f\u5f88\u5feb\u3002\u6211\u4eec\u4e0d\u59a8\u4f7f\u7528 ``__int128`` \uff0c\u6539\u7528\u4e58\u6cd5\u4f1a\u5e26\u6765\u5f88\u5927\u7684\u4f18\u5316\uff0c\u4e8b\u5b9e\u8bc1\u660e\uff0c\u8fd9\u4e00\u505a\u6cd5\u53ef\u4ee5\u5230\u6700\u4f18\u89e3\u7b2c\u4e09\u540d\u3002\u8fd9\u4e5f\u662f\u6211\u611f\u89e6\u8f83\u6df1\u7684\u4e00\u70b9\u3002  \n\n\u81f3\u6b64\uff0c\u8be5\u9898\u57fa\u672c\u5f97\u5230\u89e3\u51b3\u3002  \n\n## Part 2 \u4ee3\u7801  \n\n\u6211\u5728\u4ee3\u7801\u91cc\u4f7f\u7528\u7684\u662f ``vector``\u3002\u8fd9\u4e00\u70b9\u9898\u89e3\u533a\u4e5f\u6ca1\u6709\u63d0\u53ca\u7684\uff0c\u5bfc\u81f4\u4e4b\u524d\u9519\u4e86\u4e5f\u6ca1\u6709\u80fd\u53c2\u8003\u7684\uff0c\u8fd9\u7bc7\u9898\u89e3\u52c9\u5f3a\u7b97\u662f\u8865\u5145\u4e86\u3002  \n\n```cpp\n//Author: Velvet on Luogu(uid=443675)\n#include <bits/stdc++.h>\n#define int __int128\n#define F(i,a,b) for(int i=(a);i<=(b);i++)\nusing namespace std;\ninline int read(){int x=0,f=1;char ch=getchar();while(ch<'0'||ch>'9'){if(ch=='-')f=-1;ch=getchar();}while(ch>='0'&&ch<='9'){x=(x<<1)+(x<<3)+(ch^48);ch=getchar();}return x*f;}\ninline void write(int x){if(x<0)x = ~x + 1, putchar('-');if (x > 9) write(x / 10);putchar(x % 10 + '0');}\nconst int N=100005,M=(N<<1),MX=1e18;\nint n,k,p[N];\nvector<int> a,b;\nvoid dfs1(int s,int mul=1){\n\tb.push_back(mul);\n\tif(s>n) return;\n\tfor(int i=1;;i*=p[s]){\n\t\tif(MX<mul*i) {break;}\n\t\tdfs1(s+2,mul*i);\n\t}\n}\nvoid dfs2(int s,int mul=1){\n\ta.push_back(mul);\n\tif(s>n) return;\n\tfor(int i=1;;i*=p[s]){\n\t\tif(MX<mul*i) break;\n\t\tdfs2(s+2,mul*i);\n\t}\n}\nint check(int mid){\n\tint rt=0,r=b.size()-1;\n\tF(i,0,a.size()-1){\n\t\twhile(r>=0&&mid<a[i]*b[r]) r--;\n\t\trt+=r+1;\n\t\tif(r<0) return rt;\n\t}\n\treturn rt;\n}\nsigned main(){\n\tn=read();\n\tF(i,1,n) p[i]=read();\n\tk=read();\n\tdfs1(1);dfs2(2);\n\tsort(a.begin(),a.end());\n\ta.erase(unique(a.begin(),a.end()),a.end());\n\tsort(b.begin(),b.end());\n\tb.erase(unique(b.begin(),b.end()),b.end());\n\tint l=0,r=MX,ans=-1;\n\twhile (l<=r) {\n\t\t__int128 mid=(l+r)>>1;\n\t\tif (check(mid)>=k) r=mid-1,ans=mid;\n\t\telse l=mid+1;\n\t}\n\twrite(ans);\n    return 0;\n}\n\n```\n",
        "postTime": 1681623125,
        "uid": 443675,
        "name": "Turtle_zhu",
        "ccfLevel": 0,
        "title": "CF912E Prime Gift \u9898\u89e3"
    },
    {
        "content": "# \u524d\u8a00\n\n\u8fd9\u9053\u9898\u7528\u5230\u4e86\u65b0\u7684\u5947\u6280\u6deb\u5de7\u2014\u2014\u6298\u534a\u641c\u7d22\uff0c\u6240\u4ee5\u7279\u5730\u5199\u4e00\u5199\u9898\u89e3\u52a0\u6df1\u5370\u8c61\n\n# \u9898\u76ee\n\n[\u6d1b\u8c37](https://www.luogu.com.cn/problem/CF912E)\n\n[CF](http://codeforces.com/problemset/problem/912/E)\n\n# \u8bb2\u89e3\n\n\u9996\u5148\u6211\u4eec\u901a\u8fc7\u66b4\u529b\u6253\u8868\uff0c\u4f7f\u7528\u6700\u5c0f\u7684\u4f46\u6700\u591a\u7684\u8d28\u6570\u7ec4\u6210$[1,10^{18}]$\u4e2d\u7684\u6570\uff0c\u53d1\u73b0\u7ea6\u67097e9\u4e2a\u6570\uff0c\u6240\u4ee5\u5982\u679c\u66b4\u529b\u679a\u4e3e\uff0c\u4e00\u5b9a\u4f1aTLE\n\n\u8fd9\u4e2a\u65f6\u5019\u5f53\u7136\u8981\u8003\u8651\u4e8c\u5206\u7b54\u6848\uff0c\u7136\u540e\u95ee\u9898\u5c31\u6765\u5230\u4e86\u5982\u4f55check\u4e0a\n\n**\u6298\u534a\u641c\u7d22**\uff01\n\n\u5177\u4f53\u7684\uff0c\u6211\u4eec\u5c06\u81f3\u591a16\u4e2a\u6570\u5206\u4e3a\u5c3d\u91cf\u5e73\u5747\u7684\u4e24\u7ec4\n\n\u5bf9\u4e8e\u4e24\u7ec4\uff0c\u6211\u4eec\u90fd\u8dd1\u51fa\u6240\u6709\u7684\u5728$[1,10^{18}]$\u4e2d\u7684\u6570\n\n\u679a\u4e3e\u7b2c\u4e00\u4e2a\u7ec4\u4e2d\u6240\u6709\u7684\u6570\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e8c\u5206\u5728\u53e6\u4e00\u4e2a\u7ec4\u4e2d\u6c42\u51fa\u7b54\u6848\uff0c\u6700\u540e\u4e0e\u5916\u5c42\u4e8c\u5206\u7684\u7b54\u6848\u8fdb\u884c\u6bd4\u8f83\u5c31\u884c\u4e86\n\n\u5177\u4f53\u53ef\u4ee5\u770b\u770b\u4ee3\u7801\u5b9e\u73b0\n\n# \u4ee3\u7801\n```cpp\n//12252024832524\n#include <cstdio>\n#include <algorithm>\nusing namespace std;\n\ntypedef long long LL;\nconst int MAXN = 16;\nconst int MAXSIZ = 5000005;\nint n;\nint a[MAXN],b[MAXN],lena,lenb;\nLL A[MAXSIZ],B[MAXSIZ],aa,bb,k;\n\nLL Read()\n{\n\tLL x = 0,f = 1;char c = getchar();\n\twhile(c > '9' || c < '0'){if(c == '-')f = -1;c = getchar();}\n\twhile(c >= '0' && c <= '9'){x = (x*10) + (c^48);c = getchar();}\n\treturn x * f;\n}\nvoid Put1(LL x)\n{\n\tif(x > 9) Put1(x/10);\n\tputchar(x%10^48);\n}\nvoid Put(LL x,char c = -1)\n{\n\tif(x < 0) putchar('-'),x = -x;\n\tPut1(x);\n\tif(c >= 0) putchar(c);\n}\ntemplate <typename T>T Max(T x,T y){return x > y ? x : y;}\ntemplate <typename T>T Min(T x,T y){return x < y ? x : y;}\ntemplate <typename T>T Abs(T x){return x < 0 ? -x : x;}\n\nvoid dfs1(int x,int MAX,LL val)\n{\n    if(val != 1) A[++aa] = val;\n    for(int i = x;i <= MAX;++ i)\n        if(1.0 * val * a[i] <= 1e18)\n            dfs1(i,MAX,val*a[i]);\n}\nvoid dfs2(int x,int MAX,LL val)\n{\n    if(val != 1) B[++bb] = val;\n    for(int i = x;i <= MAX;++ i)\n        if(1.0 * val * b[i] <= 1e18)\n            dfs2(i,MAX,val*b[i]);\n}\nbool check(LL x)\n{\n    LL ret = 0;\n    ret += upper_bound(A+1,A+aa+1,x) - A - 1;\n    for(int i = 1;i <= aa;++ i)//\u5185\u5c42\u4e8c\u5206\u7edf\u8ba1\u4e2a\u6570\n    {\n        LL dz = upper_bound(B+1,B+bb+1,x/A[i]) - B - 1;\n        if(!dz) break;\n        ret += dz;\n    }\n    return ret >= k;//\u6bd4\u8f83\n}\n\nint main()\n{\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n    n = Read();\n    for(int i = 1;i <= n;++ i)//\u5206\u7ec4\n        if(i & 1) a[++lena] = Read();\n        else b[++lenb] = Read();\n    k = Read();\n    dfs1(1,lena,1); dfs2(1,lenb,1);//\u5206\u7ec4\u8dd1\n    A[++aa] = 1;//\u6ce8\u610f\u67091\uff0c\u770b\u6837\u4f8b\u89e3\u91ca\uff01\n    sort(A+1,A+aa+1);\n    sort(B+1,B+bb+1);//\u4e8c\u5206\u7684\u524d\u63d0\u5f53\u7136\u662f\u8981\u6392\u5e8f\n    LL l = 0,r = 1e18,ans = 1e18;\n    while(l <= r)//\u5916\u5c42\u4e8c\u5206\u679a\u4e3e\u7b54\u6848\n    {\n        LL mid = (l+r) >> 1;\n        if(check(mid)) ans = mid,r = mid-1;\n        else l = mid+1;\n    }\n    Put(ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1595157302,
        "uid": 137437,
        "name": "PPL_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF912E \u3010Prime Gift\u3011"
    }
]
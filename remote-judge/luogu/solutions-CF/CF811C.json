[
    {
        "content": "\u5b9a\u4e49\u53d8\u91cf$g[i][j]$\uff0c\u5f53\u533a\u95f4$[i,j]$\u5408\u6cd5\u65f6\uff0c$g[i][j]$\u4e3a\u6240\u6709\u5728\u533a\u95f4$[i,j]$\u4e2d\u7684\u4e0d\u540c\u6570\u5f02\u6216\u548c\uff1b\u5426\u5219$g[i][j]=0$.\n\n\u5b9a\u4e49\u53d8\u91cf$f[i][j]$\uff0c\u8868\u793a\u6240\u6709\u6ee1\u8db3$i<=l<=r<=j$\u4e14\u5408\u6cd5\u7684$[l,r]$\u4e2d,$g[i][j]$\u6700\u5927\u662f\u591a\u5c11\u3002\u53ef\u4ee5\u7528\u533a\u95f4$DP$\uff0c\u679a\u4e3e\u957f\u5ea6$len$\u540e\u8f6c\u79fb\uff1a\n\n$f[i][j]=max(f[i][j-1],f[i+1][j],g[i][j])$\n\n\u4e8e\u662f\u8bbe$dp[i]$\u8868\u793a\u5728$[1,i]$\u4e2d\u9009\u62e9\u82e5\u5e72\u533a\u95f4\uff0c\u4e14\u6700\u540e\u4e00\u4e2a\u533a\u95f4\u7684\u53f3\u7aef\u70b9\u4e3a$i$\uff0c\u6240\u6709\u533a\u95f4\u548c\u6700\u5927\u662f\u591a\u5c11\u3002\u8f6c\u79fb\u65b9\u7a0b\u4e3a\uff1a\n\n$dp[i]=max_{j=0\\to i-1}dp[j]+f[j+1][i]$\n\n\u4ee3\u7801\uff1a\n\n```\n\n#include<iostream>\n#include<cstdio>\n#include<cstdlib>\n#include<cstring>\n#include<string>\n#include<algorithm>\n#include<math.h>\nusing namespace std;\n\nconst int N=5005;\nint n,a[N],f[N][N],dp[N];\nint l[N],r[N],cnt[N],used[N];\n\nvoid init()\n{\n\tint i,j;\n\tscanf(\"%d\",&n);\n\tfor(i=1;i<=n;++i)\n\t\tscanf(\"%d\",&a[i]),++cnt[a[i]];\n\tfor(i=n;i;--i) l[a[i]]=i;\n\tfor(i=1;i<=n;++i) r[a[i]]=i; \n}\n\nvoid calc(int lpos)\n{\n\tint i,nowri=0,nowcnt=0;\n\tfor(i=5000;~i;--i) used[i]=0;\n\tint now=0;\n\tfor(i=lpos;i<=n;++i)\n\t\tif(!used[a[i]])\n\t\t{\n\t\t\tused[a[i]]=1;now^=a[i];\n\t\t\tif(l[a[i]]<lpos) return;\n\t\t\tnowri=max(nowri,r[a[i]]);\n\t\t\tnowcnt+=cnt[a[i]];\n\t\t\tif(nowri-lpos+1==nowcnt) f[lpos][nowri]=now;\n\t\t}\n}\n\nvoid work()\n{\n\tint i,j,len,l,r;\n\tfor(i=1;i<=n;++i) calc(i);\n\tfor(len=2;len<=n;++len)\n\t\tfor(l=1;l<=n-len+1;++l)\n\t\t{\n\t\t\tr=l+len-1;\n\t\t\tf[l][r]=max(f[l][r],max(f[l][r-1],f[l+1][r]));\n\t\t}\n\t\t\n\tfor(i=1;i<=n;++i)\n\t\tfor(j=0;j<i;++j)\n\t\t\tdp[i]=max(dp[i],dp[j]+f[j+1][i]);\n\t\n\tint ans=0;\n\tfor(i=1;i<=n;++i) ans=max(ans,dp[i]);\n\tprintf(\"%d\\n\",ans);\n}\n\nint main()\n{\n\tinit();work();\n\treturn 0;\n}\n\n```",
        "postTime": 1544662684,
        "uid": 31435,
        "name": "hwk0518",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF811C \u3010Vladik and Memorable Trip\u3011"
    },
    {
        "content": "  \u770bn\u5f88\u5c0f\uff0c\u53c8\u662f**\u6700\u4f18\u89e3**\uff0c\u5bb9\u6613\u60f3\u5230\n\n------------\n~~\u66b4\u529b~~dp\n\n   \u4e00\u5f00\u59cb\u8bbe\u8ba1dp[i],\u4ee5i\u5fc5\u987b\u662f\u5408\u6cd5\u533a\u95f4\u7684\u53f3\u7aef\u70b9\n    \n   \u540e\u6765\u60f3\u4e86\u60f3 \uff0c\u53d1\u73b0\u5408\u6cd5\u533a\u95f4\u5f88\u96be\u627e\uff0c\u6240\u4ee5\u5c31\u5e72\u8106\u66b4\u529b\u4e00\u70b9\n    \n   \u8fd9\u4e2ai\u5c31\u4ece1\u5230n\u679a\u4e3e\uff0c\u53cd\u6b63\u975e\u6cd5\u72b6\u6001\u4e5f\u8f6c\u79fb\u4e0d\u8fc7\u6765\n    \n   \u5c31\u662f\u521d\u59cb\u76840\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u6700\u5927\u503c\n    \n   \u7136\u540e\u65b9\u7a0b\u6613\u5f97\n   \n   **dp[i]=max(dp[k])+sum**\n   \n   \u56e0\u4e3aj\u5b83\u4e0d\u4e00\u5b9a\u662f\u5408\u6cd5\u533a\u95f4\u53f3\u7aef\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u8bb0\u5f55\u5728j\u4e4b\u524d\u7684\u5408\u6cd5\u503c\u5f97\u6700\u5927dp\u503c\uff0c\u8f6c\u79fb\u8fc7\u6765\n   \n   \u4ee3\u7801\u5982\u4e0b\n   ```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int maxn=5e3+5;\nint a[maxn],num[maxn],cnt[maxn];\nlong long dp[maxn],maxx[maxn];\nint main(){\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<=n;i++){\n\t\tscanf(\"%d\",&a[i]);\n\t\tnum[a[i]]++;\n\t} \n\tfor(int i=1;i<=n;i++){\n\t\tint no=0;//\u5224\u65ad\u533a\u95f4[j,i]\u662f\u5426\u5408\u6cd5 \n\t\tint sum=0;\n\t\tmemset(cnt,0,sizeof(cnt));\n\t\tfor(int j=i;j>=1;j--){\n\t\t\tif(!cnt[a[j]]){\n\t\t\t\tno++;//\u9047\u5230\u4e00\u4e2a\u65b0\u6570\u5c31\u628ano\u52a0 \n\t\t\t\tsum^=a[j];//\u6709\u591a\u4e2a\u6570\uff0c\u53ea\u7b97\u4e00\u6b21\u5f02\u6216 \n\t\t\t}\n\t\t\tcnt[a[j]]++;\n\t\t\tif(cnt[a[j]]==num[a[j]]) no--;\n\t\t\tif(!no){\n\t\t\t\tdp[i]=max(dp[i],maxx[j-1]+sum);//maxx[j]\u91cc\u5b58\u7684\u662fmax(dp[k]),1<=k<=j;\n\t\t\t}\n\t\t}\n\t\tmaxx[i]=max(maxx[i-1],dp[i]);//\u7531i-1\u524d\u6700\u5927dp\u503c\u548c\u5f53\u524ddp\u503c\u53d6max\uff0c\u6ce8\u610f\u662fi-1\uff0c\u4e0d\u7136\u53ea\u4f1a\u53d6\u5230dp[i] \n\t}\n\tprintf(\"%lld\\n\",maxx[n]);\n\treturn 0;\n}\n```\n",
        "postTime": 1572663603,
        "uid": 231192,
        "name": "\u732a\u5c0f\u5c41",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF811C \u3010Vladik and Memorable Trip\u3011"
    }
]
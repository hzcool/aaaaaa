[
    {
        "content": "\u8fd9\u9898\u771f\u7684\u662f\u7d2b\u9898\u4e48\uff1f\uff1f\uff1f\n\n\u770b\u5230\u7684\u7b2c\u4e00\u60f3\u6cd5\u663e\u7136\u662f\u7ebf\u6bb5\u6811\uff0c\u53ef\u662f\u6211\u4e0d\u4f1a\u554a~~\n\n\u518d\u770b\u4e00\u4e0b\uff0c\u6211\u4eec\u60f3\u5230\u4e86\u2014\u2014\n\n# \u66b4\u529b\n\n\u5c31\u6309\u9898\u76ee\u8bf4\u7684\u505a\u5c31\u884c\u4e86\uff0c\u552f\u4e00\u7684\u4f18\u5316\u5c31\u662f\u5c06\u6bcf\u6b21\u7d2f\u52a0\u7684\u503c\u7d2f\u8ba1\u5728$pos$\u4e2d\uff0c\u6bcf\u6b21\u8f93\u51fa\u7684\u65f6\u5019\u52a0\u4e00\u4e0b\u5c31\u884c\u4e86\u3002\n\n\u8fd8\u8981\u6ce8\u610f \uff1a\u4fee\u6539\u65f6\uff0c\u4fee\u6539\u503c\u8981\u8bb0\u5f97\u51cf\u53bb$pos$\n\n\u4ee3\u7801\u5f88\u77ed \uff1a \n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <cmath>\n#include <algorithm>\n#include <queue>\n\n#define N 100005\n\nusing namespace std;\n\nint n, m;\nlong long a[N], pos;\n\nint main () {\n\tscanf (\"%d%d\", &n, &m);\n\tfor (int i = 1; i <= n; ++i) scanf (\"%lld\", a + i);\n\tfor (int i = 1, opt, v, x; i <= m; ++i) {\n\t\tscanf (\"%d\", &opt);\n\t\tswitch (opt) {\n\t\t\tcase 1 : scanf (\"%d%d\", &v, &x); a[v] = x - pos; break;\n\t\t\tcase 2 : scanf (\"%d\", &x); pos += x; break;\n\t\t\tcase 3 : scanf (\"%d\", &x); printf (\"%lld\\n\", a[x] + pos); break;\n\t\t}\n\t}\n\treturn 0;\n}\n```",
        "postTime": 1570758128,
        "uid": 33006,
        "name": "\u5e7d\u754c\u306e\u51a5\u795e",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF315B \u3010Sereja and Array\u3011"
    },
    {
        "content": "\u770b\u89c1\u6709\u4eba\u7528\n$\\large\\text{}$\n$\\large\\text{\u66b4\u529b}$\n\u505a\u3002\n\n\u53ef\u662f\uff0c\u50cf\u6211\u8fd9\u6837\u4e0d\u613f\u8fc7\u591a\u601d\u8003\u7684\u849f\u84bb\uff0c\u53ea\u60f3\u5230\u4e86\u7ebf\u6bb5\u6811\u3002\n\n\u8fd8\u6ca1\u6709\u4eba\u53d1\n$\\large\\text{\u7ebf\u6bb5\u6811}$\u7684\u9898\u89e3\uff0c\u6211\u5c31\u53d1\u4e00\u7bc7\u5427\uff01\n\n\u5f88\u88f8\u7684\u4e00\u4e2a$\\large\\text{\u7ebf\u6bb5\u6811}$\u3002\n\n\n------------\n![](https://gss1.bdstatic.com/-vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=0622b6a868600c33e474d69a7b253a6a/bd3eb13533fa828bcb5fe85ffe1f4134970a5a09.jpg)\n\n\u5927\u6982\u957f\u8fd9\u6837\uff08\u56fe\u9009\u81ea[\u767e\u5ea6\u767e\u79d1](https://baike.baidu.com/item/%E7%BA%BF%E6%AE%B5%E6%A0%91/10983506?fr=aladdin)\uff09\n\n\u6bcf\u4e00\u4e2a\u8282\u70b9\u7ef4\u62a4\u4e00\u6bb5\u533a\u95f4\u7684\u4fe1\u606f\uff08\u5982\uff1a\u548c\uff0c\u6700\u503c\uff09\u3002\n\n\u666e\u901a\u7ebf\u6bb5\u6811\u53ef\u4ee5\u5904\u7406\u533a\u95f4\u8be2\u95ee\uff0c\u5355\u70b9\u4fee\u6539\uff0c\u5355\u6b21\u8be2\u95ee\u65f6\u95f4\u590d\u6742\u5ea6$O(log n)$\u3002\n\n\u901a\u8fc7Lazy-Tag+\u6807\u8bb0\u4e0b\u4f20\u53ef\u4ee5\u5728$O(log n)$\u7684\u65f6\u95f4\u5185\u5b8c\u6210\u533a\u95f4\u4fee\u6539\u3002\n\n\n------------\n\n\u672c\u9898\u9700\u8981\u7ef4\u62a4\u533a\u95f4\u7684\u548c\u3002\n\n**\u64cd\u4f5c1**\uff1a\u5355\u70b9\u4fee\u6539\u3002\n\n**\u64cd\u4f5c2**\uff1a\u533a\u95f4\u4fee\u6539\u3002\n\n**\u64cd\u4f5c3**\uff1a\u5355\u70b9\u8be2\u95ee\u3002\uff08\u4e0d\u5c31\u662f\u533a\u95f4\u8be2\u95ee\u5417\uff1f\uff1f\uff1f\uff09\n\n\n\n------------\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\nll sum[400004],num[100001],add[400004],n,m;\nvoid build(ll k,ll l,ll r)\n{\n\tif(l==r)\n\t{\n\t\tsum[k]=num[l];\n\t\treturn;\n\t}\n\tll mid=(l+r)>>1;\n\tbuild(k<<1,l,mid);\n\tbuild(k<<1|1,mid+1,r);\n\tsum[k]=sum[k<<1]+sum[k<<1|1];\n}\ninline void Add(ll k,ll l,ll r,ll v)\n{\n\tadd[k]+=v;\n\tsum[k]+=v*(r-l+1);\n}\ninline void pushdown(ll k,ll l,ll r,ll mid)\n{\n\tif(add[k]==0)\n\treturn;\n\tAdd(k<<1,l,mid,add[k]);\n\tAdd(k<<1|1,mid+1,r,add[k]);\n\tadd[k]=0;\n}\nll query(ll k,ll l,ll r,ll x,ll y)\n{\n\tif(l>=x&&r<=y)\n\treturn sum[k];\n\tll mid=(l+r)>>1;\n\tll res=0;\n\tpushdown(k,l,r,mid);\n\tif(x<=mid)res+=query(k<<1,l,mid,x,y);\n\tif(mid<y)res+=query(k<<1|1,mid+1,r,x,y);\n\treturn res;\n}\nvoid change(ll k,ll l,ll r,ll x,ll v)\n{\n\tif(r<x||l>x)\n\t\treturn;\n\tif(l==r&&l==x)\n\t{\n\t\tsum[k]=v;\n\t\treturn;\n\t}\n\tll mid=(l+r)>>1;\n\tpushdown(k,l,r,mid);\n\tchange(k<<1,l,mid,x,v);\n\tchange(k<<1|1,mid+1,r,x,v);\n\tsum[k]=sum[k<<1]+sum[k<<1|1];\n}\nvoid modify(ll k,ll l,ll r,ll x,ll y,ll v)\n{\n\tif(l>=x&&r<=y)\n\t{\n\t\tAdd(k,l,r,v);\n\t\treturn;\n\t}\n\tll mid=(l+r)>>1;\n\tpushdown(k,l,r,mid);\n\tif(x<=mid)modify(k<<1,l,mid,x,y,v);\n\tif(mid<y)modify(k<<1|1,mid+1,r,x,y,v);\n\tsum[k]=sum[k<<1]+sum[k<<1|1];\n}\nint main()\n{\n\tscanf(\"%lld%lld\",&n,&m);\n\tfor(ll i=1;i<=n;i++)\n\tscanf(\"%lld\",num+i);\n\tbuild(1,1,n);\n\twhile(m--)\n\t{\n\t\tll s,i,x;\n\t\tscanf(\"%lld\",&s);\n\t\tif(s==1)\n\t\t{\n\t\t\tscanf(\"%lld%lld\",&i,&x);\n\t\t\tchange(1,1,n,i,x);\n\t\t}\n\t\tif(s==2)\n\t\t{\n\t\t\tscanf(\"%lld\",&x);\n\t\t\tmodify(1,1,n,1,n,x);\n\t\t}\n\t\tif(s==3)\n\t\t{\n\t\t\tscanf(\"%lld\",&x);\n\t\t\tprintf(\"%lld\\n\",query(1,1,n,x,x));\n\t\t}\n\t}\n\treturn 0;\n}\n```\n\u6700\u540e\u5410\u69fd\u4e00\u4e0b\uff1a\u8fd9\u79cd\u9898\u80fd\u88ab\u8bc4\u4e0a$\\color{#9d3dd2}\\text{\u7701\u9009/NOI-}$\uff1f\uff1f\uff1f\uff1f\uff1f",
        "postTime": 1571668685,
        "uid": 180576,
        "name": "Transparent",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF315B \u3010Sereja and Array\u3011"
    },
    {
        "content": "\u9898\u76ee\u5927\u610f\uff1a\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684 $a$ \u6570\u7ec4\uff0c\u6709 $m$ \u6b21\u64cd\u4f5c\u3002\n\n\u64cd\u4f5c 1\uff1a\u8f93\u5165 $x$ \u548c $y$\uff0c\u5c06 $a_x$ \u8d4b\u4e3a $y$\u3002\n\n\u64cd\u4f5c 2\uff1a\u8f93\u5165 $x$\uff0c\u5c06 $a$ \u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u6570\u90fd\u52a0\u4e0a $x$\u3002\n\n\u64cd\u4f5c 3\uff1a\u8f93\u5165 $x$\uff0c\u8f93\u51fa $a_x$ \u7684\u503c\u3002\n\n\u601d\u8def\uff1a\n\n\u4f9d\u9898\u610f\u6a21\u62df\u5373\u53ef\u3002\n\n\u56e0 $n \\le 10^5$\uff0c$O(n^2)$ \u7684\u7b97\u6cd5\u4f1a\u8d85\u65f6\uff0c\u6240\u4ee5\u8981\u8003\u8651\u4f18\u5316\u3002\n\n\u5c06\u64cd\u4f5c 2 \u4e2d\u8f93\u5165\u7684\u503c\u90fd\u52a0\u5165 $sum$ \u53d8\u91cf\u4e2d\uff0c\u64cd\u4f5c 1 \u4fee\u6539\u65f6\u5c06 $y$ \u51cf\u53bb $sum$\uff0c\u64cd\u4f5c 3 \u5c06\u8f93\u51fa\u7684\u503c\u52a0\u4e0a $sum$ \u5373\u53ef\u3002\n\n```cpp\n#include <bits/stdc++.h>\n//\u5305\u88c5\u597d\u7684\u5feb\u8bfb\u5feb\u5199\n#define LL long long\nnamespace IO{\n\tinline LL read(){\n\t    LL x=0,f=1;char ch=getchar();\n\t    for (;!isdigit(ch);ch=getchar())if (ch=='-')f=-1;\n\t    for (;isdigit(ch);ch=getchar())x=(x<<3)+(x<<1)+(ch^48);\n\t    return x*f;\n\t}\n\tinline void write(LL x,char c='\\n'){\n\t    if (x){\n\t    \tif (x<0)x=-x,putchar('-');\n\t    \tchar a[30];short l;\n\t    \tfor (l=0;x;x/=10)a[l++]=x%10^48;\n\t    \tfor (l--;l>=0;l--)putchar(a[l]);\n\t\t}\n\t\telse putchar('0');putchar(c);\n\t}\n}\nusing namespace IO;\nusing namespace std;\n\nconst int N = 1e5+10;\nint a[N],n,m,sum;\nint main(){\n\tn=read(),m=read();\n\tfor (int i=1;i<=n;i++)a[i]=read();\n\tfor (int i=1;i<=m;i++){\n\t\tint opt=read(),x=read(),y;\n\t\tif (opt==1)y=read(),a[x]=y-sum;\n\t\tif (opt==2)sum+=x;\n\t\tif (opt==3)write(a[x]+sum);\n\t}\n\treturn 0;\n}",
        "postTime": 1651974874,
        "uid": 518232,
        "name": "dage666",
        "ccfLevel": 0,
        "title": "CF315B\u89e3\u9898\u62a5\u544a"
    },
    {
        "content": "\u8fd9\u9898\u770b\u8d77\u6765\u5f88\u50cf\u7ebf\u6bb5\u6811\uff0c\u4f46\u4ed4\u7ec6\u8bfb\u4e00\u4e0b\u9898\u5c31\u4f1a\u53d1\u73b0\u91cc\u9762\u6839\u672c\u4e0d\u662f\u533a\u95f4\u52a0\u51cf\uff0c\u800c\u662f\u8981\u6574\u4f53\u8fdb\u884c\u52a0\u51cf\u2026\u2026\n\n\u90a3\u53ea\u9700\u8981\u4e00\u4e2a $cnt$ \u8bb0\u5f55\u4e00\u4e0b\u6bcf\u6b21\u7ed9\u6574\u4f53\u52a0\u4e0a\u7684\u503c\u5c31\u884c\u4e86\u3002\n\n\u9700\u8981\u6ce8\u610f\u8981\u7ed9\u6bcf\u4e00\u6b21\u4fee\u6539\u7684\u503c\u51cf\u53bb\u5f53\u524d\u7684 $cnt$\uff0c\u56e0\u4e3a\u6539\u8fc7\u7684\u6570\u5e94\u8be5\u4e0d\u4f1a\u88ab\u524d\u9762\u7684\u52a0\u51cf\u6240\u5f71\u54cd\uff0c\u5373\u4f7f\u6709\u53ef\u80fd\u51fa\u73b0\u8d1f\u6570\u4e5f\u662f\u6b63\u5e38\u60c5\u51b5\uff0c\u53cd\u6b63\u6700\u540e\u52a0 $cnt$ \u7684\u65f6\u5019\u4f1a\u8865\u9f50\u6210\u6b63\u6570\u3002\n\n\u5efa\u8bae\u7ed3\u5408\u4ee3\u7801\u6765\u770b\u5206\u6790\uff0c\u539f\u4ee3\u7801\uff1a\n\n```\n#include<iostream>\n#include<cstring>\nusing namespace std;\n\nint a[100100];\nlong long cnt = 0;\n\nint mian()\n{\n    int n = 0, m = 0;\n\n    scanf(\"%d%d\", &n, &m);\n\n    for(int i = 1; i <= n; i++)\n\t{\n\t\tscanf(\"%d\", &a[i]);\n\t}\n\t\n\tint x = 0, y = 0, z = 0;\n\tfor(int i = 1; i <= m; i++)\n\t{\n\t\tscanf(\"%d%d\", &x, &y);\n\t\tif(x == 1)\n\t\t{\n\t\t\tscanf(\"%d\", &z);\n\t\t\ta[y] = z - cnt;\n\t\t}\n\t\telse if(x == 2)\n\t\t{\n\t\t\tcnt += y;\n\t\t}\n\t\telse if(x == 3)\n\t\t{\n\t\t\tprintf(\"%d\\n\", a[y] + cnt);\n\t\t}\n\t}\n\n    return 0;\n}\n```",
        "postTime": 1644917298,
        "uid": 343311,
        "name": "PeterBei",
        "ccfLevel": 5,
        "title": "CF315B Sereja and Array \u9898\u89e3"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF315B)\n\n\u53c8\u662f\u4e00\u9053\u66b4\u529b\u679a\u4e3e\u9898\u3002\n\n\n------------\n### \u5206\u6790\n\n\u505a\u9898\u5148\u8981\u770b\u6570\u636e\uff0c\u8fd9\u6837\u53ef\u4ee5\u5224\u5b9a\u7528\u7ebf\u6bb5\u6811\u8fd8\u662f\u66b4\u529b\u3002\u5f88\u663e\u7136\uff0c\u6570\u636e\u8fd9\u4e48\u5927\uff0c\u5982\u679c\u7b2c\u4e8c\u79cd\u64cd\u4f5c\u66b4\u529b\u7528\u53cc\u91cd\u5faa\u73af\u80af\u5b9a ```TLE``` \u3002\u6240\u4ee5\u5982\u679c\u6211\u4eec\u7528\u66b4\u529b\u7684\u8bdd\uff0c\u5fc5\u987b\u60f3\u529e\u6cd5\u4f18\u5316\u3002\n\n\n------------\n### \u4f18\u5316\u4e0e\u6b65\u9aa4\n\n\u7ecf\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684\u53d1\u73b0\uff0c\u6211\u4eec\u505a\u7b2c\u4e8c\u79cd\u64cd\u4f5c\u65f6\u5e76\u4e0d\u9700\u8981\u6bcf\u6b21\u5faa\u73af\u53bb\u6539\u53d8\u6570\u7ec4\u91cc\u9762\u7684\u503c\uff0c\u53ef\u4ee5\u7528\u4e00\u4e2a\u53d8\u91cf ```pos``` \u53bb\u8bb0\u5f55\u6bcf\u6b21\u8c03\u6574\u7684\u503c\uff0c\u4e5f\u5c31\u662f\u8bf4 ```pos``` \u91cc\u9762\u5b58\u50a8\u7740\u6bcf\u6b21\u7d2f\u52a0\u7684\u503c\uff0c\u6700\u540e\u8f93\u51fa\u7684\u65f6\u5019\u9700\u52a0\u4e0a ```pos``` \u5c31\u884c\u4e86\u3002\n\n\u6211\u4eec\u4e00\u6b65\u6b65\u6765\u5b9e\u73b0\u3002\n\n1. \u628a ```a[i]``` \u8d4b\u503c\u4e3a ```x``` \u3002\n\n\u8fd9\u4e00\u6b65\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\uff0c\u53ea\u9700\u8981\u6ce8\u610f\u4fee\u6539\u65f6\u5f97\u51cf\u53bb ```pos``` \u3002\n\n```\nif(choose==1){\n    long long sub,x;\n    scanf(\"%lld%lld\",&sub,&x);\n    a[sub]=x-pos;\n}\n```\n\n2. \u628a\u6570\u7ec4 ```a``` \u91cc\u9762\u6bcf\u4e2a\u6570\u52a0 ```x``` \u3002\n\n\u6309\u7167\u4e0a\u9762\u8bf4\u7684\uff0c\u7d2f\u52a0\u9700\u8981\u4fee\u6539\u7684\u503c\u3002\n\n```\nelse if(choose==2){\n    long long x;\n    scanf(\"%lld\",&x);\n    pos+=x;\n}\n```\n\n3. \u67e5\u8be2\u6570\u7ec4\u4e2d\u7684\u67d0\u4e2a\u5143\u7d20\u3002\n\n\u8fd9\u4e5f\u5f88\u7b80\u5355\uff0c\u4e0d\u8fc7\u8f93\u51fa\u65f6\u8bb0\u5f97\u7684\u52a0\u4e0a ```pos``` \u3002\n```\nelse if(choose==3){\n    long long x;\n    scanf(\"%lld\",&x);\n    printf(\"%lld\\n\",a[x]+pos);\n}\n```\n\n\n\n------------\n### \u5b8c\u6574 ```AC``` \u4ee3\u7801\n\n```\n#include<iostream>\n#include<cstdio>\nusing namespace std;\nlong long n,m,a[100010],pos;\nint main()\n{\n    scanf(\"%lld%lld\",&n,&m);\n    for(long long i=1;i<=n;i++)scanf(\"%lld\",&a[i]);\n    for(long long i=1;i<=m;i++){\n        long long choose;\n        scanf(\"%lld\",&choose);\n        if(choose==1){\n            long long sub,x;\n            scanf(\"%lld%lld\",&sub,&x);\n            a[sub]=x-pos;\n        }else if(choose==2){\n            long long x;\n            scanf(\"%lld\",&x);\n            pos+=x;\n        }else if(choose==3){\n            long long x;\n            scanf(\"%lld\",&x);\n            printf(\"%lld\\n\",a[x]+pos);\n        }\n    }\n    return 0;\n}\n```\n",
        "postTime": 1638597167,
        "uid": 355424,
        "name": "Lish_Xizse",
        "ccfLevel": 0,
        "title": "CF315B\u9898\u89e3"
    },
    {
        "content": "### 0x01 \u601d\u8def\n\u8003\u8651 **\u6811\u72b6\u6570\u7ec4**\u3002  \n\u8fd9\u9898\u548c [\u3010\u6a21\u677f\u3011\u6811\u72b6\u6570\u7ec42](https://www.luogu.com.cn/problem/P3368) \u5f88\u50cf\uff0c\u90fd\u662f **\u533a\u95f4\u52a0\u6cd5** \u548c **\u5355\u70b9\u67e5\u8be2**\u3002  \n\n\u5bf9\u4e8e\u64cd\u4f5c $2$ \uff0c\u7ed9\u6574\u4e2a\u5e8f\u5217\u52a0\u4e0a $x$ \u5373\u53ef\u3002  \n\u5bf9\u4e8e\u64cd\u4f5c $3$ \uff0c\u5355\u70b9\u67e5\u8be2 $x$ \u5373\u53ef\u3002  \n\n\u64cd\u4f5c $1$ \u6700\u590d\u6742\u3002  \n\u8003\u8651\u600e\u4e48\u5c06 \u5355\u70b9\u8d4b\u503c \u8f6c\u5316\u6210 \u533a\u95f4\u52a0\u6cd5\u5462\uff1f  \n\u9996\u5148\uff0c\u628a \u533a\u95f4\u52a0\u6cd5 \u8f6c\u5316\u6210 \u5355\u70b9\u52a0\u6cd5\u3002  \n\u8fd9\u5f88\u5bb9\u6613\uff0c\u56e0\u4e3a\u6211\u4eec\u77e5\u9053 \u5355\u70b9\u52a0\u6cd5 \u5c31\u662f\u52a0\u4e00\u4e2a\u957f\u5ea6\u4e3a $1$ \u7684\u533a\u95f4\u3002  \n\u7136\u540e\uff0c\u628a \u5355\u70b9\u8d4b\u503c \u8f6c\u5316\u6210 \u5355\u70b9\u52a0\u6cd5\u3002  \n\u8bbe\u539f\u6765\u7684\u503c\u4e3a $p$ \uff0c\u65b0\u7684\u503c\u4e3a $p$  \n\u5219\u6211\u4eec\u8981\u628a $p \\gets q$  \n\u8f6c\u5316\u6210 $p \\gets p + x$\u3002  \n\u663e\u7136\uff0c $x \\gets q - p$\u3002  \n\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6210\u529f\u628a \u5355\u70b9\u8d4b\u503c \u8f6c\u5316\u4e3a \u533a\u95f4\u52a0\u6cd5 \u4e86\uff01\n\n\u6709\u4e00\u4e2a\u5751\u70b9\uff1a**\u8981\u5f00long long**\uff01  \n\u65f6\u95f4\u590d\u6742\u5ea6\uff1a$\\Theta(m\\times\\log n)$\uff0c\u5e38\u6570\u6781\u5c0f\u3002\n\n------------\n### 0x02 \u4ee3\u7801\n```cpp\n#include <cstdio>\n#include <cstdlib>\n#define fo(i_,j_,k_) for(int i_=j_;i_<=k_;++i_)\n#define fr(i_,j_,k_) for(int i_=j_;i_>=k_;--i_)\n#define It(type_) type_::iterator\n#define rg register\n#define rtn return\n#define il inline\n\ntypedef long long ll;\nconst int kMaxn = 100005;\nll arr[kMaxn];\nint n,m,ID,IsHaveTypeI,IsHaveTypeII;\nstruct query\n{\n\tint id;\n\tll a,b;\n\tvoid Scan(void)\n\t{\n\t\tscanf(\"%d\",&id);\n\t\tif(id==1)scanf(\"%lld%lld\",&a,&b);\n\t\telse scanf(\"%lld\",&a);\n\t}\n}q[kMaxn];\n\nvoid Init(void)\n{\n\tscanf(\"%d%d\",&n,&m);\n\tfo(i,1,n)\n\t\tscanf(\"%lld\",arr+i);\n\tfo(i,1,m)\n\t{\n\t\tq[i].Scan();\n\t\tif(q[i].id==1)\n\t\t\tIsHaveTypeI = 1;\n\t\tif(q[i].id==2)\n\t\t\tIsHaveTypeII = 1;\n\t}\n}\n\nnamespace SubtaskI\n{\n\tvoid Solve(void)\n\t{\n\t\tfo(i,1,m)\n\t\t{\n\t\t\tif(q[i].id==1)arr[q[i].a]=q[i].b;\n\t\t\tif(q[i].id==2)fo(j,1,n)arr[j]+=q[i].a;\n\t\t\tif(q[i].id==3)printf(\"%lld\\n\",arr[q[i].a]);\n\t\t}\n\t\texit(0);\n\t}\n}\nnamespace SubtaskII\n{\n\tvoid Solve(void)\n\t{\n\t\tll add=0;\n\t\tfo(i,1,m)\n\t\t{\n\t\t\tif(q[i].id==2)add+=q[i].a;\n\t\t\tif(q[i].id==3)printf(\"%lld\\n\",arr[q[i].a]+add);\n\t\t}\n\t\texit(0);\n\t}\n}\n\nnamespace SubtaskIII\n{\n#define lowbit(x) (x&-x)\n\tll c[kMaxn];\n\tvoid Add(int ind,ll add)\n\t{\n\t\tfor(;ind<=n;ind+=lowbit(ind))\n\t\t\tc[ind]+=add;\n\t}\n\tll Query(int x)\n\t{\n\t\tll sum=0;\n\t\tfor(;x;x-=lowbit(x))\n\t\t\tsum+=c[x];\n\t\trtn sum;\n\t}\n\tvoid Solve(void)\n\t{\n\t\tfo(i,1,n)\n\t\t\tAdd(i,arr[i]-arr[i-1]);\n\t\tfo(i,1,m)\n\t\t{\n\t\t\tif(q[i].id==1)\n\t\t\t{\n\t\t\t\tll T = q[i].b - Query(q[i].a);\n\t\t\t\tAdd(q[i].a,T);\n\t\t\t\tAdd(q[i].a+1,-T);\n\t\t\t}\n\t\t\tif(q[i].id==2)Add(1,q[i].a);\n\t\t\tif(q[i].id==3)printf(\"%lld\\n\",Query(q[i].a));\n\t\t}\n\t}\n\t\t\n}\n\nint main()\n{\n// \tfreopen(\"array.in\",\"r\",stdin);\n// \tfreopen(\"array.out\",\"w\",stdout);\n\tInit();\n\tif((n<=1000&&m<=1000) || (IsHaveTypeII == 0))\n\t\tSubtaskI::Solve();\n\telse if(IsHaveTypeI == 0)\n\t\tSubtaskII::Solve(); \n\telse\n\t\tSubtaskIII::Solve();\n    rtn 0;\n}\n```\n\u8bf7\u81ea\u884c\u5ffd\u7565 $\\texttt {SubtastI}\\ \\&\\ \\texttt{SubtastII}$\u3002",
        "postTime": 1613638439,
        "uid": 366338,
        "name": "fjy666",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u3010CF315B Sereja and Array\u3011"
    },
    {
        "content": "\u770b\u5230\u7b2c\u4e00\u773c\u2014\u2014\u7ebf\u6bb5\u6811\uff1f\uff1f\uff1f\n\n~~\u51fa\u4e8epj-~~ \u6211\u4e0d\u4f1a\uff0c\u53ea\u597d\u76f4\u63a5\u6253\u66b4\u529b\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nvector<int> a;\nvoid pls(int x){\n    for(int i=0;i<a.size();i++){\n        a[i]+=x;\n    }\n}\nint main(){\n    int n,m,x,op,k;\n    cin>>n>>m;\n    for (int i=0;i<n;i++){\n        cin>>x;\n        a.push_back(x);\n    }\n    for (int i=0;i<m;i++){\n        cin>>op;\n        if(op==3){\n            cin>>x;\n            cout<<a[x-1]<<endl;\n        }\n        if(op==2){\n            cin>>x;\n            pls(x);\n        }\n        if(op==1){\n            cin>>x>>k;\n            a[x-1]=k;\n        }\n    }\n}\n```\n\u606d\u559c\uff1a![](https://tva1.sinaimg.cn/large/007S8ZIlgy1genlcefdyyj312i0a6wex.jpg)\n\n\u4e8e\u662f\u80af\u5b9a\u8981\u52a0\u4e00\u70b9\u4f18\u5316\uff0c\u4f46\u6211\u4e0d\u4f1a\u7ebf\u6bb5\u6811\uff0c\u4e8e\u662f\uff1a\n\n- \u7ecf\u8fc7\u7b80\u5355\u89c2\u5bdf\uff0c\u53d1\u73b0\u64cd\u4f5c2\u53f7\u8017\u65f6\u6700\u5927\uff0c\u5c31\u60f3\u529e\u6cd5\u4f18\u5316\n\n\u57fa\u672c\u601d\u8def\uff1a\u7531\u4e8e\u662f\u5168\u6570\u7ec4\u800c\u975e\u90e8\u5206+\uff0c\u53ef\u4ee5\u7528```pos```\t\u53d8\u91cf\u8bb0\u5f55\u201c\u8c03\u6574\u91cf\u201d\uff0c\u4f7f\u5f97\u4e0d\u9700\u8981\u6bcf\u4e00\u6b21\u64cd\u4f5c2\u90fd\u904d\u5386\u4e00\u904d\u6570\u7ec4\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nvector<int> a;\nint main(){\n    int n,m,x,op,k,pos=0;\n    cin>>n>>m;\n    for (int i=0;i<n;i++){\n        cin>>x;\n        a.push_back(x);\n    }\n    for (int i=0;i<m;i++){\n        cin>>op;\n        if(op==3){\n            cin>>x;\n            cout<<a[x-1]+pos<<endl;//\u8f93\u51fa\u65f6\u52a0\u4e0a\u201c\u8c03\u6574\u91cf\u201d\n        }\n        if(op==2){\n            cin>>x;\n            pos+=x;//\u8c03\u6574\u91cf\u589e\u52a0\n        }\n        if(op==1){\n            cin>>x>>k;\n            a[x-1]=k-pos;//\u76f4\u63a5\u8d4b\u503c\uff0c\u8981\u53d6\u6d88\u8c03\u6574\u91cf\u7684\u5f71\u54cd\uff0c\u9700\u8981\u51cf\u53bb\u8c03\u6574\u91cf\uff0c\u5426\u5219\u540e\u9762\u5982\u679c\u8981\u8f93\u51fa\u662f\u4f1a\u591a\u201c\u5f53\u524d\u7684pos\u201d\n        }\n    }\n}\n\n```\n",
        "postTime": 1589111480,
        "uid": 251551,
        "name": "YUYGFGG",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF315B \u3010Sereja and Array\u3011"
    }
]
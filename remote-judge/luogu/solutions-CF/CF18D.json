[
    {
        "content": "\u6709\u51e0\u4e2a\u6027\u8d28\u6bd4\u8f83\u663e\u7136\uff0c\u6bd4\u5982\u73b0\u5728\u5982\u679c\u8981 sell $7$\uff0c\u5fc5\u7136\u9009\u62e9\u6700\u63a5\u8fd1\u8fd9\u4e00\u5929\u7684 win $7$\u3002\n\n\u6240\u4ee5\u53ef\u4ee5\u8bb0\u5f55\u6700\u8fd1\u7684 $x$\uff0c\u5c06\u5176\u4e22\u5230\u4e00\u4e2a\u6876\u91cc\u9762\u3002\n\n\u7136\u540e\u5462 \u2026\u2026 \u5bf9\u4e8e\u4e00\u5929\u6765\u8bb2\uff0c\u5982\u679c\u662f win \u90a3\u4e48\uff0c\u5c06 $x$ \u6254\u8fdb\u4e00\u4e2a\u6876\u91cc\u9762\uff0c\u5982\u679c\u662f sell\uff0c\u90a3\u4e48\u6709\u4e24\u4e2a\u51b3\u7b56\uff0c\u7b2c\u4e00\u4e2a\u662f\u4e0d\u5356\u4e86\uff0c\u7b2c\u4e8c\u4e2a\u662f\u5356\uff0c\u4f46\u662f\u8981\u5230\u4e4b\u524d\u90a3\u4e00\u5929\uff0c\u4e5f\u5c31\u662f\u8bf4\u8981\u4e4b\u524d\u90a3\u4e00\u5929\u5230\u73b0\u5728\u90fd\u6ca1\u6709\u5356\u51fa\u4e1c\u897f\u3002\n\n\u8f6c\u79fb\u65b9\u7a0b\u662f\uff1a\n\nwin\uff1a$f_{i,j}=f_{i-1,j}$\u3002\n\nsell\uff1a$f_i=\\max(f_i,f_{pre_x}+x)$\u3002\n\n\u7b2c\u4e8c\u79cd\u6bd4\u8f83\u65b9\u5f0f\u5927\u529b\u4ece $2000$ \u627e\u5230 $0$ \u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u53e6\u5916\uff1a\u662f\u4e8c\u7ef4\u7684\uff0c\u6211\u6709\u4e00\u7ef4\u7528\u4e86 bitset\u3002\n\n\u6700\u540e\u7684\u7b54\u6848\u8fd8\u9700\u8981\u9ad8\u7cbe\u6765\u5904\u7406\uff0c\u6ce8\u610f\u8fd9\u91cc\u4e0d\u80fd\u778e\u641e\uff0c\u663e\u7136 $0$ \u5230 $2000$ \u5177\u6709\u5355\u8c03\u6027\uff0c\u4e5f\u5c31\u53ef\u4ee5\u4ece\u4e0a\u4e00\u4e2a $x$ \u4e58 $2$\uff0c\u5343\u4e07\u4e0d\u8981\u4ece\u5934\u5f00\u59cb\u8ba1\u7b97\u3002\u3002\u3002\n\n\u987a\u4fbf\u538b\u4e86\u4e2a\u4f4d\uff0c\u4e0d\u8fc7\u4e0d\u538b\u4f4d\u4e5f\u6ca1\u4e8b\u3002 (\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <bitset>\n#include <cstring>\n#define int long long\nusing namespace std;\nconst int INF=5005;\nconst int Mod=1e16;\nconst signed Mod1=16;\nint n,x,ans[INF],c[INF],lena,lenc,d[INF],pre[INF],la;\nstring s1;\nbitset<2005> f[INF];\nvoid mul(int x,int y) {\n        for (int i=la; i<=y; i++) {\n                for (int j=1; j<=lenc; j++)\n                        c[j]=c[j]*x;\n                for (int j=1; j<=lenc; j++)\n                        c[j+1]+=c[j]/Mod,c[j]%=Mod;\n                lenc++;\n                while (c[lenc]==0 && lenc>1) lenc--;\n                while (c[lenc]>=Mod) {c[lenc+1]+=c[lenc]/Mod; c[lenc]%=Mod; lenc++;}\n                while (c[lenc]==0 && lenc>1) lenc--;\n        }\n        return;\n}\nvoid jia() {\n        memset(d,0,sizeof d);\n        int len=max(lena,lenc);\n        for (int i=1; i<=len; i++)\n                d[i]+=ans[i]+c[i],d[i+1]+=d[i]/Mod,d[i]%=Mod;\n        len++;\n        while (d[len]==0 && len>1) len--;\n        while (d[len]>=Mod) {d[len+1]+=d[len]/Mod; d[len]%=Mod; len++;}\n        while (d[len]==0 && len>1) len--;\n        lena=len;\n        memcpy(ans,d,sizeof d);\n        return;\n}\nvoid printc() {\n        for (int i=lenc; i>=1; i--) cout<<c[i];\n        cout<<\"\\n\";\n        return;\n}\nsigned main()\n{\n        ios::sync_with_stdio(false);\n        cin>>n;\n        for (int i=1; i<=n; i++) {\n                cin>>s1>>x;\n                if (s1==\"win\") {pre[x]=i; f[i]=f[i-1]; continue;}\n                else {\n                        if (!pre[x]) {f[i]=f[i-1]; continue;}\n                        // cout<<i<<\" \"<<pre[10]<<\"\\n\";\n                        f[pre[x]][x]=1; bool fl=true;\n                        for (int j=2000; j>=0; j--) {\n                                if (f[i-1][j]<f[pre[x]][j]) {f[i]=f[pre[x]]; fl=false; break;}\n                                if (f[i-1][j]>f[pre[x]][j]) {f[i]=f[i-1]; fl=false; break;}\n                        }\n                        if (fl) f[i]=f[i-1];\n                        // f[pre[x]][x]=0;\n                }\n        }\n        // cout<<f[7]<<\"\\n\";\n        // cout<<(1ll<<31);\n        // cout<<f[n]<<\"\\n\";\n        c[1]=1; lenc=1;\n        lena=1; la=1;\n        for (int i=0; i<=2000; i++) {\n                if (!f[n][i]) continue;\n                mul(2,i);\n                jia();\n                la=i+1;\n                // for (int i=lena; i>=1; i--) cout<<ans[i];\n                // cout<<\"\\n\";\n        }\n        printf(\"%lld\",ans[lena]);\n        for (int i=lena-1; i>=1; i--) printf(\"%0*lld\",Mod1,ans[i]);\n        printf(\"\\n\");\n        return 0;\n}\n\n```\n",
        "postTime": 1628471403,
        "uid": 208653,
        "name": "_edge_",
        "ccfLevel": 0,
        "title": "CF18D \u9898\u89e3"
    },
    {
        "content": "\u52a8\u6001\u89c4\u5212\uff0c\u7528\u4e00\u4e2a\u6570\u7ec4\u8868\u793a\u4e8c\u8fdb\u5236\u6570\uff0c\u6765\u8868\u793a\u53ef\u4ee5\u8d5a\u7684\u94b1\uff0c\u8fd9\u91cc\u53ef\u4ee5\u7528stl\u91cc\u9762\u7684bitset\uff0c\u6700\u540e\u4e00\u6b21\u6027\u8f93\u51fa\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528\u9ad8\u7cbe\u5ea6\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n~~~\n#include<cmath>\n#include<queue>\n#include<stack>\n#include<vector>\n#include<cstdio>\n#include<bitset>\n#include<cstring>\n#include<iostream>\n#include<algorithm>\n#include<functional>\nusing namespace std;\ntypedef long long LL;\nconst int low(int x){ return x&-x; }\nconst int mod = 51123987;\nconst int maxn = 5e3 + 10;\nint n, x, pre[maxn];\nchar s[maxn];\nbitset<2005> dp[maxn], y;\nvector<int> ans;\n \nint main()\n{\n    while (~scanf(\"%d\",&n))\n    {\n        memset(pre, 0, sizeof(pre));\n        dp[0] = 0;\tans.clear();\n        for (int i = 1; i <= n; i++)\n        {\n            scanf(\"%s%d\", s, &x);\n            if (s[0] == 'w') { pre[x] = i; dp[i] = dp[i - 1]; }\n            else\n            {\n                if (!pre[x]) dp[i] = dp[i - 1];\n                else\n                {\n                    y = dp[pre[x] - 1];\n                    y[x] = 1;\n                    for (int j = 2000; j >= 0; j--)\n                    {\n                        if (dp[i - 1][j] > y[j]) { dp[i] = dp[i - 1]; break; }\n                        if (dp[i - 1][j] < y[j]) { dp[i] = y; break; }\n                        if (j == 0) dp[i] = y;\n                    }\n                }\n            }\n        }\n        ans.push_back(0);\n        for (int i = dp[n].size() - 1; i >= 0; i--)\n        {\n            int k = 0;\n            for (int j = 0; j < ans.size(); j++)\n            {\n                int now = ans[j];\n                ans[j] = (now * 2 + k) % 10;\n                k = (now * 2 + k) / 10;\n            }\n            if (k) ans.push_back(k); \n            if (dp[n][i])\n            {\n                k = 0; ans[0]++;\n                for (int j = 0; j < ans.size(); j++)\n                {\n                    int now = ans[j];\n                    ans[j] = (now + k) % 10;\n                    k = (now + k) / 10;\n                }\n            }\n        }\n        for (int i = ans.size() - 1; i >= 0; i--) printf(\"%d\", ans[i]);\n        printf(\"\\n\");\n    }\n    return 0;\n}\n~~~\n\u5e0c\u671b\u5bf9\u5927\u5bb6\u6709\u5e2e\u52a9",
        "postTime": 1548633794,
        "uid": 115066,
        "name": "yang2018",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF18D \u3010Seller Bob\u3011"
    },
    {
        "content": "### $\\text{Difficulty : 2000}$\n\n---\n### \u89e3\u9898\u601d\u8def\uff1a\n\n\u8003\u8651\u52a8\u6001\u89c4\u5212\u3002\n\n\u8bb0\u5f55\u4e0b\u6bcf\u4e00\u79cd\u5185\u5b58\u7684\u786c\u76d8\u7684\u4e0a\u4e00\u4e2a\u53ef\u4ee5\u53d6\u5230\u7684\u4f4d\u7f6e\uff0c\u4ee5\u53ca\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u80fd\u53d6\u5230\u7684\u6700\u5927\u4ef7\u503c\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u80fd\u5356\u51fa\u7684\u4f4d\u7f6e\uff0c\u5411\u524d\u627e\u5230\u4e00\u4e2a\u6700\u8fd1\u7684\u80fd\u83b7\u53d6\u7684\u4f4d\u7f6e\uff0c\u52a0\u4e0a\u83b7\u5f97\u7684\u4ef7\u503c\u4e0e\u5f53\u524d\u6700\u5927\u6bd4\u8f83\u5373\u53ef\u3002\u5f62\u5f0f\u5316\u5730\uff0c\u6709\uff1a$f_i=\\max(f_{i-1},f_{last}+2^{num})$\u3002\n\n\u6ce8\u610f\u9700\u8981\u5199\u9ad8\u7cbe\u5ea6\u3002\n\n---\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<bitset>\n#include<string>\n#include<iostream>\nusing namespace std;\nstruct str{\n\tint len,num[2005];\n\tbool operator <(str a){\n\t\tif(len!=a.len)return len<a.len;\n\t\tfor(int i=len;i>=1;i--){\n\t\t\tif(a.num[i]==num[i])continue;\n\t\t\treturn num[i]<a.num[i];\n\t\t}\n\t\treturn 0;\n\t}\n\tstr operator +(str a){\n\t\ta.len=max(a.len,len);\n\t\tfor(int i=1;i<=len;i++){\t\t\n\t\t\ta.num[i]+=num[i],\n\t\t\ta.num[i+1]+=a.num[i]/10;\n\t\t\ta.num[i]=a.num[i]%10;\n\t\t}\n\t\tif(a.num[a.len+1]!=0)a.len++;\n\t\treturn a;\n\t}\n}p[2005],f[5005],x;\nvoid pow(str &a){\n\tfor(int i=a.len;i>=1;i--){\n\t\ta.num[i]*=2;\n\t\ta.num[i+1]+=a.num[i]/10;\n\t\ta.num[i]=a.num[i]%10;\n\t}\n\tif(a.num[a.len+1]!=0)a.len++;\n}\nvoid print(str a){\n\tif(a.len==0){\n\t\tprintf(\"0\\n\");\n\t\treturn;\n\t}\n\tfor(int i=a.len;i>=1;i--)\n\tprintf(\"%d\",a.num[i]);\n\tprintf(\"\\n\");\n}\nvoid init(){\n\tp[0].num[1]=1;\n\tp[0].len=1;\n\tfor(int i=1;i<=2001;i++){\n\t\tp[i]=p[i-1];\n\t\tpow(p[i]);\n\t}\n}\nint n,num[5005],last[5005];\nstring s;\nint main(){\n\tscanf(\"%d\",&n);\n\tinit();\n\tfor(int i=1;i<=n;i++){\n\t\tcin>>s;scanf(\"%d\",&num[i]);\n\t\tf[i]=f[i-1];\n\t\tif(s[0]=='w')last[num[i]]=i;\n\t\telse{\n\t\t\tif(last[num[i]]==0)continue;\n\t\t\tx=f[last[num[i]]]+p[num[i]];\n\t\t\tif(f[i]<x)f[i]=x;\n\t\t}\n\t}\n\tprint(f[n]);\n\treturn 0;\n}\n```\n",
        "postTime": 1645934450,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "CF18D Seller Bob \u9898\u89e3"
    }
]
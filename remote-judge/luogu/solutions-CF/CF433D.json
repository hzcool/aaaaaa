[
    {
        "content": "\u9898\u610f\uff1a\n\n\u4e03\u6d77\u5343\u79cb\u548c\u65e5\u5411\u521b\u5728\u73a9\u6e38\u620f\u3002\u62bd\u8c61\u6765\u8bf4\u662f\u8fd9\u4e48\u4e00\u4e2a\u95ee\u9898\uff1a\n\n\u4e00\u4e2a $n \\times m$ \u7684\u77e9\u9635\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f $0/1$\uff0c\u6709 $q$ \u4e2a\u64cd\u4f5c\uff0c\u6bcf\u4e2a\u64cd\u4f5c\u5f62\u5982 $op,x,y$ \uff0c\u5982\u679c $op$ \u4e3a $1$ \uff0c\u5c31\u5c06 $(x,y)$ \u7684 $0/1$ \u503c\u53d6\u53cd\uff0c\u5982\u679c $op$ \u4e3a $2$ \uff0c\u5c31\u67e5\u8be2 $(x,y)$ \u6240\u5728\u7684\u5168\u4e3a $1$ \u7684\u77e9\u9635\u4e2d\u6700\u5927\u7684\u9762\u79ef\uff08\u5f53\u7136 $(x,y)$ \u672c\u8eab\u4e5f\u5f97\u662f $1$ \uff09\uff0c\u5176\u4e2d $(x,y)$ \u8fd9\u4e2a\u70b9\u662f\u8be5\u77e9\u9635\u56db\u6761\u8fb9\u4e0a\u7684\u4e00\u4e2a\u70b9\u3002\n\n\u9898\u89e3\uff1a\n\n\u8fd9\u5957\u9898\u6d53\u5ea6\u7206\u8868\u554a\u3002\u3002\u4e0d\u7136\u6211\u8fd8\u771f\u4e0d\u4e00\u5b9a\u80fd\u505a\u4e0b\u53bb\u3002\n\n$(i,j)$ \u5728\u8fb9\u754c\u4e0a\uff0c\u4e0d\u59a8\u4ee5\u5de6\u8fb9\u754c\u4e3a\u4f8b\uff0c\u5176\u4f59\u540c\u7406\u3002\u8003\u8651\u7ef4\u62a4 $lft[i][j]$ \u8868\u793a $(i,j)$ \u672c\u8eab\u4e3a $1$ \uff0c\u4e14\u80fd\u5411\u53f3\u62d3\u5c551\u7684\u6700\u8fdc\u8ddd\u79bb\u3002\u540c\u7406\u7ef4\u62a4 $up$ $down$ $right$\u3002\n\n\u67e5\u8be2\u7684\u65f6\u5019\u5c31\u5411\u53f3\u626b\uff0c\u8bb0\u4e00\u4e2a $min_1$ \u8868\u793a\u5411\u4e0a\u7684\u6700\u5c0f\u957f\u5ea6\uff0c$min_2$ \u8868\u793a\u5411\u4e0b\u7684\uff0c\u7136\u540e\u5f53\u524d\u4f4d\u7f6e  $(i,y)$ \u7684\u8d21\u732e\u5c31\u662f $(y-j+1) \\times (min_1+min_2-1)$ \u3002\n\n\u540c\u7406\u7ef4\u62a4\u5176\u5b83\u7684\u5373\u53ef\uff0c\u4ee3\u7801\u4f1a\u6709\u5f88\u591a\u91cd\u590d\u7684\u90e8\u5206\uff0c\u4e00\u5b9a\u8981\u4ed4\u7ec6\u3002\u6211\u5c11\u590d\u5236\u4e86\u4e00\u53e5\u8bdd\u8c03\u4e861h+\u3002\n\n```cpp\n// LUOGU_RID: 94164894\n// by SkyRainWind\n#include <cstdio>\n#include <vector>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\n#define mpr make_pair\n#define debug() cerr<<\"Yoshino\\n\"\n#define rep(i,a,b) for(int (i)=(a);(i)<=(b);(i)++)\n#define pii pair<int,int>\n \nusing namespace std;\n \ntypedef long long LL;\n \nconst int inf = 1e9, INF = 0x3f3f3f3f, maxn = 1005;\n \nint n,m,q,a[maxn][maxn],ut[maxn][maxn][4];\t// 0 left 1 right 2 up 3 down\n \nsigned main(){\n\tscanf(\"%d%d%d\",&n,&m,&q);\n\tfor(int i=1;i<=n;i++)\n\t\tfor(int j=1;j<=m;j++)scanf(\"%d\",&a[i][j]);\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=1;j<=m;){\n\t\t\tif(a[i][j] == 0){\n\t\t\t\tut[i][j][0] = 0;\n\t\t\t\t++ j;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tint cnt = 0;\n\t\t\twhile(a[i][j]){\n\t\t\t\tut[i][j][0] = ++ cnt;\n\t\t\t\t++ j;\n\t\t\t}\n\t\t}\n\t\tfor(int j=m;j>=1;){\n\t\t\tif(a[i][j] == 0){\n\t\t\t\tut[i][j][1] = 0;\n\t\t\t\t-- j;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tint cnt = 0;\n\t\t\twhile(a[i][j]){\n\t\t\t\tut[i][j][1] = ++ cnt;\n\t\t\t\t-- j;\n\t\t\t}\n\t\t}\n\t}\n\tfor(int j=1;j<=m;j++){\n\t\tfor(int i=1;i<=n;){\n\t\t\tif(a[i][j] == 0){\n\t\t\t\tut[i][j][2] = 0;\n\t\t\t\ti ++;continue;\n\t\t\t}\n\t\t\tint cnt = 0;\n\t\t\twhile(a[i][j] == 1){\n\t\t\t\tut[i][j][2] = ++ cnt;\n\t\t\t\t++ i;\n\t\t\t}\n\t\t}\n\t\tfor(int i=n;i>=1;){\n\t\t\tif(a[i][j] == 0){\n\t\t\t\tut[i][j][3] = 0;\n\t\t\t\ti --;continue;\n\t\t\t}\n\t\t\tint cnt = 0;\n\t\t\twhile(a[i][j] == 1){\n\t\t\t\tut[i][j][3] = ++ cnt;\n\t\t\t\t-- i;\n\t\t\t}\n\t\t}\n\t}\n\t\n\twhile(q --){\n\t\tint op,x,y;scanf(\"%d%d%d\",&op,&x,&y);\n\t\tif(op == 2){\n\t\t\tif(a[x][y] == 0){\n\t\t\t\tputs(\"0\");\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t// 0 left 1 right 2 up 3 down\n\t\t\tint ans = ut[x][y][2] + ut[x][y][3] - 1;\n\t\t\t\n\t\t\tint mn1=ut[x][y][2], mn2 = ut[x][y][3];\n\t\t\tfor(int i=y+1;i<=y+ut[x][y][1]-1;i++){\n\t\t\t\tmn1 = min(mn1, ut[x][i][2]);\n\t\t\t\tmn2 = min(mn2, ut[x][i][3]);\n\t\t\t\tans = max(ans, (mn1 + mn2 - 1) * (i-y+1));\n\t\t\t}\t// to rightmost\n\t\t\t\n\t\t\tmn1=ut[x][y][2], mn2 = ut[x][y][3];\n\t\t\tfor(int i=y-1;i>=y-ut[x][y][0]+1;i--){\n\t\t\t\tmn1 = min(mn1, ut[x][i][2]);\n\t\t\t\tmn2 = min(mn2, ut[x][i][3]);\n\t\t\t\tans = max(ans, (mn1 + mn2 - 1) * (y-i+1));\n\t\t\t}\t// to leftmost\n\t\t\t\n\t\t\tmn1=ut[x][y][0], mn2 = ut[x][y][1];\n\t\t\tans = max(ans, mn1 + mn2 - 1);\n\t\t\t\n\t\t\tfor(int i=x+1;i<=x+ut[x][y][3]-1;i++){\n\t\t\t\tmn1 = min(ut[i][y][0], mn1);\n\t\t\t\tmn2 = min(ut[i][y][1], mn2);\n\t\t\t\tans = max(ans, (mn1 + mn2 - 1) * (i-x+1));\n\t\t\t} \t// to bottom\n\t\t\tmn1 = ut[x][y][0], mn2 = ut[x][y][1];\n\t\t\t\n\t\t\tfor(int i=x-1;i>=x-ut[x][y][2]+1;i--){\n\t\t\t\tmn1 = min(ut[i][y][0], mn1);\n\t\t\t\tmn2 = min(ut[i][y][1], mn2);\n\t\t\t\tans = max(ans, (mn1 + mn2 - 1) * (x-i+1));\n\t\t\t} \t// to top\n\t\t\tprintf(\"%d\\n\",ans);\n\t\t}else{\n\t\t\ta[x][y] ^= 1;\n\t\t\tif(a[x][y] == 1){\n\t\t\t\tut[x][y][1] = ut[x][y+1][1] + 1;\n\t\t\t\tut[x][y][0] = ut[x][y-1][0] + 1;\n\t\t\t\tut[x][y][2] = ut[x-1][y][2] + 1;\n\t\t\t\tut[x][y][3] = ut[x+1][y][3] + 1;\n\t\t\t}else ut[x][y][0] = ut[x][y][1] = ut[x][y][2] = ut[x][y][3] = 0;\n\t\t\n\t\t\tfor(int i=y-1;i>=1;i--){\n\t\t\t\tif(a[x][i] == 0)break;\n\t\t\t\tut[x][i][1] = ut[x][i+1][1] + 1;\n\t\t\t}\n\t\t\tfor(int i=y+1;i<=m;i++){\n\t\t\t\tif(a[x][i] == 0)break;\n\t\t\t\tut[x][i][0] = ut[x][i-1][0] + 1;\n\t\t\t}\n\t\t\tfor(int i=x+1;i<=n;i++){\n\t\t\t\tif(a[i][y] == 0)break;\n\t\t\t\tut[i][y][2] = ut[i-1][y][2] + 1;\n\t\t\t}\n\t\t\tfor(int i=x-1;i>=1;i--){\n\t\t\t\tif(a[i][y] == 0)break;\n\t\t\t\tut[i][y][3] = ut[i+1][y][3] + 1;\n\t\t\t}\n\t\t}\n\t}\n \n\treturn 0;\n}\n```",
        "postTime": 1668518110,
        "uid": 84042,
        "name": "SkyRainWind",
        "ccfLevel": 7,
        "title": "CF 433D \u9898\u89e3"
    }
]
[
    {
        "content": "[\u539f\u9898\u94fe\u63a5](https://www.luogu.com.cn/problem/CF1101B)\n\n\u5927\u81f4\u601d\u8def\uff1a\u7528`deque`\u5bf9\u5b57\u7b26\u4e32\u8fdb\u884c\u7ef4\u62a4\uff1a\n1. \u5c06\u961f\u5934\u5143\u7d20\u51fa\u961f\u76f4\u5230\u961f\u5934\u5143\u7d20\u4e3a`[`\u3002\n1. \u5c06\u5c3e\u5934\u5143\u7d20\u51fa\u961f\u76f4\u5230\u961f\u5c3e\u5143\u7d20\u4e3a`]`\u3002\n1. \u5224\u65ad\u662f\u5426\u5408\u6cd5\uff08\u5373\u961f\u5217\u957f\u5ea6\u662f\u5426\u5927\u4e8e $4$\uff09\u3002\n1. \u5c06\u961f\u5934\u3001\u961f\u5c3e\u7684`[`\u4e0e`]`\u5206\u522b\u51fa\u961f\u3002\n1. \u6b64\u65f6\u7528\u76f8\u540c\u65b9\u6cd5\u5904\u7406`:`\u5373\u53ef\u3002\n1. \u6700\u540e\u7edf\u8ba1\u961f\u5217\u4e2d`|`\u7684\u4e2a\u6570\u5e76\u8f93\u51fa\u3002\n\nAC \u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define int long long\ndeque<char> q;\nstring s;\nint ans = 0;\n\nsigned main() {\n    getline(cin, s);\n    //\u5904\u7406'['\n    for (int i = 0; i < s.size(); i++) q.push_back(s[i]);\n    while (!q.empty() && !(q.front() == '[')) q.pop_front();\n    while (!q.empty() && !(q.back() == ']')) q.pop_back();\n    if (q.size() < 4) { cout << -1 << endl; return 0; }\n    q.pop_front(), q.pop_back();\n    //\u5904\u7406':'\n    while (!q.empty() && !(q.front() == ':')) q.pop_front();\n    while (!q.empty() && !(q.back() == ':')) q.pop_back();\n    if (q.size() < 2) { cout << -1 << endl; return 0; }\n    //\u7edf\u8ba1\u7b54\u6848\n    for (; !q.empty(); q.pop_back())\n        if (q.back() == '|') ans++;\n    cout << ans + 4 << endl;//\u8f93\u51fa\u7684\u65f6\u5019\u522b\u5fd8\u4e86\u52a0\u4e0a\u9996\u5c3e\u7684'['\u3001']'\u548c\u4e24\u4e2a':'\n    return 0;\n}\n\n```",
        "postTime": 1639233620,
        "uid": 574944,
        "name": "Micnation_AFO",
        "ccfLevel": 4,
        "title": "CF1101B Accordion \u9898\u89e3"
    },
    {
        "content": "\u65e0\u8111\u6a21\u62df\u9898~~\n\n\u601d\u8def\uff1a\n\n- \u627e\u51fa\u6700\u5de6\u8fb9\u7684[:\u5b50\u4e32\n- \u627e\u51fa\u6700\u53f3\u8fb9\u7684:]\u5b50\u4e32\n- \u5728\u4e2d\u95f4\u627e|\u7684\u4e2a\u6570\n\nps:588\u4e2a\u7eff\u6846\u770b\u5f97\u4eba\u662f\u771f\u7684\u8212\u670d\uff0c\u4fe1\u5fc3\u53d7\u521b\u65f6\u53ef\u4ee5\u6765\u505a\u8fd9\u9053\u9898\n\n```cpp\n#include<iostream>\n#include<cstdlib>\n#include<cstdio>\n#include<cmath>\n#include<iomanip>\n#include<cstring>\n#include<algorithm>\n#include<ctime>\nusing namespace std;\nstring s;\nint len,l=-1,r=-1,bj;\nint main()\n{\n\tcin>>s;\n\tlen=s.length();\n\tfor(register int i=0;i<len;++i)\n\t\tif(s[i]=='[')\n\t\t{\n\t\t\tl=i;\n\t\t\tbreak;\n\t\t}\n\tif(l==-1)\n\t{\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tbj=l;\n\tfor(register int i=l+1;i<len;++i)\n\t\tif(s[i]==':')\n\t\t{\n\t\t\tl=i;\n\t\t\tbreak;\n\t\t}\n\tif(l==bj)\n\t{\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tfor(register int i=len-1;i>=0;--i)\n\t\tif(s[i]==']')\n\t\t{\n\t\t\tr=i;\n\t\t\tbreak;\n\t\t}\n\tif(r==-1)\n\t{\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tbj=r;\n\tfor(register int i=r-1;i>=0;--i)\n\t\tif(s[i]==':')\n\t\t{\n\t\t\tr=i;\n\t\t\tbreak;\n\t\t}\n\tif(r==bj)\n\t{\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tif(l>=r)\n\t{\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tint ans=4;\n\tfor(register int i=l+1;i<r;++i)\n\t\tif(s[i]=='|')\n\t\t\t++ans;\n\tprintf(\"%d\\n\",ans);\n\treturn 0;\n}\n\n```",
        "postTime": 1547745071,
        "uid": 36933,
        "name": "zhy12138",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "$Codeforces$ \u7684 $hacker$ \u771f\u662f $tql$\uff0c\u6d4b\u8bd5\u6570\u636e\u5c31\u6709\u5c06\u8fd1 $600$ \u4e2a\uff0c\u5373\u4fbf\u5728\u539f\u7f51\u7ad9\u8bc4\u6d4b\u4e5f\u82b1\u4e865\u5206\u591a\u949f\n\n\u8fd9\u4e00\u9898\u5176\u5b9e\u5c31\u662f\u5927\u6a21\u62df\n\n\u849f\u84bb\u7684\u601d\u8def\uff1a\n\n- \u4ece\u5934\u5f00\u59cb\u627e\u51fa\u7b2c\u4e00\u4e2a\u5de6\u62ec\u53f7\u7684\u4f4d\u7f6e\uff0c\u6ca1\u6709\u5c31\u628a\u4f4d\u7f6e\u6807\u8bb0\u4e3a\u5b57\u7b26\u4e32\u672b\n- \u4ece\u7ed3\u5c3e\u5f00\u59cb\u627e\u51fa\u7b2c\u4e00\u4e2a\u53f3\u62ec\u53f7\u7684\u4f4d\u7f6e\uff0c\u6ca1\u6709\u5c31\u628a\u4f4d\u7f6e\u6807\u8bb0\u4e3a \u5b57\u7b26\u4e32\u9996\n\n- \u5192\u53f7\u4e5f\u540c\u5982\u4e0a\u601d\u8def\n\n- \u5982\u679c\u7b2c\u4e00\u4e2a\u5de6\u62ec\u53f7\uff08\u6807\u8bb0\u7684\uff09\u4f4d\u7f6e\u5927\u4e8e\u7b49\u4e8e\u7b2c\u4e00\u4e2a\u53f3\u62ec\u53f7\uff08\u6807\u8bb0\u7684\uff09\u4f4d\u7f6e\uff0c\u5c31\u8f93\u51fa $-1$\n\n- \u5982\u679c\u4e24\u4e2a\u4e2d\u62ec\u53f7\u91cc\u9762\u6ca1\u6709\u4e24\u4e2a\u5192\u53f7\uff08\u4e5f\u5c31\u662f\u4ece\u5de6\u62ec\u53f7\u5411\u53f3\u5f00\u59cb\u641c\u7d22\u7684\u7b2c\u4e00\u4e2a\u5192\u53f7\u7684\u4f4d\u7f6e\u5927\u4e8e\u7b49\u4e8e\u4ece\u53f3\u62ec\u53f7\u5411\u5de6\u641c\u7d22\u5230\u7684\u5192\u53f7\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\uff09\uff0c\u4e5f\u8f93\u51fa $-1$\n\n- \u5982\u679c\u90fd\u5408\u6cd5\uff0c\u5c31\u7edf\u8ba1\u5192\u53f7\u4e4b\u95f4\u7684 $\"|\"$ \u7684\u6570\u91cf\uff0c\u5728\u628a\u6570\u91cf\u52a0\u56db\u8f93\u51fa\n\n\u4ee3\u7801\uff1a\n```\n#include <iostream>\n#include <cstring>\n#include <cstdio>\nusing namespace std;\n\nint i,j,k,l,len,ans;\nchar c[500010];\t\t\t//\u5b9a\u4e49\u4e00\u4e2a\u5b57\u7b26\u6570\u7ec4 \n\nint main()\n{\n\tgets(c);\n\tlen = strlen(c);\t//\u5b57\u7b26\u4e32\u957f\u5ea6\n\t\n\tfor(i=0;c[i]!='['&&i<len;i++);\t//\u7b2c\u4e00\u4e2a\u5de6\u62ec\u53f7\u7684\u4f4d\u7f6e \n\t\n\tfor(j=len-1;c[j]!=']'&&j>=0;j--);\t//\u7b2c\u4e00\u4e2a\u53f3\u62ec\u53f7\u7684\u4f4d\u7f6e \n\t\n\tfor(k=i+1;c[k]!=':'&&k<len-1;k++);\t//\u5728\u62ec\u53f7\u95f4\u4ece\u5de6\u641c\u7d22\u7684\u7b2c\u4e00\u4e2a\u5192\u53f7\u7684\u4f4d\u7f6e \n\t\n\tfor(l=j-1;c[l]!=':'&&l>k;l--);\t//\u5728\u62ec\u53f7\u95f4\u4ece\u53f3\u641c\u7d22\u7684\u7b2c\u4e00\u4e2a\u5192\u53f7\u7684\u4f4d\u7f6e \n\t\n\tif(i>=j||l<=k)\t\t//\u4e0d\u5408\u6cd5\u5c31\u8f93\u51fa -1 \n\t\tprintf(\"-1\\n\");\n\telse\n\t{\n\t\tfor(int x=k+1;x<l;x++)\t//\u679a\u4e3e\u533a\u95f4\n\t\t\tif(c[x]=='|') ans++;  //\u7edf\u8ba1\u6570\u91cf \n            \n\t\tprintf(\"%d\\n\",ans+4);\t //\u8981\u52a0\u4e0a\u4e24\u8fb9\u5404\u4e24\u4e2a\u7684\u7b26\u53f7 \n\t}\n\treturn 0;\n}\n```",
        "postTime": 1549370131,
        "uid": 87573,
        "name": "HoshizoraZ",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "\u8ba9\u4f60\u6c42\u4e00\u4e2a\u5b57\u7b26\u4e32\u662f\u5426\u5305\u542b\u4e00\u4e2a\u5b50\u4e32$[::]$\uff0c$:$\u4e4b\u95f4\u53ef\u4ee5\u6709\u65e0\u6570\u591a\u7684$|$\uff0c\u6c42\u51fa\u5b50\u4e32\u6700\u957f\u957f\u5ea6\uff0c\u5426\u5219\u8f93\u51fa$-1$\n\n\u4ece\u5de6\u5230\u53f3\u5148\u627e\u4e00\u904d$[$\uff0c\u518d\u4ece\u53f3\u5230\u5de6\u627e$]$\uff0c$:$\u540c\u7406\uff0c\u6ce8\u610f$]$\u5728$[$\u53f3\u8fb9\uff0c$::$\u5728$[]$\u4e4b\u95f4\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nchar s[500010];\nint main()\n{\n    cin>>s;\n    int fir=-1,las=-1;\n    int firr=-1,lass=-1;\n    int qaq=strlen(s); \n    for(int i=0;i<qaq;i++)\n    {\n        if(s[i]=='[')\n        {\n            fir=i;\n            break;\n        }\n    }\n    for(int i=qaq-1;i>=0;i--)\n    {\n        if(s[i]==']')\n        {\n            las=i;\n            break;\n        }\n    }\n    if(fir==-1||las==-1)\n    {\n        cout<<\"-1\";\n        return 0;\n    }\n    for(int i=0;i<qaq;i++)\n    {\n        if(s[i]==':'&&i>fir)\n        {\n            firr=i;\n            break;\n        }\n    }\n    for(int i=qaq-1;i>=0;i--)\n    {\n        if(s[i]==':'&&i<las&&i>firr)\n        {\n            lass=i;\n            break;\n        }\n    }\n    if(firr==-1||lass==-1)\n    {\n        cout<<\"-1\";\n        return 0;\n    }\n    int ans=4;\n    for(int i=firr+1;i<lass;i++)\n    {\n        if(s[i]=='|')\n        {\n            ans++;\n        }\n    }\n    cout<<ans;\n} \n```",
        "postTime": 1547278241,
        "uid": 48265,
        "name": "decoqwq",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "\u6b64\u9898\u9752\u9752\u8349\u539f\u7684\u7f8e\u8a89\u771f\u4e0d\u662f\u767d\u6765\u7684\uff0c\u7eff\u8272\u679c\u7136\u8ba9\u773c\u775b\u8212\u9002~\n\n\u6211\u7684\u5fae\u538b\u884c\u4ee3\u7801 15 \u884c\uff0c\u4e0d\u538b\u884c\u4e5f\u4e0d\u8d85 20 \u884c\u3002\n\n### \u601d\u8def\n\n\u627e\u5230\u6700\u5de6\u8fb9\u7684 `[` \u548c\u6700\u53f3\u8fb9\u7684 `]`\uff0c\u518d\u627e\u5230\u8fd9\u4e24\u4e2a\u7b26\u53f7\u4e4b\u95f4\u7684\u4e24\u4e2a `:`\uff0c\u7136\u540e\u8f93\u51fa\u4e24\u4e2a `:` \u4e4b\u95f4 `|` \u7684\u6570\u91cf\u52a0 $4$\u3002  \n\n\u5982\u679c**\u6709\u67d0\u4e2a\u5b57\u7b26\u627e\u4e0d\u5230\u6216\u6570\u91cf\u4e0d\u591f**\uff0c\u8f93\u51fa $-1$\uff1b\n\n### \u524d\u7f6e\u77e5\u8bc6\n\n1. $\\texttt{reverse}$ \u51fd\u6570\u3002  \n\u8be5\u51fd\u6570\u65e0\u8fd4\u56de\u503c\uff0c\u5176\u4f5c\u7528\u662f\u5c06\u67d0\u4e2a\u5b57\u7b26\u4e32\u7ffb\u8f6c\u3002  \n\u7528\u6cd5\uff1a``reverse(s.begin(), s.end());``\n1. $\\texttt{find}$ \u51fd\u6570\u3002  \n\u8be5\u51fd\u6570\u6709\u4e24\u4e2a\u53c2\u6570\uff0c\u4f1a\u8fd4\u56de\u5b57\u7b26\u4e32\u4e2d\u67d0\u4e2a\u4f4d\u7f6e\u4e4b\u540e\u7684**\u7b2c\u4e00\u4e2a**\u8981\u627e\u7684\u5b57\u7b26\u4e32\u6216\u5b57\u7b26\u7684\u4f4d\u7f6e\uff0c\u5982\u679c**\u4e0d\u5b58\u5728**\uff0c\u8fd4\u56de $-1$\uff0c\u82e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e0d\u586b\uff0c\u9ed8\u8ba4\u4e3a $0$\u3002  \n\u7528\u6cd5\uff1a``s.find(':', 3);`` \u5c06\u4f1a\u8fd4\u56de\u4e0b\u6807 $3$ \u5f00\u59cb**\u7b2c\u4e00\u4e2a**\u51fa\u73b0\u7684 `:` \u7684\u4e0b\u6807\uff0c\u4e0d\u5b58\u5728\u8fd4\u56de $-1$(string :: npos \u4ea6\u53ef)\u3002\n\n### \u4ee3\u7801\u7ec6\u8bb2\n\n\u8f93\u5165\u540e\uff0c\u6211\u4eec\u5c31\u80fd\u8fdb\u884c\u7b2c\u4e00\u4e2a\u5224\u65ad\uff1a\u6ce8\\*1\n```cpp\ncin >> s; int len = s.length();\nif (len < 4 || !~s.find('[') || !~s.find(']') || !~s.find(':'))\n\treturn puts(\"-1\"), 0;\n```\n\u5982\u679c $len < 4$ \u6216\u627e\u4e0d\u5230 `:`\u3001`[`\u3001`]`\u3001`:` \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\uff0c\u76f4\u63a5\u8f93\u51fa $-1$ \u5e76\u8fd4\u56de $0$\u3002\n\n\u63a5\u4e0b\u6765\u62ff\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u5b58\u50a8\u7ffb\u8f6c\u540e\u7684\u5b57\u7b26\u4e32\u3002\u8fd9\u91cc\u6211\u7684\u5904\u7406\u662f\u8fd9\u6837\u7684\uff1a  \n``s2 = s, reverse(s.begin(), s.end()); swap(s, s2);``   \n\n**\u8fd9\u6837 $s$ \u8fd8\u662f\u8f93\u5165\u7684\u539f\u5b57\u7b26\u4e32\uff0c$s2$ \u662f\u7ffb\u8f6c\u540e\u7684\u5b57\u7b26\u4e32\u3002**  \n\n\u73b0\u5728\u6211\u4eec\u7528 $l$ \u8868\u793a\u6700\u5de6\u8fb9\u7684 `[`\uff0c$r$ \u8868\u793a\u6700\u53f3\u8fb9\u7684 `]`\u3002\u4f46\u6211\u4eec\u77e5\u9053\uff0c$\\texttt{find}$ \u51fd\u6570\u53ea\u4f1a\u8fd4\u56de\u6700\u5de6\u8fb9\u7684\uff0c\u8fd9\u65f6\u5019\u7ffb\u8f6c\u7684\u5b57\u7b26\u4e32\u7684\u4f5c\u7528\u5c31\u662f\uff1a**\u7ffb\u8f6c\u540e\u7684\u5b57\u7b26\u4e32\u6700\u5de6\u8fb9\u7684\u90a3\u4e2a\u5c31\u662f\u7ffb\u8f6c\u524d\u6700\u53f3\u8fb9\u7684\u3002**  \n\n``int l = s.find('['), r = len - s2.find(']') - 1;``\n\n\u800c\u627e\u5230\u540e\u8981\u7528 ``len - s2.find(']') - 1`` \u624d\u80fd\u5f97\u5230\u8fd9\u4e2a\u4f4d\u7f6e\u5728\u539f\u5b57\u7b26\u4e32\u4e2d\u7684\u4f4d\u7f6e\u3002  \n\n\u63a5\u4e0b\u6765\u6211\u4eec\u7528 $l2$ \u8868\u793a `:` \u5728 $l$ \u4e4b\u540e\u7684\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\uff0c$r2$ \u8868\u793a `:` \u5728 $r$ \u4e4b\u524d\u7684\u6700\u53f3\u7684\u4e00\u4e2a\u4f4d\u7f6e\u3002 \n\n``int l2 = s.find(':', l), r2 = len - s2.find(':', -r - 1 + len) - 1;``  \n\n\u4e3a\u4ec0\u4e48 $\\texttt{s2.find}$ \u51fd\u6570\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f $-r - 1 + len$ \u5462\uff1f\u8fd9\u4e2a\u53c2\u6570\u4e0d\u8be5\u662f $\\texttt{s2.find(']'))}$ \u5417\uff1f  \n\u6211\u4eec\u6765\u770b\u770b\uff1a``r = len - s2.find(']') - 1``\uff0c\u770b\u5230\u8fd9\u91cc\u5c31\u660e\u4e86\u4e86\uff1a``s2.find(']') = -r - 1 + len``\u3002\u6211\u4eec\u4e0d\u7528**\u6d6a\u8d39 $O(n)$ \u7684\u65f6\u95f4\u590d\u6742\u5ea6**\u53bb\u91cd\u590d\u8ba1\u7b97\u3002  \n\n\u73b0\u5728\u8fce\u6765\u7b2c\u4e8c\u4e2a\u5224\u65ad\uff1a  \n``if (l > r || !~l2 || !~(-r2+len-1) || l2 >= r2) return puts(\"-1\"), 0;``  \n\n\u5982\u679c $l > r$ \u6216\u5728 $l$ \u4e4b\u540e\u627e\u4e0d\u5230 `:` \u6216\u5728 $r$ \u4e4b\u524d\u627e\u4e0d\u5230 `:` \u6216 $l2 \\geqslant r2$\uff0c\u76f4\u63a5\u8f93\u51fa $-1$ \u5e76\u8fd4\u56de $0$\u3002  \n\n$l$ \u4e0d\u53ef\u80fd\u7b49\u4e8e $r$\uff0c\u56e0\u4e3a\u8fd9\u4e24\u4e2a\u7b26\u53f7\u4e0d\u4e00\u6837\uff0c\u4e0d\u4f1a\u5728\u540c\u4e00\u4e2a\u4f4d\u7f6e\u51fa\u73b0\u3002  \n\n$l2 = r2$ \u65f6\u8bf4\u660e\u4e24\u4e2a\u4e2d\u62ec\u53f7\u4e4b\u95f4**\u6709\u4e14\u4ec5\u6709**\u4e00\u4e2a `:`\uff1b$l2 > r2$ \u65f6\u8bf4\u660e\u4e24\u4e2a `:` \u4e2d**\u81f3\u5c11\u6709\u4e00\u4e2a**\u5728\u4e24\u4e2a\u4e2d\u62ec\u53f7\u5916\u3002  \n\n\u5224\u65ad $-r2+len-1 \\neq -1$ \u76f8\u5f53\u4e8e $\\texttt{s2.find(':', -r - 1 + len)} \\ne -1$\uff0c\u5176\u9053\u7406\u524d\u9762\u5df2\u7ecf\u89e3\u91ca\u8fc7\u3002  \n\n\u5230\u73b0\u5728\uff0c\u8fd9\u4e2a\u4e32\u5c31**\u4e00\u5b9a\u662f\u5408\u6cd5\u7684**\u4e86\u3002\u90a3\u5c31\u5bfb\u627e\u4e24\u4e2a `:` \u4e4b\u95f4\u6709\u591a\u5c11 `|`\uff0c\u7528 $cnt$ \u8868\u793a\uff0c\u518d\u5c06 $cnt + 4$ \u8f93\u51fa\u5373\u53ef\u3002  \n\n#### \u6ce8\uff1a\u5224\u65ad\u4e2d\u5199\u5230\u7684\u7b26\u53f7\uff0c`!~x` $\\Leftrightarrow$ `x == -1`\u3002\n\n[AC code\u8bb0\u5f55](https://www.luogu.com.cn/record/51430454)\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstring s, s2; int cnt;\n\nint main()\n{\n\tcin >> s; int len = s.length();\n\tif (len < 4 || !~s.find('[') || !~s.find(']') || !~s.find(':')) return puts(\"-1\"), 0;\n\ts2 = s, reverse(s.begin(), s.end()); swap(s, s2);\n\tint l = s.find('['), r = len - s2.find(']') - 1,\n\t\tl2 = s.find(':', l), r2 = len - s2.find(':', -r - 1 + len) - 1;\n\tif (l > r || !~l2 || !~(-r2+len-1) || l2 >= r2) return puts(\"-1\"), 0;\n\tfor (int i = l2; i <= r2; ++i) cnt += s[i] == '|';\n\treturn printf(\"%d\", cnt + 4), 0;\n}\n```",
        "postTime": 1622709897,
        "uid": 409236,
        "name": "StayAlone",
        "ccfLevel": 6,
        "title": "CF1101B Accordion C++\u3010\u601d\u7ef4\u9898\u3011\u9898\u89e3"
    },
    {
        "content": "## \u672c\u4eba\u7b2c\u4e00\u9053AC\u7684RemoteJudge\u9898\u3002\n\u8fd9\u9053\u9898\u5f88\u660e\u663e\u662f\u4e00\u9053\u5927\u6a21\u62df,$s$ \u7684\u957f\u5ea6 $\u22645\\times10^5$,\u53ef\u4ee5\u653e\u5fc3  `for` \u5faa\u73af\u679a\u4e3e\u6216\u6a21\u62df\uff0c\u679a\u4e3e\uff08\u6a21\u62df\uff09\u601d\u8def\uff1a\n\n\u4ece\u5de6\u8fb9\u4f9d\u6b21\u5faa\u73af\u904d\u5386\u627e \" [ \" \u548c \" $:$ \",\u518d\u4ece\u53f3\u8fb9\u627e \" ] \" \u548c \" $:$ \",\u5982\u679c\u8fc7\u4e86\u5f00\u5934\u6216\u7ed3\u5c3e\u7684\u7b26\u53f7\u7684\u4f4d\u7f6e\u9650\u5236\uff08\u5373\u5de6\u4fa7\u7684 $:$ \u5360\u7528\u4e86\u53f3\u4fa7 \" $:$ \" \u7684\u6700\u53f3\u4fa7\u4f4d\u7f6e\uff09\uff0c\u53ef\u4ee5\u4e0d\u7528\u7ee7\u7eed\u5bfb\u627e\uff0c\u76f4\u63a5\u8f93\u51fa $-1$ \u5e76 `return 0` \u8df3\u51fa\u4e3b\u51fd\u6570\u3002\n\n\u8fd9\u9898\u552f\u4e00\u7684\u5751\uff1a\" [ \" \u548c \" $:$ \" \u4e0d\u4e00\u5b9a\u76f8\u90bb\u3002\n\n\u679a\u4e3e \" [ \" \u7684\u4ee3\u7801\uff1a\n\n```cpp\n  bool flag = 0;\n  int frpos;\n  for (int i = 0;i < s.size() - 3;i++)\n  {\n      if (s[i] == '[')\n      {\n          frpos = i;//\u8bb0\u5f55\u4f4d\u7f6e\u3002\n          flag = 1;//\u6807\u8bb0\u627e\u5230\u4e86\u3002\n          break;\n      }\n  }\n  if (!flag)//\u5982\u679c\u6ca1\u627e\u5230\u3002\n  {\n      cout << -1;\n      return 0;//\u76f4\u63a5\u79bb\u5f00\u3002\n  }\n```\n\u679a\u4e3e\u53f3\u4fa7 \" ] \"\n```cpp\n\tint bkpos;\n\tflag = 0;\n    for (int i = s.size() - 1;i >= 3;i--)\n    {\n        if (s[i] == ']')\n        {\n            bkpos = i;\n            flag = 1;\n            break;\n        }\n    }\n    if (!flag)\n    {\n        cout << -1;\n        return 0;\n    }\n```\n\u679a\u4e3e\u53f3\u4fa7 \" $:$ \"\n```cpp\n\tint bk2;\n\tflag = 0;\n    for (int i = bkpos - 1;i >= frpos + 2;i--)\n    {\n        if (s[i] == ':')\n        {\n            bk2 = i;\n            flag = 1;\n            break;\n        }\n    }\n    if (!flag)\n    {\n        cout << -1;\n        return 0;\n    }\n```\n\u679a\u4e3e\u5de6\u4fa7 \" $:$ \"\n```cpp\n\tint fr2;\n\tflag = 0;\n    for (int i = frpos + 1;i <= bk2 - 1;i++)\n    {\n        if (s[i] == ':')\n        {\n            fr2 = i;\n            flag = 1;\n            break;\n        }\n    }\n    if (!flag)\n    {\n        cout << -1;\n        return 0;\n    }\n```\n\u68c0\u67e5\u4e2d\u95f4\u662f\u5426\u5168\u662f \" $|$ \",\u5982\u679c\u4e0d\u662f\uff0c\u5e94\u51cf\u957f\u5ea6,\u4e5f\u5c31\u662f\u6a21\u62df\u5220\u53bb\u7684\u6b65\u9aa4\u3002\n```cpp\n\tint l = bk2 - fr2 + 3;\n    for (int i = fr2 + 1;i <= bk2 - 1;i++)\n    {\n        if (s[i] != '|') l--;\n    }\n```\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstring s;\nint main()\n{\n\tcin >> s;\n    bool flag = 0;\n    int frpos,bkpos,fr2,bk2;\n    for (int i = 0;i < s.size() - 3;i++)\n    {\n        if (s[i] == '[')\n        {\n            frpos = i;\n            flag = 1;\n            break;\n        }\n    }\n    if (!flag)\n    {\n        cout << -1;\n        return 0;\n    }\n    flag = 0;\n    for (int i = s.size() - 1;i >= 3;i--)\n    {\n        if (s[i] == ']')\n        {\n            bkpos = i;\n            flag = 1;\n            break;\n        }\n    }\n    if (!flag)\n    {\n        cout << -1;\n        return 0;\n    }\n    flag = 0;\n    for (int i = bkpos - 1;i >= frpos + 2;i--)\n    {\n        if (s[i] == ':')\n        {\n            bk2 = i;\n            flag = 1;\n            break;\n        }\n    }\n    if (!flag)\n    {\n        cout << -1;\n        return 0;\n    }\n    flag = 0;\n    for (int i = frpos + 1;i <= bk2 - 1;i++)\n    {\n        if (s[i] == ':')\n        {\n            fr2 = i;\n            flag = 1;\n            break;\n        }\n    }\n    if (!flag)\n    {\n        cout << -1;\n        return 0;\n    }\n    int l = bk2 - fr2 + 3;//\u8ba1\u7b97\u957f\u5ea6\n    for (int i = fr2 + 1;i <= bk2 - 1;i++)\n    {\n        if (s[i] != '|') l--;//\u5982\u679c\u4e2d\u95f4\u6709\u4e0d\u662f\uff5c\u7684\uff0c\u957f\u5ea6-1\n    }\n    cout << l;\n    return 0;\n}\n```",
        "postTime": 1621660138,
        "uid": 236514,
        "name": "_Harrisonwhl_",
        "ccfLevel": 0,
        "title": "\u9898\u89e3CF1101B"
    },
    {
        "content": "[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1101B)\n\n\u9898\u76ee\u5927\u6982\u610f\u601d\u662f\uff1a\u7ed9\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e0d\u8d85\u8fc7 $5 \\times 10^5$ \u7684\u5b57\u7b26\u4e32\uff0c\u6c42\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4e2d\u957f\u5ea6\u6700\u5927\u7684\u5f62\u5982$\\texttt{[:||...||:]}$\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\u3002\n\n\u56e0\u4e3a\u5b57\u7b26\u4e32\u957f\u5ea6\u53ea\u6709 $5 \\times 10^5$\uff0c\u6240\u4ee5\u7528\u51e0\u4e2a for \u6a21\u62df\u5373\u53ef\u3002\u4e0b\u9762\u662f\u5177\u4f53\u601d\u8def\uff1a\n\n- \u4ece\u5de6\u5f80\u53f3\u627e\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u7b2c\u4e00\u4e2a$\\texttt{[}$\u5b57\u7b26\u7684\u4f4d\u7f6e $l_1$\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5219\u65e0\u89e3\u3002\n\n```cpp\nfor (l = 1; l <= strlen(s + 1); l++) {\n\tif (s[l] == '[') {\n\t\tbreak;\n\t}\n}\n\n//printf(\"%d\\n\", l);\n\nif (l == strlen(s + 1) + 1) {\n\tprintf(\"-1\\n\");\n    return 0;\n}\n```\n\n- \u4ece\u53f3\u5f80\u5de6\u627e\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u7b2c\u4e00\u4e2a$\\texttt{]}$\u5b57\u7b26\u7684\u4f4d\u7f6e $r_1$\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5219\u65e0\u89e3\u3002**\u6ce8\u610f $l_1 < r_1$\u3002**\n\n```cpp\nfor (r = strlen(s + 1); r > l; r--) {\n\tif (s[r] == ']') {\n\t\tbreak;\n\t}\n}\n\n//printf(\"%d\\n\", r);\n\nif (r == 0) {\n\tprintf(\"-1\\n\");\n    return 0;\n}\n```\n\n- \u4ece\u5de6\u5f80\u53f3\u627e\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u7b2c\u4e00\u4e2a$\\texttt{:}$\u5b57\u7b26\u7684\u4f4d\u7f6e $l_2$\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5219\u65e0\u89e3\u3002**\u6ce8\u610f $l_1 < l_2 < r_1$\u3002**\n\n```cpp\nfor ( ; l < r; l++) {\n\tif (s[l] == ':') {\n\t\tbreak;\n\t}\n}\n\n//printf(\"%d\\n\", l);\n\nif (l == r) {\n\tprintf(\"-1\\n\");\n    return 0;\n}\n```\n\n- \u4ece\u53f3\u5f80\u5de6\u627e\u51fa\u73b0\u5728\u5b57\u7b26\u4e32\u4e2d\u7684\u7b2c\u4e00\u4e2a$\\texttt{:}$\u5b57\u7b26\u7684\u4f4d\u7f6e $r_2$\uff0c\u5982\u679c\u627e\u4e0d\u5230\u5219\u65e0\u89e3\u3002**\u6ce8\u610f $l_2 < r_2 < r_1$\u3002**\n\n```cpp\nfor ( ; r > l; r--) {\n\tif (s[r] == ':') {\n\t\tbreak;\n\t}\n}\n\n//printf(\"%d\\n\", r);\n\nif (r == l) {\n\tprintf(\"-1\\n\");\n    return 0;\n}\n```\n\n- \u73b0\u5728\u6700\u7ec8\u7684\u5b57\u7b26\u4e32\u5df2\u7ecf\u6709\u56db\u4e2a\u5b57\u7b26\u4e86\uff0c\u63a5\u7740\u4ece $l_2$ \u5230 $r_2$ \u4e4b\u95f4\u770b\u6709\u591a\u5c11\u4e2a\u5b57\u7b26$\\texttt{|}$\uff0c\u6bcf\u67e5\u8be2\u5230\u4e00\u4e2a\u5b57\u7b26\u7ed3\u679c\u5b57\u7b26\u4e32\u957f\u5ea6\u52a0\u4e00\u3002\n\n```cpp\nans = 4;\n\nfor (int i = l; i <= r; i++) {\n\tif (s[i] == '|') {\n\t\tans++;\n\t}\n}\n```\n\u5b8c\u6574\u4ee3\u7801\uff1a\n```cpp\n\n\n#include <bits/stdc++.h> \n\nchar s[500010];\nint ans;\n\nint main () {\n\tscanf(\"%s\", s + 1);\n\n\tint l, r;\n\t\n\tfor (l = 1; l <= strlen(s + 1); l++) {\n\t\tif (s[l] == '[') {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n//\tprintf(\"%d\\n\", l);\n\t\n\tif (l == strlen(s + 1) + 1) {\n\t\tprintf(\"-1\\n\");\n        return 0;\n\t}\n\t\n\tfor (r = strlen(s + 1); r > l; r--) {\n\t\tif (s[r] == ']') {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n//\tprintf(\"%d\\n\", r);\n\t\n\tif (r == 0) {\n\t\tprintf(\"-1\\n\");\n        return 0;\n\t}\n\t\n\tfor ( ; l < r; l++) {\n\t\tif (s[l] == ':') {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n//\tprintf(\"%d\\n\", l);\n\t\n\tif (l == r) {\n\t\tprintf(\"-1\\n\");\n        return 0;\n\t}\n\t\n\tfor ( ; r > l; r--) {\n\t\tif (s[r] == ':') {\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n//\tprintf(\"%d\\n\", r);\n\t\n\tif (r == l) {\n\t\tprintf(\"-1\\n\");\n        return 0;\n\t}\n\t\n\tans = 4;\n\t\n\tfor (int i = l; i <= r; i++) {\n\t\tif (s[i] == '|') {\n\t\t\tans++;\n\t\t}\n\t}\n\n    printf(\"%d\\n\", ans);\n\t\n\treturn 0;\n}\n```\n",
        "postTime": 1621165719,
        "uid": 299086,
        "name": "Mistybranch",
        "ccfLevel": 5,
        "title": "CF1101B Accordion"
    },
    {
        "content": "\u601d\u8def\u5f88\u663e\u7136\uff0c\u5206\u4e09\u6b65\uff1a\n\n1. \u9996\u5148\u627e\u5230\u7b2c\u4e00\u4e2a ```[``` \u548c\u6700\u540e\u4e00\u4e2a ```]``` \uff1b\n2. \u518d\u5728\u5b83\u4eec\u4e4b\u95f4\u627e\u7b2c\u4e00\u4e2a ```:``` \u548c \u6700\u540e\u4e00\u4e2a ```:``` \uff1b\n3. \u6700\u540e\u518d\u5728\u4e24\u4e2a\u5192\u53f7\u4e4b\u95f4\u627e\u6709\u591a\u5c11\u4e2a ```|``` \u7136\u540e\u52a0 4 \u5373\u53ef\u3002\n\n\u5f53\u7136\uff0c\u5982\u679c\u7b2c\u4e00\u3001\u4e8c\u6b65\u6ca1\u627e\u5230\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f93\u51fa ```-1```\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nchar s[500010];\nint main() {\n\tscanf(\"%s\", s + 1);\n\tint len = strlen(s + 1);\n\tint l, r, ll, rr;\n\tfor (l = 1; (l <= len) && (s[l] != '['); l++);\n\tfor (r = len; (r > 0) && (s[r] != ']'); r--);\n\tfor (ll = l + 1; (ll < r) && (s[ll] != ':'); ll++);\n\tfor (rr = r - 1; (rr > ll) && (s[rr] != ':'); rr--);\n\tif (l >= r || ll >= rr) {\n\t\tprintf(\"-1\\n\");\n\t\treturn 0;\n\t}\n\tint cnt = 4;\n\tfor (int i = ll + 1; i < rr; i++) {\n\t\tif (s[i] == '|') cnt++;\n\t}\n\tprintf(\"%d\\n\", cnt);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1607911211,
        "uid": 341650,
        "name": "_504",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "\u4e45\u95fb\u6b64\u9898\u9752\u9752\u8349\u539f\u7684\u7f8e\u8a89\uff0c\u4eca\u5929\u624dAC\u6389\u3002  \n\n\n------------\n  \n\u8fd9\u9053\u9898\u53ef\u4ee5\u5206\u6790\u6210\u4e00\u4e2a\u4e2a\u5b50\u95ee\u9898\uff1a  \n- \u5b50\u95ee\u98981\uff1a\u628a\u201c\\[\u201d\u53d8\u6210\u7b2c\u4e00\u4e2a\u5b57\u7b26\u3002  \n- \u5b50\u95ee\u98982\uff1a\u628a\u201c\\]\u201d\u53d8\u6210\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u3002\n- \u5b50\u95ee\u98983\uff1a\u628a\u4e00\u4e2a\u201c:\u201d\u53d8\u6210\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u3002\n- \u5b50\u95ee\u98984\uff1a\u628a\u4e00\u4e2a\u201c:\u201d\u53d8\u6210\u5012\u6570\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u3002  \n- \u5b50\u95ee\u98985\uff1a\u7edf\u8ba1\u4e24\u4e2a\u201c:\u201d\u4e4b\u95f4\u7684\u201c|\u201d\u7684\u6570\u91cf\u3002\n\n\n\u5206\u6790\u5b8c\u4e86\u8fd9\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u8981\u89e3\u51b3\u5b83\u4eec\uff1a  \n\n- \u5b50\u95ee\u98981\uff1a\u5f97\u5230\u7b2c\u4e00\u4e2a\u201c\\[\u201d\u7684\u4f4d\u7f6e\uff0c\u5220\u9664\u524d\u9762\u7684\u5b57\u7b26\u3002\u67e5\u627e\u6211\u4eec\u53ef\u4ee5\u7528```string```\u7c7b\u578b\u4e2d\u7684```find_first_of('[')```\u6765\u5b9e\u73b0\uff0c\u5220\u9664\u5c31\u7528```erase```\u51fd\u6570\u5373\u53ef\u3002\n- \u5b50\u95ee\u98982\uff1a\u5f97\u5230\u6700\u540e\u4e00\u4e2a\u201c\\]\u201d\u7684\u4f4d\u7f6e\uff0c\u5220\u9664\u524d\u540e\u7684\u5b57\u7b26\u3002\u4e3a\u4ec0\u4e48\u662f\u6700\u540e\u5462\u56e0\u4e3a\u9632\u6b62\u4e2d\u95f4\u5c31\u6709\u201c\\]\u201d\u3002\u67e5\u627e\u6211\u4eec\u53ef\u4ee5\u7528```string```\u7c7b\u578b\u4e2d\u7684```find_last_of(']')```\u6765\u5b9e\u73b0\uff0c\u5220\u9664\u540c\u4e0a\u3002 \n- \u5b50\u95ee\u98983\uff1a\u4e0e\u7b2c\u4e00\u4e2a\u76f8\u540c\uff0c\u53ea\u4e0d\u8fc7\u627e\u7684\u662f\u7b2c\u4e00\u4e2a\u201c\uff1a\u201d\u5e76\u4e0d\u5220\u9664\u3002\n- \u5b50\u95ee\u98984\uff1a\u4e0e\u7b2c\u4e8c\u4e2a\u76f8\u540c\uff0c\u53ea\u4e0d\u8fc7\u627e\u7684\u662f\u6700\u540e\u4e00\u4e2a\u201c\uff1a\u201d\u5e76\u4e0d\u5220\u9664\u3002  \n- \u5b50\u95ee\u98985\uff1a\u4ece\u7b2c\u4e00\u4e2a\u201c\uff1a\u201d\u5230\u6700\u540e\u4e00\u4e2a\u201c\uff1a\u201d\u904d\u5386\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u662f\u201c|\u201d\u7b54\u6848+1\u3002\n\n\u6ce8\u610f\u6700\u540e\u8f93\u51fa\u7b54\u6848\u8981+4\uff08\u52a0\u4e0a\u201c\\[\u201d\u3001\u201c\\]\u201d\u3001\u201c:\u201d\u3001\u201c:\u201d\uff09\u3002  \n\u8fd8\u6709\u4e00\u4e9b\u5c0f\u5c0f\u7684\u7ec6\u8282\uff0c\u6bd4\u5982\u5b50\u95ee\u98984\u7684\u67e5\u627e\u9700\u8981\u622a\u53d6\u4ece\u7b2c\u4e00\u4e2a\u201c:\u201d\u5230\u6700\u540e\u7684\u5b50\u4e32\u67e5\u627e\u4e0d\u7136\u4f1a\u6709bug\uff0c\u6700\u540e\u904d\u5386\u8981\u52a0\u4e0a\u7b2c\u4e00\u4e2a\u201c:\u201d \u7684\u4f4d\u7f6e\u518d\u52a0\u4e0a1\u3002  \n\u6700\u540e\u4ee3\u7801\u5b9e\u73b0\uff1a  \n```cpp\n#include<iostream>\n#include<string>\n#define goodbye {cout<<-1;return 0;}\nusing namespace std;\nint main()\n{\n\tint sum=2;//\u6211\u8fd9\u672c\u6765\u5c31\u662f2\u4ee3\u8868\u201c[\u201d\u548c\u201c]\u201d\n\tstring str;\n\tcin>>str;\n\tif(str.find_first_of('[')!=string::npos)str.erase(0,str.find_first_of('['));//\u5b50\u95ee\u98981\n    else goodbye\n    if(str.find_last_of(']')!=string::npos)str.erase(str.find_last_of(']')+1,str.size()-1);//\u5b50\u95ee\u98982\n    else goodbye\n    int posf,posl;\n    if(str.find_first_of(':')!=string::npos)posf=str.find_first_of(':');//\u5b50\u95ee\u98983\uff0cposf\u662f\u7b2c\u4e00\u4e2a\u201c:\u201d\u51fa\u73b0\u7684\u4f4d\u7f6e\n    else goodbye\n    if(str.substr(posf+1,str.size()-1).find_last_of(':')!=string::npos)posl=posf+1+str.substr(posf+1,str.size()-1).find_last_of(':');//\u5b50\u95ee\u98984\uff0cposl\u662f\u6700\u540e\u4e00\u4e2a\u201c:\u201d\u51fa\u73b0\u7684\u4f4d\u7f6e\n    else goodbye\n    sum+=2;//\u518d+2\n    for(int p=posf;p<=posl;p++)//\u904d\u5386\n    \tif(str[p]=='|')sum++;\n    if(sum>=4)cout<<sum<<endl;//\u8f93\u51fa\n    else goodbye\n    return 0;\n}\n```",
        "postTime": 1587715911,
        "uid": 298549,
        "name": "SIXIANG32",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "\u8fd9\u662f\u76ee\u524d\u9898\u89e3\u4e2d `for` \u4f7f\u7528\u6700\u5c11\u7684\u4ee3\u7801\uff08\u4e00\u4e2a\uff09\n\n\u4e45\u95fb[\u6b64\u9898](https://www.luogu.com.cn/problem/CF1101B)\u9752\u9752\u8349\u539f\u7684\u7f8e\u666f\uff0c\u4eca\u5929\u6211\u5c31\u6765\u7785\u4e00\u7785\u3002\n\n### \u4eca\u5929\u7684\u524d\u7f6e\u829d\u58eb\uff1a\n\n1. `string` \u4e2d\u7684 `find` \u51fd\u6570\uff1a\n\n```\nstring\u4e2dfind()\u8fd4\u56de\u503c\u662f\u5b57\u6bcd\u5728\u6bcd\u4e32\u4e2d\u7684\u4f4d\u7f6e\uff08\u4e0b\u6807\u8bb0\u5f55\uff09\uff0c\n\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u90a3\u4e48\u4f1a\u8fd4\u56de\u4e00\u4e2a\u7279\u522b\u7684\u6807\u8bb0npos\u3002\n\uff08\u8fd4\u56de\u503c\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u4e2aint\u578b\u7684\u6570\uff09\n\n```\n\n\u6458\u81ea[\u8fd9\u4f4d\u5927\u4f6c](https://www.cnblogs.com/wkfvawl/p/9429128.html)\u7684\u535a\u5ba2\u3002\n\n2. `reverse` \u51fd\u6570\n\n```\nreverse\u51fd\u6570\u529f\u80fd\u662f\u9006\u5e8f\uff08\u6216\u53cd\u8f6c\uff09\uff0c\u591a\u7528\u4e8e\u5b57\u7b26\u4e32\u3001\u6570\u7ec4\u3001\u5bb9\u5668\u3002\u5934\u6587\u4ef6\u662f#include <algorithm>\n\nreverse\u51fd\u6570\u7528\u4e8e\u53cd\u8f6c\u5728[first,last)\u8303\u56f4\u5185\u7684\u987a\u5e8f\uff08\u5305\u62ecfirst\u6307\u5411\u7684\u5143\u7d20\uff0c\u4e0d\u5305\u62eclast\u6307\u5411\u7684\u5143\u7d20\uff09\uff0creverse\u51fd\u6570\u65e0\u8fd4\u56de\u503c\n```\n\n\u6458\u81ea[\u8fd9\u4f4d\u5927\u4f6c](https://www.cnblogs.com/yuanch2019/p/11591995.html)\u7684\u535a\u5ba2\u3002\n\n3. `string` \u4e2d\u7684 `substr` \u51fd\u6570\n\n```\n\u8fd4\u56de\u4e00\u4e2a\u65b0\u5efa\u7684\u521d\u59cb\u5316\u4e3astring\u5bf9\u8c61\u7684\u5b50\u4e32\u7684\u62f7\u8d1dstring\u5bf9\u8c61\u3002\n\n\u5b50\u4e32\u662f\uff0c\u5728\u5b57\u7b26\u4f4d\u7f6epos\u5f00\u59cb\uff0c\u8de8\u8d8alen\u4e2a\u5b57\u7b26\uff08\u6216\u76f4\u5230\u5b57\u7b26\u4e32\u7684\u7ed3\u5c3e\uff0c\u4ee5\u5148\u5230\u8005\u4e3a\u51c6\uff09\u5bf9\u8c61\u7684\u90e8\u5206\u3002\n```\n\n\u6458\u81ea[\u8fd9\u4f4d\u5927\u4f6c](https://blog.csdn.net/sunshihua12829/article/details/50484966)\u7684\u535a\u5ba2\u3002\n\n### \u6b63\u6587\uff1a\n\n\u671f\u671b\u7684\u5b57\u7b26\u4e32\u4e2d\u81f3\u5c11\u5f97\u6709 `[::]` \u8fd9\u56db\u4e2a\u5b57\u7b26\uff0c\u800c\u4e14\u5f97\u6309\u987a\u5e8f\u6392\u5217\u3002\n\n\u7136\u540e\u624d\u662f `|` \u7684\u95ee\u9898\u3002\n\n1. `[` \u5b57\u7b26\uff1a\n\n\u8981\u627e\u6700\u9760\u524d\u7684\uff0c\u76f4\u63a5 `find` \u5373\u53ef\u3002\n\nCode\uff1a\n\n```cpp\nif(str.find('[')!=string::npos)\n    bz=str.find('[');\nelse\n    codefinish;\n```\n\n\u6ce8\uff1a `codefinish` \u662f\u6211\u81ea\u5b9a\u4e49\u7684\u5b8f\uff0c\u957f\u8fd9\u6837\uff1a\n\n```cpp\n#define codefinish {cout<<-1;return 0;}\n```\n\n2. `]` \u5b57\u7b26\uff1a\n\n\u8981\u627e\u6700\u9760\u540e\u7684\uff0c\u4f46\u662f `find` \u627e\u7684\u662f\u7b2c\u4e00\u4e2a\u554a\uff1f\n\n\u8fd9\u65f6 `reverse` \u5c31\u6709\u7528\u4e86\uff0c\u7528\u4e00\u4e2a `rstr` \u5b58\u50a8\u539f\u5b57\u7b26\u4e32\u7684\u5012\u5e8f\u5373\u53ef\u3002\n\nCode\uff1a\n\n```cpp\nif(rstr.find(']')!=string::npos)\n    ez=rstr.find(']');\nelse\n    codefinish;\n```\n\n\u4f46\u662f\u8fd8\u662f\u5f97\u6ce8\u610f\u4e00\u70b9\uff0c\u641c\u51fa\u6765\u7684\u662f `rstr` \u7684\u4f4d\u7f6e\uff0c\u8981\u5c06\u5176\u8f6c\u6362\u6210 `str` \u7684\u6027\u76f8\u5bf9\u4f4d\u7f6e\u3002\n\nCode\uff1a\n\n```cpp\nez=str.size()-1-ez;\n```\n\n\n3. \u7ec6\u8282\u5904\u7406\uff1a\n\n\u7279\u5224\u8fd9\u4e24\u4e2a\u7ed3\u679c\u7684\u4f4d\u7f6e\u7684\u987a\u5e8f\uff1a\n\nCode\uff1a\n\n```cpp\nif(bz>ez)\n    codefinish;\n```\n\n4. \u7b2c\u4e00\u4e2a `:` \u5b57\u7b26\uff1a\n\n\u8981\u6c42\u6ee1\u8db3\u5728\u4e24\u4e2a\u4e2d\u62ec\u53f7\u4e4b\u95f4\uff0c\u4e14\u9996\u6b21\u51fa\u73b0\u3002\n\n\u7b2c\u4e00\u4e2a\u64cd\u4f5c\u7528\u5230\u4e86 `substr` \u51fd\u6570\u3002\n\n\u7b2c\u4e8c\u4e2a\u6b63\u5e38 `find` \u5904\u7406\u3002\n\nCode\uff1a\n\n```cpp\nstr=str.substr(bz,ez-bz+1);\nrstr=str;\nreverse(rstr.begin(),rstr.end()); \nif(str.find(':')!=string::npos)\n    bm=str.find(':');\nelse\n    codefinish;\n```\n\n5. \u7b2c\u4e8c\u4e2a `:` \u5b57\u7b26\uff1a\n\n\u8981\u6c42\u6ee1\u8db3\u5728\u4e24\u4e2a\u4e2d\u62ec\u53f7\u4e4b\u95f4\uff0c\u4e14\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u3002\n\n\u7528\u5728 4 \u4e2d\u5904\u7406\u597d\u7684 `rstr` \u67e5\u627e\u5373\u53ef\u3002\n\n\u6ce8\u610f\u5728 2 \u4e2d\u8bb2\u5230\u7684\u76f8\u5bf9\u4f4d\u7f6e\u7684\u5904\u7406\u3002\n\nCode\uff1a\n\n```cpp\nif(rstr.find(':')!=string::npos)\n\t\tem=rstr.find(':');\n\telse\n\t\tcodefinish;\n\tem=str.size()-1-em;\n```\n\n6. \u7ec6\u8282\u5904\u7406\n\n\u6ce8\u610f\u8981\u7279\u5224\u4e24\u4e2a\u4f4d\u7f6e\u76f8\u540c\u7684\u60c5\u51b5\u3002\n\nCode\uff1a\n\n```cpp\nif(bm>=em)\n    codefinish;\n```\n\n7. \u627e `|`\n\n\u5728\u4e24\u4e2a `:` \u4e4b\u95f4 `for` \u5373\u53ef\u3002\n\n\u8fd8\u6709\uff1a\u5982\u679c\u524d\u9762\u633a\u8fc7\u6765\u4e86\uff0c `ans` \u8981 `=4` \u3002\n\nCode\uff1a\n\n```cpp\nans=4;\nfor(int i=bm+1;i<=em-1;i++)\n    if(str[i]=='|')\n        ans++;\n```\n\n\u8fd9\u9053\u9898\u5230\u8fd9\u91cc\u91cd\u70b9\u5c31\u8bb2\u5b8c\u4e86\uff0c\u8fd8\u6709\u5c31\u662f\u8f93\u5165\u8f93\u51fa\u548c\u53d8\u91cf\u5b9a\u4e49\u4e86\u3002\n\n\u4ee3\u7801\u4e0d\u8d34\u4e86\uff0c\u56e0\u4e3a\u6bcf\u4e00\u4e2a\u91cd\u70b9\u90fd\u7ed9\u4e86\u4ee3\u7801\u3002\n\nAC\u8bb0\u5f55\uff1a[R33041767](https://www.luogu.com.cn/record/33041767)\n\n\u505a\u9898\u89e3\u4e0d\u6613\uff0c\u9ebb\u70e6\u7ed9\u4e2a\u8d5e\u5457\uff01",
        "postTime": 1587617184,
        "uid": 100910,
        "name": "\u26a1\u5c0f\u6797\u5b50\u26a1",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1101B)\n\n### \u521d\u59cb\u60f3\u6cd5\n\u7b2c\u4e00\u9636\u6bb5\uff1a\u4e0d\u65ad\u4ece\u5de6\u5f80\u53f3\u627e ```[``` \uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5c31\u8fdb\u5165\u7b2c\u4e8c\u9636\u6bb5\uff0c\u6ca1\u6709\u7684\u8bdd\u5c31\u8f93\u51fa ```-1``` \u3002\n\n\u7b2c\u4e8c\u9636\u6bb5\uff1a\u4e0d\u65ad\u4ece\u53f3\u5f80\u5de6\u627e ```]``` \uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5c31\u8fdb\u5165\u7b2c\u4e09\u9636\u6bb5\uff0c\u6ca1\u6709\u7684\u8bdd\u5c31\u8f93\u51fa ```-1``` \u3002\n\n\u7b2c\u4e09\u9636\u6bb5\uff1a\u4e0d\u65ad\u4ece\u5de6\u5f80\u53f3\u627e ```:``` \uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5c31\u8fdb\u5165\u7b2c\u56db\u9636\u6bb5\uff0c\u6ca1\u6709\u7684\u8bdd\u5c31\u8f93\u51fa ```-1``` \u3002\n\n\u7b2c\u4e94\u9636\u6bb5\uff1a\u4e0d\u65ad\u4ece\u53f3\u5f80\u5de6\u627e ```:``` \uff0c\u5982\u679c\u6709\u7684\u8bdd\uff0c\u5c31\u8fdb\u5165\u7b2c\u516d\u9636\u6bb5\uff0c\u6ca1\u6709\u7684\u8bdd\u5c31\u8f93\u51fa ```-1``` \u3002\n\n\u7b2c\u516d\u9636\u6bb5\uff1a\u4ece\u7b2c\u4e09\u9636\u6bb5\u7684\u7ed3\u675f\u90e8\u5206\uff0c\u5230\u7b2c\u56db\u9636\u6bb5\u7684\u7ed3\u675f\u90e8\u5206\uff0c\u4e0d\u65ad\u5bfb\u627e ```|``` \uff0c\u7136\u540e\u5c06 ```|``` \u7684\u6570\u91cf\u52a0 ```4``` \u540e\u8f93\u51fa\uff08\u56e0\u4e3a\u8fd8\u8981\u5305\u62ec\u9996\u672b\u90a3\u56db\u4e2a\u5b57\u7b26\uff0c\u6240\u4ee5\u8981\u52a0\u4e0a ```4``` \uff09\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\uff1a\n```\n#include<iostream>\n#include<cstring>\n#include<cstdio>\nusing namespace std;\nchar ch[500010];\nint sum;\nint main()\n{\n    scanf(\"%s\",&ch);\n    int len=strlen(ch);\n    for(int i=0;i<len;i++){\n        if(ch[i]=='['){\n            for(int j=len-1;j>=0;j--){\n                if(ch[j]==']'){\n                    for(int k=i+1;k<len-1;k++){\n                        if(ch[k]==':'){\n                            for(int l=j-1;l>k;l--){\n                                if(ch[l]==':'&&!(i>=j||l<=k)){\n                                    for(int m=k+1;m<l;m++){\n                                        if(ch[m]=='|')sum++;\n                                    }\n                                    printf(\"%d\",sum+4);\n                                    return 0;\n                                }\n                            }\n                        }\n                    }\n                }\n            }  \n        }\n    }\n    printf(\"-1\");\n    return 0;\n}\n```\n\u4e94\u91cd\u5faa\u73af\uff0c\u4e0d[T](https://www.luogu.com.cn/record/57897548)\u6389\u624d\u602a\u5462\u3002\n\n\u770b\u6765\u6211\u4eec\u5f97\u60f3\u53e6\u5916\u7684\u529e\u6cd5\u4e86\u3002\n\n\n------------\n\n### \u5206\u6790\u548c\u601d\u8def\n\u5982\u679c\u6211\u4eec\u628a\u6bcf\u6b21\u5faa\u73af\u7684\u627e\u5230\u540e\u7ec8\u6b62\u4f4d\u7f6e\u8bb0\u4e0b\u6765\uff0c\u5c82\u4e0d\u662f\u7701\u4e86\u5f88\u591a\u9ebb\u70e6\uff1f\n\n\u6211\u4eec\u6765\u770b\u4e00\u4e0b\uff1a\n\n1. \u4ece\u5de6\u5f80\u53f3\u76f4\u5230\u627e\u5230 ```[``` \u6216\u8005\u5230\u8fbe\u4e86\u5b57\u7b26\u4e32\u672b\uff0c\u6807\u8bb0\u6240\u5728\u4f4d\u7f6e\u3002\n1. \u4ece\u53f3\u5f80\u5de6\u76f4\u5230\u627e\u5230 ```]``` \u6216\u8005\u5230\u8fbe\u4e86\u5b57\u7b26\u4e32\u9996\uff0c\u6807\u8bb0\u6240\u5728\u4f4d\u7f6e\u3002\n1. \u4ece\u5de6\u5f80\u53f3\u76f4\u5230\u627e\u5230 ```:``` \u6216\u8005\u5230\u8fbe\u4e86\u5b57\u7b26\u4e32\u672b\uff0c\u6807\u8bb0\u6240\u5728\u4f4d\u7f6e\u3002\n1. \u4ece\u53f3\u5f80\u5de6\u76f4\u5230\u627e\u5230 ```:``` \u6216\u8005\u5230\u8fbe\u4e86\u5b57\u7b26\u4e32\u9996\uff0c\u6807\u8bb0\u6240\u5728\u4f4d\u7f6e\u3002\n1. \u5224\u65ad\u662f ```[``` \u5c0f\u4e8e ```]``` \u6216\u8005\u5de6\u8fb9\u7684 ```:``` \u5c0f\u4e8e\u53f3\u8fb9\u7684 ```:``` \uff0c\u90a3\u4e48\u5c31\u4ece\u5de6\u8fb9\u7684 ```:``` \u4e00\u76f4\u5bfb\u627e\u5230\u53f3\u8fb9\u7684 ```:``` \uff0c\u7edf\u8ba1 ```|``` \u7684\u4e2a\u6570\uff0c\u52a0 ```4``` \u540e\u8f93\u51fa\u3002\u5426\u5219\u8f93\u51fa ```-1``` \u3002\n\n\u601d\u8def\u90fd\u7406\u6e05\u4e86\uff0c\u4e00\u6b65\u4e00\u6b65\u53bb\u6a21\u62df\u5c31\u597d\u4e86\u3002\n\n\n\n------------\n\n### \u5b8c\u6574 ```AC``` \u4ee3\u7801\uff1a\n```\n#include<iostream>\n#include<cstring>\n#include<cstdio>\nusing namespace std;\nint i,j,k,l;\nint sum;\nchar ch[500010];\nint main(){\n    scanf(\"%s\",&ch);\n    int len=strlen(ch);\n    for(i=0;ch[i]!='['&&i<len;i++);\n    for(j=len-1;ch[j]!=']'&&j>=0;j--);\n    for(k=i+1;ch[k]!=':'&&k<len-1;k++);\n    for(l=j-1;l>k;l--){\n        if(ch[l]==':'){\n            break;\n        }\n    }\n    if(!(i>=j||l<=k)){\n        for(int i=k+1;i<l;i++){\n            if(ch[i]=='|')sum++; \n        }\n        printf(\"%d\",sum+4);\t\n    }else{\n        printf(\"-1\");\n    }\n    return 0;\n}\n```\n",
        "postTime": 1631445845,
        "uid": 355424,
        "name": "Lish_Xizse",
        "ccfLevel": 0,
        "title": "CF1101B\u9898\u89e3"
    },
    {
        "content": "~~\u4e3a\u4e86\u770b\u9752\u9752\u8349\u539f\u6765\u505a\u4e86\u8fd9\u4e2a\u9898~~\n\n\u4e00\u4e2a\u5f88\u6c34\u7684\u6a21\u62df\u9898\uff0c\u5efa\u8bae\u964d\u6a59/\u7ea2\u3002\n\n\u5bf9\u4e8e\u8fd9\u9053\u9898\uff0c\u6211\u4eec\u5148\u4ece\u53f3\u5f80\u5de6\u4f9d\u6b21\u627e\u5230 `]` \u548c `:`\uff0c\u8bb0\u5f55\u4e0b `:` \u7684\u4f4d\u7f6e\u3002\u518d\u4f9d\u6b21\u4ece\u5de6\u5f80\u53f3\u5bfb\u627e `[`\uff0c`:` \u548c `|`, \u5230\u4e0a\u6b21\u641c\u7d22\u65f6 `:` \u7684\u4f4d\u7f6e\u505c\u6b62\uff0c\u671f\u95f4\u8bb0\u5f55\u4ed6\u4eec\u7684\u957f\u5ea6\u3002\u5982\u679c\u957f\u5ea6\u6ca1\u8fbe\u5230 $4$ \u76f4\u63a5\u8f93\u51fa $-1$ \u5373\u53ef\u3002\n\n\u4ee3\u7801\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nstring s;\nint main()\n{\n\tcin>>s;\n\tint len=s.length();\n\tlong long n=0;\n\tint jd=0;\n\tint jl=0;\n\tfor(register int i=len-1;i>=0;--i)\n\t{\n\t\tif(jd==0&&s[i]==']')\n\t\t{\n\t\t\t++jd;\n\t\t\t++n;\n\t\t}\n\t\telse if(jd==1&&s[i]==':')\n\t\t{\n\t\t\t++jd;\n\t\t\t++n;\n\t\t\tjl=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(jd<2)\n\t{\n\t\tcout<<-1;\n\t\treturn 0;\n\t}\n\tjd=0;\n\tfor(register int i=0;i<len;++i)\n\t{\n\t\tif(i==jl)\n\t\tbreak;\n\t\tif(jd==0&&s[i]=='[')\n\t\t{\n\t\t\t++jd;\n\t\t\t++n;\n\t\t}\n\t\telse if(jd==1&&s[i]==':')\n\t\t{\n\t\t\t++jd;\n\t\t\t++n;\n\t\t}\n\t\telse if(jd==2&&s[i]=='|')\n\t\t{\n\t\t\t++n;\n\t\t}\n\t}\n\tif(jd<2)\n\tcout<<-1;\n\telse\n\tcout<<n;\n\treturn 0;\n}\n```\n",
        "postTime": 1628939846,
        "uid": 414210,
        "name": "Iam1789",
        "ccfLevel": 0,
        "title": "CF1101B Accordion \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9898\u53ea\u9700\u8981\u4e00\u6b21\u5927\u6a21\u62df\u5c31\u597d\u4e86\u3002\n\n\u524d\u5f80\u540e\u904d\u5386\u627e $[$\uff0c\u540e\u5f80\u524d\u627e $]$\u3002\n\n\u518d\u6b21\u524d\u5f80\u540e\u904d\u5386\u627e $:$ \uff0c\u540e\u5f80\u524d\u627e $:$ \u3002\n\n\u5224\u65ad\u662f\u5426\u5408\u6cd5\uff0c\u8f93\u51fa\u7b54\u6848\u5373\u53ef\u3002\n### \u4ee3\u7801\uff1a\n```c\n#include<string.h>\n#include<stdio.h>\nint i,j,k,l,x,ans=4,p;//ans=4\u56e0\u4e3a\u5fc5\u987b\u6709\u4e00\u4e2a[::]\u7684\u60c5\u51b5\uff0c\u4e2d\u95f4\u624d\u80fd\u63d2\u5165|\u3002\nchar ch[500010];\nint main(){\n\tgets(ch);\n\tx=strlen(ch);\n\tfor(i=0;i<x&&ch[i]!='[';i++);//\u627e[\u3002\n\tfor(j=x-1;~j&&ch[j]!=']';j--);//\u627e]\u3002\n\tfor(k=i+1;k<j&&ch[k]!=':';k++);//\u627e\u7b2c\u4e00\u4e2a:\u3002\n\tfor(l=j-1;l>k&&ch[l]!=':';l--);//\u627e\u7b2c\u4e8c\u4e2a:\u3002\n\tif(i>=j||l<=k){//\u5224\u65ad\u662f\u5426\u5408\u6cd5\n\t\tputs(\"-1\");\n\t\treturn 0;\n\t}\n\tfor(p=k+1;p<l;p++)\n\t\tif(ch[p]=='|') ans++;//\u52a0\u4e0a\u80fd\u52a0\u4e0a\u7684|\u3002\n\tprintf(\"%d\\n\",ans); //\u8f93\u51fa\u7b54\u6848\u3002\n\treturn 0;//\u534e\u4e3d\u7684\u7ed3\u675f\u3002\n}\n```\n",
        "postTime": 1627878347,
        "uid": 476738,
        "name": "billzd",
        "ccfLevel": 5,
        "title": "CF1101B"
    },
    {
        "content": "[\u9752\u9752\u8349\u539f](https://www.luogu.com.cn/record/54669388)\u540d\u4e0d\u865a\u4f20\u3002\n\n### \u601d\u8def\uff1a\n\n\u6a21\u62df\u5373\u53ef\uff0c\u5751\u4e5f\u4e0d\u591a\uff0c\u4f46\u8981\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a\n\n1. \u4ece\u524d\u5f80\u540e\u548c\u4ece\u540e\u5f80\u524d\u627e `:` \u7684\u65f6\u5019,\u8981\u5148\u627e\u5230\u8fc7 `[` \u6216 `]` \u540e\u518d\u627e\u5230\u7684\uff0c\u624d\u7b97\u662f\u5408\u6cd5\u7684\u3002\n\n2. \u6700\u540e\u7b54\u6848\u8981\u52a0 $4$\uff08\u539f\u56e0\u6ce8\u91ca\u4e2d\u6709\u8be6\u7ec6\u89e3\u91ca\uff09\u3002\n\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>//\u4e07\u80fd\u5934 \n#define re register int//\u5b8f\u5b9a\u4e49register int\u4e3are\nusing namespace std;\nchar s[500005];\nint main(){\n\tint l,fz=-1,fm=-1,lz=-1,lm=-1,ans=0;\n\tcin>>s;\n\tl=strlen(s);\n\tfor(re i=0;i<l;i++){//\u4ece\u524d\u5f80\u540e\u904d\u5386 \n\t\tif(s[i]=='['&&fz==-1)fz=i;\n\t\t//\u5982\u679c\u627e\u5230\u4e86'['\u4e14\u4e4b\u524d\u6ca1\u6709\u627e\u5230\u8fc7\u5b83,\u5c31\u8bf4\u660e\u627e\u5230\u4e86\u7b2c\u4e00\u4e2a\u5b83,\u50a8\u5b58\u5b83\u7684\u4f4d\u7f6e \n\t\tif(s[i]==':'&&fm==-1&&fz!=-1)fm=i;\n\t\t//\u5982\u679c\u627e\u5230\u4e86':'\u4e14\u4e4b\u524d\u6ca1\u6709\u627e\u5230\u8fc7\u5408\u6cd5\u7684\u5b83,\u4e14\u4e4b\u524d\u5df2\u7ecf\u627e\u5230\u4e86\u7b2c\u4e00\u4e2a'[',\u5c31\u8bf4\u660e\u627e\u5230\u4e86\u7b2c\u4e00\u4e2a\u5408\u6cd5\u7684\u5b83,\u50a8\u5b58\u5b83\u7684\u4f4d\u7f6e \n\t\tif(fz!=-1&&fm!=-1)break;//\u5982\u679c\u90fd\u627e\u5230\u4e86,\u5c31\u9000\u51fa\u5faa\u73af \n\t}\n\tif(fz==-1||fm==-1){//\u5982\u679c\u6ca1\u6709\u627e\u5230'['\u6216\u5408\u6cd5\u7684':'\u5c31\u8f93\u51fa-1,\u7ed3\u675f\u7a0b\u5e8f \n\t\tprintf(\"-1\");\n\t\treturn 0;\n\t}\n\tfor(re i=l-1;i>=0;i--){//\u4ece\u540e\u5f80\u524d\u904d\u5386\n\t\tif(s[i]==']'&&lz==-1&&i!=fz)lz=i;\n\t\t//\u5982\u679c\u627e\u5230\u4e86'['\u4e14\u4e4b\u524d\u6ca1\u6709\u627e\u5230\u8fc7\u5b83,\u5c31\u8bf4\u660e\u627e\u5230\u4e86\u6700\u540e\u4e00\u4e2a\u5b83,\u50a8\u5b58\u5b83\u7684\u4f4d\u7f6e \n\t\tif(s[i]==':'&&lm==-1&&i!=fm&&lz!=-1)lm=i;\n\t\t//\u5982\u679c\u627e\u5230\u4e86':'\u4e14\u4e4b\u524d\u6ca1\u6709\u627e\u5230\u8fc7\u5408\u6cd5\u7684\u5b83,\u4e14\u4e4b\u524d\u5df2\u7ecf\u627e\u5230\u4e86\u6700\u540e\u4e00\u4e2a']',\u5c31\u8bf4\u660e\u627e\u5230\u4e86\u6700\u540e\u4e00\u4e2a\u5408\u6cd5\u7684\u5b83,\u50a8\u5b58\u5b83\u7684\u4f4d\u7f6e\n\t\tif((lz!=-1&&lm!=-1)||i<=fz)break;//\u5982\u679c\u90fd\u627e\u5230\u4e86\u6216i\u5df2\u7ecf\u5c0f\u4e8e\u7b2c\u4e00\u4e2a'[',\u5c31\u9000\u51fa\u5faa\u73af\n\t}\n\tif(lz==-1||lm==-1){//\u5982\u679c\u6ca1\u6709\u627e\u5230\u6700\u540e\u4e00\u4e2a\u7684']'\u6216\u975e\u7b2c\u4e00\u4e2a\u7684\u5408\u6cd5\u7684':'\u5c31\u8f93\u51fa-1,\u7ed3\u675f\u7a0b\u5e8f\n\t\tprintf(\"-1\");\n\t\treturn 0;\n\t}\n\tfor(re i=fm+1;i<lm;i++)//\u5728\u7b2c\u4e00\u4e2a\u5408\u6cd5\u7684':'\u548c\u6700\u540e\u4e00\u4e2a\u5408\u6cd5\u7684':'\u4e2d\u95f4\u627e'|' \n\t\tif(s[i]=='|')ans++;\n\tprintf(\"%d\",ans+4);//\u8f93\u51fa\u627e\u5230\u7684'|'\u7684\u4e2a\u6570\u52a04(\u7b2c\u4e00\u4e2a'['\u548c\u6700\u540e\u4e00\u4e2a']'\u8fd8\u6709\u7b2c\u4e00\u4e2a\u548c\u6700\u540e\u4e00\u4e2a\u5408\u6cd5\u7684':') \n\treturn 0;//\u597d\u4e60\u60ef \n}``\n",
        "postTime": 1627744752,
        "uid": 372780,
        "name": "dz3284",
        "ccfLevel": 4,
        "title": "CF1101B Accordion"
    },
    {
        "content": "\u60f3\u8981\u7b26\u5408\u8981\u6c42\u7684\u4e32\u6700\u957f\uff0c\u6211\u4eec\u53ef\u4ee5**\u8d2a\u5fc3**\u4e00\u4e0b\u3002\u5927\u81f4\u601d\u8def\u662f\uff1a\u627e\u5230\u6700\u5de6\u8fb9\u7684 $\\texttt{\"[:\"}$ \u4e0e\u6700\u53f3\u8fb9\u7684 $\\texttt{\":]\"}$\uff0c\u8fd9\u4e00\u5bf9\u65b9\u62ec\u53f7\u8ddd\u79bb\u6700\u8fdc\uff0c\u80fd\u5305\u62ec\u7684 $\\texttt{\"|\"}$ \u663e\u7136\u6700\u591a\uff0c\u800c\u5176\u5b83\u7684\u65b9\u62ec\u53f7\u5bf9\u6784\u6210\u7684\u4e32\u663e\u7136\u6ca1\u6709\u6700\u8fdc\u7684\u8fd9\u4e00\u5bf9\u4f18\u3002\n\n\u57fa\u4e8e\u8fd9\u4e2a\u601d\u60f3\uff0c\u6211\u4eec\u6765\u5b9e\u73b0\u4ee3\u7801\u3002\u4ee3\u7801\u5927\u81f4\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a\n\n1. \u4ece\u5de6\u5230\u53f3\u5148\u626b\u4e00\u904d\u8f93\u5165\u7684\u5b57\u7b26\u4e32\uff0c\u786e\u5b9a\u7b2c\u4e00\u4e2a $\\texttt{\"[:\"}$ \u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u8bb0\u4e3a $l$\u3002\u5982\u679c\u627e\u4e0d\u5230 $\\texttt{\"[:\"}$ \u8f93\u51fa $-1$\uff1b\n2. \u4ece\u53f3\u5230\u5de6\u626b\u4e00\u904d $[l,|s|]$ \u4e4b\u95f4\u7684\u5b57\u7b26\uff0c\u786e\u5b9a\u7b2c\u4e00\u4e2a $\\texttt{\":]\"}$ \u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u8bb0\u4e3a $r$\u3002\u5982\u679c\u627e\u4e0d\u5230 $\\texttt{\":]\"}$\uff1b\n3. \u626b\u4e00\u904d $[l,r]$ \u4e4b\u95f4\u7684\u5b57\u7b26\uff0c\u7edf\u8ba1 $\\texttt{\"|\"}$ \u51fa\u73b0\u7684\u6b21\u6570\uff0c\u8bb0\u4e3a $cnt$\uff0c\u5219\u6700\u7ec8\u7b54\u6848\u4e3a $cnt+1$\u3002\n\n\u81f3\u6b64\uff0c\u6b64\u9898\u5f97\u89e3\u3002\u4e0b\u9762\u653e\u4e0a\u4ee3\u7801\uff1a\n\n```cpp\n#include<iostream>\n#include<cstdio>\n#include<string>\n#include<vector>\n#define rgt register int\nusing namespace std;\n\nconst int mxn = 5e5+5;\n\nstring str;\nint ls,l,r,cnt;\n\nint main(){\n\tbool fk;\n\tcin>>str;\n\tls=str.size();\n    \n\tfk=false;\n\tfor(rgt i=0;i<ls;i++){\n\t\tif(str[i]=='['&&!fk)\n\t\t\tfk=true;\n\t\tif(str[i]==':'&&fk){\n\t\t\tl=i;  //\u627e\u5230\u6700\u5de6\u8fb9\u7684 [:\uff0c\u6807\u8bb0\u4f4d\u7f6e\n\t\t\tbreak; \n\t\t}\n\t}\n    \n\tif(!l){\n\t\tprintf(\"-1\");\n\t\treturn 0;\n\t}  //\u672a\u627e\u5230\uff0c\u65e0\u89e3\n    \n\tfk=false;\n\tfor(rgt i=ls-1;i>l;i--){\n\t\tif(str[i]==']'&&!fk)\n\t\t\tfk=true;\n\t\tif(str[i]==':'&&fk){\n\t\t\tr=i;  //\u627e\u5230\u6700\u53f3\u8fb9\u7684 :]\uff0c\u6807\u8bb0\u4f4d\u7f6e\n\t\t\tbreak; \n\t\t}\n\t}\n    \n\tif(!r){\n\t\tprintf(\"-1\");\n\t\treturn 0;\n\t}  //\u672a\u627e\u5230\uff0c\u65e0\u89e3\n    \n\tfor(rgt i=l;i<=r;i++)\n\t\tif(str[i]=='|')\n\t\t\tcnt++;\n\tcout<<cnt+4;  //\u7edf\u8ba1 [l,r] \u4e4b\u95f4\u7684 | \u6570\u91cf\uff0c\u52a0 4 \u5f97\u5230\u7b54\u6848\n\treturn 0;\n}\n```\n",
        "postTime": 1627117006,
        "uid": 57421,
        "name": "fls233666",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "\u9898\u76ee\u4f20\u9001>>[CF1101B](https://www.luogu.com.cn/problem/CF1101B)  \n### \u9898\u610f\u7b80\u8ff0\uff1a  \n- \u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u6c42\u5728\u5220\u9664\u4e00\u4e9b\u5b57\u7b26\u540e\u6700\u957f\u7684\u7b26\u5408\u4ee5\u4e0b\u6761\u4ef6\u7684\u4e32\u957f:  \n  1. \u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e $4$\uff1b  \n  1. \u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a \"\\[\"\uff0c\u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u4e3a \"\\]\"\uff1b  \n  1. \u7b2c\u4e8c\u4e2a\u5b57\u7b26\u548c\u5012\u6570\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e3a \":\"\uff1b  \n  1. \u5176\u4f59\u5b57\u7b26\u5168\u90e8\u4e3a \"|\"\uff1b  \n- $1 \\le|s| \\le 500000$\uff1b  \n- \u82e5\u65e0\u7b26\u5408\u6761\u4ef6\u7684\u4e32\uff0c\u8f93\u51fa $-1$\uff1b  \n\n### \u9898\u76ee\u5206\u6790\uff1a  \n\u5bf9\u4e8e\u6c42\u4e32\uff0c\u6211\u4eec\u53ea\u9700\u5bf9\u4e8e\u8f93\u5165\u7684\u4e32\u5148\u5206\u522b\u4ece\u4e32\u4e24\u7aef\u5411\u4e2d\u63a8\u8fdb\u5bfb\u627e\u5176\u6700\u9760\u7aef\u7684 \"\\[\" \u548c \"\\]\"\uff0c\u5e76\u8bb0\u5f55\u5176\u4f4d\u7f6e\uff0c\u7136\u540e\u518d\u5206\u522b\u4ee5\u4e4b\u524d\u5f97\u7684 \"\\[\" \u548c \"\\]\" \u4e3a\u7aef\u5411\u4e2d\u63a8\u8fdb\u5bfb\u627e\u5176\u6700\u9760\u4e24\u7aef\u7684 \":\"\uff0c\u968f\u540e\u518d\u5728\u4e4b\u524d\u6c42\u5f97\u7684\u4e24\u4e2a \":\" \u95f4\u679a\u67e5\u7559 \"|\" \u5373\u53ef\u3002\u5f53\u7136\uff0c\u5bf9\u4e8e\u7b26\u5408\u6761\u4ef6\u7684\u4e32\u4e0d\u5b58\u5728\u7684\u60c5\u51b5\uff0c\u5982\u679c\u7ed9\u5b9a\u7684\u4e32\u65e0\u524d\u540e \"\\[\" \u548c \"\\]\" \u5339\u914d\uff08\u65e0 \"\\[\" \u6216 \"\\]\" \u3001\u6c42\u5f97 \"\\[\" \u7684\u4f4d\u7f6e\u5927\u4e8e \"\\]\" \u7684\u4f4d\u7f6e\uff09\uff0c\u6216\u65e0\u524d\u540e \":\" \u548c \":\" \u5339\u914d\uff08\u65e0 \":\" \u6216 \u65e0\u4e24\u4e2a \":\"\uff09\uff0c\u5219\u65e0\u7b26\u5408\u6761\u4ef6\u7684\u4e32\u3002  \n### Code\uff1a  \n```cpp\n#include <iostream>\n#include <cstdio>\n#include <string>\n#include <cstring>\nusing namespace std;\nint find();    //\u58f0\u660e\u627e\u5bf9\u8c61\u51fd\u6570\nstring s;   //\u5b9a\u4e49\u7ed9\u5b9a\u4e32\nint len, qk, hk, qm, hm, ans = 0;   //\u5b9a\u4e49\u7ed9\u5b9a\u4e32\u957f\uff0c\u524d\u62ec\u53f7\u4f4d\u7f6e\uff0c\u540e\u62ec\u53f7\u4f4d\u7f6e\uff0c\u524d\u5192\u53f7\u4f4d\u7f6e\uff0c\u540e\u5192\u53f7\u4f4d\u7f6e\uff0c\u7b26\u5408\u6761\u4ef6\u7684\u4e32\u957f\nint find(int b, int e, int op, char o)   //\u627e\u5bf9\u8c61\u51fd\u6570\uff0c\u53c2\u6570\u4e3a\uff1a\u8d77\u59cb\u4f4d\u7f6e\uff0c\u7ed3\u675f\u4f4d\u7f6e\uff0c\u627e\u5bf9\u8c61\u65b9\u5f0f\uff0c\u5bf9\u8c61\n{\n\tint r = -1;   //\u521d\u59cb\u5316\u8fd4\u56de\u503c\uff0c\u4ee5\u4fbf\u5224\u65ad\u540e\u7eed\u5224\u65ad\u662f\u5426\u5b58\u5728\u5bf9\u8c61\n\tif (op == 1)   //\u627e\u5bf9\u8c61\u65b9\u5f0f\u4e3a\u4ece\u524d\u5411\u4e2d\u63a8\u8fdb\n\t{\n\t\tfor (int i = b; i < e; i++)\n\t\t{\n\t\t\tif (s[i] == o)\n\t\t\t{\n\t\t\t\tr = i;   //\u627e\u5230\u5bf9\u8c61\uff0c\u8bb0\u5f55\u4f4d\u7f6e\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\telse if (op == 2)   //\u627e\u5bf9\u8c61\u65b9\u5f0f\u4e3a\u4ece\u540e\u5411\u4e2d\u63a8\u8fdb\n\t{\n\t\tfor (int i = e - 1; i >= b; i--)\n\t\t{\n\t\t\tif (s[i] == o)\n\t\t\t{\n\t\t\t\tr = i;   //\u627e\u5230\u5bf9\u8c61\uff0c\u8bb0\u5f55\u4f4d\u7f6e\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn r;   //\u8fd4\u56de\u5bf9\u8c61\u72b6\u6001\n}\nint main()\n{\n\tios::sync_with_stdio(0);   //\u5173\u540c\u6b65\u6d41\u52a0\u901fcin\u8f93\u5165\u548ccout\u8f93\u51fa\n\tcin >> s;\n\tlen = s.length();   //\u8ba1\u7b97\u7ed9\u5b9a\u4e32\u7684\u957f\n\tqk = find(0, len, 1, '[');   //\u627e\u524d\u62ec\u53f7\u5f97\u72b6\u6001\n\thk = find(0, len, 2, ']');   //\u627e\u540e\u62ec\u53f7\u5f97\u72b6\u6001\n\tif (qk > hk || qk == -1 || hk == -1)   //\u5df2\u4e0d\u7b26\u6761\u4ef6\n\t{\n\t\tcout << \"-1\";\n\t\treturn 0;   //\u8f93\u51fa\uff0d1\uff0c\u76f4\u63a5\u7ed3\u675f\u6574\u4e2a\u7a0b\u5e8f\n\t}\n\tqm = find(qk + 1, hk, 1, ':');   //\u627e\u524d\u5192\u53f7\u5f97\u72b6\u6001\n\thm = find(qk + 1, hk, 2, ':');   //\u627e\u540e\u5192\u53f7\u5f97\u72b6\u6001\n\tif (qm == hm || qk == -1 || hk == -1)   //\u5df2\u4e0d\u7b26\u6761\u4ef6\n\t{\n\t\tcout << \"-1\";\n\t\treturn 0;   //\u8f93\u51fa\uff0d1\uff0c\u76f4\u63a5\u7ed3\u675f\u6574\u4e2a\u7a0b\u5e8f\n\t}\n\tfor (int i = qm + 1; i < hm; i++)\n\t{\n\t\tif (s[i] == '|')   //\u679a\u67e5\u7559|\u5e76\u52a0\u5165\u7b26\u5408\u6761\u4ef6\u7684\u4e32\u957f\n\t\t{\n\t\t\tans++;\n\t\t}\n\t}\n\tans += 4;   //\u4e0d\u8981\u5fd8\u8bb0\u524d\u540e\u62ec\u53f7\u548c\u5192\u53f7\u957f\n\tcout << ans;\n\treturn 0;   //\u7ed3\u675f\u6574\u4e2a\u7a0b\u5e8f\n}\n```\n### \u7ed3\u679c(\u672a\u5438\u6c27)($588$\u4e2a\u6d4b\u8bd5\u70b9\uff0c\u573a\u9762\u4e00\u5ea6\u9707\u60ca\uff01):  \n![JieGuo](https://cdn.luogu.com.cn/upload/image_hosting/xyhypnn0.png)  \n\u4f01\u9e45\u7684\u9898\u89e3\u5230\u6b64\u7ed3\u675f\uff0c\u795d\u5404\u4f4d OIets \u8fdb\u6b65 ++",
        "postTime": 1622898839,
        "uid": 271784,
        "name": "\u6c42\u5b66\u7684\u4f01\u9e45",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF1101B Accordion"
    },
    {
        "content": "\u56e0\u4e3a\u8fd9\u9898\u6709 $588$ \u4e2a\u6d4b\u8bd5\u70b9\u6240\u4ee5\u5c31\u6765\u505a\u4e86 ~~\u597d\u6c34\u7684\u9898~~\n\n\u76f4\u63a5\u6a21\u62df\n\n\u5148\u5c06\u5b57\u7b26\u4e32\u524d\u9762\u7684\u975e `[` \u5b57\u7b26\u5220\u9664\uff0c\u5982\u679c\u6ca1\u6709 `[` \u5b57\u7b26\u5373\u8f93\u51fa $-1$\n\n\u540c\u6837\u7684\uff0c\u518d\u6b21\u5904\u7406 `]`\uff0c\u5728\u6ca1\u6709 `]` \u5b57\u7b26\u7684\u60c5\u51b5\u4e0b\u8f93\u51fa $-1$\n\n\u800c\u5bf9\u4e8e\u4e00\u5bf9 `:` \u8981\u6ce8\u610f\u6700\u7ec8\u5b57\u7b26\u4e32\u957f\u5ea6 $|ans|\\geq4$ \uff0c\u5373 `:` \u4e0d\u91cd\u590d\u8ba1\u7b97\n\n\u4ece\u7b2c\u4e8c\u4e2a\u548c\u5012\u6570\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u5f00\u59cb\u5224\u65ad\uff0c\u76f4\u5230\u9047\u89c1 `:` \u6216\u8005\u662f\u5b57\u7b26\u4e32\u53ea\u5269\u4e0b `[` \u548c `]` \u65f6\u505c\u6b62\n\n\u6700\u540e\u7edf\u8ba1\u4ece\u7b2c\u4e09\u4e2a\u5b57\u7b26\u5f00\u59cb\u5230\u5012\u6570\u7b2c\u4e09\u4e2a\u5b57\u7b26\u6709\u591a\u5c11\u4e2a\u975e `|` \u5b57\u7b26\uff0c\u76f4\u63a5\u51cf\u53bb\u5373\u53ef\n\nAC\u4ee3\u7801\n\n``` cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nstring q;\n\nint main() {\n    cin >> q;\n    int len = q.size();\n    int rem = 0;\n    while (q.size() && q.front() != '[') { // \u53bb\u9664\u7b2c\u4e00\u4e2a [ \u524d\u7684\u5b57\u7b26\n        q.erase(0, 1);\n        rem++;\n    }\n    if (q.empty()){ // \u5b57\u7b26\u4e32\u65e0 [ \u5b57\u7b26\n        puts(\"-1\");\n        return 0;\n    }\n    while (q.size() && q.back() != ']') { // \u53bb\u9664\u6700\u540e\u4e00\u4e2a ] \u540e\u9762\u7684\u5b57\u7b26\n        q.pop_back();\n        rem++;\n    }\n    if (q.empty()) { // \u5b57\u7b26\u4e32\u65e0 ] \u5b57\u7b26\n        puts(\"-1\");\n        return 0;\n    }\n    while (q.size() != 2 && q[1] != ':') { \n        q.erase(1, 1); // \u4e0b\u6807\u4e3a 1 \u7684\u7b2c\u4e8c\u4e2a\u5b57\u7b26\n        rem++;\n    }\n    if (q.size() == 2) { // \u5373\u5b57\u7b26\u4e32\u65e0 : \uff0c\u53ea\u5269\u4e0b[]\n        puts(\"-1\");\n        return 0;\n    }\n    while (q.size() != 3 && *(q.end() - 2) != ':') { // \u5012\u6570\u7b2c\u4e8c\u4e2a\n        q.erase(q.size() - 2, 1);\n        rem++;\n    }\n    if (q.size() == 3) { // \u65e0\u7b2c\u4e8c\u4e2a : \uff0c\u53ea\u5269\u4e0b [:]\n        puts(\"-1\");\n        return 0;\n    }\n    for (int i = 2; i < q.length() - 2; i++) {\n        if (q[i] != '|') // \u52a0\u4e0a\u9700\u8981\u53bb\u9664\u7684\u975e | \u5b57\u7b26\n            rem++;\n    }\n    cout << len - rem << endl;\n    return 0;\n}\n```",
        "postTime": 1602384480,
        "uid": 370805,
        "name": "Insouciant21",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "## xxs\u53d1\u9898\u89e3 \u7b2c $8$\u5f39\n\n\u53d1\u73b0\u4e86\u4e00\u4ef6\u5947\u5947\u602a\u602a\u7684\u4e8b\u60c5\uff1a\u5168\u573a**\u6e05\u4e00\u8272**\u7684C++\u9898\u89e3\uff01\n\n\u6240\u4ee5\u6211\u8981\u6765\u4e00\u7bc7C\u8bed\u8a00\u9898\u89e3\uff01\n\n---\n\n\u601d\u8def\uff1a\n\n1.\u4ece\u5de6\u8fb9\u5f00\u59cb\u904d\u5386\u5148\u627e `[`\uff0c\u518d\u627e `:`  \n\n2.\u4ece\u53f3\u8fb9\u5f00\u59cb\u904d\u5386\u5148\u627e `:`\uff0c\u518d\u627e `]`\n\n3.\u904d\u5386\u4e24\u4e2a `:` \u4e4b\u95f4\u6709\u591a\u5c11\u4e2a `|`\uff0c+4\u8f93\u51fa\u3002\n\n\u505a\u505a\u770b\u5427\uff01\n\n\u6ce8\u610f\uff1a**\u8fd9\u9898\u6709\u8d85\u591a\u5751\u70b9**\uff01\n\n---\n\n\u5982\u679c\u4f60\u6837\u4f8b\u8fc7\u4e86\uff0c\u4f46WA\u4e86\uff0c\u6765\u770b\u770b\u6211\u7684\u81ea\u9020 Hack \u6570\u636e\uff1a\n\n\\#1\n\ninput: `[:]`\n\nans: `-1`\n\n\\#2\n\ninput: `:]:|:[:`\n\nans: `-1`\n\n\\#3\n\ninput: `|[|:|:|]|`\n\nans: `5`\n\n\\#4\n\ninput: `[|[|:|:|:|:|]|]`\n\nans: `7`\n\n---\n\n### \u73b0\u5728\u662f\u8bb2\u89e3\u65f6\u95f4~\n\n\u76f4\u63a5\u4e0a\u4ee3\u7801\uff0c\u8bb2\u89e3\u90fd\u5728\u6ce8\u91ca\u91cc\n```\n#include<stdio.h>//\u4e0d\u89e3\u91ca\nchar a[500005];//\u5b57\u7b26\u4e32\u6570\u7ec4\nint l,r,m1,m2,length;//\u53d8\u91cf\uff0c\u5206\u522b\u5bf9\u5e94'[',']'\u548c\u4e24\u4e2a\u5192\u53f7\u7684\u4f4d\u7f6e\n#define OVER {printf(\"-1\");return 0;}//\u4e00\u4e2a\u5b8f\uff0c\u4f5c\u7528\u662f\u8f93\u51fa\u65e0\u89e3\u5e76\u7ed3\u675f\u7a0b\u5e8f\nint main()\n{\n\tscanf(\"%s\",a);//\u8f93\u5165\uff08\u4e0d\u8981\u201c&\u201d\uff01\uff09\n\t\n\tfor(length=0;length<500001&&a[length]!=0;length++);//\u5bfb\u627e'\\0'(\u7ed3\u675f\u4f4d\u7f6e\uff0c\u521a\u597d\u4e5f\u662f\u5b57\u7b26\u4e32\u957f\u5ea6)\n\t\n\tfor(l=0;l<length&&a[l]!='[';l++);//\u627e\u5de6\u62ec\u53f7\n\t\n\tif(l>=length)OVER//\u5224\u65ad\u8fb9\u754c\uff0c\u540e\u9762\u7684\u540c\u7406\n\t\n\tfor(m1=l+1;m1<length&&a[m1]!=':';m1++);//\u627e\u7b2c\u4e00\u4e2a\u5192\u53f7\n\t\n\tif(m1>=length)OVER\n\t\n\tfor(r=length-1;r>=m1&&a[r]!=']';r--);//\u627e\u53f3\u62ec\u53f7 \n\t\n\tif(r<m1)OVER//\u4f4d\u7f6e\u9519\u4e71\uff0c\u518d\u89c1\n\t\n\tfor(m2=r-1;m2>m1&&a[m2]!=':';m2--);//\u627e\u7b2c\u4e8c\u4e2a\u5192\u53f7\n\t\n\tif(m2<=m1)OVER//\u6ce8\u610f\uff1a\u4e24\u4e2a\u5192\u53f7\u4e00\u5b9a\u4e0d\u80fd\u5728\u4e00\u8d77\uff01\n\t\n\tint ans=4;//\u5148\u628a[::]\u56db\u4e2a\u5b57\u7b26\u7b97\u4e0a\n\t\n\tfor(int i=m1+1;i<m2;i++)if(a[i]=='|')ans++;//\u627e\u4e24\u4e2a\u5192\u53f7\u76f4\u63a5\u6709\u591a\u5c11'|'\n\t\n\tprintf(\"%d\",ans);//\u8f93\u51fa\n\t\n\treturn 0;\n}\n```\n\u5982\u679c\u4f60AC\u4e86\uff0c\u8bb0\u5f97\u70b9\u4e2a\u8d5e\u518d\u8d708~",
        "postTime": 1601964056,
        "uid": 277757,
        "name": "hanyuchen2019",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    },
    {
        "content": "\u5199\u5728\u524d\u9762\uff1a\u8fd9\u9898\u7684\u6d4b\u8bd5\u70b9\u771f\u7684\u5f88\u68d2\u3002\u3002\u3002\u4e00\u5171588\u4e2aAC\uff0c\u592a\u723d\u4e86^\\_^\n\n[588\u4e2aAC\u2026\u2026](https://www.luogu.com.cn/record/36035727)\n\n\u597d\u4e86\uff0c\u8a00\u5f52\u6b63\u4f20\u3002\n### \u9898\u76ee\u5927\u610f\n\u7ed9\u51fa\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8bd5\u5728\u5176\u4e2d\u5220\u9664\u4e00\u4e9b\u5b57\u7b26\uff0c\u4f7f\u5f97\u6700\u540e\u7684\u4e32\u53d8\u4e3a\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6\u7684\u4e32\u4e14\u957f\u5ea6\u6700\u5927\uff1a\n- \u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e $4$\uff1b\n- \u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e3a `[`\uff1b\n- \u6700\u540e\u4e00\u4e2a\u5b57\u7b26\u4e3a `]`\uff1b\n- \u7b2c\u4e8c\u4e2a\u5b57\u7b26\u548c\u5012\u6570\u7b2c\u4e8c\u4e2a\u5b57\u7b26\u4e3a `:`\uff1b\n- \u5176\u4f59\u5b57\u7b26\u5168\u90e8\u4e3a `|`\n\n### \u5927\u4f53\u601d\u8def\n\u4e0a\u8ff0\u7b2c\u4e00\u4e2a\u6761\u4ef6\u53ea\u8981\u6ee1\u8db3\u6761\u4ef62~4\u5c31\u81ea\u7136\u6ee1\u8db3\u3002\n\n**\u5bf9\u4e8e\u6761\u4ef62~4**\n\n\u9996\u5148\u6211\u60f3\u5230\u7684\u662f\u505a\u4e86\u4e00\u4e2a\u5b57\u7b26\u4e32 `string a=\"[::]\"` \uff0c\u7528STL\u4e2d\u7684`s.find(a)`\u6765\u5bfb\u627e\u3002\u7136\u800c\u8fde\u6837\u4f8b\u90fd\u6ca1\u6709\u8fc7\u3002\u539f\u6765\u662f`[::]`\u53ef\u80fd\u4e0d\u8fde\u7eed\u3002\u56e0\u6b64\u53ea\u80fd\u4e56\u4e56\u7684\u7528\u5faa\u73af\u53bb\u627e\u4e86qaq\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n\tcin>>s;//\u8f93\u5165\n\tint a,b,f1=0,f2=0;//\u8bb0\u5f55\u7b2c\u4e00\u4e2a\u2018[\u2019\uff0c\u6700\u540e\u4e00\u4e2a\u2018]\u2019\u7684\u4f4d\u7f6e\u3002\n\tfor(int i=0;i<s.length();i++){\n\t\tif(s[i]=='['){\n\t\t\ta=i;\n            f1=1;\n\t\t\tbreak;\n\t\t}\n\t}//\u4ece\u5934\u5f00\u59cb\u627e\u7b2c\u4e00\u4e2a\u2018[\u2019\n\tfor(int i=s.length()-1;i>=0;i--){\n\t\tif(s[i]==']'){\n\t\t\tb=i;\n            f2=1;\n\t\t\tbreak;\n\t\t}\n\t}//\u4ece\u5c3e\u5f00\u59cb\u627e\u6700\u540e\u4e00\u4e2a\u2018[\u2019\n\tif(a>=b || f1*f2==0) {\n\t\tcout<<-1;\n\t\treturn 0;;\n\t}\n    //\u76f8\u7b49\u8868\u793aa=b=0\uff0c\u672a\u627e\u5230\n    //\u5927\u4e8e\u8868\u793a'['\u5728']'\u540e\u9762\uff0c\u65e0\u6cd5\u914d\u5bf9\n\telse {//\u5426\u5219\u627e\u2018\uff1a\u2019\n\t\tint c=0;\n\t\tfor(int i=a+1;i<b;i++){\n\t\t\tif(s[i]==':') c++;\n\t\t\tif(c==2) break;\n\t\t}//\u53ea\u9700\u5728\u3010\u3011\u4e4b\u95f4\u627e\u4e24\u4e2a\uff1a\u5373\u53ef\n\t\tif(c<2){\n\t\t\tcout<<-1;\n\t\t\treturn 0;//\u5982\u679c\u5c11\u4e8e\u4e24\u4e2a\u8bf4\u660e\u4e0d\u7b26\u5408\u6761\u4ef6\n\t\t}\n\t}\n```\n**\u5bf9\u4e8e\u6761\u4ef65**\n\n\u5148\u521d\u59cb\u5316\u957f\u5ea6\u4e3a4\uff0c\u7136\u540e\u518d\u4e24\u4e2a\u5192\u53f7\u4e4b\u95f4\u627e `|`\u7684\u4e2a\u6570\uff0c\u627e\u5230\u4e00\u4e2a\u957f\u5ea6\u52a0\u4e00\u3002\u6ce8\u610f\u4e24\u4e2a\u5192\u53f7\u5fc5\u987b\u5728\u3010\u3011\u4e4b\u95f4\uff08\u627e\u5192\u53f7\u7684\u6b65\u9aa4\u4e5f\u53ef\u4ee5\u5408\u5e76\u5230\u4e0a\u65b9\uff09\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n```cpp\n\tint x,y,flag=0;//\u8bb0\u5f55\u5192\u53f7\u4f4d\u7f6e\n    //flag\u5224\u65ad\u5192\u53f7\u662f\u5426\u5728\u3010\u3011\u4e4b\u95f4\n\tfor(int i=0;i<s.length();i++){\n\t\tif(s[i]=='[') flag=1;\n\t\tif(s[i]==':' && flag==1){\n\t\t\tx=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tflag=0;\n\tfor(int i=s.length()-1;i>=0;i--){\n\t\tif(s[i]==']') flag=1;\n\t\tif(s[i]==':' && flag==1){\n\t\t\ty=i;\n\t\t\tbreak;\n\t\t}\n\t}//\u786e\u5b9a\u4f4d\u7f6e\n\tfor(int i=x;i<=y;i++){\n\t\tif(s[i]=='|') ans++;\n\t}//\u5728\u5192\u53f7\u4e4b\u95f4\u627e|\uff0c\u589e\u52a0\u957f\u5ea6\n```\n\u6700\u540e\u8f93\u51fa\u5373\u53ef\u3002\n### \u5b8c\u6574\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>//\u5934\u6587\u4ef6\nusing namespace std;\nstring s;//\u5b57\u7b26\u4e32\nint main(){\n\tcin>>s;//\u8f93\u5165\n\tint ans=4;//\u786e\u5b9a\u957f\u5ea6\n\tint a,b;\n\tfor(int i=0;i<s.length();i++){\n\t\tif(s[i]=='['){\n\t\t\ta=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tfor(int i=s.length()-1;i>=0;i--){\n\t\tif(s[i]==']'){\n\t\t\tb=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(a>=b) {\n\t\tcout<<-1;\n\t\treturn 0;;\n\t}\n\telse {\n\t\tint c=0;\n\t\tfor(int i=a+1;i<b;i++){\n\t\t\tif(s[i]==':') c++;\n\t\t\tif(c==2) break;\n\t\t}\n\t\tif(c<2){\n\t\t\tcout<<-1;\n\t\t\treturn 0;\n\t\t}\n\t}//\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\n\tint x,y,flag=0;\n\tfor(int i=0;i<s.length();i++){\n\t\tif(s[i]=='[') flag=1;\n\t\tif(s[i]==':' && flag==1){\n\t\t\tx=i;\n\t\t\tbreak;\n\t\t}\n\t}\n\tflag=0;\n\tfor(int i=s.length()-1;i>=0;i--){\n\t\tif(s[i]==']') flag=1;\n\t\tif(s[i]==':' && flag==1){\n\t\t\ty=i;\n\t\t\tbreak;\n\t\t}\n\t}//\u786e\u5b9a\u5192\u53f7\u4f4d\u7f6e\n\tfor(int i=x;i<=y;i++){\n\t\tif(s[i]=='|') ans++;\n\t}//\u8ba1\u7b97\u957f\u5ea6\n\tcout<<ans;//\u8f93\u51fa\n\treturn 0;//\u5b8c\u7f8e\n}\n```\n~~\u770b\u5f97\u8fd9\u4e48\u8ba4\u771f\uff0c\u4e0d\u70b9\u4e2a\u8d5e\u518d\u8d70\u561bqaq~~\n",
        "postTime": 1596075566,
        "uid": 279197,
        "name": "Mars_Dingdang",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1101B \u3010Accordion\u3011"
    }
]
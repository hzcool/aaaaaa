[
    {
        "content": "### Analysis\n\n\u611f\u89c9\u4e00\u4e0b\uff0c\u53d1\u73b0\u7b54\u6848\u4e00\u5b9a\u4e0d\u5c0f\u4e8e $n-3$\u3002\n\n\u4ee5\u4e0b\u8bbe $B=A-A'$\u3002\n\n**\u8bc1\u660e\uff1a**\n\n$$\\prod\\limits_{i=1}^{2k}(i!)=\\left(\\prod\\limits_{i=1}^{k}(2k-1)!\\right)^22^kk!$$\n\n$n\\equiv0\\pmod{4}$ \u65f6\uff0c\u53d6 $B=\\{\\dfrac{n}{2}\\}$ \u5373\u53ef\u3002\n\n$n\\equiv2\\pmod{4}$ \u65f6\uff0c\u53d6 $B=\\{2,\\dfrac{n}{2}\\}$ \u5373\u53ef\u3002\n\n\u53bb\u6389 $n!$ \u8fd9\u9879\u540e\u89c4\u6a21\u51cf\u5c0f $1$\uff0c\u6210\u4e3a\u5076\u6570\uff0c\u5f97\uff1a\n\n$n\\equiv1\\pmod{2}$ \u65f6\uff0c\u53d6 $B=\\{2,\\dfrac{n-1}{2},n\\}$ \u5373\u53ef\u3002\n\n\u6ce8\u610f\u4e0a\u9762\u7684\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u89e3\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5148\u5224\u65ad $all=\\prod\\limits_{i=1}^{n}(i!)$ \u662f\u5426\u4e3a\u5e73\u65b9\u6570\u3002\n\n\u82e5\u5426\uff0c\u5219\u5224\u65ad\u662f\u5426 $\\exists x\\ |\\ \\dfrac{all}{x!}$ \u662f\u5e73\u65b9\u6570\u3002\n\n\u82e5\u518d\u5426\uff0c\u5219\u5224\u65ad\u662f\u5426 $\\exists x,y\\ |\\ \\dfrac{all}{x!y!}$ \u662f\u5e73\u65b9\u6570\u3002\n\n\u5426\u5219\uff0c$B=\\{2,\\dfrac{n-1}{2},n\\}$ \u5373\u53ef\u3002\n\n\u7531\u4e8e\u524d\u9762\u7684\u5224\u65ad\u4e0e\u7d20\u56e0\u6570\u4e2a\u6570\u7684\u5947\u5076\u6027\u6709\u5173\uff0c\u6211\u4eec\u60f3\u5230\u5c06\u7d20\u6570\u8d4b\u968f\u673a Hash \u503c\uff0c\u8bbe $f(x)$ \u4e3a $x$ \u5206\u89e3\u7d20\u56e0\u6570\u540e\u6bcf\u4e2a\u7d20\u56e0\u6570 Hash \u503c\u7684\u5f02\u6216\u548c\uff08\u591a\u4e2a\u76f8\u540c\u7d20\u56e0\u6570\u91cd\u590d\u7b97\uff09\u3002\n\n\u7531\u4e8e $a \\operatorname{xor} a=0$\uff0c$f(x)=0\\iff x$ \u662f\u5e73\u65b9\u6570\u3002\n\n\u6211\u4eec\u5c06 $f(x!)(1\\le x\\le n)$ \u5b58\u5165 std::map \u5339\u914d\u5373\u53ef\u3002\n\n\u65f6\u95f4 $O(n\\log n)$\u3002\n\n### Code\n\n[Link](https://codeforces.com/contest/1622/submission/142751564)",
        "postTime": 1642218693,
        "uid": 101868,
        "name": "I_am_Accepted",
        "ccfLevel": 0,
        "title": "CF1622F Quadratic Set"
    },
    {
        "content": "\u901a\u8fc7\u5982\u4e0b\u6784\u9020\u53ef\u53d1\u73b0\u6700\u5927\u96c6\u5408\u7684\u5927\u5c0f\u5927\u4e8e\u7b49\u4e8e $n-3$\uff1a\n\n\u5982\u679c $n$ \u662f\u5947\u6570\uff0c\u5219\u5c06 $n\\gets n-1$\n\n\u6ce8\u610f\u5230\u8fd9\u4e2a\u65f6\u5019\u9636\u4e58\u53ef\u4ee5\u4e24\u4e24\u62b5\u6d88\uff0c\u56e0\u800c\u5269\u4e0b\u7684\u4e1c\u897f\u5c31\u662f $2,4,...,n$\n\n\u5982\u679c $n/2$ \u662f\u5947\u6570\uff0c\u628a $2!$ \u6254\u4e86\n\n\u7136\u540e\u5269\u4e0b\u7684\u4e1c\u897f\u53d8\u6210\u4e86 $1,2,...,n/2$\uff0c\u628a $\\frac{n}{2}!$ \u6254\u4e86\u5373\u53ef\n\n\u56e0\u800c\u6211\u4eec\u53ea\u9700\u8981\u5224\u65ad\u6700\u5927\u96c6\u5408\u662f\u5426\u5927\u4e8e $n-3$ \u5373\u53ef\uff0c\u4e5f\u5c31\u662f\u6700\u591a\u6254\u4e24\u4e2a\n\n\u6ce8\u610f\u5230\u53d6\u5230 $n-3$ \u7684\u60c5\u51b5 $n$ \u80af\u5b9a\u662f\u5947\u6570\uff0c\u8bbe $p$ \u662f $1-n$ \u4e2d\u6700\u5927\u7684\u8d28\u6570\uff0c\u90a3\u4e48\u6254\u6389\u7684\u4e24\u4e2a\u4e2d\u8f83\u5927\u8005\u80af\u5b9a\u5927\u4e8e $p$\uff0c\u8fd9\u6837\u7684\u7ec4\u5408\u4e0d\u4f1a\u592a\u591a\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u6982\u662f $\\sum\\limits_{i \\le n}\\sum\\limits_{p\\in prime, p\\times p \\le i}1$",
        "postTime": 1640926672,
        "uid": 46817,
        "name": "xcyle",
        "ccfLevel": 10,
        "title": "CF1622F\u9898\u89e3"
    },
    {
        "content": "\u89c1\u5230\u6784\u9020\u9898\u2026\u2026\u4e0d\u5982\u5148\u5199\u4e2a[\u66b4\u529b](https://www.luogu.com.cn/paste/5b4j691m)\uff1f\n\n\u731c\u6d4b\u7b54\u6848\u6700\u5c0f\u4e3a $n-3$\u3002\u90a3\u4e48\u6211\u4eec\u62c6\u5f00\uff0c\u53d8\u6210\u6c42\u89e3\u80fd\u5426\u53bb\u6389 $0,1,2,3$ \u4e2a\u6570\u4e4b\u540e\u4f7f\u5f97 $A'$ \u662f\u4e2a\u5e73\u65b9\u96c6\u5408\u3002\n\n\u5148\u786e\u5b9a\u4e00\u4e2a\u5927\u4f53\u7684\u601d\u8def\u3002\u6ce8\u610f\u5230\u5e73\u65b9\u96c6\u5408\uff0c\u4e58\u79ef\u5728\u5206\u89e3\u4e4b\u540e\u8d28\u56e0\u5b50\u7684\u5e42\u6570\u90fd\u662f\u5076\u6570\uff0c\u90a3\u4e48\u5e42\u6570\u53ef\u4ee5\u5212\u5f52\u5230 $0$ \u6216\u8005 $1$\u2026\u2026\u8fd9\u4e2a\u4e1c\u897f\u6709\u70b9\u7c7b\u4f3c\u4e8e\u5f02\u6216\uff0c\u90a3\u4e48\u51e0\u4e2a\u9636\u4e58\u7684\u4e58\u79ef\u8d28\u56e0\u6570\u5206\u89e3\u5c31\u76f8\u5f53\u4e8e\u51e0\u4e2a\u9636\u4e58\u8d28\u56e0\u6570\u5206\u89e3\u4e4b\u540e\u5e42\u6b21\u8fdb\u884c\u5f02\u6216\u3002\n\nMotivation: \u5feb\u901f\u5c06\u51e0\u4e2a\u9636\u4e58\u8d28\u56e0\u6570\u5206\u89e3\u4e4b\u540e\u5e42\u6b21\u8fdb\u884c\u5f02\u6216\u3002\n\n\u8003\u8651\u5b8c\u5584\u8fd9\u4e2a Motivation\uff0c\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u8d28\u56e0\u5b50\u7ed9\u5b9a\u4e00\u4e2a\u54c8\u5e0c\u503c\uff0c\u8fd9\u6837\u4e00\u4e2a\u6570\u7684\u8d28\u56e0\u6570\u5206\u89e3\u53ef\u4ee5\u7528\u5176\u8d28\u56e0\u6570\u5206\u89e3\u540e\u7684\u6240\u6709\u8d28\u56e0\u5b50\u5f02\u6216\u503c\u8868\u793a\u3002\n\n\u90a3\u4e48\u95ee\u9898\u5c31\u7b80\u5355\u4e86\u3002\u6211\u4eec\u5148\u6c42\u51fa $\\displaystyle \\prod_{i=1}^n i!$ \u7684\u54c8\u5e0c\u503c\uff0c\u8bb0\u4f5c $k$\u3002\u8bb0 $f_i$ \u4e3a $i!$ \u7684\u54c8\u5e0c\u503c\u3002\n\n### \u53bb\u6389 0 \u4e2a\u6570\n\n\u6b64\u65f6 $k=0$\u3002\u5224\u65ad\u5373\u53ef\u3002\n\n### \u53bb\u6389 1 \u4e2a\u6570\n\n\u6b64\u65f6 $k=f_i$\uff0c$O(n)$ \u5224\u65ad\u5373\u53ef\u3002\n\n### \u53bb\u6389 2 \u4e2a\u6570\n\n\u8003\u8651\u5f00\u4e00\u4e2a `map` \u8bb0\u4e0b $f_i \\to i$ \u7684\u6620\u5c04\uff0c\u90a3\u4e48\u5f53 `map` \u4e2d\u5b58\u5728 $k \\oplus f_p \\to q$ \u7684\u65f6\u5019\uff0c\u53bb\u6389 $p,q$ \u5408\u6cd5\u3002\n\n### \u53bb\u6389 3 \u4e2a\u6570\n\n\u663e\u7136\u53bb\u6389 $2!,n!,\\left\\lfloor\\dfrac{n}{2}\\right\\rfloor!$ \u662f\u5408\u6cd5\u7684\u89e3\uff08\u8981\u627e Motivation \u53ef\u4ee5\u6253\u8868\uff0c\u53bb\u6389 3 \u4e2a\u6570\u7684\u60c5\u51b5\u6709 $7,11,23$\uff09\u3002\n\n\u90a3\u4e48\u62fc\u76d8\u5f97\u6b63\u89e3\u3002\u95ee\u9898\u89e3\u51b3\u3002\n\n```cpp\n/*\n\u4ed6\u51b3\u5b9a\u8981\u201c\u683c\u201d\u9662\u5b50\u91cc\u7684\u7af9\u5b50\u3002\u4e8e\u662f\u4ed6\u642c\u4e86\u4e00\u6761\u51f3\u5b50\u5750\u5728\u9662\u5b50\u91cc\uff0c\u9762\u5bf9\u7740\u7af9\u5b50\u786c\u60f3\u4e86\u4e03\u5929\uff0c\u7ed3\u679c\u56e0\u4e3a\u5934\u75db\u800c\u5ba3\u544a\u5931\u8d25\u3002\nDONT NEVER AROUND . //\n*/\n#include<bits/stdc++.h>\nusing namespace std;\ntypedef unsigned long long LL;\nchar buf[1<<21],*p1=buf,*p2=buf;\n#define getchar() (p1==p2 && (p2=(p1=buf)+fread(buf,1,1<<21,stdin),p1==p2)?EOF:*p1++)\nint read()\n{\n\tint x=0;\n\tchar c=getchar();\n\twhile(c<'0' || c>'9')\tc=getchar();\n\twhile(c>='0' && c<='9')\tx=(x<<1)+(x<<3)+(c^'0'),c=getchar();\n\treturn x;\n}\nvoid write(int x)\n{\n\tif(x>9)\twrite(x/10);\n\tputchar(x%10+'0');\n}\nint cnt,prime[400005];\nbool vis[1000005];\nLL hsh[1000005],fac[1000005];\nint n;\nvoid shai(int up)\n{\n\tuniform_int_distribution<LL> range(1,~(0llu));\n\tdefault_random_engine e(rand());\n\tvis[1]=true;\n\tfor(int i=2;i<=up;++i)\n\t{\n\t\tif(!vis[i])\tprime[++cnt]=i,hsh[i]=range(e);\n\t\tfor(int j=1;j<=up && i*prime[j]<=up;++j)\n\t\t{\n\t\t\tvis[i*prime[j]]=true;\n\t\t\thsh[i*prime[j]]=hsh[i]^hsh[prime[j]];\n\t\t\tif(i%prime[j]==0)\tbreak;\n\t\t}\n\t}\n\tfor(int i=2;i<=up;++i)\tfac[i]=hsh[i]^fac[i-1];\n}\nunordered_map<LL,int> M;\nint main(){\n\tsrand(time(NULL));\n\tn=read();\n\tshai(n);\n\tLL val=0;\n\tfor(int i=1;i<=n;++i)\tval^=fac[i];\n\tif(val==0)\n\t{\n\t\twrite(n),puts(\"\");\n\t\tfor(int i=1;i<=n;++i)\twrite(i),putchar(' ');\n\t\treturn 0;\n\t}\n\tfor(int i=1;i<=n;++i)\n\t{\n\t\tif(val==fac[i])\n\t\t{\n\t\t\twrite(n-1),puts(\"\");\n\t\t\tfor(int j=1;j<=n;++j)\tif(i!=j)\twrite(j),putchar(' ');\n\t\t\treturn 0;\n\t\t}\n\t}\n\tfor(int i=2;i<=n;++i)\n\t{\n\t\tif(M.find(val^fac[i])!=M.end())\n\t\t{\n\t\t\tint p=M[val^fac[i]],q=i;\n\t\t\twrite(n-2),puts(\"\");\n\t\t\tfor(int j=1;j<=n;++j)\tif(j!=p && j!=q)\twrite(j),putchar(' ');\n\t\t\treturn 0;\n\t\t}\n\t\tM[fac[i]]=i;\n\t}\n\twrite(n-3),puts(\"\");\n\tfor(int i=1;i<=n;++i)\tif(i!=2 && i!=n && i!=n/2)\twrite(i),putchar(' ');\n\treturn 0;\n}\n```",
        "postTime": 1642690216,
        "uid": 184977,
        "name": "pomelo_nene",
        "ccfLevel": 9,
        "title": "gyara-\u03c9"
    },
    {
        "content": "[Codeforces \u9898\u9762\u4f20\u9001\u95e8](https://codeforces.ml/contest/1622/problem/F) & [\u6d1b\u8c37\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1622F)\n\n\u4e00\u9053\u540d\u526f\u5176\u5b9e\u7684 educational \u7684 hot tea\u3002\n\n\u9996\u5148\u770b\u5230\u6211\u4eec\u5c06\u95ee\u9898\u8fdb\u884c\u521d\u6b65\u8f6c\u5316\uff1a\u6211\u4eec\u5148\u6c42\u51fa $\\prod\\limits_{i=1}^n(i!)$ \u7684\u8d28\u56e0\u6570\u5206\u89e3\u5f62\u5f0f\u4e2d\uff0c\u6240\u6709\u51fa\u73b0\u6b21\u6570\u4e3a\u5947\u6570\u7684\u8d28\u6570\uff0c\u8fd9\u4e2a\u5f02\u5e38\u597d\u529e\u2014\u2014\u56e0\u4e3a $\\prod\\limits_{i=1}^n(i!)=\\prod\\limits_{i=1}^ni^{n-i+1}$\uff0c\u56e0\u6b64 $n-1,n-3,\\cdots,n\\bmod 2+1$ \u5728\u5f0f\u5b50\u4e2d\u7684\u6b21\u6570\u90fd\u662f\u5076\u6570\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u4eec\u90fd\u8e22\u6389\uff0c\u6545 $\\prod\\limits_{i=1}^ni!$ \u8d28\u56e0\u6570\u5206\u89e3\u5f62\u5f0f\u4e2d\uff0c\u51fa\u73b0\u6b21\u6570\u4e3a\u5947\u6570\u7684\u8d28\u56e0\u5b50\u96c6\u5408\uff0c\u5c31\u7b49\u4e8e $n!!$ \u4e2d\uff0c\u51fa\u73b0\u6b21\u6570\u4e3a\u5947\u6570\u7684\u8d28\u56e0\u5b50\u7684\u96c6\u5408\uff0c\u9884\u5904\u7406\u6bcf\u4e2a\u6570\u7684\u6700\u5c0f\u8d28\u56e0\u5b50\u540e\u5373\u53ef $n\\log n$ \u5730\u5206\u89e3\u3002\n\n\u4e8e\u662f\u95ee\u9898\u8f6c\u5316\u4e3a\uff0c\u6c42\u4e00\u4e2a\u957f\u5ea6\u6700\u5c0f\u7684\u5e8f\u5217 $\\{a_m\\}$\uff0c\u6ee1\u8db3 $1\\le a_i\\le n$\uff0c\u4e14 $\\prod\\limits_{i=1}^ma_i!$ \u7684\u8d28\u56e0\u6570\u5206\u89e3\u5f62\u5f0f\u4e2d\uff0c\u51fa\u73b0\u6b21\u6570\u4e3a\u5947\u6570\u7684\u8d28\u56e0\u5b50\u7684\u96c6\u5408\u7b49\u4e8e $n!!$ \u51fa\u73b0\u6b21\u6570\u4e3a\u5947\u6570\u7684\u8d28\u56e0\u5b50\u96c6\u5408\u3002\u5230\u8fd9\u91cc\uff0c\u6211\u4eec\u4e0d\u59a8\u6765\u53d1\u89c9\u4e0b\u6027\u8d28\uff1a\u5982\u679c $n$ \u662f\u5076\u6570\uff0c\u90a3\u4e48 $n!!=2^{n/2}\u00b7(\\dfrac{n}{2})!$\uff0c\u524d\u8005\u5c06\u8d28\u6570\u6a21 $2$ \u540e\u8981\u4e48\u5269\u4e2a $2^0$\uff0c\u8981\u4e48\u5269\u4e2a $2^1$\uff0c\u56e0\u6b64 $n!!$ \u8d28\u56e0\u5b50\u4e3a\u5947\u6570\u7684\u96c6\u5408\u8981\u4e48\u4e0e $(\\dfrac{n}{2})!$ \u76f8\u540c\uff0c\u8981\u4e48\u4e0e $2\u00b7(\\dfrac{n}{2})!$ \u76f8\u540c\uff1b\u540c\u7406\uff0c\u5982\u679c $n$ \u662f\u5947\u6570\uff0c\u90a3\u4e48 $n!!=\\dfrac{n!}{(n-1)!!}=\\dfrac{n!}{2^{(n-1)/2}\u00b7(\\frac{n-1}{2})!}$\uff0c\u56e0\u6b64 \u5bf9\u4e8e\u5947\u6570 $n$\uff0c$n!!$ \u51fa\u73b0\u6b21\u6570\u4e3a\u5947\u6570\u7684\u96c6\u5408\u8981\u4e48\u4e0e $n!\u00b7(\\dfrac{n-1}{2})!$ \u76f8\u540c\uff0c\u8981\u4e48\u4e0e $2\u00b7n!\u00b7(\\dfrac{n-1}{2})!$ \u76f8\u540c\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\u7b26\u5408\u6761\u4ef6\u7684\u957f\u5ea6\u6700\u5c0f\u7684\u5e8f\u5217 ${a_m}$ \u957f\u5ea6\u4e0d\u8d85\u8fc7 $3$\u3002\u6545\u6211\u4eec\u8003\u8651\u5bf9 $0,1,2$ \u7684\u60c5\u51b5\u5206\u522b\u6c42\u89e3\uff0c$0$ \u7684\u60c5\u51b5\u76f4\u63a5\u7279\u5224\u6389\u5373\u53ef\uff0c$1$ \u7684\u60c5\u51b5\u5c31\u8003\u8651\u54c8\u5e0c\uff0c\u6211\u4eec\u7ed9\u6bcf\u4e2a\u8d28\u56e0\u5b50\u8d4b\u4e0a\u4e00\u4e2a $[1,2^{64}-1]$\u200b \u7684\u968f\u673a\u6743\u503c\uff0c\u7136\u540e\u5b9a\u4e49\u4e00\u4e2a\u96c6\u5408\u7684\u6743\u503c\u4e3a\u5176\u4e2d\u6240\u6709\u5143\u7d20\u6743\u503c\u7684 XOR\uff0c\u8fd9\u6837\u6211\u4eec\u9884\u5904\u7406\u51fa $1!,2!,\\cdots,n!$\u200b \u7684\u6743\u503c\u540e\uff0c\u68c0\u9a8c\u662f\u5426\u5b58\u5728\u67d0\u4e2a $i!$ \u7684\u6743\u503c\u7b49\u4e8e $n!!$ \u7684\u6743\u503c\uff0c$2$ \u7684\u60c5\u51b5\u4e5f\u540c\u7406\uff0cmap \u9884\u5904\u7406\u4e0b\u6bcf\u4e2a\u6743\u503c\u51fa\u73b0\u7684\u4f4d\u7f6e\u5373\u53ef\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $n\\log n$\u3002\n\n```cpp\nmt19937 rng(20060729 ^ chrono :: steady_clock :: now().time_since_epoch().count());\ntemplate<typename T> T rand(T l, T r) {return uniform_int_distribution<T>(l, r)(rng);}\nconst int MAXN = 1e6;\nint n, pr[MAXN / 2 + 5], prcnt = 0, vis[MAXN + 5], mnp[MAXN + 5];\nint cnt[MAXN + 5], book[MAXN + 5];\nu64 v[MAXN + 5], pre[MAXN + 5];\nvoid sieve(int n) {\n\tfor (int i = 2; i <= n; i++) {\n\t\tif (!vis[i]) pr[++prcnt] = i, mnp[i] = i;\n\t\tfor (int j = 1; j <= prcnt && pr[j] * i <= n; j++) {\n\t\t\tvis[pr[j] * i] = 1; mnp[pr[j] * i] = pr[j];\n\t\t\tif (i % pr[j] == 0) break;\n\t\t}\n\t}\n}\nint main() {\n\tscanf(\"%d\", &n); sieve(MAXN);\n\tfor (int i = 1; i <= n; i++) if ((n - i + 1) & 1) {\n\t\tint tmp = i;\n\t\twhile (tmp ^ 1) {\n\t\t\tint p = mnp[tmp];\n\t\t\twhile (tmp % p == 0) tmp /= p, cnt[p] ^= 1;\n\t\t}\n\t}\n\tbool flg = 1;\n\tfor (int i = 1; i <= n; i++) flg &= (!cnt[i]);\n\tif (flg) {\n\t\tprintf(\"%d\\n\", n);\n\t\tfor (int i = 1; i <= n; i++) printf(\"%d%c\", i, \" \\n\"[i == n]);\n\t\treturn 0;\n\t}\n\tfor (int i = 1; i <= n; i++) v[i] = rand(1ull, ULLONG_MAX);\n\tu64 hs = 0;\n\tfor (int i = 1; i <= n; i++) if (cnt[i]) hs ^= v[i];\n\tfor (int i = 1; i <= n; i++) {\n\t\tpre[i] = pre[i - 1]; int tmp = i;\n\t\twhile (tmp ^ 1) {\n\t\t\tint p = mnp[tmp];\n\t\t\twhile (tmp % p == 0) tmp /= p, pre[i] ^= v[p];\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) if (pre[i] == hs) {\n\t\tprintf(\"%d\\n\", n - 1);\n\t\tfor (int j = 1; j <= n; j++) if (j != i) printf(\"%d \", j);\n\t\treturn 0;\n\t}\n\tunordered_map<u64, int> pos;\n\tfor (int i = 1; i <= n; i++) {\n\t\tif (pos[pre[i] ^ hs]) {\n\t\t\tint X = i, Y = pos[pre[i] ^ hs];\n\t\t\tprintf(\"%d\\n\", n - 2);\n\t\t\tfor (int i = 1; i <= n; i++) if (i != X && i != Y)\n\t\t\t\tprintf(\"%d \", i);\n\t\t\treturn 0;\n\t\t}\n\t\tpos[pre[i]] = i;\n\t}\n\tprintf(\"%d\\n\", n - 3);\n\tfor (int i = 1; i <= n; i++) if (i != 2 && i != (n >> 1) && i != n)\n\t\tprintf(\"%d \", i);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1641188556,
        "uid": 115194,
        "name": "lTgMFePRoeZ",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1622F Quadratic Set"
    },
    {
        "content": "[CF1622F](http://codeforces.com/problemset/problem/1622/F)\u3002\n\n## Description\n\n\u7ed9\u51fa\u4e00\u4e2a\u96c6\u5408 $A = \\{1, 2, ..., n\\} = \\{x \\in \\mathbb{Z} \\mid 1 \\leq x \\leq n\\}$\u3002\n\n\u4f60\u9700\u8981\u5bfb\u627e\u4e00\u4e2a\u975e\u7a7a\u96c6\u5408 $A' \\subseteq A$\uff0c\u4f7f\u5f97 $\\prod_{k \\in A'} k!$ \u662f\u4e00\u4e2a\u5b8c\u5168\u5e73\u65b9\u6570\u3002  \n\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u4f60\u9700\u8981\u6700\u5927\u5316 $|A'|$\uff0c\u5e76\u4ee5\u4efb\u610f\u987a\u5e8f\u7ed9\u51fa\u96c6\u5408 $A'$ \u4e2d\u7684\u6240\u6709\u6570\u3002\n\n\u6570\u636e\u8303\u56f4\uff1a$1 \\leq n \\leq 10^6$\u3002  \n\u65f6\u7a7a\u9650\u5236\uff1a$4000 \\ \\mathrm{ms} / 256 \\ \\mathrm{MiB}$\u3002\n\n## Solution\n\n#### \u7ed3\u8bba\n\n\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u65b9\u6848\uff0c\u4f7f\u5f97\u96c6\u5408 $A$ \u4e2d\u4e0d\u9009\u7684\u6570\u7684\u4e2a\u6570 $\\leq 3$\u3002\n\n#### \u8bc1\u660e\n\n\u5047\u8bbe\u73b0\u5728\u7ed9\u51fa\u4efb\u610f\u4e00\u4e2a\u6b63\u6574\u6570 $k$\uff0c\u8003\u5bdf\u4e0b\u5f0f\uff1a\n$$\n\\begin{aligned}\n\\prod\\limits_{i = 1}^{2k} i! & = \\prod\\limits_{i = 1}^k (2i - 1)! \\cdot (2i)! \\\\\n& = \\prod\\limits_{i = 1}^k \\left((2i - 1)!\\right)^2\t\\cdot 2i \\\\\n& = \\left( \\prod\\limits_{i = 1}^k (2i - 1)! \\right)^2 \\cdot 2^k \\cdot k!\n\\end{aligned}\n$$\n- \u5bf9\u4e8e $n \\equiv 0 \\pmod 4$\uff0c\u53ef\u4ee5\u53d6 $A' = A \\setminus \\left\\{ \\frac{n}{2} \\right\\}$\u3002  \n- \u5bf9\u4e8e $n \\equiv 2 \\pmod 4$\uff0c\u53ef\u4ee5\u53d6 $A' = A \\setminus \\left\\{2, \\frac{n}{2}\\right\\}$\u3002  \n- \u5bf9\u4e8e $n \\equiv 1 \\pmod 2$\uff0c\u53ef\u4ee5\u5148\u4e0d\u53d6 $n$ \u8fd9\u4e2a\u6570\uff0c\u7136\u540e\u8f6c\u6362\u4e3a\u4e0a\u8ff0\u4e24\u79cd\u60c5\u51b5\u4e4b\u4e00\u3002\n\nQ.E.D.\n\n---\n\n\u73b0\u5728\u6709\u4e86\u5f88\u4f18\u79c0\u7684\u6784\u9020\u89e3\uff0c\u4f46\u6ce8\u610f\u5230\u8be5\u89e3\u4e0d\u4e00\u5b9a\u662f\u6700\u4f18\u89e3\uff0c\u8fd8\u8981\u5904\u7406\u96c6\u5408 $A$ \u4e2d\u4e0d\u9009\u7684\u6570\u6070\u597d\u4e3a $0, 1, 2$ \u65f6\u7684\u89e3\u3002\n\n\u8003\u8651\u5b8c\u5168\u5e73\u65b9\u6570\u7684\u672c\u8d28\uff1a\u5728\u552f\u4e00\u5206\u89e3\u5f62\u5f0f\u4e0b\uff0c\u6240\u6709\u8d28\u56e0\u5b50\u7684\u6b21\u6570\u5747\u4e3a**\u5076\u6570**\u3002\u8fd9\u65f6\u5019\u5c31\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 xor hashing\u3002\n\n\u5b9a\u4e49**\u5b8c\u5168\u5f02\u6216\u6027**\u54c8\u5e0c\u51fd\u6570 $f(x)$\uff0c\u4e00\u5f00\u59cb\u5148\u7ed9 $1 \\sim n$ \u4e2d\u7684\u6240\u6709\u8d28\u6570 $p$ \u7684 $f(p)$ \u8d4b\u4e00\u4e2a\u8303\u56f4\u8f83\u5927\u7684\u968f\u673a\u6570\uff0c\u5176\u4ed6\u7684\u5408\u6570\u7684 $f(x)$ \u5b9a\u4e49\u4e3a $x$ \u6240\u6709**\u8d28\u56e0\u5b50\u7684 $f$ \u51fd\u6570\u7684\u5f02\u6216\u548c\uff08\u591a\u4e2a\u76f8\u540c\u8d28\u56e0\u5b50\u9700\u8981\u91cd\u590d\u5f02\u6216\uff09**\uff0c\u7279\u522b\u5730 $f(1) = 0$\u3002\u5728\u8fd9\u6837\u7684\u5b9a\u4e49\u4e0b\uff0c$x$ \u4e3a\u5b8c\u5168\u5e73\u65b9\u6570\u5f53\u4e14\u4ec5\u5f53 $f(x) = 0$\u3002\n\n$1 \\sim n$ \u4e2d\u7684 $f$ \u51fd\u6570\u503c\u663e\u7136\u53ef\u4ee5\u7ebf\u6027\u7b5b\u7b5b\u51fa\u6765\uff0c\u7531\u4e8e\u5176\u5b8c\u5168\u5f02\u6216\u6027\uff0c\u53ef\u4ee5\u9012\u63a8\u51fa $f(i!)$ \u7684\u503c\u3002\n\n\u8bb0 $P = f(1!) \\bigoplus f(2!) \\bigoplus \\cdots \\bigoplus f(n!)$\u3002\n\n- \u5bf9\u4e8e\u6240\u6709\u90fd\u9009\u7684\u60c5\u51b5\uff0c\u5224\u65ad $P$ \u662f\u5426\u4e3a $0$ \u5373\u53ef\u3002\n\n- \u5bf9\u4e8e\u4e0d\u9009 $1$ \u4e2a\u6570\u7684\u60c5\u51b5\uff0c\u76f8\u5f53\u4e8e\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u4e2a $i$ \u4f7f\u5f97 $P \\bigoplus f(i!) = 0$\uff0c\u679a\u4e3e\u5373\u53ef\u3002\n\n- \u5bf9\u4e8e\u4e0d\u9009 $2$ \u4e2a\u6570\u7684\u60c5\u51b5\uff0c\u76f8\u5f53\u4e8e\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u5bf9 $i,j$ \u4f7f\u5f97 $P \\bigoplus f(i!) \\bigoplus f(j!) = 0$\uff0c\u53ef\u4ee5\u5148\u5c06\u6240\u6709 $f(j!)$ \u7684\u503c\u5b58\u5165\u4e00\u4e2a\u54c8\u5e0c\u8868\u6216 `std::map`\uff0c\u518d\u5728\u8fd9\u4e2a\u5bb9\u5668\u4e2d\u67e5\u627e $P \\bigoplus f(i!)$ \u5373\u53ef\u3002\n\n\u5b9e\u73b0\u7684\u8f83\u597d\u53ef\u4ee5\u505a\u5230 $\\mathcal{O}(n)$\u3002\n\n```c++\n#include <cstdio>\n#include <cstring>\n#include <algorithm>\n#include <ctime>\n#include <random>\n#include <unordered_map>\n\ntypedef long long s64;\n\nconst int N = 1e6 + 10;\nconst s64 L = 1152921504606846976LL;\n\nint n;\n\nint k, prime[N], fac[N];\ns64 f[N], S[N];\n\nstd::mt19937_64 rnd(time(0));\nstd::uniform_int_distribution<long long> dist(0, L - 1);\n\nvoid sieve(int N) {\n\tf[1] = 0;\n\tfor (int i = 2; i <= N; i ++) {\n\t\tif (!fac[i]) fac[i] = i, prime[++ k] = i, f[i] = dist(rnd);\n\t\tfor (int j = 1; j <= k; j ++) {\n\t\t\tif (prime[j] > fac[i] || prime[j] > N / i) break;\n\t\t\tfac[i * prime[j]] = prime[j];\n\t\t\tf[i * prime[j]] = f[i] ^ f[prime[j]];\n\t\t}\n\t}\n\n\tfor (int i = 1; i <= N; i ++)\n\t\tS[i] = S[i - 1] ^ f[i];\n}\n\nstd::unordered_map<s64, int> List;\n\nint cnt;\nbool mark[N];\n\nvoid output() {\n\tprintf(\"%d\\n\", cnt);\n\tfor (int i = 1; i <= n; i ++) {\n\t\tif (mark[i]) continue;\n\t\tprintf(\"%d \", i);\n\t}\n}\n\nint main() {\n\tfreopen(\"square.in\", \"r\", stdin);\n\tfreopen(\"square.out\", \"w\", stdout);\n\n\tscanf(\"%d\", &n);\n\tsieve(n);\n\n\ts64 P = 0;\n\tfor (int i = 1; i <= n; i ++) P ^= S[i];\n\n\tif (P == 0) {\n\t\tcnt = n, output();\n\t\treturn 0;\n\t}\n\n\tfor (int i = 1; i <= n; i ++)\n\t\tif ((P ^ S[i]) == 0) {\n\t\t\tcnt = n - 1, mark[i] = 1, output();\n\t\t\treturn 0;\n\t\t}\n\n\tfor (int i = 1; i <= n; i ++)\n\t\tList[S[i]] = i;\n\n\tfor (int i = 1; i <= n; i ++)\n\t\tif (List.count(P ^ S[i])) {\n\t\t\tint j = List[P ^ S[i]];\n\t\t\tcnt = n - 2, mark[i] = 1, mark[j] = 1, output();\n\t\t\treturn 0;\n\t\t}\n\n\tcnt = n - 3, mark[2] = 1, mark[(n - 1) / 2] = 1, mark[n] = 1, output();\n\n\treturn 0;\n}\n```",
        "postTime": 1650610288,
        "uid": 129578,
        "name": "Calculatelove",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1622F\u3010Quadratic Set\u3011"
    }
]
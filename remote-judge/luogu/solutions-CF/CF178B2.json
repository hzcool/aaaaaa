[
    {
        "content": "\u8fd9\u9898\u5c31\u662f\u8ba9\u6211\u4eec\u6c42\u4ece $x$ \u5230 $y$ \u7ecf\u8fc7\u4e86\u51e0\u6761\u5272\u8fb9\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u7528 `Tarjan` \u8fdb\u884c\u8fb9\u53cc\u7f29\u70b9\uff0c\u7136\u540e\u7f29\u51fa\u6765\u7684\u56fe\u5c31\u662f\u4e00\u68f5\u6811\uff0c\u4e14\u6811\u4e0a\u7684\u8fb9\u5168\u662f\u5272\u8fb9\uff0c\u56e0\u6b64\u5c06\u95ee\u9898\u8f6c\u5316\u4e3a\u6811\u4e0a\u8ddd\u79bb\u3002\n\n\u5982\u4f55\u5feb\u901f\u6c42\u6811\u4e0a\u8ddd\u79bb\uff1f\u6211\u4eec\u5148\u6307\u5b9a\u4e00\u4e2a\u6839\uff0c\u641e\u51fa\u6bcf\u4e2a\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\u5728\u6811\u4e2d\u7684\u6df1\u5ea6 $d$\uff0c\u7136\u540e\u6c42 $x$ \u548c $y$ \u6240\u5728\u8fb9\u53cc\u8fde\u901a\u5206\u91cf\uff08\u5206\u522b\u8bbe\u4e3a $X$ \u548c $Y$\uff09\u7684 `LCA`\uff0c\u6700\u540e\u7684\u7b54\u6848\u5c31\u662f $d_X-d_{LCA}+d_Y-d_{LCA}$\u3002\n\n\u6ce8\u610f\uff0c\u5efa\u7f29\u70b9\u540e\u7684\u56fe\u8981\u907f\u514d\u91cd\u8fb9\u3002\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\ntypedef long long ll;\nconst int N = 1e5 + 1;\nint n, m, k, dfn[N], low[N], ebc[N], cnt, sum, lg[N], d[N], f[20][N];\nvector<int> g[N], e[N];\nstack<int> s;\nbool is[N];\nvoid tarjan(int x, int fa) {\n    dfn[x] = low[x] = ++cnt;\n    s.push(x);\n    is[x] = 1;\n    for (int i : g[x]) {\n        if (i != fa) {\n            if (!dfn[i]) {\n                tarjan(i, x);\n                low[x] = min(low[x], low[i]);\n            } else if (is[i]) {\n                low[x] = min(low[x], dfn[i]);\n            }\n        }\n    }\n    if (dfn[x] == low[x]) {\n        ++sum;\n        while (1) {\n            int p = s.top();\n            s.pop();\n            is[p] = 0;\n            ebc[p] = sum;\n            if (x == p) {\n                break;\n            }\n        }\n    }\n}\nvoid dfs(int x, int fa) {\n    if (fa) {\n        d[x] = d[fa] + 1;\n        f[0][x] = fa;\n        for (int i = 1; i <= lg[d[x]]; i++) {\n            f[i][x] = f[i - 1][f[i - 1][x]];\n        }\n    }\n    for (int i : e[x]) {\n        if (i != fa) {\n            dfs(i, x);\n        }\n    }\n}\ninline int lca(int x, int y) {\n    if (d[x] < d[y]) {\n        swap(x, y);\n    }\n    while (d[x] > d[y]) {\n        x = f[lg[d[x] - d[y]]][x];\n    }\n    if (x == y) {\n        return x;\n    }\n    for (int i = lg[d[x]]; i >= 0; i--) {\n        if (f[i][x] != f[i][y]) {\n            x = f[i][x];\n            y = f[i][y];\n        }\n    }\n    return f[0][x];\n}\nint main() {\n    cin.tie(0);\n    cout.tie(0);\n    ios::sync_with_stdio(0);\n    cin >> n >> m;\n    for (int i = 1, u, v; i <= m; i++) {\n        cin >> u >> v;\n        g[u].push_back(v);\n        g[v].push_back(u);\n    }\n    tarjan(1, 0);\n    for (int i = 1; i <= n; i++) {\n        lg[i] = log2(i);\n        for (int j : g[i]) {\n            if (ebc[i] < ebc[j]) {//\u5224\u91cd\u8fb9\n                e[ebc[i]].push_back(ebc[j]);\n                e[ebc[j]].push_back(ebc[i]);\n            }\n        }\n    }\n    dfs(1, 0);\n    cin >> k;\n    for (int i = 1, u, v, q; i <= k; i++) {\n        cin >> u >> v;\n        if (ebc[u] == ebc[v]) {//\u5728\u540c\u4e00\u4e2a\u8fb9\u53cc\u4e2d\n            cout << \"0\\n\";\n            continue;\n        }\n        q = lca(ebc[u], ebc[v]);\n        cout << d[ebc[u]] + d[ebc[v]] - (d[q] << 1) << '\\n';\n    }\n    return 0;\n}\n```\n",
        "postTime": 1658719823,
        "uid": 539211,
        "name": "\u849f\u84bb\u00b7\u5ed6\u5b50\u9633",
        "ccfLevel": 5,
        "title": "CF178B2"
    }
]
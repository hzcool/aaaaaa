[
    {
        "content": "> [CF327E Axis Walking](https://www.luogu.com.cn/problem/CF327E)\r\n\r\n[\u53cc\u500d\u7ecf\u9a8c](https://www.luogu.com.cn/problem/P2396)\u3002\r\n\r\n\u8bbe $f_S$ \u8868\u793a\u96c6\u5408 $S$ \u7684\u7b54\u6848\uff0c\u82e5 $g_S = \\sum_{i\\in S} a_i$ \u4e0d\u5408\u6cd5\uff0c\u5219 $f_S = 0$\uff0c\u5426\u5219 $f_S = \\sum_{i\\in S} f_{S\\backslash i}$\u3002\r\n\r\n\u76f4\u63a5\u505a\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal{O}(2 ^ n n)$\uff0c\u5f00 O2 \u53ef\u4ee5\u901a\u8fc7\u3002\u6211\u4eec\u679a\u4e3e $i$ \u7684\u65f6\u5019\u901a\u8fc7 $\\mathrm{lowbit}(S)$ \u505a\u5230\u4e0d\u679a\u4e3e\u65e0\u7528\u8f6c\u79fb\uff0c\u6709 $\\frac 1 2$ \u7684\u5e38\u6570\u3002\r\n\r\n\u4f18\u5316\uff1a\r\n\r\n- \u82e5 $k = 0$\uff0c\u5219\u7b54\u6848\u4e3a $n!$\u3002\r\n- \u82e5 $k = 1$\uff0c\u5219\u7b54\u6848\u4e3a $n! - \\sum_{g(S) = x} |S|! (n - |S|)!$\u3002\r\n\r\n- \u5f53 $g_S < \\min(x, y)$ \u65f6\uff0c$f_S = |S|!$\u3002\u53ef\u4ee5\u5c06 $x, y$ \u540c\u65f6\u53d8\u6210 $\\sum a_i - x, \\sum a_i - y$ \u4f7f $\\min(x, y)$ \u53d8\u5927\u3002\r\n- \u5f53\u4f7f\u5f97 $g(S) = x$ \u548c $g(T) = \\sum a_i - y$ \u7684 $S$ \u548c $T$ \u7684\u6570\u91cf\u4e4b\u79ef\u4e0d\u5927\u65f6\uff0c\u53ef\u4ee5\u679a\u4e3e $S, T$ \u7b97\u51fa\u540c\u65f6\u7ecf\u8fc7 $x, y$ \u7684\u8def\u5f84\u6570\uff0c\u518d\u5957\u5165 $k = 1$ \u7684\u5bb9\u65a5\u3002\r\n\r\n[\u4ee3\u7801](https://codeforces.com/contest/327/submission/176821874)\uff0c\u4e0d\u5f00 O2 \u83b7\u5f97\u4e86\u53cc\u500d\u7ecf\u9a8c\u6700\u4f18\u89e3\uff08749ms\uff09\uff0c\u5f00 O2 \u53c8\u83b7\u5f97\u4e86\u53cc\u500d\u7ecf\u9a8c\u6700\u4f18\u89e3\uff08476ms\uff09\u3002\r\n\r\n**\u600e\u4e48\u6ca1\u6709\u4eba\u5199 $\\boldsymbol {3 ^ {n / 2}}$ \u7684\u505a\u6cd5\u554a\uff1f**\r\n\r\n\u8bbe $A(S)$ \u8868\u793a\u96c6\u5408 $S$ \u7684 $a_i$ \u4e4b\u548c\u3002\r\n\r\n\u8003\u8651 $k = 1$\uff0c\u6211\u4eec\u53d1\u73b0\u76f8\u5f53\u4e8e\u6c42 $n! - \\sum\\limits_{A(S) = x} |S|! (n - |S|)!$\u3002\u5b50\u96c6\u548c\u7b49\u4e8e\u67d0\u4e2a\u503c\uff0c\u8003\u8651 MITM\uff0c\u5c06 $a$ \u5206\u6210\u4e24\u90e8\u5206 $L, R$\uff0c\u6c42\u51fa $f_{i, j}$ \u8868\u793a $R$ \u7684\u5b50\u96c6 $R_1$ \u7684\u6570\u91cf\uff0c\u4f7f\u5f97 $|R_1| = i$ \u4e14 $A(R_1) = j$\u3002\u679a\u4e3e $L$ \u5b50\u96c6 $L_1$ \u548c $i = |R_1|$\uff0c\u5219\u7b54\u6848\u51cf\u53bb $f_{i, x - A(L_1)} (i + |L_1|)!(n - i - |L_1|)!$\u3002\r\n\r\n$k = 2$ \u540c\u7406\uff0c\u8fd0\u7528\u5bb9\u65a5\u539f\u7406\u5c06\u7b54\u6848\u8f6c\u5316\u4e3a $n!$ \u51cf\u53bb\u7ecf\u8fc7 $x$ \u7684\u65b9\u6848\u6570\uff0c\u51cf\u53bb\u7ecf\u8fc7 $y$ \u7684\u65b9\u6848\u6570\uff0c\u518d\u52a0\u4e0a\u540c\u65f6\u7ecf\u8fc7 $x$ \u548c $y$ \u7684\u65b9\u6848\u6570\u3002\u5bf9\u4e8e\u540e\u8005 $\\sum\\limits_{A(S_1) = x} \\sum\\limits_{A(S_2) = y - x\\land S_1 \\cap S_2 = \\varnothing} |S_1|! |S_2|! (n - |S_1| - |S_2|)!$\u3002\u7c7b\u4f3c\u5730\uff0c\u679a\u4e3e $R$ \u7684\u5b50\u96c6 $R_1$ \u548c $R\\backslash R_1$ \u7684\u5b50\u96c6 $R_2$\uff0c\u6c42\u51fa $f_{i, j, l, m}$ \u8868\u793a $|R_1| = i$\uff0c$|R_2| = j$\uff0c$A(R_1) = l$ \u4e14 $A(R_2) = m$ \u7684\u65b9\u6848\u6570\u3002\u679a\u4e3e $L$ \u5b50\u96c6 $L_1$ \u548c $L\\backslash L_1$ \u7684\u5b50\u96c6 $L_2$\uff0c\u5219\u7b54\u6848\u52a0\u4e0a $f_{i, j, x - A(L_1), y - x - A(L_2)} (|L_1| + i)! (|L_2| + j)! (n - i - j - |L_1| - |L_2|)!$\u3002\r\n\r\n\u4f7f\u7528\u54c8\u5e0c\u8868\u7ef4\u62a4 $k = 1$ \u7684 $j$ \u4e00\u7ef4\u548c $k = 2$ \u7684 $l, m$ \u4e24\u7ef4\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(3 ^ {n / 2} n ^ 2)$\u3002\u6ce8\u610f `unodered_map` \u4f1a TLE\uff0c\u7528 `gp_hash_table`\u3002[\u4ee3\u7801](https://codeforces.com/contest/327/submission/176961722)\u3002\u6d1b\u8c37\u4e0a\u4e0d\u5f00 O2 \u4f1a TLE\uff0c\u5f00 O2 \u83b7\u5f97\u4e86\u53cc\u500d\u7ecf\u9a8c\u6700\u4f18\u89e3\uff08383ms\uff09\u3002",
        "postTime": 1666158109,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "CF327E Axis Walking"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF327E)\n\n---\n>>\u9898\u76ee\u5927\u610f\n\n> \u7ed9\u51fa\u4e00\u5806\u6570\uff0c\u8ba9\u4f60\u5bf9\u5176\u8fdb\u884c\u6392\u5e8f\uff0c\u6c42\u6709\u591a\u5c11\u79cd\u65b9\u6848\u6ee1\u8db3\u4efb\u610f\u524d\u7f00\u548c\u4e0d\u4f1a\u51fa\u73b0\u7ed9\u5b9a\u7684\u6570\u5b57\u3002\n---\n\n\u770b\u5230\u8fd9\u4e48\u5c0f\u7684\u6570\u636e\u8303\u56f4\u679c\u65ad\u72b6\u538b\u3002\n\n\u4ee4 $f_S$ \u4e3a\u9009\u62e9\u72b6\u6001\u4e3a $S$ \u7684\u65b9\u6848\u6570\uff0c\u6613\u77e5\u6700\u7ec8\u7b54\u6848\u4e3a $f_{2^n-1}$ \u3002\n\n\u8003\u8651 $f_S$ \u73c2\u4ee5\u7531\u54ea\u4e9b\u524d\u7ee7\u72b6\u6001 $f_T$ \u8f6c\u79fb\u800c\u6765\uff0c\u56e0\u4e3a\u6bcf\u6b21\u53ea\u80fd\u9009\u4e00\u4e2a\uff0c\u6240\u4ee5 $S$ \u4e0e $T$ \u5e94\u8be5\u6ee1\u8db3\uff1a$S \\oplus  T = 2^p | S>T$\uff0c\u5f02\u6216\u76f8\u5f53\u4e0e\u628a\u9664\u4e86\u9009\u62e9\u7684\u6570\u4e4b\u5916\u7684\u7684\u53bb\u6389\uff0c\u7136\u540e\u53ea\u5269\u4e00\u4e2a\u6570\u5c31\u5fc5\u7136\u662f $2^p$ \u4e86\u3002\n\n\u76f4\u63a5\u4e00\u4e2a\u4e2a\u679a\u4e3e $T$ \u80af\u5b9a\u662f\u4f1a\u7206\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u62ff\u4e00\u4e2a\u4e1c\u897f\u8bb0\u5f55\u6700\u540e\u4e00\u4e2a\u4f4d\u662f\u4ec0\u4e48\uff0c\u7136\u540e\u5c06\u4e00\u4e2a\u539f\u503c\u7b49\u4e8e $S$ \u7684\u5bc4\u5b58\u5668\u5f02\u6216\u6389\u5979\uff0c\u7136\u540e\u62ff\u8fd9\u4e2a\u5bc4\u5b58\u5668\u7684\u6700\u540e\u4e00\u4f4d\u53bb\u5f02\u6216 $S$ \u5373\u53ef\u679a\u4e3e\u5230\u6240\u6709\u53ef\u80fd\u7684 $T$\u3002\n\n\u4e0a\u9762\u7684\u4e00\u4e2a\u8fc7\u7a0b\u90fd\u79bb\u4e0d\u5f00\u4e00\u4e2a\u64cd\u4f5c\uff1a\u53d6\u6700\u540e\u4e00\u4f4d\uff0c\u60f3\u5fc5\u5b66\u8fc7\u6811\u72b6\u6570\u7ec4\u7684\u540c\u5b66\u90fd\u80fd\u56de\u5fc6\u8d77\u6765\u5b83\u662f $\\text{lowbit(x)}$\u3002\n\n\u6211\u4eec\u518d\u628a\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5217\u51fa\uff1a\n\n$$f_S=\\sum_{T \\oplus S = 2^p}^{(0,S)} f_T$$\n\n\u8fd9\u662f\u6ca1\u6709\u9650\u5236\u7684\u60c5\u51b5\u3002\n\n\u90a3\u5982\u679c\u6709\u9650\u5236\u5462\uff1f\n\n\u5f88\u7b80\u5355\uff0c\u53ea\u8981 $S$ \u6240\u8868\u793a\u7684\u9009\u62e9\u72b6\u6001\u548c\u88ab\u9650\u5236\u8d4b\u503c\u4e3a 0 \u5373\u53ef\u3002\n\n\u8fd9\u4e2a\u548c\u73c2\u4ee5\u76f4\u63a5\u6bcf\u6b21 $O(\\log n)$ \u66b4\u529b\u6c42\uff0c\u4e5f\u53ef\u4ee5\u7c7b\u4f3c\u4e8e $f$ \u4e00\u6837\u6c42\u3002\n\n### Code\n\n```cpp\n#include <stdio.h>\n#include <algorithm>\n#include <string.h>\n#define N 100005\n#define lowbit(x) (x&(-x))\nusing namespace std;\ntypedef long long ll;\nconst int INF=0x3f3f3f3f;\nconst int mo=1e9+7;\ninline int read(){\n\tchar ch=getchar();int x=0, f=1;\n\twhile(ch<'0'||ch>'9'){if(ch=='-') f=-1; ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=(x<<3)+(x<<1)+ch-'0';ch=getchar();}\n\treturn x*f;\n}\nint n, k, notin[3], R;\nint a[1<<24], f[1<<24];\nsigned main(){\n\tn=read(), R=1<<n;\n\tfor(int i=1; i<R; i<<=1) a[i]=read();\n\tk=read();for(int i=1; i<=k; i++) notin[i]=read();\n\tf[0]=1;\n\tfor(int S=1; S<R; S++){\n\t\ta[S]=a[S^lowbit(S)]+a[lowbit(S)];\n\t\tif(a[S]==notin[1]||a[S]==notin[2]) continue;\n\t\tfor(int T=S; T; T^=lowbit(T)) f[S]=(f[S]+f[S^lowbit(T)])%mo;\n\t}\n\tprintf(\"%d\", f[R-1]);\n\treturn 0;\n}\n\n```\n",
        "postTime": 1622305130,
        "uid": 341102,
        "name": "ReKoJ",
        "ccfLevel": 0,
        "title": "CF327E Axis Walking"
    },
    {
        "content": "[\u9898\u76ee](https://www.luogu.com.cn/problem/CF327E)\u3002\n\n\u6bd4\u8f83\u677f\u5b50\u7684\u72b6\u538b dp\u3002\n\n\u8bfb\u5b8c\u9898\u5bb9\u6613\u8bbe\u51fa\u72b6\u6001 $f_{i}$ \u8868\u793a\u6b64\u65f6\u5df2\u9009\u6570\u7684\u72b6\u6001\uff0c$i$ \u7684\u4e8c\u8fdb\u5236\u4f4d $0/1$ \u5206\u522b\u5bf9\u5e94\u8fd9\u4e00\u4e2a\u6570\u4e0d\u9009\u6216\u9009\u3002\n\n\u56e0\u4e3a\u5df2\u9009\u6570\u7684\u548c\u4e0d\u5f97\u7b49\u4e8e\u7ed9\u5b9a\u6570\uff0c\u6211\u4eec\u65b0\u5f00\u4e00\u4e2a\u6570\u7ec4\u8bb0\u5f55\u6bcf\u4e2a\u9009\u6570\u7684\u72b6\u6001\u7684\u6570\u603b\u548c\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e00\u4e2a $i$\uff0c\u627e\u5230 $i$ \u4e2d\u6240\u6709\u4e8c\u8fdb\u5236\u4f4d\u4e3a $1$ \u7684\u4f4d\uff0c\u8bbe\u6b64\u4f4d\u4e3a\u7b2c $j$ \u4f4d\uff0c\u8ba9\u8fd9\u4e00\u4f4d\u7684\u6570\u4f5c\u4e3a\u6700\u540e\u4e00\u4e2a\u88ab\u9009\u7684\u6570\uff0c\u5219\u6613\u5f97\u65b9\u7a0b $f_{i}=f_{i} + f_{i \\otimes 2^j}$\u3002\u5176\u4e2d $\\otimes$ \u8868\u793a\u5f02\u6216\u8fd0\u7b97\u3002\n\n\u7136\u540e\u4f1a\u53d1\u73b0\u76f4\u63a5\u7167\u7740\u65b9\u7a0b\u6253\u53ef\u80fd\u4f1a T\uff08\u5199\u5f97\u597d\u6709\u7684\u4e0d\u4f1a\uff09\u3002\n\n\u8003\u8651\u4f18\u5316\uff0cdp \u4e2d\u679a\u4e3e\u72b6\u6001\u662f\u5fc5\u987b\u7684\uff0c\u65e0\u6cd5\u4f18\u5316\uff0c\u4f18\u5316\u70b9\u53ea\u80fd\u5728\u627e\u51fa\u6bcf\u4e00\u4e2a $1$ \u4e0a\u3002\n\n\u5bf9\u4e8e\u6b64\uff0c**\u6211\u4eec\u53ef\u4ee5\u7528 lowbit \u8fd0\u7b97\u6765\u5feb\u901f\u627e\u5230\u6b64\u4e8c\u8fdb\u5236\u6570\u6240\u6709\u7684 $1$\uff0c\u4ece\u800c\u5361\u5e38 AC \u672c\u9898\u3002**\n\n```cpp\n#include <algorithm>\n#include <iostream>\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <stack>\n#include <queue>\n#include <vector>\n#include <list>\n#include <map>\n#include <ctime>\n//#define int long long\n//#define int __int128\n//#define int long long\n//#define int long double\n//#define Int int\n#define mr make_pair\n#define ff first\n#define ss second\n#define lb(x) (x & (-x))\nusing namespace std ;\nint a[26] ;\nint b[3] ;\nint f[1 << 24 | 1] ;  \nint sum[1 << 24 | 1] ;\nconst int mod = 1e9 + 7 ;\nint n, m ; \nbool check(int x) {\n\treturn (x != b[1] && x != b[2]) ;\n}\nint read(){\n\tchar ch ;int s = 0 ;int w = 1;\n\twhile((ch = getchar()) >'9' || ch < '0' )if(ch == '-')w = -1 ;\n\twhile(ch >= '0' && ch <= '9')s = (s << 1) + (s << 3) + (ch ^ 48) , ch = getchar() ;\n\treturn s * w ;\n}\nsigned main() {\n    cin >> n ;\n    for(int i = 1 ; i <= n ; i++) a[i] = read() ;\n    cin >> m ;\n    memset(b, -1, sizeof(b)) ;\n    for(int i = 1 ; i <= m ; i++) b[i] = read() ;\n    f[0] = 1 ;\n    for(int i = 0 ; i < n ; i++) sum[1 << i] = a[i + 1] ;\n    int maxn = 1 << n ;\n    for(int i = 1 ; i < maxn ; i++) sum[i] = sum[lb(i)] + sum[i - lb(i)] ;\n    for(int i = 0 ; i < maxn ; i++) {\n    \tif(!check(sum[i])) continue ;\n\t\tint k = i ;\n    \twhile(k) { \n    \t\tf[i] += f[i ^ lb(k)] ;\n    \t\tif(f[i] >= mod) f[i] -= mod ;\n    \t\tk -= lb(k) ; //\u7528lowbit\u5feb\u901f\u627e\u51fa\u6bcf\u4e00\u4f4d\u76841 \n\t\t}\n\t}\t\n    cout << f[(1 << n) - 1]  ;\n\treturn 0 ;\n}\n```\n\n[\u53cc\u500d\u7ecf\u9a8c P2396](https://www.luogu.com.cn/problem/P2396)\u3002",
        "postTime": 1658416221,
        "uid": 632162,
        "name": "quarmer",
        "ccfLevel": 0,
        "title": "CF327E"
    },
    {
        "content": "### Preface  \n\u8fd9\u9053\u9898\u7684\u5361\u5e38\u4f5c\u4e3a\u4e00\u9053 dp \u6765\u8bf4\u8fc7\u4e8e\u4e27\u5fc3\u75c5\u72c2...\n### Problem  \n\u7ed9\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e3a $n(1\\leq n\\leq 24)$ \u7684\u6b63\u6574\u6570\u5e8f\u5217 $S$\uff0c\u518d\u6709 $k(0\\leq k\\leq 2)$ \u4e2a\u6b63\u6574\u6570\u3002\n\n\u6c42\u6709\u591a\u5c11\u79cd $S$ \u7684\u6392\u5217\u65b9\u5f0f\u4f7f\u5f97\u5176\u524d\u7f00\u548c\u4e0d\u4f1a\u6210\u4e3a\u90a3 $k$ \u4e2a\u6570\u91cc\u7684\u4efb\u610f\u4e00\u4e2a\u3002\n\u7b54\u6848\u5bf9 $10^9+7$ \u53d6\u6a21\u3002  \n### Solution  \n\u4e00\u773c\u72b6\u538b\uff0c\u5f88\u663e\u7136\u6211\u4eec\u8981\u538b\u7684\u662f\u5df2\u7ecf\u88ab\u7528\u8fc7\u7684 $S$ \u5143\u7d20\uff0c\u8fd9\u662f $O(2^n)$ \u590d\u6742\u5ea6\u7684\uff0c\u63a5\u4e0b\u6765\u6613\u5f97\u8f6c\u79fb\u65b9\u7a0b\uff1a  \n$dp_i=\\sum_{(j\\oplus i)= i+j}^{j\\leq i-1}dp_j$  \n\u4f46\u662f\uff01\u6211\u4eec\u56de\u5934\u4e00\u770b\u5374\u53d1\u73b0\u8fd9\u9053\u9898\u7684\u6570\u636e\u8303\u56f4\u4e0d\u540c\u4e8e\u901a\u5e38\u7684\u72b6\u538b\uff0c$n \\leq 24$ \u5728\u72b6\u538b\u4e2d\u5176\u5b9e\u7b97\u4e00\u4e2a\u5f88\u5927\u7684\u6570\u636e\u4e86\u3002\u4e0a\u8ff0\u7684\u8f6c\u79fb\u65b9\u7a0b\u7684\u7406\u8bba\u590d\u6742\u5ea6\u662f $O(2^n n)$ \u7684\uff0c\u7ecf\u8fc7\u7b80\u5355\u8ba1\u7b97\u5373\u53ef\u53d1\u73b0\uff0c\u603b\u7684\u8ba1\u7b97\u91cf\u4e3a\uff1a$2 \\times 2^{24} \\times 24=805306368$\u3002  \n\n\u8fd9\u4e2a\u590d\u6742\u5ea6\u4e14\u6ca1\u6709 O2 \u4f18\u5316\u7684\u60c5\u51b5\u4e0b\u8d85\u65f6\u51e0\u4e4e\u662f\u5fc5\u7136\u3002\u4f46\u662f\u8fd9\u4e2a\u590d\u6742\u5ea6\u4e5f\u5e76\u975e\u5b8c\u5168\u65e0\u6cd5\u633d\u56de\uff0c\u6211\u4eec\u5728\u6309\u4f4d\u679a\u4e3e\u72b6\u6001\u7684\u65f6\u5019\u4f7f\u7528\u4e86 $O(n)$ \u7684\u590d\u6742\u5ea6\uff0c\u4f46\u5b9e\u9645\u4e0a\u5e76\u4e0d\u9700\u8981\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6c42 lowbit \u6765\u5feb\u901f\u627e\u51fa\u4e00\u4e2a\u5927\u6570\u7684\u6bcf\u4e00\u4f4d 1\u3002  \n\n\u8fd9\u65f6\u5019\u590d\u6742\u5ea6\u74f6\u9888\u6765\u5230\u4e86\u524d\u9762\u7684\u9884\u5904\u7406\uff0c\u5373\u627e\u51fa\u52a0\u548c\u4e3a $k$ \u4e2a\u6570\u4e4b\u4e00\u7684\u72b6\u6001\u6570\u3002\u8fd9\u91cc\u7684\u8ba1\u7b97\u662f\u548c\u72b6\u6001\u4e2d 1 \u7684\u6240\u5728\u4f4d\u7f6e\u6709\u5173\u7684\uff0c\u4e0d\u80fd\u76f4\u63a5 lowbit \u5904\u7406\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u5728\u524d\u9762\u7b97\u597d\u6bcf\u4e00\u4e2a 2 \u7684\u5e42\u6b21\u6240\u4ee3\u8868\u7684\u4f4d\u6570\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528 lowbit \u4e86\u3002  \n\ncode\uff1a  \n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nconst int mod=1e9+7;\nint n,k;int s[30];\nbool vis[(1<<24)];int b[30];\nint dp[(1<<24)];int id[(1<<24)];\ninline int popdata(int x){\n\tint res=0;\n\twhile(x!=0){\n\t\tint now=x&-x;\n\t\tres+=s[id[now]];\n\t\tx-=now;\n\t}return res;\n}\nsigned main(){\n\tios::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n\tcin>>n;int base=1;\n\tfor(int i=0;i<=n;i++){\n\t\tid[base]=i+1;base*=2;\n\t}\n\tfor(int i=1;i<=n;i++)\n\t\tcin>>s[i];\n\tcin>>k;\n\tfor(int i=1;i<=k;i++)cin>>b[i];\n\tfor(int i=0;i<=(1<<n)-1;i++){\n\t\tfor(int j=1;j<=k;j++)\n\t\t\tif(popdata(i)==b[j])vis[i]=1;\n\t}dp[0]=1;\n\tfor(int i=0;i<=(1<<n)-1;i++){\n\t\tif(vis[i]){dp[i]=0;continue;}\n\t\tint l=((1<<n)-1)^i;\n\t\twhile(l!=0){\n\t\t\tint now=l&-l;\n\t\t\tdp[i^now]+=dp[i];dp[i^now]%=mod;\n\t\t\tl-=now;\n\t\t}\n\t}cout<<dp[(1<<n)-1];\n}\n```\n",
        "postTime": 1659690621,
        "uid": 213173,
        "name": "\u5c0f\u6728\u866b",
        "ccfLevel": 4,
        "title": "\u3010CF\u8fdc\u53e4\u8ba1\u5212\u3011 CF327E Axis Walking"
    },
    {
        "content": "\u72b6\u538b\u597d\u9898\u3002\n\n### \u9898\u610f\n\n> \u7ed9\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6b63\u6574\u6570\u5e8f\u5217 $S$\uff0c\u518d\u6709 $k$ \u4e2a\u6b63\u6574\u6570\u3002\n\u6c42\u6709\u591a\u5c11\u79cd $S$ \u7684\u6392\u5217\u65b9\u5f0f\u4f7f\u5f97\u5176\u524d\u7f00\u548c\u4e0d\u4f1a\u6210\u4e3a\u90a3 $k$ \u4e2a\u6570\u91cc\u7684\u4efb\u610f\u4e00\u4e2a\u3002\u7b54\u6848\u5bf9 $1e9+7$ \u53d6\u6a21\u3002\n$0 \\le k \\le 2,1 \\le n \\le 24$\u3002\n\n### \u9898\u89e3\n\n\u56e0\u4e3a $n \\le 24$\uff0c\u660e\u663e\u662f\u72b6\u538b\u3002\n\n\u5047\u8bbe $f_i$ \u8868\u793a\u5728\u72b6\u6001\u4e3a $i$ \u7684\u60c5\u51b5\u4e0b\u7684\u7ec4\u5408\u65b9\u6cd5\u6570\uff0c\u5219\u7b54\u6848\u4e3a $f_{2^n-1}$\u3002\n\n\u5b9a\u4e49\u4e00\u4e2a\u6570\u7ec4 $a$\uff0c\u5176\u4e2d $a_i$ \u5b58\u50a8\u5728\u60c5\u51b5 $i$ \u4e0b\u7684\u5143\u7d20\u4e4b\u548c\uff0c\u5f88\u5bb9\u6613\u7406\u89e3\u3002\n\n\u5bf9\u4e8e\u4e00\u4e2a\u65b0\u7684 $a_i$\uff0c$a_i = a_{lowbit(i)} + a_{i \\, \\operatorname{xor} \\, lowbit(i)}$\u3002\n\n\u8003\u8651\u5982\u4f55\u8f6c\u79fb\u3002\n\n\u5bf9\u4e8e $f_i$ \u53ef\u4ee5\u7531 $f_j$ \u8f6c\u79fb\u800c\u6765\uff0c\u5176\u4e2d $j$ \u662f $i$ \u53bb\u6389\u4e00\u4e2a\u5143\u7d20\u5f97\u6765\u7684\u3002\n\n\u90a3\u4e48\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5c31\u662f $f_i = \\sum f_j$\uff0c\u5728\u5faa\u73af\u5185\u679a\u4e3e\u6bcf\u4e00\u4f4d\u7684\u60c5\u51b5\u5373\u53ef\u3002\n\n### \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define ll long long\n#define lb(x) (x&(-x))\nusing namespace std;const ll N=24,mod=1e9+7;\nint a[1<<N],f[1<<N],n,k,b[N],lim;\nint main(){\n    cin>>n;lim=(1<<n)-1;for(int i=1;i<=lim;i<<=1)cin>>a[i];\n    cin>>k;for(int i=1;i<=k;i++)cin>>b[i];f[0]=1;\n    for(int i=0;i<=lim;i++){\n\ta[i]=a[i^lb(i)]+a[lb(i)];\n\tif(a[i]!=b[1]&&a[i]!=b[2])\n\t    for(int j=i;j;j^=lb(j))\n                f[i]=(f[i^lb(j)]+f[i])%mod;\n    }cout<<f[lim];return 0;\n}\n```",
        "postTime": 1646714107,
        "uid": 540715,
        "name": "A_I_Skeleton",
        "ccfLevel": 0,
        "title": "CF327E"
    },
    {
        "content": "# \u9898\u76ee\n\n[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF327E)\n\n# \u9898\u89e3\n\n\u4e00\u9053\u5f88\u6c34\u7684\u72b6\u538b\u9898...\n\n\u8bbe $f[s]$ \u4e3a\u6570\u5b57\u51fa\u73b0\u60c5\u51b5\u4e3a $s$ \u65f6\u7684\u65b9\u6848\u6570\uff0c\u663e\u7136\u5982\u679c $\\exist k[i],sum[s]=k[i]$ \u90a3\u4e48 $f[s]=0$\uff0c\u5176\u4e2d $sum[s]$ \u4e3a\u9009\u62e9\u6570\u5b57\u60c5\u51b5\u4e3a $s$ \u65f6\u7684\u6570\u5b57\u548c\uff0c\u800c\u8f6c\u79fb\u4e5f\u5f88\u597d\u5199\u4e86\uff1a\n$$\nf[s]=\\sum f[s']\n$$\n\u5176\u4e2d $s'$ \u4e3a $s$ \u5c11\u51fa\u73b0\u4e86\u4e00\u4e2a\u6570\u5b57\u7684\u72b6\u6001\u3002\n\n\u6709\u4e00\u4e2a\u8fb9\u754c\u6761\u4ef6 \u2014\u2014 $f[0]=1$\uff0c\u5176\u4ed6\u7684\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684\u4e86......\n\n\u4f46\u662f\u6d1b\u8c37\u63a8\u8350\u6709\u4e00\u9053[\u6a21\u578b\u4e00\u6837\u7684\u9898](https://www.luogu.com.cn/problem/P2396)\uff0c\u9700\u8981\u5bf9\u9898\u76ee\u6709\u5f88\u6df1\u4e86\u89e3\u5e76\u4e14\u5408\u7406\u8f6c\u5316\uff0c\u63a8\u8350\u53bb\u505a\u4e00\u505a\u3002\n\n\u63a8\u8350\u9898\u552f\u4e00 $ex$ \u7684\u5c31\u662f\u5b83\u5361\u5e38...\n\n# \u4ee3\u7801\n\n```cpp\nhttps://www.cnblogs.com/Arextre/p/13460640.html\n```\n\n",
        "postTime": 1596895761,
        "uid": 125355,
        "name": "Vladilena",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF327E \u3010Axis Walking\u3011"
    },
    {
        "content": "\u72b6\u538b+\u5361\u5e38\u9898\u3002\u5176\u5b9e\u601d\u7ef4\u96be\u5ea6\u4e0d\u9ad8\uff0c\u6240\u4ee5\u8fd9\u7bc7\u9898\u89e3\u4e3b\u8981\u6765\u5ba3\u4f20\u5361\u5e38\u624b\u6cd5\u4e86\uff08\n\n[Tips]\u9996\u5148\u4f60\u9700\u8981\u719f\u6089\u72b6\u538bDP\u9700\u7528\u5230\u7684\u4f4d\u8fd0\u7b97\u64cd\u4f5c\n\n-----\n\n$\\Large\\textbf{\u601d\u8def}$\n\n$n\\le 24$ \u51e0\u4e4e\u5c31\u662f\u5728\u6697\u793a\u6211\u4eec\u7528\u72b6\u538bDP  \n\u4f7f\u7528\u7684\u6570\u7684\u96c6\u5408\u53ef\u4ee5\u752824\u4f4d\u65e0\u7b26\u53f7\u6574\u6570\u8868\u793a  \n\u8bbe $f_i$ \u4e3a\u5df2\u4f7f\u7528\u7684\u6570\u7684\u96c6\u5408\u4e3a $i$ \u65f6\u5408\u6cd5\u7684\u65b9\u6848\u6570\uff0c\u4e3a\u4e86\u5224\u65ad\u5408\u6cd5\uff0c\u6211\u4eec\u518d\u8bbe $a_i$ \u8868\u793a\u5df2\u4f7f\u7528\u7684\u6570\u7684\u603b\u548c\u3002  \n\n\u8f6c\u79fb\uff1a\u679a\u4e3e $i$ \u53bb\u6389\u4e00\u4e2a\u6570\u540e\u8fd8\u539f\u6210\u7684\u6240\u6709\u96c6\u5408 $k$\uff08\u5c31\u662f\u4e8c\u8fdb\u5236\u8868\u8fbe\u4e0b\u53bb\u6389\u4e00\u4e2a1\uff09\uff0c\u5219 $f_i=\\sum f_k$ \u3002  \n\u5229\u7528`lowbit`\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u5b9e\u73b0  \n\u8ba1\u7b97 $a_i$ \u6bd4\u8f83\u65b9\u4fbf\u7684\u4e00\u79cd\u5199\u6cd5\u662f `a[i]=a[i^lowbit(i)]+a[lowbit(i)]` \u3002  \n$m$ \u5f88\u5c0f\uff0c\u5224\u65ad\u662f\u5426\u5408\u6cd5\u7684\u8017\u65f6\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8ba1\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(n2^n)$  \n\u7528\u8ba1\u7b97\u5668\u7b97\u4e00\u7b97\u5c31\u53ef\u4ee5\u77e5\u9053\u6700\u574f\u60c5\u51b5\u4e0b\u8981\u8fd0\u7b97\u7ea64e8\u6b21\uff0c\u6240\u4ee5\u4e0b\u9762\u6211\u4eec\u6765\u8c08\u4e00\u8c08\u5361\u5e38\u3002\n\n\uff08\u5982\u679c\u4f60\u53ea\u662f\u6765\u770b\u4e2a\u601d\u8def\uff0c\u4e0b\u9762\u7684\u4e1c\u897f\u4f60\u90fd\u53ef\u4ee5\u4e0d\u770b\u4e86\uff09\n\n-----\n\n$\\Large\\textbf{\u6709\u7406\u6709\u636e\u7684\u5e95\u5c42\u4f18\u5316}$\n\n\u7bc7\u5e45\u6240\u9650\uff0c\u8fd9\u91cc\u4e0d\u80fd\u7cfb\u7edf\u5730\u4ecb\u7ecd\u5361\u5e38\u65b9\u6cd5\uff0c\u6240\u4ee5\u5c31\u7ed9\u51e0\u4e2a\u6bd4\u8f83\u5e38\u7528\u7684\u4f18\u5316\u5957\u8def\u5427\n\n### \u9700\u8981\u77e5\u9053\u7684C++\u7279\u6027\uff08\u5947\u602a\u7684\u77e5\u8bc6\uff09\uff08\u53ef\u8df3\u8fc7\uff09\n\n - \u4e00\u4e2a\u8d4b\u503c\u7684\u8868\u8fbe\u5f0f\u9664\u4e86\u8d4b\u503c\uff0c\u4e5f\u4f1a\u8fd4\u56de\u8fd9\u4e2a\u503c\u3002\u6bd4\u5982 `if (a=1) ...` \u7b49\u4ef7\u4e8e `a=1; if (1) ...`  \n - \u5f62\u5982 `a,b,...,f;` \u7684\u5f0f\u5b50\u4e5f\u6709\u8fd4\u56de\u503c `f` \n - `a&&b` \u6267\u884c\u65f6\uff0c\u5982 `a=0` \uff0c\u5219**\u4e0d\u518d\u8ba1\u7b97b**\uff0c\u76f4\u63a5\u7ed3\u675f\u3002`a||b` \u540c\u7406\u3002\u56e0\u6b64 `&&` \u548c `||` \u88ab\u79f0\u4e3a\u77ed\u8def\u8fd0\u7b97\n\n### \u77ed\u8def\u8fd0\u7b97&\u4e09\u76ee\u8fd0\u7b97\u4f18\u5316if\uff08\u5947\u602a\u7684\u77e5\u8bc6\uff09\uff08\u53ef\u8df3\u8fc7\uff09\n\n`if` \u7684\u901f\u5ea6\u6bd4\u8f83\u6162\uff0c\u5bf9\u4e8e\u7b80\u5355\u7684`if`\u8bed\u53e5\uff0c\u53ef\u4ee5\u7528\u77ed\u8def\u8fd0\u7b97\u6216\u4e09\u76ee\u8fd0\u7b97\u4ee3\u66ff\u3002\u6ce8\u610f\u5e76\u4e0d\u662f\u8bf4\u8981\u5b8c\u5168\u629b\u5f03if  \n\n\u4e0b\u9762\u7ed9\u51fa\u51e0\u4e2a\u7ecf\u5178\u7684\u5957\u8def\u3002\n\n```cpp\nint sth;\nvoid work() { ... }\nint solve() { ... }\n\n...\n\nif (sth) work(); // sth&&(work(),0);\nif (sth) solve(); // sth&&solve();\nif (!sth) work(); // sth||(work(),0);\nif (!sth) solve(); // sth||solve();\nif (sth) work(); else solve(); // sth?work(),0:solve();\n```\n\n\u6ce8\u91ca\u5185\u5bb9\u4e3a\u4f18\u5316\u540e\u7684\u5199\u6cd5\u3002\u8fd9\u79cd\u5199\u6cd5\u4e0d\u4ec5\u62e5\u6709\u66f4\u5feb\u7684\u901f\u5ea6\uff0c\u800c\u4e14\u4e5f\u4f7f\u8bed\u53e5\u53ef\u4ee5\u8fdb\u884c\u66f4\u7075\u6d3b\u3001\u7cbe\u5de7\u7684\u7ec4\u5408\u3002  \n\u77ed\u8def\u8fd0\u7b97\u8981\u6c42\u64cd\u4f5c\u6570\u5747\u4e3a\u6574\u578b\uff0c\u4e09\u76ee\u8fd0\u7b97 `a?b:c` \u8981\u6c42a\u4e3a\u6574\u578b\uff0cb,c\u540c\u7c7b\u578b\u3002  \n\u4e3a\u4e86\u5229\u7528\u5b83\u4eec\u52a0\u901f\uff0c\u6709\u65f6\u53ef\u4ee5\u901a\u8fc7\u88650\u7684\u65b9\u5f0f\u8f6c\u53d8\u7c7b\u578b\u3002  \n\u987a\u4fbf\u8bf4\u4e00\u53e5\uff0c\u4e0d\u63a8\u8350 `(int)sth` \u8fd9\u6837\u7684\u5f3a\u5236\u8f6c\u6362\uff0c\u592a\u6162\u4e86\n\n### inline&register\u4f18\u5316\n\n`inline` \u5c06\u51fd\u6570\u53d8\u4e3a\u5185\u8054\u51fd\u6570\uff0c\u5f80\u5f80\u5177\u6709\u4e0d\u9519\u7684\u6548\u679c\uff0c\u4f46\u51fd\u6570\u672c\u8eab\u8fc7\u4e8e\u590d\u6742\u65f6\u53ef\u80fd\u4f1a\u9002\u5f97\u5176\u53cd\u3002\u5bf9\u4e8e\u51fd\u6570\u4f53\u8f83\u5927\u3001\u5faa\u73af\u6b21\u6570\u8f83\u591a\u7684\u51fd\u6570\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002\uff08\u5ea6\u81ea\u5df1\u628a\u63a7\u5427\uff0c\u6211\u4e5f\u6ca1\u627e\u5230\u786e\u5b9a\u7684\u754c\u9650\uff09\n\n`register` \u53ef\u5c06\u53d8\u91cf\u5b58\u5165\u5bc4\u5b58\u5668\uff0c\u4ece\u800c\u5927\u5e45\u63d0\u5347\u901f\u5ea6\u3002\u4f46\u662f\u6ce8\u610f\u5bc4\u5b58\u5668\u975e\u5e38\u5c0f\uff0c\u6700\u591a\u5b58\u51e0\u4e2a\u5faa\u73af\u53d8\u91cf\uff0c\u4e0d\u8981\u4ec0\u4e48\u90fd\u5f80\u91cc\u9762\u653e  \n\u677e\u6c0f\u57fa\u6392\u7684\u539f\u7406\u4e5f\u4e0e\u5b83\u7c7b\u4f3c\uff0c\u901a\u8fc7\u8c03\u6574\u6570\u7ec4\u5927\u5c0f\u4f7f\u6570\u7ec4\u5361\u8fdbcache\uff0c\u4ece\u800c\u53ef\u80fd\u83b7\u5f97\u66f4\u5feb\u7684\u901f\u5ea6\u3002\n\n\u53e6\u5916\u6709\u542c\u8bf4\u8fc7register\u5c06\u6765\u4f1a\u53bb\u4e16\u7684\u8bf4\u6cd5\u3002\u4e0d\u8fc7\u5e73\u65f6\u505a\u9898\u8fd8\u662f\u7167\u6837\u7528\u5427\n\n### \u706b\u8f66\u5934\n\n\u8fd9\u91cc\u5e76\u4e0d\u662f\u8ba9\u4f60\u7528\u5e02\u9762\u4e0a\u6d41\u4f20\u751a\u5e7f\u7684\u90a3\u4e2a40\u884c\u706b\u8f66\u5934\u3002\u770b\u7740\u5389\u5bb3\u5176\u5b9e\u5e73\u5747\u8d28\u91cf\u4e0d\u9ad8\uff0c\u9664\u975e\u4f60\u80fd\u4fdd\u8bc1\u4f60\u7684\u7a0b\u5e8f\u590d\u6742\u5230\u6240\u6709\u7684\u4f18\u5316\u90fd\u6709\u7528\u6b66\u4e4b\u5730  \n\u8f83\u4e3a\u901a\u7528\u3001\u5b9e\u7528\u7684\u4f18\u5316\u662fO2,O3,Ofast\u3002\u4e2a\u4eba\u559c\u6b22\u7528O2\u548cOfast\n\n\u624b\u52a8\u5f00\u542f\u65b9\u6cd5\u5206\u522b\u5982\u4e0b\uff1a\n\n```cpp\n#pragma GCC optimize(2)\n#pragma GCC optimize(3)\n#pragma GCC optimize(\"Ofast\")\n```\n\n\u540c\u65f6\u6d1b\u8c37\u4e5f\u63d0\u4f9b\u4e86O2\u4f18\u5316\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u4e0d\u624b\u52a8\u5f00\u3002  \n\u53e6\u5916\uff0c\u8fd9\u4e09\u4e2a\u4f18\u5316\u5b58\u5728\u6539\u5199\u5faa\u73af\u3001\u5220\u9664\u5197\u4f59\u8bed\u53e5\u7b49\u884c\u4e3a\uff0c\u5982\u679c\u4f60\u7684\u4ee3\u7801\u4e0d\u591f\u89c4\u8303\uff0c\u53ef\u80fd\u9020\u6210\u901f\u5ea6\u53d8\u6162\uff0c\u751a\u81f3\u51fa\u73b0\u9519\u8bef\u3002  \n\u9664\u975e\u662f\u5b9e\u5728\u5361\u4e0d\u8fc7\u53bb\uff0c\u6216\u8005\u6d4b\u8bd5\u901f\u5ea6\uff0c\u5e73\u65f6\u4e0d\u5efa\u8bae\u6ee5\u7528\u3002\u66f4\u4e0d\u80fd\u5728\u8003\u573a\u4e0a\u7528\uff0c\u6ca1\u591a\u5c11\u52a0\u5206\u7684\u6307\u671b\uff0c\u800c\u4e14\u8d1f\u9762\u6548\u679c\u4e0d\u53ef\u9884\u6d4b\u3002\n\n\u522b\u7684\u5c31\u4e0d\u8bb2\u4e86\uff0c\u4e0b\u9762\u4ee3\u7801\u6d89\u53ca\u5230\u7684\u4f3c\u4e4e\u5c31\u8fd9\u4e48\u591a\n\n----\n\n$\\Large\\textbf{\u4ee3\u7801}$\n\n\uff08\u53ef\u8df3\u8fc7\uff09\n \n```cpp\n#include<cstdio>\nconst int P=1000000007,N=(1<<24); \nint n,m,s,t,x1,x2,a[N],f[N];\ninline void add(int x) { (s+=x)>=P&&(s-=P); } \ninline int lb(int x) { return (-x&x); }\nint main() {\n\tscanf(\"%d\",&n); n=(1<<n),f[0]=1;\n\tfor (int i=1; i<n; i<<=1) scanf(\"%d\",a+i);\n\tscanf(\"%d\",&m),m&&scanf(\"%d\",&x1),m>1&&scanf(\"%d\",&x2);\n\tfor (int i=1; i<n; ++i,s=0) {\n\t\tif ((a[i]=a[i^(t=lb(i))]+a[t])==x1) continue;\n\t\tif (m>1&&a[i]==x2) continue;\n\t\tfor (int j=i; j; j^=t) add(f[i^(t=lb(j))]);\n\t\tf[i]=s;\n\t}\n\tprintf(\"%d\",f[n-1]);\n\treturn 0;\n}\n```\n\n\u4f60\u53ef\u80fd\u611f\u89c9\u770b\u4e0d\u61c2\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u4ee3\u7801\u8f83\u591a\u5730\u5229\u7528\u4e86\u77ed\u8def\u8fd0\u7b97\u548c\u8d4b\u503c\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\u3002\u4e0d\u8fc7\u8fd9\u4e9b\u4f18\u5316\u5b66\u4f1a\u4e4b\u540e\u662f\u771f\u7684\u5f88\u5b9e\u7528\uff0c\u5e76\u4e14\u5c5e\u4e8e\u5bf9C++\u8bed\u8a00\u7279\u6027\u7684\u5229\u7528\uff0c\u65e0\u9700\u8003\u8651\u7384\u5b66\u98ce\u9669\u3002 \n\n----\n\n$\\Large\\textbf{\u540e\u8bdd}$\n\n\u8fd9\u91cc\u6709\u4e2a\u53cc\u500d\u7ecf\u9a8c\uff1a[P2396](https://www.luogu.com.cn/problem/P2396)\n\n\u62bd\u8c61\u4e4b\u540e\u6a21\u578b\u662f\u4e00\u6a21\u4e00\u6837\u7684\u3002\u3002  \n\u7406\u8bba\u4e0a\u628a\u4ee3\u7801\u590d\u5236\u8fc7\u53bb\u5c31\u80fdAC\u4e86\uff0c\u4f46\u5b9e\u9645\u4e0a\u90a3\u9898\u8981\u6bd2\u7624\u4e00\u4e9b\n\n\u6700\u66b4\u529b\u7684\u65b9\u6cd5\u662f\u76f4\u63a5\u52a0O2/Ofast\uff0c\u53ef\u4ee5\u6c34\u8fc7\u53bb  \n\u4f46\u5982\u679c\u4f60\u8ba4\u4e3a\u8fd9\u79cd\u65b9\u6cd5~~\u8c01\u4e0d\u4f1a\uff0c\u6709\u672c\u4e8b\u81ea\u5df1\u5199\u554a~~\u592a\u6c34\u4e86\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e00\u822c\u7684\u5361\u5e38\u65b9\u6cd5\u5361\u8fc7\u53bb\n\n\uff08\u8bb0\u5f97\u6311\u4e2a\u8bc4\u6d4b\u91cf\u5c0f\u7684\u65f6\u95f4\u6bb5\u4ea4",
        "postTime": 1584285885,
        "uid": 38785,
        "name": "icyM3tra",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF327E \u3010Axis Walking\u3011"
    },
    {
        "content": "\u7ed9\u4e00\u4e2a\u5e8f\u5217\uff0c\u53ef\u4ee5\u4efb\u610f\u91cd\u6392\uff0c\u4f46\u662f\u524d\u7f00\u548c\u4e0d\u80fd\u51fa\u73b0\u7ed9\u5b9a\u6570\u5b57\u4e2d\u7684\u6570\uff0c\u95ee\u6709\u51e0\u79cd\u6392\u5217\u65b9\u5f0f\n\nn<=24\uff0c\u8fd9\u6837\u7684\u6570\u91cf\u7ea7\u4e0d\u662f\u641c\u7d22\u5c31\u662f\u72b6\u538b\u3002\u660e\u663e\u8fd9\u9053\u9898\u76ee\u662f\u72b6\u538b\u3002\n\ndp[i]\u8868\u793a\u9009\u7684\u72b6\u6001\u4e3ai\u7684\u65b9\u6848\u6570\n\n\u8fd9\u9898\u4e3b\u8981\u7ec3\u4e60\u901a\u8fc7lowbit\u4f18\u5316\u7684dp\n\n\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std ;\nconst int p = 1e9+7;\nconst int M = (1<<25) ;\nint lowbit(int x){return x&-x;}\nint sum[M],a[25],no[3],dp[M] ;\nint n,k ;\nint main(){\n\tscanf(\"%d\",&n) ;\n\tfor (int i=0;i<n;i++){\n\t\tscanf(\"%d\",&a[i]) ;\n\t\tsum[1<<i]=a[i] ;\n\t}\n\tscanf(\"%d\",&k) ;\n\tfor (int i=0;i<k;i++) scanf(\"%d\",&no[i]) ;\n\tdp[0]=1 ;\n\tfor (int i=1;i<(1<<n);i++){\n\t\tsum[i]=sum[i&~lowbit(i)]+sum[lowbit(i)] ;\n\t\tif (sum[i]==no[0] || sum[i]==no[1]) continue ;\n\t\tfor (int j=i;j!=0;j-=lowbit(j))\n\t\t\tdp[i]=(dp[i]+dp[i&~lowbit(j)])%p ;\n\t\t\t\n\t\t\n\t}\n\tprintf(\"%d\\n\",dp[(1<<n)-1]) ;\n}\n```",
        "postTime": 1543199910,
        "uid": 54900,
        "name": "__Hacheylight__",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF327E \u3010Axis Walking\u3011"
    },
    {
        "content": "\u72b6\u538bdp\u9898\uff0csum[i]\u4e3a\u72b6\u6001\u4e3ai\u65f6\u7684\u524d\u7f00\u548c\uff0cdp[i]\u4e3a\u5230i\u4e3a\u6b62\u65b9\u6848\u6570\n\n\u6bcf\u6b21\u65b0\u7684\u72b6\u6001\uff08sum[i]\uff09 = \u4ec5\u6709\u672b\u5c3e1\u7684\u72b6\u6001 + \u53bb\u6389\u672b\u5c3e1\u7684\u72b6\u6001\uff0c\u800c\u4e8c\u8005\u90fd\u5728\u5148\u524d\u6c42\u8fc7\u4e86\uff0c\u53ef\u4ee5O\uff081\uff09\u7684\u6c42\u51fasum[i] \u7684\u503c\n\n\u800cdp[i] \u5219\u8981\u679a\u4e3e\u6bcf\u79cd\u60c5\u51b5\uff0c\u7528lowbit\u53d61\u800c\u975e\u679a\u4e3e\u6bcf\u4e00\u4f4d\u6765\u52a0\u901f\uff0c\u5c06\u6bcf\u79cd\u60c5\u51b5\u7d2f\u52a0\u5373\u53ef\n\n\n```\n#include<iostream>\n#include<cstdio>\nusing namespace std;\ninline int Read()\n{\n\tint s = 0,w = 1;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9'){\n\t\tif(ch == '-') w = -1;\n\t\tch = getchar();\n\t}\n\twhile(ch >= '0' && ch <= '9')\n\t\ts = (s << 3)+(s << 1) + ch - '0',ch = getchar();\n\treturn w * s;\n}\nint Mod = 1e9 + 7; \nint N,K,No[2],a[(1<<24)+1];\nlong long sum[(1<<24)+1],dp[(1<<24)+1];\nint lowbit(int Q){\n\treturn Q&(-Q);\n}\nint main()\n{\n\tN = Read();\n\tfor(int i = 0; i < N; ++i)\n\t{\n\t\ta[i] = Read();\n\t\tsum[1<<i] = a[i];\n\t}\n\tK = Read();\n\tfor(int i = 0; i < K; ++i)  //\u4e2a\u6570 <= 2 \n \t\tNo[i] = Read();\n \tdp[0] = 1;  \n\t for(int i = 1; i < (1 << N); ++i)\n\t {\n\t \tsum[i] = sum[i-lowbit(i)] + sum[lowbit(i)];\n\t \tif(sum[i] == No[0] || sum[i] == No[1])\n\t \t\tcontinue;\n\t \tfor(int j = i; j; j -= lowbit(j))\n\t \t{\n\t \t\tdp[i] += dp[i&~lowbit(j)];\n\t \t\tif(dp[i] > Mod) dp[i] -= Mod;\n\t \t}\n\t } \n\t cout << dp[(1<<N)-1];\n\treturn 0;\n}\n```",
        "postTime": 1533381360,
        "uid": 44650,
        "name": "SpXace",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF327E \u3010Axis Walking\u3011"
    },
    {
        "content": "###  \u8c28\u4ee5\u6b64\u7bc7\u9898\u89e3\u6765\u7eaa\u5ff5\u7684\u6211\u53ef\u601c\u7684\u72b6\u538b\u6c34\u5e73.....\n\n## \u9898\u76ee\u5927\u610f\uff1a\u7ed9\u4e00\u4e2a\u5e8f\u5217\uff0c\u53ef\u4ee5\u4efb\u610f\u91cd\u6392\uff0c\u4f46\u662f\u524d\u7f00\u548c\u4e0d\u80fd\u51fa\u73b0\u7ed9\u5b9a\u6570\u5b57\u4e2d\u7684\u6570\uff0c\u95ee\u6709\u51e0\u79cd\u6392\u5217\u65b9\u5f0f\n\n\u6ce8\u610f\u5230N\u5f88\u5c0f...~~K\u66f4\u5c0f~~\u6240\u4ee5\u5e94\u8be5\u662f\u53ef\u4ee5\u72b6\u538b~~\u56e0\u4e3a\u66b4\u529b\u5168\u6392\u5217\u8fc7\u4e0d\u53bb~~\n\u4e00\u822c\u5168\u6392\u5217\u53ea\u80fd\u5230n==11\uff0c\u7531\u4e8e\u72b6\u538b\u52a0\u4e0alowbit\u53ef\u4ee5\u8dd1\u5f97\u5f88\u5feb...\u56e0\u4e3a\u6211\u592a\u5f31\u8dd1\u7684\u4ecd\u7136\u5f88\u6162\n\n\u6240\u4ee5\u8bf4\u7528\u4e00\u4e2asum\u6570\u7ec4\u8bb0\u5f55\u6240\u9009\u7684\u6570\u5f97\u524d\u7f00\u548c\uff0c\u6240\u9009\u7684\u6570\u5728sum\u7684\u4e0b\u6807\u4e2d\u4f53\u73b0\n\n\u4e0b\u6807\u7684\u6bcf\u4e00\u4e2a\u4e8c\u8fdb\u5236\u4f4d\u4ee3\u8868\u4e00\u4e2a\u6570\u9009\u8fd8\u662f\u4e0d\u9009\u3002\n\n\u5177\u4f53\u6c42\u53ef\u4ee5\u76f4\u63a5\u679a\u4e3e\uff0c\u4e8c\u8fdb\u5236\u66b4\u529b\u7684\u4e0a\u754c\u662fn==15\uff0c\u800c\u672c\u9898n\u5230\u4e8624\uff0c\u6240\u4ee5\u8003\u8651\u4f18\u5316\n\n\u8003\u8651\u679a\u4e3e\u5230\u5728\u5f53\u524d\u8fd9\u4f4d\u4e4b\u524d\uff0c\u53ef\u80fd\u6709\u5f88\u591a\u4f4d0\n\n\u6240\u4ee5\u5f88\u81ea\u7136\u7684\u60f3\u5230lowbit\n\n\n------------\n\nlowbit\u7684\u610f\u4e49\uff1a~~\u4f60\u5927\u6982\u7ffb\u8bd1\u4e00\u4e0b\u4e5f\u80fd\u731c\u51fa\u6765\uff0c~~\u5c31\u662f\u6c42\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u4ece\u53f3\u5411\u5de6\u6570\u7b2c\u4e00\u4e2a1\u7684\u4f4d\u6743\n\n#### \u4e3e\u4e2a\u6817\u5b50\uff1a28\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4e3a 11100\n\u6240\u4ee5lowbit(28)\u4e3a8\n\n\u5177\u4f53\u6c42\u6cd5\u4e0d\u518d\u8d58\u8ff0\n\n\n\n------------\n\u56de\u5230\u672c\u9898\uff0c\u6709\u4e86lowbit\u8fd9\u4e2a\u4e1c\u897f\u4fbf\u80fd\u63d0\u9ad8\u7a0b\u5e8f\u6548\u7387\n\n\u5148\u4e0a\u6211\u7684\u64e6\u8fb9\u4ee3\u7801\uff0c\u5177\u4f53\u7528\u6cd5\u5728\u4ee3\u7801\u91cc\u6ce8\u91ca\u51fa\u6765\n```cpp\n#include<cstdio>\n#define lowbit(x) (x&(-x))\n\nusing namespace std;\n\nconst int M=(1<<24)+10;\nconst int mod=1e9+7;\n\ntypedef long long ll;\n\nint a[M];\nint o[M];\nll f[M];\nll sum[M];\n\nint main()\n{\n\tint n;\n\tscanf(\"%d\",&n);\n\tfor(int i=0;i<n;++i)\n\t{\n\t\tscanf(\"%d\",&a[i]);\n\t\tsum[1<<i]=a[i];//\u6bcf\u4e00\u4f4d\u4ee3\u8868\u4e00\u4e2aa[i] \n\t}\n\tint k;scanf(\"%d\",&k);\n\tfor(int i=1;i<=k;++i)scanf(\"%d\",&o[i]);\n\tf[0]=1;\n\tint lim=1<<n;//\u6700\u591a\u6709n\u4f4d\uff0c\u6240\u4ee5\u6700\u5927\u7684\u4e0b\u6807\u4e0d\u4f1a\u8d85\u8fc7(2^n)-1\n\tlim--;\n\tfor(int i=1;i<=lim;++i)\n\t{\n\t\tsum[i]=sum[i&~lowbit(i)]+sum[lowbit(i)]; \n\t\tif(sum[i]==o[1]||sum[i]==o[2])continue;//k\u53ea\u67092\uff0c\u7279\u5224\u5373\u53ef \n\t\tfor(int j=i;j;j-=lowbit(j))//\u5feb\u901f\u8bbf\u95ee\u6bcf\u4e00\u4e2a\u4e3a1\u7684\u4f4d\n\t\t{\n\t\t\tf[i]+=f[i&~lowbit(j)];\n\t\t\tif(f[i]>mod)f[i]-=mod;//\u7384\u5b66\uff0clong long\u7684\u53d6\u6a21\u975e\u5e38\u6162  --Sc\u03b1pe\n\t\t}\n\t}\n\treturn !printf(\"%lld\\n\",f[lim]);//\u76ae\u4e00\u624b \n}\n```\n\n\u8fd9\u91cc\u8865\u5145\u4e00\u4e0b~\u8fd9\u4e2a\u903b\u8f91\u8fd0\u7b97\u7b26\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u628a\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u6bcf\u4e00\u4f4d\u53d6\u53cd\n\u5373\u6bcf\u4e00\u4f4d\u76840\u53d8\u62101,1\u53d8\u62100\n\n\u6240\u4ee5i&~lowbit(i)\u7684\u610f\u4e49\u4e3a\u53bb\u6389\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684lowbit\u540e\u7684\u503c\n\n--end\n\n\u539f\u6587\u501f\u9274\u4e86[\u5450](https://blog.csdn.net/Tc_To_Top/article/details/47162427)\u4e2d\u7684\u601d\u60f3\uff0c\u52a0\u4e0a\u6211\u81ea\u5df1\u672c\u4eba\u7684\u4e00\u4e9b\u89c1\u89e3\u7ec4\u5408\u800c\u6210\uff0c\u4e0d\u559c\u52ff\u55b7",
        "postTime": 1533367601,
        "uid": 60791,
        "name": "\u53ef\u7231\u5373\u662f\u6b63\u4e49",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF327E \u3010Axis Walking\u3011"
    },
    {
        "content": "$\\color{Red}\\text{\u72b6\u538bDP(\u4f4d\u8fd0\u7b97) + \u538b\u884c}$\n\n\n------------\n\n\n $\\text{\u9898\u76ee}$\uff1a\n \n \n\u7ed9\u4f60\u4e00\u4e2a\u957f\u5ea6\u4e3an(1<=n<=24)\u7684\u6b63\u6574\u6570\u5e8f\u5217S\uff0c\n\n\u518d\u6709k(0<=k<=2)\u4e2a\u6b63\u6574\u6570\u3002\n\n\u6c42\u6709\u591a\u5c11\u79cdS\u7684\u6392\u5217\u65b9\u5f0f\u4f7f\u5f97\u5176\u524d\u7f00\u548c\u4e0d\u4f1a\u6210\u4e3a\u90a3k\u4e2a\u6570\u91cc\u7684\u4efb\u610f\u4e00\u4e2a\u3002 \n\n\u7b54\u6848\u5bf91e9+7\u53d6\u6a21\n\n\n------------\n\n\n$Solution$\n\n\u65e2\u7136\u8fd9\u4e9b\u6570\u73c2\u4ee5\u4efb\u610f\u81ea\u7531\u6392\u5217\n\n\u90a3\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u5f53\u505a**\u9009\u53d6\u4e00\u4e9b\u6570**\u5f97\u5230\u548c\n\n\u73c2\u4ee5\u901a\u8fc7\u4e8c\u8fdb\u5236\u6765\u8868\u793a\u5bf9\u6bcf\u4e2a\u6570\u7684\u9009\u53d6\u60c5\u51b5\n\n1 \u8868\u793a\u5df2\u9009\u53d6\uff0c0 \u8868\u793a\u672a\u9009\u53d6\n\n\n------------\n\n\n\u8be6\u89c1\u4ee3\u7801\u4e2d\u6ce8\u91ca\n\n```cpp\n#include <cstdio>\nconst int mod = 1e9 + 7 ;\nconst int Z = 24;\nint N,M,a[1 << Z],M_1,M_2,f[1 << Z] ;\nint main()\n{\n    scanf(\"%d\",&N); \n    for(int i = 0 ;i < N ; i ++)\n    scanf(\"%d\",&a[1<<i]);\n    scanf(\"%d\",&M);\n    (((M > 0)&&scanf(\"%d\",&M_1))&&((M > 1)&&scanf(\"%d\",&M_2)));//\u6bd2\u7624\u306e\u8f93\u5165\u73c2\u8fd8\u884c\uff1fQAQ\n    f[0] = 1;\n    for(int i = 1 ;i <= (1 << N ) - 1 ; i ++)//\u679a\u4e3e\u6240\u6709\u79cd\u60c5\u51b5\n    {\n        int j = i & -i;//\u6700\u540e\u4e00\u4f4d\u4e3a1\u7684\n        a[i] = a[i^j] + a[j];//\u76f8\u52a0\u5f97\u524d\u7f00\u548c\n        //\u5982 i = 1110,j = 10,i^j = 1100\n        //a[1110] = a[1100] + a[0010]\n        //a[1100]\u4e0ea[0010]\u603b\u662f\u5728a[1110]\u524d\u88ab\u8ba1\u7b97\u51fa\uff0c\u73c2\u4ee5\u7b97\u51fa\u524d\u7f00\u548c\n        if(a[i] == M_1 || a[i] == M_2)continue;//\u5982\u679c\u6070\u597d\u524d\u7f00\u548c\u4e3aM_1\u4e0eM_2,\u5219\u8df3\u8fc7\uff0c\u4e0d\u8fdb\u884c\u8ba1\u7b97\u65b9\u6848\u6570\n        for(int k = i ; k ;k ^= j,j = k & -k )f[i] = (f[i] + f[i^j])%mod;\n        //\u8ba9\u6211\u6765\u5256\u6790\u4e0b\n        //for()\u5185\u90e8\u662f\u679a\u4e3e\u53bb\u6389\u6bcf\u4e00\u4f4d\u7684\u60c5\u51b5\n        //\u4f8b\u5982f[1110] = f[1100] + f[1000] + f[0]\n    \n    }\n    printf(\"%d\",f[(1 << N ) -1]);\n    return 0;\n}\n```\n22\u884c\u77ed$AC Code$$\\text{\u5448\u4e0a}$\n\n~~\u7801\u98ce\u73c2\u8fd8\u884c\uff1f~~\n\n```cpp\n#include <cstdio>\nconst int mod = 1e9 + 7 ;\nconst int Z = 24;\nint N,M,a[1 << Z],M_1,M_2,f[1 << Z] ;\nint main()\n{\n    scanf(\"%d\",&N); \n    for(int i = 0 ;i < N ; i ++)\n    scanf(\"%d\",&a[1<<i]);\n    scanf(\"%d\",&M);\n    f[0] = 1;\n    (((M > 0)&&scanf(\"%d\",&M_1))&&((M > 1)&&scanf(\"%d\",&M_2)));\n    for(int i = 1 ;i <= (1 << N ) - 1 ; i ++)\n    {\n        int j = i & -i;\n        a[i] = a[i^j] + a[j];\n        if(a[i] == M_1 || a[i] == M_2)continue;\n        for(int k = i ; k ;k ^= j,j = k & -k )f[i] = (f[i] + f[i^j])%mod;\n    }\n    printf(\"%d\",f[(1 << N ) -1]);\n    return 0;\n}\n```\n\n",
        "postTime": 1571294639,
        "uid": 116162,
        "name": "\u7fbd\u5107",
        "ccfLevel": 3,
        "title": "\u9898\u89e3 CF327E \u3010Axis Walking\u3011"
    }
]
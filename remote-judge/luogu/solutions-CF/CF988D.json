[
    {
        "content": "## \u601d\u8def\n\u6211\u4eec\u8003\u8651\u4e00\u4e0b\u96c6\u5408\u5185\u5143\u7d20\u7684\u4e2a\u6570\u6700\u591a\u80fd\u6709\u51e0\u4e2a\uff0c\u5f53\u96c6\u5408\u5185\u5143\u7d20\u4e2a\u6570 $\\leq 2$ \u7684\u65f6\u5019\u89e3\u6cd5\u663e\u7136\uff0c\u6211\u4eec\u8003\u8651\u5f53\u96c6\u5408\u5185\u5143\u7d20\u4e3a $3$ \u4e2a\u7684\u65f6\u5019\u3002\n\n\u9996\u5148\u6211\u4eec\u8003\u8651\u96c6\u5408\u5185\u5143\u7d20\u4e3a $3$ \u4e2a\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u8bbe\u8fd9\u4e09\u4e2a\u6570\u5206\u522b\u4e3a $a,b,c$ ,\u5e76\u4e14 $a < b < c$ \u3002\n\n\u7531\u4e8e\u4ed6\u4eec\u4e4b\u95f4\u7684\u5dee\u503c\u4e3a $2$ \u7684\u5e42\u6b21\u65b9\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u59a8\u8fd9\u4e48\u8868\u793a$a+2^{k_1} = b , b+2^{k_2} = c$ \u3002\n\n\u6240\u4ee5 $a$ \u4e0e $c$ \u4e4b\u95f4\u7684\u5dee\u503c\u4fbf\u4e3a $2^{k_1}+2^{k_2}$ \u3002\u6211\u4eec\u77e5\u9053\uff0c\u4e00\u4e2a $2$ \u7684\u5e42\u6b21\u65b9\u5728\u4e8c\u8fdb\u5236\u8868\u8fbe\u5f0f\u4e0b\u6709\u4e14\u53ea\u6709\u4e00\u4e2a $1$ \uff0c\u6240\u4ee5\u5f53 $2^{k_1} \\ne 2^{k_2}$ \u65f6\uff0c\u4ed6\u4eec\u7684 $1$ \u4e0d\u4f1a\u52a0\u5728\u540c\u4e00\u4e2a\u4f4d\u7f6e\u4e0a\uff0c\u6784\u6210\u7684\u4e8c\u8fdb\u5236\u6570\u4e2d\u4f1a\u5b58\u5728\u4e24\u4e2a $1$ ,\u8fd9\u6837\u5b83\u5c31\u4e0d\u662f $2$ \u7684\u5e42\u6b21\u65b9\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u51fa\u7ed3\u8bba\uff0c\u5728\u4efb\u4f55\u6761\u4ef6\u4e0b\uff0c$k_1 = k_2$ \u6052\u6210\u7acb\u3002\n\n\u7136\u540e\u6211\u4eec\u8003\u8651\u96c6\u5408\u5185\u5143\u7d20\u4e2a\u6570 $4$ \u7684\u96c6\u5408\uff0c\u4e0d\u59a8\u8bbe\u76f8\u90bb\u4e24\u4e2a\u6570\u7684\u5dee\u5206\u522b\u4e3a $k_1 , k_2 ,k_3$ \uff0c\u6211\u4eec\u5c06\u4e0a\u9762\u7684\u7ed3\u8bba\u5e26\u4e0b\u6765\uff0c\u53ef\u4ee5\u5f97\u51fa $k_1 = k_2 = k_3$ \uff0c\u6240\u4ee5\u7b2c\u4e00\u4e2a\u6570\u548c\u6700\u540e\u4e00\u4e2a\u6570\u7684\u5dee\u4fbf\u4e3a $3 \\times 2^{k_1}$ \uff0c\u663e\u7136\u4e0d\u4e3a $2$ \u7684\u5e42\u6b21\u65b9\uff0c\u6240\u4ee5\u96c6\u5408\u5185\u4e2a\u6570\u4e3a $4$ \u7684\u65f6\u5019\u65e0\u89e3\u3002\n\n\u5bf9\u4e8e\u96c6\u5408\u5185\u5143\u7d20\u4e2a\u6570 $> 4$ \u7684\uff0c\u5176\u4e2d\u5fc5\u5b9a\u6709\u4e00\u4e2a\u5b50\u96c6\u542b\u6709 $4$ \u4e2a\u5143\u7d20\uff0c\u8fd9\u662f\u65e0\u89e3\u7684\u3002\n\n\u7efc\u4e0a\uff0c\u53ea\u6709\u5728\u96c6\u5408\u5185\u5143\u7d20\u4e2a\u6570 $\\leq 3$ \u65f6\u6709\u89e3\u3002\n\n\u6709\u4e86\u8fd9\u4e00\u7ed3\u8bba\uff0c\u518d\u5199\u8fd9\u9053\u9898\u5c31\u4e0d\u96be\u4e86\u3002\u6211\u4eec\u53ea\u9700\u8981\u66b4\u529b\u679a\u4e3e\u96c6\u5408\u5185\u5143\u7d20\u4e2a\u6570\u5373\u53ef\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\nusing namespace std;\nconst int N=2e5+10;\nll n,m,lt,rt,a[N];\ninline int llread(){\n    ll s=0,f=1;\n    char ch=getchar();\n    while(ch>'9'||ch<'0') {\n        if(ch=='-') f=-1;\n        ch=getchar();\n    }\n    while(ch<='9'&&ch>='0'){s=(s<<3)+(s<<1)+(ch^48);ch=getchar();}\n    return s*f;\n}\nint main(){\n    n=llread();\n    for(register int i=1;i<=n;++i) a[i]=llread();\n    sort(a+1,a+n+1);\n    for(register ll i=2;i<n;++i){\n        for(register ll j=0;j<=30;++j){//\u6211\u4eec\u5df2\u7ecf\u8bc1\u8fc7\uff0c\u4ed6\u4eec\u4e24\u4e24\u4e4b\u95f4\u5dee\u76f8\u7b49\uff0c\u6240\u4ee5\u6211\u4eec\u679a\u4e3e2^d\uff0c\u4ee5a[i]\u4e3a\u4e2d\u95f4\u7684\u6570\uff0c\u4e8c\u5206\u67e5\u627e\u4e00\u4e0b\u5373\u53ef\n            lt=lower_bound(a+1,a+i,a[i]-(1ll<<j))-a;\n            rt=lower_bound(a+i+1,a+n+1,a[i]+1ll*(1<<j))-a;\n            if(a[lt]==a[i]-1ll*(1<<j)&&a[rt]==a[i]+1ll*(1<<j)){\n                printf(\"3\\n\");\n                printf(\"%lld %lld %lld\",a[lt],a[i],a[rt]);\n                return 0;\n            }\n        }\n    }\n    for(register ll i=2;i<=n;++i){//\u679a\u4e3e\u4e24\u4e2a\u6570\u7684\u65b9\u6848\n        for(register ll j=0;j<=30;++j){\n            lt=lower_bound(a+1,a+i,a[i]-1ll*(1<<j))-a;\n            if(a[lt]==a[i]-(1ll<<j)){\n                printf(\"2\\n\");\n                printf(\"%lld %lld\",a[i],a[lt]);\n                return 0;\n            }\n        }\n    }\n    printf(\"1\\n%lld\",a[1]);\n    return 0;\n}\n```\n",
        "postTime": 1637108922,
        "uid": 428089,
        "name": "HMZHMZHMZ",
        "ccfLevel": 7,
        "title": "CF988D\u9898\u89e3"
    },
    {
        "content": "\u867d\u7136\u662fD\u9898\uff0c\u4f46\u662f\u4e5f\u4e0d\u662f\u5f88\u96be\u3002\n\u6ca1\u6709\u4ec0\u4e48\u601d\u7ef4\u542b\u91cf\uff0c\u5c31\u662f\u5f00\u4e00\u4e2aset\u7136\u540e\u8840\u8165\uff08\uff09\u5730\u641c\u7d22\u5c31\u597d\u4e86\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nlong long a[200005];\nset<long long>st;\nint main()\n{\n    int n;\n    scanf(\"%d\",&n);\n    for(int i=1;i<=n;i++)\n    {\n    \tscanf(\"%lld\",&a[i]);\n    \tst.insert(a[i]);\n    }\n    for(int i=1;i<=n;i++)\n        for(long long j=1;j<=2e9;j*=2)\n        {\n        \tif(st.count(a[i]+j)&&(st.count(a[i]+j+j)))\n        \t{\n        \t\tcout<<3<<endl;\n        \t\tcout<<a[i]<<' '<<a[i]+j<<' '<<a[i]+j+j;\n        \t\treturn 0;\n            }\n        }\n    for(int i=1;i<=n;i++)\n        for(long long j=1;j<=2e9;j*=2)\n        {\n        \tif(st.count(a[i]+j))\n        \t{\n        \t\tcout<<2<<endl;\n        \t\tcout<<a[i]<<' '<<a[i]+j;\n        \t\treturn 0;\n            }\n        }\n    cout<<1<<endl;\n    cout<<a[1];\n    return 0;\n}\n```\n",
        "postTime": 1563507172,
        "uid": 68030,
        "name": "serverkiller",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF988D \u3010Points and Powers of Two\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF988D)\n## \u601d\u8def\n\u6211\u5148\u63a8\u4e86\u4e00\u4e2a $\\verb!DP!$\uff0c\u8bbe $f_{i,j}$ \u4e3a\u5230\u7b2c $i$ \u4e2a\u6570\u4e3a\u6b62\uff0c\u6700\u5927\u5dee\u503c\u4e3a $2^j$ \u7684\u6700\u5927\u957f\u5ea6\uff0c\u7136\u540e\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u8981\u770b\u5728 $i$ \u7684\u524d\u9762\u662f\u5426\u6709\u4e00\u4e2a\u6570 $a_k$ \u4e3a $a_i-2^j$\uff0c\u5982\u679c\u6709\u7684\u8bdd\u5c31\u8f6c\u79fb\u4e3a $f_{i,j}=\\max(f_{k,j}+1)$\uff0c\u7136\u540e\u8bb0\u5f55\u4e00\u4e0b\u524d\u9a71\u3002\n\n\u7136\u540e\u7ec8\u4e8e\u6211\u53d1\u73b0\u8fd9\u4e2a\u4e1c\u897f\u6700\u5927\u503c\u53ea\u6709 $3$\uff0c\u6211\u4eec\u4e0d\u59a8\u8bbe\u8fd9\u4e09\u4e2a\u6570\u4e3a $x,y,z$\uff0c\u5176\u4e2d $y=x+2^a,z=x+2^b$\uff0c\u5219\u8fd9\u4e09\u4e2a\u6570\u5b9e\u9645\u4e0a\u53ef\u4ee5\u8868\u793a\u4e3a $x,x+2^a,x+2^b$\uff0c\u73b0\u5728\u6211\u4eec\u8981\u518d\u52a0\u8fdb\u6765\u4e00\u4e2a\u6570\uff0c\u4e0d\u59a8\u8bbe\u4e3a $x+2^c,c>a$\uff0c$x+2^c-(x+2^a)=2^c-2^a=2^a \\times (2^c-1)$\uff0c\u663e\u7136 $c>0$\uff0c\u56e0\u4e3a $a \\ge 0$\uff0c\u6240\u4ee5 $2^c-1$ \u662f\u4e2a\u5947\u6570\uff0c\u6240\u4ee5 $2^a \\times (2^c-1)$ \u4e5f\u662f\u4e2a\u5947\u6570\uff0c\u4e0d\u53ef\u80fd\u662f $2$ \u7684\u6574\u6570\u6b21\u5e42\u3002\n## \u4ee3\u7801\n\u56e0\u4e3a\u52a0\u4e86 $\\verb!STL!$\uff0c\u6240\u4ee5\u8dd1\u7684\u5f88\u6162\u3002\n```cpp\n//A tree without skin will surely die. \n//A man without face is invincible.\n#include<bits/stdc++.h>\n#define int long long\n#define rint register int\nusing namespace std;\nint const N=2e5+10;\nint ans=1,ans1,ans2,a[N];\nmap<int,int>mp;\nsigned main(){\n    ios::sync_with_stdio(false);\n    cout.tie(0),cout.tie(0);\n    int n;cin>>n;\n    for (int i=1;i<=n;++i) cin>>a[i];\n    sort(a+1,a+n+1);\n    for (int i=1;i<=n;++i){\n        mp[a[i]]=1;\n        for (int j=0;(1LL<<j)<=2000000000;++j){\n            if (mp[a[i]-(1LL<<j)] && mp[a[i]-(1LL<<(j+1))]){\n                cout<<\"3\\n\";cout<<a[i]-(1LL<<(j+1))<<' '<<a[i]-(1LL<<j)<<' '<<a[i]<<'\\n';\n                return 0;\n            }\n            if (mp[a[i]-(1LL<<j)]){\n                if (ans<2) ans=2,ans1=a[i],ans2=a[i]-(1LL<<j);\n            }\n        }\n    }\n    if (ans==1) cout<<1<<'\\n'<<a[1]<<'\\n';\n    else cout<<2<<'\\n'<<ans1<<' '<<ans2<<'\\n';\n    return 0;\n}\n\n```\n",
        "postTime": 1661936529,
        "uid": 253608,
        "name": "Tx_Lcy",
        "ccfLevel": 7,
        "title": "CF988D Points and Powers of Two"
    },
    {
        "content": "## \u601d\u8def\n\n\u9996\u5148\u7ed9\u51fa\u7ed3\u8bba\uff1a\u6ee1\u8db3\u8981\u6c42\u7684\u6700\u591a\u6570\u5b57\u6570\u5c0f\u4e8e\u7b49\u4e8e $3$\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u8bbe $1<j<k$\uff0c\u8003\u8651\u5f53\u6211\u4eec\u9009\u51fa $(i,j,k)$ \u540e\uff0c$j-i=2^x$\uff0c$k-j=2^y$\uff0c\u8981\u60f3\u8ba9 $2^x+2^y=2^z$\uff0c\u5fc5\u987b\u6ee1\u8db3 $x=y=z-1$\u3002\u6545\u5bf9\u4e8e\u6240\u6709\u7b26\u5408\u8981\u6c42\u7684\u4e09\u5143\u7ec4 $(i,j,k)$\uff0c$j-i=k-j$\u3002\n\n\u53cd\u8bc1\uff0c\u82e5\u6ee1\u8db3\u8981\u6c42\u7684\u6700\u591a\u6570\u5b57\u6570\u662f $4$\uff0c\u5219\u5b58\u5728\u6ee1\u8db3\u8981\u6c42\u7684 $(i,j,k,l)$\uff0c\u5373 $j-i=k-j=l-k=2^x$\uff0c\u5bb9\u6613\u53d1\u73b0 $l-i=3\\times2^x\\not=2^y$\uff0c\u6240\u4ee5\u4e0d\u7b26\u5408\u6761\u4ef6\u3002\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u53ea\u9700\u8981\u679a\u4e3e\u5dee $2^x$ \u5373\u53ef\uff0c\u6ce8\u610f\u4f7f\u7528 $\\texttt{map}$ \u53ef\u80fd\u4f1a $\\texttt{MLE}$\uff0c\u5efa\u8bae\u6392\u5e8f\u540e\u4e8c\u5206\u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(n\\log a_i\\log n)$\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define int long long\n#define double long double\n#define mid ((l+r)>>1)\nusing namespace std;\nmap<int,int> mp;\nint maxv,ans1,ans2,ans3;\nint a[200005];\nsigned main(){\n\tint n;\n\tcin>>n;\n\tfor(int i=1;i<=n;i++) cin>>a[i];\n\tsort(a+1,a+n+1);\n\tmaxv=1,ans1=a[1];\n\tfor(int i=1;i<=n;i++){\n\t\tfor(int j=0;j<31;j++){\n\t\t\tint l=(1<<j);\n\t\t\tif(a[lower_bound(a+1,a+n+1,a[i]+l)-a]==a[i]+l&&lower_bound(a+1,a+n+1,a[i]+l)-a<=n){\n\t\t\t\tif(maxv<=1){\n\t\t\t\t\tmaxv=2,ans1=a[i],ans2=a[i]+l;\n\t\t\t\t}\n\t\t\t\tif(a[lower_bound(a+1,a+n+1,a[i]+l*2)-a]==a[i]+l*2&&lower_bound(a+1,a+n+1,a[i]+2*l)-a<=n){\n\t\t\t\t\tif(maxv<=2){\n\t\t\t\t\t\tmaxv=3,ans1=a[i],ans2=a[i]+l,ans3=a[i]+l*2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tcout<<maxv<<endl;\n\tif(maxv>=1) cout<<ans1<<\" \";\n\tif(maxv>=2) cout<<ans2<<\" \";\n\tif(maxv>=3) cout<<ans3<<\" \";\n\treturn 0;\n}\n```",
        "postTime": 1659195917,
        "uid": 116664,
        "name": "Daniel_lele",
        "ccfLevel": 8,
        "title": "CF988D \u9898\u89e3"
    },
    {
        "content": "\u9996\u5148\uff0c\u76f4\u89c9\u544a\u8bc9\u6211\u4eec\uff0c\u9009\u4e2d\u70b9\u96c6\u7684\u5927\u5c0f\u4e0d\u8d85\u8fc73\u3002\n\n\u8bc1\u660e\uff1a\n\n\u8bbe\u9009\u4e2d\u70b9\u96c6\u4e3a{a, b, c, d}\n\na--b--c--d\n\n\u8bbedis(a, b)=2^m,dis(b, c)=2^n\n\n\u82e5m!=n\uff1a\n\u4e0d\u59a8\u8bbem<n\uff0c\n\n\u5219dis(a, c)=2^m+2^n=2^m+2^m*2^(n-m)\n\n=2^m*(2^(n-m)+1)!=2^k\n\n\u2234m=n\n\u2234dis(a, b)=dis(b, c)=2^n, dis(a, c)=2^(n+1)\n\n\u540c\u7406\uff0c\u5bf9\u4e8eb, c, d, dis(b, c)=dis(c, d)=2^n, dis(b, d)=2^(n+1)\n\n\u2234dis(a, d)=2^n+2^n+2^n=3*2^n!=2^k\n\n\u2234\u9009\u4e2d\u70b9\u96c6\u5927\u5c0f<4\n\n\u7136\u540e\u5c31\u597d\u529e\u4e86\u3002\u679a\u4e3e\u4e2d\u95f4\u90a3\u4e2a\u70b9\uff0c\u7136\u540e\u679a\u4e3e\u5230\u4e24\u8fb9\u7684\u70b9\u7684\u8ddd\u79bbn,\u4e8c\u5206check\u4e00\u4e0b\u3002\n\n\u590d\u6742\u5ea6n*(logn)^2\n\n```cpp\n#include <cstdio>\n#include <algorithm>\n\nint arr[300000];\nint a[300000];\nint v[300000];\nint min,max;\nint n;\n\nint check(long long v) {\n\tif (v<min||v>max) return -1;\n\tint l=1; int r=n;\n\tint ans=-1;\n\twhile (l<=r) {\n\t\tint mid=(l+r)>>1;\n\t\tif (a[mid]==v) return mid;\n\t\tif (a[mid]<v) l=mid+1;\n\t\tif (a[mid]>v) r=mid-1;\n\t}return -1;\n}\n\nint main() {\n\tscanf(\"%d\", &n);\n\tfor (int i=1;i<=n;++i) {\n\t\tscanf(\"%d\", &arr[i]);\n\t\tmin=std::min(arr[i], min);\n\t\tmax=std::max(max, arr[i]);\n\t}std::sort(arr+1, arr+n+1);\n\tint cnt=1; int tail=0;\n\tfor (int i=1;i<=n;++i) {\n\t\tif (arr[i]!=arr[i+1]||i==n) {\n\t\t\ta[++tail]=arr[i];\n\t\t\tv[tail]=cnt;\n\t\t\tcnt=1;\n\t\t} else cnt++;\n\t}\n\tif (n==1) {\n\t\tprintf(\"%d\\n%d\", 1, arr[1]);\n\t\treturn 0;\n\t}n=tail;\n\tint ans=0; int ans0=0; int ans1=0; int ans2=0;\n\tfor (int i=1;i<=tail;++i) {\n\t\tfor (long long j=1; j<=1073741824; j<<=1) {\n\t\t\tint lp=check(a[i]-j); int rp=check(a[i]+j);\n\t\t\tint sum=v[i]; if (lp>0) sum+=v[lp];\n\t\t\tif (rp>0) sum+=v[rp];\n\t\t\tif (sum>ans) {\n\t\t\t\tans=sum;\n\t\t\t\tans0=lp; ans1=i; ans2=rp;\n\t\t\t}//if (lp<0&&rp<0) break;\n\t\t}\n\t} printf(\"%d\\n\", ans);\n\tif (ans0>0) \n\t\tfor (int i=1;i<=v[ans0];++i) printf(\"%d \", a[ans0]);\n\tif (ans1>0) \n\t\tfor (int i=1;i<=v[ans1];++i) printf(\"%d \", a[ans1]);\n\tif (ans2>0) \n\t\tfor (int i=1;i<=v[ans2];++i) printf(\"%d \", a[ans2]);\n\treturn 0;\n}\n```",
        "postTime": 1527912095,
        "uid": 48355,
        "name": "EternalAlexander",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF988D \u3010Points and Powers of Two\u3011"
    }
]
[
    {
        "content": "# Description\n\n\u5f00\u59cb\u6709\u4e24\u4e2a\u6570\uff0c\u6bcf\u6b21\u64cd\u4f5c\u4f60\u8981\u6539\u6389\u5176\u4e2d\u7684\u4e00\u4e2a\u6570\uff0c\u4f7f\u8fd9\u4e24\u4e2a\u6570\u59cb\u7ec8\u5728 $\\left [ a_{l,i},b_{l,i} \\right ] $ \u548c $\\left [ a_{r,i},b_{r,i} \\right ] $ \u4e2d\u3002\n\n[\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1539E)\n\n# Solution \n\n\u8fd9\u91cc\u8bb2\u7684\u662f $O(n)$ \u505a\u6cd5\u3002\n\n\u6211\u4eec\u628a\u7b54\u6848\u770b\u505a\u4e00\u6bb5 0 \uff0c\u4e00\u6bb5 1 \u7684\u4e00\u4e2a\u4e32\u3002\n\n\u5982\u679c\u8bf4\uff0c\u6211\u4eec\u7684\u7b54\u6848\u4e32\u91cc\u9762\u6709\u4e00\u4e32 0\uff08 1 \u540c\u7406\uff09\uff0c\u6bd4\u65b9\u8bf4\u662f $[l,r]$ ,\u90a3\u4e48\u8fd9\u4e00\u6bb5\u7ed9\u51fa\u7684\u6bcf\u4e2a\u6570 $k_i$ \u4e00\u5b9a\u6ee1\u8db3\u8fd9\u6837\u7684\u6761\u4ef6\n\n- $a_{0,i} \\le k_i \\le b_{0,i}$ \n- $a_{1,i} \\le k_{l-1} \\le b_{0,i}$ \n\n\u7528\u4eba\u8bdd\u8bf4\uff0c\u6240\u6709\u6570\u90fd\u6ee1\u8db3 0 \u7684\u8303\u56f4\uff0c $l$ \u7684\u524d\u4e00\u4e2a\u6570\u6ee1\u8db3 1 \u7684\u8303\u56f4\u3002\uff08\u56e0\u4e3a\u4f60\u4e00\u6bb5 0 \u4e4b\u524d\u5fc5\u7136\u662f\u4e00\u6bb5 1 \uff09\u3002 \n\n\u56e0\u4e3a\u4f60\u4e00\u4e2a\u6570\u6539\u53d8\u4e86\u4e4b\u540e\u662f\u8981\u6ee1\u8db3\u540e\u9762\u7684\u6761\u4ef6\uff0c\u4e0e\u524d\u9762\u7684\u9650\u5236\u65e0\u5173\uff0c\u6240\u4ee5\u8fd9\u9898\u6211\u4eec\u53ef\u4ee5**\u4ece\u540e\u5f80\u524d\u626b**\uff0c\u4e0d\u65ad\u7684\u7f29\u5c0f\u6761\u4ef6\u8303\u56f4\u3002\n\n\u626b\u7684\u8fc7\u7a0b\u4e2d\uff0c\u7ef4\u62a4\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u7684\u533a\u95f4\uff0c\u626b\u5230\u7684\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u5047\u8bbe\u4f5c\u4e3a\u4e0a\u9762\u8bf4\u7684 $l-1$ \u8bd5\u8bd5\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u884c\u4e0d\u884c\uff0c\u5982\u679c\u884c\u7684\u8bdd\u5c31\u8f6c\u79fb\u3002\u5f53\u7136\u4f60\u4e5f\u8981\u7ef4\u62a4\u5982\u679c\u5f53\u524d\u4f4d\u7f6e\u4f5c\u4e3a $i$  \uff0c\u7b2c\u4e00\u4e2a\u6761\u4ef6\u662f\u5426\u59cb\u7ec8\u6ee1\u8db3\uff0c\u53ef\u4ee5\u7528 & \u8fd0\u7b97\u6765\u7ef4\u62a4\u3002\n\n\u5177\u4f53\u7684\u7b97\u6cd5\u5b9e\u73b0\u8fc7\u7a0b\u770b\u4ee3\u7801\u3002\n\n# Analysis\n\n\u8fd9\u4e2a\u8fc7\u7a0b\u6211\u4eec\u628a\u6240\u6709\u7684 $k$ \u626b\u4e86\u4e00\u904d\uff0c\u590d\u6742\u5ea6 $O(n)$ \u3002\n\n# Code\n\n\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u662f\u8fd9\u9898\u5230\u76ee\u524d\u4e3a\u6b62\u89e3\u91ca\u6700\u6e05\u695a\u7684\u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline void read(int& x)\n{\n\tx=0;int y=1;char ch=getchar();\n\twhile(ch<'0'||ch>'9'){if(ch=='-')y=-1;ch=getchar();}\n\twhile(ch>='0'&&ch<='9'){x=x*10+ch-'0';ch=getchar();}\n\tx=x*y;\n}\nconst int N=100010;\nint n,m,mn[2],l[N][2],r[N][2],L[2],R[2],a[N],fir[2],both[2],pre[N][2];\nint main(){\n\tread(n),read(m);\n\t//\u53cb\u60c5\u63d0\u9192\uff1a\u5b9a\u4e49\u6570\u7ec4\u7684\u5730\u65b9\u7785\u4e00\u773c\uff0c\u6240\u6709\u6570\u7ec4\u957f\u5ea6\u90fd\u662f2\u54e6 \n\t//0\u548c1\u6b63\u597d\u8868\u793a\u5de6\u624b\u53f3\u624b\u4e24\u4e2a\u6570 \n\tmn[1]=mn[0]=n+1,fir[0]=fir[1]=1,L[0]=L[1]=0,R[1]=R[0]=m;\n\t//mn\u8868\u793a\u4e0a\u4e00\u4e2a0/1\u7684\u4f4d\u7f6e\uff0c\u8f6c\u79fb\u7528\u7684\uff08min\u7f29\u5199\uff0c\u6700\u8fd1\u7684\u4f4d\u7f6e\uff09 \n\t//fir\u8868\u793a\uff0c\u5f53\u524d\u4f4d\u7f6e\u662f\u5426\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6\uff08first\u7f29\u5199\uff09 \n\t//L\u8868\u793a\u4ece\u4e0a\u4e00\u4f4d\u7f6e\u8fc7\u6765\u4e2d\u6700\u5927\u7684L\uff0cR\u540c\u7406\uff0c\u8fd9\u6837k_i\u5982\u679c\u6ee1\u8db3[L,R]\u7684\u533a\u95f4\u5c31\u6ee1\u8db3\u4e86\u540e\u9762\u4e00\u6bb5\u7684\u533a\u95f4 \n\tfor(int i=1;i<=n;i++)read(a[i]),read(l[i][0]),read(r[i][0]),read(l[i][1]),read(r[i][1]);\n\tfor(int i=n;i>=1;i--)\n\t{\n\t\tif(a[i]>=l[i][0]&&a[i]<=r[i][0])fir[0]&=1;else fir[0]&=0;\n\t\tif(a[i]>=l[i][1]&&a[i]<=r[i][1])fir[1]&=1;else fir[1]&=0;\n\t\t//\u662f\u5426\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u6761\u4ef6 \n\t\t\n\t\tL[0]=max(L[0],l[i][0]),R[0]=min(R[0],r[i][0]);\n\t\tL[1]=max(L[1],l[i][1]),R[1]=min(R[1],r[i][1]);\n\t\t//\u7f29\u5c0f\u533a\u95f4 \n\t\t\n\t\tif(fir[0]&&a[i-1]>=L[1]&&a[i-1]<=R[1])both[0]=1;else both[0]=0;\n\t\tif(fir[1]&&a[i-1]>=L[0]&&a[i-1]<=R[0])both[1]=1;else both[1]=0;\n\t\t//\u662f\u5426\u4e24\u4e2a\u6761\u4ef6\u90fd\u6ee1\u8db3 \n\t\t\n\t\tif(both[0])pre[i][0]=mn[1];//pre\u8868\u793a\u540e\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u4e5f\u5c31\u662f\u8f6c\u79fb\u8fc7\u6765\u7684\u90a3\u4e2a\u4f4d\u7f6e \n\t\tif(both[1])pre[i][1]=mn[0];//\u662f\u4e0d\u662f\u7528nxt\u4f1a\u66f4\u597d\u7406\u89e3\u4e00\u70b9 \n\t\t//\u90fd\u6ee1\u8db3\uff0c\u8f6c\u79fb \n\t\t\n\t\tif(both[0])mn[0]=i,fir[1]=1,L[0]=0,R[0]=m;\n\t\tif(both[1])mn[1]=i,fir[0]=1,L[1]=0,R[1]=m;\n\t\t//\u8f6c\u79fb\u4e86\uff0c\u91cd\u7f6e \n\t}\n\tif(mn[0]>1&&mn[1]>1)//\u6700\u8fd1\u76840\u548c1\u90fd\u4e0d\u57281\u4f4d\u7f6e\uff0c\u5219\u65e0\u89e3 \n\t{\n\t\tprintf(\"No\\n\");\n\t\treturn 0;\n\t}\n\tprintf(\"Yes\\n\");\n\tint pos=0;\n\tif(mn[0]>1)pos=1;//\u4ecemn\u4e3a1\u7684\u90a3\u4e00\u4f4d\u5f00\u59cb\u5012\u63a8\u5f97\u5230\u7b54\u6848 \n\tfor(int i=1;i<=n;i=pre[i][pos],pos^=1)\n\t{\n\t\tfor(int j=i;j<pre[i][pos];j++)printf(\"%d \",pos);\n\t}\n\treturn 0;\n} \n```\n\n# Conclusion\n\n- \u5bf9\u4e8e\u7b54\u6848\u662f 01 \u4ea4\u9519\u7684\u9898\u76ee\uff0c\u8981\u6709\u628a\u7b54\u6848\u5207\u6210\u8bb8\u591a\u5168 1 \u6216\u5168 0 \u4e32\u7684\u601d\u8def\u3002\n\n- \u5bf9\u4e8e\u503c\u8981\u6ee1\u8db3\u540e\u9762\u4f1a\u51fa\u73b0\u7684\u9650\u5236\u6761\u4ef6\uff0c\u53ef\u4ee5\u8003\u8651\u5012\u7740\u626b",
        "postTime": 1636617173,
        "uid": 284715,
        "name": "\u906e\u4e91\u58d1",
        "ccfLevel": 7,
        "title": "CF1539E Game with Cards \u601d\u7ef4\u9898"
    },
    {
        "content": "\u7b80\u5355\u4f46\u6709\u610f\u601d\u7684\u9898\u3002\n\n\u8fd9\u7bc7\u9898\u89e3\u53ef\u4ee5\u7b97\u662f\u8bb0\u5f55\u4e86\u6211\u7684\u601d\u7ef4\u8fc7\u7a0b\u3002\n\n\u9996\u5148\u4e00\u4e2a\u5e38\u89c1\u5957\u8def\u5c31\u662f\u628a\u7b54\u6848\u5e8f\u5217\u770b\u4f5c\u4e00\u6bb5 $0$\uff0c\u4e00\u6bb5 $1$ \u4ea4\u66ff\u3002\n\n\u8003\u8651\u9700\u8981\u6ee1\u8db3\u4ec0\u4e48\u6761\u4ef6\u3002\n\n\u5bf9\u4e8e\u4e00\u6bb5 $0$\uff0c\u5047\u8bbe\u4e3a $l,r$\uff0c\u663e\u7136 $\\forall i\\in [l,r],a_i\\in [L_{0,i},R_{0,i}]$ \u4e14 $a_{l-1}\\in [L_{1,i},R_{1,i}]$\u3002\n\n\u5bf9\u4e8e\u4e00\u6bb5 $1$ \u53ef\u4ee5\u540c\u7406\u63a8\u51fa\u6761\u4ef6\u3002\n\n\u90a3\u4e48\u5c31\u53ef\u4ee5\u8003\u8651 $dp_{i,0/1}$\uff0c\u8868\u793a\u524d $i$ \u4f4d\uff0c\u7b54\u6848\u7b2c $i$ \u4f4d\u662f $0/1$ \u662f\u5426\u5408\u6cd5\u3002\n\n\u5bf9 $dp_{i,0}$ \u8f6c\u79fb\u65f6\u53ef\u4ee5\u5c1d\u8bd5\u627e\u4e00\u4e2a $j<i$ \u4f7f\u5f97 $dp_{j,1}=1$ \u4e14 $(j,i]$ \u8fd9\u4e00\u6bb5 $0$ \u5408\u6cd5\u3002\u5982\u679c\u80fd\u627e\u5230\u5219 $dp_{i,0}=1$\uff0c\u5426\u5219 $dp_{i,0}=0$\u3002\n\n\u5bf9 $dp_{i,1}$ \u53ef\u4ee5\u540c\u7406\u8f6c\u79fb\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u9884\u5904\u7406 $pos_{i,0/1}$\uff0c\u8868\u793a\u4ece\u7b2c $i$ \u4f4d\u5f80\u540e\u7684\u8fde\u7eed $0/1$ \u6700\u8fdc\u53ef\u4ee5\u5ef6\u4f38\u5230\u4ec0\u4e48\u4f4d\u7f6e\u3002\u8fd9\u4e2a\u53ef\u4ee5\u4f7f\u7528\u500d\u589e\u6216\u4e8c\u5206 $O(n\\log n)$ \u9884\u5904\u7406\u3002\n\n\u7136\u540e\u5c31\u5f88\u5bb9\u6613 $O(n)$ \u5730\u8fdb\u884c dp \u4e86\uff0c\u603b\u590d\u6742\u5ea6 $O(n\\log n)$\u3002\n\n\u4e8e\u662f\u6211\u70b9\u5f00\u5b98\u65b9\u9898\u89e3\uff0c\u5c45\u7136\u53ef\u4ee5 $O(n)$\uff1f\uff1f\uff1f\n\n\u5173\u4e0a\u9898\u89e3\u53c8\u60f3\u4e86\u60f3\uff0c\u4f3c\u4e4e\u53ef\u4ee5\u4ece\u540e\u5f80\u524d\u8003\u8651\u3002\u628a $dp$ \u7684\u610f\u4e49\u6539\u4e3a\u4ece\u7b2c $i$ \u4f4d\u5f80\u540e\u7684\u72b6\u6001\u3002\n\n\u90a3\u4e48\u53ef\u4ee5\u53d1\u73b0\uff0c$dp_{i,0}$ \u53ef\u80fd\u7684\u6700\u4f18\u7684\u8f6c\u79fb\u70b9\u4e00\u5b9a\u662f\u6700\u5c0f\u7684\u4f7f\u5f97 $dp_{j,1}=1$ \u7684 $j$\uff0c\u56e0\u4e3a\u5982\u679c\u4ece\u4e00\u4e2a $j'$ \u53ef\u4ee5\u8f6c\u79fb\u5230 $i$ \u4e14 $j<j'$\uff0c\u90a3\u4e48\u4ece $j$ \u4e5f\u4e00\u5b9a\u80fd\u8f6c\u79fb\u3002\u5bf9 $dp_{i,1}$ \u540c\u7406\u3002\n\n\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u52a8\u6001\u7ef4\u62a4\u5f53\u524d $dp_{i,0}=1$ \u7684\u6700\u5c0f\u7684 $i$ \u4ee5\u53ca $dp_{i,1}=1$ \u7684\u6700\u5c0f\u7684 $i$\u3002\u53ea\u9700\u8003\u8651\u4e2d\u95f4\u8fd9\u4e00\u6bb5\u662f\u5426\u5408\u6cd5\uff0c\u8fd9\u53ef\u4ee5\u5728\u904d\u5386\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u52a8\u6001\u7ef4\u62a4\u51fa\u6765\u3002\u8fd9\u6837\u5c31\u8fbe\u5230\u4e86 $O(n)$ \u7684\u590d\u6742\u5ea6\u3002\n\n\u53c2\u8003\u4ee3\u7801\uff08$O(n)$\uff09\uff1a\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n#define N 100005\nint n,m,mn[2],L1[2],R1[2],a[N],L[N][2],R[N][2],pr[N][2];bool fl,nw[2],tmp[2];\nint main()\n{\n\tscanf(\"%d %d\",&n,&m);\n\tmn[0]=mn[1]=n+1;nw[0]=nw[1]=1;L1[0]=L1[1]=0;R1[0]=R1[1]=m; \n\tfor(int i=1;i<=n;++i)\n\t\tscanf(\"%d %d %d %d %d\",&a[i],&L[i][0],&R[i][0],&L[i][1],&R[i][1]);\n\tfor(int i=n;i;--i)\n\t{\n\t\tnw[0]&=a[i]>=L[i][0] && a[i]<=R[i][0];\n\t\tnw[1]&=a[i]>=L[i][1] && a[i]<=R[i][1];\n\t\tL1[0]=max(L1[0],L[i][1]);R1[0]=min(R1[0],R[i][1]);\n\t\tL1[1]=max(L1[1],L[i][0]);R1[1]=min(R1[1],R[i][0]);\n\t\ttmp[0]=nw[0] && a[i-1]>=L1[0] && a[i-1]<=R1[0];\n\t\ttmp[1]=nw[1] && a[i-1]>=L1[1] && a[i-1]<=R1[1]; \n\t\tif(tmp[0]) pr[i][0]=mn[1];if(tmp[1]) pr[i][1]=mn[0];\n\t\tif(tmp[0]) mn[0]=i,nw[1]=1,L1[1]=0,R1[1]=m;\n\t\tif(tmp[1]) mn[1]=i,nw[0]=1,L1[0]=0,R1[0]=m;\n\t}if(mn[0]>1 && mn[1]>1) {puts(\"No\");return 0;}puts(\"Yes\");fl=mn[0]>1;\n\tfor(int i=1;i<=n;i=pr[i][fl],fl^=1)\n\t\tfor(int j=i;j<pr[i][fl];++j) printf(\"%d \",fl);return 0;\n}\n```",
        "postTime": 1625199266,
        "uid": 119621,
        "name": "Kubic",
        "ccfLevel": 10,
        "title": "CF1539E Game with Cards"
    },
    {
        "content": "[\u9898\u76ee](https://www.luogu.com.cn/problem/CF1539E)\n\n\u9996\u5148\u6211\u7684\u65b9\u6cd5\u5de8\u9ebb\u70e6\uff0c\u8fd8\u4e0d\u597d\u60f3\uff0c\u611f\u89c9\u53ef\u4ee5\u88ab\u5176\u5b83\u9898\u89e3\u7684\u65b9\u6cd5\u540a\u6253\uff0c\u4f46\u8fd8\u662f\u5206\u4eab\u4e00\u4e0b\uff0c\u5c31\u5f53\u62d3\u5bbd\u601d\u7ef4\u548c\u5a31\u4e50\u597d\u4e86\u3002\n\n\u8bbe $f_{i,j}$ \u8868\u793a\u5230\u7b2c $i$ \u4e2a\u64cd\u4f5c\uff0c\u5f53\u524d $a$ \u7684\u6570\u503c\u4e3a $j$ \u662f\u5426\u53ef\u884c\uff0c $g_{i,j}$ \u8868\u793a\u5230\u7b2c $i$ \u4e2a\u64cd\u4f5c\uff0c\u5f53\u524d $b$ \u7684\u6570\u503c\u4e3a $j$\uff0c\u662f\u5426\u53ef\u884c\u3002\u7528 $A_i$ \u8868\u793a\u7b2c $i$ \u4e2a\u64cd\u4f5c\u65f6 $a$ \u7684\u8303\u56f4\uff0c\u540c\u7406 $B_i$\u3002\u90a3\u4e48\u6709\n\n$$f_{i,j} = \\begin{cases}0 & (j \\not\\in A_i) \\\\ f_{i-1,j} & (k_i \\in B_i) \\\\ \\text{or}_{l\\in B_i} \\{g_{i-1,l}\\} & (k_i =j)\\end{cases}$$\n\n$g$ \u7684\u8f6c\u79fb\u65b9\u7a0b\u7c7b\u4f3c\u3002\n\n\u628a DP \u7684\u7b2c\u4e8c\u7ef4\u653e\u5230\u7ebf\u6bb5\u6811\u4e0a\uff0c\u53ea\u8981\u8fd9\u9897\u7ebf\u6bb5\u652f\u6301*\u533a\u95f4\u8d4b\u503c\u3001\u6c42\u533a\u95f4\u6216\u548c* \u5373\u53ef\u5728 $O(\\log n)$ \u7684\u65f6\u95f4\u5185\u8fdb\u884c\u8f6c\u79fb\u3002\n\n\u603b\u5171\u6709\u4e24\u9897\u7ebf\u6bb5\u6811\uff0c\u5728\u8fc7\u7a0b\u4e2d\u7528\u5f7c\u6b64\u7684\u4fe1\u606f\u8fdb\u884c\u72b6\u6001\u8f6c\u79fb\u3002\u6700\u540e\u4efb\u9009\u4e00\u9897\u7ebf\u6bb5\u6811\uff0c\u53ea\u8981\u6574\u68f5\u6811\u7684\u6216\u548c\u4e3a $1$\uff0c\u5c31\u610f\u5473\u7740\u53ef\u884c\uff0c\u5426\u5219\u4e0d\u53ef\u884c\u3002\n\n\u5269\u4e0b\u5c31\u662f\u6c42\u65b9\u6848\u3002\u5728\u8f6c\u79fb\u8fc7\u7a0b\u4e2d\uff0c\u5206\u522b\u7ef4\u62a4 $book_a$ \u548c $book_b$ \u4e24\u4e2a\u6570\u7ec4\uff0c\u8868\u793a\u5728 $i$ \u4e2a\u64cd\u4f5c\uff0c\u5982\u679c\u8ba9 $a/b$ \u53d8\u6210 $k$\uff0c\u90a3\u4e48\u6b64\u65f6 $b/a$ \u7684\u503c\u4e3a\u591a\u5c11\u3002\u5982\u679c\u7ebf\u6bb5\u6811\u652f\u6301\u67e5\u8be2\u533a\u95f4\u5185\u4efb\u610f\u4e00\u4e2a $1$ \u7684\u51fa\u73b0\u4f4d\u7f6e\uff0c\u90a3\u4e48\u8fd9\u4e24\u6570\u7ec4\u5c31\u80fd\u8f7b\u677e\u7ef4\u62a4\u3002\u8003\u8651\u9006\u63a8\u6c42\u51fa\u65b9\u6848\u3002\u5728\u6700\u540e\u7684\u65f6\u5019\uff0c\u4efb\u9009\u4e00\u4e2a\u7b2c\u4e00\u68f5\u6811\u4e3a $1$ \u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u5012\u63a8\uff0c\u7ed3\u5408\u4e0a\u8ff0 $book$ \u6570\u7ec4\u53ef\u4ee5\u627e\u5230\u5bf9\u5e94\u7684 $b$ \u7684\u503c\uff0c\u5e76\u5224\u65ad\u5f53\u524d\u64cd\u4f5c\u662f\u9009\u62e9 $0$ \u8fd8\u662f $1$\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6 $O(n \\log n)$\u3002\u5982\u679c\u4e0d\u592a\u80fd\u7406\u89e3\u4e0a\u8ff0\u8fc7\u7a0b\uff0c\u5efa\u8bae\u53c2\u8003\u4ee3\u7801\u3002\n\n```cpp\nconst int N = 1e5+5;\n#define lb lower_bound\n\nint n, m;\nstruct Node {\n\tint k, al, ar, bl, br;\n} a[N];\nint b[N*5], tot;\nint ans[N];\n\ninline int get(int x) { return lb(b + 1, b + 1 + tot, x) - b; }\n\nstruct SegT {\n\tstruct Node {\n\t\tint l, r, sum, tg;\n\t\t#define ls (p << 1)\n\t\t#define rs (p << 1 | 1)\n\t} t[N*20];\n\tint f[N];//\u8bb0\u5f55\u7b2c i \u6b65\u82e5 a/b \u9009\u62e9\u6210\u4e3a k, \u90a3\u4e48 b/a \u662f\u591a\u5c11 \n\tvoid build(int p, int l, int r) {\n\t\tt[p].l = l, t[p].r = r, t[p].tg = -1;\n\t\tif (l == r) return;\n\t\tint mid = (l + r) >> 1;\n\t\tbuild(ls, l, mid), build(rs, mid + 1, r);\n\t}\n\tinline void push_up(int p) { \n\t\tt[p].sum = t[ls].sum | t[rs].sum; \n\t}\n\tinline void push_down(int p) {\n\t\tif (t[p].tg != -1) {\n\t\t\tt[ls].sum = t[ls].tg = t[p].tg;\n\t\t\tt[rs].sum = t[rs].tg = t[p].tg;\n\t\t\tt[p].tg = -1;\n\t\t}\n\t}\n\tvoid upd(int p, int l, int r, int x) {\n\t\tif (l > r) return;\n\t\tif (l <= t[p].l && t[p].r <= r) \n\t\t\treturn t[p].sum = t[p].tg = x, void();\n\t\tint mid = (t[p].l + t[p].r) >> 1;\n\t\tpush_down(p);\n\t\tif (l <= mid) upd(ls, l, r, x);\n\t\tif (r > mid) upd(rs, l, r, x);\n\t\tpush_up(p);\n\t}\n\tint find(int p, int l, int r) {//\u627e\u5230\u7b2c\u4e00\u4e2a 1 \u7684\u4f4d\u7f6e(\u5176\u5b9e\u4efb\u610f\u4e00\u4e2a\u90fd\u53ef\u4ee5) \n\t\tif (!t[p].sum) return 0;\n\t\tif (t[p].l == t[p].r) return t[p].l;\n\t\tint mid = (t[p].l + t[p].r) >> 1, res = 0;\n\t\tpush_down(p);\n\t\tif (l <= mid) res = find(ls, l, r);\n\t\tif (res) return res;\n\t\tif (r > mid) return find(rs, l, r);\n\t\treturn 0;\n\t}\n} A, B;\n\nint main()\n{\n\tscanf(\"%d%d\", &n, &m);\n\tfor (int i = 1; i <= n; i++) {\n\t\tscanf(\"%d%d%d%d%d\", &a[i].k, &a[i].al, &a[i].ar, &a[i].bl, &a[i].br);\n\t\tb[++tot] = a[i].k, b[++tot] = a[i].al, b[++tot] = a[i].ar, b[++tot] = a[i].bl, b[++tot] = a[i].br;\n\t}\n\tb[++tot] = 0;\n\tsort(b + 1, b + 1 + tot);\n\ttot = unique(b + 1, b + 1 + tot) - b - 1;\n\tfor (int i = 1; i <= n; i++) \n\t\ta[i].k = get(a[i].k), a[i].al = get(a[i].al), a[i].ar = get(a[i].ar), a[i].bl = get(a[i].bl), a[i].br = get(a[i].br);\n\tA.build(1, 1, tot), B.build(1, 1, tot);\n\tA.upd(1, 1, 1, 1), B.upd(1, 1, 1, 1);\n\tfor (int i = 1; i <= n; i++) {\n\t\tint k = a[i].k, al = a[i].al, ar = a[i].ar, bl = a[i].bl, br = a[i].br;\n\t\tint xa = A.find(1, al, ar), xb = B.find(1, bl, br);\n\t\tbool ina = (al <= k && k <= ar), inb = (bl <= k && k <= br);\n\t\tA.upd(1, 1, al - 1, 0), A.upd(1, ar + 1, tot, 0);\n\t\tif (!inb) A.upd(1, al, ar, 0);\n\t\tif (ina && !A.find(1, k, k) && xb) A.upd(1, k, k, 1), A.f[i] = xb;\n\t\tB.upd(1, 1, bl - 1, 0), B.upd(1, br + 1, tot, 0);\n\t\tif (!ina) B.upd(1, bl, br, 0);\n\t\tif (inb && !B.find(1, k, k) && xa) B.upd(1, k, k, 1), B.f[i] = xa;\n\t}\n\tint xa = A.find(1, 1, tot), xb = 0, p = 0;\n\tif (!xa) return printf(\"No\\n\"), 0;\n\tprintf(\"Yes\\n\");\n\tfor (int i = n; i >= 1; i--) {\n\t\tint k = a[i].k;\n\t\tif (!p) {\n\t\t\tif (xa != k || !A.f[i]) xb = k, ans[i] = 1;\n\t\t\telse xb = A.f[i], p = 1, ans[i] = 0;\n\t\t}\n\t\telse{\n\t\t\tif (xb != k || !B.f[i]) xa = k, ans[i] = 0;\n\t\t\telse xa = B.f[i], p = 0, ans[i] = 1;\n\t\t}\n\t}\n\tfor (int i = 1; i <= n; i++) printf(\"%d \", ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1625304484,
        "uid": 138041,
        "name": "cyh_toby",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1539E\u3010Game with Cards\u3011"
    },
    {
        "content": "\u7531\u4e8e\u6bcf\u6b21\u5fc5\u987b\u66ff\u6362\u6070\u597d\u4e00\u4e2a\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u72b6\u6001 $f[0/1][i][j]$ \u8868\u793a\u4e0a\u6b21\u66ff\u6362\u7684\u662f **\u5de6\u624b/\u53f3\u624b**\uff0c\u5f53\u524d\u662f\u7b2c $i$ \u6b21\u8be2\u95ee\uff0c\u6ca1\u6709\u66ff\u6362\u7684\u90a3\u53ea\u624b\u4e0a\u7684\u6570\u7ec4\u662f\u7b2c $j$ \u6b21\u8be2\u95ee\u7684\u6570\uff0c\u662f\u5426\u53ef\u5230\u8fbe\u3002\n\n\u6734\u7d20 $\\rm DP$ \u662f $\\mathcal{O}(N^2)$\u3002\n\n\u8003\u8651\u4f18\u5316\uff0c\u7531\u4e8e\u6bcf\u4e2a\u72b6\u6001\u53ea\u9700\u8981\u77e5\u9053\u662f\u5426\u53ef\u8fbe\uff0c\u5373 $f$ \u662f\u4e00\u4e2a $0/1$ \u6570\u7ec4\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a $i$ \uff0c\u6211\u4eec\u7528 ``set`` \u7ef4\u62a4 $f[0]$ \u548c $f[1]$ \u4e2d\u4e3a $1$ \u7684\u4f4d\u7f6e $j$ \u5373\u53ef\u3002\u65f6\u95f4\u590d\u6742\u5ea6 $\\mathcal{O}(N\\log N)$\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define rep(i,a,b) for(int i=a;i<=b;i++)\n#define pre(i,a,b) for(int i=a;i>=b;i--)\n#define N 200005\nusing namespace std;\nint n,m,u[N],g[2][N];\nset<pair<int,int> >s[2];\ntypedef set<pair<int,int> >::iterator ite;\nvoid calc(int x,int op){\n\tif(!x)return;\n\tint y=g[op][x];\n\tcalc(y,op^1);\n\trep(i,y+1,x)printf(\"%d \",op);\n}\nint main(){\n\tscanf(\"%d%d\",&n,&m);\n\tint la,ra,lb,rb;\n\tscanf(\"%d%d%d%d%d\",&u[1],&la,&ra,&lb,&rb);\n\tif(u[1]>=la&&u[1]<=ra&&!lb)s[0].insert(make_pair(0,0));\n\tif(u[1]>=lb&&u[1]<=rb&&!la)s[1].insert(make_pair(0,0));\n\trep(i,2,n){\n\t\tscanf(\"%d%d%d%d%d\",&u[i],&la,&ra,&lb,&rb);\n\t\tint flag0 = s[0].size() ? 1 : 0 , flag1 = s[1].size() ? 1 : 0;\n\t\tif(flag1)s[0].insert(make_pair(u[i-1],i-1));\n\t\tif(flag0)s[1].insert(make_pair(u[i-1],i-1));\n\t\tif(la<=u[i]&&u[i]<=ra){\n\t\t\twhile(s[0].size()){\n\t\t\t\tite cur = s[0].begin();\n\t\t\t\tif((*cur).first>=lb)break;\n\t\t\t\ts[0].erase(cur);\n\t\t\t}\n\t\t\twhile(s[0].size()){\n\t\t\t\tif((*s[0].rbegin()).first<=rb)break;\n\t\t\t\ts[0].erase(*s[0].rbegin());\n\t\t\t}\n\t\t}\n\t\telse s[0].clear();\n\t\tif(lb<=u[i]&&u[i]<=rb){\n\t\t\twhile(s[1].size()){\n\t\t\t\tite cur = s[1].begin();\n\t\t\t\tif((*cur).first>=la)break;\n\t\t\t\ts[1].erase(cur);\n\t\t\t}\n\t\t\twhile(s[1].size()){\n\t\t\t\tif((*s[1].rbegin()).first<=ra)break;\n\t\t\t\ts[1].erase(*s[1].rbegin());\n\t\t\t}\n\t\t}\n\t\telse s[1].clear();\n\t\tif(s[0].size())g[0][i]=(*s[0].begin()).second;\n\t\tif(s[1].size())g[1][i]=(*s[1].begin()).second;\n\t}\n\tif(s[0].size())puts(\"Yes\"),calc(n,0);\n\telse if(s[1].size())puts(\"Yes\"),calc(n,1);\n\telse puts(\"No\");\n\treturn 0;\n}\n```",
        "postTime": 1624493536,
        "uid": 119261,
        "name": "7KByte",
        "ccfLevel": 0,
        "title": "\u3010\u9898\u89e3\u3011CF1539E Game with Cards"
    },
    {
        "content": "### P.S.\n\u8865 VP \u9898\u3002  \n\n### Description.\n\u5361\u8001\u5e08\u624b\u4e0a\u62ff\u7740\u4e24\u4efd\u4ee3\u7801\uff0c\u90fd\u6709\u4e00\u4e2a\u5206\u6570\u503c\u3002  \n\u521a\u5f00\u59cb\u5361\u8001\u5e08\u4e00\u5206\u90fd\u4e0d\u4f1a\uff0c\u6240\u4ee5\u4e24\u4efd\u4ee3\u7801\u7684\u5206\u6570\u503c\u90fd\u662f $0$\u3002  \n\u6bcf\u6b21\u8001K\u4f1a\u7ed9\u5361\u8001\u5e08\u4e00\u4efd\u4ee3\u7801\uff0c\u5361\u8001\u5e08\u5fc5\u987b\u4e14\u53ea\u80fd\u628a\u4ed6\u7684\u4e00\u4efd\u4ee3\u7801\u5361\u6210\u8001K\u7684\u3002  \n\u4e0d\u8fc7\u6bcf\u6b21\u5361\u8001\u5e08\u4e3a\u4e86\u4e0d\u88ab\u53d1\u73b0\uff0c\u6240\u4ee5\u6bcf\u5361\u5b8c\u4e00\u6b21\u90fd\u5fc5\u987b\u4fdd\u8bc1\u7b2c\u4e00\u4efd\u4ee3\u7801\u7684\u5206\u6570\u5728 $[L_{i,0},R_{i,0}]$ \u4e4b\u95f4\uff0c\u7b2c\u4e8c\u4efd\u5728 $[L_{i,1},R_{i,1}]$ \u4e4b\u95f4\u3002  \n\u95ee\u5361\u8001\u5e08\u80fd\u4e0d\u80fd\u5361\u5230\u6700\u540e\u3002  \n\n### Solution.\n\u9996\u5148\uff0c\u6211\u4eec\u8003\u8651\u628a\u4ed6\u5f53\u505a\u4e00\u6bb5 $0,1$ \u4e32\u3002  \n\u7136\u540e\uff0c\u6a21\u62df\u4e00\u4e0b\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u3002  \n```\n   a  ?\nc1 a  c1  1\nc2 c2 c1  0\nc3 c3 c1  0\n...\nck ck c1  0\n```\n\u5982\u679c\u6709\u4e00\u6bb5**\u6781\u957f** $0$ \u4e32\u662f\u5408\u6cd5\u7684\uff0c\u5f53\u4e14\u4ec5\u5f53\u5982\u4e0b\u4e24\u4e2a\u6761\u4ef6\u540c\u65f6\u6ee1\u8db3\u3002  \n$$\\forall i\\in[l,r],L_{i,0}\\le c_i\\le R_{i,0}$$  \n$$\\forall i\\in[l,r],L_{i,1}\\le c_{l-1}\\le R_{i,1}$$  \n**\u6781\u957f** $1$ \u540c\u7406\u3002  \n\u6211\u4eec\u89c2\u5bdf\u5f0f\u5b50\u53d1\u73b0\uff0c\u5982\u679c\u4ece\u524d\u5f80\u540e\u63a8\uff0c\u5176\u4e2d\u7684 $C_{l-1}$ \u4e0d\u540c\u4f1a\u5bfc\u81f4\u4e0d\u5177\u6709\u5355\u8c03\u6027\u3002  \n\u4f46\u662f\u4ece\u540e\u5f80\u524d\u63a8\u6211\u4eec\u53ea\u9700\u8981\u8bb0\u5f55 $\\max\\{L_{i-1,?}\\}$ \u548c $\\min\\{R_{i-1,?}\\}$ \u7136\u540e\u5c31\u53ef\u4ee5 $O(1)$ \u5224\u65ad\u5f53\u524d\u662f\u5426\u53ef\u884c\uff08\u5bf9\u4e8e\u6761\u4ef6 2\u3002  \n\u6240\u4ee5\u6211\u4eec\u4ece\u540e\u5f80\u524d\uff0c\u8fd9\u6837\u5bf9\u4e8e\u4e00\u4e2a\u8f6c\u79fb\u70b9\uff0c\u5fc5\u5b9a\u662f\u5b83\u540e\u9762\u7684\u4e00\u6bb5\u76f8\u90bb\u533a\u95f4\u53ef\u4ee5\u8f6c\u79fb\u5230\u5b83\u3002  \n\u8fd9\u6837\u5c31\u5177\u6709\u5355\u8c03\u6027\u4e86\uff0c\u53ef\u4ee5\u4f18\u5316\u4e86\u3002  \n\u6211\u4eec\u7ef4\u62a4 $0$ \u548c $1$ \u5206\u522b\u7684\u6700\u540e\u53ef\u884c\u7aef\u70b9\uff0c\u68c0\u67e5\u80fd\u5426\u8f6c\u79fb\u5230\u5f53\u524d\u4f4d\u7f6e\u3002  \n\u7136\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5 $O(n)$ \u626b\u4e00\u904d\u7684\u590d\u6742\u5ea6\u5185 AC \u6b64\u9898\u3002  \n\n### Coding.\n```cpp\n//\u662f\u554a\uff0c\u4f60\u5c31\u662f\u90a3\u53ea\u9b3c\u4e86\uff0c\u6240\u4ee5\u88ab\u4f60\u78b0\u5230\u4ee5\u540e\uff0c\u5c31\u8f6e\u5230\u6211\u53d8\u6210\u9b3c\u4e86{{{\n#include<bits/stdc++.h>\nusing namespace std;typedef long long ll;\ntemplate<typename T>inline void read(T &x)\n{\n\tx=0;char c=getchar(),f=0;\n\tfor(;c<48||c>57;c=getchar()) if(!(c^45)) f=1;\n\tfor(;c>=48&&c<=57;c=getchar()) x=(x<<1)+(x<<3)+(c^48);\n\tf?x=-x:x;\n}/*}}}*/\nconst int N=100005;int n,m,l[N][2],r[N][2],c[N],nx[N][2];\nint main()\n{\n\t//\u4ee5\u4e0b\u4ee3\u7801\u4e2d\uff0cwh \u8868\u793a\u6700\u9760\u524d\u7684\u53ef\u884c\u4f4d\u7f6e\uff0cnw \u8868\u793a\u5f53\u524d\u7b2c\u4e00\u4e2a\u6761\u4ef6\u80fd\u5426\u6ee1\u8db3\n \t//ck \u8868\u793a\u5f53\u524d\u80fd\u5426\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff0cL,R \u5206\u522b\u8868\u793a\u5f53\u524d\u6700\u5927\u5de6\u754c\u548c\u6700\u5c0f\u53f3\u754c\n\tread(n),read(m);int wh[2]={n+1,n+1};for(int i=1;i<=n;i++)\n\t\tread(c[i]),read(l[i][0]),read(r[i][0]),read(l[i][1]),read(r[i][1]);\n\tint nw[2]={1,1},ck[2]={0,0},L[2]={0,0},R[2]={m,m};for(int i=n;i;i--)\n\t{\n\t\tnw[0]&=l[i][0]<=c[i]&&c[i]<=r[i][0],nw[1]&=l[i][1]<=c[i]&&c[i]<=r[i][1];\n\t\tL[0]=max(L[0],l[i][1]),R[0]=min(R[0],r[i][1]),L[1]=max(L[1],l[i][0]),R[1]=min(R[1],r[i][0]);\n\t\tck[0]=nw[0]&&(L[0]<=c[i-1]&&c[i-1]<=R[0]),ck[1]=nw[1]&&(L[1]<=c[i-1]&&c[i-1]<=R[1]);\n\t\t(ck[0]?nx[i][0]=wh[0]:0),(ck[1]?nx[i][1]=wh[1]:0);\n\t\tif(ck[0]) nw[1]=1,wh[1]=i,L[1]=0,R[1]=m;\n\t\tif(ck[1]) nw[0]=1,wh[0]=i,L[0]=0,R[0]=m;\n\t}\n\tif(wh[0]>1&&wh[1]>1) return puts(\"No\"),0;else puts(\"Yes\");\n\tfor(int i=1,p=wh[1]>1;i<=n;i=nx[i][p],p^=1) for(int j=i;j<nx[i][p];j++) printf(\"%c \",'0'|p);\n\treturn putchar('\\n'),0;\n}\n```",
        "postTime": 1626095188,
        "uid": 44805,
        "name": "Leap_Frog",
        "ccfLevel": 7,
        "title": "CF1539E Game with Cards\uff08\u9898\u89e3\uff09"
    },
    {
        "content": "\u6311\u6218\u5168\u7f51\u6700\u52a3\u89e3\uff0c\u72d7\u90fd\u4e0d\u5199\u7684 $\\mathcal{O}(n\\log n)$.\n\n\u663e\u7136\u7684\uff0c\u53ef\u4ee5\u628a\u7b54\u6848\u770b\u4f5c\u4e00\u4e2a $01$ \u5e8f\u5217\uff0c\u6211\u4eec\u8bb0 $f_{0/1,i}$ \u8868\u793a\u7b2c $i$ \u4f4d\u586b $0/1$ \u662f\u5426\u5408\u6cd5\uff0c\u82e5\u5408\u6cd5\uff0c$f_{0/1,i}=1$\uff0c\u5426\u5219\u4e3a $0$\uff0c\u8fd9\u4e2a\u72b6\u6001\u8868\u793a\u4e4b\u6240\u4ee5\u5408\u7406\u662f\u56e0\u4e3a\u6211\u4eec\u8f6c\u79fb\u6240\u5177\u6709\u7684\u7279\u6027\u3002\n\n\u90a3\u4e48\u5f88\u5bb9\u6613\u5c31\u6709\u8f6c\u79fb\uff1a\n\n$$f_{0,i}= \\max_{j<i}\\{f_{j,1}\\times \\operatorname{check}{(j+1,i,0)}\\}$$\n\n$$f_{1,i}= \\max_{j<i}\\{f_{j,0}\\times \\operatorname{check}{(j+1,i,1)}\\}$$\n\n\u5176\u4e2d $\\operatorname{check}{(i,j,0/1)}$ \u8868\u793a $[i,j]$ \u5168\u90e8\u586b $0/1$ \u5e76\u4e14 $i-1$ \u586b $1/0$ \u662f\u5426\u5408\u6cd5\u3002\n\n\u5176\u4e2d $\\operatorname{check}{(i,j,0)}$ \u5408\u6cd5\u5f53\u4e14\u4ec5\u5f53 $\\forall x\\in[i,j],a_{l,x}\\leq k_x\\leq a_{r,x},b_{l,x}\\leq k_{i-1}\\leq b_{r,x}$.$\\operatorname{check}{(i,j,1)}$ \u540c\u7406\u3002\n\n\u8fd9\u4e2a\u4e0d\u96be\u7406\u89e3\u5bf9\u5427\uff0c\u73b0\u5728\u6211\u4eec\u83b7\u5f97\u4e86\u4e00\u4efd $\\mathcal{O}(n^2)$ \u7684\u7b97\u6cd5\u3002\n\n\u4f46\u4ecd\u7136\u53ef\u4ee5\u66f4\u4f18\u79c0\u3002\n\n\u4e0a\u8ff0\u5f0f\u5b50\u662f\u57fa\u4e8e\u88ab\u52a8\u8f6c\u79fb\u7684\u89d2\u5ea6\uff0c\u6211\u4eec\u73b0\u5728\u6211\u4eec\u5c1d\u8bd5\u4ece\u4e3b\u52a8\u89d2\u5ea6\u601d\u8003\u3002\u4ec0\u4e48\u65f6\u5019 $f_{j,1}\\rightarrow f_{0,i}$ \u662f\u53ef\u4ee5\u8f6c\u79fb\u7684\uff0c\u4e5f\u5c31\u662f $\\operatorname{check}{(j+1,i,0)} = 1$.\u5f53\u7136\u4e86\uff0c\u53e6\u4e00\u79cd\u60c5\u51b5\u540c\u7406\u3002\n\n\u6211\u4eec\u53d1\u73b0\u8fd9\u91cc\u7684 $i$ \u662f\u6709\u5355\u8c03\u6027\u7684\uff0c\u4e5f\u5c31\u662f\u8fd9\u91cc\u7684 $f_{j,1}$ \u6240\u53ef\u4ee5\u8f6c\u79fb\u7684\u4f4d\u7f6e\u662f\u8fde\u7eed\u7684\u533a\u95f4\u3002\n\n\u6211\u4eec\u8bb0 $pos_{0/1,i}$ \u8868\u793a\u7b2c $i$ \u4f4d\u586b $1/0$\uff0c\u4e4b\u540e\u586b\u8fde\u7eed\u7684 $0/1$\uff0c\u6700\u591a\u80fd\u586b\u51e0\u4f4d\uff0c\u8fd9\u4e2a $pos$ \u663e\u7136\u662f\u53ef\u4ee5\u4e8c\u5206\u7684\uff0c\u4e8c\u5206\u6210\u7acb\u7684\u6761\u4ef6\u548c\u4e0a\u8ff0 $\\operatorname{check}$ \u6210\u7acb\u7684\u6761\u4ef6\u5b8c\u5168\u4e00\u81f4\u3002\n\n\u5bf9\u4e8e $\\forall x\\in[i,j],a_{l,x}\\leq k_x\\leq a_{r,x}$\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u524d\u7f00\u548c\u6765\u5feb\u901f\u7ef4\u62a4\uff0c\u5bf9\u4e8e $\\forall x\\in[i,j],b_{l,x}\\leq k_{i-1}\\leq b_{r,x}$\uff0c\u6211\u4eec\u5f00 4 \u4e2a st \u8868\u6765\u7ef4\u62a4\u4ed6\u3002\n\n\u4e0b\u9762\u662f\u5982\u4f55\u8f93\u51fa\u65b9\u6848\uff0c\u53ea\u9700\u8981\u8bb0\u5f55\u8f6c\u79fb\u70b9\u5c31\u597d\u4e86\uff0c\u4f46\u662f\u6ce8\u610f\uff0c\u6709\u65f6\u5019\u53ef\u4ee5\u4ece $f_{0/1,0}$ \u8f6c\u79fb\u6765\uff0c\u6b64\u65f6\u9700\u8981\u6ce8\u610f\u4e00\u4e9b\u7ec6\u8282\u3002\n\n\u4ee3\u7801\u957f\u5f97\u5f88\u4e11\uff0c\u8c28\u614e\u98df\u7528\uff1a\n\n```\n// \u6211\u53ea\u60f3\u8981\u62c9\u4f4f\u6d41\u5e74\\\u597d\u597d\u7684 \u8bf4\u58f0\u518d\u89c1\\\u9057\u61be\u611f\u8c22 \u90fd\u56de\u4e0d\u53bb\u6628\u5929\n// Problem: CF1539E Game with Cards\n// Contest: Luogu\n// URL: https://www.luogu.com.cn/problem/CF1539E\n// Memory Limit: 250 MB\n// Author: Fomalhaut\n// Time Limit: 2500 ms\n// \n// Powered by CP Editor (https://cpeditor.org)\n\n#include<bits/stdc++.h>\n#define Maxn 100007\n#define int long long\nusing namespace std;\nint pos[Maxn][2], f[Maxn][2];\nint a[Maxn][2], b[Maxn][2], k[Maxn];\nint n, m;\nint ca[Maxn], cb[Maxn];\nint ans[Maxn];\nint out[Maxn];\nint Maxa[Maxn][21], Mina[Maxn][21], Maxb[Maxn][21], Minb[Maxn][21];\nvoid pre(){\n\tfor(int i = 1; i <= n; i ++){\n\t\tif(k[i] >= a[i][0] && k[i] <= a[i][1]) ca[i] = 1;\n\t\tif(k[i] >= b[i][0] && k[i] <= b[i][1]) cb[i] = 1;\n\t\tca[i] += ca[i - 1];\n\t\tcb[i] += cb[i - 1];\n\t}\n\tfor(int i = 1; i <= n; i ++){\n\t\tMaxa[i][0] = a[i][0];\n\t\tMina[i][0] = a[i][1];\n\t\tMaxb[i][0] = b[i][0];\n\t\tMinb[i][0] = b[i][1];\t\t\n\t}\n\tfor(int j=1;j<=21;j++)\n        for(int i=1;i+(1<<j)-1<=n;i++)\n            Maxa[i][j]=max(Maxa[i][j-1],Maxa[i+(1<<(j-1))][j-1]);\n\tfor(int j=1;j<=21;j++)\n        for(int i=1;i+(1<<j)-1<=n;i++)\n            Mina[i][j]=min(Mina[i][j-1],Mina[i+(1<<(j-1))][j-1]);\n\tfor(int j=1;j<=21;j++)\n        for(int i=1;i+(1<<j)-1<=n;i++)\n            Maxb[i][j]=max(Maxb[i][j-1],Maxb[i+(1<<(j-1))][j-1]);\n\tfor(int j=1;j<=21;j++)\n        for(int i=1;i+(1<<j)-1<=n;i++)\n            Minb[i][j]=min(Minb[i][j-1],Minb[i+(1<<(j-1))][j-1]);            \n}\nint queryama(int l,int r)\n{\n    int k=log2(r-l+1); \n    return max(Maxa[l][k], Maxa[r-(1<<k)+1][k]);\n}\nint queryami(int l,int r)\n{\n    int k=log2(r-l+1); \n    return min(Mina[l][k], Mina[r-(1<<k)+1][k]);\n}\nint querybma(int l,int r)\n{\n    int k=log2(r-l+1); \n    return max(Maxb[l][k], Maxb[r-(1<<k)+1][k]);\n}\nint querybmi(int l,int r)\n{\n    int k=log2(r-l+1); \n    return min(Minb[l][k], Minb[r-(1<<k)+1][k]);\n}\nsigned main(){\n\tcin >> n >> m;\n\tfor(int i = 1; i <= n; i ++){\n\t\tcin >> k[i];\n\t\tcin >> a[i][0] >> a[i][1];\n\t\tcin >> b[i][0] >> b[i][1];\n\t}\n\tpre();\n\tfor(int i = 0; i < n; i ++){\n\t\tint l = i + 1, r = n, ans = 0;\n\t\twhile(l <= r){\n\t\t\tint mid = (l + r) >> 1;\n\t\t\tif(ca[mid] - ca[i] == mid - i && k[i] >= querybma(i + 1, mid) && k[i] <= querybmi(i + 1, mid)){\n\t\t\t\tans = mid; l = mid + 1;\n\t\t\t}else r = mid - 1;\n\t\t}\n\t\tpos[i][0] = ans;\n\t\tif(k[i] < b[i][0] || k[i] > b[i][1]) pos[i][0] = 0;\n\t\tl = i + 1, r = n, ans = 0;\n\t\twhile(l <= r){\n\t\t\tint mid = (l + r) >> 1;\n\t\t\tif(cb[mid] - cb[i] == mid - i &&  k[i] >= queryama(i + 1, mid) && k[i] <= queryami(i + 1, mid)){\n\t\t\t\tans = mid; l = mid + 1;\n\t\t\t}else r = mid - 1;\n\t\t}\n\t\tpos[i][1] = ans;\t\n\t\tif(k[i] < a[i][0] || k[i] > a[i][1]) pos[i][1] = 0;\n\t\t//cout << i << \" \" << pos[i][0] << \" \" << pos[i][1] << endl;\t\n\t}\n\t// int f = 1;\n\t// bool ff = 1;\n\t// for(int i = 1; i < n;){\n\t\t// if(pos[i][f] <= i){\n\t\t\t// ff = 0; break;\n\t\t// }\n\t\t// else i = pos[i][f];\n\t\t// f ^= 1;\n\t// }\n\t// bool fff = 1; f = 0;\n\t// for(int i = 1; i < n;){\n\t\t// //cout << i << f << \" \" << endl;\n\t\t// if(pos[i][f] <= i){\n\t\t\t// fff = 0; break;\n\t\t// }\n\t\t// else i = pos[i][f];\n\t\t// f ^= 1;\n\t// }\t\t\n\t// cout << (ff | fff);\n\t//f[1][0] = (k[1] >= a[1][0] && k[1] <= a[1][1]);\n\t//f[1][1] = (k[1] >= b[1][0] && k[1] <= b[1][1]);\t\n\tint _max0 = 0, _max1 = 0;\n\t//cout << pos[0][0] << \" \" << pos[0][1] << \"!\\n\";\n\t//memset(f, -1, sizeof(f));\n\tf[0][1] = f[0][0] = 1;\n\tfor(int i = 1; i <= n; i ++){\n\t\t//cout << _max0 << \" \" << _max1 << endl;\n\t\tif(pos[_max0][0] >= i && f[_max0][1]) f[i][0] = (_max0 == 0 ? n + 2 : _max0);\n\t\tif(pos[_max1][1] >= i && f[_max1][0]) f[i][1] = (_max1 == 0 ? n + 2 : _max1);\n\t\tif(f[i][1]){\n\t\t\t//_max0 = max(_max0, pos[i][0]);\n\t\t\tif(pos[i][0] > pos[_max0][0]){\n\t\t\t\t_max0 = i;\n\t\t\t}\n\t\t}\n\t\tif(f[i][0]){\n\t\t\t//_max1 = max(_max1, pos[i][1]);\n\t\t\tif(pos[i][1] > pos[_max1][1]){\n\t\t\t\t_max1 = i;\n\t\t\t}\t\t\t\n\t\t}\n \t}\n \t// if(n == 2 && m == 10 && (f[n][0] | f[n][1])){\n \t\t// cout << \"Yes\\n0 1\";\n \t\t// return 0; \n \t// }\n \tcout << ((f[n][0] | f[n][1]) ? \"Yes\\n\" : \"No\\n\");\n \tif(! (f[n][0] || f[n][1])) return 0;\n\tfor(int i = 1; i <= n; i ++){\n\t\t//cout << f[i][0] << \" \" << f[i][1] << endl;\n\t}\n \tint ii = n;\n \tint ff = 0;\n \tint cnt = 0;\n \tans[++ cnt] = n;\n \twhile(f[ii][ff] >= 1){\n \t\t//cout << f[ii][ff] << endl;\n \t\tans[++ cnt] = f[ii][ff];\n \t\tii = f[ii][ff];\n\n \t\tif(ii == n + 2){\n \t\t\tcnt --;\n \t\t\tbreak;\n \t\t}\n  \t\tff ^= 1;\t\t\n \t}\n \tif(ii != n + 2) ans[++ cnt] = 1;\n \tif(ii == n + 2) ans[++ cnt] = 0;\n \tff = 0;\n \tmemset(out, -1, sizeof out);\n \tfor(int i = 2; i <= cnt; i ++){\n \t\tfor(int j = ans[i] + 1; j <= ans[i - 1]; j ++){\n \t\t\tout[j] = ff;\n \t\t}\n \t\tff ^= 1;\n \t}\n \tif(out[1] != -1)\n\t \tfor(int i = 1; i <= n; i ++){\n\t \t\tcout << out[i] << \" \";\n\t \t\tif(i == n) return 0;\n\t \t}\n \tii = n;\n \tff = 1;\n \tcnt = 0;\n \tans[++ cnt] = n;\n \twhile(f[ii][ff] >= 1){\n \t\t//cout << f[ii][ff] << endl;\n \t\tans[++ cnt] = f[ii][ff];\n \t\tii = f[ii][ff];\n\n \t\tif(ii == n + 2){\n \t\t\tcnt --;\n \t\t\tbreak;\n \t\t}\n  \t\tff ^= 1;\t\t\n \t}\n \tif(ii != n + 2) ans[++ cnt] = 1;\n \tif(ii == n + 2) ans[++ cnt] = 0;\n \tff = 1;\n \tmemset(out, -1, sizeof out);\n\n \t\n \tfor(int i = 2; i <= cnt; i ++){\n \t\tfor(int j = ans[i] + 1; j <= ans[i - 1]; j ++){\n \t\t\tout[j] = ff;\n \t\t}\n \t\tff ^= 1;\n \t}\n \tfor(int i = 1; i <= n; i ++){\n \t\tcout << out[i] << \" \";\n \t\tif(i == n) return 0;\n \t}\n \t\n}\n```",
        "postTime": 1657159218,
        "uid": 183026,
        "name": "Cocoly1990",
        "ccfLevel": 0,
        "title": "CF1539E Game with Cards"
    },
    {
        "content": "## CF1539E \u3010Game with Cards\u3011\n\n### \u9898\u610f\n\n+ \u6709\u4e24\u4e2a\u6570 $b,c$\uff0c\u521d\u59cb\u5747\u4e3a $0$\uff1b\n+ $n$ \u6b21\u64cd\u4f5c\uff0c\u7b2c $i$ \u6b21\u628a $a_i$ \u8d4b\u503c\u7ed9 $b$ \u6216 $c$\uff0c\u63a5\u7740\u8981\u6ee1\u8db3 $l_{0,i}\\le b\\le r_{0,i},l_{1,i}\\le c\\le r_{1,i}$\uff1b\n+ \u5224\u65ad\u662f\u5426\u6709\u65b9\u6848\uff0c\u6709\u5c31\u8f93\u51fa\uff1b\n+ $n\\le10^5,a_i\\le10^9$\u3002\n\n### \u505a\u6cd5\n\n\u628a\u8d4b\u503c\u7ed9 $b$ \u7528 0 \u8868\u793a\uff0c\u8d4b\u503c\u7ed9 $c$ \u7528 1 \u8868\u793a\u3002\n\n\u5047\u8bbe\u4e00\u6bb5\u6781\u957f\u7684 0 \u4f4d\u4e8e $[x,y]$\uff0c\u9700\u8981\u6ee1\u8db3\uff1a\n1. \u4efb\u610f $x\\le i\\le y$\uff0c$l_{0,i}\\le a_i\\le r_{0,i}$\uff1b\n2. \u4efb\u610f $x\\le i\\le y$\uff0c$l_{1,i}\\le a_{x-1}\\le r_{1,i}$\u3002\n\n\u8bbe $dp_{0,i}$ \u8868\u793a $i$ \u4e3a\u4e00\u6bb5\u6781\u957f 0 \u7684\u672b\u5c3e\u65f6\uff0c$[1,i]$ \u80fd\u5426\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u53d1\u73b0\u80fd\u8f6c\u79fb\u5230 $dp_{0,i}$ \u7684\u6240\u6709 $j$ \u7684 $a_j$ \u90fd\u4e92\u4e0d\u76f8\u540c\uff0c\u6ca1\u6709\u5355\u8c03\u6027\uff0c\u5f88\u96be\u5feb\u901f\u7ef4\u62a4\u3002\n\n\u4f46\u662f\u53d1\u73b0\u5f53 $x$ \u76f8\u540c\u7684\u65f6\u5019\uff0c$y$ \u8d8a\u5c0f\u8d8a\u5bb9\u6613\u6ee1\u8db3\u5355\u8c03\u6027\uff08\u4e24\u6761\u9650\u5236\u5747\u53d8\u5c11\uff09\uff0c\u53ef\u4ee5\u8003\u8651\u4ece\u540e\u5f80\u524d DP\u3002\n\n\u8bbe $dp_{0,i}$ \u8868\u793a $i$ \u4e3a\u4e00\u6bb5\u6781\u957f 0 \u7684\u5f00\u5934\u65f6\uff0c$[i,n]$ \u80fd\u5426\u6ee1\u8db3\u6761\u4ef6\u3002\n\n\u8bb0\u5f55\u6700\u5c0f\u7684 $i$ \u4f7f $dp_{0,i}=1$\u3002\u52a8\u6001\u7ef4\u62a4\u662f\u5426\u6ee1\u8db3\u8f6c\u79fb\u7684\u6761\u4ef6\uff0c\u6ee1\u8db3\u5373\u8f6c\u79fb\u3002",
        "postTime": 1629609249,
        "uid": 246014,
        "name": "Cutest_Junior",
        "ccfLevel": 6,
        "title": "CF1539E \u3010Game with Cards\u3011"
    }
]
[
    {
        "content": "\u4e0d\u597d\u610f\u601d\uff0c\u53c8\u53cc\u628a\u901a\u8fc7\u7387\u62c9\u4f4e\u4e86\u3002\u5728 CF \u4e0a\u4ea4\u4e86 22 \u6b21\u624d\u8fc7\u3002\u8fd9\u91cc\u7ed9\u51fa\u4e0d\u540c\u7684\u5199\u6cd5\u3002\n\n## \u601d\u8def\n\u89c4\u5f8b\u5176\u4ed6\u9898\u89e3\u5199\u5f97\u90fd\u5f88\u597d\uff0c\u8fd9\u91cc\u4e0d\u9700\u8981\u518d\u8bb2\u8ff0\u5982\u4f55\u63a8\u51fa\u89c4\u5f8b\u3002\u9884\u5904\u7406\u51fa\u524d $5000$ \u4e2a\u7b26\u5408\u8981\u6c42\u7684\u6570\uff08\u5176\u5b9e\u6211\u4e5f\u4e0d\u77e5\u9053\u5904\u7406\u591a\u5c11\u4e2a\u521a\u597d\u591f\uff0c\u5c31\u968f\u4fbf\u5199\u4e86\u4e00\u4e2a\u6570\uff09\u3002\u63a5\u4e0b\u6765\u501f\u7528\u5230\u4e00\u70b9\u5206\u5757\u601d\u60f3\uff0c\u5c06\u6574\u4e2a $[l,r]$ \u533a\u95f4\u62c6\u6210\u4e09\u4e2a\u5927\u90e8\u5206\uff1a\u5de6\u8fb9\u6563\u5757\uff0c\u53f3\u8fb9\u6563\u5757\u4ee5\u53ca\u4e2d\u95f4\u7684\u6574\u5757\u3002\u8fd9\u91cc\u8981\u8fd0\u7528\u4e8c\u5206\u627e\u51fa $l$\uff0c$r$ \u6240\u5728\u7684\u5757 $L$ \u548c $R$ \u4e2d\u3002\n\n\u5bf9\u4e8e\u5de6\u53f3\u7684\u6563\u5757\uff0c\u6570\u5b66\u65b9\u6cd5 $O(1)$ \u5904\u7406\u3002\u5bf9\u4e8e\u4e2d\u95f4\u7684\u6574\u5757\uff0c\u663e\u7136\u6709 $R - L$ \u4e2a\u6574\u5757\uff0c\u6bcf\u5757\u8fdb\u884c\u5355\u72ec\u5904\u7406\u5373\u53ef\u3002\n\n### \u7279\u5224\n\u5f53 $l$ \u4e0e $r$ \u5728\u540c\u4e00\u4e2a\u5757\u65f6\u76f4\u63a5\u66b4\u529b\u5904\u7406\u3002\n\n## \u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\n#include<iostream>\n#include<cstdio>\n#include<string>\n#include<ctime>\n#include<cstring>\n#include<algorithm>\n#include<climits>\n#include<queue>\n#include<map>\n#include<set>\n#include<sstream>\n#include<cassert>\n#define ll long long\n#define inf 0x3f3f3f3f\n#define fr(i , a , b) for(ll i = a ; i <= b ; ++i)\n#define fo(i , a , b) for(ll i = a ; i >= b ; --i)\n#pragma comment(linker , \"/stack : 200000000\")\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,tune=native\")\nusing namespace std;\ninline char gchar()\n{\n    static char buf[1000000] , *p1 = buf , *p2 = buf;\n    return p1 == p2 && (p2 = (p1 = buf) + fread(buf , 1 , 1000000 , stdin) , p1 == p2) ? EOF : *p1++;\n}\ninline ll read()\n{\n    ll x = 0 , f = 1;\n    char ch = getchar();\n    while(ch < '0' || ch > '9')\n\t  {\n        if(ch == '-')\n        {\n        \tf = -1;\n\t\t}\n        ch = getchar();\n    }\n    while(ch >= '0' && ch <= '9')\n\t  {\n        x = (x << 1) + (x << 3) + (ch ^ 48);\n        ch = getchar();\n    }\n    return x * f;\n}\nll l , r;\nll f[100005] , tag;\ninline ll check_l(ll L , ll R , ll x)\n{\n    while(L < R)\n    {\n        ll mid = (L + R) >> 1;\n        if(f[mid] >= x)\n        {\n            R = mid;\n        }\n        else\n        {\n            L = mid + 1;\n        }\n    }\n    return L;\n}\ninline ll check(ll L , ll R , ll x)\n{\n    while(L < R)\n    {\n        ll mid = (L + R + 1) >> 1;\n        if(f[mid] <= x)\n        {\n            L = mid;\n        }\n        else\n        {\n            R = mid - 1;\n        }\n    }\n    return L;\n}\nsigned main()\n{\n    fr(i , 0 , 5000)\n    {\n        f[++tag] = f[i] * 10 + 4;\n        f[++tag] = f[i] * 10 + 7;\n    }\n    l = read();\n    ll L = check_l(0 , tag , l);\n    r = read();\n    ll R = check(0 , tag , r);\n    if(L == R + 1)\n    {\n        printf(\"%lld\" , f[L] * (r - l + 1));\n        system(\"pause\");\n        return 0;\n    }\n    ll sum = 0 , left = (f[L] - l + 1) * f[L] , right = (r - f[R]) * f[R + 1];\n    for(ll i = R - L , block = L + 1 ; i > 0 ; --i , ++block)\n    {\n        sum += (f[block] - f[block - 1]) * f[block];\n    }\n    printf(\"%lld\", left + sum + right);\n    system(\"pause\");\n    return 0;\n}\n/*\n4 7 44 47 74 77 444 447 474 477\n*/\n```",
        "postTime": 1683638899,
        "uid": 461407,
        "name": "\u6731\u91d1\u5e73",
        "ccfLevel": 0,
        "title": "CF121A Lucky Sum \u9898\u89e3"
    },
    {
        "content": "\u4e0d\u5f97\u4e0d\u8bf4\u8fd9\u9053\u9898\u662f\u4e00\u9053\u597d\u9898\uff0c\u65e2\u6709\u4e00\u5b9a\u7684\u601d\u7ef4\u96be\u5ea6\uff0c\u540c\u65f6\u8003\u5bdf\u4ee3\u7801\u5b9e\u73b0\u80fd\u529b\uff0c\u8fd8\u80fd\u8003\u9a8c\u7ec6\u5fc3\u7a0b\u5ea6\n\n\u4f9d\u7167\u9898\u610f\uff0c\u53ea\u542b\u67094\u548c7\u7684\u6570\u5b57\u79f0\u4f5c\u5e78\u8fd0\u6570\uff0c\u4f46\u662f\u6570\u5b57\u8fc7\u5927\uff0c\u6253\u8868\u662f\u80af\u5b9a\u4e0d\u884c\u7684\u4e86\uff0c\u533a\u95f4\u4e2d\u7684\u6570\u4e00\u4e2a\u4e00\u4e2a\u5224\u65ad\u80af\u5b9a\u4f1a\u8d85\u65f6\uff0c\u6240\u4ee5\u6211\u4eec\u5e94\u8be5\u7b97\u51fa\u4e00\u4e2a\u5e78\u8fd0\u6570\u4e0e\u4e0b\u4e00\u4e2a\u5e78\u8fd0\u6570\u4e4b\u95f4\u7684\u533a\u95f4\uff0c\u76f4\u63a5\u4e58\u4ee5\u76f8\u52a0\u5c31\u597d\u4e86\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ninline int read()\n{\n    char ch=getchar();\n    int x=0,f=1;\n    while(ch<'0'||ch>'9')\n    {\n       if(ch=='-') f=-1;\n       ch=getchar();\n    }\n    while(ch>='0'&&ch<='9')\n    {\n       x=x*10+ch-'0';\n       ch=getchar();\n    }\n    return x*f;\n}\nint l,r;\nlong long luck[10000];\nint t=3;\nlong long dfs(int n)//\u8ba1\u7b97\u4ece1\u5230n\u7684\u503c\u4e3a\u591a\u5c11\n{\n    if(n==0)\n        return 0;\n    long long ans=0;\n    for(int i=1;i<=1024;i++)//luck[1000]\u5927\u6982\u5c31\u80fd\u6c34\u8fc7\u53bb\u4e86\uff0c\u4f46\u4fdd\u9669\u8d77\u89c1\uff0c\u5f00\u5927\u4e00\u70b9\n    {\n            if(luck[i]<n)\n            ans+=luck[i]*(luck[i]-luck[i-1]);//n\u8986\u76d6\u4e86\u8fd9\u4e2a\u533a\u95f4\n            else//n\u8fd8\u6ca1\u8986\u76d6\u5b8c\u8fd9\u4e2a\u533a\u95f4\n            {\t\n                ans+=luck[i]*(n-luck[i-1]);\n                break;//\u76f4\u63a5\u9000\u51fa\n            }\n    }\n    return ans;\n}\nint main()\n{\n    l=read();\n    r=read();\n    luck[1]=4;\n    luck[2]=7;\n    for(int i=1;i<=512;i++)//\u9884\u5904\u7406\uff0c\u7b97\u51faluck\u6570\u7ec4\u7684\u503c\n    {\n        luck[t++]=luck[i]*10+4;\n        luck[t++]=luck[i]*10+7;\n    }\n    printf(\"%lld\",dfs(r)-dfs(l-1));//\u76f4\u63a5\u76f8\u51cf\u5c31\u597d\u4e86\n    return 0;\n}\n\n```\n\u4e0d\u5f00long long \u4e00\u573a\u7a7a\uff01\uff01",
        "postTime": 1548590417,
        "uid": 116114,
        "name": "WCG2025",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF121A \u3010Lucky Sum\u3011"
    },
    {
        "content": "\u8fd9\u9053\u9898\u76ee\u5b9e\u9645\u4e0a\u5c31\u662f\u6c42\u8fd9\u4e2a\u5f0f\u5b50\n$$\n\\sum_{i=1}^rnext(i)-\\sum_{j=1}^{l-1}next(j)\n$$\n\n\u53ef\u4ee5\u5148\u9884\u5904\u7406\u51fa\u5904\u4e8e $next(10^9)$ \u5185\u7684\u6240\u6709\u7684 Lucky Number\uff0c\u5373\u9700\u8981\u6c42\u51fa\u7684\u6700\u5927\u7684 Lucky Number \u5373 $4444444444$\u3002\n\n\u56e0\u4e3a\u5176\u5df2\u7ecf\u8d85\u8fc7\u4e86 `int` \u7684\u8303\u56f4 $2147483647$ \uff0c\u6240\u4ee5\u8fd9\u9898\u9700\u8981\u5f00 `long long`\n\n#### \u8ba1\u7b97\u4e0a\u9762\u7684\u5f0f\u5b50\n\n\u53ef\u4ee5\u53d1\u73b0\u5bf9\u4e8e\u4e00\u6bb5\u6570\u5b57\uff0c\u5b83\u4eec\u7684 $next()$ \u662f\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u5206\u6bb5\u8ba1\u7b97\n\n\u5373\u53ef\u5f97\u4e24\u4e2a\u76f8\u90bb\u7684 Lucky Number $l$ \u548c $r$ $(l<r)$ \u4e4b\u95f4\u7684\u6240\u6709\u6570\u7684\u53d6\u503c\u4e3a $r$\n    \n\u6240\u4ee5\u6709\n$$ \n\\sum_{i=l}^r next(i)=r\\times(r-l)\n$$\n\n\u800c\u5f53\u6700\u540e $n$ \u5df2\u7ecf\u5c0f\u4e8e\u5f53\u524d Lucky Number \u65f6\uff0c\u5219\u8ba1\u7b97\u533a\u95f4\u5185\u5269\u4f59\u7684\u6570\u7684\u603b\u548c\uff0c\u5373 $r\\times(n-l)$\n\n\n``` cpp\n#include <bits/stdc++.h>\n\nusing namespace std;\n\nlong long num[10000];\n\nlong long sum(int n) {\n    if (n == 0)\n        return 0;\n    long long res = 0;\n    for (int i = 1;; i++) {\n        if (num[i] < n)\n            res += num[i] * (num[i] - num[i - 1]);\n        else {\n            res += num[i] * (n - num[i - 1]);\n            break;\n        }\n    }\n    return res;\n}\n\nint main() {\n    int l, r;\n    cin >> l >> r;\n    num[1] = 4, num[2] = 7;\n    for (int i = 1, tot = 2; num[i] * 10 + 4 <= (long long)(1e10); i++) {\n        num[++tot] = num[i] * 10 + 4;\n        num[++tot] = num[i] * 10 + 7;\n    }\n    cout << sum(r) - sum(l - 1) << endl;\n    return 0;\n}\n```",
        "postTime": 1602334894,
        "uid": 370805,
        "name": "Insouciant21",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF121A \u3010Lucky Sum\u3011"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://xiaohuang888.github.io/2019/08/07/%E3%80%8E%E9%A2%98%E8%A7%A3%E3%80%8FCodeforces121A%20Lucky%20Sum)\n\n### Description in Chinese\n\n`Petya`\u559c\u6b22`Lucky Number`\u3002\u4ec5\u542b\u6709\u6570\u5b57$4$\u548c$7$\u7684\u6570\u5b57\u662f\u4e00\u4e2a`Lucky Number`\u3002\n\n\u89c4\u5b9a$next(x)$\u7b49\u4e8e\u6700\u5c0f\u7684\u5927\u4e8e\u7b49\u4e8e$x$\u7684`Lucky Number`\u3002\u73b0\u5728Petya\u60f3\u77e5\u9053$next(l) + next(l + 1) + \\cdots + next(r - 1) + next(r)$\n\n### Solution\n\n\u6211\u4eec\u53ef\u4ee5\u5148\u9884\u5904\u7406\u51fa\u6240\u6709\u7684`Lucky Number`\u3002\n\n\u5728\u8be2\u95ee\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u524d\u7f00\u548c\u7684\u601d\u60f3\uff0c\u9898\u76ee\u4e2d\u7684\u8be2\u95ee\u53ef\u8f6c\u6362\u4e3a\uff1a\n\n$$\\sum^{r}_{i = l} \\mathrm{next}(i) = \\sum^{r}_{i = 1}{\\mathrm{next}(i)}- \\sum^{l - 1}_{i = 1}{\\mathrm{next}(i)}$$\n\n\u5f53\u6211\u4eec\u5728\u8be2\u95ee$\\sum^{x}_{i = 1}{\\mathrm{next}(i)}$\u662f\uff0c\u5982\u679c\u4e00\u4e2a\u4e2a\u66b4\u529b\u679a\u4e3e\u4e00\u5b9a\u4f1a\u8d85\u65f6\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u8fde\u7eed\u7684\u4e00\u6bb5\uff08\u7b2c\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e$x$\u7684\u503c\u76f8\u540c\u7684\u6570\uff09\u4e00\u8d77\u52a0\u8d77\u6765\u3002\n\n### Code\n\n```cpp\n#include<iostream>\n#include<algorithm>\n#include<cstdio>\n#include<cstring>\n#include<cmath>\n\nusing namespace std;\n\ntypedef long long LL;\nconst int MAXN = 2005;\nint l, r;\nLL f[MAXN];\ninline void prepare() {//\u9884\u5904\u7406Lucky Number\u7684\u503c\n    f[1] = 4; f[2] = 7;\n    int cnt = 2;\n    for (int i = 1; i <= 512; i++) {\n        f[++cnt] = f[i] * 10 + 4;\n        f[++cnt] = f[i] * 10 + 7;\n    }\n}\ninline LL calc(int x) {//\u8ba1\u7b97\u524dn\u4e2anext(i)\u7684\u503c\n    LL ret = 0;\n    for (int i = 1; i <= 2000; i++) {\n        if (f[i] >= x) {//\u5982\u679c\u8d85\u51fa\u4e86x\uff08\u4e5f\u5c31\u662f\u7d2f\u52a0\u8be2\u95ee\u7684\u4e0a\u754c\uff09\uff0c\u5c31\u52a0\u5b8c\u9000\u51fa\n            ret += f[i] * (x - f[i - 1]);//\u8be2\u95ee\u4e0a\u754c\u7684\u503c\u4e0e\u6700\u5927\u5c0f\u4e8e\u8be2\u95ee\u4e0a\u754c\u7684\u503c\u7684\u5dee\uff0c\u4e5f\u5c31\u662f\u6709\u591a\u5c11\u4e2anext(i)\u8981\u4e00\u8d77\u7d2f\u52a0\n            return ret;\n        } else ret += f[i] * (f[i] - f[i - 1]);//\u5426\u5219\u5c31\u4e00\u6bb5\u4e00\u6bb5\u52a0\uff0c\u589e\u52a0\u7684\u5c31\u662f\u4e24\u4e2a\u76f8\u90bb\u7684Lucky Number\u7684\u5dee\n    }\n    return ret;\n}\nint main() {\n    scanf(\"%d%d\", &l, &r);\n    prepare();\n    printf(\"%lld\\n\", calc(r) - calc(l - 1));\n    return 0;\n}\n```",
        "postTime": 1565184618,
        "uid": 19729,
        "name": "xiaohuang",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF121A \u3010Lucky Sum\u3011"
    }
]
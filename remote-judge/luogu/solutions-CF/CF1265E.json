[
    {
        "content": "\u725b\u903c\u7684\u671f\u671bdp\u3002\n\n\u5bf9\u671f\u671b\u7684\u7406\u89e3\u786e\u5b9e\u52a0\u6df1\u4e86\u3002\n\n\u9996\u5148\u6211\u4eec\u8bbe $dp_i$ \u4e3a**\u5230\u7b2c $i$ \u9762\u955c\u5b50\u540e\u5230\u7b2c $n$ \u9762\u7684\u671f\u671b\u5929\u6570**\u3002\n\n\u6240\u4ee5\u5728\u7b2c $i$ \u9762\u955c\u5b50\u4f1a\u6709\u4e24\u79cd\u60c5\u51b5\u3002\n\n\u7b2c\u4e00\u79cd\uff1a\u955c\u5b50\u56de\u7b54\"\u6f02\u4eae\"\uff0c**\u82b1\u4e00\u5929**\u8d70\u5230\u4e0b\u4e00\u9762\u955c\u5b50\u3002\u8fd9\u79cd\u60c5\u51b5\u7684\u8d21\u732e\u662f $p_i \\times (dp_{i+1}+1)$\u3002\n\n\u7b2c\u4e8c\u79cd\uff1a\u955c\u5b50\u56de\u7b54\"\u4e0d\u6f02\u4eae\"\uff0c**\u82b1\u4e00\u5929**\u8d70\u5230\u7b2c\u4e00\u9762\u955c\u5b50\u3002\u8fd9\u79cd\u60c5\u51b5\u7684\u8d21\u732e\u662f $(1-p_i) \\times (dp_{1}+1)$\u3002\n\n\u4e8e\u662f\n\n$$dp_i=p_i \\times (dp_{i+1}+1)+(1-p_i) \\times (dp_{1}+1)$$\n\n$$=p_i \\times dp_{i+1}+(1-p_i) \\times dp_{1} +1$$\n\n\u5176\u4e2d $dp_{n+1}=0$\u3002\n\n\u7136\u540e\u5c31\u5c34\u5c2c\u4e86\u3002\n\n\u6211\u4eec\u8981\u6c42\u7684\u662f $dp_1$\uff0c\u4f46\u662f\u6211\u4eec\u9012\u63a8dp\u6570\u7ec4\u7684\u65f6\u5019\u8981\u7528\u5230 $dp_1$\u3002\n\n\n\u4e8e\u662f\u6211\u4eec\u5f00\u59cb\u63a8\u5f0f\u5b50\u3002\n\n\u4ece $dp_1$ \u5f00\u59cb\u3002\n\n$$dp_1=p_1 \\times dp_{2}+(1-p_1) \\times dp_{1} +1$$\n\n$$p_1 \\times dp_1=p_1 \\times dp_{2} +1$$\n\n$$dp_1=dp_{2} +\\frac{1}{p_1}$$\n\n\u7136\u540e\u662f $dp_2$\u3002\n\n\n$$dp_2=p_2 \\times dp_{3}+(1-p_2) \\times dp_{1} +1$$\n\n$$dp_2=p_2 \\times dp_{3}+(1-p_2) \\times (dp_{2} +\\frac{1}{p_1}) +1$$\n\n\u5316\u7b80\u53ef\u5f97\uff1a\n\n$$p_2 \\times dp_2=p_2 \\times dp_{3} +\\frac{1}{p_1}-\\frac{p_2}{p_1}+1$$\n\n$$dp_2=dp_{3} +\\frac{1}{p_1p_2}+\\frac{1}{p_2}-\\frac{1}{p_1}$$\n\n\u4e8e\u662f\n\n$$dp_1=dp_{3} +\\frac{1}{p_1p_2}+\\frac{1}{p_2}$$\n\n\u4e8e\u662f\u6211\u4eec\u7ee7\u7eed\u63a8\u4e0b\u53bb\uff0c\u53d1\u73b0 $dp_1=dp_{i+1}+\\sum_{j=1}^i\\prod_{k=i-j+1}^{i}\\dfrac{1}{p_k}$\u3002\n\n\u540e\u9762\u90a3\u4e9b\u4e1c\u897f\u8bf4\u4eba\u8bdd\u5c31\u662f $\\dfrac{1}{p_1p_2\\dots p_i}+\\dfrac{1}{p_2p_3\\dots p_i}+\\dots +\\dfrac{1}{p_{i-1}p_i}+\\dfrac{1}{p_i}$\u3002\n\n\u7136\u540e\u6211\u4eec\u77e5\u9053 $dp_{n+1}=0$\u3002\n\n\u4e8e\u662f\u4ece\u540e\u5f80\u524d\u7b97\u5c31\u7b97\u5b8c\u4e86\u3002\n\n$Code:$\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\n#define vi vector<ll>\n#define fe(i,e) for(ll i=0;i<e.size();i++) \n#define f(i,a,b) for(ll i=a;i<=b;i++)\n#define fn(i,a,b) for(ll i=a;i>=b;i--)\nll qp(ll a,ll b,ll p){\n    ll ans=1;while(b){\n        if(b&1)ans=ans*a%p;\n        a=a*a%p;b>>=1;\n    }return ans;\n}\nll n;ll a[200010],ans,tmp;\nconst ll mod=998244353;\nint main(){\n    scanf(\"%lld\",&n);f(i,1,n)scanf(\"%lld\",&a[i]);tmp=1;\n    fn(i,n,1){\n        tmp=tmp*100%mod*qp(a[i],mod-2,mod)%mod;\n        ans=(ans+tmp)%mod;\n    }printf(\"%lld\",ans);\n    return 0;\n}\n```\n\n",
        "postTime": 1634559126,
        "uid": 90706,
        "name": "_jimmywang_",
        "ccfLevel": 0,
        "title": "CF1265E Beautiful Mirrors"
    },
    {
        "content": "\u8003\u8651\u6b63\u5411\u63a8.\n\n$f(i)$\u8868\u793a\u4ece1\u8d70\u5230$i$(\u5e76\u4e14\u7b2c$i$\u5929\u4e5f\u5feb\u4e50)\u7684\u4ee3\u4ef7.\u663e\u7136$f(n)$\u5373\u4e3a\u6240\u6c42.\n\n\u63a8\u4e00\u4e0b\u5f0f\u5b50(\u5c06$p_i$\u7b80\u5199\u4e3a$p$)\n\n$$f(i)=(f(i-1)+1)\\times p/100+(f(i-1)+1+f(i))\\times (100-p)/100$$\n\n$$100f(i)=(f(i-1)+1)\\times p+(f(i-1)+1+f(i))\\times (100-p)$$\n\n$$0=100(f(i-1)+1)-p\\times f(i)$$\n\n$$f(i)=(f(i-1)+1)\\times 100/p$$\n\n\u65f6\u95f4\u590d\u6742\u5ea6$\\mathcal O(n)$\n```cpp\n/**********/\n#define MAXN 200011\nll f[MAXN];\nconst ll mod=998244353;\nll Qpow(ll a,ll p)\n{\n    ll res=1;\n    while(p)\n    {\n        if(p&1)res=res*a%mod;\n        a=a*a%mod;\n        p>>=1;\n    }\n    return res;\n}\nint main()\n{\n    ll n=read();\n    f[0]=0;\n    for(ll i=1;i<=n;++i)\n    {\n        ll p=read();\n        f[i]=(f[i-1]+1)*100%mod*Qpow(p,mod-2)%mod;\n    }\n    printf(\"%lld\",f[n]);\n    return 0;\n}\n```",
        "postTime": 1586055671,
        "uid": 73142,
        "name": "\u4e07\u5f18",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "\u82e5 $\\LaTeX$ \u5d29\u6389\u8bf7\u6765\u6211\u7684\u535a\u5ba2\u67e5\u770b\uff08\n\n\u63a8\u7684\u8fc7\u7a0b\u6bd4\u8f83\u957f\uff0c\u81ea\u8ba4\u4e3a\u6bd4\u8f83\u597d\u7406\u89e3\uff08\n\n\u671f\u671b dp \u9898\n\n\u4ee4 $f_i$ \u4e3a\u5f53\u524d\u5230\u7b2c $i$ \u4e2a\u955c\u5b50\uff0c\u5e76\u4e14\u73b0\u5728\u5f00\u5fc3\u7684\u671f\u671b\u5929\u6570\n\n\u63a5\u4e0b\u6765\u6709\u4e00\u4e2a\u663e\u7136\u7684\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$\n\\begin{aligned}\nf_i &= (f_{i-1}+1)\\cdot \\frac {p_i}{100}+2\\cdot (f_{i-1}+1)\\cdot \\frac {p_i}{100}\\cdot (1-\\frac {p_i}{100})+3\\cdot(f_{i-1}+1)\\cdot \\frac{p_i}{100}\\cdot(1-\\frac {p_i}{100})^2+\\cdots \\\\\n&= \\frac {p_i}{100}(f_{i-1}+1)\\sum_{j=1}^\\infty j\\cdot(1-\\frac{p_i}{100})^{j-1} \n\\end{aligned}\n$$\n\u663e\u7136\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f\u540e\u9762\u90a3\u4e00\u5768\u4e1c\u897f\n\n\u8f6c\u5316\u4e00\u4e0b\uff1a\n$$\n\\begin{aligned}\n\\sum_{j=1}^\\infty j\\cdot(1-\\frac{p_i}{100})^{j-1} &= \\sum_{j=1}^{\\infty}\\sum_{k=j}^\\infty(1-\\frac{p_i}{100})^{k-1}\n\\end{aligned}\n$$\n\u53d1\u73b0\u8fd9\u5c31\u662f\u4e2a\u7b49\u6bd4\u6570\u5217\u6c42\u548c\uff0c\u4e8e\u662f\u6709\uff1a\n$$\n\\begin{aligned}\\sum_{j=1}^{\\infty}\\sum_{k=j}^\\infty(1-\\frac{p_i}{100})^{k-1}&=\\sum_{j=1}^\\infty\\frac{100}{p_i}\\times (1-\\frac{p_i}{100})^{j-1}\\\\\n&=\\frac{100}{p_i}\\sum_{j=1}^\\infty (1-\\frac{p_i}{100})^{j-1}\\\\\n&=(\\frac{100}{p_i})^2\n\\end{aligned}\n$$\n\u5e26\u56de\u539f\u5f0f\uff1a\n$$\n\\begin{aligned}\nf_i&= \\frac {p_i}{100}(f_{i-1}+1)\\sum_{j=1}^\\infty j\\cdot(1-\\frac{p_i}{100})^{j-1} \\\\\n&=\\frac{100}{p_i}(f_{i-1}+1)\n\\end{aligned}\n$$\n\u63a5\u4e0b\u6765\u76f4\u63a5\u9012\u63a8\n\n\u7136\u540e\u819c\u6570\u662f\u4e2a\u8d28\u6570\uff0c\u8d39\u9a6c\u5c0f\u5b9a\u7406\u6c42\u9006\u5143\u5373\u53ef",
        "postTime": 1595920086,
        "uid": 65681,
        "name": "UltiMadow",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "### Solution\n\n\u975e\u5e38\u7ecf\u5178\u7684\u4e00\u9053\u671f\u671b$DP$\u9898\u3002\n\n\u671f\u671b$DP$\u7684\u603b\u4f53\u5957\u8def\u4e00\u5b9a\u8981\u4f1a\uff0c\u4e00\u822c\u662f\u7b97\u4ece$i$\u5230$n$\u7684\u671f\u671b\u6216\u4ece$1$\u5230$i$\u7684\u671f\u671b\n\n\u8003\u8651\u8bbe\u7f6e\u72b6\u6001$dp[i]$\u4e3a\u4ece$1\u2192i$\u7684\u671f\u671b\u6b21\u6570\uff0c\u90a3\u4e48\u5f88\u81ea\u7136\u7684\u6709\uff1a\n\n$dp[i]=dp[i-1]*pi+1+(1-pi)(dp[i-1]+1+dp[i])=(dp[i-1]+1)/pi$\n\n\u6211\u4eec\u53d1\u73b0$pi\u00d7100\u2208[0,100]$\u4e4b\u95f4\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\n\u9884\u5904\u7406100\u4e2a\u9006\u5143,\u53ef\u4ee5\u4f7f\u5e38\u6570\u964d\u4f4e\u3002\n\n\n```cpp\n#include<cmath>\n#include<cstring>\n#include<cstdio>\n#include<iostream>\n#include<algorithm>\n#include<queue>\n#include<vector>\n#include<map>\n#define reg register\nusing namespace std;\nconst int maxn=7e7+5;\nconst int mod=998244353;\ninline int read()\n{\n    int x=0,f=1;\n    char ch=getchar();\n    while(ch<'0' || ch>'9')\n    {\n        if(ch=='-')\n        f=-1;\n        ch=getchar();\n    }\n    while(ch>='0' && ch<='9')\n    {\n        x=x*10+ch-'0';\n        ch=getchar();\n    }\n    return x*f;\n}\nint n;\nint p[maxn];\nlong long inv[105];\nlong long dp[maxn];\nint mul(int x,int y,int mod)\n{\n\tlong long res=1;\n\twhile(y)\n\t{\n\t\tif(y & 1)\n\t\tres=res*x%mod;\n\t\tx=x*x%mod;\n\t\ty>>=1;\n\t}\n\treturn res%mod;\n}\nint main()\n{\n\tn=read();\n\tinv[0]=inv[1]=1;\n\tfor(reg int i=2;i<=100;++i)\n\t{\n\t\tinv[i]=inv[mod%i]*(mod-mod/i)%mod;\n\t}\n\tfor(reg int i=1;i<=n;++i)\n\t{\n\t\tp[i]=read();\n\t}\n\tlong long pp=100;\n\tfor(reg int i=1;i<=n;++i)\n\t{\n\t\tdp[i]=pp%mod*(dp[i-1]+1)%mod*inv[p[i]]%mod;\n\t}\n\tprintf(\"%lld\\n\",dp[n]);\n \treturn 0;\n}\n/*\n\n7\n1\n1 2 1 \n1 3 3\n2 4 2\n2 5 5\n2 6 2\n3 7 2\n\n*/\n\n```\n",
        "postTime": 1606309163,
        "uid": 114514,
        "name": "zzr8178541919",
        "ccfLevel": 7,
        "title": "CF1265E \u9898\u89e3"
    },
    {
        "content": "upd\uff1a\u52a0\u4e0a\u4ee3\u7801\u53ca\u4ee3\u7801\u63a8\u5bfc\u8fc7\u7a0b\n\n\u8bbe\u4ece\u7b2c $i$ \u4e2a\u955c\u5b50\u5f00\u59cb\u7684\u671f\u671b\u5929\u6570\u4e3a $f_i$\u3002\u4e0d\u96be\u63a8\u5f97\uff1a\n\n$$f_i = p_i(f_{i+1}+1)+(1-p_i)(f_1+1)$$\n\n\u8fb9\u754c $f_{n+1} = 0$\uff0c\u7b54\u6848\u4e3a $f_1$\u3002\n\n\u5f53 $i = 1$ \u65f6\uff0c$f_1 = f_2+\\frac{1}{p_1}$\u3002\n\n\u5f53 $i = 2$ \u65f6\uff0c$f_1 = f_3+\\frac{1+\\frac{1}{p_1}}{p_2}$\u3002\n\n\u5f53 $i = 3$ \u65f6\uff0c$f_1 = f_4+\\frac{1+\\frac{1+\\frac{1}{p_1}}{p_2}}{p_3}$\u3002\n\n\u63a8\u5f97\uff1a\n\n$$f_1 = \\frac{1+\\frac{1+\\frac{1+\\frac{...}{p_{n-3}}}{p_{n-2}}}{p_{n-1}}}{p_n}$$\n\n$$=\\dfrac{1+p_1+p_1p_2+\\dots +p_1p_2\\dots p_{n-1}}{p_1p_2p_3\\dots p_n}$$\n\n$O(n)$ \u9012\u63a8\uff0c\u9884\u5904\u7406\u4e00\u4e2a\u524d\u7f00\u79ef\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define ll long long\n#define N 200005\n#define mod 998244353\nusing namespace std;\nint n;\nll p[N],s[N];\ninline ll qpow(ll a,ll b){\n\tll res = 1,base = a;\n\twhile(b){\n\t\tif(b&1) res = res*base%mod;\n\t\tbase = base*base%mod;\n\t\tb >>= 1;\n\t}\n\treturn res;\n}\nint main(){\n\tscanf(\"%d\",&n);\n\ts[0] = 1;\n\tfor(int i = 1;i<=n;++i) scanf(\"%lld\",p+i),p[i] = p[i]*qpow(100,mod-2)%mod,s[i] = s[i-1]*p[i]%mod;\n\tll A = 1,B = s[n];\n\tfor(int i = 2;i<=n;++i) A += s[i-1],A %= mod;\n\tprintf(\"%lld\",A*qpow(B,mod-2)%mod);\n\treturn 0;\n}\n```\n",
        "postTime": 1596760680,
        "uid": 114173,
        "name": "Computer1828",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "\u5ba3\u4f20\u535a\u5ba2 $\\to$ [link](https://blog.csdn.net/BWzhuzehao/article/details/113767017)\n\n\u672c\u9898\u4e3a\u671f\u671b DP \u5165\u95e8\u9898\u3002\n\n\u4e3a\u4e86\u65b9\u4fbf\uff0c\u4e0b\u9762\u76f4\u63a5\u8ba4\u4e3a $p_i$ \u5c31\u662f\u6982\u7387\u3002\n\n\u9996\u5148\u8bbe\u72b6\u6001\uff0c$f_i$ \u4e3a\u4ece\u7b2c\u4e00\u9762\u955c\u5b50\u5230\u7b2c $i$ \u9762\u955c\u5b50\u90fd\u9ad8\u5174\u7684\u671f\u671b\u5929\u6570\u3002\n\n\u7136\u540e\u5217\u65b9\u7a0b\uff1a\n\n1. \u7b2c $i$ \u5929\u8be2\u95ee\u5931\u8d25\uff0c\u4ece\u5934\u5f00\u59cb\u3002\n\u6b64\u65f6\u6982\u7387\u4e3a $1-p_i$\uff0c\u6d88\u8017\u5929\u6570\u4e3a $f_{i-1}+1+f_i$\uff0c\u4e8e\u662f\u6982\u7387\u4e58\u4ee3\u4ef7\u4e3a $(1-p_i)(f_{i-1}+1+f_i)$\u3002\n2. \u7b2c $i$ \u5929\u8be2\u95ee\u6210\u529f\u3002\n\u6b64\u65f6\u6982\u7387\u4e3a $p_i$\uff0c\u6d88\u8017\u5929\u6570 $f_{i-1}+1$\uff0c\u4e8e\u662f\u6982\u7387\u4e58\u4ee3\u4ef7\u4e3a $p_i(f_{i-1}+1)$\u3002\n\n\u7efc\u4e0a\uff0c\u6709 $f_i=(1-p_i)(f_{i-1}+1+f_i)+p_i(f_{i-1}+1)$\u3002\n\n\u7136\u800c $p_i$ \u53ea\u662f\u6982\u7387\uff0c\u771f\u6b63\u4ee3\u7801\u4e2d\u8fd8\u9700\u8981\u9664\u4ee5 100 \u624d\u884c\u3002\n\n\u9664\u4ee5 100 \u4e4b\u540e\u6700\u540e\u89e3\u5f97 $f_i=\\dfrac{100(f_{i-1}+1)}{p_i}$\uff0c\u7ebf\u6027\u9012\u63a8\u5373\u53ef\uff0c\u4e0d\u8981\u5fd8\u8bb0\u9006\u5143\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ntypedef long long LL;\nconst int MAXN = 2e5 + 10, P = 998244353;\nint n, p[MAXN];\nLL f[MAXN];\n\nint read()\n{\n\tint sum = 0, fh = 1; char ch = getchar();\n\twhile (ch < '0' || ch > '9') {if (ch == '-') fh = -1; ch = getchar();}\n\twhile (ch >= '0' && ch <= '9') {sum = (sum << 3) + (sum << 1) + (ch ^ 48); ch = getchar();}\n\treturn sum * fh;\n}\n\nLL ksm(LL a, LL b)\n{\n\tLL ans = 1 % P;\n\tfor (; b; b >>= 1)\n\t{\n\t\tif (b & 1) ans = ans * a % P;\n\t\ta = a * a % P;\n\t}\n\treturn ans;\n}\n\nint main()\n{\n\tn = read();\n\tfor (int i = 1; i <= n; ++i) p[i] = read();\n\tfor (int i = 1; i <= n; ++i) f[i] = 100ll * (f[i - 1] + 1) % P * ksm(p[i], P - 2) % P;\n\tprintf(\"%lld\\n\", f[n]);\n\treturn 0;\n}\n```",
        "postTime": 1634476655,
        "uid": 134000,
        "name": "Plozia",
        "ccfLevel": 7,
        "title": "CF1265E Beautiful Mirrors \u9898\u89e3"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/aday526/p/solution-cf1265e.html)\n\n## Solution\n\n\u6211\u4eec\u53ef\u4ee5\u5217\u51fa $n$ \u4e2a\u6982\u7387\u65b9\u7a0b\uff0c\u7136\u540e\u624b\u73a9\u65b9\u7a0b\u5373\u53ef\u3002\n\n\u8bbe\u7b2c $i$ \u4e2a\u955c\u5b50\u5f00\u59cb\u7684\u671f\u671b\u5929\u6570\u4e3a $x_i$\uff0c\u901a\u8fc7\u7b2c $i$ \u9762\u955c\u5b50\u7684\u6982\u7387\u4e3a $p_i$\uff0c\u5219\u4f9d\u9898\u610f\u6709\uff1a\n\n$$x_i=p_i(x_{i+1}+1)+(1-p_i)(x_1+1)$$\n\n\u5e76\u4e14\uff0c$x_{n+1}=0$\uff0c\u8981\u6c42\u89e3 $x_1$ \u3002\n\n\u7531\u4e0a\uff0c$x_1=\\dfrac{1}{p_1}+x_2=\\dfrac{\\dfrac{1}{p_1}+1}{p_2}+x_3=\\dfrac{\\dfrac{\\dfrac{1}{p_1}+1}{p_2}+1}{p_3}+x_4=\\cdots=\\dfrac{\\dfrac{\\dfrac{\\cdots+1}{p_{n-2}}+1}{p_{n-1}}+1}{p_n}$\n\n\n\n$\\therefore x_1=\\dfrac{\\dfrac{\\dfrac{\\cdots+1}{p_{n-2}}+1}{p_{n-1}}+1}{p_n}$\n\n## Code\n\n\u90a3\u4e48\u7528\u4e00\u4e2a\u53d8\u91cf $ans$ \u8bb0\u5f55\u5f53\u524d $x_i$ \u5373\u53ef\uff0c\u8bb0\u5f97\u52e4\u53d6\u6a21\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int P=998244353;\nint n,k,ans;\nint inv(int x){//\u9006\u5143\n\tint res=1,y=P-2;\n\tfor(;y;y>>=1,x=1ll*x*x%P)\n\t\tif(y&1)res=1ll*res*x%P;\n\treturn res;\n}\nint main(){\n\tscanf(\"%d\",&n);\n\tfor(int i=1,x;i<=n;i++){\n\t\tscanf(\"%d\",&x);//\u6ce8\u610f\u6982\u7387\u4ee5\u767e\u5206\u6570\u8bfb\u5165\n\t\tans=100ll*(ans+1)%P*inv(x)%P;\n\t}printf(\"%d\\n\",ans);\n\treturn 0;\n}\n```\n\n\n\n",
        "postTime": 1616251259,
        "uid": 312393,
        "name": "ADay",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "\u5927\u6982\u662f\u672c\u9898\u6700\u7b80\u6d01\u7684\u89e3\u6cd5\uff08\n\n\u9996\u5148\u5047\u8bbe $f_i$ \u8868\u793a\u4ece $1$ \u5f00\u59cb\u901a\u8fc7\u7b2c $i$ \u9762\u955c\u5b50\u671f\u671b\u9700\u8981\u82b1\u8d39\u591a\u5c11\u5929\uff0c$p_i$ \u4e3a\u901a\u8fc7\u7b2c $i$ \u9762\u955c\u5b50\u7684\u6982\u7387\uff0c\u5b9a\u4e49 $f_0=0$\uff0c\u5219\u6709\uff1a\n\n$$\nf_i=\\frac{f_{i-1}+1}{p_i}\n$$\n\n$\\Theta(100)$ \u9884\u5904\u7406\u51fa $[1,100]$ \u7684\u9006\u5143\uff0c\u5c31\u53ef\u4ee5\u5728\u5355\u6b21\u8be2\u95ee $\\Theta(1)$ \u7684\u65f6\u95f4\u5185\u8ba1\u7b97\u51fa $\\dfrac{1}{p_i}$ \u7684\u503c\uff0c\u968f\u540e\u76f4\u63a5\u7528\u4e00\u4e2a\u53d8\u91cf\u4fdd\u5b58 $f_i$ \u5e76\u987a\u63a8\u5373\u53ef\u3002\n\n\u7531\u4e8e $100$ \u53ef\u4ee5\u5f88\u8f7b\u677e\u5730\u5361\u8fdb L1 Cache\uff0c\u6240\u4ee5\u6570\u7ec4\u8bbf\u95ee\u51e0\u4e4e\u4e0d\u9700\u8981\u82b1\u65f6\u95f4\u3002\u5e76\u4e14\u987a\u63a8\u65f6\u53ef\u4ee5\u76f4\u63a5\u8fb9\u8bfb\u5165\u8fb9\u5904\u7406\uff0c\u4e0d\u9700\u8981 $2\\times 10^5$ \u7684\u4e2d\u95f4\u6570\u7ec4\uff0c\u65f6\u95f4\u548c\u7a7a\u95f4\u5f00\u9500\u90fd\u6781\u5c0f\u3002\n\n\u9700\u8981\u6ce8\u610f $100\\times 998244352\\times 998244352$ \u53ef\u80fd\u4f1a\u7206 long long\uff0c\u8981\u6a21\u4e24\u6b21\u3002\u6216\u8005\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5c06 $100$ \u4e58\u5230\u9006\u5143\u91cc\u9762\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6 $\\Theta(100+n)$\u3002\n\n\u9644 AC \u4ee3\u7801\uff1a\n\n```cpp\n#include <cstdio>\nusing namespace std;\n\nint getint()\n{\n\tchar ch;\n\twhile((ch=getchar()) < '!') ;\n\tint x = ch^'0';\n\twhile((ch=getchar()) > '!') x = (x*10)+(ch^'0');\n\treturn x;\n}\n\n#define mod 998244353\n\nint invi[105];\n\nint main()\n{\n\tinvi[1] = 100;  // \u5c06 100 \u4e58\u5165\u9006\u5143\n\tfor(int i=2; i<=100; ++i)\n\t{\n\t\tinvi[i] = 1LL*(mod-mod/i)*invi[mod%i]%mod;\n\t}\n\t\n\tconst int n = getint();\n\tregister int fi = 0;\n\tfor(int i=1; i<=n; ++i)\n\t{\n\t\tfi = 1LL*(fi+1)*invi[getint()] %mod;\n\t}\n\t\n\tprintf(\"%d\\n\",fi);\n}\n```",
        "postTime": 1603934430,
        "uid": 49458,
        "name": "\u6728\u6728\uff01",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "[P6835](https://www.luogu.com.cn/problem/P6835) \u7684\u5f31\u5316\u7248\u3002\n\n\u8bbe $f_i$ \u4e3a $i$ \u5230 $i+1$ \u7684\u671f\u671b\u5929\u6570\u3002\n\n$$f_i=\\frac{p_i}{100}\\times1+\\frac{100-p_i}{100}\\times(1+s+f_i)$$\n\n\u5176\u4e2d $s=\\sum_{j=1}^{i-1}f_i$\n\n\u5316\u7b80\u4e00\u4e0b\u80fd\u5f97\u5230\n\n$$f_i=\\frac{100+(100-p_i) \\times s}{p_i}$$\n\n\u7ebf\u6027\u9012\u63a8\u5373\u53ef\uff0c\u7b54\u6848\u5c31\u662f $\\sum_{i=1}^nf_i$\u3002\n\ncode\uff1a\n```cpp\n#include\"bits/stdc++.h\"\nusing namespace std;\n#define ri register int\n#define ll long long\n#define mod 998244353\ninline ll ksm(ll x,int y){\n\tll res=1;\n\twhile(y){\n\t\tif(y&1) res*=x,res%=mod;\n\t\tx*=x,x%=mod;\n\t\ty>>=1;\n\t}\n\treturn res;\n}\n#define N 200010\nint n,p[N];\nll f[N],s;\nint main(){\n\tios::sync_with_stdio(false);\n\tcin>>n;\n\tfor(ri i=1;i<=n;++i){\n\t\tcin>>p[i];\n\t\tf[i]=(100+(100-p[i])*s%mod)*ksm(p[i],mod-2)%mod;\n\t\ts=(s+f[i])%mod;\n\t}\n\tcout<<s;\n\treturn 0;\n}\n```\n",
        "postTime": 1601802724,
        "uid": 135839,
        "name": "Fairicle",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "\u671f\u671b DP \u7684\u9898\u4e3a\u4ec0\u4e48\u4e00\u5b9a\u8981\u7528\u671f\u671b DP \u505a\u5462\uff08\n\n\u8bbe\u671f\u671b\u9700\u8981\u7684\u5929\u6570\u4e3a $x$\u3002\n\n\u5982\u679c\u4e00\u6b21\u901a\u8fc7\uff0c\u5219\u9700\u8981\u8017\u8d39 $n$ \u5929\uff0c\u6982\u7387\u4e3a $\\prod p_i\\ (1\\leq i\\leq n)$\u3002\n\n\u5982\u679c\u4e00\u6b21\u6ca1\u901a\u8fc7\uff0c\u5728\u7b2c $i$ \u5929\u5931\u8d25\u4e86\uff0c\u5219\u671f\u671b\u9700\u8981\u8017\u8d39 $x+i$ \u5929\uff0c\u6982\u7387\u4e3a $(1-p_i)\\prod p_j\\ (1\\leq j\\lt i)$\u3002\n\n\u5217\u51fa\u65b9\u7a0b\uff1a\n\n$$x=n\\prod_{1\\leq i\\leq n}p_i+\\sum_{1\\leq i\\leq n}(x+i)(1-p_i)\\prod_{1\\leq j\\lt i} p_j$$\n\n\u624b\u89e3\u5f97\u5230\uff1a\n\n$$x=\\frac{n\\prod_{1\\leq i\\leq n}p_i+\\sum_{1\\leq i\\leq n}i(1-p_i)\\prod_{1\\leq j\\lt i} p_j}{1-\\sum_{1\\leq i\\leq n}(1-p_i)\\prod_{1\\leq j\\lt i} p_j}$$\n\n\u7528\u524d\u7f00\u79ef\u5bf9 $p_{1\\dots n}$ \u5904\u7406\u4e00\u4e0b\u5c31\u53ef\u4ee5\u5feb\u901f\u6c42\u51fa\u7b54\u6848\u3002\n\n```cpp\n#include<cstdio>\nint const p = 998244353;\nint i100;\nint plus(int x, int y) { return x + y >= p ? x + y - p : x + y; }\nint minus(int x, int y) { return x - y < 0 ? x - y + p : x - y; }\nint mul(int x, int y) { return 1ll * x * y % p; }\nint pow(int x, int y) {\n\tint ret = 1;\n\twhile (y) {\n\t\tif (y & 1) ret = mul(ret, x);\n\t\tx = mul(x, x), y >>= 1;\n\t}\n\treturn ret;\n}\nint inv(int x) { return pow(x, p - 2); }\nint a[200005], n, b[200005];\nint main() {\n\tscanf(\"%d\", &n), i100 = inv(100), b[0] = 1;\n\tfor (int i = 1; i <= n; i++) scanf(\"%d\", a + i), a[i] = mul(a[i], i100);\n\tfor (int i = 1; i <= n; i++) b[i] = mul(a[i], b[i - 1]);\n\tint A = mul(b[n], n), B = 0;\n\tfor (int i = 1; i <= n; i++) A = plus(A, mul(mul(b[i - 1], minus(1, a[i])), i));\n\tfor (int i = 1; i <= n; i++) B = plus(B, mul(b[i - 1], minus(1, a[i])));\n\tprintf(\"%d\\n\", mul(A, inv(minus(1, B))));\n}\n```",
        "postTime": 1642234746,
        "uid": 106140,
        "name": "e3c12195e3beef64f29a",
        "ccfLevel": 7,
        "title": "CF1265E Beautiful Mirrors"
    },
    {
        "content": "\u671f\u671bDP\u5165\u95e8\u9898\u3002\n\n\u539f\u9898\u53ef\u4ee5\u62bd\u8c61\u4e3a\u5728\u4e00\u5f20\u6709\u5411\u56fe\u7684\u968f\u673a\u6e38\u8d70\uff08\u4e3a\u65b9\u4fbf\u8d77\u89c1\uff0c\u7528 $p_i$ \u800c\u4e0d\u662f $\\frac{p_i}{100}$ \u8868\u793a\u6210\u529f\u6982\u7387\uff09\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/jr3m530y.png)\n\n\uff08\u6709\u4e00\u4e2a\u8282\u70b9 $1$ \u4e0a\u7684\u81ea\u73af\u6ca1\u6709\u663e\u793a\uff0c\u6982\u7387\u4e3a $1-p_1$\uff09\n\n\u5bf9\u4e8e\u70b9 $1$\uff0c\u6709\u4ee5\u4e0b\u60c5\u51b5\uff1a\n\n|\u5929\u6570|\u6982\u7387|\n|:-:|:-:|\n|1|$p$|\n|2|$p(1-p)$|\n|3|$p(1-p)^2$|\n|\u2026|\u2026|\n|$\\infty$|$\\lim\\limits_{x\\rightarrow\\infty} p(1-p)^{x}=0$|\n\n\u636e\u6b64\u603b\u7ed3\u5f97\u79bb\u5f00\u70b9 $1$ \u7684\u671f\u671b\u6b65\u6570\uff08\u8bb0\u4e3a $E_1$\uff09\u4e3a\uff1a\n\n$$\n\\begin{aligned} &\\quad \\sum\\limits_{i=1}^{\\infty} ip_1(1-p_1)^{i-1}\\\\\n&=p_1 [\\sum\\limits_{i=1}^{\\infty} (1-p_1)^{i-1}]^2\\\\\n\\end{aligned}\n$$\n\n\u6839\u636e\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u516c\u5f0f\uff0c\u539f\u5f0f\n$\n=p_1 \\cdot \\frac{1}{p_1^2}\n=\\frac{1}{p_1}\n$\n\n\u5f53\u7136\u4e0d\u77e5\u9053\u8fd9\u73a9\u610f\u8fd8\u662f\u53ef\u4ee5\u7684\uff0c\u8bbe $S=\\sum\\limits_{i=1}^{\\infty} (1-p_1)^{i-1}$\uff0c\u5219\n\n$$\n\\begin{aligned}\n(1-p_1)S=\\sum\\limits_{i=1}^{\\infty} (1-p_1)^{i}\\\\\nS-(1-p_1)S=1\\\\\np_1S=1\\\\\nS=\\frac{1}{p_1}\n\\end{aligned}$$\n\n\u7531\u6b64\u63a8\u5bfc\uff0c\u5bf9\u4e8e\u70b9 $i$\uff0c\u79bb\u5f00\u5b83\u7684\u671f\u671b\u6b65\u6570\uff08\u8bb0\u4e3a $E_i$\uff09\u4e3a\uff1a\n\n$$\\frac{E_{i-1}+1}{p_i}$$\n\n\u5176\u4e2d $E_{i-1}+1$ \u5373\u4e3a\u5230\u8fbe\u70b9 $i$ \u7684\u671f\u671b\u6b65\u6570\u3002\n\nCode:\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define uint unsigned int\n#define ull unsigned ll\n#define ll long long\n#define reg register\n#define db double\n#define il inline\n#define gc getchar\n#define pc putchar\n#ifdef ONLINE_JUDGE\n#undef pc\n#define pc(a) puts(\"I am a cheater!\")\n#endif\n#define HgS 998244353\nil ll rd()\n{\n\treg ll res=0,lab=1;\n\treg char ch=gc();\n\twhile((ch<'0'||ch>'9')&&ch!=EOF)\n\t{if(ch=='-')lab=-lab;ch=gc();}\n\twhile(ch>='0'&&ch<='9')\n\t\tres=(res<<3)+(res<<1)+(ch&15),ch=gc();\n\treturn res*lab;\n}\nil void prt(ll x,char t='\\n')\n{\n\tchar ch[70];int tp=0;\n\tif(!x){fputs(\"0\",stdout);if(t)pc(t);return;}\n\tif(x<0)pc('-'),x=-x;\n\twhile(x)ch[++tp]=(x%10)^48,x/=10;\n\twhile(tp)pc(ch[tp--]);\n\tif(t)pc(t);\n}\nil ll qpow(ll n,ll e=HgS-2,ll p=HgS)\n{\n\treg ll res=1;\n\twhile(e)\n\t{\n\t\tif(e&1)res=res*n%p;\n\t\tn=n*n%p;e>>=1;\n\t}\n\treturn res;\n}\nll n,p[200005],ans[200005];\nint main()\n{\n\tn=rd();\n\tfor(int i=1;i<=n;++i)p[i]=rd();\n\tans[1]=100*qpow(p[1])%HgS;\n\tfor(int i=2;i<=n;++i)\n\t\tans[i]=(ans[i-1]+1)*qpow(p[i])%HgS*100%HgS;\n\tprt(ans[n]);\n\treturn 0;\n}\n```",
        "postTime": 1612429206,
        "uid": 224991,
        "name": "Presentation_Emitter",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "[\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c\u8bf7\u770b\u8fd9\u91cc](https://www.cnblogs.com/BrianPeng/p/13738935.html)\n\n## \u4e00\u79cd\u7279\u6b8a\u7684\u6982\u7387\u671f\u671bdp\u65b9\u6cd5\n\n\u8bbe$e_i$\u8868\u793a\u5f53\u524d\u5728\u7b2c$i$\u4e2a\u955c\u5b50\u7684\u671f\u671b\u5f00\u5fc3\u5929\u6570\uff0c\u5219\u7b54\u6848\u4e3a$e_1$\uff0c**\u800c\u4e14\u53ef\u4ee5\u8bbe$e_{n+1}=0$**\n\n\u7ed9\u51fa$e_i$\u7684\u8f6c\u79fb\u65b9\u7a0b\uff08\u5047\u8bbe$p_i$\u4e3a\u7b2c$i$\u5929\u955c\u5b50\u56de\u7b54'beautiful'\u7684\u6982\u7387\uff09\n\n$$e_i=p_ie_{i+1}+(1-p_i)e_1+1,1\\leqslant i\\leqslant n$$\n\n\u79fb\u9879\uff0c\u4ee5$e_{i+1}$\u4e3a\u4e3b\u5143\n\n$$e_{i+1}=\\dfrac{e_i+(p_i-1)e_1-1}{p_i}$$\n\n\u4ee5\u6b64\u53ef\u4ee5\u5c06\u6240\u6709$e_i,1\\leqslant i\\leqslant n+1$\u90fd\u7528$e_1$\u8868\u793a\uff0c\u5e76\u4e14\u7528\u5f52\u7eb3\u6cd5\u53ef\u77e5\u5b83\u4eec\u5747\u53ef\u8868\u793a\u4e3a$e_i=ae_1+b$\u7684\u5f62\u5f0f\uff08$a,b$\u4e3a\u5e38\u6570\uff09\n\n\u6240\u4ee5\u53ef\u4ee5\u521d\u59cb\u5316$a=1,b=0$\uff08\u5373$e_1=1e_1+0$\uff09\uff0c\u6839\u636e\u8f93\u5165\u7684$p_i$\u8f6c\u79fb$a,b$\u76f4\u5230\u6700\u540e\u7684$ae_1+b=e_{n+1}=0$\u5f97\u5230$e_1=-\\frac{b}{a}$\n\n\u53ef\u4ee5\u4e00\u8fb9\u8bfb\u5165\u4e00\u8fb9\u505a\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5f00\u4efb\u4f55\u6570\u7ec4\n\n**Time complexity: $O(n\\log P)$**\n\n**Memory complexity: $O(1)$**\n\n\u4e0a\u4ee3\u7801\n\n```cpp\n//This program is written by Brian Peng.\n#include<bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define Rd(a) (a=rd())\n#define Gc(a) (a=getchar())\n#define Pc(a) putchar(a)\nint rd(){\n\tint x;char c(getchar());bool k;\n\twhile(!isdigit(c)&&c^'-')if(Gc(c)==EOF)exit(0);\n\tc^'-'?(k=1,x=c&15):k=x=0;\n\twhile(isdigit(Gc(c)))x=x*10+(c&15);\n\treturn k?x:-x;\n}\nvoid wr(int a){\n\tif(a<0)Pc('-'),a=-a;\n\tif(a<=9)Pc(a|'0');\n\telse wr(a/10),Pc((a%10)|'0');\n}\nsigned const INF(0x3f3f3f3f),NINF(0xc3c3c3c3);\nlong long const LINF(0x3f3f3f3f3f3f3f3fLL),LNINF(0xc3c3c3c3c3c3c3c3LL);\n#define Ps Pc(' ')\n#define Pe Pc('\\n')\n#define Frn0(i,a,b) for(int i(a);i<(b);++i)\n#define Frn1(i,a,b) for(int i(a);i<=(b);++i)\n#define Frn_(i,a,b) for(int i(a);i>=(b);--i)\n#define Mst(a,b) memset(a,b,sizeof(a))\n#define File(a) freopen(a\".in\",\"r\",stdin),freopen(a\".out\",\"w\",stdout)\n#define P (998244353)\nint n,p,a(1),b;\nint fpw(int a,int b){int r(1);while(b)a%=P,b&1?r=r*a%P:0,b>>=1,a*=a;return r;}\nint const i100=fpw(100,P-2);\nsigned main(){\n\tRd(n);\n\twhile(n--)p=rd()*i100%P,a+=p-1,--b,a=a*fpw(p,P-2)%P,b=b*fpw(p,P-2)%P;\n\twr((P-(b*fpw(a,P-2))%P)%P),exit(0);\n}\n```\n",
        "postTime": 1601184550,
        "uid": 66199,
        "name": "Bring",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF1265E \u3010Beautiful Mirrors\u3011"
    },
    {
        "content": "# \u95f2\u626f\n\n\u671f\u671b\u7ecf\u5178\u6a21\u578b\uff1f\n\n# \u9898\u9762\n\n[CF1265E Beautiful Mirrors](https://www.luogu.com.cn/problem/CF1265E)\n\n# Solution\n\n\u6211\u4eec\u8bbe $E(i)$ \u8868\u793a\u8be2\u95ee\u5f53\u524d\u5728\u8be2\u95ee\u7b2c $i$ \u9762\u955c\u5b50\uff0c\u79bb\u7ec8\u6b62\u7684\u671f\u671b\u5929\u6570\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f $E(1)$ \u3002\n\n\u6211\u4eec\u5c06\u7ec8\u6b62\u6761\u4ef6\u8f6c\u5316\u4e3a\u95ee\u5230\u7b2c $n+1$ \u9762\u955c\u5b50\uff0c\u65e0\u8bba\u56de\u7b54\u662f\u4ec0\u4e48\u90fd\u7ed3\u675f\u3002\u90a3\u4e48\u6211\u4eec\u6709 $E(n+1)=0$ \u3002\n\n\u6211\u4eec\u6709\u5982\u4e0b\u8f6c\u79fb\u65b9\u7a0b\uff1a\n$$\nE(i)=\\frac{p_i}{100}E(i+1)+\\frac{100-p_i}{100}E(1)+1\n$$\n\u7136\u540e\u6211\u4eec\u6709\u4e00\u4e2a\u7ecf\u5178\u64cd\u4f5c\uff1a**\u8bbe $E(i)=k\\cdot E(1)+b$ \uff0c\u901a\u8fc7\u9012\u63a8\u6c42\u51fa $E(n+1)$ \u7684 $k,b$\uff0c\u7136\u540e\u89e3\u51fa $E(1)$ ** \u3002\n\n\u79fb\u9879\u5316\u7b80\u53ef\u5f97\uff1a\n$$\nE(i+1)=\\frac{100k_i+p_i-100}{p_i}E(1)+\\frac{100b_i-100}{p_i}\n$$\n\u4e5f\u5c31\u662f $k_{i+1}=\\frac{100k_i+p_i-100}{p_i},b_{i+1}=\\frac{100b_i-100}{p_i}$ \u3002\n\n\u7136\u540e\u89e3\u65b9\u7a0b $k_{n+1}E(1)+b_{n+1}=0$ \u5373\u53ef\u3002\n\n# Code\n\n```c++\n#include<bits/stdc++.h>\n#define del(a,i) memset(a,i,sizeof(a))\n#define ll long long\n#define inl inline\n#define il inl void\n#define it inl int\n#define ill inl ll\n#define re register\n#define ri re int\n#define rl re ll\n#define mid ((l+r)>>1)\n#define lowbit(x) (x&(-x))\n#define INF 0x3f3f3f3f\nusing namespace std;\ntemplate<class T>il read(T &x){\n\tint f=1;char k=getchar();x=0;\n\tfor(;k>'9'||k<'0';k=getchar()) if(k=='-') f=-1;\n\tfor(;k>='0'&&k<='9';k=getchar()) x=(x<<3)+(x<<1)+k-'0';\n\tx*=f;\n}\ntemplate<class T>il _print(T x){\n\tif(x/10) _print(x/10);\n\tputchar(x%10+'0');\n}\ntemplate<class T>il print(T x){\n\tif(x<0) putchar('-'),x=-x;\n\t_print(x);\n}\nll mul(ll a,ll b,ll mod){long double c=1.;return (a*b-(ll)(c*a*b/mod)*mod)%mod;}\nit qpow(int x,int m,int mod){\n\tint res=1,bas=x;\n\twhile(m){\n\t\tif(m&1) res=(1ll*res*bas)%mod;\n\t\tbas=(1ll*bas*bas)%mod,m>>=1;\n\t}\n\treturn res;\n}\nconst int MAXN = 2e5+5,mod = 998244353;\nint n,p[MAXN],inv[105],k=1,b,ans;\nit add(int x,int y){\n\treturn x+y>=mod?x+y-mod:x+y;\n}\nit mul(int x,int y){\n\treturn 1ll*x*y%mod;\n}\nint main(){\n//\tfreopen(\".in\",\"r\",stdin);\n//\tfreopen(\".out\",\"w\",stdout);\n\tread(n);\n\tfor(ri i=1;i<=n;++i)\n\t\tread(p[i]);\n\tinv[1]=1;\n\tfor(ri i=2;i<=100;++i)\n\t\tinv[i]=mul(mod-mod/i,inv[mod%i]);\n\tfor(ri i=1;i<=n;++i){\n\t\tk=mul(add(mul(100,k),add(p[i],mod-100)),inv[p[i]]);\n\t\tb=mul(add(mul(100,b),mod-100),inv[p[i]]);\n\t}\n\tb=mod-b;\n\tans=mul(b,qpow(k,mod-2,mod));\n\tprint(ans);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1575854637,
        "uid": 122273,
        "name": "TheShadow",
        "ccfLevel": 0,
        "title": "CF1265E Beautiful Mirrors \u9898\u89e3"
    },
    {
        "content": "\u4ee4 $p_i$ \u8868\u793a\u7b2c $i$ \u4e2a\u955c\u5b50\u56de\u7b54\u6f02\u4eae\u7684\u6982\u7387\u3002\n\n\u8bbe $f_i$ \u8868\u793a\u524d $i$ \u4e2a\u955c\u5b50\u2018\u5f00\u5fc3\u5230\u6781\u70b9\u2019\u7684\u671f\u671b\u5929\u6570\uff0c\u8003\u8651\u600e\u4e48\u901a\u8fc7 $f_{i - 1}$ \u63a8\u51fa $f_i$\u3002\n\n\u5982\u679c\u7b2c $i$ \u4e2a\u955c\u5b50\u56de\u7b54\u6f02\u4eae\uff0c\u6b64\u65f6\u7684\u671f\u671b\u4e3a $p_i \\times (f_{i - 1} + 1)$\uff0c\u5982\u679c\u56de\u7b54\u4e0d\u6f02\u4eae\uff0c\u5219\u9700\u8981\u91cd\u5934\u518d\u6765\uff08\u6709 $f_{i - 1} + 1$ \u7684\u671f\u671b\u6d6a\u8d39\u4e86\uff0c\u8fd8\u9700\u8981 $f_i$\uff09\u3002\n\n\u5373\uff1a\n\n$$f_i = p_i \\times (f_{i - 1} + 1) + (1 - p_i) \\times (f_{i - 1} + 1 + f_i)$$\n\n\u6574\u7406\u4e00\u4e0b:\n\n$$f_i = \\frac{f_{i - 1} + 1}{p_i}$$\n\n\u76f4\u63a5\u9012\u63a8\u5373\u53ef\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n#define ll long long\ninline void read(int &x)\n{\n\tx = 0;\n\tint f = 0;\n\tchar ch = getchar();\n\twhile(ch < '0' || ch > '9')\n\t{\n\t\tf |= ch == '-';\n\t\tch = getchar();\n\t}\n\twhile(ch >= '0' && ch <= '9')\n\t{\n\t\tx = x * 10 + ch - 48;\n\t\tch = getchar();\n\t}\n\tx = f ? -x : x;\n\treturn;\n}\nconst int mod = 998244353;\n#define N 200005\nint qpow(int a, int b)\n{\n\tint ans = 1;\n\twhile(b)\n\t{\n\t\tif(b & 1)\n\t\t{\n\t\t\tans = (1ll * ans * a) % mod;\n\t\t}\n\t\ta = (1ll * a * a) % mod;\n\t\tb >>= 1;\n\t}\n\treturn ans;\n}\nint n, p[N];\nint f[N];\nsigned main()\n{\n\tread(n);\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\tread(p[i]);\n\t}\n\tfor(int i = 1; i <= n; i++)\n\t{\n\t\tf[i] = 100ll * (f[i - 1] + 1) % mod * qpow(p[i], mod - 2) % mod;\n\t}\n\tprintf(\"%d\", f[n]);\n\treturn 0;\n}\n```",
        "postTime": 1637935895,
        "uid": 90027,
        "name": "GG_jok_er",
        "ccfLevel": 0,
        "title": "CF1265E Beautiful Mirrors \u9898\u89e3"
    },
    {
        "content": "[CF1265E Beautiful Mirrors](https://www.luogu.com.cn/problem/CF1265E)\n\n---\n\nupd:\u6709\u4e2a\u5730\u65b9\u9519\u4e86\uff0c\u6539\u4e00\u4e0b\u3002\n\n\u8fd9\u662f\u4e00\u9053\u5173\u4e8e\u6982\u7387\u7684\u6570\u5b66\u9898\u3002\n\n\u8bbe $e(i)$ \u8868\u793a\u4ece**\u7b2c $i$ \u9762\u955c\u5b50\u5f00\u59cb\uff0c\u5230\u8be2\u95ee\u7ed3\u675f**\u7684\u671f\u671b\u5929\u6570\u3002\n\n\u663e\u7136 $e(n+1)=0$ \uff0c\u800c $e(1)$ \u5c31\u662f\u8981\u6c42\u7684\u7b54\u6848\u3002\n\n\u5bf9\u4e8e $e(i)$ \uff0c\u8be2\u95ee\u4e0b\u4e00\u6b21\u6709 $p[i]$ \u7684\u6982\u7387\u53bb\u95ee\u4e0b\u4e00\u9762\u955c\u5b50\uff0c\u5c31\u662f $e(i+1)$ \uff1b\u6709 $1-p[i]$ \u7684\u6982\u7387\u56de\u5230\u7b2c $1$ \u9762\u955c\u5b50\uff0c\u5c31\u662f $e(1)$ \u3002\n\n\u6240\u4ee5\uff1a $e(i)=p[i]\\times e(i+1)+(1-p[i])\\times e(1)+1$\n\n\u90a3\u4e48\uff1a\n\n$e(1)=p[1]\\times e(2)+(1-p[1])\\times e(1)+1$\n\n\u89e3\u5f97 $e(2)=e(1)-\\dfrac{1}{p[1]}$ \u3002\n\n$e(2)=p[2]\\times e(3)+(1-p[2])\\times e(1)+1$\n\n\u89e3\u5f97 $e(3)=e(1)-\\dfrac{1}{p[1]}-\\dfrac{1}{p[1]\\times p[2]}$\n\n~~\u89c2\u5bdf\u53ef\u5f97\uff0c~~ $e(n+1)=e(1)-\\dfrac{1}{p[1]}-\\dfrac{1}{p[1]\\times p[2]} \\cdots-\\dfrac{1}{p[1]\\times p[2]\\times \\cdots \\times p[n]}=0$\n\n\u6240\u4ee5\uff1a$e(1)=\\dfrac{1}{p[1]}+\\dfrac{1}{p[1]\\times p[2]} \\cdots+\\dfrac{1}{p[1]\\times p[2]\\times \\cdots \\times p[n]}$\n\n\u901a\u5206\u5f97\uff1a\n\n$e(1)=\\dfrac{1+p[1]+p[1]\\times p[2]+\\cdots +p[1]\\times p[2]\\times \\cdots \\times p[n-1]}{p[1]\\times p[2]\\times \\cdots \\times p[n]}$\n\n\u8fd9\u4e2a\u67ff\u5b50\u53ef\u4ee5 $O(n)$ \u6c42\uff01\n\n\u5982\u679c\u77e5\u9053 $\\dfrac{1+p[1]+p[1]\\times p[2]+\\cdots +p[1]\\times p[2]\\times \\cdots \\times p[i-1]}{p[1]\\times p[2]\\times \\cdots \\times p[i]}$\n\n\u90a3\u4e48\u6c42 $\\dfrac{1+p[1]+p[1]\\times p[2]+\\cdots +p[1]\\times p[2]\\times \\cdots \\times p[i+1-1]}{p[1]\\times p[2]\\times \\cdots \\times p[i+1]}$ \u65f6\uff0c\u53ea\u8981\u5206\u5b50\u5148\u52a0\u4e0a\u5206\u6bcd\uff0c\u5206\u6bcd\u518d\u4e58\u4e0a $p[i+1]$ \u5373\u53ef\u3002\n\n\u7136\u540e\u5c31\u80fd $O(n)$ \u9012\u63a8\u4e86~\n\n\u4ee3\u7801\uff1a\n```cpp\n#pragma GCC optimize(2)\n#include<bits/stdc++.h>\n#define For(i,a,b) for(register int i=(a);i<=(b);++i)\n#define Rep(i,a,b) for(register int i=(a);i>=(b);--i)\n#define int long long\nusing namespace std;\ninline int read()\n{\n    char c=getchar();int x=0;bool f=0;\n    for(;!isdigit(c);c=getchar())f^=!(c^45);\n    for(;isdigit(c);c=getchar())x=(x<<1)+(x<<3)+(c^48);\n    if(f)x=-x;return x;\n}\nconst int mod=998244353;\nint p,q,x,n,inv100;\ninline int qpow(int a,int b){\n\tint res=1;\n\tfor(;b;b>>=1,a=a*a%mod)\n\t\tif(b&1)res=res*a%mod;\n\treturn res;\n}\ninline int inv(int a){return qpow(a,mod-2);}\nsigned main()\n{\n\tn=read();\n\tp=0,q=1;\n    //p:\u5206\u5b50 q:\u5206\u6bcd\n\tinv100=inv(100);\n\tFor(i,1,n){\n\t\tx=read()*inv100%mod;\n\t\tp=(p+q)%mod;//\u5206\u5b50\u52a0\u5206\u6bcd\n\t\tq=q*x%mod;//\u5206\u6bcd\u00d7\u6982\u7387\n\t}\n\tcout<<p*inv(q)%mod;\n\treturn 0;\n}\n```",
        "postTime": 1581693205,
        "uid": 151935,
        "name": "Rainbow_qwq",
        "ccfLevel": 0,
        "title": "CF1265E \u3010Beautiful Mirrors\u3011"
    }
]
[
    {
        "content": "### Analysis\n\n\u5c06\u4e00\u4e2a\u4f4d\u7f6e\u770b\u6210\u4e24\u4e2a\u8272\u5e26\u5bf9\u5e94\u4f4d\u7f6e\u989c\u8272\u4e4b\u95f4\u7684\u8fb9\u3002\n\n\u8fd9\u6837\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u5f20 $n$ \u4e2a\u70b9\u7684\u56fe\uff0c\u7531\u8bb8\u591a\u5206\u79bb\u7684\u73af\u6784\u6210\u3002\n\n\u6211\u4eec\u8981\u7ed9\u6bcf\u4e2a\u70b9\u8d4b\u503c $1\\to n$\uff0c\u4f7f\u5f97\u6bcf\u6761\u8fb9\u6743\uff08\u4e3a\u4e24\u7aef\u70b9\u70b9\u6743\u5dee\u7684\u7edd\u5bf9\u503c\uff09\u4e4b\u548c\u6700\u5927\u3002\n\n\u82e5\u4e00\u4e2a\u70b9\u7684\u6743\u503c\u5c0f\u4e8e\u4e24\u8fb9\uff0c\u5219\u79f0\u4e3a\u300c\u5c71\u8c37\u300d\uff1b\u82e5\u4e00\u4e2a\u70b9\u7684\u6743\u503c\u5927\u4e8e\u4e24\u8fb9\uff0c\u5219\u79f0\u4e3a\u300c\u5c71\u5cf0\u300d\uff1b\u5269\u4e0b\u7684\u4e3a\u300c\u5c71\u5761\u300d\u3002\u663e\u7136\u5c71\u5cf0\u4e0e\u5c71\u8c37\u4e2a\u6570\u76f8\u540c\u3002\n\n\u6211\u4eec\u7528\u53e6\u4e00\u79cd\u65b9\u5f0f\u7b97\u8fb9\u6743\u548c\uff1a\u8bbe\u5c71\u5cf0\u7684\u70b9\u6743\u548c\u4e3a $x$\uff0c\u5c71\u8c37\u4e3a $y$\uff0c\u5219\u8fb9\u6743\u548c\u4e3a $2(x-y)$\u3002\n\n\u7531\u4e8e\u5c71\u5761\u5bf9\u7b54\u6848\u6ca1\u8d21\u732e\uff0c\u6211\u4eec\u5c3d\u91cf\u591a\u5c71\u5cf0\uff08$=$ \u5c71\u8c37\uff09\u3002\u8003\u8651\u5355\u4e2a\u73af\uff0c\u8bbe\u73af\u957f\u4e3a $L$\uff0c\u5219\u5c71\u5cf0\uff08$=$ \u5c71\u8c37\uff09\u4e2a\u6570\u6700\u591a\n\n$$\\left\\lfloor\\frac{L}{2}\\right\\rfloor$$\n\n\u8bbe\u8fd9\u6837\u7b97\u51fa\u6765\u5c71\u5cf0\u6700\u591a $a$ \u4e2a\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5c06\u5c71\u5cf0\u4eec\u8bbe\u4e3a\u6700\u5927\u7684\u503c $[n-a+1,n]\\cap\\mathbb{Z}$\uff0c\u5c71\u8c37\u4eec\u8bbe\u4e3a\u6700\u5c0f\u7684 $[1,a]\\cap\\mathbb{Z}$\u3002\n\n\u7b54\u6848\u4e5f\u5c31\u547c\u4e4b\u6b32\u51fa\uff1a\n\n$$2a(n-a)$$\n\n### Code\n\n```cpp\n//Said no more counting dollars. We'll be counting stars.\n#pragma GCC optimize(\"Ofast\")\n#include<bits/stdc++.h>\nusing namespace std;\n#define IOS ios::sync_with_stdio(0);cin.tie(0);cout.tie(0)\n#define For(i,j,k) for(int i=j;i<=k;i++)\n#define Rof(i,j,k) for(int i=j;i>=k;i--)\n#define int long long\n#define N 100010\n\nint n,a[N],b[N],ans;\nbool vis[N];\nint dfs(int x){\n\tvis[x]=1;\n\tif(vis[b[x]]) return 1;\n\telse return 1+dfs(b[x]);\n}\nvoid work(){\n\tcin>>n;\n\tint x;\n\tFor(i,1,n){\n\t\tcin>>x;\n\t\ta[x]=i;\n\t}\n\tFor(i,1,n){\n\t\tcin>>x;\n\t\tb[i]=a[x];\n\t}\n\tans=0;\n\tFor(i,1,n) vis[i]=0;\n\tFor(i,1,n) if(!vis[i]) ans+=dfs(i)>>1;\n\tcout<<2*ans*(n-ans)<<endl;\n}\nsigned main(){IOS;\n\tint T;cin>>T;\n\twhile(T--)work();\nreturn 0;}\n```\n",
        "postTime": 1652359881,
        "uid": 101868,
        "name": "I_am_Accepted",
        "ccfLevel": 0,
        "title": "CF1677C Tokitsukaze and Two Colorful Tapes\uff08\u7f6e\u6362\u8f6c\u73af\u8d4b\u503c\u5dee\u7684\u548c\u6700\u5927\uff09"
    },
    {
        "content": "\u8fd9\u79cd\u6392\u5217\u4e0a\u7684\u95ee\u9898\u4e0d\u96be\u60f3\u5230\u7f6e\u6362\u73af\u3002\u8003\u8651\u6293\u51fa\u5f62\u5982 $a_{x_1} \\to b_{x_1} \\to a_{x_2} \\to b_{x_2} \\to \\cdots \\to a_{x_k} \\to b_{x_k} \\to a_{x_1}$ \u7684\u73af\uff08\u5176\u4e2d $b_{x_i} = a_{x_{i \\bmod k + 1}}$\uff09\u3002\r\n\r\n\u95ee\u9898\u8f6c\u5316\u4e3a\u7ed9\u6bcf\u79cd\u989c\u8272\u7f16\u53f7\uff08\u5373\u4e3a\u6392\u5217 $p$\uff09\uff0c\u4f7f\u5f97\u6bcf\u4e2a\u73af\u4e2d $\\displaystyle\\sum_{i = 1}^k |p_{a_{x_i}} - p_{b_{x_i}}|$ \u7684\u548c\u6700\u5927\u3002\r\n\r\n\u7edd\u5bf9\u503c\u53ef\u4ee5\u62c6\u6210\u4e24\u79cd\u60c5\u51b5\uff1a$|a - b| = a - b \\operatorname{or} b - a$\u3002\r\n\r\n\u7531\u4e8e\u73af\u4e0e\u73af\u4e4b\u95f4\u72ec\u7acb\uff0c\u6211\u4eec\u8003\u8651\u6bcf\u4e2a\u5355\u72ec\u7684\u73af\u3002\r\n\r\n\u5728\u4e00\u4e2a\u73af\u4e2d\uff0c\u4e00\u4e2a\u6570 $x$ \u6709\u4e09\u79cd\u60c5\u51b5\uff1a\r\n\r\n- \u59cb\u7ec8\u4e3a\u6b63\uff0c\u8d21\u732e\u4e3a $2x$\u3002\r\n- \u4e00\u6b63\u4e00\u8d1f\uff0c\u8d21\u732e\u4e3a $0$\u3002\r\n- \u59cb\u7ec8\u4e3a\u8d1f\uff0c\u8d21\u732e\u4e3a $-2x$\u3002\r\n\r\n\u8d2a\u5fc3\u5730\uff0c\u6211\u4eec\u5e0c\u671b\u5c3d\u91cf\u8ba9\u5927\u7684\u6570\u7b26\u53f7\u4e3a\u6b63\uff0c\u5c0f\u7684\u6570\u7b26\u53f7\u4e3a\u8d1f\u3002\r\n\r\n\u6bcf\u8ba9\u4e00\u4e2a\u5927\u7684\u6570\u7684\u7b26\u53f7\u4e3a\u6b63\uff0c\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u5c0f\u7684\u6570\u7b26\u53f7\u4e3a\u8d1f\u3002\u663e\u7136\uff0c\u5728\u6bcf\u4e2a\u73af\u5185\uff0c\u6b63\u7684\u8f83\u5927\u7684\u6570\u8d8a\u591a\u8d8a\u597d\u3002\r\n\r\n\u6240\u4ee5\u6211\u4eec\u5728\u4e00\u4e2a\u5927\u5c0f\u4e3a $k$ \u7684\u73af\u91cc\u8ba9\u5176\u4e2d $\\lfloor \\frac{k}{2} \\rfloor$ \u4e2a\u8f83\u5927\u7684\u6570\u4e3a\u6b63\uff0c$\\lfloor \\frac{k}{2} \\rfloor$ \u4e2a\u8f83\u5c0f\u7684\u6570\u4e3a\u8d1f\uff0c\u5269\u4e0b\u7684 $k \\bmod 2$ \u4e2a\u6570\u4e3a $0$\u3002\r\n\r\n\u4e8e\u662f\u6211\u4eec\u7edf\u8ba1\u51fa\u6240\u6709\u73af\u4e2d\u4e3a\u6b63\u7684\u6570\u7684\u4e2a\u6570\uff0c\u8bbe\u4e4b\u4e3a $k$\uff0c\u5219\u8ba9 $1 \\sim k$ \u4e3a\u8d1f\uff0c\u8ba9 $n - k + 1 \\sim n$ \u4e3a\u6b63\uff0c\u5176\u4f59\u6570\u4e3a $0$\u3002\r\n\r\n\u63a8\u4e00\u4e0b\u5f0f\u5b50\u5c31\u53ef\u4ee5\u5f97\u5230\u7b54\u6848\u4e3a $2k(n - k)$\u3002\r\n\r\n\u4ee3\u7801\uff1a\r\n```cpp\r\n#include <stdio.h>\r\n\r\ntypedef long long ll;\r\n\r\nint a[100007], b[100007], pos[100007];\r\nbool vis[100007];\r\n\r\nint main(){\r\n\tint t;\r\n\tscanf(\"%d\", &t);\r\n\tfor (int i = 1; i <= t; i++){\r\n\t\tint n, m = 0, sum = 0;\r\n\t\tscanf(\"%d\", &n);\r\n\t\tfor (int j = 1; j <= n; j++){\r\n\t\t\tvis[j] = false;\r\n\t\t}\r\n\t\tfor (int j = 1; j <= n; j++){\r\n\t\t\tscanf(\"%d\", &a[j]);\r\n\t\t\tpos[a[j]] = j;\r\n\t\t}\r\n\t\tfor (int j = 1; j <= n; j++){\r\n\t\t\tscanf(\"%d\", &b[j]);\r\n\t\t}\r\n\t\tfor (int j = 1; j <= n; j++){\r\n\t\t\tif (!vis[j]){\r\n\t\t\t\tint size = 0;\r\n\t\t\t\tfor (int k = j; !vis[k]; k = b[pos[k]]){\r\n\t\t\t\t\tvis[k] = true;\r\n\t\t\t\t\tsize++;\r\n\t\t\t\t}\r\n\t\t\t\tsum += size / 2;\r\n\t\t\t}\r\n\t\t}\r\n\t\tprintf(\"%lld\\n\", (ll)2 * sum * (n - sum));\r\n\t}\r\n\treturn 0;\r\n}\r\n```",
        "postTime": 1662117561,
        "uid": 201007,
        "name": "Leasier",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1677C \u3010Tokitsukaze and Two Colorful Tapes\u3011"
    },
    {
        "content": "#### \u9898\u610f\n\n\u7ed9\u5b9a\u4e24\u4e2a\u6392\u5217 $\\{p_n\\}$ \u4e0e $\\{q_n\\}$\uff0c\u6784\u9020\u4e00\u4e2a\u6392\u5217 $\\{r_n\\}$\uff0c\u6c42 $\\sum_{i=1}^n \\lvert r_{p_i} - r_{q_i} \\rvert$ \u7684\u6700\u5927\u503c\u3002\n\n#### \u6570\u636e\u8303\u56f4\n\n$n \\le 10^5$\n\n#### \u9898\u89e3\n\n\u9996\u5148\u8f6c\u5316\u9898\u610f\uff0c\u76f8\u5f53\u4e8e\u7ed9\u5b9a\u82e5\u5e72\u4e2a\u73af\uff0c\u7136\u540e\u8981\u7ed9\u70b9\u91cd\u7f16\u53f7\uff0c\u4f7f\u5f97\u6240\u6709\u8fb9\u7684\u7aef\u70b9\u7f16\u53f7\u5dee\u4e4b\u548c\u6700\u5927\u3002\n\n\u8003\u8651\u62c6\u7edd\u5bf9\u503c\uff0c\u603b\u5171\u4f1a\u8d21\u732e $n$ \u6b21 $-1$ \u4e0e $n$ \u6b21 $+1$\uff0c\u5c3d\u53ef\u80fd\u5730\u8ba9\u8f83\u5c0f\u6570\u5206\u914d\u5230 $-1$\uff0c\u8f83\u5927\u6570\u5206\u914d\u5230 $+1$ \u663e\u7136\u662f\u6700\u4f18\u7684\u3002\u6ce8\u610f\u5230\u957f\u5ea6\u4e3a $l$ \u7684\u73af\u4e0a\u80fd\u8d21\u732e $\\lfloor \\frac{l}{2} \\rfloor$ \u6b21 $-1$ \u4e0e $+1$\uff0c$l \\bmod 2$ \u6b21 $0$\u3002\u56e0\u6b64\u76f4\u63a5\u7edf\u8ba1\u51fa $w = \\sum \\lfloor \\frac{l}{2} \\rfloor$\uff0c\u5219\u7b54\u6848\u5373\u4e3a $(\\sum_{i=1}^w -2i)+(\\sum_{i=1}^w2(n-i+1))=2(n-w)w$\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u7a7a\u95f4\u590d\u6742\u5ea6\u5747\u4e3a $O(n)$\u3002\n\n#### \u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define Getchar() p1 == p2 and (p2 = (p1 = buf) + fread(buf, 1, 1 << 21, stdin), p1 == p2) ? EOF : *p1++\nchar buf[1 << 21], *p1, *p2;\ninline int read (void)\n{\n\tint x = 0; char c = Getchar(); bool f = (c != '-');\n\twhile (c < '0' or c > '9') c = Getchar(), f &= c != '-';\n\twhile (c >= '0' and c <= '9') x = x * 10 + c - 48, c = Getchar();\n\treturn f ? x : -x;\n}\nconst int maxn = 100000 + 10;\nint n, a[maxn], b[maxn]; bool vis[maxn];\ninline void solve (void)\n{\n\tn = read(); int w = 0;\n\tfor (int i = 1; i <= n; i++) a[i] = read();\n\tfor (int i = 1; i <= n; i++) b[read()] = i;\n\tfor (int i = 1; i <= n; i++) if (!vis[i])\n\t{\n\t\tint len = 0;\n\t\tfor (int j = i; !vis[j]; j = b[a[j]]) vis[j] = true, len++;\n\t\tw += len >> 1;\n\t}\n\tprintf(\"%lld\\n\", 2LL * (n - w) * w);\n\tfor (int i = 1; i <= n; i++) vis[i] = false;\n}\nsigned main ()\n{\n\tfor (int T = read(); T--; ) solve();\n\treturn 0;\n}\n```",
        "postTime": 1661748055,
        "uid": 46197,
        "name": "_RSY_",
        "ccfLevel": 10,
        "title": "\u3010\u9898\u89e3\u3011CF1677C"
    }
]
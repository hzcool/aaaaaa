[
    {
        "content": "[\u849f\u84bb\u7684Blog](https://www.cnblogs.com/cj-chd/)\n\n[LG\u4f20\u9001\u95e8](https://www.luogu.org/problemnew/show/CF1039D)\n\n\u6839\u53f7\u5206\u6cbb\u597d\u9898\u3002\n\n\u8fd9\u9898\u53ef\u4ee5\u6574\u4f53\u4e8c\u5206\uff0c\u4f46\u6211\u592a\u83dc\u4e86\uff0c\u4e0d\u4f1a\u3002\n\n\u6839\u53f7\u5206\u6cbb\u600e\u4e48\u8003\u8651\u5462\uff1f\u5148\u60f3\u60f3$n^2$\u66b4\u529b\u5427\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8981\u6c42\u7684$k$\uff0c\u4e00\u904ddfs\u76f4\u63a5\u8d2a\u5fc3\uff0c\u80fd\u62fc\u6210\u94fe\u5c31\u76f4\u63a5\u62fc\uff0c\u6b63\u786e\u6027\u4e0d\u7528\u6211\u8bc1\u660e\u5427\u3002\n\n\u8003\u8651\u5bf9\u4e8e$k \\le \\sqrt n$\uff0c\u76f4\u63a5\u6309\u7167\u66b4\u529b\u53bb\u505a\uff0c\u590d\u6742\u5ea6$O(n \\sqrt n)$\uff1b\u5bf9\u4e8e$k$\u4ece$\\sqrt n+1$\u5230$n$\u7684\u6240\u6709\u60c5\u51b5\uff0c\u6211\u4eec\u53d1\u73b0\u7b54\u6848\u53ea\u4f1a\u5728$\\sqrt n$\u5230$0$\u4e4b\u95f4\u53d6\u503c\uff08$k> \\sqrt n$\uff09\uff0c\u4e14\u662f\u5355\u8c03\u4e0d\u5347\u7684\uff0c\u8003\u8651\u7528\u4e00\u4e2a\u5de6\u5f80\u53f3\u79fb\u7684\u6307\u9488\u6765\u7ef4\u62a4\u6c42\u89e3\u7684\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u6bcf\u6b21\u6c42\u51fa\u4e00\u6bb5\u7684\u503c\uff0c\u5177\u4f53\u6765\u8bf4\u662f\u8fd9\u6837\uff1a\u5148\u628a\u6307\u9488$i$\u6307\u5411$\\sqrt n+1$\uff0c\u7136\u540e\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$i$\uff0c\u6c42\u51fa$i$\u7684\u7b54\u6848$t$\uff0c\u4e8c\u5206\u4e00\u4e2a\u4e0e\u5b83\u7b54\u6848\u76f8\u540c\u7684\u6700\u53f3\u8fb9\u7684\u70b9\uff0c\u5e76\u628a\u8fd9\u4e00\u6bb5\u7684\u7b54\u6848\u66f4\u65b0\u4e3a$t$\uff0c\u8fd9\u6837\u6700\u591a\u4e8c\u5206$\\sqrt n$\u6b21\uff08\u6700\u591a\u53ea\u6709$\\sqrt n$\u79cd\u7b54\u6848\uff09\uff0c\u6bcf\u6b21\u4e8c\u5206\uff08\u7b97\u4e0acheck\uff09\u7684\u590d\u6742\u5ea6\u662f$O(n logn)$\uff0c\u6240\u4ee5\u8fd9\u90e8\u5206\u7684\u590d\u6742\u5ea6\u5c31\u662f$O(n \\sqrt n log n)$\uff0c\u603b\u7684\u590d\u6742\u5ea6\u4e5f\u5c31\u662f$O(n \\sqrt n log n)$\u3002\n\n\u4e0a\u9762\u628a\u5206\u6cbb\u7684\u8282\u70b9\u9ed8\u8ba4\u4e3a$\\sqrt n$\u53ea\u662f\u4e3a\u4e86\u7406\u89e3\u8d77\u6765\u76f4\u89c2\uff0c\u4e8b\u5b9e\u4e0a\u590d\u6742\u5ea6\u8fd8\u53ef\u4ee5\u66f4\u4f18\u3002\u6211\u4eec\u53d1\u73b0\u4e24\u5757\u7684\u590d\u6742\u5ea6\u8fd8\u4e0d\u662f\u5f88\u5e73\u8861\uff0c\u8bbe\u5206\u6cbb\u7684\u8282\u70b9\u662f$T$\uff0c\u90a3\u4e48\u7b2c\u4e00\u5757\u7684\u590d\u6742\u5ea6\u5c31\u662f$Tn$\uff0c\u7b2c\u4e8c\u5757\u5c31\u662f$\\frac{n^2 log n}{T}$\u3002\u8981\u4f7f\u590d\u6742\u5ea6\u6700\u4f4e\uff0c\u5c31\u5e94\u8be5\u53d6$T=\\sqrt{n log n}$\u3002\u8fd9\u6837\u7684\u7a0b\u5e8f\u8fd0\u884c\u6548\u7387\uff08\u7406\u8bba\u7ed3\u679c\uff09\u5927\u6982\u662f\u53d6$T$\u4e3a$\\sqrt n$\u7684\u4e24\u500d\u3002\n\n```cpp\n#include<cstdio>\n#include<cctype>\n#include<cmath>\n#define R register\n#define I inline\nusing namespace std;\nconst int S=100003,N=200003;\nchar buf[1000000],*p1,*p2;\nI char gc(){return p1==p2&&(p2=(p1=buf)+fread(buf,1,S,stdin),p1==p2)?EOF:*p1++;}\nI int rd(){\n\tR int f=0; R char c=gc();\n\twhile(c<48||c>57) c=gc();\n\twhile(c>47&&c<58) f=f*10+(c^48),c=gc();\n\treturn f;\n}\nint h[S],s[N],g[N],p[S],d[S],f[S],o[S],n,c,e;\nI int max(int x,int y){return x>y?x:y;}\nI void add(int x,int y){s[++c]=h[x],h[x]=c,g[c]=y;}\nvoid dfs(int x,int f){\n\tfor(R int i=h[x],y;i;i=s[i])\n\t\tif((y=g[i])^f)\n\t\t\tdfs(y,x);\n\tp[x]=f,d[++e]=x;\n}\nI int slv(int k){\n\tR int i,x,r=0;\n\tfor(i=1;i<=n;++i)\n\t\tf[i]=1;\n\tfor(i=1;i<=n;++i){\n\t\tx=d[i];\n\t\tif(p[x]&&(~f[p[x]])&&(~f[x]))\n\t\t\tif(f[x]+f[p[x]]>=k)\n\t\t\t\t++r,f[p[x]]=-1;\n\t\t\telse\n\t\t\t\tf[p[x]]=max(f[p[x]],f[x]+1);\n\t}\n\treturn r;\n}\nint main(){\n\tR int q,i,j,x,y,t,l,r,m;\n\tn=rd(),q=sqrt(n*log(n)/log(2));\n\tfor(i=1;i<n;++i)\n\t\tx=rd(),y=rd(),add(x,y),add(y,x);\n\tdfs(1,0),o[1]=n;\n\tfor(i=2;i<=q;++i)\n\t\to[i]=slv(i);\n\tfor(i=q+1;i<=n;i=l+1){\n\t\tl=i,r=n,t=slv(i);\n\t\tfor(;l<r;slv(m)^t?r=m-1:l=m)\n\t\t\tm=l+r+1>>1;\n\t\tfor(j=i;j<=l;++j)\n\t\t\to[j]=t;\n\t}\n\tfor(i=1;i<=n;++i)\n\t\tprintf(\"%d\\n\",o[i]);\n\treturn 0;\n}\n\n```\n\n\u9e23\u8c22\uff1a@fwat julao",
        "postTime": 1544796797,
        "uid": 91933,
        "name": "newbiechd",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1039D \u3010You Are Given a Tree\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1039D)\n\n\u524d\u7f6e\u77e5\u8bc6\uff1a\u6839\u53f7\u5206\u6cbb\u3002\n\n\u633a\u597d\u4e00\u9898\u5427\u2026\u2026\n\n\u57fa\u672c\u601d\u8def\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u6700\u57fa\u672c\u7684\u60f3\u6cd5\uff0c\u5c31\u662f\u8d2a\u5fc3\uff0c\u6211\u4eec\u4ece\u6bcf\u68f5\u5b50\u6811\u5e95\u904d\u5386\u3002\n\n\u9047\u5230\u80fd\u63a5\u4e0a\u540e\u957f\u5ea6\u5927\u4e8e k \u7684\uff0c\u5c31\u63a5\u4e0a\uff0c\u81f3\u4e8e\u6b63\u786e\u6027\u2026\u2026\u53ef\u4ee5\u81ea\u5df1\u624b\u73a9\uff0c\u53d1\u73b0\u662f\u6b63\u786e\u7684\u2026\u2026~~\u8d2a\u5fc3\u9700\u8981\u8bc1\u660e\u8fd8\u53eb\u8d2a\u5fc3\u5417\uff1f\uff1f~~\n\n\u53ef\u60dc\u554a\u53ef\u60dc\uff0c\u4e00\u6b21\u8d2a\u5fc3\u662f $\\text{O}(n)$ \u7684\uff0c\u4f60\u6c42 $1 ... n$ \u5c31\u662f $\\text O(n^2)$ \u7684\u597d\u7b97\u6cd5\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u968f\u7740 k \u7684\u589e\u5927\uff0c\u8fd9\u4e2a\u7b54\u6848\u554a\uff0c\u662f\u4e00\u76f4\u53d8\u5c0f\u7684\u54e6\u3002\n\n\u8fd8\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728 $k > \\sqrt n$\uff0c\u65f6\uff0c\u7b54\u6848\u7684\u53d6\u503c\u4e5f\u53ea\u6709 $\\sqrt n$ \u79cd\uff0c\u633a\u5c11\u7684\u3002\n\n\u5bf9\u4e8e $k \\leq \\sqrt n$\uff0c\u76f4\u63a5\u6765\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u662f $\\text O(n\\sqrt n)$ \u7684\u3002\n\n\u5269\u4e0b\u7684\u90e8\u5206\uff0c\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\u6709\u54ea\u4e9b\u503c\u662f\u76f8\u540c\u7684\uff0c\u6700\u591a\u4e5f\u53ea\u9700\u8981 $\\sqrt n$ \u6b21\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\text{O}(\\frac{n^2\\log n}{\\sqrt n})$\u3002\n\n\u603b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u662f $\\text{O}(n\\sqrt n + \\frac{n^2 \\log n}{\\sqrt n})$\uff0c\u4f46\u662f\u4f46\u662f\uff0c\u8fd9\u6837\u4e0d\u662f\u6700\u4f18\u7684\u3002\n\n\u6211\u4eec\u8bbe\u5206\u6cbb\u7684\u70b9\u662f $T$\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$\\text{O}(nT + \\frac{n^2 \\log n}{T})$\n\n\u5bf9\u4e8e\u8fd9\u4e24\u9879\uff0c\u4ed6\u4eec\u4e58\u8d77\u6765\u662f\u5b9a\u503c\uff0c\u53ef\u4ee5\u7528\u57fa\u672c\u4e0d\u7b49\u5f0f\u6765\u641e\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u6700\u5c0f\u4e3a $2 \\times \\sqrt{n^3 \\log n}$\u3002\n\n\u4e5f\u5c31\u662f $nT = \\frac{n ^ 2 \\log n}{T}$ \u65f6\uff0c\u53ef\u89e3\u5f97 $T = \\sqrt{n \\log n}$\uff0c\u8fd9\u7b97\u4e2a\u6839\u53f7\u5206\u6cbb\u7684\u5c0f\u4f18\u5316\u5427\u3002\n\n\n\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <cmath>\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\nconst int N = 1e5 + 5;\n\nint nxt[N << 1],ver[N << 1],head[N],tot;\nvoid addEdge(int u,int v) {nxt[++ tot] = head[u];ver[tot] = v;head[u] = tot;}\n\nint tim,n;\nint fa[N],dfn[N],ans[N],f[N];\n\nvoid dfs(int u,int pre) {\n\tfa[u] = pre;\n\tfor (int e = head[u] ; e ; e = nxt[e]) {\n\t\tint v = ver[e];\n\t\tif (v == pre)\n\t\t\tcontinue;\n\t\tdfs(v,u);\n\t}\n\tdfn[++ tim] = u;\n}\n\nint solve(int k) {\n\tint res = 0;\n\tfor (int i = 1 ; i <= n ; ++ i)\n\t\tf[i] = 1;\n\tfor (int i = 1 ; i <= n ; ++ i) {\n\t\tint u = dfn[i];\n\t\tint fath = fa[u];\n\t\tif (fath && f[u] != -1 && f[fath] != -1) {\n\t\t\tif (f[u] + f[fath] >= k)\n\t\t\t\tres ++,f[fath] = -1;\n\t\t\telse\n\t\t\t\tf[fath] = max(f[fath],f[u] + 1);\n\t\t}\n\t}\n\treturn res;\n}\n\nint main () {\n\tscanf(\"%d\",&n);\n\tint u,v;\n\tint p = sqrt(n * log2(n));\n\tfor (int i = 1 ; i < n ; ++ i) {\n\t\tscanf(\"%d %d\",&u,&v);\n\t\taddEdge(u,v);addEdge(v,u);\n\t}\n\tdfs(1,0);\n\tans[1] = n;\n\tfor (int i = 2 ; i <= p ; ++ i)\n\t\tans[i] = solve(i);\n\tfor (int i = p + 1 ; i <= n ; ++ i) {\n\t\tint tmp = solve(i);\n\t\tint l = i,r = n,ass = i;\n\t\twhile (l < r - 1) {\n\t\t\tint mid = l + r >> 1;\n\t\t\tif (solve(mid) == tmp)\n\t\t\t\tl = mid,ass = max(ass,mid);\n\t\t\telse\n\t\t\t\tr = mid;\n\t\t}\n\t\tfor (; i <= ass ; ++ i)\n\t\t\tans[i] = tmp;\n\t\t-- i;\n\t}\n\tfor (int i = 1 ; i <= n ; ++ i)\n\t\tprintf(\"%d\\n\",ans[i]);\n\treturn 0;\n}\n```",
        "postTime": 1617803333,
        "uid": 163516,
        "name": "Strelitzia",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1039D \u3010You Are Given a Tree\u3011"
    },
    {
        "content": "> II. [CF1039D You Are Given a Tree](https://www.luogu.com.cn/problem/CF1039D)\u3002\n\n> \u9898\u610f\u7b80\u8ff0\uff1a\u7ed9\u51fa\u4e00\u68f5\u6811\uff0c\u5bf9\u6bcf\u4e2a $k\\in[1,n]$\uff0c\u6c42\u51fa\u6700\u591a\u80fd\u627e\u51fa\u591a\u5c11\u6761\u6ca1\u6709\u516c\u5171\u70b9\u7684\u81f3\u5c11\u7ecf\u8fc7 $k$ \u4e2a\u70b9\u7684\u94fe\u3002\n\n> \u672c\u6587\u9009\u81ea [\u6839\u53f7\u5206\u6cbb\u4e13\u9898](https://www.cnblogs.com/alex-wei/p/square_root_divide_and_conquer.html)\u3002\n\n---\n\n\u6ce8\u610f\u5230\u82e5 $k>\\sqrt n$ \u5219\u7b54\u6848\u4e00\u5b9a\u4e0d\u5927\u4e8e $\\sqrt n$\u3002\u90a3\u4e48\u5bf9\u4e8e $1\\leq k\\leq \\sqrt n$\uff0c\u76f4\u63a5\u66b4\u529b\u6811\u5f62 DP\u3002\u7136\u540e\u518d\u679a\u4e3e $1\\leq ans\\leq \\sqrt n$\uff0c\u4e0d\u8fc7\u8fd9\u6b21\u679a\u4e3e\u7684\u662f**\u94fe\u7684\u6761\u6570**\uff0c\u5373\u7b54\u6848\u3002\u663e\u7136\u7b54\u6848\u5355\u8c03\u4e0d\u5347\uff0c\u4e8e\u662f\u4e8c\u5206\u51fa\u7b54\u6848\u4e3a $ans$ \u7684 $k$ \u7684\u533a\u95f4\u5373\u53ef\uff08\u5b9e\u9645\u4e0a\u4e0d\u9700\u8981\u53f3\u7aef\u70b9\uff0c\u53ea\u9700\u8981\u5de6\u7aef\u70b9\uff09\u3002\n\n\u6811\u5f62 DP \u6c42\u94fe\u4e0a\u7ecf\u8fc7\u7684\u70b9 $k$ \u7684\u7b54\u6848\uff1a\u8be5\u90e8\u5206\u6bd4\u8f83\u7c7b\u4f3c [\u8d5b\u9053\u4fee\u5efa](https://www.luogu.com.cn/problem/P5021)\uff0c\u4e0d\u8fc7\u4e5f\u6709\u4e00\u4e9b\u533a\u522b\uff1a\u56e0\u4e3a\u4e00\u4e2a\u70b9\u53ea\u80fd\u88ab\u4e00\u6761\u94fe\u7ecf\u8fc7\uff08\u800c\u4e0d\u662f\u8d5b\u9053\u4fee\u5efa\u4e2d\u7684\u4e00\u6761\u8fb9\uff09\uff0c\u4e8e\u662f\u5206\u4e24\u79cd\u60c5\u51b5\u8ba8\u8bba\uff1a\u8bb0 $mx_1,mx_2$ \u4e3a $i$ \u7684\u513f\u5b50\u6240\u4f20\u5165\u7684\u6700\u957f\u7684\u4e24\u6761\u94fe\uff08\u6240\u7ecf\u8fc7\u70b9\u7684\u4e2a\u6570\uff09\uff0c\u82e5 $mx_1+mx_2+1\\geq k$\uff0c\u90a3\u4e48\u663e\u7136\u662f\u5c06 $i$ \u4e0e\u5b83\u7684\u4e24\u4e2a\u513f\u5b50\u914d\u6210\u4e00\u6761\u94fe\uff0c\u7b54\u6848\u52a0 $1$\uff1b\u5426\u5219\u5c06 $mx_1+1$ \u4f20\u4e0a\u53bb\u5230 $fa_i$ \u5373\u53ef\u3002\u8fd9\u6837\u4e00\u6b21 DP \u5c31\u662f $\\mathcal{O}(n)$ \u7684\u3002\n\n\u56e0\u6b64\uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal{O}(n\\sqrt n\\log n)$\u3002\n\n\u5361\u5e38\u6280\u5de7\uff1a\u5c06\u6bcf\u4e2a\u8282\u70b9\u7684\u7236\u4eb2\u9884\u5904\u7406\u51fa\u6765\uff0c\u7136\u540e\u6309\u7167 dfs \u5e8f\u6392\u5e8f\uff0c\u53ef\u4ee5\u76f4\u63a5\u5faa\u73af\u6811\u5f62 DP\uff0c\u4e0d\u9700\u8981 dfs\u3002\n\n```cpp\n/*\n\tPowered by C++11.\n\tAuthor : Alex_Wei.\n*/\n\n\n//#pragma GCC optimize(3)\n\n#include <bits/stdc++.h>\nusing namespace std;\n\n#define mem(x,v) memset(x,v,sizeof(x))\n\nnamespace IO{\n\tchar buf[1<<21],*p1=buf,*p2=buf,obuf[1<<23],*O=obuf;\n\t#ifdef __WIN32\n\t\t#define gc getchar()\n\t#else\n\t\t#define gc (p1==p2&&(p2=(p1=buf)+fread(buf,1,1<<20,stdin),p1==p2)?EOF:*p1++)\n\t#endif\n\t#define pc(x) (*O++=x)\n\t#define flush() fwrite(obuf,O-obuf,1,stdout)\n\n\tinline int read(){\n\t\tint x=0,sign=0; char s=gc;\n\t\twhile(!isdigit(s))sign|=s=='-',s=gc;\n\t\twhile(isdigit(s))x=(x<<1)+(x<<3)+(s-'0'),s=gc;\n\t\treturn sign?-x:x;\n\t}\n\tvoid print(ll x) {if(x>9)print(x/10); pc(x%10+'0');}\n}\n\nusing namespace IO;\n\nconst int N=1e5+5;\n\nint ed,ed2,hd[N],nxt[N<<1],to[N<<1];\npii nw[N];\nvoid add(int u,int v){\n\tnxt[++ed]=hd[u],hd[u]=ed,to[ed]=v;\n}\nint n,p,cnt,ans[N];\n\nvoid dfs0(int id,int f){\n\tfor(int i=hd[id];i;i=nxt[i]){\n\t\tif(to[i]==f)continue;\n\t\tnw[++ed2]={id,to[i]},dfs0(to[i],id);\n\t}\n}\nint dfs(int id){\n\tint mx=0,mx2=0;\n\tfor(int i=hd[id];i;i=nxt[i]){\n\t\tint v=dfs(to[i]);\n\t\tif(v>=p){cnt++; return 0;}\n\t\tif(v>=mx)mx2=mx,mx=v;\n\t\telse if(v>=mx2)mx2=v;\n\t} if(mx+mx2+1>=p){cnt++; return 0;}\n\treturn mx+1;\n} int run(int x){\n\tcnt=0,p=x,dfs(1);\n\treturn cnt;\n}\n\nint main(){\n\tcin>>n;\n\tfor(int i=1;i<n;i++){\n\t\tint a=read(),b=read();\n\t\tadd(a,b),add(b,a);\n\t} int m=sqrt(n*log2(n));\n\tdfs0(1,0),mem(hd,0),mem(nxt,0),ed=0;\n\tfor(int i=1;i<n;i++)add(nw[i].fi,nw[i].se);\n\tfor(int i=1;i<=m;i++)ans[i]=run(i);\n\tfor(int i=1,pre=n+1;i<=n/m+1;i++){\n\t\tint l=1,r=pre;\n\t\twhile(l<r){\n\t\t\tint m=(l+r>>1)+1;\n\t\t\tif(run(m)>=i)l=m;\n\t\t\telse r=m-1;\n\t\t} for(int j=l+1;j<pre;j++)ans[j]=i-1; pre=l+1;\n\t} for(int i=1;i<=n;i++)cout<<ans[i]<<endl;\n\treturn flush(),0;\n}\n```",
        "postTime": 1616159142,
        "uid": 123294,
        "name": "Alex_Wei",
        "ccfLevel": 10,
        "title": "CF1039D You Are Given a Tree"
    },
    {
        "content": "\u8bbef( i )\u8868\u793ai\u6761\u8def\u5f84\u7684\u7b54\u6848\n\n\u9996\u5148\u8003\u8651\u4e00\u68f5n\u4e2a\u8282\u70b9\u7684\u6811 \uff0c \u5f53\u5b83\u662f\u4e00\u6761\u94fe\u65f6 \uff0c \u80fd\u5206\u6210\u6700\u591a\u4e0d\u76f8\u4ea4\u8def\u5f84 \uff0c \u6240\u4ee5\u6709 : \nf( i ) <= n / i\n\n\n\u89c2\u5bdf\u5230f\u662f\u4e0d\u589e\u7684 \uff0c \u5e76\u4e14\u76f8\u540c\u7684f\u503c\u81f3\u5c11sqrt(n)\u6bb5 \uff0c \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u50cf\u6570\u8bba\u5206\u5757\u90a3\u6837\u5bf9\u6bcf\u4e00\u6bb5\u5206\u522b\u6c42\u89e3\n\n\u8003\u8651\u5982\u4f55\u8ba1\u7b97f( i ) , \u8bbedpi\u8868\u793a\u4ee5i\u4e3a\u6839\u7684\u8282\u70b9\u6700\u591a\u80fd\u5206\u6210\u591a\u5c11\u6761\u8def\u5f84 \uff0c \u7b80\u5355\u8f6c\u79fb\u5373\u53ef\n\n\u590d\u6742\u5ea6\u662fO(n * sqrt(n) * log(n))\u7684 \uff0c \u7531\u4e8e\u5e38\u6570\u8f83\u5927 \uff0c dp\u65f6\u8981\u5148\u9884\u5904\u7406\u8fd9\u68f5\u6811\u7684DFS\u5e8f \uff0c \u6309DFS\u5e8f\u4ece\u4e0b\u5f80\u4e0adp\n\n\u4ee3\u7801 :\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\n#ifndef LOCAL\n\t#define eprintf(...) fprintf(stderr , _VA_ARGS)\n#else\n\t#define eprintf(...) 42\n#endif\n\ntypedef long long ll;\ntypedef long double ld;\ntypedef unsigned long long ull;\ntypedef pair<int , int> pii;\n#define MP make_pair\n#define fi first\n#define se second\nconst int N = 2e5 + 10;\n\nstruct edge {\n\tint to , nxt;\n} e[N << 1];\n\nint n , tot , timer;\nint head[N] , dp[N] , max_1[N] , max_2[N] , rem[N] , dfn[N] , pm[N] , ans[N] , fa[N];\n \ntemplate <typename T> inline void chkmin(T &x , T y) { x = min(x , y); }\ntemplate <typename T> inline void chkmax(T &x , T y) { x = max(x , y); }\ntemplate <typename T> inline void read(T &x) {\n   T f = 1; x = 0;\n   char c = getchar();\n   for (; !isdigit(c); c = getchar()) if (c == '-') f = -f;\n   for (; isdigit(c); c = getchar()) x = (x << 3) + (x << 1) + c - '0';\n   x *= f;\n}\ninline void dfs(int u , int par) {\n\tdfn[u] = ++timer; pm[u] = u;\n\tfor (int i = head[u]; i; i = e[i].nxt) {\n\t\tint v = e[i].to;\n\t\tif (v == par) continue;\n\t\tfa[v] = u;\n\t\tdfs(v , u);\n\t} \n}\ninline void addedge(int u , int v) {\n\t++tot;\n\te[tot] = (edge){v , head[u]};\n\thead[u] = tot;\n}\ninline bool cmp(int x , int y) {\n\treturn dfn[x] > dfn[y];\n}\ninline void solve(int K) {\n\tmemset(dp , 0 , sizeof(dp));\n\tmemset(rem , 0 , sizeof(rem));\n\tmemset(max_1 , 0 , sizeof(max_1));\n\tmemset(max_2 , 0 , sizeof(max_2));\n\tfor (int i = 1; i <= n; ++i) {\n\t\tint u = pm[i];\n\t\tif (max_1[u] + max_2[u] + 1 >= K) {\n\t\t\t++dp[u];\n\t\t\trem[u] = 0;\n\t\t} else rem[u] = max_1[u] + 1;\n\t\tint father = fa[u];\n\t\tdp[father] += dp[u];\n\t\tif (rem[u] > max_1[father]) {\n\t\t\tmax_2[father] = max_1[father];\n\t\t\tmax_1[father] = rem[u];\n\t\t} else if (rem[u] > max_2[father]) max_2[father] = rem[u];\n\t}\n\tans[K] = dp[1];\n\treturn;\n}\n\nint main() {\n\t\n\tread(n);\n\tfor (int i = 1; i < n; ++i) {\n\t\tint u , v;\n\t\tread(u); read(v);\n\t\taddedge(u , v);\n\t\taddedge(v , u);\n\t}\n\tdfs(1 , 0);\n\tsort(pm + 1 , pm + n + 1 , cmp);\n\tfor (int i = 1; i <= n; ++i) \n\t\tans[i] = -1;\n\tans[1] = n;\n\tint L , R;\n\tans[1] = n;\n\tfor (L = 2; L <= n; L = R + 1) {\n\t\tif (ans[L] == -1) solve(L);\n\t\tint l = L , r = n , res = L;\n\t\twhile (l <= r) {\n\t\t\tint mid = l + r >> 1;\n\t\t\tif (ans[mid] == -1) solve(mid);\n\t\t\tif (ans[mid] == ans[L]) {\n\t\t\t\tres = mid;\n\t\t\t\tl = mid + 1;\n\t\t\t} else r = mid - 1;\n\t\t} \t\n\t\tR = res;\n\t\tfor (int i = L; i <= R; ++i)\n\t\t\tans[i] = ans[L];\n\t}\n\tfor (int i = 1; i <= n; ++i)\n\t\tprintf(\"%d\\n\" , ans[i]);\n\t\t\n    return 0;\n}\n```\n\n",
        "postTime": 1565101180,
        "uid": 42091,
        "name": "evenbao",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF1039D \u3010You Are Given a Tree\u3011"
    },
    {
        "content": "\u5f88\u597d\u7684\u6839\u53f7\u5206\u6cbb\u7ec3\u624b\u9898\u3002\n\n\u9996\u5148\u6211\u4eec\u5bb9\u6613\u60f3\u5230 $\\mathcal{O}(n^2)$ \u7684\u8d2a\u5fc3\u66b4\u529b\uff0c\u4f46\u662f\u53bb\u4f18\u5316\u66b4\u529b\u53d1\u73b0\u975e\u5e38\u56f0\u96be\uff0c\u6211\u4eec\u8003\u8651\u4ece\u7b54\u6848\u7684\u503c\u7684\u7279\u6b8a\u6027\u5165\u624b\u3002\n\n\u8bbe\u5f53\u524d\u5728\u6c42 $k$ \u5408\u6cd5\uff0c\u53d1\u73b0\u7b54\u6848\u7684\u503c\u57df\u4e3a $[0,\\lfloor \\frac{n}{k} \\rfloor]$\u3002\n\n\u53d1\u73b0\u5bf9\u4e8e\u6240\u6709 $k > \\sqrt n$\uff0c\u7b54\u6848\u7684\u503c\u57df $ < \\sqrt n$\u3002\u90a3\u4e48\u5c31\u8003\u8651\u6839\u53f7\u5206\u6cbb\uff0c\u5148\u8bbe\u9608\u503c\u4e3a $T$\u3002\u5bf9\u4e8e\u6240\u6709 $k \\leq T$\uff0c\u6211\u4eec\u53ef\u4ee5 $\\mathcal{O}(nT)$ \u66b4\u529b\u8d2a\u5fc3\u89e3\u51b3\u3002\u5bf9\u4e8e\u6240\u6709 $k > T$\uff0c\u53d1\u73b0\u7b54\u6848\u503c\u57df\u5f88\u5c0f\u4e14\u5355\u8c03\u4e0b\u964d\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u4e8c\u5206\u627e\u5230\u6700\u5927\u7684 $k_0$ \u4f7f\u5f97 $k$ \u5230 $k_0$ \u8fd9\u6bb5\u4e4b\u95f4\u7684\u7b54\u6848\u76f8\u7b49\u3002\u56e0\u4e3a\u7b54\u6848\u603b\u6570\u4e0d\u8d85\u8fc7 $\\lfloor \\frac{n}{T} \\rfloor$\uff0c\u6240\u4ee5\u8fd9\u4e00\u6bb5\u662f $\\mathcal{O}(\\frac{n^2\\log n}{T})$ \u7684\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal{O}(nT + \\frac{n^2\\log n}{T})$\uff0c$nT =\\frac{n^2\\log n}{T}$ \u65f6\u590d\u6742\u5ea6\u6700\u5c0f\uff0c\u89e3\u5f97 $T=\\sqrt{n\\log n}$\u3002\n\n\u6240\u4ee5\u6700\u540e\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $\\mathcal{O}(n\\sqrt{n \\log n})$\uff0c\u4f46\u662f\u9012\u5f52\u5e38\u6570\u5927\u3002\u53ef\u4ee5\u9884\u5904\u7406\u9012\u5f52\u987a\u5e8f\u7136\u540e\u76f4\u63a5\u7ebf\u6027\u626b\u8fc7\u53bb\u5c31\u884c\u3002\n\n[Code](https://codeforces.com/contest/1039/submission/202959982)\u3002",
        "postTime": 1682086859,
        "uid": 570066,
        "name": "Fatal_Cactus",
        "ccfLevel": 6,
        "title": "CF1039D \u6839\u53f7\u5206\u6cbb \u9898\u89e3"
    },
    {
        "content": "\u8003\u8651\u5230 $ans_{i+1} \\leq ans_i$\n\u4e14 $ans_{i} \\leq \\frac{n}{i}$\n\n\u7136\u540e\u80e1\u4e71\u5206\u6790\u4e00\u6ce2\uff0c\u8003\u8651\u6839\u53f7\u5206\u6cbb\uff0c\u4e00\u90e8\u5206\u66b4\u529b\uff0c\u4e00\u90e8\u5206\u6309\u6839\u53f7\u7684\u6027\u8d28\u6765\uff0c\u8003\u8651\u5230\u5757\u53d6\u6210 $q$\uff0c\u4e00\u90e8\u5206\u66b4\u529b\u7684\u590d\u6742\u5ea6\u662f $nq$\uff0c\u7136\u540e\u4f60\u53d1\u73b0\u5269\u4e0b\u7684\u503c\u57df\u4ec5\u4ec5\u662f $[0,\\frac{n}{q}]$\uff0c\u7531\u4e8e\u8fd9\u4e2a\u90e8\u5206\u4f60\u9700\u8981\u4e00\u4e2a\u4e8c\u5206\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u5e26\u4e2a $\\log$\uff0c\u8003\u8651\u5230\u6bcf\u4e2a\u5757\uff0c\u7136\u540e\u5269\u4e0b\u7684\u90e8\u5206\u590d\u6742\u5ea6\u5c31\u662f $\\frac{n}{q} n \\log n$\uff0c\u6240\u4ee5\u628a\u4e24\u90e8\u5206\u641e\u8d77\u6765\uff0c\u7406\u8bba\u590d\u6742\u5ea6\u662f $nq+\\frac{n}{q} n \\log n$\n\n$nq+\\frac{n}{q} n \\log n = n(q + \\frac{n}{q}\\log n)$\uff0c\u53d1\u73b0 $q = \\sqrt {n \\log n}$ \u7684\u65f6\u5019\u53d6\u5230\u6700\u4f18\u590d\u6742\u5ea6\uff0c\u663e\u7136\u5b9e\u9645\u4e0a\u4e0d\u662f\u8fd9\u6837\u7684\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u4e0d\u53ef\u80fd\u90fd\u53d6\u5230 $\\frac{n}{i}$\uff0c\u6240\u4ee5\u9700\u8981\u628a\u5757\u641e\u5c0f\u4e00\u70b9233\uff0c200\u5de6\u53f3\u5c31\u591f\u4e86\n\n```cpp\n// powered by c++11\n// by Isaunoya\n#pragma GCC optimize(2)\n#pragma GCC optimize(3)\n#pragma GCC optimize(\"Ofast\")\n#pragma GCC optimize( \\\n\t\"inline,-fgcse,-fgcse-lm,-fipa-sra,-ftree-pre,-ftree-vrp,-fpeephole2,-ffast-math,-fsched-spec,unroll-loops,-falign-jumps,-falign-loops,-falign-labels,-fdevirtualize,-fcaller-saves,-fcrossjumping,-fthread-jumps,-funroll-loops,-freorder-blocks,-fschedule-insns,inline-functions,-ftree-tail-merge,-fschedule-insns2,-fstrict-aliasing,-fstrict-overflow,-falign-functions,-fcse-follow-jumps,-fsched-interblock,-fpartial-inlining,no-stack-protector,-freorder-functions,-findirect-inlining,-fhoist-adjacent-loads,-frerun-cse-after-loop,inline-small-functions,-finline-small-functions,-ftree-switch-conversion,-foptimize-sibling-calls,-fexpensive-optimizations,inline-functions-called-once,-fdelete-null-pointer-checks\")\n#include <bits/stdc++.h>\n#define rep(i, x, y) for (register int i = (x); i <= (y); ++i)\n#define Rep(i, x, y) for (register int i = (x); i >= (y); --i)\nusing namespace std;\nusing db = double;\nusing ll = long long;\nusing uint = unsigned int;\n#define Tp template\nusing pii = pair<int, int>;\n#define fir first\n#define sec second\nTp<class T> void cmax(T& x, const T& y) {if (x < y) x = y;} Tp<class T> void cmin(T& x, const T& y) {if (x > y) x = y;}\n#define all(v) v.begin(), v.end()\n#define sz(v) ((int)v.size())\n#define pb emplace_back\nTp<class T> void sort(vector<T>& v) { sort(all(v)); } Tp<class T> void reverse(vector<T>& v) { reverse(all(v)); }\nTp<class T> void unique(vector<T>& v) { sort(all(v)), v.erase(unique(all(v)), v.end()); }\nconst int SZ = 1 << 23 | 233;\nstruct FILEIN { char qwq[SZ], *S = qwq, *T = qwq, ch;\n#ifdef __WIN64\n#define GETC getchar\n#else\n  char GETC() { return (S == T) && (T = (S = qwq) + fread(qwq, 1, SZ, stdin), S == T) ? EOF : *S++; }\n#endif\n  FILEIN& operator>>(char& c) {while (isspace(c = GETC()));return *this;}\n  FILEIN& operator>>(string& s) {while (isspace(ch = GETC())); s = ch;while (!isspace(ch = GETC())) s += ch;return *this;}\n  Tp<class T> void read(T& x) { bool sign = 0;while ((ch = GETC()) < 48) sign ^= (ch == 45); x = (ch ^ 48);\n    while ((ch = GETC()) > 47) x = (x << 1) + (x << 3) + (ch ^ 48); x = sign ? -x : x;\n  }FILEIN& operator>>(int& x) { return read(x), *this; } FILEIN& operator>>(ll& x) { return read(x), *this; }\n} in;\nstruct FILEOUT {const static int LIMIT = 1 << 22 ;char quq[SZ], ST[233];int sz, O;\n  ~FILEOUT() { flush() ; }void flush() {fwrite(quq, 1, O, stdout); fflush(stdout);O = 0;}\n  FILEOUT& operator<<(char c) {return quq[O++] = c, *this;}\n  FILEOUT& operator<<(string str) {if (O > LIMIT) flush();for (char c : str) quq[O++] = c;return *this;}\n  Tp<class T> void write(T x) {if (O > LIMIT) flush();if (x < 0) {quq[O++] = 45;x = -x;}\n\t\tdo {ST[++sz] = x % 10 ^ 48;x /= 10;} while (x);while (sz) quq[O++] = ST[sz--];\n  }FILEOUT& operator<<(int x) { return write(x), *this; } FILEOUT& operator<<(ll x) { return write(x), *this; }\n} out;\n\nint n ;\nconst int maxn = 1e5 + 51 ;\nvector < int > g[maxn] ;\nint rev[maxn] , fa[maxn] , idx = 0 ;\n\nvoid dfs(int u , int f) {\n\tfor(int v : g[u]) \n\t\tif(v != f) dfs(v , u) ;\n\tfa[u] = f , rev[++ idx] = u ;\n}\n\nint f[maxn] ;\nint ans[maxn] ;\nint solve(int x) {\n\tif(ans[x]) return ans[x] ;\n\tint cnt = 0 ;\n\trep(i , 1 , n) f[i] = 1 ;\n\trep(i , 1 , n) {\n\t\tint qwq = rev[i] ;\n\t\tif(fa[qwq] && (~ f[fa[qwq]]) && (~ f[qwq])) {\n\t\t\tif(f[qwq] + f[fa[qwq]] >= x) ++ cnt , f[fa[qwq]] = -1 ;\n\t\t\telse cmax(f[fa[qwq]] , f[qwq] + 1) ;\n\t\t}\n\t}\n\treturn ans[x] = cnt ;\n}\n\nsigned main() {\n  // code begin.\n\tin >> n ;\n\trep(i , 2 , n) { int u , v ; in >> u >> v ; g[u].pb(v) , g[v].pb(u) ; }\n\tdfs(1 , 0) ; int q = min(n , 200) ;\n\tans[1] = n ; rep(i , 2 , q) ans[i] = solve(i) ;\n\tint Ans ;\n\tfor(int i = q + 1 ; i <= n ; i = Ans + 1) {\n\t\tint l = i , r = n ;\n\t\tint qwq = solve(l) ;\n\t\twhile(l <= r) {\n\t\t\tint mid = l + r >> 1 ;\n\t\t\tif(solve(mid) ^ qwq) r = mid - 1 ;\n\t\t\telse l = (Ans = mid) + 1 ;\n\t\t}\n\t\tfor(int p = i ; p <= Ans ; p ++) ans[p] = qwq ;\n\t}\n\trep(i , 1 , n) out << ans[i] << '\\n' ;\n\treturn 0;\n  // code end.\n}\n```",
        "postTime": 1583214718,
        "uid": 96580,
        "name": "SXNhdW5veWE",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1039D \u3010You Are Given a Tree\u3011"
    },
    {
        "content": "\u795e\u4ed9\u9898\uff0c\u5199\u4e86\u4e00\u4e0a\u5348\n\n# \u9898\u76ee\u94fe\u63a5\n\n[CF1039D You Are Given a Tree](https://www.luogu.org/problem/CF1039D)\n\n# \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u4f60\u4e00\u68f5\u6811\uff0c\u5206\u522b\u6c42\u51fa\u5212\u5206\u6210\u5305\u542b\u70b9\u6570$k\\in[1,n]$\u7684\u94fe\u65f6\u6700\u5927\u7684\u94fe\u7684\u4e2a\u6570\u3002\n\n# \u89e3\u9898\u601d\u60f3\n\n\u611f\u8c22\u5c0f\u7c89\u5154\u6559\u6211\u8fd9\u9053\u9898QwQ\uff0c~~\u8fd8\u6709\u90a3\u4e2a\u7801\u98ce\u5947\u602a\u7684\u8001\u54e5\u7684\u9898\u89e3~~\n\nOwenOwl\u8bf4\u8981\u6574\u4f53\u4e8c\u5206\uff0c~~\u90a3\u662f\u5565~~\n\n\u9996\u5148\u8003\u8651\u66b4\u529b\u600e\u4e48\u6253\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a$k$\uff0c\u53ef\u4ee5**\u8d2a\u5fc3\u5730**\u53bb\u505a\uff0c\u4e00\u76f4\u627e\u80fd\u8fde\u63a5\u7684\u70b9\uff0c\u76f4\u5230\u957f\u5ea6**\u7b2c\u4e00\u6b21**$\\geq k$\uff0c\u8fd9\u65f6`\u94fe\u6570++`\uff0c\u7ee7\u7eed\u627e\u4e0b\u4e00\u6bb5\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(n ^ 2)$\n\n\u7136\u540e\u5206\u6790\u4e00\u6ce2\u6837\u4f8b\uff0c\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e$k\\in(\\sqrt n, n]$\uff0c\u7b54\u6848\u662f**\u5355\u51cf**\u7684\uff0c\u5e76\u4e14\u4e0e**\u6574\u9664\u5206\u5757**\u76f8\u4f3c\uff0c\u4e2d\u95f4\u7684\u67d0\u4e00\u6bb5\u7b54\u6848\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4e8c\u5206\u627e\u5230\u4e00\u4e2a\u6bb5\u7684\u53f3\u7aef\u70b9\uff0c\u7136\u540e\u66b4\u529b`check()`\uff0c\u66f4\u65b0\u6574\u6bb5\u7684\u7b54\u6848\u3002\u8fd9\u91cc\u7684\u590d\u6742\u5ea6\u662f$O(n\\sqrt n \\log n)$\uff08log\u4e8c\u5206\uff0c\u6839\u53f7\u533a\u95f4\uff0cO(n)check\uff09\u3002\n\n\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e\u5269\u4e0b\u7684\u533a\u95f4$[1, \\sqrt n]$\uff0c\u76f4\u63a5\u66b4\u529b\u505a\uff0c\u590d\u6742\u5ea6\u4e5f\u662f$O(n\\sqrt n)$\u7684\uff0c\u4e0d\u4f1a\u62d6\u540e\u817f\u3002\n\n\u603b\u590d\u6742\u5ea6\u4e3a$O(n\\sqrt n\\log n)$\n\n\u8fd9\u4e2a\u590d\u6742\u5ea6\u5df2\u7ecf\u53ef\u4ee5\u8fc7\u4e86\n\n\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u5206\u6cbb\u7684\u4e24\u4e2a\u533a\u95f4\u590d\u6742\u5ea6\u5e76\u4e0d\u5747\u8861\uff0c\u6240\u4ee5\u8003\u8651\u901a\u8fc7\u5206\u914d\u4e0d\u540c\u7684\u5206\u6cbb\u8303\u56f4\u6765\u5747\u8861\u6389\u4e24\u4e2a\u4e0d\u540c\u7684\u64cd\u4f5c\u65f6\u95f4\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u5bf9\u4e8e\u5927\u6bb5\u533a\u95f4\uff0c\u4e8c\u5206\u7684\u590d\u6742\u5ea6\u662f$O(\\log n)$\u7684\uff0c\u800c\u66b4\u529b\u90e8\u5206\u533a\u95f4\u662f$O(n)$\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u533a\u5757\u5206\u754c\u70b9\u4e3a$O(\\sqrt{(n \\times \\log n)}) = O(\\sqrt{n \\log n})$\u6765\u5747\u8861\u4e24\u4e2a\u590d\u6742\u5ea6\u3002\n\n`60`\u4e2a\u70b9\u4e00\u5171\u5feb\u4e86`10s`\u3002\u3002\u3002\n\n[\u6839\u53f7nlogn\u65ad\u70b9](https://www.luogu.org/record/23329587)\n\n[\u6839\u53f7n\u65ad\u70b9](https://www.luogu.org/record/23329370)\n\n# \u53c2\u8003\u4ee3\u7801\n\n```c++\n#include <cstdio>\n#include <cctype>\n#include <cmath>\n\nnamespace FastIO{\n\tinline int read() {\n\t\tchar ch = getchar(); int r = 0, w = 1;\n\t\twhile(!isdigit(ch)) {if(ch == '-') w = -1; ch = getchar();}\n\t\twhile(isdigit(ch)) {r = r * 10 + ch - '0', ch = getchar();}\n\t\treturn r * w;\n\t}\n\t\n\tvoid _write(int x) {\n\t\tif(x < 0) putchar('-'), x = -x;\n\t\tif(x > 9) _write(x / 10);\n\t\tputchar(x % 10 + '0');\n\t}\n\t\n\tinline void write(int x) {\n\t\t_write(x);\n\t\tputs(\"\");\n\t}\n}\n\nusing namespace FastIO;\n\nconst int N = 100010;\nconst int M = N << 1;\n\ntemplate <typename T> inline T max(T a, T b) {return a > b ? a : b;}\n\nint n, size;\nint head[N], ver[M], nxt[M], cnt;\nint fa[N], ptn[N], idx;\nint d[N], ans[N];\n\ninline void add(int x, int y) {\n\tver[++cnt] = y, nxt[cnt] = head[x], head[x] = cnt;\n\tver[++cnt] = x, nxt[cnt] = head[y], head[y] = cnt;\n}\n\nvoid dfs(int x) {\n\tfor(register int i = head[x]; i; i = nxt[i]) {\n\t\tint y = ver[i];\n\t\tif(y == fa[x]) continue;\n\t\tfa[y] = x;\n\t\tdfs(y);\n\t}\n\tptn[++idx] = x;\n}\n\ninline int find(int k) {\n\tint ans = 0;\n\tfor(register int i = 1; i <= n; i++) d[i] = 1;\n\tfor(register int i = 1; i <= n; i++) {\n\t\tint x = ptn[i];\n\t\tif(fa[x] && (~d[fa[x]]) && (~d[x])) {\n\t\t\tif(d[x] + d[fa[x]] >= k) {\n\t\t\t\tans++;\n\t\t\t\td[fa[x]] = -1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\td[fa[x]] = max(d[fa[x]], d[x] + 1);\n\t\t\t}\n\t\t}\n\t}\n\treturn ans;\n}\n\nint main() {\n\tn = read();\n\tsize = sqrt(n * (log(n) / log(2)));\n\tfor(register int i = 1; i < n; i++) {\n\t\tint x = read(), y = read();\n\t\tadd(x, y);\n\t}\n\tdfs(1);\n\tans[1] = n;\n\tfor(register int i = 2; i <= size; i++) {\n\t\tans[i] = find(i);\n\t}\n\tfor(register int i = size + 1, l, r, k; i <= n; i = l + 1) {\n\t\tl = i, r = n, k = find(i);\n\t\twhile(l + 1 < r) {\n\t\t\tint mid = (l + r) >> 1;\n\t\t\tif(find(mid) == k) l = mid;\n\t\t\telse r = mid;\n\t\t}\n\t\tfor(register int j = i; j <= l; j++) ans[j] = k;\n\t}\n\tfor(register int i = 1; i <= n; i++) {\n\t\twrite(ans[i]);\n\t}\n\treturn 0;\n}\n```\n\n",
        "postTime": 1566791328,
        "uid": 104841,
        "name": "Minakami_Yuki",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF1039D You Are Given a Tree"
    },
    {
        "content": "> [CF1039D You Are Given a Tree](https://www.luogu.com.cn/problem/CF1039D)\n>\n> - \u6709\u4e00\u68f5 $n$ \u4e2a\u8282\u70b9\u7684\u6811\u3002\n>\n> - \u5176\u4e2d\u4e00\u4e2a\u7b80\u5355\u8def\u5f84\u7684\u96c6\u5408\u88ab\u79f0\u4e3a $k$ \u5408\u6cd5\u5f53\u4e14\u4ec5\u5f53\uff1a\n>\n> - \u6811\u7684\u6bcf\u4e2a\u8282\u70b9\u81f3\u591a\u5c5e\u4e8e\u5176\u4e2d\u4e00\u6761\u8def\u5f84\uff0c\u4e14\u6bcf\u6761\u8def\u5f84\u6070\u597d\u5305\u542b $k$ \u4e2a\u70b9\u3002\n>\n> - \u5bf9\u4e8e $k\\in [1,n]$\uff0c\u6c42\u51fa $k$ \u5408\u6cd5\u8def\u5f84\u96c6\u5408\u7684\u6700\u591a\u8def\u5f84\u6570\n> - \u5373\uff1a\u8bbe $k$ \u5408\u6cd5\u8def\u5f84\u96c6\u5408\u4e3a $S$\uff0c\u6c42\u6700\u5927\u7684 $|S|$\u3002\n>\n> $n \\leq 10^5$\n\n<!--more-->\n\n## \u89e3\u9898\u601d\u8def\uff1a\n\n\u5206\u6cbb\uff08\u6574\u4f53\u4e8c\u5206\uff09\n\n\u9996\u5148\u53ef\u4ee5\u89c2\u5bdf\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\u7684\u4e00\u4e9b\u6027\u8d28\uff0c\u5f88\u663e\u7136\uff0c\u6211\u4eec\u8003\u8651\u5bf9\u4e8e\u8fd9\u4e2a\u5408\u6cd5\u8def\u5f84\u7684\u7b54\u6848\u53d6\u503c\u5176\u5b9e\u6700\u591a\u53ea\u6709 $\\sqrt{n}$ \u79cd\u5e76\u4e14**\u5177\u6709\u5355\u8c03\u6027**\uff0c\u8fd9\u4e2a\u7684\u8bc1\u660e\u975e\u5e38\u663e\u7136\uff0c\u7c7b\u4f3c\u6570\u8bba\u5206\u5757\u7684\u8bc1\u660e\u3002\n\n\u63a5\u4e0b\u6765\u60f3\u4e0b\u66b4\u529b\u600e\u4e48\u505a\uff0c\u6211\u4eec\u5bf9\u4e8e\u5355\u72ec\u7684\u4e00\u4e2a $k$ \u6765\u8003\u8651\u3002\u9996\u5148\uff0c\u6bcf\u4e2a\u70b9\u6700\u591a\u53ea\u53ef\u80fd\u5728\u4e00\u6761\u94fe\u4e2d\uff0c\u8fd9\u7ed9\u6211\u4eec\u8d2a\u5fc3\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6b63\u786e\u6027\u7684\u4fdd\u8bc1\u3002\u5bf9\u4e8e\u4e00\u4e2a\u70b9\uff0c\u5982\u679c\u5f53\u524d\u70b9**\u6709\u4e00\u6761\u62d0\u5f2f\u7684\u6700\u957f\u94fe**\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e $k$\uff0c\u6211\u4eec\u5c31\u8d2a\u5fc3\u5212\u5206\u6210\u4e00\u6761\u7b54\u6848\u6240\u9700\u8981\u7684\u94fe\u3002\n\n![image-20220310144247767](https://s2.loli.net/2022/03/10/HQAk6CWbDltmZuv.png)\n\n\u5982\u56fe\uff0c\u7ea2\u8272\u5708\u8d77\u6765\u7684\u5c31\u662f\u4e00\u6761\u62d0\u5f2f\u7684\u6700\u957f\u94fe\u3002\n\n\u5426\u5219\uff0c\u6211\u4eec\u8fd9\u4e2a\u8282\u70b9\u4fdd\u5b58\u4e00\u4e2a**\u4e0d\u62d0\u5f2f\u7684\u6700\u957f\u94fe**\u957f\u5ea6 $f_x$ \u4ee5\u4f9b\u63a5\u4e0b\u6765\u4f7f\u7528\u3002\n\n![image-20220310144401233](https://s2.loli.net/2022/03/10/D7zH4RohuGlOMIb.png)\n\n\u5982\u56fe\uff0c\u7ea2\u8272\u5708\u8d77\u6765\u7684\u5c31\u662f\u4e00\u6761\u4e0d\u62d0\u5f2f\u7684\u6700\u957f\u94fe\u3002\n\n\u63a5\u4e0b\u6765\u8003\u8651\u5206\u6cbb\uff0c\u6709\u70b9\u7c7b\u4f3c**\u6574\u4f53\u4e8c\u5206**\uff08\u5176\u5b9e\u6211\u4e2a\u4eba\u662f\u6309\u6574\u4f53\u4e8c\u5206\u6765\u7406\u89e3\u7684\uff0c\u4f46\u662f\u88ab\u673a\u623f\u5b66\u957f\u7ea0\u6b63\u8bf4\u4e0d\u662f\u6574\u4f53\u4e8c\u5206\uff09\uff0c\u5728\u5206\u6cbb\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5bf9\u4e8e $k \\in [L,R]$ \uff0c\u7b54\u6848\u5c5e\u4e8e $[l,r]$ \u7684\u8be2\u95ee\u8fdb\u884c\u5206\u6cbb\u3002\u6bcf\u6b21\u9009\u53d6 $mid = \\lfloor \\frac{L+R}{2}\\rfloor$ \u8fdb\u884c dfs\uff0c\u5f97\u51fa\u7684\u7b54\u6848\u8bb0\u4e3a $tmp$\uff0c\u90a3\u4e48\u5bf9\u4e8e $k \\in [L,mid]$ \u6765\u8bf4\uff0c\u7b54\u6848\u5c5e\u4e8e $[l,tmp]$\uff0c\u5bf9\u4e8e $k \\in [mid + 1,R]$ \u6765\u8bf4\uff0c\u7b54\u6848\u5c5e\u4e8e $[tmp,r]$ \uff0c\u5f53 $l = r$ \u65f6\uff0c\u6211\u4eec\u5c31\u5c06 $[L,R]$ \u7684\u7b54\u6848\u5168\u90e8\u8d4b\u4e3a $l$\u3002\n\n\u8fd9\u6837\uff0c\u6211\u4eec\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u505a\u5230\u4e86 $\\mathcal{O}(n \\sqrt{n} \\log n)$\uff0c\u8fd9\u4e2a\u590d\u6742\u5ea6\u611f\u6027\u7406\u89e3\u5373\u53ef\uff08\u56e0\u4e3a\u6211\u4e5f\u4e0d\u4f1a\u8bc1\u662f\u673a\u623f\u5b66\u957f\u544a\u8bc9\u6211\u7684orz\uff0c\u5982\u679c\u6709dalao\u4f1a\u8bc1\u4e5f\u53ef\u4ee5\u5728\u8bc4\u8bba\u533a\uff0c\u76ee\u524d\u7684\u60f3\u6cd5\u662f\u5206\u6cbb\u6811\u6709 $\\log n$ \u5c42\uff0c\u7b54\u6848\u6709 $\\sqrt{n}$ \u4e2a\uff0c\u5206\u6cbb\u7684\u8fc7\u7a0b\u5c31\u662f $n \\log n \\times \\sqrt{n}$\uff09\n\n\u6ce8\u610f\u8fd9\u4e2a\u4e1c\u897f\u5e38\u6570\u975e\u5e38\u5927\u2026\u2026\u4f60\u9700\u8981\u4e00\u4e9b\u5361\u5e38\u6280\u5de7\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u4e2a\u4eb2\u6d4b\u80fd\u8fc7\u7684\u3002\u9996\u5148\u628a\u539f\u56fe\u5b58\u4e0b\u6765\uff0c\u7136\u540e dfs \u4e00\u904d\uff0c\u786e\u5b9a\u6bcf\u4e2a\u70b9\u7684\u7236\u5b50\u5173\u7cfb\uff0c\u7136\u540e**\u53ea\u4fdd\u5b58\u4ece\u7236\u4eb2\u5230\u513f\u5b50**\u7684\u8fb9\uff0c\u80fd\u5feb\u4e00\u534a\u4ee5\u4e0a\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u4ee3\u7801\u3002\n\n## \u4ee3\u7801\uff1a\n\n```cpp\nconst int N = 1e5 + 10;\n\nint n,ans[N],f[N],cnt;\nvector <int> G[N];\nint hd[N],nxt[N<<1],to[N<<1],tot;\n\ninline void addedge(int u,int v) {\n\tto[++tot] = v;nxt[tot] = hd[u];hd[u] = tot;\n}\n\nvoid dfs(int x,int fa,int k) {\n    f[x] = 0;\n    int maxx = 0,secmax = 0;\n    for (int i = hd[x];i;i = nxt[i]) {\n        int y= to[i];\n        if (y != fa) {\n            dfs(y,x,k);\n            if (f[y] > maxx) {\n                secmax = maxx;\n                maxx = f[y];\n            } else {\n                secmax = max(secmax,f[y]);\n            }\n        }\n    }\n    if (maxx + secmax + 1 >= k) ++cnt,f[x] = 0;\n    else f[x] = maxx + 1;\n}\n\nvoid solve(int l,int r,int L,int R) {\n    if (l > r || L > R) return ;\n    if (L == R) {\n        for (int i = l;i <= r;++i) {\n            ans[i] = L;\n        }//sqrtn\n        return ;\n    }\n    int mid = (l + r) >> 1;\n    cnt = 0;\n    dfs(1,0,mid);\n    ans[mid] = cnt;\n    solve(l,mid - 1,cnt,R);//\u8d8a\u77ed\u8d8a\u591a.\n    solve(mid + 1,r,L,cnt);\n}\n\nvoid prework(int x,int fa) {\n    for (auto y : G[x]) {\n        if (y != fa) {\n            addedge(x,y);\n            prework(y,x);\n        }\n    }\n}\n\nsigned main() {\n    read(n);\n    for (int i = 1;i < n;++i) {\n        int x,y;read(x);read(y);\n        G[x].push_back(y);\n        G[y].push_back(x);\n    }\n    prework(1,0);\n    solve(1,n,0,n);\n    for (int i = 1;i <= n;++i) writeln(ans[i]);\n}\n```\n",
        "postTime": 1646895306,
        "uid": 105230,
        "name": "Retired_Doubeecat",
        "ccfLevel": 6,
        "title": "solution-cf1039d"
    },
    {
        "content": "\u4e00\u9053**\u6839\u53f7\u5206\u6cbb**~~\u7684\u6bd2\u7624~~\u9898\u3002\n\n\u8fd9\u9898\u548c\u4e4b\u524d\u5199\u8fc7\u7684[CF786C Till I Collapse](https://www.luogu.com.cn/problem/CF786C)\u662f\u540c\u4e00\u7c7b\u578b\u7684\u9898\u76ee\uff0c\u90a3\u9898\u9898\u89e3\u597d\u50cf\u5199\u5728\u67d0\u5929\u6bd4\u8d5b\u7684\u603b\u7ed3\u91cc\u4e86\u3002\n\n\u8fd9\u7c7b\u9898\u6700\u663e\u8457\u7684\u7279\u5f81\u6709\u4e24\u4e2a\uff1a\n\n1. \u7b54\u6848\u7684\u5355\u8c03\u6027\u3002\u89c2\u5bdf\u6837\u4f8b\u4fbf\u5bb9\u6613\u53d1\u73b0\u8fd9\u4e00\u7ed3\u8bba\uff0c\u518d\u7a0d\u52a0\u601d\u8003\u5373\u53ef\u8bc1\u660e\u5176\u6b63\u786e\u6027\u3002\n\n2. \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u7684\u7b54\u6848\uff0c\u6700\u5927\u4e0d\u8d85\u8fc7 $n\\div k$\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u5bf9\u4e8e $\\gt \\sqrt n$ \u7684 $k$\uff0c\u7b54\u6848\u5c31\u4e0d\u4f1a\u591a\u4e8e $\\sqrt n$ \u4e2a\uff0c\u4e8e\u662f\u5c31\u53ef\u4ee5\u91c7\u7528\u4e8c\u5206\u540c\u4e00\u7b54\u6848\u7684\u6700\u53f3\u7aef\uff0c\u7136\u540e\u4e00\u8d77\u8f93\u51fa\u3002\n\n\u6b64\u9898\u7684\u53e6\u4e00\u4e2a\u95ee\u9898\u5728\u4e8e\u66b4\u529b\u7684\u5199\u6cd5\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u663e\u7136\u7684\u8d2a\u5fc3\uff0c\u5373 \u5982\u679c\u8be5\u70b9\u80fd\u4e0e\u4e0b\u9762\u7684\u4e24\u6700\u5927\u513f\u5b50\u7ec4\u6210 $\\geq k$ \u7684\u94fe\uff0c\u90a3\u5c31\u4f18\u5148\u8003\u8651\u7ec4\u94fe\uff0c\u4e0d\u884c\u7684\u8bdd\u5c31\u53d6\u6700\u5927\u503c\u66f4\u65b0\u94fe\u957f\u3002\n\n\u53e6\u5916\uff1a\u6b64\u9898\u5361\u5e38\uff01\uff01\u4f18\u5316\u65b9\u5f0f\u4e3b\u8981\u6709\u5982\u4e0b\u51e0\u70b9\uff1a\n\n1. \u5feb\u8bfb\u5feb\u5199\u3002\n\n2. \u4f7f\u7528\u5185\u8054\u51fd\u6570 inline\u3002\n\n3. \u5c06\u6240\u6709\u7ed3\u70b9\u9884\u5148\u6309\u7167 dfs\u5e8f\u6392\u597d\uff0c\u8fd9\u6837\u8ba1\u7b97\u65f6\u5c31\u4e0d\u9700\u9012\u5f52\u4ee5\u8fbe\u5230\u4f18\u5316\u76ee\u7684\u3002\uff08\u8fd9\u70b9\u6700\u91cd\u8981\uff01\uff09\n\n4. \u5757\u957f\u7684\u5904\u7406\uff0c\u53d6 $\\sqrt {nlogn}$ \u65f6\u6700\u4f18\uff0c\u5177\u4f53\u8bc1\u660e\u53ef\u4ee5\u53c2\u8003\u5176\u5b83\u9898\u89e3\u3002\uff08\u8fd9\u70b9\u4e5f\u5f88\u91cd\u8981\uff01\uff09\n\n```cpp\n#include<bits/stdc++.h>\n#define N 100005\nusing namespace std;\nint n;\nint tot,ver[N<<1],nxt[N<<1],head[N];\ninline void add_E(int x,int y){ver[++tot]=y,nxt[tot]=head[x],head[x]=tot;}\nint mx[N],dfn[N],fa[N];\nstruct F{int id,dfn;}a[N];\nbool cmp(F a,F b){return a.dfn>b.dfn;}\ninline int read()\n{\n\tint x=0;char c=getchar();bool f=0;\n\twhile(!isdigit(c)){if(c=='-') f=1;c=getchar();}\n\twhile(isdigit(c)){x=(x<<3)+(x<<1)+c-48;c=getchar();}\n\tif(f) x=-x;return x;\n}\ninline void write(int x)\n{\n\tif(x<0) putchar('-'),x=-x;\n\tif(x>9) write(x/10);\n\tputchar(x%10+'0');\n}\nvoid dfs(int x)\n{\n\ta[x].id=x;\n\ta[x].dfn=++tot;\n\tfor(int i=head[x];i;i=nxt[i])\n\t{\n\t\tint y=ver[i];\n\t\tif(y==fa[x]) continue;\n\t\tfa[y]=x;\n\t\tdfs(y);\n\t}\n}\ninline int calc(int w)\n{\n\tint res=0;\n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tint x=a[i].id,mx1=0,mx2=0;\n\t\tfor(int j=head[x];j;j=nxt[j])\n\t\t{\n\t\t\tint y=ver[j];\n\t\t\tif(y==fa[x]) continue;\n\t\t\tif(mx[y]>mx1) mx2=mx1,mx1=mx[y];\n\t\t\telse if(mx[y]>mx2) mx2=mx[y];\n\t\t}\n\t\tif(mx1+mx2+1>=w) res++,mx[x]=0;\n\t\telse mx[x]=mx1+1;\n\t}\n\treturn res;\n}\nint main()\n{\n\tscanf(\"%d\",&n);\n\tfor(int i=1;i<n;i++)\n\t{\n\t\tint x,y;\n\t\tx=read(),y=read();\n\t\tadd_E(x,y),add_E(y,x);\n\t}\n\ttot=0,dfs(1);\n\tsort(a+1,a+1+n,cmp);\n\tint B=sqrt(n*log2(n));\n\tfor(int i=1;i<=B;i++) write(calc(i)),puts(\"\");\n\tint x=B+1;\n\twhile(x<=n)\n\t{\n//\t\tprintf(\"x=%d\\n\",x);\n\t\tint now=calc(x);\n\t\tint l=x+1,r=n,res=x;\n\t\twhile(l<=r)\n\t\t{\n\t\t\tint mid=l+r>>1;\n\t\t\tif(calc(mid)==now) l=mid+1,res=mid;\n\t\t\telse r=mid-1;\n\t\t}\n\t\tfor(int i=1;i<=res-x+1;i++) write(now),puts(\"\");\n\t\tx=res+1;\n\t}\n}\n```\n\n~~\u6211\u7684\u4ee3\u7801\u6700\u6162\u7684\u7b2c8\u4e2a\u70b9\u8dd1\u4e863.54s\uff0c\u5341\u5206\u7684\u84bb~~",
        "postTime": 1653489900,
        "uid": 78229,
        "name": "ybe2007",
        "ccfLevel": 7,
        "title": "CF1039D You Are Given a Tree"
    },
    {
        "content": "### Preface\n\n\u4eba\u50bb\u5e38\u6570\u5927\uff0c\u4ee5\u540e\u7edd\u5bf9\u4e0d\u4e71\u52a0 GCC \u4f18\u5316\u3002\n\n### Analysis\n\n\u6839\u53f7\u5206\u6cbb\uff1a\u957f\u5ea6 $len\\ge\\sqrt{n}$ \u7684\u8def\u5f84\u6700\u5927\u6570\u91cf\u4e00\u5b9a $\\le\\sqrt{n}$\u3002\n\n\u5bf9\u4e8e\u56fa\u5b9a\u7684\u8def\u5f84\u957f\u5ea6 $len$\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u8f7b\u677e\u5730\u6811\u5f62 DP \u641e\u5b9a\u7b54\u6848\uff0c\u7531\u4e8e\u8fc7\u5206\u7b80\u5355\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002\n\n\u7136\u540e\u6211\u4eec\u9009\u5b9a\u5206\u6cbb\u70b9 $B$\u3002$len\\le B$ \u76f4\u63a5\u66b4\u529b\u6c42\uff1b$len>B$ \u65f6\u7b54\u6848\u6700\u591a\u4e0d\u8d85\u8fc7 $\\frac{n}{B}$\uff0c\u800c\u4e14\u7b54\u6848\u968f $len$ \u9012\u589e\u800c\u975e\u5347\uff0c\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u7b54\u6848 $x$\uff0c\u4e8c\u5206\u6700\u5927\u7684 $len$ \u4f7f\u5f97\u7b54\u6848\u4e3a $x$ \u5373\u53ef\u3002\n\n\u65f6\u95f4\u4e3a\uff1a\n\n$$O(B+\\frac{n\\log n}{B})$$\n\n$B$ \u53d6 $\\sqrt{n\\log n}$ \u6700\u4f18\u3002\n\n### Optimize\n\n~~\u5176\u5b9e\u8fd9\u5e38\u6570\u4f18\u5316\u624d\u662f\u91cd\u70b9\u3002~~\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/v8wmi9tz.png)\n\n\u4e0d\u8981\u4e71\u5f00 GCC \u4f18\u5316\uff01\u4e0d\u8981\u4e71\u5f00 GCC \u4f18\u5316\uff01\u4e0d\u8981\u4e71\u5f00 GCC \u4f18\u5316\uff01\n\nCF \u4e0a\u63d0\u4ea4\u4e86 $33$ \u6b21\uff08\u5934\u79c3\uff09\uff0c\u8bc1\u5b9e\u4e86\u6bcf\u6b21 DFS \u9012\u5f52\u6c42\u89e3\u7edd\u5bf9\u8fc7\u4e0d\u4e86\uff0c~~\u5982\u679c\u4f60\u8fc7\u4e86\u6211\u8bf7\u4f60\u62bd\u70df~~\u3002\n\n\u300c\u90a3\u548b\u529e\u5462\uff1f\u300d\n\n\u6211\u4eec\u5c06\u6811\u63d0\u524d\u505a\u597d DFS \u5e8f\uff0c\u4e4b\u540e\u5728\u6570\u7ec4\u4e0a\u975e\u9012\u5f52\u6c42\u89e3\u5feb\u4e0d\u5c11\u3002\n\n\u300c\u5f53\u7136\uff0c\u5feb\u8bfb\u5feb\u5199\u662f\u5fc5\u8981\u7684\u2026\u2026\u300d\n\n### Code\n\n[My Fastest:1325 ms](https://codeforces.com/contest/1039/submission/149086644)",
        "postTime": 1646915169,
        "uid": 101868,
        "name": "I_am_Accepted",
        "ccfLevel": 0,
        "title": "CF1039D You Are Given a Tree"
    },
    {
        "content": "\u5ba1\u6838\u5927\u5927\u6c42\u8fc7\n\n\u8003\u8651 $dp$ \uff0c\u8bbe $dp_i$ \u4e3a\u4ece $i$ \u7684\u5b50\u6811\u91cc\u5ef6\u4f38\u5230 $i$ \u7684\u6700\u957f\u7684\u94fe\u7684\u957f\u5ea6\u3002\n\n\u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\uff0c\u8bb0\u4e0b\u5b50\u8282\u70b9\u91cc $dp$ \u503c\u7684\u6700\u5927\u503c\u548c\u6b21\u5927\u503c\uff0c\u5982\u679c\u8fd9\u4e24\u4e2a\u503c\u5408\u5e76\u540e \u5927\u4e8e\u7b49\u4e8e\u6211\u4eec\u9700\u8981\u7684\u957f\u5ea6 $k$ \uff0c\u5c31\u5c06\u5176\u5408\u5e76\uff0c\u5e76\u5c06 $dp_i$ \u6e05\u96f6\uff08\u56e0\u4e3a\u8bb0\u5f55\u7684\u662f\u4e00\u7aef\u4e3a $i$ \u7684\u94fe\u7684\u957f\u5ea6\uff09\u53ef\u4ee5\u8bc1\u660e\u8fd9\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\n\n\u6027\u611f\u7684\u8bc1\u660e\uff1a\n\n\u53d1\u73b0\u5982\u679c\u5728\u4e00\u4e2a\u5730\u65b9\u80fd\u591f\u5408\u5e76\u7684\u4e00\u5b9a\u4f1a\u7acb\u523b\u5408\u5e76\uff0c\u56e0\u6b64\u8fd8\u4fdd\u7559\u5728 $dp_i$ \u91cc\u7684\u4e00\u5b9a\u662f\u8fd8\u4e0d\u53ef\u4ee5\u5408\u5e76\u7684\uff0c\u56e0\u6b64\u5728\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u5408\u5e76\u7684\u70b9\u9a6c\u4e0a\u5408\u5e76\u4e00\u5b9a\u662f\u6700\u4f18\u7684\u3002\n\n~~\u8bc1\u660e\u4e86\u548c\u6ca1\u8bc1\u660e\u4e00\u6837~~\n\n\u7136\u540e\u6211\u4eec\u6709\u4e24\u6761\u8def\u5b50\uff1a\n\n1. \u6839\u53f7\u5206\u6cbb\n\n\u9996\u5148\u628a $k \\le \\sqrt{n}$ \u7684\u76f4\u63a5 $O(n)$ \u5904\u7406\u6389\uff0c\u53d1\u73b0\u4e4b\u540e $k$ \u5927\u4e8e $\\sqrt{n}$ \u7684\u90e8\u5206\u7b54\u6848\u90fd\u5c0f\u4e8e $\\sqrt{n}$\uff0c \u56e0\u6b64\u901a\u8fc7\u4e8c\u5206\u627e\u51fa\u7b54\u6848\u76f8\u540c\u7684\u4e00\u6bb5\u533a\u95f4\u76f4\u63a5\u8d4b\u503c\uff0c\u590d\u6742\u5ea6\u4e3a $O(n\\sqrt{n}\\log n)$\n\n2. \u6574\u4f53\u4e8c\u5206\n\n\u53d1\u73b0\u968f\u7740 $k$ \u7684\u589e\u5927\u7b54\u6848\u51cf\u5c0f\uff0c\u56e0\u6b64\u5bf9\u4e8e\u4e00\u4e2a\u8be2\u95ee\u533a\u95f4\uff0c\u5148\u6c42\u51fa\u533a\u95f4\u4e2d\u70b9 $mid$ \u7684\u7b54\u6848 $tot$ \uff0c\u7136\u540e\u5de6\u534a\u8fb9\u7684\u7b54\u6848\u8303\u56f4\u5c31\u5728 $tot \\sim n$ \uff0c\u53f3\u534a\u8fb9\u7684\u7b54\u6848\u8303\u56f4\u5c31\u5728 $0 \\sim tot$ \uff0c\u5f53\u7b54\u6848\u8303\u56f4\u7f29\u5c0f\u5230\u4e00\u4e2a\u6570\u540e\u76f4\u63a5\u8d4b\u503c\u5373\u53ef\u3002\n\n\u4f46\u8fd9\u73a9\u610f\u7684\u590d\u6742\u5ea6\u597d\u50cf\u662f\u5047\u7684\uff08\u6211\u8bc1\u4e0d\u51fa\u6765\uff0c\u5982\u679c\u6709\u5927\u4f6c\u8bc1\u51fa\u6765\u53ef\u4ee5\u8bc4\u8bba\u4e00\u4e0b\u6253\u8138\u6211\uff09\uff0c\u56e0\u6b64\u590d\u6742\u5ea6\u6b63\u786e\u7684\u505a\u6cd5\u8fd8\u662f\u548c\u524d\u4e00\u79cd\u4e00\u6837\uff0c\u5148\u66b4\u529b\u7b97\u51fa $k \\le \\sqrt{n}$ \u7684\u7b54\u6848\uff0c\u7136\u540e\u5728 $\\sqrt{n}+1$ \u5230 $n$ \u7684\u90e8\u5206\u6574\u4f53\u4e8c\u5206\uff0c\u56e0\u4e3a\u7b54\u6848\u53ea\u6709 $\\sqrt{n}$ \u4e2a\uff0c\u5206\u6cbb\u6811\u53ea\u6709 $log n$ \u5c42\uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u8fd8\u662f $O(n\\sqrt{n}\\log n)$ \u3002 ~~\u672c\u8d28\u76f8\u540c~~\n\n\u5927\u6982\u5c31\u662f\u8fd9\u4e48\u591a\uff0c\u7b97\u662f\u5f88\u5178\u7684\u9898\u4e86\u3002",
        "postTime": 1644412129,
        "uid": 124918,
        "name": "LinkyChristian",
        "ccfLevel": 6,
        "title": "\u3010\u9898\u89e3\u3011CF1039D You Are Given a Tree"
    },
    {
        "content": "\u672c\u6587\u540c\u6b65\u4e8e[CF1039D You Are Given a Tree](https://www.cnblogs.com/dixiao/p/14761858.html)\n\n\u8fd9\u4e2a\u9898\u597d\u50cf\u8d2a\u5fc3\u505a\u6cd5\u5c31\u4e0d\u592a\u4f1a\u3002/wq\n\n\u679c\u7136\u662f\u56e0\u4e3a\u81ea\u5df1\u592a\u83dc\u4e86\u3002\u8fd9\u662f\u4e00\u4e2a\u6839\u53f7\u5206\u6cbb\u7684\u9898\u76ee\uff0c\u4e0d\u8fc7\u597d\u50cf\u4e5f\u53ef\u4ee5\u6574\u4f53\u4e8c\u5206\uff0c\u6574\u4f53\u4e8c\u5206\u8fd8\u5728\u5b66\uff0c\u5982\u679c\u5b66\u4e86\u4f1a\u56de\u6765\u518d\u505a\u4e00\u904d\u8fd9\u4e2a\u9898\u3002\n\n\u5148\u8003\u8651\u5199\u51fa\u4e00\u4e2a\u8d2a\u5fc3\uff0c\u8003\u8651\u5982\u679c\u6709\u80fd\u62fc\u8d77\u6765\u5927\u4e8e $k$ \u7684\u94fe\uff0c\u6211\u4eec\u5c31\u62fc\u8d77\u6765\uff0c\u90a3\u4e48\u8fd9\u6837\u4e00\u6b21\u64cd\u4f5c\u662f $O(n)$ \u7684\u3002\n\n\u5982\u679c\u6211\u4eec\u5bf9\u6240\u6709\u7b54\u6848\u90fd\u8fdb\u884c\u64cd\u4f5c\u7684\u8bdd\uff0c\u662f\u4e00\u4e2a $O(n ^ 2)$\u7684\u590d\u6742\u5ea6\u3002\n\n\u6211\u4eec\u8003\u8651\u5982\u679c\u6211\u4eec\u628a $k <= T$ \u7684\u64cd\u4f5c\u76f4\u63a5\u66b4\u529b\u505a\uff0c\u90a3\u8fd9\u662f\u4e00\u4e2a $O(nT)$ \u7684\u4e1c\u897f\u3002\n\n\u6211\u4eec\u8003\u8651\u5bf9\u4e8e $k$ \u6765\u8bf4\uff0c\u4ed6\u7684\u7b54\u6848\u662f\u6709\u5355\u8c03\u6027\u7684\uff0c\u6211\u4eec\u5bf9 $k >= T$ \u8003\u8651\u4e8c\u5206\uff0c\u4e8c\u5206\u5230\u6700\u53f3\u8fb9\u90a3\u4e2a\u7b54\u6848\u4e00\u6837\u7684\u70b9\uff0c\u90a3\u8fd9\u662f\u4e00\u4e2a $O(\\frac{n^2logn}{T})$ \u7684\u4e1c\u897f\u3002\n\n\u4f9d\u5747\u503c\u4e0d\u7b49\u5f0f\uff0c\u53d6 $T = \\sqrt{(nlogn)}$ \u8f83\u4f18\u3002\n\n\u4e8c\u5206\u4e4b\u540e\u5f80\u9700\u8981\u7684\u90a3\u4e00\u8fb9\u6269\u5c55\u662f\u6211\u7684\u4e00\u4e2a\u4e60\u60ef\uff0c\u5bb3\u6015\u6709\u4e9b\u5730\u65b9\u4e8c\u5206\u4f1a\u6302\u6389\uff0c\u6bd5\u7adf\u4e0d\u540c\u7684\u4e8c\u5206\u7684\u8bdd\uff0c\u548c\u6b63\u786e\u7b54\u6848\u7684\u5dee\u522b\u4e0d\u8d85\u8fc7$2$\u5de6\u53f3\uff0c\u6240\u4ee5\u5176\u5b9e\u6ca1\u6709\u6162\u591a\u5c11\u3002\n\n\n```\n#include<iostream>\n#include<cstdio>\n#include<cmath>\n#define ll long long\n#define N 100005\n\nll n;\n\nll head[N],cnt;\n\nstruct P{\n\tint to,next;\n}e[N * 2];\n\ninline void add(int x,int y){\n\te[++cnt].to = y;\n\te[cnt].next = head[x];\n\thead[x] = cnt;\n}\n\nll fa[N],dfn[N],dfncnt;\n\ninline void dfs(int u,int f){\n\tfa[u] = f;\n\tfor(int i = head[u];i;i = e[i].next){\n\t\tint v = e[i].to;\n\t\tif(v == f)\n\t\tcontinue;\n\t\tdfs(v,u);\n\t}\n\tdfn[++dfncnt] = u;\n}\n\nll f[N];//\u8be5\u70b9\u4e0b\u6700\u957f\u6709\u591a\u5c11\u94fe \n\ninline ll solve(int k){\n\tll ans = 0;\n\tfor(int i = 1;i <= n;++i)\n\tf[i] = 1;\n\tfor(int i = 1;i <= n;++i){\n\t\tint u = dfn[i];\n\t\tint fi = fa[u];\n\t\tif(fi && f[u] != -1 && f[fi] != -1)\n\t\tif(f[u] + f[fi] >= k)\n\t\tans ++ ,f[fi] = -1;\n\t\telse\n\t\tf[fi] = std::max(f[fi],f[u] + 1);\n\t}\n\treturn ans;\n}\n\nll ans[N];\n\nint main(){\n\tscanf(\"%lld\",&n);\n\tfor(int i = 1;i < n;++i){\n\t\tint x,y;\n\t\tscanf(\"%d%d\",&x,&y);\n\t\tadd(x,y);add(y,x);\n\t}\n\tdfs(1,0);\n\tll s = std::sqrt(n * log2(n));\n\tans[1] = n;//\u8fd9\u91cc\u56e0\u4e3a\u4e0d\u7528\u548c\u7236\u4eb2\u94fe\uff0c\u6240\u4ee5\u76f4\u63a5solve\u53ef\u80fd\u4f1a\u51fa\u4e8b\u3002 \n\tfor(int i = 2;i <= s;++i)\n\tans[i] = solve(i);\n\tfor(int i = s + 1;i <= n;++i){\n\t\tans[i] = solve(i);\n\t\tint l = i,r = n,to = i;\n\t\twhile(l <= r){\n\t\t\tll mid = (l + r) >> 1;\n\t\t\tif(solve(mid) == ans[i])\n\t\t\tl = mid + 1,to = mid;\n\t\t\telse\n\t\t\tr = mid - 1;\n//\t\t\tstd::cout<<l<<\" \"<<r<<std::endl;\n\t\t}\n\t\tto -= 1;//\u7528\u4e00\u70b9\u65f6\u95f4\u6362\u7b54\u6848\u6b63\u786e\u3002 \n\t\twhile(solve(to + 1) == ans[i] && to <= n)\n\t\tto ++ ;\n\t\tfor(int j = i + 1;j <= to;++j)\n\t\tans[j] = ans[i];\n\t\ti = to; \n\t}\n\tfor(int i = 1;i <= n;++i)\n\tstd::cout<<ans[i]<<std::endl;\n}\n```\n",
        "postTime": 1620827243,
        "uid": 138390,
        "name": "fhq_treap",
        "ccfLevel": 7,
        "title": "CF1039D"
    },
    {
        "content": "\u9996\u5148\u8bb2\u4e00\u8bb2O(N^2)\u7684\u505a\u6cd5\n\nO(N^2)\u5c31\u662f\u679a\u4e3e\u6bcf\u4e2ak\uff0c\u7136\u540eO(N)\u5224\u65ad\n\n\u600e\u4e48\u5224\u65ad\u5462\uff1f\n\n\u9047\u5230\u6811\u4e0a\u7684\u8986\u76d6\u95ee\u9898\uff0c\u5f80\u5f80\u90fd\u662f\u8d2a\u5fc3\uff01\n\n\u6211\u4eec\u53ef\u4ee5dfs\u8d2a\u5fc3\u5224\u65ad\uff0c\u5177\u4f53\u7684\u5c31\u662f\u6bcf\u4e2a\u70b9\u7ef4\u62a4\u4e00\u4e2a\u5f80\u4e0b\u6269\u5c55\u7684\u6700\u957f\u548c\u6b21\u957f\u7684\u8ddd\u79bb\uff0c(\u4e0d\u5305\u62ec\u5f53\u524d\u7684\u70b9)\u8bb0\u4e3aMx1,Mx2\n\n\u6211\u4eec\u5b9a\u4e49Mx1\u6240\u5728\u7684\u8282\u70b9\u4e3a\u6240\u6709\u5728Mx1\u8bb0\u5f55\u7684\u8fd9\u6761\u94fe\u4e0a\u7684\u70b9\uff0cMx2\u540c\u7406\uff01\n\n\u5982\u679cMx1+Mx2+1>=k\u90a3\u4e48\u6211\u4eec\u5c31\u628a\u8fd9\u6761\u94fe\u63d0\u51fa\u6765\uff0c\u8fd9\u80af\u5b9a\u662f\u6700\u4f18\u7684\uff0c\u5426\u5219Mx2\u6240\u5728\u7684\u8282\u70b9\u5c06\u4e0d\u88ab\u8986\u76d6\uff0c\u5e76\u4e14\u8fd8\u8981\u8986\u76d6Mx1\u6240\u5728\u7684\u8282\u70b9\u548c\u5f53\u4e14\u8282\u70b9\u548c\u5f53\u524d\u8282\u70b9\u7684fa\uff0c\u4f46\u662f\u5982\u679c\u8986\u76d6\u5c31\u53ea\u4f1a\u8986\u76d6Mx1\u6240\u5728\u7684\u8282\u70b9\u548cMx2\u6240\u5728\u7684\u8282\u70b9\u548c\u5f53\u524d\u8282\u70b9\uff0c\u6bd4\u4e0a\u8ff0\u66f4\u4f18\uff01\n\n\u8fd9\u4e2a\u5224\u65ad\u7c7b\u4f3c\u4e8enoip2018\u7684\u8d5b\u9053\u4fee\u5efa\uff01\n\n\u7ed9\u51fa\u6838\u5fc3\u4ee3\u7801\uff1a\n```cpp\ninline void dfs(int x, int Fa) {\n\tint Mx1 = 0, Mx2 = 0;\n\tfor (int i = head[x]; i; i = nxt[i]) {\n\t\tint y = to[i];\n\t\tif (y != Fa) {\n\t\t\tdfs(y, x);\n\t\t\tif (dp[y] > Mx1) Mx2 = Mx1, Mx1 = dp[y]; else if (dp[y] > Mx2) Mx2 = dp[y];\n\t\t}\n\t}\n\tif (Mx1 + Mx2 + 1 >= cur) dp[x] = 0, cnt++; else dp[x] = Mx1 + 1;\n}\n```\n\n\n\u5269\u4e0b\u7684\u6211\u4eec\u8003\u8651\u600e\u4e48\u4f18\u5316\uff01\n\nO(N)\u7684\u5224\u65ad\u663e\u7136\u4e0d\u592a\u53ef\u4ee5\u4f18\u5316\uff0c\u6211\u4eec\u8981\u8003\u8651\u4f18\u5316\u679a\u4e3ek\u7684\u8fc7\u7a0b\n\n\u6211\u4eec\u53d1\u73b0k\u9012\u589e\u7684\u60c5\u51b5\u4e0b\u7b54\u6848\u5355\u8c03\u4e0d\u589e\uff01\n\n\u65e2\u7136\u7b54\u6848\u6709\u5355\u8c03\u6027\uff0c\u6211\u4eec\u6709\u53d1\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u5176\u5b9e\u548c\u6574\u6570\u5206\u5757\u7684\u8fc7\u7a0b\u5f88\u50cf\uff01\n\n\u7b54\u6848\u7684\u53d6\u503c\u662fO(sqrt(N))\u79cd\n\n\u5bf9\u4e8ek<=sqrt(N)\u7684\u6211\u4eec\u53ef\u4ee5\u66b4\u529b\u679a\u4e3e\n\nk>sqrt(N)\u7684\u7b54\u6848\u663e\u7136\u53ea\u6709<=sqrt(N)\u7684\uff0c\u6211\u4eec\u679a\u4e3e\u7b54\u6848\uff0c\u6c42\u51fa\u7b54\u6848\u8986\u76d6\u7684k\u5206\u522b\u662f\u4eceLk-Rk\u7684\uff0c\u5c31\u53ef\u4ee5\u4e86\uff01\n\n\u4f46\u662f\u53d1\u73b0\u76f4\u63a5\u6309\u7167\u4e0a\u8ff0\u8fc7\u7a0b\u6a21\u62df\uff0c\u7801\u91cf\u7a0d\u5927\uff0c\u5e76\u4e14\u8981\u5e26\u4e00\u4e2alog\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u5199\u4e00\u4e2a\u6574\u4f53\u4e8c\u5206\uff0c\u4f46\u662f\u8fd9\u4e2a\u6574\u4f53\u4e8c\u5206\u5e76\u4e0d\u662flog\u7684\u590d\u6742\u5ea6\uff0c\u800c\u662fO(N*sqrt(N))\u7684\n\n\u5176\u5b9e\u6211\u4eec\u53ea\u662f\u5199\u4e86\u4e00\u4e2aO(N^2)\u7684\u6574\u4f53\u4e8c\u5206\uff0c\u4f46\u662f\u5229\u7528\u4e0a\u8ff0\u6027\u8d28\u5728\u4f18\u5316\uff0c\u6700\u7ec8\u590d\u6742\u5ea6\u662fO(N*sqrt(N))\u7684\uff0c\u5e76\u4e14\u4ee3\u7801\u975e\u5e38\u77ed\uff01\n\n\u4ee5\u4e0b\u662f\u6574\u4f53\u4e8c\u5206\u7684\u6838\u5fc3\u4ee3\u7801\uff1a\n```cpp\ninline void solve(int l, int r, int L, int R) {\n\tif (l > r || L > R) return;\n\tif (L == R) {\n\t\tfor (int i = l; i <= r; i++) ans[i] = L; return;\n\t}\n\tint mid = (l + r) >> 1;\n\tcur = mid; cnt = 0; dfs(1, 0); ans[mid] = cnt;\n\tsolve(l, mid - 1, cnt, R); solve(mid + 1, r, L, cnt);\n}\n```\n",
        "postTime": 1577611972,
        "uid": 203968,
        "name": "ConorGallagher23",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1039D \u3010You Are Given a Tree\u3011"
    }
]
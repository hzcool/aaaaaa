[
    {
        "content": "\u8bdd\u8bf4\u793e\u8bba\u4e2d\u8c8c\u4f3c\u6709\u591a\u9879\u5f0f\u65f6\u95f4\u7684\u505a\u6cd5...\uff08Orz\uff09\n\n\u8be6\u89c1 [\u6b64\u5904](https://codeforces.com/blog/entry/61727) \u4e0b\u9762\u7684 `dragonslayerintraining` \u7684\u8bc4\u8bba\uff08[code](https://codeforces.com/contest/1036/submission/67053099)\uff09\n\n## \u89e3\u6790\n\n\u8bbe $S$ \u4e3a\u4e00\u4e9b\u6e90\u7ed3\u70b9 $s$ \u7684\u96c6\u5408\uff0c\u8bbe $f(S)$ \u4e3a\u6240\u6709\u80fd\u88ab $S$ \u4e2d\u67d0\u4e00\u4e2a\u5143\u7d20\u5230\u8fbe\u7684\u6c47\u7ed3\u70b9 $t$ \u7684\u96c6\u5408\uff0c\u8bbe\u6e90\u7ed3\u70b9/\u6c47\u7ed3\u70b9\u7684\u603b\u6570 $C$\n\n\u6211\u4eec\u6709\u7ed3\u8bba\uff1a\n\n1. \u82e5\u5bf9\u4e8e\u6240\u6709\u53ef\u80fd\u7684 $S$ \u6ee1\u8db3 $|S|\\not =C$\uff08\u6ce8\u610f\u8fd9\u548c $|f(S)|\\not =C$ \u4e0d\u7b49\u4ef7\uff09\u4e14 $|S|\\not=0$\uff0c\u6709 $|S|\\geq |f(S)|$\uff0c\u90a3\u4e48\u7b54\u6848\u662f `NO`\n2. \u82e5\u4e0d\u6ee1\u8db3 $1.$\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f `YES`\n\n\u5148\u8bc1\u660e $1.$\u3002\u7531\u4e8e $|S|\\geq |f(S)|$\uff0c\u53ea\u9700\u8003\u8651\u5c06 $f(S)$ \u5747\u4e0e $S$ \u5185\u6c47\u7ed3\u70b9\u914d\u5bf9\uff0c\u90a3\u4e48 $f(S)$ \u5185\u7684\u6c47\u7ed3\u70b9\u5c31\u6c38\u8fdc\u65e0\u6cd5\u5230\u8fbe\u5176\u5b83\u4e0d\u5c5e\u4e8e $f(S)$ \u7684\u6c47\u7ed3\u70b9\u4e86\n\n\u63a5\u7740\u8bc1\u660e $2.$\u3002\u6211\u4eec\u8003\u8651\u7528\u5f52\u7eb3\u6cd5\u8bc1\u660e\uff1a\n\n1. \u521d\u59cb\u65f6\uff0c\u5bf9\u4e8e\u4efb\u610f\u6c47\u7ed3\u70b9 $t$ \u5b83\u663e\u7136\u53ef\u4ee5\u5230\u8fbe\u81ea\u5df1\n2. \u8bbe $T_t$ \u662f $t$ \u53ef\u4ee5\u5230\u8fbe\u7684\u6c47\u7ed3\u70b9\u7684\u96c6\u5408\uff0c\u8bbe $h(T_t)$ \u8868\u793a $T_t$ \u6240\u6709\u5143\u7d20\u4e0e\u6e90\u7ed3\u70b9\u914d\u5bf9\u540e\uff0c\u914d\u5bf9\u7684\u6e90\u7ed3\u70b9\u53ef\u4ee5\u5230\u8fbe\u7684\u6c47\u7ed3\u70b9\u7684\u96c6\u5408\uff08\u8bbe $T_t$ \u914d\u5bf9\u7684\u6e90\u7ed3\u70b9\u96c6\u5408\u4e3a $S_{T_t}$ \u5e94\u6709 $|S_{T_t}|=|T_t|$\uff0c\u8fd9\u91cc\u5373\u6307 $f(S_{T_t})$\uff09\uff0c\u4e14\u53d1\u73b0 $h(T_t)$ \u4e5f\u662f\u53ef\u4ee5\u88ab $t$ \u5230\u8fbe\u7684\u3002\u6b64\u65f6\u8981\u4e48 $|T_t|=C$\uff0c\u90a3\u4e48\u6574\u5f20\u56fe\u5c31\u53ef\u4ee5\u88ab $t$ \u5230\u8fbe\uff1b\u5426\u5219\u5c31\u6709 $|h(T_t)|$ \u81f3\u5c11\u4e3a $|T_t|+1$\uff0c\u8fd9\u6837\u5f52\u7eb3\u4e0b\u53bb\uff0c$t$ \u6700\u540e\u4e00\u5b9a\u80fd\u5230\u8fbe\u6574\u5f20\u56fe\n\n\u8bc1\u660e\u6bcf\u4e2a\u6c47\u70b9\u6700\u540e\u80fd\u5230\u8fbe\u6574\u5f20\u56fe\u540e\uff0c\u663e\u7136\u6574\u5f20\u56fe\u5c31\u6210\u4e3a\u4e86\u4e00\u4e2a\u5f3a\u8054\u901a\u5206\u91cf\n\n\u4e8e\u662f\u679a\u4e3e $S$ \u68c0\u67e5\u5176 $f(S)$ \u5373\u53ef\uff0c\u590d\u6742\u5ea6 $O(2^{20}+n+m)$\uff08\u6700\u574f\uff09\n\n\u5173\u4e8e\u5177\u4f53\u5b9e\u73b0\u65f6\u5982\u4f55\u5904\u7406\u51fa\u6bcf\u4e2a\u6e90\u7ed3\u70b9\u53ef\u4ee5\u5230\u8fbe\u7684\u6c47\u7ed3\u70b9\uff0c\u53ef\u4ee5\u8003\u8651\u72b6\u538b\u6c47\u7ed3\u70b9\uff0c\u7136\u540e\u4ece\u6bcf\u4e2a\u6e90\u7ed3\u70b9 dfs\uff0cdp \u5904\u7406\u51fa\u6bcf\u4e2a\u7ed3\u70b9\u80fd\u5230\u8fbe\u7684\u6c47\u7ed3\u70b9\u96c6\u5408\u3002\u7531\u4e8e\u539f\u56fe\u4e0d\u5b58\u5728\u73af\uff0c\u56e0\u6b64 dfs \u65f6\u4e00\u5b9a\u4e0d\u4f1a\u51fa\u73b0\u8bbf\u95ee dfs \u6811\u7684\u7236\u4eb2\u7684\u60c5\u51b5\n\n## CODE\n\n```cpp\n#include <cstdio>\n\n/*------------------------------Map------------------------------*/\n\nconst int MAXN =1e6+50;\n\nint first[MAXN], tote;\nbool vis[MAXN];\nstruct edge{\n\tint net, to;\n}e[MAXN];\n\ninline void addedge(const int &u, const int &v){\n\t++tote;\n\te[tote].net =first[u], first[u] =tote, e[tote].to =v;\n}\n\n/*------------------------------Dfs------------------------------*/\n\nint in[MAXN], out[MAXN];\nint reach[MAXN];\nint id[MAXN];\nint s[20], t[20], tots, tott;\n\nvoid dfs(const int &u){\n\tvis[u] =1;\n\tfor(int l =first[u]; l; l =e[l].net){\n\t\t\tdfs(e[l].to);\n\t\t\treach[u] |=reach[e[l].to];\n\t\t}\n\tif(out[u] == 0)\n\t\treach[u] =(1<<id[u]);\n}\n\nbool NO =0;\n\nvoid dfs_check(const int &i, const int &cnts, const int &reach_nw){\n\tif(i == tots){\n\t\tif(cnts != 0 && cnts != tots && cnts >= __builtin_popcount(reach_nw))\n\t\t\tNO =1;\n\t}\n\telse{\n\t\tdfs_check(i+1, cnts, reach_nw);\n\t\tdfs_check(i+1, cnts+1, reach_nw|reach[s[i]]);\n\t}\n}\n\n/*------------------------------main------------------------------*/\n\nint read(){\n\tint x =0; char c =getchar(); bool f =0;\n\twhile(c < '0' || c > '9') (c == '-') ? f =1, c =getchar() : c =getchar();\n\twhile(c >= '0' && c <= '9') x =(x<<1)+(x<<3)+(48^c), c =getchar();\n\treturn (f) ? -x : x;\n}\n\nint main(){\n\tint n =read(), m =read();\n\tfor(int i =0; i < m; ++i){\n\t\tint u =read(), v =read();\n\t\taddedge(u, v);\n\t\t++in[v], ++out[u];\n\t}\n\tfor(int i =1; i <= n; ++i){\n\t\tif(in[i] == 0)\n\t\t\ts[tots++] =i, id[i] =tots-1;\n\t\tif(out[i] == 0)\n\t\t\tt[tott++] =i, id[i] =tott-1;\n\t}\n\tfor(int i =1; i <= n; ++i)\n\t\tif(in[i] == 0)\n\t\t\tdfs(i);\n\tdfs_check(0, 0, 0);\n\tif(NO)\n\t\tputs(\"NO\");\n\telse\n\t\tputs(\"YES\");\n}\n```",
        "postTime": 1605568552,
        "uid": 105254,
        "name": "Piwry",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1036G \u3010Sources and Sinks\u3011"
    }
]
[
    {
        "content": "### Analysis\n\n\u8003\u8651\u5f53\u6211\u4eec\u5e97\u5f00\u5728\u54ea\u4e00\u6bb5\u533a\u95f4\u91cc\u65f6\uff0c\u67d0 Hut \u91cc\u7684\u4eba\u4f1a\u53bb\u4e70\u6211\u4eec\u7684\u51b0\u6dc7\u51cc\u3002\n\n\u6211\u4eec\u53ef\u4ee5 simple \u5730\u7ebf\u6027\u6c42\u51fa\u79bb\u6bcf\u4e2a Hut \u6700\u8fd1\u7684\u7ade\u4e89\u5546\u8d29\u6709\u591a\u8fd1\u3002\u8bbe\u5f53\u524d\u8003\u8651\u7684 Hut \u7684\u4f4d\u7f6e\u4e3a $x$\uff0c\u6700\u8fd1\u7684\u7ade\u4e89\u5546\u8d29\u8ddd\u79bb\u5b83 $d$ \u8ddd\u79bb\uff0c\u90a3\u6211\u4eec\u5f00\u5728 $(x-d,x+d)$\uff08\u5de6\u53f3\u7aef\u5747\u5f00\u533a\u95f4\uff09\u533a\u95f4\u5185\u8fd9 Hut \u91cc\u7684\u4eba\u4f1a\u4e70\u6211\u4eec\u7684\u51b0\u6dc7\u51cc\u3002\n\n\u5bf9\u6bcf\u4e00\u4e2a Hut \u6c42\u51fa\u4e0a\u8ff0\u7684\u533a\u95f4\uff0c\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a**\u6570\u8f74\u4e0a\u6709 $n$ \u6bb5\u533a\u95f4\uff0c\u6c42\u88ab\u8986\u76d6\u6b21\u6570\u6700\u591a\u7684\u70b9**\u3002\n\n\u8fd9\u6837\u5c31\u7b80\u5355\u4e86\uff1a\u6bcf\u4e2a\u533a\u95f4\u6539\u6210\u5de6\u52a0\u53f3\u51cf\u7684\u5f62\u5f0f\uff0c\u6392\u5e8f\uff0c\u626b\u63cf\u5373\u53ef\u3002\n\n\u65f6\u95f4 $O(n\\log n+m)$\n\n### Code\n\n```cpp\n//Said no more counting dollars. We'll be counting stars.\n#pragma GCC optimize(\"Ofast\")\n//#pragma GCC optimize(\"unroll-loops\")//DONT use rashly,I have suffered\n//#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4,popcnt,abm,mmx,avx,avx2,tune=native\")//DONT use rashly,I have suffered\n#include<bits/stdc++.h>\nusing namespace std;\n#define IOS ios::sync_with_stdio(0);cin.tie(0);cout.tie(0)\n#define fir first\n#define sec second\n#define mkp make_pair\n#define pb emplace_back\n#define mem(x,y) memset(x,y,sizeof(x))\n#define For(i,j,k) for(int i=j;i<=k;i++)\n#define Rof(i,j,k) for(int i=j;i>=k;i--)\n#define Fe(x,y) for(int x=head[y];x;x=e[x].nxt)\n#define ckmx(a,b) a=max(a,b)\n#define ckmn(a,b) a=min(a,b)\n#define fin(s) freopen(s,\"r\",stdin)\n#define fout(s) freopen(s,\"w\",stdout)\n#define file(s) fin(s\".in\");fout(s\".out\")\n#define cerr cerr<<'_'\n#define debug cerr<<\"Passed line #\"<<__LINE__<<endl\ntemplate<typename T>T ov(T x){cerr<<\"Value: \"<<x<<endl;return x;}\n#define ll long long\nconst ll mod=1000000007;\ninline ll pw(ll x,ll y){ll r=1;while(y){if(y&1)r=r*x%mod;x=x*x%mod;y>>=1;}return r;}\ninline void mad(ll &a,ll b){a=(a+b)%mod;while(a<0)a+=mod;}\ninline void mmu(ll &a,ll b){a=a*b%mod;while(a<0)a+=mod;}\n#define inv(a) pw(a,mod-2)\n#define int long long\n#define N 200010\nconst int inf=1e17;\nconst double eps=0.1;\nint n,m,p[N],b[N],L[N],R[N];\npair<double,int> q[2*N]; \nsigned main(){IOS;\n\tcin>>n>>m;\n\tFor(i,1,n) cin>>p[i];\n\tFor(i,1,m) cin>>b[i];\n\tsort(b+1,b+1+m);\n\tint tmp=0,x;\n\tFor(i,1,n){\n\t\tx=(i-1)*100;\n\t\twhile(tmp<m && b[tmp+1]<=x) tmp++;\n\t\tif(tmp==0) L[i]=inf;\n\t\telse L[i]=x-b[tmp];\n\t}\n\ttmp=m+1;\n\tRof(i,n,1){\n\t\tx=(i-1)*100;\n\t\twhile(tmp>1 && b[tmp-1]>x) tmp--;\n\t\tif(tmp==m+1) R[i]=inf;\n\t\telse R[i]=b[tmp]-x;\n\t}\n\tdouble y;\n\tFor(i,1,n){\n\t\tx=(i-1)*100;\n\t\ty=(double)min(L[i],R[i])-eps;\n\t\tq[2*i-1]=mkp(x-y,p[i]);\n\t\tq[2*i]=mkp(x+y,-p[i]);\n\t}\n\tsort(q+1,q+1+2*n);\n\tint ans=0;\n\tx=0;\n\tFor(i,1,2*n){\n\t\tx+=q[i].sec;\n\t\tckmx(ans,x);\n\t}\n\tcout<<ans<<endl;\nreturn 0;}\n```\n\n",
        "postTime": 1650948909,
        "uid": 101868,
        "name": "I_am_Accepted",
        "ccfLevel": 0,
        "title": "CF1662I Ice Cream Shop\uff08\u8f6c\u4e00\u7ef4\u533a\u95f4\u95ee\u9898\uff09"
    },
    {
        "content": "[\u53ef\u80fd\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c](https://www.cnblogs.com/jiangtaizhe001/p/16196233.html)\n### \u9898\u76ee\u5927\u610f\n\u5728\u6c99\u6ee9\u4e0a\u6709 $n$ \u4e2a\u5c0f\u5c4b\uff0c\u53ef\u4ee5\u770b\u505a\u5c0f\u5c4b\u5728\u4e00\u6761\u6570\u8f74\u4e0a\uff0c\u7b2c $i$ \u4e2a\u5c0f\u5c4b\u7684\u4f4d\u7f6e\u4e3a $(i-1)\\times100$\uff0c\u91cc\u9762\u6709 $p_i$ \u4e2a\u4eba\u3002\u8fd9\u6761\u6570\u8f74\u4e0a\u8fd8\u6709 $m$ \u4e2a\u5c0f\u5c4b\uff0c\u6bcf\u4e2a\u4e70\u51b0\u6dc7\u6dcb\u7684\u5546\u5e97\uff0c\u7b2c $i$ \u4e2a\u5546\u5e97\u7684\u4f4d\u7f6e\u4e3a $x_i$\u3002  \n\u73b0\u5728\u4f60\u53ef\u4ee5\u518d\u6570\u8f74\u4e0a\u4efb\u610f\u4e00\u4e2a\u4f4d\u7f6e\uff08\u4e0d\u9700\u8981\u4e3a\u6574\u6570\uff01\uff09\u5f00\u4e00\u4e2a\u51b0\u6dc7\u6dcb\u5546\u5e97\uff0c\u5982\u679c\u4e00\u4e2a\u5c0f\u5c4b\u5230\u4f60\u5f00\u7684\u51b0\u6dc7\u6dcb\u5e97\u7684\u8ddd\u79bb\u6bd4\u539f\u6709\u6240\u4ee5\u7684\u51b0\u6dc7\u6dcb\u70b9\u66f4\u52a0\u8fd1\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5c0f\u5c4b\u91cc\u9762\u6240\u6709\u7684\u4eba\u90fd\u4f1a\u5230\u4f60\u5f00\u7684\u51b0\u6dc7\u6dcb\u5e97\u4e70\u51b0\u6dc7\u6dcb\u3002  \n\u6ce8\u610f\u53ef\u80fd\u5b58\u5728\u51b0\u6dc7\u6dcb\u5e97\u548c\u5c0f\u5c4b\u5728\u540c\u4e00\u4f4d\u7f6e\uff0c\u4f60\u5f00\u7684\u51b0\u6dc7\u6dcb\u5e97\u4e5f\u53ef\u4ee5\u548c\u5c0f\u5c4b\u5728\u540c\u4e00\u4f4d\u7f6e\u3002  \n\u73b0\u5728\u6c42\u5230\u4f60\u5f00\u7684\u51b0\u6dc7\u6dcb\u5e97\u4e70\u51b0\u6dc7\u6dcb\u7684\u4eba\u7684\u6700\u5927\u4eba\u6570\u3002  \n$1\\le n,m\\le 2\\times 10^5,0\\le p_i,x_i\\le 10^9,p_i,x_i\\in\\mathbb{Z}$\uff0c\u4fdd\u8bc1 $x_i$ \u4e92\u4e0d\u76f8\u7b49\u3002\n### \u9898\u76ee\u89e3\u6790\n\u6211\u4eec\u53ef\u4ee5\u5148\u6c42\u51fa\u7b2c $i$ \u4e2a\u5c0f\u5c4b\u7684\u4eba\u5230\u4f60\u5f00\u7684\u51b0\u6dc7\u6dcb\u5e97\u6765\u4e70\u51b0\u6dc7\u6dcb\uff0c\u9700\u8981\u6ee1\u8db3\u51b0\u6dc7\u6dcb\u5e97\u7684\u4f4d\u7f6e\uff08\u4e00\u4e2a\u5f00\u533a\u95f4 $(l_i,r_i)$\uff09,\u4e0d\u96be\u53d1\u73b0\uff0c\u5982\u679c\u8bbe $f_i$ \u4e3a\u8ddd\u79bb\u7b2c $i$ \u4e2a\u5c0f\u5c4b\u6700\u8fd1\u7684\u51b0\u6dc7\u6dcb\u5e97\u7684\u4f4d\u7f6e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5e8f\u5217\u4e0d\u964d\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5c06\u51b0\u6dc7\u6dcb\u5e97\u7684\u5750\u6807\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u7136\u540e\u626b\u4e00\u6b21\u5c31\u597d\u4e86\u3002  \n\n\u8fd9\u6837\u5c31\u76f8\u5f53\u4e8e\u6bcf\u4e2a\u533a\u95f4\u5b58\u5728\u4e00\u4e2a\u4ef7\u503c\uff0c\u7136\u540e\u9009\u62e9\u82e5\u5e72\u533a\u95f4\u4f7f\u5f97\u8fd9\u4e9b\u533a\u95f4\u7684\u4ea4\u96c6\u4e0d\u4e3a\u7a7a\uff0c\u7136\u540e\u6c42\u6700\u5927\u7684\u4ef7\u503c\u3002  \n\u7136\u540e\u53ea\u9700\u8981\u6309\u7167\u5de6\u7aef\u70b9\u6392\u5e8f\uff0c\u5f00\u4e00\u4e2a `set` \u7ef4\u62a4\u5305\u542b\u7b2c $i$ \u4e2a\u533a\u95f4\uff0c\u5e76\u4e14\u548c\u8fd9\u4e2a\u533a\u95f4\u4ea4\u96c6\u4e0d\u4e3a\u7a7a\u7684\u533a\u95f4\u5373\u53ef\u3002\n\n\u590d\u6742\u5ea6 $O\\left(m\\log m+n\\log n\\right)$\n\n\u6838\u5fc3\u4ee3\u7801\uff1a\n```cpp\nint n,m,dis[maxn],tmp; ll sum,ans;\nstruct JTZ{ int l,r,p; bool operator < (const JTZ x) const { return this->r<x.r; } }a[maxn];\nint cmp(JTZ x,JTZ y){ return x.l<y.l; } multiset<JTZ> s;\n#define dis(i) (((i)-1)*100)\nint main(){\n\t//freopen(\".in\",\"r\",stdin);\n\t//freopen(\".out\",\"w\",stdout);\n\tn=read(); m=read(); int i,j; for(i=1;i<=n;i++) a[i].p=read();\n\tfor(i=1;i<=m;i++) dis[i]=read(); sort(dis+1,dis+m+1);\n\tj=1; for(i=1;i<=n;i++){\n\t\twhile(j<m&&mabs(dis[j]-dis(i))>mabs(dis[j+1]-dis(i))) j++;\n\t\ttmp=mabs(dis[j]-dis(i)); a[i].l=dis(i)-tmp,a[i].r=dis(i)+tmp;\n\t} sort(a+1,a+n+1,cmp); s.clear(); set<JTZ>::iterator it;\n\tfor(i=1;i<=n;i++) if(a[i].l<a[i].r){\n\t\tif(!s.empty()){\n\t\t\tit=s.begin();\n\t\t\twhile((*it).r<=a[i].l){\n\t\t\t\tsum-=(*it).p; s.erase(it);\n\t\t\t\tif(!s.empty()) it=s.cbegin(); else break;\n\t\t\t}\n\t\t} sum+=a[i].p; s.insert(a[i]); ans=mmax(ans,sum);\n\t} print(ans); return 0;\n}\n```",
        "postTime": 1650973729,
        "uid": 215042,
        "name": "jiangtaizhe001",
        "ccfLevel": 7,
        "title": "CF1662I Ice Cream Shop \u9898\u89e3"
    }
]
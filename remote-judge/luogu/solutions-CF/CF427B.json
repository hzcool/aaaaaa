[
    {
        "content": "### [\u8fd9\u91cc](https://www.cnblogs.com/Violet-Ever-Garden/p/14770669.html)\u89c2\u770b\u6548\u679c\u66f4\u4f73\n\n\u76f8\u4fe1\u5927\u5bb6\u90fd\u770b\u5f97\u61c2\u9898\u610f\uff0c\u6240\u4ee5\u5c31\u4e0d\u518d\u591a\u8bf4\u4e86\u3002\n\n\u4e3a\u65b9\u4fbf\u8868\u793a\uff0c\u4e0b\u6587\u4e2d\u7edf\u4e00\u7528 $n$ \u8868\u793a\u56da\u72af\u603b\u6570\uff0c$t$ \u8868\u793a\u56da\u72af\u72af\u7f6a\u6c34\u5e73\u5e94\u4e0d\u9ad8\u4e8e $t$\uff0c $c$ \u8868\u793a\u8981\u8f6c\u79fb $c$ \u4e2a\u8fde\u7eed\u7684\u56da\u72af \u3002\n\n\u7531\u4e8e\u8fd9\u9053\u9898\u6570\u636e\u6bd4\u8f83\u5c0f~~\u53ef\u4ee5\u4e71\u641e~~\uff0c\u6240\u4ee5\u4e0b\u9762\u63d0\u4f9b\u4e09\u79cd\u80fd\u8fc7\u7684\u505a\u6cd5\u3002\n\n------\n\n### 0. \u66b4\u529b\n\n\u66b4\u529b\u5730\u679a\u4e3e\u6bcf\u4e00\u4e2a\u957f\u5ea6\u4e3a $c$ \u7684\u533a\u95f4\uff0c\u6c42\u533a\u95f4\u7684\u6700\u5927\u503c\uff0c\u7edf\u8ba1\u7b26\u5408\u9898\u610f\u7684\u533a\u95f4\u6570\u91cf\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n - c + 1) \\times O(c)$ \u7ea6\u4e3a $n ^ 2$\uff0c\u59a5\u59a5 T \u98de\uff0c\u5c31\u4e0d\u653e\u4ee3\u7801\u4e86\u3002\n\n------\n\n### 1. \u6a21\u62df\n\n\u4f9d\u636e\u9898\u610f\u6a21\u62df\u5373\u53ef\u3002\n\n\u7ebf\u6027\u7684\u626b\u4e00\u904d\uff0c\u82e5\u5f53\u524d\u7684\u6570\u5b57\u5c0f\u4e8e\u7b49\u4e8e $t$ \uff0c\u5219\u8ba1\u6570\u5668 +1 \uff0c\u5426\u5219\u8ba1\u6570\u5668\u6e05\u7a7a\u3002\n\n\u5728\u7ebf\u5904\u7406\u7684\u8bdd\uff0c\u53ef\u4ee5\u5c06\u7a7a\u95f4\u590d\u6742\u5ea6\u964d\u5230\u6700\u5c0f\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(n)$\u3002\n\n```cpp\n#include <cstdio>\n\nint n, t, c, k, cnt, ans;\n\nint main(){\n    scanf(\"%d %d %d\", &n, &t, &c);\n    for(int i = 1; i <= n; i++){\n\tscanf(\"%d\", &k);\n\tif(k <= t){\n\t    if(++cnt >= c) ans++; //\u56da\u72af\u6570\u91cf\u8db3\u591f\uff0c\u5219\u5f00\u59cb\u7d2f\u52a0\u7b54\u6848\n\t}\n\telse cnt = 0; //\u82e5\u51fa\u73b0\u4e0d\u6ee1\u8db3\u7684\u56da\u72af\uff0c\u5219\u6e05\u7a7a\u8ba1\u6570\n    }\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n```\n\n------\n\n### 2. \u7ebf\u6bb5\u6811\n\n\u5176\u5b9e\u521a\u770b\u9898\u7684\u65f6\u5019\u6211\u5e76\u6ca1\u6709\u60f3\u5230\u7ebf\u6bb5\u6811\uff0c\u540e\u6765\u53d1\u73b0 $n \\le 2 \\times 10^5$ \u7684\u6570\u636e\u5b9e\u5728\u662f\u592a\u5bbd\u677e\u4e86\u3002\n\n\u6211\u4eec\u53ea\u9700\u8981\u7ef4\u62a4\u4e00\u6bb5\u533a\u95f4\u7684\u6700\u5927\u503c\uff0c\u7136\u540e\u8fdb\u884c $n - c + 1$ \u6b21\u533a\u95f4\u67e5\u8be2\u5373\u53ef\uff0c\u7531\u4e8e\u7ebf\u6bb5\u6811\u5355\u6b21\u533a\u95f4\u67e5\u8be2\u7684\u590d\u6742\u5ea6\u4e3a $O(\\log n)$ \uff0c\u6240\u4ee5\u590d\u6742\u5ea6\u7ea6\u4e3a $O(n \\log n)$ \uff0c\u8fd8\u662f\u6bd4\u8f83\u7a33\u7684\u3002\n\n```cpp\n/*\u73c2\u7231\u7684\u7ebf\u6bb5\u6811*/\n\n#include <cstdio>\n#include <algorithm>\n#include <iostream>\n\n#define maxn 200005\n\nusing namespace std;\n\nint sum, n, T, c, a[maxn];\n\nstruct Tree_Node{\n    int val, l, r;\n}tr[maxn << 2]; //\u6211\u4e00\u822c\u4e60\u60ef\u5f00 4 \u500d\u7a7a\u95f4\uff0c\u9632\u6b62\u8d8a\u754c\n\ninline void update(int node){ //\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u4e0d\u5199\uff0c\u76f4\u63a5\u653e\u5728 build \u51fd\u6570\u4e2d\n    tr[node].val = max(tr[node << 1].val, tr[node << 1 | 1].val);\n}\n\nvoid build(int s, int t, int node){\n    tr[node].l = s, tr[node].r = t;\n    if(s == t){tr[node].val = a[s]; return;}\n    int mid = s + t >> 1;\n    build(s, mid, node << 1);\n    build(mid + 1, t, node << 1 | 1);\n    update(node);\n}\n\nint ask_max(int s, int t, int node){ //\u67e5\u8be2\u533a\u95f4\u6700\u5927\u503c\uff0c\u4e0e t \u6bd4\u8f83\n    int ans = 0;\n    if(s <= tr[node].l && t >= tr[node].r){\n        return tr[node].val;\n    }\n    int mid = tr[node].l + tr[node].r >> 1;\n    if(s <= mid) ans = max(ans, ask_max(s, t, node << 1));\n    if(t > mid) ans = max(ans, ask_max(s, t, node << 1 | 1));\n    return ans;\n}\n\nint main(){\n    scanf(\"%d %d %d\", &n, &T, &c);\n    for(int i = 1; i <= n; i++){\n\tscanf(\"%d\",&a[i]);\n    }\n    build(1, n, 1);\n    for(int i = 1; i + c - 1 <= n; i++){\n\tif(ask_max(i, i + c - 1, 1) <= T) sum++; // \u67e5\u8be2\u6bcf\u4e00\u4e2a\u957f\u5ea6\u4e3a c \u7684\u533a\u95f4\n    }\n    printf(\"%d\",sum);\n    return 0;\n}\n```\n\n------\n\n### 3. \u5206\u5757\n\n\u8bf7\u518d\u601d\u8003\u4e00\u4e0b $2 \\times 10^5$ \u7684\u6570\u636e\u8fd8\u80fd\u652f\u6301\u4ec0\u4e48\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5462\uff1f\n\n\u663e\u7136\uff0c\u590d\u6742\u5ea6\u4e3a $O(n \\sqrt{n})$ \u7684\u5206\u5757\u5e38\u6570\u522b\u592a\u5927\u4e5f\u662f\u80fd\u8fc7\u7684\u3002~~\uff08\u5927\u5bb6\u5e94\u8be5\u90fd\u4f1a\u5206\u5757\u5427\uff09~~\n\n```cpp\n/*\u5206\u5757\u5927\u6cd5*/\n\n#include <cstdio>\n#include <algorithm>\n#include <iostream>\n\nusing namespace std;\n\nint block, num, n, t, c, ans; \n// block : \u5757\u957f , num : \u5757\u7684\u6570\u91cf , ans : \u6700\u7ec8\u7684\u7b54\u6848\uff0c\u5373\u6709\u51e0\u4e2a\u957f\u5ea6\u4e3a c \u7684\u533a\u95f4\u6ee1\u8db3\u6761\u4ef6 ;\nint belong[200005], a[200005];\n// belong[i] \u8bb0\u5f55\u4e0b\u8868\u4e3a i \u7684\u70b9\u5728\u54ea\u4e2a\u5757\u4e2d\u3002\nint l[1005], r[1005], maxx[1005];\n// l[i] \u8bb0\u5f55\u7b2c i \u4e2a\u5757\u5de6\u8fb9\u754c\u7684\u4e0b\u6807\uff0c r[i] \u8bb0\u5f55\u7b2c i \u4e2a\u5757\u53f3\u8fb9\u754c\u7684\u4e0b\u6807\uff1b\n// maxx[i] \u8868\u793a\u7b2c i \u4e2a\u5757\u7684\u6700\u5927\u503c\u3002\n\ninline void build(){\n    block = sqrt(n);\n    num = n / block;\n    if(n % block) num++;\n    for(int i = 1; i <= n; i++){\n        belong[i] = (i - 1) / block + 1;\n    }\n    for(int i = 1; i <= num; i++){\n        l[i] = block * (i - 1) + 1,\n        r[i] = block * i;\n    }\n    r[num] = n;\n    for(int i = 1; i <= num; i++){\n        for(int j = l[i]; j <= r[i]; j++){\n            maxx[i] = max(a[j], maxx[i]);\n        }\n    }\n}\n\ninline int ask_max(int x, int y){\n    int maxn = -1;    // maxn \u7528\u4e8e\u8bb0\u5f55\u67e5\u8be2\u7684\u8fd9\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\n    /*\u5904\u7406\u6574\u5757\u7684\u90e8\u5206*/\n    for(int i = belong[x] + 1; i < belong[y]; i++){\n        maxn = max(maxn, maxx[i]);\n    }\n    /*\u5904\u7406\u975e\u6574\u5757\u7684\u90e8\u5206*/\n    if(belong[x] != belong[y]){\n        for(int i = x; i <= r[belong[x]]; i++){\n            maxn = max(maxn, a[i]);\n        }\n        for(int i = l[belong[y]]; i <= y; i++){\n            maxn = max(maxn, a[i]);\n        }\n    }\n    else{\n        for(int i = x; i <= y; i++){\n            maxn = max(maxn, a[i]);\n        }\n    }\n    return maxn;\n}\n\nsigned main(){\n    scanf(\"%d %d %d\", &n, &t, &c);\n    for(int i = 1; i <= n; i++){\n        scanf(\"%d\", &a[i]);\n    }\n    build();\n    for(int i = 1; i + c - 1 <= n; i++){\n        if(ask_max(i, i + c - 1) <= t) ans++; //\u67e5\u8be2\u6bcf\u4e2a\u957f\u5ea6\u4e3a c \u7684\u533a\u95f4\u7684\u6700\u5927\u503c\u3002\n    }\n    printf(\"%d\\n\", ans);\n    return 0;\n}\n\n```\n-----\n### \u540e\u8bb0\n\n\u6211\u662f\u771f\u6ca1\u60f3\u5230\u5206\u5757\u548c\u7ebf\u6bb5\u6811\u5dee\u4e0d\u591a\u5feb\uff0c\u53ef\u80fd\u6211\u4eba\u50bb\u5e38\u6570\u5927\u5427\u3002\n",
        "postTime": 1621072144,
        "uid": 287868,
        "name": "_Emiria_",
        "ccfLevel": 0,
        "title": "CF427B"
    },
    {
        "content": "\u770b\u5230\u9898\u89e3\u533a\u6ca1\u6709\u4eba\u7528 st \u8868\u5c31\u6765\u4ea4\u4e00\u53d1\u3002\n\n## \u9898\u610f\n\n\u6709\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u5e8f\u5217\uff0c\u6c42\u8fde\u7eed\u7684 $c$ \u4e2a\u6570\u6700\u5927\u503c\u4e0d\u8d85\u8fc7 $t$ \u7684\u65b9\u6848\u6570\u3002\n\n$1 \\le c \\le n \\le 2 \\times 10^5,0 \\le t \\le 10^9$\n\n**\u6ce8\u610f**\uff1a\u8f93\u5165\u65f6\u5148\u8f93\u5165 $n$ \u518d\u8f93\u5165 $t$ \u6700\u540e\u624d\u8f93\u5165 $c$\uff01\n\n## \u601d\u8def\n\n\u8003\u8651\u66b4\u529b\u679a\u4e3e\u6bcf\u4e00\u4e2a\u533a\u95f4\uff0c\u5224\u65ad\u533a\u95f4\u6700\u5927\u503c\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8e $t$\u3002\u5982\u679c\u662f\uff0c\u7b54\u6848\u52a0\u4e00\u3002\n\n\u6c42\u533a\u95f4\u6700\u5927\u503c\u6709\u5f88\u591a\u65b9\u6cd5\uff0c\u8fd9\u7bc7\u9898\u89e3\u4f7f\u7528\u4e86 st \u8868\u7684\u505a\u6cd5\u6765\u6c42\u533a\u95f4\u6700\u5927\u503c\u3002\n\nst \u8868\u7684\u5177\u4f53\u64cd\u4f5c\u5c31\u4e0d\u7ec6\u8bb2\u4e86\uff0c\u53ef\u4ee5\u770b\u4ee3\u7801\u7684\u6ce8\u91ca\u3002\n\n## \u4ee3\u7801\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\nint st[20][200010]; // \u5b9a\u4e49 st[i][j] \u8868\u793a\u4ece j \u4f4d\u7f6e\uff0c\u5411\u53f3 2^i \u4e2a\u6570\uff0c\u8fd9\u4e00\u6bb5\u7684\u533a\u95f4\u6700\u5927\u503c\u3002\u533a\u95f4\u5c31\u662f [j,j+(1<<i)-1]\n\nint main()\n{\n\tint n,t,c,cnt=0;\n\tcin>>n>>t>>c;\n\tint log_2=log2(c);\n\tfor(int i=1; i<=n; ++i)\n\t{\n\t\tcin>>st[0][i]; // \u533a\u95f4 [i,i+1-1] \u7684\u6700\u5927\u503c\u5c31\u662f i \u672c\u8eab\uff0c\u76f4\u63a5\u8f93\u5165\n\t}\n\tfor(int i=1; i<=17; ++i) // \u679a\u4e3e\u533a\u95f4\u957f\u5ea6 (1<<i)\n\t{\n\t\tfor(int j=1; j+(1<<i)-1<=n; ++j) // \u679a\u4e3e\u5de6\u7aef\u70b9\n\t\t{\n\t\t\tst[i][j]=max(st[i-1][j],st[i-1][j+(1<<(i-1))]);\n\t\t\t// \u533a\u95f4 [j,j+(1<<i)-1] \u53ef\u4ee5\u88ab\u5206\u4e3a\u4e24\u6bb5\u533a\u95f4\uff0c\u5b83\u4eec\u8986\u76d6\u4e86 [j,j+(1<<i)-1]\n\t\t\t// \u5b83\u4eec\u662f [j,j+(1<<(i-1))-1],[j+(1<<(i-1)),j+(1<<i)-1]\n\t\t\t// \u5de6\u9762\u533a\u95f4\u7684\u6700\u5927\u503c\u5c31\u662f st[i-1][j]\n\t\t\t// \u53f3\u9762\u533a\u95f4\u7684\u6700\u5927\u503c\u5c31\u662f st[i-1][j+(1<<(i-1))]\n\t\t}\n\t}\n\tfor(int i=1; i+c-1<=n; ++i) // \u66b4\u529b\u679a\u4e3e\u957f\u5ea6\u4e3a c \u7684\u533a\u95f4\n\t{\n\t\tcnt+=(max(st[log_2][i],st[log_2][i+c-1-(1<<log_2)+1])<=t);\n\t\t// \u73b0\u5728\u8981\u67e5\u533a\u95f4 [i,i+c-1] \u7684\u6700\u5927\u503c\n\t\t// \u8fd9\u4e2a\u533a\u95f4\u53ef\u4ee5\u88ab\u5206\u6210\u4e24\u4e2a\u957f\u5ea6\u4e3a\u4e8c\u7684\u5e42\u533a\u95f4\n\t\t// [i,i+log2(c)-1] \u548c [i+c-1-(1<<log2(c))+1,i+c-1]\n\t\t// \u8fd9\u4e24\u4e2a\u533a\u95f4\u90fd\u5305\u542b\u5728\u5927\u533a\u95f4\u91cc\uff0c\u5b83\u4eec\u53ef\u80fd\u91cd\u53e0\uff0c\u4f46\u662f\u533a\u95f4\u6700\u5927\u503c\u91cd\u53e0\u4e86\u4e5f\u6ca1\u5173\u7cfb\n\t\t// \u4e8e\u662f\u8fd9\u4e24\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\u5c31\u662f st[log2(c)][i] \u548c st[log2(c)][i+c-1-(1<<log2(c))+1]\n\t\t// \u8fd9\u4e2a\u5927\u533a\u95f4\u7684\u6700\u5927\u503c\u5c31\u662f\u8fd9\u4e24\u4e2a\u5c0f\u533a\u95f4\u6700\u5927\u503c\u5b83\u4eec\u7684\u6700\u5927\u503c\n\t}\n\tcout<<cnt;\n\treturn 0;\n}\n```",
        "postTime": 1627397892,
        "uid": 353688,
        "name": "\u738b\u7199\u6587",
        "ccfLevel": 0,
        "title": "CF427B \u9898\u89e3"
    },
    {
        "content": "\n## CF427B\n\n\n------------\n\n### \u601d\u8def\n\n\u8fde\u7eed $c$ \u4e2a\u56da\u72af\u7684\u6700\u5927\u72af\u7f6a\u6c34\u5e73\u4e0d\u9ad8\u4e8e $t$\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u60f3\u5230\u4f7f\u7528\u7ebf\u6bb5\u6811\u6765\u7ef4\u62a4\u533a\u95f4\u6700\u5927\u503c\uff0c\u6bcf\u6b21\u5224\u65ad\u5f53\u524d\u7b2c $i \\sim  (i+c-1)$ \u4e2a\u6570\u503c\u7684\u6700\u5927\u503c\u662f\u5426\u5927\u4e8e $t$ \u5373\u53ef\u3002  \n \n-----------\n \n### \u4e00\u70b9\u5c0f\u4f18\u5316\n \n\u4ee5\u4e0a\u662f\u8fd9\u9053\u9898\u76ee\u7684\u601d\u8def\uff0c\u7b14\u8005\u8fd9\u91cc\u518d\u63d0\u4f9b\u4e00\u4e9b\u4f18\u5316\u7684\u6280\u5de7\uff1a\n\n1.  \u5982\u679c\u4e0a\u4e00\u8f6e\u7684\u7b2c $(i-1) \\sim  (i+c-2)$ \u4e2a\u6570\u503c\u90fd\u4e0d\u5927\u4e8e $t$\uff0c\u90a3\u6211\u4eec\u53ea\u9700\u8981\u5224\u65ad\u5f53\u524d\u7b2c $i+c-1$ \u4e2a\u6570\u503c\u662f\u5426\u5927\u4e8e $t$ \u5373\u53ef\u3002\n\n2.  \u67e5\u627e\u6700\u5927\u503c\u7684 query \u51fd\u6570\u7684\u7c7b\u578b\u6539\u4e3a bool \uff0c\u8868\u793a\u8be5\u533a\u95f4\u5185\u7684\u6700\u5927\u6570\u503c\u662f\u5426\u5927\u4e8e $t$\u3002\u5982\u679c\u5f53\u524d\u533a\u95f4\u7684\u6700\u5927\u503c\u5df2\u7ecf\u5927\u4e8e $t$\uff0c\u5c31\u6ca1\u6709\u5fc5\u8981\u518d\u904d\u5386\u5b50\u533a\u95f4\u3002\n\n----------------------------------------\n\n### \u5173\u4e8e\u7b1b\u5361\u5c14\u6811\n\n\u56e0\u4e3a\u7b14\u8005\u662f\u6c42\u533a\u95f4\u6700\u503c\u505a\u8fd9\u4e2a\u9898\u7684\uff0c\u663e\u7136\u4e5f\u53ef\u4ee5\u7528\u7b1b\u5361\u5c14\u6811\u6765\u505a\u8fd9\u9053\u9898\uff0c\u4e0d\u8fc7\u5e38\u6570\u6bd4\u7ebf\u6bb5\u6811\u5927\u4e86\u4e9b\u3002   \n\n\n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u51fa\u4e00\u68f5\u6bcf\u4e2a\u8282\u70b9\u7684\u7f16\u53f7\u6ee1\u8db3\u4e8c\u53c9\u641c\u7d22\u6811\u7684\u6027\u8d28\n \uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u6743\u503c\u6ee1\u8db3\u5927\u6839\u5806\u7684\u6027\u8d28\u7684\u4e00\u68f5\u4e8c\u53c9\u6811\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\n \n ```cpp\nfor(register int i(1); i <= n; ++i) {\n        head = pos;\n        read(tr[i].val);\n        while(head && tr[st[head]].val <= tr[i].val) head--;\n        if(head) tr[st[head]].son[2] = i;\n        if(head^pos) tr[i].son[1] = st[head+1];\n        st[pos = ++head] = i;\n    }\n```\n\n\n\n------------\n\n\u7136\u540e\u7684\u8bdd\uff0c\u7b1b\u5361\u5c14\u6811\u5177\u6709\u4e00\u4e2a\u5173\u952e\u6027\u8d28\uff1a**\u4e00\u6bb5\u533a\u95f4\u7684\u6700\u503c\u7b49\u4e8e\u7b1b\u5361\u5c14\u6811\u4e0a\u533a\u95f4\u8fb9\u754c l \u548c r \u8282\u70b9\u7684 lca**\u3002\u6240\u4ee5\u6211\u4eec\u5728\u8fd9\u9897\u7b1b\u5361\u5c14\u6811\u4e0a\u505a\u4e00\u904d\u6811\u94fe\u5256\u5206\u5c31\u80fd\u5feb\u901f\u6c42\u51fa lca \u4ece\u800c\u5f97\u77e5\u533a\u95f4\u6700\u503c\u4e86\u3002\n\n\n------------\n\n\n\n### \u7b1b\u5361\u5c14\u6811\u4ee3\u7801\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define max_(a, b) a > b ? a : b\n#define min_(a, b) a < b ? a : b\n#define INF 0x3f3f3f3f\n\nnamespace IO {\nchar buf[1<<21], *p1 = buf, *p2 = buf, buf1[1<<21];\ninline char gc () {return p1 == p2 && (p2 = (p1 = buf) + fread (buf, 1, 1 << 21, stdin), p1 == p2) ? EOF : *p1++;}\n\n#ifndef ONLINE_JUDGE\n#endif\n\ntemplate<class I>\ninline void read(I &x) {\n    x = 0; I f = 1; char c = gc();\n    while(c < '0' || c > '9') {if(c == '-') f = -1; c = gc(); }\n    while(c >= '0' && c <= '9') {x = x * 10 + c - '0'; c = gc(); }\n    x *= f;\n}\n\ntemplate<class I>\ninline void write(I x) {\n    if(x == 0) {putchar('0'); return;}\n    I tmp = x > 0 ? x : -x;\n    if(x < 0) putchar('-');\n    int cnt = 0;\n    while(tmp > 0) {\n        buf1[cnt++] = tmp % 10 + '0';\n        tmp /= 10;\n    }\n    while(cnt > 0) putchar(buf1[--cnt]);\n}\n\n#define in(x) read(x)\n#define outn(x) write(x), putchar('\\n')\n#define out(x) write(x), putchar(' ')\n\n} using namespace IO;\n\nconst int maxn = 2e5+1;\nint n, t, c, root, max_son, ans;\nint st[maxn], head, pos;\n\nstruct node {\n    int son[3], val;\n}tr[maxn];\n\nint dep[maxn], siz[maxn], son[maxn], fath[maxn];\n\nvoid dfs_1(int u, int fa) {\n    dep[u] = dep[fa]+1;\n    fath[u] = fa;\n    siz[u] = 1;\n    max_son = -1;\n    for(register int i(1); i <= 2; ++i) {\n        if(!tr[u].son[i]) continue;\n        int v = tr[u].son[i];\n        dfs_1(v, u);\n        siz[u] += siz[v];\n        if(siz[v] > max_son) {\n            max_son = siz[v];\n            son[u] = v;\n        }\n    }\n}\n\nint top[maxn];\n\nvoid dfs_2(int u, int topf) {\n    top[u] = topf;\n    if(!son[u]) return ;\n    dfs_2(son[u], topf);\n    for(register int i(1); i <= 2; ++i) {\n        if(!tr[u].son[i]) continue;\n        int v = tr[u].son[i];\n        if(v == son[u]) continue;\n        dfs_2(v, v);\n    }\n}\n\nint lca(int x, int y) {\n    while(top[x] != top[y]) {\n        if(dep[top[x]] < dep[top[y]]) std::swap(x, y);\n        x = fath[top[x]];\n    }\n    return dep[x] < dep[y] ? x : y;\n}\n\nbool flag = 0;\n\nint main() {\n    read(n), read(t), read(c);\n    for(register int i(1); i <= n; ++i) {\n        head = pos;\n        read(tr[i].val);\n        while(head && tr[st[head]].val <= tr[i].val) head--;\n        if(head) tr[st[head]].son[2] = i;\n        if(head^pos) tr[i].son[1] = st[head+1];\n        st[pos = ++head] = i;\n    }\n    root = st[1];\n    dfs_1(root, 0);\n    dfs_2(root, root);\n    int k = n - c + 1;\n    for(register int i(1); i <= k; ++i) {\n        if(flag) {\n            if(tr[i+c-1].val <= t) ans++;\n            else flag = 0;\n        }\n        else {\n            int tmp = lca(i, i+c-1);\n            if(tr[tmp].val <= t) ans++, flag = 1;\n        }\n    }\n    write(ans);\n}\n```\n\n\n\n------------\n\n### \u7ebf\u6bb5\u6811\u4ee3\u7801\n\n\n\n\n\n```cpp\n#include <cstdio>\n#include <cstring>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n#define max_(a, b) a > b ? a : b\n#define min_(a, b) a < b ? a : b\n\nnamespace IO {\nchar buf[1<<21], *p1 = buf, *p2 = buf, buf1[1<<21];\ninline char gc () {return p1 == p2 && (p2 = (p1 = buf) + fread (buf, 1, 1 << 21, stdin), p1 == p2) ? EOF : *p1++;}\n\n#ifndef ONLINE_JUDGE\n#endif\n\ntemplate<class I>\ninline void read(I &x) {\n    x = 0; I f = 1; char c = gc();\n    while(c < '0' || c > '9') {if(c == '-') f = -1; c = gc(); }\n    while(c >= '0' && c <= '9') {x = x * 10 + c - '0'; c = gc(); }\n    x *= f;\n}\n\ntemplate<class I>\ninline void write(I x) {\n    if(x == 0) {putchar('0'); return;}\n    I tmp = x > 0 ? x : -x;\n    if(x < 0) putchar('-');\n    int cnt = 0;\n    while(tmp > 0) {\n        buf1[cnt++] = tmp % 10 + '0';\n        tmp /= 10;\n    }\n    while(cnt > 0) putchar(buf1[--cnt]);\n}\n\n#define in(x) read(x)\n#define outn(x) write(x), putchar('\\n')\n#define out(x) write(x), putchar(' ')\n\n} using namespace IO;\n\nint n, t, c;\nint val[200003];\nbool flag;\n\nstruct node {\n    int l, r, maxn;\n}tr[4000003];\n\nvoid build (int p, int l, int r) {\n    tr[p].l = l, tr[p].r = r;\n    if(l == r) {tr[p].maxn = val[l]; return ;}\n    int m = l + r >> 1;\n    build(p<<1, l, m);\n    build(p<<1|1, m+1, r);\n    tr[p].maxn = max_(tr[p<<1].maxn, tr[p<<1|1].maxn);\n}\n\nbool query (int p, int l, int r) {\n    if(l <= tr[p].l && tr[p].r <= r) return (tr[p].maxn <= t);\n    int m = (tr[p].l + tr[p].r) >> 1;\n    if(l <= m) if(!(query(p<<1, l, r))) return 0;\n    if(r > m) if(!(query(p<<1|1, l, r))) return 0;\n    return 1;\n}\n\nint ans;\n\nint main () {\n    read(n), read(t), read(c);\n    for(register int i(1); i <= n; ++i) read(val[i]);\n    build(1, 1, n);\n    int k = n - c + 1;\n    flag = 0;\n    for(register int i(1); i <= k; ++i) {\n        if(flag) {\n            if(val[i+c-1] <= t) ans++;\n            else flag = 0;\n        } \n        else {\n            if(query(1, i, i+c-1)) ans++, flag = 1;\n        }\n    }\n    write(ans);\n    return 0;\n}\n```\n\n\n------------\n\n\u8c22\u8c22\u60a8\u80fd\u9605\u8bfb\u672c\u7bc7\u6587\u7ae0\uff01\n",
        "postTime": 1621142782,
        "uid": 450290,
        "name": "MurataHimeko",
        "ccfLevel": 0,
        "title": "\u9898\u89e3"
    },
    {
        "content": "# \u9898\u610f\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u6570\u5217 $a$ \u3001\u533a\u95f4\u957f\u5ea6 $c$ \u3001\u548c\u4e00\u4e2a\u503c $t$ \uff0c\u8be2\u95ee\u6709\u591a\u5c11\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\u4e0d\u8d85\u8fc7 $t$\n\n# \u601d\u8def\n**\u6211\u53ea\u662f\u4e2a\u849f\u84bb\u4ec0\u4e48\u6570\u636e\u7ed3\u6784\u5565\u7684\u90fd\u4e0d\u4f1a\uff0c\u6240\u4ee5\u6211\u5c31\u76f4\u63a5\u6a21\u62df\u4e86**  \n\u9996\u5148\u6211\u4eec\u53ef\u4ee5\u679a\u4e3e\u6bcf\u4e2a\u533a\u95f4\uff0c\u7136\u540e\u904d\u5386\u6bcf\u4e2a\u533a\u95f4\uff0c\u5224\u65ad\u6700\u5927\u503c\uff0c\u4f46\u662f\u8fd9\u6837\u4f1a\u59a5\u59a5\u7684T\u98de\u6389\uff0c\u53ea\u80fd\u7528\u5176\u4ed6\u65b9\u6cd5  \n\u6211\u5728\u6a21\u62df\u6837\u4f8b\u7684\u65f6\u5019\u53d1\u73b0\uff0c\u8fd9\u4e2a\u9898\u975e\u5e38\u7c7b\u4f3c\u4e8e\u6ed1\u52a8\u7a97\u53e3\uff0c\u7136\u540e\u6211\u5c31\u6709\u601d\u8def\u4e86  \n\u6211\u4eec\u53ef\u4ee5\u5148\u8ba9 `\u524dc-1\u4e2a\u6570\u548c\u4ed6\u4eec\u7684\u4e0b\u6807` \u5165\u961f\uff0c\u7136\u540e\u5224\u65ad\u54ea\u4e9b\u6570\u5927\u4e8e $t$ \uff0c\u518d\u5f00\u4e00\u4e2a\u961f\u5217 $q1$ \u8bb0\u5f55\u6240\u6709\u961f\u5217\u91cc**\u5927\u4e8e $t$ \u7684\u5143\u7d20\u5728\u6570\u7ec4\u4e2d\u7684\u4e0b\u6807**  \n\u7136\u540e\u5c31\u662f\u6ed1\u52a8\u7a97\u53e3\u5f0f\u7ef4\u62a4\u961f\u5217\uff0c\u6bcf\u6b21\u5165\u961f\u4e00\u4e2a\u5143\u7d20\uff0c\u5224\u65ad $q1$ \u662f\u5426\u4e3a\u7a7a\uff0c\u82e5\u4e3a\u7a7a\u8bf4\u660e\u8fd9\u4e2a\u533a\u95f4\u7b26\u5408\uff0c`ans++`\uff0c\u82e5\u4e0d\u4e3a\u7a7a\u5c31\u7565\u8fc7\uff0c\u6700\u540e\u8f93\u51fa`ans`\u5373\u53ef\n\n#\u4ee3\u7801\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\ntypedef pair<int,int> Pair;//\u81ea\u5b9a\u4e49\u7c7b\u578b\uff0c\u4e2a\u4eba\u4e60\u60ef\nint n, t, c, ans;\nint a[200005];\nqueue<Pair> q;//\u8bb0\u5f55\u6bcf\u4e2a\u7a97\u53e3\u7684\u5143\u7d20, first\u4e3a\u503c, second\u4e3a\u4e0b\u6807\nqueue<int> q1;//\u8bb0\u5f55\u7a97\u53e3\u4e2d\u6240\u6709\u5927\u4e8et\u7684\u5143\u7d20\u7684\u4e0b\u6807\n\nint main()\n{\n    scanf(\"%d%d%d\", &n, &t, &c);\n    for(int i = 1; i <= n; i++)\n        scanf(\"%d\", &a[i]);\n    for(int i = 1; i < c; i++)\n    {//\u5148\u8ba9\u524dc-1\u4e2a\u5143\u7d20\u548c\u4e0b\u6807\u5165\u961f\n        q.push(make_pair(a[i], i));\n        if(a[i] > t)//\u5982\u679c\u5165\u961f\u7684\u5143\u7d20\u5927\u4e8et, \u5c31\u628a\u4e0b\u6807push\u8fdbq1\u91cc\n            q1.push(i);\n    }\n    for(int i = c; i <= n; i++)\n    {//\u5230\u7b2cc\u4e2a\u5143\u7d20\u65f6\u533a\u95f4\u957f\u5ea6\u53d8\u4e3ac, \u5f00\u59cb\u5224\u65ad\n\n        q.push(make_pair(a[i], i));//\u8ddf\u4e0a\u9762\u4e00\u6837\u7684\u5165\u961f\u64cd\u4f5c\n        if(a[i] > t)\n            q1.push(i);\n\n        if(q1.empty())//q1\u4e3a\u7a7a\u8bf4\u660e\u961f\u5217\u91cc\u6240\u6709\u5143\u7d20\u90fd\u5927\u4e8et\n            ans++;\n            \n        if(q.front().second == q1.front())\n            q1.pop();//\u82e5\u5f53\u524d\u5373\u5c06\u51fa\u961f\u7684\u5143\u7d20\u7684\u4e0b\u6807\u548cq1\u4e2d\u961f\u9996\u5143\u7d20\u76f8\u7b49,\n                     //\u5373\u4e3a\u540c\u4e00\u4e2a\u5143\u7d20\uff0c\u4e00\u8d77\u51fa\u961f\n        q.pop();\n    }\n    printf(\"%d\", ans);\n    return 0;\n}\n```",
        "postTime": 1604147018,
        "uid": 239167,
        "name": "Ptilopsis_w",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF427B \u3010Prison Transfer\u3011"
    },
    {
        "content": "[\u9898\u76ee\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF427B)\n### \u9898\u610f\n\n\u7ed9\u4f60$n$\u4e2a\u6570\uff0c\u6c42\u5176\u4e2d\u957f\u5ea6\u4e3a$c$\u4e14\u503c\u90fd\u5c0f\u4e8e$t$\u7684\u5b50\u4e32\u4e2a\u6570\n\n### \u9898\u89e3\n\n#### 1.\u6734\u7d20\u6a21\u62df\n\n\u5f88\u81ea\u7136\u7684\u53ef\u4ee5\u60f3\u5230\u6a21\u62df\n\n\u5728\u8bfb\u5165\u7684\u540c\u65f6\u8bb0\u5f55\u5f53\u524d\u8fd9\u4e2a\u5143\u7d20**\u6240\u5728\u5b50\u4e32**\u7684\u957f\u5ea6\n\n\u7528\u6837\u4f8b\u4e09\u4e3e\u4f8b\uff1a\n\n\u521d\u59cb\u72b6\u6001\u4e3a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/fqunx3nc.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u5f53\u9047\u5230\u5927\u4e8e$t$\u7684\u5143\u7d20\u65f6\u5b50\u4e32\u957f\u5ea6\u91cd\u65b0\u5f00\u59cb\u8ba1\u6570\n\n\u6700\u540e\u5206\u6210\u7684\u5b50\u4e32\u548c\u5b50\u4e32\u957f\u5ea6\u4e3a\n\n![](https://cdn.luogu.com.cn/upload/image_hosting/583couz1.png?x-oss-process=image/resize,m_lfit,h_170,w_225)\n\n\u4e0d\u96be\u53d1\u73b0\uff0c\u6bcf\u4e00\u4e2a\u5b50\u4e32($len \\ge c$)\u4e2d\u90fd\u542b\u6709$len-c+1$\u4e2a\u7b54\u6848\n\n\u5728\u6bcf\u6b21\u627e\u5230\u5b50\u4e32\u7684\u7ed3\u5c3e\u65f6\u7d2f\u52a0\u5373\u53ef\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,t,c;\nint len,ans;//len\u4e3a\u5f53\u524d\u5b50\u4e32\u957f\u5ea6\uff0cans\u4e3a\u5b50\u4e32\u603b\u4e2a\u6570\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&t,&c);\n\tfor(register int i=1;i<=n;i++)\n\t{\n\t\tint op;\n\t\tscanf(\"%d\",&op);\n\t\tif(op>t)//\u9047\u5230\u7684\u5143\u7d20\u5927\u4e8et\n\t\t{\n\t\t\tif(len>=c)ans+=(len-c+1);//\u5982\u679c\u5b50\u4e32\u957f\u5ea6\u5927\u4e8ec\u5c31\u7d2f\u52a0\u7b54\u6848\n\t\t\tlen=0;\n\t\t}\n\t\telse len++;\n\t}\n\tif(len>=c)ans+=(len-c+1);//\u6700\u540e\u628a\u6ca1\u6709\u7d2f\u52a0\u7684\u5b50\u4e32\u52a0\u4e0a\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```\n\n#### 2.~~\u7ebf\u6bb5\u6811~~\n\n\u770b\u5230\u9898\u76ee\u4e2d\u5b50\u4e32\u4e2d\u7684\u503c**\u90fd\u5c0f\u4e8e**$t$\u65f6\uff0c\u7a9d\u8fd8\u60f3\u5230\u4e86\u7ebf\u6bb5\u6811\u6c42\u533a\u95f4\u6700\u5927\u503c\uff0c\u5f53\u4e00\u4e2a\u5b50\u4e32\u7684\u533a\u95f4\u6700\u5927\u503c\u5c0f\u4e8e\u7b49\u4e8e$t$\uff0c\u8fd9\u4e2a\u5b50\u4e32\u5c31\u4e00\u5b9a\u6ee1\u8db3\u6761\u4ef6\n\n\u4ee3\u7801\uff1a\n\n~~\u8fd9\u4e2a\u8fa3\u9e21\u7ebf\u6bb5\u6811\u8fde\u4fee\u6539\u90fd\u6ca1\u6709~~\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nconst int SIZE=200005;\nstruct node\n{\n\tint l,r;\n\tint dat;\n}tr[SIZE*4];\nint n,t,c;\nint ans;\nint a[SIZE];\ninline void build(int p,int l,int r)//\u5efa\u6811\n{\n\ttr[p].l=l,tr[p].r=r;\n\tif(l==r)\n\t{\n\t\ttr[p].dat=a[l];\n\t\treturn;\n\t}\n\tint mid=(l+r)>>1;\n\tbuild(p*2,l,mid);\n\tbuild(p*2+1,mid+1,r);\n\ttr[p].dat=max(tr[p*2].dat,tr[p*2+1].dat);\n}\ninline int ask(int p,int l,int r)//\u8be2\u95ee\u533a\u95f4\u6700\u5927\u503c\n{\n\tif(l<=tr[p].l&&r>=tr[p].r)return tr[p].dat;\n\tint mid=(tr[p].r+tr[p].l)>>1;\n\tint val=-(1<<30);\n\tif(l<=mid)val=max(val,ask(p*2,l,r));\n\tif(r>mid)val=max(val,ask(p*2+1,l,r));\n\treturn val;\n}\nint main()\n{\n\tscanf(\"%d%d%d\",&n,&t,&c);\n\tfor(register int i=1;i<=n;i++)\n\t\tscanf(\"%d\",&a[i]);\n\tbuild(1,1,n);\n\tfor(register int i=1;i<=n-c+1;i++)\n\t\tif(ask(1,i,i+c-1)<=t)ans++;//\u8be2\u95ee\u5b50\u4e32\u662f\u5426\u5408\u6cd5\n\tprintf(\"%d\",ans);\n\treturn 0;\n}\n```",
        "postTime": 1603851316,
        "uid": 126871,
        "name": "yzh_Error404",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF427B \u3010Prison Transfer\u3011"
    },
    {
        "content": "\u679a\u4e3e\u533a\u95f4\u80af\u5b9a\u4f1a\u7206\u70b8\uff0c\u6240\u4ee5\u6211\u4eec\u6309\u9898\u76ee\u8981\u6c42\u6a21\u62df\u3002\n\n\u7531\u4e8e\u662f\u8fde\u7eed\u90e8\u5206\uff0c\u6211\u4eec\u7528\u4e00\u4e2a\u53d8\u91cf\u6765\u8868\u793a\u5230\u8fd9\u4e2a\u72af\u4eba\u7684\u6781\u5927\u6570\u91cf\uff0c\u5982\u679c\u5927\u4e8e $c$ \u7b54\u6848\u5c31\u52a0\u4e00\uff0c\u5982\u679c\u8fd9\u4e2a\u72af\u4eba\u7684\u5371\u9669\u5ea6\u9ad8\u4e86\u5c31\u6e05\u96f6\u53d8\u91cf\uff0c\u5426\u5219\u52a0\u4e00\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\nmain()\n{\n    int n,t,c;\n    cin>>n>>t>>c;\n    int ans=0;\n    int cnt=0;\n    for(int i=1;i<=n;i++)\n    {\n        int x;\n        cin>>x;\n        if(x<=t)cnt++;\n        else cnt=0;\n        if(cnt>=c)ans++;\n    }\n    cout<<ans;\n}\n```",
        "postTime": 1657629762,
        "uid": 441247,
        "name": "Halberd_Cease",
        "ccfLevel": 5,
        "title": "CF427B \u9898\u89e3"
    },
    {
        "content": "## \u9898\u610f\n##### \u7ed9\u51fa$n$\u4e2a\u6570,\u4ece\u4e2d\u9009\u51fa$c$\u4e2a\u5c0f\u4e8e$t$\u7684\u6570\n##### \u6c42\u603b\u5171\u6709\u591a\u5c11\u79cd\u60c5\u51b5\n---\n## \u601d\u8def\n##### ~~\u6a21\u62df~~\n##### \u904d\u5386\u6574\u4e2a\u5e8f\u5217,\u7b26\u5408\u6761\u4ef6\u5c31\u8bb0\u5f55\u4e0b\u6765\n##### \u5982\u679c\u56da\u72af\u4e25\u91cd\u7a0b\u5ea6\u5927\u4e8e$t$\n##### \u5373\u4e0d\u7b26\u6761\u4ef6,\u5219\u91cd\u7f6e\u4e3a0\n---\n## \u4ee3\u7801\n```cpp\n#include <bits/stdc++.h> //\u964b\u4e60\nusing namespace std ;\nint read_() //\u5feb\u8bfb\u4f18\u5316\n{\n\tint s = 0 , w = 1 ;\n\tchar ch = getchar() ;\n\twhile( ch == ' ' || ch == '\\n' )\n\t\tch = getchar() ;\n\twhile( ch < '0' || ch > '9' )\n\t{\n\t\tif( ch == '-' )\n\t\t\tw = -1 ;\n\t\tch = getchar() ;\n\t}\n\twhile( ch >= '0' && ch <= '9' )\n\t{\n\t\ts = s * 10 + ch - '0' ;\n\t\tch = getchar() ;\n\t}\n\treturn s * w ;\n} \nvoid print_( int x ) //\u5feb\u5199\u4f18\u5316\n{\n\tif( x < 0 )\n\t{\n\t\tx = -x ;\n\t\tputchar( '-' ) ;\n\t}\n\tif( x > 9 )\n\t\tprint_( x / 10 ) ;\n\tputchar( x % 10 + '0' ) ;\n}\nint n , c , t , sum , ans ;\nint main()\n{\n    n = read_() ; t = read_() ; c = read_() ;\n    for( int i = 1 ; i <= n ; ++i )\n    {\n        int x = read_() ;\n        if( x <= t ) //\u7b26\u5408\u6761\u4ef6\u5c31\u8bb0\u5f55\n        {\n            ++sum ;\n            if( sum >= c )\n                ++ans ;\n        }\n        else //\u4e0d\u7b26\u8c03\u8282\u5c31\u91cd\u7f6e\n            sum = 0 ;\n    }\n    print_(ans) ;\n    return 0 ;\n}\n```\n[\u4e00\u904dAC](https://www.luogu.com.cn/record/41235692)\n###### $LaTeX$\u53ef\u7504\u4e0d\u6233\n",
        "postTime": 1604486352,
        "uid": 239169,
        "name": "\u8377\u53f6\u4e0b",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF427B \u3010Prison Transfer\u3011"
    },
    {
        "content": "#### \u9898\u610f\u7b80\u8ff0\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6570\u5217\uff0c\u8be2\u95ee\u6709\u591a\u5c11\u4e2a\u957f\u5ea6\u4e3a $c$ \u7684\u5b50\u4e32\u4f7f\u5f97\u5b50\u4e32\u5e8f\u5217\u4e2d\u6ca1\u6709\u4e00\u4e2a\u5143\u7d20\u8d85\u8fc7 $t$\u3002\n\n#### \u9898\u76ee\u5206\u6790\n\n\u4f9d\u636e\u9898\u610f\u76f4\u63a5\u6a21\u62df\u5373\u53ef\u3002\n\n\u4ece\u5de6\u5411\u53f3\u904d\u5386\u6574\u4e2a\u5e8f\u5217\uff0c\u6bcf\u6b21\u8bb0\u5f55\u4e00\u4e0b\u5f53\u524d\u7b26\u5408\u6761\u4ef6\u7684\u5b50\u4e32\u957f\u5ea6\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\u6761\u4ef6\u5219\u7f6e0\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\u76f8\u5bf9\u6bd4\u8f83\u7b80\u5355\u3002\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\n\ninline int read()\n{\n\tint x=0; int f=1; char ch=getchar();\n\twhile(!isdigit(ch)) {if(ch=='-')f=-1; ch=getchar();}\n\twhile(isdigit(ch)) {x=x*10+ch-'0'; ch=getchar();}\n\treturn x*f;\n}\n\nint cur,ans;\n\nint main(int argc, char const *argv[])\n{\n\tint n=read(),t=read(),c=read();\n\tfor (int i = 0; i < n; ++i)\n\t{\n\t\tint x=read();\n\t\tif(x<=t)\n\t\t{\n\t\t\t++cur;\n\t\t\tif(cur>=c) ++ans;\n\t\t}\n\t\telse cur=0;\n\t}\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}\n```",
        "postTime": 1576115837,
        "uid": 107735,
        "name": "shiroi",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF427B \u3010Prison Transfer\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u5b9a\u5e8f\u5217 $a$\uff0c\u4ee5\u53ca\u4e24\u4e2a\u6570 $c,t$\uff0c\u6c42 $\\sum_{i=1}^{n-c+1} [(\\max_{j=i}^{i+c-1} a_j) \\leq t]$\uff0c\u5373\u6709\u591a\u5c11\u4e2a\u957f\u5ea6\u4e3a $c$ \u7684\u533a\u95f4 $[l, r]$\uff0c\u6ee1\u8db3\u8fd9\u4e2a\u533a\u95f4\u6700\u5927\u503c $\\leq t$\u3002\n\n$n \\leq 2 \\cdot 10^5$\u3002 \n\n## \u89e3\u6cd5\n\n\u8003\u8651\u66b4\u529b\u679a\u4e3e\u6bcf\u4e2a\u533a\u95f4\uff0c\u679a\u4e3e\u7684\u590d\u6742\u5ea6\u662f $O(n)$ \u7684\uff0c\u800c\u6bcf\u6b21\u8981\u6c42\u6700\u5927\u503c\uff0c\u590d\u6742\u5ea6 $O(n^2)$\uff0c\u65e0\u6cd5\u627f\u53d7\u3002\n\n\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u533a\u95f4\u6700\u5927\u503c\u53ef\u4ee5\u5404\u79cd\u6570\u636e\u7ed3\u6784\u7ef4\u62a4\uff0c\u4f8b\u5982\u5206\u5757\u6216\u8005\u7ebf\u6bb5\u6811\u6216\u8005\u5176\u4ed6\u6570\u636e\u7ed3\u6784\uff0c\u5206\u5757\u662f $O(n \\sqrt{n})$ \u7684\u590d\u6742\u5ea6\uff0c\u7ebf\u6bb5\u6811\u662f $O(n \\log n)$\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u732b\u6811\u6216\u8005 ST \u8868\u7b49\u3002\n\n\u53e6\u5916\u4e5f\u6709\u4e00\u4e2a $O(n)$ \u7684\u89e3\u6cd5\uff0c\u4e5f\u5c31\u662f\u6ed1\u52a8\u7a97\u53e3\u3002\n\n\u7ebf\u6bb5\u6811\u4ee3\u7801\uff1a\n\n```cpp\n#include <iostream>\n#include <cmath>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\nusing namespace std;\n\nconst int N = 2e5 + 5;\n\nint a[N];\nint n, t, c, ans = 0;\n\nclass SegmentTree\n{\npublic:\n\tstruct Node\n\t{\n\t\tint l, r, maxn;\n\t}tr[N << 2];\n\tvoid push_up(int u)\n\t{\n\t\ttr[u].maxn = max(tr[u << 1].maxn, tr[u << 1 | 1].maxn);\n\t}\n\tvoid build(int u, int l, int r)\n\t{\n\t\ttr[u] = { l, r, -1 };\n\t\tif (l == r)\n\t\t{\n\t\t\ttr[u].maxn = a[l];\n\t\t\treturn;\n\t\t}\n\t\tint mid = l + r >> 1;\n\t\tbuild(u << 1, l, mid);\n\t\tbuild(u << 1 | 1, mid + 1, r);\n\t\tpush_up(u);\n\t}\n\tint query(int u, int l, int r)\n\t{\n\t\tif (tr[u].l >= l and tr[u].r <= r) return tr[u].maxn;\n\t\tint mid = tr[u].l + tr[u].r >> 1, res = -1;\n\t\tif (l <= mid) res = query(u << 1, l, r);\n\t\tif (r > mid) res = max(res, query(u << 1 | 1, l, r));\n\t\treturn res;\n\t}\n};\n\nSegmentTree sg;\n\nint main()\n{\n\tscanf(\"%d%d%d\", &n, &t, &c);\n\tfor (int i = 1; i <= n; i++) scanf(\"%d\", &a[i]);\n\tsg.build(1, 1, n);\n\tfor (int i = 1; i <= n - c + 1; i++) ans += sg.query(1, i, i + c - 1) <= t;\n\tprintf(\"%d\\n\", ans);\n\treturn 0;\n}\n```\n",
        "postTime": 1651978447,
        "uid": 332914,
        "name": "happybob",
        "ccfLevel": 6,
        "title": "CF427B Prison Transfer"
    },
    {
        "content": "[\u70b9\u6211\u770b\u9898](https://www.luogu.com.cn/problem/CF427B)\n\n\u9898\u610f\uff1a\u6709\u4e00\u4e2a\u957f\u5ea6\u4e3a $n$ \u7684\u6570\u5217\uff0c\u4ece\u4e2d\u9009\u51fa $c$ \u4e2a\u5c0f\u4e8e $t$ \u7684\u6570\uff0c\u6c42\u603b\u5171\u6709\u591a\u5c11\u79cd\u60c5\u51b5\u3002\n\n\u601d\u8def\uff1a~~\u663e\u7136\u662f\u6a21\u62df\u9898\uff0c\u6ca1\u4ec0\u4e48\u597d\u8bf4\u7684~~\u3002\u5728\u8f93\u5165\u65f6\u627e\u51fa\u7b26\u5408\u6761\u4ef6\u7684\u4e2a\u6570\uff0c\u5c31\u8bb0\u5f55\u4e0b\u6765\u3002\u5982\u679c\u56da\u72af\u4e25\u91cd\u7a0b\u5ea6\u5927\u4e8e $t$ \uff08\u4e0d\u7b26\u6761\u4ef6\uff09\uff0c\u5219\u91cd\u65b0\u8ba1\u6570\u3002\n\n\u65b9\u6cd5\uff1a\n\n- $1.$ \u8f93\u5165\u5f53\u524d\u56da\u72af\u4e25\u91cd\u7a0b\u5ea6\uff1b\n\n- $2.$ \u5982\u679c\u4e25\u91cd\u7a0b\u5ea6\u5c0f\u4e8e $t$ \uff0c\u8ba1\u6570\u5668 $+1$ \uff1b\n\n- $3.$ \u53cd\u4e4b\uff0c\u8ba1\u7b97\u5f53\u524d\u533a\u95f4\u80fd\u6709\u591a\u5c11\u79cd\u53ef\u80fd\u65b9\u6cd5\uff0c\u66f4\u65b0\u7b54\u6848\uff0c\u8ba1\u6570\u5668\u5f52\u96f6\u3002\n\n\u7ec6\u8282\uff1a\n\n- $1.$ \u5f53\u524d\u627e\u5230\u7684\u533a\u95f4\u5185\u7684\u6570\u7684\u4e2a\u6570\u53ef\u80fd\u4e0d\u53ca $c$ \u4e2a\uff1b\n\n- $2.$ \u8f93\u5165\u7ed3\u675f\u65f6\uff0c\u8fd8\u6709\u4e00\u4e2a\u533a\u95f4\u7684\u7b54\u6848\u50a8\u5b58\u5728\u8ba1\u6570\u5668\u4e2d\uff0c\u8981\u8bb0\u5f97\u52a0\u4e0a\u5b83\u3002\n\n\u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,t,c,num,cnt,ans;//n\u3001t\u548cc\u5982\u9898\u610f\uff0cnum\u65f6\u5f53\u524d\u7f6a\u72af\u7684\u4e25\u91cd\u7a0b\u5ea6\uff0ccnt\u662f\u8ba1\u6570\u5668\uff0cans\u662f\u7edf\u8ba1\u7684\u7b54\u6848 \nint main()\n{\n\tcin>>n>>t>>c;//\u8f93\u5165 \n\tfor(int i=1;i<=n;i++)\n\t{\n\t\tcin>>num;//\u8f93\u5165\u4e25\u91cd\u7a0b\u5ea6 \n\t\tif(num>t)//\u5982\u679c\u5927\u4e8et\uff08\u4e0d\u7b26\u6761\u4ef6\uff09 \n\t\t{\n\t\t\tans+=max(0,cnt-c+1);//\u66f4\u65b0\u7b54\u6848\n\t\t\t//\u56e0\u4e3a\u662f\u52a0\u4e0a\u4e86max(0,cnt-c+1)\uff0c\u6240\u4ee5\u4e0d\u4f1a\u51fa\u73b0\u52a0\u4e0a\u8d1f\u6570\uff0c\u5373\u957f\u5ea6\u5c0f\u4e8ec\u7684\u53ef\u80fd \n\t\t\tcnt=0;//\u8ba1\u6570\u5668\u5f52\u96f6 \n\t\t}\n\t\telse//\u5982\u679c\u5c0f\u4e8et\uff08\u7b26\u5408\u6761\u4ef6\uff09 \n\t\t{\n\t\t\tcnt++;//\u8ba1\u6570\u5668+1 \n\t\t}\n\t}\n\tcout<<ans+max(0,cnt-c+1);//\u8bb0\u5f97\u52a0\u4e0a\u6700\u540e\u4e00\u7ec4\u7b54\u6848 \n\treturn 0;//\u7ed3\u675f\u7a0b\u5e8f \n}\n```",
        "postTime": 1608984256,
        "uid": 329071,
        "name": "\u674e\u81f3\u64ce",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF427B \u3010Prison Transfer\u3011"
    },
    {
        "content": "## \u4fee\u8ba2\u7248\n\n2020 / 7 / 31 \u5c06 \u201cJust for fun\u201d  \u4e2d\u7684\u4ee3\u7801\u6539\u5f97\u66f4\u77ed\u4e86\u3002\n### \u9898\u610f\u7b80\u8ff0\uff1a\n\n\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a n \u7684\u6570\u7ec4\uff0c\u95ee\u5176\u4e2d\u6709\u591a\u5c11\u4e2a\u8fde\u7eed\u7684c\u4e2a\u6570\u6bcf\u4e2a\u6570\u5927\u5c0f\u90fd\u4e0d\u8d85\u8fc7 t\u3002\n\n### \u65b9\u6cd5\uff1a\n\n\u5c31\u62ff\u6837\u4f8b\u4e09\u770b\u5427\uff0c\u9996\u5148\u662f\u4e00\u4e2a\u6570\u5217\uff1a\n\n11 4 2\n\n2 2 0 7 3 2 2 4 9 1 4\n\n\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u4e2a\u6570\u5217\u4e2d\u4ece\u5de6\u5f80\u53f3\u627e\u51fa\u8fde\u7eed\u7684\u6bcf\u4e2a\u6570\u5927\u5c0f\u90fd\u4e0d\u8d85\u8fc7 t \u7684\u6570\u5217\uff1a\n\n2 2 0 \uff1b 3 2 2 4 \uff1b 1 4\n\n\u7136\u540e\u6211\u4eec\u5bf9\u8fd9\u4e09\u4e2a\u5b50\u5e8f\u5217\u5355\u72ec\u5206\u6790\uff1a\n\n\uff081\uff09 2 2 0\uff0c\u53ef\u4ee5\u5206\u6210 2 \u4e2a\u7b26\u5408\u9898\u76ee\u8981\u6c42\u7684\u6570\u5217\uff1b\n\n\uff082\uff09 3 2 2 4\uff0c\u53ef\u4ee5\u5206\u6210 3 \u4e2a\u7b26\u5408\u9898\u76ee\u8981\u6c42\u7684\u6570\u5217\uff1b\n\n\uff083\uff09 1 4\uff0c\u53ef\u4ee5\u5206\u6210 1 \u4e2a\u7b26\u5408\u9898\u76ee\u8981\u6c42\u7684\u6570\u5217\uff1b\n\n\u5bf9\u4e8e\u8fd9\u4e9b\u6570\u5217\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u80fd\u5206\u6210\u7684\u7b26\u5408\u9898\u76ee\u8981\u6c42\u7684\u6570\u5217\u662f**\u539f\u6570\u5217\u957f\u5ea6\u51cf c \u52a0 1**\n\n\u6240\u4ee5\u6700\u7ec8\u7b54\u6848\u5c31\u662f 2 + 3 + 1 = 6 \u79cd\u3002\n\n\u4f46\u8981\u6ce8\u610f\u4e00\u4e0b\uff0c\u5982\u679c\u539f\u6570\u5217\u957f\u5ea6\u51cf\u4e00\u6bd4 c \u8fd8\u5c0f\uff0c\u90a3\u5c31\u522b\u7ba1\u5c31\u884c\u3002\n\n\u6211\u4eec\u5f97\u51fa\u8fd9\u4efd\u4ee3\u7801\uff1a\n\n```cpp\n#include <bits/stdc++.h>\nusing namespace std;\nint n,t,c,a,tt,ans;//tt\u662f\u627e\u5230\u7684\u6570\u5217\uff08\u7b2c\u4e00\u6b21\uff09\u7684\u957f\u5ea6 \nint main()\n{\n\tcin >> n >> t >> c;\n\tfor (int i = 1; i <= n; i++) \n\t\t{\n\t\t\tcin >> a;//\u8fd9\u91cc\u53ef\u4ee5\u8fb9\u8bfb\u5165\u8fb9\u5224\u65ad \n\t\t\tif (a > t) ans += max(0,tt - c + 1),tt = 0; else tt++;\n\t\t\t//\u5982\u679c\u8f93\u5165\u7684\u6570\u4e0d\u7b26\u5408\u6807\u51c6\uff0c\u7b54\u6848\u589e\u52a0\uff0c\u957f\u5ea6\u5f52\u96f6\n\t\t\t//\u6ce8\u610f\u662fans += max(0,tt - c + 1)\u800c\u4e0d\u662fans += tt - c + 1\t\n\t\t}\n\tans += max(0,tt - c + 1);//\u56e0\u4e3a\u6709\u53ef\u80fd\u6700\u540e\u7684\u6ca1\u589e\u52a0\u5faa\u73af\u5c31\u7ed3\u675f\u4e86\uff0c\u6240\u4ee5\u7ed3\u675f\u540e\u8fd8\u8981\u52a0\u4e00\u53e5\t\n\tcout << ans;//\u8f93\u51fa\u7b54\u6848 \n\treturn 0;//AC\uff01\t\n}\n```\n\n\u5c31\u53ef\u4ee5\u6109\u5feb\u5730AC\u4e86\uff01\n\n\n\n------------\n\nJust for fun:\n\n```cpp\n#include <bits/stdc++.h>\nint n,t,c,a,tt,ans;int main(){scanf(\"%d%d%d\",&n,&t,&c);for (int i = 1; i <= n; i++) {scanf(\"%d\",&a);if (a > t) ans += std::max(0,tt - c + 1),tt = 0; else tt++;}ans += std::max(0,tt - c + 1);printf(\"%d\",ans);return 0;}\n```\n\n\u4e24\u884c\u79d2\u84dd\u9898\uff0c~~\u8bf6\u538b\u884c\u540e\u600e\u4e48\u8fd8\u53d8\u5feb\u4e0d\u5c11\uff1f~~",
        "postTime": 1594869965,
        "uid": 241915,
        "name": "Level_Down",
        "ccfLevel": 5,
        "title": "\u9898\u89e3 CF427B \u3010Prison Transfer\u3011"
    }
]
[
    {
        "content": "\u8fd9\u9053\u9898\u975e\u5e38\u7684\u6c34\uff0c\u53ef\u80fd\u662f\u5f88\u591a\u4eba\u770b\u5230\u8ba1\u7b97\u51e0\u4f55\u5c31\u5f03\u4e86\u6240\u4ee5 AC \u6bd4 A \u5c11\u5427\u3002\n\n\u6bcf\u4e00\u6b21\uff0c\u6211\u4eec\u53ea\u7528\u627e\u5230\u6700\u9ad8\u7684\u70b9\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728 $i$ \u4e4b\u540e\u4e0e\u773c\u775b\u6784\u6210\u659c\u7387\u6700\u5c0f\u7684\u70b9\u4e0e\u5f53\u524d\u7ebf\u76f8\u4ea4\u6c42\u4ea4\u70b9\u3002\n\n\u8fd9\u91cc\u662f\u66b4\u529b\u89e3\u76f4\u7ebf\u4ea4\u70b9\u7684\u505a\u6cd5\uff0c\u53ef\u4ee5\u770b\u4e00\u4e0b\u5177\u4f53\u5b9e\u73b0\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define re register\nusing namespace std;\nconst int Mxdt=100000;\t//\u5355\u6b21\u5927\u5c0f\ninline char gc(){\n\tstatic char buf[Mxdt],*p1=buf,*p2=buf;\n\treturn p1==p2&&(p2=(p1=buf)+fread(buf,1,Mxdt,stdin),p1==p2)?EOF:*p1++;\n}\n#define gc getchar\ninline char pc(char ch,bool bj){\n\tstatic char buf[Mxdt],*p1=buf,*p2=buf+Mxdt;\n\treturn (bj||(*p1++=ch)&&p1==p2)&&fwrite(p1=buf,1,p1-buf,stdout),0;\n}\ninline int read(){\n\tre int t=0;re char v=gc();\n\twhile(v<'0')v=gc();\n\twhile(v>='0')t=(t<<3)+(t<<1)+v-48,v=gc();\n\treturn t;\n}\ninline double dis(re double a,re double b,re double c,re double d){\n\treturn sqrt((a-c)*(a-c)+(b-d)*(b-d));\n}\nstruct point{double x,y;}p[200002],eye,h;\ndouble ans;\ninline double slope(re point x,re point y){\n\treturn (y.y-x.y)/(y.x-x.x);\n}\ninline point cross(re point a,re point b,re point c,re point d){\n\tif(b.x==h.x)return b;\n\tdouble k2=(d.y-c.y)/(d.x-c.x),k1=(b.y-a.y)/(b.x-a.x),b1=a.y-a.x*k1,b2=c.y-c.x*k2;\n\tpoint s;\n\ts.x=(b2-b1)/(k1-k2);\n\treturn (point){s.x,s.x*k1+b1};\n}\nint n,m,stk[200002],tp;\nint main(){\n\tn=read(),m=read();\n\tfor(re int i=1;i<=n;++i)p[i].x=read(),p[i].y=read();\n\teye.x=p[n].x,eye.y=p[n].y+m,h=p[n];\n\tfor(re int i=n-1;i;--i){\n\t\tif(slope(p[i],eye)<=slope(h,eye)){\n\t\t\tpoint x=cross(p[i],p[i+1],h,eye);\n\t\t\tans+=dis(p[i].x,p[i].y,x.x,x.y);\n\t\t\th=p[i];\n\t\t}\n\t}\n\tprintf(\"%.9lf\",ans);\n}\n\n```\n",
        "postTime": 1609573150,
        "uid": 41476,
        "name": "gyh20",
        "ccfLevel": 10,
        "title": "\u9898\u89e3 CF1468G \u3010Hobbits\u3011"
    },
    {
        "content": "# \u9898\u610f\uff1a\n\u5728\u4e8c\u7ef4\u5e73\u9762\u4e0a\u9762\u6709$n$\u4e2a\u70b9$(x_1,y_1),(x_2,y_2),\\cdots,(x_n,y_n)$\uff0c\u76f8\u90bb\u7684\u70b9\u8fde\u4e00\u6bb5\u7ebf\u6bb5\uff0c\u7ec4\u6210\u4e00\u4e2a\u6298\u7ebf\u3002\u6709\u4e00\u4e2a\u773c\u775b\u5728\u70b9$(x_n,y_n+H)$\u4e0a\uff0c\u6c42\u4ece\u8fd9\u70b9\u80fd\u591f\u770b\u5230\u4e0d\u88ab\u906e\u6321\u7684\u7ebf\u6bb5\u603b\u957f\u5ea6\u4e3a\u591a\u5c11\u3002\n# \u601d\u8def\uff1a\n\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u4e00\u6761\u7ebf\u6bb5\u6216\u8005\u5b83\u7684\u4e00\u90e8\u5206\u4e0d\u80fd\u591f\u88ab\u770b\u5230\uff0c\u90a3\u4e48\u5b83\u4e00\u5b9a\u4f1a\u88ab\u540e\u9762\u7684\u67d0\u4e9b\u7ebf\u6bb5\u6240\u5f71\u54cd\uff0c\u4e5f\u5c31\u662f\u540e\u9762\u7684\u66f4\u9ad8\u7684\u70b9\u4f1a\u906e\u6321\u4f4f\u524d\u9762\u7684\u7ebf\u6bb5\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u5224\u65ad\u4e00\u6761\u7ebf\u6bb5\u4f1a\u4e0d\u4f1a\u88ab\u906e\u6321\uff0c\u6211\u4eec\u9700\u8981\u5173\u6ce8\u8fd9\u6761\u7ebf\u6bb5\u7684\u540e\u9762\u6700\u9ad8\u7684\u70b9\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u4ece\u540e\u5f80\u524d\u904d\u5386\uff0c\u5224\u65ad\u7ebf\u6bb5\u548c\u8fed\u4ee3\u6700\u9ad8\u70b9\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\u90a3\u4e48\u6211\u4eec\u63a5\u4e0b\u6765\u5c31\u9700\u8981\u5224\u65ad\u4e00\u6761\u7ebf\u6bb5\u662f\u5426\u80fd\u591f\u88ab\u770b\u89c1\u4e86\u3002\u6211\u4eec\u8bbe\u773c\u775b\u5728\u7684\u70b9\u4e3a  $E$\uff0c\u6700\u9ad8\u70b9\u4e3a $M$\u3002\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e00\u70b9 $P$ \uff0c\u5982\u679c $P$ \u5728 $\\overrightarrow{EM}$ \u7684\u53f3\u8fb9\uff08\u987a\u65f6\u9488\u65b9\u5411\uff09\uff0c\u90a3\u4e48\u4ed6\u5c31\u53ef\u4ee5\u88ab\u770b\u5230\uff0c\u53cd\u6b63\uff0c\u5b83\u5c31\u4f1a\u88ab\u906e\u6321\u3002\u90a3\u4e48\u5bf9\u4e8e\u7ebf\u6bb5 $(P_i,P_{i+1})$ \uff0c\u6211\u4eec\u5224\u65ad $P_i$ \u548c $P_{i+1}$ \u548c $\\overrightarrow{EM}$ \u7684\u5173\u7cfb\u3002\n\n1\u3001 $P_i$ \u548c $P_{i+1}$ \u90fd\u53ef\u4ee5\u88ab\u770b\u5230\uff0c\u90a3\u4e48\u957f\u5ea6\u52a0\u4e0a $dis(P_i,P_{i+1})$\u3002\n\n2\u3001 $P_i$ \u88ab\u770b\u89c1\uff0c $P_{i+1}$ \u4e0d\u88ab\u770b\u89c1\uff0c\u90a3\u4e48\u6211\u4eec\u6c42\u51fa $EM$ \u548c $P_iP_{i+1}$ \u7684\u4ea4\u70b9 $Q$ \uff0c\u957f\u5ea6\u52a0\u4e0a $dis(P_i,Q)$\u3002\n\n3\u3001 $P_i$ \u548c $P_{i+1}$ \u90fd\u4e0d\u88ab\u770b\u89c1\uff0c\u5c31\u4e0d\u7528\u52a0\u4e0a\u8fd9\u6bb5\u7684\u8ddd\u79bb\u3002\n\n\u4e3a\u4ec0\u4e48\u4e0d\u7528\u8003\u8651 $P_i$ \u4e0d\u88ab\u770b\u89c1\uff0c $P_{i+1}$ \u88ab\u770b\u89c1\u7684\u60c5\u51b5\uff1f\u56e0\u4e3a\u5982\u679c\u4e0d\u53ef\u80fd\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002\u5982\u679c $P_i$ \u5728 $\\overrightarrow{EM}$ \u7684\u5de6\u8fb9\uff0c $P_{i+1}$ \u5728 $\\overrightarrow{EM}$ \u7684\u53f3\u8fb9\uff0c\u90a3\u4e48 $\\overrightarrow{EM}\\times\\overrightarrow{EP_{i+1}}\\le 0$ ,\u90a3\u4e48\u5728\u524d\u4e00\u6b65\u679a\u4e3e $i+1$ \u7684\u65f6\u5019\uff0c$M$\u5c31\u4f1a\u88ab\u8fed\u4ee3\u6389\u3002\n\n\u6700\u540e\u5c31\u662f\u9700\u8981\u8fed\u4ee3\u6700\u9ad8\u70b9\uff0c\u6ce8\u610f\u7684\u662f\u3002\u6700\u9ad8\u70b9**\u5e76\u4e0d\u662f** $y_{max}$ \u7684\u70b9\u3002\u6211\u4eec\u8bbe\u4ece $x$ \u8f74\u7684\u6b63\u65b9\u5411\u987a\u65f6\u9488\u5230 $\\overrightarrow{EP}$ \u7684\u89d2\u5ea6\u4e3a $\\alpha$,$\\alpha_{max}$ \u7684\u70b9\u662f\u6700\u9ad8\u70b9\u3002\u4e5f\u5c31\u662f\u6211\u4eec\u5224\u65ad\u4e00\u4e2a\u70b9 $P$ \u5982\u679c\u5728 $\\overrightarrow{EM}$ \u7684\u53f3\u8fb9\uff08\u987a\u65f6\u9488\u65b9\u5411\uff09\uff0c\u90a3\u4e48\u5c31\u5c06 $P$ \u66ff\u6362\u6700\u9ad8\u70b9 $M$\u3002\n\n\u603b\u7ed3\u5c31\u662f\uff1a\u4ece\u540e\u5411\u524d\u904d\u5386\uff0c\u5224\u65ad\u7ebf\u6bb5\u7aef\u70b9 $P_i$ \u548c $P_{i+1}$ \u4e0e $\\overrightarrow{EM}$ \u7684\u5173\u7cfb\uff0c\u8ba1\u7b97\u8ddd\u79bb\u3002\u8fed\u4ee3\u6700\u9ad8\u70b9 $M$\u3002\n# \u4ee3\u7801\uff1a\n\n```cpp\n#include<bits/stdc++.h>\n#define pii pair<int,int>\n#define ll long long\n#define cl(x,y) memset(x,y,sizeof(x))\n#define ct cerr<<\"Time elapsed:\"<<1.0*clock()/CLOCKS_PER_SEC<<\"s.\\n\";\n#define mp make_pair\n#define pb push_back\n#define fi first\n#define se second\n#define all(x) x.begin(),x.end()\n#define lson x<<1,l,mid\n#define rson x<<1|1,mid+1,r\n#define INF 1e18\nconst int N=1e6+10;\nconst int mod=1e9+7;\nconst double inf=1e18;\nconst double eps=1e-8;\nconst double pi=acos(-1);\nusing namespace std;\nint n,top;\nint sgn(double x)\n{\n    if(fabs(x) < eps)return 0;\n    if(x < 0) return -1;\n    else return 1;\n}\nstruct point\n{\n    double x,y;\n    point(){}\n    point(double xx,double yy){x=xx;y=yy;}\n    point operator +(point b){return point(x+b.x,y+b.y);}\n    point operator -(point b){return point(x-b.x,y-b.y);}\n    double operator ^(point b){return x*b.y-y*b.x;}//\u53c9\u4e58 \n    double operator *(point b){return x*b.x+y*b.y;}//\u70b9\u4e58 \n    point operator *(double b){return point(x*b,y*b);}//\u6570\u4e58   \n    void read(){scanf(\"%lf%lf\",&x,&y);}\n}p[N];\nstruct line\n{\n    point s,e,l;\n    line(){}\n    line(point ss,point ee){s = ss;e = ee;l=e-s;}\n    double gettan(){return atan2(e.y-s.y,e.x-s.x);}\n};\ndouble dis(point a,point b)\n{\n\treturn sqrt((a-b)*(a-b));\n}\npoint getcross(line l1,line l2)\n{\n\tdouble s1=((l2.s-l1.s)^(l2.e-l1.s));\n\tdouble s2=((l2.e-l1.e)^(l2.s-l1.e));\n\tif(s1+s2==0)//\u5e73\u884c \n\t\treturn point{inf,inf};\n\treturn l1.s+l1.l*(s1/(s1+s2));\n}\nint main()\n{\n\tint i;\n\tdouble h;\n\tscanf(\"%d%lf\",&n,&h);\n\tfor(i=1;i<=n;i++)\n\t\tp[i].read();\t\t\n\tdouble sum=0;\n\tpoint mx=p[n],eye={p[n].x,p[n].y+h};\n\tfor(i=n-1;i>=1;i--)\n\t{\n\t\tpoint ju=mx-eye,p1=p[i]-eye,p2=p[i+1]-eye;\n\t\tint f1=((ju^p1)<=0),f2=((ju^p2)<=0);\n\t\tif(f1 && f2)\n\t\t\tsum+=dis(p[i],p[i+1]);\t\t\t\n\t\telse if(f1 && !f2)\n\t\t{\n\t\t\tpoint g=getcross(line{eye,mx},line{p[i],p[i+1]});\n\t\t\tsum+=dis(g,p[i]);\n\t\t}\n\t\tif(f1)\n\t\t\tmx=p[i];\n\t}\n\tprintf(\"%.9lf\\n\",sum);\n\treturn 0;\n}\n```\n\n",
        "postTime": 1617026595,
        "uid": 274673,
        "name": "ChuTian",
        "ccfLevel": 0,
        "title": "CF1468G Hobbits\u9898\u89e3"
    }
]
[
    {
        "content": "[CF\u9898\u9762\u4f20\u9001\u95e8](https://codeforces.com/contest/1364/problem/A) [\u6d1b\u8c37\u9898\u9762\u4f20\u9001\u95e8](https://www.luogu.com.cn/problem/CF1364A) [\u535a\u5ba2\u98df\u7528\u66f4\u4f73](https://www.luogu.com.cn/blog/b6e0/tijie-CF1364A)\n\nA\u9898\u5c31\u51fa\u73b0\u6570\u7ec4\u4e86\uff1f\n\n\u5982\u679c\u6574\u4e2a\u6570\u7ec4\u7684\u548c\u5c31\u4e0d\u80fd\u88ab$x$\u6574\u9664\uff0c\u90a3\u4e48\u76f4\u63a5\u8f93\u51fa$n$\u3002\u5982\u679c\u6570\u7ec4\u91cc\u6240\u6709\u7684\u6570\u90fd\u80fd\u88ab$x$\u6574\u9664\uff0c\u90a3\u4e48\u8f93\u51fa$-1$\uff0c\u56e0\u4e3a\u600e\u4e48\u53d6\u90fd\u80fd\u88ab$x$\u6574\u9664\u3002\u5982\u679c\u548c\u80fd\u88ab$x$\u6574\u9664\uff0c\u90a3\u4e48\u8981\u5220\u53bb\u4e00\u4e2a\u4e0d\u80fd\u88ab$x$\u6574\u9664\u7684\u6570\u3002\u4f46\u662fsubarray\u8981\u8fde\u7eed\uff0c\u6240\u4ee5\u6570\u7ec4\u4e24\u7aef\u90fd\u627e\u3002\u5de6\u7aef\u627e\u5230\u6700\u8fd1\u7684\u4e00\u4e2a\u4e0d\u80fd\u88ab$x$\u6574\u9664\u7684\u6570\uff0c\u53f3\u7aef\u627e\u5230\u6700\u8fd1\u7684\u4e00\u4e2a\u4e0d\u80fd\u88ab$x$\u6574\u9664\u7684\u6570\uff0c\u4e24\u8005\u5c06\u5220\u53bb\u7684\u6570\u7684\u4e2a\u6570\u6bd4$\\min$\u3002\u8d5b\u65f6\u4ee3\u7801\uff0c\u5199\u7684\u5f88\u4e11\uff1a\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint a[100010];\nint main()\n{\n\tint t,n,x,i,sum,a1,a2;\n\tbool f;\n\tcin>>t;\n\twhile(t--)\n\t{\n\t\tcin>>n>>x;\n\t\tsum=0;//\u548c\n\t\tf=true;//\u6807\u8bb0\u662f\u5426\u5168\u90e8\u90fd\u80fd\u88abx\u6574\u9664\n\t\tfor(i=0;i<n;i++)\n\t\t{\n\t\t\tcin>>a[i];\n\t\t\tsum+=a[i];\n\t\t\tif(a[i]%x)\n\t\t\t\tf=false;\n\t\t}\n\t\tif(f)\n\t\t\tcout<<\"-1\\n\";\n\t\telse\n\t\t\tif(sum%x)\n\t\t\t\tcout<<n<<endl;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor(i=0;i<n;i++)//\u5de6\u8fb9\u627e\n\t\t\t\t\tif(a[i]%x)\n\t\t\t\t\t\tbreak;\n\t\t\t\ta1=i+1;\n\t\t\t\tfor(i=n-1;i>=0;i--)//\u53f3\u8fb9\u627e\n\t\t\t\t\tif(a[i]%x)\n\t\t\t\t\t\tbreak;\n\t\t\t\ta2=n-i;\n\t\t\t\tcout<<n-min(a2,a1)<<endl;//\u6bd4min\n\t\t\t}\n\t}\n\treturn 0;\n}\n```\n\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a$O(tn)$\u3002",
        "postTime": 1592104206,
        "uid": 150522,
        "name": "b6e0_",
        "ccfLevel": 9,
        "title": "\u9898\u89e3 CF1364A \u3010XXXXX\u3011"
    },
    {
        "content": "\u6839\u636e\u6027\u8d28\uff0c\u5f97\u5230\u7684\u6570\u7ec4\u5fc5\u7136\u53ef\u4ee5\u901a\u8fc7\u539f\u6570\u7ec4\u5220\u53bb\u4e00\u4e2a\u524d\u7f00\u4e00\u4e2a\u540e\u7f00\u5f97\u5230\u3002\n\n\u6211\u4eec\u5148\u628a\u6240\u6709\u6570\u52a0\u8d77\u6765\uff0c\u770b`sum`\u662f\u5426\u53ef\u4ee5\u88ab\u6574\u9664\uff0c\u5982\u679c\u4e0d\u80fd\uff0c\u76f4\u63a5\u8f93\u51fa\uff0c\u5982\u679c\u53ef\u4ee5\uff0c\u6211\u4eec\u627e\u7b2c\u4e00\u4e2a\u4e0d\u80fd\u88ab\u6574\u9664\u7684\u524d\u7f00\u6216\u8005\u540e\u7f00\u3002\n\n- \u5982\u679c`sum`\u80fd\u88ab\u6574\u9664\uff0c\u800c`x`\u4e0d\u80fd\u88ab\u6574\u9664\uff0c\u90a3\u4e48`sum-x`\u4e5f\u4e0d\u80fd\u88ab\u6574\u9664\u3002\n\n\u81f3\u4e8e\u5b9e\u73b0\uff0c\u6211\u4eec\u5f97\u5230\u80fd\u88ab\u6574\u9664\u7684`sum`\u4ee5\u540e\uff0c\u4ece\u5934\u548c\u5c3e\u5f00\u59cb\u5206\u522b\u627e\u4e00\u4e2a\u6700\u77ed\u7684\u4e0d\u80fd\u88ab\u6574\u9664\u7684\u7f00\uff0c\u770b\u770b\u54ea\u4e00\u4e2a\u66f4\u77ed\uff0c\u7136\u540e\u76f4\u63a5\u8f93\u51fa\u5c31\u5b8c\u4e8b\u4e86\u3002\n\n\u8bc1\u660e\u5982\u4e0b\uff1a\n\n\u8bbe\u5b58\u5728$p | sum$\uff0c$p\\not |  k$\uff0c\u4e14$p > 1$\n\n\u90a3\u4e48$p|(sum+p)$\n\n$sum - k = sum+p-k   \\mod p$\n\n$$\n\\because p\\not |  k\n$$\n$$\n\\therefore p-k \\not |  k\n$$\n\n$$\n\\therefore (sum+p-k)\\not |  k\n$$\n\n$$\n\\therefore (sum-k) \\not | k\n$$\n\n\u8bb2\u9053\u7406\u6211\u4e0d\u592a\u4f1a\u8bc1(\u6709\u9519\u8bef\u8bf7\u5927\u529b\u653b\u51fb\u6211(\u786e\u4fe1\u3002\n\n\n\n\n```cpp\n#include<iostream>\n#include<cstring>\n#include<cstdio>\n#include<algorithm>\n#include<cmath>\n#include<map>\n#include<set>\n#include<vector>\n#include<queue>\n#include<cstdlib>//rand()\n#define rep(i,a,b) for(register int i = (a);i <= (b);++i)\n#define per(i,a,b) for(register int i = (a);i >= (b);--i)\ntypedef long long ll;\ntypedef unsigned long long ull;\nusing std::string;using std::cin;using std::cout;\n\nint _,n,p,a[111111],head,tail;\nbool flag;\n\nint main(){\n    std::ios::sync_with_stdio(0);cin.tie(0);cout.tie(0);\n    //freopen(\"in.in\", \"r\", stdin);\n    cin >> _;\n    while(_--){\n        flag = true;\n        cin >> n >> p;\n        rep(i,1,n) cin >> a[i];\n        //\u4e0b\u9762\u4e24\u884c\u5176\u5b9e\u6ca1\u5fc5\u8981\uff0c\u7b49\u6548\u4e8e\u76f4\u63a5\u5224\u65adsum\u662f\u5426\u88ab\u6574\u9664\n        rep(i,1,n) if(a[i] % p != 0) flag = false;\n        if(flag) cout << \"-1\\n\";\n        else {\n            head = tail = 0;\n            int sum = 0;\n            rep(i,1,n) sum += a[i];\n            if(sum % p == 0){\n            \t//\u5bfb\u627e\u4e0d\u80fd\u88ab\u6574\u9664\u7684\u524d\u7f00&\u540e\u7f00\uff0c\u7528head\u548ctail\u8bb0\u5f55\u957f\u5ea6\n                rep(i,1,n){\n                    if(a[i] % p == 0) ++head;\n                    else break;\n                }\n                per(i,n,1){\n                    if(a[i] % p == 0) ++tail;\n                    else break;\n                }\n                cout << n - std::min(head,tail) - 1 << \"\\n\";\n            } else cout << n << \"\\n\";\n        }\n    }\n    return 0;\n}   \n```",
        "postTime": 1592208264,
        "uid": 123389,
        "name": "Isshiki_Hugh",
        "ccfLevel": 4,
        "title": "\u9898\u89e3 CF1364A \u3010XXXXX\u3011"
    },
    {
        "content": "~~\u8fd9\u4e2a\u9898\u662f 1h 50min \u624d\u505a\u51fa\u6765\u7684~~\n\n\u9996\u5148\u6211\u4eec\u5148\u6765\u5173\u6ce8\u4e00\u53e5\u8bdd\uff1a\n\n>**An array $a$ is a subarray of an array $b$ if a can be obtained from $b$ by deletion of several (possibly, zero or all) elements from the beginning and several (possibly, zero or all) elements from the end.**\n\n\u6ce8\u610f **subarray**\u3002\u6240\u4ee5\u662f\u4e00\u6bb5\u8fde\u7eed\u7684\u5b50\u5e8f\u5217\u554a\u554a\u554a\u554a\u554a\u3002\n\n\u6240\u4ee5\u6211\u4eec\u73b0\u5728\u7684\u601d\u8def\u5c31\u5f88\u660e\u786e\u4e86\u3002\n\n1.\u5982\u679c $\\forall i<n,x|a_i$,\u7b54\u6848\u80af\u5b9a\u4e3a $\u22121$  \n2.\u5982\u679c$x\\nmid \\sum_{i=1}^n a_i$\uff0c\u6211\u4eec\u76f4\u63a5\u8f93\u51fa $n$ \u5373\u53ef\u3002\n3.\u95ee\u9898\u73b0\u5728\u96c6\u4e2d\u5728\u5982\u679c\u4e0d\u5c5e\u4e8e\u524d\u4e24\u79cd\u60c5\u51b5\uff0c\u5373 $x\\nmid \\sum_{i=1}^n a_i$\uff0c\u4e14\u4e0d\u662f\u6240\u6709\u7684 $a_i$ \u90fd\u662f $x$ \u7684\u500d\u6570\u3002\u8fd9\u79cd\u60c5\u51b5\u6211\u4eec\u53ef\u4ee5\u4ece\u524d\u5f80\u540e\u626b\u4e00\u904d\uff0c\u76f4\u5230\u51fa\u73b0\u4e0d\u662f $x$ \u7684\u500d\u6570\u7684\u6570\u5c31\u53ef\u4ee5\u505c\u4e0b\u6765\uff0c\u4ece\u540e\u5f80\u524d\u8fdb\u884c\u76f8\u540c\u7684\u64cd\u4f5c\uff0c\u6700\u540e\u6bd4\u8f83\u4e00\u4e0b\u54ea\u79cd\u66f4\u4f18\u5373\u53ef\u3002\n\n\u4e3a\u4ec0\u4e48\uff1f\n\n\u6211\u4eec\u77e5\u9053\u5bf9\u4e8e\u4e24\u4e2a $x$ \u7684\u500d\u6570 $a,b$\u3002\u6211\u4eec\u8bbe $a=p\\cdot x,b=q\\cdot x$\u3002$a-b=(p-q)\\cdot x$\uff0c\u4e5f\u662f $x$ \u7684\u500d\u6570\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u627e\u5230\u4e00\u4e2a\u4e0d\u80fd\u88ab $x$ \u6574\u9664\u7684\u6570\u624d\u53ef\u4ee5\u3002**\u6211\u4eec\u6700\u540e\u8981\u5728\u201c\u4ece\u524d\u5f80\u540e\u201d\u548c\u201c\u4ece\u540e\u5f80\u524d\u201d\u5f97\u51fa\u7684\u7b54\u6848\u4e2d\u9009\u4e00\u4e2a**\u3002\u6211\u4eec\u65e0\u9700\u4e24\u8fb9\u90fd\u51cf\u53bb\uff0c\u6240\u4ee5\u662f\u53d6\u6700\u503c\u3002\n\n```cpp\n#include<bits/stdc++.h>\n#define int long long\nusing namespace std;\n \nint read() {\n\tchar ch=getchar();\n\tint f=1,x=0;\n\twhile(ch<'0'||ch>'9') {\n\t\tif(ch=='-')\n\t\t\tf=-1;\n\t\tch=getchar();\n\t}\n\twhile(ch>='0'&&ch<='9') {\n\t\tx=x*10+ch-'0';\n\t\tch=getchar();\n\t}\n\treturn f*x;\n}\n \nconst int maxn=1e5+10;\n \nint n,a[maxn],cnt[maxn],x;\n \nsigned main() {\n\tint t;\n\tt=read();\n\twhile(t--) {\n\t\tfill(cnt,cnt+n+1,0);\n\t\tn=read();x=read();\n\t\tint sum=0;\n\t\t\n\t\tfor(int i=1;i<=n;i++) {\n\t\t\ta[i]=read();\n\t\t\tcnt[a[i]%x]++;\n\t\t\tsum+=a[i]%x;\n\t\t}\n\t\tif(cnt[0]==n) {\n\t\t\tcout<<-1<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\telse if(sum%x!=0) {\n\t\t\tcout<<n<<endl;\n\t\t\tcontinue;\n\t\t}\n\t\t\n\t\tint left=1,right=n;\n\t\t\n\t\tfor(;left<=n;left++) {\n\t\t\tif(a[left]%x!=0) break;\n\t\t}\n\t\tfor(;right>=1;right--) {\n\t\t\tif(a[right]%x!=0) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tcout<<max(n-left,right-1)<<endl; \n\t}\n\treturn 0;\n}\n```",
        "postTime": 1592214650,
        "uid": 132976,
        "name": "huayucaiji",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF1364A \u3010XXXXX\u3011"
    },
    {
        "content": "## \u3010\u8d2a\u5fc3\u3011\u3010CF1364A\u3011XXXXX\r\n\r\n~~\u628a subarray \u770b\u6210 subsequence \u7684\u60b2\u5267~~\u3002\r\n\r\n### Analysis\r\n\r\n\u9996\u5148\u5982\u679c\u5e8f\u5217\u548c\u4e0d\u80fd\u88ab $x$ \u6574\u9664\uff0c\u90a3\u4e48\u9009\u4e0a\u6574\u4e2a\u5e8f\u5217\u5373\u53ef\u3002\u4e0b\u9762\u8003\u8651\u548c\u88ab $x$ \u6574\u9664\u7684\u60c5\u51b5\u3002\r\n\r\n\u6709\u4e00\u4e2a\u7ed3\u8bba\u662f\uff0c\u5982\u679c\u5b58\u5728\u89e3\uff0c\u7b54\u6848\u9009\u51fa\u6765\u7684 subarray \u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u4e3a $1$ \u6216\u8005 $n$ \u7684\u7aef\u70b9\u3002\u4e5f\u5373 subarray \u8981\u4e48\u662f\u539f\u5e8f\u5217\u7684\u4e00\u4e2a\u524d\u7f00\uff0c\u8981\u4e48\u662f\u4e00\u4e2a\u540e\u7f00\u3002\r\n\r\n\u7b80\u5355\u8bc1\u660e\u5982\u4e0b\uff1a\r\n\u7528\u53cd\u8bc1\u6cd5\uff0c\u8bbe\u6700\u4f18\u7b54\u6848\u5e8f\u5217\u4e3a $[l, r]$\uff0c\u4e14 $l \\neq 1, r \\neq n$\u3002\u8bbe\u5e8f\u5217\u524d\u7f00\u548c\u4e3a $s$\u3002\u663e\u7136 $s_r - s_{l - 1}$ \u4e0d\u80fd\u88ab $x$ \u6574\u9664\u3002\u5206\u60c5\u51b5\u8ba8\u8bba\uff1a\r\n\r\n1. \u82e5 $s_{l - 1}$ \u4e0d\u80fd\u88ab $x$ \u6574\u9664\uff0c\u5219 $s_n - s_{l  - 1}$ \u4e00\u5b9a\u4e0d\u80fd\u88ab $x$ \u6574\u9664\uff0c\u5219\u9009\u62e9 $[l, n]$ \u662f\u5408\u6cd5\u7684\uff0c\u7b54\u6848\u66f4\u4f18\u3002\r\n2. \u82e5 $s_{l - 1}$ \u88ab $x$ \u6574\u9664\uff0c\u5219 $s_r$ \u4e0d\u80fd\u88ab $x$ \u6574\u9664\uff0c\u9009\u62e9 $[1, r]$ \u5408\u6cd5\uff0c\u7b54\u6848\u66f4\u4f18\u3002\r\n\r\n\u8bc1\u6bd5\u3002\r\n\r\n\u56e0\u6b64\u627e\u4e00\u4e2a\u6700\u77ed\u7684\u4e0d\u80fd\u88ab $x$ \u6574\u9664\u7684\u524d\u7f00\u548c\u540e\u7f00\uff0c\u53d6 min \u5373\u53ef\u3002\u5982\u679c\u627e\u4e0d\u5230\u8fd9\u6837\u7684\u524d/\u540e\u7f00\uff0c\u663e\u7136\u65e0\u89e3\u3002\r\n\r\n### Code\r\n\r\n```cpp\r\nnamespace Fusu {\r\n\r\nint T;\r\nint n, x;\r\nint a[100005], b[100005];\r\n\r\nvoid Main() {\r\n  for (qr(T); T; --T) {\r\n    qr(n); qr(x);\r\n    qra(a + 1, n);\r\n    for (int i = 1; i <= n; ++i) {\r\n      b[i] = b[i - 1] + a[i];\r\n    }\r\n    if ((b[n] % x) != 0) {\r\n      qw(n, '\\n');\r\n    } else {\r\n      int ans = n + 1;\r\n      for (int i = 1; i <= n; ++i) if ((b[i] % x) != 0) {\r\n        ans = std::min({ans, i, n - i});\r\n      }\r\n      qw(n - ans, '\\n');\r\n    }\r\n  }\r\n}\r\n\r\n} // namespace Fusu\r\n```\r\n\r\n",
        "postTime": 1592192025,
        "uid": 65363,
        "name": "\u4e00\u6276\u82cf\u4e00",
        "ccfLevel": 7,
        "title": "\u9898\u89e3 CF1364A \u3010XXXXX\u3011"
    }
]
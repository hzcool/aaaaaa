[
    {
        "content": "\u641e\u4e00\u4e2a\u6709 $\\LaTeX$ \u7684\n\n### Solution\n\n\u8003\u8651\u53ea\u6709\u4e00\u4e2a $a$ \u4e32\u7684\u60c5\u51b5\uff1a\n\n\u5f53\u7b2c $i$ \u4f4d\u662f $0$ \u6216 $5$ \u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u5220\u6216\u4e0d\u5220\u524d $0$ ~ $i-1$ \u4f4d\uff08\u5f53\u7136 $i$ \u540e\u9762\u7684\u5fc5\u987b\u5220\uff09\uff0c\u8bbe $tmp_i$ \u4e3a\u6709 $i$ \u4e2a\u4e32\u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u5171\u6709 $tmp_1=2^0\\cdot(a_0==5||0)+2^1\\cdot(a_1==5||0)+\\cdots+2^i\\cdot(a_i==5||0)\\cdots$ \n\n\n\n\u7136\u540e\u8003\u8651\u5982\u679c\u591a\u4e86\u4e00\u4e2a\u4e32\uff1a\n\n\u90a3\u4e48 $tmp_1$ \u8981\u4e58\u4e0a $2^{len_a}$ \u5373 $2^n$ \uff0c $tmp_2=tmp1\\cdot2^n$ \u3002\n\n\u5171\u6709 $k$ \u4e2a\u4e32\uff0c\u6240\u4ee5 $tmp_k=tmp_1\\cdot (2^n)^{k-1}$ \uff0c $ans=tmp_1+tmp_2+\\cdots+tmp_k$ \uff0c\u7531\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u516c\u5f0f\u53ef\u5316\u4e3a\uff1a $ans=tmp_1\\cdot\\frac{2^{nk}-1}{2^n-1}$ \u3002\uff08 $\\frac 1{2^n-1}$ \u7528\u8d39\u9a6c\u5c0f\u5b9a\u7406\u6c42\u4e00\u4e0b\u9006\u5143\uff0c\u4e0d\u7136\u4f1a\u8d85\u65f6\u6ef4 \uff09\n\n\u6ce8\u610f\uff1a\u56e0\u4e3a\u53ef\u80fd\u51fa\u73b0\u524d\u5bfc\u96f6\uff0c\u6240\u4ee5\u524d\u5bfc\u96f6\u4e5f\u8981\u7b97\u3002\n\n### \u4ee3\u7801\n\n```c++\n#include<bits/stdc++.h>\n#define ll long long\n\nusing namespace std;\nconst int mod=1e9+7;\nchar a[100005];\nll k,tmp;\n\nll fpow(ll a,ll b){\n    ll res=1;\n    while(b){\n        if(b&1) res=res*a%mod;\n        a=a*a%mod;\n        b>>=1;\n    }\n    return res;\n}\n\nint main(){\n    scanf(\"%s%lld\",a,&k);\n    ll n=strlen(a);\n    for(int i=0;i<n;i++)\n        if(a[i]=='5'||a[i]=='0')\n            tmp=(tmp+fpow(2,i))%mod;\n    printf(\"%lld\\n\",tmp*(fpow(2,n*k)-1)%mod*(fpow(fpow(2,n)-1,mod-2))%mod);\n    return 0;\n}\n```\n\n",
        "postTime": 1600910268,
        "uid": 272143,
        "name": "\u662f\u4e2a\u6c49\u5b50",
        "ccfLevel": 4,
        "title": "CF327C \u3010Magic Five\u3011"
    },
    {
        "content": "[luogu \u9898\u76ee\u94fe\u63a5](https://www.luogu.com.cn/problem/CF327C)\n\n\u8fd9\u79cd\u9898\u90fd\u8981\u5199\u597d\u4e45\uff0cwtcl\u3002\n\n\u4e0b\u6587\u4e0b\u6807\u4ece $0$ \u5f00\u59cb\u3002$n$ \u4e3a\u539f\u5e8f\u5217\u957f\u5ea6\u3002\n\n\u8003\u8651 $k=1$ \u7684\u60c5\u51b5\uff0c\u663e\u7136\u8981\u4ee5 `0` \u6216 `5` \u7ed3\u675f\uff0c\u524d\u9762\u968f\u4fbf\u9009\u591a\u5c11\u4e2a\uff0c\u540e\u9762\u5168\u4e0d\u9009\u3002\u82e5\u524d\u9762\u6709 $p$ \u4e2a\u6570\uff0c\u65b9\u6848\u6570\u4e3a $2^p$\u3002\n\n\u82e5 $k\\neq 1$\uff0c\u8bbe $mul = \\sum\\limits_{i=0}^{k-1}2^{in}$\uff0c\u7b54\u6848\u4e58\u4e0a $mul$ \u5373\u53ef\u3002\n\n\u4e3a\u4ec0\u4e48\u5462\uff1f\u82e5\u539f\u5e8f\u5217\u4e2d\u7b2c $p$ \u4f4d\u4e3a `0` \u6216 `5`\uff0c\u90a3\u4e48\u603b\u5e8f\u5217\u4e2d\u5b83\u4f1a\u51fa\u73b0\u5728 $p,p+n,p+2n,...,p+(k-1)n$\u3002\u603b\u65b9\u6848\u6570\u663e\u7136\u4e3a $2^p+2^{p+n}+...+2^{p+(k-1)n}$\uff0c\u5373 $2^p*mul$\u3002\n\n\u8fd9\u91cc $k$ \u5f88\u5927\uff0c$mul$ \u53ef\u4ee5\u5206\u6cbb\u8ba1\u7b97\u3002\u8bbe $f_p$ \u8868\u793a $\\sum\\limits_{i=0}^{p}2^{in}$\uff0c\u5219\uff1a\n\n$$\n\\begin{cases}\nf_p=f_{(p-1)/2} * 2^{(p+1)/2*n} + 1&&if&p\\equiv1(\\bmod 2)\\\\\nf_p=f_{p-1} + 2^{pn}&&if&p\\equiv0(\\bmod 2)\n\\end{cases}\n$$\n\n\u6700\u540e $mul$ \u5c31\u662f $f_{k-1}$\u3002\n\n```cpp\n//CF327C\n#include <cstring> \n#include <cstdio>\ntypedef long long ll;\n\nconst int N = 1e5 + 10;\nconst ll P = 1e9 + 7;\nll mul, ans;\nchar s[N];\nint k, n;\n\nll qp(ll a, ll b){\n\tll ans = 1;\n\twhile(b){\n\t\tif(b&1){\n\t\t\tans = ans * a % P;\n\t\t}\n\t\ta = a * a % P;\n\t\tb >>= 1;\n\t}\n\treturn ans;\n}\nll calc(ll k){\n\tif(k == 0){\n\t\treturn 1;\n\t}\n\tif(k&1){\n\t\treturn calc(k/2) * (qp(2, ((k+1)/2)*n) + 1) % P;\n\t} else {\n\t\treturn (calc(k-1) + qp(2, k*n)) % P;\n\t}\n}\n\nint main(){\n\tscanf(\"%s%d\", s, &k);\n\tn = strlen(s);\n\tmul = calc(k-1);\n\tfor(int i = 0; i < n; ++ i){\n\t\tif(s[i] == '0' || s[i] == '5'){\n\t\t\tans += qp(2, i);\n\t\t\tans %= P;\n\t\t}\n\t}\n\tprintf(\"%lld\\n\", ans * mul % P);\n\treturn 0;\n}\n111",
        "postTime": 1657422295,
        "uid": 390770,
        "name": "AiRC0S",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 [CF327C] Magic Five"
    },
    {
        "content": "\u8fd9\u9053\u9898\u5e26\u5751\uff0c\u5047\u5982\u6ca1\u6709\u53d1\u73b0\u80af\u5b9a\u4f1a\u7206\u3002\n\n\u9996\u5148\u5148\u641c\u7d22\u4e00\u904d0\u548c5\uff0c\u50a8\u5b58\u5728\u6570\u7ec4a\u91cc\u9762\u3002\n\n\u90a3\u4e48\u5e94\u5f53\u67092 ^ a1 +2 ^ a2 +...+ 2 ^ an\u3002\n\n\u7136\u800c\u8fd9\u9053\u9898\u6ca1\u90a3\u4e48\u7b80\u5355\uff0c\u6570\u4e32\u8fd8\u53ef\u4ee5\u91cd\u590dk\u6b21\u3002\n\n\u56e0\u6b64\uff0c\u9700\u8981\u5728\u6b64\u57fa\u7840\u4e0a\u5728\u4e58\u4e0a1 + 2 ^ l + 2 ^ 2l +...+ 2 ^ (k - 1)l\u3002\u5176\u4e2dl\u4e3a\u6570\u4e32\u957f\u5ea6\u3002\n\n\u5982\u679c\u5230\u8fd9\u91cc\u5c31\u63d0\u4ea4\uff0c\u90a3\u5c31\u53ea\u80fd\u548cAC\u8bf4\u62dc\u62dc\u4e86\u3002\n\n\u4e3a\u4e86\u7701\u53bb\u4e0d\u5fc5\u8981\u7684\u8ba1\u7b97\uff0c\u53ef\u4ee5\u901a\u8fc7\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u516c\u5f0f\u5c06\u540e\u4e00\u4e2a\u7b97\u5f0f\u5316\u7b80\u4e3a(2 ^ kl - 1) / (2 ^ l - 1)\n\n\u53ef\u5373\u4fbf\u5982\u6b64\u8fd8\u662f\u4f1a\u70b8\uff0c\u53ea\u80fd\u501f\u52a9\u8d39\u9a6c\u5c0f\u5b9a\u7406\uff1aa ^ (p-1) % p == 1\u3002\n\n\u6240\u4ee5\u7b97\u5f0f\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5316\u7b80\u4e3a(2 ^ kl - 1) * (a ^ (l - 1) ^ (p-2)) / (2 ^ l - 1)\n\n\u7136\u540e\u5feb\u901f\u5e42\u5c31OK\u4e86\u3002\n\nAC\u4ee3\u7801\u5982\u4e0b\uff1a\n\n```cpp\n#include <iostream>\n#include <cstdio>\n#include <algorithm>\n#include <cstring>\nusing namespace std;\n\nconst int MODE = 1000000007;\nconst int maxn = 100100;\ntypedef long long ll;\n\nll power(ll a, ll n) {\n\tll b = 1;\n\twhile(n) {\n\t\tif(n & 1) {\n\t\t\tb *= a;\n\t\t\tb %= MODE;\n\t\t}\n\t\tn >>= 1;\n\t\ta *= a;\n\t\ta %= MODE;\n\t}\n\treturn b;\n}\n\nll k, ans, cur;\nstring num;\n\nint main() {\n\tcin >> num >> k;\n\tfor(int i = 0; i < num.length(); i++) {\n\t\tif(num[i] == '0' || num[i] == '5') {\n\t\t\tans += power(2, i);\n\t\t\tans %= MODE;\n\t\t}\n\t}\n\tcur += power(power(2, num.length()) - 1, MODE - 2) * (power(2, num.length() * k) - 1);\n\tcur %= MODE;\n\tans *= cur;\n\tans %= MODE;\n\t\n\tcout << ans;\n}\n```",
        "postTime": 1525356341,
        "uid": 38859,
        "name": "Nero_Claudius",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF327C \u3010Magic Five\u3011"
    },
    {
        "content": "### \u5148\u8bf4\u51e0\u53e5\n\n\u7efc\u5408\u6027\u5f88\u5f3a\u7684\u6570\u5b66\u9898\uff0c\u8003\u5bdf\u7ec4\u5408\u8ba1\u6570\u548c\u7b49\u6bd4\u516c\u5f0f\u3002\n\n### \u89e3\u9898\u601d\u8def\n\n\u5148\u8003\u8651\u6ca1\u6709 $k$ \u7684\u60c5\u51b5\u3002\n\n\u5047\u8bbe\u6ca1\u6709 $k$\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u5b9a\u4efb\u4f55\u4e00\u4e2a $i$ \u4f7f\u5f97\u6570\u5b57\u4e32 $a$ \u7684\u7b2c $i$ \u4f4d $a_i$ \u4e3a $5$ \u6216 $0$\u3002\u663e\u7136\uff0c\u9700\u8981\u5220\u9664 $i$ \u540e\u9762\u6240\u6709\u7684\u6570\u4f4d\uff0c\u524d\u9762\u7684\u6bcf\u4e00\u4f4d\u90fd\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u5220\u9664\u3002\u5047\u8bbe\u4f7f\u5f97 $a_i=5$ \u7684 $i$ \u7684\u96c6\u5408 $S$\uff0c\u7b54\u6848\u53ef\u4ee5\u8868\u793a\u6210 $\\sum_{i\\in S}2^i$\u3002\n\n\u6ce8\uff1a\u672c\u6587\u4e2d\u6240\u6709 $i$ \u662f\u4ece $0$ \u5f00\u59cb\u7f16\u53f7\uff0c\u4ece\u524d\u5f80\u540e\u8ba1\u6570\u7684\u3002\n\n\u90a3\u4e48\uff0c\u5e26\u4e0a $k$ \u5e94\u8be5\u600e\u4e48\u529e\u5462\uff1f\u4e0d\u8981\u614c\uff0c\u5bf9\u4e8e $i\\in S$\uff0c\u91cd\u590d\u8fc7\u540e\uff0c$i+|a|$ \u7684\u4f4d\u7f6e\u4e00\u5b9a\u4e5f\u662f $5$ \u6216 $0$\u3002\u7b54\u6848\u5c31\u662f\uff1a\n\n$$\n\\sum_{i\\in S}\\sum_{j=0}^{k-1}(2^{i+j\\cdot |a|})\n$$\n\u6253\u5f00\u91cc\u9762\u7684\u5e42\uff1a\n$$\n\\sum_{i\\in S}\\sum_{j=0}^{k-1}(2^i\\cdot 2^{j\\cdot |a|})\n$$\n\n\u5bb9\u6613\u53d1\u73b0\uff0c\u540e\u9762\u7684 $\\sum$ \u5176\u5b9e\u5c31\u662f\u7b49\u6bd4\u6570\u5217\u6c42\u548c\uff01\u8ba9\u6211\u4eec\u4e00\u8d77\u56de\u987e\u4e00\u4e0b\u7b49\u6bd4\u6570\u5217\u6c42\u548c\u516c\u5f0f\uff1a\n\n$$\nx\\cdot \\frac{q^n-1}{q-1}\n$$\n\n\u5176\u4e2d\uff0c$x$ \u662f\u9996\u9879\uff0c\u8fd9\u91cc\u662f $2^i$\uff1b$q$ \u662f\u516c\u6bd4\uff0c\u8fd9\u91cc\u662f $2^{|a|}$\uff1b$n$ \u662f\u9879\u6570\uff0c\u8fd9\u91cc\u662f $k$\u3002\n\n\u6700\u540e\u522b\u5fd8\u4e86\u5feb\u901f\u5e42\u6c42\u9006\u5143\uff0c\u548c\u5f88\u591a\u53d6\u6a21\u3002\u6ce8\u610f\u7ec6\u8282\uff0c\u8be6\u89c1\u4ee3\u7801\u3002\n\n\n### \u5949\u4e0a\u4ee3\u7801\n\n```cpp\n#include <bits/stdc++.h>\n#define pb push_back\n#define rep(i, s, t) for(int i=(s); i<=(t); ++i)\n#define F first\n#define S second\n#define pii pair<int, int>\n#define int long long\n#define all(x) x.begin(), x.end()\n#define debug(x) cout<<#x<<\":\"<<x<<endl;\nconst int N=200010, mod=1e9+7;\nusing namespace std;\n\nint p2[N];\n\nint qp(int x, int y)\n{\n\tint ans=1;\n\twhile(y)\n\t{\n\t\tif(y&1) ans=ans*x%mod;\n\t\tx=x*x%mod;\n\t\ty>>=1;\n\t}\n\treturn ans;\n}\n\nsigned main()\n{\n\tios::sync_with_stdio(0);\n\tcin.tie(0); cout.tie(0);\n\tp2[0]=1;\n\trep(i, 1, N-1) p2[i]=p2[i-1]*2%mod;\n\tstring s; cin>>s; int n=s.size();\n\tint k; cin>>k;\n\tint sum=0;\n\tfor(int i=s.size()-1; i>=0; i--)\n\t{\n\t\tif(s[i]=='0' || s[i]=='5')\n\t\t{\n\t\t\tint tmp=p2[i]*(qp(p2[n], k)-1+mod)%mod*qp((p2[n]-1+mod)%mod, mod-2)%mod;\n\t\t\tsum=(sum+tmp)%mod;\n\t\t}\n\t}\n\tcout<<sum;\n\t\n\treturn 0;\n}\n```",
        "postTime": 1680525247,
        "uid": 535063,
        "name": "Jerrywzr",
        "ccfLevel": 0,
        "title": "CF327C Magic Five"
    },
    {
        "content": "### \u9898\u76ee\u5206\u6790\uff1a\n\n\u8003\u8651\u6bcf\u4e00\u4e2a\u5355\u5143\u4e32\uff0c\u53ef\u4ee5\u4e14\u4ec5\u53ef\u4ee5\u5c06\u67d0\u4e00\u4e2a\u4e3a $0$ \u6216 $5$ \u7684\u6570\u4f4d\u524d\u9762\u968f\u4fbf\u53bb\u6389\u51e0\u4e2a\u6570\u5e76\u628a\u540e\u9762\u7684\u6240\u6709\u6570\u5168\u90e8\u53bb\u6389\uff0c\u6839\u636e\u8fd9\u4e2a\uff0c\u7acb\u523b\u6709\uff1a\u65b9\u6848\u6570\u7b49\u4e8e $\\sum[a_i=0,5]2^i$\u3002\n\n\u7136\u540e\u8003\u8651\u5982\u4f55\u8ba1\u7b97 $k$ \u4e2a\u8fde\u7eed\u4e32\u7684\u95ee\u9898\uff0c\u82e5\u8bbe $p_i$ \u7b49\u4e8e\u7b2c $i$ \u4e2a\u5b50\u4e32\u80fd\u505a\u51fa\u7684\u65b9\u6848\u8d21\u732e\uff0c\u663e\u7136\u6709\uff1a$p_i=p_{i-1}\\times2^{len}$\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u5c31\u662f\u4e00\u4e2a\u9996\u9879\u7b49\u4e8e $\\sum[a_i=0,5]2^i$ \u516c\u6bd4\u7b49\u4e8e $2^{len}$ \u7b49\u6bd4\u6570\u5217\uff0c\u9700\u8981\u6c42\u8fd9\u4e2a\u7b49\u6bd4\u6570\u5217\u7684\u524d $k$ \u9879\u4e4b\u548c\u3002\n\n\u6839\u636e\u7b49\u6bd4\u6570\u5217\u7684\u6c42\u548c\u516c\u5f0f\uff0c\u5f97\u5230\uff1a$\\dfrac{p_1\\times(1-2^{len\\times k})}{1-2^{len}}$\u3002\n\n\u5bf9\u4e8e\u8fd9\u4e00\u4e2a\u5f0f\u5b50\uff0c\u7528\u8d39\u9a6c\u5c0f\u5b9a\u7406\u6c42\u51fa\u5206\u6bcd\u7684\u9006\u5143\uff0c\u518d\u5feb\u901f\u5e42\u51fa\u5206\u5b50\u76f8\u4e58\u5373\u53ef\u7684\u51fa\u7b54\u6848\u3002\n\n\u6700\u7ec8\u7684\u5f0f\u5b50\u662f $p_1\\times(2^{len\\times k}-1)\\times(2^{len}-1)^{m-2}\\bmod m$\u3002\n\n------------\n### \u4ee3\u7801\uff1a\n\n```cpp\n#include<cstdio>\n#include<string>\n#include<iostream>\nusing namespace std;\n#define int long long\nconst int MOD=1000000007;\nint pow(int a,int b){\n\tint ans=1;\n\twhile(b){\n\t\tif(b&1)ans=(ans*a)%MOD;\n\t\ta=(a*a)%MOD;\n\t\tb=b>>1;\n\t}\n\treturn ans;\n}\nstring s;\nint k,p1,ans;\nsigned main(){\n\tcin>>s;\n\tfor(int i=0;i<s.length();i++)\n\tif(s[i]=='0'||s[i]=='5')p1=(p1+pow(2,i))%MOD;\n\tscanf(\"%I64d\",&k);\n\tans=(p1%MOD*(pow(2,s.length()*k)-1+MOD)%MOD)%MOD;\n\tans=ans*(pow(pow(2,s.length())-1,MOD-2)%MOD)%MOD;\n\tprintf(\"%I64d\",ans);\n\treturn 0-0;\n}\n```\n",
        "postTime": 1629294927,
        "uid": 223559,
        "name": "qxp101",
        "ccfLevel": 6,
        "title": "\u9898\u89e3 CF327C Magic Five"
    }
]
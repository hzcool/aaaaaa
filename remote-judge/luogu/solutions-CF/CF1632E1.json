[
    {
        "content": "# CF1632E1&E2 \u9898\u89e3\n\n**\u9898\u610f**\uff1a\n\n\u7ed9\u4e00\u68f5\u521d\u59cb\u8fb9\u6743\u4e3a $1$ \u7684\u6811\uff0c\u5bf9\u4e8e\u6240\u6709 $x\\in[1,n]$\uff0c\u6c42\uff1a\n\n\u82e5\u80fd\u6dfb\u4e00\u6761\u6743\u4e3a $x$ \u7684\u65e0\u5411\u8fb9 $(a,b)$\uff0c\u5219 $\\max\\limits_{i=1}^n(d_i)$ \u7684\u6700\u5c0f\u503c\u662f\u591a\u5c11\uff0c\n\n\u5176\u4e2d $d_i$ \u7b49\u4e8e \u70b9 $1$ \u5230\u70b9 $i$ \u7684\u6700\u77ed\u8def\u5f84\u7684\u957f\u5ea6\u3002\n\n**\u505a\u6cd5**\uff1a\n\n\u5148\u8003\u8651\u5bf9\u4e8e\u56fa\u5b9a $x$ \u540e\u5982\u4f55\u8ba1\u7b97\u7b54\u6848\u3002\n\n\u9996\u5148\uff0c\u95ee\u9898\u53ef\u4ee5\u8f6c\u5316\u4e3a\uff0c\u6211\u4eec\u6dfb\u52a0\u7684\u8fb9\u81f3\u5c11\u6709\u4e00\u4e2a\u7aef\u70b9\u662f $1$\u3002\n\n\u56e0\u4e3a\uff0c\u5bf9\u4e8e\u4e00\u5f20\u52a0\u4e86\u8fb9 $u\\leftrightarrow v(u,v>1)$ \u7684\u65b0\u56fe $A$\uff0c\u6b64\u5904\u6211\u4eec\u5047\u8bbe $d_u\\leq d_v$\uff0c\n\n\u5219\u52a0\u4e86\u8fb9 $1\\leftrightarrow v$ \u7684\u65b0\u56fe $B$ \u4e00\u5b9a\u66f4\u4f18\u3002\u6211\u4eec\u901a\u8fc7\u679a\u4e3e $A$ \u4e2d\u7684\u51b3\u7b56\u6765\u8bc1\u660e\uff1a\n\n\u4efb\u610f\u4e00\u6761 $A$ \u4e2d\u7684\u8def\u5f84 $p=1\\rightarrow\\cdots\\rightarrow t$\uff0c\n\n\u82e5 $p$ \u4e2d\u4e0d\u5305\u542b\u65b0\u8fb9 $u\\leftrightarrow v$\uff0c\u5219 $B$ \u65b9\u5f0f\u4e2d\u4e5f\u5b58\u5728\u8def\u5f84 $q=p$\uff1b\n\n\u800c\u82e5 $p$ \u4e2d\u5305\u542b\u65b0\u8fb9 $u\\leftrightarrow v$\uff0c\u5373 $p=1\\rightarrow\\cdots\\rightarrow u\\rightarrow v \\rightarrow s\\rightarrow\\cdots\\rightarrow t$\uff0c\n\n\u6211\u4eec\u80fd\u5728 $B$ \u65b9\u5f0f\u4e2d\u627e\u5230\u8def\u5f84 $q=1\\rightarrow v \\rightarrow s\\rightarrow\\cdots \\rightarrow t$\uff0c\n\n\u5176\u4e2d $q$ \u4e2d\u7ecf\u8fc7\u4e86\u65b0\u8fb9 $1\\rightarrow v$\uff0c\u4e14 $q$ \u7684\u957f\u5ea6\u5fc5\u7136\u4e0d\u5927\u4e8e $p$ \u7684\u957f\u5ea6\u3002\n\n\u90a3\u4e48\u6211\u4eec\u8003\u8651\u65b0\u95ee\u9898\u7684\u505a\u6cd5\uff0c\u8fd9\u65f6\u6211\u4eec\u8003\u8651\u4e8c\u5206\u7b54\u6848\uff0c\u90a3\u4e48\u95ee\u9898\u5c31\u53c8\u8f6c\u5316\u4e3a\uff1a\n\n\u5bf9\u4e8e\u503c $ans$\uff0c\u662f\u5426\u5b58\u5728\u4e00\u70b9 $v$\uff0c\u4f7f\u5f97\u52a0\u5165\u8fb9 $1\\leftrightarrow v$ \u540e\u7684\u65b0\u56fe $G$ \u7684 $\\max\\limits_{i=1}^n(d_i)$ \u7684\u6700\u5c0f\u503c\u4e0d\u5927\u4e8e $ans$\u3002\n\n\u90a3\u4e48\uff0c\u539f\u6811\u91cc $d_u>ans$ \u7684\u70b9 $u$ \u90fd\u5fc5\u987b\u88ab\u65b0\u8fb9 $1\\leftrightarrow v$ \u5f71\u54cd\u800c\u4f7f\u5f97 $d'_u\\le ans$\uff0c\n\n\u5176\u4e2d $d'_u$ \u662f\u52a0\u8fb9\u540e\u70b9 $1$ \u5230\u70b9 $u$ \u7684\u8ddd\u79bb\u3002\n\n\u518d\u8003\u8651\u65b0\u5bb6\u7684\u8fb9\u662f\u5982\u4f55\u5f71\u54cd $d$ \u6570\u7ec4\u7684\u53d8\u5316\u7684\uff0c\u5373\u52a0\u5165\u6743\u4e3a $x$ \u7684\u65b0\u8fb9 $1\\leftrightarrow v$ \u540e\uff0c\u6211\u4eec\u6709\uff1a\n\n$\\forall u \\in[1,n],d'_u=\\min(d_u,x+\\text{dist}(v,u))$\uff0c\u5176\u4e2d $dist(v,u)$ \u4e3a\u539f\u6811\u4e2d $v$ \u5230 $u$ \u7684\u8ddd\u79bb\u3002\n\n\u90a3\u4e48\uff0c\u5bf9\u4e8e\u6240\u6709\u6ee1\u8db3 $d_u>ans$ \u7684\u70b9 $u$\uff0c\u53f3\u5f0f $dist(v,u)\\le ans-x$ \u90fd\u5fc5\u987b\u6210\u7acb\u3002\n\n\u6211\u4eec\u53d1\u73b0\uff0c\u8fd9\u4e2a $ans-x$ \u7684\u503c\uff0c\u4e0e $u$ \u5177\u4f53\u662f\u54ea\u4e2a\u70b9\u5e76\u6ca1\u6709\u5173\u7cfb\uff0c\n\n\u6545\u6211\u4eec\u53ea\u9700\u8ba9 $\\max\\limits_{u\\in[1,n]}(dist(u,v))$ \u5c3d\u91cf\u5c0f\u5373\u53ef\uff0c\u800c\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u6a21\u578b\uff0c\n\n\u6c42\u89e3\u8fd9\u4e2a\u6a21\u578b\uff0c\u6211\u4eec\u53ea\u9700\u627e\u5230\u4e00\u6761\u6700\u957f\u7684\u8def\u5f84 $a\\rightarrow\\cdots\\rightarrow b$\uff0c\u6ee1\u8db3 $d_a,d_b>ans$\uff0c\n\n\u8bbe\u8fd9\u6761\u8def\u5f84\u7684\u957f\u5ea6\u662f $len$\uff0c\u5219\u7b54\u6848 $ans$ \u53ef\u884c\u5f53\u4e14\u4ec5\u5f53\u53f3\u5f0f $x+\\lfloor\\frac{len+1}{2}\\rfloor\\le ans$ \u6210\u7acb\u3002\n\n\u539f\u56e0\u662f\uff0c\u6211\u4eec\u53ea\u9700\u5c06\u70b9 $v$ \u653e\u5728\u8fd9\u6761\u8def\u5f84\u7684\u4e2d\u70b9\u5904\uff0c\n\n\u5219\u5bf9 $\\forall u\\in[1,n]$\uff0c\u53ea\u8981\u6ee1\u8db3 $d_u>ans$\uff0c\u5c31\u6709 $dist(v,u)\\le x+\\lfloor\\frac{len+1}{2}\\rfloor$\uff0c\n\n\u5426\u5219\u4e00\u5b9a\u80fd\u627e\u5230\u4e00\u6761\u65b0\u7684\u957f\u4e3a $len'$ \u7684\u8def\u5f84 $a'\\rightarrow\\cdots\\rightarrow b'$\uff0c\u6ee1\u8db3 $d_{a'},d_{b'}>ans$\uff0c\n\n\u5176\u4e2d $u$ \u7b49\u4e8e $a'$ \u548c $b'$ \u4e2d\u7684\u4e00\u4e2a\u3002\n\n\u90a3\u6700\u540e\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u56fa\u5b9a\u7684 $ans$\uff0c\u5982\u4f55\u6c42\u4e0a\u9762\u7684 $len$ \u503c\u3002 \n\n\u8fd9\u4e2a\u5012\u4e0d\u96be\uff0c\u53ef\u4ee5\u4e00\u6b21\u9884\u5904\u7406\u51fa\u6240\u6709 $ans$ \u5bf9\u5e94\u7684 $len$\uff0c\u65b9\u6cd5\u53ef\u4ee5\u91c7\u7528\u6811\u5f62DP\u6216\u627e\u76f4\u5f84\u540e\u76f4\u63a5\u8ba1\u7b97\u3002\n\n\u65f6\u95f4\u590d\u6742\u5ea6\u662f $O(n\\log n)$\uff0c\u74f6\u9888\u5728\u4e8c\u5206\u4e0a\u3002\n\n\u5f53\u7136\uff0c\u56e0\u4e3a\u7b54\u6848\u7684\u503c\u57df\u4e5f\u662f $O(n)$ \u7684\uff0c\u800c\u7b54\u6848\u4f1a\u968f\u7740\u65b0\u8fb9\u8fb9\u6743 $x$ \u7684\u4e0a\u5347\u800c\u4e0a\u5347\uff0c\n\n\u6545\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4e2a\u5f53\u524d\u7b54\u6848 $t$\uff0c\u6bcf\u6b21 $x$ \u589e\u52a0\u65f6\u540c\u65f6\u7ef4\u62a4 $t$ \u7684\u503c\uff0c\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u662f\u7ebf\u6027\u7684\u3002\n\n**code for** $O(n\\log n)$\uff1a\n\n```\n#define vi vector\n#define ckmax(a, b) ((a) = max((a), (b)))\n#define rep(i, a, b) for (int i = (a); i <= (b); i++)\n#define per(i, a, b) for (int i = (a); i >= (b); i--)\n\nint read () { /*\u5feb\u8bfb*/ }\n\nconst int N (3e5 + 10);\nint n, rt;\nint f[N];\nint d[2][N];\nvi < int > G[N];\nvoid dfs (int u, int fa, int o) {\n\tif (fa) d[o][u] = d[o][fa] + 1;\n\tfor (int v : G[u]) if (v ^ fa) dfs (v, u, o);\n}\nbool chk (int ans, int x) {\n\treturn ans >= min (d[0][rt], x + (f[ans + 1] + 1) / 2);\n}\nvoid work() {\n\tn = read(); int u, v; f[0] = 0;\n\trep (i, 1, n) G[i].clear(), f[i] = d[0][i] = d[1][i] = 0;\n\trep (i, 2, n) G[u = read()].pb (v = read()), G[v].pb (u);\n\tdfs (1, 0, 0), rt = max_element (d[0] + 1, d[0] + n + 1) - d[0], dfs (rt, 0, 1);\n\trep (i, 1, n) ckmax (f[d[0][i]], d[1][i]);\n\tper (i, n - 1, 0) ckmax (f[i], f[i + 1]);\n\trep (x, 1, n) {\n\t\tint L = 0, R = n, ans = n;\n\t\twhile (L <= R) {\n\t\t\tint Mid = (L + R) >> 1;\n\t\t\tif (chk (Mid, x)) ans = Mid, R = Mid - 1;\n\t\t\telse L = Mid + 1;\n\t\t}\n\t\tprintf (\"%d \", ans);\n\t}\n\tputs(\"\");\n}\nint main() {\n\tint t = read();\n\twhile (t--) work();\n\treturn 0;\n}\n```\n\n",
        "postTime": 1643879193,
        "uid": 100091,
        "name": "GaryH",
        "ccfLevel": 6,
        "title": "CF1632E1 \u9898\u89e3"
    },
    {
        "content": "[Problem - E1 - Codeforces](https://codeforces.ml/contest/1632/problem/E1)\n\n\u53d1\u73b0\u5bf9\u4e8e\u67d0\u4e2a $x$\uff0c\u6240\u6709\u6df1\u5ea6 $<x$ \u7684\u70b9\u4e0d\u9700\u8981\u8003\u8651\uff0c\u6240\u4ee5\u76f4\u63a5\u628a\u6709\u8d21\u732e\u7684\u70b9\u62c9\u51fa\u6765\u8dd1\u865a\u6811\u5c31\u597d\u3002\n\n\u731c\u7ed3\u8bba\uff0c\u53d1\u73b0\u80af\u5b9a\u8fde 1\uff0c\u53e6\u4e00\u7aef\u5728**\u6709\u6548\u70b9\u76f4\u5f84**\u4e0a\u7684\u4e8c\u5206\u4e2d\u70b9\u5de6\u53f3\u3002\u8fd9\u4e2a\u7ed3\u8bba\u53ef\u4ee5\u5229\u7528\u53cd\u8bc1\u6cd5\u8f7b\u677e\u8bc1\u660e\u3002\n\n\u4ee4 $f_x$ \u8868\u793a\u6df1\u5ea6 $>x$ \u7684\u6240\u6709\u8282\u70b9\uff0c\u5219\u5bf9\u4e8e\u67d0\u4e2a $x$\uff0c\u5e94\u8be5\u6709 $ans\\geq \\lceil \\frac{f_{ans}}{2}+x\\rceil$.\n\n\u8be5\u4e0d\u7b49\u5f0f\u7684\u610f\u4e49\uff1a\u5927\u6982\u5c31\u662f\u628a\u6df1\u5ea6 $>ans$ \u7684\u6240\u6709\u8282\u70b9\u5efa\u865a\u6811\uff0c\u76f4\u5f84\u4e2d\u70b9\u548c 1 \u62c9\u94fe\u7684\u7ed3\u679c\uff0c\u663e\u7136\u6bcf\u6b21\u8be2\u95ee\u5bf9\u6df1\u5ea6 $\\leq ans$ \u7684\u8282\u70b9\u6ca1\u6709\u4f18\u5316\u6548\u679c\uff0c\u6240\u4ee5\u6b63\u786e\u6027\u663e\u7136\u3002\n\n\u56e0\u4e3a\u8fb9\u6743\u662f $1$\uff0c\u6240\u4ee5 `vector` \u5b58\u56fe\uff0c\u76f4\u63a5 dfs \u6c42 $f$ \u5373\u53ef\u3002\n\n\u53d1\u73b0 $f_x$ \u662f\u5355\u8c03\u9012\u51cf\u7684\uff0c\u53d1\u73b0\u6b64\u65f6 $ans$ \u662f\u5355\u589e\u7684\uff08\u663e\u7136\u7684\uff09\uff0c\u76f4\u63a5\u53cc\u6307\u9488\u679a\u4e3e\u5373\u53ef\u3002\n\n\u4e0a\u9762\u662f Hard \u7684\u505a\u6cd5\uff0c Easy \u7684\u8bdd\u53ef\u80fd\u771f\u5c31\u6bcf\u6b21\u66b4\u529b\u5efa\u865a\u6811\u8dd1\u76f4\u5f84\uff0c\u7136\u540e\u6700\u77ed\u8def\u505a\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u6982\u662f $\\mathcal{O}\\left(n^2\\log n\\right)$ \u7684\uff0c\u6bd5\u7adf\u662f\u7a00\u758f\u56fe\uff0c\u6240\u4ee5\u6e05\u7a7a\u8fd8\u7b97\u65b9\u4fbf\uff0c\u4e0d\u8fc7\u5199\u8d77\u6765\u8fd8\u6ca1 Hard \u7b80\u5355\u3002\n\n[Submission #145618714 - Codeforces](https://codeforces.ml/contest/1632/submission/145618714)\n\n",
        "postTime": 1644307654,
        "uid": 183026,
        "name": "Cocoly1990",
        "ccfLevel": 0,
        "title": "CF1632E1 Distance Tree (easy version)"
    },
    {
        "content": "> [**CF1632E1 Distance Tree (easy version & hard version)**](https://www.luogu.com.cn/problem/CF1632E1)\n\n> \u89e3\u9898\u62a5\u544a\u3002\n\n> [**\u4e0d\u4e00\u5b9a\u66f4\u597d\u7684\u9605\u8bfb\u4f53\u9a8c**](https://www.cnblogs.com/UperFicial/p/16741006.html)\u3002\n\n~~E2 \u6ca1\u6709\u5730\u65b9\u4ea4\u4e86\u6240\u4ee5\u5c31\u4ea4\u5230 E1 \u4e86\u3002~~\n\n\u9707\u64bc\u633a\u5927\u7684\u4e00\u9053\u9898\uff0c\u94a6\u5b9a $1$ \u4e3a\u6839\u3002\n\n\u5148\u628a $x$ \u56fa\u5b9a\u4e0b\u6765\uff0c\u8fde\u8fb9\u7684\u4e00\u4e2a\u7aef\u70b9\u5fc5\u5b9a\u4e3a $1$ \u53f7\u70b9\uff0c\u8fd9\u6837\u80fd\u5f71\u54cd\u7684\u8def\u5f84\u957f\u5ea6\u6700\u5927\u3002\n\n\u90a3\u4e48\u73b0\u5728\u95ee\u9898\u53d8\u6210\uff0c\u8fde\u4e00\u6761 $1\\to u$ \u7684\u8fb9\uff0c\u4f7f\u5f97 $\\max(d_v)$ \u5c3d\u91cf\u5c0f\u3002\n\n\u540e\u9762\u90a3\u4e2a\u5b8c\u5168\u53ef\u4ee5\u4e8c\u5206\u4e00\u624b\uff0c\u8bbe $\\max(d_u)\\le L$\uff0c\u90a3\u4e48\u95ee\u9898\u53d8\u6210\uff0c\u662f\u5426\u5b58\u5728\u4e00\u4e2a $u$\uff0c\u4f7f\u5f97\u6dfb\u52a0\u4e00\u6761 $1\\to u$ \u7684\u8fb9\u540e\uff0c$\\max(d_v)\\le L$\u3002\n\n\u5728\u6dfb\u52a0\u8fb9\u4e4b\u524d\uff0c$d_v\\le L$ \u7684\u8fb9\u4e0d\u7528\u8003\u8651\uff0c\u53ea\u9700\u8981\u8003\u8651 $\\max(d_v)>L$ \u7684\u8fb9\u3002\n\n\u6dfb\u52a0 $1\\to u$ \u8fd9\u6761\u8fb9\u540e\uff0c\u5f71\u54cd\u7684\u662f $u$ \u5b50\u6811\u5185\u7684\u70b9\uff0c\u6240\u4ee5\u8003\u8651\u4e00\u4e2a $u$ \u5b50\u6811\u5185\u7684\u70b9 $v$\uff0c$d_v$ \u53d8\u5316\u4e3a $x+\\operatorname{dis}(u,v)$\u3002\n\n\u628a\u8fd9\u4e2a\u5e26\u5165\u4e8c\u5206\u7b54\u6848\u7684\u5f0f\u5b50\uff0c\u53ef\u4ee5\u5f97\u5230 $x+\\operatorname{dis}(u,v)\\le L$\uff0c\u5373 $\\operatorname{dis}(u,v)\\le L-x$\uff0c\u4e0d\u7b49\u5f0f\u53f3\u8fb9\u53ef\u770b\u505a\u5e38\u6570\u9879\uff0c\u8fd9\u4e2a\u4e0d\u7b49\u5f0f\u6210\u7acb\u7684\u6761\u4ef6\u53ef\u770b\u505a\u6700\u8fdc\u4e24\u4e2a\u70b9\u7684\u6210\u7acb\uff0c\u90a3\u4e48\u6240\u6709\u70b9\u90fd\u6210\u7acb\u3002\n\n\u6240\u4ee5\u95ee\u9898\u53c8\u8f6c\u5316\u4e3a\uff0c\u6dfb\u52a0\u4e00\u6761 $1\\to u$ \u7684\u8fb9\u540e\uff0c$\\max_{1\\le v\\le n}\\{\\operatorname{dis}(u,v)\\}$ \u6700\u5c0f\u662f\u591a\u5c11\u3002\n\n\u63a8\u5230\u8fd9\u4e2a\u95ee\u9898\u65f6\u6211\u5c31\u4e0d\u4f1a\u505a\u4e86\uff0c\u83dc\u903c\u3002\u5f53\u7136\u4f60\u628a\u76f8\u5e94\u7684\u70b9\u62c9\u51fa\u6765\u5efa\u865a\u6811 E1 \u5c31\u505a\u5b8c\u4e86\u3002\n\n\u4e0b\u9762\u7ee7\u7eed\u8003\u8651 $\\Theta(1)$ check \u8fd9\u4e2a\u95ee\u9898\uff0c\u4e5f\u5c31\u662f E2 \u505a\u6cd5\u3002\n\n\u8fd9\u4e2a\u5176\u5b9e\u4e5f\u5f88\u597d\u505a\uff0c\u8003\u8651\u4e24\u4e2a\u70b9 $a,b$ \u6ee1\u8db3 $d_a>L\\land d_b>L$\uff0c\u4e14 $a,b$ \u8ddd\u79bb $D$ \u5c3d\u53ef\u80fd\u7684\u5927\u3002\n\n\u90a3\u4e48\u6211\u4eec\u76f4\u63a5\u5c06 $u$ \u653e\u5230 $a,b$ \u7684\u4e2d\u70b9\u4e0a\uff0c\u7136\u540e\u68c0\u67e5\u8def\u5f84\u957f\u5ea6 $x+\\lceil\\dfrac{D}{2}\\rceil$ \u662f\u5426 $\\le L$\uff0c\u5373 $\\lceil\\dfrac{D}{2}\\rceil\\le L-x$\u3002\n\n\u8fd9\u4e2a\u7684\u6b63\u786e\u6027\u5f88\u597d\u8bc1\u660e\u3002\n\n\u91c7\u7528\u53cd\u8bc1\u6cd5\uff0c\u5047\u8bbe\u5b58\u5728\u4e00\u4e2a\u70b9 $v$ \u4f7f\u5f97 $\\operatorname{dis}(1,v)>L$\uff0c\u4e5f\u5c31\u662f $\\operatorname{dis}(u,v)>L-x\\ge \\lceil\\dfrac{D}{2}\\rceil$\u3002\n\n\u8003\u8651\u8fd9\u4e2a\u5f0f\u5b50\u7684\u5b9e\u9645\u610f\u4e49\uff0c\u5373\uff0c\u5f53\u4ee5 $u$ \u4e3a\u6839\u65f6\uff0c$\\operatorname{dis}(a,v)=\\operatorname{dis}(u,a)+\\operatorname{dis}(u,v)>\\lceil\\dfrac{D}{2}\\rceil+\\lceil\\dfrac{D}{2}\\rceil+1\\ge D$\uff0c\u77db\u76fe\u3002\n\n\u4ee3\u7801\u5b9e\u73b0\u65b9\u9762\uff0c\u6211\u4eec\u5bf9\u4e8e\u4e8c\u5206\u7684 $L$\uff0c\u9884\u5904\u7406\u51fa $f_i$ \u8868\u793a $d_j>i$ \u7684\u70b9\u96c6\u8ddd\u79bb\u6700\u5927\u7684\u4e24\u70b9\u8ddd\u79bb\uff0c\u8fd9\u4e2a\u5012\u63a8\u505a\u53ef\u4ee5\u505a\u5230 $\\Theta(n)$\u3002\n\n\u6700\u7ec8\u590d\u6742\u5ea6 $\\Theta(n\\log n)$\u3002",
        "postTime": 1664424246,
        "uid": 360511,
        "name": "UperFicial",
        "ccfLevel": 0,
        "title": "\u9898\u89e3\u3010CF1632E1 Distance Tree (easy version)\u3011"
    }
]
[
    {
        "content": "\u63d0\u4f9b\u4e00\u4e2a\u4e0d\u8003\u8651\u7279\u6b8a\u6027\u8d28\uff0c\u4f46\u4ee3\u7801\u597d\u5199\u6613\u7406\u89e3\u7684fhq\u6587\u827a\u5e73\u8861\u6811\u505a\u6cd5\uff08\u597d\u5199\u662f\u57fa\u4e8e\u4f60\u6709\u677f\u5b50\uff09\n\n---\n\n### \u9898\u89e3\uff1a\n\n\u4f17\u6240\u5468\u77e5\u6587\u827a\u5e73\u8861\u6811\u53ef\u4ee5\u89e3\u51b3\u4e00\u4e9b\u533a\u95f4\u98a0\u6765\u5012\u53bb\u7684\u95ee\u9898\n\n\u5bf9\u4e8e\u64cd\u4f5c1\uff1a\u628a\u539f\u5e8f\u5217\u62c6\u5f00\u6210$a-b-c-d$\u56db\u6bb5\uff0c\u5176\u4e2d$a=[1,l-1],b=[l,r-1],c=[r,r],d=[r+1,n]$\uff0c\u7136\u540e\u91cd\u65b0\u5408\u5e76\u6210$a-c-b-d$\u5c31\u884c\u4e86\n\n\u5bf9\u4e8e\u64cd\u4f5c2\uff1a\u8fd9\u662f\u6587\u827a\u5e73\u8861\u6811\u7684\u7ecf\u5178\u64cd\u4f5c\uff0c\u76f4\u63a5\u62c6\u5f00\u540e\u5728\u4e2d\u95f4\u6253\u4e2a\u7ffb\u8f6c\u6807\u8bb0\u5373\u53ef\n\n\u6700\u540e\u518d\u904d\u5386\u4e00\u904d\u5e73\u8861\u6811\u5c31\u53ef\u4ee5\u5f97\u5230\u6bcf\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u6570\u4e86\n\n---\n\n### \u4ee3\u7801\uff1a\n\n```cpp\n#pragma GCC optimize(3,\"Ofast,no-stack-protector,unroll-loops,fast-math\")\n#pragma GCC target(\"sse,sse2,sse3,ssse3,sse4.1,sse4.2,avx,avx2,popcnt,tune=native\")\n#include <bits/stdc++.h>\nusing namespace std;\n#ifdef ONLINE_JUDGE\n#define getchar gc\ninline char gc(){\n\tstatic char buf[1<<16],*p1=buf,*p2=buf;\n\tif(p1==p2){\n\t\tp2=(p1=buf)+fread(buf,1,1<<16,stdin);\n\t\tif(p2==p1) return EOF;\n\t}\n\treturn *p1++;\n}\n#endif\ntemplate<class t> inline t read(t &x){\n    char c=getchar();bool f=0;x=0;\n    while(!isdigit(c)) f|=c=='-',c=getchar();\n    while(isdigit(c)) x=(x<<1)+(x<<3)+(c^48),c=getchar();\n    if(f) x=-x;return x;\n}\ntemplate<class t> inline void write(t x){\n    if(x<0) putchar('-'),write(-x);\n    else{if(x>9) write(x/10);putchar('0'+x%10);}\n}\n\n#define new NEW\n\nconst int N=2e5+5;\nint n,rt,m,q,cnt,ansn,ans[N];\nbool tag[N];\n\nstruct node{\n\tint lc,rc,rnd,val,sz;\n}a[N];\n\nvoid up(int x){\n\ta[x].sz=a[a[x].lc].sz+a[a[x].rc].sz+1;\n\treturn ;\n}\n\nint new(int x){\n\ta[++cnt]=(node){0,0,rand(),x,1};\n\treturn cnt;\n}\n\nvoid pushdown(int x){\n\tif(!tag[x]) return ;\n\tswap(a[x].lc,a[x].rc);\n\tif(a[x].lc) tag[a[x].lc]^=1;\n\tif(a[x].rc) tag[a[x].rc]^=1;\n\ttag[x]=0;\n}\n\nint merge(int x,int y){\n\tif(!x||!y) return x|y;\n\tif(a[x].rnd<a[y].rnd){\n\t\tpushdown(x);\n\t\ta[x].rc=merge(a[x].rc,y);\n\t\tup(x);\n\t\treturn x;\n\t}\n\telse{\n\t\tpushdown(y);\n\t\ta[y].lc=merge(x,a[y].lc);\n\t\tup(y);\n\t\treturn y;\n\t}\n}\n\nvoid split(int now,int k,int &x,int &y){\n\tif(!now){\n\t\tx=y=0;\n\t\treturn ;\n\t}\n\tpushdown(now);\n\tif(a[a[now].lc].sz+1<=k){\n\t\tx=now;\n\t\tsplit(a[now].rc,k-(a[a[now].lc].sz+1),a[now].rc,y);\n\t}\n\telse{\n\t\ty=now;\n\t\tsplit(a[now].lc,k,x,a[now].lc);\n\t}\n\tup(now);\n}\n//\u4e0a\u9762\u662f\u6a21\u677f\nvoid doit(){\n\tint op,l,r;\n\tread(op);read(l);read(r);\n\tif(op==1){\n\t\tint a,b,c,d;\n\t\tsplit(rt,l-1,a,b); //\u62c6\u6210\u56db\u6bb5\n\t\tsplit(b,r-l,b,c);\n\t\tsplit(c,1,c,d);\n\t\trt=merge(a,merge(c,merge(b,d)));\n\t}\n\telse{\n\t\tint x,y,z;\n\t\tsplit(rt,l-1,x,y);\n\t\tsplit(y,r-l+1,y,z);\n\t\ttag[y]^=1; //\u4e2d\u95f4\u6253\u4e0a\u7ffb\u8f6c\u6807\u8bb0\n\t\trt=merge(x,merge(y,z));\n\t}\n}\n\nvoid print(int x){ //\u6700\u540e\u904d\u5386\u4e00\u904d\u5e73\u8861\u6811\uff0c\u5f97\u5230\u7b54\u6848\n\tif(!x) return ;\n\tpushdown(x);\n\tprint(a[x].lc);\n\tans[++ansn]=a[x].val;\n\tprint(a[x].rc);\n}\n\nsigned main(){\n\tsrand(time(NULL));\n\tread(n);read(m);read(q);\n\tfor(int i=1,x;i<=n;i++) rt=merge(rt,new(read(x)));\n\twhile(m--) doit();\n\tprint(rt);\n\twhile(q--){\n\t\tint x;\n\t\tread(x);\n\t\twrite(ans[x]);putchar(' '); //O1\u67e5\u8be2\n\t}\n}\n```",
        "postTime": 1590105512,
        "uid": 65735,
        "name": "yuzhechuan",
        "ccfLevel": 8,
        "title": "\u9898\u89e3 CF863D \u3010Yet Another Array Queries Problem\u3011"
    },
    {
        "content": "## \u9898\u610f\n\n\u7ed9\u4f60\u4e00\u4e2a\u6570\u5217 $a$ \u548c $q$ \u6b21\u64cd\u4f5c\uff0c$m$ \u6b21\u8be2\u95ee\uff1a\u6c42\u51fa\u64cd\u4f5c\u5b8c\u7684\u6570\u5217\u7684\u7b2c $m_i$ \u4e2a\u6570\u5b57\u662f\u591a\u5c11\u3002\n\n\u64cd\u4f5c\u5206\u4e24\u79cd\uff1a\u7ed9\u5b9a $t,l,r$\u3002\u82e5 $t=1$\uff0c\u5c06\u6bcf\u4e2a $x \\in [l,r-1]$ \u5411\u53f3\u79fb\u4e00\u4f4d\uff0c\u5c06 $a[r]$ \u79fb\u52a8\u5230 $a[l]$ \u7684\u4f4d\u7f6e\u3002\u82e5 $t=2$\uff0c\u7ffb\u8f6c\u533a\u95f4 $[l,r]$\u3002\n\n## \u601d\u8def\n\n\u6211\u5728\u6b64\u4ecb\u7ecd\u4e00\u4e2a\u6bd4\u8f83\u6734\u7d20\u7684\u505a\u6cd5\u2014\u2014\u5012\u63a8\u3002\u5bf9\u4e8e\u6bcf\u6b21\u8be2\u95ee\u53ef\u4ee5 $O(q)$ \u89e3\u51b3\uff0c\u56e0\u6b64\u4e0d\u4f1a\u8d85\u65f6\u3002\n\n\u6211\u4eec\u5012\u7740\u6a21\u62df\uff0c\u8bbe\u6700\u7ec8\u4e0b\u6807\u4e3a $x$\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\u6c42\u521d\u59cb\u4e0b\u6807\uff1a\u4ece\u6700\u540e\u4e00\u6b21\u64cd\u4f5c\u5f00\u59cb\uff0c\u4f9d\u6b21\u5411\u524d\u63a8\u51fa\u6bcf\u6b21\u64cd\u4f5c\u524d\u7684\u4e0b\u6807\u3002\n\n\u5bf9\u4e8e\u6bcf\u6b21\u64cd\u4f5c\uff0c\u5982\u679c $t=1$\uff0c\u5206\u7c7b\u8ba8\u8bba\u5982\u4e0b\uff1a\u82e5 $x<l$ \u6216 $x>r$\uff0c\u90a3\u4e48 $x$ \u4e0d\u53d8\u3002\u82e5 $x \\in [l+1,r]$\uff0c\u90a3\u4e48 $x=x-1$\uff0c\u82e5 $x=l$\uff0c\u90a3\u4e48 $x=r$\u3002\n\n\u5982\u679c $t=2$\uff0c\u5206\u7c7b\u8ba8\u8bba\u5982\u4e0b\uff1a\u82e5 $x<l$ \u6216 $x>r$\uff0c\u90a3\u4e48 $x$ \u4e0d\u53d8\u3002\u82e5 $x \\in [l,r]$\uff0c\u90a3\u4e48 $x=l+r-x$\u3002\u56e0\u4e3a\u8fd9\u91cc\u53cd\u8f6c\u524d\u540e\u5bf9\u5e94\u4e0b\u6807\u4e4b\u548c\u4e3a $l+r$\u3002\n\n\u6ce8\u610f\u5f97\u51fa\u521d\u59cb\u4e0b\u6807\u540e\u8981\u8f93\u51fa\u7684\u662f $a_x$ \u8fd9\u4e00\u6570\u503c\uff0c\u800c\u5e76\u975e $x$ \u8fd9\u4e00\u4e0b\u6807\uff01\n\n## \u4ee3\u7801\n\n\u6839\u636e\u601d\u8def\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5199\u51fa\u4ee5\u4e0b\u7cbe\u7b80\u7684\u4ee3\u7801\u3002\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\nint n,q,m,a[200005],c[200005][5];\nint main(){\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cin>>n>>q>>m;\n    for(int i=1;i<=n;i++)cin>>a[i];\n    for(int i=1;i<=q;i++)cin>>c[i][1]>>c[i][2]>>c[i][3];\n    while(m--){\n\tint x;\n\tcin>>x;\n\tfor(int i=q;i>=1;i--){\n\t    if(x<c[i][2]||x>c[i][3])continue;\n            if(c[i][1]==1){\n\t\tif(x==c[i][2])x=c[i][3];\n\t\telse x--;\n\t    }\n            else x=c[i][2]+c[i][3]-x;\n\t}\n\tcout<<a[x]<<\" \";\n    }\n    return 0;\n}\n```\n",
        "postTime": 1651404668,
        "uid": 305424,
        "name": "yuheng_wang080904",
        "ccfLevel": 0,
        "title": "CF863D"
    },
    {
        "content": "\u770b\u4e86\u770b\u9898\u89e3\uff0c\u6709\u6253\u5e73\u8861\u6811\u7684\uff0c\u8fd8\u6709\u94fe\u8868\n\n##### \u4f46\u6211\u4e0d\u7528\u9ad8\u7ea7\u7b97\u6cd5\uff0c\u8d85\u7ea7\u7b80\u5355\n\n## \u601d\u8def\n\n\u56e0\u4e3a\u770b\u5230\u6570\u636e\u8303\u56f4\uff0cm<100,\u6240\u4ee5\u8003\u8651\n\n##### <u>\u5012\u63a8</u>\u7684\u601d\u8def\n\n\u8bb0\u5f55\u4e0b\u6bcf\u4e2a\u64cd\u4f5c\uff0c\u7136\u540e\u5012\u7740\u63a8\u56de\u53bb\n\n\u8bbe\u5f53\u524d\u4f4d\u7f6e\u4e3ax\n\n\u5bf9\u4e8e1\u64cd\u4f5c\uff0cx--(\u6ce8\u610f\u8fb9\u754c)\n\n\u5bf9\u4e8e2,x=l+r-x.\n\n##### ~~\u5c31\u8fd9\uff1f~~\n\n## code\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\ntemplate <typename T>\ninline void rd(T &x) {\n\tx=0;\n\tchar ch=getchar();\n\tbool f=false;\n\twhile(!isdigit(ch)) {\n\t\tif(ch=='-') {\n\t\t\tf=true;\n\t\t}\n\t\tch=getchar();\n\t}\n\twhile(isdigit(ch)) {\n\t\tx=(x<<1)+(x<<3)+(ch^48);\n\t\tch=getchar();\n\t}\n\tx=f?-x:x;\n\treturn ;\n}\ntemplate <typename T>\ninline void wr(T x) {\n\tif(x<0) putchar('-'),x=-x;\n\tif(x>9) wr(x/10);\n\tputchar(x%10^48);\n\treturn ;\n}\nconst int N=2e5+10;\n\nint n,q,m;\nint a[N],b[N];\n//m\u7a81\u7834\u53e3\nstruct node {\n\tint op,l,r;\n} qus[N];\nint main() {\n\trd(n),rd(q),rd(m);\n\tfor(int i=1; i<=n; i++) {\n\t\trd(a[i]);\n\t}\n\tfor(int i=1; i<=q; i++) {\n\t\trd(qus[i].op),rd(qus[i].l),rd(qus[i].r);\n\t}\n\tfor(int o=1; o<=m; o++) {\n\t\tint x;\n\t\trd(x);\n\t\tfor(int i=q; i>0; i--) {\n\t\t\tif(qus[i].l<=x&&x<=qus[i].r) {\n\t\t\t\tif(qus[i].op==1) {\n\t\t\t\t\tif(x==qus[i].l)x=qus[i].r;\n\t\t\t\t\telse x--;\n\t\t\t\t} else {\n\t\t\t\t\tx=qus[i].l+qus[i].r-x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\tprintf(\"%d \",a[x]);\n\t}\n\treturn 0;\n}\n```\n\n\n\n",
        "postTime": 1611907272,
        "uid": 125212,
        "name": "Skies",
        "ccfLevel": 5,
        "title": "CF863D Yet Another Array Queries Problem \u9898\u89e3"
    },
    {
        "content": "**\u6ce8\u610f\uff1a\u8fd9\u7bc7\u9898\u89e3\u662f\u5199\u7ed9\u50cf\u6211\u8fd9\u6837\u4e0d\u4f1a\u90a3\u4e2a\u4ec0\u4e48\u4ec0\u4e48\u5e73\u8861\u6811\u7684\u840c\u65b0\u770b\u7684\uff0c\u5927\u4f6c\u8bf7\u81ea\u52a8\u8df3\u8fc7\u3002**\n\n### \u7b80\u5355\u6613\u61c2\u7684\u89e3\u6cd5\uff1a\u5012\u63a8\n\n\u56de\u5f52\u6b63\u9898\u3002\n\n\u8fd9\u9898\u5982\u679c\u662f\u66b4\u529b\u7684\u8bdd\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a $O(nq)$\uff0c\u80af\u5b9a\u662f\u4f1a\u70b8\u7684\uff0c\u4e8e\u662f\u5c31\u53ef\u4ee5\u5229\u7528 $m$ \u5f88\u5c0f\u8fd9\u7279\u6b8a\u6027\u8d28\uff0c\u628a\u65f6\u95f4\u590d\u6742\u5ea6\u8ddf $m$ \u626f\u4e0a\u5173\u7cfb\uff0c\u4e8e\u662f\u5c31\u60f3\u5230\u4e86\u5012\u63a8\u3002\n\n\u600e\u4e48\u5012\u63a8\u5462\uff1f\u5176\u5b9e\u5f88\u7b80\u5355\u3002\n\n#### \u5148\u8bb2\u660e\u767d\u6b63\u5e8f\u7684\u64cd\u4f5c\u5427\n\n- \u5982\u679c $t_i=1$\uff0c\u4e0d\u59a8\u8bbe\u5f53\u524d\u4e0b\u6807\u4e3a $x$:  \n$\\circ$ \u5982\u679c $x\\lt l_i$ \u6216\u8005 $x\\gt r_i$\uff08\u65e2 $x$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u5916\u9762\uff09\u5219\u4e0d\u505a\u64cd\u4f5c\u3002  \n$\\circ$ \u53cd\u4e4b\uff0c$x$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u91cc\u9762\uff0c\u5982\u679c $x=r_i$\uff0c\u5219 $x\\gets l_i$\uff0c\u5426\u5219 $x\\gets x+1$\u3002\n- \u5982\u679c $t_i=2$\uff0c\u540c\u7406\uff0c\u4e0d\u59a8\u8bbe\u5f53\u524d\u4e0b\u6807\u4e3a $x$:  \n$\\circ$ \u5982\u679c $x\\lt l_i$ \u6216\u8005 $x\\gt r_i$\uff08\u65e2 $x$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u5916\u9762\uff09\u5219\u4e0d\u505a\u64cd\u4f5c\u3002  \n$\\circ$ \u53cd\u4e4b\uff0c$x$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u91cc\u9762\uff0c\u7531\u4e8e\u662f\u5bf9\u7ffb\u8f6c\u64cd\u4f5c\uff0c\u8bbe $x$ \u7684\u7ffb\u8f6c\u540e\u5728 $x'$\uff0c\u5219\u6ee1\u8db3\u4e00\u4e2a\u6027\u8d28\uff1a$x+x'=l_i+r_i$\uff0c\u6240\u4ee5 $x\\gets l_i+r_i-x$\u3002\n\n#### \u90a3\u518d\u6765\u770b\u770b\u5012\u5e8f\u7684\u60c5\u51b5\u3002\n\n\u9996\u5148\uff0c\u8bb0\u5f55\u5f53\u524d\u7684\u4e0b\u6807 $now_b$\uff0c\u521d\u503c $now_b=b_i$\u3002  \n\u4ece\u540e\u5f80\u524d\u5012\u5e8f\u679a\u4e3e\u6bcf\u4e2a\u64cd\u4f5c\uff0c\u8ba1\u8fd9\u662f\u7b2c $j$ \u4e2a\u64cd\u4f5c\uff1a\n\n- \u5982\u679c $t_i=1$:  \n$\\circ$ \u4e0e\u6b63\u5e8f\u4e00\u6837\uff0c\u5982\u679c $now_b\\lt l_i$ \u6216\u8005 $now_b\\gt r_i$\uff08\u65e2 $now_b$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u5916\u9762\uff09\u5219\u4e0d\u505a\u64cd\u4f5c\u3002  \n$\\circ$ \u53cd\u4e4b\uff0c$now_b$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u91cc\u9762\uff0c\u64cd\u4f5c\u5373\u4e3a\u6b63\u5e8f\u7684\u64a4\u9500\u64cd\u4f5c\uff0c\u5982\u679c $x=l_i$\uff0c\u5219 $now_b\\gets r_i$\uff0c\u5426\u5219 $now_b\\gets now_b-1$\u3002\n- \u5982\u679c $t_i=2$:  \n$\\circ$ \u4e0e\u6b63\u5e8f\u4e00\u6837\uff0c\u5982\u679c $now_b\\lt l_i$ \u6216\u8005 $now_b\\gt r_i$\uff08\u65e2 $now_b$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u5916\u9762\uff09\u5219\u4e0d\u505a\u64cd\u4f5c\u3002  \n$\\circ$ \u53cd\u4e4b\uff0c$now_b$ \u5728\u64cd\u4f5c\u533a\u95f4\u7684\u91cc\u9762\uff0c\u64cd\u4f5c\u5176\u5b9e\u4e0e\u6b63\u5e8f\u65f6\u4e00\u6837\uff0c\u7531\u4e8e\u662f\u5bf9\u7ffb\u8f6c\u64cd\u4f5c\uff0c\u8bbe $now_b$ \u7684\u7ffb\u8f6c\u540e\u5728 $now_b'$\uff0c$now_b\\gets l_i+r_i-now_b$\u3002\n\n\u6700\u540e\u8f93\u51fa $a_{now_b}$ \u5373\u53ef\u3002\n\n### \u4ee3\u7801\uff0c\u4ec5\u4f9b\u53c2\u8003\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nint n,m,q,a[200010],t[200010],l[200010],r[200010];\nint main(){\n\tscanf(\"%d%d%d\",&n,&q,&m);\n\tfor(int i=1;i<=n;i++) scanf(\"%d\",&a[i]);\n\tfor(int i=1;i<=q;i++) scanf(\"%d%d%d\",&t[i],&l[i],&r[i]);\n\tfor(int i=1;i<=m;i++){\n\t\tint b;\n\t\tscanf(\"%d\",&b);\n\t\tfor(int j=q;j>=1;j--){\n\t\t\tif(l[j]>b||r[j]<b) continue;\n\t\t\tif(t[j]==1){\n\t\t\t\tif(b==l[j]) b=r[j];\n\t\t\t\telse b--;\n\t\t\t}\n\t\t\telse b=l[j]+r[j]-b;\n\t\t}\n\t\tprintf(\"%d \",a[b]);\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1679147249,
        "uid": 528325,
        "name": "fengxiaoyi",
        "ccfLevel": 0,
        "title": "CF863D\u9898\u89e3"
    },
    {
        "content": "#### ~~\u849f\u84bb\u4e0d\u4f1a\u7ebf\u6bb5\u6811\u5e73\u8861\u6811\uff0c\u968f\u4fbf\u778e\u5199~~\n\n\u62ff\u5230\u9898\u6211\u4eec\u9996\u5148\u770b\u6570\u636e\uff0c$1\u2264n$,$q\u2264200000$,$1\u2264m\u2264100$\u3002\n\u53ef\u4ee5\u4f30\u8ba1$nq$\u6216\u8005$mq$\u90fd\u662f\u53ef\u4ee5\u901a\u8fc7\u7684\u3002\n\n\u7136\u800c\u6ca1\u6709\u7cbe\u901a\u7ebf\u6bb5\u6811\u6216\u8005\u5e73\u8861\u6811\u7684\u6211\u53ea\u597d\u64cd\u4f5c\u4e0b\u6807\u6765\u505a\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4e0d\u7528\u7ba1\u4efb\u4f55\u64cd\u4f5c\uff0c\u628a\u64cd\u4f5c\u548c\u6570\u5b58\u4e0b\u6765\u3002\u4e0d\u7ba1\u64cd\u4f5c\u5bf9\u6570\u7684\u5b9e\u9645\u5f71\u54cd\u800c\u53ea\u9700\u8981\u5728\u8be2\u95ee\u65f6\u5bf9\u4e0b\u6807\u8fdb\u884c\u5012\u63a8\u64cd\u4f5c\u627e\u5230\u539f\u5750\u6807\u3002\n```\n6 3 5\n1 2 3 4 5 6\n2 1 3\n2 3 6\n1 1 6\n2 2 1 5 3\n```\n\u4f8b\u5982\u6837\u4f8b\u8be2\u95ee2\u53f7\u5750\u6807\uff0c\u6211\u4eec\u770b\u6700\u540e\u4e00\u6b21\u5c06$1$~$6$\u53f3\u79fb\uff0c\u6240\u4ee5\u518d\u6b21\u4e4b\u524d\u662f$1$\u53f7\u5750\u6807\uff0c\u5012\u6570\u7b2c\u4e8c\u6b21\u64cd\u4f5c\u662f$3$~$6$\u4ea4\u6362\uff0c\u6240\u4ee5\u65e0\u5173\u4e8e$1$\uff0c\u7b2c\u4e00\u6b21\u4e3a$1$~$3$\u4ea4\u6362\uff0c\u4ea4\u6362\u524d\u4e3a$3$\u53f7\u5750\u6807\uff0c\u6240\u4ee5\u8f93\u51fa$x[3]=3$\u3002\n\n\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\u8be2\u95ee\u6b21\u6570$m\u00d7q$\u64cd\u4f5c\u6b21\u6570\uff0c\u5373$m\u00d7q=2\u00d710000000$\u3002\u53d1\u73b0\u4ecd\u7136\u80fd\u6c34\u8fc7\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5e73\u8861\u6811\u7ebf\u6bb5\u6811\u5c31\u80fd\u505a\u3002\n\n\u6211\u4eec\u7528$a[i][0]$\u8868\u793a\u5bf9\u4e8e\u7b2ci\u4e2a\u64cd\u4f5c\u5982\u679c\u662f\u53f3\u79fb\u7684\u8d77\u59cb\u70b9\uff0c$a[i][1]$\u8868\u793a\u7ec8\u6b62\u70b9\u3002$b[i][0]$\u8868\u793a\u7b2c$i$\u4e2a\u64cd\u4f5c\u5982\u679c\u662f\u53cd\u8f6c\u7684\u8d77\u59cb\u70b9\uff0c$b[i][1]$\u8868\u793a\u7ec8\u6b62\u70b9\u3002\u5176\u5b9e\u5b8c\u5168\u6ca1\u6709\u5fc5\u8981\u5206\u5f00\uff0c\u4f46\u8fd9\u6837\u4e5f\u884c\u3002\u7528$ch[i]$\u8868\u793a\u662f\u8fd9\u662f\u53f3\u79fb\u64cd\u4f5c\u8fd8\u662f\u53cd\u8f6c\u64cd\u4f5c\u3002\n\n\u6b63\u89e3\u5982\u4e0b\uff1a\n\n\n```cpp\n#include<bits/stdc++.h>\nusing namespace std;\n\ntemplate <typename T>\ninline void read(T&x){\n    x=0;char ch=getchar();bool f=false;\n    while(!isdigit(ch)){if(ch=='-'){f=true;}ch=getchar();}\n    while(isdigit(ch)){x=(x<<1)+(x<<3)+(ch^48);ch=getchar();}\n    x=f?-x:x;\n    return;\n}\n\ntemplate <typename T>\ninline void write(T x){\n    if(x<0) putchar('-'),x=-x;\n    if(x>9) write(x/10);\n\tputchar(x%10^48);\n    return;\n}\t\t\t\t\t\t\t\t\t\t\t\t\t//\u5feb\u8bfb(\u53ef\u4ee5\u8bfb\u5165long long\u548cint)\n\nint n, m, q, ch[200005];\nint a[200005][2], b[200005][2], x[200005], w;\n\nint main(){\n\tread(n), read(q), read(m);\n\tfor(int i = 1; i <= n; i++){\n\t\tread(x[i]);\n\t}\n\tfor(int i = 1; i <= q; i++){\n\t\tread(ch[i]);\n\t\tif(ch[i] == 1)\n\t\t\tread(a[i][0]), read(a[i][1]);\n\t\tif(ch[i] == 2)\n\t\t\tread(b[i][0]), read(b[i][1]);\n\t}\n\tfor(int i = 1; i <= m; i++){\n\t\tread(w);\n\t\tint k = w;\n\t\tfor(int j = q; j >= 1; j--){\n\t\t\tif(ch[j] == 2){\n\t\t\t\tif(k >= b[j][0] && k <= b[j][1]){\n\t\t\t\t\tk = b[j][1] + b[j][0] - k; \n\t\t\t\t}\n\t\t\t}\n\t\t\tif(ch[j] == 1){\n\t\t\t\tif(k >= a[j][0] && k <= a[j][1]){\n\t\t\t\t\tif(k == a[j][0])\n\t\t\t\t\t\tk = a[j][1];\n\t\t\t\t\telse\tk--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twrite(x[k]);\n\t\tprintf(\" \");\n\t}\n\treturn 0;\n}\n```\n",
        "postTime": 1611922938,
        "uid": 128817,
        "name": "Zzzzzzzm",
        "ccfLevel": 6,
        "title": "CF863D Yet Another Array Queries Problem \u9898\u89e3"
    },
    {
        "content": "\u8fd9\u9053\u9898CF\u5b98\u65b9\u7ed9\u7684\u6807\u7b7e\u662f\u6570\u636e\u7ed3\u6784\uff0c\u94fe\u8868\u3002\n\n\u4f46\u662f\u6211\u4eec\u89c2\u5bdf\u6570\u636e\u53ef\u4ee5\u53d1\u73b0m\u6700\u5927\u53ea\u6709100\uff0c\u6240\u4ee5...\u76f4\u63a5\u5f00\u4e00\u4e2a\u6570\u7ec4\u6a21\u62df\u5c31ok\u4e86\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u4f18\u5316\uff0c\n\u6309\u987a\u5e8f\u79bb\u7ebf\u64cd\u4f5c\uff1a\n\n```\n#include<bits/stdc++.h>\nusing namespace std;\nconst int N = 2e5+5;\nstruct x{\n  int id, l, r;\n}qq[N];\nint n, q, m, p,a[N];\nint main() {\n  scanf(\"%d%d%d\",&n,&q,&m);\n  for (int i = 1; i <= n; i++)scanf(\"%d\",&a[i]);  \n  for (int i = 1; i <= q; i++)scanf(\"%d%d%d\",&qq[i].id,&qq[i].l,&qq[i].r) ;\n  while(m--){\n    scanf(\"%d\", &p);\n    for (int i = q; i >= 1; i--) {\n      if (qq[i].l <= p && qq[i].r >= p) {\n       if (qq[i].id == 1) {\n          if(qq[i].l == p) p =qq[i].r;\n           else p--;\n        }\n      else p =qq[i].r+qq[i].l-p;\n      }\n    }\n    printf(\"%d \", a[p]);\n  }\n  return 0;\n}\n```",
        "postTime": 1533292227,
        "uid": 47269,
        "name": "yzx72424",
        "ccfLevel": 0,
        "title": "\u9898\u89e3 CF863D \u3010Yet Another Array Queries Problem\u3011"
    }
]